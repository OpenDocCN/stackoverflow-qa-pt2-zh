# StackOverflow 问答 13184000-13184999

# actionscript-3 - Flex 鼠标光标类型 - 或 - 确定组件是否为控件

> ID：13184000
> 
> 赞同：0
> 
> 时间：2012-11-01T19:17:43.577
> 
> 标签：actionscript-3, apache-flex, flex4

您将如何以编程方式获取应用程序当前使用的光标类型？我想检查它是否是`MouseCursor.HAND`.

我这样做的原因是我在应用程序级别有一个掩码，当该组件中的数据在线编辑时（例如`DataGrid`），我将它放置在该组件周围。如果用户在编辑时单击组件外部，我会显示一条警告，警告他们在编辑期间无法离开。

我只想`preventDefault()`在用户点击“可点击”组件时显示警报；即可能导致他们离开或打开另一个窗口的一个。但是当他们点击不可点击的组件时允许点击；例如空格，或者他们想要复制的一段文本。

非常欢迎对我的原始问题或替代解决方案提供任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:44:37.093

为什么不设置一个布尔值：

```
private var _isEditing:Boolean = false; 
```

然后当他们开始编辑 set _isEditing = true; 当他们保存或退出时 _isEditing = false;

然后在可操作组件的点击处理程序上检查标志：

```
if (_isEditing){
    Alert.show("hey you can't do this");
} else {
    do whatever else here
} 
```

# java - 在 Java 中处理 HTTP 调用的大文件

> ID：13184005
> 
> 赞同：1
> 
> 时间：2012-11-01T19:18:11.283
> 
> 标签：java, multithreading, file, http

我有一个需要处理的包含数百万行的文件。文件的每一行都会产生一个 HTTP 调用。我试图找出解决问题的最佳方法。

我显然可以读取文件并按顺序进行调用，但这会非常慢。我想并行化调用，但我不确定是否应该将整个文件读入内存（我不太喜欢）或尝试并行化文件的读取（我'我不确定是否有意义）。

只是在这里寻找一些关于解决问题的最佳方法的想法。如果有一个现有的框架或库可以做类似的事情，我也很乐意使用它。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:20:01.030

> 我想并行化调用，但我不确定是否应该将整个文件读入内存

你应该使用一个`ExecutorService`有界的`BlockingQueue`。当您阅读百万行时，您会将作业提交到线程池，直到线程池`BlockingQueue`已满。这样，您将能够同时运行 100 个（或任何最佳数量）的 HTTP 请求，而无需事先读取文件的所有行。

`RejectedExecutionHandler`如果队列已满，您需要设置一个阻止。这比调用者运行处理程序要好。

```
BlockingQueue<Runnable> queue = new ArrayBlockingQueue<Runnable>(100);
// NOTE: you want the min and max thread numbers here to be the same value
ThreadPoolExecutor threadPool =
    new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, queue);
// we need our RejectedExecutionHandler to block if the queue is full
threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {
       @Override
       public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
           try {
                // this will block the producer until there's room in the queue
                executor.getQueue().put(r);
           } catch (InterruptedException e) {
                throw new RejectedExecutionException(
                   "Unexpected InterruptedException", e);
           }
    }
});

// now read in the urls
while ((String url = urlReader.readLine()) != null) {
    // submit them to the thread-pool.  this may block.
    threadPool.submit(new DownloadUrlRunnable(url));
}
// after we submit we have to shutdown the pool
threadPool.shutdown();
// wait for them to complete
threadPool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);

...
private class DownloadUrlRunnable implements Runnable {
    private final String url;
    public DownloadUrlRunnable(String url) {
       this.url = url;
    }
    public void run() {
       // download the URL
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:29:43.000

格雷的方法似乎很好。我建议的另一种方法是将文件分成块（您必须编写逻辑），并使用多个线程处理这些文件。

# c++ - Mac 上 QT 中的 Bullet Physics Hello World

> ID：13184010
> 
> 赞同：1
> 
> 时间：2012-11-01T19:18:44.823
> 
> 标签：c++, bulletphysics

我在 Mac 上使用 QT 创建 hello world Bullet 项目时遇到问题。Bullet 库已构建，我正在使用[此处找到的 Hello World 代码](http://bulletphysics.org/mediawiki-1.5.8/index.php/Hello_World)

这是编译输出的内容：

```
Undefined symbols:
"_maxdot_large(float const*, float const*, unsigned long, float*)", referenced from:
  __ZL17convexHullSupportRK9btVector3PS0_iS1_ in libBulletCollision.a(btConvexShape.o)
  btPolyhedralConvexShape::batchedUnitVectorGetSupportingVertexWithoutMargin(btVector3 const*, btVector3*, int) constin libBulletCollision.a(btPolyhedralConvexShape.o)
  btPolyhedralConvexShape::localGetSupportingVertexWithoutMargin(btVector3 const&) constin libBulletCollision.a(btPolyhedralConvexShape.o)
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [helloWorldBullet.app/Contents/MacOS/helloWorldBullet] Error 1
12:45:12: The process "/usr/bin/make" exited with code 2.
Error while building project helloWorldBullet (target: Desktop)
When executing build step 'Make' 
```

该项目发现库很好，但它给了我这个错误。我通过终端查看了子弹库，它说 maxdot_large 是未定义的。

有人遇到过这个问题吗？有任何想法吗？

# cocoa - 如何在绑定场景中设置 NSButton 的操作？

> ID：13184012
> 
> 赞同：1
> 
> 时间：2012-11-01T19:18:46.000
> 
> 标签：cocoa, binding, nsbutton, nscollectionview

我有一个在 NSCollectionView 内重复的视图内的按钮。我可以将按钮的标题绑定到模型类中的属性之一，但我想将按钮的选择器连接到模型类中的选择器之一。显然，按钮必须将消息发送到与相应集合视图项关联的模型对象。我设法绑定了按钮的目标，但如何设置选择器？如果可能的话，我想在 Interface Builder 中这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T09:36:45.767

如何添加这些盲点？我还是找不到。

![看？](../Images/f2167293eb4fe1dbe79e8fd889c64a34.png)

我找到了 。它在这里。

![在此处输入图像描述](../Images/7044cb2877b3329fdd2e62047c12175e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:00:27.657

我想到了。在 Ib 中，在我绑定目标的路径文本框下方有一个选择器文本框。我不知道为什么我没有看到它。我花了将近一个小时试图解决这个问题。

# asp.net-mvc - 数据作为查询字符串而不是表单数据发送

> ID：13184015
> 
> 赞同：0
> 
> 时间：2012-11-01T19:19:05.593
> 
> 标签：asp.net-mvc, form-data

在我的表单中，我看到数据作为 Querystring 而不是表单数据（我期望它）发送。

我的页面：

```
@using (Html.BeginForm("AAForm", "Test", FormMethod.Post, new { id = "myAForm" }))
{
   <label for="a">A</label>
   <input id="aid" name="aname" style="width: 300px" required validationMessage="Select"/>
   <button type="submit" class="btn btn-primary" value="aa" > Go </button>
   } 
```

控制器签名

> public ActionResult GetValues(FormCollection formCollection){ //一些代码 }

我正在对 GetValues() 进行 AJAX 调用。

我可能做错了什么？请让我知道我是否应该发布更多信息。

另一个问题：查询字符串中的“_:”是什么？它有一些随机数值。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:22:27.867

在`[HttpPost]`您的`ActionResult`.

# asp.net-mvc-3 - 验证如何在数据库优先的 dbContext（EF4.3.1 和 MVC3）中工作？

> ID：13184018
> 
> 赞同：1
> 
> 时间：2012-11-01T19:19:23.993
> 
> 标签：asp.net-mvc-3, entity-framework, validation, dbcontext

验证如何在数据库优先`DbContext`（EF4.3.1 和 MVC3）中工作？

我正在这样做（是的，它是 VB）：

```
If ModelState.IsValid Then
    db.SaveChanges() 
```

但`SaveChanges`抛出`DbEntityValidationException`以下消息：

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

我希望它再次返回带有适当验证消息的视图，但显然我遗漏了一些东西，因为我不知道为什么它应该这样工作！您可能希望 Google 提供帮助，但大多数示例似乎都是代码优先的。

这是数据库优先，所以模型已经生成。我希望也会生成验证约束（至少像 SQL Server 中的 NOT NULL 这样简单的约束），但这似乎不起作用。

奇怪的是，一些字段按预期工作，而另一些则没有。

例如，我在数据库中有一个不可为空的文本字段。它在 EF 设计器和生成的代码中显示为不可为空。但是当我提交它时，我得到了异常，而不是返回突出显示该字段的表单。

另一方面，我有一个不可为空的日期字段。在尝试更新数据库之前对其进行检查，并再次显示表单，并突出显示字段以进行更正。

# android - 如何从另一个活动访问活动视图

> ID：13184022
> 
> 赞同：1
> 
> 时间：2012-11-01T19:19:33.710
> 
> 标签：android

我需要从子活动中隐藏 TabHost 的选项卡。我试过`getParent()`了，但没有用

也试过：

```
TabHost th = (TabHost) ((TabsActivity)getBaseContext()).findViewById(android.R.id.tabhost);
        th.setVisibility(View.INVISIBLE); 
```

但它抛出一个空指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:02:31.843

永远不要从 current直接访问`Views`other 拥有的，因为它们可能在此期间被回收（因为其他可能在此期间被破坏）。`Activities``Activity``Activity`

你需要以`Activity`标准的方式与对方沟通。例如，您的孩子`Activity`可以将结果返回给父母`Activity`，然后它可以解释（您可以将值放入`Intent`）。另一种解决方案是使用静态变量，但这不太好，如果你不够小心，会有风险。

有关活动之间通信的更多信息，请参阅[this](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)和[this](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:54:04.047

您将无法直接操作当前不在前台的 Activity 的视图层次结构，因为它可能会被暂停和停止，在这种情况下，它的 UI 已经被破坏并且不会被重建，直到它返回前景。你应该考虑在 Activity 生命周期中发生了什么来帮助你解决这个问题。一个快速而肮脏的解决方案可能是托管选项卡的 Activity 有一个可以由其他 Activity 设置的公共静态变量；这样当它恢复在前台运行时，它可以检查该变量并根据需要使视图可见或不可见

# opengl - 使用 GL_LINE_STRIP 绘制 OpenGL 正交草图

> ID：13184033
> 
> 赞同：3
> 
> 时间：2012-11-01T19:20:21.660
> 
> 标签：opengl, shader, projection, orthographic

在将我的草图线绘制到屏幕上时，我遇到了 openGL 的问题，因为它似乎在原点添加了一个额外的点，而该点不在点列表中：

[![图像](../Images/fa42ae32d0ade65149590097b017475d.png)](https://i.imgur.com/SwOrZ.png)

(0,0) 绝对不在要绘制的数组中的点中，只是似乎无法推理出来。我猜可能是我的数组大小太大或其他什么，但我看不到它

这是我用于填充数组和绘制调用的代码

```
void PointArray::repopulateObjectBuffer()
{
  //Rebind Appropriate VAO
  glBindVertexArray( vertex_array_object_id );

  //Recalculate Array Size
  vertexArraySize = points.size()*sizeof(glm::vec2);

  //Rebind Appropriate VBO
  glBindBuffer( GL_ARRAY_BUFFER, buffer_object_id );
  glBufferData( GL_ARRAY_BUFFER, vertexArraySize, NULL, GL_STATIC_DRAW );
  glBufferSubData( GL_ARRAY_BUFFER, 0, vertexArraySize, (const GLvoid*)(&points[0]) );

  //Set up Vertex Arrays  
  glEnableVertexAttribArray( 0 ); //SimpleShader attrib at position 0 = "vPosition"
  glVertexAttribPointer( (GLuint)0, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0) );

  //Unbind
  glBindBuffer(GL_ARRAY_BUFFER, 0);
  glBindVertexArray(0);
}

void PointArray::draw() {
glBindVertexArray(vertex_array_object_id);

glLineWidth(4);
glDrawArrays( GL_LINE_STRIP, 0, vertexArraySize );

glBindVertexArray(0);
} 
```

这是我在鼠标回调中添加点的地方

```
void mouseMovement(int x, int y) 
{
  mouseDX = x - lastX ;
  mouseDY = y - lastY ;
  lastX = x;
  lastY = y;

  if(mouse_drag)
  {
    cam->RotateByMouse(glm::vec2(mouseDX*mouseSens, mouseDY * mouseSens));
  }
  if(sketching)
  {
    sketchLine.addPoint(glm::vec2((float)x,(float)y));
    sketchLine.repopulateObjectBuffer();
    updatePickray(x,y);
  }
} 
```

最后是我简单的正交顶点着色器

```
in vec2 vPosition;

void main(){

const float right = 800.0;
const float bottom = 600.0;
const float left = 0.0;
const float top = 0.0;
const float far = 1.0;
const float near = -1.0;

 mat4 orthoMat = mat4(
    vec4(2.0 / (right - left),              0,                                0,                            0),
    vec4(0,                                 2.0 / (top - bottom),             0,                            0),
    vec4(0,                                 0,                               -2.0 / (far - near),           0),
    vec4(-(right + left) / (right - left), -(top + bottom) / (top - bottom), -(far + near) / (far - near),  1)
);

gl_Position = orthoMat * vec4(vPosition, 0.0, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:26:22.417

您似乎将其`vertexArraySize`用作 glDrawArrays 的参数，这是不正确的。glDrawArrays 的计数应该是顶点数，而不是顶点数组的字节数。

在你的情况下，我想它会是`glDrawArrays( GL_LINE_STRIP, 0, points.size());`。

# facebook - 维护用户会话（在 Facebook O-Auth、服务器端登录之后）

> ID：13184034
> 
> 赞同：4
> 
> 时间：2012-11-01T19:20:22.777
> 
> 标签：facebook, session, cookies, oauth-2.0, session-cookies

我正在编写一个使用 O-Auth 的“与 Facebook 连接”的移动应用程序，以便：

```
1) Let Facebook deal with the authentication
2) Not force my users to register to another website
3) Get Facebook information 
```

我已经实现了 Facebook 的服务器端登录（在 JAVA 中）：

[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

我不明白一旦用户连接到 facebook，我该如何维护用户会话。

这是从端到端的流程，如果我错了，请纠正我。

```
1) The user logs into my server (Android APP using WebView)
2) The server redirect the user to Facebook (with client_id, redirect_url, state and permissions)
3) The user is now facing Facebook's login dialog.
  3.1) If the user deny: Facebook calls the redirect_url and notify the server that there was an error. (Flow Ends here)
  3.2) If the user accept: Facebook calls the redirect_url (my server) with the state i've set (for CSRF protection) and a code.
4) The server contacts Facebook and send it the app_id, redirect_url, client_secret and code and in return, facebook calls the redirect_url with a valid token. This token allows the server to issue facebook API calls on behalf of the user. 
```

到目前为止，一切都很好。现在到主要问题 - 会话管理。

现在我得到了令牌，我需要弄清楚它属于哪个用户，这样我就可以从我的数据库中获取数据或创建一个新条目（如果是新用户）。

1）我应该使用什么样的标识符来识别我的服务器数据库中的用户？（我是否需要调用 Facebook API 来检索基本信息并从中提取电子邮件和/或唯一 ID？

2) 获得此唯一 ID 后，如何再次联系用户？在第 2 步，服务器将他重定向到 Facebook，这意味着他打开了与 Facebook 的新连接，并且他不再连接到服务器。现在他走了，我怎么给他做饼干？<-- ****这部分对我来说是最令人困惑的。****

3）什么时候我需要在用户的请求上设置一个会话 ID（cookie），以便下次他联系我时我会知道它是谁。

我认为堆栈溢出是说明我的问题的最佳示例。我点击了“与 facebook 连接”按钮，突然间我成为了 Stack Overflow 的用户，没有任何注册。堆栈溢出如何知道如何提取我已经提出的问题？它是如何识别我的？在我描述的链条中的哪个点上，它在我的请求中设置了一个 cookie？

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:49:24.970

1.  您遇到了关于 OAuth 的基本误解之一：OAuth 就是关于**授权**的。用户授予*您*（*客户）代表**他*访问数据的权限。如果您想对用户进行**身份验证**，一些提供商允许您访问一个**唯一 ID**，以便您区分用户。所以，是的，如果你想识别一个用户，你必须请求他的**唯一 id**。

2.  有多种方法可以做到这一点。所有这些都是关于在重定向用户**之前**生成您存储的**唯一会话 ID 。**一旦用户回来，他会返回一个**id**给你。如果您看到您发布并存储了该**id**，则删除该**id**并且您知道您正在与哪个用户交谈。您可以将此**id**存储在 cookie 中，也可以将其作为参数的一部分传递。**********`state`**********

*******   重定向之前的任何时间都是可能的。如果您想随时知道正在与哪个用户交谈，只需在他第一次呼叫您时执行此操作即可。******

# joomla - Joomla 文章每页显示一个不需要的 1 个

> ID：13184035
> 
> 赞同：2
> 
> 时间：2012-11-01T19:20:32.823
> 
> 标签：joomla

一个多月以来，我试图为我的网站寻求帮助，但没有一个人能够帮助我。我相信如果有人只是简单地访问我网站的后端，那么它可能会很快得到修复。

我的问题是我有一篇文章每页都显示 1。我相信“1”被一位前开发人员取代，可能是文章标题所在的位置。当我用 Firebug 将鼠标悬停在它上面时，它显示：

```
<div class="item-page">
1
<p></p>
</div> 
```

我个人已经花了大约 9 个小时试图找到它。有人建议我多次查看模板区域。当我切换模板时，1 仍然出现在文章中。这似乎无关紧要，我正在使用 Rockettheme。

请不要推荐我只是去文章管理器修复它；那是我看的第一个地方。请记住，它会出现在每篇单篇文章中。

我将非常感谢任何帮助；我在这里有点绝望。

感谢您的时间！！

我不知道为什么我的问题被否决了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:38:10.370

这是很多年前就存在的错误。您需要更新到 Joomla 的当前版本。（不迁移——更新到您版本的当前版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:12:20.093

尝试禁用所有内容插件，看看它是否消失。内容插件之一可能正在向文章添加内容。

# objective-c - 如何在 ScrollView 中居中 UIImageView（缩放）

> ID：13184038
> 
> 赞同：0
> 
> 时间：2012-11-01T19:20:35.943
> 
> 标签：objective-c, uiscrollview, uiimageview, zooming

我正在尝试将 UIImageView 放大`UIScrollView`。我有这个：

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
return imageView;
}

-(void)scrollViewDidZoom:(UIScrollView *)scrollView {
[imageView setCenter:CGPointMake(scrollView.center.x, scrollView.center.y)];
}

-(void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {
} 
```

问题是：当我缩小图像时，它居中，但是当我放大时，图像移动到左上角。

我的代码哪里有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:30:17.097

答案是全部删除`scrollViewDidZoom:`并添加：

```
[self centerScrollViewContent]; 
```

方法实现：

```
- (void)centerScrollViewContents {
CGSize boundsSize = self.scrollView.bounds.size;
CGRect contentsFrame = self.containerView.frame;

if (contentsFrame.size.width < boundsSize.width) {
    contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
} else {
    contentsFrame.origin.x = 0.0f;
}

if (contentsFrame.size.height < boundsSize.height) {
    contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
} else {
    contentsFrame.origin.y = 0.0f;
}

self.containerView.frame = contentsFrame;
} 
```

# javascript - 如果渲染了任何其他视图，则重新渲染主干视图

> ID：13184041
> 
> 赞同：0
> 
> 时间：2012-11-01T19:20:47.617
> 
> 标签：javascript, backbone.js, backbone-events

我有一个 TooltipView，只要将鼠标悬停在带有类的元素上，它就会弹出，`.tooltip`并获取该元素`data-tooltip`属性的内容并将其显示在工具提示中。
我在它的初始化函数中绑定了 TooltipView 的事件，但问题是如果另一个视图是动态创建的，或者重新渲染，那么 TooltipView 不知道它。

```
var tooltipView =  Backbone.View.extend({
    el: '#tooltip-container',

    initialize: function() {
        $('.tooltip').on('mouseover', function() {
             ....
        }
    }
} 
```

我知道我可以在渲染每个视图时手动触发事件，但是是否可以仅从 TooltipView 中进行操作？
我希望 TooltipView 监听要渲染的任何视图，然后重新渲染自身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:21:55.593

也许将事件附加到更高的 DOM 级别对您有用：

```
initialize: function() {
    $('body').on('mouseover', '.tooltip', function() {
         ....
    }
} 
```

不过不要忘记稍后解除绑定

# php - 回调后语法荧光笔不起作用

> ID：13184042
> 
> 赞同：0
> 
> 时间：2012-11-01T19:20:51.893
> 
> 标签：php, javascript, syntax-highlighting

所以我是 Js & php 的新手，我正在尝试从回调函数中打印出一段代码

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <script>
            function loadXMLDoc()
            {
                var xmlhttp;
                if (window.XMLHttpRequest){
                  xmlhttp=new XMLHttpRequest();
                }
                else{
                  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange=function(){
                    if (xmlhttp.readyState==4 && xmlhttp.status==200){
                        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
                    }
                }

                xmlhttp.open("GET","callback_json.php",true);
                xmlhttp.send();
            }
        </script>

        <title>Simple Cross Domain Ajax</title>

      </head>
  <body>

      <h1>.....</h1>
      <h2>.....</h2>
      <button onclick="loadXMLDoc();">Get Data</button>
      <div id="myDiv"><h2>...</h2></div>

  </body>
</html> 
```

我的php文件就像

```
<?php
    $ch = curl_init();
    $url='someurl';
    $timeout = 5;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    echo "<script type='text/javascript' src='syntaxhighlighter/scripts/shCore.js'></script><script type='text/javascript' src='syntaxhighlighter/scripts/shBrushJava.js'></script><link href='syntaxhighlighter/styles/shCore.css' rel='stylesheet' type='text/css' /><link href='syntaxhighlighter/styles/shThemeDefault.css' rel='stylesheet' type='text/css' />";
    echo "<pre class='brush:java;'>";
    echo $data;
    echo "</pre>";
    echo '<script type="text/javascript">SyntaxHighlighter.highlight();</script>';
 ?> 
```

似乎语法荧光笔适用于我的 php 文件，但在回调后不起作用......我做了一些研究，我知道我应该在代码中使用 SyntaxHighlighter.highlight() 而不是 all() 但我已经完成了那。我的代码结构有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:07:46.570

`<script>`innerHTML 添加的标签不会被浏览器执行。您需要手动执行它们：

```
var scripts = document.getElementById("myDiv").getElementsByTagName("script");
if (scripts && scripts.length) {
  for (var i =0; i<scripts.length; i++) {
    eval(scripts[i].innerHTML);
  }
} 
```

或者，您可以将脚本节点重新附加到页面而不是对其进行评估：

```
// ...
for (var i =0; i<scripts.length; i++) {
  var s = document.createElement('script');
  s.innerHTML = eval(scripts[i].innerHTML);
  document.body.appendChild(s);
} 
```

但这与评估代码完全相同（不，真的，仔细考虑一下，这两种方法都执行未经检查的代码）。

更好的方法是通过在页面顶部添加 Syntaxhighlighter 文件并`SyntaxHighlighter.highlight()`在您对代码进行 innerHTML 处理后调用来完全避免脚本注入。

# swing - Swing 中的自由行 - 摆脱错误“索引超出范围异常”

> ID：13184046
> 
> 赞同：0
> 
> 时间：2012-11-01T19:21:12.343
> 
> 标签：swing, lines, indexoutofboundsexception, curves

我必须在 JFRame 中用鼠标画线。这是我的方法paintComponent：

```
public void paintComponent(Graphics g){
 Graphics2D g2d = (Graphics2D) g;
 if(pointCollection.get(0)!=null && pointCollection.get(pointCollection.size())!=null){
  g2d.setPaint(Color.BLUE);
  g2d.setStroke(new BasicStroke(1.5f));
  g2d.draw(line2d);
 }
} 
```

这是基于我从接口 MouseMotionListener 和 MouseListener 中实现的方法。

```
public void mouseDragged(MouseEvent arg0) {

pointCollection = new ArrayList<Point>(50);
pointCollection.add(arg0.getPoint());
  for (int index = 0; index < pointCollection.size(); index++){
    line2d=new Line2D.Double(pointCollection.get(index), pointCollection.get(index+1));
   //repaint();
  }
 } 
```

这个想法是收集点，然后在它们之间画线，这样我得到一条曲线而不是直线。你能帮我找出我正在做的逻辑错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:29:08.603

您将超过集合的结尾。

```
public void mouseDragged(MouseEvent arg0) {

  for (int index = 0; index < (pointCollection.size() - 1); index++){
    line2d=new Line2D.Double(pointCollection.get(index), 
        pointCollection.get(index + 1));
   //repaint();
  } 
```

}

# events - 在事件上绑定 jquery 事件

> ID：13184049
> 
> 赞同：0
> 
> 时间：2012-11-01T19:21:32.150
> 
> 标签：events, jquery

我正在听一个点击事件。触发时，我需要绑定一个不同的事件（对于其他元素），但它会在第一个事件上同时触发。

我的代码：

```
$(".element1").on("click", function(){  
    console.log("triggered element1");  
    $(".element2").on("click", function(){  
        console.log("triggered element2");  
    })  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:31:20.577

`.element2`每次`.element1`单击时，都会绑定一个单独的事件处理程序副本。如果您想防止这种情况发生，请在变量中记住您是否已经绑定了处理程序。

```
var e2bound = false;
$(".element1").on("click", function(){  
    console.log("triggered element1");  
    if(!e2bound){
        $(".element2").on("click", function(){  
            console.log("triggered element2");  
        })
        e2bound=true;
    }
}); 
```

另一种解决方案是在运行时取消绑定第一个处理程序：

```
$(".element1").on("click", function e1handler(){  
    console.log("triggered element1");  
    $(this).off("click", e1handler);
    $(".element2").on("click", function(){  
        console.log("triggered element2");  
    })  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:30:46.817

尝试使用`.off()`删除事件并使用`e.stopPropgation()`

```
$(".element1").on("click", function(){  
    console.log("triggered element1");  
    $(".element2").off('click').on("click", function(e){  
        e.stopPropagation();
        console.log("triggered element2");  
    })  
}); 
```

频繁绑定和解除绑定是一种不好的做法。如果可能，需要避免它。如果可以显示 HTML 结构会更容易。

# javascript - 使用 jQuery/ajax 刷新图像提要

> ID：13184058
> 
> 赞同：5
> 
> 时间：2012-11-01T19:22:26.633
> 
> 标签：javascript, html, ajax

我有一个 Axis 相机，它有多个输出，其中一个是 jpg 图像。此图像是您加载时从相机拍摄的静止图像。我想实现一种无需重新加载整个页面即可重新加载图像（每 30 秒）的方法，但是，我希望代码在更新图像之前完全下载图像以避免出现空白屏幕。

我一直在阅读，我发现最接近的是这篇文章[Using AJAX / jQuery to refresh an image](https://stackoverflow.com/questions/10920514/using-ajax-jquery-to-refresh-an-image)但不同之处在于我拥有的图像提要来自实际的相机本身而不是 php 文件。我已经尝试了几种方法来使用我的网址，但由于缺乏 javascript 知识而失败了。

我现在用来提取图像的代码只是一个简单的图像标签......

`<img src="[camera ip]/jpg/1/image.jpg">`

并且每当您刷新浏览器窗口时，它都会为您提供当前视频流的快照。

任何帮助将不胜感激！

问候，
哈维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:14:44.267

我在网上找不到带有令人耳目一新的图像的网络摄像头来测试它，但我认为这对你来说应该是诀窍......或者至少让你真正接近......

```
<script>
// URL to your cam image
var cam_image = 'http://absdev.ws:8000/jpg/1/image.jpg';

var buffer = {};
function preload() {
    buffer = new Image();
    // attaching the seconds breaks cache
    buffer.src = cam_image + '?' + (new Date()).getTime();
    buffer.onload = function() {
        setTimeout(preload, 30000); // 30 seconds refresh
        document.getElementById('myimg').src = buffer.src;
    }
}
preload();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:31:57.220

如果您正在处理一组静态图片 - 您已经知道文件名并且它不会改变 - 您最初会将所有内容加载到您的 html 中（这解决了空白屏幕问题），然后使用 jquery 插件来旋转/刷新以您指定的时间间隔拍摄图像，无论是 30 秒还是其他时间。

所以，你的 html 看起来像这样：

```
<ul>
  <li><img src="[camera ip]/jpg/1/image.jpg"></li>
  <li><img src="[camera ip]/jpg/2/image.jpg"></li>
  <li><img src="[camera ip]/jpg/3/image.jpg"></li>
  ...
</ul> 
```

然后插件将在它们之间循环。

对于插件，请使用以下两者之一：

[http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

祝你好运！

# internet-explorer-8 - 为什么 ng-class="ng-app" 会破坏 AngularJS？

> ID：13184063
> 
> 赞同：7
> 
> 时间：2012-11-01T19:22:36.367
> 
> 标签：internet-explorer-8, cross-browser, internet-explorer-7, angularjs

为了让 AngularJS 在 IE7 和 IE8 中工作，我将 id="ng-app" 和 class="ng-app" 添加到我的 ng-app 元素中：

```
<html id="ng-app" class="ng-app" ng-app="myApp">
   <div ng-view></div>
</html> 
```

这在过去一直有效，但现在我已将 class="ng-app" 添加到两个不同的项目中，并且在这两个视图中都不再在任何浏览器中呈现。IE7/8 兼容性的方式是否改变了？我正在使用来自 CDN 的 1.0.2 版本。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T19:32:39.470

*编辑说明：*添加 doctype 标签会减少一些问题。谢谢@Mike Pateras

```
 <!doctype html> 
```

*原来的：*

试试这个

```
<html lang="en" class="ng-app:myapp" id="ng-app" ng-app="myapp" xmlns:ng="http://angularjs.org">
     <head>    
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <!--[if lte IE 8]>
          <script>
            document.createElement('ng-include');
            document.createElement('ng-pluralize');
            document.createElement('ng-view');
            document.createElement('ng:include');
            document.createElement('ng:pluralize');
            document.createElement('ng:view');
          </script>
        <![endif]-->
        <!--[if lt IE 8]>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/json2/20150503/json2.min.js"></script>
        <![endif]-->
      </head> 
```

# javascript - 以这种格式使用 javascript 获取日期 [MM/DD/YY]

> ID：13184067
> 
> 赞同：9
> 
> 时间：2012-11-01T19:22:48.473
> 
> 标签：javascript, date, getdate

如何使用 javascript 以这种格式 [mm/dd/yy] 获取日期。我正在努力将“年份”设为 2 位数字，而不是完整的 4 位数字。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T19:25:42.607

```
var date = new Date();
var datestring = ("0" + (date.getMonth() + 1).toString()).substr(-2) + "/" + ("0" + date.getDate().toString()).substr(-2)  + "/" + (date.getFullYear().toString()).substr(2); 
```

这保证了 2 位数的日期和月份。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T19:29:35.490

试试这个：

HTML

```
<div id="output"></div> 
```

JS

```
(function () {
    // Get current date
    var date = new Date();

    // Format day/month/year to two digits
    var formattedDate = ('0' + date.getDate()).slice(-2);
    var formattedMonth = ('0' + (date.getMonth() + 1)).slice(-2);
    var formattedYear = date.getFullYear().toString().substr(2,2);

    // Combine and format date string
    var dateString = formattedMonth + '/' + formattedDate + '/' + formattedYear;

    // Reference output DIV
    var output = document.querySelector('#output');

    // Output dateString
    output.innerHTML = dateString;
})(); 
```

小提琴：http: [//jsfiddle.net/kboucher/4mLe1Lrd/](http://jsfiddle.net/kboucher/4mLe1Lrd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-23T01:19:33.590

今年怎么样

```
String(new Date().getFullYear()).substr(2) 
```

既然你需要你的月份，`01`就`12`这样做

```
var d = new Date("2013/8/3"); 
(d.getMonth() < 10 ? "0" : "") + (d.getMonth() + 1) 
```

几天、几分钟和几秒钟都做同样的事情

[工作演示](http://jsfiddle.net/minagabriel/22sc6/)

# api - 我需要一个用于个人网站的 API 密钥，但与我的公司页面一起提供了一个

> ID：13184068
> 
> 赞同：1
> 
> 时间：2012-11-01T19:22:48.847
> 
> 标签：api, facebook-comments

我想确保如果我将 api 密钥用于我的个人博客，它不会以任何方式连接到我的公司页面。

我可以确定吗？我有一个 API，但它说它已连接到我帮助管理的公司页面。

谢谢...

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:24:23.560

您需要通过访问此链接[http://www.facebook.com/developers/createapp.php](http://www.facebook.com/developers/createapp.php)并单击右上角的“+ 创建新应用程序”按钮来为您的网站创建一个新应用程序。

如果它提到您公司的页面，它可能不是您应该用于您的个人网站的页面。

# javascript - js双值范围检查

> ID：13184069
> 
> 赞同：1
> 
> 时间：2012-11-01T19:22:52.300
> 
> 标签：javascript, numbers, range

```
var value1=50
var value2=140

group 1
a,b     a>=42 a<=126    , b>=140 b<=213
a,c     a>=42 a<=126    , c>=1.40 c<=2.13
b,a     b>=140 b<=213   , a>=42 a<=126
c,a     c>=1.40 c<=2.13 , a>=42 a<=126

group 2
d,e     d>=91 d<=443 , e>=58 e<=84
d,f     d>=91 d<=443 , f>=4.8 f<=7
e,d     e>=58 e<=84  , d>=91 d<=443
f,d     f>=4.8 f<=7  , d>=91 d<=443 
```

需要将其编程到 js 中，以便这两个值将检查数字范围以找到合适的数字范围。如果没有成功找到两个范围以适应它与第二组检查的两个值，我希望它扫描第一组。

我为此尝试了许多不同的方法，但我不知道该怎么做？

非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:46:56.803

我将首先设置一个简单的地图，其中包含将在检查中使用的值。请记住，这段代码完全是在我脑海中写下的，没有经过测试，但它可能会给你一个起点。

看起来 a、b 等值是静态的。因此，您可以设置地图来帮助您：

```
var groupOneRanges =
{
    a: { min: 42,  max: 126  },
    b: { min: 140, max: 213  },
    c: { min: 1.4, max: 2.13 }
};

var groupTwoRanges = 
{
    d: { min: 91,  max: 443 },
    e: { min: 58,  max: 84  },        
    f: { min: 4.8, max: 7   }
}; 
```

然后，您可以通过一个小循环和一个数组自动设置每个组中范围的排列：

```
var groupOnePairs = [];
for (var p1 in groupOneRanges) {
    for (var p2 in groupOneRanges) {
        if (p1 !== p2) {
            groupOnePairs.push({ v1: groupOneRanges[p1], v2: groupOneRanges[p2]});
        }
    }
} 
```

您可以重用该代码来创建`groupTwoPairs`，但我将其作为练习留给您。

一旦你有了范围组合，你只需要进行比较：

```
var value1 = 50;
var value2 = 154;
var found = false;

// check group 1 first
for (var i = 0, c = groupOnePairs.length; i < c; i++) {
    if (value1 >= groupOnePairs[i].v1.min && value1 <= groupOnePairs[i].v1.max) {
        if (value2 >= groupOnePairs[i].v2.min && value2 <= groupOnePairs[i].v2.max) {
            // found a suitable range!
            found = true;
            break;
        }
    }
}

if (!found) {
    // check group 2 for each of the values as done above
} 
```

有很大的改进空间，但这是我能想到的最简单的 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:47:38.493

类似于以下内容：http: [//jsbin.com/ipefuf/1/](http://jsbin.com/ipefuf/1/)

这有点冗长 - 可以缩短，但大致可以满足您的需求。从它开始。

```
(function(){

  var value1=50;
  var value2=140;  

  var groups = [
    {
      name: "group 1",
      ranges: [
        { name: "a,b", func: function(a,b){ return a>=42 && a<=126 && b>=140 && b<=213; } },
        { name: "a,c", func: function(a,c){ return a>=42 && a<=126 && c>=1.40 && c<=2.13; } },
        { name: "b,a", func: function(b,a){ return b>=140 && b<=213 && a>=42 && a<=126; } },
        { name: "c,a", func: function(c,a){ return c>=1.40 && c<=2.13 && a>=42 && a<=126; } }
      ]
    },
    {
      name: "group 2",
      ranges: [
        { name: "d,e", func: function(d,e){ return d>=91 && d<=443 && e>=58 && e<=84; } },
        { name: "d,f", func: function(d,f){ return d>=91 && d<=443 && f>=4.8 && f<=7; } },
        { name: "e,d", func: function(e,d){ return e>=58 && e<=84 && d>=91 && d<=443; } },
        { name: "f,d", func: function(f,d){ return f>=4.8 && f<=7 && d>=91 && d<=443; } }
      ]
    }
  ];

  var inRange = false;

  for(var groupIndex in groups)
  {
    var group = groups[groupIndex];    

    for(var rangeIndex in group.ranges)
    {
      var range = group.ranges[rangeIndex];      
      inRange = range.func(value1, value2);

      if(inRange)
      {
        alert("Group: " + group.name + ", Range: " + range.name);
        break;
      }      
    }

    if(inRange)
    {
      break; 
    }
  }

  if(!inRange)
  {
    alert("Not in range."); 
  }

})(); 
```

# android - 带有 BroadcastReceiver 的 TabActivity 子 Activity 在后台保持活动状态

> ID：13184070
> 
> 赞同：5
> 
> 时间：2012-11-01T19:23:02.503
> 
> 标签：android, broadcastreceiver, tabactivity

我有一个名为 MyTabActivity 的 TabActivity，其中包含我使用以下代码创建的几个选项卡：

```
public class MyTabActivity extends TabActivity {

    public void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.my_tabs);
        tabHost = (TabHost)findViewById(android.R.id.tabhost);
        tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);
        Intent intent = new Intent().setClass(this, MyTab1.class);
        setupTab(new TextView(this), "Tab1", intent);
        intent = new Intent().setClass(this, MyTab2.class);
        setupTab(new TextView(this), "Tab2", intent);
        intent = new Intent().setClass(this, MyTab3.class);
        setupTab(new TextView(this), "Tab3", intent);
    }

    private void setupTab(final View view, final String tag, Intent intent) {
        View tabview = createTabView(tabHost.getContext(), tag);
        TabHost.TabSpec setContent = tabHost.newTabSpec(tag).setIndicator(tabview).setContent(intent);
        tabHost.addTab(setContent);
    }

    private static View createTabView(final Context context, final String text) {
        View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null); 
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);
        return view;
    }
} 
```

选项卡上的一个活动 (MyTab2) 注册了一个 BroadcastReceiver，以便在特定事件上，选项卡将刷新其显示的数据。我没有在 onPause 中取消注册 BroadcastReceiver，因为我希望此活动能够自行刷新，即使它当前不在前面。

 `````
public class MyTab2 extends Activity {

    // listener to receive broadcasts from activities that change
    // data that this activity needs to refresh on the view
    protected class MyListener extends BroadcastReceiver {
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals("myapp.REFLECT__CHANGES")) {
                //request new data from the server
                refreshData();
            }
        }
    }

    protected void onResume() {
        // if listener is not registered yet, register it
        // normally we would unregister the listener onPause, but we want
        // the listener to fire even if the activity is not in front
        if (!listenerIsRegistered) {
            registerReceiver(listener, new IntentFilter("myapp.REFLECT_CHANGES"));
            listenerIsRegistered = true;
        }
        super.onResume();
    } 
````  `我的问题是，我发现即使在备份到显示 MyTabActivity 之前的活动并第二次启动 MyTabActivity 之后，在第一次进入 MyTabActivity 时创建的 MyTab2 实例似乎仍然存在，当我广播触发选项卡刷新其数据的事件，MyTab2 的旧实例和 MyTab2 的新实例都在刷新，因为它们都接收到广播。我的问题是如何在退出 TabActivity 时杀死 TabActivity 的所有子活动？

子活动的旧实例是否存在，因为当活动离开前台时我没有取消注册 BroadcastReceiver？

可以想象，每次启动后续 MyTabActivity 时，这个问题都会变得复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:54:41.697

**无需广播：**

**不这样做：**

```
Intent intent = new Intent().setClass(this, MyTab1.class);
        setupTab(new TextView(this), "Tab1", intent);
        intent = new Intent().setClass(this, MyTab2.class);
        setupTab(new TextView(this), "Tab2", intent);
        intent = new Intent().setClass(this, MyTab3.class);
        setupTab(new TextView(this), "Tab3", intent); 
```

**就这样做**

```
 tabHost = (TabHost)findViewById(android.R.id.tabhost);
        tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);
        Intent intent = new Intent().setClass(this, MyTab1.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        setupTab(new TextView(this), "Tab1", intent);
        intent = new Intent().setClass(this, MyTab2.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        setupTab(new TextView(this), "Tab2", intent);
        intent = new Intent().setClass(this, MyTab3.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        setupTab(new TextView(this), "Tab3", intent); 
```

就是这样，你的问题就解决了``

# php - PHP SoapClient：获取所有带参数的函数列表

> ID：13184073
> 
> 赞同：0
> 
> 时间：2012-11-01T19:23:07.477
> 
> 标签：php, soap, parameters, wsdl, soap-client

我正在使用来自第三方供应商的 SOAP Web 服务，并且我们在服务中的功能随机更改（重命名参数、添加和删除参数）方面遇到了一些问题。显然这不是我们希望看到的情况，所以我正在尝试编写一个脚本，以便在 Web 服务中的任何内容发生变化时通知我。

使用 PHP 的 SoapClient，我可以提取 web 服务中所有函数的列表，但是所有函数都列出了一个参数，该参数似乎是其余参数的容器。我在 WSDL 模式下使用 SoapClient，所以我认为有一些方法可以为每个函数提取完整的参数列表。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:32:16.800

根据上面的一些评论所说，如果您无法从 SOAP 客户端获得满足您需求的方法/参数的准确反映，那么当然没有什么可以阻止您获取哈希值WSDL 本身并将其与您存储的哈希值进行比较以查看是否有任何更改。

如果您想获得有关更改内容的更多详细信息，那么您可以更进一步，使用一些 XML 库解析 WSDL 并比较节点的更改。

# android - 在我的 android 应用程序中访问内部 NETWORK 中的 PDF 文件时出现问题

> ID：13184075
> 
> 赞同：2
> 
> 时间：2012-11-01T19:23:19.523
> 
> 标签：android

有人能帮我吗 ？

我有一个 android 应用程序，可以在网络上找到文件并获取其 URL。

此 URL 在调用 Adob​​e Reader 时作为参数传递，但不会打开文档。

URL 格式返回“http://192.168.1.1..........ex.pdf”

这是一个代码：

变量 DOC 是一个 URL。

```
 try {
                                Intent intent = new Intent();
                                intent.setPackage("com.adobe.reader");
                                intent.setDataAndType(Uri.parse(doc), "application/pdf");

                                startActivity(intent);

                    } catch (ActivityNotFoundException activityNotFoundException) {
                                activityNotFoundException.printStackTrace();

                                throw activityNotFoundException;
                    } catch (Exception otherException) {
                                otherException.printStackTrace();

                                throw otherException;
                    }
                }

                                    if(selectedDocumentURL.contains(".pdf"))
                                    {
                                              try {
                                                        loadDocInReader(selectedDocumentURL);
                                              } catch (ActivityNotFoundException e) {
                                                        // TODO Auto-generated catch block
                                                        e.printStackTrace();
                                              } catch (Exception e) {
                                                        // TODO Auto-generated catch block
                                                        e.printStackTrace();
                                              }
                                    }else
                                    {
                                    Intent showPic = IntentFactory.createShowPicture(
                                                        WorkOrderDocumentsTable.this, selectedDocumentURL);
                                    startActivity(showPic);
                                    }

                          } else {
                                    showDialog(getResources().getString(R.string.Atte ntion),
                                                        ((Exception) msg.obj).getMessage());
                          }
                          progress.dismiss();
                };
      }; 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:13:39.017

第 1 步：删除`intent.setPackage("com.adobe.reader");`.

第 2 步：确保 Web 服务器为您的请求返回正确的 MIME 类型，因为这可能胜过您在`Intent`.

步骤#3：确保设备通常可以访问此服务器（例如，通过浏览器应用程序）。

# perl - 为什么'chop'不起作用 ?

> ID：13184080
> 
> 赞同：2
> 
> 时间：2012-11-01T19:23:45.260
> 
> 标签：perl

我试图弄清楚为什么当我尝试从用户那里获取输入时，chop 功能对我不起作用：

```
my $string = <STDIN>;
my $chr = chop($string);
print "String: $string\n";
print "Char: $chr\n"; 
```

输出

```
perl chop.pl
hello
String: hello
Char: 
```

但是，如果我使用字符串，那么它可以工作！

```
my $string = "frong";
my $chr = chop($string);
print "String: $string\n";
print "Char: $chr\n"; 
```

输出 [583]

```
perl chop.pl
String: fron
Char: g 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:24:50.127

当您从控制台传递输入时，`chop`正在切割`newline`字符串末尾的那个，当您点击`Enter`. 虽然您的字符串不包含该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:02:48.827

你正在砍（）'ing 是字符串末尾的换行符。要在从 STDIN 分配时删除换行符：

```
chomp(my $string = <STDIN>); 
```

换句话说，你的程序应该是这样的：

```
chomp(my $string = <STDIN>);
my $chr = chop($string);
print "String: $string\n";
print "Char: $chr\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:55:15.620

检查这两个函数的 perl 文档`chop`，`chomp`可能就可以了。

`chomp`

> chomp 这个更安全的 "chop" 版本删除了与 $/ 的当前值相对应的任何尾随字符串（在 "English" 模块中也称为 $INPUT_RECORD_SEPARATOR。

`chop`

> 砍掉字符串的最后一个字符并返回被砍掉的字符。

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T13:58:25.093

如果您正在打印诊断以显示变量内容，请在它们周围放置某种形式的分隔符，然后您会在 $chr 示例中看到换行符。

例如。

```
print "String: \"$string\"\n";
print "Char: \"$chr\"\n"; 
```

# vb.net - 图像面板控制

> ID：13184082
> 
> 赞同：2
> 
> 时间：2012-11-01T19:23:50.490
> 
> 标签：vb.net, winforms

我正在尝试将面板的内容保存到图片框中显示的图像中。我正在使用 drawtobitmap 方法，如下所示：

```
Private Sub Button3_Click(sender As System.Object, e As System.EventArgs) Handles Button3.Click

    Dim bmp As New Bitmap(Panel1.Width, Panel1.Height)
    Panel1.DrawToBitmap(bmp, Panel1.ClientRectangle)
    PictureBox1.BackgroundImage = bmp

End Sub 
```

图片框显示图像，但绘制顺序不正确。

![在此处输入图像描述](../Images/17ea394f6050a3753988954a6dbec324.png)

左侧的框是带有 3 个按钮的面板。右边的框是图片框。注意顺序的不同。是否有人对如何解决此问题有任何建议，以使顺序与面板上显示的顺序相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:55:43.293

我在 c# 中做了这个，但你应该能够翻译：

```
private void button3_Click(object sender, EventArgs e)
{
    ReverseControls(panel1);

    var bmp = new Bitmap(panel1.Width, panel1.Height);
    panel1.DrawToBitmap(bmp, panel1.ClientRectangle);
    pictureBox1.BackgroundImage = bmp;

    ReverseControls(panel1);
}

static void ReverseControls(Panel panel)
{
    var controls = panel.Controls.Cast<Control>().Reverse().ToArray();
    panel.Controls.Clear();
    panel.Controls.AddRange(controls);
} 
```

由于它以相反的顺序绘制控件，我只得到一个相反的控件列表并删除/读取它们。然后在绘制位图后取消反转它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:16:25.533

Jon B. 你颠倒 z 顺序是正确的，但我在下面找到了这个方法来为我做这件事，而不是似乎有效。感谢您的帮助！:)

```
For Each ctl As Control In Me.Controls.OfType(Of Control).OrderBy(Function(c) Me.Controls.GetChildIndex(c))
ctl.BringToFront()
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-14T19:10:23.997

这在 VB.net 中对我有用

```
' flip all Controls to reverse order

For I As Int32 = MyPanel.Controls.Count - 1 To 0 Step -1

  MyPanel.Controls(I).SendToBack()

Next

'create Bitmap of Panel for Printer 

MyPanel.DrawToBitmap(bm, r)

' flip Controls again to restore original order on Screen 

For I As Int32 = MyPanel.Controls.Count- 1 To 0 Step -1

  MyPanel.Controls(I).SendToBack()

Next 
```

# pinvoke - Dll导入和返回参数

> ID：13184083
> 
> 赞同：0
> 
> 时间：2012-11-01T19:23:51.030
> 
> 标签：pinvoke

我正在做硬件测试。我们的测试框架是用 C# 编写的，但我们使用本机 dll 与硬件通信。

假设我们有一个 C++ 方法：

```
unsigned char someMethod(unsigned long * nativeStatus) 
```

它依次执行嵌入式命令并在命令完成时返回状态。

为了使用它，我们创建了一个包装器

```
[DllImport(@"native.dll", CharSet=CharSet.Ansi, CallingConvention=CallingConvention.Cdecl)]
internal static extern Byte someMethod(ref UInt32 managedStatus) 
```

这工作正常。但是有一种情况，`someMethod`调用实际上并没有执行命令，而只是将其添加到序列中。然后可以通过发送特殊命令 say 来执行序列`ExecuteSequence`。在执行序列时，C++ 代码`nativeStatus`只需将数据复制到`nativeStatus`指针引用的内存中即可更新。随着序列完成，`ExecuteSequence`方法返回。此时我确信所有数据（`nativeStatus`在这种情况下）都已更新。我的`managedStatus`也会正确更新吗？我听说在这种情况下`managedStatus`并`nativeStatus`没有指向同一个内存。`nativeState`Marshaler 只是在调用完成后返回一个副本。如果不是，解决方案是什么？我是否需要使用 unsave 关键字并将创建和执行序列的代码放在`fixed{}`堵塞？

```
[DllImport(@"native.dll", CharSet=CharSet.Ansi, CallingConvention=CallingConvention.Cdecl)]
internal static unsave extern Byte someMethod(UInt32 * managedStatus) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:39:21.290

因此，您需要的是一个在时间跨度内不会改变的可变位置。

是的，您可以使用`fixed{}`它。
或者，您可以固定该变量：

```
private uint g_Pinnable = 0;

...

var gc = System.Runtime.InteropServices.GCHandle.Alloc(g_Pinnable, System.Runtime.InteropServices.GCHandleType.Pinned);

try
{
    // Pass 'ref g_Pinnable' to API
    // Then execute the sequence.
}
finally
{
    gc.Free(); // Reference to g_Pinnable may be invalid after this point
} 
```

# php - 是否可以嵌套相同简码的 wordpress 简码？

> ID：13184085
> 
> 赞同：5
> 
> 时间：2012-11-01T19:23:56.790
> 
> 标签：php, wordpress, shortcode

我知道如果使用 do_shortcode 包装器可以嵌套短代码，但是，codex 指出：

“但是，如果使用短代码宏包含另一个同名宏，解析器将失败：”

有没有解决的办法？

例如，如果我有一个短代码来制作一个 div，例如：

```
[div]some content in a div[/div] 
```

我希望能够使用：

```
[div]
    [div]a nested div[/div]
[/div] 
```

但这将使用标准的 do_shortcode 包装器失败。

我的临时解决方法是复制带有 _parent 名称的短代码，但除非我创建了 div_parent1、div_parent2 等，否则我只能嵌套 1 级深...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:38:18.230

如果您正在编写简码，则有一个简单的解决方案。您可以编写多个调用相同函数的简码。我有用于创建 html 块（如 div）的简码，并且有几个名称为 div、block1、block2 等。

```
add_shortcode('div', 'devondev_block');
add_shortcode('block', 'devondev_block');
add_shortcode('block2', 'devondev_block'); 
```

它们都调用相同的函数。只要您记得使用不同的短代码，它们就可以嵌套。

WordPress 短代码支持因尝试仅使用正则表达式进行解析而受到影响。可以使用正则表达式、有限状态机和堆栈的混合来进行这种解析。这种方法可以处理嵌套并且速度非常快，尤其是在短代码很少的情况下。每次遇到这个我都想试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:29:52.793

API 告诉它是这样的，因此这是不可能的：

`This is a limitation of the context-free regexp parser used by do_shortcode() - it is very fast but does not count levels of nesting, so it can't match each opening tag with its correct closing tag in these cases.`

最新版本（3.4.2）中有问题的功能是：

```
function do_shortcode($content) {
    global $shortcode_tags;

    if (empty($shortcode_tags) || !is_array($shortcode_tags))
        return $content;

    $pattern = get_shortcode_regex();
    return preg_replace_callback( "/$pattern/s", 'do_shortcode_tag', $content );
}

function get_shortcode_regex() {
    global $shortcode_tags;
    $tagnames = array_keys($shortcode_tags);
    $tagregexp = join( '|', array_map('preg_quote', $tagnames) );

    // WARNING! Do not change this regex without changing do_shortcode_tag() and strip_shortcode_tag()
    return
          '\\['                              // Opening bracket
        . '(\\[?)'                           // 1: Optional second opening bracket for escaping shortcodes: [[tag]]
        . "($tagregexp)"                     // 2: Shortcode name
        . '\\b'                              // Word boundary
        . '('                                // 3: Unroll the loop: Inside the opening shortcode tag
        .     '[^\\]\\/]*'                   // Not a closing bracket or forward slash
        .     '(?:'
        .         '\\/(?!\\])'               // A forward slash not followed by a closing bracket
        .         '[^\\]\\/]*'               // Not a closing bracket or forward slash
        .     ')*?'
        . ')'
        . '(?:'
        .     '(\\/)'                        // 4: Self closing tag ...
        .     '\\]'                          // ... and closing bracket
        . '|'
        .     '\\]'                          // Closing bracket
        .     '(?:'
        .         '('                        // 5: Unroll the loop: Optionally, anything between the opening and closing shortcode tags
        .             '[^\\[]*+'             // Not an opening bracket
        .             '(?:'
        .                 '\\[(?!\\/\\2\\])' // An opening bracket not followed by the closing shortcode tag
        .                 '[^\\[]*+'         // Not an opening bracket
        .             ')*+'
        .         ')'
        .         '\\[\\/\\2\\]'             // Closing shortcode tag
        .     ')?'
        . ')'
        . '(\\]?)';                          // 6: Optional second closing brocket for escaping shortcodes: [[tag]]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:37:29.157

您需要为您的简码中的内容再次执行简码。例子：

```
add_shortcode('div', function($attributes, $content, $tag) {
    ...
    do_shortcode($content);
    ...
}); 
```

另请参阅：[启用嵌套短代码的最佳方法是什么？](https://wordpress.stackexchange.com/q/33186/178)（WordPress SE）

刚刚看到：这并不能解决 Wordpress 中的问题，因此无法回答您的问题。我以为直到现在它都会被修复。

# sql - 将数字从一列转换为另一列，其中 = 0

> ID：13184089
> 
> 赞同：1
> 
> 时间：2012-11-01T19:24:19.320
> 
> 标签：sql

我的问题是这样的

我有一个正在处理的查询，我有一些值为 0。我希望能够从上个月获取一个不为零的值并将其替换为零。请参见下面的示例。

```
SELECT item,
       stock,
       sold,
       level,
       month,
       year
FROM   agingdata
GROUP  BY item,
          stock,
          sold,
          month,
          year,
          level
HAVING ( item = @Item )
ORDER  BY year,
          month 
```

![在此处输入图像描述](../Images/ff275a0fe4455fd28e2f20df693027dd.png)

所以我想取数字 2455 并将其输入到它显示为 0 的库存中，将上个月的余额数作为当前月份的库存水平。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:51:59.043

您可以使用以下查询找到每个项目的前一个非零级别（对于零级别项目）：

```
SELECT find.item, find.month, find.year, result.level
FROM AgingData result 
JOIN (
  SELECT original.item, original.month, original.year, max(cast(cast(previous.year as varchar) + '-' + cast(previous.month as varchar) + '-1' as datetime)) previous_date
  FROM AgingData original
  JOIN AgingData previous
    ON original.item = previous.item
     AND ((original.year > previous.year)
         OR (original.year = previous.year AND original.month > previous.month))
  WHERE original.level = 0
    AND previous.level != 0
  GROUP BY original.item, original.month, original.year ) find
ON result.item = find.item
  AND cast(cast(result.year as varchar) + '-' + cast(result.month as varchar) + '-1' as datetime) = find.previous_date 
```

即使先前的非零水平是几个月前，这也将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:43:37.293

沿着这些思路，这仅在上个月非零时才有效....

```
SELECT cur.Item, 
       CASE 
            WHEN (cur.Stock<>0) 
            THEN cur.Stock
            ELSE prev.Stock
       END as Stock, 
       cur.Sold, 
       cur.Level, 
       cur.Month, 
       cur.Year 
FROM AgingData cur 
LEFT OUTER JOIN AgingData prev 
     ON prev.item=cur.item and prev.Month = cur.Month - 1
GROUP BY cur.Item, cur.Stock, cur.Sold, cur.Month, cur.Year, cur.Level 
HAVING (cur.Item = @Item) 
ORDER BY cur.Year, cur.Month 
```

# xcode - 将更多 UICollectionViewCell 添加到现有 UICollectionView

> ID：13184098
> 
> 赞同：10
> 
> 时间：2012-11-01T19:24:52.530
> 
> 标签：xcode, ios6, uicollectionview, uicollectionviewcell

我正在尝试将更多单元格添加到现有`UICollectionView`的已填充一些单元格的现有单元格中。

我尝试使用 CollectionView `reloadData`，但它似乎重新加载了整个 collectionView，我只想添加更多单元格。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:49:42.020

该类`UICollectionView`具有添加/删除项目的方法。例如，要在某个`index`（在 section 中`0`）插入一个项目，相应地修改您的模型，然后执行：

```
int indexPath = [NSIndexPath indexPathForItem:index];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath inSection:0];
[collectionView insertItemsAtIndexPaths:indexPaths]; 
```

视图将完成其余的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-28T21:11:02.287

将新单元格插入**UICollectionView**而无需重新加载其所有单元格的最简单方法是使用**performBatchUpdates**，这可以通过以下步骤轻松完成。

```
// Lets assume you have some data coming from a NSURLConnection
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *erro)
{
      // Parse the data to Json
      NSMutableArray *newJson = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

      // Variable used to say at which position you want to add the cells
      int index;

      // If you want to start adding before the previous content, like new Tweets on twitter
      index = 0;

      // If you want to start adding after the previous content, like reading older tweets on twitter
      index = self.json.count;

      // Create the indexes with a loop
      NSMutableArray *indexes = [NSMutableArray array];

      for (int i = index; i < json.count; i++)
      {
            [indexes addObject:[NSIndexPath indexPathForItem:i inSection:0]];
      }

      // Perform the updates
      [self.collectionView performBatchUpdates:^{

           //Insert the new data to your current data
           [self.json addObjectsFromArray:newJson];

           //Inser the new cells
           [self.collectionView insertItemsAtIndexPaths:indexes];

      } completion:nil];
 } 
```

# c# - 有没有办法在一次调用中只刷新一个实体及其所有子实体？

> ID：13184099
> 
> 赞同：1
> 
> 时间：2012-11-01T19:24:54.963
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个带有一堆子实体作为属性的实体。用户会看到一个实体列表，可以选择一个进行修改，然后保存或取消更改。在实体之间切换不需要保存和取消，因此可能同时存在多个对象`EntityState.Modified`。

Save 按钮可以正确地保存所选实体和所有子实体，但是 Cancel 按钮仅恢复对父实体所做的更改，而不会恢复对子实体的更改。

是否有一种简单的方法可以还原该对象图形中的所有更改，而无需遍历每个导航属性？

我正在使用以下代码来还原更改：

```
context.Connection.Open();
context.Refresh(RefreshMode.StoreWins, MyEntity);
context.Connection.Close(); 
```

我的实体类结构的简化示例如下所示：

```
class MyEntity
{
    string Name;
    IList<Address> Addresses;
    IList<Contact> Contacts;
    IList<Note> Notes;
}

class Contact
{
    string Name;
    string Title;
    IList<EmailAddress> EmailAddresses;
    IList<Phone> PhoneNumbers;
} 
```

我确实看到[了这个问题](https://stackoverflow.com/q/1746941/302677)，但是该解决方案会将更改还原到所有未保存的实体，而不仅仅是选定的实体。

```
Context.Refresh(RefreshMode.StoreWins, _
    Context.ObjectStateManager.GetObjectStateEntries()); 
```

# wcf - 发送到经过身份验证的队列

> ID：13184104
> 
> 赞同：1
> 
> 时间：2012-11-01T19:25:07.270
> 
> 标签：wcf, msmq

我的本地机器上有一个事务专用队列。如果队列未通过身份验证，则消息进入队列。如果我将队列设置为进行身份验证，则不会。发送到队列的应用程序正在以我自己的身份运行（并且我可以完全控制队列）。匿名用户还具有队列上的发送消息权限。我很困惑我需要做什么才能将消息发送到经过身份验证的队列。

这是我正在使用的绑定：

```
NetMsmqBinding msmq = new NetMsmqBinding(NetMsmqSecurityMode.None);
msmq.MaxReceivedMessageSize = int.MaxValue;
msmq.CloseTimeout = TimeSpan.FromMinutes(3);
msmq.SendTimeout = TimeSpan.FromMinutes(3);
msmq.ReceiveTimeout = TimeSpan.FromMinutes(3);
msmq.ReaderQuotas.MaxDepth = int.MaxValue;
msmq.ReaderQuotas.MaxStringContentLength = int.MaxValue;
msmq.ReaderQuotas.MaxArrayLength = int.MaxValue;
msmq.ReaderQuotas.MaxBytesPerRead = int.MaxValue;
msmq.ReaderQuotas.MaxNameTableCharCount = int.MaxValue;
msmq.ExactlyOnce = true;
msmq.Durable = true;
msmq.TimeToLive = TimeSpan.FromHours(1); 
```

理想情况下，我希望每个人（包括无法识别的用户）都能够发送消息，但限制谁可以偷看和接收消息。我不确定这是否可能。

那么，第一个问题：如何将消息放入经过身份验证的队列？

* * *

看起来我需要使用 of 打开传输安全`msmqAuthenticationMode`性`WindowsDomain`。但是，当我这样做时，我收到以下错误：

```
Binding validation failed because the binding's MsmqAuthenticationMode property is set to WindowsDomain but MSMQ is installed with Active Directory integration disabled. The channel factory or service host cannot be opened. 
```

* * *

看起来我的 MSMQ 是[在 Workgroup mode 下安装的，而不是 Directory mode](http://support.microsoft.com/kb/248500)。我该如何解决？当我删除 MSMQ 然后将其添加回来（具有所有功能）时，它仍然不在目录模式下。我在win7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:04:59.317

身份验证需要 Active Directory。MSMQ 检查发件人在 AD 中是否有证书。因此仅适用于域帐户。域帐户登录机器托管队列时创建的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:15:15.067

MSMQ 必须以[目录模式安装](http://support.microsoft.com/kb/248500)，并且您必须设置`msmq.Security.Mode`为`Transport`提供 WindowsDomain 凭据。要进入目录模式，您需要重新安装 MSMQ - 但请确保在重新安装之前[删除计算机上的 msmq 对象](http://blogs.msdn.com/b/johnbreakwell/archive/2007/05/15/watch-out-when-re-installing-msmq-4-0-in-a-domain.aspx)。

# java - 在 Java 中，如何制作 Stack 实例的深层副本 容易地？

> ID：13184110
> 
> 赞同：1
> 
> 时间：2012-11-01T19:25:38.143
> 
> 标签：java, stack, clone, deep-copy

例如

```
class StackElement {
    String method;
    int state;
}

Stack<StackElement> stack; 
```

我想获得 this 的深层副本`stack`，其中包含`StackElement`我自己定义的内容。

1.  Java 是否为此目的提供了合适的 API？

2.  如果没有，如何以简单通用的方式实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:33:38.300

最简单的方法是按照以下简单步骤操作：

1.  做你的`StackElement`工具`Serializable`；
2.  将整个堆栈序列化为字节数组；
3.  反序列化回深拷贝。

缺点是性能不如顶级。

请注意，它`Stack`被认为是考古文物，早在 Java 1.2 中就已经过时了`LinkedList`，可以用作堆栈。它被废弃的原因是每个方法都是`synchronized`，对客户端代码的线程安全增加很少，但会引入性能损失，甚至可能出现死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:34:04.863

我不确定您的情况是否有特殊问题，但您可以在[此处](https://stackoverflow.com/questions/2156120/java-recommended-solution-for-deep-cloning-copying-an-instance)查看一些选项。

# sql - SQL - 使用触发器中的主键从另一个表中选择一个字段

> ID：13184120
> 
> 赞同：0
> 
> 时间：2012-11-01T19:26:14.113
> 
> 标签：sql, sql-server, logging, select, triggers

我的数据库中有两个表，一个是 Transactions，另一个是 TransactionHistories。后者本质上是一个审计表，其中触发器在事务上执行插入、更新和删除以捕获数据的屏幕截图。

我成功地检索了存储在列匹配的 Transactions 表中的所有数据，但困难在于我试图使用外键从另一个表中检索数据。例如：

事务表有一个字段“TransactionType_TransactionTypeId”，但在审计表中，我们希望将其“名称”存储为“TransactionTypeName”。这需要从“TransactionTypes”表中填充，该表具有“TransactionTypeId”和“Name”字段。

我正在努力编写一个查询来按照我们的意愿检索它。我正在尝试类似于以下内容但收效甚微：

```
SELECT @TransactionTypeName=Name
FROM TransactionTypes
WHERE inserted.TransactionType_TransactionTypeId=TransactionTypes.TransactionTypeId; 
```

我假设这是一个语法噩梦。如果有人能指出我正确的方向，我将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:40:39.620

要获得名称，您应该执行以下操作

```
select @TransactionTypeName = TT.Name
from inserted as i
    left outer join TransactionTypes as TT on TT.TransactionTypeId = i.TransactionType_TransactionTypeId 
```

但是您必须知道该`inserted`表可以包含多行，并且您只能获得一行的价值。

# php - 脚本跳过数据库输出的 1 个数据

> ID：13184124
> 
> 赞同：0
> 
> 时间：2012-11-01T19:26:18.880
> 
> 标签：php, mysqli, output, skip

```
<?php
//wall ===================================================
if($_POST['submit'] == "submit"){
// connect to the database
include("dbinfo.inc.php");

  $client_id = $_POST['client_id'];
  echo $client_id;
  $query="select * from messages where client_id='$client_id'";
  $result = $mysqli->query( $query );
  $row = $result->fetch_assoc();
                                        while ($row = $result->fetch_object())
                                        {
                                                $id = $row->msg_id;
                                                $mes = $row->message;
                                                $mes = nl2br($mes);
                                                $cdate = $row->date_post;
                                                $msg ="{$mes} <br> . {$cdate}";

//wall ===================================================
?>
<li class="bar<?php echo $id; ?>">
<div align="left" class="post_box">
<span style="padding:10px"><?php echo $msg; ?> </span>
<span class="delete_button"><a href="#" id="<?php echo $id; ?>" class="delete_update">X</a></span>
<span class='feed_link'><a href="#" class="comment" id="<?php echo $id; ?>">comment</a></span>
</div>
<div id='expand_box'>
<div id='expand_url'></div>
</div>
<div id="fullbox" class="fullbox<?php echo $id; ?>">
<div id="commentload<?php echo $id; ?>" >

</div>
<div class="comment_box" id="c<?php echo $id; ?>">
<form method="post" action="" name="<?php echo $id; ?>">
<textarea class="text_area" name="comment_value" id="textarea<?php echo $id; ?>">
</textarea><br />
<input type="submit" value=" Comment " class="comment_submit" id="<?php echo $id; ?>"/>
</form>
</div>
</div>
</li>
<?php                                   }
//wall ===================================================
     $mysqli->close();
}
//wall ===================================================
?> 
```

我的脚本应该输出与用户输入等效的所有数据。

EX 输入 client_id "2"

询问：

```
msg_id  message  date_sent  client_id

1        a        1/1/1         1  
2        b        2/2/2         1  
3        c        3/3/3         1
4        d        1/2/3         1   
5        e        2/2/2         2    
7        e        2/2/2         2    
8        g        2/2/2         2    
9        f        8/8/8         3 
```

它只会显示

```
 7        e        2/2/2         2    
  8        g        2/2/2         2 
```

并跳过第一个是

```
 5        e        2/2/2         2 
```

如果我输入 client_id "3"

不会有输出，但应该显示：

```
 9        f        8/8/8         3 
```

你能检查我的脚本，看看我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:30:58.703

你在打电话

```
$row = $result->fetch_assoc(); 
```

在开始循环结果之前：

```
while ($row = $result->fetch_object()) {
...
} 
```

`$row`这具有跳过结果集中第一行的效果（因为您从第一次调用开始不做任何事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:33:57.783

使用 fetch_assoc() 或 fetch_object()。以下是 PHP 手册中的示例：

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli->query($query)) {

    /* fetch associative array */
    while ($row = $result->fetch_assoc()) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    $result->free();
}

/* close connection */
$mysqli->close(); 
```

# javascript - 通过 Knockout.js、960.gs 以 Columner 方式显示数据

> ID：13184126
> 
> 赞同：2
> 
> 时间：2012-11-01T19:26:30.363
> 
> 标签：javascript, knockout.js, 960.gs

我是 Knockout.js 和 960.gs 的新手。

我正在获取如下 JSON 数据：

[1, a1],[2,a2],...[12,a12] [13, b13],[14,b14]......[24,b24]

我采用了 grid-12 结构的 div

当我用 knockout.js 绑定该网格时，它显示如下：

```
a1     a2     a3    a4     a5    a6
a7     a8     a9    a10    a11   a12
b13    b14    b15   b16    b17   b18
b19    b20    b21   b22    b23   b24 
```

我想要一个如下的输出，其中第一列将用 a 值填充，然后 b 值将开始填充其余网格：

```
a1  a5 a9  b13
a2  a6 a10 b14
a3  a7 a11 ...
a4  a8 a12 ... 
```

怎么可能呢？请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:01:41.097

一个非常有趣的问题。首先，淘汰赛并不直接支持这一点，因为这需要对淘汰赛中不存在的数据有一定程度的了解。

经过几次尝试，我发现您需要一个将数据模型从一维数组转换为二维数组的中间步骤。这允许对 each 进行外部 foreach 绑定，对 each 进行内部 foreach 绑定。对于最后一行，您必须确保填满整行，否则表格将无法正确显示。

执行此操作的代码是 -

```
var rowIndex = 0;
var displayStructure = [];
var maxNumberCells = data.length;
var rowBreakCount = 24 / numberColumns;
while (rowIndex < (maxNumberCells + 1) / numberColumns) {
    var row = [];
    for (var column = 0; column < numberColumns; column++) {
        var i = rowIndex + rowBreakCount * column;
        var pushValue = (i < maxNumberCells) ? data[i] : '&nbsp;';
        row.push(pushValue);
    }

    displayStructure.push(row);
    rowIndex++;
} 
```

我在[http://jsfiddle.net/photo_tom/cGMa2/20/有一个可行的解决方案](http://jsfiddle.net/photo_tom/cGMa2/20/)

# controller - Kohana 3.1 ORM 保存（）

> ID：13184130
> 
> 赞同：0
> 
> 时间：2012-11-01T19:26:39.093
> 
> 标签：controller, kohana, updating

是否存在以下无法执行的语法原因？

```
$final_scores = ORM::factory('fscores');
$final_scores->userid = $userid;
$final_scores->es1 = $self_awr;
$final_scores->es2 = $self_mgt;
$final_scores->es3 = $social_awr;
$final_scores->es4 = $rel_mgt;
$final_scores->save(); 
```

有一个名为 fscores 的模型。所有字段名称都是正确的。它根本没有更新表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:45:00.910

如评论中所述 - 如果要更新，请先加载记录：

```
$final_scores = ORM::factory('fscores', $your_id_for_update); 
```

如果你不加载它，save 方法会尝试创建记录：

```
public function save(Validation $validation = NULL)
{
    return $this->loaded() ? $this->update($validation) : $this->create($validation);
} 
```

另外，如果您知道要更新，请明确说明：

```
$final_scores->update(); 
```

# android - gmail android应用渐变背景

> ID：13184131
> 
> 赞同：0
> 
> 时间：2012-11-01T19:26:40.457
> 
> 标签：android, background, gmail, drawable, gradient

我如何获得渐变或从哪里下载位图，因为 gmail 应用程序在后台具有？我知道我可以使用一些绘图工具并自己制作，但我想找到完全相同的可绘制对象。我一直在网上搜索并通过android Sdk资源，找不到这个drawable。我还注意到，当我创建一个新项目作为活动的默认背景时出现了这个背景，但不幸的是我不记得我当时设置了什么设置，现在当我创建一个新项目时，只有一个标准的白色背景。

![在此处输入图像描述](../Images/45a8ae9075706f7e9cf4b3b333599fef.png)

# internet-explorer - KineticJS & IE9

> ID：13184132
> 
> 赞同：0
> 
> 时间：2012-11-01T19:26:58.693
> 
> 标签：internet-explorer, canvas, internet-explorer-9, kineticjs

我试图弄清楚为什么使用 KineticJS 创建画布在我的 IE9 网站上不起作用。此示例：[http](http://www.html5canvastutorials.com/demos/kineticjs/html5_canvas_kineticjs_path/) : //www.html5canvastutorials.com/demos/kineticjs/html5_canvas_kineticjs_path/ 在 IE9 中完美运行，但是当我将源代码复制/粘贴到我网站上的文件中时......它根本不起作用（它确实可以在 FF/Safari/Chrome 中使用）。

我应该检查一些服务器设置吗？我知道渲染全部在客户端上，但我不知道为什么它在一个地方而不是另一个地方工作。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:30:07.487

检查您没有打开兼容模式...

![兼容模式](../Images/eb97f3deffafcfd445ea79b7fe5d57db.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T16:14:32.187

我刚刚发现 ericdrowell 先生在 Github 中说：

“我不相信有任何 2d 画布库也与 excanvas 兼容。如果您需要使用适用于所有浏览器的图形库，您可以考虑使用具有 SVG 的 Raphael.js和 VML 渲染器，但比画布库慢得多，功能也不丰富。”

这是可悲的 ：（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:57:53.073

要启用兼容模式，请在 ie9 更改中按 f12

浏览器模式 ie9 文档模式：IE 9 标准

# ios - iOS CAEmitterCell 烟花效果

> ID：13184136
> 
> 赞同：3
> 
> 时间：2012-11-01T19:27:07.997
> 
> 标签：ios, ios5

我想创造一个像烟花一样的效果。我知道我可以使用 CAEmitterCell。我尝试下载一些示例，但我仍在 iOS 5.0 中使用此功能

有人知道如何使用 CAEmitterCell 创建烟花效果的好教程吗？

我需要创建如下内容：

![在此处输入图像描述](../Images/aededf6a5e3209c448489608ebd60d76.png)

所有粒子都从中心（红色圆圈）向绿色圆圈方向移动。红圈这是初始点，将有一些 CGPoint 值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:22:26.773

我找到了这个解决方案：

这就是 DWFParticleView.h 文件的外观

```
#import <UIKit/UIKit.h>

@interface DWFParticleView : UIView

@property (nonatomic) CGFloat time;

-(void)configurateEmmiter;
-(void)setEmitterPositionFromTouch: (UITouch*)t;
-(void)setIsEmitting:(BOOL)isEmitting andPoint:(CGPoint)point;

@end 
```

这就是 DWFParticleView.m 的外观

```
#import "DWFParticleView.h"
#import <QuartzCore/QuartzCore.h>

@implementation DWFParticleView
{
    CAEmitterLayer* fireEmitter; //1
}

-(void)configurateEmmiter
{
    //set ref to the layer
    fireEmitter = (CAEmitterLayer*)self.layer; //2

    //configure the emitter layer
    fireEmitter.emitterPosition = CGPointMake(50, 50);
    fireEmitter.emitterSize = CGSizeMake(5, 5);

    CAEmitterCell* fire = [CAEmitterCell emitterCell];
    fire.birthRate = 0;
    fire.lifetime = 2.0;
    fire.lifetimeRange = 0.5;
    //fire.color = [[UIColor colorWithRed:0.8 green:0.4 blue:0.2 alpha:0.6] CGColor];
    fire.contents = (id)[[UIImage imageNamed:@"star_icon.png"] CGImage];
    [fire setName:@"fire"];

    fire.velocity = 80;
    fire.velocityRange = 20;
    fire.emissionRange = M_PI * 2.0f;

    fire.scaleSpeed = 0.1;
    fire.spin = 0.5;

    //add the cell to the layer and we're done
    fireEmitter.emitterCells = [NSArray arrayWithObject:fire];

    fireEmitter.renderMode = kCAEmitterLayerAdditive;

}

+ (Class) layerClass {
    return [CAEmitterLayer class];
}

-(void)setEmitterPositionFromTouch: (UITouch*)t
{
    //change the emitter's position
    fireEmitter.emitterPosition = [t locationInView:self];
}

-(void)setIsEmitting:(BOOL)isEmitting andPoint:(CGPoint)point
{

    fireEmitter.emitterPosition = point;

    //turn on/off the emitting of particles
    [fireEmitter setValue:[NSNumber numberWithInt:isEmitting?50:0]
               forKeyPath:@"emitterCells.fire.birthRate"];

    [self performSelector:@selector(decayStep) withObject:nil afterDelay:self.time];
}

- (void)decayStep {
    [fireEmitter setValue:[NSNumber numberWithInt:0]
               forKeyPath:@"emitterCells.fire.birthRate"];
}

@end 
```

这是在屏幕上一键点击的方法，例如显示我们的效果

```
- (void)tap {
    DWFParticleView *fireView = [[DWFParticleView alloc] init];
    fireView.time = 0.3;
    [fireView setUserInteractionEnabled:NO];
    [fireView configurateEmmiter];
    [fireView setFrame:CGRectMake(0, 0, 0, 0)];
    [fireView setBackgroundColor:[UIColor redColor]];
    [self.view addSubview:fireView];
} 
```

我在这里找到的材料：[雷](http://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial)

# jpa - JPA :: orphanRemoval 和 Lazy Collections

> ID：13184137
> 
> 赞同：1
> 
> 时间：2012-11-01T19:27:23.800
> 
> 标签：jpa

假设我有一个实体*A*和一个**OneToMany**集合的*Bs*与**FetchType EAGER**和**orphanRemoval**设置为**true**。当我对已分离的*A*对象调用**EntityManager#merge**并从其集合中删除了一些*B*元素（分离时）时，将从数据库中删除相应的行（其实体现在从集合中丢失）（在 JPA/Hibernate 中） ）。

 ****在LAZY**收藏的情况下，这将如何发挥作用？当要求**EntityManager**合并修改后*的 A*对象时，它如何区分从集合中显式删除的 B 实体与由于**LAZY**提取类型而从未提取的 B 实体之间的区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:32:07.167

JPA 实现必须保留已初始化或仍处于惰性状态的集合的标志。

因此，如果您合并以前分离的实体，合并操作将检查集合，如果*仅*对其进行了初始化，则它将枚举内容以查找针对从数据库中获取的实体的更改。

但是，如果您实例化一个新实例并将其传递给合并，则该集合将被视为已初始化，如果该集合为空，则 JPA 将删除所有集合项。

请停下来尝试新的 JPA 实现，Batoo JPA [http://batoo.jp](http://batoo.jp) - 这比市场上当前的 JPA 实现快 15 倍以上。**

# sql - SQL Server MDX 查询参数

> ID：13184139
> 
> 赞同：0
> 
> 时间：2012-11-01T19:27:42.230
> 
> 标签：sql, sql-server-2008, ssas, mdx, business-intelligence

我对 MDX 查询很陌生。我试图通过我的查询传递一个参数。它给了我这个 SQL 错误：

> *查询准备失败。*
> *该函数需要一个 5 参数的元组表达式。*
> *使用了元组集表达式。*

查询是：

```
SELECT 
{
[Measures].[DENOMINATOR]
,[Measures].[NUMERATOR]
,[Measures].[Goal]
}
ON COLUMNS,
NON EMPTY
(
 [Dim Indicator].[Indicator Set].[Indicator Set].ALLMEMBERS
 ,[Dim Indicator].[Indicator Group].[Indicator Group].ALLMEMBERS
 ,[Dim Indicator].[Indicator Name].[Indicator Name].ALLMEMBERS
)
ON ROWS
FROM [Dummy-Dashboard]

--Parameter Queries goes here 

WHERE 
(
    strtoset(@DimGenderGenderID)
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:11:09.487

如果您需要使用参数测试您的查询，则需要为此使用 XMLA。请参阅下面的 xmla 示例：

```
 <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
      <Body>
        <Execute xmlns="urn:schemas-microsoft-com:xml-analysis">
          <Command>
            <Statement>
              Your code in here
            </Statement>
          </Command>
          <Properties>
            <PropertyList xmlns="urn:schemas-microsoft-com:xml-analysis">
              <DataSourceInfo>Provider=MSOLAP;Data Source=local;</DataSourceInfo>
              <Catalog>CubeName</Catalog>
              <Format>Tabular</Format>
              <Content>Data</Content>
              <Timeout>0</Timeout>
            </PropertyList>
          </Properties>
          <Parameters xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:schemas-microsoft-com:xml-analysis">
            <Parameter>
              <Name>ParameterName</Name>
              <Value xsi:type="xsd:string">ParameterValue</Value>
            </Parameter>
          </Parameters>
        </Execute>
      </Body>
    </Envelope> 
```

# validation - Rails3：在存储到数据库之前验证文本最大长度

> ID：13184141
> 
> 赞同：2
> 
> 时间：2012-11-01T19:28:11.100
> 
> 标签：validation, ruby-on-rails-3.2, rails-postgresql

我目前在我的 Rails 模型中使用“存储”来将各种内容保存在哈希中。这很方便，因为我不必为此数据创建大量单独的属性，它为我序列化/反序列化，并且我可以根据需要轻松访问每个单独的哈希属性。代码片段（简化）：

```
class Request < ActiveRecord::Base
  attr_accessible :data

  # Data is a nested hash
  store :data

  # Validation
  validates_presence_of :data
end 
```

我意识到当/如果 :data 变得非常大（整个其他主题）时，这种设计可能并不理想，但与此同时，我想知道以下内容：

1.  “文本”列的默认最大大小是多少？我目前正在使用 PostGres 数据库，我相信它在幕后使用 VARCHAR，但不确定数据库中该列的 MAX 大小实际上是多少？
2.  我可以在 Rails 迁移 create_table 代码中明确设置此 :data 文本列的最大大小吗？
3.  如果我尝试保存这个 :data 属性太大的记录，Rails 会怎么做？研究让我相信它会切碎它，并存储它可以容纳的东西（非常糟糕！）
4.  在存储到数据库之前，如何最好地防止潜在的哈希损坏并验证 :data size < MAX allowed size？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:56:27.143

在迁移中设置最大长度

[http://databasically.com/2011/03/01/a-limit-of-rails-migrations/](http://databasically.com/2011/03/01/a-limit-of-rails-migrations/)

然后验证模型中的长度

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#length](http://guides.rubyonrails.org/active_record_validations_callbacks.html#length)

# c++ - 默认模板参数导致“预期的类型说明符”

> ID：13184142
> 
> 赞同：2
> 
> 时间：2012-11-01T19:28:25.537
> 
> 标签：c++, templates

以下案例在 MS Visual Studio 中编译得很好，但在 g++ 4.6 中编译得不好。

编译：

```
 template <typename T>
    struct get_type
    { typedef void type_;};

template <>
    struct get_type<float>
    { typedef float type_; };

template <>
    struct get_type<int>
    { typedef int type_; };

template <typename T, typename P=get_type<T>::type_> // <--- line 16
    struct get_destroy_type
    { static inline void exec(P a) {} }; 
```

结果是：

```
../testlibrary/testlibrary.h:16:34: error: expected type-specifier
../testlibrary/testlibrary.h:16:34: error: expected ‘&gt;’ 
```

我用的时候好像不太喜欢

```
get_type<T>::type_ 
```

作为模板参数默认值。MS Visual Studio (Express 10) 编译得很好。我可以做哪些改变来让 g++ 编译它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:29:20.593

用于`typename`消除歧义：

```
template <typename T, typename P = typename get_type<T>::type_>
                                   |______| 
```

# iphone - 单击按钮将捕获的图像附加到电子邮件

> ID：13184144
> 
> 赞同：1
> 
> 时间：2012-11-01T19:28:29.913
> 
> 标签：iphone, ios, uiimagepickercontroller

我使用下面的`UIImagePickerController`委托方法从 iphone 捕获了图像。

```
 - (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    self.myImageView.image = image;  
    //    [self performSelector:@selector(emailButtonPressed:) withObject:image afterDelay:1.0];
     [self dismissModalViewControllerAnimated:YES];  
} 
```

请参阅上面的`emailButtonPressed`方法，它是由 调用的`self`。我想在按钮操作中调用它。我为`emailButtonPressed`.

```
- (void)emailButtonPressed:(UIImage *)image
{  
        MFMailComposeViewController *mailview=[[MFMailComposeViewController alloc]init];      mailview.navigationBar.tintColor=[UIColor colorWithRed:55/255.0 green:190/255.0 blue:55/255.0 alpha:1];  
        mailview.mailComposeDelegate=self;  
        // NSMutableString *subject=[NSMutableString stringWithFormat:@"%@",@"Testing"];  
        [mailview setSubject:@"Picture from my iPhone!"];  
        //   NSString *email_new=@"";  
        [mailview setMessageBody:@"Description" isHTML:NO];  

        NSData *imageData = UIImagePNGRepresentation(image);  

        [mailview addAttachmentData:imageData mimeType:@"image/png" fileName:@"ImageName"];  
        [self presentModalViewController:mailview animated:YES];  
} 
```

抱歉我的代码中的任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:48:37.623

修改你的`emailButtonPressed`方法如下，

```
- (void)emailButtonPressed //removed the param
{  
        UIImage *image = self.myimageview.image; //or set some other param as image = self.image; whichever you set in picker delegate method
        MFMailComposeViewController *mailview=[[MFMailComposeViewController alloc]init];      mailview.navigationBar.tintColor=[UIColor colorWithRed:55/255.0 green:190/255.0 blue:55/255.0 alpha:1];  
        mailview.mailComposeDelegate=self;  
        // NSMutableString *subject=[NSMutableString stringWithFormat:@"%@",@"Testing"];  
        [mailview setSubject:@"Picture from my iPhone!"];  
        //   NSString *email_new=@"";  
        [mailview setMessageBody:@"Description" isHTML:NO];  

        NSData *imageData = UIImagePNGRepresentation(image);  

        [mailview addAttachmentData:imageData mimeType:@"image/png" fileName:@"ImageName"];  
        [self presentModalViewController:mailview animated:YES];  
} 
```

保持这种方法不变，

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    self.myImageView.image = image;  //instead of this, you can create an @property for image in .h file and assign to that also here.
    [self dismissModalViewControllerAnimated:YES];  
} 
```

假设您已将电子邮件按钮声明为，

```
UIButton *emailbutton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; //or any other way 
```

现在在该行之后立即将此方法添加为您的按钮目标，

```
[emailbutton addTarget:self action:@selector(emailButtonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

现在点击您在委托`emailbutton`中设置的任何图像都将作为附件发送。`self.myimageview.image``UIImagePickerController`

# tfs - Chutzpah 与 TFS 2012 集成

> ID：13184146
> 
> 赞同：5
> 
> 时间：2012-11-01T19:28:32.173
> 
> 标签：tfs, chutzpah

我的团队正在尝试将 Chutzpah 集成到 TFS 2012 构建过程中。我们使用[这篇博文](http://blogs.msdn.com/b/visualstudioalm/archive/2012/07/09/javascript-unit-tests-on-team-foundation-service-with-chutzpah.aspx)作为我们的起点。

在高层次上，实际问题是构建代理上下文中的 Visual Studio 测试运行程序根本没有找到 Chutzpah 挂钩。因此，虽然我们可以定义`**\*.js`为测试源，但实际上没有找到并初始化 Chutzpah 引导程序，测试运行程序不会对这些文件做任何事情。

在更详细的层面上，当我们检查日志以加载构建控制器的自定义程序集时，我们会收到三个相关消息：

```
Summary: There were 0 failures, 2 errors and 1 warnings loading custom activities and services.
Error: Method 'ToXml' in type 'Chutzpah.VS2012.TestAdapter.ChutzpahAdapterSettings' from assembly 'Chutzpah.VS2012.TestAdapter, Version=2.2.0.171, Culture=neutral, PublicKeyToken=1ca802c37ffe1896' does not have an implementation.
Error: API restriction: The assembly '...\AppData\Local\Temp\VSTFSBuild\8c8e9402-1169-4782-99a9-ce42f83be8f0\A1288811191\Chutzpah\Microsoft.VisualStudio.TestPlatform.ObjectModel.dll' has already loaded from a different location. It cannot be loaded from a new location within the same appdomain.
Warning: Could not load file or assembly '...\AppData\Local\Temp\VSTFSBuild\8c8e9402-1169-4782-99a9-ce42f83be8f0\A1288811191\Chutzpah\phantomjs.exe' or one of its dependencies. The module was expected to contain an assembly manifest. 
```

除了这些信息，我们或多或少地陷入困境。我很想听听有人真的让 Chutzpah 在独立的 2012 构建服务器上运行，这样我们就可以比较配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:36:36.770

错误：API 限制：程序集'....

表示 TFS 在两个不同的位置查找 dll。您可以将模式更改为检查并查看是否有 \*\* *test* .dll 作为为任何测试程序集设置的值，然后将其更改为 *test*.dll。这将防止它多次加载。

另一个错误可能是因为没有重建测试项目。尝试重新构建测试项目。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:51:23.947

实际上 Software Carpenter 有一点，我相信可能发生的事情是您对普通单元测试的测试规范可能是*test* .dll（或类似的东西），这意味着 Microsoft.VisualStudio.TestPlatform.ObjectModel.dll 作为单元测试 dll 加载，然后 TFS 在尝试运行 chutzpah 测试时再次尝试加载它。

尝试禁用正常的单元测试规范并查看它是否有帮助，如果有帮助，则将您的规范更改为不包含 TestPlatform.ObjectModel.dll 的其他内容 (*test.dll)。

来源：我在尝试构建一个名称为 Test 的项目时遇到了同样的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:27:30.787

该讨论也在 Codeplex 上进行。也许那里可以提供一些帮助。

[使用 Chutzpah 对 Team Foundation 服务进行 Javascript 单元测试](http://chutzpah.codeplex.com/discussions/400818)

# ios - 如何将大量静态文件添加到 MonoTouch 捆绑包中？

> ID：13184147
> 
> 赞同：1
> 
> 时间：2012-11-01T19:28:35.070
> 
> 标签：ios, xamarin.ios, monodevelop

我有（相当多的）静态文件，我需要使用构建在遗留 .NET 库之上的应用程序来部署这些文件。其中包括几个 XML 和配置文件，以及一个 10 兆字节的只读数据库。

我见过的大多数论坛都表明，实现这一点的最佳方法是在项目中引用所需的文件，并将它们设置为内容和“复制到输出目录”。

我有两个问题/问题处理这个：

1.  添加这些文件并将它们设置为“内容”似乎不仅将文件复制过来，而且还将它们嵌入到 .dll 中。换句话说，我有 40 MB 的文件和一个 40 MB 的 dll（这个项目的唯一目标是导入这些文件，没有实质性代码）。 **如何防止制作这个非常大的 dll？**

2.  有没有其他方法可以将文件放入 App 包中？我很想使用自定义构建命令，虽然我可以将文件复制到目标目录 ${AppDirectory} 中，但这不会导致这些文件最终出现在应用程序包中。**这种方法可行吗？**

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:58:28.403

您需要包含主**.exe**项目中的文件。您可以通过对每个文件使用 MonoDevelop 的**Build Action** to **Content来做到这一点。**它们应该被复制到 .app 而不包含在 .dll（或 .exe）中。

**一种替代方法（用于开发）是**使用[iTunes 共享](http://jamesantrobus.wordpress.com/2011/01/16/itunes-file-sharing-with-monotouch/)将您的文件复制到您的设备。这使您在开发时可以**更快地**部署。

 ****当然，您不能将此类构建提交到应用商店（除非这些文件不需要使应用程序工作，不太可能）。*我所做的（对于我将近80MB*的只读数据库）是在`#if DEBUG`. 发布版本从*正常*位置加载文件。

我没有自动化该过程（仍在调试应用程序；-）但应该可以编写脚本，因此从调试和发布版本切换时不需要修改项目选项（针对每个文件）。****

# iframe - iframe 白闪

> ID：13184148
> 
> 赞同：5
> 
> 时间：2012-11-01T19:28:48.240
> 
> 标签：iframe

我的 iFrame 中有一个左侧导航，有两个项目，在两个页面之间切换。有时有白色闪光，有时没有。

到目前为止我尝试过的一些方法：

```
<iframe style="visibility:hidden;" onload="this.style.visibility = 'visible';"> 
```

没有做到这一点。

```
jQuery('#jobs-frame').load(function(){
    $(this).show();
});

jQuery('#primary a').click(function(){ 
    //alert('hello');
    jQuery('#jobs-frame').hide();
}); 
```

也没有做到这一点。我尝试过的任何其他方法似乎都已过时。让我感到困惑的是，以上 2 个解决方案有很多评论/反馈说它们有效，但是在 Chrome 中——我迄今为止测试过的唯一浏览器——我仍然遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T21:09:28.840

我对动态生成的 iframe 也有类似的问题。在 Chrome 上，切换`visibility`消除了白色闪光，但仍有闪烁。在 Safari 上，切换`display`实际上引入了一个相关的 iframe 重绘错误。

最终为我工作的是切换`opacity`：

```
<iframe style="opacity: 0;" onload="this.style.opacity = 1;">` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T16:31:41.217

如果您想避免“白色闪光”，请不要使用指向 HTML 页面的链接导航，而是将两个页面放入 2`<div>`秒并在它们之间切换（这也允许漂亮的动画）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-23T15:08:22.783

Chris Coyier 提供了一个非常优雅的解决方案，它比放置`visibility`属性更好。他有一个[很好的解释](https://css-tricks.com/prevent-white-flash-iframe/)为什么它更好，但简短的回答是“如果你使用`visibility`.

这是他的代码。把它放在你的，如果你已经有的话，`<head>`确保你把这个功能和你的结合起来。`window.onload`

```
(function () {    
    var div = document.createElement('div'),
        ref = document.getElementsByTagName('base')[0] || 
              document.getElementsByTagName('script')[0];

    div.innerHTML = '&shy;<style> iframe { visibility: hidden; } </style>';

    ref.parentNode.insertBefore(div, ref);

    window.onload = function() {
        div.parentNode.removeChild(div);
    }        
})(); 
```

它通过在页面上插入 CSS 来工作，这会使所有 iframe 不可见，因此 whiteflash 也不可见。当窗口加载时，CSS 被删除，一切都很好。

*我们都应该感谢他这篇好文章，而不是我:)。*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-28T08:59:54.117

只给`style="background-color: #000000;"`html 标签

# c# - 获得特定价值

> ID：13184150
> 
> 赞同：-3
> 
> 时间：2012-11-01T19:28:58.803
> 
> 标签：c#, winforms

我有一个网址：

> sys.php?x=23&y=20&z=9d939b

而且我真的不知道如何从中解析“z”值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:31:39.827

使用`HttpUtility.ParseQueryString()`方法，[这里](http://msdn.microsoft.com/en-us/library/ms150046.aspx)详述。它将返回一个集合，为您提供所有名称 (x,y,z) 和值 (23, 20, 3d939b)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:31:36.087

尝试：

```
var zValue = Request.QueryString["z"]; 
```

# jquery - jQuery 滑块按钮 api 方法

> ID：13184151
> 
> 赞同：2
> 
> 时间：2012-11-01T19:29:03.673
> 
> 标签：jquery, api, slider, wordpress

我在 wordpress 中设置了一个 jQuery 滑块，插件附带了一个 api。我正在尝试创建自己的上一个和下一个按钮，有人可以帮助我了解代码的用途

这是给我的api信息

API 方法：上一张幻灯片：revapi1.revprev(); 下一张幻灯片：revapi1.revnext();

我想我需要知道如何使用上面的这两种方法

谢谢杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:53:13.767

也许你可以试试这个。

把它放在你的标题中：

```
$(document).ready(function() {
    $("#revNext").click(function() {
        revapi1.revnext();  
    });
}); 
```

把它放在你的身体里

```
<div id="revNext"> Next Slide </div> 
```

# python - django admin从动作注册动态模型

> ID：13184154
> 
> 赞同：2
> 
> 时间：2012-11-01T19:29:18.380
> 
> 标签：python, django, dynamic, django-models, django-admin

我有奇怪的问题。在 admin.py 我可以说：

```
admin.site.register(MyModel) 
```

这显然很好。现在我希望这个模型作为用户操作的结果自动加载：

```
def user_action_from_admin_panel(......):
    .....
    admin.site.register(MyModel) 
```

MyModel 类在管理员中显示为没有链接的纯文本。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-14T12:40:36.810

> 动态创建的模型不会显示在管理员中，除非它们`app_labels`与 INSTALLED_APPS 中列出的包匹配
> 
> 这又是设计使然，不应被视为错误。

确保`app_label`在创建模型时添加

```
model = create_model('DynamicModel', app_label='existing_app') 
```

还要重新加载您的 url conf，以便新模型获取链接

```
# after creating model
from django.utils.importlib import import_module
reload(import_module(settings.ROOT_URLCONF)) 
```

来源：[https ://code.djangoproject.com/wiki/DynamicModels#Admininterface](https://code.djangoproject.com/wiki/DynamicModels#Admininterface)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T22:58:59.900

可能你需要这个

```
from django.core.urlresolvers import clear_url_caches
from django.utils.importlib import import_module

def user_action_from_admin_panel(......):
    .....
    admin.site.register(MyModel)
    reload(import_module(settings.ROOT_URLCONF))
    clear_url_caches() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T09:44:41.957

原因可能是因为 Django 找不到任何与该模型的管理部分匹配的 URL。因此，管理区域中的模型行将被设置为禁用，并且没有额外的添加或编辑链接。

在某些情况下，注册模型的代码在构建管理 URL ( [django.contrib.admin.site.AdminSite.get_urls()](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L242) ) 后触发。解决方法是更新全局 URL 的整个管理 urlpatterns，或使用一个名为[django-quickadmin](https://pypi.python.org/pypi/django-quickadmin)的 Django 应用程序，它会自动将所有自定义模型加载到 admin 中，而无需编写任何额外的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T19:16:38.863

如果我无权添加/更改，我有黑色链接。

尝试重新定义您的管理类：

```
class MyModelAdmin(admin.ModelAdmin):

    def has_add_permission(self, request):
        return True

    def has_change_permission(self, request):
        return True
...

admin.site.register(MyModel, MyModelAdmin) 
```

# c++ - 通过远程桌面编写位图

> ID：13184156
> 
> 赞同：1
> 
> 时间：2012-11-01T19:29:29.740
> 
> 标签：c++, remote-desktop, bmp

从视频中的帧中获取样本后，我使用下一个 c++ 代码编写 *.bmp 文件：

```
RETVAL Cbmp::WriteBitmapToFile(char *pcFileName,
                               unsigned char  *pucBGRImg, 
                               unsigned short usWidth,
                               unsigned short usHeight)
{
FILE *fp;
BITMAPINFO bmi;
LONG lStride;
BITMAPFILEHEADER bfi = {0};
LARGE_INTEGER lgbeginning = {0};

if(!pcFileName || !pucBGRImg)
{
    return NULL_POINTER;
}

bmi.bmiHeader.biSize = sizeof(bmi.bmiHeader);
bmi.bmiHeader.biCompression = BI_RGB;
bmi.bmiHeader.biBitCount = ::GetDeviceCaps(::GetDC(NULL),BITSPIXEL);
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biWidth  = usWidth;
bmi.bmiHeader.biHeight  = usHeight;

lStride = ( bmi.bmiHeader.biWidth * bmi.bmiHeader.biBitCount / 8 + sizeof(DWORD) ) & ~sizeof(DWORD);
bmi.bmiHeader.biSizeImage = lStride * bmi.bmiHeader.biHeight;

bfi.bfSize = sizeof(bfi) + sizeof(BITMAPINFO) + bmi.bmiHeader.biSizeImage;
bfi.bfType = 0x4d42;        // 0x42 = "B" 0x4d = "M" 
bfi.bfOffBits = sizeof(bfi) + sizeof(BITMAPINFO);

fp = fopen(pcFileName, "wb");
if (!fp)
{
    return CANT_OPEN_PATH;
}
fwrite(&bfi, sizeof(bfi), 1, fp); 
fwrite(&bmi, sizeof(BITMAPINFO), 1, fp); 
fwrite(pucBGRImg, bmi.bmiHeader.biSizeImage,1, fp);
fclose(fp);

return SUCCESS;
} //end of WriteBitmapToFile 
```

在一些用户发现错误之前，这一切都运行良好，当他们使用 Microsoft 远程桌面 (mstsc) 时会发生这种情况。

当他们点击保存位图按钮时，文件保存已损坏，然后我的相册屏幕无法查看

我注意到它只发生在从 Win XP 机器连接时

我不知道问题是因为我编写文件的方式，还是因为它是 Win XP 错误，或者可能是我可以更改的某些设置。

# objective-c - 如何记录应用会话持续时间？

> ID：13184157
> 
> 赞同：0
> 
> 时间：2012-11-01T19:29:32.043
> 
> 标签：objective-c, ios, timer, duration

我想在我的应用程序中获得 Game Center 成就，以便在一定时间内玩我的游戏。但是，我不确定如何记录用户玩了多长时间。我在想也许我可以创建一个单例类，该类在`applicationDidFinishLaunchingWithOptions:`直到`applicationWillTerminate`和 中都处于活动状态`applicationWillTerminate`，我用 保存持续时间`NSUserDefaults`，但这真的是最好的方法（如果它确实有效的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:54:09.417

您可以使用`-(void)applicationWillResignActive:(UIApplication *)application`和`-(void)applicationWillEnterForeground:(UIApplication *)application`开始和停止测量。

但是，要测量实际游戏时间，您可能应该实现更复杂的逻辑，例如在实际游戏开始时开始测量并在“游戏结束”和“暂停”事件时停止。然后你可以`-(void)applicationWillEnterForeground:(UIApplication *)application`只使用自动触发“暂停”（这将停止测量，因为它是一个“暂停”事件）。

# php - 删除嵌套数组元素的最有效方法

> ID：13184163
> 
> 赞同：0
> 
> 时间：2012-11-01T19:29:48.257
> 
> 标签：php, arrays, unset

说我有以下内容：

```
Array(
[0] => Array
    (
        [id] => 1
        [item] => first item
    )

[1] => Array
    (
        [id] => 3
        [item] => second item
    )

[2] => Array
    (
        [id] => 5
        [item] => third item
    )

) 
```

我想用`id`= 5 删除项目。我知道我可以遍历数组并取消设置，但我希望有一个更直接/更有效的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:34:08.530

如果你不能让 IDs 成为外部数组的键（那么你可以简单地使用`unset($arr[5]);`），循环数组确实是 dg.

```
foreach($arr as $key => $value) {
    if($value['id'] === 5) {
        unset($arr[$key]);
        break;
    }
} 
```

另一种选择是使用[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)- 但效率较低，因为它创建了一个新数组：

```
$arr = array_filter($arr, function($value) {
    return $value['id'] !== 5;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:35:18.100

为什么不使用设置为 ID 的键创建数组？例如：

```
Array(
[1] => Array
    (
        [id] => 1
        [item] => first item
    )

[3] => Array
    (
        [id] => 3
        [item] => second item
    )

[5] => Array
    (
        [id] => 5
        [item] => third item
    )

) 
```

然后你可以写：

```
<?php    
unset($array[5]); // Delete ID5
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:40:59.380

对于多级嵌套数组

```
<?php
    function remove_array_by_key($key,$nestedArray){
        foreach($nestedArray as $k=>$v){
            if(is_array($v)){
                remove_array_by_key($key,$v);
            } elseif($k==$key){
                unset($nesterArray[$k]);
            }
        }
        return $nestedArrat;
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T19:39:38.623

最有效的方法是拥有 2 个数组。

```
ID => Index
Index => Object (your current array) 
```

在您的 ID => 索引帮助器数组中搜索 ID ，该值将是您的主数组的索引，然后将它们都取消设置。

# batch-file - 批处理文件：将结果代码存储到变量中

> ID：13184164
> 
> 赞同：0
> 
> 时间：2012-11-01T19:29:51.470
> 
> 标签：batch-file

你能看到为什么这会显示 0

```
"%ConnectDirectExe%" -f"%ConnectDirectCredentials%" < "%CurrentCDConfigFile%" > "%CurrentCDTaskLogFile%"    
ECHO %errorlevel% 
```

但这显示为空白？

```
"%ConnectDirectExe%" -f"%ConnectDirectCredentials%" < "%CurrentCDConfigFile%" > "%CurrentCDTaskLogFile%"    
SET Result=%errorlevel%  
ECHO errorlevel is %Result% 
```

请注意，两种情况下的“%ConnectDirectExe%”行都完全匹配。如果我反转块以相反的顺序运行，结果也同样反转。

为什么我不能将 %errorlevel% 的结果存储在 Result 中并显示出来？它一直显示为空白。

**更新：**

如果我的 SET 语句出现在 IF 块中，它们似乎没有被执行。

给定以下批处理文件 if.bat：

```
echo off

SET Result=1
ECHO ResultCaption1=%Result%

IF 1 equ 1 (
    SET Result=2
    ECHO ResultCaption2=%Result%
) else (
  ECHO 1 is not = 2
) 
```

当我运行它时，我看到了这个输出：

```
C:\Batch>if.bat

C:\Batch>echo off
ResultCaption1=1
ResultCaption2=1

C:\Batch> 
```

不应该显示第二个 ECHO

```
ResultCaption2=2

? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:34:30.313

我怀疑您的代码嵌入在带括号的块中，可能是 IF 语句或 FOR 循环的一部分。问题是在解析行时会发生扩展，并且在执行块中的任何内容之前立即解析整个块。`%errorlevel%`执行命令之前的值也是如此 ，并且`%Result%`可能未定义。

解决方案是使用延迟扩展，必须先启用才能使用。在命令提示符下键入`HELP SET`以获取有关延迟扩展的更多信息，以及它在处理代码块时如何提供帮助。

```
setlocal enableDelayedExpansion
for ... in(...) do (
  "%ConnectDirectExe%" -f"%ConnectDirectCredentials%" < "%CurrentCDConfigFile%" > "%CurrentCDTaskLogFile%"
  SET Result=!errorlevel!
  ECHO errorlevel is !Result!
) 
```

# linux - tomcat 7 在 hello world jsp 中显示编译错误

> ID：13184167
> 
> 赞同：1
> 
> 时间：2012-11-01T19:29:56.003
> 
> 标签：linux, jsp, servlets, tomcat7

请看一下信息

• **目标：** 运行一个调用java 类的JSP 页面，两者都驻留在tomcat 服务器上

•<strong>环境
**服务器环境：** Linux
**服务器：** Tomcat7.0.27
**IDE：**无

•<strong>JSP（它所做的只是显示一个字符串）

```
<%@page import="HelloWorld.HelloWorld" %>  
<HTML>  
<HEAD>  
<TITLE>Hello World/TITLE>  
</HEAD>  
<BODY>  
<H1>Hello World</H1>  
String is: <%= HelloWorld.HelloWorld.display() %>  
</BODY>  
</HTML> 
```

•<strong>JSP 位置：TOMCAT/webapps/hello/hello.jsp

•<strong>Java 类（它所做的只是返回一个字符串）
包HelloWorld；

```
public class HelloWorld {  
public static String display() {  
 return "Hello World!"; // Display the string.  
   }  
} 
```

•<strong>Java 类位置：TOMCAT/webapps/hello/WEB-INF/classes/HelloWorld/HelloWorld.class •<strong>Java 类编译操作：javac -classpath TOMCAT/lib/servlet-api.jar:。-d /home/user/HelloWorld.java

**•WEB.XML**

```
<?xml version="1.0" encoding="Cp1252"?>  
<!DOCTYPE web-app PUBLIC '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN' 'http://java.sun.com/dtd/web-app_2_3.dtd'>  
<web-app>  
<display-name>hello</display-name>  
<description>no description</description>  
<servlet>  
<servlet-name>hello</servlet-name>  
<display-name>hello</display-name>  
<description>no description</description>  
<jsp-file>/hello.jsp</jsp-file>  
</servlet>  
<session-config>  
<session-timeout>30</session-timeout>  
</session-config>  
</web-app> 
```

•<strong>操作： o 将 java 类复制到目录 o 清理 TOMCAT/work 目录 o 关闭 TOMCAT o 启动 TOMCAT o 打开服务器：8080/hello/hello.jsp

•<strong>问题：HTTP 状态 500 org.apache.jasper.JasperException：**无法为 JSP 编译类**：在生成的 java 文件中**的第 14 行出现错误无法解析导入 HelloWorld**在第 8 行出现错误jsp 文件：/hello.jsp HelloWorld 无法解析`5: </HEAD> 6: <BODY> 7: <H1>Hello World</H1> 8: String is : <%= HelloWorld.HelloWorld.display() %> 9: </BODY> 10: </HTML>` Stacktrace:org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)

在 JSP 中调用 PackageName.ClassName.StringReturningMethod() 没有语法错误 类在包文件夹中。

是什么原因造成的？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:13:24.987

问题似乎与类名等于包名这一事实有关。由于您正在导入包并且在调用*display()*方法时还使用了类的 fqn，因此存在名称冲突。

因此，您导入了*HelloWorld.HelloWorld*，然后您尝试执行*HelloWorld.HelloWorld.display()*。***Java 将HelloWorld*** *.HelloWorld.display*的第一部分作为您导入的类，然后尝试在该类中查找名为*HelloWorld*的静态成员。

长话短说，要么删除导入（因为您使用的是 fqn），要么在调用*display()*时不使用 fqn 。

此致，

# java - java.util.calendar 中的默认字段值错误

> ID：13184172
> 
> 赞同：1
> 
> 时间：2012-11-01T19:30:43.463
> 
> 标签：java, calendar

我正在创建一个`java.util.Calendar`类的实例：

```
Calendar rightNow = Calendar.getInstance(); 
```

`getInstance()`得到一个`Calendar`使用默认时区和语言环境...它现在在波兰的 20:22 1.11.2012，但是当我打印`rightNow`出字段时，结果是错误的：

```
System.out.print(rightNow.get(Calendar.MONTH));
result: 10.

System.out.print(rightNow.get(Calendar.DAY_OF_MONTH));
result: 1.

System.out.print(rightNow.get(Calendar.DATE));
result: 1. 
```

我想在 12 月该`YEAR`领域也将是错误的。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:31:47.710

当您使用日历而不是从 1 时，月份从 0 开始

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#MONTH)

> get 和 set 的字段编号，指示月份。这是特定于日历的值。公历和儒略历中的第一个月是 JANUARY，即 0；最后一个取决于一年中的月数。

# java - 我可以在没有 WebDriver 对象的情况下抑制隐式超时吗？

> ID：13184178
> 
> 赞同：0
> 
> 时间：2012-11-01T19:31:10.920
> 
> 标签：java, selenium, webdriver

[WebDriver API](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html#findElements%28org.openqa.selenium.By%29)说用于`findElements`检查. `WebElement`此方法受隐式超时值的约束。因此，如果我想编写一个方法来检查是否存在，并且我不希望该方法等待隐式超时，我可以像这样暂时抑制它：

```
protected boolean doesElementExist(By by) {
    // Temporarily set the implicit timeout to zero
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.MILLISECONDS);
    // Check to see if there are any elements in the found list
    boolean exists = driver.findElements(by).size() > 0;
    // Return to the original implicit timeout value
    driver.manage().timeouts()
            .implicitlyWait(Properties.TIMEOUT_TEST, TimeUnit.SECONDS);
    return exists;
} 
```

但这需要您`WebDriver`管理超时值。我目前正在将上述方法移动到`By`调用的自定义子类中，`Locator`以便我可以从驱动程序或特定的调用这些方法`WebElement`，并且还可以扩展`Locator`正则表达式匹配和其他形式的信息检索。

问题是在我的`Locator`课堂上，我没有`WebDriver`，我有`SearchContext`。我想应该有一种方法可以`findElements`从`WebElement`. 有没有这样的方法？或者我是否必须在我的自定义`WebDriver`和`WebElement`实现中抑制这些方法的实现中的超时值（为了使这些新方法可供他们使用，它们也已扩展）？谢谢！

# asp.net-mvc - KendoUI MVC Grid - 使用 ajax 和服务器端验证添加新或更新记录

> ID：13184180
> 
> 赞同：1
> 
> 时间：2012-11-01T19:31:15.463
> 
> 标签：asp.net-mvc, kendo-ui

我已经使用带有 Ajax 绑定的 Knedo UI MVC 网格实现了内联编辑，在控制器中处理服务器端验证并使用 -

ModelState.AddModelError("错误：", ex.Message);

`@(Html.Kendo().Grid<AnalyticsServiceWeb.ViewModel.SomeViewModel>() .Name("Grid") .Columns(columns => { columns.Bound(p => p.Name); columns.Bound(p => p.Path); columns.Bound(p => p.Space); columns.Command(command => { command.Edit(); command.Destroy(); }); }) .ToolBar(toolbar => toolbar.Create()) .Editable(editable => editable.Mode(GridEditMode.InLine)) )`

```
function error_handler(e) {
    if (e.errors) {
        var message = "Errors:\n";
        $.each(e.errors, function (key, value) {
            if ('errors' in value) {
                $.each(value.errors, function () {
                    message += this + "\n";
                });
            }
        });
        alert(message);
    }
} 
```

当出现服务器端异常时，会显示服务器端错误消息，但它仍会完成 UI 中的操作，我的意思是即使存在服务器端异常，它也会将新记录添加到网格并更新。

有没有办法在动作开始之前保留 UI 的状态？，它应该以这种方式工作，不确定我是否遗漏了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:50:04.307

Kendo UI 在您的视图模型中支持（大多数）数据注释，这将为您提供由 Kedno UI 提供的客户端不显眼的验证，您可以通过查看`ModelState`

因此，在您的控制器操作中执行此操作将处理服务器端验证

```
If(ModelState.IsValid)
{
   //Write to the Database
}
else
{
   //We Have Validation Error, return the model for correction
} 
```

这里有一些例子

```
[Required]
[DataType.Currency]
public decimal Currency { get; set; } 
```

这告诉网格需要货币字段（显然），但比 Kendo Grid 更酷的东西会在编辑时自动呈现其货币文本框

它将对日期和时间执行相同的操作，因此这将呈现其日期选择器

```
[Required]
[DataType.Date]
public decimal Date { get; set; } 
```

要显示服务器端验证错误，请尝试以下操作：

错误的键包含字段的名称。您可以使用它来生成一条消息，其中包含错误的属性名称，例如

```
$.each(e.errors, function (key, value) {
    if ('errors' in value) {
        message += key + ":\n";
        $.each(value.errors, function () {
            message += this + "\n";
        });
    }
}); 
```

# mongodb - CakePHP分页器忽略顺序，但仅适用于某些值

> ID：13184182
> 
> 赞同：1
> 
> 时间：2012-11-01T19:31:20.250
> 
> 标签：mongodb, cakephp, cakephp-2.0, mongodb-query

在 CakePHP 中对我的用户模型进行分页时，我可以按一些值排序，但不能按其他值排序。例如，我可以通过*created*或*email* fine 对结果进行排序，但按*用户名*或*声誉*排序会返回一个看似任意顺序的用户列表。例如：

`$this->paginate = array('conditions' => array('User.is_active' => true), 'limit' => 24, 'order' => array('User.created' => 'DESC'));`

按预期工作，但是

`$this->paginate = array('conditions' => array('User.is_active' => true), 'limit' => 24, 'order' => array('User.reputation' => 'DESC'));`

没有。

起初我以为这可能是数据库问题，但是当我直接搜索数据库时，所有内容都会按预期返回和排序。

**注意：**我使用 MongoDB 和 ichikaway 的 CakePHP 的 MongoDB 插件；分页用户过去可以正常工作，所以我很肯定这不是插件的错误，但是某处发生了一些变化，我无法确定是什么。

最后，当我在调试信息中查看查询时，我可以看到 CakePHP 在搜索时甚至没有将*订单*值传递给数据库。上面的第一个搜索显示：

`db.users.find( {"is_active":true}, [] ).sort( {"created":-1} ).limit( 24 ).skip( 0 )`

第二个：

`db.users.find( {"is_active":true}, [] ).sort( [] ).limit( 24 ).skip( 0 )`

为什么 CakePHP 让我按某些东西订购，而其他的却不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:30:21.667

哎呀。这*是*一个数据库错误；不知何故，创建了一条记录，其中只有几个字段（例如，_id *、created、modified*和其他一些字段），这并非巧合的是我唯一可以排序的字段。删除它使一切恢复正常。

奇怪的是，进行搜索会很好，但使用相同的参数分页不会。也许它毕竟是一个插件/蛋糕错误？

# c# - 将数据集放入工作表的最快方法

> ID：13184191
> 
> 赞同：1
> 
> 时间：2012-11-01T19:31:49.000
> 
> 标签：c#, excel, dataset, com-interop, worksheet

需要将具有 16000 x 12 条目的相当 higeisch 数据集转储到工作表中。

我现在使用以下功能：

```
 for (int r = 0; r < dt.Rows.Count; ++r)
        {
            for (int c = 0; c < dt.Columns.Count; ++c)
            {
                worksheet.Cells[c + 1][r + 1] = dt.Rows[r][c].ToString();
            }
        } 
```

我将示例简化为中心部分

* * *

这是我在阅读了[Dave Zych](https://stackoverflow.com/users/1630665/dave-zych)的建议后实施的。这很好用。

```
 private static void AppendWorkSheet(Excel.Workbook workbook, DataSet data, String tableName)
    {
        Excel.Worksheet worksheet;
        if (UsedSheets == 0) worksheet = workbook.Worksheets[1];
        else worksheet = workbook.Worksheets.Add();
        UsedSheets++;
        DataTable dt = data.Tables[0];
        var valuesArray = new object[dt.Rows.Count, dt.Columns.Count];

        for (int r = 0; r < dt.Rows.Count; ++r)
        {
            for (int c = 0; c < dt.Columns.Count; ++c)
            {
                valuesArray[r, c] = dt.Rows[r][c].ToString();
            }
        }
        Excel.Range c1 = (Excel.Range)worksheet.Cells[1, 1];
        Excel.Range c2 = (Excel.Range)worksheet.Cells[dt.Rows.Count, dt.Columns.Count];
        Excel.Range range = worksheet.get_Range(c1, c2);
        range.Cells.Value2 = valuesArray;
        worksheet.Name = tableName;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:40:48.450

从您的值构建一个二维数组`DataSet`，然后您可以在 Excel 中将一系列值设置为数组的值。

```
object valuesArray = new object[dataTable.Rows.Count, dataTable.Columns.Count];
for(int i = 0; i < dt.Rows.Count; i++)
{
    //If you know the number of columns you have, you can specify them this way
    //Otherwise use an inner for loop on columns
    valuesArray[i, 0] = dt.Rows[i]["ColumnName"].ToString();
    valuesArray[i, 1] = dt.Rows[i]["ColumnName2"].ToString();
    ...
}

//Calculate the second column value by the number of columns in your dataset
//"O" is just an example in this case
//Also note: Excel is 1 based index
var sheetRange = worksheet.get_Range("A2:O2", 
    string.Format("A{0}:O{0}", dt.Rows.Count + 1));

sheetRange.Cells.Value2 = valuesArray; 
```

这比单独循环和设置每个单元格要快得多。如果您单独设置每个单元格，则必须通过 COM 与 Excel 对话（因为缺少更好的短语）每个单元格（在您的情况下约为 192,000 次），这非常慢。循环、构建您的数组并且只与 Excel 对话一次可以消除大部分开销。

# asp-classic - 获取本周的星期一，其中一周是星期一 - 星期日（VBScript）

> ID：13184195
> 
> 赞同：1
> 
> 时间：2012-11-01T19:32:15.913
> 
> 标签：asp-classic, vbscript

在 VBScript 中，假设一周是周一至周日而**不是**周日至周六，我如何获得本周的周一？

以下代码在一周是星期日-星期六时返回星期一，所以它很接近但不太正确：

```
Private Function getMonday(d)
    getMonday = DATEADD("d", 2 - WEEKDAY(d), d)
End Function 
```

如何在不更改任何 LCID 设置的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:41:42.623

Weekday 采用第二个参数来指定一周​​的第一天。

[http://msdn.microsoft.com/en-us/library/t51x9wtx(v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/t51x9wtx(v=vs.84).aspx)

所以`DateAdd("d", 1 - WeekDay(d, 2), d)`

我没有对此进行测试以确保我的逻辑是正确的。但这项技术应该适合你。

# jquery - 我在哪里可以找到一个体面的 jquery 用于 mvc 中的树视图

> ID：13184198
> 
> 赞同：-2
> 
> 时间：2012-11-01T19:32:16.570
> 
> 标签：jquery, asp.net-mvc, treeview

我正在寻找一个用于 asp.net mvc 的树视图插件。我找到了一个插件。[http://jquery.bassistance.de/treeview/demo/](http://jquery.bassistance.de/treeview/demo/)

但是为这个插件生成标记并不容易。有没有其他可用的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:52:12.970

[jstree](http://www.jstree.com/demo)是一个不错的插件，你可以试试。这个想法是根据树层次结构在视图中创建嵌套`UL -LI`元素的标记，然后在 UL 上调用 jstree 方法。

我写了一篇[文章](http://www.techiesweb.net/asp-net-mvc3-tree-view-with-jstree/)，逐步说明如何使用 jSTree 插件在 ASPNET MVC 中创建树视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:47:49.907

快速谷歌搜索，我发现了这个插件：

[http://www.jstree.com/demo](http://www.jstree.com/demo)

# c++ - 为什么不能从指针转换为模板函数中的指针引用

> ID：13184203
> 
> 赞同：-1
> 
> 时间：2012-11-01T19:32:34.477
> 
> 标签：c++, templates, casting

我在编译时有错误

```
INLINE template<typename T> T *&Animation::GetKey(int subAnim, int node, int frameInSubAnim)
{
    const int keyIndex = GetKeyIndex(subAnim, node, frameInSubAnim);
    return static_cast<T*>(m_Keys[keyIndex]);
} 
```

出现以下错误

```
d:\before_me\motion\pipeline\animation\AnimationData.inl(98): 
error C2440: 'return' : cannot convert from 'Motion::Animation::Key *' to 'Motion::Animation::Key *&' 
```

以及我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:37:52.257

编译器告诉您`static_cast<T*>(...)`生成一个临时的（*右值*）并且不能被非常量引用绑定（返回类型是`T*&`）。请注意，即使它会绑定到`T*const&`您也不是真的想要那样。

目前尚不清楚您要达到的目标，但请考虑返回`T*`（删除参考）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:09:54.533

我认为这捕获了您想要的内容并提供了一个*可怕*的解决方法

```
void* m_keys[] = { 0, 0, 0 };

template<typename T>
T*& foo(const int index)
{
    return *reinterpret_cast<T**>(&m_keys[index]);
}

int main()
{
 foo<int>(0) = new int();
} 
```

# python - 通过代理的 DNS？

> ID：13184205
> 
> 赞同：14
> 
> 时间：2012-11-01T19:32:58.003
> 
> 标签：python, dns, proxy

在过去的几天里，我一直在寻找一个好的解决方案来防止通过 socks4/5 代理的 DNS 泄漏。

我查看了 SocksiPy(-branch) 模块，并试图包装一些东西（urllib、urllib2、dnstools），但它们似乎仍然泄露了 DNS 请求。pyCurl 也是如此。

我知道 proxychains/proxyresolv 可以通过 socks4/5 代理抛出 DNS 请求，并且它使用一些 LD_PRELOAD 库来猴子补丁套接字的功能，就像 SocksiPy 一样，但我似乎无法弄清楚为什么它不通过 socks4 或 socks5 代理发送 DNS。

我想对于 linux，我可能可以将 CTypes 与 libproxychains.so 一起使用来解决问题，但我正在寻找多平台的东西，所以我认为猴子修补套接字模块是要走的路。

有没有人想出一个解决这个问题的好方法？为了可移植性，我想在代码中完成这一切，我不想求助于运行另一个代理服务器！

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T22:40:53.633

好吧，我想通了。您需要在开始使用套接字之前设置您的默认代理（例如，在您导入任何使用它的东西之前）。您还需要对套接字的 getaddrinfo 部分进行猴子补丁，然后一切正常。

```
import socks
import socket

# Can be socks4/5
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS4,'127.0.0.1', 9050)
socket.socket = socks.socksocket

# Magic!
def getaddrinfo(*args):
    return [(socket.AF_INET, socket.SOCK_STREAM, 6, '', (args[0], args[1]))]
socket.getaddrinfo = getaddrinfo

import urllib 
```

这可以通过您导入的任何模块代替 urllib 工作并代理所有 DNS 请求。希望它可以帮助那里的人！

编辑：您可以在我的[博客上找到更新的代码和内容](http://web.archive.org/web/20161011051014/http://fitblip.pub/2012/11/13/proxying-dns-with-python/)

# android - 如何在 Android 应用程序中提供主题选择？

> ID：13184207
> 
> 赞同：4
> 
> 时间：2012-11-01T19:33:11.077
> 
> 标签：android, themes

我创建了一个带有全息光主题的 Android 应用。发布后，一些用户要求将全息黑暗主题作为另一种选择。是否有任何开源应用程序可以为主题提供选择？或者有人可以解释这个过程吗？

# coffeescript - “胖箭头”（=>）何时绑定到“this”实例

> ID：13184209
> 
> 赞同：10
> 
> 时间：2012-11-01T19:33:26.597
> 
> 标签：coffeescript, this, arrow-functions

胖箭头可以在不同的设置中使用，但它并不总是绑定到我想要的实例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T19:33:26.597

胖箭绑定了3次

1.  声明方法时
2.  在方法中声明函数时
3.  在全局上下文中声明函数时

### 1.声明方法时

当 Coffeescript 编译器在类声明中遇到以下语法模式时

```
class A
    somemethod: (paramlist) => 
```

这将在类 A 的构造函数中产生以下代码

```
this.somemethod = __bind(this.somemethod, this); 
```

那就是该实例的定义是用函数的绑定版本覆盖初始分配

### 2.在方法中声明函数时

当你在方法中定义一个带有粗箭头的函数时，Coffeescript 编译器会自动创建一个闭包，并将外部方法的**this**隐藏到变量 **_this**中。内部函数中对**@**的任何引用都将 在生成的 javascript 代码中使用变量**_this**

```
somemethod: ->
   => @someCall() 
```

这是相应的Javascript

```
A.prototype.somemethod = function() {
    //_this references this
    var _this = this;
    return function() {
        //and _this is now used within the inner function
        return _this.someCall();
    };
}; 
```

没有粗箭头的函数定义不会为您创建该闭包。

### 3\. 在全局上下文中声明函数时

如果您像这样定义一个自由浮动函数（意思是类中的方法而不是另一个函数/方法中的方法）

```
foo = => @bar 
```

那么对应的Javascript会是这个样子

```
var foo,
  _this = this;

foo = function() {
    return _this.bar;
}; 
```

The interesting thing here again is that *this* is being assigned to _*this* which enables the definition of *foo* to close over _*this*.

The important part however is that *this* is always the global context of your execution environment. If you are in the browser it will be the window object. If you are running node.js it will be the module you are just running.

**Warning:** You shouldn't define any function accessing your global context anyway. This calls for trouble.

# iphone - 用于检查服务器是否可访问的 JSON 答案

> ID：13184210
> 
> 赞同：0
> 
> 时间：2012-11-01T19:33:28.363
> 
> 标签：iphone, ios, json, reachability

我有一个刚刚打开的应用程序调用了一个网络服务器页面，它给了我一个 json 字符串。当我在本地网络上时，一切正常，但是当我在本地网络之外打开应用程序并且没有 vpn 时，应用程序崩溃。如何控制 json 字符串？这是我的代码：

```
NSString *urlstr = [[NSString alloc] initWithFormat:@"%@yes.php", av];
NSURL *url = [[NSURL alloc] initWithString:urlstr];

NSError* error = nil;
NSString* urlString = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:&error];
NSString *newStr;

NSData* data=[newStr dataUsingEncoding:NSUTF8StringEncoding];

NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data 

                                                     options:kNilOptions 
                                                       error:&error];

sn1 = [[json objectForKey:@"Rele1"] intValue]; 
```

我想将 json 答案与 NULL 值进行比较，如果两个参数相等，我会显示警报。

**编辑：如果我尝试读取任何值，应用程序会在等待 json 回复时崩溃......我已经绕过了 NSURLRequest 的问题，该参数的 timeoutInterval 参数在 n 秒后关闭连接。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:51:30.113

除其他事项外，您未能：

*   检查从远程 URL 获取 ASCII 编码字符串的尝试是否失败（明显的可能性：URL 不可访问，结果是 UTF-8 而不是 ASCII）；
*   检查JSON解析是否成功（明显的可能性：服务器404d并返回HTML错误页面）
*   检查返回的 JSON 对象是否实际上是一个字典（例如，它可能是一个数组，在这种情况下调用`objectForKey:`它会引发异常）

将返回数据解析为 ASCII 然后重新编码为 UTF-8 也可能是多余的——因为一个超集另一个它具有阈值测试的效果，否则会阻止可接受的结果继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:08:39.293

这段代码有用吗？

1.  你应该检查`error`后`[NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:&error];`
2.  您正在读取 URL 数据`urlString`，然后从未初始化的位置获取 NSData`newStr`并对其进行解析？
3.  再次，您应该`error`在提供任何其他内容之前始终检查
4.  为什么您将数据读取为 ASCII 而将 NSData 读取为 UTF8？

# scala - 懒惰地解析非常大的xml

> ID：13184212
> 
> 赞同：9
> 
> 时间：2012-11-01T19:33:31.260
> 
> 标签：scala, xml-parsing

我有一个巨大的 xml 文件（40 gbs）。我想从中提取一些字段而不将整个文件加载到内存中。有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T10:46:22.010

XMLEventReader 的快速示例基于[此处](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)的 SAXParser 教程（由 Rinat Tainov 发布）。

我敢肯定它可以做得更好，但只是为了展示基本用法：

```
import scala.io.Source
import scala.xml.pull._

object Main extends App {
  val xml = new XMLEventReader(Source.fromFile("test.xml"))

  def printText(text: String, currNode: List[String]) {
    currNode match {
      case List("firstname", "staff", "company") => println("First Name: " + text)
      case List("lastname", "staff", "company") => println("Last Name: " + text)
      case List("nickname", "staff", "company") => println("Nick Name: " + text)
      case List("salary", "staff", "company") => println("Salary: " + text)
      case _ => ()
    }
  }

  def parse(xml: XMLEventReader) {
    def loop(currNode: List[String]) {
      if (xml.hasNext) {
        xml.next match {
          case EvElemStart(_, label, _, _) =>
            println("Start element: " + label)
            loop(label :: currNode)
          case EvElemEnd(_, label) =>
            println("End element: " + label)
            loop(currNode.tail)
          case EvText(text) =>
            printText(text, currNode)
            loop(currNode)
          case _ => loop(currNode)
        }
      }
    }
    loop(List.empty)
  }

  parse(xml)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T04:38:24.203

用户[SAXParser](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/SAXParser.html)，它不会将整个 xml 加载到内存中。[这里](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)很好的java例子，很容易在scala中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T23:01:41.220

如果您对其他 xml 库感到满意，那么[Scales Xml](https://github.com/chris-twiner/scalesXml "秤 Xml")提供了三种主要的拉式解析方法：

1.  [基于迭代器](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.4.3/PullParsing.html#Pull_Model "迭代器")- 只需使用 hasNext, next 即可获取更多项目
2.  [迭代函数](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.4.3/PullParsing.html#Simple_Reading_Of_Repeated_Sections "迭代函数")- 提供一个迭代器，但用于由简单路径标识的树
3.  [基于Iteratee](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.4.3/RepeatedSections.html#Pull_Parsing_ResumableIter.27atees "迭代者") - 允许组合多条路径

即将发布的 0.5 版本的重点是通过 aalto-xml 进行异步解析，允许额外的非阻塞控制选项。

在所有情况下，您都可以控制内存使用以及使用 Scales 处理文档的方式。

# websocket - em-websocket 和 javascript 客户端连接

> ID：13184214
> 
> 赞同：1
> 
> 时间：2012-11-01T19:33:36.257
> 
> 标签：websocket, eventmachine, em-websocket

我有一个简单的 eventmachine web socket 服务器（eventmachine 1.0.0）：

```
EM.run {

  # WebSocket Server
  EM::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
    ws.onopen do
      sid = @channel.subscribe{|msg| ws.send msg }
      puts "* new WebSocket client <#{sid}> connected!"
    end

    ws.onmessage do |msg|
      puts "* websocket client <#{@sid}> : #{msg}"
    end

    ws.onclose do
      @channel.unsubscribe(sid)
      puts "* websocket client <#{@sid}> closed"
    end
  end
} 
```

我正在尝试使用以下代码通过 javascript 客户端连接到它：

```
socket = new WebSocket("ws://localhost:8080");

socket.onopen = function(e) {
  socket.send('Connesso');
};

socket.onmessage = function(mess) {
  if (mess) {
    socket.send(mess);
  }
};

socket.onclose = function(e) {
  socket.send('Disconnesso');
}; 
```

使用以前版本的 safari，它与客户端未连接到服务器的最新版本完美配合。

我也尝试过使用最新的 Chrome Dev 稳定版本，但它不起作用。

Web 套接字标头已发送，但仍处于待处理状态。

如果我向网络套接字发送文本消息，我会收到`INVALID_STATE_ERR: DOM Exception 11`.

我看到有一个草案更改，但我认为 em-websocket 0.3.8 已经实现了它。

你能帮我解决这个问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:45:12.723

INVALID_STATE_ERR：DOM Exception 11 表示您的 websocket 尚未处于就绪状态。

您可以通过 socket.readyState 检查 websocket 对象的状态，当 socket.readyState == 1 时您可以发送消息

我通过使用超时为此创建了一个周转

```
timerId = setInterval(sendDataWhenReady, 1000);
function sendDataWhenReady(){
  if(socket.readyState == 1){
    ws.send(JSON.stringify({"type": 'STATUS', "status": status, "username": logged_in_user}))
    clearInterval(timerId);
  }
} 
```

# wordpress - Winamp Shoutcast 流式 wordpress

> ID：13184216
> 
> 赞同：0
> 
> 时间：2012-11-01T19:33:38.730
> 
> 标签：wordpress, streaming, radio

有没有办法将某种播放器添加到流 Winamp 广播的 Wordpress 中？

```
http://94.127.2.98:8000/radio.m3u
http://94.127.2.98:8000/radio 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:18:10.527

我将 JW Player 用于我们的广播电台[站点](http://mayumibeats.com/)

在此处下载文件[http://www.longtailvideo.com/players](http://www.longtailvideo.com/players)

您的代码将如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>       
    <script type="text/javascript">
      var flashvars =
      {
        'file':               'http://94.127.2.98:8000/;stream.nsv',
        'title':              'Your Stream',
        'type':               'sound',
        'duration':           '99999',
        'frontcolor':         'FFFFFF',  // text & icons                  
        'backcolor':          '2d5c88',  // playlist background           
        'lightcolor':         'C286BA',  // selected text/track highlight 
        'screencolor':        'FFFFFF',  // screen background            
        'id':                 'playerID',
        'autostart':          'true'
      };

      var params =
      {
        'allowfullscreen':    'false',
        'allowscriptaccess':  'always',
        'bgcolor':            '#FFFFFF'
      };

      var attributes =
      {
        'id':                 'playerID',
        'name':               'playerID'
      };

      swfobject.embedSWF("url_player_source_path/player.swf", 'player', '268', '20', '9.0.124', false, flashvars, params, attributes);
    </script>
     <div id="playercontainer" class="playercontainer"><a id="player" class="player" href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash">Get the Flash Plugin to listen to music.</a></div> 
```

# php - php curl - 遵循相对路径

> ID：13184219
> 
> 赞同：0
> 
> 时间：2012-11-01T19:33:48.940
> 
> 标签：php, curl

> **可能重复：**
> [是否可以在 PHP 中使用 curl 和相对路径？](https://stackoverflow.com/questions/6615971/is-it-possible-to-use-curl-with-relative-path-in-php)

我已经尝试了几个小时来让一个脚本工作，该脚本将遵循相对 url。

问题的快速总结。

我正在使用`FOLLOWLOCATION`跟踪 URL 的选项，但是当 url 是：

```
/redirectPage.html 
```

curl 像这样跟随它：

```
localhost/redirectPage.html 
```

这是我的代码：

```
$ch = curl_init();

//set options
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiejar);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HTTP_VERSION, 'CURL_HTTP_VERSION_1_1');
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
curl_setopt($ch, CURLOPT_REFERER, $referer);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);

$content = curl_exec($ch);

curl_close($ch); 
```

我发现的几个“解决方案”涉及解析 DOM 文档并用绝对 URL 替换 href 属性，但我正在寻找一个允许我仍然使用`FOLLOWLOCATION`. 有没有办法在 curl 中设置一个基本 URL，或者捕获`FOLLOWLOCATION`选项中跟随的重定向 url 并附加一个字符串？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:47:28.743

`FOLLOWLOCATION`允许`cURL`跟随`Location: /redirects`响应**标头**。但不允许您下载相对 URL。

您需要自己解析 URL。要解析相对 URL，您需要一个绝对 URL 作为参考。但是你在哪里将它提供给 cURL？你不，你不能，你不应该。

清理和解析 URL 是您的工作。不是 HTTP 客户端的。cURL 解析相对`Location: headers`. 但不是基于可能从未存在的页面的某些先前内存的相对 URL 请求。

# java - Java Service Wrapper System 托盘图标问题

> ID：13184222
> 
> 赞同：0
> 
> 时间：2012-11-01T19:33:59.393
> 
> 标签：java, windows-services, system-tray, java-service-wrapper

我正在使用 Java Service Wrapper (tanuki) 在我的 Java 应用程序之上创建一个 Windows 服务。当服务正在运行时，我想在系统托盘中创建一个图标来通知用户服务正在运行（同样一个不同的图标来显示服务已停止）

```
wrapper.ntservice.interactive=TRUE
wrapper.ntservice.hide_console=FALSE 
```

我已经设置了上述两个允许服务与桌面交互的属性，但是尽管如此，当我启动我的服务时，托盘图标没有显示（服务启动成功）。谁能告诉我这里可能会发生什么？

我是 java 1.6 和 JSW 35.7（修改为 64 位）

任何帮助将不胜感激

谢谢K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:36:31.747

您使用的是什么版本的 Windows。Microsoft 改变了服务在 Windows Vista 和 Server 2008 中的工作方式，以便服务现在可以在自己的桌面上运行。这使得服务无法再直接与桌面交互。

请参阅下一页上的注释：

[http://wrapper.tanukisoftware.com/doc/english/prop-ntservice-interactive.html](http://wrapper.tanukisoftware.com/doc/english/prop-ntservice-interactive.html)

干杯，莱夫

# imap - 从 IMAP 访问 gmail 星形颜色

> ID：13184225
> 
> 赞同：1
> 
> 时间：2012-11-01T19:34:08.970
> 
> 标签：imap, gmail-imap

Gmail 有更多的星星，而不仅仅是黄色的星星，但默认情况下它们是不启用的。 [http://support.google.com/mail/bin/answer.py?hl=en&answer=5904](http://support.google.com/mail/bin/answer.py?hl=en&answer=5904)

是否可以从 IMAP 客户端搜索具有特定星号颜色的 Gmail 中的所有邮件？

我尝试了以下但没有成功：

```
tag SEARCH X-GM-RAW "has:red-star"

tag SEARCH X-GM-RAW "has:red-star in:inbox"

tag SEARCH X-GM-RAW "has:red-star in:anywhere" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:54:22.590

是的，这应该完全有效。从[Gmail IMAP 扩展](https://developers.google.com/google-apps/gmail/imap_extensions#extension_of_the_search_command_x-gm-raw)页面：

> **SEARCH 命令的扩展：X-GM-RAW**
> 
> 为了提供对完整 Gmail 搜索语法的访问权限，Gmail 提供了 X-GM-RAW 搜索属性。执行 SEARCH 或 UID SEARCH 命令时与 X-GM-RAW 属性一起传递的参数将按照与 Gmail 网络界面中相同的方式进行解释。

对于星标，[Gmail 的高级搜索语法](https://support.google.com/mail/bin/answer.py?hl=en&answer=7190)说明您可以使用以下查询参数：

```
has:yellow-star
has:red-star
has:orange-star
has:green-star
has:blue-star
has:purple-star
has:red-bang
has:orange-guillemet
has:yellow-bang
has:green-check
has:blue-info
has:purple-question 
```

您的搜索是否有效`has:red-star`？

# php - phpinfo 和 php -v 在山狮上显示不同的版本

> ID：13184226
> 
> 赞同：0
> 
> 时间：2012-11-01T19:34:10.823
> 
> 标签：php

我正在尝试在 Mac OSX 10.8.2 上将我的 php 从 5.3.15 升级到 5.4.8。我已经手动下载了php 5.4.8的源代码并执行了：

```
./configure --prefix=/usr/local
make
sudo make install 
```

我也添加`export PATH=/usr/local/bin:$PATH`到我的`/etc/profile`文件中。

之后，`php -v`显示 5.4.8，而`<?php phpinfo(); ?>`仍然显示 5.3.15。

关于如何`<?php phpinfo(); ?>`指向新安装的 php 版本的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:45:57.527

发生这种情况是因为您在 Mac 中安装了两个版本的 php，一个带有 Web 服务器作为扩展，另一个（来自 cli 的那个）是默认安装在您的操作系统中的一个。

我通过mac端口安装了php和apache。这将为您解决这个问题。试试看！

# memory - 如何最小化内存使用并在已安装 SQL Server 的 Windows Server 2008 R2 上安装 Hyper-V 角色

> ID：13184228
> 
> 赞同：0
> 
> 时间：2012-11-01T19:34:19.173
> 
> 标签：memory, virtual-machine, windows-server-2008-r2, sql-server-2012, hyper-v

如何在 Windows Server Std 上安装和设置 Hyper-V 角色。已安装 SQL Server 2012 的 2008 R2。SQL Server 是这台机器上的优先级。只有一个虚拟机将被安装并用于测试从服务器的映像备份进行的灾难恢复还原，完成测试后可以移除 VM，以便我们可以测试另一台服务器。其他服务器相似或功能较弱，但内存较少。

我不打算为此创建分区。目前，我们的 RAID 驱动器上有足够的空间。我正在考虑使用静态内存并将虚拟机限制为 4 GB 的 RAM，并为 SQL Server 设置 12 GB。托管 Hyper-V 的服务器是具有 16 GB RAM、Intel Xeon、E5345 @3.33 GHZ（2 个处理器）的 Dell PowerEdge 2900。

讨论：

1.  如果我们没有安装任何虚拟机或正在使用/测试虚拟机，Hyper-V 将使用多少内存？
2.  如果我们确实安装了虚拟机并且我们正在测试还原（非常基本的测试），那么 Hyper-V 将使用多少内存。
3.  当我们不需要 Hyper-V 时，有没有办法轻松“关闭”它？还是我们必须一直更改内存设置？

**更新 11 月 9 日**

我应该提到我们安装的服务器角色是：Active Directory、DNS、文件服务、WSUS、IIS。虽然 IIS 仅用于 WSUS。我们在域中使用两个域控制器。这也许是我们不应该同时安装 SQL 服务器并添加 Hyper-V 角色的最大原因。因此，我们计划购买一台“简单”的翻新戴尔服务器来测试灾难恢复，并且根本不使用 Hyper-V。这使我们的生产服务器的图像恢复测试保持关闭，我认为这是明智的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T23:08:21.677

1.  这取决于您的服务器和安装的角色，以及您是否打开 Hyper-V 管理控制台。在您使用尚未打开 Hyper-V 管理控制台的新启动服务器的配置中，它可能在 10-20 MB 的活动内存范围内，实际上没有 CPU（可能接近 10 比 20）。为您的设置获得一个非常好的数字的一个好方法是在没有运行虚拟机的情况下干净启动并检查内存空闲，然后停止 Hyper-V 服务并再次检查内存量。禁用这些服务，重新启动，检查内存量，然后最后启动服务并再次检查内存量。前两个和后两个数字之间的差异将使您很好地了解 Hyper-V 在您的配置中占用了多少。

2.  Hyper-V 内存使用量随着使用量的增加而增加，但基本的 Hyper-V 服务主要只是运行每个 VM 运行的 vmwp.exe 实例。CPU 时间从主处理器中分离出来，并且主操作系统保证了它自己的（相当大的）CPU 和内存片。每个 VM 运行一个 vmwp.exe，占用 20-50 MB（取决于 VM 配置）加上分配给 VM 的内存量。CPU 时间很难判断，因为这也取决于 VM 配置和服务器负载，但通常 VM 的 CPU 时间对主机操作系统来说是第二个字符串。计算此数量的一个好方法是在没有运行 VM 的情况下干净启动，记下可用内存量，然后启动一个典型的 VM。等待该VM完成启动，而不是再次释放内存量，然后登录VM，最后再看看服务器中的可用内存量。3 之间的差异应该让您对正在使用的内容有一个很好的了解。

3.  Hyper-V 本质上是执行的服务和一些进程，每个 VM 1 个。如果停止 nvspwmi 服务（Hyper-V 网络管理服务）、vmms 服务（Hyper-V 虚拟机管理）和 vhdsvc 服务（Hyper-V 映像管理服务），则可以停止 Hyper-V。注意：在停止这些服务之前，您必须关闭所有虚拟机。每个 VM 在 vmwp.exe 实例中运行。当您停止 Hyper-V 时，它们将关闭。注意：这些名称在 server 2012 下是不同的。虽然这不会消除 Hyper-V 使用的 100% 的内存/处理器，但应该可以轻松地减少 99% 以上。

# queue - 如何延迟jquery函数

> ID：13184229
> 
> 赞同：0
> 
> 时间：2012-11-01T19:34:33.460
> 
> 标签：queue, delay

我有一个功能：

```
 (function(jQuery) {
jQuery.fn.przelicz = function() {
return this.each(function() {

     var wysokosc = jQuery(window).height() * 0.554;
     jQuery(this).find("img").height(wysokosc);
            jQuery(this).height(wysokosc);
});

};
})(jQuery); 
```

我希望这个函数能以 300 毫秒的延迟运行。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:54:05.903

可以在这里找到使用 jquery api 的替代方法 [http://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:39:56.047

您可以使用标准 JavaScript`setTimeout()`函数在延迟后运行函数。

```
setTimeout(jQuery.fn.przelicz, 300); 
```

# sql-server - SQL Server 使用 AND 和 IF？

> ID：13184230
> 
> 赞同：0
> 
> 时间：2012-11-01T19:34:37.707
> 
> 标签：sql-server

我正在编写一个存储过程，但我无法弄清楚编译器根本不会给我任何错误规范。只是它说查询完成但有错误。我看不到错误..？！

这将用作更新两个表的存储过程，代码本身非常不言自明。

```
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[insertRankingData]
@domannamn [varchar](100),
@keyword [varchar](100),
@dagensdatum [Date],
@rankingposition [Decimal]
AS
DECLARE @domanID int 
DECLARE @datumen date 

IF(SELECT COUNT(*) FROM [dbo].[t_doman] WHERE doman_namn = @domannamn) = 0
BEGIN
INSERT INTO [dbo].[t_doman] (doman_namn) 
    VALUES(@domannamn)

    SELECT @domanID = SCOPE_IDENTITY()
SELECT @todaysdate = GETDATE()
END
ELSE
BEGIN
SELECT @domanID = [doman_id] 
    FROM [dbo].[t_doman] 
    WHERE doman_namn = @domannamn

SELECT @todaysdate = GETDATE()
END

IF NOT @domanID IS NULL
BEGIN 
IF NOT EXISTS (SELECT (ranking_date, ranking_keyword, ranking_id_doman) 
                    FROM [dbo].[t_ranking] 
                    WHERE ranking_id_doman = @domanID
                    AND ranking_keyword = @keyword
                    AND ranking_date = @datumen)
BEGIN

       INSERT INTO [dbo].[t_ranking] (ranking_id_doman, ranking_date, ranking_position, ranking_keyword) 
       VALUES(@domanID, @todaysdate, @rankingposition, @keyword)    
END
ELSE
BEGIN 
       UPDATE [dbo].[t_ranking] 
       SET ranking_position = @rankingposition
       WHERE ranking_date = @todaysdate
       AND ranking_keyword = @keyword
       AND ranking_id_doman = @domanID 
END
  END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:38:29.107

尝试这个：

```
ALTER PROCEDURE [dbo].[insertRankingData]
@domannamn [varchar](100),
@keyword [varchar](100),
@dagensdatum [Date],
@rankingposition [Decimal]
AS
DECLARE @domanID int 
DECLARE @datumen date 
IF EXISTS(SELECT 1 FROM [dbo].[t_doman] WHERE doman_namn = @domannamn)
BEGIN
INSERT INTO [dbo].[t_doman] (doman_namn) VALUES(@domannamn)
SELECT @domanID = SCOPE_IDENTITY()
SELECT @todaysdate = GETDATE()
END
ELSE
BEGIN
SELECT @domanID = [doman_id] FROM [dbo].[t_doman] WHERE doman_namn = @domannamn
SELECT @todaysdate = GETDATE()
END
IF @domanID IS NOT NULL
BEGIN 
IF NOT EXISTS (SELECT ranking_date, ranking_keyword, ranking_id_doman
                    FROM [dbo].[t_ranking] 
                    WHERE ranking_id_doman = @domanID
                    AND ranking_keyword = @keyword
                    AND ranking_date = @datumen)
BEGIN
INSERT INTO [dbo].[t_ranking] (ranking_id_doman, ranking_date, ranking_position, ranking_keyword) 
    VALUES(@domanID, @todaysdate, @rankingposition, @keyword)   
END
ELSE
BEGIN 
    UPDATE [dbo].[t_ranking] 
    SET ranking_position = @rankingposition
    WHERE ranking_date = @todaysdate
    AND ranking_keyword = @keyword
    AND ranking_id_doman = @domanID 
END
  END 
```

希望这可以帮助！！

# cakephp - CakePHP如何在保存数据后获取最新的自动递增ID

> ID：13184231
> 
> 赞同：0
> 
> 时间：2012-11-01T19:34:38.453
> 
> 标签：cakephp

我也检查了[这个](https://stackoverflow.com/questions/11127210/cakephp-saving-data-to-database)问题和[这个](https://stackoverflow.com/questions/979709/what-is-the-equivalent-to-getlastinsertid-in-cakephp)问题。我正在尝试实现[这个](https://stackoverflow.com/questions/6541302/thread-messaging-system-database-schema-design)问题中描述的模型。

我想要做的是，在消息控制器的添加功能上，在线程表中创建一条记录（该表只有一个主键和自动增量字段），然后将其 id 插入到消息表中我已经拥有的用户 ID，然后将其保存在 message_read_state 和 thread_participant 表中。

这就是我在线程模型中尝试做的事情：

```
function saveThreadAndGetId(){
    //$data= array('Thread' => array());
    $data= array('id' => ' ');
   //Debugger::dump(print_r($data));
   $this->save($data);
   debug('id: '.$this->id);
    $threadId = $this->getInsertID();
    debug($threadId);
    $threadId = $this->getLastInsertId();
    debug($threadId);
    die();
    return $threadId;
}

$data= array('id' => ' '); 
```

上述函数中的这一行在线程表中添加了一行，但我无法检索 id。有什么办法可以获取id，还是我保存错误？

最初我在消息控制器中做查询：

```
$this->Thread->query('INSERT INTO threads VALUES();'); 
```

但后来我发现 lastId 函数不适用于手动查询，所以我恢复了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:33:51.167

您设置`$data`为基本上是一个空数组，其 id 为`' '`. 不确定您对此有何期待。:) 尝试不要手动将“id”设置为空字符串，并保存一些数据。那么你应该得到ID就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:53:35.160

这里返回下一个自动增量值。

```
/* @return int */
private function getNextThreadId() {
    $result = $this->Thread->query("SHOW TABLE STATUS LIKE 'threads';");
    $next = $result[0]['TABLES']['Auto_increment'];
    return $next;
} 
```

Thread -> 或您模型的任何其他名称

线程 -> 或您的数据库表的任何其他名称

# facebook - Javascript SDK 是否更新 accessToken 到期？

> ID：13184232
> 
> 赞同：1
> 
> 时间：2012-11-01T19:34:39.943
> 
> 标签：facebook, access-token, facebook-oauth

对不起，如果这是一个简单的超级基本问题......但我只是想澄清一下。

如果我们的页面大部分页面都在调用Facebook Javascript SDK()，那么调用SDK时是否会刷新更新accessToken的过期时间？

我注意到，如果我总是在我们的网站上打开调用 SDK 的页面，那么 accessToken 似乎不需要刷新。但是，如果我离开计算机超过 2 小时并且在此期间不刷新页面或打开其他拨打电话的页面。返回计算机并重新加载页面后，我收到 accessToken expired 错误。

那么 accessToken 是否只有在对 SDK 的调用不超过默认 2 小时时才会过期？

干杯

# xcode - Core Data 教程过时了？

> ID：13184233
> 
> 赞同：0
> 
> 时间：2012-11-01T19:34:39.963
> 
> 标签：xcode, macos, core-data

我开始浏览 developer.apple.com 上的“iOS 核心数据教程”，但只停留了几段。它说要使用似乎不存在的“基于窗口的应用程序模板”创建一个新项目在我的 xcode 版本（4.5.1）中，所以我改用“单视图应用程序”。那么问题是没有应该由模板提供的 xcdatamodeld 文件，并且它讨论的应用程序委托属性（如 NSManagedObjectContext）也丢失了。

是否有来自 Apple 的 4.5.1 更新教程涵盖此材料？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:21:53.553

事实上，该教程需要针对 Xcode 4 和 iOS 6 进行更新。

这是针对 Xcode 4 更新的教程代码，并附有一些说明： [https ://github.com/arielelkin/Locations](https://github.com/arielelkin/Locations)

# java - 为什么在使用 JAXB 数据绑定部署任何服务时 JAX-WS 会冻结？

> ID：13184238
> 
> 赞同：2
> 
> 时间：2012-11-01T19:35:10.213
> 
> 标签：java, maven, jaxb, jax-ws, java-metro-framework

我正在尝试创建一个 JAX-WS 服务，该服务使用从非常大（900 多个类）的[Opentravel Alliance 模式](http://www.opentravel.org/specifications/SchemaIndex.aspx?FolderName=2011B)集生成的对象的 JAXB 数据绑定。

只要我的 web 方法不引用，我就能够在各种 servlet 容器（Jetty、Tomcat6/7 等）上成功部署包含我的 JAX-WS 服务的战争（使用正确的 web.xml 和 sun- **jaxws.xml**）我的任何 JAXB 对象。例如，这有效：

```
@WebService(serviceName = "OTAService", 
targetNamespace = "http://www.opentravel.org/OTA/2003/05")
@Addressing
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
public class OTAService {
    public String sayHello(final String name) {
        return "Hello " + name + "!";
    }
} 
```

但是，如果我通过添加注释或直接引用对象来更改 web 方法以使用 JAXB 数据绑定，`@XmlSeeAlso`我尝试过的所有 servlet 容器都会无限期挂起（1 小时以上），没有错误，并且永远不会启动：

```
@WebService(serviceName = "OTAService", 
targetNamespace = "http://www.opentravel.org/OTA/2003/05")
@Addressing
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
@XmlSeeAlso({OTAHotelResNotifRQ.class, OTAHotelResNotifRS.class})
public class OTAService {
    @Action(input = "OTA_HotelResNotif")
    @WebMethod(operationName = "OTA_HotelResNotif", action = "OTA_HotelResNotif")
    public @WebResult OTAHotelResNotifRQ tokenizeOtaHotelResNotifRq(
    @WebParam(partName = "OTA_HotelResNotifRQ", name = "OTA_HotelResNotifRQ", 
    targetNamespace = "http://www.opentravel.org/OTA/2003/05") 
    final OTAHotelResNotifRQ request) {
        return request;
    }
} 
```

我已经验证了所有必要的 jar，包括 JAXB 和 JAX-WS API 以及运行时 jar，都存在于 war 的 /lib 目录中。

包含我的 JAXB 对象的 jar 是我的 JAX-WS 项目所需的依赖项，可以通过`mvn clean install`在[此项目](https://github.com/justingarrick/opentravel-2011b-all)上运行来创建并安装到本地存储库。

我的 JAX-WS 项目（可[在此处](https://github.com/justingarrick/jaxws-test)获得）可以通过调用`mvn clean package jetty:run-war`.

`sayHello`您会注意到，如果仅存在简单方法，Jetty 就会立即启动。但是，如果您取消注释 JAXB 方法，Jetty 和我尝试过的所有其他 servlet 容器将在尝试实例化 JAX-WS servlet 时永远挂起。 **有人可以解释为什么带有 JAXB 数据绑定的 Web 方法会阻止我的战争部署吗？由于在各种 servlet 容器上的冻结行为是相同的，我觉得肯定有一些我遗漏的关键步骤；但是，由于没有报告错误并且容器启动只是挂起，我不知道如何继续。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:34:59.643

这似乎是由于我的 opentravel 项目中有大量 JAXB 对象。当我将 VisualVM 连接到启动器进程并对内存进行采样时，它看起来好像 JAXB 出于某种原因正在遍历和预加载/缓存整个对象树（也许是为了重构架构以包含在 WSDL 中？）。

[按照这个问题](https://stackoverflow.com/questions/794354/jaxbcontext-initialization-speedup)`-Dcom.sun.xml.bind.v2.runtime.JAXBContextImpl.fastBoot=true`的答案中的描述进行设置，并通过让 Jetty 快速启动来增加 内存。`-Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m`

我还不确定运行时性能是否会是一个可以接受的权衡。

# .htaccess - .htaccess 执行重定向到新域

> ID：13184241
> 
> 赞同：2
> 
> 时间：2012-11-01T19:35:18.983
> 
> 标签：.htaccess, redirect

我一直在开发一个新网站，我需要使用 .htaccess 来获取我们的维护页面并将其发送到我们当前的网站：

例如：mywebsite.net/shop_closed.html 应该重定向到 www.mysite.com

我试过用这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^website.hostname.net [NC]
RewriteRule ^(.*)$ http://www.oldsite.com/$1 [R=301,L] 
```

这抓住了一切。我今天才刚刚了解.htaccess，我不确定我是否对我一直在做的事情感到满意。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:16:16.153

用这个替换你的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^website\.hostname\.net$ [NC]
RewriteRule ^(shop_closed\.html)$ http://www.oldsite.com/$1 [R=301,L,NC] 
```

# oracle - 在 PL/SQL 中创建变量

> ID：13184243
> 
> 赞同：2
> 
> 时间：2012-11-01T19:35:43.770
> 
> 标签：oracle, plsql

来自初学者的简单 PL/SQL 问题：在现有数据集中创建新变量的正确 PL/SQL 语法是什么？

我想从保险索赔数据集 (rpt_claim) 中的日期字段 (svcdat) 中提取年份。日期字段是数字字段，格式为 YYYYMMDD，例如 20120704 表示 2012 年 7 月 4 日。

我第一次创建“年份”变量时没有成功：

```
declare
  year number(4);
begin
  select svcdat into year 
  from rpt_claim
  where year=floor(svcdat/10000);
end; 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:25:11.650

要从日期中提取年份，您可能会使用[提取](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions059.htm#i1017161)函数，但在此之前，当您将日期存储为数字时，您必须使用[to_date](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions203.htm#i1003589)函数将它们转换为日期数据类型。这是一个例子（使用oracle 11g）：

```
-- For the sake of simplicity this table contains only one column.
SQL> create table rpt_claim(
  2    date_col number(8)
  3  )
  4  /

Table created

SQL> insert into rpt_claim(date_col) values(20120704);

1 row inserted

SQL> commit;

Commit complete

 SQL> declare
  2    l_year number(4);
  3  begin
  4    select extract(year from to_date(date_col, 'yyyymmdd'))
  5      into l_year
  6      from rpt_claim
  7    where rownum = 1;
  8    dbms_output.put_line(to_char(l_year));
  9  exception
 10    when no_data_found
 11    then dbms_output.put_line('No data has been selected');
 12  end;
 13  /

2012                  --<-- result

PL/SQL procedure successfully completed 
```

请注意，在上面的示例中，查询返回 1（第一个选择）行，因为它被明确要求 ( `where rownum = 1`) 这样做。在您的情况下，查询可能会返回一条以上的记录，并且要处理您必须使用[游标](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#LNPLS00602)和[游标 FOR 循环](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/cursor_for_loop_statement.htm#LNPLS1155)（例如）来处理返回的数据或[集合](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHIEBJC)。

下面是一个使用集合的例子：

```
-- add more records 
SQL> insert into rpt_claim(date_col) 
  2    select 20120704 + level 
  3      from dual 
  4    connect by level < = 5;

5 rows inserted

SQL> commit;

Commit complete

SQL> select * from rpt_claim;

 DATE_COL
---------
 20120704
 20120705
 20120706
 20120707
 20120708
 20120709

 6 rows selected

SQL> declare
  2    type t_years is table of number(4);
  3    l_year t_years;
  4  begin
  5    select extract(year from to_date(date_col, 'yyyymmdd'))
  6      bulk collect into l_year
  7      from rpt_claim;
  8  
  9    if l_year is not empty
 10    then
 11      for i in l_year.first..l_year.last
 12      loop
 13        dbms_output.put_line(to_char(l_year(i)));
 14      end loop;
 15    else
 16      dbms_output.put_line('No data has been selected');
 17    end if;
 18  end;
 19  /

2012
2012
2012          --<-- our result
2012
2012
2012

PL/SQL procedure successfully completed 
```

# javascript - 拾取已经在画布中绘制的图像

> ID：13184245
> 
> 赞同：1
> 
> 时间：2012-11-01T19:35:47.627
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

> **可能重复：**
> [如何将 HTML <canvas> 数据发送到服务器](https://stackoverflow.com/questions/9478659/how-to-send-html-canvas-data-to-server)

我制作了一个表格，可以将base64中的图片发送到php脚本。我已经[**使用这个插件**](http://www.xarg.org/project/jquery-webcam-plugin/)用闪光灯捕捉图像并将其放在画布中（在发布表单之前用于预览）。但是我怎样才能在画布中获取实际的图片数据以通过 ajax 发送呢？

（对不起英语！）:-) 谢谢

编辑 ：

解决了 ！

我只是指着画布

`canvas = document.getElementById('canvas');`

`pngBase64 = canvas.toDataURL("image/png");`

在我发布我的`pngBase64`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:57:37.567

```
canvas = document.getElementById("canvas");
context = canvas.getContext("2d");
data = context.getImageData(0,0,canvas.width,canvas.height); 
```

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

# asp.net - 无法连接到 asp.net 中的 SQL Server 数据库

> ID：13184246
> 
> 赞同：1
> 
> 时间：2012-11-01T19:35:51.820
> 
> 标签：asp.net, sql-server

我正在使用`configurationmanager.appsetting`，我`cn.Open`在行中遇到错误。

网页表单代码如下：

```
public partial class admin_CheckDocuments : System.Web.UI.Page
{
    SqlConnection cn = new SqlConnection(ConfigurationManager.AppSettings["con"]);
    string sql;
    string str;

    protected void Page_Load(object sender, EventArgs e)
    {
        cn.Open();
        str = Request.QueryString["taxid"];

        if (!IsPostBack)
        {
            filldata();
        }
    } 
```

`web.config`是：

```
<configuration>
    <connectionStrings/>
    <appSettings>
       <add key="con" 
            value="Data Source=EGGG\SKDB;Initial Catalog=tax;Integrated Security=true"/>
    </appSettings> 
```

错误是

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T20:24:18.470

引发此问题的原因可能是错误的服务器名称、禁用的远程连接和防火墙阻止。

您能否按照以下步骤解决此问题？

**·检查运行SQL Server的服务器是否可以访问。您可以使用 ping 命令进行测试。例如，ping ****或 ping**. ping 命令可能会被防火墙阻止，请确保在防火墙中启用了 ICMP。 [更多信息](http://technet.microsoft.com/en-us/library/cc739791%28v=ws.10%29.aspx#BKMK_4.)****

 ****·选择合适的协议**

**·根据您选择使用的协议相应地配置 Windows 防火墙。有关如何配置 Windows 防火墙以允许 SQL Server 的详细信息，请查看[更多信息](http://msdn.microsoft.com/en-us/library/cc646023.aspx.%5C)**

**·启用 SQL Server 浏览器服务**

如果满足以下条件，则需要启用 SQL Server Browser Services：

*1.SQL Server没有监听默认的1433端口或者没有使用默认的管道名\.\pipe\sql\query；*

*2.连接字符串中未指定对应的TCP端口或管道名称（如Srv1\SQL2008, 1500）。*

如果您启用了 SQL Server 浏览器服务，您仍然需要在 Windows 防火墙中打开浏览器服务使用的 UDP 1434 端口。

让我知道这是否得到解决

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:16:53.970

我在您的连接字符串中注意到了这一点：

> 综合安全=真

这意味着您的代码将尝试使用运行 asp.net 进程的服务器帐户的凭据进行连接。这通常是本地帐户，如网络服务、本地服务或 IIS_IUSRS。您可以更改此设置，但默认情况下，您甚至可能无权登录数据库。**

# javascript - javascript中意外的嵌套循环行为

> ID：13184247
> 
> 赞同：0
> 
> 时间：2012-11-01T19:35:54.807
> 
> 标签：javascript

我正在实施一种排序，但遇到了一些意想不到的行为：

```
var searches = ['beta', 'alpha'];
var i = 0; j = 0;

for(i = 0; i < searches.length; i++){
        min = i;

        // first time through, i = 0
         alert(i); 
        for(j = i; j<searches.length; j++);
        {
            // first time through j = 2\. If i = 0, how does j = 2?
             alert(j); 
            // .. sort code
        }
} 
```

事实上，j 总是 2。为什么当它进入 for 循环时 j 不被设置为 i？

这是jsfiddle：http: [//jsfiddle.net/w2kK9/3/](http://jsfiddle.net/w2kK9/3/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:40:00.667

你有一个错位的分号：

```
for (j = i; j < searches.length; j++); // <-- 
```

其余部分被解释为在循环执行*后*运行的块（何时`j == 2`）。

把它拿出来，它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:40:43.750

您的嵌套 for 循环没有做任何事情：

```
for(j = i; j<searches.length; j++); // <- Your for loop proceeds only on this line. 
```

去掉分号。

# air - Mobile AIR 项目中的 FlasCC SWC

> ID：13184248
> 
> 赞同：2
> 
> 时间：2012-11-01T19:35:56.533
> 
> 标签：air, flex4, swc, alchemy, flascc

我正在使用 Flex Mobile 和 ZXing 为 iOS 和 Android 编写条形码扫描仪。我已尽我所能优化 ZXing，但在某些旧设备上用于连续扫描仍然太慢。我使用 FlasCC 将一些繁重的工作提取到 C SWIG 中，并在扫描期间获得了相当不错的加速。但是，在实际设备上进行测试时，启动应用程序时会出错。调试控制台显示“无法初始化互斥锁”并崩溃。删除对我的 SWC 的调用，该应用程序启动得很好。首先，是否可以在移动设备上使用这种类型的 SWC？如果是这样，我做错了什么？此外，生成的库的大小非常大（400KB+）。有没有办法通过排除所有多余的绒毛来减小尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T20:38:28.453

这是一个老问题，但万一其他人遇到这个问题：

我遇到了同样的问题，修复只是使用最新版本的 FlasCC（现在称为[CrossBridge](https://github.com/adobe-flash/crossbridge "十字桥")）重新编译我的 FlasCC SWC。

我使用了 CrossBridge 1.0.1 版，它成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:58:03.483

虽然您*可以*在移动设备上使用 FlasCC，但我不推荐它：您的代码可以以本机速度运行，并且您可以访问 OS API。你看过[Air Native Extensions](http://www.adobe.com/devnet/air/native-extensions-for-air.html)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:59:42.273

AIR for mobile 尚不支持 Flash Workers，这是 FlasCC 多线程所基于的。您是想在后台线程中运行 ZXing，还是使用“-pthread”编译 FlasCC SWC？

[编辑] 实际上，我们的 AIR 移动启动代码中可能存在错误，即使 FlasCC 代码没有线程化......现在测试修复

# python - 有什么方法可以删除 QGridLayout 中的 QWidget？

> ID：13184250
> 
> 赞同：2
> 
> 时间：2012-11-01T19:36:10.200
> 
> 标签：python, qt, pyqt

我想要的是完全删除一个小部件（清除它，删除它等......），但它在一个网格布局中，所以即使在调用时`removeWidget`，它仍然保留一个指针，所以 python 不想删除该对象。这是（剥离的）代码：

```
def addRow(self, row):
    self.entries.insert(row, QtGui.QLineEdit())
    self.gridlayout.addWidget(self.entries[row], row, 0)
...
def remRow(self, row):
    self.gridlayout.removeWidget(self.entries[row])
    del(self.entries[row])
...
(in another function)
foo.addRow(0)
foo.remRow(0) 
```

它从网格布局中删除了小部件，但并没有完全删除它，因此它实际上被打包在（？）布局下方，并且小部件显然比布局大（虽然不确定，因为我看不到结尾） .

再说一遍，有没有办法完全删除 QGridLayout 中的小部件？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:46:18.903

布局将小部件重新设置为容器的父级。因此，即使您从布局中删除它，容器小部件仍然是父小部件，因此不会删除该小部件。你应该打电话`.deleteLater()`告诉 Qt 摆脱那个小部件（有效地清除小部件的所有引用，以便 Python 可以清除它）：

```
def remRow(self, row):
    self.gridlayout.removeWidget(self.entries[row])
    self.entries[row].deleteLater()
    del self.entries[row] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:43:55.560

如果您想永久删除该小部件，只需将其删除即可。在 Python 中，您可能必须调用小部件的 deleteLater() 方法。Qt 应该处理剩下的事情，比如从布局中删除它等。

我不确定`del`你的问题是做什么的，但显然它没有做 C++ 删除。

# javascript - 如何确定当前从何处加载 javascript 文件？

> ID：13184252
> 
> 赞同：0
> 
> 时间：2012-11-01T19:36:17.220
> 
> 标签：javascript

假设我有一个 javascript 文件的引用：

```
<script type="text/javascript" src="http://blah.com/js/count.js"></script> 
```

与 count.js 的内容：

```
alert("This script is loading from:" + url); 
```

如何从 count.js 内部识别应该进入 url 变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:57:15.953

执行外部脚本时，其`SCRIPT`元素将是页面中的最后一个元素，即`document.scripts[document.scripts.length-1]`.

所以，如果`SCRIPT`元素是：

```
<script type="text/javascript" src="http://blah.com/js/count.js"></script> 
```

`count.js`文件内容是：

```
alert("This script is loading from:" + document.scripts[document.scripts.length-1].src); 
```

它会显示：

```
This script is loading from: http://blah.com/js/count.js 
```

请注意，HTML5为元素引入了一个[`async`属性](https://developer.mozilla.org/en-US/docs/HTML/Element/script#Attributes)`SCRIPT`，这可能使上述方法无用。在异步的情况下，获取关联`SCRIPT`元素的唯一方法是使用 Gecko (Firefox) [`document.currentScript`](https://developer.mozilla.org/en-US/docs/DOM/document.currentScript)，但这是非标准的，所有其他 Web 浏览器引擎都没有实现。即：Trident (MSIE)、WebKit (Chrome/Safari)、Presto (Opera)。

# sql - 在执行之前确保脚本中正确的 sql server 实例 db？

> ID：13184253
> 
> 赞同：0
> 
> 时间：2012-11-01T19:36:30.260
> 
> 标签：sql, sql-server

如何在我的 .sql 脚本中指定它仅针对我的 localhost sql server db 实例执行，而不是在另一个打开的连接上执行我的集成或测试环境？

dbsetupscript.sql

```
use myDB

--WHAT SAFE GAURD CAN i PUT HERE TO ENSURE THAT THIS SCRIPT CAN ONLY BE EXECUTED VIA MY   
-- LOCAL ENVIRONMENT BEFORE I START DELETING TABLES, ETC?

delete MotherTable
-- delete other tables and insert simulated production data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:37:51.617

您可以尝试使用**SQLCMD Mode**。您可以通过转到**查询菜单**，然后选择**SQLCMD 模式在****SSMS**中启用此功能。

 ****SQLCMD 模式允许您定义变量、连接到一台服务器运行一些代码、连接到第二台服务器运行一些代码等。您甚至可以运行 DOS/命令行命令。

您可以在此处找到更多语法信息：http: [//msdn.microsoft.com/en-us/library/ms174187.aspx](http://msdn.microsoft.com/en-us/library/ms174187.aspx)

这是一个让您入门的示例：

```
-- which server do you want to connect to?
:setvar MyServer ServerName\InstanceName

-- connect to that server
:connect $(MyServer)

-- run your query
select @@servername, @@version
go 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:16:59.940

```
if
(
Select CASE when HOST_NAME()='Bummi-Mobi' then 1 else 0 end + Case when DB_NAME()='test' then 1 else 0 end
)<>2
raiserror('Wrong Database', 20, -1) with log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:05:57.647

试试[@@ServerName](http://msdn.microsoft.com/en-us/library/ms187944.aspx)

代码应该是这样的

```
IF (@@ServerName =  'localhost') 
BEGIN
    delete MotherTable
    -- delete other tables and insert simulated production data 
END
ELSE 
    PRINT 'Wrong instance' 
```****

# c# - GridUnitType.Star？

> ID：13184254
> 
> 赞同：5
> 
> 时间：2012-11-01T19:36:32.773
> 
> 标签：c#, wpf

这种明星单位类型如何运作？我已阅读[msdn 定义](http://msdn.microsoft.com/en-us/library/system.windows.gridunittype.aspx)。但无法真正了解它如何定义对象的大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:41:08.453

`*`尺寸会自动按比例调整尺寸。因此，例如，如果您有一列宽度为`*`，另一列宽度为 ，`*`那么这两列将具有相同的宽度（如果它们是仅有的两列，则为网格宽度的 50%） .

相反，如果一列是另一列，`2*`那么`*`列的宽度比将为 2:1。换句话说，第一列是 66%，另一列是 33%

如果是`4*`and `6*`，那么第一列是 40%，第二列是 60%。你同样可以把它写成`2*`和`3*`因为重要的是比率，而不是绝对数字。

# objective-c - 如何在表格视图 IOS 内的滚动视图中创建文本字段

> ID：13184255
> 
> 赞同：0
> 
> 时间：2012-11-01T19:36:32.117
> 
> 标签：objective-c, ios, uitableview, uiscrollview

我需要在原型单元格内的滚动视图中创建多个文本字段

![在此处输入图像描述](../Images/9c97f3c9996fd1ee1323619b772cfc68.png)

Scrollview 和所有其他元素都有不同的标签

当用户单击添加另一个文件时，它应该在上面的滚动视图中生成两个带有标签的空文本字段。Scrollview 在原型单元格中。

有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:52:33.827

您可以在部分而不是单个单元格中呈现主题：

*   部分标题视图中的主题名称、时间和演示者
*   每个文件的一个单元格
*   “添加另一个文件”按钮可以放置在该部分的页脚视图中

# javascript - ExtJs 4 表单提交问题

> ID：13184256
> 
> 赞同：2
> 
> 时间：2012-11-01T19:36:34.213
> 
> 标签：javascript, extjs

我是 Extjs 和 java 脚本的新手。我有一个带有 3 个文本字段的简单表单。提交时我想进入下一页（结果页面）。当我单击提交按钮时，我看到警报 1，但没有收到警报 2 和 3。我确实看到在 firebug 中返回响应，但结果页面没有加载。我在这里做错了什么，如何加载下一页？任何帮助将不胜感激。

```
Ext.require([
    'Ext.form.*'
]);

Ext.onReady(function() {

    var formPanel = Ext.create('Ext.form.Panel', {
        frame: true,
        title: 'New Todo',
        width: 340,
        bodyPadding: 5,
    url: 'result.html',
    ajaxSubmit:false,
        fieldDefaults: {
        labelAlign: 'left',
        labelWidth: 90,
        anchor: '100%'
    },

    items: [{
        xtype: 'textfield',
        name: 'id22',
        fieldLabel: 'id22',
        value: ''
    },{
        xtype: 'textfield',
        name: 'Summary',
        fieldLabel: 'Summary',
        value: ''
    }, {
        xtype: 'textareafield',
        name: 'Description',
        fieldLabel: 'Description',
        value: ''
    }],

    // Reset and Submit buttons
buttons: [{
     text: 'Submit',
    formBind: true, //only enabled once the form is valid
    disabled: true,
    handler: function() {
        var form = this.up('form').getForm();
        alert("1");
        form.submit({
                    //clientValidation: true,
                    url: 'result.html',
                    success: function(form, action) {
                       alert("2");
                    },
                    failure: function(form, action) {
                         alert("3");
                    }
                });

    }

}],

});

formPanel.render('form-todo'); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:25:59.097

我不确定您从哪里获得“ajaxSubmit”配置选项，但根据文档，[**standardSubmit**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-standardSubmit)选项是您需要的选项。

# javascript - 当鼠标不在元素上时，使用什么事件而不是 onmouseout 来运行？

> ID：13184258
> 
> 赞同：1
> 
> 时间：2012-11-01T19:36:49.217
> 
> 标签：javascript, onmouseover, onmouseout

我想在不悬停元素时运行脚本。这是某种取消激活之前在“onmouseover”事件中运行的其他东西。所以我使用 onmouseout 事件来运行这个脚本，但是，**问题是**如果我不悬停元素然后离开它，脚本就不会运行。如果将元素悬停得太快或窗口失去焦点，就会发生这种情况。我该如何解决？

**编辑：**让我以另一种方式说明这一点，我需要的是在鼠标未触摸元素时运行的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:54:45.917

你可以试试这个

```
<div id="div1" onmouseover="fucntionIn()" onmouseout="functionOut()">"Special Area"</div>
<div id="div2" onmouseover="fucntionOut()">Other area</div> 
```

逻辑是为页面其他区域的onmouseover事件编写停用代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:49:11.570

如果你`onmouseover`在整个页面上检测（通过事件冒泡），当它进入一个新元素时，你最后观察到的原始元素是否是当前目标元素的父元素，如果不是，那么你知道它退出了原始元素DOM 节点，即使`onmouseout`没有触发。

# c# - 本地化 MySQLExceptions

> ID：13184259
> 
> 赞同：0
> 
> 时间：2012-11-01T19:36:50.463
> 
> 标签：c#, mysql, exception-handling, localization

我正在开发的程序，我的老板希望我本地化用户可能看到的所有内容。这包括`MessageBox`'。因此，我的弹出窗口之一`MySQLException`可能是从“未选择数据库”到“表不存在”的任何内容。

我的问题是，如果它是一个不存在的表，我不想要一个通用的消息。我想让它说哪个表不存在。目前，这是`MySQL error 1146: Table '%s.%s' doesn't exist`. 我的问题是，如何本地化该语句？感谢您的任何帮助。代码将类似于：

```
switch (ex.Number)
{
    case 1146:
        MessageBox.Show(ex.Message); // Currently shows "Table Database.Table doesn't exist
        break;
} 
```

但是该消息将被本地化为用户的语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-22T13:00:57.870

你可以在服务器端和客户端都这样做......

[**客户端**](https://dev.mysql.com/doc/refman/8.0/en/error-message-language.html)

```
SET lc_messages='en_US'; 
```

[**服务器端**](https://stackoverflow.com/questions/25835147/change-mysql-error-message-language)

在你的 my.cnf 中找到这一行

```
lc-messages=<...> 
```

并设置它来满足你的愿望......

# python - 我想在 python 中创建一个模拟对象

> ID：13184260
> 
> 赞同：3
> 
> 时间：2012-11-01T19:36:50.313
> 
> 标签：python, object, setattr

我想要一个虚拟对象，我可以在 python 中实例化并通过 setattr() 以编程方式创建属性。

我在内置对象上尝试了它，但可能有一个很好的理由，它不起作用。

我可以在 python 中使用什么基础对象来实现这样的目的，而无需自己实际定义一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T19:38:23.757

您不能使用`mock = object()`，而只是创建一个 Mock 派生自`object`

```
class Mock(object):
    pass

mock = Mock()

setattr(mock, 'test', 'whatever') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:36:34.467

如果您使用模拟库（例如[mock](http://pypi.python.org/pypi/mock)），那么您可以断言对象上调用了什么。你可能想也可能不想这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T14:20:46.900

对 Jon Clement 技术的改进，以防您希望模拟对象在创建时获得一些属性：

```
class Mock(object):
    def __init__(self, **kwArgs):  # constructor turns keyword args into attributes
       self.__dict__.update(kwArgs)

# now you can do things like this:
options = Mock(verbose=True, debug=False) 
```

# java - 登录和注销会话android

> ID：13184261
> 
> 赞同：1
> 
> 时间：2012-11-01T19:37:03.723
> 
> 标签：java, android, session, login, logout

我第一次开发一个安卓应用程序，我想为**登录和注销创建会话。**我看到大多数人建议使用**SharedPreferences**。但是如何检查用户是否已注销？如果用户没有点击我的应用程序，那么登录页面将不会显示！用户可以立即进入主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:49:56.323

当用户登录成功调用 setLogin 函数并将布尔值设置为 true 并且当用户返回时检查用户 isLogin() 是否返回 true 然后将用户重定向到带有 Intent 的主页。

```
public boolean isLogin() {

        return pref.getBoolean("login", false);

    }

    public void setLogin(Boolean x) {
        SharedPreferences.Editor editor = pref.edit();
        editor.putBoolean("login", x);
        editor.commit();
    } 
```

# jira - 如何查询 jira greenhopper 即将到来的 sprint 中的所有问题？

> ID：13184264
> 
> 赞同：1
> 
> 时间：2012-11-01T19:37:22.803
> 
> 标签：jira, scrum, jira-agile

我们正在将故事转变为冲刺。我们还没有开始 sprint，所以我无法在 openSprints() 中通过 sprint 进行查询。如何查询计划板中将成为 sprint 的容器？示例：如果您[查看 Jira 文档](https://confluence.atlassian.com/display/GH/Using+a+Board) ，您将看到计划模式下的图像。我想查询“即将到来的 Sprint 2”下的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:53:23.843

即将到来的 sprint 不拥有其中包含的问题（它们实际上只是积压中的标记），因此无法使用 JQL 来查询它们。我们正在考虑将其更改为存储桶，当我们这样做时，sprint 字段将针对问题进行更新，以便您可以查询它们。

谢谢，肖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:52:56.140

您可以使用“版本”将问题与即将到来的 Sprint 相关联并基于此进行过滤。

# math - 如何在 0 和一个不确定的大数之间非线性地映射数字，使其介于 0 和 1 之间

> ID：13184265
> 
> 赞同：5
> 
> 时间：2012-11-01T19:37:23.613
> 
> 标签：math

我想将 0 和 m 之间的数字映射到 0 和 1 之间，但 m 是不确定的并且大约是大数字。我如何将这些数字非线性地映射到 0 和一个不确定的大数之间以介于 0 和 1 之间。我使用了 arctan 函数，但它不是很好和统一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:49:25.043

好吧，如果您想要一个非线性函数将任意正实数域映射到实数 [0,1] 的余域，那么理论上您可以使用：

```
f(x) = x / (x + 1) 
```

该函数在所有点 [0,infinity) 处都是连续的。

但是，您必须意识到浮点数的位数是有限的。在某些时候，根据实现会发生冲突。

# python - Python - 返回字符串时如何保留尾随空格？

> ID：13184273
> 
> 赞同：0
> 
> 时间：2012-11-01T19:38:05.720
> 
> 标签：python, string, return, space

有没有办法在返回字符串时在字符串后面保留一个尾随空格？

例如，我的值为“6”。如果我将它从一个类返回到我的主代码中，它会从末尾剥离空间。

如果您真的需要知道原因：该课程会查看一个数字，然后添加科学缩写，因此如果将 .005 转换为“5 m”然后稍后添加的单位使其变为“5 mV”，则效果很好，但如果我只有 5 个，它试图返回“5”，但只返回“5”，使它看起来像“5V”，这是不一致的。

编辑：对不起大家，但这实际上是我的一个非常愚蠢的错误。我在调用类 () 的命令上放置了 .strip()。*我在*类中调用 python 调试器并观察它返回所有内容，但是以某种方式使用调试器从未真正显示调用类的代码行。当我看到它时，它真的很明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:40:15.423

你不应该做任何事情。此代码打印“6 m”，例如：

```
def foo():
    return "6 "

print foo() + "m" 
```

输出

```
6米

```

# python - 如何检索 SQLAlchemy 结果集的 python 列表？

> ID：13184275
> 
> 赞同：31
> 
> 时间：2012-11-01T19:38:10.603
> 
> 标签：python, sqlalchemy

我有以下查询来检索单列数据：

```
routes_query = select(
    [schema.stop_times.c.route_number],
    schema.stop_times.c.stop_id == stop_id
).distinct(schema.stop_times.c.route_number)
result = conn.execute(routes_query)

return [r['route_number'] for r in result] 
```

我想知道是否有一种更简洁的方法来检索返回的数据行的本机列表。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-06T22:23:28.123

将 1 元素元组列表提取到列表中的最简洁方法是：

```
result = [r[0] for r in result] 
```

或者：

```
result = [r for r, in result] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-23T13:08:18.327

这就是我会使用的：

```
return zip(*result)[0] 
```

更简洁的是 zzzeek 的答案中的列表理解方法（22 个字符而不是 29 或 31 个字符），并且对于更大的结果集，[此答案](https://stackoverflow.com/a/12721902/641332)中类似问题的时间表明它也更快。

# asp.net - 发送 info from custom server asp element

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-11-01T19:38:11.49363 次This question shows research effort; it is useful and clear2This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I want send to output CSS info in style blocks

```
 protected override void RenderContents(HtmlTextWriter output)
 {
 ...
 output.Write("<style> .... ");
 } 
```

But this block cant be nested in div block .I must place it in head.How can I do it or is there another approach?

[asp.net](/tags/asp.net "show questions tagged 'asp.net'")[custom-server-controls](/tags/custom-server-controls "show questions tagged 'custom-server-controls'")4

## 2 回答 2

This answer is useful3

该[`this.Page.Header.Stylesheet.CreateStyleRule`](http://msdn.microsoft.com/en-us/library/system.web.ui.istylesheet.createstylerule.aspx)方法允许您将样式添加到`<head>`. 但是，您可以指定的 CSS 属性仅限于[`Style`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.style.aspx)类支持的属性。`Style`（如果您需要其他属性，可以从中派生自己的类。）

C# 示例：

```
protected override void OnPreRender(EventArgs e) { base.OnPreRender(e); // Create a Style object for the body of the page. Style bodyStyle = new Style(); bodyStyle.ForeColor = System.Drawing.Color.Blue; bodyStyle.BackColor = System.Drawing.Color.LightGray; // Add the style rule named bodyStyle to the header // of the current page. The rule is for the body HTML element. this.Page.Header.StyleSheet.CreateStyleRule(bodyStyle, null, "body"); } 
```

于 2012-11-01T19:48:50.863 回答This answer is useful2

直接派生`System.Web.UI.Control`并覆盖该`Render`方法，而不是从（我假设是）派生`System.Web.IO.WebControls.WebControl`。

于 2012-11-01T19:43:53.130 回答

#### Related

[2](/questions/11643483 "Question score (upvotes - downvotes)")[openshift - 如何调试 Openshift 中的 503 错误？](/questions/11643483)[1](/questions/11643487 "Question score (upvotes - downvotes)")[c# - 如何查询相机分辨率并将它们添加到列表中](/questions/11643487)[6](/questions/11643489 "Question score (upvotes - downvotes)")[mysql - 在数据库的 updatedBy 字段中包含用户 ID 或用户名是否更好](/questions/11643489)[3](/questions/11643490 "Question score (upvotes - downvotes)")[c# - C#如何从控制台应用程序调用MVC Action方法](/questions/11643490)[3](/questions/11643495 "Question score (upvotes - downvotes)")[android - 使 ListView 与其他项目一起滚动](/questions/11643495)[2](/questions/11643498 "Question score (upvotes - downvotes)")[android - Android -- 从 JNI 获取 MEID](/questions/11643498)[2](/questions/11643500 "Question score (upvotes - downvotes)")[c++ - 如何读取 UCS-2 文件？](/questions/11643500)[1](/questions/11643504 "Question score (upvotes - downvotes)")[c# - .NET 应用程序中带有 Web 浏览器控件的拼写检查器](/questions/11643504)[0](/questions/11643505 "Question score (upvotes - downvotes)")[c - C - 未定义的行为或正确的输出](/questions/11643505)[2](/questions/11643509 "Question score (upvotes - downvotes)")[ruby - 无法在 RVM 中设置 Ruby 版本？](/questions/11643509)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：13184276
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# python - 使用自定义名称创建 Python 动态函数

> ID：13184281
> 
> 赞同：57
> 
> 时间：2012-11-01T19:38:25.970
> 
> 标签：python, python-2.7, closures, metaprogramming, dynamic-function

如果已经提出并回答了这个问题，我们深表歉意。我需要做的在概念上非常简单，但不幸的是我一直无法在网上找到答案。

我需要在运行时使用自定义名称在 Python (Python2.7) 中创建动态函数。每个函数的主体也需要在运行时构建，但所有函数（几乎）都是相同的。

我从一个名字列表开始。

```
func_names = ["func1", "func2", "func3"] 
```

请注意，func_name 列表可以包含任意名称的列表，因此名称不会简单地为 func1、func2、func3、...。

我希望结果是：

```
 def func1(*args):
        ...

    def func2(*args):
        ...

    def func3(*args):
        ... 
```

我需要这样做的原因是每个函数名称都对应一个测试用例，然后从外部调用该测试用例。

**更新**：没有用户输入。我正在捆绑一个更大模块的两端。一端确定测试用例是什么，除此之外，填充测试用例名称的列表。另一端是函数本身，它必须与测试用例名称进行 1:1 映射。所以我有了测试用例的名称，我知道我想对每个测试用例做什么，我只需要创建具有测试用例名称的函数。由于测试用例的名称是在运行时确定的，因此基于这些测试用例的函数创建也必须在运行时进行。

**更新**：如果这会使事情变得更容易，我也可以将这个自定义命名函数包装在一个类中。

我可以将函数的内容（因为它们几乎相同）硬编码在一个字符串中，或​​者我可以将它基于先前定义的基类。只需要知道如何使用此内容填充函数。

例如：

```
 func_content = """
                   for arg in args:
                       print arg
                   """ 
```

提前致谢，

马赫迪

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-01T19:56:33.277

对于您所描述的，我认为您不需要深入到 eval 或宏中-通过闭包创建函数实例应该可以正常工作。例子：

```
def bindFunction1(name):
    def func1(*args):
        for arg in args:
            print arg
        return 42 # ...
    func1.__name__ = name
    return func1

def bindFunction2(name):
    def func2(*args):
        for arg in args:
            print arg
        return 2142 # ...
    func2.__name__ = name
    return func2 
```

但是，您可能希望将这些函数按名称添加到某个范围，以便您可以按名称访问它们。

```
>>> print bindFunction1('neat')
<function neat at 0x00000000629099E8>
>>> print bindFunction2('keen')
<function keen at 0x0000000072C93DD8> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-30T20:21:29.583

扩展Shane的答案，因为我在寻找类似问题的解决方案时才发现这个问题。注意变量的范围。您可以通过使用生成器函数来定义范围来避免范围问题。这是一个在类上定义方法的示例：

```
class A(object):
    pass

def make_method(name):
    def _method(self):
        print("method {0} in {1}".format(name, self))
    return _method

for name in ('one', 'two', 'three'):
    _method = make_method(name)
    setattr(A, name, _method) 
```

正在使用：

```
In [4]: o = A()

In [5]: o.one()
method one in <__main__.A object at 0x1c0ac90>

In [6]: o1 = A()

In [7]: o1.one()
method one in <__main__.A object at 0x1c0ad10>

In [8]: o.two()
method two in <__main__.A object at 0x1c0ac90>

In [9]: o1.two()
method two in <__main__.A object at 0x1c0ad10> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-01T20:18:14.403

做这种事情可能有一种内省，但我认为这不是解决问题的pythonic方法。

我认为您应该利用 python 中函数的性质作为第一级公民。正如 Shane Holloway 指出的那样，使用闭包来自定义函数内容。然后对于动态名称绑定，使用一个字典，其键是动态定义的名称，值将是函数本身。

```
def function_builder(args):
    def function(more_args):
       #do stuff based on the values of args
    return function

my_dynamic_functions = {}
my_dynamic_functions[dynamic_name] = function_builder(some_dynamic_args)

#then use it somewhere else
my_dynamic_functions[dynamic_name](the_args) 
```

希望它对您的用例有意义。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T19:42:27.873

您可能想使用[eval](http://docs.python.org/2/library/functions.html#eval)；您将构建包含每个函数的 Python 定义的字符串（即，以 .... 开头的多行字符串`def func1`），然后您将完成`eval`它。

但是我会为每个这样的函数生成一个唯一的名称（例如`genfun345`）。不要对此类名称使用一些未经检查的用户输入。因为如果名称与 Python 中的某个已知名称相同，您将陷入难以调试的灾难。

你相信这些函数的输入吗？您是否关心恶意软件或滥用行为？

在维基百科上阅读[卫生宏](http://en.wikipedia.org/wiki/Hygienic_macro)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-11T16:03:16.840

要真正动态地创建函数，您可以使用[makefun](https://smarie.github.io/python-makefun/)，我专门为此开发了它。它支持三种方式来定义要生成的签名：

*   字符串表示，例如`'foo(a, b=1)'`
*   一个`Signature`对象，无论是手工制作的还是通过`inspect.signature`在另一个函数上使用而派生的
*   一个参考函数。在这种情况下，公开的签名将与此函数的签名相同。

此外，您可以告诉它将创建的函数的引用作为实现中的第一个参数注入，以便根据调用的来源（哪个门面）进行细微的行为修改。例如：

```
# generic core implementation
def generic_impl(f, *args, **kwargs):
    print("This is generic impl called by %s" % f.__name__)
    # here you could use f.__name__ in a if statement to determine what to do
    if f.__name__ == "func1":
        print("called from func1 !")
    return args, kwargs

my_module = getmodule(generic_impl)

# generate 3 facade functions with various signatures
for f_name, f_params in [("func1", "b, *, a"),
                         ("func2", "*args, **kwargs"),
                         ("func3", "c, *, a, d=None")]:
    # the signature to generate
    f_sig = "%s(%s)" % (f_name, f_params)

    # create the function dynamically
    f = create_function(f_sig, generic_impl, inject_as_first_arg=True)

    # assign the symbol somewhere (local context, module...)
    setattr(my_module, f_name, f)

# grab each function and use it
func1 = getattr(my_module, 'func1')
assert func1(25, a=12) == ((), dict(b=25, a=12))

func2 = getattr(my_module, 'func2')
assert func2(25, a=12) == ((25,), dict(a=12))

func3 = getattr(my_module, 'func3')
assert func3(25, a=12) == ((), dict(c=25, a=12, d=None)) 
```

正如您在[文档](https://smarie.github.io/python-makefun/)中看到的那样，参数总是被重定向到`kwargs`除非绝对不可能（var-positional 签名，例如 in `func2`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T21:59:24.823

如果我正确理解您的要求，听起来您只是想动态地为现有函数分配新的或替代名称——在这种情况下，应该按照以下几行来完成这项工作：

```
import sys

testcases = []
def testcase(f):
    """ testcase function decorator """
    testcases.append(f)
    return f

@testcase
def testcase0(*args):
    print 'testcase0 called, args:', args

@testcase
def testcase1(*args):
    print 'testcase1 called, args:', args

@testcase
def testcase2(*args):
    print 'testcase2 called, args:', args

def assign_function_names(func_names, namespace=None):
    if namespace is None:
        namespace = sys._getframe(1).f_globals  # default to caller's globals
    for name, func in zip(func_names, testcases):
        func.__name__ = name  # optional
        namespace[name] = func

assign_function_names(["funcA", "funcB", "funcC"])

funcA(1, 2, 3)
funcB(4, 5)
funcC(42) 
```

# android-preferences - 类似于 Radio 的 CheckBoxPreference 组

> ID：13184287
> 
> 赞同：0
> 
> 时间：2012-11-01T19:39:18.417
> 
> 标签：android-preferences

我想在同一个屏幕上有多个 CheckBoxPreferences，就像一个收音机列表。我看到了它的一些实现，但最终我自己写了一些东西。也许它会帮助某人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:39:18.417

1）建立一个组类，如：

```
public class CheckBoxPreferenceGroup {

    private List<CheckBoxPreference> mGroup; 

    public CheckBoxPreferenceGroup(PreferenceManager manager, String[] keys) {

        mGroup = new ArrayList<CheckBoxPreference>(keys.length);

        for (int i = 0; i < keys.length; i++) {
            final CheckBoxPreference cbx = (CheckBoxPreference) manager.findPreference(keys[i]);

            cbx.setOnPreferenceClickListener(new OnPreferenceClickListener() {
                public boolean onPreferenceClick(Preference preference) {
                    onCheckBoxClick(cbx);
                    return true;
                }
            });

            mGroup.add(cbx);
        }
    }

    private void onCheckBoxClick(CheckBoxPreference newChecked) {

        CheckBoxPreference oldChecked = null;

        for (CheckBoxPreference item : mGroup) {
            if (item != newChecked && item.isChecked()) {
                oldChecked = item;
                break;
            }
        }

        if (oldChecked != null)
            oldChecked.setChecked(false);
    }
} 
```

2) 为它提供一个字符串数组（String[] 键），以便它搜索首选项。

3）像这样使用它：

```
public static class ScreenSettingsPreferenceFragment extends PreferenceFragment {

    private static CheckBoxPreferenceGroup mAlertGroup;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences_screen_notifications);
        PreferenceManager.setDefaultValues(getActivity().getApplicationContext(), R.xml.preferences, false);

        PreferenceManager pm = getPreferenceManager();

        mAlertGroup = new CheckBoxPreferenceGroup(pm, getResources().getStringArray(R.array.pref_checkboxes));
    }
} 
```

pref_checkboxes是我的复选框键的字符串数组**：**

```
<string-array name="pref_checkboxes">
    <item>pref_cbx1</item>
    <item>pref_cbx2</item>
    <item>pref_cbx3</item>
    <item>pref_cbx4</item>
</string-array> 
```

# php - PHP 权限问题，甚至 chmod 都不起作用

> ID：13184289
> 
> 赞同：-1
> 
> 时间：2012-11-01T19:39:20.523
> 
> 标签：php, permissions, chmod

我在这里遇到了一个小问题，我正在尝试上传图片，但收到`Permission Denied`错误消息。

所以我添加了一个`chmod 0777`到目标目录，但我也不能使用 chmod，它`Permission Denied`也给了我

有什么我能做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:38:23.190

The *chmod* command allows you to control who is allowed to have access to your files and directories which means that in case you are not the owner of a certain file/directory or in case you are not having sufficient permissions to change permissions for a file/directory then you are going to get `Permission Denied` error or something similar.

To avoid you can run *chmod* as `sudo chmod 775 directoryName;`

# haskell - 任何函数都可以简化为无点形式吗？

> ID：13184294
> 
> 赞同：10
> 
> 时间：2012-11-01T19:39:39.153
> 
> 标签：haskell, lambda-calculus, pointfree

许多函数可以简化为无点形式——但这对所有函数都适用吗？

例如，我看不出它是如何做到的：

```
apply2 f x = f x x 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T20:04:14.063

逻辑组合器（即 S、K、I 组合器）本质上是无点形式的函数，而 lambda 演算相当于组合逻辑，所以我认为这表明答案是肯定的。

~~您的功能的组合器`apply2`是（如果我正确阅读内容）：~~

```
((S((S(KS))K))(K((S((SK)K))((SK)K)))) 
```

也被称为“云雀”，来自[Raymond Smullyan 的 Combinatory Birds](http://www.angelfire.com/tx4/cus/combinator/birds.html)页面。

（*编辑*：）原来上面的¹等价于`\f x -> f (x x)`. 根据下面“@gereeter”的评论，它确实被称为“云雀”，而`\f x -> f x x`问题中要求的功能是上述书中的“莺”（又名[“ **W”**组合](https://stackoverflow.com/a/11050971/849891)器）`W f x = S(S(K(S(KS)K))S)(KK)SI f x = S(S(KB)S)(KK)SI f x = CSI f x = SfIx = f x x`。

* * *

¹这里：

```
((S((S(KS))K))(K((S((SK)K))((SK)K)))) f x =
  S( S(KS) K) (K( S( SK K) ( SK K)))  f x =   -- SKK    == I
  S (S(KS) K) (K( S  I       I    ))  f x =   -- S(KS)K == B
  S B         (K( S  I       I    ))  f x =
  Bf (K(SII)f) x = Bf (SII) x = f (SII x) = f (x x) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-02T17:08:40.300

## SK基础

如前所述，使用适当的固定组合子集，任何 lambda 项都可以转换为仅使用那些组合子和函数应用程序的形式 - 没有 lambda 抽象（因此没有变量）。最著名的组合子集是`S`和`K`。Se[组合逻辑/SK 基础的完整性，](https://en.wikipedia.org/wiki/Combinatory_logic#Completeness_of_the_S-K_basis)用于描述程序。组合子定义为

```
K x y    = x
S x y z  = (x z) (y z) 
```

有时包含身份组合`I`器，但它是多余的，因为`I = S K K`.

## 单个组合子基

有趣的是，即使使用单个组合器，您也可以做到这一点。[Iota](https://en.wikipedia.org/wiki/Iota_and_Jot)语言使用

```
U f = (f S) K 
```

并且可以证明

```
I = (UU)
K = (U(U(UU)))
S = (U(U(U(UU)))) 
```

因此，我们可以将任何 lambda 项转换为除了形状之外没有其他信息的二叉树（所有叶子都包含`U`和，节点表示函数应用程序）。

## 更有效的基础 S、K、I、B、C

但是，如果我们想提高效率并获得合理大小的转换，则使用`I`and 引入另外两个冗余组合子会很有帮助，它们称为`B`and `C`：

```
C f x y  = f y x
B f g x  = f (g x) 
```

这里`C`颠倒了参数的顺序`f`并且`B`是函数组合。

这个添加显着减少了输出的长度。

## Haskell 中的这些组合器

实际上，Haskell 已经以某种形式包含了所有这些标准组合子。尤其：

```
I = id
K = const
  = pure :: a -> (r -> a)
S = (<*>) :: (r -> a -> b) -> (r -> a) -> (r -> b)
B = (.)
  = (<$>) :: (a -> b) -> (r -> a) -> (r -> b)
C = flip
  = \k x -> k <*> pure x 
```

其中`pure`和是来自函子类型类的函数`<*>`，我们在这里专门为读者 monad 提供。`<$>``Applicative``(->) r`

所以在你的情况下，我们可以写

```
apply2 = (<*>) `flip` id 
```

## 为什么是读者单子？

在抽象消除的过程中，我们尝试将形式的项`λx -> M :: r -> a`（其中`r`是 的类型`x`和`a`的类型`M`）转换为没有 的形式`x`。我们通过递归处理来做到这一点，`M`然后我们将其每个类型的子项`b`（可能包含`x`）转换为类型的函数`r -> b`（不包含`x`），然后将这些子项组合在一起。这正是 reader monad 的设计目的：将类型的函数组合`r -> something`在一起。

有关更多详细信息，请参阅[Monad Reader，第 17 期](https://themonadreader.wordpress.com/2011/01/09/issue-17/)：*Reader Monad 和抽象消除*。

## 数据结构呢？

对于构造数据结构，我们只需使用它们的构造函数，这里没有问题。

为了解构它们，我们需要一些方法来摆脱模式匹配。这是编译器在编译函数式程序时必须做的事情。[函数式编程语言的实现](https://research.microsoft.com/en-us/um/people/simonpj/papers/slpj-book-1987/index.htm)第 5 章：模式匹配的高效编译中描述了这样的过程。这个想法是，对于每种数据类型，我们都有一个*案例*函数来描述如何解构（折叠）数据类型。例如，对于列表 it `foldr`，对于`Either`its `either`，假设对于 4-tuples 它是

```
caseTuple4 :: (a -> b -> c -> d -> r) -> (a,b,c,d) -> r
caseTuple4 f (a,b,c,d) = f a b c d 
```

等等。因此，对于每种数据类型，我们添加它的构造函数、解构*case*函数，并将模式编译到这个函数中。

举个例子，让我们表达

```
map :: (a -> b) -> [a] -> [b]
map f []        = []   
map f (x : xs)  = f x : map f xs 
```

这可以表示为`foldr`：

```
map f = foldr (\x xs -> f x : xs) [] 
```

然后使用我们之前讨论过的组合器进行转换：

```
map = (foldr . ((.) (:))) `flip` [] 
```

你可以验证它确实做了我们想要的。

另请参阅[System F 数据结构，它描述了如果我们启用](https://en.wikipedia.org/wiki/System_F#System_F_Structures)[更高级别的类型](http://www.haskell.org/ghc/docs/7.2.2/html/users_guide/other-type-extensions.html#universal-quantification)，数据结构如何直接编码为函数。

## 结论

**是**的，我们可以构造一组固定的组合器，然后将任何函数转换为仅使用这些组合器和函数应用程序的无点样式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T19:45:20.980

有很多函数看起来可能不是，但可以以无点风格表达，但要获得一个不是的，您可以快速定义一个适用于没有任何标准的非常大的元组的函数职能。

我认为这种事情不太可能是无点表达的，不是因为复杂，而是因为这种大小的元组的函数并不多：

```
weird (a,b,c,d,e,f,g,h,i,j) = (a<*>b,c++d,e^f+a,g ()-h 4+e,j <*> take f i) 
```

你的例子：

```
apply2 :: (b -> b -> a) -> (b -> a)
apply2 = join 
```

它`join`在读者单子中`((->) b)`

```
join :: Monad m => m (m a) -> m a 
```

所以在这种情况下

```
join :: ((->) b) ((->) b a) -> ((->) b) a
join :: ((->) b) (b -> a) -> (b -> a)
join :: (b -> (b -> a)) -> (b -> a)
join :: (b -> b -> a) -> (b -> a) 
```

无点版本的功能比我们预期的要多得多，但一些无点表达式完全是一团糟。*有时*，明确比简洁​​更好。

# html - 启动一个新站点：哪个是最完整和最可靠的 CSS 覆盖？

> ID：13184298
> 
> 赞同：0
> 
> 时间：2012-11-01T19:39:59.010
> 
> 标签：html, css, cross-browser, css-reset

不同的浏览器以古怪的方式运行，有时我们会利用 hack 让 CSS 在所有浏览器中看起来都符合我们的要求。但是，这是在您已经开始将 HTML 和 CSS 放在一起之后要做的事情。

但我发现，要确保您在所有浏览器中应用或多或少相同的标准，最简单的方法是重置它们的本地 CSS 文件。

因此，当开始一个新的 HTML5 和 CSS3 项目时——那里的重置涵盖了所有基础？

例如，这是我喜欢做的两件事：

```
* {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  vertical-align: baseline;
} 
```

对于 HTML5：

```
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
  display: block;
} 
```

这是我在 WordPress 网站上看到的内容：

```
/* Webkit browsers add a 2px margin outside the chrome of form elements */
button,
input,
select,
textarea {
  margin: 0;
} 
```

我知道有现成的 CSS 脚本结合了这些东西，但哪个是最可靠、最完整、跨浏览器友好、最新和维护的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:57:52.217

[规范化](http://necolas.github.com/normalize.css/)是任何新网站的众所周知的基础，它不是重置所有 CSS 值，而是使它们明显一致。

此外，[Modernizr](http://modernizr.com/)是一个出色的 JS 库，它可以为 IE6-8 等旧浏览器（以及许多其他东西）提供 HTML5 示意图功能。

正如评论中提到的，[HTML5 Boilerplate](http://html5boilerplate.com/)是最好的起点（它有两个 CSS 文件，main.css 和 normalize.css）。

# java - Vaadin：表容器有对象成员

> ID：13184301
> 
> 赞同：1
> 
> 时间：2012-11-01T19:40:01.660
> 
> 标签：java, vaadin

我正在扩展`BeanItemContainer`并使用它作为 Vaadin 中表格的容器。

```
public class MyContainer extends BeanItemContainer<MyClass>
        implements Serializable {
...
} 
```

该`MyClass`对象具有如下所示的结构：

```
public class MyClass {
    private int id;
    private InnerClass data;
...
} 
```

InnerClass 具有以下结构：

```
public class InnerClass {
    private int propA;
    private String propB;
...
} 
```

我想显示 id 和 data.propA 列，但我不确定如何在 Vaadin 中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:54:08.920

解决方案是使用该`addNestedContainerProperty`属性。

有关详细信息，请参阅[https://vaadin.com/book/-/page/datamodel.container.html](https://vaadin.com/book/-/page/datamodel.container.html)。

# bash - Bash 脚本：Gzip 整个文件夹并保持文件扩展名相同

> ID：13184303
> 
> 赞同：2
> 
> 时间：2012-11-01T19:40:08.477
> 
> 标签：bash, gzip

我想递归地压缩文件夹中的每个文件，并在压缩后保留原始名称和扩展名。

我已经尝试过 sudo`gzip -9 -r folder`但是现在每个文件都有一个添加到原始文件的 .gz 扩展名，例如`2852b65c1d8b.css.gz`我想保留`2852b65c1d8b.css`gzip 压缩文件的名称以上传到 Amazon S3。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T20:04:22.077

使用它可以满足您的要求：

```
find folder -type f -exec gzip -9 {} \; -exec mv {}.gz {} \; 
```

第一个执行 gzip 文件，第二个重命名它们。

# codeigniter - Codeigniter flashdata 在 Internet Explorer 和 google chrome 中不起作用

> ID：13184304
> 
> 赞同：1
> 
> 时间：2012-11-01T19:40:08.853
> 
> 标签：codeigniter, session, codeigniter-2

Codeigniter flashdata 在 Internet Explorer 和 chrome 中不起作用，但在 firefox 上起作用。可能是什么问题？

在我的控制器中：-

```
$this->session->set_flashdata('login_error','Your username or password is incorrect.');
redirect(base_url().'admin/login'); 
```

在我看来

```
echo  '<span>'.$this->session->flashdata('login_error').'</span>'; 
```

在 Chrome 中，即我得到空白跨度，而在 Firefox 中它正在显示闪存数据。

堆栈上有类似的问题，但我找不到任何有效的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:30:57.040

我解决了我的问题。ie 和 chrome cookie 管理存在一些问题。

我将`'sess_cookie_name'`配置从更改`'ci_session'` 为`'cisession'`

`sess_expiration`从`7200`到到，`84200`它得到了修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T12:56:39.307

我能够通过设置来解决问题：

```
$config['sess_use_database']= FALSE;
$config['sess_cookie_name']= 'cisession';
$config['sess_expiration'] = 84200; 
```

# c# - WPF 滑块样式

> ID：13184308
> 
> 赞同：1
> 
> 时间：2012-11-01T19:40:36.213
> 
> 标签：c#, wpf, visual-studio, slider

我对 WPF 有点陌生，我正在尝试为我的滑块添加一种样式，但是有太多的选项让我感到困惑。

有人可以制作，或者让我开始如何使滑块看起来像这样： ![滑块](../Images/558e88da30b368a4d9e3097662ce1927.png) 绿色=通过，其余轨道灰色

而且我正在尝试在播放歌曲时使用它来显示，所以灰色=剩余，当您拖动它时，最简单的实现方法是跳到歌曲的那部分。

我正在使用 NAudio，当歌曲正在播放时，我让轨迹栏滑动（按剩余时间）：

```
private void dispatcherTimer_Tick(object sender, EventArgs e) {
   LabelCurrentTime.Content = _musicManager.getPlayTime();
   double totalseconds = _musicManager.totalSeconds();
   double currentseconds = _musicManager.currentSeconds();
   if (totalseconds > 0 && currentseconds > 0)
      Trackbar.Value = ((((Trackbar.Width / totalseconds) * currentseconds)) / totalseconds) * 10;
} 
```

在 xaml 中：

```
<Slider x:Name="Trackbar" Height="25" Canvas.Left="50" Canvas.Top="10" Width="408" Maximum="10"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:28:39.063

干得好：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Border_MouseDown(object sender, MouseButtonEventArgs e)
    {
        var mainborder = sender as Border;
        double x = e.GetPosition(mainborder).X;
        double val = 1 - (mainborder.ActualWidth - x) / mainborder.ActualWidth;
        slider.Value = val * (slider.Maximum - slider.Minimum) + slider.Minimum;
    }
}

public class SliderValueConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        double val = (double)values[0];
        double min = (double)values[1];
        double max = (double)values[2];
        double sliderWidth = (double)values[3];
        return sliderWidth * (val - min) / (max - min);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

<Window x:Class="WpfTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfTest"
    Title="MainWindow" Height="650" Width="825">
<Window.Resources>
    <local:SliderValueConverter x:Key="sliderValueConverter"/>
</Window.Resources>
<StackPanel>
    <Slider Maximum="200" Minimum="100" Name="slider">
        <Slider.Template>
            <ControlTemplate TargetType="{x:Type Slider}">
                <Border Background="Silver" Height="30" MouseDown="Border_MouseDown">
                    <Border Background="Green" HorizontalAlignment="Left">
                        <Border.Width>
                            <MultiBinding Converter="{StaticResource sliderValueConverter}">
                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Value"/>
                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Minimum"/>
                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Maximum"/>
                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="ActualWidth"/>
                            </MultiBinding>
                        </Border.Width>
                    </Border>
                </Border>
            </ControlTemplate>
        </Slider.Template>
    </Slider>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:29:53.750

这不是一个完整的解决方案，但可以帮助您入门。

WPF 中的所有控件都有一个 ControlTemplate，用于定义它们的外观和行为方式。\

Slider 控件的 ControlTemplate 出奇的复杂（起初），网上有很多例子。

看看[MSDN 示例](http://msdn.microsoft.com/en-us/library/ms753256%28v=vs.100%29.aspx)。

# wpf - App 类与 MainWindow 类关系

> ID：13184311
> 
> 赞同：0
> 
> 时间：2012-11-01T19:40:44.127
> 
> 标签：wpf

在 WPF 项目中，MainWindow 类与 App 类有什么样的关系？我问的原因是因为在基于 MVVM 设计的项目中，我确实看到了一些可以由 MainWindows.xaml.cs 处理的任务，或者它背后的代码是在 App 类中实现的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:50:41.657

MainWindow 通常`App`通过`StartupUri`App.xaml 中的类连接到类。

您可以像这样删除 App.xaml 中的并在 App.xaml.cs`StartupUri`中覆盖`OnStartup`

```
protected override void OnStartup(StartupEventArgs e)
{
    var mainWindow = new MainWindow();
    mainWindow.DataContext = <your datacontext>
    mainWindow.Show();
} 
```

# marionette - 使用 Backbone.Marionette 在集合中显示集合

> ID：13184319
> 
> 赞同：3
> 
> 时间：2012-11-01T19:41:06.800
> 
> 标签：marionette

我需要显示/编辑的数据似乎与 Marionette 提供的内置视图不匹配。让我举一个例子来说明。

假设我想列出/编辑书籍。每本书都有一个 ISBN、一个标题和 0 个或多个标签。基本上，信息的显示将是表格的（标签下的每个单词都是一个单独的标签，可以单独编辑/删除）：

```
+---------+----------------+-----------------------------+
|ISBN     |Title           |Tags                         |
+=========+================+=============================+
|12345678 |My Last Summer  |vacation diary kids          |
+---------+----------------+-----------------------------+
|12354389 |The Day After   |fiction future               |
+---------+----------------+-----------------------------+ 
```

如果每本书只有一个标签，那么 CompositeView/ItemView 会很好地工作。我在想的是在每行的最后一个单元格中动态创建区域，然后使用 CompositeView/ItemView 来处理标签列表。也许这是矫枉过正，在模板中有某种迭代器是要走的路。

我考虑过捕获标签并使用特定书籍的标签列表填充单个字符串。我可以通过处理从后端接收到的数据来做到这一点，从而将标签列表制作成单个数据元素，这样我就可以使用 CompositeView/ItemView 将其作为一个简单的表来处理。这确实引入了额外的“映射”，实现“编辑”视图会变得更加复杂。

所以我只是希望听到人们是否遇到了这种要求，以及哪些方法可以很好地与 Marionette 配合使用。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:25:55.700

正如您已经发现的那样，您可以通过多种不同的方式来完成这项工作。每个选项都将更适合一组特定的情况，但也有可能您的情况没有“最佳”方式来完成您想要的。如果是这种情况，只需选择一个并继续前进。:)

### 将标签映射到单个值

这是你已经建议的。它适用于标签数量相对较少的情况，并且当有人点击特定标签时您不需要采取任何自定义操作。例如，如果您只是将每个标签设置为一个`<a href="#{tag-name}">`链接，您可以轻松地将标签映射到一个简单的数组。

### 迭代模板中的标签集合

与映射选项基本相同，除了不是将标签缩减为简单的字符串数组，您将模板中的标签集合作为模型进行迭代，并调用 model.get(...) 以获取数据你需要。

如果您使用像 Handlebars 这样的模板引擎，这将变得非常容易，并且可能通过使用子模板产生更清晰的结果。

不过，我可能不会将这种方法推荐给下划线模板，因为它们在进行迭代时往往会很快变得混乱和丑陋。

### CllectionViews 的 CollectionView，使用布局

这是更复杂的选择，但也是最有能力的。

`itemView`将藏书配置为布局。布局中将有一个区域，并且该区域将填充另一个集合视图以呈现每个单独的标签。

这样做的好处是您可以拥有更多与正在呈现的单个标签相关联的代码和功能。每个标签都有一个视图实例，这意味着更容易封装和组织代码。

缺点是每个标签都有一个视图实例，并且需要编写更多代码来设置和运行它。

### CompositeViews 的 CollectionView

复合视图允许您围绕集合呈现包装模板，这可能证明是优于 CollectionView 的优势。

你仍然需要一个 CollectionView。此 CollectionView 将按原样呈现 CompositeView `itemView`。CompositeView 将指定一个`itemViewContainer`来呈现标签的集合。每个标签仍然有自己的视图实例。

您可以通过这种方式摆脱布局和区域。视觉结果与使用带有布局的 CollectionView 相同，但执行此操作的代码量可能会大大减少。

* * *

就个人而言，我要么执行 map/reduce 以将标签简化为一个简单的数组，要么使用 CompositeViews 的 CollectionView。

# php - 以其他 facebook 页面 B 用户的身份发布到 facebook 页面 A

> ID：13184321
> 
> 赞同：2
> 
> 时间：2012-11-01T19:41:22.483
> 
> 标签：php, facebook, facebook-php-sdk

找了几个小时后，我找不到这个问题的答案。希望有人可以帮助我。我正在使用最新的 facebook PHP SDK (v.3.2.0)。

我有一个公司的粉丝页面（页面 A），该公司的几个人也有粉丝页面（页面 B、C、D 等）。问题是我们希望将页面 B（以及 C 和 D）的帖子发布到页面 A，但发件人（帖子用户）应该是页面用户 B。

**您可以作为另一个页面用户 B 发布到页面墙 A 吗？**

我已经尝试了一切并且有以下工作：

*   我有一个管理员用户的访问令牌，它是所有页面的管理员
*   我有一个扩展访问令牌，可以在 60 天内自动发出请求
*   我有来自 /me/accounts 请求的所有页面的页面令牌
*   我有一个通过 /[page-id]/feed 包含所有页面的所有墙贴的数组

最后一部分是循环遍历数组，以用户 B、C 或 D 的身份发布到页面 A 的墙上。

我向 /[page-id-page-A]/feed 发送了一个 POST 请求，其中包含一条消息和页面 B 的页面令牌。请求后我收到一个错误：

**未捕获的 OAuthException: (#200) 演员为页面的帖子也不能包含 target_id**

以页面用户 B 的身份发布到页面 B 的墙上可以正常工作。以页面用户 B 的身份发布到页面 A 不会。文档不清楚这是否应该有效，但从 facebook UI 来看这是可能的。

希望有人能指出我正确的方向。我正在使用的代码如下，供任何想要使用它的人使用。

```
<?php
/* ************************
* Helper functions
************************ */
function sortbykey($a, $b) {
  return $a['time'] - $b['time'];
}

/* ************************
* Start app
************************ */
// Initialize Facebook
require_once("facebook.php");
$facebook = new Facebook(array('appId' => '<appID>','secret' => '<appSecret>'));

// Get facebook user (if possible)
$user_id = $facebook->getUser();

$login_params = array(
  'scope' => 'manage_pages,publish_stream',
  'redirect_uri' => '<app_url>/index.php'
);
if($user_id) {
  // We have a user ID, so probably a logged in user.
  // If not, we'll get an exception, which we handle below.
  try {
    // Get user profile and extended access tokens for requests
    $user_profile = $facebook->api('/me','GET');
    $facebook->setExtendedAccessToken();
    $access_token = $facebook->getAccessToken();
  } catch(FacebookApiException $e) {
    // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    $login_url = $facebook->getLoginUrl($login_params); 
    echo '<div class="login"><a href="' . $login_url . '">login</a></div>';
    error_log($e->getType());
    error_log($e->getMessage());
  }   
} else {
  // No user, print a link for the user to login
  $login_url = $facebook->getLoginUrl($login_params);
  echo '<div class="login"><a href="' . $login_url . '">login</a></div>';
}

if(isset($access_token) && !empty($access_token)){
  // Provide logout options
  $logout_url = $facebook->getLogoutUrl(); 
  echo '<div class="logout"><a href="' . $logout_url . '">logout</a></div>';

  // Get user pages and tokens
  $user_pages = $facebook->api('/me/accounts','GET');
  $page_tokens = array();
  foreach($user_pages['data'] as $page){
    $page_tokens[$page['id']] = $page['access_token'];
  }

  // Set challenger ID's and page ID
  $persons = array('page-ID-B','page-ID-C','page-ID-D');
  $page = 'page-ID-A';

  // Loop over persons and create stream of messages.
  $messages = array();
  foreach($persons as $person){
    $token = $page_tokens[$person];
    $feed = $facebook->api('/'.$person.'/feed','GET');
    foreach($feed['data'] as $status){
      // Add page token to message to post as page and time to sort by
      $status['token'] = $token;
      $status['time'] = strtotime($status['created_time']);
      // Only add messages that aren't imported yet
      if($status['time'] > $_SESSION['lastupdatetime']) {
        $messages[] = $status;
      }
    }
  }
  // Sort by time value in nested array
  usort($messages,"sortbykey");

  // Post messages to timeline
  foreach($messages as $status){

    // Post to MScHALLENGE page based on type
    switch($status['type']){
      case 'status':
      case 'link':

        // Build post data 
        $data = array();
        if(isset($status['message'])) $data['message'] = $status['message'];
        if(isset($status['link'])) $data['link'] = $status['link'];
        // Post to facebook
        if(!empty($data)){
          $data['access_token'] = $status['token'];
          $post = $facebook->api('/'.$page.'/feed','POST',$data);
        }

        break;

    }

    // Save last update time
    $_SESSION['lastupdatetime'] = $status['time'];
  }  
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:50:35.943

由于我最近进行了一些测试，因此不支持此功能。即使您是*PageA*和 PageB 的管理员，您也不能在 PageA 上以 PageB 的身份发帖（其中“声音”设置为 PageB，并且帖子显示为由 PageB 创作）。语音（即“由 PageB 创作”）在您管理的页面上工作，并在页面上使用属于*同一*页面的语音创建帖子。至少这就是 API 当前的行为方式。

# mysql - 从不同的表中引用同一列/表上的 2 行

> ID：13184325
> 
> 赞同：2
> 
> 时间：2012-11-01T19:41:46.203
> 
> 标签：mysql

我正在为 Xbox 上的虚拟曲棍球联赛开发统计跟踪网页。我有我的基本表格布局设置，但我正在努力如何创建允许我显示时间表的查询。下面是我的基本表格布局，我想做的是让它显示如下：

第一场：
纽约 vs 芝加哥
底特律 vs 波士顿

第 2 场：
波士顿 vs 纽约
芝加哥 vs 底特律

```
SELECT homeTeam.name AS HOME_TEAMNAME
FROM GameSchedule Sched

INNER JOIN GameStats GameStatsHome
ON Sched.ID = GameStatsHome.gameSchedule_ID
AND Sched.homeTeam_ID = GameStatsHome.team_ID

INNER JOIN Team homeTeam
ON homeTeam.ID = gameStatsHome.team_ID 
```

我意识到我遇到的问题是尝试为 GameSchedule.awayTeam_ID 和 GameSchedule.homeTeam_ID 提取 Team.name。但我一直无法弄清楚如何做到这一点。我觉得我很接近了..但话又说回来，我不知道自己在做什么，并且花了大约 3 天的时间试图弄清楚这个查询。我想如果有人能指出我正确的方向，我应该对我需要的其余部分有好处......任何帮助将不胜感激。

```
Table: Team
-----------------------------------------------------------
| ID | name       | abbreviation | conference | division |
-----------------------------------------------------------
|  1  | New York  |      TMA     |      1     |     1    |
|  2  | Chicago   |      TMB     |      1     |     1    |
|  3  | Detroit   |      TMC     |      1     |     1    |
|  4  | Boston    |      TMD     |      1     |     1    |
-----------------------------------------------------------

Table: GameSchedule
------------------------------------------------
| ID | awayTeam_ID | homeTeam_ID | gameTime_ID |
------------------------------------------------
| 1  |     1       |      2      |      1      |
| 2  |     3       |      4      |      1      |
| 3  |     4       |      1      |      2      |
| 4  |     2       |      3      |      2      |
------------------------------------------------

Table: GameStats
------------------------------------------
| ID | gameSchedule_ID | team_ID | goals |
------------------------------------------
| 1  |        1        |    1    |   5   |
| 2  |        1        |    2    |   3   |
| 3  |        2        |    3    |   6   |
| 4  |        2        |    4    |   1   |
| 5  |        3        |    1    |   2   |
| 6  |        3        |    4    |   5   |
------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:53:10.923

这将为您提供两个名称

```
SELECT
    away.Name as AwayTeam,
    home.Name as HomeTeam
FROM
    Game_Schedule gs
    JOIN Team away ON t.ID = gs.AwayTeam_ID
    JOIN Team home ON t.ID = gs.HomeTeam_ID 
```

你可以在这些连接中做任何你想做的事情！

# jquery - 通过 ajax 加载页面时 Javascript 不起作用

> ID：13184326
> 
> 赞同：3
> 
> 时间：2012-11-01T19:41:48.077
> 
> 标签：jquery, html, ajax

> **可能重复：**
> [使用 jquery 和 HTML 5 加载新部件时，javascript 在新部件中不起作用](https://stackoverflow.com/questions/6173570/javascript-not-working-in-the-new-part-when-loading-a-new-part-using-jquery-and)

我使用 Ajax 将另一个 HTML 页面加载到主 HTML 页面的 div 中。页面加载正常，但是当我尝试将 jQUery 应用于加载的页面时，没有任何效果。

```
$('.mainDiv').click(function(ev) {
    ev.preventDefault();
    var url = $(this).attr('href');
    $('.secondDiv').load('http://127.0.0.1:8000'+url);
}); 
```

我尝试使用在所有链接上调用的简单警报函数来查看它是否有效，但警报仅出现在主页链接上，即使 .js 文件链接到两个页面也是如此。

```
$('a').click(function(){
    alert('hey');
}); 
```

我怎样才能解决这个问题？使用 .live() 或 .on() 而不是 .load() 会解决问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:44:56.707

使用`$('body').on('click', 'a', function(event){...})`会起作用。

因为`on`被调用，所以`<body>`您不必担心在加载新内容时事件会被清除。

如果您想将此事件的范围限定在一组特定的锚点上，我建议在第二个参数中使用类的名称间距，例如

```
$('body').on('click', '.mainDiv .secondDiv a', function(event){...}) 
```

通过在引导程序中设置一次，您可以减少代码中的很多复杂性。现在您需要做的就是加载内容；由于您已提取事件逻辑，因此无需定义内联回调。

`$('a').on(...)`将**无法**工作，因为它绑定的 DOM 元素可能会被清除，或者在调用时不在页面上。调用的第二个参数`on`用于引用出现在根元素下的任何新元素（`body`在本例中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:46:41.443

这是你需要做的：

```
$('.secondDiv').on('click', 'a', function() {
    alert('hey');
}); 
```

所以基本上每个在 secondDiv 中加载的动态锚标签都会自动绑定到这个函数。否则你可以做的是：

```
$('.secondDiv').load('http://127.0.0.1:8000'+url, function(){
    $(this).find('a').click(function(){
        alert('hey');
    });    
}); 
```

但是，如果第一个适合您，我不会建议您使用后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:56:08.160

我同意 Kevin B 的观点，$.ajax() 在这里可能会更好。然后你可以在回调中设置你的点击事件。

```
$.ajax({
   url: 'http://127.0.0.1:8000'+url,
   dataType: 'html',
   succcess: function(data){
      $('.secondDiv').append(data);
      $('.secondDiv a').click(function(){
         alert('hey');
      });
   }
}); 
```

# c++ - 基于短整数的掩码在 C++ 库 Bullet 中如何工作？

> ID：13184328
> 
> 赞同：0
> 
> 时间：2012-11-01T19:41:54.963
> 
> 标签：c++, c, physics, bullet, bulletphysics

基于 short int 的掩码如何在 c++ 中工作（例如[Bullet](http://bulletphysics.com/Bullet/BulletFull/classbtCollisionWorld.html#a3ca1134733136dc68691a8cd73196cc6)中的掩码）？

我[看子弹](http://bulletphysics.com/Bullet/BulletFull/structbtBroadphaseProxy.html#pub-types)

```
CollisionFilterGroups { 
  DefaultFilter = 1, 
  StaticFilter = 2, 
  KinematicFilter = 4, 
  DebrisFilter = 8, 
  SensorTrigger = 16, 
  CharacterFilter = 32, 
  AllFilter = -1 
} 
```

并看到所有值都是 2 的度数，我[知道](http://en.wikipedia.org/wiki/Integer_%28computer_science%29#Short_integer)：

short 是有符号整数，需要 2 个字节来存储，从 -32,768 到 +32,767。

但是如何创建我自己的组：如何计算掩码交叉点？

例如，除了 CollisionFilterGroups 之外，如何创建类似：

```
MyCollisionFilterGroups { 
  Cubes= ?,
  Boxes= ?, 
  Spheres= ?
} 
```

在哪里

*   我们希望“planes”不与“planes”、“boxes”和“spheres”发生碰撞（“see”）
*   我们希望“盒子”与其他“盒子”和“球体”发生碰撞
*   我们希望“球体”不与“球体”碰撞，但与“盒子”碰撞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:04:49.143

基本上，如果它是 2 的幂，这意味着比二进制表示中只有一个 1 位，其余为 0，如下所示：1 = 1, 2 = 10, 4 = 100, 8 = 1000, 16 = 10000 以此类推。现在让我们说 a = 1, b = 2, c = 4, d = 8, e = 16, f = 32。如果你有一个数字并且你想看看它是否有 a 和 e 你做一个这样的面具: a|b(or)...这将导致 10001 二进制表示。

假设您要测试 a 和 e 的数字是 X。仅当 X 包含 a 和 e 时，以下语句才成立：X&(a|e) == X，即 X 并且（a 或 e）等于 X。

对于第一个示例，X 是 11001，即包含 a 和 e。11001 & 10001 将是 10001，所以这是真的，因此您发现 X 包含 a 和 e。

第二个例子：X 是 100111，即包含 a，但不包含 e。当你用 a|e(10001)“和”它时，它会得到 000001，它不等于 X，因此 X 不包含。

现在初始化，如果你想要一个数字包含 a,c,e 你写： X=a|c|e

这一切都归结为数字的二进制表示。在您编写的示例中，还有一个 -1，在二进制表示中是 1111..11，这意味着它涵盖了所有内容。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:52:08.873

您的问题尚不清楚，但我认为您正在寻找为模拟中的对象设置类别和掩码位：

```
MyCollisionFilterGroups { 
    Plane= 64,
    Box= 128, 
   Sphere= 256
} 
```

平面，类别位 = 平面，掩码 = 0

Box，类别位 = Box，掩码 = Box + Sphere（或 Box | Sphere）

球体，类别位 = 球体，掩码 = 框

简而言之，为每个过滤器组创建 2 的幂，将每个对象的类别掩码设置为组枚举，并将其掩码设置为您希望它与之碰撞的对象类型的枚举（或 0 表示不碰撞） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T22:11:48.470

不确定 Bullet 具体是如何工作的，但想法是这样的：

每个对象都有一个碰撞组标志和一个碰撞掩码。碰撞组是对象的分类器（什么样的对象）。碰撞掩码是您的对象与之碰撞的所有组（分类器）（通常它以 0xffff 开头，这意味着它与所有东西碰撞）

在碰撞测试中，它是这样的：

```
if( obj->group & otherObj->mask
    &&
    obj->mask & otherObj->group )
 ..check collision.. 
```

如果您想创建新组，（我不知道项目符号如何工作或允许这样做），创建一个只设置一个位的组，并且尚未设置（您在帖子中显示的那些），我不喜欢用整数，很混乱，我更喜欢位移：

```
DefaultFilter = 1 equals (1<<0)
StaticFilter = 2, equals (1<<1)
KinematicFilter = 4, equals (1<<2)
DebrisFilter = 8, equals (1<<3)
SensorTrigger = 16, equals (1<<4)
CharacterFilter = 32, equals (1<<5)
AnewGroup_Box = (1<<6),
AnewGroup_Sphere = (1<<7) 
```

最多短的位数（主要是 16 位）。要设置您的对象（不是组）与哪些组发生冲突，只需将掩码中的组组合起来：

```
myObj->mask = AnewGroup_Box | StaticFilter | DebrisFilter; // groups obj will collide 
```

我不确定 Bullet 是如何工作的，你..

希望这会有所帮助，如果我错了，请纠正我。

# ios - 如何重建图书馆项目

> ID：13184329
> 
> 赞同：0
> 
> 时间：2012-11-01T19:42:00.447
> 
> 标签：ios, xcode, build

我仍然是 Xcode 的新手。我在我的项目中添加了第三方开源项目。我已将它添加到我的目标依赖项中，并将 lib“.a”文件添加到“Link Binary With Libraries”中。就目前而言，一切正常。

但是，我在这个项目的源代码中发现了一个错误。既然我已经纠正了这个错误，我该如何重建这个项目，以便我可以从我的项目中访问这个新的、已更改的代码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:25:30.603

如果您的项目正确链接到此开源库，则对该库的源文件所做的任何更改都将被您的项目识别。所以，简而言之，就像往常一样构建。

# android - 如何将 Bundle 传递给 Fragment

> ID：13184330
> 
> 赞同：3
> 
> 时间：2012-11-01T19:42:01.290
> 
> 标签：android, android-fragments

首先让我说，我希望东海岸的每个人在飓风桑迪之后都没事。我很幸运，虽然我住在纽约市，但我从未失去过权力。我的想法传达给那些没有那么幸运的人。三天后我要回去工作了，我需要一些碎片方面的帮助。我正在尝试将 Bundle 传递给 Fragment，但它不起作用。我知道我的一般片段设置正确，因为如果我不尝试传递 Bundle，它工作正常。所以这是我传递捆绑包的活动：

```
public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Intent choice = new Intent(getApplicationContext(), com.MyProject.project.MyList.class);
            Bundle dataBundle = new Bundle();
            String chosenValue = values[position];
            dataBundle.putString("Level",chosenValue);
            choice.putExtras(dataBundle);
            startActivity(choice);  } 
```

现在这是我没有 Bundle 的活动。这工作正常：

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
        String[] values = new String[] { "Enterprise", "Star Trek", "Next Generation", "Deep Space 9", "Voyager"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);

} 
```

但是，当我尝试从 Bundle 中获取信息时，它不起作用。这是我的代码：

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Bundle info = getArguments();

    String level = info.getString("level");
    String[] values = new String[] {level, level};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);

} 
```

当我运行它并在我的活动中单击我的选择时，应用程序就会挂起。LogCat 似乎没有给我太多这方面的信息。有人在这里看到任何问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:48:33.937

您需要在片段上设置参数。

在活动中`onCreate`：

```
Fragmet myFragment = new MyFragment();
myFragment.setArguments( getIntent().getExtras() ); 
```

# matlab - 为什么 MATLAB 在使用 ode 求解器时会更改矩阵维度？

> ID：13184331
> 
> 赞同：1
> 
> 时间：2012-11-01T19:42:03.793
> 
> 标签：matlab

我已经为一些运行良好的嵌套 for 循环编写了一些代码。它使用列向量、行向量和 3x2 矩阵的组合，但所有维度都是一致的。现在，当我将这些循环作为微分方程放入并使用`ode15s`时，突然间即使对于 t 的单次迭代它也不起作用。它说

> “试图访问 MP(2,1)；索引超出范围，因为 size(MP)=[1,6]”

当实际上 MP 应该是一个 3x2 矩阵时，当然是当我在没有 ode 求解器的情况下测试代码时。有谁知道导致改变矩阵维度的 ode 求解器有什么不同？

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:28:54.237

这些`ode`例程假定一个向量输入`y0`( `1xn`) 并给出一个向量输出`y`。在调用 之后`ode15s`，您可以立即转换回矩阵，使用 eg`y = reshape(y,[3 2]);`并且您的其余代码应该可以工作。

# javascript - 表单弹出窗口在 Internet Explorer 中被阻止

> ID：13184332
> 
> 赞同：0
> 
> 时间：2012-11-01T19:42:07.533
> 
> 标签：javascript, jquery, html, forms, internet-explorer

假设此表单转到下一个并打开另一个弹出窗口。我也让它将表单数据传递给两个页面。

我遇到的问题是弹出窗口显示在除 IE 之外的所有浏览器中。它一直被 IE 中的弹出窗口阻止程序阻止。我需要弹出窗口显示而不会被阻止。

```
<script language="javascript">

    function myChangeHandler() {

        var form = document.getElementById('TheForm');
        form.method = 'POST';
        form.action = 'https://test.com/page1';
        form.target = 'window_1';

        window.open('', 'window_1','fullscreen=1,scrollbars=1');
        this.form.submit();

        var state_ac = document.getElementById('stateDrop');
        var state_dd = state_ac.options[state_ac.selectedIndex].value;
        window.location = 'https://test.com/page2';
    }

</script>

<form id="TheForm" action="https://test.com/page2" method="post">

    <select id="stateDrop" name="state" size="1" onchange="myChangeHandler.apply(this)">
        <option value="null" selected="selected" style="color:#b3b3b3">- Select Your State -</option>
        <option value="AL" class="others">Alabama</option>
        <option value="AK" class="others">Alaska</option>
        <option value="AZ" class="others">Arizona</option>
    </select>

    <input id="featured-image-right-button" type="image" src="<?php bloginfo('template_url'); ?>/images/featured-image-right-button.png" alt="" disabled="disabled" />

</form> 
```

EDIT: see the example here, the popup works in every other browser when the option is selected but the pop up is blocked in ie. 单击按钮时它在 IE 中工作正常，但选择该选项时弹出窗口被阻止[http://jsfiddle.net/uyeq3/](http://jsfiddle.net/uyeq3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:55:20.653

**编辑：** Internet Explorer 阻止来自弹出窗口的 onchange 事件，您可以在用户单击按钮时执行该操作，这将允许弹出窗口通过阻止程序。

```
<input type="button" value="Change Country" onclick="myChangeHandler();return false;"/> 
```

# sql - 树结构和递归

> ID：13184334
> 
> 赞同：17
> 
> 时间：2012-11-01T19:42:11.227
> 
> 标签：sql, postgresql, tree, common-table-expression, recursive-query

使用 PostgreSQL 8.4.14 数据库，我有一个表示树结构的表，如下例所示：

```
CREATE TABLE unit (
    id bigint NOT NULL PRIMARY KEY,
    name varchar(64) NOT NULL,
    parent_id bigint,
    FOREIGN KEY (parent_id) REFERENCES unit (id)
);
INSERT INTO unit VALUES (1, 'parent', NULL), (2, 'child', 1)
                      , (3, 'grandchild A', 2), (4, 'grandchild B', 2); 
```

```
 id |    name      | parent_id 
----+--------------+-----------
  1 | parent       |          
  2 | child        |         1
  3 | grandchild A |         2
  4 | grandchild B |         2 
```

我想为这些单元创建一个访问控制列表，其中每个单元可能有它自己的 ACL，或者从最近的祖先那里继承它并拥有自己的 ACL。

```
CREATE TABLE acl (
    unit_id bigint NOT NULL PRIMARY KEY,
    FOREIGN KEY (unit_id) REFERENCES unit (id)
);
INSERT INTO acl VALUES (1), (4); 
```

```
 unit_id 
---------
       1
       4 
```

我正在使用视图来确定一个单元是否从祖先那里继承了它的 ACL：

```
CREATE VIEW inheriting_acl AS
    SELECT u.id AS unit_id, COUNT(a.*) = 0 AS inheriting
    FROM unit AS u
    LEFT JOIN acl AS a ON a.unit_id = u.id
    GROUP BY u.id; 
```

```
 unit_id | inheriting 
---------+------------
       1 | f
       2 | t
       3 | t
       4 | f 
```

**我的问题是：**如何获得*不*从祖先继承 ACL 的最近单元？我的预期结果应该类似于下表/视图：

```
 unit_id | acl 
---------+------------
       1 | 1
       2 | 1
       3 | 1
       4 | 4 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T21:02:09.023

具有[**递归 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html)的查询可以完成这项工作。需要 PostgreSQL **8.4**或更高版本：

```
WITH RECURSIVE next_in_line AS (
    SELECT u.id AS unit_id, u.parent_id, a.unit_id AS acl
    FROM   unit u
    LEFT   JOIN acl a ON a.unit_id = u.id

    UNION  ALL
    SELECT n.unit_id, u.parent_id, a.unit_id
    FROM   next_in_line n
    JOIN   unit u ON u.id = n.parent_id AND n.acl IS NULL
    LEFT   JOIN acl a ON a.unit_id = u.id
    )
SELECT unit_id, acl
FROM   next_in_line
WHERE  acl IS NOT NULL
ORDER  BY unit_id 
```

第二回合的休息条件`UNION`是`n.acl IS NULL`。这样，一旦`acl`找到 an，查询就会停止遍历树。
最后`SELECT`，我们只返回`acl`找到 an 的行。瞧。

顺便说一句：使用通用的、非描述性`id`的作为列名是一种反模式。可悲的是，一些 ORM 默认情况下会这样做。调用它`unit_id`，您不必一直在查询中使用别名。

# drupal - Drupal：如何制作一个从 $_REQUEST[] 中获取值的表单

> ID：13184335
> 
> 赞同：0
> 
> 时间：2012-11-01T19:42:20.760
> 
> 标签：drupal, drupal-modules, drupal-forms

这是以下内容的克隆：[https](https://drupal.stackexchange.com/questions/47865/how-to-make-a-form-that-captures-a-value-from-request) ://drupal.stackexchange.com/questions/47865/how-to-make-a-form-that-c​​aptures-a-value-from-request （目前没有答案）

我一直在尝试制作一个表单来捕获从`$_REQUEST`.

1.  仅当 $_REQUEST 变量存在时才显示字段（完成）
2.  用户可以修改字段
3.  以任何方式验证该字段
4.  （修改后的）值被使用

在这种特定情况下，我使用的是一个`hook_user`函数，但我希望该解决方案适用于任何 Drupal 表单。

这是我的代码的简化版本，如果用户使用以下 URL 注册，则用户将有一个额外的字段来指定他们有最喜欢的水果：

[http://example.com/user/register?fruit=pineapple](http://example.com/user/register?fruit=pineapple)

```
function fruity_user($op, &$edit, &$user, $category = NULL){
    switch($op) {
        // Add extra fields if $_REQUEST contains values for them
        case 'register':
            if($_REQUEST['fruit'] == 'pineapple'){
                $fields['user_reg_info']['profile_fruit'] = array(
                     '#type' => 'textfield'
                    ,'#description' => 'Your favorite fruit (if applicable)'
                    ,'#locked' => 0
                    ,'#value' => $_REQUEST['fruit']
                );
            }
            return $fields;
            break;

        // check registration for mistakes
        case 'validate':
            if ($edit['form_id'] == 'user_register') {
                if ($edit['profile_fruit']){
                    verify_fruit($edit['profile_fruit']);
                }
            }
            break;

        // runs after the new user is inserted
        case 'insert':
            if($_REQUEST['fruit']){
                db_query('INSERT INTO user_fruits SET `uid`=%d `fruit`="%s"',array($user->uid, $edit['profile_fruit']));
            }

            // record information
            watchdog('user', t('user %user picked out a fruit',array('%user' => $user->name)));
            break;
    }
} 
```

使用上面的代码，该字段仅在存在时才可见`$_REQUEST['fruit']` ，但如果您在表单上将水果更改为“西瓜”，`insert`仍然使用“菠萝”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:38:13.730

我认为您在插入和注册时使用了两个不同的键。您在注册中使用 $fields['user_reg_info']['profile_fruit'] 并在插入中使用 $edit['fruit'] 。尝试在这两个地方使用 ['fruit'] 键。在编辑中也使用相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:51:33.083

答案是使用`#default_value`而不是`#value`.

[http://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/6#default_value](http://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/6#default_value)

# jquery - 使用 Javascript 添加表单时 jQuery UI 自动完成的问题

> ID：13184339
> 
> 赞同：0
> 
> 时间：2012-11-01T19:42:39.623
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui

我似乎无法自动完成使用我使用 javascript 添加到屏幕的表单。例如，我正在使用我的新路线来呈现我的对象的形式。在 rails 文件中的 new.js.erb 中，我有以下内容：

```
$("div#container").hide().html("<%= escape_javascript render 'form' %>").fadeIn(); 
```

渲染后，如果我在输入元素中键入：

```
<input id="object_name" name="object[name]" placeholder="Name" size="30" type="text"> 
```

并用 javascript 收听：

```
jQuery ->
  $('input#object_name').autocomplete
    source: ['Test', 'Testing', 'Test 234'] 
```

就自动完成而言，我一无所获。如果我复制并粘贴此表单并在加载时将其显示在屏幕上（而不是使用我的 rails 新路径动态添加），它将正常工作。如何获得自动完成功能以收听动态添加的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:44:49.993

看起来您的自动完成脚本是在`#object_name`表单元素之前添加的 - 如果您确保在`#object_name`添加到文档后重新定义自动完成脚本，那么一切都应该很好。

# eclipse - JBoss 无法从 Eclipse 启动

> ID：13184340
> 
> 赞同：4
> 
> 时间：2012-11-01T19:42:40.947
> 
> 标签：eclipse, jakarta-ee, jboss, jboss7.x

我最近从 Netbeans 和 GlassFish 迁移到 Eclipse 和 JBoss。我已经安装了 eclipse-jboss 工具，并且服务器运行时设置正确（至少 afaik）。

我遇到的问题是，每当我尝试从 Eclipse 启动 JBoss 时，都会得到以下信息：

```
20:37:23,853 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
20:37:24,136 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
20:37:24,194 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
20:37:24,306 ERROR [org.jboss.msc.service.fail] MSC000001: Failed to start service jboss.deployment-mount-provider: org.jboss.msc.service.StartException in service jboss.deployment-mount-provider: JBAS015843: Failed to create temp file provider
    at org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.start(DeploymentMountProvider.java:111) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09-icedtea]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09-icedtea]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09-icedtea] 
```

我已经用谷歌搜索了这个并尝试了我能找到的所有解决方法，包括（！！！）给予 jboss-as.service 根权限（编辑：这是毫无意义的，因为在这种情况下 Eclipse 甚至没有触及 systemd）。没有什么帮助。有人可以帮忙吗？这将不胜感激。

编辑：这很有趣：

服务器日志：

```
20:35:39,344 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856
20:35:39,389 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856
20:35:42,379 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856
20:35:42,907 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856
20:35:43,081 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856
20:35:43,242 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856
20:35:44,851 ERROR [org.jboss.remoting.remote.connection] (Remoting "chrisdesktop:MANAGEMENT" read-1) JBREM000200: Remote connection failed: java.io.IOException: Received an invalid message length of 1195725856 
```

[截图信息日志]

```
20:55:29,931 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-15) MSC000001: Failed to start service jboss.osgi.as.framework.bootstrap: org.jboss.msc.service.StartException in service jboss.osgi.as.framework.bootstrap: JBAS011965: Failed to create Framework services
    at org.jboss.as.osgi.service.FrameworkBootstrapService.start(FrameworkBootstrapService.java:161)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09-icedtea]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09-icedtea]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09-icedtea]
Caused by: java.lang.NoClassDefFoundError: org/osgi/util/xml/XMLParserActivator
    at org.jboss.as.osgi.service.FrameworkBootstrapService.start(FrameworkBootstrapService.java:139)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.osgi.util.xml.XMLParserActivator from [Module "org.jboss.as.osgi:main" from local module loader @7fae4426 (roots: /usr/share/jboss-as/modules)]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
    ... 6 more

20:55:29,932 INFO  [org.jboss.as.naming] (MSC service thread 1-5) JBAS011802: Starting Naming Service
20:55:29,949 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
20:55:30,027 FATAL [org.jboss.as.webservices] (MSC service thread 1-19) JBAS015577: Error while creating configuration service
20:55:30,028 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-19) MSC000001: Failed to start service jboss.ws.config: org.jboss.msc.service.StartException in service jboss.ws.config: java.lang.RuntimeException: org.jboss.modules.ModuleNotFoundException: Module org.jboss.ws.jaxws-client:main is not found in local module loader @7fae4426 (roots: /usr/share/jboss-as/modules)
    at org.jboss.as.webservices.service.ServerConfigService.start(ServerConfigService.java:72)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09-icedtea]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09-icedtea]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09-icedtea]
Caused by: java.lang.RuntimeException: org.jboss.modules.ModuleNotFoundException: Module org.jboss.ws.jaxws-client:main is not found in local module loader @7fae4426 (roots: /usr/share/jboss-as/modules)
    at org.jboss.as.webservices.util.ModuleClassLoaderProvider.getServerIntegrationClassLoader(ModuleClassLoaderProvider.java:56)
    at org.jboss.ws.common.management.AbstractServerConfig.create(AbstractServerConfig.java:201)
    at org.jboss.as.webservices.service.ServerConfigService.start(ServerConfigService.java:69)
    ... 5 more
Caused by: org.jboss.modules.ModuleNotFoundException: Module org.jboss.ws.jaxws-client:main is not found in local module loader @7fae4426 (roots: /usr/share/jboss-as/modules)
    at org.jboss.modules.LocalModuleLoader.findModule(LocalModuleLoader.java:126) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ModuleLoader.loadModuleLocal(ModuleLoader.java:275) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ModuleLoader.preloadModule(ModuleLoader.java:222) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.LocalModuleLoader.preloadModule(LocalModuleLoader.java:94) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.Module.addPaths(Module.java:841) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.Module.link(Module.java:1196) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.Module.relinkIfNecessary(Module.java:1225) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:208) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.as.webservices.util.ModuleClassLoaderProvider.getServerIntegrationClassLoader(ModuleClassLoaderProvider.java:53)
    ... 7 more

20:55:30,065 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 48) JBAS014612: Operation ("add") failed - address: ([("subsystem" => "webservices")]): java.lang.RuntimeException: org.jboss.modules.ModuleNotFoundException: Module org.jboss.ws.jaxws-client:main is not found in local module loader @7fae4426 (roots: /usr/share/jboss-as/modules)
    at org.jboss.as.webservices.util.ModuleClassLoaderProvider.getServerIntegrationClassLoader(ModuleClassLoaderProvider.java:56)
    at org.jboss.as.webservices.deployers.deployment.DeploymentAspectsProvider.getSortedDeploymentAspects(DeploymentAspectsProvider.java:53)
    at org.jboss.as.webservices.dmr.WSDeploymentActivator.addDeploymentProcessors(WSDeploymentActivator.java:77)
    at org.jboss.as.webservices.dmr.WSDeploymentActivator.activate(WSDeploymentActivator.java:71)
    at org.jboss.as.webservices.dmr.WSSubsystemAdd$1.execute(WSSubsystemAdd.java:118)
    at org.jboss.as.server.AbstractDeploymentChainStep.execute(AbstractDeploymentChainStep.java:45)
    at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:311) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09-icedtea]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09-icedtea]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09-icedtea]
    at org.jboss.threads.JBossThread.run(JBossThread.java:122) [jboss-threads.jar:2.0.0.GA]
Caused by: org.jboss.modules.ModuleNotFoundException: Module org.jboss.ws.jaxws-client:main is not found in local module loader @7fae4426 (roots: /usr/share/jboss-as/modules)
    at org.jboss.modules.LocalModuleLoader.findModule(LocalModuleLoader.java:126) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ModuleLoader.loadModuleLocal(ModuleLoader.java:275) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ModuleLoader.preloadModule(ModuleLoader.java:222) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.LocalModuleLoader.preloadModule(LocalModuleLoader.java:94) [snip] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T11:40:23.387

在mac上，我在（我想）将外部文件复制到wildfly目录之后使用了WildFly。正如伙计们所说，这是权限问题

```
chmod -R 777 [wildfly dir] 
```

帮助。如果您处于开发周期，则不是那么准确，但快速的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:10:10.447

我看到错误 - JBAS015843：无法创建临时文件提供程序。

我猜您使用的是 Windows 7。Windows 7 要求我授予进程权限，以便从单独的对话框中在 Windows\Temp 目录中创建文件。您可能必须找到该对话框并授予权限。这与 Windows 服务没有任何关系，因为您是从 Eclipse 启动 jboss。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:53:10.093

检查 $JBOSS_HOME/standalone 上设置的权限，尤其是 $JBOSS_HOME/standalone/log 目录

见鬼，它有什么作用`chmod -R 777 $JBOSS_HOME/standalone`？并不是说我建议除了调试之外...

因为给予 jboss-as.service root 权限并没有多大作用，因为 eclipse 不使用该服务来运行 AS7，而是手动运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-12T11:41:31.200

这是一个奇怪的空间问题。

```
df -h 
```

上面的命令发出了文件挂载中有相当大的空间。尽管，

```
df -PhI 
```

担心挂载上没有空间，表明 I-Node 空间不足。扩展更多空间是随后的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-26T19:09:26.720

在 Windows 7 环境中使用 Eclipse JUNO 时，我也遇到了同样的问题。我试图从 eclipse juno 运行 jboss AS 7.0 服务器，但我遇到了同样的错误。

然后我意识到这可能是因为我在“c:\program files”下安装了 jboss EAP 6.0 包。然后我卸载了我的 jboss EAP 6.0 并在“c:\”中重新安装它，并将 eclipse 的 jboss 服务器适配器指向新位置。这个解决方案对我有用！

我不知道为什么 Windows 7 将程序文件视为不同的目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T13:16:40.000

您必须确保您的用户在 jboss-as 组中。

还要检查该组是否对 /usr/share/jboss-as/standalone 下的符号链接目录具有写权限

如果您之前启动了 JbossAS，可能会有一些文件归 root 用户所有。并且很可能您的用户无法写入这些文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-12T14:26:20.973

错误`JBAS015843: Failed to create temp file provider`

是因为没有足够的内存空间。请检查您的 Jboss 的独立文件夹下的 tmp 文件夹。使用清除其内容

```
rm -rfv tmp/* 
```

然后重新启动您的 Jboss 服务器。

# dojo - 为什么除非我调整浏览器大小，否则我的 dojo dgrid 中的标题不会出现？

> ID：13184341
> 
> 赞同：1
> 
> 时间：2012-11-01T19:42:44.800
> 
> 标签：dojo, dgrid

我有一个带有标题的 dgrid，除非我调整浏览器窗口的大小，否则这些标题不会出现。一旦我调整浏览器窗口的大小，标题就会出现。如何在不调整浏览器大小的情况下显示标题？

我没有正确调用 startup() 吗？有没有我可以触发的事件让 dgrid 认为浏览器已调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:06:54.553

将 DijitRegistry 添加到网格中，如下所示：

[https://github.com/SitePen/dgrid/wiki/DijitRegistry](https://github.com/SitePen/dgrid/wiki/DijitRegistry)

在内容窗格中放置一个 dijit Container（如果需要该窗格）并将网格添加为容器的子项。容器将在其子级上调用启动，这也会调整它们的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:55:27.380

所以我添加了一个`onShow`事件处理程序来`ContentPane`保存我的网格，并且每当它触发时，它都会调用`grid.resize()`. 很简单，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T00:07:54.303

刚刚解决了问题。所以，我的问题是：我以编程方式将 dgrid 添加到`dijit/layout/ContentPane`. 在其他浏览器中，除了 IE 6 之外，它工作正常。它没有显示 dgrid，直到我调整浏览器窗口的大小。我使用了 StackOverflow 和其他站点的许多解决方案。直到我没有为我的网格替换 css 规则（在一个 Stacks 的解决方案中找到）。

在某处我找到了下一个 CSS 规则：

```
#dataGrid {
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0;
height: auto;
width: auto;
} 
```

没问题，但在 IE6 中不行。我被改为：

```
#dataGrid {
width: 100%;
height:100%;
} 
```

现在在我所有的测试浏览器中都可以了。希望我能帮助你:) 完全添加工作 dgrid (Dojo 1.9)：

```
HTML (my container):
<div class="centerPanel" id="centerPanel" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region: 'center'" ></div> 

JS (I skipped reuires):
grid = new (declare([OnDemandGrid, DijitRegistry, ColumnResizer,Keyboard, Selection]))({
  columns: docListLayout,id:"dataGrid"
});
registry.byId("centerPanel").addChild(grid);

CSS:
#dataGrid {
width: 100%;
height:100%;
} 
```

我还删除了带有宽度/高度声明的 centerPanel 的 CSS。

铜。

# java - 使用 String.match() 时出现 PatternSyntaxException

> ID：13184344
> 
> 赞同：0
> 
> 时间：2012-11-01T19:42:52.307
> 
> 标签：java, regex

以下看似无害的模式导致了 PatternSyntaxException：

```
String pattern = "^(?:.*)\\s*{$"; // pattern is:   ^(?:.*)\s*{$ 
```

正如您在[regexpal](http://regexpal.com)中查看它时所看到的，它似乎在那里正常工作。

例如，该字符串应匹配：

```
name { 
```

我得到的消息是“索引 9 附近的非法重复”，但我不知道我在做什么这是非法的。违规字符应该匹配最后部分和 { 之间的任意数量的空白字符。

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:44:09.730

你需要逃避`{`with `\\`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:44:23.097

你需要`opening curly brace`用两个反斜杠来逃避你的。

```
String pattern = "^(?:.*)\\s*\\{$" 
```

# c - 根据 IP 限制传入的 TCP 连接

> ID：13184349
> 
> 赞同：4
> 
> 时间：2012-11-01T19:43:12.253
> 
> 标签：c, sockets, networking, tcp

C 中的套接字是否提供任何方式来限制基于 IP 的套接字的传入连接数？

例如，为了防止一个客户端 IP 发送垃圾邮件连接，有没有办法限制一个 IP 可以连接到套接字的次数？

或者这样的东西必须定制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:49:49.527

标准套接字 API 中没有任何内容，没有。使用标准 API，服务器代码唯一能做的就是`accept()`客户端连接，检查其 IP，然后在需要时关闭连接。

对于 Microsoft 的 WinSock API，该[`WSAAccept()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741513%28v=vs.85%29.aspx)函数确实有一个回调，在从服务器队列接受连接之前调用该回调。回调函数可以决定接受连接、拒绝连接或将其留在队列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:46:41.777

套接字中没有类似的东西。您需要自定义解决方案，最好考虑在防火墙中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:59:03.977

我觉得您正在谈论的真正意图是限制，即针对特定客户端/连接，在给定时间内仅允许固定数量的数据包。这听起来比允许/禁止更多连接更现实的使用场景。

大多数现代语言都提供某种支持，例如 java 或 c#，但不提供 c。

然而，这里有一个优雅的方法来实现它。我自己已经在生产代码中使用过它。

[实施节流](https://stackoverflow.com/a/668327/986760)

# java - 为 Tomcat 调用的类登录 Tomcat lib

> ID：13184367
> 
> 赞同：0
> 
> 时间：2012-11-01T19:44:43.533
> 
> 标签：java, tomcat, logging

我创建了一个实现 的 Java 类`javax.naming.spi.ObjectFactory`，并且设置了 Tomcat 的上下文 XML 以使用此类而不是默认类。

通常，我们在 webapps 中使用 log4j，但我们还没有将 Tomcat 转换为主要使用 log4j（而且我们对设置它并不特别感兴趣）。

我并不十分关心我们如何做到这一点，或者我们实现了哪个系统（如果有的话），但是我怎样才能让这个类在系统上记录 SOMEWHERE（catalina.out 甚至就足够了）？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:49:58.433

简单的方法是使用 System.out.println()。更复杂和更灵活的方法是使用[slf4j](http://www.slf4j.org/)。Slf4j 很酷，因为底层实现是任何可用的日志系统，包括 log4j。它是由编写 log4j 的人编写的。

# java - JFrame 没有输出？

> ID：13184372
> 
> 赞同：1
> 
> 时间：2012-11-01T19:45:17.360
> 
> 标签：java, arrays, jframe

所以我试图创建一个tictactoe板，但它没有出现任何东西。（有一个主类，但它只是创建一个“GameBoard”）

任何帮助将不胜感激，在此先感谢您。

所以我添加了组件，不敢相信我忘记了，我一定是累了。

但是现在我得到的只是一个红色方块。

```
 public GameBoard() 
    {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setBounds(0, 0, 195, 215);
        frame.setSize(new Dimension (300, 400));
        int count = 1;
        Rectangle board[][] = new Rectangle[3][3];

        for (int row = 0; row < board.length; row++){
            for (int col = 0; col < board[row].length; col++){
                if (count == 2){

                board[row][col] = new Rectangle(1,1,1,1);
               board[row][col].setBackground(Color.RED);
               frame.add(board[row][col]);
               count--;
            } else {board[row][col] = new Rectangle(1,1,1,1);
                    board[row][col].setBackground(Color.BLACK);
                    frame.add(board[row][col]);
                    count++;
                }
            }}
        frame.pack();
        frame.setVisible(true);
}} 
```

矩形类：

```
public class Rectangle extends JComponent  {

    public Rectangle(int x, int y, int w, int h)  {
        super();
        setBounds(x, y, w, h);
        setBackground(Color.black);
    }

    public void paint(Graphics g)  {
        g.setColor( getBackground() );
        g.fillRect(0, 0, getWidth()-1, getHeight()-1);
        paintChildren(g);
   } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:50:01.977

从逻辑上讲，您缺少将板实际添加到 JFrame 的步骤：

```
frame.add(...); 
```

在您的 for 循环中，因此您正在创建 JFrame 和 Rectangles，但从不将矩形添加到您的 JFrame 中。

正如@AmitD 指出的那样， JFrame.add() 不接受矩形，因此您需要编写一个扩展 JComponent 的类以在其`paintComponent()`方法中绘制矩形。

解决显示问题（只看到红色）：

您需要为您的`JFrame`;设置一个布局管理器。我认为`GridLayout`最适合您的情况：

```
...
JFrame frame = new JFrame();
frame.setLayout(new GridLayout(3,3));
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:50:23.753

您创建了一个空的 JFrame，并创建了一堆存储到数组中的矩形，但您从不绘制任何地方，因此框架保持为空。

您需要在 JComponent 上绘制这些矩形（通过覆盖其`paintComponent()`方法），然后将此 JComponent 添加到框架中。

编辑：正如@whiskeyspider 所指出的，标准 Rectangle 类中没有 setBackground() 方法。因此，如果 Rectangle 是您的一个类，并且是 JComponent 的子类，您需要将 Rectangle 的实例添加到框架中。

# javascript - 我可以获取 twitter 引导弹出框的当前状态吗？

> ID：13184375
> 
> 赞同：6
> 
> 时间：2012-11-01T19:45:28.720
> 
> 标签：javascript, jquery, twitter-bootstrap

我目前调用一个脚本来动态地将内容添加到我的弹出框，但是当用户再次单击以关闭它时，我不需要进行此调用。是否有可能获取状态并在可见时关闭它？

这是我到目前为止所拥有的：

```
$('.knownissue').on('click', function() {

    var info = $(this).attr('id').substr(5).split(':');
    var el = $(this);

    // How do I check to see if the popover is visible
    // so I can simply close it and exit?

    $.post('functions/get_known_issues.php?tcid='+info[0]+'&tcdate=' + info[1], function(data) {
        if (data.st) {
            el.attr('data-content', data.issue);
            el.popover('toggle');
        }
    }, "json");

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-14T17:00:54.947

To avoid searching for dynamically inserted markup you can do this:

In Bootstrap 2:

```
var $element = $('.element-you-added-popup-to')
$element.data().popover.tip().hasClass('in')
// Or if you used '.tooltip()' instead of '.popover()'
$element.data().tooltip.tip().hasClass('in') 
```

In Bootstrap 3:

```
$element.data()['bs.popover'].tip().hasClass('in')
$element.data()['bs.tooltip'].tip().hasClass('in') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T02:47:09.743

```
if($('.popover').hasClass('in')){
  // popover is visable
} else {
  // popover is not visable
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-14T08:22:35.277

默认情况下，隐藏和显示的事件在引导弹出窗口中可用。

```
$('#myPopover').on('shown.bs.popover', function () {
  // do something…
})
```

可以使用以下引导弹出框的事件

```
show.bs.popover	
shown.bs.popover
hide.bs.popover	
hidden.bs.popover
```

有关更多详细信息，请参阅 docs [bootstrap popovers](http://getbootstrap.com/javascript/#popovers)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-06T14:30:14.057

对于引导程序 4.x

```
 $('a#aUeberschriftenJBi').click(function() {
    if ($('a#aUeberschriftenJBi').attr('aria-describedby')) {
        // popover is visable
    } else {
        // popover is not visable
        $('a#aUeberschriftenJBi').popover({
            placement: 'bottom',
            title: function() {
                return "Title";
            },
            content: function() {
                return "Content";
            }
        });
    }

    $('a#aUeberschriftenJBi').popover("show");
}); 
```

HTML

```
<a href="#" id="aUeberschriftenJBi" title=""><span><i class="fa fa-sticky-note"></i></span></a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T20:52:56.230

Bootstrap 动态添加和删除弹出框的标记，因此您只需要检查元素是否存在。

如果您转到 Bootstrap 示例页面： http: [//twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)，您可以使用显示“单击以切换弹出窗口”的红色大按钮来切换他们的示例弹出窗口

编写此 jquery 选择器以选择该弹出框元素（如果它存在） $('#popovers').find('h3').eq(5).next().find('.popover')

要检查它的状态（存在与否），请检查返回的元素集的长度是否为 0。

所以按下按钮来切换他们的弹出窗口示例，然后在控制台中运行以下命令：

打开弹出窗口

```
console.log( 
     $('#popovers').find('h3').eq(5).next().find('.popover').length === 0
); // false 
```

关闭弹出窗口

```
console.log( 
    $('#popovers').find('h3').eq(5).next().find('.popover').length === 0
); // true 
```

PS - 希望你能写出更好的选择器，因为你已经知道你需要检查页面上是否存在弹出框

编辑：[链接到 jsfiddle 这里](http://jsfiddle.net/eLjQG/7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-28T06:46:28.397

尝试这个

```
if ($('#elementId').attr('aria-describedby')) {
  alert('Popover is Visible');
  $("#elementId").popover('hide'); // To Hide Popover

}else{
  alert('Popover is Hidden');
  $("#elementId").popover('show'); // To Display Popover
} 
```

# c# - 如何将文件 g.resources 插入程序集

> ID：13184376
> 
> 赞同：1
> 
> 时间：2012-11-01T19:45:30.553
> 
> 标签：c#, wpf, resources, .net-assembly, ildasm

我需要修改一个更改一个资源的程序集。我已经提取了资源并对其进行了修改，但现在我找不到将其再次嵌入到程序集中的方法。我已经尝试过 ildasm，但似乎它需要一个 .res 资源文件，而我只有一个 xxx.g.resources 文件。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:24:25.210

这只是一个想法：也许您可以创建一个新程序集，在其中包含新资源以及您未修改的其他“事物”。也许您可以像提取资源一样提取其他“东西”...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-02T22:22:44.847

将“*.Config”文件的内容添加到“.g.resources”文件的一种方法是将配置文件的“Build Action”属性值更改为“Resource”。

我希望这可以帮助别人。

# vb.net - VB 2010 复选框循环

> ID：13184378
> 
> 赞同：0
> 
> 时间：2012-11-01T19:45:43.547
> 
> 标签：vb.net, string, checkbox

所以我试图让这个权限应用程序运行起来。我被困在我想让字符串 adkey 成为复选框的名称，如“cbo”和 adkey。以便相同的字符串将复选框的名称。我有点生气，把整个东西都抄在这里了，所以有点乱。

```
Dim ADkey As String() =
        {"NoChangingWallpaper", "NoHTMlWallpaper"}
    ' Dim cbo As String = 
    Dim cho As CheckBox
    cho = CType("cbo" & ADkey), CheckBox)
    Dim readvalue = My.Computer.Registry.GetValue(
        "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\ActiveDesktop", ADkey, Nothing)
    'MsgBox("The value is " & CStr(readValue))
    ' Dim cho(ADkey) As CheckBox
    cho.Name = ADkey
    If readvalue = "1" Then
        cho.Checked = True
    Else
        cho.Checked = False
    End If 
```

msgbox 部分用于测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:53:44.977

您应该将所有复选框添加到`Dictionary(Of String, Checkbox)`对象：

```
Dim ADkey As String() =
    {"NoChangingWallpaper", "NoHTMlWallpaper"}

'This code can move to where the checkboxes are first created, as long as you can reach the variable from here
Dim checkboxes As New Dictionary(Of String, Checkbox) From 
  {
     {"NoChangingWallpaper", cboNoChangingWallpaper},
     {"NoHTMlWallpaper", cboNoHTMLWallpaper}
  }

For Each key As String in ADKey.Where(Function(k) checkboxes.ContainsKey(k))
    Dim regvalue As Boolean = (My.Computer.Registry.GetValue(
    "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\ActiveDesktop", key, Nothing)="1")
    Dim box As Checkbox = checkboxes(key)
    box.Name = key
    box.Checked = regvalue
Next Key 
```

当我看到这个时，为了避免保留键的双重记录，我可能会完全删除字符串数组并这样做：

```
'This code can move to where the checkboxes are first created, as long as you can reach the variable from here
Dim checkboxes As New Dictionary(Of String, Checkbox) From 
  {
     {"NoChangingWallpaper", cboNoChangingWallpaper},
     {"NoHTMlWallpaper", cboNoHTMLWallpaper}
  }

For Each key As String in checkboxes.Keys
    Dim regvalue As Boolean = (My.Computer.Registry.GetValue(
"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\ActiveDesktop", key, Nothing)="1")
    Dim box As Checkbox = checkboxes(key)
    box.Name = key
    box.Checked = regvalue
Next Key 
```

您是否想要此版本取决于您是否总是查看所有框，或者您是否只想更新某些框。

# build - Mono 3.0.0 基于 CentOS 6 构建

> ID：13184384
> 
> 赞同：11
> 
> 时间：2012-11-01T19:46:11.210
> 
> 标签：build, mono, centos, rhel, centos6

我最近发现自己需要为 CentOS 6 构建 Mono 3.0，我的基础架构人员要求我尽可能让系统尽可能接近 CentOS（即，如果可能，不要使用第 3 方软件包）。

因为目前我找不到 Mono 3.0 RPM，所以我在 CentOS 6.3 的干净最小安装上完成了从头开始构建它的练习。

可以在 CentOS 6.3 上构建没有外部软件包的 Mono 3.0。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T19:46:11.210

执行 CentOS 6.3 最小安装

```
ifup eth0

yum -y update
yum -y install glib2-devel
yum -y install libpng-devel
yum -y install libjpeg-devel 
yum -y install giflib-devel 
yum -y install libtiff-devel 
yum -y install libexif-devel 
yum -y install libX11-devel 
yum -y install fontconfig-devel 
yum -y install gettext 
yum -y install make 
yum -y install gcc-c++ 
```

`# amusing hack to [fix the mono make file](http://mono.1490590.n4.nabble.com/Can-t-seem-to-compile-gdiplus-from-svn-td1549340.html)`

```
export echo=echo

# build libgdiplus
curl -O http://download.mono-project.com/sources/libgdiplus/libgdiplus-2.10.9.tar.bz2
bunzip2 libgdiplus-2.10.9.tar.bz2
tar xvf libgdiplus-2.10.9.tar
cd libgdiplus-2.10.9
./configure --prefix=/usr/local
make
make install

# build mono
curl -O http://download.mono-project.com/sources/mono/mono-3.0.0.tar.bz2
bunzip2 mono-3.0.0.tar.bz2
tar xvf mono-3.0.0.tar
cd mono-3.0.0
./configure --prefix=/usr/local
make
make install

# tell binfmt how to launch CLR executables
echo ':CLR:M::MZ::/usr/local/bin/mono:' > /proc/sys/fs/binfmt_misc/register 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-10T20:00:49.780

# [Timotheus Pokorra](https://github.com/tpokorra) Mono 存储库

将[tpokorra 存储库](http://download.opensuse.org/repositories/home:/tpokorra:/mono/CentOS_CentOS-6/)与[mono](http://software.opensuse.org/download/package?project=home:tpokorra:mono&package=mono-opt) 3.2.5 一起用于 Centos 6.x（和其他发行版）

## Yum 存储库配置

将文件[mono.repo](http://download.opensuse.org/repositories/home:tpokorra:mono/CentOS_CentOS-6/home:tpokorra:mono.repo)放在包含内容的目录`/etc/yum.repos.d/`中：

```
[home_tpokorra_mono]
name=mono and monodevelop (CentOS_CentOS-6)
type=rpm-md
baseurl=http://download.opensuse.org/repositories/home:/tpokorra:/mono/CentOS_CentOS-6/
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/home:/tpokorra:/mono/CentOS_CentOS-6/repodata/repomd.xml.key
enabled=1 
```

## 安装

```
yum install mono-opt 
```

## 更多的

[http://software.opensuse.org/download/package?project=home:tpokorra:mono&package=mono-opt](http://software.opensuse.org/download/package?project=home:tpokorra:mono&package=mono-opt)

# bash - 杀死兄弟进程

> ID：13184385
> 
> 赞同：0
> 
> 时间：2012-11-01T19:46:11.587
> 
> 标签：bash

我想要一个脚本：

*   触发一个`make 2&>1 | less -R`
*   监听文件夹中的每一个变化（使用`inotifywait -R`）

修改文件夹后，脚本必须终止`less`进程并重新启动。

我不确定执行此操作的正确方法（允许脚本的两个分支并行运行 + 允许监视作业知道作业的 pid `less`，因为后者必须在前台）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:01:44.140

如果您只想在每次更改某些内容时触发自动重新编译，那么您可以尝试以下操作：

```
while inotifywait -qqr /dir/to/watch; do
   make | less
done 
```

我意识到这个解决方案不会在每次重新编译时杀死 less 命令

上面的一个轻微变化是在完成后放少：

```
while inotifywait -qqr /dir/to/watch; do
   make
done | less 
```

此版本将立即触发重新编译（在第一次 make 完成后），但它需要您从 less 中分页浏览所有输出（并且不要用 q 终止它）

这是您可能想要玩的另一个变体。在这个版本中，如果您更改代码，正在进行的 make 将被终止并重新启动。但是，输出不会有屏幕分页（这很难与后台进程结合）：

```
BGPID=0
while inotifywait -qqr /dir/to/watch; do
   [ "$BGPID" -gt 1 ] && kill $BGPID
   (make | tail -f)&
   BGPID=$!
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:02:26.287

而不是像下面这样使用较少的尝试尾巴。

制作命令：

`make 2&>1 /output/file`

和另一个终端中的tail命令：

`tail -f /output/file`

这应该向您显示所有正在发生的变化的实时流。

# c# - Windows Phone 8 地图控件 - 如何获取地图边界

> ID：13184388
> 
> 赞同：2
> 
> 时间：2012-11-01T19:46:15.887
> 
> 标签：c#, .net, xaml, windows-phone-8

我正在使用全新的 Windows Phone 8 地图控件，但遇到了一个问题：我需要获取地图边界的 LocationRectangle，即纬度跨度和经度跨度。

使用 Bing 地图控件，您可以执行以下操作：

```
 LocationRect bounds = map.Bounds; 
```

...但是，这个新控件中似乎没有相关字段。任何人都可以提供帮助，还是我需要对各种缩放级别进行逆向工程并根据中心点、缩放级别和像素高度/宽度进行计算？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T09:52:39.603

您可以使用视口转换方法，例如：

```
GeoCoordinate topLeft = yourMapInstance.ConvertViewportPointToGeoCoordinate(new Point(0, 0));
GeoCoordinate bottomRight = 
yourMapInstance.ConvertViewportPointToGeoCoordinate(new Point(mapSize.Width, mapSize.Height));

return LocationRectangle.CreateBoundingRectangle(new[] { topLeft, bottomRight }); 
```

可能您可以直接使用 mapControl 实例的 renderSize，但要确定运行时的正确尺寸，我建议您监听“SizeChanged”事件。并且检查 mapsize 值不为 0 或 Infinite 可能也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:36:02.563

需要说明的是，如果您已经为 WP7 创建了大型应用程序，您仍然可以在 WP8 中使用原始 Bing 地图（尽管它们已被弃用）。
您可以在此处找到带有 WP8 的 Bing 地图的库：

> C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Libraries

这对您来说是一个可行的解决方案，还是您仍然想切换到新地图？

# php - wkhtmltoimage centos 6错误

> ID：13184394
> 
> 赞同：0
> 
> 时间：2012-11-01T19:46:30.863
> 
> 标签：php, linux, centos, centos6

我试图让[wkhtmltoimage](http://code.google.com/p/wkhtmltopdf/)在我的 CentOS 6 服务器上工作。我已经解压缩了文件，但是当我运行命令时出现错误。

我正在运行的命令是

> wkhtmltoimage-i386 --load-error-handling 忽略[http://www.google.com/](http://www.google.com/) /var/www/vhosts/website.com/httpdocs/img/example.jpg

我得到的错误是

> wkhtmltoimage-i386：加载共享库时出错：libfontconfig.so.1：无法打开共享对象文件：没有这样的文件或目录

我已经学习了许多教程，但运气不佳。我的背景是 Windows 服务器，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:18:06.833

当我使用 wkhtmltoimage-i386 时，我遇到了同样的错误。我开始使用这个版本[http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.11.0_rc1-static-amd64.tar.bz2](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.11.0_rc1-static-amd64.tar.bz2)并且它有效。试试看。

更新：关于这个错误，您可以通过以下命令安装缺少的库：在 CentOs 上：yum install libfontconfig.so.1

或其他： apt-get install libfontconfig.so.1

# css - 在 GWT 中使用 CSS 的推荐方法

> ID：13184400
> 
> 赞同：0
> 
> 时间：2012-11-01T19:47:08.157
> 
> 标签：css, gwt

在大多数项目中，我都包含一个 reset-css，然后从头开始使用我自己的 CSS 样式。

我想 GWT 可能会有所不同。推荐的方法是什么？

使用提供的 3 个主题之一并根据需要覆盖？从另一个主题开始？

你觉得什么作品最好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:04:46.763

我是[gwtbootstrap.github.com](http://gwtbootstrap.github.com)的忠实粉丝，它是非常流行的 Twitter Bootstrap 样式和小部件的一个端口。如果您愿意，可以插入修改后的引导主题。

一些优点：

*   如果您技术精湛，但在制作漂亮的用户界面方面很糟糕，那么现在可以实现真正专业的外观。

*   强大的 Twitter 引导社区

*   小部件/样式非常熟悉，最终用户会有宾至如归的感觉

*   易于定制，主题甚至可商用

这当然是 GWT 的一个端口并且有点滞后.. 但是开发人员非常敏感和乐于助人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:52:03.483

I recommend to start with one of the built-in themes. There are a lot of tiny little details you will have to account for (and make sure they work in all browsers) if you start from scratch.

After that the key decision is whether to use an external CSS file, a more traditional approach, or use CSS Resources: [https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource)

CSS Resources offer many nice features, like conditional CSS, runtime substitutions, obfuscation of class names, etc. An external CSS file maybe easier to work with.

For a large project, or any project with multiple developers, I would recommend CSS resources.

# java - 在 ant 中调试构建期间运行的 Dexguard？

> ID：13184401
> 
> 赞同：1
> 
> 时间：2012-11-01T19:47:13.937
> 
> 标签：java, android, ant, proguard

这实际上是一个两部分（让我知道我是否应该拆分问题）。我使用 Intellij 作为 IDE。如果我从中运行，构建工作完全正常。然而，当我使用 ant 时，事情开始变得混乱。

在为我的应用程序编写自动化测试的过程中，我发现了两件事：首先，dexguard 在我`ant clean debug`. 其次，当我这样做时，我收到以下错误，但构建“成功”完成：

> [dexguard] 转换时出现意外错误：
> [dexguard] Class = [com/framework/notification/NotificationDetailBuilder]
> [dexguard] Method = [getScheduledNotificationDetail()Lcom/framework/base/notification/NotificationDetail;]
> [dexguard] Exception = [java. lang.IllegalStateException] （负变量 v-1 用于指令 [iget v-1, v0, field_12165]）
> [dexguard] at com.saikoa.dexguard.fS.b(dexGuard:1219)
> etc. etc.

所以首先，我做了什么愚蠢的事情来让 dexguard 在调试期间运行。
其次，这个错误到底意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:11:04.570

在标准的 Android 构建过程中，ProGuard 仅适用于发布构建。DexGuard 在构建过程中集成得更紧密；它适用于调试版本和发布版本。您可以通过 saikoa.com 与我联系以调查您收到的信息。第一步是确保您使用的是最新版本的 DexGuard。

（我是 ProGuard 和 DexGuard 的开发者）

# c# - 条件松散的通用类型

> ID：13184402
> 
> 赞同：0
> 
> 时间：2012-11-01T19:47:16.690
> 
> 标签：c#, generics

我正在构建一个支持基于通用类型数据的插件的应用程序。问题是，我似乎无法指定允许我需要通过的所有内容的通用条件，这是代码的详细信息：

```
abstract public class PluginObject<ManagedType>
abstract public class Plugin<EditedType> where EditedType : PluginObject<Object> 
```

这`<Object>`就是问题所在，当我创建我的类和插件时，我将创建模型来处理插件的数据方面。为此，我的第一个插件有很多项目要管理，我无法真正创建所有项目的子类，所以我最终创建了一个`IOrderObject`不包含任何内容的接口。

因此，我最终得到：

1.  `SynchronizableObject`
2.  `TripRoute`
3.  `TripRouteDirection`
4.  `ITripObject`（接口在#2 和#3 中实现）

这样我可以做到：

```
public class RoutePluginObject<ManagedType> : Activis.Framework.Admin.PluginObject<ManagedType>
public class RouteManagementPlugin : Activis.Framework.Admin.Plugin<RoutePluginObject<Transdev.Limocar.iTripObject>> 
```

它被接受了，但问题是它`ITripObject`是一个接口而不是一个对象，所以它可以转换为`PluginObject<Object>`.

所以我的问题是，有没有办法指定一个允许类似这样的条件：

```
abstract public class Plugin<EditedType> where EditedType : PluginObject<Any> 
```

这样，接口或对象可以由我并不真正关心这种情况提供；我想要的只是我`Plugin`的 's`editedtype`是`PluginObject`任何可能的。

* * *

**编辑**

具有更好的协方​​差结果但仍然出现错误，我在您的示例（Matias）中没有看到任何关于 PluginObject 继承的信息，这就是我所做的：

```
public interface IPluginObject<out ManagedType>
abstract public class Plugin<EditedType> where EditedType : IPluginObject<EditedType>
public class RoutePluginObject : Activis.Framework.Admin.IPluginObject<TripRoute>
public class RouteManagementPlugin : Activis.Framework.Admin.Plugin<RoutePluginObject> 
```

但是我仍然在 RouteManagementPlugin 上遇到错误：

> 类型“Transdev.Limocar.Admin.RoutePluginObject”不能用作泛型类型或方法“Activis.Framework.Admin.Plugin”中的类型参数“EditedType”。没有从“Transdev.Limocar.Admin.RoutePluginObject”到“Activis.Framework.Admin.IPluginObject”的隐式引用转换

除非我误解了协方差（可能是这种情况），否则我似乎清楚地遵循了您的示例，但仍然无法正常工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:52:49.863

您只需要第二个通用参数：

```
abstract public class PluginObject<ManagedType> {}
abstract public class Plugin<EditedType, OtherType> where EditedType : PluginObject<OtherType> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:20:40.120

你需要**协方差**。

也就是说，泛型参数可以*向下转换*。

协变和逆变只能用于*接口*和*委托*泛型参数。

在您的情况下，您应该`PluginObject`作为接口实现：

```
public interface IPluginObject<out T> 
```

这将使您的代码能够这样做：

```
public abstract class Plugin<TEdited> where TEdited : IPluginObject<TEdited> 
```

归根结底，假设您有一个类型`Person`和一个派生类型`Employee`。`Person`实现`IPluginObject<out T>`。然后，由于协方差，下一个代码是有效的：

```
IPluginObject<object> myPluginObject = new Employee(); 
```

最后，当然，您可以这样做：

```
public class MyPlugin : Plugin<Employee>
{
} 
```

这是你要找的吗？

查看此 MSDN 文章以获取有关此主题的更多详细信息：http: [//msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

# ruby-on-rails - 'rake db:seed' 可以告诉你它阻塞在哪条记录上吗？

> ID：13184406
> 
> 赞同：1
> 
> 时间：2012-11-01T19:47:32.273
> 
> 标签：ruby-on-rails, ruby

播种数据时，有时会收到如下错误：

```
Owner(#70279918514200) expected, got String(#70279913263500) 
```

Rake 是否有可能告诉我它窒息的记录是什么？

编辑：

这有更多关于我正在寻找的信息：

我有一个平面文件，它指示我需要的数据。该文件是从一个未经验证的数据库创建的，该数据库对 Proctor (and|y|avec|gen) Gamble 等具有许多不同的拼写。我几乎可以翻译所有这些内容，但也有一些从裂缝中溜走，仍然给我带来麻烦。当我运行时，是否可以从 rake 中看到平面文件的哪一行

```
flat_file.each_line 
```

惹麻烦了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:49:26.643

尝试运行`rake db:seed --trace`以查看`seed.rb`文件的哪一行失败。

**编辑＃1：** 现在我知道您正在使用`each_line`，您可能只需要手动计数以确定行号。

```
line_count = 0
flat_file.each_line do |line|
  begin
    line_count += 1
    # code for handling `line` goes here
  rescue => e
    puts "Error happened on line #{line_count}: #{e}"
  end
end 
```

**编辑＃2：**如果您正在加载完整文件而不是从其源中流式传输，您还可以摆脱手动`line_count`变量，否则您必须通过[String#lines](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-lines)方法的一些帮助来跟踪。

```
file_contents.lines.each_with_index do |line, line_count|
  begin
    # code for handling `line` goes here
  rescue => e
    puts "Error happened on line #{line_count}: #{e}"
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:11:36.427

您应该在加载脚本中捕获错误并使用您需要的信息抛出一个新错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:24:31.780

你可以打电话给.valid？在创建对象之前，在您的对象上打印，如果失败，则打印出错误消息和相关记录的任何其他属性，以供以后查看。

# deployment - 我们如何有效地将控制台应用程序部署到数百个亚马逊 EC2 实例？

> ID：13184407
> 
> 赞同：3
> 
> 时间：2012-11-01T19:47:34.190
> 
> 标签：deployment, amazon-ec2

我目前正在将一个小型 C# 控制台应用程序部署到 200 个 Amazon EC2 实例。每当代码更新时，我现在要做的是终止所有实例，编译代码并将可执行文件复制到以前的 AMI 映像，然后从新的 AMI 映像再次创建 200 个实例。我认为这确实是非常低效的，我想找到一种更好的方法来做到这一点。如何将应用程序快速部署到这些 EC2 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:52:37.903

您可能想考虑使用平台即服务解决方案。PaaS 将允许您将编译后的应用程序提交给 PaaS，并让它启动机器并在它们上设置您的代码。PaaS 还可以为您提供额外的功能，例如监控、跨云支持和动态更新应用程序。

这里提到了几个 PaaS 供应商：[寻找 PaaS 供应商建议](https://stackoverflow.com/questions/9542784/looking-for-paas-providers-recommendations)

免责声明：我为[Cloudify](http://www.cloudifysource.org)工作，这是一个开源 PaaS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T06:50:54.990

当您发布新版本时，您可以按如下方式优化该过程：编译您的应用程序并将其复制到正在运行的实例（参考）上的某个位置。根据该参考，仅使用廉价的内部带宽将应用程序部署到所有正在运行的实例。您可以使用将安装在参考实例上的部署工具自动执行此过程。[例如， Kwatee](http://Www.kwatee.net)（我是作者）是一个免费的工具，它轻量级且易于配置，具有针对 EC2 的特定功能的 Web 界面。要在 Windows 环境中使用它，您需要使用 sshd 服务器设置目标实例，您只需在 AMI 中配置一次

# twitter-bootstrap - Bootstrap：附加导航阻止滚动到部分标题

> ID：13184409
> 
> 赞同：0
> 
> 时间：2012-11-01T19:47:41.490
> 
> 标签：twitter-bootstrap, navigation, scrollto

我有一个带有滚动间谍（我从引导程序中获取）的侧滚动导航，并且一切正常，除了滚动到时附加导航覆盖了部分标题。

我在 scroll-spy.js 中有一个 75 的偏移量，但我不确定如何将内容向下推或告诉滚动集中在每个部分的实际标题上方，这样它们就不会被掩盖。

你可以在“url has been removed”看到我在说什么

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:30:04.257

将顶部填充添加到`<section>`导航链接所针对的元素。

在您的情况下，您可以将其添加到您的样式表中：

```
section { padding-top: 30px; } 
```

# java - 友好的 URL 映射问题 - Java Spring

> ID：13184411
> 
> 赞同：1
> 
> 时间：2012-11-01T19:47:50.443
> 
> 标签：java, spring, spring-mvc, mapping, friendly-url

我在 web.xml 上遇到错误，所有页面都显示为 404，可能有根路径，但我无法确定它的设置位置等。

这是我当前的 web.xml

 `````
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring3MVC</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
              </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/*</url-pattern>

  </servlet-mapping>
</web-app> 
````  `我的监听控制器是这样的

 `````
/*
 * User
*/
@RequestMapping(value={"/user/{id}"}, method=RequestMethod.GET)
public ModelAndView profileDisplay(
        HttpServletRequest request, 
        HttpServletResponse response,
        @RequestParam(value="id", required=false) String id
) throws UnknownHostException, MongoException {
    ServiceSerlvet.appendSesssion(request);
    //get search ALL users
    BasicDBObject searchQuery = new BasicDBObject();
        searchQuery.put("_id", new ObjectId(id));
    List<DBObject> searchResponse = PersonController.searchUsers(searchQuery);      

    //System.out.println("response from search user method: "+searchResponse);

        return new ModelAndView("user", "people", searchResponse);
} 
````  `这是当前出现的错误。为什么它没有映射，我该如何解决这个问题？

```
INFO: Server startup in 5904 ms
01-Nov-2012 19:40:21 org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/springApp21] in DispatcherServlet with name 'spring'
01-Nov-2012 19:40:22 org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver handleNoSuchRequestHandlingMethod
WARNING: No matching handler method found for servlet request: path '/user', method 'GET', parameters map['id' -> array<String>['4fa6eddc0234964172522248']]
01-Nov-2012 19:40:24 org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver handleNoSuchRequestHandlingMethod
WARNING: No matching handler method found for servlet request: path '/user', method 'GET', parameters map['id' -> array<String>['4fa6eddc0234964172522248']] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:31:37.053

我事先回答了你的一个问题。我现在可以访问我的一个 spring 应用程序。这是一个更好的配置。

请注意对 web.xml 的更改，我很抱歉，但映射到 /* 会导致您的所有请求都由调度程序解决。从某种意义上说，您创建了一个循环，您的初始映射将由调度程序转发到控制器，然后控制器将使用视图解析器映射您的请求应转发到的位置。映射到 /* 会导致视图解析器映射由调度程序处理。

更改为 / 会导致所有未映射的 url 由调度程序处理，因此您的初始映射由调度程序处理，调度程序将其发送到控制器，并且由您的 viewresolver 创建的映射将映射到 .jsp 导致它不会被拾取由调度员上来。我很抱歉。

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring3MVC</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
              </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>

  </servlet-mapping>
</web-app> 
```

**spring-config.xml**（必须更改组件扫描）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->   
    <annotation-driven/>

        <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources location="/resources/" mapping="/resources/**"/> 

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/"/>
        <beans:property name="suffix" value=".jsp"/>
    </beans:bean>

    <context:component-scan base-package="package.with.controllers" />

</beans:beans> 
```

**控制器**

```
@RequestMapping(value={"/user/{id}"}, method=RequestMethod.GET)
public ModelAndView profileDisplay(
        HttpServletRequest request, 
        HttpServletResponse response,
        @RequestParam(value="id", required=false) String id
) throws UnknownHostException, MongoException {
    ServiceSerlvet.appendSesssion(request);
    //get search ALL users
    BasicDBObject searchQuery = new BasicDBObject();
        searchQuery.put("_id", new ObjectId(id));
    List<DBObject> searchResponse = PersonController.searchUsers(searchQuery);      

    //System.out.println("response from search user method: "+searchResponse);

        //This should display "WEB-INF/views/user.jsp" you may need to adjust.
        return new ModelAndView("user", "people", searchResponse);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:53:13.900

谢谢Kbm回到我身边。我已经更改了我的 web.xml，并且一般映射已经解决。我遇到了你提到的 css、js、图像文件也通过的问题。

我试图添加拦截网址，但有些东西仍然无法正常工作。http 在 web.xml 中以红色突出显示。当我在日食中将鼠标悬停在它上面时，它表示

> cvc-complex-type.2.4.a：发现以元素“http”开头的无效内容。'{"http://java.sun.com/xml/ns/javaee":description, "http://java.sun.com/xml/ns/javaee":display-name, "http:// /java.sun.com/xml/ns/javaee":icon, "http://java.sun.com/xml/ns/javaee":distributable, "http://java.sun.com/xml/ns /javaee":context-param, "http://java.sun.com/xml/ns/javaee":filter, "http://java.sun.com/xml/ns/javaee":filter-mapping, “http://java.sun.com/xml/ns/javaee”：监听器，“http://java.sun.com/xml/ns/javaee”：servlet，“http://java.sun.com /xml/ns/javaee":servlet-mapping, "http://java.sun.com/xml/ns/javaee":session-config, "http://java.sun.com/xml/ns/javaee ":mime-mapping, "http://java.sun.

web.xml

 `````
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring3MVC</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
              </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <http auto-config='true'>
   <intercept-url pattern="/css/**" filters="none"  />
    <intercept-url pattern="/images/**" filters="none" />
    <intercept-url pattern="/js/**" filters="none" />
  </http>
</web-app> 
`````````

# xml - UML 到 XML 表示

> ID：13184412
> 
> 赞同：11
> 
> 时间：2012-11-01T19:47:54.403
> 
> 标签：xml, eclipse, uml, papyrus

我使用 Eclipse 建模工具 Papyrus 构建了一个类图。如何将 UML 图导出为 XML 格式以查看 XML 中表示的类、属性和泛化等关系？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T16:16:01.910

现在我解决了我的问题并将其发布为一系列步骤

![第1步](../Images/be2b06120e6c07670096286d66470457.png) ![第2步](../Images/4bcf0bd76356ffe61e88ed9692eb416f.png) ![第三步](../Images/aef41fd2b55915dc3edd8d7905456fc3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:56:40.617

根据 Papyrus 网站：

[http://www.papyrusuml.org/scripts/home/publigen/content/templates/show.asp?P=130&L=EN&ITEMID=4](http://www.papyrusuml.org/scripts/home/publigen/content/templates/show.asp?P=130&L=EN&ITEMID=4)

他们确实有：“完全尊重 DI2（图表交换）标准”见

[http://www.omg.org/cgi-bin/doc?formal/2006-04-04.pdf](http://www.omg.org/cgi-bin/doc?formal/2006-04-04.pdf)

您可以在以下位置找到一个示例：

*   图交换：[https ://speedy.supelec.fr/Papyrus/svn/Papyrus/examples/UML2JAVA/HelloWorld/releases/1.0.0/HelloWorld/mdl/HelloWorld.di2](https://speedy.supelec.fr/Papyrus/svn/Papyrus/examples/UML2JAVA/HelloWorld/releases/1.0.0/HelloWorld/mdl/HelloWorld.di2)

*   XMI 导出：[https ://speedy.supelec.fr/Papyrus/svn/Papyrus/examples/UML2JAVA/HelloWorld/releases/1.0.0/HelloWorld/mdl/HelloWorld.uml](https://speedy.supelec.fr/Papyrus/svn/Papyrus/examples/UML2JAVA/HelloWorld/releases/1.0.0/HelloWorld/mdl/HelloWorld.uml)

因为我自己不使用 Papyrus，而且我浏览的教程没有任何关于如何实际进行导出的提示，所以这些是我开始的两分钱......

# python - 如何在 Python 中获取 %APPDATA% 目录的路径？

> ID：13184414
> 
> 赞同：75
> 
> 时间：2012-11-01T19:48:02.650
> 
> 标签：python, appdata

如何`%APPDATA%`在 Python 中获取目录的路径？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-11-01T19:52:40.080

```
import os
print os.getenv('APPDATA') 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-09-27T10:01:14.713

您可以使用[os.path.expandvars(path)](https://docs.python.org/3/library/os.path.html#os.path.expandvars)：

> 返回扩展环境变量的参数。形式的子字符串`$name`或`${name}`替换为环境变量名称的值。格式错误的变量名称和对不存在变量的引用保持不变。
> 
> 在 Windows 上，`%name%`除了`$name`和之外，还支持扩展`${name}`。

当将扩展值与其他路径组件组合时，这很方便。

例子：

```
from os import path

sendto_dir = path.expandvars(r'%APPDATA%\Microsoft\Windows\SendTo')
dumps_dir = path.expandvars(r'%LOCALAPPDATA%\CrashDumps') 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2021-02-12T10:15:28.133

尽管该问题明确询问了 Windows 特定`%APPDATA%`目录，但也许您最终在这里寻找一种跨平台解决方案来获取*当前用户的应用程序数据目录，该目录*因操作系统而异。

从 Python 3.10 开始，有点令人惊讶的是，没有找到这个目录的内置函数。但是，有第三方包，其中最受欢迎的似乎是[appdirs](https://pypi.org/project/appdirs/)，它提供了检索路径的功能，例如：

*   用户数据目录 ( `user_data_dir`)
*   用户配置目录 ( `user_config_dir`)
*   用户缓存目录 ( `user_cache_dir`)
*   站点数据目录 ( `site_data_dir`)
*   站点配置目录 ( `site_config_dir`)
*   用户日志目录 ( `user_log_dir`)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-02T18:40:19.140

您可以尝试这样做：

```
import os
path = os.getenv('APPDATA')
array = os.listdir(path)
print array 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-19T12:53:39.827

您可以使用名为`appdata`. 它的开发是为了访问您的应用程序的不同路径，包括应用程序数据文件夹。安装它：

```
pip install appdata 
```

之后你可以这样使用它：

```
from appdata import AppDataPaths
app_paths = AppDataPaths()
app_paths.app_data_path  # for your app data path
app_paths.logs_path  # for logs folder path for your application 
```

它不仅允许获取应用程序数据文件夹和日志文件夹，还具有其他管理路径的功能，例如管理配置文件路径。它是可定制的。

链接：

1.  [阅读文档](https://appdata.readthedocs.io/en/latest/index.html)- 文档。
2.  [GitHub](https://github.com/VoIlAlex/appdata) - 源代码。
3.  [PyPI](https://pypi.org/project/appdata/) - 包管理器 (pip)。

# mysql - SQL中的手动排序

> ID：13184419
> 
> 赞同：3
> 
> 时间：2012-11-01T19:48:27.480
> 
> 标签：mysql, sql

如果我有一张桌子...

```
ThingName | ThingCategory
-------------------------
thing 1   | cat1
thing 2   | cat2
thing 3   | cat3 
```

我将如何选择它们按 first `cat2`, then `cat1`, then排序`cat3`

这甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T19:51:29.260

order 子句中的 switch 是一种仅使用代码即可到达那里的方法：

```
select *
from Things
order by case
    when ThingCategory = 'cat2' then 1
    when ThingCategory = 'cat1' then 2
    when ThingCategory = 'cat3' then 3
    else 4 -- Might want the default case, too
end 
```

但是，这种类型的功能通常由数据而不是代码更好地处理。例如，如果您有一个`ThingCategories`表，该表可以有一个`Ordinal`整数列。此时，您可以简单地进行以下查询：

```
select t.*
from Things t
    join ThingCategories c on t.ThingCategory = c.ThingCategory
order by c.Ordinal 
```

这样您就不必在代码中维护文字（祝您好运），并且用户可以通过简单地更新表中的序数来更改顺序（无需打扰您）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:51:10.847

这是完全可能的。只需通过比较订购：

```
ORDER BY
  ThingCategory = "cat2" DESC,
  ThingCategory = "cat1" DESC,
  ThingCategory = "cat3" DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:52:23.940

你可以这样做

```
SELECT ThingName , ThingCategory
    FROM yourtabe
    ORDER BY 
     CASE
        WHEN ThingCategory = 'cat2' THEN 1
        WHEN ThingCategory = 'cat1' THEN 2
        WHEN ThingCategory = 'cat3' THEN 3
    END 
```

# javascript - 括号内的转义引号

> ID：13184420
> 
> 赞同：1
> 
> 时间：2012-11-01T19:48:28.373
> 
> 标签：javascript, escaping

我正在使用`JSON.stringify`创建以下内容：

```
{"id":"3172043","Img":"../assets/7/14/NPCgunnerStanding.png","ImgWidth":145,"ImgHeight":210,"Width":"145","Height":"210","Left":649,"Top":165,"Parent":"3172015","MouseOver":"label({HTML: "Gunner"})","Idle":"animate({ rate:100 , pause:4000 })topImage("../assets/img/npc-exclamation3.gif")","MouseOut":"label({})","Proximity":"","Click":"modal({title:"Gunner",iframe: "../assets/7/modals/BEFGunner.php"})"} 
```

并将其存储在我的数据库中。这部分工作正常，但是当我再次查找时，由于括号内的引号，我得到了对象的错误。

我怎样才能逃避这些报价？

我开始为检查这些调用的调用组合一个替换函数`stringify`，但它开始看起来很混乱，我希望想出一种方法来使用正则表达式或其他东西一次完成所有操作。

请协助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:52:06.867

你至少需要逃跑

*   `"`->`\"`
*   `\\`->`\\`
*   铬->`\r`
*   低频->`\n`

要在 JS 中做到这一点，试试这个

```
var charToJson = { '"': '\\"', '\\': '\\\\', '\r': '\\r', '\n': '\\n' };

var JSONStringLiteral = '"'
    + myPlainTextString.replace(/[\\\"\r\n]/g, function (c) { return charToJson[c]; })
    + '"'; 
```

或者，如果您在现代浏览器上运行，`JSON.stringify`应该为您执行此操作。

```
JSON.stringify('{"foo":"bar"}') === '"{\\"foo\\":\\"bar\\"}"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:51:20.503

逃脱双引号..

```
"label({HTML: \"Gunner\"})" 
```

或者在里面使用单引号

```
 "label({HTML: 'Gunner'})" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:55:19.103

`\`像这样使用：

```
{"key":"text (\"blabla\")"} 
```

或者为了更简洁的代码：

```
{'key':'text ("blabla")'} 
```

但是如果你同时拥有`"`and ，你就别无选择`'`，比如：

```
{"key":"text 'blabla' \"otherblabla\""} 
```

# django - ImportError：没有名为模型 django 的模块

> ID：13184424
> 
> 赞同：0
> 
> 时间：2012-11-01T19:48:55.060
> 
> 标签：django, django-models, django-piston

尝试使用 django-piston (v 0.2.3) 创建 API 应用程序并在基本 url.py 中包含应用程序命名空间

```
url(r'^news/', include('news.urls')),
url(r'^api/', include('api.urls')), 
```

我所有的应用程序不再导入模型，我收到以下错误...

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/api/story

Django Version: 1.4.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'django_extensions',
 'debug_toolbar',
 'polls',
 'news',
 'api')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  89\.                     response = middleware_method(request)
File "/Library/Python/2.7/site-packages/django/middleware/common.py" in process_request
  67\.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in is_valid_path
  531\.         resolve(path, urlconf)
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in resolve
  420\.     return get_resolver(urlconf).resolve(path)
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/Library/Python/2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/Users/digitalandmedia2/Documents/MYCOMPANY/django_prototype/mysite/urls.py" in <module>
  13\.     url(r'^api/', include('api.urls')),
File "/Library/Python/2.7/site-packages/django/conf/urls/__init__.py" in include
  24\.         urlconf_module = import_module(urlconf_module)
File "/Library/Python/2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/Users/digitalandmedia2/Documents/MYCOMPANY/django_prototype/api/urls.py" in <module>
  5\. from api.handlers import StoryHandler
File "/Users/digitalandmedia2/Documents/MYCOMPANY/django_prototype/api/handlers.py" in <module>
  3\. from news.models import Story

Exception Type: ImportError at /api/story
Exception Value: No module named models 
```

这是 api 应用程序的 url.py ......

```
from django.conf.urls.defaults import *
from django.conf import settings
from piston.resource import Resource

from api.handlers import StoryHandler

story_handler = Resource(StoryHandler)

#look into grouping urls

urlpatterns = patterns('',
   url(r'^story$', story_handler),
) 
```

这是处理程序...

```
from piston.handler import BaseHandler

from news.models import Story

class StoryHandler(BaseHandler):
    allowed_methods = ('GET',)
    model = Story

    def read(self, request):
        """
        Returns a story lineup

        """
        return Story.objects.all().order_by('-pub_date')[:5] 
```

目录结构...

```
manage.py
/admin
  ...
/api
  handlers.py
  urls.py
  ...
/news
   models.py
   views.py
   urls.py
/mysite
  settings.py
  urls.py
  .... 
```

# image - 为什么我在 matlab 中用这个短代码没有得到蓝色、绿色或红色的通道？

> ID：13184425
> 
> 赞同：2
> 
> 时间：2012-11-01T19:48:57.913
> 
> 标签：image, matlab, image-processing

```
rgb = imread('peppers.png');
imshow(rgb(:,:,1)); 
```

当我把这个图像是灰色的，而不是绿色或蓝色或红色。这是为什么？
难道我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:55:02.467

图像是灰色的，因为您只查看一种颜色的值，MATLAB 看到一种颜色的值，但它无法知道它是*什么*颜色，这就是它显示灰色的原因。

例如，值 154 是什么颜色？当您仅将值矩阵传递给`imshow`它时，它将以灰度显示。

`imshow(rgb(:,:,1)); %Shows the values of the red component of the image in grey`

```
rgb = imread('peppers.png');
r = rgb;
r(:,:,2:3) = 0; % The red component without the other components
g = rgb;
g(:,:,1:2:3) = 0; % The green component without the other components
b = rgb;
b(:,:,1:2) = 0; % The blue component without the other components
figure();
imshow(r);
figure();
imshow(g);
figure();
imshow(b); 
```

执行上述操作将使您能够以自己的颜色值查看颜色大小的表示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T20:10:14.707

如果只想显示一个颜色通道，请将其他颜色通道设置为零：

```
peppers = imread('peppers.png');
onlyred_peppers = peppers;
onlyred_peppers(:,:,2:3)=0;
imshow(onlyred_peppers); 
```

![在此处输入图像描述](../Images/674160e450d40934bafe3da79fbbeb8b.png)

如果你`imshow`只喂食`peppers(:,:,1)`，你只是给它一个`NxMx1`矩阵，它被 imshow 解释为灰度，见[这里](http://www.mathworks.nl/help/images/ref/imshow.html)。

如果你真的想要，你可以更改颜色图以将灰度图像更改为红色：

```
imshow(peppers(:,:,1));
cm_red = [linspace(0,1,256)' zeros(256,2)];
colormap(cm_red); 
```

这将为您提供与上面相同的图像。

如果您还想缩放您加载的图像中的颜色范围以使用完整的可用范围（0-1 / 0-255），您可以这样做：

```
red_scaled_peppers = peppers(:,:,1);
red_scaled_peppers = double(red_scaled_peppers)/double(max(red_scaled_peppers(:)));
imshow(red_scaled_peppers);
colormap([linspace(0,1,256)' zeros(256,2)]); 
```

这没有什么区别，因为在这种情况下，红色通道颜色跨度已经达到最大值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:55:07.377

[RGB](http://en.wikipedia.org/wiki/RGB_color_model)颜色模型通过按一定比例“混合”红色、绿色和蓝色来表示颜色。您只需要知道颜色由 3 个数字表示。

因此，您的`rgb`图像由 3 个矩阵表示，其中`rgb(:,:,1)`表示红色层。现在，如果你看一下，`rgb(:,:,1)`你会看到一堆数字（可能在 0 - 255 或 0 - 1 之间）。

所以 element`rgb(i,j,1)`代表像素处的红色分量`(i,j)`。因此，显示矩阵`rgb(:,:,1)`仅显示具有一堆值的矩阵，这些值显示为灰度（其中 0 = 黑色，255 = 白色）。

# django - 登录有时无法跨 django 中的选项卡/窗口工作

> ID：13184427
> 
> 赞同：2
> 
> 时间：2012-11-01T19:49:01.167
> 
> 标签：django, flash

我希望从辅助窗口登录到基于 django 的网站。即我有一个连接到 django 服务器的 flash 文件。在 Flash 文件中选择登录时，它会打开另一个窗口（即 Facebook 登录弹出窗口）。基于Facebook客户端的登录流程用于登录用户，并将从中获取的user_id发送到django服务器进行识别和登录。我在服务器上验证了现阶段django.contrib.auth的身份验证和登录功能被调用并且 user.is_authenticated() 返回 True。

但是在包含 Flash 文件的原始窗口中的客户端，用户有时仍然是 AnonymouseUser，即未登录。在其他时候，用户被正确识别。

在检查当前会话的数据库条目时，我看到当用户没有登录时，存在两个会话，而当用户登录时只有一个会话。

我不确定为什么会创建一个额外的会话以及如何解决这个问题。

注意 - 我正在使用自定义身份验证后端。

**更新** 我深入研究了 django 系统，看看发生了什么。Django 有一种机制可以在维护数据的同时更改会话的密钥。在我的情况下发生的是会话密钥的更改发生了两次。一旦在登录过程中按预期发生。但紧随其后，另一个请求会导致会话密钥发生变化。这个请求不是我在我的客户端代码中提出的。似乎请求是针对 /favicon.ico 不确定这是从哪里来的。任何帮助表示赞赏。

**更新 2** 它似乎与 favicon.ico 有关 现在我在根目录下服务它，在几次刷新后一切正常。我认为问题发生在之前，因为浏览器对 favicon 的请求在会话失败时弄乱了会话。在确认并关闭此问题之前，我将进行更多测试。

**更新 3** 未解决。如果有人能指出我正确的方向，我将不胜感激。在那之前，我会看看是否可以更改登录流程以绕过此机制。

**更新 4** 所以在经历了一些堆栈跟踪（如果需要我可以分享）之后，我意识到了以下几点。由于 Django 在登录用户时更改了会话 ID，因此它会创建一个会话 ID 产生两个会话 ID 的情况，如下所示。请求 1 - 导致登录的 ajax 请求。此请求具有 django 先前提供的会话密钥，例如 key1。作为响应，服务器发回一个新的会话密钥，比如 key2，同时从其内存中删除 key1（在我的情况下是数据库）请求 2 - 这是浏览器在请求 1 之后对 favicon.ico 发出的隐式请求。（您可能知道这个请求是由浏览器发出的，我无法控制它）这个请求还带有 sam 原始密钥，即 key1。由于这个键在 Django 的内存中不可用，它创建一个新键 key3 并在响应中发回。

结果，所有进一步的请求都是用 key3 发出的，django 用一个新的会话来识别它，并且用 key2 存储的登录状态会丢失。

我不确定这是否是 Django 中的错误，或者这是预期的行为。但是，如果这是一种预期的行为，那么当任何客户端在等待先前的响应之前发出多个 ajax 请求并触发键更改时，它将产生问题。

话虽如此，我最初的问题仍然存在，如果找到解决方案，我将发布解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:10:25.717

我现在申请的解决方案是对登录 url 进行多次调用，截至目前 2 次。这意味着如果事情在更新 4 中按上述说明进行，则第二个登录请求将使用 key3 并接收 key4。但是由于我的代码或浏览器没有其他并发请求，因此该密钥将保留并且用户将始终登录。经过 2 天的测试，到目前为止似乎工作正常。

但是我的解决方案是一种解决方法，我仍然想知道这是 django 中的错误还是我的代码逻辑有问题。

# php - 跨类 PDO 不执行

> ID：13184430
> 
> 赞同：1
> 
> 时间：2012-11-01T19:49:14.347
> 
> 标签：php, mysql, pdo

我正在重新处理我的所有 mysql_* 和 mysqli 连接以使用 PDO，但我似乎连基础知识都没有。我有两个文件：一个创建连接并将其返回，另一个将连接用于我认为必要的任何目的。但是，由于某种原因，我无法让连接正确返回以供使用。如果我运行任何 PDO 函数（查询、准备等），我会收到 500 的服务器响应，并且没有错误消息。但是，我确实知道，如果我在同一个函数中创建连接并查询所有内容，那么一切都是笨拙的。我假设这很简单，所以也许新鲜的眼睛可以帮助我。

**db_connect.php（形成连接）：**

```
class db_connect {

    function __construct() {}       
    function __destruct() {}

    public function connect() {
        require_once 'db_info.php';
        try{
            $dbh = new PDO('mysql:host='.DB_HOST.';dbname='.DB_DATABASE, DB_USER, DB_PASSWORD);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        } catch (PDOException $e) {
            echo 'Connection Failed: ' . $e->getMessage();
        }
        return $dbh;
    }

    public function close() {
        $dbh = null;
    }
} 
```

**operations.php（利用连接）：**

```
class operations {

    private $dbh;       

    function __construct() {
        require_once 'db_connect.php';
        $this->dbh = new db_connect();
        $this->dbh->connect();
    }

    function runQuery() {
        // causes 500 error, no logs:
        $stmt = $dbh->query("SELECT * FROM myTable");
    }
} 
```

我确实四处寻找一些答案，但我找到的解决方案都不适合我。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:00:13.537

您实际上是在丢弃您的 PDO 对象。你打电话时：

```
$this->dbh = new db_connect();
// $this->dbh is a db_connect

$this->dbh->connect();
// returns a PDO, which you don't save anywhere 
```

然后稍后您尝试执行此操作：

```
$stmt = $dbh->query("SELECT * FROM myTable");
// $dbh doesn't even exist
// You meant $this->dbh, but that won't work either
// $this->dbh is a db_connect object, which does not implement the query() method 
```

我认为您的意思是将 PDO 对象保存为 db_connect 的一部分，然后将其用于查询：

```
class db_connect {

    public $connection;

    function __construct() {}       
    function __destruct() {}

    public function connect() {
        require_once 'db_info.php';
        try {
            $dbh = new PDO('mysql:host='.DB_HOST.';dbname='.DB_DATABASE, DB_USER, DB_PASSWORD);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        } catch (PDOException $e) {
            echo 'Connection Failed: ' . $e->getMessage();
        }
        $this->connection = $dbh;
        return $dbh;
    }

    public function close() {
        $this->connection = null;
    }
}

class operations {

    private $dbh;       

    function __construct() {
        require_once 'db_connect.php';
        $this->dbh = new db_connect();
        $this->dbh->connect();
    }

    function runQuery() {
        $stmt = $this->dbh->connection->query("SELECT * FROM myTable");
    }
} 
```

最后，如果您只是使用 db_connect 类来生成 PDO 连接，那么您应该将 connect() 转换为静态方法并保存 PDO 对象（如@dakdad 所述）。在这里，我还把你的 require_once 移到了一个更合理的位置：

```
---------- db_connect.php ----------

require_once "db_info.php";

class db_connect {
    public static function connect() {
        $dbh = null;
        try {
            $dbh = new PDO('pgsql:host='.DB_HOST.';dbname='.DB_DATABASE, DB_USER, DB_PASSWORD);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        } catch (PDOException $e) {
            echo 'Connection Failed: ' . $e->getMessage();
        }
        return $dbh;
    }
}

---------- operations.php ----------

require_once "db_connect.php"

class operations {

    private $dbh;       

    function __construct() {
        $this->dbh = db_connect::connect();
    }

    function runQuery() {
        $stmt = $this->dbh->query("SELECT * FROM words limit 2");
        print_r( $stmt->fetchAll() ) ;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:39:32.187

您的`operations`类应该存储 PDO 对象，而不是`db_connect`类。

```
class operations {

    private $dbh;       

    function __construct() {
        require_once 'db_connect.php';
        $db = new db_connect();
        $this->dbh = $db->connect();
    }

    function runQuery() {
        $stmt = $this->dbh->query("SELECT * FROM myTable");
    }
} 
```

与@slashingweapon 的答案类似，只是另一种方式。

# php - jqgrid 如何个性化错误状态'error'。错误代码 500

> ID：13184431
> 
> 赞同：0
> 
> 时间：2012-11-01T19:49:21.877
> 
> 标签：php, jquery, mysql, jquery-ui, codeigniter

我正在使用带有 jquery 网格的 CodeIgniter。我的数据库中有一个索引，指出无法插入某些组合。唯一键`user_store_index`( `Stores_idStores`, `Users_idUsers`)。用户和商店的组合不能插入两次。使用 firebux 我可以看到错误 A Database Error Occurred Error Number: 1062\. Duplicate entry '1-5' for key 'user_store_index' INSERT INTO `asignedto`( `Stores_idStores`, `Users_idUsers`) VALUES ('1', '5')。

在这种情况下，我想在 jqGrid 中向用户显示以下消息：“您无法插入此组合，因为它已经存在”但我得到的只是“错误状态：'错误'。错误代码：500”。我已阅读此处提供的解释[jqgrid 服务器端错误消息/验证处理](https://stackoverflow.com/questions/6960208/jqgrid-server-side-error-message-validation-handling)和此处[jqgrid 服务器异常错误消息](https://stackoverflow.com/questions/4290821/jqgrid-server-exception-error-messages?lq=1)和许多其他信息，但我无法找到解决方案。

这是我的 jqGrid 的代码

```
 $(document).ready(function() {

           var grid = jQuery("#newapi_1351802691").jqGrid({
                    ajaxGridOptions : {type:"POST"},
                       jsonReader : {
                       root:"data",
                       repeatitems: false
                   },
                   loadError : function(xhr,status,error) {
                            alert(xhr.status+','+status+','+error);  //alert 500, error, My custom error
                    },
                    rowList:[10,20,30],
                    viewrecords: true
                   ,url:'http://localhost/sp/index.php/assigment/getData'
,editurl:'http://localhost/sp/index.php/assigment/setData'
,datatype:'json'
,rowNum:'12'
,width:'800'
,height:'300'
,pager: '#pnewapi_1351802691'
,caption:'Control de asignaciones'
,colModel:[
{name:'username',index:'username',label:'Usuario' ,align:'left',width:300,editable:false,edittype:'text',editrules:{required:true}  }
,{name:'StoreName',index:'StoreName',label:'Tienda' ,align:'center',width:200,editable:false,edittype:'text',editrules:{required:true}  }
,{name:'Users_idUsers',index:'Users_idUsers',label:'Usuario' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:":Select;5:tienda1;6:tienda2;17:tienda3;18:tienda11",size:10},editrules:{edithidden:true,required:true,integer:true}  }
,{name:'Stores_idStores',index:'Stores_idStores',label:'Tienda' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:":Select;1:EA001;3:EA003;4:EA005;5:EA006;6:EA007;7:EA008;8:EA009;9:EA010;10:EA011;11:EA012;12:EA013;13:EA015;14:EA017;15:EA018;16:EA019;17:EA020;18:EA021;19:EA022;20:EA002;21:EA000",size:10},editrules:{edithidden:true,required:true,integer:true}  }
,{name:'SurrugateTurn',index:'SurrugateTurn',label:'SurrugateTurn' ,align:'center',width:100,key:true,hidden:true,editable:true,edittype:'select',editoptions:{value:":Select;1:1;19:19",size:10},editrules:{hidden:true}  }
]               })
              jQuery("#newapi_1351802691")
            .jqGrid('navGrid',
            '#pnewapi_1351802691',
            {view:false,
             edit:'1',
             add:'1',
             del:'1',
             close:true,
             delfunc: null ,
             search:''
        },
        { recreateForm: true, 
        width : 400 ,
        beforeShowForm : function(form) {

         },
        closeAfterEdit:true }, // edit options

        {  recreateForm: true,
        width : 400,
         closeAfterAdd : true,
         beforeSubmit : function(postdata, formid) {
         var mensaje = '';
         var resultado = true;

          return[resultado,mensaje]; 
        }
        }, /*add options*/

        {mtype: 'POST'} /*delete options*/,
        {sopt: ['eq','cn','ge','le' ] ,     
        multipleSearch: false ,
        showOnLoad : false,
        overlay:false,mtype: 'POST'} /*search options*/
        ).navButtonAdd('#pnewapi_1351802691',
                { caption:'', buttonicon:'ui-icon-extlink', onClickButton:dtgOpenExportdata, position: 'last', title:'Export data', cursor: 'pointer'}
                );
;
        }); 
```

你能帮我解决这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:00:05.090

你最好不要使用这种错误处理

原因：

*   您看到的“500 错误”是 CI 响应数据库错误并返回“500 内部服务器错误”http 标头
*   这是核心功能并自动显示，除非您编辑核心 mysql 库，否则无法更改它。

我建议每次用户尝试添加时检查记录的唯一性。并返回某些错误以在 jqgrid 中处理它

# jquery - jQuery Mobile Popup 和 ListView，以及 Popup div 内的 Knockout.js 数据绑定 - 不工作

> ID：13184434
> 
> 赞同：1
> 
> 时间：2012-11-01T19:49:36.580
> 
> 标签：jquery, jquery-mobile, knockout.js, knockout-2.0

我正在使用 jQuery Mobile 和 knockout.js 开发移动网站。我有一个（一种）复杂的场景，jQuery Mobile 的弹出和列表视图以及弹出 div 内的敲除数据绑定，我无法让它工作。

我有一个嵌套的警报列表，如下所示。对于每一天，它都会创建一个列表分隔行。然后在每一天里面，每个闹钟都有一行。

```
<ul id="alarmslist" data-bind="foreach: days" data-role="listview">
    <li data-role="list-divider"><span data-bind="text: date"></span></li>
    <!-- ko foreach: alarms1 -->
    <li>
        <a href="#popupBasic" data-rel="popup"><span data-bind="text: alarmName"></span></a>
        <section id="popupBasic" data-role="popup" data-corners="true" data-history="false" data-overlay-theme="a">
            <a href="#" class="ui-btn-right" data-icon="delete" data-iconpos="notext" data-rel="back" data-role="button" data-theme="c">Close</a>
            <ul data-role="listview" data-inset="true">
                <li data-role="divider" data-theme="a">Alarm Options</li>
                <li><section class="alarmDetail"><span data-bind="text: alarmID"></span></section></li>
                <li><a href="#">Go to Data</a></li>
                <li><a href="#">Acknowledge</a></li>
            </ul>
        </section>
    </li>
    <!-- /ko -->
</ul> 
```

我需要将弹出窗口小部件附加到警报行，这样当单击 li 行时，弹出窗口会显示该行的选项列表。这应该适用于每一行。每行的选项将取决于 alarmID 键。

这就是问题发生的地方。我正在尝试对alarmID 字段（它是alarms1 数组的一部分）进行数据绑定，以便下一个操作知道如何处理正确的警报。但是，我得到一个敲除错误，因为它找不到alarmID()。我猜 jQuery Mobile 正在 DOM 底部创建弹出部分，远低于我为淘汰赛定义的视图和视图模型。

无论如何，有人知道如何“解决”这种情况吗？或者，知道解决方法吗？或者，甚至是其他一些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:53:31.793

我还在 Knockout.js 谷歌组上发布了这个问题，并收到了一个帮助我的答案。它位于[https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/xQYZrxQ6Jsg](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/xQYZrxQ6Jsg)。谢谢。

# backbone.js - Backbone 如何在不重新渲染整个页面的情况下更新变量或部分

> ID：13184436
> 
> 赞同：0
> 
> 时间：2012-11-01T19:49:40.290
> 
> 标签：backbone.js

我将在单击事件后更新 html 的一部分。但我不想重新渲染整个页面......我的代码看起来像这样；

```
<div>OTHER PAGE STUFF I DO NOT WANT TO RE-RENDER</div>

<div>
  <span id="updateThisSection">{{data}}</span>
<div> 
```

我想在单击事件后更新该范围内的数据

```
linkClicked : function(e) {
//update the data inside the span here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:18:26.043

[`this.$el`](http://backbonejs.org/#View-%24el)您始终可以通过或访问整个元素，[`this.$`](http://backbonejs.org/#View-dollar)因此您可以只调整您需要的部分：

```
this.$('#updateThisSection').html('Some new content.'); 
```

如果您有一些比简单的更复杂的东西，`<span>`那么您可能想要为视图的该部分添加单独的子视图，然后将子视图绑定`render`到适当的更改事件。

# sublimetext2 - 如何选择具有相同名称的变量（不是文本）？

> ID：13184437
> 
> 赞同：5
> 
> 时间：2012-11-01T19:49:42.473
> 
> 标签：sublimetext2

选择 variable`f`时，编辑器会突出显示该变量的其他出现。到目前为止一切都很好，但是当尝试使用 将它们添加到选择列表时`Ctrl+D`，它也会`f`在代码中作为常规文本添加。我可以用 跳过这个`Ctrl+K`，但是如果编辑器已经识别`f`为变量，那么它肯定也可以只选择变量吗？此选项不在菜单中。

拿这个 JavaScript 片段。

```
f=function(){};
f(); 
```

选择第一个`f`时，它也会突出显示`f`，`f()`但不会突出显示`f`。 当使用它进行多选时确实会选择它。`function`
`Ctrl+D`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T00:59:40.787

[这是一个错误。](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8573)该帖子也有解决方法。

无需选择变量，只需将光标向左放置，然后按`Ctrl+D`。`Ctrl+D`这也将选择它，但在随后的印刷中仅选择其他变量（或编辑器识别为变量的变量，基于单词边界） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:05:32.793

您可以修改`word_separators`选项以不包括您的变量前缀（即`$`对于 PHP），因此当您双击变量名称时，它也会被选中`$`。

此选项位于`Preferences.sublime-settings`您`Default`文件夹中的文件中。我建议将修改后的设置添加到`Preferences.sublime-settings`您的`User`文件夹中，而不是更改默认设置。

```
"word_separators": "./\\()\"'-:,.;<>~!@#$%^&*|+=[]{}`~?" 
```

**编辑**：

不幸的是，目前没有办法在特定范围内进行查找和替换。该问题已在[此处提出，您可以在](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=7066)[Sublime 的 UserEcho 论坛上将](http://sublimetext.userecho.com/topic/117733-edit-all-occurrences-of-string-in-scope/)其作为功能请求投票。

# php - 如何在 PHP 中定义方法链

> ID：13184438
> 
> 赞同：3
> 
> 时间：2012-11-01T19:49:49.277
> 
> 标签：php

> **可能重复：**
> [PHP 方法链接？](https://stackoverflow.com/questions/3724112/php-method-chaining)

我想结合使用功能，例如：

```
select("SELECT * FROM users").where("user=l0 ").join(" . . . "); 
```

如何在 php 中定义这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:51:44.490

```
function select(){
     ....
     return new myType;
}

class myType {

     function where(){
         ...
         return $this;
     }

     function join(){
         ...
         return $this;
     }

} 
```

演示：[http ://codepad.org/pyrIEW0t](http://codepad.org/pyrIEW0t)

请记住在 PHP中使用`->`而不是。`.`

这是一个 PHP 函数链的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:53:28.990

该函数返回 a`string`并且您连接多个函数的返回值。

```
function select($input) {

//process $input

return $output;

}

function where($input) {

//process $input

return $output;

} 
```

在您的 php 中，您可以调用这些函数并将返回的结果连接起来。

# sql - SQL如何从左连接中提取谓词

> ID：13184439
> 
> 赞同：0
> 
> 时间：2012-11-01T19:49:52.507
> 
> 标签：sql, sql-server, view, predicates

我有 2 个表：用户和许可用户。第一个包含*所有*用户，第二个仅包含具有许可证的用户（2 列：useruid 和subscriptionid）。

给定一个 subscriptionId，我必须在网格中显示*所有*用户和一个布尔标志列，指示每个用户是否有订阅。

示例：以下查询为我提供了 subscriptionId = 7。

```
select firstname, lastname, emailaddress, subscriptionid 
from dbo.[user]
left join (select * from dbo.licensedUser where subscriptionid = 7) lu on dbo.[user].[Uid] = lu.useruid 
```

但是，这个查询对我没有用，因为执行程序使用 ORM。我想创建一个视图（称为 myView），以便我可以（或 ORM 可以）这样做：

从 myView 中选择名字、姓氏、电子邮件地址、订阅ID，其中订阅 ID = 7 或订阅 ID 为空

请问你能帮帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:18:06.900

如果你有一个订阅表，你可以使用这个：

```
CREATE VIEW
        v_user_subscription
SELECT  u.*, s.subscriptionId, lu.subscriptionId AS subscribed
FROM    user u
CROSS JOIN
        subscription s
LEFT JOIN
        licensedUser lu
ON      lu.userId = u.uid
        AND lu.subscriptionId = s.subscriptionId 
```

并使用这个：

```
SELECT  firstname, lastname, emailaddress, subscribed
FROM    v_user_subscription
WHERE   subscriptionId = 7 
```

在 ORM 中。

您不想在不过滤的情况下从此视图中进行选择，因为它可能会很大，但是，打开过滤器`subscriptionId` `SQL Server`会扩展视图并且实际上不会浏览其他订阅。

# xcode - 如何突出显示 Xcode 中已更改的行

> ID：13184440
> 
> 赞同：11
> 
> 时间：2012-11-01T19:49:53.920
> 
> 标签：xcode

有没有办法让 Xcode 突出显示或标记文件中已更改的行？类似于它对搜索结果或警告和错误所做的事情会很棒。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-29T09:33:59.407

单击 Xcode 工具栏中的“显示版本编辑器”。这将向您展示您当前版本的文件与您之前提交的文件相比的并排视图（我假设您使用的是 git）。

[![或者：查看->版本编辑器->显示版本编辑器（Shift+Option/Alt+CMD+Enter）](../Images/7ad6e8d96f6111c43c7006e47243a65c.png)](https://i.stack.imgur.com/5mAwA.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-29T09:28:14.887

有一个 Xcode 插件可以做到这一点：[https ://github.com/johnno1962/GitDiff](https://github.com/johnno1962/GitDiff)

你甚至可以自定义它：

[![在此处输入图像描述](../Images/dda544ddc1e4fe85f8deeb3dddc5321d.png)](https://i.stack.imgur.com/iaDUg.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T20:01:08.817

它不是直接在 Xcode 中，而是要与同一文件的版本进行比较，您可以使用 FileMerge。使用现代应用程序包类型的安装，您可以从 Xcode -> Open Developer Tool -> FileMerge 进行安装。然后只需提名一个左文件和一个右文件。

如果您正在讨论来自受支持的源代码控制存储库之一的文件版本，那么您可以使用版本编辑器 - 它是窗口右上角“编辑器”上方的选项之一，或者您可以在查看 -> 版本编辑器 -> 显示版本编辑器。此时，在右侧文件视图下方（以及在视图 -> 版本编辑器菜单上方）将有三个可用选项，其中第一个是突出显示当前本地副本与任何签入副本之间的差异的比较。

# python - 是否有一个简洁的 emacs lisp 等效于 Python 的 [n:m] 列表切片？

> ID：13184450
> 
> 赞同：23
> 
> 时间：2012-11-01T19:50:31.113
> 
> 标签：python, emacs, elisp

令人惊讶的是，我发现自己在 emacs lisp 中缺少的一件事是列表操作的特殊位。我想念 Python 的简洁列表切片。

```
>>> mylist = ["foo", "bar", "baz", "qux", "frobnitz"]
>>> mylist[1:4]
['bar', 'baz', 'qux'] 
```

我在 emacs 文档中看到了这些函数`butlast`，`nthcdr`它们会从如下代码中得到相同的结果：

```
(setq mylist '("foo" "bar" "baz" "qux" "frobnitz"))
(butlast (nthcdr 1 mylist) 1)
;; ("bar" "baz" "qux") 
```

有没有比合并`butlast`and更简洁的获取列表切片的方法`nthcdr`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T22:27:43.387

当然有：

```
(require 'cl-lib)
(setq mylist '("foo" "bar" "baz" "qux" "frobnitz"))
(cl-subseq mylist 1 4)
;; ("bar" "baz" "qux") 
```

在现代 Emacs 中，请注意`cl`已弃用，请参阅[在 Emacs 中，此错误是什么意思？“警告：运行时需要 cl 包”](https://stackoverflow.com/questions/5019724/in-emacs-what-does-this-error-mean-warning-cl-package-required-at-runtime)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-03T16:51:30.673

[Common Lisp 库](http://www.gnu.org/software/emacs/manual/html_node/cl/)很棒，但如果你的代码库变得很大，并且你想以函数式风格编写简洁的代码，我支持[`dash.el`](https://github.com/magnars/dash.el)库，它提供了大量用于列表和树操作的函数。有一个函数[`-slice`](https://github.com/magnars/dash.el#-slice-list-from-optional-to-step)的行为就像 Python 的切片：

```
(-slice (number-sequence 1 10) 1 7 2) ; (2 4 6) 
```

参数按顺序排列：列表、开始、（可选）停止、（可选）步骤。

# android - 安卓图片分享应用

> ID：13184457
> 
> 赞同：1
> 
> 时间：2012-11-01T19:51:08.553
> 
> 标签：android, sharing, mms

大家好，我需要一些帮助。我有一个 android 应用程序，它是一个画廊，当他们选择图像时，您可以按菜单共享，它将转到一个文本框和一些引号，他们可以在其中选择一个引号或编写自己的文本，然后选择他们想要共享的位置至。

我的问题是，当我尝试分享到 Facebook 或 MMS 时，它只显示文本并显示**“无法附加。不支持文件”**。但是当我选择与 gmail 共享时，它有文字和图像，一切都很好。

我只是想知道是否有人知道如何解决这个问题，如果有的话，有人可以告诉我如何解决。

先谢谢了，

扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:02:56.233

`Intent.createChooser()`您是否正在使用官方 Facebook 应用程序分享 vi an ？

官方 FB 应用程序只允许您分享一个 url (www.example.com)，它会在提交帖子之前从该站点获取图像和文本。

# r - 如何将 For 循环转换为应用

> ID：13184460
> 
> 赞同：0
> 
> 时间：2012-11-01T19:51:09.930
> 
> 标签：r

如何将下面的嵌套 For 循环转换为 Apply？

```
for(i in 1:length(vList$Subgroup.Number))
{
  for(j in 1:length(viol_grp))
   {
    viol_List[[j]] <- vList[which(vList$Subgroup.Number==viol_grp[j]), ]
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:12:43.207

第一个循环根本不需要。第一个循环的主体中没有变量`i`，因此您多次执行相同的任务。

要更改第二个循环，您可以执行以下操作（感谢 florel 的评论）：

```
viol_list = lapply(viol_grp, function(x) vList[vList$Subgroup.Number==x,]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:49:44.570

I imagine what you want to do is split `vList` into separate data frames, based on their `Subgroup.Number`. This will do it very cleanly:

```
viol_list<-split(vList,vList$Subgroup.Number) 
```

But if you really want just the groups in `viol_grp`, you'll have to subset:

```
split(vList,vList$Subgroup.Number)[as.character(viol_grp)] 
```

But, if `viol_grp` is just all the unique values of `vList$Subgroup.Number`, you don't need it.

# javascript - javascript用户点击

> ID：13184461
> 
> 赞同：0
> 
> 时间：2012-11-01T19:51:16.247
> 
> 标签：javascript

我想记录用户单击的元素（元素 id 或 xpath），例如，如果它的 href 它记录 xpath 或 id 或文本。我怎么能用javascript做到这一点？

我有什么：点击：

```
function recordClick() {
        var a = document.location
        alert("you just clicked on the page"+ a);
}

function onPageLoad() {
    //document.getElementsByTagName("body")[0].onclick = recordClick;
        document.getElementsByTagName("html")[0].onclick = recordClick;
}

window.onload = onPageLoad; 
```

路径：

```
function createXPathFromElement(elm) { 
    var allNodes = document.getElementsByTagName('*'); 
    for (segs = []; elm && elm.nodeType == 1; elm = elm.parentNode) 
    { 
        if (elm.hasAttribute('id')) { 
                var uniqueIdCount = 0; 
                for (var n=0;n < allNodes.length;n++) { 
                    if (allNodes[n].hasAttribute('id') && allNodes[n].id == elm.id) uniqueIdCount++; 
                    if (uniqueIdCount > 1) break; 
                }; 
                if ( uniqueIdCount == 1) { 
                    segs.unshift('id("' + elm.getAttribute('id') + '")'); 
                    return segs.join('/'); 
                } else { 
                    segs.unshift(elm.localName.toLowerCase() + '[@id="' + elm.getAttribute('id') + '"]'); 
                } 
        } else if (elm.hasAttribute('class')) { 
            segs.unshift(elm.localName.toLowerCase() + '[@class="' + elm.getAttribute('class') + '"]'); 
        } else { 
            for (i = 1, sib = elm.previousSibling; sib; sib = sib.previousSibling) { 
                if (sib.localName == elm.localName)  i++; }; 
                segs.unshift(elm.localName.toLowerCase() + '[' + i + ']'); 
        }; 
    }; 
    return segs.length ? '/' + segs.join('/') : null; 
}; 

function lookupElementByXPath(path) { 
    var evaluator = new XPathEvaluator(); 
    var result = evaluator.evaluate(path, document.documentElement, null,XPathResult.FIRST_ORDERED_NODE_TYPE, null); 
    return  result.singleNodeValue; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:22:11.580

很容易获得点击的东西的id

```
document.body.onclick = function(anEvent) {
    console.log(anEvent.target.id)
}; 
```

如果你使用 jQuery，你可以获得大量关于被点击对象的信息

```
$("body").click(function(anEvent){ console.log(anEvent);}); 
```

这回答了你的问题了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:19:06.497

像这样监听点击事件

```
$(function() {
    $(document).click(function(e) {
       // do whatever you want to with the captured event
    });
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:24:47.467

我认为您最好尝试`addEventListener`（或`attachEvent`在 IE < 9 中）：

```
var processClick = function(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    switch(target.tagName.toLowerCase())
    {
        case 'a':
            //do something with target.href || target.getAttribute('href');
            return e;//<-- perhaps .preventDefault() && .stopPropagation()
        case 'img': //deal with distict tags the way you want
            return img.getAttribute('src');//<-- do whatever you need to do here
    }
    if (target.id)
    {
        //do something with target.id
    }
}
if (window.addEventListener)
{
    window.addEventListener('click',processClick,false);
}
else
{
    window.attachEvent('onclick',processClick);
} 
```

当然，您可以*轻松地*用各种函数调用替换开关，每次都将元素和/或事件对象作为参数传递。
在 XPath 方面，您可以[在 MDN 上](https://developer.mozilla.org/en-US/docs/Using_XPath)找到一些可以做到这一点的代码，我认为`getXPathForElement`那里可能特别适合您的需求。

# windows-8 - 何时可以购买装有 Windows 8 Pro 的 Surface？

> ID：13184471
> 
> 赞同：-3
> 
> 时间：2012-11-01T19:51:52.157
> 
> 标签：windows-8, tablet

根据 Windows 网站，它说 Surface with Windows 8 Pro 即将推出。那么问题来了，什么时候上市？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:58:12.737

微软几个月前宣布，Surface pro 将在 Surface RT 发布 3 个月后上市。这使得发布日期大约在 1 月底或 2 月初。

[Surface Pro 可用性](http://www.itproportal.com/2012/10/29/when-will-microsoft-surface-pro-tablet-launch--what-does-the-delay-mean/)

> 该产品预计将在 Windows 8 之后大约 90 天发布，这表明 2 月发布时间大约是在消费电子展之后大约三周，这将是 2013 年第一季度科技行业的焦点。

# iphone - 在第二个 xib 问题上加载 viewDidLoad

> ID：13184483
> 
> 赞同：0
> 
> 时间：2012-11-01T19:52:30.363
> 
> 标签：iphone, xcode, sdk

我有两个 xib 文件。我从“ViewController.xib”开始，当用户单击一个按钮时，它会加载一个名为“GamePage.xib”的不同 xib 文件。

按钮的代码是：

```
-(IBAction)startButtonClicked{    
    UIViewController *gamePage = [[UIViewController alloc] initWithNibName:@"GamePage" bundle:nil];
    [self presentViewController:gamePage animated:NO completion:nil];
} 
```

单击按钮时，屏幕上会显示第二个 xib，但它的“viewDidLoad”方法没有运行……</p>

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:17:22.863

```
UIViewController *gamePage = [[UIViewController alloc] initWithNibName:@"GamePage" bundle:nil]; 
```

这似乎不正确。

`viewDidLoad`可能正在运行，但它是`viewDidLoad`Apple 的`UIViewController`. 您应该使用您的类而不是`UIViewController`在初始化它时。通常，您应该使用需要调用的 viewDidLoad 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:32:39.373

您的 XIB 必须有其所有者。您需要创建一个从 UIViewController 派生的类，然后您需要使该类成为您的 XIB 的所有者。只需按照以下步骤操作：

*   打开你的项目
*   在左侧导航面板中选择项目名称
*   右键单击并选择新建文件
*   选择Objective C Type Class
*   当你点击它时，它会要求你给它一个名字
*   假设你给了 GameViewController
*   检查“使用XIB作为接口”
*   然后添加文件
*   现在在您的导航面板中，您将看到三个类 GameViewController.h GameViewController.m GameViewController.xib 在您的 xib 中创建您的界面。

现在，如果您必须移动到此类并显示其视图，请编写以下代码：

```
 -(IBAction)startButtonClicked{    
    GameViewController *gamePage = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
    [[self navigationController] pushVIewController:gamePage animated:YES];
    [gamePage release]; //If not used ARC
} 
```

# java - Android 上的可点击 TableRow

> ID：13184484
> 
> 赞同：2
> 
> 时间：2012-11-01T19:52:37.043
> 
> 标签：java, android, tablerow

我有一个我用java为android制作的简单程序，但很难使tablerow可点击。当用户单击一行时，我希望某张图片显示在下面的图像视图中。这是我的xml代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF909090"
    android:stretchColumns="1" >

    <TableRow>

        <TextView
            android:layout_margin="2dip"
            android:layout_marginRight="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="I" />

        <TextView
            android:layout_margin="2dip"
            android:layout_marginLeft="1dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="A"
            android:onClick="Achord" />
    </TableRow>

    <TableRow>

        <TextView
            android:layout_column="0"
            android:layout_margin="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="II" />

        <TextView
            android:layout_margin="2dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="Bm" />
    </TableRow>

    <TableRow>

        <TextView
            android:layout_column="0"
            android:layout_margin="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="III" />

        <TextView
            android:layout_margin="2dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="C#m" />
    </TableRow>

    <View
        android:layout_height="2dip"
        android:background="#FF909090" />

    <TableRow android:background="#0000ff" >
    </TableRow>

    <TableRow>

        <TextView
            android:layout_margin="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="IV" />

        <TextView
            android:layout_margin="2dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="D" />
    </TableRow>

    <View
        android:layout_height="2dip"
        android:background="#FF909090" />

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow>

        <TextView
            android:layout_margin="2dip"
            android:layout_marginRight="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="V" />

        <TextView
            android:layout_margin="2dip"
            android:layout_marginLeft="1dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="E" />
    </TableRow>

    <TableRow>

        <TextView
            android:layout_margin="2dip"
            android:layout_marginRight="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="VI" />

        <TextView
            android:layout_margin="2dip"
            android:layout_marginLeft="1dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="F#m" />
    </TableRow>

    <TableRow>

        <TextView
            android:layout_margin="2dip"
            android:layout_marginRight="2dip"
            android:background="#0000ff"
            android:padding="3dip"
            android:text="VII" />

        <TextView
            android:layout_margin="2dip"
            android:layout_marginLeft="1dip"
            android:background="#0000ff"
            android:gravity="center"
            android:padding="3dip"
            android:text="G#dim" />
    </TableRow>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.05"
        android:background="#000000"
        android:maxLines="10"
        android:text="The relative minor of the Major key of A is F#m. The 12 bar blues progression in A is: \n A | A | A | A | D | D | A | A | E | D | A | E" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.03"
        android:src="@drawable/android_focused" /> 
```

这是我的java代码：

```
package com.coreservlets.widgets;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.TableRow;
import com.welly.keychords.R;

 public class keya extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.keya);
}
} 
```

我想要发生的是 imageview1 将根据单击的行显示不同的图像。任何帮助将不胜感激

正如山姆建议的那样，我已将我的代码修改为：

```
public class keya extends Activity {

    ImageView imagev = (ImageView) findViewById(R.id.imageView1);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.keya);
    }

    public void rowClick(View view) {
        switch(view.getId()) {
        case R.id.one:
            // Load image from Drawable folder
            imagev.setImageResource(R.drawable.android_normal); // example file for now
            break;
        }
    }
   } 
```

但现在我在运行该类时出现空指针异常。虽然所有编译都很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:59:40.940

只需给每个 TableRow 元素一个唯一的`id`并定义一个`onClick`方法：

```
<TableRow
    android:id="@+id/one"
    android:onClick="rowClick"> 
```

`imageView`在布局中添加一个引用 ImageView的类变量。然后加载图像：

```
public void rowClick(View view) {
    switch(view.getId()) {
    case R.id.one:
        // Load image from Drawable folder
        imageView.setImageResource(R.id.imageOne);
        break;
    }
} 
```

了解 TableRow 中具有自己`onClick`方法的任何元素都将调用自己的方法。例如 TextView`android:onClick="Achord"`将调用`Achord()`not `rowClick()`。

* * *

**另外**
您需要在使用in声明布局`findViewById()` *后*调用。`setContentView()``onCreate()`

```
ImageView imagev;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.keya);
    imagev = (ImageView) findViewById(R.id.imageView1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:58:28.413

为每一行指定一个 ID，然后您可以为代码中的每一行分配一个侦听器：

```
TableRow row = (TableRow)findViewById( R.id.row1 );
row.setOnClickListener( new OnClickListener() {
    @Override
    public void onClick( View v ) {
        //Do Stuff
    }
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:02:25.557

您需要为每个 TableRow 对象调用 setOnClickListener() ，以便框架知道单击行时要执行的操作。此外，您的 Activity 应该实现 View.OnClickListener() 以便您可以控制单击行时发生的情况。现在，当单击 View 时，您什么都不做；至少根据您的代码，您没有在任何视图的 onClickListeners 上注册回调

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:29:22.563

我通过在 public void rowclick 中声明 imageview 变量来让它工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T20:11:57.643

像 row1 一样将 id 分配给 Tablerow

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FF909090"
        android:stretchColumns="1" >

        <TableRow
            android:id="@+id/row1"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"

            >

            <TextView
                android:layout_margin="2dip"
                android:layout_marginRight="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="I" />

            <TextView
                android:layout_margin="2dip"
                android:layout_marginLeft="1dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="A"
                android:onClick="Achord" />
        </TableRow>

        <TableRow>

            <TextView
                android:layout_column="0"
                android:layout_margin="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="II" />

            <TextView
                android:layout_margin="2dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="Bm" />
        </TableRow>

        <TableRow>

            <TextView
                android:layout_column="0"
                android:layout_margin="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="III" />

            <TextView
                android:layout_margin="2dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="C#m" />
        </TableRow>

        <View
            android:layout_height="2dip"
            android:background="#FF909090" />

        <TableRow android:background="#0000ff" >
        </TableRow>

        <TableRow>

            <TextView
                android:layout_margin="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="IV" />

            <TextView
                android:layout_margin="2dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="D" />
        </TableRow>

        <View
            android:layout_height="2dip"
            android:background="#FF909090" />

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow>

            <TextView
                android:layout_margin="2dip"
                android:layout_marginRight="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="V" />

            <TextView
                android:layout_margin="2dip"
                android:layout_marginLeft="1dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="E" />
        </TableRow>

        <TableRow>

            <TextView
                android:layout_margin="2dip"
                android:layout_marginRight="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="VI" />

            <TextView
                android:layout_margin="2dip"
                android:layout_marginLeft="1dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="F#m" />
        </TableRow>

        <TableRow>

            <TextView
                android:layout_margin="2dip"
                android:layout_marginRight="2dip"
                android:background="#0000ff"
                android:padding="3dip"
                android:text="VII" />

            <TextView
                android:layout_margin="2dip"
                android:layout_marginLeft="1dip"
                android:background="#0000ff"
                android:gravity="center"
                android:padding="3dip"
                android:text="G#dim" />
        </TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.05"
            android:background="#000000"
            android:maxLines="10"
            android:text="The relative minor of the Major key of A is F#m. The 12 bar blues progression in A is: \n A | A | A | A | D | D | A | A | E | D | A | E" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.03" />
        </TableLayout> 
```

像这样在活动中调用它。

```
 import android.app.Activity;
        import android.content.Intent;
        import android.os.Bundle;
        import android.view.View;
        import android.widget.TableRow;
        import com.welly.keychords.R;

        public class keya extends Activity {
            TableRow row1;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.keya);
        row1 = (TableRow) findViewById(R.id.row1);
                row1.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub
                        Log.e("Click ", "Row 1");
                    }
                });

        }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-15T18:06:20.563

1.  在 xml 布局文件中为 Tablerow 分配一个 id：

    ```
     <TableRow
            android:id="@+id/rowL1"
            ...
     </TableRow> 
    ```

2.  在您的 java 文件中添加以下内容：

    ```
    private TableRow rowL1;  

    //In onCreateView...
    rowL1 = (TableRow) rootView.findViewById(R.id.rowL1);
    rowL1.setOnClickListener(v -> {
        //Your code here...
    }); 
    ```

# python - 如何让python做数字来自输入的pemdas

> ID：13184485
> 
> 赞同：-1
> 
> 时间：2012-11-01T19:52:38.037
> 
> 标签：python, math

> **可能重复：**
> [我正在制作一个 PEMDAS 求解器，但不知道该写什么](https://stackoverflow.com/questions/13182459/im-making-a-pemdas-solver-and-dont-know-what-to-write)

我正在制作一个 pemdas 求解器程序，但我似乎无法让它求解用户写入程序的方程。我目前的代码是：

```
def pemdas():
     print("type in your pemdas problem.")
     prob = int(input())
     solve(prob)
     print(str(prob))
     input()
pemdas() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:57:26.260

这实际上是一个比你想象的更难的问题，而且这个问题很难以目前的形式回答。所以这里有一些建议的方法。您应该研究这些并尝试其中一个或多个，然后在遇到麻烦时再提出一个更具体的问题。

可能您最好的选择是使用[shunting-yard 算法将表达式转换为](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)[后缀](http://en.wikipedia.org/wiki/Reverse_Polish_notation)，然后使用堆栈来评估表达式。

另一种选择是使用[PyParsing](http://pyparsing.wikispaces.com/)。PyParsing 允许您为字符串指定解析规则并将函数分配给某些标记；这将让您在解析阶段计算结果。这将是一种更加抽象的方法。（此外，在他们的示例页面上可能有一些这类事情的好例子。一定要好好看看！）

# xml - wsdl+xsd 是否应该设计成可以直接看到消息内容的方式？

> ID：13184487
> 
> 赞同：0
> 
> 时间：2012-11-01T19:52:42.130
> 
> 标签：xml, web-services, wsdl, xsd

我正在为具有多个属性的对象实现 CRUD Web 服务。我应该定义一个单一的类型

```
<xs:complexType name="tProject">
 <xs:sequence>
  <xs:element name="id" type="xs:int" minOccurs="0" />
  <xs:element name="projectname" type="xs:string" minOccurs="0" />
  <xs:element name="projectnum" type="xs:string" minOccurs="0" />
  <xs:element name="description" type="xs:string" minOccurs="0" />

  <!-- here another 30-some attributes -->
 </xs:sequence>
</xs:complexType> 
```

并将其用于所有操作：

1.  GetProject 请求和响应都包含 tProject。作为响应，所有字段都将存在，但请求应包含关键列（id 和/或项目名称）以识别项目。这是消费者只需要知道的，并且在界面描述中没有明确说明。

2.  UpdateProject 请求应包含关键列（id 和/或项目名称）和更新的列。再一次，仅通过检查接口无法知道它，因为所有都是 minOccurs="0"。

3.  CreateProject 请求应包含项目最初需要的一些字段。id 由 WS 创建，必须发送回消费者。响应将再次为 tProject 但其中只有 id。

当我在这里写它时，感觉它违反了关于 wsdl 设计的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:15:07.130

我试着回答我自己的问题。我希望我能得到更好的答案，但是在这里我的下一个方法有什么问题会很好：

```
<!-- only updatable fielsds here -->
<xs:complexType name="tProjectBase">
 <xs:sequence>
   <xs:element name="projectnum" type="xs:string" minOccurs="0" />
   <xs:element name="description" type="xs:string" minOccurs="0" />
   <xs:element name="accepteddate" type="xs:dateTime" minOccurs="0" />
   <xs:element name="activeyears" type="xs:int" minOccurs="0" />
 </xs:sequence>
</xs:complexType>

<!-- extending updateble with keys and not updateble -->
<xs:complexType name="tProject">
 <xs:complexContent>
  <xs:extension base="tProjectBase">
    <xs:sequence>
      <xs:element name="id" type="xs:int" />
      <xs:element name="projectname" type="member"/>
      <xs:element name="projectcreator" type="xs:string" /> <!--not updatable-->
    </xs:sequence>
  </xs:extension>
 </xs:complexContent>
</xs:complexType>

<!-- only keys here -->
<xs:complexType name="tProjectKeys">
  <xs:choice>
   <xs:element name="id" type="xs:int"/>
   <xs:element name="projectname" type="xs:string"/>
  </xs:choice>
</xs:complexType>

<xs:element name="tUpdateProject">
 <xs:complexType>
  <xs:sequence>
    <xs:element name="keys" type="tProjectKeys" />
    <xs:element name="project" type="tProjectBase" />
  </xs:sequence>
 </xs:complexType>
</xs:element>

<xs:element name="tCreateProject">
 <xs:complexType>
  <xs:sequence>
    <xs:element name="projectcreator" type="xs:string />
    <xs:element name="project" type="tProjectBase" />
  </xs:sequence>
 </xs:complexType>
</xs:element> 
```

*   获取项目

    *   请求 = tProjectKeys
    *   响应 = tProject
*   更新项目

    *   请求 = tUpdateProject
    *   response = nothing（所有消息都应该有具有状态的标头）
*   创建项目

    *   请求 = tCreateProject
    *   response = 创建项目的id

这种方法也存在问题。例如，现在密钥是“硬编码的”。如果某些客户将 projectnum 设为唯一并希望将其用作从外部系统更新项目的关键，该怎么办。也许这就是他们的外部系统使用的信息。所以原题的方案更加灵活。但该走哪条路？

# c++ - 对多图对象的引用

> ID：13184493
> 
> 赞同：0
> 
> 时间：2012-11-01T19:53:11.770
> 
> 标签：c++, object, reference, multimap

是否可以在多图中返回对象的引用？这就是我正在尝试的：

```
return &this->noteList.find(key)->second; 
```

但是我越来越`Non-const lvalue reference to type 'Note' cannot bind to a temporary of type 'Note *'`想知道这是否可能，如果可以，怎么做？`notelist`是多图，它`Note`里面有对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:55:11.800

然后就像其他人已经指出的那样，在`second`没有和号 ( ) 的情况下返回。`&`

如果`noteList`或您的方法是`const`，您还必须将返回类型更改为 const ，例如：

```
const Note &getRef(Note note) const; 
```

*题外话：*通常，您还应该将参数更改为`const Note &note`，从而产生：

```
const Note &getRef(const Note &note) const; 
```

或者

```
Note &getRef(const Note &note); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:02:54.277

`this->noteList.find(key)->second`已经为您提供了对多图内对象的引用（如果`this->noteList`是多图）。

通过在该表达式前加上与号 ( `&`)，您将获得指向此类对象的指针（如果该运算符未重载）

# objective-c - 随机放置 UIView

> ID：13184494
> 
> 赞同：1
> 
> 时间：2012-11-01T19:53:18.863
> 
> 标签：objective-c, ios, xcode, uiview

我想知道最好的方法是在屏幕上放置多个具有随机坐标的 UIView，而不会使它们相互接触或接触父视图的边缘。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:21:56.513

使用 arc4random() 生成随机数。您需要将它们限制在 x 坐标的 0 和您的父视图框架宽度之间，以及 y 坐标的 0 和您的视图框架高度之间。假设您希望它完全可见，从范围中减去您的随机视图框架宽度/高度。

```
NSInteger randomX = arc4random() % ((int)view.frame.size.width - randomView.frame.size.width);
NSInteger randomY = arc4random() % ((int)view.frame.size.height - randomView.frame.size.height);
CGRect frameRandom = CGRectMake (randomX, randomY, randomView.frame.size.width,randomView.frame.size.height); 
```

然后，您需要枚举所有现有的随机视图，并确保新的随机视图框架不会与现有视图的框架相交。

使用 CGRectIntersectsRect 查看两个 UIView 框架是否相交：

[如何判断两个 CGRect 是否相交？](https://stackoverflow.com/questions/2714103/how-to-figure-out-if-two-cgrect-intersect)

# amazon-ec2 - EC2 Linux 实例上的 TeamCIty 服务器在完成启动之前就死机了

> ID：13184495
> 
> 赞同：2
> 
> 时间：2012-11-01T19:53:28.667
> 
> 标签：amazon-ec2, teamcity, teamcity-7.0

我在 EC2 中安装 TeamCity，从服务器开始，然后在代理上移动。我从在微型实例上运行的 Amazon Linux AMI 开始。然后我做了：

```
sudo yum update
wget http://download.jetbrains.com/teamcity/TeamCity-7.1.1.tar.gz
tar -xvzf TeamCity-7.1.1.tar.gz
cd TeamCity
bin/teamcity-server.sh start 
```

当我使用 bin/teamcity-server.sh start 启动它时，事情就发生了。我可以使用显示“TeamCity 正在启动”页面的网络浏览器进行连接。teamcity-server.log 显示了一堆活动、解压缩插件等。

但是突然之间，服务器进程就消失了。端口不再监听，ps显示没有java进程在运行，浏览器无法连接。

catalina 或 teamcity 日志中没有错误消息。尽管经过多次试验和错误，我运行 bin/teamcity-server.sh run（而不是 start）来获取控制台输出，并得到以下信息：

```
Using CATALINA_BASE:   /home/ec2-user/TeamCity
Using CATALINA_HOME:   /home/ec2-user/TeamCity
Using CATALINA_TMPDIR: /home/ec2-user/TeamCity/temp
Using JRE_HOME:        /usr/lib/jvm/jre
Using CLASSPATH:       /home/ec2-user/TeamCity/bin/bootstrap.jar:/home/ec2-user/TeamCity/bin/tomcat-juli.jar
Nov 1, 2012 7:22:25 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/amd64/server:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/amd64:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
Nov 1, 2012 7:22:26 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8111"]
Nov 1, 2012 7:22:26 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2742 ms
Nov 1, 2012 7:22:26 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Nov 1, 2012 7:22:26 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.23
Nov 1, 2012 7:22:26 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/ec2-user/TeamCity/webapps/ROOT
Log4J configuration file /home/ec2-user/TeamCity/bin/../conf/teamcity-server-log4j.xml will be monitored with interval 10 seconds.
Nov 1, 2012 7:22:30 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8111"]
Nov 1, 2012 7:22:30 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3786 ms
=======================================================================
TeamCity 7.1.1 (build 24074) initialized, OS: Linux, JRE: 1.6.0_24-b24
TeamCity is running in professional mode
bin/teamcity-server.sh: line 18:  4231 Killed                  ./catalina.sh $1 
```

我保证我没有杀死进程！我可以在 Linux 中很好地找到自己的方法，但我完全不确定下一步该去哪里找出导致该进程终止的原因或原因。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:11:06.393

在进一步扫描 .sh 文件以查看 TeamCity 是如何启动自己的之后，我注意到它为它的 java 进程占用了相当多的内存（512m 或 750m，具体取决于您使用的线路）。

EC2 微型实例总共只有[613m 的 RAM](http://aws.amazon.com/ec2/instance-types/)。当我意识到这一点时，我用一个更大的实例再次尝试了整个过程，一切正常。

我仍然很好奇是否有更好的方法可以知道导致卡塔琳娜死亡的原因，所以如果有人想用这些信息来回答......

# titanium-mobile - Appcelerator Titanium - 添加模块

> ID：13184507
> 
> 赞同：0
> 
> 时间：2012-11-01T19:54:36.493
> 
> 标签：titanium-mobile, titanium-modules

我已经为 Titanium 移动 SDK 2.1.3 编译了一个 Android 模块，但是当我尝试将它添加到一个空的应用程序时，当我尝试构建应用程序时出现以下错误。

```
[ERROR] Error(s) compiling generated Java code
[ERROR] C:\Users\foobar\My Documents\Titanium Studio Workspace\RT\build\android\gen\com\foobar\FBApplication.java:42: cannot find symbol

symbol  : class SpspmoduleBootstrap

location: package com.foobar.spspmodule

        runtime.addExternalModule("com.foobar.spspmodule", com.foobar.spspmodule.SpspmoduleBootstrap.class); 
```

**有人有想法么？**

# java - 时代混乱，需要澄清

> ID：13184508
> 
> 赞同：2
> 
> 时间：2012-11-01T19:54:39.697
> 
> 标签：java, epoch

鉴于：

```
private Calendar calendarInstance = Calendar.getInstance();

public long inMillis() {
    calendarInstance.set(year, month, day, hour, min);
    return calendarInstance.getTimeInMillis();
} 
```

据我了解，结果会随着纪元以来的时间回来，以毫秒为单位

> 当前时间（从纪元开始的 UTC 毫秒）。

鉴于我的测试总是将对象设置为相同，为什么随着时间的推移结果会有所不同？

```
detailedMoment = new MomentInTime(2012, 11, 1, 19, 9);
detailedMoment.inMillis() // gives different results as time passes by 
```

**更新：**

我继续猜测自己是因为 ![在此处输入图像描述](../Images/f75c0e7d94d07f26a05871e4e05bebde.png)

在同一时间段内，我得到

```
1_351_796_940 // http://www.epochconverter.com
1_354_410_540 // my number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:57:31.530

那么你不设置秒或毫秒。 [JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int%29)说：

> 设置年、月、月中的某一天、一天中的小时和分钟字段。 **其他字段不变。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:57:40.123

我认为你应该使用[clear()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#clear%28%29)。如果您这样做，它将每次返回您确切的毫秒数。

```
public long inMillis() {
    calendarInstance.clear();
    calendarInstance.set(year, month, day, hour, min);
    return calendarInstance.getTimeInMillis();
} 
```

来自 Java 文档

> 设置此日历的所有日历字段值和时间值`(millisecond offset from the Epoch)`未定义。这意味着 isSet() 将为所有日历字段返回 false，并且日期和时间计算会将这些字段视为从未设置过的字段。日历实现类可以使用其特定的默认字段值进行日期/时间计算。例如，`1970`如果 YEAR 字段值未定义，则使用 GregorianCalendar。

示例程序

```
public class MomentInTime {

private static Calendar calendarInstance = Calendar.getInstance();

public static long inMillis() {
    calendarInstance.clear();
    calendarInstance.set(2012, 10, 1, 19, 9);
    return calendarInstance.getTimeInMillis();
}

public static void main(String[] args) throws InterruptedException {
    for (int i = 0; i < 10; i++) {
        System.out.println(inMillis()/1000);
        Thread.sleep(300);
    }
}
} 
```

输出：

```
 1351777140 
```

![在此处输入图像描述](../Images/5b37db652c444390b8d8b8c6b1ed1614.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:56:46.303

我猜那是因为您缺少Calendar.getInstance() 的**秒数**和**毫秒数。**

您只是替换`year, month, day, hour, min`Calendar 对象，但每次获取日历实例时，该特定时间点的秒数和毫秒数可能会发生变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-19T07:33:45.830

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.LocalDate;
import java.time.ZoneOffset;

public class Main {
    public static void main(String[] args) {
        //Test
        System.out.println(inMillis(2021,6,19,8,30));
    }
    public static long inMillis(int year, int month, int day, int hour, int min) {
        return LocalDate.now()
                .atStartOfDay(ZoneOffset.UTC)
                .withYear(year)
                .withMonth(month)
                .withDayOfMonth(day)
                .withHour(hour)
                .withMinute(min)
                .toInstant()
                .toEpochMilli();
    }
} 
```

**输出：**

```
1624091400000 
```

[`ONLINE DEMO`](https://ideone.com/HQ0ZkG)

**这是[http://www.epochconverter.com](http://www.epochconverter.com)的显示方式：**

[![在此处输入图像描述](../Images/7bc1f58998b964e0638ff5b2d30009d8.png)](https://i.stack.imgur.com/T46SA.png)

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

## 更新：

**一个更简单的版本**（感谢 Ole VV）：

```
public static long inMillis(int year, int month, int day, int hour, int min) {
    return OffsetDateTime.of(year, month, day, hour, min, 0, 0, ZoneOffset.UTC)
            .toInstant()
            .toEpochMilli();
} 
```

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

# c++ - C ++：使用模板时未覆盖函数

> ID：13184510
> 
> 赞同：8
> 
> 时间：2012-11-01T19:54:41.693
> 
> 标签：c++, oop, templates, linker, overriding

我正在为学校作业编写一个小型日历库的最后阶段，我遇到了一个意想不到且非常令人困惑的问题；当我引入模板时，我的赋值运算符不会被覆盖！

所以结构如下：我有一个抽象类`Date`，其中大部分是纯虚函数（包括赋值运算符），然后我有两个子类`Gregorian`并`Julian`实现了它的所有功能。最后，我为 class 编写了一个模板`Calendar`，其中包含今天的日期（以 a`Gregorian`或`Julian`对象的形式）和一些与这个特定问题并不真正相关的其他内容。

问题是当试图设置这个成员时，`today`我得到一个长链接器错误：

> 错误 4 error LNK2019: unresolved external symbol "public: virtual class lab2::Date & __thiscall lab2::Date::operator=(class lab2::Date const &)" (??4Date@lab2@@UAEAAV01@ABV01@@ Z) 在函数“public: class lab2::Gregorian & __thiscall lab2::Gregorian::operator=(class lab2::Gregorian const &)”中引用 (??4Gregorian@lab2@@QAEAAV01@ABV01@@Z) C: \Users...\test.obj 日历

~~`operator=`告诉我它在类中找不到函数`Date`（显然是因为它是纯虚拟的）。为什么不使用任何被覆盖的？~~ 它告诉我`Gregorian::operator=`正在尝试打电话`Date::operator=`？

这是出错的简化代码：

```
namespace cal_lib {
    template <typename T>
    class Calendar {
    public:
        Calendar() {
            today = T(); // this yields the error
        }
    private:
        T today;
    };
 } 
```

这是*Gregorian.cpp*的一个片段：

```
namespace cal_lib {
    class Gregorian : public Date {
    public:
        Gregorian();
        virtual Gregorian& operator=(const Date& date);
        virtual Date& add_year(int n = 1);
        virtual Date& add_month(int n = 1);
    };

    // here I'm using Date's constructor to get the current date
    Gregorian::Gregorian() {}

    Gregorian& Gregorian::operator=(const Date& date) {
        if (this != &date) {
            // these member variables are specified as
            // protected in Date
            m_year = 1858;
            m_month = 11;
            m_day = 17;

            add_year(date.mod_julian_day()/365);
            add_month((date.mod_julian_day() - mod_julian_day())/31);
            operator+=(date.mod_julian_day() - mod_julian_day());
        }
    }
} 
```

Date 的（默认）构造函数只是将 和 的值设置为今天的日期`m_year`：`m_month``m_day`

```
Date::Date() {
    time_t t;
    time(&t);
    struct tm* now = gmtime(&t);
    m_year = now->tm_year + 1900;
    m_month = now->tm_mon + 1;
    m_day = now->tm_mday;
} 
```

值得注意的是，这非常有效：

```
Gregorian g;
Julian j;
g = j; // no problems here

Date* gp = new Gregorian();
Date* jp = new Julian();
*gp = *jp; // no problems here either 
```

这是`Calendar`类的实例化方式：

```
using namespace cal_lib;

Calendar<Gregorian> cal; 
```

我在这里犯了一些非常明显的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:42:55.720

如果您仔细阅读错误消息，您会注意到两件事，编译器正在尝试找到以下定义：

```
Date& operator=(const Date&) 
```

并且从以下定义中需要该符号：

```
Gregorian& operator=(const Gregorian&) 
```

*那么那个操作符是怎么出现在你的程序中的？*

复制构造函数和赋值运算符是特殊的，它们总是会在程序中声明。要么你提供一个声明，要么编译器会为你做这件事。您已提供`Gregorian& Gregorian::operator=(const Date&)`但不会`Gregorian& Gregorian::operator=(const Gregorian&)`从程序中删除。

当您尝试将一个`Gregorian`对象分配给另一个对象时，编译器会发现您的和隐式定义的两个重载，并且重载解析会发现隐式声明的赋值是更好的匹配。这将以类似于以下方式触发赋值运算符的定义：

```
T& operator=( T const & o ) {
   Base::operator=(o);           // for all bases
   member=o.member;              // for all members
} 
```

你可以做不同的事情来解决这个问题。最简单的可能是`Date Date::operator=(const Date&)`在您的程序中定义（将其保留为纯虚函数，但也提供定义）。这样，当编译器遇到两个具有相同派生类型的对象时，它就可以发挥作用，一切都会正常工作。您还可以通过强制派生派生类型将其用作分解基成员副本的实现的方法。

另一个需要更多努力的选项是实际声明和定义所有派生类型的赋值运算符。这里还有更多代码要写，处理成员的代码`Date`需要复制，如果修改基类，则需要更新所有派生赋值运算符……我不会走那条路.

`Date`最后，一旦编译器错误得到修复，请考虑您的赋值运算符的实现对于一般（实际上可能是`Gregorian`日期）是否有意义。考虑一下如果你这样做会发生什么：

```
Gregorian d1 = ...; // some date
Gregorian d2 = d1;  // same date
Date &d = d2;
d1 = d2;            // What date does 'd1' represent?? 
```

`Date::operator=`请注意，如果您提供定义并让编译器为您生成，此示例中的问题就会消失`Gregorian::operator=(Gregorian const&)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:43:34.150

首先：当您`Date& Date::operator=(const Date&)`在`Date`类中有 public 时，编译器会`Gregorian& Gregorian::operator=(const Gregorian&)`为您的`Gregorian`类生成隐式函数。

编译器生成的函数的行为类似于：

```
Gregorian& Gregorian::operator=(const Gregorian& g)
{
    Date::operator=(g);
    return *this;
} 
```

根据重载解析规则，这个函数在万一情况下*比较好*

```
Gregorian g;
Gregorian u;
g = u; 
```

然后`Date& Date::operator=(const Date&)`

如果您`delete`将此函数或设为私有，它仍将被声明并且更适合编译器，因为编译器在选择重载时会忽略可访问性问题：

> [*注意：*重载决议选择的函数不能保证适合上下文。其他限制，例如函数的可访问性，可能使其在调用上下文中的使用格式错误。*——尾注*]

（*13.3 重载决议，C++11 标准草案*）

`operator=`您可能应该为 Date函数编写实现。对于所有日历实现，您可能应该具有相同的下划线数据格式，那么您就不需要 virtual operator=。现在您正在尝试执行一些转换，但要正确执行，您不仅必须知道*左* `operator=`操作数的类型，还必须知道*右*操作数的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T21:49:49.557

说明您的问题的简化代码：

```
class A {
public:
  virtual A& operator = (const A& a) = 0;
};

class B : public A {
public:
  virtual B& operator = (const A&)
  {
      return *this;
  }
};

int main() 
{
  B b;
  b = B();
} 
```

[http://liveworkspace.org/code/add55d1a690d34b9b7f70d196d17657f](http://liveworkspace.org/code/add55d1a690d34b9b7f70d196d17657f)

```
Compilation finished with errors:
/tmp/ccdbuBWe.o: In function `B::operator=(B const&)':
source.cpp.cpp:(.text._ZN1BaSERKS_[_ZN1BaSERKS_]+0x14): undefined reference to `A::operator=(A const&)'
collect2: error: ld returned 1 exit status 
```

你以为你叫这个

```
virtual B& B::operator = (const A&)
//                              ^ 
```

但实际上所谓的是这个，自动生成的默认运算符：

```
 virtual B& B::operator = (const B&)
   //                             ^ 
```

它的默认实现调用这个操作符：

```
 virtual A& operator = (const A& a) = 0; 
```

这没有实现 - 所以错误。

最简单的解决方案是在赋值中进行显式转换：

```
int main() 
{
  B b;
  b = static_cast<const A&>(B());
} 
```

我建议 - 不要将 A 运算符定义为虚拟 - 这在这里没有意义。

如果你真的想要它是虚拟的，那么要么实现它的基本纯虚拟版本：

```
class A {
public:
  virtual A& operator = (const A& a) = 0;
};
inline A& operator = (const A& a) { return *this; } 
```

或者 - 从类 A 派生的所有内容中删除默认值`operator =`- 这非常不方便......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T19:58:35.910

> （显然是因为它纯粹是虚拟的）。

你确定吗？它是如何*准确*定义的？我认为你的定义是错误的。它应该看起来像

```
virtual Date& operator=(const Date& r) = 0; 
```

注意返回值和`const Date&`。

# javascript - jQuery：环绕子字符串...关闭，但不完全

> ID：13184512
> 
> 赞同：3
> 
> 时间：2012-11-01T19:54:47.923
> 
> 标签：javascript, jquery, substring

我正在尝试在几个段落中选择子字符串（方括号中的字符数），并将它们中的每一个都包装在`<span>`带有类 , 的标签中`char_count`。这是其中一个的 HTML 和 CSS：

```
var select_p = $('div#promo_area div.featured_box p');
select_p.each(function() {
  var first_index = $(this).html().indexOf('[');
  var last_index = $(this).html().indexOf(']') + 1;
  var selected_text = $(this).html().substring(first_index, last_index);
  selected_text.wrap('<span class="char_count" />');
});
```

```
span.char_count {
  padding-top: 0;
  color: #ff6600 !important;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="promo_area">
  <h3>Featured Stories</h3>
  <div class="featured_box">
    <h4><a href="/give">Senectus et Netus</a></h4>
    <div>
      <a href="/give"><img width="207" height="139" src="http://myrussreid.com/files/2011/06/ffffff1395-207x139.jpg" class="attachment-wds_home_image wp-post-image" alt="ffffff139" title="ffffff139" /></a>
    </div>
    <p>Pellentesque habitant morbi tristique senectus et netus. [100 characters w/spaces]</p>
    <a href="/give">Please Give</a>
  </div>
  <!-- end .featured_box -->
</div>
```

它似乎一直有效`.wrap`——我在`selected_text`. 包装本身不起作用。我做错了什么愚蠢的小事？还是这是一件愚蠢的大事？

**[这](http://jsfiddle.net/imbwaldo/n2jca)是我的小提琴**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:09:13.863

`surroundContents`如果您喜欢冒险，您可以尝试使用范围实现解决方案，或者您可以使用[此](http://bartaz.github.com/sandbox.js/jquery.highlight.html)插件使其变得简单：

```
$(this).highlight(selected_text, { element: 'span', className: 'char_count' }); 
```

这是一个工作小提琴：http: [//jsfiddle.net/Kpn7b/2/](http://jsfiddle.net/Kpn7b/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:57:52.980

代替：

```
var selected_text = $(this).html().substring(first_index, last_index); 
```

和：

```
var selected_text = $('<span class="char_count">').text($(this).html().substring(first_index, last_index)); 
```

你 `selected_text`是一个字符串，我的是一个 jQuery span 对象。

如果你愿意，你可以使用**类似**这样的脚本：

```
select_p.html(function(i, old) {
    return  old.replace(/(\[.*\])/gi, '<span class="char_count">$1</span>');
}); 
```

# ruby-on-rails - 如何使用 Devise 锁定用户？

> ID：13184514
> 
> 赞同：14
> 
> 时间：2012-11-01T19:54:48.657
> 
> 标签：ruby-on-rails, devise, authorization, ruby-on-rails-3.2

我想在我的应用程序中为帐户持有人用户添加订阅类型功能，以便在登录尝试失败的情况下，他们将无法访问他们的帐户。注意：我不想从数据库中删除他们的帐户。我已经安装`devise-2.1.2`在我的应用程序中。有没有人知道如何做到这一点？我是新手，`Ruby on rails`所以如果您解释一下步骤，这将对我非常有帮助。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-01T19:58:58.633

设计有一个内置的解决方案，带有设计可[锁定文档](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Lockable)`:lockable`中的选项检查

您必须将集合`lock_strategy`设置为`:failed_attempts.`

*第 1 步* 设置您的 config/initializers/devise.rb 以使用：

```
# Defines which strategy will be used to lock an account.
config.lock_strategy = :failed_attempts

# Defines which key will be used when locking and unlocking an account
config.unlock_keys = [ :time ]

# Defines which strategy will be used to unlock an account.
# :time  = Re-enables login after a certain amount of time (see :unlock_in below)
config.unlock_strategy = :time

# Number of authentication tries before locking an account if lock_strategy
# is failed attempts.
config.maximum_attempts = 3

# Time interval to unlock the account if :time is enabled as unlock_strategy.
config.unlock_in = 2.hours 
```

*第 2 步* 您应该将可锁定的模型添加到您的模型中，如下所示：

```
class Example < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, 
         :lockable 
```

*步骤 3* 生成迁移以使设计工作

```
class AddLockableToExamples < ActiveRecord::Migration
  def change
    add_column :examples, :failed_attempts, :integer, default: 0
    add_column :examples, :unlock_token, :string
    add_column :examples, :locked_at, :datetime
  end
end 
```

问候！！

# actionscript-3 - 在actionscript中使用if语句检查相同的值？

> ID：13184516
> 
> 赞同：0
> 
> 时间：2012-11-01T19:54:57.517
> 
> 标签：actionscript-3, actionscript, flixel

我正在使用 Flixel 开发一款三消式益智游戏，因此我正在检查每一行和每一列以查看在任何给定时间是否有匹配。但是，我有 6 个不同的部分（截至目前）处于活动状态，每个部分都由一个整数标识。鉴于此，我可以通过执行以下操作来检查每一件作品：

```
public function matchingCheck():void
    {
        if (piecesArray[0][1] == 1 && piecesArray[1][1] == 1 && piecesArray[2][1] == 1) {
            FlxG.log("Yay!");
        }
    } 
```

然而，这相当笨拙，并且基本上会导致我喜欢的太多重复。

至少，我希望能够检查这些数组中的值是否彼此相等，而不必指定它是哪个值。在最好的情况下，我希望能够检查一整行是否有三个（或更多）相邻的部分，但我会满足于手动完成这部分。

谢谢你的帮助！

* * *

**编辑：**没关系，我的编辑不起作用。它只是检查 if `piecesArray[2][1] == 1`，这让我变成了一只悲伤的熊猫。

* * *

**编辑 2：**我在下面选择了正确的答案 - 这不完全是我使用的，但它确实让我开始了。谢谢启示录0n3！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:01:48.080

您可以通过使用另一个函数来稍微减少该代码

```
private function checkValid( arrayOfItemsToCheck:Array, value:* ):Boolean {
    for ( var i:Number = 0; i < arrayOfItemsToCheck.length; i++ ) {
        if ( arrayOfItemsToCheck[i] != value ) {
            return false;
        }
    }
    return true;
} 
```

然后，您只需在 if 语句中执行此操作：

```
if ( checkValid( [ piecesArray[0][1], piecesArray[1][1], piecesArray[2][1] ], 1 ) ) {
            FlxG.log("Yay!");
} 
```

不过，这确实假设所有项目都必须等于 1。它仍然有很多代码，但它为每次检查删去了一组“= 1 &&”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:06:21.427

像这样的东西怎么样，它会告诉你匹配是否存在以及匹配是什么：

```
public function checkForMatch():void{
    var rows:int = piecesArray.length;
    for(var i:int=0; i<rows; i++){
        var match:int = checkRow(piecesArray[i]);
        if(match > -1) {
            FlxG.log("Yay you matched " + match);
        }
    }
}

private function ckeckRow(row:Array):int{
    if(row[0] == row[1] == row[2]){
        return row[0];
    }
    return -1;
} 
```

# c# - 在asp.net c#中将GridView绑定到列表

> ID：13184521
> 
> 赞同：0
> 
> 时间：2012-11-01T19:55:12.627
> 
> 标签：c#, asp.net, gridview

这是我第一次这样做，所以我需要一点帮助，

我后面有这段代码：

```
List<Trucks> FinalListOfTrucks = new List<Trucks>();
    public class Trucks
    {
        public string Placa;
        public string Lock;
        public string Event;
        public DateTime Date;
        public string TipoCamion;
        public string Person;
        public string MissedDate;
    }

    protected void btnProcess_Click(object sender, EventArgs e)
        {
            Trucks item = new Trucks();
            item.Placa = "MA2323";
            item.Lock = "lock1";
            item.Event = "Event1";
            item.Date = DateTime.Now;
            item.TipoCamion = "TRUCK1";
            item.Person = "JULIAN";
            item.MissedDate = "";
            FinalListOfTrucks.Add(item);

            gvOriginal.DataSource = FinalListOfTrucks;
            gvOriginal.DataBind();
} 
```

在设计中：

```
<asp:Button ID="btnProcess" runat="server" Text="Process" 
        onclick="btnProcess_Click" />
    <asp:GridView ID="gvOriginal" runat="server"></asp:GridView> 
```

但尝试运行网络应用程序时，我收到以下错误：

`The data source for GridView with id 'gvOriginal' did not have any properties or attributes from which to generate columns. Ensure that your data source has content.`

我还需要做其他事情来完成这项工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:02:25.817

正如您收到的错误消息所示，数据绑定依赖于使用*属性*而不是*字段。*您可以轻松更改代码，以便`Trucks`使用属性：

```
public class Trucks
{
    public string Placa { get; set; }
    public string Lock { get; set; }
    public string Event { get; set; }
    public DateTime Date { get; set; }
    public string TipoCamion { get; set; }
    public string Person { get; set; }
    public string MissedDate { get; set; }
} 
```

如果你做出改变，一切都应该工作。

请注意，属性和公共字段之间存在许多细微差别。属性实际上是方法周围的语法糖，因此`public string Placa {get;set;}`将转换为类似于：

```
private string _placa;
public string GetPlaca() { return _placa; }
public void SetPlaca(string value) { _placa = value; } 
```

至于方法和字段之间的区别，这可能超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:03:11.073

您可以绑定到列表网格视图，但您的类必须使用属性，而不是变量。

```
public class Trucks
{
    public string Placa{get;set;}
    public string Lock{get;set;}
    public string Event{get;set;}
    public DateTime Date{get;set;}
    public string TipoCamion{get;set;}
    public string Person{get;set;}
    public string MissedDate{get;set;}
} 
```

# java - 从 JPA/EclipseLink（无文件）在内存中生成 HSQLDB 表

> ID：13184530
> 
> 赞同：3
> 
> 时间：2012-11-01T19:56:08.883
> 
> 标签：java, jpa, eclipselink, hsqldb, in-memory-database

我有 EclipseLink 2.4 的 JPA2，我正在尝试使用 HSQLDB 实现一个内存数据库。我已经能够使用创建 hsqldb 的文件实现

```
jdbc:hsqldb:file:./databases/test;shutdown=true;files_readonly=true 
```

但是当我尝试使用时`jdbc:hsqldb:mem:tableName`，我收到以下消息：

* * *

堆栈跟踪：

```
javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse   
Persistence Services - 2.4.0.v20120608-r11652):  
  org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: user lacks privilege or object
  not found: EFFECTIVITY

Error Code: -5501
Call: INSERT INTO EFFECTIVITY (HULL) VALUES (?)
bind => [1 parameter bound]
Query: InsertObjectQuery(101)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush
       (EntityManagerImpl.java:804)
at com.gdeb.touchtable.db.TestJPAEntities.testTTTouch(TestJPAEntities.java:93)
..............
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found:
 EFFECTIVITY
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.SchemaManager.getTable(Unknown Source)
at org.hsqldb.ParserDQL.readTableName(Unknown Source)
at org.hsqldb.ParserDQL.readRangeVariableForDataChange(Unknown Source)
at org.hsqldb.ParserDML.compileInsertStatement(Unknown Source)
at org.hsqldb.ParserCommand.compilePart(Unknown Source)
at org.hsqldb.ParserCommand.compileStatement(Unknown Source)
at org.hsqldb.Session.compileStatement(Unknown Source)
at org.hsqldb.StatementManager.compile(Unknown Source)
at org.hsqldb.Session.execute(Unknown Source)
... 63 more 
```

* * *

根据我的阅读，数据模型应该是自动生成的，但我只看到了 Hibernate 的示例。有没有办法链接 JPA 数据模型并使用 HSQLDB 的内存模式创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:57:00.570

如果缺少表，则需要将 eclipselink.ddl-generation 属性设置为“create-tables”，以让 Eclipselink 为您创建它们。此处发布了一个示例：[http ://wiki.eclipse.org/EclipseLink/Examples/JPA/DDL](http://wiki.eclipse.org/EclipseLink/Examples/JPA/DDL)

# scala - 来自对象的奇怪类名的含义

> ID：13184531
> 
> 赞同：3
> 
> 时间：2012-11-01T19:56:09.170
> 
> 标签：scala

```
object Initialization {

  def main(args: Array[String]): Unit = {

    val list = Traversable(1,2,4,5)

    //list.foreach(println)

    println( list.getClass.getSimpleName )

  }

} 
```

它可以打印`$colon$colon`，但我预计会出现类似`List`. 这个不起眼的名字是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:58:31.113

这是因为[`List`](http://www.scala-lang.org/api/current/scala/collection/immutable/List.html)它是一个密封的超类，它位于案例类[`::`](http://www.scala-lang.org/api/current/scala/collection/immutable/%24colon%24colon.html)和对象之上[`Nil`](http://www.scala-lang.org/api/current/scala/collection/immutable/Nil%24.html)（请参阅List 文档下的*已知子类部分）。*`::`发音为*cons*，以大多数传统函数式编程语言中的列表 cons 运算符命名。

由于您的列表头*实际上*是案例类的一个实例`::`，并且 Scala 使用名称修饰来表示 JVM 上的非单词类名称，因此您最终`$colon$colon`会使用反射来获取名称。

**更新：**我不确定您要使用类名做什么，但您可能可以使用它[`stringPrefix`](http://www.scala-lang.org/api/current/scala/collection/GenTraversableLike.html#stringPrefix%3aString)。它是为任何扩展定义的[`GenTraversableLike`](http://www.scala-lang.org/api/current/scala/collection/GenTraversableLike.html)，这几乎是每个 Scala 集合类型。

如果您尝试使用类名进行控制流，您可能应该尝试其他方法。模式匹配会很好地工作，例如：

```
xs match {
  list: List[_] => // do list stuff
  set: Set[_] => // do set stuff
} 
```

# jslint - JSLint：如何使用它？

> ID：13184537
> 
> 赞同：2
> 
> 时间：2012-11-01T19:56:34.633
> 
> 标签：jslint

我知道 JSLint 是用于 JavaScript 开发的一个很好的工具，但我在全局理解中存在一些黑暗点。

1.  如何在我的开发环境中使用它？换句话说，您如何以及何时对您的代码运行 JSLint？我已经看到了 Aptana 集成，但它似乎没有考虑到以下语句：

    ```
    /* jslint nomen: false */ 
    ```

2.  如何在客户端开发环境中正常工作？我希望 JSLint 在解析包括“console”、“$”或“JQuery”等对象的调用时感觉良好。

3.  如何在具有多个文件的整个项目中使用它（其中没有导入语句）？

我已经阅读了很多建议在 jslint 上复制粘贴以正确睡眠的声明，因此任何包含配置在线 JSLint 表单的答案都将被视为无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:20:39.903

我很抱歉写这个答案，这不是一个真正的答案。我发现的最佳解决方案是使用 JSHint，它与 JSLint 并行，具有一些不错的额外功能：

*   使用类似命令的 NPM 可以轻松安装（也适用于 JSLint），需要 NPM：

    ```
    npm install -g jshint 
    ```

*   对大量文件执行很容易（不适用于 JSLint）：

    ```
    jshint mycodedirectory 
    ```

*   可以通过*--config*选项进行配置，配置文件如下所示：

    ```
    {
      "curly":true,
      "eqeqeq": true,
      "immed": true,
      "bitwise": true,
      "newcap": true,
      "noempty": true,
      "unused": true,
      "camelcase":true,
      "undef": true,
      "strict": true,
      "trailing": true,
      "maxparams": 7,
      "maxdepth": 5,
      "maxstatements": 50,
      "maxcomplexity": 13
    } 
    ```

该解决方案适用于浏览器和服务器代码，它独立于 IDE 和 OS，可以轻松集成到持续集成过程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:14:54.470

有人提出了一种解决方案，可以使用 node.js 在您的项目中自动运行它：

[自动化 JSLint 验证](http://af-design.com/blog/2011/01/04/automating-jslint-validation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:09:29.530

我在 Emacs/WinXP 上为 WSH使用（稍作修改）[JSLINT 。](http://code.google.com/p/jslint-for-wsh/)它在我输入时突出显示有问题的代码：

*   这不仅对强制执行配置的编码风格有很大帮助，而且在执行代码之前发现许多 JavaScript 语法错误。

*   它确实尊重诸如`/* jslint nomen: false */`.

*   当您询问使用 jQuery 在浏览器环境中运行的 linting 代码时，只需使用标准 JSLint 选项：

    ```
    /*jslint browser: true */
    /*global $ */ 
    ```

请务必将包含的 JSLint 代码替换为最新版本。

# entity-framework - 使用 Contains() 优化实体框架查询的方法有哪些？

> ID：13184540
> 
> 赞同：3
> 
> 时间：2012-11-01T19:56:48.453
> 
> 标签：entity-framework

Wee 从数据库加载大对象图。查询有很多 Includes，Where() 使用 Contains() 过滤最终结果。包含大约一千个条目的集合调用包含。

分析器显示了可怕的人类不可读的 SQL。由于 Contains()，无法预编译查询。

有什么方法可以优化此类查询吗？

**更新**

```
public List<Vulner> GetVulnersBySecurityObjectIds(int[] softwareIds, int[] productIds)
        {
            var sw = new Stopwatch();

            var query = from vulner in _businessModel.DataModel.VulnerSet
                        join vt in _businessModel.DataModel.ObjectVulnerTieSet.Where(ovt => softwareIds.Contains(ovt.SecurityObjectId))
                        on vulner.Id equals vt.VulnerId
                        select vulner;

            var result = ((ObjectQuery<Vulner>)query.OrderBy(v => v.Id).Distinct())
                .Include("Descriptions")
                .Include("Data")
                .Include("VulnerStatuses")
                .Include("GlobalIdentifiers")
                .Include("ObjectVulnerTies")
                .Include("Object.ProductObjectTies.Product")
                .Include("VulnerComment");

            //Если переданы конкретные продукты, добавляем фильтрацию
            if (productIds.HasValues())
                result = (ObjectQuery<Vulner>)result.Where(v => v.Object.ProductObjectTies.Any(p => productIds.Contains(p.ProductId)));

            sw.Start();
            var str = result.ToTraceString();
            sw.Stop();
            Debug.WriteLine("Сборка запроса заняла {0} секунд.", sw.Elapsed.TotalSeconds);
            sw.Restart();
            var list = result.ToList();
            sw.Stop();
            Debug.WriteLine("Получение уязвимостей заняло {0} секунд.", sw.Elapsed.TotalSeconds);

            return list;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:56:25.480

几乎可以肯定的是，尽管有更多的 db 往返，但将查询分成几部分效果更好。总是建议限制包含的数量，因为它们不仅会放大查询的大小和复杂性（正如您所注意到的），而且还会在长度和宽度上放大结果集。此外，它们经常被翻译成外部连接。

除此之外，使用`Contains`您的方式是可以的。

抱歉，如果不知道您的数据模型和所涉及的表的大小，很难更具体。

# .htaccess - Htaccess 和 restfull 应用程序

> ID：13184542
> 
> 赞同：0
> 
> 时间：2012-11-01T19:57:02.747
> 
> 标签：.htaccess, restful-url

我不太擅长 htaccess，所以在这里寻求帮助。我有一个网络应用程序在运行

```
myserver.com/index.html 
```

我将请求（`GET,PUT,DELETE`）发送到控制器：

```
myserver.com/controller.php?id=5 
```

有没有一种方法可以让我使用 htaccess 通过类似的 url 提交

```
myserver.com/controller/5 
```

我玩弄了我的`htaccess`但只是在尝试点击`index.html`页面时创建了 500 个错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:13:10.593

如果您发送类似的请求：`myserver.com/controller/5`并且您想使用 mod_rewrite 将其重写回`/controller.php?id=5`，您可以使用以下规则：

```
RewriteEngine On
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/([^/]+)$ /$1.php?id=$2 [L] 
```

或者不那么普遍：

```
RewriteEngine On
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule ^/?controller/([^/]+)$ /controller.php?id=$1 [L] 
```

# php - 如何为 WordPress 帖子类型设置默认排序

> ID：13184551
> 
> 赞同：0
> 
> 时间：2012-11-01T19:57:36.830
> 
> 标签：php, wordpress

我创建了一个帖子类型“事件”，它使用自定义字段“基准”（瑞典语表示日期）。我希望此帖子类型的默认视图按此字段排序。

到目前为止，我得到了：

```
 register_post_type(
                'events',
                array(
                        'labels' => array(
                                'name' => __( 'Arrangemang' ),
                                'singular_name' => __( 'Arrangemang' )
                        ),
                        'supports' => array(
                                'title',
                                'editor',
                                'custom-fields'
                        ),
                        'public' => true,
                        'has_archive' => true,
                        'query_var' => array(
                                'post_type' => 'events',
                                'meta_key' => 'Datum',
                                'orderby' => 'meta_value',
                                'order' => 'ASC',
                        ),
                )
        ); 
```

但是排序不起作用。如果我在事件的存档页面上运行，`print_r($wp_query->query_vars);`我会得到：

```
Array
(
    [post_type] => events
    [error] =>
    [m] => 0
    [p] => 0
    [post_parent] =>
    [subpost] =>
    [subpost_id] =>
    [attachment] =>
    [attachment_id] => 0
    [name] =>
    [static] =>
    [pagename] =>
    [page_id] => 0
    [second] =>
    [minute] =>
    [hour] =>
    [day] => 0
    [monthnum] => 0
    [year] => 0
    [w] => 0
    [category_name] =>
    [tag] =>
    [cat] =>
    [tag_id] =>
    [author_name] =>
    [feed] =>
    [tb] =>
    [paged] => 0
    [comments_popup] =>
    [meta_key] =>
    [meta_value] =>
    [preview] =>
    [s] =>
    [sentence] =>
    [fields] =>
    [category__in] => Array
        (
        )

    [category__not_in] => Array
        (
        )

    [category__and] => Array
        (
        )

    [post__in] => Array
        (
        )

    [post__not_in] => Array
        (
        )

    [tag__in] => Array
        (
        )

    [tag__not_in] => Array
        (
        )

    [tag__and] => Array
        (
        )

    [tag_slug__in] => Array
        (
        )

    [tag_slug__and] => Array
        (
        )

    [meta_query] => Array
        (
        )

    [ignore_sticky_posts] =>
    [suppress_filters] =>
    [cache_results] => 1
    [update_post_term_cache] => 1
    [update_post_meta_cache] => 1
    [posts_per_page] => 100
    [nopaging] =>
    [comments_per_page] => 50
    [no_found_rows] =>
    [order] => DESC
    [orderby] => wp_posts.post_date DESC
) 
```

我是否误解了 的论点`query_var`，`register_post_type`或者为什么没有按照我的要求对列表进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:18:34.453

据我了解， query_var 只能是布尔值，不处理自定义帖子类型的排序。一种解决方案是为您的帖子类型创建一个自定义存档页面并在那里修改循环，以便该自定义帖子类型的存档页面始终按元值排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:25:24.220

我尝试修改存档页面，但最终只查询了两次帖子，所以如果查询是正确的，我连接了“parse_query”以按信息添加顺序。

稍后我可能需要更好地定义正确的，但现在它工作正常，查询只运行一次。

```
add_action('parse_request', 'event_sort');

function event_sort($a)
{
   if($a->query_vars AND count($a->query_vars) == 1 AND $a->query_vars['post_type'] == 'events')
   {
      $a->query_vars['meta_key'] = 'Datum';
      $a->query_vars['orderby'] = 'meta_value';
      $a->query_vars['order'] = 'ASC';
   }
} 
```

在我发现之前`parse_request`我使用过`parse_query`：

```
add_action('parse_query', 'event_sort');

function event_sort($a)
{
   if($a->query AND count($a->query) == 1 AND $a->query['post_type'] == 'events')
   {
      global $wp_query;
      $wp_query->set('meta_key', 'Datum');
      $wp_query->set('orderby', 'meta_value');
      $wp_query->set('order', 'ASC');
   }
} 
```

# python - 列表到 df.to-csv() 中的字符串

> ID：13184553
> 
> 赞同：4
> 
> 时间：2012-11-01T19:57:40.057
> 
> 标签：python, pandas

我有一个数据框，其中包含一个具有列表的列。当我将数据框写入文件然后重新打开它时，我最终将列表转换为字符串。有没有办法安全地读取/写入以列表为成员的数据帧？

```
df1 = DataFrame({'a':[['john quincy', 'tom jones', 'jerry rice'],['bob smith','sally ride','little wayne'],['seven','eight','nine'],['ten','eleven','twelve']],'b':[9,2,4,5], 'c': [7,3,0,9]})

df1.to_csv('temp.csv')
df2 = read_csv('temp.csv')

#note how the list (df1) has been converted to a string (df2)
df1['a'][0]
['john quincy', 'tom jones', 'jerry rice']

df2['a'][0]
"['john quincy', 'tom jones', 'jerry rice']" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:15:04.673

不需要首先将列表转换为字符串，列表将自动转换为字符串。只需编写包含列表的数据框，然后`ast.literal_eval`使用`df2`

```
 a  b  c
0   ['john quincy', 'tom jones', 'jerry rice']  9  7
1  ['bob smith', 'sally ride', 'little wayne']  2  3
2                   ['seven', 'eight', 'nine']  4  0
3                  ['ten', 'eleven', 'twelve']  5  9

df1.to_csv('temp.csv')
df2 = read_csv('temp.csv') 
```

用于`ast.literal_eval`将字符串返回到列表：

```
import ast
fd2['a']=df2['a'].apply(lambda x: ast.literal_eval(x))
type(df2['a'][1]) 
```

输出：

```
list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:03:42.460

问题在这里：

```
df2['a'] =df2['a'].map(f)
                   ^^^^^^ 
```

在哪里`f = lambda x : ','.join(x)`

再次加入没有意义，您想将其拆分为列表：

```
df2['a'] = df2['a'].map(lambda L: L.split(',')) 
```

# php - 我应该为 Codeigniter 中的每个页面创建一个类吗

> ID：13184554
> 
> 赞同：0
> 
> 时间：2012-11-01T19:57:42.913
> 
> 标签：php, codeigniter

大多数情况下，这个问题与编程无关，就像如何使用问题一样。正如我上面所说，我应该为codeigniter中的每个页面创建一个类吗？或者我可以为每一页制作功能？如果两者都是正确的，哪一个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:32:17.717

如果您想制作类似“/widgets/view/1”或“/widgets/edit/1”或“/widgets/delete/1”的部分/页面，您的代码将是：

```
class Widgets extends CI_Controller {
     public function view($id)
     {
         //Go get widget by id $id
     }

     public function edit($id)
     {

     }

     public function delete($id)
     {

     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:01:41.780

请查看 CI 路由[http://ellislab.com/codeigniter/user_guide/general/routing.html](http://ellislab.com/codeigniter/user_guide/general/routing.html)

您可以为每个页面使用 1 个具有 20 个功能的控制器类，或者您可以使用 4 个具有 5 个页面的控制器等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:01:07.897

这取决于页面的复杂性和相似性。如果它们真的很相似，那么创建很多类可能是一种浪费，但总的来说，我至少会为每页创建一个类。

# multithreading - 在非 GUI 线程中创建 QWidget

> ID：13184555
> 
> 赞同：12
> 
> 时间：2012-11-01T19:57:43.197
> 
> 标签：multithreading, qt, qt4

是的，我知道你不能从非 GUI 线程中使用 GUI 的东西。但是，能够创建一个 QWidget 对象，将它发送到 GUI 线程，然后向它发送信号似乎是合理的。但是，当我尝试这样做时，我收到无法移动小部件的错误。但是，这似乎有效：

```
#include <iostream>

#include <QApplication>
#include <QtConcurrentRun>
#include <QDialog>

class BasicViewer : public QDialog
{
Q_OBJECT

public:
  void Function(const float a)
  {
    std::cout << a << std::endl;
  }
};

struct BasicViewerWrapper : public QObject
{
Q_OBJECT
public:
  BasicViewer WrappedBasicViewer;

  void Function(const float a)
  {
    WrappedBasicViewer.Function(a);
  }
};

#include "main.moc" // For CMake's automoc

void Function2()
{
  BasicViewerWrapper basicViewerWrapper;
  basicViewerWrapper.moveToThread(QCoreApplication::instance()->thread());

  basicViewerWrapper.Function(2.0f);
}

void Function1()
{
  Function2();
}

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);

  QtConcurrent::run(Function1);

  std::cout << "End" << std::endl;
  return app.exec();
} 
```

我创建了一个包装类，其 API 与 QWidget 相同，它存储了我想直接创建的 QWidget 的实例。我被允许创建该包装器，将其移动到 GUI 线程，然后使用它。我的问题是，有没有办法做到这一点而不必编写这个包装器？这似乎很乏味，而且由于这个概念有效，我不明白为什么不能直接完成。有什么想法吗？

- - - - - - 编辑 - - - - - - - -

第一个例子很糟糕，因为它没有尝试对 GUI 元素做任何事情。此示例确实生成“无法为位于不同线程中的父级创建子级”。

```
#include <iostream>

#include <QApplication>
#include <QtConcurrentRun>
#include <QMessageBox>

class BasicViewer : public QMessageBox
{
Q_OBJECT

public:

};

struct BasicViewerWrapper : public QObject
{
Q_OBJECT
public:
  BasicViewer WrappedBasicViewer;

  void exec()
  {
    WrappedBasicViewer.exec();
  }
};

#include "main.moc" // For CMake's automoc

void Function2()
{
  BasicViewerWrapper basicViewerWrapper;
  basicViewerWrapper.moveToThread(QCoreApplication::instance()->thread());
  basicViewerWrapper.exec();
}

void Function1()
{
  Function2();
}

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);

  QtConcurrent::run(Function1);

  return app.exec();
} 
```

------------ 编辑 2 ----------------

我认为这会起作用，因为在移动 Wrapper 的线程之后创建了成员对象：

```
#include <iostream>

#include <QApplication>
#include <QtConcurrentRun>
#include <QMessageBox>

class BasicViewer : public QMessageBox
{
Q_OBJECT

public:

};

struct BasicViewerWrapper : public QObject
{
Q_OBJECT
public:
  BasicViewer* WrappedBasicViewer;

  void exec()
  {
    WrappedBasicViewer->exec();
  }

  void create()
  {
    WrappedBasicViewer = new BasicViewer;
  }
};

#include "main.moc" // For CMake's automoc

void Function2()
{
  BasicViewerWrapper basicViewerWrapper;
  basicViewerWrapper.moveToThread(QCoreApplication::instance()->thread());
  basicViewerWrapper.create();
  basicViewerWrapper.exec();
}

void Function1()
{
  Function2();
}

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);

  QtConcurrent::run(Function1);

  return app.exec();
} 
```

不幸的是，事实并非如此。谁能解释为什么？

--------------- 编辑 3 --------

我不确定为什么会这样？它使用信号来触发 GUI 组件，但 GUI 对象（QDialog）不是还在非 GUI 线程中创建吗？

```
#include <iostream>

#include <QApplication>
#include <QtConcurrentRun>
#include <QMessageBox>

class DialogHandler : public QObject
{
Q_OBJECT

signals:
  void MySignal(int* returnValue);

public:
  DialogHandler()
  {
    connect( this, SIGNAL( MySignal(int*) ), this, SLOT(MySlot(int*)), Qt::BlockingQueuedConnection );
  }

  void EmitSignal(int* returnValue)
  {
    emit MySignal(returnValue);
  }

public slots:
  void MySlot(int* returnValue)
  {
    std::cout << "input: " << *returnValue << std::endl;
    QMessageBox* dialog = new QMessageBox;
    dialog->addButton(QMessageBox::Yes);
    dialog->addButton(QMessageBox::No);
    dialog->setText("Test Text");
    dialog->exec();
    int result = dialog->result();
    if(result == QMessageBox::Yes)
    {
      *returnValue = 1;
    }
    else
    {
      *returnValue = 0;
    }

    delete dialog;
  }
};

#include "main.moc" // For CMake's automoc

void MyFunction()
{
  DialogHandler* dialogHandler = new DialogHandler;
  dialogHandler->moveToThread(QCoreApplication::instance()->thread());

  int returnValue = -1;
  dialogHandler->EmitSignal(&returnValue);

  std::cout << "returnValue: " << returnValue << std::endl;
}

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);

  QtConcurrent::run(MyFunction);

  std::cout << "End" << std::endl;
  return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:22:31.867

Qt 坚持在 GUI 线程中创建小部件。它禁止将小部件移动到不同的线程，以防止它们存在于 GUI 线程之外。实际上，您上面的示例并**没有**`BasicViewer`将 移动到另一个线程；它只会移动`BasicViewerWrapper`到不同的线程。`BasicViewerWrapper::Function`如果您在and中打印出指向包含线程的指针，您可以看到这一点`BasicViewer::Function`：

```
std::cout << std::hex << thread() << std::endl; 
```

如果您确实希望从 GUI 线程外部触发小部件的创建，则更建议其他线程通知 GUI 线程创建您想要的小部件。您可以从连接到创建小部件的 GUI 线程中的插槽的非 GUI 线程发出信号，也可以调用 GUI 线程中的函数来使用[`QMetaObject::invokeMethod`](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod).

**编辑**

不幸的是，除了`QMetaObject::invokeMethod`尝试在`QObject`. 过去，我尝试通过将方法调用放在单独的类或函数中来解决可读性问题，但不可否认，这并不完美。

您的第三个示例不起作用，因为`QObject::moveToThread`不是同步的。在对象实际移动到目标线程之前，控制必须返回目标线程的事件循环。因此，您可能需要结合使用 sleep 语句和对`QCoreApplication::processEvents`after call 的调用`moveToThread`。在这些调用之后，您可能应该调用`basicViewerWrapper::create()`和`basicViewerWrapper::exec()`via `QMetaObject::invokeMethod`。

# google-apps-script - 在 Google Apps Script Web 应用程序中获取 msgBox 的问题

> ID：13184557
> 
> 赞同：0
> 
> 时间：2012-11-01T19:57:47.037
> 
> 标签：google-apps-script

我对 Google Apps Script 网络应用程序有一点问题。以下脚本示例在其内部文档后可在 Web 应用程序中完美运行。但作为浏览器中的独立应用程序，我不断收到错误消息。请问如何使**“Browser.msgBox（提示）”**在浏览器中工作？

如果您想查看错误消息，可以在[此处](https://script.google.com/macros/s/AKfycbzCvQK8yNeZH8FPrtYwnKMgJSRI2QqEeTYdq8TB4xpb3fDmn5k/exec)访问该应用程序。

```
// Script-as-app template.
function doGet() {
var app = UiApp.createApplication();

var button = app.createButton('Click Me');
app.add(button);

var label = app.createLabel('The button was clicked.')
             .setId('statusLabel')
             .setVisible(false);
app.add(label);

var handler = app.createServerHandler('myClickHandler');
handler.addCallbackElement(label);
button.addClickHandler(handler);

return app;
}

function myClickHandler(e) {
var app = UiApp.getActiveApplication();

var label = app.getElementById('statusLabel');
label.setVisible(true);

Browser.msgBox("hello world");//THIS  IS MY PROBLEM!!!

 app.close();
 return app;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T04:34:57.123

`Browser.msgBox(prompt)`仅当应用程序显示为对话框时才有效，例如在 Google 电子表格中。无法在独立的 web 应用程序中暂停脚本执行。

`app.close()`也不能正常工作-您只是无法在服务器端的客户端浏览器上关闭独立的 UI。

您可以使用[PopUpPanel](https://developers.google.com/apps-script/reference/ui/popup-panel)在 Web 应用程序中实现 msgBox 功能，但请记住，每个回调都以您的应用程序的新实例开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T04:00:51.660

事实证明，这个`Browser.msgBox(prompt)`名字很糟糕。唯一受支持的地方是容器绑定脚本（不是独立的 Web 应用程序），并且仅当容器是电子表格时。

在 UI 服务中，您在 IDE/编辑器之外运行 - 您可能对本教程感兴趣，[该教程](https://sites.google.com/site/scriptsexamples/learn-by-example/other-examples/stock-watcher-reloaded/debug-and-test)描述了在该环境中调试的一种方法。

# scala - Scala 类型问题：Char 到 Any

> ID：13184559
> 
> 赞同：0
> 
> 时间：2012-11-01T19:58:02.150
> 
> 标签：scala

我正在尝试递归地实现一个方法，但我很困惑，因为在某些时候编译器认为它返回`List[List[Any]]`而不是`List[List[Char]]`. 这是我的功能：

```
def anag(wrd: List[Char]): List[List[Char]] = if(wrd.isEmpty) List(wrd)
    else wrd.map(l => l :: anag(wrd.tail)) //found: List[List[Any]]

def anag(wrd: List[Char]): List[List[Char]] = if(wrd.isEmpty) List(wrd)
    else wrd.map(l => l :: wrd.tail) //OK 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:02:17.953

函数 anag 返回 List[List[Char]] 您将它与 char 组合：

```
l :: anag(wrd.tail) //prepending a char to a list of List[Char] 
```

第二个例子没问题，因为 wrd.tail 是 List[Char] 类型

编辑：如何解决？因为这可能是针对 coursera 上的作业，所以我将把它留给你。您只需要遍历整个单词和递归调用 anag 返回的所有部分解决方案（查看理解）

您还可以使用 scala 库中的方法排列找到列表的所有排列：

```
wrd.permutations.toList 
```

# function - 将 C++/CLI 类方法作为 C 函数指针传递

> ID：13184568
> 
> 赞同：11
> 
> 时间：2012-11-01T19:58:32.163
> 
> 标签：function, callback, c++-cli

我有一个提供此标头的第三方 C 库：

```
//CLibrary.h
#include <Windows.h>
#include <process.h>
typedef void (WINAPI *CLibEventCallback)(int event, void *data);
__declspec(dllexport) bool CLibStart (CLibEventCallback callback, void *data);

// CLibrary.c -- sample implementation
static CLibEventCallback cb;

void _cdecl DoWork (void *ptr)
{
    for (int i = 0; i < 10; ++i)
    {
        cb (i*i, ptr);
        Sleep (500);
    }
}

__declspec(dllexport) bool CLibStart (CLibEventCallback callback, void *data)
{
    cb = callback; // save address for DoWork thread...
    _beginthread (DoWork, 0, data);
    return true;
} 
```

我需要创建一个可以调用**CLibStart**并提供类方法作为函数指针的 C++/CLI 类。如下所示，这需要使用 GetFunctionPointerForDelegate 来完成。因为删除构造函数包含“this”并且不需要静态方法，所以我不需要将“this”传递给 CLibStart。

```
using namespace System;
using namespace System::Runtime::InteropServices;

namespace Sample {
    public ref class ManagedClass
    {   
        delegate void CLibraryDelegate (int event, void *data);

    private:
        CLibraryDelegate^ managedDelegate;
        IntPtr unmanagedDelegatePtr;
        int someInstanceData;

    public:
        ManagedClass() 
        { 
            this->managedDelegate = gcnew CLibraryDelegate(this, &ManagedClass::ManagedCallback);
            this->unmanagedDelegatePtr = Marshal::GetFunctionPointerForDelegate(this->managedDelegate);
            this->someInstanceData = 42;
        }

        void Start ()
        {
            // since the delegate includes an implicit 'this' (as static function is not needed)
            // I no longer need to pass 'this' in the second parameter!
            CLibStart ((CLibEventCallback) (void *) unmanagedDelegatePtr, nullptr); 
        }

    private:
        void Log (String^ msg)
        {
            Console::WriteLine (String::Format ("someInstanceData: {0}, message: {1}", this->someInstanceData, msg));  
        }

        void ManagedCallback (int eventType, void *data)
        {
            // no longer need "data" to contain 'this'
            this->Log (String::Format ("Received Event {0}", eventType));
        }
    };
} 
```

所有这些都可以使用这个 C# 测试器编译并运行良好：

```
using System;
using Sample;

namespace Tester
{
    class Program
    {
        static void Main(string[] args)
        {
            var mc = new ManagedClass();
            mc.Start();
            Console.ReadKey();
        }
    }
} 
```

样本输出：

```
Received Event 0
Received Event 1
Received Event 4
Received Event 9
Received Event 16
Received Event 25
Received Event 36
Received Event 49
Received Event 64
Received Event 81 
```

**悬而未决的问题：**

1.  我有这种感觉，我需要使用 gcroot 和/或 pin_ptr？如果是这样，怎么做？在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-08-01T10:56:17.770

gcroot 应该在 ref 类存储委托的地方，例如：

```
gcroot<CLibraryDelegate^> managedDelegate; 
```

# github - 过滤掉 Github for Windows 中的 ReSharper 文件

> ID：13184569
> 
> 赞同：0
> 
> 时间：2012-11-01T19:58:34.100
> 
> 标签：github, resharper, gitignore

这可能已经被问过好几次了，我已经尝试了很多提议的 .gitignore 条目，但我似乎无法从我的 GitHub for Windows 提交中过滤掉 ._ReSharper .crc 文件。

我在 .gitingore 中有几个与 ReSharper 相关的条目：

`*\_ReSharper*` `_ReSharper*` `_ReSharper.*`

但无论如何，都要提交 .crc 文件：

![在此处输入图像描述](../Images/7127843fde289f402b5675555b7de8f0.png)

我应该使用什么条目来防止 RS 东西提交到我的仓库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:03:00.410

这对我有用：`_ReSharper*/`

# knockout.js - 如何通过淘汰赛和水豚解决这种比赛条件？

> ID：13184578
> 
> 赞同：1
> 
> 时间：2012-11-01T19:59:08.923
> 
> 标签：knockout.js, capybara, wijmo, knockback.js

我有一个页面通过 wijcombobox 敲除绑定（[http://wijmo.com/wiki/index.php/Using_Wijmo_with_Knockout](http://wijmo.com/wiki/index.php/Using_Wijmo_with_Knockout)）呈现 wijmo 组合框。由于测试运行和点击事件被绑定之间存在竞争条件，我很难使用 capybara 进行测试。可能还有其他比赛条件，但这是目前让我绊倒的比赛条件。这是我目前的解决方法：

```
def click_on_combobox_till_options_appear
  wait_until(10) do
    page.find('.wijmo-wijcombobox-trigger').click
    page.has_css?('.wijmo-wijlist-item')
  end
end 
```

我正在使用“kb-inject”来设置我的 ViewModel 绑定。

是否有我可以连接的 javascript 事件或我可以测试的属性以指示`applyBindings`已完成执行，这样我就可以避免像上面那样的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:14:25.223

在等待`applyBindings`被调用方面，我们提出了以下解决方法。这不是很好，但应该作为解决类似问题的基础（替换`App`为有意义的命名空间）：

```
def wait_for_ko_bindings
  js = <<END_JS
$(function() {
  ko.bindingHandlers.isLoadedForTests = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
      App.ko_bindings_loaded_for_tests = true;
    }
  };
  var viewModel = {};

  var testNode = document.createElement('div');
  testNode.innerHTML = '<div data-bind="isLoadedForTests:1"></div>';
  document.body.appendChild(testNode);
  kb.applyBindings(viewModel, testNode);
});
END_JS
  page.execute_script(js)
  wait_until do
    page.evaluate_script('App.ko_bindings_loaded_for_tests === true')
  end
end 
```

特别是对于 wijcombobox，我们发现以下工作：

```
def click_combobox
  wait_until(10) do
    page.find('.wijmo-wijcombobox-trigger').click
    page.all('.wijmo-wijlist-item').length > 0
  end
end 
```

# java - 异常在哪里捕获？

> ID：13184579
> 
> 赞同：-1
> 
> 时间：2012-11-01T19:59:12.220
> 
> 标签：java, exception-handling

我正在阅读课堂上朋友的笔记，我想知道以下代码评论中问题的答案是什么？

```
public void withdraw(double amount) { 
        if (amount > balance) { 
            IllegalArgumentException exception1 = new IllegalArgumentException("Amount exceeds balance"); 
            throw exception1; //where caught?? 
        }
        balance = balance - amount;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:01:20.470

IllegalArgumentException 是一个未经检查的异常，所以如果你没有在程序中的某个地方捕获它，它会一直上升，直到它到达 VM，然后执行停止。

归功于@JBNizet：当您的方法从不是主线程的线程调用时，当抛出异常时，该线程将停止。但主线程将继续执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:01:04.290

如果您不在方法中处理它，您从方法抛出的异常将委托给调用它的方法。最后，它遍历方法调用层次结构，直到主线程堆栈的底部，这就是您的`main`方法。现在，如果 main 方法没有处理异常，那么它`JVM`会停止你的主线程，并将发生的异常显示为完整的堆栈跟踪。

正如@JBNizet 在评论中指出的那样，如果您的方法是从其他不是`main`线程的线程调用的，那么当异常到达其`run`方法时，该线程将停止。但主线程将继续执行。您可以猜到为什么，因为每个线程都有自己的`stack`，所以主线程与`stack`发生异常的线程不同。

# javascript - 未呈现带有对话框的 JSF 按钮

> ID：13184582
> 
> 赞同：0
> 
> 时间：2012-11-01T19:59:35.643
> 
> 标签：javascript, jquery, jsf, jsf-2

我创建了这个带有问题对话框的 JSF 按钮示例：

```
<!-- hidden button -->
<h:commandButton id="deleterow" value="HiddenDelete"  action="#{AccountProfileTabGeneralController.saveData}" style="display:none" update="growl">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton>

<!-- edit button -->
<h:button style="position:absolute; bottom:12px; right:12%;" rendered="#{AccountProfileTabGeneralController.editable}" styleClass="lbimage" value=" Save Account " onclick="editdialog(this, 'Do you want to save the changes?'); return false;" /> 
```

我使用这个 JS 来显示对话框：

```
function editdialog(button, a){      
    $("<div />", {
        text: a
    }).dialog({        
        width: 600,
        buttons: {
            "Ok": function() { 
                $("#form\\:deleterow").click();
                $(this).dialog("close");
                button.value = "Processing...";
                button.disabled = true;                  
            }, 
            "Cancel": function(event) { 
                $(this).dialog("close");
                event.preventDefault();
                button.value = "Save Account";
                button.disabled = false;
            } 
        }
    });         
} 
```

但是由于某种原因，然后我单击“确定”按钮，该按钮被禁用并且它不起作用，也许表单的 ID 不正确。我用这个`<h:form id="general">`

我该如何解决这个问题？以及如何在具有不同 ID 的表单中使用代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:27:54.183

如果您将表单的 id 设置为“general”，则 jQuery 选择器可能应该是

```
$("#general\\:deleterow") 
```

但正如您所指出的，您可能有不同的形式，因此选择器非常具体。

我想你会想要这样的东西：

```
$(button).closest("form").find("[id$=deleterow]").click(); 
```

`form`这样做是找到启动该功能的按钮的第一个父元素`editDialog`，然后在该表单内找到`id`以“deleterow”结尾的任何元素。这应该可以工作，因为该`id`元素的将类似于“form_id:deleterow”。

# ios - UITextView 内容大小太短

> ID：13184583
> 
> 赞同：1
> 
> 时间：2012-11-01T19:59:40.047
> 
> 标签：ios, xcode, uitextview

我有一个 UITextView，我想根据它的内容动态调整它的大小。

由于某种原因，文本视图总是比它的内容短！这是代码：

```
_textView.text = [NSString stringWithFormat:@"Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test "];

CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

结果如下：

![UITextView 太短](../Images/0a7563a3e7da8321aae3611f9d63b744.png)

如您所见，UITextView（白色）太短了。如果我把更多或更少的内容放在那里，那么短是一样的，即

![更多文字](../Images/b3076153271beac3e9bbde479ce1b880.png)![少文字](../Images/91eca919dc0af8cab243667c5dd03837.png)

我确定这很简单，但我无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:31:23.883

在调整其框架大小之前将 UITextView 添加到主视图（addSubview）（请参阅[此问题](https://stackoverflow.com/questions/50467/how-do-i-size-a-uitextview-to-its-content)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:27:43.867

我在这里找到了答案：[https](https://stackoverflow.com/a/2487402/255463) ://stackoverflow.com/a/2487402/255463 ，然后我这样做：

首先，我使用情节提要添加了一个 UITextView，然后我也使用情节提要将 textView 嵌入到 UIScrollView 中，然后将每个视图与情节提要的插座连接起来。在视图控制器内部，这是我得到的：

```
#import "DetailViewController.h"

@interface DetailViewController ()

@property (weak, nonatomic) IBOutlet UITextView *textView;
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;

@end

@implementation DetailViewController

@synthesize textView = _textView;
@synthesize scrollView = _scrollView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.textView.text = [NSString stringWithFormat:@"Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test "];
    CGRect frame = self.textView.frame;
    frame.size.height = self.textView.contentSize.height;
    self.textView.frame = frame;

    self.scrollView.contentSize = CGSizeMake(320.0, self.descriptionView.contentSize.height + 147.0);
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T15:29:27.797

我在 iOS7 中使用故事板时遇到了同样的问题。

我的解决方案是添加以下代码：

```
 CGRect newTextViewFrame = self.textView.frame;
    newTextViewFrame.size.width = self.textView.contentSize.width + self.textView.contentInset.right + self.textView.contentInset.left;
    newTextViewFrame.size.height = self.textView.contentSize.height + self.textView.contentInset.top + self.textView.contentInset.bottom;
    self.textView.frame = newTextViewFrame; 
```

在`viewDidAppear:`视图生命周期方法中，它立即调整大小以适合其内容。不幸的是，这种调整大小发生在视图已经出现之后，这意味着用户看到了它的发生。

例子：

```
- (void)viewDidAppear:(BOOL)animated
{
        [super viewDidAppear:animated];

        CGRect newTextViewFrame = self.textView.frame;
        newTextViewFrame.size.width = self.textView.contentSize.width + self.textView.contentInset.right + self.textView.contentInset.left;
        newTextViewFrame.size.height = self.textView.contentSize.height + self.textView.contentInset.top + self.textView.contentInset.bottom;
        self.textView.frame = newTextViewFrame;
} 
```

# c# - WCF 错误：“证书“我的证书”可能没有能够进行密钥交换的私钥

> ID：13184586
> 
> 赞同：19
> 
> 时间：2012-11-01T19:59:41.077
> 
> 标签：c#, wcf, iis, wcf-binding, wcf-security

我有一个 WCF 服务，我试图在我们的生产 Web 服务器 (IIS6) 上托管。我已经建立了网络并将我们的证书绑定到网络。当我尝试浏览到服务 url 时，我在事件日志中收到以下错误：

> 异常消息是：证书 'CN= *.mydomain, OU=Secure Link SSL Wildcard, OU=IT, C=US' 可能没有能够进行密钥交换的私钥，或者进程可能无权访问私钥的权利。有关详细信息，请参阅内部异常.. ---> System.ArgumentException: 证书 'CN=* .mydomain.com, OU=Secure Link SSL Wildcard, OU=IT, O=mydomain, C=US' 可能不是有一个能够进行密钥交换的私钥，或者进程可能没有私钥的访问权限。有关详细信息，请参阅内部异常。---> System.Security.Cryptography.CryptographicException：句柄无效。

我已经确认 ASP.Net 1.1、2 和 4 在“Web 服务扩展”中都设置为“允许”。我还确认证书是在 iis 中设置的，它显示“您有一个与此证书相对应的私钥”。此外，执行权限设置为“脚本和可执行文件”。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-08T23:07:35.553

我遇到了这个问题，结果证明运行服务的帐户没有访问证书私钥的权限。

以下是我用来解决它的步骤：

*   启动证书管理器。通过运行 MMC 来执行此操作，激活 [文件]-[添加/删除管理单元...]，然后添加“证书”，在随后的向导对话框中选择“计算机帐户”和“本地计算机”。
*   在证书管理器中，右键单击相关证书并激活【所有任务】-【管理私钥】
*   这为您提供了一个权限窗口。点击***添加***
*   添加运行此服务的帐户名称或组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:11:01.300

似乎您的证书是为签名而不是密钥交换创建的，我认为这对于 SSL 证书是正常的。

如果您查看[makecert 文档](http://msdn.microsoft.com/en-US/library/bfsktky3.aspx)，您会看到 -sky 开关允许您指定证书是否应该用于签名或密钥交换。您可以尝试使用类型交换创建一个自签名证书，并测试是否仍然出现异常。不要忘记将自签名证书放入机器的受信任的根证书颁发机构文件夹中，以免出现证书无效的异常情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-04T14:29:31.220

这里同样的问题。为了解决这个问题，我将以下行添加到`<system.web>`web.config 的节点。

`<httpRuntime targetFramework="4.7.2"/>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-26T02:44:29.457

还要确保需要访问证书的帐户名称或组也可以访问证书所在的文件夹层次结构。如果您的证书隐藏在例如，'C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys '，并且需要访问它的帐户是'NETWORK SERVICE'，然后'NETWORK SERVICE'需要访问该完整路径。仅仅为文件分配权限是不够的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-09T18:42:32.800

我今天遇到了这个问题，它位于从另一台服务器克隆的服务器上。我必须卸载证书，重新安装证书，并授予对证书的访问权限（与接受的答案中描述的方式相同）。

# c - 提示时出现C无限循环问题

> ID：13184588
> 
> 赞同：0
> 
> 时间：2012-11-01T19:59:48.927
> 
> 标签：c, infinite-loop, scanf, rot13

为什么在这段代码中它会执行无限循环而不再次提示用户

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

void to_rot13(char* value);

int main(){
    char word[1024];
    printf("C ROT13\nSome data to code or decode\n");
    while (1){
        printf(": ");
        scanf("%[^\n]s", word);
        to_rot13(&word);
        printf(": %s\n", word);
    }
    return 0;
}

void to_rot13(char* value){
    unsigned int x;
    for (x = 0; value[x] != '\0'; x++){
        if ((value[x] < 'A') || (value[x] > 'Z' && value[x] < 'a') || (value[x] > 'z')){}
        else if (tolower(value[x]) <= 'm'){value[x] = value[x] + 13;}
        else{value[x] = value[x] - 13;}
    }
} 
```

我想再次提示用户我不能更精确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:02:51.557

```
scanf("%[^\n]s", word); 
```

将换行符留在输入缓冲区中，因此下一个`scanf`立即返回而不读取任何进一步的输入，因为`char`缓冲区中的第一个左侧是换行符。您需要从输入缓冲区中删除换行符。

```
int c;
do {
    c = getchar();
}while(c != '\n' && c != EOF);
if (c == EOF) {
    exit(EXIT_FAILURE); // input borked
} 
```

此外，请注意编译器的警告并传递`word`而不是`&word`to `to_rot13`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:02:27.767

您正在发送 &word 到`to_rot13`（您应该发送 word 或 &word[0]）

# ios - Objective-C – 使用另一个库中的库

> ID：13184589
> 
> 赞同：0
> 
> 时间：2012-11-01T19:59:53.833
> 
> 标签：ios, objective-c, cocoa-touch, sstoolkit

我`SSToolKit`在我的项目中使用。SSToolKit 项目使用`GHUnitTest`. 我想在我的项目中使用 GHUnitTest。我是否需要下载并安装 GHUnitTest 或者我可以使用 SSToolKit 中包含的那个。在这种情况下，最佳做法是什么？（我的应用是 iOS 应用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:06:37.190

您可以使用与 SSToolKit 捆绑的那个，下载另一个库没有意义。基本上，这与您单独下载库相同 - 它只是与另一个库捆绑在一起。

如果您尝试添加另一个 GHUnitTest，它将产生错误（不好 :D）。

# java - 是否可以分发递归算法？

> ID：13184599
> 
> 赞同：2
> 
> 时间：2012-11-01T20:00:46.533
> 
> 标签：java, algorithm

我不确定如何分发递归程序。现在它是递归的并作为单个程序运行，但我的目标是将该程序分发给仅生成数据子集的其他机器。

这是该计划的背景。我给它一个目标（在本例中为 10）和一个具有最小/最大权重的项目列表，它返回每个项目的组合。

所以有3个项目，并且

```
Low = 2, 2, 2
high = 6, 6, 6
Target = 10 
```

结果是：

```
2 2 4
2 3 3
2 4 2
3 2 3
3 3 2
4 2 2 
```

这是完成工作的方法：

```
void distribute (int i, int [] low, int [] high, final int rest, int [] sizes) {
    // System.out.println (i + " " + rest + " " + sizes);
    if (i == sizes.length - 1) {
        if (rest < high [i]) {
            sizes[i] = rest;
            result.add (Arrays.copyOf (sizes, sizes.length));
        }
    }
    else
        for (int c = 0;
             c <= java.lang.Math.min (high [i] - low [i], rest);
             ++c) {
            sizes [i] = c;
            distribute (i + 1, low, high, rest - c, sizes);
        }
} 
```

我想知道是否有人对如何分配输出有任何想法，所以在上面的示例中，如果我有 3 台服务器，每台服务器只生成 2 个唯一条目，而不必生成整个内容。说，事先我知道会有 6 个结果，并希望将 2 个结果分配给每台机器，我该怎么做。有可能吗？如果有，逻辑是什么？

如果有帮助，这是整个程序： http: [//pastebin.com/RikqPgKh](http://pastebin.com/RikqPgKh)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:24:59.317

我想你想在多台机器上运行算法，然后合并结果。您只需要拆分执行即可。这不应该太难，因为参数已经限制了结果。

例如，而不是`L:[2,2,2] H:[6,6,6]`执行

```
L:[2,2,2] H:[3,6,6]
L:[4,2,2] H:[5,6,6]
L:[6,2,2] H:[6,6,6] 
```

# grails - 使用 HttpServletResponse 导出文件以供下载的 Grails 错误

> ID：13184603
> 
> 赞同：0
> 
> 时间：2012-11-01T20:01:04.917
> 
> 标签：grails, groovy, opencsv

我在我的 Grails 应用程序中使用[opencsv](http://opencsv.sourceforge.net/)将属性从我的 Person 域类导出到 CSV。但是，我收到以下错误：

Servlet.service() for servlet [default] 在上下文中与路径 [/myapp] 引发异常 [请求处理失败；嵌套异常是 org.codehaus.groovy.grails.web.pages.exceptions.GroovyPagesException: Error processing GroovyPageView: getOutputStream() has already been called for this response] with root cause Message: getOutputStream() has already been called for this response

通过在线搜索，我认为答案可能是在某处为 HttpServletResponse 响应实现一些 responseComplete() 方法。但是，我不知道该怎么做。有任何想法吗？这是我的代码：

```
def export = {
    def course = Course.get(params.id)
    if(course){
        def persons = course ? Person.findAllByCourse(course) : []

        response.setHeader("Content-disposition",
           "attachment; filename=people.csv")
        response.contentType = "text/csv"
        def out = response.outputStream
        out.withWriter { writer ->

           String[] properties = new String[3]
           def csvWriter = new CSVWriter(writer)
           persons.each { person ->

              properties[0] = person.firstName
              properties[1] = person.lastName
              properties[2] = person.email
              properties[3] = person.phone
              properties[4] = person.address1
              properties[5] = person.address2
              properties[6] = person.city
              properties[7] = person.state
              properties[8] = person.zip5

              csvWriter.writeNext(properties)
           }
           csvWriter.flush()
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:18:22.993

您的问题可能源于显式写入控制器中的输出流，然后是从您的操作返回时 GSP 呈现的默认行为。您可以检查[如何防止 Grails 呈现默认视图？](https://stackoverflow.com/questions/5708654/how-to-prevent-grails-from-rendering-the-default-view)对于这种情况的另一种情况，有几个修复。我目前正在使用的机器上没有 grails 来重新创建问题，但听起来像`return null`在关闭结束时添加显式 to 可能会有所帮助。或通过生成一些令牌输出或 200 状态代码`render`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T13:26:39.657

您必须通过 String[] properties = new String[9] 更改此属性 String[] properties = new String[3]。

这个对我有用。

# c# - 如何使用 C# 使用 OLEDB 访问 excel 标头

> ID：13184606
> 
> 赞同：0
> 
> 时间：2012-11-01T20:01:09.817
> 
> 标签：c#, excel

我正在为许多不同的测试用例创建一个测试用例，每个测试用例都有它的 ID，我正在尝试从 excel 中读取测试数据......

这是我的 excel 表的布局，不知道如何提出正确的设计

![测试用例](../Images/8c55ca035a99257565829b8e426a6cd5.png)

这是我正在阅读的代码：

```
string connectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=" + filename + ";Extended Properties=\"Excel 8.0;HDR=YES;IMEX=1\"";
    string testCaseName = "case_1";
    string query = "SELECT * from [Sheet1$] WHERE test_case_id =\"" + testCaseName + "\"";
    DataTable dt = new DataTable();

    using (OleDbConnection conn = new OleDbConnection(connectionString))
    {
        conn.Open();

        using (OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, conn))
        {
            DataSet ds = new DataSet();
            dataAdapter.Fill(ds);
            dt = ds.Tables[0];
        }

        conn.Close();
    } 
```

问题：

工作`test_case_id == 001_test`正常没有任何问题

但是如果通过了，`test_case_id = 0059_test`那么我将获得相同的数据，`test_case_id`但我`0059_test`没有得到正确的标题名称，我正在获取标题`test_case_id 001_test`

我的问题：如何获取特定的标题`test_case_id`（intro_text，api_text ...._？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T11:20:30.360

默认情况下，第一行作为标题行。您需要在查询中指定标题行。

*例如*：对于**test_case_id 0059_test 标题行号是 3**那么你必须编写如下查询：

```
string query = "SELECT * from [Sheet1$A3:C] WHERE test_case_id = \"" + testCaseName + "\""; 
```

其中 A3 是第一个列标题，C 是最后一个数据列。

# javascript - 我应该将 _TrackPageview Snippet 添加到标记中还是添加到单击链接时触发的 JavaScript 容器中的某个位置？

> ID：13184608
> 
> 赞同：1
> 
> 时间：2012-11-01T20:01:21.477
> 
> 标签：javascript, html, event-handling, google-analytics, analytics

 我正在尝试为用户单击当前托管在灯箱中的按钮设置虚拟网页浏览量。

我知道在普通页面上，我只需要在`<a>`标签中添加代码段，但想知道 .js 灯箱内的功能是否不同。

我是否需要在容器中的某处添加代码段，或者我也可以简单地添加到`<a>`这些链接的标签中？

我将添加以下内容：我想跟踪此表单底部提交按钮的点击次数： 

[http://www.teksystems.com/contact-us](http://www.teksystems.com/contact-us)

我有信心可以将代码放在`<a>`标签中。

但是另外两个链接托管在侧边栏上（可从任何页面访问），另一个位于当您单击“向我们发送消息”时显示的灯箱中

请告诉我，我可以将代码段添加到`<a>`所有链接的标签中（因为我要跟踪的是点击次数）。`<a>`非常感谢大家，如果我可以将这些放在标签中，这就是我想出的：

`<a onclick="javascript: _gaq.push(['_trackPageview', '/header-thank-you/]);" href=”#”&gt;Submit</a>`

`<a onclick="javascript: _gaq.push(['_trackPageview', '/virtual-contact/]);" target="_blank"><span class="link-text">Send us a message</span></a>`

`<a onclick="javascript: _gaq.push(['_trackPageview', '/header-thank-you/]);" href=”#”&gt;</a><span class="link-text">Submit</span></a>`

这是一个我认为函数代码可能进入 js 容器的示例：

```
 `$(newButtonAnchor).click(function () {
        //alert('clicked');
        $(submitButton).click();
        return false;
    });

    var newButtonSpan = document.createElement('span');
    $(newButtonSpan).attr('class', 'text');
    $(newButtonSpan).html($(submitButton).val());` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:45:41.400

我强烈建议将所有 this_gaq 内容封装到中央库中的单独函数中。否则，从长远来看，您可能会面临维护噩梦。

此外：如果你有一个`onclick`参数`<a`不需要`javascript:`作为“protocoll”，这*是*javascript：`<a onclick="_gaq.push...`

从我的角度来看，jQuery 方法是最好的：

```
<style>
.gatracker {} /* does nothing but mark the elements */
</style>

<a target="_blank" href="go/some/where" class="gatracker"><span class="link-text">Send us a message</span></a>

   var ga_clickTracker = function(anchor) {
     ... some code ...
     _gaq.push(['_trackPageview', $(anchor).attr('href')]);
     ...
   };

... onload ...

    // put an eventhandler on all elements with class gatracker
    $('.gatracker').click(function () {
        ga_clickTracker(this);
        return true; // should proceed!!
    }); 
```

# jsp - 未找到指定网址的操作

> ID：13184609
> 
> 赞同：1
> 
> 时间：2012-11-01T20:01:31.360
> 
> 标签：jsp, struts

struts 新手并尝试通过基本教程并收到错误 InvalidPathException: No action config found for the specified url

我爆炸的网址是：`http://localhost:8080/UserAction.do?method=add`

这是我的 struts-config.xml 的一部分

```
<struts-config>
    <form-beans>
        <form-bean name="UserForm" type="Form.UserForm" />
    </form-beans>
    <action-mappings>
        <action path="/user" type="Action.UserAction"  input="/pages/user.jsp"  parameter="method"  name="UserForm" scope="session">
   <forward name="success" path="pages/user.jsp">
    </action-mappings>
</struts-config> 
```

我的用户操作.Java

```
public class UserAction extends DispatchAction {

   public ActionForward add(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {

    //Do some stuff
    UserForm userForm = (UserForm)form;
    userForm.setMessage("Added user");
    return mapping.findForward("success");
}

} 
```

这是用户表单

```
public class UserForm extends ActionForm {

   private String message;

   public UserForm() {
       super(); 
   }

   public String getMessage() { return this.message; }

   public void setMessage(String inMessage) { this.message = inMessage; }

} 
```

最后我的 user.jsp

```
<html>
....
<html:form action="user">
   <table>  
     <tr> 
       <td>
         <html:submit value="add"  onClick="submitForm()"  />
       </td> </tr></table></html:form>
</html> 
```

提交表单很简单

```
function submitForm(){
   document.forms[0].action = "UserAction.do?method=add"
   document.forms[0].submit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:35:58.640

您配置了单个操作，映射到 path `/user`。所以调用这个动作的 URL 是`http://host:port/contextPathOfTheWebApp/user.do`. 在您的情况下，由于您似乎将应用程序部署为根应用程序，因此它应该是`http://localhost:8080/user.do`.

我没有看到用 JavaScript 提交表单的意义。特别是如果它唯一要做的就是将正确的路径更改为不正确的路径。顺便说一句，如果只是通过在其中一个输入中按 enter 来提交表单，则 JavaScript 代码将被绕过。

You should also prefer request-scoped form beans, and respect the Java naming conventions (packages in lower-case)

# c# - 脚手架 - 从不同数据库中的表访问字段

> ID：13184619
> 
> 赞同：0
> 
> 时间：2012-11-01T20:02:06.907
> 
> 标签：c#, scaffolding

我有一个显示在一个数据库中的表的脚手架 C# 站点，但我想从另一个数据库中的表中公开一个关联字段。

当前数据库中有一个存储过程从二级表中检索项目，但是如何封装这些数据并使用它呢？

我已将存储过程添加到当前模型中，但我没有看到使用它的方法。

我研究了复杂类型，认为这可能是要走的路，但我似乎找不到我正在寻找的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:16:37.417

您需要确保您可以从控制器正在使用的数据上下文访问这两个数据库（我猜您正在使用 MVC）。如果您无法从当前上下文访问第二个数据库。确保访问可以访问的上下文，或者将该数据库添加到新的连接字符串并单独访问它。

签入特定控制器以确保它可以访问正确数据库和表中的该字段。完成后，您需要重新编译（构建）并通过模型语法访问视图来更新视图：
@model.yourNewField

# eclipse - Eclipse 3.7 所需插件

> ID：13184620
> 
> 赞同：1
> 
> 时间：2012-11-01T20:02:08.687
> 
> 标签：eclipse, jar, eclipse-plugin

我目前正在运行 Eclipse 3.7 Indigo 我当前的项目是一个插件项目

我想在我现有的项目中试用名为 icePDF 的产品。
所以我从二进制下载中下载了两个所需的jar文件。icepdf-core.jar 和 icepdf-viewer.jar

所以我从现有的 jars 中创建了一个新的插件项目。我添加了两个 jar 文件并创建了插件项目。然后我导出了项目并生成了一个项目 jar 文件。

回到我想要使用icePDF功能的现有项目中。转到依赖项-> 所需插件-> 添加了我的新 icePDF 插件。

我确信我错过了一个关键步骤。因为只要我在 Package Explorer 中关闭 icePDF 项目。我的主项目出现错误。

错误：缺少必需的插件

我不明白的是我至少还有12个其他必需的插件，它们都没有打开。

这是尝试将 icePDF jar 添加到我现有项目的正确方法吗？有没有办法将 jar 合并到插件项目中而无需创建新项目？

***编辑*** 看起来 icePDF 主要使用 Swing。我的项目是基于 SWT 的，我不想在项目中使用 Swing。我正在寻找可以查看现有 pdf、转换 pdf 并将 pdf 打印到本地打印机的东西。

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:13:27.607

如果该插件仅可通过您的工作区使用，则关闭所需插件时 Eclipse 会报告错误是正常行为。我假设其他必需的插件是“标准”Eclipse 插件，例如 EMF；这些不必在您的工作区中，因为它们直接安装到您的 Eclipse 平台中。

另一种方法是将原始罐子放入您的插件项目中。只需创建一个文件夹，例如`lib/`，将 Jars 粘贴到那里，然后将它们添加到插件项目的类路径中。后者有点棘手，因为您必须将它们添加到项目属性以及`Manifest.ml`（在 plugin.xml-editor，IIRC 的“运行时”选项卡中）和`build.properties`文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:20:31.037

请阅读有关[Eclipse 目标平台](http://www.vogella.com/articles/EclipseTargetPlatform/article.html)的信息，因为您似乎不了解该概念。

一般来说，有一个 Eclipse 环境供您开发代码（*您*使用），还有另一个 Eclipse 环境供您开发的插件在其中*运行*（即您的插件的用户使用哪个环境）。第二个在 Eclipse 术语中称为“目标平台”。它们可以不同，例如您在 Eclipse 4.2 中开发，但您的插件应在 Eclipse 3.7 中运行。

如果您自己不创建目标平台，那么 Eclipse 只是假定其当前安装为目标平台（即您的开发环境）。这就是为什么所有“普通”插件都可以用作依赖项而不需要它们在工作区中的原因。但是您的 icePdf 插件不是 Eclipse 安装的一部分（因此不是目标平台的一部分），这就是它需要在工作区中可用的原因。

如果您定义了一个目标平台，那么您可以简单地将这些icepdf 插件添加到其中，并且不再需要将它们放在工作区中。

# php - $_POST 为空或间歇性截断

> ID：13184621
> 
> 赞同：1
> 
> 时间：2012-11-01T20:02:10.623
> 
> 标签：php, post, apache2, truncated

我们看到一个听起来与此处报告的问题相同的问题：

[间歇性空 $_POST 问题](https://stackoverflow.com/questions/8789023/intermittent-empty-post-issue)

我不确定这个问题是否已经解决（但我没有能力评论那个帖子）。

这是一个每天提交数千次的 extjs 表单（json 编码数据），每天可能会记录 20 次失败（记录到我们保留的文本日志中）。我们使用的是 Apache，PHP 5.3.14。

我们对遇到空和截断 POST 数据的用户进行了广泛搜索，并尝试了许多方法，包括：

*   检查 php://input 的值（也为空/截断）
*   检查/增加配置设置，如 post_max_size
*   显式设置内容类型
*   尝试保活设置
*   当数据被截断时，它看起来是随机的（不是特殊字符）
*   发布的数据长度似乎不是一个因素（在随机位置截断，与回发多少字段无关）

一个潜在的线索是，当 POST 完全为空时，它似乎总是与 Internet Explorer 或 Safari 相关联。对于被截断的那些，它似乎并不特定于特定的浏览器（因此这里可能存在两个不同的问题）。

我们已经没有关于尝试什么的想法了——有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T01:16:42.270

我们在我们的应用程序中发现了一些可能导致问题的东西。我们有一个使用 javascript 的菜单，它正在执行表单提交，即 document.formname.submit()。人们在整个页面加载之前点击菜单。此提交有可能提交表单的一部分。这是一个与服务器无关的 javascript HTML 问题。

# facebook - 成功发布后的facebook分享和jquery警报

> ID：13184630
> 
> 赞同：0
> 
> 时间：2012-11-01T20:02:38.437
> 
> 标签：facebook, facebook-javascript-sdk, facebook-sharer

我正在使用以下代码在 facebook 墙上发布，它工作正常，但我需要在成功发布后回电。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">

<script>
function fbs_click() {

  u=location.href;

  t=document.title;

  window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');

  return false;
} 
```

```
<style> html .fb_share_button { display: -moz-inline-block; display:inline-block; padding:1px 20px 0 5px; height:15px; border:1px solid #d8dfea; background:url(http://static.ak.facebook.com/images/share/facebook_share_icon.gif?6:26981) no-repeat top right; } html .fb_share_button:hover { color:#fff; border-color:#295582; background:#3b5998 url(http://static.ak.facebook.com/images/share/facebook_share_icon.gif?6:26981) no-repeat top right; text-decoration:none; } </style>

<a rel="nofollow" href="http://www.facebook.com/share.php?u=<;url>" class="fb_share_button" onclick="return fbs_click()" target="_blank" style="text-decoration:none;">Share</a> 
```

成功发布后我需要一个警报，不需要获取用户 ID 或任何东西。

但我需要一个帖子或分享选项，因为如果我的页面上有喜欢按钮，那么他们就不能更喜欢它了。我需要用户多次发布我的链接。

谢谢。

# html - 有没有办法通过css在表单块中显示一个div（可扩展）？

> ID：13184635
> 
> 赞同：0
> 
> 时间：2012-11-01T20:03:06.113
> 
> 标签：html, css, forms

我正在尝试解决使用当前跨浏览器兼容的 html 的表单中无法包含表单的问题。我可能的解决方法是在表单块之外有一个 div（包含另一个表单的内容），然后使用 css 将其定位在表单中。有没有一种优雅的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:26:17.030

在第二种形式的表单元素上使用绝对定位。

# sql - 将行旋转到 tsql 中的列

> ID：13184637
> 
> 赞同：1
> 
> 时间：2012-11-01T20:03:16.970
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我有下表和以下示例数据

```
ID  Language       Question       SubQuestion     SubSubQuestion    TotalCount  TotalPercent
3      E               9               0                1             88527            73%
3      E               9               0                2             19684            16%
3      E               9               0                3             12960            11%
3      E               9               0                9              933              1% 
```

我想要这样的一排

```
 ID  Language        TotalCount901   TotalPercent901     TotalCount902   TotalPercent902 TotalCount903   TotalPercent903
     3       E            88527           73%                 19684             16%              12960              11% 
```

我已经厌倦了使用 pivot 命令，但它不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:12:14.563

我根据您的列名做了一些假设，但看起来您想使用与此类似的东西。这将同时应用 an`UNPIVOT`和 a`PIVOT`来获取您请求的列中的值：

```
select *
from
(
  select id,
    language,
    col + cast(QUESTION as varchar(10))
      +cast(subquestion as varchar(10))
      +cast(SubSubQuestion as varchar(10)) col,
    value
  from
  (
    select id, language,
      cast(TotalCount as varchar(10)) TotalCount, 
      totalPercent,
      question, subquestion, SubSubQuestion
    from yourtable
  ) usrc
  unpivot
  (
    value 
    for col in (totalcount, totalpercent)
  ) un
) srcpiv
pivot
(
  max(value)
  for col in ([TotalCount901], [totalPercent901], 
              [TotalCount902], [totalPercent902], 
              [TotalCount903], [totalPercent903],
              [TotalCount909], [totalPercent909])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a482e/6)

注意：在执行时`UNPIVOT`，列需要是相同的数据类型。如果不是，那么您将需要转换/强制转换以使数据类型相同。

如果要转换的值数量未知，可以使用动态 sql：

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot 
  = STUFF((SELECT  ',' 
             + QUOTENAME(c.name +
                        cast(QUESTION as varchar(10))
                        +cast(subquestion as varchar(10))
                        +cast(SubSubQuestion as varchar(10)))
           from yourtable t
           cross apply sys.columns as C
           where C.object_id = object_id('yourtable') and
              C.name in ('TotalCount', 'TotalPercent')
           group by c.name, t.question, t.subquestion, t.subsubquestion
           order by t.SubSubQuestion
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'select *
              from
              (
                select id,
                  language,
                  col + cast(QUESTION as varchar(10))
                    +cast(subquestion as varchar(10))
                    +cast(SubSubQuestion as varchar(10)) col,
                  value
                from
                (
                  select id, language,
                    cast(TotalCount as varchar(10)) TotalCount, 
                    totalPercent,
                    question, subquestion, SubSubQuestion
                  from yourtable
                ) usrc
                unpivot
                (
                  value 
                  for col in (totalcount, totalpercent)
                ) un
              ) srcpiv
            pivot 
            (
                max(value)
                for col in (' + @colsPivot + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/acc19/6)

# c# - 如何以编程方式访问 Datagrid 中的 ComboBox

> ID：13184641
> 
> 赞同：0
> 
> 时间：2012-11-01T20:03:22.570
> 
> 标签：c#, wpf, datagrid

我`DataGrid`在 XML 中添加了如下代码。现在，我如何以编程方式访问`ComboBox`命名？`Combo1`我无法使用 name 正常访问它`Combo1`。我希望能够检索它的值，或更改 itemssource 等。

```
<DataGrid x:Name="dgData" AutoGenerateColumns="False" Margin="133,94,23,116" Grid.Column="1" SelectionChanged="dgData_SelectionChanged">
       <DataGrid.Columns>
           <DataGridTextColumn Binding="{Binding Subject}" Header="Subject" Width="*"/>
           <DataGridTemplateColumn Header="Status" Width="100">
               <DataGridTemplateColumn.CellTemplate>
                   <DataTemplate>
                       <ComboBox Name="Combo1" Height="22" ItemsSource="{StaticResource StatusList}" SelectedItem="{Binding Status}"/>
                   </DataTemplate>
               </DataGridTemplateColumn.CellTemplate>
           </DataGridTemplateColumn>
       </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:07:15.160

你应该可以在这里找到你需要的东西。但是，我会说这样做不是最好的做法......

[http://blogs.msdn.com/b/wpfsdk/archive/2007/04/16/how-do-i-programmatically-interact-with-template-generated-elements-part-ii.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2007/04/16/how-do-i-programmatically-interact-with-template-generated-elements-part-ii.aspx)

```
private childItem FindVisualChild<childItem>(DependencyObject obj)
    where childItem : DependencyObject
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(obj, i);
        if (child != null && child is childItem)
            return (childItem)child;
        else
        {
            childItem childOfChild = FindVisualChild<childItem>(child);
            if (childOfChild != null)
                return childOfChild;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:10:18.260

你可以尝试使用这样的东西：

```
 public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T :       DependencyObject
{
    if (depObj != null)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
            if (child != null && child is T)
            {
                yield return (T)child;
            }

            foreach (T childOfChild in FindVisualChildren<T>(child))
            {
                yield return childOfChild;
            }
        }
    }
} 
```

但我建议你阅读更多关于 MVVM 模式的信息。

# ruby-on-rails - rails 3 devise sign_in 避免在根页面上使用默认值

> ID：13184649
> 
> 赞同：2
> 
> 时间：2012-11-01T20:04:10.353
> 
> 标签：ruby-on-rails, devise, sign

我使用 devise for rails 3.2 进行身份验证。我已将默认路由从设计更改为：

```
devise_scope :user do
    get 'signin' => 'devise/sessions#new', :as => :new_user_session
    post 'signin' => 'devise/sessions#create', :as => :user_session
    match 'signout' => 'devise/sessions#destroy', :as => :destroy_user_session,
          :via => Devise.mappings[:user].sign_out_via
  end 
```

现在我的登录和注册表单在根站点上。如何避免访问 127.0.0.1:3000/signin 但在删除它时仅授予对 127.0.0.1:3000 的访问权限，我会在 Authentication#welcome Showing /Volumes/Develop/login_app/app 中收到类似 oMethodError 的错误消息/views/authentication/welcome.html.erb 其中第 6 行提出：

```
undefined method `user_session_path' for #<ActionDispatch::Routing::RoutesProxy:0x007ffb4d711a10>
Extracted source (around line #6): 
```

我在根站点上有登录和登录..看起来像这样

```
<h1>Hello</h1>

<h2>Sign in</h2>

<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
    <div><%= f.label :email %><br />
      <%= f.email_field :email %></div>

    <div><%= f.label :password %><br />
      <%= f.password_field :password %></div>

    <% if devise_mapping.rememberable? -%>
        <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
    <% end -%>

    <div><%= f.submit "Sign in" %></div>
<% end %>

<%- if devise_mapping.recoverable? && controller_name != 'passwords' %>
    <%= link_to "Forgot your password?", new_password_path(resource_name) %><br />
<% end -%>

<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
    <%= devise_error_messages! %>

    <div><%= f.label :email %><br />
      <%= f.email_field :email %></div>

    <div><%= f.label :password %><br />
      <%= f.password_field :password %></div>

    <div><%= f.label :password_confirmation %><br />
      <%= f.password_field :password_confirmation %></div>

    <div><%= f.submit "Sign up" %></div>
<% end %> 
```

现在有人可以来将 127.0.0.1/signin 放在 url 中，然后它会显示 sign_in 表单，我会避免这种情况，因为它应该显示在根站点上......就像 sing_up 一样的场景......谢谢

# java - 最超卖的java警告？

> ID：13184655
> 
> 赞同：-3
> 
> 时间：2012-11-01T20:04:39.877
> 
> 标签：java, eclipse

> **可能重复：**
> [我在哪里更改 Eclipse 中的设置，以便它为 Serializable 类生成 serialVersionUID？](https://stackoverflow.com/questions/12102269/where-do-i-change-the-setting-in-eclipse-so-that-it-would-generate-serialversion)

这个*“可序列化的类没有声明 long 类型的静态最终 serialVersionUID 字段”*警告是怎么回事？十多年来一直困扰着我？我既不想用抑制警告污染我的代码，也不想使用额外的垃圾常量。是否有 Eclipse 设置“不要用那些序列化的警告来打扰我（如果我遇到这个陷阱，我可能会重新考虑这个决定）”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:07:11.787

窗口 - 首选项。在左侧的过滤框中键入“serialVersionUID”。选择树中突出显示的节点。然后在右侧的过滤框中输入“serialVersionUID”。在组合框中选择“忽略”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:08:35.110

在大多数情况下，您不必担心此警告。但是，这里是关于这是什么以及如何正确修复它的简短摘要

[SerialVersionUID 说明](http://io.typepad.com/eben_hewitt_on_java/2005/10/explicitly_set_.html)

# java - 在netbeans的jTextField中设置文本

> ID：13184656
> 
> 赞同：0
> 
> 时间：2012-11-01T20:04:44.267
> 
> 标签：java, jtextfield

我知道如何`JtextField`在 java 中设置文本。但出于某种奇怪的原因。我无法操纵`jtextfield`in netbeans。我想要的是从 中操作文本`main()`，用户将输入字符串并且该字符串应该显示在`jTextField`.

这是代码：

```
import javax.swing.JOptionPane;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Sachin
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(134, 134, 134)
                .addComponent(jButton1)
                .addContainerGap(193, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(53, 53, 53)
                .addComponent(jButton1)
                .addContainerGap(224, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
         String inputValue = JOptionPane.showInputDialog("Please any enter any String");
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:45:59.243

您可以执行以下操作以存储`inputValue`在 NewJFrame 对象中。

```
private String input;

public NewJFrame(String input) {
    this.input = input;
    initComponents();
}

new NewJFrame(inputValue); 
```

然后在 NetBeansIDE 中，您可以在 GUI 编辑器中将 JTextField 的自定义创建代码设置为`new JTextField(input)`或直接调用 setText。

# php - PHP 静态函数 self:: 在 joomla JFactory 类的解释？

> ID：13184657
> 
> 赞同：3
> 
> 时间：2012-11-01T20:04:45.843
> 
> 标签：php, class, function, joomla, self

嗨，我正在查看 Joomla 的代码并试图弄清楚这个函数到底发生了什么。

index.php 调用函数

```
$app = JFactory::getApplication('site'); 
```

jfactory.php 代码

```
public static function getApplication($id = null, $config = array(), $prefix='J')
{
    if (!self::$application) {

        jimport('joomla.application.application');

        self::$application = JApplication::getInstance($id, $config, $prefix);
    }

    return self::$application;
} 
```

application.php 代码..

```
public static function getInstance($client, $config = array(), $prefix = 'J')
{
    static $instances;

    if (!isset($instances)) {
        $instances = array();
    }

    ....... more code ........

    return $instances[$client];
} 
```

现在我无法在函数 getApplication 中弄清楚为什么使用 self:$application。

```
self::$application = JApplication::getInstance($id, $config, $prefix); 
```

$application 始终为空，使用这种方法的目的是什么。我尝试将其修改为

```
$var = JApplication::getInstance($id, $config, $prefix); 
```

并返回它，但它不起作用。

如果有更多知识的人可以尽可能详细地解释这里发生的事情，我将非常高兴。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:48:44.023

`self::`用于访问类的静态成员。

因此在这种情况下，`self::$application`用于在 JFactory 中缓存应用程序对象，以避免多次调用`JApplication::getInstance`更昂贵。

有关静态的更多信息，请参阅[静态关键字](http://php.net/manual/en/language.oop5.static.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:51:46.657

`getApplication()`- 返回对 Global JApplication 对象的引用。[***阅读更多***](http://docs.joomla.org/JFactory_Class)

`self::$member`用于访问静态成员。

这是我能理解的解释。

```
if (!self::$application){ //<-check for the $application static variable of the the class

jimport('joomla.application.application');        
self::$application = JApplication::getInstance($id, $config, $prefix);

//if it does not exist get a new instance otherwise nothing happens because there is no else part 
}

return self::$application; //<- return the object(new one or the existing one) 
```

如果 $application 存在，则保存函数调用。如果没有得到一个新的实例。[***阅读更多***](http://www.inmotionhosting.com/support/edu/joomla-25/create-template/jfactory-get-application)。希望这可以帮助你。

# matrix - 这是使用什么类别/过滤器结构？嵌套区间？

> ID：13184661
> 
> 赞同：0
> 
> 时间：2012-11-01T20:05:19.643
> 
> 标签：matrix, hierarchical-data, categories, nested-sets, websphere-commerce

您可以在他们的类别链接上看到，很明显，他们的 URL 中唯一重要的部分是 URL 本身末尾附近的小散列。

例如，在加热/冷却下找到的热水器类别是： [http ://www.lowes.com/Heating-Cooling/Water-Heaters/_/N-1z11ong/pl?Ns=p_product_avg_rating|1](http://www.lowes.com/Heating-Cooling/Water-Heaters/_/N-1z11ong/pl?Ns=p_product_avg_rating|1)

和热水器类别在管道下找到： [http ://www.lowes.com/Plumbing/Water-Heaters/_/N-1z11qhp/pl?Ns=p_product_avg_rating|1](http://www.lowes.com/Plumbing/Water-Heaters/_/N-1z11qhp/pl?Ns=p_product_avg_rating|1)

话虽这么说，显然它们的结构可能是许多不同的东西......但我唯一能想到的是它是一个十六进制字符串，它被解码为一个数字和分母，但我无法弄清楚......

显然，出于某种原因混淆这一点对他们很重要？

有任何想法吗？

**更新**
起初我以为这是标准数字/ denom的某种base16 / hex转换？还是节点的 ID 和它的邻接关系？

有没有人有足够的经验来提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:02:19.637

他们建立在[IBM WebSphere Commerce](http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/index.jsp)之上。不过，这里没有什么好玩的。字母数字标识符`N-xxxxxxx`是简单的节点标识符，它们本身不捕获层次结构；结构（父节点和直接子节点）在节点数据本身内编码，并且有迹象表明这种效果（见下文。）它们不需要嵌套间隔（集合），它们的用户界面不会暴露在正常导航期间一次不止一个级别。

以劳氏为例。

如果您查看 cookie ( `WC_xxx`) 内部并查看它们从 ( ) 中提供某些内容的位置，`.../wcsstore/B2BDirectStorefrontAssetStore/...`您就会知道它们在 WebSphere Commerce 上运行。在他们的列表页面上，所有导致[搜索引擎优化](http://en.wikipedia.org/wiki/Search_engine_optimization)`/_/`的东西都在那里。字母数字标识符是固定长度的，[base-36](http://www.unitconversion.org/numbers/base-36-to-decimals-conversion.html)（尽管应用过滤器时会添加额外的组——但大写字母后面的所有内容都只是记录过滤状态。）`Zxxxx``Z`

假设您随后编写了一个小脚本来清点 Lowe's 目前在其网站上拥有的所有 3600 多个类别。你会得到这样的东西：

```
N-1z0y28t /Closet-Organization/Wood-Closet-Systems/Wood-Closet-Kits
N-1z0y28u /Closet-Organization/Wood-Closet-Systems/Wood-Closet-Towers
N-1z0y28v /Closet-Organization/Wood-Closet-Systems/Wood-Closet-Shelves
N-1z0y28w /Closet-Organization/Wood-Closet-Systems/Wood-Closet-Hardware
N-1z0y28x /Closet-Organization/Wood-Closet-Systems/Wood-Closet-Accessories
N-1z0y28y /Closet-Organization/Wood-Closet-Systems/Wood-Closet-Pedestal-Bases
N-1z0y28z /Cleaning-Organization/Closet-Organization/Wood-Closet-Systems
N-1z0y294 /Lighting-Ceiling-Fans/Chandeliers-Pendant-Lighting/Mix-Match-Mini-Pendant-Shades
N-1z0y295 /Lighting-Ceiling-Fans/Chandeliers-Pendant-Lighting/Mix-Match-Mini-Pendant-Light-Fixtures
N-1z0y296 /Lighting-Ceiling-Fans/Chandeliers-Pendant-Lighting/Chandeliers
...
N-1z13dp5 /Plumbing/Plumbing-Supply-Repair
N-1z13dr7 /Plumbing
N-1z13dsg /Lawn-Care-Landscaping/Drainage
N-1z13dw5 /Lawn-Care-Landscaping
N-1z13e72 /Tools
N-1z13e9g /Cleaning-Organization/Hooks-Racks
N-1z13eab /Cleaning-Organization/Shelves-Shelving/Laminate-Closet-Shelves-Organizers
N-1z13eag /Cleaning-Organization/Shelves-Shelving/Shelves
N-1z13eak /Cleaning-Organization/Shelves-Shelving/Shelving-Hardware
N-1z13eam /Cleaning-Organization/Shelves-Shelving/Wall-Mounted-Shelving
N-1z13eao /Cleaning-Organization/Shelves-Shelving
N-1z13eb3 /Cleaning-Organization/Baskets-Storage-Containers
N-1z13eb4 /Cleaning-Organization
N-1z13eb9 /Outdoor-Living-Recreation/Bird-Care
N-1z13ehd /Outdoor-Living
N-1z13ehn /Appliances/Air-Purifiers-Accessories/Air-Purifiers
N-1z13eho /Appliances/Air-Purifiers-Accessories/Air-Purifier-Filters
N-1z13ehp /Appliances/Air-Purifiers-Accessories
N-1z13ejb /Appliances/Humidifiers-Dehumidifiers/Humidifier-Filters
N-1z13ejc /Appliances/Humidifiers-Dehumidifiers/Dehumidifiers
N-1z13ejd /Appliances/Humidifiers-Dehumidifiers/Humidifiers
N-1z13eje /Appliances/Humidifiers-Dehumidifiers
N-1z13elr /Appliances
N-1z13eny /Windows-Doors 
```

请注意条目在大多数情况下是如何顺序的（它是顺序标识符，而不是散列），尽管并不总是组合在一起（标识符反映的是时间顺序而不是结构，它捕获插入序列，这在单个或多个批次中发生，有时是几年和数以千计的标识符分开，在数据库的另一端），并注意“父”节点总是*在*他们的孩子之后，有时在洞之后。这些都是迹象表明，随着类别的添加和/或删除，其相应父节点的新版本被重写，而旧的、被取代或删除的版本最终被删除。

如果您认为还有更多需要了解的信息，您可能需要进一步咨询 WebSphere Commerce 专家，了解 Lowe's 可能专门用于其`N-xxxxxxx`目录的具体内容（尽管我怀疑它是 90%+ 定制的。）FWIW 我相信今年早些时候，Depot（似乎也在使用 WebSphere）[升级到版本 7 。](http://www.internetretailer.com/2012/01/31/homedepotcom-will-shut-down-almost-day-maintenance)

* * *

**更新**Joshua 提到了 Endeca，在这种情况下，确实是 Endeca（那些`N-xxxxxxx`标识符）在 Websphere 后面使用（尽管我相信自从收购 Endeca 以来，Oracle 正在推动 SUN^H^H^H 他们自己的 Java EE “Endeca Server”平台.) 因此，尽管有外观（演示文稿和他们的 javascripts 是高度定制的，但这只是冰山一角），但实际上并不是 90% 的定制工作。）您应该能够[使用 Solr 作为替代品](http://code4lib.org/2007/durfee)。

# c# - 规划问卷程序的设计

> ID：13184663
> 
> 赞同：2
> 
> 时间：2012-11-01T20:05:26.970
> 
> 标签：c#, oop, abstract-class

我打算创建一个用户可以响应的程序`open questions`。这些开放式问题的答案可以是数字（假设答案是精度的小数）或字符串。

例如，用小数表示 1 的 50%（这就是使用数字作为答案的原因）。有时是方便的字符串。

我正在分析如何设计程序。

OpenQuestion 包含作为属性，`QuestionText`，这可能是抽象的。然后我们可以派生出两个名为 StringOpenQuestion 和 NumericAnswerQuestion 的类，这些类包含十进制和字符串的数据类型。我不确定这个是通用的是否会很棒。

你怎么看？

# c++ - C ++如何使dll从主线程修改变量？

> ID：13184665
> 
> 赞同：0
> 
> 时间：2012-11-01T20:05:28.567
> 
> 标签：c++, multithreading, variables, dll

我目前有一个 dll 可以帮助我进行一些操作，我希望我的 dll 可以修改主线程的变量。我是否以某种方式将类（变量具有类的类型名）发送到 dll，我是否也应该让 dll 包含定义类的文件（.h 文件）。

所以基本上，我怎样才能让一个 dll 从另一个线程（在这种情况下，主线程）修改一个变量？

编辑：

我要更改的变量是这样的：

组< UMesh > InstancedMesh

Group 是一个模板类，而 UMesh 是另一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:29:01.330

> 我是否以某种方式将类（变量具有类的类型名）发送到 dll，我是否也应该让 dll 包含定义类的文件（.h 文件）。

不，您不应使您的库依赖于某些应用程序类型。这个库如何用于其他应用程序？

* * *

您的库应仅接受该库已知类型的对象。

因此，您的应用程序中有以下类型：

```
template <class T>
class Group; 
```

你想要一些库函数接受这种类型的对象。

有两种典型的解决方案：

**第一个解决方案**，将其命名为面向对象的解决方案，在您的库中创建一个接口并接受实现此接口的对象的函数：

```
class SomInterface {
public:
  virtual void foo1() = 0;
  virtual void foo2() = 0;
};

void doSomething(SomeInterface& object); 
```

然后`doSomething`在你的应用程序中使用，你的类应该从这个接口派生：

```
template <class T>
class Group : public SomeInteface {
public:
  virtual void foo1() {...}
  virtual void foo2() {...}
};
Group<UMesh> object;
doSomething(object); 
```

或者（我更喜欢这个）从你的类中创建一个适配器到这个接口：

```
template <class T>
class GroupSomeInterface : public SomeInteface {
public:
  GroupSomeInterface(Group<UMesh& object) : object(object) {}
  virtual void foo1() {...}
  virtual void foo2() {...}
private:
  Group<UMesh& object;
};
Group<UMesh> object;
GroupSomeInterface<UMesh> adapter(object);
doSomething(adapter); 
```

**第二种解决方案**，将其命名为通用解决方案，由于您有模板类，因此对于这种特殊情况应该更好。在你的库中创建一个函数模板，接受任何类型的接口：

```
template <class T>
void doSomething(T& object);
Group<UMesh> object;
doSomething(object); 
```

如果您`Group<T>`没有此方法所需的接口，则在第一个解决方案中制作一个适配器 - 但这次没有显式接口类并且没有虚拟：

```
template <class T>
class GroupSomeInterface  {
public:
  GroupSomeInterface(Group<UMesh& object) : object(object) {}
  void foo1() {...}
  void foo2() {...}
private:
  Group<UMesh& object;
};
Group<UMesh> object;
GroupSomeInterface<UMesh> adapter(object);
doSomething(adapter); 
```

顺便说一句，对象接口是指它的所有公共函数和在该对象上运行的所有全局函数（`operator << (ostream,Object)`例如）

# mdx - 如何为 XMLA 通信配置 Mondrian 嵌入式示例

> ID：13184669
> 
> 赞同：3
> 
> 时间：2012-11-01T20:05:57.710
> 
> 标签：mdx, pentaho, mondrian, xmla

我下载并安装了带有嵌入式 derby 数据库实例的 Mondrian 3.4.1 稳定社区版本。我在本地 tomcat 实例上启动并运行了许多示例，但我无法让 XMLA 示例工作，并且无法使用 xmla4js (http://code.google.com/p/) 与 XMLA 端点通信xmla4js/discover-schema-rowsets 示例允许您指定要命中的 url，对于我的本地实例，它是 localhost:8080/mondrian/xmla)。

我已经编辑了“datasources.xml”文件，如下所示：http: [//pentahodave.mywebcommunity.org/#Apache7](http://pentahodave.mywebcommunity.org/#Apache7)

xmlaTest.jsp 产生的错误与页面底部的错误相同，但 .class 链接不再有效，而且我尚未配置为在本地构建源代码。

所以我的问题有两个：有没有办法让 xmlaTest.jsp 在没有本地构建的情况下工作，我还能做些什么来让 xmla4js 与蒙德里安交谈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:14:34.337

JPivot 项目非常陈旧，与当前的 Mondrian 代码行不同步。实际上，我们将从 Mondrian 4.0 的发行版中删除 JPivot。同时，如果您想测试您的 XMLA 服务，我建议您使用[Warehouse Explorer](http://sourceforge.net/projects/whex/)。

# wpf - 在精确位置打印在纸上。我应该使用 WPF 吗？

> ID：13184670
> 
> 赞同：1
> 
> 时间：2012-11-01T20:06:09.830
> 
> 标签：wpf, forms, printing, position

我希望能够从 win forms 应用程序打印表单。但限制在于我必须将其打印在具有特定文本位置的预打印表单上，并且我不应该溢出文本。使用 WPF 会是一个好主意吗？或者关于什么可以用于将文本精确放置在纸张上的任何建议，以便在同一位置打印，而与打印机无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:18:12.423

FixedDocument 专为“所见即所得” (WYSIWYG) 应用程序而设计，其中文档布局由应用程序定义和控制，以呈现显示或打印设备的最高精度。

[固定文档类](http://msdn.microsoft.com/en-us/library/system.windows.documents.fixeddocument.aspx)

我相信这需要WPF。它只是一个 .NET 类，但没有 WinForms 的查看器。

# ios - 不正确的视图大小 ios

> ID：13184671
> 
> 赞同：1
> 
> 时间：2012-11-01T20:06:12.837
> 
> 标签：ios, xcode, interface-builder

我正在使用 UIViewController 来显示我的视图。我的视图已在界面生成器中创建。

现在这些是视图的下一个参数：

宽度：568 高度：320 方向：横向

在 ViewController 我有下一个代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

在 info.plist 中，我只添加了左右两个界面方向。

但是当我尝试在代码中输出视图的宽度时，我得到 320，当我尝试输出高度时，它会在控制台 568 中写下来，但我希望得到 320。

我不知道为什么它会这样工作。有什么建议么？

即使我添加这个：

`[self.view setFrame:CGRectMake(0, 0, 568, 320)];`在 viewDidLoad 方法中。即使那样我的身高也不正确

我需要知道我在这种方法中使用的宽度尺寸：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    CGFloat width = 0.0f;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        width = 568.0f;
    } else {
        width = 1024.0f;
    }    
    NSInteger page = scrollView.contentOffset.x / width;
    NSLog(@"%d", page);
} 
```

现在我使用宽度的硬编码变量，但是怎么来的。为什么我不能使用`self.view.frame.size.width`，因为双方互相交换 - 因为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:18:58.750

也许您在方向发生之前在 viewDidLoad 方法中打印宽度和高度。尝试在 viewWillAppear 上或使用 performSelector:afterDelay 打印它：

可能影响视图尺寸的另一件事是如何在界面构建器上设置自动调整大小的掩码（右侧面板上 x、y、高度、宽度部分下方的红色箭头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T09:38:47.400

请添加`LaunchScreen.storyboard`您的项目并将其设置为您的启动屏幕

> 目标 > 常规 > 应用程序图标和启动图像 > 启动屏幕文件。

# c# - “无法加载基类” - 没有明确的原因

> ID：13184674
> 
> 赞同：4
> 
> 时间：2012-11-01T20:06:22.213
> 
> 标签：c#, compiler-errors, windows-forms-designer, visual-studio-express

我正在使用 Visual C# 2008 **Express**。这是我多年来第一次遇到这个错误，最后一次是在我开始编程的时候。

我不知道它的实际含义或它为什么突然出现，对于错误消息所说的内容似乎相当模棱两可。我所知道的是，在我的整个应用程序中，我从我想出的 ThemedWindow 类中继承了许多主窗口，以赋予它们自定义外观，该代码中没有错误，并且一切都在 20 分钟前工作 100% 完美。

完整的错误：

> 警告 12 无法为此文件显示设计器，因为无法设计其中的任何类。设计者检查了文件中的以下类：
> 
> InheritingWindow --- 无法加载基类“ThemedWindow”。确保已引用程序集并且已构建所有项目。0 0

对于从 ThemedWindow 继承的每个表单以及其他几个错误，我都得到了这一点，因为该项目构建的距离不足以让其他一切正常工作。

就在这发生之前，我更新了所有表单和子控件上的字体，项目甚至在我这样做之后构建并运行，然后这完全没有明确的原因发生。

我已经尝试过经典的重建它，删除构建文件，重新打开 Visual Studio 等，但目前似乎没有任何效果。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-11-01T21:56:10.583

[使用 AnyCPU 选项构建您的基本用户控件类。](https://support.microsoft.com/en-us/kb/967050)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T00:11:51.417

这些问题是由 Visual Studio 中的一个不幸的错误引起的。我在一些代码中有其他错误（不是警告），即使没有其他直接依赖于它，这在整个情况中发挥了作用。

我解释它可能是错误的，但这是我认为出错的地方：由于某种原因（错误），它完全忘记了它之前已经编译过的未更改对象，给了我代码中的实际错误，以及其他一些错误警告，因为它不会超过那个点。我无法进入依赖于表单的设计器，`ThemedWindow`因为我猜`ThemedWindow`在这些错误发生之前没有重新编译。

一旦我将错误代码注释掉作为快速修复并重新构建解决方案，一切都成功编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T12:18:54.213

In my case (VS 2015 Pro) none of the above helped. Only after changing the target framework to different (specifically newer, from 4.5.1 to 4.5.2) and recompiling did the Forms Editor load the form.

Before changing the target framework I tried cleaning the solution, removing and adding the references (the base user control was in different dll), manually deleting all bin and obj folders after cleaning the project, restarting VS, all to no avail...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T14:00:16.460

I have this problem too, with VS 2019 version 16.11.2, so I guess this bug will never be fixed.

My workaround, since my BaseForm class does all its work through code at runtime and has no functionality that would affect the designer, is that when I need to use the designer, I just temporarily change my window's base class. That is, change--

```
partial class MainWindow : BaseForm { 
```

to

```
partial class MainWindow : Form { 
```

然后做设计工作，然后一旦设计器关闭，就把 BaseForm 放回去。

如果您的基本表单类也没有做任何会对设计器产生影响的事情，这可能对您有用。

# wpf - 自定义面板调整大小时不调用 WPF MeasureOverride (Width => MinHeight)

> ID：13184676
> 
> 赞同：1
> 
> 时间：2012-11-01T20:06:26.283
> 
> 标签：wpf, layout

我已经制作了自定义布局面板。我已经实现了 MeasureOverride 和 ArrangeOverride 方法。

这是我使用面板的方式。

```
<Window
    x:Class="TestWindow.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:TestPanel="clr-namespace:TestPanel;assembly=TestPanel"
    Title="MainWindow"
    Width="706"
    Height="200">
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="Height" Value="40" />
            <Setter Property="MinWidth" Value="120" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </Window.Resources>
    <ScrollViewer>
        <Border BorderBrush="Red" BorderThickness="1">
            <TestPanel:ShrinkPanel Background="Aqua" MaxColumns="4">
                <Button Content="Text 1" />
                <Button Content="Text 2" />
                <Button Content="Text 3" Height="75" />
                <Button Content="Text 4" />
                <Button Content="Text 5" />
                <Button Content="Text 6" Height="100" />
                <Button Content="Text 7" />
                <Button Content="Text 8" />
                <Button Content="Text 9" Height="75" />
            </TestPanel:ShrinkPanel>
        </Border>
    </ScrollViewer>
</Window> 
```

一切正常，除了调整面板大小时不调用 MeasureOverride 。Height 属性始终为 NaN，而 ActualHeight 发生变化，但不会引起测量。

如何在调整大小时强制测量？

我已经订阅了 SizeChanged 事件并像这样调用 MeasureOverride

```
private void This_SizeChanged(object sender, SizeChangedEventArgs e)
{
    Measure(e.NewSize);
} 
```

但是此代码似乎并未在框架中的任何地方使用。我认为根据宽度指定最小允许高度应该是一项非常常见的任务。

那么，重新测量并因此在调整大小时设置 DesiredSize（或 MinHeight/MinWidth？！）的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:33:53.507

问题是滚动查看器：它将滚动查看器缝合起来，它为包含的项目提供了无限的高度/宽度，因此面板的所需大小是无限的。您可以尝试禁用 Scroll Viewer 的垂直条，或者在您的自定义面板中专门处理 Desired Size 为 Infinity 的情况。希望这对您有所帮助。

# javascript - 根据源代码中的 H1 元素或“location.path”更改图像源？

> ID：13184678
> 
> 赞同：0
> 
> 时间：2012-11-01T20:06:32.773
> 
> 标签：javascript, html, image, src

我决定尝试不同的方法来解决这个问题。我认为对于这个特定问题，使用该函数`location.path`来确定专辑封面的来源会更有效，而不是依赖于字符串。这是我到目前为止所拥有的：

图片的 HTML 片段：

```
<img src="http://static.last.fm/flatness/catalogue/noimage/noalbum_g3.png" width="220" height="220" class="album-cover"/> 
```

我拥有的一段Javascript：

```
var albumCover = document.getElementsByClassName('album-cover') // Get the album cover
var currentLink = location.pathname
var dictionary = 
{ // location.pathname : image source for albumCover
'/music/King+Crimson/Red' : 'http://i1325.photobucket.com/albums/u622/last_fm_projeKct/Last%20FM%20covers/Red.jpg',
'/music/King+Crimson/Discipline' : 'http://i1325.photobucket.com/albums/u622/last_fm_projeKct/Last%20FM%20covers/Discipline.jpg'
} 
```

现在这是一段不完整的代码：

```
if (currentLink === ''// first part of the dictionary)
{
    albumCover.src = '' second part of the dictionary
};

else{}; 
```

欢迎任何帮助，感谢阅读，干杯。

**旧帖子：** 我最近提出的一个问题的后续行动，但我似乎无法更改代码以匹配我正在寻找的内容。代码出现在以下网站上：[link](http://www.last.fm/music/King+Crimson/Discipline)

我有兴趣在下面的代码中更改图像源。但是，新的图像源将根据该网页的 H1 元素包含的内容来确定。

```
<div class="g3 album-cover-wrapper album-cover-wrapper--no-cover " >
<img src="http://static.last.fm/flatness/catalogue/noimage/noalbum_g3.png" width="220" height="220" class="album-cover"/>
    <section class="r add-top-margin remove-bottom-margin">
    <div class="g4"> </div>
                    </section>
</div> 
```

现在我认为使用“字典列表”会很有用，如下所示：

```
if H1 contains the string 'Discipline'{img.src="newsource.jpg'}; 
```

感谢您花时间阅读本文，干杯！

编辑：这是我尝试过的一段代码，但我猜它需要更多信息才能真正起作用。

```
var headerDef = document.getElementsByTagName('h1'),
var img = document.getElementsByClassName('album-cover');

if (headerDef === 'Red')
{
    img.src = "newsource.jpg";
};

else{}; 
```

列表将如何的几个示例：

```
//string in H1 : new image source for the 'album-cover'-class image
'Discipline' : 'http://ecx.images-amazon.com/images/I/41kcnkbxS-L._SL500_AA300_.jpg',
'Red' : 'http://img.noiset.com/images/album/king-crimson-red-4-cd-cover-31985.gif',
etc... 
```

这是一个列表，我必须手动添加具有特定 H1 字符串的页面的每个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:34:47.560

我建议如下：

```
var map = {
    'red': 'oh my gods!',
    'blue': 'blue? Really..?'
};

function influenceImage(source, map) {
    if (!source || !map) {
        return false;
    }
    else {
        var text = source.textContent || source.innerText;
        for (var word in map) {
            if (map.hasOwnProperty(word) && text.indexOf(word) !== -1) {
                return map[word];
            }
        }
    }
}

// in real life, with an image use:
// imageNode.src = influenceImage(document.getElementsByTagName('h1')[0], map);
document.getElementById('test').title = influenceImage(document.getElementsByTagName('h1')[0], map);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lf4Lp/)。

在演示中，我设置了元素的`title`属性`a`，但是，当然，正如注释中所述，只需设置`src`图像节点的属性。

上面的内容略有改变（在 , 内`else {...}`，使其成为不区分大小写的搜索/匹配：

```
var text = (source.textContent || source.innerText).toLowerCase();
for (var word in map) {
    if (map.hasOwnProperty(word) && text.indexOf(word.toLowerCase()) !== -1) {
        return map[word];
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lf4Lp/4/)。

再次在 中进行另一个编辑，`else {...}`以便在没有单词匹配的情况下添加默认选项：

```
var text = (source.textContent || source.innerText).toLowerCase();
for (var word in map) {
    if (map.hasOwnProperty(word) && text.indexOf(word.toLowerCase()) !== -1) {
        return map[word];
    }
}
// we only get here if the `for` loop and the `if` doesn't throw out a match.
return 'default string'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lf4Lp/3/)。

# java - 方法中的布尔值未正确返回（数组形式参数）

> ID：13184680
> 
> 赞同：1
> 
> 时间：2012-11-01T20:06:42.773
> 
> 标签：java

我正在尝试用简单的 java 制作一个 cee-lo 程序。我只是在学习。但是，当我到达即时 w。（我为测试简化了它）它总是返回false。我似乎无法弄清楚为什么。它甚至显示正确的数据，但是当它比较它时它失败了。

```
public class ceeLo
{
  public static void main (String [] args)
  {
    Scanner scan= new Scanner (System.in);
    int [] die = new int [3];
    int answer;
    boolean roll = true;
    boolean qualifed;
    boolean instantW;
    boolean instantL;

    do
    {
      System.out.println("Roll the dice?");
      answer = scan.nextInt ();
      if (answer == 0)
        roll= false;
      else
      {
        int i;
        for (i = 0; i < die.length; i++)
        {
          die[i]= rollin();
          System.out.println(diceTxt(die[i]));  
        }

        qualifed = (qualify (die));
        System.out.println("Qualified = " + qualifed);
        instantW = (easyW (die));
        System.out.println("Instant win = " + instantW);
      }
    }
    while (roll);
  }

  // Generate random numbers for the roll
  public static int rollin ()
  {
    Random rand = new Random();
    int die= rand.nextInt(6);
    return die;
  }

  //Check if dice qualify with pair
  public static boolean qualify (int [] die)
  {
    boolean qualify;
    //Pair Qualifying roll
    if (die[0] == die[1] || die[0] == die[2] || die[1] == die[2])
      qualify = true;
    else
      qualify = false;
    return qualify;
  }

  //Check if instant win 
  public static boolean easyW (int [] die)
  {
    boolean instantW;
    // show contents of die [x] for testing
    System.out.println (die[0] + "" + die[1] + "" + die[2]);
    if (die[0] > 2 && die [1] > 2 && die[2] > 2)
          instantW = true;
    else;
      instantW = false;
    return instantW;
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T20:08:00.307

else后去掉分号；它应该只是别的

我猜原因是，

`instantW = false;`被视为单独的语句而不是 else 块的一部分。这就是为什么 instantW 总是被赋值为 false 并返回 false 的原因。

使用 {} 定义块总是更好，即使它们是单行。这是我的偏好。

正如 Greg Hewgill 建议的那样，使用单个语句`instantW = die[0] > 2 && die [1] > 2 && die[2] > 2;`比 if/else 更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T20:11:16.733

编写布尔方法的更好方法实际上是执行类似的操作

```
boolean easyW(int[] die)
{
   return (die[0] > 2 && die[1] > 2 && die[2] > 2);
} 
```

甚至更好（更通用）

```
boolean easyW(int[] die)
{
   for(int roll : die)
   {
       if(roll < 2)
       {
          return false;  
       }
   }
   return true;
} 
```

但在你的情况下，你有一个`;`追求。固定版本：

```
 public static boolean easyW (int [] die)
    {
        boolean instantW;
      // show contents of die [x] for testing
      System.out.println (die[0] + "" + die[1] + "" + die[2]);
      if (die[0] > 2 && die [1] > 2 && die[2] > 2)
            instantW = true;
         else
            instantW = false;
      return instantW;
    } 
```

# android - 获取 adb 版本失败...没有这样的文件或目录

> ID：13184685
> 
> 赞同：6
> 
> 时间：2012-11-01T20:07:04.707
> 
> 标签：android, linux, eclipse, ubuntu, adb

我在 ubuntu 12.10 上运行 Eclipse 4.2.1，我正忙着为 Eclipse 安装 Android 插件。到目前为止一切顺利，我已经安装了 ADT 插件和所有这些，但现在我正处于那个阶段（在 Eclipse 重新启动后）我必须将 Eclipse 指向我已经安装了 android SDK 的目录...

此处安装的 sdk：

> /opt/android-sdk-linux

但是我弹出以下错误消息：

![在此处输入图像描述](../Images/0f8285accf11f9b606d60ffc97f7d831.png)

关于为什么会发生这种情况的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T21:29:57.930

我找到了答案，问题是我正在运行一个 64 位系统（应该提到这一点）。您可以在这里找到解决方案：[Android SDK on a 64-bit linux machine](https://stackoverflow.com/questions/2710499/android-sdk-on-a-64-bit-linux-machine/10473415#10473415)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:16:06.847

您是否查看 /opt/android-sdk-linux/platform-tools 并确认 adb 在那里？如果您刚刚下载了 SDK，最近的版本可能不会附带所有工具，因此您需要运行 SDK 管理器来下载您需要的东西。从 /opt/android-sdk-linux/tools 你可以执行“./android sdk”，这将启动 Android SDK 管理器，你可以下载工具和平台工具（它应该在工具列表顶部的项目文件夹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:11:49.007

您是否已经运行`android sdk`并安装了 Android 平台工具？如果是这样，我不知道发生了什么。如果您还没有这样做，那是您的问题。（`android sdk`是 Android SDK 管理器。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-19T07:45:57.470

如果你有 64 位机器，你应该尝试@robbin chander 的回答：

> 在 Linux 上你需要安装 IA32 库因为 Linux 64 位 ADT 包在 adt-bundle-linux/sdk/platform-tools/adb 下带有一个 32 位 adb ...这在其他发行版下也是一个问题，例如 Fedora 17

试试这个：

```
sudo apt-get install libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 
```

# excel - 我需要帮助修复 vba 宏

> ID：13184691
> 
> 赞同：1
> 
> 时间：2012-11-01T20:07:30.047
> 
> 标签：excel, vba

我有一个由许多行和列组成的数据集，例如

```
a1 b1
a2 b2
a3 b3
a4 b4
a5 b5 
```

我想编写代码，一次循环遍历一列单元格，计算像这样的索引（a2-a1）/（a2+a1）。我希望将结果保存到 sheet2。

我已使用此代码，但我不断收到错误消息。它在我试图将结果保存到 sheet2 的地方中断。

我需要帮助来修复此代码：

```
Sub Combination()

Dim jCell As Range
Dim kCell As Range
Dim result As Double

Sheet2.Cells.Clear

For Each jCell In ActiveSheet.UsedRange
    For Each kCell In ActiveSheet.UsedRange
        result = (jCell.Value - kCell.Value) / (jCell.Value + kCell.Value)

        Sheet2.Cell("result").Value = Sheet1.Cell("result").Value

    Next kCell
Next jCell

End Sub 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:57:57.183

有一些问题是错误的（我假设这更多地是为了学习 VBA 而不是任何实际的东西——所以我将忽略非 vba 的方法来做到这一点）。

一是我从未见过这样的语法：

```
Sheet2.Cell("result").Value = Sheet1.Cell("result").Value 
```

另一个是您的数据集由字符串类型数据组成，例如“a1”b1“-现在为什么要对字符串进行数学运算？您是否尝试将它们组合（连接它们）？-否则您将得到无意义的数字，如果您对字符串进行任意数学运算。

第三个是您需要一种将输出写入每行第二张表的方法。您可能希望使用计数器来执行此操作。这是一个有效的 sub 示例 - 我不确定它是否是您想要做的，或者它是否对您有帮助：

```
Sub Combination()

Dim jCell As Range
Dim kCell As Range
Dim result As String
Dim i As Integer
i = 1

Sheet2.Cells.Clear

For Each jCell In ActiveSheet.UsedRange
    For Each kCell In ActiveSheet.UsedRange
        result = jCell.Value & kCell.Value

        Sheet2.Cells(i, 1).Value = result

        i = i + 1

    Next kCell
Next jCell

End Sub 
```

祝你好运。

# performance - IIS 7 请求持续时间监控

> ID：13184697
> 
> 赞同：0
> 
> 时间：2012-11-01T20:08:15.517
> 
> 标签：performance, iis, powershell, monitoring

我很好奇是否有一种方法可以监控 iis 服务器上的请求持续时间。就我个人而言，我想出了一个解决方案，但它确实是资源密集型的，这就是我问这个问题的原因，只是为了收集更多的意见。

我的计划是提取每个请求的持续时间并将其发送到石墨，以便实时了解网络服务器的性能。我想出的想法是将 poweshell 与它的 webadministration 模块一起使用。例如，如果您运行 `get-item IIS:\AppPools\DefaultAppPool | Get-WebRequest`，您会在该应用程序池上获得所有请求，其中包含大量信息，包括时间信息。

问题是我应该有一个每 100 毫秒运行一次的脚本来获取所有请求，这有点浪费。有没有办法告诉 iis 将请求持续时间（以毫秒为单位）放入日志中？因为那样会更容易获得我需要的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:28:17.870

我不知道 IIS 上是否有这样的功能，但我通过在 Internet 和 iis 服务器（如 nginx）之间使用反向代理做了同样的事情（将 iis 页面时间发送到石墨）。

来自 nginx的[代理模块](http://wiki.nginx.org/HttpProxyModule)允许您在后端生成页面的时间登录每个请求。

此外，如果您必须处理连接速度较慢的访问，则在 IIS 前使用像[nginx](http://nginx.org)这样的代理可能会非常有帮助，nginx 将存储来自后端的回复，断开后端连接并等待访问者获取所有内容。强烈推荐。

如果你走这条路，你应该使用[logster](https://github.com/etsy/logster)（也来自 etsy 的家伙）或[logstash](http://logstash.net/)在你想要的每个时间段（可能每分钟）解析 nginx 日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:12:08.600

似乎有一个基于正则表达式记录请求的功能，它被称为高级日志记录模块。您可以从多个字段中指定要记录的内容，并且它符合 W3C。就我而言，我有时间将其作为可以指定的文件，这就是我想要的。之后，我在 powershell 中编写了一个脚本，它解析日志并获取我需要的信息，构建一个指标并将其发送到 statsd，然后再将其发送到 powershell。

我为日志解析选择的方法如下：在脚本中，我使用了来自 powershell 的 get-content comandlet 将所有日志收集到一个文件中（是​​的 iis 破坏了多个文件中的日志，我在猜测日志的数量取决于您的工作流程的数量，但我不确定）。这是第二次迭代中的第一次迭代，我将所有日志收集在另一个文件中，并在第一个文件和后者之间进行差异，只有差异得到处理。

我选择了这种方法，因为我认为使用最少的正则表达式处理会更好。下一步是擦除累积日志的第一个文件，并按照已擦除的第一个文件的速度移动第二个文件并再次运行脚本，以便始终有一种比较方法。此外，日志翻转为一小时，之后日志将被删除。

# c# - 具有重复键的字典

> ID：13184698
> 
> 赞同：9
> 
> 时间：2012-11-01T20:08:21.540
> 
> 标签：c#, .net-3.5, c#-3.0

> **可能的重复：**
> [是否有允许重复的 Dictionary/SortedList 的替代方法？](https://stackoverflow.com/questions/551901/is-there-an-alternative-to-dictionary-sortedlist-that-allows-duplicates)

我正在寻找一种可以有重复键的字典类。

我搜索了一下，发现 LookUp 类可以用来存储重复键，但是它没有默认构造函数，所以我们不能在没有任何其他对象的情况下初始化它。

但是我最初没有任何这样的对象，我可以从中初始化一个 LookUp 对象。

所以，我的问题是，.Net 框架 3.5 中是否有任何类，其行为类似于 Dictionary，但允许我拥有像 LookUp 这样的重复键？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-01T20:10:35.097

您可以创建一个键值对列表。

```
List<KeyValuePair<string,int>> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T20:10:48.570

根据定义，字典永远不能有多个具有相同值的键。（如果您查找一个键，您会返回什么？）即使是您所指的查找，也不允许它。您*可以*做的是让每个键引用*多个值*（逻辑上，而不是技术上）。这是通过拥有一个字典来完成的，其中值是某种数据结构（例如，a `List`），其中包含与该特定键对应的所有值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T20:14:20.107

您可以使用列表字典自己编写类型，`Dictionary<TKey, List<TValue>>`

您可以创建一个从该类继承的类，并添加合适的添加方法等来处理为给定键上的第一项创建新列表。

# macos - 使用 find 和 exec 创建目录，然后使用该目录的相对路径

> ID：13184700
> 
> 赞同：2
> 
> 时间：2012-11-01T20:08:32.770
> 
> 标签：macos, bash, find, xargs

我在结构化文件夹中有一堆 .emlx Apple Mail 文件，我想将它们导入 Apple Mail。我知道我可以手动执行此操作，方法是将文件夹重命名为 folder.mbox，然后将 .emlx 文件放在名为“Messages”的嵌套文件夹中。

我有数百个这样的文件夹，所以我试图用 bash 而不是手动来做。

我可以像这样设置基本结构：

```
find /path/to/folders/* -type d -exec mv {} {}.mbox \; -exec mkdir {}.mbox/Messages \; 
```

但我无法弄清楚如何将 .emlx 文件移动到新创建的子文件夹中。我试过这个：

```
find /path/to/folders/ -name \*.emlx -print0 | xargs -0 -I {} mv {} ./Messages/ 
```

`find`...我认为这是一个长镜头，但肯定有某种方法可以处理相对于每个结果的路径生成的文件列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:41:58.293

关于什么：

```
find /path/to/folders/* -type d \
        -exec mv {} {}.mbox \; \
        -exec mkdir {}.mbox/Messages \; \
        -exec sh -c "mv {}.mbox/*.emlx {}.mbox/Messages" \; 
```

这在我的测试环境中对我有用——就它给了我预期的结果而言——但它也得到了一个`find`我不喜欢的警告（尤其是因为我不太确定它为什么给出警告） .

因此，我将创建一个名为 的 shell 脚本`fixmbox`，并`find`为每个相关目录运行该脚本。这是痕迹。该`messages.tgz`文件包含“起点”目录结构的副本；该`reset`脚本会删除更改的目录并从 tar 文件中恢复原始目录。我的提示是`Osiris JL:`。

注意：我添加了`-name 'm?'`条件以避免处理当前目录出现问题`.`；你可能不需要那个。

### 使用`doit-all-in-one`

```
Osiris JL: reset
Osiris JL: ls -R
doit        doit-all-in-one fixmbox     m1          m2        messages.tgz    reset

./m1:
email-0.emlx email-2.emlx email-4.emlx email-6.emlx email-8.emlx
email-1.emlx email-3.emlx email-5.emlx email-7.emlx email-9.emlx

./m2:
email-0.emlx email-2.emlx email-4.emlx email-6.emlx email-8.emlx
email-1.emlx email-3.emlx email-5.emlx email-7.emlx email-9.emlx
Osiris JL: cat doit-all-in-one
set -x
path_to_folders=.
find "$path_to_folders" -name 'm?' -type d \
        -exec mv {} {}.mbox \; \
        -exec mkdir {}.mbox/Messages \; \
        -exec sh -c "mv {}.mbox/*.emlx {}.mbox/Messages" \;
Osiris JL: bash doit-all-in-one
+ path_to_folders=.
+ find . -name 'm?' -type d -exec mv '{}' '{}.mbox' ';' -exec mkdir '{}.mbox/Messages' ';' -exec sh -c 'mv {}.mbox/*.emlx {}.mbox/Messages' ';'
find: ./m1: No such file or directory
find: ./m2: No such file or directory
Osiris JL: ls -R
doit        doit-all-in-one fixmbox     m1.mbox     m2.mbox   messages.tgz    reset

./m1.mbox:
Messages

./m1.mbox/Messages:
email-0.emlx email-2.emlx email-4.emlx email-6.emlx email-8.emlx
email-1.emlx email-3.emlx email-5.emlx email-7.emlx email-9.emlx

./m2.mbox:
Messages

./m2.mbox/Messages:
email-0.emlx email-2.emlx email-4.emlx email-6.emlx email-8.emlx
email-1.emlx email-3.emlx email-5.emlx email-7.emlx email-9.emlx
Osiris JL: 
```

### 使用`fixmbox`：

```
Osiris JL: reset
Osiris JL: cat fixmbox
for dir in "$@"
do
    echo "$dir"
    mv "$dir" "$dir".mbox
    mkdir "$dir".mbox/Messages
    mv "$dir".mbox/*.emlx "$dir".mbox/Messages
done
Osiris JL: find . -name 'm?' -type d -exec ./fixmbox {} +
./m1
./m2
Osiris JL: ls -R
doit        doit-all-in-one fixmbox   m1.mbox   m2.mbox     messages.tgz    reset

./m1.mbox:
Messages

./m1.mbox/Messages:
email-0.emlx email-2.emlx email-4.emlx email-6.emlx email-8.emlx
email-1.emlx email-3.emlx email-5.emlx email-7.emlx email-9.emlx

./m2.mbox:
Messages

./m2.mbox/Messages:
email-0.emlx email-2.emlx email-4.emlx email-6.emlx email-8.emlx
email-1.emlx email-3.emlx email-5.emlx email-7.emlx email-9.emlx
Osiris JL: 
```

我更喜欢第二种，因为根本没有警告。请注意使用`+`运算符`find`使其行为类似于`xargs`. 大多数时候，编写一个简单的脚本`fixmbox`，然后使用它`find`（而不是试图`find`跳过所有的箍）对我来说似乎更简单。例如，如果在某个目录中已经存在一个目录，则`fixmbox`可以对脚本进行简单的修改以使其不会失败。`Messages`当然，`find`可以首先排除`Messages`目录；那些不需要他们的`.emlx`文件移动到另一个级别的子目录。注意`fixmbox`即使目录名称中有空格等，也要小心确保它可以工作；使用任何一个的版本都不是那么容易实现的`sh -c "..."`。

（`.emlx`文件都是空的；文件的大小不是这个问题的问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:16:11.670

一种解决方法可能是将文件列表放入文件中，而不是交给 xargs。之后，您可以遍历它们并移动它们

```
find /path/to/folders/ -name \*.emlx -print0 > filelist
for f in $(cat filelist) ; do mv $f ./Messages/ ; done 
```

# android - Android 今天的日期

> ID：13184701
> 
> 赞同：0
> 
> 时间：2012-11-01T20:08:33.643
> 
> 标签：android

您好，我想显示当前日期。我试着这样做：

```
calendar c = Calendar.getInstance();
System.out.println("Current time => "+c.getTime());
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String formattedDate = df.format(c.getTime());
TextView txtView = (TextView)findViewById(R.id.tvDate);
txtView.setText("Current Date and Time : "+formattedDate); 
```

但它不会在我的 textView 中显示日期。

有没有更好的方法来显示相同​​的日期？我想要这样：4 月 22 日，星期一

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:11:00.373

您应该查看`SimpleDateFormat`.

[简单日期格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

应该

```
SimpleDateFormat df = new SimpleDateFormat("EEEE, MMMMM dddd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:23:53.073

```
Date now = new Date();
String str = DateUtils.getRelativeDateTimeString(

        this, // Suppose you are in an activity or other Context subclass

        now.getTime(), // The time to display

        MINUTE_IN_MILLIS, // The resolution. This will display only minutes 
                          // (no "3 seconds ago"

        WEEK_IN_MILLIS, // The maximum resolution at which the time will switch 
                         // to default date instead of spans. This will not 
                         // display "3 weeks ago" but a full date instead

        0); // Eventual flags 
```

MINUTE_IN_MILLIS 和 YEAR_IN_MILLIS 的其他值包括：

```
SECOND_IN_MILLIS
MINUTE_IN_MILLIS
HOUR_IN_MILLIS
DAY_IN_MILLIS
WEEK_IN_MILLIS
YEAR_IN_MILLIS
Any custom value in milliseconds 
```

然后将文本设置为

```
txtView.setText("Current Date and Time : "+now); 
```

# batch-file - 批处理文件以删除 csv 文件的前 3 行

> ID：13184703
> 
> 赞同：1
> 
> 时间：2012-11-01T20:08:37.770
> 
> 标签：batch-file

我正在寻找一种从 CSV 文件中删除前 3 行文本的方法，让我们使用批处理脚本调用 report.csv。

我的 CSV 包含 3 个标题行

```
ReportName
Time
<blank line> 
```

有谁知道我怎么能做到这一点，只是替换原始文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:16:40.930

只要您有一个真正的 CSV，而不是制表符分隔的文件，那么以下应该可以工作。（任何制表符都将转换为 8 个空格）

```
@echo off
set "csv=test.csv"
more +3 "%csv%" >"%csv%.new"
move /y "%csv%.new" "%csv%" >nul 
```

如果您的文件确实包含制表符，并且您不需要保留空行，则以下内容将起作用，但速度较慢。

```
@echo off
set "csv=test.csv"
>"%csv%.new" (
  for /f skip^=3^ usebackq^ delims^=^ eol^= %%A in ("%csv%") do echo %%A
)
move /y "%csv%.new" "%csv%" >nul 
```

# php - 调用 isset() 与返回未定义的索引

> ID：13184704
> 
> 赞同：1
> 
> 时间：2012-11-01T20:08:38.733
> 
> 标签：php, arrays, performance, warnings

我有非常广泛使用的代码，它从另一个方法中获取一个数组，有时会返回该数组的第一个元素。鉴于这`null`是函数可接受的返回值，是否值得调用`isset()`数组索引（或检查数组长度等）的性能开销，还是只返回不存在的索引更好（警告除外）。`isset()`除了防止警告之外，调用还有什么好处。

下面的例子被简化了，真正的函数不*只是*获取数组的第一个元素。

返回可能不存在的索引：

```
function get_array_element(){
    $array = get_array();       // function that returns array
    return $array[0];           // return index 0 which may not exist
} 
```

与检查是否设置了索引：

```
function get_array_element(){
    $array = get_array();       // function that returns array
    return (isset($array[0]))?  // check if index 0 isset() else return null
        $array[0] : 
        null; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:26:12.163

在访问未定义的索引时发出通知——理论上——应该提醒您键名中的拼写错误。实际上，如果您`isset`首先使用，您可能只是在那里复制了密钥名称。或使用数字索引。或者一个常数。

另一方面，在大多数情况下，您在访问索引时并不关心它是否设置——在这种情况下，使用`isset`只是令人讨厌。很多语言都允许您在没有警告的情况下检索任何索引，例如 Javascript：只返回一个`undefined`.

所以我建议忽略通知。不是所有的，因为在某些情况下确实*有*帮助，所以在开发中保持它们打开，但使用`@`. 是的，它很丑，但它的工作是：

```
return @$array[0]; 
```

或者在简单的情况下，也许其他解决方案适合？

```
return array_shift($array); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T21:10:12.523

在该函数内调用 isset 是半无意义的，因为如果它不存在，您将返回 null，但无论您是否使用 isset 或 not，都会从 $array[0] 返回 null。

如果它只抛出一个 E_NOTICE 那么我不会担心它，只需检查 get_array_element() == null。

# iphone - 从网站到 iPhone 应用程序的内容

> ID：13184710
> 
> 赞同：0
> 
> 时间：2012-11-01T20:09:09.237
> 
> 标签：iphone, objective-c, sql, ios

在过去的几个月里，我一直在创建 iPhone 应用程序，一个问题一直萦绕在我的脑海：如何创建一个像 Instagram 或其他允许用户注册和登录的应用程序？我知道如何使用网站 (SQL) 执行此操作，但您如何在 iPhone 上执行此操作？一般的答案都很好。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:44:30.540

最简单的方法：使用 UIWebView 来包装网站。如果您更喜欢使用原生 UI，您可以使用 JSON 与服务器进行通信以进行用户登录部分。

# php - 显示数组编号而不是 mySQL 值的链接

> ID：13184715
> 
> 赞同：0
> 
> 时间：2012-11-01T20:09:38.217
> 
> 标签：php, mysql

正如您在[http://www.mattmaclennan.co.uk/a2](http://www.mattmaclennan.co.uk/a2)上看到的......当您将鼠标悬停在“新摩托车”上时，它具有数组编号，而不是所需的标签。此外，需要将类别分组到它们的 ID 中。以下是我尝试过的。

```
<?
$output = mysqli_query("SELECT * FROM bikes, bikeTypes WHERE bikes.model_id = bikeTypes.model_id");
$result = array();
while($row = mysqli_fetch_array($output))
  {
    $result[] = $row;
  }
//var_dump($result);
 foreach ($result as $key => $val) {
    echo "<li><a href='test.php?id=" . $val['model_id'] . "'>".$key.'</a><ul>';
    echo "<li><a href='details.php?id=" . $val['bike_id'] . "'>" . $val['bikeName'] . "</a></li>";
    echo '</ul>';   
    echo '</li>';
  }
?> 
```

类别字段称为“模型”。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:15:19.757

那是因为您显示的是 $key，而不是 $value。

```
<?
$output = mysqli_query("SELECT * FROM bikes, bikeTypes WHERE bikes.model_id = bikeTypes.model_id");
while($row = mysqli_fetch_array($output))
  {
     echo "<li><a href='test.php?id=" . $row['model_id'] . "'>".$row['???'].'</a><ul>';
     echo "<li><a href='details.php?id=" . $row['bike_id'] . "'>" . $row['bikeName'] . "</a></li>";
     echo '</ul>';   
     echo '</li>';
  }
?> 
```

# jquery - Highcharts折线图不适用于JSON加载值

> ID：13184719
> 
> 赞同：0
> 
> 时间：2012-11-01T20:09:46.847
> 
> 标签：jquery, json, highcharts

无法弄清楚为什么这行不通。试图用 JSON 格式的值创建一个 Highcharts 折线图，而这些线条只是拒绝显示。

这是Javascript：

```
var chart;
//Highcharts Options
    var options = {
        chart: {
            renderTo: 'chart'
        },
        title: {
            text: 'Monthly Total'
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Number of Calls'
            }
        },
        series: [{
            type: 'line',
            name: 'Call Totals',
            data: []
        }]
    }
    $.post('/admin/personnel-stats/includes/controller.personnel-stats.php', {'mode' : 'chart', 'persID' : persID, 'year' : year},
           function(json) {
                options.series[0].data = json.data;
                chart = new Highcharts.Chart(options);
           }
    ), 'json'; 
```

这是生成 JSON 的 PHP：

```
public function fetchPersonnelChart($persID, $year) {
        $fetchChart = $this->memDB->prepare("SELECT c.*, n.*
                                            FROM stats_count c
                                            LEFT JOIN stats_names n ON c.persID = n.id
                                            WHERE c.persID = :id AND YEAR(timestamp) = :year
                                            GROUP BY MONTH(timestamp) ORDER BY MONTH(timestamp)");
        $fetchChart->execute(array('id' => $persID, 'year' => $year));
        $chartResults = $fetchChart->fetchAll();

        foreach ($chartResults as $chartResult) {
            $chartOutput[] = (float)$chartResult['callCount'];
        }
        $output = array('data' => $chartOutput);
        echo json_encode($output);
    } 
```

JSON 的创建没有任何问题，最终看起来像这样： `{"data":[10,12,15,13,19,12,12,8,7]}`

任何想法，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:28:48.540

问题是`'json'`在`$.post()`.. 中的位置总是很简单

# php - 使用加号等于运算符时出现未定义的索引错误

> ID：13184720
> 
> 赞同：2
> 
> 时间：2012-11-01T20:09:51.490
> 
> 标签：php

我正在处理另一个开发人员的旧代码，并且有大量的注意：使用 += 运算符设置数据时出现未定义的索引错误。本质上，索引尚未在数组中设置，因此会生成错误。

例子：

```
$myArray = array();
$myValue = 1;
for ($i = 1; $i <= 10; $i++) 
{
    $myArray['test'] += 1;
} 
```

由于尚未设置测试索引，将在第一次运行时产生错误。

我知道我可以使用以下代码删除此错误：

```
$myArray = array();
$myValue = 1;
for ($i = 1; $i <= 10; $i++) 
{
    if ( ! isset($myArray['test']) )
    {
        $myArray['test'] = $myValue;
    } 
    else 
    {
        $myArray['test'] += $myValue;
    }
} 
```

但是，大约有 50 个这样的事情需要改变。是否值得写所有这些 isset 语句，还是有更好的方法我不知道？

编辑：我应该注意，数组索引并不总是相同的，有时没有设置，所以我不能在这种情况下预设索引以避免错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T20:22:20.037

这有点短，但如果你有很多编辑，可能还是有点复杂。

```
$myArray = array();
$myValue = 1;
for ($i = 1; $i <= 10; $i++) 
{
    isset($myArray['test']) ? $myArray['test'] += $myValue : $myArray['test'] = $myValue;

} 
```

您还可以编写一个全局函数（未测试）..

```
$myArray = array();   
$myValue = 1;
for ($i = 1; $i <= 10; $i++) 
{
    increment($myArray['test'], $myValue);
}

function increment(&$var, $inc){
    $var = isset($var) ? $var += $inc : $var = $inc
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-19T02:39:13.437

如果您使用的是 PHP 7 及更高版本，则可以使用[Null Coalescing Operator](https://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.coalesce)使此代码更清晰。

```
$myArray = [];
$myValue = 1;
for ($i = 1; $i <= 10; $i++) 
{
    $myArray['test'] = $myValue + ($myArray['test'] ?? 0);
} 
```

这里的好处不仅是代码更干净，而且您还可以更明确地了解默认值 ( `0`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T11:44:47.183

旧的/不推荐的/不推荐的，但最短的解决方案是

```
@$myArray['test'] += $myValue; 
```

# symfony - invalidate() 不会清除 symfony2 控制器中的会话

> ID：13184725
> 
> 赞同：3
> 
> 时间：2012-11-01T20:10:08.963
> 
> 标签：symfony

我想在我的一个 Symfony2 控制器中销毁一个会话，并使用以下代码：

```
$this->get('session')->invalidate(); 
```

但似乎这实际上并没有摆脱会话数据，我必须手动删除会话变量，如下所示：

```
$session->remove('viewed');
$session->remove('name'); 
```

有没有办法可以解决为什么 invalidate() 不清除会话？

PS如果我这样做：

```
session_start();
session_destroy(); 
```

它有效，所以它不是服务器/php/浏览器问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-20T19:31:00.003

确保您的脚本中有一个使会话无效的会话。

```
$session->start();      // Start the session...
$session->invalidate(); // ...then invalidate 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-01T12:37:15.283

它的工作原理如下：

```
$request->getSession()->invalidate(1); 
```

如果您不提供任何参数，则 invalidate 会使当前会话保持不变，您必须将生命周期设置为 1（一秒）

[http://api.symfony.com/2.6/Symfony/Component/HttpFoundation/Session/Session.html#method_invalidate](http://api.symfony.com/2.6/Symfony/Component/HttpFoundation/Session/Session.html#method_invalidate)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T18:16:40.680

尝试：

```
$this->get('session')->clear(); 
```

如果这不起作用，你可以使用这个：

```
$session = $this->get('session');
$ses_vars = $session->all();
foreach ($ses_vars as $key => $value) {
    $session->remove($key);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-31T18:50:29.293

如果您使用自定义会话名称，请先使用该名称启动会话，然后再使其无效以成功清除它。

```
$session = $this->get('session');

$session->setName('session_name');
$session->start();
$session->invalidate(); 
```

# django - 如何在 Django Haystack 中查询空的 MultiValueField 结果

> ID：13184728
> 
> 赞同：0
> 
> 时间：2012-11-01T20:10:15.360
> 
> 标签：django, search, elasticsearch, django-haystack

`[]`使用 Django 1.4.2、Haystack 2.0beta 和 ElasticSearch 0.19，我如何查询MultiValueField集为空的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T17:35:10.250

我会创建一个名为的整数字段`num_<field>`并对其进行查询。

在此示例中，“电子邮件”是 MultiValueField，因此我们将创建“num_emails”：

```
class PersonIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    name = indexes.CharField(model_attr='name')
    emails = indexes.MultiValueField(null=True)
    num_emails = indexes.IntegerField()

    def prepare_num_emails(self, object):
        return len(object.emails) 
```

现在，在您的搜索中，您可以使用

```
SearchQuerySet().filter(num_emails=0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T08:21:49.540

您还可以更改`prepare_`您的方法`MultiValueField`：

```
def prepare_emails(self, object):
    emails = [e for e in object.emails]
    return emails if emails else ['None'] 
```

然后你可以过滤：

```
SearchQuerySet().filter(emails=None) 
```

# php - 在 solr 定义许多实体并在单个实体类型中搜索

> ID：13184730
> 
> 赞同：1
> 
> 时间：2012-11-01T20:10:17.573
> 
> 标签：php, mysql, solr, indexing, full-text-search

我有一个包含 4 个表的数据库，它们是人员、位置、城市、国家现在我希望能够在每个特定的表中搜索（比如搜索所有以 United 开头的国家）并在所有这些表中搜索一次（比如搜索所有在城市有位置的人在国家“美国”中以“c”开头）。

我试图为每个表定义实体，并为最后一种情况定义嵌套实体，但我不知道如何编写查询来进行向上搜索以告诉 solr 我只想搜索人员或全部表。

请我需要代码示例来解决这个问题。

我正在使用 php/mysql。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:57:23.017

如果您为每个表定义了一个实体以及一个组合表，您可以为每个实体添加一个标识符并使​​用该标识符来过滤结果。
例如
，为每个实体添加一个字段类型，其值为 PERSON、LOCATION CITY ...。
对于查询`fq=type:PERSON`，用于过滤特定实体的结果。

# javascript - 如何将 jQuery api 用于滑块

> ID：13184732
> 
> 赞同：0
> 
> 时间：2012-11-01T20:10:23.160
> 
> 标签：javascript, jquery, slider

我在 wordpress 中有一个 jQuery 滑块，我正在尝试创建自己的上一个和下一个按钮，有人可以帮我解决这个问题的代码吗？

这是给我的api信息：

API 方法：

*   上一张幻灯片：`revapi1.revprev();`
*   下一张幻灯片：`revapi1.revnext();`

我想我需要知道如何使用上面的这两种方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:35:04.643

你能提供一个滑块的链接吗？您可能可以只使用单击事件，然后根据单击的箭头触发下一个或上一个功能。

所以它可能是这样的：

```
$(document).ready(function() {
    $("#next").click(function() {
        revapi1.revnext();  
    });
}); 
```

在这种情况下，您可以像这样拥有下一个按钮：

```
<button id="next">Next</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T21:58:48.253

老帖子，但没有明确的答案..

我猜你正在使用革命滑块。

```
jQuery('#next').on('click', function() { revapi1.revnext(); }); 
```

非常适合我。将上面的代码放在**“自定义 JavaScript”**框中（创建滑块的主页）

然后在你的一张幻灯片中放置这样的东西：

```
<button id="next">Next</button> 
```

格雷茨比约恩

# python - SQLAlchemy：有条件的自动增量

> ID：13184733
> 
> 赞同：2
> 
> 时间：2012-11-01T20:10:32.147
> 
> 标签：python, orm, sqlalchemy, relational-database

我想创建一个平面论坛，其中线程不是单独的表，具有帖子的复合主键。

所以帖子有两个字段形成一个自然键：`thread_id`和`post_number`，其中进一步是它们所属的线程的ID，后者是它们在线程中的位置。如果您不相信，请检查该行下方。

我的问题是我不知道如何告诉 SQLAlchemy

> 当提交带有 thread_id 的新`Post`实例时`tid`，查看有多少带有 thread_id 的帖子`tid`存在，并从该数字开始自动递增。

* * *

为什么我认为架构是个好主意？因为它自然且高效：

```
class Post(Base):
    number    = Column(Integer, primary_key=True, autoincrement=False, nullable=False)
    thread_id = Column(Integer, primary_key=True, autoincrement=False, nullable=False)
    title     = Column(Text) #nullable for not-first posts
    text      = Column(Text, nullable=False)
    ...
PAGESIZE = 10
#test
tid = 5
page = 4 
```

整个线程（查询）：

```
thread5 = session.query(Post).filter_by(thread_id=5) 
```

话题标题：

```
title = thread5.filter_by(number=0).one().title 
```

话题页面

```
page4 = thread5.filter(
    Post.number >= (page    * PAGESIZE),
    Post.number < ((page+1) * PAGESIZE)).all()
#or
page4 = thread5.offset(page * PAGESIZE).limit(PAGESIZE).all() 
```

页数：

```
ceil(thread5.count() / PAGESIZE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:25:19.057

您可能可以使用[SQL 表达式作为默认值](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#sql-expressions)来执行此操作（请参阅`default`参数）。给它一个这样的可调用对象：

```
from sqlalchemy.sql import func

def maxnumber_for_threadid(context):
    return post_table.select([func.max(post_table.c.number)]).where(post_table.c.thread_id==context.current_parameters['thread_id']) 
```

我不确定您是否可以从默认可调用对象中返回一个 sql 表达式——您可能必须实际执行此查询并在回调中返回一个标量值。（光标应该可以从`context`参数中获得。）

但是，我强烈建议您按照@kindall 所说的去做，并为该`number`列使用另一个自动递增序列。即使没有 SQLAlchemy，您想要做的事情实际上也是非常棘手的。例如，如果您使用的是 MVCC 数据库，则需要引入特殊的行级锁定，以便在`thread_id`运行事务时匹配的行数不会改变。这是如何完成的取决于数据库。例如，使用 MySQL InnoDB，您需要执行以下操作：

```
BEGIN TRANSACTION;
SELECT MAX(number)+1 FROM posts WHERE thread_id=? FOR UPDATE;
INSERT INTO posts (thread_id, number) VALUES (?, ?); -- number is from previous query
COMMIT; 
```

If you didn't use `FOR UPDATE`, then conceivably another connection trying to insert a new post into the same thread at the same time could have gotten the same value for `number`.

So rather than being performant, post inserts are actually quite slow (relatively speaking) because of the extra query and locking required.

All this is resolved by using a separate sequence and not worrying about post number incrementing only within a thread_id.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:16:35.963

您应该只使用一个全局帖子编号，该编号为*任何*线程中的帖子递增。然后，您无需找出用于给定线程的正确数字。那么，一个给定的线程可能有编号为 7、20、42、51 等的帖子。这无关紧要，因为您可以根据从查询中返回的记录集的大小轻松获取线程中的帖子数，并且您可以轻松地将 HTML 输出中的帖子与实际帖子数分开编号。

# javascript - 是否可以在同一页面中使用 Flexslider 和 Fancybox？

> ID：13184735
> 
> 赞同：2
> 
> 时间：2012-11-01T20:10:36.363
> 
> 标签：javascript, jquery, fancybox, instantiation, flexslider

一旦我为 Fancybox 插入脚本、css、jquery，我就有一个问题，我的 flexslider 脚本不起作用。我收到此错误：

```
JavaScript Error: TypeError: $(".flexslider").flexslider is not a function. 
```

当我删除 fancybox 脚本时，我的 flexslider 工作。可以同时使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:52:14.687

这就是我让他们都在我的一个网站上工作的方式：

**HTML：**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.fancybox-1.3.4.pack.js"></script
<script src="jquery.flexslider.js"></script> 
```

**Javascript：**

```
$(document).ready(function() {
    $(".fancybox").fancybox(); 
    $('.flexslider').flexslider()
;}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:21:15.183

你可以同时使用它们。您可以在下载之前尝试使用它们吗？

根据他们的API，您需要以这种方式添加这些插件

```
// Can also be used with $(document).ready()
$(window).load(function() {
  $('.flexslider').flexslider({
    animation: "slide"
  });
}); 
```

和

```
$(document).ready(function() {
    $(".various").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });
}); 
```

# solr - Solr 管理控制台 - 如何使用请求处理程序字段？

> ID：13184741
> 
> 赞同：1
> 
> 时间：2012-11-01T20:11:13.050
> 
> 标签：solr

我在 Solr 3.6.1 上。并试图弄清楚如何使用管理控制台来查询非默认处理程序。我尝试了以下变体：

```
/CustomHandler
/select&qt=CustomHandler
/select/CustomHandler 
```

这些都不起作用，我有一种唠叨的感觉，我错过了一些非常明显的东西，但就是想不起来。

![在此处输入图像描述](../Images/9fc6e99915e4c3143abc6fe10252638f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:08:13.660

从requestHandler的定义来看，相信需要在名称前加上正斜杠。

```
<requestHandler name="/CustomHandler" class="solr.SearchHandler">
 ....
</requestHandler> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:37:13.520

也许尝试更改`/select&qt=CustomHandler`为`/select?qt=CustomHandler`. （将＆符号更改为美元符号）

# vb.net - VB.NET 访问修饰符自动更改

> ID：13184745
> 
> 赞同：2
> 
> 时间：2012-11-01T20:11:17.607
> 
> 标签：vb.net, access-modifiers

每当我在 VB.NET 中更改任何控件的任何属性值时，其他控件访问修饰符都会自动更改。像“ `Friend WithEvents dgvQuestion As System.Windows.Forms.DataGridView`”到“ `Private WithEvents dgvQuestion As System.Windows.Forms.DataGridView`”。

可能是什么原因，我该如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:37:20.727

检查属性窗口中的修饰符属性是否正确设置。这可能是导致变化的原因。

# sql - 显示总数的 SQL 查询

> ID：13184746
> 
> 赞同：3
> 
> 时间：2012-11-01T20:11:22.237
> 
> 标签：sql, tsql, ssms

我有一个非常复杂的查询，它连接了八 (8) 个不同的表。

不过，为了这个问题，我将使用这种类型的结构对其进行简化：

```
create table table1(PacketID int, RequestID int, EmpID int, PartNo varchar(20))

insert into table1 values
 (1 , 1, 132, 'abc123'),
 (1 , 2, 132, 'abc456'),
 (1 , 3, 132, 'def123'),
 (1 , 4, 132, 'def456'),
 (2 , 5, 228, 'xyz123'),
 (3 , 6, 239, 'xyz321'),
 (3 , 7, 239, 'aaa000') 
```

这种类型的表会创建以下输出：

```
|_P_|_R_|_Emp_|_PartNo_|
|_1_|_1_|_132_|_abc123_|
|_1_|_2_|_132_|_abc465_|
|_1_|_3_|_132_|_def123_|
|_1_|_4_|_132_|_def456_|
|_2_|_5_|_228_|_xyz123_|
|_3_|_6_|_239_|_xyz321_|
|_3_|_7_|_239_|_aaa000_| 
```

我在这里整理了一个小提琴：[http ://www.sqlfiddle.com/#!3/a3ce4/1](http://www.sqlfiddle.com/#!3/a3ce4/1)

我被告知他们并不真正需要这个`PacketID`or `RequestID`，但他们需要的是显示一个数据包中有多少请求以及该数据包的请求编号需要注意的东西。

我仍然需要`PacketID`and`RequestID`值来更改数据。

所以，我想在上表中添加一列，如下所示：

```
|_P_|_R_|_ReadAs_|_Emp_|_PartNo_|
|_1_|_1_|_1 of 4_|_132_|_abc123_|
|_1_|_2_|_2 of 4_|_132_|_abc465_|
|_1_|_3_|_3 of 4_|_132_|_def123_|
|_1_|_4_|_4 of 4_|_132_|_def456_|
|_2_|_5_|_1 of 1_|_228_|_xyz123_|
|_3_|_6_|_1 of 2_|_239_|_xyz321_|
|_3_|_7_|_2 of 2_|_239_|_aaa000_| 
```

我该怎么做呢？

如果你只是想感受我的痛苦并查看我的 SQL Server 上定义的完整视图，这里是：

```
SELECT P.ID AS PacketID, R.ID AS RequestID, A.ID AS ActionID,
  EI.FIRSTNAME + ' ' + EI.LASTNAME AS Employee, P.DateStamp, 
  RQ.Description AS RequestType, L.Description AS Line, R.PartNo,
  R.Workorder, R.Qty, RZ.Description AS ReasonType, R.MTF,
  A.StatusID, S.Description AS Status, A.EmpID AS Stator, 
  A.DateStamp AS Stated
FROM dbo.Packet AS P
  LEFT OUTER JOIN dbo.Request AS R ON R.PacketID = P.ID
  INNER JOIN dbo.Action AS A ON R.ID = A.RequestID
  LEFT OUTER JOIN dbo.Action AS A2 ON A.RequestID = A2.RequestID
         AND (A.DateStamp < A2.DateStamp OR
         A.DateStamp = A2.DateStamp AND A.RequestID < A2.RequestID)
  INNER JOIN CPAPP.AIO_Test_Results.dbo.EmployeeInfo AS EI ON A.EmpID = EI.COUNT
  INNER JOIN dbo.RequestType AS RQ ON R.RequestTypeID = RQ.ID
  INNER JOIN dbo.Line AS L ON R.LineID = L.ID
  INNER JOIN dbo.ReasonType AS RZ ON R.ReasonTypeID = RZ.ID
  INNER JOIN dbo.Status AS S ON A.StatusID = S.ID
WHERE (A2.RequestID IS NULL) 
```

![截屏](../Images/48d20ab386c49520b00ec8e33df5ad6f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:16:57.897

我将尝试解释如何自己创建答案，而不是仅仅给你完整的答案。

要获得连续的序列号，请查看[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx). 您可以按 (PacketID) 提供分区，并按 (RequestId) 提供订单。这将为您提供所需的第一个号码。

要获得计数，如果您使用的是 SQL Server 2012，则可以使用`COUNT`分区。在旧版本的 SQL Server 上，您必须使用 JOIN 和 GROUP BY 或子选择。

此查询演示了使用子选择方法的原则：

```
SELECT
    PacketID,
    RequestID,
    EmpID,
    PartNo,
    ROW_NUMBER() OVER (PARTITION BY PacketID ORDER BY RequestID),
    (SELECT COUNT(*) FROM table1 AS T2 WHERE T1.PacketId = T2.PacketId)
FROM table1 AS T1 
```

[http://www.sqlfiddle.com/#!3/a3ce4/8](http://www.sqlfiddle.com/#!3/a3ce4/8)

要获得您要求的确切格式，您只需将整数转换为字符串并将它们连接起来。我会把这个留给你做，但这里有一些提示。

*   [铸造和转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)
*   [+（字符串连接）](http://msdn.microsoft.com/en-us/library/ms177561.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:20:46.273

正如@MarkByers 提到的，`row_number()`在这里会特别有用，我添加了一个相关的子查询来获取每个数据包的计数：

```
select PacketID, RequestID
    , cast(RowNumber as varchar(11)) + ' of ' + cast(PacketCount as varchar(11)) as ReadAs
    , EmpID, PartNo
from (
    select PacketID, RequestID, EmpID, PartNo
        , row_number() over (partition by PacketID order by RequestID) as RowNumber
        , (select count(*) from table1 where PacketID = t.PacketID) as PacketCount
    from table1 as t
) as z 
```

# java - 无法通过 Restlet StringRepresentation 类将 xml 字符串中的属性“类型”转换为 json 字符串

> ID：13184748
> 
> 赞同：3
> 
> 时间：2012-11-01T20:11:33.077
> 
> 标签：java, xml, json, restlet

我在 Restlet 中使用 StringRepresentation java 类将 xml 字符串转换为 json 字符串。我的 xml 字符串中有一个“类型”属性，例如：

```
<contacts>
   <contact index="0" type="type1" name="contact1">
   <contact index="1" type="type2" name="contact2"> 
</contacts> 
```

转换后，我发现一切正常，除了属性“type”不在 json 字符串结果中。

我知道“类型”在很多情况下是一个特殊的名称。Restlet 中是否有任何配置可以设置为让 StringRepresentation 类将“类型”视为通用属性名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:46:37.513

自己解决了。答案是 XMLSerializer 中的 setTypeHintsEnabled(false)。XMLSerializer 过滤掉了属性“type”，而不是 StringPresentation。这是代码：

```
XMLSerializer serializer = new XMLSerializer();
serializer.setTypeHintsEnabled(false);
result = new StringRepresentation(serializer.read(xml).toString(), MediaType.APPLICATION_JSON, Language.ALL, CharacterSet.UTF_8); 
```

# php - 使用数据子集在表中显示 MySQL 数据

> ID：13184751
> 
> 赞同：0
> 
> 时间：2012-11-01T20:11:36.557
> 
> 标签：php, mysql, jquery

我正在尝试从 mysql 表中检索记录并将它们显示在表中。我可以对每个单元格进行这样的单独查询：

```
$sql = "SELECT Sum(combined_data.`List Price`) AS total_dollar_amount, Count(combined_data.sysid) AS total_units FROM combined_data
WHERE 
combined_data.`Zip Code` = 07675
AND combined_data.`Office Primary Board ID` = 'W' 
AND combined_data.`List Price` BETWEEN 0 AND 99999";
$result = mysql_query($sql,$link); 
while ($row = mysql_fetch_array($result))
    { // echo these strings to cells
$res_07675_0_99999_amount = $row['total_dollar_amount'];
$res_07675_0_99999_total_units = $row['total_units'];
$res_07675_0_99999_percent = ($res_07675_0_99999_amount / $total_volume) *100;
$res_07675_0_99999_percent = round($res_07675_0_99999_percent, 2);
    } 
```

但是，我更愿意看看这是否可以在查询中完成。

从 zip 07675 中提取所有记录，然后按列标题值范围（0-99,000 然后 100,000-199,00 等）使用数据子集，（1）添加子集的总数以进行显示，（2）计算# 子集中的值（# on mkt），然后（3）计算（mkt 的百分比），这是所有价格范围内所有邮政编码的总量。

并且，完成后，能够按每列中的音量范围 ($) 对其进行排序。

我不精通这种复杂的 mysql 查询，也不确定我是否朝着正确的方向前进。（目前报告在 Excel 中完成）

任何指导或建议将不胜感激。或者是否有可以帮助创建此代码的应用程序？

谢谢。

![桌子](../Images/c46a005ff7bd71123322d70caf094bb6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:58:42.403

**了解[MySQL 中的 GROUP BY](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)。**允许您通过将记录分组到子集中然后从这些子集中提取数据来轻松创建报告。

*这很可能是您需要的。*

另请参阅此示例答案，因为它可能会给您一个提示： [Pull records from orders table for the current week](https://stackoverflow.com/questions/13115130/pull-records-from-orders-table-for-the-current-week-php-mysql-codeigniter/13115178#13115178)

# ruby - 在 Ruby 中，如何从具有值的哈希中提取键

> ID：13184752
> 
> 赞同：5
> 
> 时间：2012-11-01T20:11:41.293
> 
> 标签：ruby, hash

当我写这个 oneliner 时，我以为我是一个 Ruby 巨人：

```
# having this hash
hash = { 'Portugal' => 1, 'France' => 2, 'USA' => 3 }

# country_id comes from input
country_name = (hash.select { |k,v| v == country_id.to_i }.first || []).first 
```

它确实正确地提取了国家名称，如果没有找到国家，它也不会失败。

我对此非常满意。

但是我的导师说它可以/应该在可读性、长度和性能方面进行优化！

有什么比这更清晰/更快？

请指教

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T20:13:43.780

好吧，看来你的导师是对的:)

你可以这样做：

```
hash.invert[ country_id.to_i ] # will work on all versions 
```

或者，正如@littlecegian 所建议的那样

```
hash.key( country_id.to_i )    # will work on 1.9 only 
```

或者，正如@steenslag 所建议的那样

```
hash.index( country_id.to_i )  # will work on 1.8 and 1.9, with a warning on 1.9 
```

完整示例：

```
hash = { 'Portugal' => 1, 'France' => 2, 'USA' => 3 }

%w[2 3 1 blah].each do |country_id|

  # all versions
  country_name = hash.invert[ country_id.to_i ]

  # 1.9 only
  country_name = hash.key( country_id.to_i )

  # 1.8 and 1.9, with a warning on 1.9
  country_name = hash.index( country_id.to_i )

  printf "country_id = %s, country_name = %s\n", country_id, country_name
end 
```

将打印：

```
country_id = 2, country_name = France
country_id = 3, country_name = USA
country_id = 1, country_name = Portugal
country_id = blah, country_name = 
```

## 看到它在[这里运行](http://cibox.org/slivu/stackoverflow?lang=ruby&file=in-ruby-how-to-extract-a-key-from-the-hash-having-the-value.rb&run=true)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T20:33:16.880

如果是 ruby​​ 1.9.3，可以使用 hash.key(country_id.to_i)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T20:16:17.627

```
hash = { 'Portugal' => 1, 'France' => 2, 'USA' => 3 }
puts hash.invert[3] # "USA" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T21:11:38.167

```
hash = { 'Portugal' => 1, 'France' => 2, 'USA' => 3 }
hash.index(2) # => "France" 
```

是 Ruby 1.8.x 的方式。该[`index`方法](http://ruby-doc.org/core-1.8.7/Hash.html#method-i-index)在 1.9 中已弃用，并被该`key`方法替换。

# javascript - 怎么会有两行完全相同的代码，其中一行有效，另一行无效？

> ID：13184757
> 
> 赞同：2
> 
> 时间：2012-11-01T20:12:00.153
> 
> 标签：javascript, jquery, syntax-error

我最近发布了一个关于一段不起作用的 jquery 代码的问题。

[无法使用 jQuery animate() 使元素沿对角线移动](https://stackoverflow.com/questions/13183759/unable-to-make-an-element-move-diagonally-with-jquery-animate)

我不知道出了什么问题，所以我拿了另一段类似的代码，慢慢地一点一点地修改它，直到它与我应该工作的代码完全相同，而第二个副本工作而我的第一个没有工作。

因此，我逐行复制了第二个代码并替换了第一个代码。

最后，它被修复的是什么：

```
$(this).animate({left:'+=250'}, 1000); 
```

和

```
$(this).animate({left:'+=250'}, 1000); 
```

怎么可能第一个没用，第二个没用？

我知道，如果您`"`从某些来源复制引号，例如 ，他们将粘贴一个稍微不同的字符，但我不确定如何解释上述内容。

我并排检查了三次，并开始逐个替换第一个字符以查看罪魁祸首，但我的 Dreamweaver 撞到了我 :(。

那么，有人知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:16:43.170

这是您上一个问题的代码：

```
$("#moveme").animate({right: '+=50', bottom: '+=50'}, 1000);​​​​​​​​​​​​​​​ 
                        // ----right here------------------^ 
```

在该行的末尾，您有大约 15 个左右无效的不可见字符。

当我在 Firefox 中突出显示代码时，我可以看到突出显示的高度在那里更高。当我进入*“编辑”*模式时，需要多次击键才能将光标移过该点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T20:18:25.093

答案中有多余的字符。当粘贴到记事本++中时，这就是我所看到的。

```
$(document).ready(function(){
    $("#moveme").click(function(event){
        $(this).animate({right: '+=50', bottom: '+=50'}, 1000);??????????????? 
    })
}) 
```

# c# - 必须不可为空才能用作参数“T”

> ID：13184760
> 
> 赞同：6
> 
> 时间：2012-11-01T20:12:07.870
> 
> 标签：c#, .net, entity-framework, code-first

我正在尝试使用我自己的对象类型创建一个 Code First 类并收到此错误：

> `.MTObject'`必须是不可为空的值类型才能将其用作泛型类型或方法“”中的参数“T `System.Data.Entity.ModelConfiguration.Configuration.StructuralTypeConfiguration<TStructuralType>.Property<T>(System.Linq.Expressions.Expression<System.Func<TStructuralType,T>>)`”

有没有办法声明我的类属性来克服这个错误？

代码如下：

```
// Simple Example

public class MTObject
{
    public string Object { get; set; }

    public MTObject()
    {

    }
}

public class Person
{
    public decimal Id { get; set; }

    //public string Name { get; set; }

    public MTObject Name { get; set; }

    public Int32 Age { get; set; }
}

public class PersonConfiguration : EntityTypeConfiguration<Person>
{
    public PersonConfiguration() : base()
    {
        HasKey(p => p.Id);
        Property(p => p.Id).HasColumnName("ID").HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(p => p.Name).HasColumnName("NAME").IsOptional();
        Property(p => p.Age).HasColumnName("AGE").IsOptional();
        ToTable("Person");
    }
}

public class PersonDataBase : DbContext
{
    public DbSet<Person> Persons { get; set; }

    public PersonDataBase(string connectionString) : base(connectionString)
    {
        Database.CreateIfNotExists();
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new PersonConfiguration());
        base.OnModelCreating(modelBuilder);
    }
}

// End Simple EXample 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:20:41.283

为了使这一行编译...

```
Property(p => p.Age).HasColumnName("AGE").IsOptional(); 
```

...您需要使`Age`属性可以为空：

```
public Nullable<Int32> Age { get; set; } 
```

（或`public int? Age { get; set; }`）

或者您不能将该属性指定为可选属性，而需要将其用作必需属性。

**编辑**

我上面的回答是错误的。这不是编译器错误的原因。但是`Age`如果该属性应该是*可选*的，则该属性必须仍然可以为空，即允许`null`值。

**编辑 2**

在您的模型`MTObject`中是复杂类型（不是实体），因为按照惯例 EF 无法推断主键属性。对于复杂类型，您可以将嵌套属性映射为：

```
Property(p => p.Name.Object).HasColumnName("NAME"); 
```

（假设您实际上想要为`Object`属性指定列名）使用 is`IsOptional()`不是必需的，因为`string`默认情况下属性是可选的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-15T08:36:11.100

只是为了帮助别人

在这种情况下，只需改变

```
Property(p => p.Name).HasColumnName("NAME").IsOptional(); 
```

至

```
Property(p => p.Name.Object).HasColumnName("NAME").IsOptional(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:25:43.433

“不可为空”不是该错误消息的重要部分。重要的位是“必须是值类型”。（“不可为空”只是“值类型”的修饰符）

尝试

```
public struct MTObject
{
    public string Object { get; set; }
}

public struct Person
{
    public decimal Id { get; set; }

    //public string Name { get; set; }

    public MTObject Name { get; set; }

    public Int32 Age { get; set; }
} 
```

（注意关键字`struct`而不是`class`）

# ios - 从 iOS 设备上的 mobileconfig 获取 mac 地址

> ID：13184762
> 
> 赞同：1
> 
> 时间：2012-11-01T20:12:22.140
> 
> 标签：ios, mac-address, ota

我正在尝试查看是否可以通过类似于此帖子的 mobileconfig OTA 过程获取 iOS 设备的 mac 地址：[Getting a device UDID from .mobileconfig](https://stackoverflow.com/questions/5781314/getting-a-device-udid-from-mobileconfig)

我试过添加 MAC_ADDRESS_EN0

在 DeviceAttributes 键中，设置与其他 SO 帖子几乎完全相同。它回来为空。

有没有办法通过OTA mobileconfig配置文件服务获取mac地址或mac地址的sha1哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:47:01.393

> 该属性在 iOS 4 中已被弃用，在 iOS 5 中已被删除。没有替代品。

*   [https://discussions.apple.com/thread/3464303?start=0&tstart=0](https://discussions.apple.com/thread/3464303?start=0&tstart=0)
*   [http://iphone.vv44.net/thread-18361-1-1.html](http://iphone.vv44.net/thread-18361-1-1.html)
*   [https://stackoverflow.com/questions/11555386/ios-device-enrollment-challenge](https://stackoverflow.com/questions/11555386/ios-device-enrollment-challange)

# spotify - Spotify API 在模型上返回错误。搜索艺术家“！！！”的调用

> ID：13184769
> 
> 赞同：1
> 
> 时间：2012-11-01T20:12:46.947
> 
> 标签：spotify

在我们的 Spotify 应用程序中，我们正在调用 model.Search 函数，以便我们可以验证最多 100 位艺术家的列表。问题是我们可能正在验证的艺术家之一可能类似于“！！！”。这是一个实际的艺术家姓名，但它会导致 Spotify 返回错误代码和已验证艺术家姓名的空列表。我们可以在应用程序中一一验证艺术家姓名，从而处理错误代码，但这会大大降低应用程序的速度。这是 API 中的错误吗？Spotify会很快修复它吗？这是我们正在进行的调用的示例：

```
var search = new models.Search("artist:"Mother Love Bone" OR artist:"Hole" OR artist:"Soundgarden" OR     artist:"Stone Temple Pilots" OR artist:"Blind Melon" OR artist:"Silverchair" OR artist:"Alice In Chains" OR     artist:"Bush" OR artist:"Nirvana" OR artist:"Pearl Jam" OR artist:"Big Black" OR artist:"Hüsker Dü" OR     artist:"Throwing Muses" OR artist:"Frank Black" OR artist:"Fugazi" OR artist:"Santogold" OR artist:"This     Mortal Coil" OR artist:"Pixies" OR artist:"Lykke Li" OR artist:"Dinosaur Jr." OR artist:"Dinosaur Jr" OR     artist:"Morphine" OR artist:"Guided By Voices" OR artist:"Spacemen 3" OR artist:"Ride" OR artist:"My     Bloody Valentine" OR artist:"Destroyer" OR artist:"Slowdive" OR artist:"Spiritualized" OR artist:"Wavves"     OR artist:"Joanna Newsom" OR artist:"The Beta Band" OR artist:"The Jon Spencer Blues Explosion" OR     artist:"Jon Spencer Blues Explosion" OR artist:"Death From Above 1979" OR artist:"Buzzcocks" OR     artist:"The Buzzcocks" OR artist:"Television" OR artist:"Battles" OR artist:"Morrissey" OR artist:"The Stone     Roses" OR artist:"Ian Brown" OR artist:"The Libertines" OR artist:"The Psychedelic Furs" OR     artist:"Psychedelic Furs" OR artist:"Kings Of Convenience" OR artist:"Happy Mondays" OR artist:"Yo La     Tengo" OR artist:"Echo & The Bunnymen" OR artist:"The Specials" OR artist:"Interpol" OR artist:"Yeah     Yeah Yeahs" OR artist:"Doves" OR artist:"Dover" OR artist:"Joy Division" OR artist:"Silver Jews" OR     artist:"!!!"");
search.localResults = models.LOCALSEARCHRESULTS.IGNORE;
search.searchArtists = true;
search.searchAlbums = false;
search.searchTracks = false;
search.searchPlaylists = false;
search.observe(models.EVENT.CHANGE, function() { ... });
search.observe(models.EVENT.LOAD_ERROR, function() { // We got error here });
search.appendNext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:41:13.297

我无法在 Web API 的搜索中复制它（我可以访问的所有内容）。“！！！” 不返回任何结果，但也不返回错误。

也许尝试对它进行 url 编码？那会变成“！！！” 进入“%21%21%21”。它在 Web API 中没有任何区别 - 仍然不返回任何结果但不返回错误。但可能存在特定于主 API 的编码故障。

# ruby-on-rails - 嵌套模型窗体。Belongs_to 类未显示

> ID：13184770
> 
> 赞同：0
> 
> 时间：2012-11-01T20:12:47.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个主题模型和一个课程模型。我实现了一个嵌套模型表单。

创建主题后，我将其引导至一个页面，该页面据称显示了相关的课程。但是，我看不到教训。

我相信课程的数据没有正确保存，因为当我执行例如课程.find_by_subject_id('1') 时，我得到'nil' 作为回报。

我试图弄清楚多态性是如何在 Rails 上工作的，如果有人能指出我哪里出了问题，或者给我一些关于如何传递要创建的belong_to 类的值的指导，我将不胜感激。

主题模型

```
attr_accessible :subjectCode, :lessons_attributes
has_many :lessons, :dependent => :destroy
accepts_nested_attributes_for :lessons, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true 
```

课程模型

```
attr_accessible :lessonName, :subject, :subject_id
belongs_to :subject 
```

主题控制器

```
def new
3.times {@subject.lessons.build}
end

def create
  @subject = Subject.new(params[:subject])
  if @subject.save
    redirect_to @subject, :notice => "Successfully created subject."
  else
    render :action => 'new'
  end
end 
```

形式

```
<%= form_for @subject do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :subjectCode %><br />
    <%= f.text_field :subjectCode %>
  </p>

  <%= f.fields_for :lessons do |builder| %>
    <p>    
    <%= builder.label :lessonName %> <br/>
    <%= builder.text_area :lessonName, :rows=>3 %>
    </p>
  <% end %>
  <p><%= f.submit "Submit" %></p>
<% end %> 
```

路线资源：科目做资源：课程结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:15:31.470

您的`reject_if`lambda 将始终拒绝课程属性，因为课程没有`content`属性，因此您实际上是在评估`nil.blank?`哪个会返回`true`

也许您想检查课程名称是否为空？翼`:reject_if => lambda { |a| a[:lessonName].blank? }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:53:48.233

您`content`在表单上没有课程字段，因此`content`每节课都是空白的。你还使用：

```
:reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true 
```

这将检查内容是否为空白，主题不会保存课程。这是您的问题，因为您**的表单上没有内容字段**，因此**每次创建主题时内容都会空白**，您使用`:reject_if`了主题**不会保存其课程**。如果您以后可以放置课程内容，请删除`:reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true` ，您的课程将与相关主题一起保存。

# jquery - 与 Twitter 时间线小部件作为 Chrome 中的 jCarousel 元素的 CSS 相关错误

> ID：13184771
> 
> 赞同：0
> 
> 时间：2012-11-01T20:12:59.903
> 
> 标签：jquery, css, twitter, jcarousel

我对此一无所知。

我有一个简单的 Twitter 时间线小部件作为 jCarousel 元素。一切都只是“一团糟”。在 Chrome 中，jCarousel 的元素会相互重叠，并且不会正确滑开。有时，当我单击 jcarousel 元素的中心时，格式会自行修复。当我删除 twitter API 加载的 CSS 时，一切正常。

有没有人听说过这样的事情？有谁知道这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:14:09.343

对此的解决方案是将 twitter 小部件包含在其自己的 iframe 中，这样小部件脚本就不会影响页面的其余部分。

# android - 调用 AAssetManager_fromJava 时崩溃：“JNI 警告：实例字段 ID 0x571819bc 无效”

> ID：13184772
> 
> 赞同：3
> 
> 时间：2012-11-01T20:12:59.833
> 
> 标签：android, c++

这是完整的警告：

> JNI 警告：实例字段 ID 0x571819bc 对 Ljava/lang/Class 类无效；在 Lcom/brokenteapot/lwtemplate/JNI;.onCreate:(Landroid/content/res/AssetManager;)V (GetIntField)

和回溯：

```
#00  pc 00045dd0  /system/lib/libdvm.so (dvmAbort+75)
#01  pc 00039819  /system/lib/libdvm.so
#02  pc 0003e96b  /system/lib/libdvm.so
#03  pc 000089b9  /system/lib/libandroid.so (AAssetManager_fromJava+88)
#04  pc 00002f54  /data/data/com.brokenteapot.lwtemplate/lib/libLiveWallpaperTemplate.so (Java_com_brokenteapot_lwtemplate_JNI_onCreate+128) 
```

这是导致它的代码：

# 爪哇

```
public final class LiveWallpaperService extends WallpaperService 
{
    static AssetManager assetManager;

    @Override
    public void onCreate()
    {
        assetManager = getAssets();
        JNI.onCreate(assetManager);
    }
} 
```

# C++

```
void Java_com_brokenteapot_lwtemplate_JNI_onCreate(JNIEnv* env, jobject assetManager)
{
    AAssetManager* pAssetManager = AAssetManager_fromJava(env, assetManager);
} 
```

我真的不知道这些警告是什么意思，也不知道它为什么会崩溃。我几乎完全按照 NDK 示例中的示例进行操作。是因为它是一项服务，所以有所不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:57:08.657

呃，我想通了，JNI函数中的方法签名是错误的：

```
void Java_com_brokenteapot_lwtemplate_JNI_onCreate(JNIEnv* env, jobject assetManager) 
```

本来应该

```
void Java_com_brokenteapot_lwtemplate_JNI_onCreate(JNIEnv* env, void* reserved, jobject assetManager) 
```

我真的不明白为什么有些 JNI 函数需要 void* 而有些则不需要......

# windows-phone-7 - 在 Windows Phone 上记录数据，稍后传输到开发机

> ID：13184774
> 
> 赞同：0
> 
> 时间：2012-11-01T20:13:26.870
> 
> 标签：windows-phone-7

我想存储在 Windows 手机上执行程序期间检索的数据。执行过程中，手机未连接开发机。

在获得足够的数据（GPS-Data）后，我想将日志文件传输到开发机器，在那里我可以分析数据以改进应用程序。

此用例仅在开发期间相关，与最终用户无关。

Windows Phone 7.5 SDK 中是否实现了一种机制，我可以将数据从独立存储简单地传输到开发机器，还是必须将其上传到 Microsoft SkyDrive？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:31:34.053

您可以使用 Windows Phone Power Tools 轻松浏览隔离存储的内容并将文件传输到您的计算机：[http ://wptools.codeplex.com/](http://wptools.codeplex.com/)

# javascript - 如何在不将 onscroll 处理程序附加到每个容器的情况下捕获页面上的所有滚动事件

> ID：13184779
> 
> 赞同：46
> 
> 时间：2012-11-01T20:14:04.097
> 
> 标签：javascript, dom, scroll, dom-events

考虑以下网页：

```
 <html>
   <body onscroll="alert('body scroll event')">
     <div style='width:200px;height:200px;overflow:auto' onscroll="alert('div scroll event')">
       <div style='height:400px'>
       </div>
     </div>
   </body>
 </html> 
```

此 html 创建一个带有滚动条的 div。如果移动滚动条，`onscroll`则会触发 div 元素上的事件。但是，`onscroll`不会触发 body 上的事件。这是意料之中的，因为 W3C 声明元素`onscroll`事件不会“冒泡”。

但是，我正在开发一个客户端 Web 框架，该框架需要知道任何时候滚动页面的任何元素上的滚动条。如果冒泡，这很容易做到`onscroll`，但不幸的是它没有。有没有其他方法可以检测`onscroll`整个页面的事件？（现在我主要关注 Webkit，所以一个特定于 Webkit 的解决方案会很好......）

以下是我尝试过的一些事情：

1.  捕获`DOMAttrModified`（似乎不会因为移动滚动条而触发。）
2.  使用 DOM 观察者（滚动条似乎也不会触发）
3.  将事件类型更改`onscroll`为冒泡（似乎不可能）

似乎`onscroll`全局捕获事件的唯一方法是将`onscroll`事件附加到每个可能滚动的元素上，这非常难看并且会损害我的框架的性能。

有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2015-10-05T17:37:28.203

在现代浏览器中检测所有滚动事件的最简单方法是在附加事件时使用“捕获”而不是“冒泡”：

```
window.addEventListener('scroll', function(){ code goes here }, true) 
```

不幸的是，据我所知，在 <= IE8 等旧版浏览器中没有等价物

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-03T14:56:36.060

我有同样的问题。

最简单的方法当然是使用 jQuery。**请注意，此方法可能会*显着*降低您的页面速度。此外，它不会考虑绑定事件后添加的任何新元素。**

```
$("*").scroll(function(e) {
    // Handle scroll event
}); 
```

在 vanilla JavaScript 中，您可以在调用时将`useCapture`布尔值设置为，它将触发所有元素，包括动态添加的元素。`true``addEventListener`

```
document.addEventListener('scroll', function(e) {
    // Handle scroll event
}, true); 
```

请注意，这将在滚动事件实际发生之前触发。据我了解，事件有两个阶段。捕获阶段首先发生，从页面根（ownerDocument？）开始，向下遍历到事件发生的元素。在此之后是冒泡阶段，它从元素返回到根。

一些快速测试也表明这可能是 jQuery 处理它的方式（至少用于跟踪所有页面元素上的滚动），但我不是 100% 确定。

这是一个显示香草 JavaScript 方法的 JSFiddle [http://jsfiddle.net/0qpq8pcf/](http://jsfiddle.net/0qpq8pcf/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-02T15:04:40.033

* *...蟋蟀鸣叫...* *

好的，我想这个问题不会得到任何 stackoverflow 的喜爱，所以我不妨就我迄今为止找到的最佳解决方案回答我自己的问题，以防其他用户偶然发现这个问题：

我想出的最佳解决方案是为 BODY 元素捕获“onmousedown”和“onkeydown”：这些事件冒泡，因此如果用户尝试在页面上移动滚动条，这些全局函数将作为 by-产品。然后，在这些函数中，只需查找 event.target 并将临时“onscroll”事件附加到这些对象，直到鼠标/键再次“向上”。使用该方法，您可以避免“处理程序膨胀”并仍然全局捕获所有“onscroll”事件。（我认为这也适用于“鼠标滚轮”滚动，但我对最终皱纹的研究仍在进行中。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-04T09:58:11.847

当您想要在后台滚动任何内容后关闭对话框时，以下工作正常：

```
var scrollListener = function(e) {
    // TODO: hide dialog
    document.removeEventListener('scroll', scrollListener, true);
};

document.addEventListener('scroll', scrollListener, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-13T21:58:35.527

我需要使用 shadowRoots 中的滚动事件在复杂的自定义元素中处理任何上下文中的滚动。这至少涵盖了我的场景中的部分问题，并且通常在这些较新的 Web 组件 API 的上下文中借鉴此处的答案和评论。到目前为止，在适当的生命周期回调中附加和分离侦听器效果很好（曾经可能不适合您的用例）。

```
 self.addEventListener('mousewheel', handler, {capture: true, once: true});
      self.addEventListener('keydown', handler, {capture: true, once: true}); 
```

还要注意，`event.composedPath()`如果需要有关滚动上下文的详细信息，它会提供通过所有 shadowRoots 和所有节点的整个事件路径。如果是这种情况，使用这种方法并将针对该特定场景的新处理程序附加到感兴趣的节点可能是有意义的。

# android - 如何从 PlayN 调用本机（Android）功能？

> ID：13184780
> 
> 赞同：1
> 
> 时间：2012-11-01T20:14:05.127
> 
> 标签：android, ios, native, playn

是否可以从 PlayN 游戏中调用“本机”特定于平台的 Java 代码？例如，启动外部（Android 和 iOS）活动作为对按钮单击的响应？你能把我链接到一些演示怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:03:16.937

是的，有可能，您需要创建一个接口来调用您的本机代码；我们这样做是为了在我们的游戏中实施广告，[PlayN 中的 Admob 支持，](http://setfalse.blogspot.com/ "Admob 支持")您可以查看我们是如何做到的，也许它可以帮助您。

# ruby-on-rails - 删除 line_item 时删除 Rails 会话值

> ID：13184781
> 
> 赞同：0
> 
> 时间：2012-11-01T20:14:09.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这让我很困惑。我仍然是 Rails 的新手，所以它可能很简单。

情况：

1.  我可以将商品添加到购物车，没问题。一切正常， current_cart 方法在每个请求中解析为同一个购物车。
2.  但是，一旦我从购物车中删除了一个订单项，它就会起作用，该订单项被删除，但是
    变量“session [：cart_id]”变为空，并且
    在下次调用 current_cart 时创建了一个新的购物车。

我正在使用设计，所以我不确定这是否与它有关，或者行项目删除方法可能是级联删除会话或类似的东西。

问题是，谁能帮我理解为什么在调用 line_item delete 后会话变量变为空？

我创建了一个购物车应用程序，以及使用 Rails 进行敏捷 Web 开发。首先，这是应用程序控制器检索当前购物车的代码：

```
 private
  def current_cart 
    Checkout::Cart.find(session[:cart_id])
  rescue ActiveRecord::RecordNotFound 
    cart = Checkout::Cart.create 
    session[:cart_id] = cart.id
    cart
  end 
```

现在是我的订单项控制器的代码

> 类 Checkout::LineItemsController < ApplicationController
> 
> # POST /checkout/line_items # POST /checkout/line_items.json def create
> 
> ```
> @cart = current_cart
> product = Catalog::Product.find(params[:product_id])
> apparel_event_log.info (product.to_json)
> 
> @checkout_line_item = @cart.line_items.find_or_initialize_by_sku_id(product.part_number)
> new_quantity = @checkout_line_item.quantity || 0
> @checkout_line_item.quantity = new_quantity+1
> @checkout_line_item.line_item_description = product.name
> @checkout_line_item.image = product.primary_image
> 
> respond_to do |format|
>   if @checkout_line_item.save
>     format.html { redirect_to @checkout_line_item.cart, notice: 'Line item was successfully created.' }
>     format.json { render json: @checkout_line_item, status: :created, location: @checkout_line_item }
>   else
>     format.html { render action: "new" }
>     format.json { render json: @checkout_line_item.errors, status: :unprocessable_entity }
>   end
> end   end 
> ```
> 
> # DELETE /checkout/line_items/1 # DELETE /checkout/line_items/1.json def destroy Checkout::LineItem.delete(params[:id])
> 
> ```
> respond_to do |format|
>   format.html { redirect_to current_cart, notice: 'Line item removed.' }
>   format.json { head :no_content }
> end   end end 
> ```

以及订单项模型的代码

```
class Checkout::LineItem < ActiveRecord::Base
  before_save :default_values

  attr_accessible :customer_update_date, :inventory_status, :line_item_color, :line_item_description, :line_item_size, :line_item_tagline, :line_item_total, :image, :quantity, :sku_id, :style_id, :tax, :tax_code, :timestamps, :unit_price, :cart, :product
  belongs_to :cart
  belongs_to :product, :class_name => 'Catalog::Product'
  has_one :image, :class_name => 'Assets::Medium'

  def default_values
     Rails.logger.debug { "Entering default values" }
     self.quantity ||= 0
   end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:16:03.240

好的，我现在实际上设法解决了这个问题。那太难了！

使用 link_to ... :destroy 或 delete 似乎是某种问题，我认为默认的 rails 代码没有产生 CSRF 保护，因此使会话无效。

我已经解决了主要部分，将 link_to 替换为 button_to 以删除行项目，这似乎是有效的，至少在功能上是这样。

我真的更喜欢使用链接而不是按钮。这似乎是一个更常见的问题，因此我会在论坛中寻找答案，但如果您知道答案，请直接在此线程上发布链接或答案，不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:08:05.547

首先，您应该将逻辑移动到模型中：

```
class Cart << AR
  def add(product_id)
    product = Catalog::Product.find(product_id)

    if item = self.line_items.find_or_initialize_by_sku_id(product.part_number)
      item.quantity = (item.quantity || 0) + 1
      item.line_item_description = product.name
      item.image = product.primary_image
      return item.save
    end
  end
end

class Checkout::LineItemsController < ApplicationController
    # POST /checkout/line_items # POST /checkout/line_items.json def create

    @cart = current_cart
    apparel_event_log.info (product.to_json)

    respond_to do |format|
      if @checkout_line_item = @cart.add(params[:product_id])
        format.html { redirect_to @checkout_line_item.cart, notice: 'Line item was successfully created.' }
        format.json { render json: @checkout_line_item, status: :created, location: @checkout_line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @checkout_line_item.errors, status: :unprocessable_entity }
      end
    end   
end 
```

其次，您应该添加开头：

```
 private
  def current_cart 
    begin
      Checkout::Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound 
      cart = Checkout::Cart.create 
      session[:cart_id] = cart.id
      cart
    end
  end 
```

# django - Django 意外关键字参数“实例”

> ID：13184783
> 
> 赞同：3
> 
> 时间：2012-11-01T20:14:13.513
> 
> 标签：django, django-forms

嗨，我正在创建一个使用模型表单编辑模型的视图。

我的 forms.py 看起来像：

```
from user_profile.models import Project
from django.forms import ModelForm

def ProjectForm(ModelForm):
    class Meta:
         model = Project 
```

还有我的views.py：

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from user_profile.models import Project
from user_profile.forms import ProjectForm

def EditProject(request, project_id=None):
    """
    This view allows a user to edit details of a project.
    """
    title = u'Unirac - Edit Project'
    project = Project.objects.get(id=4)
    if request.method == 'POST':
        form = ProjectForm(request.POST)
        if form.is_valid():
            # save form
            form.save()
        else:
            return render_to_response('edit_project.html', {
                'title': title,
                'form': form,
            }, RequestContext(request))
    else:
        form = ProjectForm(instance=project)
        return render_to_response('edit_project.html', {
            'title': title,
            'form': form,
        }, RequestContext(request)) 
```

但我得到一个`ProjectForm() got an unexpected keyword argument 'instance'`错误？

我不知道为什么，因为您可以将实例传递给模型表单，不是吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:23:20.330

```
def ProjectForm(ModelForm): 
```

除非这只是在这里发布时的拼写错误，否则就是您的问题。您已经定义了一个 ProjectForm**函数**，而不是一个类。

# opencart - opencart 类别父未定义变量：entry_parent

> ID：13184784
> 
> 赞同：0
> 
> 时间：2012-11-01T20:14:19.373
> 
> 标签：opencart

我真的很强调这个，无法修复。刚刚将 opencart 安装在子文件夹/子目录中，并将 wordpress 安装在根目录中。一切正常，目前共享同一个数据库。我知道它不明智，但我正在测试。我在编辑类别时遇到问题，无论我尝试什么，尝试在下添加类别父级时都无法删除此错误

*   管理面板->目录->类别->数据

你应该看到一个嵌套的下拉表。然而，代替这个急需的功能，我遇到了一个可怕的错误。请有人可以帮助那最好是opencart大师或php高手。

这是我的错误消息：注意：未定义变量：第 54 行 /var/www/vhosts/domain.com/httpdocs/store/admin/view/template/catalog/category_form.tpl 中的 entry_parent

# java - 有没有办法将数组字符串分配给方法 java.lang.String.endwith(String suffix)

> ID：13184789
> 
> 赞同：0
> 
> 时间：2012-11-01T20:14:47.217
> 
> 标签：java, arrays, string, file

我需要一个带有数组列表的文件后缀，例如

```
String[] FileType = {"pdf","mp3","jpg"}
File SourceFileToCheckType = new File("C:\\Users\\RS\\Desktop\\test.pdf"); 
```

使用下面的方法....这种方法完全没有错误如何处理这种情况

```
public static boolean FileTypeAccept(File SourceFileToCheckType, String[] fileType) 
    {

            for (String filetypeS : fileType)

            return SourceFileToCheckType.getName().endsWith("." + filetypeS);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:22:18.430

你快完成了。试试这个代码：

```
public static boolean FileTypeAccept(File source, String[] fileTypes) 
{
    for (String filetype : fileTypes)
        if (source.getAbsolutePath().endsWith("." + filetype))
            return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:16:50.520

你可以用正则表达式来做到这一点：

```
SourceFileToCheckType.getName().matches(".*(pdf|mp3|jpg)$") 
```

如果你想让它成为一个变量：

```
String fileTypes = "pdf|mp3|jpg";

SourceFileToCheckType.getName().matches(".*(" + fileTypes + ")$") 
```

此外，在 java 中更喜欢以小写字母开头的命名变量。

# .net - 为什么 Context.Request.Url 可能无法识别 HTTPS 方案？

> ID：13184790
> 
> 赞同：0
> 
> 时间：2012-11-01T20:14:49.100
> 
> 标签：.net, https

很简单，我有一个属性/方法可以构建图像的绝对路径，如下所示：

```
 public String Url
    {
        get
        {
            Uri rv_uri = new Uri(Context.Request.Url, Path);
            return rv_uri.AbsoluteUri;
        }
    } 
```

但是，当通过 HTTPS 访问此属性时，返回值仍然显示 HTTP 方案。在测试中，我发现 Context.Request.Url “不知道”它在 SSL 下运行。

Context.Request.Url 的任何已知错误？

否则我会怀疑我们的托管服务提供商使用的负载平衡器正在搞砸。如果是这样，我是 SOL 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:16:58.430

很多时候，SSL 仅适用于负载均衡器。

这样做是为了减少 Web 服务器上的负载，并且大多数时候防火墙后面不需要 SSL。

# python - 我如何编写我的函数，以便在输入时打印分隔符太长？

> ID：13184795
> 
> 赞同：0
> 
> 时间：2012-11-01T20:15:16.420
> 
> 标签：python, string, split, function

我在如何写出我的函数时遇到了麻烦，所以当输入多个字符时，它会打印出分隔符太长的语句。并返回值 none。但我不知道该怎么做。python新手，对一些信息有很大帮助。提前感谢我所做的。

```
def my_split(_,_):
    my_sep = input("seperator: ")
    my_str = input("sentence: ")

def main():
    #your main program here
    print("Enter a string to be split: ")
    print("Enter the delimiter character: ") 
    print("the result is: ")

for(my_sep):
    if(my_sep <1):
    print(" the delimeter is too long.")

return None

print("enter a string to be split: ")
print("enter the delimeter character: ")
print(" the result is: ")

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:16:55.097

```
if len(my_sep) > 1:
    print(" the delimiter is too long")
    return None 
```

但不清楚你想把它放在你的代码中的什么地方。你想`None`从什么函数返回？我想你想要这样的东西：

```
def main():
    #your main program here
    my_str = input("Enter a string to be split: ")
    my_sep = input("Enter the delimiter character: ") 
    if len(my_sep) > 1:
        print(" the delimeter is too long.")
        return None
    result = # do the actual splitting code here
    return result

result = main()
print("the result is:", result) 
```

填写`# do the actual splitting code here`完后，我运行两次时会发生以下情况：

```
Enter a string to be split: Hello, World
Enter the delimiter character: ,
 the result is: ['Hello', ' World']

Enter a string to be split: Hello, World
Enter the delimiter character: lo
 the delimiter is too long.
 the result is: None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:32:04.523

```
def my_split(_,_):
    my_sep = input("seperator: ")
    my_str = input("sentence: ") 
```

在这里，您定义了一个名为“my_split”的函数。你告诉 Python “my_split” 有两个参数，但是你给这两个参数都命名为“_”（下划线）。这是无效的。由于该函数看起来不需要程序的任何输入，而是从用户那里获取输入，因此您可以在不带任何参数的情况下声明该函数：

```
def my_split():
    my_sep = raw_input("seperator: ")
    my_str = raw_input("sentence: ")
    return my_sep,my_str 
```

请注意，我也从 input() 更改为 raw_input()。input() 是一个执行从终端输入的代码的函数。这不是你想要做的。您还需要返回您收集的值。

```
def main():
    #your main program here
    print("Enter a string to be split: ")
    print("Enter the delimiter character: ") 
    print("the result is: ") 
```

您的 main() 函数在技术上没有任何问题，但它并没有按照您的意愿去做。它打印这三行并结束。这是一个更完整的 main()，它利用了我们已经编写的 my_split 函数：

```
def main():
    my_sep,my_str = my_split()
    result = my_str.split(my_sep)
    print "the result is: ", result 
```

请注意，您可以从一个函数返回两个值，并在调用该函数时设置两个值。

```
for(my_sep):
    if(my_sep <1):
    print(" the delimeter is too long.") 
```

这里的第一行不是有效的python。 `for`是一个循环结构，旨在循环遍历组中的每个元素。另外，您想知道长度是否太长，但您的条件是“小于一”。第三，您的 print 调用应该缩进以表明它是“if”语句主体的一部分。最后，这都应该在 main() 函数中。因此，最终的程序如下所示：

```
def my_split():
    my_sep = raw_input("seperator: ")
    my_str = raw_input("sentence: ")
    return my_sep,my_str

def main():
    my_sep,my_str = my_split()
    if len(my_sep) > 1:
        print " the delimeter is too long."
    else:
        result = my_str.split(my_sep)
        print "the result is: ", result

if __name__=='__main__':
    main() 
```

# javascript - 对于 Javascript，是什么阻止了现代实现不将参数视为真正的数组？

> ID：13184799
> 
> 赞同：3
> 
> 时间：2012-11-01T20:15:27.137
> 
> 标签：javascript, ecmascript-5

我认为这是一个旧的 Javascript 行为（Crockford 说这是一个设计错误），在函数内部`arguments`就像一个数组，除了它不是一个真正的数组，所以不能在它上面调用数组方法：

```
function foo() { console.log(arguments.slice(1)) }   // won't work
foo(1,2,3); 
```

而且我只是在最新的 Firefox 和 Chrome 上尝试过，但两者都无法正常工作。所以我们可能不得不使用

```
function foo() { console.log(Array.prototype.slice.call(arguments, 1)) }
foo(1,2,3); 
```

但是为什么不在`arguments`现代 JavaScript 中创建一个真正的数组呢？可能不应该有任何依赖于`arguments`不是真正数组的程序？现在不把它变成一个真正的数组的原因可能是什么？

我能想到的一个原因是，如果程序员开始将其视为数组，那么代码将无法在旧版浏览器中运行，但 ECMA-5 中的其他内容也无法在旧版浏览器中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:30:01.793

直到 ECMAScript 5 开发的最后阶段，argument 对象才会继承所有的 Array.prototype 方法。但是 2009 年 9 月 TC39 批准的 ES5“最终草案”并没有这个功能。

2009 年 8 月，Apple 的 Oliver Hunt 将其发布到 es5-discuss 邮件列表

[https://mail.mozilla.org/pipermail/es5-discuss/2009-August/003112.html](https://mail.mozilla.org/pipermail/es5-discuss/2009-August/003112.html)

> 上周五，我实现了使 Arguments 对象从 WebKit 中的 Array 继承的逻辑，并且很快发现它
> 与 Prototype.js 严重不兼容……这至少破坏了许多 Apple 网站和 Nasa.gov —— .. . 由于这些站点损坏，由相当主要的库中的一个主要兼容性问题引起，尝试将 类似数组的行为
> 改进为参数似乎是不可行的。

TC39 的其余部分同意 Oliver 的评估，并从最终草案中删除了该功能。

也许，这样的代码已经从网络上消失了，以至于提议的 ES5 解决方案今天可以工作。然而，这并不重要，因为 ES6 中的 rest 参数是解决问题的更好方法，并且是一个全新的语法特性，不会与现有代码有任何向后兼容性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:48:37.860

有些在线网站不依赖于`arguments`数组，例如使用旧版本 Prototype 和 script.aculo.us 的网站。这意味着任何改变它的浏览器（ES4 包括这个，它与 Futhark 中的许多其他部分一起实现，在 9.5-10.10 的 Opera 中使用）都会破坏这些网站，并且市场强烈鼓励不要破坏网站（任何考虑到许多网站很少更新，出于显而易见的原因，会破坏网站的浏览器不会被关心这些网站的用户使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:42:16.997

在下一版本的 ECMAScript 中，这个问题（以及其他几个问题）正在使用 rest 参数解决。

```
function foo(...rest) {
    console.log(rest.slice(1))
}

foo(1, 2, 3); 
```

与 不同`arguments`，其余参数将是**真正的数组**，因此这将起作用。

休息参数可以做得更多。在上面的示例中，您可能希望将第一个参数用于一件事，并将其后的所有内容用于其他事情。你可以这样做：

```
function foo(first, ...rest) {
    console.log('first: ', first);
    console.log('rest: ', rest);
}

foo(1, 2, 3); 
```

这将记录：

> 第一个：1
> 
> 休息：[2, 3]

提案：[http ://wiki.ecmascript.org/doku.php?id=harmony:rest_parameters](http://wiki.ecmascript.org/doku.php?id=harmony:rest_parameters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T20:43:44.983

这主要是因为据我所知它需要是只读的。

如果它是一个数组，那么它必须是一个**只读**数组，这意味着我们必须摆脱 push、pop、splice 等......任何修改数组的方法。至此，尽管我同意像 slice 这样的其他方法可能会派上用场，但它已经是一种数据结构，其要求与 javascript Array 不同。

我认为他们不应该说它是一个类似数组的对象，在我看来，它只是一个不同的对象，恰好有一个名为长度的属性（与数组相同）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T20:54:36.030

> 是什么阻止了现代实现不将参数视为真正的数组？

实现什么？EcmaScript [5.1 规范](http://ecma-international.org/ecma-262/5.1/)，是的。然而，有相当准确的规定，[应该有一个`arguments`绑定](http://es5.github.com/#x10.5)以及[这样的`Arguments`对象是](http://es5.github.com/#x10.6)什么。

此外，一个`Arguments`对象*并不是*一个真实的`Array`，因为它在其属性方面有一些非常特殊的行为。[[Get]]、[[Delete]] 等被覆盖以反映函数参数变量。如果它是一个数组，则在这样的对象上调用`push`等可能会造成严重破坏。`splice`

# maven - 核心 maven 插件是否与 maven 本身处于同一发布周期？

> ID：13184800
> 
> 赞同：3
> 
> 时间：2012-11-01T20:15:28.197
> 
> 标签：maven, maven-3

在网上的很多地方，我看到它讨论过要使 maven 构建可重现，明确指定所有使用的插件的版本号很重要，这样更新的插件就不会破坏构建。推荐的方法似乎是使用强制插件。以下是我在网上找到的复制和粘贴设置。

```
<execution>
    <id>enforce-plugin-versions</id>
    <goals>
        <goal>enforce</goal>
    </goals>
    <configuration>
        <rules>
            <requirePluginVersions>
                <message>Best Practice is to always define plugin versions!</message>
                <banLatest>true</banLatest>
                <banRelease>true</banRelease>
                <banSnapshots>true</banSnapshots>
                <phases>clean,deploy,site</phases>
                <additionalPlugins>
                    <additionalPlugin>org.apache.maven.plugins:maven-eclipse-plugin</additionalPlugin>
                    <additionalPlugin>org.apache.maven.plugins:maven-reactor-plugin</additionalPlugin>
                </additionalPlugins>
                <unCheckedPluginList>org.apache.maven.plugins:maven-enforcer-plugin,org.apache.maven.plugins:maven-idea-plugin</unCheckedPluginList>
            </requirePluginVersions>
        </rules>
    </configuration>
</execution> 
```

当我运行 pom 时，我从强制插件插件中收到以下错误。

```
[INFO] --- maven-enforcer-plugin:1.1.1:enforce (enforce-plugin-versions) @ seedling ---
[WARNING] Rule 0: org.apache.maven.plugins.enforcer.RequirePluginVersions failed with message:
Some plugins are missing valid versions:(LATEST RELEASE SNAPSHOT are not allowed )
org.apache.maven.plugins:maven-clean-plugin.    The version currently in use is 2.4.1
org.apache.maven.plugins:maven-deploy-plugin.   The version currently in use is 2.7
org.apache.maven.plugins:maven-install-plugin.  The version currently in use is 2.3.1
org.apache.maven.plugins:maven-site-plugin.     The version currently in use is 3.0
org.apache.maven.plugins:maven-reactor-plugin.  The version currently in use is 1.0
org.apache.maven.plugins:maven-eclipse-plugin.  The version currently in use is 2.9
Best Practice is to always define plugin versions! 
```

在我看来，一些插件，如 maven-clean-plugin、maven-install-plugin、maven-reactor-plugin 是 maven 的核心核心部分，我应该将这些“核心”插件的版本绑定到我正在使用的 Maven 版本。

**我的问题：**

1.  插件版本是否与 Maven 本身在同一发布周期？
2.  是否有一组核心 Maven 插件组成一个 Maven 版本？如果是，如何获取 Maven 版本的此类插件列表？
3.  当我看到诸如 3.0.4 之类的 maven 版本时，该版本是否包含一些核心插件，或者它是否总是会获得最新的插件，例如在 maven 3.0.4 发布之后发布的 reactor？
4.  有没有办法说 maven 使用在 3.0.4 发布时发布的插件？
5.  如何表示不同插件版本之间的兼容性，是否有一些插件普遍遵循的约定，例如所有次要 2.x 都相互兼容但 3.x 与 2.x 不兼容？
6.  指定插件版本号的做法真的是最好的害虫做法还是只是矫枉过正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:31:03.720

Maven将一些插件绑定到它的生命周期阶段，例如maven-compiler-plugin到`compile`阶段，maven-install-plugin到`install`阶段等等。这些是您所说的“maven 的核心中心部分”的插件。但是，这些插件有一个单独的发布周期。例如，看一下绑定到 maven`deploy`生命周期阶段的 maven-deploy-plugin。最新版本（2.7）是在 2011 年 10 月，而最新的 Maven 版本（3.0.4）是在 2012 年 1 月。另一个例子是 maven-compiler-plugin，它的最新版本是 2012 年 6 月，距离 Maven 发布半年3.0.4。

特别要回答您的问题：

1.  不，他们不是。每个插件都有自己的发布周期。请参阅上面的示例。
2.  有各种插件绑定到 Maven 的特定于包的生命周期阶段。您可以将这些视为“核心 maven 插件”。查看[maven book](http://www.sonatype.com/books/mvnref-book/reference/lifecycle.html)以获取完整列表。
3.  如果您没有在 POM 文件中指定插件版本，maven 将使用每个使用的插件的最新版本。
4.  不需要。如果您有此要求，您可以在[http://search.maven.org](http://search.maven.org)上找到插件的发布日期，并将它们与最新版本的 Maven 进行比较。但这不是必需的，如果您在 POM 文件中指定每个使用的插件的版本，并且 maven 会为您生成正确的工件。
5.  There are no compatibility problems (at least no problems that I know of) between different maven plugins. For different version of the same plugin, you have to try it and see if your specific project works with a new version of a plugin.
6.  If you want reproducible builds, it's a must.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:29:08.387

这里是问题列表的答案：

1.  不
2.  没有。Maven 本身有一个小内核，但内核中没有插件。如果需要，将在运行期间下载所有插件。在 Maven 2 中，maven 的某些部分随 Maven 本身（站点生成的一部分）一起发布，而这些部分已随 Maven 3 进行了更改。
3.  没有一个 Maven 版本包含一个超级 pom，其中包含一些插件版本等的定义，但只能通过超级 pom。
4.  不，您不能仅通过版本来定​​义发布时间。
5.  不同的插件由不同的社区/人维护，他们对版本及其与 maven 版本的关系有不同的看法。通常，适当插件的站点会记录下来（例如 maven-site-plugin）。
6.  是的，它适用于不同的 Maven 版本，没有任何问题。

# asp.net-mvc - 更改文件路径后的运行时错误

> ID：13184801
> 
> 赞同：0
> 
> 时间：2012-11-01T20:15:29.587
> 
> 标签：asp.net-mvc, runtime-error

所以我有一个链接，一旦点击就会打开一个 pdf 文件。我有另一种格式，我将其转换为pdf。然后，我将路径从旧 pdf 更改为已知 pdf，现在每当我尝试访问包含此 pdf 链接的页面时，我都会得到运行时错误页面，并且`<customeErrors mode = "Off"/>`不确定更改文件路径如何影响具有pdf 文件作为链接以单击并打开。任何见解将不胜感激。

这是我为新的 pdf 文件添加路径的行：

```
<li class="nomove"><a href="pdfs/KVFlipBook2012Rev.pdf" target="_blank">Children w/Special Medical Needs</a></li> 
```

这是我的 web.config 文件：

```
<configuration>
<connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        </assemblies>
    </compilation>
    <authentication mode="Forms">
        <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>
    <membership>
        <providers>
            <clear />
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
        </providers>
    </membership>
    <profile>
        <providers>
            <clear />
            <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
        </providers>
    </profile>
    <roleManager enabled="false">
        <providers>
            <clear />
            <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
            <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
        </providers>
    </roleManager>
<customErrors mode="Off"/>
</system.web>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" /> 
```

# mysql - 为选择中返回的空字段设置默认值

> ID：13184804
> 
> 赞同：3
> 
> 时间：2012-11-01T20:15:44.833
> 
> 标签：mysql, sql, postgresql, select

给定两个表：

```
image(id, cat_id, name)
image_translation(id, title, desc, lang) 
```

（名称和 ID 是唯一的）

查询以选择特定文件的所有翻译：

```
SELECT c.id           AS c__id, 
       c.cat_id       AS c__cat_id, 
       c.name         AS c__name, 
       c2.id          AS c2__id, 
       c2.title       AS c2__title, 
       c2.desc        AS c2__desc, 
       c2.lang        AS c2__lang, 
FROM   image c 
       LEFT JOIN image_translation c2 
              ON c.id = c2.id 
WHERE  ( c1.name = 'file.jpg' ) 
```

返回：

```
c__id | c__cat_id  | c2__id    | c__name   | c2__title     | cs__desc     | c2__lang
------+------------+-----------+-----------+---------------+--------------+--------- 
114   | 2          | 114       | file.jpg  | default title | default desc | en
114   | 2          | 114       | file.jpg  | NULL          | desc in de   | de
114   | 2          | 114       | file.jpg  | title in fr   | ''           | fr 
```

要选择特定语言的特定文件的翻译，显然我需要添加 where 子句。

但随后它返回默认行内容，其中可能包含翻译中的空字段。

**如何将结果与默认值合并，并用默认值覆盖 empy 字段？***lang en*返回默认值：

```
SELECT c2.title       AS c2__title, 
       c2.desc        AS c2__desc, 
       c2.lang        AS c2__lang, 
FROM   image c 
       LEFT JOIN image_translation c2 
              ON c.id = c2.id 
WHERE  ( c1.name = 'file.jpg' ) 
AND WHERE ( c2.lang = 'en') 
```

我期望的示例结果：

德语：

```
-- AND WHERE ( c2.lang = 'de' ) 

c__id | c__cat_id | c2__id    | c__name   | c2__title     | cs__desc     | c2__lang
-----+------------+-----------+-----------+---------------+--------------+--------- 
114  | 2          | 114       | file.jpg  | default title | desc in de   | de 
```

法语：

```
-- AND WHERE ( c2.lang = 'fr' ) 

c__id | c__cat_id | c2__id    | c__name   | c2__title     | cs__desc     | c2__lang
-----+------------+-----------+-----------+---------------+--------------+--------- 
114  | 2          | 114       | file.jpg  | title in fr   | default desc | fr 
```

**如何在一个智能查询中正确执行？**

（我使用具有 I18N 行为的 MySQL 和 Doctrine ORM）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:31:47.510

我不知道你是否要求这个简单的查询：

对于'f'：

```
SELECT c2.title AS c2__title, 
       coalesce( nullif( c2.desc, '') , c3.desc )   AS desc, 
       coalesce( nullif( c2.lang, '') , c3.lang  )  AS lang, 
FROM   image c 
LEFT JOIN image_translation c2 
              ON c2.lang = 'fr' and c.id = c2.id 
LEFT JOIN image_translation c3
              ON c3.lang = 'en' and c.id = c3.id 
WHERE  ( c1.name = 'file.jpg' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:37:54.600

你可以做两个`left joins`，第二个寻找默认语言。然后A`case`可以在两者之间做出决定：

```
select case 
       when it1.title = '' or it1.title is null then it2.title 
       else it1.title 
       end as title
,      case 
       when it1.desc = '' or it1.desc is null then it2.desc
       else it1.desc
       end as desc
from   image i
left join
       image_translation it1
on     c.id = c2.id 
       and it1.lang1 = 'fr'
left join
       image_translation it2
on     c.id = c2.id 
       and it2.lang1 = 'en'
where  i.name = 'file.jpg' 
```

# html - 谷歌地图方向列表 Jquery Mobile/HTML5

> ID：13184808
> 
> 赞同：0
> 
> 时间：2012-11-01T20:16:02.520
> 
> 标签：html, google-maps, jquery-mobile

我使用 HTML5 localstorage 将开始和结束坐标存储在客户端设备上。要显示他开始和结束之间的路线，我必须使用谷歌地图驾驶列表（不是地图..只是文本格式的方向）应用程序在 jquery移动的。

```
<div data-role="content">

    <div data-role="content" id="list"> 
    <ul data-role="listview" data-inset="true" data-filter="true" id="myList"> 
```

我可以在 ID 为 myList 的列表视图中添加该驾驶列表吗？

```
 function gotDirections(geo){
        var directionsService = new google.maps.DirectionsService();
        var directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setPanel(document.getElementById("myList"));
        var storedlati=localStorage.getItem("text1");
        var storedlongi=localStorage.getItem("text");
        var destilati=localStorage.getItem("text2");
        var destilongi=localStorage.getItem("text3");
        var request = {
            origin:google.maps.LatLng(storedlati,storedlongi),
            destination:google.maps.LatLng(destilati,destilongi),
            travelMode: google.maps.TravelMode.DRIVING
        };
        directionsService.route(request, function(result, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(result);
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:09:23.483

在这种情况下，只需在方向渲染器上设置方向面板，而不是地图；并且不要创建地图。像这个[例子](http://www.geocodezip.com/v3_GoogleEx_directions_noMap.html)

# objective-c - 我怎样才能看到真实世界的时间已经从 obj-c/ios 中存储的开始日期过去了？

> ID：13184822
> 
> 赞同：0
> 
> 时间：2012-11-01T20:16:51.183
> 
> 标签：objective-c, ios

在我的游戏中，玩家将能够种植一棵树，这需要 3 个小时才能长好。当玩家重新登录时，我将如何计算这棵树现在是否已经完全长大？树（种植）的创建日期将存储在服务器上，我将以秒为单位存储 3 小时（不确定这是否应该是 NSNumber 的整数）也在服务器上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:26:15.623

从服务器获取您的创建日期作为 `NSDate`，并`timeIntervalSinceDate:`像这样使用：

```
NSDate *now = [NSDate date];
NSTimeInterval secondsSincePlanting = [now timeIntervalSinceDate:plantingDate];
if (secondsSincePlanting > secondsRequiredForTreeToFullyGrow) {
   ...
} 
```

# java - 我什么时候应该同步我班级的方法？

> ID：13184825
> 
> 赞同：9
> 
> 时间：2012-11-01T20:16:54.730
> 
> 标签：java

我正在考虑创建一个类（如 String、StringBuffer 等）。这可以在单线程和多线程环境中使用。我不知道开发人员可能会使用哪种环境。预计最坏的情况，我可以同步。

但是，1\. 同步会影响性能。2.没有同步，就不是线程安全的。

所以，我有两个选择。

1.  保持类不同步 - 但使用此类的开发人员需要在适当的时候对其进行同步。
2.  拥有所有同步方法 - 并受到性能影响。

我已经看到 Java 中的许多（如果不是全部的话。例如，ArrayList over Vector）类已经演变为采用第一种方法。在为我的班级决定这两个选项之前，我需要考虑哪些事情？

或者换一种说法，我是否应该使用“public synchronized void bar()”而不是“public void bar()”，只有当我**确定**bar 可以在多线程环境中使用并且不应该运行时同时？

**编辑** 所以，很明显我在标题中误用了“实用程序类”这个词。谢谢 Jon Skeet 指出这一点。我已经从标题中删除了世界“实用程序”。

举个例子，我在考虑一个类，比如 Counter。计数器只是一个例子。还有其他方法可以实现 Counter。但是这个问题是关于同步的。Counter 对象会记录*某事*已经完成了多少次。但它可能用于单线程或多线程环境。那么，我应该如何处理 Counter 中的同步问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T20:19:19.550

我认为是一个实用程序*类*——通常是一个模糊相关的公共静态方法的抓包——很少需要任何同步。除非该类保持一些可变状态，否则您通常绝对没问题。

当然，如果您采用*本身*在线程之间共享并包含可变状态的参数，您可能需要同步 - 但这通常应该由调用者决定。

如果您通过“实用程序类”表示其他意思，那么最好知道您的意思。如果它是一个没有可变状态的类（但可能是*不可变*状态，在构造时设置），那么通常可以在线程之间共享。

如果它具有可变状态但没有*明确*关于线程，我通常不会在该类中放置任何同步，但记录它*不是*线程安全的。通常，调用者无论如何都需要使用多个对象来同步多个操作，因此“一次方法”同步通常没有帮助。

如果它是一个关于线程的类（例如管理生产者/消费者队列的东西），那么我会尝试使它成为线程安全的，但记录你的意思。我鼓励您*不要*让方法本身同步，而是在*仅*用于同步的私有 final 字段上同步；这样，您的类将包含*唯一*可能在该对象上同步的代码，从而更容易推理您的锁定。

您几乎可以肯定*不*应该根据性能做出这些决定。在大多数情况下，正确性和易用性*远比性能重要。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T20:26:34.413

关于您的最后一个问题：如果可以从多个线程调用方法，则您不会同步该方法。如果方法使用可以从多个线程访问的某种状态，则您同步方法。

因此，即使您的`bar()`方法仅从一个线程调用，如果它访问一个由多个线程通过其他方法读取和修改的实例变量，那么该`bar()`方法必须是同步的（或者至少是访问的代码块共享变量）。同步是关于共享状态的。

编辑：

关于您的主要问题：您可以简单地使用与集合框架相同的策略：使您的 Counter 成为接口，并提供默认的非线程安全实现。还提供一个实用程序类 ( `Counters`)，其中包含一个返回同步计数器代理的方法：`Counters.synchronizedCounter(Counter counter);`。

这样，您就可以两全其美了。请注意，此设计的一个重点是同步计数器自身同步。这使得调用者可以添加外部同步，以防计数器上的两个方法调用必须以原子方式完成：

```
Counter synchronizedCounter = Counters.synchronizedCounter(c);
// call a and b atomically:
synchronized (synchronizedCounter) {
    synchronizedCounter.a();
    synchronizedCounter.b();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:39:55.567

虽然同步性能得到了改进，但 VM 的其他部分也得到了改进。因此同步仍然是一个明显的开销。

特别是，同步操作会阻止许多优化技巧。即使 VM 可以进行逃逸分析，VM 仍然必须保留重新排序并添加内存屏障，以符合 Java 内存模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T20:21:52.920

如今，同步带来的“性能损失”非常小。只有当您有证据表明同步导致性能问题时，您才应该关注它。

如果您的类通过多个方法引用的静态字段具有状态，则您可能需要同步。在这种情况下，最好有实例字段并使用单例模式，这将更清楚地向其他程序员传达类的意图是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T20:22:13.420

在现代 JVM 上，单线程访问同步方法的性能损失几乎可以忽略不计。

但是为什么不创建一个基准并亲自看看呢？

# python - 为什么使用 pip 安装 numpy 会失败，而直接构建则不会？

> ID：13184826
> 
> 赞同：5
> 
> 时间：2012-11-01T20:16:55.340
> 
> 标签：python, numpy, pip, python-3.3

我正在尝试`numpy`在运行 Mac OS 10.7.5 (Lion) 并使用 Xcode 4.5.1 附带的编译器的 Python 3.3.0 下安装。我安装了 Python 3 并且`gfortran`使用`homebrew`没有任何问题，但是`pip3 install numpy`失败了。在线查看其他建议，我尝试使用以下命令将 Clang 设置为 C 编译器：

```
export CC=clang
export CXX=clang
export FFLAGS=-ff2c 
```

但收到同样的错误。最后一行报告`ValueError: underlying buffer has been detached`，我[发布了完整的输出](https://gist.github.com/3996080)。

因此，我尝试使用[SciPy.org 的说明](http://www.scipy.org/Installing_SciPy/Mac_OS_X)直接从源代码构建。这似乎成功了；构建和安装过程一直运行到完成，尽管它们并不羞于报告警告。完整的日志再次[作为 Gist 提供](https://gist.github.com/3996140)。然后我可以`numpy.test('full')`从 Python 3 运行，虽然有一些关于我不理解的未关闭文件的警告，但它[报告所有测试都通过了](https://gist.github.com/3996163)。

当我显然可以毫无问题地手动完成时，有谁知道为什么 pip 无法构建 NumPy？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T23:30:04.633

看起来 numpy 现在在 pypi 上提供了轮子，它应该可以正确安装，而无需在使用 pip 时在您的机器上本地编译任何东西。

# ios - 在 Storyboard 中的 viewController 之间传递信息

> ID：13184832
> 
> 赞同：0
> 
> 时间：2012-11-01T20:17:03.663
> 
> 标签：ios, xcode, storyboard

我正在通过制作一个非常简单的应用程序来学习如何使用故事板。在主视图控制器 ( `InfoViewController`) 上，我有一个名为的 textField: `nameField`。在此字段中输入文本后，当我输入`save`按钮时，文本应附加到数组 ( `list`)（在 中声明`TableViewController`）并显示在 中的表格上`TableViewController`。

此外，segue 标识符是：`GoToTableViewController`.

但是，文本不会传递`nameField`给`list`（数组）。起初，我认为我在使用 textField 时犯了一些错误。所以我用静态文本替换了它。但这也无济于事。然后我使用 NSLog() 检查字符串是否已添加到数组中，但每次我得到`Null`. 据我了解，`list`(array) 在`TableViewController`加载之前不会创建。出于这个原因，我`alloc`在`init` `list`InfoViewController 中。但这无济于事。

有人可以帮我找出我犯的错误吗？

谢谢！

我的代码的相关部分如下：

InfoViewController.h

```
#import <UIKit/UIKit.h>

@class TableViewController;

@interface InfoViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITextField *nameField;
@property (strong, nonatomic) TableViewController *tableViewController;
@end 
```

InfoViewController.m

```
#import "InfoViewController.h"
#import "TableViewController.h"

@implementation InfoViewController

@synthesize nameField;
@synthesize tableViewController;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    tableViewController = [[TableViewController alloc] init];
    tableViewController.list = [[NSMutableArray alloc] init];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqual:@"GoToTableViewController"])
    {
        /* Pass data to list and then reloadTable data */

        tableViewController = segue.destinationViewController;
        tableViewController.infoViewController = self;

// (*)      [tableViewController.list addObject:nameField.text];
// (*)      [tableViewController.list addObject:@"Hi!"];

        [tableViewController.list insertObject:@"Hi" atIndex:0];
// (**)      NSLog(@"%@", [tableViewController.list objectAtIndex:0]);
        [tableViewController.tableView reloadData];

    }
}

@end 
```

( * ) 我插入了这些语句以查看我在使用 nameField 中的值时是否犯了错误。( ** ) 此语句用于检查插入到数组中的值。

表视图控制器.h

```
#import <UIKit/UIKit.h>

@class InfoViewController;

@interface TableViewController : UITableViewController

@property (nonatomic, strong) NSMutableArray *list;
@property (strong, nonatomic) InfoViewController *infoViewController;

@end 
```

表视图控制器.m

```
#import "TableViewController.h"
#import "InfoViewController.h"

@implementation TableViewController

@synthesize list;
@synthesize infoViewController;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.rightBarButtonItem = self.editButtonItem;
    list = [[NSMutableArray alloc] init];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{ return 1; }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{ return list.count; }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [list objectAtIndex:indexPath.row];

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:34:52.717

`viewWillAppear`在方法中重新加载表`tableViewController`：

```
[tableViewController.tableView reloadData]; 
```

# llvm - 什么是 LLVM 上下文？

> ID：13184835
> 
> 赞同：17
> 
> 时间：2012-11-01T20:17:20.507
> 
> 标签：llvm

LLVM 上下文到底是什么？是代码运行的bitsize等环境吗？LLVMContext 类的 mwmbers 是什么？我浏览了[http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html](http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html)。但不能理解太多。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T22:17:39.133

从您包含的链接中：

> 这是在线程上下文中使用 LLVM 的重要类。它（不透明地）拥有和管理 LLVM 核心基础设施的核心“全局”数据，包括类型和常量唯一表。

因为它说“不透明”，你不应该知道它包含什么，它做什么或用于什么。只需将其视为对核心 LLVM“引擎”的引用，您应该将其传递给需要`LLVMContext`.

编辑：只是为了澄清：不，它不包含诸如位大小之类的东西-它们在 TargetData 中定义。

# prolog - 谓词在 Prolog (SICStus) 中无法按预期工作

> ID：13184837
> 
> 赞同：1
> 
> 时间：2012-11-01T20:17:22.710
> 
> 标签：prolog, sicstus-prolog

我对 prolog 谓词有疑问。

我有一个棋盘，我想检查一个玩家何时没有值在 1 到 10 之间的棋子，称为移动棋子。代码如上所示：

```
test_board([
      [piece('   ',12,blk),piece('R2 ',2,red),piece('RB ',11,red),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk)],
      [piece('   ',12,blk),piece('RB ',11,red),piece('RF ',0,red),piece('RB ',11,red),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('RB ',11,red),piece('   ',12,blk),piece('   ',12,blk)],
      [piece('   ',12,blk),piece('   ',12,blk),piece('RB ',11,red),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk)],
      [piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk),piece('   ',12,blk)],
      [piece('   ',12,blk),piece('   ',12,blk),piece('X  ',13,for),piece('X  ',13,for),piece('   ',12,blk),piece('   ',12,blk),piece('X  ',13,for),piece('X  ',13,for),piece('   ',12,blk),piece('   ',12,blk)],
      [piece('   ',12,blk),piece('   ',12,blk),piece('X  ',13,for),piece('X  ',13,for),piece('   ',12,blk),piece('   ',12,blk),piece('X  ',13,for),piece('X  ',13,for),piece('   ',12,blk),piece('   ',12,blk)],
      [piece('B6 ', 6,blue),piece('B4 ', 4,blue),piece('B5 ', 5,blue),piece('B10',10,blue),piece('B7 ', 7,blue),piece('B4 ', 4,blue),piece('B8 ', 8,blue),piece('B9 ', 9,blue),piece('B5 ', 5,blue),piece('B4 ', 4,blue)],
      [piece('B7 ', 7,blue),piece('B2 ', 2,blue),piece('B5 ', 5,blue),piece('BB ',11,blue),piece('B3 ', 3,blue),piece('B6 ', 6,blue),piece('B3 ', 3,blue),piece('B1 ', 1,blue),piece('B2 ', 2,blue),piece('B3 ', 3,blue)],
      [piece('B3 ', 3,blue),piece('B2 ', 2,blue),piece('BB ',11,blue),piece('B3 ', 3,blue),piece('BB ',11,blue),piece('B2 ', 2,blue),piece('BB ',11,blue),piece('B6 ', 6,blue),piece('B2 ', 2,blue),piece('B7 ', 7,blue)],
      [piece('B2 ', 2,blue),piece('B6 ', 6,blue),piece('B5 ', 5,blue),piece('B4 ', 4,blue),piece('B2 ', 2,blue),piece('BB ',11,blue),piece('BF ',0,blue),piece('BB ',11,blue),piece('B8 ', 8,blue),piece('B2 ', 2,blue)]]
).

check_mobile_pieces([],_):-
  fail.

check_mobile_pieces([BoardHead|BoardTail],Opponent):-
  check_mobile_pieces_line(BoardHead,Opponent);
  check_mobile_pieces(BoardTail,Opponent).

check_mobile_pieces_line([],_):-
  fail.

check_mobile_pieces_line([LineHead|LineTail],Opponent):-
  piece(_,PieceValue,Opponent)=LineHead,
  ((PieceValue > 0, PieceValue<11) -> true
                                   ;check_mobile_pieces_line(LineTail,Opponent)). 
```

在这个例子中，结果应该是“是”，但结果是“否”。为什么？任何人都可以得到代码中的错误？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:03:36.790

你应该说你发出什么查询，对我来说并不明显。事实上，Prolog 的大部分行为都是通过变量的实例化来控制的，并且在不知道`Opponent`绑定的情况下很难回答。

无论如何，我认为您会得到`false`，因为`Opponent`不断更改一行中的每个元素，然后`piece(_,PieceValue,Opponent)=LineHead,`check_mobile_pieces_line/2 在执行您感兴趣的测试之前将失败。

**编辑**在列表中搜索的最简单方法是使用 member/2。然后查看玩家是否有可移动的棋子：

```
has_movable(Player) :-
  test_board(Board),
  member(Row, Board),                    % peek a row
  member(piece(_, Value, Player), Row),  % peek a Player'piece
  Value > 0, Value < 11. 
```

说玩家没有可移动物：

```
....
\+ has_movable(Player),
.... 
```

# python - 如何将登录/注册集成到 pinax(0.9) 项目中？

> ID：13184839
> 
> 赞同：0
> 
> 时间：2012-11-01T20:17:32.800
> 
> 标签：python, django, eclipse, pinax

我已经安装了 pinax，现在我想集成一些应用程序。首先，我想从登录和注册开始。

我试图处理 Pinax 的不良文档，因此我不知道如何开始？

我怎么能用 pinax 0.9 做到这一点。我需要修改什么？

遵循的一般路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:00:37.603

你可以先使用[pinax-project-account](https://github.com/pinax/pinax-project-account)你必须在 consol 上启动一个项目 写下这些

```
$ django-admin.py startproject [your_project_name] --template=https://github.com/pinax/pinax-project-account/zipball/master 
```

[your_project_name] 替换您自己的项目名称。然后你必须安装要求

转到consol上有requirement.txt文件的目录并写入

```
pip install --requirement requirements.txt 
```

然后测试你的项目它可能会工作！不要忘记将应用程序添加到 INSTALLED_APS

# php - $_SERVER 环境信息数组中的 REDIRECT_KOHANA_ENV 是什么

> ID：13184841
> 
> 赞同：0
> 
> 时间：2012-11-01T20:17:45.650
> 
> 标签：php, redirect, kohana, environment-variables

我正在尝试让一个基于 Kohana 框架的 PHP 应用程序在 Linux 服务器上运行。

我的`.htaccess`或应用程序中存在一个问题（尚未解决），它阻止了漂亮 URL 的使用。当我调试时，我在我的`$_SERVER`数组中发现了这个：

```
print_r($_SERVER);

...
[REDIRECT_KOHANA_ENV] => PRODUCTION
... 
```

在我的 .htaccess 文件中，只有一行来设置环境变量：

```
SetEnv KOHANA_ENV PRODUCTION 
```

而且我正在做一个重定向：

```
RewriteRule ^(fr|en)/(this|that)/?([^/]*)$ /index.php/$1/that/ [NC,QSA,L] 
```

有人知道这`REDIRECT_KOHANA_ENV`是如何设置的吗？

这有关系`$_SERVER['REDIRECT_REMOTE_USER']`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:42:20.603

看起来这是您的 htaccess 中的某些东西导致了这种情况。以下是有关 htaccess 重写和`REDIRECT_`常量的一些详细信息`$_SERVER`：

[http://www.php.net/manual/en/reserved.variables.php#79811](http://www.php.net/manual/en/reserved.variables.php#79811)

# android - Sencha Touch 究竟是如何包装原生应用的？

> ID：13184844
> 
> 赞同：1
> 
> 时间：2012-11-01T20:18:06.823
> 
> 标签：android, ios, touch, extjs

当我将我的 Web 应用程序编译为原生 iOS 和 Android 应用程序时，它将如何工作？它会是在我的服务器中运行我的应用程序的常规 Web 视图吗？或者它会将所有图像、HTML 和 CSS 文件放在 Xcode 上应用程序项目的文件夹中并在本地读取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:25:22.483

后者。它将所有文件复制到设备，并运行将从本地目录加载的 web 视图。可以将其想象为您的 PC 上有一些 Web 文件，然后将浏览器指向 localhost 以访问它们。即使离线，它也会加载所有本地页面/图像，但除非在线，否则您将面临连接到外部资源的错误。无需接触开发人员的服务器即可制作大量 Web 应用程序，而且很多时候一个简单的 restful 解决方案就足够了。

# sql - 从多个表创建一个表，同时保留原始 ID 和原始表？

> ID：13184856
> 
> 赞同：1
> 
> 时间：2012-11-01T20:18:39.660
> 
> 标签：sql, oracle

这是我任务的一部分，我被困在第一部分..

他们要求我们创建一个数据仓库表来整合来自其他表的数据。

需求表给了我以下必须使用的模式。

```
A3DWSW (DWSWID, TITLE, CATCODE, CATNAME, ORIGID, ORIGITABLE)
the DWSWID, TITLE, CATCODE, CATNAME columns are from A3SOFTWARE and A3CATEGORY TABLE 
```

所以我写了这个 DDL 来创建`A3DWSW`包含其他表中的列的表

```
CREATE TABLE A3DWSW AS (SELECT A3SOFTWARE.SWID, A3SOFTWARE.TITLE, A3SOFTWARE.CATCODE, A3CATEGORY.CATNAME FROM A3SOFTWARE, A3CATEGORY); 
```

这会创建表，但我无法从任何其他表中获取有关列的`ORIGID`任何信息。`ORIGITABLE`它们没有列，所以我假设`ORIGINAL`某些表的名称意味着。但是我猜不出哪个表和ID是原始的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:23:42.310

我认为你在这里遗漏了一些东西。最好的猜测是两个表中都有列 `DWSWID, TITLE, CATCODE, CATNAME`，您实际上是在为两个表中的每一行创建一行。

这意味着如果每个表有 5 行数据，您最终将得到一个 10 行的表。然后 are`ORIGID`将映射到被复制行的 ID，并且`ORIGITABLE`将是该行来自的表的名称。

# php - 将 Month Year 函数转换为 Time Ago PHP

> ID：13184859
> 
> 赞同：-1
> 
> 时间：2012-11-01T20:18:47.147
> 
> 标签：php, datetime

> **可能重复：**
> [PHP 如何查找自日期时间以来经过的时间？](https://stackoverflow.com/questions/2915864/php-how-to-find-the-time-elapsed-since-a-date-time)

我有以下产生 MONTH YEAR 的内容。

```
<?php echo date('F Y', strtotime($video['Video']['posted_date'])); ?> 
```

我希望这个输出到“时间”之前。即 3 小时前、6 个月前、2 年前。任何帮助将不胜感激。谢谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:47:02.317

```
$now            = new DateTime(date("Y-m-d H:i:s"));
$videoPosted    = new DateTime($video['Video']['posted_date']);
$interval       = $now->diff($videoPosted);

echo $interval->format('%h hours, %m month and %d days ago'); 
```

仅在 PHP 版本 > 5.3 时使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:23:09.253

如果您使用 php 5.3+，您正在寻找[`DateInterval::format()`](http://php.net/manual/en/dateinterval.format.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T20:21:48.743

这将帮助您计算日期差异：[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

然后你可以使用转换结果`strtotime()`

# ruby-on-rails-3 - 如何实现我的网站的 reddit 样式子实例？

> ID：13184865
> 
> 赞同：1
> 
> 时间：2012-11-01T20:19:41.447
> 
> 标签：ruby-on-rails-3, subdomain, reddit

我在 www.tradespring.net 上有一个使用 ruby​​ on rails 制作的网站。我想创建一堆实例，例如 www.tradespring.net/electronics、www.tradespring.net/automotive 等。这些子站点的工作方式与原始站点完全相同，但每个站点都有自己的一组帖子，但所有子实例的用户都是相同的。

我可以从哪里开始寻找？目前我什至不知道谷歌的好关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:24:49.437

您可以从 Ryan 最近创建的两个最佳网络广播开始，其中解释了在 Rails 中创建多租户应用程序。

```
Multitenancy with Scopes
Webcast: http://railscasts.com/episodes/388-multitenancy-with-scopes
Source Code: https://github.com/railscasts/388-multitenancy-with-scopes

Multitenancy with PostgreSQL
Webcast: http://railscasts.com/episodes/389-multitenancy-with-postgresql
Source Code: https://github.com/railscasts/389-multitenancy-with-postgresql 
```

**[更新]**哦！我错过了这些是专业网络广播。虽然您可以查看这些网络广播的源代码。

# smtp - java中7Zip类型的SMTP附件不被识别为多部分？

> ID：13184866
> 
> 赞同：0
> 
> 时间：2012-11-01T20:19:47.237
> 
> 标签：smtp, jakarta-mail, mime-types, 7zip

我正在尝试使用 SMTP（java 邮件）发送 7Zip 附件，即使在将正确的多部分和内容类型设置为“application/x-7z-compressed”之后，我也看到它没有显示为附件，如下所示，任何建议我可能会错过什么？

![如何接收消息](../Images/e1be410b45350ecaab8dc6b5eb6d727e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:55:23.267

要么是有什么东西弄乱了帖子的格式，要么是你粘贴了一张图片。无论哪种方式，都很难确切地看到您的消息发生了什么。

尝试使用 JavaMail 中包含的 msgshow.java 演示程序。它可以显示消息的结构。如果它没有向您展示您的期望，请向我们提供更多详细信息。特别是，“未显示为附件”是什么意思？“秀”在做什么？你的邮件阅读器？

# mysql - 如何使用mysql中的存储过程将记录从一个表保存到另一个表？

> ID：13184871
> 
> 赞同：0
> 
> 时间：2012-11-01T20:20:24.003
> 
> 标签：mysql, sql, scripting, data-migration

我试过了，但我不知道该怎么做。我想使用存储过程将记录从一个表迁移到另一个表。我从一个简单的程序开始（不确定它是对还是错）根据某些条件打印记录。这是我尝试过的代码：

```
CREATE PROCEDURE curdemo()
BEGIN
 DECLARE done INT DEFAULT FALSE;
  DECLARE a VARCHARCHAR(16);
  DECLARE cur1 CURSOR FOR SELECT user_name FROM discovery_configuration;
   OPEN cur1;
  REPEAT 
    FETCH cur1 INTO a;
     IF a!=' ' THEN 
        select a;
    END IF;
  END REPEAT;
   CLOSE cur1;
END; 
```

如果 user_name 列为空，我需要一个存储过程将这些记录迁移到另一个表。谁能指导我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:40:28.713

为什么它必须是一个存储过程？

您可以在一个查询中复制记录，然后在另一个查询中删除它们。

复制到另一个 user_name 为空的表：

```
INSERT INTO other_table (id, user_name, other)
SELECT (id, user_name, other)
FROM discovery_configuration
WHERE user_name IS NULL OR TRIM(user_name) = ''; 
```

然后，复制这些记录后，从原始表中删除：

```
DELETE FROM discovery_configuration WHERE id IN (SELECT id FROM other_table); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T06:09:04.383

您是插入所有列还是仅插入用户名？如果您将所有列插入到另一个表中，您应该将所有列放入游标中，然后插入表中.. 并留下这个..根据上面提供的信息，我知道您想迁移数据如果用户名列为空，则从一个表到另一个表...对吗？那么你有一个简单的方法来做到这一点。

INSERT INTO A (COUMNS DETAILS) 从 B 中选择列，其中 B.USERNAME = ' ';

试试这个，让我知道..!!

——拉杰什·乌德姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:44:06.717

怎么样：

将 userName 插入 newTable 从 discovery_configuration 中选择 userName where cur1 != ' '

# c# - 读取 SharePoint 2010 列表时出现“项目不存在”错误

> ID：13184873
> 
> 赞同：3
> 
> 时间：2012-11-01T20:20:40.020
> 
> 标签：c#, list, sharepoint, impersonation

我在 SharePoint 2010 中有一个列表。如果我以编程方式（通过自定义 Web 部件）将项目添加到列表中，我可以稍后阅读这些项目并将它们显示在其他 Web 部件中。但是，如果我尝试读取通过 Web 界面添加的列表项，我的 webpart 中会出现以下错误：

**项目不存在。您选择的页面包含不存在的项目。它可能已被其他用户删除。0x81020016**

奇怪的是，在调试器中，我看到列表项被正确读取。我正在把我剩下的头发拉到这个上面。

有任何想法吗？

* * *

这是任何关心的人的答案：

我这样调用我的页面 - mywebpage.aspx?id=1，其中 id=1 是我希望我的 webpart 显示的列表中项目的 id。由于某些只有 Microsoft 知道的原因，在查询字符串中使用“id”是一个禁忌。所以我将参数名称更改为“lid”，现在一切正常。

感谢大家的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:31:09.887

您很可能在 Web 应用程序中使用不正确的凭据访问 SPItem。您应该提供适当的用户模拟。

请阅读我的帖子如何配置网络应用以进行模拟以了解更多详细信息：

[WindowsIdentity 和经典 .Net 应用程序池](https://stackoverflow.com/questions/12645601/windowsidentity-and-classic-net-app-pool/12646148#12646148)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:10:12.407

嗯，我想我找到了。我这样调用我的页面 - mywebpage.aspx?id=1，其中 id=1 是我希望我的 webpart 显示的列表中项目的 id。由于某些只有 Microsoft 知道的原因，在查询字符串中使用“id”是一个禁忌。所以我将参数名称更改为“lid”，现在一切正常。

感谢大家的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:37:33.223

作为项目的创建者，您将有权访问它。您需要检查您正在查询的 SharePoint 列表上的权限，以查看您的代码用于身份验证的帐户在您不是作者的列表中具有哪些权限。

# php - html、css 和 php 网站容器 div 不包含

> ID：13184879
> 
> 赞同：-1
> 
> 时间：2012-11-01T20:21:06.213
> 
> 标签：php, css, html

我被困住了，我很绝望。这是问题所在：

我有一个包含所有其他 div 的 div“容器”。但不知何故，div 以第一个 php 语句的位置结束！我说的是魔法。我希望容器 div 保存整个页面，但它到达第一个 php 语句（将另一个文件中的代码包含到页面中）并结束。我找不到原因。

代码。

HTML

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>{subTITLE}<?php echo TITLE; ?></title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta http-equiv="description" content="{subDESCRIPTION}<?php echo DESCRIPTION; ?>">
<meta http-equiv="keywords" content="<?php echo KEYWORDS; ?>">
<link type="text/css" rel="stylesheet" href="<?php echo ABSWEBTPLPATH; ?>main.css">
</head>

<body>
<div class="superbar">
                    <div class="menuSearch">
                    <span>
                        <?php ShowSearchForm(); ?>
                    </span>
                    </div>

</div>
<div class="container">

        <?php include(TPLPATH.'header.php'); ?>

<br/><br/><br/>

    <div class="content">
            <div class="contentLeft">
                <div class="cLhead">
                    <h4>
                    Categories
                    </h4>
                </div>
                <ul class="categories">
                    <?php ShowMenu(); ?>    

                </ul>
            </div>
            <span class="contentRight">
                <?php ListGoods(); ?>
            </span> 
    </div>

    <?php include(TPLPATH.'footer.php'); ?>
</div>
</body>
</html> 
```

header.php 的 PHP

```
 <div class="header-container">
    <div class="wrapper">

    </div>
        <div id="header_top_right">
        <div class="btn1">
            <span class="menuPokupki"><div class="description"><a href="http://www.oplata.info" target="_blank">Мои покупки</a></div><div class="descriptionSub"><nobr>история покупок</nobr></div></span>
        </div>
        <div class="btn2">
            <span>
            <a href="<?php echo ABSWEBPATH; ?>" title="Мой магазин"><h5 >Мой&nbsp;магазин</h5></a>
            </span>
        </div>

        <form action="<?php echo ABSWEBPATH; ?>ch_rt.php" method="post">
        <span class="cnt">
            Валюта:
            <select name="rt" class="sorting">
            <?php
            session_start();

            if(isset($_SESSION["rt"]) && !empty($_SESSION["rt"])) {
            if($_SESSION["rt"] == "wmr" or $_SESSION["rt"] != "wmz" or $_SESSION["rt"] != "wme" or $_SESSION["rt"] != "wmu") {
            echo "<option value=\"wmr\" selected=\"selected\">руб. (RUR)</option>\r\n"; }
            else {echo "<option value=\"wmr\">руб. (RUR)</option>\r\n";}

            if($_SESSION["rt"] == "wmz") {
            echo "<option value=\"wmz\" selected=\"selected\">$ (USD)</option>\r\n"; }
            else {echo "<option value=\"wmz\">$ (USD)</option>\r\n";}

            if($_SESSION["rt"] == "wme") {
            echo "<option value=\"wme\" selected=\"selected\">&euro; (EUR)</option>\r\n"; }
            else {echo "<option value=\"wme\">&euro; (EUR)</option>\r\n";}

            if($_SESSION["rt"] == "wmu") {
            echo "<option value=\"wmu\" selected=\"selected\">грн. (UAH)</option>\r\n"; }
            else {echo "<option value=\"wmu\">грн. (UAH)</option>\r\n";} }
            else {

            if(isset($default_rt) && !empty($default_rt)) {
            if($default_rt == "wmr" or $default_rt != "wmz" or $default_rt != "wme" or $default_rt != "wmu") {
            echo "<option value=\"wmr\" selected=\"selected\">руб. (RUR)</option>\r\n"; }
            else {echo "<option value=\"wmr\">руб. (RUR)</option>\r\n";}

            if($default_rt == "wmz") {
            echo "<option value=\"wmz\" selected=\"selected\">$ (USD)</option>\r\n"; }
            else {echo "<option value=\"wmz\">$ (USD)</option>\r\n";}

            if($default_rt == "wme") {
            echo "<option value=\"wme\" selected=\"selected\">&euro; (EUR)</option>\r\n"; }
            else {echo "<option value=\"wme\">&euro; (EUR)</option>\r\n";}

            if($default_rt == "wmu") {
            echo "<option value=\"wmu\" selected=\"selected\">грн. (UAH)</option>\r\n"; }
            else {echo "<option value=\"wmu\">грн. (UAH)</option>\r\n";} }

            else {
            echo "<option value=\"wmr\" selected=\"selected\">руб. (RUR)</option>
            <option value=\"wmz\">$ (USD)</option>
            <option value=\"wme\">&euro; (EUR)</option>
            <option value=\"wmu\">грн. (UAH)</option>\r\n"; } }
            ?>
            </select>
            <input type="submit" value="Установить" class="button" />
            </form></span></div>

            </div>

        <div class="subheader">
        <ul class="menu">
            <li class="menu1" noWrap><a href="about.php">О магазине</a></li>
            <li class="menu1" noWrap><a href="pay.php">Способы оплаты</a></li>
            <li class="menu1" noWrap><a href="contact.php">Контакты</a></li>
            <span class="filter">
                <span class="sortingTitle">Сортировка:</span>
                <span class="sortingSelect">
                <?php GoodsSort(); ?>
                </span>

        </span>
        </ul>

        </div>
</div>
</div> 
```

CSS 有 500 行，所以我把它上传到了 pastebin 很抱歉糟糕的废话代码。我必须紧急编辑别人的，我已经讨厌他了

> [http://pastebin.com/6b5UC9mj](http://pastebin.com/6b5UC9mj)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:23:36.957

header.php 中的关闭 div 太多

拿出最后一张

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:42:36.407

您的跨度在表单之外关闭。您当前的结构是：

```
<form action="<?php echo ABSWEBPATH; ?>ch_rt.php" method="post">
   <span class="cnt">
      ....
   </form>
 </span> 
```

一定是：

```
<form action="<?php echo ABSWEBPATH; ?>ch_rt.php" method="post">
   <span class="cnt">
      ....
    </span>
</form> 
```

# java - GWT 编译器忽略方法的注释

> ID：13184881
> 
> 赞同：10
> 
> 时间：2012-11-01T20:21:09.850
> 
> 标签：java, gwt

是否可以创建注释（或其他方式）以强制 GWT 编译器不编译方法？我有一个类，我也在应用程序引擎上使用（在共享文件夹中），其中一个方法需要一个仅服务器端的函数，这会导致 GWT 无法编译。我希望 GWT 忽略该方法（而 appengine 没有）。

我想出了一个注释，或者一个在编译之前擦除方法的预编译脚本。这两种方法都对我有用，如果我仍然可以通过 Eclipse IDE 编译，那将是最好的。

其他人想过这个或尝试过吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-07T17:39:30.247

直到现在。最近添加了这样的注释`@com.google.gwt.core.shared.GwtIncompatible("Description why...")`。它适用于类或方法。

但是补丁代码还没有发布！官方状态为`FixedNotReleased`。我可以亲自确认，它不在当前的 GWT 2.5.1 版本中。我对即将到来的 2.5.2 充满希望。

看：

[http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/core/shared/GwtIncompatible.java?spec=svn11570&r=11570](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/core/shared/GwtIncompatible.java?spec=svn11570&r=11570)

[http://code.google.com/p/google-web-toolkit/issues/detail?id=3769](http://code.google.com/p/google-web-toolkit/issues/detail?id=3769)

[https://gwt-review.googlesource.com/#/c/2320/](https://gwt-review.googlesource.com/#/c/2320/)

请注意， 中已经有类似的注释`com.google.gwt.thirdparty.guava.common.annotations.GwtIncompatible`，`gwt-dev.jar`但是它不起作用，编译器仍然想在共享类中编译我的*不兼容方法。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T21:17:21.210

在 GWT 版本 2.6 之前，没有注释可以使 GWT 编译器忽略方法。在 GWT 问题跟踪器中有一个[请求](http://code.google.com/p/google-web-toolkit/issues/detail?id=3769)，显然它计划在 2.6 版本中发布。

一种解决方法是在自己的类中使用“违规”方法，并在文件中忽略该类`.gwt.xml`：

```
<source path="gwtclient">
   <exclude name="AppEngineOnlyClass.java" />
   ...
</source>
... 
```

希望有点帮助。

干杯，

# iphone - 对齐 UICollectionView 的最后一行

> ID：13184883
> 
> 赞同：12
> 
> 时间：2012-11-01T20:21:35.547
> 
> 标签：iphone, ios, uicollectionview

据我所知，`UICollectionViewFlowLayout`证明除最后一行之外的所有行。因此，例如，如果没有足够的项目来填充超过 1 行，则结果是不合理的。

![在此处输入图像描述](../Images/4b573408e735822e8260f97ec0d9de3a.png)

配置或子类的最简单方法是什么，`UICollectionViewFlowLayout`以便它也证明一个部分的最后一行？

![在此处输入图像描述](../Images/2d545159768350d53e41311efcd2276e.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T22:24:28.400

不幸的是，这实际上是不可能的。不幸的是，它不是那样设计的。

我能想到的可能可行的一件事是在数据源中添加一个额外的项目，在最后返回，它有一个 0 像素高的单元格和集合视图的宽度。这将强制最后一行是单行，上面只有一个项目，然后它上面的所有行都是合理的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T19:46:47.227

您可以通过子类化 UICollectionViewFlowLayout 并覆盖`layoutAttributesForElementsInRect:`并`layoutAttributesForItemAtIndexPath:`通过更改`frame`项目的 UICollectionViewLayoutAttributes 对象的属性，将所有项目放置在您想要的最后一行（除了第一行，这已经是正确的）中。

# iphone - 在 Xcode 中为 iPhone 5 手电筒应用程序调暗 LED

> ID：13184892
> 
> 赞同：7
> 
> 时间：2012-11-01T20:22:15.323
> 
> 标签：iphone, ios, xcode, ios6

我希望使用滑块选项来调暗手电筒的 LED。我知道 Apple 支持 iOS 6，但是我不确定要使用什么代码。这是我目前在 .m 文件中的代码。

```
-(IBAction)torchOn:(id)sender;
{
    onButton.hidden = YES;
    offButton.hidden = NO;

    onView.hidden = NO;
    offView.hidden = YES;

    AVCaptureDevice *flashLight = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if([flashLight isTorchAvailable] && [flashLight isTorchModeSupported:AVCaptureTorchModeOn])
    {
        BOOL success = [flashLight lockForConfiguration:nil];
        if(success)
        {
            [flashLight setTorchMode:AVCaptureTorchModeOn];
            [flashLight unlockForConfiguration];
        }
    }
}

-(IBAction)torchOff:(id)sender;
{
    onButton.hidden = NO;
    offButton.hidden = YES;

    onView.hidden = YES;
    offView.hidden = NO;

    AVCaptureDevice *flashLight = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if([flashLight isTorchAvailable] && [flashLight isTorchModeSupported:AVCaptureTorchModeOn])
    {
        BOOL success = [flashLight lockForConfiguration:nil];
        if(success)
        {
            [flashLight setTorchMode:AVCaptureTorchModeOff];
            [flashLight unlockForConfiguration];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T20:36:16.897

`- (BOOL)setTorchModeOnWithLevel:(float)torchLevel error:(NSError **)outError`

做你想做的。但是，据我所见，它仅以特定间隔（〜0.2）更新。

```
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
[device lockForConfiguration:nil];
[device setTorchModeOnWithLevel:slider.value error:NULL];
[device unlockForConfiguration]; 
```

**编辑 - 完整示例：**

这是一个 UISlider。您需要将 IBAction 插座添加到滑块或以编程方式添加目标（就像我一样）：

```
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(20.0f, 20.0f, 280.0f, 40.0f)];
slider.maximumValue = 1.0f;
slider.minimumValue = 0.0f;
[slider setContinuous:YES];
[slider addTarget:self action:@selector(sliderDidChange:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:slider]; 
```

然后，响应滑块的变化：

```
- (void)sliderDidChange:(UISlider *)slider
{
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    [device lockForConfiguration:nil];
    [device setTorchModeOnWithLevel:slider.value error:NULL];
    [device unlockForConfiguration];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T17:18:14.723

如果有两个滑块，那是因为滑块设置在 m 中。文件你必须删除`[self.view addSubview:slider];`代码的一部分。

# android - 如何找到 API 密钥以及在哪里使用它？

> ID：13184898
> 
> 赞同：-4
> 
> 时间：2012-11-01T20:22:34.363
> 
> 标签：android, api-key

我有两个问题：

1.  我想找到 apiKey 并找到 MD5 代码，但是当我在 Google 的注册密钥中复制 MD5 时，写这是错误的，但我复制了 cmd 的 MD5。我以前得到 apiKey 但现在 Google 写错了！！这个问题可能是因为我之前获得了 apikey 吗？但我之前得到 apikey 用于调试没有最终版本。

2.  当我找到 apiKey 时，如何获得最终版本？我应该选择 export 吗？我在哪里使用 apiKey？我是否在程序布局文件夹中的地图 apikey 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:33:37.243

生成用于发布的 apiKey 的步骤：
1\. 构建密钥库 - 从 eclipse > 右键单击​​项目，然后 android 工具 > 导出签名的应用程序包
2\. 打开 cmd 并导航到 jre 的 bin 文件夹。你应该在 cmd 中有这样的东西（取决于你安装 jre 的位置）：

```
c:\Program Files (x86)\Java\jre7\bin > 
```

现在写下面的cmd

```
keytool -v -list -alias <your alias> -keystore <path to keystore> 
```

其中**<您的别名>**将替换为创建密钥库时使用的别名。
**< 密钥库的路径 >**是您保存密钥库的位置。

例如。: keytool -v -list -alias alias_name -keystore e:\name.keystore

这就是它每次都对我有用的方式。
希望能帮助到你。

# android - Android 通知宽度

> ID：13184899
> 
> 赞同：6
> 
> 时间：2012-11-01T20:22:45.840
> 
> 标签：android, notifications, size, width

我正在编写一个从多个“符号”构建通知的[应用程序。](https://play.google.com/store/apps/details?id=com.aragaer.reminder)有时这些不适合，我会停下来添加一些不适合的符号。

目前我正在查看设备的屏幕宽度以确定适合的符号数量。像这样：

```
DisplayMetrics dm = resources.getDisplayMetrics();
int num = dm.widthPixels / height; 
```

其中高度是 64dp 的“硬编码”值。

不过，这不适用于平板电脑。结果我丢失了最右边的符号。有没有办法确定我的通知中的实际空间量？

在这张图片上，我使用了另一个总共不超过 7 个符号的硬编码值。 ![在此处输入图像描述](../Images/2ff5d36eb3e4a690c47c833ca244ce80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:43:11.470

是否使用 height=64 或相当于 64dp 的像素？

为什么不获取顶层的宽度和高度以获取可用的屏幕尺寸而不是全屏尺寸（包括系统和 ActionBars）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T19:40:17.283

这是我一直在等待的答案：478dp

[来源](https://github.com/android/platform_frameworks_base/blob/master/packages/SystemUI/res/layout/system_bar_notification_panel.xml)

这导致每个通知大约有 7.5 个符号，并且硬编码的值为 7 是正确的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-30T04:55:26.253

按照下面的代码：

```
Notification noti = new Notification.Builder(context)
        .setContentTitle(context.getString(R.string.app_name))
        .setContentText(notification_description).setDefaults(Notification.DEFAULT_ALL)
        .setStyle(new NotificationCompat.BigTextStyle() .bigText(msg).
                setSmallIcon(R.drawable.application_icon_notification)
        .setContentIntent(contentIntent)
        .setAutoCancel(true)
        .build(); 
```

# android - NoClassDefFoundError 使用 Android 应用程序、Maven 和 Eclipse 开发库

> ID：13184900
> 
> 赞同：4
> 
> 时间：2012-11-01T20:23:02.797
> 
> 标签：android, eclipse, maven, adt, android-maven-plugin

我正在开发一个 Android 库 ( [SiriRestClient](https://github.com/CUTR-at-USF/SiriRestClient/wiki) )，其工件通过 Maven 进行管理，并且我正在使用 Eclipse 进行开发。我将工件打包为 JAR 文件，因为我在项目中没有任何资产，只有 Java 类，并且存在[使用 Eclipse/Maven/ADT 将工件打包为 apklib 的问题](https://github.com/rgladwell/m2e-android/issues/8)。

我还在开发一个依赖于 SiriRestClient 库的 Android 用户界面应用程序 ( [SiriRestClientUI )。](https://github.com/CUTR-at-USF/SiriRestClientUI/wiki)我正在通过 Maven 管理对 SiriRestClient 库的依赖。

项目在 Eclipse 中独立构建和部署。

问题：

由于我开始通过 Maven 管理 SiriRestClientUI 对 SiriRestClient 库的依赖关系，如果我在 Eclipse 中同时打开了库项目和 SiriRestClientUI，`NoClassDefFoundError`当我尝试将 SiriRestClientUI 应用程序部署到设备时，我会得到一个。

例如：

```
11-01 16:11:52.288: E/AndroidRuntime(9409): java.lang.NoClassDefFoundError: edu.usf.cutr.siri.android.client.config.SiriJacksonConfig
11-01 16:11:52.288: E/AndroidRuntime(9409):     at edu.usf.cutr.siri.android.ui.MainActivity.onCreate(MainActivity.java:100)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.Activity.performCreate(Activity.java:4470)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.os.Looper.loop(Looper.java:137)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at android.app.ActivityThread.main(ActivityThread.java:4514)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at java.lang.reflect.Method.invokeNative(Native Method)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at java.lang.reflect.Method.invoke(Method.java:511)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-01 16:11:52.288: E/AndroidRuntime(9409):     at dalvik.system.NativeStart.main(Native Method)` 
```

这是库和应用程序同时开发过程中的主要烦恼，因为我发现的唯一解决方法是编辑库代码，构建库项目，关闭库项目，然后执行 SiriRestClientUI 应用程序。

我认为这个问题源于库项目打开时 Eclipse/Maven 如何处理 Maven 依赖项。

这是一个 Eclipse 屏幕截图，显示了 SiriRestClientUI 项目，当库项目（SiriRestClient，在其上方）关闭时：

![在此处输入图像描述](../Images/07dbbd6bc3e6edbf07a8a60e12497605.png)

您可以在“Maven 依赖项”下看到该`sirirestclient-1.0.0-SNAPSHOT.jar`文件是从我的本地 Maven 存储库中提取的，这正是我想要的。在这种配置下，一切正常。

但是，当我打开 SiriRestClient 库项目时，我的“Maven 依赖项”条目发生了变化，JAR 文件消失了，而是显示了该项目的文件夹：

![在此处输入图像描述](../Images/c69f16b06fe18bd16ae19ad7cdfe677a.png)

如果我在两个项目都打开时尝试启动 SiriRestClientUI，那么我会得到`NoClassDefFoundError`. 因此，似乎 Eclipse 正在重定向项目构建并且未包含库类。

问题：

如何配置 Eclipse/Maven 使其始终依赖本地 Maven 存储库中的 JAR 文件，而不是将 Maven 依赖项切换到本地项目？

或者，有没有另一种方法可以摆脱`NoClassDefFoundError`这种配置？

库项目的 pom.xml 文件在[此处](https://github.com/CUTR-at-USF/SiriRestClient/blob/master/pom.xml)。

SiriRestClientUI 应用程序项目的 pom.xml 文件位于[此处](https://github.com/CUTR-at-USF/SiriRestClientUI/blob/master/pom.xml)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:43:35.337

试试这个：右键单击项目 -> 属性 -> Maven -> 取消选中`Resolve dependencies from Workspace projects`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T07:43:27.610

你需要确定两件事，第一：依赖的android peoject应该有节点apklib，像这样，不要忘记打包节点

```
<modelVersion>4.0.0</modelVersion>
<groupId>cn.company.common</groupId>
<artifactId>util</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>apklib</packaging>
<name>util</name> 
```

第二：android项目的依赖节点应该是这样的，不要忘记类型节点，记得添加

```
<dependency>
<groupId>cn.company.common</groupId>
<artifactId>util</artifactId>
<version>0.0.1-SNAPSHOT</version>
<type>apklib</type>
</dependency> 
```

# android - Android 在 SurfaceView 上更改相机预览大小和位置

> ID：13184902
> 
> 赞同：3
> 
> 时间：2012-11-01T20:23:09.347
> 
> 标签：android

我想制作一个在表面视图上显示相机预览的应用程序。SurfaceView 填满了屏幕，但我只想在屏幕的某个位置显示预览，在一个较小的正方形中。我也想稍后在surfaceview上绘制其他东西，围绕预览。我的问题是预览填充了整个表面视图。有没有办法解决这个问题？我读到我不能同时使用多个 SurfaceView 来分离预览和绘图。

谢谢您的帮助！

# iphone - 缩小的图像在移动 Safari 中模糊（仅在 1 页上）

> ID：13184905
> 
> 赞同：0
> 
> 时间：2012-11-01T20:23:26.530
> 
> 标签：iphone, html, css, mobile-safari, responsive-design

我创建[了一个网站](http://tomreinert.de/relaunch/index.php)。在移动 Safari 中查看时，[项目页面](http://tomreinert.de/relaunch/index.php?p=projekte)上的图像看起来很模糊。[然而，项目详细信息页面](http://tomreinert.de/relaunch/index.php?p=k)上的图像非常清晰。

我不知道，是什么模糊了图像。图像的分辨率足够高，因此它与视网膜显示没有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:26:10.160

您正在使用 html 来调整图像大小。使用 Photoshop 或在代码中制作单独的、重新采样的较小版本的文件。

浏览器调整图像大小不佳，您应该使用软件调整大小（如果您愿意，可以在自己的代码中完成）。

只需将图像大小放入您的标记中，就会使其进行非重采样调整大小，这通常看起来很垃圾。

此链接已过时，但它说明了您需要了解的内容... [http://graphicssoft.about.com/od/aboutgraphics/l/blresizehtml.htm](http://graphicssoft.about.com/od/aboutgraphics/l/blresizehtml.htm)

这适用于你的电脑的唯一原因是现代电脑在浏览器中调整大小时会重新采样。并非所有人都会这样做，移动设备可能不会。

# java - 在 Java 中，如何使用 posix 通配符语法从多个文件中读取数据？

> ID：13184911
> 
> 赞同：1
> 
> 时间：2012-11-01T20:23:58.183
> 
> 标签：java, file-io, wildcard

目前，我有一个循环 System.in 进行数据处理的脚本。我从几个文件中传递数据给它`cat`。

```
cat myfiles*.txt | java MyDataProcessor 
```

基于`cat`与 Java 直接打开文件相比增加了一些低效率的想法，我想将其优化为 Java 直接打开文件的位置：

```
java MyDataProcessor myfiles*.txt 
```

是否有任何 Java 库使这变得相当容易（即处理将 posix 通配符转换为文件处理程序）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:12:53.113

Java 7 添加了一个 PathMatcher 类，该类可用于根据 glob 验证路径名（类似于 shell 所做的匹配）

```
PathMatcher matcher = FileSystems.getDefault().getPathMatcher("glob:myfiles*.txt");
matcher.matches(filename); 
```

可以在[此处的 Oracle Java 教程中找到遍历文件树和基于 glob 搜索文件的示例](http://docs.oracle.com/javase/tutorial/essential/io/find.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:26:28.533

最好传递目录名称并通过目录树进行 Java 解析，而不是依赖特定于 shell 的“通配符”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:31:29.717

我会使用 java.io.File 遍历整个目录，然后使用正则表达式过滤文件名。您可以使用以下代码将通配符表达式转换为正则表达式：

```
 /**
 * Converts wildcard expression to regular expression. In wildcard-format,
 * '*' = 0-N characters and ? = any one character.
 * @param wildcardExp wildcard expression string
 * @param buf buffer which receives the regular expression
 */
static public void wildcardToRegexp(FastStringBuffer wildcardExp, FastStringBuffer buf) {
    final int len = wildcardExp.size();
    buf.clear();
    for (int i = 0; i < len; i++) {
        char c = wildcardExp.charAt(i);
        switch (c) {
        case '*':
            buf.append('.');
            buf.append('*');
            break;
        case '?':
            buf.append('.');
            break;
        // escape special regexp-characters

        case '(':
        case ')':
        case '[':
        case ']':
        case '$':
        case '^':
        case '.':
        case '{':
        case '}':
        case '|':
        case '\\':
        case '+':
            buf.append('\\');
            buf.append(c);
            break;
        default:
            buf.append(c);
            break;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T20:31:46.073

查看[Java Grep Library](https://stackoverflow.com/questions/6222659/java-grep-library)它与您的任务很接近，但没有通配符。

Apache 提供带有通配符的类： http: [//cleanjava.wordpress.com/2012/03/21/wildcard-file-filter-in-java/](http://cleanjava.wordpress.com/2012/03/21/wildcard-file-filter-in-java/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T21:37:44.700

如果这对某人来说并不明显，因为起初对我来说不是，如果文件是本地的，那么您可以让 Posix 为您进行解析，并且文件将`main(String[] args)`作为参数传递给。就我而言，我还有一些其他参数，所以只需将通配符参数移到最后一个。

```
// USAGE: java MyProcessor arg1 arg2 myfiles*.txt

public static void main(String[] args) throws Exception {
  String arg1 = args[0];
  String arg2 = args[1];

  // looping over all input files
  for (int i = 2; i < args.length; i++) {
    File inputFile = new File(args[i]).getCanonicalFile();
    BufferedReader in = new BufferedReader(new FileReader(inputFile)); 
    // ...
  }
} 
```

# c - 在线程函数中使用字符串数组

> ID：13184914
> 
> 赞同：0
> 
> 时间：2012-11-01T20:24:19.567
> 
> 标签：c, pthreads, signals

我正在尝试将数组传递给线程函数，以便它可以访问函数中的数组。目前它只包含线程的名称。

```
const char *a[2];
char *s = "Thread 1";
char *r = "Thread 2";
a[0] = s;
a[1] = r;
pthread_create(&t, NULL, oddhandler, (void *)a[0]);
pthread_create(&y, NULL, evenhandler, (void *)a[1]); 
```

目的是像这样编写创建

```
pthread_create(&t, NULL, oddhandler, &a);
pthread_create(&y, NULL, evenhandler, &a); 
```

我将如何重新编写此函数以适应此更改？

```
static void *
oddhandler(void *p)
{
    char *q = (char *)p;
    printf("%s is ready.\n", q);
    sigset_t set;
    int sig = SIGUSR1;

    sigemptyset(&set);

    sigaddset(&set, SIGUSR1);

    while (1) {

       /* Wait for SIGUSR1 */
       sigwait(&set, &sig);

       printf("%s received a SIGUSR1!\n", q);

    }

    return ((void *)NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:41:49.407

您可以尝试将线程 id 与线程数据耦合：

```
typedef struct thread_info {
  int thread_id; // different for every thread
  void * thread_data; // the same for every thread
} 
```

与您的示例程序一样，您可以创建一个函数、处理程序，并让线程根据它们的 id 进行调整。

```
pthread_create(&(t[id], NULL, handler, &(info[i]));

void * handler(void * info) {
   thread_info * myInfo = (thread_info *) info;
   char *q = ((char *) myInfo->thread_data) + myInfo->thread_id;

   // rest of function
} 
```

# mysql - sqlalchemy FetchedValue 和 primary_key

> ID：13184916
> 
> 赞同：3
> 
> 时间：2012-11-01T20:24:27.863
> 
> 标签：mysql, python-3.x, sqlalchemy, pyramid

我正在尝试创建一个使用 UUID_SHORT() 作为主键的表。我有一个触发器，可以在您进行插入时插入一个值。我无法让 sqlalchemy 将列识别为 a`primary_key`而不会抱怨不提供默认值。如果我确实包含了默认值，即使在刷新之后，它也会使用该默认值，尽管声明了`server_default=FetchedValue()`. 我似乎可以让事情正常工作的唯一方法是该列不是主键。

我正在使用 Pyramid、SQLAlchemy ORM 和 MySQL。

这是模型对象：

```
Base = declarative_base()
class Patient(Base):
    __tablename__ = 'patient'
    patient_id = Column(BigInteger(unsigned=True), server_default=FetchedValue(), primary_key=True, autoincrement=False)
    details = Column(Binary(10000)) 
```

在 initializedb.py 我有：

```
with transaction.manager:
    patient1 = Patient(details = None)
    DBSession.add(patient1)
    DBSession.flush()
    print(patient1.patient_id) 
```

运行`../bin/initialize_mainserver_db development.ini`给我以下错误：

```
2012-11-01 20:17:22,168 INFO  [sqlalchemy.engine.base.Engine][MainThread] BEGIN (implicit)
2012-11-01 20:17:22,169 INFO  [sqlalchemy.engine.base.Engine][MainThread] INSERT INTO patient (details) VALUES (%(details)s)
2012-11-01 20:17:22,169 INFO  [sqlalchemy.engine.base.Engine][MainThread] {'details': None}
2012-11-01 20:17:22,170 INFO  [sqlalchemy.engine.base.Engine][MainThread] ROLLBACK
Traceback (most recent call last):
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py", line 1691, in _execute_context
    context)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/default.py", line 333, in do_execute
    cursor.execute(statement, parameters)
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 418, in execute
    self._handle_result(self._connection.cmd_query(stmt))
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 345, in _handle_result
    self._handle_noresultset(result)
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 321, in _handle_noresultset
    self._warnings = self._fetch_warnings()
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 608, in _fetch_warnings
    raise errors.get_mysql_exception(res[0][1],res[0][2])
mysql.connector.errors.DatabaseError: 1364: Field 'patient_id' doesn't have a default value 
```

使用 mysql 客户端运行手动插入会导致一切正常，因此问题似乎出在 SQLAlchemy 上。

```
mysql> insert into patient(details) values (null);
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> select * from patient;
+-------------------+---------+
| patient_id        | details |
+-------------------+---------+
| 94732327996882980 | NULL    |
+-------------------+---------+
1 row in set (0.00 sec)

mysql> show triggers;
+-----------------------+--------+---------+-------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
| Trigger               | Event  | Table   | Statement                           | Timing | Created | sql_mode | Definer        | character_set_client | collation_connection | Database Collation |
+-----------------------+--------+---------+-------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
| before_insert_patient | INSERT | patient | SET new.`patient_id` = UUID_SHORT() | BEFORE | NULL    |          | root@localhost | utf8                 | utf8_general_ci      | latin1_swedish_ci  |
+-----------------------+--------+---------+-------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:46:32.693

这是我作为解决方法所做的...

```
DBSession.execute(
"""CREATE TRIGGER before_insert_patient BEFORE INSERT ON `patient`
    FOR EACH ROW BEGIN
        IF (NEW.patient_id IS NULL OR NEW.patient_id = 0) THEN
            SET NEW.patient_id = UUID_SHORT();
        END IF;
    END""") 
```

在病人课上：

```
patient_id = Column(BigInteger(unsigned=True), default=text("uuid_short()"), primary_key=True, autoincrement=False, server_default="0") 
```

因此，只有当有人直接访问数据库而不是通过 python 代码访问数据库时，触发器才会执行某些操作。并且希望没有人这样做`patient1 = Patient(patient_id=0, details = None)`，因为 SQLAlchemy 将使用“0”值而不是触发器产生的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:16:37.450

为了完整起见，根据您的回答，这里有另外两种可能的解决方案（也可[在此处找到）。](https://gist.github.com/4007240)它们比您的解决方案稍微简单一些（省略传递具有正确默认值的参数）并使用*SQLAlchemy*构造来定义触发器。

```
#!/usr/bin/env python3

from sqlalchemy import BigInteger, Column, create_engine, DDL, event
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from sqlalchemy.schema import FetchedValue
from sqlalchemy.sql.expression import func

Base = declarative_base()

class PatientOutputMixin(object):
    '''
    Mixin to output human readable representations of models.
    '''
    def __str__(self):
        return '{}'.format(self.patient_id)

    def __repr__(self):
        return str(self)

class Patient1(Base, PatientOutputMixin):
    '''
    First version of ``Patient`` model.
    '''
    __tablename__ = 'patient_1'

    patient_id = Column(BigInteger, primary_key=True,
                        default=func.uuid_short())

# the following trigger is only required if columns are inserted in the table
# not using the above model/table definition, otherwise it is redundant
create_before_insert_trigger = DDL('''
CREATE TRIGGER before_insert_%(table)s BEFORE INSERT ON %(table)s
FOR EACH ROW BEGIN
    IF NEW.patient_id IS NULL THEN
        SET NEW.patient_id = UUID_SHORT();
    END IF;
END
''')

event.listen(Patient1.__table__, 'after_create',
             create_before_insert_trigger.execute_if(dialect='mysql'))
# end of optional trigger definition

class Patient2(Base, PatientOutputMixin):
    '''
    Second version of ``Patient`` model.
    '''
    __tablename__ = 'patient_2'

    patient_id = Column(BigInteger, primary_key=True,
                        default=0, server_default=FetchedValue())

create_before_insert_trigger = DDL('''
CREATE TRIGGER before_insert_%(table)s BEFORE INSERT ON %(table)s
FOR EACH ROW BEGIN
    SET NEW.patient_id = UUID_SHORT();
END
''')

event.listen(Patient2.__table__, 'after_create',
             create_before_insert_trigger.execute_if(dialect='mysql'))

# test models

engine = create_engine('mysql+oursql://test:test@localhost/test?charset=utf8')

Base.metadata.bind = engine
Base.metadata.drop_all()
Base.metadata.create_all()

Session = sessionmaker(bind=engine)

session = Session()

for patient_model in [Patient1, Patient2]:
    session.add(patient_model())
    session.add(patient_model())
    session.commit()

    print('{} instances: {}'.format(patient_model.__name__,
                                    session.query(patient_model).all())) 
```

运行上述脚本会产生以下（示例）输出：

```
Patient1 instances: [22681783426351145, 22681783426351146]
Patient2 instances: [22681783426351147, 22681783426351148] 
```

# regex - 带有 $1 和 /e 的 Perl 正则表达式

> ID：13184918
> 
> 赞同：1
> 
> 时间：2012-11-01T20:24:38.410
> 
> 标签：regex, perl

我正在制作一个正则表达式构造函数。但是运行时：

```
my $text = 'a a a';
my $replace = '$1/$2-$3';
$text =~ s/(\w) (\w+) (\w+)/$replace/gmi; 
```

$text here = '$1/$2-$3'; 所以 $1,$2,$3 并没有改变，而是按原样放置在 $replace 中。我将如何使它使用 $replace 内容作为手动打印的 replate 模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:29:41.280

`$replace`只是一个字符串。如果您希望将其作为代码进行评估，则需要`/e`在替换中使用修饰符。但是您还需要为评估准备字符串以插入变量：

```
my $replace = 'qq($1/$2-$3)';
$text =~ s/(\w) (\w+) (\w+)/$replace/gmiee; 
```

我们使用双重评估首先将变量转换为字符串，然后评估该字符串。

但是，每当您发现自己依赖 eval 时，您可能正在做一些不必要的事情。正如 OmnipotentEntity 正确指出的那样，Eval 可能相当邪恶，所以使用它时要非常小心。

# php - Doctrine2 查询字符串查询

> ID：13184922
> 
> 赞同：0
> 
> 时间：2012-11-01T20:24:57.220
> 
> 标签：php, symfony, doctrine-orm, query-string

目前我用 symfony2 和教义 2 开发了一个 rest-api-app。我的 API 应该具有通过查询字符串过滤结果的功能。例如，以下网址： `http://example.com/api/users?orderBy=username%20DESC&limit=20`

我可以将查询字符串解析为`parse_str($this->getRequest()->getQueryString(), $queryString);`assoc 数组。是否有任何函数可以提交数组并且学说选择相应的结果？就像是`$users = $this->getDoctrine()->getRepository('UserBundle:User')->findByQueryString($queryString);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:37:42.013

正如 AdrienBrault 所说，不要使用`parse_str`，而是将其放入您的控制器中：

```
$orderBy = $this->get('request')->query->get('orderBy');
$limit = $this->get('request')->query->get('limit');
$rep = $this->getDoctrine()->getRepository('UserBundle:User');
$users = $rep->findLimitOrderBy($orderBy, $limit); 
```

在您的用户存储库类中：

```
public function findLimitOrderBy($orderBy, $limit)
{
$query = $this->getEntityManager()
    ->createQuery('
    SELECT u FROM UserBundle:User u
    ORDER BY u.'.$orderBy
    )
    ->setMaxResults($limit);

    return $query->getResult();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:30:43.103

您不应该使用`parse_str`来访问查询字符串参数。

您可以使用 访问 ParametersBag `$request->query`。你可以得到一个数组`$request->query->all()`。

您可以使用`findBy`存储库的方法，该方法接受具有以下格式的数组：

```
array(
    'field' => 'value',
    'field2' => 'value2',
) 
```

所以你可以做

```
$users = $userRepository->findBy($request->query->all()); 
```

但它不支持该`orderBy`参数。

# ruby-on-rails - 带有 redis 且没有数据库的 Rails 会话

> ID：13184928
> 
> 赞同：0
> 
> 时间：2012-11-01T20:25:33.200
> 
> 标签：ruby-on-rails, session, redis

嗨，我目前正在这个应用程序中工作，它使用一些 API 来检索和发送所有信息，API 管理数据库，而在我这边（Rails 应用程序）没有数据库。

有人告诉我使用 redis 来存储会话，所以我在这里使用 redis 并且没有数据库，我的模型不使用 ARecord 或 AResource。考虑到这一点，我正在使用注销方法，但由于我没有任何数据库，我不确定我应该采取什么方法来处理这个问题，因为会话存储在 redis 中，我不知道会话的键，而且我不知道如何将该会话与登录的用户链接我不知道如何删除该会话。

我对建议持开放态度，但它必须是一种 redis 解决方案，是否有任何关于使用 redis 的 rails 的身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:35:00.203

看看[https://github.com/jodosha/redis-store](https://github.com/jodosha/redis-store)。

> Redis Store为所有现代 Ruby 框架提供了一整套存储（*Cache 、I18n、Session、HTTP Cache），例如：Ruby on Rails、Sinatra、Rack、Rack::Cache 和 I18n。*它本机支持对象编组、超时、单个或多个节点和命名空间。

# iphone - itms-services // action=download-manifest url 作为本地文件

> ID：13184930
> 
> 赞同：0
> 
> 时间：2012-11-01T20:25:37.070
> 
> 标签：iphone, ios, ipad

我正在尝试利用：

itms-services // action=download-manifest url 作为本地文件，是否有任何标准方法可以通过它使用 plist 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:58:39.903

我已经在一个帮助开发人员更新 OTA 应用程序的应用程序中看到了这一点；我在源代码中看到的是使用了 file:// 链接。如果你想这样做，你必须知道文件在文件系统中的位置。然后，您将使用标准 plist 文件，但在 url 键中，您将 file://location/to/your/ipa/file 放入，它基本上是相同的。不过，这不是最好的做事方式，因为用户是否在他们的设备上拥有 ipa 文件是未知的。

# jquery - 灯丝组响应轮播不适用于 twitter bootstrap

> ID：13184931
> 
> 赞同：0
> 
> 时间：2012-11-01T20:25:41.190
> 
> 标签：jquery, twitter-bootstrap, responsive-design, carousel

[http://filamentgroup.com/lab/responsive_carousel/](http://filamentgroup.com/lab/responsive_carousel/)比 twitter bootstrap 附带的轮播更适合我的需求，但它们不兼容（添加 bootstrap.js 并且灯丝组轮播死亡）。

我曾考虑在灯丝组类前面加上 fgcarousel，但这可能会在升级过程中出现维护问题。

关于让他们玩得更好的快速方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:00:20.577

您可以替换`bootstrap.js`为 Bootstrap 的[单个 jQuery 插件](https://github.com/twitter/bootstrap/tree/master/js)，并且只包含您需要的插件（可以选择将它们缩小/组合到一个文件中）。只需省略旋转木马。

# c# - winforms 多种表单布局

> ID：13184935
> 
> 赞同：3
> 
> 时间：2012-11-01T20:25:45.533
> 
> 标签：c#, winforms, visual-studio-2010

出于好奇，是否可以有 2 个应用程序布局而不必有 2 个项目？

就像台式机/笔记本电脑的一种布局。然后是平板电脑的一种布局？

我知道winforms只有1个设计器文件，这可能回答了我的问题，但我很好奇我是否真的只需要为平板电脑布局重新创建一个全新的程序，即使它具有与桌面相同的功能，使用所有相同的控件，只是看起来略有不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:27:40.593

我将核心功能放在库程序集 (DLL) 中，并编写两个引用相同核心程序集的 UI 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:43:59.250

您可以编写自己的自定义`LayoutEngine`来处理布局。这样您就可以将所有面向布局的任务留给您的引擎，并且可以专注于代码。

这是关于如何执行此操作的 Microsoft 文章（带有示例源）：http:
[//msdn.microsoft.com/en-us/library/ms973821.aspx](http://msdn.microsoft.com/en-us/library/ms973821.aspx)

来自文章：

> 所有 Windows 窗体控件都提供 Layout 事件以及许多其他通知，从而可以编写复杂的布局代码。为了方便编写可重用的布局引擎，我们可以提供一个基本的框架。

# iis-7 - 使用多个查询字符串重写 IIS URL

> ID：13184942
> 
> 赞同：12
> 
> 时间：2012-11-01T20:26:15.743
> 
> 标签：iis-7, url-rewriting, url-rewrite-module

我在 URL 重写方面真的很新，并试图重写/重定向多个查询，但似乎不起作用。由于这是搜索结果并且带有不同的过滤，因此查询可能会有所不同。例如，某些搜索我们可能有查询，`t1=something`而在另一个我们可能有查询`t2=somethingelse`，有时我们可能会像这样组合它们：`t1=something&t2=somethingelse`

我将 IIS7 与 web.config 一起使用，这是我到目前为止所做的：
这是我的示例链接

```
www.website.com/search/?t1=first&t2=second 
```

我尝试了以下方法，但没有一个真正起作用：
（1）

```
<rewrite> 
    <rules> 
        <rule name="first" stopProcessing="true">
            <match url="search/" />
            <conditions trackAllCaptures="true">
                <add input="{QUERY_STRING}" pattern="t1=([0-9a-zA-Z]+)" />
            </conditions>
            <action type="Redirect" url="search/{C:1}/" appendQueryString="false" />
        </rule>

        <rule name="second" stopProcessing="true">
            <match url="search/" />
            <conditions trackAllCaptures="true">
                <add input="{QUERY_STRING}" pattern="t2=([0-9a-zA-Z]+)" />
            </conditions>
            <action type="Redirect" url="search/{C:1}/" appendQueryString="false" />
        </rule>
    </rules>
</rewrite> 
```

(2)

```
<rule name="a" stopProcessing="true">
    <match url="search2/" />
    <conditions trackAllCaptures="true">
        <add input="{QUERY_STRING}" pattern="t1=([0-9a-zA-Z]+)" />
        <add input="{QUERY_STRING}" pattern="t2=([0-9a-zA-Z]+)" />
    </conditions>
    <action type="Redirect" url="search2/{C:1}/{C:2}" appendQueryString="false" />
</rule> 
```

我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-14T17:10:51.777

此外，这篇文章可能会提供答案 -

[跨条件跟踪捕获组设置](https://docs.microsoft.com/en-us/iis/extensions/url-rewrite-module/url-rewrite-module-20-configuration-reference#Tracking_capture_groups_across_conditions_)

编辑：上面链接中的示例

注意**trackAllCaptures** = **true**

```
<rule name="Back-references with trackAllCaptures set to true">
 <match url="^article\.aspx" >
 <conditions trackAllCaptures="true">
    <add input="{QUERY_STRING}" pattern="p1=([0-9]+)" />
    <add input="{QUERY_STRING}" pattern="p2=([a-z]+)" />  
 </conditions>
 <action type="Rewrite" url="article.aspx/{C:1}/{C:2}" /> <!-- rewrite action uses back-references to both conditions -->
</rule>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T16:43:22.423

我想我会分享一个我发现的链接 -

[可能的答案在这里](https://forums.iis.net/t/1162956.aspx)

此外，要分隔多个参数，您可以使用管道运算符。例如，像这样：

parm1=(\w+)|parm2=(\w+)

使用 {C:1} 和 {C:2} 应用目标 URL

所以，像这样的网址：

yourapp/list.aspx?parm1=abc&parm2=123

将导致如下反向引用 - {C:1}=abc 和 {C:2}=123

# javascript - jQuery没有删除元素上的类

> ID：13184946
> 
> 赞同：0
> 
> 时间：2012-11-01T20:26:35.863
> 
> 标签：javascript, jquery

我在 Javascript 中有这段代码

```
// when I click on any #type_import_block, remove class "active" from all id that contains "ver_"
$("[id*=_import_block]").mousedown(function(){
    $("[id*=ver_]").removeClass("active");
}); 
```

但不起作用，“活动”类不会从中删除`#ver_`

有人能帮我吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-01T20:38:43.877

您需要将属性匹配字符串放在引号内，如下所示：

```
$('[id*="_import_block"]') 
```

这是一个工作小提琴：http: [//jsfiddle.net/aAc6S/](http://jsfiddle.net/aAc6S/)

# python - Python - 类似收据的输出

> ID：13184947
> 
> 赞同：0
> 
> 时间：2012-11-01T20:26:43.043
> 
> 标签：python, receipt

我正在做一些功课，我对此感到头疼..要么我很愚蠢，要么我太累了，无法做到这一点..我设法使输出正确并确定了优先级，但是当我输入一个浮点数时，它就会消失疯狂..总体目标是能够输入一个可以工作的浮点值..我似乎无法理解数学解决方案

```
price = input("Enter Price ")
cash = input("Enter Cash ")
coins = [100, 50, 20, 10, 5, 1, 0.5]
change = cash-price
i = 0
while i<len(coins):
    print int(change/coins[i]),str(" X "),coins[0+i]
    if change>0:
        change = change-((change/coins[i])*coins[i])
    else:
        change = max(change,0)
    i=i+1 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:39:41.867

我懒得去检查数学，但似乎你在从零钱中减去时忘记了浮点数，所以部分硬币被视为当前的全部金额，一切都归零。我添加了一个`int`：

```
price = input("Enter Price ")
cash = input("Enter Cash ")
coins = [100, 50, 20, 10, 5, 1, 0.5]
change = cash-price
i = 0
while i<len(coins):
    print int(change/coins[i]),str(" X "),coins[0+i]
    if change>0:
        change = change-(int(change/coins[i])*coins[i])
    else:
        change = max(change,0)
    i=i+1 
```

# mysql - 连接多个表中的列

> ID：13184949
> 
> 赞同：4
> 
> 时间：2012-11-01T20:26:50.543
> 
> 标签：mysql, database, join, inner-join

以下是我需要帮助的数据库的一部分。

```
DROP DATABASE IF EXISTS bookex;
CREATE DATABASE bookex;
use Bookex;

CREATE TABLE Reviewer(
   ReviewerID INT,
   Name VARCHAR(20) NOT NULL,
   EmployedBy CHAR(30),
   constraint reviewer_reviewerID_pk PRIMARY KEY (reviewerID)
);

CREATE TABLE Book(
   ISBN        CHAR(13),
   Title       VARCHAR(70) NOT NULL,
   Description VARCHAR(100),
   Category    INT,
   Edition     CHAR(30),
   PublisherID INT         NOT NULL,
   constraint book_ISBN_pk PRIMARY KEY (ISBN)
);

CREATE TABLE BookReview(
   ISBN CHAR(13) NOT NULL,
   ReviewerID INT NOT NULL,
   Rating INT,
   Comments VARCHAR(255),
   constraint bookreview_pk PRIMARY KEY (ISBN, ReviewerID),
   constraint bookreview_ISBN_fk FOREIGN KEY (ISBN) REFERENCES Book(ISBN),
   constraint bookreview_reviewerID_fk FOREIGN KEY (ReviewerID) REFERENCES Reviewer(ReviewerID)
);

--
-- Dumping data for table 'reviewer'
--

INSERT INTO reviewer VALUES (1,'Jacobs','Gadget Boy');
INSERT INTO reviewer VALUES (2,'Troell','Dallas Underground');
INSERT INTO reviewer VALUES (3,'Bills','The RIT Reporter');
INSERT INTO reviewer VALUES (4,'Hill','Microsoft News');
INSERT INTO reviewer VALUES (5,'Kurtz','MacIntosh News');
INSERT INTO reviewer VALUES (6,'Leone',null);
INSERT INTO reviewer VALUES (7,'Doubleday','Media Mania');
INSERT INTO reviewer VALUES (8,'Wells','The RIT Reporter');
INSERT INTO reviewer VALUES (9,'Worthington','The Annex');
INSERT INTO reviewer VALUES (10,'Lawson','The Last Word');
INSERT INTO reviewer VALUES (11,'Lasky',null);
INSERT INTO reviewer VALUES (12,'Rozanski',null);
INSERT INTO reviewer VALUES (13,'Whittington','JAVA Rocks');
INSERT INTO reviewer VALUES (14,'Holden',null);
INSERT INTO reviewer VALUES (15,'Stratton','Harvard Lampoon');
INSERT INTO reviewer VALUES (16,'Johnson','NRA Weekly');
INSERT INTO reviewer VALUES (17,'Mason','BMW Owners Quarterly');
INSERT INTO reviewer VALUES (18,'Goodman','MacIntosh News');
INSERT INTO reviewer VALUES (19,'Phelps','Detroit News');
INSERT INTO reviewer VALUES (20,'Yacci','The Learning Channel');
INSERT INTO reviewer VALUES (24,'Weeden','Scrye');
INSERT INTO reviewer VALUES (25,'McVea','Programming Central');
INSERT INTO reviewer VALUES (26,'Perez-Hardy','The Network Voice');
INSERT INTO reviewer VALUES (27,'Heartthrob','Journal of Romance');
INSERT INTO reviewer VALUES (28,'Bierre','JAVA Rocks');
INSERT INTO reviewer VALUES (29,'Axelrod','JAVA Rocks');

-- Dumping data for table 'book'
--

INSERT INTO book VALUES ('1-111-11111-4','Women are From Venus ORACLE is from Beyond Pluto','New York Times Best Seller 27 weeks',1,'4',1);
INSERT INTO book VALUES ('1-222-32443-7','Calculus for Phys Ed Majors','Carry our 200 lb text book: learn integrals and keep in Shape',7,'3',7);
INSERT INTO book VALUES ('1-295-84547-1','My Love\'s Last Longing','Volume 1 of 4',1,'1',4);
INSERT INTO book VALUES ('1-533-73363-8','From the Shores of Lake Erie to IT','One man\'s Journey to IT',8,'2',1);
INSERT INTO book VALUES ('1-559-68777-1','My Love\'s Last Lingering Lost','Volume 2 of 4',1,'1',4);
INSERT INTO book VALUES ('1-932-87447-6','The Science of Literature Searching','A Book Worth a Look is Worth a Good Look Up',6,'1',5);
INSERT INTO book VALUES ('2-089-77869-5','Yes! Networking is for Bills Fans','How to Use a Spanning Tree to Exit Rich Stadium',9,'1',8);
INSERT INTO book VALUES ('2-122-29058-5','How to Keep your Cellular Bill Down','How to carry 500 Miles of Fiber in Your Wallet',5,'2',2);
INSERT INTO book VALUES ('2-221-11341-5','Tired of wired? Infrared instead!','500 Ways to pull out your hair while pulling out all your cable',5,'1',2);
INSERT INTO book VALUES ('3-444-95595-4','ER, SOM, NF, DK/NF, SQL, JDBC, ODBC, and RELVAR','How U can avoid being trapped in Database acronyms',4,'1',3);
INSERT INTO book VALUES ('3-445-43341-2','Master Wireless Through The Classic Comics','Infrared man triumphs over Cable Guy and CoAx NastyMan',2,'1',6);
INSERT INTO book VALUES ('3-445-58668-5','How to Keep your Cable Bill Down','How to Avoid Tripping on 500 Miles of Fiber in your wallet',5,'1',10);
INSERT INTO book VALUES ('4-344-22221-1','I Lasted my Love\'s Last Lingering Longing','Volume 3 of 4',1,'2',4);
INSERT INTO book VALUES ('4-668-39283-8','From Deep in the Heart of Texas to IT','One man\'s Journey to IT',8,'1',1);
INSERT INTO book VALUES ('5-538-55746-1','My Lost Love\'s Long Last Lingering','Volume 4 of 4',1,'1',4);
INSERT INTO book VALUES ('6-449-68668-8','From Brockport to IT','Prof. Johnson\'s Journey to IT (about 25 min via 490)',8,'1',1);
INSERT INTO book VALUES ('7-999-14432-2','Master HTML Through The Classic Comics','Using his Super Web thrower, Spiderman creates HTML docs',2,'2',6);
INSERT INTO book VALUES ('8-330-69586-6','The Shortest Book in the World','A Guide to how Detroit will win the World Series in 2001',9,'1',3);
INSERT INTO book VALUES ('9-333-44441-1','My Love\'s at Long Last Lost his Lingering','Volume 5 of 4',1,'1',4);
INSERT INTO book VALUES ('9-337-55467-3','How to add Class to your Programming','How to write programs in VB instead of C',3,'3',10);
INSERT INTO book VALUES ('9-400-55555-2','Master C++ Through The Classic Comics','GeekMan triumphs over C++ program infected with Kryptonite virus',2,'1',6);
INSERT INTO book VALUES ('9-444-43356-3','A language without Pointers? Priceless.','For Everything Else, there\'s C++',3,'1',13);
INSERT INTO book VALUES ('9-455-61223-3','JAVA: It\'s more than Just a Programming Language','Achieve enlightenment through the mystery of the Swing package',3,'1',7);

INSERT INTO bookreview VALUES ('1-111-11111-4',19,10,'Hold on to your hats, gang! If you think a cookbook or the yellow pages is exciting reading, you gotta read Professor Spadas remarkable treatise on enriching you personal relationships through your knowledge of ORACLE 8.1.6\. In an easy-to-read fashion, s');
INSERT INTO bookreview VALUES ('1-295-84547-1',27,10,'This is one of the most outstanding books ever written. Five thumbs up. Five stars. A must-read for everyone.');
INSERT INTO bookreview VALUES ('1-533-73363-8',20,4,'A rather boring autobiography of a northern Ohio native who migrates to Rochester New York where he becomes a professor of Information Technology at RIT. Other than the chapters devoted to the Cleveland Indians (chapters 1, 2, 3, 6, 10, 11, 12, 13), The C');
INSERT INTO bookreview VALUES ('1-559-68777-1',2,8,'A wonderful romance novel about Matt, a successful editor for the New York Times, who resigns and retreats to a Dude Ranch in New Mexico to find himself.  Matt meets Margaret, a person with cowgirl charm in touch with her masculine self. Matt falls in lov');
INSERT INTO bookreview VALUES ('1-559-68777-1',19,9,'A wonderful romance novel about Margaret, a successful editor for the New York Times, who resigns and retreats to a Dude Ranch in New Mexico to find herself.  Margaret meets Matt, a person with tough cowboy swagger in touch with his feminine self. Margare');
INSERT INTO bookreview VALUES ('2-089-77869-5',5,5,'Definitely dont buy this book if you are a Giants fan.  Two Giants fans tried this technique at the Giants game several weeks ago and they arent back yet.');
INSERT INTO bookreview VALUES ('2-089-77869-5',13,8,'For any networking buff/Bills fan, Dr. Lutz treatise on the use of spanning trees to exit a Buffalo Bills game is a must. It is difficult to slog through in spots, but he shows you that by applying his minimalization technique you can get back to Rochest');
INSERT INTO bookreview VALUES ('2-089-77869-5',15,6,'Dont buy this book unless your are  Bills fan.  Fans of any other team will find their departure time from a Bills game actually triples when the technique is applied. In fact, it probably accounts for why Dr. Lutz (and any other Bills fan who applies it');
INSERT INTO bookreview VALUES ('2-122-29058-5',6,7,'Professor Hartpence shows you how to carry 500 miles of fiber in your wallet.  Warning to the unwary: dont buy this book unless you have deep pockets.');
INSERT INTO bookreview VALUES ('2-122-29058-5',13,8,'Watch out Jim Carey .. this non-cable guy may leave you out of work. In his book, Professor Hartpence combines his cellular and networking skills with his experience in both the military and the commercial world and the practice of Zen to show you how to');
INSERT INTO bookreview VALUES ('3-444-95595-4',3,4,'U lose if you ever bother to read this book.');
INSERT INTO bookreview VALUES ('3-445-58668-5',6,7,'This book is a follow-up to Professor Hartpences book on how to carry 500 miles of fiber in your wallet.');
INSERT INTO bookreview VALUES ('4-344-22221-1',24,7,'A wonderful romance novel about Nelson, a successful editor for the New York Times, who resigns and retreats to a Dude Ranch in New Mexico to find himself.  Nelson meets Laura, a person with cowgirl charm in touch with her masculine self. Nelson falls in');
INSERT INTO bookreview VALUES ('4-668-39283-8',6,6,'A sometimes boring autobiography of a Texan transplanted to Rochester New York where he becomes a professor of Information Technology at RIT. Other than the chapters devoted to the Dallas Cowboys (chapters 1, 2, 3, 6, 10, 11, 12, 13), The Presidential ele');
INSERT INTO bookreview VALUES ('5-538-55746-1',15,9,'A wonderful romance novel about Laura, a successful editor for the New York Times, who resigns and retreats to a Dude Ranch in New Mexico to find herself.  Laura meets Nelson, a person with tough cowboy swagger in touch with his feminine self. Laura falls');
INSERT INTO bookreview VALUES ('6-449-68668-8',20,7,'The funny, often racy, autobiography of Daryl Johnson and his escapades to and from RIT. The book is largely about the excitement of commuting from the west side to RIT every day and how much fun it can be. A great book for those who live on the west side');
INSERT INTO bookreview VALUES ('6-449-68668-8',26,10,'An absolutely outstanding autobiography of a Saint John Fisher Graduate and how he has adapted to his 20 minute ride (mostly on 490) to RIT every morning and his 20 ride (mostly on 490) home from RIT every night. The author uses thirteen chapters to vibra');
INSERT INTO bookreview VALUES ('8-330-69586-6',5,10,'Geez .. no pages, no paragraphs, no words .. not even an illustration. But he did dedicate the book to Tony Clark. Says something for the fervor of this Detroit Tigers fan.');
INSERT INTO bookreview VALUES ('8-330-69586-6',15,10,'Very accurate analysis of a problem that is not NP complete.');
INSERT INTO bookreview VALUES ('9-333-44441-1',24,7,'Throwing the usual themes and twists of a romance novel to the winds, the author tells the store of Laura, a successful Dude Ranch owner in New Mexico, who resigns and moves to New York to seek her fortune as an editor for the New York Times. Laura meets');
INSERT INTO bookreview VALUES ('9-337-55467-3',25,9,'These authors know their way around a coding pad, let me tell you! In clear, bell-shaped tones, with succinct wording and pinpoint accuracy, they nail this subject matter to the wall. Do you like inheritance? How about information hiding? Maybe you like e');
INSERT INTO bookreview VALUES ('9-455-61223-3',13,9,'Professor Sonstein shows how oneness with the spiritual universe can be achieved by bringing the soul into rhytmn with the JAVA runtime machine. He shows that through various forms of self denial, such as writing code without pointers and heavy weight com'); 
```

我需要帮助显示审稿人的姓名、书名和审稿人给这本书的评分。**但只有 EmployedBy 字段为空的审阅者。**

这应该是这样的：

```
 name  | title                                 | rating 
 Leone | How to Keep your Cellular Bill Down   |      7 
 Leone | How to Keep your Cable Bill Down      |      7 
 Leone | From Deep in the Heart of Texas to IT |      6 
```

我需要使用 Inner Join、Union 还是只使用多个 SELECT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:33:20.653

在旧版本（4.24）的 MySql 上测试您的数据，这应该是您的查询

```
SELECT r.Name, b.Title, br.Rating
FROM Reviewer r JOIN BookReview br on br.ReviewerID = r.ReviewerID
     JOIN Book b ON b.ISBN = br.ISBN
WHERE r.EmployedBy IS NULL OR r.EmployedBy = '' 
```

这是结果

'Leone', '如何降低蜂窝电话费', 7
'Leone', '如何降低电缆费', 7
'Leone', '从德克萨斯州的心脏地带到 IT', 6

# javascript - 尝试动态创建一个 div 并将其居中

> ID：13184958
> 
> 赞同：1
> 
> 时间：2012-11-01T20:27:22.050
> 
> 标签：javascript, jquery

我有一个名为：

```
showModal(data); 
```

当调用它时，将创建一个带有传入内容的模式。我试图将其居中，但我不认为“this”指的是正确的对象。

```
function showModal(data){
    $("<div class = 'modal'>").css({
        "z-index": Number($("#overlay1").css("z-index")) + 5,
        top: $(window).height() / 2 - $(this).height() / 2,
        left: $(window).width() / 2 - $(this).width() / 2
    }).append(data).appendTo("body").fadeIn();
} 
```

它只会在屏幕上保持 0,0。我该如何调整它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:29:16.913

试试这个：

```
function showModal(data){
    var modal = $("<div class = 'modal'>");
    modal.css({
        "z-index": Number($("#overlay1").css("z-index")) + 5,
        top: $(window).height() / 2 - modal.height() / 2,
        left: $(window).width() / 2 - modal.width() / 2
    }).append(data).appendTo("body").fadeIn();
} 
```

在您的上下文中，`this`指的是`showModal`我认为的功能。但是您正在尝试使用“modal”类引用新创建的 div。您需要存储对它的引用，因为`.css`调用不会更改`this`对它内部的引用。您可能正在考虑普通的事件绑定，其中您传递给它的匿名函数具有 jQuery 定义`this`为相关元素的新上下文。使用`css`，您没有提供回调，因此 jQuery 无法更改或设置`this`，因为没有新的范围/上下文。我可能使用了错误的术语（上下文、范围等）...

**更新**：

问题似乎**还**`data`在于，由于在调用之前没有附加`.css`，所以模态不会有任何实质性的宽度/高度。不确定是否需要在`.css`调用之前完成附加到正文的模态，但这也可能有所帮助。

```
function showModal(data) {
    var modal = $("<div class='modal'>");
    modal.appendTo("body")
        .append(data)
        .css({
            "z-index": +$("#overlay1").css("z-index") + 5,
            top: $(window).height() / 2 - modal.height() / 2,
            left: $(window).width() / 2 - modal.width() / 2
        })
        .fadeIn();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:34:37.663

模态的位置属性应该是绝对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:38:45.283

您可能还需要添加`position`。另一个问题可能是内容还没有添加，所以没有高度。

我还将添加模态 div onload，将其移出视口，然后在运行时正确定位它`showModal`，否则每次都会添加新的 DIV。

您的代码的另一个问题是，在调整窗口大小时模态不会保持居中，但您可以使用 CSS 使用`50%`边距来解决这个问题。

另一种解决方案是 CSS 和 javascript 的组合：

```
var $modal = $("<div class='modal'>").css('left',-10000).appendTo('body'),
    zIndex;

function showModal(data){
    zIndex = parseInt($("#overlay1").css("z-index"), 10)+5;
    $modal.append(data).css({
        left: $modal.width()/-2,
        top: $modal.height()/-2,
        zIndex: zIndex,
        opacity: 0
    }).animate({ opacity: 1 });
}

function hideModal() {
    $modal.css('left',-10000);
} 
```

和CSS：

```
.modal{ position: fixed; margin-top: 50%; margin-left: 50% } 
```

这样，模态框最初位于最左侧，因此您仍然可以在显示它之前计算宽度/高度。

# ruby-on-rails-3 - 没有路线匹配：action => edit rails 3

> ID：13184960
> 
> 赞同：2
> 
> 时间：2012-11-01T20:27:25.827
> 
> 标签：ruby-on-rails-3

我不明白为什么在尝试更新食谱时收到上述错误消息

这是我的 rake 路线输出

```
 recipes GET    /recipes(.:format)                recipes#index
              POST   /recipes(.:format)                recipes#create
   new_recipe GET    /recipes/new(.:format)            recipes#new
  edit_recipe GET    /recipes/:id/edit(.:format)       recipes#edit
       recipe GET    /recipes/:id(.:format)            recipes#show
              PUT    /recipes/:id(.:format)            recipes#update
              DELETE /recipes/:id(.:format)            recipes#destroy
         root        /                                 public_pages#index 
```

我的控制器看起来像这样

```
def edit
  @recipe = Recipe.find(params[:id])
end

def update
  @recipe = Recipe.find(params[:id])

  if @recipe.update_attributes(params[:recipe])
    redirect_to recipes_path, :notice => "Successfully updated recipe"
  else 
    render :action => 'edit'
  end
end 
```

还有我编辑帖子的链接

```
<%= link_to "Edit Recipe", edit_recipe_path(@recipe) %> 
```

完整的错误是（这是在尝试访问食谱页面时

```
Routing Error

No route matches {:action=>"edit", :controller=>"recipes"}

Try running rake routes for more information on available routes. 
```

最后是我正在使用的表单，现在我唯一能想到的是我的表单存在问题，尽管我认为您可以使用相同的表单进行新建和编辑？虽然我可能完全错了

有人有想法么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:44:38.057

好的，所以在我看来好像我需要这个

```
 <%= link_to "Edit Recipe", edit_recipe_path(r.id) %> 
```

这是因为我路过

```
 <% @recipes.each do |r| %> 
```

# objective-c - NSFastEnumeration 在使用 ARC 的 C 数组上崩溃

> ID：13184961
> 
> 赞同：3
> 
> 时间：2012-11-01T20:27:28.833
> 
> 标签：objective-c, automatic-ref-counting

我正在初始化一个 C 对象数组并设置第一个元素：

```
id __strong *_objs =  (id __strong *)calloc(16,sizeof(*_objs));
_objs[0] = @1;
_count++; 
```

然后我使用 NSFastEnumeration 的以下实现：

```
- (NSUInteger) countByEnumeratingWithState: (NSFastEnumerationState*)state
                                   objects: (id __unsafe_unretained*)stackbuf
                                     count: (NSUInteger)len
{
    NSUInteger size = _count;
    NSInteger count;
    state->mutationsPtr = (unsigned long *)size;
    count = MIN(len, size - state->state);
    if (count > 0)
    {
        IMP imp = [self methodForSelector: @selector(objectAtIndex:)];
        int p = state->state;
        int i;
        for (i = 0; i < count; i++, p++) {
            stackbuf[i] = (*imp)(self, @selector(objectAtIndex:), p);
        }
        state->state += count;
    }
    else
    {
        count = 0;
    }
    state->itemsPtr = stackbuf;
    return count;
} 
```

不幸的是，当我运行它时它会因 EXC_BAD_ACCESS 而崩溃：

```
for (id object in array){  // EXC_BAD_ACCESS
    NSLog(@"%@",object)
} 
```

知道为什么吗？

如果你有[CodeRunner](http://krillapps.com/coderunner/)，[这里](https://gist.github.com/3996072)是一个可执行版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:00:29.227

问题是`mutationsPtr`指向不允许访问的内存地址 1 （也不是 4 字节对齐的）：

```
state->mutationsPtr = (unsigned long *)size; 
```

用一个有效的起始指针替换它（小心：下面的那个在你的场景中可能根本没有意义，但至少它修复了 EXC_BAD_ACCESS）：

```
state->mutationsPtr = (unsigned long *)&_count; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:48:50.647

@Jano如果您想摆脱编译器警告，您将获得最新版本的 Xcode (4.6) for

```
 - (NSUInteger) countByEnumeratingWithState: (NSFastEnumerationState*)state
                               objects: (id __unsafe_unretained*)stackbuf
                                 count: (NSUInteger)len 
```

因为它与对象的原始原型不匹配：..stackbuf

```
 - (NSUInteger) countByEnumeratingWithState: (NSFastEnumerationState*)state
                               objects: (__autoreleasing id *)stackbuf
                                 count: (NSUInteger)len 
```

[请参阅自动引用计数](https://stackoverflow.com/questions/7815326/automatic-reference-counting-error-with-fast-enumeration/)中的 Todd Lehmans 回答：快速枚举错误

# asp.net-mvc-3 - MVC3 JQuery 选项卡

> ID：13184962
> 
> 赞同：-3
> 
> 时间：2012-11-01T20:27:29.097
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery

我正在尝试创建一个包含三个选项卡的页面，其中包含 3 个部分视图。承载选项卡的主视图。

```
<script type="text/javascript">
$(function () {
    $("#tabs").tabs();
});
</script>
<div id="tabs" style="display:inline; float:inherit">
<ul>
    <li>@Ajax.ActionLink("Tab name1","ActionMethod1","ControllerName",new      AjaxOptions{UpdateTargetId="div1"})</li>
    <li>@Ajax.ActionLink("Tab name2","ActionMethod2","ControllerName",new AjaxOptions{UpdateTargetId="div2"})</li>
<li>@Ajax.ActionLink("Tab name3","ActionMethod3","ControllerName",new AjaxOptions{UpdateTargetId="div3"})</li>
</ul>
</div>
<div id=div1></div>
<div id=div2></div>
<div id=div3></div> 
```

我在 tab1 和 tab2 中创建了下一个按钮，并在 tab3 中创建了提交按钮。

请提供代码以在按钮（下一步）单击时从 tab1 打开 tab2。以及在哪里放置此代码。是在这个主视图中还是在部分视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:38:00.107

从您的评论中解决更具体的问题

要从按钮打开选项卡 2，请单击选项卡 1：

Html（[jQuery 选项卡](http://jqueryui.com/tabs/)的标准标记）：

```
<div id="tabs">
        <ul>
            <li><a id="tab1" href="#tabs-1">Tab One</a></li>
            <li><a id="tab2" href="#tabs-2">Tab Two</a></li>
            <li><a id="tab3" href="#tabs-3">Tab Three</a></li>
        </ul>
   <div id="tabs-1>
         <button type="button" id="GotoTab2">Next</button>
   </div>
   <div id="tabs-2">
         <!-- some content -->
   </div> 
```

jQuery

```
$(function () {
        $("#tabs").tabs(); 
        $('#GotoTab2').click(function () {
           $('#tab2').click();
        });
    }); 
```

# python - 如何解析python中的特定字符串

> ID：13184965
> 
> 赞同：0
> 
> 时间：2012-11-01T20:27:41.750
> 
> 标签：python

打开一个 yaml 文件以供阅读

寻找存储在其中的路径

将始终位于表单中文件的第二行

```
Location: !!python/unicode '[PATH here]' 
```

抱歉，如果这是基本的（我确定是），但是获取路径位置的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:29:55.683

最快的方法是对其进行子串化：

```
line[28:-1] 
```

但这只有在您完全确定该行将采用该格式时才有效——空格没有差异等。当然，您必须确保您有正确的行；如果第 2 行是注释而第 3 行是真正的行，并且您尝试用它来解析注释，您将得到注释的正确部分并认为它是一条路径。

更健壮和灵活的解决方案可能是使用正则表达式：

```
re.match(r".* '(.*)'", line).group(1) 
```

或者：

```
re.match(r"Location:\s!!python/unicode\s'(.*)'", q).group(1) 
```

……等等。您想要使用的确切内容取决于您想要允许的变化以及您想要防范的变化。

但实际上，如果你想解析 YAML，为什么不直接使用 YAML 解析器呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:33:24.033

另一种方法，只有在您知道路径将是该行的第三个元素时才有效：

```
line.split()[2] 
```

或者，如果您只知道它将是该行的最后一个元素：

```
line.split()[-1] 
```

# ipad - iPad - AG.Calendar 没有全宽

> ID：13184969
> 
> 赞同：1
> 
> 时间：2012-11-01T20:28:08.753
> 
> 标签：ipad, titanium, titanium-modules

使用的版本：1.2.3 我将模块添加到我的 tiapp.xml：ag.calendar

这是一个链接到它的样子：[https ://dl.dropbox.com/u/101794062/iOS%20Simulator%20Screen%20shot%20Oct%2031%2C%202012%2010.35.51%20PM.png](https://dl.dropbox.com/u/101794062/iOS%20Simulator%20Screen%20shot%20Oct%2031%2C%202012%2010.35.51%20PM.png)

我确保没有设置实际的静态宽度。奇怪的是日历开始全宽，但不完全。日历的页眉部分和页脚部分并没有全宽。

链接到我使用的模块：[https ://github.com/Appgutta/AGCalendar](https://github.com/Appgutta/AGCalendar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:36:27.457

在 KalViewController.m 中，将第 196 行替换为以下内容：

```
 CGRect rect = CGRectMake(0, 0, windowsRect.size.width, windowsRect.size.height);
    //CGRect rect = CGRectMake(0, 0, MIN(popoverRect.size.width, windowsRect.size.width),         MIN(popoverRect.size.height, windowsRect.size.height)); 
```

# python - 在 Django ChoiceField 表单中设置递增的 id

> ID：13184973
> 
> 赞同：0
> 
> 时间：2012-11-01T20:28:23.850
> 
> 标签：python, html, django, forms

有没有办法更改 Django ChoiceField 表单中的 id 值？

例如，我希望我的 ChoiceField id 以`id="rating#"`# 是递增数字的格式输出。我假设您更改了 id 的小部件属性，但我将如何获得 id 中的递增数字？

例子：

```
<label for="id_rating_0"><input type="radio" id="rating1" value="1" name="rating" /> </label>

<label for="id_rating_1"><input type="radio" id="rating2" value="2" name="rating" /> </label>

<label for="id_rating_2"><input type="radio" id="rating3" value="3" name="rating" /> </label>

<label for="id_rating_3"><input type="radio" id="rating4" value="4" name="rating" /> </label>

<label for="id_rating_4"><input type="radio" id="rating5" value="5" name="rating" /> </label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:37:31.870

如果`auto_id`表单参数不符合您的要求，那么恐怕我不知道会发生什么：

[https://docs.djangoproject.com/en/dev/ref/forms/api/#configuring-html-label-tags](https://docs.djangoproject.com/en/dev/ref/forms/api/#configuring-html-label-tags)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:42:28.370

为什么不使用 forloop 手动呈现选择

`<elem id="whatever_{{ forloop.counter }}"/>`

# java - 如何正确计算两个日期之间的实际月数？

> ID：13184976
> 
> 赞同：2
> 
> 时间：2012-11-01T20:28:36.740
> 
> 标签：java, android, date

我遵循`getDiffDateMap` 了计算 2 个日期和整数返回之间`Map`的差异的方法，这些整数分别代表毫秒、秒、分钟、小时、天、月和年。

```
public static Map<Integer, String> getDiffDateMap(String dateA, String dateB) {

    Calendar cal = Calendar.getInstance();      
    Map<Integer,String> out = new LinkedHashMap<Integer, String>();
    long timeInMillA = 0;
    long timeInMillB = 0;

    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 

    Date convertedDateA;
    Date convertedDateB;

    try {
        convertedDateA = dateFormat.parse(dateA);           
        cal.setTime(convertedDateA);
        timeInMillA = cal.getTimeInMillis();

        convertedDateB = dateFormat.parse(dateB);           
        cal.setTime(convertedDateB);
        timeInMillB = cal.getTimeInMillis();

    } catch (ParseException e) {
        e.printStackTrace();
    } 

    long mili = timeInMillB - timeInMillA;
    long sec = mili/1000;
    long min = sec/60;
    long hour = min/60;
    long day = hour/24;
    long week = day/7;
    long month = day/31; // ????
    long year = month/12;

    out.put(7, mili + "");
    out.put(6, sec + "");
    out.put(5, min + "");
    out.put(4, hour + "");
    out.put(3, day + "");
    out.put(2, week + "");
    out.put(1, month + "");
    out.put(0, year + "");

    return out;
} 
```

我的问题是根据实际天数计算月份：

```
long month = day/31; // or 30 
```

例如：

```
Map<Integer,String> out = getDiffInMillsec("2012-9-01 20:9:01", "2012-10-01 20:10:01");

    System.out.println(Arrays.asList(out)); 
```

我得到输出：月数和它的 0`[{7=2592060000, 6=2592060, 5=43201, 4=720, 3=30, 2=4, 1=0, 0=0}]` 在哪里`1`。因为差异只有 30 天。我需要添加什么流程来解决这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:32:10.323

> 我遵循方法 getDiffDateMap 计算两个日期之间的差异并返回整数映射，分别表示毫秒、秒、分钟、小时、天、月和年。

不要重新发明轮子:)

[Joda Time](http://joda-time.sf.net)有代码可以完成所有这些以及更多工作。例如：

```
LocalDateTime start = ...;
LocalDateTime end = ...;
Period difference = new Period(start, end, PeriodType.yearMonthDayTime());
int months = difference.getMonths(); // etc 
```

请注意，当您刚刚将差异转换为毫秒数时，您*无法*获得月数 - 因为月数将取决于开始/结束日期。（例如，30 天可能是也可能不是一个月……）

我强烈建议您在整个 Java 代码中使用 Joda Time，而不是`java.util.*`. 这是一个*更好*的API，并且希望这意味着您很少需要编写自己的日期/时间处理代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T20:37:36.970

我建议使用[**JodaTime#Months**](http://joda-time.sourceforge.net/api-release/index.html)

这具有以下功能：

```
 static Months   monthsBetween(ReadableInstant start, ReadableInstant end) 
```

创建一个表示两个指定日期时间之间的整月数的 Months。

```
 static Months   monthsBetween(ReadablePartial start, ReadablePartial end) 
```

创建一个 Months，表示两个指定的部分日期时间之间的整月数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T18:34:45.743

我只想在 Jon Skeet 的帮助下总结我们之前谈过的所有内容，这是一个答案，我使用了`JodaTime`每个`new Period`日期值：

```
import org.joda.time.LocalDateTime;
import org.joda.time.Period;
import org.joda.time.PeriodType;

....
    public static Map<Integer, String> getDateTimeDiffMap(String dateA, String dateB) {

    Calendar cal = Calendar.getInstance();
    Map<Integer,String> out = new LinkedHashMap<Integer, String>();

    long timeInMillA = 0;
    long timeInMillB = 0;

    SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT); 

    Date convertedDateA;
    Date convertedDateB;

    try {
    convertedDateA = dateFormat.parse(dateA);           
    cal.setTime(convertedDateA);
    timeInMillA = cal.getTimeInMillis();

    convertedDateB = dateFormat.parse(dateB);           
    cal.setTime(convertedDateB);
    timeInMillB = cal.getTimeInMillis();

} catch (ParseException e) {
    e.printStackTrace();
} 

    LocalDateTime startA = new LocalDateTime(timeInMillA);
    LocalDateTime startB = new LocalDateTime(timeInMillB);

    Period difference = new Period(startA, startB, PeriodType.days());
    int day = difference.getDays();

    difference = new Period(startA, startB, PeriodType.months());
    int month = difference.getMonths();

    difference = new Period(startA, startB, PeriodType.years());
    int year = difference.getYears();

    difference = new Period(startA, startB, PeriodType.weeks());
    int week = difference.getWeeks();

    difference = new Period(startA, startB, PeriodType.hours());
    int hour = difference.getHours();

    difference = new Period(startA, startB, PeriodType.minutes());
    long min = difference.getMinutes();

    difference = new Period(startA, startB, PeriodType.seconds());
    long sec = difference.getSeconds();

    //difference = new Period(startA, startB, PeriodType.millis());
    long mili = timeInMillB - timeInMillA;  

    out.put(7, mili + "");
    out.put(6, sec + "");
    out.put(5, min + "");
    out.put(4, hour + "");
    out.put(3, day + "");
    out.put(2, week + "");
    out.put(1, month + "");
    out.put(0, year + "");      

    return out;
} 
```

例如对于“01-09-2012 20:9:01”、“01-10-2012 20:9:01”，我得到输出：

```
year=0;
month = 1;
day=30;
hour=720;
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-11T08:54:19.563

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

另外，下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.time.temporal.ChronoUnit;
import java.util.LinkedHashMap;
import java.util.Locale;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        // Test
        System.out.println(getDiffDateMap("2012-9-01 20:9:01", "2012-10-01 20:10:01"));
    }

    public static Map<Integer, String> getDiffDateMap(String dateA, String dateB) {
        Map<Integer, String> out = new LinkedHashMap<Integer, String>();
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("u-M-d H:m:s", Locale.ENGLISH);
        LocalDateTime ldtA = LocalDateTime.parse(dateA, dtf);
        LocalDateTime ldtB = LocalDateTime.parse(dateB, dtf);

        out.put(7, String.valueOf(ChronoUnit.MILLIS.between(ldtA, ldtB)));
        out.put(6, String.valueOf(ChronoUnit.SECONDS.between(ldtA, ldtB)));
        out.put(5, String.valueOf(ChronoUnit.MINUTES.between(ldtA, ldtB)));
        out.put(4, String.valueOf(ChronoUnit.HOURS.between(ldtA, ldtB)));
        out.put(3, String.valueOf(ChronoUnit.DAYS.between(ldtA, ldtB)));
        out.put(2, String.valueOf(ChronoUnit.WEEKS.between(ldtA, ldtB)));
        out.put(1, String.valueOf(ChronoUnit.MONTHS.between(ldtA, ldtB)));
        out.put(0, String.valueOf(ChronoUnit.YEARS.between(ldtA, ldtB)));

        return out;
    }
} 
```

**输出：**

```
{7=2592060000, 6=2592060, 5=43201, 4=720, 3=30, 2=4, 1=1, 0=0} 
```

[`ONLINE DEMO`](https://ideone.com/lG2qFN)

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-16T03:08:01.370

```
 try {
        String user = request.getParameter("uname");
        out.println(user); 
        String pass = request.getParameter("pass");
        out.println(pass);
        java.sql.Date sqlDate = new java.sql.Date(new java.util.Date().getTime());

        Class.forName( "com.mysql.jdbc.Driver" );
        Connection conn = DriverManager.getConnection( "jdbc:mysql://localhost:3306/trans","root","root" ) ;
        Statement st = conn.createStatement(); 

        String sql = "insert into purch (cd,cust,dateof) values('" + user + "','" + pass + "', '" + sqlDate + "')";
        st.executeUpdate(sql);

        Date date = new Date();
        String modifiedDate= new SimpleDateFormat("-MM-").format(date);
        String dd = modifiedDate.toString();
        String da = "ai";
        out.println(dd);

        PreparedStatement statement = conn.prepareStatement("select * from purch where  dateof LIKE ? and cd = ?");    
        statement.setString(1,"%" + dd + "%");
        statement.setString(2,"" + da + "");
        ResultSet rs = statement.executeQuery();

        if(rs != null) {
        while(rs.next()) {
            out.println(rs.getString("cd"));
            out.println(rs.getString("cust"));
            out.println(rs.getString("dateof"));
        }
        }  
    }catch(Exception e) {
        System.out.println(e.toString());
    } 
```**

# asp.net-mvc-4 - MVC 路由错误

> ID：13184981
> 
> 赞同：0
> 
> 时间：2012-11-01T20:28:59.383
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我定义了一个自定义路线：

```
routes.MapRoute(
            "FabricDetails", // Route name
            "fabric/details/{designerUrlFriendlyName}/{collectionUrlFriendlyName}/{fabricUrlFriendlyName}", // URL with parameters
            new { controller = "Fabric", action = "Details", designerUrlFriendlyName = UrlParameter.Optional, collectionUrlFriendlyName = UrlParameter.Optional, fabricUrlFriendlyName = UrlParameter.Optional }, // Parameter defaults
            new[] { "StashFabrics.Web.Controllers" }
        ); 
```

我有两个几乎相同的动作链接，一个正在工作，另一个没有

```
@Html.ActionLink(fabric.FabricName, "Details", "Fabric", new RouteValueDictionary(new { designerUrlFriendlyName = fabric.DesignerUrlFriendlyName, collectionUrlFriendlyName = fabric.CollectionUrlFriendlyName, fabricUrlFriendlyName = fabric.FabricUrlFriendlyName }), null)
@Html.ActionLink(fabric.FabricName, "Details", "Fabric", new RouteValueDictionary(new { designerUrlFriendlyName = fabric.DesignerUrlFriendlyName, collectionUrlFriendlyName = "grand_hotel", fabricUrlFriendlyName = fabric.FabricUrlFriendlyName }), null) 
```

无论出于何种原因，一旦我替换了 collectionUrlFriendlyName 的硬编码值，链接就无法正确构建

```
http://localhost:55089/Fabric/Details?designerUrlFriendlyName=jenean_morrison&collectionUrlFriendlyName=grand_hotel&fabricUrlFriendlyName=ballroom_in_azure
http://localhost:55089/fabric/details/jenean_morrison/grand_hotel/ballroom_in_azure 
```

这让我很难过。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:10:48.290

好吧，我想通了。

在视图模型中，我在两个不同级别定义了 collectionUrlFriendlyName；首先是模型本身，然后是模型具有列表的类。

我没有在形成 URL 的列表级别定义 collectionUrlFriendlyName 的值。但我猜在构建 URL 时，它稍后会在上层找到值并使用它来形成丑陋的 url（从而隐藏它没有在下层填充的问题）

如果这有意义。

# google-app-engine - 在 GAE 1.7.3 中使用 DeferredTasks 时 PermGen 空间不足

> ID：13184983
> 
> 赞同：18
> 
> 时间：2012-11-01T20:29:08.337
> 
> 标签：google-app-engine, memory-leaks, task-queue, permgen

我最近切换到了 Google App Engine Java SDK **1.7.3 。**从那以后，每次我将[DeferredTasks](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Deferred_Tasks)提交到任务队列中时，我都会用完**PermGen 空间。**

*   **将应用程序部署到 App Engine 时不会发生这种情况。它只发生在本地。**但它阻止了我的本地测试和失败的集成测试。
*   它发生在带有 Java 6 的 MacOSX 10.7.5 上

    ```
    $ java -version 
    java version "1.6.0_37"
    Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
    Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
    ```

*   这是我在问题发生时看到的堆栈跟踪的一部分。

    ```
    INFO: Successfully processed ../target/projectName/WEB-INF/queue.xml
    Nov 1, 2012 3:04:00 PM com.google.appengine.api.taskqueue.dev.LocalTaskQueue init
    INFO: LocalTaskQueue is initialized
    Nov 1, 2012 3:04:01 PM org.quartz.simpl.SimpleThreadPool initialize
    INFO: Job execution threads will use class loader of thread: 1255545583@qtp-1458850232-0
    Nov 1, 2012 3:04:02 PM org.quartz.core.QuartzScheduler <init>
    INFO: Quartz Scheduler v.UNKNOWN.UNKNOWN.UNKNOWN created.
    Nov 1, 2012 3:04:02 PM org.quartz.simpl.RAMJobStore initialize
    INFO: RAMJobStore initialized.
    Nov 1, 2012 3:04:02 PM org.quartz.impl.StdSchedulerFactory instantiate
    INFO: Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
    Nov 1, 2012 3:04:02 PM org.quartz.impl.StdSchedulerFactory instantiate
    INFO: Quartz scheduler version: UNKNOWN.UNKNOWN.UNKNOWN
    Nov 1, 2012 3:04:02 PM org.quartz.core.QuartzScheduler start
    INFO: Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
    Nov 1, 2012 3:04:02 PM com.google.appengine.api.taskqueue.dev.LocalTaskQueue start_
    INFO: Local task queue initialized with base url http://localhost:8083
    Exception in thread "DefaultQuartzScheduler_Worker-9" java.lang.OutOfMemoryError: PermGen space
            at java.lang.ClassLoader.defineClass1(Native Method)
            at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
            at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
            at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
            at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
            at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
            at com.google.appengine.tools.development.DevAppServerClassLoader.loadClass(DevAppServerClassLoader.java:92)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
            at com.google.appengine.api.urlfetch.URLFetchServicePb$URLFetchRequest.newBuilder(URLFetchServicePb.java:1902)
            at com.google.appengine.api.taskqueue.dev.UrlFetchJob.newFetchRequest(UrlFetchJob.java:152)
            at com.google.appengine.api.taskqueue.dev.UrlFetchJob.execute(UrlFetchJob.java:83)
            at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
            at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
    Exception in thread "1255545583@qtp-1458850232-0" java.lang.OutOfMemoryError: PermGen space
    Exception in thread "Timer-6" java.lang.OutOfMemoryError: PermGen space
    Exception in thread "Timer-4" java.lang.OutOfMemoryError: PermGen space
    Exception in thread "Timer-2" java.lang.OutOfMemoryError: PermGen space
    Exception in thread "Timer-8" java.lang.OutOfMemoryError: PermGen space 
    ```

有关触发问题的代码，请参见下文。DeferredTask 有一个 memcache 引用，用于从 memcache 获取数据并可能将其删除。任务运行延迟 10 秒。

```
class Foo {
    private void enqueueTask() {
        queue.add(TaskOptions.Builder.withPayload(new Task()).countdownMillis(10 * 1000));
    }

    private static class Task implements DeferredTask {
        private static final MemcacheService memcache = MemcacheServiceFactory.getMemcacheService();
        private static final Logger log = Logger.getLogger(Task.class.getName());

        @Override
        public void run() {
            final String key = ...;

            if (memcache.contains(key)) {
                final Object value = memcache.get(key);

                if (some condition depending on value) {
                    memcache.delete(key);
                    memcache.increment(some other field, -1l);
                }
            } else {
                log.warning("error message");
            }
        }
    }
} 
```

其他人可以重现这个吗？谢谢！

**更新：**我在GAE 的 Google 代码页面上为此创建了[问题 8377 。](http://code.google.com/p/googleappengine/issues/detail?id=8377)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-25T12:21:40.520

此问题已在 2014 年 8 月 12 日的 1.9.6 AppEngine SDK 版本中得到解决。MaxPermSize 只能在本地开发服务器上设置。

# c# - 更新图片框会导致性能问题

> ID：13184987
> 
> 赞同：1
> 
> 时间：2012-11-01T20:29:32.420
> 
> 标签：c#, winforms, streaming

我有一个应用程序，其中包含一个图片框，每次将新图像加载到相机缓冲区时，它都会更新来自实时相机的图像。我的问题是，每当我收到这个实时提要时，整个应用程序都会变得非常缓慢并且（有时）没有响应。我有一个单独的线程，它基本上完成所有成像步骤，然后将新图像放入图片框中。我有点坚持如何解决这个问题，我想知道是否有人有任何想法？我不确定您需要什么样的代码，但这是`ImageUpdated`获取图像并将其粘贴在`PictureBox`. 谢谢你的帮助！

```
void CurrentCamera_ImageUpdated(object sender, EventArgs e)
{
    try
    {
        lock (CurrentCamera.image)
        {
            if (CurrentCamera != null && CurrentCamera.image != null && !changeCam)
            {
                videoImage = CurrentCamera.videoImage;
                if (CurrentCamera.videoImage != null && this.IsHandleCreated)
                {
                    Bitmap tmp = new Bitmap(CurrentCamera.image.Width, CurrentCamera.image.Height);
                    //Creates a crosshair on the image
                    using (Graphics g = Graphics.FromImage(tmp))
                    {
                        g.DrawImage(CurrentCamera.image, new Point(0, 0));
                        g.DrawLine(crosshairPen, new Point(CurrentCamera.image.Width / 2, 0), new Point(CurrentCamera.image.Width / 2, (CurrentCamera.image.Height)));
                        g.DrawLine(crosshairPen, new Point(0, CurrentCamera.image.Height / 2), new Point((CurrentCamera.image.Width), CurrentCamera.image.Height / 2));
                        g.DrawEllipse(crosshairPen, (CurrentCamera.image.Width / 2) - crosshairRadius, (CurrentCamera.image.Height / 2) - crosshairRadius, crosshairRadius * 2, crosshairRadius * 2);
                    }
                    pictureBox1.BeginInvoke((MethodInvoker)delegate
                    {
                        pictureBox1.Image = tmp;
                    });
                }
            }
        }
    }
    catch { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:40:18.363

除了评论之外，我认为这可能会加快一点。首先，如果图片没有设置在pictureBox1上，那么不要设置另一个。其次，由于使用了pictureBox，它被优化为没有闪烁，因此您可以在pictureBox1 的PaintEvent 方法处理程序中绘制十字准线。这是避免双重位图绘制的一点改进代码，那么您应该尽可能加快`CurrentCamera_ImageUpdated`方法执行速度，因为新图像来得非常快，C# 代码即使在高性能机器上也无法处理那么多绘制。从这里开始，并不断改进。

```
 public Form1()
    {
        InitializeComponent();
        pictureBox1.Paint += new PaintEventHandler(pictureBox1_Paint);
    }

    void  pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        if (pictureBox1.Image != null)
        {
            int width = pictureBox1.Image.Width;
            int height = pictureBox1.Image.Height;
            e.Graphics.DrawLine(crosshairPen, new Point(width / 2, 0), new Point(width / 2, height));
            e.Graphics.DrawLine(crosshairPen, new Point(0, pictureBox1.Image.Height / 2), new Point(width, height / 2));
            e.Graphics.DrawEllipse(crosshairPen, (width / 2) - crosshairRadius, (height / 2) - crosshairRadius, crosshairRadius * 2, crosshairRadius * 2);
        }
    } 
    IAsyncResult result = null;
    void CurrentCamera_ImageUpdated(object sender, EventArgs e)
    {
        try
        {
            lock (CurrentCamera.image)
            {
                if (CurrentCamera != null && CurrentCamera.image != null && !changeCam)
                {
                    videoImage = CurrentCamera.videoImage;
                    if (CurrentCamera.videoImage != null && this.IsHandleCreated)
                    {
                        if (result != null && result.IsCompleted)
                        {
                            result = pictureBox1.BeginInvoke((MethodInvoker)delegate
                            {
                                pictureBox1.Image = CurrentCamera.videoImage;
                            });
                        }
                    }
                }
            }
        }
        catch { }
    } 
```

# javascript - 使用 Javascript D3 库，如何在 mousemove 事件中确定区域元素数据集中的鼠标位置？

> ID：13184988
> 
> 赞同：5
> 
> 时间：2012-11-01T20:29:35.787
> 
> 标签：javascript, svg, d3.js

我正在尝试为我创建的区域路径设置工具提示。我检查了所有传递给 on mousemove 事件处理程序的参数，我只是得到了完整的数据集，0, 0。据我所知，没有任何东西可以表明我在数据中的索引。“这个”上下文也是 svg 路径元素。还是没什么用。甚至查看了 d3.select(this)，我也无法在任何地方找到索引。有什么方法可以确定我的鼠标在哪个数据点上？

环顾四周，我发现了对 d3.mouse(this) 的引用，这给了我 x/y 坐标，但是如何将其映射回数据集中的数据点？

我的目标是有一个工具提示来显示与集合中特定数据点相关的一些元数据。

以下是一些要求的代码片段：

```
var area=d3.svg.area()
    .interpolate("monotone")
    .x(function(d){
      return(scale.x(d.date));
    })
    .y0(height-padding.bottom)
    .y1(function(d){
      return(scale.y(d.count));
    });

var path=svg.append('path')
            .datum(data)
            .attr('d',area)
            .attr("clip-path", "url(#clip)")
            .attr('fill','url(#gradient)')
            // .attr('title','path')
            .on('mousemove',function(){
              console.log(arguments);
              console.log(d3.select(this));
              console.log(d3.mouse(this));        
            }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T14:03:54.477

@nautat 在他的编辑中有正确的答案，但我想扩展它，因为无论出于何种原因，块示例很少有评论，并且可能就像展开别人的折纸一样。

这是来自[http://bl.ocks.org/3902569](http://bl.ocks.org/3902569)的相关部分......一路上的评论是我的

```
// define a function for mouse move
// this function is wired up to the visualization elsewhere with .on('mousemove', fn)
function mousemove() {
  // using the x scale, in this case a d3 time scale
  // use the .invert() function to interpolate a date along the scale
  // given the x-coordinates of the mouse
  var x0 = x.invert(d3.mouse(this)[0]),

    // using the interpolated date, find an index in the sorted data
    // this would be the index suitable for insertion
    i = bisectDate(data, x0, 1),

    // now that we know where in the data the interpolated date would "fit"
    // between two values, pull them both back as temporaries
    d0 = data[i - 1],
    d1 = data[i],

    // now, examine which of the two dates we are "closer" to
    // to do this, compare the delta values
    d = x0 - d0.date > d1.date - x0 ? d1 : d0;

    // move the "focus" element into position
    // we find the X and Y values for the new position using the x and y scales
    // using the closest data point to the mouse
    focus.attr("transform", "translate(" + x(d.date) + "," + y(d.close) + ")");

    // set the text of the "focus" element to be the value of the element selected
    focus.select("text").text(formatCurrency(d.close));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:28:29.717

您的问题与 mouseover 事件侦听器没有太大关系，而与将数据绑定到路径的方式更相关；您没有进行正确的数据连接。

阅读有关数据连接的更多信息：http: [//bost.ocks.org/mike/join/](http://bost.ocks.org/mike/join/)

下面的例子是用 div 代替路径，但原理是一样的。请参阅以下工作示例：http: [//jsfiddle.net/RghQn/](http://jsfiddle.net/RghQn/)

```
var data = ['a', 'b', 'c'];
d3.select("body").selectAll("div")
    .data(data)
  .enter().append("div")
    .text(String)
    .on("mouseover", function(d,i) {
        console.log("mouseover!");
        // d: bound datum to DOM element
        console.log("d: ", d);
        // i: index of the selection
        console.log("i: ", i);
        // this context: the current DOM element
        console.log(d3.select(this).text());
    });
​​​​​​​​​​​​​​​ 
```

另请参阅有关事件侦听器的 API 文档部分：[https ://github.com/mbostock/d3/wiki/Selections#wiki-on](https://github.com/mbostock/d3/wiki/Selections#wiki-on)

> # selection.on(type[, listener[, capture]])
> 
> 为当前选择中的每个元素添加或删除指定类型的事件侦听器。类型为字符串事件类型名称，如“click”、“mouseover”或“submit”。指定的侦听器以与其他运算符函数相同的方式调用，传递当前数据 d 和索引 i，并将 this 上下文作为当前 DOM 元素。要访问当前事件，请使用全局 d3.event。

* * *

**编辑**

我知道意识到我误解了你的问题。您有一条路径，并希望获取有关鼠标位置的路径坐标的信息。

没有直截了当的。您可以在以下示例中看到 Mike 是如何做到的：http: [//bl.ocks.org/3902569](http://bl.ocks.org/3902569)

# php - OOP PHP新手，指导请求，类间数据共享设计

> ID：13184991
> 
> 赞同：5
> 
> 时间：2012-11-01T20:29:43.760
> 
> 标签：php, oop

用 PHP 编写我的第一个使用类和对象的应用程序。我有一个 DB 类，它需要一个字符串来选择适当的配置，因为有多个数据库。我从一个登录类开始，但为了换取一个用户类而放弃了这个想法，所以我可以做 user->isLoggedIn 的东西。用户类使用 MySQL，它存储用户和登录信息，以及第二个数据库的凭据。

```
$mysql = new db( 'mysql' );

$user = new user( $mysql );
if( !( $user->isLoggedIn() === true ) )
{
    goToPage( 'login.php' );
    exit();
} 
```

第二个数据库是 Sybase，用于存储帐户信息。我需要来自用户类的凭据才能从此处获取列表和帐户信息。我认为应该是下一个帐户课程，但不确定最好的方法。像这样的东西也许..

```
$sybase = new db( 'sybase' );

$account = new account( $sybase );

$account_list = $account->getList( $user->info ); 
```

$user->info 是一个数组，我猜测帐户表所需的凭据和信息，还是有更好的方法来解决这个问题？

**编辑**以包含 db 类示例

配置.db.php

```
$config_array = array();

$config_array[ 'mysql' ][ 'dsn' ] = "mysql:host=localhost;dbname=********;charset=UTF-8";
$config_array[ 'mysql' ][ 'user' ] = "********";
$config_array[ 'mysql' ][ 'pass' ] = "**************";

$config_array[ 'sybase' ][ 'dsn' ] = "odbc:DRIVER={Adaptive Server Anywhere 8.0};***************";
$config_array[ 'sybase' ][ 'user' ] = "**********";
$config_array[ 'sybase' ][ 'pass' ] = "*********"; 
```

类.db.php

```
public function __construct( $type )
{
    require 'config.db.php';

    $this->type = $type;

    foreach( $config_array[ $this->type ] AS $key => $value )
    {
        $this->$key = $value;
    }

    try
    {
        $this->connection = new PDO( $this->dsn, $this->user, $this->pass, $this->options );
    }
    catch( PDOException $ex )
    {
        log_action( "db->" . $this->type, $ex->getCode() . ": " . $ex->getMessage() );
        $this->error = true;
    }
    return $this->connection;
} 
```

* * *

像下面这样的东西有意义吗？

```
class User()
{
    public function getAccountList()
    {
        $this->Account = new Account( new Database( 'sybase' ) );
        return $this->Account->list( $this->userid );
    }
} 
```

此外，账户有不同的部分（即历史和注释、财务交易、文档），它们将在页面上成为不同的“标签”。每一个都应该是一个类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:48:38.213

首先，作为Dimitry另一个答案的次要答案：

拥有单身人士所获得的东西与你失去的东西相比相形见绌。你得到一个全局对象，程序的每个部分都可以读取和修改它，但是你失去了可测试性、可读性和可维护性。

因为 Singleton 对象实际上是全局的，所以您无法准确地隔离应用程序中的单个单元（这对于单元测试至关重要），因为您的函数依赖于“神奇地”插入其中的其他组件。

你失去了可读性，因为`method()`实际上可能需要其他东西才能工作（例如，`user`对象需要一个`db`实例，这`new user($db)`比 更具可读性`new user()`，因为即使不查看源代码，我也可以知道方法/对象需要什么工作。

由于上述原因，您也会失去可维护性。与在函数的“合同”中看到它相比，通过 Singleton 插入哪些组件更难，因此，将来您和/或任何其他开发人员将更难阅读和重构您的代码。

* * *

> [附带说明一下，将名称的首字母大写被认为是一种很好的命名约定，`Class`从现在开始我将使用此约定。]

让我们从顶部开始。您的`Db`对象有 2 种可能的状态`MysqlDb`， 和`SybaseDb`。这需要多态性。您有一个**抽象**类`Db`和两个**具体**类`MysqlDb`并`SybaseDb`从它继承。正确的 Db 对象的实例化是**工厂的责任**

```
class DbFactory {

    private $db;

    /**
     * Create a new Db object base on Type, and pass parameters to it.
     *
     * @param string $type Type of database, Mysql or Sybase.
     * @param string $dsn  The DSN string corresponding to the type.
     * @param string $user User credential
     * @param string $pass Password credential
     *
     * @return Db
     */

    public function create($type, $dsn, $user, $pass) {
        if (!is_a($this->db, "Db")) {
            $type     = $type . "Db";
            $this->db = new $type($dsn, $user, $pass);
        }

        return $this->db;
    }
}

abstract class Db {

    /**
     * @param $dsn
     * @param $user
     * @param $pass
     */
    public function __construct($dsn, $user, $pass) {
        $this->db = new PDO("$dsn", $user, $pass);
        $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $this->db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    }
}

class MysqlDb extends Db {

    /*
     * More specific, Mysql only implementation goes here
     */
}

class SybaseDb extends Db {

    /*
     * More specific, Sybase only implementation goes here
     */
} 
```

现在您应该问自己，谁负责获取帐户列表？当然，他们不应该自己获取（就像从数据库中获取自己的数据不是用户的责任一样）。**使用**连接`User`获取这些帐户是's 的责任。**`SybaseDb`**

 **实际上，`User`需要以下工作：

*   Sybase 数据库连接 -**获取帐户列表**。我们将`DbFactory`实例传递给它，这样如果它已经实例化，我们可以很容易地获取实例，如果没有实例化它。
*   状态信息（登录状态、用户 ID、用户名等）。

`User`不负责**设置**此数据，它**需要**它才能工作。

所以`User`构造函数应该是这样的（假设“ID”和“name”字段）：

```
User::__construct($id, $name, DbFactory $factory); 
```

将`User`有一个字段`$accounts`，该字段将保存一个**对象****数组`Account`**。该数组将填充一个`User::getAccounts()`方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T12:16:39.510

我会让 Account 成为 User 类的成员。“用户**有**一个帐户”，对吧？

另外，谈到课程，请确保您的两个数据库是单音的，并通过`getInstance()`而不是`__construct()`.**

# asp.net - 发送邮件在生产环境中不起作用 - 相同的设置

> ID：13184992
> 
> 赞同：0
> 
> 时间：2012-11-01T20:29:49.013
> 
> 标签：asp.net, email, iis, web-config, smtp

在我的网站上，我发送电子邮件。我的情况是这些邮件是在使用我的本地开发机器时发送的，而不是在我的生产环境中发送的。

两个站点上的 web.config 相同：

```
 <system.net>
    <mailSettings>
      <smtp from="info@domain.dk" deliveryMethod="Network">
        <network host="mail.domain.dk" userName="info@domain.dk"  password="mypassword" port="26"></network>
      </smtp>
    </mailSettings>
  </system.net> 
```

在我的代码中，我这样发送：

```
 SmtpClient client = new SmtpClient();
 client.Send(mail); 
```

我不知道如何调试这个问题，因为它在生产和开发中是完全相同的代码。

关于如何开始调试/解决问题的任何想法？

编辑：

我设法从服务器获取日志。错误是：

```
2012-11-01 20:41:58,383 [11] FATAL GKBusiness.Managers.MailManager [(null)] - Email exception: Mailbox unavailable. The server response was: Access denied - Invalid HELO name (See RFC2821 4.1.1.1) 
```

唔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:48:29.077

> 我的情况是这些邮件是在使用我的**本地**开发机器时发送的，而*不是*在我的**生产**环境中发送的。

```
<network host=..... port="26"> 
```

**如果**您在*共享主机环境*中，很可能 ASP.Net 设置为`Medium Trust`- 如果是这样，[则 SMTP 仅限于**端口 25**](http://blogs.msdn.com/b/alvar/archive/2010/02/08/smtp-problems-when-asp-net-is-not-running-in-full-trust.aspx)。

它将在您的**本地**环境中工作，因为 ASP.Net 设置为`Full Trust`（在本地/VS 开发中）。

# linux - 删除文件后linux磁盘使用情况报告不一致。cpanel 不准确的磁盘使用报告

> ID：13184997
> 
> 赞同：1
> 
> 时间：2012-11-01T20:30:08.797
> 
> 标签：linux, cpanel, redhat

**相关软件：**
Red Hat Enterprise Linux Server release 6.3 (Santiago)
cpanel 安装 11.34.0 (build 7)

**背景和问题：**
我收到磁盘使用警告（通过 cpanel），因为 /var 似乎在我的服务器上填满。假设是有一个日志文件变得太大并填满了分区。我最近删除了一个大型日志文件并更改了我的系统日志配置以更定期地轮换日志文件。我删除了 /var/log/somefile 之类的内容并编辑了 /etc/rsyslog.conf。这就是我怀疑 cpanel 发出的磁盘使用报告警告的原因，因为它看起来不正确。

这是 df 为分区报告的内容：

```
$ [/var]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda2             9.9G  511M  8.9G   6% /
tmpfs                 5.9G     0  5.9G   0% /dev/shm
/dev/sda1              99M   53M   42M  56% /boot
/dev/sda8             883G  384G  455G  46% /home
/dev/sdb1             9.9G  151M  9.3G   2% /tmp
/dev/sda3             9.9G  7.8G  1.6G  84% /usr
/dev/sda5             9.9G  9.3G  108M  99% /var 
```

这是 du 为 /var 挂载点报告的内容：

```
$ [/var]# du -sh
528M    . 
```

显然发生了一些奇怪的事情。过去我有类似的报告不一致，我重新启动了服务器，之后df报告似乎是正确的。我决定重新启动服务器，看看是否会发生同样的事情。

这是 df 现在报告的内容：

```
$ [~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda2             9.9G  511M  8.9G   6% /
tmpfs                 5.9G     0  5.9G   0% /dev/shm
/dev/sda1              99M   53M   42M  56% /boot
/dev/sda8             883G  384G  455G  46% /home
/dev/sdb1             9.9G  151M  9.3G   2% /tmp
/dev/sda3             9.9G  7.8G  1.6G  84% /usr
/dev/sda5             9.9G  697M  8.7G   8% /var 
```

这看起来更像我期望得到的。

为了保持一致性，这是 du 为 /var 报告的内容：

```
$ [/var]# du -sh
638M    . 
```

**问题：**
这是一个麻烦。我不确定 cpanel 发布的磁盘使用报告从哪里得到他们的信息，但它显然是不正确的。以后如何避免这种不准确的报告？似乎 df 报告错误的磁盘使用情况是源问题的一个强有力的指标，但我不确定。有没有办法以某种方式“刷新”文件系统，以便 df 报告准确而无需重新启动服务器？解决此问题的任何其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:58:41.733

如果您删除了一个文件，但它仍然被某个进程打开，则磁盘空间不会恢复——该进程会继续访问该文件。这是日志文件的常见问题，因为 syslogd 使它们全部打开。

报告的磁盘空间`du`不包括此文件，因为它通过遍历目录层次结构将找到的所有文件的大小相加来工作。但是这个文件在任何目录下都找不到，所以不算。`df`报告文件系统中使用的实际空间。

日志文件轮换脚本向 syslogd 发送一个信号，告诉它关闭并重新打开其所有日志文件。您可以通过以下方式完成此操作：

```
killall -HUP syslogd 
```

您还需要这样做`syslogd`才能使用修改后的`syslog.conf`.

# java - 使用 jQuery 获取请求属性

> ID：13184998
> 
> 赞同：3
> 
> 时间：2012-11-01T20:30:11.577
> 
> 标签：java, jquery, request

我的 servlet 类中有以下代码：

```
request.setAttribute("myValueName", myValue); //Note: myValue is a TreeMap 
```

我想通过 jQuery 访问这个属性。有谁知道如何做到这一点？

```
var myNewVariable = ???; 
```

请注意，此属性不在页面的 URL 中。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-05-09T17:14:19.667

小服务程序代码

```
response.setContentType("text/html");
request.setAttribute("myValueName", "myValue");
request.getRequestDispatcher("URL for redirecting page").forward(request, response); 
```

示例 URL ="/WEB-INF/Project/Update.jsp"

在jQuery中

```
var myNewVariable = "${myValueName}";
alert(myNewVariable); 
```