# StackOverflow 问答 15199000-15199999

# java - 如何使类文件不可分解

> ID：15199002
> 
> 赞同：-2
> 
> 时间：2013-03-04T10:08:23.020
> 
> 标签：java, class, decompiler

假设我编写了一个 JAVA 程序并创建了 JAR 文件。我怎样才能做到，如果有人从 JAR 中提取类文件，他就不能反汇编它？例如，如果您使用 DJ JAVA Decompiler，您应该会看到一条错误消息“您无法反汇编此文件”。我已经看到了这条消息。那么，如何锁定类文件呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:24:40.030

> 我怎样才能做到，如果有人从 JAR 中提取类文件，他就不能反汇编它

简单的答案是你不能。

反汇编（人类可读的字节码）是微不足道的。甚至还有一个 JDK 工具可以做到这一点。

如果使用混淆器，反编译到 Java 代码可能会*部分失败。*混淆器可以做一些事情来删除有用的符号，并混淆典型的反编译器，使它们产生不可编译的“代码”。但是，具有中等技能（和动机/持久性）的黑客无论如何都可以弄清楚您的代码在做什么，并将反编译器输出手动编辑为可编译的 Java（如果这是他/她的意图）。

有时建议的另一种方法是加密字节码。不幸的是，对于黑客来说，回避比混淆更容易。在某些时候，您的应用程序必须解密字节码才能加载它们。黑客需要做的就是拦截它们。

* * *

而且您无法说服反编译器/反汇编器告诉用户/黑客他无法反编译/反汇编。一开始这将是一个“大谎言”......

# c# - 加载屏幕 WinRT c#

> ID：15199007
> 
> 赞同：0
> 
> 时间：2013-03-04T10:08:49.290
> 
> 标签：c#, windows-8, windows-runtime, loading

我想在应用程序启动前有一个加载屏幕 2 秒。但我不知道该怎么做。我只知道我需要使用进度环。

任何人都知道如何做到这一点？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:16:46.290

创建名为 eg 的单独页面`LoadingPage`并将其设置为您的应用程序的起始页面。在该页面中显示您的进度环并执行您想要/需要执行的任何操作。2 秒后（或工作完成后）导航到应用程序的正常起始页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-18T23:23:04.260

这就是我们所说的 SplashScreen ，您需要创建自己的页面并将此代码添加到您的应用构造函数中：

```
 ExtendedSplashScreenFactory =  (screen) =>
        {
            return new ExtendedSplashScreen(screen);
        }; 
```

# java - 有没有办法使用 Freemind 和 Java 代码自动创建思维导图？

> ID：15199009
> 
> 赞同：0
> 
> 时间：2013-03-04T10:08:55.217
> 
> 标签：java, freemind, mindmap

有没有办法使用 Java 代码和 Freemind 自动创建思维导图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:23:52.130

你可以在 Freemind 中用 Java 编写自定义脚本来创建你的思维导图

[http://freemind.sourceforge.net/wiki/index.php/Example_scripts](http://freemind.sourceforge.net/wiki/index.php/Example_scripts)

# xml - 需要在链接按钮超链接单击时提取部分 XML

> ID：15199012
> 
> 赞同：1
> 
> 时间：2013-03-04T10:08:56.773
> 
> 标签：xml, vb.net, xslt, xpath

我正在`XML`将文件内容显示为表格的行，`xslt`并且我正在成功显示它，但是我需要`XML`根据用户单击的行来提取文件的节点，现在我必须做两件事。

1.  我需要显示`xslt` 与每一行一起使用的链接按钮或超链接按钮，以便当用户单击一行时，我将从 xml 中提取该部分或节点以再次发送进一步工作的请求。
2.  我需要根据单击的行提取`xml`使用部分，`xpath`最重要的是如何将每个超链接或链接按钮与其对应的行或 xml 节点相关联。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:29:12.833

当您处理 XSLT 和 ASP.NET 时，您可以在使用 XSLT 创建 HTML 本身时将 onclick 事件与表行本身相关联。

现在，您在解析 xslt 时有了标记名，因此您可以设置如下函数

```
<tr iD="tablerow1" onclick="SetTagName('XmlTagName)"/> 
```

然后创建在隐藏字段中设置标记名的javascript函数

```
<script type="text/javascript" language="javascript">
function SetTagName(tagname) {
        //Set TagName in Hidden field here 

    }
</script> 
```

现在您在隐藏字段中有标记名。在服务器端使用 GetElementsByTagName 函数来获取部分 xml。您可以使用 LinkBut​​ton 执行相同的操作。

# ruby-on-rails - 没有这样的文件或目录 - H:/ (Errno::ENOENT)

> ID：15199013
> 
> 赞同：1
> 
> 时间：2013-03-04T10:09:04.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个 Rails 项目，我试图将它捆绑在 Windows Server 2013 上。

我已经在我的本地 Windows 7 机器上成功构建和测试了该应用程序，并在另一个成功的 Windows Server 2013 上成功捆绑并运行了一个 rails 服务器。

现在，当捆绑到主服务器时，我得到以下信息：

```
C:\inetpub\wwwroot>bundle
Fetching source index for https://rubygems.org/
C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:54
:in `stat': No such file or directory - H:/ (Errno::ENOENT)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:54:in `initialize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:253:in `new'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:253:in `fetch_all_remote_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:234:in `block in remote_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:231:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:231:in `remote_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:165:in `fetch_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:70:in `specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:176:in `block (2 levels) in index'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:175:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:175:in `block in index'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/index.rb:7:in `build'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:174:in `index'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:168:in `resolve'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:107:in `specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:102:in `resolve_remotely!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/installer.rb:43:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/installer.rb:8:in `install'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/cli.rb:219:in `install'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor/task.rb:22:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor.rb:263:in `dispatch'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor/base.rb:386:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/bin/bundle:13:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/bin/bundle:19:in `load'
        from C:/RailsInstaller/Ruby1.9.3/bin/bundle:19:in `<main>' 
```

尝试此操作时，我也收到类似的错误：

```
C:\inetpub\wwwroot>gem install win32-service
ERROR:  While executing gem ... (Errno::ENOENT)
    No such file or directory - H:/ 
```

我的 RubyGems 环境：

```
C:\inetpub\wwwroot>gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.16
  - RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/RailsInstaller/Ruby1.9.3/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我尝试通过 RailsInstaller 重新安装导轨并重新启动机器。命令提示符也以管理员身份运行。

有人有任何理论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:57:24.760

解决了这个问题 - 服务器没有默认网关，因此无法访问我们的 TMG 服务器。

# android - layout-large-hdpi (Nexus 7) 与 layout-large-hdpi-1280x800 (Samsung 7.7) Android 冲突

> ID：15199021
> 
> 赞同：3
> 
> 时间：2013-03-04T10:09:21.513
> 
> 标签：android, android-layout

我正在为 Nexus 4、Samsung 7.7、Nexus 7、S3 和 Note-2 开发应用程序。我正在为所有这些布局制作一个 apk。除 Nexus 7 和三星 7.7 外，所有设备都运行良好。

我为 Nexus 7 使用 layout-large-hdpi，为三星 7.7 使用 layout-large-hdpi-1280x800。但是当我在 Nexus 7 布局中进行更改时，它也会更改三星 7.7 的布局。

我想将这些布局放在一个 apk 中，但如果我只将 Nexus 7 放在 apk 中，它会显示正确的布局。当我将三星 7.7 布局也放入 apk 时，Nexus 7 布局是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:23:56.970

那是因为 Nexus 7 的尺寸是 1280x800，也是 XHDPI。这就是 Nexus 在两者都存在时更喜欢使用 layout-large-hdpi-1280x800 而不是 layout-large-hdpi 的原因。它为要选择的布局定义了更好的选择（选择）。

# c# - 使用 == 比较两个结构

> ID：15199026
> 
> 赞同：67
> 
> 时间：2013-03-04T10:09:30.217
> 
> 标签：c#, struct, equality

我正在尝试在 C# 中使用等于 (==) 比较两个结构。我的结构如下：

```
public struct CisSettings : IEquatable<CisSettings>
{
    public int Gain { get; private set; }
    public int Offset { get; private set; }
    public int Bright { get; private set; }
    public int Contrast { get; private set; }

    public CisSettings(int gain, int offset, int bright, int contrast) : this()
    {
        Gain = gain;
        Offset = offset;
        Bright = bright;
        Contrast = contrast;
    }

    public bool Equals(CisSettings other)
    {
        return Equals(other, this);
    }

    public override bool Equals(object obj)
    {
        if (obj == null || GetType() != obj.GetType())
        {
            return false;
        }

        var objectToCompareWith = (CisSettings) obj;

        return objectToCompareWith.Bright == Bright && objectToCompareWith.Contrast == Contrast &&
               objectToCompareWith.Gain == Gain && objectToCompareWith.Offset == Offset;

    }

    public override int GetHashCode()
    {
        var calculation = Gain + Offset + Bright + Contrast;
        return calculation.GetHashCode();
    }
} 
```

我试图将 struct 作为我的类中的一个属性，并想检查该结构是否等于我试图分配给它的值，然后再继续这样做，所以我没有指示该属性当它没有改变时已经改变，就像这样：

```
public CisSettings TopCisSettings
{
    get { return _topCisSettings; }
    set
    {
        if (_topCisSettings == value)
        {
            return;
        }
        _topCisSettings = value;
        OnPropertyChanged("TopCisSettings");
    }
} 
```

但是，在我检查是否相等的那一行，我得到了这个错误：

> 运算符“==”不能应用于“CisSettings”和“CisSettings”类型的操作数

我不知道为什么会这样，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-04T10:13:51.820

您需要重载`==`and`!=`运算符。将此添加到您的`struct`：

```
public static bool operator ==(CisSettings c1, CisSettings c2) 
{
    return c1.Equals(c2);
}

public static bool operator !=(CisSettings c1, CisSettings c2) 
{
   return !c1.Equals(c2);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-04T10:14:02.473

当您覆盖该`.Equals()`方法时，`==`运算符*不会*自动重载。你需要明确地这样做。

另请参阅[覆盖 Equals() 和运算符 ==](https://docs.microsoft.com/en-us/previous-versions/ms173147(v=vs.90))或[CA1815 的指南：覆盖值类型上的等于和运算符等于](https://docs.microsoft.com/en-us/dotnet/fundamentals/code-analysis/quality-rules/ca1815)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:14:17.017

您没有[显式实现](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.80%29.aspx)相等[运算符](http://msdn.microsoft.com/en-us/library/53k8ybth%28v=vs.110%29.aspx)，因此`==`没有专门为该类型定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T10:15:11.930

你应该重载你的运营商是这样的：

```
public static bool operator ==(CisSettings a, CisSettings b)
{
    return a.Equals(b);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T10:16:49.263

您需要明确覆盖 operator ==。

```
public static bool operator ==(CisSettings x, CisSettings y) 
{
   return x.Equals(y);
} 
```

顺便说一句，你最好把比较代码放在`public bool Equals(CisSettings other)`，然后让`bool Equals(object obj)`调用`bool Equals(CisSettings other)`，这样你就可以通过避免不必要的类型检查来获得一些性能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T10:20:02.640

您必须重载“==”运算符，还必须重载“！=”运算符。（[看这个注](http://msdn.microsoft.com/fr-fr/library/8edha89s%28v=vs.71%29.aspx)）

对于重载运算符，[请参阅此页面](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-06T10:01:14.760

您还可以使用自 C# v9 以来的 Record 类型和自 C# v10 以来的 [record struct] 值类型，以避免编写大量重复代码而没有任何意义

有关更多详细信息，请参阅此处的 Microsoft 文档：

[等式运算符（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/equality-operators)

> 在 C# 9.0 及更高版本中可用，记录类型支持 == 和 != 运算符，它们默认提供值相等语义。也就是说，当两个记录操作数都为空或所有字段的对应值和自动实现的属性相等时，两个记录操作数相等。

```
public class RecordTypesEquality
{
    public record Point(int X, int Y, string Name);
    public record TaggedNumber(int Number, List<string> Tags);

    public static void Main()
    {
        var p1 = new Point(2, 3, "A");
        var p2 = new Point(1, 3, "B");
        var p3 = new Point(2, 3, "A");

        Console.WriteLine(p1 == p2);  // output: False
        Console.WriteLine(p1 == p3);  // output: True

        var n1 = new TaggedNumber(2, new List<string>() { "A" });
        var n2 = new TaggedNumber(2, new List<string>() { "A" });
        Console.WriteLine(n1 == n2);  // output: False
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-27T13:55:46.013

制作一个方法并将两个stuct obj作为参数一一传递

```
public Save ReturnGreater(Save online,Save local)
{
    Save DataToSave = new Save();
    DataToSave.Score = local.Score < online.Score ? online.Score : local.Score;
    DataToSave.UnlockGuns = local.UnlockGuns < online.UnlockGuns ? online.UnlockGuns : local.UnlockGuns;
    DataToSave.UnlockLevels = local.UnlockLevels < online.UnlockLevels ? online.UnlockLevels : local.UnlockLevels;
    DataToSave.TotalLevels = local.TotalLevels;
    DataToSave.RemoveAds = local.RemoveAds;
    return DataToSave;
} 
```

# android - 如何将 Linphone 集成到现有的 Android 项目中

> ID：15199027
> 
> 赞同：9
> 
> 时间：2013-03-04T10:09:30.657
> 
> 标签：android, linphone

我是 Linphone 的新手，我在将 linphone 集成到我的 android 项目时遇到问题。由于没有足够的关于 Linphone 库及其使用方法的教程。所以我想请求为我提供分步指南，以帮助我将 linphonoe 集成到我的 android 项目中

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-06T13:13:38.137

在对 android linphone 进行了大量研究之后，我发布了两个教程并添加了一个 Excel 表来设置和更改 android linphone 的代码。要设置 android linphone 项目，您需要有 Mac/Linux 系统。以下是链接：-

1.  [Android Linphone 教程-1](http://www.coders-hub.com/2015/04/start-working-on-linphone-android-part-1.html)
2.  [Android Linphone 教程-2](http://www.coders-hub.com/2015/06/android-linphone-source-code-tutorial.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-24T13:54:10.937

从 git 克隆 linphone-android 项目并使用 android NDK R9 构建。在 linux 上构建它，在开始构建之前，确保你拥有 README 文件中提到的所有包。要构建项目，只需键入：

```
# make 
```

编译成功后，使用以下命令生成 linphone SDK：

```
# make linphone-sdk 
```

它将在不同的目录中为不同的架构生成一个包含 linphone.jar 文件和本机 .so 模块的 zip 文件。

在eclipse中新建一个android应用项目，复制新建android项目下libs目录下的linphone.jar等目录，在eclipse中刷新你的项目。它将自动添加 linphone.jar 和其他原生 linux (android) 模块。

你很高兴......在你的 android 活动中导入包使用 API。

# python - 是否在 tornado.web.RequestHandler 中初始化，每次请求时都会被调用/

> ID：15199028
> 
> 赞同：3
> 
> 时间：2013-03-04T10:09:32.017
> 
> 标签：python, tornado

类中有一个`initialize`方法，`tornado.web.RequestHandler`每次有请求时都会调用它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T12:59:34.030

是的，龙卷风要求`initialize`每个请求。

如果您想在请求之间共享状态（如数据库连接） - 将其存储在`self.application`.

# asp.net-mvc - 将列表绑定到 dropdownlistfor

> ID：15199034
> 
> 赞同：0
> 
> 时间：2013-03-04T10:09:50.233
> 
> 标签：asp.net-mvc, drop-down-menu

我想制作两个级联下拉列表。当用户选择下拉列表中的项目时，此操作会触发：

```
 public SelectList myFunc(string item)
    {
        var query = //Query

        var sItems = new SelectList(query);
        ViewBag.StagesList2 = sItems;
        return ViewBag.StagesList2;
    } 
```

这是我的脚本：

```
<script>
    var isChanged = false;
    $(function () {
        $('#stageOne').change(function () {
                $.ajax({
                    url: "/Shop/myFunc/",
                    data: { item: $("#stageOne option:selected").text() },
                    type: 'post',
                    success: function () {
                     document.getElementById("stageTwo").options.add(ViewBag.StagesList2);
                 }
            });

        });
    });
</script> 
```

动作成功触发。但没有添加到我的第二个 dropdownlistfor ：

```
 <div class="drop-down-list">
        <%: Html.DropDownListFor(model => model.StageId, Enumerable.Empty<SelectListItem>(),new { id="stageTwo"})%>
        <%: Html.ValidationMessageFor(model => model.StageId) %>
    </div> 
```

问题是什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:24:06.770

您只能在构建页面时使用 viewbag。一旦浏览器显示页面，就没有更多的 viewbag 了。假设您执行以下操作：

```
ViewBag.MyName = "John Doe"; 
```

当您的页面加载时：

```
<h2>Welcome, <%: ViewBag.MyName %> ! </h2> 
```

浏览器看到的唯一内容是：

```
<h2>Welcome, John Doe ! </h2> 
```

浏览器不知道页面是如何构建的。它不知道 Viewbag，因为这是一个 ASP.NET 功能，它与浏览器无关。

您需要做的是在语句中传递`StagesList2`数据，然后在 ajax 调用的回调中处理该数据。`return``success`

所以你的代码会变成这样：

```
public JsonResult myFunc(string item)
{
    var query = //Query, let's assume this passes a list of items with an ID and a Name field.

    return Json(query, JsonRequestBehavior.AllowGet); //This sends your query result back as a JSON object
} 
```

那么您的 Ajax`success`回调将是：

```
success: function (myJSONdata) {
    //first, clear the current contents
    $("#stageTwo").html("");

    //Now proces the new items piece by piece        
    var items = myJSONdata.items;

    for(var i=0; i < items.length; i++) {
        var item = items[i];
        var optionhtml = '<option value="' + item.ID + '">' + item.Name + '</option>';

        $("#stageTwo").append(optionhtml); //Appends the above option to the selectlist
    }

    //Done!
    alert("Everything is now correctly processed!");
} 
```

您必须检查字段的名称，我只是使用了一些示例，但我希望您对如何处理数据有一个大致的了解:)

随意问它是否不够清楚。

# php - 这个检查 NULL 的 PhP 代码有什么问题

> ID：15199035
> 
> 赞同：-7
> 
> 时间：2013-03-04T10:09:55.837
> 
> 标签：php

```
static $result = NULL;

if  (!isNull($result))
{
    return $result;
} 
```

这是一种延迟加载模式。我将 $result 初始化为 NULL。然后我检查它是否为NULL。如果是，则计算数据。

好吧，程序在那一行崩溃了。isNull($result) 也产生 null，而不是 true 或 false。

有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T10:10:52.890

PHP中没有`isNull`函数，它是`is_null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:12:35.623

php中没有调用函数`isNull`使用`is_null`php函数。

`is_null`—**查找给定变量是否为 NULL**，`TRUE`如果 var 为 null 则返回，`FALSE`否则返回。

```
if(!is_null($var)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:12:55.607

```
 if  (! is_null($result))
 {
     echo  $result;  // no return use echo
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:11:11.483

它`is_null`不是`isNull`

```
static $result = NULL;

if  (!is_null($result))
{
    return $result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T10:12:17.630

这将是

```
static $result = NULL;

if  (!is_null($result))
{
    return $result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T10:12:18.720

尝试

```
static $result = NULL;

if  ($result!==null)
{
    return $result;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T10:14:10.397

**您使用了错误的空函数进行检查，它不是`isNULL`，它是`is_null`**

```
static $result = NULL;

if  (!is_nul($result))
{
    return $result;
} 
```

# c++ - Vector：类模板的参数列表：“std::vector is missing”

> ID：15199036
> 
> 赞同：0
> 
> 时间：2013-03-04T10:09:58.873
> 
> 标签：c++

我正在使用以下指南[http://rodrigo-silveira.com/opengl-tutorial-parsing-obj-file-blender/#.UTRmkvUudqI](http://rodrigo-silveira.com/opengl-tutorial-parsing-obj-file-blender/#.UTRmkvUudqI)

因为我试图在 webgl 中加载一个 obj 文件。在我的 RokkoParse.cpp 文件中，我使用“向量”。但是我的编译器说“std::vector is missing”我试图在网上搜索这个错误，但我找不到任何好的东西。有人可以帮我解决我的问题吗？

RokkoParses.h

```
 #pragma once
#include <vector>
#include <string>
#include <iostream>
#include <string>

using std::string;

class RokkoParser
{
public:

public:
   static void objToTxt(const string aInFilename, 
                        const string aOutFilename, 
                        bool aVerbose = false);
   static std::vector explode(string aStr, char aDelim);
}; 
```

RokkoParser.cpp

```
 #include "StdAfx.h"
#include "RokkoParser.h"
#include <cstdio> // instead of <stdio.h>
// #include <conio.h> -- do not use
#include <cstring> // instead of <string.h>
#include "stdafx.h"
#include <iostream>
#include "stdafx.h"
#include<iostream>
#include<conio.h>
#include <string>
#include <iostream>
#include <vector>
#include <string>
#include <iostream>
#include <string>

using namespace std;

vector RokkoParser::explode(string aStr, char aDelim)
{
  vector res;
  string str = aStr.substr(0, aStr.find(aDelim));

  while(str.size() < aStr.size())
  {
    res.push_back(str);
    aStr = aStr.substr(aStr.find(aDelim) + 1);
    str = aStr.substr(0, aStr.find(aDelim));
  }

  res.push_back(str);

  return res;
} 
```

在这两个文件中，他们都说同样的错误

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T10:12:29.097

`vector`是一个类*模板*。当你声明一个向量时，你必须指定向量的元素应该有什么类型：“*什么*的向量”？

例如：

```
std::vector<int> vi;         // This declares a vector of integers
std::vector<std::string> vs; // This declares a vector of strings
// ... 
```

在您的代码中，您使用`std::vector`没有任何模板参数。这就是编译器抱怨的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:12:30.017

我很确定您没有给我们完整的错误消息，它实际上说“std::vector 缺少类型参数”或类似的东西。

这样做的原因是这`vector`是一个类模板，你必须告诉它你希望它持有什么样的对象，例如`vector<int>`或`vector<string>`。

# c# - 为什么不收集辅助线程中使用的对象

> ID：15199048
> 
> 赞同：3
> 
> 时间：2013-03-04T10:10:28.610
> 
> 标签：c#, multithreading, xamarin.ios, garbage-collection, destructor

我有这样的课：

```
public class SecondaryThreadClass
{
    private string str;

    public SecondaryThreadClass ()
    {
    }

    ~SecondaryThreadClass(){
        Console.WriteLine("Secondary class's instance was destroyed");
    }

    public void DoJobAsync(){
        new Thread(() => {
//      this.str = "Hello world";
//      Console.WriteLine(this.str);

            Console.WriteLine("Hello world");
        }).Start();
    }
} 
```

当我取消注释这两行并注释 Console.WriteLine("Hello world"); 相反，我的析构函数永远不会被调用。因此，如果我在辅助线程方法中使用“this”，我的对象似乎不会被收集。调用者的代码在这里：

```
 public override void ViewDidLoad ()
    {
        SecondaryThreadClass instance = new SecondaryThreadClass();
        instance.DoJobAsync();

        base.ViewDidLoad ();
    } 
```

如何让 GC 收集这些对象？如果重要的话，我正在使用 MonoTouch。

编辑：

```
 public void DoJobAsync(){
        new Thread(() => {
            this.str = "Hello world";
            Console.WriteLine(this.str);

    //      Console.WriteLine("Hello world");
            new Thread(() => {
                Thread.Sleep(2000);
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }).Start();
        }).Start();
    } 
```

这也无济于事（需要超时以确保在调用 GC.Collect() 之前完成第一个线程）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:29:26.040

以下程序在我的系统上按预期工作（不是 MONO）。

当你尝试它时会发生什么？如果它不起作用，那么它在您正在使用的 Mono 的实现中看起来有些奇怪 - 这不是一个答案，但至少您知道它*应该*起作用......

```
using System;
using System.Threading;

namespace Demo
{
    class Program
    {
        private static void Main(string[] args)
        {
            SecondaryThreadClass instance = new SecondaryThreadClass();
            instance.DoJobAsync();

            Console.WriteLine("Press a key to GC.Collect()");
            Console.ReadKey();

            instance = null;
            GC.Collect();

            Console.WriteLine("Press a key to exit.");
            Console.ReadKey();
        }
    }

    public class SecondaryThreadClass
    {
        private string str;

        public SecondaryThreadClass()
        {
        }

        ~SecondaryThreadClass()
        {
            Console.WriteLine("Secondary class's instance was destroyed");
        }

        public void DoJobAsync()
        {
            new Thread(() =>
            {
                this.str = "Hello world";
                Console.WriteLine(this.str);
            }).Start();
        }
    }
} 
```

您希望 GC 何时运行？您不希望它在`base.ViewDidLoad()`返回之前运行是吗？

# python - 进度条和 gevent

> ID：15199056
> 
> 赞同：0
> 
> 时间：2013-03-04T10:10:43.183
> 
> 标签：python, gevent

在使用 gevent(1.0b4) 下载 html 文件时，我想使用进度条来显示进度。
我在下面写了代码，但是代码总是存在一些错误。我希望有人能帮帮忙！

```
file_path='temp'
url_count=len(urls)

def progress_bar(file_path, file_count): #
    file_count = long(file_count)
    width = 32
    last_count = 0
    try:
        while True:
            if os.path.isdir(file_path): 
                current_count = len(glob.glob1(myPath,"*.html"))
                percentage = current_count*100/file_count
                current_width = width*percentage/100
                sys.stderr.write('% 3d%% [%s%s] %s/s \r' % (percentage, '#'*current_width, ' '*(width-current_width), current_count - last_count))
                last_count = current_count
            time.sleep(1)    
    except:
        sys.stderr.write('100%% [%s]\n' % ('#'*width))

def print_head(url):     
    data = urllib2.urlopen(url)
    htmlFile = open(file_path+'/'+url+'.html', 'w')
    htmlFile.write(data.read())
    htmlFile.close()    
    raise Exception("done!")     

jobs = [gevent.spawn(print_head, url) for url in urls]
x = [g.link_exception(progress_bar,file_path,url_count) for g in jobs] 
gevent.joinall(jobs) 
```

**追溯**

```
 Traceback (most recent call last):
      File "E:\tt\test.py", line 39, in <module>
        x = [g.link_exception(progress_bar,file_path,url_count) for g in jobs] #
    TypeError: link_exception() takes at most 3 arguments (4 given) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:37:35.183

答案就在你的问题中！

```
link_exception() takes at most 3 arguments (4 given) 
```

如果你看一下这个方法的定义，你会看到：

```
def link_exception(self, callback, SpawnedLink=FailureSpawnedLink):
        """Like :meth:`link` but *callback* is only notified when the greenlet dies because of unhandled exception"""
        self.link(callback, SpawnedLink=SpawnedLink) 
```

所以你不能传递超过 2 个参数。

更新：如果我理解你的话，那么你可以使用这样的东西：

```
 file_path = os.path.abspath(os.path.dirname(__file__))
    url_count = len(urls)

    def progress_bar(green):
        width = 32
        current_count = getattr(progress_bar, 'current_count', 0) + 1
        percentage = current_count * 100 / url_count
        current_width = width * percentage/100
        print('% 3d%% [%s%s] %s/s \r' % (percentage, '#' * current_width, ' ' * (width - current_width), current_count))
        setattr(progress_bar, 'current_count', current_count)

        url, exc = green.value
        if exc:
            print 'Download {} failed with error {}'.format(url, exc)
        else:
            print 'Download {} success'.format(url)

    def print_head(url):
        exc = None
        try:
            data = urllib2.urlopen(url)
            htmlFile = open(''.join([file_path, '/', clearFileName(url), '.html']), 'wb+')
            htmlFile.write(data.read())
            htmlFile.close()
        except Exception, ex:
            exc = ex
        return url,exc

    def clearFileName(url):
        return url.replace('/', '_').replace(':', '_').replace('.', '_').replace('#', '_').replace('=', '_')

    jobs = [gevent.spawn(print_head, url) for url in urls]
    [g.link(progress_bar) for g in jobs]
    gevent.joinall(jobs) 
```

# paypal - PayPal预批，执行前验证付款

> ID：15199057
> 
> 赞同：2
> 
> 时间：2013-03-04T10:10:45.207
> 
> 标签：paypal, paypal-adaptive-payments

在我的应用程序中，我要求用户预先批准，然后我使用此预先批准密钥创建并执行付款。有没有什么办法可以知道预批的付款是否可以在执行付款之前执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:41:45.750

目前没有。这类似于向消费者提供免费试用。您可能会同意在某些日期向他们收费，但不能保证可以收取他们的资金来源。以下是您可以用来提高批准率的几个选项。

通常，我看到收到高拒绝率的商家开始立即提供低于 1.00 美元的第一笔付款，这验证了资金来源。这大大提高了他们的批准率，但请记住，这并不是未来付款的保证。

除此之外，唯一的其他选择是执行 GetVerifiedStatus API 调用（需要批准使用），它会告知 PayPal 帐户是否已完成实现 PayPal 验证的步骤。如果收到经过验证的回复，您就知道他们已将资金来源添加到他们的 PayPal 账户。然而，这也不能保证资金来源在尝试时会获得批准。

# symfony - yaml 中的 FSCHateoasBundle 配置

> ID：15199061
> 
> 赞同：0
> 
> 时间：2013-03-04T10:10:57.667
> 
> 标签：symfony, hateoas, jmsserializerbundle, fschateoasbundle

我正在尝试使用 FSCHateoasBundle 将链接添加到我的 API 输出。

文档提到了使用注释或 yaml 配置关系的可能性，但我无法弄清楚 yaml 配置的放置位置以及它的结构。作为记录的注释工作正常。有人举个例子吗？

我尝试做的是在 JMSSerializer 使用的配置文件中添加一个“关系”部分。我必须为 FSCHateoasBundle 使用单独的配置文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:52:43.310

FSCHateoasBundle yaml 配置必须在 JMSSerializerBundle 之外的另一个文件中完成。

要`Acme\FooBundle\Entity\User`使用 JMSSerializerBundle 向您添加元数据，您需要在`src/Acme/FooBundle/Resources/config/serializer/Entity.User.yml`.

使用 FSCHateoasBundle，文件将是`src/Acme/FooBundle/Resources/config/hateoas/Entity.User.yml`.

我将在自述文件中添加注释；-)

# testcomplete - Testcomplete 的文档生成器

> ID：15199062
> 
> 赞同：2
> 
> 时间：2013-03-04T10:11:05.057
> 
> 标签：testcomplete

为 Testcomplete 使用/选择文档生成工具的最佳实践是什么？例如 JSDoc、Natural Docs、YUIDoc 等。

有没有最适合TC的？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T01:51:15.167

我正在使用 Grunt 的 JSDoc 插件（[https://www.npmjs.org/package/grunt-jsdoc](https://www.npmjs.org/package/grunt-jsdoc)），效果很好。JSDoc 插件随 docstrap 一起提供。这意味着您可以使用此处显示的所有 Docstrap 模板 ( [http://terryweiss.github.io/docsstrap/themes/united/](http://terryweiss.github.io/docstrap/themes/united/) )，而不是 JSDoc 附带的普通默认模板。Docstrap 模板还为您的文档添加了搜索功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T07:29:31.767

我使用 JSDoc，它非常适合 TestComplete 脚本。没有尝试过其他的，但我不需要任何东西，JSDoc 也没有提供。

# javascript - AngularJS - 指令不起作用

> ID：15199067
> 
> 赞同：17
> 
> 时间：2013-03-04T10:11:24.307
> 
> 标签：javascript, angularjs, angularjs-directive

我是 AngularJS 新手。我正在尝试使用 AngularJS 指令的模板显示图像，并在单击图像时希望在图像上放置一个标记。我不知道为什么它不起作用。

第一个指令：

```
directive('hello', function() {
    return {
        template: '<img id="map" src="http://www.lonelyplanet.com/maps/asia/india/map_of_india.jpg"  />',
        link: function(scope, element, attrs) {
            $('#map').click(
                function(e) {  
                    $('#marker').css('left', e.pageX).css('top', e.pageY).show();
                }
            );
         },
     };
}); 
```

html代码

```
 <hello>
    <img id="marker" src="http://maps.google.com/mapfiles/ms/micons/blue.png" style="display: none; position: absolute;" />   
 </hello> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-01-13T21:25:27.053

其他一些可能的问题：

*   未加载包含您的指令的 Javascript 文件。如果您使用 Yeoman 生成指令并且您的 index.html 文件未修改，则可能会发生这种情况。
*   您在 HTML 中使用*camelCase*元素名称而不是*hyphenated*。如果你的指令被调用`widgetForm`并且`restrict`是`'E'`或`'A'`，你应该使用`<widget-form/>`，而不是`<widgetForm/>`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-04T10:16:35.573

您缺少该`restrict : 'E'`选项，默认情况下`restrict`具有`AC`属性和类的值，在您的情况下，您将指令用作元素。

更新：基于评论

```
angular.module('test', []).directive('hello', function() {
    return {
        restrict : 'E',
        template : '<div style="position: relative"><img id="map" src="http://www.lonelyplanet.com/maps/asia/india/map_of_india.jpg"  /><img id="marker" src="http://maps.google.com/mapfiles/ms/micons/blue.png" style="display: none; position: absolute;" /></div>',
        replace: true,
        link : function(scope, element, attrs) {
            $('#map').click(function(e) {
                        $('#marker').css('left', e.pageX).css('top', e.pageY)
                                .show();
                    });
        }
    };
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/6XneN/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:40:47.620

默认情况下，当您在 angularjs 中创建指令时。如果您忽略限制属性 angularjs 将其视为属性。正如您的 html 显示的那样，您应该将返回的对象编写如下

```
 <body ng-app="myApp">
    <hello>
      <div id="marker"></div>
    </hello>
  </body> 
```

并且在角度中，即使您不添加 jquery，该元素已经是一个 jQuery 对象，它将使用自己的实现调用 jQLite。所以你应该只使用

```
var app = angular.module('myApp', []);

app.directive('hello',function(){
  var linkFn = function (scope,element,attrs){
      element.bind('click',function(e){
        $('#marker').css('left', e.pageX).css('top', e.pageY).show();
      });
  };
  return {
    restrict : "E",
    link: linkFn,
    transclude:true,
    template:'<div ng-transclude><img id="map" src="http://www.lonelyplanet.com/maps/asia/india/map_of_india.jpg"  /></div>'
  };

}); 
```

我希望它有助于[工作示例](http://plnkr.co/edit/pkycXWamwlFJ2BbVvAs7)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T10:23:23.990

@Arun 说的是正确的。但这不是强制性的。默认情况下，你的指令将是属性。

所以不要使用 ur 指令作为元素

```
<hello>
    <img id="marker" src="http://maps.google.com/mapfiles/ms/micons/blue.png"style="display: none; position: absolute;" />    
</hello> 
```

试试它作为一个属性，像这样

```
<img id="marker" src="http://maps.google.com/mapfiles/ms/micons/blue.png" style="display: none; position: absolute;" hello /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-02T17:37:00.540

不要将“指令”附加到第一个字符串参数：

```
.directive("someDirective", someDirective) 
```

对我来说应该是这样的：

```
.directive("some", someDirective) 
```

至少，如果你想使用它应该是：

```
<some>stuff</some> 
```

查找复制粘贴错误非常糟糕。太需要找一个了... :'(

# ios - iOS 输入集中在固定父级内停止固定元素的位置更新

> ID：15199072
> 
> 赞同：37
> 
> 时间：2013-03-04T10:11:34.713
> 
> 标签：ios, css, input, focus, fixed

**在Mobile Safari iOS 6.1.2**上会发生以下情况

 ****重现步骤**

创建一个`position: fixed`元素，其中包含一个`<input type="text">`元素。

**实际结果**

1.  **输入 - 不集中**

    当输入没有聚焦时，固定元素的位置是正确的。

    ![](../Images/6a2bc99a66d458669f0cbbc49222a495.png)

2.  **以输入为中心**

    当输入聚焦时，浏览器进入一种特殊模式，在这种模式下它不再更新固定元素的位置（任何固定定位的元素，而不仅仅是输入的父元素）并向下移动整个视口以使输入的父元素位于屏幕中央。

    查看现场演示：http: [//jsbin.com/oqamad/1/](http://jsbin.com/oqamad/1/)

    ![](../Images/8544fa77753d8a4936f8e72773afd1da.png) ![](../Images/e556b75ea867097163fd571049dbb61c.png)

**预期结果**

固定元素的位置始终受到尊重。

**修复或解决方法？**

有关如何强制 Safari 正确显示固定元素的任何线索都会有所帮助。

我更喜欢不涉及使用`position: absolute`和设置`onscroll`事件处理程序的解决方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-25T23:48:45.413

在 iPad 和 iPhone 上，这是 Safari 上的一个众所周知的错误。

一种解决方法是将位置更改为绝对设置为固定位置的所有元素。

如果您使用的是 Modernizr，您还可以通过以下方式定位移动设备：

* * *

**jQuery代码**

* * *

```
$(document).ready(function() {

  if (Modernizr.touch) {

      $(document)

        .on('focus', 'input', function(e) {
            $('body').addClass('fixfixed');
        })

        .on('blur', 'input', function(e) {
            $('body').removeClass('fixfixed');
        });

      }

}); 
```

* * *

**CSS**

* * *

例如，如果我只想针对设置为固定位置的页眉和页脚，当将“fixfixed”类添加到正文时，我可以将位置更改为所有具有固定位置的元素的绝对位置。

```
.fixfixed header, .fixfixed footer {
  position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T03:25:03.390

Position:Fixed 有很多众所周知的bug，你可以在这里查看它们：[Remysharp 文章](http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/)。可能您仍然可以使用以下问题的答案修复其中一些问题：[CSS“位置：固定；” 进入 iPad/iPhone？](https://stackoverflow.com/questions/4889601/css-position-fixed-into-ipad-iphone)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T23:58:17.573

是的，这是从 v5 开始的 iOS Safari 问题。如果您在 iOS 上使用 Chrome，您会发现它可以正常工作。我用来解决这个问题的方法是创建一个样式元素并将其添加到正文中，然后将其删除，然后对元素执行焦点。

不要问我为什么会这样，只是太多小时的反复试验！

我还注意到，在第一次修复后，您不必为后续的固定定位元素执行样式技巧**

# vba - 如何使用 VBA 在 Word 中显示图表对话框供某人选择？

> ID：15199074
> 
> 赞同：0
> 
> 时间：2013-03-04T10:11:39.170
> 
> 标签：vba, charts, ms-word

我在 Word 2007 中构建了一个自定义选项卡，在 Word 中为特定音高模板使用 CustomUI 编辑器，并且需要设置一些按钮来为用户执行自定义操作。全部完成，除了一个。

客户问我是否可以添加图表按钮，但直接显示图表的模板列表，因为这些是他们应该使用的。我已经查看了 Microsoft 网站上的“显示对话框”列表，但似乎没有什么可以做到这一点。我什至似乎无法显示主要图表列表，这将是一些事情。记录动作只存储特定图表 ID 和所选图表的插入，这不是我真正想要的。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T21:45:50.230

这个问题与我最近发布的问题非常相似，并且我发现了一种对您也有用的解决方法。

在 office 2007 中，可以通过按 调用该对话框`ALT+B+C`，因此宏可以复制该行为：

```
ThisDocument.Application.Activate
VBA.SendKeys "%bc", True 
```

也许这不是最好的方法，但功能区层次结构对我来说太复杂了。

# audio - 如何使用 Erlang 播放 AIFF 声音文件？

> ID：15199075
> 
> 赞同：2
> 
> 时间：2013-03-04T10:11:40.060
> 
> 标签：audio, erlang, playback, aiff

我正在尝试寻找一种使用 Erlang 播放 AIFF 文件的方法。

我找到了这个[教程](http://prog21.dadgum.com/92.html)，但它似乎只是关于读取文件的内容而不是实际播放它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T01:09:40.170

我建议使用带有“os:cmd”或“ports”的linux命令“play”。它是非常临时的，但它不是一个非常罕见的命令，它可能会起作用。

# android - android应用程序中离线模式下的谷歌地图？

> ID：15199078
> 
> 赞同：2
> 
> 时间：2013-03-04T10:11:49.983
> 
> 标签：android, google-maps, android-maps

我有人指导我在离线模式下显示谷歌地图，并在离线模式下获取特定位置的经度和纬度。请提供一些教程或提供一些指导。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:54:27.113

我不确定在离线模式下访问地图。Afaik 这是不可能的，但有人可能有这样的选择。

然而，我可以告诉你，获得 longlat 不需要网络连接或谷歌，只需要 javascript 和相关单元上的某种形式的地理定位设备。

```
if (navigator.geolocation !== undefined) {
    navigator.geolocation.getCurrentPosition(function (position) {
        latitude = position.coords.latitude;
        longitude = position.coords.longitude;
    }
} 
```

这不是一个万无一失的解决方案，因为某些设备（例如 Kindle Fire）没有任何类型的地理定位设备，并且仍然使用令人讨厌的代码。

# asp.net - 用 xml 文件渲染 asp.net 图表

> ID：15199079
> 
> 赞同：0
> 
> 时间：2013-03-04T10:11:52.653
> 
> 标签：asp.net, charts, asp.net-charts

我正在开发需要使用 jquery + ajax 请求呈现图表的应用程序。为此，我确实工作并获得了成功，我保存图表图像，然后返回路径并显示在图像源上。但问题是鼠标悬停和鼠标移出等图表的动态功能不适用于数据点。当然，它是一个图像。

但是现在客户想要那个功能，我被卡住了。为此，我研究了 jquery + ajax 和图表控件，但没有取得任何成功。

因此，为此我找到了一种保存图表控件 im XML 文件 (Chart.SaveXML) 的方法。我得到的是，它用所有图表数据点编写了 asp.net 图表的整个 aspx 语法。

但现在我想要通过这个 xml 文件加载图表但它没有渲染图表。

请帮助我，如果有人有什么建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:22:33.300

这就是我会尝试的。

将图表写入 XML 或从 XML 读取时，您需要将 XML 图表数据“转换”为 ASP.NET 图表数据。

例如：当您调用“Chart.SaveXML”时，它将像这样保存：

```
<Chart Width="1100" Height="1000">
<Series>
    <Series Name="2011/12" YValuesPerPoint="2" ChartType="Bubble" ChartArea="ChartArea1" Color="68, 68, 68" BorderWidth="5" MarkerStyle="Circle" MarkerBorderColor="68, 68, 68">
        <Points>
            <DataPoint XValue="2.5496218995765276" YValues="0.586933333333333,0"/>
        </Points>
    </Series>
    <Series Name="2010/11" YValuesPerPoint="2" ChartType="Bubble" ChartArea="ChartArea1" Color="98, 98, 98" BorderWidth="5" MarkerStyle="Circle" MarkerBorderColor="98, 98, 98">
        <Points>
            <DataPoint XValue="1" YValues="0.756816666666667,0"/>
        </Points>
</Series> 
```

您需要这样做并将其修改为：

```
<asp:Chart runat="server" Width="1100" Height="1000">
<Series>
    <asp:Series Name="2011/12" YValuesPerPoint="2" ChartType="Bubble" ChartArea="ChartArea1" Color="68, 68, 68" BorderWidth="5" MarkerStyle="Circle" MarkerBorderColor="68, 68, 68">
        <Points>
            <asp:DataPoint XValue="2.5496218995765276" YValues="0.586933333333333,0" />
        </Points>
    </asp:Series>
    <asp:Series Name="2010/11" YValuesPerPoint="2" ChartType="Bubble" ChartArea="ChartArea1" Color="98, 98, 98" BorderWidth="5" MarkerStyle="Circle" MarkerBorderColor="98, 98, 98">
        <Points>
            <asp:DataPoint XValue="1" YValues="0.756816666666667,0" />
        </Points>
    </asp:Series> 
```

您可以通过以下步骤来做到这一点：

```
myXmlData = myXmlData.Replace("<DataPoint", "<asp:DataPoint"); 
```

但请注意“<Series>”标签：集合（第一个）不是“asp:”标签，而其他标签是。

这会将 XML 转换为有效的 ASP.NET 标记，然后您可以以某种方式将其嵌入到页面中。

# java - 无法使用 Websphere Application Server 提供大数据

> ID：15199086
> 
> 赞同：3
> 
> 时间：2013-03-04T10:11:59.273
> 
> 标签：java, servlets, websphere-7

我编写了最简单的 Servlet，用于向客户端提供数据流（在测试用例中，它是一个 14GB 的文本文件）：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    resp.setContentType("application/octet-stream");
    resp.setContentLength(-1);
    InputStream is = null;
    try {
        OutputStream os = resp.getOutputStream();
        int unitsTransferred = -1;
        byte[] buf = new byte[65536];
        is = new FileInputStream("D:/largetext2.txt");
        while ((unitsTransferred = is.read(buf)) != -1) {
            os.write(buf, 0, unitsTransferred);
            //os.flush();
        }
    } catch (Throwable e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        try {
            resp.getOutputStream().close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

因此，您只需发出一个简单的 get 请求。`URLConnection`我尝试使用Chrome 浏览器从 java 客户端向这个 servlet 发出 GET 请求。两种情况都设法从 1 MB 到 90 MB 随机下载，然后下载停止，而即使在客户端停止后，`java.exe`WAS 服务器进程的私有字节继续上升（从 300 MB 到 950 MB）然后服务器吐出以下堆栈跟踪：

```
com.ibm.wsspi.webcontainer.ClosedConnectionException: OutputStream encountered error during write
at  com.ibm.ws.webcontainer.channel.WCCByteBufferOutputStream.write(WCCByteBufferOutputStream.java:106)
at com.ibm.ws.webcontainer.srt.SRTOutputStream.write(SRTOutputStream.java:97)
at com.ibm.wsspi.webcontainer.util.BufferedServletOutputStream.writeOut(BufferedServletOutputStream.java:569)
at com.ibm.wsspi.webcontainer.util.BufferedServletOutputStream.write(BufferedServletOutputStream.java:374)
at si.test.kryo.MyServlet.doGet(MyServlet.java:60)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1663)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

Caused by: java.io.IOException: Async IO operation failed (2), reason: RC: 64 指定的网络名不再可用。

```
at com.ibm.io.async.AsyncLibrary$IOExceptionCache.<init>(AsyncLibrary.java:891)
at com.ibm.io.async.AsyncLibrary$IOExceptionCache.get(AsyncLibrary.java:904)
at com.ibm.io.async.AsyncLibrary.getIOException(AsyncLibrary.java:918)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:213)
... 3 more 
```

Java 客户端只是在读取调用中被阻止，而 Chrome 保持下载活动，没有注意到服务器中止整个事情的事实。因此，要么发生了一些奇怪的超时，要么 IBM servlet 容器出现了问题。

有人可以帮我弄这个吗？

# json - Node.JS JSON.parse 错误未定义

> ID：15199087
> 
> 赞同：7
> 
> 时间：2013-03-04T10:11:59.750
> 
> 标签：json, node.js, parsing

我试图解析节点中的 json 文件，但总是出现错误，我用谷歌搜索但无法解决。你能帮助我吗？

```
undefined:1
undefined
^
SyntaxError: Unexpected token u
at Object.parse (native)
at Object.<anonymous> (app.js:13:19)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

这是我的代码

```
var app = express();
var mongodb = require("mongoskin");
var fs = require('fs');

var content;
fs.readFile('./config/db.json', function read(err, data) {
    if (err) {
        throw err;
    }
    content = data;
});
var config = JSON.parse(content);

app.get('/', function(req, res){
    res.send(config.left);
});

app.listen(process.env.VCAP_APP_PORT || 3000); 
```

db.json 就是这个。如您所见，没有错误。

```
{
  "left": 3
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T10:16:44.177

`readFile`是*异步*的，因此`JSON.parse`在您为 赋值之前调用您的行`content`，因此`content`其默认值为`undefined`.

你有两个选择：

1.  将使用数据的逻辑移动*到*回调中。

    ```
    var app = express();
    var mongodb = require("mongoskin");
    var fs = require('fs');

    fs.readFile('./config/db.json', function read(err, data) {
        if (err) {
            throw err;
        }

        var config = JSON.parse(data); // <=== Note I'm using `data`, not `content`; we don't need a `content` variable anymore

        app.get('/', function(req, res){
            res.send(config.left);
        });

        app.listen(process.env.VCAP_APP_PORT || 3000);
    }); 
    ```

2.  使用`readFile`( `readFileSync`) 的同步版本。

    ```
    // ...
    content = fs.readFileSync('./config/db.json');

    var config = JSON.parse(content);
    // ... 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:18:20.877

`content`等于`undefined`当您尝试解析它时。`readFile`您应该在回调中解析您的 JSON 数据，或者`readFileSync`改用它。

此外，您可能不应该从回调中抛出。

这使我认为您对 node.js 的工作方式有一些误解，我强烈建议您阅读[本文](http://www.nodebeginner.org/)

# java - 进度条 Java

> ID：15199091
> 
> 赞同：3
> 
> 时间：2013-03-04T10:12:10.187
> 
> 标签：java, swing, jtable, jprogressbar, tablecelleditor

我正在使用 JProgressBar 来显示进度。但是，如何将进度条显示为从 0 加载到 100？我从互联网上得到了代码，它的工作除了没有加载进度条。

代码

```
progressFrame = new JFrame(); // frame to display progress bar
progressBar = new JProgressBar(0,100);
progressBar.setValue(0);
progressBar.setStringPainted(true);
progressFrame.add(progressBar);

new SwingWorker<Void,Void>()
    {
        protected Void doInBackground() throws SQLException, ClassNotFoundException
        {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            progressBar.setValue(0);
            frame.setEnabled(false); // frame = main frame

            //tableclass creates a JTable with data from database
            tableclass = new TheDatabaseTable(deptName);//it takes time to create
            progressBar.setValue(50);
            frame.getContentPane().removeAll();
            frame.setContentPane(tableclass);

            frame.validate();
            frame.repaint();

            progressBar.setValue(100);
            //progressFrame.dispose();
            return null;
        }; 
        protected void done()
        {
            //progressFrame.setVisible(false);
            frame.setVisible(true);
            progressFrame.dispose();
            frame.setEnabled(true);
        }

    }.execute(); 
```

如果有人编辑上述代码以使其工作，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T10:19:03.047

必须喜欢来自互联网的代码......哦......

您的代码违反了 Swing 的单线程规则，因此是一个不好的例子。

您有多种选择`SwingWorker`。您可以`publish`使用进度并使用该`process`方法来更新进度条，或者您可以使用`PropertyChangeListener`并监视通过调用该`setProgress`方法创建的进度更改事件`SwingWorker`

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.EmptyBorder;

public class SwingWorkerProgress {

    public static void main(String[] args) {
        new SwingWorkerProgress();
    }

    public SwingWorkerProgress() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JProgressBar pbProgress;
        private JButton start;

        public TestPane() {

            setBorder(new EmptyBorder(10, 10, 10, 10));
            pbProgress = new JProgressBar();
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(4, 4, 4, 4);
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(pbProgress, gbc);

            start = new JButton("Start");
            gbc.gridy++;
            add(start, gbc);

            start.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    start.setEnabled(false);
                    ProgressWorker pw = new ProgressWorker();
                    pw.addPropertyChangeListener(new PropertyChangeListener() {

                        @Override
                        public void propertyChange(PropertyChangeEvent evt) {
                            String name = evt.getPropertyName();
                            if (name.equals("progress")) {
                                int progress = (int) evt.getNewValue();
                                pbProgress.setValue(progress);
                                repaint();
                            } else if (name.equals("state")) {
                                SwingWorker.StateValue state = (SwingWorker.StateValue) evt.getNewValue();
                                switch (state) {
                                    case DONE:
                                        start.setEnabled(true);
                                        break;
                                }
                            }
                        }

                    });
                    pw.execute();
                }
            });

        }
    }

    public class ProgressWorker extends SwingWorker<Object, Object> {

        @Override
        protected Object doInBackground() throws Exception {
            int i = 0;
            int max = 2000;

            while (i < max) {
                i += 10;
                int progress = Math.round(((float)i / (float)max) * 100f);
                setProgress(progress);
                try {
                    Thread.sleep(25);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T10:20:35.577

你必须为此使用线程。设计一个实现`Runnable`接口的类，它将像这样更新值。

```
class ProgressBarUpdator implements java.lang.Runnable {

    /**
     * Progress bar that shows the current status
     */
    private javax.swing.JProgressBar jpb = null;
    /**
     * Progress bar value
     */
    private java.lang.Integer value = null;

    /**
     * Constructor
     * @param jpb The progress bar this has to update
     */
    public ProgressBarUpdator(javax.swing.JProgressBar jpb) {
        this.jpb = jpb;
        jpb.setMaximum(100);
    }

    /**
     * Sets the value to the progress bar
     * @param value Value to set
     */
    public void setValue(java.lang.Integer value) {
        this.value = value;
    }

    /**
     * Action of the thread will be executed here. The value of the progress bar will be set here.
     */
    public void run() {
        do {
            if (value != null) {
                jpb.setValue((int)java.lang.Math.round(java.lang.Math.floor(value.intValue() * 100 / maximum)));
            }
            try {
                java.lang.Thread.sleep(100L);
            } catch (java.lang.InterruptedException ex) {
                ex.printStackTrace();
            }
        } while (value == null || value.intValue() < jpb.getMaximum());
    }
} 
```

并在您的框架类中`progressBar`与这样的新类一起使用

```
ProgressBarUpdator ju = new ProgressBarUpdator(progressBar);
new java.lang.Thread(ju).start(); 
```

每当您想更改值时，只需使用该语句

```
ju.setValue([Value to set]); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-01T20:56:09.940

```
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JProgressBar;

public class ProgressBar {
    /**
     * JProgressBar
     * 
     * @throws InterruptedException
     */
    public static void main(String[] args) throws InterruptedException {
        JFrame frame = new JFrame("New Window");
        frame.setSize(600, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setLayout(new GridBagLayout());
        frame.setVisible(true);

        //JLabel textLoad = new JLabel();
        //textLoad.setText("Loading ....");

        JProgressBar progressBar = new JProgressBar();        
        progressBar.setMinimum(0);
        progressBar.setMaximum(100);
        progressBar.setStringPainted(true);
        progressBar.setIndeterminate(true);
        frame.add(progressBar);                               

        for (int i = progressBar.getMinimum(); i <= progressBar.getMaximum(); i++) {
            Thread.sleep(500);
            progressBar.setValue(i);
        }

        textLoad.setText("Done !");
    }

} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-08-05T08:56:44.800

```
/*
By
Dr. Amit Kumar Kapoor
Assistant Professor, Maharaja Agrasen Institute of Management & Technology, Jagadhri
E-mail ID: akbrightfuture@gmail.com
*/
    import java.awt.*;
    import javax.swing.*;
    import java.awt.event.*;
    class progressbardemo extends JFrame implements ActionListener
       {
          JProgressBar pb;
          JButton b1;
              progressbardemo()
              {
                 super("Progressbar");
                 setLayout(null);
                 b1=new JButton("Click");
                 b1.setBackground(Color.yellow);             
                 pb=new JProgressBar(1,100);
                 pb.setValue(0);
                 pb.setStringPainted(true);
                 pb.setForeground(Color.red);   
                 pb.setBackground(Color.white); 
                 b1.setBounds(20,20,80,25);pb.setBounds(110,20,200,25);
                 pb.setVisible(false);
                 add(b1);
                 add(pb);             
                 b1.addActionListener(this);
                 setResizable(false);
                 setDefaultCloseOperation(EXIT_ON_CLOSE);
              }
               public void actionPerformed(ActionEvent e)
               {
                  int i=0;
                  if(e.getSource()==b1)
                     {
                       pb.setVisible(true);
                    try
                    {
                       while(i<=100)
                       {
                        Thread.sleep(50);
        pb.paintImmediately(0, 0, 200, 25);
            pb.setValue(i);
                         i++;
        }
                     }
                     catch(Exception e1)
                     {
        System.out.print("Caughted exception is ="+e1);
                     }
                    }
               }
              public static void main(String arg[])
              {
              progressbardemo m=new progressbardemo();
              m.setSize(330,100);
              m.setVisible(true);
              Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
              int x = (int) ((dimension.getWidth() - m.getWidth()) / 2);
              int y = (int) ((dimension.getHeight() - m.getHeight()) / 2);
              m.setLocation(x, y); 
              }
       } 
```

# javascript - 配置 grunt 复制任务以排除文件/文件夹

> ID：15199092
> 
> 赞同：39
> 
> 时间：2013-03-04T10:12:11.217
> 
> 标签：javascript, copy, gruntjs

我已经安装了 grunt 任务`grunt-contrib-copy`。我将它嵌入我的`Gruntfile.js`并通过加载任务`grunt.loadNpmTasks('grunt-contrib-copy');`。

目前我使用以下配置来创建一个包含我的 js 文件/文件夹子集的文件夹。

```
copy: {
            options: {
                processContent: [],
                processContentExclude: ['build/**', 'bin/**', '.*', '*.orig', '*.bak', '.*/**', '*.log', 'dist/**', 'test/**', 'dev/**', 'pyserver/**', 'node_modules/**', 'doc/**']
            },
            du: {
                files: [ 
                    {src: ['.conf1', '.conf2', './config.js'], dest: 'output/toolkit/', filter: 'isFile'},
                    {src: ['./css/**/*', './img/**/*', './js/**/*', './release/**/*', './lib/**/*', './locale/**/*'], dest: 'output/toolkit/'},
                    {expand: true, cwd: './', src: ['**'], dest: 'output/'}
                ]
            }
        } 
```

这工作正常，但每次我运行 grunt copy 它都会退出并显示以下错误消息：

```
Copying Gruntfile.js -> output/Gruntfile.js
Warning: Error while processing "Gruntfile.js" file. Use --force to continue. 
```

`Gruntfile.js`我想`*.less`排除`js/**/*`. 尝试过`!(.less), !.less, !(*.less), !(./Grunfile.js), !(*Gruntfile.js)`......但没有任何效果。将其添加到`processContentExclude`数组中，但也没有成功。

那么如何排除`Gruntfile.js`文件夹结构中的所有文件`js/**/*`？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-05T11:23:16.830

找到了解决方案：

不需要这些行：

```
files: [ 
          {src: ['.conf1', '.conf2', './config.js'], dest: 'output/toolkit/', filter: 'isFile'},
          {src: ['./css/**/*', './img/**/*', './js/**/*', './release/**/*', './lib/**/*', './locale/**/*'], dest: 'output/toolkit/'},
          {expand: true, cwd: './', src: ['**'], dest: 'output/'}
       ] 
```

因为 `{expand: true, cwd: './', src: ['**'], dest: 'output/'}`是一个新的复制步骤，将所有文件从 复制`./`到`output`. 这对我来说不需要，因为上面的行已经将所需的文件复制到`output/toolkit`.

所以以下两行可以完成这项工作。不需要选项或其他任何东西。把`*.less`文件挡在外面`'!**/*.less'`就行了。

```
files: [ 
          {src: ['.conf1', '.conf2', 'config.js'], dest: 'output/toolkit/', filter: 'isFile'},
          {src: ['css/**', 'img/**', 'js/**', 'release/**', 'lib/**', 'locale/**', '!**/*.less'], dest: 'output/toolkit/'}
       ] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-02-02T12:31:19.430

我想在我的副本中排除所有 .gz 文件，这个选项对所有文件夹都有效

```
{
  expand: true,
  cwd:    './build/www/',
  src:    [ '**', '!**/*.gz' ],
  dest:   './mydDest'
} 
```

所以可以尝试`!**/*.less, !gruntfile.js`（没有括号）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-29T08:28:44.267

如果您有权更改为不同的 Grunt 任务：

还有[https://github.com/clavery/grunt-copy-to](https://github.com/clavery/grunt-copy-to)有一个明确的“忽略”选项来指定要省略的文件和目录。Github 中的 README 显示了一个示例配置，包括忽略选项。

它的工作方式与常规副本有点不同，因为它尊重修改时间。但这实际上可能是受欢迎的（就我而言）。

从自述文件：

> 与 grunt-contrib-copy 类似，但仅复制较新的文件并维护复制文件的修改时间。对于创建可以稍后使用依赖文件修改时间的工具同步的构建目录很有用。

（我只是那个项目的用户（至少到目前为止）。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-08T12:34:26.600

假设“Gruntfile.js”位于根目录中，则复制选项中的最后一行是将其配置为将根目录中的所有内容复制到“输出/”。

如果这是有意的，请将“！Gruntfile.js”添加到您的 src 文件路径数组中。

```
{
  expand: true, 
  cwd: './', 
  src: ['**'],      // ex. src: ['**',  '!Gruntfile.js'],
  dest: 'output/'
} 
```

[从这个线程](https://stackoverflow.com/questions/22161119/grunt-contrib-copy-ignore-folder-when-copying)和[原始线程](https://stackoverflow.com/questions/12632029/grunt-minimatch-glob-folder-exclusion)参考这些解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T10:31:11.960

我认为这应该这样做。不需要`/**/*`。`/**`涵盖路径及其子目录中的所有文件

```
{src: ['./css/**', './img/**', './js/**', './release/**', './lib/**', './locale/**'], dest: 'output/toolkit/'},
{expand: true, cwd: './', src: ['**'], dest: 'output/'} 
```

# php - 如何自定义导出查询结果（PHP mysql）到excel文件？

> ID：15199094
> 
> 赞同：0
> 
> 时间：2013-03-04T10:12:16.280
> 
> 标签：php, mysql, export-to-excel

我对使用 php 自定义导出结果（excel）有一些疑问。这个想法是我想将我对原始数据（mysql 表）的查询导出到 excel 文件，但在结果中进行了一些自定义。例如，我想要结果，它是下表的摘要： ![在此处输入图像描述](../Images/c70f5595c8be7c21f8c7037f53145321.png)

第 3 列到第 7 列是根据我的报告日期的最后 5 天命名的。

我的想法是： 1\. 使用格式创建临时表作为我要生成的结果表 2\. 使用我的原始数据插入表。3\. 删除那些表。

这有效吗？还是有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:17:14.617

根据数据的大小，无需考虑性能。

# 修改之前的数据

你可以有一个临时表。根据数据，如果您可以根据索引选择和插入数据，这将非常快。然后你做一个`SELECT * from tmp_table;`，你有你所有的数据

# 修改后的数据

您可以加入不同的表，获取数据，然后`foreach`在结果数组上循环（读取为）并更改数据并随后将其导出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:15:04.287

您始终可以使用视图。这本质上是一个包含您的数据的选择语句，并且每当您的表更新时都会更新。然后你可以做一个' `select * from view_name`'并将其导出到你的excel中。

# binding - WPF字典键绑定不起作用

> ID：15199110
> 
> 赞同：0
> 
> 时间：2013-03-04T10:12:36.850
> 
> 标签：binding, windows-8, dictionary, resources, key

我真的不明白。

我创建了一个视图模型类，其中包含两个对象，如下所示：

```
public class MyViewModel{

public MyFirstObject FirstObject {get;set;}
public MySecondObject SecondObject {get;set;}

...
// Constructors and so on...
} 
```

FirstObject 如下所示：

```
public class MyFirstObject {

    public int Id {get;set;}
    ...
    // Constructors and so on...
    } 
```

}

MySecondObject 包含一个字典：

```
 public class MySecondObject{

            public Dictionary<int, string> MyDict {get;set;}
            ...
            // Constructors and so on...
            }
} 
```

我现在想要做的是获取一个键的字典值，这是对 MyFirstObject.Id 的引用 - 像这样：

```
mySecondObject.myDict[myFirstObject.Id] 
```

在 C# 中执行此操作很容易，但现在我想在 xaml 中执行此操作。我创建了一个 UserControl 并将 DataContext 设置为 MyViewModel-reference。

之后，我尝试了这个：

```
<TextBox Text={Binding SecondObject[FirstObject.Id]} ../> 
```

不幸的是，这不起作用，因为找不到键“FirstObject.Id”。

有谁知道如何解决这个问题？

非常感谢！代码食人族

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:24:28.810

不要在 XAML 中执行此操作。只需在封装此逻辑的视图模型上创建一个新属性。

您还可以委托`PropertyChangedEvent`传播您的值更改：

```
public class MyViewModel : INotifyPropertyChanged {

    private MyFirstObject firstObject;
    public MyFirstObject FirstObject
    {
        get { return firstObject; }
        set { firstObject = value; PropertyChanged("MyDictValue"); }
    }

    private MySecondObject secondObject;
    public MySecondObject SecondObject
    {
        get { return secondObject; }
        set
        {
            secondObject = value; PropertyChanged("MyDictValue");
            // you can subscribe here also for your MyDict changes if it is an
            // observable and you can call PropertyChanged("MyDictValue"); 
            // in the change event etc
        }
    }

    public string MyDictValue 
    { 
        get { return SecondObject.MyDict[FirstObject.Id]; } 
    }

    public event PropertyChangedEventHandler PropertyChanged = delegate { };

    protected void RaisePropertyChanged(string propertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

} 
```

并绑定到您的新属性：

```
<TextBox Text={Binding MyDictValue} ../> 
```

使用这种方法，您将在`MyDictValue`中添加额外的逻辑，例如处理 if `FirstObject`or `SecondObject`is null 等。

# sitecore - Sitecore 上的滑动图像

> ID：15199111
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:12:42.863
> 
> 标签：sitecore, sitecore6

Sitecore 的新手。我需要开发一个滑动图像，如下所示的 sitecore 网站： [http ://www.sitecore.net/](http://www.sitecore.net/)

我很喜欢前端 Javascript。有人可以帮我设计在 Sitecore 上构建所需的模板、项目、组件吗？用户应该能够更改滑动内容的图像和文本描述。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:39:13.810

创建一个名为**SlideshowImageTemplateItem的新****TemplateItem**。

 **它应该有一组必要的**字段**：**Image**，**Description**，**Link**等。

现在幻灯片中的每个图像都应该是使用**SlideshowImageTemplateItem**创建的**Sitecore**树中的单独**项目**。

 ****然后创建子布局**幻灯片**并在其渲染参数中添加一个**MultiList**字段，这将允许您选择应在特定幻灯片中显示哪些幻灯片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:40:32.367

您是否查看过[Sitecore 合作伙伴网络](http://spn.sitecore.net)提供的 Nicam 或 JetStream 演示站点（假设您/您的公司有权访问）？两者都有很好的带有可编辑文本的滑块控件示例、所有 Sitecore 项目和相关代码。它们还具有页面编辑器模式中稍微不同的操作所需的代码更改，因为您不希望在编辑时进行旋转操作。******

# wpf - WPF Observablecollection 与 ListView 的 INotifyPropertyChanged 不起作用

> ID：15199116
> 
> 赞同：2
> 
> 时间：2013-03-04T10:12:52.577
> 
> 标签：wpf, data-binding, observablecollection, inotifypropertychanged

我有一个 wpf 应用程序，当我使用 Observablecollect 通过 UI 添加新值时，我想更新我的列表视图。但我没有得到我所期望的。当我添加新值时，我不会更新我的列表视图。

这是我的 CS 文件。

```
 using System.Collections.ObjectModel;
 using System.ComponentModel;
 using System.Data.SqlClient;
 using System.Windows;

 namespace ObservableCollectionTest
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public ObservableCollection<TestUser> NameList { get; set; }

    public MainWindow()
    {
        InitializeComponent();
        NameList = GetNamesFromDBAsStringList();
        ListViewNames.ItemsSource = NameList;
        this.DataContext = this;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        TestUser user = new TestUser();
        user.UserName = txtName.Text;
        NameList.Add(user);

        //InsertUserName(txtName.Text);
        //NameList = GetNamesFromDBAsStringList();

        txtName.Clear();
        MessageBox.Show("User added");
    }

    private ObservableCollection<TestUser> GetNamesFromDBAsStringList()
    {
        ObservableCollection<TestUser> userList = new ObservableCollection<TestUser>();

        SqlConnection connection = new SqlConnection("Data Source=Chakrapani\\SQLEXPRESS;Initial Catalog=Test;Integrated Security=True");
        connection.Open();
        string sql = "select UserID,UserName from TestUser";
        SqlCommand command = new SqlCommand(sql, connection);
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            TestUser testUser = new TestUser();
            testUser.UserID = (int)reader[0];
            testUser.UserName = reader[1].ToString();
            userList.Add(testUser);
        }
        reader.Close();
        connection.Close();

        return userList;
    }

    private void InsertUserName(string userName)
    {
        SqlConnection connection = new SqlConnection("Data Source=CHAKRAPANI\\SQLEXPRESS;Initial Catalog=Test;Integrated Security=True");
        connection.Open();
        string sql = string.Format("insert into TestUser values ('{0}')", userName);
        SqlCommand command = new SqlCommand(sql, connection);
        command.ExecuteNonQuery();

        connection.Close();
    }
}

public class TestUser : INotifyPropertyChanged
{
    private int _userId;
    private string _userName;

    public int UserID
    {
        get { return _userId; }
        set
        {
            _userId = value;
            NotifyPropertyChanged("UserID");
        }
    }
    public string UserName
    {
        get { return _userName; }
        set
        {
            _userName = value;
            NotifyPropertyChanged("UserName");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}
} 
```

这是我的 xaml 文件

```
<Window x:Class="ObservableCollectionTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="396">
<Grid>
    <Button Content="Add User" HorizontalAlignment="Left" Margin="300,10,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1" Name="BtnAdd"/>
    <TextBox HorizontalAlignment="Left" Height="23" Margin="10,10,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Top" Width="264" Name="txtName"/>
    <ListView HorizontalAlignment="Left" Height="259" Margin="10,51,0,0" VerticalAlignment="Top" Width="264" Name="ListViewNames" ItemsSource="{Binding MyUserNameList}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="User ID" DisplayMemberBinding="{Binding UserID}"/>
                <GridViewColumn Header="User Name" DisplayMemberBinding="{Binding UserName}"/>
            </GridView>
        </ListView.View>
    </ListView>

</Grid> 
```

请给我一个线索来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:17:55.087

您应该将其插入可观察集合而不是重新构建它

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    TestUser user = new TestUser();
    user.UserName = txtName.Text;
    InsertUserName(txtName.Text);
    NameList.Add(new TestUser {UserName = txtName.Text, UserID = ???}); //TODO: assign correct ID
    txtName.Clear();
    MessageBox.Show("User added");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:15:16.603

您忘记在构造函数中添加 DataContext ：

```
this.DataContext = this; 
```

# java - Runtime.exec().waitFor() 不会等到进程完成

> ID：15199119
> 
> 赞同：36
> 
> 时间：2013-03-04T10:12:55.723
> 
> 标签：java, runtime.exec

我有这个代码：

```
File file = new File(path + "\\RunFromCode.bat");
file.createNewFile();

PrintWriter writer = new PrintWriter(file, "UTF-8");
for (int i = 0; i <= MAX; i++) {
    writer.println("@cd " + i);
    writer.println(NATIVE SYSTEM COMMANDS);
    // more things
}

writer.close();

Process p = Runtime.getRuntime().exec("cmd /c start " + path + "\\RunFromCode.bat");
p.waitFor();

file.delete(); 
```

发生的情况是文件在实际执行之前被删除。

这是因为该`.bat`文件仅包含本机系统调用吗？文件执行**后**如何删除`.bat`？（我不知道`.bat`文件的输出是什么，因为它是动态变化的）。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-04T10:15:31.310

通过使用`start`，您要求`cmd.exe`在后台启动批处理文件：

```
Process p = Runtime.getRuntime().exec("cmd /c start " + path + "\\RunFromCode.bat"); 
```

因此，您从 Java ( `cmd.exe`) 启动的进程在后台进程完成之前返回。

删除`start`在前台运行批处理文件的命令 - 然后，`waitFor()`将等待批处理文件完成：

```
Process p = Runtime.getRuntime().exec("cmd /c " + path + "\\RunFromCode.bat"); 
```

* * *

根据 OP，让控制台窗口可用很重要——这可以通过添加`/wait`参数来完成，正如@Noofiz 所建议的那样。以下 SSCCE 为我工作：

```
public class Command {

public static void main(String[] args) throws java.io.IOException, InterruptedException {
       String path = "C:\\Users\\andreas";

       Process p = Runtime.getRuntime().exec("cmd /c start /wait " + path + "\\RunFromCode.bat");

       System.out.println("Waiting for batch file ...");
       p.waitFor();
       System.out.println("Batch file done.");
   }
} 
```

如果`RunFromCode.bat`执行`EXIT`命令，命令窗口会自动关闭。否则，命令窗口将保持打开状态，直到您明确退出它`EXIT`- 在任何一种情况下，java 进程都在等待窗口关闭。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T10:19:23.343

尝试`/wait`在`start`命令前面添加参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-22T14:11:04.733

```
waitForProcessOutput() 
```

为我们做了诀窍。

看：

[http://docs.groovy-lang.org/docs/groovy-1.7.2/html/groovy-jdk/java/lang/Process.html#waitForProcessOutput()](http://docs.groovy-lang.org/docs/groovy-1.7.2/html/groovy-jdk/java/lang/Process.html#waitForProcessOutput())

**代码示例（在 SOAPUI 中使用）**

```
def process = "java -jar ext\\selenese-runner.jar".execute()

process.waitForProcessOutput()

def exitValue = process.exitValue() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-08T04:34:22.577

注释标记中描述的任何代码都不是解决方案。

第一个答案

```
Process p = Runtime.getRuntime().exec("cmd /c start " + path + "\\RunFromCode.bat"); 
```

第二个答案

```
Process p = Runtime.getRuntime().exec("cmd /c " + path + "\\RunFromCode.bat"); 
```

第三个答案

```
public class Command {

public static void main(String[] args) throws java.io.IOException, InterruptedException {
       String path = "C:\\Users\\andreas";

       Process p = Runtime.getRuntime().exec("cmd /c start /wait " + path + "\\RunFromCode.bat");

       System.out.println("Waiting for batch file ...");
       p.waitFor();
       System.out.println("Batch file done.");
   }
} 
```

# windows - Wix：安装 MSMQ 组件

> ID：15199131
> 
> 赞同：2
> 
> 时间：2013-03-04T10:13:38.760
> 
> 标签：windows, wix, msmq

我有一个 .NET 项目，它有 2 个通过 MSMQ 进行通信的组件。我正在使用 Wix 构建我的安装程序，因为 Microsoft 莫名其妙地停止了对 Visual Studio 2012 中的安装程序的支持。我对在 Wix 安装程序中创建 MSMQ 实例的过程非常满意，我对这个过程非常满意检测计算机上是否安装了 MSMQ（通过尝试加载 Mqrt.dll）。

有谁知道如何使用 Wix 安装 MSMQ Windows 系统组件本身？有没有办法让 Wix 指示 Windows 安装系统组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-27T11:04:02.630

花了很长时间，但最后我找到了优雅的方法来做到这一点。

1) 在 Visual Studio 中创建一个新的 WiX C# 自定义操作项目

2) 将以下内容粘贴到您的 CustomAction.cs 文件中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Deployment.WindowsInstaller;
using System.Runtime.InteropServices;
using System.Diagnostics;
using System.IO;

namespace InstallMsmq
{
    public class CustomActions
    {
        [CustomAction]
        public static ActionResult CustomAction1(Session session)
        {
            session.Log("Begin CustomAction1");

            return ActionResult.Success;
        }

        [DllImport("kernel32")]
        static extern IntPtr LoadLibrary(string lpFileName);

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern bool FreeLibrary(IntPtr hModule);

        [CustomAction]
        public static ActionResult InstallMsmq(Session session)
        {

            ActionResult result = ActionResult.Failure;
            session.Log("Detecting MSMQ");
            bool loaded;
            CreateConfigFile();
            CreateWindows8InstallerScript();

            try
            {
                IntPtr handle = LoadLibrary("Mqrt.dll");
                if (handle == IntPtr.Zero || handle.ToInt32() == 0)
                {
                    loaded = false;
                }
                else
                {
                    loaded = true;
                    session.Log("MSMQ is already installed");
                    result = ActionResult.Success;
                    FreeLibrary(handle);
                }
            }
            catch
            {
                loaded = false;
            }

            if (!loaded)
            {
                session.Log("Installing MSMQ");
                try
                {

                    Version win8version = new Version(6, 2, 9200, 0);

                    if (Environment.OSVersion.Platform == PlatformID.Win32NT && Environment.OSVersion.Version >= win8version)//Windows 8 or higher
                    {
                        // its win8 or higher.

                        session.Log("Windows 8 or Server 2012 detected");

                        using (Process p = new Process())
                        {
                            session.Log("Installing MSMQ Server");
                            ProcessStartInfo containerStart = new ProcessStartInfo("MSMQWindows8.bat");
                            containerStart.Verb = "runas";
                            p.StartInfo = containerStart;                            
                            bool success = p.Start();
                            p.WaitForExit();
                        }
                    }
                    else if (Environment.OSVersion.Version.Major < 6) // Windows XP or earlier
                    {
                        session.Log("Windows XP or earlier detected");
                        string fileName = System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), "MSMQAnswer.ans");
                        using (System.IO.StreamWriter writer = new System.IO.StreamWriter(fileName))
                        {
                            writer.WriteLine("[Version]");
                            writer.WriteLine("Signature = \"$Windows NT$\"");
                            writer.WriteLine();
                            writer.WriteLine("[Global]");
                            writer.WriteLine("FreshMode = Custom");
                            writer.WriteLine("MaintenanceMode = RemoveAll");
                            writer.WriteLine("UpgradeMode = UpgradeOnly");
                            writer.WriteLine();
                            writer.WriteLine("[Components]");
                            writer.WriteLine("msmq_Core = ON");
                            writer.WriteLine("msmq_LocalStorage = ON");
                        }

                        using (Process p = new Process())
                        {
                            session.Log("Installing MSMQ Container");
                            ProcessStartInfo start = new ProcessStartInfo("sysocmgr.exe", "/i:sysoc.inf /u:\"" + fileName + "\"");
                            p.StartInfo = start;
                            p.Start();
                            p.WaitForExit();
                        }
                    }
                    else if (Environment.OSVersion.Version.Major < 8) // Vista or later
                    {
                        session.Log("Windows Vista or Windows 7 detected");
                        using (Process p = new Process())
                        {
                            session.Log("Installing MSMQ Container");
                            ProcessStartInfo containerStart = new ProcessStartInfo("ocsetup.exe", "MSMQ-Container /unattendFile:MSMQ.xml");
                            containerStart.Verb = "runas";
                            p.StartInfo = containerStart;
                            p.Start();
                            p.WaitForExit();
                        }
                        using (Process p = new Process())
                        {
                            session.Log("Installing MSMQ Server");
                            ProcessStartInfo serverStart = new ProcessStartInfo("ocsetup.exe", "MSMQ-Server /unattendFile:MSMQ.xml");
                            serverStart.Verb = "runas";
                            p.StartInfo = serverStart;
                            p.Start();
                            p.WaitForExit();
                        }
                    }
                    session.Log("Installation of MSMQ Completed succesfully");
                    result = ActionResult.Success;
                }
                catch (Exception ex)
                {
                    session.Log("Installation of MSMQ failed due to " + ex.Message);
                }
            }
            return result;
        }

        private static void CreateWindows8InstallerScript()
        {
            StreamWriter configFile = new StreamWriter("MSMQWindows8.bat");
            configFile.WriteLine("%WINDIR%\\SysNative\\dism.exe /online /enable-feature /all /featurename:MSMQ-Server");
            configFile.Close();
        }
        private static void CreateConfigFile()
        {
            StreamWriter configFile = new StreamWriter("MSMQ.xml");
            configFile.WriteLine("<?xml version=\"1.0\"?>");
            configFile.WriteLine("");
            configFile.WriteLine("<unattend>");
            configFile.WriteLine("");
            configFile.WriteLine("  <servicing>");
            configFile.WriteLine("");
            configFile.WriteLine("    <package action=\"configure\">");
            configFile.WriteLine("");
            configFile.WriteLine("<assemblyIdentity name=\"Microsoft-Windows-Foundation-Package\" version=\"6.0.6000.16386\" language=\"neutral\" processorArchitecture=\"AMD64\" publicKeyToken=\"31bf3856ad364e35\" versionScope=\"nonSxS\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("      <selection name=\"MSMQ-Container\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("<selection name=\"MSMQ-Server\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("<selection name=\"MSMQ-Triggers\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("<selection name=\"MSMQ-DCOMProxy\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("<selection name=\"MSMQ-Multicast\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("<selection name=\"MSMQ-ADIntegration\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("<selection name=\"MSMQ-HTTP\" state=\"true\"/>");
            configFile.WriteLine("");
            configFile.WriteLine("    </package>");
            configFile.WriteLine("");
            configFile.WriteLine("  </servicing>");
            configFile.WriteLine("");
            configFile.WriteLine("</unattend>");
            configFile.Close();
        }
    }
} 
```

3) 编译自定义动作

4) 将以下内容添加到您的 WiX setup.wxs 文件中：

```
<Binary SourceFile="[path to custom action project]\bin\[Debug or Release]\[custom action project name].CA.dll" Id="[custom action project name]step" />
<CustomAction Id="[custom action project name]CustomAction" BinaryKey="[custom action project name]step" DllEntry="[custom action project name]" Execute="deferred" Impersonate="no"/>
<InstallExecuteSequence>
  <Custom Action="[custom action project name]CustomAction" Before="InstallFiles"/>
</InstallExecuteSequence> 
```

5) 可以将自定义操作配置为在安装过程中的多个点中的任何一个点运行（详见此处：[http](http://wixtoolset.org/documentation/manual/v3/xsd/wix/installexecutesequence.html) ://wixtoolset.org/documentation/manual/v3/xsd/wix/installexecutesequence.html ）。上面的示例在安装 .wxs 文件中详述的文件之前运行自定义操作。

6) 测试 - 如果一切顺利，您应该有一个安装文件，它将 msmq 安装为安装序列的一部分！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T07:56:00.250

当您的产品依赖于其他第三方*先决条件*（例如 MSMQ、.NET Framework、SQL Server 等）时，您需要使用引导程序来运行一系列安装：首先是所需的先决条件，然后是主要的产品安装。

在 WiX 中，这些链称为[bundles](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)，并使用[burn](http://robmensching.com/blog/posts/2009/7/14/lets-talk-about-burn)引导程序创建/运行。

# java - 用于录制视频并存储在我的Android应用程序数据库中的程序编码？

> ID：15199132
> 
> 赞同：1
> 
> 时间：2013-03-04T10:13:42.890
> 
> 标签：java, android, database, video-capture

> 如何使用摄像机录制视频并存储在 SQLite 中？

Android：无论设备方向如何，都以相同的方向录制视频

*   如何获取我正在捕获的电影的大小并在捕获期间更新屏幕？
*   是否可以在没有音频源的情况下使用 CamcorderProfile？
*   如何保护读取/复制/删除视频文件？

# c# - 从 Linq Query 异常中抛出异常

> ID：15199139
> 
> 赞同：1
> 
> 时间：2013-03-04T10:14:06.483
> 
> 标签：c#, linq, exception

假设我有一个输入字符串，我需要将其格式化为`KeyValuePair<string,float>`条目列表。输入字符串的格式是

```
key:value;key:value;... 
```

假设我有这个 Linq 代码来做

```
var orr = from pco in (overrrides ?? string.Empty).Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries)
          let pair = pco.Split(new char[] { ':' }, StringSplitOptions.RemoveEmptyEntries)
          select new KeyValuePair<string, float>(pair[0], float.Parse(pair[1])); 
```

现在，如果输入字符串的格式不正确，则 linq 将在两个可能的点上失败，即 index out of range on`pair[]`和 format exception on `float.Parse`。这两个例外都会出现并且对调用者毫无意义。

我知道我有两种解决方法（不要像 1990 年代那样使用 linq 和循环，也不要抓住异常并重新打包），但是我想知道如果我检测到异常（`pair.length<2`或`pair[1]`不是数字）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:22:30.607

一个简单的选择是将其更改为：

```
// I don't think I'd use ?? like this, but that's not the point of the question.
var unparsed = (overrrides ?? string.Empty).Split(new char[] { ';' }, 
                                                  StringSplitOptions.RemoveEmptyEntries);
var parsed = unparsed.Select(x => ParsePair(x));

...

static KeyValuePair<string, float> ParsePair(string text)
{
    // Note that you could be more efficient using IndexOf/Substring
    string[] bits = text.Split(new char[] { ':' }, StringSplitOptions.RemoveEmptyEntries);
    if (bits.Length != 2)
    {
        throw new ArgumentException("Value should be a colon-separated key/float pair");
    }
    float value;
    if (!float.TryParse(bits[1], out value))
    {
        throw new ArgumentException("Cannot parse " + bits[1] + " as a float");
    }
    return new KeyValuePair<string, float>(bits[0], value);
} 
```

您仍在将 LINQ 用于“序列”部分 - 您只是将“如何处理单个值”部分分解为单独的方法。（您*可以*将它作为一个大语句 lambda，但我不会。）请注意，通过这样做，您可以`ParsePair`独立测试该方法。

`.Select(ParsePair)`（根据您使用的 C# 版本，您可能只使用 .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:55:25.373

我想我想做的事情是不可能的`throw`，因为 as 语句不能在表达式 lambda 中使用。唯一的方法是创建一个具有副作用的外部函数，并通过`let`or`where`语句运行它，将其应用于每个条目。

```
var pairIsValidOrDie = new Func<string[], bool>(pair => {
    float amt;
    if (pair.Length != 2 || !float.TryParse(pair[1], out amt)) throw new ArgumentException("ERROR: invalid price override string);
    return true;
});

var orr = from pco in (overrrides ?? string.Empty).Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries)
          let pair = pco.Split(new char[] { ':' }, StringSplitOptions.RemoveEmptyEntries)
          where pairIsValidOrDie(pair)
          select new KeyValuePair<string, float>(pair[0], float.Parse(pair[1])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:33:13.187

您可以先使用正则表达式测试字符串

```
Regex r = new Regex(@"^((\w:\d);)*$");
bool test = r.IsMatch(tosplit); 
```

# java - Configuring PHP on Tomcat gives exception: UnsatisfiedLinkError

> ID：15199148
> 
> 赞同：3
> 
> 时间：2013-03-04T10:14:30.740
> 
> 标签：java, php, pecl

I have been trying to use PHP on Tomcat (don't ask why, I just have to), and have been following the [Configure PHP with Tomcat](http://toostep.com/trends/configure-php-with-tomcat) and several tutorials given for PHP with PECL & Tomcat.

I've done most of the things required by the tutorials, like setting all the environment variables that are required, but I still run into errors such as the one shown below, on startup:

```
javax.servlet.ServletException: Servlet.init() for servlet php threw exception
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
    java.lang.Thread.run(Thread.java:619)

root cause

java.lang.UnsatisfiedLinkError: C:\WINDOWS\system32\php5servlet.dll: The specified procedure could not be found
    java.lang.ClassLoader$NativeLibrary.load(Native Method)
    java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1803)
    java.lang.ClassLoader.loadLibrary(ClassLoader.java:1728)
    java.lang.Runtime.loadLibrary0(Runtime.java:823)
    java.lang.System.loadLibrary(System.java:1028)
    net.php.reflect.loadLibrary(reflect.java:34)
    net.php.reflect.<clinit>(reflect.java:29)
    net.php.servlet.init(servlet.java:157)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
    java.lang.Thread.run(Thread.java:619) 
```

Also, whenever I refresh a page. It gives this exception :

```
javax.servlet.ServletException: Servlet execution threw an exception

root cause

java.lang.UnsatisfiedLinkError: 
net.php.servlet.send(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Z)V
net.php.servlet.send(Native Method)
net.php.servlet.service(servlet.java:190)
net.php.servlet.service(servlet.java:214)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

I have been trying to solve this, unsuccessfully, since yesterday. Can anyone tell me what am I doing wrong here? Or what the solution might be? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T04:21:00.877

What version of PHP are you using?

Not all versions of PHP supports php5servlet. The php5servlet.dll library needs a function or method contained in the library php5ts.dll, but this library php5ts.dll changes according to version of PHP (adding new or substracting old methods), for this reason when php5servlet.dll calls some method, maybe can't found it.

You need one version of PHP (maybe older than you are using) according to PECL Library that you are using.

The last tested version of **PHP** for me is [http://windows.php.net/downloads/releases/archives/php-5.2.16-Win32-VC6-x86.zip](http://windows.php.net/downloads/releases/archives/php-5.2.16-Win32-VC6-x86.zip)

I do not know still why PHP 5.3.0 or newer VC6 is not functional.

The last version of **PECL** with the required library (php5servlet.dll, php_java.dll, php_java.jar and phpsrvlt.jar) was [http://museum.php.net/php5/pecl-5.2.5-Win32.zip](http://museum.php.net/php5/pecl-5.2.5-Win32.zip)

The **Tomcat** used for this testing was [http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.27/bin/apache-tomcat-7.0.27-windows-x86.zip](http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.27/bin/apache-tomcat-7.0.27-windows-x86.zip)

**If you want to work only with .php files...**

Now (This below part is not the reason for the error, so do not fix it.), you can work putting your *.php* files directly in

```
TOMCATDIR\webapps\ROOT\ 
```

putting the generated *.jar* file **php5srvlt.jar** inside of **\lib** obviously changing the **web.xml** file to something like:

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
  version="3.0"
  metadata-complete="true">
  <servlet>
    <servlet-name>php</servlet-name>
    <servlet-class>net.php.servlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>php-formatter</servlet-name>
    <servlet-class>net.php.formatter</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>php</servlet-name>
    <url-pattern>*.php</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>php-formatter</servlet-name>
    <url-pattern>*.phps</url-pattern>
  </servlet-mapping>
</web-app> 
```

# joomla - Joomla K2菜单管理中的“选择类别”没有下拉菜单

> ID：15199154
> 
> 赞同：0
> 
> 时间：2013-03-04T10:14:56.310
> 
> 标签：joomla, menu, joomla2.5, joomla-k2, dropdownbox

管理下的菜单管理中有一个文本输入而不是下拉输入。当我尝试创建或编辑菜单项并将其类型选择为 K2 类别时，在基本选项部分下，带有标签“选择类别”的字段是一个文本字段。无论我在那里写什么，当我点击页面上的菜单项时，它都不会影响帖子列表。它列出了所有的帖子。

图片： [关于问题的图片 http://img713.imageshack.us/img713/305/theproblem.jpg](http://img713.imageshack.us/img713/305/theproblem.jpg)

![关于问题的图片](../Images/42af9ca2551cb375b62080b954207b25.png)

我正在使用 joomla 2.5.4。

# sql - Hive CLI 不支持将 MySql 样式数据导入表

> ID：15199168
> 
> 赞同：0
> 
> 时间：2013-03-04T10:15:45.100
> 
> 标签：sql, hadoop, hive

为什么我们不能将数据导入 Hive CLI，如下所示，`hive_test`表有`user`,`comments`列。

```
insert into table hive_test (user, comments) 
value ("hello", "this is a test query"); 
```

Hive 在 Hive CLI 中引发以下异常

> 失败：ParseException 行 1:28 无法识别选择子句中“（”“用户”“，”附近的输入

我不想通过 csv 文件导入数据，如下面的测试目的。

```
load data local inpath '/home/hduser/test_data.csv' into table hive_test; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:35:20.523

值得注意的是，Hive 宣传“类似 SQL”的语法，而不是实际的 SQL 语法。没有特别的理由认为纯 SQL 查询实际上会在 Hive 上运行。HiveQL 的 DML 记录[在 Wiki 上](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML)，不支持列规范语法或`VALUES`子句。但是，它确实支持这种语法：

```
INSERT INTO TABLE tablename1 SELECT ... FROM ... 
```

[从这些测试查询](https://github.com/apache/hive/blob/trunk/ql/src/test/queries/clientpositive/insert1.q)中推断，您可能会得到类似以下的工作：

```
INSERT INTO TABLE hive_test SELECT 'hello', 'this is a test query' FROM src LIMIT 1 
```

但是，Hive 似乎并没有真正针对这种小规模数据操作进行优化。我没有 Hive 实例来测试这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:22:04.323

我想，这是因为`user`是一个内置的（保留）关键字。

试试这个：

```
insert into table hive_test ("user", comments) 
value ('hello', 'this is a test query'); 
```

# java - 动态创建子项目，可根据不同用户由子域访问

> ID：15199172
> 
> 赞同：1
> 
> 时间：2013-03-04T10:16:15.167
> 
> 标签：java

我有一个 Java EE 项目。我想根据用户更改项目的徽标和背景颜色。例如 ：

如果 url 是：www.xyz.com --> 那么它应该使用默认徽标和背景打开项目。

但如果 url 是：abc.xyz.com 或 xyz.com/abc --> 那么它应该打开带有特定于`abc`.

这`abc`是可以动态创建的用户名。我想知道，如果我们将创建一个用户，那么我们如何使用 username.xyz.com 或 xyz.com/username 之类的 url 访问同一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:29:31.427

我认为一个好的解决方案是将您的应用程序配置为`http://appUrl/username`使用 url 的行为，然后使用`apache http`服务器作为代理将调用路由`http://username.appUrl`到`http://appUrl/username`.

为了实现这一点，`http://appUrl/username`您只需映射您的应用程序以处理映射到`/*`的任何内容并将第`/`一个之后的任何内容视为参数。这可以使用基本的 servlet 映射来实现，例如，`Spring MVC`.

# wcf - 时间戳必须在响应中签名错误

> ID：15199181
> 
> 赞同：1
> 
> 时间：2013-03-04T10:16:35.837
> 
> 标签：wcf, wcf-security

对于初学者，我知道您会认为这是重复的，但如果您阅读它们，您会注意到有些人说删除时间戳会修复它，而其他人则不然。

**我正在尝试使用.Net 3.5**连接到带有证书的 Java SOAP Web 服务，但是当我收到响应时，它会引发错误：**“必须对具有 'Timestamp-984' id 的安全标头元素 'Timestamp' 进行签名。”**

```
var b = new CustomBinding();
b.Name = "AVbinding";
b.CloseTimeout = new TimeSpan(0, 1, 0);
b.OpenTimeout = new TimeSpan(0, 1, 0);
b.ReceiveTimeout = new TimeSpan(0, 10, 0);
b.SendTimeout = new TimeSpan(0, 1, 0);

AsymmetricSecurityBindingElement security = new AsymmetricSecurityBindingElement();
security.IncludeTimestamp = true;
security.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12;
security.RecipientTokenParameters = new X509SecurityTokenParameters(X509KeyIdentifierClauseType.Any, SecurityTokenInclusionMode.AlwaysToInitiator);
security.InitiatorTokenParameters = new X509SecurityTokenParameters(X509KeyIdentifierClauseType.Any, SecurityTokenInclusionMode.AlwaysToRecipient);
security.SecurityHeaderLayout = SecurityHeaderLayout.Lax;
security.DefaultAlgorithmSuite = System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256Sha256Rsa15;
security.AllowSerializedSigningTokenOnReply = true;
security.AllowInsecureTransport = true;
security.EnableUnsecuredResponse = true;
security.RequireSignatureConfirmation = true;

security.SecurityHeaderLayout = SecurityHeaderLayout.Lax;

ExtensionElement extensionElement = new ExtensionElement();

b.Elements.Add(security);
b.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8));
HttpsTransportBindingElement httpsBinding = new HttpsTransportBindingElement();
b.Elements.Add(httpsBinding);

string certMapPath = Server.MapPath("~/App_Data");
X509Certificate2 cert = new X509Certificate2(certMapPath + "\\_CERTNAME_", "X");
X509Certificate2 serCert = new X509Certificate2(certMapPath + "\\_CERTNAME2_.cer");
AsymmetricAlgorithm key = new System.Security.Cryptography.RSACryptoServiceProvider();
key.FromXmlString("_KEY_");
cert.PrivateKey = key;

client.Endpoint.Contract.ProtectionLevel = System.Net.Security.ProtectionLevel.Sign; 
```

问题是，我该怎么办？

我的请求 ：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
<ActivityId CorrelationId="7d9e44cb-cecd-4c49-9a71-79a2ad04a2ec" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">63bde0b8-8953-41b8-b5c2-a69c712346b6</ActivityId>
<VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo3dbGZWnrwhDouJE+VgKu4MAAAAAzmpHur/flUSUy0rxOVAJ8Nk4GsFjc6xOg46yQ3o0ZMQACQAA</VsDebuggerCausalityData>
<o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<o:BinarySecurityToken>
<!-- Removed-->
</o:BinarySecurityToken>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></CanonicalizationMethod>
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></SignatureMethod>
<Reference URI="#_2">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></DigestMethod>
<DigestValue>Z4OHoIS/bVCWIROLBFcxjfJuXv0ebA/SO8WQWuPTrQo=</DigestValue>
</Reference>
<Reference URI="#uuid-f52585e9-3358-46f6-8e9f-9a16b5c0f29b-1">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></DigestMethod>
<DigestValue>Pnp4gaKUnboMFE2LgLdsFzPBL+7fHqXacVg/MR7AS6c=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>NSE/peVOxXheXOqyNT1qx7uZPOhSms35fmJxlf4lBuODD9tz8/TCwzmAAdDArGwc6VJmdw1jVX5tNchYvAqignsPRgTwB+tSbMvUZ6UMwOgHZWRh8rXjYw34EhdEWWBzg0U1ves6ynY88vJW0oFyWiiFcNGkEuy140X7h/Ev+3I=</SignatureValue>
<KeyInfo>
<o:SecurityTokenReference>
<o:Reference URI="#uuid-da5ccb9b-2c40-4ede-9079-c94abf912843-2"></o:Reference>
</o:SecurityTokenReference>
</KeyInfo>
</Signature>
<u:Timestamp u:Id="uuid-f52585e9-3358-46f6-8e9f-9a16b5c0f29b-1">
<u:Created>2013-03-04T09:27:15.087Z</u:Created>
<u:Expires>2013-03-04T09:32:15.087Z</u:Expires>
</u:Timestamp>
</o:Security>
</s:Header>
<s:Body u:Id="_2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<getAvailabilityRequest xmlns="_url_">
<userID xmlns="">_UserID_</userID>
<password xmlns="">_pass_</password>
<requestID xmlns="">_request_</requestID>
<SystemIdentifier xmlns="">?</SystemIdentifier>
</getAvailabilityRequest>
</s:Body>
</s:Envelope> 
```

回复 ：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" SOAP-ENV:mustUnderstand="1">
<wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-932">
<wsu:Created>2013-03-04T09:27:24.013Z</wsu:Created>
<wsu:Expires>2013-03-04T09:32:24.013Z</wsu:Expires>
</wsu:Timestamp>
<wsse:BinarySecurityToken>
<!-- Removed-->
</wsse:BinarySecurityToken>
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="Signature-930">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#id-931">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>+/NJN562AUh5U5T4VXGRbdU28+JLmW2bdHg1gLf/SWg=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#SigConf-929">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>uzljMoX3dAm90+8P10b2/xE5OooNeP81NDtlefCBoc8=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>Fixb+0TnwQ2KfLqywusmwcKF8OvoBP/bLqIKfLadyV1U97+NZKzcMrSJjSD0a0sDhJZ+lo/KoHVE
KBY12ZZDP9xE+k9LHAlWZIq3a2gvBkTFR3p5NcYFQM4cbA/x/bvpEqDyzqYSoXnXMOG46DFn5klo
DO0PJkMiXKvLBhrCpZtM26AovD5WQlD694EeIXt4jey15zvGzKz88eNfHqNiYa1Wu2HuOTcnSJRv
hQKHmJKpDzn9+ZSohsULVR5xtGFQD7GWL6LLFEMqthD2a10KMan43Qd62SMUcB64o+l/M+l89+Oo
AbE0S2GXP3vvSa3ZoGduktWlyNlC7Qz/Iww0Qg==
</ds:SignatureValue>
<ds:KeyInfo Id="KeyId-83F04DBB53B92E8E1F1362389243499698">
<wsse:SecurityTokenReference xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="STRId-83F04DBB53B92E8E1F1362389243499699" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:Reference URI="#CertId-83F04DBB53B92E8E1F1362389243499697" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"></wsse:Reference>
</wsse:SecurityTokenReference>
</ds:KeyInfo>
</ds:Signature>
<wsse11:SignatureConfirmation xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" Value="NSE/peVOxXheXOqyNT1qx7uZPOhSms35fmJxlf4lBuODD9tz8/TCwzmAAdDArGwc6VJmdw1jVX5tNchYvAqignsPRgTwB+tSbMvUZ6UMwOgHZWRh8rXjYw34EhdEWWBzg0U1ves6ynY88vJW0oFyWiiFcNGkEuy140X7h/Ev+3I=" wsu:Id="SigConf-929"></wsse11:SignatureConfirmation>
</wsse:Security>
</SOAP-ENV:Header>
<SOAP-ENV:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-931">
<ns3:getAvailabilityResponse xmlns:ns3="_URL_" xmlns="">
<RequestID>_requestID_</RequestID>
<Status>Available</Status>
<Version>1.32.0</Version>
</ns3:getAvailabilityResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:46:59.567

请在此处发布完整的请求和响应消息（您可以从 Wcf 日志或 Fiddler 获取它们）。一般来说，如果 Wcf 发送一个签名的时间戳，并且响应包含一个时间戳，那么响应 ts 必须是签名的。根据确切的消息，有各种解决方法，包括不从一开始就发送时间戳，或者通过将其推送到处理程序中的消息来发送它，或者从响应中删除时间戳。

# visual-studio-2010 - 如何使用 Tesseract OCR 从图像中提取多行？

> ID：15199187
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:16:47.930
> 
> 标签：visual-studio-2010, visual-c++, ocr, tesseract

1.  我们传递了一个带有文本“Hello World”的单行图像，Tesseract OCR 完美地显示了结果“Hello World”。

2.  但是当我们传递一个带有多行文本的图像时

> 你好世界
> 你好吗

它没有显示任何东西。

这是我们的代码：

```
#include "stdafx.h"
#include <iostream>
#include <baseapi.h>
#include <allheaders.h>
#include <fstream>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    tesseract::TessBaseAPI api;

    api.Init("", "eng", tesseract::OEM_DEFAULT);
    api.SetPageSegMode(static_cast<tesseract::PageSegMode>(7));
    api.SetOutputName("out");

    cout<<"File name:";
    char image[256];
    cin>>image;
    PIX   *pixs = pixRead(image);

    STRING text_out;
    api.ProcessPages(image, NULL, 0, &text_out);

    cout<<text_out.string();

    ofstream files;
    files.open("out.txt");
    files << text_out.string()<<endl;
    files.close();

    cin>> image;
    return 0;
} 
```

### 1行输入

![](../Images/bc85ac1565ecfcd04f0f4555108351b3.png)

### 1行输出

![](../Images/128e90e82d91d63668490d527201effc.png)

### 2行输入

![](../Images/25cc82d6c1342f3295951c139ee16d7a.png)

### 2行输出

![](../Images/cadef34e1e8d594eab9264f8a02fd632.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:40:13.087

页面分割模式 7 将图像视为单个文本行。尝试 3，这是全自动页面分割，但没有 OSD（默认）。

# ruby - 在 Ruby on Rails 中使用 JSON 和 AJAX 获取数据

> ID：15199195
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:17:09.353
> 
> 标签：ruby

如何在 Ruby on Rails 中使用 JSON 和 AJAX 从数据库中获取有关输入/更改关键字的数据（例如文本字段的更改命令）？请给我任何教程或代码如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:06:35.997

[jQuery 更改（）](http://api.jquery.com/change/)

[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)

[回应](http://guides.rubyonrails.org/getting_started.html#listing-all-posts)

# webserver - “Webserver 正在获取而不是执行 CGI 文件”尝试运行 Bugzilla 时

> ID：15199198
> 
> 赞同：2
> 
> 时间：2013-03-04T10:17:25.593
> 
> 标签：webserver, cgi, bugzilla, bitnami

**免责声明**：我知道这个问题听起来很蹩脚。但我不是*n00b*，我已经做了我所知道的一切，我可以找到帮助。我已经为此搜索了论坛并尝试了所有给出的修复程序，但没有一个对我有帮助，因此提出了这个问题。

我访问过的线程

*   [https://askubuntu.com/questions/147348/bugzilla-testserver-pl-failing](https://askubuntu.com/questions/147348/bugzilla-testserver-pl-failing)
*   [http://www.thesitewizard.com/archive/addcgitoapache.shtml](http://www.thesitewizard.com/archive/addcgitoapache.shtml)
*   [安装后的 Bugzilla 错误：“TEST-FAILED Web 服务器未执行 CGI 文件”](https://stackoverflow.com/questions/465222/bugzilla-error-after-installation-test-failed-web-server-is-not-executing-cgi)

现在有了那个

**我的确切问题**

我在 bitnamil 灯组上安装了 bugzilla。Lampstack 已经成功启动并运行了另外两个应用程序。安装 bugzilla 后，当我尝试访问该页面时，我可以在 borwser 上看到我的整个 perl 脚本。运行它自己的服务器检查会告诉我以下信息

> TEST-OK Webserver 正在 $webservergroup 中的组 ID 下运行。
> 
> TEST-OK 得到挂锁图片。
> 
> TEST-FAILED Web 服务器正在获取而不是执行 CGI 文件。

**我在我的设置中做了什么**

1.  bugzilla.conf 文件（在 httpd.conf 中获取）启用了以下设置

    ```
    > AddHandler cgi-script .cgi .pl
    >
    >    Options +MultiViews +ExecCGI
    >
    >    DirectoryIndex index.cgi
    >
    >    AllowOverride All 
    ```

2.  我的 httpd.conf 文件中已经启用了“AddHandler cgi-script .cgi .pl”。

3.  我没有为 httpd.conf 中的所有目录单独启用 +ExecCGI，但即使这样也不能解决问题

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:15:06.730

您的 bugzilla.conf 中应该有一个目录块，如下所示：

```
<Directory "/usr/local/apache2/htdocs/bugzilla">
    AddHandler cgi-script .cgi
    Options +ExecCGI +FollowSymLinks
    DirectoryIndex index.cgi index.html
    AllowOverride Limit FileInfo Indexes Options
    AddType application/vnd.mozilla.xul+xml .xul
    AddType application/rdf+xml .rdf
</Directory> 
```

我相信您不希望 .pl 被“处理”。All for AllowOverride 是一个安全问题。FollowSymLinks 是因为我在 htdocs 中的 bugzilla 目录是指向系统上其他位置的符号链接。

你运行了 checksetup.pl 吗？它应该已经为您调整了所有权限，但请检查您的 Web 服务器运行的组是否具有读取和执行权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T17:14:09.117

我在另一个包下载 CGI 文件而不是在服务器上执行它们时遇到了类似的问题。我的问题的答案是在 Ubuntu 服务器 14.04 上，apache 上的模块 CGI 被禁用。修理：

```
sudo a2enmod cgi 

sudo service apache2 restart 
```

要检查模块是否已加载，在 Ubuntu 上：

```
apache2ctl -M | grep cgi
 cgi_module (shared) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-05T05:34:13.800

耶拉文的回答解决了我的问题： [cgi 脚本没有执行](https://stackoverflow.com/questions/7471859/cgi-script-is-not-executing)

这是他的答案的副本：

确保您在 httpd.conf 文件中加载 CGI 模块： `LoadModule cgi_module modules/mod_cgi.so`或者 `LoadModule cgi_module modules/mod_cgid.so`取决于您正在运行的 Apache 版本。您还可以阅读有关使用 CGI 的动态内容的其他解决方案。

# vba - Word 2007：获取构建块列表？

> ID：15199201
> 
> 赞同：1
> 
> 时间：2013-03-04T10:17:37.850
> 
> 标签：vba, ms-word, buildingblocks

如果有办法（直接或使用 VBA）获取出现在 Building Blocks Organizer 中的所有构建块的列表，即构建块的名称、Gallery、Category、the模板、行为等。我不想提取自动文本部分或类似的东西。我只是希望能够获取并打印 Bilding Blocks 的完整列表以及 Building Blocks Organizer 中显示的其余信息。

非常感谢！D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:46:12.453

构建块条目存储在多个 Word 模板文件中。如果要遍历所有可用的构建块，则必须遍历所有加载的 Word 模板。您可以使用以下宏执行此操作：

```
Sub ListBuildingBlocks()

    Dim oTemplate As Template
    Dim oBuildingBlock As BuildingBlock
    Dim i As Integer

    For Each oTemplate In Application.Templates
        For i = 1 To oTemplate.BuildingBlockEntries.Count
            Set oBuildingBlock = oTemplate.BuildingBlockEntries.item(i)
            Debug.Print oBuildingBlock.Name + vbTab _
                + oBuildingBlock.Type.Name + vbTab _
                + oBuildingBlock.Category.Name + vbTab _
                + oTemplate.FullName
        Next
    Next

End Sub 
```

# salesforce - 访问 SOQL 中的大量记录

> ID：15199204
> 
> 赞同：1
> 
> 时间：2013-03-04T10:17:44.483
> 
> 标签：salesforce

在 salesforce 中，我有一个自定义对象，将来该对象中可能有数百万条记录。我正在使用 apex 和 visualforce 开发仪表板，因此我需要在单个查询中一次访问所有记录。查询是：`[select count(custom_cases__C), status__c from custom_case__C group by status__c]`

因此，它一次访问所有记录并超出了管理者的限制。

我能做些什么来实现这一目标？

请为我提供解决方案，并在可能的情况下提供示例，因为我是 salesforce 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:17:33.537

遗憾的是，salesforce 将聚合函数不计为 1 个结果，而是计为聚合的行数。这意味着如果您有超过 50000 个结果，您将收到一个错误（超出 SOBject 查询行，该行中的某些内容）

有一个[想法](https://success.salesforce.com/ideaView?id=08730000000Br7TAAS)，请点赞！

我目前为您看到的唯一可行的解​​决方案是（也是我自己使用的解决方案）是编程和安排[Apex 批处理作业](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_batch_interface.htm)运行，并将结果保存在新的自定义对象中。然后使用该自定义对象作为仪表板的源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:47:35.847

您可以在只读模式下运行您的页面。对此也有一定的限制。您可能想查看以下链接：

[http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_readonly_context.htm](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_readonly_context.htm)

# jquery - 使用 jQuery 随机加载 div

> ID：15199206
> 
> 赞同：3
> 
> 时间：2013-03-04T10:17:53.367
> 
> 标签：jquery, html, random

我正在努力获得一个看似合理的简单脚本功能，我想在浏览器刷新时随机化七个 Div。

HTML 如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>Strict</title>

<link rel="stylesheet" type="text/css" href="style.css">

<script type="text/javascript" src="jquery-1.9.1.min.js"></script>

 <script>
    var divs = $("div.Image").get().sort(function(){ 
    return Math.round(Math.random())-0.5; //random so we get the right +/- combo
    }).slice(0,4)
    $(divs).show();
 </script>

</head>

<body>

<div class="Image"><img src="image1.jpg">1</div>
<div class="Image"><img src="image2.jpg">2</div>
<div class="Image"><img src="image3.jpg">3</div>
<div class="Image"><img src="image4.jpg">4</div>
<div class="Image"><img src="image5.jpg">5</div>
<div class="Image"><img src="image6.jpg">6</div>
<div class="Image"><img src="image7.jpg">7</div>

</body>
</html> 
```

那里的jQuery脚本应该是：

```
var divs = $("div.Image").get().sort(function(){ 
return Math.round(Math.random())-0.5; //random so we get the right +/- combo
}).slice(0,4)
$(divs).show(); 
```

CSS 仅限于：

```
div.Image {
display: none;
} 
```

目前根本没有加载任何内容。

我对此还是很陌生，所以如果这是基本的，我将不得不原谅自己。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:20:13.840

请将您的代码包装在`document.ready`.

```
$(document).ready(function(){
    var divs = $("div.Image").get().sort(function()
    {
       return Math.round(Math.random())-0.5; //random so we get the right +/- combo
    }).slice(0,4);

    $(divs).show();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:20:51.677

[用$(document).ready](http://api.jquery.com/ready/)包围函数，以便在页面完全加载后加载。`div`脚本执行时元素尚未加载到页面上。

```
$(document).ready(function(){
    var divs = $("div.Image").get().sort(function(){ 
    return Math.round(Math.random())-0.5; //random so we get the right +/- combo
    }).slice(0,4)
    $(divs).show();
}); 
```

**工作示例：http:** [//jsfiddle.net/FyzXF/](http://jsfiddle.net/FyzXF/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:21:16.560

尝试这个，

```
$(function(){
   var divs = $("div.Image").get().sort(function(){ 
                 return Math.round(Math.random())-0.5; //random so we get the right +/- combo
              }).slice(0,4)
   $(divs).show();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T10:21:18.167

首先，你必须将你的 js 代码包装成一个`$(function(){ ... })`块：

```
$(function(){

    var divs = $("div.Image").get().sort(function(){ 
    return Math.round(Math.random())-0.5; //random so we get the right +/- combo
    }).slice(0,4)
    $(divs).show();

}); 
```

这意味着您的代码在 DOM 完全加载时执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T10:29:27.943

很简单。尝试这个

```
$(function(){
  var ind = Math.floor((Math.random()*7)+1);
  $("div.Image:eq("+ind+")").show();
}); 
```

# joomla - 可以在不同文件中使用没有控制器的 joomla 模型吗？

> ID：15199216
> 
> 赞同：0
> 
> 时间：2013-03-04T10:18:35.540
> 
> 标签：joomla, joomla2.5

我正在开发基于 Joomla 组件的小型 Web 应用程序（移动）。是否可以在自定义文件中使用来自特定组件的方法？例如，现在要使用诸如数据库之类的核心功能，我正在使用以下内容：

```
define('_JEXEC', 1);
define('JPATH_BASE', dirname(__FILE__).'../');
define('DS', DIRECTORY_SEPARATOR);

require_once(JPATH_BASE.DS.'includes'.DS.'defines.php');
require_once(JPATH_BASE.DS.'includes'.DS.'framework.php');

$mainframe = &JFactory::getApplication('site');
$mainframe->initialise();
$this->db = &JFactory::getDbo(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:46:45.560

尝试使用以下内容。

```
define('_JEXEC', 1);
define('JPATH_BASE', realpath(dirname(__FILE__)));
require_once ( JPATH_BASE .'/includes/defines.php' );
require_once ( JPATH_BASE .'/includes/framework.php' );
require_once ( JPATH_BASE .'/libraries/joomla/factory.php' );

$db = JFactory::getDbo(); 
```

# applescript - AppleScript：尝试写入 TextEdit 文件

> ID：15199218
> 
> 赞同：3
> 
> 时间：2013-03-04T10:18:44.687
> 
> 标签：applescript, textedit

我正在尝试写入已经创建的 TextEdit 文件。该文件处于 rwxrwxrwx 模式，因此没有权限问题。

但是当我执行我的代码时，这里是错误：

```
error "Network file permission error." number -5000 from file "/Users/me/Desktop/A directory/file.txt" to «class fsrf» 
```

我的代码在这里：

```
-- Writing in the TextEdit file
set file_URLs_content to "HEEEELLOOOOOO"
tell application "TextEdit"
    set theFile to "/Users/me/Desktop/A directory/file.txt"
    set file_ref to (open for access file theFile with write permission)
    set eof file_ref to 0
    write file_URLs_content to file_ref
    close access file_ref
end tell 
```

而且我的 file.txt 还是空的，如何避免这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-19T11:07:06.423

使用 TextEdit 编写文本时避免错误的方法是记住它是一个文本编辑器。它已经知道如何创建和保存文本文档而不会产生错误。您不必使用（容易出错的）open 进行访问。您不必使用（容易出错的）shell 脚本。您所要做的就是让 TextEdit 为您制作一个包含您喜欢的任何内容的文本文档，并将其保存在您喜欢的任何地方。TextEdit 知道如何在不产生文件访问错误（如打开以供访问）或意外覆盖文件夹（如 shell 脚本）的情况下做到这一点。

```
tell application "TextEdit"
    activate
    set theDesktopPath to the path to the desktop folder as text
    set file_URLs_content to "HEEEELLOOOOOO"
    make new document with properties {text:file_URLs_content}
    save document 1 in file (theDesktopPath & "file.txt")
    close document 1
end tell 
```

这种方法的优点是编写起来更快、更容易，更不容易出错，作为输出获得的文本文件与使用 TextEdit 手动创建的文本文件具有相同的属性，并且现在可以轻松编写脚本扩展到包括其他应用程序。例如，文本内容可能来自另一个应用程序或剪贴板，文本文件可以在另一个应用程序中打开或在保存后通过电子邮件发送。

AppleScript 最基本的功能是以这种方式向 Mac 应用程序发送消息。如果要将 PNG 转换为 JPEG，则无需在 AppleScript 中编写 PNG 解码器和 JPEG 编码器，然后打开 PNG 文件进行访问并逐字节读取，然后逐字节编码 JPEG。您只需告诉 Photoshop 打开 PNG 图像并将其作为 JPEG 格式导出到特定文件位置。“open for access”命令是读取和写入您根本没有应用程序可以读取或写入的文件的最后手段。当您根本没有 Mac 应用程序来完成这项工作时，“do shell script”命令用于合并命令行应用程序，例如，您可以使用 Perl 执行正则表达式。如果您所做的只是处理文本文件，那么您不仅拥有 TextEdit，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:55:51.233

为此，您不需要 TextEdit。试试这个：

```
set the logFile to ((path to desktop) as text) & "log.txt"
set the logText to "This is a text that should be written into the file"
try
    open for access file the logFile with write permission
    write (logText & return) to file the logFile starting at eof
    close access file the logFile
on error
    try
        close access file the logFile
    end try
end try 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:52:42.550

尝试：

```
set file_URLs_content to "HEEEELLOOOOOO"
set filePath to POSIX path of (path to desktop as text) & "file.txt"
do shell script "echo " & quoted form of file_URLs_content & " > " & quoted form of filePath 
```

# java - 如何为一个 servlet 映射多个 url

> ID：15199227
> 
> 赞同：3
> 
> 时间：2013-03-04T10:19:13.993
> 
> 标签：java, struts, web.xml, struts-config

我在我的 struts Web 应用程序中用一个 servlet 映射两个 url，web.xml 中的代码部分如下。

```
<servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
      <param-name>config</param-name>
      <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param>
      <param-name>debug</param-name>
      <param-value>3</param-value>
    </init-param>
    <init-param>
      <param-name>detail</param-name>
      <param-value>3</param-value>
    </init-param>
    <load-on-startup>0</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
    <url-pattern>*.mobile</url-pattern>
  </servlet-mapping> 
```

问题是每当我提交任何表单时，它都会在 url.for 中添加 .mobile 假设表单是：

```
<html:form action="login.do">   
 <html:text property="name" />
 <html:submit >go</html:submit>                     
</html:form> 
```

它正在发送请求到：

http:myIp:8080/ProjectName/login.mobile

我的问题是为什么要添加 .mobile 而不是 .do??他们有什么办法解决吗？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T15:41:53.853

也许删除扩展名（.do/.mobile）将有助于使用

```
<constant name="struts.action.extension" value=","/> 
```

# crc32 - 将 crc32 转换为 uint8_t

> ID：15199232
> 
> 赞同：0
> 
> 时间：2013-03-04T10:19:24.977
> 
> 标签：crc32

我有一个硬件模块，可以在我正在处理的项目中很快计算出 crc，但是它返回一个 32 位数字（因为它是 crc32）。我需要将 crc 放入 uint8_t 以用于正在使用的协议格式。

我在想，因为 crc 代表 32 位多项式除法的余数，如果我简单地取最高有效字节，这相当于将余数舍入到 8 位。我知道我无法像使用 32 位 crc 那样检测错误，但它是否与在软件中执行 8 位 crc 一样好？双方的结果肯定是相同的，因为他们都可以访问相同的数据和多项式，但是该结果是否仍然具有 crc 的所有属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:01:39.403

是的，假设您在两边都抓取了最高有效字节，那么两边的结果将是相同的。注意字节序。

不，从 32 位 CRC 中挑选 8 位不会具有与 8 位 CRC 相同的属性。与真正的 8 位 CRC 相比，它在检测错误方面可能仍然非常出色。但没有那么好。为此目的优化了一个真正的 8 位 CRC。有关已完成分析的示例，请参见[Koopman 的论文](http://www.ece.cmu.edu/~koopman/roses/dsn04/koopman04_crc_poly_embedded.pdf)。

下面是使用精心挑选的 8 位多项式的 8 位 CRC 实现。

```
#include <stddef.h>

/* 8-bit CRC with polynomial x^8+x^6+x^3+x^2+1, 0x14D.
   Chosen based on Koopman, et al. (0xA6 in his notation = 0x14D >> 1):
   http://www.ece.cmu.edu/~koopman/roses/dsn04/koopman04_crc_poly_embedded.pdf
 */

static unsigned char crc8_table[] = {
    0x00, 0x3e, 0x7c, 0x42, 0xf8, 0xc6, 0x84, 0xba, 0x95, 0xab, 0xe9, 0xd7,
    0x6d, 0x53, 0x11, 0x2f, 0x4f, 0x71, 0x33, 0x0d, 0xb7, 0x89, 0xcb, 0xf5,
    0xda, 0xe4, 0xa6, 0x98, 0x22, 0x1c, 0x5e, 0x60, 0x9e, 0xa0, 0xe2, 0xdc,
    0x66, 0x58, 0x1a, 0x24, 0x0b, 0x35, 0x77, 0x49, 0xf3, 0xcd, 0x8f, 0xb1,
    0xd1, 0xef, 0xad, 0x93, 0x29, 0x17, 0x55, 0x6b, 0x44, 0x7a, 0x38, 0x06,
    0xbc, 0x82, 0xc0, 0xfe, 0x59, 0x67, 0x25, 0x1b, 0xa1, 0x9f, 0xdd, 0xe3,
    0xcc, 0xf2, 0xb0, 0x8e, 0x34, 0x0a, 0x48, 0x76, 0x16, 0x28, 0x6a, 0x54,
    0xee, 0xd0, 0x92, 0xac, 0x83, 0xbd, 0xff, 0xc1, 0x7b, 0x45, 0x07, 0x39,
    0xc7, 0xf9, 0xbb, 0x85, 0x3f, 0x01, 0x43, 0x7d, 0x52, 0x6c, 0x2e, 0x10,
    0xaa, 0x94, 0xd6, 0xe8, 0x88, 0xb6, 0xf4, 0xca, 0x70, 0x4e, 0x0c, 0x32,
    0x1d, 0x23, 0x61, 0x5f, 0xe5, 0xdb, 0x99, 0xa7, 0xb2, 0x8c, 0xce, 0xf0,
    0x4a, 0x74, 0x36, 0x08, 0x27, 0x19, 0x5b, 0x65, 0xdf, 0xe1, 0xa3, 0x9d,
    0xfd, 0xc3, 0x81, 0xbf, 0x05, 0x3b, 0x79, 0x47, 0x68, 0x56, 0x14, 0x2a,
    0x90, 0xae, 0xec, 0xd2, 0x2c, 0x12, 0x50, 0x6e, 0xd4, 0xea, 0xa8, 0x96,
    0xb9, 0x87, 0xc5, 0xfb, 0x41, 0x7f, 0x3d, 0x03, 0x63, 0x5d, 0x1f, 0x21,
    0x9b, 0xa5, 0xe7, 0xd9, 0xf6, 0xc8, 0x8a, 0xb4, 0x0e, 0x30, 0x72, 0x4c,
    0xeb, 0xd5, 0x97, 0xa9, 0x13, 0x2d, 0x6f, 0x51, 0x7e, 0x40, 0x02, 0x3c,
    0x86, 0xb8, 0xfa, 0xc4, 0xa4, 0x9a, 0xd8, 0xe6, 0x5c, 0x62, 0x20, 0x1e,
    0x31, 0x0f, 0x4d, 0x73, 0xc9, 0xf7, 0xb5, 0x8b, 0x75, 0x4b, 0x09, 0x37,
    0x8d, 0xb3, 0xf1, 0xcf, 0xe0, 0xde, 0x9c, 0xa2, 0x18, 0x26, 0x64, 0x5a,
    0x3a, 0x04, 0x46, 0x78, 0xc2, 0xfc, 0xbe, 0x80, 0xaf, 0x91, 0xd3, 0xed,
    0x57, 0x69, 0x2b, 0x15};

unsigned crc8(unsigned crc, unsigned char *data, size_t len)
{
    unsigned char *end;

    if (len == 0)
        return crc;
    crc ^= 0xff;
    end = data + len;
    do {
        crc = crc8_table[crc ^ *data++];
    } while (data < end);
    return crc ^ 0xff;
}

/* this was used to generate the table and to test the table-version

#define POLY 0xB2

unsigned crc8_slow(unsigned crc, unsigned char *data, size_t len)
{
    unsigned char *end;

    if (len == 0)
        return crc;
    crc ^= 0xff;
    end = data + len;
    do {
        crc ^= *data++;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
    } while (data < end);
    return crc ^ 0xff;
}
*/

#include <stdio.h>

#define SIZE 16384

int main(void)
{
    unsigned char data[SIZE];
    size_t got;
    unsigned crc;

    crc = 0;
    do {
        got = fread(data, 1, SIZE, stdin);
        crc = crc8(crc, data, got);
    } while (got == SIZE);
    printf("%02x\n", crc);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:39:59.387

> 双方的结果肯定是相同的，因为他们都可以访问相同的数据和多项式

**不，并非总是如此！阅读更多我的解释。**

> 但是这个结果是否仍然具有 crc 的所有属性？

**是的，CRC 仍将是 CRC。它的比例是 8 位、16 位还是 32 位都没关系。**

CRC-8 将所有消息归结为 256 个值之一。但是，如果您的消息大于几个字节，则多个输入具有相同哈希值的可能性会越来越高。

CRC-8：< 64 字节

CRC-16：< 16K 字节

CRC-32：< 512M 字节

CRC-32 为您提供了大约 40 亿个可用哈希值，因此多个输入具有相同哈希的可能性很低。

# flash - 从 html 页面更改 flash vod 电影

> ID：15199236
> 
> 赞同：2
> 
> 时间：2013-03-04T10:19:41.263
> 
> 标签：flash, wowza

我对视频点播流媒体非常陌生。我正在寻找一种机制来为我的公司实施视频点播流。我正在使用 wowza，发现我可以毫无问题地流式传输视频。

但这里的问题是，我必须在播放器中手动输入服务器和流 - 以便在内部构建 rtmp 链接。我尝试使用JS编辑字段等，但后来发现它完全在flash中，因此无法在其中输入这些值。

这通常是怎么做的？我认为我缺少对整个系统的一些重要理解。我们如何动态更新数据，以便在单击链接时 - 例如 - 视频发生变化？

非常感谢你，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:00:50.887

如果您选择继续使用 Wowza 提供的示例，则需要修改 actionscript 文件以包含您之前手动输入的服务器/流名称。

下面的链接是如何使用非 Wowza 播放器的两个示例：

[http://www.osmf.org/configurator/fmp/](http://www.osmf.org/configurator/fmp/)

[http://mediafront.org/osmplayer/#.UT4nmBy0J8E](http://mediafront.org/osmplayer/#.UT4nmBy0J8E)

# oracle11g - 收集统计信息时如何为 method_opt 指定异常

> ID：15199244
> 
> 赞同：1
> 
> 时间：2013-03-04T10:20:10.313
> 
> 标签：oracle11g

我们的数据库设置为收集模式统计信息，例如

```
method_opt => 'for all columns size auto' 
```

问题是这样的直方图也被分配给不应该生成直方图的列。有没有办法为这些列设置例外（同时为其他列保留自动大小）？

基本原理：我们的一些（索引）列是 VARCHAR2(100)，而前 50 个字符几乎相同 - 前 50 个字符中的不同值少于 10 个。当收集列统计信息时，会生成直方图。但是直方图生成只分析了 VARCHAR2 列的前 30 个字符，这导致了完全错误的直方图。（事实上​​，这些值几乎是均匀分布的。）

**编辑：**我的想法是使用类似“所有列大小自动，但列（ECID）大小为 1”之类的东西。但我不知道这是否可能，method_opt 语法对我来说不是很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:03:45.567

最终的解决方案是使用

```
exec dbms_stats.set_table_prefs('schema','table','METHOD_OPT',''for all columns size auto for columns size 1 ECID'); 
```

然后通常使用gather_schema_stats 收集统计信息。这样我就可以绕过上面提到的gather_schema_stats的method_opt的限制。当前的偏好可以通过查看

```
select * from dba_tab_stat_prefs; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:38:02.260

您可以尝试使用 skewonly 选项，该选项只会在倾斜数据上生成直方图：

```
method_opt => 'for all columns size skewonly' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:51:38.093

怎么样`REPEAT`？[http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_stats.htm#i1036456](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_stats.htm#i1036456)与*REPEAT 一样：仅在已有直方图的列上收集直方图*

# php - 使用 PHP 发送电子邮件时如何“隐藏”实际的电子邮件地址？

> ID：15199245
> 
> 赞同：2
> 
> 时间：2013-03-04T10:20:13.050
> 
> 标签：php, email, sendmail

只是一个快速的问题。基本上我有一个 PHP 脚本，它可以向我组织内的某个人发送电子邮件。这一切都很好，但有一个小“问题”。通常，有人从组织中的其他人那里收到一封电子邮件，邮件中只有他们的姓名，例如，发件人字段中的“Joe Bloggs”。但是当我从 PHP 脚本发送它时，它还包含完整的电子邮件地址，例如`Joe Bloggs <jbloggs@domain.com>`. 是否可以只显示姓名而不是电子邮件中显示的姓名和电子邮件地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:23:54.550

如果您使用的是标准 php 函数`mail()`，您可以在附加的电子邮件标头中指定外发电子邮件地址，如下所示：

```
mail("mail.to@example.com","subject" ,"body message","From: SPECIFY.THIS.ADDRESS@example.com\nContent-type: text/html"); 
```

# algorithm - 包含特定顶点的最小循环算法

> ID：15199248
> 
> 赞同：1
> 
> 时间：2013-03-04T10:20:20.193
> 
> 标签：algorithm, graph

我正在寻找一种可以找到包含给定顶点的非常基本（即最短）循环的算法。

换句话说，如果一个顶点 v1 参与两个循环，那么一个与 v1、v2、v3 和另一个 v1、v2、v4、v5、v6 一起。我希望算法给我 v1、v2、v3 循环作为输出。

有谁知道哪种算法可以做到这一点？

此外，该算法的复杂性可能是多少。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:23:55.017

从给定的顶点 v0 开始一个 bfs。一旦 bfs 考虑到与 v0 相邻的顶点 v1，并且 v0 不是 bfs 树中 v1 的父级，就停止。从 v0 到 v1 加上 (v1,v0) 边缘的找到路径是您的最短周期。由于 bfs，复杂度为 O(n+m)。

# mysql - SELECT 和 INSERT 的 OPENQUERY 有何不同？

> ID：15199249
> 
> 赞同：13
> 
> 时间：2013-03-04T10:20:22.363
> 
> 标签：mysql, sql-server, tsql, odbc, linked-server

我知道以下查询将从链接服务器中提取结果集：

```
SELECT * FROM openquery(DEVMYSQL, 
    'SELECT event_id, people_id, role_id, rank, last_updated FROM event_cast') 
```

但是，在插入时，情况是否相同？它会拉下结果集还是只获取列信息？

```
INSERT INTO openquery(DEVMYSQL, 
     'SELECT event_id, people_id, role_id, rank, last_updated FROM event_cast') 
```

如果是前者，那么这是非常低效的。我应该限制返回的结果集吗？这会影响我的`INSERT`吗？

这基本上是一个关于和的`OPENQUERY`工作原理的问题。`SELECT``INSERT`

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T20:59:00.033

不确定您尝试使用 INSERT 完成什么。

正确的语法（如果你想在远程服务器上插入）应该是

```
INSERT into openquery(MyServer, 'dbo.event_cast') values ('','') 
```

选择只会延迟您的插入检索选择查询返回的内容（无济于事），而不会给您额外的信息。此外，使用 openquery，您可以使用这种更正确的语法进行插入：

```
INSERT into myserver.mydatabase.dbo.event_Cast values('','') 
```

但是，如果您尝试将 select 检索到的值插入 LOCAL 服务器，则语法应该是：

```
INSERT into dbo.my_localtable SELECT * FROM openquery(DEVMYSQL, 'SELECT event_id, people_id, role_id, rank, last_updated FROM event_cast') 
```

是的，这句话将插入值，而不仅仅是列信息。

如果您只想在本地复制表一个简单的

```
SELECT top 1 * into new_local_event_cast FROM openquery(DEVMYSQL, 'SELECT event_id, people_id, role_id, rank, last_updated FROM event_cast');
TRUNCATE TABLE new_local_event_cast; 
```

就足够了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T00:14:12.660

在 SELECT 将返回记录的情况下，INSERT 不会返回结果集，但受影响的记录数除外。这可以通过使用 SET NOCOUNT ON 来抑制；但是，我不确定抑制是否是指可见性或实际出现的行数。

```
 INSERT INTO OPENQUERY(MYSERVER, 'SELECT [Drive_Letter] ,[MBFree],[Server] FROM [Blah].[dbo].[SQL_Drives]')
    SELECT 'X', 2, 'MyServer'

(1 row(s) affected) 
```

至于从 INSERT 返回的记录，实现这一点的唯一方法是使用 OUTPUT 子句。客户端机器将无权访问 OUTPUT INSERTED 行，因此无法返回这些行。如果您尝试运行以下命令，您将收到错误消息：

```
INSERT INTO OPENQUERY(MYSERVER, 'SELECT [Drive_Letter] ,[MBFree],[Server] FROM [BLAH].[dbo].[SQL_Drives]')
OUTPUT INSERTED.*
SELECT 'X', 2, 'MyServer'

Msg 405, Level 16, State 1, Line 1
A remote table cannot be used as a DML target in a statement which includes an OUTPUT clause or a nested DML statement.

 -- EDIT RESULTS OF PROFILER ---------------------------      

-- Statements that occured on server called through OPENQUERY
    exec sp_cursoropen @p1 output,N'SELECT [Drive_Letter] ,[MBFree],[Server] FROM [MyServer].[dbo].[SQL_Drives]',@p3 output,@p4 output,@p5 output
    select @p1, @p3, @p4, @p5

    exec sp_cursor 180150009,4,0,N'[MyServer].[dbo].[SQL_Drives]',@Drive_Letter='X',@MBFree=2,@Server='MyServer'

--Statements that occured on client
    INSERT INTO OPENQUERY(MyServer, 'SELECT [Drive_Letter] ,[MBFree],[Server] FROM [MyServer].[dbo].[SQL_Drives]')
    SELECT 'X', 2, 'MyServer' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-07T17:13:44.077

当您用于`OPENQUERY`执行`INSERT`时，它将执行第`SELECT`一个并丢弃结果。它使用结果集中的列元数据来确定如何发送`INSERT`命令。因此，您应该始终添加`where 1=0`到`SELECT`.

从 SQL Server 到 MySQL，正确的语法是：

```
insert into openquery(MYSQLDEV, 'select * from insert_test where 1=0') values ('test'); 
```

如果您在 MySQL 端激活常规查询日志，您将看到来自 SQL Server 的这些命令：

```
SET NAMES utf8
SET character_set_results = NULL
SET SQL_AUTO_IS_NULL = 0
set @@sql_select_limit=1
select * from insert_test where 1=0
select * from insert_test where 1=0
INSERT INTO `database`.`insert_test`(`column`) VALUES ('test') 
```

所以你可以看到选择被执行了两次。如果没有`where 1=0`，MySQL 服务器将返回所有行。

# javascript - sha：散列值不匹配，在不同页面上散列时

> ID：15199250
> 
> 赞同：0
> 
> 时间：2013-03-04T10:20:29.567
> 
> 标签：javascript, asp.net, sha

我正在使用 sha1 算法对密码进行哈希处理，并将其存储在数据库中。

我试过关注，在aspx页面

1. *登录.aspx*

```
 function enc()
  {
   var x=document.getElementById("<%=txtPwd.ClientID %>").value;
   var hash = CryptoJS.SHA1(x);
   alert(hash); 
   alert(typeof hash);
   return false;
  } 
```

*修改pwd.aspx*

```
 function enc()
  {
   var confirmp=$("#txtConfrimPassword").val();
   var hash = CryptoJS.SHA1(confirmp);
   alert(hash);
   document.getElementById("<%=txtConfrimPassword.ClientID%>").value = hash; 
   document.getElementById("<%=txtNewPassword.ClientID%>").value = hash; 
   return false;
  } 
```

2 次尝试： var id2 = $.sha1(String(id)); 另类也..

但在这两种情况下，登录时更改的密码都不匹配。

**观察：相同值的页面哈希值不同！**

问题：我怎样才能从两个页面中获得相同的值。或者我哪里出错了，我错过了什么吗？请指导我。

编辑：

**输出：值：abc1234**

1 登录：c9b359951c09c5d04de4f852746671ab2b2d0994

2 更改密码：da39a3ee5e6b4b0d3255bfef95601890afd80709

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:41:15.890

`da39a3ee5e6b4b0d3255bfef95601890afd80709`是空字符串的 SHA1 哈希。您的`confirmp`变量根本不包含任何密码。您可以使用任何支持控制台的浏览器进行验证：

```
var confirmp=$("#txtConfrimPassword").val();
console.log(confirmp); 
```

我的印象是你犯了一个简单的错字：

```
txtConfrimPassword
   ^^^^^^^ 
```

# java - Java 基准测试

> ID：15199254
> 
> 赞同：8
> 
> 时间：2013-03-04T10:20:37.243
> 
> 标签：java, open-source, benchmarking

我们正在使用 perlbench、pybench 和 php bench 等标准基准工具对 Perl、Php、Python 解释器进行基准测试。

现在我们需要对 JAVA 进行基准测试，发现“OLIO”套件会有所帮助。但似乎 OLIO 支持 php 和 rails。

请向我推荐一些开源的 JAVA 最佳基准测试工具。Jmeter 是我们所知道的用于负载测试的工具。

谢谢你..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T10:24:41.873

SpecJbb 用于评估服务器端 java 的性能 - [http://www.spec.org/jbb2005/](http://www.spec.org/jbb2005/)
SpecJVM 用于评估 JRE 的性能 - [http://www.spec.org/jvm2008/](http://www.spec.org/jvm2008/)

**MicroBenchmark**
JMH - [http://openjdk.java.net/projects/code-tools/jmh/](http://openjdk.java.net/projects/code-tools/jmh/)
Google Caliper - [https://code.google.com/p/caliper/wiki/JavaMicrobenchmarks](https://code.google.com/p/caliper/wiki/JavaMicrobenchmarks)

**负载测试**
Apache Jmeter - [http://jmeter.apache.org/index.html](http://jmeter.apache.org/index.html)

**CPU，内存分析**
Yourkit - [http://www.yourkit.com/overview/index.jsp](http://www.yourkit.com/overview/index.jsp)
VisualVM - [http://visualvm.java.net/](http://visualvm.java.net/)

# powershell - 从批处理文件运行远程 powershell 脚本

> ID：15199258
> 
> 赞同：0
> 
> 时间：2013-03-04T10:20:51.643
> 
> 标签：powershell, batch-file, powershell-2.0

我想让我的批处理文件运行远程 powerhell 脚本。

我有 Powershell \ip\Myscript.ps1

但它询问我是否要运行这个远程脚本。我想绕过这个。带有 -confirm:$false

我怎样才能批量使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:33:57.993

你在这里有几个选择。

1.  将 .ps1 文件复制到本地目录，然后通过 Powershell 调用它。一个丑陋的 hack，但如果不能更改执行策略，有时是必要的。
2.  签署 .ps1 文件。后背一阵巨大的疼痛。
3.  告诉 Powershell 不要担心执行策略。简单而危险的方法：powershell -executionpolicy unrestricted \\server\share\someScript.ps1。

# android - .epub 文件如何在 TextView 上显示？

> ID：15199259
> 
> 赞同：4
> 
> 时间：2013-03-04T10:20:53.860
> 
> 标签：android, epub

我解析 epub 文件，但我不明白我可以在 TextView 中设置 epub 吗？或者如何在 TextView 中获取文本内容 EPUB？

```
 try {
                    InputStream is = getAssets().open("books/testbook.epub");  
                    Book book = new EpubReader().readEpub(is);  
                    Metadata metadata = book.getMetadata();   
                    String bookInfo = "："+metadata.getAuthors()+  
                            "\n ："+metadata.getPublishers()+  
                            "\n ：" +metadata.getDates()+  
                            "\n ："+metadata.getTitles()+  
                            "\n ："+metadata.getDescriptions()+  
                            "\n ："+metadata.getLanguage()+  
                            "\n\n ：";  
                    Log.e("epublib", bookInfo);
                    logTableOfContents(book.getTableOfContents().getTocReferences(), 0);

            } catch (IOException e) {
                Log.e("epublib", e.getMessage());
            }

  private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
            if(tocReferences== null ){
                return;
            }
            for(TOCReference tocReference:tocReferences){
                StringBuilder tocstring=new StringBuilder();
                for(int i=0;i<depth;i++)
                {
                    tocstring.append("\t");
                }
                HashMap<String, String> map = new HashMap<String, String>();
                String k=   tocstring.append(tocReference.getTitle()).toString();
                ArrayList<HashMap<String, String>> list1 = new ArrayList<HashMap<String, String>>();
                list1.add(map);
                 String t=k;
                 Log.i("epublib", tocstring.toString());
                 logTableOfContents(tocReference.getChildren(), depth + 1);

            }           
        } 
```

# git - 从一台计算机管理多个 github 帐户

> ID：15199262
> 
> 赞同：4
> 
> 时间：2013-03-04T10:21:05.327
> 
> 标签：git, github

我有一台带有单个帐户的计算机，由许多学生共享，我们需要能够推送到 github。我已经设置了所有内容，除了获取推送/提交以与单个用户关联。

我对此有点困惑，因为它是组织中的私人仓库，我原以为会在接受推送之前检查凭据，但显然它只是让任何东西通过。

我整晚都在谷歌上搜索，但我还没有找到一个似乎适用于我的情况的答案。我能找到的所有解决方案/帮助似乎都在告诉人们如何*删除*凭证要求，而这在这里更可取。

作为记录：

```
?> git remote -v
origin https://github.com/(repo here) 
```

所以用户名不在推送 url 中，它使用 https 而不是 ssh，这正是我想要的（我尝试设置多个 ssh 密钥，但我认为这里不可能）。

用户也没有在任何地方的配置文件中设置。最初 user.email 被设置为附加到我的个人 github 帐户的电子邮件帐户，所有推送都出现在*我的*名字下而不需要凭据，但我删除了该行，现在所有内容都出现在名称“shared-laptop”（user.name）下带有一个 BS 电子邮件地址，它似乎刚刚组成。

我考虑编写一个 shell 脚本来在每次有人开始工作时设置一些变量，但学生必须记住运行脚本（他们不会），我不相信它会解决问题。

如有必要，当前设置（提交显示为“共享笔记本电脑”）是可行的，但我认为我们希望每个人都可以在自己的帐户下提交。所以我想知道的是，**我可以设置 git/github 在提交和推送时提示输入用户名和密码吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-09T12:55:44.167

@dunvi 这是您需要做的。

```
git config --local user.name "Your Name"
git config --local user.email "Your Github Email" 
```

如果您需要进一步的帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:49:02.030

如果你想以不同的用户身份提交，你可以添加`--author`到`git commit`命令中，检查：

[你如何以不同的用户提交代码？](https://stackoverflow.com/questions/3696938/git-how-do-you-commit-code-as-a-different-user)

如果您想以其他用户身份推送，您可以使用 https 进行推送，因为它会要求您提供凭据，请检查：

[如何使用不同的用户名推送到 GitHub？](https://stackoverflow.com/questions/13103083/how-do-i-push-to-github-under-a-different-username)

# ruby-on-rails - Rails 3.2：如何访问辅助模块中的当前模型实例？

> ID：15199264
> 
> 赞同：0
> 
> 时间：2013-03-04T10:21:12.783
> 
> 标签：ruby-on-rails, module, helper

在我的 rails 模型`Post.rb`中，我设置了以下方法：

```
 def category_names(seperator = ", ")
    categories.map(&:name).flatten.join(seperator).titleize
  end

  def publish_date
    read_attribute(:publish_date).strftime('%A, %b %d')
  end 
```

我想将这些移到`PostsHelper`助手下的模块中。但是当我这样做时会出现无方法错误，因为我猜对的引用`self`丢失了。

那么我该如何解决这个问题呢？辅助模块是这些方法的错误位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:33:59.907

如果我没记错的话，辅助方法主要用于视图。

我确定的是您的辅助方法超出了模型的范围，这意味着您需要将要使用的属性传递给它们。例子：

```
 def category_names(categories, seperator = ", ")
    categories.map(&:name).flatten.join(seperator).titleize
  end 
```

并在您看来：

```
category_names @post.categories 
```

如果您发现自己编写的“帮助”方法并非专门用于您的视图，您可以创建一个服务对象并将它们包含在您的模型中。

**编辑：服务对象**

你可以在“app”目录下创建一个“services”目录并在那里创建你的类。

让我给你举个例子。我有一个 User 模型类，我想将所有与密码相关的方法分组到 UserPassword 服务对象中。

用户等级：

```
class User < ActiveRecord::Base
  include ::UserPassword
  ...
end 
```

UserPassword 服务对象：

```
require 'bcrypt'

module UserPassword
  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

  module ClassMethods
    def authenticate(email, password)
      user = find_by_email email
      if user and user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
        user
      end
    end
  end

  def self.included(base)
    base.extend(ClassMethods)
  end
end 
```

所以我的用户*实例对象*（即`u = User.first`）可以调用`u.encrypt_password`，我的用户*类*可以调用`User.authenticate`。

也许还有其他方式，但我发现它灵活且易于编写和维护:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:55:06.493

助手总是用来帮助视图，但是如果你希望你的模型是干净的并且保持不相关的方法是分开的，请尝试在 Rails 3 中使用关注点。默认情况下，关注目录将存在于 Rails 4 中。

DHH 也有一篇不错的博文。

[http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns](http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns)

# javascript - 检查 d3 函数的参数值

> ID：15199266
> 
> 赞同：2
> 
> 时间：2013-03-04T10:21:17.550
> 
> 标签：javascript, json, d3.js, firebug, force-layout

我想从此代码片段中检查函数中“d”参数的值：

```
var force = force = d3.layout.force()
    .nodes(json.nodes)
    .links(json.links)
    .linkDistance(function (d){return d;}) //I need to know the "d" value to decide what return
    .size([width, height])
    .start(); 
```

我正在使用萤火虫，但我无法进入该功能。我试图在函数中添加警报，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:40:41.903

d3 文档为您提供了参数：

# force.linkDistance([距离])

如果指定了距离，则将链接节点之间的目标距离设置为指定值。如果未指定距离，则返回布局的当前链接距离，默认为 20。如果距离为常数，则所有链接的距离相同。否则，如果距离是一个函数，则对每个链接（按顺序）评估该函数，传递链接及其索引，并将 this 上下文作为强制布局；然后使用该函数的返回值来设置每个链接的距离。每当布局开始时，都会评估该函数。通常，距离以像素为单位；但是，单位相对于布局的大小是任意的。

>

因此，如果参数是函数，则第一个参数是链接，第二个参数是链接的索引。在应用函数之前，您不应该忘记将数据与强制布局相关联。

我在这里有一个例子：

```
force
    .nodes(json.nodes)
    .links(json.links);

    force.linkStrength(function(d,i) {return (json.links[i].isMyLeaf ? .01: 1);}); 
```

在我的 json 文件中，我为每个链接定义 isMyLeaf。

# html - 我可以制作一个行数高的可滚动表吗？

> ID：15199269
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:21:21.100
> 
> 标签：html, html-table

我有一张表的 colspan 最多为 50，我想在 600x200 的框架中显示它。这可能吗？你可以在哪里滚动框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:23:52.163

是的，这是可能的。你可以这样做。

将您的表格放入 div 并设置该`overflow:auto`div的属性

# twitter-bootstrap - 当跨度包含其他元素时，如何在 Bootstrap 中的跨度内居中一个元素

> ID：15199270
> 
> 赞同：0
> 
> 时间：2013-03-04T10:21:23.517
> 
> 标签：twitter-bootstrap

我正在使用最新的响应式引导程序。

所以说我在一个跨度内有多个元素，我将如何在该跨度内居中一个元素？

我的测试站点在[shiftdd.com](http://www.shifteddd.com)

我目前将信息图标与 10 英镑的文本分开，但希望它们在同一个范围内。我将如何将 10 英镑的文本居中并将信息图标略微填充到右侧。我试过以分页为中心等等，但它们似乎只直接在跨度上工作，而不是跨度内的单个元素。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:29:05.480

我认为嵌套你的跨度可以工作。使用小跨度。请参见下面的示例：

```
<div class="span6">
        Fluid 6
        <div class="row-fluid">
          <div class="span6">Fluid 6</div>
          <div class="span6">Fluid 6</div>
        </div>
      </div> 
```

这个链接很有用。[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

# oracle - 在 Hibernate Criteria 中使用 ORACLE rowId

> ID：15199273
> 
> 赞同：2
> 
> 时间：2013-03-04T10:21:31.817
> 
> 标签：oracle, hibernate, hibernate-criteria, rowid

我有 ORACLE DB 和 2 个表。我需要从 table1 内部连接 ​​table2 中选择行并按 ORACLE RowID 列排序。要选择我使用标准查询。要按我使用的语句添加订单

```
criteria.addOrder(Order.asc("this.rowId")); 
```

在映射 RowId 看起来像

```
<property name="rowId" column="ROWID" insert="false" update="false"/> 
```

但是hibernate会生成错误的sql查询，例如

```
select this_.docId as attr0_, this_.name as attr1_ from table1 this_ inner join table2 t2_ on this_.docId=t2_.docId order by ROWID asc 
```

休眠从查询中删除别名“this”。因为 ORACLE 中的所有表都有 ROWID 列，所以我们有 oracle 错误 ORA-00918

我如何通过休眠条件编写正确的查询以按 oracle RowId 列排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:49:21.260

Hibernate 认为 rowid 是一个 oracle 函数，但它是一个列标识符。要说休眠，rowid 是列名，我们需要将休眠映射编写为

```
<property name="rowId" column="`ROWID`" insert="false" update="false"/> 
```

# relational-database - 使用星型模式数据仓库进行报告与分析

> ID：15199274
> 
> 赞同：1
> 
> 时间：2013-03-04T10:21:36.153
> 
> 标签：relational-database, olap, pentaho, cube, star-schema

我正在做一个使用 pentaho 的 BI 项目。

我的 DW 将被建模为星型模式。我知道，对于分析部分，我们需要从这个星型模式（关系 DW）开始，并将多维数据集设计为模式工作台。至此，分析工具可以做多维请求

对于报告部分，它是否也需要了解多维数据集，或者我可以在星型关系 DW 上进行正常请求吗？

这是好事还是坏事？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:30:11.397

多维数据集用于 OLAP，它是与数据透视表的交互式分析

您的报告工具（假设它不是 OLAP）应该直接与数据仓库对话。

# ruby-on-rails - 是否可以使用carrierwave 仅重新创建特定版本？

> ID：15199278
> 
> 赞同：3
> 
> 时间：2013-03-04T10:22:01.597
> 
> 标签：ruby-on-rails, ruby

我使用carrierwave并存储原始图像加上3（让我们称之为`thumbnail`，`crop_small`和`crop_big`）其他版本。`thumbnail`具有相同的比例，但尺寸更小，其他的被裁剪。复制的版本具有相同的图像部分，并且大小不同。

裁剪后（我从前端获得 x、y、宽度和高度），我只想用新信息重新创建裁剪后的版本，因为缩略图不会改变。

这在载波中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:43:49.233

似乎您可以将参数传递给 recreate_versions！指定要重新创建的版本。

> 您可能会遇到想要追溯更改版本或添加新版本的情况。您可以使用 recreate_versions！从基础文件重新创建版本的方法。这使用了一种天真的方法，如果没有作为参数传递，它将重新上传和处理指定版本或所有版本。

实际上我也有同样的问题，因为我认为你不能这样做，但事实证明你可以。

# android - baseAdapter 类中的上下文

> ID：15199281
> 
> 赞同：2
> 
> 时间：2013-03-04T10:22:10.683
> 
> 标签：android, baseadapter, android-context

有没有办法`context`在`BaseAdapter`课堂上上课`getApplicationContext()`？

我需要这个，因为我要从 url 加载图像。我在这里使用`context`：

这是一个扩展的类`BaseAdapter`

```
ImageLoader imgLoader = new ImageLoader(getApplicationContext()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:24:27.660

扩展/实现时将其传递给构造函数：

```
public class MyAdapter extends SomeBaseAdapter{
  private final Context mcontext;

  public MyAdapter(Context c){
    mContext = c;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T16:49:42.310

您可以在适配器构造函数中传递对 Context 的引用并将其存储，也可以直接从方法中的父级引用它`getView()`

```
public class ToDoListAdapter extends BaseAdapter {
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     //inflate layout
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-21T14:29:32.167

您可以尝试实例化一个变量来带来这样的上下文内容：

在 getView() 视图视图 = LayoutInflater.from(parent.getContext()).inflate(R.layout.itemtutor, null);

并创建一个上下文变量： Context mycontext = view.getContext();

# python - 列表理解中的 Python if 语句

> ID：15199282
> 
> 赞同：1
> 
> 时间：2013-03-04T10:22:15.420
> 
> 标签：python, if-statement, for-loop

我有这行代码：

```
bitext = [[sentence.strip().split() 
           for sentence in pair if len(sentence) < 100] 
          for pair in zip(open(c_data), open(e_data))[:opts.num_sents]] 
```

`c_data`是带有中文句子
`e_data`的文件 是带有英文句子的文件。
`bitext`应该是一个包含成对的英文和中文句子的列表，它们是彼此的翻译。

由于两个数据文件都很大，
我想通过只考虑低于一定长度的句子来降低代码的复杂性。长度以字符为单位。

例如，
我在这里将长度指定为`100`. `:opts.num_sents`是一个变量，表示应考虑数据文件中的句子数量。

**问题/错误**
如果一个中文句子是 95 个字符，而一个英文句子是 105 个字符，`bitext`则只会用中文句子更新。
但我希望代码只添加一对句子，如果它们都在规定的长度之下。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:29:39.600

是时候打破这个单行了：

```
def tokenize(sentence):
    return sentence.strip().split()

def sentence_pairs(c_data, e_data):
    for chinese, english in zip(open(c_data), open(e_data))[:opts.num_sents]:
        if len(chinese) < 100 and len(english) < 100
            yield tokenize(chinese), tokenize(english) 
```

`yield`关键字变成了一个生成器`sentence_pairs`。如果只对结果进行迭代，这是一种更简单的编写方式：

```
def sentence_pairs(c_data, e_data):
    results = []

    for chinese, english in zip(open(c_data), open(e_data))[:opts.num_sents]:
        if len(chinese) < 100 and len(english) < 100
           results.append((chinese, english))

    return results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:27:55.550

首先，重写您的代码，使其易于理解！列表推导很棒，但是当它们消失在页面末尾时，它们会变得非常难以理解。

```
bitext = [[sentence.strip().split() for sentence in pair if len(sentence) < 100] for pair in zip(open(c_data), open(e_data)) [:opts.num_sents]] 
```

与（基本上）相同

```
bitext = []
for i, pair in enumerate(zip(open(c_data), open(e_data))):
    if i < opts.num_sents:
        sentence_pair = []
        for sentence in pair:
            if len(sentence) < 100:
                sentence_pair.append(sentence.strip().split())
        if len(sentence_pair) > 1:  # ie both sentences are < 100
            bitext.append(sentence_pair) 
```

现在，您要添加带有 length 的句子`> 100`。你可以看到这条线

```
if len(sentence) < 100: 
```

正在防止这种情况发生，因此请更改 100。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:30:51.857

我认为您正在尝试做的可能是这样的：

```
bitext = [[sentence.strip().split() for sentence in pair] 
  for pair in zip(open(c_data), open(e_data))[:opts.num_sents] if all(len(s) < 100 for s in pair)] 
```

这在列表理解中非常难看，我建议您使用此处建议的其他方法之一。

# java - 如何在不影响原始 JPanel 的情况下更改 JPanel 属性？

> ID：15199284
> 
> 赞同：2
> 
> 时间：2013-03-04T10:22:21.287
> 
> 标签：java, swing, background, pdf-generation, jpanel

我有一个 Java 桌面应用程序，它在某些时候显示一个带有 GridBagLayout 的 JPanel 和网格内的其他 JPanel。此JPanel 以某种颜色显示。我想要的是将此 JPanel 导出为另一种颜色的 PDF（我正在使用 iText）。导出没有问题（PDF 是使用原始颜色的 JPanel 生成的），但我不确定在 PDF 上更改 JPanel 颜色的正确方法。

我的第一种方法是将原始 JPanel 的背景颜色设置为 PDF 上的颜色。我有一个实用类来使用接收 JPanel 的方法生成我的 PDF，在这个方法上，我制作了 jPanel.setBackgroundColor。这行得通，但问题（对大多数人来说可能很明显）是它也改变了应用程序上显示的原始 JPanel。我认为通过 JPanel 调用此方法将是 Java 值传递。经过一番阅读，我现在明白它确实是传值，但是指向对象JPanel的指针的值，而不是真正的对象，因此改变了它的属性，也改变了原来的。

另一种方法是克隆原始的 JPanel。但后来注意到 JPanel 不可克隆。还想过在新的 JPanel 上重新创建原始 JPanel，但它变得太复杂了。

因此，我想就哪种方式是正确的方式提出一些意见。

非常感谢您提前。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:10:20.603

一个简单但略有不同的解决方案是在面板上显示另一个面板，然后再将其显示在 GUI 上和打印之前。如果您使用不同的面板进行 GUI 和打印，您可以使用两种不同的背景颜色（以及不同的其他设置）。当然，这不是对所述问题的严格解决方案，但可能是一个相当好的解决方法。

# javascript - 在htmll5画布中加载所有颜色的速度非常慢

> ID：15199286
> 
> 赞同：1
> 
> 时间：2013-03-04T10:22:32.217
> 
> 标签：javascript, html, performance, canvas

我正在尝试制作颜色工具。所以我尝试在画布中显示颜色。但问题是，它加载非常缓慢。这是我的代码

```
 var l=0

  var ctx = document.getElementById('color').getContext('2d');
  for (var i=0;i<125;i++){
    for (var j=0;j<124;j++){
        for(var k=0;k<125;k++){
      ctx.fillStyle = 'rgb(' +i*2+ ',' +j*2 + ','+k*2+')';
      l=i+k; 
      ctx.fillRect(l*1,j*1,1,1);
    }
    }   
  } 
```

我已经对它进行了测试，firefox 和 crome。两者都表现出相同的行为。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:37:34.220

您应该已经预先计算了图片（正如其中一条评论所建议的那样），然后只读取这张图片中的位置。从中您可以对 RGB 中的颜色进行逆向工程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:29:37.327

首先，您的算法基本上是错误的。您正在计算 3d 空间 (ijk) 中的颜色并将其映射到 2d 空间 (l, j)。

l 变量的每个值都计算了多次，只有最后一个是可见的 (i=0 k=100 -> l=100 ; 1=1 k=99 > l=100; i=2 k=98 > l= 100 ...

您应该事先决定什么颜色去哪里，并且只有 2 个循环而不是 3 个（可能这里最常见的决定是去一个 hsl 空间，省略 l 并在 h 和 s 上执行循环。

另一个重大改进是直接设置像素而不使用fillrect。符合以下条件的东西：

```
var imgData=ctx.createImageData (125,125);

accesing pixels

ctx.putImageData(imgData,0,0); 
```

# ruby-on-rails - 使用carrierwave为不同型号设置不同的存储目录

> ID：15199287
> 
> 赞同：0
> 
> 时间：2013-03-04T10:22:37.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, rmagick

我有model1和model2。我需要将两个模型的图像上传到两个不同的目录中。现在我的 image_uploader 是：

```
class ImageUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick

  storage :file

  def store_dir
    "uploads/images"
  end
end 
```

model2 的图片应该存储在uploads/images2 中。我该如何定义这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:38:53.350

抱歉，这个问题不是很聪明。答案似乎是创建第二个上传者

rails g 上传器 model2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:42:44.097

如果您的上传器之间唯一不同的是 store_dir 函数，那么您不需要创建另一个上传器（尽管您可以）。在您的上传器中，您可以访问模型，因此您可以执行以下操作：

```
def store_dir
    if model.class==Model1
        "upload/images1"
    elsif model.class==Model2
        "upload/images2"
    else
        "upload/images"
    end
end 
```

# bash - bash - 从脚本文件启动时无法识别 tshark 命令

> ID：15199288
> 
> 赞同：1
> 
> 时间：2013-03-04T10:22:48.307
> 
> 标签：bash, tshark

我正在尝试编写一个简单的 bash 文件，能够捕获如下所示的 Wi-Fi 流量：

```
STRING1="tshark -i 2 -a duration:5 -w <path of output.pcap>"
$STRING1
echo "'Wi-Fi' captured"

STRING2="tshark -r <path of output.pcap> -T fields -e frame.number -E header=y > <path of output.csv>"
echo $STRING2
$STRING2 
```

第一个命令 STRING1 被正确处理并创建了 output.pcap。启动 STRING2 时出现错误`tshark: Syntax error.`。但是，如果我只是将 STRING2 命令复制并粘贴到终端中，一切正常。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:49:37.360

Shell 语法（重定向运算符、管道等）在词扩展之前进行解析，因此您的输出重定向将作为参数传递给`tshark`.

```
STRING2="tshark -r <path of output.pcap> -T fields -e frame.number -E header=y"
echo $STRING2
$STRING2 > <path of output.csv> 
```

# ios - 如何在 iOS 中使用 for 循环以编程方式添加 UIButton？

> ID：15199291
> 
> 赞同：0
> 
> 时间：2013-03-04T10:22:51.160
> 
> 标签：ios, uiview, uibutton

我想使用 for 循环以编程方式创建 15 个 UIButton。我想用行和列来排列像矩阵这样的按钮，比如 3 行和 5 列。按钮高度为 50，宽度为 80。我可以设置 y、width、height 坐标。但我只面临x坐标的问题。告诉我设置 x 坐标的逻辑。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:40:57.347

```
 float x = 10;
    float y = 10;
    float width = 50;
    float height = 50;
    for(int i =0;i<15;i++)
    {
        UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btn setFrame:CGRectMake(x, y, width, height)];
        [btn setTitle:[NSString stringWithFormat:@"B%d",i+1] forState:UIControlStateNormal];
        [self.view addSubview:btn];

        x = x + width + 20;

        if((i+1)%3==0)
        {
            x = 10;
            y = y + height + 20;
        }
    } 
```

只需替换 x 和 y 并在上面的代码中设置高度和宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:30:20.837

```
int row = 0;
int column = 0;
for (int i = 0; i < 15; i++)
{
    if((row%3 == 0) && (row > 0))
    {
        row = 0;
        column++;
    } 
    else{
        row++; 
    }
    CGRect btnFrame = CGRectMake(row*80+10, column*50+10, 80, 50);//your button frame
    UIButton *btnTemp = [UIButton buttonWithType:UIButtonTypeCustom];
    [btnTemp setFrame:btnFrame];
    [self.view addSubView:btnTemp];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:29:36.590

干得好：

```
CGFloat marginX = 10.f;
CGFloat marginY = 5.f;
CGRect buttonFrame = CGRectMake(0., 0., 80., 50.f);

for(NSUInteger row = 0; row < 5; row++) {
    for(NSUInteger column = 0; column < 3; column++) {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = buttonFrame;
        //... more button settings

        [self.view addSubview:button];
        buttonFrame.origin.x += marginX;
    }

    buttonFrame.origin.x = 0.;
    buttonFrame.origin.y += marginY;
} 
```

# java - Java：私有内部类合成构造函数

> ID：15199292
> 
> 赞同：16
> 
> 时间：2013-03-04T10:22:52.083
> 
> 标签：java, inner-classes

我有`Outer`一`private Inner`堂课。

在我的`Outer`类方法中，我将类实例化`Inner`如下：

```
Outer outer = new Outer();
Inner inner = outer.new Inner(); 
```

编译器将此代码转换为：

```
Outer outer = new Outer();
Inner inner = new Inner(outer, null); 
```

使用反射表明`Inner`该类具有以下合成构造函数：

```
private Outer$Inner(Outer)
Outer$Inner(Outer,Outer$Inner) 
```

由于`Inner`类是`private`，编译器将`private`构造函数添加到它，因此没有人可以实例化该类。但显然`Outer`该类应该能够实例化它，因此编译器添加了另一个包私有构造函数，该构造函数又调用私有构造函数。此外，由于包私有构造函数`$`的名称中包含该构造函数，因此普通 Java 代码无法调用它。

问题：为什么要合成一个私有构造函数和一个包私有构造函数？为什么不只合成包私有构造函数并完成它呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T06:03:56.703

如果你写这样的代码，

```
public class Outer {
      private class Inner {}
} 
```

你会注意到只有一个构造函数`private Outer$Inner(Outer)`

[JLS 的第 8.8.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)节要求这个构造函数，它说如果没有定义构造函数，则必须生成默认构造函数，在这种情况下，默认构造函数必须是私有的，

> 在类类型中，如果类被声明为 public，则默认构造函数被隐式赋予访问修饰符 public（第 6.6 节）；如果该类被声明为受保护，则默认构造函数被隐式赋予访问修饰符 protected（第 6.6 节）；如果该类被声明为私有，则默认构造函数被隐式赋予访问修饰符 private（第 6.6 节）；否则，默认构造函数具有没有访问修饰符隐含的默认访问权限。

但是，当您使用以下代码在 Outer 中实例化 Inner 的实例时，

```
public class Outer {
    private class Inner {}
        public String foo() {
            return new Inner().toString(); 
        }
} 
```

编译器必须生成一个 Outer 可以合法调用的构造函数（你不能合法调用私有默认构造函数，因为它是私有的）。所以编译器必须生成一个新的合成构造函数。根据[JLS 的第 13.1 节，新的构造函数必须是合成的](http://docs.oracle.com/javase/specs/jls/se5.0/html/binaryComp.html#13.1)

> 编译器引入的任何在源代码中没有相应构造的构造都必须标记为合成，但默认构造函数和类初始化方法除外。

第二个构造函数在源代码中没有对应的构造，所以这个新的构造函数必须是合成的。仍然必须生成第一个私有构造函数，因为 JLS 需要私有默认构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T10:20:34.367

[这不是一个答案，我认为sbridges](https://stackoverflow.com/a/15287730/829571)已经很好地涵盖了这个答案。这只是一个产生您描述的行为的工作示例：

```
public class Outer {
    private class Inner {
    }

    public static void main(String[] args) {
        printConstructors();

        //only one constructor is printed but two would appear if you 
        //uncommented the line below

        //new Outer().new Inner();
    }

    private static void printConstructors() {
        Constructor[] constructors = Outer.Inner.class.getDeclaredConstructors();
        for (Constructor c : constructors) {
            System.out.println(c.toGenericString());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:33:25.253

最可能的答案是尊重您在源代码中声明的内容。这样做仍然允许在声明时通过反射使用私有构造函数。

这也避免了检查是否在`Inner`类中实际调用了私有构造函数。

# google-maps-android-api-2 - 无法为 android v2 的 google maps api 绘制正确的路线

> ID：15199294
> 
> 赞同：0
> 
> 时间：2013-03-04T10:23:03.137
> 
> 标签：google-maps-android-api-2

我无法使用新版本的 api 在两个地方之间绘制正确的路线？..经过大量研究后，我发现通过使用方向 api 之外的折线数据会对我有所帮助，而且确实如此我能够画出来。但是它通过添加一条直线来避免轻微的转弯。我怎样才能画出正确的路径？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:35:08.160

尝试这个，

```
 final Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr=" + source_lat
+ "," + source_lon + "&daddr=" + destination_lat + ","+ destination_lat));
                intent.setClassName("com.google.android.apps.maps",
                        "com.google.android.maps.MapsActivity");
                ((Activity) this).startActivity(intent); 
```

# selenium - 操作方法：使用 Selenium 在 Firefox 中关闭 onbeforeunload 的 Handel 标准对话框

> ID：15199297
> 
> 赞同：4
> 
> 时间：2013-03-04T10:23:04.810
> 
> 标签：selenium, onbeforeunload, confirm

我必须用 Selenium 测试一个 Web 应用程序（实际上我在 Java 中使用它）。

离开页面时有一个确认对话框，我需要在 Selenium 中处理它，1\. 确认框我可以轻松处理，但 Firefox 会抛出和 2 带有标准消息的确认框，我不知道如何打开它或用 Selenium 处理它。

```
window.onbeforeunload = onEditorClose;
          function onEditorClose() {
                msg = "Möchten Sie den Editor schließen?";
                return confirm(msg);
            } 
```

我有一些可能的解决方案，例如删除 1\. 确认并仅显示标准消息，但即使存在问题，Selenium 似乎也无法处理标准对话框：O。

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:16:23.350

我很容易解决了这个问题，我只是用 selenium.runScript(); 覆盖了这个函数。

```
selenium.runScript("window.onbeforeunload = null;"); 
```

因此，在窗口关闭之前，onbeforeunload 设置为 null 并且在关闭时不会发生任何事情：P。

对我来说没问题，因为我不需要测试onbeforeload。

# php - 从循环调用的模型中获取数据

> ID：15199298
> 
> 赞同：0
> 
> 时间：2013-03-04T10:23:07.877
> 
> 标签：php, codeigniter

我在 CodeIgniter 中有一个控制器函数，如下所示：

```
$perm = $this->job_m->getIdByGroup();
foreach($perm as $pe=>$p)
{
    $pId  =  $p['id'];
    $result = $this->job_m->getDatapermission($pId);
}

$data['permission'] = $result; 
```

我需要做的是在视图中列出结果中的数据，但是在使用此方法时我只得到最后一个值。如何将所有结果传递给视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:24:43.287

将其存储在一个数组中。像这样：

```
foreach($perm as $pe=>$p){
   $result[] = $this->job_m->getDatapermission($p['id']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:32:35.633

因为 $result 不是数组...

尝试这个：

```
$result=array();
foreach($perm as $pe=>$p)
{
    $pId  =  $p['id'];
    $result[] = $this->job_m->getDatapermission($pId);
}

$data['permission'] = $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:57:42.583

## 笔记：

我的答案使用 a`counter`在需要时启用单个组结果的显示。

根据您需要循环显示$result 的值来猜测，它可能是$query->result() 返回的数组或对象。事情可能有点复杂。

示例：如果 $perm 是 5 个项目（或组）的数组，则计数器分配键 1 - 5 而不是 0 - 4 就像 [] 一样，这可能会产生误导。使用第一个视图示例，如果需要，您可以通过 url 段传递它来选择显示单个组值。使代码更加灵活和可重用。例如，您只想显示第 2 组的返回值，在我的示例中，$result[2] 将执行此操作，否则下一个代码将运行。请参阅我在代码中的评论。

```
$perm = $this->job_m->getIdByGroup();
$counter = 1; 
foreach($perm as $pe=>$p)
{
    $pId  =  $p['id'];
    $result[$counter] = $this->job_m->getDatapermission($pId);
$counter++;
}

$data['permission'] = $result; 
```

### 如上所述注意：

我添加了一个计数器或键，以便您针对特定级别。如果这些组是：男人、女人、男孩、女孩、儿童；您会知道女性是第二组 (2) 如果您希望仅显示该组的值，则无需重写下面的代码。只需传递组密钥就像按顺序告诉它一样容易。要不受限制地显示所有循环，请使用第二个视图示例。要同时使用两者，请为此使用 if 语句。

```
###To access it you could target a specific level like 

if(isset($permission)){
    foreach($permission[2] as $key => $value){
        echo $value->columnname;
    }

###To get all results:

    foreach($permission as $array){
        foreach($array as $key => $value){
            echo $value->columnname;
        }
    }
} 
```

# jquery-datatables - 数据表 colspan 排序

> ID：15199299
> 
> 赞同：4
> 
> 时间：2013-03-04T10:23:08.123
> 
> 标签：jquery-datatables

引入 colspan 或 rowspan 时，Datatable jquery 插件会出错。有没有其他方法可以通过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T17:40:59.987

只需使用一些 jQuery 手动完成：

```
$(function(){
  var tableRows = $('#myDatatable tbody tr');
  $.each(tableRows, function (index, value) {
    var cells = $(value).find('td');
    $(cells[1]).remove(); // for example I want to remove cell 1
    $(cells[0]).attr('colspan','2'); // for example I want to set colspan = 2 for cell 0 
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:18:51.320

数据表不支持 colspan。您可以在表格中添加任何格式的详细信息行，例如单击展开行。

[数据表 Colspan](http://datatables.net/forums/discussion/14/datatables-and-colspan/p1/)

[行详细信息](http://www.datatables.net/examples/api/row_details.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T18:37:38.223

Datatable 不支持 colspan，但我们总是使用 CSS 和 javascript 进行欺骗。这是我将调用跨度与数据表一起使用的技巧，但是您必须失去搜索和排序功能:(。

假设您有一张类似下面的表格：

|标头1|标头2|标头3|
|数据 11|数据 12|数据 13|
|Col SPAN 第一名。行 |
|数据 21|数据 22|数据 23|
|第二行的 Col SPAN |
|数据 31|数据 32|数据 33|
|Col SPAN 第三名。行 |

```
<table>
<thead>
<tr> <th> Header1</th>  <th> Header2</th> <th> Header3</th> </tr>
</thead>
<tbody>
<tr><td>Data 11</td><td>Data 12</td><td>Data 13</td></tr>
<tr><td >Col SPAN For 1st.  Row</td></td></td></tr>
<tr><td>Data 21</td><td>Data 22</td><td>Data 23</td></tr>
<tr><td colspan=3>Col SPAN For 2st.  Row</td></td></td></tr>
</tbody> 
```

修复数据表错误并隐藏所有不必要的行

```
$(document).ready(function() {
            \$('#example').dataTable( {
                "bSort" : false,
                "bFilter": false,
                "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    if((iDisplayIndex + 1)%2 == 1)
                    {
                        \$('td:eq(0)', nRow).attr('colspan',3);
                        for(var i =1; i<=2;i++){
                        \$('td:eq('+i+')', nRow).attr('colspan',0);
                        \$('td:eq('+i+')', nRow).hide();
                        }                       
                    }
                    return nRow;
                    }
            } );
        } ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-28T12:48:43.873

如果您没有从服务器端获取数据，那么您可以使用此代码。

```
jQuery.fn.dataTableExt.oApi.fnFakeRowspan = function ( oSettings, iColumn, bCaseSensitive ) {
  for(var i in oSettings.aoData){
    var pageSize = oSettings._iDisplayLength;
    var oData = oSettings.aoData[i];
    var cellsToRemove = [];
    for (var iColumn = 0; iColumn < oData.nTr.childNodes.length; iColumn++) {
      var cell = oData.nTr.childNodes[iColumn];
      var rowspan = $(cell).data('rowspan');
      var hide = $(cell).data('hide');

      if (hide) {
        cellsToRemove.push(cell);
      } else if (rowspan > 1) {
        cell.rowSpan = rowspan;
      }
    }
    for(var j in cellsToRemove){
      var cell = cellsToRemove[j];
        oData.nTr.removeChild(cell);      
    }
  } 
  oSettings.aoDrawCallback.push({ "sName": "fnFakeRowspan" });
  return this;
}; 
```

在 HTML 中不要使用 rowspan 属性。而是使用：

```
<table id = "myTable">
    <tr>
        <td data-rowspan = "3">
            Content with rowspan = 3
        </td>
    </tr>
    <tr>
        <td data-hide = "true">
            Content with rowspan = 3
        </td>
    </tr>
    <tr>
        <td data-hide = "true">
            Content with rowspan = 3
        </td>
    </tr>
</table> 
```

并在初始化后在您的数据表上调用它。

```
$('#myTable').dataTable().fnFakeRowspan(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-18T06:55:02.430

```
$(document).ready(function() {
            $('#example').dataTable( {
                "bSort" : false,
                "bFilter": false,
                "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    if((iDisplayIndex + 1)%2 == 1)
                    {
                        $('td:eq(0)', nRow).attr('colspan',3);
                        for(var i =1; i<=2;i++)
                        {
                        $('td:eq('+i+')', nRow).attr('colspan',0);
                        }                       
                    }
                    return nRow;
                    }
            } );
        } ); 
```

# ruby-on-rails - 如何在 shopify 商店中实现注册功能？

> ID：15199300
> 
> 赞同：1
> 
> 时间：2013-03-04T10:23:09.350
> 
> 标签：ruby-on-rails, shopify, liquid

我在 shopify wiki 文档中被发现，但不知道如何实现注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-26T11:07:46.207

1.  在您的 Shopify 管理员中，单击在线商店，然后单击主题（或按 GWT）：
2.  找到您要编辑的主题，点击 ... 按钮，
3.  然后单击 Edit HTML/CSS：单击 Templates 文件夹以展开并查看其内容。在 Templates 文件夹下，单击 customers/register.liquid。
4.  在customers/register.liquid 中，找到以下代码：

{% form 'create_customer' %}

在该代码和这个代码之间添加表单字段：

{% 最终形式 %}

要添加文本字段，请使用：

在表单中显示为标签的文本

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:30:47.677

你有没有机会看看[shopify_app GitHub repo](https://github.com/Shopify/shopify_app)

# android - 包含编辑框和微调器的Android动态线性布局

> ID：15199304
> 
> 赞同：0
> 
> 时间：2013-03-04T10:23:28.233
> 
> 标签：android, layout, spinner

我有以下布局，即 1 个微调器和一个包含一些编辑框和微调器的线性布局。此布局映射/表示一个对象（我们称之为 X）。主微调器将有 n 个条目，每个条目映射到布局对象 (X)。所以，我需要有 n 个布局，我希望允许用户一次只填充 1 个对象，所以，我将只保留 1 个布局可见。为了解决这个问题，一种方法是在 .xml 中有 n 个布局，并在监听器的 onitemselected 中播放可见性。有没有其他更好/优化的方法来解决这个问题。如果我最初不知道 n 的值，我怎样才能使这个动态呢？

```
`<Spinner
    android:id="@+id/linesspinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:id="@+id/linView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/linename1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/linecffiltext" />

    <Spinner
        android:id="@+id/trospinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/Tro_arrays"
        android:prompt="@string/linetrotext" />

    <EditText
        android:id="@+id/line1troval"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10" >
    </EditText>

    <Spinner
        android:id="@+id/cfspinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/cf_arrays"
        android:prompt="@string/linecffiltext" />

    <EditText
        android:id="@+id/line1cfval"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10" >
    </EditText>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:47:38.417

试试这个，把那个 LinearLayout 放在另一个 xml 中，然后在循环中多次调用那个 xml。示例 xml，名称 attrib_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Linearlayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/lable"
    android:layout_width="150dip"
    android:layout_column="0"
    android:padding="3dip"
    android:textColor="#000033" />
</Linearlayout> 
```

在循环中调用它的代码

```
 Linearlayout row11 = (Linearlayout) LayoutInflater.from(this).inflate(
                R.layout.attrib_row, null);
        ((TextView) row11.findViewById(R.id.lable)).setText("example"); 
```

# .net - MVC解决方案结构

> ID：15199312
> 
> 赞同：4
> 
> 时间：2013-03-04T10:23:57.253
> 
> 标签：.net, asp.net-mvc, entity-framework

问这个问题我觉得有点傻，但我一直在寻找一段时间并没有找到完整的答案，假设我有一个 MVC 网站，因为我遵循了这篇文章的结构：

[架构决策：ASP.NET MVC & Entity Framework](https://stackoverflow.com/questions/10515623/architectural-decisions-asp-net-mvc-entity-framework)

```
WebSite (MVC)
   Controllers
   Views
   Content (scripts, css, images, etc.)

Presentation Models
   View Models
   Model mappers

Web Library
   Extensions (to MVC/Web classes)
   Helper Classes
   Attributes

Business Logic
   Rules  

Data (if complex, use separate subfolder per context/repos/models)
   Entity Models
   Repositories 
   Data Context

General Library
   Extensions
   Helper Classes 
```

1）我应该把我的链接查询放在哪里来搜索数据？

我考虑在我的 BL 中创建一个通用搜索，如果需要其他应用程序（比如移动应用程序或 winform 应用程序）可以重用搜索对象，然后返回将通过演示模型项目映射的通用搜索对象？我不确定查询是“业务逻辑/规则”。

还是我应该直接在 Presentation Models 项目中进行所有这些查询？如果是这样，我会假设我仍然需要先创建通用对象，以便我可以将相同的查询重用于其他设备左右。

2）假设我想在此基础上添加一个移动应用程序，我是否应该将每个视图模型放在同一个演示模型项目中，用于 Web 和移动设备？

3）即使对于输入验证和CRUD操作，来自Web的每个调用都应该通过表示层吗？

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T13:23:14.507

在此，我就您在这里查询的要点发表了我的意见 1）我应该将链接查询放在哪里以搜索数据？

***如果您的 Linq 查询与某些搜索条件相关联，请在 BL 层中使用它们。*** 2) 假设我想在此基础上添加一个移动应用程序，我是否应该将每个视图模型放在 Web 和移动设备的同一个 Presentation Models 项目中？

***您将被要求这样做***

3）即使对于输入验证和CRUD操作，来自Web的每个调用都应该通过表示层吗？ *** 任何时候都应该在这两个地方进行任何验证：表示层和 BL，这样当您以后为 WCF 公开您的服务时，它将毫无例外地正常运行。即使跳过了表示层验证，也没关系。但是 BL 验证总是失败的***

# c++ - llvm 无法迭代 [3 x i8]

> ID：15199315
> 
> 赞同：0
> 
> 时间：2013-03-04T10:24:04.243
> 
> 标签：c++, llvm

我正在尝试“解析” LLVM IR 的一部分。更准确地说，从

```
@.str = private unnamed_addr constant [3 x i8] c"DS\00", section "llvm.metadata" 
```

我想得到“DS”。这是整个字节码中我可以从中获取它的唯一位置。我有 ：

```
...
Value *VV = cast<Value>(LD100->getOperand(1)->getOperand(0));
errs()<<"\n VV  "<<*(VV)<<"\n";
RESULT : VV  @.str = private unnamed_addr constant [3 x i8] c"DS\00", section "llvm.metadata"

if(VV->getValueID() == Value::GlobalVariableVal){
    GlobalVariable* FD = cast<GlobalVariable>(VV);
    Value *VVV = cast<Value>(FD->getOperand(0));
    errs()<<"\n VVV  "<<*(VVV)<<"\n";
    RESULT :  VVV  [3 x i8] c"DS\00"

    if(VVV->getValueID() == Value::ConstantDataArrayVal){
        ConstantArray *caa = (ConstantArray *)VVV;
        errs()<<"\n "<<(caa->getNumOperands())<<"\n";
        errs()<<"\n "<<*(caa->getType())<<"\n";
        RESULT :  0
                  [3 x i8]
    } 
```

从这一点开始，我尝试强制转换`enum llvm::Value::ValueTy`为 each 以尝试遍历 [3 X i8]，以获得“DS”（因为 StringRef 或 std::string 会很好），但我不能。我如何解析这个结构？

感谢您的任何帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:40:29.247

通过将 caa 转换为`ConstantDataArray`然后使用它来解决它，`getAsString()`这给了我确切的“DS”。

# php - 避免网页中的匿名用户

> ID：15199318
> 
> 赞同：0
> 
> 时间：2013-03-04T10:24:10.230
> 
> 标签：php

我制作了一个带有注册、登录和主页的小网站。我想确保人们在不登录的情况下无法进入主页。我设法在索引页面上做到了，这样如果没有登录的人来了，它将包括登录页面，如果有人已经登录进来时，它会包含带有包含功能的主页。我想知道另一种方法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:28:35.527

您的包含解决方案是一种合理的方法。

另一种方法是重定向到登录页面。当有人没有登录时，他们会被重定向到登录页面（最好是 302 临时重定向）。他们将在浏览器中看到的 URL 将是登录页面的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:29:39.560

另一种方法可能是使用重定向，因此当您发现用户未登录时，重定向到日志页面，并在登录后从用户所在的位置重定向回来。

[PHP 标头](http://php.net/manual/en/function.header.php)

```
<?php
header("Location: http://www.example.com/login.php"); /* Redirect browser */
exit();
?> 
```

我认为这种方式可能更适合搜索引擎，它不会将无法访问的页面索引为“登录”页面（如果我错了，请纠正我:)）

# performance - 读取然后排序还是在读取数组时排序更快？

> ID：15199319
> 
> 赞同：3
> 
> 时间：2013-03-04T10:24:11.823
> 
> 标签：performance, algorithm, sorting, pascal

我正在用 Pascal 编程。

读取数组然后对其进行排序（例如使用快速排序）或在读取数组时对其进行排序是否更快？我不再需要未排序的数组，所以我可以在阅读时更改数组的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:44:59.117

最后对整个数组进行排序应该是默认选择。

通过在阅读数组时对数组进行增量排序，您将一无所获。但是，您失去的是为工作选择最佳排序算法的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:28:31.903

看到这个：[快速排序与插入排序的平均时间复杂度](https://stackoverflow.com/questions/361998/average-time-complexity-of-quicksort-vs-insertion-sort)

就好像您在阅读时进行排序一样，它将是插入排序，问题是哪种排序更快。

读取只需要 o(n) 时间，并且比排序复杂度 (O(nlogn)) 更短，因此使读取变得无关紧要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:42:04.223

读取整个数组，然后对其进行排序。否则，您将需要使用堆在读取期间将其保持在有序结构中，或者在任何其他需要更多空间和时间的结构中。

# powershell - 等效于 grep -f 的 PowerShell

> ID：15199321
> 
> 赞同：199
> 
> 时间：2013-03-04T10:24:17.170
> 
> 标签：powershell, grep

我正在寻找等效于`grep --file=filename`. 如果您不知道`grep`，filename 是一个文本文件，其中每一行都有您要匹配的正则表达式模式。

也许我遗漏了一些明显的东西，但`Select-String`似乎没有这个选项。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-03-04T12:06:58.253

`-Pattern`in 参数支持一`Select-String`组模式。所以你要找的是：

```
Get-Content .\doc.txt | Select-String -Pattern (Get-Content .\regex.txt) 
```

`doc.txt`这通过使用每个正则表达式（每行一个）来搜索文本文件`regex.txt`

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2014-01-04T02:48:56.057

```
PS) new-alias grep findstr
PS) C:\WINDOWS> ls | grep -I -N exe

105:-a---        2006-11-02     13:34      49680 twunk_16.exe
106:-a---        2006-11-02     13:34      31232 twunk_32.exe
109:-a---        2006-09-18     23:43     256192 winhelp.exe
110:-a---        2006-11-02     10:45       9216 winhlp32.exe

PS) grep /? 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-03-04T11:28:45.237

我不熟悉 grep 但使用 Select-String 你可以这样做：

```
Get-ChildItem filename.txt | Select-String -Pattern <regexPattern> 
```

您也可以使用 Get-Content 来做到这一点：

```
(Get-Content filename.txt) -match 'pattern' 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-12-15T18:52:37.020

所以我在这个链接找到了一个很好的答案： [https ://www.thomasmaurer.ch/2011/03/powershell-search-for-string-or-grep-for-powershell/](https://www.thomasmaurer.ch/2011/03/powershell-search-for-string-or-grep-for-powershell/)

但本质上是：

```
Select-String -Path "C:\file\Path\*.txt" -Pattern "^Enter REGEX Here$" 
```

这在 PowerShell 的一行中提供了目录文件搜索（*或者您可以只指定一个文件）和文件内容搜索，与 grep 非常相似。输出将类似于：

```
doc.txt:31: Enter REGEX Here
HelloWorld.txt:13: Enter REGEX Here 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-01-23T12:30:43.067

我在尝试使用 powershell 在文件中查找文本时遇到了同样的问题。我使用了以下 - 尽可能接近 Linux 环境。

希望这可以帮助某人：

**电源外壳：**

```
PS) new-alias grep findstr
PS) ls -r *.txt | cat | grep "some random string" 
```

**解释：**

```
ls       - lists all files
-r       - recursively (in all files and folders and subfolders)
*.txt    - only .txt files
|        - pipe the (ls) results to next command (cat)
cat      - show contents of files comming from (ls)
|        - pipe the (cat) results to next command (grep)
grep     - search contents from (cat) for "some random string" (alias to findstr) 
```

**是的，这也有效：**

```
PS) ls -r *.txt | cat | findstr "some random string" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-06T08:25:56.010

这个问题已经有了答案，但我只想补充一点，在 Windows 中有 Windows Subsystem for Linux [WSL](https://docs.microsoft.com/en-us/windows/wsl/interop)。

因此，例如，如果您想检查是否有名为**Elasicsearch的服务处于****运行**状态，您可以在 powershell 中执行以下代码片段

`net start | grep Elasticsearch`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T10:37:02.650

> 但 select-String 似乎没有这个选项。

正确的。PowerShell*不是**nix shells 工具集的克隆。

但是，自己构建类似的东西并不难：

```
$regexes = Get-Content RegexFile.txt | 
           Foreach-Object { new-object System.Text.RegularExpressions.Regex $_ }

$fileList | Get-Content | Where-Object {
  foreach ($r in $regexes) {
    if ($r.IsMatch($_)) {
      $true
      break
    }
  }
  $false
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T12:07:30.147

也许？

```
[regex]$regex = (get-content <regex file> |
foreach {
          '(?:{0})' -f $_
        }) -join '|'

Get-Content <filespec> -ReadCount 10000 |
 foreach {
           if ($_ -match $regex)
             {
              $true
              break
             }
         } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-15T09:33:59.290

当您想在管道输出中使用grep（grep文件应该类似）时，我通过PowerShell的“过滤器”和“别名”找到了一种可能的方法：

首先定义一个过滤器：

```
filter Filter-Object ([string]$pattern)
{
    Out-String -InputObject $_ -Stream | Select-String -Pattern "$pattern"
} 
```

然后定义别名：

```
New-Alias -Name grep -Value Filter-Object 
```

最后，将前一个过滤器和别名放在您的个人资料中：

> $Home[我的]文档\PowerShell\Microsoft.PowerShell_profile.ps1

重启你的PS，就可以使用了：

> 别名 | grep 'grep'

==================================================== =================

*相关参考*

1.  alias: Set-Alias[在此处输入链接描述](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/set-alias?view=powershell-7.1) New-Alias[在此处输入链接描述](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/new-alias?view=powershell-7.1)

2.  过滤器（特殊功能）[在此处输入链接描述](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_functions?view=powershell-7.1#filters)

3.  配置文件（就像 .bashrc 用于 bash）：[在此处输入链接描述](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.1)

4.  out-string( **this is key** ) [enter link description here](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/out-string?view=powershell-7.1) :in PowerShell 输出是基于对象的[enter link description here](https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.2#output-is-object-based)，所以关键是convert object to string grep string。

5.  Select-String[在此处输入链接描述](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/select-string?view=powershell-5.1)：在字符串和文件中查找文本

# c# - 选择子元素有值的 XElement

> ID：15199326
> 
> 赞同：8
> 
> 时间：2013-03-04T10:24:39.743
> 
> 标签：c#, linq, linq-to-xml

给定以下 XML：

```
<platforms>
  <platform>
    <id>1</id>
    <price>2.99</price>
  </platform>
</platforms> 
```

如何根据值为“1”的子元素“id”选择“平台”元素作为 XElement 对象？

我已经做到了这一点：

```
XDocument xPlatformXml = new XDocument();
XElement xel = xPlatformXml.Element("platforms").Elements("platform").Where(x => x.Value == "1").SingleOrDefault(); 
```

但这是在“平台”元素而不是“id”中寻找值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T10:27:08.933

```
XDocument xPlatformXml = new XDocument();
XElement xel = xPlatformXml.Element("platforms")
                           .Elements("platform")
                           .Where(x => x.Element("id").Value == "1")
                           .SingleOrDefault(); 
```

或使用`XElement`转换`int`：

```
XDocument xPlatformXml = new XDocument();
XElement xel = xPlatformXml.Element("platforms")
                           .Elements("platform")
                           .Where(x => (int)x.Element("id") == 1)
                           .SingleOrDefault(); 
```

# mysql - Wordpress 自定义 SQL 以使用给定的元值感染三个帖子

> ID：15199329
> 
> 赞同：2
> 
> 时间：2013-03-04T10:24:42.327
> 
> 标签：mysql, sql, wordpress, greatest-n-per-group

我有一堆带有元键的自定义帖子类型页脚元素`footer_element_meta_alignment`。现在，我正在尝试获取三个最新的帖子，它们`meta_values`是`1`和。因此，每个值都有一个帖子。`2``3`

如何使用单个 SQL 查询来实现这一点？

到目前为止，这是我的 SQL 查询：

```
"SELECT wposts.*, meta1.meta_value
FROM $wpdb->posts wposts, $wpdb->postmeta meta1
WHERE 1=1
AND wposts.post_type = 'footer_element'
AND wposts.post_status = 'publish'
AND wposts.ID = meta1.post_id
AND meta1.meta_key = 'footer_element_meta_alignment'
AND (meta1.meta_value = 1 OR meta1.meta_value = 2 OR meta1.meta_value = 3)
ORDER BY meta1.meta_value ASC"; 
```

然而，这会获取具有给定元值的所有元素，而不仅仅是最新的元素。

**答案**
回答了我自己的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:51:22.040

固定（我希望）。

```
 SELECT wposts.* FROM $wpdb->posts wposts WHERE
 wposts.post_type = 'footer_element'
 AND wposts.post_status = 'publish'
 AND wposts.ID IN 
 (SELECT max(meta1.post_id) FROM $wpdb->postmeta meta1
 WHERE meta1.meta_value = 1 OR meta1.meta_value = 2 OR meta1.meta_value = 3
 GROUP BY meta1.meta_value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:32:45.100

经过几个小时的努力，我找到了解决方案。

**SQL**

```
"SELECT *
 FROM (  SELECT p.*, m.meta_value AS meta
         FROM $wpdb->posts AS p
         LEFT JOIN $wpdb->postmeta AS m
         ON p.ID = m.post_id
         WHERE m.meta_key = 'footer_element_meta_alignment'
         AND p.post_status = 'publish'
         ORDER BY m.meta_value ASC, p.post_date DESC) AS h
 GROUP BY meta"; 
```

# c# - 如何等待两个应该并行运行的异步函数完成

> ID：15199331
> 
> 赞同：0
> 
> 时间：2013-03-04T10:24:55.033
> 
> 标签：c#, async-await

如果我得到以下片段：

```
async Task MyFunc()
{
    await DoWork1();
    await DoWork2();
}
async Task<object> DoWork1() { /*Do work here*/ }
async Task<object> DoWork2() { /*Do other work here*/ }

void main()
{
    MyTask();
    //Do some stuff which needs MyFunc() to be completed beforehand.
} 
```

我想做的是让 DoWork1() 和 DoWork2() 并行运行，但只有在它们都完成时才返回到 main()。

它会那样工作吗？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:12:22.730

您可以使用`WhenAll`简单的并行性：

```
async Task MyFunc()
{
  var task1 = DoWork1();
  var task2 = DoWork2();
  await Task.WhenAll(task1, task2);
} 
```

# jsfiddle - JsFiddle代码不起作用

> ID：15199333
> 
> 赞同：0
> 
> 时间：2013-03-04T10:24:59.287
> 
> 标签：jsfiddle

我有一个更好的问题跟进，但这太基本了。我的代码（语法）有问题还是 Jsfiddle 不能正常工作！

链接：http: [//jsfiddle.net/HEM7Q/](http://jsfiddle.net/HEM7Q/)

这是jQuery代码：

```
$(document).ready(function () {
  $(".button").click(function(e) {

    $(this).slideUp(2000)
  });
}); 
```

我只是想在单击它时隐藏具有“按钮”类的 div。帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:27:26.073

在框架和扩展部分中从站点左侧选择 jQuery 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:28:20.900

您的代码中没有包含 jQuery 库。

查看更新；[http://jsfiddle.net/HEM7Q/3/](http://jsfiddle.net/HEM7Q/3/)

```
Include jQuery library 
```

# java - Quartz Scheduler - OC4J 的多个进程 ID 运行同一个实例，每个都被调度

> ID：15199334
> 
> 赞同：1
> 
> 时间：2013-03-04T10:24:59.640
> 
> 标签：java, spring, quartz-scheduler, oc4j

我最近尝试使用 Quartz 来安排邮件。当应用程序部署在应用服务器上时，它会在内部为 OC4J 实例创建多个进程 ID。当它运行时，所有这些实例都单独运行并发送邮件。

我可以使用 JDBC 作业存储来处理这种情况吗？我还应该做些什么来避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:42:51.193

如果您通过 XML 或 java 代码显式启动作业，则可以将 concurrent 指定为 false。

# c# - 从 WPF 中的后台线程返回布尔值

> ID：15199335
> 
> 赞同：0
> 
> 时间：2013-03-04T10:25:01.117
> 
> 标签：c#, wpf

```
public bool function()
{
    bool doesExist = false;          
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += (o, ea) =>
        {
            // some work done here
        };

    worker.RunWorkerCompleted += (o, ea) =>
        {
            //somw logic here
            return doesExist;                               
        };
} 
```

我想要`doesExist`值作为函数的返回值，但我收到智能感知错误

> system.componentmodel。runworkercompletedeventhandler 只返回 void，return 关键字后面不能跟对象表达式

为什么我收到此错误，如何返回布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:26:46.750

```
public bool function()
{
   bool doesExist = false;          
   BackgroundWorker worker = new BackgroundWorker();

   worker.DoWork += (o, ea) =>
            {
                 // do some work
                 ea.Result = true; // set this as true if all goes well!
            };

    worker.RunWorkerCompleted += (o, ea) =>
        {
              // since the boolean value is calculated here &
              // RunWorkerCompleted returns void
              // you can create a method with boolean parameter that handle the result.
              Another_Way_To_Return_Boolean(doesExist)

        };
} 

private void Another_Way_To_Return_Boolean(bool result)
{
    if (result)
    {

    }
} 
```

# javascript - 获取移动网页设备类型的新方法

> ID：15199337
> 
> 赞同：0
> 
> 时间：2013-03-04T10:25:04.323
> 
> 标签：javascript, browser-detection, screen-size

我一直在研究一种让设备类型触发移动网站的好方法，许多人仍然使用以像素为单位获取屏幕宽度/高度的脚本来确定是否使用移动设备。

但是手机/平板的屏幕分辨率非常高，所以我们需要另一种方式来触发普通网站和移动网站之间的切换。手机的屏幕尺寸约为 1,280 x 768 - 1920x1080，平板电脑的屏幕尺寸约为 1920x1080 至 2560x1600。

确定移动与否的正确防错方法是什么？我不想在 php 上使用 javascript，如果有更简单的方法，请告诉 javascript！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:21:32.017

您可以通过 CSS 中的媒体查询使移动网站具有响应性，它将覆盖您网站的正常 CSS。媒体查询将检查分辨率，并且您在媒体查询中输入的内容将以类似 [http://webdesignerwall.com/tutorials/css3-media-queries的分辨率显示](http://webdesignerwall.com/tutorials/css3-media-queries)

使用 Javascript，您可以使用我在此页面上找到的代码检查浏览器： [http ://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)

使用该代码，您可以重定向到专为移动网站设计的网站

# php - 用于 SMPP/SMS 的持久套接字/连接 PHP

> ID：15199338
> 
> 赞同：2
> 
> 时间：2013-03-04T10:25:10.010
> 
> 标签：php, sockets, daemon, smpp, persistent-connection

我需要在 PHP 中建立一个持久的套接字连接，但不知道如何实现。目前，当我发送 SMS 消息时，我 a）打开套接字连接 b）发送消息（通过 SMS/SMPP）和 c）关闭套接字连接

但是我不需要一直打开和关闭连接。相反，我需要

```
- 2 persistent connections that maintains connectivity to an SMSC (SMS centre) and reconnects when a timeout occurs. 
- One persistent connection for reading SMS and one for sending SMS.
- Automatic restart/recovery (i.e. when memory issues arise)
- Automatic looping to act as listener for incoming events such as receiving incoming delivery receipts and sms messages, as well as 'ping' (enquire link) to keep SMPP connection alive. 
```

更新：想知道是否有人使用以下方法实现了上述目标：[https ://github.com/shaneharter/PHP-Daemon](https://github.com/shaneharter/PHP-Daemon)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:44:59.880

函数[pfsockopen](http://php.net/manual/en/function.pfsockopen.php)似乎具有您正在寻找的功能。查看这个问题 - [PHP pfsockopen in a session](https://stackoverflow.com/questions/1213464/php-pfsockopen-in-a-session)。

===

对您的实施的个人观察。我假设 PHP 代码将由传入请求触发，而在所有其他时间，SMPP 客户端将处于非活动状态。这可能不太适合 SMPP，原因如下：

*   SMPP 客户端需要为他们从 SMSC 收到的所有入站 PDU 发回响应 PDU。
*   这些 PDU 之一是 enquire_link，用于保持连接处于活动状态。如果 SMPP 客户端未能返回 enquire_link_resp PDU，则连接将被丢弃。你可能会体验到更多这些。使用[pfsockopen](http://php.net/manual/en/function.pfsockopen.php)不能解决这个问题。
*   如果您想提供交货确认，SMPP 客户端必须响应 SMSC。
*   如果 SMPP 客户端未能为它收到的 SMSC 的 PDU 发送响应 PDU（如果它从管道中读取字节），则 SMSC 可能会重新发送其中一些 PDU。这会带来在 SMPP 客户端计算机上创建不必要的命中的可能风险。

# android - Android：HTTP POST 响应 - 401

> ID：15199340
> 
> 赞同：1
> 
> 时间：2013-03-04T10:25:24.610
> 
> 标签：android, post

我遇到了一个问题 - 当您已经登录并尝试访问另一个安全页面时返回 401 错误消息。对我来说，这个问题的神秘之处在于，如果通过 Firefox RestCLient 或 iOS 应用程序检查，我可以在您登录后访问另一个安全页面，但无法通过 Chrome Advanced Rest Client 和 Android 应用程序访问。但是，内容类型和其他必要参数在 Web 工具和应用程序中设置相同。我尝试使用编码的 login:pass 设置不同的身份验证标头，但它`t help and it doesn`不需要，因为我认为它应该可以在没有它的情况下工作（至少 FF 和 iOS 应用程序在没有这个标头的情况下工作）。会出什么问题？

Chrome的响应头：

```
401 Unauthorized

Loading time:
29
Request headers
Content-Type: application/x-www-form-urlencoded 
Response headers
Date: Mon, 04 Mar 2013 10:01:02 GMT 
Server: Apache/2.2.20 (Ubuntu) 
X-Powered-By: PHP/5.3.6-13ubuntu3.9
Set-Cookie: peachy=qg3mjvchjh1oionqlhhv0jrn71; path=/ 
Expires: Thu, 19 Nov 1981 08:52:00 GMT 
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0 
Pragma: no-cache 
Vary: Accept-Encoding 
Content-Length: 96 
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html; charset=utf-8 
```

Firefox 的响应头：

```
Status Code: 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection: Keep-Alive
Content-Length: 202
Content-Type: application/json
Date: Mon, 04 Mar 2013 09:51:09 GMT
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive: timeout=5, max=100
Pragma: no-cache
Server: Apache/2.2.20 (Ubuntu)
X-Powered-By: PHP/5.3.6-13ubuntu3.9 
```

这就是我在 Android 应用程序中的 Restful 代码：

```
public String serverRequest(int action, Bundle params) {
    if (action == 0) {
        if (Const.DEBUG_ENABLED)
            Log.e(TAG, "You did not pass action.");
        return "You did not pass action.";
    }

    try {
        HttpRequestBase request = null;
        HttpPost postRequest = null;
        switch (action) {
            case SIGN_IN:
                request = new HttpPost();
                request.setURI(new URI(SIGNIN_URL));
                request.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");

                 postRequest = (HttpPost) request;

                 if (params != null) {
                 UrlEncodedFormEntity formEntity = new
                 UrlEncodedFormEntity(paramsToList(params));
                 postRequest.setEntity(formEntity);
                 }
                break;

            case SIGN_OUT:
                request = new HttpPost();
                request.setURI(new URI(SIGNOUT_URL));
                request.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
                break;

            case BANK_CARD_VERIFY:
                request = new HttpPost();
                request.setURI(new URI(BANK_CARD_VERIFY_URL));
                request.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");

                postRequest = (HttpPost) request;

                if (params != null) {
                    UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(paramsToList(params));
                    postRequest.setEntity(formEntity);
                }
                break;
        }

        if (request != null) {
            DefaultHttpClient client = new DefaultHttpClient();

            if (Const.DEBUG_ENABLED)
                Log.d(TAG, "Executing request: " + actionToString(action) + ": " + urlToString(action));

            HttpResponse response = client.execute(request);

            StatusLine responseStatus = response.getStatusLine();

            int statusCode = responseStatus != null ? responseStatus.getStatusCode() : 0;
            Log.d(TAG, "Status code: " + statusCode);
            }
            } 
```

（登录和注销是公开的，bank_verify 是安全页面。Android 应用具有与 chrome 相同的响应标头）。会话或其他东西似乎有问题，但我不确定。

**编辑：** 看来我发现这里有什么问题。在 Android 应用程序中，我创建了一个新的 HttpCLient 对象，因为它丢失了所有旧数据。但另一个问题 - 如何使这个 HttpCLient 可重用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:46:15.170

发现问题。我每次都重用httpClient，尽管每次只使用一个拥有所有会话数据的客户端。只需执行 if 语句来检查我是否已经有 httpclient 对象，否则它会创建一个新对象。

# unix - 遍历目录 Unix TCSH 脚本中的文件时的权限

> ID：15199341
> 
> 赞同：0
> 
> 时间：2013-03-04T10:25:32.100
> 
> 标签：unix, permissions, tcsh

我正在编写一个脚本，它将打印我的主目录的子目录中每个文件的文件名。我的代码是：

```
foreach file (`~/.garbage`)
     echo "$file"
end 
```

当我尝试运行我的脚本时，我收到以下错误：

```
home/.garbage: Permission denied. 
```

我尝试将 .garbage 目录和我的脚本的权限设置为 755，但我无法克服这个错误。有什么我做错了吗？这是一个 tcsh 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:39:48.363

为什么不直接使用`ls ~/.garbage`

或者，如果您希望每个文件位于单独的行上，`ls -1 ~/.garbage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:10:06.397

backtic 将尝试执行其中的任何内容。您收到此错误，因为您在 backtic 中提供了目录名称。

您可以使用`ls ~/.garbage`Mark 提到的 backtics 或使用`~/.garbage/*`引号并依靠 shell 为您扩展 glob。如果您只想从完整路径中获取文件名；使用`basename`命令或一些 sed/awk 魔法

# iphone - iOS 上的多线程和 Grand Central Dispatch

> ID：15199342
> 
> 赞同：5
> 
> 时间：2013-03-04T10:25:36.547
> 
> 标签：iphone, objective-c, multithreading, ipad, objective-c-blocks

现在我试图理解 gcd 的概念。使用大中央调度如何在我的应用程序中实现多线程。我有关于 gcd 概念的想法，但我无法在我的应用程序中实现这个概念。我需要一个带有块的简单示例来理解使用 gcd 的多线程。请帮助我...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T10:45:59.667

好的..最简单的例子）

您可以用任何方法编写此代码。例如

```
 -(void) viewDidLoad {   
     [super viewDidLoad];  
     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
       //Here your non-main thread.
       NSLog (@"Hi, I'm new thread");
       dispatch_async(dispatch_get_main_queue(), ^{
       //Here you returns to main thread.
       NSLog (@"Hi, I'm main thread");
       });
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:03:13.447

试试这个，它非常清晰和容易 - [http://en.wikipedia.org/wiki/Grand_Central_Dispatch](http://en.wikipedia.org/wiki/Grand_Central_Dispatch)

# javascript - casperjs 测试内部站点

> ID：15199343
> 
> 赞同：1
> 
> 时间：2013-03-04T10:25:38.890
> 
> 标签：javascript, phantomjs, casperjs

我正在尝试为内部站点运行 casper 测试。它在预生产环境中运行，到目前为止的代码是

```
 var casper = require('casper').create({
                 verbose: true,
                 loglevel:"debug"
                 });

    // listening to a custom event
    casper.on('page.loaded', function() {
              this.echo('The page title is ' + this.getTitle());
              this.echo('value is: '+ this.getElementAttribute
                       ('input[id="edit-capture-amount"]', 
                        'value'));
    });

    casper.start('https://preprod.uk.systemtest.com', function() {
                 this.echo(this.getTitle());
                 this.capture('frontpage.png');
                 // emitting a custom event
                 this.emit('age.loaded.loaded');    
    });

    casper.run(); 
```

如您所见，它并不多，但我的问题是地址无法访问。捕获还显示一个空白页。不知道我做错了什么。我已经用 cnn 和 google url 检查了代码，标题和屏幕截图工作正常。不知道如何使它适用于内部站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T22:16:55.843

我有同样的问题。在我的浏览器中，我可以解析 url，但 capserjs 不能。我得到`about::blank`的只是一个网页。

**添加`--ignore-ssl-errors=yes`工作就像一个魅力！**

```
casperjs mytestjs //didn't work

capserjs --ignore-ssl-errors=yes mytestjs //worked perfect! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:44:20.077

只是要确定。

您可以从运行 casper 的计算机访问 preprod.uk.systemtest.com 吗？例如使用 ping 或 wget。

您的计算机和 preprod 服务器之间是否有任何代理？或者您的系统是否配置为通过不应用于 preprod 服务器的代理？

casper代码似乎没问题。

*我知道这应该是评论，但我没有足够的声誉发表评论。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T10:34:03.350

就 CasperJs 测试在 localhost 中运行而言，为了测试自定义域/子域/主机，需要定义一些标头。

我在仅传递 HOST 标头时遇到了一些问题，例如，未正确拍摄快照。

我又添加了 2 个标题，现在我的测试运行正常：

```
 casper.on('started', function () {
        var testHost = 'preprod.uk.systemtest.com';

        this.page.customHeaders = {
            'HOST': testHost,
            'HTTP_HOST': testHost,
            'SERVER_NAME': testHost
        };
    });

    var testing_url: 'http://localhost:8000/app_test.php';
    casper.start(_testing_url, function() {
    this.echo('I am using symfony, so this should have to show the homepage for the domain: preprod.uk.systemtest.com');
    this.echo('An the snapshot is also working');
    this.capture('casper_capture.png');
} 
```

# java - Generic 0 不能转换为 java.lang.Short

> ID：15199349
> 
> 赞同：4
> 
> 时间：2013-03-04T10:26:06.110
> 
> 标签：java, generics, map, casting, bounded-wildcard

我班上有两张地图（我是泛型新手）

```
private Map<Integer, Integer> aMap = new ConcurrentHashMap<Integer, Integer>();
private Map<Integer, Short> bMap = new HashMap<Integer, Short>(); 
```

如果地图中不存在键，我想获得一个零值。所以我做了这个包装方法来最小化打字`containsKey(key)`

```
@SuppressWarnings("unchecked")
private <T extends Number> T getValue (Map<Integer, T> map, Integer key) {
    return (T) ((map.containsKey(key)) ? map.get(key) : 0);
} 
```

我称之为

```
Integer a = getValue(aMap, 15); //okay in any case
Short b = getValue(bMap, 15); //15 key does not exist 
```

对于第二种情况，它给了我：

```
ClassCastException: java.lang.Integer cannot be cast to java.lang.Short 
```

所以可能我需要做类似的事情`: new Number(0)`，但 Number 是抽象的。

**我该如何解决？**

**编辑：**

我的想法是在没有额外 if 的情况下进行算术运算：

```
Integer a = getValue(aMap, 15);
a = a + 10; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T10:34:16.360

一种方法是将默认值作为参数提供给您的函数：

```
private <T extends Number> T getValue (Map<Integer, T> map, Integer key, T dflt) {
    return (T) ((map.containsKey(key)) ? map.get(key) : dflt);
}

public static void main(String[] args) {
    Integer a = getValue(aMap, 15, 0); //okay in any case
    Short b = getValue(bMap, 15, (short)0); //15 key does not exist
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:31:38.267

好吧，如果不提供`T`代码可以查看的方式，您将无能为力。

那时最简单的方法可能是保留一个 0 值的映射：

```
private static Map<Class<?>, Number> ZERO_VALUES = createZeroValues();

private static Map<Class<?>, Number> createZeroValues() {
    Map<Class<?>, Number> ret = new HashMap<Class<?>, Number>();
    ret.put(Integer.class, (int) 0);
    ret.put(Short.class, (short) 0);
    ret.put(Long.class, (long) 0);
    // etc
} 
```

然后：

```
private <T extends Number> T getValue (Map<Integer, T> map, Integer key, Class<T> clazz) {
    return clazz.cast(map.containsKey(key) ? map.get(key) : ZERO_VALUES.get(clazz));
} 
```

那么不幸的是，您必须将其称为：

```
Short b = getValue(bMap, 15, Short.class); 
```

基本上这是Java泛型的限制:(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T11:13:06.650

在这种情况下，我只是重写该`get()`方法：

```
 private Map<Integer, Short> bMap = new HashMap<Integer, Short>() {
     @Override
     public Short get(Object key) {
         return containsKey(key) ? super.get(key) : new Short(0);
     }
 }; 
```

然后你可以在任何地方使用它，它会按照你指定的方式运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:39:03.957

将 0 显式转换为 short ，因为默认情况下它将是 int 。然后转换为 Short wrapper。在 java 中，你不能直接从原始类型转换为不同类型的 Wrapper。

# javascript - Speak.js 中的女性声音

> ID：15199350
> 
> 赞同：2
> 
> 时间：2013-03-04T10:26:06.813
> 
> 标签：javascript, jquery, html, text-to-speech

我们将 speak.js 库用于文本到语音的目的。我们需要在此实现具有本地化的女性声音。我们称它的说话功能为，`meSpeak.speak('Hello Thomas");`但我们无法使其成为女性声音的操作。我们观察到我们需要传递一些 arg 作为参数，但也不能传递。您能否指导我如何使用 speak.js lib 获得女性语音操作？

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-14T06:31:08.203

假设你在谈论 mespeak.js：

[在http://www.masswerk.at/mespeak](http://www.masswerk.at/mespeak)下载最新版本

以所选语言制作语音文件 (json) 的副本，然后在编辑器中打开它。

语音文件的结构如下：

```
{
  "voice_id": "<filename>",
  "dict_id":  "<filename>",
  "dict":     "<base64-encoded octet stream>",
  "voice":    "<base64-encoded octet stream>"
} 
```

首先，提供一个唯一的“voice_id”（例如“en-us-f”，id 实际上是 unix 文件名）。

编码后的语音数据实际上是一个文本文件，可在 eSpeak 的数据目录中找到（参见[http://espeak.sourceforge.net/](http://espeak.sourceforge.net/)）。虽然文件表示为 base64 编码的八位字节流，但您也可以通过提供另一个属性“voice_encoding”来使用文本字符串：

```
{
  "voice_id": "<filename>",
  "dict_id":  "<filename>",
  "dict":     "<base64-encoded octet stream>",
  "voice":    "<text-string>",
  "voice_encoding": "text"
} 
```

现在，参考语音的 eSpeak-data 和 eSpeak-docs，您可能会发现语音“en-us”的以下文本：

```
// moving towards US English
name english-us
language en-us 2
language en-r
language en 3
gender male
[and more] 
```

通过删除第一行中的注释，编辑名称（我们希望这是唯一的），最后更改性别，您将得到：

```
name english-us-f
language en-us 2
language en-r
language en 3
gender female 
```

用 "\n" 替换任何换行符以获得有效的 JSON 字符串：

```
"name english-us-f\nlanguage en-us 2\nlanguage en-r\nlanguage en 3\ngender female" 
```

并将其用作属性“voice”的值。保存您的文件并将其加载到 meSpeak。

您可以根据 eSpeak-Docs 微调声音：[http://espeak.sourceforge.net/voices.html](http://espeak.sourceforge.net/voices.html)

（另一种方法是保存一个纯 eSpeak-voice 文件并将其内容编码为 base64-string 并将其用作“voice”的值。在这种情况下，您不会设置“voice_encoding”属性。使用纯文本可能更适合测试。）

希望这会有所帮助（它不会比这更容易）。

荷兰

编辑：请注意，任何格式错误的语音字符串都会导致 (m)eSpeak 出现错误。（eSpeak 对语法错误并不友好，但会抛出“类型错误”——meSpeak 将其作为控制台日志处理。请记住，meSpeak 的核心只是 Emscripten 生成的 eSpeak 端口。所以它不能更好地处理语音文件。）

编辑：这个（扩展）版本现在是 meSpeak 文档的一部分：http: [//www.masswerk.at/mespeak/voices-and-languages.html](http://www.masswerk.at/mespeak/voices-and-languages.html)

# sphinx - sphinxQl 获取查询日志

> ID：15199352
> 
> 赞同：0
> 
> 时间：2013-03-04T10:26:24.290
> 
> 标签：sphinx

使用`SphinxQl`，在执行此查询时，我收到以下错误

```
 select fieldname from indexname where height >= 165.25 and height <= 175.25 OR Age >=51;
 ERROR 1064 (42000): sphinxql: syntax error, unexpected OR, expecting $end near 'OR Age >=51' 
```

* * *

```
 select fieldname from indexname where (height >= 165.25 and height <= 175.25) OR Age >=51;

ERROR 1064 (42000): sphinxql: only >=, <=, and BETWEEN floating-point filter types are supported in this version near '(height >= 165.25 and height <= 175.25) OR Age >=51' 
```

提前谢谢，请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:09:50.153

尝试类似的东西

```
SELECT fieldname, IF( (height >= 165.25 AND height <= 175.25) OR Age >=51, 1, 0)
AS myfilter FROM indexname WHERE myfilter = 1 
```

狮身人面像可以做“或”，他们只是不能物理上在 WHERE 子句本身。

# symfony - 获取表单中动态添加的字段 - Symfony2

> ID：15199354
> 
> 赞同：0
> 
> 时间：2013-03-04T10:26:29.713
> 
> 标签：symfony

我有一些数据将添加到表单内的隐藏输入字段中。

现在，由于我使用的是 symfony2 表单，因此这些字段不会被提交。即`$form->getData()`不从这些字段中获取数据。

我如何从那些动态添加（隐藏）的输入字段中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:27:05.520

在表单类型的上下文中获取帖子值：

```
$postData = $request->request->get('form_name');
$name_value = $postData['title']; 
```

获取不在表单类型上下文中的帖子值（也许这是您需要的）：

```
$data = $request->request->all();
$name = $data['input_name']; 
```

# objective-c - NSWindowController 中的 EXC_BAD_ACCESS

> ID：15199355
> 
> 赞同：0
> 
> 时间：2013-03-04T10:26:31.523
> 
> 标签：objective-c, cocoa, automatic-ref-counting, nswindowcontroller

好的，情况有点复杂，但对于比我更熟悉 Cocoa 内存管理的人来说，问题本身的性质应该很简单。

一些细节： - 从我的主应用程序中，我正在加载一个“可加载”包（由一个 组成`NSWindowController`） - 两个项目（主应用程序和“插件”）都支持 ARC

在我的插件代码中，我有一个自定义初始化方法：

```
- (id)initWithAPI:(id)api
{
    pluginWindowController* newPluginWindowController = [super initWithWindowNibName:@"PluginWindow"];

    if (newPluginWindowController)
    {
        [newPluginWindowController setAPI:api];
    }

    return newPluginWindowController;

} 
```

这`API`是声明的方式：

```
@property (unsafe_unretained) id API; 
```

现在，这是问题所在：

*   我正在初始化`initWithAPI:`并`API`正在设置。
*   当我测试它`API`的价值时，`- (void)windowDidLoad:`它仍然显示得很好。
*   但是：当尝试从另一种方法中执行相同的操作时（实际上是通过在我的插件窗口中单击按钮触发的 IBAction）...尝试获取`[self API]`触发`EXC_BAD_ACCESS`错误。

我究竟做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:36:10.617

将属性声明为，如果您希望它在对象死亡时`weak`自动设置为，或者声明为，如果您想让对象保持活动状态（可能是您想要的）。`nil``strong``strong`

`unsafe_unretained`如果对象被释放，将导致一个悬空指针（这就是为什么它被称为“不安全”..）

# c++ - 使用 SSD 加快编译时间

> ID：15199356
> 
> 赞同：25
> 
> 时间：2013-03-04T10:26:32.010
> 
> 标签：c++, visual-studio-2010, compilation, solid-state-drive

我想尝试加快 C++ 项目的编译时间。他们有大约 3M 行代码。

当然，我并不需要总是编译每个项目，但有时有很多源文件被别人修改，我需要重新编译所有的文件（例如，当有人更新[ASN.1](https://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)源文件时）。

我测量过编译一个中间项目（不涉及所有源文件）大约需要三分钟。我知道这并不过分，但有时等待编译真的很无聊..

我试图将源代码移动到 SSD（旧的 OCZ Vertex 3 60 GB），经过基准测试，它比 HDD 快 5 到 60 倍（尤其是在随机读/写方面）。无论如何，编译时间几乎相同（可能快 2-3 秒，但应该有机会）。

也许将 Visual Studio bin 移动到 SSD 会带来额外的性能提升？

只是为了完成这个问题：我有一个 W3520 Xeon @2.67 GHz 和 12 GB 的 DDR3 ECC。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-04T11:45:02.850

这在很大程度上取决于您的构建环境和其他设置。例如，在我的主编译服务器上，我有 96 GiB 的 RAM 和 16 个内核。HDD相当慢，但这并不重要，因为所有内容都缓存在RAM中。

在我的桌面上（有时我也会编译）我只有 8 Gib 的 RAM 和六个内核。在那里进行相同的并行构建可能会大大加快速度，因为并行运行的六个编译器会占用足够的内存，以使 SSD 速度差异非常明显。

影响构建时间的因素有很多，包括 CPU 与 I/O“边界”的比率。根据我的经验（Linux 上的[GCC ），它们包括：](http://en.wikipedia.org/wiki/GNU_Compiler_Collection)

*   代码的复杂性。大量元模板使其使用更多 CPU 时间，更多类似 C 的代码可能使生成对象的 I/O（更多）占主导地位
*   临时文件的编译器设置，例如`-pipe`GCC。
*   正在使用优化。通常，优化程度越高，CPU 工作就越占主导地位。
*   并行构建。一次编译一个文件可能永远不会产生足够的 I/O 来使当今最慢的硬盘达到任何极限。然而，一次编译八个（或更多）内核可能会。
*   正在使用的操作系统/文件系统。似乎过去的一些文件系统对并行构建的许多文件的访问模式感到窒息，本质上是将 I/O 瓶颈置于文件系统代码中，而不是底层硬件。
*   用于缓冲的可用 RAM。操作系统缓冲 I/O 的力度越大，HDD 速度就越不重要。这就是为什么尽管有足够的空闲内核，但有时 a`make -j6`可能比 a 慢。`make -j4`

简而言之：这取决于足够多的事情来做出任何“是的，它会帮助你”或“不，它不会帮助你”的纯粹猜测，所以如果你有可能尝试一下，那就去做吧。但是不要花太多时间在它上面，每尝试将编译时间减半，试着估计一下你（或你的同事，如果你有的话）重建项目的频率，以及它与可能节省的时间。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-04T10:31:09.760

C++ 编译/链接受处理速度的限制，而不是 HDD I/O。这就是为什么您没有看到编译速度有任何提高的原因。（将编译器/链接器二进制文件移动到 SSD 将无济于事。当您编译一个大项目时，编译器/链接器和必要的库会被读入一次内存并留在那里。）

在编译 C 项目时，我已经看到将工作目录移动到 SSD 或 ramdisk 有一些小的加速（这比大量使用模板等的 C++ 项目花费的时间要少得多），但还不足以让它值得。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T14:04:45.260

[我发现，当代码位于 SSD（具有八核Core i7、12](https://en.wikipedia.org/wiki/Intel_Core#Core_i7) GB RAM的系统）上时，编译大约 100 万行 C++ 的项目的速度提高了大约两倍。实际上，我们获得的最佳性能是为系统使用一个 SSD，为源使用第二个 SSD——这并不是说构建速度快得多，而是操作系统在进行大型构建时响应速度更快。

产生巨大差异的另一件事是启用并行构建。请注意，有两个单独的选项都需要启用：

*   菜单*工具*→*选项*→*项目和解决方案*→并行项目构建的最大数量
*   项目属性 → *C++/General* →*多处理器编译*

多处理器编译与其他几个标志（包括最小重建，我认为）不兼容，因此请检查输出窗口是否有警告。我发现在设置 MP 编译标志的情况下，所有内核的负载都接近 100%，因此您至少可以看到 CPU 正在被积极使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-04T22:52:47.573

没有提到的一点是，当使用[ccache](https://ccache.samba.org/)和高度并行的构建时，您会看到使用 SSD 的好处。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-08-28T19:10:01.283

我确实用 SSD 替换了我的硬盘驱动器，希望它能减少我的 C++ 项目的编译时间。简单地用 SSD 替换硬盘驱动器并不能解决问题，并且两者的编译时间几乎相同。

然而，在最初的失败之后，我成功地将编译速度提高了大约六倍。

执行以下步骤以提高编译速度。

1.  关闭休眠：命令提示符中的“powercfg -h off”

2.  关闭 C 盘上的驱动器索引

3.  将页面文件缩小到 800 min/1024 max（最初设置为系统管理的 8092 大小）。

# tomcat - 响应标头中没有内容编码

> ID：15199357
> 
> 赞同：1
> 
> 时间：2013-03-04T10:26:32.887
> 
> 标签：tomcat, gzip, content-encoding, response-headers

/Tomcat 6.0/conf 中的 server.xml 文件如下所示。

```
<?xml version='1.0' encoding='utf-8'?>
<Server port="8005" shutdown="SHUTDOWN">
  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <GlobalNamingResources>    
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <Service name="Catalina">  

<Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443"
 useSendfile="false" compression="force" noCompressionUserAgents="gozilla, traviata"
 compressionMinSize="10" compressableMimeType="text/html,text/xml,text/json,text/javascript,text/css,text/plain,application/javascript,application/xml,application/xml+xhtml"/>

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <Engine name="Catalina" defaultHost="localhost">

    <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

    <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

      </Host>
    </Engine>
  </Service>
</Server> 
```

我参考了很多网站。所有人都在说同样的话。我也这样做过。但是为什么我不能做出想要的输出。gzip 不工作。**响应标头中没有内容编码**。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T14:29:26.187

tomcat 需要一些额外的设置来理解 gzip 响应

[试试这个链接](http://learningviacode.blogspot.in/2012/11/gzip-your-tomcat-response.html)

# primefaces - 具有多列排序的惰性数据模型不起作用

> ID：15199358
> 
> 赞同：3
> 
> 时间：2013-03-04T10:26:36.397
> 
> 标签：primefaces

使用具有多重排序的 LazyDataModel 我得到 NullPointerException。当我使用 sortMode="multiple" 时，加载方法在属性 List multiSortMeta 处采用空值

我的 xhtml

```
<h:panelGroup id="processPanel">
            <p:dataTable id="processTable" value="#{hubProcessBean.processModel}"
                var="process" paginator="true" paginatorAlwaysVisible="false"
                 rows="5" lazy="true" sortBy="#{process.transactionId}" sortOrder="ascending" rows="5" lazy="true" sortMode="multiple" resizableColumns="true"> 
```

在我打电话的豆子里

```
processModel_ = new TransactionLazyDataModel(criteria); 
```

我的 LazyDataModel 是

```
@Override
    public List<Transaction> load(int first, int pageSize, List<SortMeta> multiSortMeta, Map<String,String> filters) {
        try {
            HibernateUtil.beginTransaction();
            transactionList = transactionHome.loadByCriterion(criterias_,first, pageSize, multiSortMeta);
            for (Transaction tr : transactionList) {
                Hibernate.initialize(tr.getAgency());
                Hibernate.initialize(tr.getClient().getId().getClientName());
                Hibernate.initialize(tr.getDecisionrule().getId());
                //Hibernate.initialize(tr.getEscalationhistory().getEscalationtype().getEscalationTypeId());
                Hibernate.initialize(tr.getUserByBuyer());
                //Hibernate.initialize(tr.getDecisionrule().getId());
            }
            HibernateUtil.commitTransaction(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:55:13.540

Multisort 正在使用 sortMeta 对象

# php - PDO::FETCH_CLASS 如何在调用构造函数之前填充对象属性？

> ID：15199359
> 
> 赞同：4
> 
> 时间：2013-03-04T10:26:40.797
> 
> 标签：php, pdo

`PDO::FETCH_CLASS`允许使用预先填充的数据初始化类实例。它看起来像这样：

```
<?php
class Bar {
    private $data = [];

    public function __construct ($is) {
        // $is === 'test'
        // $this->data === ['foo' => 1, 'bar' => 1]
    }

    public function __set($name, $value) {
        $this->data[$name] = $value;
    }
}

$db
    ->query("SELECT `foo`, `bar` FROM `qux`;")
    ->fetchAll(PDO::FETCH_CLASS, 'Bar', ['test']); 
```

或者，可以`PDO::FETCH_PROPS_LATE`在触发 setter 之前调用构造函数。

我很想知道 PDO 如何在调用构造函数之前设法通过 setter 填充 Class 实例，或者更具体地说，是否有办法复制这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:31:42.510

在 PHP 5.4+ 中可以使用[ReflectionClass::newInstanceWithoutConstructor](http://php.net/manual/en/reflectionclass.newinstancewithoutconstructor.php)来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T21:55:04.733

为此，我这样做：

我在我的超类中声明了这个神奇的方法

```
 public function __set($name, $value) {
    $method = 'set' . str_replace('_', '', $name); //If the properties have '_' and method not
    if (method_exists($this, $method)) {
        $val = call_user_func(array($this, $method), $value);
    }
} 
```

它对我很有效

# java - 以编程方式创建时 Primefaces Datatable sortField null 和过滤器映射 {}

> ID：15199363
> 
> 赞同：4
> 
> 时间：2013-03-04T10:26:51.830
> 
> 标签：java, jsf, jsf-2, primefaces, datatable

当以编程方式创建惰性数据表（使用绑定和 valExp）时，sortField 始终为空，排序顺序为升序，过滤器映射 {}。那是单击排序字段或在过滤器字段中键入字符串。

在没有绑定的情况下完成相同操作时，一切都在 xhtml 视图中，一切都像宣传的那样工作。我还查看了 PhaseListener 加载顺序，在这两种情况下都没有发现任何不同，只是一开始它不起作用。

TestController 是@ViewScoped。尝试使用 PF 版本 3.5、3.4.2、3.3.1、3.3。

我做错了吗？

看法

```
<p:dataTable binding="#{testController.datatable}" />   

  <p:dataTable value="#{testController.testModel}" var="val" rows="5" lazy="true">
     <p:column sortBy="#{val}">
        #{val}
     </p:column>
  </p:dataTable> 
```

一代

```
datatable = new DataTable();
  datatable.setValueExpression("lazy",createValueExpression("true", Boolean.class));
  datatable.setValueExpression("rows",createValueExpression("10", Integer.class));
  datatable.setValueExpression("value",createValueExpression("#{testController.testModel}", DataModel.class));
  datatable.setVar("val");

  Column column = new Column();
  column.setValueExpression("sortBy", createValueExpression("#{val}", String.class));

  HtmlOutputText output = (HtmlOutputText) application.createComponent(HtmlOutputText.COMPONENT_TYPE);
  output.setValueExpression("value", createValueExpression("#{val}", String.class));

  column.getChildren().add(output);

  datatable.getChildren().add(column); 
```

模型

```
public List<String> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
    List<String> modelMock = new ArrayList<String>() {
        {
            add("abc");
            add("def");
        }
    };
    if (LOGGER.isDebugEnabled()) {
        LOGGER.debug("load()");
    }

    if (LOGGER.isDebugEnabled()) {
        LOGGER.debug("first " + first + " pageSize" + pageSize);

        LOGGER.debug("sortField -> " + sortField);
        LOGGER.debug("sortOrder -> " + sortOrder);
        LOGGER.debug("filters -> " + filters);
    }

    this.setRowCount(modelMock.size());

    return modelMock;
} 
```

调试输出

```
11:12:24,426 DEBUG TestModel:33 - load()
11:12:24,426 DEBUG TestModel:37 - first 0 pageSize10
11:12:24,426 DEBUG TestModel:39 - sortField -> null
11:12:24,426 DEBUG TestModel:40 - sortOrder -> ASCENDING
11:12:24,426 DEBUG TestModel:41 - filters -> {} 
```

第二个数据表证明当它不与绑定一起使用时，它可以工作

```
11:21:25,677 DEBUG TestModel:33 - load()
11:21:25,677 DEBUG TestModel:37 - first 0 pageSize5
11:21:25,677 DEBUG TestModel:39 - sortField -> val
11:21:25,677 DEBUG TestModel:40 - sortOrder -> DESCENDING 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:37:37.707

**“绑定**”元素和“ **@ViewScoped** ”范围之间存在问题。您可以在此处阅读更多信息：http: [//balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html#HeyTheresPitfallsInTheTitle](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html#HeyTheresPitfallsInTheTitle)

如果您想保持绑定和当前范围，一种解决方案是启用组件的完整状态保存。**您可以通过将其添加到web.xml**来为指定页面设置它

 **```
<context-param>
    <!-- For Bug Fixing Viewscope beans with binding component attributes -->
    <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
    <param-value>/faces/myPageWithBindings.xhtml</param-value>
</context-param> 
```**

# android - 在另一个类中获取变量形式的自定义适配器

> ID：15199366
> 
> 赞同：1
> 
> 时间：2013-03-04T10:27:00.590
> 
> 标签：android

我在我的 ListView 内的 Checkboxes 上捕获单击事件，适配器构建并构建我需要在启动 ListView 的视图中使用的一个ArrayList

**HiddenChannelsListAdapter.java**

这是我在 getView() 中的 customAdapter 部分

```
public class HiddenChannelsListAdapter extends BaseAdapter {
     public ArrayList<String> slist;

CheckBox checkbox = (CheckBox) convertView.findViewById(R.id.check_channel);
        checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {

                if ( isChecked ) {
                    if ( !slist.contains(i.get("id")) )
                    slist.add(i.get("id"));
                } else {
                    for (int j=0;j<slist.size();j++) {
                        if ( slist.get(j) == i.get("id") ) {
                            slist.remove(j);
                        }
                    }       
                }
            }           
        }); 
```

现在在我的类 ChannelsDialogPreference.java 中：

```
 @Override
    public void onClick (DialogInterface dialog, int which)
    {
        super.onClick(dialog, which);
        if(which == -1) {
           **here I need that slist ArrayList**
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:33:56.860

在您的 ChannelsDialogPreference 中将您的`slist`arraylist 初始化为静态并更改 HiddenChannelsListAdapter 中的 slist 的值：

**在您的 HiddenChannelsListAdapter 内：**

```
CheckBox checkbox = (CheckBox) convertView.findViewById(R.id.check_channel);
        checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {

                if ( isChecked ) {
                    if ( !slist.contains(i.get("id")) )
                    ChannelsDialogPreference.slist.add(i.get("id"));
                } else {
                    for (int j=0;j<slist.size();j++) {
                        if ( slist.get(j) == i.get("id") ) {
                            ChannelsDialogPreference.slist.remove(j);
                        }
                    }       
                }
            }           
        }); 
```

**在您的 ChannelsDialogPreference 类中：**

```
 public static ArrayList<String> slist = new ArrayList<String>();
 @Override
    public void onClick (DialogInterface dialog, int which)
    {
        super.onClick(dialog, which);
        if(which == -1) {
         //Now your can Use your Updated slist  here.
        }
    } 
```

希望它会有所帮助。

# c - 如何将int的值转换为十六进制值并将其分配给变量？

> ID：15199370
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:27:23.850
> 
> 标签：c, int

我有一个变量：

```
int a = 10; 
```

我想将其转换为`0x`前面带有`10`as:的十六进制值`0x10`，并将其分配给其他变量，如何转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:28:30.150

使用[`snprintf()`](http://en.cppreference.com/w/c/io/fprintf)：

```
char buf[128];
snprintf(buf, 128, "0x%d", a); // buf = "0x10" 
```

然后使用`sscanf()`：

```
unsigned int new_a;
if (1 == sscanf(buf, "0x%X", &new_a))
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:35:15.237

如果您尝试将小数重新解释为十六进制，则问题意味着将多项式重新评估`A = a*10^n + b*10^(n-1) + ... + c`为`B=a*16^n + b*16^(n-1) + ... + c`

```
 1 1 2 3  = 1*1000 + 1 * 100 + 2 * 10 + 3
(0x) 1 1 2 3  = 1*4096 + 1 * 256 + 2 * 16 + 3 (=4387 dec) 
```

找到具有重复模数并除以 10 的系数，并将结果与​​ 16 的适当幂相乘。（使用移位实现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:32:10.697

这是一个代表性的问题。您可以轻松地将十进制值表示为十六进制

```
print("0x%x", a); 
```

`0xa`这将在您的特定情况下打印出来。因为`C`如果您有 0xa 或 10 或 012，这无关紧要。

# c++ - 如何从模板派生类的模板基类调用成员？

> ID：15199372
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:27:32.630
> 
> 标签：c++, templates, token-name-resolution

使用此设置：

```
template<int N>
struct Base {
    void foo();
};

class Derived : Base<1> {
    static void bar(Derived *d) {
        //No syntax errors here
        d->Base<1>::foo();
    }
}; 
```

一切正常。但是，对于这个例子：

```
template<class E>
struct Base {
    void foo();
};

template<class E>
class Derived : Base<E> {
    static void bar(Derived<E> *d) {
        //syntax errors here
        d->Base<E>::foo();
    }
}; 
```

我得到：

```
error: expected primary-expression before '>' token
error: '::foo' has not been declared 
```

有什么不同？为什么第二个会导致语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:43:50.930

假设您的代码在 Clang 3.2（请参见[此处](http://liveworkspace.org/code/3COedR%2415)）和 GCC 4.7.2（请参见[此处](http://liveworkspace.org/code/3COedR%2416)）上编译良好，我看不出使用的理由`Base<E>::`：只需使用`d->foo()`：

```
template<class E>
struct Base {
    void foo() { }
};

template<class E>
struct Derived : Base<E> {
    static void bar(Derived<E> *d) {
        //syntax errors here
        d->foo();
    }
};

int main()
{
    Derived<int> d;
    Derived<int>::bar(&d);
} 
```

或者，您可以尝试使用`template`消歧器：

```
d->template Base<E>::foo(); 
```

# magento - 在块中获取会话-Magento

> ID：15199374
> 
> 赞同：0
> 
> 时间：2013-03-04T10:27:34.030
> 
> 标签：magento, session, block

`Mage::getSingleton("core/session")->setCustomPriceValue($myvalue);`我在我的前端 phtml 文件中设置了一个会话。

为了获得我在我`Mage::getSingleton("core/session")->getCustomPriceValue();`的一个块中调用的值，`Mage_Adminhtml_Block_Sales_Order_Create_Totals_Shipping`...

但我无法获得那里的价值。

我也试过`Mage::getSingleton("adminhtml/session")`了。但它也失败了！:(

有人能指出为什么吗？

# javascript - 左侧 Treeview 和右侧相关内容 div

> ID：15199375
> 
> 赞同：-2
> 
> 时间：2013-03-04T10:27:35.393
> 
> 标签：javascript, jquery, css

嗨，任何人都可以帮助我如何在左侧显示 Treeview，并在右侧显示相关内容。

我已经从这个站点下载了 Treeview 结构：http: [//www.destroydrop.com/javascripts/tree/](http://www.destroydrop.com/javascripts/tree/)

```
d = new dTree('d'); d.add(0,-1,'StratApps');
d.add(1,0,'First Folder','page1.html')
d.add(2,1,'Packages','page2.html');
d.add(3,2,'Pkg_Load_Dim','page3.html');
d.add(4,2,'Pkg_Write_to_File','#');
d.add(5,1,'Interfaces','#');
d.add(6,5,'Int_Load_Order_Dim','#');
d.add(7,5,'Int_Load_Channel_Dim','#');
d.add(8,1,'Procedures','#');
d.add(9,8,'Proc_Update_Order','#');
d.add(10,8,'Proc_Process_Errors','#');
document.write(d); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:01:05.643

包括

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

添加

```
<div class="content"></div> 
```

和

```
 <script>
    $(document).ready(function(){
        $('a').click(function(e){
           e.preventDefault();
           $(".content").text($(this).attr('id'));
// you can write the code here to populate your required content area eg:div, span, p
        })
    })
    </script> 
```

这会将单击的“a”的 id 加载到带有类内容的 div

编辑：处理内容和匹配的“a”标签之间的关系

# css - 禁用或启用css中另一个类的类的可见性

> ID：15199377
> 
> 赞同：1
> 
> 时间：2013-03-04T10:27:40.917
> 
> 标签：css

当我将鼠标悬停在 CSS 中的父类上时，我在启用类的可见性时遇到了困难。即我想在菜单类上启用悬停效果的子菜单类。我的html代码如下：

```
<li class="menu"><a href="#">Link</a></li>
        <ul class="subMenu">
            <li><a href="#">Link A</a></li>
            <li><a href="#">Link B</a></li>
            <li><a href="#">Link C</a></li>
        </ul> 
```

对应的css如下：

```
 .subMenu
{
    display:none;
    visibility:hidden;
}

.menu:hover .subMenu
{
    display:inherit;
    visibility:visible;    
} 
```

现在我对悬停效果有困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:29:50.073

您需要`menu ul`在 main中添加 sub `li`。目前它在外面，`li`所以它在悬停时不可见。

像这样更改您的html

```
<ul>
    <li class="menu"><a href="#">Link</a>
        <ul class="subMenu">
            <li><a href="#">Link A</a></li>
            <li><a href="#">Link B</a></li>
            <li><a href="#">Link C</a></li>
        </ul>
    </li>
</ul> 
```

[**演示**](http://jsfiddle.net/VSEHr/1/)

# javascript - jquery中双击事件获取表的rowid

> ID：15199378
> 
> 赞同：2
> 
> 时间：2013-03-04T10:27:42.473
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-4

我正在使用 mvc4 和 jquery。

我正在尝试找到一种方法来使整行触发双击事件。

我的场景是，包含参数 Person ID、FirstName 和 Lastname 的模型。

但 html 表只显示 FirstNmae 和 Lastname。

在哪里存储人员 ID，如果它隐藏它也不会进入 javascript 和空间问题。

我的需要是使行可双击，然后获取 personID，其次是对最终用户隐藏人员 ID。

为了获得我使用的personid，

```
$('#EditTable td').dblclick(function () {
    $(this).find('td:eq(1)')
    $(this).find('td:first').text()
} 
```

但没有得到任何价值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T10:30:16.047

**解决方案**

问题是事件正在为`td`元素触发，因此`this`指的是`td`元素。您需要获取父级`tr`，然后调用该`find`函数。

像这样的东西：

```
$('#EditTable td').dblclick(function () {
    var $this = $(this);
    var row = $this.closest("tr");
    row.find('td:eq(1)');
    row.find('td:first').text();
}); //<-- NOTE: you dont close correctly in your example, which cause console errors 
```

[这是一个工作示例。](http://jsfiddle.net/nXyxS/)

* * *

**或者**，您可以将事件分配给`tr`元素，这将允许您保留原始功能代码...

```
$('#EditTable tr').dblclick(... 
```

* * *

**就个人而言**，我更喜欢使用`data`属性存储“元数据”类型的东西。例如：

```
$('#EditTable td').dblclick(function () {
    var $this = $(this);
    var row = $this.closest("tr");
    var id = row.data("id");
}); 
```

使用以下 html 表：

```
<table id="EditTable">
    <tr data-id="1">
        <td>1</td><td>One</td>
    </tr>
</table> 
```

[这是一个使用数据属性的工作示例。](http://jsfiddle.net/nXyxS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:36:36.657

实际上，您可以使用方法将模型详细信息存储在 DOM 树中`$.data('personID',1)`。这样，您可以`personID`对用户隐藏。当用户dbl点击一行时，得到对应的`personID`like`$.data('personID')`

```
//setting the personID
$.data('personID',2);

//getting the personID
$.data('personID'); //returns 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:30:37.873

你必须写：

```
// You want event fired on row `tr` and not on `td`
$('#EditTable tr').dblclick(function () {
    $(this).find('td:eq(1)')
    $(this).find('td:first').text()
} 
```

**编辑**

最好的方法是：

```
$('#EditTable').on(dblclick, 'tr', function () {
    var $rowClicked = $(this);
    var secondCell = $rowClicked.find('td:eq(1)');
    var textOfFirstCell $rowClicked.find('td:first').text();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:31:06.197

试试这个

```
$('#EditTable tr').dblclick(function () {
  var $this=$(this);
  $this.find('td:first').text(); //get personid
  $this.find('td:first').hide(); //hide the personrow... u can use remove()
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T10:34:10.190

试试这个：

```
 $('#EditTable tr').dblclick(function () {
   $(this).find('td:eq(1)')
   $(this).find('td:first').text()
 }); 
```

尝试进行迭代`TRs`，这可能是一个错字，或者你在关闭时遇到的错误应该是`});`

# ios - 在 UINavigationController 中添加 UISegmentedControl 作为 titleView

> ID：15199383
> 
> 赞同：2
> 
> 时间：2013-03-04T10:28:06.317
> 
> 标签：ios, objective-c, uinavigationcontroller, uisegmentedcontrol, titleview

我正在尝试以`UISegmentedControl`编程方式添加`titleView`一个`UINavigationController`. 但它没有出现。经过进一步调查，我发现如果未根据[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)`titleView`设置为，则该属性将被忽略。所以我将它设置为但分段控件仍然没有显示出来！`leftBarButtonItem``nil``nil`

下面是我的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.leftBarButtonItem = nil;
    UISegmentedControl *statFilter = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Personnal", @"Department", @"Company", nil]];
    [statFilter setSegmentedControlStyle:UISegmentedControlStyleBar];
    self.navigationItem.titleView = statFilter;
} 
```

我应该怎么办？我在这里想念什么？

谢谢。

**编辑**：

感谢所有的回复。但是，它们都不适合我，所以我进行了更深入的研究。这一定是我布置申请的方式。我可能应该早点提到这一点。道歉。

我正在创建的是一个 Storyboard 应用程序。主控制器是一个`UITabBarController`. 单击某个选项卡时，我想显示一个`UITableViewController`. 由于您无法在 a 中显示导航栏`UITableViewController`，因此我发现我必须在其中添加 a`UINavigationController`并实现 a `UITableViewController`。这就是我的应用程序的基本外观，

[![在此处输入图像描述](../Images/d9e27775932ad27e363b5634fb3d234d.png)](https://i.stack.imgur.com/Vk0m7.png)

该仪表板视图控制器连接到从类继承的`UINavigationController` 类。也许这就是问题所在？

因为我刚刚创建了一个小型测试应用程序，所以将 a`UIViewController`嵌入到 a 中`UINavigationController`并编写了我在上面的原始问题中发布的代码`UIViewController`ViewDidLoad 和分段控件显示得很好。现在我不知道如何在我的主应用程序中做同样的事情，因为没有其他视图控制器或任何连接到导航控制器的东西。

对不起，如果我让事情变得更糟。如果有任何不清楚的地方，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:33:00.390

我猜你必须让 UISegmentedControll 成为 UIBarButtonItem：

更新：此代码使 SegmentedControll 居中：

```
- (void)viewDidLoad{
    self.title = nil;
    UISegmentedControl *statFilter = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Personnal", @"Department", @"Company", nil]];
    [statFilter setSegmentedControlStyle:UISegmentedControlStyleBar];

    NSMutableArray *buttonArray     = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexibleSpace  = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [buttonArray addObject:flexibleSpace];
    [buttonArray addObject:[[UIBarButtonItem alloc] initWithCustomView:statFilter]];
    [buttonArray addObject:flexibleSpace];

    self.navigationItem.leftBarButtonItems = buttonArray;
    [buttonArray release];
} 
```

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:35:54.737

使用这个我希望这会帮助你

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView * navview = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 160,80)];
    self.navigationItem.leftBarButtonItem = nil;
    UISegmentedControl *statFilter = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Personnal", @"Department", @"Company", nil]];
    [navview addSubview:statFilter];
    self.navigationItem.titleView = navview;
} 
```

# android - 为 Android 应用程序的 VideoView 提取视频。

> ID：15199391
> 
> 赞同：1
> 
> 时间：2013-03-04T10:28:35.437
> 
> 标签：android, android-videoview, mediacontroller

所以我试图设置一个活动，用户可以在其中浏览他各自存储中的视频，然后使用 VideoView 播放它。我怎样才能做到这一点？我在下面写了一些代码。

另外我使用的是 Nexus 7，所以它没有 SD 卡。如何制作通用代码以从内部/外部存储器中获取视频？

```
public class VideoCapture extends Activity {

  private static final int INSERT_ID = Menu.FIRST;

  @Override
  public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.gc();
        String filename = "/sdcard/Video/sample.mp4";
        //String fileName = "android.resource://" + getPackageName() + "/" + R.raw.sample;
        VideoView videoView1 = (VideoView)findViewById(R.id.videoView1);
        setContentView(videoView1);
        videoView1.setVideoPath(filename);
        videoView1.setMediaController(new MediaController(this));
        videoView1.requestFocus();
        videoView1.start();
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
      super.onCreateOptionsMenu(menu);
      menu.add(0, INSERT_ID, 0,"FullScreen");

      return true;
  }

  @Override
  public boolean onMenuItemSelected(int featureId, MenuItem item) {
      switch(item.getItemId()) {
      case INSERT_ID:
          createNote();
      }
      return true;
  }

  private void createNote() {
        requestWindowFeature(Window.FEATURE_NO_TITLE);  
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,   
                             WindowManager.LayoutParams.FLAG_FULLSCREEN);  
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:43:55.927

没关系，我想我明白了。我只需要将视频URI 设置为我从图库中选择的视频并播放它。如果有人需要帮助设置它，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:01:48.130

为您的 Activity创建`ListView`该 ListView 还创建适配器类
，然后将以下代码添加到 Activity

```
private List <String> getSD()
{
    List <String> it = new ArrayList <String>();
    File f = new File (Environment.getExternalStorageDirectory()+File.separator+"Vidoes");
        // to get Internal Storage use File m_applicationDir = new File(this.getFilesDir() + "");
        //File f = new File(m_applicationDir + "/Vidoes");
    File[] files = f.listFiles ();

    for (int i = 0; i <files.length; i++)
    {
        File  file = files[i];
        Log.d("Count",file.getPath());
        it.add (file.getPath());
    }
    return it;
} 
```

将此列表设置为您的列表适配器。并通过点击列表项播放您的视频

# selenium-webdriver - 如何将部分输入传递到 Selenium WebDriver 中的下拉列表？

> ID：15199393
> 
> 赞同：0
> 
> 时间：2013-03-04T10:28:56.353
> 
> 标签：selenium-webdriver

我有一个选项按钮。选项按钮内的值看起来像“猫动物”、“鹦鹉鸟”、“鳄鱼爬行动物”。现在我需要将部分输入作为“Cat”传递给选项按钮，以便选择“Cat animal”。我怎么能这样做。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T07:41:17.763

考虑下面的html片段

```
<select id='Combo'>
   <option value="test1234"> Hello World</option>
   <option value="test2345"> Stack overflow </option>
</select> 
```

这是使用部分文本和值选择选项的逻辑

```
By select = By.id("Combo");
String partialText="overflow"

SelectByPartialText
driver.findElement(select).findElement(By.xpath(".//option[contains(text(),'"+partialText+"')]")).click();

SelectByPartialValue
driver.findElement(select).findElement(By.xpath(".//option[contains(@value,'1234')]")).click(); 
```

# ruby-on-rails - 如何从 Rails 中的日期时间中删除毫秒？

> ID：15199394
> 
> 赞同：34
> 
> 时间：2013-03-04T10:29:02.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime

我必须比较 rails 中的日期以获取该日期之后的值我已发送日期，`"2013-03-04T06:26:25Z"`但实际上数据库中的记录包含日期如下`2013-03-04 06:26:25.817149`，所以当我检查日期时它也返回该记录但我想要在那之后的记录日期。如何从数据库中删除毫秒？请帮我。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-04T10:33:02.043

我有一个类似的问题

在将时间对象发送到数据库之前，像这样更新您的时间对象：

```
time.change(:usec => 0) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-04-12T09:29:33.930

由于 ruby​​ 1.9 你可以使用`round`

```
t = Time.now.round
t.usec # => 0 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-17T01:55:21.513

我也遇到了这个问题，但是当我[按照@Intrepidd 的回答中所示](https://stackoverflow.com/a/15199496/1454953)应用更改时，它并没有影响我的时间对象的微秒。

请注意（至少目前）该`:usec`密钥仅适用于该[`Time#change`](http://api.rubyonrails.org/classes/Time.html#method-i-change)方法，**而不适用**于该[`DateTime#change`](http://api.rubyonrails.org/classes/DateTime.html#method-i-change)方法。

该方法会忽略它不接受的键，因此除非您进一步检查对象（例如 with ）`DateTime#change`，否则您将无法判断您尝试的微秒更改不起作用。`DateTime#rfc3339(9)`

因此，在尝试进行此更改之前，请确保您使用的是`Time`对象，而不是`DateTime`对象。

# jsf-2 - 更新视图参数而不重定向页面

> ID：15199396
> 
> 赞同：2
> 
> 时间：2013-03-04T10:29:07.090
> 
> 标签：jsf-2, viewparams

是否可以在不重定向页面的情况下更新视图参数？例如

我有一个托管 bean，它检查 ID 是否存在

```
public void signIn(){
    Client c = clientFacade.loginDetail(client.getID());

    if (c != null) {
        loggedIn = true;  
    }
    else{
        loggedIn = false;
    }
} 
```

以及如果 ID 存在则呈现良好的视图。

```
<h:panelGroup rendered="#{not applicationManager.loggedIn}">
    <p:commandLink value="Sign In" onclick="loginDialog.show()" styleClass="login-link"></p:commandLink>
</h:panelGroup>
<h:panelGroup rendered="#{applicationManager.loggedIn}">
    <p:menuButton value="#{applicationManager.client.firstname}" />
</h:panelGroup>

<p:dialog widgetVar="loginDialog" >
    <h:panelGrid columns="2" cellpadding="5">
        ID :    <p:inputText value="#{applicationManager.client.id}" />
        <p:commandButton value="submit" action="#{applicationManager.signIn()}" update=":loginForm" />
    </h:panelGrid>
</p:dialog> 
```

是否可以在视图顶部插入下面的代码并且仍然对 url 进行更新？

```
<f:metadata>
    <f:viewParam name="input" value="#{applicationManager.client.id}" />
    <f:event listener="#{applicationManager.signIn()}" type="preRenderView"/>
</f:metadata> 
```

我试过了，但它不起作用，所以我想我可能错过了什么或做错了什么。

# unix - 使用 sed、awk 或 vim 修改/操作文本

> ID：15199399
> 
> 赞同：0
> 
> 时间：2013-03-04T10:29:18.030
> 
> 标签：unix, vim, text, sed, awk

我正在尝试从以下位置操作此文本文件：

```
>hg19_ct_UserTrack_3545_MACS_peak_2 range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA 
```

到

```
>MACS_peak_2_range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA 
```

我一直在使用 sed 和 vim 来获取它，但是我无法获得第一行所需的空格或确切信息的组合（没有它程序就无法工作）

谢谢哈丽特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:36:41.197

如果`MACS_peak_2`是固定字符串：

```
sed 's/>.*MACS/>MACS/; s/ /_/' file 
```

会做的工作：

```
kent$  echo ">hg19_ct_UserTrack_3545_MACS_peak_2 range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA"|sed 's/>.*MACS/>MACS/; s/ /_/'
>MACS_peak_2_range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA 
```

如果您想在**vim**中执行此操作：

```
:g/^>hg/s/hg.*MAC/MAC/|s/ /_/ 
```

此行将替换所有以 开头的行`>hg`，试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:42:36.820

下面进行就地替换。执行命令后，文件将被更改。

```
perl -pe 's/^\>.*?(MACS_peak.*)/>$1/g' your_file 
```

看下面的测试：

```
> cat temp
>hg19_ct_UserTrack_3545_MACS_peak_2 range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA
> 
> 
> 
> 
> perl -pe 's/^\>.*?(MACS_peak.*)/>$1/g' temp
>MACS_peak_2 range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA
> 
> 
> 
> perl -pi -e 's/^\>.*?(MACS_peak.*)/>$1/g' temp
> 
> 
> 
> cat temp
>MACS_peak_2 range=chr1:777590-777790 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCACCCACCGAAGTTGTTTGGTCCCAATCTGCAAAATCAGTTAAACGTC
TTCCTGCCTGGCAGCAGATCAAAGGGTGAGGGGTCTGGGACAGACAGAGA
CGGCTAGAGAATGGATGGTGAAGTGCTCAGAGGCCCTGTGGGCTATCCCA
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:44:39.600

使用 awk（因为 Kent 提供了 sed 解决方案）

```
awk '/^>/sub(/hg19_ct_UserTrack_3545_/, "")' input 
```

要将第一个空格更改为下划线，请添加另一个子：

```
awk '/^>/sub(/hg19_ct_UserTrack_3545_/, "");sub(/ /, "_")' input 
```

sed 可能是解决此问题的更好方法。

# c++ - 什么是 意思是？这种技术叫什么名字？

> ID：15199400
> 
> 赞同：0
> 
> 时间：2013-03-04T10:29:22.000
> 
> 标签：c++, templates

如果我定义这样的类

```
template <class T> class A { }; 
```

当我如何使用参数时`T = int(int)`？这个代码我以前从未见过，我在哪里可以找到一些关于它的网页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:30:36.757

`int(int)`是一个函数类型。它是一个函数的类型，它接受一个`int`并返回一个`int`.

# android - 活动结果始终为 0

> ID：15199404
> 
> 赞同：2
> 
> 时间：2013-03-04T10:29:28.787
> 
> 标签：android, file, gallery, filechooser

我整天搜索这个问题：

```
mUploadImage.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
            intent.setType("image/*");

            startActivityForResult(
                    Intent.createChooser(intent, "Select a Picture"),
                    FILE_SELECT_CODE);
        }
    }); 
```

每当我单击 mUploadImage OnActivityResult() 方法时，它将立即被触发（尽管我还没有选择任何文件）并且结果代码始终为 0。有人可以帮助我吗？

编辑：（来自下面的评论）

```
protected void onActivityResult(int arg0, int arg1, Intent arg2) {
    if (arg0 == FILE_SELECT_CODE) {
        Log.v(TAG, "Selected a image. Result code: " + arg1);
        if (arg1 == Activity.RESULT_OK) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:56:40.770

检查这些答案。他们都说活动的launchMode和立即报告结果之间存在依赖关系

[onActivityResult() 过早调用](https://stackoverflow.com/questions/3354955/onactivityresult-called-prematurely)

[Android - startActivityForResult 立即触发 onActivityResult](https://stackoverflow.com/questions/7910840/android-startactivityforresult-immediately-triggering-onactivityresult)

[onActivityResult() 在意外的时间被调用](https://stackoverflow.com/questions/8460250/onactivityresult-is-being-called-at-an-unexpected-time)

# navigation - 表达式引擎中的面包屑

> ID：15199405
> 
> 赞同：0
> 
> 时间：2013-03-04T10:29:29.617
> 
> 标签：navigation, expressionengine

我在表达式引擎中为我的面包屑使用了易碎的插件。如果显示子类别，我希望添加显示父类别。

URL 如下所示：

```
1\. http://test/test1/news    and the parent category is the news.
2\. http://test/test1/births  and the births is the subcategory for news. 
```

我希望我的导航如下所示（如果用户当前正在查看出生）

```
test/ test1/ news / births 
```

我需要强调这是在每个页面上动态完成的。

问候和感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T09:51:03.357

我打算建议只使用这个优秀的模块：

[低 Seg2Cat](http://gotolow.com/addons/low-seg2cat)

但是，您的 URL 不是嵌套类别，因此您需要使用此模块

[类别网址](http://devot-ee.com/add-ons/category-url)

要输出您的类别链接，然后使用 Seg2Cat 抓取 {segment_url} 并手动为新闻页面构建您的 crumbs，即

主页 > 新闻 >**家长 > 孩子 > 文章标题**

会是这样的：

{segment_2_category_name} {segment_3_category_name} {segment_4_category_name}

# azure - Azure 网站和 Azure 云服务有什么区别

> ID：15199408
> 
> 赞同：6
> 
> 时间：2013-03-04T10:29:35.230
> 
> 标签：azure, azure-web-app-service

我们正在寻找托管一个网站（一些 css，js，一个 html 文件，但不是 aspx，一个通用处理程序）。

我们部署为：

1) Azure 网站

2) Azure 云服务

两种解决方案都有效。但是有一个问题：哪种托管方式更好，为什么？第二件事：因为可能会有很多流量 - 哪种解决方案会更便宜？

提前致谢， Krzysztofuncjusz

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T19:28:17.283

您可能想查看[这篇解释主要差异的文章](http://azure.microsoft.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/)。网站最适合运行相对隔离的 Web 应用程序（不需要提高安全性、远程桌面、网络隔离......）。云服务更先进，因为它们让您可以更好地控制网站，同时仍然保持灵活性。虚拟机用于完全控制需要安装和配置的应用程序（例如运行 SQL Server）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:19:38.973

我认为修改 VM 的能力和配置可扩展性的可能性的主要区别。网站类似于经典主机，无法通过 rdp 登录。云服务允许您配置 VM，并在必要时设置可扩展性和可用性。

# c++ - 确定应用程序中的多个线程是否正在调用 dll - 使用 ThreadId？

> ID：15199411
> 
> 赞同：-3
> 
> 时间：2013-03-04T10:29:37.707
> 
> 标签：c++, dll

我创建了一个静态 dll 文件以供某个应用程序使用。我想知道该 dll 的导出方法是由该应用程序的单独线程还是由单个线程调用的。我在想，如果我输出调用 dll 中方法的线程的 threadid，这可能有助于我确定该函数是由单个线程还是多个线程调用的。这会有帮助吗？另外，我将如何获取调用 dll 的线程的 threadid ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:32:09.297

使用[GetCurrentThreadId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183%28v=vs.85%29.aspx)函数。

```
std::vector<DWORD> ids;

__declspec(dllexport) int __stdcall SomeFunction()
{
    DWORD id = GetCurrentThreadID();
    if (std::find(ids.begin(), ids.end(), id) != ids.end())
    {
        // New thread uses this function
        ids.push_back(id);
    }
} 
```

# php - 如何有效地交付大量资产（图像）？

> ID：15199414
> 
> 赞同：1
> 
> 时间：2013-03-04T10:29:43.050
> 
> 标签：php, http, web-applications, nginx, varnish

我有一个网页，负责将 500 多张图片传送到浏览器。大小在 50kb 和 80kb 之间变化。

正在使用的服务器是 nginx，并且还使用了一个清漆代理。

现在，我怎样才能使这个过程尽可能地高效？

我只有两个想法，所以想从这里有经验的人那里得到一些意见。

我唯一的想法是：

1.  设置多个子域并从中批量提供服务。我相信最好使用的子域数是 12。

2.  仅在用户向下滚动时需要时才使用 ajax 将批处理加载到浏览器。

我认为这里的选项 2 并不能真正解决问题。只是绕过它。所以我想专注于让这个过程尽可能地最有效和最快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:08:34.437

您正在加载 1 个页面，其中包含 500*50kb ~ 25MB 的数据，这是一个完全疯狂的页面大小！

无论你做什么，与[目前大约 1 MB 的平均页面大小](http://httparchive.org/trends.php#bytesTotal&reqTotal)相比，它总是会感觉很慢。在需要时通过 AJAX 动态加载大部分内容更有意义。或者，您可以将其拆分为多个板块。

如果您真的设置在一个巨大的非动态页面上，那么：

*   确保您已将缓存标头设置为允许缓存（第一次加载时不会 hep）
*   主要问题（除了整体大小）是您需要的资源非常多。有 3 种方法可以限制其后果：
    *   使用分片（即不同的子域）。这是可行的，因为浏览器最多只能为每个主机打开 4 个连接，因此通过使用多个域，您可以并行请求/加载更多资源。
    *   将您的图像放在一个精灵中（即一个大图像，并使用 css 显示您想要的位）
    *   设置您的服务器以使用 google 的 SPDY。这几乎消除了大量资源的问题。缺点是它仍然是实验性的（即您需要使用补丁重新编译 nginx）并且尚未得到所有浏览器的支持

# c# - 如何在 asp .net C# 登录和注册 memberprofile 页面中创建会话

> ID：15199415
> 
> 赞同：3
> 
> 时间：2013-03-04T10:29:43.173
> 
> 标签：c#, asp.net

我是 ASP .net C# 的新手，我创建了注册、登录和会员资料页面

在所有验证数据都存储在数据库中之后..登录页面也可以正常工作...

我不知道会话..如何创建会话以及如何使用会话使登录模块更有效？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:39:20.663

1.  会话基于每个用户。
2.  您可以将会话存储在 SqlServer 中以减少服务器上的负载

你可以像这样创建会话

```
Session["yourKey"]=someValue; 
```

读取这个值

```
if(Session["yourKey"]!=null)
{
  //use the Session values. 
} 
```

您可以使用 Forms Authentication for Better Approach 进行登录。[表单认证](http://msdn.microsoft.com/en-us/library/9wff0kyh%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:32:12.263

会话是 asp.net 引擎在每次用户登录时为您创建的东西。这是一篇很好的文章开始：[Asp.net Session](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T23:15:11.150

使用`Session`是传递值的简单方法。

你可以这样做：

创建会话变量：

```
Session["name"] = "Any Name"; 
```

现在，让我们在另一个类中用这个变量创建一个条件：

```
if(Session["name"] == "Any Name")
{
    //To do Your Code Here
} 
```

# css - 960.gs 的固定流体固定布局

> ID：15199419
> 
> 赞同：4
> 
> 时间：2013-03-04T10:29:45.453
> 
> 标签：css, layout, grid, fluid-layout, 960.gs

我们的网站引擎使用 960.gs 网格系统，我正在尝试将其修改为 3 列 Fixed(100px)-Fluid(max to width)-Fixed(100px) 视图。不幸的是，所有 960.gs 在线发电机都只制作或完全固定或完全流体网格。所以我正在尝试将最初生成的全流体网格修改为这个视图：

```
<------------100%--------------->

======== =============== ========
| fixed| |max to screen| |fixed |
======== =============== ========

<-100px>                 <-100px> 
```

代码（修改后）：http: [//jsfiddle.net/vZm8x/](http://jsfiddle.net/vZm8x/)

*   问题 1) 我不确定如何使屏幕中央内容区域最大到左侧。因为宽度：自动；根本不起作用， width:100% 只是包装 div。
*   问题 2）在将所有 div 固定为 100px 后，它会继续包裹任何东西。（显示：内联；对任何想法都没有帮助吗？）

我的问题是：是否可以根据我们的需要修改 960.gs 模板？如果是，请给我任何建议来解决问题？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:18:29.797

使用固定宽度的侧栏，实际上非常容易。您将要使用浮点数，并且可能需要根据您的特定设计需求做一个[假列技巧。](http://alistapart.com/article/fauxcolumns)

你会想要一些类似的东西：

```
<div class="left"></div>
<div class="right"></div>
<div class="middle">Content</div> 
```

和：

```
div {
    /* border-box, to make sure "width" is our intended width */
    -moz-box-sizing: border-box; /* Firefox still uses prefix */
    box-sizing: border-box;
}

.left {
    float: left;
    width: 100px;
    background: #f00;
}

.right {
    float: right;
    width: 100px;
    background: #00f;
}

.middle {
    width: 100%;
    padding: 0 100px;
    background: #ccc;
} 
```

[在这里查看它的实际](http://jsfiddle.net/6tYHB/)效果（这没有假列效果，但应该给你一个起点）。如果您使用输出更改部分的宽度，您将看到列保持不变，并且内容保持在外部列的范围内。

内容列需要放在最后，因为它仍在文档流中，所以右列最终会在内容下方。

或者，您可以`position: absolute;`在侧列上使用以下内容：

```
.wrapper {
  position: relative; /* Constrains the columns within their parent. Not needed if parent is <body> */
}

.left {
  position: absolute;
  top: 0;
  left: 0;
}

.right {
  position: absolute;
  top: 0;
  right: 0;
}

.middle {
  padding: 0 100px;
}

div {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
} 
```

这些技巧适用于 IE8+、Firefox、Chrome、Safari 和 Opera。IE7 可能由于使用 W3C 框模型（“内容框”）而不识别`box-sizing`CSS 而出现问题，但如果您需要，[可以使用一些技巧](http://www.maratz.com/blog/archives/2012/08/01/emulate-box-sizing-in-ie7/)使其工作。IE6 应该没问题，因为它默认使用基于“border-box”的盒子模型。（您可能需要尝试`z-index`让 IE 正常运行。如果是这样，则设置`.middle{ position: relative; z-index: 1}`并添加`z-index: 2`到左右列。）

与浮动相比，该`position: absolute`技巧确实具有优势，因为您的侧边栏可以出现在内容 div 之前或之后，使其成为可能更具语义的选项。

这些工作的原因是因为a）您的侧列是固定的，所以我们只需将填充设置为这些列的宽度，并且b）`position: absolute`将`float: [left/right]`元素从文档流中取出，这意味着就文档而言，它们不存在并且不占用空间。这允许其他元素移动到这些元素曾经所在的位置，将它们层叠在一起。

# css - 表仅在 Firefox 中溢出父级的宽度。不是由填充/边距/边框引起的

> ID：15199420
> 
> 赞同：0
> 
> 时间：2013-03-04T10:29:45.547
> 
> 标签：css, firefox, overflow, css-tables

我有一张桌子，由于某种原因，它一直溢出其容器的宽度。在 chrome 中运行良好，但在 Firefox 中它只是拒绝。

网站可以在这里找到：`http://goo. gl/vkN5s`

我试过`box-sizing: border-box;`在桌子上使用（带 -moz 前缀），没有区别（我也不明白为什么它会有所作为）。表格中的图像有一些边距，但即使删除边距后，它仍然会溢出容器至少 20px。表格的宽度为 100%，因此它应该填满容器。td 的宽度为 50%。50% 的宽度足以容纳图像（即使有图像边距）。

我读过[类似的问题](https://stackoverflow.com/questions/3809804/css-table-width100-displayblock-not-working-in-firefox)，其中大部分建议删除填充/边距/边框并且没有`display: block;`（我没有）。我没主意了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T08:23:54.923

如果你使用`border-collapse:collapse`删除它。

# c# - 在 webbrowser 控件上启用 javascript win ec 7

> ID：15199421
> 
> 赞同：0
> 
> 时间：2013-03-04T10:29:46.603
> 
> 标签：c#, javascript, compact-framework, windows-ce

这是我在这里的第一篇文章。我在网上搜索了解决这个问题的方法，但我什么也没找到。我只读到Webbrowser在win ec7中对javascript的支持不多。

但我的第一个问题是：

- 为什么带有javascript的网页在wec7的IE中可以正常工作，而不能在同一平台的网络浏览器中工作？

我从控制面板启用了所有脚本选项，但它仍然不起作用。

如何使页面在 webbrowser 中工作，因为它在 ie 中工作？

提前感谢您的帮助或提示。

贝纳洛兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:53:45.923

## 问。

> - 为什么带有javascript的网页在wec7的IE中可以正常工作，而不能在同一平台的网络浏览器中工作？

## 一个。

紧凑型框架的操作系统比成熟的 Windows 小得多，否则它会太大而无法安装在设备上。

为了使紧凑的框架更小，微软无法预见使用的许多功能都被遗漏了。

当 Windows CE 和 Windows Mobile 首次推出时，尝试使用这些设备查看在线内容的人并不多。包括一个网络浏览器，但这个网络浏览器中的很多东西也受到限制（出于同样的原因）。因此，某些 JavaScript 可能会工作，而其他 JavaScript 则不会。

但是，没有任何东西可以保证与 JavaScript 一起使用。

# php - 如何在背景图像的一部分中设置图像映射？

> ID：15199423
> 
> 赞同：3
> 
> 时间：2013-03-04T10:29:52.693
> 
> 标签：php, html, css, imagemap

我知道如何为前景图像设置图像映射。但是这次我想为图像的一部分设置图像映射，它被设置为 div 的背景图像。我该怎么做。我在网络，找不到解决方案。请帮助。例如，

![在此处输入图像描述](../Images/abd630bf758b1d16444be773ad8fedc5.png)

html

```
<div class="header full" style="background:url('/hdr.jpg';?>) no-repeat; height:492px"> 
```

整个图像设置为背景图像，我想单击`Nestle`椭圆形部分并将被重定向到某个 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:49:37.473

请尝试以下代码
使用您的图像并重命名为**test.jpg** 请将所有图像放在同一个文件夹中以进行测试并根据您的需要更改代码（这只是一个示例）

```
**CSS** (style.css)

.image{
   background: url("test.jpg") repeat scroll 0 0 transparent;
   height: 185px;
   width: 266px;
   border: 1px solid;
   }
    .link{
        padding-left: 26px;
        padding-top: 23px;
        position: absolute;
    }
    .link a{
      padding-left: 0;
      display: block;
      height: 48px;
      width: 67px;
    }
    .container{
    position: relative;
    } 
```

**HTML**

```
<head>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="container">
<div class="link"> <a href="">&nbsp;</a></div>
<div class="image">
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:21:32.703

这是一个带有解释的示例：http: [//quackit.com/html/tutorial/html_image_maps.cfm](http://quackit.com/html/tutorial/html_image_maps.cfm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:51:21.023

好吧，你把图像作为背景，因为它们现在在 div 中没有这样的元素来点击

如果您只需要图像映射中链接的“矩形”形状，则可以改用 css 定义的链接位置。这是通过指定位置并将背景颜色设置为透明来完成的。[这是一个例子](http://www.position-relative.com/tutorials/tute1_css_bg_image.php)

# php - 我们如何使用 php 找到数组中的重复值？

> ID：15199426
> 
> 赞同：1
> 
> 时间：2013-03-04T10:30:00.910
> 
> 标签：php, arrays

我想知道，我们如何检测数组中的重复条目...

就像是

```
$array = array("192.168.1.1", "192.168.2.1","192.168.3.1","192.168.4.1","192.168.2.1","192.168.2.1","192.168.10.1","192.168.2.1","192.168.11.1","192.168.1.4") ; 
```

我想获取数组中使用的 Duplicity 的数量（C 类唯一）。像这样

```
192.168.1.1 = unique
192.168.2.1 = Duplicate
192.168.3.1 = unique
192.168.4.1 = unique
192.168.2.1 = Duplicate
192.168.2.1 = Duplicate
192.168.10.1 = unique
192.168.2.1 = Duplicate
192.168.11.1 = unique
192.168.1.4 = Duplicate (Modified) 
```

我尝试了这种风格的代码

```
$array2 = array() ;

foreach($array as $list ){

$ips = $list;

$ip = explode(".",$ips);

$rawip = $ip[0].".".$ip[1].".".$ip[2] ;

array_push($array2,$rawip);

} 
```

但我无法以正确的方式设置数据，也无法进行循环以匹配数据。

修改值

谢谢

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:33:55.383

试试这个：这会给你每个值的计数

```
$array = array("192.168.1.1", "192.168.2.1","192.168.3.1","192.168.4.1","192.168.2.1","192.168.2.1","192.168.10.1","192.168.2.1","192.168.11.1") ;

$cnt_array = array_count_values($array)

echo "<pre>"; 
print_r($cnt_array);

$res = array();
foreach($cnt_array as $key=>$val){
   if($val == 1){
      $res[$key] = 'unique';
   }
   else{
      $res[$key] = 'duplicate';
   }
}

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:33:02.400

使用`array_unique($array)`功能。它会给你下面的输出。

```
Array
(
    [0] => 192.168.1.1
    [1] => 192.168.2.1
    [2] => 192.168.3.1
    [3] => 192.168.4.1
    [6] => 192.168.10.1
    [8] => 192.168.11.1
) 
```

并且总重复计数必须是：

```
array_count_values($array) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:34:21.037

试试这个，希望它会工作

```
$FinalArray=array();
$arrayLen=count($array);
for($i=0; $i<$arrayLen;  $i++)
{
    if(!in_array($array[$i],$FinalArray))
        $FinalArray[]=$array[$i];
} 
```

现在在 $FinalArray 你得到了所有唯一的 ip

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T09:49:45.290

试试这个：

```
for ($i = 0; $i < count($array); $i++) 
    for ($j = $i + 1; $j < count($array); $j++)
        if ($array[$i] == $array[$j])
            echo  $array[$i]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-30T05:54:39.867

使用 in_array() 函数检查值是否在数组中

```
<?php
$output ='';
$array = array(0, 1, 1, 2, 2, 3, 3);
$isArraycheckedvalue = array();
for ($i=0; $i < sizeof($array); $i++) 
{
    $eachArrayValue = $array[$i];
    if(! in_array($eachArrayValue, $isArraycheckedvalue)) 
    {
        $isArraycheckedvalue[] = $eachArrayValue;
        $output .= $eachArrayValue. " Repated no <br/>";      
    }
    else
    {
        $isArraycheckedvalue[] = $eachArrayValue;
        $output .= $eachArrayValue. " Repated  yes <br/>";
    }
}
echo $output;
?> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-27T04:12:37.397

[使用php查找数组中的重复值](http://shellykaohsiung.blogspot.tw/2016/07/find-duplicate-values-in-array-using-php.html)

```
function array_repeat($arr){
    if(!is_array($arr))
        return $arr;
    $arr1 = array_unique($arr);
    $arr3 = array_diff_key($arr,$arr1);
    return array_unique($arr3);
} 
```

# error-handling - 没有这样的操作：HTTP GET PATH_INFO: /services/EchoUMO

> ID：15199427
> 
> 赞同：0
> 
> 时间：2013-03-04T10:30:02.520
> 
> 标签：error-handling, cxf, echo, mule, sample

我从互联网下载了骡子的回声样本。我有 1 个 java 类

```
package org.mule.example.echo;

public class Echo
{
    public Echo()
    {
    }

    public String echo(String string)
    {
        return string;
    }
} 
```

还有一个xml文件

```
 <?xml version="1.0" encoding="UTF-8"?>
 <mule> 

 <flow name="EchoFlow">
        <inbound-endpoint address=":65082/services/EchoUMO" exchange-pattern="request-response"/>
        <cxf:jaxws-service serviceClass="org.mule.example.echo.Echo"/>
        <component>
            <singleton-object class="org.mule.example.echo.Echo" />
        </component>
    </flow>
</mule> 
```

当我在浏览器中写 :65082/services/EchoUMO 时，我没有得到任何好的结果。在我的控制台中，我看到了这个错误：

```
 WARN  2013-03-04 12:08:10,713 [[sample-echo].connector.http.mule.default.receiver.02] org.apache.cxf.phase.PhaseInterceptorChain: Interceptor for {http://echo.example.mule.org/}EchoService has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: No such operation:  (HTTP GET PATH_INFO: /services/EchoUMO)
    at org.apache.cxf.interceptor.URIMappingInterceptor.handleMessage(URIMappingInterceptor.java:88)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123) 
```

你能解释一下我发生了什么事吗？

当我在浏览器中写入`:65082/services/EchoUMO`时，我的浏览器会显示此页面：

```
<soap:Envelope>
    <soap:Body><soap:Fault>
        <faultcode>soap:Server</faultcode>
        <faultstring>No such operation: (HTTP GET PATH_INFO: /services/EchoUMO)</faultstring>
    </soap:Fault></soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:20:03.507

您的类不使用 JAX-WS 注释，因此您会收到错误消息。

您有 2 个选择：

1.  保留当前类并使用[简单的服务](http://www.mulesoft.org/documentation/display/current/Building+Web+Services+with+CXF#BuildingWebServiceswithCXF-CreatingaSimpleFront-endWebService)，即`<cxf:simple-service serviceClass="org.mule.example.echo.Echo"/>`
2.  [如此处所述，将 JAX-WS 注释添加到您的](http://www.mulesoft.org/documentation/display/current/Building+Web+Services+with+CXF#BuildingWebServiceswithCXF-CreatingaJAX-WSService)POJO

# c# - Android和iOS跨平台字符串资源（MonoTouch & MonoDroid）

> ID：15199429
> 
> 赞同：2
> 
> 时间：2013-03-04T10:30:12.923
> 
> 标签：c#, visual-studio, xamarin.ios, xamarin.android, shared-resource

我正忙于使用 Xamarin 单声道库的跨平台移动应用程序，我遇到了以下情况......

我的 monodroid 项目 (strings.xml) 中有一堆字符串资源，这些资源正被我的布局和 C# 代码使用。

我想做的是将这些字符串资源移动到共享项目中的文件中，以便 iOS、Android 和 Windows 手机都能够使用它们。实现这一目标的最佳方法是什么？

*目前我正在使用包含非 UI 字符串的 Resource.resx 文件。然后我在 android(monodroid) 项目中有 strings.xml 文件来满足 UI 资源字符串的需求。

请记住以下几点：

*   所有平台都必须使用相同的文件。
*   我需要 android 布局也使用相同的资源。（目前是 strings.xml 文件）
*   它最好是一个文件。

有什么意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:44:06.250

您可以查看（至少）几个“标准”库/工具：

*   Rdio 的 Vernacular 工具看起来可以使用`GetText`层来帮助解决这个问题 - [https://github.com/rdio/vernacular](https://github.com/rdio/vernacular)
*   MvvmCross 使用 JSON 文件来共享文本（参见[Localising text in MvvmCross ViewModels](https://stackoverflow.com/questions/14880159/localising-text-in-mvvmcross-viewmodels)）

这两个都是开源的——您应该能够从中制作自己的设计时或运行时工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T19:15:18.773

另一种选择是使用生成器在构建时生成适当的资源。为简单起见，我决定创建一个在每次构建时都运行的[资源迁移器。](https://github.com/ChaseFlorell/ResourceMigrator)

本质上，我在我的 PCL`*.resx`文件中获取所有内容，并在构建应用程序之前生成 Android 或 iOS 资源。这是在构建期间在 Web 应用程序中组合/缩小 CSS/JS 的类似方法……它减少了运行时的性能开销。

# c - 如何生成随机字母（大写字母）并保存到 C 中的文本文件中？

> ID：15199432
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:30:20.780
> 
> 标签：c, file-io, random

我如何生成例如 100 个随机字母（大写字母）并保存到 C 中的文本文件中？
我读了 rand() 和 srand() 函数来生成随机数。但是对于信件，我不知道我能做什么:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:38:53.873

如果`r`是范围内的随机数`0..25`，`'A'+r`是随机大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:37:06.297

阅读有关在 C 中生成随机数和文件 I/O 的教程。

有几种方法可以用来生成随机数，最简单的一种是`rand()`.

[http://www.cplusplus.com/reference/cstdlib/rand/](http://www.cplusplus.com/reference/cstdlib/rand/)

对于文件 I/O

[http://www.cprogramming.com/tutorial/cfileio.html](http://www.cprogramming.com/tutorial/cfileio.html)

阅读这些并尝试您的要求。那应该可以为您提供解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:43:41.803

暗示：

1.  `fopen(file, "w")`
2.  `(rand() % 26)`100 次和`fputc('A' + your_random, file)`
3.  `fclose(file)`

在这种情况下，您会得到一个介于 0 到 25 之间的伪随机整数。

# php - 访问数组不起作用

> ID：15199433
> 
> 赞同：0
> 
> 时间：2013-03-04T10:30:23.757
> 
> 标签：php, arrays

好吧，这对我来说似乎很奇怪！

我有一个数组，其中使用用户 ID 作为数组键保存了用户对象

```
Array (
    [75] => pwUser Object
        (
            [data:protected] => Array
                (
                    [ID] => 75
                    [display_name] => Chris Waa
                )
        )

    [1] => pwUser Object
        (
            [data:protected] => Array
                (
                    [ID] => 1
                    [display_name] => Alex Müller
                )
        )

) 
```

我现在想用下面的代码访问这个数组

```
$this->users[$notification['subscribeNotID']]->getAvatar() 
```

但我收到一个错误

> 注意：未定义索引：在 NotificationList.class.php 第 217 行
> 
> 致命错误：在第 217 行的 NotificationList.class.php 中的非对象上调用成员函数 getAvatar()

好的，让我们 var_dump`$notification['subscribeNotID']`

> 字符串（2）“75”

75键绝对是阵中可用的！奇怪的是，脚本是这样工作的

```
$ID = "75"; // var_dump() returns the same as $notification["subscribeNotID"] above
$this->users[$ID]->getAvatar() 
```

**为什么？**

# web-services - 我的第一个 RESTful Web 服务出现问题

> ID：15199434
> 
> 赞同：0
> 
> 时间：2013-03-04T10:30:24.560
> 
> 标签：web-services, rest, java-ee-6

我正在 javaEE6 中开发我的第一个 RestFul webServices。这是我的实体 Bean

```
@XmlRootElement
@Entity
public class MyEntity implements Serializable {

 @Id
 @GeneratedValue
 private long idEntity;

 private String name;

 private String description;

 @OneToMany(mappedBy = "entity" , fetch = FetchType.EAGER)
 private List<EntityB>  list;

  //Get and set
}

 @Entity
 public class EntityB {

 @Id
 @GeneratedValue
 private long idCategoria;

 @ManyToOne
 private MyEntity myEntity;

  } 
```

这是我的网络服务

```
@Path("myentity")
@Produces( {MediaType.APPLICATION_XML , MediaType.APPLICATION_JSON })
@Consumes( {MediaType.APPLICATION_XML , MediaType.APPLICATION_JSON })
@Stateless
public class MyEntityService {

 @Inject
 MyEntityDao entityDao;

 @GET
 @Path("{id}/")
 public MyEntity findById(@PathParam("id") Long id){
    return entityDao.findById(id);
 }
} 
```

最后我配置了泽西岛

```
@ApplicationPath("ws")
public class ApplicationConfig extends Application {

} 
```

现在，如果我尝试调用我的 Web 服务（localhost:8080/xxxx/ws/myentity），我会收到此错误：

HTTP 状态 500 - javax.xml.bind.MarshalException - 带有链接异常：[com.sun.istack.SAXException2：在对象图中检测到循环。这将导致无限深的 XML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:47:08.213

您有一个对象的循环图，这是不允许的，因为它会导致“无限”XML。

MyEntity 持有对 EntityB 的引用，后者持有返回 MyEntity 的引用。

编组器将尝试编组 MyEntity > EntityB > MyEntity > EntityB 等等。

您可以将 EntityB 中的 MyEntity 标记为 @XmlTransient，以避免这种情况。

但是，尝试在所有项目中使用相同的对象类（从持久层到通信层）可能不是一个好主意。

# perl - Perl telnet 不等待上一个命令的结束

> ID：15199436
> 
> 赞同：0
> 
> 时间：2013-03-04T10:30:27.773
> 
> 标签：perl, timeout, telnet

Perl telnet 不等待上一个命令的结束。在文件 infile.log 我看到命令的延续`my @ config = $ telnet-> cmd ("sh run");`，但脚本已经开始运行命令`print ("Format configuration", $ _, "\ n");`。结果，我得到一个空数组@config。

```
foreach (@linksys_sps){
 print ("Connecting to ",$_,"\n");
 my $telnet = new Net::Telnet ( Timeout=>10,Errmode=>'return',Input_Log => "infile.log");
 $telnet->open($_);
   if ($telnet->errmsg){
   print "Can't connect to " . $_ . " Error: " . $telnet->errmsg . "\n";
   } else {
 $telnet->max_buffer_length(5 * 1024 * 1024);
 $telnet->waitfor('/User Name:$/i');
 $telnet->print('admin');
 $telnet->waitfor('/Password:$/i');
 $telnet->print('password');

 print ("Set Terminal Variable ",$_,"\n");
 $telnet->cmd("terminal datadump");

 print ("Create file ",$_,"\n");
 my $file = sprintf($folder."/".$_);
 print ("Create file ",$file,"\n");
 system "touch  $file";
 system "chown nobody $file";

 print ("Read configuration ",$_,"\n");
 my @config = $telnet->cmd("sh run");

 print ("Write configuration ",$_," to file ",$file,"\n");
 open my $fh, "> $file" or die "Can't open $file : $!";
  foreach (@config) {
    print $fh "$_"; # Print each entry in our array to the file
  }
  close $fh;

 print ("Set Terminal Variable ",$_,"\n");
 $telnet->cmd("no terminal datadump");

 $telnet->cmd("exit");
   }
 } 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:47:07.467

从[文档](http://search.cpan.org/~jrogers/Net-Telnet-3.03/lib/Net/Telnet.pm)：

> 方法 login() 和 cmd() 使用对象中的提示设置来确定登录或远程命令何时完成。如果您没有正确设置提示，这些方法将因超时而失败。

也就是说，需要在创建`$telnet`对象的时候加上提示参数：

```
my $switch_name = 's-east';

my $telnet = new Net::Telnet ( 
   Timeout=>10,
   Errmode=>'return',
   Input_Log => "infile.log",
   Prompt => '/\Q$switch_name\E#\s?$/'   
); 
```

（它会查找 shell 提示符以知道命令已完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:57:55.587

由于不稳定`cmd()`，我转而使用`waitfor(String => $string)`。下面的新脚本：

```
foreach (@linksys_sps){

 my $file = sprintf($folder."/".$_);
 print ("Create file ",$file,"\n");
 system "touch  $file";

 my $string = sprintf($_."#");
 print ("Prompt String is ",$string,"\n");

 print ("Connecting to ",$_,"\n");
 my $telnet = new Net::Telnet (
                                Timeout=>20,
                                Errmode=>'return',
                                Input_Log => "infile.log"
                                );

 $telnet->open($_);
   if ($telnet->errmsg){
   print "Can't connect to " . $_ . " Error: " . $telnet->errmsg . "\n";
   } else {

 $telnet->waitfor('/User Name:$/i');
 $telnet->print('admin');
 $telnet->waitfor('/Password:$/i');
 $telnet->print('password');
 $telnet->waitfor(String => $string );

 print ("Set Backup Terminal Variable ",$_,"\n");
 $telnet->print("terminal datadump");
 $telnet->waitfor(String => $string );

 print ("Read configuration ",$_,"\n");
 $telnet->print('sh run');
 my @config = $telnet->waitfor(String => $string );

 print ("Write configuration ",$_," to file ",$file,"\n");
 open my $fh, '>', $file or die "Cannot open file: $!";
 foreach my $config (@config) {
    print $fh "$config\n";
    }
 close $fh;

 print ("Set Default Terminal Variable ",$_,"\n");
 $telnet->print('no terminal datadump');
 $telnet->waitfor(String => $string );

 $telnet->print('exit');
    }
 } 
```

# html - 让多个嵌入式 Youtube 视频按顺序自动播放

> ID：15199437
> 
> 赞同：7
> 
> 时间：2013-03-04T10:30:31.370
> 
> 标签：html, video, youtube, youtube-api

有没有什么简单的方法可以在一个页面上嵌入多个 YouTube 视频，并让它们在页面打开后立即开始播放，当第一个视频完成时，第二个视频开始播放？

我希望这样的事情会起作用：

```
<object width="425" height="350"><param name="movie" value="http://www.youtube.com/v/OdT9z-JjtJk&autoplay=1"></param><embed src="http://www.youtube.com/v/OdT9z-JjtJk&autoplay=1" type="application/x-shockwave-flash" width="425" height="350"></embed></object>
<br>
<object width="425" height="350"><param name="movie" value="http://www.youtube.com/v/NlXTv5Ondgs&autoplay=2"></param><embed src="http://www.youtube.com/v/NlXTv5Ondgs&autoplay=2" type="application/x-shockwave-flash" width="425" height="350"></embed></object> 
```

它适用于第一个但不是第二个。我想我可能需要深入研究 API。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T03:00:20.197

使用 Youtube IFrame API，您可以轻松做到这一点。

您需要在此处配置的唯一部分是 youtube ID 数组。您可以从 URL 中 /v/ 之后的部分检索那些（如果需要，您可以修改 javascript 以加载 URL 而不是 ID。我只是更喜欢这种方式。

```
<div id="player"></div>
<script src="//www.youtube.com/iframe_api"></script>

<script>
    /**
     * Put your video IDs in this array
     */
    var videoIDs = [
        'OdT9z-JjtJk',
        'NlXTv5Ondgs'
    ];

    var player, currentVideoId = 0;

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '350',
            width: '425',
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        event.target.loadVideoById(videoIDs[currentVideoId]);
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.ENDED) {
            currentVideoId++;
            if (currentVideoId < videoIDs.length) {
                player.loadVideoById(videoIDs[currentVideoId]);
            }
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T02:19:20.910

这是一个使用[YouTube Iframe Player API](https://developers.google.com/youtube/iframe_api_reference)的示例。

有两个单独的嵌入（player1 和 player2）。视频在 player1 加载时自动播放，并在播放器 2 完成时启动。

[如果你想玩它，这里是 jfiddle。](http://jsfiddle.net/45sdT/)

和代码：

```
<div id="player1"></div>
<div id="player2"></div>
<script>
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player1;
    var player2;

    function onYouTubeIframeAPIReady() {
        player1 = new YT.Player('player1', {
            height: '350',
            width: '425',
            videoId: 'OdT9z-JjtJk',
            events: {
                'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
            }
        });
        player2 = new YT.Player('player2', {
            height: '350',
            width: '425',
            videoId: 'NlXTv5Ondgs'
        });
    }

    function onPlayerReady(event) {
        event.target.playVideo();
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.ENDED) {
            player2.playVideo();
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:23:23.103

我不擅长 javascript。但我之前有一些类似的问题。

[你可以参考](https://stackoverflow.com/questions/7853904/how-to-detect-when-a-youtube-video-finishes-playing)

判断第一个视频完成然后运行第二个。你可以设置2个功能。

```
<div id="player1"></div>
<br>
<object width="425" height="350"><param name="movie" id="player2-param" value="http://www.youtube.com/v/OdT9z-JjtJk"></param><embed src="http://www.youtube.com/v/OdT9z-JjtJk" type="application/x-shockwave-flash" width="425" height="350" id="player2-embed"></embed></object> 
```

然后

```
function onPlayerStateChange(event) {        
            if(event.data === 0) {          
                $('#player2-param').attr('value','http://www.youtube.com/v/OdT9z-JjtJkautoplay=1');//jquery
                $('#player2-embed').attr('src','http://www.youtube.com/v/OdT9z-JjtJkautoplay=1');//jquery

            }
        } 
```

希望这可以帮助您并编写一些更好的代码，谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:13:22.937

使用 youtube API 并将自动播放设为 true；在 youtube 上制作播放列表并提供链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-27T07:48:38.983

基于上一个示例代码。我创建了 Basic Vanilla JavaScript Youtube Player- 带有播放列表。结帐[Youtube 播放器 - 带有播放列表](https://gist.github.com/deepakshrma/17fbb07f220b3d6c127d)

```
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Basic Vanilla  JavaScript Youtube Player- With playlist</title>
</head>
<body>
<div class="player" style="width: 480px;height:360px;max-width: 50%;margin: 0 auto;">
    <div id="youtube" style="width: 100%;height: 100%"></div>
    <div class="controls" style="text-align: center;margin: 0 auto;">
        <button style="padding: 10px;width: 100px;background-color: #167AC6;"
                onclick="YouTubePlayer.playPrevious()">Prev
        </button>
        <button style="padding: 10px;width: 100px;background-color: #167AC6;margin-left: 30px;"
                onclick="YouTubePlayer.playNext()">Next
        </button>
    </div>
</div>
<script src="//www.youtube.com/iframe_api"></script>
<script>
    var YouTubePlayer = {
        current: 0,
        player: null,
        /**
         * Tracks ids here...
         */
        videos: [
            'vQMnaDNw5FQ',
            'Dp6lbdoprZ0',
            'OulN7vTDq1I'
        ],
        currentlyPlaying:function(){
            console.info('Current Track id', YouTubePlayer.videos[YouTubePlayer.current]);
            return YouTubePlayer.videos[YouTubePlayer.current];
        },
        playNext: function () {
            YouTubePlayer.increaseTrack()
            if (YouTubePlayer.player) {
                YouTubePlayer.currentlyPlaying();
                YouTubePlayer.player.loadVideoById(YouTubePlayer.videos[YouTubePlayer.current]);
            } else {
                alert('Please Wait! Player is loading');
            }
        },
        playPrevious: function () {
            YouTubePlayer.decreaseTrack()
            if (YouTubePlayer.player) {
                YouTubePlayer.currentlyPlaying();
                YouTubePlayer.player.loadVideoById(YouTubePlayer.videos[YouTubePlayer.current]);
            } else {
                alert('Please Wait! Player is loading');
            }

        },
        increaseTrack: function () {
            YouTubePlayer.current = YouTubePlayer.current + 1;
            if (YouTubePlayer.current >= YouTubePlayer.videos.length) {
                YouTubePlayer.current = 0;
            }
        },
        decreaseTrack: function () {
            YouTubePlayer.current = Math.max(YouTubePlayer.current - 1, 0);
        },
        onReady: function (event) {
            event.target.loadVideoById(YouTubePlayer.videos[YouTubePlayer.current]);
        },
        onStateChange: function (event) {
            if (event.data == YT.PlayerState.ENDED) {
                YouTubePlayer.playNext();
            }
        }
    }
    function onYouTubeIframeAPIReady() {
        YouTubePlayer.player = new YT.Player('youtube', {
            height: '350',
            width: '425',
            events: {
                'onReady': YouTubePlayer.onReady,
                'onStateChange': YouTubePlayer.onStateChange
            }
        });
    }
</script>
</body>
</html>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-24T10:35:57.363

不用复杂，用iframe就行

```
<iframe width="560" height="315" src="https://www.youtube.com/embed/nWHpU7H7Clc?playlist=b6KzNmLMW6o,qWE6g8puu98" frameborder="0" allow="autoplay; encrypted-media" style="width:900px;height:400px" autoplay="true"></iframe> 
```

# ios - 计算中的小数点为 。或者 ，

> ID：15199438
> 
> 赞同：2
> 
> 时间：2013-03-04T10:30:34.837
> 
> 标签：ios, objective-c, cocoa-touch, numbers, decimal

如果我使用小数点输入数字，小数点会根据国家和地区格式而变化。
可作为一个点“。” 或逗号“，”
而且我无法控制在哪个设备上使用该应用程序。
如果区域格式使用逗号，则计算会出错。投入 5,6 与投入 5 次和投入 56 次相同。
即使我以编程方式允许两者。和 ，作为文本字段中的输入。
我如何在不使用标点符号的数字的情况下解决这个问题，并且可能还必须给出指示以避免输入逗号“，”
它只输入我需要的数字和小数，小数点要好得多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T11:02:45.097

您应该为此使用[NSNumberFormatter](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html&ei=PX80UbLRCoritQbvz4CgAQ&usg=AFQjCNF2ZeYQOjo6yvJCQ4bDOsKNpSKXLw&bvm=bv.43148975,d.Yms)，因为它可以设置为处理不同的语言环境。

创建格式化程序：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setLocale:[NSLocale currentLocale]]; 
```

用它：

```
NSNumber *number = [numberFormatter numberFromString: string]; //string is the textfield.text 
```

* * *

如果设备的区域设置为区域设置，其中 a 中的小数点分隔符`,`，数字键盘将使用 is 和格式化程序。在那些上，分组分隔符将是`.`

对于其他语言环境，反之亦然。

NSNumberFormatter 非常复杂，您也应该阅读[Data Formatter Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfNumberFormatting10_4.html)中的部分。它还知道很多货币处理（显示，而不是转换），如果你的应用确实处理了这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T06:49:05.530

您还可以使用 NSNumberFormatter 的类方法

```
NSString* formattedString = [NSNumberFormatter 
                                 localizedStringFromNumber:number
                                 numberStyle:NSNumberFormatterCurrencyStyle]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-20T07:07:20.700

**识别是当地国家使用逗号作为小数点**

```
var isUsesCommaForDecimal : Bool {
    let nf = NumberFormatter()
    nf.locale = Locale.current
    let numberLocalized = nf.number(from: "23,34")
    if numberLocalized != nil {
        return true
    } else {
        return false
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-04T10:35:30.290

一种方法是检查 textField 是否包含“，”。

如果包含，则将其替换为“。” 并进行所有算术运算。

无论如何，您将读取所有 textFields 和 textViews 作为 NSString 对象，您可以操作输入值并根据需要对其进行转换。

同样在显示结果时替换“。” 用“，”让用户根据那里的区域格式感到舒服。

# javascript - ExtJS：检查窗口状态（最小化、最大化等）

> ID：15199442
> 
> 赞同：4
> 
> 时间：2013-03-04T10:30:40.183
> 
> 标签：javascript, extjs, extjs4.1

ExtJS 提供了许多关于 Window 是否配置为 [最大化](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-maximized)、 [最小化](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-minimizable)等的配置。它还提供了[最大化](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-method-maximize)和[最小化](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-method-minimize)窗口的功能。

但是找不到*获取现有窗口状态*的正确方法是什么。我需要的是类似于以下的功能：

```
var myWin = Ext.create('Ext.window.Window', { ... });
...
myWin.isMinimized(); // is current window minimized?
myWin.isMaximized(); // is current window maximized? 
```

可以从窗口实例中检索当前窗口的状态吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:38:52.693

因为[`maximize()`](http://docs.sencha.com/ext-js/4-1/source/Window.html#Ext-window-Window-method-maximize)有一个布尔属性`maximized`，您可以从对象中获取它：

```
if (myWin.maximized) { ... } 
```

但是对于[`minimize()`](http://docs.sencha.com/ext-js/4-1/source/Window.html#Ext-window-Window-method-minimize)ExtJS 不提供任何功能并期望单独实现。`minimized`因此，该框不支持任何属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-07T05:41:41.567

对于任何人来说，一种解决方案是`minimizable`使用`tools`. 这是完整的例子..

```
var isMinimized = false;   //if you want to check for minimized elsewhere..
var winWidth;          //to restore to actual width.
Ext.create('Ext.window.Window', {
    title: 'Hello',
    closable : false,
    width : 300, height : 400,
     tools: [
                {  
                    type: 'restore',
                    hidden : true,
                    handler: function( evt,toolEl,owner,tool ) {
                        var window = owner.up( 'window' );
                        window.expand('',false);
                     window.setWidth(winWidth);
                        window.center();
                        isMinimized = false;
                        this.hide();
                        this.nextSibling().show();
                    }                                
                },{  
                    type: 'minimize',
                    handler: function( evt,toolEl,owner,tool ){
                        var window = owner.up( 'window' );
                        window.collapse();
                        winWidth = window.getWidth();
                        window.setWidth( 150 );
                        window.alignTo( Ext.getBody(), 'bl-bl');
                        this.hide();
                        this.previousSibling().show();
                        isMinimized = true;
                    }                                
                }                            
            ]
}).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:22:42.560

@VisioN 的答案已经完成，但我想向您展示一个[`toggleCollapse()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-method-toggleCollapse)用于隐藏窗口的片段：

```
Ext.create('Ext.Window',{
    height: 100,
    width: 100,
    minimizable: true,
    listeners: {
        minimize: function(){
            var win = this;
            win.toggleCollapse();
            if (!win.getCollapsed()) {
                win.center();
            } else {
                win.alignTo(document.body, 'bl-bl');
            }
        }
    }
}).show(); 
```

# c - 双类型矩阵 [n]x[n] 转移到 ASSEMBLY

> ID：15199443
> 
> 赞同：2
> 
> 时间：2013-03-04T10:30:45.117
> 
> 标签：c, assembly, matrix, memory-address

我想要一些关于用汇编语言对矩阵进行操作的帮助。我的代码在 C 和 ASM 中进行 Cholesky 分解并比较它们的速度。我已经创建了嵌套循环并且它工作正常，是的我不知道如何正确处理矩阵来访问它的元素。矩阵在 C 中是 DOUBLE 的，我设法将其地址（第一个元素）转移到程序集。

```
Cholesky_double proc \
         tab_addr:DWORD, \  ; begin adres of matrix
         num_elem:DWORD ; element count in row/column (n of Matrix[n][n])

    LOCAL i:DWORD, k:DWORD, j:DWORD, skoczek:DWORD

;skoczek is for operation count check (ex.should be 13 for 3x3 matrix)

    ; push register on stack
    push edx
    push ecx
    push ebx
    push esi
    push edi

mov k, 0
mov skoczek, 0
for0start:
    inc skoczek 

    mov eax, k
    mov i, eax
    inc i
    ;there should be MATRIX[k][k] = sqrt(MATRIX[k][k])

    mov eax, num_elem
    sub eax, i
    cmp eax, 0
    je for1end

    for1start:
        inc skoczek
            ;MATRIX[i][k]=MATRIX[i][k]/MATRIX[k][k]

    for1koniec:
    inc i
    mov eax, num_elem
    sub eax, i
    cmp eax, 0
    jne for1start
    for1END:

    mov eax, k
    mov j, eax
    inc j

    mov eax, num_elem
    sub eax, j
    cmp eax, 0
    je for2end

    for2start:
        inc skoczek

        mov eax, j
        mov i, eax
        for3start:
            inc skoczek
                    ;MATRIX[i][j] = MATRIX[i][j]-MATRIX[i][k]*MATRIX[j][k]

        for3koniec:
        inc i
        mov eax, num_elem
        sub eax, i
        cmp eax, 0
        jne for3start

    for2koniec:
    inc j
    mov eax, num_elem
    sub eax, j
    cmp eax, 0
    jne for2start
    for2end:

for0koniec:
inc k
mov eax, num_elem
sub eax, k
cmp eax, 0
jne for0start

koniec:
    pop edi
    pop esi
    pop ebx
    pop ecx
    pop edx

    mov eax, skoczek
    ret             
    ; return with operation count in eax

Cholesky_double endp 
```

在 C 中传递的矩阵

```
extern "C" int __stdcall Cholesky_double(double* tab_adr, int num_el); 
```

我将 Visual Studio 2010 和解决方案与创建 ASSEMBLY 库的项目和使用 C++ 代码的项目一起使用，这些代码可以使用汇编程序函数。

我不是要求为我填写代码，只是为了获得一点帮助，以正确处理矩阵以正确访问其元素。如果您预见到这里会出现更多问题（例如 asm 中的 Sqrt，我会很高兴得到一些指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:47:36.110

您首先必须线性化地址：

```
 &matrix[k][i] = matrix + i*sizeof(double) + k*N*sizeof(double); 
```

其中 N 是行宽。（假设 NxN 矩阵）

可以加载

```
 fld [%eax]        // load to top of stack in FPU (assuming ia-32 system)
  mov %rbx,[%rax];  // vs. load 64-bit register 
  movsd %xmm0, [%rax] // vs. load a double to lower 64-bits of xmm register 
```

# c# - 在不使用水晶报告的情况下打印发票的更好选择

> ID：15199446
> 
> 赞同：0
> 
> 时间：2013-03-04T10:30:55.743
> 
> 标签：c#, crystal-reports, invoices

我在基于 C# 窗口的应用程序中使用水晶报表来打印销售发票和账单，但问题是需要很长时间才能进行，为此我需要一些实时和快速的方法，请提出一些解决方案。我通过数据库中的程序链接我的水晶报告，是打印发票而不是水晶报告的任何替代方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:39:21.720

如果您花时间了解让她开心的原因，Crystal 会“很快”。根据我的经验，实际打印可以占大部分处理时间。创建 .rpt 文件可能只需要 25 毫秒，但与打印机服务器协商则需要 5000 毫秒。我花了数周时间研究 Crystal 服务器端打印。

它有很大的不同：

*   你是如何打印的：`ReportDoc.PrintToPrinter`vs。`PrintOutputController.PrintReport`

*   所选打印机是否使用与您用于开发报告的打印机相同的驱动程序。

*   打印机是否安装在服务器上（或仅安装在远程打印机服务器上）以及是否安装在 IIS_Identity 的配置文件中。

如果配置不正确，打印报告可能需要 1 - 2 分钟（基于第一手经验）。做一些调整，你会突然小于 50 毫秒。

例如，如果您正在使用`PrintToPrinter()`并且指定的打印机不在 IIS 用户的 .NET 安装打印机列表中，则打印需要很长时间。安装打印机，以便 IIS 用户可以使用它，并且 bam，打印是即时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-15T14:08:08.387

我在一个 winforms 项目中遇到了一个问题，报告需要很长时间才能加载，但这只是第一次。后来当报告运行时，他们根本没有问题。

我们假设框架花费时间将晶体组件加载到内存中。

所以我创建了一个 hack，**每当应用程序运行时，我都会在后台线程中加载一个空报告。**

# c# - 返回等待 Method.Invoke()

> ID：15199447
> 
> 赞同：5
> 
> 时间：2013-03-04T10:30:57.560
> 
> 标签：c#, aop, async-await, methodinfo

我是 DRY 编码的忠实粉丝，我喜欢尽可能避免使用样板代码。因此，我将我所有的 WCF 通道 faff 重构为一个 AOP 类，它处理 WCF 通道的生命周期。

我也是 async-await 的忠实粉丝，尤其是 WCF，因为理论上它会释放一个通常会休眠等待响应的线程。

所以我在fluentAOP lib中创建了一个拦截器

```
 private static object InvokeOnChannel(IMethodInvocation methodInvocation)
    {
        var proxy = _factory.CreateChannel();
        var channel = (IChannel) proxy;
        try
        {
            channel.Open();
            var ret = methodInvocation.Method.Invoke(proxy, methodInvocation.Arguments);
            channel.Close();
            return ret;
        }
        catch (FaultException ex)
        {
            if (ex.InnerException != null)
                throw ex.InnerException;
            throw;
        }
        catch(Exception)
        {
            channel.Abort();
            throw;
        }
    } 
```

但是，在考虑一下解决方案时，我注意到在 WCF 合同形式的情况下

```
[ServiceContract]
public interface IFoo
{
    [OperationContract]
    Task<int> GetInt();
} 
```

GetInt 会产生意想不到的结果。首先，catch FaultException 什么都不做。其次，我会在请求返回之前关闭通道。如果返回类型是任务，我理论上可以切换到另一个代码路径。但我不知道如何等待 Task<> 的结果，然后返回一个可等待的。

这当然特别困难，因为使用运行时 AOP，我将无法使用返回类型的泛型（没有整个反射范围）。

任何想法如何将此函数实现为可等待的，它在完成时关闭通道并捕获/编组调用线程的异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:56:43.490

要进行`async`注入，您必须替换返回的任务。为了代码可读性，我建议将其替换为`async`方法而不是使用`ContinueWith`.

我不熟悉fluentAOP，但我已经`async`用Castle DynamicProxy进行了注入。

如果你想使用反射，你要做的是首先确定它是否是一个`async`调用（即，如果返回类型是一个子类或等于`typeof(Task)`。如果它是一个`async`调用，那么你将需要使用反射来拉出并将`T`其`Task<T>`应用于您自己的`async`方法：

```
private static MethodInfo handleAsync = ...; // point this to HandleAsync<T>

// Only called if the return type is Task/Task<T>
private static object InvokeAsyncOnChannel(IMethodInvocation methodInvocation)
{
    var proxy = _factory.CreateChannel();
    var channel = (IChannel) proxy;
    try
    {
        channel.Open();
        var task = methodInvocation.Method.Invoke(proxy, methodInvocation.Arguments) as Task;
        object ret;
        if (task.GetType() == typeof(Task))
            ret = HandleAsync(task, channel);
        else
            ret = handleAsync.MakeGenericMethod(task.GetType().GetGenericParameters()).Invoke(this, task, channel);
        return ret;
    }
    catch (FaultException ex)
    {
        if (ex.InnerException != null)
            throw ex.InnerException;
        throw;
    }
    catch(Exception)
    {
        channel.Abort();
        throw;
    }
}

private static async Task HandleAsync(Task task, IChannel channel)
{
    try
    {
        await task;
        channel.Close();
    }
    catch (FaultException ex)
    {
        if (ex.InnerException != null)
            throw ex.InnerException;
        throw;
    }
    catch(Exception)
    {
        channel.Abort();
        throw;
    }
}

private static async Task<T> HandleAsync<T>(Task task, IChannel channel)
{
    try
    {
        var ret = await (Task<T>)task;
        channel.Close();
        return ret;
    }
    catch (FaultException ex)
    {
        if (ex.InnerException != null)
            throw ex.InnerException;
        throw;
    }
    catch(Exception)
    {
        channel.Abort();
        throw;
    }
} 
```

另一种方法是使用`dynamic`：

```
private static object InvokeOnChannel(IMethodInvocation methodInvocation)
{
    var proxy = _factory.CreateChannel();
    var channel = (IChannel) proxy;
    try
    {
        channel.Open();
        dynamic result = methodInvocation.Method.Invoke(proxy, methodInvocation.Arguments);
        return Handle(result, channel);
    }
    catch (FaultException ex)
    {
        if (ex.InnerException != null)
            throw ex.InnerException;
        throw;
    }
    catch(Exception)
    {
        channel.Abort();
        throw;
    }
}

private static async Task Handle(Task task, IChannel channel)
{
    try
    {
        await task;
        channel.Close();
    }
    catch (FaultException ex)
    {
        if (ex.InnerException != null)
            throw ex.InnerException;
        throw;
    }
    catch(Exception)
    {
        channel.Abort();
        throw;
    }
}

private static async Task<T> Handle<T>(Task<T> task, IChannel channel)
{
    await Handle((Task)task, channel);
    return await task;
}

private static T Handle<T>(T result, IChannel channel)
{
    channel.Close();
    return result;
} 
```

# python - Twisted 和 libtorrent - 我需要担心阻塞吗？

> ID：15199448
> 
> 赞同：4
> 
> 时间：2013-03-04T10:30:57.693
> 
> 标签：python, twisted, bittorrent, libtorrent

我正在研究使用 twisted 构建多协议应用程序。其中一种协议是 bittorrent。由于 libtorrent 是一个相当完整的实现，它的 python 绑定似乎是一个不错的选择。现在的问题是：

*   当使用 libtorrent with twisted 时，我需要担心阻塞吗？
*   libtorrent 网络层（使用 boost.asio，一个异步网络循环）是否会以任何方式干扰扭曲的 epoll？
*   我应该在线程中运行 libtorrent 会话还是针对多进程应用程序设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:26:29.517

我也许能够为其中一些问题提供答案。

所有的 libtorrents 逻辑，包括网络和磁盘 I/O 都是在单独的线程中完成的。所以，总的来说，“阻塞”的关注度并没有那么大。假设您的意思是 libtorrent 函数不会立即返回。

有些操作保证立即返回，函数不返回任何状态或信息。但是，确实返回某些内容的函数必须与 libtorrent 主线程同步，并且如果它处于重负载下（尤其是在具有不变检查且没有优化的调试模式下构建时），这种同步可能会很明显，尤其是在制作许多它们时，并且经常。

有一些方法可以使用本质上更加异步的 libtorrent，并且正在努力最大限度地减少使用同步功能的需求。例如，可以订阅 torrent 状态更新，而不是单独查询所有 torrent 的状态。异步通知通过 pop_alerts() 返回。

是否会干扰twisted的epoll；我不能肯定地说，但似乎不太可能。

我认为不需要通过另一层线程与 libtorrent 进行交互，因为所有工作都已经在单独的线程中完成。

# grails - 命令对象时不时忘记验证？

> ID：15199450
> 
> 赞同：1
> 
> 时间：2013-03-04T10:31:00.750
> 
> 标签：grails, command-objects

我正在使用 Grails 1.3.7，并且在多个控制器中有类似的代码：

```
def myAction = { MyCommand cmd ->
    if (cmd.hasErrors()) {
        // return bad request
    } else {
        someService.callSomeMethod(cmd.someId)
        ...
    }
}

class MyCommand {
    Long someId

    static constraints = {
        someId nullable: false
    }
} 
```

它在 99.99% 的时间里都能正常工作。但是，在某些情况下，应用程序日志表明调用服务时使用了 null（即 cmd.someId 返回了 null）。但是，这没有意义，因为约束设置为`nullable: false`. 感觉就像在那些非常罕见的情况下，grails 忘记调用`validate()`命令对象或约束被忽略了。

任何有关此类问题原因的提示将不胜感激。

# javascript - 动态设置 iframe 的 src 抛出“对象不支持此属性或方法”错误

> ID：15199455
> 
> 赞同：0
> 
> 时间：2013-03-04T10:31:17.790
> 
> 标签：javascript, iframe

我尝试使用javascript动态设置iframe的src，如下所示：

```
<script language="javascript">

function OpenMailTo(mailId) {
    document.getElementById('mailToFrame').src = 'mailto:' + mailId;  // <-- error here
    return false;
}

</script>

<iframe id="mailToFrame" src="" height="0" width="0" style="display:none;"></iframe> 
```

它抛出“对象不支持此属性或方法”。我使用的是 IE 9 浏览器。即使它抛出错误，它也会打开新的邮件窗口（outlook 窗口）。

谁能帮我解决这个问题。

**编辑：**

顺便说一句，仅当启用调试或在 IE 选项中启用禁用脚本调试时才会引发错误。

**编辑：**

这是我的调用代码

```
<span> test text <a href="#" onclick="OpenMailTo('email@test.com');" >email@test.com</a>
testing.....
</span> 
```

**编辑：**

这是错误的屏幕截图： ![在此处输入图像描述](../Images/763ee720206e56d14a667eb582ce6d7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:35:52.947

我尝试了以下方法，它奏效了

```
function OpenMailTo(mailId) {
  document.getElementById('mailToFrame').setAttribute("src", 'mailto:' + mailId);
  return false;
} 
```

任何人都可以验证上面的代码，我使用了 setAttribute("src","link goes here")。这是将 src 设置为 iframe 的正确方法吗？

# sql - SQL Server PIVOT 功能

> ID：15199458
> 
> 赞同：3
> 
> 时间：2013-03-04T10:31:23.197
> 
> 标签：sql, sql-server, pivot, unpivot

如果我们`PIVOT`有任何桌子，`UNPIVOT`那张桌子会得到我们原来的桌子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:39:48.543

不，不会总是得到与原始表相同的表。这取决于我们正在查看的数据类型。

检查 SQL Fiddles 以获取 @Mahmoud Gamal 的数据。

[SQL 小提琴与 SUM](http://www.sqlfiddle.com/#!3/77dcd4/2)

[SQL Fiddle with MAX](http://www.sqlfiddle.com/#!3/77dcd4/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:00:56.967

不，您可以获得不同的结果。因为在 pivote 中使用聚合函数。当您取消透视查询时，可能会得到不同的结果，例如透视字段上的聚合原始表。

# php - XML post在php中给出错误

> ID：15199459
> 
> 赞同：0
> 
> 时间：2013-03-04T10:31:27.190
> 
> 标签：php, xmlhttprequest

使用 post 方法提交 xml 数据，但它给出以下错误

```
ASP 500 Error

An error occurred processing the page you requested.
Please see the details below for more information.
COM Error Number    -2146827864 (0x800A01A8)
File Name   /vm/VM_jeune/includes/partenaires_calcul_primes.asp
Line Number     110
Brief Description   Object required: 'objDOMXPCML.selectSingleNode(...)' 
```

```
<?php
/* 
Online PHP Examples with Source Code
website: http://4evertutorials.blogspot.in/
*/
$xml_data ='<aatavailreq1>'.
    '<agency>'.
        '<iata>1234567890</iata>'.
        '<agent>lgsoftwares</agent>'.
        '<password>mypassword</password>'.
        '<brand>phpmind.com</brand>'.
    '</agency>'.
    '<passengers>'.
        '<adult age="" id="1"></adult>'.
        '<adult age="" id="2"></adult>'.
    '</passengers>'.
'<hotelavailreq1>'.
'<destcode>JHM</destcode>'.
        '<hotelcode>OGGSHE</hotelcode>'.
        '<checkindate>101009</checkindate>'.
        '<checkoutdate>101509</checkoutdate>'.
        '<usefield>1</usefield>'.
  '</hotelavailreq1>'.  
  '</aatavailreq1>';

$URL = "http://www.example.com/vm/makessense/calcul_primes.asp";

   $ch = curl_init($URL);
 //  curl_setopt($ch, CURLOPT_MUTE, 1);
   curl_setopt($ch, CURLOPT_URL, $URL );
   curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
   curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
   curl_setopt($ch, CURLOPT_POST, 1);
   curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
   curl_setopt($ch, CURLOPT_POSTFIELDS, "$xml_data");
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
   $output = curl_exec($ch);
   curl_close($ch);

 print_r($output);
?> 
```

它给出了 500 错误，不接受任何数据，请告诉我此代码中的错误是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:17:50.447

错误 500 表示接收 XML 文件的程序已崩溃。我们可以看到它有一个错误，因为它没有优雅地处理错误条件，但是我们看不到那个错误是什么，也看不到它是如何受您的输入数据影响的，因为 ASP 崩溃消息没有足够的信息来处理它出去。

所以你的问题的基本答案是：我们不知道，我们也不能说。唯一能告诉你问题出在哪里的人是已经崩溃的网站的所有者。

您可以使用[Fiddler](http://www.fiddler2.com/)之类的工具来检查 HTTP 流量。这将帮助您证明您的代码正确地发送了 XML 字符串。您还可以使用 XML 验证工具来证明 XML 是有效的。

但是，如果这些测试证明您的结果是可以的（我怀疑他们会的），那么除了询问接收 XML 的人他们的软件有什么问题以及如何解决问题之外，您无能为力；它可能需要他们方面的代码修复，或者他们可能能够帮助您解决该问题。无论哪种方式，我们都无法帮助您。

# c# - 如何确定装配体的构建方式

> ID：15199461
> 
> 赞同：6
> 
> 时间：2013-03-04T10:31:30.880
> 
> 标签：c#, visual-studio-2010, build, visual-studio-2012, .net-assembly

我正在使用 VS2010/2012，我想知道是否有办法（可能使用反射）来查看程序集是如何构建的。

当我在 Debug 中运行时，我使用 将`#if DEBUG`调试信息写入控制台。

但是，当您最终得到一堆程序集时，有没有办法查看它们是如何构建的？获取版本号很容易，但我无法找到如何检查构建类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:39:59.757

一旦它们被编译，你就不能，除非你自己放置元数据。

例如，您可以使用[`AssemblyConfigurationAttribute`](http://msdn.microsoft.com/en-us/library/zf72c7kz.aspx).NET 4.5 或[`AssemblyMetadataAttribute`](http://msdn.microsoft.com/en-us/library/system.reflection.assemblymetadataattribute.aspx)

```
#if DEBUG
[assembly: AssemblyConfiguration("Debug")]
#else
[assembly: AssemblyConfiguration("Release")]
#endif 
```

或者

```
#if DEBUG
[assembly: AssemblyMetadata("DefinedVariable", "DEBUG")]
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:48:13.860

有3种方式：

```
private bool IsAssemblyDebugBuild(string filepath)
{
    return IsAssemblyDebugBuild(Assembly.LoadFile(Path.GetFullPath(filepath)));
}

private bool IsAssemblyDebugBuild(Assembly assembly)
{
    foreach (var attribute in assembly.GetCustomAttributes(false))
    {
        var debuggableAttribute = attribute as DebuggableAttribute;
        if(debuggableAttribute != null)
        {
            return debuggableAttribute.IsJITTrackingEnabled;
        }
    }
    return false;
} 
```

或使用 assemblyinfo 元数据：

```
#if DEBUG
[assembly: AssemblyConfiguration("Debug")]
#else
[assembly: AssemblyConfiguration("Release")]
#endif 
```

`#if DEBUG`或者在代码中使用常量

```
#if DEBUG
        public const bool IsDebug = true;
#else
        public const bool IsDebug = false;
#endif 
```

我更喜欢第二种方式，所以我可以通过代码和 Windows 资源管理器来阅读它

# javascript - 如何使用 jquery 隐藏/显示选项卡

> ID：15199468
> 
> 赞同：1
> 
> 时间：2013-03-04T10:31:44.713
> 
> 标签：javascript, jquery, html, jquery-ui

我有四个选项卡。加载时只打开第一个选项卡，当我们单击复选框时会生成相应的选项卡，当我们取消选中时，该选项卡将被删除。我该怎么做？我的代码是

```
 <script>
    $(function() {
    $("#tabs").tabs();
    });
</script>
<style>

</style>
</head>
<body>
 <div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nithin</a> </li>
    <li><a href="#tabs-2">Vipin</a></li>
    <li><a href="#tabs-3">Sachin</a></li>
    <li><a href="#tabs-4">Ganguly</a></li>
  </ul>
  <div id="tabs-1">
    <p>Nithin</p>
  </div>
  <div id="tabs-2">
    <p>Vipin</p>
  </div>
   <div id="tabs-3">
    <p>Sachin</p>
  </div>
   <div id="tabs-4">
    <p>Ganguly</p>
  </div>
</div>
<input type="checkbox" name="tabs-1" value="1">tabs-1 
<input type="checkbox" name="tabs-2" value="2">tabs-2 
<input type="checkbox" name="tabs-3" value="3">tabs-3 
<input type="checkbox" name="tabs-4" value="4">tabs-4 
<br>
</body>
</html> 
```

[您可以从http://jsfiddle.net/2aQ2g/5/](http://jsfiddle.net/2aQ2g/5/)查看我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:46:50.117

与其删除选项卡，不如考虑隐藏它。

您可以添加以下 CSS 以使其工作。

```
.ui-state-disabled {
    display: none;
} 
```

检查这个小提琴：http: [//jsfiddle.net/2aQ2g/12/](http://jsfiddle.net/2aQ2g/12/)

当然还需要处理相应选项卡内容的隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:46:03.580

半答案..用于启用相应复选框上的选项卡单击

```
 $(function() {
      $("#tabs").tabs();

    $( "input[type=checkbox]" ).click(function(){
        if ($(this).is(':checked')) {

            $('#tabs').tabs({"selected": parseInt($(this).val()-1),"enabled":parseInt($(this).val()-1) });
        }
        });
    }); 
```

# php - 将 mysql 数据库中的行分隔为不同的变量

> ID：15199470
> 
> 赞同：3
> 
> 时间：2013-03-04T10:31:50.657
> 
> 标签：php, mysql, database, arrays, variables

我试图将每行的结果分成不同的数组，然后将它们输出到表中。这是我的代码..它很长我知道而且也过时了，但我只需要它工作。任何帮助都会很棒。目前它确实回显了正确数量的行，只是它们都是空的。

```
 <?php
        include ('user.inc');
        mysql_connect(localhost,$username,$password);
        @mysql_select_db($database) or die ("unable to select database");

            $query = 'SELECT * FROM customer LIMIT 50';
            $result=mysql_query($query);
            $num=mysql_numrows($result);

        mysql_close();

            $i=0;

            while ($i = mysql_fetch_array($result)){
                $customerID[$i]=$i['customerID'];
                $surname[$i]=$i['surname'];
                $forname[$i]=$i['forname'];
                $title[$i]=$i['title'];
                $email[$i]=$i['e-mail'];
                $adress[$i]=$i['address1'];
                $street[$i]=$i['street'];
                $city[$i]=$i['city'];
                $county[$i]=$i['cuunty'];
                $postcode[$i]=$i['postcode'];
                $phoneNumber[$i]=$i['phoneNumber'];
                $mobileNumber[$i]=$i['mobileNumber'];
            $i++;
            }
            $r=0;
            echo'<table>';
            while ($r < $num){
                echo'<tr>';
                echo'<td><form action="userinfo.php"><input type="hidden" name="customerID" value="';
                echo$customerID[$r];
                echo'"><imput type="submit" value="';
                echo$customerID[$r];
                echo'"></form></td>';
                echo'   <td>';
                echo$title[r];
                echo'</td>';
                echo'   <td>';
                echo$surname[r];
                echo'</td>';
                echo'   <td>';
                echo$forname[r];
                echo'</td>';
                echo'   <td>';
                echo$email[r];
                echo'</td>';
                echo'</tr>';
            $r++;
            }
            echo'</table>';
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:35:51.867

改变这个

```
$i=0;

        while ($i = mysql_fetch_array($result)){
            $customerID[$i]=$i['customerID'];
            $surname[$i]=$i['surname'];
            $forname[$i]=$i['forname'];
            $title[$i]=$i['title'];
            $email[$i]=$i['e-mail'];
            $adress[$i]=$i['address1'];
            $street[$i]=$i['street'];
            $city[$i]=$i['city'];
            $county[$i]=$i['cuunty'];
            $postcode[$i]=$i['postcode'];
            $phoneNumber[$i]=$i['phoneNumber'];
            $mobileNumber[$i]=$i['mobileNumber'];
        $i++;
        } 
```

至

```
//$i=0;

        while ($i = mysql_fetch_array($result)){
            $customerID[]=$i['customerID'];
            $surname[]=$i['surname'];
            $forname[]=$i['forname'];
            $title[]=$i['title'];
            $email[]=$i['e-mail'];
            $adress[]=$i['address1'];
            $street[]=$i['street'];
            $city[]=$i['city'];
            $county[]=$i['cuunty'];
            $postcode[]=$i['postcode'];
            $phoneNumber[]=$i['phoneNumber'];
            $mobileNumber[]=$i['mobileNumber'];
        //$i++;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:56:20.147

为什么要将所有数据读入数组然后再写出来？这是不必要的，而且会浪费内存。将您的 echo 语句放入第一个循环中，并引用相关的数组节点。

# java - 如何以简短的方式在 IDE 中配置 tomcat 日志记录

> ID：15199473
> 
> 赞同：1
> 
> 时间：2013-03-04T10:32:06.097
> 
> 标签：java, eclipse, tomcat, logging, intellij-idea

从 IDE 运行 tomcat 时，通常不使用启动脚本启动它。所以日志配置没有被选中。我需要把我的配置放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:33:30.677

Tomcat 最初使用 java.util.logging 进行日志记录。它的格式不是很容易阅读。要使用较短的日志记录输出，您必须在文件中配置日志记录。此文件可以是启动脚本 (%CATALINA_BASE%\conf\logging.properties) 定义的标准位置。如果从 IDE 启动 tomcat，则必须在命令行上通过以下方式定义文件名：“-Djava.util.logging.config.file=...your-tomcat-installation\conf\logging.properties”

样本：

```
handlers= java.util.logging.ConsoleHandler  
.level= INFO  
#SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST, ALL  
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter  
java.util.logging.SimpleFormatter.format= %1$TH:%1$TM:%1$TS %4$-5s %2$s: %5$s%n  
#results in:  
#16:26:26 INFO  org.apache.catalina.startup.Catalina load: Initialization processed in 201 ms  
#for the format see the javadoc of java.util.logging.SimpleFormatter 
```

# android - 在android中将jpct-ae集成到高通的Vuforia引擎

> ID：15199479
> 
> 赞同：8
> 
> 时间：2013-03-04T10:32:13.760
> 
> 标签：android, c++, java-native-interface, vuforia, jpct

在 Android 中，我正在尝试使用本教程将 JPCT 集成到 Vuforia： [http ://www.jpct.net/wiki/index.php/Integrating_JPCT-AE_with_Vuforia](http://www.jpct.net/wiki/index.php/Integrating_JPCT-AE_with_Vuforia)

第一次启动应用程序时，它可以工作，但是当我返回并再次触摸“播放”时，它崩溃了。

这些是应用程序崩溃时我的 LogCat 中的错误：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: [ 1362671862690 ] - ERROR:  A texture with the name  'texture' has been declared twice!
at com.threed.jpct.Logger.log(Logger.java:189)
at com.threed.jpct.TextureManager.addTexture(TextureManager.java:138)
at com.qualcomm.QCARSamples.ImageTargets.ImageTargetsRenderer.<init>    (ImageTargetsRenderer.java:78)
at     com.qualcomm.QCARSamples.ImageTargets.ImageTargets.initApplicationAR(ImageTargets.java:807)
at com.qualcomm.QCARSamples.ImageTargets.ImageTargets.updateApplicationStatus(ImageTargets.java:649)
at com.qualcomm.QCARSamples.ImageTargets.ImageTargets.updateApplicationStatus(ImageTargets.java:641)
at com.qualcomm.QCARSamples.ImageTargets.ImageTargets.access$3(ImageTargets.java:598)
at com.qualcomm.QCARSamples.ImageTargets.ImageTargets$InitQCARTask.onPostExecute(ImageTargets.java:226)
at com.qualcomm.QCARSamples.ImageTargets.ImageTargets$InitQCARTask.onPostExecute(ImageTargets.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:417)
at android.os.AsyncTask.access$300(AsyncTask.java:127)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
at dalvik.system.NativeStart.main(Native Method) 
```

**这是 Imagetargetsrenderer.java 代码**

```
public class ImageTargetsRenderer implements GLSurfaceView.Renderer
{
public boolean mIsActive = false;

/** Reference to main activity **/
public ImageTargets mActivity;

/** Native function for initializing the renderer. */
public native void initRendering();

/** Native function to update the renderer. */
public native void updateRendering(int width, int height);

private World world=null;
private Light sun = null;
private Object3D cube = null;
private FrameBuffer fb = null;
private float[] modelViewMat=null;
private Camera cam=null;
private float fov=0;
private float fovy=0;

//private Camera cam=null;
private Object3D plane=null;

public ImageTargetsRenderer(ImageTargets activity){
    this.mActivity = activity;
    world = new World();
world.setAmbientLight(20, 20, 20);

sun = new Light(world);
sun.setIntensity(250, 250, 250);

// Create a texture out of the icon...:-)
Texture texture = new Texture(BitmapHelper.rescale(BitmapHelper.convert(mActivity.getResources().getDrawable(R.drawable.ic_launcher)), 64, 64));
TextureManager.getInstance().addTexture("texture", texture);

cube = Primitives.getCube(10);
cube.calcTextureWrapSpherical();
cube.setTexture("texture");
cube.strip();
cube.build();

world.addObject(cube);

 cam = world.getCamera();
/*cam.moveCamera(Camera.CAMERA_MOVEOUT, 50);
cam.lookAt(cube.getTransformedCenter());*/

SimpleVector sv = new SimpleVector();
SimpleVector position=new SimpleVector();
position.x=0;
position.y=0;
position.z=-10;

cube.setOrigin(position);
sv.set(cube.getTransformedCenter());
sv.y -= 100;
sv.z -= 100;

sun.setPosition(sv);
MemoryHelper.compact();

}

/** Called when the surface is created or recreated. */
public void onSurfaceCreated(GL10 gl, EGLConfig config)
{
    DebugLog.LOGD("GLRenderer::onSurfaceCreated");

    // Call native function to initialize rendering:
    initRendering();

    // Call QCAR function to (re)initialize rendering after first use
    // or after OpenGL ES context was lost (e.g. after onPause/onResume):
    QCAR.onSurfaceCreated();
}

/** Called when the surface changed size. */
public void onSurfaceChanged(GL10 gl, int width, int height)
{
    DebugLog.LOGD("GLRenderer::onSurfaceChanged");

    // Call native function to update rendering when render surface
    // parameters have changed:
    updateRendering(width, height);

    // Call QCAR function to handle render surface size changes:
    QCAR.onSurfaceChanged(width, height);

    if (fb != null) {
        fb.dispose();
   }
   fb = new FrameBuffer(width, height);
}

/** The native render function. */
public native void renderFrame();

/** Called to draw the current frame. */
public void onDrawFrame(GL10 gl)
{
    if (!mIsActive)
        return;

    // Update render view (projection matrix and viewport) if needed:
    mActivity.updateRenderView();

    //updateCamera();

    // Call our native function to render content

    renderFrame();

    world.renderScene(fb);

    world.draw(fb);

    fb.display(); 

}

public void updateModelviewMatrix(float mat[]) {
    modelViewMat = mat;
}

public void setFov(float fov_) {
    fov = fov_;
}

public void setFovy(float fovy_) {
    fovy = fovy_;
}

public void updateCamera() {
    Matrix m = new Matrix();
    m.setDump(modelViewMat);
        cam.setBack(m);
        cam.setFOV(fov);
        cam.setYFOV(fovy);

}

} 
```

**imagetargets.cpp 的代码**

```
JNIEXPORT void JNICALL
Java_com_qualcomm_QCARSamples_ImageTargets_ImageTargetsRenderer_renderFrame(JNIEnv  *env, jobject obj)
{

const QCAR::CameraCalibration& cameraCalibration =       QCAR::CameraDevice::getInstance().getCameraCalibration();
QCAR::Vec2F size = cameraCalibration.getSize();
QCAR::Vec2F focalLength = cameraCalibration.getFocalLength();
float fovyRadians = 2 * atan(0.5f * size.data[1] / focalLength.data[1]);
float fovRadians = 2 * atan(0.5f * size.data[0] / focalLength.data[0]);

jclass activityClass = env->GetObjectClass(obj);
jfloatArray modelviewArray = env->NewFloatArray(16);
jmethodID updateMatrixMethod = env->GetMethodID(activityClass, "updateModelviewMatrix",    "([F)V");

jmethodID fovMethod = env->GetMethodID(activityClass, "setFov", "(F)V");
jmethodID fovyMethod = env->GetMethodID(activityClass, "setFovy", "(F)V");

// test
jclass newClass = env->GetObjectClass(obj);
jmethodID updateCameraMethod = env->GetMethodID(newClass, "updateCamera", "()V");

// Clear color and depth buffer 
//glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
// Get the state from QCAR and mark the beginning of a rendering section
QCAR::State state = QCAR::Renderer::getInstance().begin();
// Explicitly render the Video Background
QCAR::Renderer::getInstance().drawVideoBackground();
// Did we find any trackables this frame?
for(int tIdx = 0; tIdx < state.getNumTrackableResults(); tIdx++)
{
    // Get the trackable:
    const QCAR::TrackableResult* result = state.getTrackableResult(tIdx);
    const QCAR::Trackable& trackable = result->getTrackable();
    QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(result-  >getPose());
}
QCAR::Renderer::getInstance().end();

for(int tIdx = 0; tIdx < state.getNumTrackableResults(); tIdx++)
{
// Get the trackable:
const QCAR::TrackableResult* result = state.getTrackableResult(tIdx);
const QCAR::Trackable& trackable = result->getTrackable();
QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(result-    >getPose());

    SampleUtils::rotatePoseMatrix(180.0f, 1.0f, 0, 0, &modelViewMatrix.data[0]);
    // Passes the model view matrix to java
    env->SetFloatArrayRegion(modelviewArray, 0, 16, modelViewMatrix.data);
    env->CallVoidMethod(obj, updateMatrixMethod , modelviewArray);
    env->CallVoidMethod(obj, updateCameraMethod);
    env->CallVoidMethod(obj, fovMethod, fovRadians);
    env->CallVoidMethod(obj, fovyMethod, fovyRadians);

}
env->DeleteLocalRef(modelviewArray);

} 
```

这个例外是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T15:08:58.213

`renderFrame`您的方法的开头`ImageTarget.cpp`应该是这样的：

```
jclass activityClass = env->GetObjectClass(obj);
jfloatArray modelviewArray = env->NewFloatArray(16);
jmethodID method = env->GetMethodID(activityClass, "updateModelviewMatrix", "([F)V"); 
```

我认为，这将解决您**在此范围内未声明 activityClass的错误**

注释掉这一行并再次测试。你不再需要它了。

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

如果 QCAR 没有更早地开始渲染，我还建议注释掉该`renderFrame()`方法以查看 jPCT 是否可以渲染多维数据集。*（仅用于测试目的）*`onDrawFrame()`

 *更不用说，QCAR 最初默认更改 OpenGL 状态。因此，您必须启用其中一些才能使用 jPCT 进行渲染。检查[视频背景渲染器中的 OpenGL 状态更改以](https://developer.vuforia.com/resources/dev-guide/opengl-state-changes-video-background-renderer)获取更多信息。

我打电话`OpenGL ES 1.x`后`renderFrame`使用这个`onDrawFrame`：

```
GL11 gl11 = (GL11) gl;
gl11.glEnable(GL11.GL_DEPTH_TEST);
gl11.glEnable(GL11.GL_CULL_FACE);
gl11.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_MODULATE);
gl11.glEnable(GL11.GL_LIGHTING);
gl11.glEnable(GL11.GL_BLEND); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T18:29:41.273

为了在应用矩阵之前看到一些东西，您必须首先告诉相机查看对象。

```
Camera cam = world.getCamera();
cam.moveCamera(Camera.CAMERA_MOVEOUT, 50);
cam.lookAt(cube.getTransformedCenter()); 
```

请注意，当您使用标记中的模型视图矩阵更新相机时，您应该删除这些行。

如果您按照我的教程进行操作，您实际上不必激活任何 OpenGL 状态来查看标记上方的内容（尽管出于其他原因，您可能有兴趣按照 Sam Rad 的建议激活它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T11:46:43.767

将此添加到渲染器以删除加载的纹理

```
public void cleanup()
{
    TextureManager.getInstance().removeTexture("texture");
} 
```

在关闭/暂停时从 Activity 调用它

```
protected void onPause()
{
   mRenderer.cleanup();
} 
```*

# android - 从 eclipse 安装兼容的 Android DDMS

> ID：15199481
> 
> 赞同：2
> 
> 时间：2013-03-04T10:32:15.107
> 
> 标签：android, eclipse, eclipse-plugin, ddms

我更新了 android 开发环境`Android DDMS 12.x.x`，`ADT 21.1.0`之后在我`Android Hierarchy viewer 12.0.0`的. 由于某些依赖关系问题，我无法更新、和。所以我想通过卸载然后安装这些旧功能来手动试用和试用。我卸载了，但现在我无法安装它，因为更新中仅显示版本 21.xx，由于依赖关系不兼容。`Android Native Development Tools 21.1.0``Android Traceview 12.0.0``eclipse helios 3.6.0``Android DDMS``Android Hierarchy viewer``Android Traceview to 21.x.x``Android DDMS`

那么，如果可能的话，我现在如何独立安装`DDMS`到最新版本，甚至恢复到 12.xx 的旧工作版本？

任何帮助将不胜感激。

Update1：​​我尝试从 Eclipse 中的安装历史记录中还原更改，但现在我得到的只是

> 未找到包含以下内容的存储库：org.eclipse.update.feature,com.android.ide.eclipse.ddms,12.0.0.v201106281929-138431

更新 2：即使我（帮助 > 关于 Eclipse SDK > 安装详细信息）卸载了 DDMS，我仍然有 DDMS 视角，所以我想知道它是否真的被卸载了。只有 DDMS 现在没有显示在“已安装的软件”中。如何在已安装的软件中将其恢复到那里？

直到现在都没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:13:30.303

好吧，我很担心把这些东西都安装一遍。这就是我在执行更新后在我的 eclipse helios 3.6.0 上安装了 Android DDMS 12.xx、ADT 21.1.0、Android Hierarchy viewer 12.0.0、Android Native Development Tools 21.1.0、Android Traceview 12.0.0 的原因。这些不一致的版本主要是由于插件依赖问题。

如上所述，恢复也没有工作。所以我不得不卸载所有这些插件。然后不知何故安装新的和最新版本的插件也没有工作。然后我下载了我在更新之前使用的旧版本的 ADT

[dl.google.com/android/ADT-12.0.0.zip](http://dl.google.com/android/ADT-12.0.0.zip)

（从 stackoverflow 中的一个答案中找到旧 ADT 的链接。我不知道为什么 google 不提供旧存储库的链接）然后我安装了它，在执行更新后，我拥有了 21.xx 版本的所有插件

PS eclipse版本也升级到了3.6.2。

这是我发现的工作。永远**不要试图修复没有损坏的东西。**

# postgresql - PostgreSQL 在多个表上引用外键

> ID：15199482
> 
> 赞同：0
> 
> 时间：2013-03-04T10:32:18.833
> 
> 标签：postgresql, foreign-keys

今天我开始将 MySql 数据库移植到 PostgreSQL，但外键及其“共享”存在问题

我不知道如何解释，所以这里是创建脚本的一些伪代码：

```
create table id_generator (
id serial PRIMARY KEY,
description varchar(50) );

create table parent (
id REFERENCES id_generator(id),
--content );

create table child (
id REFERENCES id_generator(id),
id_parent REFERENCES parent(id),
--content ); 
```

因此，我使用一个表作为“id_generator”来创建 id，并为其他表提供对值表的引用。在 MySql 中我对此没有任何问题，所以我希望它也能在 PostgreSQL 中工作。

运行该脚本时，我收到错误消息，我需要在表格上添加一个`primary key`/来在其上创建引用。所以我把它改成：`unique``parent`

```
create table id_generator (
id serial PRIMARY KEY,
description varchar(50) );

create table parent (
id REFERENCES id_generator(id) PRIMARY KEY,
--content );

create table child (
id REFERENCES id_generator(id),
id_parent REFERENCES parent(id),
--content ); 
```

所以服务器接受创建脚本，并且为一些插入设置了所有内容。

我使用以下命令创建第一个 id：

```
insert into id_generator(description) values("parentID"); 
```

然后我想添加一个父母：

```
insert into parent(id, /*content*/) values(1, /*content*/); 
```

这也可以按预期工作，所以我需要插入一个`child`for `parent`：

```
insert into id_generator(description) values("childID");
insert into child(id,id_parent)values(2,1); 
```

在这里我收到错误消息“错误：重复键值违反唯一约束详细信息：键（id_parent）=（1）已经存在”

编辑：

```
\d child;

         Tabelle ╗public.child½
      Spalte       |   Typ   | Attribute
-------------------+---------+-----------
      id           | integer | not null
      id_parent    | integer |
Indexe:
    "child_pkey" PRIMARY KEY, btree (id)Fremdschlⁿssel-Constraints:
    "child_id_parent_fkey" FOREIGN KEY (id_parent) REFERENCES parent(id)
    "child_id_generator_fkey" FOREIGN KEY (id) REFERENCES id_generator(id) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:19:57.253

好的，对不起，问题解决了，插入语句的双重调用：facepalm：

# php - 处理异常并继续工作而不会出错

> ID：15199484
> 
> 赞同：0
> 
> 时间：2013-03-04T10:32:34.583
> 
> 标签：php, try-catch

我想防止在我加载错误或失败（例如从远程服务器）的情况下 PHP 抛出错误的情况。最近我开始使用 try-catch 块来避免致命错误，所以用户不知道有些事情搞砸了。

看我的代码：

```
try
{
    $flashRAW = file_get_contents($getXml);
    $flashXML = simplexml_load_string($flashRAW);
}
catch(Exception $e)
{
    return $e->getMessage();
}

$xmlString = $flashXML->asXML(); 
```

使用“return”是我的发明（我想，我从未见过......）。返回后，我的应用程序将继续工作，并且不会出现“尝试获取非对象的属性”错误。没有回报，我会得到它 - 我认为这很愚蠢，因为我使用 try-catch 来防止这种情况......

以这种方式使用返回可以吗？处理异常并使该应用程序继续工作而不会出现致命错误的更好方法是什么？我在某处读到 try-catch 旨在处理逻辑错误并增加内存消耗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:35:18.543

我认为您遇到的问题是因为如果出现异常，则未定义“$flashRAW”。

您应该在调用“$flashXML->asXML()”之前检查“$flashRAW”。

如果您使用返回，则函数/页面中不会执行任何代码，具体取决于您拥有代码的位置。

是否使用 return 的选择更多地基于用例。所以取决于你如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:51:04.597

如果你想捕获它引发的异常，你需要使用[libxml_use_internal_errors](http://php.net/manual/en/function.libxml-use-internal-errors.php)`try/catch` ，在你的块之前这样做

```
libxml_use_internal_errors(true); 
```

# c# - 从包含更新信息的 xml 文件更新 mysql 数据库表记录的有效方法是什么？

> ID：15199485
> 
> 赞同：0
> 
> 时间：2013-03-04T10:32:34.673
> 
> 标签：c#, xml, database, insert-update

我使用 MySQL 作为数据库，其中包含各种表中的大量数据。我想以有效的方式更新具有不同字段的不同表的记录。我有一个 xml 文件，其中包含所有需要更新的表的信息记录已更新。请建议使用 c#.NET 执行此类操作的有效方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:51:20.467

首先读取xml文件并将表的数据放入dataset的datatable中。编写 ado.net 代码以从数据集中的数据表更新数据库表的数据。

# java - 需要帮助来修复 GUI

> ID：15199490
> 
> 赞同：1
> 
> 时间：2013-03-04T10:32:52.027
> 
> 标签：java, swing

问题是条形图下的文本与条形图中的条不对齐。如何使它们正确对齐？

我还能在这个问题上添加什么细节来让你的探测器闭嘴？:)

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class SimpleBarChart extends JPanel {

    private double[] value;
    private String[] languages;
    private String title;
    private int gapBetweenBars = 40;//MODIFICATION - NOT A PART OF ORIGINAL CODE

    public SimpleBarChart(double[] val, String[] lang, String t) {
        languages = lang;
        value = val;
        title = t;
    }

    public void paintComponent(Graphics graphics) {
        super.paintComponent(graphics);
        if (value == null || value.length == 0) {
            return;
        }
        double minValue = 0;
        double maxValue = 0;
        for (int i = 0; i < value.length; i++) {
            if (minValue > value[i]) {
                minValue = value[i];
            }
            if (maxValue < value[i]) {
                maxValue = value[i];
            }
        }
        Dimension dim = getSize();
        int clientWidth = dim.width;
        int clientHeight = dim.height;
        int barWidth = clientWidth / value.length;

        barWidth = barWidth / 3;//MODIFICATION - NOT A PART OF ORIGINAL CODE

        Font titleFont = new Font("Book Antiqua", Font.BOLD, 15);
        FontMetrics titleFontMetrics = graphics.getFontMetrics(titleFont);
        Font labelFont = new Font("Book Antiqua", Font.PLAIN, 10);
        FontMetrics labelFontMetrics = graphics.getFontMetrics(labelFont);
        int titleWidth = titleFontMetrics.stringWidth(title);
        int q = titleFontMetrics.getAscent();
        int p = (clientWidth - titleWidth) / 2;
        graphics.setFont(titleFont);
        graphics.drawString(title, p, q);
        int top = titleFontMetrics.getHeight();
        int bottom = labelFontMetrics.getHeight();

        if (maxValue == minValue) {
            return;
        }

        double scale = (clientHeight - top - bottom) / (maxValue - minValue);
        q = clientHeight - labelFontMetrics.getDescent();
        graphics.setFont(labelFont);

        for (int j = 0; j < value.length; j++) {
            int valueP = j * (barWidth + gapBetweenBars) + 1; //MODIFICATION - NOT A PART OF    ORIGINAL CODE
            int valueQ = top;
            int height = (int) (value[j] * scale);
            if (value[j] >= 0) {
                valueQ += (int) ((maxValue - value[j]) * scale);
            } else {
                valueQ += (int) (maxValue * scale);
                height = -height;
            }
            graphics.setColor(Color.blue);
            graphics.fillRect(valueP, valueQ, barWidth - 2, height);
            graphics.setColor(Color.black);
            graphics.drawRect(valueP, valueQ, barWidth - 2, height);
            int labelWidth = labelFontMetrics.stringWidth(languages[j]);
            p = j * barWidth + (barWidth - labelWidth) / 2;
            graphics.drawString(languages[j], p, q);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setSize(500, 500);
        double[] value = new double[5];
        String[] languages = new String[5];
        value[0] = 1;
        languages[0] = "Visual Basic";

        value[1] = 2;
        languages[1] = "PHP";

        value[2] = 3;
        languages[2] = "C++";

        value[3] = 4;
        languages[3] = "C";

        value[4] = 5;
        languages[4] = "Java";

        frame.getContentPane().add(new SimpleBarChart(value, languages, "Programming    Languages"));

        WindowListener winListener = new WindowAdapter() {
            public void windowClosing(WindowEvent event) {
                System.exit(0);
            }
        };
        frame.addWindowListener(winListener);
        frame.setVisible(true);
    }

    public void setGapBetweenBars(int gapBetweenBars) {

        this.gapBetweenBars = gapBetweenBars;
    }

    public int getGapBetweenBars() {

        return this.gapBetweenBars;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:41:55.937

在侧面 for 循环中使用它

```
int labelWidth = labelFontMetrics.stringWidth(languages[j]);
p = j * (barWidth+gapBetweenBars) + (barWidth - labelWidth) / 2; 
```

更改了 Languages 字符串之间的空间计算

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:43:19.397

for 循环中的值`p`不正确，应该是：

```
p = j * (barWidth + gapBetweenBars) + (barWidth - labelWidth) / 2; 
```

你忘了考虑差距。

# jquery - 页面加载时弹出窗口 html5 响应式设计

> ID：15199493
> 
> 赞同：0
> 
> 时间：2013-03-04T10:32:56.553
> 
> 标签：jquery, html, responsive-design

如何在页面加载时弹出窗口。我搜索了很多网站，都在做类似链接点击。但我想在 html 中显示页面加载。是否有任何加载方法可以在 j 查询中显示弹出窗口。我参考了这个[链接](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/build-a-popup-modal-window-using-the-jquery-reveal-plugin/) .如何在页面加载时显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:47:30.480

```
<script type="text/javascript">
$(document).ready(function() {
$('#modal').reveal({ 
            animation: 'fade',
            animationspeed: 600,
            closeonbackgroundclick: true,
            dismissmodalclass: 'close'
        });
return false;
}); 
```

经过长时间的思考，我从这个[链接](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/build-a-popup-modal-window-using-the-jquery-reveal-plugin/)得到了答案。在这里我发布了关于页面加载中弹出模型的代码。我希望这个答案能帮助某人，谁曾经想做这样的任务。我刚刚删除了一个标签页面和 document.ready() 函数中编写的 jquery 代码。现在弹出窗口将仅在页面加载中加载。

# php - php cURL - 上传速度慢 - 如何优化？

> ID：15199503
> 
> 赞同：1
> 
> 时间：2013-03-04T10:33:23.730
> 
> 标签：php, curl

我正在使用 cURL 在我的网站和合作伙伴的网站之间传输数据。

请求很长（约 18 秒），但信息量很小（约 207 字节）。

这是我生成请求的代码：

```
// Send the subscription           
$resource = curl_init($url);
curl_setopt($resource, CURLOPT_RETURNTRANSFER, true);
curl_setopt($resource, CURLOPT_POST, count($postFields));
curl_setopt($resource, CURLOPT_POSTFIELDS, $postString);
$result = curl_exec($resource); 
```

这是 curlinfo 调试的结果：

```
17.418212 total_time : Total transaction time in seconds for last transfer
0.064612 namelookup_time : Time in seconds until name resolving was complete
0.437222 connect_time : Time in seconds it took to establish the connection
0.946509 pretransfer_time : Time in seconds from start until just before file transfer begins
17.418172 starttransfer_time : Time in seconds until the first byte is about to be transferred
0 redirect_count : Number of redirects
0 redirect_time : Time in seconds of all redirection steps before final transaction was started
207 size_upload : Total number of bytes uploaded
11 speed_upload : Average upload speed
130 size_download : Total number of bytes downloaded
7 speed_download : Average download speed 
```

在 curlinfo 文档：[http](http://curl.haxx.se/libcurl/c/curl_easy_getinfo.html) : //curl.haxx.se/libcurl/c/curl_easy_getinfo.html 上，据说 size_upload 和 speed_upload 分别以字节和字节/秒为单位。

**10 字节/秒不是很快，是吗？我在哪里可以找到其他调试信息，我可以做些什么来提高这个速度？**

附加信息：发送和接收数据的服务器都具有良好的带宽，并且都在同一个城市

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:57:58.600

它看起来像服务器端的性能问题。

curl_getinfo() 报告的速度计算如下：

```
bytesPerSecond = totalBytesReceived/totalTime 
```

其中 totalTime 是 curl_exec 执行时间。

如果服务器响应延迟（服务器繁忙等）您可能会等待 1 分钟以在最后一毫秒获得 60 个字节，并且报告的速度将为每秒 1 个字节，这与服务器之间的网络连接速度无关紧要。

# shell - Amazon 通过 cronjob 自动启动服务器

> ID：15199504
> 
> 赞同：0
> 
> 时间：2013-03-04T10:33:24.063
> 
> 标签：shell, ubuntu, amazon-ec2, crontab

我创建了一个 cron 作业来在特定时间启动和停止实例。

我已经针对用户 ubuntu 设置了亚马逊 API。将脚本 start.sh 保存在主文件夹中

```
#!/bin/bash

ec2-start-instances i-instanceID 
```

我将作业放在 cron 选项卡中。

`0 18 * * 5 /home/ubuntu/scripts/dev/stop.sh`

该脚本在特定时间执行，但实例没有停止/启动。任何人都可以提出一个出路。

我还尝试在同样失败的 root 用户中设置相同的作业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:39:10.853

您需要定义哪个二进制文件正在执行脚本。因此，试试这个：

```
0 18 * * 5 /bin/bash /home/ubuntu/scripts/dev/stop.sh
           ^^^^^^^^^ 
```

# ios - Tesseract OCR 不会忽略黑名单字符

> ID：15199510
> 
> 赞同：2
> 
> 时间：2013-03-04T10:33:31.660
> 
> 标签：ios, ocr, tesseract

我正在使用 Tessearct OCR 来识别图像的字符。但我希望使用 OCR 忽略数字字符

```
_tesseract->SetVariable("tessedit_char_blacklist", "0123456789"); 
```

通过这种方式，OCR 无法识别数字字符，但它为我提供了一些我不想要的其他字符来代替它们。

例如：有一张图片的文字为**12 美元**，当我在该图片上应用 OCR 时，它为我提供了**美元 fl**

正如我们在上面看到的那样，OCR 将**12**转换为我不想要的 fl 。我希望**12**被 OCR 忽略。

有什么方法可以得到**美元**而不是 **美元 fl 的结果**

为我提供任何解决方案。任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-05T09:08:37.000

有关方法，请参阅此评论`SetVariable()`：

```
// For most variables, it is wise to set them before calling Init. 
```

我遇到了与您相同的问题，并在`Init`修复之前移动了代码：

```
tess = new TessBaseAPI();    
tess->SetVariable("tessedit_char_whitelist", 
   "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");
tess->SimpleInit([dataPath cStringUsingEncoding:NSUTF8StringEncoding],  
   "eng", false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-17T15:48:35.427

那不是`tessedit_char_blacklist`目的。`tessedit_char_blacklist`保证数字不会出现在图像中。如果你告诉 Tesseract 不正确的信息，你会得到不好的结果。

相反，您想要的是对 Tesseract 的输出进行后处理。让它输出正确的 OCR，然后去掉数字字符。

# python - django formset 更新现有

> ID：15199512
> 
> 赞同：0
> 
> 时间：2013-03-04T10:33:36.160
> 
> 标签：python, django

我想用 list_editable 项目创建类似于 django admin changelist view 的东西......

我成功地创建了视图。但是当我发布它时，它会因验证错误而死。

```
 if request.POST:
        formset_class = modelformset_factory(Job)
        formset =formset_class(request.POST, request.FILES)
        if formset.is_valid():
           formset.save() 
```

问题是我只有几个可编辑的属性。因此，其中一些不是 POST 的一部分，模型抱怨它们是强制性的。

但我想更新对象而不是创建它们。基本上我真的希望管理员在设置时做同样的事情，`list_editable`但在我自己的观点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:21:06.050

我想要一个功能，就像使用 list_editable 的 admin 一样，所以我选择了它，并且几乎从`options.py`django 源代码中复制了代码。我为我的对象检索了管理员，然后保存了原始值（函数`fix_old_job_admin`将它们设置回来）

这段代码解决了我的问题

```
job_admin = admin.site._registry[Job]
# save old values so that you can go back to them later
old_list_display = job_admin.list_display
old_list_filter = job_admin.list_filter
old_ordering = job_admin.model._meta.ordering
job_admin.list_editable = ("time", "what", "approved")
cl = ChangeList(request, job_admin.model, job_admin.list_display, job_admin.list_display_links, job_admin.list_filter, job_admin.date_hierarchy, job_admin.search_fields, job_admin.list_select_related, job_admin.list_per_page, job_admin.list_editable,job_admin.admin_site, job_admin)
# options.py from django framework lines 1181-1208 (v. 1.4) 
if request.POST:
    FormSet = job_admin.get_changelist_formset(request)
    formset =FormSet(request.POST, request.FILES, queryset=cl.result_list)
    if formset.is_valid():
        changecount = 0
        for form in formset.forms:
            if form.has_changed():
                obj = job_admin.save_form(request, form, change=True)
                job_admin.save_model(request, obj, form, change=True)
                job_admin.save_related(request, form, formsets=[], change=True)
                change_msg = job_admin.construct_change_message(request, form, None)
                job_admin.log_change(request, obj, change_msg)
                changecount += 1 

        if changecount:
            if changecount == 1:
                name = force_unicode(job_admin.model._meta.verbose_name)
            else:
                name = force_unicode(job_admin.model._meta.verbose_name_plural)
            msg = ungettext("%(count)s %(name)s was changed successfully.",
                                "%(count)s %(name)s were changed successfully.",
                                changecount) % {'count': changecount,
                                                'name': name,
                                                'obj': force_unicode(obj)}
            job_admin.message_user(request, msg)
        # call function that sets admin with original values
        fix_old_job_admin(job_admin, old_list_display, old_ordering, old_list_filter)
        return HttpResponseRedirect(request.get_full_path())

FormSet = job_admin.get_changelist_formset(request)
cl.formset = FormSet(queryset=cl.result_list)

context = Context({
    'app_label': ContentType.objects.get_for_model(Lawyer).app_label,
    'verbose_name_plural': Job._meta.verbose_name_plural.title(),
    "cl": cl,
    'request': request,

                   })
# call function that sets admin with original values
fix_old_job_admin(job_admin, old_list_display, old_ordering, old_list_filter)
return render_to_response('yourtemplate/similar_to_changelist.html', context, RequestContext(request)) 
```

# vb.net - Grdview 到 excel 并保存所以对话框不显示

> ID：15199516
> 
> 赞同：0
> 
> 时间：2013-03-04T10:33:59.727
> 
> 标签：vb.net

我有以下代码。它创建并保存了一个包含 grdview4 内容的 excel 文件，这很棒。但是在应用程序结束时，它会显示一个我不想要的对话框。有没有办法让对话框不显示？

```
 Response.ContentEncoding = System.Text.Encoding.Unicode
        Response.ContentType = "application/vnd.ms-excel"

        '  Response.AddHeader("content-disposition", "attachment;filename=""C:\EchoBACs\RejectedBACSBACs\rejectedBacs" & NewDate & ".xls")

        '  Response.TransmitFile("C:\rejectedBacs" & NewDate & ".xls")
        Response.Charset = ""
        Me.EnableViewState = False
        Dim oStringWriter As New System.IO.StringWriter
        Dim oHtmlTextWriter As New System.Web.UI.HtmlTextWriter(oStringWriter)
        GridView4.HeaderRow.Style.Add("background-color", "#FFFFFF")

        GridView4.RenderControl(oHtmlTextWriter)
        Dim helpme As String = oStringWriter.ToString()
      '  Response.Write(oStringWriter.ToString())

        ' HttpContext.Current.Response.End()
        File.WriteAllText("C:\EchoBACs\RejectedBACS\rejectedBacs" & NewDate & ".xls", helpme)

        oHtmlTextWriter.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T17:30:32.133

在这种情况下不要使用响应，这将询问另存为对话框。如果您想在没有任何提示的情况下将文件保存到磁盘，请执行以下操作。我用 C# 给你

```
System.Web.UI.WebControls.DataGrid grid = new System.Web.UI.WebControls.DataGrid();
grid.HeaderStyle.Font.Bold = true;
grid.DataSource = datatable;
grid.DataMember = datatable.TableName;
grid.DataBind();
 using(StreamWriter sw = new StreamWriter ("d:\\temp\test.xls"))
 {
     using (HtmlTextWriter hw = new HtmlTextWriter(sw))
     {
           grid.RenderControl(hw);
     }
} 
```

# visual-c++ - 语法错误：缺少 ';' 前 '）'

> ID：15199521
> 
> 赞同：-3
> 
> 时间：2013-03-04T10:34:13.807
> 
> 标签：visual-c++

我有一个嵌套循环并收到此错误，但据我所知，我不需要另一个';' 在这段代码中

```
 while ( inFile >> location >> elevation >> precipAmount )
{

    for (count, count <= 12, count ++) 
```

最后一个右括号后出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:35:27.670

您的`for`循环有语法错误，请注意分号而不是逗号：

```
for (count; count <= 12; count ++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:35:55.830

`for`循环用于`;`分隔部件。它应该是

```
for (count; count <= 12; count++) 
```

第一部分还用于在循环开始之前初始化任何内容。您应该设置`count`一个值或将其删除，因为它目前什么都不做

```
for (; count <= 12; count++)
// or
for (count = 0; count <= 12; count++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:35:33.943

尝试

```
for (count; count <= 12; count ++) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T10:35:59.777

写`for (count; count <= 12; count ++)`

# asp.net-mvc - 如何在 ASP.NET 中查看从哪个页面调用了方法？

> ID：15199525
> 
> 赞同：1
> 
> 时间：2013-03-04T10:34:36.860
> 
> 标签：asp.net-mvc

我有一个 ASP.NET MVC 项目，其中我在控制器上有一个方法，该方法从两个单独的页面调用，直到现在行为是相同的，但现在我需要它略有不同我只需要看看我是否' m 在页面 A 或页面 B 上，所以我知道会发生哪种行为。

是否有任何解决方案`ViewData`或`View`其他方法，我可以从哪个页面检查该方法被调用？

# iphone - 如何使用网页的 URL 获取 JSON 格式的 WebService 格式

> ID：15199527
> 
> 赞同：0
> 
> 时间：2013-03-04T10:34:46.880
> 
> 标签：iphone, objective-c, json, web-services

我**`have an URL of a login page it goes to the login screen in web.`**

现在我需要使用我拥有的 URL 获取网页的 JSON 格式。

然后我可以解析它并显示在表格中..

所以第一***`I need to get the JSON format of the web page using the URL I have.`***

***`How to create a webservice in json response for page`***

**我想获得正确格式/区分大小写的“用户名”键和“密码”键**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:45:46.897

为返回 JSON 响应的登录页面创建 Web 服务，然后使用 SBJSON 库解析该响应。在 NSDictionary 或 NSArray 中。并使用该数组来填充您的 TableView。

[此](http://dipinkrishna.com/blog/2012/03/iphoneios-programming-login-screen-post-data-url-parses-json-response/)链接包含所有数据，从创建用于登录的 Web 服务到解析 JSON，我在我的项目中使用过它，它真的很棒。

快乐编码。

# javascript - 使用 YUI3 确定单选按钮选择何时更改

> ID：15199529
> 
> 赞同：1
> 
> 时间：2013-03-04T10:34:47.327
> 
> 标签：javascript, html, dom-events, yui

我正在使用`YUI3`Internet Explorer 8 和 Firefox。我正在尝试确定单选按钮何时更改了选择。

我的 HTML：

```
<div id="test">
     <input name="test1" value="a" type="radio">
     <input name="test1" value="b" type="radio">
     <input name="test1" value="c" type="radio">
</div> 
```

我的 JavaScript：

```
YUI().use('event', 'node', function (Y) {
     Y.one('input[name=test1]').on('change', function (e) {
          alert('changed');
     });
}); 
```

这不起作用，因为在单选按钮组中未选择页面加载任何内容。当我选择第一个项目时，没有任何反应，没有弹出警报。当我单击第二个按钮时，它会弹出。如何确定单选按钮选择何时更改？

另外我如何获得所选单选按钮的值，我认为有 IE 问题？这会爆炸：

```
var value = Y.one('input[name=test1]:checked').get('value');
alert(value); 
```

这什么也没带回来：

```
var value = Y.all('input[name=test1]:checked').get('value');
alert(value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:03:16.740

您可以使用事件委托来监听“点击”事件。如果您不知道什么是事件委托，请查看[这个简短的介绍](http://yuilibrary.com/yui/docs/event/delegation.html)。更改事件在旧浏览器中存在问题，因此请坚持点击事件。您需要做的就是获取父元素`Y.one`并设置委托侦听器：

```
YUI().use('node', function (Y) {
  Y.one('#test').delegate('click', function (e) {
    alert(e.target.get('value'));
  }, 'input[type=radio]');
}); 
```

# ghostscript - 合并 PDF 跳过损坏的 PDF

> ID：15199532
> 
> 赞同：1
> 
> 时间：2013-03-04T10:35:17.313
> 
> 标签：ghostscript, pdftk

目前我正在使用 Ghostscript 合并下载的 PDF 列表。问题是如果任何 1 个 pdf 文件损坏，它会停止合并其余 pdf 文件。

有没有我必须使用的命令才能跳过损坏的 pdf 并合并其他的？

我也用 pdftk 测试过，但面临同样的问题。

或者我可以使用其他任何基于命令行的 pdf 合并实用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:14:16.850

您可以尝试 MuPDF，也可以尝试使用 MUPDF 'clean' 来修复文件，然后再尝试合并它们。但是，如果 PDF 文件严重损坏，Ghostscript 甚至无法修复它，这也可能无法正常工作。

没有工具可以忽略严重损坏甚至无法修复的 PDF 文件。很难看出这在当前方案中如何工作，因为 Ghostscript 无论如何都不会“合并”文件，它会解释它们，从图形操作序列创建一个全新的 PDF 文件。当文件严重损坏以引发错误时，我们会中止，因为我们可能已经编写了文件的任何部分，如果我们试图忽略并继续，解释器和输出 PDF 文件将处于不确定状态。

# java - 以更好的方式更新 EAR 文件中的单个文件

> ID：15199535
> 
> 赞同：3
> 
> 时间：2013-03-04T10:35:19.230
> 
> 标签：java, jakarta-ee, web-applications, servlets

我有一个`EAR`具有以下结构的文件

**出现**

```
 - APP-INF
    - lib
      // libraries (.jar) here
  - META-INF
    - MANIFEST.MF
    - weblogic-application.xml
  - module1.war
  - moduleJar.jar
  - module1.war
  - customlib.jar 
```

在 下`Module1.war`，我已经更新了`Web.xml`，稍后我需要部署相同的文件，没有脚本和仅从命令提示符`Ear`中执行此操作的更好方法是什么。`ANT`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:53:15.280

通过使用[7zip](http://www.7-zip.org/download.html)软件无需解压，我们可以编辑`war,ear and jar`.

右键单击`.ear->.7zip->select 'open archive'`

在选择的那一侧`'module1.war'->open`

像这样你可以到达 web.xml 那里选择在 web.xml 上编辑添加或删除你的行。

# ios - 如何在 iOS 中跟踪崩溃的确切问题

> ID：15199536
> 
> 赞同：5
> 
> 时间：2013-03-04T10:35:20.197
> 
> 标签：ios, xcode, debugging, crash, sigabrt

当我调试我的 iPhone 应用程序时，我遇到了一个错误并且应用程序崩溃了。我添加了一个异常断点，但它没有指向代码中的任何位置并在`main.m`.

在这里，我添加了应用程序崩溃时 XCode 窗口的屏幕截图。

![在此处输入图像描述](../Images/25251efb0be863f403dedb4b5920d519.png) 如何从中找到崩溃的确切问题？

是否可以？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T10:42:24.577

启用 Zoombie，以便您在日志中获得错误描述。

如果您编辑要为其打开僵尸的方案（在“产品”菜单中，选择“编辑方案”），转到左侧面板中的“运行 Foo.app”阶段，然后在“参数”选项卡上对。然后，您可以将 NSZombieEnabled 添加到“环境变量”部分并将值设置为 YES，就像在 Xcode 3 中一样。

在 Xcode 4.1 及更高版本中，“运行”阶段的“诊断”选项卡上还有用于“启用僵尸对象”的复选框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T10:44:04.033

在 XCode 中单击 EditScheme。然后屏幕将如下所示。单击启用僵尸对象。它将在您的日志中显示错误。

![在此处输入图像描述](../Images/16fadfc077b8a51f68ab5abf4dc2cf43.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T10:37:54.740

添加一个[异常断点](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)，调试器将在崩溃的行停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-08T12:11:44.833

不确定，但阅读寄存器可能会有所帮助。

首先使用左下角的 + 转到异常选项卡并“添加异常断点”。 ![在此处输入图像描述](../Images/35d59d2b8deac1c46fc8a63667f587cc.png)

然后当应用程序崩溃时，点击线程 1 下的“0 objc_exception_throw” ![在此处输入图像描述](../Images/3c515f7854106f41b7c074f799acb744.png)

最后在控制台输入：

*   寄存器读取（你应该得到一个寄存器列表）

*   po $rax （通常例外在 'rax' 中）

    （您应该在控制台上看到异常输出）

希望这可以帮助。

# sonarqube - 声纳违反 Pmd

> ID：15199538
> 
> 赞同：0
> 
> 时间：2013-03-04T10:35:23.643
> 
> 标签：sonarqube, pmd

我只需要对 Sonar 的 PMD 进行澄清。我们可以重用 ant 已经生成的 Pmd 报告吗？否则声纳将使用 PMD 动态产生自己的违规行为。请帮帮我......在过去的两天里，我一直坚持这一点。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:45:46.987

不，不能导入 PMD 或 Checkstyle 报告。这不是 Sonar 的理念。

无法保证 PMD 已使用声纳中声明的配置（质量配置文件）执行。这将导致不一致的结果。此外，为什么声纳为您执行 PMD 时自己执行？

# javascript - R2D3 的 QUnit 测试开箱即用失败 - 我做错了什么？

> ID：15199544
> 
> 赞同：0
> 
> 时间：2013-03-04T10:35:39.200
> 
> 标签：javascript, d3.js, raphael, qunit

我刚刚从 github 签出了[R2D3](https://github.com/mhemesath/r2d3/)，现在我想运行测试。我是这个 repo 的新手，不是 JS 测试方面的专家，但*我认为*正确的方法是在 Web 浏览器中查看[tests/index.html](https://github.com/mhemesath/r2d3/blob/master/tests/index.html)，并查看 QUnit 测试是否通过。

但是，当我尝试这样做时，52 个测试中有 41 个直接失败（在 OSX 上的 Chrome、Firefox 和 Safari 中）：

![在此处输入图像描述](../Images/7839c097957a659a1c8f6762a7933e5a.png)

我可以从开发人员工具中看到所有文件都正确加载，因此不仅仅是路径错误。查看代码表明这`.append()`是失败的。前两个错误位于[第 16](https://github.com/mhemesath/r2d3/blob/master/tests/core/append-tests.js#L16)行`tests/core/append-tests.js`：`var el = svg.append('image')`和[第 20 行](https://github.com/mhemesath/r2d3/blob/master/tests/core/append-tests.js#L20)：`var el = svg.append('line')`。

追根溯源，问题[出在`r2d3.v2.js`](https://github.com/mhemesath/r2d3/blob/master/r2d3.v2.js#L12946)这两个函数上：

```
Raphael.fn.appendChild = function(childNode) {
  var node = this.buildElement(childNode);
  if (node) {
    this.shadowDom.appendChild(childNode);
    node.updateStyle(); //  Apply CSS styles
  }
  return node;
};
Raphael.fn.buildElement = function(childNode) {
  var type = childNode && childNode.nodeName,
      node =  type ? this[type.toLowerCase()]() : null;

  if (node) {
    // Ensure Paper can be referenced from sets
    node.shadowDom = childNode
    node.parentNode = this;
    // Link the shadowDOM node by the Raphael id.
    node.shadowDom.r2d3 = true;
    node.shadowDom.r2d3id = r2d3UID();
    node.paper = this;
    node.tagName = type.toLowerCase();
        node.style = new ElementStyle(node);

    r2d3Elements[node.shadowDom.r2d3id] = node;
  }
  return node;
} 
```

但是，我的调试能力没有进一步。谁能建议可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:32:40.610

看起来您正在使用 Chrome 运行 qunit 测试。R2D3 仅适用于 IE。

# c# - 远程 Webdriver Chrome 抛出“驱动程序可执行文件的路径”错误

> ID：15199545
> 
> 赞同：4
> 
> 时间：2013-03-04T10:35:44.177
> 
> 标签：c#, webdriver, remotewebdriver

嗨，当我使用以下代码时

```
IWebDriver _webDriver = new RemoteWebDriver(new Uri("http://127.0.0.1:4444/wd/hub"),
                DesiredCapabilities.Chrome()); 
```

我收到以下错误

> System.InvalidOperationException ：驱动程序可执行文件的路径必须由 webdriver.chrome.driver 系统属性设置；有关详细信息，请参阅[http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)。最新版本可以从[http://code.google.com/p/chromedriver/downloads/list下载](http://code.google.com/p/chromedriver/downloads/list) TearDown : System.NullReferenceException : 对象引用未设置为对象的实例。在 OpenQA.Selenium.Remote.RemoteWebDriver.UnpackAndThrowOnError(Response errorResponse) 在 OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 参数) 在 OpenQA.Selenium.Remote.RemoteWebDriver..ctor(ICommandExecutor commandExecutor, ICapabilities desiredCapabilities ) 在 Browser.cs 中的 Testframework.Browser.RemoteGoto(String browser, String url) 处：CommonAction.cs 中 Testframework.CommonAction.RemoteBrowser(String browser) 处的第 86 行：Test.RegistrationTest.InvalidRegistrationTest(String browser, String username 处的第 70 行, 字符串密码, 字符串confirmPassword, 字符串securityQuestion, 字符串securityAnswer, 字符串errorMessageText, 字符串firstname,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:08:26.690

除了更改代码，您还可以采用其他方式。
下载 chrome 驱动程序并将**`PATH`**环境变量设置为指向 chromedriver.exe 所在的目录。

重新启动 IDE / 命令控制台并运行测试。有用！！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T10:39:23.857

线索确实在错误中。

Chrome 应该安装在运行测试或被指向的系统上。

退一步，看看文档：

[https://code.google.com/p/selenium/wiki/ChromeDriver](https://code.google.com/p/selenium/wiki/ChromeDriver)

此外，如果 Chrome 安装在一个特殊的位置，您需要将 Selenium 指向它的位置。同样，这在文档中进行了解释。

在 C# 中：

```
DesiredCapabilities capabilities = DesiredCapabilities.Chrome();
capabilities.SetCapability("chrome.binary", this.binaryLocation); 
```

或者：

```
ChromeOptions options = new ChromeOptions();
options.BinaryLocation = "pathtogooglechrome";
capabilities.SetCapability(ChromeOptions.Capability, options); 
```

# razor - 使用 NancyFX 的 Razor 编译错误

> ID：15199555
> 
> 赞同：5
> 
> 时间：2013-03-04T10:35:58.403
> 
> 标签：razor, namespaces, nancy

我正在使用 Nancyfx 和 Visual Studio 2012 中的 Razor 视图引擎在 C# 中创建一个黑杰克程序。Visual Studios Intelisense 工作，但我得到这些 Razor 编译错误。我尝试在 app/web.config 中指定名称空间，但没有结果。

```
Error Details
Error compiling template: Views/Game.cshtml

Errors:
[CS0246] Line: 1 Column: 11 - The type or namespace name 'Black_Jack' could not be found (are you missing a using directive or an assembly reference?) 

[CS0246] Line: 24 Column: 73 - The type or namespace name 'Black_Jack' could not be found (are you missing a using directive or an assembly reference?) 

Details:
@using Black_Jack.Models
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<Game>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    @{

        foreach(var player in @Model.Players.players)
        {
            foreach(var card in player.Hand.Cards)
            {
                <p>@card.Name</p>   
            }
        }

    }
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T11:00:30.890

请再次查看您的 web.config 并确保您已定义剃刀设置。

您将需要以下内容：

```
<configSections>
    <section name="razor" type="Nancy.ViewEngines.Razor.RazorConfigurationSection, Nancy.ViewEngines.Razor" />
</configSections>

<razor disableAutoIncludeModelNamespace="false">
    <assemblies>
        <add assembly="MyAssemblyName" />
    </assemblies>
    <namespaces>
        <add namespace="Black_Jack.Models" />
    </namespaces>
</razor> 
```

此处进一步解释 - [https://github.com/NancyFx/Nancy/wiki/Razor-View-Engine](https://github.com/NancyFx/Nancy/wiki/Razor-View-Engine)

# hibernate - Embeddable 类的休眠约束

> ID：15199558
> 
> 赞同：1
> 
> 时间：2013-03-04T10:36:03.367
> 
> 标签：hibernate, hibernate-validator

我有以下实体

```
@Entity
@Table(name = "item")
public class Item implements Serializable {

    @Embeddable
    public static class ItemPK implements Serializable {
        private static final long serialVersionUID = 3795221679277433625L;

        @ManyToOne
        @JoinColumn(name = "country_id")
        private Country country;

        @NotEmpty
        @Length(min = 3)
        private String name;
...
...
} 
```

我注意到 @NotEmpty 约束在验证期间从未被测试过。如何强制对该字段进行验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:02:25.060

您是否在*Item*的*ItemPK*字段上使用*@Valid*？如果您更新示例代码会有所帮助。

# c# - 动态选项卡：使用数据集添加它们并检查它们是否存在

> ID：15199559
> 
> 赞同：1
> 
> 时间：2013-03-04T10:36:04.873
> 
> 标签：c#, android, android-tabs, xamarin.android

我想动态创建一个选项卡，该选项卡稍后会填充数据集中的数据。在我的数据集中，我有一个名为 TabId 的字段。它用作标题和 ID，稍后（在选项卡视图上）用于迭代它获取的数据集。由于将来可能会有更多选项卡，并且客户想要一个需要尽可能少的更新的解决方案，因此我需要动态创建它们。但问题是包含我的选项卡数据的数据集包含在您遍历表时重复多次的 tabId。

例子：

```
Rec 1 TabId = first
Rec 2 TabId = first
Rec 3 TabId = first
Rec 4 TabId = first
Rec 5 TabId = first
Rec 6 TabId = first
Rec 7 TabId = first
Rec 8 TabId = Second
Rec 9 TabId = Second
Rec 10 TabId = Second
Rec 11 TabId = Third
Rec 12 TabId = Third
Rec 13 TabId = Third 
```

等等...

所以基本上我知道我需要使用 TabId 进行 foreach 循环，但每个不同\唯一的 id 只需要一个选项卡。我将如何遍历我的数据集并处理我的 TabId 的额外重复项，以便我以后可以使用它来动态创建我的选项卡。

我当前的（静态）代码：

```
intent = new Intent(this, typeof(Tab1));
intent.PutExtra("FormId", FormId);
intent.PutExtra("TabNum", TabId);
intent.PutExtra("EventNo", EventNo);
intent.PutExtra("Ticket", Ticket);
intent.PutExtra("DataSet", xml);
intent.AddFlags(ActivityFlags.NewTask);

// Initialize a TabSpec for each tab and add it to the TabHost  
spec = TabHost.NewTabSpec(TabId); // unique per tab
spec.SetIndicator(TabId); // unique per tab
spec.SetContent(intent);
TabHost.AddTab(spec); 
```

我希望我说得够清楚。如果出现任何问题，请不要犹豫。我会提供尽可能多的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:18:40.320

使用 Linq 获取不同的 List 并查询原始数据源

```
var tabIDs = (from DataRow dr in dataTable.Rows
         select (Int32)dr["TabID"]).Distinct(); 
```

从数据集：

```
var tabIDs = (from DataRow dr in dataSet.Tables["tableName"].Rows
         select (Int32)dr["TabID"]).Distinct(); 
```

然后遍历您的 TabID

```
foreach(Int32 tabID in tabIDs){

    spec = TabHost.NewTabSpec(tabID ); // unique per tab
    spec.SetIndicator(tabID ); // unique per tab
    spec.SetContent(intent);
    TabHost.AddTab(spec);

} 
```

# android - Android AnimationDrawable

> ID：15199560
> 
> 赞同：1
> 
> 时间：2013-03-04T10:36:09.907
> 
> 标签：android, android-animation

如何从代码而不是 xml 将图像加载到动画，我有这个例子：

```
<!-- Animation frames are wheel0.png -- wheel5.png files inside the
res/drawable/ folder -->
<animation-list android:id="@+id/selected" android:oneshot="false">
<item android:drawable="@drawable/wheel0" android:duration="50" />
<item android:drawable="@drawable/wheel1" android:duration="50" />
<item android:drawable="@drawable/wheel2" android:duration="50" />
<item android:drawable="@drawable/wheel3" android:duration="50" />
<item android:drawable="@drawable/wheel4" android:duration="50" />
<item android:drawable="@drawable/wheel5" android:duration="50" />
</animation-list> 
```

.java文件：

```
 ImageView img = (ImageView)findViewById(R.id.spinning_wheel_image);
 img.setBackgroundResource(R.drawable.spin_animation);
 AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();
 frameAnimation.start(); 
```

我需要加载这样的图像：

```
for (int j = 0; j < 5; j++) 
     animation.addFrame(getResources().getDrawable(getResources().getIdentifier("wheel" + j,"drawable", getPackageName())), i); 
```

我怎样才能结合这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:29:27.760

```
int []imageArray={R.drawable.img1,R.drawable.img2,R.drawable.img3};

final Handler handler = new Handler();
         Runnable runnable = new Runnable() {
            int i=0;
            public void run() {
                imageView.setImageResource(imageArray[i]);
                i++;
                if(i>imageArray.length-1)
                {
                i=0;    
                }
                handler.postDelayed(this, 50);  //for interval...
            }
        };
        handler.postDelayed(runnable, 2000); //for initial delay..
    } 
```

# python - django celery - 多处理

> ID：15199563
> 
> 赞同：0
> 
> 时间：2013-03-04T10:36:13.180
> 
> 标签：python, django, celery

我正在使用 Django celery 来满足我的项目需求。如何对使用单个工作人员的两个队列进行多处理？我不希望一个队列等待另一个队列中的任务完成。

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T05:44:10.540

为什么不直接使用[concurrenc](http://celery.readthedocs.org/en/latest/userguide/workers.html#concurrency) y of `>1`？像这样：

`celeryd -c 5`

这应该启动一个有 5 个进程的工作人员，这些进程可以并行处理事情。

# wpf - WPF 验证错误

> ID：15199567
> 
> 赞同：4
> 
> 时间：2013-03-04T10:36:23.453
> 
> 标签：wpf, validation, data-binding, validationrule

在我目前的项目中，我必须处理 WPF 表单中的数据验证。我的表单位于 ResourceDictionnary 的 DataTemplate 中。我可以通过两个按钮来保存和加载表单中的数据，这两个按钮可以序列化和反序列化数据（通过两个[DelegateCommand](http://msdn.microsoft.com/en-us/library/gg431410%28v=pandp.40%29.aspx)）。

如果我的表单的一个字段为空或无效，则保存按钮将被禁用。由于 UpdateSourceTrigger 属性，每次更改时都会检查一个字段。这就是为什么我需要在我的 C# 代码中知道某个字段是否无效以更新我的保存命令。

目前，我在我的 XAML 绑定中使用了 ExceptionValidationRule，我想知道这是否是一个好习惯。我无法实现 ValidationRule，因为我需要在我的 C# 代码中知道字段是否无效，以更新保存命令（启用或禁用保存按钮）。

```
<TextBox>
    <Binding Path="Contact.FirstName" UpdateSourceTrigger="PropertyChanged">
        <Binding.ValidationRules>
            <ExceptionValidationRule/>
        </Binding.ValidationRules>
    </Binding>
</TextBox> 
```

在此[博客](http://www.progware.org/Blog/post/Data-Validation-in-WPF.aspx)中，我们可以阅读：

> 在 Setter 中引发异常并不是一个很好的方法，因为这些属性也是由代码设置的，有时可以暂时将它们保留为错误值。

我已经阅读了这篇[文章](https://stackoverflow.com/questions/127477/detecting-wpf-validation-errors)，但我不能使用它，我的 TextBox 在 DataTemplate 中，我不能在我的 C# 代码中使用它们。

所以，我想知道我是否应该更改我的数据验证并且不要使用 ExceptionValidationRule。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:01:57.987

谢谢[blindmeis](https://stackoverflow.com/users/355239/blindmeis)，你的想法很好。IDataErrorInfo 似乎比 ExceptionValidationException 更好，并且可以正常工作。

这是一个与我的项目匹配的示例： [IDataErrorInfo 示例](http://www.codearsenal.net/2012/06/wpf-textbox-validation-idataerrorinfo.html#.UTSeqFevwZ0)

它不使用 DelegateCommand，但很简单，可以修改。您的模型必须实现 IDataErrorInfo ：

```
public class Contact : IDataErrorInfo
{

    public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string Name { get; set; }

    public string this[string property]
    {
        get 
        {
            string result = null;
            if (property== "Name")
            {
                if (string.IsNullOrEmpty(Name) || Name.Length < 3)
                    result = "Please enter a Name";
            }
            return result;
        }
    }

} 
```

在 XAML 代码中，不要忘记更改 Binding ：

```
<TextBox>
    <Binding Path="Contact.Name" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True" NotifyOnValidationError="True"/>
</TextBox> 
```

# sharepoint-2010 - 在远程门户中显示 Sharepoint 2010 Webpart

> ID：15199568
> 
> 赞同：2
> 
> 时间：2013-03-04T10:36:24.087
> 
> 标签：sharepoint-2010, liferay, web-parts

我们目前需要在另一个门户（Liferay）中显示 Sharepoint 2007 实例的 Webpart。我不熟悉Sharepoint。经过一番搜索，我无法找到令人满意的答案。Sharepoint 2007 发布了 WSRP 工具包（Webservices For Remote Portlets）。[http://archive.msdn.microsoft.com/WSRPToolkit](http://archive.msdn.microsoft.com/WSRPToolkit)

*   有谁知道工具包是否仍然以某种方式在 2010 版的 Sharepoint 中工作（我尝试时失败了）

*   有没有办法通过 URL (-parameters) 访问单个 Webpart

*   有谁知道另一种方法来解决在其他门户中显示 web 部件的问题？

谢谢你的关注，安德烈亚斯

# sql - RAILS 中的 POSTGIS 查询优化

> ID：15199574
> 
> 赞同：1
> 
> 时间：2013-03-04T10:36:58.400
> 
> 标签：sql, ruby-on-rails, postgis, postgresql-9.1

我正在使用带有 postgres 9.1 db 的 postgis2.0。我的目标是编写尽可能接近优化查询的内容，以获取特定半径内的附近位置，并按照距离顺序输出它们。Location 模型具有`latlong`空间类型 postgis 扩展的属性和`distance_from`计算与给定 POINT(long lat) 的距离的方法。我在rails代码中编写了如下查询：

```
def self.nearby(lat, long, radius)
    nearby = Location.where("ST_DWithin(ST_GeomFromEWKB(latlong), ST_GeomFromText('POINT(#{long} #{lat})', 4326),?, false )", radius)
    .order("ST_Distance_Sphere(ST_GeomFromEWKB(latlong) , ST_GeomFromText('POINT(#{long} #{lat})', 4326) ) ")
    .map{|ar| 
      { "id" => ar.id,
        "distance" => ar.distance_from(lat, long)
      } 
    }
end 
```

我可以看到我`distance`用 order 子句和 map 子句双重计算了两次，但想不出我应该如何存储距离 sql​​ 查询的即时值。所以在`map{}`我重新计算它。

```
 `.order("ST_Distance_Sphere(ST_GeomFromEWKB(latlong) , ST_GeomFromText('POINT(#{long} #{lat})', 4326) ) ")` 
```

`"distance" => ar.distance_from(lat, long)`

如果我没记错的话，在我的情况下使用 ST_DWithin 可以帮助我快速获得位置是否在其中而不是先计算距离的答案。因此，如果说一个查询将仅返回 10-100 个位置，则 ST_DWithin 将有助于加快查询速度，而不是纯粹使用 STDistance。

我还能提高多少？我的位置数据库大小约为 10000 条记录。感谢您的时间，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:03:02.243

目前，我还在使用 Rails 和 PostGIS 的应用程序中工作。:-)

对于复杂的查询，我选择了编写普通 SQL 的方式而不是使用 ActiveRecords 方法，这使得事情更容易维护。

你的是：

```
SELECT
  *
FROM location
WHERE
  ST_DWithin(ST_GeomFromEWKB(latlong),
    ST_GeomFromText('POINT(#{long} #{lat})', 4326), ?, false)
ORDER BY
  ST_Distance_Sphere(ST_GeomFromEWKB(latlong),
    ST_GeomFromText('POINT(#{long} #{lat})', 4326)) 
```

顺便说一句，这些坐标在`latlon`没有`g`;-)的情况下被调用

给我几分钟，我会试着弄清楚 Postgres 将如何优化您的查询，以及是否需要手动优化它。

* * *

此查询**可以**更快（如果有很多匹配项），但也可以更慢，因为它比or`ST_DWithin`快得多。所以请用大量数据进行测试：`ST_Distance``ST_Distance_Sphere`

```
SELECT
  *
FROM ( 
  SELECT
    l.*,
    (
      ST_DISTANCE_SPHERE(ST_GeomFromEWKB(latlong),
        ST_GeomFromText('POINT(#{long} #{lat})', 4326))
    ) AS d
  FROM location l
) x
WHERE d < ?
ORDER BY d 
```

* * *

**解释：**

**您的原始查询**将首先使用快速过滤结果`ST_DWithin`，然后`ST_Distance_Sphere`对所有找到的对象进行调用。

**我的查询**将计算`ST_Distance_Sphere`数据库中的所有对象，然后使用整数比较过滤它们。

* * *

要在 Rails 中使用，您可以简单地调用`Location.find_by_sql(...)`

* * *

## 解释分析

（我的表被称为`measurement`，包含点的列被称为`groundtruth`）

您的查询：

```
Sort  (cost=341.05..341.06 rows=1 width=172) (actual time=3.676..3.731 rows=816 loops=1)
  Sort Key: (_st_distance(geography(groundtruth), '0101000020E6100000EE7C3F355EF24F4019390B7BDA011940'::geography, 0::double precision, false))
  Sort Method: quicksort  Memory: 139kB
  ->  Bitmap Heap Scan on measurement m  (cost=9.67..341.04 rows=1 width=172) (actual time=0.330..3.257 rows=816 loops=1)
        Recheck Cond: (groundtruth && '01030000000100000005000000EE7C3F355E724D4064E42CEC6907F43FEE7C3F355E724D408C9C853DED80264077BE9F1A2F3951408C9C853DED80264077BE9F1A2F39514064E42CEC6907F43FEE7C3F355E724D4064E42CEC6907F43F'::geometry)
        Filter: (('0101000000EE7C3F355EF24F4019390B7BDA011940'::geometry && st_expand(groundtruth, 5::double precision)) AND _st_dwithin(groundtruth, '0101000000EE7C3F355EF24F4019390B7BDA011940'::geometry, 5::double precision))
        ->  Bitmap Index Scan on groundtruth_idx  (cost=0.00..9.67 rows=189 width=0) (actual time=0.186..0.186 rows=855 loops=1)
              Index Cond: (groundtruth && '01030000000100000005000000EE7C3F355E724D4064E42CEC6907F43FEE7C3F355E724D408C9C853DED80264077BE9F1A2F3951408C9C853DED80264077BE9F1A2F39514064E42CEC6907F43FEE7C3F355E724D4064E42CEC6907F43F'::geometry)
Total runtime: 3.932 ms 
```

我的查询：

```
Sort  (cost=9372.84..9391.92 rows=7634 width=172) (actual time=19.256..19.312 rows=816 loops=1)
  Sort Key: (st_distance(m.groundtruth, '0101000000EE7C3F355EF24F4019390B7BDA011940'::geometry))
  Sort Method: quicksort  Memory: 139kB
  ->  Seq Scan on measurement m  (cost=0.00..8226.01 rows=7634 width=172) (actual time=0.040..18.863 rows=816 loops=1)
        Filter: (st_distance(groundtruth, '0101000000EE7C3F355EF24F4019390B7BDA011940'::geometry) < 5::double precision)
Total runtime: 19.396 ms 
```

如您所见：从 22901 中只有 816 行匹配。而且我的查询花费了更长的时间。

如果我使距离变大，两个查询就会变得更快。

如果所有行（= 22901 行）都在搜索半径内，我的查询会快一点：180 对 210 毫秒。

所以你可能会坚持你的解决方案；）

* * *

另一个可能获得 1-2% 性能的建议：不要使用 GeomFromText，您可以直接使用`rgeo`给您的数据库一个 Point 对象作为参数，而不是 2 个坐标。

# database - 不同的用户角色，每个都在一个表中

> ID：15199575
> 
> 赞同：1
> 
> 时间：2013-03-04T10:36:58.677
> 
> 标签：database, database-design, entity-relationship, erd

在我的数据库中，我有管理员、商家和司机。它们都共享许多属性，例如名称/电子邮件/电话/凭据..等等，所以，我设计数据库的方式是一个名为“用户”的表和每个角色 [管理员、商家、司机] 的表，其中共享属性存储在用户表。我的问题是我是否必须为每个角色维护一个 ID，例如 [driver_id，merchant_id] 并将其链接到 user_id 或仅取决于 user_id 并将用户类型存储在 users 表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:40:00.973

根据您将在数据库上运行的查询类型，您可以有几个不同的选项。如果您要查询用户表而不需要来自角色特定表的信息，那么只需将用户类型（即**角色**）存储在`users`表中。

但是，如果您要在 admin、merchant 或 driver 表中包含特定于角色的信息，那么在 user 表中包含一个 unique或用于指定角色并同时充当 ID可能是有益的`merchant_id`。适当关联的表。`admin_id``driver_id`

在数据库建模软件中绘制图表有助于识别应用程序中不同数据片段之间的关系，从而更好地设计表和属性。

# asp.net-mvc-4 - jquery 2.0 捆绑缩小条件注释

> ID：15199579
> 
> 赞同：4
> 
> 时间：2013-03-04T10:37:13.207
> 
> 标签：asp.net-mvc-4, bundling-and-minification

随着 jQuery 2.0 Beta 2 的发布意味着对 IE > 9 和其他浏览器的支持，人们如何处理各种 jquery 版本的捆绑和缩小。jQuery 1.9 = IE6-8 jQuery 2.0 = IE9 和其他浏览器

jQuery 建议使用这个：

```
<!--[if lt IE 9]>
    <script src="jquery-1.9.1.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script src="jquery-2.0.0b2.js"></script>
<!--<![endif]--> 
```

但是，如果您想捆绑 jQuery，您是否必须创建 2 个捆绑包，其中一个包含一个版本的 jquery，比如 v1.9，另一个包含 2.0 和 Use Rquest.BRowser？

点网阴影

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:19:52.437

为什么要为不同的浏览器使用不同的 jQuery 版本？

为什么不对所有浏览器使用 1.9？

除非您有非常严格的理由使用两个不同的版本，否则最好只使用对新旧浏览器都有效的 1.9.x。

如果您仍想同时使用这两个版本，是的，您必须使用两个不同的捆绑包，并根据请求浏览器决定渲染哪一个。

但是我仍然认为使用适用于所有版本的浏览器的版本更安全，即使该库“不那么聪明”。

可能支持使用 2.x 的唯一原因是 1.9.x 将来不支持，[但事实并非如此](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)。

# mobiscroll - jquery 的 mobiscroll：如何使用语言模块

> ID：15199580
> 
> 赞同：0
> 
> 时间：2013-03-04T10:37:13.693
> 
> 标签：mobiscroll

如何使用 mobiscroll 的语言模块？我缺少初始化和扩展语言功能之间的一些“链接”。

```
 (function ($) {
    $.mobiscroll.i18n.de = $.extend($.mobiscroll.i18n.de, {
        setText: 'OK',
        cancelText: 'Abbrechen'
    });
})(jQuery);

(function ($) {
    $.mobiscroll.i18n.de = $.extend($.mobiscroll.i18n.de, {
        dateFormat: 'dd.mm.yy',
        ...
        yearText: 'Jahr'
    });
})(jQuery);

$(function(){
    $("#scroller").mobiscroll().date();
}); 
```

（而且，我愿意为移动设备提供其他好的弹出式日历的建议。jquery datepicker 太慢了，而 mobiscroll 的普通日历要花钱）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:45:21.260

If you're looking for a German Language pack, it can be selected from the download package builder. No need for a custom one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:37:23.117

我最终这样做了：

```
mob_dict = {dateFormat: 'dd.mm.yy', ...}

$(function(){
    $("#scroller").mobiscroll().date(mobi_dict);
}); 
```

# iphone - 如何在iOS中实现c++ setRGB

> ID：15199583
> 
> 赞同：0
> 
> 时间：2013-03-04T10:37:47.437
> 
> 标签：iphone, ios, objective-c, colors

我有很大的 int 值`RGB = 4294967295;` 如何从这个值设置颜色？在 c++ 中，我可以使用`setRGB()`方法。我怎样才能在iOS中制作它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:44:11.053

您可以像这样使用按位运算符：

```
float alpha = (intARGB >> 24) % 256;
float red = (intARGB >> 16) % 256;
float green = (intARGB >> 8) % 256;
float blue = intARGB % 256;
UIColor *theColor = [UIColor colorWithRed:red/255\. green:green/255\. blue:blue/255\. alpha:alpha/255.]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:23:48.693

但更好用

```
unsigned char alpha = (color >> 24) & 0xff;
unsigned char red = (color >> 16) & 0xff;
unsigned char green = (color  >> 8) &0xff;
unsigned char blue = color &0xff;
UIColor *theColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha]; 
```

# multithreading - Delphi2006 - 是否有带有 TMultiReadExclusiveWriteSynchronizer 的 TList？

> ID：15199584
> 
> 赞同：2
> 
> 时间：2013-03-04T10:37:49.503
> 
> 标签：multithreading, delphi, delphi-2006, synchronisation, tlist

我有一个多线程的外部应用程序，这个应用程序正在使用我的自定义 dll 从那个线程做一些事情。
在这个 dll 中，我有 2 个函数可以读取和写入一些数据到`TList`.
我需要这些线程可以自由读取该列表，但一次只能写入一个，其余的必须等待他们的时间写入。

我的问题：
- BDS 2006 中是否有一个`TList`具有 TMREWSync 功能的组件，或者
- 也许您知道我可以在我的应用程序中使用的任何免费的第三方组件，或者
- 也许您有一些`TList`可以执行上述操作的自定义代码。

**编辑**：我需要类似`TThreadList.LockList`但仅用于写入该列表的东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:25:21.560

`TMultiReadExclusiveWriteSynchronizer`将 a和`TList`以与 相同的方式放在一起很简单`TThreadList`。如果您已经知道这些类是如何工作的，那么您将能够按照下面的代码进行操作。

```
type
  TReadOnlyList = class
  private
    FList: TList;
    function GetCount: Integer;
    function GetItem(Index: Integer): Pointer;
  public
    constructor Create(List: TList);
    property Count: Integer read GetCount;
    property Items[Index: Integer]: Pointer read GetItem;
  end;

  TMREWList = class
  private
    FList: TList;
    FReadOnlyList: TReadOnlyList;
    FLock: TMultiReadExclusiveWriteSynchronizer;
  public
    constructor Create;
    destructor Destroy; override;
    function LockListWrite: TList;
    procedure UnlockListWrite;
    function LockListRead: TReadOnlyList;
    procedure UnlockListRead;
  end;

{ TReadOnlyList }

constructor TReadOnlyList.Create(List: TList);
begin
  inherited Create;
  FList := List;
end;

function TReadOnlyList.GetCount: Integer;
begin
  Result := FList.Count;
end;

function TReadOnlyList.GetItem(Index: Integer): Pointer;
begin
  Result := FList[Index];
end;

{ TMREWList }

constructor TMREWList.Create;
begin
  inherited;
  FList := TList.Create;
  FReadOnlyList := TReadOnlyList.Create(FList);
  FLock := TMultiReadExclusiveWriteSynchronizer.Create;
end;

destructor TMREWList.Destroy;
begin
  FLock.Free;
  FReadOnlyList.Free;
  FList.Free;
  inherited;
end;

function TMREWList.LockListWrite: TList;
begin
  FLock.BeginWrite;
  Result := FList;
end;

procedure TMREWList.UnlockListWrite;
begin
  FLock.EndWrite;
end;

function TMREWList.LockListRead: TReadOnlyList;
begin
  FLock.BeginRead;
  Result := FReadOnlyList;
end;

procedure TMREWList.UnlockListRead;
begin
  FLock.EndRead;
end; 
```

这是可能的最基本的实现。如果你希望你可以添加更多的花里胡哨的方式`TThreadList`。

# ios - 为什么除了 _view 之外都设置了 IBOutlets？

> ID：15199587
> 
> 赞同：0
> 
> 时间：2013-03-04T10:37:58.737
> 
> 标签：ios, automatic-ref-counting, nib, iboutlet

我得到了著名的*加载“MyController”笔尖，但视图出口未设置*错误。但是我确定 IBOutlet`view`已设置。

一旦抛出异常，我就会遇到断点。下面你可以看到

*   所有 IBOutlets 都已连接
*   所有 IBOutlets 均已设置

当展开 UIViewController 超类时，我可以看到它`_view`是 0x00000000 并且显然会导致这个异常。

![状态](../Images/0062c2e4796665db915a354649288552.png)

### 代码（标题）

```
@interface InfoDialogViewController : UIViewController

@property (strong, nonatomic) id episode;
@property (strong, nonatomic) NSString *identifier;

@property (strong) IBOutlet UIView *regularSide;
@property (strong) IBOutlet UIView *flippedSide;

@property (weak) IBOutlet UIImageView *episodeCover;
@property (weak) IBOutlet UITextView *episodeTitle;
@property (weak) IBOutlet UITextView *episodeSummary;

- (IBAction)flip:(id)sender;

@end 
```

### 一些笔记

*   xib 文件在其根级别包含三个 UIView（Flipped、Regular、View）
*   `InfoDialogViewController.m`文件不包含任何方法（我不会通过覆盖做任何时髦的事情）
*   我将此控制器与`addChildViewController`.

任何人都知道这里发生了什么以及我该如何解决？ARC对我耍花招吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:22:11.903

请检查： 1.您的视图控制器的视图的类应该是 UIView 2.文件所有者应该是您的视图控制器 3.右键单击文件所有者，应该设置您的视图出口。

如果已经解决了，你能说说是什么解决了你的问题吗？

# css - 提供非 .css 样式表扩展有任何问题吗？

> ID：15199588
> 
> 赞同：0
> 
> 时间：2013-03-04T10:37:58.980
> 
> 标签：css

人们可以想到使用非标准样式表文件扩展名的任何问题吗？即使用`.php`或`.less`而不是`.css`？

我想知道旧浏览器或移动浏览器是否有任何问题，以及它是否会影响文件的缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:32:57.553

您要么使用 php 发送标头， `header('Content-Type: text/css');` 要么配置您的服务器以提供您选择的任何结尾作为 mime/type css。

无论哪种方式，任何浏览器都不应该关心实际的文件扩展名是什么，只要 mime 类型正确，并指定您的文件是 css。

对于更少的文件和 nginx - 这是一个教程，用于动态解析 [解析更少的文件](http://www.jisaacks.com/parse-less-files-on-the-fly-and-serve-them-as-css)

对于 php 和更少 -[这里](http://blog.lavoie.sl/2012/11/automatic-less-compilation-with-lessphp.html)

# php - 回显标签并通过电子邮件+ php 发送代码

> ID：15199589
> 
> 赞同：-3
> 
> 时间：2013-03-04T10:38:09.920
> 
> 标签：php, mysql

我有一个 php 变量，其中包含图像的整个源代码。我想要的是用它的属性 src、height 和 width 来回显标签，并通过邮件（即）发送图像的源代码。

```
$imagename = abc.jpg;
$concatpath = SITE_URL."/uploads/affiliatesAdv/".$imagename;
$imagesrc = '<a href="'.SITE_URL.'"><img src="'.$concatpath.'" height="200px" width="200px"></a>'; 
```

现在，当我回显 $imagesrc 时，它会显示图像。我怎样才能显示源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:40:52.850

尝试这个，

```
echo "<pre>";
echo $imagesrc;
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:44:22.270

您需要使用 html 编码。

像这样的东西

```
<img src="abc.jpg"/> 
```

至

> `&lt;img src=&quot;abc.jpg&quot;/&gt;`

请参阅[参考资料](http://www.w3.org/TR/html4/sgml/entities.html)。

你可以试试这个[网站](http://www.opinionatedgeek.com/DotNet/Tools/HTMLEncode/encode.aspx)在网上做..

# wso2 - WSO2 ESB Javascript 用正则表达式替换

> ID：15199592
> 
> 赞同：0
> 
> 时间：2013-03-04T10:38:14.917
> 
> 标签：wso2, wso2esb

我正在尝试使用带有正则表达式的 javascript 字符串的替换函数作为第一个参数。它会导致错误，因为该参数未修复替换参数（char，char）。句子是：

```
prop = prop.replace(/'/g,""); 
```

我在 chrome javascript 控制台中测试了该指令，它按预期工作。问题似乎是 wso2 使用的 javascript 版本没有实现这个功能。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-04T07:07:28.573

为了使用 javascript 获得更好的生产力，建议使用脚本中介器在 WSO2 ESB 中进行 javascript 验证。您可以使用内联 javascript 代码以及将 javascirpt 保存在注册表中并在必要时重新使用。有关如何使用 WSO2 ESB 实现脚本中介的更多详细信息，请参阅以下链接 [1]。

[1] [https://docs.wso2.com/display/ESB490/Script+Mediator](https://docs.wso2.com/display/ESB490/Script+Mediator)

问候，普布杜。

# java - 从被调用线程调用调用线程函数

> ID：15199593
> 
> 赞同：1
> 
> 时间：2013-03-04T10:38:15.283
> 
> 标签：java, android, multithreading, android-handler

我有一个 Android 库类。此类用于管理蓝牙连接，当创建套接字连接时，将启动一个新线程，该线程在蓝牙套接字上等待从蓝牙设备接收到的传入消息。

当我收到一条新消息时，我会调用在调用线程上运行的函数，我尝试使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html)它来执行此操作，但该`handleMessage()`函数始终在辅助线程上运行。

```
public class LibraryClass {

    private ConnectedThread ct;

    LibraryClass() {
        // start blutooth connection
        ct = new ConnectedThread();
        ct.start();
    }

    private final Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            // this code is running on ConnectionThread but I need to handle
            // message on primary thread
            }
        }
    };

    private class ConnectedThread extends Thread {

        public void run() {
            while (true) {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);
                mHandler.dispatchMessage(msg);
            }
        }
    }
} 
```

你能帮我解决这个问题吗？

# c++builder - 在单独的线程中运行表单

> ID：15199594
> 
> 赞同：1
> 
> 时间：2013-03-04T10:38:18.077
> 
> 标签：c++builder, vcl, c++builder-2010

假设我有一个表单 Foo。即使主应用程序线程可能正忙于做其他事情，我如何创建一个在它自己的线程中运行并得到更新的实例？例如处理阻塞网络通信或类似的东西。

我了解基本原理，并且我需要创建一个新线程，在该线程中创建表单实例等。但是我认为我需要该线程/窗口的更新循环，我完全不确定它应该是什么样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:27:46.790

除了主应用程序线程之外，您不应在线程中创建表单，因为 Windows 消息队列仅与此主线程相关联。
换个思路：为了确保您的表单始终保持更新和响应，请为繁忙的工作（例如处理阻塞 newtork 通信等）创建单独的线程，而不是为表单创建单独的线程。在这种情况下，创建新线程后，主窗体继续从其队列中抽取消息，而不同线程中的函数正在执行您需要的脏工作。`PostMessage()`当工作线程完成时，它可以使用WinAPI 函数将结果通知主线程。您应该只为表单中的此类自定义消息提供处理程序，它们将与工作线程无缝通信。
此外，如果您的“忙碌工作”不是很复杂，您甚至可以在没有额外线程的情况下进行处理，方法是在表单线程中运行您的工作，并且`ProcessMessages()`不时调用函数，以保持表单更新。

# java - 从 LDAP 获取经理的电子邮件 ID？

> ID：15199596
> 
> 赞同：0
> 
> 时间：2013-03-04T10:38:20.377
> 
> 标签：java, ldap

我正在尝试获取一个人的电子邮件 ID 以及他/她的经理的电子邮件 ID。以下是我尝试过的代码。

```
DirContext ctx = new InitialDirContext(LDAPDetails());
String[] attrIDs = {"sAMAccountName", "cn", "title", "mailnickname", "mail", "manager", "department", "telephoneNumber"};
    SearchControls ctls = new SearchControls();
    ctls.setReturningAttributes(attrIDs);
    ctls.setSearchScope(SearchControls.SUBTREE_SCOPE);
    String filter = "(CN=285263)";
    NamingEnumeration<SearchResult> answer = ctx.search("OU=users,DC=cts,DC=com", filter , ctls);
    answer = ctx.search("OU=xyz,DC=cts,DC=com", filter , ctls);

   while (answer.hasMore()) {
   SearchResult sr = (SearchResult) retEnum.next();
   Attribute mailAttribute=sr.getAttributes().get("mail");
   System.out.println("Team Member's eMail: "+mailAttribute.get()); //Here I am able to get the person's email.
   Attribute managerAttribute=sr.getAttributes().get("manager"); // this is just getting the manager's CN value. Not the email ID.
   } 
```

有人可以帮我获取经理的电子邮件 ID 吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:55:01.437

您必须查找经理以获取他（他们）的电子邮件地址：

```
DirContext ctx = new InitialDirContext(LDAPDetails());
String[] attrIDs = { "sAMAccountName", "cn", "title", "mailnickname", "mail", "manager", "department", "telephoneNumber" };
SearchControls ctls = new SearchControls();
ctls.setReturningAttributes(attrIDs);
ctls.setSearchScope(SearchControls.SUBTREE_SCOPE);
String filter = "(CN=285263)";
NamingEnumeration<SearchResult> answer = ctx.search("OU=users,DC=cts,DC=com", filter, ctls);

while (answer.hasMore()) {
    SearchResult sr = (SearchResult) retEnum.next();
    Attribute mailAttribute = sr.getAttributes().get("mail");
    System.out.println("Team Member's eMail: " + mailAttribute.get()); // Here I am able to get the person's email.
    Attribute managerAttribute = sr.getAttributes().get("manager"); // this is just getting the manager's CN value. Not the email ID.

    // now lookup the manger
    NamingEnumeration<SearchResult> managerAnswer = ctx.search(managerAttribute.get(), "", ctls);
    while (answer.hasMore()) {
        SearchResult managerSr = (SearchResult) retEnum.next();
        Attribute mailAttribute = sr.getAttributes().get("mail");
        System.out.println("Managers eMail: " + mailAttribute.get()); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T04:28:33.847

这是我的方法...

1..连接到 LDAP

2..搜索用户并获取管理员姓名

3..在过滤条件中搜索具有管理员名称和对象类别的LDAP作为用户。

NamingEnumeration answermanager = context.search(managerAttribute.get().toString(),"(objectClass=user)",searchCtls);

# ember.js - 为什么在车把模板中可访问模型在控制器内无法访问？

> ID：15199600
> 
> 赞同：3
> 
> 时间：2013-03-04T10:38:48.777
> 
> 标签：ember.js, ember-data

我有一个病人对象的模型

```
 App.Router.map (function () {
    this.resource('patients');
    this.resource('patient', {path: ':patient_id'}, function(){
         this.resource('dashboard', function() {
             this.route('summary');

         });

    });
});

   App.PatientRoute = Ember.Route.extend({
          model: function(params) {
            return App.Patient.find(params.patient_id);
          },
          setupController: function(){
              console.log("Menu Items:" + App.PatientMenuItem.find() );
              this.controllerFor('patient').set('menuItems', App.PatientMenuItem.find());

          }
        });

App.DashboardSummaryRoute = Ember.Route.extend({
    setupController: function(){

        this.controllerFor('dashboard.summary').set('content', this.controllerFor('patient').get('model'));

        this.controllerFor('dashboard.summary').getPatient();
    }

});

App.DashboardSummaryController = Ember.ObjectController.extend({

  getPatient:function(){
      console.log(this.content.get_allergies);
  }
});

App.PatientController = Ember.ObjectController.extend({
    menuItems:[],    

});

<script type="text/x-handlebars" data-template-name="dashboard/summary">
Summary{{this.content.get_allergies}}
</script> 
```

在上面，我无法在 DashboardSummaryController 中访问相同的 get_allergies，但我可以在车把中访问它，谁能帮助我有什么错误？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:49:26.637

我不知道仅此一项是否可以解决问题，但**在访问 properties 时始终使用 get() 和 set() 方法**。所以我建议在你的 getPatient() 方法中试试这个：

```
App.DashboardSummaryController = Ember.ObjectController.extend({

  getPatient:function(){
      console.log(this.get("content.get_allergies"));
  }
}); 
```

**为什么模板有效？**您拥有的 Handlebars 表达式会自动转换为调用，我建议您使用控制器方法。

# html - 我应该如何处理默认助手或 twitterBootstrap 助手在我的 Play 2 应用程序中生成的 html 输出

> ID：15199605
> 
> 赞同：5
> 
> 时间：2013-03-04T10:39:01.150
> 
> 标签：html, scala, twitter-bootstrap, playframework-2.1

这是我的**模板**：

```
@(smsReviewForm: Form[SmsReview], grades: Seq[Grade])

@styles = {

}

@scripts = {

}
@import mobile.mobileMain
@import helper._
@mobileMain(Messages("reco.index.title"), styles, scripts) {
    <div id="header">
        <p class="floatleft"><img src="@routes.Assets.at("images/mobile/general/reco.png")" alt="Reco" /></p>
        <div class="clear"></div>
    </div>

    @helper.form(routes.Sms.submit) {

        @helper.inputText(
            smsReviewForm("lastname"),
            '_label -> "Label",
            '_id -> "lastname"
        )

        <div class="actions">
            <input type="submit" class="btn primary" value="Submit">
        </div>
    }
} 
```

当使用常规时`@import helper._`，我的应用程序中生成的 html 看起来像 play 2.1 文档中的示例：

```
<dl class=" " id="lastname_field">
    <dt><label for="lastname">Label</label></dt>
    <dd>
    <input type="text" id="lastname" name="lastname" value="">
</dd>
        <dd class="info">Required</dd>    
</dl> 
```

如果我使用`@import helper.twitterBootstrap._`它看起来像：

```
<div class="clearfix  " id="lastname_field">
<label for="lastname">Label</label>
<div class="input">

<input type="text" id="lastname" name="lastname" value="">
    <span class="help-inline"></span>
    <span class="help-block">Required</span> 
</div> 
```

我没有使用`dd`hml 类型的实现，twitter bootstrap 的东西看起来更像我习惯使用的结构，但我对实现 bootstrap js 和 css 不感兴趣。所以我的问题是你对此有何看法。你用了什么？也许您使用自己的实现来进行 html 渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:00:31.903

您应该创建**自己的字段构造函数**以指定您的渲染样式。

在此处查看官方文档中的“编写自己的构造函数”部分：

[http://www.playframework.com/documentation/2.1.0/ScalaFormHelpers](http://www.playframework.com/documentation/2.1.0/ScalaFormHelpers)

因此，您可以参考您的模板，而不是导入基本的`helpers._`或默认的引导字段构造函数。`helper.twitterBootstrap._``import MyOwnHelpers._`

整个文档在文档中得到了很好的解释：）

有关更多信息，这里是我创建的一个字段构造函数的示例：当然，你可以不使用 boostrap，我很准确。就我而言，我做到了。

**twitterBootstrapInput.scala.html**

```
<div class="control-group @if(elements.hasErrors) {error}">
    <label class="control-label" for="@elements.id">@elements.label</label>
    <div class="controls">
    @if(elements.args.contains(Symbol("data-schedule"))){
          <div class="schedulepicker input-append">
              @elements.input
            <span class="add-on">
              <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
          </div>
    } else {
        @elements.input
    }
        <span class="help-inline">@elements.errors.mkString(", ")</span>
    </div>
</div> 
```

及其在我相关`xx.scala.html`文件中的导入：

```
@implicitFieldConstructor = @{ FieldConstructor(twitterBoostrapInput.f) } 
```

# javascript - Javascript异步功能不起作用

> ID：15199607
> 
> 赞同：0
> 
> 时间：2013-03-04T10:39:05.533
> 
> 标签：javascript, asynchronous

我有以下示例：

```
var first=setInterval(function() {  
var t=new Date();  
console.log("Started: ",t);  
sleep(function(){  
    var t=new Date();  
    console.log("Finished: ",t);  
});  
},500);  

function sleep(callback){  
for (var i=0;i<10000000000;i++){  
     //waiting
  }  
  callback();  
 } 
```

恕我直言 sleep 应该异步执行，但它不会输出：

```
Started:  Mon Mar 04 2013 12:31:10 GMT+0200 (EET)  
Finished:  Mon Mar 04 2013 12:31:23 GMT+0200 (EET)  
Started:  Mon Mar 04 2013 12:31:24 GMT+0200 (EET)  
Finished:  Mon Mar 04 2013 12:31:36 GMT+0200 (EET)  
Started:  Mon Mar 04 2013 12:31:36 GMT+0200 (EET) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:42:35.297

`setInterval`不会在上一次回调调用仍在运行时触发下一次回调调用。由于您的`sleep`函数绝不是异步的，因此它支持后续`setInterval`回调。

在浏览器中，除非使用[web worker](http://www.w3.org/TR/workers/)，所有 JavaScript 代码都在*单个线程*上执行。看起来您的代码正在尝试设置`sleep`将要运行的情况，然后`setInterval`将触发后续回调并启动第二个线程 running `sleep`。这不会发生（见上文）。

但是，如果您有长时间运行的操作，您希望在主 JavaScript 线程上运行（在[支持它们的浏览器上](http://caniuse.com/#feat=webworkers)），您*可以*使用 Web Worker 来执行类似的操作。

# backbone.js - 使用复合键时，Backbone 在更新时执行 POST 而不是 PUT

> ID：15199615
> 
> 赞同：7
> 
> 时间：2013-03-04T10:39:21.787
> 
> 标签：backbone.js, model, composite-key

我在我的模型中使用复合键并根据我的复合键生成 ID：

```
app.Assignment = Backbone.Model.extend({
    idAttribute : [ 'personId', 'jobId' ],
    parse : function(resp) {
        resp.id = resp.personId + "_" + resp.jobId;
        return resp;
    }
}); 
```

但是Backbone 仍然认为所有Assignment 实例都是新的，尽管我在从API 获取它们时在parse 方法中设置了id。因此，Backbone 不执行 DELETE，而是在更新时执行 POST 而不是 PUT。我该如何解决这个问题或“正确的方法”是什么？

**更新：**

看起来用 this.id 替换 resp.id 可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-27T04:35:32.260

Backbone.Model的方法的结果`parse`被传递给`set`设置模型*属性*的方法。我认为你的困惑点是模型的 ID 不是它的属性之一。这是它的*属性*之一。

所以，发生的事情是这样的：

1.  您的原始数据从服务器返回并传递给`parse`
2.  同样的原始数据，现在增加了一个`id`属性，被传递给`set`
3.  `set`看起来和你的`idAttribute`( `[ 'personId', 'jobId' ]`) 以及原始数据中的所有键
4.  由于这些键都不匹配`idAttribute`，因此它们都不会用作模型的 ID，因此您会遇到问题。

您设置`this.id`内部的解决方案`parse`有效，但它可能会导致问题，因为 parse 通常设计为对其输入（原始数据）进行操作，而不是修改模型本身；这部分应该在`set`被调用时发生。相反，更清洁的解决方案是执行以下操作：

```
app.Assignment = Backbone.Model.extend({
    // note that no idAttribute is specified, leaving it as the default "id"
    parse : function(resp) {
        resp.id = resp.personId + "_" + resp.jobId;
        return resp;
    }
} 
```

或者，如果您想要不同的 ID 属性...

```
app.Assignment = Backbone.Model.extend({
    idAttribute: 'personAndJobId',
    parse : function(resp) {
        resp.personAndJobId = resp.personId + "_" + resp.jobId;
        return resp;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-29T19:38:56.700

除了`idAttribute`这里的问题，你总是可以通过传递给的类型选项强制 Backbone 使用某种 HTTP 方法`save()`。

`model.save(null, { type: 'put' })`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-26T13:24:20.920

我从未在 Backbone 中使用复合 ID，但我认为这可能是您问题的简单答案：

```
initialize: function() {
      this.set("id", this.generateID());
},
generateID = function () {
    return this.personId + + "_" + this.jobId;
} 
```

使用 Backbone 模型定义中的此代码，您将为每个模型创建一个唯一 ID，并且更新和保存它不应该有问题（并且您不需要设置任何 idAttribute）。

# ruby - 使用 jenkins/maven/testLink 进行 Ruby 测试

> ID：15199619
> 
> 赞同：1
> 
> 时间：2013-03-04T10:39:38.807
> 
> 标签：ruby, maven, automation, jenkins, testlink

我正在使用 Jenkins、maven 和 testLink 插件进行自动化测试。我想用 Jenkins 执行 ruby​​ 测试并将它们挂在 testLink 中。

这是我的 pom.xml ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
...
...
<dependencies>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.2.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.codeartisans</groupId>
        <artifactId>ruby-maven-plugin</artifactId>
        <version>0.1</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.codeartisans</groupId>
            <artifactId>ruby-maven-plugin</artifactId>
            <version>0.1</version>
            <executions>
        <execution>
        <id>exec-test</id>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <script>src/main/ruby/exec.rb</script>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这是我在 jenkins 中的配置：

测试执行 --> 单一构建步骤 --> 调用顶级 maven 目标： --> 目标：-X clean org.codeartisans:ruby-maven-plugin:0.1:exec test -DsuiteXmlFiles=suite.xml

这里是控制台输出：

```
These will use the artifact files already in the core ClassRealm instead, to allow them to be included in PluginDescriptor.getArtifacts().

[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] One or more required plugin parameters are invalid/missing for 'ruby:exec'

[0] Inside the definition for plugin 'ruby-maven-plugin' specify the following:

<configuration>
  ...
  <script>VALUE</script>
</configuration>. 
```

有人可以帮我吗？我是maven，IC等的新手...

# xslt - xslt排序不起作用

> ID：15199620
> 
> 赞同：0
> 
> 时间：2013-03-04T10:39:42.187
> 
> 标签：xslt

基本上我想按级别对数据进行排序，但我遇到了错误。我是 xslt 的新手。我尝试了下面的代码，但没有工作。

这是我的 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="XSLTEx1WT.xsl"?>
<Modules>
    <module code="CSE2041">
        <name>Web Technologies II</name>
        <credit>3</credit>
        <level>2</level>
    </module>
    <module code="CSE2031Y">
        <name>Object Oriented Software Development</name>
        <credit>6</credit>
        <level>2</level>
    </module>
    <module code="CSE1041">
        <name>Web Technologies I</name>
        <credit>3</credit>
        <level>1</level>
    </module>
</Modules> 
```

这是我的 xsl 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:variable name="deptCredit" select="99"/>
    <xsl:variable name="myBorder" select="1"/>
    <xsl:template match="/">
        <html>
            <head>
                <title>XSLT Exercise 1</title></head>
            <body>
                <table border="{$myBorder}">
                    <thead><tr><th>Module Name</th><th>No. of Credits</th><th>Level</th></tr></thead>
                    <tbody>

                        <xsl:apply-templates>
                            **<xsl:sort select="level" data-type="number"/>**
                        </xsl:apply-templates>
                    <tr><td colspan="3">Departmental credits needed: <xsl:value-of select="$deptCredit"/></td></tr>
                    <tr><td colspan="3">Percentage cleared: <strong> <xsl:value-of select="format-number(sum(//credit/text()) div $deptCredit,'##.##%')"/></strong>
                    </td></tr>
                    </tbody>
                </table>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="module">
        <xsl:apply-templates select="@code"/>
            <tr><xsl:apply-templates select="*"/></tr>
    </xsl:template>

    <xsl:template match="name">
        <xsl:call-template name="sjName"/>
    </xsl:template>

    <xsl:template match="@code">
        <tr style="background-color:silver;">
            <td colspan="3" style="text-align:center;">
                <xsl:value-of select="."/>
            </td>
        </tr>
    </xsl:template>

    <xsl:template match="credit">
        <td style="color:blue;"><strong><xsl:value-of select="text()"/></strong></td>
    </xsl:template>

    <xsl:template match="level">
        <td style="color:blue;"><strong><xsl:value-of select="text()"/></strong></td>
    </xsl:template>

    <xsl:template name="sjName">
            <xsl:choose>
                <xsl:when test="contains(../@code,'Y')">
                    <td style="color:orange;font-weight:bold;"><xsl:value-of select="."/></td>
                </xsl:when>
                <xsl:otherwise>
                    <td style="color:lime;font-weight:bold;"><xsl:value-of select="."/></td>
                </xsl:otherwise>
            </xsl:choose>               
    </xsl:template>

</xsl:stylesheet> 
```

我已经尝试了上述但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:59:44.497

你只需要改变这个：

```
<xsl:apply-templates>
    <xsl:sort select="level" data-type="number"/>
</xsl:apply-templates> 
```

对此：

```
<xsl:apply-templates select="Modules/module">
    <xsl:sort select="level" data-type="number"/>
</xsl:apply-templates> 
```

# ios - 如何更改 tabris ios 客户端的本机对话框元素的语言？

> ID：15199621
> 
> 赞同：0
> 
> 时间：2013-03-04T10:39:48.480
> 
> 标签：ios, eclipse, tabris

如何更改 tabris ios 客户端的本机对话框元素的语言？

例如，我将更改上下文菜单的取消按钮的语言。我可以在 XCode 中或以其他方式执行此操作吗？

tabris 中使用的来自 ASIHTTPFramework 的错误消息只有英文。更改这些消息的语言很好，但是如何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:19:49.457

**客户端**本地化不是即将发布的 1.0 版本的一部分。稍后我们将提供在客户端本地化少数硬编码字符串（OK、Cancel、Done、...）的能力...

# javascript - android平板电脑中的javascript执行超出超时错误

> ID：15199623
> 
> 赞同：1
> 
> 时间：2013-03-04T10:39:55.713
> 
> 标签：javascript, android, cordova, android-emulator

我有一个应用程序，我需要在其中解析和显示来自 web 服务的数据。在这里我有 2 种不同的服务，在一项服务中我有 24 项，而在另一项服务中我有 200 项。对于具有 24 个项目的服务，我能够正确显示它，但具有 200 个项目的服务显示**javascript 执行超出超时**错误并显示空白页。两种服务的代码相同。谁能帮我摆脱这个错误并正确显示数据？

我在这里添加一段代码

```
 <script type="text/javascript">
        function showMessage(data, index) {
            var obj = jQuery.parseJSON(data.d);
            if (index == "TrackDeals") {
                trackDeals(obj);
            } 
        }

        function OnError(request, status, error) {
            alert(request.statusText);
        }

        function trackDeals(trackdeals) {
            var items = [];
            var count = 0;
            $.each(trackdeals, function(key, value) {
                count++;
                pid = value.ApplicationId;
                var str = localStorage.getItem("appidlist");
                if (str == null){
                    var html = '<tr> my html code </tr>';
                } else {
                    var mySplitResult = str.split(",");
                    for(var i = 0; i < mySplitResult.length; i++) {
                        if(mySplitResult[i] == pid) {
                            var html = '<tr> my html code </tr>';
                        } else {
                            var html = '<tr> my html code </tr>';
                       }
                    }
                }
                items.push(html);
            });
            $('#trackdeals').html(items.join('')).trigger('create');
            $("table tr").slice(0, 5).show();
            $("#load").click(function(e) {
                e.preventDefault();
                $("table tr:hidden").slice(0, 5).show();
                if ($("table tr:hidden").length == 0) {
                    alert("No more data");
                }
            });
        }

        $(document).ready(function() {
            document.getElementById('username').innerHTML = "name";
            var trackparam = username + ',' + userid;
            CallWebServiceFromJquery('TrackDeals', trackparam);
        });
    </script>

</head>
<body>
    <div class="deals-content">
                    <div class="deals-table-header">
                        <table width="100%" class="table">
                            <tr>
                                <td width="18%">Reference Id</td>
                                <td width="22%">Account</td>
                                <td width="24%">Agency Name</td>
                                <td width="27%">Product</td>
                                <td width="8%"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="deals-table-content">
                        <table width="100%" class="deals-table-header-table" id ="trackdeals"></table>
                        <button id="load" style="width: 98%; font-weight: bold">Load More</button>
                    </div>
                </div>

</body> 
```

***编辑：我能够在姜饼模拟器中获得相同代码的输出，但我在使用蜂窝模拟器时遇到了这个错误。***

# android - 如何在单击另一个视图（即按钮）时突出显示自定义列表视图

> ID：15199627
> 
> 赞同：2
> 
> 时间：2013-03-04T10:40:12.470
> 
> 标签：android, listview, background, highlight

我正在显示一个*自定义列表视图*，我想从另一个按钮遍历列表，一个用于向下列表，一个用于向上列表，所以在这里我能够获取当前选定的项目位置，所以我正在使用 -

```
list.setSelection(newpostion); 
```

但我无法看到给定位置的亮点。在这里，*列表*正在被正确遍历，但用户无法看到他当前在哪个列表项上。所以请告诉我如何突出显示或更改特定列表项的背景。

我尝试使用*选择器*，例如状态更改背景，但不适用于我。请为我提供任何可行的解决方案。

这是列表适配器的代码-

```
package com.sho;

import java.util.ArrayList;
import java.util.HashMap;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.TextView;

public class list_adapter extends ArrayAdapter<HashMap<String,String>>
{
ArrayList<HashMap<String,String>> items;
LayoutInflater mInflater ; 
Context context;
int layoutResourceId; 

public list_adapter(Context context, int layoutResourceId, ArrayList<HashMap<String, String>> _list) 
{
        super(context, layoutResourceId, _list);
        this.layoutResourceId=layoutResourceId;
        this.items = _list;
        this.context=context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
            View row = convertView;
            ViewHolder holder = new ViewHolder();
            if(row==null)
            {
                mInflater = ((Activity)context).getLayoutInflater();
                row = mInflater.inflate(R.layout.chapterdetails, parent, false);
                holder.name = (TextView) row.findViewById(R.id.chapterdata);

            }

            else
            {
                holder=(ViewHolder)row.getTag();

            }

            row.setTag(holder);
            row.setId(position);

       HashMap<String,String>  map=items.get(position);
       holder.name.setText(map.get("DESCRIPTION"));
        return row;
}

static class ViewHolder
{
    TextView name;
    ImageButton annotion,bookmark,edit;
}

} 
```

我想要遍历列表的按钮的代码，这里的列表名称是 ls-

```
View earliest=new View(MainActivity.this);

                if(postion<a1&&postion<=a1-2) 
                {
                     postion++;
                     earliest=ls.getRootView().findViewById(postion);
                        earliest.setBackground(null);

                     View v=new View(MainActivity.this); 
                    v=ls.getRootView().findViewById(postion); 
                    v.setBackgroundColor(Color.RED);
                    previous.setBackgroundColor(Color.BLUE); // your list
                    previous=v;
                     } } }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:52:12.960

它可能与可聚焦性有关。如果您有一个自定义列表视图，其中包含可聚焦对象，请尝试使它们不可聚焦。

```
aButtonInYourListView.Focusable = false;
aButtonInYourListView.FocusableInTouchMode = false; 
```

对 ListViewAdapter 中的所有按钮、图像按钮执行此操作。根据我的经验，它也可以从 xml 完成，但不能用于 imagebutton。为了安全起见，在代码中执行此操作。

这应该允许 ListViewItems 成为焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:19:55.467

**编辑**：设置后`list.setSelection(newpostion);`

得到这样的看法

```
View v=list.getSelectedView(); 
```

然后遵循相同的逻辑

你的代码是这样的

创建全局变量

```
View previous; 
```

在 onCreate 中初始化它

```
previous=new View(this);

 traverse_listdown.setOnClickListener(new OnClickListener() {
 @Override 
public void onClick(View v) { 
// TODO Auto-generated method stub 
System.out.println("down"); 
int a1=list.getCount();

if(postion<a1&&postion<=a1-2) {
 postion++; list.setSelection(postion);
 View v1=new View(MainActivity.this); 
v1=list.getSelectedView(); 
v1.setBackgroundColor(Color.RED);
previous.setBackgroundColor(Color.WHITE); // your list
previous=v1;
 } } }); 
```

* * *

试试这个，

像这样创建一个可绘制的选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/pause_button"
          android:state_selected="true" />
    <item android:drawable="@drawable/play_button" />
</selector> 
```

您可以指定您选择的颜色或可绘制对象。

像这样创建全局变量

```
View previous; 
```

初始化它

```
previious=new View(context); 
```

当您的列表项单击时，像这样使用

```
yourlist.setOnItemClickListener(new OnItemClickListener() {
            @Override
        public void onItemClick(AdapterView<?> arg0, View view, int arg2,long arg3) {
        previous.setSelected(false);                        
        view.setSelected(true);
        previous=view;

}
}); 
```

# csv - 如何让 Highcharts 理解 CSV 文件中的“年份类别”？

> ID：15199629
> 
> 赞同：0
> 
> 时间：2013-03-04T10:40:29.333
> 
> 标签：csv, highcharts

我会说它以前有效。现在，我同时更新到最新的 Highcharts 版本。而且，不知道为什么，它突然想要绝对显示我的 CSV 文件的第一个“列”。它看起来像这样：

```
,Switzerland,Europe,Global
1980,0.02854,0.01931,0.00547
1981,0.02898,0.01931,0.00549 
```

Highcharts（“我的代码”）想要显示这个“”列。如果我将其更改为“年”或“类别”，那都是一样的。我在图例中没有三个，而是四个条目。

Highcharts 代码如下所示：

```
 // Split the lines
    var lines = data.split('\n');
    $.each(lines, function(lineNo, line)
    {
        var items = line.split(',');

        // header line containes series name
        if (lineNo === 0)
        {
            $.each(items, function(itemNo, item)
            {
                if (item!='')
                {
                    if(item == 'Switzerland')
                    {
                        options.series.push(
                        {
                            name:item,
                            lineWidth: 5, 
                            data:[]
                        });
                    }
                    else
                    {
                        options.series.push(
                        {
                            name:item,
                            data:[]
                        });
                    }
                }
            });
        }
        .... 
```

我试图改变线路

```
 if (item!='') 
```

类似于

```
 if ((item!='') && (item!=' ')) 
```

或者

```
 if ((item!='') && (item!='Years')) 
```

（当我在 CSV 文件的第一个位置添加“年”时），但我只收到错误消息......

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:51:15.617

我从过去找到了类似的示例，问题仅出在索引上，该索引在将点推送到系列期间使用。解析器：

```
 var options = {
                chart: {
                    renderTo: 'container',
                    zoomType:'xy'
                },
                xAxis:{
                    categories:[],
                    tickInterval:10,
                    tickmarkPlacement:'on'
                },
                title: {
                    text: 'Oviedo hoy'
                },
                series: []
            };

$.get('data.csv', function(data) {
                // Split the lines
                var lines = data.split('\n');
                    $.each(lines, function(lineNo, line) {
                        var items = line.split(',');

                        // header line containes series name
                        if (lineNo === 0) {

                            $.each(items, function(itemNo, item) {
                                if(item!='')
                                {
                                        options.series.push({
                                            name:item,
                                            data:[]
                                        });
                                }
                            });
                        }
                        // the rest of the lines contain data with their name in the first position
                        else {
                            console.log(options.series);
                            $.each(items, function(itemNo, item) {

                                if(itemNo == 0)
                                    options.xAxis.categories.push(item)
                                else
                                    options.series[itemNo-1].data.push(parseFloat(item));

                            });
                        }
                    });

                    var chart = new Highcharts.Chart(options);
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:59:44.333

经过一番来回，这是它现在的工作方式：

```
 $.get('data.csv', function(data)
    {
        // Split the lines
        var lines = data.split('\n');
        $.each(lines, function(lineNo, line)
        {
            var items = line.split(',');

            // header line containes series name
            if (lineNo === 0)
            {
                $.each(items, function(itemNo, item)
                {
                    if (itemNo > 0)
                    {
                        if(item == 'Switzerland')
                        {
                            options.series.push(
                            {
                                name:item,
                                lineWidth: 5, 
                                data:[]
                            });
                        }
                        else
                        {
                            options.series.push(
                            {
                                name:item,
                                data:[]
                            });
                        }
                    }
                });
            }
            // the rest of the lines contain data with their name in the first position
            else
            {
                $.each(items, function(itemNo, item)
                {
                    if(itemNo == 0)
                    {
                        options.xAxis.categories.push(item);
                    }
                    else if (item == "null")
                    {
                        options.series[itemNo-1].data.push(null);
                    }
                    else
                    {
                        options.series[itemNo-1].data.push(parseFloat(item));
                    }
                });
            }
        });

        //console.log(options.series);
        var chart = new Highcharts.Chart(options);
        });
    }); 
```

# logic-programming - pyDatalog：处理自定义谓词中的未绑定变量

> ID：15199636
> 
> 赞同：1
> 
> 时间：2013-03-04T10:40:53.830
> 
> 标签：logic-programming, pydatalog

我正在编写一个 pyDatalog 程序来分析来自 Weather Underground 的天气数据（目前只是作为我自己和公司其他人的演示）。我编写了一个自定义谓词解析器，它返回开始时间和结束时间之间的读数：

```
# class for the reading table.
class Reading(Base):
      __table__ = Table('reading', Base.metadata, autoload = True, autoload_with = engine)
      def __repr__(self):
        return str(self.Time)
      # predicate to resolve 'timeBetween(X, Y, Z)' statements
      # matches items as X where the time of day is between Y and Z (inclusive).
      # if Y is later than Z, it returns the items not between Z and Y (exclusive).
      # TODO - make it work where t1 and t2 are not bound.
      # somehow needs to tell the engine to try somewhere else first.
      @classmethod
      def _pyD_timeBetween3(cls, dt, t1, t2):
        if dt.is_const():
          # dt is already known
          if t1.is_const() and t2.is_const():
            if (dt.id.Time.time() >= makeTime(t1.id)) and (dt.id.Time.time() <= makeTime(t2.id)):
              yield (dt.id, t1.id, t2.id)
        else:
          # dt is an unbound variable
          if t1.is_const() and t2.is_const():
            if makeTime(t2.id) > makeTime(t1.id):
              op = 'and'
            else:
              op = 'or'
            sqlWhere = "time(Time) >= '%s' %s time(Time) <= '%s'" % (t1.id, op, t2.id)
            for instance in cls.session.query(cls).filter(sqlWhere):
              yield(instance, t1.id, t2.id) 
```

这适用于 t1 和 t2 绑定到特定值的情况：

```
:> easterly(X) <= (Reading.WindDirection[X] == 'East')
:> + rideAfter('11:00:00')
:> + rideBefore('15:00:00')
:> goodTime(X) <= rideAfter(Y) & rideBefore(Z) & Reading.timeBetween(X, Y, Z)
:> goodTime(X)
[(2013-02-19 11:25:00,), (2013-02-19 12:45:00,), (2013-02-19 12:50:00,), (2013-02-19  13:25:00,), (2013-02-19 14:30:00,), (2013-02-19 15:00:00,), (2013-02-19 13:35:00,), (2013-02-19 13:50:00,), (2013-02-19 12:20:00,), (2013-02-19 12:35:00,), (2013-02-19 14:05:00,), (2013-02-19 11:20:00,), (2013-02-19 11:50:00,), (2013-02-19 13:15:00,), (2013-02-19 14:55:00,), (2013-02-19 12:00:00,), (2013-02-19 13:00:00,), (2013-02-19 14:20:00,), (2013-02-19 14:15:00,), (2013-02-19 13:10:00,), (2013-02-19 12:10:00,), (2013-02-19 14:45:00,), (2013-02-19 14:35:00,), (2013-02-19 13:20:00,), (2013-02-19 11:10:00,), (2013-02-19 13:05:00,), (2013-02-19 12:55:00,), (2013-02-19 14:10:00,), (2013-02-19 13:45:00,), (2013-02-19 13:55:00,), (2013-02-19 11:05:00,), (2013-02-19 12:25:00,), (2013-02-19 14:00:00,), (2013-02-19 12:05:00,), (2013-02-19 12:40:00,), (2013-02-19 14:40:00,), (2013-02-19 11:00:00,), (2013-02-19 11:15:00,), (2013-02-19 11:30:00,), (2013-02-19 11:45:00,), (2013-02-19 13:40:00,), (2013-02-19 11:55:00,), (2013-02-19 14:25:00,), (2013-02-19 13:30:00,), (2013-02-19 12:30:00,), (2013-02-19 12:15:00,), (2013-02-19 11:40:00,), (2013-02-19 14:50:00,), (2013-02-19 11:35:00,)] 
```

但是，如果我使用其他顺序的条件声明 goodTime 规则（即在它尝试解析 timeBetween 时 Y 和 Z 未绑定），它将返回一个空集：

```
:> atoms('niceTime')
:> niceTime(X) <= Reading.timeBetween(X, Y, Z) & rideAfter(Y) & rideBefore(Z)
<pyDatalog.pyEngine.Clause object at 0x0adfa510>
:> niceTime(X)
[] 
```

这似乎是错误的——这两个查询应该返回相同的结果集。

我的问题是在 pyDatalog 中是否有处理这种情况的方法？我认为需要发生的是 timeBetween 谓词应该能够告诉引擎以某种方式退出并尝试在尝试此规则之前先解决其他规则，但我在文档中看不到任何对此的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:02:40.677

pyDatalog[参考](https://sites.google.com/site/pydatalog/reference)说：“尽管 pyDatalog 语句的顺序无关紧要，但正文中文字的顺序很重要” pyDatalog 确实按照陈述的顺序解析了正文中的谓词。

话虽如此，有可能改进 pyDatalog 以首先使用绑定变量解析谓词，但我不确定为什么这很重要。

# jquery - 在 Wordpress 中嵌入 jquery.corner.js？

> ID：15199637
> 
> 赞同：0
> 
> 时间：2013-03-04T10:40:55.013
> 
> 标签：jquery, wordpress, embed

我想将 jquery.corner.js 嵌入到我的 wordpress 主题中，但我没有运气......

将此脚本嵌入wordpress主题并使用它的正确方法是什么？

这是脚本的网址，以防万一： http: [//www.malsup.com/jquery/corner/](http://www.malsup.com/jquery/corner/)

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:35:47.833

您应该使用[`wp_register_script`](http://codex.wordpress.org/Function_Reference/wp_register_script)和[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)。将文件添加到您的主题文件夹。

```
function include_jquery_corner(){
  wp_register_script( 'jq_corner', get_template_directory_uri() . 'PATH TO YOUR JS FILE' );
  wp_enqueue_script( 'jq_corner' );
}

add_action( 'wp_enqueue_scripts', 'include_jquery_corner' ); 
```

# php - 如何测试已部署的 Web 应用程序

> ID：15199641
> 
> 赞同：1
> 
> 时间：2013-03-04T10:41:03.967
> 
> 标签：php, linux, testing, login

我们已经使用更新工具构建了一个 Web 应用程序，该工具基本上从我们的版本控制服务器中提取并将 .sql 脚本应用于数据库。每个客户帐户我们都有一组单独的 php 文件 + 一个新数据库。所以客户账户是完全分开的。

目前，因为更新后我们只有 7-8 个客户帐户，所以我手动单击了一些页面以查看一切正常，因为整个应用程序都在登录后面，所以我使用虚拟帐户登录。

我的问题是如何以适当的方式自动执行此任务。

我可以设置一些脚本，使用该虚拟帐户的登录详细信息卷曲到每个客户帐户，但是为此目的创建一个虚拟帐户似乎很糟糕+脚本需要知道每个虚拟帐户的用户名/密码。

在登录后测试 Web 应用程序的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:24:01.590

我真的很喜欢[詹金斯](http://jenkins-ci.org/)。它提供了一堆工具，可以在部署时轻松集成以监控和测试服务器。

# algorithm - 如何在时间序列数据中找到最近的点

> ID：15199649
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:41:24.050
> 
> 标签：algorithm, math

我需要从图表中的特定点计算时间序列图表中最近的数据点

我显然不能使用 d=sqrt(x*x+y*y) 因为我的 x 轴在时间序列中，因此有一个等式将距离和时间加在一起是没有意义的（x，y 需要相同单位）。此外，在视觉上它可能看起来是正确的，但它仍然取决于 x 轴的比例。

那么我可以使用什么最佳逻辑来找到最近的点？

我可以考虑使用 x（即时间）的二次形式，以便我的最终函数可以 ne f(x*x,y)，但这只是一个主观方程。

有没有人对此有更好，更合乎逻辑的方法。如果有一种直观的逻辑方法，我会喜欢的。如果有一个复杂的模型，我仍然想了解并探索它。

谢谢

**编辑**

提供背景：我正在对人们进行民意调查，以预测 4 月份的股价将在哪里（他们必须提及预期价格出现的确切日期）......我如何衡量他们的表现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:05:01.927

一种直观的方法是计算每天的平均绝对变化。即从前一天开始每天的绝对变化总和/系列中的总天数。

此后，我可以根据价格来翻译每一天，即每天的平均价格变化。

因此，如果每天的平均绝对变化是 2，那么 10 天后的价格可以说是 20 个价格点。

此后我可以根据 sqrt(x*x+y*y) 公式计算距离。

这可以通过使用钟形曲线（标准偏差和平均值）来微调，而不仅仅是每天绝对变化的平均值。但这会使解决方案更加复杂。

# vb.net - 在 Vb.Net 中将字符串转换为十六进制字符串，反之亦然

> ID：15199656
> 
> 赞同：0
> 
> 时间：2013-03-04T10:41:59.930
> 
> 标签：vb.net, hex, ascii

我需要将一串完全随机的字符转换成我可以读回的东西！我的想法是：

示例字符串：hi

```
h (Ascii) -> 68 (hex) 
i (Ascii) -> 69 (hex) 
```

所以转换`hi`我必须有`6869`

我的值现在在`Base64`（我用 a 得到`Convert.ToBase64String()`），这个“ascii 到 hex”转换正确吗？在 base64 中，我的值类似于 "4kIw0ueWC/+c=" 但我只需要**字符**，特殊字符会弄乱我的系统

vb.net Convert 只能转换为 base64 字符串 :(

编辑：这是我的最终解决方案：我在`enc`变量中获取了 base64 字符串，并首先将其转换为 ASCII，然后使用对应的十六进制转换：

```
Dim bytes As Byte() = System.Text.Encoding.ASCII.GetBytes(enc)
Dim hex As String = BitConverter.ToString(bytes).Replace("-", String.Empty) 
```

之后，我用以下方法扭转了这一点：

```
Dim b((input.Length \ 2) - 1) As Byte
For i As Int32 = 0 To b.GetUpperBound(0)
     b(i) = Byte.Parse(input.Substring(i * 2, 2), Globalization.NumberStyles.HexNumber)
Next i
Dim enc As New System.Text.ASCIIEncoding()
result = enc.GetString(b) 
```

毕竟这一切我拿回了我的base64string并最后一次转换了`Convert.FromBase64String(result)`

完毕！感谢您的提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:45:48.430

首先`Byte()`从您的`base64`字符串中获取：

```
Dim data = Convert.FromBase64String(inputString) 
```

然后使用[`BitConverter`](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)：

```
String hex = BitConverter.ToString(data) 
```

# jsf - 仅对 h:inputText 组件禁用 a4j:status，对其他组件禁用

> ID：15199664
> 
> 赞同：1
> 
> 时间：2013-03-04T10:42:38.557
> 
> 标签：jsf, richfaces, richdatatable

我有以下代码

```
<a4j:status id="commonstatus" onstart="#{rich:component('loading')}.show();" onstop="#{rich:component('loading')}.hide();" />
<rich:dataTable id="dTable" reRender="ds">
<rich:column id="name" filterMethod="#{myBean.filterName}">
...
<h:inputText> <a4j:support event="onkeyup" reRender="dTable, ds" ignoreDupResponses="true" requestDelay="700" oncomplete="setCaretToEnd(event);" /> </h:inputText>
...
<rich:datascroller id="ds" reRender="dTable">
...
<a4j:support event="onchange" reRender="dtable, ds" status="commonstatus" />
...
</rich:dataTable>

<rich:modalPanel id="loading" moveable="false" autosized="true">
<h:panelGrid columns="2">
        <h:graphicImage value="images/progress.gif"/>
        <h:outputText value="Loading..."/>
 </h:panelGrid>
 </rich:modalPanel> 
```

**问题：**即使我没有指定`status="commonstatus"`，`<h:inputText>`我仍然会得到 onkeyup 事件的加载图像。我在这里想念什么？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:47:20.490

`<a4j:status>`默认情况下适用于页面中触发 ajax 请求的所有组件。[但是，您可以使用标签组件文档](http://livedemo.exadel.com/richfaces-demo/richfaces/status.jsf?tab=info)`for`中所述的属性来限制将被捕获的组件：

> for：指示状态的 AjaxContainer 组件的 ID（采用 javax.faces.UIComopnent.findComponent() 调用的格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:48:54.550

你可以`h:inputText`用一个包裹`a4j:region`

或者

将`status`的属性设置`a4j:support`为不存在的状态 ID（例如`status="none"`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T10:47:36.077

它可能有点被弃用，但如果有人仍然使用 Richfaces 3.3，它可能会很有用......我在通用 facelet 模板中定义了 2 个状态组件。一种是当 ajax 事件触发并应用于整个页面时跨应用程序使用的主要状态，一种是“无”状态，它什么都不做（并且必须包装在区域中）：

```
<a4j:status id="main" onstart="(something)" onstop="(something else)" />
<a4j:region>
   <a4j:status id="none" onstart="" onstop="" />
</a4j:region> 
```

每当我不想出现主要状态时，我都会按照 Andrey 的建议指定“无”状态，但状态组件实际上存在，因此避免了有关不存在组件的警告。

不要忘记将它包装在 a4j:region 中，否则它将无法正常工作 - 如果您在同一区域中有 2 个状态组件，我认为无论您在状态标签中放入什么，都会使用第二个触发请求的组件的...

# c++ - 找不到“fiostream.h”文件

> ID：15199665
> 
> 赞同：-3
> 
> 时间：2013-03-04T10:42:46.543
> 
> 标签：c++, include

我现在正在学习 C++。

这是我的问题：

```
#include <fiostream.h> 
```

不管我用过：

```
#include <fiostream>

#include "fiostream"

#include "fiostream.h" 
```

我在任何地方都找不到这个“fiostream.h”文件。

在哪里可以找到“fiostream.h”文件？

“iostream.h”是否包含“fiostream.h”的功能？

“fiostream.h”和“iostream.h”有什么区别？

谢谢~~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:45:35.073

> “fiostream.h”和“iostream.h”有什么区别？

区别是一个“f”。但是两个标题都不存在。`iostream`会，`fiostream`不会（但`fstream`会）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:44:47.443

`fiostream.h`不是`std`标题。

尝试

```
#include <fstream> 
```

您可以在[cppreference.com](http://en.cppreference.com/)[`std::fstream`](http://en.cppreference.com/w/cpp/io/basic_fstream)上了解更多信息。[`#include <iostream>`](http://en.cppreference.com/w/cpp/header/iostream)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:45:28.240

没有`<fiostream[.h]>`也没有`<iostream.h>`标题。I/O 库提供以下 C++ 标准库头文件：

*   前向声明：`<iosfwd>`
*   标准 iostream 对象：`<iostream>`
*   iostreams 基类：`<ios>`
*   流缓冲区：`<streambuf>`
*   Fromatting 和操纵者：`<istream>`, `<ostream>`,`<iomanip>`
*   字符串流：`<sstream>`
*   文件流：`<fstream>`, `<cstdio>`.

请注意，C++ 标准库头文件不以`.h`- 结尾，那只是 C 库头文件。C 库头文件的 C++ 标准库版本以字母开头`c`。例如，`cstdio`是 C++ 版本的`stdio.h`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:19:44.273

c++ 中不存在 fiostream，但存在 iostream.h。包含此标头可能会自动包含其他标头，例如 ios、streambuf、istream、ostream 和/或 iosfwd。

可用的 C++ 标准头文件位于链接中以供进一步研究。[点击这里查看更多详情](http://www.cpp-home.com/forum/viewtopic.php?t=252)

# java - 查找根和 5 的倍数之间的路径

> ID：15199666
> 
> 赞同：0
> 
> 时间：2013-03-04T10:42:48.710
> 
> 标签：java, algorithm, tree, binary-tree

我很难实现一个程序来从 b-tree root 中找到一个节点的路径，该路径是 5 的倍数。

例子：

```
 12
    /  \
   4    7
  /\    /\
 5  3  4 10 
```

将其视为树。程序应该打印

```
12 -> 4 -> 5

12 -> 7 -> 10 
```

编辑：

是的，我已经尝试过，以下是我正在关注的算法：我按顺序遍历并比较 5 的倍数的值。如果是，我开始在 LinkedList 中添加节点并返回该列表。但是这种方法只有在我有一个 5 的倍数时才有效。如果有更多的倍数，它就会失败。

以下是我尝试过的：

```
LinkedList<Integer> getPaths(Node parent, int multiple){

    if(parent == null)
        return null;

    LinkedList list = new LinkedList();
    list = getPaths(parent.getLeftChild(), 5);

    if(parent.getSID() % multiple == 0){
        list.add(parent.getSID());
        return list;
    }

    list = getPaths(parent.getRightChild(),5);

    if(list != null)
        list.add(parent.getSID());

    return list;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:46:48.543

问题是，当你这样做时：

```
list = getPaths(parent.getRightChild(), 5); 
```

您覆盖此处返回的值：

```
list = getPaths(parent.getLeftChild(), 5); 
```

您可能需要`LinkedList<LinkedList<Integer>>`存储所有路径。

**一个全局列表：**

```
LinkedList<LinkedList<Integer>> globalList;
LinkedList<Integer> getPaths(Node parent, int multiple) 
```

**或传递列表：**

```
LinkedList<Integer> getPaths(Node parent, int multiple,
                             LinkedList<LinkedList<Integer>> bigList) 
```

但是，要使其正常工作将需要对您当前的程序进行相当多的更改，您需要在某些点复制列表，并且可能会切换填充列表的顺序（将其从自下而上的填充更改为顶部-向下）。

# python - 检查模板Django中变量中字符串的某些部分

> ID：15199668
> 
> 赞同：1
> 
> 时间：2013-03-04T10:42:53.347
> 
> 标签：python, django, django-templates

嗨，我在模板名称中获得了站点域，其中

> {{request.META.HTTP_HOST}}

我从中得到了这样的价值

> pydev.aviesta.com

和

> pydev.aviesta.com.mx

我需要为两个域显示不同的数据，但因为这是开发服务器，所以我不能使用完整的域名称进行比较我可以只检查 .mx 或 .com，所以去现场时不会有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:56:05.107

您可能需要[自定义过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)。

```
@register.filter(name='split')
def split(value, arg):
    return value.split('.')[-1] 
```

用它作为`{{request.META.HTTP_HOST|split}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:11:18.897

我用js解决了

```
<script>
 var str = location.host;
        if( str.search(".mx") > 0 ){
        var dom = 'mx';
        }else{
        var dom = 'com';
        } </script> 
```

# linux - 如何在初始化期间挂载 filesystem.git 目录？

> ID：15199669
> 
> 赞同：3
> 
> 时间：2013-03-04T10:43:05.170
> 
> 标签：linux, git, filesystems, mount, unpack

我有一个可引导的 ISO 文件，其中包含一个`filesystem.git`又包含以下结构：

```
dr-xr-xr-x 2 root root 2048 Mär  1 17:10 branches/
-r--r--r-- 1 root root  115 Mär  1 17:10 config
-r--r--r-- 1 root root   73 Mär  1 17:10 description
-r--r--r-- 1 root root   23 Mär  1 17:10 HEAD
dr-xr-xr-x 2 root root 2048 Mär  1 17:10 hooks/
dr-xr-xr-x 2 root root 2048 Mär  1 17:10 info/
dr-xr-xr-x 4 root root 2048 Mär  1 17:10 objects/
-r--r--r-- 1 root root   85 Mär  1 17:10 packed-refs
dr-xr-xr-x 4 root root 2048 Mär  1 17:10 refs/
-r--r--r-- 1 root root   82 Mär  1 17:10 shallow 
```

对象树中似乎有一个打包的 Debian 文件系统，并且`initramfs`图像似乎有一个程序可以将其解压缩并挂载`filesystem.git`为根文件系统，但我不知道如何。

谁能解释一下，这是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:29:54.330

显然[webconverger](http://webconverger.org)已经创建了他们的自定义[`fuse`](http://fuse.sf.net)文件系统：[https](https://github.com/Webconverger/git-fs) ://github.com/Webconverger/git-fs 。在我看来，这是他们分发更新的方式：执行 a`git-fetch`然后更新 以`initramfs`将他们的文件系统指向`git-fs`新对象。您需要阅读[源代码](https://github.com/Webconverger)（或简单地询问其中一位开发人员......）以了解事情是如何运作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:01:29.187

它不是一个文件系统，它是一个[git](http://git-scm.com/)存储库，所以它不会像这样挂载。

推测它是从安装媒体克隆到正在安装的系统的根目录，`git clone`然后`.git`删除该目录，或者使用较低级别的 git 命令执行一些等效操作来克隆它，而无需创建存储库的本地副本在`.git`目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:46:12.437

要回答其他有同样问题的人的问题，您可以使用[git-fs](https://github.com/Webconverger/git-fs)结合[FUSE](http://fuse.sourceforge.net/)来挂载 *.git 目录，正如 Michael Wild 所指出的那样。

# javascript - javascript 在输入框被勾选时检查复选框 - 复选框数组 []

> ID：15199670
> 
> 赞同：1
> 
> 时间：2013-03-04T10:43:05.967
> 
> 标签：javascript, arrays, checkbox, foreach

我有一个简单的 javascript 问题。我有一个复选框和一个输入框。

当用户在输入框（onkeydown）中输入文本时，我希望它检查行中的相应复选框。

我的复选框都为 array 共享相同的名称`checkbox[]`。

我的简化语法是：

```
<table>
<?php if(isset($records)) : foreach ($records as $row) : ?>
    <tr>
        <td>
            <input type=checkbox name="editcustomer[]" id="editcustomer[]" value="<?php echo $row->id ?>">
        </td>
        <td>
            <input type="text" name="customer_name_<?php echo $row->id ?>" id="customer_name_<?php echo $row->id ?>" value="<?php echo $row->customer_name ; ?>" onclick="document.getElementById('editcustomer<?php echo $row->id ?>').checked = true;">
        </td>
    <tr>
<?php endforeach ; ?>
</table> 
```

由于复选框的名称不是唯一的，只有它的值我如何告诉javascript要检查哪个复选框？

```
<input type="text" name="customer_name_<?php echo $row->id ?>" id="customer_name_<?php echo $row->id ?>" value="<?php echo $row->customer_name ; ?>" onclick="document.getElementById('editcustomer<?php echo $row->id ?>').checked = true;"> 
```

一如既往的帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:56:08.913

**HTML**

```
<input type="checkbox" name="checkbox[]"/>
<input type="text" name="name1" id="name1" />
<br>
 <input type="checkbox" name="checkbox[]"/>
<input type="text" name="name2" id="name2" />
 <br>
 <input type="checkbox" name="checkbox[]" />
<input type="text" name="name3" id="name3" /> 
```

**jQuery**

```
$(':text').change(function(){
    $(this).prev(':checkbox').attr('checked','true');
}); 
```

希望这可以帮助。问候。

# iphone - 你的第二个 iOS 应用程序：在两个不同的视图中编辑一个对象

> ID：15199673
> 
> 赞同：3
> 
> 时间：2013-03-04T10:43:11.003
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在阅读 Apple 提供的教程，并尝试改进[“我的第二个 iOS 应用程序”](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html)，这是一款用于观鸟的应用程序。 *（有一个 MasterView，其中列出了所有输入的目击。如果单击一个，您将被定向到目击的 DetailView。您可以添加目击并要求输入名称和位置。）*

我想分离输入鸟类名称和位置的视图。

所以我有两个视图（一个用于输入名称，一个用于输入位置）和一个要存储的对象。

在文件中`BirdSighting.m`我添加了以下方法

```
-(id)initWithNameOnly:(NSString *)name date:(NSDate *)date
{
    self = [super init];
    if (self) {
        _name = name;
        _date = date;
        return self;
    }
    return nil;
} 
```

和

```
-(id)setLocation:(NSString *)location
{
    if (self) {
        _location = location;
        return self;
    }
    return nil;
} 
```

在`AddSightingNameViewController.m`我实现了以下代码

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ToLocation"])
    {
        if ([self.birdNameInput.text length])
        {
            BirdSighting *sighting;
            NSDate *today = [NSDate date];
            sighting = [[BirdSighting alloc] initWithNameOnly:self.birdNameInput.text date:today];
            self.birdSighting = sighting;
        }
    }
} 
```

用于输入名称的视图通过 push segue 引导到位置视图。其他方面没有太大变化。

**现在如何将第一个视图中生成的对象传递给第二个？**以及如何`setLocation`在这个特定对象上调用方法`AddSightingLocationViewController.m`？我必须定义不同的属性吗？输入位置后，如何最终在 MasterView 中显示具有正确数据的对象？

由于这段代码还没有工作，我什至不知道它是否工作，我想做什么。所以请温柔，如果这是糟糕的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:14:26.597

这是我一直在使用的方法：

首先，您需要在目标视图控制器中添加一个属性，以保存您要传递的对象：

```
@property (strong, nonatomic) BirdSighting *newSighting; 
```

然后将第一个视图控制器中的 prepareForSegue 方法更改为以下内容：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ToLocation"])
    {
        if ([self.birdNameInput.text length])
        {
            BirdSighting *sighting;
            NSDate *today = [NSDate date];
            sighting = [[BirdSighting alloc] initWithNameOnly:self.birdNameInput.text date:today];
            self.birdSighting = sighting;

            // Get destination view
            YourDestinationViewController *vc = (YourDestinationViewController *)segue.destinationViewController;

            // Pass birdSighting object to your destination view controller
            [vc setNewSighting:self.birdSighting];

        }
    }
} 
```

我想我最初是从这个[问题中得到这个方法的](https://stackoverflow.com/a/7865100/1124373)

还值得注意的是，BirdSighting 类在它的 .h 文件中有一个位置 @property 并且您会注意到 .m 文件中的 @synthesize 行。

@synthesize 指令自动为您创建访问器方法：

```
@property (nonatomic, copy) NSString *location; 
```

自动生成以下方法（但在文件中不可见）：

```
- (NSString *)location;

- (void)setValue:(NSString *)location; 
```

因此，您无需使用以下命令覆盖 BirdSighting.m 文件中的位置设置方法：

```
-(id)setLocation:(NSString *)location 
```

如果您删除该方法（注意它应该返回 void 而不是 id），您现在应该能够通过以下方式访问 BirdSighting 对象中的位置变量：

```
// In this example we are accessing a BirdSighting @property (hence the use of self.sighting)
// @property (strong, nonatomic) BirdSighting *sighting;

// Getter - returns (NSString *)location of the BirdSighting object
[self.sighting location];

// Setter - sets the location property of the BirdSighting object to 'newLocation'
[self.sighting setLocation:newLocation]; 
```

希望这可以为您解决一些问题！

# python - 从二进制文件中读取 UTF-8 字符串

> ID：15199675
> 
> 赞同：3
> 
> 时间：2013-03-04T10:43:29.293
> 
> 标签：python, utf-8

我有一些文件包含一堆不同类型的二进制数据，我正在编写一个模块来处理这些文件。

其中，它包含以下格式的 UTF-8 编码字符串：2 字节大端字符串长度（我使用*struct.unpack* () 解析），然后是字符串。由于它是 UTF-8，因此字符串的字节长度可能大于*stringLength*，如果字符串包含多字节字符（更不用说弄乱文件中的所有其他数据），执行 read(stringLength) 会变得很短.

如何从文件中读取*n 个*UTF-8 字符（与*n*个字节不同），同时了解 UTF-8 的多字节属性？我已经用谷歌搜索了半个小时，我发现的所有结果要么不相关，要么做出了我无法做出的假设。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T11:23:19.160

给定一个文件对象和一些字符，您可以使用：

```
# build a table mapping lead byte to expected follow-byte count
# bytes 00-BF have 0 follow bytes, F5-FF is not legal UTF8
# C0-DF: 1, E0-EF: 2 and F0-F4: 3 follow bytes.
# leave F5-FF set to 0 to minimize reading broken data.
_lead_byte_to_count = []
for i in range(256):
    _lead_byte_to_count.append(
        1 + (i >= 0xe0) + (i >= 0xf0) if 0xbf < i < 0xf5 else 0)

def readUTF8(f, count):
    """Read `count` UTF-8 bytes from file `f`, return as unicode"""
    # Assumes UTF-8 data is valid; leaves it up to the `.decode()` call to validate
    res = []
    while count:
        count -= 1
        lead = f.read(1)
        res.append(lead)
        readcount = _lead_byte_to_count[ord(lead)]
        if readcount:
            res.append(f.read(readcount))
    return (''.join(res)).decode('utf8') 
```

测试结果：

```
>>> test = StringIO(u'This is a test containing Unicode data: \ua000'.encode('utf8'))
>>> readUTF8(test, 41)
u'This is a test containing Unicode data: \ua000' 
```

在 Python 3 中，将文件对象包装在一个[对象](https://docs.python.org/3/library/io.html#io.TextIOWrapper)中，并将解码留给本机和高效的 Python UTF-8 实现当然*要容易得多。*[`io.TextIOWrapper()`](https://docs.python.org/3/library/io.html#io.TextIOWrapper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:51:30.973

UTF-8 中的一个字符可以是 1byte,2bytes,3byte3。

如果您必须逐字节读取文件，则必须遵循 UTF-8 编码规则。 [http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

大多数时候，您只需将编码设置为 utf-8，然后读取输入流。

你不需要关心你读了多少字节。

# javascript - 如何在单击提交按钮时在服务器端的 aspx 页面中获取 jQuery 添加值？

> ID：15199676
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:43:30.257
> 
> 标签：javascript, jquery, asp.net

当用户单击“添加新”按钮时，我想在页面中添加更多文本框，以便他可以添加 n 个值。我将使用 jQuery 来做到这一点。但是在提交单击时，我想从服务器端的所有字段中获取值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:47:11.620

您可以使用 javascript 将值存储在具有 runat="server" 的隐藏字段中，并在 asp.net 的服务器端代码中使用该隐藏字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:45:44.623

用于`jQuery.clone()`克隆输入框。

请记住，此输入框将采用数组形式，如下所示

```
<input name="clonedbox[]" 
```

然后将其发送到`submit`函数或`ajax`调用中。

# powershell - 调用命令没有按预期工作

> ID：15199683
> 
> 赞同：2
> 
> 时间：2013-03-04T10:43:43.060
> 
> 标签：powershell, invoke-command

我正在尝试使用 invoke-command 使用此代码查找特定进程

```
Invoke-Command -ComputerName $selected_server.ServerName -ArgumentList $selected_server.ProcessId -ScriptBlock {Get-Process -Name "winlogon" | where{$_.Id -like $args[0]} } 
```

该命令不起作用，但如果我使用其中包含的数值 `$selected_server.ProcessId`8900，而不是使用`$args[0]`，它可以工作。

我也尝试执行这个命令来验证变量是否被正确读取，看起来是这样

```
Invoke-Command -ComputerName $selected_server.ServerName -ArgumentList $selected_server.ProcessId -ScriptBlock {$args[0]; $args[0].gettype().fullname}

> 8900
> System.Int32 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:58:44.433

不知道为什么，但这有效（也许`$args`在`foreach-object scriptblock`is `out of scope`）：

```
Invoke-Command -ComputerName $selected_server.ServerName `
-ArgumentList $selected_server.ProcessId -ScriptBlock `
{param ($x) Get-Process -Name "winlogon" | where{$_.Id -like $x} } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:38:28.463

CB 的答案很好，可以在任何可以远程处理的地方（v2.0 及更高版本）工作，但如果您使用的是 PowerShell 3.0 -`Using`范围修饰符，还有另一种（更简单）的方法。看[`about_Remote_Variables`](http://technet.microsoft.com/en-us/library/jj149005.aspx)

```
Invoke-Command -ComputerName $selected_server.ServerName -ArgumentList $selected_server.ProcessId -ScriptBlock {Get-Process -Name "winlogon" | where{$_.Id -like  $Using:selected_server.ProcessId} } 
```

# iphone - 在按下状态和选择状态时更改 UITableViewCell 的颜色

> ID：15199687
> 
> 赞同：2
> 
> 时间：2013-03-04T10:43:49.837
> 
> 标签：iphone, uitableview, android-selector

我正在使用带有 customCell 的 UITableView（CustomCell 有 2 个标签和一个 ImageView）。

在正常模式下，我需要所有单元格的白色。

如果用户按下特定单元格，则该单元格的颜色应为灰色（其余单元格应为白色）

如果用户释放相同的单元格，则该单元格的颜色应为橙色（其余单元格应为白色）

我怎样才能弄清楚？

我已经尝试过使用 setSelectedBackground、willSelectRowAtIndexPath 和 Gestures 方法。但是看不到同一个单元格的这 3 种颜色状态。这两个州中的任何一个都在合作。

任何想法我怎样才能实现相同的功能？

我已经使用选择器在 android 中实现了相同的功能。我希望在 iPhone 中具有相同的功能。有什么帮助吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T10:59:01.937

在您的自定义单元格中编写这两个方法

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    self.contentView.backgroundColor=[UIColor greenColor];
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    self.contentView.backgroundColor=[UIColor orangeColor];

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:48:05.157

如果你想要灰色那么

```
cell.selectionStyle=UITableViewCellSelectionStyleGray; 
```

或者你可以设置背景颜色`didSelectRow`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView reloadData];
    UITableViewCell *cell=(UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
    [cell setBackgroundColor:[UIColor orangeColor]];
} 
```

如果您不想重新加载 tableData 那么您必须保存您的 previousSelected Index 值然后

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Make oreange cell
    UITableViewCell *presentCell=(UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
    [presentCell setBackgroundColor:[UIColor orangeColor]];

    //make your previous cellBackgrod to clear, you can make it white as per your requirement
    UITableViewCell *previouscell=(UITableViewCell*)[tableView cellForRowAtIndexPath:previousSelectedCellIndexPath];
    [previouscell setBackgroundColor:[UIColor clearColor]];

    //save your selected cell index
    previousSelectedCellIndexPath=indexPath;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-07T13:33:15.990

一个非常优雅的解决方案是覆盖 tableViewCells 的 setHighlighted: 方法。

```
- (void)setHighlighted:(BOOL)highlighted {
  [super setHighlighted:highlighted];
  if(highlighted) {
    _backView.backgroundColor = [UIColor blueColor];
  }
  else
  {
    _backView.backgroundColor = [UIColor blackColor];
  }
} 
```

当用户点击单元格时， UITableView 将自动将选定的单元格`highlighted`@property 设置为 YES。

`[_tableView deselectCellAtIndexPath:indexPath animated:NO];`如果您想取消选中您的单元格，请不要忘记调用您的 didSelect tableView 委托方法！

# xcode - 通过 Applescript 在 Xcode 4 中添加文件断点

> ID：15199689
> 
> 赞同：4
> 
> 时间：2013-03-04T10:43:53.980
> 
> 标签：xcode, applescript, breakpoints

我正在尝试使用 AppleScript 向当前 XCode 项目中的选定 .m 文件添加断点。

现在我被困住了，因为 AppleScript 在尝试添加文件断点时不断返回“缺失值”。

我当前的 AppleScript 看起来像这样（其中 PROJECTNAME 显然是我当前项目的名称）：

```
tell application "Xcode"
-- Get the name of the selected document
set selectedFile to text document 1 whose name ends with (word -1 of (get name of window 1))
set nameOfSelectedFile to name of selectedFile

set fileReference to missing value
set activeProject to project "PROJECTNAME"

-- Iterate over the main groups of the project
tell activeProject
    repeat with currentGroup in groups
        set nameOfGroup to name of currentGroup
        -- Iterate over the file within the main groups
        repeat with currentFile in file references of currentGroup
            set nameOfFile to name of currentFile
            -- If the current iterated file's name equals the file of the nameOfSelectedFile we've got the fileReference
            if nameOfFile is equal to nameOfSelectedFile then
                set fileReference to currentFile
            end if

        end repeat
    end repeat
end tell

if fileReference is equal to missing value then
    return "No match found"
else
    -- Try to add file breakpoint to the active workspace document
    set awd to active workspace document
    tell awd
        make new file breakpoint with properties {line number:21, file reference:fileReference, automatically continue:true, enabled:true, name:"test", condition:"none", id:"test"}
    end tell
end if
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T22:19:13.543

我相信 id 和 name 是只读属性，我建议你尝试删除它们然后执行。

# c++ - CMake 在 linux 中构建共享对象 .so 文件

> ID：15199694
> 
> 赞同：2
> 
> 时间：2013-03-04T10:44:19.787
> 
> 标签：c++, linux, windows, cmake

任务 -> 运行 Cmake 在 windows 中生成 dll，在 linux 中生成共享对象（.so 文件）。

我正在将代码从 windows 移植到 linux 。我已经对源代码进行了必要的更改。我曾尝试更改 CMakeLists.txt 文件，但是当我尝试这样做时，它会抱怨“找不到源文件”。请大家指出我在哪里犯了错误。CMakeList.txt 如下所示。cmake 在 Windows 中运行良好，但在 linux 中它抱怨错误。
我已经评论了几行并在 CMakeLIsts.txt 中添加了一行以使其在 Linux 中工作，但它不起作用。

```
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )
CMAKE_POLICY( SET CMP0017 NEW ) 

PROJECT( disk_space_model )
INCLUDE( ../libs/helper_functions.cmake )
INCLUDE_THIRD_PARTY_SFC()

SET(    HEADER_FILES 
        stdafx.h
        INS_sensor_model.h
)

SET(    SOURCE_FILES
        Disk_space_model.cpp
)

SET(    RESOURCE_FILES 
        "Disk Space DLL.rc"
        resource.h
)

COMMON_SETUP()
SETUP_Lab_LIB_FILES( lib_foo lib_boo_files lib_platform lib_utils )

#ADD_DEFINITIONS(-D_USRDLL -DINSSENSORDLL_EXPORTS)
#ADD_LIBRARY( disk_space_model SHARED ${SOURCE_FILES} ${HEADER_FILES} ${RESOURCE_FILES} ${CMAKE_HELPER_FILES} )
set(CMAKE_SHARED_LINKER_FLAGS "-Wl,--export-all-symbols")
ADD_LIBRARY( disk_space_model [ STATIC | SHARED ] ${SOURCE_FILES} ${HEADER_FILES} ${RESOURCE_FILES}  ${CMAKE_HELPER_FILES} )
SET_OUTPUT_DIRS( disk_space_model )
TARGET_LINK_LIBRARIES( disk_space_model ${LIB_FILES} ) 
```

以下是我在配置后生成并在 CMake-gui 上生成时收到的以下错误

```
 4 bit compiler
-- Configuring done
CMake Error at CMakeLists.txt:37 (ADD_LIBRARY):
  Cannot find source file:

    [

  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp
  .hxx .in .txx

CMake Error in CMakeLists.txt:
  Cannot find source file:

    STATIC

  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp
  .hxx .in .txx

CMake Error in CMakeLists.txt:
  Cannot find source file:

    |

  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp
  .hxx .in .txx

CMake Error in CMakeLists.txt:
  Cannot find source file:

    SHARED

  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp
  .hxx .in .txx

CMake Error in CMakeLists.txt:
  Cannot find source file:

    ]

  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp
  .hxx .in .txx

-- Build files have been written to: /home/mydir/svn/proj1/apps/disk space
make: *** [cmake_check_build_system] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:18:00.833

由于这个原因，它被打破了：

```
ADD_LIBRARY( disk_space_model [ STATIC | SHARED ] ${SOURCE_FILES} ${HEADER_FILES} ${RESOURCE_FILES}  ${CMAKE_HELPER_FILES} ) 
```

`[ STATIC | SHARED ]`我猜你是从文档中复制粘贴的。这应该是一个`STATIC`或`SHARED`（在你的情况下是后者）的选择。

# php - dom替换整个节点

> ID：15199695
> 
> 赞同：0
> 
> 时间：2013-03-04T10:44:21.757
> 
> 标签：php, dom

现在，我有这个：

```
$text = $row->text;
$dom = new DOMDocument();
$dom->loadHTML($text);
$tags = $dom->getElementsByTagName('img');

foreach ($tags as $tag) {
    $eg = $tag->getAttribute('data-easygal');
    $src = $tag->getAttribute('src');
    $values = explode("_",$eg);
    $display = $this->prepareAlbum($values[0],$values[1],$src);
}
$row->text = $text; 
```

有没有办法用 $display 字符串中的内容替换整个节点 $tag？例如，我似乎无法找出如何 str_replace 节点。曾经有 preg_replace 但即使它在家里工作也不能在客户端服务器上正常工作（以及一些来自 preg 和 html 的 php 社区的即时愤怒）

尝试搜索董事会，但没有找到我需要的东西：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:50:55.967

就像是：

```
foreach($tags as &$tag) {
    ...
    $tag = new DomNode();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:51:31.540

尝试

```
$tag-> parentNode ->replaceChild($newNode, $tag); 
```

应该将`$tag`节点替换为`$newNode`- 您以通常方式创建的 DOM 节点。

# javascript - jQuery Chosen 插件 - 手动选择选项

> ID：15199696
> 
> 赞同：0
> 
> 时间：2013-03-04T10:44:21.913
> 
> 标签：javascript, jquery-plugins, jquery-chosen

我一直在尝试在 Chosen 插件中手动选择一些选项。

**为什么我需要这样的东西？**

我的概念是：假设用户想为视频添加一些标签，当他将视频插入数据库时​​，标签也会保存在数据库中。当他想编辑这个视频时，我必须从数据库中查询这些标签并将它们展示给用户，以便他可以编辑/删除/添加新的。

**我的问题：**

有没有办法把这些标签放在一个数组中，然后把它们作为一个已经选择的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:15:00.063

`selected`当您从数据库中获取现有标签时，只需添加该属性。假设一个视频用`a`and标记`b`，所以当你显示`select`列表时，它看起来像这样：

```
<select id="assets" data-placeholder="Choose assets" class="chzn-select" multiple style="width:350px;">
    <option value="a" selected>a</option>
    <option value="b" selected>b</option>
    <option value="c">c</option>
    <option value="d">d</option>
    <option value="e">e</option>
    <option value="f">f</option>
    <option value="g">g</option>
</select> 
```

# python - Django py.test 找不到设置模块

> ID：15199700
> 
> 赞同：19
> 
> 时间：2013-03-04T10:44:45.773
> 
> 标签：python, django, pytest

我确实有以下项目结构

```
base
    __init.py
    settings
        __init__.py
        settings.py
    tests
        pytest.ini
        test_module.py 
```

我的`pytest.ini`样子是这样的：

```
[pytest]
#DJANGO_SETTINGS_MODULE =base.settings.settings 
```

我的`test_module.py`样子是这样的：

```
def test_django():
    from base.settings import settings as base_settings
    from django.conf import settings as django_settings
    assert 3==5 
```

当我现在运行时：

```
py.test 
```

它将毫无问题地运行导入，并将在`assert 3==5`（如预期的那样）引发错误。这告诉我基础已打开`sys.path`并且`base.settings.settings`可以导入。

现在我`test_module.py`改为：

```
def test_django():
    from base.settings import settings as base_settings
    from django.conf import settings as django_settings
    print django_settings.xxx
    assert 3==5 
```

当我现在运行时：

```
py.test --ds=base.settings.settings 
```

我得到错误：

> 错误：无法导入设置“base.settings.settings”（是否在 sys.path 上？）：没有名为 base.settings.settings 的模块。

当我不通过命令行设置设置，而是通过`pytest.ini`文件（通过取消注释该行）设置设置时，效果相同。

看来我在这里错过了什么？？？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T20:21:04.280

因为 django.conf.settings 是惰性的，它只会在您尝试访问它时尝试导入设置模块。这就是为什么当您简单地导入设置对象时您的测试不会失败的原因。

您的问题已经在这里讨论过：[https ://github.com/pelme/pytest_django/issues/23](https://github.com/pelme/pytest_django/issues/23)

这是 pytest 的问题，而不是 pytest-django 本身的问题。Pytest 出于某种原因从 sys.path 中删除了当前目录。解决它应该很容易。

**解决方案1：**

```
PYTHONPATH=`pwd` py.test 
```

**解决方案2：**

将此添加到您的 conftest.py （我假设 conftest.py 与您的应用程序位于同一目录中）：

```
import os
import sys

sys.path.append(os.path.dirname(__file__)) 
```

**解决方案 3（如果您使用的是 virtualenv 包装器）：**

当你开始一个新项目时，只需通过在项目目录中执行此行将项目的根目录添加到 virtualenv 的 PYTHONPATH：

```
add2virtualenv . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:30:32.690

[从文档](http://pytest-django.readthedocs.org/en/latest/configuring_django.html#command-line-option-ds-settings)中，它似乎`base`已经在你的路径中 - 所以也许你想使用

```
py.test --ds=settings.settings 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:34:05.460

为什么您的设置中有 3 个 "t" ？它应该是设置而不是设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:34:28.033

您在没有参数的情况下运行第二个程序，`--ds=base.settings.settings`而不是第一个程序。这就是错误的来源。

此外，在导入同名代码时，`settings`我会很想执行以下操作：

```
from base.settings import settings as foo
from django.conf import settings as bar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-15T08:05:00.900

我遇到过同样的问题。`pytest -s <project_dir>`对我来说很好。

# oop - DI原则和“程序到接口，而不是实现”有什么区别？

> ID：15199702
> 
> 赞同：1
> 
> 时间：2013-03-04T10:44:48.353
> 
> 标签：oop, inversion-of-control

我不明白依赖倒置与 Gof 书中的著名短语“编程接口，而不是实现”之间的区别。DIP 的定义阐明了以下原则：

1.  高级模块不应该依赖于低级模块。两者都应该依赖于抽象。
2.  抽象不应依赖于细节。细节应该取决于抽象。

似乎这两个原则都做同样的事情：将接口与实现分离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:00:51.360

在 OOP 的一般意义上，“程序接口，而不是实现”是一个很好的建议（即使您的语言不支持接口的概念）。这个想法是发送消息的对象不应该关心接收者的细节（例如，哪个类是实例或者它是否属于给定的层次结构），只要它可以回答一组消息（并因此执行一组行为）。如果您查看 GoF 中的模式，主要的底线之一是，只要您针对接口进行编程，您就可以用另一个目标对象替换目标对象，而无需更改客户端中的任何内容。

关于[依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)，我认为它只是前一个想法的具体应用。在分层架构的上下文中，您将编程的想法应用于接口而不是具体的类，目的是将较低层与较高层解耦，以获得灵活性和可重用性。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:41:49.530

假设您`Computer` `class`定义如下：

```
public class Computer
{
    public string OwnerName{get; set;}

    public int RAMCapacity{get; set;} //Hardware based property

    public string OperatingSystem{get; set;} //Software based property
} 
```

现在，编程`Interface`说根据上面的代码注释，您应该创建一个`ISoftwareComponents`和`IHardwareComponents`接口并将这些属性移动到相应的接口并在`Computer`类中实现这两个接口，如下所示：

```
public interface ISoftwareComponents
{
    string OperatingSystem{get; set;}
}

public interface IHardwareComponents
{
    int RAMCapacity{get; set;}
}

public class Computer : ISoftwareComponent, IHardwareComponents
{
    public string OwnerName{get; set;}

    public int RAMCapacity{get; set;} //IHardwareComponents property

    public string OperatingSystem{get; set;} //ISoftwareComponents property
} 
```

现在`Computer`该类的客户端代码可以使用如下代码：

```
Computer comp = new Computer();

//software requirements can use the below code:
string os = ((ISoftwareComponents)comp).OperatingSystem; // and, other variations by method calls

//hardware requirements can use the below code
int memory = ((IHardwareComponents)comp).RAMCapacity; //and, other variations 
```

您也可以只将计算机的软件和硬件接口部分传递给其他类和方法，如下所示：

```
public void SetHardware(IHardwareComponents comp)
{
    comp.RAMCapacity = 512;
} 
```

更多地探索上述示例，您会了解更多。

# file-upload - 使用 cffile 上传时可以更改文件名吗？

> ID：15199703
> 
> 赞同：4
> 
> 时间：2013-03-04T10:44:48.487
> 
> 标签：file-upload, coldfusion, upload, cfml

我目前正在尝试创建一个页面，乐队可以将他们自己的徽标上传到网站上，以便在需要的地方使用。目前，我创建了一些东西，允许用户将徽标上传/删除到分配的目录。但我想要做的不是创建一个band_logo 字段，而是拥有它，以便乐队徽标文件名成为数据库中乐队的ID。由于这是独一无二的，这意味着我没有冗长的过程来创建一个字段来保存他们的徽标名称。我知道有一个`cffile action="rename"`选择，但这是一个更冗长的做事过程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T11:44:05.357

是的，如果您在其中提供文件名，`destination`它将在上传时重命名文件。

```
<cffile action="upload" destination="/path/to/some/directory/#session.bandName#.jpg" ... /> 
```

请参阅[在上传文件时重命名文件（CFFILE 的实际工作原理）](http://blogs.adobe.com/cantrell/archives/2004/07/renaming_files.html)

顺便说一句，在谷歌搜索“ [cffile upload 上的名称文件](https://www.google.com/search?q=name%20file%20on%20cffile%20upload&aq=f&oq=name%20file%20on%20cffile%20upload&aqs=chrome.0.57j60j61j62l2j60.5286&sourceid=chrome&ie=UTF-8)”发现那篇文章......

但是，您仍然可能希望使用

```
<cffile action = "upload" ...>
 then 
<cffile action = "rename" ...> 
```

因为除非您在客户端获取文件扩展名并将其传递给服务器，否则如果他们不上传文件扩展名`.jpg`或您指定的任何扩展名，硬编码文件扩展名可能会导致问题。它没有那么多代码或开销，而且更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T17:16:17.403

```
<cfif #ServerFileExt# EQ 'jpg'>
<cffile action="upload" destination="/path/to/some/directory/#session.bandName#.jpg" />

<cffile action="rename"
source="path/to/some/directory/#session.bandName#.jpg"
destination="path/to/some/directory/#getData.bandsID#.jpg">

<cfelse>

   <cflocation addtoken="no" url="back to form upload page"> 

 </cfif> 
```

# windows - 詹金斯：执行调用其他cmd的windows cmd？

> ID：15199709
> 
> 赞同：1
> 
> 时间：2013-03-04T10:45:09.330
> 
> 标签：windows, jenkins, cmd

在我的 Jenkins 工作中，我想执行一个在构建期间从源仓库同步的 windows cmd，并且这个 cmd 也会调用从源仓库同步的其他 cmd。由于无法找到具有相对路径的其他 cmd，cmd 运行时出错。看起来根本原因是我无法在 Jenkins 作业配置中为初始 cmd 设置起始位置，在我的情况下这不是工作区根目录。有任何想法吗？

BR

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:41:06.590

首先尝试 cd 到适当的目录：

```
cd %WORKSPACE% && <your command> 
```

这是[Hudson Environment Variables](http://wiki.hudson-ci.org/display/HUDSON/Building+a+software+project)，应该与 Jenkins 相同。

# javascript - 如何序列化选中的复选框？

> ID：15199710
> 
> 赞同：0
> 
> 时间：2013-03-04T10:45:13.783
> 
> 标签：javascript, ruby, sinatra

我有一个带有复选框的表格，由于某种原因不包含表格。我想通过附加到主表单序列化数据来获取所有选中的复选框并将它们发送到服务器。这是我的做法：

```
function f1(){
  var data = '';
  $(".chk").each(function(){
    if($(this).is(":checked")){
      data += "" // what should be here?
    }
  });

 return data;
} 
```

复选框如下所示：

```
<input type="checkbox" class="chk" name="items[]" value="123"> 
```

其中 value 是唯一的 id。

我想`data +=`应该像`items[0]=1&item[1]=13&item[2]=445`

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:52:14.707

```
function f1(){
  var data = '';
  var i = 0;
  $(".chk").each(function(){
    if($(this).is(":checked")){
      if(i==0){
       data+="?items["+i+"]="+$(this).val();
      }else{          
       data+="&items["+i+"]="+$(this).val();
      }
    }
i++;
  });

 return data;
} 
```

# android - SlidingDrawer 动画不可见

> ID：15199713
> 
> 赞同：1
> 
> 时间：2013-03-04T10:45:22.987
> 
> 标签：android, surfaceview, slidingdrawer, glsurfaceview

`SlidingDrawer`我对动画有一些问题。我有一个`View`

## activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <RelativeLayout 
        android:id="@+id/rlGL"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </RelativeLayout>

    <SlidingDrawer
        android:id="@+id/slidingDrawer1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:topOffset="900dp"
        android:content="@+id/content"
        android:handle="@+id/handle"
        android:orientation="horizontal" 
        android:animateLayoutChanges="false">

        <ImageView
            android:id="@+id/handle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/add" />

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:measureWithLargestChild="true"
            android:orientation="vertical" 
            android:background="#171717">

        <Button
            android:id="@+id/bOk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/ok"  
            android:textSize="48sp">

        </Button>

    </LinearLayout>
    </SlidingDrawer>

</FrameLayout> 
```

这个“空”`RelativeLayout`用于`SurfaceView`（用于相机预览）和`GLSurfaceView`（用于具有透明背景的 OpenGL 场景）。有一个代码：

## MainActivity.java

```
...
setContentView(R.layout.activity_main);

relLayout = (RelativeLayout) findViewById(R.id.rlGL);

mGLSurfaceView = new MyGlSurfaceView(this); 
mGLSurfaceView.getHolder().setFormat(PixelFormat.TRANSLUCENT);
relLayout.addView(mGLSurfaceView, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));

preview = new SurfaceView(this);        
surfaceHolder = preview.getHolder();
surfaceHolder.addCallback(this);
relLayout.addView(preview, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
... 
```

问题是，单击抽屉的手柄图像后，它会消失一会儿（动画运行时），然后出现在打开状态。为什么会这样？

# actionscript-3 - Flex 编译器和大小优化

> ID：15199714
> 
> 赞同：2
> 
> 时间：2013-03-04T10:45:26.117
> 
> 标签：actionscript-3, flash, apache-flex

为了优化生成的 swf 大小，flex 编译器不会打包项目中从未引用的类（这是我被告知的，但我在文档中找不到任何引用）。

我想知道是否有办法获得排除项目的列表。

此列表将帮助我清理我的项目并删除未使用的资源

我查看了链接报告，但它列出了包含的文件。有没有办法生成排除项目列表（mxml，as，assets，...）。

*注意：我知道我可以解析链接报告并将其与我的项目文件进行比较，但可能有一种最简单和更有效的方法......我希望......*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:14:08.317

你可以试试[FlexPMD 。](http://sourceforge.net/adobe/flexpmd/home/Home/)它旨在用于此类目的。

# android - 应用程序中的侦听器和切换活动

> ID：15199718
> 
> 赞同：2
> 
> 时间：2013-03-04T10:45:29.470
> 
> 标签：android

我有一个多活动应用程序。假设我在活动 A 中为某种类型的事件设置了一个侦听器，但随后在事件触发侦听器之前切换到不同的活动 B（在同一应用程序中）。那个监听器的状态是什么？它总是被破坏吗？还是取决于事件的类型？还是取决于监听器是否设置在活动 A 的主 UI 线程中？还是其他一些条件？

**编辑：**我问的原因是我希望在我的应用启动屏幕开始时询问各种应用内购买项目的购买状态。这涉及煽动一些代码并为“ok_here_is_the_answer()”设置一个侦听器。问题是我担心得到答案可能需要比启动屏幕活动的持续时间更长的时间。在这种情况下，我是否必须在我的应用程序的第二个活动中重新开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:26:11.260

如果您的侦听器是在其中创建的并且与它的上下文紧密相关，那么当活动即进入后台`Activity A`时它将被破坏。`pause`

如果您想要执行应该跨活动生存的操作，您可以在`application context`或 在专用的`service`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:15:22.177

[这可能不是您问题的答案，但出于许多充分的理由](https://stackoverflow.com/a/8432359/969325)，您不应该使用启动活动（甚至启动启动）。我建议您改用全屏对话框，这也可以解决您的问题。

但是关于你的问题，这取决于我们在谈论什么样的听众？任何涉及上下文的事情都结束了。处理程序、线程等仍在运行（afaik）。

# java - Android 和我的 PostgreSQL 数据库建议

> ID：15199719
> 
> 赞同：2
> 
> 时间：2013-03-04T10:45:30.580
> 
> 标签：java, android, postgresql

对于这个非常笼统的问题，我深表歉意，但我正在寻求一些建议。我为一个项目创建了两个产品。一个安卓应用和一个网站服务。我希望 android 应用程序能够连接到 PostgreSQL 数据库，以验证用户登录并提交少量数据。

然后将在网站上生成 PostgreSQL 数据库上的数据。简单！

我想知道是否有一些教程或讨论可以为此提供简单的解决方案。我看过很多论坛，其中提到使用很多复杂的协议、框架等。

我只是在寻找一些关于如何实现这一目标的高效 android 示例。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:59:15.733

您不必担心 android 和 PostgreSQL 通信，因为它们不会直接通信。

您所需要的只是`HTTP`在您的 android 和 Web 服务之间进行简单的通信以发送和接收信息（例如用于身份验证的凭据）

您的 Web 服务应该负责从数据库中存储和检索数据

# python - Python / Tk：单独行上的框架中的条目小部件被链接

> ID：15199723
> 
> 赞同：0
> 
> 时间：2013-03-04T10:45:41.207
> 
> 标签：python, tkinter

我在 Python 2.6 中使用 Tk 时遇到了问题。我有一个使用 Python 包装器从 xml 代码自动构建的 GUI。除了包含以下布局的部分之外，一切都很好：

第 1 行：[Label1] [Button1] [Frame1a[Label][Entry]] [Frame1b[Label][Entry]]

第 2 行：[Label2] [Button2] [Frame2a[Label][Entry]] [Frame2b[Label][Entry]]

问题是，由于某种原因，如果我在第 1 行的 Frame1a[Entry] 中输入一个值，我输入的数字也会被复制到第 2 行的 Frame2a[Entry]。对于第 1b/2b 帧也是如此。我在最初创建框架并使用小部件填充它们时检查了它们，它们都是单独的框架，唯一的链接元素是第一个参数 self.root。此外，我使用 frame.grid() 将它们添加到主窗口。

有谁知道这种情况何时发生？如果需要，我可以发布代码，尽管我不想这样做。我四处搜寻，但似乎没有其他人遇到过这个问题。

谢谢

编辑：发布一些代码

```
def new_frame_setup(self, name, options, row_idx=0):

    label   = tk.Label(self.root, text=name, font=("Helvetica", 16))

    _master_frame = tk.Frame(self.root, borderwidth=1, relief="ridge")
    for edit_idx in xrange(len(options)):
      _sub_frame = tk.Frame(_master_frame, borderwidth=1, padx=5, relief="ridge"))
      _sub_frame.grid(row=0, column=edit_idx)
      tk.Label(_sub_frame, text=options[edit_idx][0]+options[edit_idx][1], width=5, font=("Helvetica", 16)).grid(row=0, column=2*edit_idx)
      s = tk.StringVar()
      s.set('%s' % (row_idx))
      tk.Entry(_sub_frame, textvariable=s, text=options[edit_idx][2], width=10, font=("Helvetica", 12)).grid(row=0, column=2*edit_idx+1)

    button  = tk.Button(self.root, text='GoGoGo', font=("Helvetica", 12), command=None)
    self._frame_layouts.append([label, _master_frame, button]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:26:01.813

如果生成的代码将相同的变量分配给`textvariable`两个或多个条目小部件的属性，则会发生这种情况。

# image - 从 Node.js 应用程序传递图像的最佳方式（使用 express）

> ID：15199727
> 
> 赞同：2
> 
> 时间：2013-03-04T10:45:47.107
> 
> 标签：image, performance, node.js, express

我们设置了一个公共文件夹，其中包含 50 个*便携式网络图形*格式的小图像，基本上是（45 x 45px）的图标，用于工具栏设计。

考虑以下用于使用[express](https://github.com/visionmedia/express)设置公用文件夹的[Node.js](http://nodejs.org)代码：

```
app.configure(function AppConfig() {
    app.set('port', 8080);
    app.use(express.bodyParser());
    app.use(express.errorHandler());
    app.use(express.cookieParser());

    app.use(express.static(app.root + '/app/public'));  // <== contains 50 icons in .png format

    app.engine('html', require('hbs').__express);
    app.set('views', app.root + '/views/html');
    app.set('view engine', 'html');
    }); 
```

由于第一页始终是登录页面，因此我希望所有工具栏图标图像都缓存在第一页上，并在后台自行加载，同时用户正在输入登录详细信息。

在后台搜索如何执行此操作时，我遇到了[Image Sprite 概念](http://www.w3schools.com/css/css_image_sprites.asp)。但我需要不同的解决方案来缓存尚未请求的图像。

任何人都可以说明如何做到这一点吗？

* * *

**更新：**我尝试使用标签本身请求单个图像（.png），它是所有 50 个**大小为 0.76MB**的图像精灵，现在当我加载登录页面时，它会加载图像，然后用户可以看到 UI。所以问题是我希望它首先显示 UI，然后在 AJAX 之类的背景下加载图像。

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T08:29:06.847

您可以通过将图像精灵插入登录页面的最底部并使其不可见来预加载图像精灵。在浏览器解析和呈现您的登录页面时，它会遇到您的图像精灵并加载它，但不会显示它。因为它位于页面的末尾，所以它不会干扰 UI，您的用户将首先看到 UI。

```
<html>
<body>
...
  <div style="display:none">
     <img src="sprite.png"/>
  </div>
</body>
</html> 
```

或者您可以使用 JavaScript 加载它

```
$(function() { // when DOM is ready
    $(window).load(function() { // when the page is fully loaded including graphics
        $('body').append($('<div><img src="sprite.png"/></div>').hide());
    });
}); 
```

另外，不要忘记指示 express 告诉浏览器精灵可以被缓存：

```
app.use(express.compress()); // optional
app.use(express.static(app.root + '/app/public', { maxAge: 86400000 /* 1d */ })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:32:00.450

服务器只能提供用户请求的内容。缓存由浏览器完成，以减少文件传输（页面所需）并提高性能。

为了进行缓存，浏览器必须至少请求一次文件。此后，它会检查文件是否已更新。如果服务器上的文件已更改，则丢弃缓存，否则将使用缓存。如果要缓存所有图像，只需将它们包含在登录页面中即可。之后，对文件的每个请求都将命中缓存。要知道您的文件正在节点中缓存，请检查日志。

```
//First access
GET /stylesheets/style.css 200 1270ms
//Thereafter from cache
GET /stylesheets/style.css 304 6ms 
```

不用担心缓存，让浏览器处理它。

# regex - 如何在htaccess中引用当前目录

> ID：15199732
> 
> 赞同：5
> 
> 时间：2013-03-04T10:45:58.073
> 
> 标签：regex, .htaccess, apache2, global-variables

我需要动态获取 .htaccess 文件所在的当前目录。那可能吗 ？（可能是一个变量？）。

就像是 ：`%{SCRIPT_FILENAME}`

先感谢您。

编辑：如果使用正则表达式？它应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:25:18.303

实际上 Apache 仍然没有像 PHP 那样的 pathinfo($,PATHINFO_DIRNAME) 函数。

依此类推，已经有了基于 %{REQUEST_URI} 用法的解决方案，例如这个例子：

```
 RewriteRule ^(.+)/$ /path-dirname/$1 [R=301,L] 
```

关于您的问题，这可能对您有用：

```
 RewriteCond %{REQUEST_URI} ^(.+)/$
  RewriteRule ^.+/$ %1 [R=301,L] 
```

# javascript - 如何将数组中的对象保留在数组中的其他对象之间（画布滑块）

> ID：15199739
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:46:17.840
> 
> 标签：javascript, html5-canvas, kineticjs

我正在使用 kineticjs 制作一个滑块，您可以在其中动态添加更多句柄以获得更多句柄。重要的是把手不能相互交叉。因为重要的是排名顺序仍然相同。

我已经检查了顺序较高的对象是否具有比顺序较低的对象低的 x 值。如果我做了 5 个手柄，最后一个就完美了。如果我从 4 号开始把它放在左边，它会从 4 号开始很好地放在右边。但是，如果我将第 4 个放在第 3 个的左侧，它就会到那里，第 5 个将靠近第 3 个，而不是第 4 个这样做。

怎么会发生？这个问题有解决方案吗？

```
container.addEventListener('mouseup', function(e) {
 handles = layer.getChildren();
        for(var m=handles.length; m--;)
        {
            if(m>0)
            {
                if (layer.get('#myRect'+m)[0].getAbsolutePosition().x < layer.get('#myRect'+(m-1))[0].getAbsolutePosition().x)
                {
                    handles[m].setX(layer.get('#myRect'+(m-1))[0].getAbsolutePosition().x + 15);
                }
            }
        }
        layer.draw();
        Update();
    }); 
```

我发现 layer.getChildren 非常混乱。每次他给这些对象另一个等级。layer.get('#myRect'+(m-1))[0] 然而更可靠。我保留了 layer.getChildren 用于计数。

编辑：我发现当您将 layer.getChildren 推送到自制数组中时，它更可靠，而您仍然拥有数组选项（layer.getChildren 对于排名顺序不可靠）。

我的设计的问题是你可以有一个时刻，你在这两个方面都是正确的。然后他总是做如果那不是你一直想要的。所以我做了一个函数，它计算你的句柄是向右还是向左，然后看看它是否穿过另一个。对不起，混乱的解释和代码。

```
var latestcoordinate = 0;
var newcoordinate = 0;

 container.addEventListener('mousedown', function(e) {
     latestcoordinate = 0;
for (var x = 0; x < array.length; x++) {

    latestcoordinate += parseInt(array[x].getAbsolutePosition().x);
}

 });

 container.addEventListener('mouseup', function(e) {
     newcoordinate = 0;
     for (var x2 = 0; x2 < array.length; x2++) {
        newcoordinate += parseInt(array[x2].getAbsolutePosition().x);
    }

        for(var m=array.length; m--;)
        {
            if(m<array.length-1 && newcoordinate < latestcoordinate)
            {
                if (array[m].getAbsolutePosition().x < array[m+1].getAbsolutePosition().x)
                {
                    array[m].setX(array[m+1].getAbsolutePosition().x + 15);
                }
            }
            if(m>0  && newcoordinate > latestcoordinate)
            {
                if (array[m].getAbsolutePosition().x > array[m-1].getAbsolutePosition().x)
                {
                    array[m].setX(array[m-1].getAbsolutePosition().x - 15);
                }
            }

        }
        layer.draw();
        Update();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:13:32.120

并不是说这是解决方案，但我认为您想从 for 循环中添加一个转义或使其成为“for in”循环

```
 for(var m=handles.length; m--;)
    {
        if(m>0)  // <--- why isn't this clause in the for loop logic?
        {
            if (layer.get('#myRect'+m)[0].getAbsolutePosition().x < layer.get('#myRect'+(m-1))[0].getAbsolutePosition().x)
            {
                handles[m].setX(layer.get('#myRect'+(m-1))[0].getAbsolutePosition().x + 15);
            }
        }
        else
           break;
    } 
```

# mysql - 如何在 MySQL 中自动增加 +1 特定行数

> ID：15199744
> 
> 赞同：1
> 
> 时间：2013-03-04T10:46:39.693
> 
> 标签：mysql, sql, syntax

我有一个 MySQL 表，其中有一列我想为特定行数（其中 id_sample='2'）自动增加 +1 值。你怎么看，我可以通过单个查询来存档，或者我需要逐行更新:(。我的表的简短预览是：

```
+----------+----------+---------+
| id       | id_sample| degrees |
+----------+----------+---------+
| 361      |    2     |    0    |
| 362      |    2     |    0    |
| 363      |    2     |    0    |
| 364      |    2     |    0    |
| 365      |    2     |    0    |
| 366      |    2     |    0    |
| ...      |  ....    |   ....  |
+----------+----------+---------+ 
```

我想存档这个：

```
+----------+----------+---------+
| id       | id_sample| degrees |
+----------+----------+---------+
| 361      |    2     |    1    |
| 362      |    2     |    2    |
| 363      |    2     |    3    |
| 364      |    2     |    4    |
| 365      |    2     |    5    |
| 366      |    2     |    6    |
| ...      |  ....    |   ....  |
+----------+----------+---------+ 
```

我尝试了这个查询（见下文），但我得到了所有行的增量：对应的 id_sample='2'：

```
UPDATE myTable SET degrees=degrees+1 WHERE id_sample='2'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:53:57.587

如果可以使用变量。这是一个解决方案：

```
SET @rownum=0;
UPDATE myTable SET degrees=(@rownum:=@rownum+1) WHERE id_sample='2'; 
```

受此启发：[显示 Rownum 问题 MySQL](https://stackoverflow.com/questions/11460300/display-rownum-issue-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:02:04.340

```
Update mytable a set a.degrees = (select nvl(max(b.degree),0)+1 from mytable b where a.id=b.id and b.id_sample=2); 
```

# php - 网站无法在移动设备中打开

> ID：15199747
> 
> 赞同：0
> 
> 时间：2013-03-04T10:46:58.090
> 
> 标签：php, javascript, wordpress

我们设计了一个网站，使用`wordpress`它在[http://www.jainbakers.com](http://www.jainbakers.com)的桌面上运行良好，但是当我尝试在移动浏览器中打开它时，它会重定向到[http://www.google.uk](http://www.google.uk)所以可以你告诉我这个问题的解决方案。

# c# - unity(dependency injection container) 基于验证对象钩权对象

> ID：15199752
> 
> 赞同：0
> 
> 时间：2013-03-04T10:47:14.657
> 
> 标签：c#, dependency-injection, unity-container

我需要替换以下行：

```
var validator = DependencyResolver.Current.GetService<IValidator<T>>(); 
```

在

```
public class ValidationFactory : IValidationFactory
{
    public void Validate<T>(T entity) where T : class, IEntity
    {
        var validator = DependencyResolver.Current.GetService<IValidator<T>>();

        var result = validator.Validate(entity);

        if (result.Count() > 0)
            throw new BusinessServicesException(result);
    }
} 
```

我需要参考： System.Web.Mvc 才能使其工作。

是否有任何其他解决方案可以使用统一挂钩正确的验证器？

接口

```
public interface IValidator<T> where T : class, IEntity
{
    IEnumerable<ValidationResult> Validate(T entity);
}

public interface IValidationFactory
{
    void Validate<T>(T entity) where T : class, IEntity;
} 
```

一个特定的验证器：

```
public class CanCreateOrUpdateUserValidator : IValidator<User>
{
    private readonly IUnitOfWork unitOfWork;

    public CanCreateOrUpdateUserValidator(IUnitOfWork unitOfWork)
    {
        this.unitOfWork = unitOfWork;
    }

    public IEnumerable<ValidationResult> Validate(User entity)
    {
        if (entity == null)
        {
            yield return new ValidationResult("");
        }
        else
        {
            // more logic                
        }
    }
} 
```

统一注册：

```
container.RegisterType<IValidationFactory, ValidationFactory>(new ContainerControlledLifetimeManager());
container.RegisterType<IValidator<User>, CanCreateOrUpdateUserValidator>(new ContainerControlledLifetimeManager()); 
```

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:23:20.930

你可以做两件事：

1.  将统一容器注入`ValidationFactory`构造函数。但是，由于不应从任何较低层引用 Unity，这意味着`ValidationFactory`应将实现移动到[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)中。考虑到此类中的少量代码，这应该不是问题。

2.  与其注入 Unity 容器，不如注入一个`Func<Type, object>`允许为您创建`IValidator<T>`实现的委托。当您注册时，您提供一个使用此委托在现场启动`IValidationFactory`的单个`ValidationFactory`实例：`new`

```
container.RegisterInstance<IValidationFactory>(
    new ValidationFactory(type => container.Resolve(type))); 
```

Unity 不包含任何开箱即用的批量注册工具，因此您必须手写验证器的批量注册。然而，Unity 确实允许您将开放的通用接口映射到开放的通用实现，如下所示：

```
container.RegisterType(
    typeof(IValidator<>),
    typeof(NullValidator<>)); 
```

这允许您始终返回一个验证器，并且它使验证工厂不必检查给定的验证器是否存在`T`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:17:13.817

您可以使用创建服务定位器`Microsoft.Practices.ServiceLocation`

```
 //on init app
    Dim container As IUnityContainer = New UnityContainer()
    container.RegisterType<IValidationFactory, ValidationFactory>(new ContainerControlledLifetimeManager());
    container.RegisterType<IValidator<User>, CanCreateOrUpdateUserValidator>(new ContainerControlledLifetimeManager());
    Dim provider = New UnityServiceLocator(container)
    ServiceLocator.SetLocatorProvider(Function() provider) 
```

在您的 ValidatorFactory 中：

```
var validator = ServiceLocator.Current.GetInstance<IValidator<T>>();//returns configured class 
```

但这会产生依赖`Microsoft.Practices.ServiceLocation`，我一直认为 servicelocator 是一种反模式。

# database - 使用android平台更新parse.com中每行的值

> ID：15199754
> 
> 赞同：3
> 
> 时间：2013-03-04T10:47:16.667
> 
> 标签：database, cloud, storage

我在名为 parse.com 的云存储站点中更新每行的值时遇到问题。我只是使用 parse.com 的新手。我已阅读有关它的文档并理解它。但我想做的与那里的例子有点不同。这是我的代码..

```
public void onClick(View arg0) {
    if (arg0.getId() == R.id.button1) {
        ParseQuery query = new ParseQuery("inventory");
        query.findInBackground(new FindCallback() {

              public void done(List<ParseObject> test, ParseException e) {

                  ParseObject testObject = new ParseObject("inventory");
                  if(e==null) { 
                      String str="";
                      String str2="";
                      for(int x =0;x<test.size();x++){
                          str = test.get(x).getString("name");
                          str2 = test.get(x).getString("quantity");
                          if (!str.equals(et1.getText().toString())){
                             str = "";
                          }
                          if(str.equals(et1.getText().toString()))
                          {

                                      testObject.put("quantity", et2.getText().toString());
                                      testObject.saveInBackground();

                              x = test.size();
                          }
                          else{
                              tv1.setText("error" + e.getMessage());
                          }
              }

                  }}

        });

    } } 
```

我想更新我输入的产品名称的数量。当我的输入等于云上的名称时，它将更新引用我输入的产品名称的另一列。但是由于我的代码，它创建了一个新行，而不是更新现有行..我的代码中缺少/错误的是什么？有人可以帮帮我吗？：） 提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:29:20.823

我正在解决同样的问题。我发现[了这个](https://www.parse.com/questions/updating-objects-creates-a-new-row-in-my-parse-table)：

答案说要更新现有对象，您需要先检索它。检索方法在其网站上的文档中给出。

编辑：完成！这是您的操作方法；首先获取对象，然后通过更新方法更新您想要的值。

```
ParseQuery query = new ParseQuery("UserName");
            query.getInBackground("GKIp4pxBrF", new GetCallback() {
              public void done(final ParseObject object, ParseException e) {
                if (e == null) {

                    object.put("Name", username);
                    object.saveInBackground(new SaveCallback() {
                    public void done(ParseException e) {

                    object.put("Name", oldname);

                }
              });

             }

                else { 
                 e.printStackTrace();
                }

        }
}); 
```

如果您事先不知道目标代码，我建议您通过[查询](https://parse.com/docs/android_guide#queries)找到所需的行。

# sql-server - 查看 mssql 数据库服务器的历史负载

> ID：15199755
> 
> 赞同：0
> 
> 时间：2013-03-04T10:47:18.307
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我正在寻找在数据库上**安排资源繁重的工作**。
我想**查看 MSSQL 服务器的历史负载**以确定时间段。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:56:28.900

有[DBCC MEMORYSTATUS](http://support.microsoft.com/kb/907877/en-us)可以获得大量的内存信息。您也可以参考以前的[SO](https://stackoverflow.com/questions/28952/cpu-utilization-by-database)来查找利用率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:44:58.853

获取所需信息的一种简便方法是使用称为数据收集器的 SQL Server 功能。

有一个很好的分步教程介绍如何在此处进行设置：

[SQL SERVER – 在快速步骤中配置管理数据收集](http://blog.sqlauthority.com/2010/04/13/sql-server-configure-management-data-collection-in-quick-steps-t-sql-tuesday-005/)

您还可以创建自己的数据收集器，以便保留 DMV 信息（请记住，DMV 仅显示自上次重新启动 SQL Server 以来的信息）。

# javascript - 如何输入一个数字并输出一个随机数，但如果在不同的机器上给定相同的 ID，如何保持输出相同

> ID：15199756
> 
> 赞同：0
> 
> 时间：2013-03-04T10:47:27.377
> 
> 标签：javascript, random, colors

目前，我正在使用 scriptish 编写一个小脚本，该脚本接受用户 ID（目前在我们的论坛上，我们的用户 ID 从 1 到 63）并使用以下函数用随机颜色对其进行着色：

```
function setNickColor(nick) 
var spans = nick.getElementsByTagName('span');
var uid = nick.getAttribute('hovercard-id');

if (colors[uid] == null)
    storeColor(uid, Math.random().toString(15).substring(2,8)); 
```

这给了我一个 24 位（用于 rgb 颜色）的随机颜色，为每个安装脚本的人单独生成。我想让每个 ID 生成一个固定的随机颜色。我不明白如何将 ID 应用到函数中，以便它仍然是随机的，但仍然会生成随机颜色。

我查看了种子，但有点难以理解它们的作用，因为我对 javascript 很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:53:11.503

“固定”和“随机”是两个完全相反的东西。忘记随机。根据您的描述，您真的只是想要“固定”。

现在寻求解决方案：获取 ID 的任意散列，然后将其减少到仅 3 个字节以形成与该 ID 对应的 RGB 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:00:33.667

在我看来，您的解决方案有两个主要组成部分：

1.  ~~为用户 ID 生成随机颜色。~~
2.  将此随机颜色与后续请求中的用户 ID 相关联。

既然你已经完成了第一个，那就留下第二个。以下是一些选项，具体取决于后端系统为您提供的灵活性：

1.  您可以编写一个网络服务，从您的 javascript 函数中调用它。您调用的有效负载将是用户 ID 和生成的颜色，您的 Web 服务将存储在后端数据库中。如果未设置颜色，您的模板将检查每个用户，生成一个随机颜色并设置它（并刷新页面，以进行初始设置）。

2.  您可以在浏览器中设置一个代表您生成的颜色的 cookie，然后加载此 cookie 并使用它来更改正在显示的用户 ID。这样做的缺点是它依赖于浏览器（在同一台机器上，在两个浏览器上，同一个用户 ID 可以有两种不同的颜色），如果这个人清除了他们的 cookie，颜色将被重新生成。

3.  第三个选项是 Oleg 建议的 - 创建用户 ID 的一些散列（它是一种单向算法，因此可以保证在相同输入的情况下得到相同的结果），然后将此散列的一个组成部分作为颜色的基础。好处是您避免了 cookie 和网络服务问题；但挑战是您需要使颜色生成器更加“随机”，因为您最终可能会得到视觉上不那么明显的颜色。

# android - 为结果启动设置活动

> ID：15199761
> 
> 赞同：7
> 
> 时间：2013-03-04T10:47:40.553
> 
> 标签：android, android-intent, android-location

在我的应用程序中，我正在检查用户设备上是否启用了 GPS，如果没有，我想将他发送到设置让他打开它。

```
Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
startActivityForResult(intent, LocationHelper.LOCATION_SETTINGS_REQUEST_CODE); 
```

用户关闭设置屏幕后，我会在`onActivityResult()`.

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == LocationHelper.LOCATION_SETTINGS_REQUEST_CODE) {
        LogUtils.d("onActivityResult from settings");
        fetchCurrentLocation();
    }
} 
```

但是，`onActivityResult()`不会调用。我做错了什么还是这种方法通常不起作用？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:57:55.967

lauch the setting intent :

```
Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
startActivity(intent); 
```

and fetch the current location in onResume method :

```
public void onResume(){
    super.onResume();
    if(isGPSEnabled){
         fetchCurrentLocation();
}
} 
```

after backing from setting screen , your onResume method will be call and here you can fetch your location.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-04T11:07:03.267

您是否在清单中定义了 ACCESS_FINE_LOCATION 权限？

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission> 
```

# android - 滑动菜单 jfeinstein10 组

> ID：15199765
> 
> 赞同：1
> 
> 时间：2013-03-04T10:48:01.960
> 
> 标签：android, menu

我尝试自定义 Slidingmenu 但没有成功。我想要像 Youtube 一样的滑动菜单，它有组：帐户、频道、来自 Youtube。我使用滑动菜单 jfeinstein10。

# maven - maven-surefire-plugin、DLL 和 java.library.path

> ID：15199768
> 
> 赞同：21
> 
> 时间：2013-03-04T10:48:05.857
> 
> 标签：maven

我有一个 Maven 依赖项，它在运行时需要一个 DLL。我想要做的是简单地将该 dll 放在`resources/lib`文件夹中并将其 DLL 放置到`target`目录中。所以我所做的是：

1.  将 DLL 添加到`src/main/resources/lib`
2.  修改`pom.xml`为使用参数**-Djava.library.path=${basedir}/lib**像这样：

    ```
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
            <forkMode>once</forkMode>
            <workingDirectory>target</workingDirectory>
            <argLine>-Djava.library.path=${basedir}/lib</argLine>
        </configuration>
    </plugin> 
    ```

但是，我仍然收到运行时错误，即**java.library.path**中不存在 DLL 。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T11:05:47.170

您`<argLine/>`指向错误的路径。试试这个：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <forkMode>once</forkMode>
        <workingDirectory>target</workingDirectory>
        <argLine>-Djava.library.path=${basedir}/src/main/resources/lib</argLine>
    </configuration>
</plugin> 
```

如果这个 DLL 只用于测试，你应该把它放在`src/test/resources`. 在这种情况下，`<argLine/>`路径将更改为`${project.build.directory}/test-classes`。

# wpf - 表单编辑通知

> ID：15199775
> 
> 赞同：0
> 
> 时间：2013-03-04T10:48:38.317
> 
> 标签：wpf, properties, notifications, editing

我正在开发一个 WPF 应用程序，其中包含许多表单（大约 20 种不同的表单），每个表单都连接到一个`ViewModel`类，该类通常包含一个表单正在编辑其属性的对象。

如果您在编辑文档时更改了 Word 中的内容，我需要给用户一个图形符号，它告诉您需要保存它。如果用户甚至编辑了一个属性，我需要显示该标志。

有没有一种简单的方法可以做到这一点？我不想为我拥有的每个属性编辑器创建一个事件（*其中有 300 多个*）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:57:12.610

为什么不使用 INotifyPropertyChanged？！由于您使用的是 WPF，因此您可以选择 SourceTrigger 到 Property Changed。检查这里，[http://www.codeproject.com/Articles/15822/Bind-Better-with-INotifyPropertyChanged](http://www.codeproject.com/Articles/15822/Bind-Better-with-INotifyPropertyChanged)了解如何使用 INotifyPropertyChanged。

# java - 将消息从 Android 应用程序多播到本地服务器

> ID：15199776
> 
> 赞同：2
> 
> 时间：2013-03-04T10:48:41.583
> 
> 标签：java, android, sockets, multicast

我正在开发一个 Android 应用程序，它在某些时候会发送多播消息。到目前为止，我正在模拟器设备上运行它。

在同一台机器上，我有一个服务器（不是 Android，一个普通的 Java 应用程序）期待多播消息，但它永远不会得到它。当我启动服务器时，因为它在我的本地机器上，所以我启动它的环回接口（`127.0.0.1`）。我必须说，我已经用常规的 Java 应用程序完成了这项工作，而且效果很好。

这是Android应用程序的代码：

```
try {
    InetAddress group = InetAddress.getByName(MULTICAST_HOST);
    byte[] data = DISCOVER_MESSAGE.getBytes();
    DatagramSocket ds = new DatagramSocket();
    ds.setSoTimeout(60000);
    DatagramPacket dp = new DatagramPacket(data, data.length, group, TcpipSIBDiscoverer.PORT);

    ds.send(dp);
    byte[] buf = new byte[1024];
    dp = new DatagramPacket(buf, buf.length);
    ds.receive(dp);
    if (dp.getLength() > 0) {
        byte[] tmp = new byte[dp.getLength()];
        System.arraycopy(dp.getData(), 0, tmp, 0, tmp.length);
        String received = new String(tmp);
        Logger.debug(this, "Received from SIB: " + received);
        SIBDescriptor sibDescriptor = createSIBDescriptor(received);

        this.discoveryListener.connectorSIBDiscovered(sibDescriptor);
    }
} catch (SocketTimeoutException e) {
    Logger.error("Socket time excedeed while waiting a response when discovering SIBs. Trying again");
} catch (IOException e) {
    Logger.error("There was some kind of IO error while waiting for a response when discovering SIBs. Trying again");
} 
```

如您所见，我使用的是常规`DatagramSocket`而不是`MulticastSocket`. 这适用于普通 Java 应用程序，因为侦听服务器地址是`235.0.0.1:5555`.

不太确定代码是否不起作用，或者我必须在模拟器设备中做一些事情，这样它才能真正到达我的环回接口......有什么想法吗？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:03:54.980

android 上的 127.0.0.1 指的是设备的本地主机（或模拟器）。要访问“本地机器”的 localhost，您应该使用 10.0.2.2。

这在很多话题中都有讨论。

# c# - 为什么我的对话框不起作用

> ID：15199779
> 
> 赞同：0
> 
> 时间：2013-03-04T10:48:53.707
> 
> 标签：c#, javascript, jquery, webforms

这是我正在尝试但不起作用的代码，根本没有出现

```
<script type="text/javascript" src="jquery/jquery.min.js"></script>
<script type="text/javascript" src="jquery/jquery-ui.min.js"></script>
<script type="text/javascript">
    function HandleIt()
    {
        var objA = $get('<%= chkBox.ClientID %>');

        if(objA.checked == false)
            $("#dialog").dialog();

            //alert("it works");
    }  
</script>
<div style="width: 800px;">
    <asp:ScriptManager ID="ScriptMan1" runat="server" />
    <div class="dialog">
        <div class="a">
        <asp:Label ID="lbla" runat="server" CssClass="text" />
    </div>
    <div class="b">
        <asp:Label ID="lblb" runat="server" CssClass="text" />
    </div>
</div> 
```

我给出的代码在这样的对话框中起作用，

```
<div class="dialog"> Hahahahaha </div> 
```

我想将它用作消息框，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:51:07.797

因为您的选择器捕获带有 id 的标签，并且您需要按类命中。尝试将您的选择器更改为此： $(".dialog").dialog();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:12:06.850

请参见这里的[jQuery 选择器。](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)您将获得有关它的简要知识....

并替换您的以下代码

```
 $("#dialog").dialog(); 
```

使用以下代码

```
 $(".dialog").dialog(); 
```

请看 jquery 选择器...

# ada - GNAT 3.15p Ada 编译器的 IDE

> ID：15199780
> 
> 赞同：1
> 
> 时间：2013-03-04T10:48:54.517
> 
> 标签：ada, gnat-gps

我正在使用建议用于 RTRT 的 GNAT 3.15p Ada 编译器。我将 GPS IDE 与另一个版本的 GNAT Ada 编译器一起使用。是否有可用于 GNAT 3.15p 编译器的 IDE？我可以使用 GPS IDE 本身，如果可以，如何更改编译器？

谢谢 Padmapriya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:40:55.983

我相信 GPS 将使用第一个`gcc`并且`gnatmake`它在`PATH`.

通常，在 Windows 上安装 GNAT 会正确设置 PATH；如果您已经安装了更高版本的 GNAT+GPS，则安装 3.15p 应首先将其放在 PATH 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:01:25.837

您可以找到的最新 GPS（例如来自 GNAT GPL 2012 的 GPS）可能支持 GNAT 3.15p（尽管官方声明的支持只能追溯到 GNAT Pro 3.16a1）。在较新的 GPS 手册中查找“多工具链”功能。这对于使用较新的 GNAT 工具集和较旧的编译器非常有效。“多个工具链”设置将覆盖 OS 路径变量设置。

请参阅[http://docs.adacore.com/gps-docs/users_guide/_build/html/compilation.html#working-with-two-compilers](http://docs.adacore.com/gps-docs/users_guide/_build/html/compilation.html#working-with-two-compilers)

如果您使用 gpr 文件，您可能不得不限制自己使用 GNAT 3.15p 中可用的项目文件功能。

您可能还会对 Eclipse 上的 GNATbench 或 AdaGIDE 作为替代 IDE 感到满意。

# php - Symfony2 将值传递给集合表单类型

> ID：15199784
> 
> 赞同：7
> 
> 时间：2013-03-04T10:49:21.507
> 
> 标签：php, symfony

我有以下实体关系：

*   客户有一对多地址
*   一个地址具有多对一的县和多对一的城市
*   一个县有一对多的市。

所以，在我的 CustomerType 中，我有

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ...
        ->add('addresss', 'collection', array(
            'label' => 'customer.address',
            'type' => new AddressType(),
            'allow_add' => true,
            'allow_delete' => true,
            'by_reference' => false,
        ))
    ;
} 
```

在我的 AddressType 中，我有

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ...
        ->add('city', 'entity', array(
            'class' => 'MyCustomerBundle:City',
            'query_builder' => function(CityRepository $cr) use ($options) {
                return $cr->getCityQB($options['county']);
            },
            'property' => 'city',
            'empty_value' => '',
        ))
    ;
} 
```

我的目标是只显示相应县的城市集。我可以将值从 $options 获取到 CustomerType，但是如何将值传递给 AddressType？这样每个地址都有对应的县来查找城市吗？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-02-24T17:29:07.330

在 symfony3 中：

```
$builder->add('example', CollectionType::class, array(
    'entry_type'   => ExampleType::class,
    'entry_options'  => array(
        'my_custom_option'  => true),
)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-20T20:50:23.920

使用 AddressType 中的**构造函数**，它对我有用..

客户类型：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ...
        ->add('addresss', 'collection', array(
            'label' => 'customer.address',
            'type' => new AddressType($your_variable),
            'allow_add' => true,
            'allow_delete' => true,
            'by_reference' => false,
        ))
    ;
} 
```

地址类型：

```
private $your_variable;

public function __construct($variable)
{
    $this->your_variable= $variable;
}
...
public function buildForm(FormBuilderInterface $builder, array $options){
    $your_variable = $this->your_variable;
    'query_builder' => function(CityRepository $cr) use ($your_variable) {
        return $cr->getCityQB($your_variable);
    },
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-26T23:13:22.063

我认为您可以使用集合类型的“选项”选项。如果您想在其他地方重用表单，这比使用构造函数要好。

Symfony 表单参考：[集合类型](http://symfony.com/doc/current/reference/forms/types/collection.html)

但请记住在您的`setDefaultOptions`方法中定义变量。（两种形式都必须有）

# javascript - 在其他复选框的单击事件上启用复选框的 Javascript 代码

> ID：15199785
> 
> 赞同：0
> 
> 时间：2013-03-04T10:49:23.317
> 
> 标签：javascript

我想在另一个复选框的单击事件上启用一个复选框。表示只有在单击第一个复选框时才能修改复选框

我可以对 java 脚本函数有一些建议吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:51:22.360

```
var checkbox1 = document.getElementById("checkbox1"),
    checkbox2 = document.getElementById("checkbox2");

checkbox1.addEventListener("change", function() {
    checkbox2.disabled = !checkbox1.checked;
}, false); 
```

**演示：http:** [//jsfiddle.net/fdRge/](http://jsfiddle.net/fdRge/)

# java - JUnit测试扫描文件夹类

> ID：15199786
> 
> 赞同：1
> 
> 时间：2013-03-04T10:49:23.763
> 
> 标签：java, unit-testing, junit, mkdir

我想写几个测试，但从高层次上看，它们中的每一个都应该用一些文件填充目录结构。我至少会测试这些案例中的每一个：

包含通过过滤器的文件的单个文件夹。
包含未通过过滤器的文件的单个文件夹。
一个嵌套文件夹，每个文件夹中都有一个文件。

**代码：**

```
class FolderScan implements Runnable {

    private String path;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;
    private List<Checker> checkers;

    FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
            File endOfWorkFile) {
        this.path = path;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
        checkers = new ArrayList<Checker>(Arrays.asList(new ExtentionsCheker(),
                new ProbeContentTypeCheker(), new CharsetDetector()));
    }

    public FolderScan() {
    }

    @Override
    public void run() {
        findFiles(path);
        queue.add(endOfWorkFile);
        latch.countDown();
    }

    private void findFiles(String path) {
        boolean checksPassed = true;
        File root;

        try {
            root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    for (Checker currentChecker : checkers) {
                        if (!currentChecker.check(currentFile)) {
                            checksPassed = false;
                            break;
                        }
                    }

                    if (checksPassed)
                        queue.put(currentFile);
                }
            }
        } catch (InterruptedException | RuntimeException e) {
            System.out.println("Wrong input !!!");
            e.printStackTrace();
        }
    }
} 
```

**问题：**

*   如何在每个文件夹中创建文件？
*   证明队列包含您期望的 File 对象？
*   队列中的最后一个元素是“触发器”文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:03:54.447

> 如何在每个文件夹中创建文件？

*   提取文件 IO 并使用模拟存储库进行测试。这意味着您将在其他地方拥有 IO，并且可能希望使用以下内容进行测试。
*   [使用JUnit 规则](http://junit-team.github.com/junit/javadoc/4.10/org/junit/rules/TemporaryFolder.html)的临时文件夹 使用测试文件夹创建文件以匹配测试。

> 证明队列包含您期望的 File 对象？

.equals 对我相信的 File 对象很有效。

> 包含未通过过滤器的文件的单个文件夹。

我会传递阻止程序，这样我就可以传递“始终通过”和“始终失败”的阻止程序。

```
public class TestFolderScan {
        @Rule
        public TemporaryFolder folder= new TemporaryFolder();

        @Test
        public void whenASingleFolderWithAFileThatPassesTheFilterThenItExistsInTheQueue() {
                File expectedFile = folder.newFile("file.txt");
                File endOfWorkFile = new File("EOW");
                Queue queue = ...;
                FolderScan subject = new FolderScan(folder.getRoot(), queue, new AllwaysPassesBlocker(),...);

                subject.run();

                expected = new Queue(expectedFile, endOfWorkFile);
                assertEquals(queue, expected);
        }
} 
```

# javascript - 如何更改 IE 中选择标记的这种行为

> ID：15199787
> 
> 赞同：2
> 
> 时间：2013-03-04T10:49:24.693
> 
> 标签：javascript, jquery, internet-explorer

这是我的问题：

我有一个带有两个选项的选择标签 - “Hello”和“World”

html

```
<select>
<option> Hello </option>
<option> World </option>
</select> 
```

在 IE 中，当您选择一个选项并且它成为选定选项时，蓝色突出显示保持不变，直到您单击选择标记之外的其他位置。（在 Firefox 中不是这样）

所以我写了一个脚本，当一个选项被选中时，它会从元素中移除焦点。

脚本

```
$('select').change(function() {
        $(this).blur(); 
```

但是仍然存在一个小问题：如果我选择 Hello 然后获得 Hello 选项 - 焦点将保留并且蓝色突出显示。But if I choose hello and then world option -everything works.. I read that For select menus, the change event occurs when an option is selected!!!But the option has to be different from the previous selected to trigger the change event.

**即使您再次选择相同的选项，有什么办法不会出现这种蓝色突出显示。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:55:55.517

您可以在选择选项上使用单击事件，假设 select 具有 id `select`：

```
$('option').click(function() {
    $('#select').blur();
}); 
```

演示：http: [//jsfiddle.net/DJCe7/](http://jsfiddle.net/DJCe7/)

**编辑**

如果选项是动态添加的，那么做（假设 select 有 id `select`:)

```
$('#select').on('click', 'option', function() {
    $('#select').blur();
}); 
```

**编辑 2**

按回车得到相同的结果：

```
$('#select').keydown(function(event) {
    // Enter pressed
    if(event.keyCode == 13) {
        $('select').blur();
    }
}); 
```

演示：http: [//jsfiddle.net/DJCe7/10/](http://jsfiddle.net/DJCe7/10/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T10:54:17.083

把它模糊成焦点怎么样？不过，不确定这在 IE 中会如何表现。

```
$('select').focus(function() {
   $(this).blur();
}); 
```

[http://jsfiddle.net/b26f5/](http://jsfiddle.net/b26f5/)

*编辑：*愚蠢的我，你实际上可以用 CSS 删除轮廓。无需使用Javascript！

```
select, select:focus, select:active { outline: none; } 
```

[http://jsfiddle.net/b26f5/1/](http://jsfiddle.net/b26f5/1/)

# knockout.js - KnockoutJS 数据绑定设置器

> ID：15199790
> 
> 赞同：0
> 
> 时间：2013-03-04T10:49:31.097
> 
> 标签：knockout.js

HTML 数据绑定设置器有问题。我希望它设置为模型（exerciseCategories）**间隔**值。如果我绑定到模型的间隔，它是正确的值，但不可观察。如果我将它绑定到 $parent.intervals 它是 viewModel 的默认值 (1) 但它是可观察的。我想要两个:)。我究竟做错了什么？像这样的东西确实有效，但显示 [object Object]：

```
<td data-bind='with: exercise'>
   <input data-bind='value: $parent.intervals(intervals)' />
</td>

What I've got is - HTML    
            ...
            <td>
                <select data-bind='options: exerciseCategories , optionsText: "category", optionsCaption: "Izberite...", value: exerciseType'></select>
            </td>
            <td data-bind="with: exerciseType">
                <select data-bind='options: exercises, optionsText: "title", optionsCaption: "Izberite...", value: $parent.exercise'></select>
            </td>
            <td data-bind='with: exercise'>
                    <input data-bind='value: $parent.intervals' />
            </td>
            ...
 JavaScript
    var exerciseCategories = [
    {
        exercises: [{
            title: 'Aerobic exercise #1',
            intervals: 2
        }],
        category: 'Aerobics'
    }];

        var Exercise = function () {
                var self = this;

                self.exerciseType = ko.observable();
                self.exercise = ko.observable();
                self.intervals = ko.observable(1);
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:56:29.367

执行 $parent.intervals(intervals) 您正在调用 interval 可观察函数，将 interval 作为参数传递，显然您将收到 ko.observable 对象。

我得到了你的摘录。看看这个[http://jsfiddle.net/MhHc4/](http://jsfiddle.net/MhHc4/)

HTML

```
Categories:
<select data-bind='options: exerciseCategories , optionsText: "category", optionsCaption: "Izberite...", value: selectedCategory'></select>
<p>selectedCategory() debug: <pre data-bind="text: selectedCategory() ? ko.toJSON(selectedCategory().exercises, null, 2) : ''"></pre>
</p>Exercises:
<select data-bind='options: selectedCategory() ? selectedCategory().exercises : [], optionsText: "title", value: selectedExercise'></select>
<p>selectedExercise() debug: <pre data-bind="text: selectedExercise() ? ko.toJSON(selectedExercise(), null, 2) : 'x'"></pre>
</p>
<input type="text" data-bind="attr : { value : selectedExercise() ? selectedExercise().intervals : 0 }"/> 
```

Javascript

```
var exerciseCategories = [{
    exercises: [{
        title: 'Aerobic exercise #1',
        intervals: 2
    }],
    category: 'Aerobics'
}];

var ExerciseViewModel = function () {
    var self = this;

    self.exerciseCategories = ko.observable(exerciseCategories);
    self.selectedCategory = ko.observable();
    self.selectedExercise = ko.observable();
    self.intervals = ko.observable(1);
};
ko.applyBindings(new ExerciseViewModel()); 
```

高温高压

# jquery - jquery gmap3点击更新标记 - 谷歌地图v3

> ID：15199793
> 
> 赞同：0
> 
> 时间：2013-03-04T10:49:39.010
> 
> 标签：jquery, google-maps, marker, jquery-gmap3

我只是在尝试 jquery 插件 gmap3 [http://gmap3.net/en/](http://gmap3.net/en/)

以下情况：

我有两个地址，我希望将地图初始设置为地址 1，单击时我希望将标记更新为地址 2

```
var address1 = 'an der alster 42, hamburg';
var address2 = 'schlossstraße, münchen';

$("#mappp").gmap3({
marker:{
  address: address1
},
map:{
  options:{
    mapTypeControl:false,
    zoom: 14
  }
}
});

$('#click').click(function(){
  $("#mappp").gmap3({
marker:{
  address: address2
},
map:{
  options:{
    mapTypeControl:false,
    zoom: 14
  }
}
});
}); 
```

这是小提琴[http://jsfiddle.net/MDFTN/](http://jsfiddle.net/MDFTN/)

我已经尝试在更新标记之前破坏地图，但无论如何都没有发生任何事情。

提前感谢您的任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:24:46.297

与其尝试如此有力地使用 jquery-gmap3 库，您还可以自己做更多事情——我创建了一个小提琴，它可以满足您的需求。

*总结一下*：我们通过对地址 latLng 值进行地理编码来跟踪它们，这与 gmap3 本身在您提供标记纯地址时在下面所做的事情相同，因此它实际上使用`google.maps.Geocoder();`

这将起作用：[JS小提琴代码](http://jsfiddle.net/MDFTN/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:34:40.173

[这个答案](https://stackoverflow.com/a/5303192/2110460)解释了如何正常移动标记。我不知道您将如何在 gmap3 中执行此操作，因为它似乎完全忽略了本机 googlemaps 命令，从而使 setPosition 无用：/

# php - 对象无法转换为字符串

> ID：15199794
> 
> 赞同：0
> 
> 时间：2013-03-04T10:49:39.533
> 
> 标签：php

全局变量是前面已经定义的类（对象）

```
class Users
{
    private $sql;

    public function __construct() {
        global $sql;
        $this->$sql = $sql;
    }
} 
```

我正在尝试将对象分配给我的其他类（用户）中的私有变量，所以我不必在`global $sql;`所有函数中使用这一行，`Users`但它给了我这个错误：

`Catchable fatal error: Object of class Bdcon could not be converted to string in /home/<<NAME>>/public_html/<<NAME>>/classes/class.users.php on line 8`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:53:04.440

您不能（通常）使用对象作为属性名称：

```
$this->$sql
       ^ 
```

但你并不真正想要：

```
$this->sql 
```

无论如何，我推荐这种其他风格：

```
class Users
{
    private $sql;

    public function __construct(Bdcon $sql) {
        $this->sql = $sql;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:53:54.080

您没有`private $sql`以正确的方式访问。它应该是：

```
$this->sql = $sql; 
```

您收到错误的原因是，如果您使用`$this->$sql`,`$sql`被强制转换为字符串，并且 php 会尝试查找名称为 的属性`$sql`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:52:48.943

使用`$this->sql.`，因为您正在访问类的属性，因此无需添加 $ 符号而是使用`$this->`

# jquery - 用jQuery找出选择框的值

> ID：15199796
> 
> 赞同：0
> 
> 时间：2013-03-04T10:49:53.967
> 
> 标签：jquery, html-select

我对 jQuery 很陌生，如果这很简单，我很抱歉，但是我有一个选择框，里面有值。在选择的那一刻，它显示一个div。

```
<div class="three columns"><select name="selectbox1" id="selectbox1" style="width:60px;"><option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>

<div class="twelve columns" id="itemadd"><p class="itemadd">You have sucessfully added a child seat at 3 Euros per day.</p></div> 
```

还有一个简单的隐藏功能：

```
$('#itemadd').hide();
        $('#selectbox1').change(function() {
            $('#itemadd').show();
        }); 
```

我希望能够找出选择框的值并在变量中使用它，这样我就可以显示更具交互性的消息并在定价中使用它。

```
$("#selectbox1").change(function() {
    var id = $(this).val();
}); 
```

我尝试过这样的事情，但它似乎不起作用。

我要做的就是如果选择了 select 并且值是 4 例如，我希望能够知道这一点并将其放入一个变量中，以便我可以重用它。在消息或总和中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:11:35.817

您可以尝试使用以下代码：

```
$(document).ready(function(){
    $('#selectbox1').change(function() {
    var valueSelected=$("#selectbox1 option:selected").val();
    $('#itemadd').text("You have sucessfully added a child seat at "+valueSelected+" Euros per day.");
    $('#itemadd').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T00:33:04.157

检查下面的代码

1）在 HTML 中，我添加了一个`span`标签作为占位符来显示所选值。

2）最初我是`hiding`部分`itemadd`。`On change`在选择框中，我得到了**选定的值**并将其**存储****在**一个变量`selvalue`中。这个存储的变量值，我`span`使用`text()`函数在标签内显示它。最后，我将展示整个`itemadd`部分。

查看[**演示**](http://jsfiddle.net/Lg6sof86/)

**HTML：**

```
<div class="three columns">
   <select name="selectbox1" id="selectbox1" style="width:60px;">
      <option>0</option><option>1</option>
      <option>2</option><option>3</option>
      <option>4</option><option>5</option>
    </select>
</div>

<div class="twelve columns" id="itemadd">
   <p class="itemadd">You have sucessfully added a child seat at <span class="selected-val">3 </span>  per day.</p>
</div> 
```

**脚本：**

```
$('#itemadd').hide();
    $('#selectbox1').change(function() {
         var selvalue= $(this).val();           
        $(".selected-val").text(selvalue);
        $('#itemadd').show();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:12:38.590

如果你想使用来自其他函数的变量“id”的值，那么在 jquery 处理程序之外声明“id”变量。

前任：

```
      变量 ID ;
        $('#itemadd').hide();

        $('#selectbox1').change(function() {
        $('#itemadd').show();

        });

       $("#selectbox1").change(function() {

              id = $(this).val();
              称呼（）;  

             });

           函数调用（）
          {
             警报（ID）；//使用这里的值
          }

```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T10:53:43.330

应该是这样的。

```
$("#selectbox1").change(function() {
    var select_val = $("#selectbox1").val();
    alert(select_val);
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-04T10:55:46.883

```
$(function(){
    $("#selectbox1").change(function() {
        var val = $(this).children(":selected").html();
    }); 
}); 
```

[工作js小提琴](http://jsfiddle.net/Lkuep/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-04T11:01:56.097

`$("#selectBox option:selected").val()`// 获取所选选项的值

`$("#selectBox option:selected").text()`// 获取选中选项的文本

# ubuntu - 替换 grep 找到的字符串

> ID：15199800
> 
> 赞同：0
> 
> 时间：2013-03-04T10:50:07.820
> 
> 标签：ubuntu, grep

我有很多文件，我需要在某些字符串中将 ':' 替换为 ' -' 。

我用 grep 找到了我需要的所有字符串：`grep -G '^ \* @' datapath/ -r`但现在我需要用 '-' 替换这个字符串中的所有 ':' ，我不知道怎么做。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:54:49.073

看一下[sed](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)命令。简而言之，您将像这样使用它：

```
for file in datapath/*.file; do
    sed s/"^ \* @"/-/g $file > $file.new
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:58:56.643

grep 不能进行替换。

试试这个：

```
sed '/^ \* @/s/:/-/g' datapath/*.file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:01:48.797

[用 perl 查找/替换](http://joseph.randomnetworks.com/2005/08/18/perl-oneliner-recursive-search-and-replace/)： perl -pi -e 's/original string/new string/' 文件名

```
perl -pi -e 's/:/-/' * 
```

# sql - 查询中的多个隐式连接和显式连接

> ID：15199801
> 
> 赞同：-1
> 
> 时间：2013-03-04T10:50:08.373
> 
> 标签：sql, database, oracle, join

我有一个查询：

```
SELECT THDR.FILENAME,
       SOURCE.TXN_SOURCE_CD AS TXN_SOURCE_CD,
       SOURCE.DESCR as TXN_SOURCE,
       THDR.TXN_HEADER_ID,
       THDR.TXN_HEADER_EXT_ID,
       THDR.TXN_HEADER_DTTM,
       THDR.UPLOAD_DTTM,
       L.DESCR,
       NVL(SUM(TDTL.TXN_VOL), 0) TOTAL_VOLUME
  FROM ci_lookup_val_l L,
       ci_txn_source_l source,
       CI_TXN_HEADER   THDR
  LEFT JOIN ci_txn_detail TDTL 
  ON THDR.TXN_HEADER_ID = TDTL.TXN_HEADER_ID        

 WHERE TRIM(SOURCE.TXN_SOURCE_CD) = TRIM(TDTL.TXN_SOURCE_CD)
   AND SOURCE.LANGUAGE_CD = 'ENG'      
   AND L.FIELD_NAME = 'TXN_HEADER_STATUS'
   AND THDR.BO_STATUS_CD = L.FIELD_VALUE
   AND L.LANGUAGE_CD = 'ENG'
   AND THDR.TXN_HEADER_ID='22222228'
 GROUP BY THDR.FILENAME,SOURCE.DESCR,THDR.TXN_HEADER_ID,THDR.TXN_HEADER_EXT_ID,THDR.TXN_HEADER_DTTM,THDR.UPLOAD_DTTM,L.DESCR,SOURCE.TXN_SOURCE_CD 
```

如您所见，此查询有多个隐式连接和 1 个显式连接。这是我第一次使用这种查询，但它可以编译。但是，此查询中的左连接不起作用。也就是说，如果我在 TDTL 中没有与 THDR 上的记录相对应的记录，则查询不会返回任何行。

你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:23:52.340

我的建议是更改您的查询以对每个查询使用显式联接：

```
SELECT THDR.FILENAME,
       SOURCE.TXN_SOURCE_CD AS TXN_SOURCE_CD,
       SOURCE.DESCR as TXN_SOURCE,
       THDR.TXN_HEADER_ID,
       THDR.TXN_HEADER_EXT_ID,
       THDR.TXN_HEADER_DTTM,
       THDR.UPLOAD_DTTM,
       L.DESCR,
       NVL(SUM(TDTL.TXN_VOL), 0) TOTAL_VOLUME
FROM ci_lookup_val_l L
INNER JOIN CI_TXN_HEADER   THDR
  ON THDR.BO_STATUS_CD = L.FIELD_VALUE
LEFT JOIN ci_txn_detail TDTL 
  ON THDR.TXN_HEADER_ID = TDTL.TXN_HEADER_ID       
LEFT JOIN ci_txn_source_l source
  on TRIM(SOURCE.TXN_SOURCE_CD) = TRIM(TDTL.TXN_SOURCE_CD)
  AND SOURCE.LANGUAGE_CD = 'ENG' 
WHERE L.FIELD_NAME = 'TXN_HEADER_STATUS' 
   AND L.LANGUAGE_CD = 'ENG'
   AND THDR.TXN_HEADER_ID='22222228'
GROUP BY THDR.FILENAME,
  SOURCE.DESCR,
  THDR.TXN_HEADER_ID,
  THDR.TXN_HEADER_EXT_ID,
  THDR.TXN_HEADER_DTTM,
  THDR.UPLOAD_DTTM,
  L.DESCR,
  SOURCE.TXN_SOURCE_CD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:52:33.187

问题是这种情况：

```
 WHERE TRIM(SOURCE.TXN_SOURCE_CD) = TRIM(TDTL.TXN_SOURCE_CD) 
```

当 , 中没有匹配的条目时`TDTL`，`TDTL.TXN_SOURCE_CD`将`NULL`被拒绝，记录将被拒​​绝。

您需要重新考虑涉及`SOURCE`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:00:50.807

您可以在语句中使用以下子句，

```
WHERE TRIM(NVL(SOURCE.TXN_SOURCE_CD, 'NULL')) = TRIM(NVL(TDTL.TXN_SOURCE_CD, 'NULL')) 
```

如果您还想检查空值。看看这是否有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T12:11:25.017

这很难理解，但切换到使用一致的连接语法会有所帮助。提供数据和预期结果会有所帮助，因此这在很大程度上是一种猜测。但问题似乎出在：

```
WHERE TRIM(SOURCE.TXN_SOURCE_CD) = TRIM(TDTL.TXN_SOURCE_CD) 
```

由于这在 and 之间强制执行内连接条件，因此`SOURCE`and之间`TDTL`的左外连接`THDR`也`TDTL`有效地成为内连接。你真的需要把它移到外部连接中。

像这样的东西看起来应该给你想要的东西，但仍然只是猜测：

```
SELECT THDR.FILENAME,
       SOURCE.TXN_SOURCE_CD AS TXN_SOURCE_CD,
       SOURCE.DESCR as TXN_SOURCE,
       THDR.TXN_HEADER_ID,
       THDR.TXN_HEADER_EXT_ID,
       THDR.TXN_HEADER_DTTM,
       THDR.UPLOAD_DTTM,
       L.DESCR,
       NVL(SUM(TDTL.TXN_VOL), 0) TOTAL_VOLUME
  FROM ci_lookup_val_l L
  JOIN ci_txn_source_l SOURCE
    ON SOURCE.LANGUAGE_CD = L.LANGUAGE_CD
  JOIN CI_TXN_HEADER THDR
    ON THDR.BO_STATUS_CD = L.FIELD_VALUE
  LEFT JOIN ci_txn_detail TDTL 
    ON TDTL.TXN_HEADER_ID = THDR.TXN_HEADER_ID        
   AND TRIM(TDTL.TXN_SOURCE_CD) = TRIM(SOURCE.TXN_SOURCE_CD)
 WHERE L.FIELD_NAME = 'TXN_HEADER_STATUS'
   AND L.LANGUAGE_CD = 'ENG'
   AND THDR.TXN_HEADER_ID = '22222228'
 GROUP BY THDR.FILENAME,SOURCE.DESCR,THDR.TXN_HEADER_ID,THDR.TXN_HEADER_EXT_ID,
           THDR.TXN_HEADER_DTTM,THDR.UPLOAD_DTTM,L.DESCR,SOURCE.TXN_SOURCE_CD; 
```

但是如果`TRIM(TDTL.TXN_SOURCE_CD)`or`TRIM(SOURCE.TXN_SOURCE_CD)`可以为空，那么该比较将不起作用，但根本不清楚您想要发生什么。你可以这样做：

```
 LEFT JOIN ci_txn_detail TDTL 
    ON TDTL.TXN_HEADER_ID = THDR.TXN_HEADER_ID        
   AND ((TRIM(TDTL.TXN_SOURCE_CD) IS NULL AND TRIM(SOURCE.TXN_SOURCE_CD) IS NULL)
       OR (TRIM(TDTL.TXN_SOURCE_CD) = TRIM(SOURCE.TXN_SOURCE_CD))) 
```

...但真的不确定这会给出您期望的答案（无论是什么！）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T11:38:14.113

感谢所有回答问题的人。我结合了大多数答案提出的建议来找到实际的解决方案：

```
SELECT THDR.FILENAME,
       SOURCE.TXN_SOURCE_CD AS TXN_SOURCE_CD,
       SOURCE.DESCR as TXN_SOURCE,
       THDR.TXN_HEADER_ID,
       THDR.TXN_HEADER_EXT_ID,
       THDR.TXN_HEADER_DTTM,
       THDR.UPLOAD_DTTM,
       L.DESCR,
       NVL(SUM(TDTL.TXN_VOL), 0) TOTAL_VOLUME
  FROM ci_lookup_val_l L,
       CI_TXN_HEADER   THDR
  LEFT JOIN ci_txn_detail TDTL 
  ON THDR.TXN_HEADER_ID = TDTL.TXN_HEADER_ID        
  LEFT JOIN ci_txn_source_l source
  ON (TRIM(NVL(SOURCE.TXN_SOURCE_CD, 'NULL')) = TRIM(NVL(TDTL.TXN_SOURCE_CD, 'NULL')) AND SOURCE.LANGUAGE_CD = :LANGUAGE)

 WHERE L.FIELD_NAME = 'TXN_HEADER_STATUS'
   AND THDR.BO_STATUS_CD = L.FIELD_VALUE
   AND L.LANGUAGE_CD = :LANGUAGE

 GROUP BY THDR.FILENAME,SOURCE.DESCR,THDR.TXN_HEADER_ID,THDR.TXN_HEADER_EXT_ID,THDR.TXN_HEADER_DTTM,THDR.UPLOAD_DTTM,L.DESCR,SOURCE.TXN_SOURCE_CD; 
```

# c# - 如何在 C sharp 中使用正则表达式计算总时间？

> ID：15199802
> 
> 赞同：1
> 
> 时间：2013-03-04T10:50:11.357
> 
> 标签：c#

我想使用正则表达式计算“GSA 搜索”的总“经过时间”。

我的日志文件格式为：

```
WX Search = Server:nomos-scanner.corp.com User:vibsharm appGUID: wx Elapsed Time: 975ms SaveSearchID:361
WX Search = Server:nomos-scanner.corp.com User:vibsharm appGUID: wx Elapsed Time: 875ms SaveSearchID:361
GSA Search = Server:nomos-scanner.corp.com User:gulanand appGUID: wx Elapsed Time:890ms SaveSearchID:361
GSA Search = Server:nomos-scanner.corp.com User:vibsharm appGUID: wx Elapsed Time:887ms SaveSearchID:361
GSA Search = Server:nomos-scanner.corp.com User: gulanand appGUID: wx Elapsed Time: 875.5ms SaveSearchID:361
GSA Search = Server:nomos-scanner.corp.com User:vibsharm appGUID: wx Elapsed Time:877.6ms SaveSearchID:361 
```

我的代码：

```
 string searchKeyword = "WX GSA Search";
            string fileName = @"C:\Users\karansha\Desktop\sample log.txt";
            string[] textLines = File.ReadAllLines(fileName);

            List<string> results = new List<string>();

            foreach (string line in textLines)
            {
                if (line.Contains(searchKeyword))
                {
                    results.Add(line);
                }
            }
            string x = string.Join(",", results);
            List<string> value = new List<string>();
            Regex regex = new Regex(@"Elapsed Time:\s*(?<value>\d+\.?\d*)\s*ms");
            MatchCollection matches = regex.Matches(x);
            foreach (Match match in matches)
            {
                var time = match.Groups["value"].Value;
                if (value.Contains(time)) value.Add(time);
            }
            int ElapsedTime = value.Count();
            Console.WriteLine(ElapsedTime);
            // keep screen from going away
            // when run from VS.NET
            Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:57:21.693

Linq方式：

```
Regex regex = new Regex(@"Elapsed Time:\s*(?<value>\d+\.?\d*)\s*ms");
double totalTime = textLines.Where(line => line.Contains(searchKeyword))
                            .Select(line => regex.Match(line))
                            .Where(match => match.Captures.Count > 0)
                            .Sum(match => Double.Parse(match.Groups["value"].Value)); 
```

非Linq方式：

```
Regex regex = new Regex(@"Elapsed Time:\s*(?<value>\d+\.?\d*)\s*ms");
double totalTime = 0;
int count = 0;
foreach (string line in textLines)
{
    if (line.Contains(searchKeyword))
    {
        Match match = regex.Match(line);
        if (match.Captures.Count > 0)
        {
            try
            {
                count++;
                double time = Double.Parse(match.Groups["value"].Value);
                totalTime += time;
            }
            catch (Exception)
            {
                // not a number
            }
        }
    }
}

double average = totalTime/count; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:03:53.583

您可以在没有正则表达式的情况下使用 LINQ 获得总时间（因为您的日志文件具有一致的格式）。这是一个计算总时间、平均时间和最大时间的示例（如果搜索关键字没有日志项，*DefaultIfEmpty*将返回*0 ）：*

```
string searchKeyword = "GSA Search";
var times = File.ReadAllLines("log.txt")
                .Where(l => l.Contains(searchKeyword))
                .Select(ParseElapsedTime)
                .DefaultIfEmpty() 
                .ToList();

 var averageTime = times.Average();   // 882,525
 var maxTime = times.Max();           // 890
 var totalTime = times.Sum();         // 3530,1 
```

我建议您使用单独的方法从日志行解析经过的时间。这将使代码更易于维护：

```
private static double ParseElapsedTime(string logLine)
{
    var startIndex = logLine.IndexOf("Elapsed Time:") + "Elapsed Time:".Length;
    var endIndex = logLine.IndexOf("ms", startIndex);
    var s = logLine.Substring(startIndex, endIndex - startIndex).Trim();
    return Double.Parse(s, CultureInfo.InvariantCulture.NumberFormat);
} 
```

如果[性能对您不重要](http://blogs.msdn.com/b/oanapl/archive/2009/04/04/performance-comparison-regex-versus-string-operations.aspx)，您始终可以使用正则表达式来解析行 - 只需更改方法实现即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:58:22.590

鉴于您已经使用正则表达式解析了每条记录的经过时间（以*毫秒*为单位） ，您可以将生成的字符串（例如`877.6`）转换为浮点值：

```
string time = "234.4";
float elapsed = Single.Parse(time, CultureInfo.InvariantCulture); 
```

`Single.Parse`仅当您确定该值是有效的浮点值时才使用。否则，您应该使用[`Single.TryParse`](http://msdn.microsoft.com/en-us/library/system.single.tryparse.aspx)，但它的工作方式略有不同。

您可以使用 LINQ 从您的列表中轻松总结经过的时间`values`：

```
var values = new [] { "975", "875", "890", "887", "875.5", "877.6" };
float total = arr.Sum(v => Single.Parse(v, CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:22:03.230

这是在 Vb 中（但可以很容易地翻译成 c#）。结果，从您上面的字符串中，我得到了 5380.1 。

```
Dim totaltime As Decimal = 0.0'choose your data type, I prefer decimal for accuracy
'This should get in between "Time:" and "ms" 
Dim getTimesRgx As New Regex("(?<=Time:)(.*?)(?=ms)", RegexOptions.IgnoreCase)
Dim Times As MatchCollection = getTimesRgx.Matches(YourFileAsString)
If Times.Count > 0 Then
   For Each time As Match In Times
      totaltime = totaltime + Decimal.parse(time.value)
   Next
End If 
```

# jsf-2 - 具有多重排序的 PrimeFaces 数据表的初始排序顺序

> ID：15199805
> 
> 赞同：11
> 
> 时间：2013-03-04T10:50:26.120
> 
> 标签：jsf-2, primefaces

我正在尝试在 Primeface 数据表上实现多排序。我们正在使用 Primefaces v3.5。我在 LazyLoadClass 中创建了一个新的加载方法，它采用 List of SortMeta> 参数。

但是我在表的初始加载中遇到了问题。调用 load 方法时，SortMeta> 的 List 为 null。我也尝试过不指定数据表的初始 sortBy 和 sortOrder。在这两种情况下，结果是相同的。

看到我们有了这个新的 SortMeta 类来支持多重排序，我怀疑指定初始排序字段和顺序的方式也会改变。但我在任何地方都找不到任何例子来指出差异。手册 3.5 没有提到任何区别。

为什么我们可以将 SortMeta> 列表设为空？关于多排序与 Lazyload 一起使用的示例代码的任何指针？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T13:59:42.920

我能够让它工作。

本质上，我们需要在 SortMeta 对象中提供 UIColumn 以使其工作。对于渲染时的初始排序，我必须在我的 bean 中找到组件并将其分配给 sortMeta。

下面是我在视图 xhtml 中的代码

```
 <p:dataTable id="transDataTable" var="trans" 
        value="#{myBean.transModel}" paginator="true" rows="50"
        paginatorAlwaysVisible="false" lazy="true"
        sortMode="multiple" sortBy="#{myBean.preSortOrder}" 
        resizableColumns="true">

        <p:column headerText="User" sortBy="#{trans.user.name}" >
            #{trans.user.name}
        </p:column>
        <p:column headerText="Company" sortBy="#{trans.companyName}">
            #{trans.companyName}
        </p:column>
        <p:column headerText="Join Date" id="joinDateTime" 
            sortBy="#{trans.joinDateTime}" >
            <h:outputText value="#{trans.joinDateTime}" />
        </p:column>
    </p:dataTable> 
```

这是我在 @PostConstruct 上调用的 bean 代码

```
 /*
     * method to build initial sort order for multisort
     */
    private void buildSortOrder() {
        UIViewRoot viewRoot =  FacesContext.getCurrentInstance().getViewRoot();
        UIComponent column = viewRoot.findComponent("transDataTable:joinDateTime"); 

        SortMeta sm1 = new SortMeta();
        sm1.setSortBy((UIColumn)column);
        sm1.setSortField("joinDateTime");
        sm1.setSortOrder(SortOrder.DESCENDING);
        preSortOrder.add(sm1);          
    } 
```

我不确定这是执行此操作的正确方法，但它确实有效。当我们必须在 bean 代码中使用视图中的 id 时，我通常会感到不舒服，因为当人们不小心时，这会引入错误。

感谢@CagatayCivici 的快速提示。

# c++ - 如何从 DLL 中导出数组？

> ID：15199806
> 
> 赞同：2
> 
> 时间：2013-03-04T10:50:31.353
> 
> 标签：c++, arrays, dll, dllexport

**我无法从 DLL 导出数组。**这是我的代码：

**“DLL 头”**

```
#ifdef EXPORT
    #define MYLIB __declspec(dllexport)
#else 
    #define MYLIB
#endif

extern "C" {
/* Allows to use file both with Visual studio and with Qt*/
#ifdef __cplusplus
    MYLIB double MySum(double num1, double num2);
    extern MYLIB char ImplicitDLLName[]; 
#else
    extern Q_DECL_IMPORT char ImplicitDLLName[]; 
    Q_DECL_IMPORT double MySum(double num1, double num2);
#endif
} 
```

**“DLL 源”**

```
 #define EXPORT
    #include "MySUMoperator.h"

    double MySum(double num1, double num2)
    {
        return num1 + num2;
    }

    char ImplicitDLLName[] = "MySUMOperator"; 
```

**“客户端 main.cpp”**

```
int main(int argc, char** argv)
{
    printf("%s", ImplicitDLLName);
} 
```

**构建时，我从链接器收到此错误：**

```
Error   2   error LNK2001: unresolved external symbol _ImplicitDLLName  \Client\main.obj 
```

// 我导出数组的目的是研究从 DLL 导出不同的数据结构

**如何应对链接器引发的错误以及违反了哪些规则？**

**更新：** IDE Visual Studio 2010。
客户端 - 使用 C++ 编写，DLL 也使用 C++

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:07:58.100

假设您正确链接了导入库（这是一个*很大*的假设），您没有正确声明 MYLIB 以导入符号：

这：

```
#ifdef EXPORT
    #define MYLIB __declspec(dllexport)
#else 
    #define MYLIB
#endif 
```

应该是这样的：

```
#ifdef EXPORT
    #define MYLIB __declspec(dllexport)
#else 
    #define MYLIB __declspec(dllimport)
#endif 
```

请记住，我们几乎没有可以使用的上下文。*看起来*您正试图从 C 编译的应用程序中使用它，但如果没有更多信息，我无法确定。如果是这种情况，那么 Q_DECL_IMPORT 最好执行上述操作，否则仍然无法正常工作。我将从一个基本的“C”链接导出开始，然后从那里开始。

* * *

**示例 EXPORTS.DLL**

出口.h

```
#ifdef EXPORTS_EXPORTS
#define EXPORTS_API __declspec(dllexport)
#else
#define EXPORTS_API __declspec(dllimport)
#endif

extern "C" EXPORTS_API char szExported[]; 
```

出口.cpp

```
#include "stdafx.h"
#include "Exports.h"

// This is an example of an exported variable
EXPORTS_API char szExported[] = "Exported from our DLL"; 
```

**示例 EXPORTSCLIENT.EXE**

ExportsClient.cpp

```
#include "stdafx.h"
#include <iostream>
#include "Exports.h"
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    cout << szExported << endl;
    return 0;
} 
```

**输出**

```
Exported from our DLL 
```

# javascript - 如何在 Flot Charts 的 X 轴上绘制日期范围？

> ID：15199814
> 
> 赞同：7
> 
> 时间：2013-03-04T10:51:15.403
> 
> 标签：javascript, jquery, charts, flot

我正在使用 Flot 图表显示某个时期的数据（由用户选择，例如过去 30 天、过去 7 天、从 2013 年 1 月 1 日到 2013 年 3 月 3 日等）

所以我想显示一个以 x 轴为日期的折线图。

例如，如果我有两天，startDate 和 endDate 我如何使 X 轴显示如下：

2013 年 1 月 1 日 | 2013 年 1 月 2 日..................................... 2013 年 3 月 3 日

我的代码如下：数据（目前是静态的）。

```
var mydata = [
                [1, 2.4],
                [2, 3.4 ],
                [3, 4.5 ],
                [4, 5 ],
                [5,  5],
                [6, 5],
                [7, 2 ],
                [8, 1 ],
                [9, 1.5 ],
                [10, 2.5 ],
                [11,  3.5],
                [12, 4 ],
                [13, 4 ],
                [14, 2.4],
                [15, 3.4 ],
                [16, 4.5 ],
                [17, 5 ],
                [18,  5],
                [19, 5],
                [20, 2 ],
                [21, 1 ],
                [22, 1.5 ],
                [23,  2.5 ],
                [24,   3.5],
                [25,  4 ],
                [26,  4 ],
                [27,  2.5 ],
                [28,   3.5],
                [29,  4 ],
                [30,  4 ],
            ];

var plot = $.plot($("#mychart"), [{
                data: mydata,
                label: "Y-axis label"
            }], {
                series: {
                    lines: {
                        show: true
                    },
                    points: {
                        show: true
                    },
                    shadowSize: 2
                },
                grid: {
                    hoverable: true,
                    clickable: true
                },
                colors: ["#37b7f3", "#d12610", "#52e136"],
                xaxis: {
                     mode: "time", timeformat: "%d/%m/%y", minTickSize: [1, "day"]
                },
                yaxis: {
                    ticks: 11,
                    tickDecimals: 0,
            min:0, max: 5
                }
            }); 
```

我意识到我需要让 mydata 看起来像 [日期，值]。那会奏效吗？我有服务器在 JSON 中动态生成的数据

> [{日期，价值}，{日期，价值}...]

格式。请指导。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T15:07:14.507

您需要将数字更改为 UNIX 时间戳乘以 1000。如果您搜索时间序列数据，这来自 API：

*Flot 中的时间序列支持基于 Javascript 时间戳，即在预期或移交时间值的任何地方，都使用 Javascript 时间戳编号。这是一个数字，而不是 Date 对象。Javascript 时间戳是自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。这与 Unix 时间戳几乎相同，只是以毫秒为单位，所以记得乘以 1000！*

API中有一个.Net示例：

```
public static int GetJavascriptTimestamp(System.DateTime input)
{
System.TimeSpan span = new System.TimeSpan(System.DateTime.Parse("1/1/1970").Ticks);
System.DateTime time = input.Subtract(span);
return (long)(time.Ticks / 10000);
} 
```

这是一个例子 - [http://jsfiddle.net/zxtFc/4/](http://jsfiddle.net/zxtFc/4/)

# python - Python 使用同一个记录器记录多个文件

> ID：15199816
> 
> 赞同：16
> 
> 时间：2013-03-04T10:51:15.530
> 
> 标签：python, logging, config

这是我的场景：我想记录 my_module 的活动。这需要根据执行的方法（例如，INPUT 和 OUTPUT）对两个不同的文件进行。

所以我有两个处理程序，每个处理程序都指向一个不同的文件（my_in_.log 和 my_out_.log），具有相同的日志级别。我想知道我是否可以使用同一个记录器来实现这一点，或者我必须定义两个记录器。我的**配置**是：

```
[loggers]
keys=root, my_log

[handlers]
keys=my_in_hand, my_out_hand

[formatters]
keys=generic_form

...

[logger_my_log]
level=NOTSET
handlers=my_in_hand, my_out_hand
qualname=ws_log

[handler_my_in_hand]
class=handlers.TimeRotatingFileHandler
level=NOTSET
formatter=generic_form
args=('my_in_.log', 'h', 1, 0, None, False, True)

[handler_my_out_hand]
class=handlers.TimeRotatingFileHandler
level=NOTSET
formatter=generic_form
args=('my_out_.log', 'h', 1, 0, None, False, True) 
```

我是否必须为每个处理程序/目的地定义一个记录器（因为我想在不同的文件中记录不同的信息）？有没有办法向记录器指示哪个处理程序将执行此操作？我的意思是，我有一个记录器的两个处理程序，然后只选择一个处理程序来记录一种方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T11:19:50.957

您应该为要将日志发送到的每个目标实例化一个处理程序，然后将 2 个处理程序添加到您的记录器。以下应该可以工作（虽然没有测试）：

```
logger = logging.getLogger()
handler1 = logging.TimedRotatingFileHandler()
handler2 = logging.TimedRotatingFileHandler()
logger.addHandler(handler1)
logger.addHandler(handler2) 
```

当然，添加您可能需要的所有配置和格式选项。基本上它只是向您展示，当您实例化日志处理程序时，您可以将其添加到记录器中。从那一刻起，您的日志记录将被发送到添加到记录器的每个处理程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-15T00:40:24.120

你想要的是

1.  创建 2 个非根记录器。
2.  为每一个制作处理程序，指向不同的文件
3.  将处理程序添加到适当的记录器

    ```
    logger1 = logging.getLogger('general_logger')
    logger2 = logging.getLogger('some_other_logger')

    log_handler1 = logging.handlers.RotatingFileHandler(file_1, *args)
    log_handler2 = logging.handlers.RotatingFileHandler(file_2, *args)

    logger1.addHandler(log_handler1)
    logger2.addHandler(log_handler2) 
    ```

然后

```
 logger1.info("this will be logged to file_1 ")
    logger2.info("this will be logged to file_2 ") 
```

请注意，如果您创建一个 ROOT 记录器和一个不同的记录器，根记录器将记录该不同控制器尝试记录的所有内容。

换句话说，如果

```
 root_logger = logging.getLogger()
    logger2 = logging.getLogger('some_other_logger')

    root_log_handler = logging.handlers.RotatingFileHandler(file_1, *args)
    log_handler2 = logging.handlers.RotatingFileHandler(file_2, *args)

    root_logger.addHandler(root_log_handler)
    logger2.addHandler(log_handler2) 
```

然后

```
 root_logger.info("this will be logged to file_1 ")
    logger2.info("this will be logged to file_1 AND file_2 ") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T12:20:05.600

最后我决定定义两个记录器，因为：

*   它们用于不同的目的。就我而言，一个记录对 Web 服务的输入请求，另一个记录响应。他们使用不同的文件

*   我在前端 Web 服务中使用日志记录配置文件。正如@mike 所说，在记录消息之前添加/删除处理程序不是正确的方法。也感谢@drekyn！

这是我的日志配置文件，如果有人感兴趣，仅供参考：

```
[loggers]
keys=root, ws_in_log, ws_out_log

[handlers]
keys=consoleHandler, ws_in_hand, ws_out_hand

[formatters]
keys=generic_form

[logger_root]
handlers=consoleHandler
level=NOTSET

[logger_ws_in_log]
level=NOTSET
handlers=ws_in_hand
qualname=ws_in_log

[logger_ws_out_log]
level=NOTSET
handlers=ws_out_hand
qualname=ws_out_log

[handler_ws_in_hand]
class=logging.handlers.TimedRotatingFileHandler
level=NOTSET
formatter=generic_form
args=('/path/ws_in_.log', 'h', 1, 0, None, False, True)

[handler_ws_out_hand]
class=logging.handlers.TimedRotatingFileHandler
level=NOTSET
formatter=generic_form
args=('/path/em/ws_out_.log', 'h', 1, 0, None, False, True)

[handler_consoleHandler]
class=StreamHandler
level=DEBUG
formatter=generic_form
args=(sys.stdout,)

[formatter_generic_form]
format='%(asctime)s - %(levelname)s - %(message)s'
datefmt='%Y-%m-%d %H:%M:%S'
class= 
```

再见！

# javascript - 无法读取 null 的属性 childNodes

> ID：15199817
> 
> 赞同：8
> 
> 时间：2013-03-04T10:51:19.337
> 
> 标签：javascript

为什么我得到错误无法读取 null 的属性 childNodes？此代码取自《SAMS Teach Yourself Javascript in 24 hours》一书。

```
 <!DOCTYPE html>
<html>
<head>
    <title>To-Do List</title>
    <script>
    var text = "";
    var pElement = document.getElementById("toDoNotes");
    for (var i=0; i < pElement.childNodes.length; i++) {
        if (pElement.childNodes[i].nodeType ==3){
        text += pElement.childNodes[i].nodeValue;
        };
        }
    alert("The paragraph says:\n\n" + text);
    </script>
</head>
<body>
    <h1>Things To Do</h1>
    <ol id="toDoList">
        <li>Mow the lawn</li>
        <li>Clean the windows</li>
        <li>Answer your email</li>
    </ol>
    <p id="toDoNotes">Make sure all these are completed by 8pm so you can watch the game on TV!</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T10:55:15.417

您的代码需要在页面完全加载后执行。您可以使用[onload](http://www.w3schools.com/jsref/event_onload.asp)事件来执行此操作。

您的脚本被添加到`head`元素中，这将在`toDoNotes`元素添加到 dom 之前执行。因此`document.getElementById("toDoNotes")`将返回一个空值。

```
<html>
<head>
    <title>To-Do List</title>
    <script>
        function init(){

            var text = "";
            var pElement = document.getElementById("toDoNotes");
            for (var i=0; i < pElement.childNodes.length; i++) {
                if (pElement.childNodes[i].nodeType ==3){
                text += pElement.childNodes[i].nodeValue;
                };
                }
            alert("The paragraph says:\n\n" + text);
        }
    </script>
</head>
<body onload="init()">
    <h1>Things To Do</h1>
    <ol id="toDoList">
        <li>Mow the lawn</li>
        <li>Clean the windows</li>
        <li>Answer your email</li>
    </ol>
    <p id="toDoNotes">Make sure all these are completed by 8pm so you can watch the game on TV!</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-15T11:36:16.613

JavaScript 函数在创建 DOM 之前执行。在正文标记结束之前的末尾包含脚本标记。

您的代码：

```
<head>
<script></script>
</head>

<body>
</body> 
```

正确方法：

```
<head>
// Not here
</head>

<body>
<!-- right before <body> tag is closed -->
<script></script>
</body> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T10:56:07.620

因为，当你的 JS 被执行时，你的 DOM 对象还没有被创建。所以把你的脚本放在正文之后。

```
</body>
<script>
    //---your JS code---
</script>
</html> 
```

# jquery - jQuery ScrollTop 多链接问题

> ID：15199820
> 
> 赞同：0
> 
> 时间：2013-03-04T10:51:21.993
> 
> 标签：jquery, jquery-animate, scrolltop

以这种方式完成后，下面的代码可以正常工作。

```
 $('#privacyPolicy').click(function(){
                $('wrapper, div').animate({scrollTop:$('#privacyPolicy' + 'link').offset().top - 230}, 'slow');
            }); 
```

但我需要它来处理多个链接吗？我试过这个：

```
 $('#contents a').click(function(){
                $('wrapper, div').animate({scrollTop:$('id' + 'link').offset().top - 230}, 'slow');
            }); 
```

我究竟做错了什么？提前感谢您在这里提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:56:12.107

你需要使用`each`

```
 $('#contents a').each(function(){
    $(this).click(function(){
    $('#wrapper, div').animate({scrollTop:$('id' + 'link').offset().top - 230},   'slow');
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:57:47.587

尝试替换此行：

```
$('wrapper, div').animate({
     scrollTop:$(this.id + 'link').offset().top - 230
}, 'slow'); 
```

## 笔记：

刚刚看到这`$('wrapper`应该在前面加上 id 表示法`#`或类表示法`.`

# iphone - 无法识别的选择器...错误IOS

> ID：15199823
> 
> 赞同：-5
> 
> 时间：2013-03-04T10:51:29.457
> 
> 标签：iphone, ios, objective-c, uitableview, uitabbarcontroller

请帮我解决这个问题：

> [UITabBarController setTexteAAfficher:]：无法识别的选择器发送到实例 0x7599e30

这是我的代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"detailSegue"])
    {

        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];
        Infos *dvc = [segue destinationViewController];
       dvc.texteAAfficher= [NSString stringWithFormat:@"%@", [maListe objectAtIndex:selectedIndex]];
     }
}    ` 
```

> 我正在尝试将信息从 tableView 传递到选项卡栏视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:58:18.973

根据代码中的错误

```
[UITabBarController setTexteAAfficher:] 
```

中没有这种方法`UITabBarController`。

您是否在 UITabBarController 上使用名为的方法创建了一个类别：（`setTexteAAfficher`在某种与英语混合的语言中）？

如果是，您错过`#import`了类别文件。

# c++ - 如何根据 c++ 模板中的类型类型执行 if else ？

> ID：15199833
> 
> 赞同：43
> 
> 时间：2013-03-04T10:51:52.337
> 
> 标签：c++, templates

```
// template specialization
#include <iostream>
using namespace std;

// class template:
template <class T>
class mycontainer {
    T element;
  public:
    mycontainer (T arg) {element=arg;}
    T increase () {

    //if(T.type==int)//how to do this or something similar?
    //do this if an int
    return ++element;

    //if(T.type==char)
     //if ((element>='a')&&(element<='z'))
      //element+='A'-'a';
      //return element;

    }
}; 
```

我知道如何编写模板专业化并为 char 类型做一个单独的整个类 def。

但是，如果我想在一个代码块中处理所有事情怎么办？

如何检查 T 是 int 还是 char？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-04T10:55:20.990

你可以使用`typeid`：

```
if (typeid(T) == typeid(int)) 
```

或者你可以使用`std::is_same`类型特征：

```
if (std::is_same<T, int>::value) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-04T10:55:34.923

您想要的可能类似于[**编译时 if**](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer)。不幸的是，C++11 没有对这种语言结构的原生支持。

但是，如果您只想检查两种类型是否相同，`std::is_same<>`类型特征应该可以帮助您：

```
#include <type_traits> // <== INCLUDE THIS STANDARD HEADER

// class template:
template <class T>
class mycontainer 
{
    T element;
public:
    mycontainer (T arg) {element=arg;}
    T increase () 
    {
        if (std::is_same<T, int>::value)   // <== THIS IS HOW YOU WOULD USE IT
            return ++element;

        if (std::is_same<T, char>::value)  // <== THIS IS HOW YOU WOULD USE IT
        {
            if ((element>='a') && (element<='z'))
                element+='A'-'a';
        }

        return element;
    }
}; 
```

但是，请记住，条件是*在运行时*评估的，即使 的值`is_same<T, int>::value`在编译时是已知的。这意味着语句的 the和分支都**必须****编译**！`true``false``if`

 **例如，以下内容是不合法的：

```
if (std::is_same<T, int>::value)
{
    cout << element;
}
else if (std::is_same<T, my_class>::value)
{
    element->print();  // Would not compile when T is int!
} 
```

此外，正如[Xeo](https://stackoverflow.com/users/500104/xeo)在评论中正确指出的那样，编译器可能会发出警告，因为您的条件将始终评估为`true`或 to `false`，因此两个分支之一将包含无法访问的代码。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-02-29T07:28:53.543

您可以使用显式模板专业化

```
#include <iostream>
using namespace std;

// class template:
template <class T>
class mycontainer {
    T element;
  public:
    mycontainer (T arg) {element=arg;}
    T increase();
};

template<>
int mycontainer<int>::increase(){
    return ++element;
}

template<>
char mycontainer<char>::increase(){
    if ((element>='a')&&(element<='z'))
       element+='A'-'a';
    return element;
}

int main(){
        mycontainer<int> A(10);
        mycontainer<char> B('x');

        cout << A.increase() <<endl;
        cout << B.increase() <<endl;
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-04T10:56:37.400

简单的重载怎么样？

```
// in the private section
static int& do_increase(int& i){ return ++i; }
static char& do_increase(char& c){
  if(c >= 'a' && c <= 'z')
    c += 'A' - 'a';
  return c;
}
template<class U>
static U& do_increase(U& arg){
  // some default implementation?
  return arg;
} 
```

（请注意，该标准不保证 a 的数值按字母顺序排列`char`。）

然后只需将其`increase`称为 as `return do_increase(element);`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-04T10:58:43.073

这里通常的解决方案是转发到带有附加参数的重载函数。就像是：

```
template <typename T>
class MyContainer
{
    T increase( int const* ) { /* special treatment for int */ }
    T increase( ... )        { /* default treatment         */ }
public:
    T increase()
    {
        return increase( (T const*)0 );
    }
}; 
```

有一点想象力，你可以想出各种各样的区别。如果您使用额外的参数模板创建目标函数，您甚至可以利用 SFINAE：设计虚拟参数，以便模板类型替换失败，并且该函数将不被考虑在重载集中。并且由于所有函数都是内联的，因此很可能不会有额外的开销，前提是您进行了优化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T20:09:48.057

这与 Andy Prowls 的回答类似，但都是在编译时使用具有专业化功能的最小辅助类完成的。

在这种情况下，您有一个实际执行特化的助手，但您也可以让助手类只接受一个布尔值，然后使用类似的东西`std::is_same<T, int>::value`将该值作为模板参数传递。

```
template <typename T>
struct myContainerHelper;
{
    // General Case
    static inline T increase(T element)
    {
        return ++element;
    }
};

template <>
struct myContainerHelper<char>
{
    // Specific case
    static inline char increase(char element)
    {
        if ((element>='a')&&(element<='z')) element+='A'-'a';
        return element;
    }
};

template <class T>
class mycontainer 
{
    T element;
public:
    mycontainer (T arg) {element=arg;}
    T increase () 
    {
        return myContainerHelper<T>::increase(element);
    }
}; 
```

这允许您只专门化单个函数而不是整个类。我正在使用带有静态的模板类，因为我已经习惯了 VS2012 对函数模板的部分专业化的限制。**

# android - Android 适配器是异步的吗？

> ID：15199834
> 
> 赞同：2
> 
> 时间：2013-03-04T10:52:04.333
> 
> 标签：android, autocompletetextview, android-adapter

我从谷歌查看了[这个示例](https://developers.google.com/places/training/autocomplete-android)，它是一个适配器，它对`AutoCompleteTextView`API 进行网络调用以检索自动完成建议。

它不使用`AsynkTask`或线程，但在`StrictMode`没有互联网连接时不发出警告并且不锁定 UI，我想知道为什么。

本身是`ArrayAdapter`异步的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:57:27.787

[过滤是异步执行的。](http://developer.android.com/reference/android/widget/Filter.html)

> [`filter(CharSequence)`](http://developer.android.com/reference/android/widget/Filter.html#filter%28java.lang.CharSequence%29)通过调用或[`filter(CharSequence, android.widget.Filter.FilterListener)`](http://developer.android.com/reference/android/widget/Filter.html#filter%28java.lang.CharSequence,%20android.widget.Filter.FilterListener%29)异步执行的过滤操作。当这些方法被调用时，过滤请求会被发送到请求队列中并稍后处理。对这些方法之一的任何调用都将取消任何先前未执行的过滤请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:00:29.953

到目前为止，基`Adapter`类（包括）不包含任何*数据获取*机制。您必须通过设置数据。`ArrayAdapter`*`add()`*

 *描述的自动完成方法使用过滤。`ArrayAdapter`实现`Filterable`。此特定实现在单独的线程中运行过滤方法。您可以在[此处查看源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/widget/Filter.java#Filter.filter%28java.lang.CharSequence%2Candroid.widget.Filter.FilterListener%29)。*

# java - Hadoop：值的不同计数（Java）

> ID：15199835
> 
> 赞同：0
> 
> 时间：2013-03-04T10:52:06.197
> 
> 标签：java, hadoop, distinct

映射器中的 (key,value) 示例：(User,(logincount,commentcount))

```
public void map(LongWritable key, Text value, Context context)
                throws IOException, InterruptedException {

            String tempString = value.toString();
            String[] stringData = tempString.split(",");

            String user = stringData[2];
            String activity = stringData[1];

            if (activity.matches("login")) {
                outCount.set(1,0);
            } 
            if (activity.matches("comment")) {
                outCount.set(0,1);
            }

            outUserID.set(userID);

            context.write(outUserID, outCount);

        } 
```

我计算用户的登录和评论。现在我想更改计数：计算每次登录并查看用户是否写了评论。我怎样才能实现我的映射器或缩减器只搜索用户的一条评论并“忽略”所有其他评论（该用户的）？

**编辑：**

日志文件：

```
2013-01-01T16:50:56.056+0100,login,User14133,somedata,somedata
2013-01-01T16:55:56.056+0100,login,User14133,somedata,somedata
2013-01-01T05:20:44.044+0100,comment,User14133,somedata,somedata,{text: "something here"}
2013-01-01T05:24:44.044+0100,comment,User14133,somedata,somedata,{text: "something here"}
2013-01-01T20:50:13.013+0100,login,User76892,somedata,somedata 
```

目前输出：

```
User14133   Logins: 2   Comments: 2
User76892   Logins: 1   Comments: 0 
```

输入：

```
Mapper<LongWritable, Text, Text, UserCount>
Reducer<Text, UserCount, Text, UserCount>

public static class UserCount implements Writable {
        public UserCountTuple() {
            set(new IntWritable(0), new IntWritable(0));
        } 
```

我的 mapreduce 计算用户的每次登录和每条评论并总结它们。我想要实现的是这样的 - >输出：

```
User14133   Logins: 2      Comments: 0 or 1 (Did User wrote one comment?)*

 * In Mapper or Reducer (?)
 for every line in the log{
   if (user wrote comment){
     return 1;
     ignore all other comments from same user in this log;
   } else if (user didn't write anything) return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:29:22.210

如果我理解正确，您只想获取登录的唯一用户总数以及评论总数？

我建议在 Hadoop 中使用“聚合”reducer。

在您的映射器中，输出如下所示的行：

```
UniqValueCount:unique_users      User14133
LongValueSum:comments            1
UniqValueCount:unique_users      User14133
LongValueSum:comments            1
UniqValueCount:unique_users      User14133
LongValueSum:comments            1
UniqValueCount:unique_users      User14133
LongValueSum:comments            1
UniqValueCount:unique_users      User76892
LongValueSum:comments            1 
```

然后在此运行“聚合”reducer，你应该得到一个如下所示的输出：

```
unique_users    2
comments        5 
```

我假设这是你想要的？

# css - 列表内列表上的向下箭头

> ID：15199838
> 
> 赞同：1
> 
> 时间：2013-03-04T10:52:15.393
> 
> 标签：css

我正在尝试在导航菜单中放置一个向下箭头，`li`如果`li`.

将鼠标悬停在*商店*链接上以查看我遇到困难的地方 - [http://codepen.io/anon/pen/ABucF](http://codepen.io/anon/pen/ABucF)

箭头（或 V 用于我的演示目的）应该在*Shop*选项卡*Check Out*和*My Account*之后，而不是在其中。

我如何能够在 CSS 中实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:13:49.107

您正在尝试查看一个元素以检查特定条件并基于此设置其父级的样式。

不幸的是，CSS 还不能用于设置父元素的样式。

您最好的选择是简单地在您想要样式化的每个元素上添加一个类并这样做，或者在需要它的每个锚标记中物理放置一个图标/img。

或者使用 JavaScript 来实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:15:35.690

给有子孩子的父母上课，即商店

```
.parent:after{
content:"V";
//or
background:url(image.png) no-repeat position;

} 
```

[更新的笔](http://codepen.io/sahilpopli/pen/GcFCb)

# ruby-on-rails - 带有 twitter API 的 Ruby on Rails

> ID：15199841
> 
> 赞同：0
> 
> 时间：2013-03-04T10:52:19.897
> 
> 标签：ruby-on-rails, ruby, twitter

这是否可以在 Ruby on Rails 中使用 twitter API 和omniauth 更新您的 Twitter 帐户上的博客文章。请给我建议。更多：我有一个博客，我在博客上创建了一个新帖子，这个更新应该去我的推特账户以及我的推文，这条推文应该显示在我的博客主页上。请给我建议。怎么可能。

问候， 维奈·辛格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:53:52.120

当您在本网站上发帖时，我们希望您之前进行过后台搜索。

[无论如何，你应该在 ruby​​gems 网站上](http://rubygems.org/search?query=twitter)找到你需要的东西

# android - Android问题中的布局

> ID：15199842
> 
> 赞同：2
> 
> 时间：2013-03-04T10:52:24.887
> 
> 标签：android, xml, android-linearlayout

我正在尝试这样做`View`：

[列表视图 http://leyth.dk/upload/server/php/files/NewScreen.png](http://leyth.dk/upload/server/php/files/NewScreen.png)

**问题**

我怎样才能把同一行的邮编标签放在`TextView`？

我试图`LinearLayout`为两者做一个，但我无法让它工作，我希望有人可以帮助我。

** 更新 --> 被遗忘的代码**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#43bd00"
        android:textSize="16sp"
        android:text="Navn : "
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />
    <!-- Description label -->

    <TextView
        android:id="@+id/adresse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:text="Adresse : "
        android:textColor="#5d5d5d"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/email"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"
        android:text="Post Nr : "
        android:paddingBottom="2dip">
    </TextView>
    <!-- Linear layout for cost and price Cost: Rs.100 -->
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <!-- Cost Label -->

        <TextView
            android:id="@+id/by"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="By : "
            android:textColor="#5d5d5d"
            android:textStyle="bold" />
    <!-- Price Label -->       
    </LinearLayout>
    </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:03:40.577

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>
    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:00:20.280

嗨，请尝试使用相对布局检查以下代码

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="38dp"
        android:layout_marginTop="69dp"
        android:text="Name :"
        android:textColor="#000"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="54dp"
        android:text="Address :"
        android:textColor="#000"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView2"
        android:layout_below="@+id/textView2"
        android:layout_marginTop="48dp"
        android:text="Zip :"
        android:textColor="#000"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:text="getname();"
        android:textColor="#000"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView3"
        android:layout_alignLeft="@+id/textView4"
        android:layout_marginLeft="16dp"
        android:text="getaddress();"
        android:textColor="#000"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_alignLeft="@+id/textView5"
        android:text="getzip();"
        android:textColor="#000"
        android:textSize="20sp" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:03:59.623

使用权重：

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <!-- Name Label -->
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightsum="10"
         >
        <TextView
            android:id="@+id/name"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:textColor="#43bd00"
            android:textSize="16sp"
            android:text="Navn : "
            android:textStyle="bold"
            android:paddingTop="6dip"
            android:paddingBottom="2dip" />
       <EditText
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="7"
    />
       </LinearLayout>
      <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightsum="10"
         >
      <!-- add other lable and text  here(as above)-->
     </LinearLayout>
     <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightsum="10"
         >
      <!-- add other lable and text  here(as above)-->
     </LinearLayout>
    </LinearLayout> 
```

等等....希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:05:07.440

看看[GridLayout](http://android-developers.blogspot.in/2011/11/new-layout-widgets-space-and-gridlayout.html)。它专为此类*带标签的表单*场景而构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-29T06:33:40.247

尝试使用 FrameLayout 在 TextView 上方放置 zip 标签。希望这会有所帮助。

# jquery - jQuery动态表单提交两次

> ID：15199846
> 
> 赞同：0
> 
> 时间：2013-03-04T10:52:43.217
> 
> 标签：jquery, forms, submit

我试图动态创建表单并将其提交到服务器上，其中数据是`$(<checkbox>)`.

```
$('<form>').attr("method", "post")
           .attr('action', '/proceed')
           .append(data)
           .submit(); 
```

服务器上的问题来自 2 个请求：发布数据并获取数据 - 只是空表单。

提交发生一次，我之前尝试过取消绑定提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:58:44.923

a 的默认操作`<button />`是在单击表单时提交表单。

正如我在评论中提到的，您需要在创建自己的提交之前取消此提交；

```
 $('.activateEventButton').on('click', function (e) { 
     activateEvents(); 

     e.preventDefault(); // prevent the submission.
 }); 
```

# c# - 如何更改内部的类和函数以适合任何列表框项目？

> ID：15199853
> 
> 赞同：0
> 
> 时间：2013-03-04T10:53:08.960
> 
> 标签：c#

我有这个类，我用它来为 Form1 的 listBox 中的文本着色：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

namespace GatherLinks
{
    class ColorText
    {

        public static void Texts(RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;

            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        }

        public static void ColorListBox(List<string> data, DrawItemEventArgs e)
        {
            int keywords = 0;
            string keyword = null;
            string url = data[e.Index].Substring(0, 5);
            if (data[e.Index].Contains("Local KeyWord:"))
            {
                keywords = data[e.Index].IndexOf("Local KeyWord:");
                keyword = data[e.Index].Substring(keywords, 14);
            }
            else
            {
                keywords = data[e.Index].IndexOf("Localy KeyWord:");
                keyword = data[e.Index].Substring(keywords, 15);
            }

            using (Font f = new Font(FontFamily.GenericSansSerif, 8, FontStyle.Regular))
            {
                if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
                    e.Graphics.FillRectangle(Brushes.LightBlue, e.Bounds);
                else
                {
                    using (SolidBrush sb = new SolidBrush(SystemColors.Window))
                        e.Graphics.FillRectangle(sb, e.Bounds);
                }

                SizeF size = e.Graphics.MeasureString(url, f);
                using (SolidBrush sb = new SolidBrush(Color.Red))
                {
                    e.Graphics.DrawString(url, f, sb, new PointF(e.Bounds.X, e.Bounds.Y));
                    string toMeasure = data[e.Index].Substring(0, keywords - 1);
                    float startPos = e.Graphics.MeasureString(toMeasure, f).Width;
                    e.Graphics.DrawString(keyword, f, sb, new PointF(e.Bounds.X + (int)startPos, e.Bounds.Y));
                }
                // string token = data[e.Index].Substring(url.Length, data[e.Index].LastIndexOf(" --- ") - (url.Length));
                // e.Graphics.DrawString(token, f, Brushes.Black, new PointF(e.Bounds.X + size.Width, e.Bounds.Y));
                // Get the string to print in black.
                int first = url.Length;
                int last = data[e.Index].LastIndexOf(" --- ") + 5; //(5 = length of " --- ").
                int length = last - first;
                string token = data[e.Index].Substring(first, length);

                // Get the place to draw it.
                size = e.Graphics.MeasureString(url, f);
                float positionX = size.Width;

                // Draw the string.
                e.Graphics.DrawString(token, f, Brushes.Black, new PointF(positionX, e.Bounds.Y));

                //size = e.Graphics.MeasureString(url + token, f);
                //size = e.Graphics.MeasureString("Url:" + token, f);
                //e.Graphics.DrawString(data[e.Index].Substring(data[e.Index].IndexOf(token) + token.Length, data[e.Index].LastIndexOf(": ") - token.Length - data[e.Index].IndexOf(token) + 1), f, Brushes.Black, new PointF(size.Width, e.Bounds.Y));

                token = data[e.Index].Substring(data[e.Index].LastIndexOf(": ") + 2);
                size = e.Graphics.MeasureString(data[e.Index].Substring(0, data[e.Index].LastIndexOf(token)), f);
                using (SolidBrush sb = new SolidBrush(Color.Green))
                    e.Graphics.DrawString(token, f, sb, new PointF(e.Bounds.X + size.Width + 4, e.Bounds.Y));

                e.DrawFocusRectangle();
          }
        }
    }
} 
```

问题是在函数 ColorListBox 中它正在寻找特定的字符串/项目：“Local KeyWord”

但在 Form1 中，listBox 可能包含任何我的意思是它可能包含我希望此函数适用于 listBox 中的任何字符串的任何字符串。

例如，现在在 Form1 中我做了：

```
 data.Add("System Fan Speed - ");
                listBox1.DataSource = data; 
```

我想要做的是右侧的文本，例如 Gpu 温度的名称将是红色，然后字符串“-”将是黑色，然后它自身的温度数字将是绿色。我希望在这个函数中，我将能够为我在列表框项目中选择的每个部分设置颜色。

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            if (e.Index == -1)
            {
            }
            else
            {
                string url = data[e.Index].Substring(0, 5);

                using (Font f = new Font(FontFamily.GenericSansSerif, 8, FontStyle.Regular))
                {
                    ColorText.ColorListBox(data, e);
                }
            }
        } 
```

# node.js - Schema 可以使用它自己的模型进行验证吗？

> ID：15199854
> 
> 赞同：0
> 
> 时间：2013-03-04T10:53:09.410
> 
> 标签：node.js, mongoose

例如，假设我有一个用户模式，并且我想在尝试将用户保存到数据库之前验证用户名是否唯一。

```
...

UserSchema.path('username')
  .validate(function (value, respond) {
    User.findOne({ username: this.username }) // This isn't valid.
      .lean()
      .select('_id')
      .exec(function (err, user) {

        if (err) {
          winston.warn('User_username: Error looking for duplicate users');
          respond(false);
        }

        // If a user was returned, then the user is non-unique!
        if (user) {
          respond(false);
        }

        respond(true);
      });
  });

...

var User = mongoose.model('User', UserSchema); 
```

我知道我可以使用`mongoose.model('User').findOne(...)`，但这似乎有点傻，没有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:20:47.317

您可以通过设置在架构中创建唯一索引`unique: true`。这将利用 mongodb 中可用的唯一索引选项。这是我使用此选项的模型之一的示例片段：

```
// The (generated) uniform resource locator
url: {
    // ... which is required ...
    required: true,
    // ... which is an unique index ...
    unique: true,
    // ... and is a string.
    type: String
} 
```

**来自评论的复合键：**

```
Schema.index({ username: 1, accountCode: 1 }, { unique: true }) 
```

# leaflet - 在传单中选择两个标记并在它们之间画线

> ID：15199855
> 
> 赞同：2
> 
> 时间：2013-03-04T10:53:09.513
> 
> 标签：leaflet

我对传单非常陌生。

我在传单的地图上绘制了多个标记/圆圈标记。

现在，当我选择它们时，我必须在两个标记//圆形标记之间画线。

任何人都可以帮助做到这一点。

```
var map = L.map('map').setView([51.49521, -0.10062], 13);
L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>'
    }).addTo(map);

 // get all 6 points
  var points = new Array(
[51.49346, -0.11518],
[51.49827, -0.06763],
[51.48331, -0.08154],
[51.52284, -0.09974],
[51.51932, -0.06695],
[51.50949, -0.1363]
   );

  // centerpoint
  var centerPoint = new L.LatLng(51.49521, -0.10062);
  var marker1 = L.marker([51.49521, -0.10062]).addTo(map);

  // adding allo points to map
  for (var i =0 ; i < points.length; i++)
  { 
     // here I can use marker also(if solution is possible with markers)
L.circleMarker([points[i][0],points[i][1]]).addTo(map);
var point = new L.LatLng(points[i][0],points[i][1]);
var pointList = [point, centerPoint];

    var firstpolyline = new L.Polyline(pointList, {
    color: 'red',
    weight: 5,
    smoothFactor: 1

   }).addTo(map);
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T12:30:41.380

您必须存储选择（但它可以是`polyline`标记中的点或标志）。当您选择两个或更多标记时，您必须向您添加点`polyline`- 它在地图上绘制线，否则您必须从`polyline`. 请参阅有关以下内容的详细信息：http `polyline`: [//leafletjs.com/reference.html#polyline](http://leafletjs.com/reference.html#polyline)。

例如，请参见下一个代码：

```
// Init map
var map = L.map('map').setView([53.902257, 27.561640], 13);
L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

// Init selection and lines logic
var selection = [];
var polyline = L.polyline([], {color: 'red'}).addTo(map);

var onClick = function () {
    var index = selection.indexOf(this);
    if (index !== -1) {
        this.setRadius(10);
        selection.splice(index, 1);
        polyline.spliceLatLngs(index, 1);
    } else {
        this.setRadius(25);
        selection.push(this);
        polyline.addLatLng(this.getLatLng())
    }
};

// Init circle markers
L.circleMarker([53.90, 27.56]).on('click', onClick).addTo(map);
L.circleMarker([53.92, 27.60]).on('click', onClick).addTo(map);
L.circleMarker([53.88, 27.60]).on('click', onClick).addTo(map);

// Init selection droping on ESC pressed
L.DomEvent.on(document, 'keydown', function (e) {
    if (e.keyCode === 27) {
        var oldSelection = selection.slice(0);
        for (var i = 0, l = oldSelection.length; i < l; i++) {
            oldSelection[i].fire('click');
        }
    }
}); 
```

**升级版：**

类似地，请参阅更新的代码：

```
var map = L.map('map').setView([51.49521, -0.10062], 13);
L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>'
}).addTo(map);

// get all 6 points
var points = [
    [51.49346, -0.11518],
    [51.49827, -0.06763],
    [51.48331, -0.08154],
    [51.52284, -0.09974],
    [51.51932, -0.06695],
    [51.50949, -0.1363]
];

// polyline
var selection = [];
var polyline = new L.Polyline([], {
    color: 'red',
    weight: 5,
    smoothFactor: 1
}).addTo(map);

var changeMarkerState = function (marker, select) {
    if (marker instanceof L.CircleMarker) {
        if (select) {
            marker.setRadius(25);
        } else {
            marker.setRadius(10);
        }
    }
    if (marker instanceof L.Marker) {
        if (select) {
            marker.options.title = 'selected';
        } else {
            marker.options.title = 'unselected';
        }
        marker.setIcon(new L.Icon.Default());
    }
};

var onClick = function () {
    var index = selection.indexOf(this);
    if (index !== -1) {
        changeMarkerState(this, false);
        selection.splice(index, 1);
        polyline.spliceLatLngs(index, 1);
    } else {
        changeMarkerState(this, true);
        selection.push(this);
        polyline.addLatLng(this.getLatLng())
    }
};

// centerpoint
var centerPoint = new L.LatLng(51.49521, -0.10062);
var marker1 = L.marker([51.49521, -0.10062],
        {title: 'unselected'}).on('click', onClick).addTo(map);

// adding allo points to map
for (var i = 0, l = points.length; i < l; i++)
{
    // here I can use marker also(if solution is possible with markers)
    L.circleMarker(points[i]).on('click', onClick).addTo(map);
} 
```

# php - 将访问者的 IP 与范围 IP 列表进行比较的最快方法

> ID：15199859
> 
> 赞同：0
> 
> 时间：2013-03-04T10:53:20.413
> 
> 标签：php, ip

让我通过给你一个例子来解释我会做什么。假设我们想阻止（禁用或隐藏）我们的一些网站脚本给来自特定国家/地区的用户，我可以从[这里](http://ipinfodb.com/ip_country_block.php#blocklist)获取该国家/地区的 IP 列表。这给了我 aa.bb.cc.0/33 kk.ss.yy.0/24 等形式的 IP 范围

但是，我正在寻找比较访问者的 ip 与 PHP 中列表的最快方法。我应该将该列表存储在文件中吗？或者ips必须存储在数据库中？

如果我使用 .htaccess 的拒绝命令，我已完全阻止用户访问我们的任何网站。因此，我必须在 PHP 中进行，因为我有更多的灵活性。我所做的是将这些 IP 范围存储在一个文件中，并且每次将用户的 IP 与文件中的 IP 进行比较。但我的印象是这不是一个最好的主意。请让我知道最快的方法是什么以及如何。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:07:37.480

如果您必须使用 PHP，则将被阻止的 IP 范围列表存储在数据库中。这将是查找此信息的最快方法之一，而不是读取文本文件或从静态 PHP 代码生成哈希图（更新也很痛苦）。为了提高查找速度，请在字段上正确使用索引并使用缓存，因为同一 IP 地址可能会查看您网站上的多个页面。

生成您的数据库表并为 IP 的不同部分使用 5 列。这需要每月或在您想要更新列表时进行。这可以使用您选择的脚本语言并使用 cron 或类似的东西来完成。

```
blocked_tbl:
classA   classB   classC    min    max
------   -------  ------   ----- ------
214       101       99       1     255
178       22        45       1     255
...       ...       ...     ...    ... 
```

然后您可以将网站访问者的 IP 地址与该范围进行比较，如下所示：（使用 substr 方法将 PHP 中的 IP 地址拆分为 4 部分或分解，这样您就有了 $ipA、$ipB、$ipC 和 $ipD）

```
SELECT count(*) FROM blocked_tbl WHERE
blocked_tbl.classA = $ipA AND
blocked_tbl.classB = $ipB AND
blocked_tbl.classC = $ipC AND
(blocked_tbl.min <= $ipD AND blocked_tbl.max >= $ipD) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:03:05.200

似乎它已经在[给定 IP 范围/掩码的匹配 IPv4 地址上得到了回答？](https://stackoverflow.com/questions/10421613/match-ipv4-address-given-ip-range-mask)

至于如何存储它们，我不会为此建立一个数据库。也许是您读入数组的平面文本文件？如果你已经有一个数据库，是的，使用它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:01:12.073

最好的方法是将IP列表存储在数据库中，将IP列作为主键，并检查表中用户IP的出现。

另一种方法（没有数据库）是创建一个 IP 哈希表并检查 O(1) 用户 IP 的出现。

显然，您必须在检查之前对您的 IP 进行网络屏蔽...

# mysql - 在 B 列 (MySQL) 中的文本中查找 A 列的确切单词

> ID：15199861
> 
> 赞同：0
> 
> 时间：2013-03-04T10:53:23.277
> 
> 标签：mysql, string, locate, exact-match

我有 2 个表，并尝试删除表 1 中的所有条目（每行多个单词），其中包含表 2 中的一个条目。表 2 中的这些词可以在表 1 的字符串中的某个位置。

它应该在“这里的大房子”或“大房子”中找到类似的东西：“房子”

它不应该找到这样的东西：“houses”中的“house”

我尝试使用这样的定位功能：

```
CREATE TABLE `test`
AS (
  SELECT
    `table1`.`term1`,
    `table2`.`term2`
  FROM `table1`,`table2`
  WHERE
    locate(concat(' ',`table2`.`term2`,' '), concat(' ',`table1`.`term1`,' '))
); 
```

问题是：它找到了一些，但不是全部，我看不出背后的逻辑为什么它不能适用于所有事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:08:08.717

如果您要查找的单词周围有任何标点符号，则您的匹配将不起作用。

您可以将字段中的**所有标点符号替换****为空格**。

但是，我认为更清洁的解决方案是**正则表达式**：

```
CREATE TABLE test
AS
SELECT table1.term1, table2.term2
FROM table1, table2
WHERE table1.term1 REGEXP CONCAT('(^|[^A-Za-z]])',table2.term2,'([^A-Za-z]|$)'); 
```

`(^|[^A-Za-z])`表示字段的开始或不是 AZ 或 az。
`([^A-Za-z]|$)`表示不是 AZ 或 az 或字段结束。

[SQLFiddle](http://www.sqlfiddle.com/#!2/1bd16/1)。

**编辑：**

虽然上述内容很漂亮，但它并不是特别有效。（`140 ms`在一个小测试中）

**更高效：(**，`80 ms`在适当的数据上可能会更好）

```
SELECT term1, term2
FROM table1, table2
WHERE term1 LIKE CONCAT('%',term2,'%')
  AND term1 REGEXP CONCAT('(^|[^A-Za-z])',term2,'([^A-Za-z]|$)'); 
```

**更有效的方式：**（`8 ms`）（出于某种奇怪的原因，MySQL 似乎不能很好地执行正则表达式）

```
SELECT COUNT(*)
FROM table1, table2
WHERE term1 LIKE CONCAT(term2,' %')
   OR term1 LIKE CONCAT(term2,',%')
   OR term1 LIKE CONCAT(term2,'.%')
   OR term1 LIKE CONCAT(term2,';%')
   OR term1 LIKE CONCAT('% ',term2,' %')
   OR term1 LIKE CONCAT('% ',term2,',%')
   OR term1 LIKE CONCAT('% ',term2,'.%')
   OR term1 LIKE CONCAT('% ',term2,';%')
   OR term1 LIKE CONCAT('% ',term2) 
```

**效率更高一点**：( `4 ms`)

```
SELECT COUNT(*)
FROM table1, table2
WHERE CONCAT(' ', REPLACE(REPLACE(REPLACE(term1, ',', ' '), '.', ' '), ';', ' '), ' ')
        LIKE CONCAT('% ',term2,' %') 
```

您可能希望在上面包含更多字符。

[SQLFiddle](http://www.sqlfiddle.com/#!2/961c6/3)。

请注意，以上大部分内容取决于数据，有些可能在某些情况下效率更高，而在其他情况下则更糟（但正则表达式可能会落后）。

**更有效率？**

[全文索引 + 搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。

# knockout.js - 动态视图模型的淘汰赛验证

> ID：15199862
> 
> 赞同：1
> 
> 时间：2013-03-04T10:53:23.880
> 
> 标签：knockout.js, data-annotations, knockout-mapping-plugin, knockout-validation

我正在动态创建淘汰视图模型，并且此代码运行良好。我想在这个视图模型中添加验证。我可以在这个视图模型中添加验证吗？这是好方法还是我应该自己创建视图模型并自己添加验证属性？或者任何客户端验证都适用于数据注释？

```
var viewModel = function () {
        var self = this;
        self.States  =ko.observableArray();
        self.Countries =ko.observableArray();
        self.showStates = ko.observable(false);
        self.saveData = function (self) { //save data function };
  }
var VM= new viewModel();

$.ajax({
success: function(data)
{ 
   var newVM = ko.mapping.fromJS(data, {}, VM);
   // newVM.FirstName, newVM.LastName
   // I want to add validation in this newVM 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:49:37.580

由于您使用 KO Mapping 插件来加载数据，因此您还可以选择挂钩到“创建”事件并根据需要为单个项目添加验证。如下所示：

```
$.ajax({
success: function(data)
{ 
  var mappingOption = {    
       'FirstName': {
          create: function (option) {
             return ko.observable(option.data).extend({ required: true });
          }
       }, 
       'LastName': {
          create: function (option) {
             return ko.observable(option.data).extend({ required: true });
          }
       }
   }
   // Now load your viewModel with the mapping option you just specified
   var newVM = ko.utils.arrayMap(data, function (item) {
       return ko.mapping.fromJS(item, mappingOption);
   });
   // ... From now on... in your newVM... firstName and lastName will be 'required'
} 
```

希望这可以帮助。

谢谢。

# css - 您可以在背景图像重复之间创建空间吗？

> ID：15199863
> 
> 赞同：9
> 
> 时间：2013-03-04T10:53:30.470
> 
> 标签：css, background-image, space, background-repeat

是否可以重复背景图像，但在下一次重复开始之前指定像素数。

即背景：url(img.png) *[40px后]* repeat-x；

我不想在图像中添加空白空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:09:35.437

```
background-repeat: space;
background-repeat: round; // round(520 / 100) = round(5.2) = 5 
```

浏览器将在空间中渲染五张图像，但将图像宽度调整为 104px (520px / 5)。图像变宽以适合容器。[此处的完整详细信息](http://www.sitepoint.com/css3-background-repeat-space-round/) 或阅读 [背景大小属性](http://www.sitepoint.com/css3-background-size-property/)

# java - 将数据从一页发布到另一页

> ID：15199864
> 
> 赞同：1
> 
> 时间：2013-03-04T10:53:31.023
> 
> 标签：java, php, post, security

我正在尝试如下实现一些数据流

```
 ______________               _____________                    _____________
| myecom.com   |  submit     | myecom.com  |  add additional  | payment.com |
| product.html |------------>| process.php |----------------->|   pay.php   |
|   myform     |  form data  |             |  data & submit   |             |
 --------------               -------------                    -------------
                                                                     |
                      ______________                                 |
                     |  myecom.com  |<--------------------------------
                     | receiver.php |      success or failure info
                      -------------- 
```

1.  电子商务网站从用户那里收到一些信息
2.  将信息提交给内部处理器
3.  内部处理器处理数据
4.  处理后的数据连同一些附加数据被提交给外部处理器
5.  外部处理器发回一些成功/失败报告

我的目标是执行第 4 步，而不通知用户将哪些数据提交给外部处理器。换句话说，我想将一些数据从内部处理器发布到外部处理器。

仅供参考，只是 cURL 不会做，因为它不会重定向。该页面必须重定向到 payment.com/pay.php。此外，它需要特定于 PHP，任何技术如 Java 等都可以。我正在考虑使用 cURL 将数据存储在会话中，然后使用 javascript 重定向。但是还有其他方法吗？

非常感谢您抽出宝贵时间 Khalid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:11:10.617

不如这样做呢？

```
 ______________               _____________                       _____________
| myecom.com   | (1) submit  | myecom.com  | (2) add additional  | payment.com |
| product.html |------------>| process.php |-------------------->|   pay.php   |
|   myform     |  form data  |             |  data & submit      |             |
--------------               -------------                        -------------
                                  |    ^                               |
                                  |    |                               |
                     (4) redirect |    ---------------------------------
                                  |       (3) success or failure info
                                  v
                             ______________ 
                            |  myecom.com  |
                            | receiver.php |      
                             -------------- 
```

**说明：**您的内部处理器将用户数据和附加数据发送到外部处理器。由于是您的服务器向外部处理器发出 POST 请求，因此用户永远不会看到请求，因此无法看到正在发送的数据。

我不是 PHP 程序员，但在“PHP post request”上的快速 Google 查询显示了这两个链接，看看它们是否对您有帮助：

[如何使用 PHP 发送 POST 请求？](https://stackoverflow.com/questions/5647461/how-do-i-send-a-post-request-with-php)

[从 PHP 发出 POST 请求的三种方法](http://www.lornajane.net/posts/2010/three-ways-to-make-a-post-request-from-php)

# php - 找不到驱动程序 (php, PDO)

> ID：15199866
> 
> 赞同：-3
> 
> 时间：2013-03-04T10:53:42.187
> 
> 标签：php, html, mysql, database

我发现错误：在下一个脚本中找不到驱动程序。我现在正在为此烦恼一段时间，也许你看到了我的错。

这是我的代码：

```
class ConnectStation {
  private $host = "localhost";
  private $DatabaseType = "mysql";
  private $database = array (
    1 => "Database_one",
    2 => "Database_two",
    3 => "Database_true"
);
private $user1 = "MyUsername1";
private $pass1 = "MyPassword1";
private $user2 = "MyUsername2";
private $pass2 = "MyPassword2";

public function ConnectDB($user, $database){
if ($database==""){$database=1;}
try{
    switch ($user){
       case "ReadOnly":
       $connection = new PDO("'".$this->DatabaseType.":host=".$this->host.";dbname=".$this->database[$database]."', '".$this->user1."', '".$this->pass1."'");
       $connection->exec('SET CHARACTER SET utf8');
       return $connection;
       break;
       case "Admin":
       $connection = new PDO("'".$this->DatabaseType.":host=".$this->host.";dbname=".$this->database[$database]."', '".$this->user2."', '".$this->pass2."'");
       $connection->exec('SET CHARACTER SET utf8');
       return $connection;
       break;
       }
    }
catch(PDOException $e){
    echo $e->getMessage();
    }
}
} 
```

到目前为止，连接比我用于发送到数据库的查询的脚本要好。代码是这样的：

```
$userCard = new ConnectStation;

$query = "SELECT username FROM users";
foreach ($this->ConnectDB('ReadOnly', 1)->query($query) as $row){
echo $row['username']."<br>";
} 
```

欢迎任何帮助或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:08:02.590

您对 PDO 构造函数的调用完全被不必要的引号和奇怪的参数顺序搞砸了。做就是了：

```
$dsn = sprintf('%s:host=%s;dbname=%s', $this->DatabaseType, $this->host, $this->database[$database]);
$connection = new PDO($dsn, $this->user1, $this->pass1); 
```

# ios - 如何使用 OpenGL-es 绘制墙固盒？

> ID：15199869
> 
> 赞同：0
> 
> 时间：2013-03-04T10:53:49.943
> 
> 标签：ios, opengl-es

我想做一堵墙或一个像这样的实心盒子： ![在此处输入图像描述](../Images/05ba5f47fc5f8d06142f39baf1b88202.png) ![在此处输入图像描述](../Images/df1a555ee711c504384293348139e894.png) ![在此处输入图像描述](../Images/32533b4cfd3a3cc02143f048d88da3f4.png) 你可以看到，我在墙上有一扇窗户。目前，我创建了 4 个节点并将它们集成以制作窗口，并将它们添加到父节点。但我不能改变纹理，只能改变颜色。所以我想画这样一堵墙，这意味着如何创建顶点列表来制作它。但我不知道该怎么做。谁能给我指路？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:02:00.507

如果我理解正确，您正在尝试弄清楚如何将带有窗户的墙作为一个多边形对象。

由四个独立的部分组成，如下所示：

```
 AAAAAAAAA
  BBB   CCC
  BBB   CCC
  DDDDDDDDD 
```

除非你在碎片之间留下空隙，否则它看起来就像一堵带窗户的墙。

# csv - 比较 CSV 文件

> ID：15199874
> 
> 赞同：3
> 
> 时间：2013-03-04T10:53:58.283
> 
> 标签：csv, command-line, comparison, command-line-interface

我目前正在使用一个名为[TableTexCompare的 Windows 实用程序](http://www.nirsoft.net/utils/csv_file_comparison.html)

该工具可以获取 2 个 CSV 文件并进行比较。它的好处是即使两个文件的记录没有按相同顺序排序或字段没有按相同顺序排列，它也可以进行比较。

因此，以下 2 个文件将导致成功比较

（文件1.csv）

```
FirstName,LastName,Age
Mona,Sax,30
Max,Payne,43
Jack,Lupino,50 
```

（文件2.csv）

```
FirstName,Age,LastName
Max,43,Payne
Jack,50,Lupino
Mona,30,Sax 
```

我正在寻找的是从命令行做同样的事情，只有 1 个区别：我希望只在一个方向上执行比较，即如果 File2.csv 如下（File1.csv 的子集） ，比较应该通过

（文件2.csv）

```
FirstName,Age,LastName
Jack,50,Lupino 
```

我并不特别关心它是使用某种编程语言、专用 cli 工具还是 shell 脚本（例如使用 awk）。我对 Java 和 Groovy 有一些经验，但想指出一些初始方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:06:49.957

我可以提供一个 Python 解决方案：

```
import csv
with open("file1.csv") as f1, open("file2.csv") as f2:
    r1 = list(csv.DictReader(f1))
    r2 = csv.DictReader(f2)
    for item in r2:
        if not item in r1: 
            print("r2 is not a subset of r1!")
            break 
```

这实际上比 Python 中需要的要冗长一些（但更容易理解）；我个人会使用生成器表达式：

```
import csv
with open("file1.csv") as f1, open("file2.csv") as f2:
    r1 = list(csv.DictReader(f1))
    r2 = csv.DictReader(f2)
    if all(item in r1 for item in r2):
        print("r2 is a subset of r1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T12:21:49.463

您可以查看[q - Text as a Database](https://github.com/harelba/q)，它允许直接在 csv 文件上执行 SQL，包括连接。这将允许轻松进行比较，以及更多，例如匹配特定列以实现相等，以及从不匹配的行中获取特定列等。

完全披露 - 这是我自己的开源工具。

哈雷尔·本-阿提亚

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:22:11.283

如果您可以进行不区分大小写的比较，并且如果 File2.csv 中没有必须在 File1.csv 中匹配的重复项，并且如果 File1.csv 不包含`\\`or `\"`，那么您只需要一个简单的 FINDSTR 命令。

下面将列出 File2.csv 中未出现在 File1.csv 中的行：

```
findstr /vxig:"File1.csv" "File2.csv" 
```

如果您想要的只是指示 File1.csv 是否是 File2.csv 的超集，那么

```
findstr /vxig:"File1.csv" "File2.csv" >nul && (echo File1 is NOT a superset of File2) || (echo File1 IS a superset of File2) 
```

搜索不必区分大小写，除非有一个讨厌的 FINDSTR 错误：当有多个大小不同的区分大小写的文字搜索字符串时，它可能无法找到匹配项。不区分大小写选项避免了该错误。请参阅[为什么这个具有多个文字搜索字符串的 FINDSTR 示例找不到匹配项？](https://stackoverflow.com/q/8921253/1012053)了解更多信息。

`\\`如果 File2.csv 包含或`\"`因为 FINDSTR 将它们分别视为`\`和 ，则搜索将无法正常工作`"`。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)了解更多信息。接受的答案有部分描述 FINDSTR 转义序列大约一半。

# wpf - IValueConverter 和本地化

> ID：15199877
> 
> 赞同：1
> 
> 时间：2013-03-04T10:54:13.117
> 
> 标签：wpf, xaml, localization, ivalueconverter

我目前正在使用 IValueConverter 将布尔值转换为是/否文本以显示在 RadGridView 中。

```
Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
            Return If(CBool(value), "Yes", "No")
        End Function 
```

如您所见，这是我当前的实现，我想知道如何使用本地化并以其他语言显示是/否？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:14:12.213

在 WPF UI 中实现本地化的方法有很多。

使用 Microsoft 的[本地化程序](http://msdn.microsoft.com/en-us/library/ms788718.aspx)

或使用资源文件方法。有相当多的实现使得本地化方式比微软的方法更容易，微软的方法有一些开销，比如将 Uid 提供给所有要本地化和排序的元素。

提供资源文件本地化的此类插件之一是[Infralution WPF Localization](http://www.codeproject.com/Articles/35159/WPF-Localization-Using-RESX-Files)

这似乎运作良好（作者积极回复代码项目中的错误，更新及时且对**MVVM**友好）。它的附加示例演示了与您的示例类似的示例，其中作者展示了如何在运行时根据它可以接受的一组目标值来本地化视图中的绑定值。

我建议您阅读代码项目文章，Mess about with the随附示例，您应该对如何实现这一点有一个更好的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:58:54.143

您可以完全跳过 IValueConverter 并使用触发器，这样您就可以正常本地化文本这是一个使用文本框实现此目的的示例：

```
 <TextBox.Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <DataTrigger Binding="{Binding i}" Value="True">
                     <Setter Property="Text" Value="Yes"/>
                 </DataTrigger>
                 <DataTrigger Binding="{Binding i}" Value="False">
                     <Setter Property="Text" Value="No"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style> 
```

假设 i 是您要绑定的布尔值。

# java - 将流写入excel文件

> ID：15199879
> 
> 赞同：2
> 
> 时间：2013-03-04T10:54:22.583
> 
> 标签：java, netbeans, apache-poi

在下面的代码中，我从 excel 电子表格中输入数据并将其分组，我的问题是如何将每个分组的流导出到 excel 文件中？

```
package excelgroupdata;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.Iterator;

import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class ExcelGroupData {

public static void main(String args[]) throws Exception
{
//create a input stream for your excel file from which data will be read.  
    FileInputStream excelSheetInput = new FileInputStream("C:/test1.xlsx");
    //POIFSFileSystem myFileSystem = new POIFSFileSystem(excelSheetInput);
    XSSFWorkbook myWorkBook = new XSSFWorkbook(excelSheetInput);
    //get first work sheet in your excel file.
    Sheet sheet = myWorkBook.getSheetAt(0);
    //we will read data in first rows(0) second column(1)
    Iterator<Row> rowIterator = sheet.iterator();
    Row myRow = sheet.getRow(1);
    Cell myCell= myRow.getCell(0);
    Iterator<Cell> cellIterator ;
    String firstCell = myCell.getStringCellValue();
    int count =1;
    String nextCell;
    String Matter = "Matter Number: "+firstCell;
    System.out.println(Matter);
    while(rowIterator.hasNext())
    {

        myRow = sheet.getRow(count);
        cellIterator = myRow.cellIterator();
        myCell= myRow.getCell(0);
        nextCell= myCell.getStringCellValue();

        if(nextCell.equals(firstCell))
        {

            while(cellIterator.hasNext()) {

                            Cell cell = cellIterator.next();

                            switch(cell.getCellType()) {
                                case Cell.CELL_TYPE_BOOLEAN:
                                    System.out.print(cell.getBooleanCellValue() + "\t\t");
                                    break;
                                case Cell.CELL_TYPE_NUMERIC:
                                    cell.setCellType(Cell.CELL_TYPE_STRING);
                                    System.out.print(cell.getStringCellValue() + "\t\t");
                                    break;
                                case Cell.CELL_TYPE_STRING:
                                    System.out.print(cell.getStringCellValue() + "\t\t");
                                    break;
                            }
                        }
            System.out.println();
            count++;

        }
        else
        {          
            myRow = sheet.getRow(count);
            myCell= myRow.getCell(0);
            nextCell=myCell.getStringCellValue();
            firstCell=nextCell;
            Matter = "Matter Number: "+firstCell;
            System.out.println(Matter);
        }

    }

}
} 
```

我知道有一些错误编码的元素，但目前这并不重要，一般的想法是有效的。

这是我输入的数据以及分组输出的外观：

```
Matter Number: A4041222
A4041222        Sihlaba     2011/09/16      2013/09/15      2012/11/20      
Matter Number: A4041231
A4041231        Gwavu       2011/09/26      2013/09/26      2012/11/22      
Matter Number: A4041260
A4041260        Lin         2011/11/21      2013/11/20      2012/11/29      
A4041260        Lin         2011/09/16      2013/09/15      2012/11/29      
Matter Number: A4041281
A4041281        Sharma      2011/09/16      2013/09/15      2013/01/21      
Matter Number: A4041336
A4041336        Nkwankwana  2011/09/16      2013/09/15      2013/01/21      
A4041336        Nkwankwana  2011/09/16      2013/09/15      2013/01/21      
Matter Number: A4041420
A4041420        Gqozo       2011/09/22      2013/09/21      2012/07/18      
A4041420        Gqozo       2011/09/22      2013/09/21      2012/07/20      
Matter Number: A4041494
A4041494        Henneberry  2011/09/21      2013/09/20      2013/01/21      
Matter Number: A4041522
A4041522        Monepya     2011/09/16      2013/09/15      2013/01/21      
Matter Number: A4041600
A4041600        Vezi        2011/09/16      2013/09/15      2012/12/13      
Matter Number: A4041640
A4041640        Cupido      2011/09/27      2013/09/26      2012/09/25      
A4041640        Cupido      2011/09/26      2013/09/25      2012/11/27      
Matter Number: A4041644
A4041644        Mfingwana   2011/09/27      2013/09/26      2013/01/21      
A4041644        Mfingwana   2011/09/27      2013/09/27      2013/01/21      
Matter Number: A4041665
A4041665        Mafura      2011/09/29      2013/09/28      2012/12/13      
Matter Number: A4041770
A4041770        Mlangeni    2011/09/17      2013/09/16      2012/10/12      
Matter Number: A4041965
A4041965        Vukeya      2011/09/17      2013/09/17      2012/11/22      
Matter Number: A4042005
A4042005        Tayerera    2011/09/17      2013/09/16      2012/11/27      
A4042005        Tayerera    2011/11/11      2013/11/10      2012/11/27      
A4042005        Tayerera    2011/11/11      2013/11/10      2012/11/27      
A4042005        Tayerera    2011/09/17      2013/09/16      2012/11/27      
Matter Number: A4042029
A4042029        Wallace     2011/09/17      2013/09/16      2013/01/21      
Matter Number: A4042188
A4042188        Khoza       2011/10/04      2013/10/04      2012/04/04      
Matter Number: A4042212
A4042212        Gocini      2011/09/30      2013/09/29      2012/10/29 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:02:20.827

[这些教程包含](http://poi.apache.org/spreadsheet/examples.html)如何使用 POI 创建 Excel 文件的示例。对于您的情况，从“时间表”演示开始，它可能最接近您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:34:20.887

我编辑了我的代码，如下所示：

```
import java.io.BufferedWriter;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.util.Iterator;

import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class ExcelGroupData {

public static void main(String args[]) throws Exception
{
//create a input stream for your excel file from which data will be read.  
    FileInputStream excelSheetInput = new FileInputStream("C:/book2.xlsx");
    //POIFSFileSystem myFileSystem = new POIFSFileSystem(excelSheetInput);
    XSSFWorkbook myWorkBook = new XSSFWorkbook(excelSheetInput);
    //get first work sheet in your excel file.
    Sheet sheet = myWorkBook.getSheetAt(0);
    //we will read data in first rows(0) second column(1)
    Iterator<Row> rowIterator = sheet.iterator();
    Row myRow = sheet.getRow(1);
    Cell myCell= myRow.getCell(0);
    Iterator<Cell> cellIterator ;
    String firstCell = myCell.getStringCellValue();
    int count =1;
    String nextCell;
    String Matter = "Matter Number: "+firstCell;
    String num = firstCell;
    System.out.println(Matter);
    FileWriter fWriter = null;
    BufferedWriter writer = null;
    fWriter = new FileWriter(num+".txt");
    writer = new BufferedWriter(fWriter);
    writer.write(Matter);
    writer.newLine();
    while(rowIterator.hasNext())
    {

        myRow = sheet.getRow(count);
        cellIterator = myRow.cellIterator();
        myCell= myRow.getCell(0);
        nextCell= myCell.getStringCellValue();

        if(nextCell.equals(firstCell))
        {

            while(cellIterator.hasNext()) {

                            Cell cell = cellIterator.next();

                            switch(cell.getCellType()) {
                                case Cell.CELL_TYPE_BOOLEAN:
                                    System.out.print(cell.getBooleanCellValue() + "\t\t");
                                    break;
                                case Cell.CELL_TYPE_NUMERIC:
                                    cell.setCellType(Cell.CELL_TYPE_STRING);
                                    System.out.print(cell.getStringCellValue() + "\t\t");
                                    writer.write(cell.getStringCellValue()+ "\t");
                                    break;
                                case Cell.CELL_TYPE_STRING:
                                    System.out.print(cell.getStringCellValue() + "\t\t");
                                    writer.write(cell.getStringCellValue()+ "\t");
                                    break;
                            }
                        }
            System.out.println();
            writer.newLine();
            count++;

        }
        else
        {          
            writer.close();
            myRow = sheet.getRow(count);
            myCell= myRow.getCell(0);
            nextCell=myCell.getStringCellValue();
            firstCell=nextCell;
            Matter = "Matter Number: "+firstCell;
            num = firstCell;
            System.out.println(Matter);
            fWriter = new FileWriter(num+".txt");
            writer = new BufferedWriter(fWriter);
            writer.write(Matter);
            writer.newLine();
        }

    }

}
} 
```

现在这会将每个组写入一个文本文件，但是它不会将最后一个组写入文本文件，但一般概念就在那里。

# php - intlDateFormatter 夏令时

> ID：15199883
> 
> 赞同：0
> 
> 时间：2013-03-04T10:54:52.183
> 
> 标签：php, datetime, symfony, intl

Symfony 2 在自己的 DateTimeToLocalizedStringTransformer 中使用 intlDateFormatter 但不能正常工作。

```
$tz = new DateTimeZone('Europe/Moscow');
$date = new DateTime('1 march', $tz);

echo "PHP: " . phpversion() . "<br/>\n";
echo "Intl: " . phpversion('intl') . "<br/>\n";
echo "<br/>\n";

echo "TZ: " . $tz->getName() . "<br/>\n";

echo "Native:<br/>\n";
echo $date->format('H:i:s d.m.Y');
echo "<br/>\n";

echo "Intl:<br/>\n";
$formatter = new IntlDateFormatter('RU_ru', IntlDateFormatter::FULL, IntlDateFormatter::FULL, $tz->getName());
echo $formatter->format($date);
echo "\n"; 
```

我有结果

```
PHP: 5.3.22-1~dotdeb.0
Intl: PECL-2.0.1
TZ: Europe/Moscow

Native:
00:00:00 01.03.2013
Intl:
28 february 2013 23:00:00 
```

我试试

```
pecl install timezonedb
pecl install intl 
```

并重新安装 libicu44

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:15:36.953

我明白了：

```
<?php
$tz = new DateTimeZone('UTC');
$date = new DateTime('1 march', $tz);

echo "ICU data version: ", INTL_ICU_DATA_VERSION, "\n";
$formatter = new IntlDateFormatter('RU_ru', IntlDateFormatter::FULL,
        IntlDateFormatter::FULL, "Europe/Moscow");
echo $formatter->format($date), "\n"; 
```

```
ICU数据版本：4.4.0.1
пятница, 1 марта 2013 г. 3:00:00 Московское стандартное время

```

这是错误的，因为莫斯科现在全年都在 UTC+4。然而，这是一个相当新的发展（他们仅在几年前放弃了 DST），因此 ICU 数据太旧而无法反映这一点。如果您使用更新版本的 ICU 进行测试，您会得到正确的结果：

```
ICU数据版本：49.1
пятница, 1 марта 2013 г., 4:00:00 Московское стандартное время

```

# asp.net - 在 ASP.NET（使用 Visual Studio (2010)）中运行主项目时，如何调试工作目录 *.aspx.cs 文件？

> ID：15199894
> 
> 赞同：0
> 
> 时间：2013-03-04T10:55:26.653
> 
> 标签：asp.net, debugging, visual-studio-debugging

好的，首先，我通常不开发 ASP.NET 应用程序，也不经常使用 Visual Studio。我不完全确定这个问题的标题是否有意义，所以让我尝试扩展一下：

我正在为一个网站分为两个项目的客户工作。主项目和工作目录项目内。我正在处理的文件位于工作目录项目中。

我只能访问运行主项目的数据库；**不是**工作目录项目所需的数据库 - 因此，我不能简单地运行工作目录项目。将 *.aspx 文件复制到主项目的同一位置后，我可以通过运行主项目（不知何故包括 *.aspx.cs 和 *.aspx.resx.files工作目录项目）。

我需要在工作目录项目中调试 *.aspx.cs 文件，但是由于工作目录项目没有运行，我不能简单地向它添加断点。

**当只能运行主项目时，如何调试工作目录中包含的 *.aspx.cs 文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:52:12.473

您要查看的主项目中的方法是否被您可以看到的部分中的方法调用？如果是这样，您可以在调试时“进入”该方法。在调用方法 B 的方法 A 中放置一个断点。然后，使用“Step Into”。我相信快捷键是F8。步入用于在步入每个被调用的方法/函数时遵循方法的顺序步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:13:16.493

最后我设法通过简单地将一些无效代码放入工作目录文件中来调试它。然后，正在运行的主解决方案选择了这个无效代码并将我带到了文件（在项目本身中找不到该文件！）。然后我可以根据需要进行调试。

想我会把这个留在这里以供参考，以防其他人遇到同样的问题。

# jquery - 如何在 jQuery 中克隆具有默认选中状态的单选按钮？

> ID：15199896
> 
> 赞同：0
> 
> 时间：2013-03-04T10:55:31.640
> 
> 标签：jquery

我在克隆具有默认选中状态的单选按钮时遇到困难。

这是我的 HTML：

```
<div class="container">
<div class="a2">
    <input type="radio" name="selection_1" value="name" checked="checked" /> Name
    <input type="radio" name="selection_1" value="url" /> URL
    <div class="text">
        <textarea name="name[]">Enter name: </textarea>
    </div>
    <div class="url">
        <textarea name="url[]">http://</textarea>
    </div>
  </div>
</div>
<input type="button" class="clone" value="Clone" /> 
```

这是我的 jQuery：

```
$('.a2 [name]').change(function() { 
if($(this).val() == "name") {
    $(this).parent().find('.url').css({'visibility': 'hidden', 'display':'none'});
    $(this).parent().find('.text').css({'visibility': 'visible', 'display':'block'});
} else {
    $(this).parent().find('.text').css({'visibility': 'hidden', 'display':'none'});
    $(this).parent().find('.url').css({'visibility': 'visible', 'display':'block'});
}
});

$('.clone').click(function() {
    var p = $('.a2:first').length;
    var cloned = $('.a2:first').clone()
    .find('.a2 [name]').attr('name', 'selection_' + ++p).end()
    .appendTo('.container');
}); 
```

我想要实现的是克隆按钮应该克隆整个单选按钮集，并且具有默认选中状态的文本区域也克隆到新集合中。应该通过增加每个副本上的前缀编号（例如 selection_2、selection_3 等）来重命名单选按钮，以便每个集合上的单选按钮独立工作。

这是小提琴：http: [//jsfiddle.net/Tz66H/](http://jsfiddle.net/Tz66H/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:12:48.453

试试这个：

```
$(".container").on("change", ".a2 input[name^='selection_']", function (event) {
    if ($(this).val() == "name") {
        $(this).parent().find('.url').css({
            'visibility': 'hidden',
                'display': 'none'
        });
        $(this).parent().find('.text').css({
            'visibility': 'visible',
                'display': 'block'
        });
    } else {
        $(this).parent().find('.text').css({
            'visibility': 'hidden',
                'display': 'none'
        });
        $(this).parent().find('.url').css({
            'visibility': 'visible',
                'display': 'block'
        });
    }
});

$('.clone').click(function () {
    var p = $('.a2').length;
    var cloned = $('.a2:first').clone()
        .find('input:radio').attr('name', 'selection_' + ++p).end()
        .appendTo('.container');
}); 
```

[**演示**](http://jsfiddle.net/Tz66H/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:59:29.203

尝试

```
var p = $('.a2 input[name=^="selection_"]').length + 1;
var cloned = $('.a2:first').clone()
.find('.a2 [name]').attr('name', 'selection_' + p).end()
.appendTo('.container'); 
```

**测试代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $('.a2 [name]').change(function()
        { 
            if($(this).val() == "name")
            {
                $(this).parent().find('.url').css({'visibility': 'hidden', 'display':'none'});
                $(this).parent().find('.text').css({'visibility': 'visible', 'display':'block'});
            }
            else
            {
                $(this).parent().find('.text').css({'visibility': 'hidden', 'display':'none'});
                $(this).parent().find('.url').css({'visibility': 'visible', 'display':'block'});
            }
        });

        $('.clone').click(function()
        {
            var p = $('.a2 input[name^="selection_"]').length + 1;
            alert(p);
            var cloned = $('.a2:first').clone().find('input[name^="selection_"]').attr('name', 'selection_' + p).end().appendTo('.container');
        });
    });

</script>
<div class="container">
    <div class="a2">
        <input type="radio" name="selection_1" value="name" checked="checked" /> Name
        <input type="radio" name="selection_1" value="url" /> URL
        <div class="text">
            <textarea name="name[]">Enter name: </textarea>
        </div>
        <div class="url">
            <textarea name="url[]">http://</textarea>
        </div>
    </div>
</div>
<input type="button" class="clone" value="Clone" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:12:11.263

试试这个

```
$('.clone').click(function() {
   var p = $('.a2 input[value="name"]').length + 1;
   $('.a2:first').clone().find('input[value="name"]').attr({name:'selection_' + p}).end().appendTo('.container');
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/Tz66H/3/)

# optimization - 用于嵌入式设备的 C++ 中优化的大型素数生成器

> ID：15199900
> 
> 赞同：1
> 
> 时间：2013-03-04T10:55:50.303
> 
> 标签：optimization, embedded, rsa, generator, primes

是否有任何独立的 OPTIMIZED 大素数生成器在 C 或 C++ 中用于嵌入式设备（我需要它来生成 RSA 密钥对）？
我已经测试了几个库，例如 polarSSL、sharkSSL 或 yaSSL，但它们都不够快，所以我正在寻找更好的解决方案。

# signalr - 收到 javascript 错误：chat.server.ConnectClient(clientName); 不是函数

> ID：15199902
> 
> 赞同：0
> 
> 时间：2013-03-04T10:55:53.663
> 
> 标签：signalr, signalr-hub

为什么我会收到此错误：

myhub.cs：

```
 public class ChatHub : Hub
{
 private static DataTable ConnectedClientDt = null;

  public void ConnectClient(string ClientName)
  {
    if (ConnectedClientDt == null)
    {
        ConnectedClientDt = new DataTable();
        ConnectedClientDt.Columns.Add("ClienID");
        ConnectedClientDt.Columns.Add("ClientName");
    }
    ConnectedClientDt.Rows.Add(Context.ConnectionId,ClientName);

} 
```

客户端 ：

```
 $(document).ready(function () {
        var chat = $.connection.chatHub;
        var clientName = '<%=Session["ClientName"] %>';

        $.connection.hub.start().done(function () {
            chat.server.ConnectClient(clientName);

        }); 
```

请有任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:08:16.310

将名称更改为小写。ConnectClient 应该是 connectClient。一开始可能会令人困惑，因为我们将名称设为 javascript 友好名称（驼峰式）

# zend-framework - Zend 中 DB 适配器的 SetIntegrityCheck

> ID：15199911
> 
> 赞同：0
> 
> 时间：2013-03-04T10:56:11.910
> 
> 标签：zend-framework, zend-db, zend-db-select

您好，我想在 zend db select 中使用 join。我知道这`setintegritycheck()`在连接中很重要。当我有一个模型对象时，我知道如何实现它

```
$select = $this->select();
$select->setintegritycheck(false);
$select->from(array('info'),array())
            ->join(array('cfields'),'info.class=cfields.class_id',array('field_id','type_id'))
            ->where('info.id=2'); 
```

但就我而言，我不是模特。我有`dbadapter`。现在我正在写这样的查询

```
 $dbAdapter = MyManager::getDbAdapator('project');
    $select = $dbAdapter->select('info');

    $select->setIntegrityCheck(false);
    $select->from(array('info'),array())
            ->join(array('cfields'),'info.class=cfields.class_id',array('field_id','type_id'))
            ->where('info.id=2'); 
```

线

```
$dbAdapter = MyManager::getDbAdapator('project'); 
```

返回项目数据库的适配器，我已经验证过了。现在在这种情况下，我的选择对象来自数据库适配器，所以当我尝试获取`setintegritycheck`它时会产生错误

```
Unrecognized method 'setIntegrityCheck()' 
```

我可以告诉我如何在这种情况下进行完整性检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:03:55.233

`setIntegrityCheck()`是一种方法`Zend_Db_Table_Select`。如果您正在从数据库适配器构建选择，则您正在使用它`Zend_Db_Select`，并且没有完整性检查，因此您无需担心禁用它。

完整性检查检查查询返回的列是否与表上的列匹配，因此它仅在`Zend_Db_Table`.

# django - 在数据库中为每个 celery 任务存储一个任务 ID

> ID：15199919
> 
> 赞同：8
> 
> 时间：2013-03-04T10:56:42.273
> 
> 标签：django, celery, django-celery, celery-task

我用 celery 和`MySQL`. 我想将任务 id 作为普通整数存储在数据库或 celery 变量中`task`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T12:59:04.420

为什么不创建一个 celery 任务模型，并将 celery 任务 ID 保存到该模型中？

```
class CeleryModel(models.Model):
    celery_task_id = models.CharField(max_length = 50, unique=True) 
```

然后：

```
def some_celery_task():
    result = celery_task.delay()
    celery_task = CeleryModel(celery_task_id = result.id)
    celery_task.save() # added save line 
```

您的整数值将是：`celery_task.id`与实际的唯一 celery_task_id 相对应。

更新：另一种方式...

首先`python manage.py inspectdb > inspectdb.py`。在该文件中，您会发现：

```
class CeleryTaskmeta(models.Model):
    id = models.IntegerField(primary_key=True)
    task_id = models.CharField(max_length=765, unique=True)
    status = models.CharField(max_length=150)
    result = models.TextField(blank=True)
    date_done = models.DateTimeField()
    traceback = models.TextField(blank=True)
    hidden = models.IntegerField()
    meta = models.TextField(blank=True)
    class Meta:
        db_table = u'celery_taskmeta' 
```

接下来，`python manage.py startapp celery_model`。将此文件放入 models.py 文件中。我使用南，所以我的最后一步是`python manage.py convert_app celery_model`. 然而，这是不必要的。现在你可以访问这个 celery 数据表了 django 级别，并且可以读取每个任务的主键作为你的整数值。例如

```
>>> ct = CeleryTaskmeta.objects.get(id=1)
>>> for k,v in ct.__dict__.items(): print k,v
... 
status SUCCESS
task_id 2fa95f24-7640-434c-9fef-0732ac1d23c7
date_done 2013-02-17 19:22:56+00:00
traceback None
_state <django.db.models.base.ModelState object at 0x10263fa90>
meta eJxrYKotZAzlSM7IzEkpSs0rZIotZC7WAwBREgb9
result gAJLBC4=
hidden 0
id 1 
```

聪明的人会知道如何使您`CeleryTaskmeta`的模型成为只读模型，因为我认为您不想篡改数据表。

更新：到你问题的最后一部分：

```
>>> from celerytest.tasks import add
>>> result = add.delay()
>>> result.int_id = 1
>>> for k,v in result.__dict__.items(): print k,v
...
parent None
app <Celery default:0x10264df10>
task_name celerytest.tasks.add
int_id 1
id 01503afd-d196-47af-8e10-e7dc06603cfc
backend <djcelery.backends.database.DatabaseBackend object at 0x1026842d0> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T10:40:53.110

要在任务启动时获取 celery 任务 ID，我执行以下操作：

```
process_task = my_task.apply_async(args=[args])
task_id = process_task.task_id 
```

其中 my_task 是 tasks.py 中的一个方法

# java - 使 Java Runnable 连续运行

> ID：15199920
> 
> 赞同：0
> 
> 时间：2013-03-04T10:56:47.150
> 
> 标签：java

如何使一个`class`实现`java.lang.Runnable`接口的接口在不阻塞整个应用程序的情况下连续运行。

例如：

```
private void startHandler(UsbDevice d) {
    if (mLoop != null) {
        mConnectionHandler.onErrorLooperRunningAlready();
        return;
    }
    mLoop = new UsbRunnable(d);
    mUsbThread = new Thread(mLoop);
    mUsbThread.start();
} 
```

需要使`mLoop`'run() 方法连续运行。UsbRunnable 实现了 Runnable 接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:59:51.193

> 如何使实现 java.lang.Runnable 接口的类在不阻塞整个应用程序的情况下连续运行。

你需要两件事：

*   `run()`方法内部的循环
*   阻塞的呼叫，通常通过与您的设备通信

```
public class USBRunnable implements Runnable {

  public void run() {
      while (isRunning) {
          data = readFromUSBDevice();  // waits until data is available, returns the data read
          processData(data);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:59:12.883

典型的方法是放一个循环`run`：

```
public void run() {
    while (!terminationCondition) {
        // Do work
    }
} 
```

`run`应该对`Runnable`需要做的全部工作进行建模，而不仅仅是该工作的一次迭代。因此，如果它需要重复工作直到停止，您可以使用循环来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:37:17.587

可以在实现runnable的类的run方法里面有一个while(true){......}循环。可以将此线程标记为守护进程。

# c++ - 在opencv中重用设备

> ID：15199921
> 
> 赞同：0
> 
> 时间：2013-03-04T10:56:57.543
> 
> 标签：c++, c, opencv

我有一个使用 cv::Videocapture 从 webcm 流式传输视频的程序，我的问题是，是否有可能在发布后在同一程序中重新打开或重新启动该设备？并且没有关闭程序！谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:37:51.133

```
VideoCapture cap(0);

//do stuff

cap.release();

cap.open(0);

// do stuff

cap.release(); 
```

# actionscript-3 - 在 Google Chrome 上使用网络摄像头的性能问题？

> ID：15199928
> 
> 赞同：2
> 
> 时间：2013-03-04T10:57:15.640
> 
> 标签：actionscript-3, flash, google-chrome, webcam

我们使用 actionscript 3 在 Flash 中创建了一个网络摄像头应用程序。该应用程序在 Internet Explorer、Firefox、Safari 和 Opera 上运行流畅。但是，在 Google Chrome 上尝试时，网络摄像头体验的性能会严重下降。

我们在 Windows Vista 机器上使用最新的 Chrome 版本。如前所述，所有其他浏览器都可以正常运行该应用程序，这让我相信最新版本的 Chrome 和 Flash Player 存在一些问题。

这里的任何人都听说过或了解更多有关该主题的信息吗？可能是应用程序特定的原因吗？很难弄清楚原因可能是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:44:37.317

尝试禁用标准 chrome 版本的 Flash 播放器

> 铬：//插件/

并启用/安装自己的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:10:32.393

好的，我想如果其他人遇到同样的问题，我会回答我自己的问题（我相信有人会！）。

正如本线程和互联网中所解释的，当涉及到 Chrome 和 Flash 应用程序时，主要问题是 Flash Pepper Player (FPP)。这是一个与 Chrome 一起自动更新以使其更加用户友好的播放器。遗憾的是，播放器不是很稳定，可能会出现很多问题，例如渲染问题和简单的性能问题。这似乎在 PC 上比在 Mac 上更容易发生。

为了摆脱这个问题，建议用户（不是由 Chrome 或 Adob​​e，而是由您友好的互联网社区）禁用 FPP（**chrome://plugins/**）并手动下载 Flash 播放器，就像在 IE 或 Firefox 上一样。

这里有一些更多信息：

[堆栈溢出](https://stackoverflow.com/questions/12866060/detecting-pepper-ppapi-flash-with-javascript)

[如何禁用 Chrome Pepper Flash 播放器](http://blogs.computerworld.com/desktop-apps/20845/explaining-confusion-over-flash-versions)

[电脑世界](http://blogs.computerworld.com/desktop-apps/20845/explaining-confusion-over-flash-versions)

祝你好运！

# java - 在 websphere 共享库中使用 CDI

> ID：15199929
> 
> 赞同：2
> 
> 时间：2013-03-04T10:57:17.653
> 
> 标签：java, dependency-injection, shared-libraries, cdi, websphere-8

我们使用 websphere 管理控制台中定义的共享库在多个应用程序之间共享类。我想知道是否可以在这些类中使用 CDI（上下文和依赖注入）？如果是这样，我只需要将 beans.xml 放入共享库中的 jar 中，还是有进一步的步骤？

注意：我不能放弃使用共享库，因为这将是太多的重构工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:00:37.073

不，共享库中包含的类不被视为 CDI bean。只有应用程序本身包含的档案才能考虑用于 CDI。

# iphone - NSDictionary 具有空值

> ID：15199934
> 
> 赞同：9
> 
> 时间：2013-03-04T10:57:33.723
> 
> 标签：iphone, ios, objective-c, nsdictionary

从 Dictionary 对象中提取数据时出现问题。字典的计数显示为 1，但它显示的一个值为空。当 Dictionary 对象中没有数据时，我想显示一个 AlertView。我想在计数为“0”时显示 AlertView，但它返回“1”。

我正在使用 JSON 从 WebService 中提取此字典对象。

```
{
     "My Data" = null;
} 
```

使用此代码将“我的数据”值放入字典变量数据中。

```
Datas = (NSDictionary *) [details objectForKey:@"My Data"];

if ([Datas count] == 0) {

//code for showing AlertView....

} 
```

请帮助我在 Dictionary 值为 null 时显示 UIAlertView ....

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-04T11:08:17.827

`NSDictionary`和其他集合不能包含`nil`值。当`NSDictionary`必须存储 a时`null`，存储一个特殊值[`[NSNull null]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)。

比较 at 的值`@"My Data"`以`[NSNull null]`确定对应的值是否为`null`。

```
// Since [NSNull null] is a singleton, you can use == instead of isEqual
if ([details objectForKey:@"My Data"] == [NSNull null]) {
    // Display the alert
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T11:10:09.027

通常 JSON 中的 null 值被解析为`NSNull`. 所以这个条件应该检查​​那个以及 nil：`if((details[@"My Data"] == nil) || (details[@"My Data"] == [NSNull null]))`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T11:01:39.640

```
if ([[details objectForKey:@"My Data"] isEqual:[NSNull null]] || [[details objectForKey:@"My Data"] isEqualToString:@""]) {
     UIAlertView *altTemp = [UIAlertView alloc]initWithTitle:@"Value Null" message:@"Your Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
     [altTemp show];
     [altTemp release];
} 
```

# assembly - org 0C700h 给出奇怪的输出

> ID：15199938
> 
> 赞同：0
> 
> 时间：2013-03-04T10:57:54.727
> 
> 标签：assembly, linker, bootloader

我正在编写一个引导加载程序，但我不确定我所做的是否正确。首先，我使用这个批处理脚本来编译我的引导加载程序：

```
dm\bin\dmc.exe -msdo -c -cpp bootloader.cpp
masm\bin\ml.exe -c bootloaderASM.asm
dm\bin\link.exe /BINARY bootloaderASM.obj bootloader.obj 
```

我正在使用 DMC 的编译器和链接器，以及 masm 615 汇编器，它们都应该是 16 位（DMC 是 16 和 32）。现在在我的程序集文件 bootloaderASM.asm 中，如果我添加“org 07C00”，输出文件 bootloaderASM.sys 将填充 0 直到 07C00，然后填充预期的代码。但是，如果我删除它，输出文件为预期的。据我了解， org 指令只是调整我的指令使用的地址，以便基数为 07C00，我想它不应该用零填充我的输出文件？

编译器和汇编器中的 .obj 文件似乎没问题。它们在 0x07c00 之前不包含前导零，但链接器的最终输出是错误的。

现在是链接器的问题吗？我该如何修复它/您是否建议使用不同的（16 位）链接器？另外-如果我只是忽略引导加载程序的 org 指令可以吗？

另外 - 我已经编写了一个程序来读取我的引导加载程序并将其写入虚拟硬盘驱动器的引导扇区，我可以简单地修改它以忽略链接器输出中的前导零 - 这行得通吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:12:45.790

> 据我了解， org 指令只是调整我的指令使用的地址，以便基数为 07C00，我想它不应该用零填充我的输出文件？

根据[NASM Manual](http://www.nasm.us/doc/nasmdoc7.html#section-7.1.1)，MASM 的实现[`ORG`](http://msdn.microsoft.com/en-us/library/2kacdf0c%28v=vs.80%29.aspx)实际上将后续输出移动到给定的偏移量。

至于您的观察，由于在那之前可能有来自其他模块的代码，.OBJ 文件仅存储偏移量，期望链接器正确定位它，在这种情况下通过简单的填充。

> 现在是链接器的问题吗？我该如何修复它/您是否建议使用不同的（16 位）链接器？

链接器在这里没有错。这是 MASN 的一个怪癖。

> 另外-如果我只是忽略引导加载程序的 org 指令可以吗？
> 
> 另外 - 我已经编写了一个程序来读取我的引导加载程序并将其写入虚拟硬盘驱动器的引导扇区，我可以简单地修改它以忽略链接器输出中的前导零 - 这行得通吗？

通过阅读 OSDev Wiki，只要相应地处理段寄存器，两者都可以正常工作。我的理解是输出应该放在`0`硬盘分区中的位置并加载到 offset`0x7c00`中。只要它按照这个规范运行，它“应该可以工作”。

以下内容可能会提供进一步的帮助阅读：

相关帖子 (stackoverflow.com/questions/12552072/masm-segment-directive) 中的MASM `SEGMENT`(msdn.microsoft.com/en-us/library/d06y3478%28v=vs.80%29.aspx) 指令

PS。（我“需要至少 10 个声誉”，考虑到这是我的第一篇文章，“发布超过 2 个链接”，我没有。）

# php - 如果在 php 中找到特定字符，则替换字符串

> ID：15199942
> 
> 赞同：1
> 
> 时间：2013-03-04T10:58:20.827
> 
> 标签：php

如果找到特定字符，我想替换字符。
例如我的文本具有以下值：

```
$text = "@abc hi there!! @jkl,@xyz how are you?"; 
```

在这里我想替换所有以'@'开头的单词，输出应该是这样的

```
$text = "<a href='abc'>@abc</a> hi there!! <a href='jkl>@jkl</a>,<a href='xyz'>@xyz</a> how are you?"; 
```

单词可以用空格或逗号分隔（带/不带空格）。我想替换`"@abc"`为`"<a href='abc'>@abc</a>"`.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:12:06.070

使用正则表达式：

```
$str = preg_replace("/@(\w+)/", "<a href='$1'>@$1</a>", $text); 
```

请注意，`\w+`在括号中可以找到它，这会导致它被捕获。另请注意，它会因来自不同语言的字符而失败（不适用于@שלום）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T11:06:54.450

```
$text = preg_replace('/@(\w+)/',"<a href='$1'>@$1</a>",$text); 
```

# windows - 如果 jar 文件归档失败，如何检测错误？

> ID：15199947
> 
> 赞同：0
> 
> 时间：2013-03-04T10:58:30.783
> 
> 标签：windows, command-line, batch-file, jar

我面临一个问题，即使 jar 文件的存档失败，%errorlevel% 返回值也为 0。

我想要实现的是在生产环境中归档日志文件。我使用 ROBOCOPY 命令将日志文件复制到单独的文件夹并尝试归档这些日志文件。"verify > nul" 用于将 %errorlevel% 重置回 0，因为 robocopy 会在执行后将该值设置为 1。

但是，当 jar 命令执行过程中发生错误时（即没有要归档的文件），%errorlevel% 保持为 0，程序继续。

```
@ECHO off
SETLOCAL

ECHO [info] LogFileArchivaer Started at time %date% %time% ...
SET LOG_FILE_AGE_IN_DAY=7

REM Directory variable setting
FOR /F "tokens=1,2 delims==" %%G IN (config.properties) DO (

    IF "%%G"=="log.app.dir.ori" (
        IF NOT EXIST %%H\NUL (
            ECHO [error] Directory "%%H" not exist!
            GOTO ERROR
        )
        SET APP_LOG_DIR_ORI=%%H
    )

    IF "%%G"=="log.server.dir.ori" (
        IF NOT EXIST %%H\NUL (
            ECHO [error] Directory "%%H" not exist!
            GOTO ERROR
        )
        SET SERVER_LOG_DIR_ORI=%%H
    )
    IF "%%G"=="log.batch.dir.ori" (
        IF NOT EXIST %%H\NUL (
            ECHO [error] Directory "%%H" not exist!
            GOTO ERROR
        )
        SET BATCH_LOG_DIR_ORI=%%H
    )
    IF "%%G"=="log.app.dir.dest" (
        IF NOT EXIST %%H\NUL (
            ECHO [error] Directory "%%H" not exist!
            GOTO ERROR
        )
        SET APP_LOG_DIR_DEST=%%H
    )
    IF "%%G"=="log.server.dir.dest" (
        IF NOT EXIST %%H\NUL (
            ECHO [error] Directory "%%H" not exist!
            GOTO ERROR
        )
        SET SERVER_LOG_DIR_DEST=%%H
    )
    IF "%%G"=="log.batch.dir.dest" (
        IF NOT EXIST %%H\NUL (
            ECHO [error] Directory "%%H" not exist!
            GOTO ERROR
        )
        SET BATCH_LOG_DIR_DEST=%%H
    )
    IF "%%G"=="log.file.age" (
        SET /a LOG_FILE_AGE_IN_DAY="%%H"*1
    )
)

REM Prepare formatted system date
SET year=%date:~-4%

SET month=%date:~3,2%
IF "%month:~0,1%" == " " SET month=0%month:~1,1%

SET day=%date:~0,2%
IF "%day:~0,1%" == " " SET day=0%day:~1,1%

SET hour=%time:~0,2%
IF "%hour:~0,1%" == " " SET hour=0%hour:~1,1%

SET min=%time:~3,2%
IF "%min:~0,1%" == " " SET min=0%min:~1,1%

SET datetime_formatted=%year%%month%%day%_%hour%%min%

ECHO [info] Age of log files to be archived: [%LOG_FILE_AGE_IN_DAY%] days.

ECHO [info] === Processing batch job log files ===

ROBOCOPY %BATCH_LOG_DIR_ORI% %BATCH_LOG_DIR_DEST% *.log /MINAGE:%LOG_FILE_AGE_IN_DAY%
IF %errorlevel% GEQ 2 GOTO ERROR

REM Reset the errorLevel value back to 0
verify > nul

IF exist %BATCH_LOG_DIR_DEST%*.log (
    CD %BATCH_LOG_DIR_DEST%
    jar -cvMf %BATCH_LOG_DIR_DEST%batch_job_log_%datetime_formatted%.zip *.log

    IF %errorlevel% NEQ 0 GOTO ERROR

    FOR /F %%J IN ('dir /b /A-D %BATCH_LOG_DIR_DEST%*.log') DO (
        ECHO [info] Deleting file: %%J
        DEL %BATCH_LOG_DIR_DEST%%%J
        DEL %BATCH_LOG_DIR_ORI%%%J
        IF %errorlevel% NEQ 0 GOTO ERROR
    )
) ELSE (
    ECHO [info] No batch log file to process.
)

ECHO [info] === Batch job log files archived completed ===

GOTO COMPLETED

:ERROR
ECHO [error] Error Occurred, program exit at time %date% %time%!    
GOTO END

:COMPLETED
ECHO [info] LogFileArchivaer Completed at time %date% %time% ...    
GOTO END

:END 
```

注意：变量是从属性文件中读取的。不允许安装第三方库，因此我选择使用 jar 命令

任何提示如何检测是否发生错误？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:28:12.230

## 使用延迟扩展

```
SETLOCAL EnableDelayedExpansion
...
    IF !errorlevel! NEQ 0 GOTO ERROR 
```

确保对在范围内修改的括号范围内的所有变量执行此操作。

每当在括号范围内扩展变量`()`时，变量将扩展为它们在范围开始之前的值，除非使用延迟扩展或解决方法进行扩展。

## 插图

```
@echo off
setlocal EnableDelayedExpansion

set "x=0"
echo %x%

if 1==1 (
    set "x=1"
    echo %x%
)
endlocal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:33:26.780

作为我支持 +1的 David 方法*（**使用延迟扩展**）的替代方法，您可以改用该***`if errorlevel`命令**。我会做。

```
if errorlevel 1 goto error 
```

*阅读旧新事物*博客中的Raymond Chen 条目**ERRORLEVEL is not %ERRORLEVEL%** [http://blogs.msdn.com/b/oldnewthing/archive/2008/09/26/8965755.aspx 。](http://blogs.msdn.com/b/oldnewthing/archive/2008/09/26/8965755.aspx)

 *然后试试这个摘录..

```
robocopy %ORI% %DEST% *.log ....
if errorlevel 2 goto error
...
if exist *.log ( 
   jar -cvMf ..
   if errorlevel 1 goto error
   for %%a in *.log do (
     del %%a ....
     if errorlevel 1 goto error
   )
) 
```*

# facebook - 生日日期不起作用

> ID：15199950
> 
> 赞同：0
> 
> 时间：2013-03-04T10:58:32.997
> 
> 标签：facebook, date, get

我正在开发一个获取用户生日日期的应用程序，但它仍然无法正常工作。最奇怪的是，当我调试这个应用程序时，它会抛出开发者 facebook 界面，它运行良好。所以我不知道为什么它不想工作。这是我获得生日的 php 代码：

```
<?php
if($user_id) {

  // We have a user ID, so probably a logged in user.
  // If not, we'll get an exception, which we handle below.
  try {

    $user_profile = $facebook->api('/me?fields=id,name,birthday', 'GET');
    print_r($user_profile);
    //echo "Name: " . $user_profile['name'];

  } catch(FacebookApiException $e) {
    // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    $login_url = $facebook->getLoginUrl(); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    error_log($e->getType());
    error_log($e->getMessage());
  }   
} else {

  // No user, print a link for the user to login
  $login_url = $facebook->getLoginUrl();
  echo 'Please <a href="' . $login_url . '">login.</a>';

} 
```

?>

感谢任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:13:34.613

正如 CBroe 所指出的，您需要`user_birthday`在您的权限范围内

```
$params = array(
  'scope' => 'user_birthday',
  'redirect_uri' => 'https://www.myapp.com/post_login_page'
);

$loginUrl = $facebook->getLoginUrl($params); 
```

# weblogic - 任何可用于集群 Oracle WLS EJB 的注释？

> ID：15199952
> 
> 赞同：2
> 
> 时间：2013-03-04T10:58:39.890
> 
> 标签：weblogic, weblogic12c

正如标题中所说，我想知道是否有专有的 Oracle WLS 注释指定 EJB 将被集群。基本上将其添加到您的 weblogic-ejb-jar.xml 中的等价物：

```
<stateless-clustering>
   <stateless-bean-is-clusterable>True
   </stateless-bean-is-clusterable>
   <stateless-bean-load-algorithm>random
   </stateless-bean-load-algorithm>
</stateless-clustering> 
```

谢谢！最大限度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:48:14.783

bean 池大小和集群等配置不会通过注释公开。它们只能通过部署描述符指定。

要查看 WLS 12c EJB 专有注释列表，请参阅[WebLogic EJB 注释](http://docs.oracle.com/cd/E24329_01/web.1211/e24972/annotations.htm#i1438312)

# mysql - 关于 MySQL 查询的说明

> ID：15199955
> 
> 赞同：-5
> 
> 时间：2013-03-04T10:58:43.340
> 
> 标签：mysql, database, join

我想从员工表中打印第**n 个最高工资。**

查询是：

```
SELECT *
FROM emp E1
WHERE
  (n-1) = (SELECT count(distinct(E2.salary))
           FROM emp E2 Where
           E2.salary< E1.salary)
ORDER BY
  E1.salary ASC 
```

虽然效果很好，但我无法解释它是如何工作的。任何人都可以点亮它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:15:12.440

这是 MYSQL 中的一个特性。

如果您有基本查询，则可以使用 LIMIT

```
-- get the 9th highest salary
SELECT salary FROM tbl_salary
ORDER BY salary DESC
LIMIT 9,1 
```

如果它是一个复杂的查询，你可以使用

```
-- get the 9th highest salary
select distinct(salary) from tbl_salary e1
where 9 = (
select count(salary) 
from tbl_salary e2
where e1.salary< e2.salary
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:19:36.170

可能更容易理解为：

```
select * From emp E1 
where n = 1 + 
         (select count(distinct E2.salary) 
          from emp E2 
          Where E2.salary > E1.salary) 
```

或者：

```
select * From emp E1 
where n =(select count(distinct E2.salary) 
          from emp E2 
          Where E2.salary >= E1.salary) 
```

对于外部查询中的每条记录，子查询返回同一张表上所有不同工资值的计数，这些值具有更高（或在第二个版本中）值；然后，外部查询中的相等条件确保只选择匹配`n`更高薪水的记录。

原始`order by`查询中的 是不必要的。

# windows-phone-8 - 如何在 windows phone 8 中使用双向滑块或范围滑块？

> ID：15199958
> 
> 赞同：0
> 
> 时间：2013-03-04T10:58:47.527
> 
> 标签：windows-phone-8

Windows phone 8 如何对单个滑块使用两个调整控件？以下 URL 是 iphon Range 滑块示例。我想在 wp8 ( [http://www.cocoacontrols.com/controls/rangeslider](http://www.cocoacontrols.com/controls/rangeslider) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:09:35.783

没有用于使用滑块指定范围的内置控件。主要组件供应商也没有提供。

但是，[我在](https://www.google.com/search?hl=en&q=windows%20phone%20range%20control)[http://windowsphone7.vectorform.com/2010/11/04/custom-range-slider-for-wp7/](http://windowsphone7.vectorform.com/2010/11/04/custom-range-slider-for-wp7/)找到了一个第三方控件，它似乎可以满足您的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T21:26:02.717

如果要在 WP8/WP7 中使用，请转到 Blend，更改样式，在 CustomStyle 中添加新的 Rectangle

```
 <Style x:Key="CustomSlider" TargetType="Slider">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Maximum" Value="10"/>
        <Setter Property="Minimum" Value="0"/>
        <Setter Property="Value" Value="0"/>
        <Setter Property="Background" Value="{StaticResource PhoneChromeBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Slider">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0.1"              Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HorizontalTrack"/>
                                        <DoubleAnimation Duration="0" To="0.1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalTrack"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalFill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid x:Name="HorizontalTemplate" Margin="{StaticResource PhoneHorizontalMargin}">
                            <Rectangle x:Name="HorizontalTrack" Height="12" IsHitTestVisible="False" Margin="0,22,0,10" Fill="#FF75B3C1"/>
                            <Rectangle x:Name="HorizontalFill" Height="12" IsHitTestVisible="False" Margin="0,22,0,10" Fill="#FFEE887E">
                                <Rectangle.Clip>
                                    <RectangleGeometry Rect="0, 0, 6, 12"/>
                                </Rectangle.Clip>
                            </Rectangle>
                            <Rectangle x:Name="HorizontalCenterElement" HorizontalAlignment="Left" Height="24" Margin="0,10,0,0" Width="12" Fill="#FFBAB9C3">
                                <Rectangle.RenderTransform>
                                    <TranslateTransform/>
                                </Rectangle.RenderTransform>
                            </Rectangle>
                            <Rectangle x:Name="HorizontalCenterElement1" HorizontalAlignment="Left" Height="24" Margin="369,44,0,34" Width="12" Fill="#FFBAB9C3">
                                <Rectangle.RenderTransform>
                                    <TranslateTransform/>
                                </Rectangle.RenderTransform>
                            </Rectangle>
                        </Grid>
                        <Grid x:Name="VerticalTemplate" Margin="{StaticResource PhoneVerticalMargin}">
                            <Rectangle x:Name="VerticalTrack" Fill="{TemplateBinding Background}" IsHitTestVisible="False" Margin="18,0,18,0" Width="12"/>
                            <Rectangle x:Name="VerticalFill" Fill="{TemplateBinding Foreground}" IsHitTestVisible="False" Margin="18,0,18,0" Width="12">
                                <Rectangle.Clip>
                                    <RectangleGeometry Rect="0, 0, 12, 6"/>
                                </Rectangle.Clip>
                            </Rectangle>
                            <Rectangle x:Name="VerticalCenterElement" Fill="{StaticResource PhoneForegroundBrush}" Height="12" Margin="12,0,12,0" VerticalAlignment="Top" Width="24">
                                <Rectangle.RenderTransform>
                                    <TranslateTransform/>
                                </Rectangle.RenderTransform>
                            </Rectangle>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# c# - 删除可执行文件后设置会发生什么？

> ID：15199959
> 
> 赞同：0
> 
> 时间：2013-03-04T10:58:49.567
> 
> 标签：c#, winforms, settings, application-settings

假设我制作了一个没有安装程序（只有 exe 文件）的程序，它保存了一些设置数据。如果我删除那个exe文件会发生什么？设置会自动删除吗？如果没有，你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:02:38.153

应用程序设置存储在`<exename>.exe.config`可执行文件附近的文件名中。例如，如果您的可执行文件是`MyApp.exe`，则配置文件是`MyApp.exe.config`. 因此它们存储在不同的文件中。

[如果您更改用户级设置（应用](https://stackoverflow.com/a/469823/1174942)程序级设置是只读的）并保存`Settings.Default.Save()`设置（因此，如果您删除应用程序文件夹，更改的设置**不会**被删除。`user.config``%LOCALAPPDATA%`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:05:02.850

不，如果您只是删除 EXE，则不会删除设置。如果设置在安装程序后已被修改，则 MSI 也不会删除设置。但是，自定义操作将允许您在卸载期间删除文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:02:15.957

不，不会的。

设置存储在单独的文件中。
最好的方法是制作安装程序/卸载程序。**

# php - wordpress 上的自定义永久链接问题

> ID：15199962
> 
> 赞同：0
> 
> 时间：2013-03-04T10:58:57.100
> 
> 标签：php, wordpress

我使用以下代码创建了一个插件并访问了插件页面：

```
add_filter('page_template', 'in_page_template4' );
  function in_page_template4(){
  global $wpdb;
  $new_page_title = 'Inventory';
  $new_page_title1 = 'inventory-details';
   $new_page_title2 = 'spanos-inventory';
    $new_page_title3 = 'trade-in-inventory';
    $ppid=$_GET['page_id'];
  $sql = "SELECT * FROM wp_posts where ID='".$ppid."';";
 // $sql = "SELECT * FROM wp_posts where post_name='".$new_page_title."';";
  $cnt_post = $wpdb->get_results($sql);

  if(count($cnt_post)!=0){ $page_title=$cnt_post[0]->post_name;
      if($new_page_title==$page_title){

        $page_template = dirname( __FILE__ ) . '/car_inventory.php';
        return $page_template;
      }elseif($new_page_title1==$page_title){
        $page_template = dirname( __FILE__ ) . '/inventory_details.php';
        return $page_template;
      }
      elseif($new_page_title2==$page_title){
        $page_template = dirname( __FILE__ ) . '/car_inventory.php';
        return $page_template;
      }
        elseif($new_page_title3==$page_title){
        $page_template = dirname( __FILE__ ) . '/car_inventory.php';
        return $page_template;
      }

  }
} 
```

如果我们使用默认的永久链接插件运行良好，但是当我们使用自定义永久链接插件页面时显示**页面未找到错误**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:41:40.987

在尝试回答您的问题时，我会说您想更改此部分

```
dirname( __FILE__ ) 
```

如果你想要插件目录，你想要的实际目录

```
plugin_url('car_inventory.php'); 
```

# ios - 如何将图像放在 UIViewController 的导航栏的中心？

> ID：15199980
> 
> 赞同：22
> 
> 时间：2013-03-04T11:00:20.970
> 
> 标签：ios, uinavigationbar

我在 UIViewController 的 viewDidLoad 中使用了这段代码。我没有错误。图像存在。我得到了背景，但没有图像。图像是一种标志。

```
if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {

    /* Background of navigationBar. */
    UIImage * navigationBarImage = [UIImage imageNamed:@"01_navbar_portrait.png"];
    [self.navigationController.navigationBar setBackgroundImage:navigationBarImage forBarMetrics:UIBarMetricsDefault];

    /* Image in navigationBar */
    UIImage * logoInNavigationBar = [UIImage imageNamed:@"01_logo.png"];
    UIImageView * logoView = [[UIImageView alloc] init];
    [logoView setImage:logoInNavigationBar];
    self.navigationController.navigationItem.titleView = logoView;

} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-04T11:16:02.887

通过查看导航堆栈上最顶层视图控制器`UINavigationController`的属性来管理导航栏。`navigationItem`所以要将视图更改为徽标，您需要在使用徽标的视图控制器中进行设置（即根视图控制器或另一个被推送到堆栈上的视图控制器）。

`viewDidLoad`在你的视图控制器中做这样的事情：

```
UIImage* logoImage = [UIImage imageNamed:@"logo.png"];
self.navigationItem.titleView = [[UIImageView alloc] initWithImage:logoImage]; 
```

在您的情况下，您设置了错误的导航项：

```
// Oops...
self.navigationController.navigationItem.titleView = logoView;
// Should be this:
self.navigationItem.titleView = logoView; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-15T05:39:56.093

首先，我们必须创建一个与导航栏大小相同的视图，然后添加一个图像视图并将其框架设置为在导航栏中看起来居中。它适用于所有 ios 版本，它会根据设备自动采用框架大小（视网膜或正常）并且像魔术一样工作。

```
UIView *headerView = [[UIView alloc] init];
headerView.frame = CGRectMake(0, 0, 320, 44);

UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Header.png"]];
imgView.frame = CGRectMake(75, 0, 150, 44);
imgView.contentMode = UIViewContentModeScaleAspectFit;

[headerView addSubview:imgView];

navigationCtrl.navigationBar.topItem.titleView = headerView;

[headerView release];
[imgView release]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-10T10:26:13.797

迅速：

```
var logoImage:UIImage = UIImage(named: "logo_text")!
self.navigationItem.titleView = UIImageView(image: logoImage) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-11-13T14:35:28.577

```
extension UINavigationController {
func addLogoImage(image: UIImage, navItem: UINavigationItem) {
    let imageView = UIImageView(image: image)
    imageView.contentMode = .scaleAspectFit
    imageView.translatesAutoresizingMaskIntoConstraints = false

    let view = UIView(frame: CGRect(x: 0, y: 0, width: 200, height: 44))
    view.addSubview(imageView)

    navItem.titleView = view
    imageView.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = true
    imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true
    imageView.heightAnchor.constraint(equalTo: view.heightAnchor).isActive = true
    imageView.widthAnchor.constraint(equalTo: view.widthAnchor).isActive = true

    view.heightAnchor.constraint(equalTo: navigationBar.heightAnchor).isActive = true
    view.centerXAnchor.constraint(equalTo: navigationBar.centerXAnchor).isActive = true
    view.centerYAnchor.constraint(equalTo: navigationBar.centerYAnchor).isActive = true
}
} 
```

这是我正在使用的。

当然，您可能需要更多的约束，以免与左右栏按钮项发生冲突。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-22T11:41:58.627

也许不是你的意思，但我遇到了这个页面，寻找一种为导航栏提供居中*背景图像*的方法，所以如果你在这里......这是一种方法。

[从另一个答案](https://stackoverflow.com/questions/18273271/merge-two-image-on-to-one-image-programmatically-in-iphone)中窃取一点，您可以将图像分解为前景和背景，然后构建一个拉伸背景并使前景居中的新图像，然后将其设置为导航栏的背景图像。构建图像的工作方式如下：

```
// build an image by stretching the bg, then merging it with the fg
CGSize barSize = self.navController.navigationBar.frame.size;
UIImage *fg = [UIImage imageNamed:@"some_fg"];
UIImage *bg = [[UIImage imageNamed:@"some_bg"]
               resizableImageWithCapInsets:UIEdgeInsetsMake(0.f,1.f,0.f,1.f)];
UIGraphicsBeginImageContextWithOptions(barSize, NO, 0.0);
[bg drawInRect:CGRectMake(0, 0, barSize.width, barSize.height)];
[fg drawInRect:CGRectMake((barSize.width-fg.size.width)/2.f,
                          0,
                          fg.size.width,
                          fg.size.height)];
// grab the merged images
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T11:15:39.810

您只需指定它的框架

```
logoView.frame = CGRectMake(initialize frame here); 
```

然后使用以下

```
[self.navigationItem setTitleView:logoView]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-24T01:18:04.130

```
func centeredNavBarImage (){
    let navcontroller = navigationController!
    let image = #imageLiteral(resourceName: "yourImage")
    let imageView = UIImageView(image:image)

    let bannerWidth = navcontroller.navigationItem.accessibilityFrame.size.width
    let bannerHeight = navcontroller.navigationBar.frame.size.height

    let bannerX = bannerWidth / 2 - image.size.width / 2
    let bannerY = bannerHeight / 2 - image.size.height / 2

    imageView.frame = CGRect(x: bannerX, y: bannerY, width: bannerWidth, height: bannerHeight)
    imageView.contentMode = .scaleAspectFit

    navigationItem.titleView = imageView

} 
```

这是来自[https://youtu.be/bLkuu_fmlsU的修改代码](https://youtu.be/bLkuu_fmlsU)

bannerWidth 考虑了我在导航栏右侧的刷新按钮项。似乎工作。

在 ViewDidLoad 上运行函数

# ibm-mobilefirst - Worklight - SOAP 适配器无法解析 要求

> ID：15199992
> 
> 赞同：0
> 
> 时间：2013-03-04T11:00:57.690
> 
> 标签：ibm-mobilefirst

我正在尝试创建一个使用**soapenv:Envelope**请求的**SOAP 适配器。**但是当我调用适配器时，eclipse会产生以下错误-{“errors”：[“Ecma错误：**TypeError：无法从未**定义（C%3A%5Cdevelopment%5Cmywork%5CWorklight%5CWorklightApp lications%5Cadapters%5CSOAPAdapter /SOAPAdapter-impl.js#40)" ], "info": [ ], "isSuccessful": false, "warnings": [ ] }

 ****这似乎是一个 SAXParser 问题，因此我用谷歌搜索它并从 IBM 开发人员论坛**( [http://www.ibm.com/developerworks/forums/thread.jspa?threadID=454988](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=454988) )**获得了解决方案- 在 eclipse 中的 -vmargs 行之后.ini，添加这一行然后重启 Eclipse： **-Dorg.xml.sax.driver=com.sun.org.apache.xerces.internal.parsers.SAXParser**

我这样做了，但我仍然遇到同样的错误。这是我的 SOAP 请求 -

```
 "<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"+ 
  "xmlns:xsd="http://www.w3.org/2001/XMLSchema"+ 
  "xmlns:soapenv="http://schemas.xmlsoap.org"+
  "/soap/envelope/" xmlns:soap="http://soap.amazon.com">"+
  "<soapenv:Header/>"+
  "<soapenv:Body>"+
   "<soap:ActorSearchRequest soapenv:encodingStyle="http://schemas.xmlsoap.org"+
      "/soap/encoding/">"+
      "<ActorSearchRequest xsi:type="soap:ActorRequest" xs:type="type:ActorRequest"+ 
         "xmlns:xs="http://www.w3.org/2000/XMLSchema-instance">"+
         "<actor xsi:type="xsd:string" xs:type="type:string">abc</actor>"+
         "<page xsi:type="xsd:string" xs:type="type:string">1</page>"+
         "<mode xsi:type="xsd:string" xs:type="type:string">a</mode>"+
         "<tag xsi:type="xsd:string" xs:type="type:string">a</tag>"+
         "<type xsi:type="xsd:string" xs:type="type:string">a</type>"+
         "<devtag xsi:type="xsd:string" xs:type="type:string">a</devtag>"+            
      "</ActorSearchRequest>"+
      "</soap:ActorSearchRequest>"+
     "</soapenv:Body>"+
    "</soapenv:Envelope>"; 
```

更新功能 -

```
function temperatureConvertor(celsiusTemp) {
    var request = '<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.amazon.com">'+
           '<soapenv:Header/>'+
           '<soapenv:Body>'+
              '<soap:ActorSearchRequest soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">'+
                 '<ActorSearchRequest xsi:type="soap:ActorRequest" xs:type="type:ActorRequest" xmlns:xs="http://www.w3.org/2000/XMLSchema-instance">'+
                    '<actor xsi:type="xsd:string" xs:type="type:string">abc</actor>'+
                    '<page xsi:type="xsd:string" xs:type="type:string">1</page>'+
                    '<mode xsi:type="xsd:string" xs:type="type:string">a</mode>'+
                    '<tag xsi:type="xsd:string" xs:type="type:string">a</tag>'+
                    '<type xsi:type="xsd:string" xs:type="type:string">a</type>'+
                    '<devtag xsi:type="xsd:string" xs:type="type:string">a</devtag>'+            
                 '</ActorSearchRequest>'+
              '</soap:ActorSearchRequest>'+
           '</soapenv:Body>'+
        '</soapenv:Envelope>';              
    var input = {
        method : 'post',
        returnedContentType : 'plain',
        path : '/schemas2/AmazonWebServices.wsdl',
        body: {
            content: request.toString(),
            contentType: 'text/xml; charset=utf-8'
        }
    };              
    var result = WL.Server.invokeHttp(input);               
    return result.Envelope.Body;
} 
```

更新了 adapter.xml

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
        <wl:adapter xmlns:wl="http://www.worklight.com/integration" xmlns:http="http://www.worklight.com/integration/http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="SOAPAdapter">

            <displayName>SOAPAdapter</displayName>
            <description>SOAPAdapter</description>
            <connectivity>
                <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
                    <protocol>http</protocol>
                    <domain>soap.amazon.com</domain>
                    <port></port>           
                </connectionPolicy>
                <loadConstraints maxConcurrentConnectionsPerNode="2"/>
            </connectivity>

            <procedure name="temperatureConvertor"/>

        </wl:adapter> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:49:27.873

与其将 SOAP 请求创建为字符串，不如将其创建为 XML 文字 (E4X)。

意思是，而不是`var request = "<mytag>" + myJSVar + "</mytag>";`你应该做`var request = <mytag> {myJSVar} </mytag>`;

有关示例，请参见[将 HTTP 适配器与 SOAP 服务一起使用](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_05_3_-_Using_HTTP_Adapters_with_SOAP_Services.pdf)中的幻灯片 5 和 6****

# git - What would be the opposite of "git fetch"?

> ID：15199996
> 
> 赞同：12
> 
> 时间：2013-03-04T11:01:07.567
> 
> 标签：git, git-fetch

If I do git fetch from repo `A` to `B`, the master branch in `B` doesn't change - changes only `remotes/origin/master`, and `git status` reminds me of it.

But now I want to do the opposite - update `B` from `A`, something like pushing from `A:master` to `B:remotes/origin/master`. The reason for this is that this update happens over ssh, and `A` machine has public-key auth to `B` machine - but not vice versa.

How can I do this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T11:04:15.983

`git fetch A`, run from `B`, will store all current branches of `A` in `refs/remotes/A`. As you can do pretty much everything with [refspecs](http://git-scm.com/book/ch9-5.html), it's possible to do the same for a `git push`, but run from `A` and targeting `B`.

A refspec has two parts, separated by a semicolon. In the first part you select what you want to push. Here you want all current branches, so this is `refs/heads/*`.

Second part is where you'll store them on the remote; here you want to store them under `remotes/A/*`, so this is `refs/remotes/A/*`.

Put it together, to push all local branches to corresponding remote branches with this command:

```
git push --force B refs/heads/*:refs/remotes/A/* 
```

# c# - iTextSharp 不适用于传真机生成的 PDF？

> ID：15199999
> 
> 赞同：0
> 
> 时间：2013-03-04T11:01:12.913
> 
> 标签：c#, asp.net, pdf, itextsharp

我有一个类可以使用 iTextSharp 从 PDF 文件中提取图像。

我用扫描机生成的PDF进行了测试，效果很好。

然后，我用传真机生成的 PDF 进行测试，我得到一个 IOException: .pdf not found as file or resource。

我不知道为什么它不适用于传真机中的 PDF。iTextSharp 不支持来自传真机的 PDF 吗？

任何想法表示赞赏。谢谢

**编辑**

```
public List<Image> ExtractImagesFromFax(string sourcePdf)
    {
        var imgList = new List<Image>();

        try
        {                
            var pdfReader = new PdfReader(sourcePdf); //Error is here ...

            for (var i = 0; i <= pdfReader.XrefSize - 1; i++)
            {
                //code here
            }
            pdfReader.Close();                
        }
        catch(Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return imgList;
    } 
```

我试图通过 iTextSharp.text.pdf.PdfReader 阅读 PDF，但我得到了 IOException，所以我无法更进一步（只发生在传真机生成的 PDF 中）。

**PDF 文件：**

*   传真：[https ://www.box.com/s/xwwu5xziujay153y67rz](https://www.box.com/s/xwwu5xziujay153y67rz)

*   扫描：[https ://www.box.com/s/9tlqqwixw1w9b2znh1j2](https://www.box.com/s/9tlqqwixw1w9b2znh1j2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:53:32.327

`IOException`表示您正在尝试打开一个名为“.pdf”的文件。人们会期望该文件被命名为“somefile.pdf”，但现在您只有一个**点**和扩展名**pdf**。您确定这是您要读取的文件的名称吗？你确定你的代码是正确的吗？

请注意，iText 类并没有真正引发异常。PdfReader 使用 C# 类尝试打开文件，正是该 C# 类告诉您找不到文件。这可能意味着两件事：

1.  你没有使用正确的路径。
2.  您编写的应用程序没有足够的权限来访问该文件。

您可以通过编写一些将文件读入字节数组而不使用 iText 的代码来检查这一点。如果失败了，你就发现了你的问题。