# StackOverflow 问答 13681000-13681999

# c# - 防止 ASP.NET Web API 路由引擎扣除自定义方法名

> ID：13681000
> 
> 赞同：2
> 
> 时间：2012-12-03T10:08:35.913
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有带有 2 种方法的 Web API 控制器 - 假设第一种方法返回普通项目列表，第二种方法返回分配给特定用户的所有项目。

```
public class ProjectController: ApiController
{
    public IQueryable<Project> Get() { ... }

    [HttpGet]
    public IQueryable<Project> ForUser(int userId) { ... }
} 
```

在这种情况下，方法实现并不重要。

Web API 路由配置也进行了调整以支持自定义方法名称。

```
config.Routes.MapHttpRoute(
    "DefaultApi",
    "api/v1/{controller}/{id}",
    new { id = RouteParameter.Optional }
);

config.Routes.MapHttpRoute(
    "DefaultApiWithAction",
    "api/v1/{controller}/{action}"); 
```

它工作正常，我可以访问端点`/api/v1/projects/`和`/api/v1/projects/forUser/`端点，但似乎路由引擎太聪明了，所以它决定`/api/v1/projects?userId=1`请求可能与`ForUser(..)`方法匹配（我猜是由于`userId`参数名称）并忽略`{action}`了路由的一部分。

有什么方法可以避免这种行为并要求在 URL 中明确指定操作部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:26:00.247

夫妇的事情。首先这条路线：

```
config.Routes.MapHttpRoute(
    "DefaultApiWithAction",
    "api/v1/{controller}/{action}",
    new { id = RouteParameter.Optional }); 
```

没有“动作”作为可选参数。您已将其包含`id`为可选（我认为是错字），但由于它在路线中不存在，因此您不会仅与一个补充段匹配。只有包含两个部分（控制器和操作）的 URL 将通过此路由。这个网址：

```
/api/v1/projects?userId=1 
```

...包含一个段，不会。此路由以及任何其他缺少第二个组件的路由将默认使用此路由：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/v1/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

...它只需要一个控制器和一个可选的 ID。您需要重新格式化给定的 URL 以获取操作参数，或者重写您的路由以使操作可选并根据需要设置默认值。这一切都取决于您的应用程序架构，但总是在简单方面犯错。路线可能会变得非常复杂——通常越简单越好。

至于必需/可选的路由组件，请记住以下两点：

*   除非在匿名对象中将它们设置为可选，否则所有路由段都是必需的。
*   如果段具有默认值，也可以排除它们，通过在匿名对象中以`placeholder = value`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:14:34.257

我终于想出了满足我要求的解决方案。我已将*levib*和*user1797792建议的*[这个答案](https://stackoverflow.com/a/12185249/656426)和想法结合到以下配置中：

 **```
config.Routes.MapHttpRoute(
    "DefaultApiWithActionAndOptionalId",
    "api/v1/{controller}/{action}/{id}",
    new {id = RouteParameter.Optional});

config.Routes.MapHttpRoute(
    "DefaultApiGet",
    "api/v1/{controller}",
    new { action = "Get" },
    new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }); 
```

请注意，配置顺序在这里很重要。

首先，`/api/v1/projects`带有**任何**查询字符串的请求（即使是名称与其他操作的参数匹配的参数）都`Get()`通过第二条路由分派给该方法。这很重要，因为在实际项目中，我在此操作上附加了一个自定义操作过滤器，该过滤器`IQueryable`根据提供的请求参数过滤返回的内容。

`api/v1/projects/forUser/1`-like 请求`ForUser(int id)`通过第一条路由分派给方法。`userId`将参数重命名为`id`允许构造更清晰的 URL。

显然，这种方法有一些局限性，但在我的具体情况下，这就是我所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:25:50.683

我不完全理解你的问题。确实不应该`/api/v1/projects?userId=1`调用 ForUser 操作吗？

无论如何，要执行所需的操作，请将您的 HttpRoute 设置为：

```
 name: "DefaultApi",
   routeTemplate: "api/v1/{controller}/{action}/{id}",
   defaults: new { id = System.Web.Http.RouteParameter.Optional }); 
```

现在你可以这样调用： `/api/v1/projects/ForUser/2`**

# preg-replace - preg_replace 包含小数点

> ID：13681001
> 
> 赞同：0
> 
> 时间：2012-12-03T10:08:39.960
> 
> 标签：preg-replace, str-replace

我在表格中有货币值，为了过滤我只想显示没有货币符号的数字，但是，我需要小数点，这就是我正在使用的

```
$price_check = preg_replace('/\D/', '', str_replace(',','',(str_replace('&#163;','',$item[item_price]))); 
```

如何保留小数点？是第一个问题

另外，我`&#163;`先删除（英镑的 ascii），然后删除逗号（如果存在） - 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:23:05.070

想通了，无论如何 preg_replace

```
$price_check = preg_replace('/(\.[0-9]+?)0*$/', '$1', str_replace(',','',(str_replace('&#163;','',$item[item_price])))); 
```

# struts2 - Struts2 验证甚至不起作用

> ID：13681010
> 
> 赞同：1
> 
> 时间：2012-12-03T10:09:05.457
> 
> 标签：struts2

我还为 Struts2 基本验证配置了所有设置，但对我没有任何作用。

我的 login.jsp 文件

```
<%@taglib uri="/struts-tags" prefix="s" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
    <title>Login Page</title>
    <s:head />
  </head>
  <body>
    <s:actionerror/>
    <s:form action="Login" method="post">
      <s:textfield name="userName" label="User Name" />
      <s:password name="password" label="Password" />
      <s:submit value="Login" />
      <s:fielderror></s:fielderror>
    </s:form>
  </body>
</html> 
```

我的 loginAction 类是，

```
package com.test;
import com.opensymphony.xwork2.ActionSupport;

public class LoginAction extends ActionSupport {

private static final long serialVersionUID = 1L;
    private String userName;
    private String password;

    public LoginAction() {
    }

    public String execute() {
        return "SUCCESS";
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

我的 struts2.xml 文件是，

```
<package name="default" namespace="/" extends="struts-default">
    <action name="Login" class="com.test.LoginAction" method="execute">
        <result name="SUCCESS">login.jsp</result>
        <result name="input">login.jsp</result>
    </action>
</package>
</struts> 
```

我将我的 LoginAction-validation.xml 文件放在放置 Action 类的同一个包中。

请注意我的代码并帮助我解决验证问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T18:24:25.640

您在动作类的执行方法中返回相同的 login.jsp 页面。因此，每次您按 Enter 键时，都会显示带有空白字段的登录页面。

尝试根据从操作类返回的字符串创建一个额外的 jsp，您将被重定向到该 jsp。

除此之外，我没有看到任何问题。

# iphone - 开车时没有得到准确的速度

> ID：13681014
> 
> 赞同：0
> 
> 时间：2012-12-03T10:09:20.563
> 
> 标签：iphone, objective-c, ios, xcode

我正在构建一个应用程序，当达到最大速度限制“120 公里/小时”时通知用户

但是在驾驶时测试应用程序时我没有得到准确的速度值

假设我以 80 公里/小时的速度行驶，我从应用程序获得的值介于 60 到 100 之间，有时每秒变化更多。

这是我正在使用的整个代码

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import "CoreLocationController.h"
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController <CLLocationManagerDelegate,     CoreLocationControllerDelegate> {
MKMapView *mapview;
CLLocationManager *locationManager;
IBOutlet UILabel *speedLabel;
CoreLocationController *CLController;

int distance;
int currentSpeed;
int maxSpeed;
IBOutlet UILabel *distanceLbl;
IBOutlet UILabel *maxSpeedLbl;
IBOutlet UILabel *currentSpeedLbl;
}

- (IBAction)Getlocation:(id)sender;

@property (nonatomic, retain) IBOutlet UILabel *distanceLbl;
@property (nonatomic, retain) IBOutlet UILabel *maxSpeedLbl;
@property (nonatomic, retain) IBOutlet UILabel *currentSpeedLbl;
@property (retain, nonatomic) IBOutlet UILabel *speedLabel;
@property (nonatomic, retain) CoreLocationController *CLController;
@property (retain, nonatomic) IBOutlet MKMapView *mapview;
@property (strong, nonatomic) IBOutlet CLLocationManager *locationManager; 
```

视图控制器.m

```
@synthesize distanceLbl,maxSpeedLbl,currentSpeedLbl;
@synthesize locationManager;
@synthesize mapview;
@synthesize speedLabel;
@synthesize CLController;

- (void)locationChange:(CLLocation *)newLocation:(CLLocation *)oldLocation {

    NSTimeInterval difference = [[newLocation timestamp] timeIntervalSinceDate:[oldLocation timestamp]];

    double temp_distance = [newLocation getDistanceFrom:oldLocation];

    distance += temp_distance;
    distanceLbl.text = [NSString stringWithFormat:@"%.2d",distance];
    currentSpeed = (temp_distance/difference) * (18.0/5.0);
    if (currentSpeed > maxSpeed) {
        maxSpeed = currentSpeed;
        maxSpeedLbl.text = [NSString stringWithFormat:@"%.2d",maxSpeed];
    }
    currentSpeedLbl.text = [NSString stringWithFormat:@"%.2d",currentSpeed];
}

- (void)locationUpdate:(CLLocation *)location {
    speedLabel.text = [NSString stringWithFormat:@"SPEED: %f", [location speed]];
    self.mapview.showsUserLocation = YES;
}

- (void)locationError:(NSError *)error {
    speedLabel.text = [error description];
}

- (IBAction)Getlocation:(id)sender {
    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    [locationManager startUpdatingLocation];

    [mapview setMapType:MKMapTypeStandard];
    [mapview setZoomEnabled:YES];
    [mapview setScrollEnabled:YES];
    self.mapview.showsUserLocation = YES;
    MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
    region.center.latitude = locationManager.location.coordinate.latitude;
    region.center.longitude = locationManager.location.coordinate.longitude;
    region.span.longitudeDelta = 0.007f;
    region.span.latitudeDelta = 0.007f;
    [mapview setRegion:region animated:YES];
    [mapview setDelegate:sender];
}

- (IBAction)setMap:(id)sender {

    switch (((UISegmentedControl *) sender).selectedSegmentIndex) {
        case 0:
            mapview.mapType = MKMapTypeStandard;
            break;
        case 1:
            mapview.mapType = MKMapTypeSatellite;
            break;
        case 2:
            mapview.mapType = MKMapTypeHybrid;
            break;
        default:
            break;
    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    CLController = [[CoreLocationController alloc] init];
    CLController.delegate = self;
    [CLController.locMgr startUpdatingLocation];

    [self Getlocation:self];

    maxSpeed = 120;
} 
```

核心位置控制器.h

```
@protocol CoreLocationControllerDelegate
@required

- (void)locationUpdate:(CLLocation *)location;
- (void)locationError:(NSError *)error;
- (void)locationChange:(CLLocation *)newLocation:(CLLocation *)oldLocation;

@end

@interface CoreLocationController : NSObject <CLLocationManagerDelegate> {
    CLLocationManager *locMgr;
    id delegate;

    //new speed method
    int distance;
    int currentSpeed;
    int maxSpeed;
    IBOutlet UILabel *distanceLbl;
    IBOutlet UILabel *maxSpeedLbl;
    IBOutlet UILabel *currentSpeedLbl;
}

@property (nonatomic, retain) IBOutlet UILabel *distanceLbl;
@property (nonatomic, retain) IBOutlet UILabel *maxSpeedLbl;
@property (nonatomic, retain) IBOutlet UILabel *currentSpeedLbl;

@property (nonatomic, retain) CLLocationManager *locMgr;
@property (nonatomic, assign) id delegate; 
```

核心位置控制器.m

```
@synthesize locMgr;
@synthesize delegate = _delegate;
@synthesize distanceLbl,maxSpeedLbl,currentSpeedLbl;

- (id)init {
    self = [super init];

    if(self != nil) {
        self.locMgr = [[CLLocationManager alloc] init];
        self.locMgr.delegate = self;
    }

    return self;
}

- (void)locationChange:(CLLocation *)newLocation:(CLLocation *)oldLocation {

    NSTimeInterval difference = [[newLocation timestamp] timeIntervalSinceDate:[oldLocation timestamp]];

    double temp_distance = [newLocation getDistanceFrom:oldLocation];

    distance += temp_distance;
    distanceLbl.text = [NSString stringWithFormat:@"%.2d",distance];
    currentSpeed = (temp_distance/difference) * (18.0/5.0);
    if (currentSpeed > maxSpeed) {
        maxSpeed = currentSpeed;
        maxSpeedLbl.text = [NSString stringWithFormat:@"%.2d",maxSpeed];
    }
    currentSpeedLbl.text = [NSString stringWithFormat:@"%.2d",currentSpeed];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    if([self.delegate conformsToProtocol:@protocol(CoreLocationControllerDelegate)]) {
        [self.delegate locationUpdate:newLocation];
        [self.delegate locationChange:newLocation :oldLocation];
    }
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    if([self.delegate conformsToProtocol:@protocol(CoreLocationControllerDelegate)]) {
        [self.delegate locationError:error];
    }
} 
```

# c# - 将一个集合转换为另一个集合（不是列表）

> ID：13681015
> 
> 赞同：0
> 
> 时间：2012-12-03T10:09:27.437
> 
> 标签：c#, linq

我有一个`DateTime`名为的集合`reportLogs`。我需要从这个创建一个`Collection<T>`。最有效的方法是什么？`ShortDateString``Collection<DateTime>`

```
Collection<DateTime> reportLogs =  reportBL.GetReportLogs(1, null, null);
Collection<string> logDates = new Collection<string>();
foreach (DateTime log in reportLogs)
{
    string sentDate = log.ToShortDateString();
    logDates.Add(sentDate);
} 
```

**编辑**：

问题是关于`Collection of string`; 不是关于`List of string`。我们如何处理字符串的集合？

**参考**：

1.  [使用 LINQ 将 List<U> 转换为 List<T>](https://stackoverflow.com/questions/7075572/using-linq-to-convert-listu-to-listt)
2.  [LINQ 将 DateTime 转换为字符串](https://stackoverflow.com/questions/6887776/linq-convert-datetime-to-string)
3.  [转换集合子集合中的日期时间并在 LINQ to SQL 中使用](https://stackoverflow.com/questions/11976763/convert-a-datetime-in-a-subcollection-of-collection-and-use-it-in-linq-to-sql)
4.  [将 Collection<MyType> 转换为 Collection<Object>](https://stackoverflow.com/questions/9200770/convert-collectionmytype-to-collectionobject)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:11:28.940

如果您对以下内容感到满意`IEnumerable<string>`：

```
IEnumerable<string> logDates = reportBL.GetReportLogs(1, null, null)
                                      .Select(d => d.ToShortDateString()); 
```

您可以`List<string>`通过再打 1 个电话轻松将其转换为

```
List<string> logDates = reportBL.GetReportLogs(1, null, null)
                                      .Select(d => d.ToShortDateString())
                                      .ToList(); 
```

编辑：如果你*真的*需要你的对象，`Collection<T>`那么该类有[一个构造函数，`IList<T>`](http://msdn.microsoft.com/en-us/library/ms132401.aspx)因此以下内容将起作用：

```
Collection<string> logDates = new Collection(reportBL.GetReportLogs(1, null, null)
                                      .Select(d => d.ToShortDateString())
                                      .ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:13:30.127

```
var logDates= reportLogs.Select(d => d.ToShortDateString()); 
```

您可以选择添加一个`.ToList()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T11:07:13.477

```
 //Create a collection of DateTime 
```

DateTime obj =new DateTime(2013,5,5);

```
List<DateTime>lstOfDateTime = new List<DateTime>()
{
  obj,obj.AddDays(1),obj.AddDays(2)

}; 
```

使用 List 类**convertAll**方法转换为 ShortDateString

//转换为短日期字符串

```
 Lis<string> toShortDateString =  lstOfDateTime.ConvertAll(p=>p.ToShortDateString()); 
```

# mysql - Windows上的ruby mysql异步

> ID：13681016
> 
> 赞同：0
> 
> 时间：2012-12-03T10:09:33.343
> 
> 标签：mysql, ruby, windows, asynchronous

mysql2 gem 有“Windows 上不支持”的注释。我需要一个简单的解决方案来对 Windows 上的 mysql 数据库进行异步调用。不需要 ORM 支持。最好不要使用 Eventmachine，因为我不想将整个应用程序打包在 EM.run 块中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:13:08.737

有这个，但在过去的两年中似乎没有任何变化。也许它会给你你所需要的，我相信你可以联系作者。

[https://github.com/chrismoos/async-mysql](https://github.com/chrismoos/async-mysql)

# android - 如何管理 GridView

> ID：13681024
> 
> 赞同：6
> 
> 时间：2012-12-03T10:10:07.740
> 
> 标签：android, android-layout

我有以下 Gridview 代码（制作日历）。

```
 <GridView
    android:id="@+id/calendar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/rl1"
    android:layout_below="@+id/ll2"
    android:columnWidth="250dp"
    android:numColumns="7" >
    </GridView> 
```

Grid_Cell 如下。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/calendar_button_selector" >

<Button
    android:id="@+id/calendar_day_gridcell"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/calendar_button_selector"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#000"
    android:textSize="14.47sp" >
</Button>

<TextView
    android:id="@+id/num_events_per_day"
    style="@style/calendar_event_style"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" >
</TextView> 
```

我想在行和列之间不设置空格。![像这样](../Images/6a53093c25c99be23426035228a6b152.png)

现有视图如下。

![现有图像](../Images/c0e674a71a4ac0af7a9e03f67f1cdbcf.png)

请帮帮我...在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:56:48.313

我可能是错的，但据我所知，它[`GridView`](http://developer.android.com/reference/android/widget/GridView.html)是一个`AdapterView`，在你的情况下，这意味着你不能通过 xml 动态地格式化你的项目的高度，以便它们总是填满整个父项。这不是网格视图（以及列表视图和其他适配器视图）的工作方式。

这种“可滚动的容器视图”可以看作是很久以前存在于“现代图书馆”中的[缩微胶片阅读器。](http://en.wikipedia.org/wiki/Microfilm_reader)需要意识到数据实际上与实际查看器无关，您只需使用`GridView`带有修复和高度的查看器（在您的情况下）来平移也具有固定宽度和高度的底层数据项。

正如我所看到的，您正试图明确定位数据恰好与查看器窗口具有相同几何大小的极端情况。

***不过，有一些提示：***

您可以改为查看[`GridLayout`](http://developer.android.com/reference/android/widget/GridLayout.html). 是在 API 级别 14（IceCream Sandwich）中引入的`GridLayout`，因此您可能必须在那里重新考虑您的版本支持策略（如果我没有完全弄错，它也应该包含在 v7 支持包中，以便在旧平台上向后兼容，在这种情况下您可以简单地将 jar 添加到您的应用程序以支持较旧的 API 级别）。

另一个技巧是使用 a[`TableLayout`](http://developer.android.com/reference/android/widget/TableLayout.html)与相应的表格行，而不是什么。从第一`TableLayout`天开始就已经存在，因此不存在向后兼容性问题，但它们确实倾向于变得非常密集布局。如果您打算大量重新加载视图或在几个月之间顺利滚动，我不确定这是否适合您（由于深度布局路线的数量）。

第三种解决方案是您仍然使用`GridView`，但您测量它的高度并根据测量的高度从您的网格视图适配器动态设置您膨胀的网格视图项目的固定`GridView`高度（换句话说：您确保您输入上面提到的极端情况）。

如果您使用，`GridView`您还需要摆脱垂直间距。有一个你可以[玩弄](https://stackoverflow.com/questions/8108571/how-to-get-rid-of-spaces-in-gridview)`android:stretchMode`的属性。您还可以在属性上尝试不同的（负数？）维度。`GridView``android:verticalSpacing`

祝您的自定义日历视图好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T08:40:35.583

我会尝试给你一个片段，但老实说，没有必要为你的情况使用 GridView，因为无论如何你的所有项目都在屏幕上。`LinearLayout`您可以在一个小循环中创建几个s 来获得结果。

我建议您根据屏幕宽度在运行时设置 columnWidth。

并且当膨胀子视图时，您的适配器应该提供列宽和高度来设置它们。在这种情况下，您需要摆脱 numColumns。请记住，将 numColumns 与 columnWidth 一起使用是没有意义的，尤其是当您想要填充整个空间时。如果要设置 numColumns，请删除 columnWidth。

**解决方案**：

结果如下： ![在此处输入图像描述](../Images/4d698aebc004a6d5cc197c24f7419865.png) 首先，我们创建布局。就我而言，它是`MainActivity`的布局，被称为`activity_main.xml`. （请注意没有 GridView，因为我稍后会在代码中添加它）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/header"
        android:background="#444"
        android:gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white"
        android:text="Dynamic Static GridView" />

    <TextView
        android:id="@+id/footer"
        android:gravity="center"
        android:background="#444"
        android:textColor="@android:color/white"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:text="Shush" />

</RelativeLayout> 
```

我们的 GridView 元素的布局位于`item_grid.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:background="#fff"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

现在诀窍在 MainActivity 中（我已经注释了一些代码供您理解）：

包 com.example.dynamicstaticgridview；

```
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.GridView;
import android.widget.RelativeLayout;
import android.app.Activity;
import android.graphics.Color;

/**
 * @author Sherif elKhatib
 *
 */
public class MainActivity extends Activity {

    private static String items[]; //these are temporary items :p do not use them
    static {
        items = new String[7*7];
        for(int i=0;i<7*7;i++) {
            items[i] = String.valueOf(i);
        }
    }

    int numberOfColumns = 7; //defaulting to 7, you can change it when you know
    int numberOfRows = 7; //defaulting to 7, you can change it when you know
    GridView mGrid;
    ArrayAdapter<String> mAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        params.addRule(RelativeLayout.BELOW, R.id.header);
        params.addRule(RelativeLayout.ABOVE, R.id.footer);
        mGrid = new GridView(this) {
            @Override
            protected void onLayout(boolean changed, int l, int t, int r, int b) {
                super.onLayout(changed, l, t, r, b);
                if(!calculated)
                    getDimens();
            }
        };
        mGrid.setVerticalSpacing(0);
        mGrid.setHorizontalSpacing(0);
        mGrid.setStretchMode(GridView.NO_STRETCH);
        mGrid.setBackgroundColor(Color.rgb(100, 10, 10));
        ((RelativeLayout)findViewById(R.id.rootview)).addView(mGrid, params);
    }

    private int mCellWidth;
    private int mCellHeight;
    boolean calculated = false;
    protected void getDimens() {
        calculated = true;
        //here you might have some rounding errors
        //thats why you see some padding around the GridView
        mCellWidth = mGrid.getWidth()/numberOfColumns;
        mCellHeight = mGrid.getHeight()/numberOfRows;
        mGrid.setColumnWidth(mCellWidth);
        mGrid.setNumColumns(numberOfColumns);
        mAdapter = new ArrayAdapter<String>(this, R.layout.item_grid, R.id.text, items) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                GridView.LayoutParams params = null;
                if(convertView == null) {
                    params = new GridView.LayoutParams(mCellWidth, mCellHeight);
                }
                convertView = super.getView(position, convertView, parent);
                if(params != null) {
                    convertView.setLayoutParams(params);
                }
                return convertView;
            }
        };
        mGrid.setAdapter(mAdapter);
    }
} 
```

**评论**：你最好找到一个合适的算法来选择`mCellWidth`, `mCellHeight`,`numberOfColumns`和`numberOfRows`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T18:42:48.337

如果你想给你的gridview一个高度和宽度，在gridview之外放置一个相对布局，并将android:layout_width和android:layout_height给你的相对布局。然后将您的gridview 的宽度和高度提供给match_parent。之后，如果您想首先为您的 gridview 单元格元素提供精确的高度和宽度，您必须知道所有单元格的确切宽度和高度，并且您应该据此定义 columnWidth，例如对于此代码

```
 <GridView
android:id="@+id/calendar"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_above="@+id/rl1"
android:layout_below="@+id/ll2"
android:columnWidth="250dp"
android:numColumns="7" >
</GridView> 
```

如果你在外面没有 1000dp 布局，你永远不会在一个好的视图中在一行中得到 4 个单元格，但只有 gridview 会尝试确定它自己的单元格宽度。

对于您的情况，您的日历网格视图应该是这样的：

```
<GridView
android:id="@+id/calendar"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_above="@+id/rl1"
android:layout_below="@+id/ll2"
android:columnWidth="50dp"
android:numColumns="7" >
</GridView> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T11:27:31.290

这似乎是您的解决方案[http://www.anddev.org/how_to_display_gridview_with_gridlines_and_borders-t11099.html](http://www.anddev.org/how_to_display_gridview_with_gridlines_and_borders-t11099.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T17:47:30.433

尝试在 XML 中为您设置这两个值`GridView`：

```
android:horizontalSpacing="0dp"
android:verticalSpacing="0dp" 
```

您可能希望删除该`android:columnWidth`字段。

# asp.net-mvc - 如何在新窗口中“提交”后打开填写表格的结果？

> ID：13681025
> 
> 赞同：0
> 
> 时间：2012-12-03T10:10:09.190
> 
> 标签：asp.net-mvc, c#-4.0, razor

环境：Visual Studio 2012、MVC4、Razor。我的代码：

```
@using (Html.BeginForm())
    {
        @Html.ValidationSummary(false)
        <fieldset>
            <div class="editor-field">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>

            <p><input name="action:FirstResult" type="submit" value="ResultOne" /></p>
            <p><input name="action:SecondResult" type="submit" value="ResultTwo" /></p>
       </fieldset>
    } 
```

问题是 - 我有两个提交按钮。他们正在将信息发送给不同的观点。我希望在新窗口中看到这些视图。我试图在“”中插入“ `new{target = "_blank"}`” `@using (Html.BeginForm())`，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:30:36.840

请按如下方式替换您的代码以解决您的问题

```
@using (Html.BeginForm("FirstAction","Controller"))
    {
<input  type="submit" value="ResultOne" />
    }

@using (Html.BeginForm("SecondAction","Controller"))
    {
<input  type="submit" value="ResultTwo" />
    } 
```

问候， Pavan.G

# unit-testing - 声纳构建稳定性插件将不稳定的构建标记为失败

> ID：13681028
> 
> 赞同：1
> 
> 时间：2012-12-03T10:10:25.887
> 
> 标签：unit-testing, jenkins, sonarqube

我正在为 Sonar 使用很酷的 Build Stability 插件。我正在将 Jenkins 构建结果导入 Sonar。我正在跟踪的 Jenkins 构建只有不稳定和失败的结果，还没有成功（所有测试都还没有通过）。这使得 Sonar 中的结果有点误导，因为它将所有构建都显示为失败。

是否有可能以某种方式在声纳中改变这一点？即不稳定的构建将显示为绿色，或者不稳定的构建将在声纳中具有单独的颜色，例如黄色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:37:05.877

事实上，这是一个开放的请求：http: [//jira.codehaus.org/browse/SONARPLUGINS-1608](http://jira.codehaus.org/browse/SONARPLUGINS-1608)。随意投票。

# android - 如何将片段添加到 Android 中的选项卡？

> ID：13681037
> 
> 赞同：0
> 
> 时间：2012-12-03T10:10:52.060
> 
> 标签：android, android-fragments

这是我的 MapFragment：

```
public class MapFragment extends SherlockFragment {

    public static final String TAG = "mapFragment";

    public MapFragment() {}

    @Override
    public void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle data) {
        // The Activity created the MapView for us, so we can do some init stuff.
        Exchanger.mMapView.setClickable(true);
        Exchanger.mMapView.setBuiltInZoomControls(true); // If you want.

        /*
         * If you're getting Exceptions saying that the MapView already has
         * a parent, uncomment the next lines of code, but I think that it
         * won't be necessary. In other cases it was, but in this case I
         * don't this should happen.
         */
        /*
         * final ViewGroup parent = (ViewGroup) Exchanger.mMapView.getParent();
         * if (parent != null) parent.removeView(Exchanger.mMapView);
         */

        return Exchanger.mMapView;
    }
}

This is my LocationTabActivity: 

public class LocationTabActivity extends RoboSherlockMapActivity implements ActionBar.TabListener{

    private MapFragment mMapFragment;
    private MyListFragment mMyListFragment;

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Exchanger.mMapView = (MapView)findViewById(R.id.mapView1);

        getSupportActionBar()

          .setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab newTab0 = getSupportActionBar().newTab();

    newTab0.setText("Location");

    ActionBar.Tab newTab1 = getSupportActionBar().newTab();

    newTab1.setText("Map");

    newTab0.setTabListener(this);

    newTab1.setTabListener( this);

    getSupportActionBar().addTab(newTab0);

    getSupportActionBar().addTab(newTab1);

    } 
```

我发现将片段添加到 Android 选项卡非常困难。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:18:13.913

此[链接](http://marakana.com/s/post/1250/android_fragments_tutorial)可能会对您有所帮助。

您也可以在 API 级别低于 11 的情况下实现 Fragment。为此，您需要执行以下步骤：- 将 android-support-v4.jar 添加到您的项目中。在 SDK-PATH/extras/android/compatibility/v4/ 中找到这个 jar。将其复制到项目根目录下的 libs 文件夹中，并将其添加到项目构建路径中。使用 FragmentActivity 而不是 Activity。要获取 FragmentManager，请使用 getSupportFragmentManager 而不是 getFragmentManager。

# javascript - EmberJS 不会自动在视图中显示上下文对象的属性

> ID：13681038
> 
> 赞同：0
> 
> 时间：2012-12-03T10:10:53.077
> 
> 标签：javascript, ember.js, ember-data

遵循 Emberjs.com (http://emberjs.com/guides/outlets/) 上的“Outlets”指南后，我无法在帖子（子/单数）模板中显示帖子的标题和正文。你们中有人遇到过吗？这是纲要：

```
# PostsTemplate
{{#each post in controller}}
  <h1><a {{action showPost post href=true}}>{{post.title}}</a></h1>
  <div>{{post.body}}</div>   <------ title and body show up correctly here
{{/each}}

# PostTemplate
<h1>{{title}}</h1>  <---- but title and body are EMPTY here  
<div class="body">
  {{body}}
</div>
{{outlet}}

# Router
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      redirectsTo: 'posts'
    }),
    posts: Ember.Route.extend({
      route: '/posts',
      showPost: Ember.Route.transitionTo('post'),
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('posts', App.Post.find());
      }
    }),
    post: Ember.Route.extend({
      route: '/posts/:post_id',
      connectOutlets: function(router, post) {
        console.log(post);    <------------------ This tells me the post has the write attributes.
        router.get('applicationController').connectOutlet('post', post); #This post does not show up in PostTemplate above!
      }
     })
 }); 
```

当我运行 console.log(post) 并检查帖子时，我发现我有以下内容：

```
Class = {
 id: "1",
 _data:
  { 
    attributes:
    {
      body: "a",
      title: "a" 
    }
  },
  title: null,
  body: null
 } 
```

任何人都知道为什么我没有看到标题或正文属性出现在视图中？

ps Post 模型是一个 Ember 数据模型，可以从 Rails 应用程序中正确检索 id 为 1 的 Post。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:14:08.240

I believe you can use {{content.title}} and {{content.body}} since your Post model should be set to the content of the postController. An easy way to debug this within the view is to put {{content}} in the view which will render the type of model that the item is (such as App.Post).

# c# - 自定义控件加载问题

> ID：13681040
> 
> 赞同：0
> 
> 时间：2012-12-03T10:10:58.437
> 
> 标签：c#, visual-studio-2010

我们有一个名为 HostStatusControl 的自定义控件。当我们将控件放置到窗体时，我们会收到以下错误消息。`ICEIOBridge`是控件引用的 CLI 库之一。如果我们删除 ICEIOBridge，错误消息将与控件引用的另一个 CLI 库一起显示

问题的原因可能是什么？

```
---------------------------
Microsoft Visual Studio
---------------------------
Failed to create component 'HostStatusControl'.  The error message follows:

'System.IO.FileNotFoundException: Could not load file or assembly 'ICEIOBridge, Version=1.3.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.

File name: 'ICEIOBridge, Version=1.3.0.0, Culture=neutral, PublicKeyToken=null'

   at NeST.ICE.UI.TitlePanel.HostStatusControl..ctor()

WRN: Assembly binding logging is turned OFF.

To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.

Note: There is some performance penalty associated with assembly bind failure logging.

To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

'
---------------------------
OK   
--------------------------- 
```

* * *

我们尝试使用 Fusion Log 查看器，日志内容如下所示。

来自 VS 错误消息的信息

```
---------------------------
Microsoft Visual Studio
---------------------------
Failed to create component 'HostStatusControl'.  The error message follows:

'System.BadImageFormatException: Could not load file or assembly 'TestCLI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=3045f9e53eded2d0' or one of its dependencies. An attempt was made to load a program with an incorrect format.

File name: 'TestCLI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=3045f9e53eded2d0'

   at NeST.ICE.UI.TitlePanel.HostStatusControl..ctor()

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll

Running under executable  D:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe

--- A detailed error log follows. 

=== Pre-bind state information ===

LOG: User = TVM\monisha.mj

LOG: DisplayName = TestCLI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=3045f9e53eded2d0
(Fully-specified)

LOG: Appbase = file:///D:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/

LOG: Initial PrivatePath = NULL

Calling assembly : (Unknown).

===

LOG: This bind starts in default load context.

LOG: Using application configur...'
---------------------------
OK 
```

**Fusion Log1（开发）**

```
*** Assembly Binder Log Entry  (12/5/2012 @ 1:29:11 PM) ***

The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  D:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = TVM\monisha.mj
LOG: DisplayName = Microsoft.VisualStudio.Platform.AppDomainManager, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
(Fully-specified)
LOG: Appbase = file:///D:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = devenv.exe
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Download of application configuration file was attempted from file:///D:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/devenv.exe.Config.
LOG: Found application configuration file (D:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.Config).
LOG: Private path hint found in configuration file: PublicAssemblies;PrivateAssemblies;CommonExtensions\Microsoft\TemplateProviders;PrivateAssemblies\DataCollectors;PrivateAssemblies\DataCollectors\x86;CommonExtensions\Microsoft\Editor;CommonExtensions\Platform\Debugger.
LOG: Using application configuration file: D:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Microsoft.VisualStudio.Platform.AppDomainManager, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
LOG: Reusing an assembly instance that was previously loaded (C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.VisualStudio.Platform.AppDomainManager\v4.0_10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Platform.AppDomainManager.dll). 
```

**Fusion Log2(Windows Forms Application1.vshost.exe)**

```
*** Assembly Binder Log Entry  (12/5/2012 @ 1:29:33 PM) ***

The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  D:\TestApplication\WindowsFormsApplication1\WindowsFormsApplication1\bin\Release\WindowsFormsApplication1.vshost.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = TVM\monisha.mj
LOG: DisplayName = Microsoft.VisualStudio.HostingProcess.Utilities, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL
 (Fully-specified)
LOG: Appbase = file:///D:/TestApplication/WindowsFormsApplication1/WindowsFormsApplication1/bin/Release/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = WindowsFormsApplication1.vshost.exe
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Download of application configuration file was attempted from file:///D:/TestApplication/WindowsFormsApplication1/WindowsFormsApplication1/bin/Release/WindowsFormsApplication1.vshost.exe.config.
LOG: Configuration file D:\TestApplication\WindowsFormsApplication1\WindowsFormsApplication1\bin\Release\WindowsFormsApplication1.vshost.exe.config does not exist.
LOG: No application configuration file found.
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Microsoft.VisualStudio.HostingProcess.Utilities, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL
LOG: Found assembly by looking in the GAC.
LOG: Binding succeeds. Returns assembly from C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.dll.
LOG: Assembly is loaded in default load context. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:13:58.283

这看起来像 DLL 地狱，尝试删除所有引用，对构建执行清理并再次引用所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:57:30.983

根据我的经验，这可能是因为两件事：

1.  如果在现有文件上发生 FileNotFoundException，即您确定该文件存在（在文件系统或 GAC 中），则可能是因为它的版本。我的意思是当你有一个名为 A 的 dll 引用 B，而 B 本身引用 C，那么当 C 更改它的版本时，你应该针对新的 dll C 重新构建 B，然后重新构建 A。结果，我认为重新- 使用 VS2010 构建用户控件（以及所有底层依赖于您自己的 dll）可能会有所帮助。
2.  另一种可能性是您尝试在 64 位操作系统上运行 dll，但它的一个（或多个）底层依赖 dll 仅针对 32 位操作系统编译。**结果，我认为使用“ x86** ”选项而不是“ **any cpu** ”重新构建用户控件可能会有所帮助。

# spring - Spring MVC 控制器列表 作为参数

> ID：13681041
> 
> 赞同：0
> 
> 时间：2012-12-03T10:11:02.967
> 
> 标签：spring, list, model-view-controller, parameters, controller

我有一个 Spring MVC 应用程序。Jsp页面包含表单，提交。我的控制器的方法如下所示：

```
@RequestMapping(value = "photos/fileUpload", method = RequestMethod.POST)
    @ResponseBody
    public String fileDetailsUpload(List<PhotoDTO> photoDTO,
                                    BindingResult bindingResult,
                                   HttpServletRequest request) {
        // in the point **photoDTO** is null
    } 
```

我的课是：

```
 public class PhotoDTO {
        private Boolean mainPhoto;
        private String title;
        private String description;
        private Long realtyId;

//getters/setters 
```

但是，如果我编写相同的方法，但 param 只是我的对象：

```
 @RequestMapping(value = "photos/fileUpload", method = RequestMethod.POST)
        @ResponseBody
        public String fileDetailsUpload(PhotoDTO photoDTO,
                                        BindingResult bindingResult,
                                        HttpServletRequest request) {
// Everething is Ok **photoDTO** has all fields, which were fielded on the JSP 
```

在这种情况下我该怎么办？如果我在 Jsp 上有许多**PhotoDTO**对象（15），我如何才能在服务器部分接收所有这些对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:22:16.330

该页面应`PhotoDTO`以适当的格式将列表中每个参数的参数传递回服务器。在这种情况下，您需要使用状态变量来使用 name 属性指定列表中每个对象的索引。

```
<form>
<c:forEach items="${photoDTO}" var="photo" varStatus="status">
        <input name="photoDTO[${status.index}].title" value="${photo.title}"/>
        <input name="photoDTO[${status.index}].description" value="${photo.description}"/>
</c:forEach>
</form> 
```

# vba - 在 excel vba 中使用 jet oledb 连接打开 csv 文件时出错

> ID：13681042
> 
> 赞同：1
> 
> 时间：2012-12-03T10:11:09.253
> 
> 标签：vba, oledb, oledbconnection

我第一次使用stackoverflow，所以这里......

当我尝试在 excel 中运行用于从 CSV 文件中提取数据的宏时，我间歇性地遇到错误。如果我开始一个新的会话，错误通常会消失，但这次它特别持久。它基本上在下面的 .Open 行上出错，给我一个“运行时错误'2147467259'（80004005）未指定错误”：

```
Public Sub LoadFile()

file_path = Range("FlatFileLocation")

Set oConn = CreateObject("ADODB.Connection")

strcon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & file_path & "; Extended Properties=""text;HDR=Yes;FMT=Delimited(,)"";"

oConn.Open strcon

..... 
```

其他信息：

1）我试图访问的文件没有被其他用户打开

2）我在子结束时关闭了我的连接。另外，我刚刚尝试重新启动我的机器，并且在我第一次尝试运行文件时发生了错误

3）当我在没有任何现有插件的情况下打开会话时，它似乎可以工作。有没有办法检查是否存在某种插件冲突？

还有其他帖子建议使用[CSVReader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。在尝试这条路线之前我的问题是：

1）我可以在多台用户机器上使用这个 CSVReader 吗？我在这里遇到的问题是需要在多台机器上安装它。不过，我也许可以将文件放在共享驱动器上。

2) 我可以用 SQL 字符串查询结果文件吗？目前我使用这样的东西：

```
....
strsql = "SELECT * FROM ( " & strsql & " ) WHERE ( ABS(PrevRisk) + ABS(CurrRisk) >= " & RiskThreshold & " ) ;"
Set oResult = New ADODB.Recordset
oResult.Open strsql, oConn
.... 
```

在此先感谢您的帮助！

# hibernate - Vaadin JpaContainer

> ID：13681043
> 
> 赞同：12
> 
> 时间：2012-12-03T10:11:11.237
> 
> 标签：hibernate, vaadin

我正在使用这个 JPAContainer + Hibernate，它需要很长时间才能加载。例如，SQLContainer 加载 60 毫秒的页面和 JPA 容器加载 1.30 秒的同一页面。

使用控制台中的 JPAContainer，我看到许多 SQL 查询 - 对于每个实体 - 查询；实体 Person 没有指向其他表的链接；

带有 jpacontainer 的代码：

```
JPAContainer<Person> container = JPAContainerFactory.make(Person.class,
            "persistence-unit");
table.setContainerDataSource(container); 
```

带有 SQLContainer 的代码：

```
JDBCConnectionPool pool = null;
    try {
        pool = new SimpleJDBCConnectionPool("org.postgresql.Driver",
                "jdbc:postgresql://127.0.0.1:5432/postgres", "postgres",
                "pwd");
    } catch (SQLException e) {
        e.printStackTrace();
    }
    TableQuery tq = new TableQuery("Person", pool);
    SQLContainer sqlContainer = null;
    try {
        sqlContainer = new SQLContainer(tq);
    } catch (SQLException e) {
        e.printStackTrace();
    }
table.setContainerDataSource(sqlContainer); 
```

我的 persistence.xml 文件：

```
<persistence-unit name="persistence-unit" transaction-type="RESOURCE_LOCAL">

  <jta-data-source>java:jboss/datasources/mfc-frontendDS</jta-data-source>

  <properties>
     <!-- Properties for Hibernate -->
    <property name="hibernate.archive.autodetection" value="class"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
    <property name="hibernate.show_sql" value="true"/>
    <property name="hibernate.format_sql" value="true"/>
    <property name="hibernate.use_sql_comments" value="true"/>
    <property name="hibernate.hbm2ddl.auto" value="update"/>
    <property name="hibernate.temp.use_jdbc_metadata_defaults" value="false"/>
    <property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform" /> 
  </properties> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:51:07.573

别再和 JPAContainer 争了，它背后的抽象层太多了。

![在此处输入图像描述](../Images/84b8402b693c280c0041395f026626e1.png)

SQLContainer 足够好，快速且稳定。我不是说 SQLContainer 是 JPAContainer 的替代品，但实际价格似乎太高了。从可用性的角度来看，响应性是一个非常重要的因素，所以最好不要从**秒**开始，花在持久层上。

无论如何，如果您真的想继续使用 JPAContainer，有几个选项可用：

**使用 CachingLocalEntityProvider**

经验法则：慢速访问——使用缓存

> 如果应减少数据库往返次数，则应改用 CachingLocalEntityProvider。它维护实体和查询结果的本地缓存，因此如果数据库往返速度很慢，它应该比 LocalEntityProvider 执行得更快。但是，它也需要比 LocalEntityProvider 更多的内存。

**使用分页（[PagedTable](https://vaadin.com/directory#addon/pagedtable)）**

它将大大减少查询次数，因为页面是延迟加载的。

> PagedTable 是一个与 Vaadin 核心 Table 行为相同的组件，除了它有多个页面而不是滚动以显示更多条目。

![在此处输入图像描述](../Images/3e2745eba2a151b3434627ae2e0cfdcd.png)

**使用 JPAContainer 过滤器**

> 所有过滤都是在数据库级别通过查询完成的，而不是在容器中。过滤实现透明地使用 JPA 2.0 Criteria API。由于过滤是在数据库级别完成的，因此使用 Filterable API 的自定义过滤器不起作用。

另请检查：[JPAContainer 使用和性能问题](https://vaadin.com/forum/-/message_boards/view_message/1675986)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T16:54:52.730

我的解决方案

在 JPAContainerX 中扩展 JPAContainer，覆盖**getItemIds**

```
@Override
public List<?> getItemIds(int startIndex, int numberOfItems) {
    return doGetEntityProvider().getAllEntityIdentifiers(this,getAppliedFiltersAsConjunction(), getSortByList() ).subList(startIndex, startIndex+numberOfItems);;
} 
```

然后

```
JPAContainerX<T> container = new JPAContainerX<T>(c);

    EntityManager entityManager = JPAContainerFactory.createEntityManagerForPersistenceUnit( IntrastudyUI.PERSISTENCE_UNIT );

    CachingMutableLocalEntityProvider<T> entityProvider = new CachingMutableLocalEntityProvider<T>( c ,  entityManager);

    container.setEntityProvider(entityProvider); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T13:49:01.383

JPAContainer 很方便，但也有问题。不仅是性能，还有架构问题。除非你依赖于它相当不错的自动表单生成，否则就别管它了。

我的建议：

1.  创建一个服务层（EJB、Spring 数据源，或者只是一个自定义帮助器类），在它后面隐藏 EntityManager 和 UI 代码中的其他 JPA 内容。
2.  对于中小型表，只需将内容加载到内存中即可。简单且效率惊人，尤其是[在 Viritin 附加组件中的](https://github.com/viritin/viritin)ListContainer 等内存容器中表现良好。
3.  对于内存使用可能成为问题的非常大的表，请使用 LazyList 帮助器通过服务层实现数据的延迟加载。查看我最近关于该主题的[博客文章。](https://vaadin.com/web/matti/blog/-/blogs/connecting-large-amounts-of-data-to-ui)

# ios - 多行自动调整大小的 UITextView

> ID：13681050
> 
> 赞同：1
> 
> 时间：2012-12-03T10:11:38.300
> 
> 标签：ios, uitextview

我想在 my 中插入几个字符串，`UITextView`以便它们垂直显示

试过这段代码：

```
NSMutableString* examinationsString = [NSMutableString string];

for (NSString * examination in examinationsArray)
{
    [examinationsString appendString:[NSString stringWithFormat:@"%@, %s ",examination, "\n"]];
}

return examinationsString; 
```

我已将`UITextView`Lines 属性更改为 5，但仍将全部放在一行中，用“/”分隔

我究竟做错了什么？

`UITextView`如果有超过 1 行，我也希望拉伸，当然如果它没有自动实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:17:09.087

请尝试以下代码：

```
NSMutableString* examinationsString = [NSMutableString string];

for (NSString * examination in examinationsArray)
{
    [examinationsString appendString:[NSString stringWithFormat:@"%@,\n",examination]];
}
return examinationsString; 
```

现在`UITextView`根据视图调整大小`contentSize`：

```
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:14:54.347

试试这个：

```
[examinationsString appendString:[NSString stringWithFormat:@"%@,\n",examination]]; 
```

# c# - asp.net 中的 CellClick 事件

> ID：13681051
> 
> 赞同：-4
> 
> 时间：2012-12-03T10:11:40.407
> 
> 标签：c#, asp.net

我是 Asp.net 的新手，但我想`CellClick`为 asp 的 GridView 实现事件，就像在 windows 应用程序中一样`dataGridView1_CellClick()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:26:44.233

您可以在`.aspx`页面中添加一些 jQuery。如果你想在服务器上处理一些东西，你可以从 jQuery 中调用`PageMethods.YourServerMethod`（例如`SetName`这个代码片段）。`SetName`方法定义如下。

```
<head runat="server">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptMgr" runat="server" EnablePageMethods="true"></asp:ScriptManager>
        <div id="content" runat="server">
            <asp:GridView ID="gridView" runat="server">
            </asp:GridView>
        </div>
    </form>
    <script type="text/javascript">
        $("#gridView td").click(function () {
            PageMethods.SetName("JavaScript!", onSuccessMethod, onFailMethod);
        });

        function onSuccessMethod(response) { alert(response); }
        function onFailMethod() { }
    </script>
</body> 
```

在文件后面的代码中：

```
using System.Web.Services;

...

[WebMethod]
public static String SetName(string name)
{
    return "This was called from " + name;
} 
```

# c# - 格式化gridview的BackColor

> ID：13681052
> 
> 赞同：0
> 
> 时间：2012-12-03T10:11:52.967
> 
> 标签：c#, asp.net, gridview

我是比较新的，我希望在事件触发时`gridviews`如何格式化`backcolor`单行的一些帮助。`gridview``RowDataBound`

是否有关于一般格式的好文章`gridviews`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:14:07.017

您需要使用[**SelectedRowStyle**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrowstyle.aspx)

```
<selectedrowstyle backcolor="LightCyan" forecolor="DarkBlue" font-bold="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:15:02.617

那么在这种情况下，你可以这样做

```
if (e.Row.RowType == DataControlRowType.DataRow)
 {
        //DataBinder.Eval(e.Row.DataItem,"Column to check"))
        // based on that you can set the value
        e.Row.BackColor = Drawing.Color.Yellow
 } 
```

[有关 MSDN 格式的 GridView 的更多信息](http://msdn.microsoft.com/en-us/library/aa479342.aspx)

# sql - SQL SELECT 表达式 - 在 3 个表之间进行选择

> ID：13681055
> 
> 赞同：0
> 
> 时间：2012-12-03T10:11:56.010
> 
> 标签：sql, select

我有桌子

T1：

```
T1ID

1000
1001
1002
1003 
```

T2：

```
T2ID     T1ID

W1       1000
W2       1000
W3       1001
W4       1002
W5       1003 
```

T3：

```
T3ID   STATUS   T2ID

T1     CLOSE    W1
T2     CLOSE    W1
T3     INPRG    W3
T4     INPRG    W3
T5     CLOSE    W5
T6     INPRG    W5 
```

我想表达从 T1 得到的结果只有 1000 和 1002。作为 T1 选择的结果，我想获取 T2 中有 T2 记录且所有 T3 记录都处于 CLOSE 状态的记录，或者 T2 记录根本没有 T3 记录。

所以 1000 的 W1 有 CLOSE 中的所有 T3 记录，而 W2 没有 T3 记录。还有 1002 有 W4 记录而没有 T3 记录。所以必须选择它们。

1001 不能被选择，因为它有 W3 记录，所有 T3 记录都没有关闭。也不能选择 1003，因为它有 W5，所有 T3 记录都没有关闭。

这对我来说有点棘手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:23:11.450

因此，您需要来自 T1 的所有记录，其中只有关闭的 T3 记录或没有 T3 记录，其中 T3 通过 T2 链接到 T1。相反，您想要所有 T1 记录，除了那些您有未关闭的 T3 记录的记录。

以两种方式表达它提供了编写相同查询的不同方法。例如你可以做

```
SELECT t1.id
FROM t1
where not exists(
  select * 
  from t2
    inner join t3
      on t2.id = t3.t2id
  where t3.status <> 'CLOSE'
  ) 
```

或者你可以做

```
select t1.id
from t1
EXCEPT
select t1.id
from t1
  inner join t2
    on t1.id = t2.t1id
  inner join t3
    on t2.id = t3.t2id
where t3.status <> 'CLOSE' 
```

您可以要求 SQL Server Management Studio 告诉您哪个更有效 - 它们很可能最终会使用相同的查询计划执行。

（未经测试，但我认为上面的语法没问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:45:02.023

```
Select distinct t1.id
From   t1
       Inner join
       T2 on t1.id=t2.t1id
       Left join
       (Select t3.t3id 
        from T3 
        where t3.status <> 'CLOSE') t3a on t3a.t3id=t2.t3id and t3.t3id is null 
```

写在平板电脑上，所以请原谅/更正大写。

# java - 在 GWT 应用程序中显示错误详细信息？

> ID：13681057
> 
> 赞同：1
> 
> 时间：2012-12-03T10:12:06.883
> 
> 标签：java, gwt, extjs, smartgwt, gxt

> **可能重复：**
> [为什么 Tomcat 无法显示实际的堆栈跟踪？](https://stackoverflow.com/questions/11688587/why-is-tomcat-unable-to-show-the-actual-stack-trace)

我正在使用 GWT。我有以下代码来显示客户端异常详细信息。

```
public void onModuleLoad() {  
    GWT.setUncaughtExceptionHandler(new   
      GWT.UncaughtExceptionHandler() {  
      public void onUncaughtException(Throwable e) {  
        // my logic which will display error details  
    } 
```

在托管模式下，每件事都可以正常工作。我在托管模式下获得清晰的异常堆栈跟踪详细信息，如下所示：

```
Error: java.lang.NullPointerException
com.sample.UserDetailsGrid$1.handleEvent(UserDetailsGrid.java:52)
com.sample.UserDetailsGrid$1.handleEvent(UserDetailsGrid.java:1)
com.extjs.gxt.ui.client.event.BaseObservable.callListener(BaseObservable.java:178)
com.extjs.gxt.ui.client.event.BaseObservable.fireEvent(BaseObservable.java:86)
com.extjs.gxt.ui.client.widget.Component.fireEvent(Component.java:456)
com.extjs.gxt.ui.client.widget.grid.Grid.onClick(Grid.java:813)
com.extjs.gxt.ui.client.widget.grid.Grid.onComponentEvent(Grid.java:496)
com.extjs.gxt.ui.client.widget.Component.onBrowserEvent(Component.java:884)
com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1308)
com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1264)
sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

但问题是，一旦将 java 文件编译成 javascript 并部署到 tomcat，我会得到与下面相同的异常详细信息，我们无法从堆栈跟踪中理解任何内容。：

```
Error: (TypeError): null has no properties stack: FLg([object Object],[object Object])@http://localhost:9999/mywebapp/21D01FA6800CA5B30FF5BE80916CCD06.cache.html:
Unknown.FLg(Unknown source:0)
Unknown.ILg(Unknown source:0)
Unknown._Xb(Unknown source:0)
Unknown.Rkc(Unknown source:0)
Unknown.bqd(Unknown source:0)
Unknown.wqd(Unknown source:0)
Unknown.ilc(Unknown source:0)
Unknown.tmc(Unknown source:0)
Unknown.I5f(Unknown source:0)
Unknown.anonymous(Unknown source:0)
Unknown.VNd(Unknown source:0) 
```

你能解释一下这种行为的原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:30:59.540

在开发模式下，您的代码在 Java 中运行。在 prod 模式下，编译后的 JavaScript 会被混淆。

请参阅[https://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions](https://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions)了解如何对堆栈跟踪进行反混淆（在服务器端）

# ios - iOS UIPinchGestureRecognizer 在 UIGestureRecognizerStateEnded 状态下与未知源发生偏移

> ID：13681061
> 
> 赞同：0
> 
> 时间：2012-12-03T10:12:24.130
> 
> 标签：ios, ipad, uiview, zooming, uipinchgesturerecognizer

我有一个带有自定义 drawRect() 方法的 UIView，用于一些绘图。

我使用 UIPinchGestureRecognizer 来实现缩放效果。

这是动作方法：

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
    //NSLog(@"Pinch gesture recognized");

    CGPoint touchOrigin = [recognizer locationInView:self];
    _currentScaleOrigin = touchOrigin;

    if (recognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"%16@ x = %f, y = %f", @"Pinch end:", touchOrigin.x, touchOrigin.y);
        return;
    }

    if (recognizer.state == UIGestureRecognizerStateChanged)
    {
        //NSLog(@"scale = %f", recognizer.scale);
        NSLog(@"%16@ x = %f, y = %f", @"Pinch origin:", touchOrigin.x, touchOrigin.y);

        // scale has at start a value of 1.0 and increases as fingers moves away from each other
        _currentScaleLevel += recognizer.scale - 1;
        [self setNeedsDisplay]; // call drawRect for redrawing at current scale level
    }

    recognizer.scale = 1;

} 
```

收到`UIGestureRecognizerStateEnded`消息时，我得到一些奇怪的坐标偏移：

```
Pinch origin: x = 358.000000, y = 630.000000

Pinch origin: x = 355.000000, y = 627.000000

Pinch origin: x = 353.000000, y = 625.000000

Pinch origin: x = 351.000000, y = 624.000000

Pinch origin: x = 351.000000, y = 623.000000

Pinch origin: x = 350.000000, y = 622.000000

Pinch origin: x = 349.000000, y = 622.000000

Pinch origin: x = 349.000000, y = 622.000000

Pinch end: x = 315.000000, y = 750.000000 
```

...和免费翻译:) 我不需要。我不知道翻译从何而来。

如何禁用此翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:10:58.987

解决了。

接收时`UIGestureRecognizerStateEnded`，我将两根手指的最后一个点分配给我`_currentScaleOrigin`，用于执行缩放转换。

我不知道 UIPinchGestureRecognizer 返回屏幕上最后一个手指位置的 CGPoint。

这是整个方法代码：

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
#if 1 
    static CGPoint point_0;
    static CGPoint point_1;
    if ([recognizer numberOfTouches] > 1)
    {
        point_0 = [recognizer locationOfTouch:0 inView:self];
        point_1 = [recognizer locationOfTouch:1 inView:self];
        NSLog(@"pinch loc 0: (%f, %f)", point_0.x , point_0.y);
        NSLog(@"pinch loc 1: (%f, %f)", point_1.x , point_1.y);
    } else if ([recognizer numberOfTouches] == 1) {
        point_0 = [recognizer locationOfTouch:0 inView:self];
        NSLog(@"pinch loc 0: (%f, %f)", point_0.x , point_0.y);
    }
#endif

    switch (recognizer.state)
    {
        case UIGestureRecognizerStateBegan:
        {
            CGPoint pointBegin = [recognizer locationInView:self];
            NSLog(@"%16@ x = %f, y = %f", @"Pinch start:", pointBegin.x, pointBegin.y);
        } break;
        case UIGestureRecognizerStateChanged:
        {
            _currentScaleOrigin = [recognizer locationInView:self];

            //NSLog(@"scale = %f", recognizer.scale);
            NSLog(@"%16@ x = %f, y = %f", @"Pinch origin:", _currentScaleOrigin.x, _currentScaleOrigin.y);

            // scale has at start a value of 1.0 and increases as fingers moves away from each other
            _currentScaleLevel += recognizer.scale - 1;
            // call drawRect for redrawing at current scale level
            [self setNeedsDisplay]; 
        } break;
        case UIGestureRecognizerStateEnded:
        {
            CGPoint pointEnded = [recognizer locationInView:self];
            NSLog(@"%16@ x = %f, y = %f", @"Pinch end:", pointEnded.x, pointEnded.y);
            //return;
        } break;
        default : 
        {
            NSLog(@"other state");
        }
    }

    recognizer.scale = 1;
} 
```

# c# - 将 ASP.Net 网格数据导出到 excel wo 第三方 dll

> ID：13681062
> 
> 赞同：0
> 
> 时间：2012-12-03T10:12:28.753
> 
> 标签：c#, asp.net

我想在不使用任何第三方 dll 的情况下将网格数据从 ASP.Net 网页导出到 Excel。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:19:57.253

嗨，请使用以下代码导出到 excel：

```
 FileInfo FI = new FileInfo(Path);
StringWriter stringWriter = new StringWriter();
HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWriter);
DataGrid DataGrd = new DataGrid();
DataGrd.DataSource = dt1; //This is the same dataTable by which you are binding your grid
DataGrd.DataBind();

DataGrd.RenderControl(htmlWrite);
string directory = Path.Substring(0, Path.LastIndexOf("\\"));// GetDirectory(Path);
if (!Directory.Exists(directory))
{
    Directory.CreateDirectory(directory);
}

System.IO.StreamWriter vw = new System.IO.StreamWriter(Path, true);
stringWriter.ToString().Normalize();
vw.Write(stringWriter.ToString());
vw.Flush();
vw.Close();
WriteAttachment(FI.Name, "application/vnd.ms-excel", stringWriter.ToString()); 
```

上面的代码使用了一个 WriteAttachment 函数，它将附件推送给 Response 对象中的用户。以下代码显示了 WriteAttachment 的实现：

```
public static void WriteAttachment(string FileName, string FileType, string content)
{
    HttpResponse Response = System.Web.HttpContext.Current.Response;
    Response.ClearHeaders();
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + FileName);
    Response.ContentType = FileType;
    Response.Write(content);
    Response.End();
} 
```

更多详情请[点击这里](http://www.codeproject.com/Tips/477436/Export-Gridview-Data-to-Excel-in-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:31:48.270

我建议您如果您在 GridView 的模板字段中使用任何控件，例如 Bullted List、RadioButtonList、CheckBoxList，并且您想在 Excel 中导出，那么只需使用以下代码...

```
公共无效ExportToExcel（GridView gv，字符串文件名）
    {
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", filename + ".xls"));
        HttpContext.Current.Response.ContentType = "应用程序/ms-excel";

        使用 (StringWriter sw = new StringWriter())
        {
            使用 (HtmlTextWriter htw = new HtmlTextWriter(sw))
            {
                // 创建一个包含网格的表
                表表 = 新表（）；

                // 包括网格线设置
                table.GridLines = gv.GridLines;

                // 将标题行添加到表中
                如果（gv.HeaderRow ！= null）
                {
                    // PrepareControlForExport(gv.HeaderRow);

                    table.Rows.Add(gv.HeaderRow);
                }
                //使页眉彩色

                对于 (int j = 0; j
```

否则，我想建议您绑定 Grid 的 DataTable 使用它在 Excel 中导出数据。并使用以下代码来做到这一点。

```
公共无效ExportToExcel（数据表dt，字符串文件名）
    {
        尝试
        {
            //******************************Excel生成开始************************ ********

            字符串附件=“附件；文件名=”+文件名+“.xls”；
            Response.ClearContent();
            Response.AddHeader("内容配置", 附件);
            Response.ContentType = "应用程序/ms-excel";
            字符串选项卡 = "";

            foreach（dt.Columns 中的 DataColumn dc）
            {
                Response.Write(tab + dc.ColumnName);
                选项卡 = "\t";
            }
            Response.Write("\n");

            智力；
            foreach（dt.Rows 中的 DataRow dr）
            {
                选项卡 = "";
                对于 (ik = 0; ik
```

# jquery - DHTMLX 调度程序创建或编辑

> ID：13681063
> 
> 赞同：2
> 
> 时间：2012-12-03T10:12:37.430
> 
> 标签：jquery, dhtmlx, dhtmlx-scheduler

我在我的 MVC3 项目中使用 DHTMLX 调度程序。一切都很好，但在那个事件调度程序页面中，我使用了一种表单来输入一些外部数据。以便事件调度程序进入页面底部。如果我在窗口内单击以创建或编辑新的或现有的事件，屏幕拦截器只会出现在页面顶部。不与弹出窗口后面的当前屏幕。

有没有更好的解决方案来做到这一点？请帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:06:46.310

我实际上无法重现这一点，但是您是否尝试将调度程序放入具有固定高度的 div 中？例如

```
<div>form or something...</div>
<div style="height: 900px">
    <div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:100%;'>
        ...
    </div>
</div> 
```

如果没有帮助，您可以发布一个可以测试问题的小演示吗？

# iphone - 使用回调 = 并发执行选择器？

> ID：13681066
> 
> 赞同：1
> 
> 时间：2012-12-03T10:12:47.227
> 
> 标签：iphone, ios, cocoa, methods, concurrency

我对我面临的情况有一个小问题。我有两种方法：

```
- (void)firstSelector {
    [self launchAsyncTask];
    ... do some work for a long time (10secs) ...
}

- (void)asyncTaskFinished {
    ... some work after 5secs of async task ...
} 
```

`firstSelector`执行`launchAsyncTask`这只是一个后台任务，它有一个名为`asyncTaskFinished`. 假设`firstSelector`在启动异步任务后运行了一段时间（比如说10秒），并且异步任务运行了5秒，会不会有并发问题？

这在引擎盖下是如何工作的？之后会`asyncTaskFinished`执行`firstSelector`，还是`firstSelector`会暂停运行`asyncTaskFinished`？

是否有与运行循环的链接？方法是否添加到队列中，然后在我调用它们时执行？

我迷路了 ：）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:53:44.890

异步任务异步运行，它不在主运行循环上运行，而 UI 在主循环上运行。查看[并发编程指南](http://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyProgrammingGuide.pdf)。

因此，在您的情况下，您不确定同步时间需要多长时间。您假设它可能需要 10 秒，但并不完全确定。因此，在这种情况下，当异步任务在主线程上完成时，您将需要使用块或找到一种方法来触发 asyncTaskFinished 函数。您可以定义一个简单的块回调，然后在异步任务完成时触发该函数。

如果你使用 GCD 来执行异步任务，它变得非常容易。你会做这么多；

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self runMyAsyncTask];
        // trigger the main completion handler when this completed
        dispatch_async(dispatch_get_main_queue(), ^{
            [self asyncTaskFinished];
        });
    }); 
```

如果您使用 NSThread 进行并发，您可以使用 performSelector:onThread: 在异步任务完成时触发完成选择器。对于一个简单的案例，我将向您展示如何实现一个回调处理程序。您可以创建这样的函数来触发异步任务，

```
-(void)launchAsyncTaskWithCompletionHandler:(void(^)(void))completionHandler{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self runMyAsyncTask];
        // trigger the main completion handler when this completed
        dispatch_async(dispatch_get_main_queue(), ^{
            completionHandler();
        });
    });
} 
```

并且调用它相对简单；

```
[self launchAsyncTaskWithCompletionHandler:^{
        [self asyncTaskFinished];
    }]; 
```

这很容易理解，并使您的代码更加清晰。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T23:07:58.737

线程的运行循环以顺序（非并发）方式从其输入源执行任务。因此，只要`firstSelector`和`asyncTaskFinished`在同一个运行循环中执行，您就不必担心。这将取决于回调语义。您可能需要使用类似`performSelector:onThread:withObject:waitUntilDone:`的方法来确保异步回调函数在正确的线程中执行。

# android - 是否可以从代码拨打电话，然后将按键事件发送到拨号程序？

> ID：13681069
> 
> 赞同：0
> 
> 时间：2012-12-03T10:13:03.200
> 
> 标签：android, keypress, phone-call

好的，我希望能够使用 Android 应用程序以自动化方式测试内部电话系统，要求要求一个可以以编程方式发起呼叫的应用程序。如果这是可能的，那么当呼叫开始时，他们希望能够发送按键，就像想象电话菜单说“按 5 进入 X 菜单”.. 我们可以从代码发送那个按键吗？这样，整个系统就可以通过一系列等待进行测试，并将按键发送到拨号程序。

我不确定如何确定这是否真的可行。我看到了 PROCESS_OUTGOING_CALLS，但我找不到任何资源或示例，有人有任何信息吗？我实际上与一位自由职业者取得了联系，他最终说这绝对不可能（他非常好，他只是说'在通话期间按拨号盘是不可能的'），但我的客户告诉我已经存在应用程序来做到这一点，所以任何提示会很有帮助！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:20:55.150

您绝对可以从代码中拨打电话。看：

[如何以编程方式拨打电话？](https://stackoverflow.com/questions/4816683/how-to-make-a-phone-call-programatically)

您也可以从代码中调用按键：

[在android中调用按键事件？](https://stackoverflow.com/questions/3361281/invoke-keypress-event-in-android?rq=1)

至于在通话中这样做，我还没有尝试过，但是您可以使用链接中的方法进行尝试。祝你好运！

# android - Android（AndEngine）：如何在onSceneTouchEvent方法之外获取触摸输入事件？

> ID：13681070
> 
> 赞同：0
> 
> 时间：2012-12-03T10:13:03.527
> 
> 标签：android, input, touch, andengine

所以，这是我的问题：在我的游戏中，我在游戏开始时进行了倒计时，在此期间用户无法按下屏幕，所以我等到倒计时结束才启用 OnSceneTouchListener。一旦启用，用户将能够做一些移动手指的事情（不重要）。

问题是，如果用户在倒计时时开始移动手指，一旦结束，onSceneTouchEvent 方法就会开始获取输入，但它会跳过 ACTION_DOWN 事件，因为用户已经在移动手指。

为了防止这种情况，我当然可以在 onSceneTouchEvent 方法中使用布尔值，但这样它总是会检查每个输入。它不会对性能产生太大影响，但如果可能的话，我宁愿找到另一种方法。

所以我在想，有没有办法在AndEngine中获取触摸输入事件（按下坐标的信息，这才是我真正需要的），这样我就可以通过简单地做我应该做的事情来“强制”ACTION_DOWN事件在倒计时的方法中使用它？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:46:29.530

这是一个示例，如何获取触摸坐标。

```
public boolean onTouchEvent(MotionEvent event) {
    int myEventAction = event.getAction(); 

    float X = event.getX();
float Y = event.getY();

    switch (myEventAction) {
       case MotionEvent.ACTION_DOWN:
        break;
       case MotionEvent.ACTION_MOVE: {
            mySprite.setPosition(X, Y);
            break;}
       case MotionEvent.ACTION_UP:
            break;
    }
    return true;
} 
```

[这个例子的来源](http://andengineguides.wordpress.com/2011/09/14/getting-started-touch-events/)

# visual-studio-2010 - 在 Visual Studio 中隐藏挂起的更改

> ID：13681071
> 
> 赞同：3
> 
> 时间：2012-12-03T10:13:04.700
> 
> 标签：visual-studio-2010, visual-studio, tfs

我团队的解决方案中有一些文件几乎不需要签入。我们每个人都有这些文件的略有不同的版本（例如：指向我们个人开发数据库的配置文件或稍微修改的 app.config）。因此，这些文件永久存在于未决更改视图中。

是否可以隐藏这些挂起的更改，以便我们永远不会错误地签入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:17:45.403

在这里[，我如何始终阻止签入 TFS 中的特定文件](https://stackoverflow.com/q/9741975/147211)是一些名为的选项。要看不到您的更改，您应该遵循工作区方法。

# javascript - 在jquery mobile中动态添加切换按钮

> ID：13681078
> 
> 赞同：0
> 
> 时间：2012-12-03T10:13:42.490
> 
> 标签：javascript, jquery, jquery-mobile

我想动态添加一个切换按钮。切换按钮看起来像[Flip toggle switch Example](http://jquerymobile.com/test/docs/forms/switch/)中的样子。我试过这样，但我得到了一个不同的输出，比如`data-role="slider"`不工作。编码

```
$('button').click( function() {
   var element  =  $ ('#test');
    var toggle_button = '<select data-role="slider"><option value="off">Off</option><option value="on">On</option></select>';
    element.append(toggle_button);
}); 
```

我的 JsFiddle 是：http: [//jsfiddle.net/4Fk9L/1/](http://jsfiddle.net/4Fk9L/1/)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:21:04.937

添加元素后调用switch函数..

```
 $('button').click( function() {
    var element  =  $ ('#test');
    var toggle_button = '<select data-role="slider"><option value="off">Off</option>   <option value="on">On</option></select>';
    element.append(toggle_button);
    $('select').slider();  //call plugin function here
}); 
```

这是小提琴

[http://jsfiddle.net/4Fk9L/2/](http://jsfiddle.net/4Fk9L/2/)

# three.js - 如何用three.js绘制地图道路

> ID：13681079
> 
> 赞同：0
> 
> 时间：2012-12-03T10:13:46.057
> 
> 标签：three.js

在 2d 画布中，我们可以绘制一条线并将其宽度设置为地图上的道路，如何在 3d 场景中使用三个 js 实现这一点。我发现 Path 似乎最接近我的想法，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:51:16.067

如果您使用的是 html5 画布渲染器，您可以为材质指定宽度——参数为 '(material).linewidth'（同样为 '.linecap' 和 '.linejoin'）——因此你可以为 thinenr 使用不同的材质或更宽的路标

# opencl - 为什么 GPU 有这么多核心/计算单元

> ID：13681081
> 
> 赞同：0
> 
> 时间：2012-12-03T10:13:52.423
> 
> 标签：opencl, gpu

我知道通常 CPU 有许多计算单元或 CUDA 内核。这使其适用于计算密集型算法。

但为什么它的内核比 CPU 多得多？渲染图像时，哪些算法可以并行化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:09:41.560

**在应用着色器**时，需要大量计算单元来快速处理帧。

这种类型的计算是高度可并行化的，因为每个着色器将被应用 n 次（可能按像素一次）并且通常以独立的方式在同一帧上应用。

请注意，每个**计算单元**由许多**着色器核心**组成。

这就是为什么着色器支持是 OpenCL 的先决条件，因为它意味着一些专用内核来完成渲染工作，这些内核可以被“劫持”来做其他事情 => 这被称为**GPGPU**。

# xcode - 使用 like 运算符的 sqlite 查询在 xcode 中不起作用

> ID：13681083
> 
> 赞同：0
> 
> 时间：2012-12-03T10:14:02.343
> 
> 标签：xcode, sqlite, ios6

我编写了sqlite语句的代码如下：

```
if(sqlite3_open([[self filepath] UTF8String], &db) == SQLITE_OK)
{
    retrievestatement = nil;

    if(retrievestatement == nil) {

        const char *sql = "Select * from OrdersHeaderTable where orderPlaceDate like '%?'";

        if(sqlite3_prepare_v2(db, sql, -1, &retrievestatement, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating detail view statement. '%s'", sqlite3_errmsg(db));

    }
    sqlite3_bind_text(retrievestatement, 1, [year UTF8String], -1, SQLITE_TRANSIENT);

    while(sqlite3_step(retrievestatement) == SQLITE_ROW)
    {

        NSLog(@"value is %@",[NSString stringWithUTF8String:(const char*)sqlite3_column_text(retrievestatement, 0)]);

    }

    sqlite3_finalize(retrievestatement);
} 
```

但它没有得到数据。请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:28:25.583

请检查这一行。我认为这是问题所在。

```
 const char *sql = "Select * from OrdersHeaderTable where orderPlaceDate like '%?'"; 
```

将上面的行更改为

```
 const char *sql = "Select * from OrdersHeaderTable where orderPlaceDate like '%hyd'"; 
```

即改变？标记到您的搜索字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:09:51.453

它应该以这种方式工作：

```
const char *sql = "Select * from OrdersHeaderTable where orderPlaceDate like ?001";
......
sqlite3_bind_text(retrieveStatement, 1, [[NSString stringWithFormat:@"%@%%", year] UTF8String], -1, SQLITE_TRANSIENT); 
```

我在这里只报告代码的相关部分，添加准备语句等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:17:50.897

参数标记`?`在字符串中不起作用。

您必须将字符串`'%'`和参数的*值*`year`结合起来；这可以在您的代码中完成（参见 Michele 的回答），也可以在 SQL 中完成，如下所示：

```
sql = "Select * from OrdersHeaderTable where orderPlaceDate like '%' || ?"; 
```

# wcf - 使用 Silverlight 5、IIS 7.5 对 WCF 服务进行 Windows 身份验证

> ID：13681086
> 
> 赞同：3
> 
> 时间：2012-12-03T10:14:12.073
> 
> 标签：wcf, silverlight, authentication, iis

我在 ASP.net 项目中有一个带有（常规）WCF 服务的 Silverlight 5 Prism 应用程序。我正在使用 IIS 7.5 在本地主机上托管它。我按照所有步骤

[如何：使用 Windows 身份验证来保护 Silverlight 应用程序的服务](http://msdn.microsoft.com/en-us/library/dd744835%28v=vs.95%29.aspx)

[如何：在 ASP.NET 中为 Silverlight 应用程序托管安全服务](http://msdn.microsoft.com/en-us/library/dd560702%28v=vs.95%29.aspx)

但我无法让 Windows 身份验证工作。每当我在 IIS 中关闭匿名身份验证时，我的应用程序都会引发`The remote server returned an error: NotFound.`异常，因为它找不到 WCF 服务。

当我尝试在 Visual Studio 中更新服务引用时出现错误`Security settings for this service require 'Anonymous' Authentication but it is not enabled for the IIS application that hosts this service.`

当我打开匿名身份验证时，服务可以工作，但我没有获得 Windows 用户凭据。我的浏览器（IE 8）设置为使用集成 Windows 身份验证并自动登录本地 Intranet。

我究竟做错了什么？

这是我的 IIS 7.5 配置。应用程序池以集成模式运行：

![IIS 配置](../Images/8bf14518df01eba6d8bf6f69d901b029.png)

网络配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.web>
    <compilation debug="true" />
    <authentication mode="Windows" />
  </system.web>
  <system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="false" />
       </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />  
  </system.serviceModel>
</configuration> 
```

ServiceReferences.ClientConfig：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_ISecurityService" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="TransportCredentialOnly" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:85/SecurityService/SecurityService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ISecurityService"
                contract="SecurityServiceReference.ISecurityService" name="BasicHttpBinding_ISecurityService" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T09:41:30.607

我只是猜测 WCF 部分可能没有正确设置 Windows 身份验证。wcf 服务也需要配置为使用 Windows 凭据对来自 IIS 的请求进行身份验证。因此，在这种情况下，我希望服务中需要有一种行为要求这样做。检查您是否已正确配置这些。服务凭据和客户端凭据。

[服务凭证](http://msdn.microsoft.com/en-us/library/ms731370%28v=vs.110%29.aspx)

[WCF 中的安全行为](http://msdn.microsoft.com/en-us/library/ms731199%28v=vs.110%29.aspx)

# javascript - Chrome Extension + Devise + Rails App - 从扩展发出经过身份验证的请求？

> ID：13681098
> 
> 赞同：9
> 
> 时间：2012-12-03T10:14:51.430
> 
> 标签：javascript, ruby-on-rails, google-chrome, google-chrome-extension, devise

我正在构建一个 chrome 扩展程序，它有助于直接从浏览器创建联系人，而无需访问我的设计驱动的 rails 应用程序本身。Contacts#Create 需要身份验证，所以我想知道如何从扩展发送经过身份验证的请求。

我已经启用了设计[TokenAuthenticatable](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/TokenAuthenticatable)，所以我的用户有一个 authtoken。我在我的扩展 js 中编写了一个方法，该方法发布到我的 rails 应用程序的 contacts#create 操作。为了测试，我只是硬编码了我自己的身份验证令牌，这似乎有效。但是扩展程序如何访问用户的身份验证令牌？将此令牌存储到 cookie 中似乎不正确/不安全。

我想我应该使用 chrome.cookies 以某种方式访问​​和处理我的应用程序的会话信息。但我在这里只得到一个 sessionID。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:11:49.367

虽然不是来自 chrome 扩展，但我正在构建类似的东西，可以在终端上工作。我最终绕过了设计并通过自己的令牌身份验证创建，这将允许用户仅访问我需要的一个控制器#action。这样，如果令牌被盗，您可以最大限度地减少损失。

所以无论如何，我将允许用户在 rails 应用程序界面中生成（和重新生成）令牌，并使其扩展在第一次启动时要求令牌。我会将令牌本身存储在 localStorage 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T15:05:09.743

您还可以检查`authentifiation_token`存储在您的应用程序中的 cookie。

`chrome.cookies.getAll()`您可以使用此处详述的方法来实现这一点 - [https://developer.chrome.com/extensions/cookies#method-getAll](https://developer.chrome.com/extensions/cookies#method-getAll)

# asp.net - 如何保存和上传图片

> ID：13681102
> 
> 赞同：-1
> 
> 时间：2012-12-03T10:15:08.977
> 
> 标签：asp.net, vb.net, save, image-uploading

如何使用 vb 语言和 SQL server 2008 在 ASP.net 中上传和保存图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:26:39.650

您可以使用本[教程](http://www.codeproject.com/Articles/437937/Save-and-Retrieve-Image-from-a-SQL-Server-Database)。

将图像保存在数据库中的链接的一部分：

```
Private Sub Button2_Click(ByVal sender As System.Object, _
            ByVal e As System.EventArgs) Handles Button2.Click
    If TextBox1.Text = "" Then
        MsgBox("Fill the Name Field")
    Else
        Dim sql As String = "INSERT INTO Information VALUES(@name,@photo)"
        Dim cmd As New SqlCommand(sql, con)
        cmd.Parameters.AddWithValue("@name", TextBox1.Text)
        Dim ms As New MemoryStream()
        PictureBox1.BackgroundImage.Save(ms, PictureBox1.BackgroundImage.RawFormat)
        Dim data As Byte() = ms.GetBuffer()
        Dim p As New SqlParameter("@photo", SqlDbType.Image)
        p.Value = data
        cmd.Parameters.Add(p)
        cmd.ExecuteNonQuery()
        MessageBox.Show("Name & Image has been saved", "Save", MessageBoxButtons.OK)
        Label1.Visible = False
        TextBox1.Visible = False
    End If
End Sub 
```

这是图像检索的方式：

```
Private Sub DataGridView1_CellMouseClick(ByVal sender As Object, ByVal e As _
            System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseClick
    cmd = New SqlCommand("select photo from Information where name='" & _
              DataGridView1.CurrentRow.Cells(0).Value() & "'", con)
    Dim imageData As Byte() = DirectCast(cmd.ExecuteScalar(), Byte())
    If Not imageData Is Nothing Then
        Using ms As New MemoryStream(imageData, 0, imageData.Length)
            ms.Write(imageData, 0, imageData.Length)
            PictureBox1.BackgroundImage = Image.FromStream(ms, True)
        End Using
    End If
    GroupBox2.SendToBack()
    GroupBox2.Visible = False
    Label1.Visible = True
    Label1.Text = DataGridView1.CurrentRow.Cells(0).Value()
End Sub 
```

比较`your findings`并`this sample`探索你所缺少的。

# lucene - lucene中的自定义跨度计算

> ID：13681103
> 
> 赞同：0
> 
> 时间：2012-12-03T10:15:12.780
> 
> 标签：lucene

我在 lucene 中编写了一个插件，它注释某些术语并以这种方式存储它们的跨度`<term>,<span>;<term>,<span>;..`

现在我需要只使用这些跨度而不是默认的 lucene 存储跨度来处理跨度附近的查询。这是因为并非所有相似的术语都被注释。所以基本上，如果我在 k 个标记中查询术语，那么我应该能够通过减去它们相应的跨度来获得它们的跨度距离。我将如何在 lucene 中做到这一点？我是新手，所以请尽可能描述。

谢谢，阿南特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:12:39.590

我在 Lucene 中遵循的一个很好的一般规则是将经过特殊处理的数据放入其自己的字段中，这样就几乎没有混淆的机会。通过这种方式，您可以按照您想要的方式执行接近度查询。（这将使您的索引更大。）

# javascript - Virtuemart 购物车定制

> ID：13681105
> 
> 赞同：0
> 
> 时间：2012-12-03T10:15:17.417
> 
> 标签：javascript, jquery, joomla, virtuemart

我正在尝试自定义 2 购物车。这是一个保险网站，我希望能够在购物车中添加一个复选框，允许用户将某些额外的产品添加到他们的订单中。有没有人见过这样做？或者知道怎么做？

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:12:06.520

```
jQuery(window).load(function(){
    jQuery('input#liabiliy_field').live('change',function () {
         if(jQuery(this).is(':checked')){ //I like it using this way

         var tmp=window.open('/index.php?option=com_virtuemart&view=cart&task=add&virtuemart_product_id[]=3&virtuemart_category_id[]=1&quantity[]=1', 'window name', 'window settings');
         tmp.close();
         return false;

          } 
     });
}); 
```

# c# - 是否可以使用比较器从列表中删除项目？

> ID：13681106
> 
> 赞同：-1
> 
> 时间：2012-12-03T10:15:16.517
> 
> 标签：c#

我有一个这样的 POCO：

```
class Poco{
    int first;
    int last;
    int category;
} 
```

和一份清单

```
List<Poco> pocoList; 
```

我需要从列表中删除与指定类别的项目重叠的项目，重叠定义为：

```
if (a.category!=category && (a.first >= b.first && a.first <= b.last) || (a.last >= b.first && a.last <= b.last)){
  // delete item a 
} 
```

两个重叠的项目永远不会有相同的类别。最后总是大于第一个。第一个和最后一个定义一个范围。可能存在不止一个重叠。

对列表进行排序，使得 List[n].start < List[n+1].start 始终为真。

例如，给定类别 10，我需要删除所有不属于类别 10 的项目，并且该项目范围的任何部分与类别 10 的项目范围重叠。

我当前的实现是粗略的，在分析我的应用程序时，我可以看到使用它的处理分支的整个时间的 65% 以上都花在了这个循环中，这不足为奇。

```
for (int i=object.pojoList.Count-1;i>=0;i--){
    for (int j=object.pocoList.Count-1;j>=0;j--){
        if (pocoList[i].overlaps(pocoList[j],category){
            pocoList.RemoveAt(j);
        }            
    }
} 
```

我觉得必须有一种方法可以使用比较器或 LINQ 删除项目，但我无法弄清楚。

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:20:56.380

由于您的输入列表是`start`有序的，您可以尝试类似

```
List<Poco> potentialOverlaps = new List<Poco>();
for (int i = 0; i < pocoList.Count; i++)
{
    var currentPoco = pocoList[i];

    // Clear out overlaps that end before this poco starts.
    potentialOverlaps.RemoveAll(p => p.last < currentPoco.first);

    if (currentPoco.category == category)
    {
        potentialOverlaps.Add(currentPoco);
    }
    else if (potentialOverlapsCount > 0)
    {
        pocoList.RemoveAt(i);
        i--;
    }
} 
```

结果可能与您的代码给出的不同，但它应该与您描述的行为相匹配。

它跟踪`Poco`您选择的类别中“尚未结束”的；如果它遇到一个类别外`Poco`并且有任何“尚未结束”，它必须与其中一个重叠，以便可以删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:49:32.240

你可以让你的类实现 IComparer。

您必须以返回 1、0 或 -1 的方式实现方法 Compare(Object, Object)，分别表示更大、相等或更少。

一个好例子的来源：[链接](http://support.microsoft.com/kb/320727)

您可以在一个列表中设置另一个列表的分隔符。然后，在使用上述方法进行排序时，如果该值与分隔符的范围重叠，则将其删除。

# objective-c - 为什么我会收到此错误？无法识别的选择器发送到实例

> ID：13681113
> 
> 赞同：-2
> 
> 时间：2012-12-03T10:15:49.633
> 
> 标签：objective-c, ios, selector

> **可能重复：**
> [我想在 UIWebView 上突出显示文本](https://stackoverflow.com/questions/13669481/i-want-highlight-text-on-uiwebview)

在调用`-[UIWebView highlightAllOccurencesOfString:]`. 选择器在 WBHighlight.h 中声明，我在 WBSecondViewController.h 中使用前向声明。

WBSecondViewController.h

```
@class WBHighlight;
#import <UIKit/UIKit.h>
@interface WBSecondViewController : UIViewController <UIWebViewDelegate, UIScrollViewDelegate>
@property (weak, nonatomic) IBOutlet WBHighlight *webView;
- (IBAction)searchButtonPressed:(id)sender;
- (IBAction)clearHighlights:(id)sender;
@end 
```

WBSecondViewController.m

```
#import "WBSecondViewController.h"
#import "WBHighlight.h"
@interface WBSecondViewController ()
@end
@implementation WBSecondViewController
-(IBAction)searchButtonPressed:(id)sender{
    NSLog(@"highlighttes");
    [_webView highlightAllOccurencesOfString:@"cat"];
}

-(IBAction)clearHighlights:(id)sender{
    [_webView removeAllHighlights];
} 
```

WBHighlight.h

```
#import <UIKit/UIKit.h>

@interface WBHighlight : UIWebView{
}
- (NSInteger)highlightAllOccurencesOfString:(NSString*)str;
- (void)removeAllHighlights;
@end 
```

WBHighlight.m

```
#import "WBHighlight.h"
- (NSInteger)highlightAllOccurencesOfString:(NSString*)str
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"UIWebViewSearch" ofType:@"js"];
    NSString *jsCode = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
    [self stringByEvaluatingJavaScriptFromString:jsCode];

    NSString *startSearch = [NSString stringWithFormat:@"uiWebview_HighlightAllOccurencesOfString('%@')",str];
    [self stringByEvaluatingJavaScriptFromString:startSearch];

    NSString *result = [self stringByEvaluatingJavaScriptFromString:@"uiWebview_SearchResultCount"];
    return [result integerValue];
}

- (void)removeAllHighlights
{
    [self stringByEvaluatingJavaScriptFromString:@"uiWebview_RemoveAllHighlights()"];
}
@end 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:17:27.530

此问题是由于您将`WBHighlight`插座连接到`UIWebView`.

可能是在其中声明和定义方法`WBHighlight`的子类。此方法在 standard 中不存在，这就是为什么它会引发错误，例如：**unrecognized selector sent to instance**。`UIWebView``highlightAllOccurencesOfString:``UIWebView`

 **您需要在界面生成器中将类更改`UIWebView`为。`WBHighlight`

1.  去找你的身份检查员
2.  选择您的网络视图
3.  将 UIWebView 的类更改为`WBHighlight`

![身份检查员的班级变更](../Images/ec49c93cc6727223f9662b548c6d1575.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:26:03.287

Hekiru，您需要制作 WBHighlight 的对象才能调用该方法。而且，为此，您需要导入该类并制作对象。

比方说，

```
WBHighlight *objWBHighlight = [WBHighlight new];

//Then, call that required method:

int someVarToAssign = [objWBHighlight highlightAllOccurencesOfString:@"fsfsf"]; 
```

希望，它会解决你的问题。试试吧。

如有任何疑问，请告诉我。:)**

# javascript - 如果 AJAX 响应是一定长度的字符，则运行 javascript

> ID：13681114
> 
> 赞同：0
> 
> 时间：2012-12-03T10:15:50.163
> 
> 标签：javascript, ajax

如果 AJAX 响应是一定数量的字符，你将如何运行一段 javascript？

到目前为止，我所拥有的是：

```
$.ajax({
type: "POST",
url: action,
data: form_data,
success: function(response)
{
if(length == 7)
//success
else
//unsuccessful 
```

尽管脚本得到的响应是 7 个字符长，但 else 脚本仍然可以运行。会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:18:28.803

```
$.ajax({
  type: "POST",
  url: action,
  data: form_data,
  success: function(response)
  {
    if(response.length == 7)
    //success
    else
    //unsuccessful
  }
}); 
```

# javascript - IE 性能问题 - 慢

> ID：13681115
> 
> 赞同：0
> 
> 时间：2012-12-03T10:15:52.757
> 
> 标签：javascript, jquery, html, css, drupal

我的网站无法正确加载，因为它在所有 IE 上都很慢，我不知道为什么，我压缩了 jquery、css 和所有内容。

有谁知道为什么会发生这种情况？

[http://puragen.co.uk](http://puragen.co.uk)

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:19:17.517

也许你的 IE 有很多插件插件？页面上有任何防病毒扫描吗？我知道 IE 的性能受这些影响很大。如果您担心客户使用的是哪种浏览器，则您无能为力，但如果开发人员工具 (F12) 中没有记录错误，则您无能为力。

也许尝试增加缓存的使用以提高性能？但我在 IE 中看不到任何问题。尝试其他版本和其他人的机器进行测试。

我使用的一个很好的跨浏览器工具是[spoon.net](http://spoon.net)，但它不是免费服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:20:06.973

您已经很久没有通过网络传输大约 2.9 Mb 的数据了！它似乎主要是图像......

您应该首先压缩您的图像（[Yahoo! Smushit](http://www.smushit.com/ysmush.it/)或[tinypng](http://tinypng.org/)，...），使用精灵等等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:22:21.597

使用[`YSLOW`](http://developer.yahoo.com/yslow/)或[`Google Page Speed`](https://developers.google.com/speed/pagespeed/)工具来分析您的网站，它将帮助您解决性能问题。

主页中加载了超过 2 MB 的图像，非常大。尝试压缩图像以减小文件大小（推荐使用图像精灵）。

这是压缩图像文件大小的在线工具，[Smush.it](http://www.smushit.com/ysmush.it/)

我假设它是 Drupal 网站，然后尝试寻找可以提高后端性能的性能模块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T10:24:58.107

作为其他答案的补充，我建议使用分析器来查看您的瓶颈到底在哪里。

我可以推荐使用[firebug](https://getfirebug.com/javascript)，但周围还有其他几个应用程序。通过使用分析器，您可以查看加载图像需要多长时间以及您的 javascript 执行性能如何。

# javascript - AngularJS 动态路由

> ID：13681116
> 
> 赞同：88
> 
> 时间：2012-12-03T10:15:53.393
> 
> 标签：javascript, angularjs, content-management-system, url-routing

我目前有一个内置路由的 AngularJS 应用程序。它工作正常，一切正常。

我的 app.js 文件如下所示：

```
angular.module('myapp', ['myapp.filters', 'myapp.services', 'myapp.directives']).
  config(['$routeProvider', function ($routeProvider) {
      $routeProvider.when('/', { templateUrl: '/pages/home.html', controller: HomeController });
      $routeProvider.when('/about', { templateUrl: '/pages/about.html', controller: AboutController });
      $routeProvider.when('/privacy', { templateUrl: '/pages/privacy.html', controller: AboutController });
      $routeProvider.when('/terms', { templateUrl: '/pages/terms.html', controller: AboutController });
      $routeProvider.otherwise({ redirectTo: '/' });
  }]); 
```

我的应用程序内置了一个 CMS，您可以在**/pages**目录中复制和添加新的 html 文件。

即使对于新的动态添加的文件，我仍然希望通过路由提供程序。

在理想的世界中，路由模式将是：

$routeProvider.when('/ **pagename** ', { templateUrl: '/pages/ **pagename** .html', controller: CMSController });

因此，如果我的新页面名称是“contact.html”，我希望 Angular 能够选择“/contact”并重定向到“/pages/contact.html”。

这甚至可能吗？如果是的话怎么办？！

**更新**

我现在在我的路由配置中有这个：

```
$routeProvider.when('/page/:name', { templateUrl: '/pages/home.html', controller: CMSController }) 
```

在我的 CMSController 中：

```
function CMSController($scope, $route, $routeParams) {
    $route.current.templateUrl = '/pages/' + $routeParams.name + ".html";
    alert($route.current.templateUrl);
}
CMSController.$inject = ['$scope', '$route', '$routeParams']; 
```

这会将当前的 templateUrl 设置为正确的值。

*但是*，我现在想用新的 templateUrl 值更改*ng-view 。*这是如何实现的？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-05-22T13:14:50.363

```
angular.module('myapp', ['myapp.filters', 'myapp.services', 'myapp.directives']).
        config(['$routeProvider', function($routeProvider) {
        $routeProvider.when('/page/:name*', {
            templateUrl: function(urlattr){
                return '/pages/' + urlattr.name + '.html';
            },
            controller: 'CMSController'
        });
    }
]); 
```

*   添加 * 让您可以动态处理***多个级别的目录***。示例：***/page/cars/selling/list***将被此提供商捕获

从文档（1.3.0）：

> “如果 templateUrl 是一个函数，它将使用以下参数调用：
> 
> {Array.} - 通过应用当前路由从当前 $location.path() 中提取的路由参数"

还

> 何时（路径，路线）：方法
> 
> *   path 可以包含以冒号开头并以星号结尾的命名组：例如：name*。当路由匹配时，所有字符都急切地存储在给定名称下的 $routeParams 中。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-12-03T11:02:25.590

好的解决了。

**将解决方案添加到 GitHub** - [http://gregorypratt.github.com/AngularDynamicRouting](http://gregorypratt.github.com/AngularDynamicRouting)

在我的 app.js 路由配置中：

```
$routeProvider.when('/pages/:name', {
    templateUrl: '/pages/home.html', 
    controller: CMSController 
}); 
```

然后在我的 CMS 控制器中：

```
function CMSController($scope, $route, $routeParams) {

    $route.current.templateUrl = '/pages/' + $routeParams.name + ".html";

    $.get($route.current.templateUrl, function (data) {
        $scope.$apply(function () {
            $('#views').html($compile(data)($scope));
        });
    });
    ...
}
CMSController.$inject = ['$scope', '$route', '$routeParams']; 
```

#views 是我的`<div id="views" ng-view></div>`

**所以现在它适用于标准路由和动态路由。**

为了测试它，我复制了 about.html 并将其命名为portfolio.html，更改了其中的一些内容并输入`/#/pages/portfolio`到我的浏览器中，嘿，很快就显示了portfolio.html....

***更新*** *在 html 中添加了 $apply 和 $compile，以便可以注入动态内容。*

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-05-10T06:20:52.940

我认为最简单的方法是稍后解决路由，例如，您可以通过 json 询问路由。检查我在配置阶段通过 $provide 从 $routeProvider 中创建了一个工厂，因此我可以在运行阶段甚至在控制器中继续使用 $routeProvider 对象。

```
'use strict';

angular.module('myapp', []).config(function($provide, $routeProvider) {
    $provide.factory('$routeProvider', function () {
        return $routeProvider;
    });
}).run(function($routeProvider, $http) {
    $routeProvider.when('/', {
        templateUrl: 'views/main.html',
        controller: 'MainCtrl'
    }).otherwise({
        redirectTo: '/'
    });

    $http.get('/dynamic-routes.json').success(function(data) {
        $routeProvider.when('/', {
            templateUrl: 'views/main.html',
            controller: 'MainCtrl'
        });
        // you might need to call $route.reload() if the route changed
        $route.reload();
    });
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-03T10:22:29.047

在 $routeProvider URI 模式中，您可以指定可变参数，例如：`$routeProvider.when('/page/:pageNumber' ...`，并通过 $routeParams 在控制器中访问它。

$route 页面末尾有一个很好的例子：[http ://docs.angularjs.org/api/ng.$ro​​ute](http://docs.angularjs.org/api/ng.$route)

**编辑（针对已编辑的问题）：**

不幸的是，路由系统非常有限 - 关于这个主题有很多讨论，并且已经提出了一些解决方案，即通过创建多个命名视图等。但是现在，ngView 指令只为每个路由提供一个视图，on一对一的基础。你可以通过多种方式来解决这个问题——更简单的一种是使用视图的模板作为加载器，其中包含一个`<ng-include src="myTemplateUrl"></ng-include>`标签（$scope.myTemplateUrl 将在控制器中创建）。

我使用了一个更复杂（但更简洁，用于更大更复杂的问题）的解决方案，基本上完全跳过了 $route 服务，这里有详细说明：

[http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-28T00:17:11.433

不知道为什么这可行，但动态（或如果您愿意，可以使用通配符）路由在角度 1.2.0-rc.2 中是可能的......

```
http://code.angularjs.org/1.2.0-rc.2/angular.min.js
http://code.angularjs.org/1.2.0-rc.2/angular-route.min.js

angular.module('yadda', [
  'ngRoute'
]).

config(function ($routeProvider, $locationProvider) {
  $routeProvider.
    when('/:a', {
  template: '<div ng-include="templateUrl">Loading...</div>',
  controller: 'DynamicController'
}).

controller('DynamicController', function ($scope, $routeParams) {
console.log($routeParams);
$scope.templateUrl = 'partials/' + $routeParams.a;
}). 
```

example.com/foo -> 加载“foo”部分

example.com/bar-> 加载“bar”部分

无需在 ng-view 中进行任何调整。'/:a' 案例是我发现的唯一可以实现这一点的变量。'/:foo' 不起作用，除非你的部分都是 foo1、foo2 等......'/:a' 适用于任何部分姓名。

所有值都会触发动态控制器 - 所以没有“否则”但是，我认为这是您在动态或通配符路由场景中寻找的东西..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-28T15:57:19.277

从 AngularJS 1.1.3 开始，您现在可以使用新的 catch-all 参数来做您想做的事。

[https://github.com/angular/angular.js/commit/7eafbb98c64c0dc079d7d3ec589f1270b7f6fea5](https://github.com/angular/angular.js/commit/7eafbb98c64c0dc079d7d3ec589f1270b7f6fea5)

从提交：

> 这允许 routeProvider 接受与子字符串匹配的参数，即使它们包含斜杠（如果它们以星号而不是冒号为前缀）。例如，路线 like`edit/color/:color/largecode/*largecode` 将匹配类似 this 的内容`http://appdomain.com/edit/color/brown/largecode/code/with/slashs`。

我自己测试过（使用 1.1.5），效果很好。请记住，每个新 URL 都会重新加载您的控制器，因此要保持任何类型的状态，您可能需要使用自定义服务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T11:24:05.677

这是另一个效果很好的解决方案。

```
(function() {
    'use strict';

    angular.module('cms').config(route);
    route.$inject = ['$routeProvider'];

    function route($routeProvider) {

        $routeProvider
            .when('/:section', {
                templateUrl: buildPath
            })
            .when('/:section/:page', {
                templateUrl: buildPath
            })
            .when('/:section/:page/:task', {
                templateUrl: buildPath
            });

    }

    function buildPath(path) {

        var layout = 'layout';

        angular.forEach(path, function(value) {

            value = value.charAt(0).toUpperCase() + value.substring(1);
            layout += value;

        });

        layout += '.tpl';

        return 'client/app/layouts/' + layout;

    }

})(); 
```

# python - 错误：[Errno 10054] 现有连接被远程主机强行关闭

> ID：13681117
> 
> 赞同：1
> 
> 时间：2012-12-03T10:16:00.320
> 
> 标签：python, sockets

我是套接字编程的新手，有人能告诉我我在这里做错了什么吗？我收到此错误。当我不调用将其定义为函数时，该程序工作正常。我从 main 调用它的那一刻是给我这个错误。有人请帮忙！

```
#!/usr/bin/env python
import socket
import sys
import urlparse
from urlparse import urlparse

def main(url):
  t=url
  o = urlparse(t)
  x=".".join(o.netloc.split(".")[-2:])
  head1= o.path
  host = o.netloc
  port = 80

  try:
     sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  except socket.error, msg:
     sys.stderr.write("[ERROR] %s\n" % msg[1])
     sys.exit()
  try:
     sock.connect((host, port))
     except socket.error, msg:
     sys.stderr.write("[ERROR] %s\n" % msg[1])
     sys.exit()
  try:
     sock.send("HEAD %s HTTP/1.0\r\n\r\n" % head1)
  except sock.error:
     sys.exit()   

  s=sock.recv(600)
  sock.shutdown()
  import sys
  sys.exit
  sock.close()
  return s

 x=main("www.google.ca")
 print x

ERROR I get:
Traceback (most recent call last):
File "C:/myserver/cgi-bin/domainsockettest.py", line 47, in <module>
x=main("www.google.ca")
File "C:/myserver/cgi-bin/domainsockettest.py", line 40, in main
s=sock.recv(600)
error: [Errno 10054] An existing connection was forcibly closed by the remote host 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:32:06.820

我建议您打印出中间值，直到您确定自己在做什么。现在看来您的 URL 拆分逻辑搞砸了：

```
>>> o = urlparse.urlparse('www.google.ca')
>>> o.path
'www.google.ca'
>>> o.netloc
''
>>> 
```

还：

*   调用`sys.exit()`缺少括号，
*   在那个出口之后你正试图做某事，
*   返回关闭的套接字是完全没用的。

# java - Java 文件——新更新的文件出现在一行中

> ID：13681118
> 
> 赞同：0
> 
> 时间：2012-12-03T10:16:02.570
> 
> 标签：java, newline, java-io

我正在尝试使用带有新数据的 Java 更新文件。假设我有一个 txt 文件，其中保存了以下数据：

```
id     grade
3498   8
2345   9
5444   7
2222   5 
```

所以我正在尝试更新成绩，具体取决于用户输入的 id，但新的（更新的）文件具有以下类型：

```
id   grade3498   62345   95444   72222   5 
```

等等....

我找不到这不起作用的原因，我猜这与重写数据时不添加新行有关，但即使我在 outobj.write 中添加新行字符（“\ n”） (fileContent.toString()); 没有什么变化。

这是我的代码片段：

```
public String check(int num) throws RemoteException
{
    String textinLine;
    String texttoEdit;
    File file=new File ("c:\\students.txt");
    FileInputStream stream = null;
    DataInputStream in =null;
    BufferedReader br = null;
    try
        {
        stream = new FileInputStream(file);
        in =new DataInputStream(stream);
        br = new BufferedReader(new InputStreamReader(in));
        StringBuilder fileContent = new StringBuilder();
        if ((num>0) && (num<6001))
            {
            while ((textinLine=br.readLine())!=null)
                {
                texttoEdit=Integer.toString(num);
                    System.out.println(textinLine);
                    String[] parts = textinLine.split(" ");
                    if (parts.length>0)
                        {
                        if (parts[0].equals(texttoEdit))
                            {
                            int value =       Integer.parseInt(parts[1]);
                            value-=2;
                            String edit=Integer.toString(value);
                            String newLine = "\n"+parts[0]+"    "+edit+"\n";
                            msg="You can pass2";
                            fileContent.append(newLine);
fileContent.append("\n");               }
                        else
                            {
                            fileContent.append(textinLine);
fileContent.append("\n");
                            }
                        }
                }
            }
        in.close();
        FileWriter fstream = new FileWriter(file);
        BufferedWriter outobj = new BufferedWriter(fstream);
        outobj.write(fileContent.toString());
        outobj.close();
        }
    catch (FileNotFoundException e)
        {
        e.printStackTrace();
        }
    catch (IOException e)
        {
        e.printStackTrace();
        } 
```

最后，我说新文件是正确编辑的，这意味着如果用户输入 id 3498，等级值将变为 8-2=6，但新文件将在一行中，正如我解释的那样前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T10:16:56.593

在某些操作系统（通常是 Windows）上，您需要使用`\r\n`换行符。更好的是，您可以使用：

```
String newLine = System.getProperty("line.separator"); 
```

对于将根据运行平台进行调整的行分隔符。

# java - 如何通过 KryoNet 发送用户信息？

> ID：13681120
> 
> 赞同：0
> 
> 时间：2012-12-03T10:16:21.973
> 
> 标签：java, networking, kryonet

我创建了一个包含玩家（玩家）的 ArrayList 的游戏服务器。但是，据我所知，Kryonet 无法将带有构造函数的对象发送到客户端（播放器有），所以我需要找到另一种传输 ArrayList 的方法。

什么是实现这一目标的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:23:24.403

您可以使用 JMS 实现（在我的例子中是 ActiveMq）并发送一个对象消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T21:18:54.053

您只需要使对象具有不带参数的默认构造函数。您仍然可以使用接受参数的构造函数创建对象。

# c# - 如何最好地只同步 SQL Server 数据库中的一些表

> ID：13681126
> 
> 赞同：0
> 
> 时间：2012-12-03T10:16:53.083
> 
> 标签：c#, sql, sql-server, winforms, microsoft-sync-framework

我有一个带有这些表的 OCA（C# Winforms）：

粗略的轮廓：

*   用户表 - 从服务器复制。用户 ID 必须保持不变
*   文档表 - 将每一行复制到服务器然后删除本地副本

我想知道这里最好的方法是什么，特别是如果这是 Microsoft 的 Sync Framework 适合的那种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:45:52.370

您应该能够选择/指定要同步的表，甚至指定哪些列。

对于您的第二个问题，本地副本上的删除也将作为删除上传到服务器。

如果您使用 SQL Express 并且不希望删除传播到服务器，最快的解决方法是禁用更新跟踪表的删除/触发器。

# facebook - 清理位置数据

> ID：13681133
> 
> 赞同：1
> 
> 时间：2012-12-03T10:17:21.943
> 
> 标签：facebook, search, linkedin

我有一个城市名称数据库，但问题是它没有经过清理。例如，如果印度班加罗尔是一个城市，那么我的数据库中可能有以下位置：

1.  班加罗尔
2.  印度班加罗尔
3.  印度班加罗尔（拼写错误）
4.  班加罗尔，顶级城市，印度
5.  班加罗尔，大都会，印度

现在我想清理这些数据，以便清理后唯一剩下的条目是“印度班加罗尔”。我可以使用 LinkedIn 或 Facebook 拥有的数据，但我不知道这是否可能？另一种方法可能是拥有一个城市名称的主列表并在此基础上进行清理，但这似乎是一种昂贵的方法。理想情况下，当我将任何城市名称（正确或不正确）作为输入传递时，我正在寻找一种能够从正确的数据集中返回最佳匹配城市的服务。任何指针将不胜感激。

# android - Android 地理位置获取启动和停止坐标 Titanium

> ID：13681135
> 
> 赞同：0
> 
> 时间：2012-12-03T10:17:22.677
> 
> 标签：android, geolocation, titanium-mobile, appcelerator-mobile

我的 Android 应用程序中的位置处理程序存在一些问题。

也许有人可以帮助我？

当我在我的设备中运行它时出现此错误：

> 消息：未捕获的错误：addlistner 只接受函数的实例。事件“位置”的侦听器是“未定义”
> 
> 来源： throw new Error('addListner 只接受函数的实例...

[这是我的代码](http://lucyseven.com/gps.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:40:57.363

Richard，请参考以下链接[Geolocation can't get coords on Android Emulator](http://developer.appcelerator.com/question/106441/geolocation-cant-get-coords-on-android-emulator)

希望对你有帮助！！

# python - 如何将 str.title 与另一种语言一起使用？

> ID：13681136
> 
> 赞同：2
> 
> 时间：2012-12-03T10:17:22.693
> 
> 标签：python

我正在使用这个代码块：

```
>>> import re
>>> def titlecase(s):
...     return re.sub(r"[A-Za-z]+('[A-Za-z]+)?",
...                   lambda mo: mo.group(0)[0].upper() +
...                              mo.group(0)[1:].lower(),
...                   s)
...
>>> titlecase("they're bill's friends.")
"They're Bill's Friends." 
```

它来自 Python 的文档。

如果字符串包含像 'ö' 这样的土耳其字符，则字符串变为

'BöRek'。为了支持所有语言，我应该写什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:28:06.747

通过编译正则表达式来使用 Unicode 字符属性数据库`flags=re.UNICODE`：

```
def titlecase(s):
    return re.sub(re.compile(r"[\w]+('[\w]+)?", flags=re.UNICODE),
                  lambda mo: mo.group(0)[0].upper() +
                             mo.group(0)[1:].lower(),
                  s) 
```

在 Python 2 上，您需要使用 Unicode 字符串：

```
>>> print titlecase(u"börek")
Börek 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:23:55.623

使用 unicode 字符串，即`titlecase(u'börek')`.

# c# - 自动操作实体框架实体以添加额外信息

> ID：13681140
> 
> 赞同：2
> 
> 时间：2012-12-03T10:17:53.940
> 
> 标签：c#, entity-framework, poco, dbcontext

我希望在创建任何实体时运行一些代码。一直在 DbContext 中寻找要覆盖的东西，但很难找到任何有用的东西。

多解释一下......我有几个模型，当我使用其中一个模型返回实体中的数据时，我希望能够在实体返回到调用方法之前对它做一些事情。我想每个模型最多定义一次这个代码，我希望它发生在所有实体上。

有EF专家吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T10:43:21.183

`DbContext`不提供这样的机制，但你可以使用这个：

```
ObjectContext objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
objectContext.ObjectMaterialized += (sender,e) => {
    var yourEntity = e.Entity as YourEntityType;
    if (yourEntity != null) {
        // Do something
    }
}; 
```

# spring - 将struts2 spring hibernate与ehcache集成

> ID：13681141
> 
> 赞同：0
> 
> 时间：2012-12-03T10:17:56.267
> 
> 标签：spring, hibernate, struts2, ehcache

我是 Hibernate 的新手。我需要逐步了解如何将 Struts2、Spring3.0 和 Hibernate 与 Ehcache 集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:47:07.987

集成弹簧 - struts2： [http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/web-integration.html#struts](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/web-integration.html#struts)

这里描述了ehcache的集成：http: [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)

如果您有确切的问题，也许我可以提供更具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:43:52.283

Ehcache 与 hibernate(ORM) 一起使用。 **[分步教程](http://ehcache.org/documentation/integrations/hibernate)。**

# java - 无法使用修饰符访问 org.springframework.aop.TruePointcut 类的成员 public

> ID：13681142
> 
> 赞同：20
> 
> 时间：2012-12-03T10:17:56.123
> 
> 标签：java, spring, struts2, struts2-json-plugin

我正在使用 Struts 和 Struts JSON 插件开发一个 Spring 应用程序。当我运行应用程序时，它会出现以下错误（在 Firebug 中）：

```
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.IllegalAccessException: Class org.apache.struts2.json.JSONWriter can not access a member of class org.springframework.aop.TruePointcut with modifiers public 
```

这是完整的堆栈跟踪：

```
org.apache.struts2.json.JSONException:
org.apache.struts2.json.JSONException:
org.apache.struts2.json.JSONException:
org.apache.struts2.json.JSONException:
java.lang.IllegalAccessException: Class
org.apache.struts2.json.JSONWriter can not access a member of class
org.springframework.aop.TruePointcut with modifiers &quot;public&quot;
    org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:238)
    org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    org.apache.struts2.json.JSONWriter.write(JSONWriter.java:95)
    org.apache.struts2.json.JSONUtil.serialize(JSONUtil.java:116)
    org.apache.struts2.json.JSONResult.createJSONString(JSONResult.java:196)
    org.apache.struts2.json.JSONResult.execute(JSONResult.java:170)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432) 
```

根本原因：

```
org.apache.struts2.json.JSONException:
org.apache.struts2.json.JSONException:
org.apache.struts2.json.JSONException:
java.lang.IllegalAccessException: Class
org.apache.struts2.json.JSONWriter can not access a member of class
org.springframework.aop.TruePointcut with modifiers &quot;public&quot;
    org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:238)
    org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    org.apache.struts2.json.JSONWriter.add(JSONWriter.java:363)
    org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:223)
    org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    org.apache.struts2.json.JSONWriter.write(JSONWriter.java:95)
    org.apache.struts2.json.JSONUtil.serialize(JSONUtil.java:116)
    org.apache.struts2.json.JSONResult.createJSONString(JSONResult.java:196)
    org.apache.struts2.json.JSONResult.execute(JSONResult.java:170)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-03T10:20:39.363

这个类本身不是公共的。它是包保护的（见[这里](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring/2.5.1/org/springframework/aop/TruePointcut.java)）。您必须`setAccessible(true)`在访问其成员之前调用，就像访问私有或受保护成员时一样。

编辑。不幸的是，您没有提供完整的堆栈跟踪。如果此异常是您的活动的结果（我的意思是您尝试自己访问 Spring 类的成员），则解决方案在上面。但是，如果这是由于框架冲突而发生的，请发送更多详细信息。可能您的 Struts 和 Spring 版本不兼容，或者需要一些额外的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-03T18:33:55.437

就我而言，我试图访问非公共类的公共构造函数。

```
class MyClass {
  public MyClass() {}
}

//...
MyClass c = JsonIterator.deserialize(bytes, MyClass.class) 
```

抛出： `ReflectionMapDecoder can not access a member of class MyClass with modifiers "public"`

添加`public`并有效。

```
public class MyClass {
  public MyClass() {}
} 
```

高温高压

# web-applications - 视频字幕菜单在 iOS6 主屏幕 webapp 中不起作用

> ID：13681151
> 
> 赞同：0
> 
> 时间：2012-12-03T10:18:22.240
> 
> 标签：web-applications, ios6, html5-video, ipod-touch

我在 iPod Touch 和 iPad 上运行了一个带有视频播放页面的 webapp。视频经过转码并包含多个音轨和字幕轨道（嵌入）。

从 iOS4.3.3 和 iOS5.1.1 的主页运行 webapp 运行良好，全屏，我可以选择音频和字幕轨道。

现在我有一个装有 iOS6.0.1 的第 5 代 iPod。如果我从主屏幕在该设备上运行相同的 web 应用程序，它会全屏运行，但是当我按下字幕按钮时，菜单不会出现在视频顶部。当我按下字幕按钮（仅在横向时可用），然后返回纵向并按下完成按钮时，我可以看到 adiotrack/subtitle 菜单位于视频后面。

我的最小测试用例

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes" /> <!-- THIS LINE -->
    <title>video test</title>
  </head>
  <body>
    <div id="streampage">
      <video id="videostream" src="main.m4v" controls="controls" preload="none" style="-webkit-transform-style: preserve-3d;"></video>      
    </div>
   </body>
</html> 
```

当我在浏览器中打开它时，将其保存到主屏幕，然后从主屏幕启动，音轨/字幕菜单不可见（显然在电影后面）当我删除带有注释的行时，`<!-- THIS LINE -->`在浏览器中打开页面，保存它到主屏幕并从那里开始，我可以毫无问题地看到音轨/字幕菜单。但是，webapp 不再是全屏的。

任何人都知道从主页启动时保持网络应用全屏的解决方法 - 并且 - 能够看到音轨/字幕菜单？

注意：这只在 iPod 上失败。使用 iOS6.0.1 在 iPad3 上测试只是显示菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T12:21:31.283

此问题已在 iOS7 中修复。

# ios - 我沉重的 iPad 应用程序会被拒绝吗？

> ID：13681153
> 
> 赞同：1
> 
> 时间：2012-12-03T10:18:31.757
> 
> 标签：ios, ipad, app-store

我期待提交一个 iPad 应用程序，它大量使用 CoreAnimation，所以它很重。

在“App Store Review Guideline”中，它显示：

> 13.2 快速耗尽设备电池或产生过多热量的应用程序将被拒绝

在真正的 iPad 上运行我的应用程序时，它会在 4 小时内将电池电量耗尽一半，让设备变得有点温暖。这足以成为拒绝的理由吗？

# c# - 实体框架4.4：如何捕捉Sql Exception？

> ID：13681154
> 
> 赞同：0
> 
> 时间：2012-12-03T10:18:30.467
> 
> 标签：c#, exception, exception-handling, entity-framework-4.1

我在数据库中有一个包含应用程序用户的表。用户名是唯一的，所以我在表中有唯一的约束。

我正在做探测，一个是尝试为两个用户使用相同的用户名。发生错误时，我捕获异常“Eception”，我可以看到捕获的异常是 System.Data.Entity.Infraestructure.DbUpdateConcurrencyException，内部异常是 System.Data.OptimisticConcurrencyException。

然后我捕获了 DbUpdateConcurrencyException，内部异常是 OptimisticConcurrencyException，所以我也尝试捕获这个异常。

如果我尝试在 DbUpdateConcurrencyException 之前捕获 OptimisticConcurrencyException，则不是捕获，而是捕获 DbUpdateConcurrencyException。

所以我不知道如何捕获 SqlException，因为我想捕获 Sql Server 的错误，以获取代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:21:55.850

你有没有尝试过：

```
 try
   {

   }
   catch (SqlException ex)
   {

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:27:07.447

您无法处理“内部异常”。您需要检查`catch`处理程序中抛出的实际异常，如果无法处理，请重新处理。例子：

```
try
{
}
catch (DbUpdateConcurrencyException ex)
{
   if (CanHandleException(ex)) 
   {
       // do what you have to do to handle the exception
   }
   else
   {
       throw; // can't handle this exception - just let it bubble up
   }
} 
```

在该方法中`CanHandleException`，您将编写确定您是否可以处理此异常并做一些有意义的事情的逻辑（可能重试操作）。您可以通过检查异常的属性（消息、InnerException、...）来做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T10:50:19.990

你可以处理它使用

```
var objContext = ((IObjectContextAdapter)ctx).ObjectContext;
     var entry = dbUpdateConcurrencyException.Entries.Single();
     if (entry.State == EntityState.Deleted)
     {
           entry.State = EntityState.Detached;
      }
      else
      {
           entry.OriginalValues.SetValues(entry.GetDatabaseValues());
            objContext.Refresh(RefreshMode.ClientWins,dbUpdateConcurrencyException.Entries.Select(e => e.Entity));
       } 
```

# asp.net - 如何使用asp.net以最简单的方式从网页发送电子邮件？

> ID：13681155
> 
> 赞同：0
> 
> 时间：2012-12-03T10:18:30.247
> 
> 标签：asp.net

在我的网站上，我有“联系我们”页面，我希望经理能够通过电子邮件回复客户。所有过程都需要在服务器端。需要注意的是，我使用 Webmatrix 开发环境...

因此，考虑到我的 Web 开发，我添加发送电子邮件功能的简单方法是什么？

我的 HTML 代码是：

```
foreach(var row in db.Query(displayApplicant,nameOfcustomer))
                {
                <tr>
                    <td class="dispExpertActScreen">@row.messegeID</td>
                    <td class="dispExpertActScreen">@row.name</td>
                    <td class="dispExpertActScreen">@row.email</td>
                    <td class="dispExpertActScreen">@row.isCustomer</td>
                    <td class="dispExpertActScreen">@row.userID</td>
                    <td class="dispExpertActScreen">@row.content</td>
                    <td class="dispExpertActScreen"><a href="#" onclick="answerBox('@row.messegeID','@row.userID')" style="color: #b04e4e">answer the question</a></td>
                    <td class="dispExpertActScreen"><a href="#" onclick="reqeustToDelete('@row.messegeID')" style="color: #b04e4e">remove</a></td>
                </tr>
                } 
```

javascript函数：（将详细信息保存在隐藏字段中）

```
<script type="text/javascript">

function answerBox(messegeID,userID) {
        var msg = prompt('answer to customer:');
        document.getElementById('answer').value = msg;
        document.getElementById('ansMode').value = 'true';
        document.getElementById('msgID').value = messegeID;
        document.getElementById('user').value = userID;
        document.getElementById('ansMessege').submit();
    }

</script> 
```

隐藏字段：

```
<form method="post" id="ansMessege" style="font-size: medium; margin-top: 10%" dir="rtl">
    <input type="hidden" name="answer" id="answer" value="">
    <input type="hidden" name="msgID" id="msgID" value="">
    <input type="hidden" name="user" id="user" value="">
    <input type="hidden" name="ansMode" id="ansMode" value="">
</form> 
```

asp.net 代码：

```
<%@ Import Namespace="System.Web.Mail" %>

@{
    Layout = "~/_ManagerLayout.cshtml";
    Page.Title = "Management Applications";

 }
@{
    var db = Database.Open("MyProjectSite");
    var display="no";
    var displayApplicant="";
    var nameOfcustomer="";
    var category="";
    var yesNo="";
     if(IsPost)
    {
     if(Request.Form["ansMode"] == "true")
          {
              var selectQuery="SELECT * FROM messegesFromCustomers";
              var id=Request.Form["msgID"];
              var msg=Request.Form["answer"];
              var user=Request.Form["user"];

              foreach(var row in db.Query(selectQuery))
              {
                  if(row.messegeID == Convert.ToInt32(id))
                  {
                      if(row.isCustomer == "yes")// **send the messege to customer account**
                      {
                          var insertQuery="UPDATE messegesFromCustomers SET answer=@0 WHERE messegeID=@1";
                          db.Execute(insertQuery,msg,id);
                          Response.Write("<script>alert('your answer sent successfully');</script>");
                          break;
                      }
                      else
                      {
                          // **Send messege to Occasional customer via email**
                         // **here I want to add code for sending email...**

                          string from = "ofirhgy@gmail.com";
                          string to = "ofirhgy@gmail.com";
                          string subject = "Hi!";
                          string body = "How are you?";
                          SmtpMail.SmtpServer = "mail.gmail.com";
                          SmtpMail.Send(from, to, subject, body);

                          break;
                      }
                  }
              }

          }

 }

} 
```

如您所见，我尝试使用 WebMail.Send(...) 但我不知道如何...除此之外，我看到有人写道需要向 Web.config 添加一些代码或类似的东西那....

谢谢你的帮助。

编辑：我编辑代码并输入以下内容：

```
<%@ Import Namespace="System.Web.Mail" %> 
```

在 asp.net 页面的顶部，但我收到此错误：

解析器错误消息：在“@”字符后遇到空格或换行符。只有有效的标识符、关键字、注释、“(”和“{”在代码块的开头是有效的，它们必须紧跟在“@”之后，中间没有空格。

任何人都可以为我提供确切的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:28:46.793

首先，我们需要导入`System.Web.Mail`命名空间：

```
<%@ Import Namespace="System.Web.Mail" %> 
```

发送消息是`SmtpMail.Send()`使用以下参数调用的问题： `sender`、`recipient`和。例如，我们会用 C# 发送一封电子邮件，如下所示：`subject``body`

```
string from = "sender@example.com";
 string to = "recipient@example.com";
 string subject = "Hi!";
 string body = "How are you?";
 SmtpMail.SmtpServer = "mail.example.com";
 SmtpMail.Send(from, to, subject, body); 
```

`SmtpMail.SmtpServer`让您指定用于传递您的消息的邮件服务器。

来自[这里的内容](http://email.about.com/od/emailprogrammingtips/qt/How-To-Send-A-Simple-Email-With-Asp-Net.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:52:54.163

我找到了解决方案

在我的代码中，我添加了这个并成功发送了电子邮件：

```
 if(isCustomer == "yes")
               {

                  db.Execute(insertQuery,msg,id);
                  db.Execute(deleteQuery,id);
               }

               else
               {
                   WebMail.SmtpServer = "smtp.gmail.com";
                   WebMail.EnableSsl = true;
                   WebMail.SmtpPort = 587;//25
                   WebMail.UserName = "my gmail user name";
                   WebMail.Password = "my gmail password";
                   WebMail.From = "my address of email";
                   // Send email
                   WebMail.Send(
                    to: email,
                    subject: "Message from "some name of site" - Site",
                    body: msg);

                    db.Execute(deleteQuery,id);    

                } 
```

# javascript - IE 没有设置 document.referrer

> ID：13681156
> 
> 赞同：7
> 
> 时间：2012-12-03T10:18:53.613
> 
> 标签：javascript, html, internet-explorer, browser, document

我通过在 IE 中调试仔细观察了它；IE 确实设置了`document.referrer`如果我提交表单或单击任何链接，但是当我使用**IE**`javascript window.location`重定向到另一个页面时。 **`did not set document.referrer`**

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-01T06:29:04.640

**信息：Internet Explorer 在不安全的情况下不发送引用标头**

在 Internet Explorer 4.0 和更高版本中从一个文档链接到另一个文档时，如果链接是从 HTTPS 页面到非 HTTPS 页面，则不会发送 Referer 标头。当链接来自非 HTTP(S) 协议（例如 file://）到另一个页面时，Referer 标头也不会被发送。

[微软](http://support.microsoft.com/kb/178066)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T10:22:34.450

尝试这个

```
<script type="text/javascript" >            
function redirect(url) {
    if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
        var referLink = document.createElement('a');
        referLink.href = url;
        document.body.appendChild(referLink);
        referLink.click();
    } else {
        location.href = url;
    }
}
</script> 
```

[资源](https://stackoverflow.com/questions/1890532/ie-has-empty-document-referrer-after-a-location-replace)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T15:00:43.807

最简单的解决方案是您可以使用 window.opener.location.href，它适用于所有浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T10:23:26.153

当您尝试在弹出窗口或使用 window.location 发送引荐来源网址时，IE 不支持引荐来源网址。您可以通过多种方式发送引荐来源网址。但是，如果您尝试在服务器端获取它，如果通过 JS 弹出窗口更改位置或在使用 IE 时更改 JS 中的位置，因为 IE 内置安全问题，您将不会拥有它。检查 window 或 window.open 属性。[你可以去这里](http://msdn.microsoft.com/en-us/library/ie/ms536651(v=vs.85).aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-05-20T05:19:32.900

尝试这个：

```
<script type="text/javascript">
$("#button").click(function(){

        window.open("about:blank", "win_name", "height=370,width=365, top=50, left=90, scrollbars=yes,resizable=no,menubar=no");
        sForm = '<form action="url.php" method="post" target="win_name">';
        sForm += '</form>';
        //alert(sForm);return;
        $(sForm).appendTo('body').submit();
        return;

     });
</script> 
```**

# joomla - 将我自己的 joomla 登录集成到主站点

> ID：13681158
> 
> 赞同：2
> 
> 时间：2012-12-03T10:18:57.670
> 
> 标签：joomla

我正在尝试制作自己的登录表单以扩展更多字段信息。我尝试将它与我的站点分开构建，因此我将其保存到`testlogin.php`基本的 Joomla 主站点目录中。这是我的脚本：

```
<?php
 define('_JEXEC', 1 );
 define ('JPATH_BASE', dirname(_FILE_));
 define('DS',DIRECTORY_SEPARATOR);
require_once(JPATH_BASE.DS.'includes'.DS.'defines.php');
require_once(JPATH_BASE.DS.'includes'.DS.'framework.php');
require_once(JPATH_BASE.DS.'libraries'.DS.'joomla'.DS.'factory.php');

$mainframe =& JFactory::getApplication('site');
$mainframe ->initialise();

$credentials=Array('username' => 'dadanuser', 'password' => 'dadan');
$options=Array('remember' => true);

$mainframe->login($credentials, $options); 
//echo $result;
$user =& JFactory::getUser();
echo $user->username;

$session =& JFactory::getSession();
$myUser = $session->set( 'myUser', $user );
?> 
```

我直接运行它，我使用用户名登录：dadanuser，但是当我打开 Joomla 主站点时，我仍然没有登录，也许我必须以正确的方式设置会话？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:21:15.063

为什么要重新发明轮子？如果您使用的是 2.5 或 3，您可以使用配置文件插件来添加额外的字段。如果您使用的是 1.5，则可以使用作为扩展分发的早期版本。 [http://joomlacode.org/gf/project/usermeta](http://joomlacode.org/gf/project/usermeta)

# entity-framework - ASP NET MVC4 Entity Framework SQL 查询花费无限时间并且不返回结果

> ID：13681160
> 
> 赞同：1
> 
> 时间：2012-12-03T10:19:03.847
> 
> 标签：entity-framework, asp.net-mvc-4

我在执行存储过程时遇到了奇怪的问题。SQL 管理中的 SP 仅需 22 秒。但是从 asp.net 需要无限的时间。

我试过增加命令超时属性，但没有运气。

如果我直接从表中选择，则此存储过程有效。

但是当 SP 调用另一个 SP 需要 22 秒来处理，然后返回到 asp.net mvc 时不能正常工作。

# java - Java中的居中菜单按钮

> ID：13681161
> 
> 赞同：1
> 
> 时间：2012-12-03T10:19:10.793
> 
> 标签：java, button, menu, center

我正在尝试用 Java 创建一个菜单。我有 4 个按钮。我想将 X 轴和 Y 轴的菜单居中。我可以将它与 X 轴居中。setAlignmentY()、setLocation() 不起作用。你可以帮帮我吗？谢谢你。

```
 import javax.swing.*;
 import javax.swing.border.*;
 import java.awt.*;
 import java.awt.event.*;

public class Menu extends JFrame
{

private static JFrame frame;
private static JPanel myPanel;
private JButton button1;
private JButton button2;
private JButton button3;
private JButton button4;

public Menu()
{

    myPanel = new JPanel();

    button1 = new JButton("Read From File");  
    button1.setMaximumSize(new Dimension(122, 50));
    button1.setAlignmentX(JButton.CENTER_ALIGNMENT);

    button2 = new JButton("Start Animation");
    button2.setMaximumSize(new Dimension(122, 50));
    button2.setAlignmentX(JButton.CENTER_ALIGNMENT);

    button3 = new JButton("Help");
    button3.setMaximumSize(new Dimension(122, 50));
    button3.setAlignmentX(JButton.CENTER_ALIGNMENT);

    button4 = new JButton("Quit");
    button4.setMaximumSize(new Dimension(122, 50)); 
    button4.setAlignmentX(JButton.CENTER_ALIGNMENT);

    SimpleListener ourListener = new SimpleListener();
    button1.addActionListener(ourListener);
    button2.addActionListener(ourListener);
    button3.addActionListener(ourListener);
    button4.addActionListener(ourListener);

    myPanel.add(button1);
    myPanel.add(button2);
    button2.setEnabled(false);
    myPanel.add(button3);
    myPanel.add(button4);

    myPanel.setLayout(new BoxLayout(myPanel,BoxLayout.Y_AXIS));
    myPanel.setBorder(BorderFactory.createTitledBorder("OPTIONS"));
    myPanel.setBackground(Color.decode("#82CAFF"));

}

private class SimpleListener implements ActionListener
{

    public void actionPerformed(ActionEvent e)
    {

        String buttonName = e.getActionCommand();

        boolean readFile = false;
        if (buttonName.equals("Read From File"))
        {
            if( readFile == true ){ 
                button2.setEnabled(true); }
            else
            {
                JOptionPane.showMessageDialog(frame, "File couldn't be read!");
            }
        }

        else if (buttonName.equals("Start Animation"))
            JOptionPane.showMessageDialog(frame, "Nice Try!");

        else if (buttonName.equals("Help"))
            JOptionPane.showMessageDialog(frame, "Ontirismo maykilino cino! Ay em kino!" );

        else if (buttonName.equals("Quit"))
            System.exit(0);
    }
}
public static void main(String s[])
{

    Menu gui = new Menu();
    frame  = new JFrame("BILLIARDINATOR 5000 MENU");
    frame.addWindowListener(new WindowAdapter(){
        public void windowClosing(WindowEvent e)
        {System.exit(0);}});

        frame.getContentPane().add(myPanel);
        frame.setPreferredSize(new Dimension(400, 400));
        frame.setLocation(600,200);
        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:26:10.307

要指定组件的自定义位置，您可能希望对面板使用**null布局。**

```
myPanel.setLayout(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:52:54.210

您可以使用 GridBagLayout。这很可怕，但它确实有效。

```
myPanel = new JPanel(new GridBagLayout());
GridBagConstraints gbc = new GridBagConstraints();
gbc.gridy = 0;
gbc.fill = GridBagConstraints.BOTH;

// change setMaximumSize to setPreferredSize for all buttons
button1.setPreferredSize(new Dimension(122, 50)); // etc

// increase Y coordinate after adding a button
myPanel.add(button1, gbc);
++gbc.gridy;
myPanel.add(button2, gbc);
++gbc.gridy;
myPanel.add(button3,gbc);
++gbc.gridy;
myPanel.add(button4, gbc);
++gbc.gridy;

// And of course, remove the BoxLayout. 
```

# c - 循环遍历C中数组中的某个范围

> ID：13681167
> 
> 赞同：0
> 
> 时间：2012-12-03T10:19:24.887
> 
> 标签：c, arrays, cycle

我有这个代码

```
int x = 0
int MAX = 21;
int MIN = 18;
char *arr[40];
do{
  char* current = cycle(x,arr)
  x++;
}while(x<10000000) 
```

我的 cycle() 当前循环遍历整个数组

```
unsigned char *cycle(int counter, unsigned char *packets[40]){
int tmp = counter % 40;
return packets[tmp];
 } 
```

但我希望它在 [MIN,MAX] 范围内的数组中循环。所以while循环中的返回值为：arr[18], arr[19], arr[20], arr[21], arr[18], arr[19]...

知道如何实现吗？我不想要使用全局变量的解决方案。

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:25:01.397

尝试这样的事情：

```
sometype cycle_range(int counter, sometype array[], unsigned min, unsigned max) {

    sometype* first = array+min;
    unsigned length = max-min+1;

    return first[counter % length];
} 
```

这就像您的解决方案一样工作，但它在`min`更远的地方开始元素`array`并循环遍历`max-min+1`元素而不是`40`.

（`sometype`在`unsigned char*`你的情况下，但如果你愿意，你可以在这里替换另一种类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:00:52.040

```
unsigned char *cycle(int counter,int min, int max, unsigned char *packets[40]){
    int tmp = (counter % (max - min + 1)) + min;
    return packets[tmp];
} 
```

# java - 尝试从 Axis2 生成的代码创建 jar

> ID：13681169
> 
> 赞同：1
> 
> 时间：2012-12-03T10:19:34.050
> 
> 标签：java, eclipse, axis2

我已经生成了axis2代码，我想使用build.xml来创建一个jar文件。

当我尝试运行 build.xml 时，出现以下错误

```
Buildfile: /home/user/workspace/Axis2WSTest/build.xml
init:
pre.compile.test:

BUILD FAILED
/home/user/workspace/Axis2WSTest/build.xml:31: /home/user/workspace/Axis2WSTest/${env.AXIS2_HOME} does not exist. 
```

我试过做

```
export AXIS2_HOME=/home/user/Desktop/Axis2-1.0 
```

它将 var 绑定正确，但仍然出现相同的错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:22:30.973

在axis2文件夹的/bin文件夹中使用setenv.sh

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-25T12:05:30.917

你只需要设置你的 AXIS2_HOME 变量，你可以这样做：

```
AXIS2_HOME=path_to_axis_bin_folder ant jar.server 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T22:36:35.717

我遇到了同样的错误。我关闭了eclipse，设置了AXIS2_HOME环境变量，重新打开了eclipse，就可以成功构建了。设置说明位于此处的 Apache Axis2 安装指南：http: [//axis.apache.org/axis2/java/core/docs/installationguide.html#standalone1](http://axis.apache.org/axis2/java/core/docs/installationguide.html#standalone1)

如果链接失效：

> 下载 Axis2 Standard Binary Distribution 并将其解压缩到一个方便的位置，以便该发行版位于其自己的目录中。将环境变量 AXIS2_HOME 设置为 Axis2 的提取目录的路径名（例如：/opt/axis2-1.6.2）。Linux 用户也可以运行 AXIS2_HOME/bin 目录中的 setenv.sh 文件，将 AXIS2_HOME 环境变量设置为 Axis2 类路径。

# php - 如何仅在单个页面可见时加载数据？

> ID：13681170
> 
> 赞同：-1
> 
> 时间：2012-12-03T10:19:43.093
> 
> 标签：php, javascript, jquery, mysql, jquery-mobile

我有一个小的**jQuery 移动**网站，我想在其中可视化一些数据（我用 D3 做到了）。该网站有**多个页面**（用 制作`<div data-role="page" id="...">...</div>`）。由于我有很多数据要加载（来自服务器的 json），我**只想加载用户当前看到的内容**。即，如果他单击第 2 页（通过 Button），我只想加载第 2 页所需的数据（而不是其他 10 页的所有数据）。我发现了几个 jQuery**事件**（pageshow 等）——但所有这些事件仅在第一次创建主页时才被捕获。我也想过只加载它，当用户点击一个按钮（链接）时，但如果他直接导航到page2呢？

任何**建议**将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:28:51.847

我认为使用 AJAX 是你最好的选择。您可以在您的 url 中使用 # 来跟踪每个“页面”，例如 YOUR_URL#page_2。

如果用户直接导航到该页面，它将呈现该页面。否则，如果他转到主页，它将呈现 #page_1 而不是 #page_2 或 #page_3.. 以此类推。

希望我理解你的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T11:53:00.793

我发现了：

```
$('#pageTag').bind('pageshow', function() {
   $.ajax({
  url: "getData.php"
   }).done(function( data ) {
  alert( "response from server: " + data);
   });
} 
```

这里的问题是，每次加载页面时都会调用它。所以，如果用户向后和第四次导航，它每次都会加载......我在[这里](http://forum.jquery.com/topic/page-load-event)找到了一些提示，但不是我的第二个问题的解决方案......

任何提示将不胜感激。谢谢。

# svg - 相对于其中心操作/创建 SVG

> ID：13681173
> 
> 赞同：0
> 
> 时间：2012-12-03T10:19:56.233
> 
> 标签：svg

我想确定 SVG 的中心，以便轻松操作多个 SVG。

我正在尝试制作基本多边形（3 到 8 边）的多个示例，并很快意识到我要么自己制作，这涉及大量数学，要么我可以从维基百科中提取当前的。前者的问题是从 Sketchup 翻译坐标需要花费大量时间。后者的问题在于它们的方向不同且大小不同。

我知道您可以变换、缩放和旋转 SVG，但我需要知道 SVG 中心的坐标。我怎样才能找到这个，所以我可以设置通用操作？

拿`transform="rotate(degrees x y)"`，我需要知道中心来完成这个。

[JS Fiddle](http://jsfiddle.net/chrisfrisina/2BBjy/) 在这里，我想将所有中心设置为相同，然后将它们缩放到相同的高度和宽度，并可能单独旋转它们，使它们都有一个平底，而不是一个顶点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:05:40.163

你的问题的通用答案并不明显......

对于多边形，尤其是凸多边形，它可能更简单：您可以通过计算路径每个点的 x 和 y 坐标的最大值和最小值来迭代路径并找到它的边界框。

然后您可以确定形状的中心是边界框的中心。

另一种方法是在您估计为中心的位置放置一个不可见元素（对于复杂的形状，“中心”的概念可以是可变的），并获取其坐标以找出中心的位置。特别是用于旋转目的：您可能希望围绕可能不是几何中心的特定点进行此旋转。

# android - 如何通过钛机器人中的键盘写阿拉伯语？

> ID：13681176
> 
> 赞同：0
> 
> 时间：2012-12-03T10:20:00.777
> 
> 标签：android, titanium, appcelerator, font-family

我正在使用 Titanium sdk 版本 2.1.1 和 android sdk 2.2，我正在尝试在文本区域中用阿拉伯语写一些东西。我通过添加字体和其他多种方式进行了尝试，但没有在电话中显示阿拉伯语。如果您有任何解决方案，请提供帮助。阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:12:30.207

通过这个钛社区链接。阅读所有评论，您会有所了解

[http://developer.appcelerator.com/question/124533/utf-8--unreadable-characters-in-tableview](http://developer.appcelerator.com/question/124533/utf-8--unreadable-characters-in-tableview)

# c# - C# Oracle ODP.net 定期查询导致 ORA-00604

> ID：13681178
> 
> 赞同：0
> 
> 时间：2012-12-03T10:20:07.500
> 
> 标签：c#, oracle, odp.net

我需要在函数中每秒执行相同的查询`GetStuff`，但是在一两分钟后 Oracle 抛出 ORA-00604 并用完游标，我想我需要在返回结果后以某种方式关闭打开的游标。但是我不喜欢每次需要查询时都重新连接的想法，我的代码如下：

```
public MyStuff GetStuff(string paramValue)
{
    OracleCommand command = connection.CreateCommand();
    command.CommandText = "select XXX from YY where param = ? ";
    command.Parameters.Add(":param ", OracleDbType.Varchar2).Value = paramValue;
    IDataReader reader = command.ExecuteReader();
    while (reader.Read())
    {
       ...
    }
    command.Dispose();
    return stuff;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:23:50.060

reader 还需要处理：

```
public MyStuff GetStuff(string paramValue)
{
    using (OracleCommand command = connection.CreateCommand())
    {
        command.CommandText = "select XXX from YY where param = ? ";
        command.Parameters.Add(":param ", OracleDbType.Varchar2).Value = paramValue;
        using (IDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
            ...
            }
        }
        return stuff;
    }
} 
```

查看[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)，这是与 IDisposables 交互的强烈建议的方式。

# iphone - 在 iPhone 的菜单中打开时，取消按钮无法正常运行

> ID：13681181
> 
> 赞同：0
> 
> 时间：2012-12-03T10:20:18.190
> 
> 标签：iphone, objective-c, ios, ios6

我正在下载一个文件并尝试在一些支持它的现有应用程序中打开它。

我通过调用以下方法在选项操作表中显示打开：

```
[documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

它在所有 iOS 版本上正确显示在菜单中打开，但我必须多次点击取消菜单才能使其消失。

如果我将方法的第二个参数从 self.view 更改为 self.view.window，那么该按钮适用于 iOS < iOS6，但对于 iOS 6，它甚至不会在菜单中显示打开。

有什么方法可以让按钮和在菜单中打开都可以工作吗？

我在互联网上搜索n还没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:52:42.423

通过类似代码解决问题

```
if(ios6)
{
[documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
}
else
{
[documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view.window animated:YES];
} 
```

# django - 使用 Nginx 和自定义服务提供静态文件。点云

> ID：13681183
> 
> 赞同：0
> 
> 时间：2012-12-03T10:20:20.423
> 
> 标签：django, nginx, dotcloud

我在 Dotcloud 上部署了我的 Django 应用程序。

我正在使用带有 Gevent 和 django-socketio 的 websockets，所以我使用了自定义服务。目前，我仍在使用“runserver_socketio”来使其正常工作。

现在，我想使用 Nginx 来提供我的静态文件。我发现了这个：[https ://github.com/dotcloud/nginx-on-dotcloud](https://github.com/dotcloud/nginx-on-dotcloud)

我尝试使用它。这是我的 dotcloud.yml：

```
 www:
       type: custom
       buildscript: nginx/builder
       processes:
          app: /home/dotcloud/env/bin/python myproject/manage.py runserver_socketio 0.0.0.0:$PORT_WWW
          nginx: nginx
       ports:
          www: http
       systempackages:
          - libevent-dev
          - python-psycopg2
          - libpcre3-dev
     db:
         type: postgresql 
```

我在我的应用程序的根目录中添加了文件夹“nginx”。

我还在安装后的末尾添加了：

```
 nginx_config_template="/home/dotcloud/current/nginx/nginx.conf.in"

         if [ -e "$nginx_config_template" ]; then
               sed > $HOME/nginx/conf/nginx.conf < $nginx_config_template    \
               -e "s/@PORT_WWW@/${PORT_WWW:-42800}/g"
         else
               echo "($nginx_config_template) isn't there!!! Make sure it is in the correct location or else nginx won't be setup correctly."
         fi 
```

但是当我去我的应用程序时，在我推送它之后，我得到了错误：

```
 403 Forbidden, nginx/1.0.14 
```

Nginx 确实提供错误页面 404。

所以我不知道为什么，但我无法再访问我的应用程序了。您对如何使用 Nginx 设置我的应用程序有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:18:47.047

我认为您的问题是您有两个不同的进程争夺 http 端口（80）。一次只能在端口 80 上运行一个进程。大多数人通过让 nginx 在端口 80 上运行来解决这个问题，然后将所有流量反向代理到运行在不同端口上的另一个进程。这对你不起作用，因为 nginx 不支持网络套接字。所以这意味着您需要在 80 以外的端口上运行 nginx 或 django 应用程序。这也不理想。

此时，您还有另外两个选择

1.  使用 CDN，将所有文件放在 Amazon S3 上，然后从那里（或云端）提供它们。

2.  使用 dotCloud 的静态服务，这将是一个单独的服务，只为静态文件提供服务。这是你的`dotcloud.yml`样子。

点云.yml

```
www:
   type: custom
   processes:
      app: /home/dotcloud/env/bin/python myproject/manage.py runserver_socketio 0.0.0.0:$PORT_WWW
   ports:
      www: http
   systempackages:
      - libevent-dev
      - python-psycopg2
      - libpcre3-dev
 db:
     type: postgresql
 static:
     type: static
     approot: static_media 
```

基本上，它添加了一个名为 static 的新服务，而这个新服务正在项目的一个名为 static_media 的目录中查找您的静态文件，该目录位于项目的根目录中。

如果您使用静态服务，则需要从静态服务获取 URL，并在 django 中适当地设置您的 STATIC_URL `settings.py`。

此设置的另一个问题是，如果您使用的是 django 的 static_files 应用程序。Django 的静态文件应用程序会将所有静态媒体复制到一个公共位置。这不适用于静态服务，因为静态服务是独立的，并且很可能与您的其他服务位于不同的主机上，因此您需要手动将文件复制到您自己的公共 static_media 目录中。

有关 dotCloud 静态服务的更多信息，请参阅以下文档：[http ://docs.dotcloud.com/0.9/services/static/](http://docs.dotcloud.com/0.9/services/static/)

由于我提到的选项 2 的问题，我建议使用选项 1。如果您使用类似[https://github.com/jezdez/django_compressor](https://github.com/jezdez/django_compressor)的东西，这样做非常容易。它可以为您将您的文件发送到 s3。

# c++ - 自动使用无效

> ID：13681186
> 
> 赞同：1
> 
> 时间：2012-12-03T10:20:28.720
> 
> 标签：c++, c++11, auto

在这段代码中：

```
for ( ;(auto i = std::find(some_string.begin(),some_string.end(),'%')) != some_string.end();)
    {

    } 
```

我从 gcc 4.7.1 收到错误：

```
error: invalid use of 'auto'| 
```

任何想法为什么？那不应该被正确编译吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T10:28:05.980

我认为这与`auto`. 您只是不能在随机位置声明变量，例如这也不会编译 - 相当于您尝试做的事情，但没有`auto`：

```
int main() {
  for ( ; (int i = 0) != 1; ++i)
    ;   
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:51:04.733

如果这是在一个循环中，您将只能找到第一个 '%'。您需要从 i 继续搜索，而不是 some_string.begin() 才能找到后续的 '%'。

```
auto i = std::find(some_string.begin(), some_string.end(), '%'));
while (i != some_string.end()) {
    // Your code here.

    i = std::find(i, some_string.end(), '%'));  // Find next '%'.
} 
```

# javascript - 如何使用 jQuery 的 trim() 函数

> ID：13681187
> 
> 赞同：16
> 
> 时间：2012-12-03T10:20:29.277
> 
> 标签：javascript, jquery, trim

正如在堆栈上的许多问题中所讨论的那样 - IE 8 不会接受`.trim()`，但 jQuery 框架会处理这些问题。

我不知道如何翻译我的函数以使用该版本的修剪（我以为我已经在使用 jQuery），有人可以建议吗？这是我的代码：

```
$('input').val(function(index, val){
    return val.replace('Please Select', '').trim();
}); 
```

这旨在将字符串替换为空。

我试过了：

```
$('input').val(function(index, val){
    return val.replace('Please Select', '')$.trim();
}); 
```

但这不好。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-03T10:21:58.733

```
$.trim(val.replace('Please Select', '')) 
```

[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T10:25:48.870

IE8 没有原生`trim`方法，一般我只是扩充原型：

```
if (!String.prototype.trim)
{
    String.prototype.trim = function()
    {
        return this.replace(/^\s+|\s+$/g,'');
    };
} 
```

这是修剪字符串的最短正则表达式，但我听说它`.replace(/^\s\s*/,'').replace(/\s*\s$/,'')`（略微）更快......选择是你的

如果你真的想为此使用 jQuery，当然，你必须让目标字符串成为被调用方法的上下文（`$.trim`在`$`=== jQuery 对象上调用方法），所以让 String 成为 jQ 对象：

```
$('  foo bar  ').trim();//returns "foo bar"
//compared to augmented prototype:
'   foo bar  '.trim();//returns "foo bar" 
```

增强原型的好处是您没有创建新 jQuery 对象的额外开销，而使用原型方法依赖于 JS 将字符串包装在本机 String 对象中并将该方法应用于该对象。基本上，它是相同的操作，但它*应该*稍微高效一些，因为 jQuery 对传递给 jQuery 构造函数 ( `$()`)的任何字符串进行了一堆检查

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T10:23:53.993

尝试这个：

```
$.trim(val.replace('Please Select', '')); 
```

这是文档中的[Trim()](http://api.jquery.com/jQuery.trim/)条目。

# java - 使用 AsyncTask 进行安卓网络连接

> ID：13681189
> 
> 赞同：3
> 
> 时间：2012-12-03T10:20:38.103
> 
> 标签：java, android, tcp, android-asynctask, telnet

我在使用时遇到了一些麻烦，`AsyncTask`因为我以前从未遇到过它，也不知道我在用它做什么。

基本上我正在关闭，因为我试图在主类上运行连接。有人可以帮我添加`AsyncTask`到代码中：

```
package com.smarte.smartipcontrol;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class IPControl extends Activity {

  private Socket socket;
  private String serverIpAddress;
  private static final int REDIRECTED_SERVERPORT = 32;
  public PrintWriter out;
  public BufferedReader in ;

    @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        serverIpAddress = intent.getStringExtra(IPEntry.ACTUALSMARTIP);
        createConnection();

      }

  public void getModel(View view) {
    try {
      out.println("[m\r\n");
      //System.out.print("root\r\n");
      while (! in .ready());
      String textStatus = readBuffer();

    } catch (IOException e) {}
  }

  public void createConnection() {
    try {
      InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
      socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
    } catch (UnknownHostException e1) {
      e1.printStackTrace();
    } catch (IOException e1) {
      e1.printStackTrace();
    }
    try {
      out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true); in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
      while (! in .ready());
      readBuffer();
      out.println("root\r\n");
      //System.out.print("root\r\n");
      while (! in .ready());
      readBuffer();
      out.println("root\r\n");
      //System.out.print("root\r\n");
      while (! in .ready());
      readBuffer();
    } catch (IOException e) {}

    //R.id.textStatus
  }

  private String readBuffer() throws IOException {
    String msg = "";

    while ( in .ready()) {
      msg = msg + (char) in .read();
    }
    //System.out.print(msg);
    if (msg.indexOf("SNX_COM> ") != -1) return msg.substring(0, msg.indexOf("SNX_COM> "));
    else return msg;
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:29:03.277

通过这个简单的教程来获得关于 AsyncTask 是什么以及如何使用它的良好基础：

[https://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](https://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

然后尝试修改您的代码以使用异步任务。如果您遇到问题，请回到这里 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:28:12.713

只是一个简单的例子，它看起来像：

```
public class IPControl extends Activity {
    private ProgressDialog pd = null;
    private String data = null;
    private Socket socket;
    private String serverIpAddress;
    private static final int REDIRECTED_SERVERPORT = 32;
    public PrintWriter out;
    public BufferedReader in ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        try{   
            this.pd = ProgressDialog.show(this, "Loading..", "Please Wait...", true, false);
            new AsyncAction().execute();

        }catch (Exception e) {
            e.printStackTrace();
        }
    }

    private class AsyncAction extends AsyncTask<String, Void, String> {
        protected Void doInBackground(String... args) { 
            try {
                InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
                socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
            } catch (UnknownHostException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            try {
                out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                while (! in.ready());
                readBuffer();
                out.println("root\r\n");
                //System.out.print("root\r\n");
                while (! in .ready());
                readBuffer();
                out.println("root\r\n");
                //System.out.print("root\r\n");
                while (! in .ready());
                String msg = "";

                while (in.ready()) {
                    msg = msg + (char) in .read();
                }
            } catch (IOException e) {}

        return null;//returns what you want to pass to the onPostExecute()
    }

    protected void onPostExecute(String result) {
        //resultis the data returned from doInbackground
        IPControl.this.data = result;

        if (IPControl.this.pd != null) {
            IPControl.this.pd.dismiss();
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:24:41.323

通过检查文档[here](http://developer.android.com/reference/android/os/AsyncTask.html) ..

您需要将创建连接部分放在`doInBackground`.. 中，然后在`onPostExecute`执行任何您想要更新 ui 的操作中。

# bash - 引号中的差异变量（在命令内部）

> ID：13681192
> 
> 赞同：0
> 
> 时间：2012-12-03T10:20:45.790
> 
> 标签：bash, variables, command, quotes, dereference

我在不同的环境中运行我的脚本，因此我将要启动的程序的路径和名称存储在变量中`$CreateSequenceDictionary`。

该程序使用参数`R=`，`O=`因此我将整个命令放在引号“”中。没有这些，程序将在没有任何参数的情况下启动。

现在我的问题是：`$reference`我不想传递这个变量的内容。我试过这个：

```
"java -jar $CreateSequenceDictionary R=$reference O=output" >mlogfile 
```

和许多变体（例如 `` "" eval \）都没有成功。

请问，我应该如何调整我的命令，以便我可以运行存储在变量中的程序，而参数存储在变量中？

编辑：如果我应该在终端中使用命令，它看起来像这样：

```
 java -jar /path/CreateSequenceDictionary.jar R=input O=output 
```

但是，我想从变量中获取程序的名称以及从变量中获取输入文件的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:40:24.263

您可以在没有周围引号的情况下执行此操作。

```
java -jar $CreateSequenceDictionary R=$reference O=output > mlogfile 
```

Bash 将在运行命令之前扩展变量。

如果你想有条件地包含`R=`and`O=`选项，你可以尝试这样的事情：

```
CreateSequenceDictionary="your_Program"
r_option ="$reference"
o_option="output"

arguments=()
[[ "$r_option" ]] && arguments+=("$r_option")
[[ "$o_option" ]] && arguments+=("$o_option")

java -jar $CreateSequenceDictionary "${arguments[@]}" > mlogfile 
```

这会即时构建附加参数并跳过相关`*_option`变量为空的参数。

# ruby-on-rails-3 - 无法使用 Capybara 登录 ActiveAdmin/Devise

> ID：13681199
> 
> 赞同：4
> 
> 时间：2012-12-03T10:21:10.963
> 
> 标签：ruby-on-rails-3, testing, login, capybara, activeadmin

我第一次尝试 ActiveAdmin 并让它在浏览器中运行。但是，我无法使用 Capybara 登录进行集成测试。我已经尝试过填写表格方法以及存根登录。

例如

```
it "allows user via capybara login" do
  user = AdminUser.create(email: 'test@example.com', password: 'opensesame')
  visit '/admin/login'
  fill_in 'admin_user_email', with: user.email
  fill_in 'admin_user_password', with: user.password
  click_button 'Login'
end 
```

给出错误消息（帖子末尾的完整跟踪）

```
ActionView::Template::Error: wrong number of arguments (0 for 1)
/home/mike/ptbase/spec/support/request_helpers.rb:11:in `login'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/view_helpers/display_helper.rb:14:in `display_name' 
```

我尝试了[Joe's Notes给出的存根方法](http://simple10.com/rspec-capybara-devise-login-tests/)

```
# spec/support/request_helpers.rb
require 'spec_helper'
include Warden::Test::Helpers

module RequestHelpers
  def create_logged_in_user
    user = FactoryGirl.create(:admin_user, password: 'opensesame')
    login(user)
    user
  end

  def login(user)
    login_as user, scope: :user
  end
end 

# spec/features/patient_features_spec.rb
require 'spec_helper'
include RequestHelpers

feature "Patients" do
  let(:authed_user) { create_logged_in_user }

  it "should allow access" do
    visit admin_dashboard_path(authed_user)
    save_and_open_page
    # should be good!
  end
end 
```

但这会打开一个页面，上面写着“您需要先登录或注册才能继续。”

我正在使用 Rails 3.1.9、ActiveAdmin 0.5.0 和 Capybara 2.0.1。我确信必须有一个简单的方法来解决这个问题......显然登录是集成测试的基础......但我似乎找不到它！

上述错误的完整回溯：

```
ActionView::Template::Error: wrong number of arguments (0 for 1)
/home/mike/ptbase/spec/support/request_helpers.rb:11:in `login'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/view_helpers/display_helper.rb:14:in `display_name'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element.rb:175:in `method_missing'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/utility_nav.rb:21:in `build_current_user'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/utility_nav.rb:13:in `build'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:30:in `block in build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:92:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:26:in `build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:39:in `insert_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/header.rb:26:in `build_utility_navigation'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/header.rb:13:in `build'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:30:in `block in build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:92:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:26:in `build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:39:in `insert_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/pages/base.rb:49:in `build_header'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/pages/base.rb:40:in `block (2 levels) in build_page'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:31:in `block in build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:92:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:26:in `build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:39:in `insert_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:18:in `div'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/pages/base.rb:39:in `block in build_page'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:92:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/pages/base.rb:38:in `build_page'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/views/pages/base.rb:10:in `build'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:30:in `block in build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:92:in `with_current_arbre_element'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:26:in `build_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/element/builder_methods.rb:39:in `insert_tag'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/app/views/active_admin/page/index.html.arb:1:in `block in __home_mike__rvm_gems_ruby_______p____perf_gems_activeadmin_______app_views_active_admin_page_index_html_arb___526514329_111865000'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:45:in `instance_eval'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/arbre-1.0.1/lib/arbre/context.rb:45:in `initialize'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/app/views/active_admin/page/index.html.arb:1:in `new'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/app/views/active_admin/page/index.html.arb:1:in `__home_mike__rvm_gems_ruby_______p____perf_gems_activeadmin_______app_views_active_admin_page_index_html_arb___526514329_111865000'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/template.rb:145:in `block in render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications.rb:125:in `instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/template.rb:143:in `render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `block in instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/template_renderer.rb:18:in `render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/renderer.rb:36:in `render_template'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_view/renderer/renderer.rb:17:in `render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/rendering.rb:110:in `_render_template'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/rendering.rb:88:in `render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/rendering.rb:16:in `render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/home/mike/.rvm/rubies/ruby-1.9.3-p194-perf/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activerecord-3.2.9/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/instrumentation.rb:39:in `render'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activeadmin-0.5.0/lib/active_admin/page_controller.rb:12:in `index'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/base.rb:167:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/rendering.rb:10:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:447:in `_run__1002248294__process_action__401562286__callbacks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/callbacks.rb:17:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/rescue.rb:29:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `block in instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `instrument'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activerecord-3.2.9/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/base.rb:121:in `process'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/abstract_controller/rendering.rb:45:in `process'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal.rb:203:in `dispatch'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_controller/metal.rb:246:in `block in action'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:73:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:36:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:601:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/head.rb:14:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/flash.rb:242:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/cookies.rb:341:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activerecord-3.2.9/lib/active_record/query_cache.rb:64:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `_run__955233195__call__489842762__callbacks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/railties-3.2.9/lib/rails/rack/logger.rb:32:in `call_app'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `block in call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/tagged_logging.rb:22:in `tagged'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/activesupport-3.2.9/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/actionpack-3.2.9/lib/action_dispatch/middleware/static.rb:62:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/railties-3.2.9/lib/rails/engine.rb:479:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/railties-3.2.9/lib/rails/application.rb:223:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/urlmap.rb:64:in `block in call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `each'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rack-test-0.6.2/lib/rack/test.rb:57:in `get'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/browser.rb:59:in `process'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/browser.rb:37:in `times'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/browser.rb:26:in `submit'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/form.rb:64:in `submit'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/rack_test/node.rb:72:in `click'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/node/element.rb:103:in `block in click'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/node/base.rb:77:in `synchronize'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/node/element.rb:103:in `click'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/node/actions.rb:35:in `click_button'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/session.rb:338:in `block (2 levels) in <class:Session>'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/capybara-2.0.1/lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
/home/mike/ptbase/spec/features/patients_features_spec.rb:19:in `block (2 levels) in <top (required)>'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:114:in `instance_eval'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:114:in `block in run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:254:in `with_around_each_hooks'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example.rb:111:in `run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:388:in `block in run_examples'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:384:in `map'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:384:in `run_examples'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/example_group.rb:369:in `run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `map'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:28:in `block in run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/reporter.rb:34:in `report'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/command_line.rb:25:in `run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:66:in `rescue in run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:62:in `run'
/home/mike/.rvm/gems/ruby-1.9.3-p194-perf/gems/rspec-core-2.12.0/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T18:39:20.397

几天前我遇到了这个问题，通过更改我的 spec_helper 文件中的设置来解决它，另外你可能还需要更新 selinium 和 capybara 版本

```
Capybara.default_driver = :rack_test
Capybara.javascript_driver = :selenium
# You can also change the driver temporarily (typically in the Before/setup and After/teardown blocks):
# Use: Capybara.current_driver = :webkit # temporarily select different driver
# or use :js => true for specific test and it should use selenium by default.
# Or:
# Also see https://github.com/jnicklas/capybara#drivers
Capybara.default_wait_time = 5
Capybara.run_server = true #Whether start server when testing
Capybara.default_selector = :css #default selector , you can change to :css
OmniAuth.config.test_mode = true 
```

# c++ - 使用 boost::any_range 时非常量引用错误的无效初始化

> ID：13681211
> 
> 赞同：0
> 
> 时间：2012-12-03T10:22:03.143
> 
> 标签：c++, boost, iterator

我正在编写一个抽象的包装类，`std::map` `std::vector`为此`boost::unordered_map`，我定义了封装每个容器的单独容器类和这些类共有的抽象基类。另一个名为的类`MyWrapper`重载`[]`运算符并调用抽象基类指针上的方法以获取值。它还创建了一个自定义迭代器`boost::any_range`来迭代这些值。这是我的包装器和基类：

```
class MyClass{

    ContainerBase* cb;

//my custom iterator
    typedef boost::any_range<valT,boost::bidirectional_traversal_tag,
    valT&,std::ptrdiff_t>::iterator iterator;

// other methods and costructor
    const valT& operator[](size_t idx) const{
      return cb->getValueAtkey[idx];
    }

    iterator begin(){
     return cb->getbegin(); 
   }
}

class ContainerBase{
    //other methods
    virtual valT& getValueAtKey(size_t); //calls the underlying container's subscript 
    virtual MyClass::iterator getbegin();
} 
```

我正在使用模板化地图类并在其上定义自定义迭代器，`boost::transform_iterator`用于遍历键值，如下所示：

```
template<class MapType>     //std::map or boost::unordered_map 
class  MapDerived : public ContainerBase{        
 MapType cont;
 typedef boost::transform_iterator<value_extractor,typename MapType::iterator> value_iterator;
 MyClass::iterator getbegin(){ 
 return MyClasss::iterator(
 boost::make_transform_iterator<value_extractor,typename MapType::iterator>(cont.begin(),value_extractor()
          );      
 }    //similar function for end iterators 
} 
```

我在编译时收到以下错误：

```
..boost/range/detail/any_iterator_wrapper.hpp:356: 
error: invalid initialization of non-const reference of type 'valT&' from a temporary of type 'int' 
```

前面有一条`instantiated from here`消息在`return cb->getValueAtkey[idx];`里面`MyClass::operator[]()`

我对提升比较陌生，因此无法弄清楚我哪里出错了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:25:09.010

乍一看，你只有一个`const operator[]()`, 这称为一个非常量`getValueAtKey()`。尝试添加非常量`operator[]()`或添加 const `getValueAtKey()`。

# amazon-web-services - Amazon SNS 和 Amazon SQS 有什么区别？

> ID：13681213
> 
> 赞同：631
> 
> 时间：2012-12-03T10:22:12.477
> 
> 标签：amazon-web-services, amazon-sqs, amazon-sns

我什么时候会使用 SNS 和 SQS，为什么它们总是耦合在一起？

* * *

## 回答 #1

> 赞同：888
> 
> 时间：2012-12-03T22:14:26.627

**SNS**是一个分布式**发布订阅**系统。消息在发布者发送到 SNS 时**被推送给订阅者。**

**SQS**是分布式**排队**系统。消息*不会*推送给接收者。接收者必须从**SQS****轮询或拉取**消息。多个接收者不能同时接收消息。任何一个接收者都可以接收、处理和删除消息。其他接收者稍后不会收到相同的消息。与 SNS 不同，轮询在 SQS 中的消息传递中固有地引入了一些延迟，后者将消息立即推送给订阅者。SNS 支持多个端点，例如电子邮件、SMS、HTTP 端点和 SQS。如果您希望未知数量和类型的订阅者接收消息，则需要 SNS。

 **您不必总是耦合 SNS 和 SQS。除了 SQS，您还可以让 SNS 向电子邮件、SMS 或 HTTP 端点发送消息。将 SNS 与 SQS 耦合具有优势。您可能不希望外部服务与您的主机建立连接（防火墙可能会阻止从外部到您的主机的所有传入连接）。

您的端点可能会因为大量消息而死亡。电子邮件和 SMS 可能不是您快速处理消息的选择。通过将 SNS 与 SQS 耦合，您可以按照自己的节奏接收消息。它允许客户端离线，容忍网络和主机故障。您还可以实现有保证的交付。如果您将 SNS 配置为向 HTTP 端点或电子邮件或 SMS 发送消息，则多次发送消息失败可能会导致消息被丢弃。

SQS主要用于解耦应用程序或集成应用程序。消息可以在 SQS 中存储很短的时间（最长 14 天）。SNS 将多个消息副本分发给多个订阅者。例如，假设您要将应用程序生成的数据复制到多个存储系统。您可以使用 SNS 并将此数据发送给多个订阅者，每个订阅者将其接收到的消息复制到不同的存储系统（[S3](https://en.wikipedia.org/wiki/Amazon_S3)、主机上的硬盘、数据库等）。

* * *

## 回答 #2

> 赞同：356
> 
> 时间：2018-06-14T06:49:52.187

这是两者的比较：

**实体类型**

*   SQS：队列（类似于 JMS）
*   SNS：主题（Pub/Sub 系统）

**消息消费**

*   SQS: Pull Mechanism - 消费者从 SQS 轮询和拉取消息
*   SNS: Push Mechanism - SNS 向消费者推送消息

**用例**

*   SQS：解耦两个应用程序并允许并行异步处理
*   SNS：扇出 - 以多种方式处理相同的消息

**持久性**

*   SQS：如果没有可用的消费者（最多两周），消息将保留一段时间（可配置），因此当消息添加到队列时消费者不必启动。
*   SNS：没有坚持。消息到达时在场的任何消费者都会收到消息并删除消息。如果没有可用的消费者，则在重试几次后消息会丢失。

**消费者类型**

*   SQS：所有消费者通常都是相同的，因此以完全相同的方式处理消息（每条消息由一个消费者处理一次，尽管在极少数情况下可能会重新发送消息）
*   SNS：消费者可能以不同的方式处理消息

**示例应用程序**

*   SQS：作业框架：作业提交给SQS，另一端的消费者可以异步处理作业。如果作业频率增加，可以简单地增加消费者的数量以实现更好的吞吐量。
*   SNS：图像处理。如果有人将图像上传到[S3](https://en.wikipedia.org/wiki/Amazon_S3)，然后为该图像添加水印，创建缩略图并发送*感谢*电子邮件。在这种情况下，S3 可以将通知发布到一个 SNS 主题，三个消费者正在监听它。第一个为图像添加水印，第二个创建缩略图，第三个发送*感谢*电子邮件。他们都收到相同的消息（图像 URL）并并行进行处理。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2019-03-20T13:24:48.017

您可以将**[SNS](https://en.wikipedia.org/wiki/Amazon_Simple_Notification_Service)**视为可以拥有多个订阅者的传统主题。[例如，您可以为一个给定的 SNS 主题（包括Lambda](https://en.wikipedia.org/wiki/AWS_Lambda)和[SQS](https://en.wikipedia.org/wiki/Amazon_Simple_Queue_Service) ）拥有异构订阅者。您还可以使用 SNS 开箱即用地发送 SMS 消息甚至电子邮件。在 SNS 中要考虑的一件事是一次只收到一条消息（通知），因此您无法利用批处理。

**另一方面，**SQS只不过是一个***队列*，您可以在其中存储消息并订阅一个消费者（是的，您可以让 N 个消费者加入一个 SQS 队列，但是考虑到所有消费者都会很快变得混乱，并且更难管理需要至少读取一次消息，因此对于此用例，将 SNS 与 SQS 结合使用会更好，其中 SNS 会将通知推送到 N 个 SQS 队列，并且每个队列只有一个订阅者）来处理这些消息。自 2018 年 6 月 28 日起，[AWS 支持 SQS 的 Lambda 触发器](https://aws.amazon.com/blogs/aws/aws-lambda-adds-amazon-simple-queue-service-to-supported-event-sources/)，这意味着您不再需要**轮询**消息。**

 **此外，您可以在源 SQS 队列上配置 DLQ，以便在发生故障时向其发送消息。如果成功，消息会被自动删除（这是另一个很大的改进），因此您不必担心已经处理的消息会被再次读取，以防您忘记手动删除它们。我建议查看[Lambda Retry Behavior](https://docs.aws.amazon.com/lambda/latest/dg/retries-on-errors.html)以更好地了解它的工作原理。

使用 SQS 的一大好处是它支持批处理。每个批次最多可以包含 10 条消息，因此如果 100 条消息同时到达您的 SQS 队列，那么 10 个 Lambda 函数将启动（考虑 Lambda 的默认自动扩展行为）并且它们将处理这 100 条消息（保留在请注意，这是实践中的快乐路径，更多的 Lambda 函数可能会启动读取少于批处理中的 10 条消息，但您明白了）。但是，如果您将这 100 条相同的消息发布到 SNS，则会启动 100 个 Lambda 函数，从而不必要地增加成本并耗尽您的 Lambda 并发性。

但是，如果您仍在运行传统服务器（如[EC2](https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud)实例），您仍然需要轮询消息并手动管理它们。

您还有**FIFO SQS 队列**，它保证了消息的传递顺序。自 2019 年 11 月起，[还支持 SQS FIFO 作为 Lambda 的事件源](https://aws.amazon.com/about-aws/whats-new/2019/11/aws-lambda-supports-amazon-sqs-fifo-event-source/)

尽管它们的用例有一些重叠，但 SQS 和 SNS 都有自己的亮点。

在以下情况下使用**SNS**：

*   多个订阅者是一项要求
*   开箱即用发送短信/电子邮件很方便

在以下情况下使用**SQS**：

*   只需要一个订阅者
*   分批很重要

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2018-04-18T05:36:02.983

**AWS SNS**是一个发布者订阅者网络，订阅者可以订阅主题，并在发布者发布到该主题时接收消息。

**AWS SQS**是一种队列服务，它将消息存储在队列中。SQS 无法传递任何消息，需要外部服务（lambda、EC2 等）来轮询 SQS 并从 SQS 获取消息。

**SNS 和 SQS**可以出于多种原因一起使用。

1.  可能有不同类型的订阅者，其中有些需要立即传递消息，有些则需要保留消息，以供以后通过轮询使用。请参阅[此链接](https://docs.aws.amazon.com/sns/latest/dg/SendMessageToSQS.html)。

2.  “**扇出模式**”。这是用于消息的异步处理。当消息发布到 SNS 时，它可以将其并行分发到多个 SQS 队列。在发布图像时，在应用程序中并行加载缩略图时，这可能非常有用。请参阅[此链接](https://aws.amazon.com/blogs/aws/queues-and-notifications-now-best-friends/)。

3.  **持久存储**。当要处理消息的服务不可靠时。在这种情况下，如果 SNS 向 Service 推送通知，而该服务不可用，则通知将丢失。因此，我们可以将 SQS 用作持久存储，然后再对其进行处理。

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2014-03-12T04:31:32.847

从 AWS 文档：

> Amazon SNS 允许应用程序通过“推送”机制向多个订阅者发送时间紧迫的消息，从而无需定期检查或“轮询”更新。
> 
> Amazon SQS 是分布式应用程序使用的一种消息队列服务，用于通过轮询模型交换消息，并可用于解耦发送和接收组件，而无需每个组件同时可用。

*[扇出到 Amazon SQS 队列](http://docs.aws.amazon.com/sns/latest/dg/SendMessageToSQS.html)*

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-05-27T20:13:45.003

简单来说，

*   SNS - 使用推送机制向订阅者发送消息，无需拉取。

*   SQS - 它是分布式应用程序用来通过轮询模型交换消息的消息队列服务，可用于解耦发送和接收组件。

一种常见模式是使用 SNS 将消息发布到 Amazon SQS 队列，以可靠地将消息异步发送到一个或多个系统组件。

来自*[Amazon SNS 常见问题](https://aws.amazon.com/sns/faqs/)*的参考。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2021-04-05T05:00:55.373

以下是 AWS 上主要消息传递技术（SQS、SNS、+EventBridge）之间的主要区别。为了选择一个特定的 AWS 服务，我们应该知道一个服务提供的功能以及它与其他服务的比较。

下图总结了此服务之间的主要相似之处和不同之处。

[![在此处输入图像描述](../Images/4f5ad169f2c1ba34555e32c968b56e3f.png)](https://i.stack.imgur.com/XnbkO.jpg)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-22T09:36:12.183

耦合 SQS 和 SNS 的原因之一是数据处理管道。

假设您正在生成三种产品，并且产品 B 和 C 都来自同一个中间产品 A。对于每种产品（即，对于管道的每个部分），您设置：

*   一个计算资源（可能是一个 lambda 函数，或者一个虚拟机集群，或者一个自动缩放的 kubernetes 作业）来生成产品。
*   一个队列（描述需要执行的工作单元），用于跨计算资源划分工作（以便每个工作单元只处理一次，但单独的工作单元可以分别并行和异步处理） .
*   新闻提要（宣布已产生的输出）。

然后安排 B 和 C 的输入队列都订阅 A 的输出公告。

这使得管道在基础设施级别上模块化。与其拥有一个同时生成所有三个产品的单一服务器应用程序，流水线的不同阶段可以利用不同的硬件资源（例如，阶段 B 可能非常占用内存，但其他两个阶段可以使用更便宜的硬件/服务来执行） . 这也使得在不中断其他产品交付的情况下迭代开发一个管道段变得更加容易。****

# java - 从文本文件中读取为 arraylist/hashmap

> ID：13681217
> 
> 赞同：0
> 
> 时间：2012-12-03T10:22:24.247
> 
> 标签：java, file-io, arraylist, hashmap

好的，这是对我必须写的内容的解释：

*   `getBreadInfo`- 将 bread.txt 读入一个数组列表（包含面包名称、$ 和价格），然后分配给一个数组 breadInfo[]，然后将该数组返回给 SandwichApp 以显示面包菜单。
*   `getBread`- 类似于 getBreadInfo，除了它只包含面包名称，并返回另一个数组 bread[] 供 SandwichApp 确定用户选择了哪个面包，因为用户输入与面包相关的数字（索引 + 1），而不是面包姓名。
*   `getMapBreadPrice`- 与上述两个类似，不同之处在于它返回一个包含面包名称（键）和价格（值）对的哈希映射，以便 SandwichApp 找出用户选择的面包的价格。

这就是我写的。只是想知道这是否正确？

```
public class SandwichDB {  
private ArrayList<String> breadsList = null;

public String[] getBreadInfo()
{ 
    breadsList = new ArrayList<>();

        try (BufferedReader in =
                new BufferedReader(
                new FileReader("bread.txt")))
        {
            String line = in.readLine();
            while (line != null)
            {
                String[] elems = line.split("~");
                breadsList.add(elems[0]+ " $" + elems[1]);  
            }

        }
        catch(IOException e)
        {
            System.out.println(e);
            return null;
        }
    String[] breadInfo = breadsList.toArray(new String[]{});
    return breadInfo;
}
public String[] getBread()
{
    breadsList = new ArrayList<>();

        try (BufferedReader in =
                new BufferedReader(
                new FileReader("bread.txt")))
        {
            String line = in.readLine();
            while (line != null)
            {
                String[] elems = line.split("~");
                breadsList.add(elems[0]);  
            }

        }
        catch(IOException e)
        {
            System.out.println(e);
            return null;
        }
        String[] bread = breadsList.toArray(new String[]{});
        return bread;
}
public HashMap<String, String> getMapBreadPrice()
        {
            HashMap<String, String> mapBreadPrice = new HashMap<>();
            String line, elems[];
            try
            {
                FileReader fr = new FileReader("bread.txt");
                BufferedReader br = new BufferedReader(fr);

                while ((line=br.readLine()) != null)
                {
                    elems = line.split("~");
                    mapBreadPrice.put(elems[0], elems[1]);
                }
            }
            catch(IOException e)
            {
                System.out.println(e);
                return null;
            }
            return mapBreadPrice;
        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:27:37.430

第一个`readLine`位于 the 之前`while`，因此不再重复。因此，while 并没有结束。

```
for (;;) {
    String line = in.readLine();
    if (line == null) {
        break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:28:06.207

似乎您正在阅读同一个文件 3 次以构建 3 个结构。您应该通过一次读取文件来构建数据结构。

# uiviewcontroller - 切换到另一个视图，但留在导航控制器中

> ID：13681221
> 
> 赞同：2
> 
> 时间：2012-12-03T10:22:34.187
> 
> 标签：uiviewcontroller, uinavigationcontroller, xamarin.ios

我有一个导航控制器，其中包含有关特定产品的详细信息，其中一个详细信息是产品的小图像。现在我想添加一个按钮，该按钮必须转到带有产品放大图像的视图控制器。

如何使放大的图像与详细信息屏幕位于同一导航控制器上，并作为屏幕翻转的过渡，但标题和标签栏不会翻转。

在导航控制器上添加了两个视图的概览图像。

![在此处输入图像描述](../Images/61b818a47060fe1d9e659505550795c2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:58:05.473

你可以使用类似的东西：

```
 UIView.Transition(this.NavigationController.View, 1f, 
UIViewAnimationOptions.CurveEaseInOut | UIViewAnimationOptions.TransitionFlipFromRight, 
delegate { this.NavigationController.PushViewController(this.ImageViewController, false); }); 
```

让你的图像视图在被推送到导航控制器时翻转，而不是默认转换。ImageViewController 的 title 属性应该与您的详细信息中的相同。

的想法`UINavigationController`是处理多个控制器，因此您不应该通过覆盖视图来对抗它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:58:30.353

将两个视图添加到控制器并为其框架属性设置动画以获得您想要的效果。
请参见下面的示例。

```
using System;
using System.Collections.Generic;
using System.Linq;

using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Drawing;

namespace delete20121203
{
    // The UIApplicationDelegate for the application. This class is responsible for launching the 
    // User Interface of the application, as well as listening (and optionally responding) to 
    // application events from iOS.
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        // class-level declarations
        UIWindow window;

        //
        // This method is invoked when the application has loaded and is ready to run. In this 
        // method you should instantiate the window, load the UI into it and then make the window
        // visible.
        //
        // You have 17 seconds to return from this method, or iOS will terminate your application.
        //
        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            // create a new window instance based on the screen size
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            var ctrl = new MyViewController ();
            var nav = new UINavigationController (ctrl);

            window.RootViewController = nav;

            // make the window visible
            window.MakeKeyAndVisible ();

            return true;
        }
    }

    public class MyViewController : UIViewController
    {
        UIButton _button1;
        UIButton _button2;
        UIView _view1;
        UIView _view2;

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            Title = "Test";

            _view1 = new UIView (View.Bounds);
            _view1.AutoresizingMask = UIViewAutoresizing.All;
            _view1.BackgroundColor = UIColor.White;

            _button1 = UIButton.FromType (UIButtonType.RoundedRect);
            _button1.Frame = new System.Drawing.RectangleF (10, 10, 150, 44);
            _button1.SetTitle ("Click", UIControlState.Normal);
            _button1.TouchUpInside += Button1Click;

            _view2 = new UIView (View.Bounds);
            _view2.AutoresizingMask = UIViewAutoresizing.All;
            _view2.BackgroundColor = UIColor.LightGray;
            RectangleF hideRect = _view2.Frame;
            hideRect.X = hideRect.X + hideRect.Width;
            _view2.Frame = hideRect;

            _button2 = UIButton.FromType (UIButtonType.RoundedRect);
            _button2.Frame = new System.Drawing.RectangleF (10, 10, 150, 44);
            _button2.SetTitle ("Back", UIControlState.Normal);
            _button2.TouchUpInside += Button2Click;

            _view1.Add (_button1);
            _view2.Add (_button2);

            View.Add (_view1);
            View.Add (_view2);
        }

        void Button1Click (object sender, EventArgs e)
        {
            UIView.Animate (.5f, 0, UIViewAnimationOptions.CurveEaseInOut, delegate {
                _view2.Frame = View.Frame;

                RectangleF hideRect = _view1.Frame;
                hideRect.X = hideRect.X - hideRect.Width;
                _view1.Frame = hideRect;
            }, 
            null);
        }

        void Button2Click (object sender, EventArgs e)
        {
            UIView.Animate (.5f, 0, UIViewAnimationOptions.CurveEaseInOut, delegate {
                RectangleF hideRect = _view2.Frame;
                hideRect.X = hideRect.X + hideRect.Width;
                _view2.Frame = hideRect;

                _view1.Frame = View.Frame;
            }, 
            null);
        }
    }
} 
```

# c - C 解析器警告：虚拟对象地址

> ID：13681222
> 
> 赞同：4
> 
> 时间：2012-12-03T10:22:41.330
> 
> 标签：c, visual-studio-2005, warnings

在一个 C 项目中，我处理一个包含所有共享声明的大型头文件。交付给我的最新版本显示了我不理解的解析器警告：

```
1>someheader.h(2487) : warning: Error parsing virtual object addresses specified! Ignoring!
1>someheader.h(2487) : warning: Ignoring XXX_SomeTypename virtual instance name(s) specifed, as no corresponding virtual address specified! 
```

顺便说一句 - 编译器是 Visual Studio 2005。相应的行是 typedef 的最后一行，如下例所示：

```
typedef struct
{
    float member;
} Typename_t; /* @vaddr:XXX_XXX @cycleid:YYY_YYY @vname:XXX_SomeTypename */ 
```

我不知道这个警告是什么意思，通用搜索（SO，google）没有提供*任何*结果。有人可以协助找出那里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:16:54.087

OP 评论说，解析器警告实际上源于第三方软件，该软件在构建步骤中进行了额外的解析，OP 并不知道。

# iis - IIS 7.5：在站点下运行的虚拟目录和应用程序的内部服务器错误

> ID：13681223
> 
> 赞同：0
> 
> 时间：2012-12-03T10:22:43.343
> 
> 标签：iis, asp.net-mvc-4

我正在尝试设置一个 ASP.NET MVC 4 应用程序以在基于 ASP.NET MVC 4 的已配置网站下运行。即我想让一个应用程序在[http://dev.site.local/myApp](http://dev.site.local/myApp)下运行但没有不管我怎么做，如果我将它配置为应用程序或虚拟目录，我总是在尝试访问它时遇到内部服务器错误。

IIS 日志的输出：

```
2012-12-03 10:05:14 127.0.0.1 GET /Ekstranett - 80 - 127.0.0.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.4+(KHTML,+like+Gecko)+Chrome/22.0.1229.94+Safari/537.4 500 19 183 0 
```

有没有人能够协助调试和解决这个最令人沮丧的问题？

编辑：经过彻底的谷歌搜索后，我设法将日志条目解释为无效的配置数据。还在努力工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:19:53.217

罪魁祸首是缺乏适当的权限。我设置了正确的权限，然后一切都解决了。

# objective-c - 无法使用 CoreAnimation 和 CALayers 进行平滑的逐步旋转

> ID：13681226
> 
> 赞同：2
> 
> 时间：2012-12-03T10:22:58.383
> 
> 标签：objective-c, xcode, core-animation, calayer

我试图根据时间旋转具有各种子层的 CALayer。有 UDP 多播接收器将接收新的时间码。我通过计时器获取新时间：

```
 [NSTimer scheduledTimerWithTimeInterval:0.02f
 target:self
 selector:@selector(fetchNewTimeAndRotate)
 userInfo:nil
 repeats:YES]; 
```

CALayer 应该根据时间旋转。就我而言，1.8 秒内旋转一圈。其实我不需要任何动画，我只需要经常设置角度，以便它产生实际的动画。

我试过以各种方式设置图层旋转：

第一次我尝试通过 CATransform3DMakeRotation：

```
CATransform3D rotation1 = CATransform3DMakeRotation([self DegreesToRadians:newAngle], 0.0f, 0.0f, 1.0f);
self.circleLayer.transform=rotation1 
```

第二次尝试是通过动画使用即时旋转：

```
rotation.fromValue = [NSNumber numberWithFloat:[self DegreesToRadians:oldAngle]];
rotation.toValue = [NSNumber numberWithFloat:[self DegreesToRadians:newAngle]];
rotation.duration = 0.0f;
rotation.repeatCount = 0.0f;
rotation.removedOnCompletion = NO; //also used YES here with no effect
[self.circleLayer addAnimation:rotation forKey:@"transform.rotation.z"];
oldAngle=newAngle; 
```

第三次尝试只是为“transform.rotation.z”设置一个角度

```
[self.circleLayer setValue:[NSNumber numberWithFloat:[self DegreesToRadians:newAngle]] forKeyPath:@"transform.rotation.z"]; 
```

上述所有方法都有效，但会导致轮换出现明显的卡顿。我已经尝试在获取和动画长度中使用几种不同的时间。似乎没有什么能摆脱这个问题。使用每 0.02 次自转和 3.6° 角是唯一能为我呈现平滑结果的选项。我在这里犯了一个根本性的错误还是不理解 CoreAnimation 的概念？我知道它是用来制作动画本身的。但我需要它对用户输入做出反应并立即更改。我感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:56:33.240

你的意思是CADisplayLink，不是吗？

DisplayLink 对象通常用于 OpenGL 中基于帧的动画，但它们并不“使用 OpenGL”。创建显示链接并将其附加到您的应用程序以触发绘图是完全有效的。

正如另一位发帖人所说，NSTimer 不是精细控制动画帧的好选择。如果你编写一个程序，只运行一个计时器并测量它，它看起来会很好。但是，计时器取决于您的应用程序是否经常访问事件循环。它们不是抢占式的，如果您的应用程序在计时器应该触发时正忙，它将关闭，甚至错过触发间隔。

如果您继续使用显示链接，您可能需要编写代码来检查从最后一帧经过的时间，并以此计算动画量。这样，如果您丢弃一帧，动画仍然以正确的速度进行（如果您丢弃一帧，那么在下一帧之前经过两倍的时间，因此您使您的对象移动两倍。）

# ruby-on-rails - 当我们在设计中编辑角色名称时如何更改角色名称

> ID：13681227
> 
> 赞同：0
> 
> 时间：2012-12-03T10:23:02.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

我有来自设计的模型用户

```
 belongs_to :role 
```

在这里，我想将角色名称的 id 保存在数据库中，这样如果首先角色是客人，就会涉及到许多用户。稍后，如果管理员将客人编辑为客人，则会出现问题。所以

```
<% if can? :manage, @users %>
<%= f.collection_select :role_id,Role.all, :id, :name ,:prompt => 'Select Role'%> 
<% end%> 
```

像这样工作。我能怎么做？正如我在其他模型中所做的那样，但在设计它的用户模型中它不起作用，

# c++ - 整数值是否应该传递给浮点用户定义的文字？

> ID：13681235
> 
> 赞同：2
> 
> 时间：2012-12-03T10:23:35.630
> 
> 标签：c++, c++11, implicit-conversion, user-defined-literals

我正在玩用户定义的文字（使用 GCC 4.7）。

```
double operator"" _lb(long double n)
{
    return n * 0.453592; // convert pounds to kilos
} 
```

将浮点文字（例如`42.0_lb`）传递给它时效果很好，但是当我尝试传递整数文字（例如`42_lb`）时，我收到以下错误：

> 错误：无法找到数字文字运算符'operator"" _lb'

我的定义不应该`_lb`导致参数之间的隐式转换`long double`（就像使用常规函数一样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:36:02.767

不，这种隐式转换不适用于这种情况。根据 [lex.ext]p3，用户定义的整数文字只能由文字运算符 take`unsigned long long`或原始文字运算符（采用`const char*`）或文字运算符模板处理。

# java - 为什么我不能在我的表单中使用 request.getParameter

> ID：13681242
> 
> 赞同：1
> 
> 时间：2012-12-03T10:24:11.223
> 
> 标签：java, javascript, jsp

我有一个关于使用的问题`request.getParameter()`，我知道它可以使用 request.getParameter 来发布值，是否有必要匹配`request.getParameter`和`<input>`???

我在 HTML 中的原始代码：

```
<INPUT type=submit name="submit" value="download"> 
```

在 JSP 中：

```
String start = request.getParameter("submit"); 
```

现在我想更改一个按钮并使用 div

```
div name="submit"id="submit" class="btnStyleFunc"
onclick="document.body.style.cursor='wait';this.disabled='true';
document.getElementById('form').submit();"> 
```

但它不起作用，任何人都可以帮助我吗？

* * *

现在我使用下面的方法，但是又出现了一个问题……动作并没有停止……

```
String start = request.getParameter("submit1");

<input type=hidden name=submit1 value=download>
<div class="btnStyleFunc" onclick="document.body.style.cursor='wait';
this.disabled='true';document.getElementById('form').submit();"> 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:29:42.287

单击的提交按钮是一个成功的表单控件，其名称/值对将在表单数据中提交给服务器。

如果您使用 JavaScript 提交表单，则没有单击的提交按钮，因此不会出现在数据中。A`div`不能有 a`name`也不是表单控件——它不是提交按钮，即使它触发了提交表单的 JavaScript。

在 JavaScript 中使用 div 也会破坏以下形式：

*   任何不使用鼠标/触控板/等来导航页面的人（在交互元素中切换时，div 不会获得焦点）
*   任何禁用 JavaScript 的人
*   在表单模式下使用屏幕阅读器的任何人（div 元素不是表单控件）。

请改用真正的提交按钮。

# java - 使 Null 对象不可变的任何标准模式或策略

> ID：13681246
> 
> 赞同：2
> 
> 时间：2012-12-03T10:24:19.647
> 
> 标签：java, design-patterns

在java中，我们更喜欢`null object`模式而不是在所有引用中使用非空检查来混乱代码。最近我们遇到了一个`null object`通过保留`singleton`对象来使用的问题。
假设我们有`Person`如下类

```
public class Person {
 public String firstName;
 public String lastName;
 public boolean isNull() {
  return false;
 }
 public static final Person NULL = new Person() {
  public boolean isNull() { return true; }  
 }
} 
```

在这种情况下，尽管我已将`NULL`object 声明为 final，但我仍然可以修改成员变量及其全局可用。

```
Person nullRef = Person.NULL;
Person.NULL.firstName = "sample";
System.out.println(nullRef.firstName); 
```

在这种情况下，它只有三个字段，我可以通过覆盖这三个 getter 方法来解决可变性问题。但实际上会有很多字段很难覆盖所有相应的 getter 方法。
是否有任何标准模式或策略来解决`NULL`对象中的这种可变性问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:33:35.667

使用 Google Guava 库中的 Optional

```
Optional<Integer> possible = Optional.of(5);
possible.isPresent(); // returns true
possible.get(); // returns 5 
```

引用库文档：

> 除了通过给 null 命名来增加可读性之外，Optional 的最大优点是它的 idiot-proof-ness

这是处理空对象的更自然的方式

[可选的谷歌番石榴](http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:50:03.050

您需要有两个级别的接口：一个用于不可变部分（仅 getter 和不可变方法），另一个用于扩展不可变接口的可变部分。然后需要重构代码以仅在所有相关位置使用最严格的接口。

所以

```
public interface ImmutablePerson {
  final String getFirstName();
}

public interface MutablePerson extends ImmutablePerson {
  final void setLastName(final String newName);
} 
```

是的，现在 MutablePerson “是” ImmutablePerson，但仅在用作一个时：）

此外，isNull 检查表明您需要更多地考虑控制反转。

具体来说：

当你发现自己在写代码时

```
if (!person.isNull()) {
  person.setLastName("Foo");
} 
```

相反，您应该只使用 Null 对象并将其视为已插入的中性元素。像这样：

第一的：

```
final Person NullPerson = new Person() {
  void setLastName(final String newName) {
    // Do nothing, this is a neutral (Null) object
  }
} 
```

...然后稍后：

```
// Never need to check for isNull ever again - null objects just decide to ignore your request
person.setLastName("Foo"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:45:05.350

*   您需要将所有字段设为“私有”，以便除 getter 代码外无法访问这些字段。
*   您需要修改“setter”方法而不是 getter 方法以使其不可变。例如。

    public String setFirstName(String name){ if(!isNull()){ firstName = name; } }

# mysql - MySQL案例中的多个插入语句

> ID：13681248
> 
> 赞同：1
> 
> 时间：2012-12-03T10:24:21.863
> 
> 标签：mysql, insert, case

我正在尝试从 MySQL 表中选择一个值（id）并在更新语句中使用它 - 所有这些都在 MySQL 查询中。select由2部分组成：如果id存在则返回；如果没有，则完成 2 次插入并返回 id。

我有以下查询：

```
SELECT 
    (CASE a.id WHEN '' THEN (
        DELIMITER //
        INSERT INTO xxxx (item_id, date_created, date_modified) VALUES (3313, NOW(), NOW())//
        INSERT INTO yyyy (item_id, locale_id, value, date_created, date_modified) VALUES(LAST_INSERT_ID(), 2, TRIM(SUBSTRING_INDEX('some text: 250 x 46 x 584', ':', 1)), NOW(), NOW())//
        SELECT c.id FROM xxxx c JOIN yyyy d WHERE c.item_id=3313 AND d.value='some text' LIMIT 1
    ) ELSE a.id END
) AS trans_ref_id
FROM xxxx a JOIN yyyy b ON a.id = b.item_id
WHERE b.value='some text' 
```

当我运行它时，我收到以下错误：

SQL 错误 (1064)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 ') ELSE a.id END ) as trans_ref_id FROM xxxx' 附近使用正确的语法

我在这里有错误的方法吗？这个错误来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:27:50.863

你不能用 SQL 做到这一点。您需要使用[游标](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)。该手册有一个示例供您查看。可能最好把它放在一个存储过程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:28:26.833

您的创意尝试不符合[SELECT+INSERT 语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)，即：

```
INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE col_name=expr, ... ] 
```

# git - Bitbucket 存储库与本地存储库不匹配

> ID：13681250
> 
> 赞同：2
> 
> 时间：2012-12-03T10:24:28.073
> 
> 标签：git, bitbucket

我似乎无法通过谷歌、stackoverflow 等找到这个问题的答案甚至任何相关材料。

我最近开始使用 Git。我在本地机器上创建了一个 Git 存储库，还在 Bitbucket 上设置了一个远程存储库。我在本地 Git 存储库中添加了 Bitbucket 存储库作为远程存储库，并提交并推送了本地存储库的内容。到目前为止没有问题，所有文件和目录都出现在 Bitbucket repo 中。

然后我在本地进行了一些更改 - 我创建了一个目录并将两个现有目录移动到其中。然后我提交了更改并推送到 Bitbucket。

问题是我的 Bitbucket 存储库，以及正确地将目录移动到新目录中，还将它们的副本保存在它们的旧位置。为什么是这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:17:06.843

当您想要在 git 存储库中移动资源时，我建议您使用 a，而不是 a `git add -u`（请参阅“[和之间有](https://stackoverflow.com/questions/2190409/whats-the-difference-between-git-add-and-git-add-u/2190440#2190440)[什么区别？ ”）。`git add .``git add -u`](https://stackoverflow.com/questions/2190409/whats-the-difference-between-git-add-and-git-add-u/2190440#2190440)[`git mv`](http://git-scm.com/docs/git-mv)

请参阅“[目的是`git-mv`什么？](https://stackoverflow.com/questions/1094269/whats-the-purpose-of-git-mv) ”。

# c# - 从 html 中获取值

> ID：13681253
> 
> 赞同：-2
> 
> 时间：2012-12-03T10:24:44.420
> 
> 标签：c#, regex

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我不太擅长正则表达式。所以这是我的问题：我怎样才能获得和之间的所有 `<td><a href="`链接`">`？

```
<td><a href="link"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:26:55.113

使用[HTML Agility Pack](http://html-agility-pack.net)解析 HTML 文件：

使用 DLL 后，您可以使用如下代码获取值：

```
linkNode.Attributes["href"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:31:50.547

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(@"<td><a href=""link"">");

var links = doc.DocumentNode.SelectNodes("//a[@href]")
            .Select(a => a.Attributes["href"].Value)
            .ToList(); 
```

# visual-studio-2010 - 如何在当前活动文件中显示 vs 2010 代码分析警告？

> ID：13681255
> 
> 赞同：0
> 
> 时间：2012-12-03T10:24:45.323
> 
> 标签：visual-studio-2010

我们在当前项目中使用 Visual Studio 代码分析。随着时间的推移，我们积累了相当多的警告。

我们想做的是随时清理警告，而不是大量威胁它们。

那么有没有办法显示任何当前活动文件的代码分析警告？与蓝色“摆动”小东西编译错误的方式相同吗？

还是有任何插件/工具？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:36:05.030

我知道 ReSharper 可以在这方面提供帮助：

> 代码质量分析 C#、VB.NET、XAML、ASP.NET、ASP.NET MVC、JavaScript、CSS、HTML 和 XML 中的即时代码质量分析。如果您的代码包含错误或可以改进，ReSharper 会立即告诉您。

[功能列表](http://www.jetbrains.com/resharper/features/index.html)

# maven - Jbehave Maven 异常

> ID：13681264
> 
> 赞同：1
> 
> 时间：2012-12-03T10:25:13.617
> 
> 标签：maven, build, hudson, testcase, jbehave

我已将 Hudson 中的 Jbehave 测试集成为 Maven 目标，但每当我通过 Hudson-web-interface 运行测试时，都会出现以下错误

```
 BUILD FAILURE
 [INFO] ------------------------------------------------------------------------
 [INFO] Total time: 33.609s
 [INFO] Finished at: Mon Dec 03 15:08:52  2012
 [INFO] Final Memory: 26M/81M
 [INFO] ------------------------------------------------------------------------
 [INFO] o.h.m.e.h.MavenExecutionResultHandler - Build failed with exception(s)
 [INFO] o.h.m.e.h.MavenExecutionResultHandler - [1]    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jbehave:jbehave-maven-plugin:4.0-beta-2:run-stories-as-paths (run-stories-as-paths) on project ABCServices: Failed to run stories as paths
 [DEBUG] Closing connection to remote
[ERROR] Failed to execute goal org.jbehave:jbehave-maven-plugin:4.0-beta-2:run-stories-as-paths (run-stories-as-paths) on project ABCServices:
 Failed to run stories as paths: Story path '.svn/all-wcprops' not found by class loader EmbedderClassLoader[urls=[/Users/abc/.hudson/jobs/TestHudson/workspace/target/test-classes/, /Users/abc/.hudson/jobs/TestHudson/workspace/target/classes/, SSIOServicesClient-1.0-SNAPSHOT.jar, poi-3.8.jar, cxf-rt-frontend-jaxws-2.5.2.jar, xml-resolver-1.2.jar, asm-3.3.jar, cxf-api-2.5.2.jar, cxf-rt-core-2.5.2.jar, cxf-rt-bindings-soap-2.5.2.jar, cxf-tools-common-2.5.2.jar, cxf-rt-databinding-jaxb-2.5.2.jar, cxf-rt-bindings-xml-2.5.2.jar, cxf-rt-frontend-simple-2.5.2.jar, cxf-rt-ws-addr-2.5.2.jar, cxf-rt-transports-http-2.5.2.jar, cxf-rt-transports-common-2.5.2.jar, cxf-rt-frontend-jaxrs-2.5.0.jar, cxf-common-utilities-2.5.0.jar, jsr311-api-1.1.1.jar, jettison-1.3.jar, jaxb-api-2.1.jar, stax-api-1.0-2.jar, activation-1.1.jar, cxf-bundle-jaxrs-2.5.0.jar, xmlschema-core-2.0.1.jar, woodstox-core-asl-4.1.1.jar, stax2-api-3.1.1.jar, geronimo-stax-api_1.0_spec-1.0.1.jar, geronimo-annotation_1.0_spec-1.1.1.jar, neethi-3.0.1.jar, wsdl4j-1.6.2.jar, geronimo-activation_1.1_spec-1.1.jar, geronimo-javamail_1.4_spec-1.7.1.jar, aopalliance-1.0.jar, spring-asm-3.0.6.RELEASE.jar, commons-logging-1.1.1.jar, jetty-continuation-7.5.3.v20111011.jar, jetty-http-7.5.3.v20111011.jar, jetty-io-7.5.3.v20111011.jar, jetty-util-7.5.3.v20111011.jar, jetty-security-7.5.3.v20111011.jar, slf4j-api-1.6.2.jar, geronimo-servlet_2.5_spec-1.1.2.jar, log4j-1.2.16.jar, gson-1.7.1.jar, jaxb-impl-2.0.3.jar, jsr173_api-1.0.jar, testng-6.5.1.jar, junit-4.10.jar, hamcrest-core-1.1.jar, bsh-2.0b4.jar, jcommander-1.12.jar, snakeyaml-1.6.jar, spring-core-3.1.1.RELEASE.jar, spring-context-3.1.1.RELEASE.jar, spring-web-3.1.1.RELEASE.jar, spring-expression-3.1.1.RELEASE.jar, spring-beans-3.1.1.RELEASE.jar, spring-aop-3.1.1.RELEASE.jar, spring-context-support-3.1.1.RELEASE.jar, spring-tx-3.1.1.RELEASE.jar, spring-orm-3.1.1.RELEASE.jar, spring-jdbc-3.1.1.RELEASE.jar, spring-oxm-3.1.1.RELEASE.jar, commons-lang-2.5.jar, spring-test-3.1.1.RELEASE.jar, commons-httpclient-3.1.jar, commons-codec-1.2.jar, SharedshelfSchema-0.7.jar, xom-1.2.5.jar, xml-apis-1.3.03.jar, xercesImpl-2.8.0.jar, xalan-2.7.0.jar, json-lib-2.4-jdk15.jar, commons-beanutils-1.8.0.jar, commons-collections-3.2.1.jar, ezmorph-1.0.6.jar, VWWebServicesClient-1.0.jar, httpclient-4.2.1.jar, httpcore-4.2.1.jar, httpmime-4.0.1.jar, apache-mime4j-0.6.jar, json-20090211.jar, hibernate-entitymanager-3.5.6-Final.jar, hibernate-core-3.5.6-Final.jar, antlr-2.7.6.jar, dom4j-1.6.1.jar, jta-1.1.jar, hibernate-annotations-3.5.6-Final.jar, hibernate-commons-annotations-3.2.0.Final.jar, cglib-2.2.jar, javassist-3.9.0.GA.jar, hibernate-jpa-2.0-api-1.0.0.Final.jar, morphia-0.99.1-SNAPSHOT.jar, mongo-java-driver-2.10.0.jar, cglib-nodep-2.2.2.jar, jbehave-maven-plugin-4.0-beta-3.jar, jbehave-core-4.0-beta-3.jar, junit-dep-4.8.2.jar, hamcrest-library-1.1.jar, hamcrest-integration-1.1.jar, commons-io-1.4.jar, plexus-utils-2.0.5.jar, freemarker-2.3.16.jar, paranamer-2.4.jar, xstream-1.3.1.jar, xpp3_min-1.1.4c.jar, maven-plugin-api-2.0.11.jar, maven-artifact-2.0.11.jar, maven-project-2.0.11.jar, maven-settings-2.0.11.jar, maven-profile-2.0.11.jar, maven-model-2.0.11.jar, maven-artifact-manager-2.0.11.jar, maven-repository-metadata-2.0.11.jar, wagon-provider-api-1.0-beta-2.jar, maven-plugin-registry-2.0.11.jar, plexus-interpolation-1.1.jar, plexus-container-default-1.0-alpha-9-stable-1.jar, classworlds-1.1-alpha-2.jar, plexus-archiver-1.2.jar, plexus-io-1.0.1.jar, proxytoys-1.0.jar, tuprolog-extensions-2.1.1.jar, tuprolog-2.1.1.jar, xunit-1.9.jar, guice-2.0.1.jar, dtkit-metrics-model-0.8.jar, dtkit-metrics-util-0.8.jar, saxon-9.1.0.8.jar, saxon-9.1.0.8-s9api.jar, saxon-9.1.0.8-dom.jar, dtkit-metrics-hudson-api-0.8.jar, dtkit-junit-model-0.8.jar, dtkit-default-junit-hudson-0.9.jar, dtkit-default-junit-0.9.jar],parent=ClassRealm[plugin>org.jbehave:jbehave-maven-plugin:4.0-beta-2, parent: sun.misc.Launcher$AppClassLoader@5ab8df17]] -> [Help 1]
 [ERROR] 
```

请告诉我应该怎么做才能解决这个问题。

PS：我没有使用任何源代码管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:42:04.773

我已经解决了这个问题。这是因为我在 Hudson 中集成的 Maven 版本与我的应用程序 pom 工作的版本之间存在差异。

应用程序正在使用 Maven2，而 Hudson 正在使用 Maven3，我用 Maven2 配置了 hudson，它运行良好。

# twitter-bootstrap - 带有外部资源链接的手风琴

> ID：13681265
> 
> 赞同：2
> 
> 时间：2012-12-03T10:25:19.730
> 
> 标签：twitter-bootstrap, accordion

我正在尝试使用可单击整个标题 DIV 的手风琴，其中还包括一个不影响手风琴状态的链接，而是在新的选项卡/窗口中打开一个外部链接。

但如果我这样做，标题会在我的链接上捕获点击事件，它只会切换手风琴状态。

示例代码：

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
      <a href="http://www.google.com" target="_blank">
        Collapsible Group Item #1
      </a><br />
      whole heder is<br />
      clickable<br />
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
</div> 
```

[http://jsfiddle.net/LUzwP/6/](http://jsfiddle.net/LUzwP/6/)

是否有可能实施？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T10:43:15.160

分叉到[http://jsfiddle.net/ZPLff/](http://jsfiddle.net/ZPLff/)

变化 ：

```
<a href="http://www.google.com" target="_blank" id="google">

$("#google").click(function(e) {
    e.stopPropagation();
});​ 
```

原因：（`data-toggle="collapse"`在可折叠数据 API 中）`e.preventDefault()`在其`.on.click()`-handler 中调用，因此您必须防止这种情况发生

# c++ - 命名管道交货确认

> ID：13681267
> 
> 赞同：0
> 
> 时间：2012-12-03T10:25:23.583
> 
> 标签：c++, windows, winapi, named-pipes, mailslot

根据维基百科（http://en.wikipedia.org/wiki/MailSlot）

“除非将消息编程到应用程序中，否则 MailSlots 不会确认已收到消息”

命名管道是否提供这种确认？

（如何在 MailSlot 中实现它的任何提示也将不胜感激）

# jquery - jQuery 表单上传成功但如何获取插入的 id？

> ID：13681271
> 
> 赞同：1
> 
> 时间：2012-12-03T10:25:34.280
> 
> 标签：jquery

我在这里上传脚本：http: [//www.saaraan.com/2012/05/ajax-image-upload-with-progressbar-with-jquery-and-php](http://www.saaraan.com/2012/05/ajax-image-upload-with-progressbar-with-jquery-and-php)

作者没有帮助我真正需要的东西所以我来到这里真的需要你的帮助：

当我成功上传照片并插入到 mysql 数据库并获取插入的 ID 并重定向到另一个文件时，我必须编辑的内容：例如：myphoto.php?id=1 ??

我尝试在文件 index.php 中进行编辑：

```
complete: function(response) { // on complete
                        window.location.href = "photo.php?id=" **HOW TO GET THE ID INSERTED HERE????**;
                    } 
```

提前谢谢你，我的英语还不是很好，我也是 jQuery 的新手。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:28:19.867

您应该尝试向包含您使用的 id 的 php 文件添加响应。如果您在 php 中回显 id，您可以执行以下操作：

```
complete: function(response) { // on complete
    window.location.href = "photo.php?id="+response
} 
```

# asp.net-mvc - Telerik mvc 网格选项卡顺序问题

> ID：13681275
> 
> 赞同：4
> 
> 时间：2012-12-03T10:25:57.407
> 
> 标签：asp.net-mvc, model-view-controller, telerik, telerik-grid, kendo-ui

我正在使用 MVC 3.0 应用程序。在我的项目中，我使用 Telerk mvc 网格来列出数据。我将网格编辑模型设为“InCell”，并在我的问答区域提供了键盘导航。每个问题将有 2 个答案选项，例如“事实”和“行动”，并且将是数值。为此，我使用了“整数”编辑器模板。我的要求是，当用户从“Facts”整数教科书中按 Tab 键时，焦点会将其移至“Actions”整数文本框，如果用户从“Actions”按 Tab 键，它将移至下一行“Facts”文本框。但目前键盘导航会遍历网格中的所有单元格。“事实”和“行动”之间的栏目很少。我的网格列表代码看起来像。

```
@(Html.Telerik().Grid<AnswerQuestionVM>()
    .Name("GridQuestions")
    .DataKeys(keys =>
    {
        keys.Add(p => p.QuestionID);
    })
    .Columns(columns =>
    {

        columns.Bound(p => p.QuestionNumber).Format("{0:0.00}").HtmlAttributes(new { style = "text-align:center;" }).Title("#").Width("5%").ReadOnly();

        columns.Bound(p => p.QuestionName).Title("Question Name").Width("43%").ReadOnly();

        columns.Bound(p => p.Facts).Width("8%");

        columns.Template(@<text></text>).ClientTemplate("<img src='" + @Url.Content("~/images/help.gif") + "' name='help' alt='help' title='<#=FactOptions#>' />");

        columns.Bound(p => p.Actions).Width("8%");

        columns.Template(@<text></text>).Width("2%").ClientTemplate("<img src='" + @Url.Content("~/images/help.gif") + "' name='help' alt='help' title='<#=ActionOptions#>' />");

        columns.Template(@<text></text>).Title("Skip").Width("3%").ClientTemplate(
        "<# if(Skip==false) {#>" +
        "<input type='checkbox' style='cursor:pointer;' class='skipClass' />" +
                 "<#} else{#>" +
        "<input type='checkbox' style='cursor:pointer;' class='skipClass' checked='checked' />" +
        "<# } #>"
        );

        columns.Bound(p => p.Note).Title("Note").Width("26%");

    })
         .Editable(editing => editing.Mode(Telerik.Web.Mvc.UI.GridEditMode.InCell))
         .KeyboardNavigation( navigation => navigation.EditOnTab(true))
         .ClientEvents(e => e.OnSave("OnSave"))
         .DataBinding(dataBinding =>
         {
            dataBinding.Ajax().Select("GetQuestion", "AnswerQuestion", new { Area = "question",  ajax = true }).Enabled(true);
         })
                                                                                              .Scrollable(scrolling => scrolling.Enabled(false))
                                                                                             .Sortable(sorting => sorting.Enabled(true))
                                                                                             .Pageable(paging => paging.Enabled(true))
                                                                                             .Filterable(filtering => filtering.Enabled(true))
                                                                                             .Groupable(grouping => grouping.Enabled(false))
                                                                                             .Footer(true)
                                                                 ) 
```

下面的“事实”和“操作”列的整数编辑器模板的代码。

```
@(Html.Telerik().IntegerTextBox()
    .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty))
            .InputHtmlAttributes(new { style = "width:100%", pattern = "[0-9]*" })
    .MinValue(1)
    .MaxValue(5)
    .Value(Model) 
```

)

请提供解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:18:12.323

这是我可以建议您解决的问题，因为您的目标不受开箱即用的支持。

随意优化/更改实现或使其更通用（例如，使用类来查找单元格而不是依赖索引）

```
 $(function () {
    $('#persons tbody').on('keydown', function (e) {
        if (e.keyCode == 9) {
            var currentCell = $(e.target).closest('td');
            var cellIndex = currentCell.index();
            if (cellIndex == 2 || cellIndex == 4) { //if editing cell in third or fifth column, use different indexes if needed
                e.stopPropagation();
                e.preventDefault();
                var grid = $('#persons').data().kendoGrid;

                if (cellIndex == 2) {
                    var cellToEdit = currentCell.parent().find('td:eq(4)');
                    grid._handleEditing(currentCell, cellToEdit);  
                }
                if (cellIndex == 4) {
                    var cellToEdit = currentCell.parent().find('td:eq(2)');
                    grid._handleEditing(currentCell, cellToEdit);   
                }
                setTimeout(function () {
                    cellToEdit.find('input').focus();
                })
            }
        }
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:20:28.767

我不太确定该怎么做，但是您是否尝试过使用 tabindex 之类的东西，也许是在 htmlAttributes 中使用它？无论如何，我从来没有做过这样的事情，但也许你可以在那个领域尝试一些事情：

```
columns.Bound(p => p.Facts).Width("8%").HtmlAttributes(new { tabindex = 1 });
columns.Bound(p => p.Actions).Title("Practice").Width("8%").HtmlAttributes(new { tabindex = 2 }); 
```

由于您使用的是 Telerik Grid，您可能必须在每个项目中以某种方式混合它。再说一次，也许我误解了你的观点（我知道这样做）:)

# c# - 想要从我的数组中检索字符串

> ID：13681277
> 
> 赞同：-3
> 
> 时间：2012-12-03T10:26:02.180
> 
> 标签：c#

我的字符串数组包含以下值

```
null
String 1 
String 2
String 3
null
String 4
String 5
String 6
null
String 7
String 8
String 9 
```

我想找回

```
String 1 String 2 String 3
String 4 String 5 String 6
String 7 String 8 String 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:13:02.937

一点 LINQ 魔法

```
var arr = new [] {null,"string1","string2","string3",null,"string4","string5","string6",null,"string7","string8","string9"};

var items = arr.Select( (item,index) => new {item, nextNull = Array.IndexOf(arr,null,index)} )
                           .GroupBy(x => x.nextNull)
                           .Where(x => x.Any(y => !String.IsNullOrEmpty(y.item)))
                           .Select(x => String.Join(" ",x.Select(y => y.item))); 
```

输出：

```
string1 string2 string3
string4 string5 string6
string7 string8 string9 
```

现场示例：[http ://rextester.com/GOIT12899](http://rextester.com/GOIT12899)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:30:09.723

我想空表示意味着一个空字符串：

```
var array = arraySource.Where(n=> !string.IsNullOrEmpty(n)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:26:50.133

如果您`NULL`的数组中有字符串，那么您尝试：

```
string[] newArray = stringArray.Where(r => !r.Equals("null", StringComparison.InvariantCultureIgnoreCase))
                             .ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T10:54:02.887

这是一个执行您想要的循环的循环：

```
string[] str = new[] { "null", "String 1", "String 2", "String 3", "null", "String 4", "String 5", "String 6", "null", "String 7", "String 8", "String 9" };
var newStr = new List<string>();
for (int i = 0; i < str.Length; i++)
{
    string current = str[i];
    if (current == "null")
    {
        int index = Array.IndexOf(str, "null", i + 1, str.Length - (i + 1));
        if (index >= 0)
        {
            newStr.Add(string.Join(" ", str.Skip(i + 1).Take(index - 1 - i)));
            i = index - 1;
        }
        else
        {
            if (i != str.Length - 1)
                newStr.Add(string.Join(" ", str.Skip(i + 1).Take(str.Length - i)));
            break;
        }
    }
} 
```

它在由 string 确定的指定索引处将带有空格的字符串连接起来`null`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T10:31:30.627

你可以试试这些线路

```
string[] myArray = new[] { "Stack", null, "OverFlow" };
string[] nulless = myArray.Where(t => !string.IsNullOrEmpty(t)).ToArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T10:33:15.640

将其拆分为已定义的部分，但您需要使用列表：

```
public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> list, int parts)
        {
          return list.Select((item, index) => new {index, item})
                       .GroupBy(x => (x.index + 1) / (list.Count()/parts) + 1)
                       .Select(x => x.Select(y => y.item));
        } 
```

# c++ - Visual Studio 2010 和 win7 64 位上的 Qt

> ID：13681279
> 
> 赞同：4
> 
> 时间：2012-12-03T10:26:02.943
> 
> 标签：c++, visual-studio-2010, qt

我决定在我的 win7（64 位）上开始使用 Qt。我下载并安装了 qt-win-opensource-4.8.4-vs2010.exe 和 qt-vs-addin-1.1.11-opensource.exe。

现在我可以在 Win32 上运行 Qt 项目，但我想要或者我需要它们在 Win64 模式下。当我尝试这个时，我收到此错误消息

> 没有为 x64 平台分配给此项目的 Qt 版本 请使用“更改 Qt 版本”功能并为此平台选择有效的 Qt 版本。

知道我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:30:51.827

AFAIK，您必须自己构建 Qt 才能获得 win64 版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T10:33:37.997

如果要构建 64 位代码，则需要手动构建 Qt 64 位版本。qt-win-opensource-4.8.4-vs2010.exe 只有 32 位。

您也可以使用 32 位平台 :) 丑陋的方法是：打开**Qt 4.8.3 命令提示符**并运行**devenv.exe** :D

# javascript - 使用 AJAX 处理用户导航

> ID：13681286
> 
> 赞同：0
> 
> 时间：2012-12-03T10:26:38.710
> 
> 标签：javascript, ajax, html, web-applications

我有一个简单的单页 webapp，它遵循以下执行流程

```
Main -> AJAX Content -> Main 
```

用户从主屏幕开始，输入一些输入数据并按下按钮。这将启动 AJAX 内容，它本质上是一个按顺序排列的几个不同步骤的集合。完成所有步骤后，用户重新开始主屏幕。

我想处理当用户在“AJAX 内容”状态下按下后退按钮时会发生什么。这是我想要的状态图-

```
Main (Push Main) -> AJAX Content (Pop Main)->  Main 
```

因此，当用户处于 AJAX 状态时，按下后退按钮，用户将被带回主屏幕。完成活动并返回主屏幕后，后退按钮将用户带离站点。

注意：所有项目都只是一个 HTML 页面。我使用“主要”和“AJAX 内容”这两个词来说明用户将看到的不同屏幕。

我尝试使用真正简单的历史、PathJS 和 jQuery BBQ 来实现这个功能。他们都没有成功。我需要一种简单的方法来将项目推送和弹出到导航堆栈上，并在用户使用后退按钮时对它们做出反应。

我主要为移动平台开发，在这些平台上做这一切真的很容易。我不知道如何为网络应用程序执行此操作。代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:49:51.820

手动推送历史对你有用吗？类似的东西：

```
window.history.pushState(stateObj, "Title", "URL"); 
```

它还支持一些导航方法以及您最应该欣赏的东西：

```
window.onpopstate = eventHandlerRef; 
```

这里有一篇非常好的文章：[https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

现在这一切都很好，但遗憾的是在某种程度上取决于您的目标平台 - 对 pushState 方法和事件的支持不是太广泛 - [http://caniuse.com/#feat=history](http://caniuse.com/#feat=history) - 两个站点都链接到 History.js几乎涵盖了支持的polyfill。来自[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)：

**HTML5 浏览器**

Firefox 4+ Chrome 8+ Opera 11.5 Safari 5.0+ Safari iOS 4.3+

**HTML4 浏览器**

IE 6、7、8、9 Firefox 3 Opera 10、11.0 Safari 4 Safari iOS 4.2、4.1、4.0、3.2

# mysql - mysql分页左连接与联合限制

> ID：13681289
> 
> 赞同：2
> 
> 时间：2012-12-03T10:26:45.453
> 
> 标签：mysql, pagination, left-join, limit, union

我有一个存储帖子的表“宝石”（例如博客）。对帖子的回复也存储在同一个表中，其中一个字段存储父帖子的键。每个帖子都可以附加文件。

我需要获取带有相关回复和附加文件的帖子列表。因此，'gems' 有多个 LEFT JOINS 到它 - 一个到它自己，一个到带有文件名的 'gemdetail'。此查询有效：

```
SELECT g.gemid as gemidx, g.title, gemdetail.filename, r.gemid as rgemid, r.title, r.filename
FROM (SELECT * FROM gems WHERE gems.grade = '7' LIMIT 0, 10) g 
LEFT JOIN (SELECT x.title, x.gemid, x.replygemid, y.filename from gems x 
    LEFT JOIN gemdetail y ON x.gemid = y.gemid ) r ON g.gemid = r.replygemid 
LEFT JOIN gemdetail ON g.gemid = gemdetail.gemid 
```

但是，如果我每个帖子有 20 个回复和 10 个文件，则返回的记录数是每个帖子 200 条。LIMIT 子句有效，但这仍然是很多记录。加上处理记录集是一种负担。

我重写了查询以使用 UNION，每个帖子仅返回 40 条记录（而不是 200 条）。UNION 有 4 个部分 - 1) 返回前 10 条记录 (LIMIT) 2) 获取帖子的文件名 3) 获取回复 4) 获取回复的文件名

下面的 UNION 查询有效，除了我不能限制 UNION 第一部分以外的任何返回记录的数量。我可以将 LIMIT 语句放入 UNION 的每个部分，但这是不正确的（我想将文件和回复限制在 LIMITed 10 个帖子的集合中）。当我尝试对任何 UNIONS 使用 WHERE gemid IN (SELECT gemid from gems....) 子句时，我得到 mySQL 子查询限制错误。

```
SELECT g.gemid as gemidx, g.title, NULL as filename, NULL as rgemid, 'ag' as flag 
FROM (SELECT * FROM gems WHERE ISNULL(gems.replygemid) AND gems.grade = '7' LIMIT 0, 10) g
LEFT JOIN (SELECT * FROM gems) r ON g.gemid = r.replygemid  

UNION SELECT g.gemid as gemidx, g.title, gemdetail.filename as filename, NULL as rgemid, 'bf' as flag 
FROM (SELECT * FROM gems WHERE ISNULL(gems.replygemid) AND gems.grade = '7') g 
INNER JOIN gemdetail ON g.gemid = gemdetail.gemid

UNION SELECT g.replygemid as gemidx, g.title, NULL as filename, g.gemid as rgemid, 'cr' as flag 
FROM (SELECT * FROM gems WHERE NOT ISNULL(gems.replygemid) AND gems.grade = '7') g 

UNION SELECT g.replygemid as gemidx, g.title, gemdetail.filename as filename, g.gemid as rgemid, 'df' as flag 
FROM (SELECT * FROM gems WHERE NOT ISNULL(gems.replygemid) AND gems.grade = '7') g 
INNER JOIN gemdetail ON g.gemid = gemdetail.gemid 

ORDER BY gemidx desc, rgemid, flag 
```

请帮忙。有没有办法有效地选择（为了分页）仅 10 个帖子及其所有相关的回复和文件？感谢您花时间阅读本文。我已经为此花了 2 天时间，并且处于我的极限（糟糕的双关语......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:34:10.800

有点玩，但这段代码有点讨厌，所以你可能不想使用它。不过，这暂时忽略了文件。请注意，我在我的一张桌子上得到了类似的东西，然后从中得出了这个，但我没有直接测试过，所以可能有错别字。

```
SELECT gems.gemid as gemidx, gems.title, r.gemid as rgemid, r.title, r.filename
FROM gems
INNER JOIN (SELECT gems.*, @runningtotal:=@runningtotal+1 AS CurrentTotal
FROM (SELECT @runningtotal := 0)Deriv1, gems 
ORDER BY replygemid) r
INNER JOIN (SELECT replygemid, MIN(CurrentTotal) AS MinTotal
FROM (SELECT replygemid, @runningtotal:=@runningtotal+1 AS CurrentTotal
FROM (SELECT @runningtotal := 0)Deriv1, gems 
ORDER BY replygemid) Deriv2
GROUP BY replygemid) Deriv5
ON Deriv4.replygemid = Deriv5.replygemid 
AND Deriv4.CurrentTotal < Deriv5.MinTotal + 10
WHERE gems.grade = '7' 
```

这样做是使用子选择将序列号添加到回复（由父级排序）。它使用此子选择两次，一次获取组的最小序列号，然后再次带回具有序列号的所有行详细信息。然后将其加入以获取序列号是该 gem 的前 10 个之一的那些。

虽然我更喜欢将内容保存在单个 SQL 中，但我认为这已经到了太慢而不值得的阶段。

可以将文件详细信息放入使用 GROUP_CONCAT 将它们全部添加以进行 gem 回复，然后在您的代码中处理您不感兴趣的那些（即超过 10 个）

抱歉，我想不出更有用的东西

# c - 如何将三元运算符合并到优先攀升算法中？

> ID：13681293
> 
> 赞同：22
> 
> 时间：2012-12-03T10:27:00.770
> 
> 标签：c, parsing, expression, grammar, operator-precedence

[我按照此网页](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm#climbing)上“优先级爬升”部分中给出的解释，使用具有各种一元前缀和二进制中缀运算符的优先级爬升算法来实现算术评估器。我还想包括三元运算符（即三元条件运算符`?:`）。

网页上给出的算法使用以下语法：

```
E --> Exp(0) 
Exp(p) --> P {B Exp(q)} 
P --> U Exp(q) | "(" E ")" | v
B --> "+" | "-"  | "*" |"/" | "^" | "||" | "&&" | "="
U --> "-" 
```

如何将三元运算符合并到此语法中？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-09-20T06:18:15.100

具体来说，我将以 C/C++/Java`?:`为例。

似乎在那些语言中，运算符允许在and`?:`之间进行任何有效的表达式，包括由自身组成的表达式和由运算符组成的表达式，其优先级低于，例如and的优先级（例如：、、、）。`?``:``?:``?:``=``,``a ? b = c : d``a ? b , c : d``a ? b ? c : d : e`

这表明您应该以与解析表达式时完全相同的方式处理`?`和。当您解析出 时，它作为一个整体，是一个二元运算符。因此，您以相同的方式解析和，但前者是一个表达式，而后者是一个二元运算符（其中嵌入了一个表达式）。`:``(``)``? expr :``( expr )``? expr :`

现在这`? expr :`是一个二元运算符（与“二元性”`a ?-expr-: b`没有什么不同`a * b`），您应该能够像您已经支持的任何其他二元运算符一样支持它。

就个人而言，我不会费心去拆分`?:`成各自独立的二元运算符。最后，它仍然是一个三元运算符，它必须链接到 3 个操作数，并在表达式评估时作为一个整体考虑。如果您遵循您在问题中提到的文章中的方法并正在创建一个 AST，那么您就可以了，`?:`有一个左子节点，一个右子节点（与任何其他二元运算符一样），此外，还有一个中间子节点节点。

整体的优先级`?-expr-:`应该是低的。不过，在 C/C++（以及 Java？）中，它并不是最低的。由你决定你想要它是什么。

到目前为止，我们还没有讨论`?:`. 在 C/C++ 和 Java 中，`?-expr-:`就像赋值运算符一样是右结合的`=`。同样，由您决定将其设为左关联或保持右关联。

还有这个：

```
E --> P {B P}
P --> v | "(" E ")" | U P
B --> "+" | "-" | "*" | "/" | "^"
U --> "-" 
```

应该变成这样：

```
E --> P {B P}
P --> v | "(" E ")" | U P
B --> "+" | "-" | "*" | "/" | "^" | "?" E ":"
U --> "-" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-05T03:02:51.563

我在搜索有关将三元运算符转换为反向波兰表示法 (RPN) 的信息时遇到了这个问题，所以虽然我没有可靠的实现来实现`?:`具有优先爬升的运算符，但我确实认为我可以提供一些线索使用两个堆栈将`?:`运算符转换为 RPN ......这类似于您给出的网页中的 Shutting Yard 算法。

（编辑）我必须指出我在这里所做的不是很有效（必须评估三元运算符的两个分支），但要演示`?:`在现有框架中合并新运算符 ( ) 是多么容易（ RPN 转换代码）（通过声明`?`和`:`两个最低优先级）。

我想从一些示例开始，说明如何`?:`根据我的解析器将表达式 with 转换为 RPN ...我添加**了两个**运算符而不是一个，`?`and `:`，但我认为这不会有很大的不同，因为`:`并且`?`将永远放在一起（RPN和原始表达式具有相同数量的令牌更方便）。在示例中，您可以看到它是如何工作的。

示例 1：`1 + ((0+1) ? 2 : 3 + 8) + 4`

RPN：`1` `0` `1` `+` `2` `3` `8` `+` `:` `?` `+` `4` `+`

现在让我们评估 RPN。

1 - 将第一个元素推入堆栈，我们遇到了第一个二元运算符：

`1` `0` `1`和 operator `+`，我们添加顶部 2 个元素，将堆栈变成`1` `1`

2 - 然后再推三个元素，我们遇到了第二个二元运算符：

`1` `1` `2` `3` `8` `+`------>`1` `1` `2` `11`

3 - 现在我们有`:`和`?`。这实际上告诉我们选择*后续分支**（*堆栈顶部的第二个最顶部元素`2`）或*替代分支*（堆栈顶部`11`的元素） . 由于谓词为 1（真），我们选择 2 并丢弃 11。解析器弹出 3 个元素（谓词/结果/替代）并推回选择的元素（在本例中为结果分支），因此堆栈变为*`1`*

 *`1` `2`

4 - 消耗剩余的元素：

`1` `2` `+`------>`3`

`3` `4` `+`------>`7`

* * *

示例 2：`1 + ((0+0+0?0:0) ? 2 : (3 + 8)) + 4`

RPN：`1` `0` `0` `+` `0` `+` `0` `0` `:` `?` `2` `3` `8` `+` `:` `?` `+` `4` `+`

评估：

开始：

`1` `0` `0` `+` `0` `+` `0` `0` `:` `?` `2` `3` `8` `+` `:` `?` `+` `4` `+`

将 0 加到 0 后：

`1` `0` `0` `+` `0` `0` `:` `?` `2` `3` `8` `+` `:` `?` `+` `4` `+`

将 0 加到 0 后：

`1` `0` `0` `0` `:` `?` `2` `3` `8` `+` `:` `?` `+` `4` `+`

第一个`:?`选择后`0`：

`1` `0` `2` `3` `8` `+` `:` `?` `+` `4` `+`

添加 3 和 8 后：

`1` `0` `2` `11` `:` `?` `+` `4` `+`

`?:`选择11后：

`1` `11` `+` `4` `+`

添加 1 和 11 后：

`12` `4` `+`

最后：

`16`

* * *

这可能表明可以将表达式`?:`转换为反向波兰符号。正如网页所说，RPN 和 AST 是等价的，因为它们可以相互转换，三元运算符应该能够以类似的方式通过 Precedence Climbing 实现。

需要做的一件事似乎是`?:`运算符的“优先级”（或优先级）。我在尝试 RPN 转换时实际上遇到了它。我给了问号和冒号最低优先级：

正如您从上面的示例中看到的那样，每当我们要执行`?:`时，*优先分支*和*替代分支*和*谓词*应该已经被评估，产生一个数字。这是由优先级保证的。

以下是优先级（优先级）表。

`!` `~`> `*` `/` `%`> `+` `-`> `&`> `^`> `|`> `&&`> `||`> `?`>`:`

`?`and的`:`优先级最低，在 1?2+3:4+5 这样的表达式中表示，`?`并且`:`永远不会接受它们周围的操作数。

`?`出现`:`在RPN之前。据我了解，这只是一种设计选择，因为甚至不一定必须首先拆分为 2 个运算符。`:``?``:``?`

希望这可以帮助..

* * *

参考：[http ://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-10T08:15:01.850

定义冒号的优先级低于问号。换句话说，一个？b : c 将被解析为 (a ? b) : c。这让解析器可以构造一个 (if/then/empty-else) 抽象语法节点，然后由“: 运算符”对其进行操作以提供所需的 else 组件。

优先关系还保留了运算符的可组合性。例如，一个？乙：丙？d : e 解析为 (a ? b) : (c ? d) : e，正如人们所期望的那样。

希望这可以帮助。*

# python - 我应该嵌入还是扩展 python 来创建高质量、高速的 GUI 程序？

> ID：13681305
> 
> 赞同：2
> 
> 时间：2012-12-03T10:27:49.233
> 
> 标签：python, c, user-interface, cross-platform

我正在尝试找到一种方法来快速开发（或者更确切地说最终达到我可以快速开发的程度）非常漂亮的跨平台 GUI 桌面应用程序，它们在磁盘和内存中的占用空间非常小，启动速度非常快（快得多，例如，甚至比一个简单的 wxPython 窗口还要好）（作为一个很好的例子，看看 TextEdit 在 OSX 下的启动速度有多快。这就是我想要的 GUI 应用程序的启动速度），轻松部署，并与操作系统（Gimp 和 Gedit 以及其他各种开源、跨平台应用程序表现出我非常讨厌的各种行为，具体取决于平台，尤其是在 OSX 上）而无需花钱。（嘿，别笑了！=P）

我对 wxWidgets、Qt、SDL 以及迄今为止我尝试过的所有其他东西都不满意，所以我决定在每个平台上使用原生工具编写原生 GUI 代码（尤其是与操作系统的窗口系统交互的部分） （XCode/ObjC/Cocoa/OpenGL、MSVC/Win32/DirectX、gcc/GTK/OpenGL），然后尝试想出一些方法尽可能多地用 Python 编写程序的其余部分。

我考虑过可能编写一组共享库/ dll 来处理 GUI 问题，然后用一组 Python C 扩展包装它们，但是在打包时会遇到一些技术挑战（菜单、应用程序图标、某些特定于操作系统的应用程序清单等），并且我不确定启动速度和性能总体上是否可以接受，具体取决于我正在编写的特定程序。

所以我考虑过可能在每个平台上创建一种“shell”程序，并嵌入 python，有点类似于 Sublime Text 2 的方式。

我不喜欢第一次启动任何 python 程序时出现的启动缓慢。我希望这是编译为字节码的结果，并且我可以在我的应用程序中包含 python 模块的预编译版本，但是从实验来看，情况似乎并非如此.. 似乎任何 python 运行都是第一次（自上次系统重新启动以来），加载了共享库/ dll 之类的。所以这就是我考虑嵌入 Python 的原因之一——我想知道在嵌入/调用 python 时是否有一些选项可以帮助减少启动延迟。或者，如果最坏的情况发生，在嵌入的情况下，我可以在没有 Python 的情况下启动，然后在应用程序已经启动后，如果/当我需要时，异步启动 Python（不在主线程中）。

有没有办法减少已部署的 python 程序的首次启动延迟（即，程序包中包含解释器的一个版本。也许解释器可以用我没有尝试过的开关编译）？

嵌入python时有什么方法可以减少解释器加载/初始化延迟？

期望任何 python gui 程序能够像 TextEdit 一样快速启动或占用很小的空间是完全不现实的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:48:24.940

[Pyglet](http://www.pyglet.org/download.html)

它并没有变得更好，您将获得对所有 Python 版本的全面支持，您负责您的 GUI 代码，并且事情的速度是惊人的。您可以在没有明显延迟的情况下渲染数据块！

在不到**128MB的****333Mhz** CPU和一些随机的**PCI 显卡上**运行，我设法摆脱了这个问题：[http](http://www.youtube.com/watch?v=D7zFLQZxzcY) ://www.youtube.com/watch?v= D7zFLQZxzcY（大约有几十万颗星，规模：能够，几百个行星也有一艘可以在太空中航行的船。这是一个早期的开发视频，我没有时间完成）

 ****在第一次运行之后（或者如果您将 .py 编译为 .pyc），您将使用 pyglet 从 GUI 中获得极快的速度，但您必须自己创建所有输入和按钮，因为您正在编写图形数据而不是接口代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:38:51.030

你可以在windows平台上采取openoffice的方式，写一个launcher，简单的尝试访问你的软件需要的文件，这样它们最终会进入内存缓存，加快启动时间（但是在缓存中创建了无用的东西，以防用户不想打开您的程序）。****

# postgresql - PostgreSQL CASE：文本数组中的位置

> ID：13681308
> 
> 赞同：0
> 
> 时间：2012-12-03T10:27:56.783
> 
> 标签：postgresql, sql-update, case

我目前正在成功地使用 CASE 表达式根据其他列的属性更新空列。例如

```
UPDATE table SET cat = CASE 
WHEN term = '{"Boulder"}' then 'Boulder' 
```

但是，我需要在文本数组上执行相同的操作，尤其是当元素位于该数组中的特定位置时。

例如，如果数据看起来像

```
{"Boulder, Tree, Bush"}

WHEN position('Tree' in term) > 0 then 'Boulder' 
```

但我收到一条错误消息

函数 pg_catalog.position（字符变化 []，未知）不存在

我以前在函数中使用过位置，所以我不确定为什么 PostgreSQL 在这种情况下不喜欢它。

有没有办法在确定数组中文本元素的位置时使用 CASE 表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:17:07.523

显然，您的`term`列被定义为一个数组，例如 `varchar[]`. 该`position`函数仅适用于标量值，不适用于数组。

如果要测试元素是否包含在数组中，则需要使用不同的运算符：`@>`

```
update foobar
   set cat = 'Boulder'
where term @> '{"Boulder"}' 
```

该表达式`'{"Boulder"}'`创建一个具有单个元素的数组。它相当于`array['Boulder']`（我发现它更具可读性）。因此，上述条件会更新数组包含运算符右侧数组所有元素的`where`所有行。`term`在这种情况下，它只是您要测试的单个元素。

有关数组函数和运算符的更多详细信息，请参见手册：[http ://www.postgresql.org/docs/current/static/functions-array.html](http://www.postgresql.org/docs/current/static/functions-array.html)

**需求改变后编辑**

要仅查找和更新 boulder 位于第一、第二或第三的位置，您可以使用以下命令：

```
update foobar
   set cat = 'Boulder'
where 'Boulder' in (term[1], term[2], term[3]); 
```

# r - 从文本文件中读取配置

> ID：13681310
> 
> 赞同：2
> 
> 时间：2012-12-03T10:27:59.537
> 
> 标签：r, rjava

我有一个包含条目的 txt 文件

```
indexUrl=http://192.168.2.105:9200
jarFilePath = /home/soumy/lib 
```

如何从 R 读取此文件并获取 的值`jarFilePath`？

我需要这个来设置`.jaddClassPath()`...由于 Windows 和 linux 中的斜杠不同，我无法将 jar 复制到类路径

在linux中我想使用

```
.jaddClassPath(dir("target/mavenLib", full.names=TRUE )) 
```

但在窗户

```
.jaddClassPath(dir("target\\mavenLib", full.names=TRUE )) 
```

所以想从属性文件中读取 jar 的位置！！！如果还有其他选择，请告诉我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-07T18:37:22.363

截至 2016 年 9 月，CRAN 具有包[属性](https://cran.r-project.org/web/packages/properties/)。

它`=`正确处理属性值（但不处理第一个`=`符号后的空格）。

例子：

属性文件的内容`/tmp/my.properties`：

```
host=123.22.22.1
port=798
user=someone
pass=a=b 
```

代码：

```
install.packages("properties")
library(properties)

myProps <- read.properties("/tmp/my.properties") 
```

然后您可以访问诸如等的属性`myProps$host`，特别`myProps$pass`是`a=b`如预期的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T20:33:01.540

我不知道一个包是否提供了一个特定的接口。

如果没有，我将首先使用 read.table 将数据加载到数据框中：

```
myProp <- read.table("path/to/file/filename.txt, header=FALSE, sep="=", row.names=1, strip.white=TRUE, na.strings="NA", stringsAsFactors=FALSE) 
```

`sep="="`显然是分隔符，这将很好地分隔您的属性名称和值。

`row.names=1`说第一列包含您的行名，因此您可以通过这种方式索引您的数据属性以检索您想要的每个属性。例如：`myProp["jarFilePath", 2]`将返回`"/home/soumy/lib"`.

`strip.white=TRUE`将去除您可能不关心的前导和尾随空格。

可以方便地将加载的数据帧转换为命名向量，以便以更简洁的方式检索属性值：`myPropVec <- setNames(myProp[[2]], myProp[[1]])`.

然后从名称中检索属性值：`myPropVec["jarFilePath"]`也会返回`"/home/soumy/lib"`。

# php - 增强的正则表达式，用于将 URL 转换为链接

> ID：13681314
> 
> 赞同：1
> 
> 时间：2012-12-03T10:28:08.517
> 
> 标签：php, regex

好的，我知道有很多方法可以将 URL 转换为链接（锚标记）...

问题是我想匹配一个支持 http 和 https 协议的 URL ......然后它将在新选项卡中打开......但我正在寻找一种安全的方式来做到这一点......所以简单的`(.*)`不做这项工作....我尝试过这样的事情：

> ```
>  $var=preg_replace('#(https?://([_a-zA-Z0-9-]+\.[a-z0-9]+)/?[^ ()<>]*)#i', '< href="\\1" target="blank">\\1</a>', $var); 
> ```

但是，如果我有这样的字符串：“嘿，看看这个“http://google.com”人”......它会变成这样的东西

> 嘿，看看这个：
> `<a href="http://google.com&quot;" target="blank">http://google.com&quot;</a>`

所以我最终在链接末尾有一个双引号：S 知道如何增强这个 RegEx 吗？我尝试`"`在“不允许的字符”中添加一个： `[^ "()<>]`但它根本没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:53:07.547

你必须`&quot;`在你的正则表达式中禁止这个词，而不仅仅是字符`"`

我知道禁止单词的唯一方法是：[正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

所以我猜这个正则表达式可能有效：

```
#(https?://([_a-zA-Z0-9-]+\.[a-z0-9]+)/?((?!(&quot;|\(|\)|<|>)).)*)#i 
```

# sql-server - SQLServerException：与主机的 TCP/IP 连接失败

> ID：13681315
> 
> 赞同：8
> 
> 时间：2012-12-03T10:28:10.303
> 
> 标签：sql-server

当我运行 Web 应用程序时，我收到一条错误消息

> “与主机、端口 1433 的 TCP/IP 连接失败。错误：”连接超时。验证连接属性，检查 SQL Server 实例是否正在主机上运行并在端口接受 TCP/IP 连接，并且没有防火墙阻止与端口的 TCP 连接。”
> 
> TCP/IP 处于活动状态并已启用，TCP 端口默认为 1433。，但我仍然收到此错误消息。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T10:34:38.950

删除所有 TCP 动态端口并将值 1433 添加到所有 TCP 端口并重新启动 SQL Server

## 脚步

*   打开 Sql Server 配置管理器（开始 -> 程序 -> Microsoft SQL Server 2008 -> 配置工具）
*   展开 SQL Server 网络配置 -> [您的服务器实例]
*   双击 TCP/IP
*   在协议下：确保启用是
*   在 IP 地址下：滚动到底部并在 IPAll 下设置 TCP 端口，（默认为 1433）
*   找到您要连接的 IP 地址并将启用和活动设置为是

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-11T16:31:41.530

当我尝试使用 JDBC（debian 上的 dbeaver）远程连接到 MSSQL Server 时，我遇到了同样的问题。过了一会儿，我发现我的 Windows 防火墙配置没有正确设置。所以也许这可以帮助你！

以下是如何配置 Windows 防火墙以允许与 SQL Server 和 SQL Server Browser 服务相关的网络流量。必须在 Windows 防火墙中配置四个例外以允许访问 SQL Server：

1.  为 TCP 端口 1433 创建一个端口例外：

    1.  打开具有高级安全性的 Windows 防火墙
    2.  在左侧窗格中，右键单击 Inbound Rules -> New Rule 以获取向导
    3.  您想创建什么类型的规则？选择端口
    4.  选择 TCP 并指定端口 1433
    5.  当连接符合指定条件时应该采取什么行动？允许连接
    6.  该规则何时适用？选择所有三个配置文件（域、私有和公共）
    7.  将规则命名为“SQL – TCP 1433”</li>
2.  为 UDP 端口 1434 添加端口例外：

    1.  右键单击入站规则，再次单击新建规则并使用以下信息创建另一个端口
    2.  选择端口
    3.  选择 UDP 并指定端口 1434
    4.  允许连接
    5.  选择所有三个配置文件（域、私有和公共）
    6.  将规则命名为“SQL – UDP 1434”
3.  为 sqlservr.exe 添加程序异常：

    1.  再次单击新建规则并使用以下信息创建程序例外：
    2.  选择程序
    3.  单击浏览以在以下位置选择“sqlservr.exe”：C:\Program Files\Microsoft SQL Server\MSSQL11。*INSTANCE_NAME* \MSSQL\Binn\sqlservr.exe 其中*INSTANCE_NAME*是您的 SQL 实例的名称。
    4.  允许连接
    5.  选择所有三个配置文件（域、私有和公共）
    6.  将规则命名为“SQL – sqlservr.exe”
4.  为 sqlbrowser.exe 添加程序例外：

    1.  再次单击新建规则并使用以下信息创建另一个程序例外：
    2.  选择程序
    3.  单击浏览以选择此位置的 sqlbrowser.exe：C:\Program Files\Microsoft SQL Server\90\Shared\sqlbrowser.exe
    4.  允许连接
    5.  选择所有三个配置文件（域、私有和公共）
    6.  将规则命名为“SQL - sqlbrowser.exe”

来源： http: [//blog.citrix24.com/configure-sql-express-to-accept-remote-connections/](http://blog.citrix24.com/configure-sql-express-to-accept-remote-connections/)

# string - VBA是否可以搜索具有某种字体的文本

> ID：13681322
> 
> 赞同：1
> 
> 时间：2012-12-03T10:28:36.480
> 
> 标签：string, vba, excel

我需要处理一个 excel 文件，其中已将字母符号（α）作为已应用符号字体的“a”字符输入。

导出文件时，格式丢失，α 和 a 之间不再有区别。

是否可以使用 VBA 将具有符号格式的“a”替换为 α 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:40:39.650

```
Public Sub ReplaceAlpha(ByVal Where As Range)
  With Application.FindFormat
    .Clear
    .Font.Name = "Symbol"
  End With

  With Application.ReplaceFormat
    .Clear
    .Font.Name = "Arial"
  End With

  Where.Replace What:="a", Replacement:=ChrW$(&H251), LookAt:=xlPart, SearchFormat:=True, ReplaceFormat:=True
End Sub 
```

不过，这不会找到格式不同的字符串中的字母。
如果你有这些，你将需要类似的东西

```
Public Sub ReplaceAlpha(ByVal Where As Range)

  Dim cur_cell As Range

  For Each cur_cell In Where
    Dim i As Long
    For i = 1 To Len(cur_cell.Value)
      With cur_cell.Characters(i, 1)
        If .Text = "a" Then
          If .Font.Name = "Symbol" Then
            .Text = ChrW$(&H251)
            .Font.Name = "Arial"
          End If
        End If
      End With
    Next
  Next

End Sub 
```

# xml - XSD：唯一粒子归属的解决方法

> ID：13681324
> 
> 赞同：2
> 
> 时间：2012-12-03T10:28:38.363
> 
> 标签：xml, xsd, xsd-validation

我有这个触发唯一粒子归属违规的架构。我明白为什么，但我没有看到任何其他方式来表达它。架构是：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Root">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element name="Element" minOccurs="1" maxOccurs="unbounded">
          <xs:complexType mixed="true">
            <xs:attribute name="First" use="required"/>
            <xs:attribute name="SomeAttribute" use="required"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="Element" minOccurs="0" maxOccurs="1">
          <xs:complexType mixed="true">
            <xs:attribute name="Second" use="required"/>
            <xs:attribute name="SomeOtherAttribute" use="required"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

以及它应该验证的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Root>
    <Element First="true" SomeAttribute="abc"/>
    <Element Second="true" SomeOtherAttribute="def"/>
</Root> 
```

我不想简化架构，这意味着我不想让任何属性成为可选的，或者允许属性之间的混合......我也不能将“元素”的名称更改为“FirstElement”之类的名称", "第二元素"。在 XSD 中有没有办法解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:35:29.403

架构的问题是您两次使用不同的属性为元素提供了两次。这在 XSD 中是不允许的。

从概念上讲，XSD 以这种方式工作的原因是您应该为元素提供一个类型，但是您对同一个元素有两个不兼容的类型。

例如：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="Root">
    <xs:complexType mixed="true">
        <xs:sequence>
            <xs:element name="FirstElement" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType mixed="true">
                    <xs:attribute name="First" use="required" />
                    <xs:attribute name="SomeAttribute" use="required" />
                </xs:complexType>
            </xs:element>
            <xs:element name="SecondElement" minOccurs="0" maxOccurs="1">
                <xs:complexType mixed="true">
                    <xs:attribute name="Second" use="required" />
                    <xs:attribute name="SomeOtherAttribute" use="required" />
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

这应该允许 XML 验证

```
<?xml version="1.0" encoding="UTF-8"?>
<Root>
    <FirstElement First="true" SomeAttribute="abc"/>
    <SecondElement Second="true" SomeOtherAttribute="def"/>
</Root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:50:01.667

您可以使用条件类型分配在 XSD 1.1 中执行此操作。Saxon 和 Xerces 目前支持 XSD 1.1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:11:00.607

没有办法*完全按照*您的意愿行事。你能做的最好的就是接受权衡。例如，如果第一次`<Element>`发生固定次数（不是可变的），它会起作用——这不是你想要的。

只是为了说明：

```
$ cat upa.xsd
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Root">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element name="Element" minOccurs="1" maxOccurs="1">  <!-- CHANGE -->
          <xs:complexType mixed="true">
            <xs:attribute name="First" use="required"/>
            <xs:attribute name="SomeAttribute" use="required"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="Element" minOccurs="0" maxOccurs="1">
          <xs:complexType mixed="true">
            <xs:attribute name="Second" use="required"/>
            <xs:attribute name="SomeOtherAttribute" use="required"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>

$ cat upa.xml
<?xml version="1.0" encoding="UTF-8"?>
<Root>
    <Element First="true" SomeAttribute="abc"/>
    <Element Second="true" SomeOtherAttribute="def"/>
</Root>

$ xmllint --schema upa.xsd upa.xml --noout
upa.xml validates 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T17:56:17.867

对于某些人来说，解决方案可能非常简单：

确保所有具有相同名称的元素，即兄弟姐妹，使用相同的属性。

例如改变这个：

```
<g:FlowPanel addStyleNames="widget-wrap"/>
<g:FlowPanel styleName="widget-wrap"/> 
```

对此：

```
<g:FlowPanel addStyleNames="widget-wrap"/>
<g:FlowPanel addStyleNames="widget-wrap"/> 
```

# php - 如何在 laravel 中验证多行表单

> ID：13681332
> 
> 赞同：1
> 
> 时间：2012-12-03T10:29:05.980
> 
> 标签：php, laravel

是否可以在 laravel 中验证多行表单。我想验证一个看起来像这样的表单：

```
<input name="address[]" class="addr"/>
<input name="address[]" class="addr"/> 
```

我已经尝试了这两种方法，但它似乎不起作用：

```
$rule = array('address[]' => 'required'); //still returning error even if all required fields are filled up 
$rule = array('address' => 'required'); //nothing happens 
```

对于第一个，我确保没有隐藏地址字段：

```
$('.addr').length 
```

返回的长度等于我填写的地址字段个数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:08:08.087

我只是扩展了验证器类并创建了一个简单的规则来检查数组中是否有空值：

```
public function validate_arrayfull($attribute, $value, $parameters){
        $is_full = (in_array('', $value)) ? false : true;
        return $is_full;
    } 
```

并且在 Validation.php 中有一条默认错误消息：

```
"arrayfull"      => "The :attribute contains empty values" 
```

用法：

```
$rule = array('address' => 'arrayfull'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:03:49.740

是的，使用以下之一：

```
$rule = array('address' => 'array'); 
$rule = array('address' => 'countmin:0'); 
```

# javascript - Ember.js 与 Jquery-ui 可排序

> ID：13681337
> 
> 赞同：3
> 
> 时间：2012-12-03T10:29:39.260
> 
> 标签：javascript, jquery, jquery-ui, ember.js

嘿，我在使用 Ember.js 和 jquery-ui 可排序时遇到了一些问题。我意识到周围有一些解决方案，主要涉及 safeClone()，但是这些去除了变形标记，而我仍然需要更新。

目前发生的是可排序插件正在移动内容，而不是外部变形标签：我编写了一个助手，它克隆了变形标签和内容，但它对操作没有任何影响。

```
safeClone: function() {
  var clone = this;
  prev = clone.prev();
  clone = prev.add(clone);
  clone = clone.add(clone.next());

  clone = $(clone).clone();
  console.log(clone);
  return clone;
} 
```

我在[http://jsfiddle.net/reubenposthuma/Bx5GL/7/](http://jsfiddle.net/reubenposthuma/Bx5GL/7/)上传了一个 jsfiddle 。它工作不完美，但任何指针将不胜感激！

# android - 您如何解释 exynos SoC kmsg 中的 WAKEUP_STAT 和 WAKEUP_INTx_PEND？

> ID：13681338
> 
> 赞同：4
> 
> 时间：2012-12-03T10:29:40.087
> 
> 标签：android, linux-kernel, power-management

当我的 Galaxy S2 设备从挂起状态唤醒时，我在 kmsg 中看到以下行。我知道这应该告诉我哪些中断正在挂起，但我无法找到一种方法来确定哪些：

```
<1>[40470.716887] PM: SLEEP
<6>[40681.900179] WAKEUP_STAT: 0x80000001
<6>[40681.900179] WAKEUP_INTx_PEND: 0x0, 0x0, 0x20, 0x0

<6>[ 1099.481006] WAKEUP_STAT: 0x80000001
<6>[ 1099.481006] WAKEUP_INTx_PEND: 0x0, 0x2, 0x0, 0x0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:43:29.283

我认为 0,0,0x20,0 是 Wake On LAN，但我不知道 0,2,0,0 是什么。

如果您从打印件往下看一点，您应该会看到以您获得唤醒锁名称的位置`WAKEUP_INTx_PEND`开头的打印件。`wakeup wake lock:`

# android - 在android中使用google方向api进行gps跟踪

> ID：13681340
> 
> 赞同：1
> 
> 时间：2012-12-03T10:29:46.603
> 
> 标签：android, google-maps, gps, google-maps-api-2

在我的应用程序中设置行车路径，然后启动 GPS 跟踪。移动位置颜色为红色。我正在使用谷歌地图方向api。设置方向路径工作正常。但是gps跟踪不起作用。

如何启用 gps 和 gps 跟踪路径颜色？

这是我的代码：

```
public class MainActivity extends MapActivity implements LocationListener {

    private static final String Location = null;
    public MapView mapView ;
    public List<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();
    private LocationManager lm;
    private LogOverlay logOverlay;
    private GpsLog log;
    double lat;
    double lon;
    public GeoPoint  srcGeoPoint,destGeoPoint,interGeoPoint;

    public void onCreate(Bundle savedInstanceState) {           
    super.onCreate(savedInstanceState);   
    System.out.println("*************1**************1");
    setContentView(R.layout.activity_main);
    System.out.println("*************2**************");
    mapView = (MapView) findViewById(R.id.mapv); 
    mapView.setBuiltInZoomControls(true);
    System.out.println("*************3**************");
    lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 20000, 10,this);                           
    double src_lat = 12.98472; // the testing source 
    double src_long = 80.17778; 
    double dest_lat = 13.00833; // the testing destination 
    double dest_long =80.2125;         
    double via_lat = 13.065; // the testing destination 
    double via_long = 80.2325;
    srcGeoPoint = new GeoPoint((int) (src_lat * 1E6), 
    (int) (src_long * 1E6)); 
    destGeoPoint = new GeoPoint((int) (dest_lat * 1E6), 
    (int) (dest_long * 1E6)); 

    interGeoPoint = new GeoPoint((int) ( via_lat * 1E6), 
          (int) (via_long * 1E6));               
    mapView.getController().animateTo(srcGeoPoint);
    mapView.getController().setZoom(15);
    new LongOperation().execute("");       
    initMyLocation();  
    final MyLocationOverlay overlay = new MyLocationOverlay(this, mapView);
    overlay.enableMyLocation();
    overlay.enableCompass();
    mapView.invalidate();
    System.out.println("*************4**************");
}

private void initMyLocation() {
    System.out.println("init my location *************");
    // does not work in emulator                 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:35:09.280

嗨添加检查这个丢失的代码片段

```
// Adding current location on map view

private void addMyLocationOverlay() {
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);

    myLocation.enableMyLocation();

    myLocation.runOnFirstFix(new Runnable() {
        @Override
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());
        }
    });

} 
```

此代码将在 mapview 上显示当前位置动画蓝色白色闪烁点

无需使用位置管理器和呼叫`requestLocationUpdates`

# python - 用作库的织物不起作用

> ID：13681341
> 
> 赞同：3
> 
> 时间：2012-12-03T10:29:48.053
> 
> 标签：python, fabric

在我自己的 python 脚本中用作库时，我无法让织物工作。我做了一个非常简短的例子`fabfile.py`来演示我的问题：

```
#!/usr/bin/env python

from fabric.api import *

print("Hello")

def test():
    with settings(host_string='myIp', user="myUser", password="myPassword"):
        run("hostname")

if __name__ == '__main__':
   test() 
```

跑步`fab`就像一种魅力：

```
$ fab test
Hello
[myIp] run: hostname
[myIp] out: ThisHost
[myIp] out:

Done.
Disconnecting from myUser@myIp... done. 
```

好的，现在，在没有 fab 的情况下运行 python 脚本似乎在某处中断：

```
$ python fabfile.py
Hello
[myIp] run: hostname 
```

它立即返回，因此它甚至似乎都没有等待响应。也许有错误，但我不知道如何输出这些。

我在我的流浪虚拟机中运行这个脚本。由于`fab`执行没有任何错误，我想这应该不是问题！

**更新**

该脚本似乎崩溃了，因为它在第一个`run`. `local`另一方面有效！

我们在同事的笔记本电脑上执行了脚本，它运行没有任何问题。我在 Ubuntu 10.04 上使用 Python 2.6.5 和 fabric 1.5.1，所以我猜这其中有一些问题！有什么办法可以正确调试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:04:55.430

我遇到过类似的问题，fab 命令退出时没有错误，但在第一个`run()`/`sudo()`命令上只有一个空行。

所以我将`run()`命令放入 try: except: block 并打印回溯：

```
def do_something():
    print(green("Executing on %(host)s as %(user)s" % env))
    try:
        run("uname -a")
    except:
        import traceback
        tb = traceback.format_exc()
        print(tb) 
```

我看到脚本在`fabfile/network.py`捕获 EOFError 或 TypeError 时在第 419 行退出。我将脚本修改为：

```
...
except (EOFError, TypeError) as err:
    print err
    # Print a newline (in case user was sitting at prompt)
    print('')
    sys.exit(0)
... 
```

然后打印出来：

```
connect() got an unexpected keyword argument 'sock' 
```

所以我在上面几行的 connect 方法中删除了 sock 关键字参数，它就像魅力一样。我想这是一个`paramiko`版本的问题，它不允许 sock 关键字。

版本：

```
Python 2.7.3
Fabric >= 1.5.3
paramiko 1.10.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:57:52.807

如果您查看 fab 命令，它看起来像这样：

```
sys.exit(
   load_entry_point('Fabric==1.4.3', 'console_scripts', 'fab')()
) 
```

这意味着它在 Fabric 包中名为 entry_points.txt 的文件中查找标记为 console_scripts 的块，并执行其中列出的方法，在本例中为 fabric.main:main

当我们查看这个方法时，我们会看到参数解析、有趣的 fabfile 导入，然后：

```
if fabfile:
    docstring, callables, default = load_fabfile(fabfile)
    state.commands.update(callables)
....
for name, args, kwargs, arg_hosts, arg_roles, arg_exclude_hosts in commands_to_run:
    execute(
            name,
            hosts=arg_hosts,
            roles=arg_roles,
            exclude_hosts=arg_exclude_hosts,
            *args, **kwargs
        ) 
```

通过一些实验，我们可以想出类似的东西：

```
from fabric import state
from fabric.api import *
from fabric.tasks import execute
from fabric.network import disconnect_all

def test():
    with settings(host_string='host', user="user", password="password"):
        print run("hostname")

if __name__ == '__main__':
    state.commands.update({'test': test})
    execute("test") 

    if state.output.status:
        print("\nDone.")
    disconnect_all() 
```

这显然是非常不完整的，但也许你只需要添加

```
disconnect_all() 
```

脚本末尾的行

# javascript - 在javascript中使用循环动态检索元素

> ID：13681342
> 
> 赞同：1
> 
> 时间：2012-12-03T10:29:49.817
> 
> 标签：javascript, getelementsbyname

我是 javascript 新手，我想在循环的帮助下通过名称获取元素，但无法获取元素。请提供帮助，以便我可以通过使用循环来减少大量代码。

下面是代码行

```
function (e){
    for(var i=1;i<5;i++){
        var name = "qption0"+i;
        var clicableObject = document.getElementById(name);
        clicableObject.backgroundColor = "#00FF00";
    }
} 
```

上面的代码是 JAVASCRIPT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:33:48.370

你可以简单地这样做： -

```
var name = "qption0"+i;
var clicableObject = document.getElementsByName(name);
clicableObject.style.backgroundColor = "#00FF00" 
```

就是这样。。希望对你有帮助。。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:32:31.920

通过 Javascript 更改元素背景颜色时，语句的语法是`elem.style.backgroundColor`. 提供的代码省略了`.style.`此调用的部分。

```
function (e){
    for(var i=1;i<5;i++){
        var name  = "qption0"+i;
        var clicableObject  = document.getElementById(name);        
        clicableObject.style.backgroundColor = "#00FF00"; //notice .style.back..
} 
```

有关更多信息，请查看MDN 上的[这篇文章](https://developer.mozilla.org/en-US/docs/DOM/Using_dynamic_styling_information)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:33:22.997

你应该使用`style`对象..

```
clicableObject.style.backgroundColor = "#00FF00"; 
```

# php - 获取 facebook 好友用户 ID，无需发送通知

> ID：13681343
> 
> 赞同：-4
> 
> 时间：2012-12-03T10:29:55.080
> 
> 标签：php, jquery, facebook

是否可以做类似“apprequests”（应用程序请求对话框）之类的事情，通过回调来获取用户朋友ID，而不向他发送通知？因为每次用户选择朋友时，他都会为他发送通知，我怎样才能删除这样的东西（发送通知），或者不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:10:40.577

好像你问了完全错误的问题。你为什么不描述你*想要*的东西，而不是其他东西的行为？

听起来很像您想要一个朋友选择器 - 所以构建一个：[https ://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/](https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:00:23.800

我可以建议的一件事是发送通知，然后立即将其删除。您可以查看此线程以了解如何删除请求：[如何清除 Facebook 上的应用邀请通知？](https://stackoverflow.com/questions/13116053/how-can-i-clear-the-app-invite-notification-on-facebook/13116250#13116250). 但是你为什么要使用这样的技巧来获取用户的朋友 ID 是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:43:46.677

如果你想在没有应用请求的情况下获取朋友的用户 id，你必须授权用户并读取他的好友列表。没有授权，没有其他办法。

> [https://developers.facebook.com/docs/concepts/login/](https://developers.facebook.com/docs/concepts/login/)

# android - 我是否应该在 GA 中使用两个配置文件来跟踪 android 和 ios 应用程序

> ID：13681345
> 
> 赞同：4
> 
> 时间：2012-12-03T10:30:00.117
> 
> 标签：android, ios, google-analytics

我们有两个原生应用程序（Android 和 iOS）。两者都实现相同的功能。我们现在想将 Google Analytics 跟踪添加到这两个应用程序中。是使用两个单独的配置文件还是使用一个配置文件并为两个操作系统设置过滤器更好？能够看到两个应用程序产生的总体流量会很棒，但最重要的是能够检查每个应用程序的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T09:12:20.910

### 移动应用分析设置的最佳实践

> **在同一属性中跟踪应用的不同平台。** 如果您为不同平台开发了相同的应用程序（例如，Android 的 MyApp 和 iOS 的 MyApp），请在同一属性中跟踪它们。然后，您可以设置新视图来组织和比较 Google Analytics（分析）报告中的表现。如果您的 iOS 和 Android 应用程序在性能或使用方面存在很大差异，您可能希望在单独的属性中跟踪每个平台。

[https://support.google.com/analytics/answer/2587087?hl=en](https://support.google.com/analytics/answer/2587087?hl=en)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-03T12:55:18.477

建议可能已更改，现在您可以找到：

**在不同属性中跟踪应用程序的不同平台。**

> 如果您为不同平台开发了相同的应用程序（例如，Android 的 MyApp 和 iOS 的 MyApp），请在不同的属性中跟踪它们。如果您想一起查看数据，使用 AdMob 创建帐户可让您通过汇总属性在一个位置查看所有数据。然后，您可以设置新视图来组织和比较 Google Analytics（分析）报告中的表现。

[https://support.google.com/analytics/answer/2587087?hl=en](https://support.google.com/analytics/answer/2587087?hl=en)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:00:48.240

[您可以在最新版本的Google Analytics SDK](https://developers.google.com/analytics/devguides/collection/ios/v2/advanced#multiple-trackers)中使用多个跟踪器 ID，这样您就可以拥有适用于 iOS 和 android 的组合跟踪器以及每个应用程序的单独跟踪器。

# xml - XPath 来识别特定的子组

> ID：13681347
> 
> 赞同：4
> 
> 时间：2012-12-03T10:30:11.873
> 
> 标签：xml, xpath

假设我有一些这样的 XML：

```
<group>
  <request>
    <field id="a"/>
    <field id="b"/>
    <field id="c"/>
  </request>
  <request>
    <field id="a"/>
    <field id="b"/>
    <field id="d"/>
  </request>
</group> 
```

请注意，`<request>`不保证元素的顺序。

我想提出两个 XPath 表达式，第一个检查`<request>`具有子 a、b 和 c 的 a 是否存在，第二个检查`<request>`具有子 a、b 和 d 的 a 是否存在。

我该如何指定？我最接近的使用编号谓词语法，但我缺少有关如何指定多个子匹配项的内容，并且`<request>`未定义元素顺序的事实也让我感到困惑。

提前致谢

格伦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:32:21.403

> 我想提出两个 XPath 表达式，第一个检查 a `<request>`with children `a`, `b`and`c`存在，第二个检查 a `<request>`with children `a`, `b`and `d`exists

**使用**：

```
boolean(/*/request[field[@id='a'] and field[@id='b'] and field[@id='c']]) 
```

**对于第二个表达式使用**：

```
boolean(/*/request[field[@id='a'] and field[@id='b'] and field[@id='d']]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:33:35.813

这不是你要找的吗？

```
request[field[@id = 'a'] and field[@id='b'] and field[@id='c']] 
```

?

# svn - 使用 SilkSVN 检查修改时排除 1 个目录

> ID：13681349
> 
> 赞同：0
> 
> 时间：2012-12-03T10:30:24.763
> 
> 标签：svn, command-line, powershell-2.0

我正在尝试编写一个脚本（命令行或 Powershell 或...），这将允许我检查是否有文件被修改而不被签入...

我们已经建立了一个网站，并且一直使用 SVN Turtoise 作为 SVN 客户端。我的脚本应该每隔 x 小时运行一次，并检查是否在服务器上修改了任何文件，而没有将其签入 SVN。那些修改过的文件应该列在一个 txt 文件中（如果可能的话，它应该发送一封电子邮件通知某人有修改过的文件）。

现在我的脚本非常有限：

> svn 状态 -q > modified_files.txt

这正是我想要的。
但是，有一个目录包含日志和用户上传的内容，因此不应检查该文件夹是否有修改。我怎样才能用丝绸做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:46:53.393

1.  如果您的站点是工作副本（看起来是这样，因为状态命令有效），您为什么关心修改过的文件？只要承诺！
2.  如果此文件夹也在版本控制下 - 你做坏事（tm）。只需将此文件夹从版本控制中排除并使用与`svn status -q`以前相同的内容（但请参见第 1 页）
3.  您可以（在现场 WC）将**上传文件夹以外的所有文件和目录**添加到更改列表中，并使用带有`--changelist`选项的状态命令

PS：重新制作团队工作流程，将直接在现场排除修改文件，并且将仅使用“通过钩子从repo更新”方法，将是解决问题的首选方式

# php - 将 mysql db（带数字的数据）导出到 csv

> ID：13681353
> 
> 赞同：2
> 
> 时间：2012-12-03T10:31:02.217
> 
> 标签：php, mysql

我试图写一个 coed 我必须将我的数据库的内容导出到一个 csv 文件中

导出已经有效，但是我导出的 csv 存在数字问题

例如我的 sql 数据库看起来像这样

```
telephone number
+639063073755 
```

但是在导出的 csv 中，电话号码中的数据变成了这样

```
telephone number
6.39063E+11 
```

电话号码变成指数

有没有办法来解决这个问题

这是我的代码

```
$sql = DB::query("SELECT * FROM table 1 order by id ASC");
$col2 = DB::query("SELECT * FROM table2 order by col_id ASC");
$rp_name = DB::queryOneField('rp_name',"SELECT * FROM report_presets where rp_id=%i",$_GET['rp_id']);
$rp_name = str_replace(" ","",$rp_name);

$line1 .= "Telephone Number";

foreach($sql as $row){
$line2 .=

str_replace(",","",$row[mobile_no]). ","

."\n";
    }

$data="$line1\n$line2\n";

header("Content-type: application/x-msdownload"); 
header("Content-Disposition: attachment; filename=".$rp_name.".csv"); 
header("Pragma: no-cache"); 
header("Expires: 0"); 
print "$header\n$data"; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:35:02.867

如果您使用 excel 查看 csv，则可能会出现此问题。那不是您的代码的问题。尝试将列格式化为数字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:38:15.747

问题在于 Excel 如何处理 CSV 的内容。按照[这些说明](http://risingline.com/use-excel-read-csv-without-reformatting.php)来获得所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:38:52.970

那是因为 excel 单元格宽度。您可以在电话号码前添加任何字符，例如“call:989898989898”。那么就不会有问题了。

# c - C：为什么用 %s 打印一个空字符会打印“（null）”？

> ID：13681355
> 
> 赞同：6
> 
> 时间：2012-12-03T10:31:11.690
> 
> 标签：c, gcc

为什么用 %s 打印空字符 ('\0', 0) 实际上会打印 "(null)" 字符串？

像这样的代码：

```
char null_byte = '\0';
printf("null_byte: %s\n", null_byte); 
```

...印刷：

```
null_byte: (null) 
```

...它甚至在 Valgrind 下运行没有错误，我得到的只是编译器警告`warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘int’ [-Wformat]`（注意：我在 32 位 Ubuntu 上使用 gcc 4.6.3）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T10:32:50.807

这是未定义的行为，但它发生在您的实现中：

*   您传递的`int`0 值`%s`作为空指针读取
*   `%s`by的处理`printf`具有特殊情况代码来识别空指针和 print `(null)`。

这些都不是标准所要求的。需要 [*] 的部分是`char`varargs 中使用的 a 作为`int`.

[*] 好吧，鉴于在您的实现中，所有的值`char`都可以表示为`int`. 如果你在一些有趣的实现中`char`是无符号的并且宽度与 相同`int`，它将被传递为`unsigned int`。我认为有趣的实现将符合标准。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T10:34:11.837

好吧，对于初学者来说，你做错了。`'\0'`是一个字符，应该用`%c`and not打印`%s`。我不知道这是否是出于实验目的而故意的。

的实际二进制值`\0`是 0。您试图将值 0 转换为`char *`指针，这将导致无效引用和崩溃。您的编译器通过对值进行特殊处理来防止这种情况发生`%s`。

Valgrind 不会捕获它，因为它运行在生成的二进制文件上，而不是源代码上（你需要一个静态分析器来代替）。由于编译器已经将该调用转换为安全的“空指针”文本，因此 valgrind 不会发现任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:36:29.567

null_byte 包含 0。当您在 printf 中使用 %s 时，您正在尝试打印一个字符串，该字符串是一个 char 的地址（一个 char *）。您在代码中所做的是将地址 0 (NULL) 作为字符串的地址传递，这就是输出为空的原因。编译器警告您将错误的类型传递给 %s 修饰符。试试 printf("null_byte: %s\n", &null_byte);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:33:31.140

您的`printf`语句正在尝试打印一个字符串，因此将值解释`null_bye`为`char *`值为 null 的 a。注意警告。要么这样做

```
printf("null_byte: %s\n", &null_byte); 
```

或这个

```
printf("null_byte: %c\n", null_byte); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T10:34:42.383

因为`printf`是可变参数，所以通常的参数提升被执行，`null_byte`所以它被提升（强制转换）到`int`, value `0`。

`printf`然后读取一个`char *`指针，并将`0`int 解释为空指针。您的 C 标准库具有将空字符串打印为`(null)`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-14T15:17:21.957

在 XV6 中为其他答案添加一个实现示例，这是 Unix v6 的教育重新实现，如果您将零值传递给`%s`，它会打印`(null)`：

```
void printf(int fd, const char *fmt, ...) {
    uint *ap = (uint*)(void*)&fmt + 1;
    ...
    if(state == '%') {
        ...
        if(c == 's') {
            s = (char*)*ap;
            ap++;
            if(s == 0)
                s = "(null)";
            while(*s != 0){
                putc(fd, *s);
                s++;
            }
        }
    }
} 
```

# c# - C# 中的线程、值类型和引用类型说明？

> ID：13681356
> 
> 赞同：9
> 
> 时间：2012-12-03T10:31:12.217
> 
> 标签：c#, .net, multithreading, stack

*在阅读了 Jon Skeet的[文章](http://www.yoda.arachsys.com/csharp/threads/) 和msdn 的[这篇](http://msdn.microsoft.com/en-us/magazine/cc163744.aspx)文章后，我还有一个问题*

假设我有这个代码：

```
 MyPerson mp = new MyPerson(); //Field

  int g=0; //Field

  public void DoWork ()
   {
      int i;
      MyPerson mp2 = new MyPerson();  
      ...
   } 
```

现在假设我有 2 个线程。哪个运行`DoWork`。（让我们暂时忽略竞争条件）

*   他们会看到相同的`g`内容还是每个线程都有自己的项目？? （ 价值 ）

*   他们会看到相同的`mp` 内容还是每个线程都有自己的项目？（ 实例 ）

*   他们会看到相同的`i`内容还是每个线程都有自己的项目？（ 价值 ）

*   他们会看到相同的`mp2`内容还是每个线程都有自己的项目？（ 实例 ）

*   如果他们都看到相同的东西，我为什么需要`static`？

*我已经搜索了很多关于这个主题的**文章，但找不到任何****文章**指出：不同的线程，引用类型和值类型......）*

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T10:37:51.253

两个线程都不会简单地“运行`DoWork`”；它们`DoWork` *在特定对象上*运行。如果两个线程是针对不同的实例创建的，那么`mp`和`g`将是完全独立的字段。如果两个线程是针对**同一个**实例创建的，那么`mp`和`g`将被共享*，但*不能保证线程会看到另一个线程所做的更改，除非您使用同步或`volatile`访问。

例如：

```
var obj = new SomeObject();
Thread thread1 = new Thread(obj.DoWork);
Thread thread2 = new Thread(obj.DoWork); // clearly targeting the same instance 
```

对比

```
var obj = new SomeObject();
Thread thread1 = new Thread(obj.DoWork);
obj = new SomeObject();
Thread thread2 = new Thread(obj.DoWork); // targeting a different instance 
```

局部变量`i`和`mp2`严格特定于每个线程。

附加说明：即使它们是单独的字段/本地，如果后面的某些代码`...`重新分配`mp`或`mp2`引用*同一个对象*，那么它们将在同一个对象上争吵；将适用相同的同步/`volatile`规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T10:35:16.083

变量`g`和`mp`对包含的类是“全局的”，因此它们将是两个线程看到的相同对象。是在事件`i`中声明的局部变量；`DoWork`随后，这将仅对背景/替代线程“可见”。

他们没有“看到”相同的东西，因此`static`在这种情况下，关键字没有相关性。

我希望这有帮助。**

# patch - 内核补丁命令挂起

> ID：13681357
> 
> 赞同：8
> 
> 时间：2012-12-03T10:31:13.497
> 
> 标签：patch

我下载了 2.4.20 内核源代码和 ppc 补丁，并一直在尝试将补丁应用于源代码。我把2.4.20源码目录和补丁文件放在同一个目录下，命令是 `$patch -p1 {path/to/patch/file}.`.但是提示符挂在那里。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T13:12:18.673

对，它需要输入（补丁内容）。您应该将其重定向到补丁工具：

```
patch -p1 < /path/to/patch 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:19:45.430

您可以重定向，也可以使用以下`-i`标志：

> -i PATCHFILE --input=PATCHFILE 从 PATCHFILE 而不是标准输入读取补丁。

# cognos-8 - Cognos 8 Reports - 为不同的语言环境指定小数分隔符

> ID：13681363
> 
> 赞同：0
> 
> 时间：2012-12-03T10:31:35.640
> 
> 标签：cognos-8, cognos-bi

我有一个基于 Cognos-8 的报告，其中包含多个数字列。我已将这些列的小数分隔符显式设置为 Number Decimal Places: 2 Decimal Separator: period (.) 负数符号: ()

当我在英语语言环境中运行报告时，所有列都正确显示输出，例如：1.20、30.33、(3.30)

当我在法语语言环境中运行报告时，负数输出以分隔符逗号 (,) 而不是句点 (.) 显示。什么可能导致这种情况，如何在法语语言环境中将分隔符设置为逗号？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:47:25.053

找到了解决方案。

我将报告设置为每列的负条件变量，然后将分隔符设置为句点。这修复了它。

# git - 使用 git for windows 时，git bash 不能工作？

> ID：13681368
> 
> 赞同：1
> 
> 时间：2012-12-03T10:31:49.753
> 
> 标签：git, msysgit

![使用 git1.8 for windows 时的问题](../Images/c397f6de4ccaa81584e8a55095892f40.png)

我在 windows7 中安装了 git-1.8，但是遇到了这个问题（几乎每次我使用 'git config' 或其他的时候），有人能告诉我为什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:36:34.973

我有适用于 Windows 的 msysgit 和 GitHub，但我建议使用便携式版本的 msysgit 以避免 Windows 注册表中的任何冲突。

此外，`WFSO`还有一个[Windows 信号量](https://github.com/bjoernknafla/amp/issues/6#issuecomment-373774)( `WaitForSingleObject`)，例如在[issue 457中说明。](http://code.google.com/p/msysgit/issues/detail?id=457)这是资源死锁的症状，bash（G4W 和 msysgit）都将使用该资源

> 随着多路复用的添加，在生成客户端之前会从套接字读取第二个线程，并且它会一直持续到应该写入来自子级的所有数据之后。这会导致死锁。

我尽量不要同时使用它们。

# python - 如何在多线程 python 应用程序中创建全局错误处理程序

> ID：13681370
> 
> 赞同：2
> 
> 时间：2012-12-03T10:31:50.697
> 
> 标签：python, multithreading, error-handling

我正在用 python 开发一个多线程应用程序。我有以下情况。

1.  有 2-3 个生产者线程与 DB 通信并以大块的形式获取一些数据并将它们填充到队列中
2.  有一个中间工作者，它将生产者线程获取的大块分成较小的块，并将它们填充到另一个队列中。
3.  有 5 个消费者线程使用中间工作线程创建的队列。
4.  生产者线程通过其 API 访问数据源的对象。这些数据源是完全独立的。所以这些生产者只了解数据源对象应该给出的数据的存在或不存在。
5.  我创建了这三种类型的线程，并通过在它们上调用 join() 使主线程等待这些线程的完成。

现在对于这样的设置，我想要一个通用的错误处理程序，它可以感知任何线程的失败、任何异常并决定要做什么。例如，如果我在启动应用程序后按 ctrl+c，主线程会死掉，但生产者、消费者线程继续运行。我希望一旦按下 ctrl+c 整个应用程序就应该关闭。同样，如果数据源模块中发生某些 DB 错误，则应通知生产者线程。

这是我到目前为止所做的：

我创建了一个类 ThreadManager，它的对象被传递给所有线程。我编写了一个错误处理程序方法并将其传递给`sys.excepthook`. 这个处理程序应该捕获异常、错误，然后它应该调用 ThreadManager 类的方法来控制正在运行的线程。这是片段：

```
class Producer(threading.Thread):
    ....
    def produce():
        data = dataSource.getData()

class DataSource:
    ....
    def getData():
        raise Exception("critical")

def customHandler(exceptionType, value, stackTrace):
     print "In custom handler"

sys.excepthook = customHandler 
```

现在当生产者类的线程调用 DataSource 类的 getData() 时，会抛出异常。但是这个异常永远不会被我的 customHandler 方法捕获。

我错过了什么？同样在这种情况下，我还可以应用哪些其他策略？请帮忙。感谢您有足够的耐心阅读所有这些:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T19:11:27.353

你需要的是一个装饰器。本质上，您正在修改原始函数并放入 try-except ：

```
def exception_decorator(func):
    def _function(*args):
        try:
            result = func(*args)
        except:
            print('*** ESC default handler ***')
            os._exit(1)
        return result
    return _function 
```

如果您的线程函数称为 myfunc，则在函数定义上方添加以下行

```
@exception_decorator
def myfunc():
    pass; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:38:36.987

您不能在按 Ctrl+C 时捕获“KeyboardInterrupt”并执行以下操作：

```
for thread in threading.enumerate():
    thread._Thread__stop()
    thread._Thread__delete()
while len(threading.enumerate()) > 1:
    time.sleep(1)
os._exit(0) 
```

并且在每个线程类中都有一个标志 self.alive 理论上你可以调用 thread.alive = False 并让它优雅地停止？

```
for thread in threading.enumerate():
    thread.alive = False
    time.sleep(5) # Grace period
    thread._Thread__stop()
    thread._Thread__delete()
while len(threading.enumerate()) > 1:
    time.sleep(1)
os._exit(0) 
```

例子：

```
import os
from threading import *
from time import sleep

class worker(Thread):
    def __init__(self):
        self.alive = True
        Thread.__init__(self)
        self.start()
    def run(self):
        while self.alive:
            sleep(0.1)

runner = worker()

try:
    raw_input('Press ctrl+c!')
except:
    pass
for thread in enumerate():
    thread.alive = False
    sleep(1)
    try:
        thread._Thread__stop()
        thread._Thread__delete()
    except:
        pass
# There will always be 1 thread alive and that's the __main__ thread.
while len(enumerate()) > 1:
    sleep(1)
os._exit(0) 
```

尝试通过更改内部系统异常处理程序来解决它？

```
import sys
origExcepthook = sys.excepthook
def uberexcept(exctype, value, traceback):
    if exctype == KeyboardInterrupt:
        print "Gracefully shutting down all the threads"
        # enumerate() thingie here.
    else:
        origExcepthook(exctype, value, traceback)
sys.excepthook = uberexcept 
```

# java - 在 Java 中运行 .jar

> ID：13681374
> 
> 赞同：0
> 
> 时间：2012-12-03T10:32:16.257
> 
> 标签：java, exception, jar

我想`.jar`在 Java 中运行一个文件，但是我得到一个异常并且它不起作用。在目录**C:/Users/Administrator/Desktop/apache-solr-4.0.0/example**中，我有一个名为**start.jar**的文件。我的最后一个例子是这个，但它抛出了一个异常。我必须做什么才能修复它？

```
public void runStart()  {
    try {
        Runtime rt = Runtime.getRuntime();
        Process p = rt.exec("C:\\Users\\Administrator\\Desktop\\apache-solr-4.0.0\\example\\start.jar");
    } catch (IOException ex) {
        Logger.getLogger(SolrForm.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:34:37.383

您需要在命令行中执行 with `java -jar`，否则您实际上并没有执行任何操作。

例如`rt.exec("java -jar myjar.jar");`

哦，*您*需要等待该过程完成；否则它可能会在超出范围时意外终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:39:10.467

当您尝试在控制台中运行该命令时，它也不起作用。jar 文件本身不是可执行文件，但它可以由 Java 执行。

尝试这样做：

```
public void runStart()  {
    try {
        Runtime rt = Runtime.getRuntime();
        Process p = rt.exec("java -jar C:\\Users\\Administrator\\Desktop\\apache-solr-4.0.0\\example\\start.jar");
    } catch (IOException ex) {
        Logger.getLogger(SolrForm.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

这样你启动Java，说你给它一个jar。如果 Java 在您的路径中（或在当前目录中），它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:35:13.583

您只传递一个文件，即可执行应用程序。假设您的 Java 环境已配置，您应该将您的行更改为：

```
Process p = rt.exec("java - jar C:\\Users\\Administrator\\Desktop\\apache-solr-4.0.0\\example\\start.jar"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:37:19.543

尝试这样的事情：

```
rt.exec("c:\\java_path\\bin\\java -jar C:\\Users\\Administrator\\Desktop\\apache-solr-4.0.0\\example\\start.jar"); 
```

确保`c:\\java_path\\bin\\java`用您的实际绝对路径替换为 java 二进制文件。

# android - 如何在没有活动的情况下在android中启动服务

> ID：13681385
> 
> 赞同：6
> 
> 时间：2012-12-03T10:32:59.503
> 
> 标签：android, service, android-activity, broadcastreceiver

我是android的初学者。我有两节课，第一节课是

```
public class SmsReceiver extends BroadcastReceiver{} 
```

第二课是

```
public class SMS extends Activity{} 
```

我想做的只是：当我收到短信时，开始活动并做点什么。但我想使用“服务”而不是“活动”。我的意思是当应用程序启动时，然后在没有活动的情况下启动服务。

这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:44:32.400

从 SmsReceiver 启动您的服务：

```
public class SmsReceiver extends BroadcastReceiver{
@Override
   public void onReceive(Context context, Intent intent) {
      String action = intent.getAction();
      if(action.equals("android.provider.Telephony.SMS_RECEIVED")){
        //action for sms received

           // start service here
          Intent intent=new Intent(context,Your_Service.class);
          context.startService(intent);

      }
      else {

      }     
   }
} 
```

并确保您已将服务注册`AndroidManifest.xml`为：

```
<service android:name="com.xxx.xx.Your_Service" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:35:32.137

是的，您可以通过创建一个在应用程序启动时调用您的服务的广播接收器来做到这一点。这是我给出的完整答案。[Android - 在启动时启动服务](https://stackoverflow.com/questions/7690350/android-start-service-on-boot/7690600#7690600)

如果您不想要任何图标/启动器为您的应用程序，您也可以这样做，只是不要创建任何活动

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

只需将您的服务声明为正常声明即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:44:18.187

当您收到短信时，您可以通过广播接收器启动您的服务

```
@Override
public void onReceive(Context context, Intent intent) {

        try {

            context.startService(new Intent(context,
                    YourService.class));
        } catch (Exception e) {
            Log.d("Unable to start ", "Service on ");
        } 
```

请确保您已提及您的 AndroidManifest.xml 文件的权限

```
 <uses-permission android:name="android.permission.RECEIVE_SMS"> 
```

对于短信发送和接收，您可以查看本教程[在 android 中发送短信](http://mobiforge.com/developing/story/sms-messaging-android)

# c# - 意外的语言行为 i++

> ID：13681386
> 
> 赞同：2
> 
> 时间：2012-12-03T10:33:07.513
> 
> 标签：c#, .net, post-increment, pre-increment

我尝试执行以下操作

```
i=0;
if (i++ % Max_Col_items == 0 && i !=0)
{

} 
```

发现`i`中间增加了

```
i % Max_Col_items == 0;
i=i+1;
i !=0; 
```

当我认为它最终会增加`i`时：

```
i % Max_Col_items == 0;
i !=0;
i=i+1; 
```

`i++`任何人都可以找到有关C# 工作原理的解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:34:27.063

`i++`将为您提供原始值，而不是增加的值，您将在下一次使用时看到`i`. 如果您想获得增加的值，请使用`++i`.

[请参阅Eric Lippert 对同一问题](https://stackoverflow.com/a/3346729/961113)的详细回答

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:36:22.790

`i++`立即增加 的值，`i`但计算为增加前的值。

直到代码行的末尾，它才会保留`i`untouched 的值，这似乎是您所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:49:21.940

那是因为（正如您正确指出的那样）

我 % Max_Col_items == 0;

is an operation in itself. Once that line of operation is over (with value of i ) the increment is done.

# c++ - 将自己的迭代器与 std::string 一起使用

> ID：13681387
> 
> 赞同：0
> 
> 时间：2012-12-03T10:33:08.683
> 
> 标签：c++, stl

我已经定义了自己的字符迭代器类。我可以以某种方式将其插入 std::string 以便我不必再次实现 std::string 类型的接口吗？我检查了 std::basic_string 的模板参数，但它不需要任何此类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:35:39.470

一种想法是提供返回迭代器的函数`begin(std::string)`。`end(std::string)`然后可以在所有需要迭代器的地方使用这些。

`begin()`自由函数风格是[从 c++11 开始](http://en.cppreference.com/w/cpp/iterator/begin)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:57:11.083

std::string 有一个重载的构造函数，它将采用一个迭代器对。那会起作用，但要创建一个副本。这当然是你能做的最好的。考虑一个具有“小字符串优化”的实现，即对象本身`char[N]`内部的一个小字符串。`std::string`这很可能与您的内存布局不兼容。

# sql - 用于内存数据时，LINQ 查询返回错误结果

> ID：13681388
> 
> 赞同：1
> 
> 时间：2012-12-03T10:33:10.580
> 
> 标签：sql, linq

我有一个查询（在 SQL 中），我在 SSMS 中运行并得到一个包含 32 行的结果集，就像我想要的那样。

然后，我将我的 SQL 查询逐行转换为 LINQ 查询，并在 Visual Studio 中针对同一个数据库运行它，并得到一个包含 32 行的列表——就像我想要的那样。

问题来了。如果我做这样的事情

```
MyEntities entities = new MyEntities();
List<MyEntity> resultset = entities.MyEntity.ToList(); 
```

...并针对内存中的数据集合运行我的 LINQ 查询，我只得到 27 行，现在有些行重复了，所以它们甚至没有区别——但它们肯定在数据库中。

我认为这是因为 LINQ 在向数据库发送查询时会生成 SQL（因此结果是正确的），但当目标是内存数据结构时会执行其他操作。不知道这里发生了什么。有什么想法吗？提前致谢！

编辑：只是为了澄清。这给出了正确的结果

```
List<MyEntity> results = entities.MyEntity.Where(x => x == ...).ToList(); 
```

这不

```
MyEntities entities = new MyEntities();
List<MyEntity> listData = entities.MyEntity.ToList();

List<MyEntity> results = listData.Where(x => x == ...).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:57:47.323

解决了！

解决方案是在数据库表中设置一个主键。

不管怎么说，还是要谢谢你 ：）

# java - 使用 ssh 协议从远程计算机启动 java 应用程序

> ID：13681393
> 
> 赞同：0
> 
> 时间：2012-12-03T10:33:25.057
> 
> 标签：java, ssh

我想远程启动我的 java 应用程序。我想使用 SSH 协议作为一种通信方式。有没有图书馆可以帮助做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:01:13.203

[java中的SSH客户端和服务器](https://stackoverflow.com/questions/7583507/ssh-client-and-server-in-java)

但我只会使用系统中内置的 ssh 支持，因此您可以使用 ssh 连接到盒子，然后只需使用终端访问您的 java 应用程序的命令行控制台。

# ssrs-2008 - 导出到 Excel 时列可见性不起作用

> ID：13681395
> 
> 赞同：0
> 
> 时间：2012-12-03T10:33:27.613
> 
> 标签：ssrs-2008, reporting-services

我的报告中有一个列，我想根据一个表达式隐藏它：

```
=IIF((ReportItems!Textbox16.Value ="USD" OR Parameters!BinderID.Value=10263 OR Parameters!BinderID.Value=10536 OR Parameters!BinderID.Value=10718 OR Parameters!BinderID.Value=10248 OR Parameters!BinderID.Value=10535 OR Parameters!BinderID.Value=10960),True,False) 
```

当我运行报告时，隐藏的表达式运行良好：该列被隐藏。但是，当我导出到 Excel 时，该列会重新出现，而它不应该出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:51:12.033

[该讨论](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/1012a7dc-ad8a-431c-a138-54a173e31016/)表明它无法完成，并且需要解决方法，例如仅包含所需列的单独报告。

# javascript - Object.defineProperty 是否检查属性是否已定义？

> ID：13681399
> 
> 赞同：3
> 
> 时间：2012-12-03T10:33:34.870
> 
> 标签：javascript, json, object, properties

我需要为 javascript 对象定义属性。
`var obj = {};`
`obj['prop1'] = 1`

通过上述方式，我们可以定义属性。
现在，让我们使用`Object.defineProperty`
`var obj = {};` `Object.defineProperty(obj,'prop1',{value:1});`
这种替代方式。

两者有什么区别？
是否`Object.defineProperty`检查属性是否已经定义？
我相信`obj['prop1'] = 1`检查财产
谢谢:)

**编辑**
它们之间的任何性能变化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T10:36:07.563

既不是直接对象访问，也`Object.defineProperty`不会“*检查*”现有属性。这两者之间的唯一区别是修改*属性描述符值*的可能性。

属性描述符是

*   可枚举的
*   可配置
*   可写

这些都是`true`通过使用*直接属性访问*设置的。`Object.defineProperty`您可以选择单独设置这些属性。我建议你阅读这篇[MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)以了解其含义。

例如，如果某个属性拥有 flag `configurable=false`，则您不能覆盖或删除它（您的问题可能就是这种情况）。

* * *

关于性能：

由于`Object.defineProperty`是一个每次都需要执行的函数，因此它必须比直接访问对象慢。我创建了这个小基准：

[http://jsperf.com/property-access-with-defineproperty](http://jsperf.com/property-access-with-defineproperty)

但是，即使差异看起来很大，您也可能不会忘记`Object.defineProperty`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:37:00.493

Mozilla[说](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)：

> 当属性已经存在时，Object.defineProperty() 会尝试根据描述符中的值和对象的当前配置来修改属性。如果旧描述符将其可配置属性设置为 false（该属性被称为“不可配置”），则除可写之外的任何属性都不能更改。在这种情况下，也不可能在数据和访问器属性类型之间来回切换。
> 
> 如果一个属性是不可配置的，它的可写属性只能被更改为 false。
> 
> 除非当前值和新值相同，否则尝试更改不可配置的属性属性（除了可写属性）时会抛出 TypeError。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:39:26.743

在这两种情况下，如果属性存在，它的值将被覆盖，否则将被创建

# c++ - 如何初始化和定义指向指针二维数组的指针？

> ID：13681403
> 
> 赞同：0
> 
> 时间：2012-12-03T10:33:45.617
> 
> 标签：c++, c, pointers, initialization

我对 C 程序很陌生。我有这样的功能：

```
void lfit( float x[], float y[], float sig[], int ndat, float a[], int ia[], int ma,float **covar, float *chisq, float (*funcs)(float, float [], int))

//Given a set of data points x[1..ndat], y[1..ndat] with individual standard deviations
//sig[1..ndat], use χ2 minimization to fit for some or all of the coefficients a[1..ma] of
//a function that depends linearly on a, y =i ai × afunci(x). The input array ia[1..ma]
//indicates by nonzero entries those components of a that should be fitted for, and by zero entries
//those components that should be held fixed at their input values. The program returns values
//for a[1..ma], χ2 = chisq, and the covariance matrix covar[1..ma][1..ma]. (Parameters
//held fixed will return zero covariances.)Th e user supplies a routine funcs(x,afunc,ma) that
//returns the ma basis functions evaluated at x = x in the array afunc[1..ma].

{
void gaussj(float **a, int n, float **b, int m);

int i,j,k,l,m,mfit=0;
float ym,wt,sum,sig2i,**beta, *afunc;

afunc=vector(1,ma);
beta=matrix(1,ma,1,1);

for (j=1;j<=ma;j++)
    if (ia[j]) 
        mfit++;

if (mfit == 0) 
    nrerror("lfit: no parameters to be fitted");
for (j=1;j<=mfit;j++) {                       //Initialize the (symmetric)matrix.
    for (k=1;k<=mfit;k++) 
        covar[j][k]=0.0;
    beta[j][1]=0.0;
}

for (i=0;i<ndat;i++) {                       //Loop over data to accumulate coefficients of the normal equations.

(*funcs)(x[i], afunc ,ma);
ym=y[i];
if (mfit < ma) {                              //Subtract off dependences on known pieces of the fitting function.
    for (j=1;j<=ma;j++)                
        if (!ia[j]) 
            ym -= a[j]*afunc[j];
}

sig2i=1.0/SQR(sig[i]);
for (j=0,k=0,l=1;l<=ma;l++) {

    if (ia[l]) {
        wt=afunc[l]*sig2i;
        for (j++,k=0,m=1;m<=ma;m++)
            if (ia[m]) 
                covar[j][++k] += wt*afunc[m];

        beta[j][1] += ym*wt;
    }

}

for (j=2;j<=mfit;j++)                    //Fill in above the diagonal from symmetry.
    for (k=1;k<j;k++)
        covar[k][j]=covar[j][k];

gaussj(covar,mfit,beta,1);              //Matrix solution.

for (j=0,l=1;l<=ma;l++) 
    if (ia[l]) 
        a[l]=beta[++j][1];              //Partition solution to appropriate coefficients a Evaluate χ2 of the fit.

*chisq=0.0;

for (i=1;i<=ndat;i++) { 
        (*funcs)(x[i], afunc,ma);
        for (sum=0.0,j=1;j<=ma;j++) 
            sum += a[j]*afunc[j];
*chisq += SQR((y[i]-sum)/sig[i]);

}
//covsrt(covar,ma,ia,mfit);              //Sort covariance matrix to true order of fitting coefficients.
free_vector(afunc,1,ma); 
free_matrix(beta,1,ma,1,1);
}
} 
```

`int main()` 部分当我想调用这个函数时，我遇到了一些问题。我正在写的主要部分是这样的，例如：

```
int main()
{

float x1[]={100.000000f,88.00000f,76.199997f,68.599998f,54.500000f,37.599998f,26.500000f,17.000000f,8.300000f,0.900000f,-7.200000f,-17.000000f,-24.900000f,-33.799999f,-42.500000f,-51.000000f,-60.500000f,-69.500000f,-75.300003f,-83.099998f,-94.099998f,-103.000000f,-110.099998f};
float y1[]={-2.876821f,-2.788704f,-2.596228f,-2.468143f,-1.898085f,-1.296223f,-0.664981f,-0.245603f,-0.280993f,-0.094657f,-0.184912f,-0.263328f,-0.181819f,-0.132037f,-0.029368f,0.134307f,0.257734f,0.305223f,0.091159f,0.063768f,-0.163334f,-0.136314f,-0.372106f};
float sig1[]={1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};
float a1[]={1.8f,1.6f,1.7f,1.3f};
int ia1[]={2,3,4,2}; 
int ma=4, ndat=23 ;
float chisq1, **covar;

lfit(x1,y1,sig1,ndat,a1,ia1,ma,covar,&chisq1, &funcs);

return 0;
} 
```

我总是得到的错误是：`Run-Time Check Failure #3 - The variable 'covar' is being used without being initialized.` 我尝试了不同的方法来初始化它，但没有一个起作用。

你有什么想法？我怎么解决这个问题 ？

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:42:27.117

第一件事：你的数组索引必须从零开始，所以 for 循环是`for(i=0; i < max; i++)`

获取二维数组的简单方法是：

```
float covar[4][4]; // Or whatever size is correct for you 
```

如果你需要 malloc 它，你可以这样做：

```
float ** Malloc2DFloat(int x, int y)
{
    float **MainArray = (float**)malloc(sizeof(float*) * x);
    int i;
    for (i=0; i < x; i++)
        MainArray[i] = (float*)malloc(sizeof(float) * y);

    return MainArray;
}
float **covar = Malloc2DFloat(4,4); 
```

您需要在 main 中执行此操作，或者将指向该函数的指针传递给您的函数并在其中 malloc ：

```
func(float ***covar)
{
    *covar = Malloc2DFloat(mfit, mfit); // Allocate like this
    (*covar)[0][0] = 3.41f; // Reference it like this
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:43:59.483

`covar`在填充之前，您必须为其分配内存。您可以将内存分配给`lfit`函数。去做：

你必须更新你`covar`在函数中的输入`lfit`

```
void lfit( float x[], float y[], float sig[], int ndat, float a[], int ia[], int ma,float ***covar, float *chisq, float (*funcs)(float, float [], int)) 
```

然后当你初始化矩阵时，你必须这样做

```
*covar = calloc(mfit,sizeof(float *));   
for (j=1;j<=mfit;j++) {   //Initialize the (symmetric)matrix.
    (*covar)[j] = calloc(mfit,sizeof(float)); //calloc will initialize the matrix to 0
    beta[j][1]=0.0;
} 
```

而不是旧的方式

```
for (j=1;j<=mfit;j++) {                       //Initialize the (symmetric)matrix.
    for (k=1;k<=mfit;k++) 
        covar[j][k]=0.0;
    beta[j][1]=0.0;
} 
```

并访问函数`covar`中的数据`lfit`：

```
float x=(*covar)[j][k];
(*covar)[j][k]=5.2; 
```

所以例如这条线

```
covar[j][++k] += wt*afunc[m]; 
```

应该更新为

```
(*covar)[j][++k] += wt*afunc[m]; 
```

当你调用函数时`lfit`

```
lfit(x1,y1,sig1,ndat,a1,ia1,ma,&covar,&chisq1, &funcs); 
```

# graph - 在图中找到恰好包含一个负边的最短路径

> ID：13681406
> 
> 赞同：0
> 
> 时间：2012-12-03T10:33:55.443
> 
> 标签：graph, shortest-path, dijkstra

我得到一个带有权重函数和顶点 s 的有向图。我的目标是找到任何其他顶点 v，即从 s 到 v 的最短路径，它恰好穿过一个负边。该算法的时间复杂度应该是 O(|E| + |V|*log|V|)，所以我想我需要以某种方式使用 Dijkstra 算法。

我猜我需要以某种方式将给定的图转换为具有非负权重的新图，该图中从 s 到 v 的最短路径将等同于给定图中所需的最短路径..或者我需要以某种方式修改 Dijkstra 的算法？

我试着想了一下，现在没有任何想法...... :(

# c++ - 编辑函数后出现 CL_INVALID_KERNEL_NAME 错误（更新日志文件）

> ID：13681407
> 
> 赞同：1
> 
> 时间：2012-12-03T10:33:56.337
> 
> 标签：c++, matrix, opencl, gpgpu

问题已解决（如果您有兴趣；您可以查看第二段；在该行下方）。现在我有一个新问题；为什么`#define BLOCK_DIM 16;` 会导致下面的函数出错？随便用`16`就好。

这是错误

```
 expected a "]"
      __local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;
                           ^

     line 110: error:
              expected a ")"
      __local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;
                                        ^

     line 110: error: operand
              of "*" must be a pointer
      __local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;

error:
          expected a ";"
          int Idout = get_local_id(0)*(BLOCK_DIM+1)+get_local_id(1);
                                                  ^ 
```

和功能

```
 __kernel void   transpose(
             __global float2* dataout, 
             __global float2* datain, 
             int width, int height)

// width = N (signal length) 
// height = batch_size (number of signals in a batch)

{
// read the matrix tile into shared memory

__local float2 block[32 * (32 + 1)] ;
   unsigned int xIndex = get_global_id(0);
   unsigned int yIndex = get_global_id(1);

    if((xIndex < width) && (yIndex < height))
    {
            unsigned int index_in = yIndex * width + xIndex;
                       int Idin = get_local_id(1)*(32+1)+get_local_id(0);
                       block[Idin]=  datain[index_in];
    }

barrier(CLK_LOCAL_MEM_FENCE);

// write the transposed matrix tile to global memory

             xIndex = get_group_id(1) * 32 + get_local_id(0);
             yIndex = get_group_id(0) * 32 + get_local_id(1);

    if((xIndex < height) && (yIndex < width))
    {
        unsigned int index_out = yIndex * height + xIndex;
        int Idout = get_local_id(0)*(32+1)+get_local_id(1);
                dataout[index_out] = block[Idout];
    }

} 
```

================================

我正在努力提高图像上 2D FFT 的性能。经过基准测试；我 regconize 转置函数是使程序变慢的原因，所以我用更优化的替换它。

但在那之后；我收到了之前正常工作的所有功能的返回码`CL_INVALID_KERNEL_NAME`。除了转置函数和`clSetKernelArg`宿主代码中；我没有改变其他任何东西。所以我没主意。希望大家帮帮我:)

更新：这里是错误。不要介意行号:) 这些行对我来说似乎很正常。有什么问题吗 ？

错误：

```
 expected a "]"
      __local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;
                           ^

     line 110: error:
              expected a ")"
      __local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;
                                        ^

     line 110: error: operand
              of "*" must be a pointer
      __local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;

error:
          expected a ";"
          int Idout = get_local_id(0)*(BLOCK_DIM+1)+get_local_id(1);
                                                  ^ 
```

这是**[内核文件](http://pastebin.com/SGrJuUac)**

新的那一个 ：

```
#define BLOCK_DIM 16

__kernel void   transpose(
             __global float2* dataout, 
             __global float2* datain, 
             int width, int height)

// width = N (signal length) 
// height = batch_size (number of signals in a batch)

{
// read the matrix tile into shared memory

__local float2 block[BLOCK_DIM * (BLOCK_DIM + 1)] ;
   unsigned int xIndex = get_global_id(0);
   unsigned int yIndex = get_global_id(1);

    if((xIndex < width) && (yIndex < height))
    {
            unsigned int index_in = yIndex * width + xIndex;
                       int Idin = get_local_id(1)*(BLOCK_DIM+1)+get_local_id(0);
                       block[Idin]=  datain[index_in];
    }

barrier(CLK_LOCAL_MEM_FENCE);

// write the transposed matrix tile to global memory

             xIndex = get_group_id(1) * BLOCK_DIM + get_local_id(0);
             yIndex = get_group_id(0) * BLOCK_DIM + get_local_id(1);

    if((xIndex < height) && (yIndex < width))
    {
        unsigned int index_out = yIndex * height + xIndex;
        int Idout = get_local_id(0)*(BLOCK_DIM+1)+get_local_id(1);
                dataout[index_out] = block[Idout];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:38:04.393

您的#define 问题.. 他们不需要分号。基本上，#define XY 将在编译之前将代码中所有出现的“X”替换为“Y”，如果最后添加一个分号，它将成为“Y”的一部分并产生大量语法错误。#define 不是语句。

实际上，这是一个简单的解释，但足以满足这个问题的范围（如果您想了解更多信息，我建议您查看预处理器教程和文档）。

# java - 我的 MySQL 中的数据不一致

> ID：13681408
> 
> 赞同：2
> 
> 时间：2012-12-03T10:33:57.477
> 
> 标签：java, mysql

我有一个做两件事的程序

1) 从 table1 中选择一个字段获取所需列的值将其更新一并

2) 将新的增量值更新回该表中。

现在，当两个用户同时调用该过程时，他们都会得到相同的值。

例如

如果 DB 中的值是 100，并且两个用户调用该过程，那么理想情况下他们应该得到 101 和 102。

但有时他们都得到了 101。

请帮助我纠正这个错误。程序是：

```
DELIMITER $$

BEGIN
declare trc_id INT;

 SELECT  distinct column1 into trc_id FROM table1 where column2=match_name and     status='A';

set abc=trc_id+1;

update table1 set column1=str_id where column2=match_name  and column1=trc_id;

END $$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:38:13.060

对您的程序使用[同步方法](http://www.javamex.com/tutorials/synchronization_synchronized_method.shtml)。

# ruby-on-rails-3 - rails 中的保留字列表 *3*

> ID：13681409
> 
> 赞同：14
> 
> 时间：2012-12-03T10:33:59.783
> 
> 标签：ruby-on-rails-3, reserved-words

RAILS-3 是否有一个好的、权威的保留字列表？

候选人：

*   [http://oldwiki.rubyonrails.org/rails/pages/ReservedWords](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)，但它似乎有点过时和rails2。
*   [http://cheat.errtheblog.com/s/rails_reserved_words](http://cheat.errtheblog.com/s/rails_reserved_words) （但似乎没有权威 - 它可能会不断增长......）
*   [http://latheesh.com/2010/02/02/rails-reserved-words/](http://latheesh.com/2010/02/02/rails-reserved-words/)

背景：我正在维护一个长期服务的 Rails 应用程序，它有很多保留字的用法（判断[http://oldwiki.rubyonrails.org/rails/pages/ReservedWords](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)似乎适用于 rails2）。然而，这些都没有真正干扰当前的活动（应用程序工作......以及我正在慢慢添加的规格和功能）。但是随着时间的流逝，我想删除保留字的那些用法，但是如果某些保留字不再真正保留，我不想打扰。因此，虽然更长的列表可能对新的 rails 应用程序有好处，但我需要比“它已在某个时候在网页上列出”更有力的理由来证明预算支出......）

也许 Rails 的本质是你找不到权威列表，但你可以找到“在某些时候对我不起作用的东西”....

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T14:38:48.447

[这](http://bparanj.blogspot.com/2011/07/reserved-words-in-rails.html)似乎是一个非常全面的列表。然而，你是对的。编程的本质意味着这个列表将不断变化。但是我会做一些研究......也许有一个网站可以根据您使用的 Rails 版本列出保留字。如果不是...也许有人应该开始研究它：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T20:40:32.227

这是 Rails 中保留字的良好协作列表：[https ://reservedwords.herokuapp.com/](https://reservedwords.herokuapp.com/)

# jsf - HTTP 会话中的 JasperPrint 对象

> ID：13681410
> 
> 赞同：2
> 
> 时间：2012-12-03T10:34:04.230
> 
> 标签：jsf, jasper-reports, dynamic-reports

许多示例/教程/书籍建议将 JasperPrint 对象保留在 HttpSession 中以实现：

*   通过 ImageServlet 在 HTML 报告中渲染图像
*   Web 应用程序中的报表分页

但我想知道这是否是最佳做法。纠正我，我的猜测是 JasperPrint 对象不是保留在会话中的微不足道的对象。

任何关于堆使用的经验或基准标记细节以及会话中使用 jasperPrint 可能每个节点执行多少并发报告将不胜感激。

在不将 jasperPrint 对象保留在会话中的情况下，是否还有其他替代方法可以实现这一目标？

我们正在使用带有 JSF 前端的动态报告 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:23:50.527

将它保存在内存中有什么问题？如果您不需要该对象，则可以将其删除

```
FacesContext.getCurrentInstance()
            .getExternalContext()
            .getSessionMap()
            .remove("#{YourSessionBean}"); 
```

# ruby-on-rails - Rails 独家查找协会

> ID：13681411
> 
> 赞同：0
> 
> 时间：2012-12-03T10:34:05.213
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

```
class List < AR::Base
  has_many :items
end

class Item < AR::Base
  belongs_to :list
  att_accessible :tag
end 
```

我想要一个只返回列表的方法，其中包含传递给该方法的**所有标签。**

IE`filtered_lists = List.filter_by_item_tags(['tag1', 'tag2'])`

我当前的实现返回一个列表，`tag1`或者`tag2`我希望它只返回**同时****包含** `tag1`和的列表`tag2`

到目前为止我所拥有的：

```
class List < AR::Base
  def self.filter_by_item_tags(tags)
    items = Item.includes(:lists)
    items.find_all_by_tag(tags).map(&:lists).flatten
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:52:22.160

我认为[`joins`有条件](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables)可能会有所帮助。你可以试试这样的（我没有测试过）

```
def self.filter_by_item_tags(tags)
  # Get items with the given tag, and check that all tags have been found
  List.joins(:items).where("items.tag in (?) and count(distinct items.tag) = ?", tags, tags.length)
end 
```

或者

```
List.joins(:items).select('count(distinct items.tag) as tags_count').where(:items => { :tag => tags }).group('tags_count').having('tags_count = ?', tags.length) 
```

# magento - 更改 Magento 中的结帐页面标题

> ID：13681415
> 
> 赞同：2
> 
> 时间：2012-12-03T10:34:21.463
> 
> 标签：magento, magento-1.7

如何更改 Magento 中的**结帐页面标题？**

![结帐标题](../Images/5bc217a12b89244dd37f73cbbfa5bbcd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:34:53.790

当然，最简单的方法是在翻译文件（`Mage_Checkout.csv`）中更改此标题。但是，如果您想使用一些自定义标签，并且不想在结帐时与其他块的本地翻译冲突，您应该更新这些标签：

这些类位于`app/code/core/Mage/Checkout/Block/Onepage`.

*   计费.php
*   航运.php
*   付款.php
*   审查.php

`_construct()`您可以在方法中更改标签。例如：

```
class Mage_Checkout_Block_Onepage_Review extends Mage_Checkout_Block_Onepage_Abstract
{
    protected function _construct()
    {
        $this->getCheckout()->setStepData('review', array(
            'label'     => Mage::helper('checkout')->__('Order Review'), // your custom label here
            'is_show'   => $this->isShow()
        ));
        parent::_construct();

        $this->getQuote()->collectTotals()->save();
    }
} 
```

您可以覆盖这些类。

# java - JAVA：我有地址；我怎样才能打印它的内容？

> ID：13681416
> 
> 赞同：-2
> 
> 时间：2012-12-03T10:34:23.447
> 
> 标签：java

简短版：我有一个地址；如何打印该地址的内容？

长版：我有这个对象，该对象有两个字段 - dest 和 source。来源作为地址提供给我：

```
 Field Detail
 dest
 public final VVarRef dest
 The variable/register to store the value into.

 source
 public final VMemRef source
 The memory location being read. 
```

我需要知道那个地址有什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:37:32.603

查看类的定义/文档`VMemRef`。

**更新：** 根据 API 文档链接，该类`VMemRef`有两个嵌套的子类，`VMemRef.Global`并且`VMemRef.Stack`. 因此，您必须确定它正在使用哪一个`instanceof`，转换为该类并使用其特定内容。

# php - 更改我的比例和作物类别以正常工作？

> ID：13681424
> 
> 赞同：1
> 
> 时间：2012-12-03T10:34:38.577
> 
> 标签：php, image-processing

> **可能重复：**
> [计算图像大小比例以调整大小](https://stackoverflow.com/questions/6594089/calculating-image-size-ratio-for-resizing)

我需要为我正在处理的项目自定义调整图像大小。我不想使用图书馆，因为我不想增加任何不必要的开销。我能够让我的班级缩放和裁剪图像。但是，它并没有给我想要的东西。目前它：

1.  调整图像大小
2.  将其裁剪到特定高度

但是，我需要它：

1.  调整图像大小，使其适合指定的尺寸。因此，一个 1000 x 500 的图像必须适合 300 x 300，必须调整大小，使其成为最大的一面，适合。即 1000 / (3 + 1/3) = 300，因此长度必须是：500 / (3 + 1/3) = 150。
2.  现在我们有一个 300 x 150 的图像，但不适合所需的 300 x 300 空间。因此，最后一步是将这个 300 x 150 图像居中放置在 300 x 300 白色画布上。

以下是我到目前为止所拥有的，但正如我所提到的，缺少第二个裁剪步骤：

```
class scale_and_crop
{
    public $width;
    public $height;

    public function __construct($width = 150, $height = 150) {
        $this->height = $height;
        $this->width = $width;
    }

    public function process($source, $target) {

      // 0\. See if already geneated
      if (file_exists($target)) {
        // do nothing
      }
      else {

        // 1\. recursively create folders
        $targetFolders = explode('/', $target);
        $mkThisDir = './';
        $count = 0;

        foreach ($targetFolders as $t) {
          if ($count == sizeof($targetFolders) - 1 ) continue;
          $mkThisDir .= $t.'/';
          if (!file_exists($mkThisDir) ) {
            mkdir($mkThisDir);
          }
          $count++;
        }

        // 2\. ... and then copy
        $realTarget = './'.$target;
        copy( './'.$source, $realTarget);

        // 3\. Resize
        $code = '.jpg';
        $image_path = $source;

        $thumb_width = $this->width;
        $thumb_height = $this->height;
        if (!(is_integer($thumb_width) && $thumb_width > 0) && !($thumb_width === "*")) {
            echo "The width is invalid";
            exit(1);
        }

        if (!(is_integer($thumb_height) && $thumb_height > 0) && !($thumb_height === "*")) {
            echo "The height is invalid";
            exit(1);
        }

            if (!file_exists($image_path)) {
               $image_path = strtolower($image_path);
              if (!file_exists($image_path)) {
                    $image_path = strtoupper($image_path);
                if (!file_exists($image_path)) {
                  print 'IMAGE_NOT_AVAILABLE'; 
                  die();
                }
              }
            }

            $source_image = null;
            $extension = pathinfo($image_path, PATHINFO_EXTENSION);
            switch ($extension) {
                case "jpg":
                case "jpeg":
                    $source_image = imagecreatefromjpeg($image_path);
                    break;
                case "gif":
                    $source_image = imagecreatefromgif($image_path);
                    break;
                case "png":
                    $source_image = imagecreatefrompng($image_path);
                    break;
                default:
                    print 'Fatal IMAGE Error: E838209-837620002'; die();  
                    break;
            }

            if ($source_image === FALSE) {
              die("Fatal error #42870664: could not generate image.");
        }

        $source_width = imageSX($source_image);
        $source_height = imageSY($source_image);

        if (($source_width / $source_height) == ($thumb_width / $thumb_height)) {
            $source_x = 0;
            $source_y = 0;
        }

        if (($source_width / $source_height) > ($thumb_width / $thumb_height)) {
            $source_y = 0;
            $temp_width = $source_height * $thumb_width / $thumb_height;
            $source_x = ($source_width - $temp_width) / 2;
            $source_width = $temp_width;
        }

        if (($source_width / $source_height) < ($thumb_width / $thumb_height)) {
            $source_x = 0;
            $temp_height = $source_width * $thumb_height / $thumb_width;
            $source_y = ($source_height - $temp_height) / 2;
            $source_height = $temp_height;
        }

        $target_image = ImageCreateTrueColor($thumb_width, $thumb_height);

        imagecopyresampled($target_image, $source_image, 0, 0, $source_x, $source_y, $thumb_width,     $thumb_height, $source_width, $source_height);

        $newFile = $target;

        $returnUrl = '';

        switch ($extension) {
            case "jpg":
            case "jpeg":
                imagejpeg($target_image,  $newFile, 100);
                $returnUrl = $newFile;
                break;
            case "gif":
                imagegif($target_image,  $newFile);
                $returnUrl = $newFile;
                break;
            case "png":
                imagepng($target_image, $newFile,  9);
                $returnUrl = $newFile; 
                break;
            default:
                exit(1);
                break;
        }

        imagedestroy($target_image);
        imagedestroy($source_image);

      }

    }

} 
```

我怎样才能让它按照我想要的方式裁剪？

# http-headers - 使用 jsonp 代理时如何发送标头？

> ID：13681426
> 
> 赞同：4
> 
> 时间：2012-12-03T10:34:43.070
> 
> 标签：http-headers, sencha-touch, sencha-touch-2, jsonp

我正在尝试从我的应用程序从 Web 服务获取数据以加载列表并使用拉刷新和 ListPaging 插件在滚动时加载更多内容。我使用 flickr API 进行了尝试，它工作正常，但是当我尝试访问我们自己的服务时出现问题，因为他们期望带有 Base64 编码数据的“授权”标头和“接受”标头来决定响应格式。

这就是我定义我的商店的方式：

```
Ext.define('myshop.store.CatalogListStore',{
    extend:'Ext.data.Store',
    requires: [
        'myshop.model.CatalogListItem'
    ],
    config:{
        model:'myshop.model.CatalogListItem',
        autoLoad :true,
        proxy: {
            type: 'jsonp',
            url: 'http://192.168.23.89:7003/xxx-service/test/catalog/list',
            useDefaultXhrHeader : false,
            withCredentials:true,
            method : 'GET',
            headers: {
                'Accept': 'application/json',
                'Authorization': 'Basic YX5iOmM='
            },
            extraParams: {
                format : 'json',
                pagesize : 10
            },
            reader: {
                type: 'json',
                rootProperty: 'categories.data'
            }
        }
    }
} 
```

这是我在 Chrome 的网络控制台中看到的：

```
Request URL:http://192.168.23.89:7003/xxx-service/test/catalog/list?_dc=1354529083930&format=json&pagesize=10&page=1&start=0&limit=25&callback=Ext.data.JsonP.callback2
Request Method:GET
Status Code:403 Forbidden
**Request Headers**
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Host:192.168.23.89:7003
Referer:http://localhost/myshop/
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11
**Query String Parameters**
_dc:1354529083930
format:json
pagesize:10
page:1
start:0
limit:25
callback:Ext.data.JsonP.callback2
Response Headersview source
Content-Length:0
Content-Type:text/xml
Date:Mon, 03 Dec 2012 10:04:40 GMT
Server:Apache-Coyote/1.1 
```

如果我使用海报来访问这些带有授权标头的服务，我可以看到响应，但由于标头未在请求中传递，我将获得“403 禁止”状态。

如果我使用这样的标题，它可以工作：

```
Ext.Ajax.request({
        url: 'resources/data/templates.json',
        headers: {
            'Accept': 'application/json',
            'Authorization': 'Basic T3JkZXJSZWxlYXNlUmVmcmVzaGVyfk9yZGVyUmVsZWFzZVJlZnJlc2hlcjpPcmRlclJlbGVhc2VSZWZyZXNoZXI='
        },
        success: function(rsp){
        }
}); 
```

但我不能这样做，因为我想使用 listPaging 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:12:20.580

JSONP Works购买将请求URL作为页面标题插入，如果您需要验证您的请求，则必须将其放入URL中，例如：

```
'http://192.168.23.89:7003/xxx-service/test/catalog/list?auth=1223456' 
```

你确定你需要使用 JSONP 吗？

有关更多信息，请参阅此[答案](https://stackoverflow.com/questions/3350778/modify-http-headers-for-a-jsonp-request)

# netty - 为什么 ChannelPipeline 中包含的压缩器和解压缩器的运行时间太长？

> ID：13681428
> 
> 赞同：1
> 
> 时间：2012-12-03T10:34:53.960
> 
> 标签：netty, pipeline

在 ChannelPipeline 中引入了解压器和压缩器，但**运行时间太大**，与特定类中引入的两种方法的执行时间相比。

```
@Override 
public ChannelPipeline getPipeline() throws Exception { 
    ChannelPipeline pipeline = pipeline(); 
    pipeline.addLast("decoder",new IcapRequestDecoder(maxInitialLineLength, maxIcapHeaderSize, maxHttpHeaderSize, maxChunkSize)); 
    pipeline.addLast("chunkAggregator",new IcapChunkAggregator(maxContentLength)); 
    pipeline.addLast("decompressor",new IcapContentDecompressor()); 
    pipeline.addLast("encoder",new IcapResponseEncoder()); 
    pipeline.addLast("chunkSeparator",new IcapChunkSeparator(maxContentLength)); 
    pipeline.addLast("handler", handler); 
    pipeline.addLast("compressor",new IcapContentCompressor()); 
    return pipeline; 
} 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:19:57.140

我将扩展信息。

IcapContentCompress 类：

```
public class IcapContentCompressor extends SimpleChannelDownstreamHandler {

...

/**
 * Invoked when {@link Channel#write(Object)} is called.
 */
@Override
public void writeRequested(ChannelHandlerContext ctx, MessageEvent e) throws Exception {        

            ...

    IcapResponse icapResponse = (IcapResponse) msg;

    // Get response message
    HttpResponse httpMessage = icapResponse.getHttpResponse();

    ...

    boolean compressed = isCompressed(httpMessage);
    if (compressed) {           
        String acceptEncoding = httpMessage.getHeader(HttpHeaders.Names.CONTENT_ENCODING);
        compress(httpMessage, acceptEncoding);
    }

    }       

    ctx.sendDownstream(e);

} 
```

压缩方法：

```
private void compress(HttpResponse httpMessage, String acceptEncoding) throws Exception {                       
    ZlibWrapper wrapper = determineWrapper(acceptEncoding);
    if (wrapper == null) {
       return;
    }

    EncoderEmbedder<ChannelBuffer>  encoder = new EncoderEmbedder<ChannelBuffer>(new ZlibEncoder(wrapper, compressionLevel, windowBits, memLevel));

    httpMessage.setHeader(
            HttpHeaders.Names.CONTENT_ENCODING,
            getTargetContentEncoding(wrapper));

    ChannelBuffer contentCompressed = ChannelBuffers.wrappedBuffer(
                                            encode(httpMessage.getContent(), encoder), 
                                            finishEncode(encoder));

    // Replace the content.
    httpMessage.setContent(contentCompressed);  
} 
```

当我们在特定的类中使用相同的方法而不在类 ChannelPipeline 中引入时，执行时间要少得多。

# drupal - 如何在 Drupal 7 Omega 子主题中根据浏览器大小删除页面元素

> ID：13681431
> 
> 赞同：2
> 
> 时间：2012-12-03T10:35:08.817
> 
> 标签：drupal, drupal-7, drupal-theming

我一直在研究使用 Omega 子主题的响应式设计。与 context 和 delta 模块结合使用时，它似乎非常强大。但是，我很难理解如何在响应式网站中选择性地删除部分页面。当我说删除时，我不是指隐藏，而是实际上阻止呈现指定的内容（这样移动浏览器就不必浪费时间下载从未显示的内容）。

Omega 提供了根据浏览器大小（通过使用媒体查询标签）将不同的 CSS 应用于页面的能力。增量和上下文模块用于根据特定条件更改页面元素的排列，甚至删除页面元素。但是，我一直无法弄清楚如何将两者结合起来。

例如，是否有可能不仅在不同的浏览器窗口大小上应用不同的 CSS，而且还可以防止某些页面内容同时呈现？

我无法找到有关此的任何信息。我猜测，因为页面内容是在服务器端呈现的，而媒体查询在客户端工作，所以这可能是不可能的。我很想知道是否有人对我如何实现这一目标有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:18:32.150

你应该看看上下文断点模块。它允许您根据最终用户的浏览器大小、纵横比和分辨率设置上下文条件。

[http://drupal.org/project/context_breakpoint](http://drupal.org/project/context_breakpoint)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T16:50:52.197

不确定是否适合你，但是当我做一个 display: none - 一切都消失了，周围的 div 很好地洗牌：

```
@include breakpoint($phone){
      .l-header_search {
       display:none;
       } 
} 
```

# java - 适合安卓手机百万行的高效快速KV存储？

> ID：13681441
> 
> 赞同：2
> 
> 时间：2012-12-03T10:35:49.623
> 
> 标签：java, android

有没有一个 KV store 可以存储一百万对 KV，同时在 Android 手机中表现良好，而不占用资源？

它应该能够快速做到这一点：

```
kvstore.deleteByPrefix("image_hash_"); #a million keys have this prefix
for(... #for a million values
    kvstore.add("image_hash_"+i.toString(), "true"); #values are small
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:41:03.367

您的密钥表明您的值很大（总共有很多 GB）这会比使用 Map 给您带来更多问题。

我建议您使用文件系统，名称是文件名，值是文件的内容。您可以使用两级目录来拆分文件，以防止任何一个目录变得太大。

* * *

您可以使用以下内容。

```
new File("image_hash.properties").delete(); #a million keys have this prefix
PrintWriter pw = new PrintWriter(new File("image_hash.properties"))
for(int i=0;i<1000*1000;i++)
    pw.println(i+"="+true);
pw.close(); 
```

如果你关心效率，你只能有真假，你可以写二进制。

```
FileChannel fc = new FileOutputStream("image_hash.flags");
ByteBuffer bb = ByteBuffer.wrap(1000*1000/8); // uses 125KB of memory.
Arrays.fill(bb.array(), (byte) -1);
fc.write(bb);
fc.close(); 
```

第一个示例每个值使用约 14 个字节，第二个示例每个值使用 1/8 个字节。

# javascript - Silverlight 表单冻结

> ID：13681446
> 
> 赞同：1
> 
> 时间：2012-12-03T10:36:19.380
> 
> 标签：javascript, silverlight, user-interface, freeze

我在silverlight 中循环调用~250 个Javascript 同步Web 服务。这需要大约 3 分钟才能完成。在这个时候，我的表单被冻结，用户无法进行任何输入，我的进度条也没有更新值。这部分在循环中。功能“取消共享”做网络服务请求

```
 object ret = HtmlPage.Window.Invoke("Unshare", acc.ToString(), SelectedUser.ToString());

            if (ret != null)
            {
                bool tmpBool;
                if (Boolean.TryParse(ret.ToString(), out tmpBool))
                {
                    if (tmpBool)
                    {
                        IncreaseProgress(false);
                    }
                }
            } 
```

_

```
private void IncreaseProgress(bool isError)
    {

            FinishedAccounts++;
            label_total.Content = string.Format("Total: {0} / {1}", FinishedAccounts, Accounts.Count);
            progressBar1.Value += this.ProgressStep;
            if (isError)
            {
                Errors++;
                label_error.Content = string.Format("Error: {0}", Errors);
            }
    } 
```

每次请求后如何更新 gui？在 gui 冻结的那一刻，在 ~250 个 web 服务请求之后，gui 被更新。

谢谢

# ios - 如何在 iOS 设备中获取用户来电电话号码

> ID：13681449
> 
> 赞同：2
> 
> 时间：2012-12-03T10:36:25.663
> 
> 标签：ios, background, phone-call, core-telephony

我使用 iOS SDK 4.0 中引入的 CoreTelephony 框架来了解来电及其挂断状态。

```
CTTelephonyNetworkInfo *tni = [[CTTelephonyNetworkInfo alloc] init];
    callCenter = [[CTCallCenter alloc] init];
    crtCarrierName = tni.subscriberCellularProvider.carrierName;

    [callCenter setCallEventHandler:^(CTCall *call) {
      if ([[call callState] isEqual:CTCallStateConnected]) {
        //this call has just connected
      } else if ([[call callState] isEqual:CTCallStateDisconnected]) {
        //this call has just ended (dropped/hung up/etc)
      }
    }]; 
```

当我的应用程序处于后台时，我可以使用此事件处理程序来跟踪呼叫状态吗？我还可以从 CTCall 对象中获取来电电话号码吗？或者还有其他方法。
我不想使用私有 API。Apple iOS SDK 有没有可用的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:37:17.673

不，在官方 SDK 中没有办法做到这一点，你不能在后台使用它，因为它不属于后台运行类别，除非你的应用程序在后台执行其他操作然后只是监视调用。

您将永远无法获得当前通话的电话号码，因为这是私人数据，Apple 不允许您访问这些数据。

# c# - 在 MVC 中，管理业务异常或错误的最佳方法是什么？

> ID：13681452
> 
> 赞同：6
> 
> 时间：2012-12-03T10:36:28.797
> 
> 标签：c#, .net, asp.net-mvc, exception-handling

在 MVC 中，管理业务异常或错误的最佳方法是什么？我找到了几个解决方案，但不知道该选择哪个。

**解决方案 1**

```
public Person GetPersonById(string id)
{
    MyProject.Model.Person person = null;
    try
    {
        person = _personDataProvider.GetPersonById(id);
    }
    catch 
    { 
        // I use a try / catch to handle the exception and I return a null value
        // I don't like this solution but the idea is to handle excpetion in 
        // business to always return valid object to my MVC.
        person = null; 
    }
    return person;
} 
```

**解决方案 2**

```
public Person GetPersonById(string id)
{
    MyProject.Model.Person person = null;
    person = _personDataProvider.GetPersonById(id);
    // I do nothing. It to my MVC to handle exceptions
    return person;
} 
```

**解决方案 3**

```
public Person GetPersonById(string id, ref MyProject.Technical.Errors errors)
{
    MyProject.Model.Person person = null;
    try
    {
        person = _personDataProvider.GetPersonById(id);
    }
    catch (Exception ex)
    { 
        // I use a try / catch to handle the exception but I return a 
        // collection of errors (or status). this solution allow me to return 
        // several exception in case of form validation.
        person = null; 
        errors.Add(ex); 
    }
    return person;
} 
```

**解决方案 4**

```
// A better idea ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:55:24.757

让异常在应用程序级别处理。我建议使用**解决方案 2**。当您想在某些异常发生时更改逻辑时，您可以使用 try..catch 块，否则只需将其留给应用程序基础架构即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:31:58.490

我还建议您考虑空对象模式。与其返回 null，不如返回一个空对象，这样您就不必执行多个 if null 检查。您应该创建一个抽象的 Person 类，该类具有像 NullPerson 这样包含默认值的静态属性。如果您的 DAL 返回 null，您将返回 NullPerson。您可以找到有关[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:44:37.080

系统错误应该尽快被捕获，而每个使用你的类的对象都应该实现必要的代码来捕获可能的错误。在最低级别捕获系统错误可以让您决定您打算做什么： - 不返回值 - 抛出自定义错误 - 重新抛出系统错误

在系统错误和您的自定义错误之间插入一个抽象层是您可以引入需要不同注意的新错误。IE：如果错误是 FileNotFoundException，您可能想要区分正常错误（即：文件是每日报告，但文件请求代表未来报告）或不（文件应该存在）

我更喜欢解决方案 3，即使在第一阶段您只需在需要时重新抛出常规异常。

哔叽

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:58:12.063

这取决于你的要求。

1.  如果您只想知道我们的流程是否成功执行，则建议使用流程 2。
2.  如果您愿意编写一些错误日志，那么 Process 3 是最佳选择。
3.  如果您不想使用复杂的方法，但又想处理异常并写入日志，则建议使用 Process 1。

问候， Pavan.G

# jasper-reports - 在 Jasper 报表设计器中使用透视列

> ID：13681453
> 
> 赞同：0
> 
> 时间：2012-12-03T10:36:32.703
> 
> 标签：jasper-reports

我是 Jasper 报告的新手。我正在使用 Jaspersoft iReport Designer 4.5.1。使用以下格式的数据集创建报告（我称之为 Format1）：

```
╔═══════╦════════════╦═════════════╗
║ Date  ║ Q1         ║    Q2       ║
╠═══════╬════════════╬═════════════╣
║ d1    ║ 45.5       ║  50.6       ║
╚═══════╩════════════╩═════════════╝ 
```

其中 Q1 和 Q2 是一些计算出的商。现在 Jasper 设计师要求提供系列（不同颜色）、类别（X 轴）和值（Y 轴）。由于我的“值”分布在各列中，因此我需要对数据进行反透视以获得这种格式：（Format2）

```
╔═══════╦════════════╦═════════════╗
║ Date  ║ Quo Type   ║    Values   ║
╠═══════╬════════════╬═════════════╣
║ d1    ║ Q1         ║ 45.5        ║
║ d1    ║ Q2         ║ 50.6        ║
║       ║            ║             ║   
╚═══════╩════════════╩═════════════╝ 
```

能够将“现状类型”作为系列传递，将“日期”作为类别传递，将“值”作为值传递。但这需要我修改附加到数据源的 MySQL 查询。由于我在格式 1 中有很多用于生成报告的查询，是否可以以某种方式避免这种转换？有没有办法使用 Format1 来创建报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:36:07.710

在为我的报告使用图表时，我也遇到了类似的问题。我必须旋转我的列以实现所需的输出。可能使用单独的数据集有助于降低复杂性。但是不能避免旋转/取消旋转列。

# extjs - 在 ext js 中构建多个组件

> ID：13681467
> 
> 赞同：0
> 
> 时间：2012-12-03T10:37:25.273
> 
> 标签：extjs

我有一个页面，我需要按特定顺序添加组件。（将其渲染为 div）

1.  工具栏
2.  形式
3.  工具栏
4.  网格

我研究了文档，但我对所有这些布局、容器和面板感到困惑。我不确定是否应该首先创建一些包装组件（布局、面板）然后插入组件（表单、工具栏、网格）还是只为每个组件创建一个 div？

我非常感谢一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:18:36.930

这取决于您的应用程序。如果您正在开发纯（根本没有 html）extjs 应用程序，则布局由容器的布局处理，但如果您正在混合 html 和 extjs 组件，则可以使用 div 元素处理布局。

从您的问题来看，您似乎正在使用 html（和 div 元素），然后您可以自己处理它。但是，我建议您创建一个具有 hbox 布局的容器（面板），并将您的组件作为子项包含在内，并让面板处理布局。

# jquery - JQueryMobile 不能在 Internet Explorer 8 中手动提交表单？

> ID：13681470
> 
> 赞同：0
> 
> 时间：2012-12-03T10:37:31.380
> 
> 标签：jquery, forms, internet-explorer, jquery-mobile

全部，

我发现我无法使用 JQueryMobile 1.2 在 Internet Explorer 8 中手动提交表单。

HTML代码如下，简单：

```
<HTML>
<HEAD>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
<form method="post" name="test" action="http://www.baidu.com/" data-ajax="false">
  <input type="text" id="id_0" name="id_0" size="20" maxlength="32" value="PLAY"/>
  <input type="text" id="id_1" name="id_1" size="20" maxlength="32" value="PLAY"/>

<input data-theme="b" type="submit" value="OK" id="basicSubmit"/>
</form>  

</body>
</html> 
```

我将此页面保存到本地磁盘并在 Internet Explorer 8 中打开它，它将显示 2 个文本和一个提交按钮。但是当单击“确定”按钮时，什么也没有发生。

如果我删除包含 jquery.mobile-1.2.0.min.js 的脚本标记行：

```
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

jquerymobile 样式消失（没关系），“确定”按钮变为可点击提交。（虽然此表单的 URL 不正确并且 IE 显示错误消息）。我也试过“data-ajax=true”或“data-ajax=false”，都失败了。

任何人都可以帮忙吗？非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:55:42.953

请参考[此链接](https://github.com/jquery/jquery-mobile/issues/2628)。此问题已在上面的链接中修复，只有您必须对该页面中给出的 CSS 进行一些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:51:54.300

我有同样的问题，提交按钮在 IE9 中不起作用。我将提交按钮替换为

```
<input type="button" id="Signup" value="Signup!" data-role="" onClick="submitForm()"> 
```

并添加了功能：

```
 function submitForm() {
    document.registerForm.submit();
    } 
```

这解决了我的问题。

# iphone - 免费的类 unity3d 游戏引擎，带有图形查看工具

> ID：13681473
> 
> 赞同：0
> 
> 时间：2012-12-03T10:37:38.023
> 
> 标签：iphone, unity3d, game-engine, unreal-development-kit

我目前正在为我的公司在 Unity3d for iOS 中开发游戏。我想开始为自己制作游戏，但对 unity3d 或虚幻引擎的初始投资对我来说太高了（对于统一，我必须为引擎本身支付 1500 美元，另外为 iOS 移植系统支付 1500 美元）。我非常喜欢 unity3d，因为它更容易组织你的世界，从灯光和环境放置到物理、着色器和映射。

是否有一个带有编辑图形工具的游戏引擎不需要为发布你的游戏征税？游戏引擎还必须能够移植到 iOS 和/或 W8；我也对获得社区和开发团队的实质性支持的游戏引擎感兴趣。

我把目光投向了 Irrlicht Engine，但我认为它没有图形环境工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:51:51.023

我没有使用过 Torque，但在你的情况下，它可能值得一看：[Torque 3D](http://www.garagegames.com/products/torque-3d)

另一个是[Bork3D](http://bork3d.com/index.php)但看看他们的网站让我觉得他们停止了他们的业务。

一般来说，我建议先考虑你的商业计划，然后列出优缺点，最后决定使用什么。我的意思是：如果您认为自己有一些好主意，并且与其他人交谈表明他们同意您的观点，那么您应该认真考虑是否值得在您的工具上投入一些钱。如果你梦想成为一名独立开发者并赚到足够的钱过上舒适的生活，这应该是你要达到的目标。另一方面，如果您是经验丰富的 Unity 开发人员，那么它可能会为您节省 100 小时并在您采用经过验证的情况下降低项目风险。

# dynamics-crm-2011 - Dynamics CRM JavaScript：由于 CreatedOn 无法更新记录？

> ID：13681475
> 
> 赞同：0
> 
> 时间：2012-12-03T10:37:39.430
> 
> 标签：dynamics-crm-2011, dynamics-crm, microsoft-dynamics

我有以下内容来更新记录：

```
var currentTimeBeingTracked = getCurrentTimeTracked();

if (currentTimeBeingTracked != null) {
    currentTimeBeingTracked.dagency_EndDateTime = new Date();

    var jsonTrackedTime = window.JSON.stringify(currentTimeBeingTracked);

    $.ajax({ type: "POST",
        contentType: "application/json; charset=utf-8",
        datatype: "json",
        url: ODataPath + "/dagency_trackedtimeSet",
        data: jsonTrackedTime,
        beforeSend: function (XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Accept", "application/json");
        },
        success: function (data, textStatus, XmlHttpRequest) {
            var newTimeTracked = data.d;
            RetrieveTrackedTimes();
            alert("Stopped tracking your time successfully.");
            window.top.document.getElementById("contentIFrame").contentWindow.location.reload();
        },
        error: function (XmlHttpRequest, textStatus, errorThrown) {
            debugger;
            alert("Couldn't stop tracking your time. " + XmlHttpRequest.responseText);
        }
    });
} 
```

但我不断收到这条消息：

> 处理请求流时出错。将属性“CreatedOn”的请求负载中的值转换为类型“DateTime”时遇到错误，这是属性的预期类型。有关更多详细信息，请参阅内部异常。

为了创建记录，我使用了以下完美运行的代码：

```
var trackedTime = new Object();

var timeEntryName = prompt("Please enter a name for the tracked time:", "New time entry");
if (!timeEntryName) {
    return false;
}

var isBillable = confirm("Is this task billable? If Yes, press OK.");

trackedTime.dagency_name = timeEntryName;
trackedTime.dagency_StartDateTime = new Date();
trackedTime.dagency_Billable = isBillable;

var slot = new Object();
slot.Id = crmForm.ObjectId;
trackedTime.dagency_Slot = slot;

var jsonTrackedTime = window.JSON.stringify(trackedTime);

$.ajax({ type: "POST",
    contentType: "application/json; charset=utf-8",
    datatype: "json",
    url: ODataPath + "/dagency_trackedtimeSet",
    data: jsonTrackedTime,
    beforeSend: function (XMLHttpRequest) {
        XMLHttpRequest.setRequestHeader("Accept", "application/json");
    },
    success: function (data, textStatus, XmlHttpRequest) {
        var newTimeTracked = data.d;
        RetrieveTrackedTimes();
        alert("Started tracking your time successfully.");
        window.top.document.getElementById("contentIFrame").contentWindow.location.reload();
    },
    error: function (XmlHttpRequest, textStatus, errorThrown) {
        alert("Couldn't start tracking your time. " + XmlHttpRequest.responseText);
    }
}); 
```

问题是什么？我在哪里可以找到消息所指的内部异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:59:41.323

改成这个，它工作正常：

```
if (currentTimeBeingTracked != null) {
    var trackedTimeUpdated = new Object();
    trackedTimeUpdated.dagency_EndDateTime = new Date();

    var jsonTrackedTime = window.JSON.stringify(trackedTimeUpdated);

    $.ajax({ type: "POST",
        contentType: "application/json; charset=utf-8",
        datatype: "json",
        url: ODataPath + "/dagency_trackedtimeSet(guid'" + currentTimeBeingTracked.dagency_trackedtimeId + "')",
        data: jsonTrackedTime,
        beforeSend: function (XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Accept", "application/json");
            XMLHttpRequest.setRequestHeader("X-HTTP-Method", "MERGE");
        },
        success: function (data, textStatus, XmlHttpRequest) {
            var newTimeTracked = data.d;
            RetrieveTrackedTimes();
            alert("Stopped tracking your time successfully.");
            window.top.document.getElementById("contentIFrame").contentWindow.location.reload();
        },
        error: function (XmlHttpRequest, textStatus, errorThrown) {
            debugger;
            alert("Couldn't stop tracking your time. " + XmlHttpRequest.responseText);
        }
    });
} 
```

问题是我需要将 X-HTTP-Method 设置为 MERGE 并在 URL 中指定 guid。

# c# - 从 C# 中的数组中检索字符串

> ID：13681476
> 
> 赞同：-8
> 
> 时间：2012-12-03T10:37:39.787
> 
> 标签：c#

> **可能重复：**
> [想要从我的数组中检索字符串](https://stackoverflow.com/questions/13681277/want-to-retrieve-string-from-my-array)

我的字符串数组包含以下值

```
NULL
String 1 
String 2
String 3
Null
String 4
String 5
String 6
Null
String 7
String 8
String 9 
```

我想找回

```
String 1 String 2 String 3
String 4 String 5 String 6
String 7 String 8 String 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:41:17.160

您必须按如下方式过滤字符串数组。

```
items = items.Where(s => !String.IsNullOrEmpty(s)).ToArray(); 
```

然后，您将获得的输出将没有任何空值。

问候， Pavan.G

# asp.net-mvc-3 - 如何显示自定义查询结果以查看 mvc3 Razor

> ID：13681478
> 
> 赞同：0
> 
> 时间：2012-12-03T10:37:41.357
> 
> 标签：asp.net-mvc-3

我有自定义查询结果为

```
public ActionResult Index()
        {
            var Query = (from E in db.SITE_MASTER.AsEnumerable()
                         where E.IS_PAGE == true
                         select new 
                         {
                             E.POST_TITLE,
                             E.POST_TEXT
                         }).ToList();
            return View(Query);
        } 
```

现在，

如何查看此结果或如何为此结果查询创建视图。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:42:18.723

您可以将匿名类型作为模型传递，但请不要。它很丑陋，并且会导致维护问题。

作为替代方案，要么使用`ViewBag`或创建具体类型并传递它。

# javascript - 来自 jQuery 的延迟响应（还有一些其他奇怪的伪影）

> ID：13681484
> 
> 赞同：3
> 
> 时间：2012-12-03T10:38:03.343
> 
> 标签：javascript, jquery

我从 jQuery 得到了令人难以置信的回应，我希望有人能帮助我。我有一个简单的问题......我正在设置 HTML 表单的隐藏字段的“值”（也就是`<input type='hidden'>`当表单加载时。我有一个包含三个隐藏字段的表单，两个工作正常。第三个......那么问题来了：

一旦表单完成加载（是的，它已经加载并且是可见的......作为间接证明前两个隐藏字段已加载并由 jQuery 成功设置），我运行以下代码（仅显示相关片段作为最后一个字段是设置为“今天”的日期）：

```
case "today":
    SetFieldValue (targetElement , Date.today().toString("yyyy-MM-dd HH:mm:ss") );
    console.log ('Setting ' + jQuery(targetElement).attr('id') + ' to "today": ' + Date.today().toString("yyyy-MM-dd HH:mm:ss") );
    break; 
```

SetFieldValue 是我编写的一个小函数，它允许设置 DOM 元素，无论它是什么类型。代码如下：

```
function SetFieldValue ( domObject, value ) {
  // as a safety function, check if a string representation of the domObject was passed in and convert it to a jQuery object if it was
  if ( jQuery.type(domObject) === "string") {
    domObject = jQuery(domObject);
  }

  if ( jQuery.inArray (domObject.prop('tagName').toLowerCase(),['input' , 'select' , 'textarea']) >= 0 ) {
    console.log ("setting to value attribute: " + value);
    domObject.attr('value',value);
    console.log ("now set to: " + domObject.attr('value') + "(" + domObject.attr('id') + ")" );
  } else {
    console.log ("setting to html attribute");
    domObject.html( value );
  }
  return domObject;
} 
```

请注意 console.log 消息，因为这对于理解问题的严重性很重要。当我运行它时，这是我在控制台上得到的：

![在此处输入图像描述](../Images/dd960c1012755d61bf842c80964fc6d9.png)

现在我在“today”case 语句的最后一行（也就是“break;”行）设置了一个断点。根据控制台消息，一切都很好。似乎 DOM 元素 #activity-start_time 已设置。好吧，这就是它变得奇怪的地方。

我做的第一件事是测试对“targetElement”的引用，调试器控制台给我的第一件事是一个空数组：

![空集](../Images/13961c2c19acb981341e69480fc40943.png)

什么？这很奇怪。虽然我在思考几秒钟过去了，但突然间它自己解决了我的期望（我没有在控制台中重新输入它，它只是从空集变为你在下面看到的）：

![现在是完全不同的东西](../Images/2be1b858d52c16f6d77ca8ed6a087740.png)

现在 targetElement 与我期望的完全一样，我使用 jQuery 进行了一个简单的检查，即 #activity-start_time 的 DOM 元素报告了相同的值。你可以看到上面的结果。它与 targetElement 完全相同，只是它没有值。什么？！？

我完全不知所措。任何帮助将不胜感激。

肯

ps 我会注意到其他人建议使用 .prop 而不是 .attr 两者的行为似乎完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:36:56.797

我知道我没有为人们提供足够的背景来真正深入研究这个问题，但我最终解决了它。问题是什么？真的很傻……不总是吗？无论如何，这只是问题'id'中的DOM元素不是唯一的情况。嗯。总是让你陷入困境的那些显而易见的事情会被你忽略。

无论如何，感谢您的耐心和帮助。

# jsf - 如何避免 jsf 中的 BusyConversationException

> ID：13681485
> 
> 赞同：15
> 
> 时间：2012-12-03T10:38:05.213
> 
> 标签：jsf, exception-handling, cdi, conversation-scope, weld

我在浏览 jsf 项目中的页面时遇到 BusyConversationException。如果用户在 ajax 调用期间试图导航到另一个页面，这通常会发生。当用户在单击另一个链接后立即单击一个链接而不等待页面加载时，也会发生这种情况。

例如，如果用户点击了多个链接，这些链接是通过类似于下面的代码生成的，我们肯定会得到这个异常。另一个例子是，假设用户在文本字段中输入查询，我们的应用程序发出 ajax 调用来搜索此查询。在该查询期间，如果用户单击某个按钮导航到另一个页面，也会发生 BusyConversationException。

```
<h:commandLink value="#{theProfile.profileName}"
               title="#{theProfile.profileName}"
               action="#{profileBean.aProfileSelected}">
               <f:setPropertyActionListener target="#{currentProfileWebBean.theProfile}" value="#{theProfile}"/>
</h:commandLink> 
```

我可以在扩展 ExceptionHandlerWrapper 类的 ExceptionHandler 类中捕获这种类型的异常，但我无法保存当前状态，对于这种情况，我能做的最好的事情就是在发生此异常时重定向到主页。

有什么办法可以避免这种情况吗？提前感谢您的回答和评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T08:46:06.787

如其他答案中所述，如果仍在处理 ajax 请求，或者在实际单击提交 commandLink 或 commandButton 之前触发了 ajax 事件（例如通过输入字段上的更改事件），则会发生这种情况。

因此，**无法**通过 避免 BusyConversationExceptions `onclick="preventEventPropagation(event)";`，因为 AJAX 事件不是通过传播触发的。

通过侦听正在运行的 ajax 请求并阻止提交直到挂起的 ajax 事件完成，可以轻松避免该问题。

此博客文章[JSF2 AJAX/Submit conversation issue](http://www.knitelius.com/2015/03/03/jsf-2-ajaxsubmit-issues-with-conversationscoped-beans/)中更详细地解释了该问题和解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:29:23.837

我找到了这个，

指示容器已拒绝请求，因为并发请求与相同的会话上下文相关联。

容器通过阻止或拒绝并发请求，确保一次最多可以与一个请求关联一个长时间运行的对话。如果容器拒绝一个请求，它必须将该请求与一个新的瞬态对话相关联，并从 JSF 生命周期的恢复视图阶段抛出一个 BusyConversationException 类型的异常。

参考[这里](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/BusyConversationException.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T22:55:06.050

我也经常看到这个。我开始认为将一些精力用于序列化对对话的访问是一个好主意：

1.  当您不需要目标视图的对话实例时，请避免传播对话 ID (cid)。具体来说，不相关的导航链接/按钮应该抑制 cid 参数（还没有考虑过如何做到这一点）
2.  启动使用活动对话的请求时，请禁用传播对话的其他 UI 元素，因此可能会导致并发访问。PrimeFaces 或（甚至更好的）PrimeFaces Extensions blockUI 组件可以作为半透明覆盖层很好地工作，同时 PrimeFaces p:ajaxStatus 可以显示忙碌状态。
3.  尽可能晚地开始对话。这将最大限度地减少传播长期对话的情况。

不过，我认为这不是一个完整的解决方案。一旦 cid 出现在位置栏中（当您在对话处于活动状态时对表单进行非 ajax 回发时会发生这种情况），您可能会由于多个选项卡/窗口、书签等

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-06T09:29:57.463

我也遇到了同样的问题，当我以前单击 .

我在其中一本书中读过，busyConevrsation 与该事件一起发生了两个动作，所以他们说`onclick="preventEventPropagation(event)";`在 commandLink 中使用 : 来防止该点击的事件传播。所以我使用了相同的方法，它对我有用。

所以现在没有收到 BusyConversationException :)

# java - SWT 窗口未在远程桌面中正确绘制 (Windows 7)

> ID：13681493
> 
> 赞同：3
> 
> 时间：2012-12-03T10:38:26.037
> 
> 标签：java, windows-7, swt, remote-desktop

我们有一个 SWT 应用程序，它在按下按钮时进行耗时的计算，然后打开一个新窗口。计算是在 UI 线程中完成的（这不是很好，但它是一个遗留应用程序），因此在操作期间窗口被冻结。通常在作业完成后，新窗口会正确重绘。但是，如果应用程序在 Windows 7 上运行，并且我使用 Windows 远程桌面连接到该计算机，则在完成操作后，新窗口有时无法正确绘制。当我执行以下操作时会发生这种情况：

*   按下计算按钮
*   切换到与我的应用程序重叠的另一个窗口
*   切换回我的应用程序（仍然没有响应）
*   等待计算完成。
*   新窗口打开，但内容未正确绘制。

最小化和恢复窗口后，重新绘制正确完成。

一种解决方案是在远程桌面设置中设置最大详细信息。但这需要太多带宽。

我使用 SWT 版本 3.4.1、3.6.1 和 4.2.1 以及来自 XP->Windows 7 以及 Windows 7->Windows 7 的远程连接进行了测试。

![在此处输入图像描述](../Images/7c411631c4de1f36e2e2ac71e51413bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:27:16.860

尝试使用paintListener、layout 或redraw，并且您必须知道将重绘放在图形线程中是一个好习惯（我的意思是SWT 应用程序的主循环）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:46:46.347

我发现什么解决了我的问题：

在打开新窗口后，`shell.open()`我添加了一个`shell.redraw()`. 本来可以早点想到的 ;-)

布拉

谢谢！

**编辑：**

不幸的是，这并不是在所有情况下都能奏效。仅当我在标题栏显示文本“（未响应）”*之前*切换回我的应用程序时，它才有效。当标题栏中已指示“（未响应）”时切换回来，行为与以前一样。

# c++ - u_int32_t 与 bpf_u_int32

> ID：13681496
> 
> 赞同：0
> 
> 时间：2012-12-03T10:38:39.570
> 
> 标签：c++, c, int

在过去的几天里，我一直忙于做一些网络编程，我似乎无法弄清楚数据类型 u_int32_t abd bpf_u_int32 之间的区别。

u_int32_t 表示 32 个无符号位。bpf_u_int32 的意思不是一样吗？因为某些函数以一种或另一种形式读取 IP 地址。pcap 库中的某些函数（如 pcap_lookupnet）要求网络地址的格式为 bpf_u_int32。

我很想知道区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:45:20.780

程序员为了谋生而添加了间接层。它们几乎可以肯定是相同的类型，您可以在 C++ 中检查，`#include <typeinfo>`后跟`typeid(u_int32_t) == typeid(bpf_u_int32)`.

在某些实现中，至少有一种可能是`unsigned int`，另一种是`unsigned long`。

发生的事情是两个不同的人独立地为 32 位无符号类型选择了一个名称（或者可能是同一个人用于两个稍微不同的目的）。其中一个使用了“bpf”前缀，在这种情况下代表 Berkeley Packet Filter，因为它与数据包捕获有关。另一个没有。一个使用了`_t`表示类型名称的后缀，另一个没有。除此之外，他们选择了相似的名字。

C99 和 C++11 都为 32 位无符号类型引入了标准名称：`uint32_t`. 不过，这不会阻止人们为它创建自己的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:44:02.683

这两种类型最有可能是 32 位无符号类型的 typedef。因此，它们可以被认为是等效的，并且它们之间没有有用的区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-01T10:30:06.450

始终从您真正使用的 bpf.h 文件中检查类型。这是一个 bpf.h：

**#ifdef MSDOS /* 必须是 32 位 */**

typedef long bpf_int32;

typedef unsigned long bpf_u_int32;

**＃别的**

typedef int bpf_int32;

typedef u_int bpf_u_int32;

**＃万一**

# ruby-on-rails - 存在关联时无法保存模型对象

> ID：13681498
> 
> 赞同：1
> 
> 时间：2012-12-03T10:38:45.520
> 
> 标签：ruby-on-rails, ruby, activesupport, model-associations

在我的 rails 应用程序中，当存在关联时，我无法保存模型对象。我正在使用 mongo 作为数据库。简要说明：

我有一个模型对象，

```
@obj1 = User.create(name: "name1") 
```

当我做@obj1.save 时，它​​工作正常。现在我添加了一个关系说，

```
has_many :offices 
```

然后我尝试用新条目保存同一个对象。

```
@obj1 = User.create(name: "name2") 
```

我收到一个错误

```
 /gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:230:in `block in constantize'
 gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `each' 
```

编辑：

完整的错误跟踪：

```
NameError: uninitialized constant Office
            from /home/workspace/.rvm/gems/ruby-1.9.3-p286@cv_app/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:230:in `block in constantize'
            from /home/workspace/.rvm/gems/ruby-1.9.3-p286@cv_app/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `each'
            from /home/workspace/.rvm/gems/ruby-1.9.3-p286@cv_app/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `constantize'
            from /home/workspace/.rvm/gems/ruby-1.9.3-p286@cv_app/gems/activesupport-3.2.9/lib/active_support/core_ext/string/inflections.rb:54:in `constantize' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:05:03.910

检查office模型和表是否已经创建。如果这两个是创建的，它不会给出这种错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:35:19.160

在您的用户模型中

```
class User < ActiveRecord::Base
  has_many :offices 
end 
```

在您的办公室模型中

```
class Office < ActiveRecord::Base
  belongs_to :user
end 
```

现在，试试这个

```
@user = User.new
@user.name = "xyz"
@user.save 
```

对于关系

```
@user = User.offices.build 
```

# jquery - 无法选择父 div 类

> ID：13681499
> 
> 赞同：1
> 
> 时间：2012-12-03T10:38:47.610
> 
> 标签：jquery, selector

我正在研究一个简单的 jQuery 元素，但我似乎无法选择正确的 div。我有 2 个名为“container_vragen”的 div，在 div 内有一些隐藏的 div。现在我有一些按钮可以显示隐藏的 div，但它会在两个“container_vragen”div 中显示。但我只想在其中一个 div 中显示它。

```
$('.open_sub_ja , .open_sub_no').click(function() {
        $(this).parents().find('.submenu').fadeIn(500);
    });

    $('.akkoord').click(function() {
        $(this).parents().find('.submenu').fadeOut(500);
    }); 
```

我这里有一个小的 jsFiddle [http://jsfiddle.net/YGArt/](http://jsfiddle.net/YGArt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:44:54.383

您可以使用选择器过滤您的祖先：

```
$(this).parents(".container_vragen").find('.submenu').fadeIn(500); 
```

更新[了小提琴](http://jsfiddle.net/scaillerie/Y4AR7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:40:12.353

代替`parents()`，`parent()`像这样：

```
$(this).parent().find('.submenu').fadeIn(500); 
```

因为[`.parents()`](http://api.jquery.com/parents/)将返回所有父级直到文档根目录，这不是您想要的，您只想将一个父级向上然后找到`.submenu`元素，所以只向上一个父级使用[`.parent()`](http://api.jquery.com/parent/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:41:13.767

使用`.parent()`代替`.parents()`

检查[http://api.jquery.com/parents/提供的 jQuery API 文档](http://api.jquery.com/parents/)

# sql - 时间戳和间隔：NUMTOYMINTERVAL SYSTDATE CALCULATION SQL QUERY

> ID：13681506
> 
> 赞同：0
> 
> 时间：2012-12-03T10:39:10.847
> 
> 标签：sql, oracle, intervals

我正在处理一个家庭作业问题，我很接近，但我认为需要一些数据转换方面的帮助。或 sysdate - start_date 计算

问题是：

使用 EX 模式，编写一个 SELECT 语句，从 Date_Sample 表（格式如下）中检索 date_id 和 start_date，然后是一个名为 Years_and_Months_Since_Start 的列，该列使用间隔函数检索 start_date 和系统日期。（您的值将根据您进行此实验的日期而有所不同。）仅显示开始日期的月和日等于 2 月 28 日（任何一年）的记录。

```
DATE_ID     START_DATE                          YEARS_AND_MONTHS_SINCE_START 
2           Sunday   , February  28, 1999       13-8                         
4           Monday  , February  28, 2005        7-8                          
5           Tuesday  , February  28, 2006       6-8 
```

我们引用这个问题的 EX 模式只是一个包含两列的 Date_Sample 表：

```
DATE_ID     NUMBER NOT Null

START_DATE  DATE 
```

我写了这段代码：

```
SELECT date_id, TO_CHAR(start_date, 'Day, MONTH DD, YYYY') AS start_date , 
  NUMTOYMINTERVAL((SYSDATE - start_date), 'YEAR') AS years_and_months_since_start
FROM  date_sample
WHERE TO_CHAR(start_date, 'MM/DD') = '02/28'; 
```

但是我的 Years and months since start 列无法正常工作。当计算的日期是从 1999 年开始时，数年和数月的数字非常高。即，它应该是 13-8，我得到 5027-2，所以我知道它不正确。我使用了 NUMTOYMINTERVAL，这应该是正确的，但不要认为 sysdate-start_date 有效。start_date 的数据类型只是日期。我尝试了 ROUND，但可能需要一些帮助才能使其正确。

我的计算出了点问题，并试图弄清楚如何在那里获得正确的间隔。不确定我是否已向所有人提供了足够的信息，但如果我在您之前弄清楚，我会告诉您。

这是 Murach 的 Oracle 和 SQL/PL 书第 17 章中的一个问题，是否有其他人正在尝试学习该章。第 559 页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:59:18.150

你会想要`MONTHS_BETWEEN`的，`numtoyminterval`因为减去两个日期变量的乘积会在几天内给出答案，这对你来说是不可用的，而且它如此之高的原因是你告诉 Oracle 答案是几年！还要`fm`在 to_char 上使用修饰符来防止多余的空格。

```
select date_id, 
       to_char(start_date, 'fmDay, Month DD, YYYY') as start_date,
       extract(year from numtoyminterval(months_between(trunc(sysdate), start_date), 'month') )
       || '-' ||
       extract(month from numtoyminterval(months_between(trunc(sysdate), start_date), 'month') )
       as years_and_months_since_start
  from your_table
 where to_char(start_date, 'MM/DD') = '02/28'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T06:50:08.200

您可以像这样简化答案

```
SELECT date_id,  start_date, numtoyminterval(months_between(sysdate, start_date), 'month') as "Years and Months Since Start"
FROM date_sample
WHERE EXTRACT (MONTH FROM start_date) = 2 AND EXTRACT (DAY FROM start_date) = 28; 
```

# wpf - DataGrid 动态更改 RowDetailsTemplate

> ID：13681508
> 
> 赞同：1
> 
> 时间：2012-12-03T10:39:33.110
> 
> 标签：wpf, templates, datagrid

**情况：**

我有一个`DataGrid`项目可以属于不同类别的地方，比如*A*、*B*和*Custom*。每个类别都有自己的`RowDetails`模板。可以更改项目的类别，如果发生这种情况，我也想更改模板（如有必要）。后面的 ViewModel 是一样的，我只是改变了界面元素（例如，模板 AI 中有一个`TextBlock`，而模板 BI 中有一个`TextBox`，两者`Binding`在 VM 中都具有相同的属性）。

**到目前为止我做了什么：**

```
<DataGrid.RowDetailsTemplate>
    <DataTemplate>
        <Control x:Name="RowDetails" Focusable="False" />
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding TemplateID, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}" Value="0">
                    <Setter TargetName="RowDetails" Property="Template" Value="{StaticResource TemplateA}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding TemplateID, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}" Value="1">
                <Setter TargetName="RowDetails" Property="Template" Value="{StaticResource TemplateB}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding TemplateID, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}" Value="2">
                <Setter TargetName="RowDetails" Property="Template" Value="{StaticResource TemplateCustom}" />
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</DataGrid.RowDetailsTemplate> 
```

**问题：**

当我更改一个项目的类别时，我可以看到模板发生了变化，但是整行都得到了 ValidationErrorTemplate（红色边框，带感叹号）。即使模板为空，也会发生这种情况！在我看来，只是更改模板会使整个事情爆炸。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:01:38.427

经过多次尝试和重试，我发现问题出在模板中的 ComboBox 上：如此处所述[，](http://www.hardcodet.net/2009/01/xaml-binding-declaration-order-matters) ComboBox 属性中的顺序很重要。放在`SelectedValue`前面`ItemsSource`对我来说是诀窍，而使用`Triggers`作品的方法就像魅力一样。

尽管如此，我仍然对这种解决方案感到震惊。我会将此标记为答案，但我仍然愿意接受建议。

# git - 如何开始使用 git / github 对 Monticello 的支持？

> ID：13681510
> 
> 赞同：14
> 
> 时间：2012-12-03T10:39:47.783
> 
> 标签：git, version-control, github, smalltalk, pharo

我最近读到**git** / **github**支持已添加到**Monticello**。

我还看到了一些在 github 上发布的 Smalltalk 项目。像：

[https://github.com/timfel/ratpack](https://github.com/timfel/ratpack)

我的问题：

*   如何开始？
*   为了从 github 加载/保存项目，我需要安装什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T12:22:46.080

*   [FileTree](https://github.com/dalehenrich/filetree)一个基于 monticello 的[Cypress 包格式实现](https://github.com/CampSmalltalk/Cypress)
*   [FS-Git 文件系统](http://ss3.gemstone.com/ss/FSGit-Experimental.html)的 git 实现（对 Monticello 版本控制提供实验性支持）
*   [Gitocello](https://github.com/timfel/gitocello)是另一个 Monticello/Export 交互工具

除了 FS-Git（处于实验模式）之外，所有这些工具都需要与 Monticello 略有不同的工作流程。FileTree 和 Gitocello “只是”将带有附加元数据的 Smalltalk 源导出到文件中。然后，您仍然必须转到命令行和`commit; push`这些更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T11:47:54.263

您可能想看看Dale Henrichs 在 Esug 所做的演示[。](http://www.slideshare.net/esug/of-metacello-git-scripting-and-things)您需要的大多数信息都在不同的邮件列表（Pharo-dev、Metacello）上，并且在那里可以更好地解决具体问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T12:19:04.400

使用 github 进行 pharo 代码实际上非常简单，手动进行

git commit 和 push：

*   打开系统浏览器
*   右键单击要提交的包并选择“文件输出”
*   转到您的 pharo 文件夹并将相关文件复制到您的 git 文件夹（通常它们以包的名称和 .st 作为扩展名）
*   像对所有 github 提交一样提交这些文件，没什么特别的。

要 git pull ：

这甚至更简单。转到 github 页面并单击“下载”，它将下载包含所有最新 st 文件的 zip 文件。您可以获取这些文件并将它们拖放到 pharo 环境中，pharo 会将它们归档。为了您的方便，您可能需要 git clone 存储库，以便您可以执行简单的 git pull 来获取最新源。这样你就可以避免解压缩步骤，但它是一样的。

显然这可以自动化，但我现在可以手动完成，因为我认为它不需要太多工作。但我可能会制作一个工具来自动化它。

据我所知，唯一相关的工具是这个，但我还没有尝试过

[https://github.com/timfel/gitocello](https://github.com/timfel/gitocello)

对于我的方法，您唯一需要的是在您的系统中安装 pharo 和 git。学习git其实很简单，我一般只用“git clone”“git add”“git rm”“git commit”“git push”和“git pull”命令。

# java - 如何在java中搜索字符串

> ID：13681517
> 
> 赞同：0
> 
> 时间：2012-12-03T10:40:12.913
> 
> 标签：java, sql, string, search, plsql

我目前使用这样的 pl/sql 查询搜索数据库以获得某些结果：

```
SELECT
*
FROM
citrostats cs
WHERE
(
trim(upper(cs.name)) like trim(upper('%'|| ? ||'%'))
OR
trim(upper(cs.UCODE)) like trim(upper('%'|| ? ||'%'))
)
ORDER BY NAME DESC 
```

我对此进行了重新组织，并将所有行提取到对象列表中，并将相应的列作为字符串属性。

我需要的是一个 java 代码，它可以搜索 String 类型的属性，以提供与此查询的结果相同的对象集。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:43:13.167

有[String#contains](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)：

```
 if (name.toUpperCase().contains(uppercasedSearchString)) 
```

由于您在循环中执行此操作，因此只需在循环之前将搜索字符串大写一次即可节省工作。

# wordpress - 删除自定义分类元框表单自定义帖子类型

> ID：13681518
> 
> 赞同：1
> 
> 时间：2012-12-03T10:40:19.723
> 
> 标签：wordpress

我创建了一个自定义帖子类型“酒店”和自定义“分类”，所以当管理员创建一个新酒店并将其保存时，它会自动创建相关的自定义分类，但我不想在管理端酒店编辑页面中显示自定义元框，所以为此，我使用了 WordPress 功能 [](http://codex.wordpress.org/Function_Reference/remove_meta_box) ，但没有任何反应。

* * *

我的自定义邮政编码

```
$Hotel_labels = array(
    'name' => _x('Hotels', 'post type general name'),
    'singular_name' => _x('Hotel', 'post type singular name'),
    'add_new' => _x('Add New', 'Hotel'),
    'add_new_item' => __('Add Hotel'),
    'edit_item' => __('Edit Hotel'),
    'new_item' => __('New Hotel'),
    'all_items' => __('All Hotels'),
    'view_item' => __('View Hotel'),
    'search_items' => __('Search Hotel'),
    'not_found' =>  __('No Hotel found'),
    'not_found_in_trash' => __('No Hotel found in Trash'), 
    'parent_item_colon' => '',
    'menu_name' => __('Hotel'),
);

$Hotel_args = array(
    'labels' => $Hotel_labels,
    'public' => true,
    'rewrite' => array('slug' => 'Hotel'),
    'publicly_queryable' => true,
    'show_ui' => true, 
    'show_in_menu' => true, 
    'query_var' => true,
    'rewrite' => true,
    'capability_type' => 'post',
    'has_archive' => true, 
    'hierarchical' => false,
    'menu_position' => 100,
    'supports' => array( 'title', 'editor', 'author', 'thumbnail' ),
    'taxonomies' => array('hotel_facilities','package_hotel','post_tag')
);

register_post_type('Hotel',$Hotel_args); 
```

* * *

## 自定义分类代码

```
$Package_labels = array(
    'name' => _x( 'Package Hotels', 'taxonomy general name' ),
    'singular_name' => _x( 'hotel', 'taxonomy singular name' ),
    'search_items' =>  __( 'Search hotels' ),
    'popular_items' => __( 'Popular hotels' ),
    'all_items' => __( 'All hotels' ),
    'parent_item' => null,
    'parent_item_colon' => null,
    'edit_item' => __( 'Edit hotel' ), 
    'update_item' => __( 'Update hotel' ),
    'add_new_item' => __( 'Add New hotel' ),
    'new_item_name' => __( 'New hotel Name' ),
    'separate_items_with_commas' => __( 'Separate hotels with commas' ),
    'add_or_remove_items' => __( 'Add or remove hotels' ),
    'choose_from_most_used' => __( 'Choose from the most used hotels' ),
    'menu_name' => __( 'Package Hotels' ),
);

register_taxonomy('package_hotel','package',array(
    'hierarchical' => false,
    'labels' => $Package_labels,
    'show_ui' => true,
    'update_count_callback' => '_update_post_term_count',
    'query_var' => true,
    'show_in_nav_menus' => false,
    'rewrite' => array( 'slug' => 'hotels' ),
)); 
```

* * *

## 删除自定义分类元框表单自定义帖子类型酒店页面的代码

```
function my_remove_meta_boxes() {
    remove_meta_box('tagsdiv_hotels', 'Hotel', 'side');
}

add_action( 'admin_menu', 'my_remove_meta_boxes' ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-09T14:37:39.063

由于 WordPress 3.8 版本有一个`meta_box_cb` [参数可用](https://codex.wordpress.org/Function_Reference/register_taxonomy#Arguments)。`false`只需在您的参数定义中将此参数更改为

```
$args = array(
    'hierarchical'               => false,
    'public'                     => true,
    'show_ui'                    => true,
    'show_in_menu'               => true,
    'meta_box_cb'                => false,
); 
```

这将在您的自定义帖子类型下留下一个子菜单项，但会在帖子编辑页面上删除一个元框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:20:32.543

> 更改元框 ID`enter code here`
> 
> 功能 my_remove_meta_boxes() { remove_meta_box('package_hotel', 'Hotel', 'side'); } add_action('admin_menu', 'my_remove_meta_boxes');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:43:27.767

更改`register_taxonomy()`：您已保留

```
'show_ui' => true, 
```

将其更改为

```
'show_ui' => false, 
```

此参数确定是否应显示用户界面来管理分类。由于您不想要它，因此您必须将其设置为`false`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:51:15.480

好的，现在[Wordpress.org](http://codex.wordpress.org/Function_Reference/remove_meta_box)中给出的示例是这样的

* * *

```
`remove_meta_box($custom_taxonomy_slug.'div', $custom_post_type, 'side' );`

    // $custom_taxonomy_slug is the slug of your taxonomy, e.g. 'genre' )
    // $custom_post_type is the "slug" of your post type, e.g. 'movies' ) 
```

* * *

它进一步指示在这样的函数中编写元框属性的语法 `remove_meta_box( 'submitdiv', 'custom_post_id', 'side' );`

* * *

在我的情况下，自定义元框属性的语法是这样 `remove_meta_box('tagsdiv-package_hotel', 'hotel', 'side');` 的，所以不要在末尾附加 div，而是在开头附加 tagsdiv_ 例如：- tagsdiv_$your_custom_taxonomy_id

# asp.net-mvc - 我的视图无法解析不同项目中的类

> ID：13681519
> 
> 赞同：0
> 
> 时间：2012-12-03T10:40:21.190
> 
> 标签：asp.net-mvc

我创建了一个单独的项目来处理实体框架数据功能。我的视图需要是强类型的并在该项目中使用一个类。

但是，在我看来，这条线无法解决；

```
@model PagedList.IPagedList<SCD_Database.Models.Subcontractor> 
```

然而在我的控制器中没有问题

```
using SCD_Database.Models;

public class CompanyController : Controller
{
    public ActionResult ListSubcontractors(int page = 1)
    {
        var list = Subcontractor.GetSubcontractors().ToPagedList(page, 20);
        return View(list);
    } 
```

奇怪的是，当我创建视图时，我从选择中选择了类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:53:09.423

实际上，我发现智能感知，或者可能在无法正常工作的地方重新识别。当我重建应用程序时，错误消息消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:41:40.870

如果您的模型位于不同的命名空间中，则必须在视图中添加 using：

```
@using SCD_Database.Models
@model PagedList.IPagedList<SCD_Database.Models.Subcontractor> 
```

如果您引用的是 DLL 而不是来自 GAC，则将*“复制本地”*设置为`True`供您参考。

# php - 在 PHP 中，如何重命名数组键而不在最后移动它？

> ID：13681524
> 
> 赞同：0
> 
> 时间：2012-12-03T10:40:39.017
> 
> 标签：php, arrays, rename

我需要在 CSV 文件中写入一个数组，其中列顺序不能更改。但我想将列标题减少到最大 64 个字符的长度。为了使问题更笼统，让我们举一个简单的例子：

```
$array = array(
    'A te' => 'foo A',
    'Q test' => 'foo Q',
    'Z test' => 'foo Z',
);

var_dump($array); 
```

给 ：

```
array (size=3)
  'A te' => string 'foo A' (length=5)
  'Q test' => string 'foo Q' (length=5)
  'Z test' => string 'foo Z' (length=5) 
```

现在，我想将“Q test”键重命名为“Q tes”。如果我做 ：

```
$swap = $array["Q test"];
unset($array["Q test"]);
$array["Q tes"] = $swap;
var_dump($array); 
```

显示：

```
array (size=3)
  'A te' => string 'foo A' (length=5)
  'Z test' => string 'foo Z' (length=5)
  'Q tes' => string 'foo Q' (length=5) 
```

专栏的位置发生了变化，这不是我想要的。

我通过使用（在这里，将键减少到 5 个字符）解决了我的问题：

```
$keys = array_keys($array);
$values = array_values($array);
$count = count($keys);
for ($i = 0; ($i < $count); $i++)
{
   if (mb_strlen($keys[$i]) > 5)
   {
      $keys[$i] = mb_substr($keys[$i], 0, 5);
   }
}
$array = array_combine($keys, $values);

var_dump($array); 
```

输出：

```
array (size=3)
  'A te' => string 'foo A' (length=5)
  'Q tes' => string 'foo Q' (length=5)
  'Z tes' => string 'foo Z' (length=5) 
```

但这看起来非常耗费资源......我确实需要在我的每一行上执行这样的代码，并且我有 10k 到 100k 行。

有没有更简单的方法来重命名数组键而不移动它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:46:59.700

试试这个，应该更简单

```
foreach($array as $k=>$v){
   if($k=='Q test'){
      $new_arr['Q tes'] = $array['Q test'];
   }else{
      $new_arr[$k] = $v;
   }
}

print_r($new_arr); //set $array = $new_arr;  to overwrite all values 
```

# objective-c - NSImage 来自 NSData 信息

> ID：13681525
> 
> 赞同：0
> 
> 时间：2012-12-03T10:40:40.700
> 
> 标签：objective-c, macos, cocoa

我有一个`NSData`对象，据说包含 TIFF 格式的图像数据。[这](http://jsfiddle.net/VjyuG/)是一个输出示例（在左上角的框中）。

但是，当我`NSLog`出来时，我得到以下信息：

```
<NSImage 0x10013f620 Size={200, 200} Reps=(
    "NSBitmapImageRep 0x1001220d0 Size={200, 200} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=200x200 Alpha=NO Planar=NO Format=(not yet loaded) CurrentBacking=nil (faulting) CGImageSource=0x100150070"
)> 
```

这让我觉得它实际上可能是一个 BitmapImage。

无论如何，当我执行以下操作时：

```
NSData *artworkData;
NSImage *image;
artworkData = [self.currentTrack artwork]; // actually sets memory, like expected
image = [[NSImage alloc] initWithData:artworkData]; // causes the error 
```

我收到此错误：

```
2012-12-03 02:39:56.263 test[92556:303] -[NSImage length]: unrecognized selector sent to instance 0x10064ec90
2012-12-03 02:39:56.264 test[92556:303] -[NSImage length]: unrecognized selector sent to instance 0x10064ec90 
```

有任何想法吗？这已经困扰了我很长一段时间了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:02:37.133

你确定你在处理一个`NSData`对象吗？日志输出中的对象不是数据，它已经是一个 NSImage。因此，尝试将其用作 for 的参数`-[NSImage initWithData:]`将失败。

# java - java等于和==混淆

> ID：13681535
> 
> 赞同：0
> 
> 时间：2012-12-03T10:41:13.413
> 
> 标签：java, equals, string-comparison, comparison-operators

> **可能重复：**
> [java中的字符串池是什么？](https://stackoverflow.com/questions/3801343/what-is-string-pool-in-java)

**1.**我知道**==**检查两个对象是否指向相同的内存位置，**equals**的默认定义使用**==**进行检查，意味着两者都是相同的。

**2\.** **String**类重写 equals 方法来检查两个字符串是否具有相同的值。

考虑 S1 =“测试”和 S2 = S1；

现在 S1 和 S2 是两个不同的对象，因此根据第 1 点**S1==S2**应该为**假**，根据第 2 点**S1.equals(S2)**应该为**真**，但是当我在 eclipse 中运行这个小程序时，两者都返回真。关于 S1 == S2 的字符串对象有什么特别之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:42:50.773

> 考虑 S1 =“测试”和 S2 = S1；现在 S1 和 S2 是两个不同的对象

没有。这是你的论点失败的地方。

您创建了*一个*字符串对象，并且您的两个变量都引用了同一个字符串对象。赋值不会*制作*字符串的新副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T10:43:03.087

当你写

```
s1 = s2; 
```

`s1`并且`s2`是对同一个对象的引用，所以`s1 == s2`总是返回 true。

更令人困惑 - 如果你写：

```
s1 = "test";
s2 = "test";
s3 = new String("test"); 
```

你会发现这`s1 == s2`是真的，但又`s1 == s3`是假的。[这在这篇文章](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)中有更详细的解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T10:44:22.507

Wiritng S1 = S2 导致它们指向同一个对象

写作

```
String S1 = "test"
String S2 = "test" 
```

将产生与您现在相同的结果。这是由于编译器优化，编译器注意到字符串类是不可变的，因此他将优化代码以使用相同的实例。您可以通过使用构造函数实例化它们来强制他创建新字符串

```
String s1  = new String("test");
String s2  = new String("test");
System.out.println(s1 == s2) // false
System.out.println(s1.equals(s2)) //true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T10:45:52.870

当你初始化

```
S2=S1 
```

它们都指向相同的内存位置。

尝试

```
S1 = "test"; 
S2 = "test"; 
```

这会给你

```
 S1==S2 //false 
```

# r - 包括根据频率的值

> ID：13681536
> 
> 赞同：0
> 
> 时间：2012-12-03T10:41:16.140
> 
> 标签：r, dataframe

我有一个这样的data.frame：

```
24.8     
23.2     
22.8        
22.5     
22.5      
22.4     
22.4      
22.4      
22.3     
22.2     
22.2      
22.2      
22      
21.9      
21.9     
21.8 
```

我想根据频率添加一个值，以获得以下输出：

```
24.8      1      
23.2      1      
22.8      1      
22.5      2      
22.5      2     
22.4      3       
22.4      3        
22.4      3        
22.3      1     
22.2      3          
22.2      3         
22.2      3        
22        1                
21.9      2           
21.9      2         
21.8      1 
```

如何做到这一点？换句话说，因为 28.8 出现 1 次，所以它的值为 1；因为 22.5 出现两次，所以它的值为 2，以此类推。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T10:51:16.667

您可以`ave()`按如下方式使用：

```
myData <- data.frame(x = c(24.8, 23.2, 22.8, 22.5, 22.5, 22.4, 22.4, 22.4, 
                           22.3, 22.2, 22.2, 22.2, 22, 21.9, 21.9, 21.8))
myData$Index <- ave(myData$x, myData$x, FUN = length)
myData
#       x Index
# 1  24.8     1
# 2  23.2     1
# 3  22.8     1
# 4  22.5     2
# 5  22.5     2
# 6  22.4     3
# 7  22.4     3
# 8  22.4     3
# 9  22.3     1
# 10 22.2     3
# 11 22.2     3
# 12 22.2     3
# 13 22.0     1
# 14 21.9     2
# 15 21.9     2
# 16 21.8     1 
```

您还可以`data.table`按如下方式使用该软件包：

```
myData2 <- data.table(x = c(24.8, 23.2, 22.8, 22.5, 22.5, 22.4, 22.4, 22.4, 
                            22.3, 22.2, 22.2, 22.2, 22, 21.9, 21.9, 21.8),
                      key = "x")
# A `data.tabe` noob approach
# myData2[, Index := lapply(.SD, length), by = key(myData2)][]
# Or a better approach, as suggested by @Roland
myData2[, Index := .N, by = key(myData2)]
print(myData2)
#        x Index
#  1: 21.8     1
#  2: 21.9     2
#  3: 21.9     2
#  4: 22.0     1
#  5: 22.2     3
#  6: 22.2     3
#  7: 22.2     3
#  8: 22.3     1
#  9: 22.4     3
# 10: 22.4     3
# 11: 22.4     3
# 12: 22.5     2
# 13: 22.5     2
# 14: 22.8     1
# 15: 23.2     1
# 16: 24.8     1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T10:53:22.923

这可以通过`merge`and来完成`table`：

```
dat <- data.frame(V1 = c(24.8, 23.2, 22.8, 22.5, 22.5, 22.4, 22.4, 22.4, 
                         22.3, 22.2, 22.2, 22.2, 22,   21.9, 21.9, 21.8))

merge(dat, as.data.frame(table(dat$V1)), by.x = "V1", by.y = "Var1", sort = F)

#      V1 Freq
# 1  24.8    1
# 2  23.2    1
# 3  22.8    1
# 4  22.5    2
# 5  22.5    2
# 6  22.4    3
# 7  22.4    3
# 8  22.4    3
# 9  22.3    1
# 10 22.2    3
# 11 22.2    3
# 12 22.2    3
# 13 22.0    1
# 14 21.9    2
# 15 21.9    2
# 16 21.8    1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T10:54:41.300

或使用包`plyr`：

```
a <- c(24.8,23.2,22.8,22.5,22.5,22.4,22.4,22.4,22.3,22.2,22.2,22.2,22,21.9,21.9,21.8)
df <- data.frame(a)

library(plyr)
ddply(df,~a,transform,freq = length(a))

      a freq
1  21.8    1
2  21.9    2
3  21.9    2
4  22.0    1
5  22.2    3
6  22.2    3
7  22.2    3
8  22.3    1
9  22.4    3
10 22.4    3
11 22.4    3
12 22.5    2
13 22.5    2
14 22.8    1
15 23.2    1
16 24.8    1 
```

# deployment - MVC.NET Razor 视图在不同部署中呈现不同

> ID：13681538
> 
> 赞同：2
> 
> 时间：2012-12-03T10:41:20.527
> 
> 标签：deployment, asp.net-mvc-4, razor-2

我在一个 MVC4 项目中有一个剃刀视图，它在两个不同的环境中以不同的方式处理相同的输入。我在 MVC 部分中有一个脚本块。

在我的实时部署中，每当我创建小于比较 ( `if(a < b)`) 时，`<`都会将其解释为 HTML 块，并且该部分将以奇怪的方式呈现。目前，我必须使用`Html.Raw("<")`. 在我的开发机器上，我没有这个问题。

我敢肯定有一个简单的答案来解释为什么 razor 没有意识到这`<`是我的 javascript 的一部分，但是现在，我只对为什么不同的行为会有所*不同*感兴趣。我知道这两种设置都在运行 razor v2，因为条件属性等新功能在两者中都有效。

造成这种差异的原因可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:42:40.090

检查两个环境中System.Web.Razor.dll的文件版本，看两个地方是否都是2.0.20715。我们确实通过 Web PI 发布了包含在 MVC 4 安装程序中的 Razor v2 更新，但不在 Visual Studio 2012 的框中，这可能是您所看到的行为差异的原因。

# java - 在 GWT 中实现拖放列表的最佳方法

> ID：13681541
> 
> 赞同：5
> 
> 时间：2012-12-03T10:41:44.647
> 
> 标签：java, gwt

我希望使用 Drag n Drop 来实现一个简单的列表以重新排序列表。但是，将来我可能还想在我的 CMS 中添加更多 DnD 功能。

我在搜索中遇到了 3 个选项

*   Google-Web-Toolkit (GWT) 的拖放库 - [http://code.google.com/p/gwt-dnd/](http://code.google.com/p/gwt-dnd/)
*   GwtQuery 插件存储库 - [http://code.google.com/p/gwtquery-plugins/](http://code.google.com/p/gwtquery-plugins/)
*   [GWT 2.4 中](https://stackoverflow.com/questions/7381138/drag-and-drop-in-gwt-2-4)的一个 GWT2.4 机制Drag and Drop

由于 GWT 多年来一直在发展，并且我发现了很多关于实现 DnD 主题的旧文章，我想知道在 GWT (2.5) 中实现 DnD的*当前最佳方法是什么*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:01:07.170

如果您可以使用 GWT 中实现的“本机”支持，我建议您坚持这一点。

好处：

*   速度，没有额外的库要求

问题

*   功能有限（受 HTML5 原生功能限制）
*   浏览器支持有限（[确保您有 Internet Explorer 支持](http://caniuse.com/#search=drag%20and%20drop)- 如果需要）

我将[gwt-dnd](http://code.google.com/p/gwt-dnd/)用于具有大量浮动窗口/面板（类似于桌面环境）的复杂 UI。如果您受到 HTML5 功能或浏览器支持的限制，我推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:25:17.200

如果它暂时清除了您的清单，您可以通过坚持 GWT 2.4 功能支持来保持简单。

1）它肯定会比任何其他第三方的东西都快。

2) 如果您遇到错误，您可以随时轻松更新到最新的 GWT，而不是等待第三方更新。

3）如果您真的需要一些附加功能，那么您可以尝试其他两个选项。它们维护得很好，并随着 GWT 一起发展。您只需要确保完成性能分析以涵盖您的用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:22:29.830

我推荐[Gwtquery 的拖放插件](http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers)。它支持许多开箱即用的 dnd 功能，还支持带有单元小部件的 dnd。

检查示例： http: [//gwtquery-plugins.googlecode.com/svn/branches/droppable_1_0/demo/GwtSimpleSample/GwtSimpleSample.html](http://gwtquery-plugins.googlecode.com/svn/branches/droppable_1_0/demo/GwtSimpleSample/GwtSimpleSample.html)

# algorithm - h(k) = k mod m，其中 k 是以基数 2^p 和 m = 2^p – 1 解释的字符串。证明 h(x) = h(y)

> ID：13681543
> 
> 赞同：1
> 
> 时间：2012-12-03T10:41:45.833
> 
> 标签：algorithm, hash, radix

完整的问题是：

考虑哈希函数：

> `h(k) = k mod m`，其中 k 是以基数 2 ^p和 m = 2 ^p – 1 解释的字符串。表明通过置换字符串中的字符，我们可以将字符串和哈希`y`导出为相同的值。`x ⇒ x``y`

我决定有两种方法可以解决这个问题。我可以证明

`h(x) - h(y) = 0`或者

> h(x) = (x * (2 ^p - 1)) % (2 ^p - 1) 无论我们使用什么 x，它总是等于 0

我在网上查找了几种解决方案，但我对这个问题感到非常困惑。我认为我最大的问题是我不确定我应该如何使用基数信息来解决这个问题。

我可以得到关于我应该如何开始这个问题的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:16:01.173

如果`m = 2^p - 1`和 k 是在 中解释的字符串`radix 2^p`，则两个字符串相同，除了转置的字符散列到相同的值例如 let`m = 2^3 - 1 = 7`和使用字符的 ASCII 值：

字符串“abcd”表示为

> k = 97。8^3 + 98 。8^2 + 99 。8 + 100 = 56828
> 哈希 56828 mod 7 = 2。

字符串“badc”表示为

> k = 98。8^3 + 97 。8^2 + 100 。8 + 99 = 57283
> 哈希 57283 mod 7 = 2。

# c# - razor/mvc 代码在页面加载而不是 onclick 上运行？

> ID：13681545
> 
> 赞同：0
> 
> 时间：2012-12-03T10:41:49.133
> 
> 标签：c#, asp.net-mvc, razor

我有一个创建一些按钮的循环，并且（旨在）在按下该按钮时进行函数调用。

```
 foreach (Answer a in qanswers)
           {
               //Guid answerid = new Guid();
               <form method="post" action="">
               <div class="float-left">
               <input type="submit" value="@a.Answer1" class="submit" style="width:600px" onmousedown="@{saveTest(a, module, user, quest, healthsafety);}">
               <br /><br />
               </div>
               </form>
           } 
```

但是，它在页面加载时为生成的每个按钮调用“saveTest”过程，而不是 onmousedown/onmouseclick。

有可能改变这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:49:51.023

我由此假设 saveTest 是您尝试调用的服务器端函数。

onmousedown 是客户端事件，只能直接运行客户端脚本。

如果您希望调用服务器端函数，那么您需要以页面将发布包的形式指定一个操作。

在这里查看更多关于此的信息

[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx)

您的代码的快速修改版本将是：

```
foreach (Answer a in qanswers)
{

    using (Html.BeginForm("saveTest", "ControllerName"))
    {
           <div class="float-left">
           <input type="submit" value="@a.Answer1" class="submit" style="width:600px")>
           <br /><br />
           </div>

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:26:31.257

该按钮将提交给在表单中指定的控制器和操作。因此，请仔细检查您指定的控制器和操作。

```
 using (Html.BeginForm("saveTest", "Controller"))
    {
    } 
```

这是您必须指定表单的方式。

问候， Pavan.G

# c++ - 从巨大的txt读取二维矩阵

> ID：13681547
> 
> 赞同：2
> 
> 时间：2012-12-03T10:41:55.970
> 
> 标签：c++, arrays, file, matrix

我必须为应该从文本文件中读取二维数组的程序编写一个函数。文本文件是可变的，所以我编写了将计算行数和列数的函数，我还编写了一个显示矩阵的函数，但是我遇到了应该将 txt 文件中的值读入 2d 的函数大批。我正在粘贴我所做的事情。请记住，我在网上寻找问题的答案已有 4 天了。所以我需要帮助的是从 txt 中获取值到矩阵中的函数。谢谢你。

```
#include "stdafx.h"
#include <iostream>
#include <time.h>
#include <fstream>
#include <istream>
#include <iomanip>
#include <sstream>
#include <string>
#include <stdio.h>
using namespace std;

/*Declaring unviversal variables*/

ifstream datafile ("randaex1.txt");             /*Original data file*/
ifstream testfile ("test1.txt");
ofstream outputfile;                            /*Output     data file*/
string line,a,b,auxiliar;
stringstream ss;
int number_of_lines,col,matrix[100][15000];
int A[4][5] = {{1, 2, 3, 4, 5},
           {6, 7, 8, 9, 10},
           {11, 12, 13, 14, 15},
           {16, 17, 18, 19, 20}};

int readfromfile()                              /*Test     function. Reads the first line of the file into variable "line"*/
{
if (datafile.is_open())
{
    getline (datafile,line);
    datafile.close();
}
else
    cout << "Unable to open file";
return 0;
}

int writetofile ()                              /*Test     function. Writes "line" to the output file.*/
{
outputfile.open ("example.txt");
outputfile << line << "\n";
outputfile.close();
cout << "\nThe line\n \n" << line << "\n\nwas copied to example.txt" << endl;           /*Gives feedback of the copied line to user.*/
return 0;
}

int sizeofline()                            /*Test function.     Calculates the size of a line*/
{
cout << "\nThe size of line is " << line.size() << " characters.\n";
return line.size();
}

int linesinfile()                           /*Calculates the     number of lines in datafile(the number of rows in matrix)*/
{
number_of_lines=0;
std::string liney;
std::ifstream myfile("randaex1.txt");

while (std::getline(myfile, liney))
{
    ++number_of_lines;
}

std::cout << "Number of lines in text file: " << number_of_lines;

system("pause");
return number_of_lines;
}

int columns()                           /*Calculates the number of columns in datafile*/
{

col=0;
for (int i=0;i<=line.size();i++)
    if (line[i]==' ')
        col++;
col = col++;
cout << col;
return col;
}

void Readm(int N, int M)
{
for(int R=0;R<N;R++)
{
    for(int C=0;C<M;C++)
        cin>>A[R][C];
    cout<<endl;
   }
}

void Displaym(int N, int M)
{
N=4, M=5;
for(int R=0;R<N;R++)
{
    for(int C=0;C<M;C++)
        cout<<setw(10)<<A[R][C];
    cout<<endl;
   }
}

void matrixfile()                       /*Reads file to matrix*/
{
string str[10][5];
int a = 0;
int b = 0;
if(!testfile) //Always test the file open.
{
            cout<<"Error opening output file"<<endl;
            system("pause");

}
while(!testfile.eof())
{
  getline(testfile,str[a][b],' ');
  cout << str[a][b];
  system("pause");
  if(a == 5)
  {
       a=0;
       ++b;
       getline(testfile,str[a][b],' ');
       cout << str[a][b];
       system("pause");
  }
  a++;
    }
b=0;
for(int i=0; i<=3; i++)    //This loops on the rows.
{
    for(int j=0; j<=4; j++) //This loops on the columns
    {
        cout << str[i][j]  << " ";

    }
    cout << endl;
}
}

int main()
{
readfromfile();
writetofile();
sizeofline();
getchar();
/*linesinfile();*/
getchar();
columns();
getchar();
Displaym(4,5);
getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:31:50.170

如果您已经知道文件中的 nRows 行和 nColumns 列，那么您的代码应该是这样的：

```
void ReadFileToMatrix()
{
    datafile.seekg(0, ios::beg);

    for(int i = 0; i < nRows; i++)
        for(int j = 0; j < nColumns; j++)
            datafile >> matrix[i][j]; 
} 
```

# php - htaccess 重定向- 我想重定向 url ex: www.example.com/mypage 到 www.example.com

> ID：13681552
> 
> 赞同：0
> 
> 时间：2012-12-03T10:42:24.877
> 
> 标签：php, .htaccess

我想将 url ex: www.example.com/mypage 重定向到 www.example.com

这个对吗？

```
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)$
RewriteRule .* http://{SERVER_NAME} [R] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:12:02.980

请试试这个：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^mypage.*$ http://www.example.com/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:05:22.027

我会做这样的事情：

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.+)$ / [QSA,L] 
```

通过这种方式，您可以将斜线后面的所有内容作为 GET

```
RewriteRule ^(.+)$ /?param=$1 [QSA,L] 
```

# javascript - 如何通过输入键和鼠标单击按钮获得类似的功能

> ID：13681554
> 
> 赞同：0
> 
> 时间：2012-12-03T10:42:25.853
> 
> 标签：javascript, asp.net, .net, dom-events

我继承了一个 ASP.NET 1.1 Web 应用程序。

页面上有各种按钮、文本框和其他控件。还有一个密码文本框和密码按钮。如果用户输入密码并按下回车键（焦点在文本框中），那么我需要它来启动`btnPassword`click 事件处理程序背后的代码。

这是我应该为我提供此功能的 JavaScript：

```
<script language="javascript" type="text/javascript">
     function kPress(e, buttonId) {
          var evt = e ? e : window.event;
          var bt = document.getElementById(buttonId);

          if (bt) {
               if (evt.keyCode == 13) {
                    bt.click();
                    return false;
               }
          }
     }
</script> 
```

用鼠标单击密码按钮时，如果密码无效，则会显示错误消息。这是对的。如果我在焦点位于密码文本框上时单击 Enter，那么我会得到不同的结果。它确实在`btnPassword`单击事件处理程序上进行，但是看起来好像页面会自行重置，并且看起来就像页面第一次加载时一样。

上面的 JavaScript 代码是否与用鼠标物理单击按钮时相同？如果不是，我需要如何更改它才能获得类似的功能？

这是我的标记：

```
<INPUT id="txtPassword" runat="server" type="password" NAME="txtPassword" onkeypress="kPress(event, 'btnPassword');">
<asp:button id="btnPassword" runat="server" Text="OK" CssClass="buttonDefault"></asp:button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:49:59.853

```
<script language="javascript" type="text/javascript">
 function kPress(e, buttonId) {
      var evt = e ? e : window.event;
      var bt = document.getElementById(buttonId);

      if (bt) {
           if (evt.keyCode == 13) {
               evt.cancelBubble = true; 
               evt.returnValue = false;
               //if browser not ie evt.preventDefault();
                bt.click();
                return false;
           }
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:39:42.827

我只需要添加一个返回到 onkeypress 事件：

```
<INPUT id="txtPassword" runat="server" type="password" NAME="txtPassword" onkeypress="return kPress(event, 'btnPassword');"> 
```

# mysql - Wordpress 限制查询结果

> ID：13681558
> 
> 赞同：1
> 
> 时间：2012-12-03T10:42:36.907
> 
> 标签：mysql, wordpress

如何限制 wordpress 中的查询结果假设我只想显示一个类别中的最后 4 个帖子，但从第二行开始，我知道在 MySql 中是这样的：

```
select * 
from table_name 
limit 4, 1 
```

在 wordpress 中应该是这样的：

```
('cat' => get_category_id($catname), 'posts_per_page' => 2, 1); 
```

但它不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:47:15.850

使用`paged`（和`$paged`WordPress 变量）参数。这里的所有信息：http: [//codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query](http://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:39:19.460

我找到了解决方案，我只需要使用偏移变量而不是分页。

在这里查看详情

[http://wordpress.org/support/topic/query_posts-offset-and-pagination](http://wordpress.org/support/topic/query_posts-offset-and-pagination)

# java - NFS 客户端锁定当前正在远程 NFS 服务器中写入的文件

> ID：13681559
> 
> 赞同：0
> 
> 时间：2012-12-03T10:42:47.660
> 
> 标签：java, linux, linux-kernel, nfs, nfsclient

我已经在我的本地机器上挂载了一个 NFS 挂载（所以，我想我的机器是 NFS 客户端），并且正在由托管 NFS 挂载的远程机器（NFS 服务器）在 NFS 挂载中写入一个文件。现在，我如何能够使用 JAVA 检测到远程机器中写入的文件在我从本地机器读取之前已关闭？

或者，有没有其他方法可以实现我想要的？

编辑：我还想提一下，我无法控制远程 NFS 服务器。我只能以只读模式安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:06:25.230

正如您所说，您无法控制 NFS 服务器，也无法控制更新 NFS 服务器上文件的程序，因此您无能为力。您真正可以利用的唯一一件事是，当文件更新时，它的修改时间也会更新。这应该可以使用 File.lastModified() 提供给您的 java 客户端。如果您的应用程序记住了上次修改日期，那么您至少可以知道自上次阅读以来是否有要处理的数据。这绝对不是完美的。有竞争条件等，但取决于您的应用程序需要/做什么，这可能就足够了。您无法判断文件在服务器上是关闭还是打开。

如果文件修改出现缓慢，您也可以使用*noac*挂载选项挂载。虽然这会损害常规 NFS 客户端上的 NFS 性能，但如果您的计算机没有在该驱动器上使用大量其他 NFS 文件，它可能对您有用。参见“ *man nfs* ”。

作为旁注，我看不到文件锁定会有所帮助，因为您没有表明 NFS 服务器上的应用程序无论如何都使用锁。

# regex - 正则表达式匹配任何不同于 ACTIONLOGDIR="/vz/actionlog"

> ID：13681564
> 
> 赞同：2
> 
> 时间：2012-12-03T10:43:00.183
> 
> 标签：regex, regex-negation

我正在尝试创建一个正则表达式来匹配除 ACTIONLOGDIR="/vz/actionlog" 之外的任何其他内容。到目前为止，我想出了这个：

```
^(?:(?!ACTIONLOGDIR="/vz/actionlog)).*$ 
```

不幸的是，它也不匹配一些它应该匹配的东西。例如：

```
ACTIONLOGDIR="/vz/actionlog" - not matching, this is OK
ACTIONLOGDIR="/vz/blabla" - matching, is OK
ActionLogDir="/vz/actionlog" - matching, is OK
ACTIONLOGDIR="/vz/actionLOG" - matching, is OK
ActionLogDir="/vz/actionLOG" - matching, is OK
VIRTUOZZO="/var/actionlog" - matching, is OK
ACTIONLOGDIR="/vz/actionlog"""""" - this is not matching, it should
ACTIONLOGDIR="/vz/actionlog"ACTIONLOGDIR="/vz/actionlog" - this is not matching either 
```

我也尝试使用：

```
^(?:(?!ACTIONLOGDIR="/vz/actionlog))["]{1}$ 
```

和其他几个变体......但这与任何东西都不匹配。

更具体地说，我正在寻找变量名称，如果该名称首先匹配，它应该在等号后面查找值，看看它是否正确。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:59:16.890

好吧，不确定我是否清楚地理解了您想要匹配的内容，但是您可以尝试这个正则表达式，它适用于您发布的字符串：-

```
"(?!ACTIONLOGDIR=\"/vz/actionlog\"$).*" 
```

# redis - Redis 是否支持强一致性

> ID：13681565
> 
> 赞同：14
> 
> 时间：2012-12-03T10:43:00.527
> 
> 标签：redis, replication, database-replication

我正在考虑将 Java 应用程序移植到 .NET，该应用程序当前大量使用 EhCache，并坚持要支持强一致性（http://ehcache.org/documentation/get-started/consistency-options）。

我想用 Redis 代替 EhCache，但是 Redis 支持强一致性还是只支持最终一致性？

我看到过关于 Redis Cluster 的讨论，但我想这离发布还有一点距离。

还是我看错了？如果 Redis 实例完全位于不同的服务器上并为两个前端服务器提供服务，那么在我们需要查看主/从式事件之前，它会变得多大？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T00:38:34.297

Redis 的单个实例是一致的。在许多实例中存在一致性选项。@antirez（Redis 开发人员）最近写了一篇博文，[Redis 数据模型和最终一致性](http://antirez.com/news/36)，并推荐使用[Twemproxy](http://antirez.com/news/44)对 Redis 进行分片，这可以让您在许多实例上保持一致性。

我不知道 EhCache，所以无法评论 Redis 是否是合适的替代品。Twemproxy 的一个潜在问题（移植到 .NET）是它似乎只能在 Linux 上运行。

单个 Redis 实例可以有多大？取决于你有多少内存。它会以多快的速度变大？取决于您的数据的外观。

也就是说，根据我的经验，Redis 非常有效地存储数据。我拥有的一个应用程序在 400mb 的 RAM 中保存了 20 万用户的信息、2 万篇文章、对象之间的所有关系、每周排行榜、统计数据等（总共 33 万键）。

Redis 易于使用且使用起来很有趣。尝试一下，看看它是否满足您的需求。如果您确实决定使用它并且可能有一天想要分片，请从一开始就对您的数据进行分片。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-17T15:12:24.140

Redis 开箱即用不是强一致的。您可能需要应用第 3 方解决方案以使其保持一致。这是来自文档的引用：

> 写安全 Redis Cluster 使用节点间异步复制，las​​t failover 胜出隐式合并功能。这意味着最后选出的主数据集最终会替换所有其他副本。分区期间总是有可能丢失写入的时间窗口。然而，在连接到大多数主控的客户端和连接到少数主控的客户端的情况下，这些窗口非常不同。

通常您需要同步复制以在分布式分区系统中实现强一致性。

# java - JPA CascadeType.ALL 不能通过查询工作？

> ID：13681567
> 
> 赞同：1
> 
> 时间：2012-12-03T10:43:06.507
> 
> 标签：java, jpa

我有`OneToMany`双向关系实体类（`WorkOrder`和`Task`）。`WorkOrder`有一个或多个`Task`。`WorkOrder`当我通过**查询**删除一个实体时，我得到外键约束异常。`EntityManager`不能`Task`自动删除相关。

我的问题：是否`CascadeType.REMOVE`按`em.removed(..)`方法使用？不使用它`query`吗？（删除查询）。

工作订单.java

```
.....
public class WorkOrder {
    ....
    @Temporal(TemporalType.TIMESTAMP)
    private Date expiryDate;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="workOrder", orphanRemoval=true)
    private List<Task> taskList;
    ......
} 
```

任务.java

```
......
public class Task {
    .....
    @ManyToOne
    @JoinColumn(name = "WORK_ORDER_ID", referencedColumnName = "ID")
    private WorkOrder workOrder;
    .....
} 
```

我需要`WorkOrder`根据到期日期删除。我需要先删除相关`Task`，然后我必须删除`WorkOrder`. 这是正确的吗？我认为，它会更好地`CascadeType`被`Query`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T10:46:29.937

根据规范，DELETE by query（查询开始“DELETE FROM ...”）不会触发此类回调（因为它是一种快速从数据存储中删除数据的方法）；回调仅用于正常的持久性操作（持久化、合并、刷新、删除），因此如果您希望遵循它们的行为，请使用*remove()*

# node.js - 写入节点js中的特定div

> ID：13681570
> 
> 赞同：0
> 
> 时间：2012-12-03T10:43:10.263
> 
> 标签：node.js

我有这个简单的文件 hello.html，看起来像这样。

```
<!DOCTYPE html>
<html>
<head>
  <style>
  p { background:yellow; }
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<div class="thediv">

</div>
</body>
</html> 
```

我正在使用`fs`模块像这样写入我的文件

```
var fs = require('fs');

var randomnumber = Math.floor((Math.random()*100393)+433334);

fs.createReadStream('test.txt').pipe(fs.createWriteStream(randomnumber+'.txt'));

fs.writeFile(randomnumber+".txt", "Lorem ipsum"+randomnumber, function(err) {
    if(err) {
        console.log(err);
    } else {
        console.log("The file was saved!");
    }
}); 

console.log(randomnumber); 
```

我想写

```
<article>
<p> lorem ipsum </p>
</article> 
```

到具有 id 的 div `thediv`。是`fs`用于这种事情的模块还是有更适合此任务的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:34:53.773

我相信获得 HTML 解析器、将文件解析为 DOM、进行调整然后将 DOM 保存回文件的唯一答案。这是一个回答在哪里可以[找到 HTML 解析器](https://stackoverflow.com/questions/7372972/how-do-i-parse-a-html-page-with-node-js)的问题。

# php - PHP搜索多维数组并返回键 - 超超大变化数组

> ID：13681571
> 
> 赞同：2
> 
> 时间：2012-12-03T10:43:12.133
> 
> 标签：php, arrays, dynamic, multidimensional-array, search

您好，我目前正在使用构建的 API 从 MMO 中获取价格并将其显示在数组中。目前这是我的代码：

```
 <?php 
ini_set('max_execution_time', 0);
$data = json_decode(file_get_contents("http://www.gw2spidy.com/api/v0.9/json/all-items/all"), true);
foreach($data as $item) {
    echo '<pre>';
    print_r($data);
    echo '</pre>';
}
?> 
```

这将返回一个 MASSIVE 数组。我保存了 html 文件，它大约有 35 兆字节。它有每件商品的每一个价格等......好吧，基本上我需要的是搜索一个项目，如“黄昏”或它的 itemID“29185”。价格和数组键每小时都在变化，所以我一直试图找出一种动态的方式来每次都提取这些数据，但我很难过......

数组的结构如下：

```
Array
(
    [count] => 19959
    [results] => Array
        (
    [15875] => Array
        (
            [data_id] => 29185
            [name] => Dusk
            [rarity] => 5
            [restriction_level] => 80
            [img] => https://dfach8bufmqqv.cloudfront.net/gw2/img/content/fabc9042.png
            [type_id] => 18
            [sub_type_id] => 6
            [price_last_changed] => 2012-12-03 08:30:49 UTC
            [max_offer_unit_price] => 3180000
            [min_sale_unit_price] => 3890000
            [offer_availability] => 5574
            [sale_availability] => 6
            [gw2db_external_id] => 63505
            [sale_price_change_last_hour] => 0
            [offer_price_change_last_hour] => 0
        ) 
```

如果有人能指出我正确的方向，那就太棒了！我已经搜索了几天又几天，但无法弄清楚......我敢打赌这也很简单:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:56:32.897

首先，很高兴知道是否有一种方法可以从 GW2 API 服务器仅检索自上次“获取所有”以来的更新项目。这意味着您只需要检索整个数组一次，然后更新每次更新的少数记录。

1.  您可以使用类似 array_chunk [http://php.net/manual/en/function.array-chunk.php的方式拆分数组](http://php.net/manual/en/function.array-chunk.php)
2.  使用这些拆分数组为 MySQL 等数据库生成批量插入语句。
3.  使用简单的 SELECT 查询来检索语句。

如果您想在没有 DB 的情况下执行此操作，则只需使用 for 循环搜索项目...

```
for($i = 0; $i < $array['count']; $i++)
{
    if ($array['results'][$i]['name'] == 'Dusk')
     // you found the item
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:07:36.373

试试这个。

在这里，您已经习惯了创建一个新数组并访问它。

```
ini_set('max_execution_time', 0);
$data = json_decode(file_get_contents("http://www.gw2spidy.com/api/v0.9/json/all-items/all"), true);
$new_arrry = array();
$i = 0;
foreach($data as $item) {
    $new_arry[$i] = $item['name'];
    $new_arry[$i] = $item['data_id'];
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:31:48.493

尝试递归数组搜索。这是一个使用在 php.net 页面上发布的用于 array_search 的递归函数的示例。请注意，该函数实际上并不使用 array_search php 函数，但提供了支持多维数组的类似功能。

首先是功能：

```
function search($array, $key, $value)
{
    $results = array();

    if (is_array($array))
    {
        if (isset($array[$key]) && $array[$key] == $value)
            $results[] = $array;

        foreach ($array as $subarray)
            $results = array_merge($results, search($subarray, $key, $value));
        }

    return $results;
} 
```

现在使用函数：

```
$data = json_decode(file_get_contents("http://www.gw2spidy.com/api/v0.9/json/all-items/all"), true);
$results = $data['results'];
$foundItems = search($results, 'name', 'Dusk');
print_r($foundItems); 
```

这应该为您提供结果中与名称匹配的所有项目的数组。同样，对 id 的搜索将是：

```
$foundItems = search($results, 'data_id', '12345'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:59:13.473

**首选解决方案**

**使用**MySQL 之类的数据库来存储所有请求，并且仅在 JSON 被修改后才更新数据库 为什么？

```
$url = "http://www.gw2spidy.com/api/v0.9/json/all-items/all";
var_dump(get_headers($url)); 
```

输出

```
array (size=13)
  0 => string 'HTTP/1.1 200 OK' (length=15)
  1 => string 'Server: cloudflare-nginx' (length=24)
  2 => string 'Date: Mon, 03 Dec 2012 11:52:41 GMT' (length=35) <--- See Date
  3 => string 'Content-Type: application/json' (length=30)
  4 => string 'Content-Length: 8621869' (length=23)
  5 => string 'Connection: close' (length=17)
  6 => string 'cache-control: no-cache' (length=23)
  7 => string 'X-Varnish-TTL: 300.000' (length=22)
  8 => string 'Accept-Ranges: bytes' (length=20)
  9 => string 'Age: 135' (length=8)
  10 => string 'X-Varnish-Cache: HIT' (length=20)
  11 => string 'Set-Cookie: __cfduid=d249da7538d37614f7bc206fd407142eb1354535561; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.gw2spidy.com' (length=133)
  12 => string 'CF-RAY: 286a7d677b004f85' (length=24) 
```

如您所见，它是上次修改`Date: Mon, 03 Dec 2012 11:52:41 GMT`的，您在每个请求中提取所有这些信息是没有意义的

```
$url = "http://www.gw2spidy.com/api/v0.9/json/all-items/all";
$info = get_headers($url,true);

$lastDate = new DateTime();
$lastDate->setDate(2012, 12, 03); 

$dateModified = DateTime::createFromFormat("D, d M Y g:i:s \G\M\T", $info['Date']);
if($dateModified > $lastDate)
{

    //Parse Jason
    //Update Database etc 
}

// Select * from result where name = 'WHAT YOU WANT' 
```

**教育目的 **

```
$filter = new \ProductIterator("http://www.gw2spidy.com/api/v0.9/json/all-items/all");
$filter->find("name", "dusk"); //<---- What you want to find 

echo "<pre>";
foreach ( $filter as $value ) {
    var_dump($value);
} 
```

输出（找到 2 个结果）

```
Dusky Dye - 20428
Dusk Dye - 20564
Dusk - 29185 
```

总时间

```
1.4957299232483  <------------------ Total Time 
```

[观看现场演示](http://codepad.viper-7.com/M6pzhe)

使用的类

```
class ProductIterator extends FilterIterator {
    private $key;
    private $value;

    public function __construct($url) {
        $data = json_decode(file_get_contents($url), true);
        parent::__construct(new ArrayIterator($data['results']));
        unset($data);
    }

    public function find($key, $value) {
        $this->key = $key;
        $this->value = $value;
    }

    public function accept() {
        $user = $this->getInnerIterator()->current();
        if (isset($user[$this->key])) {
            return stripos($user[$this->key], $this->value) !== false;
        }
        return false;
    }
} 
```

# php - 使用 jquery 从“to”字段检索电子邮件 ID

> ID：13681578
> 
> 赞同：-3
> 
> 时间：2012-12-03T10:43:24.853
> 
> 标签：php, javascript, jquery, email

我已经提出了以 1000 人为一组发送邮件的应用程序。在邮件中，我放了一个链接来“喜欢”我的产品。

每当用户单击该链接时，我的邮件应返回他/她的电子邮件 ID 并重定向到成功页面。

现在我的问题是如何从 1000 封电子邮件中检索该用户的电子邮件地址。

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:46:59.797

你不能。

没有电子邮件客户端会运行嵌入在电子邮件中的 JavaScript。就此而言，有很多甚至不支持表单。

如果您想从您向其发送电子邮件的人那里收集数据，并且想知道它是哪个用户，请在电子邮件中包含指向您网络服务器上的表单的链接。您可以在查询字符串中传递电子邮件地址（或其他标识符）并使用它来预填充表单。

请注意收件人将电子邮件转发给其他人的可能性。他们会将链接转发为他们的识别令牌。

# c# - 找不到 C# 引用的组件

> ID：13681579
> 
> 赞同：0
> 
> 时间：2012-12-03T10:43:26.880
> 
> 标签：c#, reference

我正在尝试使用 Visual Studios 建立一个 svn 项目。但我对引用有疑问。据说有些参考文献丢失了。我试图在我的计算机上启动一个新项目，并且 svn 中缺少的参考自动在本地项目中。

我试图将缺少的引用添加到我的项目中，但似乎找不到它们。我已经附上了一张图片，我的参考资料目前的样子。左边是 svn 项目，右边是我的本地项目。

![](../Images/82f0915fd4ee2e4dbba32d1db4b1e39e.png)

预先感谢您的帮助法比奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:42:09.533

我们刚刚找到了为什么它不起作用的解决方案。问题是 ankhSVN 引起了问题。所以我们只是摆脱了它并保留了乌龟。谢谢你的时间：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:47:04.450

检查 DotNetOpenAuth 程序集框架版本和您的项目框架目标。当您导入不兼容的程序集时，它们会添加到项目中，但找不到命名空间。

# database - Wordpress 分布式开发和数据库管理

> ID：13681581
> 
> 赞同：2
> 
> 时间：2012-12-03T10:43:27.780
> 
> 标签：database, wordpress

我正在寻找一种方法来处理 Wordpress 的分布式开发。目前我建立了一个共享的 git 存储库，在该存储库上我已经对网站的所有代码进行了版本控制。我遇到的问题是如何处理数据库。显然，当我们（我和其他开发人员）在本地改进网站时，我需要我们的网站运行。这意味着网站的用户（尚未启动）将能够在我们使用数据库转储在本地开发网站时修改我们的数据库（用户注册等）。我想了解的是在站点运行时处理这样的共享开发的最佳实践，因此数据库可以更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:57:43.247

数据库数据更改不是您的问题（转储交换，如果需要，解决大多数问题）

结构的变化是另一个大问题，您可以尝试在[LiquiBase上查看（用于](http://www.liquibase.org/manual/overview)**脑力解决方案**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:19:38.307

不确定您开发的是什么，主题或插件，但使用 WordPress，数据库中的更改不应影响您的开发，除非您设置了用户可以创建新自定义帖子的地方，我的意思是新的“自定义帖子”不是基于自定义帖子的新帖子，这可能会改变您正在开发的内容的行为。

如果用户因为他们所做的事情而遇到一些奇怪的事情，那么这就是所谓的错误修复，好消息是您可以导出和导入数据库来修复他们遇到的任何问题。

# mysql - Sql将信息插入表中的几个项目

> ID：13681584
> 
> 赞同：0
> 
> 时间：2012-12-03T10:43:55.100
> 
> 标签：mysql, sql, postgresql

我得到了这个例子，在这里得到了一些帮助：

[http://sqlfiddle.com/#!2/92e87/1](http://sqlfiddle.com/#!2/92e87/1)

但是，如果我想尝试为表的每个子项插入信息，我似乎无法让它工作（使用此代码）：

```
CREATE TABLE country (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(255) NOT NULL
)
;

CREATE TABLE location (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(255) NOT NULL,
    coordinate varchar(255) NOT NULL,
    country_id integer NOT NULL REFERENCES country (id)
)
;

CREATE TABLE item (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    title varchar(60) NOT NULL,
    description varchar(900) NOT NULL,
    date datetime NOT NULL,
    source varchar(255) NOT NULL,
    link varchar(255) NOT NULL,
    location_id integer NOT NULL REFERENCES location (id)
)
;

Insert Into item (title) values ('Title');
Insert Into item (description) values ('Description');
Insert Into item (date) values ('1995-12-31T23:59:59Z');
Insert Into item (source) values ('Source');
Insert Into item (link) values ('Link');
Insert Into item (location_id) values ('1'); 
```

这是这样做的正确方法吗？其次，它告诉我“描述”没有默认值，但如果我总是将信息放入其中，它是否需要一个默认值？

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:46:24.320

对于每次插入，您最终都会在项目表中获得新的数据行。我不认为这是你想要的。相反，请执行以下操作：

```
INSERT INTO item VALUES (NULL, [title], [description], [date], [source], [link], [location_id]); 
```

将 [ 和 ] 中的项目替换为适当的值。

您被告知 Description 没有默认值，因为在未为该列指定值的 INSERT 语句中，没有数据库可以为该字段填写的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:47:56.860

```
Insert Into item (title, description, date, source, link, location_id) 
values ('Title', 'Description','1995-12-31T23:59:59Z','source','Link',1); 
```

每个插入都充当插入一条新记录。因此，您需要将所有数据组合到一个插入语句中，如上所述。

SQL 要求提供默认值，因为您`NOT NULL`在创建的表定义中提到了。

# email - 在 Magento 结账时禁用客户登录和注册

> ID：13681591
> 
> 赞同：2
> 
> 时间：2012-12-03T10:44:15.567
> 
> 标签：email, magento, login, registration, checkout

几天来，我一直在寻找一种方法来禁用当客户在 Magento 结账时完成订单时发生的自动客户注册。发生的情况是用户登录到他或她的帐户，并发送了两封电子邮件。一个包含订单确认，另一个包含作为客户的用户，包括他或她的帐户信息。

我想做的是禁用包含欢迎的电子邮件，并禁用帐户的注册/登录。

就像我说的那样，我一直在努力寻找一些线索来寻找几天的线索，但无济于事。如果有人可以帮助我找出要查看的文件以及这些文件的哪些部分，我将不胜感激。

另外，也许我应该提到该网站正在使用 One Step Checkout。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:53:42.120

根据您的系统设置，您需要对下面列出的两个文件之一进行更改。将模板复制到您的自定义主题文件夹并根据需要进行更改以删除登录部分和链接。

> /app/design/frontend/base/default/template/checkout/onepage/login.phtml /app/design/frontend/base/default/template/persistent/checkout/onepage/login.phtml

# android - 我的应用程序无法打开并强制关闭

> ID：13681593
> 
> 赞同：0
> 
> 时间：2012-12-03T10:44:19.123
> 
> 标签：android

我的应用程序一打开它就会关闭，这是我的第一个应用程序，我试图找到错误，但是自从启动这个应用程序以来我无法附加日志猫：

```
 12-03 16:04:54.040: W/dalvikvm(8798): threadid=1: thread exiting with uncaught exception (group=0x40018578)
          12-03 16:04:54.040: E/AndroidRuntime(8798): FATAL EXCEPTION: main
          12-03 16:04:54.040: E/AndroidRuntime(8798): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sditya.quadratic.equation/com.sditya.quadratic.equation.Quadratic}: java.lang.NullPointerException
          ...
          12-03 16:04:54.040: E/AndroidRuntime(8798): Caused by: java.lang.NullPointerException
          12-03 16:04:54.040: E/AndroidRuntime(8798):   at com.sditya.quadratic.equation.Quadratic.initialize(Quadratic.java:58) 
```

**初始化**方法：

```
private void initialize() { 
// TODO Auto-generated method stub
tr = (TextView) findViewById(R.id.tvResults); 
xs = (EditText) findViewById(R.id.editText1);
x = (EditText) findViewById(R.id.editText2); 
c = (EditText) findViewById(R.id.editText3); 
b.setOnClickListener(this); 
} 
```

* * *

**编辑：**已解决，我忘了给按钮“b”充气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:53:25.147

在您的`initialize`方法中，您需要在设置侦听器之前设置按钮变量。

```
private void initialize() { 
// TODO Auto-generated method stub
tr = (TextView) findViewById(R.id.tvResults); 
xs = (EditText) findViewById(R.id.editText1);
x = (EditText) findViewById(R.id.editText2); 
c = (EditText) findViewById(R.id.editText3); 

b = (Button) findViewById(R.id.button1); 
b.setOnClickListener(this); 
} 
```

# wysihtml5 - 如何在编辑器中禁用 wysihtml5 HTML Clean Up？

> ID：13681594
> 
> 赞同：9
> 
> 时间：2012-12-03T10:44:19.030
> 
> 标签：wysihtml5

如何在编辑器模式下禁用 HTML 清理？我需要在代码中允许 css 格式和内联 html。这个想法是在粘贴代码并进入编辑器进行编辑时禁用解析器和 html 清理操作。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-15T14:24:07.643

您可以在初始化 wysihtml5 编辑器时提供一个标识函数作为解析器属性。下面的脚本是一个完全禁用清理的咖啡脚本片段。

```
enableWysiwyg: ->
    @$el.find('textarea').wysihtml5
        "style": false
        "font-styles": false #Font styling, e.g. h1, h2, etc. Default true
        "emphasis": true #Italics, bold, etc. Default true
        "lists": false #(Un)ordered lists, e.g. Bullets, Numbers. Default true
        "html": true #Button which allows you to edit the generated HTML. Default false
        "link": false #Button to insert a link. Default true
        "image": false #Button to insert an image. Default true,
        "color": false #Button to change color of font
        parser: (html) -> html 
```

* * *

上述代码的 JavaScript 版本：

```
$('textarea').wysihtml5({
    "style": false,
    "font-styles": false,
    "emphasis": true,
    "lists": false,
    "html": true,
    "link": false,
    "image": false,
    "color": false,
    parser: function(html) {
        return html;
    }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-22T11:33:47.747

实际上，这就是解析器规则的用途。

您可以`var wysihtml5ParserRules`在实例化编辑器对象之前将自定义规则附加到包含的对象，或者只是创建自己的规则对象并提供给编辑器的构造函数。

例如，除了分布式简单示例规则中允许的标签之外，要允许 h1 和 h3 标签，您需要进行如下设置：

```
 <form>
    <div id="toolbar" style="display: none;">
      <a data-wysihtml5-command="bold" title="CTRL+B">bold</a> |
      <a data-wysihtml5-command="italic" title="CTRL+I">italic</a>
      <a data-wysihtml5-action="change_view">switch to html view</a>
    </div>
    <textarea id="textarea" placeholder="Enter text ..."></textarea>
    <br><input type="reset" value="Reset form!">
  </form>

  <!-- The distributed parser rules -->
  <script src="../parser_rules/simple.js"></script>
  <script src="../dist/wysihtml5-0.4.0pre.min.js"></script>
  <script>
    // attach some custom rules
    wysihtml5ParserRules.tags.h1 = {remove: 0};
    wysihtml5ParserRules.tags.h3 = {remove: 0};

    var editor = new wysihtml5.Editor("textarea", {
      toolbar:        "toolbar",
      parserRules:    wysihtml5ParserRules,
      useLineBreaks:  false
    });
  </script> 
```

现在，当您在编辑器模式下输入/粘贴`<title>test</title>`到编辑器时，然后切换到 html 视图，您将获得`&lt;title&gt;test&lt;/title&gt;`. 当你切换回编辑器视图时，你会`<title>test</title>`再次得到。

* * *

那是一般的部分。

现在，在您的情况下，我不确定使用 121 个自定义解析器规则（要处理的 HTML 标记的数量）是否是最好的主意，或者花时间深入研究源代码是否更好找到一个性能更高的解决方案（告诉解析器实际上只是返回输入字符串没有多大意义，对吧？）。*此外，您说您也希望允许 CSS。因此，您的自定义解析器规则甚至会扩展。*

无论如何，作为起点，请随意使用我的自定义解析器规则集：[https](https://github.com/eyecatchup/wysihtml5/blob/master/parser_rules/allow-all-html5.js) ://github.com/eyecatchup/wysihtml5/blob/master/parser_rules/allow-all-html5.js 。

# c# - 当按下左键的鼠标被拖出时，Mouse.DirectlyOver 工作不正确

> ID：13681597
> 
> 赞同：0
> 
> 时间：2012-12-03T10:44:24.303
> 
> 标签：c#, wpf, drag-and-drop, window

当鼠标被*快速*拖出窗口并**按下左键** `Mouse.DirectlyOver`时返回`System.Windows.Controls.Grid`而不是`null`.

`Window.IsMouseOver`返回`true`

`new Rect(window.RenderSize).Contains(Mouse.GetPosition(window))`返回`true`

要重现这一点，只需`MainWindow()`在一个空白 wpf 项目中添加检查计时器，如下所示：

```
 public MainWindow()
    {
        InitializeComponent();
        var timer = new System.Threading.Timer(state =>
            Dispatcher.BeginInvoke(new Action(
                () => Debug.WriteLine("Mouse.DirectlyOver = {0}", Mouse.DirectlyOver)
                )),null,0,10);
    } 
```

*当我慢慢*拖出来时，这些值是正确的。

有解决方法吗？确定鼠标退出应用程序的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:52:21.080

找到了解决方法。在每个滴答声中，我都使用 WinAPI 检索鼠标位置

```
 [DllImport("user32.dll")]
 [return: MarshalAs(UnmanagedType.Bool)]
 internal static extern bool GetCursorPos(ref Win32Point pt); 
```

然后手动在窗口边界内签入。

# visual-studio-2010 - Visual Studio 2010 MFC 构建脚本到底在哪里？

> ID：13681599
> 
> 赞同：1
> 
> 时间：2012-12-03T10:44:33.350
> 
> 标签：visual-studio-2010, mfc

有谁知道 Visual Studio 2010（具体来说是 Service Pack 1）构建脚本在哪里（我认为这些天它们是 .vcxprojs，但找不到这些 .mak 的）。

我迫切需要构建一组经过检测的发布模式 MFC DLL，它们使用与标准部件相同的耦合（即，这些需要是扩展 DLL - 只是将 MFC 源直接拉入项目不会破解它）。

任何指向构建脚本的帮助指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:51:10.183

我不明白你的需要。也许您只需要在静态库配置中使用 MFC？在项目设置中尝试“在静态库中使用 MFC”。

如果您正在编写一个 dll，也许这会有所帮助： [Regular DLLs Statically Linked to MFC](http://msdn.microsoft.com/en-us/library/f22wcbea%28v=vs.100%29.aspx)

# javascript - 如何在逻辑上划分TD cell

> ID：13681602
> 
> 赞同：0
> 
> 时间：2012-12-03T10:44:43.493
> 
> 标签：javascript, html, css, javascript-events

我有带有背景图像的 HTML 表格单元格 (TD)。单元格的左半边有一种背景颜色，右半边有另一种颜色。现在我想在逻辑上划分这个单元格；当我单击（或鼠标悬停）此单元格的左半部分以具有一种功能时，当单击（或鼠标悬停）同一单元格的右半部分以具有另一种功能时。如何实现对同一单元格的这种逻辑划分？我想避免在单元格内使用两个 DIV（或类似）元素，并且仅在现有的 TD 单元格元素上实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:48:45.933

您可以尝试使用图像映射（此处类似的 SO 问题[Using JQuery hover with HTML image map](https://stackoverflow.com/questions/745110/using-jquery-hover-with-html-image-map)），但在我看来，使用 2 个图像和 div 更容易。

# yii - 如何在 YII 上为用户登录添加更多错误代码？

> ID：13681607
> 
> 赞同：1
> 
> 时间：2012-12-03T10:45:09.517
> 
> 标签：yii

在 yii 我可以使用：

```
self::ERROR_USERNAME_INVALID; 
```

我想要另一个：

```
self::ERROR_USER_BANNED; 
```

那必须给出错误：

```
Sorry, but you cannot login because you account has been blocked. 
```

我该如何设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:49:48.243

将其直接添加到您的*protected/components/UserIdentity.php*：

```
class UserIdentity extends CUserIdentity {
    const ERROR_USER_BANNED = -1; // say -1 you have to give some int value

    public function authenticate() {
        // ... code ...
        if (/* condition to check for banning */) { // you might want to put this check right after any other username checks, and before password checks
            $this->errorCode=self::ERROR_USER_BANNED;
            $this->errorMessage='Sorry, but you cannot login because your account has been blocked.'
            return $this->errorCode;
        }
    }
} 
```

*LoginForm.php*模型的默认方式：

添加一个新的验证器规则，对您的`username`字段说：

```
public function rules() {
    return array(
        // ... other rules ...
        array('username','isBanned')
    );
}

// the isbanned validator
public function isBanned($attribute,$params) {
    if($this->_identity===null)
        $this->_identity=new UserIdentity($this->username,$this->password);

    if($this->_identity->authenticate() === UserIdentity::ERROR_USER_BANNED){
        $this->addError($attribute,$this->_identity->errorMessage);
} 
```

当然，您可以在 UserIdentity 中声明另一个函数来仅检查禁止，并从`isBanned`验证器调用该函数，而不是在`authenticate`函数中添加内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:46:54.400

在 UserIdentity.php 中添加以下内容

```
const ERROR_USER_BANNED = 12 ; #or whateve int value you prefer

public function getErrorMessageX() #or whatever method name
{
    switch ($this->errorCode)
    {
        case self::ERROR_USER_BANNED:
            return 'sorry, your account has been banned'; # custom error msg

        case self::ERROR_USERNAME_INVALID:
            return 'User does not exists';

        case self::ERROR_PASSWORD_INVALID:
            return 'Password does not match';

        case self::ERROR_ACCOUNT_NOT_CONFIRMED:           #this one is mine:)
            return 'This Account needs confirmation';
    }
} 
```

现在在 LoginForm.php

```
public function authenticate( )
{
    $this->_identity = new UserIdentity($this->username,$this->password);

    if( $this->_identity->authenticate() === FALSE )
        $this->addError('username', $this->_identity->errorMessageX); #here

            #some more code

    return !$this->_identity->errorCode;
} 
```

# exe - 我已经下载了一个 .exe 文件，但它在打开时很快关闭

> ID：13681609
> 
> 赞同：4
> 
> 时间：2012-12-03T10:45:15.460
> 
> 标签：exe

我正在尝试打开下载的 .exe 文件，但它一打开就关闭。有什么方法可以让我打开更长的时间来阅读内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T11:16:22.197

它可能是一个控制台应用程序而不是一个 GUI 应用程序。使用命令提示符运行 .exe。
请执行下列操作...

按住键盘上的 Windows 键，然后点击“R”。这将打开运行对话框。输入“cmd”（不带引号）。点击进入。（这适用于所有 Windows 版本 - 浏览开始菜单/屏幕在每个版本中都不同）

如果您将文件保存到 c:\downloads 并且名为 myFile.exe，请键入

```
C:
cd C:\Downloads
myFile.exe 
```

有些步骤有点多余——如果你知道你在命令提示符下做什么，然后根据需要跳过（但你可能不会发布这个问题）。即使您将文件保存到 D:\downloads，这也将起作用。

另一个示例 - 如果您将文件保存到 D:\folderA\Folder 并带有空格，并且该文件名为“我的带有空格的文件.exe”，然后键入

```
D:
cd "D:\folderA\Folder with a space"
"my file with a space.exe" 
```

如果出现问题（例如，它是 64 位可执行文件并且您使用的是 32 位 Windows），那么您可能会在命令行中收到更好的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:55:43.907

可执行文件无法运行的原因有很多。以下是一些检查问题所在的方法：

*   是你的.exe吗？你知道“正常”的行为吗？
*   当你手动下载它时，它的结果是一样的吗？
*   您是手动下载 .exe 还是通过您的应用程序下载？
*   您在 Windows 事件查看器中看到任何问题吗？
*   如果您尝试通过不同的浏览器（IE、FF、...）下载 .exe，结果是否相同？

欢迎了解更多详情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T17:48:34.490

nuget.exe 文件不是控制台 GUI 应用程序，而是控制台包。下载后，您需要将其放在“下载”文件夹之外的文件夹中。例如，C:\NuGet\nuget.exe - 然后将其设置为 PATH 变量，以便它可以从任何地方执行。

# json - 无法使用 $.getJSON 或 Ajax 调用从 Webmethod 接收 JSON

> ID：13681611
> 
> 赞同：0
> 
> 时间：2012-12-03T10:45:19.017
> 
> 标签：json, jquery, webforms

我有一些我想在客户端处理的 JSON 对象，但我指定的我的 WebMethod 不想触发。

这是我在客户端脚本中使用的 Ajax 和 GetJson 方法：GetSJON

```
$(document).ready(function() {
         $(document).ready(function() {
             //attach a jQuery live event to the button
             $('#getdata').live('click', function() {
             $.getJSON('/Members_Only/StockMovement/WebForm1.aspx/StockPlacementOptions', function(data) {
               //alert(data); //uncomment this for debug
              // alert(data.item1 + " " + data.item2 + " " + data.item3); //further debug
             $('#showdata').html("<p>item1=" + data.item1 + " item2=" + data.item2 + " item3=" + data.item3 + "</p>");
        });
    });
}); 
```

这里是阿贾克斯

```
$(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "/Members_Only/StockMovement/WebForm1.aspx/StockPlacementOptions",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: "{}",
            success: function (res) {
                $('#Results').append(CreateTableView(res)).fadeIn();
            }
        });
    }); 
```

这两种方法都调用 StockPlacementOptions 这是我的 WebMethod，看起来像这样：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json,
    UseHttpGet = true, XmlSerializeString = false)]
    public static List<StockReturnMethod> StockPlacementOptions()
    {
        scmEntitiesPrimaryCon entities = new scmEntitiesPrimaryCon();
        var binOptions = (from avail in entities.ProductAvailibleBins(1, 2)
                          select new StockReturnMethod() { LotID = (int)avail.LotID, LotName = avail.LotName, AreaID = (int)avail.AreaID, AreaName = avail.AreaName, BinID = (int)avail.BinID, BinName = avail.BinName }).ToList();

        return binOptions;
    } 
```

如果我可以让 JSON Web 方法在 $(document).ready 事件上触发，我将能够处理和使用那里的数据。我还尝试查看具有数据处理能力的不同 jQuery 库，例如[KnockoutJS ，但也没有运气。](http://knockoutjs.com/documentation/json-data.html)我在带有 Html5 标记的 Framework 4 上使用 ASP Webforms。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:56:35.000

`document.ready()`为什么在客户端使用两个处理程序 getJson 和 ajax

```
$(document).ready(function() { // <-------you can remove this handler

     $(document).ready(function() {
         $('#getdata').live('click', function() {
         $.getJSON('/Members_Only/StockMovement/WebForm1.aspx/StockPlacementOptions', function(data) {
           //alert(data); //uncomment this for debug
          // alert(data.item1 + " " + data.item2 + " " + data.item3); //further debug
         $('#showdata').html("<p>item1=" + data.item1 + " item2=" + data.item2 + " item3=" + data.item3 + "</p>");
         });
     });
});  // <-------you can remove this handler 
```

虽然我不确定这可能是问题，但如果这有帮助，请尝试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:21:21.383

我通过使用 KnockoutJS 和 ajax 的组合来修复它。

通过利用 knockoutJS 映射模型，我可以随意操作返回的 JSON :)

这是我的 Jquery，它执行映射并从服务器获取 JSON。

```
<script type="text/javascript">
//Declareing Viewmodel For KnockoutJS
    var viewModel;
    //Using Mapping Plugin for Knockout JS
    function bindModel(data) {
        viewModel = ko.mapping.fromJS(data);
        console.log(viewModel);
        ko.applyBindings(viewModel);
    }

    //Onload ObtainJSON
    $(document).ready(function () {
        $.ajax({
            url: "WebForm1.aspx/StockPlacementOptions",
            // Current Page, Method
            data: {},
            // parameter map as JSON
            type: "POST",
            // data has to be POSTed
            contentType: "application/json",
            // posting JSON content
            dataType: "JSON",
            // type of data is JSON (must be upper case!)
            timeout: 10000,
            // AJAX timeout
            success: function (result) {
                bindModel(result);
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });
    });

</script> 
```

我还稍微更改了 Webmethod 以获得我想要的结果：

```
[WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public static List<StockReturnMethod> StockPlacementOptions()
    {
        scmEntitiesPrimaryCon entities = new scmEntitiesPrimaryCon();

        var binOptions = (from avail in entities.ProductAvailibleBins(1, 2)
                          select new StockReturnMethod() { LotID = (int)avail.LotID, LotName = avail.LotName, AreaID = (int)avail.AreaID, AreaName = avail.AreaName, BinID = (int)avail.BinID, BinName = avail.BinName }).ToList();

        return binOptions;
    } 
```

就是这样：D

感谢所有的帮助

# ios - 如何在可见的滚动视图中获取按钮位置？

> ID：13681613
> 
> 赞同：0
> 
> 时间：2012-12-03T10:45:23.027
> 
> 标签：ios, ipad, uiscrollview

我有很多控件，`UIScrollView`包括几个按钮。例如，我在位置有一个按钮`(300,200`），我从那里弹出`UIPopOverController`来执行所需的任务，但是当我滚动滚动视图时，`popover`仍然从错误的位置弹出`(300,200)`！无论如何要在可见滚动视图中获取按钮位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:43:37.187

这就是我在知道按钮的初始位置的同时获得按钮的确切位置的方法`UIScrollView`。我只需要从按钮的 Y 坐标中减去当前的滚动视图偏移量！对我来说 X 坐标不会改变 - 因为不支持水平滚动。

```
 CGPoint point = CGPointMake(self.button.frame.origin.x, 
                 self.button.frame.origin.y - self.scrollView.contentOffset.y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:53:40.397

也许它在错误的位置弹出，因为它不是在 UIScrollView 中添加的，而是在其父视图中添加的。尝试在视图层次结构中检查按钮的位置。检索按钮位置的另一件事是进入视图层次结构并提取子视图数组，并在此处检查按钮的位置。看看这个链接[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW17](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW17)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:54:36.913

使用`UIView` `convertRect:toView:`或`convertRect:fromView:`方法。

# javascript - 如何将 a 限制为三行？

> ID：13681615
> 
> 赞同：12
> 
> 时间：2012-12-03T10:45:30.187
> 
> 标签：javascript, jquery, html, css, django

我想在我的所有表格行中实现统一的外观和感觉。当您查看下面的示例时，您会看到中间的注释超过 4 行，这不是那么漂亮。

![在此处输入图像描述](../Images/55fcd95600132ce4e37456bc68bdae95.png)

我希望将所有内容限制`<td>`为 3 行。

如果要显示的内容多于三行，那么它应该剪切内容`... [click for more]`并将内容放入[可折叠元素](http://twitter.github.com/bootstrap/javascript.html#collapse)中，以便单击它时会显示整个内容。

后者应该不是问题，但是如何将内容限制为三行？我应该计算角色来做出决定吗？有更好的策略吗？顺便说一句，我正在使用 Django，但我很乐意使用 javascript、jquery 或任何 css 魔法来解决这个问题。

**更新：**

接受的答案非常好。但是，它带有一个警告，这并不容易解决。如果你有一个`td`已经超过三行的邻居，而当前的 td 只有两行，我们将得到一个无限的 while 循环。

![在此处输入图像描述](../Images/996e9ad2327215148a9d08f542337b7b.png)

```
while($(this).innerHeight() / $(this).css('line-height').slice(0,-2) >= 3){ .. } 
```

由于`$(this).innerHeight()`相邻单元格将高度保持在较高位置，因此无法减小。我认为如果有可能获取当前 td 的 css 并将其完全复制到一个单独的字段中，相邻的 td 不会干扰，我们将获得最佳解决方案。

**更新 2：**

正如阿萨德所提到的，解决方案是在内容周围放置一个 div 包装器，`td`并将类设置在`div`内部`td`而不是`td`本身上。它完美无缺。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:49:04.730

假设您使用的是 jQuery，您可以使用以下命令找到`td`超过一定行数的所有元素：

```
$('td').filter(function(){
    return $(this).innerHeight() / $(this).css('line-height').slice(0,-2) > 3; //more than 3 lines
}); 
```

然后，您可以将可折叠元素应用于这些`td`元素。

这是一个演示（使用段落而不是`td`s）：http: [//jsfiddle.net/jM4ZY/1/](http://jsfiddle.net/jM4ZY/1/)

这是一个截断内容以适合 3 行，然后添加更多按钮的示例：http: [//jsfiddle.net/jM4ZY/2/](http://jsfiddle.net/jM4ZY/2/)

就编辑而言，这很容易通过为您的内容使用内部包装来解决；可能是一个`div`元素。然后，您可以测量此元素的高度，该高度与相邻单元格的高度无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:50:26.233

[此处](http://viralpatel.net/blogs/dynamically-shortened-text-show-more-link-jquery/)描述了另一种 jQuery 解决方案

描述了如何通过计算显示文本中的字母数来更改文本。如果您不确定字母的数量，或者想让它依赖于文本长度，您可以使用这个剪断来计算它

```
$.fn.textWidth = function(){
  var html_org = $(this).html();
  var html_calc = '<span>' + html_org + '</span>';
  $(this).html(html_calc);
  var width = $(this).find('span:first').width();
  $(this).html(html_org);
  return width;
}; 
```

我从[计算文本宽度中获取的](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)

# php - PHP OpenID 上的 HTTP 获取失败

> ID：13681621
> 
> 赞同：3
> 
> 时间：2012-12-03T10:46:01.593
> 
> 标签：php, openid

我已将 php v5 openid 库放入站点并运行 detect.php，但在“HTTP Fetching”上失败（在此消息末尾报告）。discovery.php 也失败了。该服务器在 HTTPS 上运行，并添加了所有需要的库，因此应该可以正常工作 - 就像它在我已经实现它的其他服务器上一样。

任何运行 consumer/try_auth.php 的尝试都会失败，并出现错误“不是有效的 OpenID”，这显然是由 http 获取失败引起的。

任何指针将不胜感激。

> **OpenID 库支持报告**
> 
> 此脚本检查您的 PHP 安装以确定您是否设置为使用 JanRain PHP OpenID 库。
> 
> **设置不完整**
> 
> 在准备好运行 OpenID 库之前，您的系统需要进行一些更改。
> 
> **数学支持**
> 
> 您的 PHP 安装支持 gmp。好的。
> 
> 加密质量随机源
> 
> 使用（不安全的）伪随机数源，因为 Auth_OpenID_RAND_SOURCE 已被定义为空。
> 
> **数据存储**
> 
> 在此 PHP 安装中未发现 SQL 数据库支持。如果您需要使用 SQL 数据库，请参阅 PHP 手册。该库支持 MySQL、PostgreSQL 和 SQLite 数据库引擎，以及基于文件系统的存储。此外，需要 PEAR DB 才能使用数据库。
> 
> 如果您使用的是基于文件系统的存储或 SQLite，请注意 open_basedir 有效。这意味着您的数据必须存储在以下位置之一：
> 
> '' 如果您使用的是文件系统存储，则您的数据目录必须可由 PHP 进程读写，并且不能在 Web 上使用。
> 
> **HTTP 获取**
> 
> 此 PHP 安装支持 libcurl。好的。
> 
> **获取网址失败！**
> 
> 您的 PHP 安装似乎支持 SSL，因此它将能够处理 HTTPS 身份 URL 和服务器 URL。
> 
> **XML 支持**
> 
> 使用 Auth_Yadis_dom 接口提供 XML 解析支持。
> 
> **查询损坏**
> 
> 您的 Web 服务器不会破坏查询。好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T10:50:25.970

抛出此错误是因为 curl_getinfo on 时 SSL 验证失败`Auth_Yadis_ParanoidHTTPFetcher`。要解决此问题，您应该通过添加此选项来禁用 SSL 验证：

```
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false); 
```

到`Auth/Yadis/ParanoidHTTPFetcher.php`第 93 行（在 之后`$c = curl_init();`）；

希望这有帮助。

# java - 当元素中仅包含部分字符串时如何从列表中获取索引？

> ID：13681625
> 
> 赞同：0
> 
> 时间：2012-12-03T10:46:20.983
> 
> 标签：java

说我有一个字符串

```
String s = bob 
```

和 ArrayList

```
["alex [available]", "bob [away]", "craig [busy]", "david [gone fishing]"] 
```

我将如何搜索列表以获取 [1] 处的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T10:47:38.267

```
String strToSearch = yourString + " [";//"bob ["

for (int i = 0; i < list.size(); i++){
    if (list.get(i).startsWith(strToSearch)){
         neededIndex = i;
         break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:47:52.387

您必须迭代列表并对`String.contains("bob")`每个项目执行一次。

```
for (String item : listOfItems) {
   if (item.contains("bob") {
      return item;
   }
} 
```

也许您应该将搜索词扩展为，`bob [`因为“bob”可能包含在另一个名称中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:49:29.723

您可能应该使用地图而不是列表。在这种情况下，您需要使用循环。

```
List<String> nameStatusList = ...
String s = "bob";

FOUND: {
    for(String ns: nameStatusList)
       if(ns.startsWith(s + " [")) {
           System.out.println(ns);
           break FOUND;
       }
    System.out.println("Couldn't find " + s);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:50:16.587

```
for (String str: list) {
   if (str.contains(s)) {
      return str;
   }
} 
```

换成以防万一`str.contains(s)`。`str.matches("^"+s+" [")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T10:57:21.550

像这样的东西：

```
String string = "bob";

private List <String> list = new ArrayList<String>(){{
    add("alex [available]");
    add("bob [away]");
    add("craig [busy]");
    add("david [gone fishing]");
}};

public void method(){
    String answer;

    for (String s : list){
        if (s.contains(string)){
            answer = s;
            break;
        }
    }
} 
```

# spring - 在上下文初始化期间访问 bean

> ID：13681629
> 
> 赞同：0
> 
> 时间：2012-12-03T10:46:39.073
> 
> 标签：spring

当 entityManagerFactory 初始化时，我想访问 Spring Applciation Context 。我们可以使用 ApplicationContextAware ，但是 entityManagerFactory 在我们的 ApplicationContextAware bean 初始化之前被实例化。分享是否有人做过这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:49:46.807

你可以继承 entitymanagerfactory 并给它一个带有 ApplicationContext 的构造函数，并将上下文连接到构造函数中。请注意，强烈建议不要在应用程序上下文仍在初始化时对其进行篡改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:53:20.150

配置要使用的 bean `ApplicationContextAware`，然后将`SessionFactory`bean 的`depends-on`属性设置为上下文感知 bean。这应该会导致 bean 在`sessionFactory`.

# .htaccess - 限制对 Facebook 的 OpenGraph 刮板的页面访问

> ID：13681632
> 
> 赞同：0
> 
> 时间：2012-12-03T10:46:46.610
> 
> 标签：.htaccess, facebook-like, facebook-opengraph

有什么方法可以限制对我们页面的访问，**只**允许 Facebook 的 OpenGraph 抓取系统？我们在一个页面上有多个喜欢（类似于 Digg），每个“喜欢”都需要自己的 OpenGraph 标签，我们通过页面等在单独的页面上拥有这些标签`story.php?1`。`?2`我们不希望用户能够查看`story.php`它们包含的所有内容og: 标签。

**编辑：**这似乎是我可以使用这篇文章中的信息做的事情：http: [//facebook.stackoverflow.com/questions/7197919/how-can-i-move-a-url-via-301-redirect-and -retain-the-pages-facebook-likes-and-o](http://facebook.stackoverflow.com/questions/7197919/how-can-i-move-a-url-via-301-redirect-and-retain-the-pages-facebook-likes-and-o)

如何从 HTTP 301 重定向中排除特定域。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:45:05.617

最后，我选择将其添加到 story.php PHP 代码中，它可以完美运行：

```
<?php

if ($_SERVER["HTTP_USER_AGENT"] != "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)") {
redirect('http://www.mywebsite.com', 302);
}
function redirect($url, $type=302) {
if ($type == 301) header("HTTP/1.1 301 Moved Permanently");
header("Location: $url");
die();
}

?> 
```

# python - Python：xdata 上有错误的最小二乘

> ID：13681635
> 
> 赞同：1
> 
> 时间：2012-12-03T10:46:51.903
> 
> 标签：python, scipy, least-squares

我通过对残差使用权重将错误包含在 ydata 上。如何在 xdata 上实现错误？我希望我不必切换拟合程序，因为我现在使用很棒的 lmfit 包。

[http://cars9.uchicago.edu/software/python/lmfit/](http://cars9.uchicago.edu/software/python/lmfit/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:40:17.843

听起来像正交距离回归： [http ://docs.scipy.org/doc/scipy/reference/odr.html](http://docs.scipy.org/doc/scipy/reference/odr.html)

# c - 多个 pthread 在同一个链表上工作，错过了列表的最后一个元素

> ID：13681637
> 
> 赞同：0
> 
> 时间：2012-12-03T10:46:52.607
> 
> 标签：c, unix, linked-list, pthreads, iteration

每个链表节点包含一个`value`必须处理的节点，以及一个`worker`包含要处理链表的线程的编号。应该在列表上工作的列表元素和线程的 Nr 是命令行参数（argv[1] 和 argv[2]）。但不知何故，在漏洞过程中，我的列表的最后一个节点没有得到评估/工作。我考虑的一个解决方法是在线程函数中使用 do{}while(); 结构以便对其进行评估，但它没有工作。

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <math.h>   

#define workTime 5
#define workersLimitNr 3

struct dataBlock{
    struct node *root;
    int listSize;
    int forIndex;
};

struct node { // std linked list node
    int value;
    int worker;
    struct node *next;
};

int slots = 0; // only 3 threads are allowed to access the list
int availableCheck(){   // check if thread can acces the list
    if(slots < 3) return 0;
    else return -1;
}

pthread_mutex_t mutp = PTHREAD_MUTEX_INITIALIZER;   //condvar mutex
pthread_cond_t  condvar = PTHREAD_COND_INITIALIZER;   //condvar

void * worker( void *data ){
    int j;
    struct dataBlock *inData = (struct dataBlock *) data;
    struct node *root = inData->root;
    int listSize =  inData->listSize;
    int forIndex = inData ->forIndex;
    free(data);
    printf( "*    Thread id: %lu    forID:  %d  workerNode: \n",pthread_self(),forIndex); 

    pthread_mutex_lock( &mutp );
    if(availableCheck() < 0){
        printf( " ^^^ List not available yet... \n" ); 
        pthread_cond_wait( &condvar, &mutp );
    } 
    struct node *it = root;

    printf( "_ _ _ _forID_ %d\n", forIndex );
    do{
        if(forIndex == it->worker){
            printf("valid for sqrt  forIndex %d == it->worker %d\n",forIndex, it->worker );
            if(it->value > 2){
                while(it->value != 1)
                it->value = sqrt(it->value);
                // it->value = it->value - 1;
            }
        }
        it = it->next;
        printf("->val: %d   \n", it->value);
    }while(it->next !=  NULL);

    pthread_cond_signal( &condvar ); // 
    pthread_mutex_unlock( &mutp ); 
    return NULL;
}

int main( int argc, char *argv[] ){
    if ( argc != 3 ){
        printf( "Programm must be called with \n NR of elements and NR of workers! \n " );
        exit( 1 );
    }

    int i;
    struct node *root;
    struct node *iterator;  

//prepare list for task
    int listSize = atoi(argv[1]);
    int nrWorkers = atoi(argv[2]);
    root = malloc(sizeof( struct node) );

    root->value = rand() % 100;
    root->worker = 0;
    iterator = root;

    for( i=1; i<listSize; i++ ){
        iterator->next = malloc(sizeof(struct node));
        iterator = iterator->next;
        iterator->value = rand() % 100;
        iterator->worker = i % nrWorkers;
        printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
    }
    printf("? List got populated\n");

// Create all threads to parse the link list
    int ret;    
    printf("workersInput: %d\n",nrWorkers);
    pthread_mutex_init(&mutp,NULL);

    pthread_t w_thread;
    pthread_t* w_threads = malloc(nrWorkers * sizeof(w_thread));

    for( i=0; i < nrWorkers; i++ ){         
        struct dataBlock *data = malloc(sizeof(struct dataBlock));
        data->root = root;
        data->listSize = listSize;
        data->forIndex = i;
        ret = pthread_create ( &w_threads[i], NULL, worker, (void *) data );
        if( ret ) {
            perror("Thread creation fail");
            exit(2);    
        }   
        printf("in for, ret= %d\n",ret);

    } 

    for ( i = 0; i < nrWorkers; i++){
        pthread_join(w_threads[i],NULL);
    }
    iterator = root;
    for ( i = 0; i < listSize; i++){
        printf("val: %d  worker: %d _  ", iterator->value, iterator->worker);
        iterator = iterator->next;
    }

    free(root);
    free(iterator);
    return 0;
} 
```

编辑 valgrind -v：

```
bogdan@bogdan-VirtualBox:~/dos/threads$ valgrind -v ./s 2 2
==7205== Memcheck, a memory error detector
==7205== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==7205== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==7205== Command: ./s 2 2
==7205== 
--7205-- Valgrind options:
--7205--    --suppressions=/usr/lib/valgrind/debian-libc6-dbg.supp
--7205--    -v
--7205-- Contents of /proc/version:
--7205--   Linux version 3.2.0-34-generic-pae (buildd@roseapple) (gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #53-Ubuntu SMP Thu Nov 15 11:11:12 UTC 2012
--7205-- Arch and hwcaps: X86, x86-sse1-sse2
--7205-- Page sizes: currently 4096, max supported 4096
--7205-- Valgrind library directory: /usr/lib/valgrind
--7205-- Reading syms from /lib/i386-linux-gnu/ld-2.15.so (0x4000000)
--7205--   Considering /lib/i386-linux-gnu/ld-2.15.so ..
--7205--   .. CRC mismatch (computed 405891ab wanted 9a1d2f37)
--7205--   Considering /usr/lib/debug/lib/i386-linux-gnu/ld-2.15.so ..
--7205--   .. CRC is valid
--7205-- Reading syms from /home/bogdan/dos/threads/s (0x8048000)
--7205-- Reading syms from /usr/lib/valgrind/memcheck-x86-linux (0x38000000)
--7205--   Considering /usr/lib/valgrind/memcheck-x86-linux ..
--7205--   .. CRC mismatch (computed 169814b3 wanted aeba1395)
--7205--    object doesn't have a symbol table
--7205--    object doesn't have a dynamic symbol table
--7205-- Reading suppressions file: /usr/lib/valgrind/debian-libc6-dbg.supp
--7205-- Reading suppressions file: /usr/lib/valgrind/default.supp
==7205== embedded gdbserver: reading from /tmp/vgdb-pipe-from-vgdb-to-7205-by-bogdan-on-???
==7205== embedded gdbserver: writing to   /tmp/vgdb-pipe-to-vgdb-from-7205-by-bogdan-on-???
==7205== embedded gdbserver: shared mem   /tmp/vgdb-pipe-shared-mem-vgdb-7205-by-bogdan-on-???
==7205== 
==7205== TO CONTROL THIS PROCESS USING vgdb (which you probably
==7205== don't want to do, unless you know exactly what you're doing,
==7205== or are doing some strange experiment):
==7205==   /usr/lib/valgrind/../../bin/vgdb --pid=7205 ...command...
==7205== 
==7205== TO DEBUG THIS PROCESS USING GDB: start GDB like this
==7205==   /path/to/gdb ./s
==7205== and then give GDB the following command
==7205==   target remote | /usr/lib/valgrind/../../bin/vgdb --pid=7205
==7205== --pid is optional if only one valgrind process is running
==7205== 
--7205-- REDIR: 0x40182d0 (strlen) redirected to 0x38056b04 (???)
--7205-- REDIR: 0x4018050 (index) redirected to 0x38056adf (???)
--7205-- Reading syms from /usr/lib/valgrind/vgpreload_core-x86-linux.so (0x4025000)
--7205--   Considering /usr/lib/valgrind/vgpreload_core-x86-linux.so ..
--7205--   .. CRC mismatch (computed 79fe1296 wanted 94e37e32)
--7205--    object doesn't have a symbol table
--7205-- Reading syms from /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so (0x4028000)
--7205--   Considering /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so ..
--7205--   .. CRC mismatch (computed 85cd0163 wanted d1841711)
--7205--    object doesn't have a symbol table
--7205-- Reading syms from /lib/i386-linux-gnu/libm-2.15.so (0x4047000)
--7205--   Considering /lib/i386-linux-gnu/libm-2.15.so ..
--7205--   .. CRC mismatch (computed 6ee9373d wanted 98815fe2)
--7205--   Considering /usr/lib/debug/lib/i386-linux-gnu/libm-2.15.so ..
--7205--   .. CRC is valid
--7205-- Reading syms from /lib/i386-linux-gnu/libpthread-2.15.so (0x4073000)
--7205--   Considering /lib/i386-linux-gnu/libpthread-2.15.so ..
--7205--   .. CRC mismatch (computed e3e38d22 wanted 86ccdb6e)
--7205--   Considering /usr/lib/debug/lib/i386-linux-gnu/libpthread-2.15.so ..
--7205--   .. CRC is valid
--7205-- Reading syms from /lib/i386-linux-gnu/libc-2.15.so (0x408e000)
--7205--   Considering /lib/i386-linux-gnu/libc-2.15.so ..
--7205--   .. CRC mismatch (computed 75ebd58c wanted bfe81264)
--7205--   Considering /usr/lib/debug/lib/i386-linux-gnu/libc-2.15.so ..
--7205--   .. CRC is valid
--7205-- REDIR: 0x410bf70 (strnlen) redirected to 0x40254a0 (_vgnU_ifunc_wrapper)
--7205-- REDIR: 0x410d4c0 (strncasecmp) redirected to 0x40254a0 (_vgnU_ifunc_wrapper)
--7205-- REDIR: 0x4124fb0 (strstr) redirected to 0x40254a0 (_vgnU_ifunc_wrapper)
--7205-- REDIR: 0x4124bf0 (__GI_strstr) redirected to 0x402f030 (strstr)
--7205-- REDIR: 0x410c110 (__GI_strrchr) redirected to 0x402c1b0 (__GI_strrchr)
--7205-- REDIR: 0x4107d70 (malloc) redirected to 0x402be00 (malloc)
--7205-- REDIR: 0x410e7e0 (strchrnul) redirected to 0x402ebe0 (strchrnul)
node #1 worker: 1  value: 86
--7205-- REDIR: 0x4108250 (free) redirected to 0x402b000 (free)
--7205-- REDIR: 0x410beb0 (__GI_strlen) redirected to 0x402c670 (__GI_strlen)
? List got populated
workersInput: 2
--7205-- REDIR: 0x4108d30 (calloc) redirected to 0x402a540 (calloc)
in for, ret= 0
*    Thread id: 82025280    forID:  0  workerNode: 
in for, ret= 0
*    Thread id: 90417984    forID:  1  workerNode: 
_ _ _ _forID_ 1
->val: 86   
valid for sqrt  forIndex 1 == it->worker 1
==7205== Thread 3:
==7205== Invalid read of size 4
==7205==    at 0x804892E: worker (in /home/bogdan/dos/threads/s)
==7205==    by 0x4079D4B: start_thread (pthread_create.c:308)
==7205==    by 0x417CD3D: clone (clone.S:130)
==7205==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==7205== 
==7205== 
==7205== Process terminating with default action of signal 11 (SIGSEGV)
==7205==  Access not within mapped region at address 0x0
==7205==    at 0x804892E: worker (in /home/bogdan/dos/threads/s)
==7205==    by 0x4079D4B: start_thread (pthread_create.c:308)
==7205==    by 0x417CD3D: clone (clone.S:130)
==7205==  If you believe this happened as a result of a stack
==7205==  overflow in your program's main thread (unlikely but
==7205==  possible), you can try to increase the size of the
==7205==  main thread stack using the --main-stacksize= flag.
==7205==  The main thread stack size used in this run was 8388608.
==7205== 
==7205== HEAP SUMMARY:
==7205==     in use at exit: 304 bytes in 5 blocks
==7205==   total heap usage: 7 allocs, 2 frees, 328 bytes allocated
==7205== 
==7205== Searching for pointers to 5 not-freed blocks
==7205== Checked 16,847,500 bytes
==7205== 
==7205== LEAK SUMMARY:
==7205==    definitely lost: 0 bytes in 0 blocks
==7205==    indirectly lost: 0 bytes in 0 blocks
==7205==      possibly lost: 272 bytes in 2 blocks
==7205==    still reachable: 32 bytes in 3 blocks
==7205==         suppressed: 0 bytes in 0 blocks
==7205== Rerun with --leak-check=full to see details of leaked memory
==7205== 
==7205== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
==7205== 
==7205== 1 errors in context 1 of 1:
==7205== Invalid read of size 4
==7205==    at 0x804892E: worker (in /home/bogdan/dos/threads/s)
==7205==    by 0x4079D4B: start_thread (pthread_create.c:308)
==7205==    by 0x417CD3D: clone (clone.S:130)
==7205==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==7205== 
==7205== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
Killed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:49:44.137

问题是您的工作线程循环的退出条件

```
while(it->next !=  NULL); 
```

当您即将处理最后一个列表项时将退出。如果您将其更改为

```
while(it !=  NULL); 
```

反而。

我认为列表的设置也可能存在错误。最后一个元素是否曾`next`初始化其成员？有很多方法可以解决这个问题，侵入性最小的方法是在列表设置`iterator->next`的`NULL`末尾设置：

```
for( i=1; i<listSize; i++ ){
    iterator->next = malloc(sizeof(struct node));
    iterator = iterator->next;
    iterator->value = rand() % 100;
    iterator->worker = i % nrWorkers;
    printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
}
iterator->next = NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T05:06:50.910

总是把有条件的等待放在一段时间（条件）。

当我这样做时，它对我来说很好。当然，我不得不强制转换所有 malloc 的返回值和其他小错误修复。

```
while(availableCheck() < 0)
{
   printf( " ^^^ List not available yet... \n" ); 
   pthread_cond_wait( &condvar, &mutp );
} 
```

# ios - 应用程序未通过使用 Testflight 运行

> ID：13681646
> 
> 赞同：0
> 
> 时间：2012-12-03T10:47:34.420
> 
> 标签：ios, ipa, testflight

我已经完成了应用程序并进行了测试。它在设备中以及在成功工作。然后，我成功创建了应用程序的“IPA”文件。然后通过 testflight 将其上传到云端。

但是，在设备中通过 testflight 安装应用程序时，它没有运行并且崩溃。是否有关于“部署目标”或其他任何问题？

告诉我是否有人知道。

提前致谢。

# jquery-mobile - jQueryMobile data-dismissible 1.2 版

> ID：13681654
> 
> 赞同：1
> 
> 时间：2012-12-03T10:48:23.183
> 
> 标签：jquery-mobile

jqm 的 data-dismissible 属性将在 1.3 版中发布，如此处[所述](https://github.com/jquery/jquery-mobile/issues/5299)，尽管它[已经实现](http://jquerymobile.com/test/docs/pages/popup/)。

问题是我现在需要在我的项目中拥有这个功能，所以有人可以解释一下我如何只包含这个属性支持吗？我是否仍然可以链接到 CDN 并以某种方式“添加”这段代码，或者他们除了下载整个“主”分支，然后从我的服务器链接文件之外别无他法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:29:01.847

这就是我最后的做法：

我发现[需要更改](https://github.com/jquery/jquery-mobile/commit/352fb0be7fa4573822bf8bcf36450a5fd2641539)的代码： ![在此处输入图像描述](../Images/684b5004c611227f8d3cd6b85b6fd72d.png)

所以，我从[jQuery CDN](http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js)下载了未压缩的版本，然后我编辑了如图所示的行，压缩了 js 文件并将其上传到我的站点。现在，我可以像这样使用弹出窗口：

```
<div data-role="popup" 
     id="popupLogin" 
     data-theme="a" 
     class="ui-corner-all" 
     data-dismissible="false"> 
```

皆大欢喜！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:53:57.533

我使用了 Nikola 的答案，但更改了 if 语句来检查数据的可忽略属性值：

```
 if ( this.element.data('dismissible') ) {
        this.close();
    } 
```

# android - Android 在片段内渲染谷歌地图

> ID：13681660
> 
> 赞同：1
> 
> 时间：2012-12-03T10:48:52.627
> 
> 标签：android, android-fragments, android-mapview

![在此处输入图像描述](../Images/bf25356bb2e50c03410d25538a4e8941.png)

如上所示，我有一个片段活动，它呈现两个片段。在地图片段上，我想实现并显示地图。

由于我们需要扩展 MapActivity，我不确定如何在片段中完成它。

**尝试从** （[https://stackoverflow.com/a/10739200/1737771](https://stackoverflow.com/a/10739200/1737771)）实施解决方案

```
package com.m7.nomad;

import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.view.Window;

public class MapsFragment extends SherlockFragment {
    private static final String KEY_STATE_BUNDLE = "localActivityManagerState";
    private LocalActivityManager mLocalActivityManager;

    protected LocalActivityManager getLocalActivityManager() {
        return mLocalActivityManager;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle state = null;
        if (savedInstanceState != null) {
            state = savedInstanceState.getBundle(KEY_STATE_BUNDLE);
        }

        mLocalActivityManager = new LocalActivityManager(getActivity(), true);
        mLocalActivityManager.dispatchCreate(state);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // This is where you specify you activity class
        Intent i = new Intent(getActivity(), GMapActivity.class);
        Window w = mLocalActivityManager.startActivity("tag", i);
        View currentView = w.getDecorView();
        currentView.setVisibility(View.VISIBLE);
        currentView.setFocusableInTouchMode(true);
        ((ViewGroup) currentView)
                .setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
        return currentView;

    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBundle(KEY_STATE_BUNDLE,
                mLocalActivityManager.saveInstanceState());
    }

    @Override
    public void onResume() {
        super.onResume();
        mLocalActivityManager.dispatchResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        mLocalActivityManager.dispatchPause(getActivity().isFinishing());
    }

    @Override
    public void onStop() {
        super.onStop();
        mLocalActivityManager.dispatchStop();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mLocalActivityManager.dispatchDestroy(getActivity().isFinishing());
    }

} 
```

我应该为附近指定什么

```
..............
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // This is where you specify you activity class
        Intent i = new Intent(getActivity(), GMapActivity.class);
        Window w = mLocalActivityManager.startActivity("tag", i);

.................. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:48:20.723

看看刚刚发布的新的[Google Maps Android API v2 。](https://developers.google.com/maps/documentation/android/)它包含对片段的支持（包括支持库）等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:06:18.127

[片段中的 MapView（Android 4.0 或更高版本）](https://stackoverflow.com/questions/9959072/mapview-in-fragment-ics)。你调查过这个吗？.. 这也可以帮助你.. [https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawkFragments](https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawkFragments)

# javascript - 如何设置全局变量以保持与多个 jQuery 对象相关的数据？

> ID：13681661
> 
> 赞同：0
> 
> 时间：2012-12-03T10:49:00.223
> 
> 标签：javascript, jquery, object, properties

我正在使用 jQuery 和 jQuery UI，而且我对 JavaScript 几乎是新手。我想在`window`对象中设置一个全局变量，以便保留与多个 jQuery 对象相关的自定义数据。也就是说，此时我正在使用以下（差）代码：

```
// Given
window.myDataObject = {};

// Then, in the same file, I run multiple times (one time for each 'tag_id_1', 
// 'tag_id_2', ..., 'tag_id_N') the following code
var tag      = $('#tag_id_N')
myDataObject = { pagination: { page : 1, per_page: 10 } } // This aims to keep pagination data for tags. 
```

由于我试图将数据保存*多个* `tag`s，因此多次运行上述代码会使 s`window.myDataObject`不断“重新初始化”（使保存过程效率低下）。因为那样，我想添加“命名空间”*属性*（也许，命名空间与每个`tag`对象相关的“某些东西”），`window.myDataObject`以便每个`tag`都有自己的分页数据。

我怎样才能做到这一点？这种方法是“好”/“正确”的继续方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:00:29.567

首先，您应该使用`window`对象 not `windows`。其次，如果您想使用多个标签，您可以尝试执行以下操作： // Given windows.taggedObjects = {};

```
// Then, in the same file, I run multiple times (one time for each 'tag_id_1', 
// 'tag_id_2', ..., 'tag_id_N') the following code
var tagId = 'tag_id_N';
// This aims to keep pagination data for tags.
window.taggedObjects[tagId] = { tag: $('#' + tagId), pagination: { page : 1, per_page: 10 } }; 
```

要检索您的数据，只需再次使用标签 ID，如下所示：

```
alert(window.taggedObjects[tagId]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:01:22.693

我认为您只是在寻找[`.data()`](http://api.jquery.com/data/)方法：

> 该`.data()`方法允许我们以一种安全的方式将任何类型的数据附加到 DOM 元素，从而避免循环引用，从而避免内存泄漏。
> 
> 我们可以为单个元素设置几个不同的值并稍后检索它们：

# django - 如何对 django 网站中的应用程序进行分类

> ID：13681663
> 
> 赞同：-1
> 
> 时间：2012-12-03T10:49:01.973
> 
> 标签：django

我想使用django框架创建一个网站，我不知道如何将网站分成几个应用程序......帮帮我。

提前，非常感谢，我是网络开发的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:56:26.623

Django 通过将 URL 模式与您在 views.py 中编写的一些代码进行匹配来工作。

在您的情况下，您将相同的模式 (^$) 指向两个视图方法。Django 将在找到匹配项时停止，因此当您切换模式时，它将始终匹配列表中的第一个条目。

如果您将模式更改为：

```
urlpatterns = patterns('',
        url(r'^/two$', 'myapp2.views.home2', name='home2'),
        url(r'^$', 'myapp1.views.home1', name='home1'), 
```

现在当你输入**htt://localhost:8000/**时会执行两个 home2，当你输入**http://localhost:8000/**时会执行 home1。

# c# - 使用 StopWatch 类进行性能测试的助手类

> ID：13681664
> 
> 赞同：8
> 
> 时间：2012-12-03T10:49:04.080
> 
> 标签：c#, .net, stopwatch

在此示例代码中，我使用一个简单的秒表来测试完成给定任务/操作所需的时间

```
StopWatch SW1 = new StopWatch();
SW1.Start();
SomeAction();
SW1.Stop();
sting results = SW1.Elapsed.ToString();
MessageBox.Show(resutls); 
```

我想要一个类，我将实例化以用于测试

```
public Class PerformanceTests
{
   public StopWatch SW1 = new StopWatch();
   public StopWatch SW2 = new StopWatch();
   public string results1 = "", results2 = "";
   ....
   ....
   //some other variables to use 
} 
```

虽然在实例化类并尝试使用时`SW1`并没有让我使用它的方法。我究竟做错了什么 ？

```
PerformanceTests Ptst = new PerformanceTests();
Ptst.SW1\. ... Start() is not accessible 
```

**更新**

对于其余的答案，不要复制我的代码，因为我想念大写`stopwatch`的。而不是实例化 Stopwatch 类，我不小心没有注意 Visual Studio 询问我是否想为我所谓的秒表而不是 .NET 的 real 创建一个类`Stopwatch`。

所以我的建议是，请注意 Visual Studio 智能感知的建议操作，即使它应该始终相同。只要确保您真正有经验并熟记所有课程即可。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-03T11:01:06.440

这是一个简单的类，它可以帮助您测量代码块执行的时间：

```
public class PerformanceTester : IDisposable
{
    private Stopwatch _stopwatch = new Stopwatch();
    private Action<TimeSpan> _callback;

    public PerformanceTester()
    {
        _stopwatch.Start();
    }

    public PerformanceTester(Action<TimeSpan> callback) : this()
    {
        _callback = callback;            
    }

    public static PerformanceTester Start(Action<TimeSpan> callback)
    {
        return new PerformanceTester(callback);
    }

    public void Dispose()
    {
        _stopwatch.Stop();
        if (_callback != null)
            _callback(Result);
    }

    public TimeSpan Result
    {
        get { return _stopwatch.Elapsed; }
    }
} 
```

用法（只需使用 of 包装代码块`PerformanceTester`）：

```
using (var tester = new PerformanceTester())
{
    // code to test
    MessageBox.Show(tester.Results.ToString());
} 
```

如果你在`using`block 之前声明了 tester 变量，那么当你退出 block 时秒表将自动停止`using`，并且结果将为你提供：

```
PerformanceTester tester;

using (tester = new PerformanceTester())    
    SomeAction();

MessageBox.Show(tester.Results.ToString()); 
```

如果将回调动作传递给`PerformanceTester`，则该动作将在`using`语句结束时调用，并且经过的时间将传递给回调：

```
using (PerformanceTester.Start(ts => MessageBox.Show(ts.ToString())))
     SomeAction(); 
```

您可以声明方法，它将接受`TimeSpan`并处理结果：

```
private void ProcessResult(TimeSpan span)
{
   // log, show, etc
   MessageBox.Show(span.ToString());
} 
```

用法变得非常干净：

```
using (PerformanceTester.Start(ProcessResult))
     SomeAction(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:00:46.643

使它们公开而不是私有：

```
 public class PerformanceTests
    {
        public StopWatch SW1 { get; set; }

        public StopWatch SW2 { get; set; }

        public string Results1 { get; set; }

        public string Results2 { get; set; }

        public PerformanceTests()
        {
            this.SW1 = new StopWatch();
            this.SW2 = new StopWatch();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:01:21.730

除非您使用自定义类 StopWatch 不是正确的类名，否则请尝试命名空间下的[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)`System.Diagnostics`

尝试：

```
public Class PerformanceTests
{
   public Stopwatch SW1 = new Stopwatch();
   public Stopwatch SW2 = new Stopwatch();
   public string results1 = "", results2 = "";
   ....
   ....
   //some other variables to use 
} 
```

# javascript - 我需要一个带有自定义错误消息的 jQuery 自定义验证器

> ID：13681668
> 
> 赞同：0
> 
> 时间：2012-12-03T10:49:11.253
> 
> 标签：javascript, jquery, asp.net-mvc, validation, unobtrusive-validation

我正在使用带有 MVC 3 和不显眼验证的 VS 2010。我正在尝试创建一个自定义范围验证器，以包括输入值可接受但意外的警告。`ignore`（我具有通过使用表单验证器的选项来提交带有衰减的值的工作功能）

不显眼的组件是：

```
// The adapter to support ASP.NET MVC unobtrusive validation // 
$.validator.unobtrusive.adapters.add('rangewithwarning', ['min', 'max', 'wmin', 'wmax', 'warning'],
function (options) {
    options.rules['rangewithwarning'] = {
        min: options.params.min,
        max: options.params.max,
        wmin: options.params.wmin,
        wmax: options.params.wmax,
        warning: options.params.warning
    };
    options.messages['rangewithwarning'] = options.message;
}); 
```

我对动态错误消息进行了广泛的搜索，这似乎归结为三种方法，但这些方法都不允许我显示可选的错误消息。这些都是：

1.  返回错误信息

    ```
    // The validator function
    $.validator.addMethod('rangewithwarning', function (value, element, params) {
    if (!value) {
        return true; // not testing 'is required' here!
    }
    var intValue = parseInt(value);
    // set logic here
    if (intValue >= params.wmin && intValue <= params.wmax) {
        // OK within both actual and range warning
        return true;
    }
    if (params.min <= intValue && intValue <= params.max) {
        //  outside warning but within allowed range - show warning
        return params.warning;
    }
    return $.validator.messages.rangewithwarning; 
    ```

    });

2.  使用 showErrors

    ```
    // The validator function
    $.validator.addMethod('rangewithwarning', function (value, element, params) {
    if (!value) {
        return true; // not testing 'is required' here!
    }
    var validator = this;
    var intValue = parseInt(value);
    // set logic here
    if (intValue >= params.wmin && intValue <= params.wmax) {
        // OK within both actual and range warning
        return true;
    }

    if (params.min <= intValue && intValue <= params.max) {
        //  outside warning but within allowed range - show warning
        var errors = new Object();
        errors[element.name] = params.warning;
        validator.showErrors(errors);            
    }

    return false;
    }); 
    ```

3.  `messager`从函数返回一个附加参数

这些都不起作用，尽管在逐步执行第二个时，可选消息被短暂显示然后被覆盖。

我显然遗漏了一些明显的东西，但看不到它是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:46:32.173

找到了一个使用标准范围属性的解决方案，然后使用我的新警告属性跟随它

```
(function ($) {

// The validator function
$.validator.addMethod('rangewarning', function (value, element, params) {
    var localElement = $(element);
    localElement.siblings("span").removeClass("warningOnlyDataOK")
    localElement.removeClass("warningOnlyDataOK")
    if (!value) {
        return true; // not testing 'is required' here!
    }
    var intValue = parseInt(value);
    // set logic here
    if (intValue >= params.wmin && intValue <= params.wmax) {
        // OK within both actual and range warning
        return true;
    }
    //  set display and ignore class items here etc
    localElement.siblings("span").addClass("warningOnlyDataOK")
    localElement.addClass("warningOnlyDataOK")
    return false;
});

// The adapter to support ASP.NET MVC unobtrusive validation // 
$.validator.unobtrusive.adapters.add('rangewarning', ['wmin', 'wmax'],
function (options) {
    options.rules['rangewarning'] = {
        wmin: options.params.wmin,
        wmax: options.params.wmax
    };
    options.messages['rangewarning'] = options.message;
});

} (jQuery)); 
```

该类`warningOnlyDataOK`用于显示不同样式的错误消息并在保存时忽略该验证。

# user-interface - 将插件 gui 附加到主机 gui

> ID：13681674
> 
> 赞同：2
> 
> 时间：2012-12-03T10:49:35.290
> 
> 标签：user-interface, plugins, window, shared

我正在编写一个支持插件的应用程序。我使用 C++ 和 JUCE 来做这些事情，我希望我的应用程序可以在 Windows 和 MAC OSX（也许有一天会在 linux 上）运行。

我的插件有自己的 GUI。从共享库显示 GUI 的常用方法似乎是：

1.  创建一个新窗口
2.  获取它的本机句柄
3.  把它传给图书馆
4.  让库将其 GUI 附加到该句柄。

始终需要为插件 GUI 创建一个新窗口的 AFAIK。我的问题是：我想让插件的 GUI 出现***在***我的主机应用程序的 GUI 内（= 不是作为单独的窗口）。

**我认为这是很常见的事情，但我找不到任何概念。你会如何解决这样的问题？**

非常感谢您的想法和提示！

# java - GWT：如何更改浏览器选项卡名称？

> ID：13681675
> 
> 赞同：6
> 
> 时间：2012-12-03T10:49:35.077
> 
> 标签：java, html, internet-explorer, gwt, browser

我知道要更改浏览器打开网站的选项卡的名称，我需要更改 html 文件中的标题标签。

但在 GWT 中，情况有点不同：每个新地点都使用相同的 html 文件，因此所有地点的浏览器选项卡名称都相同。

1.  如何为我的每个地点指定名称？
2.  上面的这个想法在 IE 9 中不起作用。在 IE 9 中，我看到 www.my-site.com/#my-place-name: 显示的浏览器选项卡的名称，而不是标题标记的内容。我怎样才能让它也适用于 IE？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:31:12.423

您可以使用以下代码更改页面的标题

```
Window.setTitle("My Place Name"); 
```

请注意，将其称为最新的地方将设置其标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T15:45:23.493

您可以通过调用 GWT 中的静态函数来更改页面标题（例如“选项卡名称”）：

```
import com.google.gwt.dom.client.Document;
...
public static void setBrowserWindowTitle (String newTitle) {
    if (Document.get() != null) {
        Document.get().setTitle (newTitle);
    }
} 
```

# c# - 在 XNA 中实现可缩放并显示当前位置的地图控件

> ID：13681676
> 
> 赞同：3
> 
> 时间：2012-12-03T10:49:40.197
> 
> 标签：c#, windows-phone-7, xna, geolocation, bing-maps

我想添加一个地图控件作为我的 XNA 游戏的一部分，它显示玩家的当前位置并通过 GeoCoordinateWatcher 类进行相应更新。到目前为止，我所做的只是显示来自 Bing REST api 的地图图像，但是要将纬度和经度转换为屏幕坐标，我需要知道最小和最大纬度和经度，我认为这是不可能的计算地图是否可缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:55:32.537

好的，经过大量搜索后，我设法找到了隐藏在 MSDN 中的[这个宝石。](http://code.msdn.microsoft.com/wpapps/Bing-Maps-for-Games-with-bedba16c)基本上，一小部分代码在 XNA 中实现了自己的平铺系统，并且具有将纬度/经度转换为屏幕 x/y 的有用方法。正是我需要的！

# c# - 消息框快捷方式

> ID：13681681
> 
> 赞同：4
> 
> 时间：2012-12-03T10:49:49.957
> 
> 标签：c#, winforms

是否可以以某种方式将热键绑定到消息框？想象一个场景，其中显示的是/否消息框。所以这个想法是，用户可以通过在键盘上点击“y”或“n”来选择是或否按钮。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:57:58.137

> 所以这个想法是，用户可以通过在键盘上点击“y”或“n”来选择是或否按钮

MessageBox 已经具有该功能。假设您的 MessageBox 定义为：

```
DialogResult dialogResult = MessageBox.Show("Are you sure ??", "Test Message Box", MessageBoxButtons.YesNo);
if (dialogResult == DialogResult.Yes)
{
    //Yes pressed
}
else if (dialogResult == DialogResult.No)
{
    //No pressed
} 
```

然后，如果您按`Y`，`N`您将获得适当的结果。检查以下屏幕截图 ![在此处输入图像描述](../Images/2a3397eab2ee57fe7316ab9840c3880a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:52:17.483

实现这一目标的最佳方法是创建自定义控件/消息框，您可以在其中设计窗口的行为并为其分配热键。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-03T10:59:25.610

制作一个自定义表单，在按钮上单击 do form.ShowDialog()

```
 if (e.KeyChar == Keys.Y)
        {
            button_yes.PerformClick();
        }
        else if(e.KeyChar == Keys.N)
        {
            button_no.PerformClick();
        } 
```

:)

# gwt - 在 gwt 中注入自定义 ConstraintValidator

> ID：13681684
> 
> 赞同：1
> 
> 时间：2012-12-03T10:49:58.853
> 
> 标签：gwt, bean-validation

我正在尝试为 gwt 编写自定义 ConstraintValidator 并将接口的实现注入其中。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:25:10.490

这是我的解决方案。

事实证明，您不能将 gin 托管类注入到生成的类中。

我解决它的方法是使用以下链接中的信息：

[https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/rN476RgdGAM](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/rN476RgdGAM)

并且必须从 gwt 编写/扩展 ValidatorGenerator。

一点点工作

```
<generate-with
    class=".... CustomValidatorGenerator">
    <any>
        <when-type-assignable class="javax.validation.Validator" />
        <when-type-assignable
            class="com.google.gwt.validation.client.impl.GwtSpecificValidator" />
    </any>
</generate-with> 
```

# ios - 在 HTML5 phonegap IOS 应用程序中创建滚动 Div - 没有高度

> ID：13681690
> 
> 赞同：3
> 
> 时间：2012-12-03T10:50:19.620
> 
> 标签：ios, css, html, cordova

是否可以在高度需要动态的 html5 IOS 应用程序中创建滚动 div？

为我的头痛提供一些背景知识 - 我们的应用程序有 3 个主面板 - 用户可以向左或向右滑动以显示包含通知/设置的第一个和第三个面板（如在 Facebook 应用程序中。所有 3 个外部面板都是固定位置.

主面板包含 6 个页面 - 它们都是绝对定位的 div，它们通过菜单选择隐藏和显示。每个显示的 div（或页面）都需要滚动，但所有内容都是动态的 - 所以我不能设置高度。

我找到了几种固定高度的解决方案——但到目前为止还没有找到动态高度的解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T11:14:08.363

**滚动 div**

iOS 5+ 的另一个新特性是 div 终于可以滚动了。要使 div 滚动，您只需添加以下内容（此示例具有固定的标题，但调整位置以适合您的应用程序）：

```
.scrollable {
position: absolute;
top: 50px;
left: 0;
right: 0;
bottom: 0;
overflow: scroll;
-webkit-overflow-scrolling: touch;
} 
```

这里的技巧是将 -webkit-overflow-scrolling 添加到您通常设置溢出的任何位置。Apple 实施的缺点是，当您已经处于绝对顶部或底部时，div 不会像您希望的那样反弹。它不会反弹正在滚动的 div，而是反弹整个页面并显示浏览器 chrome。这是您需要 javascript 修复的地方。

请尝试此[示例](http://joehewitt.github.com/scrollability/)以了解可滚动性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:36:10.113

请看[这个链接](http://cubiq.org/dropbox/iscroll4/examples/simple/)

[iScroll](http://cubiq.org/iscroll-4)是一个派对库，有助于良好的滚动。

它具有滚动而不提供高度。我们只需要在添加滚动的dom元素时调用一个方法refresh。

# android - 可以通过robotium在测试用例中打开/关闭wifi吗

> ID：13681695
> 
> 赞同：7
> 
> 时间：2012-12-03T10:50:41.133
> 
> 标签：android, robotium

我们可以在机器人测试用例中打开/关闭设备的 wi-fi 吗？因为我正在测试一个需要在初始阶段打开 wifi 然后关闭 wi-fi 并继续测试的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-14T09:38:14.410

是的，您可以这样做，请参见示例：

> 公共无效 testNoNetworkConnection() 抛出异常 {
> 
> ```
>  setWifiEnabled(false);
> 
>     // do stuff solo.something
> 
>    setWifiEnabled(true);
> 
> }
> 
> private void setWifiEnabled(boolean state) {
>     WifiManager wifiManager = (WifiManager)solo.getCurrentActivity().getSystemService(Context.WIFI_SERVICE);
>     wifiManager.setWifiEnabled(state);
> } 
> ```

请记住在您的清单文件中添加权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

**编辑：**使用新的 Robotium 5.3.1，您可以使用**setWiFiData(Boolean turnOn)**打开或关闭 wifi（请参阅[文档](http://robotium.googlecode.com/svn/doc/index.html)）

享受

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:36:04.873

您可以使用 Testdroid 提供的 ExtSolo。库可以在[https://github.com/bitbar/robotium-extensions](https://github.com/bitbar/robotium-extensions)和所需方法的 api 上找到：打开 wifi。如果您不想使用额外的库，可以使用如下代码：

```
protected void turnWifi(boolean enabled) {
    try {
        WifiManager wifiManager = (WifiManager) getInstrumentation()
                .getTargetContext().getSystemService(Context.WIFI_SERVICE);
        wifiManager.setWifiEnabled(enabled);
    } catch (Exception ignored) {
        // don't interrupt test execution, if there
        // is no permission for that action
    }
} 
```

您需要在应用程序中获得权限才能更改 Wifi 的状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T03:45:37.560

因为，您将测试您知道应用程序行为（wifi 开启和 wifi 关闭时）的应用程序，您可以相应地模拟数据。**模拟**数据将使应用程序在特定情况下按预期运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:35:09.153

没有一种简单的方法可以做到这一点，这与我说这是不可能的不同，但可能足以阻止你这样做。

如果您的应用程序具有正确的权限，那么您实际上可以从您的 robotsium 脚本打开或关闭 wifi，就像任何应用程序一样。但请记住，权限需要在您的应用程序清单中，而不是您的测试 apk 清单中。

如果您的应用程序没有正确的权限（并且您不愿意更改它），还有另一种方法，但需要做很多工作（努力获得我使用的开源解决方案）。创建一个具有服务权限的应用程序，在您的测试中绑定到该服务并要求该服务关闭 wifi。

# jsf - 值和绑定之间的区别

> ID：13681697
> 
> 赞同：28
> 
> 时间：2012-12-03T10:50:49.613
> 
> 标签：jsf

使用 JavaServer Faces 的 value 和 binding 有什么区别，什么时候使用一个而不是另一个？为了更清楚我的问题是什么，这里给出了几个简单的例子。

通常在 XHTML 代码中使用 JSF，您将使用“值”，如下所示：

```
<h:form> 
  <h:inputText value="#{hello.inputText}"/>
  <h:commandButton value="Click Me!" action="#{hello.action}"/>
  <h:outputText value="#{hello.outputText}"/>
</h:form> 
```

那么bean是：

```
// Imports
@ManagedBean(name="hello")
@RequestScoped
public class Hello implements Serializable {

private String inputText;
private String outputText;

public void setInputText(String inputText) {
    this.inputText = inputText;
}

public String getInputText() {
    return inputText;
}

// Other getters and setters etc.

// Other methods etc.

public String action() {

    // Do other things

    return "success";
}
} 
```

但是，当使用“绑定”时，XHTML 代码是：

```
<h:form> 
  <h:inputText binding="#{backing_hello.inputText}"/>
  <h:commandButton value="Click Me!" action="#{backing_hello.action}"/>
  <h:outputText value="Hello!" binding="#{backing_hello.outputText}"/>
</h:form> 
```

而对应的 bean 被称为 backing bean，在这里：

```
// Imports
@ManagedBean(name="backing_hello")
@RequestScoped
public class Hello implements Serializable {

private HtmlInputText inputText;
private HtmlOutputText outputText;

public void setInputText(HtmlInputText inputText) {
    this.inputText = inputText;
}

public HtmlInputText getInputText() {
    return inputText;
}

// Other getters and setters etc.

// Other methods etc.

public String action() {

    // Do other things

    return "success";
}
} 
```

这两个系统之间有什么实际区别，什么时候使用 backing bean 而不是常规 bean？可以同时使用吗？

我对此感到困惑已有一段时间了，如果能解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-03T11:50:01.260

`value`属性表示**组件的值**。它是您在浏览器中打开页面时在**文本**框中看到的文本。

`binding`属性用于将您的**组件**绑定到 bean 属性。对于您的代码中的示例，您的`inputText`组件像这样绑定到 bean。

```
#{backing_hello.inputText}` 
```

这意味着您可以在代码中作为对象访问**整个**组件及其所有属性。`UIComponent`您可以对组件进行大量工作，因为现在它可以在您的 java 代码中使用。例如，您可以像这样更改其样式。

```
public HtmlInputText getInputText() {
    inputText.setStyle("color:red");
    return inputText;
} 
```

或者只是根据 bean 属性禁用组件

```
if(someBoolean) {
  inputText.setDisabled(true);
} 
```

等等....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T11:49:19.793

有时我们并不真的需要将 UIComponent 的值应用于 bean 属性。例如，您可能需要访问 UIComponent 并使用它而不将其值应用于模型属性。在这种情况下，最好使用 backing bean 而不是普通 bean。另一方面，在某些情况下，我们可能需要使用 UIComponent 的值而不需要对它们进行任何编程访问。在这种情况下，你可以只用普通的豆子。

因此，规则是仅当您需要对视图中声明的组件进行编程访问时才使用支持 bean。在其他情况下，使用常规 bean。

# javascript - 在文本缩短/延长时展开/折叠表格行

> ID：13681698
> 
> 赞同：0
> 
> 时间：2012-12-03T10:51:00.540
> 
> 标签：javascript

例如，我有一个表中的 3 行。每一行都从数据库中获取其内容。默认情况下，当行折叠时，文本应缩短 -

```
trs[i].innerText = trs[i].innerText.substring(0,25) + '...'; 
```

当用户单击 div 时，它会展开，如果再次单击，则会折叠。

```
if(tr.style.height == "150px")
        {
             tr.style.height = "20px";
        }
    else {
        tr.style.height = "150px";
    } 
```

到目前为止，一切都很好，但我希望只有在 div 折叠时才能缩短文本。使用我的解决方案，当页面加载时，文本会缩短，但当行展开时，它会保持缩短。我怎样才能解决这个问题？我只能想到行扩展以调用返回原始数据的 AJAX 函数时，但我认为这不是最好的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:02:00.493

首先，您必须在缩短之前存储全文。

```
trs[i].fullText = trs[i].innerText;
trs[i].innerText = trs[i].innerText.substring(0,25) + '...'; 
```

然后你可以在处理程序中恢复它：

```
tr.innerText = tr.fullText;
tr.style.height = "150px"; 
```

这是一个[jsFiddle](http://jsfiddle.net/XKyah/)。我正在使用 jQuery 来选择元素，但无论如何你已经有了正确的 tr。如果您使用的是 jQuery，您还可以使用`$(tr).data("fullText", $(tr).text())`它来避免一些轻微的内存泄漏，并在旧版本的 Internet Explorer 中向 DOM 元素添加属性。

# classloader - Weblogic 11 G：更改默认类加载

> ID：13681700
> 
> 赞同：0
> 
> 时间：2012-12-03T10:51:13.453
> 
> 标签：classloader, weblogic11g

我有一个关于 Weblogic server 11 G 类加载基础结构的查询。

假设我在服务器启动期间在类路径中加载了两个名为**A.jar**和**B.jar的应用程序 jar。**

默认情况下，这两个 jar 都包含类**LoadMe.class**和服务器从 jar **A.jar加载****LoadMe.class**。

 **现在我想改变上述默认行为，并希望从**B.jar**而不是**A.jar**加载该类。

我怎样才能做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:11:19.190

每当您`LoadMe`第一次使用类时，ClassLoader 将尝试使用 CLASSPATH 解决依赖关系。

现在，如果您必须从 B.jar 加载该类，那么您必须首先在 CLASSPATH 中明确放置该 jar 的路径，然后将 A.jar 放置在第二个。所以 ClassLoader 将首先从 B.jar 中选择类。

[尝试此链接以获取有关 ClassLoaders 的更多信息](http://zeroturnaround.com/labs/reloading-objects-classes-classloaders/)

阅读this并更改类路径，问题应该得到解决

[在 WebLogic 11G 中设置类路径](https://forums.oracle.com/forums/thread.jspa?threadID=1032064)

**更新**：

```
System.out.println("Classpath dependency for LoadClass: ");
URLClassLoader classLoader = (URLClassLoader)LoadMe.class.getClassLoader();
System.out.println(Arrays.toString(classLoader.getURLs()));

System.out.println("Classpath dependency for Context: ");
URLClassLoader classLoader1 = (URLClassLoader)Thread.currentThread().getContextClassLoader());
System.out.println(Arrays.toString(classLoader.getURLs())); 
```**

# javascript - Javascript：获取前一周的周一和周日

> ID：13681702
> 
> 赞同：12
> 
> 时间：2012-12-03T10:51:16.027
> 
> 标签：javascript

我正在使用以下脚本来获取前一周的星期一（第一）和星期日（最后）：

```
var curr = new Date; // get current date
var first = curr.getDate() - curr.getDay() - 6; // Gets day of the month (e.g. 21) - the day of the week (e.g. wednesday = 3) = Sunday (18th) - 6
var last = first + 6; // last day is the first day + 6
var startDate = new Date(curr.setDate(first));
var endDate = new Date(curr.setDate(last)); 
```

如果上周一和周日也在同一个月，这很好用，但我今天才注意到，如果今天是 12 月而上周一是 11 月，它就行不通了。

我是个 JS 新手，还有其他方法可以获取这些日期吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-03T11:13:23.290

您可以通过获取本周的星期一并减去 7 天来获取上一个星期一。星期天将是前一天，所以：

```
var d = new Date();

// set to Monday of this week
d.setDate(d.getDate() - (d.getDay() + 6) % 7);

// set to previous Monday
d.setDate(d.getDate() - 7);

// create new date of day before
var sunday = new Date(d.getFullYear(), d.getMonth(), d.getDate() - 1); 
```

对于 2012-12-03，我得到：

```
Mon 26 Nov 2012
Sun 25 Nov 2012 
```

那是你要的吗？

```
// Or new date for the following Sunday
var sunday = new Date(d.getFullYear(), d.getMonth(), d.getDate() + 6); 
```

这使

```
Sun 02 Dec 2012 
```

通常，您可以通过加减年、月和日来操作日期对象。该对象将自动处理负值，例如

```
var d = new Date(2012,11,0) 
```

将为 2012-11-30 创建一个日期（注意月份是从零开始的，因此 11 是 12 月）。还：

```
d.setMonth(d.getMonth() - 1); // 2012-10-30

d.setDate(d.getDate() - 30);  // 2012-09-30 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T11:19:06.300

如果您不想使用外部库来执行此操作，则应该使用时间戳。我创建了一个解决方案，您将从当前日期减去 60*60*24*7*1000（即 604800000，即 1 周，以毫秒为单位）并从那里开始：

```
var beforeOneWeek = new Date(new Date().getTime() - 60 * 60 * 24 * 7 * 1000)
  , day = beforeOneWeek.getDay()
  , diffToMonday = beforeOneWeek.getDate() - day + (day === 0 ? -6 : 1)
  , lastMonday = new Date(beforeOneWeek.setDate(diffToMonday))
  , lastSunday = new Date(beforeOneWeek.setDate(diffToMonday + 6)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T11:01:09.467

你可以使用像 moment.js 这样的库。见`subtract`方法[http://momentjs.com/docs/#/manipulating/subtract/](http://momentjs.com/docs/#/manipulating/subtract/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-12T10:45:26.693

一些答案提到了时刻，但没有人写过这个简单的方法：

```
moment().day(-13) // Monday last week
moment().day(-7) // Sunday last week 
```

`.day`设置一个工作日，所以今天是什么日子并不重要，只有星期很重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-29T06:03:21.623

这是查找任何一周中的任何一天的一般解决方案。

```
function getParticularDayTimestamp(lastWeekDay) {
  var currentWeekMonday = new Date().getDate() - new Date().getDay() + 1;
  return new Date().setDate(currentWeekMonday - lastWeekDay);
}

console.log(getParticularDayTimestamp(7)) // for last week monday
console.log(getParticularDayTimestamp(1)) // for last week sunday
console.log(getParticularDayTimestamp(14)) // for last to last week monday
console.log(getParticularDayTimestamp(8)) // for last to last week sunday 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-21T22:53:05.657

使用 Moment，您可以执行以下操作

```
 var lastWeek          = moment().isoWeek(moment().subtract(1,'w').week());
  var mondayDifference  = lastWeek.dayOfYear() - lastWeek.weekday() + 1;
  var sundayDifference  = mondayDifference - 1;

  var lastMonday        = moment().dayOfYear(mondayDifference);
  var lastSunday        = moment().dayOfYear(sundayDifference  ); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-21T16:39:19.140

就这么简单。

```
var today = new Date();
var sunday = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate() - this.today.getDay()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-05T09:10:33.817

在这里，您有一个多功能功能：

```
 function getThe(numOfWeeks, weekday, tense, fromDate) { 
 // for instance: var lastMonday = getThe(1,"Monday","before",new Date()) 
      var targetWeekday = -1;  
      var dateAdjustment = clone(fromDate);  
      var result = clone(fromDate);

      switch (weekday) {
        case "Monday": targetWeekday = 8; break;
        case "Tuesday": targetWeekday = 2; break;
        case "Wednesday": targetWeekday = 3; break;
        case "Thursday": targetWeekday = 4; break;
        case "Friday": targetWeekday = 5; break;
        case "Saturday": targetWeekday = 6; break;
        case "Sunday": targetWeekday = 7;
      }

      var adjustment = 7 * (numOfWeeks - 1);
      if (tense == "after") adjustment = -7 * numOfWeeks;

      dateAdjustment.setDate(fromDate.getDate() - targetWeekday);
      var weekday = dateAdjustment.getDay();

      result.setDate(fromDate.getDate() - weekday - adjustment);
      result.setHours(0,0,0,0);
      return result;
  } 
```

您可以在下一篇文章中找到“clone(obj)”函数：[https ://stackoverflow.com/a/728694/6751764](https://stackoverflow.com/a/728694/6751764)

# jquery - jQuery.text 正确用法

> ID：13681703
> 
> 赞同：0
> 
> 时间：2012-12-03T10:51:20.393
> 
> 标签：jquery

这将是一些简单的事情，但是使用下面的代码，我收到了输出“VOID”的警报，但是我的第二行 jQuery 并没有导致任何事情发生。根据 ID 中的某些文本执行操作的正确语法是什么？

HTML：

```
<span id="door1status">VOID</span> 
```

jQuery：

```
alert ($('#door1status').text());

if ($('#door1status').text() == 'VOID') { // do something
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:55:44.820

您正在正确使用它。

该`.text()`方法将元素的纯文本内容作为字符串返回。

你的代码工作正常。

[您可以在 is fiddle](http://jsfiddle.net/9GB46/)检查相同的内容。

由于这不是问题，因此可能的问题可能是：

1.  页面上有多个具有`#door1status`id 的元素

2.  未加载 jQuery。（因为 alert 是纯 ol' JS 但 .text() 不是）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:58:09.007

您没有在第二行代码中添加任何要发生的事情，至少要发出一些警告

```
if ($('#door1status').text() == 'VOID') { 
    alert("TEXT"+$('#door1status').text());
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:55:05.643

您拥有的代码应该可以正常工作，请检查[此小提琴](http://jsfiddle.net/TAYjt/)以查看它是否正常工作。

确保在您拥有的 HTML 代码中，页面中只有 1 个带有`id`of 的元素`door1status`。重复`id`的属性是无效的，会导致这样的问题。

# java - 未知大小的多维数组

> ID：13681704
> 
> 赞同：0
> 
> 时间：2012-12-03T10:51:23.037
> 
> 标签：kryonet, java, arrays, kryonet

我需要创建一个大小未定义的数组，其中包含用户信息。

例如：

```
user[0]["name"] = "Patrick"; 
```

但是，标准的 java 数组似乎需要一个已知的长度，我不知道。

我可以使用什么替代方案？（我也很乐意看到一些编码示例）我正在使用 TCP 框架（[kryonet](/questions/tagged/kryonet "显示标记为“kryonet”的问题")），它不允许使用构造函数传递对象。因此，据我所知，制作用户对象是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:53:35.520

首先，您应该使用 Objects 而不是任意数据结构，如果您不知道大小，我会使用 List

```
List<Person> people = new ArrayList<Person>();
people.add(new Person("Patrick")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:53:04.760

在java中，我们只能对单元格索引使用整数值。

我猜您正在寻找地图列表：

```
List<Map<String, String>> persons = new ArrayList<Map<String, String>>();

// add Patrick
Map<String, String> person = new HashMap<String, String>();
person.put("name", "Patrick");
person.put("age", "23");
persons.add(person);

// add Sue
person = new HashMap<String, String>();
person.put("name", "Sue");
person.put("age", "21");
persons.add(person); 
```

要访问所有名称，例如：

```
for (Map<String, String> person:persons) {
  System.out.println(person.get("name"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:56:36.760

您应该考虑创建一个类（如 Person）并仅使用 List 来管理它。你可以这样做：

```
List<Peson> myLyst = new ArrayList<Person>();
Person person = new Person("Patrick");
myList.add(0, person); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:53:28.867

你不能在java中使用关联数组。换句话说，您不能使用“名称”作为键。

但是您可以通过执行以下操作创建空数组而不指定大小：

```
String[] array = new String[]{}; 
```

但是，尝试将某些内容放入此数组中会给您一个 indexoutofbound 异常

# scala - 获取对受监督嵌套演员的参考

> ID：13681707
> 
> 赞同：1
> 
> 时间：2012-12-03T10:51:29.660
> 
> 标签：scala, akka, actor

我有一个设置，其中一个演员（A）创建一个演员（B），它监督并在崩溃时重新启动。从演员系统之外，我想从“嵌套”演员 B 中获得一些价值。

我可以使用以下方法直接向 actorSystem 询问嵌套的演员：

`val nestedActorB = myActorSystem.actorFor("/user/A/B")`

我可以保留对这个演员的引用，还是应该在每次我想向嵌套的演员询问某些事情时向 actorSystem 询问参考。（或者我应该向父演员询问裁判）？

在这种情况下，最佳实践是什么？（scala 2.9.1 和 akka 2.0.4）

谢谢，阿尔伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:49:58.630

是的，您可以保留对演员的引用，而不是每次都使用`actorFor`.

本地和远程演员之间存在差异，您所指的文档段落模棱两可，我已经打开了[一张票](https://www.assembla.com/spaces/akka/tickets/2764)。

本地actor在调用过程中只被查找一次，`actorFor`所以在你查找它之前它需要存在，而发送到远程actor总是通过路径并且每次都在远程节点上查找远程actor。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:39:40.130

即使在重新启动后，参考也保持不变。`B`将永远是一个孩子，`A`所以`"/A/B"`路径是稳定的。如果`A`是顶级演员，你总会在下面找到他`"/user/A"`。所以，是的，`"/user/A/B"`总是指向同一个演员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:32:12.697

正如您[在 akka 文档](http://doc.akka.io/docs/akka/snapshot/general/addressing.html)中看到的那样，引用是一个对象，在运行时，每次您发送消息或检查您所引用的演员的活跃度时，它都会遍历演员树。

这意味着您可以在任何时候想要与该actor通信时使用通过actorFor方法获得的引用，即使属于该路径的actor重新启动或者即使它已经终止。

# ios - 能够在越狱的 iOS 上运行未签名的应用程序

> ID：13681708
> 
> 赞同：3
> 
> 时间：2012-12-03T10:51:29.793
> 
> 标签：ios, code-signing, jailbreak

我正在使用 Xcode 4.3（由 JailCoder 更改）为越狱的 iOS 设备开发应用程序，在 iPod Touch 4G 上进行测试，目前运行 iOS 5.1.1，以前是 5.0.1。我最近注意到我可以在我的 iPod 上运行我的应用程序，而无需使用任何一个`ldid`或一个自签名证书`codesign`来绕过代码签名要求（如[http://www.saurik.com/id/8](http://www.saurik.com/id/8)所述）。我*没有*`security.mac.proc_enforce`禁用或安全`security.mac.vnode_enforce`检查。

那么为什么我可以在我的 iPod 上运行未签名的代码呢？当我从 5.0.1 升级到 5.1.1 时，这似乎没有改变。如果未使用自签名证书进行签名，我的 beta 测试人员无法在他们的 5.1.1 系统上运行我的应用程序。我的系统有什么不同？会不会是我们用来越狱设备的不同方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:57:47.757

要在 iDevice 上运行未签名的代码，它需要[越狱](http://jailbrea.kr/)。要轻松安装您的自定义应用程序并从 Xcode 调试它（或将其提供给其他人），最简单的方法是打包 IPA 并通过 iTunes 同步它。但是，它需要 AppSync（遗憾的是，主要用于盗版）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:07:56.910

The iOS 5.1.1 jailbreak didn't patch the code signing need to run executables. AFAIK no one apparently cared enough to do so, which means many discomfort for those who build *on* iOS some software as ./configure scripts obviously doesn't work. If an executable is not codesigned (or fake-codesigned), it will receive a SIGKILL.

# knockout.js - jqx 网格和剔除计算列

> ID：13681709
> 
> 赞同：2
> 
> 时间：2012-12-03T10:51:35.267
> 
> 标签：knockout.js, jqxgrid, computed-observable

我想要一个带有计算列的简单 jqxGrid。看起来一切正常，但它不起作用。简单的例子：

```
<script type="text/javascript">
$(document).ready(function () {
    var vm = {
        date: ko.observable(new Date()),
        items: ko.observableArray(),
        load: function () {
            for (var i = 0; i < 10; i++) {
                var item = {
                    x: ko.observable(i),
                    y: ko.observable(i + 1)
                };
                item.sum = ko.computed(function() { return this.x() + this.y(); }, item);
                this.items.push(item);
            }
        }
    };
    ko.applyBindings(vm);
});
</script>

<input data-bind="click: load, jqxButton: {theme: 'metro'}" type="button" value="Load" />
<div data-bind="jqxGrid: {source: items, disabled: false, autoheight: true,
                editable: true,
                selectionmode: 'singlecell',
                theme: 'metro',
                columns: [
                { text: 'X', dataField: 'x' },
                { text: 'Y', dataField: 'y' },
                { text: 'Sum', dataField: 'sum'}
                ]}" id="jqxgrid">
</div>
<table style="margin-top: 20px;">
<tbody data-bind="foreach: items">
    <tr>
        <td data-bind="text: x"></td>
        <td data-bind="text: y"></td>
        <td data-bind="text: sum"></td>
    </tr>
</tbody>
</table> 
```

这种情况正在发生：我能够更新 x 或 y，并且在下表中看到了新值，但 Sum 字段在第一次加载后永远不会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:58:47.263

Your .sum property is a computed value, but jqxgrid has no idea about computes or other observable values. Therefore, it has no idea that it needs to update.

You could trigger an update yourself by subscribing to the computed and calling .updatebounddata on the grid:

```
vm.sum.subscribe(function() {
    $('#idOfYourGridHere').trigger( 'updatebounddata' );
} 
```

I see you're using a custom knockout binding called jqxgrid. If you like, you could probably modify that binding so that it updates properly.

# java - 在 Java 的 While 循环之外传递一个结果集

> ID：13681712
> 
> 赞同：0
> 
> 时间：2012-12-03T10:51:55.123
> 
> 标签：java, sql, resultset

你好朋友我有这个从数据库中获取值的类：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.mail.Message;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
public class EmailAlerts {

    public static void main(String[] args) {
SMTPAuthenticator sm = new SMTPAuthenticator();//new class
        Connection conn = null;
        String AtmName = "";
        String AtmBal = "";
        String atmsend = "";
        String[] bals = null;
 try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            conn = DriverManager.getConnection("jdbc:oracle:thin:@192.168.1.80:1521:dev9i", "BI", "bi");
            Statement st1 = conn.createStatement();
            String atms = "select CLR_BAL_AMT, FORACID, ACCT_NAME from gam "
                    + "where BACID = 'ATM' and CLR_BAL_AMT < 100000";
            ResultSet rs1 = st1.executeQuery(atms);
            while (rs1.next()) {
                AtmName = rs1.getString("ACCT_NAME");
                AtmBal = rs1.getString("CLR_BAL_AMT");
                bals = AtmBal.split("\n");
                for (int j = 0; j < bals.length; j++) {
                    atmsend = AtmName + "-" + AtmBal;
                    //System.out.println(atmsend);
                }

            }
            System.out.println(atmsend);
}catch(Exception ad){
System.out.println(ad);
}

}
} 
```

当我尝试在 While 循环外打印出变量“atmsend”时，它只给出数据库中的最后一个值，但在 for 循环内，数据库中的所有记录都在那里。如何在 While 循环之外拥有数据库中的所有记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:00:00.430

如果要将`atmsend`数据库中的所有值放入变量中，请更改以下代码：

`atmsend = AtmName + "-" + AtmBal;`

对此，虽然不推荐：

`atmsend += AtmName + "-" + AtmBal + "\n";`

您可以`ArrayList<String>`在迭代它们时使用并添加其中的所有值，而不是使用`String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:55:33.607

```
atmsend = atmsend + AtmName + "-" + AtmBal +"\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:00:26.883

```
ArrayList <String> atmsend= new ArrayList<>();

Use Arraylist

 while (rs1.next()) {
                AtmName = rs1.getString("ACCT_NAME");
                AtmBal = rs1.getString("CLR_BAL_AMT");
                bals = AtmBal.split("\n");
                for (int j = 0; j < bals.length; j++) {
                    atmsend.add(AtmName + "-" + AtmBal+"\n");
                    //System.out.println(atmsend);
                }

System.out.println(atmsend.toString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:03:34.763

将 atmsend 声明为字符串数组

```
 String[] atmsend = null; 
```

现在，当您将值存储在 while 循环中时，请使用

```
atmsend[i] = AtmName + "-" + AtmBal; 
```

检索字符串结果

```
for(int i=0;i<atmsend.length();i++)
{
SYstem.out.println(atmsend[i]);
} 
```

# android - Phonegap android应用程序div bg图像

> ID：13681713
> 
> 赞同：0
> 
> 时间：2012-12-03T10:51:57.463
> 
> 标签：android, html, cordova, jquery-mobile

我对 android 应用程序非常陌生，我使用 Phonegap 制作了一个简单的 android 应用程序。

我创建了一些页面并正确链接，它工作正常，我想像在许多应用程序中一样添加页面转换。

请帮助我如何添加这些转换。即当用户单击链接时，此页面将向左滑动并必须显示即将到来的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:14:28.150

采用

```
$.mobile.changePage('#pageid', {
                    transition : "none",
                    reverse : true,
                    changeHash : true
                }); 
```

更改页面。在此处定义所需的过渡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:57:53.760

我认为您可以使用任何 jQuery 幻灯片过渡，或者最好的方法是使用**MobileJquery 框架**

在其中您将有很多自定义选项。点击这里了解更多详情[www.jquerymobile.com](http://www.jquerymobile.com)

# c# - 如何使用 Mono.Cecil 务实地更改 dll 的程序集名称？

> ID：13681714
> 
> 赞同：2
> 
> 时间：2012-12-03T10:51:59.587
> 
> 标签：c#, .net, mono.cecil

我是 Cecil 类库的新手。发现文档不适用于 cecil。我现在需要更改给定的 dll 的程序集`CashCountingLibrary.dll`名称`LibCashCounter.dll`

我怎样才能使用 cecil 做到这一点？

注意：我需要务实而不是设计

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-29T09:38:00.887

这是你需要的吗？

```
var assm = AssemblyDefinition.ReadAssembly("assemblyPath");
assm.Name = new AssemblyNameDefinition("newName", Version.Parse("1.0.0.0"));
assm.Write("newNameAssemblyPath"); 
```

# glsl - GLSL改变纹理的像素颜色

> ID：13681715
> 
> 赞同：2
> 
> 时间：2012-12-03T10:52:02.170
> 
> 标签：glsl, textures, shader, pixel

我想更改已附加到着色器的纹理上的单个像素。必须有一个简单的功能。

tex2D(sampler,uv) 用于读取并返回像素颜色。我需要一个函数来操纵像素颜色并将其写回到纹理上。这应该不难，但我找不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:51:41.947

> 这不应该那么困难

是的，应该是。

任意写入纹理并不是一件微不足道或简单的事情。信息在 OpenGL 中以非常特定的方向流动：进入着色器。着色器允许的唯一输出（通常）是实际的着色器输出变量。例如，这就是您写入帧缓冲区的方式。顶点/几何着色器输出也可以用于变换反馈缓冲区。

现在，如果您有 GL 4.x 级硬件，您*可以使用*[ARB_shader_image_load_store](http://www.opengl.org/registry/specs/ARB/shader_image_load_store.txt)（这是 GL 4.2 中的核心）写入图像。但是，在您打开它的那一刻，您[将*全权负责*同步对内存的访问](http://www.opengl.org/wiki/Memory_Model#Incoherent_memory_access)。

# c++ - 递增数组指针

> ID：13681719
> 
> 赞同：0
> 
> 时间：2012-12-03T10:52:21.990
> 
> 标签：c++

是否可以增加传递给函数的数组？

我有一个一维数组 a[4] = {10,20,30,40}，我想调用一个函数并递增数组以指向第三个元素并从 main() 打印它。

例如：

```
int main()
{
  int a[4] = {10,20,30,40};
  cout << *a; // 10
  increment(); // function call
  cout << *a; // 40
} 
```

我们怎样才能做到这一点？如果数组作为指针传递，则只有对存储在数组中的值的修改会得到反映。如果我们必须在函数中递增数组，函数的原型是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:57:16.823

替代建议是：

```
#include <iostream>

void foo(int *&p) // <-- take pointer by reference...
{
  ++p;
  ++p;
}

int main(void)
{
  int a[] = {1,2,3,4};

  int*p = a;

  std::cout << *p << std::endl;

  foo(p);

  std::cout << *p << std::endl;

} 
```

使用第二个指针访问原始数组并在函数中修改它...

进一步的替代方法是使用其中之一`std::vector<int>`，`std::array<int, 4>`然后将迭代器传递给函数（并让它返回一个迭代器）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:54:51.583

不适用于您当前的语法。但是，您可以从 中返回新指针`increment()`，并将其存储在另一个变量中。

```
int main()
{
  int a[4] = {10,20,30,40};
  cout << *a;
  int* new_a = increment(a)
  cout << *new_a;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:58:56.873

您可以通过这种方式在指针位置访问：

```
int main() {
  int a[4] = {10,20,30,40};
  cout << *a;        print ---> 10 
  cout << *(a + 3);  print ---> 40
} 
```

你不能做你想做的事而不丢失信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:05:40.583

程序中的指针 a 在编译时（或链接时间取决于您的想法）指向程序的数据空间。

如果你有类似的东西

```
void function(int* &x) {
  x+=2;
}

int main() {
  int *a = new int(4);
  int *b = a;
  a[0] = 10; a[1] = 20; a[2] = 30; a[3] = 40;
  cout << *a;
  function(b);
  cout << *b;
  delete a;
} 
```

GNU G++ 将检查并且不允许您移动指针变量 a，因为没有更多指针将引用此内存块的头部。哈哈

# android - 具有四个 Listview 的 Android 线性布局不在 Scrollview 内滚动

> ID：13681720
> 
> 赞同：1
> 
> 时间：2012-12-03T10:52:28.350
> 
> 标签：android, scrollview, android-linearlayout

我正在使用`LinearLayout`垂直方向，并且在该布局内我有四个`ListView`. 这个布局我已经放在里面了`ScrollView`。

我的问题是`ScrollView`不滚动。所以我无法看到我的所有列表视图。

我正在做的是：

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ScrollView1"
android:layout_width="wrap_content"
android:layout_height="600dp"
android:fillViewport="true" >

             <LinearLayout
                 android:id="@+id/frag_capt2"
                 android:layout_width="800dp"
                 android:layout_height="match_parent"
                 android:layout_marginLeft="100dp"
                 android:layout_marginTop="20dp"
                 android:orientation="vertical" >

                 <TextView
                     android:id="@+id/linearlayoutteamtv1"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:text="Medium Text"
                     android:textAppearance="?android:attr/textAppearanceMedium"
                     android:textColor="#000000" />

                 <ListView
                     android:id="@+id/ListView01team"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:background="@drawable/pm_cool_listproject_background" >

                 </ListView>

                 <TextView
                     android:id="@+id/linearlayoutteamtv2"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:text="Medium Text"
                     android:textAppearance="?android:attr/textAppearanceMedium"
                     android:textColor="#000000" />

                 <ListView
                     android:id="@+id/ListView02team"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:background="@drawable/pm_cool_listproject_background" >

                 </ListView>

                  <TextView
                     android:id="@+id/linearlayoutteamtv3"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:text="Medium Text"
                     android:textAppearance="?android:attr/textAppearanceMedium"
                     android:textColor="#000000" />

                 <ListView
                     android:id="@+id/ListView03team"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:background="@drawable/pm_cool_listproject_background" >

                 </ListView>

                  <TextView
                     android:id="@+id/linearlayoutteamtv4"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:text="Medium Text"
                     android:textAppearance="?android:attr/textAppearanceMedium"
                     android:textColor="#000000" />

                 <ListView
                     android:id="@+id/ListView04team"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="10dp"
                     android:background="@drawable/pm_cool_listproject_background" >

                 </ListView>

             </LinearLayout>
</ScrollView> 
```

我不明白我的代码缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:56:06.653

A**不**`listview`应该在任何滚动元素内，反之亦然。请看看谷歌开发人员对此有何评论。请查看此[视频](https://www.youtube.com/watch?v=wDBM6wVEO70)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:47:17.147

你可以设置所有四个列表视图的高度......就像......

```
 <ListView
            android:id="@+id/lst_tree_hazard"
            android:layout_width="fill_parent"
            android:layout_height="80dp"       ///set the height based on your listview content
            android:scrollbars="none" >
 </ListView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:54:33.693

你不需要一个`ScrollView`for a `ListView`。我认为您可以轻松使用`RelativeLayout`并指定`ListViews`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:00:35.013

通常，您不能将可滚动的东西放在其他可滚动的东西中，它们在同一方向滚动，并且结果可靠。有时这有效（例如，`WebViews`在 a 中`ViewPager`），但这是例外，而不是常态。

任何一个：

移出`ListView`,`ScrollView`或

将 ScrollView 的所有其余内容移动到 ListView 中，无论是使用诸如`addHeaderView()`MergeAdapter之类的[东西](https://github.com/commonsguy/cwac-merge)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T08:13:30.687

你不能那样做！但是，您的问题有解决方案，**单个列表中的多种类型的列表项**。单一类型列表项的区别：

*   定义列表项类型，即。`(header, list1_type, list2_type,... main_header?, main_footer?)`, 覆盖[`getViewTypeCount()`](http://developer.android.com/reference/android/widget/BaseAdapter.html#getViewTypeCount())
*   覆盖[`getItemViewType(...)`](http://developer.android.com/reference/android/widget/BaseAdapter.html#getItemViewType(int))，
    *   `is index_of_header -> 0`
    *   `is index_of_type1 -> 1`
    *   `is index_of_type2 -> 2`
*   更复杂[`getView(...)`](http://developer.android.com/reference/android/widget/Adapter.html#getView(int,%20android.view.View,%20android.view.ViewGroup))
    *   获取项目视图类型，*提示：使用已经创建的函数*
    *   根据类型调度视图创建，不要忘记，该`convertView`参数是当前项目类型的视图，如果不为空，您**应该重用它**！

如另一个答案中所述，您可以创建自己的抽象类来合并适配器。这基本上就是我上面解释的。有时你就是不能使用合并适配器，即。递归结构，但考虑使用[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html).**

# java - java中的字符串操作

> ID：13681723
> 
> 赞同：-4
> 
> 时间：2012-12-03T10:52:40.733
> 
> 标签：java, string

我有一个这样的查询：

```
"select * from aaa where id < 10 and name = 'test'" 
```

从这个查询中，我想找出`where`（在这种情况下为 2）之后的条件数。

`<`我也想知道重复了多少次`=`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:14:44.430

你可以简单地计算所有的 > 和 = 一个循环

```
bool whereCondition = false;
int counterCompare = 0;
int counterConditions = 0;
// select is your SQL String
for(int i = 0;i<select.length;++i)
{
   if(whereCondition){
       if(select.charAt(i) = '<' || select.charAt(i) = '>') {
          ++counterCompare;
       }
       if(select.charAt(i) = '=' && !(select.charAt(i+1) = '<' || select.charAt(i+1) = '>')) {
          ++counterCompare;
       }
       if (select.charAt(i) = 'A') {
         if(i+2 < select.length) {
            if(select.charAt(i+1) = 'N' &&
               select.charAt(i+2) = 'D')
                  ++counterCondition;
         }
      }
      if (select.charAt(i) = 'O') {
         if(i+4 < select.length) {
            if(select.charAt(i+1) = 'R' &&
               select.charAt(i+2) = 'D' &&
               select.charAt(i+3) = 'E' &&
               select.charAt(i+4) = 'R' &&)
                  whereCondition = false;
         }
      }
   }
   else {
      if (select.charAt(i) = 'W') {
          if(i+4 < select.length) {
             if(select.charAt(i+1) = 'H' &&
                select.charAt(i+2) = 'E' &&
                select.charAt(i+3) = 'R' &&
                select.charAt(i+4) = 'E' &&)
                   whereCondition = true;
          }
      }
   }
} 
```

我不保证此代码有效。您还必须处理基于 order 或 And compare 的 where 条件。所以你需要检查，如果你找到一个 And ，如果它不是你在表中比较的字符串。您还必须检查您的字母是小字母还是大字母。但这只是一个基本的比较

# c# - 如何访问列表中的特定列表？

> ID：13681734
> 
> 赞同：1
> 
> 时间：2012-12-03T10:53:16.637
> 
> 标签：c#, list, sublist

我有一个`List<List<string>>`信息；里面有 3 个其他列表。我需要能够对这些子列表中的每一个做三件单独的事情。我如何访问每个子列表？

为了更清楚起见，列表被添加到主列表中，如下所示

```
infomration.Add(sublist1);//where each sublist is a List<string> and information is a <List<List<string>>
infomration.Add(sublist2);
infomration.Add(sublist3);
reutrn information; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:58:00.740

您希望对列表中的 3 个元素（列表）执行 3 个单独的操作。既然`Lists`被索引了，为什么不直接以这种方式访问​​它们呢？

```
PerformOperationOne(myListofLists[0]);
PerformOperationTwo(myListofLists[1]);
PerformOperationThree(myListofLists[2]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:00:14.987

您可以使用`Enumerable.ElementAt`（或列表的简单索引器）：

```
List<string> first = lists.ElementAt(0);
List<string> second = lists.ElementAt(1);
List<string> third = lists.ElementAt(2);

doSomethingWith(first);
doSomethingWith(second);
doSomethingWith(third); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:56:54.507

```
 List<List<string>> lists = new List<List<string>>();
    lists.ForEach(i =>
    {
        i.Count();//do something
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:57:16.637

如果您需要单独访问每个列表，则可能应该使用 a `Dictionary<string,List<string>>`，但由于您需要对每个列表执行不同的操作，因此最好使用三个单独的列表，而不是将它们全部放入一个组合结构中。

这将允许您通过一个键访问每个列表。

```
var aList = myDictionary["the wanted list key"]; 
```

但是，如果您知道内部列表的索引，则可以通过索引访问它们：

```
var anInnerList = listOfLists[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T11:27:28.833

对集合中的所有列表执行相同的操作

```
foreach(List<string> list in information) {
    DoSomething(list);
} 
```

但是，如果您需要对每个项目执行不同的操作，您可以按照以前的解决方案指定一个索引 - 或者，对于额外的功能，您可以将它放在一个开关中以对每个实体执行多个不同的操作。

```
int counter = 0;
foreach(List<string> list in information) {
    switch(counter) {
        case 0:
            // First action
            list = DoSomething(list);
            break;
        case 1:
            // Second action
            list = DoSomethingElse(list);
            break;
        case 2:
            // Third action
            list = DoSomethingWeird(list);
            list = DoAnotherThing(list);
            break;
        default:
            // Do something if there's more than 3 items in the list
            SendErrorReport();
            break;
    }
    counter++;
} 
```

# excel - 根据单元格值格式化所选列是奇数还是偶数

> ID：13681738
> 
> 赞同：1
> 
> 时间：2012-12-03T10:53:26.640
> 
> 标签：excel, conditional-formatting, vba

我有一张有几列的表格。A 列由数字组成。如果 A 列中的单元格值是偶数（或奇数），我想突出显示该行中的几个单元格，而不是整行。

到目前为止，使用条件格式，我已经能够为我想要突出显示的每一列添加格式规则。因此，例如，如果我想要突出显示 A、B 和 E 列，我使用三个规则：

```
Formula: =ISEVEN(A1) - Highlight Format - Sheet!$A$1:$A100
Formula: =ISEVEN(A1) - Highlight Format - Sheet!$B$1:$B100
Formula: =ISEVEN(A1) - Highlight Format - Sheet!$E$1:$E100 
```

...等所有其他列。

但这很麻烦，我不知道如何制定一个规则来一次覆盖所有内容，或者即使有可能。我猜 VBA 可能是解决方案，但我在那里有点菜鸟。

关于如何攻击它的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:04:11.423

您应该只在公式中修复您的参考列（在这种情况下，A 变为 $A）。它适用的范围也可以全部放在相同的规则中：

```
Formula: =ISEVEN($A1) - Highlight Format - Sheet!$A$1:$B100;Sheet!$E$1:$E100 
```

所以不需要VBA！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:57:19.433

:) 你根本不需要出那么多汗。我不确定你`Highlight Format`的目的是什么。您可以将偶数、奇数添加到条件格式窗口/向导文本框中，然后相应地选择格式颜色。

试试这个：

甚至：

```
=MOD(A1,2)=0 
```

对于奇数：

```
=MOD(A1,2)>0 
```

*   查看以下文章以获得有关[Excel 条件格式的更好帮助](http://www.xldynamic.com/source/xld.CF.html#rows)

*   另一篇文章[10 种使用 Excel 条件格式的酷方法](http://www.techrepublic.com/blog/10things/10-cool-ways-to-use-excels-conditional-formatting-feature/3166)

# java - Android OpenGL ES 2.0 动态壁纸 - GLSurface 方法未调用

> ID：13681745
> 
> 赞同：0
> 
> 时间：2012-12-03T10:53:41.153
> 
> 标签：java, android, opengl-es

我遵循下一个教程（它的第一部分），但类结构稍微简单
[http://www.learnopengles.com/how-to-use-opengl-es-2-in-an-android-live-wallpaper/](http://www.learnopengles.com/how-to-use-opengl-es-2-in-an-android-live-wallpaper/)

当我尝试选择壁纸时，我得到了下一个事件链（预览）

**onCreateEngine()->onCreate() -> onResume()->onPause()->onResume()->onPause()**
为什么我要**onResume()->onPause()**两次？

当我点击“设置壁纸”时，我得到额外的**onPause()->onResume()**并且动态壁纸崩溃（可能是因为 onPause() 调用了 2 次）

此外，我在预览或设置壁纸时看不到像**onSurfaceCreated()**、**onDrawFrame()这样的 OGLES2Renderer 调用。**

我错过了什么？

**Android清单（其中一部分）**

```
<uses-feature
    android:name="android.software.live_wallpaper"
    android:required="true" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
<service
android:name="com.aristarhys.lw.LW"
android:label="@string/app_name"
android:permission="android.permission.BIND_WALLPAPER" >
<intent-filter>
    <action android:name="android.service.wallpaper.WallpaperService" />
</intent-filter>
<meta-data
    android:name="android.service.wallpaper"
    android:resource="@xml/lw" /> 
```

**res/xml/lw.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<wallpaper 
xmlns:android="http://schemas.android.com/apk/res/android"
android:thumbnail="@drawable/ic_launcher"
android:description="@string/app_desc"/> 
```

**LW.java**

```
public class LW extends WallpaperService
{
public class OGLES2Engine extends Engine
{
    private class OGLES2SV extends GLSurfaceView 
    {
        public OGLES2SV(Context context)
        {
            super(context);
        }           

        public void onDestroy() 
        {
            super.onDetachedFromWindow();
        }
    }

    private OGLES2SV SV = null;

    @Override
    public void onCreate(SurfaceHolder surfaceHolder)
    {
        super.onCreate(surfaceHolder);
        SV = new OGLES2SV(LW.this);
        SV.setEGLContextClientVersion(2);
        SV.setRenderer(new OGLES2Renderer()); 
    }

    @Override
    public void onVisibilityChanged(boolean visible)
    {       

            if (!visible)
                SV.onResume();
            else
                SV.onPause();       
            super.onVisibilityChanged(visible);
    }

    @Override
    public void onDestroy()
    {
        SV.onDestroy();
        super.onDestroy();
    }
}

@Override
public Engine onCreateEngine()
{       
    return new OGLES2Engine();
}
} 
```

**OGLES2Renderer.java**

```
public class OGLES2Renderer implements GLSurfaceView.Renderer
{
private static final String LOG_TAG = "GL2Surface";

@Override
public void onDrawFrame(GL10 unused) 
{
    Log.i(LOG_TAG, "Draw frame");
}

@Override
public void onSurfaceChanged(GL10 unused, int width, int height) 
{
    Log.i(LOG_TAG, "Surface changed");
}

@Override
public void onSurfaceCreated(GL10 unused_, EGLConfig _unused)
{
    Log.i(LOG_TAG, "Surface created");
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:59:02.677

您可以使用[andengine](https://github.com/nicolasgramlich/AndEngine) `Wallpaper extension` 来实现这一点。

# python - 运行一个小 HTTP 服务器来检查回调

> ID：13681748
> 
> 赞同：1
> 
> 时间：2012-12-03T10:53:44.890
> 
> 标签：python, http, python-requests

我想运行一个脚本来创建一个简单的 HTTP 服务器并为每个请求运行一个函数。

我正在使用 Python 测试一个应该给我回调的 API。现在，我使用[http://requestb.in/](http://requestb.in/)来测试回调，但我想直接在我的 python 脚本中测试它。

是否可以在 localhost:6548 上运行回调服务器绑定并根据请求测试某些内容？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:01:52.123

您可以[`wsgiref`](http://docs.python.org/2/library/wsgiref.html)用来托管一个简单的 WSGI Web 应用程序。例子：

```
from wsgiref.simple_server import make_server
import datetime

def application(environ, start_response):
    start_response('200 OK', [('Content-type', 'text/plain')])
    retval = [
            str(environ),
            "\n",
            "Hello world!\n",
            str(datetime.datetime.now())
            ]
    return retval

make_server('localhost', 6548, application).serve_forever() 
```

此代码创建一个 Python [WSGI](http://www.python.org/dev/peps/pep-0333/) Web 应用程序并在`http://localhost:6548`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:51:22.717

您可以使用[Flask](http://flask.pocoo.org/)微框架。这是一个简单的例子：

```
from flask import Flask, request

app = Flask(__name__)

@app.route('/firs_call', methods=['POST'])
def first_callback():
    if request.method == 'POST':
        result = request.data
        client_ip = request.remote_addr

    return "OK"

@app.route('/second_call', methods=['GET'])
def second_callback():
    if request.method == 'GET':
         #....
         pass

    return "OK"

if __name__ == '__main__':
    app.debug = True
    app.run("127.0.0.1") 
```

您可以通过以下网址访问此 Web 应用程序`http://127.0.0.1:5000/`

# codeigniter - codeigniter 分页链接无法正常工作

> ID：13681749
> 
> 赞同：0
> 
> 时间：2012-12-03T10:53:47.137
> 
> 标签：codeigniter, pagination

我正在使用 Codeigniter 库分页进行搜索。问题是即使我从数据库表中有 2 个结果，单击下一个或上一个链接也只显示一个结果。代码：控制器

```
function search()
{
    $this->load->library('pagination');
    $perpage =1;
    $page = 1;
    $search_content = $this->input->get('con_search');
    $data->search = $this->public_model->search_content($search_content, $perpage);
    $total = count($this->public_model->search_content($search_content));
    $config['base_url'] = current_url()."?con_search=".$search_content;
    $config['total_rows'] = $total;
    $config['per_page'] = 1;
    $config['cur_page'] = $page;
    $config['use_page_numbers'] = TRUE;
    $config['query_string_segment'] = "page";
    $config['display_pages'] =TRUE;
    $config['page_query_string'] = TRUE;
    $config['cur_tag_open'] = '<span class="current">';
    $config['cur_tag_close'] = '</span>';
    $config['next_link'] = 'Next';
    $config['prev_link'] = 'Previous';
    $config['prev_tag_open'] = '<span class="prevtag">';
    $config['prev_tag_close'] = '</span>';
    $config['next_tag_open'] = '<span class="nexttag">';
    $config['next_tag_close'] = '</span>';          
    $this->pagination->initialize($config);

    $data->footer = $this->public_model->get_footer();
    $this->load->helper('text');
    $this->load->view('header', $data);
    $this->load->view('search');
    $this->load->view('footer');
} 
```

模型：

```
function search_content($search_txt, $perpage = 0)
{
    if($perpage){
        $this->db->limit($perpage);
    }
    $this->db->select('title, description, alias');
    $this->db->where('status', 'yes');
    $this->db->like('description', $search_txt);
    $res = $this->db->get('tbl_content')->result_array();
    return $res;
} 
```

看法 ：

```
if($search && is_array($search)) {
    foreach($search as $ind=>$val)
    { 
        $this->db->select('menu_type_id');
        $this->db->where('menu_alias', $val['alias']);
        $res = $this->db->get('tbl_menu')->row_array(); 
        if($res) {
            if($res['menu_type_id'] == 2)
                $url = site_url('page/'.$val['alias']);
            else
                $url = site_url('page/footer/'.$val['alias']);
        }
        ?>
        <div class="box_1">
            <div class="deal_contents">
                <div class="bx_0"><a href="<?php echo $url ?>" style="color:orangered;"><?php echo $val['title'] ?></a></div>
                <div class="bx_1" style="width:670px;"><?php echo strip_tags(character_limiter($val['description'],200)) ?></div>
                <div class="bx_2" style="text-align:right; width:640px;"><a href="<?php echo $url ?>" style="color:orangered;">Read More</a></div>
            </div>
        </div>
    <?php              
    }
    echo $this->pagination->create_links();  
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:15:00.673

这样做

```
 $this->load->library('pagination');
    $limit = 10;

    $total = $this->legend_model->get_legend_count($language_id);

    $config['base_url'] = base_url().'legend/index/';
    $config['total_rows'] = $total;
    $config['per_page'] = $limit;
    $config['uri_segment'] = 3;

    $config['first_link'] = '<< First';
    $config['last_link'] = 'Last >>';
    $config['next_link'] = 'Next ' . '&gt;';
    $config['prev_link'] = '&lt;' . ' Previous';
    $config['num_tag_open'] = '<span class="number">';
    $config['num_tag_close'] = '</span>';

    $config['cur_tag_open'] = '<span class="current"><a href="#">';
    $config['cur_tag_close'] = '</a></span>';

    $this->pagination->initialize($config);
    $data['offset'] = $offset;
    $data['legends'] = $this->legend_model->get_legend($language_id, $limit, $offset);

    $this->template->write('title', 'Legend : Manage Legend');
    $this->template->write_view('content', 'legend/index', $data);
    $this->template->render(); 
```

# c - 将具有结构成员的结构复制到另一个结构

> ID：13681759
> 
> 赞同：2
> 
> 时间：2012-12-03T10:54:47.953
> 
> 标签：c, struct

以下代码正确吗？

```
 typedef struct
   {
      int x;
      int y;
   } OTHERSTRUCT;

   struct DATATYPE
   {
      char a;
      OTHERSTRUCT b;
   }

   // ...

   // now we reserve two structs
   struct DATATYPE structA;
   struct DATATYPE structB;

   // ... probably fill insome values

   // now we copy structA to structB
   structA = structB; 
```

两个结构现在完全一样吗？甚至是“结构中的结构”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:58:35.617

是的。

当您将一个结构变量分配给另一个结构变量时，每个成员都会被一个接一个地复制，包括`OTHERSTRUCT`您作为`DATATYPE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:24:02.590

`a`在和`b`in之间很可能有填充字节`struct DATATYPE`，并且这些字节不能保证被结构赋值复制。这并不意味着它们不会，只是你不能依赖它们是否存在。

实际成员`a`和`b`将具有相同的值。复制的效果递归地应用于结构类型的成员，所以是的，成员的成员也被复制了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:01:40.160

是的，之后它们的内容是一样的。

# scala - 使用 Global.Run 编译 Scala 代码时出现 MissingRequirementError

> ID：13681764
> 
> 赞同：4
> 
> 时间：2012-12-03T10:55:05.123
> 
> 标签：scala, scala-2.10, scala-compiler

我正在尝试使用以下实例以编程方式编译 Scala 文件`Global.Run`：

```
val settings = new Settings                 
val reporter = new ConsoleReporter(settings)
val compiler = new Global(settings, reporter)
val run = new compiler.Run // MissingRequirementError
run compile List(path) 
```

不幸的是，我得到一个`MissingRequirementError`说法：

> 找不到编译器镜像中的对象 scala.runtime

所以我的**问题**是如何使用`Run`类以编程方式编译文件，或者我在这里做错了什么？

我试图弄清楚是否可以更改`settings`它以使其正常工作。实际上，我需要 Scala 文件中的类列表，`path`不一定是完全可运行的输出。因此，如果符号仍未解决（如果我可以运行编译器阶段的一个子集），那会很好。

我也在[Writing Scala Compiler Plugins](http://www.scala-lang.org/node/140)，但如果我可以通过实例化 Compiler Run 对象来运行它，我更喜欢这个解决方案。我还偶然发现[了Scala编译器是否可重入？](https://stackoverflow.com/questions/9961967/is-the-scala-compiler-reentrant)（类似的代码，不同的问题），这让我觉得它可能会按照我的想法工作。

**编辑 1：将 Scala JAR 添加到`toolcp`（只是带有绝对路径的示例代码！）**

根据评论，我将`scalac.bat`类路径填充脚本改编为我的 Scala 代码：

```
// scalac.bat
// if "%_TOOL_CLASSPATH%"=="" (
//   for %%f in ("!_SCALA_HOME!\lib\*") do call :add_cpath "%%f"
//   for /d %%f in ("!_SCALA_HOME!\lib\*") do call :add_cpath "%%f"
// )
new File("C:\\Program Files\\scala\\lib").listFiles.foreach(f => {
  settings.classpath.append(f.getAbsolutePath)
  settings.toolcp.append(f.getAbsolutePath)
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:07:27.680

我通过使用`bootclasspath`而不是运行它`toolcp`（感谢 pedrofurla 的提示）：

```
val settings = new Settings
new File("C:\\Program Files\\scala\\lib").listFiles.foreach(f => {
  settings.classpath.append(f.getAbsolutePath)
  settings.bootclasspath.append(f.getAbsolutePath)
})

private val reporter = new ConsoleReporter(settings)
private val compiler = new Global(settings, reporter)

val run = new compiler.Run
run compile List(path) 
```

编译器现在尝试编译文件。然而，这似乎并不完全是什么`scalac.bat`。它以 开始`-cp`，这是普通的类路径，而在控制台上`bootclasspath`传递，如trait 所示：`-bootclasspath``StandardScalaSettings`

```
val bootclasspath = PathSetting ("-bootclasspath", "Override location of bootstrap class files.", Defaults.scalaBootClassPath) 
```

# html - 从特定的文本中提取文本 使用 GetElementById 的元素

> ID：13681768
> 
> 赞同：1
> 
> 时间：2012-12-03T10:55:16.387
> 
> 标签：html, dom, vbscript

我创建了一个查看 XML 数据文件的 VBS 脚本文件。在 XML 数据文件中，我需要的 HTML 数据嵌入在

```
<![CDATA[]'other interesting HTML data here']. 
```

我已经使用 XPATH 剥离了这些 HTML 数据，并插入到表示为变量的 Div 对象 (myDiv) 元素中（它没有写入文档）。例如，myDiv.innerHTML 的内容如下所示；

```
<table> 
<tr><td>text in cell 1</td></tr> 
<tr><td><h1 id="myId1">my text for H1</h></td><tr> 
<tr><td><h2 id="myId2">my text for h2</h></td></tr> 
</table> 
```

我首先要做的是简单地选择 ID 与“myId1”匹配的适当标签，因此，我使用了这样的语句；

```
MyIdText = MyDiv.getElementById("myId1") 
```

但是，我正在使用的应用程序显示“Err 438，Object 不支持此属性或方法”。我是一个代码新手，可以理解一些基本原理，但是当它变得更复杂时会有点迷失（对不起）。我查看了该板上的其他帖子，所有帖子似乎都与 HTML 和 Javascript 相关，而不是 VBScript（我使用的应用程序不允许使用 Java Script）。我使用的代码错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:48:11.443

要使用 getElementById()，您应该编写：document.getElementById("myId1")。这样，您就可以告诉浏览器在“文档”中搜索指定的 ID。您的变量未定义并且没有附加此方法，因此您的代码将生成上述错误。

要提取特定 H 元素内的文本：

`MyIdText = document.getElementById("myId1").textContent;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:43:18.247

非常感谢您的帮助，不幸的是，我对 VBS 了解一点，对 DOM 的了解甚至更少，我正在尝试通过实验来学习这两者。在我正在使用的环境/应用程序中存在某些限制（它称为 ASCE，它是一种用于管理安全案例的工具 - 但现在这并不重要）。但是，为了将苹果与苹果进行比较，我尝试在 HTML 页面中进行试验，以便更好地理解 DOM/VBS 命令实际上可以做什么。我取得了一些部分的成功，但仍然无法理解为什么它会在它所在的地方倒下。这是我正在试验的确切文件，我为每个部分添加了注释文本；

```
<html>
<head>

<table border=1>
    <tr>
        <td>text in cell 1</td>
    </tr>

    <tr>
        <td><h1 id="myId1">my text for H1</h1></td>
    </tr>

    <tr>
        <td><h1 id="myId2">my text for h2</h2></td>
    </tr>
</table>

<script type="text/vbscript">
DoStuff

Sub DoStuff 

    ' Section 1: Get a node with the Id value of "myId1" from the above HTML
    ' and assign it to the variable 'GetValue'
    ' This works fine :-)
    Dim GetValue
    GetValue = document.getElementById("myId1").innerHTML
    MsgBox "the text=" & GetValue   

    ' Section 2: Create a query that assigs to the variable 'MyH1Tags' to  all of the <h1> 
    ' tags in the document.
    ' I assumed that this would be a 'collection of <h1> tags so I set up a loop to itterate
    ' through however many there were, but this fails as the browser says that this object 
    ' doesn't support this property or method - This is where I am stuck    

    Dim MyH1Tags    
    Dim H1Tag
    MyH1Tags = document.getElementsByTagName("h1") ' this works

    For Each H1Tag in MyH1Tags ' this is where it falls over
        MSgbox "Hello"
    Next

    ' Section 3: Create a new Div element 'NewDiv' and then insert some HTML 'MyHTML'
    ' into 'NewDiv'. Create a query 'MyHeadings' that extracts all h1 headings from 'NewDiv'
    ' then loop round for however many h1 headings there are in 'MyHeadings'
    ' and display the text content. This works Ok

    Dim NewDiv  
    Dim MyHTML  
    Dim MyHeadings
    Dim MyHeading
    Set NewDiv = document.createElement("DIV")      
    MyHTML="<h1 id=""a"">heading1</h1><h2 id=""b"">Heading2</h2>"  
    NewDiv.innerHTML=MyHTML
    Set MyHeadings = NewDiv.getElementsByTagName("h1")

    For Each MyHeading in MyHeadings
        Msgbox "MyHeading=" & MyHeading.innerHTML
    Next

    'Section 4: Do a combination of Section 1 (that works) and Section 3 (that works)
    ' by creating a new Div element 'NewDiv2' and then paste into it some HTML
    ' 'MyHTML2' and then attempt to create a query that extracts  the inner HTML from 
    ' an id attribute with the value of "a". But this doesnt work either.
    ' I have tried "Set MyId = NewDiv2.getElementById("a").innerHTML" and
    ' also tried "Set MyId = NewDiv2.getElementById("a")" and it always falls over 
    ' at the same line.
    Dim NewDiv2 
    Dim MyHTML2     
    Dim MyId

    Set NewDiv2 = document.createElement("DIV")     
    MyHTML2="<h1 id=""a"">heading1</h1><h2 id=""b"">Heading2</h2>"  
    NewDiv2.innerHTML=MyHTML

    MyId = NewDiv2.getElementById("a").innerHTML

End Sub

</script>
</head>

<body> 
```

# c# - 数据列表的选定索引包含复选框列表

> ID：13681769
> 
> 赞同：2
> 
> 时间：2012-12-03T10:55:31.537
> 
> 标签：c#, asp.net, visual-studio-2008

我有一个包含复选框列表的数据列表。

```
<asp:DataList ID="dtlstfilter" runat="server">
<ItemTemplate>
  <asp:CheckBoxList ForeColor="Gray"  AutoPostBack="true" OnSelectedIndexChanged="chklist_SelectedIndexChanged" ID="chklist"
   runat="server">
 </asp:CheckBoxList>
</ItemTemplate>
</asp:DataList> 
```

我可以在复选框的 SelectedIndexChanged 事件上获取数据列表的行数，即；如果我有复选框列表控件重复 4 次，并且如果我检查第二个，我如何获得值 2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:16:43.133

您可以尝试关注。我添加了 +1，因为它是基于 0 的索引..

```
Protected void dtlstfilter_SelectedIndexChanged(object sender, EventArgs e)
    {
        lblSelectedIndex.Text = (dtlstfilter.SelectedIndex + 1).ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:37:31.733

您应该尝试像这样获取复选框列表的父级

```
 Protected void dtlstfilter_SelectedIndexChanged(object sender, EventArgs e)
 {
   var control= ((Control)sender).Parent;
    if(control is DataListItem)
    {
       int index=((DataListItem)control).ItemIndex;
    }
} 
```

如果您没有将 DataListItem 作为父级，请尝试父级的父级。

# grails - Grails 覆盖控制器中的保留工作？

> ID：13681772
> 
> 赞同：0
> 
> 时间：2012-12-03T10:55:37.497
> 
> 标签：grails, controller, overriding, reserved-words

我目前正在研究 Grails 解决方案，我希望使用 WSLite 传递一个 URL，我基本上想传递一堆查询参数并让它们被触发。我需要的参数之一是 session.name，我需要这个就像这样，因为第 3 方系统只能将数据读取为“session.WHATEVER”。但是，当我输入下面的数据时，“会话”出现问题。因为看起来 session 是 grails 中的保留字。无论如何我可以让grails不拿起保留字而只使用session.name吗？也许通过某种覆盖？

```
def response = client.get(path:'/TestingService', query:[code:testCode, session.name: name]) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:35:28.497

使用引号：

```
query:[code:testCode, 'session.name': name] 
```

# sql - 用于显示具有最大非空字段数的记录的 SQL 查询

> ID：13681777
> 
> 赞同：2
> 
> 时间：2012-12-03T10:55:56.157
> 
> 标签：sql

我正在寻找一个查询/一组 SQL 查询，它将为我提供具有“非空/非空字段的最大数量”的记录的记录 ID。
我正在研究`count()`和`max()`功能，但他们似乎正在解决同一列的问题，但不是同一行（这就是我正在寻找的）。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:58:07.443

你可以`order by`非空字段的数量：

```
select  top 1 Record_ID
from    YourTable
order by
        case when isnull(col1,'') <> '' then 1 else 0 end +
        case when isnull(col2,'') <> '' then 1 else 0 end +
        case when isnull(col3,'') <> '' then 1 else 0 end +
        ...
        case when isnull(colN,'') <> '' then 1 else 0 end 
```

这是 SQL Server 语法。如果您使用的是其他数据库，请修改您的问题。

# java - Java - 如何将 png 文件添加到 JPanel

> ID：13681778
> 
> 赞同：1
> 
> 时间：2012-12-03T10:55:59.867
> 
> 标签：java, image, swing, png, jpanel

这个星期五我需要提交我的 Java 项目——我现在才编程大约两个星期——我真的想在我的 JPanel 中添加一个 PNG 文件。在下面你可以找到我的代码，图像的名称是**java.png**，我把它和我的 src 文件放在同一个文件夹中。我只是找不到关于如何做到这一点的好教程。请帮我！
*注意：*图像应该`booOpAfbeam`几乎插入到代码底部的结构中，也很抱歉这个杂乱无章的消息，我不知道如何体面地发布我的代码。

```
 import java.awt.Color;
    import java.awt.Graphics;
    import java.awt.TextField;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.awt.image.ImageObserver;

    import javax.swing.JButton;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.JTextField;
    import java.awt.Image;
    import java.awt.Dimension; 
    import javax.swing.*;

public class Project extends JPanel {

private JLabel invoerLabel, invoerKleur, invoerKleur2, invoerBril, invoerBril2;
private JTextField invoerAantal, invoerK, invoerB;
private int intAantal;
private String strKleur="";
private String strBril="";
private JButton knop, knopBril, btnOpAf, btnOpAfbeam;
private Boolean booOpAf = false, booOpAfbeam = false;
private Image image1;

public Project(){
    setLayout(null); 
    invoerLabel = new JLabel("Voer aantal stoelen in: ");
    invoerAantal = new JTextField (10);
    invoerKleur = new JLabel("Voer kleur stoel in: ");
    invoerKleur2 = new JLabel("(blauw, rood, groen, paars, roos, zwart, geel, oranje)");
    invoerK = new JTextField (10);
    invoerBril = new JLabel("Voer kleur bril in: ");
    invoerBril2 = new JLabel("(blauw, rood, groen, paars, roos, zwart, geel, oranje)");
    invoerB = new JTextField (10);
    knopBril = new JButton ("ok");
    knop = new JButton("ok");
    btnOpAf = new JButton ("Wijs/Wijs niet");
    btnOpAfbeam = new JButton ("aan/uit");
    knop.addActionListener (new InvoervakHandler());
    knopBril.addActionListener(new InvoervakHandler2());
    btnOpAf.addActionListener(new aanuit());
    btnOpAfbeam.addActionListener(new beam());

    invoerLabel.setBounds(1000, 10, 150, 20);
    invoerAantal.setBounds(1150, 10, 60, 20);
    invoerKleur.setBounds(1000, 70, 120, 20);
    invoerKleur2.setBounds(985, 90, 300, 20);
    invoerK.setBounds(1150, 70, 60, 20);
    knop.setBounds(1155, 120, 50, 20);
    invoerBril.setBounds(1000, 170, 150, 20);
    invoerBril2.setBounds(985, 195, 300, 20);
    invoerB.setBounds(1150, 170, 60, 20);
    knopBril.setBounds(1155, 220, 50, 20);
    btnOpAf.setBounds(1000,275,115,20);
    btnOpAfbeam.setBounds(365, 26, 75, 20);

add(invoerLabel);
add(invoerAantal);
add(invoerKleur);
add(invoerKleur2);
add(invoerK);
add(invoerBril);
add(invoerBril2);
add(invoerB);
add(knop);
add(knopBril);
add(btnOpAf);
add(btnOpAfbeam);

}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    ImageIcon i = new ImageIcon("java.png");
    image1 = i.getImage();
    g.drawImage(image1, 0, 0, null);
    ImageIcon("java.png");
    //labels//
    invoerBril2.setForeground(new Color(0,173,173));
    invoerKleur2.setForeground(new Color(0,173,173));
    invoerLabel.setForeground(new Color(227,227,227));
    invoerKleur.setForeground(new Color(227,227,227));
    invoerBril.setForeground(new Color(227,227,227));
    //vloer
    g.setColor(new Color(102,77,51));
    g.fillRect(0, 375, 1000, 200);
    //muur
    g.setColor(new Color(99,136,176));
    g.fillRect(0, 0, 1000, 400);
    //achtergrond kleur balk//
    g.setColor(new Color(0,102,53));
    g.fillRect(980, 0, 386, 766);
    //beamer
    g.setColor(new Color(122,122,122));
    g.fillRect(355,20,100,30);
    g.fillRect(397,0,15,40);
    g.setColor(Color.BLACK);
    g.fillRect(355, 20, 100, 3);
    g.fillRect(355, 50, 100, 3);
    g.fillRect(352, 20, 3, 33);
    g.fillRect(452, 20, 3, 33);
    g.fillRect(410, 0, 3, 20);
    g.fillRect(395, 0, 3, 20);

    //bord
    g.setColor(new Color(98,121,74));
    g.fillRect(250, 100,300 , 200);
    g.setColor(Color.BLACK);
    g.fillRect(250, 300,300 , 10);
    g.fillRect(250, 100,300 , 10);
    g.fillRect(250, 100,10 , 200);
    g.fillRect(550, 100,10 , 210);

    //boekenkast horizontale balken
    g.setColor(Color.BLACK);
    g.fillRect(50, 160, 30, 250);
    g.fillRect(200, 160, 30, 250);
    //boekenkast verticale balken
    g.fillRect(50, 160, 150, 20);
    g.fillRect(50, 220, 150, 20);
    g.fillRect(50, 280, 150, 20);
    g.fillRect(50, 340, 150, 20);

    //boekenkast boeken rij 1
    g.setColor(new Color(204,0,0));
    g.fillRect(80, 180, 20, 40);
    g.setColor(new Color(0,204,102));
    g.fillRect(110, 180, 20, 40);
    g.setColor(new Color(204,102,0));
    g.fillRect(140, 180, 20, 40);
    g.setColor(new Color(204,204,0));
    g.fillRect(170, 180, 20, 40);
    //boekenkast boeken rij 2
    g.setColor(new Color(0,204,102));
    g.fillRect(80, 240, 20, 40);
    g.setColor(new Color(204,0,0));
    g.fillRect(110, 240, 20, 40);
    g.setColor(new Color(204,102,0));
    g.fillRect(140, 240, 20, 40);
    g.setColor(new Color(204,204,0));
    g.fillRect(170, 240, 20, 40);
    //boekenkast boeken rij 3
    g.setColor(new Color(204,0,0));
    g.fillRect(80, 300, 20, 40);
    g.setColor(new Color(204,102,0));
    g.fillRect(110, 300, 20, 40);
    g.setColor(new Color(204,204,0));
    g.fillRect(140, 300, 20, 40);
    g.setColor(new Color(0,204,102));
    g.fillRect(170, 300, 20, 40);
    //boeklabels
    g.setColor(new Color(224,224,224));
    g.fillRect(85,190,10,20);
    g.fillRect(115,190,10,20);
    g.fillRect(145,190,10,20);
    g.fillRect(175,190,10,20);
    g.fillRect(85,250,10,20);
    g.fillRect(115,250,10,20);
    g.fillRect(145,250,10,20);
    g.fillRect(175,250,10,20);
    g.fillRect(85,310,10,20);
    g.fillRect(115,310,10,20);
    g.fillRect(145,310,10,20);
    g.fillRect(175,310,10,20);

    //hoofd//
    g.setColor(new Color(255,237,184));
    g.fillOval(615,170,150,150);
    g.setColor(new Color(255,255,255));
    g.fillOval(645,220,25,25);
    g.fillOval(715,220,25,25);
    g.setColor(new Color(0,0,0));
    g.fillOval(655,230,10,10);
    g.fillOval(725,230,10,10);
    g.drawArc(675,240,40,40,0,-180);
    g.drawArc(635,250,115,50,0,-180);

    //lichaam
    g.setColor(new Color(153,153,0));
    g.fillRect(650, 300, 100, 125);
    g.setColor(Color.BLACK);
    g.fillRect(650, 430, 25, 60);
    g.fillRect(730, 430, 25, 60);
    g.fillRect(650, 420, 100, 15);
    g.setColor(Color.BLUE);
    g.fillOval(632, 470, 45, 25);
    g.fillOval(725, 470, 45, 25);

    // bureau
    g.setColor(new Color(184, 184, 184));
    g.fillRect(540, 410, 325, 20);
    g.fillRect(540, 430, 20, 60);
    g.fillRect(845, 430, 20, 60);

    //vingers
    g.setColor(new Color(255,237,184));

    g.fillOval(785, 375, 10, 25);
    g.fillOval(775, 375, 10, 25);
    g.fillOval(765, 375, 10, 25);
    g.fillOval(755, 375, 10, 25);
    //pc
    g.setColor(Color.BLACK);
    g.fillRect(650, 280, 175, 100);
    g.fillRect(676, 400, 125, 10);
    g.fillRect(730, 375, 15, 30);
    //
    g.setColor(new Color(184, 184, 184));
    g.fillRect(660, 320, 20, 5);
    g.fillRect(660, 340, 20, 5);
    g.fillRect(795, 320, 20, 5);
    g.fillRect(795, 340, 20, 5);
    //apple
     g.fillOval(725, 320, 20, 20);
     g.fillOval(732, 310, 5, 10);
     g.setColor(Color.BLACK);
     g.fillOval(735, 325, 10, 10);

    if(strBril.equals("blauw")) {
        g.setColor(Color.BLUE);
    }
    if(strBril.equals("rood")) {
        g.setColor(Color.RED);
    }
    if(strBril.equals("groen")) {
        g.setColor(Color.GREEN);
    }
    if(strBril.equals("paars")) {
        g.setColor(new Color(204,51,255));
    }
    if(strBril.equals("roos")) {
        g.setColor(new Color(255,51,204));
    }
    if(strBril.equals("zwart")) {
        g.setColor(Color.BLACK);
    }
    if(strBril.equals("geel")) {
        g.setColor(Color.YELLOW);
    }
    if(strBril.equals("oranje")) {
        g.setColor(Color.ORANGE);
    }{
    //bril//

    //linkerglas
    g.fillRect(600,200,80,5);
    g.fillRect(600,200,5,50);
    g.fillRect(600,250,80,5);
    g.fillRect(680,200,5,55);
    //tussenbeentje//
    g.fillRect(680,225,20,10);
    //rechterglas
    g.fillRect(700,200,80,5);
    g.fillRect(700,200,5,50);
    g.fillRect(700,250,80,5);
    g.fillRect(780,200,5,55);

    }

int teller1;

    if(strKleur.equals("blauw")) {
        g.setColor(Color.BLUE);
    }
    if(strKleur.equals("rood")) {
        g.setColor(Color.RED);
    }
    if(strKleur.equals("groen")) {
        g.setColor(Color.GREEN);
    }
    if(strKleur.equals("paars")) {
        g.setColor(new Color(204,51,255));
    }
    if(strKleur.equals("roos")) {
        g.setColor(new Color(255,51,204));
    }
    if(strKleur.equals("zwart")) {
        g.setColor(Color.BLACK);
    }
    if(strKleur.equals("geel")) {
        g.setColor(Color.YELLOW);
    }
    if(strKleur.equals("oranje")) {
        g.setColor(Color.ORANGE);
    }

    int Ra = 20;
    int Rb = 20;
    int Rc = 40;
    int Rd = 20;
    for (teller1=1; teller1 <= intAantal; teller1++) {
        g.fillRect(Ra,450,10,50);
        g.fillRect(Rb,500,50,10);
        g.fillRect(Rc,500,10,30);
        g.fillRect(Rd,530,50,10);

        Ra = Ra + 70;
        Rb = Rb + 70;
        Rc = Rc + 70;
        Rd = Rd + 70;
    }

     if (booOpAf) {
            if (!booOpAf) {
                g.setColor(new Color(153,153,0));
                g.fillRect(625, 300, 30, 100);
            } else {
                //arm
                g.setColor(new Color(153,153,0));
                g.fillRect(550, 315, 100, 25);
                //linkerarm vingers
                g.setColor(new Color(255,237,184));

                g.fillOval(530, 310, 30, 30);
                g.fillOval(515, 310, 25, 10);
                g.fillOval(515, 320, 25, 10);
                g.fillOval(515, 330, 25, 10);
                g.fillOval(545, 300, 10, 25);
            }
        }
     if (booOpAfbeam) {
            if (!booOpAfbeam) {
            } else {
                g.drawImage(image1, 500, 100, null);
            }
        }
}

private void ImageIcon(String string) {
    // TODO Auto-generated method stub

}

class InvoervakHandler implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        String strAantal = invoerAantal.getText();
        intAantal = Integer.parseInt(strAantal);
        strKleur= invoerK.getText();

        repaint();
    }
}

class InvoervakHandler2 implements ActionListener {
    public void actionPerformed(ActionEvent f){
        strBril= invoerB.getText();

        repaint();
}
}
    public class aanuit implements ActionListener {

        public void actionPerformed(ActionEvent arg0) {
            if (booOpAf == true) {
                booOpAf = false;
            } else {
                booOpAf = true;
            }
            repaint();
        }

           }    
    public class beam implements ActionListener {

        public void actionPerformed(ActionEvent arg0) {
            if (booOpAfbeam == true) {
                booOpAfbeam = false;
            } else {
                booOpAfbeam = true;
            }
            repaint();
        }

   }    
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:59:35.450

我无法验证您的完整代码。所以最好确保您已将图像导入项目（否则，如果图像不在指定的位置，您将无法获取图像）。并检查图像是否在 src 中，您需要指定“/”和图像名称。定位图像。

我建议最好的方法是创建一个标签，右键单击并获取图像的属性并选择您要显示的图像。netbeans 将处理其余代码。

对不起，如果我犯了任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:18:25.080

试试这个：
添加另一个面板，然后在该面板上上传图像。

```
lblImage = new javax.swing.JLabel();
lblImage.setIcon(new javax.swing.ImageIcon("E:..path...png)); 
```

# javascript - 在 web 应用程序中使用基于 C 的 API（混乱）的 Javascript 扩展

> ID：13681780
> 
> 赞同：12
> 
> 时间：2012-12-03T10:56:14.060
> 
> 标签：javascript, webkit, dom-events, swig, clutter

**我的目标是使用 C 库来构建 Web 应用程序。**

我选择了通过使用“SWIG”工具来做到这一点的方式。Swig 工具需要三样东西：

1.  `.c`定义所有功能的文件。

2.  `.i`文件也称为接口文件，它正在创建接口以加载我使用`extern`关键字的 API。

3.  `.js`用Javascript扩展（文件）编写的APP 。

我使用 SWIG 工具编译和运行这个应用程序来验证`.js`文件是否正确。该应用程序在 XMING X11 窗口上运行良好。

在编译时`_wrap.o`，它会创建`.o`.file 和`libFILENAME.so`.

现在我想在浏览器页面上运行这个*应用程序。*

为此，我使用了 webkit clutter port，它为我们提供了 MxLauncher 代码。我正在使用`webkit_iweb_view_load_uri(WEBKIT_IWEB_VIEW(view), "filename.html");`API 加载我的 html 文件以在我的网页视图上运行该 Javascript。

我正在链接`.so`编译时创建的。

> *错误消息*：JS CONSOLE：file:///filename.js：ReferenceError：找不到变量：示例

**文件名.c**

```
int gcd(int x, int y) `enter code here`{
  int g;
  g = y;
  while (x > 0) {
    g = x;
    x = y % x;
    y = g;
  }
  return g;
} 
```

**文件名.i**

```
%module example
extern int    gcd(int x, int y); 
```

**文件名.js**

```
x = 42;
y = 105;
g = example.gcd(x,y); 
```

如何让我的目标得以实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T23:50:22.603

You also need to tell WebKit/JavaScriptCore at runtime about your bindings (this is in addition to linking with filename_wrap.o).

Specifically you need to bind them to the global JavaScript object (in order to invoke per your .js examples). A callback on the WebKit window can be used to get a timely reference to the global JavaScript context, and then you can register your functions onto it.

Adapting this [example](https://github.com/vrruiz/WebKit-JavaScriptCore-Extensions/blob/master/webkit-02.c#L87) of hooking into the `window-object-cleared` signal the code could look similar to this:

```
/* the window callback - 
     fired when the JavaScript window object has been cleared */
static void window_object_cleared_cb(WebKitWebView  *web_view,
                                     WebKitWebFrame *frame,
                                     gpointer        context,
                                     gpointer        window_object,
                                     gpointer        user_data)
{
  /* Add your classes to JavaScriptCore */
  example_init(context); // example_init generated by SWIG
}

/* ... and in your main application set up */
void yourmainfunc()
{
    ....

    g_signal_connect (G_OBJECT (web_view), "window-object-cleared",
        G_CALLBACK(window_object_cleared_cb), web_view);

    webkit_web_view_load_uri (WEBKIT_WEB_VIEW (web_view), "file://filename.html");

    ...
} 
```

Depending on which branch of SWIG you are using you may need to generate the `example_init` function yourself (check filename.cxx); for reference here is what an initializer function to [register wrapped C functions](https://github.com/oliver----/swig-v8/blob/devel/Doc/Manual/Javascript.md#wrapper-functions) would look like in SWIG:

```
int example_init(JSContextRef context) {
  JSObjectRef global = JSContextGetGlobalObject(context);
 ...
  jsc_registerFunction(context, global,  "gcd", _wrap_gcd);
 ...
} 
```

*NOTE -- SWIG does not yet officially support JavaScript; the above refers to using the work-in-progress (non-production) SWIG branches.*

References:

*   SWIG-V8 [source](https://github.com/oliver----/swig-v8) and its [Javascript documentation](https://github.com/oliver----/swig-v8/blob/devel/Doc/Manual/Javascript.md#wrapper-functions)
*   swig-jsc [source](https://github.com/ashishs99/swig-jsc) and its [example](https://github.com/ashishs99/swig-jsc/blob/a15943ac/Examples/javascript/simple/runme.cxx#L95) of registering bindings
*   SWIG JavaScriptCore GSoC project [source](https://github.com/Neha03/gsoc2012-javascript) (Google Summer of Code 2012)
*   Webkit: Extending JavaScript article-- [tutorial](http://rvr.typepad.com/wind/2011/10/webkit-extending-javascript-1.html) / [example code](https://github.com/vrruiz/WebKit-JavaScriptCore-Extensions)

# c# - 类似于 MVC 局部视图的离线模板渲染？

> ID：13681788
> 
> 赞同：0
> 
> 时间：2012-12-03T10:56:37.297
> 
> 标签：c#, .net, asp.net-mvc, template-engine

我想重构现有的 MVC 操作，以便可以离线使用它来构建电子邮件内容。

该操作只是通过 Id 获取模型并将其交给视图，视图在视图中呈现它的字段。视图中有一个 foreach 循环。

我的第一个想法是创建一个 html 文件并在其中进行字符串搜索和替换。

有没有我应该考虑的模板渲染库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:09:24.557

你可以看看[`RazorEngine`](http://razorengine.codeplex.com/)。

# java - 将 2D Mat 对象转换为 1D 数组

> ID：13681790
> 
> 赞同：3
> 
> 时间：2012-12-03T10:56:43.097
> 
> 标签：java, android, opencv

我想将大小为 100x100 的 mat 对象 m2 转换为双行数组，例如：

```
double[] matrizvector=new double[10000];

int mm=0;
for (int nr=0; nr<100; nr++){ 
    for (int nc=0; nc<100; nc++){ 
        matrizvector[mm]=m2.get(nr,nc)[0];
        mm=mm+1;
    }
} 
```

有没有其他方法可以做到这一点，例如使用重塑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:09:56.173

您可以结合使用[reshape](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=convertto#mat-reshape)和[convertTo](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=convertto#void%20Mat%3a%3aconvertTo%28OutputArray%20m,%20int%20rtype,%20double%20alpha,%20double%20beta%29%20const)函数：

```
Mat reshaped = m2.reshape(1,1);
Mat reshapedInDouble;
reshaped.convertTo(reshapedInDouble, CV_64F);

double* matrixzvector = (double*)(reshapedInDouble.data); 
```

如果您的原始矩阵已经是双精度矩阵，则不需要使用 convertTo。

# ruby - Ruby windows 命令提示符前几行

> ID：13681792
> 
> 赞同：4
> 
> 时间：2012-12-03T10:56:51.273
> 
> 标签：ruby, windows, command-line

是否可以使用 Ruby 编辑已写入命令提示符的内容？

例如，假设我已经向 STDOUT 写入了 10 行，我可以将光标移动到，比如说，石灰 5 并覆盖那行吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:53:37.573

是的，您可以，在 Windows Vista、7 和可能 8 以及一些第三方扩展命令解释器（如 4NT 和 Take Command）中，您可以使用向上键调用以前的命令，编辑该行并重新执行该行. 我不明白 Ruby 与此有什么关系。如果您想让 Ruby 在控制台中键入击键，可以使用 auto-it Active-X 控件。

编辑：这里是一个使用[Autoit](http://www.autoitscript.com/site/autoit/)编辑控制台的示例，首先下载并安装它，然后运行以下脚本。为了确保脚本不与其他打开的控制台交互，我将 mu cmd.exe 复制到首先启动的 cmd2.exe 中。

```
require 'win32ole' 

title = "C:\\Windows\\System32\\cmd2.exe"
STDOUT.sync = true 
ai = WIN32OLE.new("AutoItX3.Control") 
ai.winwait(title)
ai.WinActivate(title, "")
ai.Send "cls{ENTER}"
1.upto(4) do |i|
  ai.Send "line#{i}{ENTER}"
end
1.upto(4) do |i|
  ai.Send "{UP}"
  sleep 1
end
ai.Send "line one {ENTER}" 
```

# symfony - Symfony2 remember_me 用户提供者

> ID：13681795
> 
> 赞同：0
> 
> 时间：2012-12-03T10:56:53.510
> 
> 标签：symfony

目前我正在使用 2 个用户提供程序进行 Symfony2 项目。我想使用 remember_me 功能。有没有办法指定应该使用哪个用户提供程序？

实际上，记住我的服务总是加载错误的提供程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:19:20.590

我解决了这个问题......这很简单，只需将 user_provider: provider_name 添加到配置中

# ruby - 未知选项：{:resynchronize=>false} (ArgumentError) in ..../lib/selenium/webdriver/firefox/br idge.rb:17:in `initialize'

> ID：13681797
> 
> 赞同：1
> 
> 时间：2012-12-03T10:56:58.103
> 
> 标签：ruby, capybara, selenium-webdriver

我在 env.rb 中使用 Capybara selenium webdriver 我有以下代码

```
Capybara::Selenium::Driver.new(app, :browser => :ff, :resynchronize => false) 
```

当我使用黄瓜命令执行我的功能文件时，例如黄瓜 test.feature

我收到以下错误

> 未知选项：{:resynchronize=>false} (ArgumentError) c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/firefox/br idge.rb :17:在“初始化”中

我不确定是什么导致了这个问题。当我`:resynchronize => false`从代码中删除并如下所示：

```
 Capybara::Selenium::Driver.new(app, :browser => :ff) 
```

代码有效，但我需要`resynchronize => false`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:59:57.897

如果您阅读[此处，](https://github.com/jnicklas/capybara/commit/a1b1cc7132a2e7a)您会注意到**重新同步在 10 个月前**由于不稳定而被删除。如果您想在测试中等待 ajax，您可以执行如下步骤：

```
 When /^I wait (\d+) seconds?$/ do |seconds|
    sleep seconds.to_i
 end 
```

然后调用

```
When I wait 5 seconds
Then I click on "link_1"
# and so on 
```

# visual-studio - 如何让我在 Visual Studio 中的解决方案在 TFS 中重新联机？

> ID：13681807
> 
> 赞同：253
> 
> 时间：2012-12-03T10:57:27.727
> 
> 标签：visual-studio, tfs

我在 Visual Studio 2012（受 TFS 源代码控制）中打开了我的解决方案，并且 TFS 服务器（2010）已关闭。然后，当我对其中一个文件进行更改并尝试保存它时，我收到一个提示，询问我是否要覆盖文件，说 TFS 服务器已关闭（不记得确切的单词），并且出现以下消息输出窗口：

```
This solution is offline.  [Team Foundation Server: http://tfs1:8080/tfs/server]
The solution was offline during its previous session and will remain offline. 
```

如何让文件更改被识别为 Pending Changes 和整个解决方案重新联机？

* * *

## 回答 #1

> 赞同：528
> 
> 时间：2012-12-03T10:57:27.727

我在网上搜索了解决方案，找到[了这个解决方案](http://kristjansson.us/?p=857)，但对注册表更改不太感兴趣。

我找到了一个更好的方法：**右键单击解决方案资源管理器顶部的解决方案名称，然后选择*Go Online*选项**。单击此按钮允许我选择离线时已更改的文件并再次使解决方案在线。

找到解决方案后，我找到了以下[msdn 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol/thread/2efeec0d-9276-41a5-85a0-4352dbe66e68/)，证实了上述内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-10-08T18:39:39.597

转到`File > Source Control > Go Online`，选择您更改的文件，然后完成该过程。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-10T15:00:06.687

重命名解决方案的对应 .SUO 文件。SUO 文件包含 TFS 状态（在线/离线）以及许多其他好东西。

仅当“右键单击解决方案资源管理器顶部的解决方案名称并选择联机选项”失败时才执行此操作（例如，因为您安装了 VS2015 预览版）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-09T18:14:14.150

（如果您缺少 AutoReconnect 或 Offline 注册表值，则上述解决方案的附加步骤）

对于 Visual Studio 2015，版本 14

1.  关闭所有 VS 实例
2.  HKEY_CURRENT_USER\SOFTWARE\Microsoft\VisualStudio\14.0\TeamFoundation\Instances{YourServerName}\Collections{TheCollectionName}（要在 Windows 上访问此目录，请按 Windows + R 键并搜索“regedit”）
3.  将 Offline 和 AutoReconnect 值都设置为 0。
4.  如果您缺少其中一个属性（在我的情况下，我缺少 AutoReconnect），请右键单击并使用所需的缺少名称、AutoReconnect 或 Offline 创建一个新的 DWORD（32 位）值。
5.  同样，确保两个值都设置为零。
6.  重新启动您的解决方案

附加信息： [博客 MSDN - 我的解决方案何时以及如何脱机？](http://blogs.msdn.com/b/benryan/archive/2007/12/12/when-and-how-does-my-solution-go-offline.aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-09-23T06:10:36.230

我正在使用**Visual Studio 2017 15.4.0**版本。特别是当我开始使用轻量级解决方案选项时，这个离线的事情发生在我身上。我尝试了以上解决方案：

1.  试图注册选项，但看不到适当的菜单选项。没用。
2.  右键单击解决方案，有联机选项，当我选择它时，会显示此错误消息：**“解决方案脱机，因为其关联的 Team Foundation Server 脱机。无法确定此解决方案的工作区。”**

然后从**File -> Source Control -> Advanced -> Change Source Control**。我看到了我的文件。我选择它们，然后选择绑定选项。这对我有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-28T13:23:24.833

你可以去使用注册表编辑器。

1.  关闭所有 VS 实例。
2.  打开注册表编辑器并转到：HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\TeamFoundation\Instances
3.  找到合适的服务器，例如：team32system1
4.  转到集合并下一个 DefaultCollection：HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\TeamFoundation\Instances\team32system1\Collections\DefaultCollection
5.  将离线键设置为 0
6.  在 VS 中打开解决方案。之后应该会出现弹出窗口，您希望将哪个问题带入在线模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-30T13:17:50.077

以上解决方案都不适用于 Visual Studio Community 2017 v15.7.1。不知何故，上下文菜单中没有“Go Online”选项。我按照此处的建议尝试了注册表编辑，但这仅向我显示了找不到绑定的错误。对我有用的是从 Change Source Control 菜单将解决方案重新绑定到服务器。

转到**`File->Source Control->Advanced->Change Source Control`**并确保您的解决方案已绑定到您的源代码管理。如果不是（像我的一样）然后单击绑定按钮，它将自动搜索在线 TFS 服务器并将您的解决方案重新绑定到它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-13T06:54:53.790

我不费吹灰之力就找到了另一种方法。

只需右键单击您的解决方案，然后单击撤消挂起的更改。

接下来，VS 将询问您要撤消的实际更改的文件或不是特定文件。

在这种情况下，您可以为发生实际更改的此类文件单击否，其余的只是撤消。这不会丢失您的实际更改

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-24T22:44:50.203

您需要在此处执行两个步骤才能获得完整的解决方案

首先单击您打开的解决方案，然后转到文件-> 源代码管理-> 联机然后取消选中所有在您脱机时显示为正在修改的文件。

不要从源代码管理资源管理器中获取最新版本。这将导致一个对话框可能显示一堆文件，要求您解决冲突。而是这样做

在源代码控制资源管理器中，右键单击要获取最新的文件夹，然后单击高级 - 获取特定版本。在版本类型的下拉列表中选择最新，然后选择第一个复选框，上面写着覆盖未签出的可写文件。这将自动使您的文件夹与服务器上的最新文件夹同步

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-14T09:07:56.623

我用我的一种方法是“添加到源代码管理”，然后选择“Git”。

# iphone - 如何将 UITableViewCell 导出到图像中？

> ID：13681811
> 
> 赞同：0
> 
> 时间：2012-12-03T10:57:44.190
> 
> 标签：iphone, objective-c, ios, uitableview, printscreen

我需要将 UITableViewCell 导出为 PNG 或任何图像，以便我可以使用 MFMailComposerViewController 将其作为嵌入在电子邮件正文中的打印屏幕图像发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:59:55.033

使用这些方法。打电话`UIImage *image = [cell screenshot];`

```
- (UIImage *)screenshot
{
    return [self screenshotForRect:self.bounds];
}

- (UIImage *)screenshotForRect:(CGRect) rect
{
    UIGraphicsBeginImageContext(rect.size);
    [[UIColor clearColor] setFill];
    [[UIBezierPath bezierPathWithRect:rect] fill];
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [self.layer renderInContext:ctx];
    UIImage *anImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    
    return anImage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:59:30.863

尝试这样的事情：

```
UIGraphicsBeginImageContext(yourTableViewCellView.bounds.size);
[yourTableViewCellView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

然后您可以将图像保存到数据:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:59:41.053

```
- (UIImage *)captureCell {

    //hide controls if needed
CGRect rect = [yourTableCell bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [yourTableCell.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;

} 
```

# android - TextWatcher，当光标在任何字母之间时如何检测单词？

> ID：13681812
> 
> 赞同：0
> 
> 时间：2012-12-03T10:57:47.930
> 
> 标签：android, android-edittext, textwatcher

我正在使用 TextWatcher 来跟踪 edittext 单词。我想要的是能够检测到何时写了一个单词，然后将一个字符添加到单词的开头。

例如，我想输入“hello”，在“hello”完成的那一刻，我需要添加一个“-”前缀，所以最后的单词是“-hello”。

我不确定这是否可以通过 TextWatcher 完成。可以吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:02:21.050

是的你可以。只需检查用户输入的字母是否与您预定义的指定单词列表匹配，然后只需添加“-”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:07:45.990

如果你想检测 a`word`那么你必须检测到用户有`pressed the space`按钮，你可以简单地添加`character`at`start of the word`

# c# - 如何在 C# 中为基于 Web 的应用程序编写 Active X 控件？

> ID：13681814
> 
> 赞同：1
> 
> 时间：2012-12-03T10:57:53.577
> 
> 标签：c#, asp.net, visual-studio-2010, activex

> **可能重复：**
> [单线程单元 - 无法实例化 ActiveX 控件](https://stackoverflow.com/questions/1418466/single-threaded-apartment-cannot-instantiate-activex-control)

我正在开发一个`Asp.net`基于 Web 的模板应用程序`Visual Studio 2010`。该应用程序的目的是从`ID Tech card swipper`.

```
#Default.aspx:
# It contain a Button
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<h2>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
</h2> </asp:Content> 
```

而以下是`.cs`文件：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using AxOposMSR_CCO;

namespace WebApplication1
{   
public partial class _Default : System.Web.UI.Page
{
    AxOPOSMSR axOPOSMSR = new AxOPOSMSR();
    protected void Page_Load(object sender, EventArgs e)
    {

    }

   protected void Button1_Click(object sender, EventArgs e)
     {
        if (axOPOSMSR.Open("IDTECH_SECUREMAG_USBKB") == 0)
        {
            axOPOSMSR.ClaimDevice(100);
            axOPOSMSR.DeviceEnabled = true;
            axOPOSMSR.DataEventEnabled = true;
            Console.WriteLine("cons called");

        }

    }
} 
```

}

当我尝试运行这个项目时，它显示：

```
ActiveX control 'ccb90122-b81e-11d2-ab74-0040054c3719' cannot be 
instantiated because the current thread is not in a single-threaded apartment. 
```

我用谷歌搜索它，它表明我必须创建一个`Active X`控制对象并在我的 Web 应用程序中使用该对象。我还关注了一些博客和教程，但没有得到更好的解释。

我是新手`C#`。我应该怎么做才能解决这个问题？

请在上述应用程序的上下文中向我解释。

# api - Android、Iphone、Windows 和 Blackberry API 搜索应用程序

> ID：13681820
> 
> 赞同：2
> 
> 时间：2012-12-03T10:58:09.663
> 
> 标签：api, blackberry, app-store, google-play, windows-phone

是否可以通过以下 API 搜索应用程序：1\. Android Market 2\. App Store 3\. Windows Phone App Store 4\. Blackberry App World 5\. Facebook App Store

如果是这样，您能否提供指向该部分的特定链接（不仅仅是开发页面）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:54:14.093

你可以使用 google api，或者一些简单的东西，例如你想在 android 市场搜索游戏得到这个游戏网站的结果：https: [//play.google.com/](https://play.google.com/) in google.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T06:38:19.867

```
For Apple App store---

https://itunes.apple.com/search?term=+<appname>+&entity=software

There are no public apis are available for Android, Windows, Blackberry.

Paid API For Android Apps--

42Matters

For Windows, Backberry, Facebook--

Do web scrapping by using CSQuery(or) html agility pack..
```

# android - Android 编辑文本 - 光标停留在起始位置

> ID：13681823
> 
> 赞同：7
> 
> 时间：2012-12-03T10:58:18.230
> 
> 标签：android, android-edittext

我在我的项目中使用编辑文本。

问题是，每当我在文本框中输入任何内容时，它都会显示出来，但无论我输入多少字符，光标都不会从其起始位置移动。此外，我无法通过单击文本框中的任何特定字符来移动。

我用于包含编辑文本的 xml 文件是这样的

```
<EditText
        android:id="@+id/xEt"
        android:layout_width="fill_parent"
        android:layout_height="295dp"
        android:layout_alignParentLeft="true"
        android:ems="10"
        android:focusableInTouchMode="true" 
android:focusable="true" > 
```

xml文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/xsubLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:keepScreenOn="true"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true" >

    </RelativeLayout>

    <EditText
        android:id="@+id/xEt"
        android:layout_width="wrap_content"
        android:layout_height="295dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:inputType="textMultiLine" >

        <requestFocus />
    </EditText>

</RelativeLayout>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content" android:id="@+id/xK1"
        android:layout_height="wrap_content" android:orientation="vertical"
        android:visibility="gone">
        <include android:id="@+id/xKeyBoard" layout="@layout/gf"></include>
        <include android:id="@+id/xtop" layout="@layout/top"></include>
                <include android:id="@+id/x11" layout="@layout/x1"></include>
        <include android:id="@+id/x12" layout="@layout/x3"></include>
        <include android:id="@+id/x13" layout="@layout/x4"></include>
        <include android:id="@+id/x14" layout="@layout/x5"></include>

        <include android:id="@+id/x15" layout="@layout/x6"></include>
        <include android:id="@+id/x16" layout="@layout/x7"></include>
        <include android:id="@+id/x17" layout="@layout/x8"></include>
        <include android:id="@+id/x18" layout="@layout/x9"></include>

        <include android:id="@+id/x19" layout="@layout/x10"></include>
        <include android:id="@+id/x20" layout="@layout/x11"></include>

        <include android:id="@+id/x22" layout="@layout/x13"></include>

        <include android:id="@+id/x23" layout="@layout/x14"></include>
        <include android:id="@+id/x24" layout="@layout/x15"></include>
        <include android:id="@+id/x25" layout="@layout/x16"></include>
        <include android:id="@+id/x26" layout="@layout/x17"></include>

        <include android:id="@+id/x27" layout="@layout/x18"></include>
        <include android:id="@+id/x28" layout="@layout/x19"></include>

    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-24T08:57:24.467

回答这个问题可能为时已晚。但即使我使用自定义键盘也遇到了同样的问题。在每个edittext的XML文件中添加以下行后，我也解决了这个问题

> android:imeOptions="flagNoExtractUi"
> 
> android:inputType="textNoSuggestions"

像这样

```
<Editext                
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:paddingLeft="2dp" 
 android:inputType="textNoSuggestions"
 android:imeOptions="flagNoExtractUi"/> 
```

我看到很多人在搜索这个，所以我已经发布到与我的问题相关的一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-28T20:35:18.790

就我而言，它是由使用引起的：

`android:textAllCaps="true"`

在我的 xml 布局的 EditText 元素中。

当我删除它时，它按预期工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-12T15:09:42.370

您是否将视图绑定到模型？即您有 MVVM 设置吗？

如果这样做，请确保您没有任何周期性更新，特别是对于双向绑定，即，如果用户键入一个字符，您将更新您的模型，这将反过来更新 EditText 控件并重复。

因此，根据您的 Editext 控件属性，每次模型更改更新它时，它可能会将光标重置到起始位置。

如果是这种情况，在从模型更新之前对模型值和 EditText 文本值进行简单的相等性检查应该可以解决问题。

```
if (txtEdit.text != modelValue)
{
    txtEdit.text = modelValue;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-21T15:08:01.960

我正在使用此解决方法来解决此问题，如果字符是英文或数字字符，则将 EditText 重力更改为向左，在我的情况下以另一种语言更改为阿拉伯语，然后将重力更改为左侧，光标将按照正确的方式移动每种语言：

```
 editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                if(s.length() > 0){
                    char c = s.charAt(0);
                     // characters are Enlgish or digits.
                    if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || Character.isDigit(c)) {
                        editText.setGravity(Gravity.LEFT);
                    }else {
                        editText.setGravity(Gravity.RIGHT);

                    }
                } 
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {

            }
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T11:10:52.497

将这些属性设置为您的 XML 文件

```
 <YourLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:focusable="true" 
     android:focusableInTouchMode="true">

  <EditText
    android:id="@+id/xEt"
    android:layout_width="fill_parent"
    android:layout_height="295dp"
    android:layout_alignParentLeft="true"
    android:ems="10"
    android:clickable="true"
    android:cursorVisible="true"/> 

</YourLayout> 
```

尝试这个。并将其放入您的Java代码中。

```
 EditText et = (EditText)findViewById(R.id.xEt);
 et.setSelection(et.getText().length()); 
```

# objective-c - 无法调用实例方法

> ID：13681824
> 
> 赞同：0
> 
> 时间：2012-12-03T10:58:20.280
> 
> 标签：objective-c, ios5

```
+(DetailViewController *) instance{
    return (DetailViewController *)[[UIApplication sharedApplication]delegate];
}

-(void)tapped:(UITapGestureRecognizer *)recognizer {
    [[DetailViewController instance]showViewInFullScreen:self withModel:self.messageModel];
} 
```

**细节视图控制器.m**

```
-(void)showViewInFullScreen:(UIViewExtention*)viewToShow withModel:(MessageModel*)model{
    [viewController showViewInFullScreen:viewToShow withModel:model];
} 
```

当我到达无法调用 DetailViewController 类中的 showViewInFullScreen 的点击方法时，应用程序正在以以下消息终止。

> NSInvalidArgumentException'，原因：
> 
> '-[AppDelegate showViewInFullScreen:withModel:]: 无法识别的选择器发送到实例

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:29:22.740

为什么要将您的应用程序委托投射到 DetailViewController 类？

如果要创建 DetailViewController 类的单例，则需要执行以下操作（假设您使用的是 ARC）：

```
+(DetailViewController *) instance{
    // Create a singleton instance of the class
    static DetailViewController *sharedInstance = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        sharedInstance = [[self alloc] init];
    });

    return sharedInstance;
    }
} 
```

# javascript - DataTables - Total rowCount - 如何减少列中的欧元符号？

> ID：13681825
> 
> 赞同：0
> 
> 时间：2012-12-03T10:58:21.077
> 
> 标签：javascript, jquery, datatable

对于我的 DataTable，我使用 fnFooterCallback 函数来显示列的总量，该函数一直有效，直到列包含特殊字符，例如在本例中为欧元价值符号。

如何调整此代码使其不会检测到欧元符号？

```
 "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {
        /*
         * Calculate the total market share for all browsers in this table (ie inc. outside
         * the pagination)
         */
        var iTotal = 0;
        for ( var i=0 ; i<aaData.length ; i++ )
        {
            iTotal += aaData[i][7]*1;
        }

        /* Calculate the market share for browsers on this page */
        var iPage = 0;
        for ( var i=iStart ; i<iEnd ; i++ )
        {
            iPage += aaData[ aiDisplay[i] ][7]*1;
        }

        /* Modify the footer row to match what we want */
        var nCells = nRow.getElementsByTagName('th');
        nCells[1].innerHTML = parseInt(iPage);
        } 
```

先感谢您。

**编辑** 没有检测到我的意思`str_replace`或类似的东西。不熟悉javascript语言..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:01:24.620

您可以轻松地使用替换：

```
result = somevar.replace(/\€/g, '') 
```

这将用''替换€。

# c# - 监控文本属性有效性作为用户类型

> ID：13681826
> 
> 赞同：0
> 
> 时间：2012-12-03T10:58:26.480
> 
> 标签：c#, .net, winforms, timer, textbox

[Winforms 应用程序 .NET 4.0 C#]

我有一个从手持条码扫描仪接收数据的文本框。

我希望我的应用程序检查文本是否有效，而无需用户执行任何操作。

示例规则：

*   文本长度 =18 并以 '1520' 开头
*   文本长度 =17 并以 '0520' 开头

我应该检查一下：

*   TextChanged 事件？
*   添加一个计时器以每 200-300 毫秒检查一次规则？

别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:00:06.513

`TextChanged`事件就足够了，我过去已经实现了类似的东西，您只会收到一次通知，因此您将在每次扫描时获得完整的条形码。

# jsf - 字符串包含jsf中的方法

> ID：13681831
> 
> 赞同：13
> 
> 时间：2012-12-03T10:58:55.840
> 
> 标签：jsf, jsf-2, el

我想知道如何在不使用 JSTL 的情况下在 jsf2 中使用/实现字符串包含方法。请指教，谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-03T11:14:32.387

```
<h:outputText value="#{'I love JSF'.contains('JSF')}" /> <!-- true --> 
```

或者

```
<h:outputText value="#{myBean.text.contains('some_word')}" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T11:23:09.080

此外，您还可以使用 JSTL 函数

添加这个：

```
xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
```

并像这样使用它

```
render="#{fn:contains(myBean.myText, 'test')}" 
```

# wcf - WCF：如何确定是否调用了服务？

> ID：13681835
> 
> 赞同：1
> 
> 时间：2012-12-03T10:59:01.240
> 
> 标签：wcf

我有一个要求，我应该编写由另一个外部服务调用的 WCF 服务，该代码不受我的控制。我只知道我的服务是由该外部服务以这种方式调用的：

```
string content = client.getData("http://localhost:1111/Service.svc", param); 
```

我的服务位于实际上是外部服务方法中的第一个参数的地址，这意味着我的服务在外部服务方法体内的某个位置被调用。

所以，我的问题是 - 如何在我的服务内部通知我的服务被该外部服务调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:07:57.140

1）您可以为不同的客户端（真实客户端和外部服务）创建两个端点

2）您可以编写特定的行为并通过附加参数来实现功能，这些参数只会变成行为

# javascript - 日期选择器只有月份和年份

> ID：13681837
> 
> 赞同：1
> 
> 时间：2012-12-03T10:59:06.617
> 
> 标签：javascript, jquery, datepicker

我想要一个日期选择器，用户只能从日期选择器中选择月份和年份，并且我还需要使用从上一个日期选择器中选择的月份和年份来限制下一个日期选择器。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:28:13.693

肖恩的回答非常好，如果你也想禁用日期选择，你可以使用不同的方法，你可以在[这个小提琴](http://jsfiddle.net/gL7uW/12/)中看到结果：

日历是隐藏的，所以你只能选择月份和年份。在第一个日期选择器中选择日期时，第二个日期选择器的 minDate 正在适应。

**编辑**

当 dateformat 不提供日期时，jQuery datepicker 会出现严重问题。我更改了代码以使其工作。唯一的问题是在打开日期选择器时，我必须将日期转换为合适的格式。看看新的小提琴。

HTML：

```
<p>Date: <input type="text" id="first-datepicker"/></p>
<p>Date: <input type="text" id="second-datepicker"/></p> 
```

CSS：

```
#ui-datepicker-div .ui-datepicker-calendar,
#ui-datepicker-div .ui-datepicker-current
{
    display: none !important;
} 
```

JAVASCRIPT：

```
$('#first-datepicker').datepicker({
    changeYear: true,
    changeMonth: true,
    beforeShow: function (input, inst) {
        setMyDate(inst);
    },
    onClose: function (dateText, inst) {
        saveMyDate(inst);

        var secondDatePicker = $('#second-datepicker').data('datepicker');
        var dateSetted = secondDatePicker.input.data('date-setted');

        setMyDate(secondDatePicker);

        secondDatePicker.input.datepicker('option', 'minDate', new Date(inst.selectedYear, inst.selectedMonth, 0));     

        if (dateSetted == true) {
            saveMyDate(secondDatePicker);
        };
    }
});

$('#second-datepicker').datepicker({
    changeYear: true,
    changeMonth: true,
    beforeShow: function (input, inst) {
        setMyDate(inst);
    },
    onClose: function (dateText, inst) {
        saveMyDate(inst);
    }
});

function saveMyDate(inst) {
    inst.selectedDay = 1;
    inst.input.data('year', inst.selectedYear);
    inst.input.data('month', inst.selectedMonth);
    inst.input.data('day', inst.selectedDay );

    var date = new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay);
    inst.input.datepicker('setDate', date );
    formatDate(inst, date);
    inst.input.data('date-setted', true);
};

function setMyDate(inst) {
    var dateSetted = inst.input.data('date-setted');

    if (dateSetted == true) {
        var year = inst.input.data('year');
        var month = inst.input.data('month');
        var day = inst.input.data('day');

        var date = new Date(year, month, day);
        inst.input.datepicker('setDate', date );
    };
};

function formatDate(inst, date) {
    var formattedDate = $.datepicker.formatDate('MM - yy', date);
inst.input.val(formattedDate);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:02:03.363

您可以使用这个monthpicker jquery 小部件：[https ://github.com/lucianocosta/jquery.mtz.monthpicker](https://github.com/lucianocosta/jquery.mtz.monthpicker)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:13:25.417

您可以修改 jQuery datepicker 以仅允许用户选择某些日期，在这种情况下，我们可以将其限制为每月的第一天：

```
$(".datepicker").datepicker({
    beforeShowDay: disableDaysExceptFirst
})

function disableDaysExceptFirst(date) {
    if (date.getDate() != 1) {
        return [false, date.getDate().toString() + "_day"];
    }
    return [true, ""];
} 
```

您还可以修改选项以不同方式显示日期：

```
$(".datepicker").datepicker({
    dateFormat: 'mm/yy'
}); 
```

将两者结合起来，我们得到：

```
$(".datepicker").datepicker({
    beforeShowDay: disableDaysExceptFirst,
    dateFormat: 'mm/yy'
})

function disableDaysExceptFirst(date) {
    if (date.getDate() != 1) {
        return [false, date.getDate().toString() + "_day"];
    }
    return [true, ""];
} 
```

您还可以使用它来限制您的第二个日期选择器：

```
var restrictedMonth = parseInt($("#myFirstDatePicker").text().split("/")[0]); //replace myFirstDatePicker with the HTML ID of the text input your datepicker is attached to

$("#myFirstDatePicker").datepicker({
    beforeShowDay: disableAllExceptCurrentMonth,
    dateFormat: 'dd/mm/yy' //swap mm and dd for US dates
});

function disableAllExceptCurrentMonth(date) {
    if (date.getMonth() != restrictedMonth) {
        return [false, date.getDate().toString() + "_day"];
    }
    return [true, ""];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-13T13:37:31.567

如果您可以在 html5 中工作，我建议您对较新的浏览器使用新月份的输入支持

只需使用并让魔法发生。

[https://developer.mozilla.org/fr/docs/Web/HTML/Element/Input/month](https://developer.mozilla.org/fr/docs/Web/HTML/Element/Input/month)

# php - 简码在自定义元框中不起作用

> ID：13681838
> 
> 赞同：2
> 
> 时间：2012-12-03T10:59:07.837
> 
> 标签：php, wordpress, shortcode

我遇到了 WordPress 元框的问题。实际上，我正在使用 WordPress Genesis 框架，在子主题中，我为我的客户创建了一些元框，以便在页面内容之前显示一些内容，但是在自定义元框中，我使用的是 wp-editor 并且它工作正常。但问题是，当我尝试在这个 wp-editor 中使用一些简码时，它不会向我显示任何内容，它只是按原样返回整个简码。

我正在使用[https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)自定义元框。

我的代码在**function.php**文件中：

```
/* -------------------------------------------------------------------------- */
/* Setup Custom metaboxes                                                     */
/* -------------------------------------------------------------------------- */
add_action( 'init', 'be_initialize_cmb_meta_boxes', 9999 );

function be_initialize_cmb_meta_boxes() {
    if ( !class_exists( 'cmb_Meta_Box' ) ) {
        require_once( CHILD_DIR . '/lib/metabox/init.php' );
    }
}

add_filter( 'cmb_meta_boxes', 'cmb_sample_metaboxes' );

function cmb_sample_metaboxes( array $meta_boxes ) {

    // Start with an underscore to hide fields from custom fields list
    $prefix = '_cmb_';

    $meta_boxes[] = array(
        'id'         => 'text_content',
        'title'      => 'Text Content',
        'pages'      => array( 'page', ), // Post type
        'context'    => 'normal',
        'priority'   => 'high',
        'show_names' => true, // Show field names on the left
        'fields'     => array(
            array(
                'name' => 'Custom Content',
                'desc' => 'This is a title description',
                'id'   => $prefix . 'custom_content',
                'type' => 'title',
            ),  
            array(
                'name' => 'Tab Name',
                'desc' => 'Please descibe the tab name (required)',
                'id'   => $prefix . 'tab_name',
                'type' => 'text',
            ),
            array(
                'name'    => 'Test wysiwyg',
                'desc'    => 'field description (optional)',
                'id'      => $prefix . 'test_wysiwyg',
                'type'    => 'wysiwyg',
                'options' => array( 'textarea_rows' => 5, ),
            ),
        ),
    );

    return $meta_boxes;
} 
```

我将**page.php**中的代码保存为：

```
add_action('genesis_before_loop', 'ehline_before_loop_content');

function ehline_before_loop_content() 
{
    echo genesis_get_custom_field( '_cmb_tab_name' );
    echo '<br />';
    echo genesis_get_custom_field( '_cmb_test_wysiwyg' );
}
genesis(); 
```

但是当我在这个元框中使用简码时，它会返回类似的东西

```
[wptabtitle] Tab 01[/wptabtitle] [wptabcontent]test[/wptabcontent] 
```

请任何人告诉我如何让它在 wp-editor 中使用短代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:01:16.263

您需要调用`do_shortcode()`自定义字段的内容。更新后的代码如下所示：

```
add_action('genesis_before_loop', 'ehline_before_loop_content');

function ehline_before_loop_content() 
{
    echo do_shortcode( genesis_get_custom_field( '_cmb_tab_name' ) );
    echo '<br />';
    echo do_shortcode( genesis_get_custom_field( '_cmb_test_wysiwyg' ) );
}
genesis(); 
```

此外，这不会添加您通常会在帖子内容中看到的自动段落。你可以做两件事：

```
echo apply_filters( 'the_content', genesis_get_custom_field( '_cmb_tab_name' ) ); 
```

或者

```
echo wpautop( do_shortcode( genesis_get_custom_field( '_cmb_tab_name' ) ) ); 
```

理论上第一个应该更好，但有时您可能会从与`the_content`过滤器挂钩的函数中获得额外的输出。

# .htaccess - .htaccess - 没有 index.php 的查询字符串

> ID：13681841
> 
> 赞同：1
> 
> 时间：2012-12-03T10:59:16.803
> 
> 标签：.htaccess, get, seo, rewrite, query-string

我希望我的网址看起来像这样：“http://www.example.com/start”，而不是这样：“http://www.example.com/index.php/start”。这适用于我的 .htaccess 中的这段代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 
```

在一个页面上，我必须使用 GET-Parameters，网址应该如下所示：“http://www.example.com/artists/picasso”，而不是这样：“http://www.example.com /index.php/artists?artist=picasso" 也可以使用以下代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /index.php?/$1
RewriteRule ^artists/(.*)$ /index.php/artists?artist=$1 [L] 
```

现在，这个解决方案的问题是，所有其他 url 现在必须以斜杠结尾。所以它必须看起来像这样：“http://www.example.com/start/”，
而不是这样：“http://www.example.com/start”

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:50:36.000

尝试将您的规则更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !artists/
RewriteRule ^(.*?)/?$ /index.php?/$1
RewriteRule ^artists/(.*)$ /index.php/artists?artist=$1 [L] 
```

主要是，您`/$`的模式末尾有 a：`RewriteRule ^(.*)/$ /index.php?/$1`这意味着它必须以斜杠结尾才能匹配模式。将其更改为`(.*?)/?$`使其可选。

# iphone - 如何从 messageviewcontroller 中删除状态栏？

> ID：13681847
> 
> 赞同：0
> 
> 时间：2012-12-03T10:59:30.603
> 
> 标签：iphone, ios

我正在从我的视图控制器以编程方式发送短信，但现在它向我显示状态栏和垂直黑线

我的代码：

```
- (IBAction)SendTextBtnTapped:(id)sender {
    [self sendSMS:@"Body of SMS..." recipientList:[NSArray arrayWithObjects: nil]];
}

- (void)sendSMS:(NSString *)bodyOfMessage recipientList:(NSArray *)recipients
{
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = bodyOfMessage;    
        controller.recipients = recipients;
        controller.messageComposeDelegate = self;
        [self presentModalViewController:controller animated:YES];
    }    
}

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    [self dismissModalViewControllerAnimated:YES];

    if (result == MessageComposeResultCancelled)
        NSLog(@"Message cancelled");
    else if (result == MessageComposeResultSent)
        NSLog(@"Message sent");  
    else 
        NSLog(@"Message failed");
} 
```

![在此处输入图像描述](../Images/37ab079ef1150b0011961de6bba83aad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:01:54.343

只需添加这一行

```
controller.wantsFullScreenLayout = YES; 
```

**或**在当前 MessageViewController 之后添加此行，如下所示。

```
[self presentModalViewController:controller animated:YES];
[[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

**或者**对于整个视图控制器，使用下面的登录`viewWillAppear:`粘贴此代码..

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:02:19.053

我认为您可以使用[WantsFullScreenLayout](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

```
MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
if([MFMessageComposeViewController canSendText])
{
    controller.body = bodyOfMessage;    
    controller.recipients = recipients;
    controller.messageComposeDelegate = self;
    controller.wantsFullScreenLayout = YES;  //<== add this
    [self presentModalViewController:controller animated:YES];
} 
```

# oracle - 动态将表中的数据检索到jsp中

> ID：13681848
> 
> 赞同：0
> 
> 时间：2012-12-03T10:59:31.420
> 
> 标签：oracle, jsp, jdbc

我有以下代码从 Oracle 表中检索数据。这工作正常。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@include file="DBCon.jsp" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body><table>
        <%
        String a=request.getParameter("type").trim();
        String b=request.getParameter("user").trim();
        String c=request.getParameter("from").trim();
        String d=request.getParameter("to").trim();
        ResultSetMetaData rsmd;
        String st="SELECT type, Hari, Rakesh, Total FROM (select (type),  max( decode( SPECIALIST, 'Hari', cnt, null ) ) Hari,  max( decode( SPECIALIST, 'Rakesh', cnt, null ) ) Rakesh,  Sum(cnt) total  from ( select (type),specialist, sum(update_count) cnt  from scope1 where (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"')  group by (type),specialist ) q  group by (type)  Union Select 'Total' as type, Sum(Hari) Hari,Sum(Rakesh) Rakesh,Sum(total) Total from (  select (type),  max( decode( SPECIALIST, 'Hari', cnt, null ) ) Hari,  max( decode( SPECIALIST, 'Rakesh', cnt, null ) ) Rakesh,  Sum(cnt) total  from ( select (type),specialist, sum(update_count) cnt  from scope1 where (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"')  group by (type),specialist ) q  group by (type)  )a) b Order by Total";        
try{%>
        <tr><b><%=b%></b></tr><%
            //String sql=(st);
            //out.print(sql);
            ps1=con.prepareStatement(st);
            rs1=ps1.executeQuery();
            rsmd=rs1.getMetaData();
            int cou=rsmd.getColumnCount();
            for(int i=1;i<cou;i++){
            %>
        <td><%=rsmd.getColumnName(i)%>
        <%
                   }
            %>
        <td>Total</td>
        <%
            while(rs1.next())
            {
            %>

            <tr><td><b><%=rs1.getString(1)%></b></td><td><%=rs1.getString(2)%></td><td><%=rs1.getString(3)%></td><td><%=rs1.getString(4)%> </td></tr>
            <%
            }
        }
        catch(Exception e)
        {
            out.println(e);
}
%>
   </table> </body>
</html> 
```

但是在这里，我需要你们的帮助，我可以使下面的陈述动态化。

```
<tr><td><b><%=rs1.getString(1)%></b></td><td><%=rs1.getString(2)%></td><td><%=rs1.getString(3)%></td><td><%=rs1.getString(4)%> </td></tr> 
```

这里使用的sql语句如下。

```
SELECT type, Hari, Rakesh, Total FROM (select (type),  max( decode( SPECIALIST, 'Hari', cnt, null ) ) Hari,  max( decode( SPECIALIST, 'Rakesh', cnt, null ) ) Rakesh,  Sum(cnt) total  from ( select (type),specialist, sum(update_count) cnt  from scope1 where (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"')  group by (type),specialist ) q  group by (type)  Union Select 'Total' as type, Sum(Hari) Hari,Sum(Rakesh) Rakesh,Sum(total) Total from (  select (type),  max( decode( SPECIALIST, 'Hari', cnt, null ) ) Hari,  max( decode( SPECIALIST, 'Rakesh', cnt, null ) ) Rakesh,  Sum(cnt) total  from ( select (type),specialist, sum(update_count) cnt  from scope1 where (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"')  group by (type),specialist ) q  group by (type)  )a) b Order by Total 
```

我希望检索数据，例如

```
<%=rs1.getString(i)%> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:47:50.497

```
<%
for (int i = 1; i < 5; i++) {
%>

<td><%= rs1.getString(i) %></td>

<%
}
%> 
```

但是我永远不会那样做。JSP 不应使用 scriptlet。他们不应该执行数据库查询。他们唯一的工作应该是使用存储在请求属性中的对象生成 HTML 标记。

SQL 查询应该在您首选的 MVC 框架的 servlet 或操作中。该 servlet 将获取数据，将其存储在 a 中`List<MyObject>`，将此列表放入请求属性中，然后转发给 JSP。

然后，JSP 将使用 JSTL 和 JSP EL（以及其他自定义标记，如果需要）来显示这个`List<MyObject>`.

# html - html5视频搜索，很慢

> ID：13681849
> 
> 赞同：2
> 
> 时间：2012-12-03T10:59:34.423
> 
> 标签：html, video

我制作了一个 html5 视频播放器，我注意到如果当前播放的视频有点大，搜索时间会非常长。

越接近终点，寻找的时间越长；独立于我之前是否去过那里/与当前时间点有多接近，或者我是否缓冲了整个视频。

当我在视频中搜索大约 2 分钟时，在带有 1080p 视频的慢速浏览器上，这可能需要长达 15 秒的时间。

这是正常的还是我做错了什么？*我能做点什么吗*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:17:23.100

在哪个浏览器上？不同的浏览器支持不同的视频格式和编解码器。此外，HTML5 视频元素使用 GPU 硬件加速，因此性能确实取决于硬件

# css - 为什么我的元素只适用于浮动右侧（而不是左侧）

> ID：13681851
> 
> 赞同：0
> 
> 时间：2012-12-03T10:59:47.950
> 
> 标签：css, css-float

如果我设置`firstGroup`为`float: right`，我会得到两列，第一组在右侧，如预期的那样。但是，如果我将其设置为`float: left`，我只会将以下元素卡在第一个元素的底部！

注意：我需要一直支持到 IE7，所以没有`column-count`.

这是我的页面的一个大大简化的版本（我只留下了相关的块元素，只给出了几个示例项目）：

```
<!DOCTYPE html>
<html>
<head>
    <title>Take</title>
    <style type="text/css">
        .group
        {
            margin-bottom: 20px;
            width: 50%;
            min-width: 530px;
        }

        .group > .group
        {
            margin-bottom: 0px;
        }

        .group > .label
        {
            display: block;
            width: 510px;
            padding: 5px;
            border: 1px solid black;
        }

        .firstGroup
        {
            float: left;
        }

        .item
        {
            display: block;
            width: 510px;
            padding: 5px;
            border: 1px solid black;
        }

        .item .label
        {
            display: block;
            float: left;
            width: 200px;
            height: 20px;
        }

        .header textarea
        {
            display: block;
        }

        .header
        {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="page">
        <div class="main">
            <h2>Title</h2>
            <form>
                <div class="header">
                    Notes :
                    <textarea name="Notes"></textarea>
                </div>
                <div class="group firstGroup">
                    <span class="label" style="background-color: #005588; color: white;">List 1</span>
                    <div class="group">
                        <span class="label" style="background-color: #999999; color: #000000;">Sub List 1</span>

                        <span class="item" style="background-color: #339933; color: #000000;">
                            <span class="label">Item 1</span>
                            <span class="options">
                                <span class="option"><input name="item[0].itemResultID" type="radio" value="0" checked="checked" />N/A</span>
                                <span class="option"><input name="item[0].itemResultID" type="radio" value="1" />Yes</span>
                                <span class="option"><input name="item[0].itemResultID" type="radio" value="2" />No</span>
                            </span>
                            <span class="notes"><input type="text" name="item[0].TestNotes" value="" /></span>
                        </span>

                        <span class="item" style="background-color: #339933; color: #000000;">
                            <span class="label">Item 2</span>
                            <span class="options">
                                <span class="option"><input name="item[1].itemResultID" type="radio" value="0" checked="checked" />N/A</span>
                                <span class="option"><input name="item[1].itemResultID" type="radio" value="1" />Yes</span>
                                <span class="option"><input name="item[1].itemResultID" type="radio" value="2" />No</span>
                            </span>
                            <span class="notes"><input type="text" name="item[1].TestNotes" value="" /></span>
                        </span>

                        <span class="item" style="background-color: #339933; color: #000000;">
                            <span class="label">Item 3</span>
                            <span class="options">
                                <span class="option"><input name="item[2].itemResultID" type="radio" value="0" checked="checked" />N/A</span>
                                <span class="option"><input name="item[2].itemResultID" type="radio" value="1" />Yes</span>
                                <span class="option"><input name="item[2].itemResultID" type="radio" value="2" />No</span>
                            </span>
                            <span class="notes"><input type="text" name="item[2].TestNotes" value="" /></span>
                        </span>
                    </div>
                    <div class="group">
                        <span class="label" style="background-color: #999999; color: #000000;">Sub List 2</span>

                        <span class="item" style="background-color: yellow; color: #000000;">
                            <span class="label">Item 1</span>
                            <span class="options">
                                <span class="option"><input name="item[3].itemResultID" type="radio" value="0" checked="checked" />N/A</span>
                                <span class="option"><input name="item[3].itemResultID" type="radio" value="1" />Yes</span>
                                <span class="option"><input name="item[3].itemResultID" type="radio" value="2" />No</span>
                            </span>
                            <span class="notes"><input type="text" name="item[3].TestNotes" value="" /></span>
                        </span>
                    </div>
                </div>
                <div class="group">
                    <span class="label" style="background-color: red; color: white;">List 2</span>

                    <span class="item" style="background-color: #339933; color: #000000;">
                        <span class="label">Item 1</span>
                        <span class="options">
                            <span class="option"><input name="item[4].itemResultID" type="radio" value="0" checked="checked" />N/A</span>
                            <span class="option"><input name="item[4].itemResultID" type="radio" value="1" />Yes</span>
                            <span class="option"><input name="item[4].itemResultID" type="radio" value="2" />No</span>
                        </span>
                        <span class="notes"><input type="text" name="item[4].TestNotes" value="" /></span>
                    </span>

                    <span class="item" style="background-color: #339933; color: #000000;">
                        <span class="label">Item 2</span>
                        <span class="options">
                            <span class="option"><input name="item[5].itemResultID" type="radio" value="0" checked="checked" />N/A</span>
                            <span class="option"><input name="item[5].itemResultID" type="radio" value="1" />Yes</span>
                            <span class="option"><input name="item[5].itemResultID" type="radio" value="2" />No</span>
                        </span>
                        <span class="notes"><input type="text" name="item[5].TestNotes" value="" /></span>
                    </span>
                </div>
                <input type="submit" value="Submit" />
            </form>
        </div>
    </div>
</body>
</html> 
```

我已经在 FF 8 和 IE 9 中进行了测试，两者的行为相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:53:51.593

你应该漂浮**`.group`**而不仅仅是`.firstGroup`

# android - 运行 Android 应用程序时出现 Intel HAXM 和内存不足错误

> ID：13681853
> 
> 赞同：2
> 
> 时间：2012-12-03T10:59:48.790
> 
> 标签：android, android-emulator, out-of-memory, intel

在英特尔 HAXM 仿真器上运行我们的应用程序时，我们遇到内存不足错误。同时，当我们在通常的 android ARM Emulator 中运行它时，应用程序是稳定的。错误日志是：

```
12-03 12:13:20.258: ERROR/AndroidRuntime(3048): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity ComponentInfo{coza.sintez.xplat/coza.sintez.xplat.activity.fields.NumberFieldActivity}: android.view.InflateException: Binary XML file line #4: Error inflating class <unknown>
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
        at android.app.ActivityThread.access$1500(ActivityThread.java:117)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3683)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: android.view.InflateException: Binary XML file line #4: Error inflating class <unknown>
        at android.view.LayoutInflater.createView(LayoutInflater.java:518)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
        at android.view.LayoutInflater.parseInclude(LayoutInflater.java:682)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:619)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
        at android.app.Activity.setContentView(Activity.java:1657)
        at coza.sintez.xplat.activity.fields.NumberFieldActivity.onCreate(NumberFieldActivity.java:51)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
        ... 11 more
        Caused by: java.lang.reflect.InvocationTargetException
        at java.lang.reflect.Constructor.constructNative(Native Method)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
        at android.view.LayoutInflater.createView(LayoutInflater.java:505)
        ... 26 more
        Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
        at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
        at android.content.res.Resources.loadDrawable(Resources.java:1709)
        at android.content.res.Resources.getDrawable(Resources.java:581)
        at android.graphics.drawable.InsetDrawable.inflate(InsetDrawable.java:103)
        at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
        at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:172)
        at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
        at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
        at android.content.res.Resources.loadDrawable(Resources.java:1694)
        at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
        at android.view.View.<init>(View.java:1951)
        at android.widget.TextView.<init>(TextView.java:350)
        at android.widget.Button.<init>(Button.java:108)
        at android.widget.Button.<init>(Button.java:104)
        ... 29 more
12-03 12:13:20.318: WARN/ActivityManager(851): Force finishing activity coza.sintez.xplat/.activity.fields.NumberFieldActivity 
```

所有活动都经过优化，不使用大位图。DDMS 内存分析器也不显示任何内存泄漏。

我们还注意到，如果我们第一次运行应用程序，它可以执行一些任务（例如导航到某个活动）。但是，如果我们完全重新安装应用程序并再次运行，它会无法执行相同的任务。似乎英特尔仿真器没有正确释放内存。有没有人有同样的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:02:56.063

由：java.lang.OutOfMemoryError：位图大小超过 VM 预算

显然位图大小超过了 VM 预算，并且当您第二次运行您的应用程序时，位图工厂仍然在工厂中保存该图像，这实际上是在 VM 预算中。

删除位图 onDestroy Activity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:06:57.293

在您的代码`java.lang.OutOfMemoryError: Bitmap Size Exceeds VM Budget`中出现错误

检查此[线程](https://stackoverflow.com/questions/4611822/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget)以获取更多解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:35:01.590

不要`Out of memory`对 AVD 中的错误而不是另一个错误感到惊讶。

每个 AVD 都有自己的最大堆内存配置，而您使用英特尔模拟器的原因仅仅是为您的应用程序提供的默认最大堆内存小于 ARM 模拟器提供的最大堆内存。

您可以使用以下命令检查应用程序可用的堆内存：

```
Log.d(TAG,"Heap size: " + Runtime.getRuntime().maxMemory()); 
```

尽管您可以在模拟器中控制堆大小并使其在两者中运行，但您不能为用户设备执行此操作。

因此，如果您要跟踪堆大小较小的设备，则需要检查您的代码并确保它适合该内存量。否则，您可以指定应用程序所需的最小堆数`AndroidManifest.xml`，它只会显示合适的设备。

问候。

# java - StringBuilder 格式化程序

> ID：13681856
> 
> 赞同：-2
> 
> 时间：2012-12-03T10:59:57.850
> 
> 标签：java

`StringBuilder.append`对于大型 SQL 语句看起来很难看，并且格式化附加需要这么多时间有没有简单的方法在 Java中格式化`StringBuilder`/`StringBuffer`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:05:54.290

`String.format`可能有助于使代码更具可读性：

```
String sql = String.format("select * from %s where %s = ?;", table, field); 
```

`StringBuilder`替代方案：

```
String sql = new StringBuilder("select * from ")
                  .append(table)
                  .append(" where ")
                  .append(field)
                  .append(" = ")
                  .append("?")
                  .toString(); 
```

# css - 通过 CSS 模糊图像？

> ID：13681857
> 
> 赞同：58
> 
> 时间：2012-12-03T10:59:59.730
> 
> 标签：css, image, effects

在许多智能手机（以三星 Galaxy II 为例）上，当您浏览照片库时，其模糊的副本会显示在背景中。这可以通过 CSS 动态实现吗（即，没有预先准备好的照片副本）？是否有任何复杂的 CSS 图像过滤器来模糊图像？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-03T11:05:04.057

您可以使用[CSS3 过滤器](http://www.inserthtml.com/2012/06/css-filters/)。它们相对容易实现，尽管目前仅在 webkit 上受支持。不过三星 Galaxy 2 的浏览器应该支持，因为我认为那是 webkit 浏览器？

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-19T11:59:05.577

使用 CSS3，我们可以轻松调整图像。但请记住，这不会改变图像。它只显示调整后的图像。

有关详细信息，请参阅以下代码。

使图像变灰：

```
img {
 -webkit-filter: grayscale(100%);
} 
```

给一个棕褐色的外观：

```
img {
 -webkit-filter: sepia(100%);
} 
```

调整亮度：

```
img {
 -webkit-filter: brightness(50%);
} 
```

调整对比度：

```
img {
 -webkit-filter: contrast(200%);
} 
```

模糊图像：

```
img {
 -webkit-filter: blur(10px);
} 
```

您还应该为不同的浏览器执行此操作。那就是包括所有的css语句

```
 filter: grayscale(100%);
 -webkit-filter: grayscale(100%);
 -moz-filter: grayscale(100%); 
```

使用多个

```
 filter: blur(5px) grayscale(1); 
```

[Codepen 演示](https://codepen.io/rajnandan1/pen/LqzeQz)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-15T11:47:20.123

此代码适用于所有浏览器的模糊效果。

```
filter: blur(10px);
-webkit-filter: blur(10px);
-moz-filter: blur(10px);
-o-filter: blur(10px);
-ms-filter: blur(10px); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-17T23:06:07.607

是的，使用以下代码将允许您对指定的图像应用模糊效果，并且它还允许您选择模糊量。

```
img {
  -webkit-filter: blur(10px);
    filter: blur(10px);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-19T13:29:28.387

CSS3 过滤器目前仅适用于 webkit 浏览器（safari 和 chrome）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-05T18:41:59.333

```
img {
  filter: blur(var(--blur));
} 
```

# symfony - Smarty 与 Twig 的区别

> ID：13681863
> 
> 赞同：1
> 
> 时间：2012-12-03T11:00:20.253
> 
> 标签：symfony, smarty, twig

我的团队开始使用 CMS 开发一些新的中型网站，我们有自定义开发的 CMS，但我们被迫在这个特定项目中使用 Symfony2，因为我们有很多不同的代码可以在新项目中重用.

所以我想问一下：（`Smarty` 我们在CMS中使用它）和`Twig`（在Symfony2中使用）有什么区别？你会建议从`Smarty`into重写功能`Twig`，或者只是将一些`Smarty`库（包）添加到 Symfony 中（如果有的话）？

它们之间有很大的区别吗？在快速阅读`Twig`文档之后，它们之间的语法似乎没有太大的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:08:41.040

我不知道你有多少 Smarty 文件，但如果你有一些文件，我建议将它们重写为 Twig，因为这是在 Symfony2 中优化的默认模板引擎。如果你有很多文件，我建议在 Symfony2 中添加 Smarty 作为模板引擎（使用[Noiselabs/SmartyBundle](http://knpbundles.com/noiselabs/SmartyBundle)）并为你的模板使用 Smarty。

# login - 水豚测试无法登录

> ID：13681864
> 
> 赞同：2
> 
> 时间：2012-12-03T11:00:21.177
> 
> 标签：login, capybara

```
describe "create post", :js => true do
  before :each do
  a = User.create!(:email => 'any@gmail.com', :password => 'admin123', :password_confirmation => 'admin123', :firstname => "black")
  a.confirm!
end

it "signs me in" do

  get root_path
  visit '/'
   within(".form-inline") do
     fill_in 'Email', :with => 'any@gmail.com'
     fill_in 'Password', :with => 'admin123'        
   end
   click_button 'Sign in'

    save_and_open_page
  end
 end 
```

当我使用 rake spec:requests 执行时

我无法登录，我在浏览器中收到无效的电子邮件或密码错误。请告诉我该怎么办？

# winapi - 如何在 vc++ 中获取 USB 存储设备的详细信息

> ID：13681873
> 
> 赞同：0
> 
> 时间：2012-12-03T11:00:38.963
> 
> 标签：winapi, visual-c++

我想在 vc++ 中开发一个应用程序，我想使用它来显示连接到我的电脑的所有 USB 存储设备的详细信息。请告诉我是否有可用的 API。任何帮助将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:21:37.837

您可以使用这些[`SetupAPI`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550855%28v=vs.85%29.aspx)方法（尝试这些函数[SetupDiGetClassDevs](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069%28v=vs.85%29.aspx)、[SetupDiEnumDeviceInfo](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551010%28v=vs.85%29.aspx)、[SetupDiGetDeviceProperty](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551963%28v=vs.85%29.aspx)），或者您可以使用[`Win32_DiskDrive`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)WMI 类并检查`InterfaceType`属性值是否为`USB`.

试试这个使用 WMI 枚举所有 USB 驱动器的示例代码。

```
#include "stdafx.h"
#define _WIN32_DCOM
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>
# pragma comment(lib, "wbemuuid.lib")

//CREDENTIAL structure
//http://msdn.microsoft.com/en-us/library/windows/desktop/aa374788%28v=vs.85%29.aspx
#define CRED_MAX_USERNAME_LENGTH            513
#define CRED_MAX_CREDENTIAL_BLOB_SIZE       512
#define CREDUI_MAX_USERNAME_LENGTH CRED_MAX_USERNAME_LENGTH
#define CREDUI_MAX_PASSWORD_LENGTH (CRED_MAX_CREDENTIAL_BLOB_SIZE / 2)

#pragma argsused
int main(int argc, char* argv[])
{
    wchar_t pszName[CREDUI_MAX_USERNAME_LENGTH+1] = L"user";
    wchar_t pszPwd[CREDUI_MAX_PASSWORD_LENGTH+1]  = L"password";
    BSTR strNetworkResource;
    //To use a WMI remote connection set localconn to false and configure the values of the pszName, pszPwd and the name of the remote machine in strNetworkResource
    bool localconn = true;  
    strNetworkResource = localconn ?  L"\\\\.\\root\\CIMV2" : L"\\\\remote--machine\\root\\CIMV2";

    COAUTHIDENTITY *userAcct =  NULL ;
    COAUTHIDENTITY authIdent;

    // Initialize COM. ------------------------------------------

    HRESULT hres;
    hres =  CoInitializeEx(0, COINIT_MULTITHREADED);
    if (FAILED(hres))
    {
        cout << "Failed to initialize COM library. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                  // Program has failed.
    }

    // Set general COM security levels --------------------------

    if (localconn)
        hres =  CoInitializeSecurity(
            NULL,
            -1,                          // COM authentication
            NULL,                        // Authentication services
            NULL,                        // Reserved
            RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication
            RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation
            NULL,                        // Authentication info
            EOAC_NONE,                   // Additional capabilities
            NULL                         // Reserved
            );
    else
        hres =  CoInitializeSecurity(
            NULL,
            -1,                          // COM authentication
            NULL,                        // Authentication services
            NULL,                        // Reserved
            RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication
            RPC_C_IMP_LEVEL_IDENTIFY,    // Default Impersonation
            NULL,                        // Authentication info
            EOAC_NONE,                   // Additional capabilities
            NULL                         // Reserved
            );

    if (FAILED(hres))
    {
        cout << "Failed to initialize security. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                    // Program has failed.
    }

    // Obtain the initial locator to WMI -------------------------

    IWbemLocator *pLoc = NULL;
    hres = CoCreateInstance(CLSID_WbemLocator, 0, CLSCTX_INPROC_SERVER, IID_IWbemLocator, (LPVOID *) &pLoc);

    if (FAILED(hres))
    {
        cout << "Failed to create IWbemLocator object." << " Err code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();       
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                 // Program has failed.
    }

    // Connect to WMI through the IWbemLocator::ConnectServer method

    IWbemServices *pSvc = NULL;

    if (localconn)  
        hres = pLoc->ConnectServer(
             _bstr_t(strNetworkResource),      // Object path of WMI namespace
             NULL,                    // User name. NULL = current user
             NULL,                    // User password. NULL = current
             0,                       // Locale. NULL indicates current
             NULL,                    // Security flags.
             0,                       // Authority (e.g. Kerberos)
             0,                       // Context object
             &pSvc                    // pointer to IWbemServices proxy
             );
    else
        hres = pLoc->ConnectServer(
            _bstr_t(strNetworkResource),  // Object path of WMI namespace
            _bstr_t(pszName),             // User name
            _bstr_t(pszPwd),              // User password
            NULL,                // Locale
            NULL,                // Security flags
            NULL,                // Authority
            NULL,                // Context object
            &pSvc                // IWbemServices proxy
            );

    if (FAILED(hres))
    {
        cout << "Could not connect. Error code = 0x" << hex << hres << endl;    
        cout << _com_error(hres).ErrorMessage() << endl;
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();          
        return 1;                // Program has failed.
    }

    cout << "Connected to root\\CIMV2 WMI namespace" << endl;

    // Set security levels on the proxy -------------------------
    if (localconn)
        hres = CoSetProxyBlanket(
           pSvc,                        // Indicates the proxy to set
           RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx
           RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx
           NULL,                        // Server principal name
           RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx
           RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx
           NULL,                        // client identity
           EOAC_NONE                    // proxy capabilities
        );
    else
    {
        // Create COAUTHIDENTITY that can be used for setting security on proxy
        memset(&authIdent, 0, sizeof(COAUTHIDENTITY));
        authIdent.PasswordLength = wcslen (pszPwd);
        authIdent.Password = (USHORT*)pszPwd;
        authIdent.User = (USHORT*)pszName;
        authIdent.UserLength = wcslen(pszName);
        authIdent.Domain = 0;
        authIdent.DomainLength = 0;
        authIdent.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;
        userAcct = &authIdent;

        hres = CoSetProxyBlanket(
           pSvc,                           // Indicates the proxy to set
           RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
           RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
           COLE_DEFAULT_PRINCIPAL,         // Server principal name
           RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx
           RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
           userAcct,                       // client identity
           EOAC_NONE                       // proxy capabilities
        );
    }

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Use the IWbemServices pointer to make requests of WMI ----

    IEnumWbemClassObject* pEnumerator = NULL;
    hres = pSvc->ExecQuery( L"WQL", L"SELECT * FROM Win32_DiskDrive Where InterfaceType='USB'",
    WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, NULL, &pEnumerator);

    if (FAILED(hres))
    {
        cout << "ExecQuery failed" << " Error code = 0x"    << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Secure the enumerator proxy
    if (!localconn)
    {

        hres = CoSetProxyBlanket(
            pEnumerator,                    // Indicates the proxy to set
            RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
            RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
            COLE_DEFAULT_PRINCIPAL,         // Server principal name
            RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx
            RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
            userAcct,                       // client identity
            EOAC_NONE                       // proxy capabilities
            );

        if (FAILED(hres))
        {
            cout << "Could not set proxy blanket on enumerator. Error code = 0x" << hex << hres << endl;
            cout << _com_error(hres).ErrorMessage() << endl;
            pEnumerator->Release();
            pSvc->Release();
            pLoc->Release();
            CoUninitialize();
            cout << "press enter to exit" << endl;
            cin.get();              
            return 1;               // Program has failed.
        }
    }

    // Get the data from the WQL sentence
    IWbemClassObject *pclsObj = NULL;
    ULONG uReturn = 0;

    while (pEnumerator)
    {
        HRESULT hr = pEnumerator->Next(WBEM_INFINITE, 1, &pclsObj, &uReturn);

        if(0 == uReturn || FAILED(hr))
          break;

        VARIANT vtProp;

                hr = pclsObj->Get(L"Caption", 0, &vtProp, 0, 0);// String
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "Caption : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "Caption : " << vtProp.bstrVal << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"DeviceID", 0, &vtProp, 0, 0);// String
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "DeviceID : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "DeviceID : " << vtProp.bstrVal << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"Model", 0, &vtProp, 0, 0);// String
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "Model : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "Model : " << vtProp.bstrVal << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"PNPDeviceID", 0, &vtProp, 0, 0);// String
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "PNPDeviceID : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "PNPDeviceID : " << vtProp.bstrVal << endl;
                }
                VariantClear(&vtProp);

        pclsObj->Release();
        pclsObj=NULL;
    }

    // Cleanup

    pSvc->Release();
    pLoc->Release();
    pEnumerator->Release();
    if (pclsObj!=NULL)
     pclsObj->Release();

    CoUninitialize();
    cout << "press enter to exit" << endl;
    cin.get();
    return 0;   // Program successfully completed.
} 
```

# ruby - Ruby Gems：缺少库或标头

> ID：13681874
> 
> 赞同：0
> 
> 时间：2012-12-03T11:00:43.527
> 
> 标签：ruby, gem, debian

我需要在我的 Debian 服务器上安装一个 Ruby gem。这会失败并显示一条错误消息，这对我作为非 ruby​​ 程序员来说不是很有帮助。你能帮我诊断一下问题吗？缺少哪些“必要的库和/或标头”？

```
root ~ # gem install schleuder
Building native extensions.  This could take a while...
ERROR:  Error installing schleuder:
    ERROR: Failed to build gem native extension.

/usr/bin/ruby1.8 extconf.rb
checking for magic_open() in -lmagic... no
*** ERROR: missing required library to compile this module
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/bin/ruby1.8
    --with-magic-dir
    --without-magic-dir
    --with-magic-include
    --without-magic-include=${magic-dir}/include
    --with-magic-lib
    --without-magic-lib=${magic-dir}/lib
    --with-magiclib
    --without-magiclib

Gem files will remain installed in /var/lib/gems/1.8/gems/ruby-filemagic-0.4.2 for inspection.
Results logged to /var/lib/gems/1.8/gems/ruby-filemagic-0.4.2/ext/gem_make.out 
```

日志文件（假设这是正确的）说：

```
root ~ # cat /var/lib/gems/1.8/gems/ruby-filemagic-0.4.2/ext/mkmf.log
have_library: checking for magic_open() in -lmagic... -------------------- no

"gcc -o conftest -I. -I/usr/lib/ruby/1.8/x86_64-linux -I.    -fno-strict-aliasing -g -g -O2  -fPIC   conftest.c  -L. -L/usr/lib -L.  -rdynamic -Wl,-export-dynamic     -lruby1.8-static -lmagic  -lpthread -lrt -ldl -lcrypt -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:3: error: ‘magic_open’ undeclared (first use in this function)
conftest.c:3: error: (Each undeclared identifier is reported only once
conftest.c:3: error: for each function it appears in.)
checked program was:
/* begin */
1: /*top*/
2: int main() { return 0; }
3: int t() { void ((*volatile p)()); p = (void ((*)()))magic_open; return 0; }
/* end */

"gcc -o conftest -I. -I/usr/lib/ruby/1.8/x86_64-linux -I.    -fno-strict-aliasing -g -g -O2  -fPIC   conftest.c  -L. -L/usr/lib -L.  -rdynamic -Wl,-export-dynamic     -lruby1.8-static -lmagic  -lpthread -lrt -ldl -lcrypt -lm   -lc"
/usr/bin/ld: cannot find -lmagic
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: /*top*/
2: int main() { return 0; }
3: int t() { magic_open(); return 0; }
/* end */

-------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:13:43.247

一些 Ruby gem 带有“本地扩展”，这意味着它们不是完全用 Ruby 编写的，而是包含与一些用 C 编写的外部库的绑定。这通常是出于性能原因，或者是为了使用完善的库而不是重新发明轮子。

在您的情况下，它无法编译本机扩展，因为缺少头文件。您可能需要安装`libmagic-dev`Debian 软件包。就像是

```
sudo apt-get install libmagic-dev 
```

会做的伎俩，这取决于你的包管理器！

# java - log4j 配置文件和继承？

> ID：13681875
> 
> 赞同：2
> 
> 时间：2012-12-03T11:00:45.940
> 
> 标签：java, configuration, log4j

当使用多个配置文件时，我很难理解 log4j 的配置。

我解释我的情况：

*   我有一个带有模块（web、ejb、jpa）的简单 Java EE 应用程序
*   我还有自定义服务器身份验证模块 (SAM) 来处理 Glassfish 的安全性，我不直接在我的应用程序中使用领域。

所以，我有 2 个 xml 配置文件，因为我的 SAM（JAR 文件）存储在里面`GF_HOME\glassfish\lib`，而我的 EAR 文件存储在`GF_HOME\glassfish\domains\domain1`. JAR 和 EAR 都包含 log4j.xml 文件。

我的 log4j 库在`GF_HOME\glassfish\domains\domain1\lib`目录中。

我想用 2 log4j.xml 文件处理配置。

所以在我的 SAM 的 log4j.xml 文件中，我有这个：

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
<appender name="FILE" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="${catalina.home}/logs/sim.log" />
    <param name="Threshold" value="DEBUG" />
    <param name="Append" value="true" />
    <param name="MaxFileSize" value="1MB" />
    <param name="MaxBackupIndex" value="1" />

    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %-5p %X{service} %X{user} [%c] %m%n" />
    </layout>
</appender>

<root>
    <priority value="DEBUG" />
    <appender-ref ref="FILE" />
</root> 
```

在我的应用程序的 log4j.xml 中：

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
 <appender name="FILE" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="${catalina.home}/logs/sim.log"/>
    <param name="Threshold" value="DEBUG"/>
    <param name="Append" value="true"/>
    <param name="MaxFileSize" value="1MB"/>
    <param name="MaxBackupIndex" value="1"/>

    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %-5p %X{service} %X{user} [%c] %m%n"/>
    </layout>             
</appender>

<logger name="com.sim" additivity="true">
    <level value="FATAL" />     
</logger>

<root>
    <priority value="DEBUG" />
    <appender-ref ref="FILE" />
</root> 
```

使用此配置，我不希望在我的应用程序中看到例如级别`INFO`或`DEBUG`在我的应用程序中，因为对于记录器`com.sim`级别，`FATAL`但我收到所有日志，因为它似乎应用了 SAM log4j.xml 的配置。实际上，当我删除此文件时，我会收到我的应用程序级别的日志`FATAL`。

似乎 glassfish“混合”或“合并”了所有找到的 log4j.xml 文件。不太明白原理。

我只想用 1 个 log4j.xml 管理我的 SAM，并用另一个**独立**的log4j.xml 管理我的应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:43:15.363

回答我的帖子：

请记住，我在 EAR 的 lib 目录中的 JAR 中有带有 log4j.xml 文件的 EAR 文件。

为了应用新的 log4j 配置，我创建了在启动时启动并使用的新 servlet `DOMConfigurator.configure()`（请注意，如果您使用属性文件，则必须使用`PropertyConfigurator.configure()`not `DOMConfigurator.configure()`）。

这是我的小服务程序：

```
public class Log4jInit implements Servlet {

@Override
public void destroy() {}

@Override
public ServletConfig getServletConfig() {return null;}

@Override
public String getServletInfo() {return null;}

@Override
public void init(ServletConfig arg0) throws ServletException {

    try{        
        DOMConfigurator.configure(getClass().getClassLoader().getResource("log4j.xml"));            
    }catch(Exception e){
        System.out.println("Log4jInit Exception : " + e);
    }

}

@Override
public void service(ServletRequest arg0, ServletResponse arg1)  throws ServletException, IOException {}

} 
```

另外，不要忘记修改您的`web.xml`文件：

```
<servlet>
    <servlet-name>Log4j Servlet</servlet-name>
    <servlet-class>your.package.Log4jInit</servlet-class>
    <load-on-startup> 1 </load-on-startup>
</servlet> 
```

就这样。

如果要添加/覆盖以前的 log4j 配置，请保留此代码。

如果要重置之前的配置，添加`LogManager.resetConfiguration();`之前`LogManager.resetConfiguration(...);`

# c# - 会话变量自动更新

> ID：13681877
> 
> 赞同：0
> 
> 时间：2012-12-03T11:00:47.040
> 
> 标签：c#, asp.net

```
protected void btningAccept_Click(object sender, EventArgs e)
        {

if(!(txtLOVCode.Text==" "||txtLOVvalue.Text==" "))
           {

            rowid++;
           // DFDLOVlst.Visible=true;
            DataTable dt = createTemptable();
            dt = (DataTable)Session["dfdtemptable"];
           DataRow dr = dt.NewRow();
          dr["prociLOV_Id"] = rowid;
          dr["prociLOV_Value"] = txtLOVvalue.Text;
          dr["prociLOV_Code"] = txtLOVCode.Text;
          Boolean isalreadyinLOVlst = false;

          foreach (DataRow chkrow in dt.Rows)
          {
              if (String.Equals(dr["prociLOV_Value"].ToString().Trim(), chkrow["prociLOV_Value"].ToString().Trim(),StringComparison.CurrentCultureIgnoreCase)
                  && String.Equals(dr["prociLOV_Code"].ToString().Trim(), chkrow["prociLOV_Code"].ToString().Trim(), StringComparison.CurrentCultureIgnoreCase))
              {
                  isalreadyinLOVlst = true;
                  break;
              }

           }

          if (isalreadyinLOVlst)
          {
              this.lblMessage.Text = "LOV value: " + dr["prociLOV_Value"].ToString() + ": " + dr["prociLOV_Code"].ToString() + " already exits";

          }
          else
          {
              this.lblMessage.Text = " ";
              dt.Rows.Add(dr);
              DataTable addedLOV = createTemptable();
            addedLOV = (DataTable)Session["addedLOV"];
            addedLOV.ImportRow(dr); ;
            Session["addedLOV"] = addedLOV;

          }

            DFDLOVlst.DataSource = dt;
            DFDLOVlst.DataBind();
         //   dt.AcceptChanges();

            Session["dfdtemptable"] = dt;

            txtLOVCode.Text = "";
            txtLOVvalue.Text = "";
            MDIngrdientsCode.Hide();
            this.txtLOVvalue.ReadOnly = false;
            this.txtLOVCode.ReadOnly = false;

           }
           else

            this.lblMessage.Text="NO LOV VALUES ENTERED";

        } 
```

在这里，会话变量`Session["dfdtemptable"]`和`Session["addedLOV"]`两者都更新了两次，并且每个会话变量的行数变为 2。但是每个会话变量的行数应该是 1。但是当另一个 Session 变量更新时，Session 变量也会更新。在分配或更新`Session["dfdtemptable"]`时得到更新。`Session["addedLOV"]`我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:29:29.373

我相信方法有问题`createTempTable`，尽管这里没有显示。似乎您的 dt（又名 dfdTempTable）和 addedLov（又名 addedLOV）都引用了相同的 DataTable。我建议您从调试模式开始，并在执行期间检查 dt 和 addedLOV 表中的行，或者使用 Debug.Watch 窗口中的 Make Object Id 比较这两个对象。

# regex - grails 2.x 中的非法转义字符

> ID：13681880
> 
> 赞同：0
> 
> 时间：2012-12-03T11:00:51.740
> 
> 标签：regex, grails-2.0

我使用 grails 1.3.7 版本开发了一个应用程序。我在哪里使用正则表达式进行密码验证。

像..

```
 public static final String MYFAX_PASSWORD_REGEX_PATTERN = "[a-zA-Z0-9!@#\$%^&*()<>{};:.\\]\\[]{4,20}" 
```

它工作正常，但是当我将此项目升级到 grails 2.x 时，它会在编译错误下方显示我。

有谁能够帮助我？

```
illegal escape character
public static final java.lang.String MYFAX_PASSWORD_REGEX_PATTERN = "[a-zA-Z0-9!@#$%^&*()<>{};:.\]\[]{4,20}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:51:52.533

$ 用于将表达式放入 GString 中。所以你应该逃避它`\$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:59:08.857

你可以试试 Groovy`~"pattern"`表达式：

```
def MYFAX_PASSWORD_REGEX_PATTERN = ~/[a-zA-Z0-9!@#$%^&*()<>{};:.\]\[]{4,20}/ 
```

有关详细信息，请参阅[Groovy 正则表达式手册](http://groovy.codehaus.org/Regular+Expressions)。

# groovy - 使用 Groovy 解析 XML：在声明中覆盖字符集并添加 XML 处理指令

> ID：13681882
> 
> 赞同：0
> 
> 时间：2012-12-03T11:01:07.240
> 
> 标签：groovy, character-encoding, xml-parsing, xml-declaration

我[最初的问题](https://stackoverflow.com/questions/13646974/parse-xml-using-groovy-how-do-i-keep-the-cdata-when-parsing-a-xml-file)已经得到解答，但这确实为进一步的问题打开了大门。

### 示例代码

使用 Groovy 2.0.5 JVM 1.6.0_31

```
import groovy.xml.*
import groovy.xml.dom.DOMCategory

def xml = '''<?xml version="1.0" encoding="UTF-16"?>
            | <?xml-stylesheet type="text/xsl" href="Bp8DefaultView.xsl"?>
             |<root>
            |  <Settings>
            |    <Setting name="CASEID_SEQUENCE_SIZE">
            |      <HandlerURL>
            |        <![CDATA[ admin/MainWindow.jsp ]]>
            |      </HandlerURL>
            |    </Setting>
            |    <Setting name="SOMETHING_ELSE">
            |      <HandlerURL>
            |        <![CDATA[ admin/MainWindow.jsp ]]>
            |      </HandlerURL>
            |    </Setting>
            |  </Settings>
            |</root>'''.stripMargin()

def document = DOMBuilder.parse( new StringReader( xml ) )
def root = document.documentElement

// Edit: Added the line below 
def pi = document.createProcessingInstruction('xml-stylesheet', 'type="text/xsl" href="Bp8DefaultView.xsl"');
// Edit #2: Added line below
document.insertBefore(pi, root)

use(DOMCategory) {
  root.Settings.Setting.each {
    if( it.'@name' == 'CASEID_SEQUENCE_SIZE' ) {
      it[ '@value' ] = 100
    }
  }
}

def outputfile = new File( 'c:/temp/output.xml' )
XmlUtil.serialize( root , new PrintWriter(outputfile))
// Edit #2: Changed from root to document.documentElement to see if that 
// would make any difference
println XmlUtil.serialize(document.documentElement) 
```

### 问题描述

我正在尝试解析从第三方工具导出的 XML 文件，在将其推广到舞台和生产之前，我需要替换某些属性值。没关系，但除此之外我必须保留编码和参考。到样式表。

由于这是相当静态的，因此同时拥有编码和样式表参考是完全可以的。在属性文件中定义，意思是：我不需要先在原始文件中找到声明。

## 声明问题中的编码

如在 StackOverFlow 上找到的[这个答案](https://stackoverflow.com/a/7282669/512139)所示，您可以这样做

```
new File('c:/data/myutf8.xml').write(f,'utf-8') 
```

我也试过

```
XmlUtil.serialize( root , new GroovyPrintStream('c:/temp/output.txt', 'utf-16')) 
```

但它也没有为我解决问题。所以我不明白如何覆盖 UTF 值。

## 处理指令问题

简单地说，我该如何添加

```
<?xml-stylesheet type="text/xsl" href="Bp8DefaultView.xsl"?> 
```

到输出？

*更新*- 这可以像这样完成

```
def pi = document.createProcessingInstruction('xml-stylesheet', 'type="text/xsl" href="Bp8DefaultView.xsl"'); 
```

正在像这样添加处理指令，[这条指南](http://www.rgagnon.com/javadetails/java-0577.html)向我展示了，但我仍然没有得到输出。

```
document.insertBefore(pi, root) // Fails 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:49:55.307

这个问题中的所有问题都已在我提出的另一个问题中得到解答，请参阅 [Groovy 和 XML：无法插入处理指令](https://stackoverflow.com/questions/13781637/groovy-and-xml-not-able-to-insert-processing-instruction)

诀窍是我预期的

```
document.documentElement 
```

包含处理指令。但这是错误的，documentElement 是：

> ...这是一个便利属性，允许直接访问作为文档的文档元素的子节点...

处理指令只是另一个子节点。所以我不得不使用的是*LSSerializer*或*Transfomer*。有关详细信息，请参阅[在根元素之前序列化 XML 处理指令](https://stackoverflow.com/questions/7980033/serialize-xml-processing-instruction-before-root-element)。

# touch - 溢出隐藏在触摸设备上不起作用

> ID：13681884
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:01:10.927
> 
> 标签：touch, overflow, hidden

我有溢出问题：在触摸设备上隐藏。基本上我的 html 和 body 在溢出：隐藏。在窗口外（底部）有一个联系表。单击按钮时，此表单将动画化。到目前为止，这在桌面浏览器上运行良好。

但在触摸设备上，我似乎能够向下滚动并查看表单。经过大量谷歌搜索后，我似乎无法找到解决方案。无论如何强制溢出：隐藏在触摸设备上？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:38:55.307

使用显示：无

display: none 将元素从页面中移除，页面的流动就好像它根本不存在一样。overflow 属性指定如果元素的内容超过元素框的大小时要执行的操作。

# javascript - android 的 javascript ui 框架

> ID：13681886
> 
> 赞同：0
> 
> 时间：2012-12-03T11:01:16.733
> 
> 标签：javascript, android

我知道有 js 库，例如我们的 jquery mobile... 可用于开发 android html 应用程序。是否有一个 android 风格的 javascript UI 库/框架使 html 应用程序看起来更像一个 android 本机应用程序？

欢迎您的评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:04:27.307

我认为这就是您要搜索的内容： [https ://github.com/jjoe64/jquery-mobile-android-theme](https://github.com/jjoe64/jquery-mobile-android-theme)

# git - 我做了 git checkout $OLD_BRANCH。如何掌握它？

> ID：13681887
> 
> 赞同：0
> 
> 时间：2012-12-03T11:01:16.867
> 
> 标签：git

以前我的代码被一个严重破坏的可怕错误感染了。经过长时间的斗争，我决定只`$git checkout`提交一个预错误提交。

现在`$git branch`返回一个带有分支“（无分支）”标记的列表。我如何合并（这是正确的吗？）这个到`master`分支中？

额外的问题：甚至“（无分支）”是什么意思？真的可以没有分店吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:39:50.307

是的，它真的可以是“没有分支”。你在一种叫做[“分离头”](http://sitaramc.github.com/concepts/detached-head.html)的状态下运行。如果您不小心，您将丢失所做的更改。在分离的头部状态下，git 不会更新任何引用。因此，如果您签出其他分支，您可能会忘记您所在的位置......以及随之而来的更改。

首先，为您的分支命名：

```
$ git checkout -b new-branch-name 
```

接下来，如果你想让你的 master 分支看起来像新的分支，你有几个选择……有些可以丢失 master 的历史，有些会保留它。我假设你想要后者。

最简单的做法是在新分支上运行：

```
$ git merge -s ours master 
```

这将引入 master，但由于`-s ours`选项（这将选择`ours` [合并策略](http://git-scm.com/docs/git-merge#_merge_strategies)）而不会应用它的任何更改。然后结帐大师，并运行：

```
$ git checkout master
$ git merge new-branch-name 
```

此时，master 应该看起来像 new-branch-name。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:29:04.147

即使我真的不知道发生了什么，我也设法解决了这个问题。我这样做`$git checkout master`是为了在`master`树枝上。

然后我创建了一个分支，`$git branch name_of_my_new_branch 12the39id9843of8old38branch`噗，bug 无处可寻。为什么 git 以这种方式工作仍然是一个谜，但如果有人第一次遇到神秘的`(no branch)`分支，这至少可以帮助他们`master`安全地到达温馨的分支。

# firefox - 从网站清除 cookie 和缓存

> ID：13681892
> 
> 赞同：1
> 
> 时间：2012-12-03T11:01:29.427
> 
> 标签：firefox, google-chrome, client, browser-cache, cache-control

每次我更新我的网站系统 UI/Jquery 时，用户都会抱怨事情对他们不起作用并且他们有错误。用户是互联网/计算机傻瓜，所以他们不知道如何清除 cookie 或浏览器的缓存，所以我需要连接到他们的每台计算机并自己做。我花了很多时间做这件事，他们总是抱怨。

一些用户使用 Chrome，一些 Firefox。谷歌搜索并没有找到解决方案。是否有任何客户端代码操作会命令浏览器清除其缓存甚至弹出浏览器窗口要求用户确认清除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:05:03.647

文档.cookie = '';

使用允许在地址栏中输入 js 代码的浏览器，您可以简单地创建一个快捷方式，让我们说一个收藏夹，并将以下代码作为 url：

```
javascript:document.cookie = ''; 
```

如果您想清除缓存，您可以使用元标记不缓存站点，尽管缓存是可以考虑的。

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:07:22.047

关于缓存清除：不，没有。

但是，您可以做的是配置您的 Web 服务器以正确地为您的内容提供过期和缓存有效性标头。（如何执行此操作取决于您的 Web 服务器。）

您还可以使用“缓存破坏”版本的 URL。而不是使用，让我们说，

```
<script src="script.js"> 
```

您可以像这样“版本”URL：

```
<script src="script.js?2012-12-03-13-06">
<!-- or instead of dates any other versioning scheme you like --> 
```

并且当所述脚本更新时，也相应地增加/更改查询参数。这应该会导致浏览器将脚本视为新脚本，因为在缓存中找不到 URL。

# performance - 费希尔判别计算时间

> ID：13681894
> 
> 赞同：4
> 
> 时间：2012-12-03T11:01:32.720
> 
> 标签：performance, lisp, classification

我最近在 Lisp 中实现了 Fisher 的线性判别 (FLD)。迄今为止，我一直在使用 dim(<10) 的样本，其中 FLD 立即执行的人口数量为 10。今天早上，我使用了 dim(5) 和 10 ⁴阶人口的真实数据，该程序已经在我的 AMD Athlon(tm) II Dual-Core M320 × 2 笔记本电脑上运行了几个小时。以下是我正在使用的文件的大小：

```
 $ wc output_sig.txt
 13000  65000 627677 output_sig.txt
 $ wc output_bkg.txt
 13000  65000 644621 output_bkg.txt 
```

综上所述，FLD的计算时间如何随着样本量和维度的变化而变化？这里需要几个小时的计算时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:29:08.630

在不知道代码的情况下：LDA 基本上是一个广义特征值问题，因此如果使用足够有效的线性代数例程，问题就可以解决。LISP 中的手写例程通常效率不高，因此我建议使用诸如 Matlisp 之类的 LAPACK 包装器。

# java - 如何使用 MD5 哈希在 JSP 中使用 Javascript 保护登录密码？

> ID：13681895
> 
> 赞同：0
> 
> 时间：2012-12-03T11:01:38.057
> 
> 标签：java, javascript, jsp, servlets, md5

如何在客户端使用 md5 散列来保护从客户端 (JSP) 到服务器中的 Servlet 的密码传输？以下帖子似乎回答了这个问题，但由于代码块不完整，我无法完全理解。 [http://www.techlabs4u.com/2010/03/how-to-use-salted-md5-hash-for-securing.html](http://www.techlabs4u.com/2010/03/how-to-use-salted-md5-hash-for-securing.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:02:54.653

> 如何在客户端使用 md5 散列来保护从客户端 (JSP) 到服务器中的 Servlet 的密码传输？

你不能。

密码散列用于避免*存储*原始密码，以便在数据库受损时保护它们。（而且 MD5 坏了，所以无论如何你都不应该使用它）。

要保护传输中的密码，请使用 SSL（通过 HTTPS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:08:19.933

对密码进行散列和加盐，然后以明文形式发送散列，与仅以明文形式发送密码相比，根本没有提供额外的安全性。如果攻击者能够拦截明文密码并使用它登录，那么他们可以轻松拦截散列密码并使用它登录。

不管客户端代码有多好，或者哈希算法有多强——这个原理从根本上是有缺陷的。

如前所述，使用 SSL。这不是以明文形式发送，而是加密客户端和服务器之间的所有传输，防止窃听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-01T05:14:36.633

如果您正在寻找 Java 和 JSP 中 MD5 加密的完整代码，这里就是。首先创建一个可以加密文本的 Java 类。我创建`mdjavahash.java`如下图。

```
package mdhash;

import java.security.*;

public class mdjavahash {
    private String hashpass="";

    public String getHashPass(String password) throws 
        NoSuchAlgorithmException{

        String plainText = password;
        MessageDigest mdAlgorithm = MessageDigest.getInstance("MD5");
        mdAlgorithm.update(plainText.getBytes());

        byte[] digest = mdAlgorithm.digest();
        StringBuffer hexString = new StringBuffer();

        for (int i = 0; i < digest.length; i++) {
            plainText = Integer.toHexString(0xFF & digest[i]);

            if (plainText.length() < 2) {
                plainText = "0" + plainText;
            }

            hexString.append(plainText);
        }
        hashpass = hexString.toString();

        return hashpass;
    }
} 
```

现在您可以使用`mdjavahash`jsp 文件中的类进行加密。例如：

```
<%@ page import="java.security.*, mdhash.*" %>
<%
  String mypassword = "";

  mdjavahash md = new mdjavahash();

  mypassword = "Hello World";
  out.println("Actual String is : "+mypassword+" <br/>MD5 String is : 
  "+md.getHashPass(mypassword));
%> 
```

您已经完成了 JSP 中的加密。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-03T11:13:59.850

如果您想在不使用 SSL 的情况下获得这样的中等安全性，请尝试以下方向：

1.  读取当前时间
2.  将时间与用户输入的密码连接起来
3.  生成散列，md5只是你可以选择的散列算法之一，不是强制性的。
4.  将所有用户名、时间戳和哈希发送到服务器。

在服务器端

1.  收集三个 POST 变量
2.  检查时间戳，仅接受可接受的时差
3.  从数据库中检索密码
4.  在服务器端以相同的方式计算哈希
5.  将计算结果与 POST 哈希进行比较

缺点：您需要在服务器端保留纯文本密码

替代方案：预散列密码，并在登录期间在 javascript 端进行双重散列。

# search-engine - 对搜索引擎隐藏单个内容块？

> ID：13681898
> 
> 赞同：2
> 
> 时间：2012-12-03T11:01:57.517
> 
> 标签：search-engine, seo

hheader.html 包含在每个 URL 的顶部，但它与搜索无关，并且会弄乱每个页面第一行的所有结果......（在代码中它是最后一行，但在视觉上它是第一行，这谷歌能够注意到）

**解决方案 1：** 您可以将标头（要从 google 搜索中排除的内容）放在带有静态 url domain.com/header.html 和`<meta name="robots" content="noindex" />`?

*   有**起飞吗？**

**解决方案**2：您可以通过 apache mod rewrite、php 或 javascript 有条件地交付它

*   起飞（？）：谷歌可能不喜欢它？谷歌会尝试使用标准用户的用户代理的页面并进行比较吗？

*   起飞：隐藏的内容也将在谷歌缓存版本中丢失......

示例：add-header.php：

```
<?php $path = $_GET['path'];
      echo file_get_contents($_SERVER["DOCUMENT_ROOT"].$path);  ?> 
```

在 apache（虚拟）主机配置中：

```
RewriteCond  %{HTTP_USER_AGENT}  !.*spider.*  [NC]
RewriteCond  %{HTTP_USER_AGENT}  !Yahoo.*   [NC]
RewriteCond  %{HTTP_USER_AGENT}  !Bing.*    [NC]
RewriteCond  %{HTTP_USER_AGENT}  !Yandex.*  [NC]
RewriteCond  %{HTTP_USER_AGENT}  !Baidu.*   [NC]
RewriteCond  %{HTTP_USER_AGENT}  !.*bot.*   [NC]
RewriteCond %{SCRIPT_FILENAME} \.htm$ [NC,OR]
RewriteCond %{SCRIPT_FILENAME} \.html$ [NC,OR]
RewriteCond %{SCRIPT_FILENAME} \.php$ [NC]
RewriteRule ^(.*)$  /var/www/add-header.php?path=%1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:26:29.010

不要向搜索引擎发送与发送给用户不同的内容。（您的解决方案 2）。这称为“伪装”，明显违反了 Google 的政策。如果差异很大，它将使您的网站受到处罚。

反正有更好的答案。通常，如果您希望块不被索引，则将其包含在使用 javascript 在初始页面加载后动态加载的 div/iframe 中 - 例如使用 ajax。

# c# - 即使使用 Page.IsPostback，Dropdownlist 也会在回发时再次绑定数据

> ID：13681906
> 
> 赞同：0
> 
> 时间：2012-12-03T11:02:32.983
> 
> 标签：c#, asp.net

我需要列出所有商店的下拉列表。并且单击时需要获取所选值但回发发生，即使我检查 Page.IsPostback 它始终为空，因为没有数据。

这是我的代码。

==============================================

# 这是我的 aspx 文件

```
<div id="SurveyCompetitionContainer">
    <div class="surveyCompetitionContents">
        <ajax:UpdatePanel ID="WinSurveyAjax" runat="server" UpdateMode="conditional" ChildrenAsTriggers="true"
            RenderMode="block">
            <ContentTemplate>
                <div id="competitionInfo" runat="server" visible="true">
                    <div class="headerTitle">
                        Enter your email for the chance to win a week long holiday in a luxury apartment
                        in the Lake District.
                    </div>
                    <div class="emailBox">
                        <div class="emailDiv">
                            <asp:Label ID="emailLabel" CssClass="emailLabel" Text="Email:" runat="server"></asp:Label>
                            <asp:TextBox ID="emailTextbox" runat="server" CssClass="water" Text="" ClientIDMode="Static"
                                ValidationGroup="EmailGroup"> </asp:TextBox>
                        </div>
                        <div class="storesDiv">
                            <asp:Label ID="LabelStores" CssClass="StoreLabel" Text="Your favourite Mountain Warehouse store:"
                                runat="server"></asp:Label>
                            <asp:DropDownList ID="Stores" CssClass="storesDD" runat="server" ToolTip="Stores"
                                EnableViewState="true" AppendDataBoundItems="True" OnSelectedIndexChanged="Stores_SelectedIndexChanged">
                            </asp:DropDownList>
                        </div>
                    </div>
                    <div class="enterbtn">
                        <asp:Button ID="emailJoinButton" CssClass="emailJoinButton" runat="server" OnClick="emailJoinButton_Click"
                            Text="ENTER" EnableViewState="False" ValidationGroup="EmailGroup" />
                    </div>
                </div>
                <div id="competitionSurvey" runat="server">
                    <div class="SCHeaderInfo">
                        <h2>
                            Thank you! We will notify the lucky winner by email.
                        </h2>
                        <h3>
                            We'd love to send you tailored special offers - just take a few moments to fill
                            out the following optional details.
                        </h3>
                    </div>
                    <div class="SCquestionsDetails">
                        <p>
                            <b>1\. What are you interested in?</b><span class="small"> (Select all that apply)</span></p>
                        <asp:CheckBoxList ID="Interests" runat="server" CssClass="interests" Width="400">
                            <asp:ListItem>Camping</asp:ListItem>
                            <asp:ListItem>Hiking</asp:ListItem>
                            <asp:ListItem>Skiing</asp:ListItem>
                            <asp:ListItem>Travel</asp:ListItem>
                            <asp:ListItem>Walking</asp:ListItem>
                            <asp:ListItem>Everything</asp:ListItem>
                            <asp:ListItem>Mens</asp:ListItem>
                            <asp:ListItem>Womens</asp:ListItem>
                            <asp:ListItem>Kids</asp:ListItem>
                        </asp:CheckBoxList>
                    </div>
                </div>
            </ContentTemplate>
        </ajax:UpdatePanel>
    </div>
</div> 
```

=================================

# 这是我的代码

```
protected void Page_Load(object sender, EventArgs e)
            {
                        if (!Page.IsPostBack)
                                    BindAllStores();
            }

  protected void emailJoinButton_Click(object sender, EventArgs e)
            {
                        Session["FavStore"] = Stores.SelectedItem.ToString(); --> this is where i am storing the selected value.

                        if (Page.IsValid)
                        {
                                    if (competitionInfo.Visible == true)
                                    {
                                                LoadSurvey();
                                                competitionInfo.Visible = false;
                                                competitionSurvey.Visible = true;
                                    }
                        }
            }

public void  BindAllStores()
            {
                        Stores.AppendDataBoundItems = true;    
                        Stores.Items.Add(new ListItem("--- Choose one of our stroes --- ", "0"));

                        Stores.DataSource = AllStores;
                        Stores.DataTextField = "DisplayName";
                        Stores.DataValueField = "NAME";
                        Stores.DataBind();
            } 
```

我正在做的是我在单击时隐藏一个 div 并显示带有所有调查问题的另一个 div 并且在提交时我需要获取具有下拉列表的前一个 div 的值。

请帮助我，因为我发现它非常困难。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:17:25.473

启用您的页面和下拉列表`viewState`，然后尝试

查看状态使服务器控件能够跨 HTTP 请求维护其状态。如果满足以下所有条件，则启用控件的视图状态：

*   该页面的 EnableViewState 属性设置为 true。
*   控件的 EnableViewState 属性设置为 true。
*   控件的 ViewStateMode 属性设置为 Enabled 或继承 Enabled 设置。

或在控件/页面初始化中加载数据（不要检查 IsPostBack 标志）而不是 pageLoad

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:08:47.863

一、`DropDownList`在`AsyncPostBackTrigger`ASPX中指定

```
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="dropdownlist" EventName="SelectedIndexChanged" />
</Triggers> 
```

其次，尝试使用[`IsInAsyncPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.isinasyncpostback.aspx)：

```
protected void Page_Load(object sender, EventArgs e) 
{
    if (!ScriptManager.GetCurrent(Page).IsInAsyncPostBack) 
    {
        BindAllStores();
    }
} 
```

# c++ - 模态表单之上的主表单

> ID：13681910
> 
> 赞同：1
> 
> 时间：2012-12-03T11:02:43.323
> 
> 标签：c++, window, modal-dialog, c++builder

在我面前的 C++ builder 2010 项目中有一个奇怪的场景。每隔一段时间，模态形式似乎就会落后于主要形式。如果我有主窗口，似乎会发生这种情况，使用主窗口上的按钮打开辅助窗口，然后选择主窗口上的一个按钮，该按钮将产生一个模态表单弹出窗口。模态表单然后在主窗口后面结束，我必须按退出键才能关闭它。

再次打开它会产生所需的结果，模式窗口位于顶部。

有时一旦完成，主窗口似乎开始将自己放在每个窗口的前面。不仅是它自己的模态窗口或子窗口，甚至还有 Windows Explorer 窗口和其他程序。*更新：每当模态窗口结束在主窗口后面并使用转义关闭时，都会发生这种情况。使主窗口再次正常运行的唯一方法是重新启动应用程序。*

我已经检查并摆弄了主窗口和模式弹出窗口的 F *​​ormStyle*和*PopupMode*属性，这是最初的问题。但这似乎没有帮助。主窗口有

```
FormStyle: fsNormal
PopupMode: pmNone 
```

由于主窗口开始表现得很奇怪，*感觉*问题出在主窗口上。我尝试专门告诉模态窗口将主窗口用作*其父*窗口，并尝试所有设置和*FormStyle*和*PopupMode*的组合而不做任何更改。

除此之外，据报道所有这些都在 Vista 之前有效（是的，这是一个古老而大型的应用程序......呵呵）

**更新：**罪魁祸首似乎是*主窗口*，它最终位于一切之上。这会导致模态表单最终出现在其后面，并且看起来好像有问题。这只发生在第一次，重新打开模态表单会将其绘制在*Main Window*前面。即使*主窗口*仍然位于桌面上其他所有内容的前面。更令人困惑的是，当*主窗口*决定开始像这样运行时，感觉非常随机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:29:39.217

问题原来是已知问题与模态形式最终落后于其他形式的组合。谷歌`"delphi modal form hidden behind other form"`或类似的东西，你会发现很多信息。

另一个促成因素是已经对应用程序进行了解决这些问题的实现。这一点，以及对 Windows 和 VCL 本身的更改都不能很好地发挥作用。所以我去掉了所有“现在”不必要的垃圾，并重写了应用程序如何处理它的窗口，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T05:16:14.740

我知道这是一个老问题，但我通过将 TApplicationEvent 添加到主窗体并 OnActivate 检查 Screen->ActiveForm 是否打开 fsModal 并将其置于前面来解决模态焦点问题：

```
void __fastcall TMainForm::ApplicationEvents1Activate(TObject *Sender)
{

   if (Screen->ActiveForm!=NULL)
    {
       TForm *frm=  Screen->ActiveForm;
       if (frm->FormState.Contains(fsModal))
       frm->BringToFront();
    }
} 
```

# c# - Microsoft 报告参数未重置

> ID：13681915
> 
> 赞同：1
> 
> 时间：2012-12-03T11:03:01.467
> 
> 标签：c#, asp.net, report, rdlc, microsoft-reporting

我有一些使用`Microsoft Reporting rdlc`文件设计的非常定制的报告。在第一份报告中，我使用了**43**个参数：

`R_1_1`, `R_1_2`, `R_1_3`, `R_1_4`, `R_1_5`, `R_1_6`, `R_2_1`, `R_2_2`, ...

在第二份报告中，我有**78 个**参数，所以：

`R_1_1`, `R_1_2`, `R_1_3`, `R_1_4`, `R_1_5`, `R_1_6`, `R_1_7`, `R_1_8`, `R_2_1`, `R_2_2`,...

我将此代码用于绑定报告：

```
this.ReportViewer.LocalReport.ReportPath = BaseAddress + drpReportNumber.SelectedValue.Trim() + ".rdlc";
    this.ReportViewer.LocalReport.Refresh();

    this.ReportViewer.LocalReport.DataSources.Clear();
    Microsoft.Reporting.WebForms.ReportDataSource rprtDTSource = new Microsoft.Reporting.WebForms.ReportDataSource("DataSet1", new DataTable("DataSet1"));
    this.ReportViewer.LocalReport.DataSources.Add(rprtDTSource);
    this.ReportViewer.LocalReport.Refresh();

    if (parameters != null && parameters.Count > 0)
    {
        for (int i = 0; i < parameters.Count; i++)
        {
            ReportParameter p = new ReportParameter(parameters[i].ParameterName, parameters[i].ParameterValue);
            this.ReportViewer.LocalReport.SetParameters(p);
        }
    } 
```

问题是当我创建第一个报告时，我还想创建第二个报告，报告查看器会引发此错误：

> {“已尝试设置此报告中未定义的报告参数“R_1_7”。”}

我有两个问题；

1.  参数计数有什么限制吗？

2.  我认为当我将 ReportViewer 绑定到第一个报告时，它不包含`R_1_7`，并且在第二次参数列表不会重置并且它使用第一个参数列表。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:25:30.253

我刚刚发现[这篇博客文章](http://www.codeease.com/a-problem-when-dynamically-switch-rdlc-in-reportviewer.html)似乎正是你的问题。

在你之前添加这个`this.ReportViewer.LocalReport.DataSources.Clear();`：

```
this.ReportViewer.Reset(); 
```

# javascript - jsFiddle 中的谷歌地图

> ID：13681917
> 
> 赞同：1
> 
> 时间：2012-12-03T11:03:17.133
> 
> 标签：javascript, google-maps, jsfiddle

我正在尝试在 jsFiddle 中实现谷歌地图来问另一个问题，但我看不到地图：http: [//jsfiddle.net/hashie5/aknYP/](http://jsfiddle.net/hashie5/aknYP/)

我在资源中添加了 gmap 脚本

如何在 jsFiddle 中显示地图？

```
function initialize() {
var myLatlng = new google.maps.LatLng(50.965049,5.484231);
var myOptions = {
  zoom: 14,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var contentString = 
    '<div id="infowindow">' +
    'Galaconcert<br />' +
    'Jaarbeurslaan 2-6<br />' +
    '3690 Genk' +
    '</div>'
;

var infowindow = new google.maps.InfoWindow();

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title: 'Galaconcert'
});
google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
});
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T11:22:38.217

正如[此处](http://doc.jsfiddle.net/basic/introduction.html#choose-framework)在红框中的“添加资源”下所解释的：

> 警告：jsFiddle 正在通过扩展识别资源的类型。如果您想使用动态资源，请添加一个虚拟 GET 变量，即`http://example.com/download/js/dynamically.js?somevar=somevalue&dummy=.js`. 这将欺骗 jsFiddle 将其识别为 JavaScript 资源。

因此，要让 jsFiddle 识别 Google Maps API（确实没有 .js 扩展名），您需要将其添加为资源：[http](http://maps.googleapis.com/maps/api/js?sensor=false&dummy=.js) ://maps.googleapis.com/maps/api/js?sensor=false&dummy=.js （这当然是除了调用初始化之外）

[更新了小提琴](http://jsfiddle.net/aknYP/5/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:10:23.517

你去[http://jsfiddle.net/aknYP/4/](http://jsfiddle.net/aknYP/4/)

您从未调用`initialize()`或加载 JS Google Maps API

# android - jsoup如何去除tr不包含特定的文字？

> ID：13681918
> 
> 赞同：0
> 
> 时间：2012-12-03T11:03:18.060
> 
> 标签：android, parsing, jsoup

我想为我的时间表做一个过滤器。我的做法是尝试删除 tr 不包含我的课程，然后我可以保留我需要的内容。但我不知道如何一起使用 :not 和 :contain 。有人帮忙吗？或提出其他想法？

```
tableRow = filterUse.select("tr:not(:contain("+lecture+"):contains("+lab+"):contains("+tutorial+"))").remove(); 
```

错误日志：

```
12-03 18:15:41.853: E/AndroidRuntime(2324): Caused by: org.jsoup.select.Selector$SelectorParseException: Could not parse query ':contain(L-2):contains(LAB-3):contains(T-3)': unexpected token at ':contain(L-2):contains(LAB-3):contains(T-3)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:37:01.330

您可以使用`:matches(regex)`或`:matchesOwn(regex)`。

```
tableRow = filterUse.select("tr:matches((?is)" + lecture + "|" + lab + "|" + tutorial + ")").remove; 
```

# c# - 使用 DataTables 合并数据库

> ID：13681923
> 
> 赞同：0
> 
> 时间：2012-12-03T11:03:38.053
> 
> 标签：c#, .net, sql, datatable

我有以下代码应该用远程用户表覆盖本地用户表。我可以看到 Merge 工作正常，但 Update 什么也不做（即 DataTable 有新值，但它没有将其写入 LocalDb 连接/数据库） - 有没有一种简单的方法来做我正在做的事情或做这个工作？

```
var RemoteUsersTable = DbRemote.ExecuteQuery("SELECT * FROM users");

if (RemoteUsersTable.Rows.Count > 0)
{
    SqlDataAdapter LocalDataAdapter = null;
    var LocalUsersTable = DbLocal.ExecuteQuery("SELECT * FROM users", ref LocalDataAdapter);

    LocalUsersTable.Merge(RemoteUsersTable);
    LocalUsersTable.AcceptChanges();

    LocalDataAdapter.Update(LocalUsersTable);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:15:13.027

对 AcceptChanges 的调用意味着 LocalUsersTable 中的任何更改值都不再标记为已更改，因此无需更新任何内容。

无论如何，这是执行大规模更新的一种非常丑陋、缓慢且有风险的方式，并且从未使用过。只是一些最严重的问题：

*   您将所有数据从两台服务器拉到客户端，然后再将所有数据发送回其中一台服务器。这浪费了所有机器的带宽和处理时间，因此非常慢。
*   您从每个表中检索所有列，如果有架构更改，这将导致更新失败。

您应该在事务中使用 SQL 语句来做您想做的事情，而不是使用 DataTables。

SQL Server 有 MERGE 语句，它可以使用源查询中的行更新目标表，使用每个单独行的值决定做什么（更新、插入、删除）。或者您可以编写一个多语句脚本，删除旧行并将新行插入事务中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:11:45.357

上面代码的问题是你只设置了一个选择命令。如果您想“更新”表格，那么您很可能需要为您的`LocaDataAdapter`.

DataAdapter的`Update`方法需要这些命令来更改/添加/删除数据库表中的记录。

您通常会使用特定命令设置 DataAdapter。

使用您的命令生成器，您可以尝试这样做：-

```
var RemoteUsersTable = DbRemote.ExecuteQuery("SELECT * FROM users");

if (RemoteUsersTable.Rows.Count > 0)
{
    SqlDataAdapter LocalDataAdapter = null;
    var LocalUsersTable = DbLocal.ExecuteQuery("SELECT * FROM users", ref LocalDataAdapter);

    LocalUsersTable.Merge(RemoteUsersTable);
    LocalUsersTable.AcceptChanges();

    cb.GetDeleteCommand(); // WHICH EVER YOUR COMMANDBUILDER IS CALLED.
    cb.GetInsertCommand();
    cb.GetUpdateCommand();

    LocalDataAdapter.Update(LocalUsersTable);
} 
```

# google-chrome-extension - chrome.management.onInstalled 和 ExtensionInfo.enabled 属性

> ID：13681927
> 
> 赞同：0
> 
> 时间：2012-12-03T11:03:58.333
> 
> 标签：google-chrome-extension

我在扩展程序中有以下代码，它在扩展程序安装和启用时进行侦听：

```
chrome.management.onInstalled.addListener(function (e0) {
    console.log("installed", e0.name, "enabled=" + e0.enabled);
});
chrome.management.onEnabled.addListener(function (e2) {
    console.log("enabled", e2.name, "enabled=" + e2.enabled);
}); 
```

onEnabled 事件总是在 onInstalled 事件触发后触发，这是有道理的。但是 onInstalled 事件中扩展的 enabled 属性始终设置为 true。我认为这是不对的。在触发 onEnabled 事件之前，不应将此属性设置为 true。或者也许我在这里误解了一些东西？

感谢您提供任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:21:23.180

请理解[chrome.management.onEnabled.addListener()](https://developer.chrome.com/extensions/management.html#event-onEnabled)是[**Event Listener**](https://developer.chrome.com/extensions/management.html#events)而不是[**Method**](https://developer.chrome.com/extensions/management.html#methods)。

为什么要寻找额外的[方法\开销](https://developer.chrome.com/extensions/management.html#methods)来启用扩展程序\应用程序，在安装后始终可以[启用](https://developer.chrome.com/extensions/browserAction.html#method-enable)和[禁用扩展程序？](https://developer.chrome.com/extensions/browserAction.html#method-disable)默认值[enabled 为 true](https://developer.chrome.com/extensions/management.html#type-ExtensionInfo)是一个好方法，请不要依赖执行流程，因为[event.addListener(function callback)](https://developer.chrome.com/extensions/events.html#method-Event-addListener)是一个异步事件。

# c - GCC C 汇编程序

> ID：13681931
> 
> 赞同：0
> 
> 时间：2012-12-03T11:04:16.447
> 
> 标签：c, gcc, disassembly

我正在构建解释，用 C 编写并使用 GCC。

我改变了生成中间代码的方式。

但是在解释这段代码时发生了意想不到的变化。有一个条件块处理中间代码中的条件跳转。我没有更改那段代码。

使用 Dissy 进行反汇编。

旧版本的汇编看起来像：

```
mov  0x10(%r14),%rax
mov  0x50(%rsp),%rcx
mov  (%rcx,%rax,8),%r12
mov  (%r12),%eax
test $0x4,%al
je   4077ef
cmpb $0x0,0x8(%r12)
je   4077ef 
```

较新的版本：

```
mov  0x10(%r14),%rax
mov  (%r12,%rax,8),%rdx
mov  (%rdx),%eax
test $0x4,%al
je   4073e0
cmpb $0x0,0x8(%rdx)
je   4073e0 
```

这种变化导致了由错误预测导致的 4-6% 的性能退化。

有没有办法建议 GCC 使用旧版本而不使用汇编部分，以保持可移植性？

谢谢。

编辑

C中的代码：

```
if((M->type & 4 && M->val.boolean)
|| (M->type & 1 && M->val.number != 0.0)
|| (M->type & 2 && M->val.string.length != 0))
    // true;
else
    // false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:15:38.433

这里的分支预测有并且不可能有任何区别。

相反，您似乎已从以下位置修改了原始源代码：

```
 void my_func( int *myarray, int N) {
      do_something(myarray[N]);
 } 
```

到

```
 void modified( int * myarray, int N) {
     do_something(myarray);
     do_something_else(myarray[N]);
 } 
```

因为在后一种情况下， myarray 的基数已经缓存在寄存器 r12 中——或者您刚刚将 myarray 从本地堆栈中移出以用作函数的参数。

# c++ - CDC MFC 类成员函数 DPtoHIMETRIC() 功能在 Windows 7 和 Windows XP 之间会有所不同吗？

> ID：13681934
> 
> 赞同：1
> 
> 时间：2012-12-03T11:04:33.713
> 
> 标签：c++, visual-c++, mfc

CDC（一个 MFC 类）MFC 类成员函数 DPtoHIMETRIC() 功能在 Windows 7 和 Windows XP 之间会有所不同吗？下面是示例代码：

//以 HIMETRIC 单位计算边界矩形 //逻辑单位 = 0.01 mm，lpDrawItemStruct 的值作为函数参数传递

```
CDC pDC= CDC::FromHandle(lpDrawItemStruct->hDC);
pDC->SetMapMode(MM_HIMETRIC);
CSize wh(rc.Width(),rc.Height());
pDC->DPtoHIMETRIC(&wh);
int x = wh.cx;
int y = wh.cy; 
```

**转换后，Windows XP 中的值（x 和 y）随 Windows 7 变化。因此，功能受到影响。请提供您处理此问题的建议和意见。**

参考： **对于 CDC 类** *http://msdn.microsoft.com/en-us/library/fxhhde73(v=vs.80).aspx* **对于 DPtoHIMETRIC** *http://msdn.microsoft.com/en-us/library/h6e91ee5 (v=vs.80).aspx*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:07:26.137

从链接的 MSDN 文章：

> 转换基于物理英寸中的像素数

这受视频适配器的 DPI 设置影响。是的，在 Windows 7 上通常更高，因为它很容易更改：

![在此处输入图像描述](../Images/1aff64ccddeb2c088b1ec9ea6e3ae1c9.png)

“设置自定义文本大小 (DPI)”链接产生：

![在此处输入图像描述](../Images/f6077d997958eb5f6389b683ef0b1df7.png)

重置设置可能会使您的程序再次正常运行。或者提高一点，Windows 将开始将旧的非 DPI 感知应用程序缩放 150%。以产生模糊输出为代价。当然，这些不是真正的修复。编写在不同 DPI 设置下平滑缩放图形的代码需要工作。

# facebook - Django - facebook登录重定向后url的变化

> ID：13681936
> 
> 赞同：0
> 
> 时间：2012-12-03T11:04:41.027
> 
> 标签：facebook, python-2.7, facebook-login, django-1.4

我正在对 facebook 进行服务器端登录，成功登录后，用户被重定向到正确的位置和所有内容，但 url 最后有许多特殊标志。

这是我的登录功能：

```
def fb_login(request):
    args = dict(client_id=FACEBOOK_APP_ID, redirect_uri=request.build_absolute_uri())

    # the user is already logged into facebook
    if 'code' in request.GET:
        args['client_secret'] = FACEBOOK_APP_SECRET
        args['code'] = request.GET.get('code')
        response = urlparse.parse_qs(urllib.urlopen("https://graph.facebook"
                                                ".com/oauth/access_token?" +
                                               urllib.urlencode(args)).read())
        # A short lived access token
        access_token = response['access_token'][0]

        # Extending the short lived access token
        args['grant_type'] = "fb_exchange_token"
        args['fb_exchange_token'] = access_token
        reponse2 = urlparse.parse_qs(urllib.urlopen("https://graph.facebook"
                                                ".com/oauth/access_token?" +
                                               urllib.urlencode(args)).read())

        token = Token.objects.create(token=reponse2['access_token'][0],
            expires_in=int(reponse2['expires'][0]))
        # do stuff with the token
        return HttpResponseRedirect(reverse('profile'))

    # the user is not logged into facebook yet
    else:
        return HttpResponseRedirect("https://graph.facebook.com/oauth/authorize?" +
                                    urllib.urlencode(args)) 
```

而不是这个网址：

```
http://localhost:8000/profile/ 
```

我明白了：

```
http://localhost:8000/profile/#_=_ 
```

什么会导致 url 像这样改变？

# java - 如何使用 Java 应用程序在数据库中插入基于计划的查询？

> ID：13681937
> 
> 赞同：0
> 
> 时间：2012-12-03T11:04:44.573
> 
> 标签：java, spring, hibernate, annotations, scheduled-tasks

实际上在我使用 Flex+Java(spring+Hibernate) 的示例应用程序中......我正在将数据插入数据库。

听说我们很容易插入正常值，即数据库中只有一行操作。

在我的示例`Start Date & End Date`中，它包含组合框`Monthly Weekly Daily` 然后问题开始听到......

例如，我们选择`StartDate(2012-12-01) & EndDate(2012-12-31)`和组合框的值是`Daily`时间 05:00 PM .....所以这个语句的含义是`Every Day 05:30 PM between 2012-12-01 to 2012-12-31 the Task will execute`

为此，我`QuartTriggerBean`在 Spring Frame 工作中使用它，所以它工作正常，但我的数据库只插入一个插入查询......但我想要 31 个插入查询......

如果我们选择组合框`Weekly`然后 7 插入查询..和每月然后 1 插入查询执行...

在这个目的是他们在 Java 中的任何类？请帮助我....谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:01:20.090

您可以使用`java.util.Timer`and`java.util.TimerTask`而不是使用石英。你可以在[链接上有例子](http://oreilly.com/java/archive/quartz.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:34:36.043

不要使用`java.util.Timer`，而是使用较新的`ScheduledExecutorService`.

这个想法很简单：

1.  使用 ScheduledExecutorService 轮询数据库中的作业，以`HQL SELECT`对必须在接下来的 5 分钟内执行的所有作业执行 a。
2.  将作业添加到调度它们的 ScheduledExecutorService 中，以便它们在所需时间发生，即以毫秒为单位的预期时间 - 以毫秒为单位的 currentTime 是您要等待的持续时间。
3.  重复。

# php - php & mysql 中的 Web 服务 SOAP

> ID：13681938
> 
> 赞同：1
> 
> 时间：2012-12-03T11:04:46.257
> 
> 标签：php

我是 SOAP 新手，我正在尝试创建我的 Web 服务；不幸的是，出了点问题，似乎没有调用 server.php 页面。我使用了一个非常简单的查询开始。问题出在哪里？

这是服务器：

```
<?php 
function getStockQuote($symbol) { 
   mysql_connect('localhost','root'); 
   mysql_select_db('mio'); 
   $query = "SELECT * FROM nomi WHERE nome = '$symbol' "; 
   $result = mysql_query($query); 
   $row = mysql_fetch_assoc($result) 
   return $row['scuola'];
}

require('nusoap.php'); 
$server = new nusoap_server(); 
$server->configureWSDL('stockquote', 'urn:stockquote'); 
$server->register("getStockQuote", 
            array('symbol' => 'xsd:string'), 
            array('return' => 'xsd:string'), 
            'urn:stockquote', 
            'urn:stockquote#getStockQuote'); 

if( ! isset( $HTTP_RAW_POST_DATA )) {
   $HTTP_RAW_POST_DATA = file_get_contents( 'php://input' );
}
$server->service($HTTP_RAW_POST_DATA); 
?> 
```

这是客户..

```
<html> 
<body> 

<form method="get" action="client.php"> 
ID: <input name="symbol" type="text" value=""> 
<br> 
<br> 
<input type="submit"> 
</form> 

<?php 
$symbol = $_GET['symbol']; 
if ($symbol) { 
   require_once('nusoap.php'); 
   $c = new nusoap_client('serv.wsdl',true); 
   $stockprice = $c->call('getStockQuote', 
          array('symbol' => $symbol)); 
   echo "Information for $symbol is $stockprice."; 
} 
?> 
</body> 
</html> 
```

这是wsdl：

```
<definitions xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"  
ema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-
ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:stockquote"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"  
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/"
targetNamespace="urn:stockquote">
<types>
<xsd:schema targetNamespace="urn:stockquote">
<xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
<xsd:import namespace="http://schemas.xmlsoap.org/wsdl/"/>

</xsd:schema>
</types>
<message name="getStockQuoteRequest">
<part name="symbol" type="xsd:string"/>
</message>
<message name="getStockQuoteResponse">
<part name="return" type="xsd:string"/>
</message>
<portType name="stockquotePortType">
<operation name="getStockQuote">
<input message="tns:getStockQuoteRequest"/>
<output message="tns:getStockQuoteResponse"/>
</operation>
</portType>
<binding name="stockquoteBinding" type="tns:stockquotePortType">
<soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
<operation name="getStockQuote">
<soap:operation soapAction="urn:stockquote#getStockQuote" style="rpc"/>
<input>
<soap:body use="encoded" namespace="urn:stockquote" 
encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:stockquote"       
encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
</binding>
<service name="stockquote">
<port name="stockquotePort" binding="tns:stockquoteBinding">
<soap:address location="server.php"/>
</port>
</service>
</definitions> 
```

我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-06T12:56:21.303

尝试为您的数据库设置具有密码的用户。它对我有用。

# iphone - 视图元素自动调整大小在横向模式下不起作用

> ID：13681942
> 
> 赞同：0
> 
> 时间：2012-12-03T11:05:02.883
> 
> 标签：iphone, objective-c, ios, xcode, autoresizingmask

我有一个 viewController（比如，SecondViewController），其中在 xib 文件中我添加了一个视图（比如，containerView），并且我正在向该 containerView 添加另一个视图控制器视图作为子视图

```
[containerView addSubView:abcViewController.view]; 
```

& 为所有视图设置了自动调整大小掩码，如果我在纵向模式下运行我的代码，进入 SecondViewController 然后如果我改变方向，自动调整大小工作正常。如果我通过横向模式进入 SecondViewController，那么自动调整大小根本不起作用。如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:19:27.843

请在 Interface Builder 中检查*SecondViewController的***属性检查**器。它有一个名为**Resize View From NIB**的布局属性，它允许或阻止显示视图控制器，调整大小以适应加载时显示的视图控制器，或保持在 Interface Builder 中设计的表单。

 ***![在此处输入图像描述](../Images/81dd38e4340f44fe0469ac34569b4e5a.png)***

# sql - 将 dateadd SQL 应用于所有行

> ID：13681946
> 
> 赞同：1
> 
> 时间：2012-12-03T11:05:12.823
> 
> 标签：sql, dateadd

因此，我使用了一系列查询来尝试将 23 小时添加到“match_date”列中的所有日期，并且收到了来自所有日期的各种错误，包括语法错误和指出 stats.dateadd 不存在的错误。

```
update dates
set match_date=dateadd(hh,23,match_date)
where match_id >='1' 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:07:09.957

我猜你正在使用Oracle，并且该`dateadd`功能不可用。尝试：

```
update dates
set match_date = match_date + interval '23' hour
where match_id >= 1 
```

或者，在 SQL 中将数字添加到日期会以天为单位添加该数字。所以你也可以：

```
update dates
set match_date = match_date + 23.0/24
where match_id >= 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-02T07:17:08.800

您可以尝试使用间隔选项将日期或时间添加到 SQL 中的日期变量。您也可以尝试 dateadd 方法，但它适用于 mySql，此间隔选项适用于所有类型的 SQL 引擎，如 oracle、postgres 等。

```
update dates set match_date = match_date + INTERVAL '23 hour' where match_id >= 1; 
```

# google-app-engine - 是否可以在 Google App Engine 上运行 Google Omaha？

> ID：13681950
> 
> 赞同：1
> 
> 时间：2012-12-03T11:05:23.603
> 
> 标签：google-app-engine, self-updating

使用 Google App Engine (GAE) 平台托管 Google [Omaha](http://omaha.googlecode.com/svn/wiki/OmahaOverview.html)服务器以提供更新是什么体验？

从技术上讲，我认为可以通过使用[Blobstore](http://en.wikipedia.org/wiki/Google_App_Engine#Production) API 来完成，但我没有在网上找到任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T09:40:02.400

只要在此处实现协议，就可以使用 Google App Engine 编写服务器：

[谷歌奥马哈服务器协议 V3](https://code.google.com/p/omaha/wiki/ServerProtocol)

您可以使用 blobstore 来提供更新包，但这不是绝对必要的。包本身不必托管在同一台服务器上，换句话说，您可以将您的 exe/msi 放在网络上的任何位置，只需在 GAE 服务器实现中指向它（协议 v3 中的包 url）。

不过需要注意的一点是，omaha 要求服务器支持 ssl 或 CUP（客户端更新协议）。GAE 提供免费 ssl，地址为[https://yourserverapp.appspot.com/address_of_update_POST_page](https://yourserverapp.appspot.com/address_of_update_POST_page)，名称定义有一些限制，请参阅 GAE 安全连接常见问题。

[GAE 常见问题](https://developers.google.com/appengine/kb/general#https)

# debugging - CakePHP 调试错误未定义属性：查看：：

> ID：13681952
> 
> 赞同：0
> 
> 时间：2012-12-03T11:05:40.800
> 
> 标签：debugging, cakephp, view, undefined

我在 debug.log 中发现了许多这样的消息

```
2012-12-03 11:19:19 Notice: Notice (8): Undefined property: View::$Sidebar in [/cc/334520/cake/lib/Cake/View/View.php, line 804]
Trace:
View::__get() - CORE/Cake/View/View.php, line 804
include - APP/View/Layouts/**default.ctp, line 72**
View::_evaluate() - CORE/Cake/View/View.php, line 909
View::_render() - CORE/Cake/View/View.php, line 873
View::renderLayout() - CORE/Cake/View/View.php, line 527
View::render() - CORE/Cake/View/View.php, line 471
Controller::render() - CORE/Cake/Controller/Controller.php, line 938
ExceptionRenderer::_outputMessageSafe() - CORE/Cake/Error/ExceptionRenderer.php, line 285
ExceptionRenderer::_outputMessage() - CORE/Cake/Error/ExceptionRenderer.php, line 267
ExceptionRenderer::error400() - CORE/Cake/Error/ExceptionRenderer.php, line 209
ExceptionRenderer::render() - CORE/Cake/Error/ExceptionRenderer.php, line 165
ErrorHandler::handleException() - CORE/Cake/Error/ErrorHandler.php, line 127
[main] - [internal], line ?? 
```

在 default.ctp，第 72 行我有

```
foreach($this->Sidebar->getZone() as $zoneId => $zoneValue){ 
```

但是如果我 debug($this->Sidebar->getZone()) 我得到一个正确的结果反馈。我不明白为什么我不断收到此错误。有人对我有想法吗？

提前致谢！

# java - 如何将自定义文件夹添加到导出的 Eclipse RCP 应用程序？

> ID：13681961
> 
> 赞同：4
> 
> 时间：2012-12-03T11:06:08.133
> 
> 标签：java, export, eclipse-rcp

我有一个 Eclipse 应用程序，它从文件夹加载文件。当我导出项目并运行它时，该文件夹仅编译为 jar 文件中的二进制文件。但是我想在导出后编辑文件，所以我需要在产品目录中而不是在 jar 中。在 build.properties 中检查了该文件夹，这应该是正确的方法，但它仍然不起作用。有谁知道在哪里配置文件夹导出为真实文件夹？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:42:46.670

您可以通过功能导出其他文件，这些文件可以作为文件夹贡献到根目录。在 eclipse PDE 文档中查找根文件夹。您必须在功能的 build.properties 中使用一些特殊条目，而这无法通过 PDE ui 完成。

话虽如此，更改这些文件和产品目录可能是个坏主意。这将导致大多数多用户和现代操作系统出现问题。更改应与生成它们的插件/OSGI 包的数据一起存储。考虑这种方法：[http](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getDataFile(java.lang.String) ://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getDataFile(java.lang.String )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T12:38:26.357

如果我理解正确，您希望以“解压”形式而不是“jar”形式安装插件。这样，当插件安装在 Eclipse 框架中时，Eclipse IDE 中插件项目的文件夹也将是“物理”文件夹。

这可以通过多种方式来完成，无论目前最便携的方式似乎是将行添加`Eclipse-BundleShape: dir`到`MANIFEST.MF`文件中。（一些工具——尤其是第谷——不理解替代方案。）

# android - android如何选择照片的某些部分（不同类型/不同形状的裁剪）

> ID：13681965
> 
> 赞同：3
> 
> 时间：2012-12-03T11:06:23.960
> 
> 标签：android

我想知道如何选择不同形状的图像选择。当我裁剪图像时，它只接受矩形/正方形模型，仅此而已。我想接受不同形状的。有什么办法吗？提前致谢

# xsd - XSD 扩展一个类型，并在顶部和底部添加字段

> ID：13681969
> 
> 赞同：2
> 
> 时间：2012-12-03T11:06:47.173
> 
> 标签：xsd, jaxb

我有以下 XSD（为了问这个问题）：

```
 <xsd:complexType name="BaseType" abstract="true">
    <xsd:sequence>
      <xsd:element name="field1" type="xsd:string"/>
      <xsd:element name="field2" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="ExtendedType">
    <xsd:complexContent>
      <xsd:extension base="tns:BaseType">
        <xsd:sequence>
          <xsd:element name="fieldA" type="xsd:string"/>
          <xsd:element name="fieldB" type="xsd:string"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>

  <xsd:element name="extendedType" type="tns:ExtendedType"/> 
```

这允许 XML 文件如下：

```
<extendedType>
  <field1>hello</field1>
  <field2>world</field2>
  <fieldA>aaa</fieldA>
  <fieldB>bbb</fieldB>
</extendedType> 
```

即在BaseType的底部添加了两个新闻字段fieldA和fieldB。

有没有办法扩展BaseType，但在顶部插入fieldA，在底部插入fieldB？这样可以吗？

```
<extendedType>
  <fieldA>aaa</fieldA>
  <field1>hello</field1>
  <field2>world</field2>
  <fieldB>bbb</fieldB>
</extendedType> 
```

以及如何使 JAXB 按预期工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:07:46.047

[http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#Complex_Type_Definition](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#Complex_Type_Definition)

> 扩展另一个复杂类型的方法是在另一个定义的内容模型末尾添加额外的内容模型粒子，或通过额外的属性声明，或两者兼而有之。
> 
> *   注意：本规范只允许附加，不允许其他类型的扩展。此决定简化了将实例从派生类型转换为基本类型所需的应用程序处理。未来的版本可能允许更多种类的扩展，需要更复杂的转换来实现强制转换。

因此，在扩展类型时，仅在底部添加字段。

一个技巧：*扩展*类型的字段出现在顶部。即添加到扩展类型的字段被添加到顶部。因此，您可以具有三个级别的类型：顶级“虚拟”级别（用于顶部字段）、带有您要继承的字段的中间级别和底部级别（用于底部字段）。导入它的模式将定义底层 - 和`redefine`顶层。这将使您能够在顶部和底部添加字段。这样做的***最大*** *问题*是它还将重新定义扩展它的所有其他类型的顶层......所以这些额外的字段将出现在所有地方，这可能不是你想要的。

其他替代方案包括：避免扩展机制，而是使用`substitution groups`（但这些需要不同的元素名称）；或者在元素中创建自己的多态性`<choice>`（`<group ref="..."/>``xsi:type`

*编辑*我看到另一个答案已经涵盖了这一点我已经输入了所有这些，并且还有一些额外的建议，所以我不妨保留它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:12:14.620

**更新**

以下是 XML Schema 规范中的相关声明：

**2.2.1.3 复杂类型定义**（[http://www.w3.org/TR/xmlschema-1/#Complex_Type_Definition](http://www.w3.org/TR/xmlschema-1/#Complex_Type_Definition)）

> 扩展另一个复杂类型的方法是在另一个定义的内容模型末尾添加额外的内容模型粒子，或通过额外的属性声明，或两者兼而有之。

* * *

为了对 XML 模式有效，扩展字段需要出现在继承字段之后。未编组时，元素可以按任何顺序排列。如果您从 POJO 开始，您可以标记父类`@XmlTransient`，以便将父类属性视为子类的一部分，以便它们可以包含在子类的`propOrder`.

**了解更多信息**

*   [http://blog.bdoughan.com/2012/08/jaxbs-xmltransient-and-property-order.html](http://blog.bdoughan.com/2012/08/jaxbs-xmltransient-and-property-order.html)

# sql - Oracle SQL 查询涉及时间的四舍五入转换和日期间隔计算

> ID：13681971
> 
> 赞同：0
> 
> 时间：2012-12-03T11:06:58.670
> 
> 标签：sql, oracle, timestamp, intervals, rounding

我正在处理一个家庭作业问题。用于数据库 SQL 编程。

Q4。使用今天的日期（当前日期），确定书店销售的每本书的年龄（以月为单位）。确保显示整个月份；忽略月份的任何部分。显示书名、出版日期、当前日期和年龄。为年龄列使用列别名。

所需的查询结果：

```
TITLE                           PUBDATE                   SYSDATE            AGE                    
BODYBUILD IN 10 MINUTES A DAY  | 21-JAN-01 00:00:00 | 14-NOV-12 13:16:35 | 141  
REVENGE OF MICKEY              | 14-DEC-01 00:00:00 | 14-NOV-12 13:16:35 | 131  
BUILDING A CAR WITH TOOTHPICKS | 18-MAR-02 00:00:00 | 14-NOV-12 13:16:35 | 127    
DATABASE IMPLEMENTATION        | 04-JUN-99 00:00:00 | 14-NOV-12 13:16:35 | 161 
COOKING WITH MUSHROOMS         | 28-FEB-00 00:00:00 | 14-NOV-12 13:16:35 | 152 
HOLY GRAIL OF ORACLE           | 31-DEC-01 00:00:00 | 14-NOV-12 13:16:35 | 130 

14 rows selected 
```

这是一个书籍表，有 pub_date，我正在使用 sysdate 进行一些间隔计算。pub_date 的数据类型是 DATE。

我已经解决了这个问题，但是我无法为发布日期获得这个四舍五入的时间。它应该以 HH:MM:SS 为 00:00:00 四舍五入，但我的编码没有得到正确的结果。这是我所做的：

```
SELECT title, TO_CHAR(ROUND(pubdate), 'DD-MON-YY HH24:MM:SS') AS pubdate,
  TO_CHAR(SYSDATE, 'DD-MON-YY HH24:MM:SS') AS "SYSDATE", 
  ROUND(SYSDATE - TO_DATE(pubdate)) AS age
FROM books; 
```

我对年龄的计算出了点问题，`ROUND(SYSDATE - TO_DATE(pubdate))`。

我对圆形发布日期的编码有问题，`TO_CHAR(ROUND(pubdate), 'DD-MON-YY HH24:MM:SS') AS pubdate`.

只是想知道如何纠正我在计算年龄方面的错误，以及如何获得正确的四舍五入日期，就像它在那里一样。

这个问题参考 Murach 的 Oracle SQL，第 17 章如何使用时间戳和间隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:11:37.463

`months_between`您可以使用该函数获取两个日期之间的月数。然后，您可以将其截断为最接近的整月。

```
SELECT title, 
       TO_CHAR(ROUND(pubdate), 'DD-MON-YY HH24:MM:SS') AS pubdate, 
       TO_CHAR(SYSDATE, 'DD-MON-YY HH24:MM:SS') AS "SYSDATE", 
       trunc( months_between( sysdate, pubdate )) AS age 
  FROM books; 
```

# c# - SQL FULL JOIN 超过 6 个表

> ID：13681972
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:07:01.920
> 
> 标签：c#, mysql, sql

我有几张桌子。有人可以告诉我我必须使用哪个加入吗？

```
Table Factory : FactoryId, FactoryName

Table Person: PersonId, PersonName

Table Activity : AcitivityId, AcitivityType

Table FactoryPersonActivity: FactoryID, PersonId, ActivityId

Table AcitivityLead: AcitivityId, LeadId

Table Lead: LeadId, LeadType, LeadMethod 
```

现在的问题是：我想要某个工厂的所有潜在客户（详细信息）。有人可以告诉我加入声明必须是什么吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:10:55.413

尝试这个：

```
SELECT 
  l.LeadType,
  l.LeadMethod
  f.Name
  p.PersonNASme,
  ...
FROM Factory f 
INNER JOIN FactoryPersonActivity fpa ON f.FactoryId    = fpa.FactoryID
INNER JOIN Person                  p ON fpa.PersonID   = p.PersonId
INNER JOIN Activity                a ON fpa.ActivityID = a.ActivityId
INNER JOIN AcitivityLead          al ON a.AcitivityId  = al.AcitivityId
INNER JOIN Lead                    l ON a.LeadId       = al.LeadId
WHERE f.FactoryID = $id; 
```

请阅读更多关于`JOIN`：

*   [**加入（SQL）**。](http://en.wikipedia.org/wiki/Join_%28SQL%29)
*   [**编码恐怖：SQL 连接的可视化解释**。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)
*   [**代码项目：SQL 连接的可视化表示**。](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# javascript - Javascript画布不起作用

> ID：13681975
> 
> 赞同：1
> 
> 时间：2012-12-03T11:07:17.703
> 
> 标签：javascript, html

我正在尝试使用外部 javascript 文件创建 javascript 画布。但是由于某种原因，当我运行我的代码而不是获取我编码的画布时，我只得到一个白色块。chrome 调试器发现我的代码没有问题，所以我迷路了，任何帮助都会得到很大的帮助。

这是我的索引文件

```
<!doctype html>
    <html>
        <head>
            <title>Lab1</title> <script type="text/javascript" src="javascript/canvas.js"></script>
        </head>
        <body>
            <canvas id="canvas" width="800" height="600">
                Your browser does not support the canvas tag
            </canvas>
            <p>This is a simple 'Hello World' lab tutorial using the HTML5 canvas.</p>
        </body>
    </html> 
```

这是我的 javascript 文件

```
// check to see if the browser supports 
// the addEventListener function 
if(window.addEventListener) 
{
window.addEventListener 
( 
'Load', // this is the load event 
onLoad, // this is the event handler we are going to write 
false // useCapture boolean value 
);
}

// the window load event handler 
function onLoad() 
{ 
var canvas; 
var context;

// this function will initialise our variables 
function initialise() 
{
    // Find the canvas element using its id attribute. 
    canvas = document.getElementById('canvas'); 
    // if it couldn't be found 
    if (!canvas) 
    { 
        // make a message box pop up with the error. 
        alert('Error: I cannot find the canvas element!'); 
        return; 
    }
    // check if there is a getContext function 
    if (!canvas.getContext) 
    { 
        // make a message box pop up with the error. 
        alert('Error: no canvas.getContext!'); 
        return; 
    }
    // Get the 2D canvas context. 
    context = canvas.getContext('2d'); 
    if (!context) 
    { 
        alert('Error: failed to getContext!'); 
        return; 
    }
}

    // this function will actually draw on the canvas 
    function draw() 
    { 
        // set the draw fill style colour to black 
        context.fillStyle = "#000000"; 
        // fill the canvas with black 
        context.fillRect(0,0,canvas.width,canvas.height); 
        // choose a font for our message 
        context.font = "40pt Calibri"; 
        // set the draw fill colour to white 
        context.fillStyle = "#ffffff"; 
        // draw the text at the specified position 
        context.fillText("Hello World!", 150, canvas.height); 
    }
// call the initialise and draw functions 
initialise(); 
draw(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-06T18:18:24.583

```
window.onload = function(){
    // put here your JS code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:20:52.107

事件类型需要小写：`load`，即

```
window.addEventListener('load', onLoad, false); 
```

例如，Mozilla 引用了[可用事件类型](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference?redirectlocale=en-US&redirectslug=DOM/DOM_event_reference)的列表。

提示：您可以`onLoad`使用 Chrome 调试器在函数中设置断点，以确保事件侦听器调用它。事实并非如此，这让我注意到了你的`addEventListener`方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-27T17:21:03.560

如果某些东西不起作用，这一点很重要：

```
window.onload = myFunction;
window.addEventListener("load", myFunction); 
```

window.onload, "load"
使用小写，不要在开头加"on"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-17T08:06:47.913

```
window.onload = function(){
  // here goes your code
} 
```

# java - JComboBox 自动完成

> ID：13681977
> 
> 赞同：21
> 
> 时间：2012-12-03T11:07:23.200
> 
> 标签：java, swing, autocomplete, jcombobox

如何`JComboBox`在 Netbeans 7.1 中像`ComboBox`在 VB dot net 中一样在可编辑中执行自动完成。我有一个带有列表绑定的组合框，我想通过仅在列表中键入项目的一些第一个字母来选择项目，例如，如果列表有`kitten`，那么当我键入时应该选择它`ki`。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-03T11:15:52.853

如果您想自己执行此操作，可以按照[本文](http://www.orbital-computer.de/JComboBox/)中说明的步骤进行操作。

```
this.comboBox = new JComboBox(new Object[] { "Ester", "Jordi",
        "Jordina", "Jorge", "Sergi" });
AutoCompleteDecorator.decorate(this.comboBox); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T14:24:58.133

我开发了一个名为“ *AutoComboBox* ”的自定义摇摆 JComboBox，它会在您键入时自动完成，方法是分叉这个[gist](https://gist.github.com/resarahadian/5076440)。

这是一个小演示。

*首先声明并初始化它*。（如果您使用的是 IDE，只需将 Class 拖放到您的 JFrame 或 JDialog Form 上）

```
AutoComboBox autoComboBox = new AutoComboBox(); 
```

*接下来，设置项目列表*。它需要一个字符串数组。您可以通过修改 AutoComboBox 类来更改类型。

```
String[] itemArray =  {"Malith", "John", "Jack" };
autoComboBox.setKeyWord(itemArray); 
```

现在您有一个自动完成的 JComboBox，其中包含“Malith”、“John”、“Jack”作为项目！

这是我开发的两个类，

**AutoComboBox.java**

```
import java.util.Vector;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JTextField;

public class AutoComboBox extends JComboBox<Object> {

String keyWord[] = {"item1", "item2", "item3"};
Vector myVector = new Vector();

public AutoComboBox() {

    setModel(new DefaultComboBoxModel(myVector));
    setSelectedIndex(-1);
    setEditable(true);
    JTextField text = (JTextField) this.getEditor().getEditorComponent();
    text.setFocusable(true);
    text.setText("");
    text.addKeyListener(new ComboListener(this, myVector));
    setMyVector();
}

/**
 * set the item list of the AutoComboBox
 * @param keyWord an String array
 */
public void setKeyWord(String[] keyWord) {
    this.keyWord = keyWord;
    setMyVectorInitial();
}

private void setMyVector() {
    int a;
    for (a = 0; a < keyWord.length; a++) {
        myVector.add(keyWord[a]);
    }
}

private void setMyVectorInitial() {
    myVector.clear();
    int a;
    for (a = 0; a < keyWord.length; a++) {

        myVector.add(keyWord[a]);
    }
}

} 
```

**ComboListener.java**

```
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.Vector;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JTextField;
import org.apache.commons.lang3.text.WordUtils;

public class ComboListener extends KeyAdapter
{
@SuppressWarnings("rawtypes")
JComboBox cbListener;
@SuppressWarnings("rawtypes")
Vector vector;

@SuppressWarnings("rawtypes")
public ComboListener(JComboBox cbListenerParam, Vector vectorParam)
{
    cbListener = cbListenerParam;
    vector = vectorParam;
}

@SuppressWarnings({ "unchecked", "rawtypes" })
public void keyReleased(KeyEvent key)
{
            // TODO Auto-generated method stub
            String text = ((JTextField)key.getSource()).getText();

            cbListener.setModel(new DefaultComboBoxModel(getFilteredList(text)));
            cbListener.setSelectedIndex(-1);
            ((JTextField)cbListener.getEditor().getEditorComponent()).setText(text);
            cbListener.showPopup();
}

@SuppressWarnings({ "rawtypes", "unchecked" })
public Vector getFilteredList(String text)
{
    Vector v = new Vector();
    for(int a = 0;a<vector.size();a++)
    {
        if(vector.get(a).toString().startsWith(text))
        {
            v.add(vector.get(a).toString());
        }
                    else if(vector.get(a).toString().startsWith(text.toLowerCase()))
        {
            v.add(vector.get(a).toString());
        }
                     else if(vector.get(a).toString().startsWith(text.toUpperCase()))
        {
            v.add(vector.get(a).toString());
        }
                     else if(vector.get(a).toString().startsWith(WordUtils.capitalizeFully(text)))
        {
            v.add(vector.get(a).toString());
        }
                     else if(vector.get(a).toString().startsWith(WordUtils.uncapitalize(text)))
        {
            v.add(vector.get(a).toString());
        }
    }
    return v;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T22:27:49.363

另一个通过 JComboBox 搜索的酷库： [http ://www.jidesoft.com/products/oss.htm](http://www.jidesoft.com/products/oss.htm)

你可以在这里下载jar： [http ://www.java2s.com/Code/JarDownload/jide/jide-oss-3.5.7.jar.zip](http://www.java2s.com/Code/JarDownload/jide/jide-oss-3.5.7.jar.zip)

在您的项目中导入库后，您所要做的就是：

```
JComboBox comboBox = ....;
ComboBoxSearchable searchable = new ComboBoxSearchable(comboBox); 
```

# iphone - ViewController 和通知中心（视图，而不是设计模式：p）

> ID：13681984
> 
> 赞同：0
> 
> 时间：2012-12-03T11:07:42.977
> 
> 标签：iphone, ios, model-view-controller, uiviewcontroller, notificationcenter

我有一个包含实时摄像机源的 viewController。像许多应用程序一样，在`viewWillAppear`和`viewWillDisappear`方法中，我同时启动和停止相机。

像很多次和情况一样，似乎`viewWillDisappear`总是调用并且`willWillAppear`不再调用（因为我会说iOS 4.0？）

事情是这样的：当这个视图是我的 TabBar 的 selectedVC 时，并且用户通过一直向下拖动来显示通知中心，`viewWillDisappear`总是会调用并停止实时提要。但是当这个视图被关闭时，我再也没有收到控制器再次激活的回调。

有小费吗？谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:01:23.627

从 iOS5 开始，对 viewWillAppear 和 viewWillDisappear 的调用发生了明显的变化。因此，无论应该发生什么，如果您可以依赖它在 iOS4 中发生的事情，它不应该在 iOS5 下以另一种方式工作。这对我来说很奇怪，它变成了一个反复试验的事情！

-viewWillAppear 只保证在之前也调用过 -viewWillDisappear 的地方被调用 - 但对于大多数模态视图/窗口来说，情况似乎并非如此！这可能是通知中心的问题，它可能被视为模态窗口左右！

所以不幸的是，我没有任何好的建议给你！

您可以检查通知中心关闭时是否正在调用 applicationDidBecomeActive 并以某种方式通过应用程序委托连接您的逻辑。

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

来自[iOS 应用程序编程指南](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)：

> 在 iOS 5 中，显示横幅的通知不会像基于警报的通知那样停用您的应用程序。相反，横幅位于应用程序窗口的顶部边缘，并且您的应用程序继续像以前一样接收触摸事件。但是，如果用户拉下横幅以显示通知中心，您的应用程序将进入非活动状态，就好像发生了基于警报的中断一样。在用户关闭通知中心或启动另一个应用程序之前，您的应用程序将保持非活动状态。此时，您的应用程序将进入适当的活动或后台状态。用户可以使用设置应用程序来配置哪些通知显示横幅，哪些显示警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:29:00.750

I just found a workaround using the AppDelegate ApplicationDidBecomeActive method. After that, I manually called the `[selectedViewController viewWillAppear:YES];` :)

# javascript - 哪些语言可以嵌入到 HTML5 中？

> ID：13681989
> 
> 赞同：4
> 
> 时间：2012-12-03T11:07:57.003
> 
> 标签：javascript, html

据我所知：

*   **CSS**可以通过嵌入`<style>`

*   **JavaScript**可以通过嵌入`<script>`

*   **MathML**可以通过嵌入`<math>`

*   **SVG**可以通过嵌入`<svg>`

是否有任何其他语言可以嵌入到 HTML5 中？

如果是这样，你能告诉我这些例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:10:06.007

真的没有任何限制。例如，您可以将任何您想要的语言嵌入`<script>`标签或通过 CSS。以下是完全有效的：

```
<html>
    <head>
        <script type="text/x-my-cool-language">
            PrintTheAnswer()
        </script>
        <script src="my-cool-interpreter.js" type="text/javascript"></script>
    </head>
    <body> …
    </body>
</html> 
```

CSS 也一样。一些技术*确实*利用了这一点，特别是像[LESS](http://lesscss.org/)和[CoffeeScript](http://coffeescript.org/#usage)这样的东西。在这两种情况下，嵌入式语言的实际解释都由额外加载的 JavaScript 处理（就像上面的示例一样）。

# php - mysql查询中的重复问题添加时差条件

> ID：13681990
> 
> 赞同：0
> 
> 时间：2012-12-03T11:07:59.043
> 
> 标签：php, mysql

我有这个查询，我用它来匹配两个表。

这里发生的事情是我得到了重复的行。应该出现 10 行而不是出现 15 行。你能告诉我我做错了什么吗？

有人可以帮我添加一个新条件吗？推杆

```
i.`time`- r.`time` is between 01:00:00 and 01:05:00 
```

谢谢..

```
$data = mysql_query( "select r.`time`, r.`epos_id`,r.`basket_value`, r.`date`,re.`location`,i.`user_id`,i.`mobile_number`,
       i.`time`, i.`rbpos_id`, i.`date`
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
             and addtime(r.`time`, '01:05:00') > i.`time`
             and r.`time` < i.`time`
             and r.`date` = i.`date`;
") 
 or die(mysql_error()); 
 Print "<table border cellpadding=3>"; 
  Print "<tr>"; 
 Print "<th>Date:</th>
<th>Time</th>
<th>Location</th>
<th>User ID</th> 
<th>Basket Value</th> 
<th>Mobile Number</th>"; 
  Print "</tr>";
 while($info = mysql_fetch_array( $data )) 
 { 

   Print "<tr>"; 
 Print " <td>".$info['date'] . "</td>
<td>".$info['time'] . " </td>
<td>".$info['location'] . " </td>
<td>".$info['user_id'] . " </td>
<td>".$info['basket_value'] . " </td>
<td>".$info['mobile_number'] . " </td>
</tr>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:35:45.740

尝试这个

```
 SELECT r.`time`, r.`epos_id`,r.`basket_value`,r.`date`,re.`location`,i.`user_id`,i.`mobile_number`,i.`time`, i.`rbpos_id`, i.`date`
  FROM retailer r
  INNER JOIN rbpos_epos re 
  ON r.epos_id = re.epos_id
  INNER JOIN imovo i 
  ON i.rbpos_id = re.rbpos_id
  WHERE i.`time`- r.`time` BETWEEN '01:00:00' and '01:05:00'
  AND   r.`date` = i.`date`
  AND   r.`time` < i.`time`
  AND  addtime(r.`time`, '01:05:00') > i.`time` 
```

# c++ - gcc 471 抛出 Visual Studio 2010 编译

> ID：13681991
> 
> 赞同：0
> 
> 时间：2012-12-03T11:08:01.730
> 
> 标签：c++, visual-studio-2010, gcc

下面的代码使用 VS 成功编译，但 gcc 给出了 SIGSEGV，标记为 SIGSEGV_E

```
#include <iostream>
#include <string>
#include <algorithm>
using std::cout;

std::string encode(const std::string& decoded)
{
    std::string encoded_url(decoded);//SIGSEGV_E this line causes gcc to signal SIGSEGV
    typedef typename std::string::iterator iterator;
    for (iterator i = encoded_url.begin();(i = std::find(i,encoded_url.end(),'%')) != encoded_url.end();++i)        {
        cout << *i << *(i + 1) << *(i + 2) << '\n';
    }
    return encoded_url;
}
int main()
{
    std::string decoded_url("http%3A%2F%2Fo-o---preferred---sn-xn5ucu-q0ce---v20---lscache7.c.youtube.com%2Fvideoplayback%3Fupn%3DQfNLYnp9JHM%26sparams%3Dcp%252Cgcr%252Cid%252Cip%252Cipbits%252Citag%252Cratebypass%252Csource%252Cupn%252Cexpire%26fexp%3D907724%252C923009%252C914070%252C916626%252C922401%252C920704%252C912806%252C927201%252C925703%252C925706%252C928001%252C922403%252C913546%252C913556%252C920201%252C911116%252C901451%26ms%3Dau%26expire%3D1354491207%26itag%3D43%26ipbits%3D8%26gcr%3Die%26sver%3D3%26ratebypass%3Dyes%26mt%3D1354467611%26ip%3D89.204.226.98%26mv%3Dm%26source%3Dyoutube%26key%3Dyt1%26cp%3DU0hUSVRUT19FUUNONF9MTlNDOm05Ql9HWWNIejNM%26id%3Dcaf9021d49b11ad9%26newshard%3Dyes&type=video%2Fwebm%3B+codecs%3D%22vp8.0%2C+vorbis%22&fallback_host=tc.v1.cache5.c.youtube.com&sig=63E945F5FCC5744AFDA6A473D2B7D3A464DC56AE.31AF09E39FFF100E5A5066418689DA3DD4D78C37&quality=medium");
    cout << encode(decoded_url);
    return 0;
} 
```

任何想法为什么，以及如何克服这个愚蠢的问题？

# postgresql - 如何将几何数据字符串转换为度数？

> ID：13681997
> 
> 赞同：0
> 
> 时间：2012-12-03T11:08:26.017
> 
> 标签：postgresql, geometry, postgis

查询 SELECT geom FROM myLayer; 我在表格中得到一个 2 公里长的字符串，我希望我可以将其转换为弧度值以便稍后处理它们。这是我得到的一个例子：

```
"01060000000100000001030000000100000005000000000070AC9FB81841000053BF535551410000303295B8184100001A6053555141000060FE8EB818410000670654555141000090399AB8184100004C6854555141000070AC9FB81841000053BF53555141" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:01:32.580

您所看到的是 PostGIS 如何在内部存储几何图形的表示。您需要使用 ST_AsText 或 ST_ASEWKT 之类的东西（请参阅[http://www.postgis.org/docs/ST_AsEWKT.html](http://www.postgis.org/docs/ST_AsEWKT.html)）

所以，以你为例， `SELECT ST_ASEWkt(geom) FROM myLayer;`

为了得到弧度，我可能会做的是将它投影到十进制度数基准（即 WGS84），分别剥离 x 和 y 坐标并转换它们（假设这里是点几何）。因此，例如： `SELECT ST_X(ST_Transform(geom, 4326))*3.14/180, ST_Y(ST_Transform(geom,4326))*3.15/180 FROM myLayer;`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T03:02:55.153

您有投影坐标，并且想要提供地理（未投影）坐标。我敢打赌你想要度数而不是弧度，所以常见的目标 SRID 是 4326。使用[ST_Transform](http://postgis.refractions.net/docs/ST_Transform.html)重新投影数据：

```
SELECT ST_Transform(geom, 4326) AS geom_in_degrees
FROM your_table; 
```

请注意，应为源几何列设置 SRID。如果不是，那么就有问题。

* * *

在进一步的理论说明中，要将度数坐标转换为弧度（我从未见过！），您可以将坐标从 (0,0) 的原点缩放 π/180。这可以使用仿射变换函数来完成，或者它的助手[ST_Scale](http://postgis.refractions.net/docs/ST_Scale.html)：

```
SELECT ST_Scale(
         ST_SetSRID(ST_Transform(geom, 4326), 0),
         pi()/180.0, pi()/180.0) AS geom_in_radians
FROM your_table;; 
```

# java - Eclipse：内容辅助在处理程序中不可用

> ID：13681998
> 
> 赞同：3
> 
> 时间：2012-12-03T11:08:33.133
> 
> 标签：java, eclipse

My Code Assist (Ctrl Space) 在 Eclipse 中有效，但并非无处不在。如果我输入

线。在 onClick 处理程序中，没有列出任何建议。如果我在此处理程序之外键入它们，它们将出现。为什么？

```
button.setOnClickListener(new OnClickListener()
{
  @Override
   public void onClick(View v)
   {
     Thread.sleep(100);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:58:22.923

我敢打赌，这是一个导致内容助手在匿名类中失败的[IDE 错误。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=367612)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:18:54.973

我在eclipse中尝试了你的代码，一切都很好，代码**线程。** 居然打开了eclipse*智能感知*。

您的问题可能是由于以下原因之一：

1.  整体java文件存在一些错误
2.  添加的外部/内部库中有问题
3.  Eclipse后台操作中卡住了一些东西

无论哪种方式，删除和重新添加使用的库都可以解决问题；
然后重启eclipse。