# StackOverflow 问答 13938000-13938999

# ruby-on-rails - 在 Rails 3.1.6 生产环境中损坏的 PDF 附件

> ID：13938002
> 
> 赞同：0
> 
> 时间：2012-12-18T17:06:19.220
> 
> 标签：ruby-on-rails, heroku, actionmailer, email-attachments

我将 pdf 文档存储在数据库中，并使用以下代码行通过电子邮件发送：+

```
def invoice(payment)
  @payment = payment
  @user = payment.subscriber or raise(ActiveRecord::RecordNotFound)
  @subscription = payment.subscription or raise(ActiveRecord::RecordNotFound)
  attachments[@payment.invoice_doc_name] = {
    :mime_type => 'application/pdf',
    :encoding => 'base64',
    :content => @payment.invoice_pdf
  } 
  mail to: @user.email
end 
```

这在我在 Heroku Cedar 上的开发、测试和暂存环境中运行良好，就像生产一样。PDF是正确的，我可以在用户界面中下载它。生产配置为：

```
Railsapp::Application.configure do
# Settings specified here will take precedence over those in config/application.rb

# Code is not reloaded between requests
config.cache_classes = true

# Full error reports are disabled and caching is turned on
config.consider_all_requests_local             = false
config.action_controller.perform_caching = true

# Disable Rails's static asset server (Apache or nginx will already do this)
config.serve_static_assets = true

# Compress JavaScripts and CSS
config.assets.compress = true

# Specify the default JavaScript compressor
config.assets.js_compressor    = :uglifier

# Specifies the header that your server uses for sending files
# (comment out if your front-end server doesn't support this)
config.action_dispatch.x_sendfile_header = nil

# Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
config.force_ssl = true

# See everything in the log (default is :info)
# config.log_level = :debug

# Use a different logger for distributed setups
config.logger = Logger.new($stdout)

# Use a different cache store in production
# config.cache_store = :mem_cache_store

# Enable serving of images, stylesheets, and JavaScripts from an asset server
# config.action_controller.asset_host = "http://assets.example.com"

# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
# config.assets.precompile += %w( search.js )

# Disable delivery errors, bad email addresses will be ignored
# config.action_mailer.raise_delivery_errors = false

# Enable threaded mode
# config.threadsafe!

# Enable locale fallbacks for I18n (makes lookups for any locale fall back to
# the I18n.default_locale when a translation can not be found)
config.i18n.fallbacks = true

# Send deprecation notices to registered listeners
config.active_support.deprecation = :notify

# Setup for production - deliveries, no errors raised
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = false
config.action_mailer.default :charset => "utf-8"
config.action_mailer.default_url_options = {
    :host => 'www.****.com',
    :protocol => 'https'
} 
config.action_mailer.smtp_settings = {
    :address => 'smtp.gmail.com',
    :enable_startls_auto => true,
    :port => 587,
    :authentication => :plain,
    :user_name => '***',
    :password => '***'
}
end 
```

# django - 在您自己的视图中集成 django 应用程序

> ID：13938003
> 
> 赞同：2
> 
> 时间：2012-12-18T17:06:19.937
> 
> 标签：django, django-templates, django-views

假设我正在用 django 编写一个带有 wiki、论坛等的复杂站点，或者编写我自己打算从不同站点重用的应用程序。

例如，我真的想创建一个底部有论坛的 wiki 页面，或者重用我之前编写的具有不同图形布局的 wiki 应用程序。

构建我的应用程序以允许这种重用的最佳方法是什么？

到目前为止，我一直在 urls.py 中为应用程序提供自己的 url。但是，如果我想在一个页面中将多个应用程序组合在一起，这将不起作用。

此外，我在网上找到的大多数应用程序都带有自己的模板，这些模板具有完整的 html，并且没有将创建/准备上下文的逻辑与处理请求和生成回复的逻辑分开。

这里的最佳做法是什么？你做什么工作？编辑来自您在线下载的应用程序的模板？重构它们以适应您的应用程序？

我应该为自己的应用程序做些什么？构造它们，使它们具有获取上下文的方法和呈现上下文的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:47:06.463

Django 对面向组件的体系结构没有很好的开箱即用支持。我有时也觉得这有问题。你会在这里遇到问题。

1.  建筑学
2.  代码

**架构：**由于 Django 不是面向组件的，所以所有的应用程序也不是面向组件的。这些应用程序的设计者和编码人员没有考虑过这一点。所以他们刚刚建立了“视图”来与他们的应用程序交互。你需要得到一些更“可插拔”的东西。

**代码：**一旦你决定构建它，你就必须找到你为此提供的支持。大多数 Django 应用程序的代码都非常好，因此您不会在视图中包含太多代码，而是在其他地方进行抽象。这样您就可以重用该代码并构建自己的组件。

**示例：**假设您正在使用第三方 Wiki 应用程序。该 wiki 具有显示排名最高的标签的视图和用于创建 wiki 条目的其他视图。如果代码足够好（我假设这是因为 Django 有一个非常好的社区），你可以重构它以使用组件。创建条目的视图必须使用一些表单，您可以将其插入自己的站点。并且获得最高排名标签的视图可能使用一些实用功能，或者一些标签管理器的方法。在这种情况下，您可以根据自己的需要对其进行重构。

希望能帮助到你。

# php - 从 mysql 数据库中的 PHP 输出名称

> ID：13938005
> 
> 赞同：-1
> 
> 时间：2012-12-18T17:06:36.083
> 
> 标签：php, html, mysql, sql, database

我有一个数据库中的名称列表，我想一一显示

（同样对于奖励积分，数据库中的另一列是一个布尔值，用于指示任务是否完成。如果这是真的，我希望 CSS 内容框背景为绿色而不是红色。）

那么如何从第一行中选择一个名称，将其放入 PHP 变量，然后从第 2 行的“名称”列中选择值并将其放入另一个 PHP 变量或数组中的下一项？

谢谢你的帮助！

```
<html>
<head>
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="mngPWinCSS.css"/>

</head>

<body>
    <?php

        $dsn ='mysql:host=****.******.com;dbname=o****_**n';
        $username='********';
        $password ='******';

        mysql_connect('localhost',$username,$password);
        $query=mysql_query("SELECT Name FROM CLOAS_Team LIMIT 0,1");
        $bob="dkajfk";

        $url=$_SERVER['REQUEST_URI'];
        header("Refresh: 60; URL=$url"); 
        $com[1]="i";
        $com[2]="i";
        $com[3]="i";
        $com[4]="i";
        $com[5]="i";
        $com[6]="i";
        $name=mysql_fetch_array($query);

    ?>
    <div id="content">
        <img src="logjpg.JPG" alt="Smiley face" height="50" width="200">
    <h3>CLOAS Tracker</h3>

    </div>
     <div id="Content">
        <?php

        ?>

        <div id="complete">
            <h3names>
                <?php 
                    echo $name['Name'];
                ?>
            </h3names>
        </div>
        <div id="incomplete">
            <h3names>Name2</h3names>
        </div>

     </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:25:48.927

首先，您需要更改您的 SELECT 查询以选择您希望显示的所有行，可能通过取消 LIMIT 子句。像这样的东西；

```
$result=mysql_query("SELECT Name FROM CLOAS_Team"); 
```

（这将为您提供表中的所有名称。）

接下来，您需要遍历从此查询中获得的结果，如下所示；

```
$names = array();
while($row = mysql_fetch_assoc($result))
{
$names[] = $row['Name'];
} 
```

这将为您将它们放入数组 $names 中，然后您可以使用它。您可能希望立即输出它们，而不是将它们放入数组中，也许像这样；

```
while($row = mysql_fetch_assoc($result))
{ ?>
<div>
            <h3>
                <?php 
                    echo $row['Name'];
                ?>
            </h3>
        </div>
<?php } ?> 
```

但是，您的代码中还有更多错误。如;

*   你不能只发明 html 元素称为`<h3names>`
*   我怀疑您是否要将 id 属性设置为“不完整”。一个 id 应该是唯一的，我希望你应该把它作为一个类（类 =“不完整”）
*   我认为您的行`header("Refresh: 60; URL=$url");`不会做任何事情，因为您的标题已经发送到页面。如果你想让这条线工作，它需要在顶部，在任何输出被发送到浏览器之前。

对于奖励点，在您的查询中包含“已完成”字段（如果这就是它的名称）并使用它为`<div>`您在循环中显示的每个元素添加样式。所以你的查询可能会变成；

```
$result=mysql_query("SELECT Name, Completed FROM CLOAS_Team"); 
```

你的循环现在是这样的；

```
 while($row = mysql_fetch_assoc($result))
    { ?>
    <div style = "background-color:<?php echo $row['Completed'] == true ? 'green' : ' red'; ?>">
                <h3>
                    <?php 
                        echo $row['Name'];
                    ?>
                </h3>
            </div>
    <?php } ?> 
```

# php - 如何使用多个数据库模式管理 Doctrine 查询

> ID：13938008
> 
> 赞同：7
> 
> 时间：2012-12-18T17:06:37.910
> 
> 标签：php, symfony, doctrine-orm, doctrine-query

我有一个实体 A 与 B 的 ManyToOne 关系，但 A 和 B 不属于同一个数据库模式。

实体“A”属于 MyBundle 包，实体“B”属于 MyOtherBundle 包。

官方文档解释了如何使用不同的连接：多个模式 = 多个实体管理器。但就我而言，我想加入这两个实体。

通过做 ：

```
$this->objEm->getRepository('MyBundle:MyEntity')->find($id); 
```

或者

```
$this->objEm->getRepository('MyBundle:MyEntity')->getMyResult($id); 
```

我只调用我的一个存储库，我猜他无法获得另一个，因为在我的 config.yml 中我只能选择一个连接。

```
doctrine:
  dbal:
   connections:
     connection1:
       driver:   "%database_driver%"
       host:     "%database_host%"
       port:     "%database_port%"
       dbname:   "%database_name%"
       user:     "%database_schema1_user%"
       password: "%database_schema1_password%"
       service:  "%database_service%"
       charset:  "Windows-1252"
     connection2:
       driver:   "%database_driver%"
       host:     "%database_host%"
       port:     "%database_port%"
       dbname:   "%database_name%"
       user:     "%database_schema2_user%"
       password: "%database_schema2_password%"
       service:  "%database_service%"
       charset:  "Windows-1252"

orm:
  entity_managers:
    em1:
      connection:       connection1
      mappings:
              MyBundle: ~
              MyOtherBundle: ~
    em2:
      connection:       connection2
      mappings:
              MyOtherBundle: ~ 
```

结果：哎呀，好像出了点问题。

1/1ReflectionException: 类 FQCN\Of\MyBundle\Entity\B 不存在...

“我知道它不存在，伙计，我想让你看看现在的好地方：比如在 FQCN\Of\MyOtherBundle\Entity\B”

如何强制通往我的实体“B”的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:38:42.300

如果您的架构在同一个数据库中，那么只需将实体的表定义为

```
Bundle\Entity\Class:
    type: entity
    table: schema.class 
```

(yaml)

您无需指定第二个连接。当明确指出模式时，这些连接在学说 2 中完美运行。

如果你的模式在不同的数据库中，你会遇到一些痛苦，因为每个连接都会查询两个数据库；对于多个记录连接，每个条目都将执行连接，这意味着您执行的查询数量与结果集中的对象数量成正比 (BAD)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:23:45.100

问题解决了 ！它与数据库模式或注释完全无关。

在实体 A 中，我的一位个人设置者强制输入参数：

```
public function setB(B $objB) { //... } 
```

...我忘记使用 B 的 FQCN 了！这就是为什么它使用A的原因。

下次我不会在注释中声明 FQCN 来强制我在上课开始时使用它！:)

# .net - 如何通过安装桌面应用程序升级用户的 .NET 版本

> ID：13938012
> 
> 赞同：1
> 
> 时间：2012-12-18T17:06:54.307
> 
> 标签：.net, wpf, installation, upgrade

通过安装 WPF 桌面应用程序自动升级用户的 .NET 版本的最佳方法是什么？

具体来说，我正在尝试将用户计算机从 .NET 3.5 升级到 4.0 或 4.5（尚未决定）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:17:08.770

因为您使用的是 WPF，所以我会采取行动。您是否使用 Visual Studio 中的 ClickOnce/Publish？如果您右键单击项目，选择属性，然后单击发布选项卡，您将看到一个先决条件按钮。在那里你可以设置你需要的框架。

# android - 解析变量

> ID：13938014
> 
> 赞同：0
> 
> 时间：2012-12-18T17:07:03.490
> 
> 标签：android

我从书中取了一个程序作为模板。在`activity_main.xml`我有：

```
android:id="@+id/contactID"//and 
android:id="@+id/contactName" 
```

两者都在单独的文本视图中指定。

然后在 mainActivity.java 我有：

```
int[] views = new int[] {R.id.contactName, R.id.contactID}; 
```

两个变量都没有在 java 文件中定义，这对我来说看起来很奇怪，但这就是书上所说的......而且 eclipse 说这两个变量都不能被解析或者是一个字段，所以它不会编译。这是正确的内容视图。

我猜 R 应该在编译时选择这些 - 它没有。我试过打扫卫生，没有任何乐趣。抱歉，如果我遗漏了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:09:12.263

检查您的导入。`android.R`如果已导入，请删除。并导入您的 R。还要​​确保您的 xmls 中没有任何错误，否则您的 R 将不会生成。

# css - div没有向右浮动

> ID：13938018
> 
> 赞同：6
> 
> 时间：2012-12-18T17:07:15.067
> 
> 标签：css, html

为什么蓝色 div 不与绿色 div 相邻？

这是html。只不过是有边界的容器。

```
<div id="wrapper960"  style="min-height:350px; border:1px red solid">
<div class="content-sidebar-l" style="min-height:250px; border:1px yellow solid">&nbsp;</div>
<div class="content" style="min-height:250px; border:1px green solid"></div>
<div class="content-sidebar-r"style="min-height:250px; border:1px blue solid"></div>

</div> 
```

这是中间 div 居中的 CSS。

```
#wrapper960 {margin:0 auto; padding:0; width:960px;}

.content-sidebar-l {
  float: left; 
  width:170px; 
  margin:0; 
  padding:0;}
.content {
  margin:0 auto; 
  padding:1em 0 0 0; 
  width:610px; 
  background-color:#fff;}
.content-sidebar-r {
  float: right;
  width:160px; 
  margin:0; 
  padding:0;} 
```

[![蓝色 div 浮动右侧问题](../Images/e4b718933c4a2a5ebfdb34b287879643.png)](https://i.stack.imgur.com/AkxGE.png)
[（来源：[imagesup.net](http://www.imagesup.net/?di=7135585031013)）]

这是在[JSFiddle](https://jsfiddle.net/eYJaP/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:15:35.260

将您的 HTML 重新排序为：

```
<div id="wrapper960"  style="min-height:350px; border:1px red solid">
<div class="content-sidebar-r"style="min-height:250px; border:1px black solid"></div>
<div class="content-sidebar-l" style="min-height:250px; border:1px yellow solid">&nbsp;</div>
<div class="content" style="min-height:250px; border:1px green solid"></div>
</div>​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/TwJFe/)**

您需要首先将侧边栏浮动到右侧，否则通过将其放在最后，它不能在它之前浮动的元素上方浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:16:47.727

您没有代码可以让蓝色 div 在绿色 div 旁边冒泡。

例如

```
.content { float: left; } 
```

# erlang - 从 Mod:handle_cast 调用 gen_server:cast

> ID：13938019
> 
> 赞同：4
> 
> 时间：2012-12-18T17:07:15.083
> 
> 标签：erlang, erlang-otp

这是我的代码：

```
handle_cast(start, #state{started = false} = State) ->
    gen_server:cast(self(), add_process),
    {noreply, State#state{started = true}};
handle_cast(add_process, State) -> ... 
```

`gen_server:cast`从函数内部调用`handle_cast`可以吗？我期望它`handle_cast`会返回一个新状态，然后`add_process`立即处理消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:15:02.827

这是正确的，除了消息可能不会“立即”处理 - 它被放在消息队列中，并且队列中它之前的消息将首先被处理。

正如您可能已经发现的那样，这适用于`gen_server:cast`使用 发送的消息`!`，但不适用于使用 发送的消息`gen_server:call`，这会导致这里出现死锁。

# javascript - jQuery aToolTip 插件仅适用于链接的标题，我如何让它也适用于图像、字段和跨度的标题？

> ID：13938020
> 
> 赞同：3
> 
> 时间：2012-12-18T17:07:17.783
> 
> 标签：javascript, jquery, html, css, tooltip

我当前的工具提示仅适用于链接的标题，而不适用于图像、字段或跨度的标题 - 如何让工具提示适用于所有标题？

这是 aToolTip JS：

```
(function($) {
    $.fn.aToolTip = function(options) {
        /**
            setup default settings
        */
        var defaults = {
            // no need to change/override
            closeTipBtn: 'aToolTipCloseBtn',
            toolTipId: 'aToolTip',
            // ok to override
            fixed: true,
            clickIt: false,
            inSpeed: 200,
            outSpeed: 100,
            tipContent: '',
            toolTipClass: 'defaultTheme',
            xOffset: 5,
            yOffset: 5,
            onShow: null,
            onHide: null,

        },
        // This makes it so the users custom options overrides the default ones
        settings = $.extend({}, defaults, options);

        return this.each(function() {
            var obj = $(this);
            /**
                Decide weather to use a title attr as the tooltip content
            */
            if(obj.attr('title')){
                // set the tooltip content/text to be the obj title attribute
                var tipContent = obj.attr('title');  
            } else {
                // if no title attribute set it to the tipContent option in settings
                var tipContent = settings.tipContent;
            }

            /**
                Build the markup for aToolTip
            */
            var buildaToolTip = function(){
                $('body').append("<div id='"+settings.toolTipId+"' class='"+settings.toolTipClass+"'><p class='aToolTipContent'>"+tipContent+"</p></div>");

                if(tipContent && settings.clickIt){
                    $('#'+settings.toolTipId+' p.aToolTipContent')
                    .append("<a id='"+settings.closeTipBtn+"' href='#' alt='close'>close</a>");
                }
            },
            /**
                Position aToolTip
            */
            positionaToolTip = function(){
                $('#'+settings.toolTipId).css({
                    top: (obj.offset().top - $('#'+settings.toolTipId).outerHeight() - settings.yOffset) + 'px',
                    left: (obj.offset().left + obj.outerWidth() + settings.xOffset) + 'px'
                })
                // added delay() call...
                .stop().delay(1000).fadeIn(settings.inSpeed, function(){
                    if ($.isFunction(settings.onShow)){
                        settings.onShow(obj);
                    }
                }); 

            var $tooltip = $('#' + settings.toolTipId),
                $win = $(window),
                winLeft = $win.scrollLeft(),
                objWidth = obj.outerWidth(),
                tipWidth = $tooltip.outerWidth(),
                offset = obj.offset(),
                ttWidth = $tooltip.outerWidth(),
                ttHeight = $tooltip.outerHeight();
        $win.width() < (offset.left - winLeft + objWidth + tipWidth + ttWidth) ?
            $tooltip  //reversed (to left)
                .addClass("reversed")
                .css({
                    left: offset.left - winLeft - tipWidth - ttWidth,
                    top: offset.top - $win.scrollTop() + obj.outerHeight() / 2 + ttHeight
     })
          :
           $tooltip //standard (to right)
            .css({
               left: offset.left - winLeft + objWidth + ttWidth,
                top: offset.top - $win.scrollTop() + obj.outerHeight() / 2 + ttHeight
     });            
            },
            /**
                Remove aToolTip
            */
            removeaToolTip = function(){
                // Fade out
                $('#'+settings.toolTipId).stop().fadeOut(settings.outSpeed, function(){
                    $(this).remove();
                    if($.isFunction(settings.onHide)){
                        settings.onHide(obj);
                    }
                });             
            };

            /**
                Decide what kind of tooltips to display
            */
            // Regular aToolTip
            if(tipContent && !settings.clickIt){    
                // Activate on hover    
                obj.hover(function(){
                    // remove already existing tooltip
                    $('#'+settings.toolTipId).remove();
                    obj.attr({title: ''});
                    buildaToolTip();
                    positionaToolTip();
                }, function(){ 
                    removeaToolTip();
                }); 
            }           

            // Click activated aToolTip
            if(tipContent && settings.clickIt){
                // Activate on click    
                obj.click(function(el){
                    // remove already existing tooltip
                    $('#'+settings.toolTipId).remove();
                    obj.attr({title: ''});
                    buildaToolTip();
                    positionaToolTip();
                    // Click to close tooltip
                    $('#'+settings.closeTipBtn).click(function(){
                        removeaToolTip();
                        return false;
                    });      
                    return false;           
                });
            }

            // Follow mouse if enabled
            if(!settings.fixed && !settings.clickIt){
                obj.mousemove(function(el){
                    $('#'+settings.toolTipId).css({
                        top: (el.pageY - $('#'+settings.toolTipId).outerHeight() - settings.yOffset),
                        left: (el.pageX + settings.xOffset)
                    });
                });         
            }           

        }); // END: return this
    };
})(jQuery); 
```

这是我用来触发它的标头中的 JavaScript：我尝试修改它以尝试将工具提示限制为两个可能的替代项，漂亮的工具提示插件和一个简单的“工具提示问题”类以获得更详细的提示。

```
$(function() {
$("a:not(.tooltipquestion)").aToolTip({ 
        closeTipBtn: 'aToolTipCloseBtn',  
        toolTipId: 'aToolTip',  
    fixed: false,                   // Set true to activate fixed position
        clickIt: false,                 // set to true for click activated tooltip
inSpeed: 400,                   // Speed tooltip fades in   --chris/peter 12/9
        outSpeed: 400,                  // Speed tooltip fades out  
        tipContent: '',                 // Pass in content or it will use objects 'title' attribute  
        toolTipClass: 'defaultTheme',   // Set class name for custom theme/styles  
        xOffset: 15,                     // x position  
        yOffset: -50,                     // y position  
        onShow: null,                   // callback function that fires after atooltip has shown  
        onHide: null                    // callback function that fires after atooltip has faded out      
    });  
        }); 
```

工具提示的 CSS 如下：

```
#aToolTip {
    position: absolute;
    display: none;
    z-index: 50000;
    max-width: 350px;
    collision: flipfit flip;

}

    #aToolTip .aToolTipContent {
        position:relative;
        margin:0;
        padding:0;
        max-width: 350px;
        collision: flipfit flip;
    }
    #aToolTip span {
        position: absolute;
        display: none;
        z-index: 50000;
}
    #aToolTip .aToolTipContent span {
    position:relative;
        margin:0;
        padding:0;
}

/* 
    END: Required Styles
*/
/**
    Default Theme
*/
.defaultTheme {
    border:2px solid #444;
    background:#555;
    color:#fff;
    margin:0;
    padding:6px 12px;   
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 10pt;    
    -moz-border-radius: 0 12px 12px 12px ;
    -webkit-border-radius: 0 12px 12px 12px ;
    -khtml-border-radius: 0 12px 12px 12px ;
    border-radius: 0 12px 12px 12px ;

/*
    -moz-border-radius: 12px 12px 12px 0;
    -webkit-border-radius: 12px 12px 12px 0;
    -khtml-border-radius: 12px 12px 12px 0;
    border-radius: 12px 12px 12px 0;

    -moz-border-radius: 6px 6px 6px 0;
    -webkit-border-radius: 6px 6px 6px 0;
    -khtml-border-radius: 6px 6px 6px 0;
    border-radius: 6px 6px 6px 0;
*/
    -moz-box-shadow: 2px 2px 5px #111; /* for Firefox 3.5+ */
    -webkit-box-shadow: 2px 2px 5px #111; /* for Safari and Chrome */
    box-shadow: 2px 2px 5px #111; /* for Safari and Chrome */
}

    .defaultTheme #aToolTipCloseBtn {
        display:block;
        height:18px;
        width:18px;
        background:url(../images/closeBtn.png) no-repeat;
        text-indent:-9999px;
        outline:none;
        position:absolute;
        top:-20px;
        right:-30px;
        margin:2px;
        padding:4px;
    } 
```

这是一些 HTML 的示例，它有几个工具提示 - 一个工作标题、一个使用 class="tooltipquestion" 和一个我希望 jQuery 插件处理的非工作标题：

```
<tr>
      <td class="checkbox"><input type="checkbox" name="paramId[]" id="paramId[]" /></td>
      <td class="open"><a href="questions_edit.asp" title="View this question">Biology, lab, meth</a></td>
        <td class="open">Haney, M</td>
        <td class="open">Draft</td>
        <td class="open">M/C</td>
        <td class="action" nowrap="nowrap"><a href="#" class="tooltipquestion" title= "<strong>Plant leaves appear green because they ____ light spectrum. </strong>

    <br><b>a.)</b>&nbsp;Scatter all colors except the green portion of the visible.
    <br><b>b.)</b>&nbsp;Scatter the green portion of the visible.
    <br><b>c.)</b>&nbsp;Absorb the green portion of the visible.
    <br><b>d.)</b>&nbsp;Scatter the green portion of the ultraviolet. ">Preview</a></td>
        <td class="action" nowrap="nowrap"><a href="questions_edit.asp" title="Edit this question"><img src="Icons/edit-green.gif" alt="Edit Question" title="Edit Question" width="16" height="16" border="0" /></a>&nbsp;<a href="questions_listing.asp?confirmation=1"><img src="Icons/delete.png" alt="Delete Question" title="Delete Question" width="16" height="16" border="0" /></a></td>
    </tr> 
```

如何调整我的代码以允许工具提示和标题以及已经工作的标题也可以触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:32:59.113

您需要针对不同的元素。目前，您的目标是任何没有此类的锚...

```
.tooltipquestion 
```

理想情况下，您想要做的是，对于您想要应用工具提示的任何元素，您给它一个类

```
.tooltip 
```

然后你用这个类作为目标选择器初始化插件......

```
$('.tooltip').aToolTip(); 
```

然后，您需要为任何“工具提示”元素提供标题属性...

```
<span title="This is a span tag..." class="tooltip">Some text</span> 
```

然后，您对任何其他元素执行相同操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:53:05.283

也许这可以帮助你：

```
$('*[title]').each(function() {
    this.aToolTip(...);
}​);​ 
```

此代码适用于具有标题的每个元素。

# google-app-engine - 如何更改开发服务器的端口

> ID：13938023
> 
> 赞同：8
> 
> 时间：2012-12-18T17:07:34.913
> 
> 标签：google-app-engine

我正在尝试从[maven-gae-plugin](https://github.com/maven-gae-plugin/maven-gae-plugin)切换到[appengine-maven-plugin](https://developers.google.com/appengine/docs/java/tools/maven)。

到目前为止，我能够启动 devserver 并且一切正常。但是，我想知道如何更改端口，因为我在 8080 上运行了其他东西。有人已经弄清楚了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T22:59:11.273

我刚刚推送了一个支持此选项的快照版本。您可以像这样配置它：

```
 <plugin>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-maven-plugin</artifactId>
            <version>1.7.5-SNAPSHOT</version>
            <configuration>
                <port>8008</port>
            </configuration>
        </plugin> 
```

阅读[http://code.google.com/p/appengine-maven-plugin/](http://code.google.com/p/appengine-maven-plugin/)了解如何获取快照版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:42:05.153

如果您使用的是`GoogleAppEngineLauncher`，您只需单击应用程序并在那里更改端口。如果你是通过终端运行，使用下面的标签，当然你应该替换`8080`成你的实际端口号。

```
--admin_console_server= --port=8080 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T14:20:31.900

要在不同的端口上运行 GAE 开发服务器：

```
$ dev_appserver.py --port=<unused port> <app name> 
```

（不是确切问题的答案，但谷歌在我搜索时指出了这一点。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-07T16:29:40.227

如果您使用的是 AppEngine Launcher：您还可以通过直接编辑 ini 文件来更改端口：

```
C:/Users/username/Google/google_appengine_projects.ini 
```

# linux - 如何让 Log4perl 每天轮换我的日志？

> ID：13938029
> 
> 赞同：3
> 
> 时间：2012-12-18T17:08:08.420
> 
> 标签：linux, perl, logging, log4perl

我正在阅读[Log4perl](http://search.cpan.org/~mschilli/Log-Log4perl-1.40/lib/Log/Log4perl.pm)并想尝试使用它来对我在 Linux 机器上运行的 Perl 脚本进行简单的日志管理。我也阅读过`newsyslog`，`logrotate`但如果可能的话，我想使用 Log4perl。

我正在尝试配置`/etc/log4perl.conf`文件，以便它：

*   定义将所有输出写入的`widget`记录器（级别） ，其中是日期/时间格式的字符串，例如`INFO``/opt/myapp/logs/myapp-<datetime>.log``<datetime>``2012-12-20`
*   该`myapp-<datetime>.log`文件需要每天轮换（最好在午夜），删除旧文件，并使用`<datetime> + 1`. 例如，`myapp-2012-12-20.log`将替换为`myapp-2012-12-21.log`等。

这是我认为已经接近的最佳尝试，但仍然缺少一些配置：

```
#####/etc/log4perl.conf############################################################
log4perl.logger.widget                      = INFO, MyAppLogAppender

log4perl.appender.MyAppLogAppender          = Log::Log4perl::Appender::File
log4perl.appender.MyAppLogAppender.filename = /opt/myapp/logs/myapp-???.log
log4perl.appender.MyAppLogAppender.layout   = Log::Log4perl::Layout::SimpleLayout
################################################################################### 
```

**如何配置`log4perl.appender.MyAppLogAppender`为每天轮换一次、删除旧文件并创建一个具有正确时间戳的新文件？**提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T17:28:06.643

下面是一个 Log::Log4perl 配置文件的示例，定义了在午夜进行的每日翻转（日期模式 yyyy-MM-dd），在 WARN 级别保留最多 5 个已保存的日志文件，并将所有内容转储到屏幕上：

```
log4perl.logger                         = TRACE, Screen, Logfile

log4perl.appender.Logfile               = Log::Dispatch::FileRotate
log4perl.appender.Logfile.Threshold     = WARN
log4perl.appender.Logfile.filename      = test.log
log4perl.appender.Logfile.max           = 5
log4perl.appender.Logfile.DatePattern   = yyyy-MM-dd
log4perl.appender.Logfile.TZ            = PST
log4perl.appender.Logfile.layout        = Log::Log4perl::Layout::PatternLayout 
log4perl.appender.Logfile.layout.ConversionPattern = %d %m %n

log4perl.appender.Screen                = Log::Log4perl::Appender::Screen
log4perl.appender.Screen.stderr         = 0
log4perl.appender.Screen.utf8           = 1
log4perl.appender.Screen.layout         = Log::Log4perl::Layout::PatternLayout::Multiline
log4perl.appender.Screen.layout.ConversionPattern = [%p] %m %n 
```

（参考：[https](https://metacpan.org/module/Log::Log4perl::FAQ#How-can-I-roll-over-my-logfiles-automatically-at-midnight-) ://metacpan.org/module/Log::Log4perl::FAQ#How-can-I-roll-over-my-logfiles-automatically-at-midnight- ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-27T08:05:27.020

有一个陷阱`Log::Dispatch::FileRotate`，如果您的日常工作在当天晚些时候（比如 23:00）运行并且需要 2 小时（因此在大约 01:00 结束），那么日志轮换将永远不会以“日”模式发生，例如：

```
log4perl.appender.Logfile.DatePattern   = yyyy-MM-dd 
```

一个简单的解决方法是使用这样的“每小时”模式：

```
log4perl.appender.Logfile.DatePattern   = yyyy-MM-dd-HH 
```

因此，当下一次运行在 23:00 开始时，日志文件会在一个多小时过去后轮换。

# google-chrome - 如何从 Chrome Webrequest 获取文件附件详细信息

> ID：13938032
> 
> 赞同：1
> 
> 时间：2012-12-18T17:08:15.207
> 
> 标签：google-chrome, https, google-chrome-extension

我正在编写 chrome 扩展程序，其中我正在使用[chrome.WebRequest](https://developer.chrome.com/extensions/webRequest.html) API 读取 POST 数据。我能够阅读邮件内容，但无法阅读附件详细信息，既不是文件名，也不是附件内容。有谁知道如何使用 chrome.WebRequest 获取附件详细信息。

注意：我正在为 onBeforeRequest 事件注册我的扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:59:43.937

在`details`事件监听器的参数中，有一个属性叫做`requestBody`，*目前是实验性*的。可以从中读取 POST 数据。请注意，您必须在注册事件侦听器时`'requestBody'`在参数中指定。`extraInfoSpec`

# c - Eclipse + CDT：可以将密钥与 GDB 用户定义的命令绑定吗？

> ID：13938036
> 
> 赞同：0
> 
> 时间：2012-12-18T17:08:47.693
> 
> 标签：c, eclipse, gdb, eclipse-cdt

我在 GDB 中定义了（使用`define`/`end`语法）一个用户定义的命令，在 Eclipse + CDT 下运行。我希望能够使用来自 Eclipse 的键绑定调用此命令；这可能吗？如果是这样，我将在哪里定义这样的绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:18:47.193

不，CDT 不支持这一点。

# c++ - 不同编译器的不同输出

> ID：13938037
> 
> 赞同：3
> 
> 时间：2012-12-18T17:08:51.477
> 
> 标签：c++

为什么下面的代码在不同的编译器上打印出不同的结果？

```
#include <iostream>

void foo() { std::cout << "::foo() \n"; }

namespace Foo
{
   struct Bar
   {
      friend void foo() { std::cout << "Bar::foo() \n"; }
      void bar() { foo(); }
      void baz();
   };

   void Bar::baz() { foo(); }
}

int main()
{
   Foo::Bar instance;
   instance.bar();
   instance.baz();
} 
```

**输出**

GCC 4.7.2

> ```
> ::foo()
> ::foo() 
> ```

MSVC-10.0

> ```
> Bar::foo()
> Bar::foo() 
> ```

MSVC-11.0

> ```
> error C3861: 'foo': identifier not found
> error C3861: 'foo': identifier not found 
> ```

谁是对的？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:30:59.973

我认为 gcc 是正确的：

C++11 中的 7.3.1.2/3：

> 如果非本地类中的友元声明首先声明了一个类或函数，则友元类或函数是最内层封闭命名空间的成员。在该命名空间范围内（在类定义之前或之后）提供匹配声明之前，未限定查找 (3.4.1) 或限定查找 (3.4.3) 无法找到朋友的名称

C++03 在同一个地方有类似的语言。

我不确定为什么 MSVC-11 无法找到`::foo`，但我想您*可以*阅读此文本以表示`foo`根本无法查找该名称。我认为预期的含义是找不到最里面的封闭命名空间中的名称，但可以找到外部范围内的同名名称。但如果微软想要争论预期的含义，我不是他们会争论的人。

MSVC-10 是错误的，因为它找到了标准明确规定的名称未找到。所以对 MSVC-11 行为的解释可能很简单，就像“它被报告为 10 中的一个错误，他们试图修复它并且走得太远了”。

无论如何，解决方法是引入`foo`in namespace的声明`Foo`：

```
namespace Foo
{
   void foo(); // this is a matching declaration
   struct Bar
   {
      friend void foo() { std::cout << "Bar::foo() \n"; }
      void bar() { foo(); }
      void baz();
   };

   void Bar::baz() { foo(); }
} 
```

这使 gcc 找到了友元函数。我没有在任何版本的 MSVC 上测试过。

# html - 我可以将垂直滚动条从 div 容器中的内容文本稍微移开吗？

> ID：13938039
> 
> 赞同：3
> 
> 时间：2012-12-18T17:08:52.880
> 
> 标签：html, css

我希望能够[将此网站](http://www.strangerandstranger.com/wiston/site/people3.html) 上的滚动条向右移动，远离文本，大约`20px`或更多。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:17:10.003

我建议只添加一些填充，如下所示：

改变：

```
<div style="width: 450px; height: 500px; overflow: auto;"> 
```

至：

```
<div style=" width: 430px; padding-right:20px; height: 500px; overflow: auto;"> 
```

# bash - Shell脚本`read`提示路径不使用空格/特殊字符

> ID：13938040
> 
> 赞同：1
> 
> 时间：2012-12-18T17:08:56.443
> 
> 标签：bash, shell

我有一个提示用户输入路径的 shell 脚本：

```
read -e -p "Enter the path to the file: " FILEPATH
eval FILEPATH=$FILEPATH 
```

如果我这样输入：

`Enter the path to the file: ~/Desktop/Hello\ My\ Name\ is\ Oliver/`

然后我得到以下输出（调试模式下的bash）：

```
Enter the path to the file: ~/Desktop/Hello\ My\ Name\ is\ Oliver/
+ eval 'FILEPATH=~/Desktop/Hello My Name is Oliver/'
++ FILEPATH=/Users/Oliver/Desktop/Hello
++ My Name is Oliver/ 
```

当路径中有特殊字符时，我也有类似的问题。

我能做些什么来解决这个问题？

**编辑：** `eval`将别名更正`~`为正确的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:51:21.513

如果您只需要扩展`~`，则执行以下操作会更安全

```
FILEPATH=${FILEPATH/\~/$HOME} 
```

这也将使变量保持在一起。

# android - 无法在 getItem 中转换值

> ID：13938045
> 
> 赞同：1
> 
> 时间：2012-12-18T17:09:17.373
> 
> 标签：android, android-listview, casting

我正在尝试从 listview 获取项目的值，但是当我尝试“adapter.getItem(position)”时收到一个转换错误。

根据日志，我假设 getItem 函数是发生错误的地方，但我不确定如何将值传递给字符串？

相关代码为：

```
public String getItem(int pos) {

        String myString = (String) adapter.getItem(pos);
        return myString;

    }

    private OnItemClickListener onAnswerClicked = new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

                String getValue = getItem(position);

                Toast.makeText(getApplicationContext(),
                  "Click ListItem Number " + getValue, Toast.LENGTH_LONG)
                  .show();

        }

    }; 
```

我在 logcat 中收到的错误是：

```
12-18 10:50:02.314: E/AndroidRuntime(18988): FATAL EXCEPTION: main
12-18 10:50:02.314: E/AndroidRuntime(18988): java.lang.ClassCastException: android.database.sqlite.SQLiteCursor cannot be cast to java.lang.String
12-18 10:50:02.314: E/AndroidRuntime(18988):    at com.sembasys.metrosleepnyc.ChooseRoute.getItem(ChooseRoute.java:61)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at com.sembasys.metrosleepnyc.ChooseRoute$1.onItemClick(ChooseRoute.java:72)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.os.Handler.handleCallback(Handler.java:725)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.os.Looper.loop(Looper.java:137)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at java.lang.reflect.Method.invokeNative(Native Method)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at java.lang.reflect.Method.invoke(Method.java:511)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-18 10:50:02.314: E/AndroidRuntime(18988):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:13:28.363

这是因为您将 Cursor 传递给 ListView 并转换 String 而不是 Cursor。但是，我坚持不要将 Cursor 传递给 ListView，而是您可以从某个 Collection 中的 Cursor 获取数据，也许是 ArrayList，然后将 ArrayList 传递给 ListView 的适配器。

# c# - 在 Windows Store App 中上传/下载文件到 Google Drive

> ID：13938046
> 
> 赞同：3
> 
> 时间：2012-12-18T17:09:22.583
> 
> 标签：c#, windows-runtime, google-drive-api

我可以使用[web authentication sample](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122/sourcecode?fileId=52289&pathId=1917124598)登录 Google 。这是代码：

```
 private async void Launch_Click(object sender, RoutedEventArgs e) 
    {    
        if(GoogleClientID.Text == "") 
        { 
            rootPage.NotifyUser("Please enter an Client ID.", NotifyType.StatusMessage); 
        } 
        else if(GoogleCallbackUrl.Text == "") 
        { 
            rootPage.NotifyUser("Please enter an Callback URL.", NotifyType.StatusMessage); 
        } 

        try 
        { 
            String GoogleURL = "https://accounts.google.com/o/oauth2/auth?client_id=" + Uri.EscapeDataString(GoogleClientID.Text) + "&redirect_uri=" + Uri.EscapeDataString(GoogleCallbackUrl.Text) + "&response_type=code&scope=" + Uri.EscapeDataString("http://picasaweb.google.com/data"); 

            System.Uri StartUri = new Uri(GoogleURL); 
            // When using the desktop flow, the success code is displayed in the html title of this end uri 
            System.Uri EndUri = new Uri("https://accounts.google.com/o/oauth2/approval?"); 

            DebugPrint("Navigating to: " + GoogleURL); 

            WebAuthenticationResult WebAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync( 
                                                    WebAuthenticationOptions.UseTitle, 
                                                    StartUri, 
                                                    EndUri); 
            if (WebAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success) 
            { 
                OutputToken(WebAuthenticationResult.ResponseData.ToString()); 
            } 
            else if (WebAuthenticationResult.ResponseStatus == WebAuthenticationStatus.ErrorHttp) 
            { 
                OutputToken("HTTP Error returned by AuthenticateAsync() : " + WebAuthenticationResult.ResponseErrorDetail.ToString()); 
            } 
            else 
            { 
                OutputToken("Error returned by AuthenticateAsync() : " + WebAuthenticationResult.ResponseStatus.ToString()); 
            } 
        } 
        catch (Exception Error) 
        { 
            // 
            // Bad Parameter, SSL/TLS Errors and Network Unavailable errors are to be handled here. 
            // 
            DebugPrint(Error.ToString()); 
        } 
} 
```

应用程序通过身份验证后，我不确定如何使用文件操作。他们是 Google 提供的一个 .Net 库，但它似乎不适用于 Windows 商店应用程序。

这是通过 http 上传的 doc 文件：

谷歌云端硬盘 API：[https ://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

我尝试使用[HttpClient 示例](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)，但不确定如何使用从身份验证示例中获得的身份验证令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T00:35:32.463

看起来您最好使用 WinRT 中的[BackgroundUploader](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.backgrounduploader.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)类，然后使用[SetRequestHeader](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.backgrounduploader.setrequestheader.aspx)方法将您的身份验证令牌放入 Authorization 标头中。应该处理您文件的`BackgroundUploader`各个部分（基于 Google Drive 文档和 MSDN 文档），因此使用下面的标题和方法，我认为这就是您所需要的。

```
POST /upload/drive/v2/files?uploadType=media HTTP/1.1
Host: www.googleapis.com
Content-Type: image/jpeg
Content-Length: {number_of_bytes_in_JPEG_file}
Authorization: {your_auth_token}

{JPEG data} 
```

对于较小的文件类型，您应该能够执行类似的操作`System.Net.HttpClient`-[这](https://stackoverflow.com/questions/10679214/how-do-you-set-the-content-type-header-for-an-httpclient-request)是一篇关于在该类型上设置标题的帖子。

# jquery - 用 getJson 替换而不是 appendto

> ID：13938047
> 
> 赞同：2
> 
> 时间：2012-12-18T17:09:32.007
> 
> 标签：jquery, getjson

帮助将不胜感激。

这是来自 Jquery 网站的代码

```
 <button id="refresh">refresh</button>
    <div id="images"></div>

    $("#refresh").click(function(){ 
        $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
                {
                    tags: "vw beetle",
                    tagmode: "any",
                    format: "json"
                },    

                function(data) {   
                    $.each(data.items, function(i, item) {
                        $("<img/>").attr("src", item.media.m).empty().appendTo("#images");
                        if (i == 3)
                    return false;

                    });
                });
      }); 
```

这让我绞尽脑汁，我想替换结果，而不是在单击刷新按钮时继续添加或附加结果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:10:44.960

我想你想清空`#images`：

```
function (data) {
   $("#images").empty();
   $.each(data.items... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:15:07.873

```
$("#refresh").click(function() {
    $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?", {
        tags: "vw beetle",
        tagmode: "any",
        format: "json"
    },function(data) {
        var fragment = document.createDocumentFragment();
        $.each(data.items, function(i, item) {
            var img = new Image();
                img.src = item.media.m;
            fragment.appendChild(img);
            if (i == 3) return false;
        });
        $('#images').html(fragment);
    });
});​ 
```

将图像附加到片段，并在循环之后，当您拥有三个图像时，使用`html()`插入片段，删除已经存在的图像。

# c++ - std::list::splice, list&& VS list&

> ID：13938048
> 
> 赞同：5
> 
> 时间：2012-12-18T17:09:34.540
> 
> 标签：c++, stl, c++11, move-semantics

std::list 的一些方法，可能还有其他 STL 容器，在 C++11 中添加了一个新的重载。我需要的是list::splice()。一种方法采用 list& 参数，另一种方法采用 list&& 参数。

我想知道有什么区别，我应该更喜欢哪个。

我查看了 libstdc++（GCC 编译器使用的标准 C++ 库）的实现，它在内部两种情况下都使用 list&& 版本。C++11 规范也没有说明这个问题。它只提供了 2 种方法，而没有解释其中的区别。

您不移动列表本身，也不移动节点（复制它们的指针似乎是将节点从一个列表移动到另一个列表的方式），那么这有什么关系呢？我只有一个想法，也许使用 list&& 就像对编译器的承诺，你不再需要另一个列表，编译器可以保存一些操作，因为它不必保持另一个列表有效......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:17:07.310

你不应该太在意。`std::list&&`当您传递的参数是右值时，将选择带有参数的重载- 通常当它引用的对象是临时对象时。您无需明确说明要使用哪个重载。

这两个版本的函数存在的原因是为了方便，因此客户端不必在`std::list`将临时对象传递给 splice 之前从临时对象创建临时变量（感谢注释中的@HowardHinnent）。

此外，当您从中拼接的列表是一个临时对象时，没有必要关心维护它的状态。该`&&`函数的版本*可能*只是从该列表中撕下胆量，在地板上留下一团糟。这可能是为了提高效率（但实际上，`std::list`没有太多理由这样做）。

如果你有一个`std::list`, `other`，你知道你永远不会再使用，你可以自愿说“我不在乎你用它做什么”，通过使用`std::move`：

```
l.splice(pos, std::move(other)); 
```

该表达式`std::move(other)`是一个右值，因此`splice`函数会将其视为临时的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:12:57.760

左值引用绑定到左值，右值引用绑定到右值：

```
tyedef std::list<Foo> lt;

lt make_list();

int main()
{
    lt x;

    lt tmp = make_list();

    x.splice(tmp);         // needs '&'
    x.splice(make_list()); // needs '&&'
} 
```

# sql - 在 SQL Developer 中导入数据时读取时间戳

> ID：13938050
> 
> 赞同：2
> 
> 时间：2012-12-18T17:09:42.800
> 
> 标签：sql, oracle, import, format, timestamp

我正在尝试使用 SQL Developer 中的数据导入向导将文本文件读入 Oracle 数据库。

我被困在第 5 步，因为我无法在导入前获得验证参数以在我的`timestamp`字段上成功。

回到第 4 步，我尝试将`timestamp`字段的数据类型更改为`Timestamp`、`Timestamp with time zone`和`Timestamp with local time zone`。无奈之下，我什至尝试了`Date`。没有任何效果。

然后，我注意到当您为“数据类型”字段选择任何`Timestamp...`或类型时出现的格式字段。`Date`因此，我尝试为我的数据指定格式，示例如下：`01/03/2008 06:25:00 AM -0500`.

不确定该格式的正确代码是什么，并且没有在线、离线或在我的脑海中找到文档，我尝试了以下所有格式都无济于事`MM/DD/YYYY HH:mm:SS AM +0000`：`MM/DD/YYYY HH:mi:SS AM +0000`; `MM/DD/YYYY HH12:mm:SS AM +0000`; `mm/dd/yyyy hh:mm:ss AM +0000`.

在更绝望的情况下，我为时间戳的每个子元素尝试了多种编码的多种组合：月`MM`、日、年、小时、分钟和秒，以及很多关于时区字段的疯狂内容。没有任何效果。`mm``DD``dd``YYYY``yyyy``HH``hh``HH12``mm``mi``SS``ss``AM/PM`

所以，stackoverflow 的顾客，我请求你的帮助。我已经尝试寻找解决此问题的方法，并且我自己尝试了许多不同的解决方案。我已经尽了最大的努力，但在这个问题上我的最好还不够好。帮我欧比旺；你是我唯一的希望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:19:52.417

您可能需要日期/时间格式：

```
MM/DD/YYYY HH12:MI:SS AM TZHTZM 
```

这是[日期格式文档](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_commands_1029.htm#BABEFHFG)。

您需要选择带有时区的数据类型。

# emacs - 缩进多行在 Emacs 中不起作用

> ID：13938056
> 
> 赞同：0
> 
> 时间：2012-12-18T17:10:01.913
> 
> 标签：emacs, indentation

我`.ml`在`Emacs`. `tab`键缩进一行。但是当我选择一行行时，`tab`key 不会缩进任何东西......这是我的[.emacs](http://pastebin.com/dW3WzBYb)，谁能告诉我出了什么问题？

另外，`tab`注释根本不缩进，不管是1行还是几行……这正常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:07:42.590

向您的主要模式的作者投诉：默认 TAB 绑定旨在通过主要模式进行调整，但许多主要模式只是在本地覆盖它，然后经常无法忠实地重现默认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:51:29.037

试试`M-x indent-region RET`。

`TAB`无论该区域是否处于活动状态，该键仅缩进当前行（但实现一个包来更改行为将是一个好主意）。

说到评论，就看主要模式了。我不知道`ml-mode`，但主要模式通常会缩进注释。

# javascript - 使用backbone.js 应用程序实现一个可视加载器栏

> ID：13938063
> 
> 赞同：2
> 
> 时间：2012-12-18T17:10:20.357
> 
> 标签：javascript, backbone.js, requirejs, preloader, backbone-boilerplate

我的backbone.js 应用程序第一次加载时，在加载模板之前需要整整6 秒的空白屏幕。我们有一些 javascript 库膨胀，构建过程还不完美，但这些是单独的问题。

我正在使用带有 require.js 的骨干样板，我希望有一种 gmail 类型的加载器，它会在所有资产、数据、模板被加载和渲染时显示出来，这样我们就不会只加载一个空白页。

反正有做这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:23:06.977

我解决这个问题的方法是在 index.html 中包含一个动画微调器 GIF：

```
<html>
  <!-- header with scripts etc -->
  <body>
    <img id="spinner" class="centered" src="/images/spinner.gif"></img>
  </body>
</html> 
```

当所有资产都下载完毕，模型初始化并且应用程序的主视图准备好呈现时，我只需将微调器替换为内容：

```
var appView = new AppView().render();
$("img#spinner").replaceWith(appView.el); 
```

它本身并不显示进度，但它让用户知道正在加载。

可能有一种方法可以连接到 requirejs 加载事件，但我不知道有一个。如果您打算将所有资源缩小并合并到一个文件中，那么无论如何这将不太有用，因为不可能非常准确地跟踪单个文件的下载进度。

# node.js - Node.js 理论 - Node.js、Express.js、Passport.js

> ID：13938067
> 
> 赞同：8
> 
> 时间：2012-12-18T17:10:29.410
> 
> 标签：node.js

我正在为一些 Node.js 框架背后的一些理论和惯例而苦苦挣扎。我是 Node.js 的新手。我正在尝试设置一个场景，其中我有一个 MVC 框架，我在其中定义了一组执行基本休息功能的控制器，并且我的一些控制器路由需要身份验证。如果您未通过身份验证，它应该将您发送到登录页面，但在您登录后，它会将您发送回您之前请求的页面。我查看了一堆教程，也查看了 StackOverflow 上的一些问题，但我认为问题在于某些内容没有点击。我希望你们中的一个人可以向我解释一下正在发生的事情背后的一些理论，也许能为我的问题指出正确的方向。我的代码如下。我真正的问题是我不 t 真正理解这个 next() 范式。也许我什至做错了这一切，并以错误的方式思考它。也许你也可以让我谈谈一些好主意。

# 编辑：

======

我找到了解决方案。稍后我将为其他可能希望获取一些信息并解决此问题的人回答我的问题。

-- 服务器.js

```
/**
 * Clancy server implementation (using Express)
 */
require('console-trace')({
    always: true,
    right: true,
    colors: true
})

/**
 * Include our server's needed objects. 
 **/
var express = require('express');
var _ = require('underscore');
var cons = require('consolidate');
passport = require('passport'),
LocalStrategy = require('passport-local').Strategy;
var db = require('./lib/db');
var colors = require('colors');
var Users = db.users;
var People = require('./controllers/People');
var Login = require('./controllers/Login');

/**
 * This provides our MVC context object
 **/
var app = express();

/**
 * This is our router definition for the server 
 **/
app.engine('html', cons.underscore);

// set .html as the default extension 
app.set('view engine', 'html');
app.set('views', __dirname + '/views');

/**
 * Set up the server to allow static content, cookies, session, and
 * parsing the server.  Also, we initialize authentication and our
 * routing mechanism.
 *
 */

app.configure(function () {
    app.use('/static', express.static(__dirname + "/webapp"));
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.session({
        secret: 'keyboard cat'
    }));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(app.router);
});

/**
 * This lets authentication know how it should store
 * and grab users from a request to pass to a mapping
 * function.
 */
passport.serializeUser(function (user, done) {
    done(null, user._id);
});

passport.deserializeUser(function (id, done) {
    Users.findOne({
        _id: db.bson.ObjectID(id)
    }, function (err, user) {
        done(err, user);
    });
});

/**
 * This sets up which authentication strategies we support.
 * as of right now, LocalStrategy (our own username/password)
 * is all we support.
 *
 */
passport.use(new LocalStrategy(

function (username, password, done) {
    Users.findOne({
        username: username
    }, function (err, user) {
        if (err) {
            return done(err);
        }
        if (!user) {
            return done(null, false, {
                message: 'Incorrect username.'
            });
        }
        if (!(user.password == password)) {
            return done(null, false, {
                message: 'Incorrect password.'
            });
        }
        console.info(user.password + " " + password.yellow);
        console.info(!(user.password == password).yellow);
        console.info(user._id);
        return done(null, user);
    });
}));

/**
 * Path mapping
 */

// Index mapping
app.get('/', function (req, resp) {
    resp.render('index', {
        title: "Welcome!"
    });
});

// Allow login, and set up the dependency for passport.
Login.setPassport(passport);
app.get("/login", Login.loginForm);
app.get("/login/error", Login.loginForm);
app.post('/login', passport.authenticate('local', function (req, res, next) {
    passport.authenticate('local', function (err, user, info) {
        // This is the default destination upon successful login.
        var redirectUrl = '/people';

        if (err) {
            return next(err);
        }
        if (!user) {
            return res.redirect('/');
        }

        // If we have previously stored a redirectUrl, use that, 
        // otherwise, use the default.
        if (req.session.redirectUrl) {
            redirectUrl = req.session.redirectUrl;
            req.session.redirectUrl = null;
        }
        req.logIn(user, function (err) {
            if (err) {
                return next(err);
            }
        });
        res.redirect(redirectUrl);
    })(req, res, next);
}));

app.get('/logout', Login.logout);

// People Controller has a dependency on the Passport library
People.setPassport(passport);

// These are our definitions for paths the People Controller can handle.
app.get("/people", People.list);
app.get("/people/:id", People.get);

// These are the error handler mappings.
app.use(function (req, res, next) {
    // the status option, or res.statusCode = 404
    // are equivalent, however with the option we
    // get the "status" local available as well
    res.render('404', {
        status: 404,
        url: req.url
    });
});

app.use(function (err, req, res, next) {
    // we may use properties of the error object
    // here and next(err) appropriately, or if
    // we possibly recovered from the error, simply next().
    console.error(("ERROR: " + err.toString()).red);
    res.render('500', {
        status: err.status || 500,
        error: err
    });
});
app.listen(3000);
console.info('The Clancy server is listening on port: 3000'.green); 
```

-- 人员控制器

```
/**
 * People Controller
 */
var db = require('../lib/db');
var auth = require('../lib/authUtils');
/**
* People constructor.
* ===================
* The people constructor has dependencies on the database, 
* and on the Passport middleware.  The db object doesn't
* care about maintaining state, so we can just include that
* here, however the Passport plugin needs to have all of the
* stuff the server defines.  So, it's passed in.
*/
function People(){
    var passport;
}
People.prototype = {
        list: function(req, resp){
            auth.ensureAuth(req, resp);
            console.info("user info: " + user._id);
            resp.render('index', {
                title: "User",
                users: [1,2,3]
            });
        },
        get: function(req, resp){

            console.log('> get person' + req.params.id);

            db.users.find( {_id: db.bson.ObjectID(id)}, function(err, users){
                if(err || !users) console.log("No user found");
                resp.send(users);
            });
        },
        setPassport: function(pass){
            this.passport = pass;
        },
        getPassport: function(){
            return this.passport;
        }
}

module.exports = new People(); 
```

-- 登录控制器

```
/**
 * People Controller
 */

/**
* Login constructor.
* ===================
* The Login constructor has dependencies on the Passport middleware.  
* The db object doesn't care about maintaining state, so we can just 
* include that here, however the Passport plugin needs to have all 
* of the stuff the server defines.  So, it's passed in.
*/
function Login(){
    var passport;
}
var l = Login.prototype;
Login.prototype = {
        loginForm: function(req, resp){
            var url = require('url').parse(req.url, true);
            console.info('url string: ' + url.pathname.yellow);
            if(url.pathname === '/login/error')
            {
                resp.render('login', {
                    title: "Login to FormPickle.com",
                    message: "Your username or password was incorrect."
                });
            }
            console.info('Trying to login'.yellow);
            resp.render('login', {
                title: "Login to FormPickle.com",
                message: ""
            });
        },
        setPassport: function(pass){
            l.passport = pass;
        },
        getPassport: function(){
            return l.passport;
        },
        logout: function(req, resp){
            req.logout();

            resp.render('logout');
        }
}

module.exports = new Login(); 
```

-- 数据库中间件

```
/**
 * DB
 */

var databaseURI = "localhost:27017/clancy";
var collections = ["users", "forms"];
var db = require("mongojs").connect(databaseURI, collections);

module.exports = db; 
```

-- AuthUtils.js

```
/***
* Define a middleware function for authenticated routes to store the original URL
*
*/
function Auth(){

};

Auth.prototype = {
    ensureAuth: ensureAuthenticated(req, resp, next)
}
var ensureAuthenticated = function (req, res, next) {
  if (req.isAuthenticated()) { return next(); }

  // If the user is not authenticated, then we will start the authentication
  // process.  Before we do, let's store this originally requested URL in the
  // session so we know where to return the user later.

  req.session.redirectUrl = req.url;

  // Resume normal authentication...

  logger.info('User is not authenticated.');
  req.flash("warn", "You must be logged-in to do that.");
  res.redirect('/login');
}

module.exports = new Auth(); 
```

提前谢谢你们。我喜欢 StackOverflow 上的社区。你们在学习新技术时总是那么棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T23:47:12.593

返回`next`通常用于`Connect`中间件。您正在传递要执行的下一个函数的引用。中间件的作用类似于过滤器或链表层（通过引用），您的函数在获取资源之前调用并遵循这些层，执行逻辑，然后决定退出/重定向或转到下一个中​​间件。中间件可能是身份验证，例如您正在使用的。尽管`Passport`是一个离散且编写良好的模块，但您在这里将其实现为中间件（这很正常），这基本上是通过您的`ensureAuthenticated`功能进行的身份验证过滤器：您基本上只是在那里创建了自己的中间件（成就解锁）。您通常将所有中间件放在路由功能执行之前。

据我所知，您定义`-- DB Middleware`的不是中间件。它看起来更像是一个您正在尝试单独关注的模块（这很好）。我称之为你的`model`模块的开始。

看起来您的控制器可能很快就会失控。我建议研究一下`Routes`。

在 Node.js、Express.js 和 Passport.js 方面，我绝不是专家，但我成功地将关注点和编码分离在一个部分工作的项目中：[https ://github.com/Tzvayim/ theArk/blob/master/app.js](https://github.com/Tzvayim/theArk/blob/master/app.js)

# sql-server - 向表中添加列时事务日志已满

> ID：13938068
> 
> 赞同：2
> 
> 时间：2012-12-18T17:10:29.790
> 
> 标签：sql-server, sql-server-2008

我有一个包含大约 150 万条记录的 SQL Server 2008 表，我想添加另一个字段并编辑另一个。当我保存更改时，它会出错：

```
'Member' table
- Unable to modify table.  
The transaction log for database 'storeboard' is full. To find out why space in the log cannot be reused, see the log_reuse_wait_desc column in sys.databases 
```

即使我清空事务日志，它仍然会出现同样的错误。我怎样才能避免这个问题并对我的表进行必要的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:40:41.157

试试这个：

```
USE master ;
ALTER DATABASE YourDBName SET RECOVERY SIMPLE ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:05:53.230

就像“Nikita”建议的那样，您可以将恢复模式更改为简单，这样就不会在事务日志中跟踪更改......但是，如果这是一个生产数据库，您可能正在播放日志传送，或者???，这需要使用事务日志将更改复制到另一台服务器...如果是这种情况，那么您需要了解导致事务日志填满的原因，以及如何在不禁用事务日志的情况下进行补救.

听起来您正在使用 SSMS 进行更改，而更改的性质要求 SSMS：

1.  从更改的表中删除所有外键、索引等
2.  将表中的所有数据复制到#temp 表中
3.  使用建议的更改创建一个新表
4.  将#temp表中的所有数据复制到新创建的表中
5.  丢弃旧表
6.  将新表重命名为旧表的名称
7.  重新创建所有索引、外键等。

SSMS 脚本插入`BEGIN TRANSACTION`并`COMMIT TRANSACTION`贯穿整个脚本，因此如果出现故障，**希望**您的表和数据不会被破坏。但是由于它还`GO`在整个脚本中插入，因此错误可能**会**导致问题，特别是因为它所做的最后一件事是**删除**原始表，然后将新创建的表重命名为原始表名。

听起来事务日志在脚本完成运行之前已填满。如果您无法将生产数据库更改为简单的恢复模式（例如，因为它会中断日志传送等），那么您需要以一种不会填满事务日志的方式运行脚本。

我建议：

1.  首先在没有 150 万行的开发/测试服务器上构建和测试脚本，以确保脚本完全按照您的意愿执行。
2.  修改脚本并添加`COMMIT`关键位置，以便在脚本继续运行时可以回收事务日志中的空间。
3.  一次将 100,000 条记录从 #temp 表复制回新创建的表，`COMMIT`每个块之间都有一个。
4.  在生产环境运行之前，在开发/测试服务器上再次测试修改后的脚本。
5.  在运行脚本之前备份您的生产数据库...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-21T13:13:30.097

即使您对数据库使用简单的恢复模型，SQL Server 也会继续将所有内容写入事务日志。

假设您要添加`datetime`需要 8 个字节存储空间的列。假设您的表有 1.5 条 Mio 记录，SQL Server 将需要 8 * 1.5 字节（+开销）来完成事务。所有位都写入日志，没有办法阻止它们。

如果您的方案（和/或策略）不需要任何时间点恢复，那么 SIMPLE 恢复模式可能适合您。只需启用自动增长，为最大日志大小设置公平限制并切换`auto-shrink`到`true`.

否则（即生产数据库、高度业务关键型应用程序等），您可能需要基于完整恢复模型和日志备份制定适当的维护计划。有很多关于这方面的白皮书和文章。

# c# - 组合框不验证

> ID：13938073
> 
> 赞同：0
> 
> 时间：2012-12-18T17:11:08.360
> 
> 标签：c#, winforms, errorprovider

我第一次在 Windows 窗体中使用 ErrorProvider。

我有一个简单的窗口，上面有一个组合框，里面有几个项目，默认情况下包括一个空白选择。我在底部还有一个下一步按钮。

当我运行表单并单击下一步并将组合框设置为空白时，我的验证不会触发。有任何想法吗？

我已经按照文档中的说明连接了错误提供程序。

```
 // Favorite Color ComboBox 
        favoriteColorComboBox = new ComboBox();            
        favoriteColorComboBox.Items.AddRange(new object[] {"None","Red","Yellow" });
        favoriteColorComboBox.Validated += new EventHandler(favoriteColorComboBox_Validated);

        favoriteColorErrorProvider = new System.Windows.Forms.ErrorProvider();
        favoriteColorErrorProvider.BlinkStyle = System.Windows.Forms.ErrorBlinkStyle.NeverBlink;

        _tableLayoutPanel1.Controls.Add(favoriteColorComboBox, 1, 1);
    }

    void favoriteColorComboBox_Validated(object sender, EventArgs e)
    {
        if (!IsColorValid())
        {
            // Set the error if the favorite color is not valid.
            favoriteColorErrorProvider.SetError(this.favoriteColorComboBox, "Must select a color.");
        }
        else
        {
            // Clear the error, if any, in the error provider.
            favoriteColorErrorProvider.SetError(this.favoriteColorComboBox, String.Empty);
        }
    }

    private bool IsColorValid()
    {
        // Determine whether the favorite color has a valid value. 
        return ((favoriteColorComboBox.SelectedItem != null) &&
            (!favoriteColorComboBox.SelectedItem.ToString().Equals("None")));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:39:16.627

我认为您在单击按钮时没有事件。仅当您选择组合并移出组合框时才会进行组合框验证。在您的情况下，您没有选择组合本身，因此无需触发任何事件。试试这个：

```
private void _buttonNext_Click(object sender, EventArgs e)
{
    favoriteColorComboBox_Validated(sender, e);
} 
```

单击下一步按钮时，它将触发您想要的相同验证。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:59:37.910

我不得不调用 ValidateChildren 方法来触发验证。

# mysql - phpMyAdmin 导出和导入视图

> ID：13938075
> 
> 赞同：4
> 
> 时间：2012-12-18T17:11:16.237
> 
> 标签：mysql, phpmyadmin, views, mysqldump

我正在导出一个由其他人创建的数据库，其中包含一些视图，但导出的 SQL 稍后将（在导入时）创建一个表而不是视图。

代码：

```
DROP VIEW IF EXISTS `listado_sorteos`;
CREATE TABLE IF NOT EXISTS `listado_sorteos` (
`idsorteo` int(10) unsigned
,`fecha_alta` datetime
,`idaplicacion` int(10) unsigned
,`fecha_sorteo` datetime
,`descripcion` varchar(45)
); 
```

在我看来这是不对的，因为它创建了一个表格而不是一个视图......但我是对的吗？如果没有，我必须从 phpMyAdmin 中导出视图有什么解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T03:01:08.583

我有一个类似的问题。当我导出整个数据库时，sql 转储包含用于创建视图的代码，然后是进一步的代码以创建与视图具有相同数据的表。结果意味着我无法毫无错误地导入转储。

我当前的解决方法是从要导出的表列表中取消选择视图的名称。这将导出没有视图的数据库。然后我单击每个视图并单击导出。然后我可以重新导入主转储，然后是每个视图（如果我真的想要，我可以将其粘贴到主转储 sql 中）

希望有人提出更好的答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T10:17:54.147

我有同样的问题，并通过以下解决方案解决。要导出视图，首先我们需要将其转换为表格，然后我们可以轻松地导出该表格。将视图转换为表格

```
CREATE table table-name 
SELECT * FROM view-name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T16:43:43.863

好的 - 我已经根据我的情况解决了这个问题。阅读 PMA 错误页面，我发现我正在使用的旧版本 PMA 的导出例程中有一个错误。

***解决方案：***更新 PMA。（很简单，检查您的 MySQL 和 PHP 是否兼容，获取最新版本并将文件复制到您现有的 phpMyAdmin 文件夹。如果您愿意，请重新启动）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T15:46:01.540

我还发现 PMA 没有正确导出视图。最近，我决定只使用 PMA 导出表。令我惊讶的是，表格和视图都被完美地导出了。对一次性事故不满意，我一次又一次地做到了，一切都完美出口。我不知道为什么会发生这种情况，但永远不应该质疑礼物功能。

# security - _switch_user 不起作用

> ID：13938078
> 
> 赞同：5
> 
> 时间：2012-12-18T17:11:34.923
> 
> 标签：security, symfony

我正在尝试使用`switch_user`Symfony2[安全文档](http://symfony.com/doc/current/book/security.html)中描述的技术。不幸的是，它不起作用。当我浏览到`http://myurl.com/foo?_switch_user=bar`时，页面会刷新，但我仍然以管理员用户身份登录，而不是`bar`.

这是我的相关部分`app/config/security.yml`：

```
role_hierarchy:
    ROLE_ADMIN:       ROLE_USER, ROLE_ALLOWED_TO_SWITCH
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    administrators:
        entity: { class: VNNPressboxBundle:User, property: username }

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    secured_area:
        pattern:    ^/
        form_login: ~
        logout: ~
        anonymous: ~
        switch_user: true 
```

关于问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:57:58.460

您是否尝试清除 symfony 缓存？我也有一些无法解释的问题，只是通过清除它来解决。尝试没有坏处:)

**更新：**阅读问题评论后，由于缺少调试栏，我猜你可能是在生产环境中。这可能是你麻烦的根源。尝试通过运行以下命令清除缓存并切换到开发环境：

```
php app/console --env=dev cache:clear 
```

Update2：您是否通过 app_dev.php 文件访问您的应用程序？

# iphone - 应用内电子邮件不适用于 iOS 设备/模拟器 iOS6

> ID：13938082
> 
> 赞同：1
> 
> 时间：2012-12-18T17:11:48.163
> 
> 标签：iphone, xcode, email, ios6

我正在尝试为我的应用程序实施应用内电子邮件，但遇到了一个严重的问题。当按下按钮打开应用内电子邮件时，它工作得很好。以下是我遇到的问题：

当我点击取消时，它会要求我保存/删除取消取消的草稿。如果我点击“删除草稿”，操作表就会消失，但邮件编辑器会保持打开状态。我可以与它交互并一遍又一遍地点击发送，它会继续发送电子邮件。但是取消按钮不能再交互了。“保存草稿”按钮保存电子邮件的草稿，但作曲家仍在运行，我可以与取消按钮进行交互。

这是我正在使用的代码：

```
 - (IBAction)sendEmail:(id)sender {

    //Set up of e-mail
    sendMail = [[MFMailComposeViewController alloc] init];
    sendMail.mailComposeDelegate = self;

    //Set the subject
    [sendMail setSubject:@"Demo attachment"];

    //To recipients
    NSArray *toRecepients = [[NSArray alloc] initWithObjects:@"exampleEmail@email.com", @"exampleEmail2@email.com", nil];
    [sendMail setToRecipients:toRecepients];
    //[sendMail setBccRecipients:toRecepients];
    //[sendMail setCcRecipients:toRecepients];

    //Add message to the body
    NSString *emailBody = @"This is a test email with an attachment.\n";
    [sendMail setMessageBody:emailBody isHTML:YES];

    //Include an attachment
    //NSData *pdfData = [NSData dataWithContentsOfFile:@"demo.pdf"];

    //[sendMail addAttachmentData:pdfData mimeType:@"file/pdf" fileName:@"Some file"];
    [self presentViewController:sendMail animated:YES completion:NULL];
} 
```

在 iOS 6 上部署应用程序并使用 iPhone 5 作为测试设备。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:13:52.297

`[self dismissModalViewControllerAnimated:YES];`在适当的位置向您的委托添加一个。

```
- (void)mailComposeController:(MFMailComposeViewController*)controllerdidFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    //.. other completion code

    [self dismissModalViewControllerAnimated:YES];
} 
```

# hadoop - 使用 Hadoop helloworld 和非泛型迭代器的 Java 版本配置

> ID：13938083
> 
> 赞同：0
> 
> 时间：2012-12-18T17:11:48.793
> 
> 标签：hadoop, javac, rhel

我正在研究一个 RHEL 英特尔集群，该集群已经安装了 hadoop，并被其他用户大量使用和测试。我正在尝试学习使用该框架，所以我从这里的教程开始：http: [//hadoop.apache.org/docs/r0.17.0/mapred_tutorial.html](http://hadoop.apache.org/docs/r0.17.0/mapred_tutorial.html)

所以，我从上面的链接中复制了 WordCount.java 的源代码到 ~/hadooptest/，并按照编译说明进行了一些小的更改以修复版本错误，这里是编译尝试的输出以及一些相关的系统信息。

```
[X@X hadooptest]$ pwd
/home/X/hadooptest
[X@X hadooptest]$ javac -version
Eclipse Java Compiler v_677_R32x, 3.2.1 release, Copyright IBM Corp 2000, 2006\. All rights reserved.
[X@X hadooptest]$ $JAVA_HOME/bin/java -version
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode)
[X@X hadooptest]$ hadoop version
Hadoop 0.20.2-cdh3u5
Subversion file:///data/1/tmp/topdir/BUILD/hadoop-0.20.2-cdh3u5 -r 30233064aaf5f2492bc687d61d72956876102109
Compiled by root on Fri Oct  5 18:45:42 PDT 2012
From source with checksum de1770d69aa93107a133657faa8ef467
[X@X hadooptest]$ javac -source 5.0 -classpath /usr/lib/hadoop-1.0.1/hadoop-core-1.0.1.jar -d wordcount_classes/ WordCount.java
----------
1\. ERROR in WordCount.java (at line 0)
    package org.myorg;
    ^
The type Iterator is not generic; it cannot be parameterized with arguments <V2>
----------
2\. ERROR in WordCount.java (at line 29)
    public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
                                 ^^^^^^^^
The type Iterator is not generic; it cannot be parameterized with arguments <IntWritable>
----------
2 problems (2 errors)[X@X hadooptest]$ 
```

我知道这个问题可能不是 Hadoop 特有的，但我主要不是 Java 用户。当我习惯使用 Hadoop 的本地语言时，我可能会选择切换到使用 C++ 库（但这是另一天的故事）。我用谷歌搜索了这个问题，我发现它通常表明使用 1.4.X JRE ......我们也有：

```
[fraha1@intel06 hadooptest]$ java -version
java version "1.4.2"
gij (GNU libgcj) version 4.1.2 20080704 (Red Hat 4.1.2-48)

Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
[fraha1@intel06 hadooptest]$ $JAVA_HOME/bin/java -version
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode) 
```

我已将 ~/.bash_profile 设置为定向到 1.6 JRE，但大概 javac 配置为仍重定向到默认的 1.4。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:56:28.313

我认为您的 Java 环境配置一团糟。

如果您在系统`alternatives`中安装了命令（如果未安装），则可以轻松处理不同的 Java 安装。只需输入：

```
$ alternatives --config java

  Selection    Command
-----------------------------------------------
   1           /usr/java/jdk1.6.0_25/bin/java
*  2           /usr/lib/jvm/jre-1.6.0-openjdk/bin/java
 + 3           /usr/lib/jvm/jre-1.5.0-gcj/bin/java 
```

并选择您希望默认运行的 java。

这解决了java问题。

那么你`javac`没有指向 $JAVA_HOME/bin/javac。尝试将示例编译为：

```
 $ $JAVA_HOME/bin/javac -source 5.0 \
-classpath /usr/lib/hadoop-1.0.1/hadoop-core-1.0.1.jar \
-d wordcount_classes/ WordCount.java 
```

这应该有效。

# c# - 我可以将我的 WebAPI 路由设置为要求包含参数 X 或参数 Y 吗？

> ID：13938084
> 
> 赞同：3
> 
> 时间：2012-12-18T17:11:55.130
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

对于我的控制器中的 GET 函数，我想要求传入一个名称。对于 PUT 函数，我想要求传入 id（对象在消息正文中）。例如：

```
GetObject(string name)
PutObject(int id, Object obj) 
```

我可以创建一个需要 name 或 id 参数存在的路由吗？在伪代码中：

```
routeTemplate: api/{controller}/{name}|{id} 
```

或者什么是最好的路由方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:31:22.220

如果您以 RESTfully 方式使用 HTTP 动词，我可能会建议您查看[AttributeRouting包来解决您的问题。](http://attributerouting.net/ "属性路由")它允许一些非常高级的路由，包括您正在寻找的条件。

# c++ - 编译器如何工作以评估 c 中的 sizeof 运算符

> ID：13938086
> 
> 赞同：4
> 
> 时间：2012-12-18T17:12:01.963
> 
> 标签：c++, c, compiler-construction, sizeof

虽然已经在这个论坛上提出了几个问题以及其他与 sizeof 运算符相关的问题，但我无法得到任何关于编译器如何评估 sizeof 运算符以找到任何数据类型、变量、指针、数组等的大小的答案。如果可能的话，也请指出我到一些可以帮助我详细理解这一点的链接。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T17:15:26.073

编译器只*知道*原始数据类型的大小；这些知识基本上内置于编译器中。

对于传统的固定大小数组和复杂数据类型（结构和类），它只是将组成原语的大小相加并考虑任何必要的填充。见[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

在大多数情况下，`sizeof()`计算是在编译时完成的。可变长度数组（C99 中的新功能）是个例外，它是在知道元素数量后在运行时计算的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:16:22.760

大小信息来自编译器内部的信息。

编译器知道基本类型（例如`char`、`int`、`double`和指针）的大小，因为它们是在编译器中设计的。

编译器通过将复合结构的所有部分的大小相加来计算复合结构的大小，包括结构中的成员，加上任何用于对齐的填充，以及任何支持语言特性的隐藏部分（例如指向支持多态性的类信息的指针） .

编译器通过将元素数乘以每个元素的大小来计算数组的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T17:20:35.127

`char`根据定义，大小为 1。请注意，它不一定是 8 位，但始终是 1 字节。

原始类型和指针都有一个编译器知道的固定大小。这些可能因编译器和平台而异。

数组的计算方法是元素类型的大小乘以元素的数量。

C 中的结构和 C++ 中的类至少与其非静态数据成员的总和一样大。为了正确对齐成员，它们可能更大；在 C++ 中，可能有额外的、不可访问的数据成员来支持多态性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T21:07:09.930

源代码中声明的变量的大小对于程序来说总是知道的，无论它们是数组、结构还是等。但是大多数数据类型都有固定的大小来定义它们。我们有不同数据类型的原因是因为我们需要不同大小的数据类型。char 是可以放入 1 个字节的任何字符。为了这个例子，它只能代表数字 0-9。所以假设我们有一个 16 位长的数字，如果我们只有字符，那么计算机将需要 16 个字节来表示该数字。知道想象一个 8 位长数字（它是一个字节），它的 8 位数字中的每一位只能有 2 个可能的值（0 或 1），你只能有 64 种可能的唯一组合。现在想象一下，如果这 64 种组合中的每一种都代表一个特定的数字。您很可能会在不到 16 个字节的时间内纠正该 16 位长数字。这就是 int 数据类型背后的想法。请注意，我简化了对 int 和 chars 的解释，以便我可以解释它们而不必太深入。现在我知道你对数组的看法了吗？

```
for (i = 0; array[i] != NULL; i++) {} 
```

上面的代码基本上就是函数 strlen() 的作用。你有没有想过为什么数组以 NULL 字符结束？部分原因是它使得查找数组的长度就像上面的代码一样容易。所以要回答你的问题 sizeof() 真的不需要计算它已经知道值的任何东西。

# java - eclipse中保存的属性文件在哪里？

> ID：13938087
> 
> 赞同：0
> 
> 时间：2012-12-18T17:12:04.430
> 
> 标签：java, eclipse, properties

我有这段代码用于在 Eclipse 中保存和加载属性文件。我创建了一个 Eclipse 应用程序项目。

```
 Properties properties = new Properties();
    try {
        String propertyFilePath = "smcho.properties";
        // properties.load(new FileInputStream(propertyFilePath));
        properties.setProperty("database", "values");
        properties.store(new FileOutputStream(propertyFilePath), null);

        // Now, re-read the property file
        properties.load(new FileInputStream(propertyFilePath));
        System.out.println(properties.getProperty("database"));
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

它工作正常，但我无法`smcho.properties`在我的计算机中找到该文件。当我将文件路径设置为绝对路径时，文件将从路径存储和加载。仅使用属性文件名保存属性文件在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:30:50.643

该文件将存储在工作目录中，这是您运行 Java 应用程序的路径。现在，如果您从 Eclipse 运行它，该文件将保存到项目的文件夹中。

为了让事情更清楚，假设您将代码示例导出到可执行 jar 文件中，并将其放在以下路径“/Users/prosseek/Desktop”中，并使用您 cd 到“/Users/prosseek”的终端并运行从那里开始应用程序，属性文件将在“/Users/prosseek”中创建，然后如果您 cd 进入“/Users/prosseek/Desktop”并再次运行该应用程序，将在桌面路径中创建一个新文件，现在是新的工作目录。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:05:11.983

对于 Mac，当我执行包含代码的 eclipse 应用程序项目时，属性文件存储在 eclipse 的安装位置。

`./Applications/eclipse_rcp_juno/Eclipse.app/Contents/MacOS/smcho.properties`

从 Waleed 的回答来看，从 eclipse 启动 eclipse 应用程序时，该目录似乎被视为工作目录。

# c++ - 什么是 Visual Studio 中的 C++ 优化和整个程序优化

> ID：13938089
> 
> 赞同：12
> 
> 时间：2012-12-18T17:12:06.157
> 
> 标签：c++, visual-studio, optimization

本质上，我想知道什么是 c++ 优化 (/O) 和整个程序优化 (/GL)。

将不胜感激深入的解释。

![C++ 优化](../Images/a4ce23d72addc11aa1187a5e2f661aa6.png)

![整个程序优化](../Images/fe1cb4800ec8e0e7f49b752c22078b3b.png)

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T17:33:26.953

全程序优化是*跨模块优化*的一个方面。由于这些语言的编译模型，这在 C 和 C++ 的上下文中也称为*链接时优化。*

基本上，想象一下你的程序的*整个*源代码被粘贴到一个文件中，源文件、头文件和库文件，一切。在那种假设的情况下，编译器将有很多额外的优化机会：内联、死代码删除、重复数据删除等。

跨模块优化是指任何尝试允许此类优化的技术，即使在 C 和 C++ 编译器惯用的传统的一次一个 TU 编译中也是如此。通常，这涉及将额外信息（甚至可能是整个解析的源内容）添加到各个目标文件中，并允许链接器在看到应用程序的所有成分目标文件后执行某些编译任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T17:34:27.027

MSVC 是所谓的[优化编译器](http://en.wikipedia.org/wiki/Optimizing_compiler)。OC 获取您编写的代码并重写其中的部分代码，以最小化内存占用、最大化执行速度或两者兼而有之。他们通过利用代码运行平台的深厚技术知识来做到这一点，通常针对特定的指令集。

MSVC、GCC、LLVM 和许多其他 OC 都使用许多不同的技术来实现这一点。这些技术本身远远超出了互联网帖子中可以解释的范围，即使我都知道（我不知道）。但是有一些事情你应该记住。

一个经过优化的程序比没有经过优化的程序更难调试。很多代码可能已经在程序中的执行顺序和位置方面被移动了，并且符号被剥离了。

一般来说，该标准允许编译器对您的程序进行**任何**它希望的更改，只要您的程序的可观察行为是相同的“ [AS-IF](http://en.cppreference.com/w/cpp/language/as_if) ”，没有进行任何更改。

负责优化代码的编译器部分是由非常聪明的人组成的专门团队多年来设计和编写的。最终的结果是一个编译器，总的来说，它在优化代码方面比你希望的要好得多。通常，出于两个原因，尝试实现自己的微优化是没有意义的。一，编译器通常可以做得更好，二，你编写的微优化会混淆编译器实现自己优化的能力。通过手动对代码进行微优化，实际上可能会使程序性能*更差*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:38:25.280

整个程序优化在 Visual Studio 中称为 LTCG - 链接时间代码生成 - 这是关于[LTCG](http://msdn.microsoft.com/en-us/magazine/cc301698.aspx)的文章。

# javascript - Jquery 在带有链接的两个图像之间切换

> ID：13938090
> 
> 赞同：1
> 
> 时间：2012-12-18T17:12:10.943
> 
> 标签：javascript, jquery, html

我有一个包含五个链接的页面。每个链接都会打开一个灯箱（使用 prettyphoto），里面有两个图像（用户可以在这些图像之间切换）和一个段落。

我有一个简单的 Jquery 脚本，可以在两个图像之间切换。

见[jsfiddle](http://jsfiddle.net/Wmw9K/)。

```
$(document).ready(function() {
  $('a.unactive').live('click', function(){
    $('a.button').toggleClass('unactive');
    $('div.show').toggle('blind','',500);
    console.log('clicked');
});

});​ 
```

此功能工作正常。当用户在灯箱中的图像之间切换以及当他们关闭灯箱并打开一个新的灯箱时，就会出现问题，这两个图像都会显示。**请在此处查看问题示例： [jsfiddle](http://jsfiddle.net/HU8zx/101/)。**

**总之，我无法在页面上的灯箱之间切换并正确使用此切换功能。我只能在一个灯箱中的两个图像之间切换，而无需刷新页面。**

我的问题是如何修改这个 Jquery 函数，以便当用户打开和关闭页面上的不同灯箱时它可以工作？我可以使用一些重置还是应该修改 HTML 结构？还是有另一种切换图像的方法？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:39:48.093

我认为这个问题与这种内联样式有关：尝试删除它。

```
 <div id="thediv" style="display:none;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:25:10.487

抱歉，我不同意到目前为止得出的推论。我认为漂亮照片中有一个错误。当您显示/隐藏时，它会创建一个新容器并将代码复制到其中。在复制过程中，div 的 css display:none 属性丢失。

事实上，一直以来，当您认为您正在使用 2 个元素（两个链接或两个 div）时，您正在使用 4\. 2 个原始元素和 2 个克隆元素。

一个简单的解决方法是仅使用克隆：

```
$(document).ready(function() {
    $('a.button.unactive', "div.pp_content_container").live('click', function() {
        $('a.button', "div.pp_content_container").toggleClass('unactive');
        $('div.show', "div.pp_content_container").toggle('blind','',500);
        console.log('clicked');
    });
});​ 
```

看到它工作：http: [//jsfiddle.net/HU8zx/114/](http://jsfiddle.net/HU8zx/114/)

# python - get 和 [] 之间的区别

> ID：13938091
> 
> 赞同：0
> 
> 时间：2012-12-18T17:12:14.040
> 
> 标签：python

Django的新手，有人可以解释一下

```
username=form.cleaned_data['username'] 
```

**对比**

```
username=form.cleaned_data.get('username') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:16:35.267

`form.cleaned_data`是一本字典。如果您尝试像这样通过字典直接访问密钥，如果找不到密钥，则会引发错误。

```
>>> ex_dict = {}
>>> ex_dict = {'x':1, 'y':2}
>>> ex_dict['z']

Traceback (most recent call last):
  File "<console>", line 1, in <module>
KeyError: 'z' 
```

然而，如果你使用`get`字典，它会返回`None`而不是错误，或者你可以指定你期望的返回，如果没有找到键。

```
>>> ex_dict.get('z')
>>> ex_dict.get('z', 1)
1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:16:52.360

这将引发一个`KeyError`if `username`key is not found

```
form.cleaned_data['username'] 
```

但是如果找不到密钥，这将返回`None`（默认情况下），不会引发`KeyError`异常。

```
form.cleaned_data.get('username') 
```

`.get`如果未找到键，您可以选择更改默认返回值（如果使用）。

```
val = form.cleaned_data.get('username', False)
# assume key was not found
print val # should contains False now 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T17:15:38.787

从[文档](http://docs.python.org/2/library/stdtypes.html#dict.get)：

> `get`（*键*[，*默认*]）
> 
> 如果*key*在字典中，则返回*key*的值，否则返回*default*。如果未给出默认值，则默认为*，*因此此方法永远不会引发。***`None``KeyError`***

# android - 如何设置页眉、可滚动内容和页脚？在安卓中

> ID：13938092
> 
> 赞同：5
> 
> 时间：2012-12-18T17:12:17.023
> 
> 标签：android, android-layout, header, android-linearlayout, footer

![内容](../Images/e4fcd023b5a869915b7b55a0bb000a76.png)

我想让中间部分可以滚动。我不知道..这是我的 xml 大纲。我想在可滚动区域中插入这个 xml 大纲。

注意：页眉和页脚必须保持不变。只有中间区域必须滚动

![大纲](../Images/f7d34249b4f907b707ed218ddeb34745.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T17:17:34.903

更简单的方法是使用：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/headerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollablContent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/footerView"
        android:layout_below="@+id/headerView" >

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:id="@+id/footerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T03:38:19.460

您可能想要其中包含页眉和页脚的 listView。

你见过[这个吗？](https://stackoverflow.com/questions/6121186/android-listview-with-header-and-footer-buttons)

另见此[。](https://stackoverflow.com/questions/9262704/add-empty-header-or-footer-on-listview-programmatically)

还有[这个。](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)

希望这一切都对您有所帮助。如果没有，请告诉我。

享受编码。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T17:31:48.113

您必须将外部容器从 LinearLayout 替换为 RelativeLayout，然后为 header ImageView 设置 alignParentTop=true，为页脚 ImageView 设置 alignParentBottom=true，并设置 layout_above="@+id/imageViewFooter", layout_below="@+id/滚动视图的 imageViewHeader"。像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageViewHeader"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="false"
        android:layout_alignParentTop="false"
        android:scaleType="fitXY"
        android:src="@drawable/square" />

    <ImageView
        android:id="@+id/imageViewFooter"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_alignParentBottom="true"

        android:scaleType="fitXY"
        android:src="@drawable/square" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/imageViewFooter"

        android:layout_below="@+id/imageViewHeader" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

# python - 为什么 Python Requests HTTP 库总是返回发送的 cookie？

> ID：13938096
> 
> 赞同：2
> 
> 时间：2012-12-18T17:12:42.463
> 
> 标签：python, python-requests

使用 python 外壳

```
>>> import requests
>>> cookies = {'sentcookie':'666'}
>>> res = requests.get('http://en.wikipedia.org/wiki/Main_Page', cookies=cookies)
>>> res   
<Response [200]>
>>> res.cookies
<<class 'requests.cookies.RequestsCookieJar'>[Cookie(version=0, name='sentcookie', 
value='666', port=None, port_specified=False, domain='', domain_specified=False, 
domain_initial_dot=False, path='/', path_specified=True, secure=False, expires=None,  
discard=True, comment=None, comment_url=None, rest={'HttpOnly': None}, rfc2109=False)]>
>>> 
```

为什么服务器返回的 cookie 列表中包含“sentcookie”？我已经嗅探了通信并且没有从服务器返回 cookie。为什么请求将其包含在列表中，我该如何禁用此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:51:02.057

我有完全相同的问题，我认为我不完全理解您的答案。假设您想根据文档将 cookie 添加到您的请求中，这是正确的方法：

```
cookies = {'sentcookie':'666'}
response = requests.get('http://en.wikipedia.org/wiki/Main_Page', cookies=cookies) 
```

现在，如果服务器返回 cookie，您可以通过以下方式访问它们：

```
response.cookies 
```

但我不希望得到与我发送的相同的 cookie，即使服务器没有返回它们，出于某种原因它正在发生。

我怎样才能防止这种行为？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:23:13.143

这不是要*禁用*该行为，而是要*告诉* `requests` **您执行该**行为。

在这：

```
cookies = {'sentcookie':'666'}
res = requests.get('http://en.wikipedia.org/wiki/Main_Page', cookies=cookies) 
```

您是在告诉它您希望该 cookie 可用，无论是否需要...

您通常使用`cookies=`浏览器缓存或其他东西（出于某种原因）可能拥有的现有 cookie，然后照常`requests`处理来自服务器的 cookie

# jquery - 在 KendoUI Grid 中搜索所有列

> ID：13938101
> 
> 赞同：17
> 
> 时间：2012-12-18T17:12:50.233
> 
> 标签：jquery, kendo-ui

我正在尝试为 kendoUI 网格创建一个搜索框。我已经能够开始基于一个字段进行搜索，但是我希望我的搜索框中的值可以搜索网格中的所有列。

```
function() {
            grid.data("kendoGrid").dataSource.filter({
                field: "ProductName",
                operator: "contains",
                value: $('#category').val()
            });

        } 
```

[参见 js fiddle 示例](http://jsfiddle.net/nlarkin/Naka3/11/)

我在这里尝试使用 or 逻辑运算符：[jsfiddle.net](http://jsfiddle.net/nlarkin/Naka3/17/)但是我似乎无法让它工作....（请参阅或逻辑按钮）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T22:29:55.157

我认为如果你想匹配这两个条件之一，你应该说`eq`to`fee` **或** `eq`to 。`fi`

我稍微修改了你的[小提琴](http://jsfiddle.net/OnaBai/Naka3/18/)来展示它。如果您在搜索框中键入，您将过滤匹配`ProductName`列或的记录`QuantityPerUnit`。

```
//change event
$("#category").keyup(function () {
    var val = $('#category').val();
    $("#grid").data("kendoGrid").dataSource.filter({
        logic  : "or",
        filters: [
            {
                field   : "ProductName",
                operator: "contains",
                value   : val
            },
            {
                field   : "QuantityPerUnit",
                operator: "contains",
                value   : val
            }
        ]
    });
}); 
```

**重要提示**：我必须将 jQuery 版本更新到 1.8.2 才能使其正常工作，以防万一我也将 KendoUI 更新到最新版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-27T21:04:40.820

如果您不想担心列名，则可以改用此代码。它适用于任何网格，并将搜索所有标记为可过滤的列，而无需指定硬编码的列名。此外，我添加了其他事件，以便如果有人要复制和粘贴搜索查询，则会调用该事件。（这也需要 jQuery 1.83 或更高版本）。我从 jQuery Datatables 插件切换到 Kendo UI Grid 后创建了这段代码。我喜欢 Kendo，但真的很怀念 DataTables 提供的全局搜索文本框。我在我所有的剑道网格中都包含了这个代码。

```
 $("#category").on("keypress blur change", function () {
        var filter = { logic: "or", filters: [] };
        $searchValue = $(this).val();
        if ($searchValue) {
            $.each($("#grid").data("kendoGrid").columns, function( key, column ) {
                if(column.filterable) { 
                    filter.filters.push({ field: column.field, operator:"contains", value:$searchValue});
                }
            });
        }
        $("#grid").data("kendoGrid").dataSource.query({ filter: filter });
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-31T23:59:16.997

OnaBai 的回答不像 dataTables 那样工作，数据表将空格视为和跨字段。在小提琴中，如果您键入“chef 36”，它不会显示任何结果 dataTables 搜索将显示 productid 为 5 的行，因为它在一列中有厨师，而在另一列中有 36。正确的代码看起来像这样[http://jsfiddle.net/Naka3/38/](http://jsfiddle.net/Naka3/38/)。

```
 $("#category").keyup(function () {
    var selecteditem = $('#category').val();
    var kgrid = $("#grid").data("kendoGrid");
    selecteditem = selecteditem.toUpperCase();
    var selectedArray = selecteditem.split(" ");
    if (selecteditem) {
        //kgrid.dataSource.filter({ field: "UserName", operator: "eq", value: selecteditem });
        var orfilter = { logic: "or", filters: [] };
        var andfilter = { logic: "and", filters: [] };
        $.each(selectedArray, function (i, v) {
            if (v.trim() == "") {
            }
            else {
                $.each(selectedArray, function (i, v1) {
                    if (v1.trim() == "") {
                    }
                    else {
                        orfilter.filters.push({ field: "ProductName", operator: "contains", value:v1 },
                                              { field: "QuantityPerUnit", operator: "contains", value:v1});
                        andfilter.filters.push(orfilter);
                        orfilter = { logic: "or", filters: [] };
                    }

                });
            }
        });
        kgrid.dataSource.filter(andfilter);
    }
    else {
        kgrid.dataSource.filter({});
    }

}); 
```

# java - 我的计时器线程可能用 Thread.sleep 欺骗了他？

> ID：13938107
> 
> 赞同：2
> 
> 时间：2012-12-18T17:13:09.137
> 
> 标签：java, multithreading

所以本质上我担心我的 timertask 的`run`方法在 10 分钟后没有被调用，因为我让主线程休眠 10 秒以避免疯狂的 CPU 使用，只是整天运行一个空的 while 循环。这是java main方法的代码。

```
 private static boolean testDone = false;
 public static void main(String[] args)
 {
        final int minutes = 10;
        final StressTest test = new StressTest(someParams);

        test.start();

        Timer timer = new Timer();
        timer.schedule(new TimerTask(){

            @Override
            public void run() {

                testDone = true;
                int completedSynths = test.stop();
                System.out.println("Completed Synths: " + completedSynths);
                System.out.println("Elapsed Time in Minutes: " + minutes);
                System.out.println("Throughput (synths/min): " + completedSynths/minutes);

            }}, minutes*60*1000);

        while(!testDone)
        {
            System.out.println("Still not done... sleeping for 10 secs....");
            Thread.sleep(10000);
        }

        System.exit(0); 
```

更疯狂的`System.out`是，`while`循环中永远不会打印。我做了什么？？

编辑：为 StressTest 对象添加伪代码

```
public class StressTest 
{

    private SecureRandom random = new SecureRandom();

    private volatile int completedSynths = 0;

    private volatile boolean shouldStop = false;

    private Thread[] threads;

    /**
     * Instantiate a new StressTest object.
     * 
     * @param threadCount number of concurrent threads to be polling server
     */
    public StressTest(int threadCount)
    {
        threads = new Thread[threadCount];
    }

    public void start()
    {
        System.out.println("Starting Stress Test....");

        for(int i = 0; i < threads.length; i++)
        {
            Runnable synthCaller = new SynthApiCaller();
            threads[i] = new Thread(null, synthCaller, "SynthThread" + i);
            threads[i].run();
        }
    }

    public int stop()
    {
        System.out.println("Stopping Stress Test...");
        shouldStop = true;

        return completedSynths;
    }

    private String randId()
    {
        return new BigInteger(130, random).toString(32);
    }

    private class SynthApiCaller implements Runnable
    {
        @Override
        public void run() 
        {
            while(!shouldStop)
            {
                try 
                {
                            //this class makes an HTTP request to a server and then writes result to a file
                    MyClass.writeFile( "someFileLoc/file.data");
                    completedSynths++;

                    Runtime.getRuntime().exec("rm -r " + fileLoc);
                    System.out.println("Synth # " + completedSynths);
                } 
                catch (IOException e) 
                {
                    System.out.println(e.getMessage());
                }
            }

            System.out.println("Thread terminated...");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:23:05.900

> 我担心我的 timertask 的 run 方法在 10 分钟后没有被调用，因为我让主线程休眠 10 秒

主`Thread.sleep(...)`线程中的 不会影响`Timer`. 如果计时器在 10 分钟后没有运行，那么这可能`test.stop()`是阻塞的吗？

重要的是要认识到，如果测试是在主线程中开始的，然后在`Timer`线程中停止，那么一些同步将是必要的。我假设测试正在另一个线程中运行。您可能需要将其同步，然后在`Timer`您调用的线程内部：

```
synchronized (test) {
    test.start();
} 
```

[如果您是 Java 同步新手，网上](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)有一些很好的教程。

如果您想知道是否正在调用计时器，我会在您的计时器任务中设置一个断点`testDone = true`，看看它是否到达那里。这是[在 eclipse 中使用调试器的好教程](http://www.vogella.com/articles/EclipseDebugging/article.html)。

> 更疯狂的是，while 循环中的 System.out 永远不会打印。我做了什么？？

正如@assylias 提到的，`System.out(...)`在你的while循环中没有出现必须意味着它 `testDone`设置为true。由于`testDone`正在不同线程中更新和访问，因此您需要确保它也是`volatile`.

* * *

`test.start()`我只是在没有and的情况下运行了您的代码示例`stop()`，它似乎工作正常。问题可能出在您的`test`代码中。

```
Still not done... sleeping for 10 secs....
Still not done... sleeping for 10 secs....
...
Completed Synths: 1
Elapsed Time in Minutes: 10
Throughput (synths/min): 0 
```

* * *

现在您已经添加了更多代码，这里有一些注释：

*   `completedSynths++;`应该改成`AtomicInteger`. ++ 不是原子操作，因此即使该字段是易失的，多个线程也可以覆盖彼此的增量。

*   If you are trying to wait for the threads to complete, instead of sleeping for 10 minutes, I'd recommend calling `thread[i].join()` with the threads. Even better would be use an `ExecutorService` and use the `awaitTermination(...)` method.

*   You call `shouldStop = true;` and then return the `completedSynths;`. You may want to wait for the threads to finish or something.

*   I'd not pass in a `null` `ThreadGroup` to the `Thread` constructor. Just use the constructor without the `ThreadGroup`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:28:07.370

I suggest making testDone volatile. As it is, I don't see anything forcing changes to testDone to be visible to reads in threads other than the one making the change.

# c# - Facebook 和 Twitter/LinkedIn 之间的 OAuth 令牌差异

> ID：13938108
> 
> 赞同：5
> 
> 时间：2012-12-18T17:13:08.927
> 
> 标签：c#, facebook-graph-api, oauth, asp.net-mvc-4, twitter

这很可能是一个冒犯性的愚蠢问题，但我一生都找不到一个快速而简洁的答案。所以我们开始...

我目前正在 C#/MVC4 Web 应用程序中实现 Facebook、Twitter 和 LinkedIn 发布/更新/共享功能。我在每个社交网络上创建了适当的应用程序，网络应用程序的用户可以授权（通过每个网络的标准 OAuth 对话），这样他们就可以一键将配置文件更新发送到多个/所有网络。我已经完成了这个功能的开发，一切都按设计工作；我现在正处于重构代码和相关数据库架构的阶段（用于存储应用程序和用户所需的 OAuth 令牌、从特定网络的 API 中提取的扩展用户信息、个人帖子指标等），这就是我只能摸不着头脑。

**没有进一步的告别......问题：**

1.  关于应用程序的 OAuth 令牌：为什么 Facebook 只提供/要求“应用程序秘密”，而 Twitter 和 LinkedIn 都提供/要求“消费者密钥”和“消费者秘密”？

2.  关于应用程序用户的 OAuth 令牌：为什么 Facebook 只提供/需要“访问令牌”而 Twitter 和 LinkedIn 都提供/需要“访问令牌”和“访问令牌秘密”？

这仅仅是因为 Facebook（2.0 草案 12）与 Twitter 和 LinkedIn（1.0a）实现的 OAuth 协议版本不同，还是完全是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:52:04.163

以下是您的问题的答案，

1.Facebook 在将应用注册为 Facebook 开发者时，确实提供了 App key 和 App secret。

2.Facebook使用OAuth 2.0，所以它只提供了一个访问令牌和刷新令牌（刷新令牌仅在您在指定范围时要求离线访问时提供），访问令牌有效期为1小时，失效后，您需要刷新它或完全获取新的访问令牌。

这种差异是由于 OAuth 协议版本 OAuth 1.0/1.0a 和 OAuth 2.0 的差异造成的。

# c# - 类型化数据集正确使用

> ID：13938112
> 
> 赞同：2
> 
> 时间：2012-12-18T17:13:20.010
> 
> 标签：c#, visual-studio, strongly-typed-dataset, typed-dataset

如果我理解正确，我是否必须使用表适配器将数据放入我的类型化数据集中，我不能只创建强类型化数据集并让数据自动加载？（我也在 VS2012 中使用 .net 3.5 项目）

例如，我必须这样做才能获取数据（如果我这样做，我会得到数据）

```
 var a = new EvtDataSetTableAdapters.tblFileTableAdapter();
  a.GetData(); 
```

而不是仅仅这样做，（如果我这样做，我什么也得不到......我可以理解它是否延迟加载......？？）

```
EvtDataSet o = new EvtDataSet();
var r = o.tblFile.Select(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:46:14.593

所有数据集（类型和无类型）都与数据库无关，即任何数据表都可以从 Oracle 中填充，就像从 MS-Sql 中一样容易。DataSet 不知道架构或连接字符串。

您需要一个适配器来读取/读取后备存储。

（并且 DataTable.Select() 可能来自 Linq-to-Datasets）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:56:23.463

类型化数据集的最佳用法：忽略，从不使用。改为 OTM。使用 LINQ。数据集——有类型和无类型——在 .NET 1.0 中很糟糕，从那时起，甚至 MS 也意识到了替代方案。10年没用过一个，不会用一个。

例外：报告 SQL 是“从外部输入”的应用程序，因此您基本上只需要一个通用数据容器。

使用 EntityFramework 或大量替代方案之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T18:38:52.653

备受诟病、被误解的强类型数据集！通常是的，您将使用 a`TableAdapter`来加载数据并执行更新。使用设计器，您可以将参数查询添加到表适配器以支持您的程序所需的操作，例如`select * from customers where customerid = @customerid`

打电话给这个`FillbyCustomerid`。

然后，您将使用以下`TableAdapter`内容为所选客户提取数据：

```
dim ta as new dscustomerstableadapters.customertableadapter
dim ds as new dsCustomers
ta.fillbycustomerid (ds.customers, ourid) 
```

# dynamics-crm-2011 - 提高 Dynamics CRM 解决方案导入速度

> ID：13938116
> 
> 赞同：4
> 
> 时间：2012-12-18T17:13:47.280
> 
> 标签：dynamics-crm-2011, dynamics-crm

我们的 Dynamics CRM 解决方案非常大，在我们的服务器上完成导入需要 20 到 25 分钟。

在 Dynamics CRM 托管服务提供商上测试导入过程时，导入所用时间明显减少，大约 8 分钟。

为了查看硬件是否可以提高导入速度，我在 VMware Workstation 8 中使用 Dynamics CRM 设置了一个虚拟机。VM 位于 SSD、4 核（来自 6 核 i7-3930K）上，有 12 GB 内存。仍然花了大约20分钟。我尝试了 SQL 2008 R2 SP2 和 SQL 2012，没有明显区别。

如何在软件方面提高导入速度？是否有任何可用信息详细说明导入过程的作用，以便我们可以围绕这些变量进行优化？

该解决方案包含 60 多个实体、40 多个系统实体的自定义、插件、功能区按钮、站点地图更改、处理步骤和数百个 Web 资源。它目前略高于 6MB。

另外，我怎么知道什么硬件组件是导入过程的最大瓶颈？Perfmon 显示 SSD 在大部分导入过程中处于空闲状态，RAM 为 6.5 GB，只有处理器显示相对较高的使用率，但不超过 30%-40%。或者，VMware Workstation 本身是否是瓶颈，而专用硬件或 ESX/Hyper-V 会改善这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:00:03.407

尽管它可能是四个核心，但导入过程本身在单个线程上运行，因此这可能解释了 CPU 使用率相对较低的原因 - 一个核心（加上另一个核心）非常努力，相当于总共 30-40%中央处理器。我敢打赌，即使您只给虚拟机一个内核，您也会看到类似的时间（可能会更长，但不多）。

您真正的问题是您的解决方案太大了。将其分解为组件。测试您是否可以将性能问题缩小到某些自定义项。例如，我将开始删除所有 Web 资源，看看这对导入有何影响。

另一种方法是将其拆分为两种解决方案——一种是“稳定的”，另一种是正在积极开发中。然后，您将更频繁地导入较小的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:15:10.887

保证您不会在真实硬件上获得任何更差的性能。但是，由于您的 VM 没有使用现有的所有内容，因此您应该能够提高性能而无需执行该步骤。您是否厌倦了更改 VM 中的 IIS 设置？

# windows-phone-7 - 如何更改 Windows Phone 中地图方向的行为？

> ID：13938119
> 
> 赞同：1
> 
> 时间：2012-12-18T17:13:51.250
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, bing-maps

在我的 Windows Phone 应用程序中，我有一个指向位置经度和纬度的地图对象。我跟踪每几米阈值的位置更改事件。当我从 A 点移动到 B 点时，它可以正常工作并使用 puhpins 在地图上正确显示数据。

但是当我从 B 点移动到 A 点时，它会以与之前相同的方向显示地图，即 A 到 B，图钉值从 B 移动到 A。

我想改变这种行为，即当一个人从 B 点移动到 A 点时，B 点应该面向拿着手机的人，图钉应该朝着 A 移动，即远离拿着手机的人。目前我旋转我的移动 180 度以查看图钉从 B 指向 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:56:29.027

必应地图不支持在 WP7/WP8 上旋转图钉或透视图。您只能旋转完整的 Bing 地图控件。如果您有单向项目（例如文本），这会导致很多问题，因为它们会与地图一起旋转显示。

如果您使用的是 WP8，则可以使用新的诺基亚地图控件并设置 Pitch & Heading 属性来旋转地图以进行逐向导航。[请参阅诺基亚文章 @ http://www.developer.nokia.com/Resources/Library/Lumia/#!maps-tutorial.html;#toc_Mapproperties](http://www.developer.nokia.com/Resources/Library/Lumia/#!maps-tutorial.html;#toc_Mapproperties)中设置 Pitch、Heading 和其他属性的示例

例如，这是 Heading=0 的 WP8 Map 控件：

![Heading=0 的 WP8 地图控件：](../Images/c5fca5a625a699508a014b31b3233980.png)

这里是旋转的同一个地方，所有文本和项目都按照 Heading=180 的方式显示。

![标题=180](../Images/18f1727aebc39788183c984fb8f44157.png)

这是设置 Pitch 属性后的 Map 控件。 ![设置 Pitch 属性后的地图控件](../Images/eb2bec5d6cb04b674703af41ba5fe8e0.png)

Bing Maps 无法正确进行旋转和 Pitch 的原因是它具有位图图块。这意味着它从服务器获取的数据是它在网格中布置的一堆图像。诺基亚地图可以正确进行旋转和俯仰的原因是它使用了矢量图块。它从服务器获取有关每个位置的数据，并且地图控件本身绘制地形布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:51:42.870

此代码对我有用- [http://j2i.net/blogEngine/post/2010/12/15/Calculating-Distance-from-GPS-Coordinates.aspx](http://j2i.net/blogEngine/post/2010/12/15/Calculating-Distance-from-GPS-Coordinates.aspx) 您应该保存最后一个坐标（或获取您要前往的下一个坐标to) 并使用 Bearing 方法比较它们，然后将 myMap.Heading 属性设置为接收到的值。

# hadoop - 为什么 Hadoop hftp 服务目录而不服务文件？

> ID：13938120
> 
> 赞同：2
> 
> 时间：2012-12-18T17:13:51.897
> 
> 标签：hadoop, filesystems

我正在尝试使用 distcp 将文件从一个集群移动到另一个集群，使用他们的说明中指定的 hftp 协议。

我可以通过 hftp 读取目录，但是当我尝试获取文件时，我得到 500（内部服务器错误）。为了消除网络和防火墙问题的可能性，我在源服务器上使用了 hadoop fs -ls 和 hadoop fs -cat 命令来试图找出这个问题。

这提供了文件的目录：

```
hadoop fs -ls logfiles/day_id=19991231/hour_id=1999123123
-rw-r--r--   3 username supergroup        812 2012-12-16 17:21 logfiles/day_id=19991231/hour_id=1999123123/000008_0 
```

这给了我一个“找不到文件”错误，它应该是因为文件不存在：

```
hadoop fs -cat hftp://hserver.domain.com:50070/user/username/logfiles/day_id=19991231/hour_id=1999123123/000008_0x
cat: `hftp://hserver.domain.com:50070/user/username/logfiles/day_id=19991231/hour_id=1999123123/000008_0x': No such file or directory 
```

这一行给了我一个 500 内部服务器错误。该文件在服务器上得到确认。

```
hadoop fs -cat hftp://hserver.domain.com:50070/user/username/logfiles/day_id=19991231/hour_id=1999123123/000008_0
cat: HTTP_OK expected, received 500 
```

这是我尝试执行此操作时 distcp 记录的堆栈跟踪：

```
java.io.IOException: HTTP_OK expected, received 500
    at org.apache.hadoop.hdfs.HftpFileSystem$RangeHeaderUrlOpener.connect(HftpFileSystem.java:365)
    at org.apache.hadoop.hdfs.ByteRangeInputStream.openInputStream(ByteRangeInputStream.java:119)
    at org.apache.hadoop.hdfs.ByteRangeInputStream.getInputStream(ByteRangeInputStream.java:103)
    at org.apache.hadoop.hdfs.ByteRangeInputStream.read(ByteRangeInputStream.java:187)
    at java.io.DataInputStream.read(DataInputStream.java:83)
    at org.apache.hadoop.tools.DistCp$CopyFilesMapper.copy(DistCp.java:424)
    at org.apache.hadoop.tools.DistCp$CopyFilesMapper.map(DistCp.java:547)
    at org.apache.hadoop.tools.DistCp$CopyFilesMapper.map(DistCp.java:314)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:268)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.mapred.Child.main(Child.java:262) 
```

有人能告诉我为什么 hftp 无法提供文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T14:18:11.940

我遇到了同样的问题，最终找到了解决方案。

一切都在这里详细解释：[http ://www.swiss-scalability.com/2015/01/hadoop-hftp-returns-error-httpok.html](http://www.swiss-scalability.com/2015/01/hadoop-hftp-returns-error-httpok.html)

但简而言之，我们可能将 NameNode RPC 绑定到通配符地址（即 dfs.namenode.rpc-address 指向接口的 IP，而不是 0.0.0.0）。

不适用于 HFTP：

```
<property>
    <name>dfs.namenode.rpc-address</name>
    <value>0.0.0.0:8020</value>
</property> 
```

与 HFTP 一起使用：

```
<property>
    <name>dfs.namenode.rpc-address</name>
    <value>10.0.1.2:8020</value>
</property> 
```

# excel - 重复值 - 保留其中一个值

> ID：13938123
> 
> 赞同：0
> 
> 时间：2012-12-18T17:14:02.797
> 
> 标签：excel

我的 excel 工作簿按重复值按颜色排序。

excel 文档选择了所有重复项的值，如何保留其中一个值而不是完全删除所有重复项，包括唯一值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:59:08.573

在 Excel 2007 中：

`Data tab`>>`Remove Duplicates`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:26:27.357

只需选择您的数据/列并转到数据/删除重复项或选择数据并按 Alt + A、M。

# c# - 将图片嵌入到 Outlook 电子邮件正文

> ID：13938126
> 
> 赞同：2
> 
> 时间：2012-12-18T17:14:14.603
> 
> 标签：c#, .net

我有以下代码：

```
string imageSrc = "C:\\Documents and Settings\\menonsu\\Desktop\\screenScrapper\\Bitmap1.bmp";
oMsg.HTMLBody = "<HTML><BODY><img src = \" cid:Bitmap1.bmp@embed \"/><br><font size=\"2\" face=\"Courier New\">" + introText + "</font>" + body + "<font size=\"2\" face=\"Courier New\">" + conclText + "</font>" + " </BODY></HTML>";

Microsoft.Office.Interop.Outlook.Attachment attc = oMsg.Attachments.Add(imageSrc, Microsoft.Office.Interop.Outlook.OlAttachmentType.olEmbeddeditem, null, "");
            attc.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x3712001E", "Bitmap1.bmp@EMBED");

//Send the message.
oMsg.Save(); 
```

出于某种原因，当我尝试运行此代码时，电子邮件仅显示 x……有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:02:05.683

据我所知，您没有正确设置内容 ID。尝试将代码更改为以下内容：

```
attc.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x370E001F", "image/bmp"); 
attc.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x3712001F", "Bitmap1.bmp@EMBED"); 
```

我以前做过这个有点不同。我在一些电子邮件中嵌入了图像，我必须使用`system.net.mail`

```
System.Net.Mail.LinkedResource theContent = new System.Net.Mail.LinkedResource({path to image});
theContent.ContentID = "TheContent";

String altViewString = anEmail.Body.replace("{original imageSource i.e. '../Images/someimage.gif'}","cid:TheContent");

System.Net.Mail.AlternateView altView = System.Net.Mail.AlternateView.CreateAlternateViewFromString(altViewString, Nothing, System.Net.Mime.MediaTypeNames.Text.Html);

altView.LinkedResources.add(theContent);

anEmail.Message.AlternateViews.Add(altView); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-07T04:47:48.680

以下是通过两种方式实现此目的的工作代码：

```
using System;
using Outlook = Microsoft.Office.Interop.Outlook;

namespace ConsoleApp2
{
    class Program
    {
        static void Main(string[] args)
        {

            Method1();
            Method2();
        }

        public static void Method1()
        {
            Outlook.Application outlookApp = new Outlook.Application();
            Outlook.MailItem mailItem = outlookApp.CreateItem(Outlook.OlItemType.olMailItem);
            mailItem.Subject = "This is the subject";
            mailItem.To = "john@example.com";
            string imageSrc = "D:\\Temp\\test.jpg"; // Change path as needed

            var attachments = mailItem.Attachments;
            var attachment = attachments.Add(imageSrc);
            attachment.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x370E001F", "image/jpeg");
            attachment.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x3712001F", "myident"); // Image identifier found in the HTML code right after cid. Can be anything.
            mailItem.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/id/{00062008-0000-0000-C000-000000000046}/8514000B", true);

            // Set body format to HTML

            mailItem.BodyFormat = Outlook.OlBodyFormat.olFormatHTML;
            string msgHTMLBody = "<html><head></head><body>Hello,<br><br>This is a working example of embedding an image unsing C#:<br><br><img align=\"baseline\" border=\"1\" hspace=\"0\" src=\"cid:myident\" width=\"\" 600=\"\" hold=\" /> \"></img><br><br>Regards,<br>Tarik Hoshan</body></html>";
            mailItem.HTMLBody = msgHTMLBody;
            mailItem.Send();
        }

        public static void Method2()
        {

            // Create the Outlook application.
            Outlook.Application outlookApp = new Outlook.Application();

            Outlook.MailItem mailItem = (Outlook.MailItem)outlookApp.CreateItem(Outlook.OlItemType.olMailItem);

            //Add an attachment.
            String attachmentDisplayName = "MyAttachment";

            // Attach the file to be embedded
            string imageSrc = "D:\\Temp\\test.jpg"; // Change path as needed

            Outlook.Attachment oAttach = mailItem.Attachments.Add(imageSrc, Outlook.OlAttachmentType.olByValue, null, attachmentDisplayName);

            mailItem.Subject = "Sending an embedded image";

            string imageContentid = "someimage.jpg"; // Content ID can be anything. It is referenced in the HTML body

            oAttach.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x3712001E", imageContentid);

            mailItem.HTMLBody = String.Format(
                "<body>Hello,<br><br>This is an example of an embedded image:<br><br><img src=\"cid:{0}\"><br><br>Regards,<br>Tarik</body>",
                imageContentid);

            // Add recipient
            Outlook.Recipient recipient = mailItem.Recipients.Add("john@example.com");
            recipient.Resolve();

            // Send.
            mailItem.Send();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-22T00:08:06.083

这是一个简单的解决方案：

```
 private static void insertPictureAsLink(Outlook.MailItem mail, String imagePath, String URI)
    {
        mail.BodyFormat = OlBodyFormat.olFormatHTML;
        mail.HTMLBody += String.Format("<body><a href={1}><img src=\"{0}\"></body></a>", imagePath, URI);
        mail.Display(false);
    } 
```

# c++ - 新建对象作为默认模板函数参数

> ID：13938128
> 
> 赞同：0
> 
> 时间：2012-12-18T17:14:28.087
> 
> 标签：c++, templates

`Test::load`应该将数据（按名称或索引描述）加载到传递的引用中。作为第三个参数，在加载失败的情况下有一个默认值（数据从文件加载）。

```
struct Test
{
    template <typename ValueType, typename DefaultValueType>
    void load(const char * c, ValueType & a, DefaultValueType b)
    {
        std::cout << "1";
    }

    template <typename ValueType, typename DefaultValueType>
    void load(int i, ValueType & a, DefaultValueType b)
    {
        std::cout << "2";
    }
}; 
```

我需要两者`ValueType`，`DefaultValueType`因为我特别需要字符串和自定义类型。当我想使用默认构造类型作为`const char *`从 ValueType 推导出的默认第三个参数（在版本中）时，会出现问题。

```
template <typename ValueType, typename DefaultValueType>
void load(const char * c, ValueType & a, DefaultValueType b = ValueType())
{
    std::cout << "1";
} 
```

我收到`expects 3 arguments`错误（vs2010）。

为什么它不起作用？我需要努力工作才能完成这项工作。

* * *

如果有人有兴趣玩，这里是完整的“工作”代码

```
#include <iostream>

struct Test
{
    template <typename ValueType, typename DefaultValueType>
    void load(const char * c, ValueType & a, DefaultValueType b/* = ValueType()*/)
    {
        std::cout << "1";
    }

    template <typename ValueType, typename DefaultValueType>
    void load(int i, ValueType & a, DefaultValueType b)
    {
        std::cout << "2";
    }

    //Workaround
    template<typename ValueType>
    void load(const char * c, ValueType & v)
    {
        load(c,v,ValueType());
    }
};

int main()
{
   Test t;
   float f;

   //This is standard behavior
   t.load("bar", f, 0.0f);

   //I want this to be possible call
   t.load("bar", f);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:26:30.103

您正在寻找部分[模板专业化](http://www.gotw.ca/gotw/049.htm)。然而，部分模板特化仅适用于类而不适用于函数。对于函数，您可以通过重载来解决问题，这正是您在解决方法中所做的。

这是[一篇](http://www.gotw.ca/publications/mill17.htm)关于为什么模板函数有重载而不是特化的文章。

# android - 安卓：处理程序

> ID：13938131
> 
> 赞同：1
> 
> 时间：2012-12-18T17:14:39.780
> 
> 标签：android, handler

我正在开发一种记忆游戏应用程序，最初的 6 个按钮将显示一些数字。然后当下面的 MyCount5sec 和处理程序运行时，在用户记住 5 秒的等待时间后，处理程序将调用 txtClearRun 从而擦除每个按钮上的所有文本。

然后在 5 秒的等待期之后，进入测试期。用户必须按顺序选择按钮，即。后面的按钮值必须大于前面的按钮值。

如果用户成功（即按下所有 6 个数字按钮），应用程序应该根据 postDelay 等待 1.5 秒？然而，似乎没有任何延误。

如果用户是错误的，即。按下值小于前一个按钮的按钮，用户失败，应用程序也应该等待 1.5 秒，按钮以红色突出显示。但是，似乎也没有这样的 1.5 秒延迟。也没有红色突出显示。

## 问题

1.  为什么没有出现延迟？不能同时调用两个处理程序？
2.  如何进一步修改？

非常感谢！！

```
 private void setQup() 
   {    
          .....

          MyCount5sec counter5sec = new MyCount5sec(6000,1000);
           counter5sec.start(); 
           handler.postDelayed(txtClearRun, 6000);

           pressed = 0;
           temp = 0;
           final int txtClearRun1time = 1500; // set here!
           button_space1.setText("reset press "+pressed);

           Button11.setOnClickListener(new OnClickListener() {@Override 
                  public void onClick(View v) {vibrate(); int i=0; Button11.setEnabled(false);
                    if (i == B0) {puttobutton(B0,0);} if (i == B1) {puttobutton(B1,1);} if (i == B2) {puttobutton(B2,2);}
                    if (i == B3) {puttobutton(B3,3);} if (i == B4) {puttobutton(B4,4);} if (i == B5) {puttobutton(B5,5);}
                    pressed = pressed + 1;
                    int buttonvalue = Integer.parseInt(Button11.getText().toString());                    
                    if (pressed >5) 
                    {
                        TotalScores=TotalScores+20;
                        handler1.postDelayed(txtClearRun1, txtClearRun1time);
                        loadNextQup();                      
                    }                   
                    if (buttonvalue < temp) 
                    {
                        Button11.setBackgroundResource(R.drawable.red_btn);
                        TotalScores=TotalScores-10;
                        handler1.postDelayed(txtClearRun1, txtClearRun1time);                       
                        loadNextQup();
                    }
                    temp = buttonvalue;
                    }});

    ......same for other buttons..
    }

   Runnable txtClearRun = new Runnable()
   {
       public void run() {blankbutton();} //remove text on buttons
   };

   Runnable txtClearRun1 = new Runnable()
   {
       public void run() {} // solely for wish to delay operations
   };

   private void loadNextQup()
   {

       if (TerminateOrNot ==0) 
       {
           handler.removeCallbacks(txtClearRun);
           handler1.removeCallbacks(txtClearRun1);
           setQup();
       }
         ....
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:17:09.147

我尝试根据您的规则制作一个简单的游戏；）我使用检查背景颜色和文本而不是形状。我希望你能理解它，也许这会对你有所帮助。

这是完整的工作项目：

班级：

```
public class MainActivity extends Activity {

Button bt1, bt2, bt3, bt4, bt5, bt6, bt7, bt8, bt9, restart;
List<Button> listButtons;
Handler handler1;
List<Integer> buttonColors;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listButtons = new ArrayList<Button>();
    listButtons.add(bt1 = (Button) findViewById(R.id.bt1));
    listButtons.add(bt2 = (Button) findViewById(R.id.bt2));
    listButtons.add(bt3 = (Button) findViewById(R.id.bt3));
    listButtons.add(bt4 = (Button) findViewById(R.id.bt4));
    listButtons.add(bt5 = (Button) findViewById(R.id.bt5));
    listButtons.add(bt6 = (Button) findViewById(R.id.bt6));
    listButtons.add(bt7 = (Button) findViewById(R.id.bt7));
    listButtons.add(bt8 = (Button) findViewById(R.id.bt8));
    listButtons.add(bt9 = (Button) findViewById(R.id.bt9));

    setAllEnabled(false);

    // add on click listeners
    for (int i = 0; i < listButtons.size(); i++) {
        final int index = i;

        //final because i will need it deeper
        final Button s = listButtons.get(i);

        //on click
        s.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                //when user click on something then show the origini color and tap "x"
                s.setBackgroundColor(buttonColors.get(index));
                s.setText("x");

                // get all checked
                List<Button> listChecked = countChecked();

                // if checked more == 2
                if (listChecked.size() == 2) {

                    // check if the same text was checked
                    boolean btnsHasTheSameTextAndBackgroundTag = checkAllTextAndBackgroundTag(listChecked);

                    //if they dont have same color and text then reset them
                    if (!btnsHasTheSameTextAndBackgroundTag) {
                        for (Button b : listChecked) {
                            b.setText("");
                            b.setBackgroundColor(Color.parseColor("#565656"));
                        }
                    }
                }

                //finall if user clicked 3 the same colors
                else if (listChecked.size() == 3) {

                    // check if the same text was checked
                    boolean btnsHasTheSameTextAndBackgroundTag = checkAllTextAndBackgroundTag(listChecked);

                    if (btnsHasTheSameTextAndBackgroundTag) {
                        for (Button b : listChecked) {
                            b.setVisibility(View.INVISIBLE);
                            b.setText("");
                        }
                    } else {
                        for (Button b : listChecked)
                            {b.setText("");
                            b.setBackgroundColor(Color.parseColor("#565656"));
                            }
                    }
                }

            }

            private boolean checkAllTextAndBackgroundTag(List<Button> list) {
                int number = (Integer) list.get(0).getTag();

                for (Button b : list) {
                    // if one of them will fail
                    if (!b.getText().equals("x") || number != (Integer)b.getTag())
                        return false;
                }
                return true;
            }

            private List<Button> countChecked() {
                List<Button> temp = new ArrayList<Button>();

                for (Button b : listButtons) {
                    if (b.getText().equals("x"))
                        temp.add(b);
                }
                return temp;
            }
        });
    }

    restart = (Button) findViewById(R.id.bt_restart);

    // we go on.. create list of colors
    final List<Integer> colorList = new ArrayList<Integer>();
    colorList.add(Color.parseColor("#C3C3E5"));
    colorList.add(Color.parseColor("#F1F0FF"));
    colorList.add(Color.parseColor("#8C489F"));

    // on restart button action
    restart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //enable all
            setAllEnabled(true);

            // remember new colors and create for it container
            buttonColors = new ArrayList<Integer>();

            // create random
            Random r = new Random();

            // get temp counter used colors
            int[] wastedColor = new int[colorList.size()];

            // for all buttons do the same job
            for (int i = 0; i < listButtons.size(); i++) {

                Log.d("xxx", i + "");

                // take first random number
                int numberRandom = r.nextInt(colorList.size());

                // check if we have all colors with the same amount
                while (wastedColor[numberRandom] == colorList.size())
                    numberRandom = r.nextInt(colorList.size());

                // increment existing ones
                wastedColor[numberRandom]++;

                // remmeber this color
                buttonColors.add(colorList.get(numberRandom));

                listButtons.get(i).setTag(numberRandom);
                listButtons.get(i).setBackgroundColor((int) (colorList.get(numberRandom)));
                listButtons.get(i).setVisibility(View.VISIBLE);

            }

            // after generated colors...

            handler1 = new Handler();

            // hide after 5 sec
            handler1.postDelayed(new HideAllColors(), 5000);

        }
    });

}

private void setAllEnabled(boolean status) {
    for(Button b : listButtons)
        b.setEnabled(status);

}

private class HideAllColors implements Runnable {

    @Override
    public void run() {
        for (Button b : listButtons)
            b.setBackgroundColor(Color.parseColor("#565656"));

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/bt1"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_margin="5dp"
        android:background="#565656" />

    <Button
        android:id="@+id/bt2"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_margin="5dp"
        android:layout_toRightOf="@+id/bt1"
        android:background="#565656" />

    <Button
        android:id="@+id/bt3"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_margin="5dp"
        android:layout_toRightOf="@+id/bt2"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt4"
        android:layout_below="@+id/bt1"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt5"
        android:layout_below="@+id/bt2"
        android:layout_toRightOf="@+id/bt4"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt6"
        android:layout_below="@+id/bt3"
        android:layout_toRightOf="@+id/bt5"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt7"
        android:layout_below="@+id/bt4"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt8"
        android:layout_below="@+id/bt5"
        android:layout_toRightOf="@+id/bt7"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt9"
        android:layout_below="@+id/bt6"
        android:layout_toRightOf="@+id/bt8"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="#565656" />

    <Button
        android:layout_margin="5dp"
        android:id="@+id/bt_restart"
        android:text="restart"
        android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#565656" />

</RelativeLayout> 
```

# c++ - 正确终止 boost::asio::ip::tcp::accept (Linux)

> ID：13938132
> 
> 赞同：3
> 
> 时间：2012-12-18T17:14:40.977
> 
> 标签：c++, boost, synchronous

我想知道如何使用可以终止的 boost 实现同步套接字接受。

为了演示我的问题，我稍微修改了[同步 tcp echo 示例](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_server.cpp)。

*注意：提供的代码似乎可以在 Windows 平台上运行，但我在 Linux 机器上遇到问题。*

假设服务器收到一条退出消息，现在想要终止一个接受新连接的无限循环。大多数教程等建议您在这种情况下运行 acceptor->close() 。但是正如 [这篇文章](http://boost.2283326.n4.nabble.com/tcp-acceptor-works-differently-on-windows-than-linux-td2587713.html)`close()`所述，如果从另一个线程调用结果可能是未定义的。

如果这样做，`accept()`这次不会终止，但是当另一个客户端尝试连接时，它会返回错误（在 Linux 上！）

所以我的问题又来了：如何正确终止基于`boost::asio`连续同步接受连接的服务器？

这里的代码：

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/smart_ptr.hpp>
#include <boost/asio.hpp>
#include <boost/thread.hpp>

using boost::asio::ip::tcp;

void session(boost::shared_ptr<tcp::socket> sock, tcp::acceptor *acceptor )
{
    try {
        for (;;) {

            char data[ 1024 ];

            boost::system::error_code error;
            size_t length = sock->read_some(boost::asio::buffer(data), error);
            if (error == boost::asio::error::eof) { break; }
            else if (error) { throw boost::system::system_error(error); }

            if( std::string("quit") == data ) {    // TRY TO CANCEL THE ACCEPT
                acceptor->close();
                break;
            }
            boost::asio::write(*sock, boost::asio::buffer(data, length));
        }
    }
    catch (std::exception& e) { std::cerr << "exception in thread: " << e.what() << "\n"; }
}

void server(boost::asio::io_service& io_service, short port)
{
    tcp::acceptor a( io_service, tcp::endpoint(tcp::v4(), port) );
    for (;;) {
        boost::shared_ptr<tcp::socket> sock(new tcp::socket(io_service));
        boost::system::error_code error;
        a.accept( *sock, error );

        if( !error ) {
            boost::thread t( boost::bind( session, sock, &a ) );
        }
        else {
            std::cout << "acceptor canceled "<< error << std::endl;
            break;
        }
    }
}

int main(int argc, char* argv[])
{
    try{
        // ..check args here...

        boost::asio::io_service io_service;
        server(io_service, std::atoi(argv[1]));
    }
    catch (std::exception& e) {std::cerr << "Exception: " << e.what() << "\n";}

    return 0;
} 
```

# javascript - 来自 JSON 的 Knockout JS 映射不起作用

> ID：13938135
> 
> 赞同：2
> 
> 时间：2012-12-18T17:14:50.923
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin

我收到一个 JSON 字符串并尝试将其映射到 KOJS VM，但我不明白为什么下面的代码不起作用。

这是我的 JS 文件：

```
var viewModel = {};

$.ajax({
  url: '../data/settings',
  cache: false,
  success: function(data) {
    alert(data);
    viewModel = ko.mapping.fromJS(data);
    ko.applyBindings(viewModel);
  }
}); 
```

第一个警报显示：

```
{"remember":"false"} 
```

我的 HTML 不工作是：

```
<span data-bind="value:remember"></span> 
```

你知道这里可能出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:21:46.280

看起来您的数据可能不是 JSON 字符串，因此您想改用 fromJS：

```
viewModel = ko.mapping.fromJS(data); 
```

这个问题可以帮助调试绑定：[How to debug template binding errors for KnockoutJS?](https://stackoverflow.com/questions/9261296/any-good-techniques-to-debug-template-binding-faults-for-knockout-js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:33:35.853

我认为问题可能出在您的绑定代码上：

```
<span data-bind="value:remember"></span> 
```

应该：

```
<span data-bind="text:remember"></span> 
```

看到这个小提琴：http: [//jsfiddle.net/kboucher/Jj9DZ/](http://jsfiddle.net/kboucher/Jj9DZ/)

'value' 用于具有 value 属性的表单字段（也可以抽象为包含`select`框）

# php - MVC 视图中应该包含什么

> ID：13938136
> 
> 赞同：0
> 
> 时间：2012-12-18T17:14:52.780
> 
> 标签：php, codeigniter, model-view-controller

对于codeigniter / php中的视图，以下是否考虑太多？$springtrail 是在模型中计算的数组在哪里？

```
<div id="page_name">Website</div>
<?php
$count = count($springtrail);
for($i = $count; $i >= 1; $i--){
    if ($i != 1)
    {
        ?> <div class="springtrail_button" id="st-0">arrayitem</div> <?php
    } else
    {
        ?> <a class="springtrail_link" href="#" id="1">Add</a> <?php
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:23:07.107

不，它与您的外观逻辑有关，因此将其放在您的视图之外实际上会从您的视图中删除逻辑（并将其放在其他地方），从而破坏您的 mvc 模型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:25:22.857

我觉得没关系，只要你不扩展太多。

但是，最好将该逻辑保留在控制器中......因此您可以执行以下操作：

控制器：

```
$count = count($springtrail);
for($i = $count; $i >= 1; $i--) {
    $data['s_count'] = ($i !== 1 ? 'button' : 'link');
} 
```

看法：

```
<?php if($s_count == 'button'): ?>
   <html here>
<?php else: ?>
   <other html here>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:24:25.140

是的，我会说这太合乎逻辑了。我想我可能会做这样的事情：

```
<div id="page_name">Website</div>

<a class="springtrail_link" href="#" id="1">Add</a>

<?php foreach ($springtrail as $item): ?>
  <div class="springtrail_button" id="st-0">arrayitem</div>
<?php endforeach ?> 
```

请注意语法有何不同。我强烈建议使用[替代 PHP 语法](http://php.net/manual/en/control-structures.alternative-syntax.php)。

我认为，每当您发现自己在视图中分配变量值时，这表明您走错了路。至于以不同方式显示列表中的第一项，好吧，如果第一项与其他项不同，那么我会说它不是该列表的真正成员，对吗？使其成为控制器中的单独值。不过，看起来您甚至没有为第一项输出变量值，那么为什么不在开始输出列表之前静态显示它呢？

希望有帮助。

# c# - 将 UTF-8 转换为 base64 字符串

> ID：13938137
> 
> 赞同：52
> 
> 时间：2012-12-18T17:15:01.190
> 
> 标签：c#, encoding, utf-8, base64

我正在尝试转换`UTF-8`为`base64`字符串。

示例：我有 "abcdef==" in `UTF-8`。它实际上是`base64`字符串的“表示”。

如何检索“abcdef==”`base64`字符串（请注意，我不想要“abcdef==”“translation” `UTF-8`，我想得到一个编码`base64`为“abcdef==”**的**字符串）。

**编辑**
由于我的问题似乎不清楚，这里是一个重新表述：

我的字节数组（假设我将其命名为 A）由`base64`字符串表示。将 A 转换为`base64`给我“abcdef==”。

此字符串表示通过 UTF-8 中的套接字发送（请注意，字符串表示在 UTF-8 和 base64 中完全相同）。所以我收到一条 UTF-8 消息，其中包含 UTF-8 格式的“whatever/abcdef==/whatever”。

所以我需要从这个套接字消息中检索base64“abcedf==”字符串才能得到A。

我希望这更清楚！

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-12-18T17:25:43.830

很难说出您要实现的目标，但假设您尝试获取*解码*时为的 Base64 字符串`abcdef==`，则以下内容应该有效：

```
byte[] bytes = Encoding.UTF8.GetBytes("abcdef==");
string base64 = Convert.ToBase64String(bytes);
Console.WriteLine(base64); 
```

这将输出：`YWJjZGVmPT0=`以`abcdef==`Base64 编码。

**编辑：**

要解码 Base64 字符串，只需使用`Convert.FromBase64String()`. 例如

```
string base64 = "YWJjZGVmPT0=";
byte[] bytes = Convert.FromBase64String(base64); 
```

此时，`bytes`将是 a `byte[]`（不是 a `string`）。如果我们知道字节数组表示 UTF8 中的字符串，则可以使用以下方法将其转换回字符串形式：

```
string str = Encoding.UTF8.GetString(bytes);
Console.WriteLine(str); 
```

`abcdef==`在这种情况下，这将输出原始输入字符串。

# c# - 将扩展方法限制为基类

> ID：13938138
> 
> 赞同：2
> 
> 时间：2012-12-18T17:15:01.503
> 
> 标签：c#, inheritance, extension-methods

有没有办法防止扩展方法同时出现在派生类型和基类型中，并将它们限制在基类型中？

我的情况有点特殊，但长话短说，我有一个场景，从基础实体转换为派生实体是安全的，从派生实体列表转换为基础列表也是安全的实体或反之亦然。由于这些转换通常是不安全的，因此我提供了扩展方法来进行转换，以便使用我的库的开发人员不必记住哪些转换是安全的，哪些不安全。

ToDerivedEntity 扩展方法是相对于 BaseEntity 实现的，虽然在 DerivedEntity 上调用 ToDerivedEntity 并没有什么坏处，但从可用性的角度来看，如果我可以阻止 ToDerivedEntity 出现在 DerivedEntity 上并仅限制它，那就太好了到 BaseEntity。

```
public class BaseEntity
{
}

public class DerivedEntity : BaseEntity
{
}

static class ExtensionMethods
{
    // Should only show up on BaseEntity.
    public static ToDerivedEntity(this BaseEntity source)
    {
        return (DerivedEntity)source;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T17:22:59.733

不，你不能那样做。扩展方法适用于接收器的任何派生类型。您能做的最好的事情就是动态地执行这些事情（基于对象的运行时类型）。即抛出异常。但在这种情况下，这是不合适的。您希望该方法可以在派生类型的对象上调用。

更重要的是，从 API 设计的角度来看，这不是您想要做的事情。考虑“ToString()”。它也存在于字符串上。

# mysql - 将交叉表查询转换为视图

> ID：13938140
> 
> 赞同：0
> 
> 时间：2012-12-18T17:15:05.483
> 
> 标签：mysql

我有以下要转换为视图的查询：

```
SELECT
  PartNum,
  SUM(IF(DAYOFWEEK(DeliveryDate) = '2', value, NULL)) AS 'Mon',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '3', value, NULL)) AS 'Tue',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '4', value, NULL)) AS 'Wed',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '5', value, NULL)) AS 'Thu',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '6', value, NULL)) AS 'Fri',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '7', value, NULL)) AS 'Sat',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '1', value, NULL)) AS 'Sun',
  SUM(IF(DeliveryDate > DATE_ADD(CURDATE(),INTERVAL 7 DAY), value, NULL)) AS 'Future'
FROM (
  SELECT PartNum, DeliveryDate , SUM(Ordered) value FROM v_archived_items_due
    GROUP BY PartNum, DeliveryDate
    ) t
  GROUP BY PartNum; 
```

当我尝试将其另存为视图时，出现以下错误：

> 1349 - 视图 SELECT 在 FROM 子句中包含子查询。

查询本身可以正常工作。我如何把它变成一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:23:41.653

MySQL 不允许查看子查询，因此没有看到任何示例数据以了解如何在没有子查询的情况下对其进行返工。由于这按预期工作，我将创建您的子查询的视图：

```
create view view1 as
    SELECT PartNum, DeliveryDate , SUM(Ordered) value 
    FROM v_archived_items_due
    GROUP BY PartNum, DeliveryDate; 
```

然后只需在查询中调用此视图：

```
SELECT
  PartNum,
  SUM(IF(DAYOFWEEK(DeliveryDate) = '2', value, NULL)) AS 'Mon',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '3', value, NULL)) AS 'Tue',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '4', value, NULL)) AS 'Wed',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '5', value, NULL)) AS 'Thu',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '6', value, NULL)) AS 'Fri',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '7', value, NULL)) AS 'Sat',
  SUM(IF(DAYOFWEEK(DeliveryDate) = '1', value, NULL)) AS 'Sun',
  SUM(IF(DeliveryDate > DATE_ADD(CURDATE(),INTERVAL 7 DAY), value, NULL)) AS 'Future'
FROM view1
GROUP BY PartNum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:24:13.207

按设计行事

[http://dev.mysql.com/doc/refman/5.1/en/create-view.html](http://dev.mysql.com/doc/refman/5.1/en/create-view.html)

您必须从子查询中构建一个视图并使用它。

# node.js - 为什么我在 node.js + node-inspector 中的堆栈的根不是真正的根，我的意思是一个函数从外部源（如驱动程序）运行

> ID：13938141
> 
> 赞同：0
> 
> 时间：2012-12-18T17:15:05.510
> 
> 标签：node.js, debugging, stack

我的代码中有一个调试器点，我查看调用堆栈，我看到大约 11 行深，但我无法挖掘更多。在最后一层，更深一层，不是像驱动程序这样的异步调用的响应，也不是入口程序，它只是另一个调用的某个函数。但我看不到另一个功能......

任何帮助如何查看其他功能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:59:57.093

你可以试试[https://github.com/CrabDude/trycatch](https://github.com/CrabDude/trycatch)并用它包装你的一些初始代码。

```
var trycatch = require('trycatch')
trycatch(yourOriginalFunction, exceptionHandlerCallback) 
```

它应该为您提供一个很长的堆栈跟踪，其中包含您的原始函数。

还有其他库也试图解决这个问题，但我没有使用它们：

[https://github.com/tlrobinson/long-stack-traces](https://github.com/tlrobinson/long-stack-traces)

[https://github.com/mattinsler/longjohn](https://github.com/mattinsler/longjohn)

# qt - 用鼠标平移 QScrollArea

> ID：13938149
> 
> 赞同：2
> 
> 时间：2012-12-18T17:15:35.307
> 
> 标签：qt

我有一个`QScrollArea`. 我想用鼠标使上下文可平移 - 这样，手形光标会显示在该区域上，然后单击并按住让我们进入拖动模式。

这类似于 QGraphicsView 可以通过`QGraphicsView::ScrollHandDrag`拖动模式轻松完成的操作，只是我需要它用于`QScrollArea`.

关于如何开箱即用的任何想法？或者也许是一段代码来手动完成？我当然不是第一个想要它的人。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:58:14.360

应该不难，尤其是使用事件过滤器。看看我关于[Flick list 或 kinetic scrolling](http://blog.qt.digia.com/blog/2008/11/15/flick-list-or-kinetic-scrolling/)的旧博文（代码已移至[http://qt.gitorious.org/qt-labs/graphics-dojo](http://qt.gitorious.org/qt-labs/graphics-dojo)）。作为奖励，您可以轻松获得动量效果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T21:49:56.427

好的。最后，我将其更改为 QGraphicsView，它很容易做到，开箱即用。

# php - 带有 mySQl 的 PHP：查询用户每次选择要填写的字段

> ID：13938151
> 
> 赞同：-2
> 
> 时间：2012-12-18T17:15:42.023
> 
> 标签：php, mysql

第一次使用 PHP 也是第一次使用 mySQL，所以如果我犯了任何错误，请指出。

我希望能够从我的表中获取数据，这不是问题，我希望用户**填写尽可能多的文本框或尽可能少的文本框，**并返回与他们的搜索相关的所有数据?

我有这些变量

```
 //get variables from page before  
$ProductName = $_POST["ProductName"];  
$ProductCategory = $_POST["ProductCategory"]; 
$ProductAge = $_POST["ProductAge"]; 
$ProductDis = $_POST["ProductDis"]; 
$ProductPrice = $_POST["ProductPrice"];
$ProductInStock = $_POST["ProductInStock"]; 
```

并且想要某种查询（如果可能的话）

```
$query = "SELECT * FROM Product WHERE such and such "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:23:27.137

您需要动态构建查询。

例如价格（使用[PDO](http://php.net/manual/en/pdostatement.execute.php)）：

```
$vars = array();
$query = "SELECT * FROM Product WHERE 1";    // using WHERE 1 just for the example
...
if (!empty($_POST["ProductPrice"]))
{
  $query .= " AND ProductPrice <= :ProductPrice";
  $vars[':ProductPrice'] = $_POST["ProductPrice"];
}
...
// prepare query
// execute query with the $vars array 
```

条件取决于你，我只是把价格作为这个例子的最大值。

# php - Codeigniter 试图通过 ajax 发送 HTML 内容？

> ID：13938154
> 
> 赞同：0
> 
> 时间：2012-12-18T17:15:59.890
> 
> 标签：php, codeigniter

我正在尝试通过 ajax 将 HTML 字符串从客户端发送到服务器。我不断收到“不允许的关键字符”错误。所以我把它`$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';`设置为空，`$config['permitted_uri_chars'] = '';`因为 CodeIgniter 说`Leave blank to allow all characters -- but only if you are insane.`但我仍然收到 Disallowed Key Characters 错误。

这就是我试图发送它的方式：

```
var content = '<p class="MsoNormal">Hi {$first_name}</p>\n<p class="MsoNormal">My name is Bill, etc etc.</p>';

$.get('/task/preview_template', {content:content}, function(data) {
    console.log(data); //Disallowed Key Characters
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:02:10.160

`_clean_input_keys`可能是引发错误的罪魁祸首，并且您有大量字符超出`"/^[a-z0-9:_\/-]+$/i"`.

我能想到的几种方法可以解决这个问题：

1.  修改 _clean_input_keys 使其接受额外的字符。当然，这是一个内部功能，除非您知道自己在做什么，否则不应更改。（或者，您可以修改它以允许 HTML 编码的特殊字符和 HTML 对字符串进行编码。这有助于减轻将此类字符添加到 _clean_input_keys 时对安全性的危害。）

2.  在发送之前对字符串进行编码，然后在服务器端对其进行解码。这对您和所涉及的计算机来说都需要做更多的工作，但它可以保持 _clean_input_keys 完整，并且应该允许您发送字符串，如果您能找到一个在两个方向上都可靠且不可靠的编码产生任何不允许的字符。由于您使用的是 GET，因此您还可能不仅在服务器端遇到 GET 输入限制，在浏览器端也可能遇到限制。

3.  使用 POST 而不是 GET 并将您的内容作为数据对象发送。然后只需使用`$_POST`服务器上的变量，而不是`$_GET`. 虽然这可能有效，但它对 REST 动词的使用有点不正统和不标准。

4.  将您的模板内容存储在服务器上，并按名称引用它，而不是将其存储在 JavaScript 中。当然，这仅在您没有在 JavaScript 中动态生成模板内容时才有效。但是，如果您在所有 JavaScript 调用中都使用相同的模板，那么一开始就没有理由从 JavaScript 发送该信息。

# asp.net - 多个列表视图 ID 混淆

> ID：13938160
> 
> 赞同：0
> 
> 时间：2012-12-18T17:16:11.820
> 
> 标签：asp.net

`enter code here`我正在构建用户控件以使用寻呼机在列表视图中显示项目。如果我只有一个用户控件（SharePoint 2010 webpart），它可以完美地使用以下代码：

澳交所：

```
 <asp:ListView ID="ListView" runat="server">
        <LayoutTemplate>
            <table id="table">
                <tr id="tableRow">
                    <td id="column1" class="tableCell">
                        <div runat="server" id="itemPlaceholder">
                        </div>
                    </td>
                </tr>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            ...
        </ItemTemplate>
    </asp:ListView>
    <div class="pager">
        <asp:DataPager ID="DataPager" PagedControlID="ListView" runat="server">
            <Fields>
                <asp:NextPreviousPagerField ShowFirstPageButton="False" ShowNextPageButton="False"
                    ShowPreviousPageButton="true" PreviousPageText="<" RenderDisabledButtonsAsLabels="True" />
                <asp:NumericPagerField />
                <asp:NextPreviousPagerField ShowLastPageButton="False" ShowPreviousPageButton="False"
                    ShowNextPageButton="true" NextPageText=">" RenderDisabledButtonsAsLabels="True" />
            </Fields>
        </asp:DataPager
</div> 
```

后面的代码：

```
 DataPager.PageSize = X;
                ListView.DataSource = items.ToList();
                ListView.DataBind(); 
```

问题是当我将其中两个 ascx 放在我的页面上时，所有项目都将进入第一个 listview ：当然因为它们没有不同的 ID。但是我怎么能给他们一个不同的 ID，因为我事先不知道我将拥有多少个用户控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:41:48.440

您必须更改用户控件的客户端 ID 模式以及该控件内的子控件........

用这个

```
 ClientIDMode="AutoID" 
```

# java - 为什么我会得到这个奇怪的输出？

> ID：13938161
> 
> 赞同：0
> 
> 时间：2012-12-18T17:16:13.723
> 
> 标签：java

我有三个班

```
public abstract class Champion 
{
    private String name;

    public Champion(String ChName)
    {
        name = ChName;

    }
    public void setName(String ChName)
    {
        name = ChName;
    }
    public String getName()
    {
        return name;
    }

} 
```

第二：

```
public class Mage extends Champion {

    public Mage(String ChName)
    {
        super(ChName);
    }

    public String toString()
    {
        return String.format("%s",super.toString());
    }
} 
```

和我的主要：

```
public class JavaApplication2 {

    public static void main(String[] args) {
      Mage mage = new Mage("ori");
      System.out.println("champion is "+mage);          
    }

} 
```

输出应该是“冠军是 ori”，但我得到：“冠军是 javaapplication2.Mage@1fee6fc”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T17:16:57.577

您需要覆盖`toString()`in`Champion`因为对 in 的调用`super.toString()`将`Mage.toString()`调用`Object.toString()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:19:12.177

通过调用`super.toString()`你调用`Object` `toString()`方法，给你你看到的结果。

您需要实现该`Champion` `toString()`方法。

# assembly - TASM 在仅使用 16 位寄存器时访问双字的高位和低位字

> ID：13938165
> 
> 赞同：0
> 
> 时间：2012-12-18T17:16:39.650
> 
> 标签：assembly, x86, tasm

我的问题是当我只能使用 16 位寄存器时，如何向双字变量的高位或低位字写入或读取某物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:26:40.190

您读取/写入内存中的适当位置。低位字是 at `[address]`，而高位字是 at `[address+2]`。

例如，如果`SI`在内存中保存双字的地址，那么这会将低位字读入`AX`并将高位字读入`DX`：

```
mov ax, [si]
mov dx, [si+2] 
```

# php - 从 php 文件中提取统计信息

> ID：13938174
> 
> 赞同：0
> 
> 时间：2012-12-18T17:17:04.400
> 
> 标签：php, javascript, jquery, xml

我有一个 jQuery 播放器，顶部有一个统计栏，可以从远程 xml 文件中提取信息。

我正在尝试修改它以从 php 文件中读取统计信息。

该 php 文件从远程服务器中的 xspf 文件中提取统计信息。

我如何使用以下代码执行此操作：

更新代码：

php文件：

```
<?php
header('Content-Type:text/xml');

$xml = simplexml_load_file("http://**.**.**.**:8000/live.xspf"); 

echo '<?xml version="1.0" encoding="UTF-8"?><tracks>';
foreach ($xml->trackList->track as $data) {
    $radio = $data->location;
    $song  = $data->title;  
    $info = $data->listeners;
    echo '<track>
            <title>'.$song.'</title>
            <listeners>'.$info.'</listeners>
            <location>'.$radio.'</location>
          </track>';
}
echo '</tracks>';
?> 
```

jQuery代码：

```
 function getCurrentTrack(){
$.get('/player/readerPlayer.php'), function (){
    $track = $(data).find('track');
    $track.each(function (){
        $this = $(this);
        var title = $this.find('title').text();
        var listenersn = $this.find('listeners').text();
        $('.listeners span').html(listenersn);
        setTimeout('getCurrentTrack()', 65000);
    });
}, 'xml'}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:44:29.857

您只需从 PHP 文件中输出 XML。

```
header('Content-Type:text/xml');
echo '<?xml version="1.0" encoding="UTF-8"?><tracks>';
foreach ($xml->trackList->track as $data) {
    $radio = $data->location;
    $song  = $data->title;  
    $info = $data->listeners;
    echo '<track>
            <title>'.$song.'</title>
            <listeners>'.$info.'</listeners>
            <location>'.$radio.'</location>
          </track>';
}
echo '</tracks>'; 
```

不过，您需要稍微调整 js 以首先获取轨道对象。

```
function getCurrentTrack(){
    $.get('/player/readerPlayer.php'), function (){
        $track = $(data).find('track');
        $track.each(function (){
            $this = $(this);
            var title = $this.find('title').text();
            var listenersn = $this.find('listeners').text();
            $('.listeners span').html(listenersn);
            setTimeout('getCurrentTrack()', 65000);
        });
    }, 'xml');
} 
```

# jquery - jQuery 可以将 svg 数据注入 css background-image:url() 吗？

> ID：13938180
> 
> 赞同：4
> 
> 时间：2012-12-18T17:17:25.557
> 
> 标签：jquery, css, svg

我想知道 jQuery 中是否有一种方法可以获取页面上 div 中包含的一些 SVG 数据并将这些数据放入 CSS `background-image`url 中？我正在尝试这样做而不是加载外部 SVG 文件，因为我想要一个完全独立的 HTML 文件。我正在尝试做这样的事情：

```
var svgData = $("#div-containing-svg").html()
$("other-div").css({backgroundImage:svgData}); 
```

这可能吗？而且，它可以跨浏览器工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:24:53.080

您应该执行以下操作：

```
var image = $('#svg-container').html();
$('#elem').css('background-image', 'data:image/svg+xml;utf8,' + image); 
```

是跨浏览器吗？在这里你可以看到一个兼容性矩阵：[http ://caniuse.com/svg-css](http://caniuse.com/svg-css)

*   SVG 内容应该是 url 转义的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T07:10:53.797

@minko-geschev 回答的一个工作示例：

[https://stackoverflow.com/a/21626701/960592](https://stackoverflow.com/a/21626701/960592)

提供的答案使用 base64 编码，而不是转义。

# python - Python：JSON字符串到字典列表 - 迭代时出错

> ID：13938183
> 
> 赞同：19
> 
> 时间：2012-12-18T17:17:51.143
> 
> 标签：python, json

我正在将一个 JSON 字符串从 Objective-C 发送到 Python。然后我想把字符串的内容分解成一个 Python 列表。我正在尝试迭代一个字符串（现在任何字符串）：

```
import json

s = '[{"i":"imap.gmail.com","p":"someP@ss"},{"i":"imap.aol.com","p":"anoterPass"}]'
jdata = json.loads(s)
for key, value in jdata.iteritems():
    print key, value 
```

我收到此错误：

> 异常错误：“列表”对象没有属性“迭代”

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-18T17:20:15.117

您的 JSON 数据是一个字典列表，因此`json.loads(s)`您将拥有`jdata`一个列表，而不是字典。

尝试以下操作：

```
import json

s = '[{"i":"imap.gmail.com","p":"someP@ss"},{"i":"imap.aol.com","p":"anoterPass"}]'
jdata = json.loads(s)
for d in jdata:
    for key, value in d.iteritems():
        print key, value 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T17:19:13.677

`json.loads(s)`会回报你`list`的。要迭代它，您不需要`iteritems`.

```
>>> jdata = json.loads(s)
>>> for doc in jdata:
...     for key, value in doc.iteritems():
...          print key, value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-24T08:00:57.937

对于上面的python 3.6，有一点区别

```
s = '[{"i":"imap.gmail.com","p":"someP@ss"},{"i":"imap.aol.com","p":"anoterPass"}]'
jdata = json.loads(s)
print (jdata)
for d in jdata:
    for key, value in d.items():
        print (key, value)

[{'i': 'imap.gmail.com', 'p': 'someP@ss'}, {'i': 'imap.aol.com', 'p': 'anoterPass'}]
i imap.gmail.com
p someP@ss
i imap.aol.com
p anoterPass 
```

# html - 在动态高度无序列表中垂直对齐文本和图像

> ID：13938186
> 
> 赞同：4
> 
> 时间：2012-12-18T17:18:03.473
> 
> 标签：html, css, vertical-alignment

我目前有一个项目清单。有些项目是单行文本，而其他项目是 2 行，中间有一个中断。

我很难将图像垂直对齐到文本的右侧。当只有一行文本时，我可以轻松对齐，但多行时，图像会挂在顶部。

```
<ul>
    <li><a href="#"><img src=""/>Text Text Text<br/>Second Line of Text</a></li>
    <li><a href="#"><img src="" />Text Text Text</a></li>
    <li><a href="#"><img src="" />Text Text Text</a></li>
</ul> 
```

下面是正在发生的事情的一个例子。

[http://jsfiddle.net/SAwFE/](http://jsfiddle.net/SAwFE/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:34:18.483

我会使用绝对定位。[将其更改为 this](http://jsfiddle.net/SAwFE/7/)，它具有以下修改后的代码：

```
ul li {
    position: relative; /* added to your existing code */
}

img {
    height: 20px;
    width: 20px;
    position: absolute;
    right: 12px;
    top: 50%;
    margin-top: -10px; /* half height of image */
} 
```

为避免潜在的重叠（根据您的评论），然后将右侧的填充增加[类似](http://jsfiddle.net/SAwFE/10/)`li`的宽度：`img`

```
ul li { 
    padding: 9px 32px 9px 12px; /* modified existing code */
    position: relative; /* added to your existing code */
} 
```

# php - PHP强制下载.xlsx文件损坏

> ID：13938190
> 
> 赞同：6
> 
> 时间：2012-12-18T17:18:27.057
> 
> 标签：php, header, download, readfile

我正在开发一个允许教师上传文件和学生下载文件的网站。但是，有一个问题。Microsoft Word (.docx) 文件下载完美，但在下载 excel (xlsx) 文件时，excel 会出现“此文件已损坏且无法打开”对话框。对此的任何帮助将不胜感激！

我的下载代码如下：

```
case 'xlsx':

    header('Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment; filename="' . $filename . '"');
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Pragma: no-cache');
    readfile('./uploads/resources/courses/' . $filename);

break; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-18T21:20:54.320

我有这个问题，是[BOM](https://en.wikipedia.org/wiki/Byte_order_mark)。

## 如何注意到它

**unzip**：使用 unzip 检查输出文件，我在第二行看到了警告。

```
$ unzip -l file.xlsx 
Archive:   file.xlsx
warning file:  3 extra bytes at beginning or within zipfile
... 
```

**xxd（十六进制查看器）**：我使用以下命令看到了前 5 个字节

```
head -c5 file.xlsx | xxd -g 1
0000000: ef bb bf 50 4b                             PK... 
```

`ef bb bf`注意BOM的前 3 个字节！

## 为什么？

可能是带有 BOM 的 php 文件或库的先前输出。

您必须找到带有 BOM 的文件或命令在哪里，就我而言，现在，我没有时间找到它，但我用输出缓冲区解决了这个问题。

```
<?php
ob_start();

// ... code, includes, etc

ob_get_clean();
// headers ...
readfile($file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:01:20.907

无论扩展名如何，这在我的本地 xampp 设置上都可以正常工作，因此从我的角度来看，除非我遗漏了什么，否则不需要 case 语句

我已经用 docx、accdb、xlsx、mp3、任何东西进行了测试...

```
$filename = "equiv1.xlsx";

header('Content-type: application/octet-stream');
header('Content-Disposition: attachment; filename="' . $filename . '"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Pragma: no-cache'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T23:03:59.600

尝试：

```
<?
//disable gzip
@apache_setenv('no-gzip', 1); 
//set download attachment
header('Content-Disposition: attachment;filename="filename.xlsx"');
//clean the output buffer 
ob_clean(); 
//output file
readfile('filepath/filename.xlsx');
//discard any extra characters after this line
exit; 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-25T07:39:41.983

尝试添加一个额外的标题

```
header('Content-Length: ' . filesize('./uploads/resources/courses/' . $filename)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:28:51.247

尝试这个：

```
header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Type: application/vnd.ms-excel"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-22T15:39:22.520

可能这是**Windows 提供的非常具有误导性的信息，**与代码、Excel 库或服务器无关，文件本身是正确的。Windows 阻止打开从 Internet 下载的某些文件（如 .xlsx），而不是询问您是否要打开不安全的文件，它只是写该文件已损坏。在 Windows 10 中，需要右键单击文件并选择“**取消阻止**”（您可以在此处阅读更多信息：[https ://winaero.com/blog/how-to-unblock-files-downloaded-from-internet-在 Windows-10/ 中](https://winaero.com/blog/how-to-unblock-files-downloaded-from-internet-in-windows-10/)）

# mysql - 做数据库事务防止其他用户干扰它

> ID：13938194
> 
> 赞同：4
> 
> 时间：2012-12-18T17:18:32.550
> 
> 标签：mysql, sql, database, transactions

假设我这样做了（注意：下面的语法可能不正确，但不要担心......它只是为了说明一点）

```
Start Transaction
INSERT INTO table (id, data) VALUES (100,20), (100,30);
SELECT * FROM table WHERE id = 100;
End Transaction 
```

因此，选择的目标是从表中获取所有信息，这些信息刚刚被前面的插入插入并且只被前面的 INSERT...

现在假设在执行过程中，在执行 INSERT 之后，其他一些用户也执行了 id = 100 的 INSERT ...

事务下一步中的 SELECT 语句是否还会获取另一个用户执行的 INSERT 插入的行，还是只会获取事务中前面的 INSERT 插入的两行？

顺便说一句，我正在使用 MySQL，所以请调整你对 MySQL 的回答

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T19:08:55.307

这完全取决于数据库连接使用的事务隔离。

根据[**MySQL 5.0 认证学习指南**](https://rads.stackoverflow.com/amzn/click/com/0672328127)

![在此处输入图像描述](../Images/fbf6d019e5b2d759afbbe5db30908dcb.png)

第 420 页描述了由隔离级别处理的三个事务条件

*   脏读是一个事务读取另一个事务未提交的更改。假设事务 T1 修改了一行。如果事务 T2 读取了该行并看到了修改，即使 T1 没有提交它，这就是脏读。这是一个问题的原因之一是，如果 T1 回滚，更改将被撤消，但 T2 不知道这一点。
*   当一个事务执行两次相同的检索但每次都得到不同的结果时，就会发生不可重复读取。假设 T1 读取了一些行，然后 T2 更改了其中一些行并提交了更改。如果 T1 在再次读取行时看到更改，则会得到不同的结果；初始读取是不可重复的。这是一个问题，因为 T1 没有从同一个查询中获得一致的结果。
*   幻像是出现在以前不可见的位置的行。假设 T1 和 T2 开始，并且 T1 读取一些行。如果 T2 插入一个新的并且 T1 在再次读取时看到该行，则该行是幻像。

第 421 页描述了四 (4) 个事务隔离级别：

*   [**READ-UNCOMMITTED**](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_read-uncommitted)：允许事务查看其他事务所做的未提交更改。此隔离级别允许发生脏读、不可重复读和幻像。
*   [**READ-COMMITTED**](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_read-committed)：仅当其他事务已提交时，才允许事务查看其他事务所做的更改。未提交的更改仍然不可见。此隔离级别允许发生不可重复读取和幻像。
*   [**REPEATABLE READ**](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read)（默认）：确保一个事务发出相同的 SELECT 两次，两次都得到相同的结果，而不管其他事务是否已提交或未提交的更改。换句话说，它从同一查询的不同执行中获得一致的结果。在一些数据库系统中，REPEATABLE READ 隔离级别允许幻象，这样如果另一个事务插入新行，在 SELECT 语句之间的 inerbal 中，第二个 SELECT 将看到它们。InnoDB 不是这样。REPEATABLE READ 级别不会出现幻像。
*   [**SERIALIZABLE**](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_serializable)：将一个事务的影响与其他事务完全隔离。它类似于 REPEATABLE READ，但有一个附加限制，即一个事务选择的行在第一个事务完成之前不能被另一个事务更改。

可以在全局、会话内或特定事务中为您的数据库会话设置隔离级别：

```
SET GLOBAL TRANSACTION ISOLATION LEVEL isolation_level;
SET SESSION TRANSACTION ISOLATION LEVEL isolation_level;
SET TRANSACTION ISOLATION LEVEL isolation_level; 
```

其中isolation_level 是以下值之一：

*   `'READ UNCOMMITTED'`
*   `'READ COMMITTED'`
*   `'REPEATABLE READ'`
*   `'SERIALIZABLE'`

您`my.cnf`也可以设置默认值：

```
[mysqld]
transaction-isolation = READ-COMMITTED 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:22:39.643

当其他用户更新同一行时，将应用行级锁定。因此，他只能在您的交易结束后进行更改。因此，您将看到您插入的结果集。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T17:42:07.830

*当涉及到 SQL 数据库事务时，*干扰是一个模糊的词。*事务可以看到的行部分取决于其[隔离级别](http://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_isolation_level)。*

 *> 因此，选择的目标是从表中获取所有信息，这些信息刚刚被前面的插入插入并且只被前面的 INSERT...

*前面的插入*也有点模糊。

您*可能*应该在尝试阅读*之前*提交有问题的插入。否则，在某些*不受*您控制的情况下，该事务可能会回滚，并且 id=100 的行可能实际上不存在。

当然，在它提交之后，其他事务可以自由地更改“id”、“value”的值，或两者兼而有之。（如果他们有足够的权限，那就是。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T17:20:34.440

该事务将使事务中的语句看起来像是在不受其他事务干扰的情况下运行。大多数 DBMS（包括 MySQL）维护事务的[ACID](http://en.wikipedia.org/wiki/ACID)属性。在您的情况下，您对 A for Atomic 感兴趣，这意味着 DBMS 将使您的事务中的所有语句看起来都以原子方式运行而不会中断。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:29:39.077

唯一生效的用户是那些需要访问表中相同行的用户。否则用户不会受到影响。

但是稍微复杂一些，因为行锁定可以是读锁或写锁。

这是对[InnoDB](http://dev.mysql.com/doc/refman/5.0/en/innodb-lock-modes.html)存储引擎的解释。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T17:56:04.107

出于效率原因，开发人员不会将事务设置为彼此完全隔离。数据库支持多个[隔离](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)级别，即可序列化、可重复读取、已提交读和未提交读。它们是从最严格到最不严格的列表。*

# jquery - 使用 jQuery 检查元素是否存在

> ID：13938195
> 
> 赞同：0
> 
> 时间：2012-12-18T17:18:35.360
> 
> 标签：jquery, conditional-operator

我想让 jquery 仅在特定的 #id 或 .class 可用时才工作。我想知道哪个是正确的？？？请帮助...谢谢

```
if($().flexslider) {
//do something
}

or

if ( $( '#flexslider' ).length && jQuery().flexslider ) {
//do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:19:51.117

您`safely`使用长度来确定 DOM 元素是否`exists`.

```
if ( $('#flexslider').length) //For item with id flexslider 
```

或者

```
if ( $('.classname').length) //For item with class classname 
```

检查函数是否存在

```
if ($.isFunction(window.yourFunName))        //with jQuery

if(typeof(callback) == "function")           //with javascript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:21:19.133

如果要确保元素存在，并且加载了 flexslider 插件，请执行后者：

```
if ( $( '#flexslider' ).length && jQuery().flexslider ) {
    //do something
} 
```

如果您只想检查元素是否存在，请执行以下操作：

```
if($('#flexslider').length) {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:22:38.103

大多数时候，正确是在旁观者的眼中。通常有多种方法可以解决问题。如果要检查绑定函数的存在和 DOM 节点的存在，则需要在函数之后捕获两者`ready`并将`typeof`变量与函数进行比较以查看它是否为真。

```
$(function(){
    if($('#flexslider').length && typeof flexslider == 'function'){

    }
}); 
```

# c# - 一个实体上的多个一对一关系

> ID：13938197
> 
> 赞同：0
> 
> 时间：2012-12-18T17:18:41.270
> 
> 标签：c#, .net, entity-framework, entity-framework-5

您会在 Entity Framework 5.0 上看到我的模型结构，并且 User 实体持有对 Address 和 Address1 实体的引用。另一方面，地址将用户集合作为参考，但实体框架不知道用户依赖于哪个地址参考，所以我遇到了异常。

有哪些解决方案？我的意思是流利和不流利的解决方案。

```
public class User
{
    public int Id { get; set; }

    public Address Address { get; set; }

    public Address Address1 { get; set; }
}

public class Address
{
    public int Id { get; set; }

    public ICollection<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:32:34.230

第一步是在 User 类中包含外键：

```
public class User
{
    public int Id { get; set; }
    public int AddressId { get; set; }
    public int Address1Id { get; set; }

    public Address Address { get; set; }

    public Address Address1 { get; set; }
} 
```

流畅的 API 映射：

```
modelBuilder.Entity<User>()
            .HasRequired(a => a.Address)
            .WithMany()
            .HasForeignKey(u => u.AddressId);

modelBuilder.Entity<User>()
            .HasRequired(a => a.Address1)
            .WithMany()
            .HasForeignKey(u => u.Address1Id); 
```

更多细节在这里：

[http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations。 aspx](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)

# asp.net - 如何在 LoadAndPerformanceTestProject 的 LoadTest 中设置测试 URL - 基本

> ID：13938198
> 
> 赞同：0
> 
> 时间：2012-12-18T17:18:47.713
> 
> 标签：asp.net, testing, azure, load, test-project

如果您以前使用过这个工具，这个问题是非常基础的，但我只花了 2 个小时并没有弄清楚，所以请帮忙。这是我第一次尝试测试 REST 服务以及它可以容纳多少并发用户。虽然 LoadStorm 看起来是这样的最佳产品，但我想要一些免费的东西。

我开始在 Visual Studio 中使用 LoadAndPerformanceTestProject 项目。如图所示，我创建了一个 loadTest，但我不知道如何设置要测试的 url。（见下图） ![在此处输入图像描述](../Images/418f23938d3eba13916cf45778ce6f23.png) 问题：1）你在哪里设置你想测试的 url 和我的 REST 服务的请求参数？2）这个工具只是在我的机器上运行并向服务器发出请求的程序吗？3）如何在云中运行它，以便获得更准确的结果？我有一个 MSDN 订阅，我使用的 URL 实际上是我在 Azure 中的项目。

这些问题很多，但我在网上没有看到任何关于如何使用此功能的教程。我看到这个视频[在这里输入链接描述，](http://www.youtube.com/watch?v=Sc9M6NN_VmU)但不幸的是，当我在菜单栏中进入测试时，我有与视频不同的选项 - 见下图。视频中的接缝就像他根本不需要添加 LoadAndPerformanceTestProject 一样。 ![在此处输入图像描述](../Images/0877aded9dcdc812b4484068e7bfc0b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:59:14.277

首先，您需要创建一个或多个 Web 性能测试。在此测试中，您可以定义在测试中应该命中哪些 url 以及它应该如何发生（GET、POST、循环、条件、标题，...）。您可以通过简单地右键单击您的项目，添加，新的 Web 性能测试来添加新的 Web 性能测试。

![在此处输入图像描述](../Images/177c1495e29a0ab9431633f84a81c39e.png)

创建测试后，只需将它们添加到负载测试的场景中：

![在此处输入图像描述](../Images/a43449d69cbd4d0b80e15650466df584.png)

这应该让你开始。为了充分利用负载测试，我建议您阅读更多有关该主题的内容，因为它还有很多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T15:13:38.503

要在云中运行负载测试，您可以点击此处的链接 [http://www.visualstudio.com/get-started/load-test-your-app-vs](http://www.visualstudio.com/get-started/load-test-your-app-vs)

如果您需要任何帮助，请告诉我。

# javascript - 使用 selectfield 值查找 json 表

> ID：13938200
> 
> 赞同：1
> 
> 时间：2012-12-18T17:18:57.340
> 
> 标签：javascript, jquery, json

对于不同的数量，单价会发生变化。我有一个数量下拉框，一个单价、小计和总计的跨度。

我想让它在下拉框更改时更新单价，然后更新小计，然后更新总价。到目前为止，我正在使用：

```
$('#quantity').change( function() {
    var pricetable = {
        "1": "368",
        "3": "338",
        "6": "298"
    }

    $('#unitprice').text(pricetable.$('#quantity').val());
    $('#subtotal').text($('#unitprice').val() * $('#quantity').val());
    subtotalsum();
}); 
```

我知道这`pricetable.$('#quantity').val()`是错误的，但不知道如何使用`$('#quantity').val()`来查找 JSON 价格表。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:20:27.730

像这样：

```
$('#unitprice').text(pricetable[$('#quantity').val()]);
// Note the square brackets ---^--------------------^ 
```

你所拥有的是一个 JavaScript 对象，而不是一个 JSON 表。（JSON 是一种用于数据交换的文本符号；这是源代码。JSON 是您在那里使用的内容的一个子集，它是 JavaScript 对象初始化器语法。*）*

在 JavaScript 中，您可以通过以下两种方式之一来引用对象上的属性：

1.  使用点分符号和文字属性名称，例如`obj.foo`.

2.  使用括号表示法和*字符串*属性名称，例如`obj["foo"]`. （如果您使用的不是字符串，它会在使用前转换为字符串。）

在后一种情况下，字符串可以是任何表达式的结果，它不必是文字。

所以在上面的代码行中，我们得到了`quantity`盒子的当前值，这将是一个类似`"1"`,`"2"`等的字符串，我们用它来查找`pricetable`对象中的相关属性。最后，我们使用它来设置`unitprice`元素的文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:22:40.070

`.`和`[]`表示法是等价的，但表示`[]`法允许您输入否则无效的键或动态键。

```
my_obj.prop;
my_obj["prop"];
my_obj.some prop; // syntax error
my_obj["some prop"]; // works
my_obj[some_var]; // the value of some_var is used as the key 
```

# groovy - Geb：页面内容列表

> ID：13938201
> 
> 赞同：3
> 
> 时间：2012-12-18T17:19:00.007
> 
> 标签：groovy, geb

我有一`Page`堂课

```
class SignUpPage extends Page {
    static url = "signup"
    static at = { waitFor { title.startsWith("Join") } }
    static content = {
        firstNameField { $("input", name:"firstName") }
        lastNameField  { $("input", name:"lastName") }
        emailField     { $("input", name:"email") }
        passwordField  { $("input", name:"password") }
    }
} 
```

我想为`populateFields`这个类添加一个方法。这将允许我调用此方法来填充我的测试用例中的文本字段。这个方法有一个参数传入 - 一个`Map`允许我根据需要从我的测试用例中覆盖某些字段值。

**问题**是我不知道如何迭代页面的“内容”。为了更清楚地看到下面的代码：

```
class SignUpPage extends Page {
    static url = "signup"

    // .. as defined above ..

    def populateFields(customValues = [:]) {

        // I want to iterate of the textFields here
        // Something like...

        textFields = this.metaclass.methods.findAll {
            it.name.endsWith("Field")
        }

        textFields.each {
             // populate with data
        }
    } 
} 
```

这**行不通**。

如何获取闭包“内容”的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:22:08.263

我认为有一种更简单的方法来实现它，并且您不需要遍历页面对象的内容。鉴于地图中的键是您要修改的输入的名称属性，您可以执行以下操作：

```
def populateFields(customValues = [:]) {
    def form = $('form') //can be any element that is enclosing all of your inputs

    customValues.each { key, value ->
        form[key] = value
    }
} 
```

查看手册中有关[表单控件快捷方式](http://www.gebish.org/manual/current/navigator.html#form_control_shortcuts)的部分以了解其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T23:56:34.790

如果内容变得太复杂而无法使用可用工具，您始终可以在内容中创建页面内容列表。

```
static content = {
    username { module $(... }
    contactTitle { $(... }
    contactGivenName { $(... }
    contactFamilyName { moduleList $(... }

    pageFields {
    [
    username,
    contactTitle,
    contactGivenName,
    contactFamilyName,
       ]
   }
}

def populateFields(valueList) {
    pageFields.each {
        it.value(somevaluefromList)
    }

} 
```

# android - 4.1下ScrollView中的SurfaceView

> ID：13938202
> 
> 赞同：4
> 
> 时间：2012-12-18T17:19:00.260
> 
> 标签：android, scrollview, surfaceview

这是问题所在。出于性能原因，我选择使用 SurfaceView 来绘制类似表格的表格，并且因为这些东西充满了数据，所以我使用 ScrollView 作为 SurfaceView 父级。

很高兴看到它在我的个人开发专用手机（HTC Desire HD 2.3.7）上运行良好，我尝试在我公司的一款开发专用手机（Google Nexus S 4.1.?）上对其进行测试，然后在我的个人手机上进行测试（宏达一 X 4.1.1）。

最后两个出现问题，我的 SurfaceView 在大约 80 像素滚动后变黑，然后在我向下滚动到大约 80 像素（取决于屏幕大小）时又变回了它的样子。

为了避免这种停电，我在一些模拟器下进行了测试......

从 2.2（客户的愿望）到 4.0.4，它工作得很好。

笑话是，在 4.2 下……它也有效！

**当然，只有在 4.1.x 以下，SurfaceView 才会变黑！**

这是我的 SurfaceView 代码，我只是从您可以在[此处](http://android-er.blogspot.fr/2010/05/android-surfaceview.html)找到的示例中复制的。

```
public class MySurfaceView extends SurfaceView
{
    public MySurfaceView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        // I use another SurfaceView behind to draw a grid
        // that is scroll independent with a white background
        this.setZOrderOnTop(true);
        // Same reason here
        this.getHolder().setFormat(PixelFormat.TRANSPARENT);
        this.getHolder().addCallback(this);
        this.getHolder().setSizeFromLayout();
        // Tried without this line and with "software" and "none" types too
        // and hardware acceleration on application and activity
        this.setLayerType(View.LAYER_TYPE_HARDWARE, null);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);

        canvas.drawSomething()...
    }

    public void surfaceCreated(SurfaceHolder holder)
    {
        this.setWillNotDraw(false);

        this.thread = new MySurfaceViewThread(this.getHolder(), this);
        this.thread.setRunning(true);
        this.thread.run();
    }

    public void surfaceDestroyed(SurfaceHolder holder)
    {
        this.thread.setRunning(false);
        boolean retry = true;
        while(retry)
        {
            try
            {
                this.thread.join();
                retry = false;
            }
            catch(Exception exception)
            {
                Log.v(TAG, exception.getClass().getName(), exception);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:30:16.410

这个代码片段可能是一个答案

```
if(VERSION.SDK_INT != VERSION_CODES.JELLY_BEAN)
{
    this.setZOrderOnTop(true);
} 
```

但是这样做的问题是背景变黑了。

对于这个特定的 android 版本，我也必须在这个“背景”SurfaceView 中绘制网格。

这不是一个好的解决方案，因为在此 SurfaceView 中绘制该网格会破坏滚动和捏合缩放的平滑度。

# c - free 对按值传递给函数的指针有什么作用？

> ID：13938204
> 
> 赞同：5
> 
> 时间：2012-12-18T17:19:08.090
> 
> 标签：c, pointers, memory-management

众所周知，如果我们将指针按值传递给函数，则它不能在函数内部被释放，如下所示：

```
void func(int *p)
{
    free(p);
    p = NULL;
} 
```

p 拥有一个（可能是有效的）地址的副本，因此 free(p) 试图释放它。但由于它是一个副本，它不能真正释放它。对 free() 的调用如何知道它不能真正释放它？

上面的代码不会产生错误。这是否意味着 free() 只是默默地失败，“不知何故”知道无法处理作为参数传入的地址？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T17:20:27.243

> p 拥有一个（可能是有效的）地址的副本，因此 free(p) 试图释放它。但由于它是一个副本，它不能真正释放它。

这不是真的。如果（或）返回的有效地址`free()`可以正常工作。`p``malloc()``NULL`

事实上，这是实现自定义“析构函数”函数的常见模式（在 C 中编写 OO 风格的代码时）。

您可能的意思是，在此之后`p`不会更改`NULL`-但这很自然，因为您是按值传递它。如果您想将指针设为空`free()` **，**请通过指针（“byref”）传递它：

```
void func(int **p)
{
    if (p != NULL) {
        free(*p);
        *p = NULL;
    }
} 
```

并像这样使用

```
int *p = someConstructor();
func(&p);
// here 'p' will actually be NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:21:46.653

唯一的问题是该函数是否位于不同的 DLL (Windows) 中。然后，它可能与不同版本的标准库链接，并且对如何构建堆有不同的想法。

否则没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T17:28:02.887

`p`按值传递`func()`，这将复制指针并创建`func()`释放内存的本地副本。`func()`然后设置它自己的指针实例，`p`但这`NULL`是无用的。一旦函数完成，参数`p`就结束存在。在调用函数时，您仍然有`p`一个保存地址的指针，但是该块现在位于空闲列表中，并且在再次分配之前对存储没有用处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T17:50:41.077

每个人都在说您的内存将被 释放`free(p);`，但您的原始指针（用于调用函数）仍将保存（现在无效的）地址。如果一个新的内存块（包括您的地址）在稍后阶段被分配，那么您的原始指针将再次变为有效（对于内存管理器），但现在将指向完全不同的数据，从而导致各种问题和混乱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:21:37.293

不，你真的释放了内存块。在函数调用之后，传递给该函数的指针不指向任何地方：相同的地址，但 MMU 不再知道如何处理该地址

# jquery - 在 jqGrid 中更改单元格的编辑类型

> ID：13938206
> 
> 赞同：2
> 
> 时间：2012-12-18T17:19:13.033
> 
> 标签：jquery, jqgrid

在单元格编辑中，有什么方法可以在编辑单元格时更改其编辑类型（如果满足某些条件）？

假设我有一个 colModel，它有一个字段“Description”，默认情况下将被视为输入。当我单击以在该单元格中进行编辑时，输入将与当前单元格值一起出现。现在，如果满足某些条件，我希望当用户单击该单元格进行编辑时，而不是输入一个选择出现。

我已经尝试使用 setColProp 并同时更改了 edittype 和 editoptions，但要么我没有在正确的地方这样做（我在 beforeCellEdit 事件中这样做了），要么它不起作用。

谢谢。

**更新**：

我已尝试使用您提出的策略，但在调用该方法后，我的单元格*仍*显示输入：`setColProp`

```
var originalEditCell = $.fn.jqGrid.editCell;

    $.jgrid.extend({
        editCell: function (iRow, iCol, isStartEditing) {

            if (iCol === 4 && classEditMode) {

                $(this).jqGrid('setColProp', "ColName4", { edittype: "text" });
                var cell = $(this).find('tr:eq(' + iRow + ')').find('td[aria-describedby="gridFix_Description"]');
                cell.find('select').remove();
                cell.append($('<input />').attr('id', iRow + '_Description')
                                          .attr('name', 'Description')
                                          .attr('role', 'textbox')
                                          .width('98%')
                                          .text(""));
            }
            return originalEditCell.call(this, iRow, iCol, isStartEditing);
        }
    }); 
```

网格仍然生成一个选择。知道为什么吗？

谢谢

**UPD2**

抱歉，我忘记在 setColProp 方法中包含正确的 colname 变量。我在帖子中更正了这一点，以记录我如何解决这个问题，如果其他人需要它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:39:11.383

您可以使用`onCellSelect`回调或在将被调用*之前*`beforeSelectRow`管理某些属性的动态更改的情况。问题只是在键盘导航的情况下它无济于事。 *`editCell`*

 *作为一种安全的解决方法，但有点棘手，我可以建议使用 jqGrid 方法的“子类化” `editCell`（参见[此处](https://stackoverflow.com/a/9181899/315935)、[此处](https://stackoverflow.com/a/8518501/315935)等）。对应的代码片段如下

```
var originalEditCell = $.fn.jqGrid.editCell;

$.jgrid.extend({
editCell: function (iRow, iCol, isStartEditing) {
        // here you can do some actions before editing
        return originalEditCell.call(this, (iRow, iCol, isStartEditing);
    }
}); 
```*

# java - java小程序在部署时不运行，但在eclipse中运行时有效

> ID：13938215
> 
> 赞同：3
> 
> 时间：2012-12-18T17:19:50.473
> 
> 标签：java, eclipse, applet

下面是我非常粗略的小程序代码。在最底部，我执行 client.clientProcess();

```
import javax.swing.*;

import com.pega.Messaging.Client;
import com.pega.Messaging.MessagingHelper;

import java.awt.event.*;
import java.awt.*;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;

@SuppressWarnings("serial")
public class PRPCPassCrackApplet extends JApplet{

    JLabel message;

    JLabel lpmsg;
    JTextField localPort;    

    JLabel snmsg;
    JTextField serverName;

    JLabel spmsg;
    JTextField serverPort;

    JButton button; 
    JLabel error;

    public void init(){

        setSize(600,150);  
        setBackground(Color.BLACK);

        message = new JLabel("Client Parameters\n");
        lpmsg = new JLabel("Local Port:  ");
        snmsg = new JLabel("Server Name: ");
        spmsg = new JLabel("Server Port: ");
        localPort = new JTextField();
        serverName = new JTextField();
        serverPort = new JTextField();
        localPort.setPreferredSize(new Dimension(450, 10));
        serverName.setPreferredSize(new Dimension(450, 10));
        serverPort.setPreferredSize(new Dimension(450, 10));

        button = new JButton("Send To Server");  
        button.setPreferredSize(new Dimension(450,10));

        error = new JLabel("");
        error.setForeground(Color.red);

        Container window = getContentPane();
        window.setLayout(new GridLayout(0,2)); 
        button.addActionListener(new ButtonListener());

        window.add(message);
        window.add(new JLabel(""));
        window.add(lpmsg);
        window.add(localPort);
        window.add(snmsg);
        window.add(serverName);
        window.add(spmsg);
        window.add(serverPort);
        window.add(button);
        window.add(error);
    }

    private class ButtonListener implements ActionListener{
        public void actionPerformed(ActionEvent push){
            String lp = localPort.getText();
            String sn = serverName.getText();
            String sp = serverPort.getText();
            int lpint = -1;
            int spint = -1;
            ServerSocket listenSocket = null;
            Socket socketToServer = null;

            try{
                lpint = Integer.parseInt(lp);
            }catch(NumberFormatException e){
                error.setText("Local Port is not a number");
                return;
            }

            try{
                spint = Integer.parseInt(sp);
            }catch(NumberFormatException e){
                error.setText("Server Port is not a number");
                return;
            }

            try{
                listenSocket = new ServerSocket(lpint);
            }catch(Exception e){
                error.setText("Could not open local port: " + lp +". Choose another.");
                return;
            } finally{
                try {
                    listenSocket.close();
                } catch (IOException e) {
                }
            }

            try{
                //open connection to server
                InetAddress serverAddress = InetAddress.getByName(sn);
                socketToServer = new Socket(serverAddress, spint);
                //create initial connection 
                OutputStream os = socketToServer.getOutputStream();
                OutputStreamWriter osw = new OutputStreamWriter(os);
                BufferedWriter bw = new BufferedWriter(osw);

                //report in
                String status = "ping";
                bw.write(MessagingHelper.createPacket(status, sn, lp, ""));
                bw.close();

            }catch(Exception e){
                error.setText("Can't connect to Server: " + sn + " on port: " + sp);
                return;
            }finally{
                try {
                    socketToServer.close();
                } catch (IOException e) {
                }
            }
            error.setText("Beginning Execution");
            error.setForeground(Color.BLUE);
            button.setVisible(false);
            Client client = new Client(spint, sn, lpint, true);
            client.clientProcess();     

        }
    }
} 
```

当我在 Eclipse 中运行它时，我的程序运行愉快并正确完成，但是我通过右键单击 > 导出 > JAR 文件导出 jar 我无法使用以下代码运行我的小程序：

```
<!DOCTYPE html>

<html>

<head>
<title>Client Testing</title>
</head>

<body>
<h1 id="header1"> Distributed Brute Force Attacks </h1>

<applet
class="blah.blah.blah.blah.Applet" <!--not actually blah.blah I had to obfuscate-->
archive="client.jar"
code="blah.blah.blah.blah.Applet.class"
width="1000"
height="250"
vspace="10"
hspace="10"
align="center"
alt="You need Java to run this Applet"
name="clientApplet"
mayscript >
</applet>

</body>

</html> 
```

如果它在 eclipse 中有帮助，我检查了“导出生成的类文件和资源”和“导出 Java 源文件和资源”，并且没有定义主类。

小程序正确显示并正确检查错误，但它似乎从未运行该 clientProcess。我可以做些什么来允许用户通过小程序运行我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:20:32.703

确保已设置类路径。当您在 Eclipse 中运行此小程序时，所有类文件都存在于类路径中，包括 jars。

# dart - 使用 Process.start 设置环境变量

> ID：13938217
> 
> 赞同：4
> 
> 时间：2012-12-18T17:20:06.593
> 
> 标签：dart

是否可以使用 Process.start() 设置环境变量？我试图从[http://www.dartlang.org/articles/io/](http://www.dartlang.org/articles/io/)调整流程示例，但我收到错误。

```
Process.start("export my_key='abc123'", []).then((process) {
  var stdoutStream = new StringInputStream(process.stdout);
  stdoutStream.onLine = () => print(stdoutStream.readLine());
  process.stderr.onData = process.stderr.read;
  process.onExit = (exitCode) {
    print('exit code: $exitCode');
}; 
```

错误：

```
Unhandled exception:
FutureUnhandledException: exception while executing Future
  ProcessException: No such file or directory
    Command: export my_key='abc123' 
original stack trace:
  null
#0      _FutureImpl._complete (bootstrap:844:11)
#1      _FutureImpl._complete (bootstrap:848:5)
#2      _FutureImpl._setException (bootstrap:873:14)
#3      _CompleterImpl.completeException (bootstrap:948:30)
#4      _ProcessImpl._start.<anonymous closure> (dart:io-patch:198:37)
#5      _Timer._createTimerHandler._handleTimeout (dart:io:6918:28)
#6      _Timer._createTimerHandler._handleTimeout (dart:io:6926:7)
#7      _Timer._createTimerHandler.<anonymous closure> (dart:io:6934:23)
#8      _ReceivePortImpl._handleMessage (dart:isolate-patch:37:92) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T19:53:44.310

不幸的是，你不能。首先这是因为`export`它实际上是 bash（或其他几个 shell）的 shell 命令，而不是系统上的实际应用程序。Dart 不在 shell 中执行进程。

一个选项是`bash -c 'export my_key=123'`用作传递给 Process.start 的参数，但这也非常有限，因为导出的变量仅在 bash 会话期间存在。也就是说，一旦您生成的进程终止，您的变量就不再存在。

如果您想查看此操作，请在命令提示符下尝试以下操作：

```
bash -c 'export TEST="true";echo $TEST' 
```

这将创建一个新的 bash 会话，导出变量，然后显示变量。一旦你有你的提示尝试然后运行：

```
echo $TEST 
```

通过它自己。您应该会看到一个空行（如果您的系统上已经存在，则应该看到一个不同的值）。

也就是说，如果您想在运行不同的进程之前设置环境变量，请使用[ProcessOptions](http://api.dartlang.org/docs/bleeding_edge/dart_io/ProcessOptions.html)类设置环境变量，然后将其传递给您的 Process.start ：

```
import 'dart:io';

void main() {
  var po = new ProcessOptions();
  var ev = {'TEST': 'True'};
  po.environment = ev;
  Process.start('bash', ['-c','export'], po).then((process) {
    var stdoutStream = new StringInputStream(process.stdout);
    stdoutStream.onLine = () => print(stdoutStream.readLine());
    process.stderr.onData = process.stderr.read;
  });
} 
```

# css - css如何重置：悬停到默认状态？

> ID：13938218
> 
> 赞同：5
> 
> 时间：2012-12-18T17:20:09.743
> 
> 标签：css, hover, default

我有以下规则：

```
.quiz .panel .choices a:hover,
.quiz .panel .choices a:active {background-position: 0 -30px;} 
```

而且由于 iOS 在与`:hover`. 我想将`<a>`标签重置为 iOS 的正常 CSS 状态。在我的页面中，javascript 将在顶层注入一个名为“iOS”的类，因此我将覆盖的以下规则是：

```
.iOS .quiz .panel .choices a:(?????) 
```

问号是我不知道的部分。我要编写什么 CSS 规则来重置`<a>`标签，使伪类处于默认状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:22:29.673

我真的不明白你的问题，但你有 4 个选项是

```
a:link
a:hover
a:active
a:visited 
```

我猜你需要

```
.iOS .quiz .panel .choices a:link {background-position: 0 0} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:23:46.847

根本没有伪类。只需使用：

```
.iOS .quiz .panel .choices a 
```

当“悬停”没有发生时，它将成为选定的规则！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:47:28.167

```
body:not(.iOS) .quiz .panel .choices a:hover,
.quiz .panel .choices a:active {background-position: 0 -30px;} 
```

如有必要，重复该`not`行。还可以使用与您应用该类的任何元素匹配的选择器进行`:active`交换。`body``.iOS`

# java - 为什么无法检查当前线程是否持有 ReentrantReadWriteLock 的读锁？

> ID：13938220
> 
> 赞同：9
> 
> 时间：2012-12-18T17:20:19.607
> 
> 标签：java, multithreading, concurrency, java.util.concurrent, concurrent-programming

我发现 的写锁`ReentrantReadWriteLock`提供了一种`isHeldByCurrentThread()`方法来检查调用线程是否持有该锁。

但是读锁没有对应`isHeldByCurrentThread()`的方法。为什么不？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T17:21:09.587

我认为答案在 Doug Leas 对此问题的评论中：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6207928) ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6207928 。

道格·李写道：

> 当前的设计和行为是有意的。读锁通常没有定义为具有所有权的概念，因此无法测试所有权。... JSR166 EG 已收到一些请求，以可选地支持每线程读取保持跟踪。这样做会显着增加锁开销，因此需要由可选的构造参数控制。我们正在调查它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T23:43:55.987

ReentrantReadWriteLock.getReadHoldCount() 似乎可以完成这项工作。

# clang - 与 GCC 相比，编译时间要慢得多

> ID：13938221
> 
> 赞同：3
> 
> 时间：2012-12-18T17:20:24.727
> 
> 标签：clang

我看到 Clang 编译与 GCC 相比，速度下降了四倍。知道是什么原因造成的吗？

```
ebg@tsuki(250)$ time /usr/bin/cc -DHC4 -DSAFETY -DNOREDUCE -DNFAIR=3 -O2  -o files2 pan.c    
real    2m3.073s
user    1m59.484s
sys 0m3.585s

ebg@tsuki(251)$ time /usr/local/gcc/bin/gcc -DHC4 -DSAFETY -DNOREDUCE -DNFAIR=3 -O2  -o files1 pan.c
real    0m28.310s
user    0m27.590s
sys 0m0.706s

ebg@tsuki(252)$ /usr/bin/cc -v
Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix

ebg@tsuki(253)$ /usr/local/gcc/bin/gcc -v
Using built-in specs.
COLLECT_GCC=/usr/local/gcc/bin/gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc/libexec/gcc/x86_64-apple-darwin10.7.0/4.6.0/lto-wrapper
Target: x86_64-apple-darwin10.7.0
Configured with: ./configure --prefix=/usr/local/gcc --enable-languages='c c++' --enable-lto --with-gmp=/usr/local/gcc --with-mpfr=/usr/local/gcc --with-mpc=/usr/local/gcc
Thread model: posix
gcc version 4.6.0 (GCC) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:14:04.917

当我遇到同样的问题时，这是因为 clang 是为调试模式而不是为发布模式构建的。

# python - 如果装饰器更改了 API，我应该如何处理装饰函数的文档字符串？

> ID：13938230
> 
> 赞同：2
> 
> 时间：2012-12-18T17:20:47.107
> 
> 标签：python, api, decorator, docstring

# 背景

我有一个库，其中包含多个读取或写入文件的函数。每个函数都接受文件作为第一个参数，可以是文件对象，也可以是文件名。因此，所有函数在开头都有相同的代码，类似于以下内容：

```
if isinstance(f, str):
    file_obj = open(f, 'w')
else:
    file_obj = f 
```

现在我想我可以在装饰器中编写一次并将所有功能包装在其中，而不是重复自己。（我也在考虑在同一个装饰器中实现上下文管理器接口。）

因此，如果我这样做，函数将如下所示：

```
@file_aware('w')
def function(f, *args, **kwargs):
    """Do stuff. `f` can be file object or file name"""
    for line in f:
       .... 
```

# 问题

我担心的是现在函数的文档字符串与下面的代码不对应。（我打算用 . 保留装饰函数的文档字符串`functools.wraps`。）它会降低代码的可读性/可维护性/透明度吗？据我了解，装饰器可以很容易地来来去去，但同时这有点改变了 API（我不打算删除该功能）。这种情况下的“最佳实践”方式是什么？

我可以考虑在装饰器中自动处理文档字符串，但是：

*   这不是最自然的事情；
*   这仅对在线文档有意义，并且不会帮助（相反）阅读源代码的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:34:41.720

一种选择是将文档字符串传递给装饰器。这样，您仍然可以通过函数定义获得一个文档字符串来读取源代码，但是如果您要更改或删除装饰器，您最终不会得到一个不正确的文档字符串。

例如：

```
@file_aware(docstring="Do stuff. `f` can be file object or file name", mode="r")
def function(f, *args, **kwargs):
    for line in f:
       .... 
```

你的`file_aware`装饰器可能看起来像这样：

```
def file_aware(docstring, mode):
    def deco(func):
        @functools.wraps(func)
        def wrapped(f, *args, **kwargs):
            if isinstance(f, str):
                file_obj = open(f, mode)
            else:
                file_obj = f
            return func(file_obj, *args, **kwargs)
        wrapped.__doc__ = docstring
        return wrapped
    return deco 
```

# cloud-foundry - Typo Rails 3 博客应用程序会在 CloudFoundry 上运行吗？

> ID：13938231
> 
> 赞同：0
> 
> 时间：2012-12-18T17:20:53.440
> 
> 标签：cloud-foundry

我正在尝试上传全新安装的 Typo 6.1，我只是将其解压缩并选择 mysql 作为数据库。正如人们所期望的那样，它在本地运行良好。但是当我将它推送到 CloudFoundry 时，应用程序将无法启动。它也没有给我一个错误，它只是拒绝启动。

有没有其他人让 Typo 6 在 CloudFoundry 上运行，如果有，您采取了哪些步骤来配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:59:14.070

是的，我在[http://typo-jambay.cloudfoundry.com/上工作了](http://typo-jambay.cloudfoundry.com/)

第 1 步 - 对 Gemfile 进行编辑，较新的 rake (10.0.3) 似乎不太满意，因此我们应该使用相同的小更新。

改变：

```
gem 'rake', '>= 0.9.2' 
```

到

```
gem 'rake', '~> 0.9.2' 
```

第 2 步 - 确保使用您计划使用的数据库运行 bundle install。我使用了 postgress，所以我让我的 config/database.yml 成为 config 中 postgres 版本的副本。

第 3 步 - 您可以使用这样的 manifest.yml 文件，只要您拥有最新版本的 vmc（gem install vmc --pre），vmc push 应该会处理所有事情：

```
---
applications:
- name: typo
  framework: rails3
  runtime: ruby19
  memory: 256M
  instances: 1
  url: typo.${target-base}
  path: .
  services:
    postgresql-ccdb5:
      label: postgresql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:33:09.140

Typo 6 有点像旧的 Rails 项目，但我有一份工作。它位于[http://typo6.cloudfoundry.com](http://typo6.cloudfoundry.com)

因此，要按照以下步骤进行部署；

1.  克隆错字 6 存储库 -`git clone git://github.com/fdv/typo.git`

2.  简化 Gemfile，确保 'mysql2' 在那里

    ```
    source :rubygems

    gem 'rails', '~> 3.2.6'
    gem 'mysql2'

    gem 'require_relative'
    gem 'htmlentities'
    gem 'json'
    gem 'bluecloth', '~> 2.1'
    gem 'coderay', '~> 0.9'
    gem 'kaminari'
    gem 'RedCloth', '~> 4.2.8'
    gem 'addressable', '~> 2.1', :require => 'addressable/uri'
    gem 'mini_magick', '~> 1.3.3', :require => 'mini_magick'
    gem 'uuidtools', '~> 2.1.1'
    gem 'flickraw-cached', :require => 'flickraw'
    gem 'rubypants', '~> 0.2.0'
    gem 'rake', '~> 0.9.2'
    gem 'acts_as_list'
    gem 'acts_as_tree_rails3'
    gem 'fog'
    gem 'recaptcha', :require => 'recaptcha/rails', :branch => 'rails3'

    gem 'prototype-rails', '~> 3.2.1'
    gem 'prototype_legacy_helper', '0.0.0', :git => 'http://github.com/rails/prototype_legacy_helper.git'

    gem 'rails_autolink', '~> 1.0.9'
    gem 'dynamic_form', '~> 1.1.4' 
    ```

3.  将 config/database.yml.mysql 移动到 config/database.yml

4.  做一个`bundle install`

5.  使用 vmc 部署，这是重要的部分。当询问它是什么类型的应用程序时，选择“其他”，然后选择“机架”。继续选择 ruby​​1.9 作为框架，并确保为应用程序分配了相当数量的内存，至少 128M。也向应用程序添加一个新的 MySQL 服务。此时，应用程序应该可以部署并启动。

6.  如果您此时访问应用程序，您应该会看到 Rails 500 错误。这是因为数据库尚未播种。要为数据库播种，您需要在本地创建一个到数据库的隧道，以便您可以针对它运行 db:seed rake 任务。

    像这样创建隧道`vmc tunnel [name of the service]`，为客户端选择“无”，当隧道绑定时，您应该会看到弹出的数据库的凭据和名称。在另一个控制台窗口中修改 database.yml 文件，使其包含这些详细信息，确保地址是 127.0.0.1，而不是 localhost。

    ```
    login: &login
      adapter: mysql2
      host: 127.0.0.1
      username: uzkeDkKwBnkmC
      password: pcf4oP3N2UbdV
      port: 10000

    development:
      database: df67f078353974ccd8b090ccb726c9109
      <<: *login

    test:
      database: typo_tests
      <<: *login

    production:
      database: typo
      <<: *login 
    ```

7.  在隧道仍然打开的情况下，运行 rake db:seed 任务 - `bundle exec rake db:seed`，一旦完成（可能需要几分钟），安装应该很好！

希望这对您有用，有任何问题，请评论我的回答。

编辑：如果 jambay 的解决方案有效，请使用它，它更直接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:40:27.510

您是否能够通过 vmc logs 命令检查 Cloud Foundry 上的日志？

# editor - 如何在 TYPO3 RTE 编辑器中禁用转换？

> ID：13938234
> 
> 赞同：0
> 
> 时间：2012-12-18T17:21:10.573
> 
> 标签：editor, typo3, rte

我为 TYPO3 CMS 创建了一个自定义扩展。它基本上执行一些数据库查询以从数据库中获取文本。正如我所看到的，TYPO3 编辑器在将数据存储到数据库之前对其进行转换，例如，对于许多这样的标签，链接`<a href="....." >Link</a>`存储为`<link href>My Link Text</link>`等等。当我从 DB 查询数据时，我得到它，因为它存储在 DB ( `<link href>My Link Text</link>`) 中，因此链接不会按应有的方式显示。它们显示为普通文本..

据我所知有两种方法：

1.  禁用 RTE 转换（怎么做？）

2.  使用 lib.parseFunc_RTE （我不知道如何正确配置它）

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T19:57:08.910

我猜你没有使用 Extbase 和 Fluid？作为参考，如果您将 Extbase 和 Fluid 用于您的扩展，您可以使用 Fluid 从 RTE 渲染文本：

```
<f:format.html>{bodytext}</f:format.html> 
```

这使用 lib.parseFunc_RTE 将 RTE 文本呈现为 HTML。您还可以告诉它使用不同的 TypoScript 对象进行渲染：

```
<f:format.html parseFuncTSPath="lib.my_parseFunc">{bodytext}</f:format.html> 
```

有用的文档：

*   [解析函数](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Parsefunc/Index.html)
*   [流体格式.html](http://wiki.typo3.org/Fluid#f:format.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T15:07:38.013

我设法通过**配置包含的打字稿**来做到这一点：

```
# Creates persistent ParseFunc setup for non-HTML content. This is recommended to use (as a reference!)
lib.parseFunc {
makelinks = 1
makelinks.http.keep = {$styles.content.links.keep}
makelinks.http.extTarget < lib.parseTarget
makelinks.http.extTarget =
makelinks.http.extTarget.override = {$styles.content.links.extTarget}
makelinks.mailto.keep = path
tags {
    link = TEXT
    link {
        current = 1
        typolink.parameter.data = parameters : allParams
        typolink.extTarget < lib.parseTarget
        typolink.extTarget =
        typolink.extTarget.override = {$styles.content.links.extTarget}
        typolink.target < lib.parseTarget
        typolink.target =
        typolink.target.override = {$styles.content.links.target}
        parseFunc.constants =1
    }
}
allowTags = {$styles.content.links.allowTags} 
```

并拒绝标签**链接**：

```
denyTags = link

sword = <span class="csc-sword">|</span>
constants = 1

nonTypoTagStdWrap.HTMLparser = 1
nonTypoTagStdWrap.HTMLparser {
    keepNonMatchedTags = 1
    htmlSpecialChars = 2
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T12:35:21.760

我遇到了同样的问题，但使用 EXTBASE 函数“pi_RTEcssText”不再可用。好吧，也许它是，但我不知道如何包含它。

无论如何，这是我使用 EXTBASE 的解决方案：

```
$this->cObj = $this->configurationManager->getContentObject();
$bodytext = $this->cObj->parseFunc($bodyTextFromDb, $GLOBALS['TSFE']->tmpl->setup['lib.']['parseFunc_RTE.']); 
```

这样我就得到了 RTE 格式的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:03:06.250

好吧，如果其他人遇到这个问题，

**我找到了一种**`pi_RTEcssText()`通过在我的扩展文件中使用函数来解决它的方法：

```
$outputText=$this->pi_RTEcssText( $value['bodytext'] ); 
```

`$value['bodytext']`我从扩展中的数据库查询中获得的字符串在哪里。

这个函数似乎处理数据并返回完整的 HTML（包括链接、段落和其他标签）。

***注意：*** 如果您还没有，则需要包含此文件：

```
require_once(PATH_tslib.'class.tslib_pibase.php'); 
```

在扩展文件的顶部。

基本上就是这样。

# python - 为循环向量化numpy数组

> ID：13938235
> 
> 赞同：2
> 
> 时间：2012-12-18T17:21:13.693
> 
> 标签：python, numpy, vectorization

我试图弄清楚如何矢量化以下循环：

```
for i in range(1,size):
    if a[i] < a[i-1]:
        b[i] = a[i]
    else: b[i] = b[i-1] 
```

b 是一个与 a 大小相同的（大）数组。我可以使用

```
numpy.where(a[1:]<a[:-1]) 
```

替换 if 语句，但如何同时替换 else 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:37:53.453

我想你想要这样的东西：

```
import numpy as np

def foo(a, b):
    # cond is a boolean array marking where the condition is met
    cond = a[1:] < a[:-1]
    cond = np.insert(cond, 0, False)
    # values is an array of the items in from a that will be used to fill b
    values = a[cond]
    values = np.insert(values, 0, b[0])
    # labels is an array of increasing indices into values
    label = cond.cumsum()
    b[:] = values[label] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:30:24.273

从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)：

> `numpy.where(condition[, x, y])`
> 
> > 根据条件从 x 或 y 返回元素。

因此，您可以简化包含以下内容的循环：

```
if cond:
    a[i] = b[i]
else:
    a[i] = c[i] 
```

至

```
a = numpy.where(cond, a, b) 
```

但是，我认为您的示例不能向量化，因为每个元素都取决于前一个元素。

# jquery - jQuery removeData 行为

> ID：13938242
> 
> 赞同：1
> 
> 时间：2012-12-18T17:21:30.773
> 
> 标签：jquery, select, mobiscroll

这是上下文 - 我正在尝试创建一个自适应设计，其中选择框显示为 jQuery Mobile 在大屏幕上的选择以及 MobiScroll 在小屏幕上的选择。HTML中的原始选择是这样写的

```
<select data-mini='true' data-inline='true' class='variants' data-role='none' style='display:none'>
  <option value='1'>Small</option>
  <option value='2'>Medium</option>
  <option value='3'>Large</option>
</select> 
```

这

```
style='display:none' 
```

位很关键。没有它，您最终会在小屏幕上获得两个控件 - 一次是原始选择，然后是 mobiscroll 样式的选择。这在 MobiScroll 文档中没有得到很好的解释。

在我的 document.ready 代码中，我放入了类似的内容

```
if (600 > $(window).width()) {
    $('.variants').scroller({
        preset: 'select',
        theme: 'android-
      ics',
        rows: 1,
        mode: 'scroller',
        display: 'inline',
        inputClass: 'i-txt',
        showLabel: false,
        width: 40,
        height: 20
    });
} else {
    $('.variants').css('display', 'inline-block').removeData('role');
}​ 
```

有了这个，一个无样式的浏览器选择框就会出现在大屏幕上。我试图通过 removeData 取出数据角色位，因为我希望选择显示为更漂亮的 jQuery Mobile 选择。但是，这并没有发生，并且 removeData 没有做任何事情。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:24:49.533

根据 jQuery 文档[.removeData()](http://api.jquery.com/removeData/)

> .removeData() 方法允许我们删除之前使用 .data() 设置的值。当使用键名调用时， .removeData() 删除该特定值；当不带参数调用时，所有值都被删除。从 jQuery 的内部 .data() 缓存中删除数据不会影响文档中的任何 HTML5 数据属性；使用 .removeAttr() 删除那些。

看起来您正在使用文档中的 HTML5 数据属性 .. 所以请`.removeAttr('data-role')`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:49:10.837

我想到了！关键是不需要删除 data-role = 'none' 属性。它仅用于告诉 jQuery 不要尝试对相关元素进行任何升级。但是，如果你然后做类似的事情

```
$('.variants').css('display', 'inline-block').selectmenu() 
```

您正在将 .variants 选择系列明确转换为 jQuery Mobile 选择菜单，因此 data-role 属性根本不会进入图片中。我所寻求的修改后的代码是

```
if (600 > $(window).width()) {
$('.variants').scroller({
    preset: 'select',
    theme: 'android-
  ics',
    rows: 1,
    mode: 'scroller',
    display: 'inline',
    inputClass: 'i-txt',
    showLabel: false,
    width: 40,
    height: 20
});
} else {
$('.variants').css('display', 'inline-block').selectmenu();
}​ 
```

# iphone - Audioplayer 不会从其他视图停止

> ID：13938243
> 
> 赞同：0
> 
> 时间：2012-12-18T17:21:32.210
> 
> 标签：iphone, objective-c, ios

在第一个视图中，我创建音频播放器并从头开始加载

```
@interface SplashViewController : UIViewController
...
@property (strong, nonatomic) AVAudioPlayer *mp3;
...
- (void)viewDidLoad
{
[super viewDidLoad];
[self viewDidAppear:YES];
NSString *path = [[NSBundle mainBundle]pathForResource:@"sooner" ofType:@"mp3"];
NSURL *url = [NSURL fileURLWithPath:path];
NSError *error;
mp3 = [[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];
[mp3 setNumberOfLoops:-1];
[mp3 setVolume:1.0];
[mp3 play];
} 
```

好的，我有很多观点，我很高兴音乐播放总是不管我工作的观点。但我需要在其他（我的 SettingView）中停止音乐。我在 SettingView 中有下一个代码，但我没有结果 - 音乐播放和播放，不想停止

```
@class SplashViewController;
@interface SettingsViewController : UIViewController

@property (strong, nonatomic) SplashViewController *splashViewController;

________________________________________________________
#import "SplashViewController.h"
...
@implementation SettingsViewController
@synthesize pauseMusik; //UISwitch
@synthesize splashViewController = _splashViewController;
...
-(IBAction)playPauseMusik:(id)sender
{
if(!self.splashViewController)
    self.splashViewController = [[SplashViewController 
alloc]initWithNibName:@"SplashViewController" bundle:nil];
if (pauseMusik.on) {
    [self.splashViewController.mp3 play];
}
else
    [self.splashViewController.mp3 stop];} 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:04:26.987

您可以使用 NSNotificationCenter。例如..您的 IBaction（来自 SettingController）：

```
if.. {
     [[NSNotificationCenter defaultCenter] postNotificationName:@"actionChangedStop" object:nil];
}
else
     [[NSNotificationCenter defaultCenter] postNotificationName:@"actionChangedPlay" object:nil];
} 
```

NSNotificationCenter 向整个应用程序发送“广播”消息。

现在我们需要一个观察者.. 在 SplashController 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
 ..
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(actionChangedStop)
                                                 name:@"actionChangedStop"
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(actionChangedPlay)
                                                 name:@"actionChangedPlay"
                                               object:nil];
... 
```

..一个给定的方法被调用..

```
-(void)actionChangedStop{[audioPlayer stop];}
-(void)actionChangedPlay{[audioPlayer play];} 
```

..和瞧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:59:35.960

我创建了单独的类 AudioViewController，并创建了一个方法：

```
@implementation AudioViewController
@synthesize mp3;
static AudioViewController * sharedPlayer = NULL;
+ (AudioViewController *) sharedPlayer {
if ( !sharedPlayer || sharedPlayer == NULL ) {
    sharedPlayer = [AudioViewController new];
}
return sharedPlayer;
} 
```

并创建了播放/暂停方法：

```
-(void)player:(BOOL)playPause
{
if (playPause==YES)
   [mp3 play];
else [mp3 stop]; } 
```

mp3 在哪里

```
AVAudioPlayer *mp3; 
```

所以现在我可以简单地从任何 ViewController 播放/停止音乐

```
#import "AudioViewController.h"
...
[[AudioViewController sharedplayer]player:YES]//for playing
[[AudioViewController sharedplayer]player:NO]//for stoping 
```

我的问题有一个决定

# django - Django：如何从 ManyToManyField 返回属性？

> ID：13938254
> 
> 赞同：0
> 
> 时间：2012-12-18T17:21:56.640
> 
> 标签：django

我正在制作一个简单的 Web 应用程序，其中包含以下模型/视图：

```
# Models
from django.db import models

class Area(models.Model):
    name = models.CharField(max_length=40)
    def __unicode__(self):
        return self.name

class Room_Exit(models.Model):
    direction = models.CharField(max_length=20)
    secret = models.BooleanField()
    def __unicode__(self):
        return self.direction

class Room(models.Model):
    name = models.CharField(max_length=40)
    description = models.TextField()
    environment = models.CharField(max_length=40)
    secret = models.BooleanField()
    outdoors = models.BooleanField()
    area = models.ForeignKey(Area)
    exits = models.ManyToManyField(Room_Exit)
    def __unicode__(self):
        return self.name

# Views
from django.shortcuts import render_to_response, get_object_or_404
from wb.models import Area, Room_Exit, Room

def arealist(request):
    areas = Area.objects.all().order_by('name')
    return render_to_response('areas/arealist.html', {'areas': areas})

def roomlist(request, area_id):
    a = get_object_or_404(Area, pk=area_id)
    return render_to_response('areas/roomlist.html', {'area': a})

def roomdetail(request, area_id, room_id):
    a = get_object_or_404(Area, pk=area_id)
    r = get_object_or_404(Room, pk=room_id)
    return render_to_response('areas/roomdetail.html', {'room': r}) 
```

我正在尝试制作一个可以打印出房间属性的模板。除了ManyToManyField 之外，我能够打印出所有属性。在数据库中创建了一个具有 2 个 Room_Exits 的房间。这是模板：

```
<h1>{{ room.name }}</h1>
    <ul>
    <li>
        ID: {{ room.id }}
    </li>
    <li>
        Description: {{ room.description }}
    </li>
    <li>
        Environment: {{ room.environment }}
    </li>
    <li>
        Secret room: {{ room.secret }}
    </li>
    <li>
        Outdoor room: {{ room.outdoors }}
    </li>
    <li>
        Area: {{ room.area }}
    </li>
    <li>
        Exits: 
        {% for exits in room.room_exit.all %}
            {{ exits }}
        {% endfor %}
    </li>
    </ul> 
```

我正在尝试遍历房间的 Room_Exits，但它返回的只是 Exits：没有返回任何东西。谁能给我一个关于出了什么问题的想法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:26:27.600

在您的模板中更改`room.room_exit.all`为`room.exits.all`

# asp.net - 在 asp.net 中使用 SqlDataSource 更新 gridview

> ID：13938256
> 
> 赞同：2
> 
> 时间：2012-12-18T17:22:04.143
> 
> 标签：asp.net, gridview, sql-update, sqldatasource

我想使用 gridview 更新记录`SqlDataSource`，这就是我正在做的事情。
下面是我的gridview标记

```
<asp:GridView ID="grdManageFaculties" runat="server" AllowPaging="True" AutoGenerateColumns="False"
        DataSourceID="LocalServerDataSource" AutoGenerateDeleteButton="true" AutoGenerateEditButton="true"
        Width="100%" OnRowUpdating="grdManageFaculties_RowUpdating">
        <Columns>
            <asp:TemplateField HeaderText="MANAGE">
                <ItemTemplate>
                    <asp:LinkButton ID="lnkEdit" runat="server" CommandName="Edit" Text="Edit"></asp:LinkButton>
                    <asp:LinkButton ID="lnkDelete" runat="server" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:LinkButton ID="lnkUpdate" runat="server" Text="Update"></asp:LinkButton>
                    <asp:LinkButton ID="lnkCancel" runat="server" Text="Cancel"></asp:LinkButton>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="NAME">
                <ItemTemplate>
                    <asp:Label ID="lblUserName" runat="server" Text='<%# Eval("UserName") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Label ID="lblEditUserName" runat="server" Text='<%# Eval("UserName") %>'></asp:Label>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="EMAIL">
                <ItemTemplate>
                    <asp:Label ID="lblEmail" runat="server" Text='<%# Eval("Email") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEditEmail" runat="server" Text='<%# Bind("Email") %>'></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="MOBILE">
                <ItemTemplate>
                    <asp:Label ID="lblMobileNumber" runat="server" Text='<%# Eval("Mobile") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEditMobileNumber" runat="server" Text='<%# Bind("Mobile") %>'></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="LOCKED">
                <ItemTemplate>
                    <asp:CheckBox ID="chkIsLocked" runat="server" Enabled="false" Checked='<%# Eval("Locked") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:CheckBox ID="chkEditIsLocked" runat="server" Checked='<%# Bind("Locked") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="CREATED">
                <ItemTemplate>
                    <asp:Label ID="lblCreated" runat="server" Text='<%# Eval("Created") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Label ID="lblEditCreated" runat="server" Text='<%# Eval("Created") %>'></asp:Label>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

下面是我对 SqlDataSource 的标记

```
<asp:SqlDataSource ID="LocalServerDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:SiteSqlServer %>"
        SelectCommand="users_GetAllUsers" SelectCommandType="StoredProcedure" UpdateCommand="users_UpdateFaculty" UpdateCommandType="StoredProcedure">
        <UpdateParameters>
            <asp:Parameter Name="EMAIL" Type="String" />
            <asp:Parameter Name="ISLOCKEDOUT" Type="Boolean" />
            <asp:Parameter Name="MOBILENUMBER" Type="Int64" />
            <asp:Parameter Name="USERNAME" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

下面是我的 Row_Updating 函数的代码隐藏

```
 protected void grdManageFaculties_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        try
        {
            TextBox email = grdManageFaculties.Rows[e.RowIndex].FindControl("txtEditEmail") as TextBox;
            Label username = grdManageFaculties.Rows[e.RowIndex].FindControl("lblEditUserName") as Label;
            CheckBox locked = grdManageFaculties.Rows[e.RowIndex].FindControl("chkEditIsLocked") as CheckBox;
            TextBox mobilenumber = grdManageFaculties.Rows[e.RowIndex].FindControl("txtEditMobileNumber") as TextBox;

            LocalServerDataSource.UpdateParameters["EMAIL"].DefaultValue = email.Text;
            LocalServerDataSource.UpdateParameters["ISLOCKEDOUT"].DefaultValue = locked.Checked.ToString();
            LocalServerDataSource.UpdateParameters["MOBILENUMBER"].DefaultValue = mobilenumber.Text;
            LocalServerDataSource.UpdateParameters["USERNAME"].DefaultValue = username.Text;
            LocalServerDataSource.Update();
        }
        catch { }
    } 
```

下面是我的更新存储过程

```
ALTER PROCEDURE users_UpdateFaculty
    @EMAIL NVARCHAR(100),
    @ISLOCKEDOUT BIT,
    @MOBILENUMBER BIGINT,
    @USERNAME nvarchar(100)
AS
BEGIN
    UPDATE aspnet_Users SET MOBILENUMBER=@MOBILENUMBER where USERNAME=@USERNAME
    UPDATE ASPNET_MEMBERSHIP SET EMAIL = @EMAIL, LOWEREDEMAIL = LOWER(@EMAIL), ISLOCKEDOUT=@ISLOCKEDOUT WHERE USERID = (SELECT USERID FROM ASPNET_USERS WHERE USERNAME=@USERNAME)
END 
```

我在数据库中的记录正在更新，但是当我单击更新按钮时，出现以下错误：

```
Procedure or function users_UpdateFaculty has too many arguments specified. 
```

谁能帮助我可能导致此问题的原因，我正在正确使用所有参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:10:32.873

找到解决方案：选择列和更新参数应该匹配才能使用 SqlDataSource 进行更新，这意味着如果您选择（查询或过程）在 gridview 中返回 3 个字段，那么它们都应该是更新的参数，您如果不需要，可能会错过数据库中的实际更新，但`<UpdateParameters>`应该包含所有字段：例如，如果下面是我的选择查询

```
SELECT USERNAME, MOBILENUMBER, EMAIL FROM USERS 
```

那么更新参数应该是

```
<UpdateParameters>
   <asp:Parameter Name="UserName" Type="String" />
   <asp:Parameter Name="MobileNumber" Type="Int64" />
   <asp:Parameter Name="Email" Type="String" />
<UpdateParameters> 
```

即使您不打算更新该字段，您也不能跳过任何参数希望这对其他人有所帮助，因为我在这方面浪费了大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T07:34:02.773

我不认为您的解决方案可以，因为我必须使用属性 O​​ldValuesParameterFormatString="original_{0}" 这意味着我将拥有双参数，具有原始值的参数和具有编辑值的参数。所以没有办法匹配顺序。

我有 4 个参数，我得到了其中 2 个的正确值，其他参数为空。

我尝试了您的解决方案，但没有奏效。不管怎么说，还是要谢谢你。

阅读此内容：UpdateParameters 集合中的参数顺序可能很重要，具体取决于 ADO.NET 提供程序。System.Data.OleDb 和 System.Data.Odbc 提供程序根据参数在参数化 SQL 查询中出现的顺序关联集合中的参数。System.Data.SqlClient 提供程序是 SqlDataSource 控件的默认 ADO.NET 提供程序，它通过将参数名称与 SQL 查询中的占位符别名进行匹配来关联集合中的参数。有关参数化 SQL 查询和命令的详细信息，请参阅将参数与 SqlDataSource 控件一起使用。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.updateparameters(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.updateparameters(v=vs.110).aspx)

# nservicebus - NServiceBus.Host.exe 由于未处理的异常而崩溃

> ID：13938258
> 
> 赞同：0
> 
> 时间：2012-12-18T17:22:25.250
> 
> 标签：nservicebus, nservicebus3

我们已经看过几次了。我确定 MSDTC 存在某种 NHibernate 问题，但是为什么 NserviceBus 不将异常发送到错误队列而不是使主机进程崩溃？我们在 3.2.6 和 3.3.3 中都看到了异常

这也发生在 17 日上午 7:34 进行端点升级之前

日志名称：应用程序源：应用程序错误日期：2012 年 12 月 17 日上午 7:34:20 事件 ID：1000 任务类别：(100) 级别：错误关键字：经典用户：N/A 计算机：411357-SVCS01.daxko。本地描述：错误应用程序名称：NServiceBus.Host.exe，版本：3.2.6.0，时间戳：0x4ffd66f8 错误模块名称：KERNELBASE.dll，版本：6.1.7601.17651，时间戳：0x4e21213c 异常代码：0xe0434352 错误偏移：0x000000000000cacd进程 ID：0x2200 错误应用程序启动时间：0x01cddc556e2ef369 错误应用程序路径：D:\store\endpoints\Production\OnlineRegistrationEndpoint\NServiceBus.Host.exe 错误模块路径：C:\Windows\system32\KERNELBASE.dll 报告 ID：75b6c18c-484e -11e2-b05c-0050568e4fb1 事件 XML：1000 2 100 0x80000000000000 40360申请411357-SVCS01.daxko.local NServiceBus.Host.exe 3.2.6.0 4ffd66f8 KERNELBASE.dll 6.1.7601.17651 4e21213c e0434352 000000000000cacd 2200 01cddc556e2ef369 d：\存储\端点\生产\ OnlineRegistrationEndpoint \ NServiceBus.Host.exeÇ :\Windows\system32\KERNELBASE.dll 75b6c18c-484e-11e2-b05c-0050568e4fb1

日志名称：应用程序源：.NET 运行时日期：2012 年 12 月 17 日上午 7:34:18 事件 ID：1026 任务类别：无级别：错误关键字：经典用户：N/A 计算机：411357-SVCS01.daxko.local描述：应用程序：NServiceBus.Host.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.InvalidOperationException 堆栈：在 NHibernate.Impl.SessionImpl.Close() 在 NHibernate.Impl.SessionImpl.Dispose(Boolean) 在 NHibernate.Transaction.AdoNetWithDistrubtedTransactionFactory+<>c_DisplayClass1 的 NHibernate.AdoNet.ConnectionManager.Disconnect() *。 b*_0(System.Object, System.Transactions.TransactionEventArgs) 在 System.Transactions.TransactionCompletedEventHandler.Invoke(System.Object, System.Transactions.TransactionEventArgs) 在 System.Transactions.TransactionStatePromotedAborted.EnterState(System.Transactions.InternalTransaction) 在 System.Transactions .InternalTransaction.DistributedTransactionOutcome(System.Transactions.InternalTransaction, System.Transactions.TransactionStatus) 在 System.Transactions.Oletx.RealOletxTransaction.FireOutcome(System.Transactions.TransactionStatus) 在 System.Transactions.Oletx.OutcomeEnlistment.InvokeOutcomeFunction(System.Transactions.TransactionStatus) ) 在 System.Transactions.Oletx.OletxTransactionManager.ShimNotificationCallback(System.Object, Boolean) 在 System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(System.对象，布尔值）

事件 XML：1026 2 0 0x80000000000000 40359 应用程序 411357-SVCS01.daxko.local 应用程序：NServiceBus.Host.exe 框架版本：v4.0.30319 描述：由于未处理的异常，该进程已终止。异常信息：System.InvalidOperationException 堆栈：在 NHibernate.Impl.SessionImpl.Close() 在 NHibernate.Impl.SessionImpl.Dispose(Boolean) 在 NHibernate.Transaction.AdoNetWithDistrubtedTransactionFactory+<>c_DisplayClass1 的 NHibernate.AdoNet.ConnectionManager.Disconnect() *。 <EnlistInDistributedTransactionIfNeeded>b*_0(System.Object, System.Transactions.TransactionEventArgs) 在 System.Transactions.TransactionCompletedEventHandler.Invoke(System.Object, System.Transactions.TransactionEventArgs) 在 System.Transactions.TransactionStatePromotedAborted.EnterState(System.Transactions.InternalTransaction) 在 System.Transactions .InternalTransaction.DistributedTransactionOutcome(System.Transactions.InternalTransaction, System.Transactions.TransactionStatus) 在 System.Transactions.Oletx.RealOletxTransaction.FireOutcome(System.Transactions.TransactionStatus) 在 System.Transactions.Oletx.OutcomeEnlistment.InvokeOutcomeFunction(System.Transactions.TransactionStatus) ) 在 System.Transactions.Oletx.OletxTransactionManager.ShimNotificationCallback(System.Object, Boolean) 在 System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(System.对象，布尔值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:06:16.283

我收到了 NServicebus 论坛的回复，其中解释了 NServiceBus 无法处理异常的修复和原因。[http://tech.groups.yahoo.com/group/nservicebus/message/17328](http://tech.groups.yahoo.com/group/nservicebus/message/17328)

谷歌搜索后，它看起来像是 NHibernate ( [https://nhibernate.jira.com/browse/NH-2420](https://nhibernate.jira.com/browse/NH-2420) ) 中的一个错误，应该在 > 3 个版本中修复！

您的端点崩溃并且没有任何内容发送到错误队列的原因是因为这是后台线程中未处理的异常。

我不确定我们是否可以做些什么来防止这种情况发生！

2012 年 12 月 19 日 04:20，porsche4me1999 写道：在 NHibernate.AdoNet.ConnectionManager.Disconnect()

-- 问候 John Simons NServiceBus

# mysql - 使用 wamp 服务器运行 Visual Basic 代码

> ID：13938260
> 
> 赞同：-1
> 
> 时间：2012-12-18T17:22:27.013
> 
> 标签：mysql, vba, wamp

我有一个当前正在运行的 WAMP 服务器。还有另一台服务器具有使用 Visual Basic 的 API。我可以创建 Visual Basic API 查询，但我需要的是脚本每天运行一次或两次以获取信息并将其输入到我的 mySQL 服务器中。我对 VBA 的经验很少，主要是为 excel 和coralDraw 编写脚本。

我需要弄清楚如何在 WAMP 服务器上自动运行 VB 脚本并将该信息放入 mySQL 服务器。如果在 Windows 中更容易做到这一点并跳过 wamp 服务器，请告诉我。我只需要获取信息并将其放入数据库中。

更新：12/18/12 通过 PHP 访问 mysql 不是问题。我必须通过另一台服务器上的程序访问这些信息，该服务器具有 VB 中的 API。需要在每个午夜运行一个脚本，该脚本将从 API 获取信息并将其放入 mySQL 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:27:30.277

编写简单的 PHP 将数据添加到您的数据库 - WAMP 支持开箱即用的 php。如果您了解 VB 逻辑，PHP 非常相似且易于使用。

[来自tutorialspoint.com](http://www.tutorialspoint.com/php/mysql_insert_php.htm)的简单示例：

```
<?php
$dbhost = 'localhost:3036';
$dbuser = 'root';
$dbpass = 'rootpassword';
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
  die('Could not connect: ' . mysql_error());
}
$sql = 'INSERT INTO employee '.
       '(emp_name,emp_address, emp_salary, join_date) '.
       'VALUES ( "guest", "XYZ", 2000, NOW() )';

mysql_select_db('test_db');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not enter data: ' . mysql_error());
}
echo "Entered data successfully\n";
mysql_close($conn);
?> 
```

# c# - 如何延迟显示 ToolTip ？

> ID：13938261
> 
> 赞同：0
> 
> 时间：2012-12-18T17:22:27.200
> 
> 标签：c#, .net, winforms

> **可能重复：**
> [C# 工具提示显示时间不够长](https://stackoverflow.com/questions/8225807/c-sharp-tooltip-doesnt-display-long-enough)

用户在控件上移动鼠标光标后，我需要在 3 秒内显示工具提示，现在它会立即显示。

我试过这样：

```
this.toolTip.AutoPopDelay = 3000;
this.toolTip.InitialDelay = 3000;
this.toolTip.ReshowDelay = 3000;
this.toolTip.AutomaticDelay = 3000;

private void control_MouseMove(object sender, MouseEventArgs e)
{
    toolTip.SetToolTip(control, "My info");  
} 
```

但是由于某种原因它不起作用，它仍然立即显示，我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T17:25:36.163

更改`this.toolTip.InitialDelay = 3000;`为`this.toolTip.InitialShowDelay = 3000;`这将设置显示延迟

# javascript - HTML/JavaScript 中的列表视图

> ID：13938267
> 
> 赞同：2
> 
> 时间：2012-12-18T17:22:44.843
> 
> 标签：javascript, html

有什么简单的方法可以在 HTML 中创建一个列表视图并为其设置一个 onClick() 侦听器，就像在 Android 中可以完成的那样？我的要求是我想从服务器检索数据并将其显示在列表视图中给用户。数据将像 - 一样被检索`10 rows at a time`。

然后如果用户点击更多，next`10 rows`将被检索。然后，如果用户单击特定列表项，则在另一个页面中显示详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:57:01.067

这只是一个使用 Mootools 的快速解决方案，我认为您的输入是 JSON，其中包含列表数组中的项目：

```
new Request.JSON(
{
    url: '/list.json', 
    onSuccess: function(json)
    {
        json.list.each(function(key, val)
        {
            new Element('LI')
                .set('text', val)
                .addEvent('click', function()
                {
                    alert('item '+key+' pressed');

                    // alert('item '+val.id+' pressed');
                    // considering val is an object instead of raw string, this way you must change set to something like this set('text', val.text)

                })
                .inject($('list'));
                // any other thing you want add to your list item 
        });
    }
}).get();

<ul id="list"></ul> 
```

键是数组中项目的位置，您可以使用我在评论中添加的 id 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:21:56.253

与其对表格进行分页，我更喜欢像在[SlickGrid](https://github.com/mleibman/SlickGrid)中那样使用虚拟滚动。

SlickGrid 有多种操作模式，但其核心功能是仅呈现您当前正在查看的行的 HTML。当您滚动时，行会根据需要动态创建和销毁。这允许您显示具有[数百万](http://mleibman.github.com/SlickGrid/examples/example-optimizing-dataview.html)行的网格。

API 允许您[按需加载数据](https://github.com/mleibman/SlickGrid/blob/master/examples/example6-ajax-loading.html)，因此只有在您滚动网格时才会从服务器获取行（以*n为一组）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:33:50.667

HTML 中的列表如下所示。

```
<ul>
   <li><a href="details/url/id">Title</li>
   <li><a href="details/url/id">Title</li>
</ul> 
```

网址可以转到详细信息页面。

要添加更多按钮，您将使用 javascript 和 ajax 从服务器获取更多行，并在获得响应时将更多项目附加到列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:14:44.497

我建议 Ember.js。Ember.js 有一个强大的绑定和模板系统，用于自动将 Javascript 对象与彼此和 DOM 同步。这对你正在做的事情来说是多余的，但如果你要对那个列表做任何复杂的事情，那是值得的。

Ember.CollectionView 的文档在这里：

[http://emberjs.com/api/classes/Ember.CollectionView.html](http://emberjs.com/api/classes/Ember.CollectionView.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:24:34.953

您可以尝试 Jquery 数据表：

[http://datatables.net/](http://datatables.net/)

# sql - 超过 4000 个字符的子字符串列值

> ID：13938268
> 
> 赞同：0
> 
> 时间：2012-12-18T17:22:50.017
> 
> 标签：sql, oracle11g

我有一个带有 varchar2(4000) 数据类型的 URL 值的列 (URL)。那里的一些值超过 4000 个字符，那么我有没有办法只对列中超过 4000 个字符的值进行子字符串化，用同一列中的子字符串替换原始值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:56:09.427

Varchar 最多支持 4,000 个字符；每个函数输出，如 SUBSTR，都是一个 varchar，因此不能容纳超过 4,000 个字符的字符串。您将使用 clob；但是 clob 是一个 lobobject；所以，它会很慢。

您可以在创建表时添加 2 列并使用 PL/SQL 块，因为 varchar 在 PL/SQL 中最多可包含 32,767 个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:33:24.543

您可以像这样找出超过 4000 个字符的列，

```
select userid, length(description)
from Users
where length(description) > 4000; 
```

因此，您可以在 CTL 文件本身中执行以下解析，

```
description "SUBSTR(:description, 1, 4000)", 
```

如果您不想丢失数据，那么您可以使用`CLOB`数据类型而不是`varchar2(4000)`

# java - Using the Stanford NLP libraries from within R, using the rJava package

> ID：13938272
> 
> 赞同：6
> 
> 时间：2012-12-18T17:23:04.297
> 
> 标签：java, r, stanford-nlp, rjava

Does anybody have any experience with using **StanfordCoreNLP** ( [http://nlp.stanford.edu/software/corenlp.shtml](http://nlp.stanford.edu/software/corenlp.shtml) through **rJava** in R? I’ve been struggling to get it to work for two days now, and think I’ve exhausted Google and previous questions on StackOverflow.

Essentially I’m trying to use the StanfordNLP libraries from within R. I have zero Java experience, but experience with other languages, so understand the basics about classes and objects etc.

From what I can see, the demo .java file that comes with the libraries seems to show that to use the classes from within Java, you’d import the libraries and then create a new object, along the lines of:

```
import java.io.*;
import java.util.*;

import edu.stanford.nlp.io.*;
import edu.stanford.nlp.ling.*;
import edu.stanford.nlp.pipeline.*;
import edu.stanford.nlp.trees.*;
import edu.stanford.nlp.util.*;

    public class demo {

        etc.
        etc.

        StanfordCoreNLP pipeline = new StanfordCoreNLP();

        etc. 
```

From within R, I’ve tried calling some standard java functions; this works fine, which makes me think it’s the way I’m trying to access the Stanford libraries that’s causing the issue.

I extracted the Stanford ZIP to **h:\stanfordcore**, so the .jar files are all in the root of this directory. As well as the various other files contained in the zip, it contains the main .jar files:

*   joda-time.jar
*   stanford-corenlp-1.3.4.jar
*   stanford-corenlp-1.3.4-javadoc.jar
*   stanford-corenlp-1.3.4-models.jar
*   joda-time-2.1-sources.jar
*   jollyday-0.4.7-sources.jar
*   stanford-corenlp-1.3.4-sources.jar
*   xom.jar
*   jollyday.jar

If I try to access the NLP tools from the command line, it works fine.

From within R, I initalized the JVM and set the classpath variable:

```
.jinit(classpath = " h:/stanfordcore", parameters = getOption("java.parameters"),silent = FALSE, force.init = TRUE) 
```

After this, if I use the command

```
.jclassPath() 
```

This shows that the directory containing the required .jar files has been added and gives this output in R:

**[1] "H:\RProject-2.15.1\library\rJava\java" "h:\ stanfordcore"**

However, when I try create a new object (not sure if this is the right Java terminology) I get an error.

I’ve tried creating the object in dozens of different ways (basically shooting in the dark though), but the most promising (simply because it seems to actually find the class is):

```
pipeline <- .jnew(class="edu/stanford/nlp/pipeline/StanfordCoreNLP",check=TRUE,silent=FALSE) 
```

I know this finds the class, because if I change the class parameter to something not listed in the API, I get a cannot find class error.

As it stands, however, I get the error:

**Error in .jnew(class = "edu/stanford/nlp/pipeline/StanfordCoreNLP", check = TRUE, : java.lang.NoClassDefFoundError: Could not initialize class edu.stanford.nlp.pipeline.StanfordCoreNLP**

My Googling indicates that this might be something to do with not finding a required .jar file, but I’m completely stuck. Am I missing something obvious?

If anyone can point me even a little in the right direction, I’d be incredibly grateful.

Thanks in advance!

Peter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:50:35.073

Your classpath is wrong - you are using a directory but you have JAR files. You have to either unpack all JAR files in the directory you specify (unusual) or you have to add all the JAR files to the class path (more common). [And you'll have to fix your typos, obviously, but I assume those come form the fact that you were not using copy/paste]

PS: please use [stats-rosuda-devel](http://mailman.rz.uni-augsburg.de/mailman/listinfo/stats-rosuda-devel) mailing list if you want more timely answers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:58:05.550

Success!

After hours of tinkering, I managed to find a work-around. If anyone is interested, this is what I did:

*   Using Eclipse, I started a new project.

*   I then created a directory called ‘lib’ under the root of the project and copied all the Stanford .jar files into this directory.

*   After this, I edited the properties of the project in Eclipse, went to ‘Java Build Path’, clicked the libraries tab.

*   I then choose to import the Java system libraries.

*   I also clicked ‘Add External Jars’ and selected all the Stanford jars from the lib directory.

*   I then created intetermediary Java classes to call the Stanford classes (rather than trying to call them directly from R).

Example:

```
import java.lang.Object;
import java.util.Properties;
import java.io.*;
import java.util.*;

import edu.stanford.nlp.io.*;
import edu.stanford.nlp.ling.*;
import edu.stanford.nlp.pipeline.*;
import edu.stanford.nlp.trees.*;
import edu.stanford.nlp.util.*;

public class NLP {

    public static void main(String[] args) {

        Properties props = new Properties();
        props.put("annotators", "tokenize");
        StanfordCoreNLP coreNLP = new StanfordCoreNLP(props);
      }

} 
```

This doesn’t return anything, but shows how a Stanford object can be created.

*   Build the project using Eclipse.

*   From within R, then set the working directory to the Java project's /bin directory (this isn’t strictly necessary, as you can add the classpath directory instead, but it simplifies things).

Then the object can be created in R with:

```
.jinit(classpath = ".")    // This initilizes the JVM
obj = .jnew("NLP") 
```

After this any methods you’ve created within the intermediary java classes can be called with:

```
Name_of_var_to_store_return_value = . jcall(class name, signature type, method, paramters) 
```

I still didn’t figure out why I can’t call the Stanford classes directly from R, but this method works. I suspect that @ChristopherManning is right and my problem is down to calling the external jar from R. By building it from scratch, the Stanford jars are linked during the build, so I guess that’s what fixed it.

# python - Soundcloud API 在服务器端 Python 身份验证中返回 401 错误

> ID：13938275
> 
> 赞同：1
> 
> 时间：2012-12-18T17:23:11.423
> 
> 标签：python, linux, oauth, soundcloud

尝试在 Python 中进行身份验证以测试已注册的应用程序，按照“在没有 SoundCloud 连接屏幕的情况下进行身份验证”：http: [//developers.soundcloud.com/docs/api/guide#user-credentials](http://developers.soundcloud.com/docs/api/guide#user-credentials)

```
import soundcloud

# create client object with app and user credentials
client = soundcloud.Client(client_id='YOUR_CLIENT_ID',
                           client_secret='YOUR_CLIENT_SECRET',
                           username='YOUR_USERNAME',
                           password='YOUR_PASSWORD') 
```

该`password='YOUR_PASSWORD'`行引发错误：

```
File "/usr/local/lib/python2.7/dist-packages/soundcloud/client.py", line 41, in __init__
    self._credentials_flow()
File "/usr/local/lib/python2.7/dist-packages/soundcloud/client.py", line 112, in _credentials_flow
    make_request('post', url, options))
File "/usr/local/lib/python2.7/dist-packages/soundcloud/resource.py", line 62, in wrapped_resource
    setattr(result, attr, getattr(response, attr))
AttributeError: 'Response' object has no attribute 'error' 
```

如果我将它包装在 a 中`try:`，我会得到：

```
Error: 401 Client Error: None, Status Code: 401 
```

我已经三重检查了 client_id 和 client_secret，我可以在网站上使用相同的凭据登录，并且我在代码中尝试了“用户名”和“用户名@email.com”格式。有任何想法吗？

[编辑：] 作为记录，“用户名”和“用户名@email.com”格式都有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:50:41.850

您必须将`requests`库降级到 0.14.2 版。

The `soundcloud` API python library wraps the `requests.models.Response` object, and with the refactor made for version 1.0.0, the `.error` attribute was removed. `soundcloud` however still expects it to be there.

I recommend you use a virtualenv to install libraries. You could manually remove the `requests` library from that virtualenv, or use `pip` to downgrade it:

```
pip install -I requests==0.14.2 
```

You may want to report this issue to the [soundcloud-python code project](https://github.com/soundcloud/soundcloud-python/issues) so that they can either fix their `setup.py` dependency or fix the library to work with `requests` 1.0.0 or newer.

# eclipse - eclipse - 如何更改包浏览器排序顺序（不想要字典排序）？

> ID：13938277
> 
> 赞同：1
> 
> 时间：2012-12-18T17:23:18.463
> 
> 标签：eclipse

[![图片](../Images/5ed737145fbd13dcdc966e7c1bdc8288.png)](https://i.stack.imgur.com/T5PuS.jpg)

有没有办法让我拥有它：

声波1、声波2、声波3...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:27:22.533

我认为你不能。如果可能，更改命名：Sonication01、Sonication02、...、Sonication10、Sonication11 以获得想要的订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-21T21:31:54.137

我相信这是可能的，但这是一个漫长而手动的过程。

您可以选择 Java 项目的属性并单击属性。然后，转到 Java 构建路径并选择“订购和导出”。在那里，您可以使用按钮上下移动所需文件并单击应用。

我希望这能回答你的问题。

# batch-file - 延迟扩展在延迟扩展中不起作用

> ID：13938280
> 
> 赞同：2
> 
> 时间：2012-12-18T17:23:27.230
> 
> 标签：batch-file, cmd, delayedvariableexpansion

我有一个脚本可以完成我期望它做的所有事情，除了一行。

我以前做过类似的，但我不能让这个工作。

我得到的代码在这里

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION 

::Set Path to be folder of Sage Files
SET PATH=C:\Welcome\Progs\SitesDataSetups\GeorgeYarmouth

::set date variables
for /f "tokens=1" %%i in ('date /t') do set thedate=%%i
set mm=%thedate:~3,2%
set dd=%thedate:~0,2%
set yyyy=%thedate:~6,4%

::Set T_DAY variable to date in ddmmyy format
set T_DAY=%dd%%mm%%yyyy:~2%

c:
cd\
cd %path%
for /f "usebackq tokens=* delims= " %%P in (`dir sage*.csv /od /b`) do (
    set SAGE=%%P
    set SAGE2=!SAGE:~0,8!_EDITED
    set EODNUM=!SAGE:~4,4!
    for /f "tokens=* delims= " %%A in (%%P) do (
        echo %EODNUM%
        set S=%%A

***This line is the problem***
        set S=!S:%T_DAY%=%EODNUM%!

        echo.!S! >> %PATH%\TEST\!SAGE2!.csv   
    )
)
endlocal 
```

我期望这将获取 csv 文件的每一行并将其替换为自身，除了用变量 EODNUM 替换当前日期的字符串（它确实......只有变量在设置之前被扩展，所以没什么）...延迟扩展应该可以解决这个问题，但是我可以使用这行代码

```
set S=!S:%T_DAY%=!EODNUM!! 
```

因为我认为它太多了！对于 CMD 来说。

我错过了什么，还是有更好的方法来编码？（我不是任何类型的程序员，我编写的大部分代码都来自反复试验，并从其他脚本中“借用”，所以这可能是一种非常混乱的方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:26:28.217

将 的值传输`!EODNUM!`到 FOR 变量，然后使用您的 FOR 变量作为替换字符串。

```
 echo !EODNUM!
        set "S=%%A"
        for /f "delims=" %%E in ("!EODNUM!") do set "S=!S:%T_DAY%=%%E!"
        echo.!S!>> %PATH%\TEST\!SAGE2!.csv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:38:01.957

通过解释...

CMD 一次读取（并执行 env var 替换）、解析和执行一个顶级命令。

在您的示例中，它一次读取“for /f ...”命令，解析并执行 %var% 替换。

一旦完成，它就会执行 for 循环，执行延迟的 !var! 替代。

不幸的是，！var！替换不是做替换，直到没有离开。这使得执行替换到 !var:src=dst! 变得困难（如在回答者的解决方案中）价值。

您将需要一种*在执行期间*可以获得保证替换的方法。这需要一个 for 语句，或者涉及读取和 %var% 再次替换的东西。一种方法是使用 CALL :LABEL 表单，您可以在其中调用 .cmd 文件中的特定标签，并让此部分执行您想要的操作：

```
...
call :GenS
... 
```

进而：

```
:GenS
set S=!S:%T_DAY%=%EODNUM%!
goto :eof 
```

顺便说一句：我很困惑你没有注意到 ECHO %EODNUM% 没有在循环中工作，因为在读取 for 循环期间所有 %var% 替换都进行了。

# .net - 构建具有用户控件的项目时，Visual Studio 冻结

> ID：13938283
> 
> 赞同：0
> 
> 时间：2012-12-18T17:23:30.443
> 
> 标签：.net, visual-studio-2008, mobile

我继承了包含多个用户控件的 Windows Mobile 解决方案，并且在 Visual Studio 2008 中构建解决方案时遇到问题。当构建过程到达构建输出中的“Target Buildasmmeta：”时（我理解这意味着它正在工作在项目的用户控件部分上），Visual Studio UI 冻结。构建继续进行，最终它将完成并继续，但是 UI 变白并且 devenv.exe 进程在资源监视器中变红。此解决方案的构建时间非常长，一个项目包含 4 个用户控件大约需要 8 分钟，而整个解决方案的完整构建需要将近一个小时。

我注意到在构建项目时，Visual Studio 只使用一个核心，在构建期间它处于 100%。此外，当 Visual Studio 处于此锁定状态时，大多数其他 Microsoft 应用程序将无法运行，并显示一条消息，说明它们正在等待 Visual Studio 进程完成。

我已经设置了一个脚本来使用具有多个内核的 MSBuild 构建我的项目，这似乎完全避开了这些问题，但是在使用直接 MSBuild 调用来构建解决方案时，我在部署和调试方面遇到了一些问题。对于整个解决方案，使用此方法的构建时间通常为 4-5 分钟（相比之下，使用单个内核需要一个小时）。

系统规格为八核 AMD 3.6 ghz（64 位）处理器、32 GB 内存、（软件）RAID 1 中的 7200 rpm 硬盘驱动器、Windows 7 Ultimate 和带有 SP1 的 Visual Studio 2008。该解决方案由 11 个智能设备项目组成，并用 Visual Basic 编写。

最后，我确信代码中存在一些效率问题，但是这些构建时间似乎过长了，我正在尝试尽可能减少它们。感谢您对此问题的任何见解。

# java - Andengine LWP 屏幕方向问题

> ID：13938284
> 
> 赞同：1
> 
> 时间：2012-12-18T17:23:33.057
> 
> 标签：java, android, andengine, live-wallpaper

我真的被屏幕方向逻辑困住了。

这是我的代码：

```
@Override
public EngineOptions onCreateEngineOptions() {
        this.cameraWidth = getResources().getDisplayMetrics().widthPixels;
        this.cameraHeight = getResources().getDisplayMetrics().heightPixels;
        this.camera = CameraFactory.createPixelPerfectCamera(this, this.cameraWidth / 2.0F, this.cameraHeight / 2.0F);
        this.camera.setResizeOnSurfaceSizeChanged(true);
        this.dpi = getResources().getDisplayMetrics().densityDpi;

        Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
        int rotation = display.getRotation();
        if (rotation == Surface.ROTATION_90 || rotation == Surface.ROTATION_270) {
                screenOrientation = ScreenOrientation.LANDSCAPE_SENSOR;
        } else {
                screenOrientation = ScreenOrientation.PORTRAIT_SENSOR;
        }

        EngineOptions engineOptions = new EngineOptions(true,screenOrientation, new FillResolutionPolicy(), this.camera);
        engineOptions.getAudioOptions().setNeedsSound(true);
        return engineOptions;
}

@Override
public void onSurfaceChanged(final GLState pGLState, final int pWidth, final int pHeight) {
        super.onSurfaceChanged(pGLState, pWidth, pHeight);

        Log.i(TAG, "onSurfaceChanged " + "w: " + this.camera.getSurfaceWidth() + " h: " + this.camera.getSurfaceHeight());

        this.cameraWidth = this.camera.getSurfaceWidth();
        this.cameraHeight = this.camera.getSurfaceHeight();
        this.camera.setCenter(this.cameraWidth / 2.0F, this.cameraHeight / 2.0F);

} 
```

当我在 AVD 3.7 FWVGA 滑块 480x854 上尝试我的 LWP 时，一切正常，**但仅在 LWP 预览模式下**。例如，当从横向 LWP 预览模式中按下“设置壁纸”按钮时，我的 LWP 移动到桌面的另一半时，我得到了半个黑屏。

另外，我注意到当我们从 Previos 模式返回到桌面时，不会调用 onCreateEngineOptions 方法。

此外，每次我在 LWP 中正确接收到 onSurfaceChanged 事件时。另外，我已经配置并且可以处理屏幕方向更改事件......但是如何将它应用于我的逻辑？

```
public BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent myIntent) {

        if (myIntent.getAction().equals(BROADCAST_CONFIGURATION_CHANGED)) {

            Log.d(TAG, "received->" + BROADCAST_CONFIGURATION_CHANGED);

            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
                Log.i(TAG, "LANDSCAPE_SENSOR");
            } else {
                Log.i(TAG, "PORTRAIT_SENSOR");
            }
        }
    }
} 
```

如何正确设置 LWP 以处理纵向和横向两种模式？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:08:39.370

我在游戏中遇到了类似的问题，我在清单文件中的每个活动中修复了这一行的问题：

```
 <activity
        ....
        android:configChanges="orientation"
        ... /> 
```

并使用以下方法：

```
 @Override
public void onResumeGame() {
super.onResumeGame();

}

@Override
public void onPauseGame() {
super.onPauseGame();

} 
```

希望能解决你的问题，最好的问候。

# sharepoint - 找不到引用 BCS 模型引用的合同 WCF 服务的默认终结点元素

> ID：13938285
> 
> 赞同：1
> 
> 时间：2012-12-18T17:23:39.993
> 
> 标签：sharepoint, sharepoint-2010, sharepoint2010-bcs

我已经设置了一个 WCF 服务，它使用一个方法返回一个 System.IO.Stream，我的 BCS 模型将其引用为 StreamAccessor。当我通过 BCS 配置文件页面显示文件时，一切正常，单击“单击此处下载”。

当我尝试使用 SharePoint Search 对 BCS 应用程序进行爬网时出现问题。当 SharePoint 对 BCS LOB 进行爬网时，它会为每个文件引发以下警告；

> 此项目包括多个部分和/或可能有附件。并非所有这些部分都被编入索引。它们可能无效或故意跳过（例如图像）。远程服务器在索引这些部分时也可能没有响应。（在 ServiceModel 客户端配置部分中找不到引用合同“RH.Wcf.IEmailFilerGetService”的默认端点元素。这可能是因为找不到您的应用程序的配置文件，或者因为在客户元素。）

我在 web.config 文件中确实为 Central Admin 和运行主站点的 Web 应用程序提供了正确的设置和绑定。

我什至尝试在 GetMessage StreamAccessor 的 WCF 设置中硬编码；

```
SecurityBindingElement securityElement = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
HttpsTransportBindingElement httpsTransport = new HttpsTransportBindingElement();
httpsTransport.AuthenticationScheme = System.Net.AuthenticationSchemes.Ntlm;

BasicHttpBinding binding = new BasicHttpBinding(BasicHttpSecurityMode.None);
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;
binding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.Ntlm;
binding.CloseTimeout = new TimeSpan(00, 05, 00);
binding.OpenTimeout = new TimeSpan(00, 05, 00);
binding.ReceiveTimeout = new TimeSpan(00, 05, 00);
binding.SendTimeout = new TimeSpan(00, 05, 00);
binding.TextEncoding = System.Text.Encoding.UTF8;
binding.MaxReceivedMessageSize = int.MaxValue;
binding.MaxBufferSize = int.MaxValue;
binding.MessageEncoding = WSMessageEncoding.Mtom;
binding.AllowCookies = false;
binding.TransferMode = TransferMode.Buffered;
binding.BypassProxyOnLocal = true;
binding.Security.Mode = BasicHttpSecurityMode.None;
binding.ReaderQuotas.MaxArrayLength = int.MaxValue;
binding.ReaderQuotas.MaxBytesPerRead = int.MaxValue;
binding.ReaderQuotas.MaxDepth = int.MaxValue;
binding.ReaderQuotas.MaxNameTableCharCount = int.MaxValue;
binding.ReaderQuotas.MaxStringContentLength = int.MaxValue;

//binding.GetType().GetProperty("ReaderQuotas").SetValue(binding, XmlDictionaryReaderQuotas.Max, null);

EndpointAddress endPoint = new EndpointAddress("http://MYSERVER:1234/EmailFilerGetService.svc");
ChannelFactory<IEmailFilerGetServiceChannel> chan = new ChannelFactory<IEmailFilerGetServiceChannel>(binding, endPoint);

IEmailFilerGetServiceChannel wc = chan.CreateChannel();

RHEmailDownloadStreamArg arg = new RHEmailDownloadStreamArg(emailId);
RHEmailDownloadStream str = wc.GetSingleMsg(arg); 
```

我只是无法弄清楚这里发生了什么，这太疯狂了。

我正在运行的环境；

SharePoint 2010 版本 14.0.6029.1000

WCF 服务是 .NET Framework 4.0

BCS 服务根据 SharePoint 的要求使用 .NET Framework 3.5 运行。

请帮忙！

# cassandra - Cassandra / CQL3 列族可以有复合分区键吗？

> ID：13938288
> 
> 赞同：11
> 
> 时间：2012-12-18T17:23:54.417
> 
> 标签：cassandra

CQL 3 允许使用如下定义的“复合”主键：

```
CREATE TABLE timeline (
    user_id varchar,
    tweet_id uuid,
    author varchar,
    body varchar,
    PRIMARY KEY (user_id, tweet_id)
); 
```

使用这样的模式，分区键（存储引擎行键）将由`user_id`值组成，而`tweet_id`将复合到列名中。相反，我正在寻找的是分区键（存储引擎行键）具有像 user_id:tweet_id 这样的复合值。显然我可以在我的应用程序中做类似的事情`key = user_id + ':' + tweet_id`，但是有没有办法让 CQL 3 为我做这件事？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T22:47:21.433

事实上，是的，你可以。此票证中添加了该功能：

[https://issues.apache.org/jira/browse/CASSANDRA-4179](https://issues.apache.org/jira/browse/CASSANDRA-4179)

你的格式是：

```
CREATE TABLE timeline (
    user_id varchar,
    tweet_id uuid,
    author varchar,
    body varchar,
    PRIMARY KEY ((user_id, tweet_id))
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T20:18:04.330

直到 1.2 出来，答案是否定的。分区键将始终是第一个组件。正如您所说，这样做的方法是自己创建复合键。你不应该回避这个，因为它实际上很常见。

# css - 带有选框元素的 div 的 css 宽度的一些问题

> ID：13938293
> 
> 赞同：0
> 
> 时间：2012-12-18T17:24:18.587
> 
> 标签：css

我有这样的CSS：

```
div.partnersheader{
    width:930px;
    height:27px;
    border-bottom:1px solid #030304;
    font-family:Bebas;
    color:#ffffff;
    font-size:15pt;
    padding:3px 0px 0px 10px;
}

div.partnerscontent{
    width:100%;
    height:127px;
    color:#ffffff;
    font-size:15pt;
    padding:3px 0px 0px 10px;
    overflow:hidden;
}

div.partnerscontent ul{
    list-style:none; margin:0px; padding:0px; overflow:hidden; width:100%;
}

div.partnerscontent li{
    float:left; margin-left:20px;
}

div.partnerscontent li img{
    filter: url(../sources/grayscale.svg#grayscale); /* Firefox 3.5+ */
    filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(1); /* Google Chrome & Safari 6+ */
     -moz-transition:all 0.5s linear;
    -webkit-transition: all 0.5s linear;
    transition: all 0.5s linear;
}

div.partnerscontent li img:hover{
    filter: none;
    -webkit-filter: grayscale(0);
} 
```

html是

```
 <div class="partners">
            <div class="partnersheader">
                Partnerzy
            </div>
            <div class="partnerscontent">
                <ul>
                <marquee onMouseOver="this.stop()" onMouseOut="this.start()">

<li>
<a href="http://www.cs-kontener.pl" target=_blank><img src="images/ck.png" border="0"  /></a>
</li>

<li>
<a href="https://www.facebook.com/Zajeb.Basem?fref=ts" target=_blank><img src="images/zb.png" border="0"  /></a>
</li>

<li>
<a href="https://www.facebook.com/pompeczkamp3" target=_blank><img src="images/pmp3.png" /></a>
</li>

<li>
<a href="http://www.facebook.com/PozitiveSound" target=_blank><img src="images/pozitiw.png" /></a>
</li>

<li>
<a href="http://www.club-sound.pl/" target=_blank><img src="images/clubsound.png" /></a>
</li>               </marquee>
                </ul>
            </div>
        </div> 
```

并且在合作伙伴内容中放置了具有选框效果的图像，我只能看到 3 个图像，其余的转到该 3 下的行，但我希望它们都在 1 行中，例如：

1 2 3 4 5 6 7

现在它就像

1 2 3

4 5 6

7 8 9

我认为它有宽度，但我找不到出路，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:28:06.800

您需要将`LI`s 的宽度相加，然后`UL`相应地设置宽度（以像素为单位。100% 不是答案）。`overflow:hidden`如果您的列表比容器宽，则需要有 UL容器。

这是我最好的猜测，因为您还没有显示您的 HTML。

# html - css3背景位置变化没有翻转？

> ID：13938296
> 
> 赞同：1
> 
> 时间：2012-12-18T17:24:26.620
> 
> 标签：html, css, css-transitions, transmission

有没有办法使用 CSS3 过渡来交叉淡化背景图像。

基本上需要这个视频中的“twitter悬停” [http://youtu.be/uCcQHXeiPTY](http://youtu.be/uCcQHXeiPTY)

例如：不透明`0.5`喜欢`1`那个

我是 CSS3 的新手 :(

HTML 和 CSS

```
<div id="social-contacts">
    <ul>
        <li id="fb"><a href=""></a></li>
    </ul>
</div>​

#social-contacts{
    width: 375px;
    float: left;
    margin-left: 50px;
    margin-top: 100px;
}
#social-contacts li{
    float: left;
    list-style: none;
}
#social-contacts li a{
    display: block;
}
#fb a{
    background: url("http://athimannil.com/page/images/social-icons.png") 0 0;
    width: 45px;
    height: 45px;

    opacity: 0.8;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    -o-transition: all 0.5s;
    -ms-transition: all 0.5s;
    transition: all 0.5s;
}
#fb a:hover{
    background-position: 0 47px;
    opacity: 1;
}​ 
```

演示：- [http://jsfiddle.net/sweetmaanu/BVLkX/](http://jsfiddle.net/sweetmaanu/BVLkX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:26:22.130

如果我理解你是正确的，你只是想转换 opacity 属性而不是背景属性，它会产生滚动效果？为此，我们需要指定应该转换的属性。

在您的情况下，您已指定应将过渡效果应用于`all`属性，即`background-position: 0 47px;`和`opacity: 1;`。

因此，您唯一需要做的就是更改`transition: all 0.5s;`为`transition: opacity 0.5s;`.

这是一个[演示](http://jsfiddle.net/BVLkX/14/)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:21:57.340

你的意思是这样吗？我使用`@keyframes`它制作了它，它将为元素设置动画而不会翻转

[**演示**](http://jsfiddle.net/wX3Wt/)

您的示例的[**演示**](http://jsfiddle.net/BVLkX/2/)

[](http://jsfiddle.net/BVLkX/3/)**无限动画[**示例**](http://jsfiddle.net/BVLkX/3/)**

 **HTML

```
<img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /> 
```

CSS

```
img {
   animation:animate_logo 5s;
   -moz-animation:animate_logo 5s; /* Firefox */
   -webkit-animation:animate_logo 5s; /* Safari and Chrome */
   -o-animation:animate_logo 5s; /* Opera */
}

@keyframes animate_logo {
   from {opacity: .5;}
   to {opacity: 1;}
}

@-moz-keyframes animate_logo /* Firefox */ {
   from {opacity: .5;}
   to {opacity: 1;}
}

@-webkit-keyframes animate_logo /* Safari and Chrome */ {
   from {opacity: .5;}
   to {opacity: 1;}
}

@-o-keyframes animate_logo /* Opera */ {
   from {opacity: .5;}
   to {opacity: 1;}
} 
```

关于[CSS3 关键帧的文章](http://coding.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/)**

# c++ - 即使指定了标题，g ++也找不到

> ID：13938298
> 
> 赞同：5
> 
> 时间：2012-12-18T17:24:40.500
> 
> 标签：c++, g++, makefile

所以基本上我有一些非常简单的代码，其中包括`<BigIntegerLibrary.hh>`驻留在`/Users/wen/Projects/include/bigint`. 我正在用这个编译：

`g++ main.cpp -o Main -I/Users/wen/Projects/include/bigint`

但它报告了一个致命错误，它无法找到该文件。我做对了吗？谢谢！

`main.cpp:4:10: fatal error: 'BigIntegerLibrary.hh' file not found`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:29:00.597

尝试

```
#include "BigIntegerLibrary.hh" 
```

如果您使用尖括号 ( ) 指定*#included*`#include <includeFile.h>`文件，编译器将尝试在预定义的位置找到它，而如果您使用`#include "includeFile"`编译器，则首先尝试使用`-I`编译器选项指定的路径。

编译器`-I`选项不能用于指定`<...>`文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:29:55.380

如果路径正确`g++`应该看到文件。

如果在 include 指令中使用绝对路径，则应更改引号：

```
#include "/Users/wen/Projects/include/bigint/BigIntegerLibrary.hh" 
```

# ruby-on-rails-3 - 如何摆脱与 favicon.ico 相关的路由错误

> ID：13938303
> 
> 赞同：6
> 
> 时间：2012-12-18T17:24:56.373
> 
> 标签：ruby-on-rails-3, favicon

关于如何摆脱这个错误的任何想法。

2012-12-18 11:20:59 +0000 开始为 132.175.48.49 获取“/favicon.ico”

```
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:52:43.583

您可能有这样一行（很可能在您的 application.html.erb 或其他模板中）：

```
<link href="/favicon.ico" rel="shortcut icon" /> 
```

如果你这样做，只需将其更改为：

```
<link href="/assets/favicon.ico" rel="shortcut icon" /> 
```

# macos - 保持 NSOutlineView 的焦点或第一响应者状态

> ID：13938305
> 
> 赞同：0
> 
> 时间：2012-12-18T17:25:13.330
> 
> 标签：macos, nsoutlineview

我有一个 NSOutline 的子类。当它失去焦点时，选定行的显示三角形会从其倒置模板形式（白色）变回黑色。我不希望这种情况发生：我希望所选行的外观保持不变，就像在 XCode 或 Mail 中一样。

我尝试在 NSOutlineView 子类以及我的自定义 rowViews 中拦截基于 firstResponder 的消息，但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:03:20.683

在我的 NSTableRowView 子类中，执行以下工作：

```
- (BOOL)isEmphasized {

    return YES;
} 
```

# c# - c# Entity Framework sqlite(spatialite)空间日期

> ID：13938313
> 
> 赞同：1
> 
> 时间：2012-12-18T17:25:33.917
> 
> 标签：c#, entity-framework, sqlite, spatialite

是否可以使用实体框架对 geom 数据类型执行 sqlite intersect 查询？

我在下面的 SQLiteConnection 上取得了成功（加载**'libspatialite-4.dll'**之后）

```
string query = @"SELECT * FROM Spatial_Table WHERE intersects(Geom, GeomFromText('LINESTRING (-69.929201602936 23.577301964831, -20.358889102936 37.730080532218, 4.6020483970643 55.586555530742)', 4326)) = 1" 
```

我已经成功使用 EF 从我的 SQLite 数据库中查询非空间数据。

这种查询可能吗？我可以加载dll吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T00:41:29.327

我认识的派对有点晚了（我只是发现了这一点），但公认的答案并不完全正确。

事实是 EF 中没有 Geometry 和/或 Geography 类型来支持这一点，但有一种方法可以绕过它。

首先开...

您可以在数据库上下文中使用 ExecuteSqlCommand 加载扩展 DLL，如下所示：

```
_ctx.Database.ExecuteSqlCommand(@"SELECT load_extension('libspatialite-4.dll')"); 
```

其次，如果您将几何返回为二进制而不是文本，则可以将数据从数据库中作为常规返回

```
byte[] 
```

数据类型。在您熟悉 NuGet 并安装“.NET 拓扑套件”（简称 NTS）之前，这似乎有点适得其反

您可以将这些二进制数组输入 NTS，它会构造并返回代表您的几何图形的第一类 .NET 对象。NTS 基本上包含 Spatialite 的所有内容，但在 C# 程序集中。事实上，我什至可以说，使用 NTS，您实际上不需要空间数据，您只需在数据库中保存和检索二进制数组，然后纯粹在您自己的代码中对它们进行操作。

这样做你唯一失去的就是能够执行 SQL 之类的选择语句来从数据库中搜索几何图形。

然而不要害怕......

为此，您可以将结果作为常规地理文本对象返回到代码中，例如

```
POINT(1 2) 
```

或者

```
LINE(1 2,3 4,5 6,7 8) 
```

您需要做的就是确保您执行的任何 SQL 查询的结果通过 Spatialites“AsText”函数传递结果来创建它们的输出。

所以用你的例子

```
string query = @"SELECT col1,col2,col3,AsText(GeometryColumn) FROM Spatial_Table WHERE intersects(Geom, GeomFromText('LINESTRING (-69.929201602936 23.577301964831, -20.358889102936 37.730080532218, 4.6020483970643 55.586555530742)', 4326)) = 1" 
```

这将产生类似的东西：

```
1,2,3,POINT(1 2)
4,5,6,POINT(3 4)
1,2,3,POINT(1 2)
4,5,6,POINT(3 4) 
```

您可以将其输入到普通的 .NET 对象中，如下所示：

```
public class myclass
{
  public int col1 { get; set; }
  public int col2 { get; set; }
  public int col3 { get; set; }
  public string GeometryColumn { get; set; }
} 
```

再一次，如果您随后使用 NTS，NTS 可以解析文本字符串中从 Spatialite 传递的任何内容并将其转换为图形对象。

我的公司在我们的旗舰产品之一中非常可靠地使用了这些技术，我们从 EF 4.3 开始就这样做了。

ExecuteSqlCommand 刚刚出现在 EF5 中，但在之前的版本中还有其他类似的执行任意 SQL 语句的方式。

您还会发现在您的实体表上有一个名为 SqlQuery 的新函数（我相信是在 EF5 中添加的），它允许您在给定表上运行数据读取器样式查询并利用您的强类型模型来获取数据背部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T19:01:40.827

很不幸的是，不行。

[System.Data.SQLite 提供程序](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)和devArt[的 dotConnect for SQLite 提供](http://www.devart.com/dotconnect/sqlite/)程序目前都不支持空间（几何、地理）类型。

# amazon-web-services - 我可以在 boto 中按 instance_id 过滤卷吗？

> ID：13938316
> 
> 赞同：4
> 
> 时间：2012-12-18T17:25:38.353
> 
> 标签：amazon-web-services, boto

我正在尝试使用 Python 的“boto”模块将卷从一个实例复制到另一个实例。该过程的一部分是识别附加到实例的卷。有几种方法可以解决这个问题。例如，我可以使用列表推导：

```
from boto.ec2 import connect_to_region
conn = connect_to_region('us-east-1')
all_volumes = conn.get_all_volumes()
instance_volumes = [v for v in all_volumes if v.attach_data.instance_id = "<instanceID>"] 
```

这行得通，并且对于我的目的来说足够好。尽管如此，我很好奇是否有办法使用`get_all_volumes()`' 的[内置过滤](http://boto.cloudhackers.com/en/latest/ref/ec2.html#boto.ec2.connection.EC2Connection.get_all_volumes)来获得相同的结果。例如，如果我正在搜索“名称”标签与某个模式匹配的实例，我可以这样做：

```
filters = {'tag:Name': '<name>'}
reservations = self.conn.get_all_instances(filters=filters)
instances = [i for r in reservations for i in r.instances] 
```

`get_all_volumes()`有一个类似的过滤器参数，但我不能让它工作`boto.ec2.volume.Volume.attach_data.instance_id`。我是否遗漏了一些明显的东西，或者无法通过卷上的 instance_id 过滤？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T17:32:56.670

是的，您可以使用服务器端过滤器将 DescribeVolumes 的结果限制为仅附加到特定实例 ID 的卷。

```
from boto.ec2 import connect_to_region
conn = connect_to_region('us-east-1')

volumes = conn.get_all_volumes(filters={'attachment.instance-id': 'i-11111111'}) 
```

会将卷限制为附加到 instance 的卷`i-11111111`。您还可以提供实例 ID 列表作为字典中的值。

# pdf - NSInternalInconsistencyException PDF 查看器

> ID：13938321
> 
> 赞同：1
> 
> 时间：2012-12-18T17:25:59.643
> 
> 标签：pdf, viewer

我从 Julius Oklamcak 复制了一些不错的 pdf 查看代码。[https://github.com/vfr/Viewer](https://github.com/vfr/Viewer) 当我不修改它时，它在他的应用程序中效果很好，但是当我将它放在我自己的应用程序中时它会变得一团糟。我删除了打印、书签和平铺视图按钮，仅供参考。

DONE 按钮不起作用。

这是我收到的错误：

```
2012-12-18 10:01:45.857 TeacherTableView4[1147:907] *** Assertion failure in -[ReaderViewController tappedInToolbar:doneButton:], (...my path to)/TeacherTableView4/ReaderViewController.m:844
2012-12-18 10:01:45.859 TeacherTableView4[1147:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Delegate must respond to -dismissReaderViewController:'
*** First throw call stack:
(0x371b52a3 0x3bd9497f 0x371b515d 0x3a2682af 0x40967 0x3c9f1 0x3676f0a5 0x3676f057 0x3676f035 0x3676e8eb 0x3676ede1 0x366975f1 0x36684801 0x3668411b 0x34a4f5a3 0x34a4f1d3 0x3718a173 0x3718a117 0x37188f99 0x370fbebd 0x370fbd49 0x34a4e2eb 0x366d82f9 0x414bd 0x36557b20)
libc++abi.dylib: terminate called throwing an exception 
```

这是代码：

```
- (void)tappedInToolbar:(ReaderMainToolbar *)toolbar doneButton:(UIButton *)button
{
#ifdef DEBUGX
    NSLog(@"%s", __FUNCTION__);
#endif

#if (READER_STANDALONE == FALSE) // Option

[document saveReaderDocument]; // Save any ReaderDocument object changes

[[ReaderThumbQueue sharedInstance] cancelOperationsWithGUID:document.guid];

[[ReaderThumbCache sharedInstance] removeAllObjects]; // Empty the thumb cache

//COMMENTED OUT BY ME
//if (printInteraction != nil) [printInteraction dismissAnimated:NO]; // Dismiss

if ([delegate respondsToSelector:@selector(dismissReaderViewController:)] == YES)
{
    [delegate dismissReaderViewController:self]; // Dismiss the ReaderViewController
}
else // We have a "Delegate must respond to -dismissReaderViewController: error"
{
    NSAssert(NO, @"Delegate must respond to -dismissReaderViewController:");
}

#endif // end of READER_STANDALONE Option
} 
```

我真的很感谢这些家伙的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:24:15.733

我使用此 PDF 查看代码遇到了同样的问题。我只是添加了这个方法

```
- (void)dismissReaderViewController:(ReaderViewController *) viewController 
{
[self dismissModalViewControllerAnimated:YES];
} 
```

到我调用`- (IBAction)didClickOpen`from 的 .m 文件。这主要是因为在 ReaderViewController.m 中，委托希望看到您的实现文件中声明的dismissReaderViewController。否则，它会抛出你得到的错误。

注意：`[self dismissViewControllerAnimated:YES completion:nil];`用于 iOS6 或更高版本，因为不推荐使用 dismissModalViewControllerAnimated:YES :-)

# iphone - 在委托上设置的事件

> ID：13938322
> 
> 赞同：0
> 
> 时间：2012-12-18T17:26:12.100
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我想在这里理解一些关于委托和回调的概念。基本上我正在尝试制作一个基于邮政编码的http请求。因此，在发出 http-request 之前，我会调用 location-manager 并获取邮政编码，但是，在此期间，我必须等待异步完成该任务并获得反馈。这里的问题是，我从 location-manager 设置的委托与 http-request 类没有链接。所以，我试图了解如何将信息从委托传递回 http-request。我正在研究区块，但无论如何，您是否可以等待代表的回应？或者也可以在异步任务中设置为 BOOL 属性，完成后触发请求。除了 GCD 之外，我没有尝试过很多块，所以仍然试图解决这个问题。

我欢迎在这里提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:04:35.347

在委托中，您将拥有一个符合两种协议的控制器（可能是您的视图控制器），即位置管理器的协议和由 http rquest 控制器定义的协议。

视图控制器创建这两个对象并将自己指定为两者的委托。
它告诉位置管理器获取邮政编码。管理器完成后，它会在委托上发送适当的委托方法`[self.delegate didFindZipCode:code onLocationManager: self]`。由于委托是视图控制器，它实现了这个方法

```
-(void)didFindZipCode:(NSString *)code onLocationManager:(MyLocationManager *)manager 
{
    [self.httpRequestController sendZipCode:code];
} 
```

一旦所需数据可用，请求控制器将以类似的方式通知视图控制器。

* * *

实际上块会以类似的方式处理这个问题——只是没有设置委托，应该调用它，但是传递了一个代码，一旦发生事情就会调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T20:01:31.570

这是一个草图 - （忽略错误条件和位置数据缓存问题）。这都可以在 viewController 中进行。获取邮政编码有一个块，但如果您愿意，可以通过代表完成其余部分。

```
//initialise locationManager once (eg in viewDidLoad)
- (void) initialiseLocationManager
{
    CLLocationManager* locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyKilometer];
    [locationManager setDistanceFilter:500];
    self.locationManager = locationManager;
}

//[self startLocating] whenever you want to initiate another http-request
- (void) startLocating
{
    [self.locationManager startUpdatingLocation];
}

//locationManager delegate method
//this will get triggered after [self startLocating] 
//when a location result is returned
- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations
{
    CLLocation* location = [locations lastObject];
    CLGeocoder* geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:location
                   completionHandler:^(NSArray *placemarks, NSError *error){
                       CLPlacemark* placemark = [placemarks objectAtIndex:0];
                       NSString* zip = [placemark postalCode];

        /*
        implement your http-request code here using the zip string
        there are various ways to do this 
                    but two ways your result will arrive...

        1 - as a delegate callback
        so you would implement the relevant delegate method 
                    (in this same viewController) to use the result

        2 - as a completion block 
        so your result-using method would be that block
        */

    }];
    [self.locationManager stopUpdatingLocation];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:39:24.917

有一个很棒的库，叫做[AFNetworking](https://github.com/AFNetworking/AFNetworking)，它很容易实现。

它使用块，这极大地简化了类之间的数据通信（取消了委托）。

# java - 带有循环和阅读列表的 Java

> ID：13938325
> 
> 赞同：-6
> 
> 时间：2012-12-18T17:26:24.937
> 
> 标签：java, multithreading, loops, time

我不是专家，只是初学者。所以我恳请你为我写一些代码。

我有四个 ArrayLists ->`error_list_A, list_A, error_list_B, list_B`在 java 中。有一个独立运行的单独程序将对象添加到这些列表中。

我需要编写一个单独的程序来读取它们 1 分钟或直到它们为空，然后转到下一个。该程序应始终处于运行模式并侦听这些列表并处理它们。

就像是..

1.  读取`error_list_A`并处理其元素。

    如果没有元素，则转到`list_A`

    如果元素然后读取元素并删除它们，直到所有元素都被处理或达到 1 分钟的时间限制，然后转到`list_A`

2.  读取`list_A`并处理其元素。

    如果没有元素，则转到`error_list_B`

    如果元素然后读取元素并删除它们，直到所有元素都被处理或达到 1 分钟的时间限制，然后转到`error_list_B`

3.  读取`error_list_B`并处理其元素。

    如果没有元素，则转到`list_B`

    如果元素然后读取元素并删除它们，直到所有元素都被处理或达到 1 分钟的时间限制，然后转到`list_B`

4.  读取`list_B`并处理其元素。

    如果没有元素则转到`error_list_A`（循环返回以查看是否有新元素`error_list_A`）

    如果元素然后读取元素并删除它们，直到所有元素都被处理或达到 1 分钟的时间限制，然后转到`error_list_A`（循环返回以查看是否有新元素`error_list_A`）

5.  循环回到步骤 1。

你能发布一些示例代码吗？

我知道如何阅读和处理它们，所以你可以忽略那部分。只需要在列表之间切换并保持它们在循环中读取的代码。

它不是家庭作业。在实际程序中，我必须通过读取存储来自 Web 应用程序的错误的目录来实现这一点。所以请不要说你正在帮助做作业而忽略它。

我试过这样的东西..

```
public class ListReader {

    private static List<Object> list_A, error_list_A, list_B, error_list_B; // Initialize list by reading them.

    public static void main(String[] args) {
        while (true) {
            if (error_list_A != null && error_list_A.size() > 0) {
                processList(error_list_A);
            } else if (list_A != null && list_A.size() > 0) {
                processList(list_A);
            } else if (list_B != null && list_B.size() > 0) {
                processList(list_B);
            } else if (error_list_B != null && error_list_B.size() > 0) {
                processList(error_list_B);
            }
        }
    }

    private static void processList(List<Object> list){
        // Code for when empty or time limit reached then return
    }

} 
```

不过好像没什么意思。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:31:22.420

我建议您自己编写代码。只有这样，您才能学习语言。计算机科学中最困难的问题是为问题找到最佳算法。如果您手头有算法，实现起来很容易。

因此，请对算法进行编码，如果您在其中遇到一些错误或问题，请在此处发布。

更新

```
 if (error_list_A != null && error_list_A.size() > 0) {
                processList(error_list_A);
            }
if (list_A != null && list_A.size() > 0) {
                processList(list_A);
            }
if (list_B != null && list_B.size() > 0) {
                processList(list_B);
            }
if (error_list_B != null && error_list_B.size() > 0) {
                processList(error_list_B);
            } 
```

在 processList 函数中，您启动计时器，然后开始处理列表中的每个元素。在处理每个元素之前，检查计时器。如果超过 1 分钟，您可以从函数返回，否则继续。继续此操作直到到达列表末尾.如果时间还没有超过1分钟，返回。

# c# - 服务 500 异常响应

> ID：13938330
> 
> 赞同：1
> 
> 时间：2012-12-18T17:26:40.230
> 
> 标签：c#, web-services, soap

我正在调用返回 500 错误的 Web 服务：

```
using (var client = new PSGenericWebService.W_GENERICEMPLOYEEWS_PortTypeClient("GenericPort"))
{
    client.Endpoint.Behaviors.Add(new MessageBehavior("U", "P"));
    try
    {
        var response = client.GetEmployeeDataByDateRange();
        Console.WriteLine(response.Length);
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
    }
} 
```

我了解该错误与日期范围有关，因此我在这方面省略了一些代码。但是使用提琴手我得到以下响应：

> HTTP/1.1 500 内部服务器错误日期：2012 年 12 月 18 日星期二 17:15:04 GMT 内容长度：732 内容类型：text/xml；charset=UTF-8 X-Powered-By: Servlet/2.5 JSP/2.1

```
<?xml version="1.0"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Body>
    <SOAP-ENV:Fault>
        <faultcode>SOAP-ENV:Server</faultcode>
        <faultstring>null</faultstring>
        <detail>
            <IBResponse xmlns="" type="error">
                <DefaultTitle>Integration Broker Response</DefaultTitle>
                <StatusCode>20</StatusCode>
                <MessageID>74</MessageID>
                <DefaultMessage>
                    <![CDATA[From date (2012-11-17) and To date (2012-12-18) Range cannot be greater than 30 days. (27000,74)]]>
                </DefaultMessage>
                <MessageParameters>
                    <Parameter>
                        <![CDATA[2012-11-17]]>
                    </Parameter>
                    <Parameter>
                        <![CDATA[2012-12-18]]>
                    </Parameter>
                    <Parameter>
                        <![CDATA[30]]>
                    </Parameter>
                </MessageParameters>
            </IBResponse>
        </detail>
    </SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

返回的异常只是列为空。我想从返回的 XML 中获取 DefaultMessage。所以我不是在寻找对我的代码的修复，我正在研究如何解析返回的响应以获取我需要的消息。谢谢你。

# c - 已在 a.obj 中定义的变量

> ID：13938335
> 
> 赞同：0
> 
> 时间：2012-12-18T17:27:03.853
> 
> 标签：c, nmake

> **可能重复：**
> [是否可以将#Include 纳入“钻石遗产”结构？](https://stackoverflow.com/questions/13937523/is-it-possible-to-include-in-a-diamond-heritage-stracture)

我正在构建一些看起来像这样的程序：

```
"a.c" #includes "a.h" and #includes "b.h"
"b.c" #includes "b.h" 
```

假设我只在“bh”中声明一个名为“var”的变量

在使用“nmake”在“cmd”上编译它时，我收到以下错误：

> b.obj：错误 LNK2005：var 已在 a.obj 中定义

但是我没有在ac或ah上定义它，仅在bh上

什么会导致这种情况？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:38:59.813

> 但是我没有在ac或ah上定义它，仅在bh上

这不是它的工作原理。所有包含的头文件中的所有代码都由预处理器放在一起并传递给编译器，然后编译器将其编译成目标文件。该代码称为“翻译单元”。如果在另一个翻译单元中定义了相同的变量，它也将出现在生成的目标文件中。然后，当您将这些目标文件链接在一起时，两者都将定义相同的变量，因此链接器将抱怨重复符号。

你应该做的是在一个 *.c 文件中定义变量，并且只`extern`在 *.h 文件中声明它。这样，其他翻译单元将知道该变量，但不会尝试自己定义它。它只会在包含实际定义它的 *.c 文件的翻译单元中定义。

# hive - 在线程“main”java.lang.NoSuchFieldError 中运行 Hive-0.9.0 异常时出错：类型

> ID：13938337
> 
> 赞同：4
> 
> 时间：2012-12-18T17:27:13.623
> 
> 标签：hive

真的很抱歉这个愚蠢的问题，但很难找到答案。我正在尝试在我的 3 节点 Hadoop 集群上启动 Hive，HDFS 和 PIG、Hbase 一样运行良好，但对于我来说，我无法让 Hive 正常运行。

**这是类路径输出 >**

```
:/home/hduser/hive-0.9.0/conf:/home/hduser/hive-0.9.0/lib/antlr-runtime-3.0.1.jar:/home/hduser/hive-0.9.0/lib/commons-cli-1.2.jar:/home/hduser/hive-0.9.0/lib/commons-codec-1.3.jar:/home/hduser/hive-0.9.0/lib/commons-collections-3.2.1.jar:/home/hduser/hive-0.9.0/lib/commons-dbcp-1.4.jar:/home/hduser/hive-0.9.0/lib/commons-lang-2.4.jar:/home/hduser/hive-0.9.0/lib/commons-logging-1.0.4.jar:/home/hduser/hive-0.9.0/lib/commons-logging-api-1.0.4.jar:/home/hduser/hive-0.9.0/lib/commons-pool-1.5.4.jar:/home/hduser/hive-0.9.0/lib/datanucleus-connectionpool-2.0.3.jar:/home/hduser/hive-0.9.0/lib/datanucleus-core-2.0.3.jar:/home/hduser/hive-0.9.0/lib/datanucleus-enhancer-2.0.3.jar:/home/hduser/hive-0.9.0/lib/datanucleus-rdbms-2.0.3.jar:/home/hduser/hive-0.9.0/lib/derby-10.4.2.0.jar:/home/hduser/hive-0.9.0/lib/guava-r09.jar:/home/hduser/hive-0.9.0/lib/hadoop-0.20.2-core.jar:/home/hduser/hive-0.9.0/lib/hbase-0.92.0.jar:/home/hduser/hive-0.9.0/lib/hbase-0.92.0-tests.jar:/home/hduser/hive-0.9.0/lib/hive-builtins-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-cli-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-common-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-contrib-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive_contrib.jar:/home/hduser/hive-0.9.0/lib/hive-exec-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-hbase-handler-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-hwi-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-jdbc-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-metastore-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-pdk-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-serde-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-service-0.9.0.jar:/home/hduser/hive-0.9.0/lib/hive-shims-0.9.0.jar:/home/hduser/hive-0.9.0/lib/jackson-core-asl-1.8.8.jar:/home/hduser/hive-0.9.0/lib/jackson-jaxrs-1.8.8.jar:/home/hduser/hive-0.9.0/lib/jackson-mapper-asl-1.8.8.jar:/home/hduser/hive-0.9.0/lib/jackson-xc-1.8.8.jar:/home/hduser/hive-0.9.0/lib/JavaEWAH-0.3.2.jar:/home/hduser/hive-0.9.0/lib/jdo2-api-2.3-ec.jar:/home/hduser/hive-0.9.0/lib/jline-0.9.94.jar:/home/hduser/hive-0.9.0/lib/json-20090211.jar:/home/hduser/hive-0.9.0/lib/libfb303-0.7.0.jar:/home/hduser/hive-0.9.0/lib/libfb303.jar:/home/hduser/hive-0.9.0/lib/libthrift-0.7.0.jar:/home/hduser/hive-0.9.0/lib/libthrift.jar:/home/hduser/hive-0.9.0/lib/log4j-1.2.16.jar:/home/hduser/hive-0.9.0/lib/slf4j-api-1.6.1.jar:/home/hduser/hive-0.9.0/lib/slf4j-log4j12-1.6.1.jar:/home/hduser/hive-0.9.0/lib/stringtemplate-3.1-b1.jar:/home/hduser/hive-0.9.0/lib/zookeeper-3.4.3.jar:
Logging initialized using configuration in file:/home/hduser/hive-0.9.0/conf/hive-log4j.properties
Hive history file=/tmp/hduser/hive_job_log_hduser_201212181716_326152902.txt 
```

**然后从 HIVE 命令行运行：**

```
hive> CREATE TABLE pokes (foo INT, bar STRING); 
```

**但是我收到以下错误：**

```
Exception in thread "main" java.lang.NoSuchFieldError: type
        at org.apache.hadoop.hive.ql.parse.HiveLexer.mKW_CREATE(HiveLexer.java:1602)
        at org.apache.hadoop.hive.ql.parse.HiveLexer.mTokens(HiveLexer.java:6380)
        at org.antlr.runtime.Lexer.nextToken(Lexer.java:89)
        at org.antlr.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:133)
        at org.antlr.runtime.BufferedTokenStream.sync(BufferedTokenStream.java:127)
        at org.antlr.runtime.CommonTokenStream.setup(CommonTokenStream.java:132)
        at org.antlr.runtime.CommonTokenStream.LT(CommonTokenStream.java:91)
        at org.apache.hadoop.hive.ql.parse.HiveParser.statement(HiveParser.java:547)
        at org.apache.hadoop.hive.ql.parse.ParseDriver.parse(ParseDriver.java:438)
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:416)
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:336)
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:909)
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:258)
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:215)
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:406)
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:689)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:557)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T15:46:32.160

只需删除所有带有前缀 jackson* 的文件并从 hive 复制新版本的 jackson* 文件。

rm /opt/hadoop/hadoop/lib/jackson* cp /opt/hive/hive/lib/jackson* /opt/hadoop/hadoop/lib

我是这样做的，而且效果很好！

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:54:06.587

确保你的类路径中没有任何其他 antlr-*.jar，除了 HIVE_HOME/lib 文件夹中的那个。如果还是不行，从 antlr 的网站下载最新版本，放到 HIVE_HOME/lib 文件夹中试试看。高温高压

# sql - 存储过程临时表导致超时错误

> ID：13938344
> 
> 赞同：0
> 
> 时间：2012-12-18T17:27:50.603
> 
> 标签：sql, stored-procedures

我在存储过程中有一个临时表，它导致查询超时，因为它正在执行复杂的计算。我想在它使用后放下它。它的创建就像

```
DECLARE @SecondTable TABLE 
```

现在我不能使用

```
drop @SecondTable 
```

事实上我必须使用

```
drop #SecondTable 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:36:46.893

我绝不是 SQL 专家，但为什么需要 drop 呢？

如果它是一个表变量，一旦存储过程退出，它将不再存在。

我真的很惊讶`DROP #SecondTable`你没有出错。因为您要在那里放置一个临时表；不是表变量。

**编辑**

因此，根据您的评论，我的更新如下：

1.) 如果您使用的是表变量 ( `@SecondTable`)；那么没有必要下降。SQL Server 会为您解决这个问题。

2.）听起来您的超时是由使用表的计算引起的，而不是表本身的删除。在这种情况下; 我可能会建议使用临时表而不是表变量；因为临时表可以让您添加索引等以提高性能；而表变量不会。如果这还不够；您可能需要增加查询的超时时间。

3.) 在 SQL 中；表变量 ( `@SecondTable`) 和临时表 ( `#SecondTable`) 是两个完全不同的东西。我会参考[表变量](http://msdn.microsoft.com/en-us/library/ms175010.aspx)和[临时表的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms174979.aspx)

# objective-c - Xcode 4.5.2 是否自动在合成的 BOOL getter 前面加上 is

> ID：13938345
> 
> 赞同：4
> 
> 时间：2012-12-18T17:27:56.007
> 
> 标签：objective-c, xcode, boolean

我刚刚注意到我声明了一个 BOOL`@property (nonatomic, assign) BOOL userAuthorized;`并且我正要为它编写自己的 getter 并自动 Xcode 自动完成`- (BOOL)isUserAuthorized`

所以我怀疑没有必要再写了`@property (nonatomic, assign, getter = isUserAuthorized) BOOL userAuthorized;`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:41:24.880

显然，如果您提供自己的`BOOL`getter 实现，编译器就足够聪明，可以找出该属性`isActive`的 getter 。`active`

尽管如此，如果您合成了 getter，您仍然必须提供`getter=isActive`才能将该签名用于 getter 而不是`active`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T17:38:16.647

`getter = isUserAuthorized`是的，当您明确提及属性的 getter 时，您不需要写入 属性，`BOOL`并且您也不需要合成属性，因为 xcode 会自动为您完成。

# flash - 在 Flex Mobile 应用程序中集成 Waze 链接/任何应用程序

> ID：13938347
> 
> 赞同：0
> 
> 时间：2012-12-18T17:28:02.933
> 
> 标签：flash, apache-flex, mobile, hyperlink

我如何重定向到手机中的应用程序？例如：位智，如果未安装它以重定向到市场

我知道如何在java中做到这一点：

```
try
 {
    String url = "waze://?q=Hawaii";
     Intent intent = new Intent( Intent.ACTION_VIEW, Uri.parse( url ) );
    startActivity( intent );
 }
 catch ( ActivityNotFoundException ex  )
 {
   Intent intent = new Intent( Intent.ACTION_VIEW, Uri.parse(
 "market://details?id=com.waze" ) );
   startActivity(intent);
 } 
```

如何在 flex 4.6 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:06:29.200

似乎没有完美的方法可以做到这一点。

当您需要更通用的解决方案时，您可以尝试使用原生扩展来执行此操作，这里是一个示例： [从适用于 Android 的 Adob​​e AIR 原生扩展启动 Activity](https://stackoverflow.com/questions/12959593/start-activity-from-adobe-air-native-extension-for-android)

但是，您可以试试这个： [http](http://forums.adobe.com/thread/891366) ://forums.adobe.com/thread/891366 这是关于如何将意图 URI 传递给 navigateToURL 方法的讨论。它对我不起作用 - 也许我构造了无效的 URI，或者此功能未包含在发布中。但是，您可以使用 navitateToURL 打开一些类似的标准应用程序：

> 在 AIR 中，在移动平台上，支持 sms: 和 tel: URI 方案。在 Android 上，支持 vipaccess:、connectpro: 和 market: URI 方案。URL 语法受平台约定的约束。例如，在 Android 上，URI 方案必须小写。当您使用其中一种方案导航到 URL 时，运行时会在默认应用程序中打开该 URL 以处理该方案。因此，导航到 tel:+5555555555 会打开电话拨号器，其中已经输入了指定的号码。必须有一个单独的应用程序或实用程序（例如电话拨号器）来处理 URL。
> 
> 以下代码显示了如何在 Android 上调用 VIP Access 和 Connect Pro 应用程序：
> 
> //调用 VIP 访问应用程序。navigateToURL(new URLRequest("vipaccess://com.verisign.mvip.main?action=securitycode")); //调用 Connect Pro 应用程序。navigateToURL(new URLRequest("connectpro://"));

您还可以尝试使用 StageWebView 类来操作可能以某种方式支持意图链接的标准浏览器。

# ruby - ActiveRecord 范围：选择关系的奇怪行为

> ID：13938348
> 
> 赞同：1
> 
> 时间：2012-12-18T17:28:04.803
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有两个具有 1:N 关系的不同模型。让我们将它们命名为“myobject”和“related”

```
class Myobject < ActiveRecord::Base
  has_many :related
  scope :without_related, includes(:related).select{ |o| o.related.size == 0 }
end
class Related < ActiveRecord::Base
end 
```

只要我不创建从 Myobjects 到相关的新分配，定义的范围似乎工作得很好：

*   直接 rails c command "Myobject.includes(:related).select ...（在 Scope 中定义）按预期工作
*   对范围“Myobject.without_related”的调用仍然返回同时已分配的对象

似乎可以通过重新启动 rails 控制台或重新启动 Webrick 来解决此问题。但是我不能总是因为对象之间的关系已经改变而重新启动 web 应用程序；）

有没有办法解决这个问题或以更好的方式编写范围？

PS：我需要这个查询作为范围以将其名称作为 group_method 以 Myobject 模型的形式传递给 grouped_select

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:50:42.683

您的问题是，实际上您的范围不是范围:)

范围必须返回关系，但您的范围返回数组。

尽管它可以按您的预期工作，但如果您将其包装在 lambda 中

```
 scope :without_related, lambda{ includes(:related).select{ |o| o.related.size == 0 } } 
```

但我建议将此代码重写为通常的类方法，以免误导将来使用此代码的人

```
def self.without_related
  includes(:related).select{ |o| o.related.size == 0 }
end 
```

或按照其他答案中的建议使用计数器缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:46:54.427

我建议您为此使用 counter_cache，您需要将 int 类型的列 *related_count* 添加到 Myobject，进行迁移，然后您将能够这样做：

```
class Myobject < ActiveRecord::Base
  has_many :related
  scope :without_related, where(related_count: 0)
end

class Related < ActiveRecord::Base
  belongs_to :myobject, counter_cache: true
end 
```

之后，您将拥有超快的范围来获取没有相关记录的所有对象以及该对象的计数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:56:49.553

或者，如果您知道相关表中应该存在的列名，请使用以下定义：

```
class Myobject < ActiveRecord::Base
  has_many :related
  scope :without_related, includes(:related).where('related.id', true)
end 
```

# json - golang中严格的json解析器

> ID：13938352
> 
> 赞同：15
> 
> 时间：2012-12-18T17:28:14.700
> 
> 标签：json, go

在 Go 中，我有一些来自第三方 API 的 JSON，然后我试图解析它：

```
b := []byte(`{"age":21,"married":true}`)
var response_hash map[string]string
_ = json.Unmarshal(b, &response_hash) 
```

但它失败（`response_hash`变为空）并且`Unmarshal`只能处理带引号的 JSON：

```
b := []byte(`{"age":"21","married":"true"}`)
var response_hash map[string]string
_ = json.Unmarshal(b, &response_hash) 
```

有没有办法从第三方 API 读取 JSON 的第一个版本？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-18T17:35:33.940

Go 是一种强类型语言。您需要指定 JSON 编码器所期望的类型。您正在创建一个字符串值映射，但您的两个 json 值是一个整数和一个布尔值。

这是一个带有结构的工作示例。

[http://play.golang.org/p/oI1JD1UUhu](http://play.golang.org/p/oI1JD1UUhu)

```
package main

import (
    "fmt"
    "encoding/json"
    )

type user struct {
    Age int
    Married bool
}

func main() {
    src_json := []byte(`{"age":21,"married":true}`)
    u := user{}
    err := json.Unmarshal(src_json, &u)
    if err != nil {
        panic(err)
    }
    fmt.Printf("Age: %d\n", u.Age)
    fmt.Printf("Married: %v\n", u.Married)
} 
```

如果您想以更动态的方式执行此操作，可以使用 interface{} 值的映射。当你使用这些值时，你只需要做类型断言。

[http://play.golang.org/p/zmT3sPimZC](http://play.golang.org/p/zmT3sPimZC)

```
package main

import (
    "fmt"
    "encoding/json"
    )

func main() {
    src_json := []byte(`{"age":21,"married":true}`)
    // Map of interfaces can receive any value types
    u := map[string]interface{}{}
    err := json.Unmarshal(src_json, &u)
    if err != nil {
        panic(err)
    }
    // Type assert values
    // Unmarshal stores "age" as a float even though it's an int.
    fmt.Printf("Age: %1.0f\n", u["age"].(float64))
    fmt.Printf("Married: %v\n", u["married"].(bool))
} 
```

# iphone - iPhone - NSURLConnection 使用 NSArray 中的 URL 进行异步下载

> ID：13938354
> 
> 赞同：1
> 
> 时间：2012-12-18T17:28:35.940
> 
> 标签：iphone, arrays, nsurlconnection, nsjsonserialization

我已经在这个网站上看到了几乎所有关于 NSURL 的帖子，但我仍然卡住了。我正在使用 Xcode 4.5。

我正在尝试下载图像并将它们显示在 UIScrollView 中。

我想使用 URL 异步下载图像，这些图像存储在使用 JSON 填充的数组中。我从数据库中的 JSON 抓取中获取 URL。这工作得很好，我可以看到 URL 被放置到 urlArray 中，但是使 URLConnection 获取图像似乎失败了。

我无法下载任何图像，或者至少它们没有出现在我的 imageArray 中。

这是我的代码，感谢您的帮助！！让我知道还需要什么

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //show network activity to user.... very useful
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    //call getJSON. getJSON does not parse, but it connects and gets the data.
    [self getJSON];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)getJSON
{
    NSURL *url = [NSURL URLWithString:@"http://"My server goes here/json.php"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    //just initialize the connection, do not 
    [[NSURLConnection alloc] initWithRequest:request delegate:self]; //"Ecression result unused" warning here
}

- (void)getNextImage
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    for (int y = 0; y < urlArray.count; y++)
    {
    NSString *urlString = [urlArray objectAtIndex:y];
    NSLog(@"Array String is: %@ ", urlString);
    NSURL *arrayURL = [NSURL URLWithString:urlString];
    NSURLRequest *imageRequest = [NSURLRequest requestWithURL:arrayURL];
    NSData *imgData = [[NSURLConnection alloc] initWithRequest:imageRequest delegate:self]; //"Incompatible pointer types initializing ..." warning here
    imageData = [UIImage imageWithData:imgData];
    [imageArray addObject:imageData];

    }
    NSLog(@"LEAVING getNextImage");
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    theJsonData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [theJsonData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    urlArray = [[NSMutableArray alloc] init];
    //This is where all the JSON Parsing is being done.
    //Turn off the data indicator, because the download is complete.
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    jsonArray = [NSJSONSerialization JSONObjectWithData:theJsonData options:nil error:nil];   //"Incompatible pointer types initializing ..." warning here

    //get the URL strings out of the jsonArray
    for (int x = 0; x < jsonArray.count; x++)
    {
        NSString *urlString = [[jsonArray objectAtIndex:x] objectForKey:@"image_URL"];
        NSLog(@"String is %@ ", urlString);
        [urlArray addObject:urlString];
    }
    [self getNextImage];

    //display the images..... Not sure why this is in connectionDidFinishLoading.
    for (int x = 0; x < imageArray.count; x++)
    {
        CGRect frame;
        frame.origin.x = self.mainScroll.frame.size.width * x;
        frame.origin.y = 0;
        frame.size = self.mainScroll.frame.size;

        UIImageView *nextIV = [[UIImageView alloc] initWithFrame:frame];
        [nextIV setImage:imageData];

        [self.mainScroll addSubview:nextIV];
        //NSLog(@"Pass %d", x);
    }

    self.mainScroll.contentSize = CGSizeMake(self.mainScroll.frame.size.width * imageArray.count,1.0);

    NSLog(@"!!!!!!leaving connection did finnish loading!!!!!");

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    //show error message to user if there is a connection error.
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The Download could not complete - please make sure you're connected to the internet." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];
    //turn off the network activity indicatior
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:08:30.140

你永远不会下载 imageData。您为其分配请求对象。这就是为什么你也会收到警告。NSURLConnection 对象不是 NSData 对象：`NSData *imgData = [[NSURLConnection alloc] initWithRequest:imageRequest delegate:self]; //"Incompatible pointer types initializing ..." warning here`

我今天将使用 startAsyncConnection 方法重写它。秒

- 你去吧，未经测试并用文本编辑编写，但它应该让你开始（我重用了你的大部分代码，但也减少了很多）

```
#import "RootViewController.h"

@interface RootViewController ()
@property(assign) IBOutlet UIScrollView *mainScroll;
@end

@implementation RootViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    [self getJSONAndImageData];
}

- (void)getJSONAndImageData
{
    NSURL *url = [NSURL URLWithString:@"http://My server goes here/json.php"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse*r, NSData*d, NSError*e) {
        [self parseJSONAndGetImages:d];
    }];
}

- (void)parseJSONAndGetImages:(NSData*)data
{
    NSMutableArray *urlArray = [[NSMutableArray alloc] init];
    //This is where all the JSON Parsing is being done.
    //Turn off the data indicator, because the download is complete.
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    NSArray *jsonArray = (NSArray*)[NSJSONSerialization JSONObjectWithData:data options:nil error:nil];   //"Incompatible pointer types initializing ..." warning here => likely not an array then
    assert([jsonArray isKindOfClass:[NSArray class]]);

    //could be made in one liner with KVC
    //get the URL strings out of the jsonArray
    for (int x = 0; x < jsonArray.count; x++)
    {
        NSString *urlString = [[jsonArray objectAtIndex:x] objectForKey:@"image_URL"];
        NSLog(@"String is %@ ", urlString);
        [urlArray addObject:urlString];
    }

    [self loadImageArray:urlArray handler:^(NSArray* imageArray) {
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
        for (int x = 0; x < imageArray.count; x++)
        {
            CGRect frame;
            frame.origin.x = self.mainScroll.frame.size.width * x;
            frame.origin.y = 0;
            frame.size = self.mainScroll.frame.size;

            UIImageView *nextIV = [[UIImageView alloc] initWithFrame:frame];
            [nextIV setImage:imageArray[x]];

            [self.mainScroll addSubview:nextIV];
            //NSLog(@"Pass %d", x);
        }

        self.mainScroll.contentSize = CGSizeMake(self.mainScroll.frame.size.width * imageArray.count,1.0);
    }];
}

//for SIMPLICITY I do synchronous networking here!
- (void)loadImageArray:(NSArray *)urlArray handler:(void(^)())handler {
    dispatch_async(dispatch_get_global_queue(0, 0), ^{
        NSMutableArray *imageArray = [NSMutableArray array];
        for (int y = 0; y < urlArray.count; y++)
        {
            NSString *urlString = [urlArray objectAtIndex:y];
            NSLog(@"Array String is: %@ ", urlString);
            NSURL *arrayURL = [NSURL URLWithString:urlString];
            NSURLRequest *imageRequest = [NSURLRequest requestWithURL:arrayURL];
            NSData *imgData = [NSURLConnection sendSynchronousRequest:imageRequest returningResponse:nil error:nil];
            UIImage *image = [UIImage imageWithData:imgData];
            [imageArray addObject:image];
        }

        dispatch_async(dispatch_get_main_queue(),^ {
            handler(imageArray);
        });
    });
}

@end 
```

# iphone - 如何表明需要删除代码......最终

> ID：13938361
> 
> 赞同：4
> 
> 时间：2012-12-18T17:29:08.860
> 
> 标签：iphone, ios, ios6, backwards-compatibility

考虑一个需要与 iOS 5 和 iOS 6 兼容的应用程序。

有没有办法标记纯粹为了 iOS 5 兼容性而存在的代码，以便在部署目标最终更改为 iOS 6 时显示为编译错误（或警告）？

像这样的东西：

```
#IF_DEPLOYMENT_TARGET_BIGGER_THAN_IOS_5 
#OUTPUT_ERROR_MESSAGE
#ENDIF
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES;
} 
```

如果没有，最好的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:47:36.323

试试这个：

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED >= 60000
#warning This pre-6.0 code isn't needed anymore
#endif
- (BOOL)shouldAutorotateToInterfaceOrientation(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

一旦部署目标设置为 6.0 或更高版本，此代码将导致编译器警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:47:27.977

`#define MY_CONDITIONAL_DEPRECATED_ATTRIBUTE __deprecated`

在所有方法上使用它，但直到你需要它让它安静

`#define MY_CONDITIONAL_DEPRECATED_ATTRIBUTE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:46:35.000

考虑看看 Apple 如何在其框架类中标记这类东西。似乎他们正在使用 SDK 中的`Availability.h`和`AvailabilityInternal.h`类。

# css - 如何让 div 漂浮在主容器之外

> ID：13938362
> 
> 赞同：0
> 
> 时间：2012-12-18T17:29:12.777
> 
> 标签：css

我正在使用模板处理 WP，我试图让一个按钮漂浮在主容器之外。我在这里经历了一些已经发布的问题，但没有运气。

我尝试过填充、边距、溢出等。似乎可行的一件事是设置负边距，但在这种情况下，div 被主容器隐藏。

这是HTML：

```
<div class="purchase_options_meta clearfix">
                    <div class="purchase_options">
                       <div id="deal_attributes_wrap" class="section ">                                
                        </div>
                           <div class="buy_button gb_ff font_x_large">                                
                        </div>

                    </div>
 </div> 
```

这是我正在使用的 CSS：

```
 .container.main {
    width: 980px;
    padding: 20px;
    overflow: visible;
    }

    .purchase_options {
    position: relative;
    }

    .buy_button {
    position: absolute;
    background: url(http://topgreekgyms.fitnessforum.gr/wp-content/uploads/2012/12/Button12.png) no-repeat center;
    color: white;
    height: 100px;
    width: 375px;
    left: -54px;
    top: -16px;
    }

    .button {
    background-color: transparent;
    color: #ffffff;
    }

    .button:hover {
    background-color: transparent;
    color: #cccccc;
    }

    .buy_button a {
    font-weight: bold;
    font-size: 29px;
    font-family: arial;
    padding: 12px;
    display: block;
    white-space: nowrap;
    position: relative;
    margin: 15px 0 0 50px;
    }   

    .buy_button a span {
    position: absolute;
    right: 33px;
    padding: 0 5px;
    } 
```

这是该页面的[链接](http://topgreekgyms.fitnessforum.gr/deals/test-deal-3/)。我的问题是左侧顶部的红色按钮。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T06:18:39.040

以防万一将来对某人有所帮助：

我不得不在我的代码中添加这部分 CSS：

```
#deal_single.clearfix:after {
    clear: both !important;
} 
```

更具体地说，“#deal_single”是页面 ID。

# ios - 游戏中心集成与程序设计

> ID：13938363
> 
> 赞同：0
> 
> 时间：2012-12-18T17:29:15.453
> 
> 标签：ios, game-center

我是 iOS 新手，所以请原谅一个对你们大多数人来说似乎很明显的问题。

我已经阅读了[Game Center Programming Guide](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/GameCenterOverview/GameCenterOverview.html#//apple_ref/doc/uid/TP40008304-CH5-SW7) ，但我对视图控制器之间的流程感到困惑。

以上面链接中的图 1-2 为例，我可以看到 Credits 视图、Authentication 视图等将是模态的。我无法理解的是观点循环：`Main Menu > Configure Game Play > Matchmaking > Configure Game Play > Game Play > Game End > Main Menu`.

在这种情况下，什么会被视为根控制器？它会是什么类型的控制器？您将使用什么 segue 转到下一个视图，以及一旦您深入几个视图，您将如何导航回主菜单？这种场景的典型设计是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:52:09.477

这是多人游戏的代码。所有 Game Center 视图均由 Game Center 管理。添加此代码后，您只需为多人游戏添加以下代码。当您单击游戏按钮时，您将调用此帮助程序类，您可以访问此链接了解更多详细信息 [ [http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-游戏中心教程第 12 部分](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)]

```
AppController * delegate = (AppController *) [UIApplication sharedApplication].delegate;
    [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:delegate.viewController];
    pimple_->ourRandom = arc4random();
    setGameState(kGameStateWaitingForMatch);

#import <Foundation/Foundation.h>
#import <GameKit/Gamekit.h>

@interface GCHelper : NSObject<GKMatchmakerViewControllerDelegate, GKMatchDelegate>
{
    BOOL isUserAuthenticated;

    UIViewController *presentingViewController;
    GKMatch *match;
    BOOL matchStarted;

    GKInvite *pendingInvite;
    NSArray *pendingPlayersToInvite;
    NSMutableDictionary *playersDict;

    NSString *MultiplayerID;
    NSData *MultiData;
    NSString *otherPlayerID;

    char AlertMessageBoxNo;

    BOOL isDataRecieved;
}

//variables

@property (assign, readonly) BOOL gameCenterAvailable;
@property (retain) UIViewController *presentingViewController;
@property (retain) GKMatch *match;
@property (retain) GKInvite *pendingInvite;
@property (retain) NSArray *pendingPlayersToInvite;
@property (retain) NSMutableDictionary *playersDict;

@property (retain) NSString *MultiplayerID;
@property (retain) NSData *MultiData;

-(NSString*)getOtherPlayerId;
-(void)setOtherPlayerId;
//Functions
+ (GCHelper *)sharedInstance;
-(BOOL)isGameCenterAvailable;
-(void)authenticationChanged;
-(void)authenticateLocalUser;

-(void)gameOver:(NSString*)message;

-(void)setDataRecieved:(BOOL)d;
-(BOOL)getDataRecieved;

- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController;

@end

///////

#import "GCHelper.h"
#import "IPadSharebleClass.h"

@implementation GCHelper

@synthesize gameCenterAvailable;
@synthesize presentingViewController;
@synthesize match;
@synthesize pendingInvite;
@synthesize pendingPlayersToInvite;
@synthesize playersDict;
@synthesize MultiData;
@synthesize MultiplayerID;

static GCHelper *sharedHelper = nil;

+(GCHelper *) sharedInstance
{
    if (!sharedHelper)
    {
        sharedHelper = [[GCHelper alloc] init];
    }
    return sharedHelper;
}

- (BOOL)isGameCenterAvailable
{
    Class gcClass = (NSClassFromString(@"GKLocalPlayer"));
    NSString *reqSysVer = @"4.1";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
    BOOL osVersionSupported = ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending);
    return (gcClass && osVersionSupported);
}

- (id)init
{
    if ((self = [super init]))
    {
        gameCenterAvailable = [self isGameCenterAvailable];
        if (gameCenterAvailable)
        {
            NSNotificationCenter *nc =
            [NSNotificationCenter defaultCenter];
            [nc addObserver:self
                   selector:@selector(authenticationChanged)
                       name:GKPlayerAuthenticationDidChangeNotificationName
                     object:nil];
        }
        else
        {
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Center Not Available" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
    }
    return self;
}

-(void)authenticationChanged
{
    if ([GKLocalPlayer localPlayer].isAuthenticated && !isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player authenticated.");
        isUserAuthenticated = TRUE;

        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)
        {
            NSLog(@"Received invite");
            self.pendingInvite = acceptedInvite;
            self.pendingPlayersToInvite = playersToInvite;
            IPadCallAnyWhereF.inviteReceived();
        };

    }
    else if (![GKLocalPlayer localPlayer].isAuthenticated && isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player not authenticated");
        isUserAuthenticated = FALSE;
    }

}

- (void)authenticateLocalUser
{
    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");
    if ([GKLocalPlayer localPlayer].authenticated == NO)
    {
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];
    }
    else
    {
        NSLog(@"Already authenticated!");
    }
}

-(void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController
{
    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController;
    if (pendingInvite != nil)
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
        mmvc.matchmakerDelegate = self;
        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;
    }
    else
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
        request.minPlayers = minPlayers;
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
        mmvc.matchmakerDelegate = self;

        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }

}

#pragma mark GKMatchmakerViewControllerDelegate
- (void)matchmakerViewControllerWasCancelled:(GKMatchmakerViewController *)viewController
{
    [presentingViewController dismissModalViewControllerAnimated:YES];

    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Cancel By you" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='E';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFailWithError:(NSError *)error
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    NSLog(@"Error finding match: %@", error.localizedDescription);
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Connection Time out" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='A';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    self.match = theMatch;
    match.delegate = self;
    if (!matchStarted && match.expectedPlayerCount == 0)
    {
        NSLog(@"***************Ready to start match!**************");
        [self lookupPlayers];
    }
}

- (void)lookupPlayers
{
    NSLog(@"Looking up %d players...", match.playerIDs.count);
    [GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error)
     {
         if (error != nil)
         {
             NSLog(@"Error retrieving player info: %@", error.localizedDescription);
             matchStarted = NO;
             //IPadCallAnyWhereF.matchEnded();
             UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Error retrieving player info" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
             [alert show];
             [alert release];
             AlertMessageBoxNo='F';
         }
         else
         {
             self.playersDict = [NSMutableDictionary dictionaryWithCapacity:players.count];
             for (GKPlayer *player in players)
             {
                 NSLog(@"Found player: %@", player.alias);
                 [playersDict setObject:player forKey:player.playerID];
             }
             NSLog(@"Total Number of Players : %d",players.count);
             matchStarted = YES;
             IPadCallAnyWhereF.matchStarted();
         }
     }];

}

#pragma mark GKMatchDelegate
- (void)match:(GKMatch *)theMatch didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID
{
    if (match != theMatch) return;

    MultiData=data;
    MultiplayerID=playerID;
    if(otherPlayerID==nil)
    {
        otherPlayerID=[playerID retain];
    }
    IPadCallAnyWhereF.match();
}

-(void)setDataRecieved:(BOOL)d
{
    isDataRecieved=d;
}
-(BOOL)getDataRecieved
{
    return isDataRecieved;
}

-(NSString*)getOtherPlayerId
{
    return otherPlayerID;
}

-(void)setOtherPlayerId
{
    otherPlayerID=nil;
}

- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
{
    if (match != theMatch) return;
    switch (state)
    {
        case GKPlayerStateConnected:
            NSLog(@"New Player connected!");
            if (!matchStarted && theMatch.expectedPlayerCount == 0)
            {
                NSLog(@"&&&&&&&&&& Ready to start match in the match!");
                [self lookupPlayers];
            }
            break;
        case GKPlayerStateDisconnected:
            NSLog(@"--------Player disconnected!--------");
            matchStarted = NO;
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Player Disconnected" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
            [alert show];
            [alert release];
            AlertMessageBoxNo='B';
            //IPadCallAnyWhereF.matchDisconnect();
            break;
    }
}

- (void)match:(GKMatch *)theMatch connectionWithPlayerFailed:(NSString *)playerID withError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Failed to connect to player with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Failed to connect to player" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='C';

}

- (void)match:(GKMatch *)theMatch didFailWithError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Match failed with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Match failed" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='D';

}

-(void)gameOver:(NSString*)message
{
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:message delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='G';
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Try Again"])
    {
        IPadCallAnyWhereF.matchDisconnect();
    }
    else if([title isEqualToString:@"Main Menu"])
    {
        IPadCallAnyWhereF.gotoMainMenu();
    }

}

@end 
```

谢谢

# sql - 在 Oracle 触发器中使用 if 语句

> ID：13938364
> 
> 赞同：0
> 
> 时间：2012-12-18T17:29:14.950
> 
> 标签：sql, database, oracle, triggers

1.  表1：客户

    cust_no | cust_credbal | 信用状态

2.  表2：customer_credittopup

    cust_no | 交易金额

我有上面两个表，我在插入到更新后写了一个更新`Table2`触发器`Table1`。因此，`Table1` `cust_credbal`在添加`cust_credbal`in `Tabl1`+ in 中的新值后， `trans_amount`in的金额会更新`Table2`。如何在更新后添加 if 语句以检查是否`cust_credbal`大于 20 则`cred_status`设置为“有效”否则“已耗尽”

我的触发器显示此错误：第 8 行错误：PLS-00049：错误绑定变量 'NEW.CUST_CREDITBAL'

```
CREATE OR REPLACE TRIGGER after_insert_credittopup
AFTER INSERT ON customer_credittopup
FOR EACH ROW 
DECLARE 
  credit number(11);
BEGIN
  UPDATE customers
     SET cust_creditbal=cust_creditbal +:new.trans_amount
   WHERE cust_no=:new.cust_no;

  SELECT Cust_creditbal INTO credit 
    FROM customers WHERE cust_no=:new.cust_no;

  IF(:new.cust_creditbal>0) THEN
    UPDATE customers
       SET Cust_credstatus='Valid'
     WHERE cust_no=:new.cust_no;
  end if;
end;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:36:41.503

看来您在这里只需要 1 条更新语句：

```
UPDATE customers
SET cust_creditbal=cust_creditbal +:new.trans_amount,
Cust_credstatus = CASE WHEN cust_creditbal +:new.trans_amount > 0 THEN 'Valid'
 ELSE 'Invalid' 
 --or if you don't want to change status in such case just put 
 --ELSE Cust_credstatus 
 END
 WHERE cust_no=:new.cust_no;
 --SELECT Cust_creditbal INTO credit FROM customers WHERE cust_no=:new.cust_no;
 --IF(:new.cust_creditbal>0) THEN
 --UPDATE customers
 --SET Cust_credstatus='Valid'
 --WHERE cust_no=:new.cust_no; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:33:03.500

`NEW.CUST_CREDITBAL`不匹配`cust_credbal`

# android - Android Maps，在 Overlay 构造函数中绘制

> ID：13938366
> 
> 赞同：1
> 
> 时间：2012-12-18T17:29:22.403
> 
> 标签：android, overlay, android-mapview, draw

我有一个`path()`从 json 对象创建的。我将 JSON 对象传递给构造函数中的覆盖对象。

扩展的对象`Overlay`总是`draw()`在地图移动、渲染、触摸等任何事情时调用。即使您的叠加层不可见或附近或任何东西。

我想在 for 循环中生成我的路径对象，实际上是一个嵌套循环，因为 json 对象包含嵌套的 json 数组。这有很高的理论计算时间，所以我不想在`draw()`方法中这样做。相反，我尝试在构造函数中执行逻辑，制作`path()`文件，然后在`draw()`此处需要的方法中仅调用该路径文件一次`canvas.drawPath(path, mPaint);`

不幸的是，当我在构造函数中创建路径时，它不会随地图平移。但是当我在方法中创建它时，完全相同的代码，`draw()`它确实具有所需的功能：一条围住地图一部分的路径。

问题是该`draw()`方法将一遍又一遍地调用我的双重 for 循环，并且性能损失是显而易见的并且令人衰弱。即使将循环放在`new Thread()`draw() 中也无助于提高性能。在构造函数中运行它是理想的，但路径不会随地图平移。

同样，在方法中放置一个私有布尔翻转`draw()`，以使所需的代码只运行，也不起作用。除非不断地重新绘制路径，否则路径不会出现在地图上，这是一项艰巨的任务。

这个网站上关于这个问题的其他答案的问题是人们正在制作正方形、圆形和图像，它们只需要在 内调用一次`draw()`，而不是循环来生成路径。

建议？该方法的某些内容`draw()`有助于叠加层粘在地图上，我怎样才能只运行一次 for 循环

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:48:06.123

给你一些注意事项：

1.  你不应该覆盖 draw() 方法。Overlay 类已经为您处理了整个平移操作。阅读您会找到的文档。

2.  新的 API 更易于使用数千倍。使用简单的代码，例如：

    ```
    PolylineOptions p = new new PolylineOptions().width(3).color(0xFFEE8888);
    for( //... first for .... ){
       for( // .... how many you'll need to nest... ){
          // compute your JSON and get lat/long pair
          p.add(new LatLng(lat, lon));
        }
     }
     getMap().addPolyline(p); 
    ```

并让地图类处理平移和缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:30:02.410

尽管您已经接受了答案，但我使用的方法如下。在下面的示例代码中，我使用的是 old `MapView`，但这个概念应该适用于任何版本。我也将它与`mapforges`（最小调整）一起使用。

**概念**

*   `path`在第一次通话时建立你`draw()`，并记录点的位置（0）
*   在下一个`draw()`如果点（0）位置改变，地图已经移动。在绘制之前将“路径”偏移相同的值。
*   如果缩放改变，重新创建`path`对象。

**表现**

在中型设备中使用 10.000 点路径，`2 ms`每次缓存`draw()`调用大约需要。当需要重建路径时（当缩放改变时）大约需要`80 ms`.

当然，您还可以缓存不同的路径缩放级别，用更多的内存换取更多的性能。

**示例代码**

draw() 方法仅检查是否有缩放变化（如果是，则要求重建路径）以及地图是否已移动（如果是偏移路径）并最终绘制路径。

```
@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {
    super.draw(canvas, mapview, shadow);
    if(shadow) return;
    if(mp.getPoints() == null || mp.getPoints().size() < 2) return;

    Projection projection = mapview.getProjection();
    int lonSpanNew = projection.fromPixels(0,mapview.getHeight()/2).getLongitudeE6() - 
            projection.fromPixels(mapview.getWidth(),mapview.getHeight()/2).getLongitudeE6();
    if(lonSpanNew != pathInitialLonSpan)
        pathBuild();
    else{ //check if path need to be offset
        projection.toPixels(mp.getPoints().get(0), p1);
        if(p1.x != pathInitialPoint.x || p1.y != pathInitialPoint.y){
            path.offset(p1.x - pathInitialPoint.x, p1.y - pathInitialPoint.y);
            pathInitialPoint.x = p1.x;
            pathInitialPoint.y = p1.y;
        }

    }
    canvas.drawPath(path, paint); 
} 
```

每次缩放更改时都必须构建路径。缩放变化检测是使用 pathInitialLonSpan 完成的，因为 getZoomLevel() 与地图缩放动画不同步。

```
private void pathBuild(){
    path.rewind(); 
    if(mp.getPoints() == null || mp.getPoints().size() < 2) return;

    Projection projection = mapView.getProjection();
    pathInitialLonSpan = projection.fromPixels(0,mapView.getHeight()/2).getLongitudeE6() - 
            projection.fromPixels(mapView.getWidth(),mapView.getHeight()/2).getLongitudeE6();

    projection.toPixels(mp.getPoints().get(0), pathInitialPoint);
    path.moveTo(pathInitialPoint.x,pathInitialPoint.y); 

    for(int i=1; i<mp.getPoints().size(); i++){
        projection.toPixels(mp.getPoints().get(i), p1);
        int distance2 = (pPrev.x - p1.x) * (pPrev.x - p1.x) + (pPrev.y - p1.y) * (pPrev.y - p1.y); 
        if(distance2 > 9){
            path.lineTo(p1.x,p1.y);
            pPrev.set(p1.x, p1.y);
        }
    } 
```

问候。

# tomcat - Tomcat SSL POST 请求重定向

> ID：13938370
> 
> 赞同：2
> 
> 时间：2012-12-18T17:29:43.893
> 
> 标签：tomcat, ssl

我在 Tomcat 下设置了 SSL，并将某些 url 的端口重定向从 http 到 https（使用安全约束）。重定向有效，但所有原始 POST http 请求都被重定向为 GET，因此原始 POST 请求中的所有参数都丢失了。

如何配置连接器以将 POST 请求重定向为 post？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:55:12.593

依靠重定向来升级每个`http://`链接通常是不好的做法`https://`：这很容易受到 MITM 攻击。理想情况下，您应该`https://`只为您的用户提供链接（可能使用 HSTS）。（请参阅Webmasters.SE 上的[这个问题](https://webmasters.stackexchange.com/a/28443/11628)。）

升级重定向主要是为了降低风险（假设首先没有 MITM 攻击者），并让用户习惯于看到`https://`. 他们最终是唯一能够检查是否使用了 HTTPS 的人。从您的角度来看，请确保您自己的所有指向 HTTPS 部分的链接都`https://`直接使用，而不是依赖这些重定向。（出于这个原因，我建议不要在开发过程中启用 http->https 重定向，并使 HTTP 地址等同于那些原本应该是 HTTPS 的地址，只返回 404：至少你会知道它是什么时候休息。）

回到您问题的核心，您肯定会遇到[Post/Redirect/Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)，这可以被认为与 HTTP 规范不兼容（取决于它的实现方式以及您使用的重定向代码）。

除了关于 Post/Redirect/Get 模式的正确性或有用性的可能参数之外，您应该通过不使用重定向而是`https://`直接 POST 到 URI 来解决此问题（一旦您使用 HTTPS，通常最好在您的站点中使用相对 URL ）。请记住，POST 的内容将在第一个请求中发送（在它从服务器获得重定向之前），因此窃听者可以看到它，从而使使用 HTTPS 毫无意义（因为它不会在那里使用）。

# android - 如何找到我的 facebook 好友列表，他们是 android 用户？

> ID：13938373
> 
> 赞同：0
> 
> 时间：2012-12-18T17:29:57.033
> 
> 标签：android, facebook, facebook-graph-api

无论如何，使用 facebook grap api 或任何其他方法来找出我的哪些 facebook 朋友是 android 用户？

我认为没有直接的方法可以做到这一点。我认为一种方法是通过阅读帖子中的“通过 Android/iPhone/etc/”标签来标记用户。有任何想法吗？

请注意 - 我不确定这是否是正确的地方。如果您建议我，我很乐意将此问题移至任何 stackexchange 站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:39:31.697

您可以使用图形 API，获取朋友的用户 ID，并询问“设备”字段。

请参阅[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)并在字段下查找“设备”名称。

# performance - 我可以在部署 Azure 应用程序后监控它的性能吗（类似于分析）

> ID：13938376
> 
> 赞同：1
> 
> 时间：2012-12-18T17:30:18.410
> 
> 标签：performance, azure, profile, monitor

我有一个 REST API。它提供服务获取人，获取价格，获取路线

我如何确定每个服务的每次调用需要多长时间？例如 get person is very fast=ms 5; get route 需要 2 秒，因为它需要远程调用 Google API。

我可以在请求开始时以及在提交响应之前获取时间，计算差异并将其记录到数据库中。但这将是相当多的开销，那么你会怎么做呢？你会这样做，还是仅仅依赖机器上的分析？你会使用什么工具来最小化开销？

我想要确定是否有任何组件在生产中可能具有低可用性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:06:32.577

所以看起来你想要两件事：

*   对您的生产环境的影响最小
*   弄清楚每个请求需要多少时间

在那种情况下，我会去找 IIS 日志。[Windows Azure 诊断您可以通过添加模块并对其进行配置来](https://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/#step3)开箱即用地获得此功能。因此，您的 IIS 日志将存储在您的存储帐户中。

之后，您可以下载这些日志并使用 Log Parser 执行一些有趣的查询，这些查询可以让您找到最慢的页面、点击次数最多的页面、异常最多的页面……如果您从不使用 Log Parser 可能会有点困难以前用过。看看 Scott Hanselman 的博客文章，内容涉及 Log Parser Lizard GUI 工具：[分析您的 Web 服务器数据并使用 LogParser 和 Log Parser Lizard GUI 进行授权](http://www.hanselman.com/blog/AnalyzeYourWebServerDataAndBeEmpoweredWithLogParserAndLogParserLizardGUI.aspx)：

![在此处输入图像描述](../Images/f5417229360bc9287d1c1d5ce69ed35d.png)

这个强大的工具可以为您提供所需的所有信息，而对生产实例的影响最小。

# hadoop - Hadoop 操作关闭节点

> ID：13938382
> 
> 赞同：1
> 
> 时间：2012-12-18T17:30:59.487
> 
> 标签：hadoop, hdfs

我在代码内的虚拟机上运行 hadoop。在进行 hdfs 操作（复制，..）时，虚拟机第一次关闭，实际节点第二次关闭。

我不确定为什么会发生这种情况，我也无法在任何日志中看到为什么会发生这种情况。

有什么建议/意见吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:46:30.407

作为重型守护进程，所有 Hadoop 进程都是资源密集型的，特别是 RAM。增加 VM 的 RAM，希望它能解决问题。（如果没有，请告诉我）。

# python - Django重组列表

> ID：13938384
> 
> 赞同：1
> 
> 时间：2012-12-18T17:31:04.507
> 
> 标签：python, django

我在 Django中[重新组合](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)有一个问题。情况是：我有一个views.py的字典，我需要做以下事情：

```
Box A_name:
1 section:
1.1 element 1
...
1.n element n

N section:
N.1 element
...
N.m element

Box B_name:
... 
```

html中的代码是：

```
{% load get_boxfilter %}
{% regroup all_boxes|dictsort:"box_type" by box_type as type %}

<ul>
{% for pos in type %}
    <li> Box {{ pos.grouper|get_boxfilter }}
    <ul>
        {% for item in pos.list %}

          <li> element {{ item.name }} section {{ item.section }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul> 
```

get_boxfilter：

```
#!/usr/bin/python
# -*- coding: utf-8 -*- 
from django import template
register = template.Library()

@register.filter(name='get_groupfilter')
def get_boxfilter(value):
    gb_list = [u"NULL", u"A_name", u"B_name", u"N_name" ]
    return gb_list[int(value)] 
```

它通过盒子名称重新组合：

```
Box A_name:
1\. element 1 section 1
2\. element 2 section 2
3\. element 3 section 1
Box B_name:
... 
```

但是如何按“部分”（int值）分组？

```
Box A_name:
1 section:
1.1 element 1
1.2 element 3
2 section:
2.1 element 2 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:11:55.360

为什么不按部分重新组合？

```
{% load get_boxfilter %}
{% regroup all_boxes by section as type %}

<ul>
{% for pos in type %}
    <li> Box {{ pos.type|get_boxfilter }}
    <ol style="list-style-type: decimal">
         <li>{{ pos.grouper }}</li>
         <ol style="list-style-type: decimal">
             {% for item in pos.list %}
                 <li> element {{ item.name }}</li>
             {% endfor %}
         </ol>
    </ol>
    </li>
{% endfor %}
</ul> 
```

# javascript - Javascript 和 target="_top"

> ID：13938387
> 
> 赞同：1
> 
> 时间：2012-12-18T17:31:13.807
> 
> 标签：javascript, internet-explorer-7

我正在使用刚刚移入 iFrame 的旧版框架网站。

假设我有以下功能：

```
<script language = "javascript">
  function myFunction(){
    <!-- no console.log in IE 7 (my required target browser) -->
    alert('sup, yo?'); 
  }
</script> 
```

以及触发该功能的以下超链接：

```
<a href="javascript:myFunction();" target="_top">click me</a> 
```

**在**进入 iFrame 之前，这工作正常。将网站移入 iframe 后，单击 IE（不是 FF 或 Chrome）中的链接，我会收到非常有用的错误：

```
Line: 1
Object expected 
```

一旦我删除了该`target="_top"`属性，该功能就会起作用，所以我不需要帮助解决问题，但我的问题是：

*调用 javascript 函数来调用此行为时，IE 对 target 属性做了什么？我没有安装其他版本的 IE，这也是 8+ 中的当前行为吗？*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:44:05.803

试图理解这种行为是没有意义的。您正在使用一种定义不明确且现在开发人员不使用的技术。

而不是`href="javascript:myFunction();`，只是使用`onclick="myFunction(); return false"`甚至更好，从 JS 设置处理程序，如下所示

```
<a href="pageForUsersWithoutJs.html" id="my-link" >click me</a>
<script type="text/javascript">
// This is old school, but works for all browsers, you should use a library instead
document.getElementById('my-link').onclick = function() {
    // Do your thing
    return false; // so the link isn't followed
};
</script> 
```

# jquery - 从下到上滑动div

> ID：13938388
> 
> 赞同：0
> 
> 时间：2012-12-18T17:31:14.507
> 
> 标签：jquery, css

我正在尝试从下到上滑动 div。我有 3 个 div。在前两个将是可见的，

点击：

```
1st div get hides.
2nd div takes 1st div position.
3rd div takes 2nd div position. 
```

再次点击：

```
2nd div get hides.
3rd div takes 2nd div position 
1st div takes 3rd div position. 
```

检查这个：- [http://jsfiddle.net/2cz5v/5/](http://jsfiddle.net/2cz5v/5/)

工作 3 次点击，然后它开始交换 div。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:06:41.940

我取了你的 div 的初始位置并将它们设置在一个数组中，然后让你的 click 函数在这些初始位置之间进行动画处理。

```
 var places = [
    {
        top: $('#div1').offset().top, //100,
        left: $('#div1').offset().left, //100,
        width: $('#div1').width(), //80,
        height: $('#div1').height(), //30,
        opacity: 100
    },
    {
        top: $('#div2').offset().top, //200,
        left: $('#div2').offset().left, //100,
        width: $('#div2').width(), //80,
        height: $('#div2').height(), //30,
        opacity: 100
    },
    {
        top: $('#div3').offset().top, //300,
        left: $('#div3').offset().left, //100,
        width: $('#div3').width(), //80,
        height: $('#div3').height(), //30,
        opacity: 0
    }
]; 
```

然后在更新声明中

```
 $("#div"+j).animate({top: places[0].top, left: places[0].left, height: places[0].height, width: places[0].width, opacity: places[0].opacity}, 1000);
    $("#div"+k).animate({top: places[1].top, left: places[1].left, height: places[1].height, width: places[1].width, opacity: places[1].opacity}, 1000);
    $("#div"+l).animate({top: places[2].top, left: places[2].left, height: places[2].height, width: places[2].width, opacity: places[2].opacity}, 1000); 
```

[在这里](http://jsfiddle.net/DTM3J/2/ "分叉的 jsFiddle")查看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:34:34.773

您可以结合[CSS3 过渡](http://www.w3.org/TR/css3-transitions/)来旋转类以获得相当简单的解决方案

[示例 jsfiddle](http://jsfiddle.net/2cz5v/20/)

HTML：

```
<div id="div1" class="rotate firstdiv">div #1</div>
<div id="div2" class="rotate seconddiv">div #2</div>
<div id="div3" class="rotate thirddiv">div #3</div>                
<button id="moveitButton">move it!</button>​ 
```

CSS：

```
...
.rotate {
    -webkit-transition:all .5s;
    -moz-transition:all .5s;
    -o-transition:all .5s;
    -ms-transition:all .5s;
    transition:all .5s;
} 
```

JavaScript/jQuery：

```
var $rotateDivs = $('.rotate');

$("#moveitButton").click(function() {
    $rotateDivs.each(function() {
        var $this = $(this);

        if ($this.hasClass('firstdiv')) {
            $this.removeClass('firstdiv').addClass('thirddiv');
        } else if ($this.hasClass('seconddiv')) {
            $this.removeClass('seconddiv').addClass('firstdiv');
        } else if ($this.hasClass('thirddiv')) {
            $this.removeClass('thirddiv').addClass('seconddiv');            
        }
    });
}); 
```

注意：IE 10+ 支持 CSS3 过渡 - [http://caniuse.com/#search=transitions](http://caniuse.com/#search=transitions)

# symfony - Symfony2 传递的参数为空

> ID：13938390
> 
> 赞同：0
> 
> 时间：2012-12-18T17:31:22.023
> 
> 标签：symfony, null, arguments

我正在构建一个 CRM 系统，但遇到了一个我无法解决的奇怪问题。当我尝试创建一个新的 CustomerCase 实体时，我想为其分配一个 CaseState 实体，所以这就是我在 CustomerCaseController.php 的 createAction 中所做的：

```
 $caseStateId = $request->request->get('caseState_id');
    $caseState = $this->getDoctrine()->getManager()->getRepository('HSWAshaBundle:CaseState')->findOneById($caseStateId);
    $entity  = new CustomerCase();
    $entity->setCaseState($caseState);
...... etc..... 
```

一切正常，直到**setCaseState**方法。运行 setCaseState 后，出现以下错误：

```
Catchable Fatal Error: Argument 1 passed to HSW\AshaBundle\Entity\CustomerCase::setCaseState() must be an instance of HSW\AshaBundle\Entity\CaseState, null given, called in /home/webuser/Symfony/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php on line 538 and defined in /home/webuser/Symfony/src/HSW/AshaBundle/Entity/CustomerCase.php line 843 
```

奇怪的是，$caseState 确实是一个 CaseState 对象（因为例如 $caseState->getName() 有效，并为我提供了所选 CaseState 的正确名称）。出于某种令人兴奋的原因，当我使用 setCaseState 方法时，**它只是变为 null 。**如果我执行 $entity->setCaseState($customerStateObject->getId())，我会收到相同的错误消息，但这次 null 更改为整数。

CustomerCase 与 CaseState 具有多对一关系。

如果我使用 formBuilder 的 add() 方法并跳过所有这些手动工作，这工作得很好，但由于我使用非常特定的自动填充 jQuery 下拉菜单从嵌套树结构中选择 CaseState，我必须手动添加下拉列表并使用 $request->request->get() 读取它。

我已经与这部分战斗了将近三天，非常感谢我能得到的每一个帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:31:20.247

最后我让它工作了！原因是 $request 缺少一些参数，因为 twig 模板缺少 form_rest(form)。添加之后，一切都开始工作了。谢谢！

# c - 为什么这个宏被定义为 ({ 1; })？

> ID：13938393
> 
> 赞同：27
> 
> 时间：2012-12-18T17:31:34.353
> 
> 标签：c, linux, gcc, macros, linux-kernel

在 Linux 的多个 ARM 后端中，我在文件中看到了`clkdev.h`这个宏定义：

```
#define __clk_get(clk) ({ 1; }) 
```

参见例如 [./arch/arm/mach-versatile/include/mach/clkdev.h](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-versatile/include/mach/clkdev.h;h=e58d0771b64e090151a0d98a69fbd4221a1597d3;hb=HEAD#l13)

此宏[在表达式中使用 GCC 扩展语句和声明](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)

后来这个宏在文件[./drivers/clk/clkdev.c](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=drivers/clk/clkdev.c;h=442a31363873d35f319e0d5ee5b6b250084c02fc;hb=HEAD#l145)中使用，在函数中`clk_get_sys()`

```
 if (cl && !__clk_get(cl->clk))
         cl = NULL; 
```

我想知道为什么不在这里使用一个简单的宏：

```
#define __clk_get(clk) (1) 
```

**编辑：**

我使用以下 grep 模式在整个内核源代码中发现了此构造的其他一些用法：

```
grep -R '({[[:space:]]*[a-zA-Z0-9_()+=/!&*>., ?:-]\+[[:space:]]*;[[:space:]]*})' . 
```

以下是部分比赛：

```
./kernel/trace/trace_selftest.c:# define trace_selftest_startup_dynamic_tracing(trace, tr, func) ({ 0; })
./kernel/profile.c:#define create_hash_tables()         ({ 0; })
./include/asm-generic/bug.h: * Use of ({0;}) because WARN_ON_SMP(x) may be used either as
./include/asm-generic/bug.h:# define WARN_ON_SMP(x)         ({0;})
./include/linux/key.h:#define key_get(k)            ({ NULL; })
./include/linux/key.h:#define key_get(k)            ({ NULL; })
./include/linux/audit.h:#define audit_alloc(t) ({ 0; })
./include/linux/audit.h:#define audit_bprm(p) ({ 0; })
./include/linux/audit.h:#define audit_sockaddr(len, addr) ({ 0; })
./include/linux/audit.h:#define audit_log_bprm_fcaps(b, ncr, ocr) ({ 0; })
./include/linux/audit.h:#define audit_log_start(c,g,t) ({ NULL; })
./include/linux/atalk.h:#define atalk_proc_init()   ({ 0; })
./include/linux/ftrace.h:#define register_ftrace_function(ops) ({ 0; })
./include/linux/ftrace.h:#define unregister_ftrace_function(ops) ({ 0; })
./include/linux/ftrace.h:#define ftrace_regex_open(ops, flag, inod, file) ({ -ENODEV; })
./include/linux/ftrace.h:#define ftrace_set_filter(ops, buf, len, reset) ({ -ENODEV; })
./include/linux/ftrace.h:#define ftrace_set_notrace(ops, buf, len, reset) ({ -ENODEV; })
./include/linux/cpu.h:#define unregister_hotcpu_notifier(nb)    ({ (void)(nb); })
./include/linux/proc_fs.h:#define proc_net_fops_create(net, name, mode, fops)  ({ (void)(mode), NULL; })
./arch/powerpc/include/asm/pgtable-ppc64.h:#define pgd_set(pgdp, pudp)  ({pgd_val(*(pgdp)) = (unsigned long)(pudp);})
./arch/sh/math-emu/math.c:#define WRITE(d,a)    ({if(put_user(d, (typeof (d)*)a)) return -EFAULT;})
./arch/sh/math-emu/math.c:#define READ(d,a) ({if(get_user(d, (typeof (d)*)a)) return -EFAULT;})
[...] 
```

注意：该构造`({if(put_user(d, (typeof (d)*)a)) return -EFAULT;})`似乎是复合语句的一个很好的用法。但这也可以换成更典型的`do { if(put_user(d, (typeof (d)*)a)) return -EFAULT; } while(0)`

返回的一个匹配项`grep`很有趣：在[./include/asm-generic/bug.h](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=include/asm-generic/bug.h;h=7d10f962aa137776389daf226b42b8be9702e1bd;hb=HEAD#l196)中有一条使用`({ 0; })`. 这与AndreyT [的](https://stackoverflow.com/users/187690/andreyt)[答案](https://stackoverflow.com/a/13947505/611560)完全相同。

确实，不能使用`((void)0)`，因为它不能用作 r 值。 `({ 0; })`在每种情况下都有效。

因此，如果您有一个可以像函数一样使用的宏，该函数返回一个可以使用或不可以使用的值，那么复合语句似乎是您唯一的选择。

**但从`__clkget()`不用作其他任何东西作为 r 值**

## 一些链接

*   [http://www.toofishes.net/blog/gcc-compound-statement-expressions/](http://www.toofishes.net/blog/gcc-compound-statement-expressions/)
*   [Linux内核源码中遇到的深奥#define宏](https://stackoverflow.com/questions/10166275/abstruse-define-macro-encountered-in-linux-kernel-source)
*   [宏：#define a(b) ({... c;}) 是否意味着 a(b) 返回 c？](https://stackoverflow.com/questions/7604971/macro-does-define-ab-c-means-ab-returns-c)
*   [为什么我们需要在块宏周围加上括号？](https://stackoverflow.com/questions/8142280/why-do-we-need-parentheses-around-block-macro)
*   [复合语句（块）是否被 ANSI C 中的括号表达式包围？](https://stackoverflow.com/questions/1238016/are-compund-statements-blocks-surrounded-by-parens-expressions-in-ansi-c)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T07:31:47.863

我注意到在`-Wall`模式下，独立`(1);`表达式语句会生成“无效的语句”警告，而独立`({ 1; });`表达式语句不会产生警告。

也许在代码的某个地方，他们以某种方式最终以`__clk_get`忽略结果的独立调用而告终。该`(1)`定义将导致对此类调用发出警告，同时`({ 1; })`在其他情况下产生相同效果时保持安静。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T06:06:39.600

> 为什么这个宏被定义为 ({ 1; })？

这完全取决于程序员的编码风格。它所做的只是返回值 1。例如，在“ ”中的`x86`arch 上，定义为`include/asm-generic/clkdev.h``__clk_get`

```
static inline int __clk_get(struct clk *clk) { return 1; } 
```

也在 linux/arch/c6x/include/asm/clkdev.h

```
static inline int __clk_get(struct clk *clk)
{
        return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:57:34.030

一种可能的解释是防止在不良情况下使用。
这对于提高代码可移植性很有用——如果另一个架构的宏实现失败，我们希望这个也失败。

示例：`static int x = __clk_get(clk);`- 使用时钟进行静态初始化是没有意义的。
使用`#define __clk_get(clk) (1)`，它将起作用。
，`#define __clk_get(clk) ({ 1; })`它将失败。

# python - 尝试从 GAE 动态提供图像，得到 404

> ID：13938394
> 
> 赞同：1
> 
> 时间：2012-12-18T17:31:36.070
> 
> 标签：python, google-app-engine

我的图像没有从数据存储中提供，我在图像应该在的页面上收到 404。

这是代码：

```
import cgi
import datetime
import urllib
import wsgiref.handlers

from google.appengine.ext import db
from google.appengine.api import images
from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class PropUpload(db.Model):
  property_name = db.StringProperty()
  property_address = db.StringProperty()
  project_type = db.StringProperty()
  building_size = db.StringProperty()
  stories = db.StringProperty()
  space_available = db.StringProperty()
  per_leased = db.StringProperty()
  prop_image = db.BlobProperty()
  date = db.DateTimeProperty(auto_now_add=True)

class MainPage(webapp.RequestHandler):
  def get(self):
    self.response.out.write("""<!DOCTYPE html>
            <html lang="en">
              <head>
      <somehtml>""")

    display2 = db.Query(PropUpload)
    display2.order("-date")
    for dis in display2:
        self.response.out.write('<div><img src="img?img_id=%s"></img>' % dis.key())
        self.response.out.write('<h4>Property Name: %s </h4><br>' % dis.property_name)
        self.response.out.write('<div style="border-bottom: 1px solid #CCC;">Address: %s </div><br>' % dis.property_address)
        self.response.out.write('<div style="border-bottom: 1px solid #CCC;">Type:  %s ft<sup>2</sup></div><br>' % dis.project_type)
        self.response.out.write('<div style="border-bottom: 1px solid #CCC;">Stories:  %s </div><br>' % dis.stories)

    self.response.out.write("<more html>")

class Image(webapp.RequestHandler):
  def get(self):
    img_id = self.request.get("img_id")
    dis = db.get(self.request.get("img_id"))
    if dis.prop_image:
      self.response.headers['Content-Type'] = "image/png"
      self.response.out.write(dis.prop_image)
    else:
      self.response.out.write("no image")

class UploadPage2(webapp.RequestHandler):
  def get(self):
    self.response.out.write("""<!DOCTYPE html>
    <form action="/upload2" enctype="multipart/form-data" method="post">
                        <div><label>Property Name:&nbsp</label></div>
                        <div><textarea name="prop-name" rows="1" columns "100"></textarea></div>
                        <br><br>
                        <div><label>Property Address:&nbsp</label></div>
                        <div><textarea name="address" rows="1" columns "100"></textarea></div>
                        <br><br>
                        <div><label>Property Type:&nbsp</label></div>
                        <div><textarea name="prop-type" rows="1" columns "100"></textarea></div>
                        <br><br>
                        <div><label>Building Size:&nbsp</label></div>
                        <div><textarea name="size" rows="1" columns "100"></textarea></div>
                        <br><br>
                        <div><label>Stories:&nbsp</label></div>
                        <div><textarea name="stories" rows="1" columns "100"></textarea></div>
                        <br><br>
                        <div><label>Space Available:&nbsp</label></div>
                        <div><textarea name="title" rows="2" columns "100"></textarea></div>
                        <br>
                        <div><label>Percent Leased:</label></div><span>
                        <div><textarea name="percent" rows="3" cols="100"></textarea></div><br>
                        <div><label>Picture:</label></div>
                        <div><input type="file" name="img"/></div>
                        <div><label></label></div><span>
                        <div><input type="submit" value="Upload" /></div>
                      </form>""")

  def post(self):
    props = PropUpload()
    property_name = self.request.get('prop-name')
    property_address = self.request.get('address')
    property_type = self.request.get('prop=type')
    building_size = self.request.get('size')
    stories = self.request.get('stories')
    space_available = self.request.get('space')
    prop_image = self.request.get('img')
    per_leased = self.request.get('percent')
    props.property_name = property_name
    props.property_address = property_address
    props.property_type = property_type
    props.building_size = building_size
    props.stories = stories
    props.space_available = space_available
    props.prop_image = db.Blob(prop_image)
    props.per_leased = per_leased
    props.put()
    self.redirect('/upload2')

application = webapp.WSGIApplication([
    ('/', MainPage),
    ('/upload2', UploadPage2),
    ], debug=True)

def main():
  run_wsgi_app(application)

if __name__ == '__main__':
  main() 
```

一切正常，除了 404，我找不到任何搜索这个问题的东西。

感谢您的帮助，很抱歉，如果我遗漏了任何内容，我会编辑任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:49:18.790

假设您的上传工作正常，您需要为图像本身提供一个处理程序。现在您正在引用`<img src="img?img_id=%s">`，但`img`似乎无法解析处理程序中的任何内容（此外，您不需要为HTML`</img>`中的属性提供结束标记）。`<img>`您要做的是为基于图像的请求设置一个处理程序，并让响应是图像本身。您已经`Image`为该目的进行了设置（请注意，您可能希望将`no image`部件替换为实际图像，以便结果类型保持一致）。

要将处理程序映射`Image`到 URL，请尝试按如下方式修改处理程序：

```
application = webapp.WSGIApplication([
    ('/', MainPage),
    ('/img', Image),
    ('/upload2', UploadPage2),
    ], debug=True) 
```

现在，这会将请求路由到`/img`处理`Image`程序（您可能还希望将`src`标签更改为`<img src="/img?img_id=%s">`，然后它应该定位并返回您的图像。

# javascript - ASP.NET UpdatePanel：在 UpdatePanel 更新上注入 Javascript

> ID：13938399
> 
> 赞同：3
> 
> 时间：2012-12-18T17:31:56.617
> 
> 标签：javascript, asp.net, updatepanel, javascript-injection

**以下从更新内容中注入 JavaScript 的解决方案**是否有任何潜在的副作用**`UpdatePanel`？**

 **看起来的代码是`UpdatePanel`这样的：

```
<asp:UpdatePanel>
    <asp:PlaceHolder ID="pnlScriptContent" Visible="false" runat="server">
        <script id="script-content">
            alert('Script was loaded correctly!');
        </script>
    </asp:PlaceHolder>

    <asp:Button OnClick="ButtonClick" OnClientClick="LoadScript()" />
</asp:UpdatePanel> 
```

点击后的代码隐藏`Button`Panel `pnlScriptContent`。

```
protected void ButtonClick(object sender, EventArgs args)
{
    pnlScriptContent.Visible = true;
} 
```

JavaScript 代码如下所示：

```
var LoadScript = function() {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function (sender, args) {
        eval($('#script-content').html());
    };
} 
```

我已经看到了在 UpdatePanel 更新后注入 JavaScript 的其他解决方案，但没有任何方法允许`script`在内容中的 -tags 内注入 JavaScript。

这有什么原因吗？安全可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:03:43.543

您可以使用类的[RegisterClientScriptBlock](http://msdn.microsoft.com/ru-ru/library/bb350750.aspx)静态方法`ScriptManager`**

# ruby-on-rails - 当我有 mongoid 时，我需要一个用于 mongodb 的 Ruby 数据库客户端吗？

> ID：13938404
> 
> 赞同：0
> 
> 时间：2012-12-18T17:32:15.463
> 
> 标签：ruby-on-rails, mongodb, mongoid

我一直在使用传统数据库开发 Rails 应用程序，阅读 SQL 数据库。我试图让自己熟悉 NoSQL，尤其是 MongoDB。我需要得到 ActiveRecord 和 Mongoid 之间的逻辑映射。在我过去工作过的应用程序中，我的堆栈是：ActiveRecord，pg gem（postgresql 客户端）和 postgresql，作为持久数据存储。在 NoSQL 应用程序中，我有 Mongoid 和 MongoDB。我需要相当于 pg gem 还是 mongoid 会处理所有这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-01T05:44:38.597

`pg`MongoDB 堆栈中的等价物是`mongo`MongoDB Ruby 驱动程序。

[https://rubygems.org/gems/mongo](https://rubygems.org/gems/mongo)

Mongoid 依赖`mongo`并`mongo`用于低级操作（CRUD 等）。

# jquery - jquery - 不选择选项时做某事

> ID：13938409
> 
> 赞同：3
> 
> 时间：2012-12-18T17:32:35.670
> 
> 标签：jquery, jquery-selectors

我的问题与此类似： [jQuery <select> option disabled if selected in multiple <select> boxes](https://stackoverflow.com/questions/7309730/jquery-select-option-disabled-if-selected-in-multiple-select-boxes)

这： [如果在其他 <select> 中选择，则禁用 jQuery <select> 选项](https://stackoverflow.com/questions/4610652/jquery-select-option-disabled-if-selected-in-other-select)

但不同。

我有这个 html 表单：

```
<form method="post" action="" name="form_letter">
<label for="letter">Letter</label><br>
<select multiple="multiple" name="letter[]" id="letter">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
</select>

<label for="list_of_a">List of A</label><br>
<select multiple="multiple" name="list_of_a[]" id="list_of_a">
    <option value="A1">A1</option>
    <option value="A2">A2</option>
    <option value="A3">A3</option>
    <option value="A4">A4</option>
</select>

<label for="list_of_b">List of B</label><br>
<select multiple="multiple" name="list_of_b[]" id="list_of_b">
    <option value="B1">B1</option>
    <option value="B2">B2</option>
    <option value="B3">B3</option>
    <option value="B4">B4</option>
</select>

<label for="list_of_c">List of C</label><br>
<select multiple="multiple" name="list_of_c[]" id="list_of_c">
    <option value="C1">C1</option>
    <option value="C2">C2</option>
    <option value="C3">C3</option>
    <option value="C4">C4</option>
</select>

<input type="submit" value="Save">
</form>​ 
```

我想要实现的是当未选择 an`option`然后`select[name="letter[]"]`单击`submit`按钮时，`select`相应字母的列表为`null`or `empty`。

使用场景：
1\. 如果`option`A of`select[name="letter[]"]`没有被选中，那么点击`submit`按钮，`select[name="list_of_a[]"]`将会`empty`或者`null`即使它的选项之一被选中。

2\. B 和 C 也一样。

3\. 如果没有`letter`选择 的选项，则`list_of_a`、`list_of_b`和`list_of_c`为空。

这是我的 js：

```
$("form[name='form_letter']").on("submit", function(e) {
    if ($("select[name='letter[]']").find("option:not(:selected)").val() == "A") {
        $("select[name='list_of_a[]']").val("");
    };

    if ($("select[name='letter[]']").find("option:not(:selected)").val() == "B") {
        $("select[name='list_of_b[]']").val("");
    };

    if ($("select[name='letter[]']").find("option:not(:selected)").val() == "C") {
    $("select[name='list_of_c[]']").val("");
    };

alert("A = " + $("select[name='list_of_a[]']").val() + " and B = " + $("select[name='list_of_b[]']").val() + " and C = " + $("select[name='list_of_c[]']").val());

    e.preventDefault();
    return false;
});​ 
```

我一直在这里[http://jsfiddle.net/VPhPv/21/](http://jsfiddle.net/VPhPv/21/)
研究它， 但被卡住了。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:53:02.863

您的问题是您正在将单个值与`:not`of进行比较`:selected`。正如你所写的那样，你永远不会在你的 if 比较中进入一个真实的条件。如果您将警报（或使用调试器）放入其中，您将看到这一点。

相反，您需要对所选值进行不等于*比较*：

`:selected").val() !=`

[适当的解决方案jsfiddle](http://jsfiddle.net/GmQue/)

您还可以通过在选择器中使用元素 ID 来稍微整理一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:49:30.677

因为我的评论很接近。我想我会做最后的润色，我认为你需要。

重要的是要记住，像这样的多选项选择框将返回一个`array`值。

[http://jsfiddle.net/VPhPv/31/](http://jsfiddle.net/VPhPv/31/)

对应的代码。

```
var $form = $('#myForm'),
    $letterlist = $('#letter'),
    $listA = $('#list_of_a'),
    $listB = $('#list_of_b'),
    $listC = $('#list_of_c');

$form.on("submit", function(e) {
    var a, b, c;

    if ($letterlist.val().indexOf("A") != -1) {
        a = $listA.val();
    };

    if ($letterlist.val().indexOf("B") != -1) {
        b = $listB.val();
    };

    if ($letterlist.val().indexOf("C") != -1) {
        c = $listC.val();
    };

    alert("A = " + a + ", B = " + b + " and C = " + c);

    e.preventDefault();
    return false;
});​ 
```

# html - 即使在添加 btn 类后，引导提交按钮仍显示蓝色

> ID：13938413
> 
> 赞同：0
> 
> 时间：2012-12-18T17:32:49.003
> 
> 标签：html, css, ruby-on-rails-3, twitter-bootstrap

我在我的 Rails 项目中使用引导程序，并且在输入字段和提交按钮上使用 input-append css 类。一切都很好，除了当我将鼠标悬停在提交按钮上时，样式变成蓝色。看起来它忽略了我为其设置的默认灰色类 .btn 并默认为提交按钮具有的蓝色。

```
<div class="input-append">
       <%= text_field_tag :password, "", :class => 'span2' %>
       <%= button_tag "Submit", :class => 'btn'%>
</div> 
```

这是此代码输出到 html 的内容。

```
<div class="input-append">
       <input type="text" value="" name="password" id="password" class="span2">
       <button type="submit" name="button" class="btn">Submit</button>
    </div> 
```

还有谁有相同的问题吗。同样，它仅处于悬停状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:45:37.443

我建议您查看 CSS 以找到影响您的按钮的悬停伪选择器，并摆脱它或覆盖它。

# html - 背景图像未显示在导航栏中的链接上

> ID：13938414
> 
> 赞同：1
> 
> 时间：2012-12-18T17:32:53.590
> 
> 标签：html, css, web-applications

我有一张房子的图片，我想在导航栏上显示为“家”链接。我已经输入了一些 CSS 来实现它，但它似乎不起作用。谁能帮我显示图像？请参阅下面的图像和 CSS 代码进行说明。

![在此处输入图像描述](../Images/3f0ac6c78849808834682c2717628d53.png)

浅蓝色的盒子应该是小白屋所在的地方。请参阅下面的 CSS

```
html, body
{
padding:            0;
margin-right:       auto;
margin-left:        auto;
}

.navbar
{
height:             48px;
width:              100%;
background-color:   #294052;
text-align:         center;
vertical-align:     middle;
margin-bottom:      10px;
}

li
{
display:            inline;
position:           relative;
padding:            20px;
border-right:       inset 2px white;
font-size:          20px;
font-weight:        normal;
font-family:        sans-serif;
vertical-align:     middle;
padding-top:        31px;
padding-bottom:     14px;
}

a
{
text-decoration:    none;
color:              white;
}

li:hover 
{
text-decoration:    underline;
background-color:   #447294;
}

li.home
{
background-color:   #447294;
background-image:   url('home.png');
}

span
{
font-weight:        bold;
} 
```

我已经尝试使用该`display:block`修复程序，但它只会弄乱我的导航栏的其余部分。

和HTML代码...

```
<div class="navbar">
<ul>
    <a href="#"><li class="home"></li></a>
    <a href="#"><li>ABOUT</li></a>
    <a href="#"><li>CyMAL: MUSEUMS, ARCHIVES AND LIBRARIES</li></a>
    <a href="#"><li>CONTACT</li></a>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:38:08.260

要开始调试，我首先尝试使用绝对 URL 来确保可以加载图像。

```
li.home
{
background-color:   #447294;
background-image:   url('full_path_to_image/home.png');
} 
```

另外，请提供 HTML 代码，最好在[http://jsfiddle.net/](http://jsfiddle.net/)（或任何其他类似服务）上制作一个现成的演示。这样我们就可以更好地帮助您。

**编辑：**添加 HTML 代码后，问题似乎确实是图像的路径。

这是一个**工作演示**：http: [//jsfiddle.net/tBNSU/](http://jsfiddle.net/tBNSU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:53:45.947

**您的**背景图片出现在`li.home`; 但`li.home`不够宽，无法显示任何东西。背景图像就像背景颜色——它们不会改变内容的形状。

尝试添加一些内容：

```
<li class="home">home</li> 
```

或者将您的背景图像的对齐方式更改`center center`为可能更清楚地看到它。

# linux - 安装 CPAN 模块而不弄乱系统 Perl 安装

> ID：13938420
> 
> 赞同：0
> 
> 时间：2012-12-18T06:30:18.070
> 
> 标签：linux, filesystems, perl

我听说最好不要从您系统的 Perl 版本所在的 CPAN 安装模块。我知道如何使用命令行安装模块，我只是想知道是否有办法将 CPAN 与系统的核心 Perl 分开。

我是不是该：

*下载源代码并专门为这些模块创建一个目录？*

任何人有他们成功使用的任何其他想法或实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:23:36.357

CPAN 总是与核心分开——注意`/usr/lib/perl5`子目录`core_perl`，`vendor_perl`（发行版打包的 CPAN 模块）和`site_perl`（本地安装的模块）。

ExtUtils *::MakeMaker*和*Module::Build*都默认将所有内容安装到“站点”目录；这也适用于您使用`cpan`or`cpanm`命令安装的所有内容。如果您使用 Linux 发行版的软件包，它们会转到“供应商”路径。

您可以使用以下命令指定不同的安装位置（例如，将所有 CPAN 模块直接保存在您的 home 中）：

```
dir=~/perl5

export PERL5LIB="${dir}"
export PERL_MM_OPT="INSTALL_BASE='${dir}'"
export PERL_MB_OPT="--install-base '${dir}'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:14:35.153

在系统目录中安装时所冒的风险是每个与系统相关的 Perl 脚本都将使用这些模块。如果其中一个模块是系统使用的模块的较新且不兼容的版本，那么您将不高兴。

在私有目录中安装的推荐方法是使用 local::lib。请参阅引导技术：[https ://metacpan.org/module/local::lib](https://metacpan.org/module/local::lib)

设置 local::lib 后，您可以使用任何标准 CPAN 客户端来安装模块。

# selenium - Behat Mink：向活动元素发送按键

> ID：13938422
> 
> 赞同：0
> 
> 时间：2012-12-18T17:33:15.197
> 
> 标签：selenium, behat, mink

我正在尝试测试使用 tab 键导航是否适用于我的系统。这是我的代码：

```
define('TAB_CHARCODE', 9);
define('NO_MODIFIER', '');
// ....
$this->getSession()->getPage()->find('css', ':focus')->keyPress(TAB_CHARCODE, NO_MODIFIER); 
```

这会产生：“不支持伪类焦点”如何在 Behat 中获得当前焦点元素？干杯，

阿尔伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:40:51.983

是的，mink 不支持所有的伪类。就像四处走走一样，您可以使用在您的页面上执行 js 脚本的 executeScript 方法。因此，如果您使用 jQuery，您可以执行以下操作：

```
$this->mink->getSession()->executeScript("
    $(':focus').trigger($.Event('keypress', {which: 9, keyCode: 9}));
"); 
```

# c# - 当 IsFocused=false 时更改文本框的文本

> ID：13938427
> 
> 赞同：0
> 
> 时间：2012-12-18T17:33:51.067
> 
> 标签：c#, wpf, textbox

如何制作以下功能：

如果文本框没有聚焦，并且用户没有在那里输入任何文本，文本框应该有默认值，比如*在此处输入名称*...。如果用户单击该文本框，则该标签应该消失。

感谢任何帮助。

这就是我到目前为止所拥有的。但这是控制模板。我认为这对这个问题没有太大帮助，但无论如何。

```
 <ControlTemplate x:Key="TextBoxBaseControlTemplate" TargetType="{x:Type TextBoxBase}">
        <Border Background="{TemplateBinding Background}" 
            x:Name="Bd" BorderBrush="LightGray"
            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="10">
            <Grid VerticalAlignment="Center">
                <ScrollViewer Margin="5 0 0 0" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled"  x:Name="PART_ContentHost"/>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" TargetName="Bd"/>
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
            </Trigger>
            <Trigger Property="Width" Value="Auto">
                <Setter Property="MinWidth" Value="100"/>
            </Trigger>
            <Trigger Property="Height" Value="Auto">
                <Setter Property="MinHeight" Value="20"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:43:09.347

一种好看的方法是将默认文本设置为水印。我假设这将在 UserControl 中，所以这是我的实现

```
<UserControl.Resources>
    <SolidColorBrush x:Key="brushWatermarkBackground" Color="White" />
    <SolidColorBrush x:Key="brushWatermarkForeground" Color="LightSteelBlue" />
    <SolidColorBrush x:Key="brushWatermarkBorder" Color="Indigo" />

    <utilities:TextInputToVisibilityConverter x:Key="TextInputToVisibilityConverter" />
    <utilities:VisibilityToColorConverter x:Key="VisibilityToColorConverter" />
</UserControl.Resources>
<Grid>
        <TextBlock Name="MsgHeader1" HorizontalAlignment="Center" Margin="18,0,19,134" Width="308" Text="Enter Name Here..." Foreground="{StaticResource brushWatermarkForeground}" Height="46" VerticalAlignment="Bottom" Background="White">
            <TextBlock.Visibility>
                <MultiBinding Converter="{StaticResource TextInputToVisibilityConverter}">
                    <Binding ElementName="MsgHeader2" Path="Text.IsEmpty" />
                    <Binding ElementName="MsgHeader2" Path="IsFocused" />
                </MultiBinding>
            </TextBlock.Visibility>
        </TextBlock>
        <TextBox Name="MsgHeader2" TextWrapping="Wrap" Background="{Binding ElementName=MsgHeader1, Path=Visibility, Converter={StaticResource VisibilityToColorConverter}}" BorderBrush="{StaticResource brushWatermarkBorder}" Margin="18,0,19,134" Text="{Binding MessageHeader}" HorizontalAlignment="Center" Width="308" Height="46" VerticalAlignment="Bottom" />
</Grid> 
```

显然，您必须定义自己的 ValueConverters（我的是我自己的实用程序 xmlns），但这些都很容易。一旦您输入了一些文本，这还将为您的文本提供数据绑定。

# python - 如何将数组的元素用作其余数据的变量名？

> ID：13938430
> 
> 赞同：0
> 
> 时间：2012-12-18T17:34:24.447
> 
> 标签：python, string, variables, matrix

我试图让数据矩阵中的顶部条目（字符串）成为每列中其余（数字）数据的变量名。我使用以下内容打开文件并创建矩阵。

```
with open('x.dat', 'r') as f:
    row = 0
    for line in f:
        words = line.split(',')
        for col in range(len(words)):
            DataMatrix[row][col] = words[col] 
        row += 1
f.close() 
```

但是，我看不到如何获取字符串并将其识别为将由数字列填充的数据“列表”的变量名称。这必须比我做的简单。有什么帮助吗？

数据文件看起来像：...（似乎无法正确显示格式，但每个 [] 都是一行，并且这些行相互堆叠）
['% Time','FrameNo', '版本','X','Y','Z',...] ['66266.265514','948780','2.5','64','0','30'...] [66266.298785','948785 ', 2.5','63','0','32',...] ...</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:48:18.943

你要找的是python的[vars](http://docs.python.org/2/library/functions.html#vars)内置函数。这将为您提供一个`dict`表示范围内的变量。

我没有遵循您示例中的代码足以将此解决方案添加到其中，但这里有一个使用 vars 的示例可能会有所帮助：

```
# Set up some data (which would actually be read from a file in your example)
headers = ['item', 'quantity', 'cost']
data = [['dress', 'purse', 'puppy'], [1, 2, 15], [27.00, 15.00, 2.00]]

for i in range(len(headers)):
  name = headers[i]
  value = list()
  for data_item in data[i]:
    value.append(data_item)
  # This sets the name of the header to the name of a variable
  vars()[name] = value

# Print to prove that vars() worked
print 'Items', item
print 'Quantities', quantity
print 'Costs', cost 
```

产生以下输出：

```
Items ['dress', 'purse', 'puppy']
Quantities [1, 2, 15]
Costs [27.0, 15.0, 2.0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:36:29.903

使用[`int`](http://docs.python.org/2/library/functions.html#int)功能

```
with open('x.dat', 'r') as f:
    row = 0
    for line in f:
        words = line.split(',')
        for col in range(len(words)):
            DataMatrix[row][int(col)] = words[int(col)] 
        row += 1
f.close() 
```

或者，您可以使用[CSV 阅读器](http://docs.python.org/2/library/csv.html)来稍微简化此操作。

```
with open('x.dat', 'rb') as csvfile:
    theReader = csv.reader(csvfile, delimiter=',')
    row=0;
    for line in theReader:
        row+=1
        for col in range(len(line)):
             DataMatrix[row][int(col)] = words[int(col)] 
```

# javascript - Bootstrap + Zeroclipboard = 悬停时无法显示工具提示？

> ID：13938435
> 
> 赞同：7
> 
> 时间：2012-12-18T17:34:52.723
> 
> 标签：javascript, jquery, twitter-bootstrap, zeroclipboard, zeroclipboard-1.x

我正在尝试将 ZeroClipboard 用于元素上的“单击复制”功能，同时显示引导工具提示。

不幸的是，**如果我在元素上使用 ZeroClipboard，则工具提示不起作用**。任何帮助将不胜感激...

```
// BOOTSTRAP TOOLTIP
$('.myDiv').tooltip({
    title:      'Click to copy',
    placement:  'right',
    trigger:    'hover',
    animation:  true
});

// ZEROCLIPBOARD
var clip = new ZeroClipboard.Client();
clip.setHandCursor(true);
$('.myDiv').live('mouseover', function () {
  clip.setText($(this).text());

  if (clip.div) {
    clip.receiveEvent('mouseout', null);
    clip.reposition(this);
  } else clip.glue(this);

  clip.receiveEvent('mouseover', null);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T15:26:17.433

设法让它以一种非常简单的方式工作

```
var zero = new ZeroClipboard($el);
$(zero.htmlBridge).tooltip({title: "copy to clipboard", placement: 'bottom'}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T09:49:47.473

有时很难将所有片段放在一起并工作......这是使用 ZeroClipboard 1.3.2 和 Bootstrap 3.1.0 的完整解决方案：

**HTML：**

```
<a id="copycommand" href="#" data-clipboard-text="text to copy">Copy ...</a> 
```

ZeroClipboard 创建一个 ID 为**global-zeroclipboard-html-bridge**的容器，这是引导工具提示的访问点。

**jQuery：**

```
// initialize Tooltip
$('#global-zeroclipboard-html-bridge').tooltip();

// ZeroClipboad
ZeroClipboard.config({ moviePath: 'ZeroClipboard.swf' });
var clip = new ZeroClipboard(document.getElementById('copycommand'));
clip.on('complete', function(client, args){
  alert("Copied text to clipboard: " + args.text);
});

// settings for the Tooltip    
clip.on('load', function(client) {
  $('#global-zeroclipboard-html-bridge').attr({
    'data-toggle':'tooltip',
    'data-title': 'Tooltip text goes here ...',
    'data-placement': 'bottom',
    'data-html': true
  });
  // show the tooltip
  $('#global-zeroclipboard-html-bridge').tooltip('show');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-29T10:27:51.543

如果您在ZeroClipboard**之后运行 Tooltip，它应该可以正常工作！**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T12:57:25.150

使用 Zero Clipboard 2.2 和 Bootstrap 3 我让它像这样工作

```
var $copyButton = $('.clipboard');
var clip = new ZeroClipboard($copyButton);

clip
  .on('ready', function() {
    $('#global-zeroclipboard-html-bridge').attr({
      'data-toggle': 'tooltip',
      'data-title': 'Copy to clipboard...',
      'data-placement': 'right'
    });
    $('#global-zeroclipboard-html-bridge').tooltip({
      container: 'body',
      trigger: 'hover'
    });
  })
  .on('aftercopy', function() {
    $('#global-zeroclipboard-html-bridge').tooltip('hide');
}); 
```

更改第一行的选择器。

选择器的`#global-zeroclipboard-html-bridge`目标是由零剪贴板组件插入并覆盖复制按钮的 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T00:35:47.007

老问题，但我最近遇到了这个问题并且能够找到解决方案，它相当简单但有点笼统。因为 flash 元素以 10000 的 zindex 定位在页面上的任何元素之上，所以您必须在 flash 元素后面附加选择器和标题。这可以通过 ZeroClipboard 回调来完成。

```
 clip.on( 'load', function(client) {
      $('#global-zeroclipboard-html-bridge').attr('rel', 'tooltip').attr('title', 'Click Here To Copy URL');
  } ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T18:32:43.480

找到了一种解决方法，方法是将工具提示放在单击 Bootstrap 时显示，然后使用 ZeroClipboard 中的钩子在悬停时显示和隐藏它。

这是我的做法：

```
$('div.color-inspiration span').tooltip({
    title:          'Click to copy',
    placement:  'right',
    trigger:        'click',
    animation:  false
});

var element = null;
var clip = new ZeroClipboard.Client();
clip.setHandCursor(true);
$('div.color-inspiration span').live('mouseover', function () {
      element = $(this);

    clip.setText($(this).text());

    if (clip.div) {
        clip.receiveEvent('mouseout', null);
        clip.reposition(this);
    } else clip.glue(this);

    clip.receiveEvent('mouseover', null);
});

clip.addEventListener( 'onMouseOver', my_mouse_over_handler );
function my_mouse_over_handler( client ) {
    $(element).tooltip('show');
}

clip.addEventListener( 'onMouseOut', my_mouse_out_handler );
function my_mouse_out_handler( client ) {
    $(element).tooltip('hide');
}

clip.addEventListener( 'onMouseUp', my_mouse_up_handler );
function my_mouse_up_handler( client ) {
  $(element).tooltip('hide');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-20T03:12:57.463

错误是一个已知问题，并在此处提到：Zeroclipboard 导致问题的错误：请参阅 @ [https://github.com/zeroclipboard/zeroclipboard/issues/369](https://github.com/zeroclipboard/zeroclipboard/issues/369)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-01-13T18:32:27.877

添加到@gnorsilva 的答案。这是成功复制工具提示后我如何在工具提示上设置新文本的方法：

```
$(clip.htmlBridge).tooltip({
    title:     'copy to clipboard',
    placement: 'bottom'
});

clip.on('load', function(client) {
    client.on('complete', function() {
        $('.tooltip .tooltip-inner').text('copied!');
    });
}); 
```

`GitHub`这与单击它们的 ZeroClipboard 元素之一（例如`copy SHA`单击`clone URL`按钮）时达到相同的效果

# c# - 这是在 WebMatrix 中设置和维护会话变量的最佳方式吗？

> ID：13938436
> 
> 赞同：2
> 
> 时间：2012-12-18T17:34:52.747
> 
> 标签：c#, asp.net, session-state, webmatrix, asp.net-webpages

过去，我在使用 WebMatrix 维护会话状态以及在预期它们超时时处理它们时总是遇到很多问题（主要是因为我还在学习）。

必须始终记住用户输入，因为如果他们提交并发生自定义错误，我不希望他们必须将所有信息重新输入到表单中。

我想我（最终）找到了一种方法，可以在将来需要时正确维护和管理超时会话变量。

我意识到还有其他几种在网页之间传输数据的方法，相信我，如果适用，它们肯定会被首先使用。这个问题只与我觉得会话变量是我最好的选择有关。

我的问题是，我一直认为我已经弄清楚了，然后，只有在我设置了一半以上的编码之后，我才意识到它为什么不能很好地工作，然后找到一些草率（但有效）的解决方法这至少适用于该项目。

我将使用会话变量的项目使用公共数据库与 Web 界面组合。通常有 3 个主要页面：添加条目页面、编辑条目页面和查找条目页面。添加条目页面和查找条目页面最终发布并重定向到编辑条目页面。

在我开始我的下一个项目之前，我认为最好先问问我的方法是否至少朝着正确的方向前进，或者我是否仍然没有完全正确地接近这个方向。

这是我认为可能有效的方法（尽管它似乎有点太容易了）：

1.  每页使用局部变量。
2.  在（IsPost）分支中，在发布/重定向之前根据局部变量分配会话变量。
3.  在另一页上，刚被重定向后，使用会话变量分配新的静态局部变量。

换句话说：我将（在必要时）仅使用会话变量来传输将在完全可接受的时间内发生的数据（不允许会话状态有足够的时间超时），然后在需要，每页。

当被迫使用 WebMatrix 中的会话状态时，我是疯了还是这是处理此问题的最佳方法（或至少是一种体面可行的方法）？

对不起，如果这是一个愚蠢的问题 xD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:42:28.253

在我看来，您不应该使用 Session 变量来记住用户在表单中输入的内容。表单 - 添加或编辑 - 应发布到自身以进行验证。这样，值在 Request.Form 集合中可用。如果出现验证错误，您可以轻松地重新填充表单。成功提交后，您插入或更新数据库，然后重定向到另一个页面以防止重复提交。

如果使用得当，会话变量真的很容易使用。我怀疑您的困难出现是因为您将它们用于错误的场景。

# php - 自定义输入数组并在输出中获取它们

> ID：13938439
> 
> 赞同：1
> 
> 时间：2012-12-18T17:34:58.233
> 
> 标签：php, arrays, foreach

我想要获取（处理）值输入和复选框，如下例所示，而不更改复选框中的名称元素，我尝试如下，但这不起作用：

**演示**：[http ://codepad.viper-7.com/4ldRKV](http://codepad.viper-7.com/4ldRKV)

```
<?php
if($_POST){
    //foreach ($_POST['cDA'] as $idx => $value) {
        foreach ($_POST as $idx => $value) {
            echo '<pre>';
            print_r($_POST);
        }
    //}
}
?>
<form action="#" method="post">
    <input type="text" name="cDI[]" value="F1">
        <input type="checkbox" name="cDA[0][]" value="11" checked>
        <input type="checkbox" name="cDA[0][]" value="11" checked>
        <input type="checkbox" name="cDC[1][]" value="22" checked>
        <input type="checkbox" name="cDC[1][]" value="22" checked>
    </br>
    <input type="text" name="cDI[]" value="F2">
        <input type="checkbox" name="cDA[0][]" value="33" checked>
        <input type="checkbox" name="cDA[0][]" value="33" checked>
        <input type="checkbox" name="cDC[][]" value="44" checked>
        <input type="checkbox" name="cDC[][]" value="44" checked>
    </br>
    <input type="text" name="cDI[]" value="F3">
        <input type="checkbox" name="cDA[0][]" value="55" checked>
        <input type="checkbox" name="cDA[0][]" value="55" checked>
        <input type="checkbox" name="cDC[][]" value="66" checked>
        <input type="checkbox" name="cDC[][]" value="66" checked>
    </br>
<input type="submit" value="Submit">
</form> 
```

我希望输出为：（应该如何更改 html 和 php 以获得以下结果？）

```
Array
(
    [cDI] => Array
        (
            [0] => F1
            [1] => F2
            [2] => F3
        )
    [cDA] => Array
        (
            [0] => Array
                (
                    [0] => 11
                    [1] => 11                    
                )
            [1] => Array
                (
                    [0] => 33
                    [1] => 33                    
                )
            [2] => Array
                (
                    [0] => 55
                    [1] => 55                    
                )

        )
    [cDC] => Array
        (
            [0] => Array
                (
                    [0] => 22
                    [1] => 22                    
                )
            [1] => Array
                (
                    [0] => 44
                    [1] => 44                    
                )
            [2] => Array
                (
                    [0] => 66
                    [1] => 66                    
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:43:59.000

如果使用`cDA[0][]`作为输入框集合的名称，会`$_POST['cDA']`变成这样：

```
array(
    0 => array(
        0 => 11,
        1 => 11,
        2 => 33,
        3 => 33,
        4 => 55,
        5 => 55,
    ),
); 
```

使用`cDC[][]`作为输入框的名称，您最终将得到以下数组`$_POST['cDC']`：

```
array(
    0 => array(
        0 => 11,
    ),
    0 => array(
        0 => 11,
    ),
    0 => array(
        0 => 33,
    ),
    0 => array(
        0 => 33,
    ),
    0 => array(
        0 => 55,
    ),
    0 => array(
        0 => 55,
    ),
); 
```

要使它们正确分组，您必须明确设置第一个方括号之间的值：

```
cDA[0][]
cDA[0][]
cDC[0][]
cDC[0][]

cDA[1][]
cDA[1][]
cDC[1][]
cDC[1][]

cDA[2][]
cDA[2][]
cDC[2][]
cDC[2][] 
```

[**演示**](http://codepad.viper-7.com/hopROf)

# coldfusion - 将 Jsoup（Java html 解析器）与 Handlebarsjs 一起使用

> ID：13938442
> 
> 赞同：0
> 
> 时间：2012-12-18T17:35:04.837
> 
> 标签：coldfusion, jsoup, handlebars.js

所以，我正在使用 jsoup，当我显示返回的内容时，我得到：

```
{{#ifcond="" pagetitle="" this.name}} 
```

我正在这样做`local.htmlObj.Body().Html()`

当我需要它返回时：

```
{{#ifCond PAGETITLE this.NAME}} 
```

这是我在做什么

```
<cfset paths    = [] />
<cfset paths[1] = expandPath("/javaloader/lib/jsoup-1.7.1.jar") />
<cfset loader   = createObject("component", "javaloader.JavaLoader").init( paths ) />
<cfset obj      = loader.create( "org.jsoup.Jsoup" ) />

<cfset local.htmlObj = local.jsoupObj.parse( local.template ) />

<cfloop array="#local.htmlObj.select('.sidebar_left')#" index="element">
        <cfif element.attr('section') EQ "test">
            <cfset element.append('HTML HERE') />
        </cfif>
</cfloop> 
```

`local.template`是我的模板，它由大量不同的车把文件组成，我为不同的地方拉动。我正在构建一个返回的车把文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:11:12.293

问题是 JSoup 在允许您访问它之前试图解析无效的 HTML。如果您获取以下 HTML（见此[问题](https://stackoverflow.com/questions/9994261/jsoup-parse-error-tag-table-within-tag-p)），则可以看到更容易理解的此行为示例：

```
<p>
<table>[...]</table>
</p> 
```

它将返回：

```
<p></p>
<table>[...]</table> 
```

在您的情况下，Handelbars 代码被视为在有效 html 中始终具有值的属性（想想`checked="checked"`）。据我所知，没有办法禁用此行为。对于您正在尝试做的工作，这确实是错误的工具。一种更简洁的方法是将文档作为流获取并将其保存到字符串中。

# asp.net-optimization - 使用 System.Web.Optimization 我可以在同一个包中混合 css 和 .less 文件吗？

> ID：13938443
> 
> 赞同：0
> 
> 时间：2012-12-18T17:35:05.730
> 
> 标签：asp.net-optimization, dotless

看起来这是不可能的，因为只有在所有文件都被合并和缩小后才会应用 LessTransform。

```
public class LessTransform : IBundleTransform
{
    public void Process(BundleContext context, BundleResponse response)
    {
        response.Content = LessWeb.Parse(response.Content, (DotlessConfiguration) ConfigurationManager.GetSection("dotless"));
        response.ContentType = "text/css";
    }
} 
```

有没有办法在捆绑时以某种方式预处理较少的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:22:09.677

我最近也有同样的需求，并写了一篇关于我最终想出的解决方案的博客文章。 [这里](http://jareddev.com/post/2013/01/19/Using-less%7B%7D-%28dotless%29-with-MVC4-Web-Optimization)

这可以通过[nuget 包](http://nuget.org/packages/BundleTransformer.Less)/一些 web.config 更改（在包安装后详细说明，因此此处不包括在内）/捆绑配置中的新转换器来相对容易地完成。

# html - 问题系统的 CSS 输入字段和按钮位置

> ID：13938445
> 
> 赞同：1
> 
> 时间：2012-12-18T17:35:48.963
> 
> 标签：html, css, variables, input, position

我在将**具有可变大小的输入字段和具有固定大小的发布按钮定位**在具有固定“外边距”的 div 内时遇到问题。

**我提供了一个[jfiddle 示例](http://jsfiddle.net/jgHAA/)，您可以在其中看到错误的版本。**

在这里你可以看到我的问题：

**错误版本：** [实际网站](http://d.pr/i/KUZj)

**“应该是”版本：** [这就是它应该的样子](http://d.pr/i/swX2)

文字说明：

正如您在第二张图片中看到的那样，底部始终位于底部对我来说很重要......

```
.submitform {
    display: block;
    position: fixed;
    bottom: 0;
    ...more on jfiddle...
} 
```

...并且发布按钮始终在右侧。下半部分的左右间隙应与上半部分相同。困难的是，输入字段应该具有灵活的大小，但应该占据左侧间隙和后按钮之间的所有空间。

我希望你能帮助我，因为在网上尝试和搜索数小时并没有给我带来正确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:45:16.403

试试这个：http: [//jsfiddle.net/jgHAA/1/](http://jsfiddle.net/jgHAA/1/)

```
.submitform {
    background: white;
    display: block;
    position: fixed;
    /* Instead of applying margin and width, simply set the bottom, left, 
       and right properties to 13px */
    bottom: 13px;  
    left: 13px;
    right: 13px;
    /*box-shadow: 0 2px 7px rgba(0, 0, 0, 0.1);*/
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
    padding: 7px;
    overflow:hidden;
    box-sizing:border-box;
} 
```

要让文本框填充宽度，您可以使用相同的技术：http: [//jsfiddle.net/jgHAA/2/](http://jsfiddle.net/jgHAA/2/)

```
.submitform  #post_input {
    display: block;
    font-size: 18px;
    border: none;
    outline: none;
    padding: 3px;
    /* set left and right, and z-index to make it appear behind the button.*/
    left:7px;
    right:7px;
    position:absolute;
    z-index:-1;
} 
```

# debugging - 如何使用 gdbinit 设置 arg 但仅在 gdb 中加载特定二进制文件时？

> ID：13938446
> 
> 赞同：1
> 
> 时间：2012-12-18T17:36:10.153
> 
> 标签：debugging, gdb, elf, gdbinit

如何`set arg -d`通过文件 ~/.gdbinit 但仅在 gdb 中加载特定的二进制文件时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:16:08.903

使用 python，您可以将以下内容添加到您的 gdbinit

```
py
def on_bin_echo(): gdb.execute("set arg -d")
exec_funcs = {"/bin/echo" : on_bin_echo}
map(lambda x: exec_funcs[x.filename]() if exec_funcs.has_key(x.filename) else None, gdb.objfiles())
end 
```

# javascript - Jslint 使用 '||' 运算符而不是条件运算符

> ID：13938448
> 
> 赞同：6
> 
> 时间：2012-12-18T17:36:28.790
> 
> 标签：javascript, syntax, jslint

我有 jslint 抱怨我在`||`下面的代码中使用运算符，

```
query = ['browser' + (ieVersion ? ieVersion : 'UNKNOWN')] 
```

我尝试使用`||`运算符，但结果错误，

```
query = ['browser' + ieVersion || 'UNKNOWN'] 
// => ['browserundefined'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T17:37:47.503

[运算符优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)错误，试试这个：

```
query = ['browser' + (ieVersion || 'UNKNOWN')] 
```

没有额外的括号`+`运算符更强大，JavaScript 引擎将其评估为：

```
query = [('browser' + ieVersion) || 'UNKNOWN'] 
```

请注意，这`'browser' + ieVersion`绝不是*虚假的*，因此您永远不会看到`'UNKNOWN'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:37:45.977

括号？

```
query = ['browser' + (ieVersion || 'UNKNOWN')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T17:37:59.507

您需要将表达式括在括号中：

```
query = ['browser' + (ieVersion || 'UNKNOWN')] 
```

# web-services - 如何仅使用 Facebook 进行身份验证/授权来保护 Web 服务？

> ID：13938454
> 
> 赞同：2
> 
> 时间：2012-12-18T17:36:46.250
> 
> 标签：web-services, security, facebook-graph-api

**设置**

```
1\. A LAMP web application that uses SOLELYFacebook for authent./author
(i.e. NO credentials set/asked by the web app)
2\. A smartphone app that uses ONLY Facebook for authent./author.
3\. A web service provided by -1- for -2- to communicate. https, of course.
4\. A client-side Javascript that uses the same web service (-3-) for asynchronous CRUD 
```

**用例：**

```
A. The user signs in to - 1 - and Facebook id is saved on
server-side as well as a custom id.
B. The user signs in to - 2 - and the same happens on client-side.
C. The user enters data into - 2- which is stored locally. 
D. Now comes the tricky part: 2 must send the data to 1 via 3.
E. Now even trickier: 4 must do the same. 
```

**我的问题：**

我的问题是找到一种策略来验证和授权 D & E 中的通信。如果用户要输入凭据，这将很容易。这些将存储在本地，他是触发器。而且只有他！但是，当仅将 Facebook 用于 auth/author. 时，authent. 永远不会发生在客户端。因此，据我了解，服务器必须提供某种合法性。例如，这将是密钥或令牌。

**我的问题：** 客户端应用程序 -3- 最初应该如何向服务器验证用户（facebook id？）？如何防止某人将 facebook id 发送到服务器服务，从而获得对 CRUD 的访问权限？某种应用程序密钥（如 Facebook 访问令牌）是否足够？

如果是这样，浏览器中的 -4- Javascript 怎么样？在哪里存储应用程序密钥？窃取该令牌，将其用于-1-的身份验证然后访问某个Facebook用户的所有数据不是很容易吗？

# c# - 打包文件无需提取即可读取

> ID：13938455
> 
> 赞同：1
> 
> 时间：2012-12-18T17:36:47.537
> 
> 标签：c#, zip, dotnetzip, sharpziplib, system.io.packaging

在我当前的项目中，我正在处理大量文件（超过数十亿个文件，容量在 1 到 30 KB 之间）作为资源，为我的客户复制它们是一项耗时的工作。我正在寻找一种打包机制，可以帮助我将其中的每一个 1000 或 10000 个打包到一个文件中，从而提高复制速度，因为在这种情况下，我处理的文件数量要少得多；并且从我的应用程序中读取它们在我编写或更改它们时不需要任何提取和压缩（因为分布式应用程序的性能和性质以及在客户端之间共享资源），我已经搜索并且我了解以下 ZIP 库：

*   SharpZipLib
*   点网邮编
*   System.IO.打包

但似乎上述库需要 - 至少 - 遍历文件才能访问 zip 或包中的文件而无需提取。我需要通过 zip 或包文件中的地址（文件夹结构层次结构）访问文件！以下链接是通过迭代 zip 文件回答的类似问题：

[如何从压缩文件中读取数据而无需解压缩整个文件](https://stackoverflow.com/questions/5967864/how-to-read-data-from-a-zip-file-without-having-to-unzip-the-entire-file)

[压缩文件内的内容](https://stackoverflow.com/questions/3170695/content-inside-zip-file)

有人对此问题有任何想法或解决方案吗？

顺便说一句，我正在用 C# 编码，该项目是基于 Windows 窗体的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:49:03.077

我会做我自己的包格式。使用 GZipStream 或其他东西。对于每个文件，在获得字节值之后，您需要使用 GZipStream 压缩它们，并且您需要在包格式中创建一个包含每个文件（名称、起始位置和长度）的标头。在您的标题中使用此数据，这可能会在您的包的开头。你可以得到你想要的文件的信息，在你找到压缩数据的位置之后，你就得到了具有指定长度的字节数组。

但是如果你修改了一个文件，你需要在修改文件后重新计算所有索引。

# css - CSS过渡自动高度不起作用

> ID：13938460
> 
> 赞同：84
> 
> 时间：2012-12-18T17:37:19.003
> 
> 标签：css, animation, css-transitions

我有一个网站，我决定用纯 CSS 片段替换基于 jquery 的切换框。当我为过渡使用固定高度值（CSS的最后几行）时，效果很好，但是有了该`auto`值，动画就消失了，只有高度变化才有效果！

有没有办法将它与自动值一起使用？我想使用可变文本而不是脚本。

```
.ac-container{
  width: 400px;
  margin: 10px auto 30px auto;
  text-align: left;
}
.ac-container label{
  font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
  padding: 5px 20px;
  position: relative;
  z-index: 20;
  display: block;
  height: 30px;
  cursor: pointer;
  color: #777;
  text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
  line-height: 33px;
  font-size: 19px;
  background: #ffffff;
  background: -moz-linear-gradient(top, #ffffff 1%, #eaeaea 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#ffffff), color-stop(100%,#eaeaea));
  background: -webkit-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
  background: -o-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
  background: -ms-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
  background: linear-gradient(top, #ffffff 1%,#eaeaea 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eaeaea',GradientType=0 );
  box-shadow: 
    0px 0px 0px 1px rgba(155,155,155,0.3), 
    1px 0px 0px 0px rgba(255,255,255,0.9) inset, 
    0px 2px 2px rgba(0,0,0,0.1);
}
.ac-container label:hover{
  background: #fff;
}
.ac-container input:checked + label,
.ac-container input:checked + label:hover{
  background: #c6e1ec;
  color: #3d7489;
  text-shadow: 0px 1px 1px rgba(255,255,255, 0.6);
  box-shadow: 
    0px 0px 0px 1px rgba(155,155,155,0.3), 
    0px 2px 2px rgba(0,0,0,0.1);
}

.ac-container input{
  display: none;
}
.ac-container section{
  background: rgba(255, 255, 255, 0.5);
  margin-top: -1px;
  overflow: hidden;
  height: 0px;
  position: relative;
  z-index: 10;
  -webkit-transition: height 0.3s ease-in-out, box-shadow 0.6s linear;
  -moz-transition: height 0.3s ease-in-out, box-shadow 0.6s linear;
  -o-transition: height 0.3s ease-in-out, box-shadow 0.6s linear;
  -ms-transition: height 0.3s ease-in-out, box-shadow 0.6s linear;
  transition: height 0.3s ease-in-out, box-shadow 0.6s linear;
}
.ac-container section p{
  font-style: italic;
  color: #777;
  line-height: 23px;
  font-size: 14px;
  padding: 20px;
  text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
}
.ac-container input:checked ~ section{
  -webkit-transition: height 0.5s ease-in-out, box-shadow 0.1s linear;
  -moz-transition: height 0.5s ease-in-out, box-shadow 0.1s linear;
  -o-transition: height 0.5s ease-in-out, box-shadow 0.1s linear;
  -ms-transition: height 0.5s ease-in-out, box-shadow 0.1s linear;
  transition: height 0.5s ease-in-out, box-shadow 0.1s linear;
  box-shadow: 0px 0px 0px 1px rgba(155,155,155,0.3);
}
.ac-container input:checked ~ section.ac-small{
  height: 120px; /*auto*/
}
```

```
<div class="ac-container">
  <div>

    <input id="ac-1" name="accordion-1" type="checkbox" />
    <section class="ac-small">
      <p>Some content... </p>
    </section>
    <label for="ac-1">About us</label>

  </div>	

  <div>	
    <input id="ac-2" name="accordion-2" type="checkbox" />
    <section class="ac-small">
      <p>Some content... </p>
    </section>
    <label for="ac-2">About us</label>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-18T17:53:49.167

如果您只想使用 CSS，一种解决方案是转换`max-height`而不是`height`并将其设置为比它所能获得的更大的东西......

这是一个[演示](http://jsfiddle.net/3WK9Y/3/)

您将需要稍微调整过渡的速度，但至少该示例让您了解如何完成。不要忘记在过渡中更改属性。从`transition: height 0.5s;`到`transition: max-height 0.5s;`。

希望这可以帮助！

```
.ac-container{
    width: 400px;
    margin: 10px auto 30px auto;
    text-align: left;
}
.ac-container label{
    font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
    padding: 5px 20px;
    position: relative;
    z-index: 20;
    display: block;
    height: 30px;
    cursor: pointer;
    color: #777;
    text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
    line-height: 33px;
    font-size: 19px;
    background: #ffffff;
    background: -moz-linear-gradient(top, #ffffff 1%, #eaeaea 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#ffffff), color-stop(100%,#eaeaea));
    background: -webkit-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
    background: -o-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
    background: -ms-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
    background: linear-gradient(top, #ffffff 1%,#eaeaea 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eaeaea',GradientType=0 );
    box-shadow: 
        0px 0px 0px 1px rgba(155,155,155,0.3), 
        1px 0px 0px 0px rgba(255,255,255,0.9) inset, 
        0px 2px 2px rgba(0,0,0,0.1);
}
.ac-container label:hover{
    background: #fff;
}
.ac-container input:checked + label,
.ac-container input:checked + label:hover{
    background: #c6e1ec;
    color: #3d7489;
    text-shadow: 0px 1px 1px rgba(255,255,255, 0.6);
    box-shadow: 
        0px 0px 0px 1px rgba(155,155,155,0.3), 
        0px 2px 2px rgba(0,0,0,0.1);
}

.ac-container input{
    display: none;
}
.ac-container section{
    background: rgba(255, 255, 255, 0.5);
    margin-top: -1px;
    overflow: hidden;
    max-height: 0px;
    position: relative;
    z-index: 10;
    -webkit-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
    -moz-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
    -o-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
    -ms-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
    transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
}
.ac-container section p{
    font-style: italic;
    color: #777;
    line-height: 23px;
    font-size: 14px;
    padding: 20px;
    text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
}
.ac-container input:checked ~ section{
    -webkit-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
    -moz-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
    -o-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
    -ms-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
    transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
    box-shadow: 0px 0px 0px 1px rgba(155,155,155,0.3);
}
.ac-container input:checked ~ section.ac-small{
    max-height: 500px; /*auto*/
}
```

```
<div class="ac-container">
    <div>

        <input id="ac-1" name="accordion-1" type="checkbox" />
        <section class="ac-small">
            <p>Some content...Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content... Some content...  </p>
        </section>
        <label for="ac-1">About us</label>

    </div>    

<div>    
        <input id="ac-2" name="accordion-2" type="checkbox" />
        <section class="ac-small">
            <p>Some content... </p>
        </section>
        <label for="ac-2">About us</label>
</div>
</div>
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-18T17:57:18.913

您不能对“自动”维度进行动画处理（不幸的是）。我通常的方法是为具有单个子元素的外部 DIV 的高度设置动画，该子元素是仅用于测量内容高度的无样式 DIV。

```
function growDiv() {
  var growDiv = document.getElementById('grow');
  if (growDiv.clientHeight) {
    growDiv.style.height = 0;
  } else {
    var wrapper = document.querySelector('.measuringWrapper');
    growDiv.style.height = wrapper.clientHeight + "px";
  }
}
```

```
#grow {
  -moz-transition: height .5s;
  -ms-transition: height .5s;
  -o-transition: height .5s;
  -webkit-transition: height .5s;
  transition: height .5s;
  height: 0;
  overflow: hidden;
  outline: 1px solid red;
}
```

```
<input type="button" onclick="growDiv()" value="grow">
<div id='grow'>
  <div class='measuringWrapper'>
    <div>
      The contents of my div.
    </div>
    <div>
      The contents of my div.
    </div>
    <div>
      The contents of my div.
    </div>
    <div>
      The contents of my div.
    </div>
    <div>
      The contents of my div.
    </div>
    <div>
      The contents of my div.
    </div>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-06-23T11:40:02.727

您应该使用 scaleY。

```
ul {
  background-color: #eee;
  transform: scaleY(0);    
  transform-origin: top;
  transition: transform 0.3s ease-in-out;
}    
p:hover ~ ul {
  transform: scaleY(1);
}
```

```
<p>Here (scaleY(1))</p>
<ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ul>
```

或者，您可以使用`clip`剪切*列表*。

```
ul {
  clip: rect(auto, auto, 0, auto);
  position: absolute;
  margin: 0;
  padding: .5rem;

  color: white;

  background-color: rgba(0, 0, 0, 0.8);

  transition-delay: 0.29s;
  transition-property: clip;
  transition-duration: 0.5s;
  transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
h3:hover ~ ul,
h3:active ~ ul {
  clip: rect(auto, auto, 10rem, auto);
}
```

```
<h3>Hover here</h3>
<ul>
  <li>This list</li>
  <li>is clipped.</li>
  <li>A clip transition</li>
  <li>will show it</li>
</ul>
<p>
  Some text...
</p>
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-18T17:41:08.567

CSS 过渡不适用于自动值。使用 JavaScript 获取滚动高度`el.scrollHeight`或使用 max-height 代替。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T17:42:38.330

`auto`不是可动画属性的合适类型，请参阅[CSS 过渡：7\. 可动画属性](http://www.w3.org/TR/css3-transitions/#animatable-properties)。您需要长度 ( `px`, `em`,...) 或百分比 ( `13.37%`)。

因此，只有 CSS 解决方案是不可能的，只要`auto`不添加到列表中。您需要使用 JavaScript 或特定的长度值。

# html - 如何使用html表单从客户端获取目录路径

> ID：13938463
> 
> 赞同：0
> 
> 时间：2012-12-18T17:37:40.317
> 
> 标签：html

我正在开发一些只能在我的本地电脑上使用的网络应用程序。

问题是我希望能够浏览到某个目录或文件并获取其路径。那么这是否可能使用一些文件/目录路径选择器（不是整个目录，只是它的路径）。我不想在文本输入中手动键入路径，而是希望有一些可视化的方式来导航到目录。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T17:47:07.427

以前删除

编辑：

```
$("#someFileUpload").change(InputChanged);
function InputChanged(e){
    var fileList = e.target.files;
    //You now have a list of the files uploaded, from here you can work with the objects..
} 
```

# c# - 为什么要抽象数据访问层？

> ID：13938467
> 
> 赞同：0
> 
> 时间：2012-12-18T17:37:51.730
> 
> 标签：c#, asp.net, oop, c#-4.0, c#-3.0

当代码的当前范围没有任何实现细节可用时，应使用接口。

当您可以获得一些实现细节时，应该使用摘要。

查询 - 为什么仍然需要这些术语？为什么业务对象不能直接与 DataAccess.SqlServer 层通信？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:40:54.027

> 当代码的当前范围没有任何实现细节可用时，应使用接口。

并不真地。你指的是封装。有“信息专家”的概念。只有知道如何做某事的班级才能做这件事。接口用于多态性和解耦。当使用代码想要以相同的方式处理某些类型的对象时，该代码可以通过将所有这些对象视为接口类型来以相同的方式使用它们。

> 当您可以获得一些实现细节时，应该使用摘要

我不确定你在这里的意思。我认为你很困惑，因为这听起来不对。抽象类的使用方式与接口相同，只是它们被允许在其中实现。

> 查询 - 为什么仍然需要这些术语？为什么业务对象不能直接与 DataAccess.SqlServer 层通信？

它们可以，但以可维护性、灵活性和可测试性为代价。如果你想用另一个替换你的数据层，你不能因为消费代码直接依赖于当前数据层。如果你想对你的逻辑进行单元测试，你不能不打数据库。如果您将数据库类放在接口后面，您可以在单元测试中模拟数据层并测试您的逻辑类而无需访问数据库。

**非常简短的例子**

```
public Foo FooLogic
{
    IFooData fooData = DataAccessFactory.GetDataClass<IFooData>();
    return fooData.GetFoo();
} 
```

现在您的逻辑类不绑定到特定的数据类。工厂可以返回一个真正的 FooData 实现，也可以返回一个模拟数据对象，或者可以在不影响逻辑类中的代码的情况下放置一个新的数据访问层。

# android - facebooksdk 的 FBAndroid-2.0.apk 我们应该与我们的应用程序一起安装它吗？

> ID：13938468
> 
> 赞同：0
> 
> 时间：2012-12-18T17:37:55.920
> 
> 标签：android, facebook, facebook-android-sdk

首先，如果这是一个重复的问题，让我道歉。我进行了搜索，但没有看到类似的。我的问题是这个。我们是否应该以某种方式始终将 FBAndroid-2.0.apk 与我们为需要使用 Facebook 的 Android 开发的应用程序一起包含？那么假设我将 MyCoolAppWithFacebook.apk 放在 GooglePlay 上，我应该将它与 FBAndroid-2.0.apk 打包在一起吗？如果是这样，如何做到这一点？facebook 开发者网站让您也使用“adb”安装它，如“adb install”。如果我将 FBAndroid-2.0.apk 放在 MyCoolAppWithFacebook/bin 文件夹中，那么每次我从 Eclipse 进行清理时它都会被删除。也许我错过了一些东西。感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:01:25.137

不，他们让你在模拟器上安装它以进行测试。当用户尝试从您的应用程序使用 facebook 时，facebook SDK 将打开本机 facebook 应用程序（如果它安装在用户设备上），或者它将打开浏览器并通过他们的网站处理身份验证。

# php - rtf 到 html 列表

> ID：13938471
> 
> 赞同：2
> 
> 时间：2012-12-18T17:38:07.723
> 
> 标签：php, html, vba, ms-word

简要介绍一下背景，我有很多笔记，我在 15 年前以 wpd 格式输入，大约 10 年前，我将它们转换为 rtf 格式，现在我想将它们转换为 html。所有的 php 示例，我都看过使用非常基本的 html。我想这样做的方式将涉及嵌套列表。

[http://dl.dropbox.com/u/47490038/ech.rtf](http://dl.dropbox.com/u/47490038/ech.rtf)

[https://dl.dropbox.com/u/47490038/notes/index.html](https://dl.dropbox.com/u/47490038/notes/index.html)

到目前为止，我已经使用了下面的宏，从 rtf 到 txt，但现在 php 部分超出了我的范围，其中一些可以通过计算每行开头的制表符或空格来完成，请参阅上面的 url所需的输出。我可以稍后添加其他样式。

我愿意接受有关如何执行此操作的建议，即使它是我不熟悉的语言。即使是宏，我也不是很满意，我希望能够选择 word 之外的文件夹或文件，考虑到我有 100 个要转换的宏，甚至可以通过拖放来选择。

```
 Sub ChangeDocsToTxtOrRTFOrHTML()
            'with export to PDF in Word 2007
                    Dim fs As Object
                    Dim oFolder As Object
                    Dim tFolder As Object
                    Dim oFile As Object
                    Dim strDocName As String
                    Dim intPos As Integer
                    Dim locFolder As String
                    Dim fileType As String
                    On Error Resume Next
                    locFolder = InputBox("Enter the folder path to RTFs", "File Conversion", "C:\myDocs")
                    Select Case Application.Version
                            Case Is < 12
                                    Do
                                            fileType = UCase(InputBox("Change DOC to TXT, RTF, HTML", "File Conversion", "TXT"))
                                    Loop Until (fileType = "TXT" Or fileType = "RTF" Or fileType = "HTML")
                            Case Is >= 12
                                    Do
                                            fileType = UCase(InputBox("Change DOC to TXT, RTF, HTML or PDF(2007+ only)", "File Conversion", "TXT"))
                                    Loop Until (fileType = "TXT" Or fileType = "RTF" Or fileType = "HTML" Or fileType = "PDF")
                    End Select
                    Application.ScreenUpdating = False
                    Set fs = CreateObject("Scripting.FileSystemObject")
                    Set oFolder = fs.GetFolder(locFolder)
                    Set tFolder = fs.CreateFolder(locFolder & "Converted")
                    Set tFolder = fs.GetFolder(locFolder & "Converted")
                    For Each oFile In oFolder.Files
                            Dim d As Document
                            Set d = Application.Documents.Open(oFile.Path)
                            strDocName = ActiveDocument.Name
                            intPos = InStrRev(strDocName, ".")
                            strDocName = Left(strDocName, intPos - 1)
                            ChangeFileOpenDirectory tFolder
                            Select Case fileType
                            Case Is = "TXT"
                                    strDocName = strDocName & ".txt"
                                    ActiveDocument.SaveAs FileName:=strDocName, FileFormat:=wdFormatText
                            Case Is = "RTF"
                                    strDocName = strDocName & ".rtf"
                                    ActiveDocument.SaveAs FileName:=strDocName, FileFormat:=wdFormatRTF
                            Case Is = "HTML"
                                    strDocName = strDocName & ".html"
                                    ActiveDocument.SaveAs FileName:=strDocName, FileFormat:=wdFormatFilteredHTML
                            Case Is = "PDF"
                                    strDocName = strDocName & ".pdf"

                                    ' *** Word 2007 users - remove the apostrophe at the start of the next line ***
                                    'ActiveDocument.ExportAsFixedFormat OutputFileName:=strDocName, ExportFormat:=wdExportFormatPDF

                            End Select
                            d.Close
                            ChangeFileOpenDirectory oFolder
                    Next oFile
                    Application.ScreenUpdating = True
            End Sub 
```

我意识到我问了很多，任何指导、建议、帮助、代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:02:47.633

在我看来，您的源文档在 RTF 中，但它们不使用任何基于 RTF 的嵌套。那正确吗？例如，“2 级”项目符号与“1 级”项目符号的不同不是因为 RTF 中的任何内容，而是因为有人添加了更多空格？

例如查看文件，我看到很多 \par 标记，但没有表示嵌套。所以你有一个 \par\ul 块（例如在“原始教堂”中），然后直接进入 A.1 小节，除了标签和祈祷（可以这么说！）

鉴于此，您不能过分依赖 RTF。我的建议是删除所有 RTF 标记，留下一个布局仅通过使用空格和制表符定义的文档。然后，处理每一行（Perl 对此很有用），并根据空格的数量和前导组合的使用情况来计算，例如是否正在启动一个新列表。并相应地插入标签。

这会很丑陋，但这就是差价的代价。

# javascript - 未捕获的类型错误：Object Indtast CPR-nummeret，der skal valideres。没有方法“调用”

> ID：13938474
> 
> 赞同：0
> 
> 时间：2012-12-18T17:38:16.533
> 
> 标签：javascript, jquery, frontend

我目前正在开发一个新网站，并且正在测试这些功能。我的所有代码都可以工作，但返回一个错误，我不明白也不知道如何解决。

```
<script type="text/javascript">
var eval = "Indtast CPR-nummeret, der skal valideres.";
$(document).ready(function () {
   $("#showads").html($("#ads").html());
});
function cprToBool(cpr){
    $.get('ajax.php',{ content: cpr }, function(data) {
        eval = data;
        $("#cprinput").val(eval);
        $("#cprinput").blur();
        });
             $("#showads").html($("#ads").html());   
}
function checkSubmit(e)
{
  if(e && e.keyCode == 13)
   {
    cprToBool($("#cprinput").val());
   }
}
</script> 
```

调试后，我很确定它是

```
$("#showads").html($("#ads").html()); 
```

这导致了这些错误。它返回

```
Uncaught TypeError: Object Indtast CPR-nummeret, der skal valideres. has no method 'call' 
```

这是`eval`变量的名称。有人知道它为什么这样做吗？

PS。我已经正确地包含了 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:41:49.390

将变量的名称从更改为`eval`其他名称……`eval2`就可以了。

jQuery 库中的某些内容正在尝试使用内置`eval`方法并且无法完成，因为您已经用字符串覆盖了它......这是不可调用的。

jQuery 多次使用此代码：

```
window[ "eval" ].call 
```

并且由于您`eval`在全局范围内声明了变量，`window[ "eval" ]`因此被覆盖了。如果您在不同的范围内（以某种方式）声明它，它不会与 jQuery 代码冲突，但您将无法再在该范围内使用内置`eval`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:45:36.647

这里的答案/评论是正确的，您的覆盖`eval`导致其他代码段出错。您可以按照建议更改变量名称，尽管更好的建议 IMO 实际上是使用本地化变量；只要您不打算在自己的代码范围内使用，只要您的变量仅对您的代码可见`eval`，覆盖它就**不是一个禁忌，而且根本不是问题。**

# javascript - 按下拉菜单过滤

> ID：13938475
> 
> 赞同：2
> 
> 时间：2012-12-18T17:38:24.780
> 
> 标签：javascript, jquery, html, drop-down-menu, filter

我有 2 列页面第一列：我想创建 2 个下拉菜单。第一个包含类别，第二个包含与该类别相关的帖子。

意思是当有人在第二个菜单中选择类别（笔记本电脑）时，只会出现笔记本电脑。And when choosing both options and clicking submit the posts on the the other column would filter to only the product that he selected.

您能帮我解决其中任何一个问题吗，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:49:20.227

按照这个例子（嵌套组合）：

[http://www.prodiven.com/jcombo/](http://www.prodiven.com/jcombo/)

# kineticjs - kinetic.js 能够拖出舞台吗？

> ID：13938478
> 
> 赞同：0
> 
> 时间：2012-12-18T17:38:31.357
> 
> 标签：kineticjs

有谁知道是否可以设置 kinetic.js 以便用户可以拖动到舞台外？如果用户将鼠标移出舞台，一旦鼠标离开舞台区域，他们就会失去对项目的抓握......如果您拖动的图像大于舞台，这会很烦人。（我正在设置一个裁剪界面，他们将图像拖到蒙版后面以裁剪个人资料图片 - 类似于 twitter 正在做的事情）。

我四处搜索，找不到任何关于如何解决这个问题的具体信息。似乎其他人在这里遇到了类似的问题，不得不稍微破解源代码来修复它：[Kinetic.js 不要失去对鼠标的控制](https://stackoverflow.com/questions/13083960/kinetic-js-dont-lose-grip-on-mouse-out)

我的想法是让舞台比现在大得多，并设置一个图层作为较小的遮罩区域，但是如果 kineticjs 只是跟踪鼠标事件，即使鼠标离开舞台也会更方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:11:14.897

您可以使用 javascript 来跟踪鼠标的位置，并使用 .simulate() 继续拖动对象，即使鼠标在舞台之外。或者您可以在鼠标离开后放大舞台。但基本上，您的舞台是一个 div/canvas，并且仅限于您定义它的位置。其他一切都是模拟其动作的技巧。

# jquery - 使用带有选择选项的 jquery ui 选项卡传递变量

> ID：13938479
> 
> 赞同：2
> 
> 时间：2012-12-18T17:38:42.920
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, jquery-tabs

我正在为每个包含表单元素的应用程序使用选项卡。当用户导航到不同的选项卡并修改字段时，将设置隐藏变量“IsDirty”。

当我在选项卡上实现 beforeActivate 事件时...我检查是否有任何值已更改并将隐藏变量设置为“IsDirty”，我在 beforeActivate 中执行此操作，因为您可以访问旧选项卡和新选项卡，例如：

```
 beforeActivate: function (event, ui) {
        ...
        $panel_Old.find("input#hdIsDirty").val('0');
        $tabs.tabs('select', $tab_New.index());
        $panel_Old.find("input#hdIsDirty").val('1');
        ...
     }, 
```

然后我也实现了选择事件，例如：

```
 select: function (event, ui) {
         // other code here
     } 
```

我的问题是……在 beforeActivate 事件中……当我打电话时

```
 $tabs.tabs('select', $tab_New.index()); 
```

我可以传递一些参数，例如...上一个选项卡...选择事件将作为自定义参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:04:51.790

答案是否定的，除非您修改小部件本身，否则您不能将自定义参数传递给事件。

如果您愿意，您**可以**做的是为您的事件中的小部件设置一个属性，然后稍后检索它们：

```
beforeActivate: function (event, ui) {
    ...

    $(this).attr('data-oldtab', $tab_Old.index()); // or whatever information you want

    $panel_Old.find("input#hdIsDirty").val('0');
    $tabs.tabs('select', $tab_New.index());
    $panel_Old.find("input#hdIsDirty").val('1');
    ...
 }, 
```

然后，绑定时`select`：

```
 select: function (event, ui) {
     oldtabindex = $(this).data('oldtab');
     // other code here
 } 
```

有关更多信息，`data()`请阅读[此处](http://api.jquery.com/data/)。

# javascript - 从文本框中读取输入并将其存储在 JavaScript 中的数组中

> ID：13938480
> 
> 赞同：3
> 
> 时间：2012-12-18T17:38:43.033
> 
> 标签：javascript, arrays

我有一个`<textarea>`允许以字符串的形式输入文本。然后，用户单击一个按钮，该按钮在表格的文本区域中显示他们输入的内容。

我需要使用一个数组来存储用户输入的内容，然后将其显示回`<textarea>`数组中的表中的另一个元素中，其中用户输入是从输入框中存储的。

任何关于如何从用户输入中填充数组和堆栈的指针都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:40:19.643

你可以像这样声明你的数组

```
var yourArray = new Array(); 
```

或者

```
var yourArray = []; 
```

要将项目添加到数组：

```
yourArray.push(yourString); 
```

为了让您可以使用索引（几乎任何其他语言）

```
yourArray[i] 
```

您甚至可以像这样设置为对象数组：

```
yourArray.push({ text : 'blablabla'}) 
```

因此，在您的情况下，填充数组可能是这样的：

```
var inputText = document.getElementById('id_of_input').value;
yourArray.push(inputText);

// show it

for(var i=0; i<yourArray.length; i++) {
    alert(yourArray[i]);
} 
```

# c# - 如何让 BigInteger 正确看到这个 Hex 字符串的二进制表示？

> ID：13938483
> 
> 赞同：1
> 
> 时间：2012-12-18T17:39:14.623
> 
> 标签：c#, biginteger, performance, twos-complement

**问题**

我有一个`byte[]`转换为十六进制字符串，然后像这样解析该字符串`BigInteger.Parse(thatString,NumberSyles.Hexnumber)`。

这似乎很浪费，因为 BigInteger 能够接受一个字节 []，只要考虑到二进制补码。

* * *

**一个工作（低效）的例子**

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger%28VS.100%29.aspx)，最后一个字节的最高有效位应为零，以便以下十六进制数为正数。以下是存在此问题的十六进制数示例：

```
byte[] ripeHashNetwork = GetByteHash();
foreach (var item in ripeHashNetwork)
{
   Console.Write(item + "," );
} 

// Output:  
//      0,1,9,102,119,96,6,149,61,85,103,67,158,94,57,248,106,13,39,59,238,214,25,103,246

// Convert to Hex string using this http://stackoverflow.com/a/624379/328397
// Output: 
//       00010966776006953D5567439E5E39F86A0D273BEED61967F6` 
```

好的，让我们将该字符串传递给 的静态方法`BigInteger`：

```
 BigInteger bi2 = BigInt.Parse(thatString,NumberSyles.Hexnumber);

// Output bi2.ToString() ==
//                {25420294593250030202636073700053352635053786165627414518} 
```

既然我有一个数据基线，并且知道有效的转换，我想让它更好/更快/等等。

* * *

**一个不工作（高效）的例子**

`byte[]`现在我的目标是往返 a`BigInt`并使结果看起来像 `25420294593250030202636073700053352635053786165627414518`. 让我们开始吧：

因此，根据 MSDN，我的最后一个字节需要一个零，以避免我的数字被视为二进制的恭维。我将添加零并打印出来以确保：

```
foreach (var item in ripeHashNetwork)
{
   Console.Write(item + "," );
} 

// Output:                            
//    0,1,9,102,119,96,6,149,61,85,103,67,158,94,57,248,106,13,39,59,238,214,25,103,246,0 
```

好的，让我们将其传递`byte[]`给 的构造函数`BigInteger`：

```
 BigInteger bi2 = new BigInteger(ripeHashNetwork);

// Output bi2.ToString() ==
//                {1546695054495833846267861247985902403343958296074401935327488} 
```

如果我不添加尾随零，我跳过的是 bigInt 对我的字节数组所做的示例。发生的事情是我得到一个错误的负数。如果你愿意，我会发布。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:09:28.033

当您通过十六进制字符串时，数组的第一个字节将成为生成的 BigInteger 的最重要字节。

当您添加尾随零时，数组的最后一个字节是最重要的。

我不确定哪种情况*适合*您，但这就是您得到不同答案的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:09:38.267

来自 MSDN “值数组中的各个字节应按 little-endian 顺序排列，从最低位字节到最高位字节”。所以错误是字节顺序：

```
BigInteger bi2 = new BigInteger(ripeHashNetwork.Reverse().ToArray<byte>()); 
```

# jquery - htaccess 和哈希隐藏

> ID：13938487
> 
> 赞同：2
> 
> 时间：2012-12-18T17:39:34.213
> 
> 标签：jquery, .htaccess, hash

下午，

是否可以在 htacces 重定向中设置规则，例如[http://example.com/portfolio](http://example.com/portfolio)到[http://example.com/index.php#portfolio](http://example.com/index.php#portfolio)，而不在浏览器的 URL 字段中显示最后一个地址？

我知道 hast 不会发送到服务器，但必须有某种方法来掩盖这些丑陋的 URL ..

可能与问题相关，但我有以下 jQuery 代码

```
if(history.pushState){
    history.pushState(null,null,'#'+$(this).attr('class'));
}else{
    location.hash = '#'+$(this).attr('class');}
}

if(window.location.hash){
    var hash = window.location.hash.substring(1);
    if(jQuery.browser.webkit){
        $('html,body').animate({scrollTop:$('#'+hash).offset().top-2*88},'slow');
    }else{
        $('html,body').animate({scrollTop: $('#'+hash).offset().top-3*88-10},'slow');}
    }
} 
```

提前感谢任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:04:20.833

> 我知道 hast 不会发送到服务器，但必须有某种方法来掩盖这些丑陋的 URL ..

没有。通过“从浏览器中屏蔽它”，这意味着浏览器不知道它请求的 URL 已在服务器端被破坏。它认为它已请求`http://example.com/portfolio`，因此这就是它在地址栏中显示的内容。

如果您想从浏览器中**隐藏**片段，那么`#portfolio`片段将变得完全无用。浏览器是客户端和服务器之间唯一可以从这样的片段中获得任何用途的实体，它看不到它，因为服务器隐藏了它。对片段的使用为零的服务器正在将其隐藏在浏览器中。如果没有某种框架（隐藏 URL）或一些 javascript 技巧来更改地址栏中的内容，您不能让浏览器加载与地址栏上显示的 URL 不同的 URL。

如果服务器内部重写`/portfolio`为`/index.php#portfolio`，则片段会立即被丢弃。index.php 的执行并不知道它的存在，因为只有浏览器关心片段。

如果您不希望 URL 中有片段，则应重新设计内容的传递方式。

# c - 试图找到一个完全随机数生成器

> ID：13938492
> 
> 赞同：5
> 
> 时间：2012-12-18T17:40:04.530
> 
> 标签：c, windows, unix, random, time

我在 C 中工作，我正在尝试（拼命地）制作一个随机生成器，它不仅在每次运行生成器时生成不同的数字，而且在每次运行程序时生成不同的序列。我测试了我在网上找到的几乎所有东西。我导致了 2 种很好的方法来制作一个好的随机生成器。第一个是每次都使用不同的种子。但这意味着我每次都必须使用不同的随机种子，这是我一开始没有解决的问题。这是我现在正在尝试的，但这不是真的随心所欲：

```
int myrand(int random_seed){
  random_seed = random_seed * 1103515245 +12345;   
  return (unsigned int)(random_seed / 65536) % 32768; 
                           } 
```

每次我调用该函数时，我都会将种子增加 1。

第二种方法是使用时间。时间变化，这是随机性。我也尝试了很多方法来实现这一点。我最近的尝试是： [编译器错误-可能的 IDE 错误“未定义对 gettimeofday 错误的引用”](https://stackoverflow.com/questions/13894732/compiler-error-possible-ide-errorundefined-reference-to-gettimeofday-error) 但我无法使用gettimeofday 函数，因为我在 Windows 中工作。同样在那个问题中我没有得到任何答案。

任何人都可以帮助我如何在 Windows 中工作的 C 中实现随机生成器（可能使用时间）？或者我应该使用 Unix 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:42:57.380

用良好的熵源为您的 RNG 播种。

在 unix 下，使用 /dev/random。

在 Windows 下，使用 CryptoAPI - [Windows 等价于 /dev/random](https://stackoverflow.com/questions/191335/windows-equivalent-of-dev-random#191340)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:44:12.970

您要的不是随机数生成器，而是如何使用已经包含在 C 标准库中的随机数生成器。

您需要做的就是在程序启动时播种*一次：*

```
srand(time(NULL)); 
```

就这样。它是可移植的，每次运行程序时都会为您提供不同的序列，因为自上次运行以来至少已经过去了一秒钟。

以后再播种没有坏处，但也没有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:49:39.740

C 标准库具有头文件 time.h（如果您使用 C++，则为 ctime）（[参考](http://www.cplusplus.com/reference/ctime/)）。Windows 和 Unix 将支持那里的功能。

我会推荐 time() 或 clock() 作为随机数生成器的种子。

另一种获得*完全随机*输入的方法是使用鼠标位置或其他受外部影响的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:41:03.423

实现 prng 的方法有很多，但不幸的是，它们都不是真正的随机数生成器。time(NULL) 是一个好方法，但我使用的是“blum blum shub”。它生成一位随机数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:18:03.537

由于您明确要求 Windows 解决方案，我建议您避免`time(NULL)`或`clock()`作为种子，`srand()`因为它们的粒度非常有限（毫秒）。相反，您可以使用性能计数器的结果：

```
LARGE_INTEGER PerformanceCount;
QueryPerformanceCounter(&PerformanceCount);
srand(PerformanceCount.LowPart); 
```

可以通过调用[QueryPerformanceFrequency(](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx) [) 来获得 QueryPerformanceCounter()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)频率的递增率。这通常至少增加 1 MHz，有时甚至增加到 GHz 范围。因此，它为种子提供了一个快速变化的来源。

**编辑：**从您[之前的问题](https://stackoverflow.com/q/13894732/1504523)中可以理解，`gettimeofday()`类似的实现也不会提供精细的粒度。它可能会在其参数中显示该词`tv_usec`，但在 WINdows 上它不会像在 Linux 系统上那样提供微秒粒度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T12:54:30.593

引用：

`to make a random generator that not only generates a different number every time i run the generator`

随机的定义不包括该概念。相反，这个想法是你有平等的机会选择任何数字，而不管之前选择的数字是多少。这意味着理论上可以选择两次相同的数字。

如果您正在处理一副牌，那么这符合您的无重复标准。使用套牌处理方法意味着跟踪“使用过的”数字。

您还应该知道 PNRG（伪随机数生成器）是循环的（周期性的）。在您生成数字（通常是一个大数字）之后，您重新开始并准确地重复数字的名称序列。UNIX`rand()`函数在 [0, {RAND_MAX}] 范围内生成整数整数，周期为 2^32

真的考虑阅读这个简短的页面：

见： http: [//pubs.opengroup.org/onlinepubs/009695399/functions/rand.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/rand.html)

# php - 来自控制器的zend echo消息以查看

> ID：13938499
> 
> 赞同：0
> 
> 时间：2012-12-18T17:40:51.343
> 
> 标签：php, forms, validation, zend-framework, echo

我尝试从控制器回显一条消息以查看，它甚至不显示它。

它验证用户输入的所有电子邮件，发送有效的并显示无效的。

但是当提交被按下时，它不会在视图中显示那些无效的，但它确实会发送那些有效的。

这是我的一些代码：

```
<form method="post" action="<?php echo $this->url(array(), 'inviteByEmail'); ?>">
            <table><tr>
                <td>Email Addresses:* <span class="right small_font" style="margin-right:25px;">* Each email address must be separated by a comma ( , )</span></td>
                <td></td>
            </tr><tr>
                <td><input class="input_long" type="text" name="emails" /></td>
            </tr><tr>
                <td><br/>Personalize your message:</td>
            </tr><tr>
                <td><textarea cols="49" rows="7" name="personal_message"  id="share-text" style="margin-bottom:8px;" placeholder="Download Ad-Aware and help me get PRO version" ></textarea></td>
            </tr><tr>
                <td rowspan="3" valign="top">
                    <input type="submit" class="btn_submit_step3" id="btn_friends" value="share_friends" /><br/>
                </td>
            </tr></table>
        </form> <?php echo $this->error; ?> 
```

控制器：

```
public function inviteByEmailAction()
{
    $emails = $this->getRequest()->getParam('emails');
    $personal_message = $this->getRequest()->getParam('personal_message');

    $emails = explode(",", $emails);

    foreach ($emails as $email)
    {
        $email = trim($email);
        $validator = new Zend_Validate_EmailAddress();

        // Validate emails that exists in Database
        $valiadtor_email_in_dbUsers = new Zend_Validate_Db_NoRecordExists (
            array (
                'table' => 'users',
                'field' => 'email'
            )
        );

        $valiadtor_email_in_dbReferrals = new Zend_Validate_Db_NoRecordExists (
            array (
                'table' => 'referrals',
                'field' => 'email'
            )
        );

        if ($validator->isValid($email)) 
        {
            if ($valiadtor_email_in_dbUsers->isValid($email))
            {
                if ($valiadtor_email_in_dbReferrals->isValid($email))
                {
                    if ($this->_helper->model('EmailInvites')->noRowByFields(array('email' => $email, 'referred_by_user_id' => $this->_helper->user()->id)))
                    {
                        $email_invite = $this->_helper->model('EmailInvites')->createRow();  
                        $email_invite->email = $email;
                        $email_invite->personal_message = $personal_message;
                        $email_invite->referred_by_user_id = $this->_helper->user()->id;
                        $email_invite->save();

                        $this->_helper->user()->sendInviteEmail($email, $personal_message);
                    }
                } else {
                    echo $email . " already exists";
                                            $this->view->error = $email . " already exists";
                }
            }else {
                    echo $email . " already exists";
                                            $this->view->error = $email . " already exists";
                }
        }
    }
    $this->getHelper('redirector')->gotoRoute(array(), 'invite');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:11:48.123

回声在inviteByEmailAction() 中。这意味着，它将显示在inviteByEmail.phtml 视图中。但是，在回显之后，您将重定向到此行的邀请操作。

```
 $this->getHelper('redirector')->gotoRoute(array(), 'invite'); 
```

这就是为什么您看不到显示的回声。

如果您不希望在出现错误时发生重定向，则需要在 echo 之后添加一个 return 语句，例如：

```
 } else {
                echo $email . " already exists";
                $this->view->error = $email . " already exists";
                 return;
            }
        }else {
                echo $email . " already exists";
                $this->view->error = $email . " already exists";
                return;
            } 
```

如果你想重定向，同时也显示错误信息，你可以在重定向之前使用[Flashmessenger](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.flashmessenger)助手。

# json - 在 D3 中访问嵌套的 JSON 结构

> ID：13938500
> 
> 赞同：0
> 
> 时间：2012-12-18T17:40:56.747
> 
> 标签：json, d3.js, nested

我正在尝试使用 D3 创建一组图表，但我无法弄清楚如何访问我的 JSON 中的嵌套数据结构。数据看起来像这样（截断）：

```
{ "date": "20120927", 
  "hours": [ 
           { "hour": 0, "hits": 823896 }, 
           { "hour": 1, "hits": 654335 }, 
           { "hour": 2, "hits": 548812 }, 
           { "hour": 3, "hits": 512863 }, 
           { "hour": 4, "hits": 500639 }
           ],
  "totalHits": "32,870,234", 
  "maxHits": "2,119,767", 
  "maxHour": 12, 
  "minHits": "553,821", 
  "minHour": 3 }

{ "date": "20120928", 
  "hours": [ 
           { "hour": 0, "hits": 1235923 }, 
           { "hour": 1, "hits": 654335 }, 
           { "hour": 2, "hits": 1103849 }, 
           { "hour": 3, "hits": 512863 }, 
           { "hour": 4, "hits": 488506 }
           ],
  "totalHits": "32,870,234", 
  "maxHits": "2,119,767", 
  "maxHour": 12, 
  "minHits": "553,821", 
  "minHour": 3 } 
```

我最终想要做的是创建多个雷达图，每天一个，绘制每小时的点击量。但即使只是进入“小时”数组，我也遇到了麻烦。例如，我可以获取所有日期的列表，如下所示：

```
 d3.select("body") 
  .append("ul") 
  .selectAll("li") 
  .data(data) 
  .enter() 
  .append("li")
  .text(function (d,i) {
    return d.date;
  }); 
```

但我无法得到任何更嵌套的东西。有人可以帮我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:47:20.250

假设`data`是一个包含两个对象的二元素数组，您可以执行以下操作：

```
d3.select("body").append("ul").selectAll("li")
    .data(data) // top level data-join
  .enter().append("li")
    .each(function() {
      var li = d3.select(this);

      li.append("p")
          .text(function(d) { return d.date; });

      li.append("ul").selectAll("li")
          .data(function(d) { return d.hours; }) // second level data-join
        .enter().append("li")
          .text(function(d) { return d.hour + ": " + d.hits; });
    }); 
```

这会给你一个像这样的嵌套结构：

```
<ul>
  <li>
    <p>20120927</p>
    <ul>
      <li>0: 823896</li>
      <li>1: 654335</li>
      <li>2: 548812</li>
      <li>3: 512863</li>
      <li>4: 500639</li>
    </ul>
  </li>
  <li>
    <p>20120928</p>
    <ul>
      <li>0: 1235923</li>
      <li>1: 654335</li>
      <li>2: 1103849</li>
      <li>3: 512863</li>
      <li>4: 488506</li>
    </ul>
  </li>
</ul> 
```

另请参阅 Mike 的[嵌套选择](http://bost.ocks.org/mike/nest/)文章。

# php - mysql没有返回任何行

> ID：13938501
> 
> 赞同：-1
> 
> 时间：2012-12-18T17:40:56.550
> 
> 标签：php, mysql, mysql-num-rows

我正在我的 PHP 程序中编写以下代码，但 mysql 没有返回任何行。请检查并帮助找出以下代码中的错误。

**更新代码**

```
 <?php

    //$query2= "SELECT * FROM `email` where `id` ='".$_SESSION['user_id']. "'" ;

        //$query2= "SELECT * FROM `email` where `id` ='".$_SESSION['user_id']. "'" ;
        $query= "SELECT * FROM `email` where `id` =' ".$_SESSION['user_id']. "'" ;

            $query_run2= mysql_query($query);   
            $query_num_rows= mysql_num_rows($query_run2);

                if ($query_num_rows==0) {
                    echo "Invalid Query";

                }
                    else {

                        $query_result = mysql_result ($query_run2, 0, 'name');

                        echo "Welcome" ;

                        echo $_SESSION['user_id'];
    }

?> 
```

它给了我以下输出。

`Log out Warning: mysql_num_rows() expects parameter 1 to be resource, string given in F:\xampp\htdocs\Email_address\welcome.php on line 20 Invalid Query`

谢谢，塔哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:42:54.490

您需要执行查询，并且不能像这样引用字段/表名：

```
$query2= "SELECT * FROM 'email' where 'id' ='".$_SESSION['user_id']. "'" ; 
```

应该：

```
$query2= "SELECT * FROM `email` where `id` ='".$_SESSION['user_id']. "'" ; 
```

请注意，反引号仅对 mysql 中的保留字以及带有空格的表和字段名称是必需的。

您也不应该使用已弃用的`mysql_*`函数，而是使用 PDO 或 mysqli。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:42:10.357

您需要先执行查询，然后才能获取行：

```
$query_run2 = mysql_query($query2); 
```

在运行查询之前，您还需要连接到数据库：

```
$con = mysql_connect(DB_SERVERNAME, DB_USERNAME, DB_PASSWORD); 
$dbLink = mysql_select_db(DB_NAME, $con);

$query_run2 = mysql_query($query2, $dbLink); 
```

如果您正在使用这些 mysql 功能，而不是切换到 PDO，请不要忘记之后关闭您的数据库连接：

```
mysql_close($con); 
```

如果可能的话，我强烈建议改用 PDO，如果您决定朝那个方向前进并在您的 Web 服务器上设置它，这里有一些有用的信息：

[http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:42:38.723

您必须执行查询：

```
$query_run2= mysql_query($query2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:07:50.760

试试这些：

```
$query= "SELECT * FROM `email` where `id` =' ".$_SESSION['user_id']. "'" ;
$rs = mysql_query($query); 
```

# c# - 无法加载文件或程序集'msshrtmi，系统找不到指定的文件

> ID：13938504
> 
> 赞同：3
> 
> 时间：2012-12-18T17:41:16.253
> 
> 标签：c#, azure, azure-web-roles

我正在尝试将 Windows Azure 站点从云降级为网站。我收到此错误：

> 无法加载文件或程序集 'msshrtmi, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。
> 
> [FileNotFoundException: 无法加载文件或程序集 'msshrtmi, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到指定的文件。]
> Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeEnvironment() +0 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment..cctor() +546
> 
> [TypeInitializationException：'Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment' 的类型初始化程序引发异常。]
> Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue(String configurationSettingName) +0
> AzureInit.AzureHelper_GetApplicationSettings(String key) +28
> 
> [HttpException (0x80004005): 'Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment' 的类型初始化程序引发异常。]
> System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
> System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext , HttpContext context, MethodInfo[] handlers) +118
> System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
> System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +第336
> 章 系统.Web.Hosting.PipelineRuntime.InitializeApplication（IntPtr appContext）+296
> 
> [HttpException (0x80004005): 'Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment' 的类型初始化程序引发异常。] System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
> System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101 System.Web.HttpRuntime.ProcessRequestNotificationPrivate（IIS7WorkerRequest WR，HttpContext 上下文）+254

因为我不在云端，我需要这个程序集吗？我如何告诉网站不要寻找它？我已将这些引用添加到我的项目中：

Microsoft.WindowsAzure.CloudDrive Microsoft.WindowsAzure.Diagnostics Microsoft.WindowsAzure.ServiceRuntime Microsoft.WindowsAzure.StorageClient

在我的 WorkerRole.cs 类中，这是我的代码：

```
/// <summary>
/// Reads settings from service configuration file. 
/// </summary>
/// <param name="key">Setting key.</param>    
string AzureHelper_GetApplicationSettings(string key)
{
    try
    {
        return RoleEnvironment.GetConfigurationSettingValue(key);
    }
    catch
    {
        // Setting key was not found
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:52:47.587

删除这些引用（以及它们附带的所有代码）：

*   Microsoft.WindowsAzure.CloudDrive
*   Microsoft.WindowsAzure.Diagnostics
*   Microsoft.WindowsAzure.ServiceRuntime

这些程序集的大多数功能仅用于云服务（Web/Worker 角色）。

现在您看到的错误似乎与读取配置有关：

```
Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue(String configurationSettingName) +0 
AzureInit.AzureHelper_GetApplicationSettings(String key) +28 
```

考虑更改 AzureHelper_GetApplicationSettings 中的代码以使用[Microsoft.WindowsAzure.ConfigurationManager](http://nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager) NuGet 包。这允许您在 ServiceConfiguration.cscfg 和 Web.config (AppSettings) 之间自动切换。如果 RoleEnvironment.IsAvailable (= Cloud Service)，它将从 ServiceConfiguration.cscfg 中读取。如果不是（= 网站/虚拟机/本地），它将从 AppSettings 读取。但是，如果您部署到网站，则需要将以前在 ServiceConfiguration.cscfg 中的设置添加到 web.config 中的 appSettings

# c# - EF5 和存储过程 - FunctionImport 在容器中找不到

> ID：13938515
> 
> 赞同：4
> 
> 时间：2012-12-18T17:42:10.127
> 
> 标签：c#, entity-framework-5

我已经处理这个问题几个星期了，并且认为是时候让其他人进来了。我去过许多试图解决这个问题的网站，但我会从头开始。

这是我在mvc和ef中的第一个项目，所以依赖了很多教程。我从这个开始... [http://msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

我在网上找到的所有其他东西几乎都向我展示了相同的东西，所以我认为这很简单。

有问题的存储过程非常简单，它只是从表中返回一个字符串。

```
SELECT TOP 1 ConnectionString 
FROM tConfig 
WHERE Active = 1 
```

我生成了一个 edmx 文件，就像上面的文章一样，它在上下文文件中生成了以下代码。我已经尝试过在过程旁边有和没有 EntityContainerName 的情况。

```
 public virtual ObjectResult<string> psMasterDataSource()
    {
        return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<string>("CentralApp.psMasterDataSource");
    } 
```

我在哪里使用它也很简单。

```
 public string GetMasterDSConn() {
        var context = new CentralApp();
        var conn = context.psMasterDataSource().SingleOrDefault();
        return conn;
    } 
```

但是当我运行它时，我收到以下错误。

> *在容器“CentralApp”中找不到 FunctionImport“psMasterDataSource”。*

我在另一个站点上看到有人谈论编辑 XML，但我找不到任何有助于编辑的内容。所以我希望我在那里遗漏了一些简单的东西。

我很感激这方面的任何帮助。我已经准备好测试这个应用程序，但这阻碍了我。

# ajax - $.ajax 对控制器的调用传递参数但不执行任何操作？

> ID：13938517
> 
> 赞同：0
> 
> 时间：2012-12-18T17:42:10.280
> 
> 标签：ajax, model-view-controller, jqgrid, controller, export

我有一个视图，我从 Jqgrid 中的一行获取信息，然后使用该信息作为参数对控制器进行 ajax 调用。参数正在传递给控制器​​，但是当它没有执行我想要的操作时，我正在尝试创建一个 csv 文件。

看法：

```
 function sendParams() {
    var selId = jQuery("#list").jqGrid('getGridParam','selrow');
    var data = jQuery("#list").jqGrid('getRowData',selId);

        $.ajax({
        type: "GET",
        url: '@Url.Action("ExportToExcel","Home")',
        data: {sidx: 'abcd', sord: 'desc', page:1, rows: 100, id: data.selId, rid: data.id, process: data.process, detail_table: data.detail_table, jobGroup: @Html.Raw(Json.Encode(@ViewBag.jobGroup)), date: @Html.Raw(Json.Encode(@ViewBag.DateSelected))},
        contentType: "application/json; charset=utf-8",

        });
}   

      <button onclick="function sendParams()">Export</button> 
```

控制器

```
 public ContentResult ExportToExcel(String sidx, String sord, int page, int rows, String id, String process, String detail_table, String jobgroup, String date)
    {

            var sw = new StringWriter();

            List<myModel alist = DAL.ExportExcelConn2.SelectGridItems(sidx, sord, page, rows, rid, process, detail_table, jobgroup, date);

            foreach (var item in alist)
            {

                sw.WriteLine(String.Format("{0}, {1},{2},{3},{4},{5},{6},{7},{8},{9},{10},{11},{12},{13},{14},{15},{16}", item.abc, item.sstuff, item.stuff2, item.stuff3, item.stuff4, item.stuff5, item.stuff6, item.stuff7, item.stuff8, item.stuff9, item.stuff10, item.stuff11, item.stuff12, item.stuff13, item.stuff14, item.stuff15, item.stuff16));

            }

            Response.Clear();
            Response.AddHeader("Content-Disposition", "attachment; filename=Exportabc" + DateTime.Now + ".csv");
            Response.ContentType = "text/csv";
            Response.Write(sw);
            Response.End();

        return Content("Test");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:09:05.823

如果您使用呼叫，您可以在内部或回调`$.ajax`中处理服务器响应。如果返回 CSV 或 Excel 数据，您真正需要的是设置 new .`success``error``window.location`

例如

```
 window.location = '@Url.Action("ExportToExcel","Home")' + '?' +
    $.param({
        sidx: 'abcd',
        sord: 'desc',
        page:1,
        rows: 100,
        id: data.selId,
        ... // -- all other options
    }); 
```

在这种情况下，网络浏览器会自动打开计算机上的程序（如 Excel）。

我建议您另外阅读包含将数据导出到 Excel（真正的 XLSX 文件）的 ASP.NET MVC 项目[的答案。](https://stackoverflow.com/a/9349688/315935)

# c# - 是否可以将 Azure 移动服务与 WP7 一起使用

> ID：13938523
> 
> 赞同：0
> 
> 时间：2012-12-18T17:42:36.613
> 
> 标签：c#, azure, windows-phone

我意识到会有额外的工作（因为 SDK 仅适用于 Windows 8 和 WP8），因为 SDK 提供了提供登录序列的控件（通过 Microsoft 帐户、Facebook 等）。

我想知道是否可以使用 Windows Phone 7 应用程序实现相同的结果？找了一阵子，Mobile Services 上根本没有，更不用说 WP7 了。是否有一些（技术上的？）原因（除了 WP7 不是最新和最伟大的事实）微软已经将 WP7 与 Azure 服务冷落了吗？

我意识到在 WP7 中仅通过 REST 访问数据是微不足道的，但我真正了解的是使用延迟身份验证限制仅访问用户自己的数据的整个过程，如果没有他们的 SDK，这是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:48:58.803

原来 SDK 是开源的，源码在[https://github.com/WindowsAzure/azure-mobile-services](https://github.com/WindowsAzure/azure-mobile-services)。

现在，我还没有深入研究源代码，也不知道移植工作会是什么样子，但认为它不应该付出太多努力似乎是合理的。

祝你好运，如果你取得进展，请分享回来。:)

亚当霍夫曼

Windows Azure 博客 - [http://stratospher.es](http://stratospher.es)

Twittererer - @stratospher_es

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:38:51.920

官方不，我害怕。但是您可以在此处以 C# SDK 的形式找到（部分）客户端平台不可知的实现： [https](https://github.com/kenegozi/azure-mobile-csharp-sdk) ://github.com/kenegozi/azure-mobile-csharp-sdk 这将允许您将 Azure 移动服务与 WP7 I 一起使用猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:46:06.553

现在[可以](http://nuget.org/packages/WindowsAzure.MobileServices/)试用支持 Windows Phone 7.5 的新 C# 客户端的预览版。请记住，它是预发布版本，因此不受支持。[http://www.johanlaanstra.nl/?p=217](http://www.johanlaanstra.nl/?p=217)

# c++ - 错误：“QGeoCoordinate”没有命名类型

> ID：13938529
> 
> 赞同：0
> 
> 时间：2012-12-18T17:43:03.187
> 
> 标签：c++, qt, blackberry-10

我是 C++ 和 BB10 初学者开发人员，我在编译`'QGeoCoordinate' does not name a type`hpp 和 cpp 时遇到了一个小问题，这是我的 hpp

```
#ifndef GLOBALOBJECTS_HPP_
#define GLOBALOBJECTS_HPP_
#include <QtLocationSubset/QGeoCoordinate>

namespace bb { namespace cascades { class Application; }}

extern QGeoCoordinate currentCoordinates;
extern double someVar;

#endif 
```

这是我的cpp

```
#include "GlobalObjects.hpp"
#include <QtLocationSubset/QGeoCoordinate>

namespace bb { namespace cascades { class Application; }}
QGeoCoordinate currentCoordinates;
double  someVar; 
```

**注释**
1- someVar 效果很好，但 currentCoordinates 对象中的问题
2- 我`lQtLocationSubset`在我的 .pro 文件中添加了 lib

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:51:04.193

如果你使用 Eclipse 深入到包含文件 QtLocationSubset/QGeoCoordinate 你会发现宏 QTMS_BEGIN_NAMESPACE 扩展为：

```
namespace QtMobilitySubset { 
```

因此，您需要使用完全限定名称来引用该类：

```
QtMobilitySubset::QGeoCoordinate 
```

或指定命名空间：

```
using namespace QtMobilitySubset; 
```

# vb.net - VB.NET 在表单之间传递数据

> ID：13938530
> 
> 赞同：3
> 
> 时间：2012-12-18T17:43:04.373
> 
> 标签：vb.net

首先很抱歉我的英语不好。

我正在 VB.NET 中制作一个应用程序，但我遇到了一个小问题。我有两种形式，一种是主 FORM（始终打开），另一种是作为对话框打开的。

在辅助窗体（例如打开的对话框）中，我可以选择要做什么，并且根据我的选择，我必须在主窗体中触发一个事件。让我解释一下，在子窗体中我选择了客户编号 2，我按 OK，主窗体必须加载与客户编号 2 相关的所有数据。

显然，作为面向对象的 vb.net，我不能从另一个窗体调用子窗体（因为我无权访问实例），也不能声明一个新窗体，因为主窗体始终是打开的。

然后我如何传递客户的 ID 并引发要加载的事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T17:50:01.130

通过 Public 或 Friend 属性在子项中公开客户 ID，例如（子窗体）：

```
Public Property CustomerID as Integer

Private Sub OK_Click(s as Object, e as eventargs) Handles OK.Click
    CustomerID = id 'pass the value here
    Me.DialogResult = DialogResult.Ok
End Sub 
```

然后在主窗体上：

```
If frmChild.ShowDialog = DialogResult.Ok Then
    MessageBox.Show("Customer ID: " + frmChild.CustomerID)
End If 
```

# c++ - 高斯滤波器核值

> ID：13938534
> 
> 赞同：0
> 
> 时间：2012-12-18T17:43:16.520
> 
> 标签：c++, gaussian

谁能告诉我如何使用高斯滤波器方程生成二维高斯滤波器内核？x 和 y 值如何变化？

参考：[http ://en.wikipedia.org/wiki/Gaussian_function](http://en.wikipedia.org/wiki/Gaussian_function)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:10:46.520

*生成*内核非常简单。如果您的问题在于*应用*内核，您需要更新问题。

内核只是一个值的方阵，通常是奇数大小，因此有一个明确定义的中心。为了填充它，`x`和`y`值从`-(n-1)/2`到矩阵的大小`(n-1)/2`。`n`

```
double half_n = (n - 1) / 2.0;
for (i = 0;  i < n;  ++i)
{
    double x = i - half_n;
    for (j = 0;  j < n;  ++j)
    {
        double y = j - half_n;
        kernel[i][j] = // use formula with x and y here
    }
} 
```

# php - 在哪里可以找到在 Blackberry 应用程序中结合 SQL / PHP 的演示？

> ID：13938535
> 
> 赞同：-3
> 
> 时间：2012-12-18T17:43:21.697
> 
> 标签：php, sql, blackberry

我需要帮助来编写需要来自 SQL Server 的数据的应用程序，并且我也必须更新数据。该应用程序将是客户端，服务器将拥有所有数据库。BB 是否允许我们直接连接到 PHP，或者我需要制作一个 HTML 以便该页面运行 JS？

谁能帮帮我，我在哪里可以找到演示？或关于 Sql 和应用程序的示例？

我已经安装了 eclipse 和 Blackberry SDK 7.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:13:43.727

假设您正在构建一个星座应用程序：

你输入一个日期和生肖歌，你从服务器上得到你的星座。

在这种情况下，您的客户端可以从几个使用 CSS 样式的 HTML 页面构建。如果你需要更花哨的东西，你可以使用 JavaScript。

在服务器端，您将需要运行数据库，并支持 PHP（运行 Apache）。在简单的变体中，您的客户端将发送请求（来自表单或 Ajax）到 **www.myServer.com/my_php_back_end.php**并显示响应。

这只是一个简单的场景，因此您可以更好地提出问题。

[PHP_MySQL-创建表单](http://www.phpeveryday.com/articles/PHP-MySQL-Creating-Form-Insert-Data-P280.html)

# ios - 如何通过 UIAutomation 处理“_APPNAME_ 想要使用您当前的位置”警报

> ID：13938537
> 
> 赞同：5
> 
> 时间：2012-12-18T17:43:24.790
> 
> 标签：ios, ios-ui-automation

好吧，这让我发疯了。我有一个小的 CI 构建系统正在运行。我正在使用 UIAutomation 对我的应用程序进行 UI 测试。由于该应用程序使用 CoreLocation，因此第一次启动该应用程序时，我会收到一个小提示，要求我确认是否要跟踪我的位置。这会很好，但是警报不是我自己的应用程序的一部分，我不能使用 UIAutomation 来与它交互。是否有任何解决方案可以在不手动点击按钮的情况下确认此警报。

谢谢。

PS 为测试构建摆脱 CoreLocation 不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T00:20:26.647

我在以前工作的地方解决这个问题的唯一方法是编写一个可以为你解除警报的小苹果脚本应用程序。

您应该能够编写一些简单的 UI 脚本来消除 iOS 模拟器上的警报。

显然，我假设您在模拟器上运行，而不是在您的测试设备上运行。

**如何通过 iPhone 模拟器的苹果脚本关闭位置警报**

1.  在**System Preferences**打开**Accessibility**。在左下角，确保选中**启用辅助设备访问选项**

在您的应用程序在模拟器中启动并显示警报后运行的 Apple 脚本，因此您需要在延迟一段时间后运行它。

```
tell application "iPhone Simulator"
    activate
end tell

tell application "System Events"
    tell process "iPhone Simulator"
        click button "OK" of window 1
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:52:34.467

确实可以与此警报进行交互。在您的应用程序运行时显示的所有警报都可以通过在触发*之前*分配`onAlert`处理程序来处理。

 *根据您提出的问题，听起来您正在`CLLocationManager`立即启动应用程序。如果可能，尝试将其延迟半秒左右。然后，在您的 UI 自动化脚本中，您可以在开始时*立即*分配警报处理程序。像这样的东西：

```
UIATarget.onAlert = function(alert) {
    alert.defaultButton().tap();
    return true;
}; 
```

这告诉警报点击默认（确认）按钮，并`return true`告诉警报处理机制我们处理了它。如果您返回 false，那么系统会认为它需要点击取消按钮（这是默认行为）。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:21:12.633

将applescript脚本嵌入黄瓜脚本的上述解决方案

```
Given /^I am on the GPS permission screen$/ do
IO.popen("osascript", "w") do |f|
# applescript to OK sharing of Current Location
f.puts <<-eos
    tell application "iPhone Simulator"
        activate
    end tell

    tell application "System Events"
        tell process "iPhone Simulator"
            repeat
                try
                    click button "OK" of window 1
                    exit repeat
                end try
            end repeat
        end tell
    end tell
eos 
```

结束结束*

# windows - 安全描述符 (SD) 中的主要组

> ID：13938539
> 
> 赞同：3
> 
> 时间：2012-12-18T17:43:35.683
> 
> 标签：windows, security, active-directory

Windows 中的每个 SD 都有一个`primary group`字段。它存在了很长一段时间，我怀疑它存在的历史原因，比如与 LDAP 的兼容性。所以我的问题是：

1.  有人知道它在我们这个时代是如何使用的吗？例如在 Windows 8 中？它有什么影响吗？

2.  历史根源是什么？它是在哪里引入的，为什么？这可能会揭示很多。

3.  还有其他想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T23:13:57.807

主要组的存在是为了与 POSIX 兼容。除非您使用 POSIX 子系统，或者使用 Active Directory 作为 UNIX 系统的 LDAP 服务，否则我认为它不会影响任何事情。

（另一种极端情况：根据您使用的 API，如果您想从主要组中删除用户，您可能需要使用与普通组成员不同的功能。）

# asp.net - 更新远程数据库表时如何触发窗口服务来更新本地数据库？

> ID：13938540
> 
> 赞同：0
> 
> 时间：2012-12-18T17:43:36.557
> 
> 标签：asp.net, .net, sql-server-2008, windows-services, c#-3.0

下面的问题我在“堆栈溢出”中搜索但没有得到相关信息......

我正在使用 .Net(C#) 和 SqlServer2008。我的问题如下：

1.  我有一个名为“RemoteDB”的远程数据库，其中有一个名为“UserTBL”的表
2.  我有一个名为“LocalDB”的 loca 数据库，它有一个名为“UserTBL”的表，其结构与远程数据库表中的表相同
3.  我有一个窗口服务，用于在更新远程表“UserTBL”时更新本地数据库表“UserTBL”，即。我必须反映在远程表中所做的本地表“UserTBL”中的相同更改。
4.  仅当远程表更新时才应执行窗口服务。

我正在尝试解决上述问题但无法解决。

请指导我如何开始...如果您将放置代码示例或链接，它将对我非常有帮助...

# python - python HTTP 多部分标头值在使用 urllib.request.Request() 后更改

> ID：13938541
> 
> 赞同：0
> 
> 时间：2012-12-18T17:43:43.417
> 
> 标签：python, http, python-3.x, http-headers

发送 HTTP POST 时，设置为 keep-alive 的标头“连接”值在传出数据包中变为“关闭”。

这是我正在使用的标题：

```
multipart_header = {        
                        'user-agent':'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Firefox/17.0',
                        'accept':'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                        'accept-language':'en-US,en;q=0.5',
                        'accept-encoding':'gzip, deflate',
                        'connection':'keep-alive',

                        'content-type':'multipart/form-data; boundary='+boundary,
                        'content-length':''
        }

## command to send the header: 
urllib.request.Request('http://localhost/api/image/upload', data=byte_data, headers=multipart_header) 
```

当我捕获 POST 数据包时，我可以看到连接字段变为“关闭”而不是预期的“保持活动”。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:58:22.697

[http://docs.python.org/dev/library/urllib.request.html](http://docs.python.org/dev/library/urllib.request.html)说：

> urllib.request 模块使用 HTTP/1.1 并在其 HTTP 请求中包含 Connection:close 标头。

大概这是有道理的 - 我假设 urllib.request 没有任何功能来实际存储 TCP 套接字以实现真正的 keepalive 连接，因此您不能覆盖此标头。

[https://github.com/kennethreitz/requests](https://github.com/kennethreitz/requests)似乎支持它，虽然我没有使用过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:55:59.077

`urllib`不支持持久连接。如果您已经有要发送的标头和数据，那么您可以使用`http.client`重用 http 连接：

```
from http.client import HTTPConnection

conn = HTTPConnection('localhost', strict=True)
conn.request('POST', '/api/image/upload', byte_data, headers)
r = conn.getresponse()
r.read() # should read before sending the next request
# conn.request(... 
```

请参阅[urllib.request 连接到 HTTP 服务器的持久性](https://stackoverflow.com/a/9781027/4279)。

# php - Sphinx - 按多个属性排除过滤器

> ID：13938545
> 
> 赞同：0
> 
> 时间：2012-12-18T17:44:00.327
> 
> 标签：php, indexing, sphinx

我正在查询包含用户创建的记录的索引。由于我的应用程序可以有多种类型的用户，因此该表具有 CreatedByType 和 CreatedById。

我想排除某个特定用户创建的结果。

```
// Exclude $userId from the results
$this->Client->SetFilter('CreatedById', $userId, true); 
```

但是，这显然会排除所有 id 为 的用户类型的结果`$userId`。同样地：

```
// Exclude $userId from the results
$this->Client->SetFilter('CreatedByType', $userType, true); 
```

将排除所有类型用户的结果`$userType`。

如何将两个属性组合成一个约束并对它们进行`AND`查询？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:17:19.410

可以计算一个虚拟组合属性，并对其进行过滤。

```
$this->Client->setSelect("*, IF(CreatedById=$userId,1,0)+IF(CreatedByType=$userType,1,0) as myfilter");
$this->Client->setFilterRange('myfilter',0,1); 
```

（0 表示不匹配，1 表示一个匹配，2 表示两个都匹配。所以 setfilterrange 排除了两者都匹配的文档！）

# c# - 使用类库的 WebApi 控制器

> ID：13938551
> 
> 赞同：11
> 
> 时间：2012-12-18T17:44:17.033
> 
> 标签：c#, windows-services, asp.net-web-api

我正在尝试创建一个允许我通过 Web 应用程序或 Windows 服务托管“WebAPI”网站的系统。为此，我希望我的所有业务逻辑都包含在一个类库中，以便我可以在我的 Windows 服务和我的“Web”（IIS）服务中引用它。

我目前的想法是使用 HttpSelfHostServer 中包含的自托管选项。对于 web 端，我将创建一个标准的 webapi 网站并添加一些对我的类库的引用。

我发现，如果我的控制器与 HttpSelfHostServer 位于相同的命名空间中，它可以正常工作，但是一旦控制器位于外部类库中，服务器就无法再解析到我的控件/操作的路由。

我的代码：

视窗服务：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Reflection;
using System.IO;

using System.Web.Http.SelfHost;
using System.Web.Http;
using System.Web.Http.Dispatcher;

using WebApiClasses;
using WebApiClasses.Controllers;

namespace WebAPISelfHost
{
    public partial class Service1 : ServiceBase
    {
        private HttpSelfHostServer _server;
        private readonly HttpSelfHostConfiguration _config;
        public const string ServiceAddress = "http://localhost:8080";

        public Service1()
        {
            InitializeComponent();

            _config = new HttpSelfHostConfiguration(ServiceAddress);

            //AssembliesResolver assemblyResolver = new AssembliesResolver();
            //_config.Services.Replace(typeof(IAssembliesResolver), assemblyResolver);

            _config.Routes.MapHttpRoute("DefaultApi",
                "api/{controller}/{id}",
                new { id = RouteParameter.Optional });

        }

        protected override void OnStart(string[] args)
        {
            _server = new HttpSelfHostServer(_config);
            _server.OpenAsync();
        }

        protected override void OnStop()
        {
            _server.CloseAsync().Wait();
            _server.Dispose();
        }
    }

    //public class TestController : ApiController
    //{
    //    public string Get()
    //    {
    //        return "This is an internal test message.";
    //    }
    //}

    class AssembliesResolver : DefaultAssembliesResolver
    {
        public override ICollection<Assembly> GetAssemblies()
        {
            ICollection<Assembly> baseAssemblies = base.GetAssemblies();
            List<Assembly> assemblies = new List<Assembly>(baseAssemblies);

            // Add whatever additional assemblies you wish

            var controllersAssembly = Assembly.LoadFrom(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + @"\WebApiClasses.dll");
            baseAssemblies.Add(controllersAssembly);
            return assemblies;
        }
    }
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Web.Http;

namespace WebApiClasses.Controllers
{
    public class TestController : ApiController
    {
        public string Get()
        {
            return "hello from class library";
        }
    }
} 
```

当我尝试导航到：“http://localhost:8080/api/”时，我得到：

未找到与请求 URI 'http://localhost:8080/api/' 匹配的 HTTP 资源。找不到与名为“Test”的控制器匹配的类型。

有什么建议么？我想我应该能够做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T11:34:34.230

看看这篇文章[http://www.strathweb.com/2012/06/using-controllers-from-an-external-assembly-in-asp-net-web-api/](http://www.strathweb.com/2012/06/using-controllers-from-an-external-assembly-in-asp-net-web-api/)

在其中，他们描述了如何加载带有控制器的额外程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-21T08:19:12.420

我有一个类似的问题，我做了以下操作并解决了它。

1.  首先在 api 项目中添加来自外部类库的引用。
2.  控制器必须继承自 ApiController
3.  控制器类必须具有公共访问修饰符，并且控制器名称必须以 Controller 结尾。例如`TestController ,EmployeeController`等
4.  并且非常重要的 nuget 包必须具有相同的版本。

我还建议使用 [HttpGet]、[HttpPost] 等属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-11T08:23:53.053

对于自托管方案，请按照其他解决方案的建议提供自定义 IAssembliesResolver 实现，并通过使用控制器程序集中的类型或其文件路径将所需的程序集添加到集合中。

```
class AssembliesResolver : DefaultAssembliesResolver
{
    public override ICollection<Assembly> GetAssemblies()
    {
        ICollection<Assembly> baseAssemblies = base.GetAssemblies();
        List<Assembly> assemblies = new List<Assembly>(baseAssemblies);

        //Load by a type in the assembly
        var _serviceAssembly = Assembly.GetAssembly(typeof(CarsController));

        //Load from a file
        //var _serviceAssembly = Assembly.LoadFrom("abc.dll");

        //Check if the assembly is already in the list
        //if you are getting the assembly reference by a type in it,
        //The assembly will probably be in the list
        if (!assemblies.Contains(_serviceAssembly))
            assemblies.Add(_serviceAssembly);

        return assemblies;
    } 
```

然后在控制台应用程序的 Main 方法或服务类的 OnStart 方法中，替换程序集解析器服务。

```
var config = new HttpSelfHostConfiguration("http://localhost:3000");
config.Services.Replace(typeof(IAssembliesResolver), new AssembliesResolver());
config.Routes.MapHttpRoute("default", "api/{controller}/{action}/{id}", new { id = RouteParameter.Optional });
var server = new HttpSelfHostServer(config);
server.OpenAsync().Wait(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-22T18:56:20.233

对于未来的读者。

这是（一种方式）您如何使用不同的程序集和使用 IIS。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        // Web API configuration and services
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            //routeTemplate: "api/{controller}/{id}",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

和

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Web;
using System.Web.Http.Dispatcher;

public class MyCustomAssemblyResolver : DefaultAssembliesResolver
{
    public override ICollection<Assembly> GetAssemblies()
    {
        ICollection<Assembly> baseAssemblies = base.GetAssemblies();
        List<Assembly> assemblies = new List<Assembly>(baseAssemblies);
        Type myType = typeof(MyControllerInAnotherAssembly);
        var controllersAssembly = Assembly.GetAssembly(myType );
        baseAssemblies.Add(controllersAssembly);
        return assemblies;
    }
} 
```

和 (Global.asax)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Http.Dispatcher;
using System.Web.Security;
using System.Web.SessionState;

public class Global : System.Web.HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        WebApiConfig.Register(GlobalConfiguration.Configuration);    
        GlobalConfiguration.Configuration.Services.Replace(typeof(IAssembliesResolver), new MyCustomAssemblyResolver());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T09:23:58.817

我最终发现了如何做到这一点，我不得不重新安排我的代码：

视窗服务：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Reflection;
using System.IO;

using System.Threading.Tasks;
using System.Web.Http;
using System.Web.Http.Dispatcher;
using System.Web.Http.SelfHost;

namespace WebAPISelfHost
{
    public partial class Service1 : ServiceBase
    {
        static HttpSelfHostServer CreateHost(string address)
        {
            // Create normal config
            HttpSelfHostConfiguration config = new HttpSelfHostConfiguration(address);

            // Set our own assembly resolver where we add the assemblies we need
            AssembliesResolver assemblyResolver = new AssembliesResolver();
            config.Services.Replace(typeof(IAssembliesResolver), assemblyResolver);

            // Add a route
            config.Routes.MapHttpRoute(
              name: "default",
              routeTemplate: "api/{controller}/{id}",
              defaults: new { controller = "Home", id = RouteParameter.Optional });

            HttpSelfHostServer server = new HttpSelfHostServer(config);
            server.OpenAsync().Wait();

            return server;
        }

        public Service1()
        {
            InitializeComponent();

        }

        protected override void OnStart(string[] args)
        {
            HttpSelfHostServer server = CreateHost("http://localhost:8080");
        }

        protected override void OnStop()
        {
        }
    }

    class AssembliesResolver : DefaultAssembliesResolver
    {
        public override ICollection<Assembly> GetAssemblies()
        {
            ICollection<Assembly> baseAssemblies = base.GetAssemblies();
            List<Assembly> assemblies = new List<Assembly>(baseAssemblies);

            assemblies.Add(Assembly.LoadFrom(@"C:\Users\david.kolosowski\Documents\Visual Studio 2010\Projects\WebAPISelfHost\WebAPISelfHost\bin\Debug\ClassLibrary1.dll"));

            return assemblies;
        }
    }
} 
```

类库：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Web.Http;

namespace ClassLibrary1
{
    public class TestController : ApiController
    {
        public string Get()
        {
            return "hello from class library2";
        }
    }
} 
```

我认为解决方案存在各种配置问题，因此我删除了所有参考并仅添加了每个项目所需的参考。

感谢所有发布建议的人。

# php - 如何单击列表中的一个值并将文本放入文本框中？

> ID：13938553
> 
> 赞同：-3
> 
> 时间：2012-12-18T17:44:34.740
> 
> 标签：php, javascript, jquery, autosuggest

我正在尝试做一个自动建议的搜索框，我的一切正常，但我找不到一种方法，以便当我点击列表中的一个项目时，让该文本进入文本框。一旦发生这种情况，我还需要列表消失。有谁知道如何做到这一点？请在附件中找到我的代码：

索引.php

```
<html>
<head>

<script type="text/javascript">

function findmatch() {
    if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
}

xmlhttp.onreadystatechange = function() {

    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        document.getElementById('results').innerHTML = xmlhttp.responseText;
    }

    }

xmlhttp.open('GET', 'search.inc.php?search_text='+document.search.search_text.value,         true);
    xmlhttp.send();
}

</script>
</head>
<body>

<form id="search" name="search">

Type a name:<br />
<input type="text"  id = "search_text" name="search_text"  onkeyup="findmatch();">
</form>
<ul>
<div id="results"></div>
</ul>

</body>
</html> 
```

搜索.inc.php

```
<?php

if (isset($_GET['search_text'])) {
$search_text = $_GET['search_text'];
}

if (!empty($search_text)){

if (@mysql_connect('localhost','username','password')) {
if (@mysql_select_db('Database')){

                $query = "SELECT name FROM Customers WHERE name LIKE     '$search_text%'";
                $query_run = mysql_query($query);

                while ($query_row = mysql_fetch_assoc($query_run)){

                    $id = "id".$i;
                    echo "<li>".$name = $query_row['name']."    </li>";

                }

        }
}

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:55:10.053

您不会从任何地方调用 Clicked() 函数。尝试将事件添加到您输出的列表项中：

```
echo "<li onclick='Clicked(this)'>".$name = $query_row['name']."    </li>"; 
```

而且您还想知道在您的 Clicked 函数中点击了什么”

```
function Clicked(li)
{
    document.getElementById("aaa").value = li.innerHTML;
    document.getElementById("results").innerHTML = '';
    return false; // so no postback
} 
```

# jquery - jQuery / Validate - 复选框的不同错误/成功突出显示规则

> ID：13938555
> 
> 赞同：0
> 
> 时间：2012-12-18T17:44:42.103
> 
> 标签：jquery, jquery-validate

现在我的表单使用以下规则完美地工作，在我的表单输入右侧添加带有绿色刻度标记或红色错误消息的标签：

```
highlight: function(label) {
            $(label).closest('.form-element').addClass('error')
            .closest('.form-element').removeClass('success');;
        },
        success: function(label) {
            label
            .text('OK!').addClass('valid')
            .closest('.form-element').addClass('success');
        }, 
```

相关的CSS是：

```
#jqvForm label.valid {
  width: 16px;
  height: 16px;
  background: url("../images/tick.png") center center no-repeat;
  display: inline-block;
  text-indent: -9999em !important;
  position: absolute;
}
#jqvForm label.error {
  color: red;
  display: inline;
  float: none;
  font-size:11px;
  font-weight: bold;
  margin-left: 10px;
  text-align: left;
  padding: 2px 8px;
  margin-top: 2px;
} 
```

但是 - 我在用户必须同意条款和条件的页面上有一个复选框。将错误消息或刻度线放在它旁边看起来真的很糟糕。

有没有一种方法可以为复选框设置不同的突出显示/成功功能？还是我最好不要对这个框使用验证，而只是使用其他东西来确保选中该框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:59:26.763

从[选项文档](http://docs.jquery.com/Plugins/Validation/validate#toptions) 中它说覆盖突出显示以决定哪些字段以及如何突出显示，所以如果你的 t+c 复选框有一个类“myCheckbox”你可以做这样的事情

```
success: function (label) {
    if (label.hasClass('myCheckbox')) {
        // do something with the checkbox
    }
    else {
        // do something with other fields
    }
},
highlight: function (element, errorClass) {
    var v = $(element);
    if (v.hasClass('myCheckbox')) {
        // do something with the checkbox
    }
    else {
        // do something with other fields
    }
} 
```

# php - 信息不显示在数据库中。XAMPP

> ID：13938556
> 
> 赞同：0
> 
> 时间：2012-12-18T17:44:48.643
> 
> 标签：php, mysql, database, xampp, connect

我正在尝试制作一个简单的 RSVP 程序，用户只需输入他们的名字和姓氏，然后单击是或否。然后将信息带入数据库。我被困在用户可以输入名字和姓氏并单击“是”或“否”的位置，但它没有显示在数据库中。这是我到目前为止所拥有的。任何帮助将不胜感激。我仍然是 php 的菜鸟。我也在为我的数据库使用 xampp。谢谢

**这是上半场**

```
<H1><div align="center">RSVP</div></H1>

<H3>Enter in the information that is requried</H3>

<form method ="POST" action = "RSVP.php">

Please type in your first name</br>

<input type = "text" name="fname"/></br>

Please type in your last name</br>

<input type = "text" name="lname"/>

</br></br></br></br>

<H2>Will you be attending?</h2>

<input type="radio" name="yorn" value="Yes">Yes

<input type="radio" name="yorn" value="No">No</br>

<input type="submit" value="Submit">

</form> 
```

**这是php的一半**

```
<?php

if(empty($_POST['fname']) || empty($_POST['lname']))

print "Please type in BOTH first name and last name";
else{

$DBConnect = @mysql_connect("localhost", "Jordan", "bigboy");

if ($DBConnect === FALSE){

    print "<p>Unable to connect to the database server.<p>". "<p>Error code " 
                .mysql_errno(). ": ". mysql_error() . "</p>";

}else{

    $DBName = "jdatabase";

    mysql_select_db("jdatabase") or die(mysql_error());

    $TableName = "RSVP";

    $firstname = $_POST['fname'];

    $lastname = $_POST['lname'];

    $YorN = $_POST['yorn'];

    $SQLsting = "INSERT INTO '$TableName' VALUES(NULL, 

                   '$firstname','$lastname','$YorN')";

$QueryResult = @mysql_connect($SQLsting, $DBConnect);

}if ($QueryResult === FALSE){

    print "<p>Unable to execute query.<p>". "<p>Error code " 
                .mysql_errno($DBConnect). ": ". mysql_error($DBConnect) . "</p>";

}else{

    print "Thank You for RSVP";

}

mysql_close($DBConnect);    

}   

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:05:54.807

这是输入转义的基本 mysqli 用法。

```
$DBName = "jdatabase";
$TableName = "RSVP";
$firstname = $_POST['fname'];
$lastname = $_POST['lname'];
$YorN = $_POST['yorn'];

/* Connection info for PHP/MySQL test database. */
defined('DB_HOST') ? NULL : define('DB_HOST', 'localhost');
defined('DB_USER') ? NULL : define('DB_USER', 'testUzer');
defined('DB_PWD') ? NULL : define('DB_PWD', 'xYzT@9123');
defined('DB_NAME') ? NULL : define('DB_NAME', $DBName);

/* Connect to database */
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PWD, DB_NAME);
if ($mysqli->connect_errno) exit("ERROR: Could not connect to database.");

/* Build the query string and escape input. */
$query = sprintf("INSERT INTO $TableName (first_name, last_name, yorn) VALUES('%s', '%s', '%s')", 
$mysqli->real_escape_string($firstname), 
$mysqli->real_escape_string($lastname), 
$mysqli->real_escape_string($YorN));

/* Insert the record. */
$result = $mysqli->query($query);
if(! $result) exit("ERROR: Database query failed."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:13:32.110

即使您要使用旧的 mysql_* 方式，您也不会查询数据库...您应该调用 mysql_query... 在您的代码中您使用 mysql_connect 两次。由于前面有 @ 符号，您不会因此收到错误消息。

```
$QueryResult = mysql_query($SQLsting, $DBConnect); 
```

# javascript - 未捕获的类型错误：无法读取未定义的属性“可见性”

> ID：13938562
> 
> 赞同：2
> 
> 时间：2012-12-18T17:45:24.837
> 
> 标签：javascript

```
function CheckavailOnload()
{
  var elems = document.getElementsByClassName('box-collateral box-related');
  for(var i = 0; i < elems.length; i++){
  if(elems.style.visibility == 'visible')
  {
     var av = document.getElementsByClassName('availability in-stock');
     for(var i = 0; i < elems.length; i++) {
     av[i].style.visibility = 'visible';
    }
  }
  else
  {
     var av = document.getElementsByClassName('availability in-stock');
     for(var i = 0; i < elems.length; i++) {
     av[i].style.visibility = 'hidden';
    }
  }
 }
}
CheckavailOnload(); 
```

在这里，我正在尝试检查 div “box-collat​​eral box-related”的可见性，如果它是可见的，我想用类名“库存中的可用性”切换另一个段落的可见性

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T17:49:27.090

`getElementsByClassName()`总是给你一个 nodeList 对象，即使它只有一个成员。NodeList 对象没有`style`属性，因此您需要首先进行迭代`elems`以`if`检查可见性，就像您在代码中所做的那样。

如果您确定只有一个成员，您可以使用 来检查它的可见性`elems[0].style.visibility`。

如果要检查特定元素的可见性，可以给它一个`id`并使用`document.getElementById()`.

* * *

**编辑**

感谢您的提琴，现在我们可以得到一些结果。

所以，也许你不需要那个`id`，实际问题发生在尝试 get 时`style`，如果它没有明确分配的话。要解决这个问题，您需要使用[`getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)：

```
function CheckavailOnload() {
var elems = document.getElementsByClassName('box-collateral box-related');
    for (var i = 0; i < elems.length; i++) {
        if (getComputedStyle(elems[i]).visibility == 'visible' || getComputedStyle(elems[i]).display == 'block') {
            alert("hello");
            var av = document.getElementsByClassName('availability in-stock');
            for (var j = 0; j < av.length; j++) {
                av[j].style.visibility = 'visible';
            }
        }
        else if (getComputedStyle(elems[i]).visibility == 'hidden' || getComputedStyle(elems[i]).display == 'none') {
            var av = document.getElementsByClassName('availability in-stock');
            for (var k = 0; k < av.length; k++) {
                av[k].style.visibility = 'hidden';
            }
        }
    }
}
window.onload = CheckavailOnload; 
```

此代码将检查分配给 classes 的所有元素`box-collateral box-related`。[jsFiddle](http://jsfiddle.net/LCT6h/4/)的工作演示。

还要注意使用 of `window.onload`，它可以确保您不会在元素被解析之前尝试获取它们。如果 and 中有不同数量的元素，我切换`elems`到`av`in `for...j`-and - `for...k`loops，应该可以正常工作。`elems``av`

如果第一个找到的具有维护类的元素是要检查的元素，则可以在所有表​​达式中简单地替换`i`为。`0``elems[i]`

如果你只想检查一个特定的元素，你可以给它一个`id`，并用它来获取对它的引用[`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)。在 HTML 中：

```
<div id="checkThisOnly" class="box-collateral box-related"> 
```

然后在脚本中：

```
var elem = document.getElementById('checkThisOnly');
if (getComputedStyle(elem).visibility...) {
    ......
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:49:07.663

“elems”是一组元素，但您尝试查看其“样式”属性。您需要重新排列事物，以便循环遍历元素，然后检查每个元素的属性。

同样在您以后通过 av 循环时 - 您正在查看 elems.length 进行扫描。我认为这有点混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:56:02.917

因此，正如我在[评论](https://stackoverflow.com/questions/13938562/uncaught-typeerror-cannot-read-property-visibility-of-undefined#comment19218995_13938562)中提到的，您似乎缺少“隐藏”一词的引用。我将假设这是一个复制粘贴错误。

* * *

这是您的代码的精简版本，它演示了实现目标的一种方法 -

```
function Checkavailability()
{
  var elems = document.getElementsByClassName('box-collateral box-related');
  for (var i=0; i<elems.length; i++) {
    if(elems[i].style.visibility == 'visible'){
      // do some stuff
    }
    else{
       // do some stuff
    }
  }
} 
```

这里的主要区别是我们正在*遍历*所有`getElementsByClassName`返回的元素。注意函数名中的复数 -

> [get​<strong>Elements​ByClassName - 返回一组具有所有给定类名的元素。](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

# emacs - Emacs“Autoresize.vim”等价物

> ID：13938563
> 
> 赞同：0
> 
> 时间：2012-12-18T17:45:31.550
> 
> 标签：emacs, vim-plugin

我试图让我的 emacs 表现得像这个 vim 插件：当在两个垂直窗口之间分割时，在它们之间切换会使当前窗口占总宽度的 60%，而前一个窗口占 40%。

```
 .-----------------.
  |          |      |
  |     A    |   B  |
  |          |      |
  .-----------------.
  .-----------------.
  |       |         |
  |   A   |    B    |
  |       |         |
  .-----------------. 
```

这是 vim 插件：[autoresize.vim](http://www.vim.org/scripts/script.php?script_id=2080)

这样的事情是否已经存在？

如果没有，我想我可以使用放大窗口水平命令，但我找不到在窗口之间切换时触发的钩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:57:38.447

不确定它是否完全匹配，而且我绝对不是 emacs 专家，但请查看来自[emacswiki.org的](http://emacswiki.org/emacs)[Switching Buffers](http://emacswiki.org/emacs/SwitchingBuffers)文章。

该页面的一些选择看起来很有希望，尤其是关于[转置两个缓冲区](http://emacswiki.org/emacs/SwitchingBuffers#toc6)的片段：

```
(defun transpose-buffers (arg)
  "Transpose the buffers shown in two windows."
  (interactive "p")
  (let ((selector (if (>= arg 0) 'next-window 'previous-window)))
    (while (/= arg 0)
      (let ((this-win (window-buffer))
            (next-win (window-buffer (funcall selector))))
        (set-window-buffer (selected-window) next-win)
        (set-window-buffer (funcall selector) this-win)
        (select-window (funcall selector)))
      (setq arg (if (plusp arg) (1- arg) (1+ arg)))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:47:51.067

有[黄金比例.el](https://github.com/roman/golden-ratio.el)。

我自己没有尝试过，但它可以满足您的要求。

# jenkins - 无法在第二次升级的升级构建选项中选择其他选项

> ID：13938566
> 
> 赞同：1
> 
> 时间：2012-12-18T17:45:39.667
> 
> 标签：jenkins, jenkins-plugins

我正在使用 Jenkins 中的升级构建插件将我的应用程序部署到不同的环境中。

我定义了一个手动升级，带有一个“选择”批准参数，包含两个条目 - 一个对应于我的应用程序的两个实例中的每一个。这会生成一个在手动促销时可用的下拉列表。

促销执行一个 Windows 批处理脚本，该脚本使用下拉列表中的值来选择要写入的目录、要编辑的配置文件等。

这工作得很好 - 一次。

如果我想将相同的构建推广到两个环境，我希望能够执行两次推广，从生成的下拉列表中依次选择每个环境。

但是，当我这样做时，我发现下拉列表现在已成为我无法从中选择其他环境的只读文本框。

显然，这是一个深思熟虑的设计选择——所以我非常感谢一些关于如何最好地解决这个问题的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:56:14.223

我有 2 个用于构建工作的促销活动。`Deploy to DEV`和`Deploy to QA`。

是的，你必须做更多的维护，因为随着你的环境数量的增长，你必须为每个环境做一个提升工作。但是也有好处：每个促销活动在构建历史上都有不同颜色的星号，因此只需查看哪些构建已部署到 DEV 以及哪些构建已部署到 QA 就很容易分辨。

**更新：**

如果促销步骤的内容很大，有两种管理方式：

*   将 shell 脚本保存到 SVN 并从升级步骤调用它
*   使用[https://wiki.jenkins-ci.org/display/JENKINS/Managed+Script+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Managed+Script+Plugin)在 Jenkins 中集中管理脚本，然后从升级步骤中引用它

# sqlite - 访问数据库时出现 Phonegap 'undefined' 错误

> ID：13938567
> 
> 赞同：1
> 
> 时间：2012-12-18T17:45:38.733
> 
> 标签：sqlite, cordova, undefined

我在使用 Phonegap 访问数据库时遇到了一些问题。我正在使用 phonegap Build 在多个平台上进行部署。有趣的是，我的代码在模拟器（Ripple）中完美运行，但在设备上失败（带有 Android 4.0.3 的三星 Galaxy SII）。

这是我的 Index.html：

```
<!DOCTYPE HTML>
<html>
<head>
  <script>
      function goToMain(url)
      {
        var url = url;
        var username=document.getElementById('username');
        var password=document.getElementById('password');
        if(username.value == '' && password.value== '')
        {
                   document.form.action = "./main.html";
        }
        else
        {
            alert('No válido');
        }
    return ;
      };

     // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
    var db = window.openDatabase("test", "1.0", "Test DB", 10000000);
    db.transaction(populateDB, errorCB, successCB);
    };

 // Transaction error callback
    //
    function errorCB(tx, err) {
    alert("Error processing SQL: "+err);
    };

    // Transaction success callback
    //
    function successCB() {
    };

    function isTableExists(tx, tableName, callback) {
    tx.executeSql('SELECT * FROM '+tableName, [], function(tx, resultSet) {
        if (resultSet.rows.length <= 0) {
            callback(false);
        } else {
            callback(true);
        }
    }, function(err) {
        callback(false);
    })
    };

    function populateDB(tx) {

     isTableExists(tx, "invoices", function(status) {
        if (!status) {
           tx.executeSql('CREATE TABLE IF NOT EXISTS "invoices" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "month" INTEGER NOT NULL , "year" INTEGER, "client" INTEGER, "amount" FLOAT, "tax" FLOAT);');
    tx.executeSql('INSERT INTO "invoices" VALUES(1,1,2,1,1500,21);');
    tx.executeSql('INSERT INTO "invoices" VALUES(2,2,1,2,2500,16);');
    tx.executeSql('INSERT INTO "invoices" VALUES(3,10,1,3,3500,21);');
    tx.executeSql('INSERT INTO "invoices" VALUES(4,5,4,1,10500,21);');
    tx.executeSql('INSERT INTO "invoices" VALUES(5,4,2,2,15500,21);');
    tx.executeSql('INSERT INTO "invoices" VALUES(6,1,4,4,134200,21);');
        } 
    });

isTableExists(tx, "clients", function(status) {
        if (!status) {
          tx.executeSql('CREATE TABLE IF NOT EXISTS"clients" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "name" VARCHAR);');
    tx.executeSql('INSERT INTO "clients" VALUES(1,"Alfonso");');
    tx.executeSql('INSERT INTO "clients" VALUES(2,"Alejandro");');
    tx.executeSql('INSERT INTO "clients" VALUES(3,"Ricardo");');
    tx.executeSql('INSERT INTO "clients" VALUES(4,"Víctor");');
        } 
    });

    isTableExists(tx, "months", function(status) {
        if (!status) {
       tx.executeSql('CREATE TABLE IF NOT EXISTS "months" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "name" VARCHAR);');
    tx.executeSql('INSERT INTO "months" VALUES(1,"January");');
    tx.executeSql('INSERT INTO "months" VALUES(2,"February");');
    tx.executeSql('INSERT INTO "months" VALUES(3,"March");');

    tx.executeSql('INSERT INTO "months" VALUES(4,"April");');
    tx.executeSql('INSERT INTO "months" VALUES(5,"May");');
    tx.executeSql('INSERT INTO "months" VALUES(6,"June");');
    tx.executeSql('INSERT INTO "months" VALUES(7,"July");');
    tx.executeSql('INSERT INTO "months" VALUES(8,"August");');
    tx.executeSql('INSERT INTO "months" VALUES(9,"September");');
    tx.executeSql('INSERT INTO "months" VALUES(10,"October");');
    tx.executeSql('INSERT INTO "months" VALUES(11,"November");');
    tx.executeSql('INSERT INTO "months" VALUES(12,"December");');
        } 
    });

isTableExists(tx, "years", function(status) {
        if (!status) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS "years" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "year" INTEGER);');
    tx.executeSql('INSERT INTO "years" VALUES(1,2009);');
    tx.executeSql('INSERT INTO "years" VALUES(2,2010);');
    tx.executeSql('INSERT INTO "years" VALUES(3,2011);');
    tx.executeSql('INSERT INTO "years" VALUES(4,2012);');
        } 
    });
    }

  </script>
  <meta name="viewport" content="width=320; user-scalable=no">
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <title>Auth Demo</title>
  <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.0rc2.css"
 type="text/css" charset="utf-8">
  <script type="text/javascript" src="js/jquery-1.7.min.js"></script>
  <script type="text/javascript" charset="utf-8"
<script src="phonegap.js"></script> 
  <script src="jquery.mobile/jquery.mobile-1.0rc2.js"></script>
</head>
<body onload="init()">
<div id="loginPage" data-role="page">
<div data-role="header">
<h1>Demo</h1>
</div>
<div data-role="content">
<form id="loginForm" onsubmit="goToMain('./main.html')" method="post"
 action="" name="form">
  <div data-role="fieldcontain" class="ui-hide-label"> <label
 for="username">Username:</label> <input name="username" id="username"
 value="" placeholder="Username" type="text"> </div>
  <div data-role="fieldcontain" class="ui-hide-label"> <label
 for="password">Password:</label> <input name="password" id="password"
 value="" placeholder="Password" type="password"> </div>
  <input value="Login" id="submitButton" type="submit"> </form>
</div>
<div data-role="footer">
<h4>© Ontic</h4>
</div>
</div>
</body>
</html> 
```

当我单击按钮时，它会移动到下一个屏幕，在那里我会自动收到“未定义”错误：

```
 <!DOCTYPE html> 
    <html> 
        <head> 
        <meta name="viewport" content="width=device-width, initial-scale=1">    
        <title></title> 
        <link rel="stylesheet" href="js/jquery.mobile-1.0.min.css" />
        <script  src="js/jquery-1.6.4.min.js"></script>
        <script src="js/jquery.mobile-1.0.min.js"></script>
    <script src="phonegap.js"></script>

    <script>
    var dbShell;
    var s;
    var txt;
        document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady(){
        //First, open our db
        dbShell = window.openDatabase("test", "1.0", "Test DB", 10000000);
        //run transaction to create initial tables
    try
    {
        getEntries();
     }
        catch(err)
          {
          alert(err.code);
      } 
    }

    function getEntries() {
        dbShell.transaction(function(tx) {
        tx.executeSql("select id, name from clients",[],renderEntries,dbErrorHandler);
        tx.executeSql("select id, year from years",[],renderEntriesYears,dbErrorHandler);

        }, dbErrorHandler);
    }

    function dbErrorHandler(err){
        alert("DB Error: "+err.message + "\nCode="+err.code);
    }

    function renderEntries(tx,results){
    try{
        $("#entryText").html("<p>  You currently do not have any clients.</p>");
           s = "<p> These are your clients: </p>";
           for(var i=0; i<results.rows.length; i++) {
        alert("inside3");
        var  name= results.rows.item(i).name;
        var id = results.rows.item(i).id;
        s += "<li><a href=\"clientsinvoices.html?id="+id+"&ref=0\">" + name + "</a></li>";   
          }
        $("#linksList").html(s);
        $("#linksList").listview("refresh");

      }
        catch(err)
          {
          txt="There are no invoices for this client\n\n";
          txt+="Click OK to continue.\n\n";
          alert(txt);
      }

    }

    function renderEntriesYears(tx,results){
    try{
        $("#entryText").html("<p>  You currently do not have any clients.</p>");
           s += "<p> These are your years: </p>";
           for(var i=0; i<results.rows.length; i++) {
        var  name= results.rows.item(i).year;
        var id = results.rows.item(i).id;
        s += "<li><a href=\"clientsinvoices.html?id="+id+"&ref=1\">" + name + "</a></li>";   
          }
        $("#linksList").html(s);
        $("#linksList").listview("refresh");
      }
        catch(err)
          {
          alert("catchs");
          txt="There are no invoices for this year\n\n";
          txt+="Click OK to continue.\n\n";
          alert(txt);
      }
    }

    </script>
    </head> 
    <body > 

    <div data-role="page" id="mainPage" style="background-image:url('images/back.jpg');">

        <div data-role="header">
        <h1></h1>
        </div>

        <div data-role="content">  
            <div id="status"></div>  
        <ul id="linksList" data-role="listview" data-inset="true"></ul>
        </div>

        <div data-role="footer">
        <h4></h4>
        </div>

    </div>

    <div data-role="page" id="contentPage" style="background-image:url('images/back.jpg');" >

        <div data-role="header">
        <a href="#mainPage" data-rel="back">Home</a>
        <h1></h1>
        </div>

        <div data-role="content" id="entryText">
        </div>

    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:01:12.187

最后，我设法使用我通过谷歌找到的解决方法使其工作，这是有效的代码：

索引.html

```
 <!DOCTYPE HTML>
      <html>
        <head>

        <script>
       /*
       * Licensed to the Apache Software Foundation (ASF) under one
       * or more contributor license agreements.  See the NOTICE file
       * distributed with this work for additional information
       * regarding copyright ownership.  The ASF licenses this file
       * to you under the Apache License, Version 2.0 (the
       * "License"); you may not use this file except in compliance
       * with the License.  You may obtain a copy of the License at
       *
       * http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing,
       * software distributed under the License is distributed on an
       * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       * KIND, either express or implied.  See the License for the
       * specific language governing permissions and limitations
       * under the License.
       */
      var app = {
          // Application Constructor
          initialize: function() {
              this.bindEvents();
          },
          // Bind Event Listeners
          //
          // Bind any events that are required on startup. Common events are:
          // 'load', 'deviceready', 'offline', and 'online'.
          bindEvents: function() {
              document.addEventListener('deviceready', this.onDeviceReady, false);
          },
          // deviceready Event Handler
          //
          // The scope of 'this' is the event. In order to call the 'receivedEvent'
          // function, we must explicity call 'app.receivedEvent(...);'
          onDeviceReady: function() {

              app.receivedEvent('deviceready');

          },
          // Update DOM on a Received Event
          receivedEvent: function(id) {
               var db = window.openDatabase("test", "1.0", "Test DB", 10000000);
             db.transaction(populateDB, errorCB, successCB);
          }
      };
            function goToMain(url)
            {
            var url = url;
            var username=document.getElementById('username');
            var password=document.getElementById('password');
            if(username.value == '' && password.value== '')
            {
                             document.form.action = "main.html";
            }
            else
            {
                alert('No valid');
            }
        return ;
            };

       // Transaction error callback
          //
          function errorCB(tx, err) {
              alert("Error processing SQL: "+err);
          };

          // Transaction success callback
          //
          function successCB() { 
          };

        function isTableExists(tx, tableName, callback) {
              tx.executeSql('SELECT * FROM '+tableName, [], function(tx, resultSet) {
                  if (resultSet.rows.length <= 0) {
                      callback(false);
                  } else {
                      callback(true);
                  }
              }, function(err) {
                  callback(false);
              })
        };

        function populateDB(tx) {

         isTableExists(tx, "invoices", function(status) {
                  if (!status) {
                     tx.executeSql('CREATE TABLE IF NOT EXISTS "invoices" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "month" INTEGER NOT NULL , "year" INTEGER, "client" INTEGER, "amount" FLOAT, "tax" FLOAT);');
        tx.executeSql('INSERT INTO "invoices" VALUES(1,1,2,1,1500,21);');
        tx.executeSql('INSERT INTO "invoices" VALUES(2,2,1,2,2500,16);');
        tx.executeSql('INSERT INTO "invoices" VALUES(3,10,1,3,3500,21);');
        tx.executeSql('INSERT INTO "invoices" VALUES(4,5,4,1,10500,21);');
        tx.executeSql('INSERT INTO "invoices" VALUES(5,4,2,2,15500,21);');
        tx.executeSql('INSERT INTO "invoices" VALUES(6,1,4,4,134200,21);');
                  } 
              });

      isTableExists(tx, "clients", function(status) {
                  if (!status) {
                    tx.executeSql('CREATE TABLE IF NOT EXISTS"clients" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "name" VARCHAR);');
        tx.executeSql('INSERT INTO "clients" VALUES(1,"Alfonso");');
        tx.executeSql('INSERT INTO "clients" VALUES(2,"Alejandro");');
        tx.executeSql('INSERT INTO "clients" VALUES(3,"Ricardo");');
        tx.executeSql('INSERT INTO "clients" VALUES(4,"Víctor");');
                  } 
              });

        isTableExists(tx, "months", function(status) {
                  if (!status) {
                 tx.executeSql('CREATE TABLE IF NOT EXISTS "months" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "name" VARCHAR);');
        tx.executeSql('INSERT INTO "months" VALUES(1,"January");');
        tx.executeSql('INSERT INTO "months" VALUES(2,"February");');
        tx.executeSql('INSERT INTO "months" VALUES(3,"March");');

        tx.executeSql('INSERT INTO "months" VALUES(4,"April");');
        tx.executeSql('INSERT INTO "months" VALUES(5,"May");');
        tx.executeSql('INSERT INTO "months" VALUES(6,"June");');
        tx.executeSql('INSERT INTO "months" VALUES(7,"July");');
        tx.executeSql('INSERT INTO "months" VALUES(8,"August");');
        tx.executeSql('INSERT INTO "months" VALUES(9,"September");');
        tx.executeSql('INSERT INTO "months" VALUES(10,"October");');
        tx.executeSql('INSERT INTO "months" VALUES(11,"November");');
        tx.executeSql('INSERT INTO "months" VALUES(12,"December");');
                  } 
              });

      isTableExists(tx, "years", function(status) {
                  if (!status) {
                    tx.executeSql('CREATE TABLE IF NOT EXISTS "years" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "year" INTEGER);');
        tx.executeSql('INSERT INTO "years" VALUES(1,2009);');
        tx.executeSql('INSERT INTO "years" VALUES(2,2010);');
        tx.executeSql('INSERT INTO "years" VALUES(3,2011);');
        tx.executeSql('INSERT INTO "years" VALUES(4,2012);');
                  } 
              });

          }

        </script>

         <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
              <meta name="format-detection" content="telephone=no" />
              <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
               <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.0rc2.css"
       type="text/css" charset="utf-8">

       <link media="all" href="docucss.css" type= "text/css" rel="stylesheet" />

        <title>Mobile Bussiness App</title>
        <script type="text/javascript" src="cordova-2.2.0.js"></script>
              <script type="text/javascript">
                  app.initialize();
              </script>

      </head>
      <body>
      <div id="loginPage" data-role="page">
      <div data-role="header">
      <img src="images/login.jpg" alt="Login" height="42" width="42">
      <h1 class="title">Mobile Bussiness App</h1>

      </div>
      <div data-role="content">
      <form id="loginForm" onsubmit="goToMain('./main.html')" method="post"
       action="" name="form">
        <div data-role="fieldcontain" class="ui-hide-label"> <label
       for="username">Username:</label> <input name="username" id="username"
       value="" placeholder="Username" type="text"> </div>
        <div data-role="fieldcontain" class="ui-hide-label"> <label
       for="password">Password:</label> <input name="password" id="password"
       value="" placeholder="Password" type="password"> </div>
        <input value="Login" id="submitButton" type="submit"> </form>
      </div>
      <div data-role="footer">
      <h4>© MBA</h4>
      </div>
      </div>
      </body>
      </html> 
```

和 main.html：

```
<!DOCTYPE html> 
        <html> 
            <head> 
               <link rel="stylesheet" href="js/jquery.mobile-1.0.min.css" />

              <script type="text/javascript" src="js/xui-2.3.2.js"></script>

        <script>

        var dbShell;
        var s;

        /*
         * Licensed to the Apache Software Foundation (ASF) under one
         * or more contributor license agreements.  See the NOTICE file
         * distributed with this work for additional information
         * regarding copyright ownership.  The ASF licenses this file
         * to you under the Apache License, Version 2.0 (the
         * "License"); you may not use this file except in compliance
         * with the License.  You may obtain a copy of the License at
         *
         * http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing,
         * software distributed under the License is distributed on an
         * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
         * KIND, either express or impylied.  See the License for the
         * specific language governing permissions and limitations
         * under the License.
         */
        var app = {
            // Application Constructor
            initialize: function() {
                this.bindEvents();

            },
            // Bind Event Listeners
            //
            // Bind any events that are required on startup. Common events are:
            // 'load', 'deviceready', 'offline', and 'online'.
            bindEvents: function() {
                document.addEventListener('deviceready', this.onDeviceReady, false);
            },
            // deviceready Event Handler
            //
            // The scope of 'this' is the event. In order to call the 'receivedEvent'
            // function, we must explicity call 'app.receivedEvent(...);'
            onDeviceReady: function() {
                app.receivedEvent('deviceready');

            },
            // Update DOM on a Received Event
            receivedEvent: function(id) {
                dbShell = window.openDatabase("test", "1.0", "Test DB", 10000000);
                getEntries(); 
                    }
        };

        function getEntries() {
            //doLog("get entries");
            dbShell.transaction(function(tx) {
                tx.executeSql("select id, name from clients",[],renderEntries,dbErrorHandler);
            tx.executeSql("select id, year from years",[],renderEntriesYears,dbErrorHandler);

            }, dbErrorHandler);
        }

        function dbErrorHandler(err){
            alert("DB Error: "+err.message + "\nCode="+err.code);
        }

        function renderEntries(tx,results){
        try{
                $("#entryText").html("<p>  You currently do not have any clients.</p>");

               s = "<p class=\"title2\"> These are your clients: </p>";
               for(var i=0; i<results.rows.length; i++) {
            var  name= results.rows.item(i).name;
            var id = results.rows.item(i).id;
                s += "<li><a href=\"clientsinvoices.html?id="+id+"&ref=0\" data-transition=\"slide\" rel=\"external\">" + name + "</a></li>";   
        //  alert(s);
              }
            $("#linksList").html(s);
            $("#linksList").listview("refresh");

          }
            catch(err)
              {
              txt="There are no invoices for this client\n\n" + err;
              txt+="Click OK to continue.\n\n";
              alert(txt);
          }

        }

        function renderEntriesYears(tx,results){
           // doLog("render entries");
         // if (results.rows.length < 1) {
        try{
                $("#entryText").html("<p>  You currently do not have any clients.</p>");
          // } else {
               s += "<p class=\"title2\"> These are your years: </p>";
               for(var i=0; i<results.rows.length; i++) {
            var  name= results.rows.item(i).year;
            var id = results.rows.item(i).id;
                s += "<li><a href=\"clientsinvoices.html?id="+id+"&ref=1\" data-transition=\"slide\" rel=\"external\">" + name + "</a></li>";   
        //  alert(s);
              }
            $("#linksList").html(s);
            $("#linksList").listview("refresh");
          }
            catch(err)
              {
              txt="There are no invoices for this year\n\n"+ err;
              txt+="Click OK to continue.\n\n";
              alert(txt);
          }
        }

        </script>

          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                <meta name="format-detection" content="telephone=no" />

                <meta name="viewport" content="user-scalable=no, initial-scale=1,
                 maximum-scale=1, minimum-scale=1, width=device-width, 
                 height=device-height, target-densitydpi=device-dpi" />

                 <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.0rc2.css"
         type="text/css" charset="utf-8">

          <link media="all" href="docucss.css" type= "text/css" rel="stylesheet" />

          <title class="title">Mobile Business App</title>
          <script type="text/javascript" src="cordova-2.2.0.js"></script>
                <script type="text/javascript">
                    app.initialize();
                </script>

        </head> 
        <body > 

        <div  data-role="page" id="mainPage" style="background-image:url('images/back.jpg');">

               <h1 class="title">Clients And Years</h1>

            <div data-role="content">  
                <div id="status"></div>  
                <ul id="linksList" data-role="listview" data-inset="true"></ul>

            </div>

        </div>

        <div data-role="page" id="contentPage" style="background-image:url('images/back.jpg');" >

            <div data-role="header">
                  <a href="./index.html" data-rel="back">Home</a>
            </div>

            <div data-role="content" id="entryText">
            </div>

        </div>

        </body>
        </html> 
```

感谢所有帮助过我的人！

问候！

# android - 如何在android中每隔几秒刷新一次视图？

> ID：13938570
> 
> 赞同：0
> 
> 时间：2012-12-18T17:45:44.120
> 
> 标签：android

在我的应用程序中，我正在后台服务中传输图片。对于每张图片，我的 sqlite 数据库中都有数据库条目。现在我想在我的主屏幕上添加一个信息区域，显示需要传输的图片数量。该区域应每 10 秒刷新一次，以便用户可以查看是否需要完成多少作业。

android中解决此类问题的最佳实践是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:50:25.930

您可以尝试以 10 秒的延迟创建该方法的“递归调用”

```
 Handler handler = new Handler();

    handler.postDelayed(new Runnable() {
    @Override
    public void run() {

    //do anything

    }
    }, 10000); 
```

** 或更好地使用以下方法

```
Timer t = new Timer();

void timerMethod()
{
t.schedule(new TimerTask() {
public void run() {

Log.d("timer", "timer ");
//do anything

}
}, 10000, 10000);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:54:59.303

与其每 10 秒手动更新一次，不如在每次任务完成时更新它。只要任务不在 UI 线程上发生，两者就不会相互干扰。如果进度条逐渐填满（或百分比数字逐渐上升，或其他），而不是每 10 秒发生一次巨大变化，它也会使应用程序感觉更流畅。

为了从非 UI 线程更新 UI，您需要使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。[在 Android 的开发者网站](http://developer.android.com/guide/components/aidl.html)上有一个很好的例子，说明了如何使用 Handler 从服务与 UI 进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T20:14:36.353

使用`AsyncTask`. 工作开始`doInBackground()`，在任务期间更新 UI，在任务`publishProgress()`结束时更新 UI `onPostExecute()`。to 的优点`AsyncTask`是它`Handler`为您处理创建和管理 s 并提供一个简洁的位置来构建您的代码。

在此处查看我对骨架代码的评论：[防止应用程序看起来挂起](https://stackoverflow.com/questions/13842316/preventing-app-from-looking-hung/13844089#13844089)

另请阅读 API：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

以及关于 AsyncTasks 的教程：[http ://www.vogella.com/articles/AndroidPerformance/article.html#asynctask](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)

# iphone - 尝试从 iOS6 应用程序中启动引导式访问？

> ID：13938571
> 
> 赞同：0
> 
> 时间：2012-12-18T17:45:45.273
> 
> 标签：iphone, ios, guided-access

我们在 XCode 中构建了一个 iOS6 (iPhone) 应用程序，该应用程序在列表视图中列出了用户设备（已注册 URL）上已安装的应用程序。是否可以在引导访问模式下打开列表中的某个应用程序（如果事先打开引导访问）？基本上，我们希望绕过对主页按钮的三次单击，并使列表中的任何应用程序直接打开到引导访问开始屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:20:41.300

据[苹果](http://www.apple.com/ios/whats-new/)称，

> 引导式访问可帮助自闭症等残疾学生继续完成任务并专注于内容。它允许家长、老师或管理员通过禁用 Home 按钮将 iOS 设备限制为一个应用程序，并限制屏幕某些区域的触摸输入。

很明显，Apple 将禁止启动其他应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:48:44.957

目前没有通过 API 启动引导访问模式的方法；唯一的方法是让用户去做（设置、三次点击主页等）。一些测试应用程序说他们测试（通过 API 调用）以确保应用程序处于引导访问模式，否则他们将不会运行测试。现在正在寻找那个 API 调用。

# google-maps - 我如何要求更多配额以及对 Google Maps Geolocation API 的请求的费用是多少？

> ID：13938573
> 
> 赞同：-1
> 
> 时间：2012-12-18T17:45:49.790
> 
> 标签：google-maps, google-maps-api-3, google-maps-mobile

我基于 Google Gears API 开发了一个移动应用程序

API 中的 URL：[https ://developers.google.com/gears/](https://developers.google.com/gears/)

但是不再支持 API。

我想将我的应用迁移到 Google Maps Geolocation API。

API 中的 URL：[https ://developers.google.com/maps/documentation/business/geolocation](https://developers.google.com/maps/documentation/business/geolocation)

我检查了 Geolocation API 的功能，它似乎是迁移我的应用程序以保持我使用 Gears API 所具有的功能的最佳解决方案。

我正在开发迁移，但我完成了我的每日配额。

当我在 Google API 控制台上请求更多配额时，我被重定向一个表单以联系 Google 销售主管。

另一方面，我启用了计费，我有 15 美元的信用额度，但即使我无法更改我的每日配额。

我如何要求更多的每日请求配额以及费用是多少？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:44:52.753

您需要联系 Google 销售人员使用 Google Maps Geolocation API，因为除了测试配额（100 次/天），Google 不提供免费配额。您可能还需要购买 Google Maps API 的营业执照，地理位置 API 可能需要营业执照。所以询问谷歌销售是唯一可用的选项。

# javascript - app.all 和 app.use 有什么区别？

> ID：13938576
> 
> 赞同：5
> 
> 时间：2012-12-18T17:46:10.267
> 
> 标签：javascript, node.js, express

`app.all()`和 和有什么不一样`app.use()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T21:32:01.563

`app.all()`将在使用任何类型的请求方法（例如 GET、POST、PUT 或 DELETE）请求特定 URI 时调用。

`app.use()`另一方面，对于您可能拥有的任何中间件都更有用，因为它“挂载”到路径前缀上，并且在请求该路由下的 URI 时将被调用。因此，例如`app.use('admin/', isAuthorized)`可以是一个中间件，它将确保在“admin/”下访问的任何 URI（例如“admin/settings”或“admin/bing/bang”）仅由授权用户请求。如果您不提供挂载路径，则默认使用根 URI“/”。

`app.all()`您可以通过使用 glob（例如`app.all('admin/*', isAuthorized)`）来做同样的事情，但是`app.use()`需要额外的步骤来剥离`req.path`对于某些中间件非常有用的挂载 URI。

# svn - Hudson + 如何从多个分支更新文件

> ID：13938579
> 
> 赞同：0
> 
> 时间：2012-12-18T17:46:13.330
> 
> 标签：svn, tortoisesvn, hudson

我正在使用 SVN 和 Hudson 进行构建。我在 SVN 中有两个分支，比如 Branch1 和 Branch2。我需要来自两个分支的文件进行构建。如何使用 hudson 从多个分支获取文件？如果我在 hudson SVN 插件中也提供了 branch2 url，它会给出类似 E155000 的错误：'C:\Hudson_CI\jobs\SVN_TEST\workspace' 已经是不同 URL 的工作副本；请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:50:37.247

您不应该需要来自 2 个分支的文件来进行构建。分支是（应该是）源代码的完整副本。所以，你一开始就有根本性的错误。签出*component1*和*component2*进行构建是可以的，但签出同一**组件的***branch1*和*branch2*并不是 SVN（或任何与 SVN 一起使用的工具）的设计方式。

 **但是，关于您的问题，Hudson 可以从两个（或更多）不同的位置进行检查。

当你配置**Repository URL**时，它下面是**Local module directory (optional)**。当使用超过 1 个 URL 进行结帐时，您必须为不同的结帐提供不同的文件夹（在您的工作区下）。打电话给他们`branch1`，`branch2`在你的情况下。

结帐完成后，您可以通过`${WORKSPACE}/branch1`和`${WORKSPACE}/branch2`分别引用它们。

但是，如果碰巧，您希望来自 2 个不同 URL 的结帐文件出现在同一目录下……请阅读我的第一段。你真的必须重新考虑你在用 SVN 做什么。您仍然可以在 Hudson 中执行此操作，方法是运行一个 shell/batch 脚本步骤，该步骤将在结帐后复制`${WORKSPACE}/branch2`内容。`${WORKSPACE}/branch1`**

# android - Listview 崩溃应用程序：Java 空指针异常

> ID：13938581
> 
> 赞同：1
> 
> 时间：2012-12-18T17:46:20.007
> 
> 标签：android, listview, nullpointerexception, android-lazyadapter

我正在尝试制作一个应用程序，该应用程序从 mysql 数据库中检索具有相应图像的菜单类别列表并将其显示在列表视图（R.id.list）中。单击列表项时，特定类别下的食物项将再次显示在列表视图（R.id.listMenuItem）中。

图像的路径存储在数据库中。我按照以下链接使用图像和 texviews 填充列表视图

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)和[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

我已经使用 Imageloader 类和lazyAdapter 类对图像进行延迟加载。我成功地显示了第一个列表视图，并按照相同的步骤在 onclick 事件中加载了第二个列表视图。

但是我的应用程序在单击列表项时崩溃。单击项的 ID 正在通过 Intent 传递（我检查过）。调试应用程序告诉我“ jar adt-bundle-windows\sdk\platforms\android 4.2\android .jar 没有源附件”

我加载列表视图的活动是

```
public class MenuItemActivity extends Activity {

ArrayList<HashMap<String, String>> MenuItem  ;
    ListView listviewMenuItem;
    LazyAdapterMenuItem adapter;   
    String menu_item_image_url ="http://10.0.2.2/Restaurant/Images/Item_Menu/";

public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);
     MenuItem = new ArrayList<HashMap<String, String>>();
     setContentView(R.layout.menu_item_list);   // set the Layout 
     Bundle extras = getIntent().getExtras(); 
     String menuCategclickedItem="";
     if(extras!=null)
      {
         menuCategclickedItem=extras.getString("MCat_ID");
         Toast.makeText(MenuItemActivity.this,menuCategclickedItem+" hi item selected", Toast.LENGTH_LONG).show();
      }
     GetMenuItemImageURL objgetMenuItemImageURL = new GetMenuItemImageURL();
     objgetMenuItemImageURL.execute(menuCategclickedItem);
} 
```

GetMenuItemImageURL 是一个异步任务，用于从数据库中获取图像和数据并添加到哈希映射“map”中。在 onPostExecute 我有设置列表适配器的代码。

```
protected void onPostExecute(final ArrayList<HashMap<String, String>> menuItem)
{
    listviewMenuItem=(ListView)findViewById(R.id.listMenuItem);
    adapter=new LazyAdapterMenuItem(MenuItemActivity.this, menuItem);
    listviewMenuItem.setAdapter(adapter);

    listviewMenuItem.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            TextView tv = (TextView)view.findViewById(R.id.menu_single_item_id);
            String pos = tv.getText().toString();
            Intent in = new Intent(MenuItemActivity.this,ViewDetailsActivity.class);
            in.putExtra("ItemCode",pos);
            startActivity(in);

        }});

}
} 
```

LazyAdapterMenuItem 类如下

```
 public class LazyAdapterMenuItem  extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String,String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapterMenuItem(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.menu_category_item, null);

        TextView textID=(TextView)vi.findViewById(R.id.menu_item_id);
        TextView textName=(TextView)vi.findViewById(R.id.menu_name);
        TextView textCost=(TextView)vi.findViewById(R.id.menu_item_cost);
        ImageView image=(ImageView)vi.findViewById(R.id.image);

        HashMap<String, String> MenuItem = new HashMap<String, String>();
        MenuItem= data.get(position);

        textID.setText(MenuItem.get("ItemCode"));
        textName.setText(MenuItem.get("ItemName"));
        textCost.setText(MenuItem.get("MaxPrice"));
        imageLoader.DisplayImage(MenuItem.get("Image_Path"),image);
        return vi;
    }
} 
```

在调试时，LazyAdapter 的 getView 会抛出异常。正如许多帖子所暗示的那样，它返回的是 ConcertView 而不是 null。我不知道要做出什么改变......

我的 logcat 看起来像这样

```
E/AndroidRuntime(1641): FATAL EXCEPTION: main
E/AndroidRuntime(1641): java.lang.NullPointerException
E/AndroidRuntime(1641):at    com.premier.premierrestaurant.LazyAdapterMenuItem.getView(LazyAdapterMenuItem.java:63)
E/AndroidRuntime(1641):     at android.widget.AbsListView.obtainView(AbsListView.java:2159)
E/AndroidRuntime(1641):     at android.widget.ListView.makeAndAddView(ListView.java:1831)
E/AndroidRuntime(1641):     at android.widget.ListView.fillDown(ListView.java:674)
E/AndroidRuntime(1641):     at android.widget.ListView.fillFromTop(ListView.java:735)
E/AndroidRuntime(1641):     at android.widget.ListView.layoutChildren(ListView.java:1652)
E/AndroidRuntime(1641):     at android.widget.AbsListView.onLayout(AbsListView.java:1994)
E/AndroidRuntime(1641):     at android.view.View.layout(View.java:14003)
E/AndroidRuntime(1641):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
E/AndroidRuntime(1641):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
E/AndroidRuntime(1641):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
E/AndroidRuntime(1641):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
E/AndroidRuntime(1641):     at android.view.View.layout(View.java:14003)
E/AndroidRuntime(1641):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
E/AndroidRuntime(1641):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
E/AndroidRuntime(1641):     at android.view.View.layout(View.java:14003)
E/AndroidRuntime(1641):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
E/AndroidRuntime(1641):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
E/AndroidRuntime(1641):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
E/AndroidRuntime(1641):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
E/AndroidRuntime(1641):     at android.view.View.layout(View.java:14003)
E/AndroidRuntime(1641):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
E/AndroidRuntime(1641):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448) 
```

有人可以帮助我...我是android新手...有什么我忽略的...在此先感谢您的帮助...

（我在 Windows 7 android 4.2 上运行 Eclipse IDE）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:00:20.063

我提供了评论中的解决方案，因此这个问题可以正式标记为“已解决”。我问：

> 是否`menu_category_item.xml`有带有 id 的 TextView `menu_item_cost`？

显然没有。如您所知`findViewById()`，无法找到未附加到当前活动的视图，您只需要提醒。

# c# - Datagrid 显示来自数据库的双精度（Windows 窗体）

> ID：13938583
> 
> 赞同：0
> 
> 时间：2012-12-18T17:46:32.067
> 
> 标签：c#, database, datagridview, double, scrollable

我想将以下程序更改为从数据库中获取双精度列表（四舍五入到小数点后两位并按升序排列）并将它们显示在数据网格中的程序。我当前的程序有点无限上下滚动，但它是肤浅的，因为数字会立即被遗忘。我希望我的程序能够在可滚动表中显示数据库中的所有数字，并且我希望数据网格能够记住它们。

唯一的问题是我对数据库没有任何经验。我不知道如何连接到它们，如何导入它们或类似的东西。有人可以帮我开始吗？我至少需要访问数据库（以及哪个），我想我可以自己弄清楚如何格式化它。

另外，对我来说重要的问题：是从在线访问数据库还是可以在本地下载和访问数据库。

谢谢

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Xml.Serialization;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SterlingDataGrid
{

public partial class Form1 : System.Windows.Forms.Form
{

   // private SterlingLib.STIQuote stiQuote = new SterlingLib.STIQuote();
    //private SterlingLib.STIApp stiApp = new SterlingLib.STIApp();
    //private List<string> listMsg = new List<string>();
   // private bool bModeXML = true;

    private Panel buttonPanel = new Panel();
    private Panel buttonPanel2 = new Panel();

    private DataGridView sterlingDataGridView = new DataGridView();
    private Button upButton = new Button();
    private Button downButton = new Button();
    private TextBox quoteBox = new TextBox();

    public static double num1 = 1203.5;

    public Form1()
    {
        this.Load += new EventHandler(Form1_Load);

    }

    private void Form1_Load(System.Object sender, System.EventArgs e)
    {
        SetupLayout();
        SetupDataGridView();
        PopulateDataGridView();
    }

    private void upButton_Click(object sender, EventArgs e)
    {
        num1 += .1;
        sterlingDataGridView.Rows[1].Cells[2].Value = num1;
        for (int r = 2; r < 10; r++)
        {
            sterlingDataGridView.Rows[r].Cells[2].Value = (double)(sterlingDataGridView.Rows[r - 1].Cells[2].Value) - 0.1;
        }
    }

    private void downButton_Click(object sender, EventArgs e)
    {
        num1 -= .1;
        sterlingDataGridView.Rows[1].Cells[2].Value = num1;
        for (int r = 2; r < 10; r++)
        {
            sterlingDataGridView.Rows[r].Cells[2].Value = (double)(sterlingDataGridView.Rows[r - 1].Cells[2].Value) - 0.1;
        }
    }

    //***NEW***
    private void sterlingDataGridView_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            DataGridView.HitTestInfo hit = sterlingDataGridView.HitTest(e.X, e.Y);
            if (hit.Type == DataGridViewHitTestType.Cell)
            {

                //clickedCell = sterlingDataGridView.Rows[hit.RowIndex].Cells[hit.ColumnIndex];
                if(hit.ColumnX == 0)

                MessageBox.Show("TEST COMPLETE. ROW INDEX: " + hit.RowIndex + " COLUMN INDEX: " + hit.ColumnIndex);
            }
        }
    }

    private void SetupLayout()
    {
        this.Size = new Size(600, 500);

        sterlingDataGridView.AutoSize = true;

        upButton.Text = "^";
        upButton.Location = new Point(10, 10);
        upButton.Click += new EventHandler(upButton_Click);

        downButton.Text = "v";
        downButton.Location = new Point(100, 10);
        downButton.Click += new EventHandler(downButton_Click);

        sterlingDataGridView.MouseDown += new MouseEventHandler(sterlingDataGridView_MouseDown);

        buttonPanel.Controls.Add(upButton);
        buttonPanel.Controls.Add(downButton);
        buttonPanel.Controls.Add(quoteBox);

        quoteBox.Location = new Point(100, 0 + (upButton.Height*2));
        downButton.Location = new Point(110, 0 + upButton.Height);
        upButton.Location = new Point(110, 0);

        buttonPanel.Height = 197;
        buttonPanel.Dock = DockStyle.Bottom;

        buttonPanel2.Width = 231;
        buttonPanel2.Dock = DockStyle.Right;

     //   buttonPanel.Controls.
        this.Controls.Add(this.buttonPanel);
        this.Controls.Add(this.buttonPanel2);
    }

    private void SetupDataGridView()
    {
        this.Controls.Add(sterlingDataGridView);

        sterlingDataGridView.ColumnCount = 6;

        sterlingDataGridView.ColumnHeadersDefaultCellStyle.BackColor = Color.Navy;
        sterlingDataGridView.ColumnHeadersDefaultCellStyle.ForeColor = Color.White;
        sterlingDataGridView.ColumnHeadersDefaultCellStyle.Font =
            new Font(sterlingDataGridView.Font, FontStyle.Bold);

        sterlingDataGridView.Name = "sterlingDataGridView";
        sterlingDataGridView.Location = new Point(8, 8);
        sterlingDataGridView.Size = new Size(500, 250);
        sterlingDataGridView.AutoSizeRowsMode =
            DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders;
        sterlingDataGridView.ColumnHeadersBorderStyle =
            DataGridViewHeaderBorderStyle.Single;
        sterlingDataGridView.CellBorderStyle = DataGridViewCellBorderStyle.Single;
        sterlingDataGridView.GridColor = Color.Black;
        sterlingDataGridView.RowHeadersVisible = false;
        sterlingDataGridView.ReadOnly = true; //***NEW***

        sterlingDataGridView.Columns[0].Width = sterlingDataGridView.Columns[2].Width / 2;
        sterlingDataGridView.Columns[1].Width = sterlingDataGridView.Columns[2].Width/2;
        sterlingDataGridView.Columns[3].Width = sterlingDataGridView.Columns[2].Width / 2;
        sterlingDataGridView.Columns[4].Width = sterlingDataGridView.Columns[2].Width / 2;
        sterlingDataGridView.Columns[5].Width = sterlingDataGridView.Columns[2].Width / 2;

        sterlingDataGridView.Columns[0].Name = "Bid";
        sterlingDataGridView.Columns[1].Name = "BidQty";
        sterlingDataGridView.Columns[2].Name = "";
        sterlingDataGridView.Columns[3].Name = "AskQty";
        sterlingDataGridView.Columns[4].Name = "Ask";
        sterlingDataGridView.Columns[5].Name = "Vol";

        sterlingDataGridView.SelectionMode =
            DataGridViewSelectionMode.FullRowSelect;
        sterlingDataGridView.MultiSelect = false;
        sterlingDataGridView.Dock = DockStyle.Fill;

    }

    void PopulateDataGridView()
    {

        double num2 = num1 - .1;
        double num3 = num2 - .1;
        double num4 = num3 - .1;
        double num5 = num4 - .1;
        double num6 = num5 - .1;
        double num7 = num6 - .1;
        double num8 = num7 - .1;
        double num9 = num8 - .1;
        string[] row0 = { "", "", "      ^", "", "", "" };
        string[] row1 = { "", "", System.Convert.ToString(num1), "", "", "" };
        string[] row2 = { "", "", System.Convert.ToString(num2), "", "", "" };
        string[] row3 = { "", "", System.Convert.ToString(num3), "", "", "" };
        string[] row4 = { "", "", System.Convert.ToString(num4), "", "", "" };
        string[] row5 = { "", "", System.Convert.ToString(num5), "", "", "" };
        string[] row6 = { "", "", System.Convert.ToString(num6), "", "", "" };
        string[] row7 = { "", "", System.Convert.ToString(num7), "", "", "" };
        string[] row8 = { "", "", System.Convert.ToString(num8), "", "", "" };
        string[] row9 = { "", "", System.Convert.ToString(num9), "", "", "" };
        string[] row10 = { "", "", "      v", "", "", "" };

        sterlingDataGridView.Rows.Add(row0);
        sterlingDataGridView.Rows.Add(row1);
        sterlingDataGridView.Rows.Add(row2);
        sterlingDataGridView.Rows.Add(row3);
        sterlingDataGridView.Rows.Add(row4);
        sterlingDataGridView.Rows.Add(row5);
        sterlingDataGridView.Rows.Add(row6);
        sterlingDataGridView.Rows.Add(row7);
        sterlingDataGridView.Rows.Add(row8);
        sterlingDataGridView.Rows.Add(row9);
        sterlingDataGridView.Rows.Add(row10);

        sterlingDataGridView.Columns[0].DisplayIndex = 0;
        sterlingDataGridView.Columns[1].DisplayIndex = 1;
        sterlingDataGridView.Columns[2].DisplayIndex = 2;
        sterlingDataGridView.Columns[3].DisplayIndex = 3;
        sterlingDataGridView.Columns[4].DisplayIndex = 4;
    }

}      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:45:14.723

我建议使用以下链接，以获得 LINQ to SQL 的良好开端：

[linq-to-sql 的最快启动](http://blogs.msdn.com/b/ericwhite/archive/2008/10/16/fastest-start-for-linq-to-sql.aspx?Redirected=true)

[using-linq-to-sql-tutorials](http://scottonwriting.net/sowblog/archive/2010/07/27/links-to-scott-guthrie-s-using-linq-to-sql-tutorials.aspx)

祝你好运！

由于您将拥有一个应该下载并运行的应用程序，我建议使用 XML 或 TEXT 文件作为本地数据库，它可以是您的应用程序旁边的一个简单文件，不需要安装。这是一个好的开始工作 XML：

[LINQ to XML 教程](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

您还可以搜索“LINQ to XML”+beginning 或 tutorial，以获取有关 LINQ to XML 的一些有用文章。

# python - 将精度和比例应用于 python 浮点对象？

> ID：13938586
> 
> 赞同：-1
> 
> 时间：2012-12-18T17:46:42.107
> 
> 标签：python, decimal

我是 python 编程的新手，我想将输入的浮点数转换为输出精度为 10 或更少（数字的总位数）并缩放为 1（小数点后的数字）。我怎样才能在python中实现它。

```
>>> float(raw_input("Enter price:"))
User price:6738882993.98888888373333
6738882993.988889
>>> 
```

谢谢

盒马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:48:33.970

为了让你需要[十进制](http://docs.python.org/2/library/decimal.html)类型，而不是浮点类型。

# spring - 具有 Java 安全策略的嵌入式 Jetty

> ID：13938593
> 
> 赞同：1
> 
> 时间：2012-12-18T17:47:12.330
> 
> 标签：spring, security, embedded-jetty, policies

我正在使用嵌入式码头。我的应用程序加载了外部战争。我想限制加载的 Web 应用程序可以执行的操作，因此我应用了 Java 安全策略。现在我的应用程序启动了，但是当我尝试启动已部署的 Web 应用程序时它崩溃了。战争被提取到 $JETTY_HOME/temp/${webapp}/webapp/

**政策**

```
grant codeBase "file:${jetty.appserver.homeDirectory}/app/-" {
    permission java.security.AllPermission; 

};

grant codeBase "file:${jetty.appserver.homeDirectory}/temp/-" {
    permission java.io.FilePermission "file:${jetty.appserver.homeDirectory}/temp/-", "read";
};

grant { 
    permission java.net.SocketPermission "*", "accept,resolve";
    permission java.io.FilePermission "${java.home}${/}-", "read";
    permission java.io.FilePermission "${jetty.appserver.homeDirectory}${/}-", "read";
    permission java.io.FilePermission "file:${jetty.appserver.homeDirectory}/temp/-", "read";
    permission java.io.FilePermission "/usr/lib/jvm/jdk1.6.0_25/lib/tools.jar", "read";
    permission java.util.PropertyPermission "*", "read";
    permission java.lang.RuntimePermission "getClassLoader";
    permission java.lang.RuntimePermission "accessClassInPackage.sun.tools.*";

    permission java.lang.RuntimePermission "org.springframework.*";
}; 
```

**例外**

```
 2012-12-18 17:12:13.191: org.springframework.web.servlet.DispatcherServlet ERROR - Context initialization failed
java.lang.UnsupportedOperationException
    at org.springframework.core.env.ReadOnlySystemAttributesMap.keySet(ReadOnlySystemAttributesMap.java:88)
    at org.springframework.core.env.MapPropertySource.getPropertyNames(MapPropertySource.java:41)
    at org.springframework.core.env.EnumerablePropertySource.containsProperty(EnumerablePropertySource.java:70)
    at org.springframework.core.env.SystemEnvironmentPropertySource.resolvePropertyName(SystemEnvironmentPropertySource.java:109)
    at org.springframework.core.env.SystemEnvironmentPropertySource.getProperty(SystemEnvironmentPropertySource.java:90)
    at org.springframework.core.env.PropertySourcesPropertyResolver.getProperty(PropertySourcesPropertyResolver.java:73)
    at org.springframework.core.env.PropertySourcesPropertyResolver.getProperty(PropertySourcesPropertyResolver.java:59)
    at org.springframework.core.env.AbstractEnvironment.getProperty(AbstractEnvironment.java:414)
    at org.springframework.core.env.AbstractEnvironment.doGetActiveProfiles(AbstractEnvironment.java:235)
    at org.springframework.core.env.AbstractEnvironment.getActiveProfiles(AbstractEnvironment.java:222)
    at org.springframework.core.env.AbstractEnvironment.merge(AbstractEnvironment.java:396)
    at org.springframework.context.support.AbstractApplicationContext.setParent(AbstractApplicationContext.java:392)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:585)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:463)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:283)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:770)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:249)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1214)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:676)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:455)
    at mycompany.application.transport.jetty.appserver.WebAppContextWrapper.doStart(WebAppContextWrapper.java:64)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at mycompany.application.transport.jetty.appserver.JettyAppServer.startHandler(JettyAppServer.java:272)
    at mycompany.application.transport.jetty.appserver.JettyAppServer.deployWebApp(JettyAppServer.java:202)
    at mycompany.application.transport.jetty.appserver.JettyAppServer.deployWebApp(JettyAppServer.java:137)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:244)
    at javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1074)
    at javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:955)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1427)
    at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:788)
    at sun.reflect.GeneratedMethodAccessor42.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
2012-12-18 17:12:13.192: /b WARN - unavailable
java.lang.UnsupportedOperationException
    at org.springframework.core.env.ReadOnlySystemAttributesMap.keySet(ReadOnlySystemAttributesMap.java:88)
    at org.springframework.core.env.MapPropertySource.getPropertyNames(MapPropertySource.java:41)
    at org.springframework.core.env.EnumerablePropertySource.containsProperty(EnumerablePropertySource.java:70)
    at org.springframework.core.env.SystemEnvironmentPropertySource.resolvePropertyName(SystemEnvironmentPropertySource.java:109)
    at org.springframework.core.env.SystemEnvironmentPropertySource.getProperty(SystemEnvironmentPropertySource.java:90)
    at org.springframework.core.env.PropertySourcesPropertyResolver.getProperty(PropertySourcesPropertyResolver.java:73)
    at org.springframework.core.env.PropertySourcesPropertyResolver.getProperty(PropertySourcesPropertyResolver.java:59)
    at org.springframework.core.env.AbstractEnvironment.getProperty(AbstractEnvironment.java:414)
    at org.springframework.core.env.AbstractEnvironment.doGetActiveProfiles(AbstractEnvironment.java:235)
    at org.springframework.core.env.AbstractEnvironment.getActiveProfiles(AbstractEnvironment.java:222)
    at org.springframework.core.env.AbstractEnvironment.merge(AbstractEnvironment.java:396)
    at org.springframework.context.support.AbstractApplicationContext.setParent(AbstractApplicationContext.java:392)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:585)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:463)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:283)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:770)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:249)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1214)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:676)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:455)
    at mycompany.application.transport.jetty.appserver.WebAppContextWrapper.doStart(WebAppContextWrapper.java:64)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at mycompany.application.transport.jetty.appserver.JettyAppServer.startHandler(JettyAppServer.java:272)
    at mycompany.application.transport.jetty.appserver.JettyAppServer.deployWebApp(JettyAppServer.java:202)
    at mycompany.application.transport.jetty.appserver.JettyAppServer.deployWebApp(JettyAppServer.java:137)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:244)
    at javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1074)
    at javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:955)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1427)
    at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:788)
    at sun.reflect.GeneratedMethodAccessor42.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:25:03.250

在 Spring 3.1 版本中，您必须将这些上下文参数添加到您的环境中`web.xml`，才能在启用安全管理器的情况下启动。

```
<context-param>
   <param-name>spring.profiles.default</param-name>
   <param-value>default</param-value>
</context-param>
<context-param>
   <param-name>spring.profiles.active</param-name>
   <param-value>default</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:31:09.620

感谢您的回复，但是我环顾四周后解决了这个错误。

生成异常是因为 spring 无法读取在此异常中不直接可见的 jvm 环境属性。但是一旦你添加了以下权限：

```
permission java.lang.RuntimePermission "getenv.*"; 
```

它将修复上述错误。

# c# - 高效的对象相等 C#

> ID：13938599
> 
> 赞同：5
> 
> 时间：2012-12-18T17:47:43.750
> 
> 标签：c#

我正在尝试提高以下（示例）代码的性能。

```
Object[] inputKeys = new Object[10];
inputKeys[0] = "4021";
inputKeys[1] = "3011";
inputKeys[2] = "1010";
inputKeys[3] = "1020";
inputKeys[4] = "1030"; 
```

然后比较输入键。

```
for (int i = 0; i < 5; i++)
{
    for (int j = 0; j < 5; j++)
    {
        bool result = inputKeys[i].Equals(inputKeys[j]);
    }
} 
```

inputKeys 可以是所有类型`string`，`int32`或`DateTime`。

**`.Equals`**当它达到数百万次时，性能会出现巨大的下降。

**关于如何提高这条线的性能（平等检查）的任何建议？**

我试过这个：使用下面类的数组而不是 Object 数组来保存键。在那里我保留了键类型和键值。

```
public class CustomKey : IEquatable<CustomKey>{
    internal int KeyType { get; private set; }

    internal string ValueString { get; private set; }
    internal int ValueInteger { get; private set; }
    internal DateTime ValueDateTime { get; private set; }

    internal CustomKey(string keyValue)
    {
        this.KeyType = 0;
        this.ValueString = (string)keyValue;
    }

    internal CustomKey(int keyValue)
    {
        this.KeyType = 1;
        this.ValueInteger = (int)keyValue;
    }

    internal CustomKey(DateTime keyValue)
    {
        this.KeyType = 2;
        this.ValueDateTime = (DateTime)keyValue;
    }

    public bool Equals(CustomKey other)
    {
        if (this.KeyType != other.KeyType)
        {
            return false;
        }
        else
        {
            if (this.KeyType == 0)
            {
                return this.ValueString.Equals(other.ValueString);
            }
            else if (this.KeyType == 1)
            {
                return this.ValueInteger.Equals(other.ValueInteger);
            }
            else if (this.KeyType == 2)
            {
                return this.ValueDateTime.Equals(other.ValueDateTime);
            }
            else
            {
                return false;
            }
        }
    }
} 
```

但表现更差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:55:02.410

您的比较循环效率低下。我建议你尝试使用：

```
Distinct<TSource>(this IEnumerable<TSource> source, IEqualityComparer<TSource> comparer) 
```

`IEqualityComparer`为该类型定义您的并将其传递给该方法。你不会得到一个布尔值，但你会得到一个`IEnumerable`包含没有重复的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:07:08.483

作为算法效率的一个例子，你的第一个代码可以重写

```
for (int i = 0; i < 5; i++)
{
    for (int j = i; j < 5; j++)
    {
        bool result = inputKeys[i].Equals(inputKeys[j]);
    }
} 
```

因为 x.Equals(y) 将给出与 y.Equals 相同的结果，所以您不需要同时检查两种方式。 [http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

> Equals 的新实现应该遵循
> 
> x.Equals(y) 返回与 y.Equals(x) 相同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T18:15:34.733

正如评论中所说，您算法的主要负担是您必须将所有内容与所有内容进行比较，这会影响您的表现。对于 100K 元素，这意味着 100k^2 ......或大约 10K 百万组合......你可以看到你有问题的地方。最好的选择是修改算法，**但是**，如果您仍然确定或没有任何其他选择，请考虑：

**首先划分你的对象，稍后比较：**

示例：如果您有 100K 个对象均匀分布，您将拥有 33K 个整数、33K 个字符串和 33K 个日期时间，然后您可以将它们相互比较并忽略它们之间的组合。

100K^2 = 10K 百万

(30K^2) * 3 = 27 亿组合 + 100K 对其列表中的每个元素进行排序

**扩展您的群组**

如果您不太关心内存，您可以对结果进行哈希处理以进一步细化您的组。基本上构建一个网格......**这取决于您的问题非常具体**。

这背后的想法是隔离不能真正相等的事物，这是对先前想法的扩展，但是组越多，组越小，您的表现就越快

这样你就可以有10个组

*   少于 5 个字符的字符串
*   5 到 50 个字符之间的字符串
*   长度超过 50 个字符的字符串

等等...

如果您重做数学运算（再次，对于均匀分布的样本）

总迭代次数 = 10K^2 * 10 + 100K ~ 1 亿次迭代（10 组 + 组成这些组的价格）

实际复杂度 = (n/m)^2 * m + n（其中 n = 元素数，m = 假设均匀分布的组数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T17:55:29.123

尝试获取每个对象的哈希码并将它们与`object.GetHashCode()`. 不确定调用`GetHashCode()`几百万次的开销，但比较两个整数可能会比`Equals(object)`方法快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T18:12:42.980

使用哈希表（或更好的字典）来存储您的项目。您的方法具有 (N^2) 的顺序，通过使用哈希表，您可以将运行时间复杂度降低到 O(N)，其中 N 是数字。

为此，请使用哈希键创建一个哈希表，如果发生冲突，请将项目添加到链表中。当只需要检查同一桶中的对象是否相等时，不应该太多。

我希望这是清楚和有帮助的。

# javascript - 什么是 window.WebGLRenderingContext？

> ID：13938600
> 
> 赞同：2
> 
> 时间：2012-12-18T17:47:49.917
> 
> 标签：javascript, webgl

`window.WebGLRenderingContext`和 和有什么不一样`canvas.getContext('experimental-webgl')`？

我已经搜索了很多，但我找不到答案。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:17:17.453

他们说什么:-)

`instanceof`还有一件事，你可以使用它

```
> c = document.createElement("canvas");
<canvas>​
> gl = c.getContext("experimental-webgl")
WebGLRenderingContext
> gl instanceof WebGLRenderingContext
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:53:54.970

`canvas.getContext`将返回该特定画布的绘图上下文（请参阅[规范 §2：*上下文创建*](http://www.khronos.org/registry/webgl/specs/latest/#2)）。它很可能继承自全局和静态`window.WebGLRenderingContext`对象，该对象公开了[`WebGLRenderingContext`接口（规范 §5.14）](http://www.khronos.org/registry/webgl/specs/latest/#5.14)。浏览器不需要向 DOM 脚本 API 公开这些本机接口，但它们通常会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:54:05.457

WebGLRenderingContext 是本机实现（或被允许），并不意味着由最终用户直接调用以完成工作。

至少，不像现在那样。

真的，您可以使用它来查看是否支持 WebGL：

```
if (!!window.WebGLRenderingContext) { 
    /* webGL is 100% guaranteed to be supported in this browser,
       if browser follows standards */
} 
```

或者

```
if (!window.WebGLRenderingContext) { /* software fallback */ } 
```

但是不能直接使用。

# python - Django url 参数和反向 URL

> ID：13938605
> 
> 赞同：5
> 
> 时间：2012-12-18T17:48:10.993
> 
> 标签：python, django, django-templates, django-views, django-urls

我有一个看起来像这样的视图：

```
def selectCity(request, the_city):
    request.session["ciudad"] = the_city
    city = request.session["ciudad"]
    return HttpResponse('Ciudad has been set' + ": " + city) 
```

还有一个如下所示的 URL：

```
url(r'^set/$', views.selectCity, {'the_city': 'gye'}, name='ciudad'), 
```

现在，当我访问 /set/ 时，我会从 url {'the_city': 'gye'}

**现在**，我想做的是修改我的程序，以便我可以从不同的模板（index.html）调用“ciudad”url 并设置适当的会话变量。所以我会使用反向 URL 匹配和一个额外的参数来调用它，如下所示：

```
 <div class="modal-body">
      <a tabindex="-1" href="{% url ciudad 'the_city':'uio' %}">Quito</a>
      <br/>
      <a tabindex="-1" href="{% url ciudad 'the_city':'gye' %}">Guayaquil</a>
  </div> 
```

我试图以各种方式修改 url 和视图以及反向 url 调用以尝试使其正常工作，但是我似乎无法弄清楚。我真的很感激一些指示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T17:53:58.893

如果您的 url (in `urls.py`) 有任何捕获组，您可以在 url 标记中传递相关参数。

```
url(r'^set/(?P<the_city>\w+)/$', views.selectCity, {'the_city': 'gye'}, name='ciudad'), 
```

然后在模板中：

```
<a tabindex="-1" href="{% url ciudad the_city='gye' %}">Guayaquil</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:52:25.393

检查[捕获的参数](https://docs.djangoproject.com/en/dev/topics/http/urls/#captured-parameters)。像这样的东西可能会起作用：

```
url(r'^set/$', views.selectCity, {'the_city': 'gye'}, name='ciudad'),
url(r'^set/(?P<the_city>\w+)/$', views.selectCity, name='ciudad'), 
```

# ruby-on-rails - 嵌套路由和 has_many :through

> ID：13938606
> 
> 赞同：1
> 
> 时间：2012-12-18T17:48:12.670
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有一个结构，如下所示：

```
Doctor has_many :appointments
Patient has_many :appointments
doctors has_many :patients :through :appointments
patients has_many :doctors :through :appointments 
```

我可以在医生下安排预约吗？这会导致任何限制还是违反最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:10:53.943

嵌套路由只会影响您访问资源的方式。由于您选择组织路线的方式，模型级别不会有任何限制。如果它在您的应用程序上下文中有意义，那么没有理由不这样做。

# c# - 使用 LINQ 在列表中迭代智能方式

> ID：13938607
> 
> 赞同：2
> 
> 时间：2012-12-18T17:48:26.793
> 
> 标签：c#, list, linq-to-objects

我有这个简单的课程：

```
public class JDEItemLotAvailability
    {
        public string Code { get; set; }
        public int ShortCode { get; set; }
        public string Description { get; set; }
        public string PrimaryUnitCode { get; set; }
        public string BranchPlant { get; set; }
        public string Location { get; set; }
        public string Lot { get; set; }
        public int AvailableQuantity { get; set; }
    } 
```

我的 BLL 中的这个 DAL 方法返回它们的列表：

```
var returnedLotList = _JDE8dal.GetLotAvailabilityAsList(_lot); 
```

我想在返回的列表中执行以下操作，并且我想以最“优雅”的 LINQ 方式进行操作。

我想检查列表中是否有符合特定条件的记录。我想过这样的事情：

```
 var query =
      returnedLotList.Where(l => l.AvailableQuantity != 0 && l.BranchPlant == _mcu && l.Location == _locn)
                               .OrderByDescending(l => l.AvailableQuantity); 
```

但是我想说，如果上面的查询没有返回结果，我想取其余列表条目中的第一个。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:58:24.717

你可以使用`DefaultIfEmpty`

```
//your first query, unaltered
var query =
      returnedLotList.Where(l => l.AvailableQuantity != 0 && l.BranchPlant == _mcu && l.Location == _locn)
                               .OrderByDescending(l => l.AvailableQuantity);

var query2 = query.DefaultIfEmpty(returnedLotList.Take(1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:57:44.793

您可以创建一个扩展方法来执行此操作：

```
public static IEnumerable<T> WhereOrFirstOfRest<T>(
    this IEnumerable<T> collection, Func<T, bool> predicate)
{
    var filtered = collection.Where(predicate);

    return filtered.Any() ? filtered : collection.Take(1);
} 
```

这种扩展方法的缺点是它会多次迭代集合。当您处理流（例如来自数据库）时，这可能是一个问题。更有效的方法如下：

```
public static IEnumerable<T> WhereOrFirstOfRest<T>(
    this IEnumerable<T> collection, Func<T, bool> predicate)
{
    // Materialize the complete collection.
    collection = collection.ToArray();

    // Filter the collection. ToArray prevents calling the predicate
    // twice for any item.
    var filtered = collection.Where(predicate).ToArray();

    return filtered.Any() ? filtered : collection.Take(1);
} 
```

尽管这样可以避免对数据库进行任何可能的额外调用，但这确实会在后台创建几个新数组。因此，最有效的方法应该是：

```
public static IEnumerable<T> WhereOrFirstOfRest<T>(
    this IEnumerable<T> collection, Func<T, bool> predicate)
{
    T firstItem = default(T);
    bool firstStored = false;
    bool predicateReturnedItems = false;

    foreach (var item in collection)
    {
        if (!firstStored)
        {
            firstItem = item;
            firstStored = true;   
        }

        if (predicate(item))
        {
            yield return item;
            predicateReturnedItems = true;
        }
    }

    if (!predicateReturnedItems && !first)
    {
        yield return firstItem;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:59:40.550

我不确定我是否理解，但可能是这样的：

```
var firstMatch = returnedLotList.FirstOrDefault(l => l.AvailableQuantity != 0 && 
                                                     l.BranchPlant == _mcu && 
                                                     l.Location == _locn);
if (firstMatch != null)
    return firstMatch;
int max = returnedLotList.Max(l => l.AvailableQuantity);
return returnedLotList.First(l => l.AvailableQuantity == max); 
```

*   如果不匹配，FirstOrDefault 将返回 null
*   我认为拆分查询以更清楚地了解正在发生的事情是一个好主意。

# c# - 需要派生类中的“静态”字段

> ID：13938610
> 
> 赞同：9
> 
> 时间：2012-12-18T17:48:34.793
> 
> 标签：c#, .net, oop, inheritance

我有一个代表基于 JSON 的 API 的类层次结构。有一个通用工厂，它使用 .NET 4（没有第 3 方库）调用 api 并将其反序列化为类。我试图避免必须实例化类来检索每个类唯一的只读信息。

我曾想过（直到我开始阅读[this](https://stackoverflow.com/questions/1420859/assigning-to-static-readonly-field-of-base-class)和[this](https://stackoverflow.com/questions/5851497/static-fields-in-a-base-class-and-derived-classes)，...）我会将静态 URL 与基类/接口相关联，然后将其设置在派生类的构造函数中。类似的东西（这个例子*不起作用*）：

```
abstract class url {
  public abstract static string URL; // This is invalid syntax!
}

class b : url {
  static b () { URL = "http://www.example.com/api/x/?y=1"; }
}

class c: url {
  static c () { URL = "http://www.example.com/api/z"; }
}

// ... so the factory can do something like ...
b result = doJSONRequest<b>(b.URL); 
```

这行不通。静态字段不能是抽象的，也不能在 b**和**c 中唯一设置，因为静态变量存储在它定义的类中（在本例中为 url）。

我怎样才能有一个与类关联的只读项，这样您就可以访问该项目（等）而无需实例化该类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T17:58:19.210

我已经实现了这样的模式，以帮助提醒我需要为每个需要静态访问的派生类设置的常量：

```
public abstract class Foo
{
    public abstract string Bar { get; }
}

public class Derived : Foo
{
    public const string Constant = "value";
    public override string Bar
    {
        get { return Derived.Constant; }
    }
} 
```

我什至发现在实现这种模式之后，常量的多态使用同样有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:12:00.347

我知道你不想问一个实例，但保持方法是静态的。这是不可能的，静态字段在模块中加载一次，并且不能被继承。
我认为唯一的方法是将字典存储在辅助类中，类型为键。像这样

```
class Helper
{
    static Dictionary<Type,string> _urls;
    public static string GetUrl(Type ofType)
    {
        return _urls[ofType];
    }

    public static void AddUrl(Type ofType, string url)
    {
        _urls.Add(ofType,url);
    }
}
class b
{
    static b(){ Helper.AddUrl(typeof(b),"  ");}
}
class Program
{
    b result= doJSONRequest<b>(Helper.GetUrl(typeof(b));
} 
```

或者您可以使用自定义属性装饰所需的类型并将数据存储在该属性中。像这样

```
class UrlAttribute:Attribute
{
    public string Url{get;private set;}
    public UrlAttribute(string url){Url=url;}
}
[Url("someurl")]
class b { }
class Program
{
    void Main()
    {
        UrlAttribute attr = (UrlAttribute)Attribute.GetCustomAttribute(typeof(b), typeof(UrlAttribute));
        //in dot net 4.5 you can ask the type itself
        UrlAttribute attr = (UrlAttribute)typeof(b).GetCustomAttribute(typeof(UrlAttribute));
        //now you can write that...
        b result = doJSONRequest<b>(attr.Url);
    }
    //or even you can do that in doJSONRequest itself
    public T doJSONRequest<T>()
    {
         UrlAttribute attr = (UrlAttribute)typeof(T).GetCustomAttribute(typeof(UrlAttribute));
        ...
        //call it: b result=doJSONRequest<b>();
    } 
} 
```

当然，您可以通过反射将它们全部传递并初始化字典，请参阅[this question](https://stackoverflow.com/questions/4852879/get-all-types-in-assembly-with-custom-attribute)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T18:02:51.913

你可以这样做，没有静态字段。因为静态字段属于一个类型！

```
abstract class url
{
    public virtual string URL { get; } // This is invalid syntax!
}

class b : url
{
    public override string URL
    {
        get { return "http://www.example.com/api/x/?y=1"; }
    }
}

class c : url
{
    public override string URL
    {
        get { return "http://www.example.com/api/z"; }
    }

} 
```

# c - 在 char 中显示 int，并进行一些修改

> ID：13938615
> 
> 赞同：0
> 
> 时间：2012-12-18T17:48:54.733
> 
> 标签：c, string, pointers, char, printf

我目前正在将 Csharp 程序转换为 Unix C。它运行良好，除了：

我有一个包含秒数的整数（秒），出于美学原因，我想用前零（1-> 01 等）显示。我编写的代码如下，它有时有效，有时无效，具体取决于它的调用位置。我怀疑问题出在指针上。

```
char *st_str;
if(secs<10)
{
   if(secs==0) st_str = "00";
   else if(secs==1) st_str = "01";
   else if(secs==2) st_str = "02";
   else if(secs==3) st_str = "03";
   else if(secs==4) st_str = "04";
   else if(secs==5) st_str = "05";
   else if(secs==6) st_str = "06";
   else if(secs==7) st_str = "07";
   else if(secs==8) st_str = "08";
   else if(secs==9) st_str = "09";
}
else
{
   sprintf(st_str,"%i",secs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:51:42.397

当`sprintf()`被调用为`st_str`未初始化的指针时，代码将遇到未定义的行为。`st_str`需要指向有效的内存。

但是，要打印前导零使用格式说明符`"%02d"`。例如：

```
char st_str[32];
snprintf(st_str, sizeof(st_str), "%02d", secs); 
```

并避免`if/else`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:51:56.443

删除那个大的 if/else 结构并替换为：

```
sprintf(st_str, "%02d", secs); 
```

您的版本不起作用，因为`%i`需要一个 int 并且您正在向它提供一个指向 char 的指针。您可以使用 来“修复”它`%s`，但是对于标准功能可以为您做的事情，您所做的工作量太大了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:52:16.623

如果你想 sprintf() 到 st_str，你必须为它分配内存。但是，您提出的代码绝对是多余的。为什么不直接使用`%02d`格式说明符？此外，`sprintf()`通常被认为是不安全的，请`snprintf()`改用：

```
char st_str[3];
snprintf(st_str, sizeof(st_str), "%02d", secs); 
```

请注意，如果`st_str`要从函数返回，则不能使用自动数组，而应改为编写

```
const size_t size = 3;
char *st_str = malloc(size);
snprintf(st_str, size, "%02d", secs); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T17:51:03.450

您可以将零放在格式字符串中并使用`sprintf(...)`：

```
sprintf(st_str,"0%d",secs); 
```

现在请注意，由于您可以在同一语句中概括从 0 到 9 的所有秒数，因此 switch 语句可能更合适：

```
str_str = malloc(<max-digits-here>);

switch(secs) 
{
   case 0:
   case 1:
   case 2:
   case 3:
   case 4:
   case 5:
   case 6:
   case 7:
   case 8:
   case 9:
      sprintf(st_str,"0%d",secs);
      break;
   default:
      sprintf(st_str,"%d",secs);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:52:32.187

在下面使用这个：

```
if(secs >=0 && secs < 10)
 sprintf(st_str,"0%d",secs);
else
 sprintf(st_str,"%d",secs); 
```

或者，如果您只想显示使用`printf("%02d",secs)`并直接将其打印到输出屏幕。

编辑：但请记住，`sprintf`您必须分配内存`st_str`以保持`secs`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T17:56:36.963

为什么将它转换为字符串。`printf`可以用填充显示数字

例如。

```
int secs;

for(secs = 0; secs < 60; ++secs)
    printf("%02d\n", secs); 
```

或者如果你想要它在一个字符串中

```
char s[20];
snprintf(s, 20,"%02d", secs); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T17:58:29.990

要打印最少的`n`数字，您可以使用格式化程序中的精度点，如下所示：

`printf("%.2d", secs);`

您不需要创建字符变量等！

# eclipse - 如何关闭 Eclipse 自动扩展我的项目文件夹？

> ID：13938617
> 
> 赞同：10
> 
> 时间：2012-12-18T17:48:59.567
> 
> 标签：eclipse, directory, project, expand

我正在 Android 中开发（不确定这是否重要）的一个持续性项目。我有一个非常大的项目，每个文件夹中的文件太多。每次我在源代码编辑器中单击打开文件的选项卡时，Eclipse 都会自动打开该文件所在的文件夹。我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-18T18:09:02.170

我不确定这是否是您的意思，但在侧边栏（包资源管理器）中，顶部有一个按钮，是 2 个指向彼此的黄色箭头。您应该单击此按钮以停止编辑器自动同步资源管理器。这是一个持续的按钮单击，因此您单击一次以启用该功能，然后再次单击以禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T13:39:22.143

对我来说，点击“专注于活动任务”。

# ruby-on-rails - Rails，嵌套属性，使没有子级的父级无效

> ID：13938628
> 
> 赞同：0
> 
> 时间：2012-12-18T17:49:22.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

假设我有 Post HABTM 标签，并且我正在通过嵌套属性使用批量分配。

我在 Post 模型中有这个：

```
accepts_nested_attributes_for :posts_tags, \
                              :reject_if => proc { |attrs| attrs.tag_id.blank? } 
```

我在 Post 控制器中有这个：

```
def new
  @post = Post.new
  3.times { @post.posts_tags.build }
end

def create
  @post = Post.new(params[:post])
  @post.save
end 
```

这在 Post 形式中：

```
<%= f.fields_for :tags do |tg| %>
  <%= tg.label :tag_id %>
  <%= tg.select :tag_id .... %>
<% end %> 
```

一切都完美无缺，代码最少。帖子与被选中的标签相关联。

现在：如果我希望用户为他们的帖子选择至少一个标签怎么办。如何使未选择标签的帖子无效？什么是最优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:59:24.627

添加`validates_presence_of :tags`Post 模型以强制用户选择标签。

# neo4j - Neo4j-rails 中看似裸露的节点

> ID：13938632
> 
> 赞同：0
> 
> 时间：2012-12-18T17:49:28.180
> 
> 标签：neo4j, jrubyonrails

我们正在使用带有 Neo4j 的 jRuby on Rails，并且我们遇到了一些非常奇怪的错误。目前，我们有用户能够创建帖子。很少，他们似乎在他们的“帖子”关系中得到了展开的节点，而不是 Post 对象。例如，在控制台中，我迭代了一个用户的帖子，结果如下：

```
> user.posts.each{ |post| puts post }
#<Post:0x49ca112d>
#<Post:0xc9ddbea>
#<Post:0x7e706c75>
Node[438144]
#<Post:0x769dba83> 
```

这会导致各种问题，因为每当我们尝试访问这些非发布帖子之一的属性或关系时，都会出现这样的错误：

```
undefined method `[any property or relationship]' for #<Java::OrgNeo4jKernelImplCore::NodeProxy:0x461784b6> 
```

这些裸节点似乎间歇性地添加到人们的“发布”关系中，我可以手动删除该节点，但这似乎充其量只是权宜之计，因为它们一直在被创建。

所以，我的问题是，我如何（1）首先防止这些非 Post 对象被创建，我如何（2）清除我的数据库中的这些对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:09:51.080

这种行为的一个原因可能是您`protected_keys`在更新节点时使用（仅使用 neo4j-wrapper gem 时）。

我怀疑 _classname 属性由于某种原因已经消失（这可能使用`protected_keys`conf 发生，请参阅下面的 github 问题）。例如，您已将帖子添加到不是帖子的用户帖子关系（它没有值为“帖子”的 _classname 属性）。

例如，如果你做这样的事情，你会遇到这个问题：

```
user.posts << Neo4j::Node.new 
```

我建议进行一些调试，以确保您的所有帖子对象都具有 _classname 属性。

如果它是 neo4j.rb 中的错误，您可以执行以下丑陋的解决方法来加载包装的对象。

```
user.posts.map{|p| p.wrapper}.each{ |post| puts post } 
```

我添加了一个 github 问题以防万一，[https://github.com/andreasronge/neo4j/issues/230](https://github.com/andreasronge/neo4j/issues/230) 请添加更多信息如何重现它，例如neo4j 和jruby 的版本。测试用例也非常方便。

# internet-explorer-9 - Fancybox 2 在 IE 中强制响应媒体查询

> ID：13938641
> 
> 赞同：5
> 
> 时间：2012-12-18T17:50:15.610
> 
> 标签：internet-explorer-9, fancybox, fancybox-2

我正在构建一个非常小的 fancybox 2 模态框，它会弹出一个 iframe，其中显示一些文本和诸如此类的东西。但是，检查此版本的 QA 团队注意到，它迫使网站认为窗口的最大宽度为 480 像素，这使网站无法使用我构建的响应式媒体查询。

这在 IE10、Chrome 或 Firefox 中不会发生。它也不会发生在 IE9 仿真中。我有 IE10，无法在任何 IE 版本/移动中复制它，但我可以看到它发生在每台装有 IE9 的计算机上。由于我无法复制，我很难找到问题所在。Fancybox 是否有任何已知的错误或问题可能导致此问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T17:06:11.387

同样的问题，您必须将您的 css 网址更改为您的 iframe，例如使用 GET。

前任 ：

家长：

```
<link rel="stylesheet" href="http://url.css" /> or 
<link rel="stylesheet" href="http://url.css?v=X" /> 
```

框架：

```
<link rel="stylesheet" href="http://url.css?v=Y" /> or 
<link rel="stylesheet" href="http://url.css?v=X&f=1" /> 
```

错误在 IE9 的缓存管理器中。如果 css 的 url 完全相同，则 iframe 上 css 的媒体查询将在您的父级上“重新加载”。

# php - 删除 json_encode() 中的双引号

> ID：13938645
> 
> 赞同：8
> 
> 时间：2012-12-18T17:50:28.610
> 
> 标签：php, preg-replace, json, double-quotes

我想在我的 json_encode 中删除双引号，这是我的代码：

```
<?php

require_once 'config.inc.php';
//## Clase Base de Datos
require_once 'Database.class.php';
//## Obtengo los parametros pasados por el metodo GET
$params = $_REQUEST;

$db = new Database(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE);
$db->connect();

$result = mysql_query("SELECT * from ranking WHERE posicion BETWEEN     ".$params['pos_ini']." AND ".$params['pos_fi']) or die('Could not query');

if(mysql_num_rows($result)){
    $array_json=array();
    $filas = mysql_num_rows($result);
    $columnas = mysql_num_fields($result);

    for($i=0;$i<$filas;$i++)
    {
        $fila_dato = mysql_fetch_assoc($result);
        for($k=0;$k<$columnas;$k++)
        {
                    $campo = mysql_field_name($result,$k);
                    $campo = str_replace('\"', '', $campo);
                    $array_json[$i][$campo] = $fila_dato[$campo];
        }
    }
    $array_final = json_encode($array_json);
    $array_final = preg_replace('/"([a-zA-Z]+[a-zA-Z0-9]*)":/','$1:',$array_final);
    echo $array_final;
} else {
    echo '[]';
}
?> 
```

我的结果是：

```
[{"id_posiciones":"1",posicion:"1",nick:"biwer",puntos:"1000",uid:"1",pais:"ES",idioma:"ES","device_version":"4"}] 
```

我也想删除“id_posiciones”和“device_version”的双引号。

我该怎么做的结果是：

```
[{id_posiciones:"1",posicion:"1",nick:"biwer",puntos:"1000",uid:"1",pais:"ES",idioma:"ES",device_version:"4"}] 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-05-12T09:39:08.920

您可以使用以下代码从数值中删除引号。

[http://php.net/manual/en/json.constants.php](http://php.net/manual/en/json.constants.php)

它将工作> = PHP 5.3。

```
$encoded = json_encode($data, JSON_NUMERIC_CHECK); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T18:00:26.590

如果您在最后的正则表达式中添加下划线，它将执行此操作。

```
$array_final = preg_replace('/"([a-zA-Z]+[a-zA-Z0-9_]*)":/','$1:',$array_final); 
```

我认为这就是 preg_replace 的用途。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T17:55:51.573

替换这一行：

```
 $array_final = preg_replace('/"([a-zA-Z]+[a-zA-Z0-9]*)":/','$1:',$array_final); 
```

经过：

```
$array_final = preg_replace('/"([a-zA-Z_]+[a-zA-Z0-9_]*)":/','$1:',$array_final); 
```

请注意，正则表达式类 [a-zA-Z] 与“_”不匹配

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-16T05:57:03.847

```
// use can use addslashes() function for storing in mysql database 
// or remove  slashes  u can use stripslashes() function.

$json_array = array(
'title' => 'Example string\'s with "special" characters'
);

echo $json_decode =addslashes(json_encode($json_array));

output-{\"title\":\"Example string\'s with \\\"special\\\" characters\"} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T17:55:39.790

您可以[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)用来解析字符串并从中创建一个 Javascript 对象，或者更好的是使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)获取它的方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-25T18:17:29.123

对于双引号，您可以使用 `&quot;`

对于单引号`&apos;`

```
$string=str_replace('"',"&quot;",$string); 
```

# cassandra - Cassandra 复合列部分查询

> ID：13938646
> 
> 赞同：1
> 
> 时间：2012-12-18T17:50:29.603
> 
> 标签：cassandra, phpcassa

我找不到按秒或列名的任何其他部分获取列的方法，例如，如果我有

user_id：时间戳

如何按时间戳选择该列并完全忽略 user_id？

这是我现在使用的代码：

```
$slice = new ColumnSlice( array('user_id'), "", 1);

$row = $cf->get("key", $slice); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:57:06.023

你不能。您必须指定切片的开始值和结束值，这意味着至少指定第一个复合值。

相反，您可以这样做，但您必须选择所有列并在客户端测试每个列值是否满足过滤条件。

# iphone - 加速框架 iOS - FFT 输入

> ID：13938647
> 
> 赞同：0
> 
> 时间：2012-12-18T17:50:30.257
> 
> 标签：iphone, ios, fft, accelerate-framework

嗨，我必须为 wav 文件绘制频谱图。我正在使用`AudioFileGetProperty`，我可以`AudioData`使用 wav 文件检索

```
audioData = (SInt16*)malloc( 2 *packetCount); 
```

从[另一个问题](https://stackoverflow.com/questions/6358764/iphone-fft-with-accelerate-framework-vdsp)。

将在加速框架中使用 FFT。请让我知道如何获得频率。我不确定 FFT 的输入应该如何。我目前有`SInt16`音频数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:51:24.747

[NSBlog 上的这篇文章](http://www.mikeash.com/pyblog/friday-qa-2012-10-26-fourier-transforms-and-ffts.html)描述了如何使用 Apple 的 vDSP 执行 FFT。FFT 的结果不会给你“频率”。它为您提供低于音频采样率一半的所有频率的幅度和相位。如果您的输入信号是一个简单的正弦波，只需寻找幅度值中的最大值。

# android - 用于姜饼的 ICS 的端口 apk

> ID：13938653
> 
> 赞同：0
> 
> 时间：2012-12-18T17:50:45.923
> 
> 标签：android, android-4.0-ice-cream-sandwich

我有一个 ICS 应用程序，我想让它在姜饼上运行，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:53:31.050

设置`android:minSdkVersion="9"`在您的`AndroidManifest.xml`，如[文档中所述](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)。

并检查代码以确保您没有调用任何在 Gingerbread 中不可用的 API；Lint 可以帮助解决这个问题。如果是，请采取适当的措施，例如禁用相关功能或提供替代实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:00:08.890

首先进入项目构建属性并将 Android SDK 版本设置为 2.3 -> 2.37（sdk 9 或 10）。Eclipse 将向您展示为了编译项目而必须做出的不同之处。

您将不得不对 XML 布局文件进行一些更改。可能有一些小部件在 Gingerbread 中不起作用。在您实际在设备上运行该应用程序之前，我不确定这些是否会很明显。但希望不应该有太多的差异。

例如，如果应用程序使用 Fragments、使用屏幕尺寸的工具（re：7" 设备）、OpenGL 等，一些大的代码更改将是这样的。

在您开始之前，我还会浏览这些页面：

*   [http://developer.android.com/about/versions/android-4.0.html](http://developer.android.com/about/versions/android-4.0.html)
*   [http://developer.android.com/about/versions/android-3.2.html](http://developer.android.com/about/versions/android-3.2.html)
*   [http://developer.android.com/about/versions/android-3.1.html](http://developer.android.com/about/versions/android-3.1.html)
*   [http://developer.android.com/about/versions/android-3.0.html](http://developer.android.com/about/versions/android-3.0.html)

# java - 番石榴缓存与 ehcache 基准测试

> ID：13938660
> 
> 赞同：14
> 
> 时间：2012-12-18T17:51:18.040
> 
> 标签：java, benchmarking, guava, ehcache

我正在尝试决定在我的项目中使用这两个中的哪一个：番石榴缓存或 ehcache。寻找轻量级服务级别缓存解决方案。我搜索了一些基准，但找不到任何基准。

如果您手头有基准，请在此处发布。

干杯。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T21:13:14.897

基准测试是一项棘手的业务。做对[很难](http://www.ibm.com/developerworks/java/library/j-jtp02225/index.html)[，造假](http://dom.as/2012/06/26/memsql-rage/)也很容易。除非您的应用程序会从金属中挤出每个 CPU 周期，否则您不应该担心性能：Ehcache 和 guava 缓存对于普通项目来说已经足够了。

你**应该**注意的是 API 和特性。例如，Guava 缓存不能用作 2 级 Hibernate 缓存（即至少开箱即用）。OTOH Ehcache 在 API 和功能蔓延方面已经变得有点胖了，但这些都是主观的。

回到话题，Guava 缓存最初是从一个单独的项目中提取的，[concurrentlinkedhashmap](http://code.google.com/p/concurrentlinkedhashmap)，我相信~~它不再受支持，因为~~它只是一个单人项目并且失去了一点动力（请参阅本文下方的评论）。尽管如此，旧项目页面仍然有一些基准证明`ConcurrentHashMap`（现在是 guava Cache）性能接近`ConcurrentLinkedHashMap`. 我希望它没有恶化。

# c# - 根据 ip 在 C# 中阻止/解除阻止网站

> ID：13938661
> 
> 赞同：2
> 
> 时间：2012-12-18T17:51:19.733
> 
> 标签：c#, parental-control

我需要有关在我的 C# 家长控制软件项目中阻止和解除阻止网站的帮助。我通过使用主机文件进行了尝试，但主机文件只阻止域名而不是 IP。即使网站地址写在主机文件上，我也可以通过输入 ip 访问该网站。如何在 C# 中同时屏蔽域名和 ip？有没有办法通过使用主机文件来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-11T18:45:13.837

我有同样的问题:(。我找到了一种使用代理阻止网站的方法。我正在使用 Titanium Web 代理。效果很好。但是 HTTPS 网站存在问题。我正在尝试解决这个问题。但我认为有是一种修复它的方法。

[https://github.com/justcoding121/Titanium-Web-Proxy/](https://github.com/justcoding121/Titanium-Web-Proxy/)

# jquery - jScrollPane 切断内容的底部

> ID：13938662
> 
> 赞同：2
> 
> 时间：2012-12-18T17:51:21.093
> 
> 标签：jquery, css, jscrollpane, jquery-jscrollpane

我在我正在开发的网站上使用 jScrollPane，在所有使用 jScrollPane 的 div 上，div 的底部是隐藏的。

您可以在[此处](http://woody.alchemycs.com/our-story/)或[此处](http://woody.alchemycs.com/writing/book-4/)查看问题。

在我看来，问题一定是我的`.page-scroll`div 太高了，但是让它变短没有任何好处。我弄乱了页面上所有 div 的高度（那些由我创建的和由 jScrollPane 创建的），似乎没有任何帮助。

有没有人有什么建议？

**编辑** MiniRagnarok 找到了答案，但我会在这里总结一下，这样如果其他人遇到这个问题，你就不必通读我们的整个对话。我认为这个线程：[jScrollPane 2.0 height question in chrome](https://stackoverflow.com/questions/3820632/jscrollpane-2-0-height-problem-in-chrome)实际上回答了它。我认为问题在于该站点使用@font-face，它在 jScrollPane 决定页面的高度之后呈现字体。因此，通过添加`autoReinitialise: true`元素，我能够解决问题。然后 MiniRagnarok 在我的 CSS 中发现了一些使问题更加复杂的愚蠢之处。现在一切都好起来了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:53:25.520

解决方案有两个。从 Vertical Bar 中移除`top:15px;`并重新初始化 jScrollPane。

# scala - Squeryl 0.9.6 中的 KeyedEntity

> ID：13938664
> 
> 赞同：0
> 
> 时间：2012-12-18T17:51:26.117
> 
> 标签：scala, implicit-conversion, squeryl

[Squeryl 0.9.6 版引入了一种新方法，通过使用`KeyedEntityDef`typeclass](https://groups.google.com/forum/?fromgroups=#!msg/squeryl/kFvX_uvIxdI/TD9LdYdvWWcJ)来声明具有关联主键的类。仍然是旧的声明方式

```
import org.squeryl.KeyedEntity

case class Foo(id: Long, myField: String) extends KeyedEntity[Long] 
```

支持。

我正在尝试将使用 Squeryl 0.9.5 的现有应用程序迁移到新版本，以使用自定义原始类型，但我正面临编译问题。这是一个不再编译的特征示例

```
trait Retrievable[A <: KeyedEntity[Long]] {
  def table: Table[A]

  def get(id: Long): Option[A] = inTransaction {
    table.lookup(id)
  }
} 
```

它本来是这样使用的：

```
case class Foo(id: Long, myField: String) extends KeyedEntity[Long]

object Foo extends Retrievable[Foo] {
  def table = DB.something
}

...

val foo = Foo.get(235) 
```

现在，当我尝试编译时，我收到了消息

> 该方法需要在范围内隐含 org.squeryl.KeyedEntityDef[A, Long]，或者它扩展了特征 KeyedEntity[{K}]

虽然`A`确实延长了`KeyedEntity[Long]`。甚至在范围内添加一个隐式，比如

```
trait Retrievable[A <: KeyedEntity[Long]] {
  def table: Table[A]
  implicit val ev: <:<[A, KeyedEntity[Long]]

  def get(id: Long): Option[A] = inTransaction {
    table.lookup(id)
  }
} 
```

对隐式解析没有帮助，并且特征无法编译。

> 有谁知道为什么编译器没有提供[查找方法](https://github.com/max-l/Squeryl/blob/AST-lifting-overhaul/src/main/scala/org/squeryl/Table.scala)中的隐式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:49:35.187

查找方法的签名已更改，因此它接受 KeyedEntityDef 作为隐式参数。为了向后兼容，有一个可用于 KeyedEntity 类型的 KeyedEntityDef。它可以在 QueryDsl 中找到（参见 kedForKeyedEntities 隐式方法），并且旨在作为您正在使用的“TypeMode”（即 PrimitiveTypeMode）的一部分导入范围。快速的答案是您有两个选择：

*   确保 PrimitiveTypeMode._ 在定义 Retrievable 特征的范围内
*   为了使其更灵活，让您的 get 方法接受与查找相同的隐式参数`def get(id: Long)(implicit ked: KeyedEntityDef[T,K], dsl: QueryDsl): Option[A]`，然后将它们传递给`table.lookup(id)(ked, dsl)`. 这将推迟他们的解决方案，直到您的 get 方法被调用并允许它与您定义的任何自定义 TypeMode 一起使用。

# c# - 在 XNA 中对网格进行排序

> ID：13938674
> 
> 赞同：4
> 
> 时间：2012-12-18T17:52:13.330
> 
> 标签：c#, xna, xna-4.0, mesh, alphablending

我对 XNA 中的树有疑问。当我有树时，我需要使用 alpha 混合使非叶子部分透明，但是模型的某些部分没有正确显示，因此 alpha 混合失败。我想知道是否有可能读取网格位置来对它们进行排序，或者是否有任何其他方法可以获得透明的非叶子部分。在模型中排序可能不起作用，因为我想从各个角度看这棵树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:53:42.530

3D 环境中的 Alpha 混合可能是一个棘手的问题。Shawn Hargreaves几年前写了[一篇文章，涉及大多数主要问题（标题为](http://blogs.msdn.com/b/shawnhar/archive/2009/02/18/depth-sorting-alpha-blended-objects.aspx)**Painter's Algorithm**的部分专门处理您的问题）。长话短说：没有技术可以*完美地*做你想做的事，所以问题就变成了：你愿意做出什么取舍？

进行 alpha 测试而不是 alpha 混合可能是最简单的解决方案。这是一个二元测试，其中一个不透明的像素要么出现要么不出现，因此绘制这些像素的顺序在很大程度上是无关紧要的。这会给你带来坚硬的边缘，但如果你的纹理有足够的分辨率，它仍然看起来不错；我知道魔兽世界使用了这种技术，而且我很确定我记得在暗黑破坏神 III 中看到过它。

您可以使用内置的`AlphaTestEffect`来执行此操作，或者自己在像素着色器中实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:33:20.580

您正在寻找的称为顺序独立透明度，这可以使用称为“[深度剥离](http://developer.download.nvidia.com/SDK/10/opengl/src/dual_depth_peeling/doc/DualDepthPeeling.pdf)”的方法来实现。如果您不使用 XNA 的 Reach 配置文件并且可以编写自定义着色器 - 您可以实施此技术来实现正确的混合，而无需担心网格级别信息或不必为当前帧/视图重新排序它们。

[这](http://research.microsoft.com/pubs/70307/tr-2006-81.pdf)是另外一个 DX9（但很容易适应 XNA）实现。

# php - Symfony 1.4 中不同路径中的类名重复导致问题

> ID：13938678
> 
> 赞同：0
> 
> 时间：2012-12-18T17:52:30.393
> 
> 标签：php, classpath, symfony-1.4

我继承了一个 Symfony 1.4 应用程序来管理。我遇到了一个问题，我创建了新的类并且我不知道，我复制了一些现有的类名（在其他路径中）。

除了重命名我的类之外，还有没有为我想要使用的类指定一个类路径？在 Java 中，我们可以轻松地附加整个类路径，但我不太确定是否/如何在 PHP5 和/或 Symfony 1.4 中完成。

这是否可能，或者是我确保没有类名冲突的唯一选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:38:20.220

命名空间是您的解决方案。查看[http://www.php.net/namespaces](http://www.php.net/namespaces)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T02:32:32.267

还有另一个[SO 线程响应](https://stackoverflow.com/a/10519132/827480)，@Jan Míšek 提出了一个解决方案。不幸的是，它没有被标记为接受的响应，但它给出了如何将支持命名空间的 Symfony2 自动加载器迁移到 Symfony 1.4 的相当好的说明。

# sql-server - sql server - 如何从邮政编码数据库中选择不同的位置？

> ID：13938682
> 
> 赞同：0
> 
> 时间：2012-12-18T17:52:38.260
> 
> 标签：sql-server, sql-server-2008, distinct

我正在编写一个查询，该查询需要在与城市名称匹配的邮政编码数据库中查找不同的城市/州/国家/地区位置。这些列是：

```
Country, PostalCode, City, State, StateAbbr, County, CountryCode, Latitude, Longitude 
```

结果集需要包含所有这些列。

以查询字符串：“Brooklyn”为例，我至少可以为每一行分配一个排名，如下所示：

```
select b.*,
  (select count(*) from PostalCodes b2 
   where b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country) as Rank
from PostalCodes b
where b.City LIKE 'Brooklyn%' 
```

结果集有 66 行，其中 14 行是数据库中具有单个条目的位置，因此它们的排名为 1。其余 52 行是纽约布鲁克林的，它在数据库中有 52 个条目，并分配了排名52.

如何根据排名获取不同的行，并获取数据库中的所有列？我不在乎返回哪个邮政编码......我只想要每个城市/州/国家的一个条目。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:11:29.093

假设具有相同城市/州/国家/地区组合的每条记录在所有其他字段中具有相同的值，您可以使用此查询（尽管它有点小技巧）：

```
SELECT b.*,
       PostalCode = (SELECT TOP 1 PostalCode FROM PostalCodes b2 WHERE b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country),
       StateAbbr = (SELECT TOP 1 StateAbbr FROM PostalCodes b2 WHERE b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country),
       County = (SELECT TOP 1 County FROM PostalCodes b2 WHERE b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country), 
       CountryCode = (SELECT TOP 1 CountryCode FROM PostalCodes b2 WHERE b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country), 
       Latitude = (SELECT TOP 1 Latitude FROM PostalCodes b2 WHERE b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country), 
       Longitude = (SELECT TOP 1 Longitude FROM PostalCodes b2 WHERE b.City = b2.City AND b.[State] = b2.[State] AND b.Country = b2.Country)

FROM(
SELECT DISTINCT CITY, STATE, COUNTRY
FROM PostalCodes
) b 
```

您的请求的问题通常是当您按一组字段（在您的情况下为城市/州/国家/地区）分组时，您不包含任何其他列。这是一种解决方法，尽管它很慢并且可以优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:46:14.150

这是另一个镜头。请注意，TOP 1 有效，因为您声明您不关心首先返回哪个特定行，并且在 Rank > 1 的情况下这将返回任意行。

```
SELECT  X.Rank, Y.*
FROM (  SELECT  B.City, B.State, B.Country, COUNT(*) AS [Rank]
        FROM    PostalCodes B
        GROUP BY B.City, B.State, B.Country
        ) X 
JOIN (SELECT ROW_NUMBER() OVER(PARTITION BY City, State, Country ORDER BY City, State, Country) AS RN,
        *
        FROM Postalcodes)
    Y
ON X.City = Y.City
AND X.State = Y.State
AND X.Country = Y.Country
WHERE Y.RN = 1 
```

这是另一个尝试。

请注意，查询性能将在很大程度上取决于可用的索引。我相信我以前使用过这个表，并且正如供应商提供的那样，索引对于这种查询并不是最佳的。

```
SELECT  RNK.Rank, PC.*
FROM    Postalcodes PC
JOIN (
    SELECT  MAX(PostalCode) as PostalCode,
            City, 
            StateAbbr, 
            CountryCode, 
            Count(*) AS Rank

    FROM    Postalcodes P
    group by city, stateabbr, countrycode
    ) RNK
ON  RNK.PostalCode = PC.PostalCode
AND RNK.City        = PC.City
AND RNK.StateAbbr   = PC.StateAbbr
AND RNK.CountryCode = PC.CountryCode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:09:57.820

```
select COUNT(City),City,State,Country
from
 PostalCodes
 group by City,State,Country
 order by COUNT(City) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:12:00.920

从您的查询中，您正在查找按城市、州和国家/地区的邮政编码计数。

我认为这会给你你正在寻找的东西：

```
SELECT  B.City, B.State, B.Country, COUNT(*) AS Rank
FROM    PostalCodes B
GROUP BY B.City, B.State, B.Country 
```

# magento - 从 magento 购物车中删除“小计”

> ID：13938685
> 
> 赞同：0
> 
> 时间：2012-12-18T17:52:49.707
> 
> 标签：magento

我正在运行 Magento 1.7.0.0 并且结帐前购物车中有 2 个“小计”实例。如何删除其中一个或我应该编辑哪个文件？？？？？？
谢谢！！

![我的车](../Images/394333c7d3d94ed585d52bb669fa6d2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:32:50.963

这很可能是由于扩展。开始禁用 /app/etc/modules/ 中的扩展（例如不以 Mage 开头的），直到找到罪魁祸首。

# javascript - 我可以将本地文件加载到 html 画布元素中吗？

> ID：13938686
> 
> 赞同：29
> 
> 时间：2012-12-18T17:52:54.547
> 
> 标签：javascript, html

我的目标是让 iPad 上的用户将图像加载到画布中，然后在**离线时获取 base 64 编码的所述图像**

## JSFiddle

[JSFiddle](http://jsfiddle.net/Vm4za/1/)

## 代码

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="../js/libs/jquery-1.7.1.min.js"></script>
    <script>
      $(document).ready(function(){ 
        //Get the canvas
        var canvas = document.getElementById('testCanvas');
        var context = canvas.getContext('2d');   

        $("#testButton").click(function(){
          var base_image = new Image();

          base_image.src = $("#testImg").val();
          //base_image.src = '1.jpg';

          //When the image loads
          $(base_image).load(function(){
            //Resize canvas for image
            $("#testCanvas").attr({
              width: base_image.width,
              height: base_image.height
            });

            //Draw image on canvas
            context.drawImage(base_image, 0, 0);

            //Get base64 encoded image
            var imageString = canvas.toDataURL("image/jpeg");
            $("#imageString").val(imageString);

            //alert($("#imageString").val().length);
            $("#imageOutput").attr("src", imageString);
          });//image load
        });//Test Button Click
      });//doc ready
    </script>
  </head>

  <body>
    <form>
      <input type="file" name="testImg" id="testImg" />
    </form>
    <button id="testButton">Test</button>
    <canvas id="testCanvas" style="border: 1px solid black;">Your Browser does not support canvas</canvas>
    <br />
    <fieldset>
      <legend>Image Data</legend>
      <textarea id="imageString"></textarea>

      <img id="imageOutput" src="" />
    </fieldset>
  </body>
</html> 
```

我知道图像实际上并没有从 加载`<input type='file' />`，但我认为值得一试。在 Chrome 控制台中，我得到：

> 不允许加载本地资源

有什么方法可以让我将 iPad 中的图像放入画布元素中？

非常感谢任何帮助、提示或建议！谢谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-18T18:25:30.567

我有一个[功能正常的小提琴](http://jsfiddle.net/z3JtC/4)（基于[此答案](https://stackoverflow.com/questions/2865017/get-image-dimensions-using-javascript-during-file-upload/2865063#2865063)的先前工作），它演示了如何使用文件输入上传图像，将其放置在画布中，然后读回 base64 数据 URL。

简而言之，您应该：

1.  使用[File API](https://developer.mozilla.org/en-US/docs/Web/API/File)读取图像（您可以在`onchange`输入元素的侦听器中执行此操作）：

```
var file = input.files[0];
var fr = new FileReader();
fr.onload = createImage;   // onload fires after reading is complete
fr.readAsDataURL(file);    // begin reading 
```

2.  在 FileReader 的`onload`回调（此处，`createImage`）中，读取`result`FileReader 的（此处，`fr.result`）。那是您的图像数据 URL！

**可选步骤**（仅当您计划在画布上操作图像时才需要）：

2.  在 FileReader 的`onload`回调（此处为`createImage`）中，创建一个新`Image`对象并将其设置`src`为`result`FileReader：

```
img = new Image();
img.onload = imageLoaded;
img.src = fr.result; 
```

3.  最后，在 Image 的`onload`回调中，将其绘制到画布上，然后用于`canvas.toDataUrl`数据：

```
canvas.width = img.width;      // set canvas size big enough for the image
canvas.height = img.height;
var ctx = canvas.getContext("2d");
ctx.drawImage(img,0,0);         // draw the image

// do some manipulations...

canvas.toDataURL("image/png");  // get the data URL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-24T11:03:22.920

输入文件，文件上传后使用javascript减小文件大小并再次传递输入文件值。

```
const input = document.getElementById("img-input");
input.onchange = function (ev) {
  const file    = ev.target.files[0]; // get the file
  const blobURL = URL.createObjectURL(file);
  const img     = new Image();
  img.src       = blobURL;

  img.onerror = function () {
    URL.revokeObjectURL(this.src);
    // Handle the failure properly
    console.log("Cannot load image");
  };

  img.onload = function () {
    URL.revokeObjectURL(this.src);
    const mime_type = "image/jpeg";
    const quality = qualityRate(file.size);
    const canvas  = document.createElement("canvas");
    canvas.width  = img.width;
    canvas.height = img.height;
    const ctx     = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, img.width, img.height);

    document.getElementById("root").append(canvas);
    //let data = canvas.toDataURL(mime_type,quality);
    //downloadURI(data, 'stage.jpg');

    canvas.toBlob(blob => {
        let localfile = new File([blob], 'a.jpg',{type:"image/jpeg", lastModified:new Date().getTime()}, 'utf-8');
        let container = new DataTransfer();
        container.items.add(localfile);
        document.querySelector('#img-input').files = container.files;
    },mime_type,quality);
  };
};

function qualityRate(fileSize){
    let QUALITY = 0.5;

    if(1000000 > fileSize){
        QUALITY = 0.5;
    }
    else if(3000000 > fileSize){
        QUALITY = 0.7;
    }
    else if(5000000 > fileSize){
        QUALITY = 0.5;
    }
    else if(10000000 > fileSize){
        QUALITY = 0.9;
    }
    else{
        QUALITY = 0.1;
    }
    console.log(QUALITY);
    return QUALITY;
}

function downloadURI(uri, name) {
    var link = document.createElement('a');
    link.download = name;
    link.href = uri;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    delete link;
}
```

```
<form action="test.php" method="post" enctype="multipart/form-data">
    <input id="img-input" type="file" name="fileTest" accept="image/*" />
    <input type="submit" name="submit" value="aa">
</form>
<div id="root" style=" display: none; "></div>
```

# selenium - 如何解决，导入包时无法解析类？

> ID：13938690
> 
> 赞同：1
> 
> 时间：2012-12-18T17:53:22.643
> 
> 标签：selenium

我正在使用下面的代码。

```
import org.openqa.selenium.By
import org.openqa.selenium.WebDriver
import org.openqa.selenium.WebElement
import org.openqa.selenium.firefox.FirefoxDriver
import org.openqa.selenium.support.ui.ExpectedCondition
import org.openqa.selenium.support.ui.WebDriverWait

WebDriver driver = new FirefoxDriver()
driver.get("http://www.google.com") 
```

但它正在回归..

```
23:08:25,789 ERROR [SoapUI] An error occured [No match found], see error log for details
23:08:25,791 ERROR [SoapUI] An error occured [startup failed:
Script2.groovy: 1: unable to resolve class org.openqa.selenium.By
 @ line 1, column 1.
   import org.openqa.selenium.By
   ^
org.codehaus.groovy.syntax.SyntaxException: unable to resolve class org.openqa.selenium.By
 @ line 1, column 1.
        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.addError(ClassCodeVisitorSupport.java:148)
        at org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1240)
        at org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:148)
        at org.codehaus.groovy.control.CompilationUnit$8.call(CompilationUnit.java:601)
        at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:839)
        at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:544)
        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:493)
        at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:306)
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:287)
        at groovy.lang.GroovyShell.parseClass(GroovyShell.java:731)
        at groovy.lang.GroovyShell.parse(GroovyShell.java:743)
        at groovy.lang.GroovyShell.parse(GroovyShell.java:770)
        at groovy.lang.GroovyShell.parse(GroovyShell.java:761)
        at com.eviware.soapui.support.scripting.groovy.SoapUIGroovyScriptEngine.compile(SoapUIGroovyScriptEngine.java:148)
        at com.eviware.soapui.support.scripting.groovy.SoapUIGroovyScriptEngine.run(SoapUIGroovyScriptEngine.java:93)
        at com.eviware.soapui.support.scripting.groovy.SoapUIProGroovyScriptEngineFactory$SoapUIProGroovyScriptEngine.run(SourceFile:89)
        at com.eviware.soapui.impl.wsdl.teststeps.WsdlGroovyScriptTestStep.run(WsdlGroovyScriptTestStep.java:149)
        at com.eviware.soapui.impl.wsdl.panels.teststeps.GroovyScriptStepDesktopPanel$RunAction$1.run(GroovyScriptStepDesktopPanel.java:274)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T11:17:09.467

看来您缺少库。添加那些：

```
@Grapes([
        @Grab("org.codehaus.geb:geb-core:0.7.2"),
        @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.42.2"),
        @Grab("org.seleniumhq.selenium:selenium-support:2.42.2")
]) 
```

将以上这些行放在脚本的顶部。

然后放入将使用库的导入语句，这些库将首先下载到您的系统并存储在缓存中以供下次检索。

现在运行你的脚本。第一次运行脚本时，编译需要一些时间，因为它将库下载到系统并存储在缓存中。但从第二次开始，就不会花太多时间了。

# ruby-on-rails - 在 Rails 中为 SQL 查询设置超时值

> ID：13938691
> 
> 赞同：6
> 
> 时间：2012-12-18T17:53:26.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在 Rails 中使用`ActiveRecord::Base.connection.execute(sql)`.

但是，查询一直超时。是否可以更改此特定查询的超时值，而不必更改所有查询的超时值`database.yml`？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-06-21T07:13:58.320

我们必须小心*超时*变量，它们中的大多数都与*连接*超时有关，而不是与查询超时本身有关。

看起来在 MySQL 5.7.4 之前，终止长查询的唯一方法是通过[mysql 命令`kill`](https://serverfault.com/questions/401828/how-to-automatically-kill-slow-mysql-queries-after-n-seconds)，我不确定您是否也会丢失连接客户端/服务器，因此您的 Rails 进程可能会变得不可用。

在 MySQL 5.7.4 中出现了系统变量[max_statement_time](http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_statement_time)，它允许将服务器完全配置为原始问题所问*的 "The execution timeout for SELECT statements"*。

要通过 Rails 设置此系统变量，您可以使用选项[variables](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/MysqlAdapter.html) is your `database.yml`.

```
development:
  adapter: mysql2
  [...]
  variables:
    max_statement_time: 60000 # 1 minute 
```

要检查变量是否已在 ActiveRecord 连接中正确设置，您可以在 Rails 控制台中运行它：

```
ActiveRecord::Base.connection.execute('show variables like "%max_execution_time%"').to_a 
```

PS：系统变量在 MySQL 5.7.8中重命名为[max_execution_time](http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_execution_time)

PS2：我无法访问 MySQL >= 5.7.4，所以我无法测试这些结论，如果有人确认，我将不胜感激。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T18:22:20.190

```
# in database.yml
production: &prod
  adapter: whatever
  timeout: 5000 

long_connection_production:
  <<: prod
  timeout: 10000

# app/models/long_connection.rb
class LongConnection < ActiveRecord::Base
  establish_connection "long_connection_#{Rails.env}"

  def self.do_thing_that_takes_a_long_time
    connection.execute(sql)
  end
end 
```

# java - 等待进程在 Java 中结束

> ID：13938695
> 
> 赞同：2
> 
> 时间：2012-12-18T17:53:35.027
> 
> 标签：java, process

所以我有这个程序

```
 String[] cmd = {"gnome-terminal", "--full-screen", "-e", "./toMatrix"};
    Process p = Runtime.getRuntime().exec(cmd);
    copy(p.getInputStream(), System.out);
    p.waitFor();  
    System.out.println("Exit value = " + p.exitValue()); 
```

我希望它在另一个进程中运行 C 程序 toMatrix。但我需要它在新的终端窗口和全屏模式下运行，所以我需要传递这些参数。问题是主进程没有等待进程 p 结束。我究竟做错了什么？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:01:07.087

如果没有抛出异常，Java 正在等待进程结束。该过程可能在未完成手头任务的情况下结束。您可能需要读取进程的输出并显示它以找出问题所在。

看看这篇关于使用 Runtime.exec() 的文章： [http ://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

希望对您调试问题有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:04:38.950

waitFor() 方法将使调用线程等待直到进程 p 完成（这可能很危险，因为如果进程在任何无限循环中被阻塞，主线程将一直等待。

我建议编写一些信号量文件，并在您的进程从java文件完成时在其中设置一些值。主要方法可以等待检查信号量文件的状态。

# python - 在 Pandas 数据框上应用函数

> ID：13938704
> 
> 赞同：11
> 
> 时间：2012-12-18T17:54:06.150
> 
> 标签：python, pandas

我是 pandas 数据框的新手，我想对每一列应用一个函数，以便它计算列的每个元素 x、x/max。

我引用了这个问题，但无法访问每列的最大值。在此先感谢 [Pandas DataFrame：将函数应用于所有列](https://stackoverflow.com/questions/12741092/pandas-dataframe-apply-function-to-all-columns)

输入：

```
 A  B  C  D
   0  8  3  5  8
   1  9  4  0  4
   2  5  4  3  8
   3  4  8  5  1 
```

输出：

```
 A     B     C    D
   0  8/9  3/8  5/5  8/8
   1  9/9  4/8  0/5  4/8
   2  5/9  4/8  3/5  8/8
   3  4/9  8/8  5/5  1/8 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T18:03:13.457

像这样的东西应该工作：

```
>>> from pandas import DataFrame
>>> 
>>> df = DataFrame({"A": [8,9,5,4], "B": [3,4,4,8], "C": [5,0,3,5], "D": [8,4,8,1]})
>>> df.max()
A    9
B    8
C    5
D    8
>>> (df * 1.0)/df.max()
          A      B    C      D
0  0.888889  0.375  1.0  1.000
1  1.000000  0.500  0.0  0.500
2  0.555556  0.500  0.6  1.000
3  0.444444  1.000  1.0  0.125 
```

请注意，我乘以`df`使其`1.0`不再由`int`s 组成（`.astype(float)`也会起作用）以避免整数除法和结果 DataFrame 充满 0 和 1。

# android - 如何获取与服装列表视图中的切换按钮相关的相应文本视图？

> ID：13938705
> 
> 赞同：0
> 
> 时间：2012-12-18T17:54:15.753
> 
> 标签：android

我有一个使用定制的 ArrayAdapter 的列表视图。我的列表子项（single_row.xml）中有一个文本视图和一个切换按钮。我的切换按钮旨在将我的列表项标记/取消标记为收藏项。为了更新我的数据库（SQLite），我需要访问切换按钮旁边的相应文本视图。

我的问题是我不知道如何获取相应的文本视图。我不确定它们是如何相关的。

我希望这个问题很清楚。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:43:15.547

提高 listView 性能的推荐方法之一是在[getView()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法中使用[ViewHolder 。](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)这个 ViewHolder 对象通常使用[setTag()](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)方法附加到视图，以便能够在例如 onClick(View) 侦听器方法中检索行中的所有视图。

在您的情况下，您可以使用相同的方法，但在 ToggleButton 中，将具有行的重要信息的对象附加到它。然后，在[onCheckedChangedListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)中，您将收到已按下的 ToggleButton，并使用 getTag() 方法可以获得先前存储的对象，以及更新数据库所需的所有信息。像这样的东西：

```
 public View getView(int position, View convertView, ViewGroup parent) {

 //Other stuff here

 ToggleButton tb = (ToggleButton)row.findViewById(R.id.toggle_button);

 //Attach to the toggle button whatever object you need
 tb.setTag("Put an object here");
 tb.setOnCheckedChangedListener(new OnCheckedChangedListener(){
       @Override
       public void onCheckedChanged(CompoundButton button, boolean isChecked){
             Object relatedData = button.getTag();
             //Update the database with the relatedData
       }
 });

 //Other stuff

 return row;
} 
```

# c# - 如何在 WinRT 中获取像素的 RGB 值

> ID：13938712
> 
> 赞同：1
> 
> 时间：2012-12-18T17:55:15.230
> 
> 标签：c#, image, image-processing, windows-runtime

我正在尝试获取 WinRT 应用程序中每个像素的 RGB 值。我可以访问包含`PixelData`但我不知道如何使用它的字节数组，那么如何从字节数组中提取 RGB 信息？

```
var bd = await Windows.Graphics.Imaging.BitmapDecoder.CreateAsync(stream);
var pd = await bd.GetPixelDataAsync();
var tempBuffer = pd.DetachPixelData();
var PixelMatrix = new byte[bd.PixelWidth, bd.PixelHeight];
// how do I get the RGB value for PixelMatrix[0,0]? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:17:23.663

因为你有一个RGB图像，`tempBuffer[k + 0]`是红色通道，`tempBuffer[k + 1]`是绿色通道，`tempBuffer[k + 2]`是蓝色通道，即`tempBuffer`一维数组。如果您循环遍历所有像素，则伪代码将是：

```
for i = 0 to height - 1
    for j = 0 to width - 1
        k = (i * width + j) * 3
        r, g, b = tempBuffer[k + 0], tempBuffer[k + 1], tempBuffer[k + 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:45:14.423

由于 Marshal 类在 WinRT 上不可用 - 最高效的方法是使用[SafeMemoryMappedViewHandle](http://msdn.microsoft.com/en-us/library/windows/apps/microsoft.win32.safehandles.safememorymappedviewhandle.aspx) (SafeBuffer)。

此方法还可以处理具有多字节组件的像素格式，而无需使用 BinaryReader 并逐个组件读取它（RGBA16，每个组件 16 位）。[使用解码器的BitmapPixelFormat](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.imaging.bitmapdecoder.bitmappixelformat.aspx)属性找出像素格式，并使用适当声明的结构。

```
 // declare more of these appropriately laid
    // out structures for different pixel formats
    struct RGBA16
    {
        public uint R;
        public uint G;
        public uint B;
        public uint A;
    }

    struct RGBA8
    {
        public byte R;
        public byte G;
        public byte B;
        public byte A;
    }

    struct BRGA8
    {
        public byte B;
        public byte G;
        public byte R;
        public byte A;
    }
    ...

    var handle = GCHandle.Alloc(tempBuffer /* the raw byte[] */, GCHandleType.Pinned);
    try
    {
        var ptr = handle.AddrOfPinnedObject();
        var safeBuffer = new SafeMemoryMappedViewHandle(true /* I believe DetachPixelData returns a copy? false otherwise  */)
        safeBuffer.SetHandle(ptr);

        #if STREAM_PROCESSING
            // pixel by pixel
            int offset = 0;
            for (int i = 0; i < width * height; i++)
            {
                var pixel = safeBuffer.Read<RGBA16>(offset);
                offset += RGB24bpp.Size;
            }
        #else
            // Read it all in at once - this makes a copy
            var pixels = new RGBA16[width * height];
            safeBuffer.ReadArray<RGBA16>(0, pixels, 0, width * height);
        #endif
    }
    finally
    {
        safeBuffer.Dispose();
        handle.Free;
    } 
```

**注意**：此方法也可以替代任何需要 Marshal.PtrToStructure 或 WinRT 上的类似等价物的操作。

# iphone - 使单元格填充 UITableView 部分的宽度

> ID：13938714
> 
> 赞同：0
> 
> 时间：2012-12-18T17:55:19.723
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个由许多部分分组的 UITableView。每个部分有 1 到 n 个单元格。我试图让单元格占据整个宽度，但不知道该怎么做。我已经搜索过，但找不到任何样本或有关如何做到这一点的信息。

我在下面放了一个示例屏幕截图。

我有这个：

![在此处输入图像描述](../Images/1ef61dd53fa28a696352cc59c56ad808.png)

我正在努力实现这一目标：

![在此处输入图像描述](../Images/11d2f009ac91a0736d4cf35f1f41d4f5.png)

我将把单元格制作成一个带有渐变的方形框，并对标题进行样式设置，但我无法弄清楚如何让单元格填充屏幕的宽度。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:03:57.153

如果你想改变单元格的宽度，你可以简单地改变表格的宽度，或者改变单元格中 contentView 的宽度。

[这个](https://stackoverflow.com/questions/2539021/how-to-set-the-width-of-a-cell-in-a-uitableview-in-grouped-style)问题的答案详细说明了如何做后者。

# c++ - 直接根据高位将整数散列到 N 个大小大致相等的桶中（保持顺序）

> ID：13938715
> 
> 赞同：3
> 
> 时间：2012-12-18T17:55:22.880
> 
> 标签：c++, algorithm, data-structures

最好是快速的方法。这个`N = 2^b`案子很简单。为此，首先我要弄清楚我选择的类型中有多少位：

```
typedef unsigned int type;
size_t size = sizeof(type) * 8; 
```

然后我将执行适当数量的位右移以产生高位的哈希键`b`。

```
type input = 0x657;
unsigned char b = 4;
unsigned char hash = input >> (size - b); 
```

但如果我想要`N = 3`呢？或任何其他非 2 的幂？假设 my `N`will 总是适合一个`unsigned char`（所以它最多是 256），那么散列一些最快的方法是`input`什么？在保持桶的范围差异不超过 +/- 1 的同时，还保留 的高位的顺序`input`，就像上面的函数一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:08:52.547

对于 32 位值，进行 64 位乘法运算`N`并保留前 32 位。（对于其他大小也是如此，尽管如果您有 64 位值，则乘法会变得更加棘手。）

这是一个基本的证明大纲。

很明显，这种映射是保序的；唯一的问题是每个桶中有多少值。现在，考虑一些桶并找到映射到该桶`j`的最小桶。`i`For `i`to fall into bucket`j`意味着在哪里，但如果是最小的这样的值，。（否则，也会落入桶中。）`Ni − j×2^(32) = m``0 ≤ m < 2^(32)``i``0 ≤ m < N``i−1``j`

现在，定义，这相当于说。通过将这两个公式相加，我们发现; 化简，我们得到和。这意味着or是映射到的最小值（取决于是否为负），这意味着存在映射到的or 或值。既然对于 any 都是如此，我们可以肯定地说只有两种桶大小，其中之一是. 我在评论（现已删除）中做出的断言离那里不远，即另一个可能的存储桶大小是.`w = ⌊2^(32)∕N⌋``Nw − 2^(32) = −m' where 0 ≤ m' < N``Ni + Nw - j×2^(32) - 2^(32) = m−m'``N(i+w)-(j+1)×2^(32) = m−m'``−N < m−m' < N``i + w``i + w + 1``j + 1``m − m'``w``w + 1``j``j``⌊2^(32)∕N⌋``⌈2^(32)∕N⌉`

上面的证明没有什么神奇之处；我可以使用任何值。但这会使精简的证明更加难以阅读。`2^(32)``M`

# openlayers - OpenLayers 聚类——聚类数据不出现在 event.feature 对象中

> ID：13938720
> 
> 赞同：1
> 
> 时间：2012-12-18T17:55:30.863
> 
> 标签：openlayers

我的问题很简单——我正在使用 Dojo（但不是 Dojox openlayers 模块）来创建映射项目。我已经按照网络上的示例为元数据和集群创建了小的悬停气泡。我目前正在尝试绘制由传感器记录的一组 100 多个观测值（从不移动，因此每个观测值具有相同的纬度/经度）。选择对象时，触发的事件不包含 feature.cluster 对象。在任何缩放级别，仅显示顶部功能，我无权访问任何其他数据。我究竟做错了什么？

```
drawObservations: function(data){
                console.info("drawing observatoins", data);

                if (this.observationLayer !== null){
                    this.map.removeLayer(this.observationLayer);
                }
                console.info("building features");
                var features = [];
                for (var i in data.observations){

                    //console.info("working on observation: ", data.observations[i]);
                    var point = new OpenLayers.Geometry.Point(data.observations[i].longitude, data.observations[i].latitude);
                    //console.info("point: ", point);

                    features[i] = new OpenLayers.Feature.Vector(point, {
                        id : data.observations[i].id,
                        startTime: data.observations[i].startTime,
                        endTime: data.observations[i].endTime
                    }, {
                        fillColor : '#008040',
                        fillOpacity : 0.8,                    
                        strokeColor : "#ee9900",
                        strokeOpacity : 1,
                        strokeWidth : 1,
                        pointRadius : 8
                    });

                }
                console.info("features size: ", features.length);
                console.info("building vectors");

                this.observationLayer = new OpenLayers.Layer.Vector("Observations", {
                    projection: "EPSG:4326",
                    strategies: [                     
                    new OpenLayers.Strategy.Cluster()
                    ],
                    eventListeners:{
                        'featureselected':function(evt){
                            console.info("feature selected: ", evt);
                            console.info("this: ", this);
                            var feature = evt.feature;
                            var popup = new OpenLayers.Popup.FramedCloud("popup",
                                OpenLayers.LonLat.fromString(feature.geometry.toShortString()),
                                null,
                                "<div style='font-size:.8em'><h3>Observation - " + feature.attributes.id + "</h3><hr/><b>Start Time: </b>" + feature.attributes.startTime + "<br/><b>End Time: </b>" + feature.attributes.endTime + "</div>",
                                null,
                                true
                                );
                            feature.popup = popup;
                            this.map.addPopup(popup);
                        },
                        'featureunselected':function(evt){
                            console.info("feature unselected: ", evt);
                            var feature = evt.feature;
                            this.map.removePopup(feature.popup);
                            feature.popup.destroy();
                            feature.popup = null;
                        }
                     }
                });

                console.info("adding features to vector", this.observationLayer);

                this.observationLayer.addFeatures(features);

                this.map.addLayer(this.observationLayer);

                var selector = new OpenLayers.Control.SelectFeature(this.observationLayer,{
                    hover:true,
                    autoActivate:true
                }); 
                this.observationLayer.events.on({
                    "featureselected": this.display
                });

                this.map.addControl(selector);
            },

            display: function(event){
                console.info("event: ", event);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:59:58.433

似乎诀窍是从图层中删除要素并在图层添加到地图后重新添加它们：

```
this.observationLayer.removeFeatures(this.observationLayer.features);
this.observationLayer.addFeatures(features); 
```

这使得集群神奇地工作。

# java - HtmlUnit 不适用于 javascript 处理

> ID：13938729
> 
> 赞同：1
> 
> 时间：2012-12-18T17:55:59.920
> 
> 标签：java, web-scraping, htmlunit

Stackoverflow中提到的几乎所有方法我都试过了，但都没有奏效……

我正在尝试使用 HtmlUnit 抓取以下页面： [http ://www.nseindia.com/corporates/offerdocument/past_issue_document.htm](http://www.nseindia.com/corporates/offerdocument/past_issue_document.htm)

只是返回了一个空白页面。它应该是由javascript问题引起的。我在 HtmlUnit 中尝试了以下技巧：waitForBackgroundJavaScript、刷新、重定向、睡眠、启用 javascript、单击（true、true、true）等。它们都不起作用……

任何建议：

我的代码：

```
String url = "http://www.nseindia.com/corporates/offerdocument/past_issue_document.htm";
WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_8);
webClient.setJavaScriptEnabled(true);
HtmlPage page = (HtmlPage) webClient.getPage(url);
this.getWebClient().waitForBackgroundJavaScriptStartingBefore(5000);
System.out.println(page.asXml()); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:09:40.793

我曾经有过类似的问题。我通过使用 firefox dev 插件解决了这个问题，该插件记录了 javascript 页面所做的所有请求。然后我直接从 HtmlUnit 模拟这些请求（只需从请求日志中 grep 请求，粘贴它们并注入通常很容易识别的 sessionid misc 参数。在处理使用大量 ajax 东西的网站时特别有用。

# plsql - 从远程客户端在 Oracle10g 服务器上执行 PL/SQL 脚本

> ID：13938733
> 
> 赞同：0
> 
> 时间：2012-12-18T17:56:12.097
> 
> 标签：plsql, oracle10g

我正在尝试从本地计算机调用驻留在服务器上的 SQL 脚本。我无法通过 SQL*Plus 或 ruby​​-oci8 接口让它工作。

尝试过 @/abs/path/to/scriptname.sql 并启动 /abs/path/to/scriptname.sql 。

有任何想法吗？甚至可能吗？我读过的内容似乎导致了存储过程。Oracle 和 PL/SQL 的新手，如果这是微不足道的，请见谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:21:12.477

如果 .sql 文件不在您的机器上，则无法执行此操作，因为 SQLPLUS（客户端工具）需要在您的机器上查找并读取该文件。

如果脚本更适合存储过程，则将其设为一个，然后只需调用 API 而不是使用即席 sql 脚本。

如果做不到这一点，你必须要么在你的机器上安装一个指向远程文件夹的文件共享，要么通过 telnet/ssh 进入远程服务器并运行它。

# c++ - C++：execv/execvp 不使用现有的 PID

> ID：13938736
> 
> 赞同：2
> 
> 时间：2012-12-18T17:56:27.923
> 
> 标签：c++, process, exec

我有一个作为 linux 服务运行的 C++ 程序。某些程序的命令行选项只是在其配置文件中设置值然后退出，然后需要重新启动服务以获取新配置。为了让服务继续不间断地运行，它的工作原理如下：

*   后台服务在系统启动时启动
    *   后台服务创建一个“配置看门狗”线程监控配置文件
*   用户从命令行运行“progname 选项”
    *   配置文件修改
    *   程序退出的命令行实例
    *   后台服务配置看门狗线程检测到配置更改，触发重启

当程序在读取新配置后重新启动时，我正在调用 execv 以便它将与原始实例保持在同一进程空间中，以便它可以继续作为服务进行管理。问题是 execv 没有按预期运行，而是终止现有进程并在新进程中重新启动。因为 PID 不再匹配，如果我在此之后尝试运行“service progname stop/restart”，它将无法正常工作，“stop”将使服务继续运行，“restart”将产生程序的重复实例.

我已经确认传递给 execv 的 argv[0] 是可执行文件的完整路径，因此它不应该通过 shell 在 PATH 中搜索可执行文件（这也应该被我使用 execv 的事实所阻止而不是 execvp) 我读过的关于在其他应用程序中引起类似问题的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:20:03.313

发现了问题，问题是程序在启动时使用了 daemon()，它在内部执行了 fork/exec，并且在重新启动程序时再次调用了 daemon()。在增强它以区分启动/重启并避免再次调用 daemon() 后，问题得到修复。

# c# - 理论：使用 SSL 实现 MSMQ 发送消息

> ID：13938738
> 
> 赞同：3
> 
> 时间：2012-12-18T17:56:37.790
> 
> 标签：c#, .net, ssl

我必须创建一个演示应用程序（桌面应用程序），它使用`SSL`. 我想过使用`MSMQ`是否可以这样做？我找不到任何关于它的文档或教程。

如果这种解决方案无法实施，任何人都可以将我重定向到描述如何`SSL tunneling`在一个应用程序中为消息创建的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:58:52.410

MSMQ 直接提供 HTTPS 支持

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms707036(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms707036(v=vs.85).aspx)

您可以为 MSMQ 配置 HTTPS 端点并从桌面应用程序调用该端点。

# sql - oracle sql 自连接过滤器中的连接子句与 where 子句

> ID：13938740
> 
> 赞同：3
> 
> 时间：2012-12-18T17:56:56.903
> 
> 标签：sql, oracle, join, self-join

假设我有一张桌子

```
 Table A
 ---------------
 id    date_id (yyyyMMdd format)
 ---------------
 1     20120101
 2     20120102
 3     20120103 
```

做有什么区别：

```
 select a1.* from A a1
 left outer join A a2
     on a1.id = a2.id 
     and a1.date_id < a2.date_id
 where a1.date >= 20120103
 and a2.id is null 
```

和

```
 select a1.* from A a1
 left outer join A a2
      on a1.id = a2.id
      and a1.date_id < a2.date_id
      and a1.date_id >=20120103
 where a2.id is null 
```

对于我得到的第一个查询

```
 id   date_id
 --------------
 3    20120103 
```

正如预期的那样，但是对于我得到的第二个（a2 列未在查询中选择，但为清楚起见在此处显示）

```
 a1.id   a1.date_id  a2.id   a2.date_id
 ---------------------------------------
 1       20120101    
 1       20120101    
 2       20120102
 2       20120102
 3       20120103 
```

第二个查询不应该也过滤`a1.date_id >= 20120103`吗？为什么它返回带有 date_id's 的行`20120101 and 20120102`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:32:42.950

在外连接的情况下，`ON`子句对外表没有影响。这意味着将返回外部表中的所有行，并且`ON`子句仅确定联接表的哪一行加入外部表。并且那些不满足`ON`子句中条件的外部表行将简单地扩展为正在连接的表的列的空值。`WHERE`子句过滤最终结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:07:53.620

在第一个查询中，它会首先获取on的结果集

```
a1.id = a2.id 
     and a1.date_id < a2.date_id and then it will apply the `where clause` in the result set and so you get '20120103'. 
```

在第二个查询中，您将获取所有满足

```
on a1.id = a2.id
      and a1.date_id < a2.date_id
      and a1.date_id >=20120103 
```

这就是为什么你得到那么多行。希望这对您有所帮助。

# msbuild - 将构建配置设置为暂存

> ID：13938742
> 
> 赞同：4
> 
> 时间：2012-12-18T17:56:58.940
> 
> 标签：msbuild, teamcity

简单的问题。如何将构建配置设置为除调试以外的其他配置？

在命令行参数框中设置`/P:Configuration=Staging`，导致此错误：

[TeamCity 说在 MSBuild 步骤中使用“构建参数”而不是“/property：”。这意味着什么？](https://stackoverflow.com/questions/6218486/teamcity-says-to-use-build-parameters-instead-of-property-in-an-msbuild-st)

那么它是如何完成的呢？我需要为所有配置构建 MSDeploy 包，我可以获得要构建的包，但一切都是调试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T19:29:52.307

你这样做的方式很好——尽管可能使用小写`/p:`。我们的团队也是这样做的。TeamCity 没有抛出错误，它只是试图提供一些有用的信息。

JetBrains在页面[底部](http://confluence.jetbrains.net/display/TCD6/Defining+and+Using+Build+Parameters+in+Build+Configuration)的`Using System Properties in Build Scripts`.

# c# - 在区域外的 MVC 应用程序中托管 WCF 服务

> ID：13938746
> 
> 赞同：4
> 
> 时间：2012-12-18T17:57:14.983
> 
> 标签：c#, wcf, web-services, model-view-controller, metadata

我有一个 MVC 项目，我在根目录中添加了一个名为 WCF 的文件夹。在这个文件夹中，我创建了一个名为`CustomFunctions`. 当我尝试启动服务时，我收到以下错误：

> *错误：无法从`http://localhost/Viper/WCF/CustomFunctions.svc`...获取元数据 元数据包含无法解析的引用：*

附加说明：

> *找不到类型“Viper.WCF.CustomFunctions”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。*

我昨天遇到了这个错误，并花了一些时间在互联网上寻找答案。这导致我对我的 Web.config 和 Global.asax.cs 进行了很多更改。昨天的某个时候，它开始工作，我停止了。然而，当我今天早上回来时，它并没有重新开始工作。在此期间没有添加任何新内容，也没有更改任何代码。

我在我的 Web.config 中添加了以下内容：

```
<system.serviceModel>
<services>
  <service behaviorConfiguration="WCFBehavior" name="Viper.WCF.CustomFunctions">
    <endpoint address="" binding="wsHttpBinding" contract="Viper.WCF.ICustomFunctions">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost/Viper/WCF/CustomFunctions/" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="WCFBehavior">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" httpGetUrl=""/>
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

这对我来说`Global.asax.cs`：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.svc/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new
            {
                controller = "Home",
                action = "Index",
                id = UrlParameter.Optional
            }, // Parameter defaults
            new { controller = "^(?!CustomFunctions).*" }
        );

        routes.Add(new ServiceRoute("CustomFunctions", new ServiceHostFactory(),
                   typeof(CustomFunctions)));
    } 
```

谁能帮我？我在这里完全没有想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:00:51.647

我已经弄清楚了问题所在。首先，我错过了注册我的路由的函数路径的一部分。修复该路径后，我能够让我的 wsdl 出现在我的托管环境中。但是，这弄乱了我所在区域的默认路由。因此，对于将来遇到此问题的任何人，这是我的解决方案：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.svc/{*pathInfo}");

        routes.MapRoute(
            "CustomFunctions", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new
            {
                controller = "CustomFunctions",
                action = "Index",
                id = UrlParameter.Optional
            }, // Parameter defaults
            new { controller = "^(?!CustomFunctions).*" }
        );

        routes.Add(new ServiceRoute("CustomFunctions", new ServiceHostFactory(),
                   typeof(CustomFunctions)));

        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");           

        // Had to do some special stuff here to get this to work using a default area and no controllers/view in the root
        routes.MapRoute(
            name: "Default",
            url: "{area}/{controller}/{action}/{id}",
            defaults: new { area = "", controller = "Home", action = "Index", id = UrlParameter.Optional },
            namespaces: new string[] { "Viper.Areas.Home" }
        ).DataTokens.Add("area", "Home");           
    } 
```

我主要指定了我的自定义路由，以便当我导航到指定的 url 时，它会显示我的 .svc 文件。我从 Global.asax.cs 中的 ApplicationStart 方法调用此方法。我还必须在我的 Home Area 中为我的 CustomFunctions 创建一个单独的控制器和视图，以便它可以区分我的默认路由和我的 CustomFunctions，并在我的路由图中指定它，如上所示。因此，当我转到 localhost\Viper 时，它会找到在我的默认地图中指定的路线，当我转到 localhost\Viper\CustomFunctions 时，它会找到我的 .svc 文件的路线。IgnoreRoute 基本上做到了，因此您在调用页面时不必将文件扩展名放在 url 的末尾。所以我只指定 CustomFunctions 而不是 CustomFunctions.svc。确保添加 System.ServiceModel。

感谢大家的帮助。希望这可以帮助其他一些可怜的迷失的灵魂。

# vba - 如何从函数发送查询字符串

> ID：13938749
> 
> 赞同：0
> 
> 时间：2012-12-18T17:57:30.863
> 
> 标签：vba, ms-access, ms-access-2007

我很难想出一个好的标题，但我希望我能更好地解释这种情况。我目前有一个条件为（“11:00 - 21:00”或“11:01 - 21:00”）的查询，执行时效果很好，但是我在多个查询中需要这个条件，因此我决定提出如下功能

```
Function timeIntervals()

    timeIntervals = "11:00 - 21:00" & " Or " & "11:01 - 21:00"

End Function 
```

并在每个查询中调用它，因此每次我需要修改这个字符串时，我都可以通过那个实例来完成，但是当在上面运行这个字符串时它不起作用，我假设它是由 Or 上的引号引起的，我尝试了三倍引用 """ 和 chr(34)，但是它不起作用，有人可以建议解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:11:48.487

正如 Remou 指出的那样，您将无法使其正常工作。如果你真的想通过 VBA 函数进行检查，你可以这样写：

```
Function timeIntervals(Value) As Boolean
    If Value = "11:00 - 21:00" Or Value = "11:01 - 21:00" Then
        timeIntervals = True
    End If
End Function 
```

传递您要检查的值，如果结果函数为真，则显示该行。类似的东西：`where timeIntervals(myvalue) = true`。

不过，最好的解决方案可能是为 timeIntervals 制作一个表格。然后在您的查询中简单地编写如下内容：

`Where MyValue IN(Select timeValue from timeIntervals)`

使用后一种方法，您可以更新将更新所有用户结果的表，并且不需要重新发布您的前端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:02:20.863

无论你用引号做什么，这都行不通，因为`Or`它将作为字符串返回，而不是你想要的布尔值或。您可以使用带有两个文本框的隐藏表单，然后您可以说：

```
WHERE timeIntervals = Forms!MyForm!Text1 Or Forms!MyForm!Text2 
```

只要表单保持打开状态，您的查询以及基于它们的任何表单或报告都将起作用，此外，无需修改代码即可轻松更改间隔。

# emacs - Emacs show-paren-mode + Evil

> ID：13938755
> 
> 赞同：3
> 
> 时间：2012-12-18T17:57:50.483
> 
> 标签：emacs, emacs24, evil-mode

我在 OSX 上使用 Cocoa Emacs24+Evil。我已启用 show-paren-mode。但是，在正常状态下，当光标位于结束括号上时，括号对不会突出显示。只有当光标在开始括号上或在结束括号*之后*的位置时，才会突出显示括号对。

我该如何解决这个问题，以便在正常状态下，当光标位于关闭括号上而不是在它之后的位置时，括号对会突出*显示*。

注意：这不会发生在基于 Emacs23 的 Aquamacs 中，而是发生在基于 Emacs 24 的 Aquamacs 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:28:50.490

我有变量设置

（evil-highlight-close-paren-at-point-states（引用（不是 emacs 插入替换正常）））

这是导致问题的原因

# sql-server - SQL Server 案例总和查询

> ID：13938757
> 
> 赞同：1
> 
> 时间：2012-12-18T17:58:03.980
> 
> 标签：sql-server, loops

**更新** *我已经设法得到 1 或 0，具体取决于计数，但它没有被“Servicio”列分隔，所以如果有任何行匹配，所有内容都有 1 或 0...*

我有以下不工作的查询......它永远不会停止执行，我想要的是在每个“Servicios”列中添加 0 或 1......

我有三个表，“Banksphere”、“PAS”和“CAM”，与“Entidades”和“Servicios”有关系

PAS 和 CAM 没有“servicio_id”，但我修复了使用 Servicios 的“Join”...没关系，PAS 的“Servicio”为 3，CAM 为 0。

我希望我已经解释得很好......我现在不能做得更好，我不在我的电脑上

例子：

```
Banksphere [ id | entidad_id | servicio_id | reconocido ]
           [ 1  |     3      |      9      |     0      ]
           [ 2  |     1      |      1      |     1      ]
           [ 3  |     4      |      6      |     0      ]

PAS        [ id | entidad_id | reconocido ]
           [ 1  |     3      |     0      ]
           [ 2  |     5      |     1      ]
           [ 3  |     4      |     0      ]

CAM        [ id | entidad_id | reconocido ]
           [ 1  |     0      |     1      ]
           [ 2  |     0      |     1      ]
           [ 3  |     0      |     1      ] 
```

我想要的结果就是这个....

```
[ Entidad | Servicio | Alertas ]
[    0    |     0    |    1    ]
[    1    |     1    |    1    ]
[    3    |     9    |    0    ]
[    3    |     3    |    0    ]
[    4    |     6    |    0    ]
[    4    |     3    |    0    ]
[    5    |     3    |    1    ] 
```

有人能帮我吗？非常感谢...

```
SELECT DISTINCT entidad, value, alertas
FROM   (SELECT Entidades.id AS entidad,
    Servicios.nombre AS servicio1,
    sp.nombre AS servicio2,
    sc.nombre AS servicio3,
    CASE WHEN (
    CASE WHEN (SELECT COUNT(Banksphere.reconocido) FROM Banksphere WHERE Banksphere.reconocido = '0' AND Banksphere.fecha = '2012-12-18') = 0 THEN 0 ELSE 1 END
    + CASE WHEN (SELECT COUNT(PAS.reconocido) FROM PAS WHERE PAS.reconocido = '0' AND PAS.fecha = '2012-12-18') = 0 THEN 0 ELSE 1 END
    + CASE WHEN (SELECT COUNT(CAM.reconocido) FROM CAM WHERE CAM.reconocido = '0' AND CAM.fecha = '2012-12-18') = 0 THEN 0 ELSE 1 END) = 0 THEN 0 ELSE 1 END AS alertas
FROM   Entidades
LEFT JOIN (Banksphere INNER JOIN Servicios
    ON ( Banksphere.servicio_id = Servicios.id ))
    ON Entidades.id = Banksphere.entidad_id
    AND Banksphere.fecha = '2012-12-18'
LEFT JOIN (CAM
    INNER JOIN Servicios sc
ON ( sc.nombre = 'CAM' ))
ON Entidades.id = CAM.entidad_id
    AND CAM.fecha = '2012-12-18'
LEFT JOIN (PAS
    INNER JOIN Servicios sp
ON ( sp.nombre = 'PAS' ))
ON Entidades.id = PAS.entidad_id
GROUP  BY Entidades.id,
    Entidades.nombre,
    Servicios.nombre,
    sp.nombre,
    sc.nombre,
    Banksphere.reconocido,
    PAS.reconocido,
    CAM.reconocido
)
src 
UNPIVOT ( value FOR col IN (servicio1, servicio2, servicio3) ) unpiv
GROUP BY alertas, entidad, value
ORDER  BY entidad ASC, value ASC 
```

# android - 除非单击按钮，否则不会显示结果

> ID：13938758
> 
> 赞同：0
> 
> 时间：2012-12-18T17:58:13.240
> 
> 标签：android, android-layout

嗨，我只想在单击转换按钮后才在edittext 2中显示结果，还有第二个按钮（清除）在我运行程序时未显示如何显示它，因为屏幕尺寸很小这里是代码

```
package converter.com;

import android.app.Activity;
import android.os.Bundle;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;

public class now extends Activity {
    /** defining variables */
    String[] currencys1,currencys2;
    String e,l,f,u,d;
    double EURO=5,dollar=6,franc=7,LE=1,UAE=8,txtvalue;
    EditText txt1,txt2;
    Button convert,clear;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        txt1 =(EditText)findViewById(R.id.txt1);

        txt2 =(EditText)findViewById(R.id.txt2);

    convert=(Button)findViewById(R.id.btn1);
      clear=(Button)findViewById(R.id.clear_btn);  

        currencys1=getResources().getStringArray(R.array.currency);
        final Spinner s1=(Spinner)findViewById(R.id.sp1);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_dropdown_item, currencys1);
        s1.setAdapter(adapter);
        s1.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) 
            {
                switch(arg2)
                {
                case 0:
                    break;
                case 1:
                    break;
                case 2:
                    break;
                case 3:
                    break;
                case 4:
                    break;
                }

            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

                        }
        });

        currencys2=getResources().getStringArray(R.array.currency1);
        final Spinner s2=(Spinner)findViewById(R.id.sp2);

        ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_dropdown_item, currencys2);
        s2.setAdapter(adapter1);
 s2.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) 
            {

                txtvalue =  Double.parseDouble(txt1.getText().toString());
                switch(arg2)
                {
                case 0:
                    final String fromCurrencyCode = s1.getSelectedItem().toString();
                    final String toCurrencyCode = s2.getSelectedItem().toString();
                    if (fromCurrencyCode.equals(toCurrencyCode)) {
                        txt2.setText(txt1.getText());
                    }
                    else
                    {
                    double EURO1=txtvalue*EURO;
                    txt2.setText(String.valueOf(EURO1));
                    }                                                   
                    break;
                case 1:

                    final String fromCurrencyCode1 = s1.getSelectedItem().toString();
                    final String toCurrencyCode1 = s2.getSelectedItem().toString();
                    if (fromCurrencyCode1.equals(toCurrencyCode1)) {
                        txt2.setText(txt1.getText());
                    }
                    else
                    {

                     double LE1=txtvalue*LE;
                    txt2.setText(String.valueOf(LE1));
                    }
                    break;
                case 2:
                    final String fromCurrencyCode2 = s1.getSelectedItem().toString();
                    final String toCurrencyCode2 = s2.getSelectedItem().toString();
                    if (fromCurrencyCode2.equals(toCurrencyCode2)) {
                        txt2.setText(txt1.getText());
                    }
                    else
                    {
                         double franc1=txtvalue*franc;
                        txt2.setText(String.valueOf(franc1));
                    }
                    break;
                case 3:
                    final String fromCurrencyCode3 = s1.getSelectedItem().toString();
                    final String toCurrencyCode3 = s2.getSelectedItem().toString();
                    if (fromCurrencyCode3.equals(toCurrencyCode3)) {
                        txt2.setText(txt1.getText());
                    }
                    else
                    {
                        double UAE1=txtvalue*UAE;
                        txt2.setText(String.valueOf(UAE1));
                    }
                    break;
                case 4:
                    final String fromCurrencyCode4 = s1.getSelectedItem().toString();
                    final String toCurrencyCode4 = s2.getSelectedItem().toString();
                    if (fromCurrencyCode4.equals(toCurrencyCode4)) {
                        txt2.setText(txt1.getText());
                    }
                    else
                    {
                        double dollar1=txtvalue*dollar;
                        txt2.setText(String.valueOf(dollar1));
                    }
                    break;
                }

            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

                        }
        });

        convert.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                //i want to put the code here which show result only after click that button
            }
        });
        clear.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                txt2.setText(" ");

            }
        });
    }
} 
```

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#cad1d9"
    >

    <TableLayout android:layout_width="match_parent" android:id="@+id/tableLayout1" android:layout_height="wrap_content">
        <TextView android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="from" android:textColor="#5c6471"></TextView>
    </TableLayout>
    <Spinner android:id="@+id/sp1" android:layout_height="50dip" android:layout_width="match_parent"></Spinner>
    <TextView android:id="@+id/textView2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Amount" android:textColor="#5c6471"></TextView>
    <EditText android:text="1" android:id="@+id/txt1" android:layout_width="match_parent" android:layout_height="wrap_content" android:numeric="decimal"></EditText>
    <TextView android:id="@+id/textView3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="To" android:textColor="#5c6471"></TextView>
    <Spinner android:layout_width="match_parent" android:layout_height="wrap_content" android:id="@+id/sp2"></Spinner>
    <TextView android:id="@+id/textView4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="value" android:textColor="#5c6471"></TextView>
    <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:id="@+id/txt2" android:text="1" android:editable="false"></EditText>
    <Button android:editable="false" android:width="100px" android:gravity="center" android:id="@+id/btn1" android:text="Convert" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
    <Button android:text="@string/clear" android:layout_width="wrap_content" android:layout_height="wrap_content" android:gravity="center" android:minWidth="400px" android:id="@+id/clear_btn"></Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:06:22.017

`txt2`首次创建活动时，您可以执行以下操作来隐藏：

```
txt2.setVisibility(View.GONE); 
```

然后在转换按钮的点击处理程序中：

```
txt2.setVisibility(View.VISIBLE); 
```

在清除按钮的单击处理程序中，大概您想`GONE`再次创建它。

关于清除按钮不在屏幕上的问题：将您的包装`LinearLayout`在一个`ScrollView`（使`ScrollView`层次结构的顶视图具有单个`LinearLayout`子级）。这样，用户可以向下滚动以查看布局的所有内容。您需要将高度更改`LinearLayout`为`wrap_content`：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#cad1d9"
    >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        >

        . . .
    </LinearLayout
</ScrollView> 
```

# sql-server - 使用 Invoke-SQLCmd 的 Powershell 函数中的“参数为空或为空”错误

> ID：13938762
> 
> 赞同：0
> 
> 时间：2012-12-18T17:58:19.243
> 
> 标签：sql-server, powershell, powershell-2.0

我有以下脚本来收集模式数据并将其插入另一个数据库。作为定义变量的脚本，我可以毫无错误地运行。

```
Function LoadDataDictionary ($SourceServerInstance, $DDServerInstance, $SourceDatabase, $DDDatabase, $DDTableName)
{

$tablelist = Invoke-Sqlcmd -Query "SELECT DISTINCT table_name FROM INFORMATION_SCHEMA.COLUMNS ORDER BY Table_name" -ServerInstance $SourceServerInstance -Database $SourceDatabase

foreach($tables in $tablelist)
{
$Query = "SELECT tbl.name AS `"Table_Name`",
clmns.name AS `"Column_Name`", 
substring(ISNULL(CAST(exprop.value AS VARCHAR(255)),`'`'),1,250) AS `"Ext_Prop`",
CAST(ISNULL(idxcol.index_column_id, 0)AS VARCHAR(20)) AS `"Is_Primary_Key`",
CAST(ISNULL((SELECT TOP 1 1 FROM sys.foreign_key_columns AS fkclmn WHERE fkclmn.parent_column_id = clmns.column_id AND fkclmn.parent_object_id = clmns.object_id), 0) AS VARCHAR(20)) AS `"Is_Forign_Key`",
CAST(udt.name AS CHAR(15)) AS `"DataType`" ,
CAST(CAST(CASE WHEN typ.name IN (N`'nchar`', N`'nvarchar`') AND clmns.max_length <> -1 THEN clmns.max_length/2 ELSE clmns.max_length END AS INT) AS VARCHAR(20)) AS `"Length`",
CAST(CAST(clmns.precision AS INT) AS VARCHAR(20)) AS `"Numeric_Precision`",
CAST(CAST(clmns.scale AS INT) AS VARCHAR(20)) AS `"Numeric_Scale`",
CAST(clmns.is_nullable AS VARCHAR(20)) AS `"Nullable`" ,
CAST(clmns.is_computed AS VARCHAR(20)) AS `"Computed`" ,
CAST(clmns.is_identity AS VARCHAR(20)) AS `"Is_Identity`" ,
isnull(REPLACE(CAST(cnstr.definition AS VARCHAR(20)), `'`'`'`',`'`'),`'`') AS `"Default_Value`"
FROM sys.tables AS tbl
INNER JOIN sys.all_columns AS clmns
ON clmns.object_id=tbl.object_id
LEFT OUTER JOIN sys.indexes AS idx
ON idx.object_id = clmns.object_id
AND 1 =idx.is_primary_key
LEFT OUTER JOIN sys.index_columns AS idxcol
ON idxcol.index_id = idx.index_id
AND idxcol.column_id = clmns.column_id
AND idxcol.object_id = clmns.object_id
AND 0 = idxcol.is_included_column
LEFT OUTER JOIN sys.types AS udt
ON udt.user_type_id = clmns.user_type_id
LEFT OUTER JOIN sys.types AS typ
ON typ.user_type_id = clmns.system_type_id
AND typ.user_type_id = typ.system_type_id
LEFT JOIN sys.default_constraints AS cnstr
ON cnstr.object_id=clmns.default_object_id
LEFT OUTER JOIN sys.extended_properties exprop
ON exprop.major_id = clmns.object_id
AND exprop.minor_id = clmns.column_id
AND exprop.name = `'MS_Description`'
WHERE tbl.name = `'" + $tables.table_name + "`'
ORDER BY tbl.name, clmns.column_id ASC"

$QueryOut = Invoke-Sqlcmd -Query $Query -ServerInstance $SourceServerInstance -Database $SourceDatabase

    foreach($QueryOutData in $QueryOut)
        {
        $InsertQuery = "INSERT INTO $DDTableName ([DatabaseName], [Table Name], [Column Name], [Ext Prop], [Is Primary Key], [Is Forign Key], [DataType], [Length], [Numeric Precision], [Numeric Scale], [Nullable], [Computed], [Is Identity], [Default Value]) VALUES (`'$SourceDatabase`',`'" + $QueryOutData.Table_Name + "`', `'" + $QueryOutData.Column_Name + "`', `'" + $QueryOutData.Ext_Prop + "`', `'" + $QueryOutData.Is_Primary_Key + "`', `'" + $QueryOutData.Is_Forign_Key + "`', `'" + $QueryOutData.DataType + "`', `'" + $QueryOutData.Length + "`', `'" + $QueryOutData.Numeric_Precision + "`', `'" + $QueryOutData.Numeric_Scale + "`', `'" + $QueryOutData.Nullable + "`', `'" + $QueryOutData.Computed + "`', `'" + $QueryOutData.Is_Identity + "`', `'" + $QueryOutData.Default_Value + "`')"
        $InsertQueryOut = Invoke-Sqlcmd -Query $InsertQuery -ServerInstance $DDServerInstance -Database $DDDatabase
        }

}
} 
```

如果我将它作为函数运行或参数化它会失败并出现错误：

> Invoke-Sqlcmd：无法验证参数“数据库”上的参数。参数为 null 或空。提供一个不为空或不为空的参数，然后再次尝试该命令。在 line:43 char:88 + $QueryOut = Invoke-Sqlcmd -Query $Query -ServerInstance $SourceServerInstance -Database <<<< $SourceDatabase + CategoryInfo : InvalidData: (:) [Invoke-Sqlcmd], ParameterBindingValidationException + FullyQualifiedErrorId : ParameterArgumentValidationError, Microsoft.SqlServer.Management.PowerShell.GetScriptComm 和 Invoke-Sqlcmd：无法验证参数“数据库”上的参数。参数为 null 或空。提供一个不为空或不为空的参数，然后再次尝试该命令。在行：47 字符：

# xml - XSL 要替换的单词列表，最简单的定义

> ID：13938765
> 
> 赞同：0
> 
> 时间：2012-12-18T17:58:24.250
> 
> 标签：xml, xslt, xslt-2.0

我有一个想要复制的 XML 文档，但我不知道如何翻译一个特殊属性。复制 XML 并替换 gernal 中的属性可以正常工作，但我不知道如何在 XSL 中定义一个短语列表，然后将其翻译成另一个短语。

定义应该易于阅读。会`translate()`吞下某种列表表示吗？一个使用的小例子`translate`会很棒（不要关心 XML 复制的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:26:36.793

XPath 和 XSLT 1.0的`translate`功能仅用于将一个 Unicode 字符替换为另一个 Unicode 字符；您可以提供输入和替换字符的列表，然后第一个列表中的每个字符将被第二个列表中相同位置的字符替换。但是要替换完整的作品或短语，您需要其他工具。

您没有说或描述是否要替换完整的属性值，假设您可以（使用 XSLT 2.0）简单地执行例如

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:key name="phrase" match="phrase" use="@input"/>

<xsl:param name="phrases">
  <phrases>
    <phrase input="IANAL" output="I am not a lawyer"/>
    <phrase input="WYSIWYG" output="What you see is what you get"/>
  </phrases>
</xsl:param>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="foo/@bar">
  <xsl:attribute name="baz" select="key('phrase', ., $phrases)/@output"/>
</xsl:template>

</xsl:stylesheet> 
```

例如，该样式表转换

```
<root>
  <foo bar="IANAL"/>
  <foo bar="WYSIWYG"/>
</root> 
```

进入

```
<root>
  <foo baz="I am not a lawyer"/>
  <foo baz="What you see is what you get"/>
</root> 
```

如果您想对一个值或字符串中的子字符串进行多次替换，则需要付出更多的努力，但使用`replace`XSLT/XPath 2.0 中的函数也是可能的。

[编辑]这是一个使用项目列表和递归函数替换短语的示例：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf"
  version="2.0">

<xsl:key name="phrase" match="phrase" use="@input"/>

<xsl:function name="mf:replace-phrases" as="xs:string">
  <xsl:param name="phrases" as="element(phrase)*"/>
  <xsl:param name="text" as="xs:string"/>
  <xsl:choose>
    <xsl:when test="not($phrases)">
      <xsl:sequence select="$text"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:sequence select="mf:replace-phrases($phrases[position() gt 1], replace($text, $phrases[1]/@input, $phrases[1]/@output))"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:function>

<xsl:param name="phrases">
  <phrases>
    <phrase input="IANAL" output="I am not a lawyer"/>
    <phrase input="WYSIWYG" output="What you see is what you get"/>
  </phrases>
</xsl:param>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="foo/@bar">
  <xsl:attribute name="baz" select="mf:replace-phrases($phrases/phrases/phrase, .)"/>
</xsl:template>

</xsl:stylesheet> 
```

这改变了例子

```
<root>
  <foo bar="He said: 'IANAL'. I responded: 'WYSIWYG', and he smiled."/>
</root> 
```

进入

```
<root>
  <foo baz="He said: 'I am not a lawyer'. I responded: 'What you see is what you get', and he smiled."/>
</root> 
```

# c++ - 使用宏进行赋值和错误检查

> ID：13938766
> 
> 赞同：0
> 
> 时间：2012-12-18T17:58:28.323
> 
> 标签：c++, macros, directx, direct3d

短篇小说是我想要这种行为：

```
#if defined(DEBUG) || defined(_DEBUG)
#define CHECK_HRESULT(x)                                    \
{                                                           \
    HRESULT hr = (x);                                       \
    if (FAILED(hr))                                         \
    {                                                       \
        DXTrace(__FILE__, (DWORD)__LINE__, hr, L#x, true);  \
    }                                                       \
}
#else
#define CHECK_HRESULT(x)    (x)
#endif 
```

但我也想保存并返回 HRESULT 值，以便在免费构建中进行错误检查。所以基本上，我希望能够做类似的事情：

```
HRESULT hr = CHECK_HRESULT(Some_Function_Call()); 
```

这将为免费和检查构建分配一个值，但当检查构建返回无效的 HRESULT 时，也会显示一个对话框。是的，我知道我可以创建一个内联函数，但是我必须传入一个字符串，`L#x`这意味着在我的代码中复制语句两次，这是我想避免的（同样，当你尝试时也会出现同样的问题编写一个仅`hr`作为输入的宏）。我也想避免这样的事情：

```
#if defined(DEBUG) || defined(_DEBUG)
#define CHECK_HRESULT(x)    (x);                            \
{                                                           \
    HRESULT hr = (x);                                       \
    if (FAILED(hr))                                         \
    {                                                       \
        DXTrace(__FILE__, (DWORD)__LINE__, hr, L#x, true);  \
    }                                                       \
}
#else
#define CHECK_HRESULT(x)    (x)
#endif 
```

因为`x`很容易成为分配内存或执行重要操作的函数，并且两次调用该函数会导致严重的不良行为，尤其是在检查构建和自由构建之间。此外，几乎不用说，我想避免假设已经有一个名为 hr 的 HRESULT ......我以前曾走过那条黑暗的道路。我确实意识到`S_OK`在检查的构建中默认分配一个值可能是安全的，因为程序很可能无论如何都会崩溃，但这对我来说似乎很草率。

无论如何，谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:02:49.443

你可以引入辅助函数：

```
#if defined(DEBUG) || defined(_DEBUG)
inline static HRESULT _Do_CheckHResult(HRESULT hr, const wchar* text, const wchar* file, DWORD line)
{
    if (FAILED(hr))                                         
    {                                                       
        DXTrace(file, line, hr, text, true);  
    }   
    return hr;
}

#define CHECK_HRESULT(x) _Do_CheckHResult(x, L#x, __FILE__, (DWORD)__LINE__)
#else
#define CHECK_HRESULT(x)    (x)
#endif 
```

*（我是从头顶写的，它应该可以与复制粘贴一起使用，但我没有测试过）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:04:29.123

gcc 有一个扩展名，允许表达式中的完整代码块，但我假设你需要这个用于 VC++？在这种情况下，您能否定义一个宏“CHECK_ASSIGN_HRESULT(v,x)”来进行检查，同时将结果分配给 v？

# objective-c - Apple 的 Speak here 示例背后的数学原理

> ID：13938768
> 
> 赞同：10
> 
> 时间：2012-12-18T17:58:44.700
> 
> 标签：objective-c, ios, audio, core-audio, avaudioplayer

我有一个关于 Apple 在[此处发言示例](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)中使用的数学的问题。

一点背景知识：我知道 AVAudioRecorder 和 AVAudioPlayer 返回的平均功率和峰值功率以 dB 为单位。我也理解为什么 RMS 功率以 dB 为单位，并且需要使用`pow(10, (0.5 * avgPower))`.

我的问题是：

Apple 使用这个公式来创建它的“Meter Table”

```
MeterTable::MeterTable(float inMinDecibels, size_t inTableSize, float inRoot)
    : mMinDecibels(inMinDecibels),
    mDecibelResolution(mMinDecibels / (inTableSize - 1)), 
    mScaleFactor(1\. / mDecibelResolution)
{
    if (inMinDecibels >= 0.)
    {
        printf("MeterTable inMinDecibels must be negative");
        return;
    }

    mTable = (float*)malloc(inTableSize*sizeof(float));

    double minAmp = DbToAmp(inMinDecibels);
    double ampRange = 1\. - minAmp;
    double invAmpRange = 1\. / ampRange;

    double rroot = 1\. / inRoot;
    for (size_t i = 0; i < inTableSize; ++i) {
        double decibels = i * mDecibelResolution;
        double amp = DbToAmp(decibels);
        double adjAmp = (amp - minAmp) * invAmpRange;
        mTable[i] = pow(adjAmp, rroot);
    }
} 
```

所有的计算是什么 - 或者更确切地说，这些步骤中的每一个都做了什么？我认为`mDecibelResolution`并`mScaleFactor`用于绘制超过 400 个值的 80dB 范围（除非我弄错了）。但是， 、 和 的`inRoot`意义`ampRange`是`invAmpRange`什么`adjAmp`？另外，为什么仪表表中的第 i 个条目是“ `mTable[i] = pow(adjAmp, rroot);`”？

任何帮助深表感谢！:)

在此先感谢和欢呼！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T22:59:41.683

自从我问这个问题以来已经一个月了，感谢 Geebs 的回复！:)

因此，这与我一直在从事的一个项目有关，并且基于此的功能是在提出该问题后大约 2 天实施的。显然，我在发布结束回复时有所懈怠（对此感到抱歉）。我也在 1 月 7 日发表了评论，但回过头来，似乎我对 var 名称感到困惑。>_<。以为我会逐行回答这个问题（带图片）。:)

所以，这里是：

```
//mDecibelResolution is the "weight" factor of each of the values in the meterTable.
//Here, the table is of size 400, and we're looking at values 0 to 399.
//Thus, the "weight" factor of each value is minValue / 399.

MeterTable::MeterTable(float inMinDecibels, size_t inTableSize, float inRoot)
    : mMinDecibels(inMinDecibels),
    mDecibelResolution(mMinDecibels / (inTableSize - 1)), 
    mScaleFactor(1\. / mDecibelResolution)
{
    if (inMinDecibels >= 0.)
    {
        printf("MeterTable inMinDecibels must be negative");
        return;
    }

    //Allocate a table to store the 400 values
    mTable = (float*)malloc(inTableSize*sizeof(float));

    //Remember, "dB" is a logarithmic scale.
    //If we have a range of -160dB to 0dB, -80dB is NOT 50% power!!!
    //We need to convert it to a linear scale. Thus, we do pow(10, (0.05 * dbValue)), as stated in my question.

    double minAmp = DbToAmp(inMinDecibels);

    //For the next couple of steps, you need to know linear interpolation.
    //Again, remember that all calculations are on a LINEAR scale.
    //Attached is an image of the basic linear interpolation formula, and some simple equation solving. 
```

![线性插值方程](../Images/ed35717c6453a5c2a56b7461f40893f1.png)

```
 //As per the image, and the following line, (y1 - y0) is the ampRange - 
    //where y1 = maxAmp and y0 = minAmp.
    //In this case, maxAmp = 1amp, as our maxDB is 0dB - FYI: 0dB = 1amp.
    //Thus, ampRange = (maxAmp - minAmp) = 1\. - minAmp
    double ampRange = 1\. - minAmp;

    //As you can see, invAmpRange is the extreme right hand side fraction on our image's "Step 3"
    double invAmpRange = 1\. / ampRange;

    //Now, if we were looking for different values of x0, x1, y0 or y1, simply substitute it in that equation and you're good to go. :)
    //The only reason we were able to get rid of x0 was because our minInterpolatedValue was 0.

    //I'll come to this later.
    double rroot = 1\. / inRoot;

    for (size_t i = 0; i < inTableSize; ++i) {
        //Thus, for each entry in the table, multiply that entry with it's "weight" factor.
        double decibels = i * mDecibelResolution;

        //Convert the "weighted" value to amplitude using pow(10, (0.05 * decibelValue));
        double amp = DbToAmp(decibels);

        //This is linear interpolation - based on our image, this is the same as "Step 3" of the image.
        double adjAmp = (amp - minAmp) * invAmpRange;

        //This is where inRoot and rroot come into picture.
        //Linear interpolation gives you a "straight line" between 2 end-points.
       //rroot =  0.5
       //If I raise a variable, say myValue by 0.5, it is essentially taking the square root of myValue.
       //So, instead of getting a "straight line" response, by storing the square root of the value,
       //we get a curved response that is similar to the one drawn in the image (note: not to scale).
        mTable[i] = pow(adjAmp, rroot);
    }
} 
```

响应曲线图像：如您所见，“线性曲线”并不完全是一条曲线。>_< ![平方根响应图像](../Images/2027fe85dfed0be8111f655222066958.png)

希望这对社区有所帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T07:48:45.753

没有专家，但基于物理和数学：

假设最大幅度为 1，最小值为 0.0001 [对应于 -80db，这是苹果示例中设置的最小 db 值：#define kMinDBvalue -80.0 in AQLevelMeter.h]

minAmp 是此示例的最小幅度 = 0.0001

现在，所做的只是将分贝分辨率倍数的幅度与最小幅度进行调整：
调整幅度 = (amp-minamp)/(1-minamp)
这使得调整幅度的范围 = 0 到 1而不是 0.0001 到 1（如果需要）。

inRoot 在这里设置为 2。rroot=1/2 - 1/2 的幂是平方根。来自苹果的文件：
// inRoot - 这控制响应的曲率。2.0 是平方根，3.0 是立方根。但是 inRoot 不必是整数值，它可以是 1.8 或 2.5 等。
基本上再次给您一个介于 0 和 1 之间的响应，并且它的曲率会根据您为 inRoot 设置的值而变化。

# python - 如何从graphviz的布局中获取坐标？

> ID：13938770
> 
> 赞同：8
> 
> 时间：2012-12-18T17:58:46.080
> 
> 标签：python, coordinates, graphviz, graph-layout, pygraph

我一直在使用 pygraph 进行一些项目。我完成[了这个例子](http://code.google.com/p/python-graph/wiki/Example)，它工作正常。

现在，问题如下：图形是以图片格式（gif）绘制的。我需要的是为 gif 图像上显示的图形布局获取每个节点的实际坐标。我该怎么做呢？我一直在尝试和尝试，但找不到解决这个问题的方法。我认为问题的解决方案将以某种方式通过操纵以下两行之一：

```
gv.layout(gvv,'dot')
gv.render(gvv,'png','europe.png') 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T08:55:35.200

您可以使用以下命令将布局信息添加到图表中：

```
gv.render(gvv) 
```

然后找出获取其属性的节点的位置`pos`：

```
n_france = gv.findnode(gvv, "France")
pos = gv.getv(n_france, "pos") 
```

然后根据您想要做什么，您可能需要将点坐标转换为 png 图像坐标。您可以从这里获得有用的信息：

[http://www.graphviz.org/faq/#FaqCoordTransformation](http://www.graphviz.org/faq/#FaqCoordTransformation)

它详细解释了从图形单元到图像像素的计算。

希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-11T17:15:57.180

我刚刚找到了一个类似的解决方案，非常适合我的需求

```
pos = nx.drawing.nx_agraph.graphviz_layout(G, prog='dot', args='-Grankdir=LR') 
```

干杯！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-22T22:40:34.510

使用 pydotplus，您可以加载并解析 dot/gv 文件并询问 pydotplus 生成的数据结构，但这种内部表示似乎最初并不具备所有节点属性，如 pos，除非它们已经在文件中。
但是您也可以调用 .write_dot() 来生成更详细的点文件版本。如果您对此进行解析，则生成的数据结构似乎具有所有节点的 pos （甚至样条的 pos ）

注意：最好按名称而不是索引来索引节点，因为详细文件中任何带有方括号的文本都将被解析为节点，因此节点列表可能包含虚假的额外元素。

在 Spyder 提示符下的以下（略微编辑）实验中，我有一个简洁的点文件interior.gv（没有节点的pos），我是.graph_from_dot_file（），然后是.write_dot（）。然后 .graph_from_dot_file()*再次*在详细生成的文件上，然后根据需要找到 pos。

```
import pydotplus as pdp

interior = pdp.graphviz.graph_from_dot_file('interior.gv')

interior.write_dot('interior2.dot')
Out[210]: True

interior2 = pdp.graphviz.graph_from_dot_file('interior2.dot')

interior2.get_nodes()[3].get_pos()
Out[214]: '"213.74,130"' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T20:43:26.967

Networkx 可以这样做：

```
import networkx as nx

def setup_europe():
    G = nx.Graph()

    G.add_edge("Portugal", "Spain")
    G.add_edge("Spain","France")
    G.add_edge("France","Belgium")
    G.add_edge("France","Germany")
    G.add_edge("France","Italy")
    G.add_edge("Belgium","Netherlands")
    G.add_edge("Germany","Belgium")
    G.add_edge("Germany","Netherlands")
    G.add_edge("England","Wales")
    G.add_edge("England","Scotland")
    G.add_edge("Scotland","Wales")
    G.add_edge("Switzerland","Austria")
    G.add_edge("Switzerland","Germany")
    G.add_edge("Switzerland","France")
    G.add_edge("Switzerland","Italy")
    G.add_edge("Austria","Germany")
    G.add_edge("Austria","Italy")
    G.add_edge("Austria","Czech Republic")
    G.add_edge("Austria","Slovakia")
    G.add_edge("Austria","Hungary")
    G.add_edge("Denmark","Germany")
    G.add_edge("Poland","Czech Republic")
    G.add_edge("Poland","Slovakia")
    G.add_edge("Poland","Germany")
    G.add_edge("Czech Republic","Slovakia")
    G.add_edge("Czech Republic","Germany")
    G.add_edge("Slovakia","Hungary")
    return G

G = setup_europe() 
```

写一个点文件：

```
nx.write_dot(G, '/tmp/out.dot') 
```

计算节点的位置：

```
pos = nx.pygraphviz_layout(G, prog = 'dot')
print(pos)
# {'Netherlands': (713.86, 167.0), 'Italy': (473.86, 389.0), 'Czech Republic': (100.86, 241.0), 'Portugal': (879.86, 315.0), 'England': (1024.9, 241.0), 'Denmark': (568.86, 167.0), 'Poland': (100.86, 167.0), 'Scotland': (1024.9, 389.0), 'France': (571.86, 315.0), 'Belgium': (713.86, 19.0), 'Austria': (320.86, 167.0), 'Slovakia': (156.86, 315.0), 'Wales': (990.86, 315.0), 'Switzerland': (473.86, 241.0), 'Hungary': (294.86, 241.0), 'Germany': (465.86, 93.0), 'Spain': (879.86, 241.0)} 
```

渲染一个 png：

```
agraph = nx.to_agraph(G)
agraph.draw("/tmp/europe.png", format = 'png', prog = 'dot') 
```

![在此处输入图像描述](../Images/ed7e2a66dd95656e38e837b51799a218.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-11T09:17:26.287

仅使用 pydot/dot 您可以通过生成 SVG 然后从 SVG 读取节点的位置来实现。它有点hacky，但足够可靠

```
from xml.dom import minidom
import pydot
from io import BytesIO
def extract_node_positions(
    in_dot: pydot.Dot
) -> Dict[str, Tuple[str, float, float]]:
    """
    Extract the x,y positions from a pydot graph by rendering
    Args:
        in_dot: the graph to render

    Returns:
        a list of all the nodes

    Examples:
        >>> g = pydot.Dot()
        >>> g.add_node(pydot.Node("A"))
        >>> g.add_node(pydot.Node("B"))
        >>> g.add_node(pydot.Node("C"))
        >>> g.add_edge(pydot.Edge("A", "B"))
        >>> g.add_edge(pydot.Edge("B", "C"))
        >>> extract_node_positions(g)
        {'A': ('A', 27.0, -157.8), 'B': ('B', 27.0, -85.8), 'C': ('C', 27.0, -13.8)}
    """
    node_mapping = {f'node{i}': k.get_name() 
                    for i, k in enumerate(in_dot.get_nodes(), 1)}
    svg_io = BytesIO(in_dot.create_svg())
    doc = minidom.parse(svg_io)  # parseString also exists
    node_dict = {node_mapping[p.getAttribute('id')]: (c_text.firstChild.data,
                                        float(c_text.getAttribute('x')),
                                        float(c_text.getAttribute('y')))

                 for p in doc.getElementsByTagName("g") if "node" == p.getAttribute('class').lower()
                 for c_text in p.getElementsByTagName('text')
                 }
    doc.unlink()
    return node_dict 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-14T18:53:30.330

要从 Python 中直接访问 Graphviz 渲染命令（例如点）的结果作为二进制数据字符串而不是写入文件，请使用 Graph 或 Digraph 对象的 pipe() 方法：

> > > h = 图形（'你好'，格式='svg'）
> > > 
> > > h.edge('你好', '世界')
> > > 
> > > 打印(h.pipe().decode('utf-8'))

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-10T16:25:29.807

我最近为此苦苦挣扎，这里的答案有一些帮助，但并不完全有帮助。关于networkx的建议是正确的。Networkx 使用 pygraphviz 与 graphviz 交互，因此如果您愿意，可以直接使用 pygraphviz：

```
import pygraphviz as pgv
G = pgv.AGraph(strict=False,directed=True)
# add nodes and edges
G.add_edge(1,2)
G.add_edge(2,1)
# generate a layout--this creates `pos` attributes for both nodes and edges
G.layout(prog="dot") 
#change something about the graph that would change the layout, e.g.,
edge = G.get_edge("1", "2")
edge.attr["label"] = "test label"
# create the graph using the layout already generated; note, do not provide `prog`
G.draw("test.pdf")
# compare it to a newly generated layout
G.draw("test2.pdf", prog="dot") 
```

如果要使用命令已经生成的节点和边缘位置，重要的部分是*不要*提供`prog`给命令。我现在看到这是在 pygraphviz 文档字符串中说明的。顺便说一句，它与论点的作用相同。查看源代码，pygraphviz 调用 graphviz 来生成布局。`draw``layout``draw``prog="neato"``-n2`

# git - 查找包含多个特定提交的 Git 提交

> ID：13938779
> 
> 赞同：10
> 
> 时间：2012-12-18T17:59:31.457
> 
> 标签：git, git-branch, git-log, git-rev-list

**一般问题：**给定一组提交，我如何找到所有这些提交作为祖先的提交列表，或者相关地，包含所有这些提交的第一个提交。

`git branch --contains <commit>`我可以通过查找集合中所有提交返回的分支来找到包含提交的分支（类似标签） ，但`git rev-list`没有`--contains`选项。实际上，我正在寻找一种将常规`--contains`参数与结合的方法，`git rev-list`并将输出限制为包含*所有*列出的提交的提交，而不是其中的任何一个（这是`--contains`正常工作的方式）。

**具体示例：**给定 commits `a`, `b`, `c`，我如何找到第一个在其祖先中包含所有三个提交的提交？

例如，给定下面的树，我如何找到标记为 X 的提交？

```
* (master)
|
X
|\
a *
| |
b c
|/
*
|
* 
```

我认为我可以用 做一些魔法`git rev-list`，并且可能涉及`<commit1>...<commit2>`符号，但我无法进一步解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:15:00.587

我想这个问题的答案是 git 不是为此而生的。Git 真的不喜欢“提交的子节点”的想法，这是有充分理由的：它的定义不是很好。因为提交不知道它的子节点，所以它是一个非常模糊的集合。您可能实际上并没有在您的 repo 中拥有所有分支，因此缺少一些孩子。

Gits 的内部存储结构也使得查找提交的子节点成为一项相当昂贵的操作，因为您必须将所有头的修订图遍历到它们相应的根，或者直到您看到所有您想知道其子节点的提交。

git 支持的唯一这种概念是一个提交*包含*另一个提交的想法。但是只有极少数 git 命令（`git branch`其中之一）支持此功能。在 git 支持的地方，它不支持任意提交，只支持分支头。

这一切似乎是 git 的一个相当严格的限制，但在实践中，您不需要提交的“孩子”，而通常只需要知道哪些分支包含特定的提交。

* * *

这就是说：如果您真的想得到问题的答案，您将不得不编写自己的脚本来找到它。最简单的方法是从`git rev-list --parents --reverse --all`. 逐行解析，您将构建一棵树，并为每个节点标记它是否是您正在寻找的提交的子节点。您可以通过在遇到提交后自己标记提交，然后将该属性传递给他们的所有孩子等等来做到这一点。

一旦你有一个标记为包含所有提交的提交，你就将它添加到你的“解决方案列表”中并将它的所有子节点标记为*死*——它们不能再包含任何第一个提交。然后，此属性也将传递给它的所有后代。

如果您不存储不包含您要求的任何提交的树的任何部分，则可以在此处节省一些内存。

* * *

**编辑**破解了一些python代码

```
#!/usr/bin/python -O
import os
import sys

if len(sys.argv) < 2:
    print ("USAGE: {0} <list-of-revs>".format([sys.argv[0]]))
    exit(1)

rev_list = os.popen('git rev-list --parents --reverse --all')

looking_for = os.popen('git rev-parse {0}'
                       .format(" ".join(sys.argv[1:]))).read().splitlines()
solutions = set()
commits = {}

for line in rev_list:
    line = line.strip().split(" ")
    commit = set()
    sha = line[0]
    for parent in line[1:]:
        if not parent in commits:
            continue
        commit.update(commits[parent])
        if parent in solutions:
            commit.add("dead")
    if sha in looking_for:
        commit.add(sha)
    if not "dead" in commit and commit.issuperset(looking_for):
        solutions.add(sha)
    # only keep commit if it's a child of looking_for
    if len(commit) > 0:
        commits[sha] = commit

print "\n".join(solutions) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:33:33.067

一种可能的解决方案：

使用 'git merge-base ab c' 获取提交以用作调用 rev-list 的起点；我们称之为$MERGE_BASE。

使用 'git rev-list $MERGE_BASE..HEAD' 调用列出从它们的共同祖先到 HEAD 的所有提交。循环通过此输出（伪代码）：

```
if commit == a || b || c
  break
else 
  $OLDEST_DESCENDANT = commit
return $OLDEST_DESCENDANT 
```

这将适用于您上面的示例，但如果它们从未被合并，没有在最年轻的 a、b、c 之后的提交中立即合并，或者如果有多个合并提交将 a 组合在一起，则会给出误报， b 和 c（如果它们各自驻留在自己的分支上）。要找到最古老的后代，还有一些工作要做。

然后，您应该按照上面的内容，以 $OLDEST_DESCENDANT 开头，然后在 DAG 中从它向 HEAD （rev-list --reverse $OLDEST_DESCENDANT~..HEAD）逆向前进，测试以查看 'rev-list $MERGE_BASE 的输出~..$OLDEST 包含所有需要的提交 a、b 和 c（不过，也许有比 rev-list 更好的方法来测试它们是否可访问）。

正如 twalberg 所提到的，像这样单独测试提交似乎不是最佳且缓慢的，但这是一个开始。这种方法比他的合并提交列表方法的优势在于，当所有输入提交都在同一个分支上时，它将提供有效的响应。

性能主要受合并基础、头部、X 和所需提交集（a、b 和 c）中最年轻的之间的距离的影响。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T16:35:58.777

怎么样 ：

```
MERGE_BASE=`git merge-base A B C`
git log $MERGE_BASE...HEAD --merges 
```

假设您只有 1 个合并。即使您有更多合并，最旧的合并也是包含所有三个提交的更改的合并

# sql-server-2008 - 在 sql server 中删除/禁用索引更好

> ID：13938784
> 
> 赞同：13
> 
> 时间：2012-12-18T17:59:46.903
> 
> 标签：sql-server-2008, indexing

我正在写这篇文章以跟进[更改 SQL Server 中列的数据类型](https://stackoverflow.com/questions/13934265/changing-data-type-of-column-in-sql-server#comment19212890_13934265)

我之前的问题是我是否需要删除所有索引和约束，并且回答我确实需要删除它们。

所以当我在网上浏览这个主题时，我遇到了一些帖子说最好禁用和启用索引，而不是删除和重新创建它们。

那么哪种方法更好呢？禁用索引是否也允许您更改列的数据类型？两者有什么区别？

删除和创建索引的语句

```
DROP INDEX UX_1_COMPUTATION ON  dbo.Computation 

ALTER TABLE dbo.Computation
ALTER COLUMN ComputationID NVARCHAR(25) not null

CREATE UNIQUE INDEX UX_1_COMPUTATION ON dbo.Computation (ComputationID); 
```

带有禁用和启用索引的语句

```
ALTER INDEX [UX_1_COMPUTATION ] ON  dbo.Computation DISABLE

ALTER TABLE dbo.Computation
ALTER COLUMN ComputationID NVARCHAR(25) not null

ALTER INDEX [UX_1_COMPUTATION ] ON dbo.Computation REBUILD; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-31T05:32:31.910

> 禁用索引是否也允许您更改列的数据类型？

它基于您选择的索引类型。当表上的聚集索引被禁用时，您无法修改列数据类型。如果您的索引是非聚集索引，那么您可以。

> 两者有什么区别？

禁用和删除索引的最大区别在于元数据和统计信息是否被持久化。如果禁用，它们是。如果掉落，它们不会。确保在执行任一操作之前仔细权衡您的选项，并且始终有办法重新创建可用的索引。

> 哪种方法更好？

在您的情况下，我建议删除并重新创建索引。

# javascript - 防止向下滚动哈希更改或单击

> ID：13938788
> 
> 赞同：2
> 
> 时间：2012-12-18T18:00:11.007
> 
> 标签：javascript, jquery, hash, scroll

> **可能重复：**
> [在不滚动页面的情况下修改 document.location.hash](https://stackoverflow.com/questions/1489624/modifying-document-location-hash-without-page-scrolling)

哈希更改时如何防止向下滚动页面到主题标签？我尝试了以下方法：

```
$("#button_bar a").click(function(event) {
    event.preventDefault(); //This was to prevent the hash scroll down behavior

    window.location.hash = this.hash; //This makes scroll down to the hash again

    $(window).hashchange( function(){ //this recognizes if the hash has changed
        recognizeHashTag();  //this identifies the hashtag and fires an ajax call
    });
}); 
```

问题是当我引用时`window.location.hash = this.hash`，它什么也没做。当它被取消引用时，哈希行为又回来了。如果有人有想法，非常感谢。

# .net - 实体框架 5，代码优先延迟加载不起作用

> ID：13938790
> 
> 赞同：0
> 
> 时间：2012-12-18T18:00:18.463
> 
> 标签：.net, vb.net, entity-framework

我试图让我的头脑围绕 EF，并且遇到了障碍，我正在使用简单的博客/帖子结构并创建了类，例如：

```
''' <summary>
''' Represents a blog in the database
''' </summary>
''' <remarks></remarks>
Public Class Blog
    Public Property BlogID As Integer
    Public Property Name As String

    ''' <summary>
    ''' All posts in this blog
    ''' </summary>
    ''' <value></value>
    ''' <returns></returns>
    ''' <remarks></remarks>
    Public Property BlogPosts As List(Of BlogPost)
End Class 
```

现在如果我这样做

```
 Using db As New DBContext
        _blog = db.Blogs.
            FirstOrDefault(Function(m) m.BlogID = BlogID)

        Dim _posts = _blog.BlogPosts.First
    End Using 
```

我在 BlogPosts 上得到一个空引用异常，它不是延迟加载。

现在我可以使用 .Include 强制它工作，但这会破坏对象。

我发现的所有 c# 示例都用“虚拟”声明了 BlogPosts 属性，我不知道 VB 版本会是什么？例如：

```
public virtual ICollection<BlogPosts> BlogPosts { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:04:47.423

使属性 Overridable 对其进行排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:05:49.203

使用 overrides 关键字，如[本例](https://stackoverflow.com/questions/1802201/vb-net-overridable-property-not-same-as-c-sharp-virtual-property)所示。

这应该够了吧。

# sencha-touch - ST2.1 - 未捕获的类型错误：对象 [对象对象] 没有方法“链接”

> ID：13938795
> 
> 赞同：1
> 
> 时间：2012-12-18T18:00:29.743
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我刚刚尝试通过复制“src”文件夹中项目中的所有javascript文件来将我的应用程序的ST2.0源文件升级到ST2.1。当我加载第一个屏幕时，出现以下错误：

未捕获的类型错误：对象 [对象对象] 没有方法“链接”

有升级到 2.1 的标准方法吗？任何想法为什么我会收到此错误？

它似乎发生在 container.js 中，此时代码中：

```
 updateUseBodyElement: function(useBodyElement) {
        if (useBodyElement) {
            this.link('bodyElement', this.innerElement.wrap({
Uncaught TypeError: Object [object Object] has no method 'link'
                cls: 'x-body'
            }));
        }
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:32:34.927

2.1 的 src 文件夹不同，您不能仅通过复制文件来升级。

这是我用来升级我的应用程序的网站。

[http://senchatouchexp.blogspot.com/2012/12/sencha-touch-20x-upgrade-21.html](http://senchatouchexp.blogspot.com/2012/12/sencha-touch-20x-upgrade-21.html)

# iphone - 在 ios 中使用 box2d 绘制调试形状，如何？

> ID：13938800
> 
> 赞同：0
> 
> 时间：2012-12-18T18:01:05.580
> 
> 标签：iphone, ios, box2d

我正在使用最新的 cocos2d iphone 2.0 和 box2d（不知道版本）。

我尝试在调试模式下显示形状，我该怎么做？

问候米尔扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:11:36.787

查看 cocos2d 附带的两个 box2d 示例。他们正在绘制 box2d 形状。

如果这没有帮助，请查看[本](http://www.iforce2d.net/b2dtut/setup-ios)教程和 SO [question](https://stackoverflow.com/questions/12990475/cocos2d-box2d-how-to-debug-show-bodies)。

# django - Django 存储匿名用户数据

> ID：13938805
> 
> 赞同：37
> 
> 时间：2012-12-18T18:01:22.890
> 
> 标签：django, django-forms

我有一个 django 模型，它存储来自表单输入的用户和产品数据：

```
def ProductSelection(request, template_name='product_selection.html'):
    ...
    if user.is_authenticated():
        user = request.user
    else:
        # deal with anonymous user info
    project = Project.objects.create(
        user=user,
        product=form.cleaned_data["product"],
        quantity=form.cleaned_data["product_quantity"],
    ) 
```

当然这对于经过身份验证的用户来说很好，但我也希望能够存储匿名用户项目，并且如果可能的话，在他们最终注册和验证时将它们与用户相关联。

我的想法是创建 name = some_variable 的匿名用户（时间戳与随机哈希连接？），然后将该用户名保存在会话数据中。如果我确保该会话变量（如果存在）用于记录该用户的所有项目活动，我应该能够在用户注册时使用用户的真实凭据更新项目。

这是否过于复杂和脆弱？我是否冒着不必要地保存数千行数据的风险？这个常见问题的最佳方法是什么？

对此的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-18T18:50:35.807

您可以使用[Django 的会话框架](https://docs.djangoproject.com/en/1.4/topics/http/sessions/)来存储匿名用户数据。

然后，您可以在`Project`模型中添加一个字段来保存`session_key`匿名用户的值，

```
project = Project.objects.create(
    user=request.user,  # can be anonymous user
    session=request.session.session_key,
    product=form.cleaned_data["product"],
    quantity=form.cleaned_data["product_quantity"]) 
```

或者只是存储 Project 实例在会话中的所有数据

```
if user.is_authenticated():
    project = Project.objects.create(
        user=request.user,
        product=form.cleaned_data["product"],
        quantity=form.cleaned_data["product_quantity"])
else:
    # deal with anonymous user info
    request.session['project'] = {
        "product": form.cleaned_data["product"],
        "quantity": form.cleaned_Data["product_quantity"]} 
```

您可以稍后在创建适当的用户时从会话中检索数据。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T21:12:34.527

只是为了澄清，下面的代码是如何在我的案例中实现该解决方案：

```
 project = Project.objects.create(
            session=request.session.session_key,
            # save all other fields
            ...
        )
        if request.user.is_authenticated():
            project.user = request.user
        else:
            # make a copy of the session key
            # this is done because the session_key changes
            # on login/ register 
            request.session['key_copy'] = request.session.session_key
        project.save() 
```

在我的models.py中：

```
 class Project(models.Model):
     user = models.ForeignKey(User, null=True, blank=True)
     ... 
```

所以用户字段可以为空，在这种情况下，我们使用 session_key 来跟踪事物。

# prolog - prolog 中的子集函数

> ID：13938813
> 
> 赞同：1
> 
> 时间：2012-12-18T18:02:06.890
> 
> 标签：prolog

我正在编写一个子集函数，并且我已经成功地做到了。这是我实现成员函数的函数：

```
 member( X, [ X | T ] ).
 member( X, [ _ | T ] ) :- member( X, T ).

 subset([], _).
 subset([H|T1], T2) :-
    member(H, T2),
    subset(T1, T2). 
 subset([H1|T1], [H2|T2]) :-
    \+ member(H1, T2),
    subset([H1|T1], T2). 
```

我的问题是，有没有更好的方法来使用成员函数来编写这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:14:42.890

的第三个条款`subset/3`没有意义，我认为应该删除它。如果`H1`不是 的成员`T2`，那么递归调用`subset([H1|T1], T2)`显然也不会成功。

除此之外，前两个子句似乎是要走的路。

# xslt - 清理用户提供的 XSLT

> ID：13938817
> 
> 赞同：4
> 
> 时间：2012-12-18T18:02:19.713
> 
> 标签：xslt, xss, saxon

我们有一个应用程序，它使用 XSLT 格式化 XML 数据以显示为 XHTML。

系统能够处理任意 XML 模式，因此系统用户需要上传 Schema 和 XSLT。显然，这是一项只允许管理员级别用户执行的任务，但它也是一个相当大的靶心，所以我试图让它更安全。

我应该提到我们正在使用 Saxon 9.0 B

是否有任何标准方法来清理用户提供的 XSLT？到目前为止，我已经确定了三个可能的问题，尽管我意识到可能还有更多我根本没有想到的问题：

1.  xsl:import 和 document() 函数可以访问服务器文件系统。使用自定义 URI 解析器很容易锁定，所以我很有信心我已经涵盖了这个

2.  输出可以包含 javascript。我正在考虑使用类似 OWASP Anti-Samy 的东西来将允许的输出标签列入白名单。

3.  XSLT 可以调用 java 函数。这是目前让我头疼的一个。我不想完全关闭该功能（尽管目前我什至看不到如何做到这一点），因为我们正在使用它。我首选的解决方案是能够锁定可接受的 java 命名空间，以便只能执行已知的安全函数。不过，我对其他建议持开放态度。

黄金标准将是一个标准库，它只处理所有已知的基于 XSLT 的漏洞，但是如果没有任何关于解决上面列出的问题（尤其是 3）的建议将非常受欢迎。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:44:16.507

Saxon 有一个配置选项来禁用“反身”（动态加载）扩展功能的使用。这不会阻止使用已通过 API 在配置中显式注册的“集成”扩展功能。这似乎满足了您允许服务提供者注册扩展功能，但不允许样式表作者这样做的要求。

如果您愿意，可以通过定义自己的 JavaExtensionFunctionFactory 来控制扩展函数调用的绑定方式，从而更具选择性。这是相当低级的系统编程，您可能需要研究源代码以查看需要覆盖哪些方法以满足您的需求。

除了 document()，还需要考虑 collection()、unparsed-text()、xsl:result-document。在所有情况下，都有允许您控制行为的撒克逊钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:56:16.093

**我不认为在服务器上上传和执行任何人的 XSLT 是明智的做法**。

有些事情是无法预防或检测的，例如拒绝服务攻击，例如：

1.  无休止的递归会耗尽所有可用内存并使服务器因堆栈溢出而崩溃。

2.  需要数分钟或数小时的转换——由于停止问题是无法确定的，我们不知道这是故意的永久循环，还是意外的程序员错误，或者可能会或可能不会收敛的计算。

当然还有很多其他的利用，比如引用一个递归定义的实体......

# mysql - mysql更新将重复项移动到不同的列

> ID：13938819
> 
> 赞同：2
> 
> 时间：2012-12-18T18:02:21.347
> 
> 标签：mysql

我有一个`contacts`包含列`index_id`, `name`, `address`, `phone1`, `phone2`,的表`phone3`。

由于多年来管理不善，484,097 行中有 212,019 行`phone1`不是唯一的。但是，每条记录都是唯一的记录。

我需要`phone1`独一无二，但我不想丢失 212k 记录。

`phone3`是一个对于每条记录都为空的新列。我的想法是我可以简单地搬进`VALUES(phone1)`*`phone3`

我试过这个查询不明白 ON DUPLICATE UPDATE 只会更新以前存在的记录。

```
insert into tmp select * from contacts
on duplicate key update phone3 = values(phone1); 
```

我尝试将*所有重复项移动到 phone3

```
update contacts 
set phone3 = phone1
where count(phone3) > 1; 
```

但这是对组功能的无效使用。

我认为这将需要一个子查询，这就是我开始感到困惑的地方。有什么建议吗？

*move 是指数据将不再在，`phone1`而是在`phone3`. 如`phone1 = NULL`和`phone3 = data`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:07:04.180

这会将所有重复的 phone1 移动到 phone3 列。对于有重复的每条记录，Phone1 将设置为 null：

```
UPDATE
  contacts c1 inner join (select phone1
                          from contacts
                          group by phone1
                          having count(*)>1) c2
  on c1.phone1=c2.phone1
SET
  c1.phone1=null, c1.phone3=c1.phone1 
```

# html - 课堂中的课堂，ie6中的错误

> ID：13938825
> 
> 赞同：1
> 
> 时间：2012-12-18T18:03:02.613
> 
> 标签：html, css, class, internet-explorer-6

我正在编写 HTML/css 代码并且在 IE6 中有一个特定的错误。

我想创建可变的 div，使用类：

例如（这只是示例，不是实际项目代码）

```
.top {width: 50px;}
.top.selected {background: #f00;}
.mid {width: 114px;}
.mid.selected {background: #0f0;}
.bot {width: 100px;}
.bot.selected {background: #0ff; color: #f00;}
...etc... 
```

因此，html 将类似于：

```
<div class='top selected'>1</div>
<div class='mid'>2</div>
<div class='bot selected'>3</div> 
```

这对程序员来说很棒，但它在 IE6 中不起作用:(

只有`.topselected {background: #f00;} // <div class='top topselected'>` ，但它真的很脏代码......也许有些有一些黑客？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:01:24.827

似乎去这里的方法是创建更多的语义类名，然后将它们拆分如下：

```
.highlighted { background: #0f0; }
.wide { width: 114px; }
/* etc... */ 
```

然后您拥有的 html 将运行良好，并且 IMO 更易于维护。

# jquery - jquery找不到具有动态数据标题的元素

> ID：13938826
> 
> 赞同：0
> 
> 时间：2012-12-18T18:03:03.257
> 
> 标签：jquery, html, find, arabic

我仍在尝试[Find-an-element-using-jquery-with-a-kind-of-regex-comparison-in-the-data-title](https://stackoverflow.com/questions/13894719/find-an-element-using-jquery-with-a-kind-of-regex-comparison-in-the-data-title#comment19143642_13894719)，其中我有`div`s 类`.textbox`和动态生成的数据标题。所以我想找到具有特定数据标题的框，这是建议的代码，没有错误：

```
var $theboxes = $(".textbox[data-title^='"+dt+"']"); 
```

然而，它似乎并没有真正找到任何`.textbox`，即使它们确实存在。因为每当我尝试时`$theboxes.length`，它总是`0`。

顺便说一下，这是一个数据标题的例子：`en_Person_Title/ لقب`. 所以斜线前是英语，斜线后是阿拉伯语。而且我有多个具有相同数据标题属性的文本框，但代码没有找到它们中的任何一个。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:20:28.310

“我试过 *= 但没有差异。”

`^=`搜索 Starts With.... 它**区分大小写**。

[http://jsfiddle.net/BnQnV/1/](http://jsfiddle.net/BnQnV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:15:34.730

当您使用 jquery 选择元素时，它只选择运行该代码时存在的元素。如果您动态添加更多元素或修改元素以使该选择器可以选择它们，则需要重新选择它们。

```
var $theboxes = $(".textbox[data-title^='"+dt+"']");
console.log($theboxes.length); // 0

$(".textbox:not([data-title])").first().attr("data-title",dt+"foobar");
console.log($theboxes.length); // 0

$theboxes = $(".textbox[data-title^='"+dt+"']");
console.log($theboxes.length); // 1 
```

# c++ - 将 async 与多态成员函数一起使用

> ID：13938827
> 
> 赞同：1
> 
> 时间：2012-12-18T18:03:03.723
> 
> 标签：c++, design-patterns, asynchronous, c++11, observer-pattern

尝试创建异步观察者模式会导致编译器错误 C3867，我不知道如何解决它。示例代码片段如下

```
class Subject;

class Observer
{
public:
    virtual void notify(Subject* s) = 0;
    virtual ~Observer() {};
};

class Subject
{
    std::map<std::string, Observer *> observers;
protected:
    void notify_observers()
    {
        std::map<std::string, Observer *>::iterator iter;
        for (iter = observers.begin(); iter != observers.end(); ++iter) {
            void (Observer::*notify)(Subject *) = iter->second->notify;
            std::async(std::launch::async, notify, this);
        }
    }

public:
    virtual ~Subject() {};
    void observer(std::string id, Observer* o)
    {
        observers[id] = o;
    }
};

template<typename Iter, typename type>
class Sort : public Observer {
public:
    virtual void notify(Subject* s)
    {
        TestSort<Iter> *a;
        a = dynamic_cast<TestSort<Iter> *>(s);
        std::vector<type> temp(a->beg(), a->end());

        sort(temp->beg(), temp->end());
    }
};

template<typename Iter, typename type>
class InsertionSort : public Sort<Iter, type>
{
    void sort(Iter beg, Iter end) {
        for (Iter i = beg; i != end; ++i)
            std::rotate(std::upper_bound(beg, i, *i), i, i+1);
    }

};
int main ()
{
    std::vector<double> data(100);
    std::generate(data.begin(), data.end(), [](){return rand() % 500;} ); 
    auto ts = TestSort<std::vector<double>::iterator >(data.begin(), data.end());

    auto is = new InsertionSort<std::vector<double>::iterator, double >();
    //.................
    ts.observer("InsertionSort", is);
    //.........................
    ts.Triggerd();
    return 0;
} 
```

虽然我理解错误

```
 error C3867: 'Observer::notify': function call missing argument list; use '&Observer::notify' to create a pointer to member 
```

然而在这种情况下，我无法弄清楚如何解决它。

在这种情况下，如果 notify 将是一个简单的可添加成员函数，而不是

```
void (Observer::*notify)(Subject *) = iter->second->notify; 
```

我本可以简单地写

```
void (Observer::*notify)(Subject *) = &Observer::notify; 
```

但是 notify 是一个多态函数，我无法在编译时处理正确的函数。

请建议我应该如何处理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:08:01.453

您无需在编译时找出正确的函数，就像您不必为常规的虚函数调用找出正确的函数一样。只需使用`&Observer::notify`. 正确的函数是在*调用*时选择的，而不是在获取其地址时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:49:36.753

改变：

```
void (Observer::*notify)(Subject *) = iter->second->notify;
std::async(std::launch::async, notify, this); 
```

至：

```
void (Observer::*notify)(Subject *) = &Observer::notify;
std::async(std::launch::async, std::mem_fun(notify), iter->second, this); 
```

当你调用一个方法时，你需要指向实例的指针和参数。标准语法是`rettype retval = instance->method(arg);`，但`std::mem_fun`会返回一个你可以使用的仿函数`rettype retval = std::mem_fun(&InstanceType::method)(instance, arg);`——它使`this`传递给成员函数的隐式指针显式。

从一个指向`virtual`方法的指针，加上一个对象指针，就可以确定你应该调用`std::mem_fun`哪个方法的实例。`virtual`

类似的事情可以用 a`bind`或 lambda 来完成。这是使用 lambda 语法的大致等效调用：

```
 Observer* observer = iter->second;
 std::async(std::launch::async, [observer,this]() { observer->notify(this); } ); 
```

请参阅下面的评论：您不必使用`std::mem_fun`，`async`会为您使用。您仍然必须将成员函数的实例指针作为下一个参数传递。

# sparql - 如何使用 SPARQL 和 dbpedia 在个人维基百科页面上提取所有超链接人员的列表

> ID：13938828
> 
> 赞同：1
> 
> 时间：2012-12-18T18:03:07.383
> 
> 标签：sparql, dbpedia

我想拉出与维基百科上另一个人有链接的所有“人”的列表。

例如，乔治 HW 布什在他的传记中有这样一句话：

```
"Bush was born in Milton, Massachusetts, to Senator 
Prescott Bush and Dorothy Walker Bush." 
```

现在 Dorothy Bush 被超链接到她自己的页面。我可以得到一个如下所示的列表：

```
George H. W. Bush | Dorothy Walker Bush
George H. W. Bush | Babe Ruth
George H. W. Bush | Bill Clinton 
```

并扩展这个..为维基百科上的每个人？我显然必须将其分解为小块才能输出，但我只是不确定如何编写代码以仅选择链接的人。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T02:33:19.297

一种开始方法是简单地搜索类型为 Person 的已连接资源。您可以使用[dbpedia 的基于 Web 的查询表单](http://dbpedia.org/sparql)。

```
SELECT ?person1 ?p ?person2
WHERE { 
   ?person1 ?p ?person2\. 
   ?person1 a foaf:Person. 
   ?person2 a foaf:Person.
}
ORDER BY ?person1
LIMIT 10
OFFSET 0 
```

`ORDER BY`您可以通过使用关键字并迭代之后的值`OFFSET`（例如，10、20、30，...）来“将此数据拆分为块” 。您应该保存这些单独查询的所有结果，然后将它们组合起来以获得完整结果。

如果您只是在 dbpedia 上寻找特定类型的人际关系，以下查询将为您提供用于连接两个人的所有属性。

```
SELECT DISTINCT ?p
WHERE { 
   ?person1 ?p ?person2\. 
   ?person1 a foaf:Person. 
   ?person2 a foaf:Person.
} 
```

选择其中一个或几个属性，例如。`http://dbpedia.org/property/married`，并使用以下查询获取与此属性相关的人员列表。

```
SELECT ?person1 ?person2
WHERE { 
   ?person1 <http://dbpedia.org/property/married> ?person2\. 
   ?person1 a foaf:Person. 
   ?person2 a foaf:Person.
}
ORDER BY ?person1
LIMIT 10
OFFSET 0 
```

正如您将自己看到的那样，dbpedia 上的属性使用非常多样化，因此可能需要一些努力才能获得您想要的。

希望这有助于作为一个起点。

# algorithm - 在第 N 层二叉树中找到第 k 个节点

> ID：13938830
> 
> 赞同：4
> 
> 时间：2012-12-18T18:03:08.920
> 
> 标签：algorithm, binary-tree

> **可能重复：**
> [堆树中的第 K 个元素](https://stackoverflow.com/questions/13846585/k-th-element-in-a-heap-tree)

给定一棵二叉树，如果 parent 为 0，则左孩子为 0，右孩子为 1。如果 parent 为 1，则左孩子为 1，右孩子为 0。树的根为 0。找到第 k 个节点值存在于第 N 级

我试图以这种方式解决。假设第一级有`0`，第二级有`01`，第三级有 `01 - 10`（即前半部分的补码）。
同样`0110 1001`在第四层。

现在我如何概括这个解决方案或任何其他方式来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:09:12.543

^(为了概括您的想法，您可以编写一个递归过程，给出树的第n)级元素的列表，因为（如您所说）每个级别都可以通过连接上层及其补码获得：

```
getLevel(level)

  if level == 0
    return [0]

  upperLevel = getLevel(level - 1)

  return upperLevel + complement(upperLevel) 
```

列表在哪里`[...]`，是列表和更改的`+`串联，反之亦然。`complement``0``1`

有了这个，您只需要获取由生成的列表的`k`^(第 th)元素`getLevel(n)`。

这可能不是最佳解决方案，它只是建立在您的想法之上（而且很容易）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:54:18.123

我手动生成了前几位，得到了 0110100110010110。谷歌显示这是[Thue-Morse 序列](http://en.wikipedia.org/wiki/Thue%E2%80%93Morse_sequence)。OEIS 中的序列[A010060](http://oeis.org/A010060)。OEIS 页面上的评论有这一行：

a(n) = S2(n) mod 2，其中 S2(n) = n 的数字之和，n 以 2 为底表示法。

这`n`是您的情况`k`，而`N`您的情况无关紧要。因此，要确定 a(n) 计算 1 的数量`n`，并取该总和的最低有效位。

# python - 化学和系数的排序元组

> ID：13938833
> 
> 赞同：1
> 
> 时间：2012-12-18T18:03:13.563
> 
> 标签：python

> **可能重复：**
> [如何对列表/元组进行排序（列表/元组）？](https://stackoverflow.com/questions/3121979/how-to-sort-list-tuple-of-lists-tuples)

我有一个元组列表，我想按元组中的第二个值按数字顺序排序。我正在使用的列表示例是：

```
[('H2O', '6'), ('O2', '4')] 
```

所以在这种情况下我想要的是：

```
[('O2','4'),('H2O',6')] 
```

我知道这真的很基本，我似乎可以弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:07:14.353

使用 的`key`参数`sort`：

```
mylist.sort(key = lambda x: int(x[1])) 
```

这会将元组中的第二个元素转换为整数，并按这些整数排序。

由于您的元组在第二个元素中包含数字，因此将数字存储在元组中而不是字符串中更有意义。如果这样做，您可以使用以下命令进行排序：

```
import operator
mylist.sort(key = operator.itemgetter(1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:06:20.547

```
>>> l = [('H2O', '6'), ('O2', '4')]
>>> l.sort(key = lambda x: int(x[1]))
>>> l
[('O2', '4'), ('H2O', '6')] 
```

`sort`方法`in-place`进行排序，因此修改您的`list`.

您还可以使用`sorted`函数，它返回排序后的列表，同时保持原始列表不变。

```
>>> sorted(l, key=lambda x: int(x[1]))
[('O2', '4'), ('H2O', '6')]
>>> l
[('H2O', '6'), ('O2', '4')]  # Original list unmodified 
```

`sorted`如果我们想遍历排序列表，我们经常使用函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T18:06:05.430

您需要使用（或）的`key`参数。它是一个传递可迭代对象的每个元素（在本例中为每个元组）的函数。`sort`[`sorted`](http://docs.python.org/2/library/functions.html#sorted)

你可以使用[`operator.itemgetter`](http://docs.python.org/2/library/operator.html#operator.itemgetter)...

```
In [1]: import operator

In [2]: chem = [('H2O', '6'), ('O2', '4')]

In [3]: sorted(chem, key=operator.itemgetter(1))
Out[3]: [('O2', '4'), ('H2O', '6')] 
```

或一个简单的功能：

```
In [4]: sorted(chem, key=lambda x: x[1])
Out[4]: [('O2', '4'), ('H2O', '6')] 
```

编辑：[interjay 是对](https://stackoverflow.com/a/13938893/1258041)的：最好将第二项转换为数字：

```
sorted(chem, key=lambda x: int(x[1])) 
```

否则，它们将按字母顺序排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:14:16.027

你必须首先`import operator` 现在使用`key`参数来`list.sort()`：

```
list.sort(key=lambda x: x[1]) 
```

为了更快，

```
list.sort(key=operator.itemgetter(1)) 
```

# jquery - 在 JQuery Mobile 中设置背景图像

> ID：13938837
> 
> 赞同：0
> 
> 时间：2012-12-18T18:03:30.840
> 
> 标签：jquery, html, css, mobile

我正在尝试设置背景图像，但 JQuery 移动 CSS 似乎覆盖了我的 CSS，我尝试了以下解决方案，但它仍然无法正常工作。

```
body {
  height: 100%;
  background-image: url('ProjectImages/logoLong.png');
  background-size: cover;
}

.ui-page { 
  background: transparent;
}

.ui-content{
    background: transparent;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:34:59.077

试试[!important](http://www.css-hack.de/CSS+allgemein/!+important)关键字，这样你的新颜色/图像会更受欢迎

```
background-image: url('ProjectImages/logoLong.png')!important;
background-color: transparent!important; 
```

# parsing - 解析任意文本以生成依赖图

> ID：13938839
> 
> 赞同：1
> 
> 时间：2012-12-18T18:03:53.003
> 
> 标签：parsing, nlp, nltk, stanford-nlp, word-sense-disambiguation

如何为随机句子创建依赖图（解析树）。是否有任何预先确定的语法可以使用 nltk 解析英语句子。

例子：

我想为句子制作一个解析树

“一家大公司需要一个可持续的商业模式。” 应该是这样的。

![在此处输入图像描述](../Images/c98d40b9c423458f518ef4078fa584bb.png)

请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:24:06.280

这个问题与[3125926](https://stackoverflow.com/questions/3125926/does-nltk-have-a-tool-for-dependency-parsing)几乎重复。但我会详细说明那里给出的答案。

我没有在 NLTK 下进行依赖解析的个人经验，但根据接受的答案，与[MaltParser](http://www.maltparser.org/)的集成记录在[http://nltk.googlecode.com/svn/trunk/doc/api/nltk.parse.malt .MaltParser-class.html](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.parse.malt.MaltParser-class.html)

如果由于某种原因 MaltParser 不能满足您的需求，您也可以看看[MSTParser](http://sourceforge.net/projects/mstparser/)和[Stanford Parser](http://nlp.stanford.edu/software/lex-parser.shtml)。我认为这三个选项是最著名的，我希望其中一个（或全部）对您有用。

请注意，Stanford Parser 包括从选区树和几个标准依赖关系表示之间转换的例程，因此如果您需要特定格式，您可以查看`edu.stanford.nlp.trees.EnglishGrammaticalStructure`类的格式转换参数。

例如，从选区树转换为基本依赖项：

`java -cp stanford-parser.jar edu.stanford.nlp.trees.EnglishGrammaticalStructure -treeFile <input trees> -basic`

# javascript - requirejs 和 qunit 中的 javascript 作用域

> ID：13938845
> 
> 赞同：0
> 
> 时间：2012-12-18T18:04:15.083
> 
> 标签：javascript, unit-testing, requirejs, qunit, createjs

我一直试图弄清楚为什么这两个原型对象的范围有点古怪——第一个是我基于 PreloadJS 的预加载器，第二个是我的 QUnit 测试。我已经解决了这个问题，但我不小心删除了有人善意回应的原始线程，所以我重新发布了这个工作版本来感谢那个人

```
'use strict';

define(['preloadjs'], function (PreloadJS) {
    var Preloader = function (model) {
        this.model = model;
        this.totalLoaded = 0;
        this.context = model.context;
        this.isFinished = false;

        this.onStart = (model.onStart != null) ? model.onStart : function (e) {};
        this.onUpdate = (model.onUpdate != null) ? model.onUpdate : function (e) {};
        this.onComplete = (model.onComplete != null) ? model.onComplete : function (e) {};

        this.preload = null;

        // make sure assets exists
        if (model.assets == null) {
            model.assets = {};
        }

        this.init();
    };

    /**
     * initialise preloader
     * @return {null}
     */
    Preloader.prototype.init = function() {
        var self = this;

        var preload = new PreloadJS();
        if (this.onStart != null) { 
            this.onStart(); 
        }
        preload.onProgress = function (e) { self.onUpdate(e); };
        preload.onComplete = function (e) { self.handleComplete(e); };
        preload.onFileLoad = function (e) { self.onFileLoad(e); };
        preload.loadManifest(this.model.manifest);

        this.preload = preload;
    };

    Preloader.prototype.handleComplete = function(e) {
        this.isFinished = true;

        this.onComplete(e);
    };

    /**
     * called when each file in the manifest is loaded - if it's an image, 
     * create an image object and populate its properties
     * @param  {event} e    event object
     * @return {null}
     */
    Preloader.prototype.onFileLoad = function(e) {
        if (e.type == PreloadJS.IMAGE) {
            var self = this;

            var img = new Image();
            img.src = e.src;
            img.onload = function () { self.handleFileComplete(); };
            this.model.assets[e.id] = img;
        }
    };

    /**
     * iterates totalLoaded when each image has intialised
     * @return {null}
     */
    Preloader.prototype.handleFileComplete = function() {
        this.totalLoaded++;
    };

    // public interface
    return Preloader;
}); 
```

这是预加载器 QUnit 测试

```
'use strict';

define(function (require) {
    var Preloader = require('Preloader');

    var manifest = [
        { src : '../app/images/splash-screen.jpg', id : 'splash-screen' }
    ];

    var assets = {};

    var startFired = 0;
    var updateFired = 0;
    var completeFired = 0;

    var totalLoaded = 0;

    var scopetest = 'test';

    var loaded = 0;

    var pl = new Preloader({
        manifest : manifest,
        assets : assets, 
        onStart : function (e) {
            startFired++;
        },
        onUpdate : function (e) {
            updateFired++;

            totalLoaded = e.loaded;
        },
        onComplete : function (e) {
            completeFired++;

            // adding the unit tests into the onComplete function fixed the inconsistent test results i was getting
            test('Preloader tests', function () {
                expect(4);

                equal(startFired, 1, 'onStart was called once exactly');
                ok((updateFired > 0), 'onUpdate was called at least once. Total: ' + updateFired);
                equal(completeFired, 1, 'onComplete was called once exactly');
                notEqual(pl.model.assets['splash-screen'], undefined, 'there was at least one asset loaded: ' + pl.model.assets['splash-screen']);

            });

            QUnit.start();
        }
    });

    QUnit.stop();
}); 
```

感谢您的回复并为删除线程道歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:04:51.387

这个问题已经在 OP 中回答了 - 这是我的接受

# javascript - 在notepad++中使用正则表达式将整数添加到表项中的img src

> ID：13938846
> 
> 赞同：2
> 
> 时间：2012-12-18T18:04:15.953
> 
> 标签：javascript, html, regex

我有一张桌子，里面有很多物品，我想在所有这些物品中添加图像。看看我正在使用的代码。

```
<tr><td><img src=".jpg" width=100 height=100/></td></tr> 
```

现在我知道我可以手动输入每个图像的名称，但我正在使用 Notepadd++ 5.9.8 版学习正则表达式，并且我通常使用查找/替换功能来更新相同的代码段。我对简化解决方案的方法我认为我可以将图像从 1 一直编号到最后一张图像，并使用正则表达式插入 1,2,3... 使用上述代码片段的查找和替换。

我当然希望将结果添加到 .jpg 之前，并且它应该从第一项开始，从 1 开始，第二项从 2 开始，一直到最后一个表项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:10:24.167

这不是正则表达式可以做的事情。

我通常用excel做这些事情。在您希望号码所在的位置放置两个选项卡，然后将其粘贴到 excel 中：

```
<tr><td><img src="  1   .jpg" width=100 height=100/></td></tr>
<tr><td><img src="  2   .jpg" width=100 height=100/></td></tr> 
```

向下展开行，直到你有足够的数字 -

![在此处输入图像描述](../Images/2fdb87de7e6686832e842bca4df94e88.png)

然后只需将它们复制粘贴回 Notepad++ 并将所有选项卡 (\t) 替换为 null。

附言

将 Notepad++ 更新到最新版本，他们切换到更标准的正则表达式引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:19:03.500

例如，这在 js/html 中非常简单。

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        function OnLoad(){
            var text=0;
            for (var i=0; i<100; i++)
                text+= '<tr><td><img src="'+i+'.jpg" width=100 height=100/></td></tr>\n';

            document.getElementById("text").value= text;
            text='';
        };
        </script>
    </head>
    <body onload="OnLoad();">
        <textarea id="text" rows="30" cols="80"></textarea>
    </body>
<html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T18:19:15.787

这有点傻，但这是一种您可以直接在 Notepad++ 中执行此操作的方法。假设您有以下 HTML：

```
<tr><td><img src=".jpg" width=100 height=100/></td></tr>
<tr><td><img src=".jpg" width=100 height=100/></td></tr>
<tr><td><img src=".jpg" width=100 height=100/></td></tr> 
```

您可以做的是按住`Alt`并使用鼠标在部分中选择（并向下拖动）第一个引号和点之间的零字符列`src=".jpg`。这样做之后，您的屏幕应该看起来像这样（`|`代表光标）：

```
<tr><td><img src="|.jpg" width=100 height=100/></td></tr>
<tr><td><img src="|.jpg" width=100 height=100/></td></tr>
<tr><td><img src="|.jpg" width=100 height=100/></td></tr> 
```

现在转到`Edit -> Column Editor`，选择`Number to insert`，并给出初始值并增加值。点击`OK`，你应该看到插入的数字！嘘！

```
<tr><td><img src="1.jpg" width=100 height=100/></td></tr>
<tr><td><img src="2.jpg" width=100 height=100/></td></tr>
<tr><td><img src="3.jpg" width=100 height=100/></td></tr> 
```

但是等等，如果你有一位数和两位数，你会发现一个问题：有额外的空格！

```
...
<tr><td><img src="8 .jpg" width=100 height=100/></td></tr>
<tr><td><img src="9 .jpg" width=100 height=100/></td></tr>
<tr><td><img src="10.jpg" width=100 height=100/></td></tr>
<tr><td><img src="11.jpg" width=100 height=100/></td></tr>
... 
```

听起来像是 Regex 的工作。这是一个可行的方法（如果您想自己解决，请不要看）：

查找：`src="([0-9]+)\s+\.jpg` 替换：`src="$1\.jpg`

# java - 让应用程序在后台运行

> ID：13938847
> 
> 赞同：0
> 
> 时间：2012-12-18T18:04:26.593
> 
> 标签：java, android

我做了一个让屏幕保持清醒的应用程序，它工作正常，直到它被系统杀死。我怎样才能让我的应用程序在后台运行？我看到很多应用程序使用通知来保持运行并避免被杀死，但我不知道如何实现它。有人可以帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:29:00.993

您可以为此使用[服务](http://developer.android.com/reference/android/app/Service.html)API，特别是[startForeground(int, Notification)](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)函数调用。我链接到的 API 文档中提供了一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:55:31.053

[我认为Services](http://developer.android.com/guide/components/services.html)或[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)是您要寻找的，这取决于您要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T20:33:15.067

使用 Android[服务](http://developer.android.com/guide/components/services.html)。您可以使用以下方法：-

1.  要调用不返回任何值的服务，请使用 - [startService()](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)
2.  要调用返回值的服务，请使用 - [bindService()](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)

使用任何传感器在后台运行时要小心谨慎，因为它可能会快速耗尽电池电量

# ios - 不小心删除了我的 KeyChain Access 中的密钥，现在无法放入新的

> ID：13938857
> 
> 赞同：0
> 
> 时间：2012-12-18T18:04:54.643
> 
> 标签：ios, ios5, keychain

当我准备提交新的二进制文件时，我不小心删除了本地计算机上用于存档代码的 Keychain Access 中的密钥。

我正在尝试解决此问题的是转到我的 IOS 配置门户，然后单击左侧的已认证导航项，然后下载开发和生产证书。我确实下载了它们，然后将它们拖到 KeyChain 图标上，但我不确定它是否在做任何事情。

当我尝试存档代码时，我收到此错误：

```
Code Sign error: The identity 'iPhone Distribution: dist_name' doesn't match any valid, non-expired certificate/private key pair in your keychains 
```

知道为什么会发生这种情况以及如何解决吗？

编辑：

当我试图吊销我的生产证书时，系统说如果我这样做，我当前的实时应用程序将不再工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:06:36.377

已经有无数关于这个的帖子了。

发生这种情况时，最好的选择是从 SCRATCH 开始。删除所有配置文件并重新执行整个过程。

否则，您将被困在数小时内试图解决可能是您的问题，也可能不是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T16:01:28.417

我有同样的问题并且有一个简单的修复

缺少分发密钥和证书

我能够下载证书但无法获取密钥

要求我的团队成员导出他的分发证书和密钥。

为此，请选择密钥或证书并导出（钥匙串访问-> 文件-> 导出项目-> 保存在光盘上）。

系统将提示您输入密码，请记住密码以提取文件。文件将以扩展名 .p12 保存。

将.p12文件发送到其他需要安装的mac

固定的！！

* * *

# php - HTACCESS 子域到 WWW

> ID：13938858
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:04:58.200
> 
> 标签：php, .htaccess, http-status-code-301, forwarding

我知道那里有多个类似的问题，但没有一个能够解决我的问题。

我正在尝试将所有子域转发到 www。我尝试过的每个代码，我的浏览器都会不断响应，“Opps！找不到”。

这是我的 HTACCESS 文件的一部分，希望有人能够帮助我找到解决方案。同样，我目前没有任何子域设置。任何帮助将不胜感激。

```
Options +FollowSymlinks

RewriteEngine on
RewriteBase /

#
# Make sure the domain does use www.
RewriteCond %{HTTP_HOST} ^domain.ca [NC]
RewriteRule ^(.*)$ http://www.domain.ca/$1 [L,R=301] 

#
# Trailing slash check
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:08:26.127

> 我目前没有任何子域设置

如果未设置它们，则对它们的请求将收到 DNS 错误，并且永远不会靠近您的 Web 服务器。

你需要设置它们。

# c - 在 C 中运行时检测库功能

> ID：13938860
> 
> 赞同：6
> 
> 时间：2012-12-18T18:05:13.563
> 
> 标签：c, shared-libraries, lazy-loading, ld

我正在尝试用 C 构建一个程序，该程序具有许多依赖于各种共享库的可选功能。

在我们的异构计算集群中，并非所有这些库在所有系统上都可用（或最新）。

`sched_getcpu@@GLIBC_2.6`示例是来自较新 glibc ( , ) 或整个共享库的符号，`__sched_cpucount@@GLIBC_2.6`它们可能可用也可能不可用 ( `libnuma`, `libR`, `libpbs`)。

我知道我可以用and`libdl`来加载符号，但是对于越来越多的符号（目前大约 30 个）这样做充其量是乏味的。`dlopen``dlsym`

据我了解，Linux 中的共享库默认是延迟加载的，因此在实际使用之前不需要符号。

但是，如果我尝试提前检查，那么它在执行开始时会失败：

```
#define _GNU_SOURCE
#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>
#include <dlfcn.h>
#include <sched.h>

int main() {

    void *lib_handle;
    int (*fn)(void);
    int x;
    char *error;

    lib_handle = dlopen("libc.so.6", RTLD_LAZY);
    if (!lib_handle) 
    {
       fprintf(stderr, "%s\n", dlerror());
       exit(1);
    }

    fn = dlsym(lib_handle, "sched_getcpu");
    if ((error = dlerror()) != NULL)  
    {
       fprintf(stderr, "%s\n", error);
       exit(1);
    }

    printf("%d\n", sched_getcpu());

    return 0;
} 
```

在具有所有库的编译系统上：

```
$ icc test.c
$ ./a.out
10 
```

在另一个具有较新版本 GLIBC 的系统上：

```
$ ./a.out 
./a.out: /lib64/libc.so.6: version `GLIBC_2.6' not found (required by ./a.out) 
```

如果我注释掉实际调用的行，`sched_getcpu`那么我会在较小的系统上得到：

```
$ ./a.out 
/lib64/libc.so.6: undefined symbol: sched_getcpu 
```

那么，有没有办法强制库仅在使用时加载并在使用它们的块之前进行此类检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:19:58.253

不使用 glibc。这是一个故障保险装置，它已经到位，这样你就不会在脚上开枪了。如果`GLIBC_2.6`没有定义和查找符号，即使没有其他丢失的符号，您也可能会从 glibc（数据损坏和崩溃）中得到垃圾结果，因为它不向前兼容。

如果您需要 glibc 级别的兼容性，则需要针对最低通用版本进行构建。

# jquery - AJAX 表单提交和刷新

> ID：13938861
> 
> 赞同：1
> 
> 时间：2012-12-18T18:05:22.307
> 
> 标签：jquery, ajax

我有一个表单，更新时需要从 AJAX 提取新数据。我构建了一个函数，当 AJAX 能够访问数据时输出成功：

```
$(document).ready(function() {

    var results = $('#hidden').serialize();

    var url = 'index.php?option=com_mls&view=list&format=raw&' + results;

    $('#test').html(url);

    $.ajax({
        url: url,
        success: function(){
            alert('success');
        },
        error: function(){
            alert('There was an error loading your request.  <br />Please try again later.');
        }
    });
}); 
```

这已经过测试并且有效。我遇到的问题是在尝试提交用户表单时，设置了一个包含新数据的 AJAX 函数。我试过这个无济于事：

```
$(document).ready(function() {

    function runQuery(){  

        var results = $('#hidden').serialize();

        var url = 'index.php?option=com_mls&view=list&format=raw&' + results;

        $('#test').html(url);

        $.ajax({
            url: url,
            success: function(){
                alert('success');
            },
            error: function(){
                alert('There was an error loading your request.  <br />Please try again later.');
            }
        });
    };  

    runQuery();

}); 
```

它没有运行该`runQuery();`功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:08:44.353

它应该是

```
$(document).ready(function() {    
    runQuery();
});

function runQuery(){  

        var results = $('#hidden').serialize();

        var url = 'index.php?option=com_mls&view=list&format=raw&' + results;

        $('#test').html(url);

        $.ajax({
            url: url,
            success: function(){
                alert('success');
            },
            error: function(){
                alert('There was an error loading your request.  <br />Please try again later.');
            }
        });
    }; 
```

# java - 避免 instanceof - 不可修改的类

> ID：13938864
> 
> 赞同：0
> 
> 时间：2012-12-18T18:05:33.657
> 
> 标签：java, instanceof

假设我有两个类`A`和`B`这样`B extends A`，分别实现方法`getA`并且`getB`具有相同的输入参数类型和相同的返回类型（但名称不同）。在将 or 类型的对象作为输入的方法中，如果对象是类型或`public static <T extends A> void print(T t)`对象是`A`类型，`B`我想调用。`getA``A``getB``B`

如果我可以编辑 and 的代码，`A`我`B`会让它们实现一个接口`I`提供（在and`getValue()`的实现中，将分别调用 getA() 和 getB()），然后从. 问题是：**A 类和 B 类不可修改！**. 不能添加或更改任何方法，它们的类层次结构是固定的，我没有编写它们的代码，也无权访问源代码。`A``B``getValue()``print()`

 **请注意，这也适用于 - 出于任何原因 - 我不想更改`A`and的代码的情况`B`。

有没有不使用的方法`instanceof`呢？

下面是一个使用`instanceof`（糟糕！）的解决方案。

```
public class Test {

    public static <T extends A> void print(T t){
        if (t instanceof B)
            System.out.println(((B)t).getB());
        else if (t instanceof A)
            System.out.println(t.getA());
    }

    public static class A {
        public String getA(){
            return "A";
        }
    }
    public static class B extends A {
        public String getB(){
            return "B";
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:14:04.497

当您出于某种原因无法访问原始代码时，您最终不得不求助于诸如 instanceof 之类的东西。在这些情况下，这本身并不坏——你的双手被束缚了。

我要做的是创建一个在你的 T 上通用的包装类，按照你的建议给它一个`getValue`测试`instanceof`，并明确说明*这个类存在的唯一原因*是提供一个一致的接口来使用 A 或A B. 它仍然很恶心，但你已经把恶心控制在了一个地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:22:18.240

为了扩展[马特的回答](https://stackoverflow.com/a/13938984/474189)，我会考虑为这些类采用[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)。这意味着您创建一个单独的类（或两个）来包装这两个类所需的*所有功能。*正如马特建议的那样，这包括添加一个方法。

好处是您将应用程序与您无法控制的 API 分离。如果您不需要原始库中的所有方法，您还有机会简化 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:09:19.983

谢谢你和@Matt。猜猜这绝对是最干净的方法。将提供不使用 instanceof 的完整代码：

```
public static void main(String[] args){
    A a = new A();
    B b = new B();
    AWrapper aw = new AWrapper(a);
    BWrapper bw = new BWrapper(b);
    print(aw);
    print(bw);
}

public static void print(Wrapper t){
    System.out.println(t.getValue());
}

public static class A {
    public String getA(){
        return "A";
    }
}
public static class B extends A {
    public String getB(){
        return "B";
    }
}

public static interface Wrapper{
    public String getValue();
}

public static class AWrapper implements Wrapper{
    A a;
    public AWrapper (A a){
        this.a = a;
    }
    public String getValue(){
        return a.getA();
    }
}

public static class BWrapper implements Wrapper{
    B b;
    public BWrapper (B b){
        this.b = b;
    }
    public String getValue(){
        return b.getB();
    }
} 
```**

# android - Android ViewFlipper 作为菜单中的幻灯片

> ID：13938865
> 
> 赞同：3
> 
> 时间：2012-12-18T18:05:34.637
> 
> 标签：android, viewflipper

我正在尝试使用具有 2 个布局的 ViewFlipper 为 Android 应用程序制作一个幻灯片菜单，1 个作为菜单，1 个作为内容。当触摸内容布局中的按钮时，菜单应从左侧滑入并覆盖 80% 的屏幕。我现在这样做的方式是让菜单滑入 80%，然后在动画之后显示 100% 的菜单。关于如何使这项工作的任何想法？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <ViewFlipper android:id="@+id/viewflipper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">   
<!-- content -->
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
                <Button android:id="@+id/bt_test"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="slide"/>
            <TextView android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="hello"/>
        </LinearLayout>
<!-- menu -->
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        </LinearLayout>
    </ViewFlipper>
</LinearLayout> 
```

动画：出：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="80%" android:duration="500"/>
</set> 
```

在：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="-100%" android:toXDelta="-20%" android:duration="500"/>
</set> 
```

点击：

```
 flipper.setInAnimation(MainActivity.this, R.anim.slide_in);
            flipper.setOutAnimation(MainActivity.this, R.anim.slide_out);
            flipper.showNext(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:30:24.783

改用这个优秀的库项目。没有必要重新发明轮子。

至少您可以查看使用的技术，因为所有源代码都可用。

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

[https://play.google.com/store/apps/details?id=com.slidingmenu.example](https://play.google.com/store/apps/details?id=com.slidingmenu.example)

# c# - 在 Asp.Net 中使用 Keyup 事件调用服务器端函数

> ID：13938867
> 
> 赞同：0
> 
> 时间：2012-12-18T18:05:38.627
> 
> 标签：c#, asp.net

我有一个文本框，我想在文本框中捕获`Keyup`文本框并在文件后面的代码中获取文本框值，并将 GridView 与从文本框接收的输入绑定。

我不想使用`Text_Change`Asp.net 的事件。我希望当用户在 TextBox 中输入任何内容时，该值应该转到后面的代码并通过调用`BindGrid`Function来绑定网格

```
<asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>

protected void BindGrid(string searchvalue)
{    
    //  i want the txtSearch value over here.    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:11:09.453

您需要使用 asp.net ajax。将按钮和网格放入[**UpdatePanel**](http://www.asp.net/ajax/documentation/live/overview/updatepaneloverview.aspx)将在按钮单击绑定后更新网格视图。

*在 html 中*

```
<asp:UpdatePanel runat="server" ID="updatePanel">
<asp:TextBox runat="server" ID="search"  
                ClientIDMode="Static" OnKeyUp="refreshPanel(this);" /> 
```

*在 JavaScript 中*

```
function refreshPanel(textbox) {
     alert(this.value)
    __doPostBack('<%= updatePanel.UniqueID %>', this.value);
} 
```

*在后面的代码中*

```
 string parameter = Request["__EVENTARGUMENT"]; 
```

# amazon-web-services - Glacier 备份的到期日期

> ID：13938868
> 
> 赞同：7
> 
> 时间：2012-12-18T18:05:44.973
> 
> 标签：amazon-web-services, amazon-glacier

有没有办法在 Amazon Glacier 中设置到期日期？我想复制每周备份文件，但我不想保留超过 1 年的价值。

一年后可以将文件设置为“过期”，还是我必须手动执行此操作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T17:14:51.383

[虽然在Amazon Glacier](http://aws.amazon.com/glacier/)中本机不可用，但 AWS 最近启用[了将 Amazon S3 数据存档到 Amazon Glacier](http://aws.typepad.com/aws/2012/11/archive-s3-to-glacier.html)，这首先使使用 Glacier 变得更加容易：

> [...] Amazon S3 专为快速检索而设计。相比之下，Glacier 以检索时间换取成本，以每月每 GB 0.01 美元的价格提供存储，同时在三到五个小时内检索数据。
> 
> 您希望如何两全其美？如何快速检索存储在 S3 中的新数据，通过自动、**策略驱动的归档以随着数据老化而降低成本 Glacier 存储**，以及轻松的、API 驱动或控制台驱动的检索？*[强调我的]*
> 
> [...] 您现在可以使用 Amazon Glacier 作为 Amazon S3 的存储选项。

这是通过促进 Amazon S3[对象生命周期管理](http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html)实现的，它不仅驱动提到的[对象存档（将对象转换为 Glacier 存储类）](http://docs.aws.amazon.com/AmazonS3/latest/dev/object-archival.html)，还包括可选的[对象过期](http://docs.aws.amazon.com/AmazonS3/latest/dev/ObjectExpiration.html)，它允许您实现您想要的，如*您决定之前部分中所述使*[生命周期配置规则](http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html#intro-lifecycle-rules)中*的对象过期*：

> *   Expiration 操作删除对象
>     您可能在 Amazon S3 中有对象或存档到 Amazon Glacier。**无论这些对象在哪里，Amazon S3 都会删除它们。**您将无法再访问这些对象。*[强调我的]*

因此，只需将您的对象在 S3 中存储一小段时间（由于无需管理档案/库存，这实际上大大简化了 Glacier 的工作），您就可以获得可选的自动过期的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-29T23:43:36.343

您可以在 AWS 命令​​行界面中执行此操作。 [http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html)

# c# - 安装 SQL Server 的 C# 应用程序

> ID：13938871
> 
> 赞同：1
> 
> 时间：2012-12-18T18:05:54.040
> 
> 标签：c#, visual-studio-2008, installation, sql-server-2008-express

我正在尝试在装有 Windows Vista 的 VMWare 机器上安装我的 C# 应用程序，PC 完全干净。安装工作正常，除了最后一部分，当 SQL Server 2008 Express 尝试安装时，将触发一个转换为 .exe 的批处理，以创建数据库。那时它说它出现错误，我在我的 C# 应用程序中使用设置和部署制作了这个安装程序。我不知道是否有任何方法可以查看我做错了什么，所以也许你们中的一个人知道..

提前致谢

编辑：

这是我在安装结束时执行的代码，它由 .exe sqlcmd -S .\SQLEXPRESS -i "script.sql" 执行

# character-encoding - 确定文本文件的编码

> ID：13938874
> 
> 赞同：0
> 
> 时间：2012-12-18T18:06:01.810
> 
> 标签：character-encoding

我有一个 txt 文件，我正在尝试确定其编码。我在 Firefox 中打开它并单击查看-> 字符编码，它显示 ISO-8859-1。如果我在记事本或记事本++中打开它，它会显示 ANSI。

所以我现在很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:30:44.923

ANSI 和 ISO-8859-1 都是 Windows-1252 的常见错误标签。如果字符看起来正确，则文件以 Windows-1252 编码。

请注意，ISO-8859-1 是真正的编码（ANSI 根本不是编码），只是 Windows-1252 对 range 中的有用字符进行编码`0x80-0x9F`，否则在 ISO-8859-1 中会浪费这些字符。

# windows-phone-7 - 使用 Visual Studio Express 2012 本地化 Windows Phone 应用程序标题

> ID：13938876
> 
> 赞同：2
> 
> 时间：2012-12-18T18:06:06.020
> 
> 标签：windows-phone-7, localization, visual-studio-2012, windows-phone-8

我想本地化我的应用程序标题（在 windows Phone 7.1 上），所以我遵循了这个文档，它解释了如何使用 Visual Studio Express 创建 dll 和 mui 文件：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff967550(v=vs.105).aspx#WP_CreatingLanguageResourceStringsforYourApp](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff967550%28v=vs.105%29.aspx#WP_CreatingLanguageResourceStringsforYourApp)

我已经下载了语言中立的资源项目，但不幸的是我在构建时遇到了这个错误：

错误 RC1015：无法打开包含文件“afxres.h”

这似乎是 Visual Studio Express 的问题

正如一些论坛上提到的，我试图用#include "windows.h" 替换#include "afxres.h" 但这不起作用。（错误 LNK1181：无法打开输入文件 'gdi32.lib'）

有什么我错过了让这个项目工作的东西吗？

还有其他方法可以本地化我的应用标题吗？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:25:26.187

使用 WP7App Res Lib 生成器，它为您提供了艰苦的工作[http://engine-designs.com/wp7-appreslib-dll-generator.html](http://engine-designs.com/wp7-appreslib-dll-generator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T13:22:52.130

1.  将“include”afxres.h”替换为“include”winnt.rh”。
2.  删除项目选项卡中所有包含的库，属性 > 链接器 > 输入 > 附加依赖项。

# java - 多个不同父类引用的 JPA 子类

> ID：13938877
> 
> 赞同：4
> 
> 时间：2012-12-18T18:06:08.437
> 
> 标签：java, jpa, orm

我遇到了以下 ORM 问题：

我有两个 A 类和 B 类，它们都有一组 C 类：

```
class A {
  @Id
  @GeneratedValue
  private long id;

  @OneToMany
  private Set<C> cSet;
}

class B {
  @Id
  @GeneratedValue
  private long id;

  @OneToMany
  private Set<C> cSet;
}

class C {
  @Id
  @GeneratedValue
  private long id;
} 
```

我的一个想法是为 C 使用 MappedSuperclass，并有两个扩展类，每个类都在 A 或 B 中引用。但从面向对象的角度来看，这不是最好的方法，尽管我可以使用超类类型来工作跟他们。

有没有更好的方法来实现这个模型？

谢谢，本杰明

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T18:27:07.043

如果您不指定任何映射注释（即 JoinColumn 或 JoinTable），它将为每个关联使用一个连接表。

因此，您将拥有以下表格：

```
A : id
B : id
C : id
A_C : a_id, c_id (where c_id is unique)
B_C : a_id, c_id (where c_id is unique) 
```

如果使用 JoinColumn 注释来注释每个集合的替代方法：

```
class A {
    @OneToMany
    @JoinColumn(name = "a_id")
    private Set<C> cSet;
}

class B {
   @OneToMany
   @JoinColumn(name = "b_id")
   private Set<C> cSet;
} 
```

因此，您将拥有以下表格：

```
A : id
B : id
C : id, a_id, b_id 
```

这当然在[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-mapping)中有所描述。

# android - Android xml布局（带图）

> ID：13938882
> 
> 赞同：1
> 
> 时间：2012-12-18T18:06:30.360
> 
> 标签：android, xml, layout

我需要一些有关 Android 布局的帮助。我想要实现的是一个布局，其中灰色视图周围的视图随着屏幕尺寸的增长而增长，并且中间的视图始终居中。如果屏幕太小以至于触摸左右灰色视图的宽度应该为0...我制作了一个Imageviewer，灰色区域是图像，外部区域都有黑色背景。如果屏幕很小，图像应该与屏幕匹配。但如果它增长，图像不会缩放，但它周围的区域应该增长......我希望你明白我的意思。也许是带有水平布局的垂直线性布局？

谢谢你！

![例子](../Images/8641dbf7a9ebdfd898b9ad5013ac382b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:21:12.770

尝试这个：

1.  使用相对布局
2.  对中间（灰色）正方形使用固定尺寸，例如 400dp x 400dp
3.  使用 android:layout_centerInParent="true" 作为灰色方块
4.  将顶部定位在上方并且 alignParentTop=true,
5.  底部低于且 alilgnParentBottom = true
6.  left: toTheLeft 的中心和下方的顶部，上方的底部
7.  right: toTheRight of center, below top, above bottom

开始了：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:id="@+id/center"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_centerInParent="true"
        android:background="#343434" />
    <LinearLayout
        android:id="@+id/top"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/center"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="#ababab" />
    <LinearLayout
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/center"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/center"
        android:layout_toLeftOf="@+id/center"
        android:background="#cfcfcf" />
    <LinearLayout
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/left"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/left"
        android:layout_toRightOf="@+id/center"
        android:background="#cfcfcf" />
    <LinearLayout
        android:id="@+id/bottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/center"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        android:background="#ababab" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:24:23.490

您可以通过为各种屏幕尺寸设置尺寸来处理大小屏幕，例如：

值/尺寸.xml：

```
<resources>
    <dimen name="margin"0dp</dimen>
</resources> 
```

值-w480dp/dimens.xml：

```
<resources>
    <dimen name="margin"3dp</dimen>
</resources> 
```

值-w600dp/dimens.xml：

```
<resources>
    <dimen name="margin"6dp</dimen>
</resources> 
```

等等

现在您可以像这样在 ImageView 中设置边距：

```
android:layout_marginRight/Left="@dimen/margin" 
```

不要忘记将您的 ImageView 设置为

```
android:gravity="center" 
```

如果您的布局仅包含此 ImageView，那么您可以省略边距并将重力设置为中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:35:13.963

如果所有外部空间都只是像您所说的那样是黑色背景，那么为什么不只使用一个以 ImageView 为中心的 RelativeLayout ，并在所有设备上保持相同的 layout_width 和 layout_height 。将 RelativeLayout 设置为黑色背景。这种方式会表现得更好，而且真的，如果你想要的只是图像周围的黑色边框，你不需要担心在其他地方有实际的布局。只要您设置固定的宽度和高度并将其居中，它就应该按照您的意愿执行。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <ImageView
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_centerInParent="true"
        android:src="@drawable/apache" />
</RelativeLayout> 
```

像那样。或者，如果您想非常具体，我想使用“100px”..尽管不建议这样做。

# java - 写入文件而不删除当前数据

> ID：13938886
> 
> 赞同：7
> 
> 时间：2012-12-18T18:06:52.370
> 
> 标签：java, file-io

> **可能重复：** [java 附加到文件](https://stackoverflow.com/questions/369760/java-append-to-file) [如何将数据附加到文件？](https://stackoverflow.com/questions/6027764/how-to-append-data-to-a-file)

我想用java写一个文件而不清理（删除）旧数据

这是我的尝试，但当前数据将在写入新数据时被清理。

```
import java.io.*;

public class WriteToFileExample {

public static void main(String[] args) {
    try {
        String content = "New content to write to file";

        File file = new File("/mypath/filename.txt");

        // if file doesnt exists, then create it
        if (!file.exists())
            file.createNewFile();

        FileWriter fw = new FileWriter(file.getAbsoluteFile());
        BufferedWriter bw = new BufferedWriter(fw);
        bw.write(content);
        bw.close();

    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T18:09:27.363

使用[`FileWriter(String filename, boolean append)`](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)可以指示文件以附加模式打开的构造函数：

```
FileWriter fw = new FileWriter(file.getAbsoluteFile(), true);
                                                     //^^^^ means append 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T18:09:26.993

尝试

```
FileWriter fw = new FileWriter(file, true); 
```

注：第二个参数表示追加；不需要file.getAbsoluteFile()，只需File就可以了

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T18:13:28.003

以追加模式打开文件。像

```
PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("outfilename", true))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T18:11:47.207

FileWriter 接受一个布尔参数，指定是否覆盖。

试试这个 ：

```
FileWriter fw = new FileWriter(file.getAbsoluteFile(),true); 
```

还访问：

[http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)

# javascript - 在 Node.js 中创建 MongoDB 服务器并将其与 Mongoose 一起使用

> ID：13938891
> 
> 赞同：1
> 
> 时间：2012-12-18T18:07:07.207
> 
> 标签：javascript, node.js, mongodb, mongoose

有什么方法可以在 Node.JS 中创建和启动 MongoDB 服务器和数据库，并将 Mongoose 与该 MongoDB 服务器一起使用？我想租一个 VPS 并将它与 Node.JS 一起使用，但我不知道如何在 VPS 中同时运行 Node.JS 和 MongoDB 服务器。我只在我的 mac 中使用过 MongoDB 和 Node.JS。

PD：对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:13:52.390

也许您对 mongoDB 数据库和 Node.js 应用程序感到困惑。您不会在 Node.js 中运行 mongoDB，它们是两个不同的事物和进程。

首先，您必须在机器上运行一个 mongoDB 实例。 [这](http://ijonas.com/software-development/nosql/398/)只是一个在 Linux 服务器上将其作为服务运行的示例。

Node.js 是一个服务器端环境，除其他外，它可以连接到 mongoDB 实例以存储或检索数据。您还必须在服务器上安装它。

[Mongoose](http://mongoosejs.com/)是一个 Node.js 模块，它“调解”从 Node.js 应用程序到 MongoDB 的连接，并为您提供一组实用程序来与您的 mongo 数据库进行交互。

# scala - 玩！缺少类型 Promise 的框架

> ID：13938897
> 
> 赞同：4
> 
> 时间：2012-12-18T18:07:34.307
> 
> 标签：scala, playframework-2.0

我正在尝试获得我的第一个 Scala + Play！应用程序工作，我在尝试访问我的应用程序（在端口 9000 上）时遇到了这个问题：

```
not found: type Promise 
```

在这条线上：

```
val page: Promise[play.api.libs.ws.Response] = WS.url(googleApiUrl).get() 
```

这些是我的进口：

```
import play.api._
import play.api.mvc._
import play.api.libs.ws._
import play.api.libs.ws.Response
import play.api.http
import play.api.libs.concurrent._
import play.api.libs._ 
```

我在这里错过了什么吗？

这些是控制台上的日志：

```
sbt.PlayExceptions$CompilationException: Compilation error[not found: type Promise]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15$$anonfun$apply$16.apply(PlayReloader.scala:322) ~[na:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15$$anonfun$apply$16.apply(PlayReloader.scala:322) ~[na:na]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15.apply(PlayReloader.scala:322) ~[na:na]
    at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15.apply(PlayReloader.scala:319) ~[na:na]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:na] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:15:01.070

Play2.1 使用 Scala **Future**而不是玩**Promise**。

查看[迁移指南](http://play2-docs-snapshot.herokuapp.com/render/Migration)以获取更多信息，“Play 承诺成为 Scala 的未来”一章。

一个简单的例子给出了类似的东西：

```
import play.api._
import play.api.mvc._
import play.api.libs.ws._

import play.api.libs.concurrent._
import play.api.libs.concurrent.Execution.Implicits._

def myAction() = Action {
    Async {
        WS.url(googleApiUrl).get.map(response => Ok("what you want here"))
    }
} 
```

您可以通过更复杂的 WS api 使用来检查此[示例。](https://groups.google.com/forum/#!topic/play-framework/UylCl0mAa00)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:40:25.667

问题在于缺少导入：

```
import scala.concurrent._ 
```

# c# - 网站上的快速号码更新

> ID：13938903
> 
> 赞同：2
> 
> 时间：2012-12-18T18:07:56.053
> 
> 标签：c#, python, asp.net, web-services, perl

我想知道如何更新网站上的快速数字。

我有一台产生大量输出的机器，我需要在线展示它。但是我的问题是更新频率很高，因此我不确定如何处理它。

最好显示最后 N 个数字，比如 10。数字以 30Hz 更新。这对人眼来说可能太多了，但人眼在这里只是为了控制。

我想知道如何做到这一点。页面重新加载将使浏览器不断加载页面，对于网页来说，需要显示的不仅仅是这些数字。

我可能会生成一个原始 Web 引擎，通过特定的 IP 地址和端口号将数字写入页面，但即便如此，我想知道这个页面重新加载是否会太慢，给用户带来奇怪的体验。

我应该如何处理网站上如此极端的数据更新率？通常网站不是这样的。

在这个问题的标签中，我命名了我理解的语言。最后我可能会用 C# 编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:19:19.677

a) WebSockets 与 ajax 一起仅更新站点的一部分会起作用，缺点：客户端基础设施（代理）必须支持这些（目前 99% 的时间都不是这种情况）。

b) 对于现有的基础设施，方法是长轮询。您使用 javascript 创建一个 XmlHttpRequest。如果没有数据存在，请求会在服务器端被阻塞 5 到 10 秒。如果数据可用，您会立即回答请求。然后客户端立即发送一个新请求。我设法使用通过代理、http 连接到网络服务器的 java 客户端每秒获得 >500 次更新（显示实时股票数据）。您需要为每个请求捆绑多个更新以获得足够的吞吐量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:09:08.990

您不必使用页面重新加载。您可以使用 WebSockets 在浏览器（通过 JavaScript）和服务器之间建立开放的双向通信。

Python Tornado[支持](http://www.tornadoweb.org/documentation/websocket.html)这个内置的。此外，还有一些其他 Python 服务器支持它。[`Socket.IO`](http://socket.io/)是一个很棒的 JavaScript 库，带有后备功能，以方便客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:28:50.790

在后端，您可以使用 Redis 或像 VoltDB 这样的 NewSQL 数据库来快速更新内存数据库。缓存对高延迟组件有很大帮助（尤其是在写入繁重的应用程序中）。

在前端，您可以查看 websockets 和 Comet Web 应用程序模型[http://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29)

许多游戏公司必须处理快速的计数器更新和显示——这可能值得研究。Zynga 使用协议调用 AMF [http://highscalability.com/blog/2010/3/10/how-farmville-scales-the-follow-up.html](http://highscalability.com/blog/2010/3/10/how-farmville-scales-the-follow-up.html)

# ios - ios上的RSA解密

> ID：13938904
> 
> 赞同：2
> 
> 时间：2012-12-18T18:07:57.740
> 
> 标签：ios, encryption, rsa

我有两种 RSA 加密场景：

1.  由 c# 应用程序生成的密钥对。发送到 iOS 的公钥。iOS 应用程序使用密钥加密数据并将其发送回。c# 应用程序使用私钥解密。--- 完全实施和工作。

2.  ios 应用程序生成的密钥对。发送到 c# 应用程序的公钥。c# 应用程序对数据进行加密，base 64 对其进行编码并将其发送到 ios 应用程序。然后 ios 应用程序使用私钥解密数据。--- 不工作。

如果我使用在 ios 上生成的公钥和私钥对进行加密，则一切正常，但是一旦我用 c# 中的 base 64 编码字符串替换它，它就会失败。我已经尝试了所有填充组合。

代码如下：

```
 SecPadding padding = kSecPaddingPKCS1;
NSMutableArray *keys = [self generateRSAKeyWithKeySizeInBits:1024 publicKeyTag:@"RSA Public Key" privateKeyTag:@"RSA Private Key"];
SecKeyRef test_publicKey = (__bridge SecKeyRef)(keys[0]);
SecKeyRef test_privateKey = (__bridge SecKeyRef)(keys[1]);

const char *sampled_utf8 = "VnWBW/xRyJB48Uxjdl99apczCuS07zhnLvIjnqyZIQqbI4F7kyAezfD1MNlgeTefkHuCRuzogaQTamk2XRwXoBoGy3Agj4ocPK2Wa7vWNGip8X3FAo1eJL+xKoVoqre/ipDjnZNfEUbX91Ru+IqWkbZXD2POlFfuMaTatCl50+U=";

NSString *sampled = [[NSString alloc] initWithUTF8String:sampled_utf8];

Byte sampled_inputData [[sampled lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];//prepare a Byte[]
[[sampled dataUsingEncoding:NSUTF8StringEncoding] getBytes:sampled_inputData];//get the pointer of the data
size_t sampled_inputDataSize = (size_t)[sampled length];
size_t sampled_outputDataSize = EstimateBas64DecodedDataSize(sampled_inputDataSize);//calculate the decoded data size
Byte sampled_outputData[sampled_outputDataSize];//prepare a Byte[] for the decoded data
Base64DecodeData(sampled_inputData, sampled_inputDataSize, sampled_outputData, &sampled_outputDataSize);//decode the data
NSData *sampled_Data = [[NSData alloc] initWithBytes:sampled_outputData length:sampled_outputDataSize];//create a NSData

NSData *test_encrypted_Data = [self encryptString:encoded_toEncrypt RSAPublicKey:test_publicKey padding:padding];

size_t test_encrypted_inputDataSize = (size_t)[test_encrypted_Data length];
Byte *test_encrypted_inputData = (Byte*) malloc(test_encrypted_inputDataSize);
memcpy(test_encrypted_inputData,[test_encrypted_Data bytes],test_encrypted_inputDataSize);

size_t test_encrypted_outputDataSize = EstimateBas64EncodedDataSize(test_encrypted_inputDataSize);//calculate the encoded data size
char* test_encrypted_outputData[test_encrypted_outputDataSize];//prepare a char for the encoded data
Base64EncodeData(test_encrypted_inputData, test_encrypted_inputDataSize, test_encrypted_outputData, &test_encrypted_outputDataSize,false);//encode the data
NSData *test_encrypted_Encoded = [[NSData alloc] initWithBytes:test_encrypted_outputData length:test_encrypted_outputDataSize];//create a NSData object from the decoded data

size_t input_Size = (size_t)[test_encrypted_Encoded length];
Byte *input = (Byte*) malloc(input_Size);
memcpy(input,[test_encrypted_Encoded bytes],input_Size);
size_t output_Size = EstimateBas64DecodedDataSize(input_Size);
char* output[output_Size];
Base64DecodeData(input, input_Size, output, &output_Size);
NSData *res = [[NSData alloc] initWithBytes:output length:output_Size];

NSData *test_decryptedData = [self decryptString:sampled_Data RSAPrivateKey:test_privateKey padding:padding];

-(NSData*)decryptString:(NSData*)original RSAPrivateKey:(SecKeyRef)privateKey padding:  (SecPadding)padding
 {
 @try
 {

    const unsigned char* original_String = (unsigned char *)[original bytes];
    size_t decryptedLength = SecKeyGetBlockSize(privateKey);
    uint8_t decrypted[decryptedLength];

    OSStatus status = SecKeyDecrypt(privateKey,
                                    padding,
                                    original_String,
                                    [original length],
                                    decrypted,
                                    &decryptedLength);

    NSLog(@"result = %@", [self fetchStatus:status]);

    if(status == noErr)
    {
        NSData* decryptedData = [[NSData alloc] initWithBytes:(const void*)decrypted length:decryptedLength];
        return decryptedData;
    }
    else
        return nil;
}
@catch (NSException * e)
{
    //do nothing
    NSLog(@"exception: %@", [e reason]);
}
return nil;
}

- (NSData*)encryptString:(NSString*)original RSAPublicKey:(SecKeyRef)publicKey1 padding:(SecPadding)padding
{
 @try
 {

    Byte encrypt_inputData [[original lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];//prepare a Byte[]
    [[original dataUsingEncoding:NSUTF8StringEncoding] getBytes:encrypt_inputData];//get the pointer of the data
    size_t encrypt_inputDataSize = (size_t)[original length];
    size_t encrypt_outputDataSize = EstimateBas64DecodedDataSize(encrypt_inputDataSize);//calculate the decoded data size
    Byte encrypt_outputData[encrypt_outputDataSize];//prepare a Byte[] for the decoded data
    Base64DecodeData(encrypt_inputData, encrypt_inputDataSize, encrypt_outputData, &encrypt_outputDataSize);//decode the data
    NSData *encryption_Data = [[NSData alloc] initWithBytes:encrypt_outputData length:encrypt_outputDataSize];//create a NSData object from the decoded data

    size_t encryptedLength = SecKeyGetBlockSize(publicKey1);

    uint8_t* sample = (uint8_t*)[encryption_Data bytes];
    size_t text_Size = [encryption_Data length];
    uint8_t *encrypted_Data_Bytes;
    encrypted_Data_Bytes = malloc(sizeof(uint8_t)*encryptedLength);
    memset(encrypted_Data_Bytes,0,encryptedLength);
    OSStatus status = SecKeyEncrypt(publicKey1,
                                    padding,
                                    sample,
                                    text_Size,
                                    &encrypted_Data_Bytes[0],
                                    &encryptedLength);

    if(status == noErr)
    {
        NSData* encryptedData = [[NSData alloc] initWithBytes:(const void*)encrypted_Data_Bytes length:encryptedLength];
        return encryptedData;
    }
    else
        return nil;
}
@catch (NSException * e)
{
    //do nothing
    NSLog(@"exception: %@", [e reason]);
}
return nil;
} 
```

# analysis - 用例图中的用例太多 - 无法适应边界。有什么简化的方法吗？

> ID：13938906
> 
> 赞同：1
> 
> 时间：2012-12-18T18:08:01.687
> 
> 标签：analysis, uml, use-case

我是 UML 建模的新手，我正在创建这个用例并将用例概括为 4 个主要类别 - 添加信息、查看信息、编辑信息和删除信息。每个概括包含 6 个用例，因此总共提供了大约 28 个用例，很难将它们全部放在一个系统边界中，同时使其易于理解。有人可以建议请告诉我如何克服这个问题吗？

以下是我到目前为止所拥有的。我还没有添加 EditInformation 和 DeleteInformation，但我的空间已经用完了。

非常感谢

![用例图](../Images/5a62494bbdfc84b5a5b9eded81410cf2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:20:03.703

`Use-cases`是系统最高层行为的描述。您不应该纠缠于较低级别的细节。通常，一个系统不会超过几个用例。根据您的描述，您的实际`use-cases`是您分类的类别：`Add info`、`View info`和。更精细的细节如或属于相应的。`Edit info``Delete info``ViewCar``AddBooking``sequence/activity diagrams`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:26:58.577

您可以为自己设置最多可以在图表上放置多少人工制品的限制。例如，您可能会说所有图表在打印时都应适合某种标准页面格式。通常，目的不是将用例抽象到一个级别，使它们都适合一个图表，但不再显示任何附加值。你最终会看到一个太空火箭的用例图表，只说“发射航天器”。相反，尝试在高度抽象的级别上识别这些用例，然后在从属图表上将它们分解为更详细的用例。在大多数建模工具中，您可以在多个图表之间创建链接。如果您想阅读更多内容，我推荐 Alistair Cockburn 的用例标准书籍，ISBN 978-0201702255

# wordpress - RSS WordPress SimplePie 声称有效 URL 无效

> ID：13938908
> 
> 赞同：2
> 
> 时间：2012-12-18T18:08:10.877
> 
> 标签：wordpress, rss, simplepie

我正在尝试使用 Wordpress 的内置 SimplePie 加载 RSS 提要。

```
include_once(ABSPATH . WPINC . '/feed.php');
$rssURL = 'http://missionstkitts.blogspot.com//feeds/posts/default';
$rss = fetch_feed($rssURL); 
```

为了调试，我使用了 print_r($rss); 我得到一个 WordPress 错误对象：

```
WP_Error Object
(
    [errors] => Array
        (
            [simplepie-error] => Array
                (
                    [0] => WP HTTP Error: A valid URL was not provided.
                )

        )

    [error_data] => Array
        (
        )

) 
```

但是，令人沮丧的是，如果我打印 $rssURL 然后*复制并粘贴它，*它会直接进入正确的提要。到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-08T17:21:15.493

由于这是谷歌的第一次点击，可能值得我添加这个可能的解决方案：

对于我们的实例 - 一个 Intranet 站点，从另一个内部页面提取 rss 提要，该提要又解析为 RFC1918 私有地址，该提要因安全原因被 Wordpress 的 URL 检查器阻止。

在我的实例中，最简单的解决方法是将以下内容添加到 functions.php 中，但这确实具有安全隐患，因此请确保在添加之前了解它：

```
add_filter( 'http_request_args', function( $args ) {
   $args['reject_unsafe_urls'] = false;
   return $args;
} ); 
```

进一步讨论和更多信息 - [https://core.trac.wordpress.org/ticket/24646](https://core.trac.wordpress.org/ticket/24646)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-04T13:13:00.630

通过为特定的 url 添加 preg_match，我们可以最小化解析的不安全 url 的数量：

```
function http_request_local( $args, $url ) {
   if ( preg_match('/xml|rss|feed/', $url) ){
      $args['reject_unsafe_urls'] = false;      
   }
   return $args;
}
add_filter( 'http_request_args', 'http_request_local', 5, 2 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T19:42:36.407

因此，虽然上述答案有效，但我认为有一种方法可以更好地确保您限制发出 URL 请求的范围，而不是允许一切进行。因此，我向任何偶然发现此信息的人证明以下信息，以防万一。

如果结果调用是对在私有 IP 上交叉通信但仍可公开访问的内部服务器的调用，则此答案很有用。

下面的代码片段将在调用 RSS 提要的站点上运行。提供提要的站点不需要这个。

```
add_filter('http_request_host_is_external', function($bool, $host, $url){
        if($url === 'https://www.example.com/news/feed/' && $host === 'www.example.com'){
                return true;
        }
}, 10, 3); 
```

# java - 在多线程应用程序中使用共享 Weka 分类器会导致异常

> ID：13938909
> 
> 赞同：1
> 
> 时间：2012-12-18T18:08:12.400
> 
> 标签：java, multithreading, exception, weka

我正在运行一个多线程 Java 应用程序，它获取对实例进行分类的请求。为了能够同时运行多个线程，我的应用程序在线程之间共享一个`Classifier`对象和一个`Instances`对象。Instances 对象仅包含属性的相关数据，并且没有任何与之关联的实例。

当我的应用程序收到分类请求时，我`Instance`使用请求的属性数据创建一个对象，并使用 将预生成的`Instances`对象设置为数据集`Instance.setDataset()`，例如：

```
myNewInstance.setDataset(sharedInstances); 
```

然后`myNewInstance`被发送到共享`Classifier`。

在大多数情况下，它似乎运作良好。但是有时当发生 2 个并发请求时，会从`Classifier.distributionForInstance()`. 不幸的是，错误消息不清楚，但是我看到了 2 个不同的异常：

```
Caused by: java.lang.RuntimeException: Queue is empty
at weka.core.Queue.pop(Queue.java:194)
at weka.filters.Filter.output(Filter.java:563)
at weka.filters.unsupervised.attribute.PrincipalComponents.convertInstance(PrincipalComponents.java:626)
at weka.filters.unsupervised.attribute.PrincipalComponents.input(PrincipalComponents.java:812)
at weka.classifiers.meta.RotationForest.convertInstance(RotationForest.java:1114)
at weka.classifiers.meta.RotationForest.distributionForInstance(RotationForest.java:1147)

Caused by: java.lang.NullPointerException
at weka.filters.unsupervised.attribute.Standardize.convertInstance(Standardize.java:238)
at weka.filters.unsupervised.attribute.Standardize.input(Standardize.java:142)
at weka.filters.unsupervised.attribute.PrincipalComponents.convertInstance(PrincipalComponents.java:635)
at weka.filters.unsupervised.attribute.PrincipalComponents.input(PrincipalComponents.java:812)
at weka.classifiers.meta.RotationForest.convertInstance(RotationForest.java:1114)
at weka.classifiers.meta.RotationForest.distributionForInstance(RotationForest.java:1147) 
```

如您所见，当最新发生时，它带有一个空消息字符串。

据我了解，我不能使对象不可变，并且我宁愿不将此部分包装在关键部分中，以便充分利用并发性。我尝试使用构造函数为每个分类请求创建一个不同的“实例”对象`Instances(Instances dataset)`，但是，它没有产生不同的结果。使用不同`Classifier`的选项不是一种选择，因为构建对象需要花费太多时间并且它需要快速响应（最多 10 到 20 毫秒），据我了解，问题并不依赖于此。

我假设问题来自使用相同的 Instances 对象。根据[Instances](http://weka.sourceforge.net/doc.dev/weka/core/Instances.html)的文档，构造函数只复制对标头信息的引用，这解释了为什么不能通过创建另一个对象来解决问题。是否有一个选项可以根据先前的对象创建完全不同的 Instances 对象，而无需实时查看所有属性？

任何其他以性能为导向的解决方案也将受到高度赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T00:07:05.633

可能你现在已经解决了这个问题。这仅适用于那些面临类似问题的人。我在一个多线程 Java 应用程序中测试实例，我遇到了同样的异常。要分解问题，您的情况有两个问题：

*   第一个是您使用相同的`Instances`对象来为每个请求设置数据。这样，您很可能会遇到可能不会破坏代码但会产生错误结果的并发问题。因为来自不同请求的数据可能会混淆。您最好的选择是`Instances`为每个请求创建一个新对象。但是，这不是产生您面临的异常的原因。这是第二个问题。
*   第二个问题是您使用的是相同的`Classifier`，这就是产生异常的原因。就我而言，自从我构建分类器以来，我就构建并序列化了分类器并将其写入文件。一旦我需要对测试集进行分类，我曾经在每个线程中反序列化对象，给我一个新实例。但是，解决此问题的正确方法是使用`weka.classifiers.Classifier.makeCopy(model)`静态方法为每个请求制作副本，该方法在内部使用序列化。

# jquery - RequireJS 不能与 Shim'ed jQuery 插件一起使用

> ID：13938916
> 
> 赞同：7
> 
> 时间：2012-12-18T18:08:47.787
> 
> 标签：jquery, twitter-bootstrap, requirejs

插件几乎总是坚持在 jQuery 之前加载。由于我使用了垫片设置，他们不应该这样做。

在我的 main.js 中，我有以下设置：

```
requirejs.config({
   paths: {
        'jquery': 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min',
        'bootstrap': '../bootstrap/js/bootstrap.min',
        'select2': 'vendor/select2',
        'jshashtable': 'vendor/jshashtable-2.1',
        'jquery.numberformatter': 'vendor/jquery.numberformatter-1.2.3.min',
        'jq-datepicker': 'vendor/bootstrap-datepicker',
        'jq-datepicker.da': 'vendor/bootstrap-datepicker.da'
    }, 

    // Use shim for plugins that does not support ADM
    shim: {
        'bootstrap': ['jquery'],
        'select2': ['jquery'],
        'jq-datepicker': ['jquery'],
        'jshashtable': ['jquery'],
        'jquery.numberformatter': ['jquery', 'jshashtable']
    },
    enforceDefine: true
}); 
```

在这个文件的后面，我有以下内容：

```
// Start the main app logic.
requirejs(['jquery', 'bootstrap', 'jq-datepicker'],
function ($) {

    console.log('Require.JS loaded');

    // Init datepickers
    // Docs: https://github.com/eternicode/bootstrap-datepicker
    $('.datepicker').datepicker({
        format: 'dd/mm/yyyy',
        language: 'da',
        keyboardNavigation: false,
        autoclose: true
    });

}); 
```

但我一直收到这个错误：

```
Uncaught TypeError: undefined is not a function bootstrap.min.js:6
(anonymous function) bootstrap.min.js:6
(anonymous function) 
```

我可以在我的 Chrome 网络选项卡中看到它是在 jQuery 之前加载的。

现在我尝试`enforceDefine: true`在stackoverflow上环顾四周后添加，但没有运气。我尝试将 requirejs.config 移动到我的 html 页面。我尝试从本地文件加载 jQuery。一切都没有运气。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T09:39:10.113

你也shim jquery吗？

```
shim: {
    jQuery: {
       exports: 'jquery'
    },
    'bootstrap': {
       exports : 'jquery'
     },
    'select2': {
       exports :'jquery'
     },
     ...
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T11:17:18.500

你不是`$`要出口吗？

```
shim: {
        'jquery': {
            exports: '$'
        },
        'jqueryuitouchpunch': {
            deps: ['jqueryui']
        },
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T20:17:12.370

尝试：

```
shim: {
    'bootstrap': {
       exports : 'jquery'
     },
    'select2': {
       exports :'jquery'
     },
     ...
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T10:55:34.307

只需确保在插件之前加载 jQuery，使用定义：

```
// Start the main app logic.
requirejs(['jquery', 'bootstrap'], function ($) {
    define(['jq-datepicker'], function() {
      $('.datepicker').datepicker({
          format: 'dd/mm/yyyy',
          language: 'da',
          keyboardNavigation: false,
          autoclose: true
    });
  });

}); 
```

# asp-classic - 用我们的数据库内容填充 RSS 提要？

> ID：13938922
> 
> 赞同：0
> 
> 时间：2012-12-18T18:09:10.813
> 
> 标签：asp-classic, rss

我有一个关于创建 RSS 提要的问题。我已经阅读了一些关于创建 RSS 提要的不同信息，总的来说，这似乎并不难。

我很难理解的是如何自动填充 RSS 提要 xml 文件？

这是我们的基本 .xml 文件...

`<?xml version='1.0' encoding='utf-8'?>`

`<rss version='2.0'>`

`<channel>`

`<title>Channel Title</title>`

`<description>Description of Channel</description>`

`<link>http://www.test.com</link>`

`<item>`

`<title>Item Title</title>`

`<description>Updated on: 5/20/2012</description>`

`<link>http://www.test.com/itempage.asp?itemID=1</link>`

`</item>`

`</channel>`

`</rss>`

显然，我们可以手动输入每个项目，但我希望它自动从我们的数据库中选择最新的项目。在这种情况下，新闻项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:07:44.770

您可以使用 Msxml2.DOMDocument.6.0 对象。在[这里](http://msdn.microsoft.com/en-us/library/ms764730%28v=vs.85%29.aspx)查看 MSXML DOM 参考。

使用该对象，您可以创建 xml 节点，然后保存 xml 文档...

例子：

```
set xml = server.createobject("Msxml2.DOMDocument.6.0")
set rssNode = xml.createElement("rss")
rssNode.appendChild(xml.createTextNode(""))
rssNode.setAttribute "version", "2.0" 
```

# c# - ImageButton 顶部的 TextBlock (Windows 8 XAML/C#)

> ID：13938923
> 
> 赞同：0
> 
> 时间：2012-12-18T18:09:25.817
> 
> 标签：c#, xaml, imagebutton, textblock

有人可以给我一个示例，说明如何使用 XAML 设置具有三种状态（悬停、正常、按下）的按钮。我希望按钮的整个区域都覆盖有图像（三种不同状态中的每一种），并且我希望文本位于顶部，并且对于不同的状态也具有三种不同的颜色。我已经有了类似的东西（文本块上没有颜色状态）。我此时遇到的问题是文本块阻止了下方按钮的输入事件（我也没有实现文本块的颜色更改......

当前代码：

```
<DataTemplate x:Name="SubjectItemTemplate">
    <Canvas Width="225" Height="225">
        <Button Canvas.Left="0" Canvas.Top="0"
                Command="{Binding ElementName=LayoutRoot, Path=DataContext.NavigateToUnitsPage}"
                CommandParameter="{Binding}">
            <Button.Template>
                <ControlTemplate>
                    <Grid Background="{Binding LightThemeColor}" Width="205" Height="205">

                        <controls:ImageButton HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,0"
                                              NormalStateImageSource="{Binding ImageUriNormal}"
                                              HoverStateImageSource="{Binding ImageUriHover}"
                                              PressedStateImageSource="{Binding ImageUriPressed}" Command="{Binding ElementName=LayoutRoot, Path=DataContext.NavigateToUnitsPage}"
                CommandParameter="{Binding}"/>
                        <TextBlock Text="{Binding Name}" FontSize="18" TextWrapping="Wrap" TextAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,168,0,0" />

                    </Grid>
                </ControlTemplate>
            </Button.Template>

        </Button>
    </Canvas>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:44:28.327

`ImageButton`事件没有按预期处理的原因`TextBlock`是因为`TextBlock`位于与 内联`ImageButton`并且不包含在`ImageButton`. 要改变这一点，`TextBlock`必须放在`ImageButton`.

```
 <controls:ImageButton HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,0"
      NormalStateImageSource="{Binding ImageUriNormal}"
      HoverStateImageSource="{Binding ImageUriHover}"
      PressedStateImageSource="{Binding ImageUriPressed}" Command="{Binding ElementName=LayoutRoot, Path=DataContext.NavigateToUnitsPage}" CommandParameter="{Binding}" >
      <TextBlock Text="{Binding Name}" FontSize="18" TextWrapping="Wrap" TextAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,168,0,0" />
 </controls:ImageButton> 
```

# node.js - 低优先级 Express.js app.get('/route');

> ID：13938927
> 
> 赞同：5
> 
> 时间：2012-12-18T18:09:33.857
> 
> 标签：node.js, express

有没有办法注册一个优先级较低的 express.js app.get() 调用？

例如，

```
app.get('*', function(req, res) {});
app.get('/page', function(req, res) {}); 
```

是否有一种方法可以在第一次调用时指定较低的优先级，使其位于路由查找的底部，从而允许首先检查后来调用的路径，就像第一行代码在第二行之后执行一样代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:21:40.830

我刚刚快速浏览了 Express 的源代码，似乎您在添加路线时无法设置任何类型的优先级。路线始终按创建顺序匹配。在您的示例中，它将首先尝试匹配`'*'`，然后`'/page'`。

但是，您可以在完成后要求 Express 恢复匹配：

```
app.get('*', function (req, res, next) {
   // 对请求运行一些测试
   // ...

   // 最后，继续匹配
   下一个（）;
});

```

# php - 如何从以下字符串中得到我的话？

> ID：13938930
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:09:42.220
> 
> 标签：php, regex, string

我在 PHP 中有两个字符串：

```
$Str1 = "/welcome/files/birthday.php?business_id=0";
$Str2 = "/welcome/index.php?page=birthday"; 
```

我必须用一个函数从这两个字符串中获取单词生日。我需要一个在两种情况下都返回生日的函数。

例子

```
function getBaseWord($word){ 
    ...
    return $base_word;
}

getBaseWord('/welcome/files/birthday.php?business_id=0');
getBaseWord('/welcome/index.php?page=birthday'); 
```

两个函数调用都应该返回“生日”。

我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:16:59.963

如果我正确理解您要执行的操作，那么这应该可以满足您的需要：

```
function getWord(){
     return $_GET['page'];
} 
```

或 $_GET['business_id'];

我认为 $_GET 是由发送到页面的 GET 请求组成的关联数组。关联数组是您访问类似 ['name of the element'] 而不是 [1] 或 [2] 或其他内容的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:11:06.350

因此，您需要做的是从字符串中提取所有实际的 GET 变量：

```
//Seperate the URL and the GET Data
list($url,$querystring) = explode('?', $string, 2);

//Seperate the Variable name from its value
list($GETName, $GETValue) = explode("=", $querystring);

//Check to see if we have the right variable name
if($GETName == "page"){
    //Return the value of that variable.
    return $GETValue;
} 
```

**笔记**

这是非常基本的，不会接受一个以上的 GET 参数。如果您计划有更多变量，则需要对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:21:15.703

我不知道你在说什么，但是，你可以用 str_replace 删掉“生日”这个词并用另一个词替换，或者你可以用 stripos 找到位置，我不知道我们在这里要做什么，所以那些是我唯一想到的事情

# c# - 加载 tablelayoutpanel 需要处理相应的错误提供程序

> ID：13938934
> 
> 赞同：1
> 
> 时间：2012-12-18T18:10:01.917
> 
> 标签：c#, winforms

我有一个`TableLayoutPanel`并且我正在迭代一个集合以动态构建表的内容。我正在尝试`ErrorProvider`为每个`ComboBox`生成的内容添加一个。但是，我不知道如何在组合框验证事件处理程序中获取相应错误提供程序的句柄？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    TableLayoutPanel _tableLayoutPanel1;

    private void Form1_Load(object sender, EventArgs e)
    {
        _tableLayoutPanel1 = new TableLayoutPanel();
        _tableLayoutPanel1.AutoSize = true;

        BuildTableContents();

        this.Controls.Add(_tableLayoutPanel1);
    }

    private void BuildTableContents()
    {
        for (int i = 0; i < 3; i++)
        {
            Label labelLeft = new Label();
            labelLeft.Text = "Test Left Column";
            _tableLayoutPanel1.Controls.Add(labelLeft, 0, i);

            ComboBox cbo = new ComboBox();
            cbo.Validated += new EventHandler(cbo_Validated);
            cbo.Name = "cbo_" + i;
            cbo.Items.AddRange(new object[] { "Yes", "No" });
            _tableLayoutPanel1.Controls.Add(cbo, 1, i);

            ErrorProvider err = new ErrorProvider();
            err.SetIconAlignment(cbo, ErrorIconAlignment.MiddleRight);
        }
    }

    void cbo_Validated(object sender, EventArgs e)
    {
        //How do I get a handle on associated 
        //Error Provider to current combo box?

    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        ValidateChildren();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:21:55.207

尝试将 ErrorProvider 放在表单范围级别：

```
TableLayoutPanel _tableLayoutPanel1;
ErrorProvider err = new ErrorProvider();

public Form1() {
    InitializeComponent();
} 
```

# math - Clojure 中的任意精度求幂

> ID：13938939
> 
> 赞同：10
> 
> 时间：2012-12-18T18:10:46.117
> 
> 标签：math, clojure

有没有办法在 Clojure 中执行任意精度求幂？我已经尝试过 Math/pow 和 clojure.math.numeric-tower 中的 expt 函数，但两者都只会返回有限的精度。例如：

```
(with-precision 100 (expt 2 1/2))
=> 1.4142135623730951 
```

如何获得更多数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:23:48.977

[Apfloat for Java](http://www.apfloat.org/apfloat_java/)提供快速的任意精度算术。`project.clj`如果您的项目带有 Leiningen，您可以通过将以下依赖项信息添加到文件中来轻松使用它。

```
[org.apfloat/apfloat "1.6.3"] 
```

您可以使用 Apfloat 在 Clojure 中执行任意精度求幂。例如：

```
user> (import '(org.apfloat Apfloat ApfloatMath))
org.apfloat.ApfloatMath

user> (-> (Apfloat. 2M 100) (ApfloatMath/pow (Apfloat. 0.5M 100)))
1.4142135623730950488016887242096980785696718753769480731766797379907324784621070388503875343276415727 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:35:34.653

`math/expt`可能不是您要查找的函数，因为它在这种情况下返回 double 而不是 BigDecimal，因此忽略您的`with-precision`声明：

> 如果底数是精确数且幂是整数，则返回精确数，否则返回双精度数。

```
user> (type (with-precision 100 (math/expt 2M 1/2)))
java.lang.Double 
```

[这个问题](https://stackoverflow.com/questions/3579779/how-to-do-a-fractional-power-on-bigdecimal-in-java)的答案似乎涵盖了如何从 BigDecimal 求幂中获得任意精度。BigDecimal 似乎没有提供这种“开箱即用”

# batch-file - Robocopy 脚本

> ID：13938940
> 
> 赞同：1
> 
> 时间：2012-12-18T18:10:46.350
> 
> 标签：batch-file, robocopy

因此，我正在寻找一个不错的批处理文件，使用 robocopy 功能将我的 Win7 客户端计算机备份和还原文件夹复制到 NAS。每天都会在备份集父文件夹中创建一个新文件夹，因此理论上，我希望 robocopy 每天晚上复制该新文件夹，而不是每晚复制整个目录。

截至目前 - 我正在使用 robocopy /MIR 但即使文件夹没有更改，它仍会将所有内容复制为 OLDER。

任何想法如何做到这一点？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:34:18.050

使用该`/XO`选项。

```
/XO : eXclude Older - if the destination file exists and is the same date
                      or newer than the source - don’t bother to overwrite it. 
```

另一种选择是使用该`/MaxAge:1`选项。

```
/MAXAGE:n : MAXimum file AGE - exclude files older than n days/date. 
```

[`RoboCopy /?`](http://ss64.com/nt/robocopy.html)

# java - 仅由点构成的随机曲线

> ID：13938943
> 
> 赞同：0
> 
> 时间：2012-12-18T18:11:01.750
> 
> 标签：java, math, graphics2d, splines

我需要创建一个像这样的随机曲线：

![随机曲线](../Images/ffd5349b92670ccac81f2074cce8ac2b.png)

在这张图中有3个例子，标记如下：

1.  红色椭圆是曲线的起点，
2.  蓝色椭圆表示结束。
3.  它们之间是用绿色椭圆标记的点。

我只能使用 Point，因为在制作完其中一个之后，我需要为前一条曲线中的每个 Point 创建另一条小曲线。我尝试使用 sin 函数或 cos 函数，但只有当起点和终点的 x 或 y 点相同时才有效。

有谁知道如何使用 Graphics2D 和 Point 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:13:47.477

您应该使用[Bezier Curves](http://www.java2s.com/Tutorial/Java/0261__2D-Graphics/BezierLab.htm)。

如果您对曲线上的每个 x 值都有一个 y 值，那么您可以查看[apache commons implementation](http://commons.apache.org/math/apidocs/src-html/org/apache/commons/math/analysis/interpolation/SplineInterpolator.html#line.67)。您在这里得到的是一个[PolynomialSplineFunction](http://commons.apache.org/math/api-1.0/org/apache/commons/math/analysis/PolynomialSplineFunction.html)，您可以使用它来计算曲线上的任何点。

```
SplineInterpolator interpolator = new SplineInterpolator();
PolynomialSplineFunction f 
         = interpolator.interpolate(xValues, yValues); //red and blue dots
f.value(4.0); //gets y-value for  x = 4.0 
```

# javascript - 视差开合照片

> ID：13938947
> 
> 赞同：1
> 
> 时间：2012-12-18T18:11:18.310
> 
> 标签：javascript, jquery, animation, parallax

我在一个使用视差的网站上工作——我有一张照片，我垂直切成两半，当你向下滚动时，它会分开。换句话说，在您滚动之前，没有迹象表明照片会“打开”。这是我的代码：

```
 $("#section5_back5").stop().animate({ right : (520 * object_speed * 1.8) + (scroll_position * object_speed)}, delay);
    $("#section5_back5").stop().animate({ top : (-50 * object_speed2) + (scroll_position * object_speed2)}, delay);
    $("#section5_back6").stop().animate({ left : (545 * object_speed * 1.8) + (scroll_position * object_speed)}, delay);
    $("#section5_back6").stop().animate({ top : (-50 * object_speed2) + (scroll_position * object_speed2)}, delay);
} 
```

到达照片底部后，有没有办法将照片“关闭”大约 100 像素？

# python - pygtk 如何更新 gtk.Image

> ID：13938949
> 
> 赞同：0
> 
> 时间：2012-12-18T18:11:33.947
> 
> 标签：python, gtk, pygtk, gtk2

我对 gtk.Image() 有一个非常奇怪的问题。简单的问题；如何更新图像？在创建窗口时，我创建图像并打包它……那时我从磁盘加载图像。现在我开始从 url 下载图像，完成后我只想用新图像替换现有图像。我重写磁盘上相同文件的内容，然后执行：

```
 pixbuf = gtk.gdk.pixbuf_new_from_file(image_path)
    self._user_avatar.set_from_pixbuf(pixbuf) 
```

我试过 self._user_avatar.set_from_file(image_path) 和 self._user_avatar.clear() 没有任何效果。当我重新启动应用程序时，有一个新图像，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:29:41.937

[`gtk.Image.set_from_pixbuf`](http://developer.gnome.org/pygtk/stable/class-gtkimage.html#method-gtkimage--set-from-pixbuf)是正确的方法，所以你的问题可能来自别的东西。尝试使用最简单的代码来重现您的问题。

这是一个工作示例：

```
import pygtk
pygtk.require('2.0')
import gtk

pics = []
clicks = 0

def on_destroy (widget):
    gtk.main_quit()
    return False

def on_button_clicked (widget, image):
    global clicks
    clicks += 1
    image.set_from_pixbuf (pics[clicks % len(pics)])

def create ():
    window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    window.connect("destroy", on_destroy)

    pics.append (gtk.gdk.pixbuf_new_from_file("sample1.png"))
    pics.append (gtk.gdk.pixbuf_new_from_file("sample2.png"))

    image = gtk.Image()
    image.set_from_pixbuf(pics[0])

    button = gtk.Button ("Switch Image")
    button.connect("clicked", on_button_clicked, image)

    vbox = gtk.VBox()
    vbox.pack_start (image)
    vbox.pack_start (button)

    window.add(vbox)
    window.show_all()

if __name__ == "__main__":
    create()
    gtk.main() 
```

# ruby-on-rails-3 - :assets 组 gems 在开发和测试以外的环境中使用

> ID：13938952
> 
> 赞同：1
> 
> 时间：2012-12-18T18:11:46.443
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, bundler

在我的应用程序中使用以下代码，当我运行 bundle 命令时

```
bundle install --without development:test 
```

:assets 组中的 gems 仍在使用中，尽管我指定 :assets 组应该只用于开发或测试环境。

```
# application.rb
if defined?(Bundler)
  Bundler.require(*Rails.groups(:assets => %w(development test)))
end

# Gemfile
group :assets do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
  gem 'uglifier'
  gem "turbo-sprockets-rails3", "~> 0.2"
end 
```

# python - Python keybd_event 问题

> ID：13938957
> 
> 赞同：1
> 
> 时间：2012-12-18T18:11:53.680
> 
> 标签：python, winapi, emulation, keyboard-events

对于个人项目，我想为 N64 模拟器生成键盘按键。当我选择 Python IDE 然后切换到模拟器时，它似乎只识别一个键盘事件。我希望模拟器能够不断识别按下 python 脚本生成的按钮。代码非常简单，它不断复制被按下的 x 按钮。

```
import serial,win32api, win32con,time
while 1:
        win32api.keybd_event(0x58,0x2D,0,0)
        time.sleep(1) 
```

# c# - 从服务器获取实时更新的最有效方法？

> ID：13938967
> 
> 赞同：0
> 
> 时间：2012-12-18T18:12:30.640
> 
> 标签：c#, performance, long-polling

**从在线服务器获取实时更新而不使用 DDOS 或减慢客户端应用程序的最有效方法是什么？**

*我听说过一次长轮询，但我不确定它是否是最好的方法或如何在 C# 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:27:03.893

我想现在最简单和最有效的方法是使用[SignalR](http://www.asp.net/signalr)。

NDC 2012 中有一个[非常好的视频](http://ndc2012.oktaset.com/t-6011)，可以让您立即启动并运行。

根据客户端和基础设施，它从 websocket 优雅地降级为长轮询和永久帧。

根据连接的用户的频率和数量，另一个可能起作用的选项是每 X 秒轮询一次数据。要减少应用服务器中的连接开销，您可以禁用或减少保持活动时间。

# c# - 如何为从组合框中选择的项目声明 ac# 变量

> ID：13938970
> 
> 赞同：4
> 
> 时间：2012-12-18T18:12:37.660
> 
> 标签：c#, variables, serial-port, global-variables

如何为我的 comboBox1 中的选定值创建一个公共变量，以便它可以在每个按钮中使用，这样我就不必为每个按钮重复它？对于我拥有的每个按钮：

```
var portNum = comboBox1.SelectedItem.ToString();
using (SerialPort port = new SerialPort( portNum, 9600, Parity.None, 8)) 
```

但我只想拥有 portNum 而不必将 var 声明行放在每个按钮中。

```
public partial class planar232 : Form
{
    private SerialPort comPort = new SerialPort();
    private string[] ports = SerialPort.GetPortNames();

    public planar232()
    {
        InitializeComponent();
        foreach (string port in ports)
        {
            comboBox1.Items.Add(port);
        }

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        var portNum = comboBox1.SelectedItem.ToString();
        using (SerialPort port = new SerialPort( portNum, 9600, Parity.None, 8))
        {
            byte[] bytesToSend = new byte[9] { 0x38, 0x30, 0x31, 0x73, 0x21, 0x30, 0x30, 0x31, 0x0D };
            port.Open();
            port.Write(bytesToSend, 0, 9);
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        var portNum = comboBox1.SelectedItem.ToString();
        using (SerialPort port = new SerialPort( portNum, 9600, Parity.None, 8))
        {
            byte[] bytesToSend = new byte[9] { 0x38, 0x30, 0x31, 0x73, 0x21, 0x30, 0x30, 0x30, 0x0D };
            port.Open();
            port.Write(bytesToSend, 0, 9);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:15:52.623

如果您的 ComboBox 仅显示“COM1”等，请执行以下操作：

```
using (SerialPort port = new SerialPort(comboBox1.Text, 9600, Parity.None, 8)) 
```

或者，如果您需要使用`SelectedItem`,

```
using (SerialPort port = new SerialPort(comboBox1.SelectedItem.ToString(), 9600, Parity.None, 8)) 
```

如果你真的想要房产，

```
string SelectedPort { get { return comboBox1.SelectedItem.ToString(); } } 
```

* * *

更好的是，重构您的代码以仅在按钮处理程序中指定数据：

```
private void button1_Click(object sender, EventArgs e)
{
    byte[] bytesToSend = new byte[9] { 0x38, 0x30, 0x31, 0x73, 0x21, 0x30, 0x30, 0x31, 0x0D };
    this.Send(bytesToSend);
}

private void button2_Click(object sender, EventArgs e)
{
    byte[] bytesToSend = new byte[9] { 0x38, 0x30, 0x31, 0x73, 0x21, 0x30, 0x30, 0x30, 0x0D };
    this.Send(bytesToSend);
}

private void Send(byte[] bytesToSend)
{
    var portNum = comboBox1.SelectedItem.ToString();
    using (SerialPort port = new SerialPort( portNum, 9600, Parity.None, 8))
    {
        port.Open();
        port.Write(bytesToSend, 0, bytesToSend.Length);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:15:55.263

在表单范围内创建属性：

```
public Form Form1
{
    public string PortNum {get;set;}

    public void ComboBox1_SelectionChanged(object sender, EventArgs e)
    {
       PortNum = ComboBox1.SelectedItem.ToString();
    }

    ... (rest of your code)

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:16:52.983

使用[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)：

```
// this is a class member
string PortNum 
{
    get { return comboBox1.SelectedItem.ToString(); }
}

// instead of your original code
using (var port = new SerialPort(PortNum, ...)) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:20:25.653

在设计时禁用按钮 1 和 2。

添加私有成员 PortNum

将 SelectedItemChange 事件处理程序添加到组合框如果选择不为空，请将其保存在 PortNum 并启用按钮

# html - 如何从无序列表项中删除缩进？

> ID：13938975
> 
> 赞同：296
> 
> 时间：2012-12-18T18:12:59.827
> 
> 标签：html, css

我想从中删除所有缩进`ul`。我尝试设置`margin`, `padding`, `text-indent`to `0`，但无济于事。似乎设置`text-indent`为负数可以解决问题 - 但这真的是消除缩进的唯一方法吗？

* * *

## 回答 #1

> 赞同：477
> 
> 时间：2012-12-18T18:25:06.643

将列表样式和左填充设置为空。

```
ul {
    list-style: none;
    padding-left: 0;
}​ 
```

```
ul {
  list-style: none;
  padding-left: 0;
}
```

```
<ul>
  <li>a</li>
  <li>b</li>
  <li>c</li>
</ul>
```

要维护项目符号，您可以替换`list-style: none`with `list-style-position: inside`或简写`list-style: inside`：

```
ul {
  list-style-position: inside;
  padding-left: 0;
} 
```

```
ul {
  list-style-position: inside;
  padding-left: 0;
}
```

```
<ul>
  <li>a</li>
  <li>b</li>
  <li>c</li>
</ul>
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2014-10-06T09:57:54.003

我首选的删除 <ul> 缩进的解决方案是一个简单的 CSS 单行：

```
ul { padding-left: 1.2em; }
```

```
<p>A leading line of paragraph text</p>
<ul>
    <li>Bullet points align with paragraph text above.</li>
    <li>Long list items wrap around correctly. Long list items wrap around correctly. Long list items wrap around correctly. Long list items wrap around correctly. Long list items wrap around correctly. </li>
    <li>List item 3</li>
</ul>
<p>A trailing line of paragraph text</p>
```

该解决方案不仅轻巧，而且具有多个优点：

*   它很好地将 <ul> 的项目符号点左对齐到周围的正常段落文本（= 删除了 <ul> 的缩进）。
*   如果 <li> 元素内的文本块环绕成多行，则它们会保持正确的缩进。

* * *

**旧版信息：**
对于 IE 8 及以下版本，您必须使用 margin-left 代替：

```
 ul { margin-left: 1.2em; } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-13T08:45:03.020

`display:table-row;`也将摆脱压痕，但会移除子弹。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-02T16:11:35.160

将此添加到您的 CSS 中：

```
ul { list-style-position: inside; } 
```

这会将 li 元素放置在与其他段落和文本相同的缩进中。

参考：[http ://www.w3schools.com/cssref/pr_list-style-position.asp](http://www.w3schools.com/cssref/pr_list-style-position.asp)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-18T18:17:12.750

删除填充：

```
padding-left: 0; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-18T18:16:36.707

你能提供一个链接吗 ？谢谢我可以看看很可能你的css选择器不够强大或者你可以试试

`padding:0!important;`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-01-28T20:50:44.453

I have the same problem with a footer I'm trying to divide up. I found that this worked for me by trying few of above suggestions combined:

```
footer div ul {
    list-style-position: inside;
    padding-left: 0;
} 
```

This seems to keep it to the left under my h1 and the bullet points inside the div rather than outside to the left.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-03T14:37:30.047

现场演示：**[https ://jsfiddle.net/h8uxmoj4/](https://jsfiddle.net/h8uxmoj4/)**

```
ol, ul {
  padding-left: 0;
}

li {
  list-style: none;
  padding-left: 1.25rem;
  position: relative;
}

li::before {
  left: 0;
  position: absolute;
}

ol {
  counter-reset: counter;
}

ol li::before {
  content: counter(counter) ".";
  counter-increment: counter;
}

ul li::before {
  content: "●";
} 
```

由于最初的问题不清楚其要求，我试图在其他答案设定的指导方针内解决这个问题。尤其是：

*   将列表项目符号与外部段落文本对齐
*   在同一个列表项中对齐多行

我还想要一个不依赖于浏览器同意使用多少填充的解决方案。为了完整起见，我添加了一个有序列表。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-20T03:52:37.970

内联执行此操作，我将边距设置为 0 (ul style="margin:0px")。项目符号与段落对齐，没有悬垂。

# google-plus - Google Contacts API 是否支持高分辨率图片？

> ID：13938980
> 
> 赞同：3
> 
> 时间：2012-12-18T18:13:40.500
> 
> 标签：google-plus, contacts, google-contacts-api

Google 最近通过 gmail 界面为联系人的图像添加了高分辨率 (720x720) 支持。以前，它将所有图像转换为 96x96。但是，当我使用 Contacts API 发布图像时，它仍然会转换为 96x96。我目前在链接参考[http://schemas.google.com/contacts/2008/rel#photo](http://schemas.google.com/contacts/2008/rel#photo)中使用图片网址。有没有办法发布更高分辨率的图像，或者如果我们使用联系人 API，我们是否仍然停留在 96x96？是否有另一种编程方式来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:09:51.193

我假设您正在使用 Google+ API 来检索他们的个人资料并正在查看个人资料图片，如此处所示，使用 API 资源管理器：

[https://developers.google.com/apis-explorer/#search/profile/m/plus/v1/plus.people.get?userId=107345380056943591322&_h=1&](https://developers.google.com/apis-explorer/#search/profile/m/plus/v1/plus.people.get?userId=107345380056943591322&_h=1&)

在响应中是一个图像 URL：

```
 "image": {
  "url": "https://lh3.googleusercontent.com/-2N7UIsa-tLI/AAAAAAAAAAI/AAAAAAAAAK8/XJiZoMReZr0/photo.jpg?sz=50"
 }, 
```

您可以更改 sz 参数以指示渲染图像的宽度/高度，例如：

[https://lh3.googleusercontent.com/-2N7UIsa-tLI/AAAAAAAAAAI/AAAAAAAAAAK8/XJiZoMReZr0/photo.jpg?sz=500](https://lh3.googleusercontent.com/-2N7UIsa-tLI/AAAAAAAAAAI/AAAAAAAAAK8/XJiZoMReZr0/photo.jpg?sz=500)

还有其他 url 格式，目前尚不清楚您获得的是哪个 url，但如果您粘贴示例，我很乐意提供帮助。

# plone - 在 Plone 中清理文件存储中未使用的 blob

> ID：13938983
> 
> 赞同：3
> 
> 时间：2012-12-18T18:13:57.367
> 
> 标签：plone, zodb, blobstorage

有没有办法在 Plone 站点中查找和删除未使用的 blob 存储空间？

我正在寻找类似的东西`bin/zeopack`，但它会检测`blobstorage`目录中未使用的 blob。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:48:23.710

ZODB 自己处理未使用的 blob。打包将根据需要将 blob 和已删除的事务一起删除。

# asp.net-mvc - 会话关闭后的 ASP.NET 异步操作

> ID：13938985
> 
> 赞同：1
> 
> 时间：2012-12-18T18:14:09.830
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session, session-state

我正在编写一个 ASP.NET MVC3 应用程序。在这里，我在控制器中有一个长时间运行（约 40 分钟）的操作。现在，当用户登录并单击按钮启动操作时，我会向他显示有关操作状态的进度条。这是控制器中的异步操作，有 10 个异步步骤。现在，如果用户在第 5 个异步步骤完成时注销，ASP.NET 将执行剩余的 5 个步骤，还是在 5 个步骤后退出。是否有一个维护状态的控制器，这是解决方案？

# regex - .htaccess 中带有查询字符串的 301 的正确语法是什么？

> ID：13938986
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:14:13.663
> 
> 标签：regex, .htaccess, http-status-code-301

我有几个这样的网址：

> /news/report_detail.asp?id=100&edition=14

我想在 .htaccess 中添加一个重写，所以它们看起来像这样：

> 报告详细信息-asp-id-100-edition-14

任何帮助将不胜感激。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:56:05.043

这应该有效。

```
RewriteCond %{QUERY_STRING} id=([0-9]+)&edition=([0-9]+)
RewriteRule news/report_detail.asp news/report-detail-asp-id-%1-edition-%2? [R=301,L] 
```

请注意，我假设这是在您的根文件夹的 .htaccess 文件中，并且您已经有一个 RewriteBase / 指令，并且您`news/`从上面的重定向 URL 的开头离开了。否则，您可能需要对此代码进行一些调整。但这会将用户`/news/report_detail.asp?id=100&edition=14`从`/news/report-detail-asp-id-100-edition-14`

# php - 弹出窗口不起作用

> ID：13938988
> 
> 赞同：1
> 
> 时间：2012-12-18T18:14:29.083
> 
> 标签：php, javascript, popup

我在弹出窗口中使用 javascript 和 php。计划是将父页面上的行 id 传递给弹出窗口。

使用此代码可以正常工作：

```
<a href="#" onclick="PopupCenter('example.php', 'myPop1',500,400); " class="add"><img src='images/buttons/edit.png' title='Edit Content'></a> 
```

弹出窗口出现。但是当我尝试添加时`?textID=<?$row['textID']?>`，这是我用来传递行 id 的代码，结果如下：

```
<a href="#" onclick="PopupCenter('example.php?textID=<?$row['textID']?>', 'myPop1',500,400); " class="add"><img src='images/buttons/edit.png' title='Edit Content'></a> 
```

弹出窗口不起作用。它似乎只是在刷新页面。感谢您的帮助。

这是我的完整代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<?php
    include("global.php");
?>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<title>About | ILAM</title>

<!-- main css -->
<link href="style.css" rel="stylesheet" type="text/css">
<link href="styleAdmin.css" rel="stylesheet" type="text/css">

<script type= "text/javascript">
    <!-- showHideDiv -->
    function divHideShow(divToHideOrShow){
        var div = document.getElementById(divToHideOrShow);
        if (div.style.display == "block"){
            div.style.display = "none";}
        else{
            div.style.display = "block";}
    }         

    <!-- popUp -->
        function PopupCenter(pageURL, title,w,h) 
            {
                var left = (screen.width/2)-(w/2);
                var top = (screen.height/2)-(h/2);
                var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
            }
</script>
</head>

<!-- Body -->
<body>
<div id="pagewrap">
    <!-- Header -->
    <div id="header">
        <div class="floating-menu">
            <div class="logo"><img src="images/static/ilamLogo.png"></div>
            <div class="translator">
            </div>
            <ul>
                <li><a href="join.php">Join Us!</a></li>
                <li><div class="indent">&nbsp;</div></li>
                <li><a href="contact.php">Contact</a></li>
                <li><a href="career.php">Career</a></li>
                <li><a href="gallery.php">Gallery</a></li>
                <li><a href="facilities.php">Facilities</a></li>
                <li><a href="courses.php">Courses</a></li>
                <li><a href="#" class="active">About</a></li>
                <li><a href="index.php">Home</a></li>
                <li><a href="javascript:divHideShow('menuContentBanner');divHideShow('menuContentBannerText');divHideShow('menuOpenPost');divHideShow('menuMainPost');divHideShow('menuFooterLeft');divHideShow('menuFooterMiddle');divHideShow('menuFooterRight');">Admin</a></li>
            </ul>
        </div>
    </div>
    <!-- //Header -->
    <!-- ContentBanner -->
    <div id="contentBanner"> 
        <div id="menuContentBanner" class="menuBarStyle">
            <div class="addEditDelete">
                <ul>
                <li><a href="addImage.php"><img src="images/buttons/edit.png" title="Edit Image"></a></li>
                </ul>
            </div>
        </div>
    <img src="images/headers/aboutHeader.jpg"></div> <!--BannerImage -->    
    <div class="textLeft">
        <div id="menuContentBannerText" class="menuBarStyle">
            <div class="addEditDelete">
                <ul>
                <li><a href="#" onclick="PopupCenter('edit_article.php', 'myPop1',500,400); "  class="add"><img src="images/buttons/edit.png" title="Edit Content"></a></li>
                </ul>
            </div>
        </div>  
    <h3>As an Academic Institution.</h3><p> ILAM takes to heart its responsibilities, not only to its students, but also to its team, and community</p></div> <!-- BannerText -->
    <!-- //ContentBanner -->
    <!-- Content: Blue -->
    <div id="content">  
        <!-- SidePost -->
        <aside id="sidebar">
            <section class="widget">
                <ul>
                    <li><a href="#"><img src="images/buttons/factsbtn.png" onmouseover="this.src='images/buttons/factsbtnHover.png'" onmouseout="this.src='images/buttons/factsbtn.png'"></a></li>
                    <li><a href="#"><img src="images/buttons/testibtn.png" onmouseover="this.src='images/buttons/testibtnHover.png'" onmouseout="this.src='images/buttons/testibtn.png'"></a></li>
                    <li><a href="#"><img src="images/buttons/promosbtn.png" onmouseover="this.src='images/buttons/promosbtnHover.png'" onmouseout="this.src='images/buttons/promosbtn.png'"></a></li>
                </ul>
            </section>
        </aside>
    <!-- //SidePost -->
    <!-- OpenerPost -->
        <article class="openerPost">
            <table>
                <tr>
                    <div id="menuOpenPost" class="menuBarStyle">
                        <div class="addEditDelete">
                        <ul>
                            <li><a href="#" onclick="PopupCenter('example.php?promoID=<?=$row['promo_id']?>', 'myPop1',400,400); "><img src="images/buttons/edit.png" height="27" width="65"></a></li>
                        </ul>
                        </div>
                    </div>
                </tr>
                <tr>
                    <td><?php
                            $query="SELECT * from text_tb WHERE textID = '1'";
                            $result=mysql_query($query);
                            if (!$result) {
                                echo 'Could not run query: ' . mysql_error();
                                exit;
                            }
                            $row = mysql_fetch_row($result);
                            echo $row[1]; // the email value
                            ?>
                    </td>
                </tr>
            </table>
        </article>
    </div>
    <!-- //OpenerPost -->
    <!-- Content: White -->
    <div id="content">
        <article class="mainPost">
            <table>
                <tr>
                    <div id="menuMainPost" class="menuBarStyle">
                        <div class="addEditDelete">
                        <ul>
                            <li><a href="addImage.php"><img src="images/buttons/edit.png" title="Edit Content"></a></li>
                        </ul>
                        </div>
                    </div>
                </tr>
                <tr><td class="title">Our Mission</td></tr>
                <tr>
                    <td><p>As an academic institution, ILAM takes to heart its responsibilities, not only to its students, 
                    but also to its team, and community. We know that in addition to reaching our vision for the school, ILAM has
                    a role and certain duties that it has to carry out.</p></td>
                </tr>

                <tr>
                    <td class="subtitle">For the Students.</td>
                </tr>
                <tr>
                    <td><p>International Language Academy Manila (I.L.A.M.) is a premier language school in Makati 
                    City, Philippines whose mission is to provide quality education to professionals and 
                    non-professionals aiming to be proficient in English.  The school takes pride in its ESL/EFL
                    courses such as:  Functional Grammar, Conversation, Business Writing, Business English, 
                    Pronunciation, IELTS review, TOEIC review, etc.  which are all taught in a multidisciplinary 
                    setting to ensure comprehensive skill development in the four areas of communication (listening,
                    speaking, reading, and writing). Apart from teaching English, the school also intends to inculcate strong intercultural 
                    awareness among its students by integrating outdoor activities in its curriculum. </p></td>
                </tr>   
                <tr>
                    <td class="subtitle">For the Community.</td>
                </tr>               
                <tr>                
                    <td><p>As an academic institution, ILAM takes heart to its responsibilities in promoting education and tourism in the country, which is the reason behind its partnership with the Bureau of Immigration and various multinational companies for English training. It aims to show its foreign students how much the 
                    country has improved, and that the Philippines is a place where they can always find another
                    home. ILAM goes beyond the technicalities of language. It offers students the opportunity to
                    foster a deeper understanding of various cultures and thus, enables them to appreciate more the 
                    beauty of language as they get to communicate and interact with different people.</p></td>
                </tr>
                <tr>
                    <td class="subtitle">For its Team.</td>
                </tr>
                <tr>
                    <td><p>As an academic institution, ILAM takes heart to its responsibilities in promoting education 
                    and tourism in the country, which is the reason behind its partnership with the Bureau of Immigration and various
                    multinational companies for English training. It aims to show its foreign students how much the 
                    country has improved, and that the Philippines is a place where they can always find another
                    home. ILAM goes beyond the technicalities of language. It offers students the opportunity to
                    foster a deeper understanding of various cultures and thus, enables them to appreciate more the 
                    beauty of language as they get to communicate and interact with different people.</p></td>
                </tr>
            </table>
        </article>
    </div>

    <footer id="footer">
        <table>
            <tr>
                <td>
                    <div id="menuFooterLeft" class="menuBarStyle">
                        <a href="addImage.php"><img src="images/buttons/edit.png" title="Edit Content"></a>
                    </div>
                    <h3>Let's Meet</h3>
                    <p>2/F Makati Creekside Mall Bldg. Amorsolo Cor. VA Rufino St. Legazpi Village, Makati City Philippines</p></td>
                <td>
                    <div id="menuFooterMiddle" class="menuBarStyle">
                        <a href="addImage.php"><img src="images/buttons/edit.png" title="Edit Content"></a>
                    </div>
                    <h3>Let's Talk</h3>
                    <p>Telephone: 632-8400285 / 519 9502<br>Cellphone: 0917-5324332</p></td>
                <td>
                    <div id="menuFooterRight" class="menuBarStyle">
                            <a href="addImage.php"><img src="images/buttons/edit.png" title="Edit Content"></a>
                    </div>
                <h3>The Affiliates</h3>
                <p>Accenture<br>
                Asian Institute of Management<br>
                ConveyThis<br>
                The Little Web Directory<br></td>
            </tr>
            <tr>
                <td class="copyright">Copyright &copy; 2012 ILAM</td>
            </tr>
        </table>
    </footer>
</div>
<!-- /#pagewrap -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:17:31.947

你需要`echo`像这样使用：

```
<?php echo($row['textID']) ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:21:26.237

看起来它是PHP。要将 PHP 变量插入 HTML，请使用`echo`，如下所示：

```
<a href="#" 
    onclick="PopupCenter('example.php?textID=<?php echo $row['textID'] ?>', 'myPop1',500,400); " class="add">
    <img src='images/buttons/edit.png' title='Edit Content'>
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:45:34.190

如果允许速记，这应该有效

```
<?=$row['textID']?> 
```

# vba - 在列中的每个单元格中运行方程

> ID：13938993
> 
> 赞同：1
> 
> 时间：2012-12-18T18:15:05.950
> 
> 标签：vba, if-statement, excel, excel-formula, calculated-columns

我正在尝试在我的电子表格中运行一个方程式，该方程式将通过“I”列并删除从现在起 90 天内没有到期日期的每一行......换句话说，我正在尝试将我的电子表格格式化为只需给我一份清单，列出未来 90 天内到期的所有物品。我放星星的那一行是我难以插入方程的地方。我不知道如何插入方程，但如果它自己在单元格中运行，它看起来像这样 =IF(AND(I11-900),1,0)=1。我会将 Q11 更改为什么，以便在运行方程式时它将应用于 I 列中的每个单元格，而不仅仅是 I 11

```
Sub DeleteNow()

Dim Firstrow As Long
Dim Lastrow As Long
Dim Lrow As Long
Dim CalcMode As Long
Dim ViewMode As Long

With Application
    CalcMode = .Calculation
    .Calculation = xlCalculationManual
    .ScreenUpdating = False
End With

With Sheets("Copy")
    .Select
    ViewMode = ActiveWindow.View
    ActiveWindow.View = xlNormalView
    .DisplayPageBreaks = False
    Firstrow = .UsedRange.Cells(1).Row
    Lastrow = .UsedRange.Rows(.UsedRange.Rows.Count).Row
    For Lrow = Lastrow To Firstrow Step -1
        With .Cells(Lrow, "I")

            If Not IsError(.Value) Then

                If ******************** Then .EntireRow.Delete

            End If

        End With

    Next Lrow

End With

ActiveWindow.View = ViewMode
With Application
    .ScreenUpdating = True
    .Calculation = CalcMode
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:52:16.297

我现在没有 XL，所以可能会有一些语法错误，但这对你来说应该容易得多，而且很容易理解和更新。请注意，我刚刚构建了代码的核心，我把你所有的`Application`关卡内容都放在了外面。

```
With Sheets("Copy")

    '.Select -> no need to select anything, you can work right with the object
    ViewMode = ActiveWindow.View
    ActiveWindow.View = xlNormalView
    .DisplayPageBreaks = False

    Dim myCol as Integer
    myCol = 9

    'the below assumes your data sets starts in column A and you want to filter on column I
    .UsedRange.AutoFilter myCol, xlLast90Days 'this "xlLast90Days" is most likely not right, but if you do it manually while recording a macro, you will get the correct syntax

     Dim rngDelete as Range
     On Error Resume Next 'in case there are no visible cells
     Set rngDelete = Intersect(.UsedRange, .UsedRange.Offset(1), .Columns(myCol)).SpecialCells(xlCellTypeVisible) 'assumes first row of usedrange is header row

     'if there are values over 90 delete them
     If not rngDelete is Nothing Then rngDelete.EntireRow.Delete

End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:55:32.503

```
Sub deleteRowsWithDateNotIn90Days()
Dim lastRow As Integer
Dim firstRow As Integer
Dim ctr As Integer

Dim currentCell As Range
Dim valueOfIColumn
Dim isWithin90Days As Boolean

lastRow = 17
firstRow = 1

Application.ScreenUpdating = False
With Sheets("Copy")
    For ctr = lastRow To firstRow Step -1
        Set currentCell = .Cells(ctr, 9)
        valueOfIColumn = currentCell.Value
        isWithin90Days = valueOfIColumn >= Date And valueOfIColumn <= (Date + 90)

        If Not isWithin90Days Then
            Debug.Print "deleting row of cell " + currentCell.Address
            currentCell.EntireRow.Delete
        End If
    Next
End With
Application.ScreenUpdating = True
End Sub 
```

编辑：以此为基础开始。
您可以删除宏记录器生成的不必要的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:50:56.713

我认为您要做的是将 For Next 循环更改为 For Each 循环。这样，您可以将每个元素从数组中拉出并对其进行修改，然后将其放回原处。像这样：

```
'Psuedo code for learing, won't work if used.
Dim gRange as Range 'Generic
Dim testRange as Range

Set testRange = Worksheets("This").Range("Test Column")

For Each gRange in testRange
    If(moreThan90Days)
        gRange.EntireRow.Delete
    End If
Next gRange 
```

如果您需要更多说明，请在 For Next 循环上进行快速谷歌搜索，可能会找到您正在寻找的内容。

# jquery - 基于选择文本的 Jquery 条件验证

> ID：13938994
> 
> 赞同：2
> 
> 时间：2012-12-18T18:15:05.307
> 
> 标签：jquery, validation, conditional

仅当“select1”字段中的选定文本为“其他”时，我才想将“其他”字段设为必需，我正在尝试的规则是：`other: { required: function(element){ return $("#select1 option:selected").text() == "Other"; } }`我做错了什么吗？这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-  validation/jquery.validate.js"></script>
  <script>
  $(document).ready(function(){
    $('form:first').validate({
        rules: {
          cname: {
          required: true,
        },
        select1: { valueNotEquals: "0" }
        },
        other: {
                required: function(element){
                            return $("#select1 option:selected").text() == "Other";
                        }
        },   
        messages: {
          cname: "Please enter a valid naaaammmeeee.",
      select1: "Please choose a valid option",
      other: "Please enter a valid other value",
        },
      });

       $.validator.addMethod("valueNotEquals", function(value, element, arg){
        return arg != value;
        }, "Value must not equal arg.");
  });
  </script>

</head>
<body>

 <form class="cmxform" id="commentForm" method="get" action="">
 <fieldset>
   <legend>A simple comment form with submit validation and default messages</legend>
   <p>
     <label for="cname">Name</label>
     <em>*</em><input id="cname" name="cname"/>
   </p>
   <p>
   <select name="select1" id="select1">
    <option value="0">Please choose a value</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">Other</option>
    </select>
    </p>
    <p>
    <label for="other">Other</label>
        <em>*</em><input id="other" name="other"/>
   </p>
       <p>
       <input class="submit" type="submit" value="Submit"/>
       </p>
 </fieldset>
 </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:31:21.127

更新了答案在这里找到一个小提琴演示：http: [//jsfiddle.net/3jrTM/](http://jsfiddle.net/3jrTM/)

```
$('form:first').validate({
rules: {
    cname: {
        required: true
    },
    select1: {
        valueNotEquals: "0"
    },
    other: {
        required: function(element) {
            return $("#select1 option:selected").text() == "Other";
        }
    },
},
messages: {
    cname: "Please enter a valid naaaammmeeee.",
    select1: "Please choose a valid option",
    other: "Please enter a valid other value"
}

});

$.validator.addMethod("valueNotEquals", function(value, element, arg) {
return arg != value;
}, "Value must not equal arg.");​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:44:38.777

有多个问题主要与 JSON 格式相关：

1.  这里额外的一个`closing bracket`：

    ```
    select1: { valueNotEquals: "0" }
        }, 
    ```

2.  在定义结尾和定义开始之前`closing bracket`缺少一个`rules``messages`

    return $("#select1 option:selected").text() == "Other"; } } **}**，
    消息：{

3.  `comma`每个选项末尾的额外内容是不必要的

4.  validate.js 路径中的空格（这可能是问题 itslef 中的错字）

    这是更正后的代码：

...

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
      <script>
        $(document).ready(function(){
    $('form:first').validate({
    rules: {
        cname: { required: true },
        select1: { valueNotEquals: "0" },
        other: { required: function(element){
                            return $("#select1 option:selected").text() == "Other";
                            }
            }
},   
        messages: {
            cname: "Please enter a valid naaaammmeeee.",
            select1: "Please choose a valid option",
            other: { required: "Please enter a valid other value"}
            }
});
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:19:15.017

```
$('select').change(function() {
   var text = $('select option:selected').text();​​​​​​​​​
   if(text == 'Other') {
       $('input[name=other]').attr('disabled', false);        
    }
  }); 
```

这就是你的意思吗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:29:49.933

您可以删除包含“0”的选项值。

```
<option>Select here someting</option> 
```

当一个选项不包含值atroibute时，jQuery验证将其致电或未给出。

```
<select class="required"><option>Select here someting</option></select> 
```

您可以将“必需”作为类添加到您的选择框，以便 jQuery 验证将提示“必需”警告。

# java - Google App Engine JSP 无法部署：java.lang.RuntimeException：无法获取系统 Java 编译器。请使用 JDK，而不是 JRE

> ID：13938995
> 
> 赞同：33
> 
> 时间：2012-12-18T18:15:09.663
> 
> 标签：java, eclipse, google-app-engine, jsp

希望这很简单，但是......除了部署到 GAE 之外，Eclipse 在所有方面都工作得相对较好。

我可以在本地运行我的 GAE 应用程序，但是当我尝试部署到 google 时，我收到以下消息：

```
java.lang.RuntimeException: Cannot get the System Java Compiler. Please use a JDK, not a JRE. 
```

我已将构建路径设置为 JDK。

尝试从多个系统（win7 和 win8）部署同一个项目时也会发生这种情况，所以我怀疑问题与项目本身有关。这个特定的项目已经存在并且已经在谷歌上运行了多年。

有趣的是，仅当我的应用程序中有 .jsp 文件要部署时才会出现此错误。如果我删除 jsp 文件，它的部署不会出错。（有点需要jsp文件）

谢谢

[链接到我的构建路径的图像](http://terraratta.net/tempimgs/gae_buildpath.jpg)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-19T22:42:52.433

我遇到了同样的问题，并且在强制 Eclipse 在我的 SDK 目录（Win 7 64bit）中使用 JRE 后能够成功部署。要强制 Eclipse 使用特定的 JRE，请参阅 [此](http://wiki.eclipse.org/Eclipse.ini)。似乎 Eclipse 使用的 JVM、应用程序引擎产生的 JVM 以及 appconfig 使用的 JVM 都应该是相同的。希望这对您的情况也有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-30T14:29:05.383

根据 AlohaCode 的回答，我尝试将我的项目 jre 设置为与我的 eclipse jre 相同。这对我来说是不够的。答案在我的类路径中，C:\windows\system32 中有 java.exe，它位于我的 java home 变量之前。解决方案是将 java home 路径放在 C:\windows\system32 条目之前。我在这里找到了答案：2FL5sJ">https://groups.google.com/forum/?fromgroups=#!msg/google-appengine-java/RyFybJWUhU4/78UE_2FL5sJ

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-16T17:47:54.530

在 Eclipse 中，转到：Window->Preferences->Java->Installed JREs，添加->Standard VM TO JDK PATH\JRE。如果您之前检查过 JRE，请取消选中它并检查此 jre

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-13T13:51:56.973

给定的建议解决了我的问题。`-vm`参数不能是第一行。

```
-vm

C:\Program Files (x86)\Java\jdk1.7.0_51\bin\javaw.exe 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-05T20:15:33.960

在 eclipse.ini 中设置 -vm 没有帮助。所有其他设置似乎都指向 JDK。出于绝望，我从系统中卸载了所有 JRE，只留下了 JDK。结果是 Eclipse 无法启动，因为 JDK bin 目录不在我的 PATH 上（此处为 Windows 8）。在环境系统变量中添加它可以启动 Eclipse。此后我可以部署到应用引擎。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-05-18T12:28:56.527

删除位于我的文件夹中的**JRE 文件**`C:/Program Files(*86)/Java`，重新打开 Eclipse IDE 解决了该问题。

我的`C:/Program Files/Java`文件夹中安装了 Java JDK，但之前没有检测到。

# php - 从另一个数组中删除一个数组中的值

> ID：13938998
> 
> 赞同：2
> 
> 时间：2012-12-18T18:15:14.883
> 
> 标签：php, arrays

我有 2 个数组，我想删除第二个数组中第一个数组中的所有内容。在这种情况下，我想删除数组一中的“ibomber”和“apphero”。我尝试了一些未设置的东西，但它看起来不起作用。

```
array (size=5)
  0 => string 'Air Hippo' (length=9)
  1 => string 'iBomber Defense Pacific' (length=23)
  3 => string 'AppHero' (length=7)
  5 => string 'Pillboxie' (length=9)
  6 => string 'Monogram' (length=8)

array (size=2)
  0 => string ' iBomber Defense Pacific' (length=24)
  1 => string ' AppHero' (length=8) 
```

这是我尝试过的：

```
foreach ($_SESSION["appsarray"] as $k=>$v)
{
    foreach ($_SESSION["finalapps"] as $k2=>$v2)
    {
        if ($v == $v2)
        {   
            unset ($_SESSION["appsarray"][$k]);
        }
    }
} 
```

会话appsarray 是我的第一个数组，会话finalapps 是我的第二个数组。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:18:57.133

```
function TrimmedStrCaseCmp($str1,$str2)
{
    return strcasecmp(trim(str1),trim(str2));
}

$result = array_udiff(values,to_remove_from_values,'TrimmedStrCaseCmp'); 
```

[http://php.net/manual/en/function.array-udiff.php](http://php.net/manual/en/function.array-udiff.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:19:25.220

您正在寻找[array_diff](http://php.net/array_diff)即；

```
$appsarray = array('Air Hippo','iBomber Defense Pacific','AppHero','Pillboxie','Monogram');
$finalapps = array('iBomber Defense Pacific','AppHero');
$result = array_diff($appsarray,$finalapps);

print_r($result); 
```

会输出；

```
Array ( [0] => Air Hippo [3] => Pillboxie [4] => Monogram ) 
```