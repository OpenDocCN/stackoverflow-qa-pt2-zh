# StackOverflow 问答 12757000-12757999

# php - php在上传时或上传之前调整图像大小

> ID：12757005
> 
> 赞同：7
> 
> 时间：2012-10-06T05:24:52.923
> 
> 标签：php, image, upload, resize

我将如何在上传之前或期间调整图像大小？

```
 <?php
     // Start a session for error reporting
    session_start();
    ?>
     <?php
    // Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['username'])) {
        header('Location: index.html');
        exit;
}
// *** Include the class
    include("resize-class.php");

// Call our connection file
include('config.php');

// Check to see if the type of file uploaded is a valid image type
function is_valid_type($file)
{
    // This is an array that holds all the valid image MIME types
    $valid_types = array("image/jpg", "image/JPG", "image/jpeg", "image/bmp", "image/gif", "image/png");

    if (in_array($file['type'], $valid_types))
        return 1;
    return 0;
}

// Just a short function that prints out the contents of an array in a manner that's easy to read
// I used this function during debugging but it serves no purpose at run time for this example
function showContents($array)
{
    echo "<pre>";
    print_r($array);
    echo "</pre>";
}

// Set some constants
// Grab the User ID we sent from our form
$user_id = $_SESSION['username'];
$category = $_POST['category'];

// This variable is the path to the image folder where all the images are going to be stored
// Note that there is a trailing forward slash
$TARGET_PATH = "img/users/$category/$user_id/";
if (! is_dir($TARGET_PATH)) {
    mkdir($TARGET_PATH, 0775, true);
}

// Get our POSTed variables
$fname = $_POST['fname'];
$lname = $_POST['lname'];
$contact = $_POST['contact'];
$price = $_POST['price'];
$conditional = $_POST['conditional'];
$image = $_FILES['image'];

// Build our target path full string.  This is where the file will be moved do
// i.e.  images/picture.jpg
$TARGET_PATH .= $image['name'];

// Make sure all the fields from the form have inputs
if ( $fname == "" || $lname == "" || $image['name'] == "" || $category['category'] == "" || $conditional['conditional'] == "" || $price['price'] == "" )
{
    $_SESSION['error'] = "All fields required";
    header("Location: securedpage1.php");
    exit;
}

// Check to make sure that our file is actually an image
// You check the file type instead of the extension because the extension can easily be faked
if (!is_valid_type($image))
{
    $_SESSION['error'] = "You must upload a jpeg, gif, or bmp";
    header("Location: securedpage1.php");
    exit;
}

// Here we check to see if a file with that name already exists
// You could get past filename problems by appending a timestamp to the filename and then continuing
if (file_exists($TARGET_PATH))
{
    $_SESSION['error'] = "A file with that name already exists";
    header("Location: securedpage1.php");
    exit;
}

// Lets attempt to move the file from its temporary directory to its new home
if (move_uploaded_file($image['tmp_name'], $TARGET_PATH))
{
    // NOTE: This is where a lot of people make mistakes.
    // We are *not* putting the image into the database; we are putting a reference to the file's location on the server

    $imagename = $image['name'];

    $sql = "insert into people (price, contact, category, username, fname, lname, expire, filename, conditional, posttime) values (:price, :contact, :category, :user_id, :fname, :lname, now() + INTERVAL 1 MONTH, :imagename, :conditional, now())";
                                $q = $conn->prepare($sql) or die("failed!");
                                $q->bindParam(':price', $price, PDO::PARAM_STR);
                                $q->bindParam(':contact', $contact, PDO::PARAM_STR);
                                $q->bindParam(':category', $category, PDO::PARAM_STR);
                                $q->bindParam(':user_id', $user_id, PDO::PARAM_STR);
                                $q->bindParam(':fname', $fname, PDO::PARAM_STR);
                                $q->bindParam(':lname', $lname, PDO::PARAM_STR);
                                $q->bindParam(':imagename', $imagename, PDO::PARAM_STR);
                                $q->bindParam(':conditional', $conditional, PDO::PARAM_STR);
                                $q->execute();

    $sql1 = "UPDATE people SET firstname = (SELECT firstname FROM user WHERE username=:user_id1) WHERE username=:user_id2";
                                $q = $conn->prepare($sql1) or die("failed!");
                                $q->bindParam(':user_id1', $user_id, PDO::PARAM_STR);
                                $q->bindParam(':user_id2', $user_id, PDO::PARAM_STR);
                                $q->execute();

    $sql2 = "UPDATE people SET surname = (SELECT surname FROM user WHERE username=:user_id1) WHERE username=:user_id2";
                                $q = $conn->prepare($sql2) or die("failed!");
                                $q->bindParam(':user_id1', $user_id, PDO::PARAM_STR);
                                $q->bindParam(':user_id2', $user_id, PDO::PARAM_STR);
                                $q->execute();

    header("Location: success.php");
    exit;
}
else
{
    // A common cause of file moving failures is because of bad permissions on the directory attempting to be written to
    // Make sure you chmod the directory to be writeable
    $_SESSION['error'] = "Could not upload file.  Check read/write permissions on the directory";
    header("Location: securedpage1.php");
    exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T07:36:25.600

试试这个代码，这可能对你有帮助

在此变量中`$resizeObj = new resize('sample.png');`，您需要链接您上传的图片网址

**Imagerezise.php**

```
<?php

    // *** Include the class
    include("resize-class.php");

    // *** 1) Initialise / load image
    $resizeObj = new resize('sample.png');

    // *** 2) Resize image (options: exact, portrait, landscape, auto, crop)
    $resizeObj -> resizeImage(200, 200, 'crop');

    // *** 3) Save image
    $resizeObj -> saveImage('sample-resizeda.jpg', 1000);

?> 
```

**调整大小类.php**

```
<?php

   # ========================================================================#
   #  Requires : Requires PHP5, GD library.
   #  Usage Example:
   #                     include("resize_class.php");
   #                     $resizeObj = new resize('images/cars/large/input.jpg');
   #                     $resizeObj -> resizeImage(150, 100, 0);
   #                     $resizeObj -> saveImage('images/cars/large/output.jpg', 100);
   # ========================================================================#

        class resize
        {
            // *** Class variables
            private $image;
            private $width;
            private $height;
            private $imageResized;

            function __construct($fileName)
            {
                // *** Open up the file
                $this->image = $this->openImage($fileName);

                // *** Get width and height
                $this->width  = imagesx($this->image);
                $this->height = imagesy($this->image);
            }

            ## --------------------------------------------------------

            private function openImage($file)
            {
                // *** Get extension
                $extension = strtolower(strrchr($file, '.'));

                switch($extension)
                {
                    case '.jpg':
                    case '.jpeg':
                        $img = @imagecreatefromjpeg($file);
                        break;
                    case '.gif':
                        $img = @imagecreatefromgif($file);
                        break;
                    case '.png':
                        $img = @imagecreatefrompng($file);
                        break;
                    default:
                        $img = false;
                        break;
                }
                return $img;
            }

            ## --------------------------------------------------------

            public function resizeImage($newWidth, $newHeight, $option="auto")
            {
                // *** Get optimal width and height - based on $option
                $optionArray = $this->getDimensions($newWidth, $newHeight, $option);

                $optimalWidth  = $optionArray['optimalWidth'];
                $optimalHeight = $optionArray['optimalHeight'];

                // *** Resample - create image canvas of x, y size
                $this->imageResized = imagecreatetruecolor($optimalWidth, $optimalHeight);
                imagecopyresampled($this->imageResized, $this->image, 0, 0, 0, 0, $optimalWidth, $optimalHeight, $this->width, $this->height);

                // *** if option is 'crop', then crop too
                if ($option == 'crop') {
                    $this->crop($optimalWidth, $optimalHeight, $newWidth, $newHeight);
                }
            }

            ## --------------------------------------------------------

            private function getDimensions($newWidth, $newHeight, $option)
            {

               switch ($option)
                {
                    case 'exact':
                        $optimalWidth = $newWidth;
                        $optimalHeight= $newHeight;
                        break;
                    case 'portrait':
                        $optimalWidth = $this->getSizeByFixedHeight($newHeight);
                        $optimalHeight= $newHeight;
                        break;
                    case 'landscape':
                        $optimalWidth = $newWidth;
                        $optimalHeight= $this->getSizeByFixedWidth($newWidth);
                        break;
                    case 'auto':
                        $optionArray = $this->getSizeByAuto($newWidth, $newHeight);
                        $optimalWidth = $optionArray['optimalWidth'];
                        $optimalHeight = $optionArray['optimalHeight'];
                        break;
                    case 'crop':
                        $optionArray = $this->getOptimalCrop($newWidth, $newHeight);
                        $optimalWidth = $optionArray['optimalWidth'];
                        $optimalHeight = $optionArray['optimalHeight'];
                        break;
                }
                return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);
            }

            ## --------------------------------------------------------

            private function getSizeByFixedHeight($newHeight)
            {
                $ratio = $this->width / $this->height;
                $newWidth = $newHeight * $ratio;
                return $newWidth;
            }

            private function getSizeByFixedWidth($newWidth)
            {
                $ratio = $this->height / $this->width;
                $newHeight = $newWidth * $ratio;
                return $newHeight;
            }

            private function getSizeByAuto($newWidth, $newHeight)
            {
                if ($this->height < $this->width)
                // *** Image to be resized is wider (landscape)
                {
                    $optimalWidth = $newWidth;
                    $optimalHeight= $this->getSizeByFixedWidth($newWidth);
                }
                elseif ($this->height > $this->width)
                // *** Image to be resized is taller (portrait)
                {
                    $optimalWidth = $this->getSizeByFixedHeight($newHeight);
                    $optimalHeight= $newHeight;
                }
                else
                // *** Image to be resizerd is a square
                {
                    if ($newHeight < $newWidth) {
                        $optimalWidth = $newWidth;
                        $optimalHeight= $this->getSizeByFixedWidth($newWidth);
                    } else if ($newHeight > $newWidth) {
                        $optimalWidth = $this->getSizeByFixedHeight($newHeight);
                        $optimalHeight= $newHeight;
                    } else {
                        // *** Sqaure being resized to a square
                        $optimalWidth = $newWidth;
                        $optimalHeight= $newHeight;
                    }
                }

                return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);
            }

            ## --------------------------------------------------------

            private function getOptimalCrop($newWidth, $newHeight)
            {

                $heightRatio = $this->height / $newHeight;
                $widthRatio  = $this->width /  $newWidth;

                if ($heightRatio < $widthRatio) {
                    $optimalRatio = $heightRatio;
                } else {
                    $optimalRatio = $widthRatio;
                }

                $optimalHeight = $this->height / $optimalRatio;
                $optimalWidth  = $this->width  / $optimalRatio;

                return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);
            }

            ## --------------------------------------------------------

            private function crop($optimalWidth, $optimalHeight, $newWidth, $newHeight)
            {
                // *** Find center - this will be used for the crop
                $cropStartX = ( $optimalWidth / 2) - ( $newWidth /2 );
                $cropStartY = ( $optimalHeight/ 2) - ( $newHeight/2 );

                $crop = $this->imageResized;
                //imagedestroy($this->imageResized);

                // *** Now crop from center to exact requested size
                $this->imageResized = imagecreatetruecolor($newWidth , $newHeight);
                imagecopyresampled($this->imageResized, $crop , 0, 0, $cropStartX, $cropStartY, $newWidth, $newHeight , $newWidth, $newHeight);
            }

            ## --------------------------------------------------------

            public function saveImage($savePath, $imageQuality="100")
            {
                // *** Get extension
                $extension = strrchr($savePath, '.');
                   $extension = strtolower($extension);

                switch($extension)
                {
                    case '.jpg':
                    case '.jpeg':
                        if (imagetypes() & IMG_JPG) {
                            imagejpeg($this->imageResized, $savePath, $imageQuality);
                        }
                        break;

                    case '.gif':
                        if (imagetypes() & IMG_GIF) {
                            imagegif($this->imageResized, $savePath);
                        }
                        break;

                    case '.png':
                        // *** Scale quality from 0-100 to 0-9
                        $scaleQuality = round(($imageQuality/100) * 9);

                        // *** Invert quality setting as 0 is best, not 9
                        $invertScaleQuality = 9 - $scaleQuality;

                        if (imagetypes() & IMG_PNG) {
                             imagepng($this->imageResized, $savePath, $invertScaleQuality);
                        }
                        break;

                    // ... etc

                    default:
                        // *** No extension - No save.
                        break;
                }

                imagedestroy($this->imageResized);
            }

            ## --------------------------------------------------------

        }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T08:09:24.880

这是使用 Ajax 添加多个图像的方法。

```
 var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    var formElement = document.getElementById("frmpoimgregistration");
    var formElement;
    var formData= new FormData(formElement);

     xmlhttp.open("post","Controller/User/Uploadlogo_controller.php",false);

    xmlhttp.send(formData);
    var counter = 0;
    while (xmlhttp.readyState != 4){
        counter = counter + 1;
    }
      var errorCondition =  xmlhttp.responseText;

if(errorCondition)
{
$("#image").append('<div class="imgup" id="'+count+'"><img class="po_images" src="'+errorCondition+'" style="width:137px; float:left"/></div>' );

    count++;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-28T11:31:51.103

这是一个完整的工作代码 - 我对 Java 脚本图像调整大小和 php 上传之间的组合的看法（这不是真正的上传，而是实际上在服务器上创建图像，使用 Java 脚本生成的数据）

索引.html

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script type="text/javascript">
var fileReader = new FileReader();
var filterType = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;

fileReader.onload = function (event) {
  var image = new Image();

  image.onload=function(){
      document.getElementById("original-Img").src=image.src;
      var canvas=document.createElement("canvas");
      var context=canvas.getContext("2d");
      canvas.width=image.width/4;
      canvas.height=image.height/4;
      context.drawImage(image,
          0,
          0,
          image.width,
          image.height,
          0,
          0,
          canvas.width,
          canvas.height
      );

      document.getElementById("upload-Preview").src = canvas.toDataURL();
  }
  image.src=event.target.result;
};

var loadImageFile = function () {
  var uploadImage = document.getElementById("upload-Image");

  //check and retuns the length of uploded file.
  if (uploadImage.files.length === 0) { 
    return; 
  }

  //Is Used for validate a valid file.
  var uploadFile = document.getElementById("upload-Image").files[0];
  if (!filterType.test(uploadFile.type)) {
    alert("Please select a valid image."); 
    return;
  }

  fileReader.readAsDataURL(uploadFile);
}

function step1()
{
  var base64image = $('#upload-Preview').attr('src');
  $("#imgsrc").val(base64image);
}

</script>
</head>

<body onload="loadImageFile();">
  <form name="uploadForm" action="upload.php" method="post">
    <table>
      <tbody>
        <tr>
          <td>Select Image - <input id="upload-Image" type="file" onchange="loadImageFile();" /></td>
        </tr>
        <tr>
          <td>Origal Img - <img id="original-Img"/></td>
        </tr>
         <tr>
          <td>Compress Img - <img name="upload-Preview" id="upload-Preview"/></td>
        </tr>

      </tbody>
    </table>
    <button type="button" onclick="step1();">step 1</button>
    <input id="imgsrc" name="imgsrc">
    <input type="submit" name="" value="step 2">
  </form>
</body>
</html> 
```

上传.php

```
<?
    $img = $_POST['imgsrc'];
    $img = str_replace('data:image/png;base64,', '', $img);
    $img = str_replace(' ', '+', $img);

    $data = base64_decode($img);
    $file = "image.png";
    $success = file_put_contents($file, $data);

    //reading from file: 

    echo '<img src="image.png" />';

    //reading from text variable/ database (in case yousaved the text in the db as a field)

    echo '<img src="data:image/png;base64,'. $img .'" />';

?> 
```

# java - 是否有任何用于绘制直方图和累积直方图的 Java 包？

> ID：12757006
> 
> 赞同：1
> 
> 时间：2012-10-06T05:25:05.340
> 
> 标签：java, charts

我试过 JFreechart。但是我似乎找不到用它绘制累积直方图的方法。

# java - 为什么示例中函数之前的“@override”会出错？

> ID：12757007
> 
> 赞同：1
> 
> 时间：2012-10-06T05:25:07.397
> 
> 标签：java, android, eclipse

在很多 android 示例中，他们让我重写了似乎不存在的函数，因为 @override 说它必须重写超类。这几乎每次都发生在日食中。我通常可以删除它，它似乎可以工作。

这是来自 OpenGL 示例的示例

```
public class MultisampleConfigChooser implements GLSurfaceView.EGLConfigChooser {
static private final String kTag = "GDC11";
@Override
public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display) { 
```

它告诉我chooseConfig 需要覆盖一个超类有人能告诉我我缺少什么吗？

谢谢

编辑：我不认为它是 JDK，因为还有其他没有给出错误的东西被覆盖。它主要只是任何 opengl 示例，但它发生在 4 个不同的示例中，如果我将它们注释掉，前几个只是工作，但其中一些有 20 个被覆盖的函数，我只是想让它运行以查看它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:36:18.920

它与您的“编译器合规级别”设置有关。您可能已将其设置为 1.5 或更低。将其设置为 1.6 以消除错误。

```
Window | Preferences | Java | Compiler | JDK Compliance | Compiler Compliance Level 
```

# php - 从从颜色框打开的弹出窗口重新加载顶部窗口（在顶部窗口中）

> ID：12757008
> 
> 赞同：2
> 
> 时间：2012-10-06T05:25:14.537
> 
> 标签：php, javascript, jquery, colorbox

我正在我的页面中打开一个颜色框。在 colorbox iframe 页面中，我有一个链接，它打开一个弹出窗口（window.open）。

现在我想从弹出窗口重新加载打开颜色框的顶部窗口页面。

我在弹出窗口中尝试了以下代码，但它不起作用：

```
echo '<script>window.top.location.href="test.php"; window.close();</script>'; 
```

是否可以从从颜色框打开的弹出窗口（从顶部窗口打开）控制最顶部的窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:33:50.713

打开弹出窗口的页面称为`opener`，所以

```
window.opener.location.href = 'test.php'; 
window.close(); 
```

如果打开器窗口本身是 iframe，则需要遵循以下链：

```
window.opener.top.location.href = 'test.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:09:45.557

iframe 的处理方式略有不同。这对你有用吗？

```
<script>parent.$.colorbox.close(); parent.location.href="test.php";</script> 
```

虽然，如果您要更改父文档的位置，您实际上也不需要关闭颜色框。

# javascript - 我可以将 .attr("data"... 替换为 .data(" ...

> ID：12757010
> 
> 赞同：2
> 
> 时间：2012-10-06T05:25:25.693
> 
> 标签：javascript, jquery

我有以下内容：

```
 if ($(this).attr("data-disabled") === "false") {
            var $link = $(this);
            $("a.accessLink").each(function () {
                $(this).attr("data-disabled", "true");
            });
            dialog($link);
        } 
```

我是否正确地说这可以替换为：

```
 if ($(this).data("disabled") === "false") {
            var $link = $(this);
            $("a.accessLink").each(function () {
                $(this).data("disabled", "true");
            });
            dialog($link);
        } 
```

还有一种更好的方法可以将带有 accessLink 类的链接的所有数据禁用属性设置为“禁用”值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:30:35.190

```
if ($(this).data("disabled") === "false") {
    $("a.accessLink").data("disabled", "true");
    dialog( $(this) );
} 
```

# c++ - 用嵌入的私有类覆盖 Qt 类

> ID：12757012
> 
> 赞同：7
> 
> 时间：2012-10-06T05:25:59.507
> 
> 标签：c++, qt

在很多情况下，我想重写一个 Qt 类来扩展或修改它的行为。但几乎所有的 Qt 类都使用内部私有类，例如 QNetworkDiskCache 内部的 QNetworkDiskCachePrivate。我知道这种方法有一些优点。但是私有类有一个巨大的问题：它使覆盖类变得更加困难。对于其他带有源代码的 C++ 类库，我通常会重写一个类方法，从父类的实现中复制代码，并在这里和那里进行一些小的修改以实现我想要的行为。但是，在 Qt 中，私有类不会被导出并且对派生类不可见。由于 Qt 类通过“d”成员在私有类中维护关键的内部数据，私有内部类的不可见性使得行为扩展的可能性非常有限。您只能使用少数公开的公共方法。

我尝试提取类的整个源文件并重命名类名和文件名。但是 Qt 类库如此紧密地交织在一起，以至于在大多数情况下，从中提取一个类也很麻烦。

我在这里想念什么吗？或者 Qt 类在可扩展性方面真的很糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:40:59.700

Qt 类在可扩展性方面优于大多数类；他们经常有钩子来改变他们的行为，而无需复制和粘贴整个方法。话虽如此，如果普遍接受的扩展方法不起作用，是的，Qt 类更难破解。这可能是一件好事，因为复制粘贴和修改基类实现意味着您的派生类不会得到基类实现中的任何改进或错误修复。

如果你想这样做，你需要说服你的构建系统让你包含私有头文件，然后从你的新实现中引用私有类。注意 Qt 文档中的免责声明；当您这样做时，您将面临每一个发布的 Qt 新版本的破坏（Qt 只保证公共 API，而您正在搞乱它的内部结构）。Qt 的公共 API 具有极好的可读性和文档化；内部代码可能非常神秘，所以你真的非常想确保你不能用公共 API 完成你想要的。如果您仍然决定使用私有类的东西，[这可能会有所帮助](http://zchydem.enume.net/2010/01/19/qt-howto-private-classes-and-d-pointers/)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-17T09:28:26.957

你的方法是错误的和坏的！要扩展 Qt 以及更通用的 C++ 代码，您不必复制源代码并在需要的地方修改它。您应该（必须）使用扩展 OOP（面向对象编程）范式。在 C++ 中，您应该编写如下内容：

```
#include <iostream>

using namespace std;

class A
{
public:
    A(){x=1;}
    void writeName(){cout << "my name is A";}
    void writeNumber(){cout << "my number is " << x << endl;}
private:
    int x;
};

class B : public A
{
public:
    B(){}
    void writeName(){cout << "my name is B and i'm better then A" << endl;}
};

int main()
{
   B *b= new B();
   b->writeName();
   b->writeNumber();
   return 0;
}

//output:
my name is B and i'm better then A
my number is 1 
```

通过这种方式，B 完成了基类 A 所做的所有事情，并且您添加了方法（扩展基类）以满足您的需求。如果您查看 qt 示例代码，这通常是用于执行默认 qt 小部件行为中未包含的操作的方法。在示例 ItemDelegate 自定义项中：您编写自己的类 MyItemDelegate 扩展 QItemDelegate：[链接](http://doc.qt.digia.com/stable/itemviews-spinboxdelegate.html)

> 或者 Qt 类在可扩展性方面真的很糟糕？

Qt 是“唯一”一个构建 C++ 语言的框架。这意味着您可以在 C++ 中完成的所有操作都可以在 Qt 中完成。

# python - 太多值需要解压

> ID：12757015
> 
> 赞同：1
> 
> 时间：2012-10-06T05:26:48.233
> 
> 标签：python, argv

我正在以艰难的方式阅读学习 python，在第 15 章我想使用 import argv 来分配变量和原始输入来获得用户输入。脚本是：

```
from sys import argv 

script, filename, = argv

txt = open(filename)

print " Here's your file %r :" % filename
print  txt.read()

print " I'll also ask you to type it again: "

file_again = raw_input ("> ")

txt_again = open (file_again)

print txt_again.read () 
```

运行此脚本后，我收到错误，解压缩的值太多。

文件“ex15.py”，第 3 行，在脚本中，文件名 = argv
值错误：要解压的值太多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:00:23.813

只是几个指针...

```
from sys import argv  

script, filename, = argv 
```

在这里，您导入 argv 以访问命令行参数，然后期望它包含 2 个参数 - 脚本 (arg 0) 和要打印的文件名 (arg1)。尽管尾随逗号在语法上不是不正确的，但它不是必需的，只是看起来有点奇怪。我通常将其留`argv`在内部`sys`而不是将其拉入当前名称空间，但这是一个品味问题 - 它并没有真正的区别。我可能还会进行一些错误处理：

```
import sys

try:
    script, filename = sys.argv
except ValueError as e:
    raise SystemExit('must supply single filename as argument') 
```

* * *

```
txt = (filename) 

print " Here's your file %r :" % filename 
print  txt.read() 
```

这里`txt = (name)`所做的就是使 txt 具有文件名的值。我相信您想要制作`txt`一个文件对象，以便您可以`.read()`从中：

```
txt = open(filename)
print "Here's the file contents of:", filename
print txt.read() 
```

* * *

```
print " I'll also ask you to type it again: "     
file_again = raw_input ("> ")     
txt_again = open (file_again)      
print txt.again.read () 
```

你已经得到了`open()`这里，但`txt.again.read()`应该是`txt_again.read()`其他你会得到一个`AttributeError`- 所以只要改变它就可以了。

或者，支持查找的文件对象，因此您可以只`rewind`使用文件（因为您已经将文件读到最后，没有什么可再读的了），方法是：

```
txt.seek(0)
print txt.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:14:59.457

O.K. so I found my problem I was not calling my script correctly. For example my py script is ex15.py with that script it will read a text using rw input and argv variables. And the filename for that is ex15_sample. I call the script with python ex15.py ex15_sample, I was confused with my last exercise. Where I used the variables I set in argv to call the script. But all of the feed back was very help and I also applied.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:08:11.327

你是如何运行脚本的？

当你说，

```
script, filename = argv 
```

您期待`argv`. 第一个是脚本名，第二个是文件名。如果您尝试使用超过 2 个参数运行脚本，那么您将收到这样的错误

```
python myscript.py myfile.py somethingelse 
```

如果你想再传递一个参数给脚本，那么你需要指定第三个变量来解压这个值。像这样的东西

```
script, filename, option = argv 
```

此外，如果您粘贴完整的回溯，这将有所帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T05:31:39.110

有一个额外的逗号

```
script, filename, = argv 
```

它应该是

```
script, filename = argv 
```

# ruby-on-rails - 在带有设计的用户模型中使用acts_as_tagger

> ID：12757018
> 
> 赞同：0
> 
> 时间：2012-10-06T05:27:09.773
> 
> 标签：ruby-on-rails, devise, acts-as-taggable-on, railscasts

在观看 RailsCast #382 on tagging withacts-as-taggable-on 之后，我有一个问题。

使用 Devise 进行身份验证时，有什么方法可以使用 current_user 设置标签所有权？

```
class User < ActiveRecord::Base
  acts_as_tagger

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

我根据acts-as-taggable-on 文档将acts_as_tagger 添加到用户模型中。

```
class Object < ActiveRecord::Base
  acts_as_taggable
end 
```

我在对象模型上设置了acts_as_taggable。

通过这个设置，当我创建一个带有标签的新对象时，我仍然在日志中看到 tagger_id 设置为 nil。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:04:43.147

您必须使用用户作为标记操作的主体：

```
current_user.tag(@some_object, :with => "paris, normandy") 
```

所以你必须在控制器中标记。

# sql - 根据列值将表拆分为 2 个或多个表

> ID：12757020
> 
> 赞同：0
> 
> 时间：2012-10-06T05:27:14.670
> 
> 标签：sql, sql-server-2008, insert

我有一个名为“MIVTable”的表，其中包含以下记录，

```
 MIVID      Quantity         Value
   ------     ----------       --------
      14           10             3000
      14           20             3500
      14           15             2000
      15           20             3000
      15           50             7500
      16           25             2000 
```

在这里，我需要根据MIVID将上面的Table存入“HeaderTbl”和“DetailTbl”两个表中，如下：

标头表：

```
 HID      MIVID       TotalQuantity    TotalValue
  -----    -------      -------------    -----------
    1         14               45           8500 
    2         15               70          10500
    3         16               25           2000 
```

这里 HID 是带有标识列的主键。

详细信息表：

```
 HID        MIVID        Quantity        Value
 -----      -------     ------------     -------
   1           14             10           3000
   1           14             20           3500
   1           14             15           2000
   2           15             20           3000
   2           15             50           7500
   3           16             25           2000 
```

假设，如果 MIVTable 包含 4 个不同的 MIVID 均值，那么应该根据 HeaderTbl 上的 MIVID 创建 4 行。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:42:43.973

`HeaderTbl`要从使用中插入记录`MIVTable`：（`HID`应该是自动增量）

```
INSERT INTO HeaderTbl
    ([MIVID], [TotalQuantity], [TotalValue])
SELECT MIVID, SUM(Quantity), SUM(Value) FROM MIVTable GROUP BY MIVID; 
```

`DetailTbl`要在from中插入记录`HeaderTbl`并`MIVTable`使用它：

```
INSERT INTO DetailTbl
([HID], [MIVID], [Quantity], [Value])
    SELECT H.HID, M.* 
      FROM HeaderTbl H 
INNER JOIN MIVTable M
        ON H.MIVID = M.MIVID; 
```

# [看看这个 SQLFiddle](http://sqlfiddle.com/#!3/44a31/1)

在这里，您需要使用[INSERT INTO SELECT](http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/)语句将数据从一个表插入到另一个表。您也可以`JOIN`在我为`DetailTbl`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:36:45.877

[您将使用RANK() SQL Server 函数](http://msdn.microsoft.com/en-us/library/ms176102.aspx)生成 HeaderTbl ，如下所示：

```
SELECT RANK() OVER (ORDER BY MIVID) as HID, MIVID, TotalQuantity, TotalValue
FROM 
(
SELECT 
    MIVID, 
    SUM(Quantity) as TotalQuantity, 
    SUM(Value) as TotalValue 
FROM MIVTable GROUP BY MIVID
) AS A 
```

[以及使用ROW_NUMBER() SQL Server 函数](http://msdn.microsoft.com/en-us/library/ms186734.aspx)的 Detail 表，如下所示：

```
SELECT 
    ROW_NUMBER() OVER (ORDER BY MIVID) AS HID, 
    MIVID, 
    Quantity, 
    Value 
FROM MIVTable 
```

# javascript - 在 Ember.js 中声明 mixin 时，将应用命名空间作为第一个参数是什么意思？

> ID：12757022
> 
> 赞同：3
> 
> 时间：2012-10-06T05:28:21.933
> 
> 标签：javascript, ember.js

我正在浏览 Flamejs 的源代码，并且看到了很多：

```
Flame = Ember.Application.create() 
```

声明混合：

```
Ember.mixin(Flame, { ... } ); 
```

应用程序命名空间是否作为第一个参数传入，因为上面声明了匿名 mixin？例如，如果我将其重写为命名的 mixin，我会说：

```
Flame.fooMix = Ember.mixin.create({ ... }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:30:13.747

据我了解。Ember.mixin() 是一种通过另一个对象扩展 ember 对象的方法。`Ember.mixin(A, B)`正在将成员添加`B`到`A`

# silverlight - EllipseGeometry 不在 Silverlight 中呈现

> ID：12757029
> 
> 赞同：0
> 
> 时间：2012-10-06T05:29:25.800
> 
> 标签：silverlight, windows-phone-7, pathgeometry

我正在尝试使用 EllipseGeometry 而不是 Ellipse 在 WP7 Silverlight 中绘制一个圆圈。MSDN 中的示例 XAML 不会在 Visual Studio 的画布上显示任何内容。如果我运行该应用程序，它会显示在模拟器中。

```
<Canvas> 
    <Path Fill="Gold" Stroke="Black" StrokeThickness="1">
        <Path.Data>
            <EllipseGeometry Center="50,50" RadiusX="50" RadiusY="50" />
        </Path.Data>
    </Path> 
</Canvas> 
```

任何想法发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:35:35.007

由于一些不清楚的原因，您应该指定宽度和高度。

```
 <Canvas>        
        <Path Width="100" Height="100" Fill="Gold" Stroke="Black" StrokeThickness="1">
            <Path.Data>
                <EllipseGeometry Center="50,50" RadiusX="50" RadiusY="50" />
            </Path.Data>
        </Path>
    </Canvas> 
```

在混合中，您将不会遇到此问题。

# jquery - 当我点击谷歌地图标记时，我可以使用 ajax 更新 Div 吗？

> ID：12757034
> 
> 赞同：2
> 
> 时间：2012-10-06T05:30:13.133
> 
> 标签：jquery, google-maps-api-3

我有一个我创建的谷歌地图及其来自数据库的建筑标记。我正在用来自数据库的信息填充这些标记。我想做的是在地图右侧的 div 上填写该信息。我的想法是，如果我可以通过 ajax 将标记的 ID 发送到将查找信息并使用信息重新加载该页面的页面。我充其量只是一个 ajax 新手，我不知道从哪里开始。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:42:44.013

使用 jQuery 并不难，我建议使用[load](http://api.jquery.com/load/)方法。它启动一个 ajax 请求并将响应加载到目标中：

```
google.maps.event.addListener(marker, 'click', function() {
          $('#divID').load('some.php?id=123');
        }); 
```

（其中 divID 是您希望显示响应的元素的 ID）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:35:26.737

当您创建标记时，您将 html 插入到 infoWindow 中查看行`var html`

```
function createMarker(latlng, name, id) {
var html = "<b> Marker " + id + "</b> <br/><br/><button onclick='doIt("+id+")'>Do It</button>";var image = "icons/XX.png";
  var shadow = "icons/XXX.png";
  var marker = new google.maps.Marker({
    map: map,
    position: latlng,
    icon: image,
    shadow: shadow
  });
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  }); 
```

}

将`function doIt(id)` 做Ajax 重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T20:53:43.927

这是一个通过单击多边形而不是标记来工作的示例（但概念是相同的）：

[http://www.geocodezip.com/v3_GoogleEx_layer-kml_world_countries_simple.html](http://www.geocodezip.com/v3_GoogleEx_layer-kml_world_countries_simple.html)

**代码片段（带标记）：**

```
var map = null;

function createMarker(latLng, html) {
  var marker = new google.maps.Marker({
    position: latLng,
    map: map
  });
  google.maps.event.addListener(marker, 'click', function() {
    document.getElementById('info').innerHTML = html;
  });
}

function openIW(layerEvt) {
  if (layerEvt.row) {
    var content = layerEvt.row['admin'].value;
  } else if (layerEvt.featureData) {
    var content = layerEvt.featureData.name;
  }
  document.getElementById('info').innerHTML = "you clicked on:<br>" + content;
}

function initialize() {
  var chicago = new google.maps.LatLng(36.4278, -15.9);
  var myOptions = {
    zoom: 0,
    center: chicago,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  createMarker({
    lat: 42,
    lng: -72
  }, "United States");
  createMarker({
    lat: 42,
    lng: 72
  }, "Russia");
  createMarker({
    lat: 37.9838096,
    lng: 23.7275388
  }, "Athens, Greece");
  createMarker({
    lat: -8.783195,
    lng: -55.491477
  }, "South America");

}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
<script src="http://maps.googleapis.com/maps/api/js"></script>
<table>
  <tr>
    <td>
      <div id="map_canvas" style="height:200px; width:300px;"></div>
    </td>
    <td>
      <div id="info"></div>
    </td>
  </tr>
</table>
```

# android - 如何在 API Level 8 中使用 Content Provider 和 Content Observer？

> ID：12757037
> 
> 赞同：0
> 
> 时间：2012-10-06T05:31:01.633
> 
> 标签：android, api, android-contentprovider, android-support-library

我想从 Api level-8`Content Provider`开始使用。`Content Observer`我可以在 Api-15 (ICS) 中创建它。但我必须从 Api-8 支持我的应用程序。

如果我像这样提到 android:minSdkVersion="8" 我会收到此错误 `Class requires API level 11 (current min is 8): android.content.Loader`。

```
import android.app.ListActivity;
import android.content.ContentValues;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.EditText;

public class TodosOverviewActivity extends ListActivity implements     LoaderManager.LoaderCallbacks<Cursor> {

private static final int DELETE_ID = Menu.FIRST + 1;     
private ConverstationsAdapter adapter;
private EditText Enter_Text; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.todo_list);
    this.getListView().setDividerHeight(2);
    fillData();
    registerForContextMenu(getListView());
    Enter_Text = (EditText) findViewById(R.id.msg);

    findViewById(R.id.send_button).setOnClickListener(new OnClickListener() {           
        @Override
        public void onClick(View v) {   
            SendInfo();
        }
    });
}

private void SendInfo() {

    String msg = Enter_Text.getText().toString().trim();
    ContentValues values = new ContentValues();
    values.put(TodoTable.COLUMN_RECEIVER, "Reddy");
    values.put(TodoTable.COLUMN_SENDER, "RA");
    values.put(TodoTable.COLUMN_MSG, msg);

    getContentResolver().insert(MyTodoContentProvider.CONTENT_URI, values);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        Uri uri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/" + info.id);
        getContentResolver().delete(uri, null, null);
        fillData();
        return true;
    }
    return super.onContextItemSelected(item);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
}

private void fillData() {  
    getLoaderManager().initLoader(0, null, this);   // error here   
    adapter = new ConverstationsAdapter(TodosOverviewActivity.this, null );
    setListAdapter(adapter);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
}

// Creates a new loader after the initLoader () call
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { TodoTable.COLUMN_ID, TodoTable.COLUMN_MSG };
    CursorLoader cursorLoader = new CursorLoader(this,
            MyTodoContentProvider.CONTENT_URI, projection, null, null, null);
    return cursorLoader;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    // data is not available anymore, delete reference
    adapter.swapCursor(null);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:19:38.120

两者`contentobserver`都`contentprovider`存在于 api 8 中。因此您可以毫无问题地使用它们。看到您的错误，您正在尝试使用`Loader`. 您可以安全地`AsyncTask`在 doinbackground 中使用和执行光标加载，而不是使用 Loader。加载程序是在 API 11 中引入的

所以删除 android.content.Loader 的使用，你应该能够构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:06:15.977

考虑使用`android.support.v4.content.Loader`

*编辑*

```
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;

...

public class YourClass implements LoaderManager.LoaderCallbacks<Cursor> ...
...

@Override public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { TodoTable.COLUMN_ID, TodoTable.COLUMN_MSG };
    CursorLoader cursorLoader = new CursorLoader(this,
        MyTodoContentProvider.CONTENT_URI, projection, null, null, null);
    return cursorLoader;
} 
```

注意*LoaderManager.LoaderCallbacks<**光标**>*

*编辑*
以任何方式阅读这个[CursorLoader 教程](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)，对我来说 - 我更喜欢 restartLoader() 而不是 initLoader() 教程。

*编辑*
借助片段（有线版本）重写您的活动：

包 de.vogella.android.todos；

```
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.widget.EditText;

public class TodosOverviewActivity extends FragmentActivity {

public static class TodosOverviewListFragment extends ListFragment
        implements LoaderManager.LoaderCallbacks<Cursor> {
    private ConverstationsAdapter adapter;
    private EditText Enter_Text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
        adapter = new ConverstationsAdapter(getActivity(), null);
        setListAdapter(adapter);
    }

    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        String[] projection = { TodoTable.COLUMN_ID, TodoTable.COLUMN_MSG };
        CursorLoader cursorLoader = new CursorLoader(getActivity(),
                MyTodoContentProvider.CONTENT_URI, projection, null, null,
                null);
        return cursorLoader;
    }

    public void onLoadFinished(Loader<Cursor> arg0, Cursor data) {
        adapter.swapCursor(data);
    }

    public void onLoaderReset(Loader<Cursor> arg0) {
        adapter.swapCursor(null);
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();
    TodosOverviewListFragment fragment = new TodosOverviewListFragment();
    fragmentTransaction.add(fragment, "xx");
    fragmentTransaction.commit();
}
} 
```

显现： `uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"`

将支持包添加到您的项目（项目-> Android 工具）

# ios - 我的应用有时无法连接到服务器

> ID：12757039
> 
> 赞同：0
> 
> 时间：2012-10-06T05:31:15.770
> 
> 标签：ios, google-app-engine, http, afnetworking

几个月来我一直在无助地观察这个问题，并决定这是我最好的选择。

我不确定问题的原因是什么，但我可以列出我正在做的一些事情。我有一个 iOS 应用程序，它使用 AFNetworking 使用 HTTP POST 请求连接到由 Google App Engine 托管的远程服务器。

现在，一切都很好，但有时，非常非常零星和随机，我收到失败的请求。活动指示器旋转了大约一分钟，最后我没有得到任何反馈——只是一个失败的请求。我检查了我的服务器日志，没有看到任何错误。请求失败后，我再试一次，它工作正常。它可以正常工作一整天。然后又一次随机地重复这个问题，有时会旋转 10 秒或一分钟。

一般来说，这可能是什么原因？随机出现一些失败的连接是否正常？那是我的事吗？

但奇怪的是，在我的 iPhone 上，应用程序正在运行，并且指示器正在旋转，并且它正在尝试连接，我尝试在 iOS 模拟器上连接，并且连接工作正常。我在 iPhone 上再试一次，还是不行。

如果我完全关闭应用程序并重新启动，那么它会再次运行。所以听起来这可能是软件问题而不是连接问题，但我又没有任何证据或数据。

我知道这很模糊，但我希望有人可能遇到过类似的问题。任何事情都有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:14:31.267

GAE for Java 上的实例启动存在一个已知问题。您可以[为 http://code.google.com/p/googleappengine/issues/detail?id=7706](http://code.google.com/p/googleappengine/issues/detail?id=7706)问题加注星标。

Python也报告了同样的问题，但这不是一个大问题。

我认为您应该检查您在 appengine 上使用的日志记录级别并监控您的所有呼叫。实例启动通常需要更多时间，因此您将能够看到您在启动时使用了多少时间，这真的是一个超时问题。

对于 Java 版本，您可以尝试将日志级别更改为调试：

```
.level = DEBUG 
```

在您的 logging.properties 文件中。它将为您提供有关实例启动过程的更多信息。

# javascript - 如何从jsp页面访问java脚本中使用的变量？

> ID：12757043
> 
> 赞同：3
> 
> 时间：2012-10-06T05:32:10.727
> 
> 标签：javascript, jsp

我在我的网页中使用 ajax。我想通过 jsp 页面访问 java 脚本函数（在 html 的头部）中使用的变量。Jsp 页面正在使用该变量从数据库中检索数据。

我怎样才能做到这一点？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:48:25.717

如果您需要通话数据，您将设置 & 或事先设置一个为空的 var。我意识到，ajax 本地化甚至声明了新的 var，我发现最好的方法是附加到现有的。现在使用新的字符串和/或文字数组/对象

```
 <script>
     function s(e){
      alert(e);
     }

      var a = '';

    //Jquery Version
     $.get('test.php',function(data){
       a += data;
      s(a);
      });

    // Javascript Version
      function ajaxFunction(){
        var ajaxRequest;  // The variable that makes Ajax possible!

        try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
        } catch (e){
            // Internet Explorer Browsers
            try{
                ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try{
                    ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e){
                    // Something went wrong
                    alert("Your browser broke!");
                    return false;
                }
            }
        }
        // Create a function that will receive data sent from the server
        ajaxRequest.onreadystatechange = function(){
            if(ajaxRequest.readyState == 4){

                a += ajaxRequest.responseText;
                s(a);
            }
        }

        ajaxRequest.open("GET", "test.php" , true);
        ajaxRequest.send(null); 
    }

    $(function(){
    ajaxFunction();
    });
    //-->
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:27:23.683

您可以通过添加新的 jsp 文件来做到这一点，流程将是这样的：

1.  创建新的 jsp 文件，如 databaseOperation.jsp，其中将包含用于检索数据库记录的代码。
2.  通过 javascript 函数，调用 databaseOperation.jsp 文件并传递您的 javascript 变量。

3.  在您的 jsp 文件中访问此变量并从 DB 中检索所需的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T07:49:23.087

您可以通过调用并使用请求`ajax`传递该变量来简单地做到这一点`ajax`

```
<script>
var id=1;

$.get("yourpage?id="+id,function(){

//get this id serverside using `get` 
})

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T06:47:25.920

你必须改变你的方法来完成这件事。我们无法将 javascript 变量值设置为写入 jsp 文件中的数据库代码。这是因为，数据库代码将从服务器端呈现，只有 html 将发送到客户端。

您可以通过使用具有异步支持的此数据库代码的控制器（Servlet）并在您的 jsp 文件中通过 javascript ajax 调用此控制器并根据您的要求操作 HTML DOM 来实现此目的。

# java - 字符串比较未按预期工作。我想比较两个字符串值，但比较似乎总是给出一个真实的结果

> ID：12757046
> 
> 赞同：0
> 
> 时间：2012-10-06T05:32:20.623
> 
> 标签：java, android, string, android-sqlite

我正在从我的数据库中获取列值（工作正常），然后在循环时将这些值一次放入“字符串 X”中。在同一个循环中，我想将用户通过 UI 提供给我的值与 X 进行比较，并基于此比较，我希望 x 为真或假。但是 x 总是显示为真！这是我的代码：

```
 private boolean fillData() {
       Cursor c = DBHelper.fetchAllIDs();
       // List<String> idList = new ArrayList<String>();
       if (c.moveToFirst()) {
        do {
            String X = (c.getString(c.getColumnIndexOrThrow("IDno")));
            Toast.makeText(getApplicationContext(), "" +X, Toast.LENGTH_LONG).show();
            String B = null; 
            B = Idno.getText().toString();
            if (B.equals(X));
            {
                Toast.makeText(getApplicationContext(), "If condition true"+B, Toast.LENGTH_LONG).show();
                x=true;
            }
        } while (c.moveToNext());

       }
    return x;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:47:40.700

尝试打印的值

```
String X = (c.getString(c.getColumnIndexOrThrow("IDno"))); 
```

例如 Sop(x) 或内部日志。

并以同样的方式打印

```
 B = Idno.getText().toString(); 
```

Sop(B) 或内部日志(B)。

它可能在含义上相同但在现在时不同（区分大小写）。

采用

```
if(B.equalsIgnoreCase(X))
{
} 
```

代替`if (B.equals(X));`

不要将`condition termination symbol`诸如放在`;`if 语句的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:50:47.757

我得到了这个伙计们，我错误地放了一个';' 在我的 if 语句的末尾。对不起！愚蠢的！

# html - 在 HTML 中合并两个页面

> ID：12757050
> 
> 赞同：0
> 
> 时间：2012-10-06T05:33:24.600
> 
> 标签：html

我正在为一个研究所创建一个网站，因为我是这个领域的新手，所以我想知道我是否可以为标题部分创建一个页面（其中包含该研究所的徽标和名称），我可以合并那个页面到我正在创建的每个页面。如果可能的话建议我如何结合标题部分和新创建的页面..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:45:29.553

令人惊讶的是，没有办法在直接的 HTML 中做到这一点。甚至在 HTML5 中也没有。

如果您只创建几个页面，我建议只需将内容复制粘贴到每个页面的 HTML 文件中。诚然，这种方法很快就会成为一种负担。

一些 Web 服务器会在提供页面之前解析页面的 HTML，查找特定类型的 HTML 注释，然后将其解释为插入另一个文件内容的命令。此功能称为“[服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes)”或“SSI”。一些 Web 服务器，例如[Apache Tomcat](http://tomcat.apache.org/)，具有此功能，但出于安全考虑，默认将其关闭。

如果您正在构建[动态页面](http://en.wikipedia.org/wiki/Dynamic_web_page)，其中提供的 HTML 内容是使用编程语言即时创建的，而不是从预先创建的磁盘文件中读取，那么您绝对可以使用该编程语言包含 HTML 片段。

我建议你做一些额外的研究来建立你的网络创作技能。一个很好的培训来源是O'Reilly Media, Inc的“ [Head First HTML with CSS & XHTML ”一书。](http://www.headfirstlabs.com/books/hfhtml/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T04:58:22.567

您可以从不同的地方提取 html 代码并将它们与 php 合并。我做这件事已经好几年了，所以我无法详细说明。

# c# - 如果文件不存在并且知道文件已创建，WinRT 会创建一个文件

> ID：12757053
> 
> 赞同：2
> 
> 时间：2012-10-06T05:33:48.903
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我想打开一个文件，如果它不存在创建它，类似于[这个](https://stackoverflow.com/questions/11061334/how-to-create-a-file-when-the-file-is-not-exist-in-winrt)问题

问题是，如果文件是新创建的，我会执行一些额外的初始化逻辑**。**

我可以用

`await folder.CreateFileAsync(fileName, CreationCollisionOption.OpenIfExists)`

如果文件已经存在，则打开该文件，但是我如何判断此操作的结果是新创建的文件还是仅打开现有文件？这里有最佳实践还是我一直在查看文件创建日期或文件大小？

理想情况下，代码看起来像这样：

```
var file = await folder.CreateFileAsync(fileName, CreationCollsionOption.OpenIfExists);

//How can I reliably tell if the file was new?
if (fileIsNew)
  await InitializeFile(file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:07:59.187

使用 时，除了查看文件的或`CreationCollsionOption.OpenIfExists`之外，没有办法知道发生了什么。`CreatedDate``Size`

所以我认为如果你使用`GetFileAsync`（如在[链接的问题](https://stackoverflow.com/questions/11061334/how-to-create-a-file-when-the-file-is-not-exist-in-winrt)中）并在分支中执行你的初始化逻辑，你会更好`catch FileNotFoundException`，因为[WinRt 中没有 File.Exists](https://stackoverflow.com/questions/10067220/how-do-i-find-out-if-a-file-is-already-created-in-a-storagefolder)

但是，还有第三种解决方案，您可以枚举目录中的文件并手动检查是否存在：

```
var files = await folder.GetFilesAsync(CommonFileQuery.OrderByName);
var file = files.FirstOrDefault(x => x.Name == fileName);
if (file == null)
{
    file = await GetFilesAsync(fileName);
    await InitializeFile(file);    
} 
```

注意：在这种情况下，您可能必须准备处理竞争条件，因为它可能在您处理文件列表时发生，有人在您之前创建了文件（这就是不`File.Exists`存在方法的原因）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:41:43.463

我有类似的情况，我想确定一个应用程序是否是第一次运行。这就是我的处理方式。

```
try
{
    await ApplicationData.Current.LocalFolder.GetFileAsync(FirstRunFile);
}
catch (FileNotFoundException)
{
    isFirstRun = true;
}

if (isFirstRun) {
    // Perform necessary initialization here
    await ApplicationData.Current.LocalFolder.CreateFileAsync(FirstRunFile);
} 
```

# sql-server - 如何从表中获取最新插入的标识？

> ID：12757058
> 
> 赞同：0
> 
> 时间：2012-10-06T05:35:24.723
> 
> 标签：sql-server

我想从表中检索最新插入甚至更新的标识。但是每当我编写以下代码时，根本没有结果。

```
select * 
from PersonHowEducation prh 
inner join HowzeEducation he on prh.HowzeEducationId = he.HowzeEducationId
where he.HowzeEducationId = @@IDENTITY 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:05:22.370

如果这是批处理脚本的一部分，并且您只是将它插入到同一个会话中，那么您将使用 SCOPE_IDENTITY() 来检索最后插入的`HowzeEducationId`值。

```
select * from PersonHowEducation prh inner join HowzeEducation he on 
      prh.HowzeEducationId=he.HowzeEducationId
      where he.HowzeEducationId=SCOPE_IDENTITY() 
```

但是，如果这是来自一个完全不同的会话，一个不**只是**执行插入的会话，那么您可以使用插入的最后一条记录

```
select * from PersonHowEducation prh inner join HowzeEducation he on 
      prh.HowzeEducationId=he.HowzeEducationId
      where he.HowzeEducationId=(select top(1) HowzeEducationId from HowzeEducation
                                 order by HowzeEducationId desc) 
```

*注意：在极少数情况下，身份插入不会**在**表中创建最大的 id，例如，如果有人决定表应该有 1 条 id=1,000,000,001 的记录并手动将身份重新设置为 10,001。*

另一种选择，如果可以在插入后删除记录，则可能会失败。

```
select * from PersonHowEducation prh inner join HowzeEducation he on 
      prh.HowzeEducationId=he.HowzeEducationId
      where he.HowzeEducationId=(SELECT IDENT_CURRENT('HowzeEducation')) 
```

# ember.js - Ember.js 状态管理器和路由器。两个都用好吗？

> ID：12757060
> 
> 赞同：1
> 
> 时间：2012-10-06T05:35:52.413
> 
> 标签：ember.js

管理不同类型状态的最佳实践是什么？例如，我有一个应用程序，其中某些状态对绑定到路由有意义，因此我正在使用路由器，但其他状态无法反映在 URL 中，这样做没有意义。那么是否可以让完整路由器管理某些状态而由状态管理器实例管理其他状态？拥有多个状态管理器是否可以接受，或者这是一个坏主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:54:54.613

`Ember.StateManager`是的 - 使用不是路由器的区域是完全可以接受的。

路由器非常擅长处理整体应用程序状态，将模型/视图/控制器连接在一起，渲染到插座，并且在没有全局依赖的情况下始终可用。然而，路由器实际上只是一个状态管理器，一次只能处于一种状态，有时在其他对象中需要额外的状态。

您可以在对象内部使用 StateManager。这方面的一个示例是`Car`具有以下状态的模型：驾驶、停车、撞车、维修。状态管理器非常适合这里，因为有一个最终状态，您可以控制可用的操作。例如，从 出发没有意义`driving->repairing`，只有`crashed->repairing`被允许。

# iphone - UIWebView：如何每次都从空白视图开始？

> ID：12757062
> 
> 赞同：1
> 
> 时间：2012-10-06T05:36:01.010
> 
> 标签：iphone, uiwebview, nsurlrequest

`UIWebView`我正在使用and查找网页`NSURLRequest`，它工作正常，但我希望它每次都以空白页开头，而不是显示最后一次 URL 查找的结果。有没有简单的方法可以做到这一点？

我正在这样做`viewDidLoad:`

```
wikiText = [[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 370)] autorelease];
[wikiView addSubview:wikiText]; 
```

...然后我加载`UIWebView`这样的：

```
NSString *urlAddress =[NSString stringWithFormat: @"http://%@", randomEWiki];

NSURL *url = [NSURL URLWithString:urlAddress]; 

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

[wikiText loadRequest:requestObj]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:39:59.760

先从这个开始。

```
 [wikiText loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@""]]]; 
```

这首先加载一个空白页面。然后打开您常用的网址。

```
 NSString *urlAddress =[NSString stringWithFormat: @"http://%@", randomEWiki];

 NSURL *url = [NSURL URLWithString:urlAddress]; 

 NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

 [wikiText loadRequest:requestObj]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:41:07.317

我们也可以像这样使用Html标签

```
[wikiText loadHTMLString:@"<html><head></head><body></body></html>" baseURL:nil]; 
```

然后在你可以加载你的实际网址之后

```
NSString *urlAddress =[NSString stringWithFormat: @"http://%@", randomEWiki];

NSURL *url = [NSURL URLWithString:urlAddress]; 

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

[wikiText loadRequest:requestObj]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:47:33.337

无需加载加载空白 URL，您只需使用`viewWillAppear`，根据这一点，每次您的视图出现时`webView`都会加载您的页面，最初给您白色空白页面，然后是您的 url 页面。

```
-(void)viewWillAppear:(BOOL)animated
{
    wikiText = [[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 370)] autorelease];
    [wikiView addSubview:wikiText];

    NSString *urlAddress =[NSString stringWithFormat: @"http://%@", randomEWiki];
    NSURL *url = [NSURL URLWithString:urlAddress]; 
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [wikiText loadRequest:requestObj]; 
} 
```

# pycuda - PyCuda多线程执行错误

> ID：12757064
> 
> 赞同：1
> 
> 时间：2012-10-06T05:36:15.860
> 
> 标签：pycuda

这是我的 pycuda 代码。执行时出现线程错误。我正在尝试在其中实现 pycuda 线程。我已经搜索了谷歌但找不到答案。对于 pycuda 我是 Internet 的资源也非常有限。所以伙计们请帮帮我。

```
{{{#!python
import pycuda
import pycuda.driver as cuda
from pycuda.compiler import SourceModule
import threading
import numpy

class GPUThread(threading.Thread):
    def __init__(self, number, some_array):
        threading.Thread.__init__(self)

        self.number = number
        self.some_array = some_array

    def run(self):
        self.dev = cuda.Device(self.number)
        self.ctx = self.dev.make_context()

        self.array_gpu = cuda.mem_alloc(some_array.nbytes)
        cuda.memcpy_htod(self.array_gpu, some_array)

        test_kernel(self.array_gpu)
        print "successful exit from thread %d" % self.number
        self.ctx.pop()

        del self.array_gpu
        del self.ctx

def test_kernel(input_array_gpu):
    mod = SourceModule("""
        __global__ void f(float * out, float * in)
        {
            int idx = threadIdx.x;
            out[idx] = in[idx] + 6;
        }
        """)
    func = mod.get_function("f")

    output_array = numpy.zeros((1,512))
    output_array_gpu = cuda.mem_alloc(output_array.nbytes)

    func(output_array_gpu,
          input_array_gpu,
          block=(512,1,1))
    cuda.memcpy_dtoh(output_array, output_array_gpu)

    return output_array

cuda.init()
some_array = numpy.ones((1,512), dtype=numpy.float32)
num = cuda.Device.count()

gpu_thread_list = []
for i in range(num):
    gpu_thread = GPUThread(i, some_array)
    gpu_thread.start()

}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:44:19.170

您忘记附加 gpu 线程。只需`gpu_thread_list.append(gpu_thread)`在代码中的 start() 之后添加即可。在线 pycuda 有很多很好的教程。检查[一下](http://wiki.tiker.net/PyCuda/Examples)。

# java - 使用 Java 中的 GridBagLayout 无法正确调整面板大小

> ID：12757069
> 
> 赞同：3
> 
> 时间：2012-10-06T05:37:07.897
> 
> 标签：java, swing, user-interface, jpanel, gridbaglayout

因此，我在我的 GUI 中使用了 GridBagLayout，但我遇到了一些无法正确调整大小的问题。在有人提出替代布局之前，我很肯定我想使用 GridBagLayout；我将有大量的组件，我想正确地布置它们，当前的代码/图像只显示我现在所拥有的。

无论如何，问题是它没有正确调整自己的大小。我希望它在调整大小时保持当前的纵横比，但是它没有。某些面板在调整大小时具有某种优先级，因此当我调整大小时，它会破坏纵横比。本质上，我有一些面板比另一个大，但是在调整大小后，它变得比另一个小，如下所示：

[http://i.imgur.com/LWhHm.png](http://i.imgur.com/LWhHm.png)

现在，我真正想要的是让他们保持已经提出的比例。如您所见，我希望 GUI 的聊天部分比左侧面板中的任何一个都小，就像原来的那样。

下面是我现在用来产生这个的代码：

```
jpPack = new JPanel();
    jpCards = new JPanel();
    jpInfo = new JPanel();
    jpChat = new JPanel();

    jpPack.setBackground(Color.red);
    jpCards.setBackground(Color.blue);
    jpInfo.setBackground(Color.green);

    //create the Constraints and set some that will apply to each panel
    GridBagConstraints c = new GridBagConstraints();
    c.fill = GridBagConstraints.BOTH;

    //set the number of columns/rows to use
    c.gridwidth = 1;
    c.gridheight = 1;
    //set the x and y position
    c.gridx = 0;
    c.gridy = 0;
    //set the weight properties
    c.weightx = 1.0;
    c.weighty = 1.0;

    getContentPane().add(jpCards, c);

    //set the number of columns/rows to use
    c.gridwidth = 1;
    c.gridheight = 1;
    //set the x and y position
    c.gridx = 0;
    c.gridy = 1;
    //set the weight properties
    c.weightx = 1.0;
    c.weighty = 1.0;

    getContentPane().add(jpPack, c);

    //set the number of columns/rows to use
    c.gridwidth = 1;
    c.gridheight = 1;
    //set the x and y position
    c.gridx = 1;
    c.gridy = 0;
    //set the weight properties
    c.weightx = 0.2;
    c.weighty = 0.2;

    getContentPane().add(jpInfo, c);

    //set the number of columns/rows to use
    c.gridwidth = 1;
    c.gridheight = 1;
    //set the x and y position
    c.gridx = 1;
    c.gridy = 1;
    //set the weight properties
    c.weightx = 0.2;
    c.weighty = 0.2;

    getContentPane().add(jpChat, c);
    jpChat.setLayout(new GridLayout());
    jpChat.add(client.gui.getContentPane(), c);

    setVisible(true); 
```

当我在做的时候，我不妨问一下我的另一个问题。我想为整个 GUI 和聊天面板设置最小尺寸限制。首先，我希望它禁止用户将其调整为小于某个 x 和某个 y。对于后者，我希望它保持我说的我想要的纵横比，然后在我达到两个右面板的最小值后只调整左面板的大小。也就是说，它将调整每个面板的大小直到某个大小，然后继续调整整个 GUI 的大小，但只调整左侧面板的大小，而将右侧面板保留为最小大小。

谢谢你帮助我。这真的让我很烦，我花了几个小时试图做到这一点，弄乱了 GridBagLayoutConstraints 而没有得到任何结果。这是我能做到的最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:28:26.253

我试图对您的问题进行一些研究，并且出于一个简单的原因，这可能会引起您的担忧。您在 中使用的**JTextField**`ChatPanel` ，在初始化时，您必须为其指定列，这可能会导致这种效果。由于我制作上述代码的方式，这个东西在任何意义上都没有给我任何奇怪的行为。尽管关于您的第二个问题，@kleopatra 给出了一些见解。这是我使用的代码：

```
import java.awt.*;
import javax.swing.*;

public class ClientGrid
{
    private void displayGUI()
    {
        JFrame frame = new JFrame("Client Grid");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridBagLayout());

        JPanel bluePanel = new JPanel();
        bluePanel.setOpaque(true);
        bluePanel.setBackground(Color.BLUE);

        JPanel greenPanel = new JPanel();
        greenPanel.setOpaque(true);
        greenPanel.setBackground(Color.GREEN);

        JPanel redPanel = new JPanel();
        redPanel.setOpaque(true);
        redPanel.setBackground(Color.RED);

        JPanel chatPanel = new JPanel();
        JTextField chatField = new JTextField();
        chatPanel.setLayout(new BorderLayout(5, 5));
        chatPanel.add(chatField, BorderLayout.PAGE_START);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 0.7;
        gbc.weighty = 0.3;

        contentPane.add(bluePanel, gbc);

        gbc.gridx = 1;
        gbc.weightx = 0.3;

        contentPane.add(greenPanel, gbc);

        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.weightx = 0.7;
        gbc.weighty = 0.7;

        contentPane.add(redPanel, gbc);

        gbc.gridx = 1;
        gbc.weightx = 0.3;

        contentPane.add(chatPanel, gbc);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ClientGrid().displayGUI();
            }
        });
    }
} 
```

# awk - 改变 awk 输出的外观

> ID：12757075
> 
> 赞同：1
> 
> 时间：2012-10-06T05:38:45.017
> 
> 标签：awk

我使用以下代码从文本文件中提取蛋白质残基。

```
awk '{
if (FNR == 1 ) print ">" FILENAME  
if ($5 == 1 && $4 > 30) {
printf $3
 }
}
END { printf "\n"}'  protein/*.txt > seq.txt 
```

当我使用上面的代码时，我得到了以下输出。

```
>1abd
MDEKRRAQHNEVERRRRDKINNWIVQLSKIIPDSSMESTKSGQSKGGILSKASDYIQELRQSNHR>1axc
RQTSMTDFYHSKRRLIFS>1bxc
RQTSMTDFYHSKRRLIFSPRR>1axF
RQTSMTDFYHSKRR>1qqt
ARPYQGVRVKEPVKELLRRKRG 
```

我想得到如下所示的输出。如何更改上面的代码以获得以下输出？

```
>1abd
MDEKRRAQHNEVERRRRDKINNWIVQLSKIIPDSSMESTKSGQSKGGILSKASDYIQELRQSNHR
>1axc
RQTSMTDFYHSKRRLIFS
>1bxc
RQTSMTDFYHSKRRLIFSPRR
>1axF
RQTSMTDFYHSKRR 
>1qqt
ARPYQGVRVKEPVKELLRRKRG 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:30:51.407

这可能对您有用：

```
awk '{
if (FNR == 1 ) print newline ">" FILENAME  
    if ($5 == 1 && $4 > 30) {
        newline="\n";
        printf $3
    }
}
END { printf "\n"}'  protein/*.txt > seq.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:13:29.007

使用 gawk 版本 4，您可以编写：

```
gawk '
    BEGINFILE {print ">" FILENAME}
    ($5 == 1 && $4 > 30) {printf "%s",  $3}
    ENDFILE {print ""}
' filename ... 
```

[http://www.gnu.org/software/gawk/manual/html_node/BEGINFILE_002fENDFILE.html#BEGINFILE_002fENDFILE](http://www.gnu.org/software/gawk/manual/html_node/BEGINFILE_002fENDFILE.html#BEGINFILE_002fENDFILE)

# java - 如何将 JNI C 代码中的指向数组的指针发送到 Java 代码？

> ID：12757076
> 
> 赞同：2
> 
> 时间：2012-10-06T05:38:51.567
> 
> 标签：java, c, pointers, java-native-interface

如何将指向数组的指针从 JNI C 代码发送到 Java 代码？例如 ：

*JNI C 代码：*

```
jclass cls = (*env)->GetObjectClass(env,obj);
jmethodID mid = (*env)->GetMethodID(env,cls,"print"," ?? "); // What should be the signature here ?
jvalue a1,*arr;
a1.i = 2002;
a1.f = 12.90;
a1.c = 's';
a1.j = 344554;
a1.b = TRUE;
arr = &a1;
(*env)->CallVoidMethodA(env,obj,mid,arr); 
```

*Java函数：*

```
public void print(?????) { // what should be the argument here ?
  // add code here
} 
```

java 函数应该如何接收指向数组的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:35:44.723

首先，您的代码存在两个问题：

1.  `arr`实际上不是一个数组（它指向单个 jvalue），因此没有理由通过指针而不是值来传递它。
2.  所有这些`a1.X`赋值都是无用的，除了最后一个，因为`jvalue`它是所有可能的原始类型和引用类型的*联合*。

Next: 将原始 C 指针传递给 JNI 是不可能的（嗯，你可以，但你只能让 Java 将指针视为数字而不是对象）。您必须创建一个 Java 数组或缓冲区对象。如果要创建引用数组，则数组很好，尽管必须复制内存；如果您希望 C 数组与 Java 缓冲区共享内存，则缓冲区很好。

# java - Java 日期时间差异

> ID：12757077
> 
> 赞同：1
> 
> 时间：2012-10-06T05:38:59.870
> 
> 标签：java, spring, date, time, mocking

在编写集成测试时，我期待响应中有一个硬编码的日期。

基本上我硬编码`expected date value '2020-11-10T00:00:00.000-05:00'` 并运行 `new GregorianCalendar(2020, 10, 10).getTime()`

当我在本地放置和断言并运行它时，它通过了，但是当相同的代码被推送到竹构建服务器时，它生成的实际值是`'2020-11-10T00:00:00.000Z'`，所以我的测试失败了。

1.  为什么同一个 calendar.getTime 生成两个不同的时间，是因为服务器机器配置为 GMT 吗？

2.  我可以做些什么让它们同时使用或任何其他解决方法吗？

注意：在这里将其设为字符串或比较没有时间的日期不是一个选项，因为我使用的是 Spring MockWebServiceServer，在其中我必须对 responseXML 进行硬编码并指定日期，就像在 Enum 中这样。

```
 REQUESTAUTOMATESETTLEMENTWORKCASE("<aut:AutomateSettlementWorkcaseRequest xmlns:aut=\"http://www.abcd.com/abcd/workflow/services/workcase/model/AutomateSettlementWorkcase_1_0_0\">" +
          "  <aut:customerAccountId>5049903033584324</aut:customerAccountId>\n" +
          "  <aut:settlementDate>2020-11-10T00:00:00.000-05:00</aut:settlementDate>\n" +
          "  </aut:AutomateSettlementWorkcaseRequest>"), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:31:06.263

输入数据中的“-5”部分将其丢弃......理想情况下，您应该在构建日历时指定时区，然后将其设置为 UTC 凌晨 5 点（例如）。基本上，`2020-11-10T00:00:00.000-05:00`与 是同一瞬间`2020-11-10T05:00:00.000Z`。

现在，我们不知道保留与 UTC 的偏移是否对您很重要。如果是，您需要在日历中设置一个适当的时区 - 一个与生成输入数据的规则相同的时区。如果不是，我会使用 UTC 并适当地设置时间。

我个人建议使用[Joda Time](http://joda-time.sf.net)而不是- 它是一个*更好*`Calendar`的日期和时间 API。对于初学者来说，没有基于 0 的月份:)`Date`

# c# - 我已经用 List 绑定了一个网格 （临时列表），我如何将列表文本选择到网格视图中项目模板中的控件文本中

> ID：12757084
> 
> 赞同：0
> 
> 时间：2012-10-06T05:40:45.937
> 
> 标签：c#, asp.net

我已经用列表（临时列表）绑定了一个网格，如何将列表文本选择到网格视图中项目模板中的控件文本中。

**aspx**

```
<asp:GridView ID="gvDenomination" runat="server"> 
    <Columns>
        <asp:TemplateField HeaderText="Value">
            <ItemTemplate> 
                <asp:Label ID="lblValue" runat="server" Text='<%#Eval("lstdenomination") %>'> </asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Delete"> 
            <ItemTemplate>
                <asp:LinkButton runat="server">Delete</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
     </Columns>
</asp:GridView> 
```

**代码隐藏**

```
stdenomination.Add(Convert.ToInt32(txtDenomination.Text));
gvDenomination.DataSource = lstdenomination;
gvDenomination.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:50:55.307

如果我得到你，`lstdenomination`是一个`List<int>`。你可以这样做

```
 <asp:TemplateField HeaderText="Value">
        <ItemTemplate> 
            <asp:Label ID="lblValue" runat="server" Text='<%# Container.DataItem %>'> </asp:Label>
        </ItemTemplate>
    </asp:TemplateField> 
```

# c++ - 如何使用 C++ 在 Active Directory 的属性中设置值？

> ID：12757085
> 
> 赞同：0
> 
> 时间：2012-10-06T05:40:47.977
> 
> 标签：c++, c, windows, ldap

我正在使用 ldap_modify 函数来使用 C++ 更改属性值...

```
msgid=ldap_modify_ext_s( ld, dnNameval, ldapmod,NULL,NULL ); 
```

问题是该函数中的 mod_val 参数...

```
LDAP *id;
dnNameval ="distinguised name"; 
```

在 ldapmod 中有三个值...

1.  mod_type="待更改属性";
2.  mod_op=LDAP_MOD_REPLACE；
3.  ldapmod 结构

ldapmod 结构是：

```
 typedef struct ldapmod {
      int mod_op;
      char *mod_type;
      union {
        char **modv_strvals;
        struct berval **modv_bvals;
      } mod_vals;
    #define mod_values        mod_vals.modv_strvals
    #define mod_bvalues       mod_vals.modv_bvals

} LDAPMod; 
```

我尝试像这样传递值：

```
mod_vals=(PWCHAR*){"bala",Null}; 
```

导致错误

```
error C2679: binary '=' : no operator found which takes a right-hand operand 
of type 'PWCHAR *' (or there is no acceptable conversion) 
```

我也试过这个：

```
mod_vals.modv_strvals=(PWCHAR*) Password1;
mod_vals.modv_bvals=NULL; 
```

但随后数组有一个空值......

谁能帮我弄清楚如何传递该变量中的值？我需要包含任何额外的头文件吗？我已经在使用 winldap.h 标头了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:23:12.037

这不起作用：

```
 mod_vals = (PWCHAR*){"bala",Null}; 
```

您不能以这种方式为联合分配值。您必须指定要写信给工会的哪些成员。另外，`(PWCHAR *)`是错误的类型；你不是在处理宽字符。即使你是，你也不能通过强制转换来转换字符串。

这也不起作用：

```
mod_vals.modv_strvals=(PWCHAR*) Password1; 
mod_vals.modv_bvals=NULL; 
```

成员是一个指向指针的`modv_strvals`指针，而不仅仅是一个指针，写入联合的两个成员是没有意义的；它们是相互排斥的。根据您使用`modv_strvals`或的上下文`modv_bvals`，从不同时使用两者。

你可能想要这样做：

```
mod_vals.modv_strvals = {"bala", Null}; 
```

# php - 由于 foreach 和 for 循环的多个输出

> ID：12757087
> 
> 赞同：0
> 
> 时间：2012-10-06T05:40:52.023
> 
> 标签：php, for-loop, foreach

我正在阅读一堆 excel 文件并将它们的数据插入数据库中。查询都正常工作。唯一的问题是，如果作者存在于第一个 excel 文件中，则其条目也显示在其他 excel 文件中。这是我的代码。

```
$array = array(
1=>"abc",
2=>"def",
3=>"age");

foreach ($array as $key=>$val) {
    $file = $array[$key].'.xls';
    $data->read($file);
    $ID = $key;
    for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++) {
        $a = addslashes($data->sheets[0]['cells'][$i][1]);
        if($a == "Ali")
        {
             echo $a."=>".$ID." ".$i."<br>";
        }
    }
} 
```

**所需的输出是**

```
abc.xls
Ali=>1 282
def.xls
age.xls 
```

输出是

```
abc.xls
Ali=>1 282
def.xls
Ali=>2 282
age.xls
Ali=>3 282 
```

谁能告诉我这段代码哪里出错了。任何帮助将不胜感激..

**注意**Excel 工作表中存在的行数为 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:34:31.410

使用[unset()](http://php.net/manual/en/function.unset.php)`$a`在每次循环迭代结束时取消设置（销毁）当前值。所需更改如下：
更改以下内容：

```
for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++) {
    $a = addslashes($data->sheets[0]['cells'][$i][1]);
    if($a == "Ali")
    {
      echo $a."=>".$ID." ".$i."<br>";
    }
} 
```

对此：

```
for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++) {
    $a = addslashes($data->sheets[0]['cells'][$i][1]);
    if($a == "Ali")
    {
      echo $a."=>".$ID." ".$i."<br>";
    }
    unset($a);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:34:30.583

在我看来，问题在于该特定行的第 1 列始终是什么`"Ali"`。这是一个猜测，因为除了两个 extra 之外，您的输出与预期的一样`Ali=>1 282`。如果你能给我们前几行只是为了理解会有所帮助。否则，这似乎真的是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:53:58.003

我没有在`foreach`loop 中包含这一行，因为 $data 总是占用第一个 excel 文件。不采取进一步的文件。此行包含在 foreach 循环之前。

线条是

```
$data = new Spreadsheet_Excel_Reader();
$data->setOutputEncoding('utf-8'); 
```

现在代码变成

```
foreach ($array as $key=>$val) {
    $data = new Spreadsheet_Excel_Reader();
    $data->setOutputEncoding('utf-8');
    $file = $array[$key].'.xls';
    $data->read($file);
    $ID = $key;
    for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++) {
       $a = addslashes($data->sheets[0]['cells'][$i][1]);
       if($a == "Ali")
       {
         echo $a."=>".$ID." ".$i."<br>";
       }
    }
} 
```

# java - 为操作栏使用自定义主题时如何更改操作栏夏洛克菜单项字体？

> ID：12757094
> 
> 赞同：7
> 
> 时间：2012-10-06T05:42:44.920
> 
> 标签：java, android, actionbarsherlock

当我使用默认的夏洛克灯主题时，我可以通过这种方法更改字体（可以转换为 TextView）

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.main, menu);

    getLayoutInflater().setFactory(new LayoutInflater.Factory() {
        public View onCreateView(String name, Context context,
                AttributeSet attrs) {

            if (name.equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")
                    || name.equalsIgnoreCase("TextView")) {
                try {
                    LayoutInflater li = LayoutInflater.from(context);
                    final View view = li.createView(name, null, attrs);
                    new Handler().post(new Runnable() {
                        public void run() {

                            // here I can change the font!
                            ((TextView)view).setTypeface(MY_CUSTOM_TYPE_FACE);
                        }
                    });
                    return view;
                } catch (InflateException e) {
                    // Handle any inflation exception here
                } catch (ClassNotFoundException e) {
                    // Handle any ClassNotFoundException here
                }
            }
            return null;
        }
    });

    return true;
} 
```

![具有默认灯光主题的 actiobarsherlock](../Images/0ca4508dd2e63ef9720ef8839ace1421.png)

但是当我用[这个工具](http://jgilfelt.github.com/android-actionbarstylegenerator/)使用自定义主题时，上面的解决方案不起作用。这样，每个项目都是 ActionMenuItemView 的一个实例，我不知道如何对其应用字体。

![带有自定义主题的 actionbarsherlock](../Images/509c0dfa77cad77f71d679df97831f1b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T03:39:38.003

需要创建自定义菜单视图

```
 private ActionBar setCustomView(ActionBar actionBar,String title, String subtitle,boolean isSubTitleEnable){
    LayoutInflater inflator = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflator.inflate(R.layout.customer_view, null);

    TextView tv = (TextView) v.findViewById(R.id.cust_action_bar_title);
    Typeface tf = Typeface.createFromAsset(this.getAssets(), "YOURFONT.ttf");
    tv.setTypeface(tf);
    tv.setText(title);

    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayOptions(0, actionBar.DISPLAY_SHOW_TITLE);
    actionBar.setDisplayShowCustomEnabled(true);
    actionBar.setCustomView(v);
  return actionBar; 
 } 
```

# sql-server-2012 - 在已部署的 Lightswitch / SQL Server 2012 LocalDb 中隐藏数据库架构和数据

> ID：12757095
> 
> 赞同：0
> 
> 时间：2012-10-06T05:42:50.007
> 
> 标签：sql-server-2012, visual-studio-lightswitch, localdb

我正在创建一个 2 层 Lightswitch 应用程序，它将通过 ClickOnce 部署用于单用户场景。需要保护数据库模式和数据不被用户访问。

我知道这可能不是完全可能的，但是有什么解决方案吗？

我们查看了一个名为 的第三方工具`DbDefence`，它看起来非常合适，但他们的再分发许可定价现在远远超出了我们的预算。

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:07:03.903

不，我知道没有办法阻止用户*查看*甚至*摆弄*数据库模式（如果他们足够了解的话）。除非您为他们创建数据库，否则他们必须具有**创建**数据库所需的权限。Plus 更新（通过 Click-Once）需要**更新**表的权限。

如果您确实找到了某些东西，那么它可能会阻止应用程序正常工作。

# python - Python函数中的类型错误

> ID：12757096
> 
> 赞同：2
> 
> 时间：2012-10-06T05:42:51.347
> 
> 标签：python, function, types, typeerror

我正在开发一个小程序，它计算在某些行星体上发射的物体的轨迹，然后用 Turtle 图形绘制它们。目前，我遇到了一个我似乎无法弄清楚的类型错误问题。

所以，这里是堆栈：

```
Traceback (most recent call last):
File "MY FILEPATH", line 174, in <module> main()
File "MY FILEPATH", line 153, in main
    x1,y1 = xtoy(dist(velo,ang,grav),velo,ang,grav,i)
File "MY FILEPATH", line 66, in xtoy
    sety = int(dist*tan(ang)-(grav*dist**2)/(2*velo**2*cos*((cos(ang)))))
TypeError: unsupported operand type(s) for *: 'int' and 'builtin_function_or_method' 
```

这是代码的pastebin。

[http://pastebin.com/aY0fhGEV](http://pastebin.com/aY0fhGEV)

我完全被难住了，已经绞尽脑汁一个星期了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:44:54.933

你有`2 * cos`. 这是试图将数字乘以函数的 2 倍`cos`。你需要在第二部分取一些东西*的余弦。*也许你的意思是`2*cos(ang)*cos(ang)`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:46:19.597

您在倒数第二个之后有一个额外的 * `cos`，它将它视为内置而不是评估参数。

# c++ - 用于检查字符串是否平衡 ()、{} 和 [] 的 C++ 程序

> ID：12757098
> 
> 赞同：3
> 
> 时间：2012-10-06T05:42:55.917
> 
> 标签：c++, brackets, parentheses, curly-braces

所以这是我的问题：

我应该编写一个 C++ 程序来检查字符串是否平衡。到目前为止，我的代码正在工作以确保它具有相同数量的 ('s 和 )'s（与 ['s 和 {'s 相同）。问题是这几乎适用于所有内容，但不适用于 {'s、('s 和 ['s 都混在一起的字符串。

例如：“{ { [ ( ) ] } ( ) }” 以应有的平衡（真实）返回。但是，“{ ( [ ] } )” 会返回 true，但它不应该。

逻辑和/或代码中有哪些想法可以检查它们何时出现故障？

谢谢你的帮助！

如果有帮助，我的代码如下：

```
bool ExpressionManager::isBalanced(string expression)
{
//remove whitespace
string edited;
for(int i = 0; i < expression.length(); i++)
{
    if(expression[i] == ' ')
    {
        continue;
    }
    else
    {
        edited += expression[i];
    }
}
expression = edited;

//set up brckets 
string brackets;

for(int i = 0; i < expression.length(); i++)
{
    if (expression.at(i)=='(')
    {
        brackets += expression.at(i);
    }
    if (expression.at(i)=='[')
    {
        brackets += expression.at(i);
    }
    if (expression.at(i)=='{')
    {
        brackets += expression.at(i);
    }
    if (expression.at(i)=='}')
    {
        brackets += expression.at(i);
    }
    if (expression.at(i)==']')
    {
        brackets += expression.at(i);
    }
    if (expression.at(i)==')')
    {
        brackets += expression.at(i);
    }
}

int parenbal = 0;
int brackbal = 0;
int mustachebal = 0;

    for (int i = 0; i<(brackets.size());i++)
    {

        if(brackets[i]=='(')
            parenbal++;
        if(brackets[i]=='[')
            brackbal++;
        if(brackets[i]=='{')
            mustachebal++;

        if(brackets[i]==')')
            parenbal--;
        if(brackets[i]==']')
            brackbal--;
        if(brackets[i]=='}')
            mustachebal--;
    }

    bool isbalanced = false;

    if ((mustachebal==0)&&(brackbal==0)&&(parenbal==0))
    {
        isbalanced = true;
    }

    //check for brackets mixed up with other stuff.

return isbalanced;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T05:48:03.713

如果您使用[堆栈](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)来存储这些令牌，那么您总是在寻找与堆栈顶部的那个或开放令牌相对应的关闭对应物。

流量将是

*   如果令牌是开放令牌，则将其压入堆栈。
*   如果令牌是关闭令牌，则检查堆栈顶部是否是相应的打开令牌。如果是，则在发现它们平衡时弹出堆栈。如果不是，那么这是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T18:52:02.770

```
void check_brackets (string bituy) 
{
    int flag = 1

    int count[6] = {0, 0, 0, 0, 0, 0};
    stack<char> barstack;

    for (int i = 0; i < bituy.length(); i++)
    {
        if (bituy[i] == '{')
            count[0]++;
        else if (bituy[i] == '}')
            count[1]++;
        else if (bituy[i] == '(')
            count[2]++;
        else if (bituy[i] == ')')
            count[3]++;
        else if (bituy[i] == '[')
            count[4]++;
        else if (bituy[i] == ']')
            count[5]++;
    }

    for (int i = 0; i < 6; i += 2)
    {
        if (count[i] != count[i+1])
        {
            cout << "Wrong Syntax!" << endl;
            flag = 0;
            break;
        }
    }

    if (flag)
    {
        for (int i = 0; i < bituy.length(); i++)
        {
            if (bituy[i] == '{' || bituy[i] == '(' || bituy[i] == '[')
                barstack.push(bituy[i]);
            else
            {
                if ((barstack.top() == '{' && bituy[i] == '}') || (barstack.top() == '(' && bituy[i] == ')') || (barstack.top() == '[' && bituy[i] == ']'))
                    barstack.pop();
                else
                {
                    cout << "Wrong Syntax!" << endl;
                    flag = 0;
                    break;
                }
            }
        }
    }

    if (flag)
        cout << "No Errors!" << endl;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:33:34.573

```
//this code may help you check string for balanced brackets with no
//repeated brackets,paranthesis or braces (e.g. [2*{3/(1+2)}].Note: no repeatance of
//brackets
#include <iostream.h>
#include <conio.h>
#include "IntStack.h"
#include <stdio.h>
void main(void)
{
    char bracket[20];
    gets (bracket);
    char arr[6];
    int i=0;
    while(i<20)
    {
        switch(bracket[i])
            {
                case '[':
                {
                    arr[0]=1;
                    break;
                }
                case '{':
                {
                    arr[1]=2;
                    break;
                }
                case '(':
                {
                    arr[2]=3;
                    break;
                }
                case ')':
                {
                    arr[3]=3;
                    break;
                }
                case '}':
                {
                    arr[4]=2;
                    break;
                }
                case ']':
                {
                    arr[5]=1;
                    break;
                }
                default:
                    cout<<"";
        }
        i++;
    }
    if(arr[3]==arr[2])
        cout<<"";
    else
        cout<<" ) or ( is missing "<<endl;

    if(arr[1]==arr[4])
        cout<<"";
    else
        cout<<" } or { is missing "<<endl;

    if(arr[5]==arr[0])
        cout<<"";
    else
        cout<<" ] or [ is missing"<<endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T06:09:38.327

看起来更像是家庭作业。所以我会做出相应的评论，让你学习一些东西。

1.  始终初始化您的变量。字符串未在您的代码中初始化。
2.  您不会对字符串进行三次迭代，您只能检查一次字符串。
3.  使用 if-else if-else 结构而不是 if-if-if 结构。
4.  始终使用方括号
5.  与您的用法保持一致，使用 at() 或 []，但不要在代码中混合使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T23:36:34.677

```
#include<bits/stdc++.h>
using namespace std;

bool isBalance(char n[],int size){
    int i,count=0;
    //int size=strlen(n);
    for(i=0;i<size;i++){
        if(n[i]=='{'||n[i]=='['||n[i]=='('){
            count ++;
           }
           else if(n[i]=='}'||n[i]==']'||n[i]==')'){
            count --;
           }
           else return -1;
    }
    if(count==0)
        return true;
    else
        return false;
}
int main(){
    char n[1000];
    gets(n);
    int size=strlen(n);
    bool result=isBalance(n,size);
    if(result==true)
        cout<<"Balance";
    else
        cout<<"Not Balance";
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-06T05:08:11.110

```
//bracket Chaecker program

void bracket_checker()
{
    int i=0;
    char d;
    char ch;
    int count=0;
    char *s = new char[21];

    fstream out;
    out.open("brace.txt",ios::in);
    while(out>>d)
        {
                if(d =='}'|| d ==')' || d == '{' || d =='(')
                {
                s[i]=d;
                i++;
                }
        }

    if (i % 2 != 0)
    cout <<"\ninvalid braces";

    else if (( s[0] == '}' || s[0]==')' || s[0]==']') || (s[i]=='{' || s[i]=='(' || s[i]=='[' ))
    cout <<"\n invalid braces";

    else
    {
        for(int a=0; a<i; a++)
        {

                if (s[a] == '(' || s[a] == '{' || s[a] =='[' )
                push1(s[a]);
                if((s[a]=='(' && (s[a+1]=='{' || s[a+1]=='}')) || (s[a]=='[' && (s[a+1]=='{' || s[a+1]=='}')))
                break;
                else
                if (s[a] == ')' || s[a] == '}' )
                {
                        if (head != NULL)
                    {
                        ch = pop1();
                        if( ch == '{' && s[a] == '}' || ch == '(' && s[a] == ')' || ch=='[' && s[a]==']')
                        cout <<" ";
                        else
                        break;
                    }
                else
                break;
                }
        }
                if(head==NULL)
                    cout <<" valid";

                else 
                    cout <<"In Valid";
    }

} 
```

# c# - System.NullReferenceException 仅在发布版本中

> ID：12757099
> 
> 赞同：4
> 
> 时间：2012-10-06T05:43:06.510
> 
> 标签：c#, .net, build, release, nullreferenceexception

我收到“System.NullReferenceException：对象引用未设置为对象的实例”。启动 Web 应用程序的发布版本时出错。它告诉我进行调试构建以获取更多信息，但是当我启动调试构建时，错误不再发生。如果没有调试版本中大多数错误给出的行号的帮助，很难（据我所知）查明这个模糊错误的原因。

谁能指出我正确的方向来缩小这个异常的原因？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:19:51.990

即使您在发布模式下构建，也可以在堆栈跟踪中获取文件名和行号**。**请参阅[在发布模式下显示 .NET 程序集的堆栈跟踪中的行号](https://stackoverflow.com/questions/628565/)和[在 .NET 发布模式构建中是否提供堆栈跟踪信息？](https://stackoverflow.com/questions/3137863/)例如。

一般来说，我认为您应该避免在 Debug 与 Release 模式下引入不同的程序行为（但也许您不是故意引入的？）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T06:31:39.690

作为对您的问题的快速补救（如果您没有时间重写代码），请查看您发布应用程序的机器上的事件日志。您很有可能只是缺少一些 dll。

作为一个长期解决方案，我认为您可以从向您的应用程序（企业库、log4net 等，甚至您自己的记录器）添加一些日志记录功能开始。打印完整的堆栈跟踪是非常宝贵的帮助来源，尤其是当您在发布版本中包含 .pdb 文件时。这将允许您执行的代码准确地判断哪一行引发了异常。

希望这会有所帮助，Piotr

# c# - 使用 ASP.Net 中的链接获取网页的图像和描述

> ID：12757100
> 
> 赞同：3
> 
> 时间：2012-10-06T05:43:33.733
> 
> 标签：c#, asp.net

嗨，我正在 asp.net 中创建一个网站，这就像社交网络。用户分享他们的更新和观点。我能够完成所有模块，但现在卡在一个要求上。

当用户输入更新状态栏时，我想从网页链接获取图像（不是页面截图）和描述。就像脸书一样。当我们输入一些链接时，它会获取其缩略图以及该页面的一些描述。

有人可以指导我如何在 asp.net 中做到这一点。有没有可用的插件或代码..

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:43:08.357

你需要：

1.  下载网页

    `var html = new System.Net.WebClient().DownloadString(url);`

2.  将其解析为 HTML 文档，或者仅使用 Regex 查找所有图像标签。有关详细信息，请查看此[答案](https://stackoverflow.com/a/138892/944681)。

3.  [阅读元描述 - 再次已经在这里](https://stackoverflow.com/a/1747183/944681)回答。

您还可以查看[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-06T07:05:26.413

您可以使用页面链接生成网页的预览缩略图并获取元描述。

[上一篇文章](https://stackoverflow.com/questions/2787497/generating-thumb-nail-image-of-a-web-page-in-a-link)和这段代码可能会有所帮助：

```
System.Windows.Forms.WebBrowser web = new System.Windows.Forms.WebBrowser();
web.ScrollBarsEnabled = false;
web.ScriptErrorsSuppressed = true;
web.Navigate("http://www.your_url.com/with_params");

while (web.ReadyState != WebBrowserReadyState.Complete)
Application.DoEvents();

//this is where we start search the DOM for our meta information and extract the content attribute into a usable string.
String meta = (web.Document.GetElementsByTagName("meta")[0]).GetAttribute("content");
System.Console.WriteLine("Meta Value is {0}", meta); 
```

# c# - 确定数组与目标数组的接近程度

> ID：12757101
> 
> 赞同：3
> 
> 时间：2012-10-06T05:43:37.213
> 
> 标签：c#, .net

我正在做一个小实验来增加我的知识，我已经达到了我觉得我可以真正优化它的部分，但我不太确定如何做到这一点。

我有很多数字数组。（为简单起见，假设每个数组有 4 个数字：1、2、3 和 4）

*   目标是让所有数字按升序排列（即 1-2-3-4），但这些数字都在不同的数组中打乱。

*   较高的权重放在较大的数字上。

*   我需要按照它们与目标的接近程度对所有这些数组进行排序。

即，4-3-2-1 将是最坏的情况。

一些示例案例：

```
3-4-2-1 is better than 4-3-2-1
2-3-4-1 is better than 1-4-3-2 (even though two numbers match (1 and 3). 
                                the biggest number is closer to its spot.) 
```

因此，大数字总是优先于较小的数字。这是我的尝试：

```
 var tmp = from m in moves
                  let mx = m.Max()
                  let ranking = m.IndexOf(s => s == mx)
                  orderby ranking descending
                  select m;

        return tmp.ToArray(); 
```

PS IndexOf 在上面的例子中，是我写的一个扩展，它接受一个数组和表达式，并返回满足表达式的元素的索引。它是必需的，因为情况确实有点复杂，我用我的例子来简化它。

不过，我在这里尝试的问题在于，它只会按最大的数字排序，而忘记所有其他数字。它应该按最大的数字排名第一，然后是第二大，然后是第三。

此外，由于它会一遍又一遍地执行此操作几分钟，因此它应该尽可能高效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:48:45.210

您可以实现冒泡排序，并计算必须移动数据的次数。在远离排序理想的数组上，数据移动的数量会很大。

```
int GetUnorderedness<T>(T[] data) where T : IComparable<T>
{
    data = (T[])data.Clone(); // don't modify the input data, 
                              // we weren't asked to actually sort.
    int swapCount = 0;
    bool isSorted;
    do
    {
        isSorted = true;
        for(int i = 1; i < data.Length; i++)
        {
            if(data[i-1].CompareTo(data[i]) > 0)
            {
                T temp = data[i];
                data[i] = data[i-1];
                data[i-1] = temp;
                swapCount++;
                isSorted = false;
            }
        }
    } while(!isSorted);
} 
```

根据您的样本数据，这将给出与您指定的结果略有不同的结果。

> 一些示例案例：
> 3-4-2-1 优于 4-3-2-1
> 2-3-4-1 优于 1-4-3-2

`3-4-2-1`将需要 5 次交换来排序，`4-3-2-1`需要 6 次，这样就可以了。
`2-3-4-1`将需要 3，`1-4-3-2`也需要 3，因此这与您的预期结果不符。

该算法不会将最大的数字视为最重要的数字，这似乎是您想要的；所有数字都一视同仁。根据您的描述，您认为`2-1-3-4`比 好得多`1-2-4-3`，因为第一个在适当的位置同时具有最大和第二大数字。该算法会认为这两个相等，因为每个只需要 1 次交换来对数组进行排序。

这个算法确实有一个优点，它不仅仅是一个比较算法，每个输入都有一个离散的输出，所以你只需要为每个输入数组运行一次​​算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:29:48.243

我希望这有帮助

```
var i = 0;
var temp = (from m in moves select m).ToArray();
do
{
  temp = (from m in temp
         orderby m[i] descending
         select m).ToArray();
}
while (++i < moves[0].Length); 
```

# linux - 如何在 Linux 上的 gcal 中添加事件？

> ID：12757102
> 
> 赞同：0
> 
> 时间：2012-10-06T05:43:46.843
> 
> 标签：linux, gcal

我尝试使用 gcal add event 向 gcal 添加事件，但没有成功。它不会给我一个错误，但也不会添加任何东西。任何帮助都会很棒。谢谢。

问候， 普拉米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:14:42.067

只需单击要创建事件的日期和时间。然后会出现一个小的弹出菜单，显示您添加或编辑事件。单击添加事件并添加详细信息并“保存”它。就如此容易 ！

# java - java中的类型转换：Integer和Double

> ID：12757104
> 
> 赞同：0
> 
> 时间：2012-10-06T05:44:31.177
> 
> 标签：java, casting

有人可以在 int y = (int) x; 行中解释类型转换的工作原理吗？谢谢你

```
public class typecast
{
 public static void main(String [] args)
 {
  double x=10.5;
  int y=(int) x;
  System.out.println("x="+x);
  System.out.println("y="+y);
 } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T06:15:37.887

类型转换执行缩小类型转换。确切的转换取决于双精度值，如下所示：

*   如果在数值范围内`int`，则向零舍入。
*   如果它超出范围或者是“Inf”值，则转换给出`Integer.MIN_VALUE`或`Integer.MAX_VALUE`，具体取决于符号。
*   如果它是“NaN”值，则转换为零。

参考：[JLS 5.1.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)

注：“向零舍入”定义如下：

> *“Java 编程语言在将浮点值转换为整数（第 5.1.3 节）时使用向零舍入，在这种情况下，它的作用就像数字被截断一样，丢弃尾数位。向零舍入选择其结果格式的值最接近且不大于无限精确的结果。* "

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:12:46.213

在这种特殊情况下，如果您尝试使用 double（变量 x）并将其值分配给 int（变量 y），则代码将无法编译。因此，您必须明确告诉编译器将类型从 double 转换（转换）为 int。当它这样做时，在这种特殊情况下，我相信它会丢弃小数部分而不是向上/向下舍入。最后一点我可能是错的。

# c# - 自定义 ModelBinder 生命周期和依赖注入

> ID：12757112
> 
> 赞同：1
> 
> 时间：2012-10-06T05:45:14.823
> 
> 标签：c#, asp.net-mvc, ninject, modelbinders

> **可能重复：**
> [将依赖项注入自定义模型绑定器并使用 InRequestScope 使用 Ninject](https://stackoverflow.com/questions/9186560/inject-a-dependency-into-a-custom-model-binder-and-using-inrequestscope-using-ni)

我正在尝试将 NHibernate 会话绑定到自定义模型绑定器：

由于自定义模型绑定器似乎是单例，我认为我需要关注线程安全。这是我当前的 IoC 代码：

```
kernel.Bind<ISession>().ToProvider<SessionProvider>().InRequestScope()
    .OnActivation(x => ServiceModelBinder.Service = kernel.Get<IServiceService>()); 
```

在我的活页夹中，我使用该`ThreadStatic`属性装饰了静态服务字段，以避免会话的并发问题。

这甚至是个好主意吗？

有没有更好的方法将每个请求范围的对象注入视图模型？还是我不应该担心它在纸上看起来有多丑，而只是从`DependencyResolver`需要的地方获取当前会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:07:31.880

远离 ASP.NET 中的 ThreadStaticAttribute - 唯一正确的方法是将内容放入`HttpContext.Items`.

这里的关键问题是您正在使用一个错误的假设 - 模型绑定器在请求之间共享。

# c# - 数据库连接奇怪的行为

> ID：12757116
> 
> 赞同：2
> 
> 时间：2012-10-06T05:45:42.623
> 
> 标签：c#, nhibernate, extension-methods

我正在逐渐将应用程序从 NH 迁移到 Dapper。我在很多方面都使用了以下策略：

```
using( var uow=MyUowManager.BeginUoW() ) //obtain a session and open
{
     //do some NH sandard stuff
     ....
     //then use Dapper
     session.Connection.Query<Dto>(....).ToList(); // Dapper query
}//close session ( and connection ) 
```

这在我的代码中很常见，它通常总是有效的，除了在一个函数中“有时”`Query`扩展方法内的连接似乎是`Closed`在调试器显示它时，就像`Open`在进入扩展方法之前一样。它不是调试器幽灵，因为 Dapper 会抛出一个抱怨连接状态的异常。程序是多线程的，但是线程之间当然没有会话/连接共享，并且总是使用调试器检查线程在扩展方法之前和内部是否相同。这怎么会发生？

# actionscript-3 - 在 AS3 中使用 BitmapData 进行 hitTesting - 我的播放器陷入平台

> ID：12757118
> 
> 赞同：0
> 
> 时间：2012-10-06T05:45:55.603
> 
> 标签：actionscript-3, flash, collision-detection, game-physics, hittest

我正在制作一个平台游戏。这是我到目前为止所拥有的：http: [//megaswf.com/s/2486396](http://megaswf.com/s/2486396)（四处走动并用箭头键跳跃）

当您从跳跃中着陆时，您会在地面下沉几个像素并被推上去（我不喜欢这样）。

当你下山时，你会失去与地面的接触，而且看起来很生涩（我不喜欢这样）。

当你上山时，你会非常缓慢地被推到山顶（我特别不喜欢这样）。

我基本上希望玩家能够在行走时跟随山的轮廓（除非山太陡，我想我稍后会解决）。关于如何做到这一点的任何想法？

这是我的代码（目前只是在时间线上，直到我真正弄清楚如何做到这一点。舞台上有两个 MovieClip - playerClip 和 groundClip）：

```
import flash.geom.Rectangle;
import flash.display.BitmapData;
import flash.events.Event;
import flash.geom.Point;
import flash.events.KeyboardEvent;

// Bitmap data stuff
var groundRect:Rectangle = groundClip.getBounds(this);
var groundClipBmpData = new BitmapData(groundRect.width,groundRect.height,true,0);
groundClipBmpData.draw(groundClip);

var playerRect:Rectangle = playerClip.getBounds(this);
var playerClipBmpData = new BitmapData(playerRect.width,playerRect.height,true,0);
playerClipBmpData.draw(playerClip);

// Player movement variables
var jump:Boolean = false;
var grounded:Boolean = false;

var moveRight:Boolean = false;
var moveLeft:Boolean = false;

var xMove = 0;
var yMove = 0;

const jumpStrength = 10;
const xMax = 5;
const xAccel = 1;
const GRAVITY = 1;

addEventListener(Event.ENTER_FRAME, enterFrame);
stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyPress);
stage.addEventListener(KeyboardEvent.KEY_UP, onKeyRelease);

function enterFrame(e:Event):void {
    /*---- PLAYER MOVEMENT ----*/
    // Movement Acceleration
    if (moveLeft == true) {
        xMove -= xAccel;
    } else if (moveRight == true) {
        xMove += xAccel;
    } else if (xMove > 0) {
        xMove -= xAccel;
    } else if (xMove < 0) {
        xMove += xAccel;
    }

    // Maximum Walk Speed
    if (xMove > xMax) {
        xMove = xMax;
    } else if (xMove < -xMax) {
        xMove = -xMax;
    }

    // Jumping
    if (jump == true) {
        grounded = false;
        yMove = -jumpStrength;
        jump = false;
    }

    /*---- BITMAP DATA STUFF ----*/
    var playerRect:Rectangle = playerClip.getBounds(this);
    var playerOffset:Matrix = playerClip.transform.matrix;

    playerOffset.tx = playerClip.x - playerRect.x;
    playerOffset.ty = playerClip.y - playerRect.y;

    var playerClipBmpData = new BitmapData(playerRect.width,playerRect.height,true,0);
    playerClipBmpData.draw(playerClip, playerOffset);

    var groundRect:Rectangle = groundClip.getBounds(this);
    var groundClipBmpData = new BitmapData(groundRect.width,groundRect.height,true,0);
    var groundOffset:Matrix = groundClip.transform.matrix;

    groundOffset.tx = groundClip.x - groundRect.x;
    groundOffset.ty = groundClip.y - groundRect.y;
    groundClipBmpData.draw(groundClip, groundOffset);

    // COORDINATES
    var rLoc:Point = new Point(groundRect.x,groundRect.y);
    var bLoc:Point = new Point(playerRect.x, playerRect.y);

    // FUTURE COORDINATE OF THE PLAYER
    var bLocFuture:Point = new Point(playerRect.x + xMove,playerRect.y + yMove);

    // HIT TEST GROUND WITH FUTURE COORDINATE OF PLAYER
    if (groundClipBmpData.hitTest(rLoc,
    255,
    playerClipBmpData,
    bLocFuture,
    255
      )) {
        grounded = true;
        playerClip.y--;
        yMove = 0;
    } else {
        yMove += GRAVITY;
    }

    // MOVE THE PLAYER
    playerClip.y += yMove;
    playerClip.x += xMove;

    // delete useless bitmap data to save memory
    playerClipBmpData.dispose();
    groundClipBmpData.dispose();
}

function onKeyPress(e:KeyboardEvent):void {
    if (e.keyCode == 37) {
        moveLeft = true;
        moveRight = false;
    } else if (e.keyCode == 39) {
        moveRight = true;
        moveLeft = false;
    } else if (e.keyCode == 38) {
        if (grounded == true) {
            jump = true;
        }
    }

}

function onKeyRelease(e:KeyboardEvent):void {
    if (e.keyCode == 37) {
        moveLeft = false;
    } else if (e.keyCode == 39) {
        moveRight = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:05:52.157

我认为您希望更改以使玩家在表面上行走而不是漂浮的是以下代码：

```
if (groundClipBmpData.hitTest(rLoc,
    255,
    playerClipBmpData,
    bLocFuture,
    255
      )) {
        grounded = true;
        playerClip.y--;
        yMove = 0;
    } else {
        yMove += GRAVITY;
    } 
```

你想要做的是这样的：

```
if(groundClipBmpData.hitTest(rLoc, 255, playerClipBmpData, bLocFuture, 255))
{
    yMove += GRAVITY;
} 
else
{
    grounded = true;
    yMove = 0;
}

while(groundClipBmpData.hitTest(rLoc, 255, playerClipBmpData, bLocFuture, 255))
{
    playerClip.y--;
}
playerClip.y++; 
```

# iphone - 如何判断 iPhone 应用程序是否是使用 PhoneGap 制作的？

> ID：12757121
> 
> 赞同：1
> 
> 时间：2012-10-06T05:46:07.240
> 
> 标签：iphone, cordova, ipa

我不确定 iPhone 应用程序是使用 PhoneGap 中间件还是从头开始构建的。我怎么能从我计算机上的 .ipa 文件中看出这一点？除了可执行文件和编译的 .nib 文件之外，它没有太多内容（该应用程序是网站周围的外壳），因此我无法使用 Interface Builder 打开它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:52:08.990

我相信 .ipa 是一个 .zip 文件。您应该能够将 .ipa 重命名为 .zip、取消归档，然后使用二进制检查工具（otool、字符串等）来确定 Phonegap 相关的类/方法是否在可执行文件中。

# android - 带有颜色的 Android 通知图标

> ID：12757125
> 
> 赞同：1
> 
> 时间：2012-10-06T05:46:19.670
> 
> 标签：android, android-icons

根据[此处](http://developer.android.com/design/style/iconography.html) 和[此处的 android 图标文档](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)状态栏中的图标应该是完全白色的透明背景。然而，即使是内置的图标也不全都遵循这种模式。信号质量（用于 wifi 和电池）、电池指示灯和其他一些在较新设备上的某些图标上具有全息蓝色背景。这种颜色是内置在图标本身中的吗？我希望用我的应用程序实现一个状态栏图标，该图标将指示与外部（蓝牙）设备的连接状态。我正计划制作我的公司徽标（这是一个相当简单的，主要是圆形）填充颜色以指示连接状态（已连接 - 绿色，未连接 - 红色）。但由于我不应该使用颜色，这些看起来要复杂得多。使用非白色图标真的那么糟糕吗，如果它那么糟糕，为什么谷歌会这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:51:23.870

这是约定，就像为您的私有字段创建访问器一样，但您遵循它并不严格。话虽如此，遵循操作系统的配色方案是个好主意，因为这样一切看起来都很统一。因此，我建议您选择全息蓝色和灰色，而不是绿色和红色。作为开发人员，这完全是您的选择。

# android - 如何从捕获图像的位置找到位置？

> ID：12757126
> 
> 赞同：1
> 
> 时间：2012-10-06T05:46:27.430
> 
> 标签：android, google-maps, gps

我正在开发 Android 应用程序。在此，我需要当我捕获图像或从图库中选择上传时，它应该显示当前位置，如城市等。我尝试使用 GPS，但是当我在 Android 模拟器上运行它时，它显示纬度和经度为 0 ,0 . 任何帮助将不胜感激。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:03:15.587

您无法在模拟器中获取 GPS。但是有一个解决方法

```
telnet localhost 5554 
```

连接到您的模拟器。如上图所示，然后

```
geo fix -23.234334 32.234344 4392 
```

前两个是经度和纬度值，最后一个是以米为单位的高度。

现在从那里您可以从 GeoCoder [http://developer.android.com/reference/android/location/Geocoder.html调用](http://developer.android.com/reference/android/location/Geocoder.html)

```
 public List<Address> getFromLocation (double latitude, double longitude, int maxResults) 
```

它将返回具有 getLocality 方法的地址列表

```
Geocoder gcd = new Geocoder(context, Locale.getDefault());
List<Address> addresses = gcd.getFromLocation(lat, lng, 1);
if (addresses.size() > 0) 
    Log.i("address",""+addresses.get(0).getLocality()); 
```

尝试各种值并检查！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:48:54.460

显然你不能在模拟器中获取 GPS。模拟器不是真正的设备。您可以使用包含 lal-lon 详细信息的 .gpx 文件。您需要在程序运行时从 DDMS 上传此文件，以便在模拟器中获取虚拟 GPS 坐标。

[您可以从google](http://www.google.co.in/#hl=en&output=search&sclient=psy-ab&q=.gpx+file+download&oq=.gpx&gs_l=hp.3.3.0l4.1840.4129.0.7890.8.7.1.0.0.1.1618.4676.4-2j2j1j0j1.6.0.les%3B..0.0...1c.1.2DdFi9KiQNc&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=9c515f559cf0b04c&biw=1600&bih=787)找到示例 .gpx

# php - codeigniter 无法访问受保护的属性 MY_Loader::$_ci_cached_vars

> ID：12757130
> 
> 赞同：0
> 
> 时间：2012-10-06T05:46:49.340
> 
> 标签：php, codeigniter

升级 Codeigniter 后，我收到此消息

> 无法访问受保护的属性 MY_Loader::$_ci_cached_vars

我知道这个属性现在受到保护所以我改变了

```
else if (isset($CI->load->_ci_cached_vars[$key]))
    {
        $val = $CI->load->_ci_cached_vars[$key];
    } 
```

至

```
if (isset($CI->load->get_var($key)))
    {
        $val = $CI->load->get_var($key);
    } 
```

但后来我明白了

> 不能在写上下文中使用方法返回值

这是`get_var`方法

```
/**
     * Get Variable
     *
     * Check if a variable is set and retrieve it.
     *
     * @param   array
     * @return  void
     */
    public function get_var($key)
    {
        return isset($this->_ci_cached_vars[$key]) ? $this->_ci_cached_vars[$key] : NULL;
    } 
```

我能做什么，就用

```
if ($CI->load->get_var($key)) != null)  {
        $val = $CI->load->get_var($key);
    } 
```

没有 isset？我想检查是否不是 NULL，因为`get_var`方法返回 null

还是 `if ($CI->load->get_var($key))) {`检查足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:06:16.767

您不能`isset`在函数上使用

即`$CI->load->get_var($key)`总是会返回“某物”——但“某物”是什么取决于。

所以你是对的 - 下面的代码将实现你的目标。如果函数返回“null” - 则 isset 已经失败。如果函数返回其他内容（除了 null） - 那么您将获得有效的返回。

```
if ($CI->load->get_var($key)) != null)  {
        $val = $CI->load->get_var($key);
    } 
```

# iphone - 未使用的表达式结果

> ID：12757131
> 
> 赞同：0
> 
> 时间：2012-10-06T05:46:51.937
> 
> 标签：iphone, objective-c, xcode4, expression

我得到了一些代码，我正在尝试修复一些编译错误：

```
StkFrames& PRCRev :: tick( StkFrames& frames, unsigned int channel )
{
#if defined(_STK_DEBUG_)
  if ( channel >= frames.channels() - 1 ) {
    errorString_ << "PRCRev::tick(): channel and StkFrames arguments are incompatible!";
    handleError( StkError::FUNCTION_ARGUMENT );
  }
#endif

  StkFloat *samples = &frames[channel];
  unsigned int hop = frames.channels();
  for ( unsigned int i=0; i<frames.frames(); i++, samples += hop ) {
    *samples = tick( *samples );

    *samples++; <<<<<<<<<--------- Expression result unused.

    *samples = lastFrame_[1];
  }

  return frames;
} 
```

我不明白代码试图做什么。代码很大，我修复了很多。但是谷歌搜索对此不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:32:17.280

首先，你做一个增量（实际上给你警告的行）。

```
*samples++; 
```

然后你给那个变量分配别的东西，这使得之前的动作没有被使用。

```
*samples = lastFrame_[1]; 
```

我建议您更仔细地阅读“for”循环中的这段代码。看起来不太合乎逻辑。

# linux - 如何在 AWS ec 虚拟机上使用 hadoop 1.0 配置高可用性

> ID：12757133
> 
> 赞同：1
> 
> 时间：2012-10-06T05:46:57.383
> 
> 标签：linux, hadoop, high-availability

我已经在非 VM 设置中使用心跳和虚拟 IP 机制配置了此设置。

我正在使用 hadoop 1.0.3 并使用共享目录来共享 Namenode 元数据。问题是在亚马逊云上，没有什么能像虚拟 IP 一样使用 Linux-ha 获得高可用性。

有没有人能够做到这一点。请让我知道所需的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:42:58.007

现在我在 hbase 上使用 Hbase 复制 WAL。高于 0.92 的 Hbase 支持这一点。

对于云上的hadoop集群，我将等待2.0版本稳定。

使用了以下

[http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/replication/package-summary.html#requirements](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/replication/package-summary.html#requirements)

在客户端，我添加了拥有 2 个主服务器的逻辑，用于在网络中断的情况下重新连接。

这个东西适用于简单的 2 台相互备份的机器，不推荐用于更多数量的服务器。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:56:17.467

好吧，Hadoop 有两个部分可以使其具有高可用性。第一个也是更重要的当然是 N​​ameNode。有一个辅助/检查点 NameNode 可以启动和配置。这将有助于在您的主 NameNode 出现故障时保持 HDFS 正常运行。接下来是运行所有作业的 JobTracker。据我所知（已过时 10 个月），您可以配置的 JobTracker 没有备份，因此您可以监控并启动一个具有正确配置的新备份，以防万一它出现故障。

# facebook - 缺少 Facebook 点赞按钮（多个）

> ID：12757134
> 
> 赞同：0
> 
> 时间：2012-10-06T05:47:07.693
> 
> 标签：facebook

大约一年前，我在他们的网站（https://developers.facebook.com/docs/reference/plugins/like/）上创建了一个类似 Facebook 的按钮。该网站仍在运行，当我尝试创建它时，它会在他们的网站上显示按钮，以及有多少人已经喜欢它。

然而，在我网站的主页上，我花了好几个小时试图让它显示出来，我认为它可能是一个有问题的 CSS 放错了位置。但是，纵观我的网站，我所有的点赞按钮都不再起作用，因为我的网站上有不同歌曲的点赞按钮，exc。我知道这不仅仅是我，因为我去的带有游戏模组的网站也不再显示“赞”按钮，尽管他们的编程没有任何改变。

所以我的问题是，如果有人知道他们改变了他们的编码，所以上面提到的链接上的编码不再有效，那么新的代码是什么？

我正在使用的代码：

在头部：

```
 <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</HEAD> 
```

在正文中：

```
<div class="fb-like" data-href="http://www.alternategaming.net" data-send="false" data-width="450" data-show-faces="true" data-colorscheme="dark"></div> 
```

提前感谢您提供有关此的任何信息...我想知道这是我的代码，还是 facebook 刚刚停止使用...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:26:19.930

显然，截至发帖时，Facebook 的“赞”按钮在 Google Chrome 上显示时出现问题。我去了另一个站点，他们也没有出现，直到我使用 Firefox 去那里。

长话短说：除非 Facebook 或 Chrome 修复了某些问题，否则“Like”按钮在 Google Chrome 中的 Facebook 上不起作用；让其他有这个问题的人知道。:)

# html - 如何垂直居中网页？

> ID：12757135
> 
> 赞同：0
> 
> 时间：2012-10-06T05:47:07.973
> 
> 标签：html, css

我正在制作一个摄影网站，页面大小约为 960x780，无论我们放大还是缩小页面，我都希望页面保持在窗口的中心（垂直和水平）。

我试过了，但我在定位方面遇到了问题。

谁能告诉我答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:58:36.583

你需要用来`position: absolute;`带上你的页面，最好把它描述为水平/垂直居中的 div/container...

像这样

```
.center {
   width: 960px;
   height: 780px;
   position: absolute;
   left: 50%;
   top: 50%; 
   margin-left: -480px; /* Half of the total width */
   margin-top: -390px; /* Half of the total height */
} 
```

如果你想把它**垂直**居中，你可以这样做：

**HTML**

```
<div class="mainwrapper">
   <div class="innerwrap">
      <div class="content">
        Your content
      </div>
   </div>
</div> 
```

**CSS**

```
.mainwrapper {
    display:table;
}

.innerwrap {
    display:table-cell; 
    vertical-align:middle;
} 
```

# c# - 从绑定到数据集的组合框中删除重复项

> ID：12757138
> 
> 赞同：2
> 
> 时间：2012-10-06T05:47:14.310
> 
> 标签：c#, c#-4.0, combobox, dataset, datasource

我的项目中有一个[xml 文件](http://ideone.com/OnpgJ)。我正在通过以下代码将文件读取到组合框中`cbProduct`。问题是`cbProduct`正在显示重复的文本值。如何使它们与众不同？

我已经浏览了一些[链接](https://stackoverflow.com/q/10515527/1577396)，但这种方法与数据集无关。
我实现了以下代码：

```
DataSet ds = new DataSet();
ds.ReadXml(@"..\..\stock.xml");
cbProduct.DataSource = ds.Tables[0];
cbProduct.DisplayMember = "productname"; 
```

*可选*：如果你有时间，如果你解释这个过程将会很有意义，因为我是 .net 的新手，或者提供一个至少可以参考的链接（不是 msdn）。

请帮忙。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:12:33.033

做这个

```
DataSet ds = new DataSet();
ds.ReadXml(@"..\..\stock.xml");
DataTable dt = ds.Tables[0].DefaultView.ToTable(true, "productname");
cbProduct.DataSource = dt;
cbProduct.DisplayMember = "productname"; 
```

第三行代码创建一个新表，该表将基于 productname 列具有不同的值。有关更多信息，请阅读[此](http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx)

这段代码在[这里](http://ideone.com/MxhOW)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:59:08.967

您可以带来不同的`values from database`，也可以`distinct values from c# data table`进入新的 c# 数据表并将其绑定到下拉列表。[如何选择不同的值](https://stackoverflow.com/questions/1199176/how-to-select-distinct-values-from-datatable)。

# python - 在启动时启动 Gimp 插件

> ID：12757140
> 
> 赞同：0
> 
> 时间：2012-10-06T05:47:57.150
> 
> 标签：python, plugins, blender, gimp, python-fu

我正在尝试创建一个将它与 Gimp 同步的 Blender 插件。所以，我有一个用于 Gimp 的 python-fu 插件，我想实现这个：当我从 Blender（使用 Python）打开 Gimp 时，Gimp 应该立即运行这个插件（在启动时）！但是，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:32:09.830

这是一种重复：[如何在 Python 脚本中使用 GIMP？](https://stackoverflow.com/questions/8196210/how-to-use-gimp-inside-a-python-script)（至少接受的答案也回答了这个问题）。

以下文章也可能会有所帮助：[Python-Fu #4 - Using Python-Fu in Gimp Batch Mode](http://www.exp-media.com/content/extending-gimp-python-python-fu-plugins-part-4)。

# r - 使用 GARCH 进行波动率预测

> ID：12757141
> 
> 赞同：1
> 
> 时间：2012-10-06T05:47:58.983
> 
> 标签：r, time-series, forecasting, volatility

我有收盘价的对数回报，并试图使用 GARCH(1,1) 模型来预测这些对数回报的波动性。所以，到目前为止，我有以下代码，但我的预测值不正确。

```
library(quantmod) 
library(tseries) 
library(fGarch)

r = Data[indexStart:indexEnd] # Log Returns
fgarch.fitted = fGarch::garchFit(~ garch(1,1), data = as.zoo(na.omit(r)),trace = FALSE) 
predict(fgarch.fitted, n.ahead = 1,doplot=F)[3] 
```

# javascript - Tinymce 添加链接弹出窗口

> ID：12757147
> 
> 赞同：2
> 
> 时间：2012-10-06T05:49:04.743
> 
> 标签：javascript, tinymce

我正在为我的一个项目使用 tinymce 编辑器。一切正常，但我只需要更改添加链接弹出窗口的行为。

实际上，要求是当用户从编辑器中单击 addlink 按钮时，弹出窗口应放置在特定位置，例如从顶部 500 像素和从左侧 500 像素，也就是特定大小，即仅 600*600。

还有一个问题是当您处于全屏模式时（按 F11），弹出窗口的宽度和高度与屏幕一样（特别是在 mozzila 上），而我需要大小为 600*600 的弹出窗口重叠主窗口。现在它以全屏模式打开一个新选项卡。

我查看了tinymce的代码，但没有得到文件，在哪里自定义代码。我正在使用基本链接弹出窗口。

这是我的初始化代码，

```
<script type="text/javascript">
        tinyMCE.init({mode : "specific_textareas",
                    theme : "advanced",
                    editor_selector : "elm1", 
                    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,link,unlink",
                    theme_advanced_buttons2 :"",
                    theme_advanced_toolbar_location : "top",
                    theme_advanced_toolbar_align : "left",
                    width: "100%",
                    skin : "cirkuit", 
                    relative_urls : false, 
                    convert_urls : false ,
                    oninit : "setPlainText",
                    plugins : "paste,style",
                    paste_remove_spans: true,
                    paste_remove_styles: true,
                    paste_strip_class_attributes: "all",
                    inline_styles : false,
                    content_css:"<?php echo base_url("assets/css/tiny_mce/custom_content.css");?>"
                });
     </script> 
```

这有什么帮助吗？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:20:37.940

很抱歉回答我自己的问题，但最后，我解决了这个问题，我了解了插件“inlinepopups”，它解决了这个问题。

- 谢谢

# php - 如何在php部分添加下拉列表

> ID：12757151
> 
> 赞同：-3
> 
> 时间：2012-10-06T05:50:08.077
> 
> 标签：php, html

我正在尝试添加一个下拉列表，其名称设置为我的表唯一 ID。但是我尝试使用以下代码 dosnt 的所有操作似乎都有效。尽管如果我对 html 中的下拉列表使用相同的代码，它可以工作美好的..

```
$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  echo "<td>" . $row['old_price'] . "</td>";
  echo "<td>" . $row['price'] . "</td>";
  echo "<td>"
            "<select name='goosedown_id'>
                <option value=""> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>"
        "</td>"
  echo "</tr>";
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:53:39.650

像下面的代码一样删除 td 中的双引号并尝试它。在您的 td 及其数据完成之前，您有完整的双引号。

```
 echo "<td>
            <select name='goosedown_id'>
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>"; 
```

# mysql - 您如何使用 JOIN 而没有 ID 进行删除？

> ID：12757153
> 
> 赞同：3
> 
> 时间：2012-10-06T05:50:24.117
> 
> 标签：mysql, sql

以下查询产生我要删除的记录列表...

```
SELECT *
FROM `orderitems` as oi
LEFT JOIN `orders` as o
    ON (o.`orderid` = oi.`orderid`)
WHERE o.`date` = '2012-10-05'
  AND o.`status` = 'init'; 
```

不幸的是，这些表的设计没有`id`字段。
我查看了其他带有连接的删除，但都使用`id`字段。
这不起作用：

```
DELETE
FROM `orderitems` as oi
LEFT JOIN `orders` as o
    ON (o.`orderid` = oi.`orderid`)
WHERE o.`date` = '2012-10-05'
  AND o.`status` = 'init'; 
```

如何`DELETE`使用单个 MySQL 查询进行上述设置？（没有 PHP）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:53:07.597

试试这个，

```
DELETE oi -- add the alias here
FROM `orderitems` as oi
LEFT JOIN `orders` as o
    ON (o.`orderid` = oi.`orderid`)
WHERE o.`date` = '2012-10-05'
  AND o.`status` = 'init'; 
```

或通过使用子查询

```
DELETE FROM `orderitems`
WHERE `orderid` IN
(
   SELECT o.`orderid`
   FROM `orders` as o
   WHERE o.`date` = '2012-10-05'  AND o.`status` = 'init'
) 
```

# mobile - 我可以为诺基亚 5228 手机安装诺基亚 5230 操作系统吗？

> ID：12757154
> 
> 赞同：2
> 
> 时间：2012-10-06T05:50:45.633
> 
> 标签：mobile, nokia

我正在使用诺基亚 5228 手机。我想安装诺基亚 5230 等其他手机操作系统。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:35:41.307

据我所知，这是不可能实现的。由于不同手机的 Sw 不同。

尽管两部手机在功能上看起来相同，但显然它们在某些地方会有一些不同的功能……[在 GUI 中或在后端]。

此外，该设备 S/w 旨在识别为它们制造的特定移动电话 [通过序列号/型号或可能仅是其他任何东西。]

此外，您必须先获得 S/w，这很难获得。

您不能更改设备中的任何内容，以便设备获取其他手机的 S/w。

所以结论是：

您不能为诺基亚 5228 手机安装诺基亚 5230 操作系统。

# android - EditText 小部件的 setText 有什么问题？

> ID：12757156
> 
> 赞同：-2
> 
> 时间：2012-10-06T05:50:50.743
> 
> 标签：android, android-edittext

我试图通过读取文件在 EditText 中设置文本，但应用程序每次都会关闭。有人能说出这段代码有什么问题吗？

```
package com.example;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.content.Intent;
import android.view.View;
import android.widget.*;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class EditNoteActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        String FILENAME = "note_file";
        EditText text = (EditText) findViewById(R.id.editText1);
        byte[] buffer = new byte[100];

        super.onCreate(savedInstanceState);
        setContentView(R.layout.editnote);

        //Intent intent = getIntent();

        FileInputStream fos = null;
        try {
            fos = openFileInput(FILENAME);
        } catch (FileNotFoundException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        assert fos != null;
        try {
            fos.read(buffer, 0, 10);
            String str = buffer.toString();
            text.setTextSize(48);
            text.setText(str);
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
    }
    public void onClickSave(View theButton) {
        //Intent intent = new Intent(this, MyActivity.class);
        //startActivity(intent);
        String FILENAME = "note_file";

        EditText text = (EditText) findViewById(R.id.editText1);

        FileOutputStream fos = null;
        try {
            fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
        } catch (FileNotFoundException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        assert fos != null;
        try {
            fos.write(text.getText().toString().getBytes());
            fos.close();
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        finish();
    }
    public void onClickBack(View theButton) {
        //Intent intent = new Intent(this, MyActivity.class);
        //startActivity(intent);
        finish();
    }
} 
```

我试图编辑它以删除不相关的代码，但出现错误，“您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的场景。”。不幸的是，没有多少，无论如何这个问题已经得到了回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:05:31.990

您在设置内容视图之前初始化 EditText（文本），以便在通过 id 查找编辑文本时 EditText 对象为空，这就是应用程序崩溃的原因。

修改你的代码如下

```
super.onCreate(savedInstanceState);
setContentView(R.layout.editnote);

String FILENAME = "note_file";
EditText text = (EditText) findViewById(R.id.editText1);
byte[] buffer = new byte[100]; 
```

仅供参考：在提问时，也发布错误日志，然后只有您才能获得快速和正确的答案。

**更新**

参考： [从 Eclipse 获取错误日志](http://www.itcsolutions.eu/2011/09/11/android-tutorial-7-how-to-debug-the-android-mobile-application-with-logcat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:08:38.443

for converting byte array into string byte[] bytes = {...} String str = new String(bytes, "UTF8"); // for UTF8 encoding

this is the issue.

# iphone - UITableview 数据

> ID：12757158
> 
> 赞同：0
> 
> 时间：2012-10-06T05:50:59.700
> 
> 标签：iphone, objective-c, uitableview

我正在制作一个应用程序，我必须在其中读取来自`ABAddressBook`. 我已阅读数据并将其存储在一个`dictionary`.我想在每个部分中按字母顺序显示名称。中的每个对象都`dictionary`指的是一个人的详细信息。有什么帮助吗？

```
(
        {
        letter = D;
        name = zzzz;
        telephone = "1234566";
    },
        {
        letter = R;
        name = "ffff";
        telephone = "332333";
    },
        {
        letter = A;
        name = aaaaa;
        telephone = "1112226";
    },
        {
        letter = s;
        name = ssssss;
        telephone = "234 56792";
    },
        {
        letter = K;
        name = "Klll";
        telephone = "(888) 888-8888";
    }

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:01:21.217

我正在发送代码，我已经完成了这类任务。实际上，您的问题是您无法对字典进行排序。

请参考我的代码以供参考。

```
#import <UIKit/UIKit.h>
#import <AddressBook/AddressBook.h>
#import "AddressBookUI/AddressBookUI.h"

@interface AddressBookViewController : UIViewController<UITableViewDataSource,UITableViewDelegate,ABNewPersonViewControllerDelegate>
{
    IBOutlet UITableView* addressNameView;
    ABAddressBookRef _addressBook;
}

@property(nonatomic,retain)UITableView* addressNameView;
@property (nonatomic, retain) NSMutableArray *contacts;
@property (nonatomic, retain)IBOutlet UILabel *titleText;
@property(nonatomic,retain)IBOutlet UISegmentedControl *segmentControl;

-(IBAction)backAction:(id)sender;

@end 
```

/ ***** ** *** ** *** ** *** ** *** ***** /

```
#import "AddressBookViewController.h"
#import <QuartzCore/QuartzCore.h>
#import "AddressEntryDetailController.h"
#import "MenuViewController.h"
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h> 

NSInteger static compareViewsByOrigin(id sp1, id sp2, void *context)
{
    // UISegmentedControl segments use UISegment objects (private API). Then we can safely
    //   cast them to UIView objects.
    float v1 = ((UIView *)sp1).frame.origin.x;
    float v2 = ((UIView *)sp2).frame.origin.x;
    if (v1 < v2)
        return NSOrderedAscending;
    else if (v1 > v2)
        return NSOrderedDescending;
    else
        return NSOrderedSame;
}

@implementation AddressBookViewController

@synthesize addressNameView,contacts;
@synthesize titleText,segmentControl;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didChangeSegmentControl:(UISegmentedControl *)control 
{
    int index=control.selectedSegmentIndex;
    NSLog(@"Slected Index : %d",index);
    if(index==1)
    {
        [self getAllContacts];
    }
    else
    {
        [self getAllContactsByRelevence];    
    }
}

-(void)getAllContacts
{

    ABRecordRef source = ABAddressBookCopyDefaultSource(_addressBook); 
    NSArray *tempArray = (NSArray *)(ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(_addressBook, source, kABPersonSortByFirstName));

    [contacts removeAllObjects];
    if ([tempArray count] > 0) 
    {
        [contacts addObjectsFromArray:tempArray];
    } 
    [addressNameView reloadData];
    titleText.text=@"All";

}

-(void)getAllContactsByRelevence
{
    ABRecordRef source = ABAddressBookCopyDefaultSource(_addressBook); 
    NSArray *tempArray = (NSArray *)(ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(_addressBook, source, kABPersonSortByLastName));
    [contacts removeAllObjects];
    if ([tempArray count] > 0) 
    {
        [contacts addObjectsFromArray:tempArray];
    } 
    [addressNameView reloadData];
    titleText.text=@"All";
}

- (void)viewDidLoad
{
    _addressBook = ABAddressBookCreate();
    contacts=[[NSMutableArray alloc]init];
    [self getAllContacts];
    addressNameView.layer.borderWidth=2;
    addressNameView.layer.cornerRadius=13;
    addressNameView.layer.borderColor =[UIColor colorWithRed:192.0f/255.0f green:189.0f/255.0f blue:189.0f/255.0f alpha:1.0f].CGColor;
    addressNameView.backgroundColor=[UIColor colorWithRed:236.0f/255.0f green:236.0f/255.0f blue:235.0f/255.0f alpha:1.0f];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [self CreateAlphabetButton];

    self.segmentControl.selectedSegmentIndex=1;
    [self.segmentControl addTarget:self action:@selector(didChangeSegmentControl:) forControlEvents:UIControlEventValueChanged];

}

-(void)CreateAlphabetButton
{
    int yPoint=110;
    NSString *list=@"*ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    for(int y=1;y<=27;y++)
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(720,yPoint,50,28);
        yPoint+=29;
        button.titleLabel.text=[list substringWithRange:NSMakeRange(y-1, 1)];
        UILabel *readding=[[UILabel alloc]initWithFrame:CGRectMake(0, 0,40, 30)];
        readding.text=[list substringWithRange:NSMakeRange(y-1, 1)];
        readding.textColor=[UIColor darkTextColor];
        [readding setTextAlignment:UITextAlignmentCenter];
        readding.font=[UIFont boldSystemFontOfSize:20.0];
        readding.backgroundColor = [UIColor clearColor];
        [button addSubview:readding];

        [button addTarget:self action:@selector(toggleOpen:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:button];
        [self.view bringSubviewToFront:button];
    }
}

-(IBAction)toggleOpen:(id)sender
{
    UIButton *btn=(UIButton*)sender;
    NSLog(@"%@",btn.titleLabel.text);
    //for searching
    if([btn.titleLabel.text isEqualToString:@"*"])
    {
        [self getAllContacts]; 
        titleText.text=@"All";
    }
    else
    {
        NSArray *tempArray = (NSArray *)(ABAddressBookCopyPeopleWithName(_addressBook,(CFStringRef)btn.titleLabel.text));
        [contacts removeAllObjects];
        if ([tempArray count] > 0) 
        {
            [contacts addObjectsFromArray:tempArray];
        } 
        [addressNameView reloadData];
        titleText.text=btn.titleLabel.text;  
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

-(IBAction)backAction:(id)sender
{
    //MenuViewController *menuView=[[MenuViewController alloc]initWithNibName:@"MenuViewController" bundle:[NSBundle mainBundle]];
    //[self presentModalViewController:menuView animated:YES];
    [self dismissModalViewControllerAnimated:YES];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if([self.contacts count]==0)
        return 1;
    return [self.contacts count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    static NSString *CellIdentifier = @"TableViewCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];       
    }
    cell.tag = indexPath.row;

    if([self.contacts count]>0)
    {

    NSObject *object = [self.contacts objectAtIndex:indexPath.row];
    NSString *firstName=[(NSString *)ABRecordCopyValue((ABRecordRef)object, kABPersonFirstNameProperty) autorelease];
    NSString *lastName =[(NSString *)ABRecordCopyValue((ABRecordRef)object, kABPersonLastNameProperty) autorelease];
    if(lastName)
        cell.textLabel.text=[NSString stringWithFormat:@"%@  %@",firstName,lastName];
    else
        cell.textLabel.text=firstName;
    }
    else
    {
        cell.textLabel.text=@"No Contacts";
    }
    //UISwipeGestureRecognizer* gestureR;
    //gestureR = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFrom:)] autorelease];
   // gestureR.direction = UISwipeGestureRecognizerDirectionLeft;
   // [cell addGestureRecognizer:gestureR];
   // cell.editing=YES;

    return cell;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([self.contacts count]>0)
    return UITableViewCellEditingStyleDelete;
    else
    return UITableViewCellEditingStyleNone;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
        NSLog(@"Delete Clicked on cell Index : %d",indexPath.row);
        // Commit the delete
        ABRecordRef* personObject=(ABRecordRef*) [self.contacts objectAtIndex:indexPath.row];
        if(ABAddressBookRemoveRecord(_addressBook, personObject, NULL))
        {
        ABAddressBookSave(_addressBook, NULL);
        [self getAllContacts];

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" 
                                                            message:@"Contact succesfully deleted" 
                                                           delegate:self cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
        }
    }
}

/*
 - (void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer
{    
    NSLog(@"%d = %d",recognizer.direction,recognizer.state);
}
*/

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 54;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([self.contacts count]>0)
    {
    AddressEntryDetailController *entryDetail=[[AddressEntryDetailController alloc]initWithNibName:@"AddressEntryDetailController" bundle:[NSBundle mainBundle]];
    int index=indexPath.row;
    entryDetail.personObject=(ABRecordRef*) [self.contacts objectAtIndex:index];
    entryDetail._addressBook=&_addressBook;
    entryDetail.addressBookViewController=self;
    [self presentModalViewController:entryDetail animated:YES];
    }
}

-(IBAction)addToAddressbook:(id)sender
{  
    ABNewPersonViewController *picker = [[ABNewPersonViewController alloc] init];
    picker.newPersonViewDelegate = self;

    UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:picker];
    [self presentModalViewController:navigation animated:YES];

    [picker release];
    [navigation release];

   /* ABPeoplePickerNavigationController *picker =
    [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;
    [self presentModalViewController:picker animated:YES];*/

}

#pragma mark ABNewPersonViewControllerDelegate methods
// Dismisses the new-person view controller. 
- (void)newPersonViewController:(ABNewPersonViewController *)newPersonViewController didCompleteWithNewPerson:(ABRecordRef)person
{
    [self dismissModalViewControllerAnimated:YES];
    [self getAllContacts];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:53:33.427

使用以下链接，

[http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318](http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318)

# java - 在 android 4.0.3 中可以进行多播编程吗？

> ID：12757159
> 
> 赞同：3
> 
> 时间：2012-10-06T05:51:11.673
> 
> 标签：java, android, sockets, udp, multicast

我正在开发一个可以使用多播套接字与 java 服务器通信的 Android 应用程序。我仅在 java 中成功开发了相同的应用程序，但是当我在 android 中使用相同的代码时出现问题。我在 Google 线程上发现了一段代码，报告说 android 不支持 multicastSocket。请告诉我我们如何在android中应用多播？在 android 中可以进行多播编程吗？请提供一些有用的链接..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T07:40:41.897

是的，在 android 中可以使用多播套接字。你可以参考这个类的android

[http://developer.android.com/reference/java/net/MulticastSocket.html](http://developer.android.com/reference/java/net/MulticastSocket.html)

# javascript - 如何阻止 window.status 显示？

> ID：12757161
> 
> 赞同：1
> 
> 时间：2012-10-06T05:51:31.950
> 
> 标签：javascript, jquery, css, html

我有以下内容：

```
<a  class="button accessLink"
            id="loginLink"
            href="#"
            data-action="Login"
            data-dialog="access"
            data-disabled="false"
            data-entity="n/a"
            data-href="/MyAccount/Access/Login"
            title="Login">Login</a> 
```

和：

```
$('.accessLink')
    .mouseover(function() {
        window.status = '';
    }); 
```

但是，当我将鼠标悬停在上面的链接上时，我仍然看到

```
<my ip address>/# 
```

有没有其他方法可以阻止它在浏览器窗口底部显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T05:57:23.800

**完全不**使用锚`<a>`标签怎么样？`<span>`在 jQuery 中处理 a或元素的单击事件`<div>`并执行 location.href 以将用户带到元素的 data-href 中指定的链接。这样，状态栏中不会显示任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:58:01.013

[`window.status`](https://developer.mozilla.org/en-US/docs/DOM/window.status)在最新的浏览器中默认禁用。考虑恶意网站可以有效冒充受信任实体的场景：

```
<script>
$('#bad-link').mouseover(function() {
    window.status = 'www.microsoft.com';
});
</script>
<a href="http://www.example.com/something-bad" id="bad-link">Click me</a> 
```

还要记住，*许多*浏览器默认情况下甚至不再显示状态栏！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:01:16.457

请试试这个：

指定 href="javascript:"

```
<a  class="button accessLink"
            id="loginLink"
            href="javascript:"
            data-action="Login"
            data-dialog="access"
            data-disabled="false"
            data-entity="n/a"
            data-href="/MyAccount/Access/Login"
            title="Login">Login</a> 
```

# java - 如何在 android 2.3.3 中创建自定义启动动画

> ID：12757163
> 
> 赞同：0
> 
> 时间：2012-10-06T05:51:51.607
> 
> 标签：java, android, android-emulator

我想在android中创建一个自定义启动动画。我有一个`bootanimation.zip`文件，`data-->Local folder`但是在启动模拟器后只阻止屏幕显示。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:57:18.223

启动动画不应该进入`/system/media`设备吗？

# java - 接收通知？

> ID：12757167
> 
> 赞同：2
> 
> 时间：2012-10-06T05:52:22.510
> 
> 标签：java, android

我想知道是否有可能从另一个应用程序接收到传输到系统的通知。我听说广播接收器是可能的。我也需要应用程序的来源。我相信这是可能的，因为应用程序取代了通知系统，例如 Notifier Pro。关于如何做到这一点的任何想法？如果需要，我可以与超级用户合作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:20:30.780

这已发布在评论中，我想我会将其发布为流浪谷歌的答案。谢谢塔尔卡内尔！

[检测新的 Android 通知](https://stackoverflow.com/questions/9367196/detect-a-new-android-notification/9632076#9632076)

# javascript - 在 ASP.NET MVC 中组合和缩小 JS 和 CSS

> ID：12757173
> 
> 赞同：9
> 
> 时间：2012-10-06T05:53:32.197
> 
> 标签：javascript, asp.net-mvc, minify

我创建了默认的 ASP.NET MVC 3 Web 应用程序。然后我在 \Views\Shared_Layout.cshtml 视图中添加了三个 css 和三个 js 文件：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/StyleSheet1.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/StyleSheet2.css")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/JScript1.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/JScript2.js")" type="text/javascript"></script>

</head>
<body>
    <div class="page">
        <div id="header"> 
```

……

当我运行应用程序时，我的 html 代码是

```
<!DOCTYPE html>
<html>
<head>
    <title>Home Page</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/StyleSheet1.css" rel="stylesheet" type="text/css" />
    <link href="/Content/StyleSheet2.css" rel="stylesheet" type="text/css" />

    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/JScript1.js" type="text/javascript"></script>
    <script src="/Scripts/JScript2.js" type="text/javascript"></script>

</head>
<body>
    <div class="page"> 
```

是否可以在 MVC 中有一个处理程序来将我的输出 html 更改为：

```
<!DOCTYPE html>
    <html>
    <head>
        <title>Home Page</title>
        <script src="js.axd=/Scripts/jquery-1.5.1.min.js,/Scripts/JScript1.js,/Scripts/JScript2.js" type="text/javascript"></script>
        <link href="css.axd=/Content/Site.css,/Content/StyleSheet1.css,/Content/StyleSheet2.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="page"> 
```

所以链接`js.axd=/Scripts/jquery-1.5.1.min.js,/Scripts/JScript1.js,/Scripts/JScript2.js` 会返回所有这些js文件的内容给浏览器，链接`css.axd=/Content/Site.css,/Content/StyleSheet1.css,/Content/StyleSheet2.css`会返回所有css文件的内容。

我以前在 ASP.NET 中通过 IHttpHandler 做过一些事情，但不知道如何在 MVC 中做到这一点，因为我只是 MVC 的初学者。

任何帮助和代码示例将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T06:29:23.560

您可以使用捆绑和缩小 nuget 包。[捆绑和缩小](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

`At the NuGet console type: "Install-Package Microsoft.AspNet.Web.Optimization"`

这里的例子：

[在 MVC 3 中使用 Web 优化](http://icanmakethiswork.blogspot.co.uk/2012/10/using-web-optimization-with-mvc-3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T23:53:36.510

我在自己的项目中使用[磁带。](http://getcassette.net/)此外，[此处](http://nugetmusthaves.com/Tag/minify)的此列表包含 Nuget 中的前 20 名。

# javascript - 使用 KineticJS 从层中删除对象

> ID：12757176
> 
> 赞同：14
> 
> 时间：2012-10-06T05:53:43.087
> 
> 标签：javascript, html5-canvas, kineticjs

我目前正在从事一个涉及 KineticJS 的项目。

我必须不断地动态创建和删除形状，但似乎无法弄清楚如何做后者。我一直在尝试做：

```
 $ myLayer.remove(myShape) 
```

因为这是大多数帖子似乎推荐的。但是，文档说这将从舞台上删除图层，而不是从图层中删除形状。当我在项目中尝试这个时，它实际上从舞台上删除了图层。

那么我做错了什么还是有其他方法可以从图层中删除形状？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T14:51:18.793

有两个功能可能会有所帮助。

*   `childContainer.remove()`将 childContainer 从其父级中移除。
*   `parentContainer.removeChildren()`从此容器中删除所有子项。

**编辑**：这也适用于形状。只需重新绘制图层。

```
myShape.remove();
myLayer.draw(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:15:25.420

在 Kinetic 4.0 和最新版本之间的某个地方，remove(child) 停止工作。removeChild(child) 也不起作用。

我通过使用 child.remove(); 解决了这个问题；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T11:52:36.560

u 可以使用动力学函数的原型

`Kinetic.Node.prototype.remove.call(removed_object);`

`baselayer.draw();`

# asp.net - 在 LinkBut ton 点击 上打开一个 jquery 对话框

> ID：12757179
> 
> 赞同：0
> 
> 时间：2012-10-06T05:54:23.770
> 
> 标签：asp.net, jquery-ui

我想在 gridview 的 itemtemplate 字段中打开一个对话框。

我的页面上有一个链接按钮，我想在单击链接按钮时打开一个 jquery 对话框。

我的代码是：

```
<head>
    <script type="text/javascript">

    $(document).ready(function(){
    $('#LinkButton1').click(function(){

    $('#dialog').dialog({modal:true});
    });
    });
    </script>
</head>

<body>
    <form id="form1" runat="server">
    <asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton>
    <div id="dialog">
        ABid ALi
    </div>
    </form>
</body> 
```

为什么我正在做的事情不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:44:30.027

你可以试试这个。这是简单的实现之一。

Javascript代码

```
function testFunction(){
           alert("test message");
         } 
```

服务器端代码

```
<asp:LinkButton ID="LinkButton1" runat="server" OnClientClick="testFunction();">LinkButton</asp:LinkButton> 
```

我锄头这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:08:09.097

添加

jquery-1.8.2.js 和 jquery-ui.js 文件

在头标签..

使用此所有 jquery 代码和对话框将可供浏览器访问。

# mono - 在本地安装 Mono 运行时

> ID：12757180
> 
> 赞同：2
> 
> 时间：2012-10-06T05:54:28.940
> 
> 标签：mono, monodevelop

这是我的情况。我在 Mac 上使用 Brew 作为我的包管理器。我在我的机器上安装了单声道，我正在用 C# 进行各种开发。我在做 web 开发，gui 开发等。当我尝试使用 Brew 更新我的机器时，出现错误。卸载 Mono 解决了这个问题。

所以，我所做的就是玩弄并在我的机器上创建了第二个用户。现在，这个用户不需要任何东西来工作。我只需要 Mono 和 Mono Develop 来处理这个用户，而不需要全局安装任何东西。一切都需要在本地安装。

所以具体来说，我是唯一一个使用我的机器的人。我的 /Users 目录如下所示。

```
/Users/dillon
/Users/dummy 
```

所以如果我可以安装单声道，让我们说：

```
/Users/dummy/.mono 
```

然后在我的 .profile 中：

```
export MONO_PATH=/Users/dummy/.mono 
```

显然这不是一个完美的世界，但我想知道是否有人是这方面的专家？（此外，我将这个虚拟用户用于其他东西，我将它用于 Wine，并且我从学校收集了该用户的软件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:03:19.343

您需要从源代码构建 Mono 以将其安装到自定义位置（在这种情况下，您可以将其安装在您喜欢的任何位置）。

你可以在任何地方安装 MonoDevelop.app，但是让它使用你的自定义 Mono 有点棘手。不过，您也许可以通过处理相关的环境变量来使其工作。

如何在自定义位置安装 Mono 和相关的环境变量都在这里介绍：http: [//mono-project.com/Parallel_Mono_Environments](http://mono-project.com/Parallel_Mono_Environments)

# java - 如何在 Netbeans 中使用自定义 Look&Feel 主题？

> ID：12757182
> 
> 赞同：4
> 
> 时间：2012-10-06T05:54:57.833
> 
> 标签：java, swing, netbeans, themes

可以下载 L&F java 主题并在 netbeans 中使用吗？

例如使用以下主题之一：http: [//geeknizer.com/best-java-swing-look-and-feel-themes-professional-casual-top-10/](http://geeknizer.com/best-java-swing-look-and-feel-themes-professional-casual-top-10/)

我试过这个说明，但它看起来很旧：http: [//javahowto.blogspot.in/2008/05/how-to-customize-netbeans-look-and-feel.html](http://javahowto.blogspot.in/2008/05/how-to-customize-netbeans-look-and-feel.html)

使用 netBeans 7.2

更新：

这个命令似乎工作： `./netbeans --cp:p /home/fra/Desktop/jgoodies-looks-2.4.2/jgoodies-looks-2.4.2.jar --cp:p /home/fra/Desktop/jgoodies-looks-2.4.2/lib/jgoodies-common-1.2.1.jar --laf com.jgoodies.looks.plastic.PlasticLookAndFeel`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T06:21:07.727

你需要使用一个标志。你可以[在这里](http://wiki.netbeans.org/FaqCustomLaf)查看更多信息。并更改为一些预定义的 LaF：

### 可用主题

*   **金属：**也称为“跨平台外观”或“海洋主题”。典型的 Java 外观 - 这是默认值。此类是 Java Runtime as 的一部分`javax.swing.plaf.metal.MetalLookAndFeel`。
*   **Nimbus：**基于现代 Synth 的 laf。此类是 Java Runtime 6u10 的一部分，作为`com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel`.
*   **原生：**也称为“系统外观”。这些类是 Java 运行时`com.sun.java.swing.plaf.windows.WindowsLookAndFeel`（MS Windows）、`com.sun.java.swing.plaf.gtk.GTKLookAndFeel`（Linux）或`com.sun.java.swing.plaf.mac.MacLookAndFeel`（Mac OS）的一部分，具体取决于您使用的操作系统（另请参阅 参考资料`UIManager.getSystemLookAndFeelClassName()`）。
*   **主题：**经典的 laf。此类是 Java Runtime as 的一部分`com.sun.java.swing.plaf.motif.MotifLookAndFeel`。
*   ... 或选择第三方 laf，例如 Substance、Napkin、Synthetica、TinyLaF、JGoodies Plastic 等等。请注意，NetBeans 没有定期使用替代/第三方外观实现进行测试。各种实现可能会或可能不会很好地工作。

### 使用主题

1.  决定你想要的外观和感觉小部件（见上面的列表）并记住它的类名（）。
2.  如果是第三方小部件，请下载包含自定义 laf 类 () 的 JAR 文件。
3.  使用以下选项从命令行启动 NetBeans（参见下面的示例）：
4.  如果它是第三方小部件，请使用`--cp:p <jar_path>`启动选项将 JAR 放在类路径中。
5.  `--laf <laf_class>`使用启动选项选择 laf 。当 NetBeans 启动时，您应该会注意到不同的外观。如果不是，请检查拼写错误。
6.  如果您喜欢这个主题，请将您的自定义启动参数设置为永久。

# python - 价值错误难倒新手

> ID：12757186
> 
> 赞同：0
> 
> 时间：2012-10-06T05:56:18.083
> 
> 标签：python

我试图为[LPTHW](http://learnpythonthehardway.org/book/ex36.html)完成这项额外的学分练习，但我碰壁了。我不断收到价值错误，我不知道为什么。我知道我应该使用 dict 和 classes，但我还没有达到书中的那部分内容。

这个想法是我想获得这个库存功能来从列表中删除以前的武器`character_sheet`并将其替换为用户刚刚购买的武器。这是我认为相关的代码，如果我遗漏了什么，请告诉我。

在此先感谢，堆栈溢出确实帮助了我，因为我正在努力从没有以前的经验中学习 python。

```
weapon_choice = raw_input(":> ")
        if "sword" in weapon_choice:
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_zero_weapons) 
```

这是下一段相关代码。

```
weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon) 
```

这是我正在处理的列表。

```
# Weapon lists 
level_zero_weapons = ['short sword', 'club', 'dagger']
level_one_weapons = ['sword', 'mace', 'rapier']
level_two_weapons = ['long sword', 'morningstar', 'trident']
level_three_weapons = ['claymore', 'flail', 'sycthe']
level_four_weapons = ['bastard sword', 'dragon bone', 'crystal halbred'] 
```

这是我的输出，我不明白，如果我应该添加更多代码，请告诉我。

```
Please tell me your name brave soul. :> Ray

        Lets now randomly generate brave gladiator Ray.
[                             'Name: Ray:',
                              'Gender: Male',
                              'Character Class: Warrior',
                              'Strength: 11',
                              'Dexterity: 7',
                              'Constitution: 8',
                              'Damage 1D6',
                              'Crit Chance 10%',
                              'Hit Points: 6/6']
Please Press Enter To Buy A Weapon

Please type in the weapon you want to buy.

short sword, price: 1 gold pieces

club, price: 1 gold pieces

dagger, price: 1 gold pieces.

:> dagger

Your current weapon is now a dagger. Press Enter To Continue

Type in the weapon you want to buy, type quit to return to the barracks.

sword, price: 3 gold pieces

mace, price: 4 gold pieces

rapier, price: 5 gold pieces.

:> sword
Traceback (most recent call last):
  File "lodarena.py", line 399, in <module>
    character_gen()
  File "lodarena.py", line 394, in character_gen
    buy_weapon(level_one_weapons)
  File "lodarena.py", line 144, in buy_weapon
    character_sheet.remove(current_weapon)
ValueError: list.remove(x): x not in list
Raymond-Weisss-MacBook-Pro:lodarena Raylug$ 
```

编辑：这是我的整个购买武器方法。

```
# Doing Stuff for weapons and the shopkeeper. #################################

def level_zero_price():
    """Generates the price for level one weapons"""
    return randint(1, 3)

def level_one_price():
    """Generates the price for level two weapons"""
    return randint(3, 6)

def level_two_price():
    """Generates the price for level three weapons"""
    return randint(6, 9)

def level_three_price():
    """Generates the price for level four weapons"""
    return randint(9, 12)

def level_four_price():
    "Generates the price for level four weapons"""
    return randint(12, 15)
### Major Buying Stuff / Inventory Code ##########################################

def buy_weapon(weapons):
    """big bit of code that allows you to buy a weapons from a weapon list.
The function acts a little differently after level zero weapons"""
    global current_weapon
    if weapons == level_zero_weapons:
        sword_price = level_zero_price()
        blunt_price = level_zero_price()
        agile_price = level_zero_price()
        print t.bright_yellow_on_magenta + """
Please type in the weapon you want to buy.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_zero_weapons)

    elif weapons == level_one_weapons:
        sword_price = level_one_price()
        blunt_price = level_one_price()
        agile_price = level_one_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price, weapons[2],
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_one_weapons)

    elif weapons == level_two_weapons:
        sword_price = level_two_price()
        blunt_price = level_two_price()
        agile_price = level_two_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_two_weapons)

    elif weapons == level_three_weapons:
        sword_price = level_three_price()
        blunt_price = level_three_price()
        agile_price = level_three_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_three_weapons)

    elif weapons == level_four_weapons:
        sword_price = level_four_price()
        blunt_price = level_four_price()
        agile_price = level_four_price()
        print"""
Type in the weapon you want to buy, type quit to return to the barracks.

%s, price: %d gold pieces

%s, price: %d gold pieces

%s, price: %d gold pieces.
""" % (weapons[0], sword_price, weapons[1], blunt_price,weapons[2], 
       agile_price)

        weapon_choice = raw_input(":> ")
        if weapons[0] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[0]
            inventory(weapons[0])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[1] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[1]
            inventory(weapons[1])
            character_sheet.append("Current Weapon %s" % current_weapon)
        elif weapons[2] in weapon_choice:
            character_sheet.remove(current_weapon)
            current_weapon = weapons[2]
            inventory(weapons[2])
            character_sheet.append("Current Weapon %s" % current_weapon)
        else: 
            print "I dont know what %s means" % weapon_choice
            buy_weapon(level_four_weapons)      
    else:
        print"~~~There is a bug somwhere, forgot to assign (weapons)\n\n\n"
    raw_input(t.white_on_red("""
Your current weapon is now a %s. Press Enter To Continue
""" % current_weapon)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:31:39.063

没有看到更多代码我不能肯定地说，但看起来问题是当你添加武器时，你正在做，`character_sheet.append("Current Weapon %s" % current_weapon)`但后来你试图`character_sheet.remove(current_weapon)`.

那里的第一个操作将在列表中添加一个类似于“Current Weapon dagger”的字符串。第二个操作将尝试从列表中删除字符串“dagger”。但确切的字符串“dagger”不在列表中——“Current Weapon dagger”在。所以 Python 崩溃了，因为它被告知要从列表中删除“匕首”，但它找不到它——它只能找到不匹配的“当前武器匕首”。

有很多方法可以解决这个问题，因为你的代码有很多奇怪的地方，大概是因为你正在努力按顺序学习 Python the Hard Way 的部分，而你还没有学会如何将你的代码概括为函数，关于不要重复自己的原则（所有那些 if/elif/elif 块基本上都在做同样的事情，所以这就是“重复你自己”）以及如何将数据存储在适当的数据结构中。

我建议您继续学习课程并将此项目放在一边，然后，如果您以后仍然对它感兴趣，请不时参考它，以了解如何在学习过程中应用所学的新知识。每隔几节课你就会学到一些新的东西，可以让你简化这个代码——例如，使用对象而不是武器的字符串；仅在查看时将输出格式化为人类可读的文本，而不是在存储时；将字符表变成对象或字典而不是列表；并使用 if/elif/elif 块进行比较，并将从角色表中添加和删除武器的业务逻辑概括为一个函数。

如果您只是想解决这个问题，那么您需要使要删除的字符串与列表中的字符串以某种方式匹配。要么将不同的内容放入列表中（`current_weapon`而不是较长的字符串），要么实际搜索较长的字符串本身。或者，如果您确定这将是`current_weapon`数据，您可以简单地删除列表中的最后一项。

# delphi-7 - 如何查找子节点是否存在

> ID：12757187
> 
> 赞同：0
> 
> 时间：2012-10-06T05:56:39.570
> 
> 标签：delphi-7, nativexml

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<UsersF Ver="1.1">
    <row User="1" Pin="2y44ic" ExtPag="full"/>
    <row User="2" pin="tfde88" ExtPag="e45" />
    <row User="3" Pin="9gr444466gg" Level="nov" GamePag="3" />
</UsersF> 
```

这是我可以访问并放置字符串网格的代码......我使用下一个网格......

```
procedure showXmlToString;
Count:= 0;
Conf.nxtgrd.AddRow(71);
Conf.nxtgrd.BeginUpdate;
with FXml.Root do
for i := 0 to NodeCount - 1 do
  begin
    if Nodes[i].Name <> 'Ver' then
      begin
        Conf.nxtgrd.Cell[0,count].AsString := Nodes[i].Nodes[1].Value;
        Conf.nxtgrd.Cell[1,count].AsString := Nodes[i].Nodes[2].Value;
        Conf.nxtgrd.Cell[2,count].AsString := Nodes[i].Nodes[3].Value;            
        Conf.nxtgrd.Cell[3,count].AsString := Nodes[i].Nodes[4].Value;
       count := count + 1;
      end;
  end; 
```

当谈到节点不退出时，我得到了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:10:15.113

要访问属性，您可以使用`TXmlNode.AttributeCount`迭代可用的属性数量。如果这段代码的主要目的是获取属性，您可以使用`TXmlNode.Containers`.

假设您想获取所有属性名称和值，您可以使用以下迭代：

```
with FXML.Root do
for i := 0 to ContainerCount - 1 do
begin
  Log(Format('ContainersName=%s AtribNumber=%d',[Containers[i].Name,i]));
  for j:=0 to Containers[i].AttributeCount-1 do begin
    Log(Format('AttribName=%s AttribVal=%s',[Containers[i].Attributes[j].Name,Containers[i].Attributes[j].Value]));
  end;
end; 
```

在此示例`Log`程序中，将字符串显示到屏幕上。结果输出将是这样的：

```
ContainersName=row AtribNumber=0
AttribName=User AttribVal=1
AttribName=Pin AttribVal=2y44ic
AttribName=ExtPag AttribVal=full
ContainersName=row AtribNumber=1
AttribName=User AttribVal=2
AttribName=pin AttribVal=tfde88
AttribName=ExtPag AttribVal=e45
ContainersName=row AtribNumber=2
AttribName=User AttribVal=3
AttribName=Pin AttribVal=9gr444466gg
AttribName=Level AttribVal=nov
AttribName=GamePag AttribVal=3 
```

我希望这对你有帮助。

# jquery - 如何在 jquery-spring 中使用网络摄像头捕获图像

> ID：12757194
> 
> 赞同：1
> 
> 时间：2012-10-06T05:57:27.557
> 
> 标签：jquery, spring

我想使用带有 jquery 的网络摄像头捕获图像。

我有一个名为 patienRegistration 的 jsp 页面。如何在 Spring 框架中实现此功能？

请用例子给我完整的描述我是新手。

我已经看过[http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)这个网站，但我不知道如何在我的项目中实现这一点，这意味着我不知道在哪里写和写什么。

PLZ PLZ PLZ请尽快帮助我... thnx ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:07:07.393

解决方案：[有困难](https://stackoverflow.com/questions/7074230/how-to-access-webcam-from-html5)，因为它取决于[目前尚未广泛支持](http://caniuse.com/stream)的浏览器支持。

后一种选择是使用 Flash 在本地使用用户的网络摄像头；要在服务器上解释 Flash 相机数据，您需要一个专用的 Flash 通信/媒体服务器。我不是这里的专家，所以我无法提出任何建议。

JSP/Spring 是不合适的，因为它们是围绕请求/响应设计构建的，而流媒体是不同的范例。

编辑：我刚刚意识到您正在寻找一张图片。相同的客户端限制适用，但我知道您可以诱使 Flash Player 从网络摄像头上传静止帧，但我不知道您是如何做到这一点的。

# css - 如何使用 CSS“剪掉”div 的一部分？

> ID：12757195
> 
> 赞同：3
> 
> 时间：2012-10-06T05:57:41.090
> 
> 标签：css, html

这或多或少[是我得到的缩小版本](http://jsfiddle.net/TarQq/4/)，但这不是我想要的，因为我希望绿色 div 部分透明，所以我将能够看到这两个 div 后面的任何内容（有在示例中没有，但在我的项目中有）。但是另一个 div 挡住了我的视线，那么我将如何“剪掉”那个 div 的一部分呢？

只是一个想法，甚至可能有更好的方法来解决这个问题。

以防万一链接断开：

HTML：

```
<div id="foregrounddiv2"></div>
<div id="foregrounddiv"></div>​ 
```

CSS：

```
#foregrounddiv2 {
  background-color:grey;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  position: fixed;
  z-index:2;
}
#foregrounddiv {
  background-color: green;  
  position: fixed;
  z-index: 3;  
  width: 100px;
  height: 100px;
  left: 50%;
  top: 50%;
  margin-top: -50px;
  margin-left: -50px;
} 
```

**更新：**很抱歉造成误解。我正在谈论的文本位于两个 div 后面。也很抱歉命名不好。我不希望`#foregrounddiv2`div 有任何不透明度，我只想能够通过`#foregrounddiv`. 希望我说得通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:03:01.813

你想要的是灰色div上的一个洞，这个洞在绿色div的位置？

如果是这样，您不能直接这样做，您必须制作 4 个灰色 div 并安排它们的位置以在屏幕上“留下”一个洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:41:40.610

我认为还有另一种方法可以在 div 上打洞。

定义一个非常宽的 div 边框，然后你就会有一个“洞”

像这样：http: [//jsfiddle.net/chanjarster/pG9Uy](http://jsfiddle.net/chanjarster/pG9Uy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T19:56:54.120

此解决方案[不适用于所有浏览器](https://caniuse.com/#search=clip-path)（IE 当前不支持剪辑路径）。

[你可以在这里](http://jsfiddle.net/CynderRnAsh/zumdyx9p/2/)看到它的使用

（[这是](http://jsfiddle.net/CynderRnAsh/1a0t2u8g/1/)显示图层的另一个版本）

它使用剪辑路径从 div 中切出一个洞（在您的情况下为灰色 div），显示透明 div，透明 div 下方是文本。

创建切口的主要代码如下。

```
#test {
  -webkit-clip-path: polygon(
    0 0,
    70px 0,
    70px 150px,
    150px 150px,
    150px 70px,
    70px 70px,
    70px 0,
    200px 0,
    200px 200px,
    0 200px,
    0 0
  );
  clip-path: polygon(
    0 0,
    70px 0,
    70px 150px,
    150px 150px,
    150px 70px,
    70px 70px,
    70px 0,
    200px 0,
    200px 200px,
    0 200px,
    0 0
  );

  height: 200px;
  width: 200px;
  background-color:red;
  position:absolute;
  left: 0;
  right: 0;
} 
```

您可以通过一些练习和方格纸或使用剪辑路径工具来创建您想要的任何形状。

[我使用自定义多边形工具](https://bennettfeely.com/clippy/)的艺术技能不佳[的一个例子](http://jsfiddle.net/CynderRnAsh/9pkLtfjx/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T06:04:24.697

你所说的听起来不像剪辑，而更像是不透明度。

只需将`opacity: 0.5;`属性添加到您的`#foreground`样式规则即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T06:07:07.497

你的问题不清楚，但我认为你正在寻找`opacity`

这是演示[http://jsfiddle.net/TarQq/3/](http://jsfiddle.net/TarQq/3/)

希望它会帮助你。

# java - 生命游戏算法/ if else 语句的结构

> ID：12757196
> 
> 赞同：0
> 
> 时间：2012-10-06T05:58:00.343
> 
> 标签：java, if-statement, runtime-error, conways-game-of-life

我目前正在介绍 Java 类编程，但遇到了一两个问题。

首先，我目前的程序是“康威生命游戏”，除了检查相邻单元格的算法外，我已经完成了所有工作。

我在 Stackoverflow 上查看了大约 7 或 8 个不同的帖子，在其他网站上查看了一些帖子，到目前为止，我找不到任何采用我所拥有的方法的人。

现在我只需要有人来查看我的代码，看看它是否应该工作，如果不能工作，为什么不呢？目前我收到一个运行时错误，上面写着：

**“ArrayIndexOutOfBoundsException: 5 at Life.checkold(Life.java:151)”**。

我已经尽我所能在代码中标记了这个地方。

我对这些方法的输入是一个大小为 5 x 5 的数组

首先，感谢您至少阅读本文。其次，如果我需要包含任何其他内容，请发表评论或回复（这里是新的，抱歉）

构建下一代：

```
public static boolean[][] buildnext(boolean[][] lastgen)
{
    boolean[][] nextgen = new boolean[lastgen.length][lastgen[0].length];

    for(int r = 0; r < lastgen[0].length; r++)
    {
        for(int c = 0; c < lastgen.length; c++)
        {
            nextgen[c][r] = checkold(lastgen, c, r);
        }
    }
    return nextgen;

} 
```

我的检查方法：

```
public static boolean checkold(boolean[][] lastgen, int col, int row)
    {
        int acount = 0;
        boolean alive = lastgen[col][row];

        if(col == 0 && row == 0) //Top Left Corner
        {       
            if(lastgen[col][row + 1] == true) acount++; //Below
            if(lastgen[col + 1][row] == true) acount++; //Right
            if(lastgen[col + 1][row + 1] == true) acount++; //Below Right
        }

        else if(col == lastgen.length && row == 0)//Top Right Corner
        {
            if(lastgen[col][row + 1] == true) acount++; //Below
            if(lastgen[col - 1][row] == true) acount++; //Left
            if(lastgen[col - 1][row + 1] == true) acount++; //Below Left
        }
        else if(col == 0 && row == lastgen[0].length)//Bottom Left Corner
        {
            if(lastgen[col][row - 1] == true) acount++; //Above
            if(lastgen[col + 1][row] == true) acount++; //Right
            if(lastgen[col + 1][row - 1] == true) acount++; //Above Right

        }
        else if(col == lastgen.length && row == lastgen[0].length) //Bottom Right Corner
        {
            if(lastgen[col][row - 1] == true) acount++; //Above
            if(lastgen[col - 1][row] == true) acount++; //Left
            if(lastgen[col - 1][row - 1] == true) acount++; //Above Left
        }
        else if(col == 0 && row > 0 && row < lastgen[0].length) //Left Col
        {
            if(lastgen[col][row - 1] == true) acount++; //Above
                            if(lastgen[col][row + 1] == true) acount++; //Below  (This is the code that the runtime error is about)
            if(lastgen[col + 1][row] == true) acount++; //Right
            if(lastgen[col + 1][row - 1] == true) acount++; //Above Right
            if(lastgen[col + 1][row + 1] == true) acount++; //Below Right

        }
        else if(col == lastgen.length && row > 0 && row < lastgen[0].length) //Right Col
        {
            if(lastgen[col - 1][row] == true) acount++; //Left
            if(lastgen[col][row - 1] == true) acount++; //Above
            if(lastgen[col][row + 1] == true) acount++; //Below
            if(lastgen[col - 1][row - 1] == true) acount++; //Above Left
            if(lastgen[col - 1][row + 1] == true) acount++; //Below Left
        }
        else if(col < 0 && row == 0) //Top Row
        {
            if(lastgen[col][row + 1] == true) acount++; //Below
            if(lastgen[col - 1][row] == true) acount++; //Left
            if(lastgen[col + 1][row] == true) acount++; //Right
            if(lastgen[col - 1][row + 1] == true) acount++; //Below Left
            if(lastgen[col + 1][row + 1] == true) acount++; //Below Right
        }
        else if(col < 0 && row == lastgen[0].length) //Bottom Row
        {
            if(lastgen[col][row - 1] == true) acount++; //Above
            if(lastgen[col - 1][row] == true) acount++; //Left
            if(lastgen[col + 1][row] == true) acount++; //Right
            if(lastgen[col - 1][row - 1] == true) acount++; //Above Left
            if(lastgen[col + 1][row - 1] == true) acount++; //Above Right
        }
        else if(col < 0 && row < 0) //Middle Cells
        { 
            if(lastgen[col][row + 1] == true) acount++; //Below
            if(lastgen[col][row - 1] == true) acount++; //Above
            if(lastgen[col - 1][row] == true) acount++; //Left
            if(lastgen[col + 1][row] == true) acount++; //Right

            if(lastgen[col - 1][row - 1] == true) acount++; //Above Left
            if(lastgen[col + 1][row - 1] == true) acount++; //Above Right
            if(lastgen[col - 1][row + 1] == true) acount++; //Below Left
            if(lastgen[col + 1][row + 1] == true) acount++; //Below Right
        }

        if(acount == 3 && alive == false) alive = true;
        if(acount == 1) alive = false;
        if(acount == 3 && alive == true) alive = false;

        return alive;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:09:13.533

您的异常非常明显，您正在尝试访问超出范围的数组索引。

```
else if(col == 0 && row > 0 && row < lastgen[0].length) //Left Col
        {
            if(lastgen[col][row - 1] == true) acount++; //Above
                            if(lastgen[col][row + 1] == true) acount++; //Below  (This is the code that the runtime error is about) 
```

您的代码在此行失败：

```
if(lastgen[col][row + 1] == true) 
```

说 lastgen 数组是 2X3 数组并且 row = 2，否则如果部分为真，并考虑是否也为真，现在在这里

```
if(lastgen[col][row + 1] == true) 
```

您正在尝试访问`3`索引，请记住：数组索引从零开始。如果您的数组长度为 3，则您的数组索引将为 0、1、2。`2`将是最后一个索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:14:37.910

这些条件是否正确？

```
 col < 0 
```

在我看来，您应该评估“col > 0”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:28:23.813

由于同一块中有两行而出错

```
 1\. if(lastgen[col][row + 1] == true) acount++;
 2\. if(lastgen[col + 1][row + 1] == true) acount++; 
```

假设您的 lastgen 元素大小为 4 并且您正在尝试访问`[row+1]`显然是`5`

**编辑**

放`else if(col == 0 && row > 0 && row < lastgen[0].length-1)`

代替 `else if(col == 0 && row > 0 && row < lastgen[0].length)`

**array.length-1**

# android - 使用android中的listview项将图像从一个活动发送到另一个活动

> ID：12757201
> 
> 赞同：1
> 
> 时间：2012-10-06T05:59:40.073
> 
> 标签：android, android-intent, android-emulator

我正在从 URL 获取数据到 listview 中，我希望每当用户单击 listview 项目时，所选项目的详细信息将与图像一起显示给用户，我要将文本数据发送到另一个活动但无法发送图像，但在单项中活动我在imageview中得到空白而不是图像，我该如何解决这个问题。一些参考代码：-

```
 ListViewActivity Code:-   

    public void onItemClick(AdapterView<?> parent, View view,
int position, long id) {
 // getting values from selected ListItem
String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
String duration = ((TextView) view.findViewById(R.id.duration)).getText().
    toString();
String image = ((ImageView)view.findViewById(R.id.list_image))
    .getImageMatrix().toString();

// Starting new intent
Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
in.putExtra(KEY_TITLE, title);
in.putExtra(KEY_ARTIST, artist);
in.putExtra(KEY_DURATION, duration);
in.putExtra(KEY_THUMB_URL, image);
startActivity(in);

     SingleItemActivity Code:-
    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent

    String title = in.getStringExtra(KEY_TITLE);
    String artist = in.getStringExtra(KEY_ARTIST);
    String duration = in.getStringExtra(KEY_DURATION);
    Bitmap bitmap =(Bitmap) in.getParcelableExtra(KEY_THUMB_URL);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);     
    ImageView image = (ImageView)findViewById(R.id.image_label);
    image.setImageBitmap(bitmap);   

    lblName.setText(title);
    lblCost.setText(artist);
    lblDesc.setText(duration);

     SingleItemXML Code:-
     <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="match_parent"
      android:layout_height="match_parent">

    <ImageView     
        android:id="@+id/image_label"   
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:src="@drawable/rihanna"
        />

        <TextView android:id="@+id/name_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25dip"
        android:textStyle="bold"
        android:paddingTop="10dip"
        android:paddingBottom="10dip"
        android:textColor="#43bd00"/>

        <TextView android:id="@+id/email_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"/>

       <TextView android:id="@+id/mobile_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"/>

        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:35:01.113

您应该使用`buildDrawingCache()`and`getDrawingCache()`从 ImageView 中获取位图，所以在您的`onItemClick()`操作中，

```
imageView.buildDrawingCache();
Bitmap bitmap = imageView.getDrawingCache();

Intent intent = new Intent(context, next_activity.this);
intent.putExtra("image", bitmap);
startActivity(intent); 
```

因为，在下一个活动中检索，

```
bitmap = getIntent().getParcelableExtra("image"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:36:28.110

in.putExtra(KEY_THUMB_URL, image);

将图像转换为 BASE64 字符串格式。并在新活动中再次将 BASE64 字符串转换为图像..

```
public String bitMapToString(Bitmap bitmap) {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
        byte[] b = baos.toByteArray();
        String stringBody = null;
        try {
            stringBody = Base64.encodeToString(b, Base64.DEFAULT).toString();
        } catch (Exception e) {
            toast(e.toString());
            e.printStackTrace();
        }
        return stringBody;
    } 
```

# mysql - 获取mysql DB中列的最大值

> ID：12757202
> 
> 赞同：6
> 
> 时间：2012-10-06T05:59:43.507
> 
> 标签：mysql, sql

我的数据库表列值是

```
tenant_ id  group_id
2           2-100
2           2-111
1           1-222
1           1-888
2           2-999 
2           2-1000 
```

询问 ：

```
select max(group_id) from prospect_group where tenant_id=2 
```

我已经使用上面的查询来获取tenant_id=2 的最大值，但它返回的值是 999 而不是 1000。如何获得 1000 作为最大值。？？？谁能帮我..？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T06:01:14.600

你需要有`GROUP BY`子句

```
SELECT tenant_ID, MAX(CAST(group_ID AS SIGNED))
FROM tableName
-- WHERE  tenant_id=2 -- uncomment this if you select only for specific tenant_ID
GROUP BY tenant_ID 
```

通过替换为空字符来尝试它。

```
SELECT tenant_ID, 
       MAX(CAST(REPLACE(group_ID, CONCAT(tenant_ID, '-'), '')  AS SIGNED)) maxGID
FROM tableName
-- WHERE  tenant_id=2 -- uncomment this if you select only for specific tenant_ID
GROUP BY tenant_ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d9069/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:01:39.020

您需要添加`GROUP BY`子句。

```
select max(group_id) from prospect_group where tenant_id=2 group by tenant_ id 
```

# .htaccess - 301 从 htaccess 重定向到新的 URL

> ID：12757204
> 
> 赞同：1
> 
> 时间：2012-10-06T05:59:56.500
> 
> 标签：.htaccess, magento

需要您的帮助，我在 htaccess 文件中添加了以下规则，不确定为什么它没有执行，您可以检查并让我们知道是否有任何问题

```
Redirect 301 /product/rose-elliot%E2%80%99s-__060727.aspx http://www.website.co.uk/ahhgh.html

Redirect 301 /abc/%20/index.php/customer/account/login/ https://www.website.co.uk/customer/account/login/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:55:26.147

URI 在通过 URL 文件映射处理管道发送之前被解码。所以你需要对`%`'s 进行转义：

```
Redirect 301 "/product/abcd.aspx" http://www.website.co.uk/abcd.html

Redirect 301 "/abcd/ /index.php/customer/account/login/" https://www.website.co.uk/customer/account/login/ 
```

您需要确保您使用的是支持 unicode 的文本编辑器。

# c++ - boost 概念检查 operator() 重载

> ID：12757205
> 
> 赞同：0
> 
> 时间：2012-10-06T06:00:03.403
> 
> 标签：c++, boost, c++-concepts

```
template <typename T, typename C>
class CSVWriter{
    template <typename PrinterT>
    void write(std::ostream& stream, const PrinterT& printer){

    }
}; 
```

我想检查是否存在至少两个重载`PrinterT::operator()(T*)`，并且`PrinterT::operator()(C*)`
`PrinterT`可能会或可能不会继承`std::unary_function`
我需要在这里使用什么概念检查类？

*（我没有使用 C++11）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:16:28.927

你可以使用类似的东西

```
#include <iostream>

#include <boost/concept/requires.hpp>
#include <boost/concept/usage.hpp>

template <class Type, class Param>
class has_operator_round_brackets_with_parameter
{
public:
    BOOST_CONCEPT_USAGE(has_operator_round_brackets_with_parameter)
    {
        _t(_p);
    }

private:
    Type    _t;
    Param   _p;
};

struct X {};
struct Y {};

struct Test1
{
    void operator() (X*) const { }
};

struct Test2: public Test1
{
    void operator() (X*) const { }
    void operator() (Y*) const { }
};

template <class T, class C>
struct CSVWriter
{
    template <class PrinterT>
    BOOST_CONCEPT_REQUIRES(
        ((has_operator_round_brackets_with_parameter<PrinterT, T*>))
        ((has_operator_round_brackets_with_parameter<PrinterT, C*>)),
    (void)) write(std::ostream& stream, const PrinterT& printer)
    {

    }
};

int main()
{
    CSVWriter<X, Y> w;
    // w.write<Test1>(std::cout, Test1());  // FAIL
    w.write<Test2>(std::cout, Test2());     // OK
    return 0;
} 
```

# php - CodeIgniter 的默认控制器不加载

> ID：12757211
> 
> 赞同：0
> 
> 时间：2012-10-06T06:01:18.160
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-url

我继承了一个正在进行的 CI v2.0.2 项目。

我尝试加载默认控制器 -`http://localhost/ci202/index.php`但我得到的只是一个空白页面。

我为所有消息启用了日志记录，这是日志：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?>

DEBUG - 2012-10-05 23:55:41 --> Config Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Hooks Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Utf8 Class Initialized
DEBUG - 2012-10-05 23:55:41 --> UTF-8 Support Enabled
DEBUG - 2012-10-05 23:55:41 --> URI Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Router Class Initialized
DEBUG - 2012-10-05 23:55:41 --> No URI present. Default controller set.
DEBUG - 2012-10-05 23:55:41 --> Output Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Security Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Input Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Global POST and COOKIE data sanitized
DEBUG - 2012-10-05 23:55:41 --> Language Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Loader Class Initialized
DEBUG - 2012-10-05 23:55:41 --> Helper loaded: url_helper
DEBUG - 2012-10-05 23:55:41 --> Database Driver Class Initialized 
```

为了得到这个日志，我只重新加载`index.php`了一次。

`routes.php`&的内容与`.htaccess`CI v2.0.2的默认安装相同。

我尝试创建另一个“helloworld”类型的控制器，它是welcome 控制器的复制品，但仍然得到一个空白页。

我还应该在哪里寻找错误配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:27:39.500

这可以帮助您找到问题所在。

1.  确保数据库连接成功

2.  如果您从 CI 配置文件启用了输出压缩，请从以下位置禁用它`config.php`：

    `$config['compress_output'] = FALSE;`

3.  从 development` 更改默认环境设置`index.php to` ，这样您就可以看到应用程序中可能出现的任何错误：

    `define('ENVIRONMENT', 'development');`

# java - 从java中的JComboBox获取字符串值

> ID：12757215
> 
> 赞同：3
> 
> 时间：2012-10-06T06:01:52.703
> 
> 标签：java, swing, debugging, jcombobox

我正在做一个 testJComboBox 程序。一旦我选择了 jCombobox 的输出，我就会得到我需要的字符串值。但是，它不起作用。

**这是我的代码：**

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class TestJCB extends JFrame {

    private JLabel genderL;
    private JComboBox genderJCB;
    private String[] test = {"male", "female"};
    private JButton gB;

    public TestJCB() {

        setSize(400, 400);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(null);
        setVisible(true);

        JPanel frame = new JPanel();
        frame.setSize(400, 400);
        frame.setLocation(0, 0);
        frame.setLayout(null);
        frame.setVisible(true);

        JLabel genderL = new JLabel("Gender");
        genderL.setBounds(10, 200, 100, 30);
        JComboBox genderJCB = new JComboBox(test);
        genderJCB.setBounds(60, 10, 100, 30);

        JButton gB = new JButton("Gender");
        gB.setBounds(10, 50, 60, 30);
        aaa a = new aaa();
        gB.addActionListener(a);

        frame.add(genderL);
        frame.add(genderJCB);
        frame.add(gB);
        add(frame);
    }

    public class aaa implements ActionListener {

        public void actionPerformed(ActionEvent sHandler) {
            if (genderJCB.getSelectedItem().equals("female")) {
                System.out.print("yes");
            } else {
                System.out.print("no");
            }
        }
    }

    public static void main(String[] args) {
        TestJCB test = new TestJCB();
        test.setVisible(true);
    }
} 
```

我也尝试过`combo.getEditor().getItem()`，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:09:53.677

> 我也尝试了 combo.getEditor().getItem() 但它没有用。

您最重要的问题是，您声明了从未使用或初始化过的变量

```
private JComboBox genderJCB; 
```

因为在公共`TestJCB(){`覆盖并创建

```
JComboBox genderJCB = new JComboBox(test);// same issue with JLabel too 
```

如果您想收听`ActionPerformed`，则将其更改为

```
genderJCB = new JComboBox(test); 
```

更好的方法是阅读[JComboBox 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:10:35.463

错误是 NullPointerException。它扔在这里`if (genderJCB.getSelectedItem().equals("female")){`。这是因为genderJCB 为空。为什么是这样？你不是在这里设置的`JComboBox genderJCB= new JComboBox(test);`吗？不。您创建了一个新的局部变量，而不是一个字段，因此您从未声明该字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:15:53.813

这是一个可能的解决方案

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class main extends JFrame
{
    private JLabel genderL;
    private JComboBox genderJCB;
    private String[] test = { "male", "female" };
    private JButton gB;

    public main( )
    {

        setSize( 400, 400 );
        setLocationRelativeTo( null );
        setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        setLayout( null );
        setVisible( true );

        JPanel frame = new JPanel( );
        frame.setSize( 400, 400 );
        frame.setLocation( 0, 0 );
        frame.setLayout( null );
        frame.setVisible( true );

        JLabel genderL = new JLabel( "Gender" );
        genderL.setBounds( 10, 200, 100, 30 );
        JComboBox genderJCB = new JComboBox( test );
        genderJCB.setBounds( 60, 10, 100, 30 );

        JButton gB = new JButton( "Gender" );
        gB.setBounds( 10, 50, 60, 30 );
        aaa a = new aaa( genderJCB );
        gB.addActionListener( a );

        frame.add( genderL );
        frame.add( genderJCB );
        frame.add( gB );
        add( frame );

    }
    public class aaa implements ActionListener
    {
        private JComboBox genderJCB;
        public aaa( JComboBox genderJCB )
        {
            this.genderJCB = genderJCB;
        }

        public void actionPerformed( ActionEvent sHandler )
        {
            if( genderJCB.getSelectedItem( ).equals( "female" ) )
            {
                System.out.print( "yes" );
            }
            else
            {
                System.out.print( "no" );
            }
        }
    }

    public static void main( String[] args )
    {
        main test = new main( );
        test.setVisible( true );
    }

} 
```

# matlab - 如何让 Matlab 的编辑器在编写代码时始终保持智能缩进？

> ID：12757218
> 
> 赞同：7
> 
> 时间：2012-10-06T06:02:28.060
> 
> 标签：matlab, editor, auto-indent

在使用 Matlab 时，我经常使用 Ctrl+A（全选）后跟 Ctrl+I（智能缩进）的组合。我可以在我输入代码时让 Matlab 的编辑器智能缩进选项自动工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T07:10:47.980

`File > Preferences > Editor/Debugger > Language > Apply smart indenting while typing`

# php - 如何将 api 请求计数存储到 PHP 脚本以快速回复客户端？

> ID：12757222
> 
> 赞同：0
> 
> 时间：2012-10-06T06:04:04.367
> 
> 标签：php, mysql, api, limit

我最近在这里问：[如何知道哪个网站要求使用 php 提供的外部图像？](https://stackoverflow.com/questions/12756835/how-to-know-which-website-ask-for-an-external-image-served-by-php)

第三方网站请求图像，例如：

```
<img src="http://www.myserver.com/mypage.php?api=APIKEY&text=some-text-here" alt=""/> 
```

我需要每小时和每天限制对特定 api 密钥的访问。

现在我在 mysql DB 上存储了一些数据：

> id、apikey、limit_ip、limit_referer、limit_hour、limit_day
> 
> 1、JFKHJSDLGHUFIE、127.0.0.1、*、250、10000

```
<?php

//Verify Referer
if(
    !isset($_SERVER['HTTP_REFERER']) || $_SERVER['HTTP_REFERER'] == "" ||
    !isset($_GET['apik']) || $_GET['apik'] == "" ||
    !isset($_SERVER['REMOTE_ADDR']) || $_SERVER['REMOTE_ADDR'] == "") {
        exit("API error, your referer informations aren't set");
} else {
    //Site referer
    $site = $_SERVER['HTTP_REFERER'];
    //Ip referer
    $ip = $_SERVER['REMOTE_ADDR'];
    //Get api key
    $apik = htmlentities($_GET['apik']);

    try
    {
        $options = array(
            PDO::MYSQL_ATTR_INIT_COMMAND    => "SET NAMES utf8"
        );
        //MySQL connection
        $bdd = new PDO('mysql:host=localhost;dbname=apitest', 'root', '', $options);
    }
    catch(Exception $e)
    {
        //If error, die
        die('Error: '.$e->getMessage());
    }

    //Lookup for the apikey in the database
    $answer = $bdd->query('SELECT * FROM apiCode WHERE apikey = "'.$apik.'" LIMIT 0,1');
    //Fetch settings for this api key
    while ($data = $answer->fetch()) {
        $limit_ip = $data['limit_ip'];
        $limit_referer = $data['limit_referer'];
        $limit_hour = $data['limit_hour'];
        $limit_day = $data['limit_day'];
    }

    //Verify API limits
    //Cookie, session, database? 

    //Return content
    echo "Api : Success!";

} 
```

我认为最好的方法是在数据库中创建一个表，例如：

id、access_hour、access_day

使用 cron 作业等每小时重置 access_hour 字段，但服务内容需要更多时间，因为 MySQL 太慢了，如果它快的话会更好:)。

Cookie 将存储在远程计算机上，因此不可靠。

会话的持续时间是 15 分钟......所以它太短了，无法存储和限制访问。

以上所有陈述仅代表我的观点。

我的问题是：如何在不影响服务速度的情况下每小时和每天存储和限制特定 API 密钥的访问次数？

*   没有：它只需要快速可靠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:06:14.313

我不会把这些数据放在mysql中。对于此类信息，您不需要持久性或持久性。使用 memcached 会更好，并使用如下算法：

[http://en.wikipedia.org/wiki/Leaky_bucket](http://en.wikipedia.org/wiki/Leaky_bucket)

# c# - 强制事件连接 基于事件的异步模式

> ID：12757223
> 
> 赞同：1
> 
> 时间：2012-10-06T06:04:16.903
> 
> 标签：c#, events, asynchronous

我正在现有的同步类中实现上述模式，我想知道是否建议强制连接 MethodNameComplete 事件，如下所示：

```
public event AsyncEventHandler MethodNameCompleted;

public void MethodNameAsync()
{
    if (MethodNameCompleted == null)
    {
        throw new Exception(
            "MethodNameCompleted must be wired before calling MethodNameAsync");
    }

    //perform async task...
} 
```

不幸的是，模式概述 (http://msdn.microsoft.com/en-us/library/wewwczdw.aspx) 或链接的实现页面都没有对此提出建议。

# php - dompdf不渲染帖子变量

> ID：12757229
> 
> 赞同：0
> 
> 时间：2012-10-06T06:05:24.417
> 
> 标签：php, pdf-generation, dompdf

使用 DOM PDF 创建 PDF pdf 创建得很好，但 pdf 中没有 post 变量。例如，"$_POST["docnumber"]" 不会出现在 PDF 中。如果我在渲染之前回显 val ，一切似乎都被很好地填充了。

可能只是我很累:-)

这是一个示例代码：

```
<?
require("../application.php");
require_once("../dompdf/dompdf_config.inc.php");

$val = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Application</title>
</head>
<body>
<div id="container">
<form action="" method="post">
<table>
<tr>
<td><div id="officeuseonly_left">
<div align="center">OFFICE USE ONLY</div><br /><br />
 Document Control #<br />
 <input type="text" name="docnumber" id="docnumber" value = "' . $_POST["docnumber"] .   '"     /><br /><br />
 By <input type="text" name="by" id="by" value = ""' . $_POST["by"] .'" /><br />
 </div></td>

 <tr>

  <p><input type="submit" name="submit" value="submit" /></p>
  </form>
  </div>
  </body>
  </html>';

  if (isset($_POST["submit"])){

  $dompdf = new DOMPDF();
  $dompdf->load_html($val);
  $dompdf->render();
  $dompdf->stream("sample.pdf");        
}
else
{
   echo $val;

} 
```

# xcode - 如何在 iphone 应用程序中获取当前位置？

> ID：12757232
> 
> 赞同：0
> 
> 时间：2012-10-06T06:05:43.770
> 
> 标签：xcode, cllocationmanager, mkreversegeocoder

我得到了经度和纬度值，并将其保存在标签中，它很容易显示在我的应用程序中，但我想要当前位置的详细信息，主要是地点的名称。
我使用了 MKReverseGeocoder。我做了这个代码

```
- (void)locationUpdate:(CLLocation *)location
{
    CLLocationCoordinate2D coord;
    coord.longitude=[NSString stringWithFormat:@"LATITUDE: %f", location.coordinate.latitude];

    MKReverseGeocoder *geocoder=[[MKReverseGeocoder alloc]initWithCoordinate:coord];
    [geocoder setDelegate:self];
    [geocoder  start];

    latlbl.text = [NSString stringWithFormat:@"LATITUDE: %f", location.coordinate.latitude];
    lonlbl.text = [NSString stringWithFormat:@"LONGITUDE: %f", location.coordinate.longitude];
    //txtlocate.text = [location description];

}
![-(void)reverseGeocoder:(MKReverseGeocoder)geocoder didFindPlacemark:(MKPlacemark *)placemark
{
NSLog(@"%@",\[placemark addressDictionary\]
     } 
```

![在此处输入图像描述](../Images/18652c96ffa2b01ab19a4ec2bfdf03f2.png) 这是我得到的错误...
在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:37:36.697

错误很明显：

> 从不兼容的类型“id”分配给“CLLocationCoordinate2D”（又名“double”）

`coord`是`CLLocationCoordinate2D`类型：

```
typedef struct {
    CLLocationDegrees latitude;
    CLLocationDegrees longitude;
} CLLocationCoordinate2D; 
```

`latitude`是CLLocationDegrees `longitude`：

```
typedef double CLLocationDegrees; 
```

因此，您不能将 NSString （它也是一个`id`类型）对象分配给`coord.longitude`nor `coord.latitude`。

* * *

编辑：

你应该这样做：

```
coord.longitude = location.coordinate.latitude; 
```

# objective-c - _WebSafeForwarder forwardInvocation 崩溃

> ID：12757237
> 
> 赞同：11
> 
> 时间：2012-10-06T06:06:21.420
> 
> 标签：objective-c, ios, ipad, symbolicatecrash

在我的 iOS 项目中，我遇到了很多似乎与 WebKit 相关的错误。为了提供一些背景知识，我们在应用程序中使用 WebViews 来显示新闻故事。这些新闻故事通常包含链接，当用户点击链接时，我们通常会将用户带到 Safari 以阅读完整的新闻文章。很标准的东西。无论如何，这就是崩溃的样子：

```
0     libobjc.A.dylib                       0x31198f78 objc_msgSend + 15
1     CoreFoundation                        0x313567e4 __invoking___ + 68
2     CoreFoundation                        0x312b17b1 -[NSInvocation invoke] + 160
3     CoreFoundation                        0x312b13cf -[NSInvocation invokeWithTarget:] + 50
4     WebKit                                0x3395fe0d -[_WebSafeForwarder forwardInvocation:] + 252
5     CoreFoundation                        0x31355a83 ___forwarding___ + 666
6     CoreFoundation                        0x312b0650 _CF_forwarding_prep_0 + 48
7     CoreFoundation                        0x313567e4 __invoking___ + 68
8     CoreFoundation                        0x312b17b1 -[NSInvocation invoke] + 160
9     WebCore                               0x31a851f5 _ZL11SendMessageP12NSInvocation + 24
10   WebCore                                0x31a986f1 _ZL20HandleDelegateSourcePv + 80
11   CoreFoundation                         0x31327ad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
12   CoreFoundation                         0x3132729f __CFRunLoopDoSources0 + 214
13   CoreFoundation                         0x31326045 __CFRunLoopRun + 652
14   CoreFoundation                         0x312a94a5 CFRunLoopRunSpecific + 300
15   CoreFoundation                         0x312a936d CFRunLoopRunInMode + 104
16   GraphicsServices                       0x32782439 GSEventRunModal + 136
17   UIKit                                  0x315aecd5 UIApplicationMain + 1080
18   MyApp                              0x23e7 main (main.m:13) 
```

在缩小这种崩溃范围方面，它似乎只发生在 iPad 上的 iOS 5.x 上。

FWIW，在我们代码库的某些区域，我们正在使用 WebViewDelegates 并拦截一些用户点击新闻报道中的链接。不确定这是否是一个促成因素，但认为值得一提。

关于这部分代码可能导致崩溃的任何想法？

谢谢，

肖恩

# html - 动态获取div高度的问题

> ID：12757248
> 
> 赞同：0
> 
> 时间：2012-10-06T06:08:26.780
> 
> 标签：html, height, dynamically-generated

我一直在尝试在调整浏览器窗口时动态获取图像的高度。

我使用 console.log() 来获取值来检查我的结果是否正确，不知何故结果总是 0！我究竟做错了什么？

```
$(function(){
    var ScreenHeight = $(window).height();
    var ImageHeight  = $('#bkgImages').height();
    var ImageMove   = (ScreenHeight-ImageHeight)/2
    $('#wrapper').slideDown(500);
    $('#bkgScreen').animate({opacity: .5}, 700);
    $('#bkgImages').css({top: "-" + ImageMove + "px"});
    console.log(ImageHeight);           
}); 
```

我设法让窗口高度结果工作，但不是 div 元素高度。另一个问题是每个会话只计算一次结果，因为我需要在每次用户调整浏览器窗口大小时运行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:59:34.730

我认为这取决于 div 的 css 属性，您可以参考这里的答案[https://stackoverflow.com/a/10656669/693110](https://stackoverflow.com/a/10656669/693110)。

简而言之，您需要指定 div 具有`display: inline-block;`属性。

# nginx - imap_client_buffer 在 nginx 上没有被遵守

> ID：12757250
> 
> 赞同：1
> 
> 时间：2012-10-06T06:08:38.450
> 
> 标签：nginx, imap

我在 nginx.conf 文件中将 imap_client_buffer 设置为 64k（根据 imap 协议的要求）但是当 imap 客户端发送一个很长的命令时，身份验证后，长度被截断为 4k（Linux 操作系统的默认页面大小）

我该如何调试这个问题？我已经使用 gdb 逐步完成了代码。据我所见，在 mail_proxy 模块中，正确看到了 conf 文件的值（120000 用于测试）

```
 gdb) p p->upstream.connection->data
    $24 = (void *) 0x9e4bd48
    (gdb) p s
    $25 = (ngx_mail_session_t *) 0x9e4bd48
    (gdb) p p->buffer->end
    Cannot access memory at address 0x1c
    (gdb) p s->buffer->end - s->buffer->last
    $26 = 120000
    (gdb) p s
    $27 = (ngx_mail_session_t *) 0x9e4bd48
    (gdb) n
    205 pcf = ngx_mail_get_module_srv_conf(s, ngx_mail_proxy_module);
    (gdb) n
    207 s->proxy->buffer = ngx_create_temp_buf(s->connection->pool,
   (gdb) p pcf
   $28 = (ngx_mail_proxy_conf_t *) 0x9e3c480
   (gdb) p *pcf
   $29 = {enable = 1, pass_error_message = 1, xclient = 1, buffer_size = 120000,
   timeout = 86400000, upstream_quick_retries = 0, upstream_retries = 0,
   min_initial_retry_delay = 3000, max_initial_retry_delay = 3000,
   max_retry_delay = 60000} 
```

当使用 telnet 发送下面的命令时，只接受 4k 的数据，然后 nginx 挂起，直到我在键盘上按 enter ......之后将截断的命令发送到上游 imap 服务器。

我正在使用 nginx 0.78，这是一个已知问题吗？

这是发送的命令

HP1L UID FETCH 344990,344996,344998,345004,345006,345010:345011,345015,345020,345043,345046,345049:345050,345053,345057:345059,345071,345080,345083,345085,345090,345092:345093,345096 ,345101:345102,345106,345112,345117,345136,345140,345142:345144,345146:345147,345150,345161,345163,345167,345174:345176,345195,345197,345203,345205,345207:345209,345214,345218 ,345221,345224,345229,345231,345233,345236,345239,345248,345264,345267,345272,345285,345290,345292,345301,345305,345308,345316,345320,345322,345324,345327,345358,345375,345384 ,345386,345391,345409,345427:345428,345430:345432,345434:345435,345437,345439,345443,345448,345450,345463,345468:345470,345492,345494,345499,345501,345504,345506,345515:345519 ,345522,345525,345535,345563,345568,345574,345577,345580,345582,345599,345622,345626,345630,345632:345633,345637,345640,345647:345648,345675,345684,345686:345687,345703:345704,345714:345717,345720,345722:345724,345726,345730,345734:345737,345749,345756,345759,345783,345785:345787,345790,345806:345807,345812,345816,345720, 345722:345724,345726,345730,345734:345737,345749,345756,345759,345783,345785:345787,345790,345806:345807,345812,345817,345902,345919,345953,345978,345981,345984,345990,345997, 346004,346008:346009,346011:346012,346022,346039,346044,346050,346061:346062,346066:346067,346075:346076,346081,346088,346090,346093,346096,346098:346099,346110,346140,346170, 346172:346174,346187,346189,346193:346194,346197,346204,346212,346225,346241,346244,346259,346323,346325:346328,346331:346332,346337:346338,346342,346346,346353,346361:346362, 346364,346420,346426,346432,346447,346450:346451,346453:346454,346456:346457,346459:346460,346466:346468,346474,346476,346479,346483,346496,346498:346501,346504,346530,346539,346546,346576,346589:346590,346594:346595,346601,346607:346609,346612,346614:346615,346617:346618,346625,346631,346638,346641,346654,346657,346661,346665, 346671,346687:346688,346693,346695,346734:346735,346741,346747:346748,346755,346757,346777,346779,346786:346788,346791,346793,346801,346815,346821:346822,346825,346828,346837, 346839,346843,346848,346857:346858,346860,346862:346863,346866,346868:346869,346877,346883,346895:346897,346899,346923,346927,346945,346948,346961,346964:346966,346968,346970, 346974,346987,346989:346990,346992,347000,347003,347008:347011,347013,347021,347028,347032:347034,347036,347049,347051,347058,347076,347079,347081,347083,347085,347092,347096, 347108,347130,347145:347148,347150,347155:347158,347161,347163:347164,347181,347184,347187:347189,347204,347210:347211,347215,347217:347220,347227:347228,347234,347244,347246,347251,347253,347263:347264,347266,347268,347275,347292,347294,347304,347308,347317:347320,347322,347325:347327,347340:347341,347346,347352:347353,347357, 347360:347361,347375,347379,347382:347386,347389,347392,347402,347405:347406,347411,347433:347434,347438,347440:347441,347443:347444,347448,347459:347460,347465,347468:347469, 347476:347479,347490,347497,347506,347526,347530,347545,347547,347555:347556,347601:347605,347632,347634,347641,347643:347646,347649,347653,347660,347668,347676,347707,347719, 347722,347724,347727:347732,347735,347746,347754,347756:347757,347761,347776,347779,347791,347798,347800,347805,347816:347817,347822,347837,347841,347843,347846,347848,347851, 347879,347885,347892:347894,347903,347907:347911,347915:347916,347918,347950,347952:347953,347981,347986:347988,348001,348037:348038,348049,348052,348056:348058,348061,348072,348074,348077:348078,348080,348082,348100,348105,348109,348111:348116,348119:348123,348131:348132,348138,348150:348151,348153,348157,348161:348163,348166, 348168:348169,348171,348173,348176,348178,348180:348181,348201,348204,348208,348218:348219,348222,348226,348229:348230,348235,348238:348240,348244:348247,348249,348251:348253, 348256:348257,348263,348285,348288:348289,348293,348298:348299,348301:348302,348305:348306,348310,348327,348332:348337,348340,348342,348344,348348,348351:348353,348356:348357, 348360,348366,348377,348386,348390,348398,348400:348401,348406:348407,348419,348422,348424,348427:348428,348430,348432:348433,348439,348444,348447:348448,348450:348451,348454, 348456,348459：348460,348473,348493,348497：348498,34855348572,348574,348577,348581,348588,348595,348610,348632,348636,348642,348646,348667,348672:348673,348679,348703,348713:348714,348716,348718:348722,348728:348729,348731,348735, 348743:348745,348749,348751:348752,348759,348768,348773,348780:348781,348784:348791（UID标志）

# sharepoint-2010 - 如何将自定义字段添加到列表项附件？

> ID：12757251
> 
> 赞同：2
> 
> 时间：2012-10-06T06:08:44.720
> 
> 标签：sharepoint-2010, attachment

在 SharePoint 2010 开发项目中（在 VS 2010 中），我们需要将自定义字段添加到列表项附件。例如，用户在附件文件浏览器旁边有一个额外的布尔字段，类似于以下模型：

![列表项附件的自定义字段](../Images/01f00eefbe774fb7fcdf2376e40cd7f0.png)

有任何想法吗？

# c++ - 映射支持 C++ 中每个值的多个键

> ID：12757255
> 
> 赞同：2
> 
> 时间：2012-10-06T06:09:13.373
> 
> 标签：c++, boost, boost-multi-index

我正在寻找一个现成的关联映射容器，它支持映射到单个值的多个键（别名）。

如果没有现成的解决方案，我可能不得不求助于使用 2 个单独的地图还是有更好的方法？

似乎 std::multimap 与我想要的相反。

[这个](https://stackoverflow.com/questions/11087068/multiple-keys-for-a-map-in-c)几乎相同的问题有一个公认的 boost::multi_index 答案，但我查看了文档，对如何使用它完全感到困惑。

如果 multi_index 可以帮助我实现这一点，有没有人有一个例子？

# ruby-on-rails-3 - Rails 3.2.x 应用程序中的 jquery_datepicker 没有 CSS

> ID：12757259
> 
> 赞同：1
> 
> 时间：2012-10-06T06:09:51.740
> 
> 标签：ruby-on-rails-3, jquery-ui, jquery-ui-datepicker

我在应用程序中使用[jQuery datepicker](https://github.com/albertopq/jquery_datepicker) gem，`Rails 3.2.x`日历看起来没有应用 CSS。

我需要所有与 jQuery 相关的 JS 文件`application.js`

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui 
```

我还按照 gem 的 ReadME 中的简单说明进行操作。

我的印象是，一旦我在 application.js 中需要它，那么所有内容都应该包含在内。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:43:19.623

这是因为您也没有包含 CSS 资产。仅仅包含 JavaScript 资产不足以使其样式化。

正如`jquery-rails`自述文件所述：

> 为了使用 jQuery UI 的主题部分，您还需要提供自己的主题 CSS（或使用上面提到的 jquery-ui-rails gem）。

# php - iframe 到主 URL

> ID：12757261
> 
> 赞同：0
> 
> 时间：2012-10-06T06:10:32.147
> 
> 标签：php, html, iframe

根据我的要求，我在`IFRAME`. 当我单击锚链接时，页面会重定向`IFRAME`. 在这里，我的要求是当用户单击锚标记时，（位于 中`IFRAME`）页面重定向到主 url（不在 中`IFRAME`）。我怎样才能在 PHP 或 JavaScript 中做到这一点。你能说点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:16:42.833

试试`<iframe> <a href="#" onclick='window.location.href="homepage.php"' >click here </a> </iframe>`??..这个javasript ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:00:56.590

您正在寻找[`<a target=`](http://www.w3schools.com/tags/att_a_target.asp)属性。将其设置为`_top`将更改最外层框架的 url，将其设置为`_parent`将更改父框架的 url。

# vim - Vim 配色方案无法正确显示

> ID：12757263
> 
> 赞同：1
> 
> 时间：2012-10-06T06:10:47.890
> 
> 标签：vim, colors, xterm

我从这里下载了`Dark.vim`配色方案：http: [//vimcolorschemetest.googlecode.com/svn/html/index-c.html](http://vimcolorschemetest.googlecode.com/svn/html/index-c.html)（点击Dark.vim查看代码）

然后放进去`~/.vim/colors`。

我也对`256-jungle.vim`and做了同样的事情`af.vim`。

`:colorscheme Dark`, `:colorscheme af`, 等都可以工作（即它们改变了 vim 的语法高亮），但它们都不像上面链接中的屏幕截图。

相反，它们看起来像这样（订购 af.vim、256-jungle.vim、Dark.vim）：http: [//imgur.com/a/NsmHy](http://imgur.com/a/NsmHy)

起初我认为这可能是我终端中颜色设置的问题，所以我按照“vim 中的 256 种颜色”Vim wiki-doc 页面中的提示进行操作，该页面告诉我将以下内容添加到我的`~/.bash_profile`:

```
TERM=xterm-256color

# for enabling 256 color, as per http://vim.wikia.com/wiki/256_colors_in_vim
if [ -e /usr/share/terminfo/x/xterm-256color ]; then
        export TERM='xterm-256color'
else
        export TERM='xterm-color'
fi 
```

这没有用。

另外，这是我的`~/.vimrc`文件中的内容：

```
set tabstop=2
set t_Co=256
colorscheme 256-jungle
colorscheme Dark
syntax on
let $VIM='~/.vim/' 
```

有什么想法会导致颜色方案“应该”看起来与终端中实际显示的内容之间存在这种差异吗？我正在运行 Mac OS X 10.8.2。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:26:53.720

您尝试在终端中使用的深色方案实际上是 GUI 方案（如果您查看它的代码，您只会看到“guifg、guibg”等定义）。要在终端中运行 gui 颜色方案，您可以尝试[CSApprox](http://www.vim.org/scripts/script.php?script_id=2390)插件。

# file - 批处理命令不复制文件（如果存在）然后删除文件

> ID：12757269
> 
> 赞同：0
> 
> 时间：2012-10-06T06:12:29.400
> 
> 标签：file, batch-file, copy, xcopy

我正在尝试创建一个批处理文件，它将文件从 d:\temp 复制到 c:\temp，如果文件已经存在于 c:\temp 上以实际从 c:\temp 中删除它，请不要尝试复制该文件文件并继续复制剩余的文件。如果存在则重复等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:36:34.110

干得好

```
for /r D:\temp %%a in (*) do (
    if exist "C:\temp\%%~nxa" (
        del "C:\temp\%%~nxa" /f /s /q
    ) else (
        copy "%%a" C:\temp
    )
) 
```

# javascript - Cookie 始终为空？

> ID：12757271
> 
> 赞同：2
> 
> 时间：2012-10-06T06:12:33.843
> 
> 标签：javascript, caching

我想检查 cookie 是否存在

问题是如果我检查它总是返回 null

```
if ($.cookie('cookieCreditDash') == null) {

   //CODE ALWAYS ENTER HERE... :(
            alert("no cookie");    
            $.getJSON(url, function(data) {
                saveCreditCookie(data);
            });
} else{
            alert("with cookie");
            var data =  JSON.parse($.cookie("cookieCreditDash"));
}

function saveCreditCookie(jsonData){
    var date = new Date();
    date.setTime(date.getTime() + (30 * 60 * 1000));
    $.cookie("cookieCreditDash", JSON.stringify(jsonData), {expires: date});
 } 
```

为什么>??

顺便说一句，我使用了以下插件：

```
(function ($, document, undefined) {
        var pluses = /\+/g;
        function raw(s) {
            return s;
        }
        function decoded(s) {
            return decodeURIComponent(s.replace(pluses, ' '));
        }
        var config = $.cookie = function (key, value, options) {
            // write
            if (value !== undefined) {
                options = $.extend({}, config.defaults, options);
                if (value === null) {
                    options.expires = -1;
                }
                if (typeof options.expires === 'number') {
                    var days = options.expires, t = options.expires = new Date();
                    t.setDate(t.getDate() + days);
                }
                value = config.json ? JSON.stringify(value) : String(value);
                return (document.cookie = [
                    encodeURIComponent(key), '=', config.raw ? value : encodeURIComponent(value),
                    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
                    options.path    ? '; path=' + options.path : '',
                    options.domain  ? '; domain=' + options.domain : '',
                    options.secure  ? '; secure' : ''
                ].join(''));
            }

            // read
            var decode = config.raw ? raw : decoded;
            var cookies = document.cookie.split('; ');
            for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {
                if (decode(parts.shift()) === key) {
                    var cookie = decode(parts.join('='));
                    return config.json ? JSON.parse(cookie) : cookie;
                }
            }
            return null;
        };
        config.defaults = {};
        $.removeCookie = function (key, options) {
            if ($.cookie(key) !== null) {
                $.cookie(key, null, options);
                return true;
            }
            return false;
        };
    })(jQuery, document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:43:01.337

正如我从文档[jquery.cookie.js](https://github.com/carhartl/jquery-cookie)中看到的那样：`expires`是天数

```
if ($.cookie('cookieCreditDash') == null)
{
     $('div').text("no cookie");
     $.cookie("cookieCreditDash", 'test', {expires: 1});
} else{
     var data =  $.cookie("cookieCreditDash");
     $('div').text("with cookie: " + data);        
} 
```

[http://jsfiddle.net/HeGhf/](http://jsfiddle.net/HeGhf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:20:14.763

是什么`$.cookie`？一个jQuery插件？

您是否尝试使用`document.cookie`用于设置 cookie 而不是`$.cookie`.

[https://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T06:55:34.993

看起来您正在使用[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)。

除了 cookie 过期问题，您可能还想检查 cookie 路径，使其可用于您域中的所有路径。您可以通过编写以下代码来做到这一点，

```
$.cookie("cookieCreditDash", "Value", { path: '/' }); 
```

如果没有`{path: '/'}`，cookie 路径将仅限于当前路径级别。

# css - CSS水平或垂直线小于div的高度或宽度

> ID：12757272
> 
> 赞同：0
> 
> 时间：2012-10-06T06:12:36.667
> 
> 标签：css

我有两个高度相同的 div 垂直对齐，彼此并排。作为它们之间的视觉分隔符，我希望有一个 3px 宽的矩形条，它几乎是 div 的高度，以它们垂直居中，浮动，以便有大约 10px 的顶部和底部没有被分隔符覆盖。

我也想为水平 div 做类似的事情。

我想要做的快速 Photoshop 模型（蓝色轮廓是 div 的大致位置，蓝色文本是 div 的描述）灰线是我希望分隔器用于 3 个 div 的位置：

[http://imageshack.us/a/img821/9444/divs.jpg](http://imageshack.us/a/img821/9444/divs.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:19:50.663

也许是这样的。根据您的喜好调整值。现在我把它们变成了一个百分比。

[http://jsfiddle.net/frexuz/3CSde/1/](http://jsfiddle.net/frexuz/3CSde/1/)

# java - 如何访问列表中对象的方法

> ID：12757276
> 
> 赞同：0
> 
> 时间：2012-10-06T06:13:16.793
> 
> 标签：java, list, object

嗨，我有一个对象列表，

```
 myclass obj1 = new myclass();
 myclass obj2 = new myclass();
 obj1.name("hello");
 obj2.name("bye");
 List objectsList = new ArrayList
 objectsList.add(obj1);
 objectsList.add(obj2); 
```

如何访问列表中每个对象的方法？我尝试了以下方法，但我无权访问方法。

```
Object obj = objectsList.get(1);
obj. <<< no access to methods 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T06:22:24.220

您给出的代码甚至不会编译......但是如果您使用泛型，那么当您获取时，您最终会得到强类型元素：

```
// TODO: Use a better class name which obeys Java naming conventions
// Ditto name => setName
List<myclass> list = new ArrayList<myclass>();
list.add(obj1);
list.add(obj2);

...
myclass obj = list.get(1);
System.out.println(obj1.getName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:23:19.050

考虑到您的编码方式，一种方法是将对象转换为`myclass`，因为`Object`该类没有定义此类方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:27:26.787

您需要将它们强制转换为 myclass。

```
((myclass) obj).methodOfMyClass(); 
```

# mysql - 值不存在时的 MySQL SELECT

> ID：12757278
> 
> 赞同：0
> 
> 时间：2012-10-06T06:13:36.153
> 
> 标签：mysql, select

我目前正在做一个查询，例如

```
"SELECT * FROM MyTable WHERE SomeValue=0" 
```

在某些情况下，这不存在。有没有一种方法可以在不检查每个返回值是否为空的情况下确定 select 是否确实找到了数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:16:30.910

> 没有检查每个返回值是否为空的数据？

如果没有符合条件的行，则不会返回结果集或表。所以，没有必要这样做。

您可以使用`IF EXISTS (Select Query)`来查看是否有任何符合条件的结果并执行后续操作。

# ios - 在 Apple 提供测试 iAd 之前，我是否需要注册 iTunes Connect？

> ID：12757279
> 
> 赞同：0
> 
> 时间：2012-10-06T06:14:04.823
> 
> 标签：ios, iad

我认为我有一个正确的实现，但在模拟器中唯一被调用的委托方法是`bannerView:didFailToReceiveAdWithError:`. 看起来我正在正确联系 iAd 服务器，但它一直在返回`The operation couldn’t be completed. Ad inventory unavailable`或`The operation couldn’t be completed. Application has iAd Network configuration error`.

如果这很重要，我正在针对 iOS 6 模拟器使用 4.5 SDK。我检查了代码（太长了无法发布），一切似乎都是正确的——正在调用委托方法是一个好兆头——但后一个错误消息让我怀疑这可能与应用程序有关未在 iTunes Connect 中注册。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:59:52.667

看了很长一段时间后，我发现 Apple 会出现许多错误，有时是按顺序出现的，而且经常是在启动时。这意味着报告了许多关于配置或网络不可用的错误，这些错误只是测试错误，以确保我的代码正确处理错误。这里最大的问题是可能需要 90-120 秒才能正确投放横幅！

因此，对于所有可怕的消息，我没有收到“您的代码运行良好，我只是在抱怨调整您”的反馈。如果 Apple 在前几个横幅广告中取得成功，那就太好了，这样您就可以快速检查您的布局是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T22:03:51.970

我发现我的无线网络配置中的某些东西导致了这些错误。当我切换到 3G 时，我几乎立即得到了横幅。当我切换回无线时，我没有收到错误（至少经常如此）。没有足够高的优先级来寻找网络配置中的问题 - 很高兴知道我的代码正在运行。

# java - Java List 和 ArrayList 声明

> ID：12757285
> 
> 赞同：1
> 
> 时间：2012-10-06T06:16:07.340
> 
> 标签：java, list, arraylist

有人可以向我解释以下代码。至于为什么“List”和“ArrayList”不一样？这是否意味着变量 neighborColumns 是一个 List 数据结构，它包含类型 Column 对象，但只有类 List 中的公共方法可以用于变量 neighborColumns？提前致谢。

```
List<Column> neighborColumns = new ArrayList<Column>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:19:29.723

这段代码没问题（设计到接口（列表）：-

```
List<Column> neighborColumns = new ArrayList<Column>();
List<Column> neighborColumns = new LinkedList<Column>();   // OK To change.. 
```

在上面的代码中，您基本上是在设计一个接口而不是实现..List 是一个接口，而 ArrayList 是一个实现它的具体类。

一个优点是，您可以在各种实现之间切换，而无需更改设计。

下面的代码是一个问题（设计到实现（ArrayList）：-

```
ArrayList<Column> neighborColumns = new ArrayList<Column>();

//OOPs.. Cry (Incompatible Types)
ArrayList<Column> neighborColumns = new LinkedList<Column>(); 
```

在这里，因为您正在设计一个实现..所以您不能更改 RHS 上的实现..编译器会像上面那样哭泣..

因此，一般来说，您应该始终设计一个接口，从而不暴露实现，并且还可以获得随时更改实现的灵活性..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:17:31.163

`List`是一个接口，而`ArrayList`是实现该接口的特定类。

在可能的情况下针对接口而不是特定类进行编程是一种很好的编程实践，因为这样可以更容易地更改为以后使用不同的列表实现。

# java - 如何从对象链接列表中的对象中提取变量

> ID：12757288
> 
> 赞同：-1
> 
> 时间：2012-10-06T06:16:46.217
> 
> 标签：java, linked-list

我目前正在建立一个地址簿。我将每个条目作为对象存储到地址簿中。我的问题是我无法弄清楚如何从对象中获取任何特定变量并显示它。比如 firstName 之类的。它应该将变量写入一个文件，该文件将在程序再次启动时加载到数组中。

```
 class ExitListener implements ActionListener{
    public void actionPerformed(ActionEvent e){
        try {
            PrintWriter output = new PrintWriter(FILE);
            ListIterator it1 = set.listIterator();
            while (it1.hasNext()){

            }
            output.flush();
            output.close();

        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:20:10.460

我将不得不在这里应用我的通灵调试能力，因为您没有提供任何代码。我的猜测是你有一个像这样的变量：

```
LinkedList list = new LinkedList();
list.add(new Person());
...
Object fetched = list.getFirst();
// Problems... 
```

如果您使用[generics](http://docs.oracle.com/javase/tutorial/java/generics/)，这将变为：

```
// Or use an interface type, of course
LinkedList<Person> list = new LinkedList<Person>();
list.add(new Person());
...
Person fetched = list.getFirst();
System.out.println(person.getFirstName()); // Hooray! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:24:34.243

如果您的意思是 LinkedList，那么您可以简单地遍历您的linkedlist 并获取名字。

```
LinkedList<Person> list = new LinkedList<Person>();
Person p = new Person();
p.setFirstName("myname");
list.add(p);

for(Person p: list) {
  Sysout(p.getFirstName());
} 
```

# mysql - 你会在 ORDER BY 子句中的时间戳上使用 CONVERT_TZ() 吗？

> ID：12757291
> 
> 赞同：0
> 
> 时间：2012-10-06T06:18:07.073
> 
> 标签：mysql, convert-tz

有人能告诉我为什么你会在 ORDER BY 子句中的时间戳上使用 CONVERT_TZ() 吗？在这种情况下，时间戳将始终采用 UTC。

我在我正在使用的一段代码中发现了它，由于 mysql_tzinfo_to_sql 现在有问题，所以我只想删除它。

我可以看到在 SELECT 和 WHEN 等其他地方使用它的原因。但是有正当理由在 ORDER BY 中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:25:10.547

如果它们都转换到同一时区，则转换应该消失，原因有两个；

*   它破坏了索引
*   它可能会围绕 DST 转变进行错误排序（当时间倒退时，当转换为本地时间时，较晚的 UTC 时间戳可能会在较早的时间戳之前排序）

当然，如果您的逻辑*依赖*于后者，您可能希望保留它，因为它是功能更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:23:24.360

不，你不应该这样做。当您 ORDER BY 列的函数时，该列上的索引无法有效使用。您应该在此处删除函数调用，并仅按值本身排序。如果列被索引，这可能会大大加快速度。

# mysql - 设计数据库以允许基于时间的食物菜单

> ID：12757292
> 
> 赞同：0
> 
> 时间：2012-10-06T06:18:29.730
> 
> 标签：mysql, database, data-structures, time

我正在尝试构建一个系统，允许餐厅创建可以根据一天中的时间和一周中的一天显示的菜单。

例如，可能有标准菜单、欢乐时光菜单、特色菜单等，每个菜单都有自己的项目和每个项目的定价。周五上午 10 点至下午 2 点和下午 3 点至下午 5 点，奶酪比萨的价格可能为 10 美元。

什么是设计数据库的好方法，以便项目可以具有各种定价（基于一天中的时间和一周中的一天）以及与各种“菜单”相关联（以便对它们进行分类）？

我目前有一个系统实际上不允许这样做（因为当时不需要基于时间的菜单）。

*我需要一个 menu_items_times 表，其中包含价格、时间开始、时间结束列吗？*

**场地表**- 每个单独的餐厅 (primary_menu_id) 与菜单表中的 menu_id 相关

```
 +------------------+--------------+------+-----+---------+----------------+
    | Field            | Type         | Null | Key | Default | Extra          |
    +------------------+--------------+------+-----+---------+----------------+
    | venue_id         | bigint(20)   | NO   | PRI | None    | auto_increment |
    | name             | varchar(256) | NO   |     | None    |                |
    | primary_menu_id  | bigint(20)   | NO   |     | NULL    |                |
    +------------------+--------------+------+-----+---------+----------------+ 
```

**menus 表**每个菜单及其所属的地点

```
 +----------+--------------+------+-----+---------+----------------+
    | Field    | Type         | Null | Key | Default | Extra          |
    +----------+--------------+------+-----+---------+----------------+
    | menu_id  | bigint(20)   | NO   | PRI | None    | auto_increment |
    | venue_id | bigint(20)   | NO   |     | None    |  
    | name     | varchar(256) | NO   |     | None    |                |
    +----------+--------------+------+-----+---------+----------------+ 
```

**menu_items 列出**了菜单的每个单独的菜单项以及用于对类别进行排序的类别（即“饮料”、“食物”、“特价”类别）和“类别索引”。

```
 +---------------+--------------+------+-----+---------+----------------+
    | Field         | Type         | Null | Key | Default | Extra          |
    +---------------+--------------+------+-----+---------+----------------+
    | menu_item_id  | bigint(20)   | NO   | PRI | none    | auto_increment |
    | menu_id       | bigint(20)   | NO   |     | none    |                |
    | name          | varchar(256) | NO   |     | none    |                |
    | price         | float        | NO   |     | none    |                |
    | category      | varchar(64)  | NO   |     | none    |                |
    | category_index| int(11)      | NO   |     | none    |                |
    +---------------+--------------+------+-----+---------+----------------+ 
```

**menu_items_categories 视图**

```
 +----------------+--------------+-----------+-------------+------+---------+
    | Field          | Type         | Collation |  Attributes | NULL | Extra   |
    +----------------+--------------+-----------+-------------+------+---------+
    | menu_id        | bigint(20)   |           |             | No   |         |
    | category       | varchar(64)  |           |             | No   |         |
    | category_index | int(11)      |           |             | No   |         |
    +----------------+--------------+-----------+-------------+------+---------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:31:56.267

我可以看到 4 种方法来做到这一点......

1.  向 中添加一个`time_id`字段`menu_items`，其中包含包含时间的静态数组的 id ... 1=>morning、2=>evening、3=>all-day 等。

2.  与 #1 相同，但将字段设为可以在 LIKE (%%) 查询中搜索的 VARCHAR ......所以`time_id`变成类似于“.8.9.10.11”的内容。上午 8 点到 11 点，下午 6 点到 9 点为“.18.19.20.21.”……有点混乱，LIKE 查询更加密集，所以可能并不理想。

3.  代替 中的字段`menu_items`，添加另一个表 ... `menu_times`... 包含`menu_item_id`和`time_id`s ... 这可能比 #2 更快。它甚至可以包含一个`time_description`而不是`time_id`，例如“all morning”或“happy hour”。

4.  你可以在和...`menu_times`之间放置...如此包含，其中包含。`menus``menu_items``menus``menu_times``menu_items`

关于所有这些解决方案需要注意的一点是，其中一些解决方案需要多个`menu_items`不同价格的解决方案……这并不理想。但是，对于解决方案 1-3，您可以通过将 移动`price`到`menu_times`表中来解决此问题。

# jquery - jquery：将事件添加到新创建的元素

> ID：12757295
> 
> 赞同：6
> 
> 时间：2012-10-06T06:19:06.760
> 
> 标签：jquery, events

我通过 jquery 添加了一个新元素。现在我想要一个函数在单击元素时触发。我知道对此有很多答案，但它们似乎对我不起作用。不知道我在这里做错了什么。

我试过了：

```
new_ele = "<a>click me</a>"
new_ele.click(function() {alert('xxxx');}); 
other_ele.append(new_ele); 
```

在添加 new_ele 之前这会失败。

我也试过（而不是上面的第二行）

```
new_ele.onclick = function() { alert('blah'); }; 
```

这会附加元素，但是当我单击时没有任何反应。

和

```
new_ele.on('click',function() {alert('ddd');}); 
```

在添加元素之前，这也会失败。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T06:23:16.553

将其更改为：

```
new_ele = $("<a>click me</a>");
new_ele.click(function() {alert('xxxx');}); 
other_ele.append(new_ele); 
```

为了添加 jQuery`.click()`处理程序，您需要一个可以调用该`.click()`方法的 jQuery 对象。您的代码试图做：

```
"<a>click me</a>".click(function() {alert('xxxx');}); 
```

这显然行不通，因为字符串上没有 click 方法。相反，您需要通过调用该 HTML 字符串将其转换为实际的 jQuery 对象`$()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T06:44:01.660

在 .clickme 添加到 dom 之前或之后的任何位置定义。您需要确定的是 'body' 或任何其他元素已经存在于 DOM 中。第二个参数是触发路径。

```
$('body').on('click', 'a.clickme', function(e){
  e.preventDefault();
  console.log("clicked!");
});

$new_ele = $('<a href="#" class="clickme">click me</a>');
$("body").append( $new_elem ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T06:22:43.683

您拥有的语句只会创建一个刺而不是元素。我认为您错过了将新创建的元素添加到 DOM。

```
new_ele = $("<a>click me</a>");

new_ele.appendTo(someParentElement);

new_ele.on('click',function() {alert('ddd');}); 
```

# javascript - 如何即时调用 ajax 以实现分页

> ID：12757296
> 
> 赞同：2
> 
> 时间：2012-10-06T06:19:14.640
> 
> 标签：javascript, jquery, html

我有以下 javascript 代码，其类名为 PurchaseHistory。

```
var baseUrl = null;
var parameters = null;
var currentPageNumber = null;
var TotalPages = null;
var PageSize = null;

$(document).ready(function () {
    baseUrl = "http://localhost/API/service.svc/GetOrderHistory";
    parameters = '{"userId":1 , "page":1 ,"pageSize":4}';
    currentPageNumber = 1;
    var history = new PurchaseHistory();
    history.ajaxCall(parameters);
});

function PurchaseHistory() {
/* On ajax error show error message
-------------------------------------------------*/
this.onAjaxError = function() {
    $('#error').text('No internet connection.').css('color', 'red');
}

/* Ajax call 
-------------------------------------------------*/
this.ajaxCall = function (parameters) {
    $.support.core = true;
    $.ajax({
        type: "POST",
        url: baseUrl,
        data: parameters,
        //dataType: 'json',
        contentType: "application/json; charset=UTF-8",
        error: function () { this.onAjaxError() }
    }).done(function (data) {
        var json = data.GetOrderHistoryResult;
        var jsonObject = $.parseJSON(json);
        var history = new PurchaseHistory();
        history.populateOrderHistory(jsonObject);
        TotalPages = jsonObject.PgCnt;
        currentPageNumber = jsonObject.CrntPg;
    });
}

this.populateOrderHistory = function(results) {
    var rowOutput = "";
    var his = new PurchaseHistory();
    for (var i = 0; i < results.Results.length; i++) {
        rowOutput += this.renderCartList(results.Results[i], 1);
    }
}

this.renderCartList = function(res, i) {
    var container = $('#prototype-listelement>li').clone();
    container.find('.order-date').text(res.OdrDate);
    container.find('.item-count').text(res.Qty);
    container.find('.total').text(res.Amt);
    container.find('.order-id').text(res.OdrId);
    $('#mainul').append(container).listview('refresh');
}

this.loadNextPage = function () {
    parameters = '{"userId":1 , "page":' + currentPageNumber + 1 + ',"pageSize":4}';
    this.ajaxCall(parameters);
} 
```

}

ajaxCall 是在 javascript 的 ready 函数上进行的。此 ajax 调用返回带有页面信息的 Json 对象，其中包括当前页码、总页数和页面大小。

目前，当页面加载时，我能够在 UI 上显示信息。

我的问题：- 我想在按钮单击事件上再次调用 ajax 方法。如何使这成为可能，我在哪里可以存储从以前的 ajax 调用中获得的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:50:17.650

对于分页，我将创建一个链接，将更多项目加载到页面上，并保存一个起始编号以传递给您的数据层。此示例一次加载 20 个。

```
<a class="more" href="#" data-start="0">show more</a>

$("a.more").click(function(e){
 e.preventDefault();
 var start = $(this).attr('data-start');

 $.get('/more-data, { start: start }, function(d){
   var next = start+20;
   $("a.more").attr('data-start', next);

   //process results here, do something with 'd'

 });
}); 
```

# php - 文件路径可以用内存资源代替吗？

> ID：12757301
> 
> 赞同：0
> 
> 时间：2012-10-06T06:20:19.893
> 
> 标签：php, mysql, resources, imagemagick, montage

我正在编写一个使用 Montage 的 PHP 脚本，它是 ImageMagick 的扩展，可以创建图像的平铺数组。蒙太奇语法很简单：

```
montage image1.png image2.png image3.png -tile x1 -geometry 50x50 out.png 
```

但是，我正在动态生成这些图像，我不想为了运行这个命令而不得不将它们写入磁盘。有什么方法可以在不将它们写入文件的情况下传递资源吗？

（这实际上不是一个蒙太奇问题，而是一个适用于许多不同情况的一般问题。）

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:48:07.240

正如我评论的那样，您可以找到一些[tmpfs](http://en.wikipedia.org/wiki/Tmpfs)文件系统（例如 with `df | grep tmpfs`）`/run`并将您的文件放入其中。然后它们将存在于虚拟内存中（通常不需要任何磁盘 I/O）。当然，它们占用的空间正在消耗虚拟内存资源（因此是有限的）。

顺便说一句，在许多 Linux 系统上，写入小文件不会使用大量磁盘 I/O，因为它们位于文件系统缓存中。

当然，任何`tmpfs`文件系统在每次重新启动时都会丢失其所有内容，因此您不想将重要的不可恢复数据保留在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:45:20.833

ImageMagick 有适用于 C 和 PHP 的 API。PHP IMagick 似乎有蒙太奇钩子。

[http://us3.php.net/manual/en/imagick.montageimage.php](http://us3.php.net/manual/en/imagick.montageimage.php)

关于 PHP IMagick 使用的一般信息：http: [//us3.php.net/manual/en/imagick.examples-1.php](http://us3.php.net/manual/en/imagick.examples-1.php)

# php - 无法访问受保护的属性 MY_Loader::$_ci_cached_vars 并提取缓存的变量

> ID：12757305
> 
> 赞同：0
> 
> 时间：2012-10-06T06:20:54.813
> 
> 标签：php, codeigniter

升级 Codeigniter 后，我收到以下消息：

> 无法访问受保护的属性 MY_Loader::$_ci_cached_vars

我知道这个财产现在受到保护，所以我能在这里做什么？

```
extract($CI->load->_ci_cached_vars); // extract cached variables 
```

我现在不知道如何使用该`get_var`方法，因为该属性是受保护的

这是`get_var`方法

```
/**
     * Get Variable
     *
     * Check if a variable is set and retrieve it.
     *
     * @param   array
     * @return  void
     */
    public function get_var($key)
    {
        return isset($this->_ci_cached_vars[$key]) ? $this->_ci_cached_vars[$key] : NULL;
    } 
```

如何重构这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:28:05.460

```
 extract($CI->load->get_var($key)); 
```

# flash-builder - InvocationTargetException：调用操作时出错。闪存生成器 4.6

> ID：12757306
> 
> 赞同：1
> 
> 时间：2012-10-06T06:20:59.833
> 
> 标签：flash-builder

在本地主机上一切正常后，我在配置远程服务器时遇到问题。我收到以下错误：

```
InvocationTargetException:There was an error while invoking the operation. Check your operation inputs or server code and try invoking the operation again. 
```

之后我收到的大消息的关键部分是：

```
Class "test" does not exist: Plugin by name 'Test' was not found in the registry; used paths:: 
..../smii/test/ID5D8FE3F-A1D1-4174-98B3-4BED10FD8FFEI79685B66-D792-E4E9-13B3-00004DA5951BI0F94D267-0704-3C89-0B5B-0000090BA097134950398900 
```

我不知道带有随机数字和字母的地址的最后一部分是如何到达那里的。

此外，今天在搜索我的服务器设置时，似乎在服务器上初始目录的末尾添加了一个“-1”，不知道为什么，但我似乎在远程实现该服务时遇到了重大问题。

# algorithm - 运行排序两次的 Big-O 运行时

> ID：12757307
> 
> 赞同：2
> 
> 时间：2012-10-06T06:21:01.927
> 
> 标签：algorithm, big-o

我对使用 big-O 表示法确定算法运行时间的做法相对较新，并且我对排序算法的运行时间有疑问。假设我在一个数组中有一组对 (a, b)，我使用已知的排序算法对数据进行排序，该算法在 O(n log n) 中运行。接下来，我取一些 n 个数据点的子集，并在该子集上运行相同的排序算法（所以理论上我可以对整个数组进行两次排序——第一次排序将比较 a，第二组将比较 b） . 所以换句话说我的代码是

```
pairArray[n];
Sort(pairArray); //runs in O(n log n)

subsetArray[subset]; //where subset <= n
for (int i = 0; i < subset; i++) {
   subsetArray[i] = pairArray[i];
}

Sort(subsetArray) //runs in O(n log n) 
```

这段代码的运行时间仍然是 O(n log n) 吗？我想我有两个问题：运行 O(something) 排序两次是否会增加原始“某物”的复杂性，并且重新分配给不同数组的迭代是否会增加复杂性？我更担心第一个，因为可以用指针消除迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:28:25.513

在大 O 表示法中忽略了接触因子。排序两次仍然是 O(n log n)。

您正在执行的分配循环是 O(n) 操作。这也被忽略了。大 O 表示法中只提到了最大的项。

如果您想确定两种算法中哪一种更好，但它们的大 O 相同，那么您可以对真实数据使用性能测量。在测量实际性能时，您可以查看一种算法是否通常比另一种慢两倍。这不能从大 O 表示法中看出。

# iphone - 在没有任何导航控制器连接的情况下使用视图控制器之间的委托传递数据

> ID：12757309
> 
> 赞同：5
> 
> 时间：2012-10-06T06:21:15.390
> 
> 标签：iphone, objective-c, ios, ios5, ios4

在两个视图控制器之间传递数据的例子有很多，其中一个视图控制器导航到另一个视图控制器。

但是是否可以在未通过导航控制器连接的视图控制器之间使用自定义协议和委托传递数据？

因此，一个示例可能是：三个视图控制器，即`A`、`B`、`C`。`A`导航到`B`，并`B`导航到`C`。我知道如何在`A`和`B`使用自定义协议和委托之间传递数据。`C`但是我们可以在&之间传递数据吗`A`？因此`A`可以是`C`的委托，从而可以接收来自 的数据`C`。这可能吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T06:36:47.760

一种方法是使用**委托**来向后传递数据

请参阅[simple-delegate-tutorial-for-ios](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)链接以将数据从 C 传递到 A 控制器。

检查[基本委托示例](http://coderchrismills.wordpress.com/2011/05/05/basic-delegate-example/)链接。

另一种方法是**发布通知。**用于向后传递数据

检查[通信-两个视图](http://juliuspaintings.co.uk/cgi-bin/paint_css/animatedPaint/017-Comunicate-Two-Views.pl)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:13:28.537

您可以使用一些单例类并在其中实现委托协议。因此，您将有机会在任何视图控制器之间传递数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T19:11:06.240

对于将数据从第二个视图控制器发送到第一个控制器，请使用以下 github 项目：-

[https://github.com/mauli787/CustomDelegateDataPassing](https://github.com/mauli787/CustomDelegateDataPassing)

# ruby-on-rails-3 - Rails 中的 HighCharts 饼图

> ID：12757310
> 
> 赞同：0
> 
> 时间：2012-10-06T06:21:17.340
> 
> 标签：ruby-on-rails-3, highcharts, pie-chart

我正在尝试显示 1 月份的产品销售额。

这是我的 products_controller 中的代码。

```
@hi = LazyHighCharts::HighChart.new('graph') do |f|
      f.options[:chart][:defaultSeriesType] = "pie"
      f.options[:title][:text] = "Jan Sales"

      @products.each do |p|
        f.series(:name=>"Jan Sales", :data=>[:name=> p.title, :y=>p.jan])
      end 
end 
```

我得到这个输出：http: [//i.imgur.com/eVF7n.png](http://i.imgur.com/eVF7n.png)

它在图表图例中显示所有产品名称 (p.title)，但它仅显示产品 1 月销售额 (p.jan) 的 1 个值。

我正在使用惰性高图表 gem [https://github.com/michelson/lazy_high_charts](https://github.com/michelson/lazy_high_charts)

# delphi - 如何释放这些指针？

> ID：12757313
> 
> 赞同：0
> 
> 时间：2012-10-06T06:21:27.973
> 
> 标签：delphi, pointers, memory-management, delphi-7

我的自定义控件有指向父级的指针，但我不知道如何在析构函数中释放这些指针。

变量：

```
{Pointers}
  Form: TForm;
  GeneralPointer: Pointer;
  Frame: ^TImage; 
```

构造函数：

```
constructor TViOS.Create(var ImageOutput: TImage);
begin
inherited Create;

  Form := TForm(GetParentForm(TControl(ImageOutput)));
  GeneralPointer := Addr(ImageOutput);
  Frame := GeneralPointer;
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:47:06.277

由于您没有在构造函数中*创建*任何对象，因此您不需要`Free`在析构函数中创建它们——只需将它们设置为 nil。

```
destructor TViOS.Destroy;
begin
  Form := nil;
  GeneralPointer := nil;
  Frame := nil;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:48:00.870

除了其他人所说的，您的代码可以使用一些清理：

```
Form: TForm;
GeneralPointer: Pointer;
Frame: TImage; 
```

.

```
constructor TViOS.Create(ImageOutput: TImage);
begin
  inherited Create;
  Form := GetParentForm(ImageOutput) as TForm;
  GeneralPointer := ImageOutput;
  Frame := ImageOutput;
  ...
end; 
```

# java-me - j2me模拟器错误

> ID：12757316
> 
> 赞同：-1
> 
> 时间：2012-10-06T06:22:16.777
> 
> 标签：java-me, emulation

我正在使用 kemulator 运行 j2me 游戏（我自己开发的），当我尝试运行它时，我收到一条错误消息，提示“找不到 MIDlet 类请检查 jad 或使用 -midlet 参数”

类路径

```
 <?xml version="1.0" encoding="UTF-8"?>
         <classpath>
     <classpathentry kind="src" path="src"/>
     <classpathentry kind="src" path="res"/>
     <classpathentry kind="con" path="J2MELIB"/>
     <classpathentry kind="output" path="bin"/>
         </classpath> 
```

有一个包 org/rhynn/ 并且在 myGame.jar 中没有 src 文件夹之类的东西。我正在使用 Eclipse ME 导出这个游戏。

实际上，该 jar 中没有 res 或 src 文件夹。PS：我`m new at those Manifest and other (except Java ME) so I don`不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:31:36.230

j2me 应用程序或游戏必须至少有一个扩展类[`MIDlet`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/midlet/MIDlet.html)。取这个类的全名，例如 org.rhynn.MyGameMIDlet 并传递给 -midlet 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:37:51.590

尝试使用[ant](http://ant.apache.org/)和[天线](http://antenna.sourceforge.net/)打包jar文件

# linux - linux命令。复制文件一百次

> ID：12757318
> 
> 赞同：4
> 
> 时间：2012-10-06T06:22:36.683
> 
> 标签：linux, shell

我需要正确的语法来使用一个命令复制 file.jpg 100 次，以便获得 100 个名为 file001.jpg、file002.jpg、...、file100.jpg 的文件。我正在使用它，但对我没有任何提示

```
#!/bin/bash

for x in `seq 1 100`; do

    if [[ x -lt 10 ]]; then cp file.jpg file-00$x.jpg;

    elif [[ x -lt 100 ]]; then cp file.jpg file-0$x.jpg;

    else cp file.jpg file-$x.jpg;

    fi

done 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-06T13:04:25.747

使用 bash[大括号展开](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)

```
for n in {001..100}; do
    cp file.jpg file-$n.jpg
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T06:28:22.300

在您的两种`if`情况下，您缺少`$`on `$x`，因此您最终比较的是 string `x`，而不是数字。

不过，正如 Basile Starynkevitch 所指出的，该`printf`实用程序可能是一种更好的方法：`$(printf "file-%03d.jpg" $x)`在一行中为您提供正确的格式化字符串。

# c# - 将 WCF 数据表转换为通用/LINQ 对象以供 Silverlight 使用的最佳方法

> ID：12757322
> 
> 赞同：2
> 
> 时间：2012-10-06T06:22:57.620
> 
> 标签：c#, wcf, silverlight

我有一个在我的项目中使用过的 WCF。现在我也想在我的其他 Silverlight 项目中使用它。

WCF 设置为根据参数给出的查询返回数据表。它不返回单一类型的数据表，因此我不能仅将其映射到一种类型的对象，返回的数据表的列由作为参数传递的查询定义。

现在我想在我的 silverlight 代码中使用相同的 WCF，我知道我不能将数据表用于 silverlight 项目。因为我必须将此数据表转换为 ienuberable/List 的通用列表/LINQ 对象。

现在我正在使用下面的代码进行从数据表到 IEnumerable 的转换>

```
var columns = table.Columns.Cast<DataColumn>();
return table.AsEnumerable().Select(r => columns.Select(c =>
                             new { Column = c.ColumnName, Value = r[c] })
                         .ToDictionary(i => i.Column, i => i.Value != DBNull.Value ? i.Value : null)); 
```

我只是想听听你们的意见。这是进行对话的最佳方法吗？还请包括内存效率点，因为我的数据表有超过 200k 行。

感谢您抽出时间对此进行调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:31:55.550

在这种情况下，字典的效率非常低，因为对于每一行，您都必须再次保存 Name=Value 对。

一个简单的优化是为每个列存储一个值数组。

像这样的东西：

```
from c as DataColumn in table.Columns
select new { Column=c.ColumnName, Values = table.Select(r => r[c]).ToArray() } 
```

如果您有一张大桌子，我还建议您实施分页。例如，让您的 WCF 服务方法有一个`PageSize`and`PageIndex`参数。像这样你可以返回前 50 行，然后是下一个，等等。

在任何情况下，您都应该考虑从服务返回 DataTable（无论是否转换）是否真的是一个好主意。接受来自方法的查询然后返回任意结果听起来很危险。为什么没有可以指定过滤器的域特定方法。例如`GetCustomers(filter, pageIndex, pageSize)`. 在过滤器对象中，您可以允许按名称、ID 或您需要的任何内容进行过滤。然后你可以返回一个非常小的对象。

另请参阅有关该主题的以下帖子：

[http://www.hanselman.com/blog/PermaLink,guid,d88f7539-10d8-4697-8c6e-1badb08bb3f5.aspx](http://www.hanselman.com/blog/PermaLink,guid,d88f7539-10d8-4697-8c6e-1badb08bb3f5.aspx)

# jquery - 如何使用 CSS3 动画制作类似原子的动画？

> ID：12757323
> 
> 赞同：20
> 
> 时间：2012-10-06T06:23:00.300
> 
> 标签：jquery, html, animation, css

我从 3-4 天开始就一直在尝试这个，但我不知道如何制作这个动画，甚至不确定是否可以只使用 CSS3 制作这样的动画？

![原子](../Images/3f8c0a15bf39c708c74a2777fceeb31c.png)

我尝试使用`animation-direction:alternate;`，但我无法以特定角度获得此流，无法将其动画化为**方形**......但不是原子动画的方式，知道如何使用纯 CSS3 来实现吗？如果没有，jQuery中有什么解决方案吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-06T06:43:46.800

在网上找到[了这个。](http://forrst.com/posts/CSS3_only_3D_Animated_Atom-4Dr)

它利用该`transform-style: preserve-3d`特性并在 x、y 和 z 轴上旋转电子来实现这种 3D 效果。

**HTML结构**

```
<div id="main">
    <div id="atom">
        <div class="orbit">
            <div class="path">
                <div class="electron"></div>
            </div>
        </div>
        <div class="orbit">
            <div class="path">
                <div class="electron"></div>
            </div>
        </div>
        <div class="orbit">
            <div class="path">
                <div class="electron"></div>
            </div>
        </div>
        <div class="orbit">
            <div class="path">
                <div class="electron"></div>
            </div>
        </div>
        <div id="nucleus"></div>
    </div>
</div> 
```

**CSS**

```
.orbit { 
    -webkit-transform-style: preserve-3d; 
    -webkit-transform: rotateX(80deg) rotateY(20deg);
}

#atom .orbit:nth-child(2) { 
   -webkit-transform: rotateX(80deg) rotateY(70deg)
}
#atom .orbit:nth-child(3) { 
   -webkit-transform: rotateX(80deg) rotateY(-20deg)
}
#atom .orbit:nth-child(4) { 
   -webkit-transform: rotateX(80deg) rotateY(-50deg)
}

.path { 
    -webkit-transform-style: preserve-3d;
    -webkit-animation-name: pathRotate;
    -webkit-animation-duration: 2s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear; 
}

.electron { 
    -webkit-animation-name: electronFix; 
    -webkit-animation-duration: 2s; 
    -webkit-animation-iteration-count: infinite; 
    -webkit-animation-timing-function: linear;  
}

@-webkit-keyframes pathRotate { 
    from { 
       -webkit-transform: rotateZ(0deg);
    } to { 
       -webkit-transform: rotateZ(360deg); 
    } 
}

@-webkit-keyframes electronFix { 
    from { 
       -webkit-transform: rotateX(90deg) rotateY(0deg); 
    } to { 
       -webkit-transform: rotateX(90deg) rotateY(-360deg); 
    } 
} 
```

[小提琴](http://jsfiddle.net/bgreater/kfgVr/)

[博客文章](http://forrst.com/posts/CSS3_only_3D_Animated_Atom-4Dr)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T07:09:07.917

绝对可以使用 CSS。在注意到@prashanth 的帖子之前，我将一个非常基本的东西放在一起作为概念证明。他发现的那个更酷，但无论如何这是我的……超级简单，但有点摆弄，看起来不错。

[http://jsfiddle.net/BZFJ8/2/](http://jsfiddle.net/BZFJ8/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:29:47.087

我认为这个看起来也像您要求的那样，但他们说它仅适用于 Chrome 9 的 Safari 动画

[http://bgre.at/demo/CSS3-atom/index.html](http://bgre.at/demo/CSS3-atom/index.html)

如果您关心浏览器的兼容性，您可能会找到使用 Jquery 的解决方案。

# c - C 腐败或双重免费，为什么？

> ID：12757324
> 
> 赞同：0
> 
> 时间：2012-10-06T06:23:09.913
> 
> 标签：c, memory-corruption

我有一个 C 代码（我编写的第一个 C 代码），其中有一个错误，但我不知道在哪里。当我尝试释放一个变量（动态分配，它的名称是 out_html）时，我得到双重释放或损坏。我不知道为什么我的程序会这样做，我免费检查了所有电话等。

编码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <time.h>
#include <math.h>

#include "fcntl.h"
#include "errno.h"

#include "sys/types.h"
#include "sys/stat.h"

#include "unistd.h"

#define MAX_SIZE 512

typedef struct node
{
    char* data;
    struct node * nextnode;
} node;

int max(int a, int b)
{
    if(a>b) return a;
    else return b;
}

node* push(node * stackTop, char* data)
{
    //static 
    node* newItem;

    newItem = calloc(sizeof(node),1);
    newItem->data = data;
    newItem->nextnode = stackTop;

    return newItem;
}

node* pop(node* stackTop)
{
    if(stackTop != NULL)
    {
        free(stackTop->data);
        node* P = stackTop;
        return stackTop->nextnode;
        free(P);
    }else return NULL;
}

int isMajorTag(char* tag)
{
    if(strcmp(tag, "<html>") == 0 || strcmp(tag, "</html>") == 0 ||
       strcmp(tag, "<body>") == 0 || strcmp(tag, "</body>") == 0 ||
       strcmp(tag, "<head>") == 0 || strcmp(tag, "</head>") == 0 ) { return 1; }
    else                         { return 0; };
}

int isHTMLtag(char* tag, char* tags)
{
    char* tag2;
    if(strstr(tag," ") != NULL)
    {
        char* strptr = strstr(tag, " ");
        int End = strptr - tag;
        char* tag_ = strndup(tag, End);
        tag2 = calloc((strlen(tag_) + strlen("*") + 2), sizeof(char));
        strcpy(tag2, tag_);
        strcat(tag2,"*");
        free(tag_); 
    } 
    else tag2 = tag;
    int ret;
    if(strstr(tags, tag2) != NULL){ ret =  1; }
    else                         { ret = 0; };
    if(tag2 != tag ) free(tag2); 
    return ret;
}

int isCloserTagOf(char* cltag, char* tag)
{
    int ret = 1;
    if( cltag[1] != '/' ) ret = 0;
    if( tag[1] == '/' ) ret = 0;
    char* ntag;
    char* ncltag;
    if(strstr(tag," ") != NULL)
    {
        char* strptr = strstr(tag, " ");
        int End = strptr - tag;
        ntag = strndup(tag, End) + 1;
        // ntag = calloc(strlen(ntag0) + 1 + 1, sizeof(char)); strcpy(ntag, ntag0); strcat(ntag, ">");
        ncltag = strndup(cltag+2,strlen(cltag) - 3);
    } else
    {
        ntag = tag + 1;
        ncltag = cltag + 2;
    }
//  printf("|%s|%s|  %i", ntag, ncltag, strcmp(ncltag, ntag));

    if(strcmp(ncltag, ntag) != 0) ret = 0;
    return ret;
}

int isIndividualTag(char* tag)
{
    if(strcmp(tag,"</br>") == 0) return 1;
    else if(strncmp(tag,"<!--#include file=",18) == 0) return 2;
    else if(strncmp(tag,"<!--#echo var=",14) == 0) return 3;
    else if(strncmp(tag,"<!--",4) == 0) return 4;
    else return 0;
}

int main(int argc,char *argv[])
{
    char* fname;
    if(argc == 2)
    {
        fname = argv[1];
    } else
    {
        printf("Give me a filename!");
        fname = calloc( MAX_SIZE, sizeof(char));
        scanf("%s", fname);
    };
    printf("Parameter: %s \n\n", fname);

// beolvasas
    int f = open(fname, O_RDONLY);
    long pos = lseek(f, 0, SEEK_END);
    lseek(f, 0, SEEK_SET);

    char *buff = calloc(pos,1);
    read(f, buff, pos);
    close(f);

    f = open("valid-tags", O_RDONLY);
    pos = lseek(f, 0, SEEK_END);
    lseek(f, 0, SEEK_SET);

    char *valids = calloc(pos,1);
    read(f, valids, pos);
    close(f);

//  printf("File: %s %s %i   ",buff, valids, isCloserTagOf("</html>","<html>")); printf("Igen? %i", isHTMLtag("</head>",valids));

    node* Stack = NULL;
    char *P = buff;
    int is_valid = 1;
    int bodyCnt = 0;
    char* body[6];
    int correct_body = 1;
    char* out_html = calloc(strlen(buff), sizeof(char));
    while(P[0] != '\0' )
    {
        if(P[0] == '<')
        {
            char* strptr = strstr(P, ">");
            if(strptr != NULL)
            {
                int nextCloser = strptr - P + 1;
                char* tag = strndup(P, nextCloser);
                int IsIndividual = isIndividualTag(tag);
                if(isHTMLtag(tag, valids) || IsIndividual)
                {
                    if(IsIndividual)
                    { 
                        if(IsIndividual == 2) // file inclusion
                        {
                            char* firstQ = strstr(tag, "\"");
                            char* secondQ;
                            if( firstQ ) secondQ = strstr(firstQ + 1, "\"");

                            if( firstQ && secondQ )
                            {
                                char* incl_filename = strndup((firstQ + 1), (secondQ - firstQ - 1));
                                f = open(incl_filename, O_RDONLY);
                                pos = lseek(f, 0, SEEK_END);
                                lseek(f, 0, SEEK_SET);
                                char *inclstr = calloc(pos,1);
                                read(f, inclstr, pos);
                                close(f);
                                char* new_out_html = calloc((max(strlen(buff),strlen(out_html)) + pos + 1 + 1 + 1), sizeof(char));
                                strcpy(new_out_html, out_html);
                                strcat(new_out_html, inclstr);
                                free(out_html); out_html = NULL; // free(inclstr);
                                out_html = new_out_html; 
                            } else
                            {   
                                printf("Invalid file inclusion! \n");
                                is_valid = 0; break;
                            };
                        } else if (IsIndividual == 3) // date time
                        {
                            time_t t = time(NULL);                  
                        //  int nDigits = floor(log10(abs(t)) + 1; (strlen(out_html) + nDigits
                            char* timestring = ctime(&t);
                            char* new_out_html = calloc(1 + max(strlen(buff),strlen(out_html)) + strlen(timestring), sizeof(char));
                            strcpy(new_out_html, out_html);
                            strcat(new_out_html, timestring);
                            //printf("%s",new_out_html);
                            free(out_html); out_html = NULL; // free(timestring);
                            out_html = new_out_html;  
                        } else
                        {
                            strcat(out_html, tag);
                        };
                    }else
                    {
                        strcat(out_html, tag);
                        if(Stack != NULL && isCloserTagOf(tag,Stack->data))
                        {
                            Stack = pop(Stack);
                        }else
                        {
                            Stack = push(Stack, tag);
                        };
                    } 
                    if(isMajorTag(tag))
                    {   
                        if(bodyCnt < 6)
                        {   body[bodyCnt] = calloc(strlen(tag), sizeof(char));
                            strcpy(body[bodyCnt],tag);
                            ++bodyCnt;
                        }else
                        {   
                            printf("Too much major html tag found...");
                            correct_body = 0;
                        }
                    }
                }else
                {
                    printf("Invalid html tag: %s \n", tag);
                    is_valid = 0;
                    break;
                }
                P = P + nextCloser;
            } 
            else
            {
                printf("Unclosed tag\n");
                is_valid = 0;
                break;
            }
        } else
        {  //printf("-%c",P[0]);
           strncat(out_html, P,1); 
        //  printf("{(%s)}",out_html);
           P = P + 1;
        };
    };

    int i;
    char* correctBody[] = { "<html>", "<head>", "</head>", "<body>", "</body>", "</html>"};
    for(i = 0; i < bodyCnt && correct_body; ++i) {
            correct_body = (strcmp(body[i],correctBody[i]) == 0); }
    if(is_valid && Stack == NULL && 
       correct_body && bodyCnt == 6){ printf("\nValid HTML Code\n");
                                      printf("\n\n%s\n",out_html);
                                        }
    else                              printf("\nInvalid.\n");

//  printf("%i %i %i",bodyCnt,correct_body,is_valid);
    /*****************************************************************/
    for(i=0;i<bodyCnt;++i) free(body[i]);
    free(buff); free(valids); // 
    if(out_html != NULL) free(out_html);
    return 0;
} 
```

在代码的最后： if(out_html != NULL) free(out_html); 没有这个，就没有崩溃。

我认为坠机是在 196 号线附近的某个地方造成的。

（必须有一个带有适当 html 标签的 valig-html 文件 - 没有这个，代码就没用了，我的意思是这样的文件：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:38:10.287

很难弄清楚代码中发生了什么，但乍一看就可以看到一些可能毫无意义的操作。例如，考虑这个序列

```
int f = open(fname, O_RDONLY);
long pos = lseek(f, 0, SEEK_END);
lseek(f, 0, SEEK_SET);

char *buff = calloc(pos,1);
read(f, buff, pos);
close(f);
...

char* out_html = calloc(strlen(buff), sizeof(char)); 
```

您将某个文件的内容读入分配的缓冲区`buff`（缓冲区的大小正是文件的大小）。稍后您将`buff`其视为以 null 结尾的字符串：您将其用作`strlen`.

但是您从不费心将您的`buff`! 这应该如何工作？如果它不是以 null 结尾的，则它不是字符串，并且不能有意义地用作 的参数`strlen`。

你的程序包含几个遵循相同模式的代码实例：某个文件的全部内容被读入一个确切大小的缓冲区，然后解释为一个以空字符结尾的字符串，而实际上它不是以空字符结尾的（没有人打扰以确保零终止）。

终止零是否应该存在于文件本身中？如果是这样，那么我们应该怎么知道呢？我们不是这里的心灵感应者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:40:28.827

这看起来不对：（顺便说一句：我找不到 stackTop 的定义/声明）

```
node* pop(node* stackTop)
{
    if(stackTop != NULL)
    {
        free(stackTop->data);
        node* P = stackTop;
        return stackTop->nextnode;
        free(P);
    }else return NULL;
} 
```

这是另一个太短的 calloc() 。（strcpy() 将把它的 nul 字节放在一个不属于 calloc()ed 对象的地方。顺便说一句：根据定义，sizeof(char) 是 1。

```
 if(bodyCnt < 6)
                    {   body[bodyCnt] = calloc(strlen(tag), sizeof(char));
                        strcpy(body[bodyCnt],tag);
                        ++bodyCnt;
                    }else
                    {   
                        printf("Too much major html tag found...");
                        correct_body = 0;
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:16:34.777

错误消息可能有点令人困惑。

当使用 calloc 分配 200 字节时，例程在内部分配了一点点：
例如 8、16 或 32 字节来制作链表和其他簿记（即它是否已被释放）。

如果使用 strcpy/strcat 附加或复制的字符串不适合目标数组，则在内部可能会导致簿记损坏。

因此，错误不一定对两次释放指针有任何作用。

# c++ - 为什么函数范围内不允许类前向声明 ？

> ID：12757325
> 
> 赞同：3
> 
> 时间：2012-10-06T06:23:13.017
> 
> 标签：c++, class, compiler-errors, forward-declaration, language-lawyer

下面的代码工作正常：

```
template<typename T> class X {};
class A;  // line-1
void foo();  // line-2
int main ()
{
  X<A> vA;
}
class A {};
void foo() {} 
```

让 line-1 和 line-2 移到里面`main()`。该函数不会受到影响，但`class A`前向声明不起作用并给出[编译器错误](http://ideone.com/fksYD)：

> `template<class T> class X`错误：使用本地类型的模板参数`main()::A`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:32:17.650

您可以观察到正在发生的事情，因为在 C++ 中，您可以在函数中定义类。所以，如果你放在`class A;`中`main`，你就是在这个函数的范围内（即`class main::A`）前向声明一个类，而不是在全局范围内（`class A`）。

因此，您最终使用未定义类 ( `X<main::A>`) 的模板参数声明了一个 X 类型的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:00:35.693

> 错误：模板类 X 的模板参数使用本地类型 main()::A

这是真正的问题 - 使用本地类型。在 C++03 中，您不能使用局部类型作为模板参数，因为没有人知道如何*命名*结果类型。

如果你有`class A`几个重载函数中的几个（再次使用相同的名称） - 结果会`X<A>`是相同的类型，还是不同的类型？你怎么区分他们？

在 C++03 中，标准传递了这一点，只是说“不要那样做！”。

这个问题在 C++11 中通过决定`X<A>`使用本地类型与在函数外部的匿名命名空间中声明`A`的相同，如`A`

```
namespace
{
    class A
    { };
}

int main()
{
    X<A>   vA;
} 
```

因此，使用较新的编译器（或使用`-std=cpp11`选项），您可以使用本地类，我们也知道它的含义。

* * *

但是，在函数内前向声明类型仍然与在另一个范围内前向声明类型不同。它们只是不同的类型。

# c++ - Xcode 变量具有不完整的类型 void

> ID：12757329
> 
> 赞同：0
> 
> 时间：2012-10-06T06:23:29.460
> 
> 标签：c++, objective-c, xcode, objective-c++

我正在开发一个跨平台的 C++ 应用程序。在 mac 版本上，我需要在 obj-c 中使用一点可可。因此，我创建了一个名为 OSXSpecifics 的类，它具有 .mm 文件扩展名和一个 c++ 标头，就像应用程序的其余部分一样。

```
std::string OSXSpecifics::GetOSXFilePath(const char *name, const char *type) {
return [[[NSBundle mainBundle] pathForResource:[NSString stringWithUTF8String: name]
                                        ofType:[NSString stringWithUTF8String: type]] UTF8String];

} 
```

上面的代码绝对完美。c++ 类中的 c++ 函数，函数内部带有 Objective-c。但是当我这样做时：

```
void OSXSpecifics::printToConsole(<#const char *text#>) {
NSString *Text = [NSString stringWithUTF8String: text];

} 
```

我有几个错误。主要是：`variable has incomplete type 'void`。我也得到`expected primary expression before '<'token`。而且也很有趣：`expected ';' after top level declarator`。这是该类的头文件：

```
#ifndef OSXSPECIFICS_h
#define OSXSPECIFICS_h

#include <string.h>

class OSXSpecifics
{
public:
    static std::string GetOSXFilePath(const char* name, const char* type);
    static void printToConsole(const char* text);
};

#endif // OSXSPECIFICS_h 
```

知道为什么 xcode 对 c++ 和客观 c 混合感到恐惧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:37:08.810

我认为`<#const char *text#>`应该是`const char *text`。

和被 Xcode 的自动完成系统放在那里，应该被删除`<#`。`#>`

# css - "clear: both" + "height: 100%" 越过页面底部

> ID：12757331
> 
> 赞同：1
> 
> 时间：2012-10-06T06:23:49.400
> 
> 标签：css

我承认 CSS 不是我的一杯茶，所以我可能在这里遗漏了一些明显的东西。我的问题是，当我有一个元素同时具有“clear: both;”的 CSS 属性时 和“身高：100%；” 该元素实际上最终超过了页面高度。这是一个例子：http: [//jsfiddle.net/d9mv7/](http://jsfiddle.net/d9mv7/)

请注意，蓝色框架会导致出现滚动条并超出页面高度，尽管它是“100%”。当“clear：both”属性被删除时，它会按预期呈现（JsFiddle 仍然添加了一个不需要的滚动条，但是当正常呈现时，我没有这个问题）。

我的意图是让底部 div（JsFiddle 中的蓝色）一直到页面高度的底部，但停在页面底部，正确绘制边框，与两侧相同。问题是我在 div 上方确实有具有 float 属性的内容，要求 div 具有“clear: both”属性才能正确呈现（除非有另一种方法而无需对像素大小进行硬编码）。

我尝试将顶部（浮动元素）和底部 div 都包装在一个额外的 div 中，以便它们的高度相对于该 div 而不是页面。这似乎使重叠更小（并且滚动条更短），但并没有让它消失。使用“溢出：隐藏；” 对我也不起作用，因为它仍然使 div 和内容超出底部，只隐藏滚动条。你们建议我如何处理这个（最好没有 JavaScript）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:42:44.217

正如另外两个海报所建议的那样，我最终选择了 JavaScript 解决方案。如果有人能找到一个仅对 div 的大小/内容不做任何假设的纯 CSS 解决方案，请发布它，我将更改已接受的答案。这是我现在处理它的方式（这使用 jQuery，但类似的逻辑可以用原生 JS 完成）：

```
$('#second-panel').height(document.height-$('#first-panel').height()); 
```

或者，如果您的 div 有足够厚的边距/填充/边框，并且您希望它们也包含在测量中（因为 element.height() 没有），您可以使用 outerHeight：

```
var secondPanel = $('#second-panel');
var borders = secondPanel.outerHeight()-secondPanel.height();
secondPanel.height(document.height-$('#first-panel').outerHeight()-borders); 
```

# fluent-nhibernate - Fluent NHibernation 唯一字符串映射（忽略重复项）

> ID：12757341
> 
> 赞同：0
> 
> 时间：2012-10-06T06:26:33.777
> 
> 标签：fluent-nhibernate, unique

我有这个表
id (int,pk,ai),
word(varchar 25)

假设我允许用户向我的数据库添加新的单词。
如果已经存在，我希望 Nhibernate 跳过添加新单词。
我怎样才能流畅地映射它？那可行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:26:46.353

映射：

```
Map(x => x.Word).Unique(); // just to make sure it is unique 
```

代码：

```
void AddWords(ICollection<string> words)
{
    var existingWords = session.QueryOver<UniqueWord>()
        .WhereRestrictionOn(w => w.Word).In(words)
        .Select(w => w.Word)
        .List<string>();

    foreach(var word in words.Except(existingWords))
    {
        session.Save(new UniqueWord(word));
    }
    session.Flush();
} 
```

# python - 使用 Python 快速转译阿拉伯语文本

> ID：12757344
> 
> 赞同：7
> 
> 时间：2012-10-06T06:27:08.953
> 
> 标签：python, arabic

我总是处理阿拉伯文本文件，为了避免编码问题，我根据 Buckwalter 的方案将阿拉伯字符音译成英文 (http://www.qamus.org/transliteration.htm)

这是我的代码，但即使是 400 kb 这样的小文件，它也非常慢。让它更快的想法？

谢谢

```
 def transliterate(file):
          data = open(file).read()
          buckArab = {"'":"ء", "|":"آ", "?":"أ", "&":"ؤ", "<":"إ", "}":"ئ", "A":"ا", "b":"ب", "p":"ة", "t":"ت", "v":"ث", "g":"ج", "H":"ح", "x":"خ", "d":"د", "*":"ذ", "r":"ر", "z":"ز", "s":"س", "$":"ش", "S":"ص", "D":"ض", "T":"ط", "Z":"ظ", "E":"ع", "G":"غ", "_":"ـ", "f":"ف", "q":"ق", "k":"ك", "l":"ل", "m":"م", "n":"ن", "h":"ه", "w":"و", "Y":"ى", "y":"ي", "F":"ً", "N":"ٌ", "K":"ٍ", "~":"ّ", "o":"ْ", "u":"ُ", "a":"َ", "i":"ِ"}    
          for char in data: 
               for k, v in arabBuck.iteritems():
                     data = data.replace(k,v)                 
      return data 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T19:03:32.537

**编辑 2021 年 10 月**

最近发布的一个 python 包可以做到这一点（还有更多），所以现在阅读这篇文章的任何人都应该忽略所有其他答案，只使用 Camel 工具。（Nizar Habash 和他在纽约大学阿布扎比分校的团队非常棒地开发了这个并让它变得如此易于访问！）

```
::python
from camel_tools.utils.charmap import CharMapper
sentence = "ذهبت إلى المكتبة."
print(sentence)

ar2bw = CharMapper.builtin_mapper('ar2bw')

sent_bw = ar2bw(sentence)
print(sent_bw) 
```

输出：

```
هبت إلى المكتبة.
*hbt <lY Almktbp. 
```

您可以在此处找到安装说明和教程：[https ://github.com/CAMeL-Lab/camel_tools](https://github.com/CAMeL-Lab/camel_tools)

* * *

**旧答案** 顺便说一句，有人已经编写了一个执行此操作的脚本，因此您可能需要在自己花费太多时间之前检查一下： [buckwalter2unicode.py](http://www.redhat.com/archives/fedora-extras-commits/2007-June/msg03617.html)

它可能比您需要的更多，但您不必全部使用它：我只复制了两个字典和 transliterateString 函数（我认为进行了一些调整），并在我的网站上使用它。

**编辑：** 上面的脚本是我一直在使用的，但我刚刚发现它比使用替换慢*得多*，尤其是对于大型语料库。这是我最终得到的代码，它似乎更简单更快（这引用了字典 buck2uni）：

```
def transString(string, reverse=0):
    '''Given a Unicode string, transliterate into Buckwalter. To go from
    Buckwalter back to Unicode, set reverse=1'''

    for k, v in buck2uni.items():
        if not reverse:
            string = string.replace(v, k)
        else:
            string = string.replace(k, v)

    return string 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T08:45:51.467

每当您必须进行音译`str.translate`时，使用的方法是：

```
>>> import timeit
>>> buckArab = {"'":"ء", "|":"آ", "?":"أ", "&":"ؤ", "<":"إ", "}":"ئ", "A":"ا", "b":"ب", "p":"ة", "t":"ت", "v":"ث", "g":"ج", "H":"ح", "x":"خ", "d":"د", "*":"ذ", "r":"ر", "z":"ز", "s":"س", "$":"ش", "S":"ص", "D":"ض", "T":"ط", "Z":"ظ", "E":"ع", "G":"غ", "_":"ـ", "f":"ف", "q":"ق", "k":"ك", "l":"ل", "m":"م", "n":"ن", "h":"ه", "w":"و", "Y":"ى", "y":"ي", "F":"ً", "N":"ٌ", "K":"ٍ", "~":"ّ", "o":"ْ", "u":"ُ", "a":"َ", "i":"ِ"}
>>> def repl(data, table):
...     for k,v in table.iteritems():
...         data = data.replace(k, v)
... 
>>> def trans(data, table):
...     return data.translate(table)
... 
>>> T = u'This is a test to see how fast is translitteration'
>>> timeit.timeit('trans(T, buckArab)', 'from __main__ import trans, T, buckArab', number=10**6)
6.766200065612793
>>> T = 'This is a test to see how fast is translitteration' #in python2 requires ASCII string
>>> timeit.timeit('repl(T, buckArab)', 'from __main__ import repl, T, buckArab', number=10**6)
12.668706893920898 
```

正如您所看到的，即使是小字符串`str.translate`也快 2 倍。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-30T17:00:46.087

每当我`str.translate`在 unicode 对象上使用它时，它都会返回相同的对象。这可能是由于[Martijn Peters 提到的行为变化](https://stackoverflow.com/questions/21038891/what-does-table-the-string-translate-function-mean#21038990)。

如果还有其他人正在努力将诸如阿拉伯语之类的 unicode 音译为 ascii，我发现将序数映射到 unicode 文字效果很好。

```
>>> buckArab = {"'":"ء", "|":"آ", "?":"أ", "&":"ؤ", "<":"إ", "}":"ئ", "A":"ا", "b":"ب", "p":"ة", "t":"ت", "v":"ث", "g":"ج", "H":"ح", "x":"خ", "d":"د", "*":"ذ", "r":"ر", "z":"ز", "s":"س", "$":"ش", "S":"ص", "D":"ض", "T":"ط", "Z":"ظ", "E":"ع", "G":"غ", "_":"ـ", "f":"ف", "q":"ق", "k":"ك", "l":"ل", "m":"م", "n":"ن", "h":"ه", "w":"و", "Y":"ى", "y":"ي", "F":"ً", "N":"ٌ", "K":"ٍ", "~":"ّ", "o":"ْ", "u":"ُ", "a":"َ", "i":"ِ"}
>>> ordbuckArab = {ord(v.decode('utf8')): unicode(k) for (k, v) in buckArab.iteritems()}
>>> ordbuckArab
{1569: u"'", 1570: u'|', 1571: u'?', 1572: u'&', 1573: u'<', 1574: u'}', 1575: u'A', 1576: u'b', 1577: u'p', 1578: u't', 1579: u'v', 1580: u'g', 1581: u'H', 1582: u'x', 1583: u'd', 1584: u'*', 1585: u'r', 1586: u'z', 1587: u's', 1588: u'$', 1589: u'S', 1590: u'D', 1591: u'T', 1592: u'Z', 1593: u'E', 1594: u'G', 1600: u'_', 1601: u'f', 1602: u'q', 1603: u'k', 1604: u'l', 1605: u'm', 1606: u'n', 1607: u'h', 1608: u'w', 1609: u'Y', 1610: u'y', 1611: u'F', 1612: u'N', 1613: u'K', 1614: u'a', 1615: u'u', 1616: u'i', 1617: u'~', 1618: u'o'}
>>> u'طعصط'.translate(ordbuckArab)
u'TEST' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-06T06:47:57.327

您正在为每个角色重做相同的工作。当您这样做时`data = data.replace(k, v)`，它将替换整个文件中*所有出现的给定字符。*但是当您只需要为每个音译对执行一次时，您会在循环中一遍又一遍地执行此操作。只需删除最外层的循环，它就会极大地加快您的代码速度。

如果您需要进一步优化它，您可以查看 string [translate 方法](http://docs.python.org/library/stdtypes.html#str.translate)。我不确定这在性能方面如何。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-21T22:21:50.237

扩展@larapsodia 的答案，这是带有字典的完整代码：

```
# -*- coding: utf-8 -*-

# Arabic Transliteration based on Buckwalter
# dictionary source is buckwalter2unicode.py http://www.redhat.com/archives/fedora-extras-commits/2007-June/msg03617.html 

buck2uni = {"'": u"\u0621", # hamza-on-the-line
            "|": u"\u0622", # madda
            ">": u"\u0623", # hamza-on-'alif
            "&": u"\u0624", # hamza-on-waaw
            "<": u"\u0625", # hamza-under-'alif
            "}": u"\u0626", # hamza-on-yaa'
            "A": u"\u0627", # bare 'alif
            "b": u"\u0628", # baa'
            "p": u"\u0629", # taa' marbuuTa
            "t": u"\u062A", # taa'
            "v": u"\u062B", # thaa'
            "j": u"\u062C", # jiim
            "H": u"\u062D", # Haa'
            "x": u"\u062E", # khaa'
            "d": u"\u062F", # daal
            "*": u"\u0630", # dhaal
            "r": u"\u0631", # raa'
            "z": u"\u0632", # zaay
            "s": u"\u0633", # siin
            "$": u"\u0634", # shiin
            "S": u"\u0635", # Saad
            "D": u"\u0636", # Daad
            "T": u"\u0637", # Taa'
            "Z": u"\u0638", # Zaa' (DHaa')
            "E": u"\u0639", # cayn
            "g": u"\u063A", # ghayn
            "_": u"\u0640", # taTwiil
            "f": u"\u0641", # faa'
            "q": u"\u0642", # qaaf
            "k": u"\u0643", # kaaf
            "l": u"\u0644", # laam
            "m": u"\u0645", # miim
            "n": u"\u0646", # nuun
            "h": u"\u0647", # haa'
            "w": u"\u0648", # waaw
            "Y": u"\u0649", # 'alif maqSuura
            "y": u"\u064A", # yaa'
            "F": u"\u064B", # fatHatayn
            "N": u"\u064C", # Dammatayn
            "K": u"\u064D", # kasratayn
            "a": u"\u064E", # fatHa
            "u": u"\u064F", # Damma
            "i": u"\u0650", # kasra
            "~": u"\u0651", # shaddah
            "o": u"\u0652", # sukuun
            "`": u"\u0670", # dagger 'alif
            "{": u"\u0671", # waSla
}

def transString(string, reverse=0):
    '''Given a Unicode string, transliterate into Buckwalter. To go from
    Buckwalter back to Unicode, set reverse=1'''

    for k, v in buck2uni.items():
      if not reverse:
            string = string.replace(v, k)
      else:
            string = string.replace(k, v)

    return string

>>> print(transString(u'مرحبا'))
mrHbA
>>> print(transString('mrHbA', 1))
مرحبا
>>> 
```

这取自[http://www.redhat.com/archives/fedora-extras-commits/2007-June/msg03617.html](http://www.redhat.com/archives/fedora-extras-commits/2007-June/msg03617.html)，它在 GPLv2 或更高版本下获得许可。

# c# - 如何判断 CloudBlob 引用是否实际上是在引用 Azure Storage 上的现有资源？

> ID：12757355
> 
> 赞同：0
> 
> 时间：2012-10-06T06:29:24.043
> 
> 标签：c#, azure-storage

我通过 container.GetBlobReference() 获得了 CloudBlob，这是我的代码：

```
CloudBlobContainer container = cloudBlobClient.GetContainerReference("adcontainer");
CloudBlob blob = container.GetBlobReference(blobUri); 
```

不知道这个资源是不是真的在azure上，由于反应慢我也不想尝试。

或者，也许我第一次以错误的方式得到了 blob？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:55:28.297

请参阅[http://blog.smarx.com/posts/testing-existence-of-a-windows-azure-blob](http://blog.smarx.com/posts/testing-existence-of-a-windows-azure-blob)。您需要执行 HEAD 请求来确定 blob 是否存在。`GetBlobReference`实际上并没有做任何事情（除了构造一个本地对象）。

顺便说一句，我的`WazStorageExtensions`库增加了对`.Exists()`：[https ://github.com/smarx/WazStorageExtensions 的支持](https://github.com/smarx/WazStorageExtensions)

# php - 即使我允许，为什么这段代码仍在运行

> ID：12757358
> 
> 赞同：0
> 
> 时间：2012-10-06T06:30:24.730
> 
> 标签：php, html, forms

我不希望当页面对其自身进行操作时运行这段代码。

```
 //There was an identical id and request is somewhat real. (Still possible of a lucky guess)
    if($array['isbeingwritten'] == 1)
    {
        //The article is already being written.
        echo '<script type="text/javascript">alert("That article is being written. Someone beat you to it. You will now be redirected.");</script>';
        echo '<script type="text/javascript">window.location.href="write.php";</script>';
    } 
```

所以我这样做了：

```
if(!isset($_POST['submit']))
{
  //There was an identical id and request is somewhat real. (Still possible of a lucky guess)
  if($array['isbeingwritten'] == 1)
  {
        //The article is already being written.
    echo '<script type="text/javascript">alert("That article is being written. Someone beat you to it. You will now be redirected.");</script>';
    echo '<script type="text/javascript">window.location.href="write.php";</script>';
  }
} 
```

那是行不通的。按下提交后它仍然运行该代码！这是我的表格：

```
 <form method="post" id="writearticle" action=""> 
                <textarea rows="30" cols="85" id="articlecontent" name="content" placeholder="Write the article here. Try to abide by the instructions and keywords provided." onkeyup="checkWordCount();" ></textarea>
                <br />      
                <input type="submit" id="submit" name="submitarticle" value="Submit Article" class="submit" disabled />     

                <br /><br /><br /><br /><br />
            </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:35:58.617

更改代码`if(!isset($_POST['submit'])) to if(!isset($_POST['submitarticle']))`

# c - linux中的C程序有PID吗？

> ID：12757359
> 
> 赞同：4
> 
> 时间：2012-10-06T06:30:31.357
> 
> 标签：c, linux, process

我有一个简单的 C 程序，当我用 编译和运行它时`./output`，它是否在 Linux 上获得 PID？（我认为，每个正在运行的程序都是一个进程，它应该有一个 PID。）

我使用了该`ps aux`命令，但在那里找不到进程名称。

我记得，当我的控制台应用程序（一个 C 程序）在 Windows 7 上运行时，我能够通过 Volatility 工具获取它的 PID。

```
#include<stdio.h>

void main()
{
    printf("Hello World!");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T06:33:24.017

是的，Linux 上每个运行的程序都有一个 PID。

您的程序只是打印`"Hello, World!"`，并且会很快完成，以至于在您运行`ps aux`时它已经完成。

此外，`void main()`应该是`int main(void)`，并且您应该添加`\n`到输出字符串的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:34:14.010

它应该。只需在您的程序中 printf getpid() 即可查看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T06:40:18.820

或者只是添加一个 sleep 以便您可以找到进程 ID。可能在你眨眼的时候跑了。

使用此代码并在单独的终端运行`ps`

```
#include <stdio.h>
#include <unistd.h>

int main(void)
{
  printf("Hello World!\n");
  sleep(3600);
  printf("Are you bored yet?\n");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T08:08:08.133

您可以使用 getpid 获取它

```
int main()
{
    pid_t pid; 
    printf("Hello World!");
    printf("pid of program is %d" , getpid());   
} 
```

或者只是使用您的代码并将其放入后台。

```
void main()
{
    printf("Hello World!");
} 
```

输出：

```
[xxxxx@localhost ~]$ ./c1 &
[1] 3007
3007 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T06:34:15.640

是的，每个进程在运行时都会获得一个 PID。由于这个 C 程序似乎是一个非常短暂的进程，它可能在您运行`ps aux`命令以获取其 PID 之前完成。尝试调用`getchar()`或`scanf()`等待用户输入，然后从不同的终端运行 ps 命令以查看 PID。

# c# - 锁定窗口大小以在 WPF 中最大化

> ID：12757364
> 
> 赞同：2
> 
> 时间：2012-10-06T06:31:19.203
> 
> 标签：c#, wpf

如何限制我的 WPF 窗口只允许最大化和最小化功能。在我的应用程序中，不应允许用户调整窗口大小。

我按以下方式更改了我的 WPF 窗口属性：

```
Window State: Maximize

Resize Mode: NoResize 
```

当我在最大化视图中打开我的应用程序窗口时，但是当我双击窗口边框时，它会调整大小。是否可以限制这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:42:12.870

使用这段代码，窗口将以最大化状态打开，并且可以通过不调整大小来最小化。如果需要，您还可以为窗口指定一些固定大小（高度和宽度）。

```
Height="350" Width="525" 
```

xml:

```
<Window 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     WindowState="Maximized" ResizeMode="CanMinimize">    
...    
</Window> 
```

请参阅 MSDN 参考中的调整大小模式部分：http: [//msdn.microsoft.com/en-us/library/ms748948.aspx](http://msdn.microsoft.com/en-us/library/ms748948.aspx)

你可以参考一些类似的帖子：[Minimize window with NoResize mode on](https://stackoverflow.com/questions/9048877/minimize-window-with-noresize-mode-on)

# objective-c - Facebook 与 iOS 6 的集成

> ID：12757367
> 
> 赞同：1
> 
> 时间：2012-10-06T06:31:46.533
> 
> 标签：objective-c, facebook, ios6, facebook-login

我正在开发要添加“**使用 Facebook 登录**”功能的应用程序。根据 facebook 文档，他们提供了 facebook SDK 和 social/AdSupport/Account 框架。我在 facebook 上尝试了示例应用程序，但它没有给出我真正想要的，我如何实现以下应该兼容 iOS 5 和 iOS 6 设备的东西。

**Facebook 示例：** 1\. 点击登录按钮将用户带到 Safari 浏览器进行登录验证。2\. 登录后用户返回到我们的应用程序。3\. 退出会话后，如果用户再次尝试登录，他/她不会询问用户名密码，SDK 直接将他们带到 Facebook 页面，点击“Okay”按钮。点击 Okay 按钮后，它会将它们返回到我们的应用程序。

**我的要求：** 1\. 点击登录按钮应该在那里显示登录对话框，而不是将用户带到 safari 浏览器。2\. 登录后，登录对话框应消失，用户应显示应用程序主屏幕。3\. 退出会话后，如果用户再次尝试重新登录，则应显示登录对话框。

我注意到，由于 safari 浏览器中存储的 cookie，用户不会再次重新登录。

那么，如果有人有想法，那么请帮助我满足上述要求？或者我如何实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T11:48:58.077

在 ios 6 中，您可以使用`SLComposerview`Social Framework 中提供的功能，而对于 ios 5 及更低版本，您必须使用此处提供的 facebook sdk [https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)

您可以阅读说明并首先尝试运行示例，这会给您一个更好的主意。

祝你好运！

# iphone - 暂停/恢复 CALayer 动画的最佳方式

> ID：12757373
> 
> 赞同：0
> 
> 时间：2012-10-06T06:33:06.200
> 
> 标签：iphone, sdk, resume

我已经看到暂停/恢复 CALayer 动画的代码，如下所示：

[暂停]

```
CALayer *layer = object.icon.layer;
CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
layer.speed = 0.0;
layer.timeOffset = pausedTime; 
```

[恢复]

```
CALayer *layer = object.icon.layer;
CFTimeInterval pausedTime = [layer timeOffset];
layer.speed = 1.0;
layer.timeOffset = 0.0;
layer.beginTime = 0.0;
CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
layer.beginTime = timeSincePause; 
```

这很好用。问题是如果一个新的 ViewController 被推入 ViewController 堆栈，或者应用程序进入后台然后返回，CALayer 动画会立即捕捉到它们的结束位置！

什么是处理有效暂停/取消暂停 UIView 动画的好方法？我可以在其中最小化应用程序并将其恢复，或者在不丢失动画的情况下更改活动的 ViewController！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:12:58.880

我认为在暂停时，您需要记住根层的 mediaTime，并在您的应用程序恢复后恢复该值……否则，时间会随着您的应用程序暂停时所经过的时间而跳跃。

# php - 动态或固定选项？

> ID：12757374
> 
> 赞同：0
> 
> 时间：2012-10-06T06:33:22.490
> 
> 标签：php, oop, class, security

我想知道哪种方法被认为是最佳实践，为什么？

拥有该功能，因此它会尝试获取传入的任何内容。

```
class Test{

    private $first = 'first';
    private $second = 'second';

    public function data($what){
        return $this->{strtolower($what)};
    }

} 
```

或有一组固定的选项：

```
class Test{

    private $first = 'first';
    private $second = 'second';

    public function data($what){
        switch(strtolower($what)){
            case 'first':
                $value = $this->first;
                break;
            case 'second':
                $value = $this->second;
                break;
            default:
                $value = null;
        }
        return $value;
    }

} 
```

使用第一个选项意味着我不需要在每次向类中添加新成员时都更改函数，但这也意味着我不能再拥有`private`类成员。

使用第二个选项意味着我每次添加新成员时都需要更改函数，但这意味着我可以确保没有读取不应该读取的内容。

使用第一种方法，如果我想为特定成员添加额外的处理，我可以为这些成员添加一个 if 语句。

使用第二种方法，我可以在 case 语句中进行处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:50:21.970

当然，代码需要知道从对象中推断出什么 Dynamic 并不是更好，具体化并不草率地编写代码。这意味着你已经用你的大脑思考了那个行动的后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:42:34.910

我会选择第一个并利用魔法方法[`__get()`](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)。

```
class Test {

    private $first = 'first';
    private $second = 'second';

    public function data($what){
        return $this->{strtolower($what)};
    }

    public function __get($what){
        // This method is called whenever you're trying to access an inaccessible property.
        return null;
    }
}

$Test = new Test();
var_dump($Test->data('first')); // string: 'first'
var_dump($Test->data('abcde')); // null 
```

当然，您也可以使用其他替代方法，例如定义可以从函数中检索哪些属性的数组。然后，在您的`data()`函数中，只需检查请求的属性是否可检索。否则返回null

```
class Test {
    private $first = 'first';
    private $second = 'second';
    private $retrievable = array('first', 'second');

    public function data($what)
    {
        if (in_array($what, $this->retrievable))
        {
            return $this->{strtolower($what)};
        }
        return null;
    }
} 
```

这样，您不必修改代码，只需编辑可检索项目的数组。

# git - teamcity git 托管在 IIS 访问问题中

> ID：12757378
> 
> 赞同：0
> 
> 时间：2012-10-06T06:33:35.170
> 
> 标签：git, teamcity

我正在尝试访问在启用了 Windows 身份验证的 IIS 下托管的 git 存储库。

当我指定域\用户名之类的用户名时，连接失败。从堆栈跟踪来看，错误似乎是由于给出网络用户名的方式造成的。我们还能如何给其中有域的 Windows 身份验证用户。

当我执行 git clone ( https:/domain\user@mydomain.com/xyz/ ) 时，这可以从控制台正常工作

**错误详情**

Git Repo:: Git Repo 中的测试连接失败。列出远程引用失败：java.net.ConnectException：无法确定代理......

**堆栈跟踪**

```
Caused by: org.eclipse.jgit.errors.TransportException: https:/domain\user@mydomain.com/xyz/info/refs?service=git-upload-pack
at org.eclipse.jgit.transport.TransportHttp.connect(TransportHttp.java:466)
at org.eclipse.jgit.transport.TransportHttp.openFetch(TransportHttp.java:276)
at jetbrains.buildServer.buildTriggers.vcs.git.GitVcsSupport.getRemoteRefs(GitVcsSupport.java:523)
at jetbrains.buildServer.buildTriggers.vcs.git.GitVcsSupport.getRemoteRefs(GitVcsSupport.java:503)
... 44 more

Caused by: java.net.ConnectException: Cannot determine proxy for https:/domain\user@mydomain.com/xyz/info/refs?service=git-upload-pack
at org.eclipse.jgit.util.HttpSupport.proxyFor(HttpSupport.java:196)
at org.eclipse.jgit.transport.TransportHttp.httpOpen(TransportHttp.java:475)
at org.eclipse.jgit.transport.TransportHttp.httpOpen(TransportHttp.java:471)
at org.eclipse.jgit.transport.TransportHttp.connect(TransportHttp.java:422)
... 47 more

**Caused by: java.net.URISyntaxException: Illegal character in authority at index 8: https:/domain\user@mydomain.com/xyz/info/refs?service=git-upload-pack**
at java.net.URI$Parser.fail(Unknown Source)
at java.net.URI$Parser.parseAuthority(Unknown Source)
at java.net.URI$Parser.parseHierarchical(Unknown Source)
at java.net.URI$Parser.parse(Unknown Source)
at java.net.URI.<init>(Unknown Source)
at java.net.URL.toURI(Unknown Source)
at org.eclipse.jgit.util.HttpSupport.proxyFor(HttpSupport.java:193) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:36:18.400

您的网址中似乎有错字。

你有

```
https:/domain\user@mydomain.com/xyz/ 
```

代替

```
https://domain\user@mydomain.com/xyz/ 
```

# mysql - MySQL Connector/C 尝试使用 localhost 而不是 127.0.0.1 连接时不支持请求的元文件操作

> ID：12757379
> 
> 赞同：0
> 
> 时间：2012-10-06T06:34:13.503
> 
> 标签：mysql, c, windows, winsock, mysql-connector

我从头开始编译 Connector/C，当我尝试使用它进行连接时，my_connect 返回 -1 和 WSAGetLastError() == 2003

我不知道出了什么问题，有什么想法吗？我试过谷歌搜索，但我什至找不到关于该错误意味着什么的任何信息。

```
 MYSQL *my = mysql_init(NULL);
    if(my)
    {
        MYSQL *result  = mysql_real_connect(my, strHost.c_str(), strUser.c_str(), strPass.c_str(), 
            strDB.c_str(), uiPort, NULL, 0);
    } 
```

编辑：奇怪，当我使用 127.0.0.1 连接而不是本地主机时，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:13:48.570

我已经使用返回 ::1 的 ipv6 getaddrinfo 将问题追溯到 MySQL C 连接器，我使用的是不支持 ipv6 的旧 mysql 服务器版本。

# css - 网站上的测量

> ID：12757385
> 
> 赞同：5
> 
> 时间：2012-10-06T06:34:40.223
> 
> 标签：css, measurement

你应该混合`em`吗`px`？

As`em`是基于字体大小和`px`基于屏幕的。

所以问题沸腾了——当大多数网站都在使用时，如何生成图像`em`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:45:10.767

通常，图像具有以像素为单位的固有尺寸。但是您可以根据字体大小对它们进行缩放，如果它们是应该与文本大小匹配的按钮。只需创建一个足够大的图像（按比例缩小比按比例放大效果更好）并将图像的高度设置为`1.5em`. 当您仅设置高度而不设置宽度（反之亦然）时，浏览器会缩放图像以保留宽度：高度比。

但是，最好使用 CSS 而不是图像来创建按钮。背景图像可以使用高级 CSS 功能 ( `background-size`) 进行缩放，但浏览器支持有限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T07:43:37.440

1em 等于当前字体大小。2em 表示当前字体大小的 2 倍。例如，如果一个元素以 12 pt 的字体显示，那么 '2em' 就是 24 pt。'em' 在 CSS 中是一个非常有用的单位，因为它可以自动适应读者使用的字体

'em' 单位等于使用它的元素的 'font-size' 属性的计算值。例外情况是 'em' 出现在 'font-size' 属性本身的值中，在这种情况下，它指的是父元素的字体大小。可用于垂直或水平测量

像素（计算机屏幕上的一个点），px 也可以在 IE 中调整大小。em 是其父元素继承大小的相对大小，实际上与 % 具有相同的含义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T06:40:50.507

你可以混合，但不推荐。如果父级使用 em，我将创建一个容器元素并在该元素上使用 px。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T15:13:35.453

字体设计用于多种尺寸；因此字体引擎可以精确地放大/缩小它们；但是，图像始终使用严格的度量（无论单位如何）。因此，调整它们的大小往往会使它们变大——有时是一点点，有时是很多。当浏览器正在调整大小时尤其如此。浏览器并非设计为照片编辑工具。

如果您正在构建基于图像的菜单，并且您还允许菜单按比例放大，那么可能需要重新设计。如果不是重新设计，那么可能会消除一个因素（没有缩放，或者没有图像）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T08:29:57.077

我个人将两者混合。无论哪种方式，您都可以做到这一点而不会出错。
这取决于偏好和实践。还有其他的： [http ://www.w3schools.com/cssref/css_units.asp](http://www.w3schools.com/cssref/css_units.asp)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-10T20:52:43.253

我发现最好在 html、body 和 em 中使用 px 来处理字体的其余部分。但是，看看相对单位（vw vh v-min v-max）：[http ://css-tricks.com/viewport-sized-typography/](http://css-tricks.com/viewport-sized-typography/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T17:04:26.093

使用 css3

```
background-size: auto 100%; 
```

在内容的容器上。背景将相对于容器高度调整大小，并且容器高度将相对于字体大小增加，无论它如何设置。

# java - 每次启动计算机时都会出现一个对话框消息

> ID：12757390
> 
> 赞同：0
> 
> 时间：2012-10-06T06:35:35.830
> 
> 标签：java, tomcat, tomcat7

启动计算机时出现消息对话框

![在此处输入图像描述](../Images/bfca7da9e916968564dd1fe9bbad40f0.png)

因为它显示了这一点，所以我必须一次又一次地重新安装 tomcat 来练习 Servlet 程序，任何人都可以帮助我。为什么会这样？如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:43:56.920

出现此问题的原因是 Tomcat 服务没有在系统启动时启动的管理员权限。

要将应用程序标记为始终以管理员身份运行，请执行以下操作：

1.  在“开始”菜单上，找到要始终以管理员身份运行的程序。
2.  右键单击应用程序的快捷方式，然后单击“属性”。
3.  在“属性”对话框中，单击“兼容性”选项卡。
4.  执行以下操作之一：

    *   要将设置应用于当前登录的用户，请选中“以管理员身份运行此程序”复选框，然后单击“确定”。

    *   要将设置应用于计算机上的所有用户并且无论使用哪个快捷方式启动应用程序，单击更改所有用户的设置以显示应用程序的 .exe 文件的属性对话框，选择以管理员身份运行此程序检查框，然后单击确定两次。

希望这对您有所帮助。

# wordpress - 想要禁用 wordpress 网站的搜索历史记录

> ID：12757394
> 
> 赞同：0
> 
> 时间：2012-10-06T06:36:06.270
> 
> 标签：wordpress, search

当我在搜索框中搜索一个词时，它会从完整的网站提供相关搜索，并显示搜索历史与搜索建议重叠。我有很多谷歌搜索但不知道如何解决这个问题。建议lzz。谢谢，莫妮卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:00:53.220

所有 WordPress 网站都`name='s'`为其搜索表单设置，因此您的浏览器将根据您在其他 WordPress 网站上输入的查询提出建议。

您可以通过设置禁用它`autocomplete='off'`。

例如： `<input type="text" name="s" autocomplete="off" />`

# networking - 什么叫做 MIB 模块？

> ID：12757403
> 
> 赞同：3
> 
> 时间：2012-10-06T06:38:46.860
> 
> 标签：networking, snmp, net-snmp, mib

我是**MIB 管理信息库的**新手。我很困惑，什么叫做 MIB 模块？

[在这里](http://en.wikipedia.org/wiki/Management_information_base)它被定义为： ASN.1 的一个适应子集，管理信息结构 (SMI)，在 SNMP 中指定以定义相关 MIB 对象的集合；这些集合称为 MIB 模块。

但我不清楚！

完整的 MIB 文件是否称为 MIB 模块？或者一个对象是一个 MIB 模块，例如。对象类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:25:03.180

通常，一个 MIB 文档只包含一个 MIB 模块。例如，

[https://github.com/lextm/sharpsnmplib/blob/master/Tests/Resources/SNMPv2-MIB.txt](https://github.com/lextm/sharpsnmplib/blob/master/Tests/Resources/SNMPv2-MIB.txt)

此文件仅包含一个模块，这是您应该遵循的最佳实践，

```
SNMPv2-MIB DEFINITIONS ::= BEGIN
...
END 
```

但是，SMI 规则不会阻止您在同一个文件中定义多个模块。您可以通过将多个文件合并在一起来进行尝试，大多数 MIB 编译器都乐于编译合并后的结果。

# perl - Perl 打印函数向变量添加不需要的换行符

> ID：12757404
> 
> 赞同：1
> 
> 时间：2012-10-06T06:39:10.533
> 
> 标签：perl, printing, newline

我认为这很简单。我有两个数组，我想用这些数组中的数字打印一个句子到一个文件中。我试过这个：

```
chomp $array1[$x];
chomp $array2[$x];
print FILE "Number1: $array1[$x] \& Number2: $array2[$x] Some Words\n"; 
```

这给了我：

```
Number1: 0
 & Number2: 87.3
 Some Words 
```

（这里的数字只是例子。）

知道为什么会这样吗？我试过使用

```
$array1[$x] =~ s/\n//g;
$array2[$x] =~ s/\n//g; 
```

也一样，但它没有解决任何问题。此外，如果我明确地将这些额外的换行符放入，如下所示：

```
print FILE "Number1: $array1[$x]\n \& Number2: $array2[$x]\n Some Words\n" 
```

我得到相同的输出，因此不再添加不需要的换行符。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:20:26.607

由于该文件是在 Windows 上创建的，因此它可能具有`CRLF`（即`\r\n`）行终止，而不仅仅是`LF`. `chomp`默认情况下只会删除`LF`.

此行将删除`LF`一个*可选*的前面`CR`：

```
$array1[$x] =~ s/\r?\n//; 
```

或者，将`$/`（默认的“输入记录分隔符”）更改为包含`\r\n`，此时`chomp`应正确剥离两者。

# prolog - prolog中的不同查询结果

> ID：12757406
> 
> 赞同：1
> 
> 时间：2012-10-06T06:39:40.710
> 
> 标签：prolog

我在序言中有一个问题。这里是知识库。

```
loves(vincent,mia).
loves(marcellus,mia).
loves(pumpkin,honey_bunny).
loves(honey_bunny,pumpkin).

jealous(X,Y) :-
   loves(X,Z),
   loves(Y,Z). 
```

这是来自“ [Learn Prolog Now](http://www.learnprolognow.org/) ”一书。现在，如果我进行查询`?- jealous(marcellus,W).` ，它会返回，`W = vincent` 但如果我给出查询`?- jealous(vincent,W).` ，则返回结果是`W=vincent`所以这意味着 vincent 嫉妒自己，但 marcellus 并不嫉妒自己。为什么答案不一样？我在 Ubuntu Linux 中使用 swipl，它位于 winxp 上的 VirtualBox 中。我是 Prolog 的初学者。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:06:03.663

`W = vincent`在查询`?- jealous(marcellus,W).` 类型`;`而不是答案之后`Enter` ，您将得到`W = marcellus.` You must add the fact that `X \= Y`in `jealous/2`.

# java - 与泛型、接口和扩展混淆

> ID：12757409
> 
> 赞同：2
> 
> 时间：2012-10-06T06:40:28.447
> 
> 标签：java, generics, interface, comparable

所以我正在尝试为通用链表和跳过列表编写程序。我还想在使用接口和超类时使用它，以备将来使用，但我似乎无法弄清楚如何使所有东西与所有泛型类型一起工作。

这是我现在所拥有的基本思想：

我的列表 ADT 和节点类，一切都将扩展：

```
public class Node<K extends Comparable<K>> {
    K key;
    Object data;
    ...
}

public interface List<T> {
    public void insert(T value);
    public void delete(T value);
} 
```

对于链表的示例：

```
public class LList<T extends Comparable<T>> implements List<LLNode<T>>
public class LLNode<K extends Comparable<K>> extends Node<K> 
```

我这样做对吗？

编辑：更具体地说，当我尝试制作此类的非常基本的实例时遇到问题，例如...

```
List<String> linkedList = new LList<String>();
List[] lists = {linkedList};
sets[0].insert("cookie"); 
```

这给了我一个编译器错误：java.lang.String cannot be cast to project.LLNode

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:34:30.823

我想到了三个选项：

**首先**，将与`List<String>`：

```
 public class LList<T extends Comparable<T>> implements List<T>
    {
        @Override
        public void insert(T value)
        ...
    } 
```

这样`Node`就不再需要了。

**或者**，您的**第二个**选择：您可以保持您实施和使用的方式`List<LLNode<String>>`

**或者**，**最后**，如果您同时需要 use`Node`和 this`List<String>`我认为这是您的需要（从问题中不清楚），并且使用`Node`s 仅在内部使用第一个选项，如果不可能，请更清楚您的需求，我会尽力帮助你。

问候。

# safari - Safari 6 或 Bootstrap 模式对话框的渲染问题？

> ID：12757410
> 
> 赞同：3
> 
> 时间：2012-10-06T06:40:40.350
> 
> 标签：safari, twitter-bootstrap, safari6

引导模式对话框在 Safari 6 中呈现如下

![在此处输入图像描述](../Images/ba5037f675e03a386c44a0d045cd3950.png)

这是 Safari 或 Bootstrap 框架的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:58:02.733

由于您没有提到 safari 的渲染问题到底是什么，我假设您正在谈论的蓝色轮廓

所以我猜 safari 正在使用它`outline`作为你的焦点模式窗口的默认值

使用 CSS

首先简单地试试这个：

```
.yourmodalcontainer {
   outline: 0px;
} 
```

如果仍然没有成功，请尝试以下..

```
.yourmodalcontainer:focus {
   outline: 0px;
} 
```

对于您的模态窗口..这应该是固定的..

# playframework - 播放具有多个时间表的作业

> ID：12757415
> 
> 赞同：0
> 
> 时间：2012-10-06T06:41:39.337
> 
> 标签：playframework, cron, jobs, playframework-1.x

Play 1 有没有办法为同一个工作安排多个时间表？

我希望我的一项工作每天在特定时间运行，并在周末的不同时间运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:46:18.853

您可以执行某种手动计划，例如[Play！框架：我可以重新安排工作吗？](https://stackoverflow.com/questions/12538170/play-framework-can-i-reschedule-the-job/12559450#12559450)

但这对于您想要的东西可能有点过头了。我认为对你来说最好的方法是拥有两个具有两个不同 crons 的工作，每个工作都调用一个通用的 util 方法来完成共同的工作。

另一种解决方案是安排所有时间（工作日和周末）并根据此检查测试您的工作日期以及是否完成工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:50:55.523

到目前为止，尽管 Seb 所描述的工作可以解决问题，但在不同的日程安排下进行相同的工作是不可能的。

然而，现在有一个名为[Multi Jobs](http://www.playmodules.net/module/32)的新模块，它允许使用自己的时间表定义几种方法。

# android - facebook墙帖中的android.os.NetworkOnMainThreadException

> ID：12757416
> 
> 赞同：0
> 
> 时间：2012-10-06T06:41:50.450
> 
> 标签：android, facebook, facebook-wall, networkonmainthread

我正在使用 Android facebook SDK 在 facebook 墙上发帖。我使用以下代码进行墙贴，但每次都出现异常`android.os.NetworkOnMainThreadException`

```
public void postToWall(String message) {
        Bundle parameters = new Bundle();
        parameters.putString("message", message);
        parameters.putString("description", "topic share");
        try {
            facebook.request("me");//Error here
            String response = facebook.request("me/feed", parameters, "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("")
                    || response.equals("false")) {
                showToast("Blank response.");
            } else {
                showToast("Message posted to your facebook wall!");
            }
            finish();
        } catch (Exception e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }
    } 
```

**日志猫**

```
android.os.NetworkOnMainThreadException
W/System.err( 1048):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
W/System.err( 1048):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
W/System.err( 1048):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
W/System.err( 1048):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
W/System.err( 1048):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
W/System.err( 1048):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
W/System.err( 1048):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
W/System.err( 1048):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
W/System.err( 1048):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
W/System.err( 1048):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
W/System.err( 1048):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
W/System.err( 1048):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
W/System.err( 1048):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
W/System.err( 1048):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
W/System.err( 1048):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
W/System.err( 1048):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
W/System.err( 1048):    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
W/System.err( 1048):    at com.facebook.android.Util.openUrl(Util.java:215)
W/System.err( 1048):    at com.facebook.android.Facebook.request(Facebook.java:776)
W/System.err( 1048):    at com.facebook.android.Facebook.request(Facebook.java:713)
W/System.err( 1048):    at com.example.share.Share.postToWall(Share.java:86)
W/System.err( 1048):    at com.example.share.Share.share(Share.java:72)
W/System.err( 1048):    at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err( 1048):    at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err( 1048):    at android.view.View$1.onClick(View.java:3586)
W/System.err( 1048):    at android.view.View.performClick(View.java:4084)
W/System.err( 1048):    at android.view.View$PerformClick.run(View.java:16966)
W/System.err( 1048):    at android.os.Handler.handleCallback(Handler.java:615)
W/System.err( 1048):    at android.os.Handler.dispatchMessage(Handler.java:92)
W/System.err( 1048):    at android.os.Looper.loop(Looper.java:137)
W/System.err( 1048):    at android.app.ActivityThread.main(ActivityThread.java:4745)
W/System.err( 1048):    at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err( 1048):    at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err( 1048):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
W/System.err( 1048):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
W/System.err( 1048):    at dalvik.system.NativeStart.main(Native Method)
W/WindowManager(  145): Failure taking screenshot for (246x410) to layer 21010
I/Choreographer( 1048): Skipped 40 frames!  The application may be doing too much work on its main thread.
D/dalvikvm(  226): GC_CONCURRENT freed 384K, 7% free 8535K/9095K, paused 20ms+4ms, total 52ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:45:35.950

> 您不能在 Honeycombe 或更高版本的 UI 线程上执行网络 IO。从技术上讲，这在早期版本的 Android 上是可能的，但这是一个非常糟糕的主意，因为它会导致您的应用程序停止响应，并可能导致操作系统因您的应用程序行为不端而杀死您的应用程序。您需要运行后台进程或使用 AsyncTask 在后台线程上执行网络事务。

**编辑：另一个想法，但它并不好。使用它是不好的做法，但有些人使用它。**

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

在您的活动类中添加上述代码。

**我个人更喜欢第一个选项使用 thread 或 AsyncTask 。**

# asp.net - 无法使用 IIS 在我的网站中访问我的 SQL Server 数据库

> ID：12757418
> 
> 赞同：0
> 
> 时间：2012-10-06T06:41:55.803
> 
> 标签：asp.net, sql, visual-studio, sql-server-2008, iis-7

我的连接字符串是正确的。它在我从 Visual Studio 内部调试和运行时工作。

我的问题是我需要从 IIS 浏览我的网站才能从我网络中的任何 PC 访问我的网站。

当我将应用程序池标识更改为 时`localsystem`，它起作用了。我担心它无法在我网络中的任何 PC 上运行，因为我无法对其进行测试。

你能确认它是否有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-21T07:08:32.777

您需要像这样在连接字符串中添加用户名和密码

```
Data Source='server IP';Initial Catalog='database name';Persist Security Info=True;User ID='your user name';password='your password 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:01:01.907

听起来您正在使用 Windows 身份验证进行连接 - 即：“受信任的连接”。

这就是您可以使用 Visual Studio 进行连接的原因 - 您正在使用您的凭据进行连接。

您需要使用可以连接到 SQL Server 的帐户运行或模拟 IIS，或者允许 IIS 模拟连接的用户，假设他们也具有 SQL Server 连接权限。

# ninject - 使用 Ninject 绑定 WebApi 过滤器属性

> ID：12757419
> 
> 赞同：7
> 
> 时间：2012-10-06T06:41:58.970
> 
> 标签：ninject, asp.net-web-api

我目前在我的 asp.net webapi 项目中使用 ninject.mvc3，它工作正常。我现在正在尝试绑定过滤器属性，但是在使用静态类方法时界面`BindFilter`中`BindHttpFilter`缺少。如果我添加包，它在那里但项目没有运行（[这里](https://stackoverflow.com/questions/11207766/issue-using-asp-net-mvc-4-web-api-with-ninject-web-webapi)的问题，解决方案说不推荐使用）所以我把它删除了。`IKernel``NinjectWebCommon``Ninject.Web.WebApi``Ninject.Web.WebApi`

我也完全遵循了这个[github wiki](https://github.com/ninject/ninject.web.mvc/wiki/Dependency-injection-for-filters)，但仍然`this.BindFilter`没有找到。我有最新的 nuget 包；Ninject (3.0.1.10)、Ninject.Web.Common (3.0.0.7)、Ninject.MVC3 (3.0.0.6)

BindFilter 或 BindHttpFilter 在哪里？有什么改变吗？如何在 asp.net web api 中绑定过滤器属性？有这么多的库和项目，文档并没有告诉你什么是当前工作的，什么是弃用的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T05:15:28.090

您使用的包是正确的，因为它们还没有包含 BindHttpFilter。BindHttpFilter 扩展方法来自[https://github.com/remogloor/Ninject.Web.WebApi](https://github.com/remogloor/Ninject.Web.WebApi)，它目前不适用于 WebApi 的发布版本，因为它是针对 beta WebApi 版本编写的。为了注入 WebApi 过滤器，您需要 BindHttpFilter，您不能将 WebApi 过滤器传递给 BindFilter 方法。

这是[https://github.com/ninject/Ninject.Web.WebApi/pull/1](https://github.com/ninject/Ninject.Web.WebApi/pull/1)似乎是我能找到的关于更新状态的最新信息。

你也可以尝试另一个 NuGet 包[http://nuget.org/packages/Ninject.Web.WebApi-rc](http://nuget.org/packages/Ninject.Web.WebApi-rc)但我有一些错误，现在不记得到底是什么错误。无论如何，在阅读了关于上述拉取请求的讨论后，我放弃了这个包。

在我的情况下，我正在尝试实现一个日志过滤器，所以我将创建一个静态方法，我可以从过滤器调用该方法，直到注入支持可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T12:33:54.667

我有同样的问题。1）我使用命令从 PM 控制台安装最新（但不稳定）的 Ninject for Web.Api

```
PM> Install-Package Ninject.Web.WebApi -Pre 
```

2）然后我将其添加到 NinjectWebCommon.cs 的“使用”部分

```
using Ninject.Web.WebApi.FilterBindingSyntax; 
```

在这些步骤之后，我的 IKernel 有方法 BindHttpFilter。一切正常

# asp.net - 我应该选择 WCF 还是 ASMX Web 服务

> ID：12757422
> 
> 赞同：7
> 
> 时间：2012-10-06T06:42:25.587
> 
> 标签：asp.net, .net, wcf, web-services, asmx

我的网站目前使用**ASP.NET 1.1**

***旧流程***

在我们的数据库中，我们存储了大量用于解码的数据。我们必须每周更新这个庞大的数据表集（数据由供应商提供）。

*在我们的网站（在 asp.net 1.1 中）我们查询我们的数据库以解码信息。*

***新工艺***

现在，我们不想将数据存储在我们的数据库中并查询它们，而是希望通过 Web 服务替换它，因为*现在供应商正在向我们提供一个 DLL，它将为我们提供解码的信息*。

***供应商提供的 DLL 信息***

*提供的 DLL，只能在 4.0 站点中添加。所以这也意味着我不能直接将 dll 添加到我的 1.1 站点。* 这个 DLL 暴露了某些方法，我们只需在我们的 Web 服务中添加 DLL 引用并调用该方法并获取所需的信息。

因此，我们不必将这些信息存储在我们的数据库中。

**那么我应该使用哪种类型的 Web 服务（asmx 或 WCF），它将使用供应商提供的 DLL 来获取解码信息？**

***我在网络服务中寻找的灵活性是：***

*   它可以**直接从 asp.net 1.1 站点使用，也可以使用 jQuery ajax 使用**。
*   它可以从**服务器上运行的其他 Web 服务中使用**。
*   它可以**从服务器上运行的某些 Windows 服务中使用**。

**注意**：*此外，我们计划将来将我们的网站从 asp.net 1.1 迁移到 4.0 版本。所以它应该对未来的升级有很大的支持。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T07:01:58.127

如果我对您的理解正确，您打算创建一个 Web 服务，该服务将引用供应商提供的 DLL 并将解码的数据返回到您的 ASP.NET 1.1 网站。

我强烈建议您使用 WCF Web 服务，因为它针对 .NET 4.0 框架。相信我，从长远来看，它会带来回报。此外，根据 MSDN（请随时查阅 MSDN），.asmx Web 服务被认为是一种遗留技术。继续使用 WCF，不要从劣势开始！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:16:54.527

如果您现在想继续使用 asp.net 1.1，那么 asmx 服务是您唯一的选择。进一步建议使用 asmx 服务 - 该服务反过来使用 ajax 并兼容不同的平台（实际上，它是一种肥皂服务），并且您可以与它实现出色的互操作性。

此外，我在这里有点困惑。如果您拥有由服务提供商提供的 dll，您可能根本别无选择。DLL 将决定使用哪个服务与提供者数据源进行通信。您的供应商是否给您选择？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:31:09.663

WCf 比 Web 服务更灵活，老式使用的 soap 它以前是 ajax，现在 wcf 是更面向服务的架构。所以不要再使用 Web 服务了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:40:56.627

由于 WCF 通过 SOAP 协议进行通信，我建议您最好的选择是创建一个单独的 .Net 4.0 Web 服务项目（如果您愿意，可以在同一解决方案中），然后您的 .Net 1.1 网站可以引用该项目。

您还可以“双重装饰”您的新 WCF 方法，将它们公开为 ASMX Web 服务，以便与网站向后兼容，并通过分阶段迁移减少停机时间，请参阅[这篇文章。](https://stackoverflow.com/questions/1502298/how-much-effort-is-required-to-convert-an-asmx-to-wcf-web-service)或者，多做一些工作，并且如果您希望立即在客户端中切换服务调用，Microsoft 提供了[将 WCF 暴露给 ASMX 客户端](http://msdn.microsoft.com/en-us/library/ms751433.aspx)的指南。我能看到的最简单的方法是简单地将现有的 asmx 服务代码复制粘贴到 .Net4 项目中，并在适当的地方替换使用新 dll 的方法，[请参阅这篇文章](https://stackoverflow.com/questions/4887813/does-net-4-0-still-support-asmx)。

当迁移完成并重构 .Net 1.1 站点以编译和利用 .Net 4 的新功能时，该服务可以再次移动到主网站项目中（如果您愿意），尽管我个人更愿意将它们分开。

迁移到 WCF 和 .Net 4 应该带来很多好处，Microsoft 已经添加了许多[简单的方法来改进您的程序](https://stackoverflow.com/q/2690386/424963)，WCF 更加灵活，并且可以被更广泛的客户端使用（[见这里](https://stackoverflow.com/a/2448568/424963)），我发现找到对遗留技术的支持变得越来越困难。

高温高压

# android - CustomView 的这种技巧安全吗？

> ID：12757425
> 
> 赞同：2
> 
> 时间：2012-10-06T06:42:36.787
> 
> 标签：android, android-layout, android-custom-view

目前我开始支持一个项目，在那里我发现了一个非常有趣的技巧。它提供了一个机会，不要在 xml 中为 CustomView 编写完整的类名，我认为它看起来很脏。

以下是此技巧实现的步骤：

1）在我们的项目中创建我们自己的`android.view`包。

2）创建`CustomTextView extends TextView`并放入`android.view`包中。

3) 像任何其他 Android 一样在 XML 中使用它`view`

```
 <CustomTextView
  android:angle="90"
  android:endColor="#efa600"
  android:paddingLeft="0dp"
  android:startColor="#ffe396"
  android:text=""
  android:textSize="24dp"
  android:textStyle="bold" /> 
```

4) 使用标准的 Android 属性而不是 custom ：

```
public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    int[] ids = new int[attrs.getAttributeCount()];
    for (int i = 0; i < attrs.getAttributeCount(); i++) {
        ids[i] = attrs.getAttributeNameResource(i);
    }

    TypedArray a = context.obtainStyledAttributes(attrs, ids, defStyle, 0);

    for (int i = 0; i < attrs.getAttributeCount(); i++) {
        String attrName = attrs.getAttributeName(i);
        if (attrName == null)
            continue;

        if (attrName.equals("startColor")) {
            mStartColor = a.getColor(i, -1);
        } else if (attrName.equals("endColor")) {
            mEndColor = a.getColor(i, -1);
        } else if (attrName.equals("angle")) {
            mAngle = a.getFloat(i, 0);
        }
    }
    a.recycle();
} 
```

这种方式是否安全或可能会导致任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:08:50.533

虽然可以做到，但我建议使用您自己的样式。

我不确定如果将来将它们删除会发生什么，如果它们会被 Inflater 忽略，因为它们不是有效的样式。

至少可以说只使用自定义样式会让您放心。

更不用说更清洁的代码了。

# plot - 从数据文件绘制 3D 曲线

> ID：12757430
> 
> 赞同：2
> 
> 时间：2012-10-06T06:43:22.663
> 
> 标签：plot, gnuplot

我有以下格式的数据文件：

```
1,00000 2,00000 3,00000
1,37864 1,83839 2,90917
1,71932 1,75834 2,77034
2,03327 1,75821 2,58788
2,32958 1,83535 2,36475
2,61380 1,98720 2,10290
2,88682 2,21109 1,80385
3,14388 2,50283 1,46933
3,37385 2,85424 1,10207
3,55891 3,25003 0,70675
3,67565 3,66464 0,29077
3,69810 4,06096 -0,13516
3,60327 4,39280 -0,55697
3,37826 4,61289 -0,95808
3,02656 4,68499 -1,32117
2,57023 4,59570 -1,63053
2,04607 4,35956 -1,87439
1,49686 4,01436 -2,04634
0,96171 3,60912 -2,14556
0,46928 3,19100 -2,17583
... 
```

也就是说，每条线上都有一个 3 维点。

我想将这些点绘制为 3D 空间中的曲线，因此这些点将从第一个点开始用直线一个接一个地连接起来。

但是，以下 gnuplot 程序不起作用：

```
set xrange [-5:5]
set yrange [-5:5]
set ticslevel 0
splot "data.dat" u 1:2:3 with lines 
```

它给出了非常奇怪的结果： ![阴谋](../Images/66b6cb290fa2b5fa68ada42619eae3e7.png)

出于某种原因，看起来 gnuplot 用积分点近似我的所有数据。

我认为这可能是我的数据确实给出了这张图片，但是，当我要求 gnuplot 只绘制点而不是线时，它仍然只绘制积分点，即上图中线条的关节。

为什么会这样？我不能强迫谷歌给我一个答案。看起来没有人对在 3D 空间中绘制曲线感兴趣 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:17:25.947

您应该在 data.dat 文件中将 coma 替换为一个点。小数分隔符是大多数操作系统中区域设置的主题。例如，俄罗斯地区是昏迷，美国和英国是点。

在 Linux 上，可以使用`locale`实用程序检查区域设置

```
locale -k LC_NUMERIC
decimal_point="."
thousands_sep=","
grouping=3;3
numeric-decimal-point-wc=46
numeric-thousands-sep-wc=44
numeric-codeset="UTF-8" 
```

在类 Unix 系统上进行转换的一种可能性是`sed`用于就地修改文件

```
sed -i "s/,/./g" data.dat 
```

# java - 比较两个界面的Eclipse工具

> ID：12757431
> 
> 赞同：0
> 
> 时间：2012-10-06T06:43:28.857
> 
> 标签：java, eclipse

对于方法参数，我必须在两个复杂的接口之间进行选择：`InterfaceParent`和`InterfaceChild`.

接口`InterfaceChild`扩展了接口`InterfaceParent`，其中一个将成为`methodX`'s 签名的一部分，这取决于我觉得哪个接口更合适。

根据定义，`InterfaceParent`并`InterfaceChild`共享许多方法，因此仅通过查看源文件来比较它们是很困难的。这是我遇到的问题。

**如何使用 Eclipse 快速比较和查看两个界面之间的差异？**

* * *

*如果以上描述足够，请阅读更多说明性场景或立即停止阅读：*

将接口`java.util.Collection<E>`视为`InterfaceParent`，将接口`java.util.List<E>`视为`InterfaceChild`。想象一下，我必须在它们之间做出选择。

这种情况与我的情况相似，因为`List<E>`扩展`Collection<E>`，因此接口共享许多方法。

尝试查看这两个接口的源文件：两个文件都有所有方法的“存根”，因此通过将两个代码编辑器并排放置，很难一目了然地比较它们。

`Collection<E>`并且`List<E>`相比之下是小型接口，所以我的问题甚至比这更大，但为了简单起见，让我们继续使用我们的示例`Collection<E>`。`List<E>`

我希望我可以使用我的 IDE (Eclipse) 来向我展示这些接口的差异，或者使用命令行工具来输出两者的方法签名。

使用命令行工具，我可以将输出转储到文本文件，对文件进行排序并运行 diff 工具来查看差异，隐藏常用方法。

在示例中，我可以快速找出哪些方法定义在`List<E>`哪些方法上没有定义，并根据这种差异`Collection<E>`选择一个接口或另一个接口。`methodX`

我不知道有任何工具对 Java 对象执行这种“反射”，以便可以将完全限定的类名传递给它们并获得公共接口定义输出流。如果有的话请告诉我。

显然，使用命令行工具执行此操作会在一段时间后变得乏味，所以我想知道：Eclipse 中是否有类似的东西？大纲功能非常适合对一个类型进行一目了然的概述，但我可以比较两个大纲吗？“代码折叠”功能非常适合将源文件简化为“方法名称”，但是没有什么可以隐藏两个接口之间的常用方法并显示差异？

在不离开 Eclipse 的情况下，您将如何去做这种事情？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T07:16:55.607

选择两个接口并右键单击它们选择比较-->彼此

![比较彼此](../Images/91f37e92544129bb2810e29695f7ad6c.png)

[图片来源](http://www.javalobby.org/java/forums/t19700.html)

# jquery-mobile - Jquery Mobile 重叠列表视图错误？

> ID：12757433
> 
> 赞同：0
> 
> 时间：2012-10-06T06:43:44.290
> 
> 标签：jquery-mobile

如何正确编写标签以使列表视图之后的元素不与列表视图重叠？

代码片段：

```
<div data-role="content">
    This test is wrongly hidden            
    <div>
        <ul data-role="listview">
            <li><a href="acura.html">Acura</a></li>
            <li><a href="audi.html">Audi</a></li>
            <li><a href="bmw.html">BMW</a></li>
        </ul>
    </div>

    <button>Why is this button overlapping the listview above?</button>        
</div> 
```

[JsFiddle 演示](http://jsfiddle.net/arvinboggs/Stdzs/7/)

我希望这不是一个 jQuery Mobile 错误。

提前感谢您的帮助。

# c - 在 c 编程中映射文件

> ID：12757435
> 
> 赞同：0
> 
> 时间：2012-10-06T06:43:50.467
> 
> 标签：c, file-io

我在某处读到，当常规的 c/c++ 应用程序需要访问文件时，通常会将文件的内容放在进程内存中并使用内存操作读取或修改它。这称为内存映射或仅映射文件。

这是否意味着我需要将数据复制到（片上）缓冲区中，并根据需要修改内容，然后将其写回文件中？是否有特定的功能来实现这一点？

有人可以指向我详细描述此内容的链接吗？问题是单词记忆映射太宽泛，我找不到确切的信息。

我正在使用 Windows-7，Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:51:24.653

不需要从文件中复制数据。内存映射文件意味着，您用来“打开”文件的函数会为您提供一个包含该文件内容的缓冲区。这个缓冲区不是复制文件内容的 RAM 内存，而是一个虚拟内存，其访问直接映射到磁盘上的文件。我不知道它在 Windows 中是如何工作的，但这就是 mmap() 调用在 linux 中所做的。当您修改该缓冲区并关闭文件时，磁盘上的内容会自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:53:10.920

不，不是那个意思。你所描述的将是不好的做法。**非常糟糕的做法。**相反，内存映射意味着操作系统创建一个特殊的指针，它知道它对应于一个文件，然后每当该指针作为数组访问时，操作系统，而不是写入内存（或者可能实际上也写入内存)，它就地修改磁盘上文件的内容。如果您的系统符合 POSIX，您可以使用该`mmap()`函数将文件映射到内存区域/指针：

```
int fd = open("/path/to/file.ext", O_RDWR);
struct stat st;
fstat(fd, &st);
uint8_t *byte_ptr = mmap(NULL, st.st_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);

// read a byte from the file
uint8_t byte = byte_ptr[12];
// increment it
byte++;
// and write it back
byte_ptr[12] = byte;

close(fd); 
```

# java - 如何修复此错误：找不到符号 - 方法 setText(java.lang.String)

> ID：12757440
> 
> 赞同：0
> 
> 时间：2012-10-06T06:44:39.617
> 
> 标签：java, methods

我正在使用 java PL 制作座位监控系统。我的 ComputerSeats 类中有这个方法：

```
public void occupySeat()
{
    seatOccupied[station-1] = true;
    mtr.showArrayIdVal().setText(stud.showField().getText());
    seat[station-1].setBackground(Color.red);
    occupiedSeatCounter++;
} 
```

ShowArrayIdVal 包含一个`Jlabel[] object`，这个标签的值为“Vacant Station”，我曾经`setText(stud.showField().getText())`将“Vacant Station”更改为我使用输入的值`JTextField`。但是，每当我编译它时，它都会包含一个错误，指出它找不到`settext()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T06:51:13.837

如果没有堆栈跟踪和更多代码，无法准确判断，但我的猜测是 mtr.showArrayIdVal() 不会返回 JLabel 实例。

如果 mtr.showArrayIdVal() 返回 JLabel[] （JLabel 对象数组），您应该调用它

```
mtr.showArrayIdVal()[i].setText(stud.showField().getText()) 
```

其中 i 是整数并且编译将通过 - 当然您必须声明并初始化 i。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:49:01.940

如果 `mtr.showArrayIdVal()`返回一个`JLabel`对象，您的代码应该可以正常工作。

我认为这`mtr.showarrayidval()`是返回`array of Jlable objects`。所以，你应该得到对象`index`然后调用`setText(...)`.

```
 for(JLable jl: mtr.showArrayIdVal()) {
        jl.setText(..)// do what ever you are setting here.
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:46:32.650

采用`mtr.showArrayIdVal()[0].setText(stud.showField().getText());`

清单的情况

采用`mtr.showArrayIdVal().get(0).setText(stud.showField().getText());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T06:56:38.440

> ShowArrayIdVal 包含一个 Jlabel[] 对象，该标签的值为“Vacant Station”

正如你所说的，它`showArrayIdVal`包含`JLabel[]`数组......所以，你不能`setText()`在数组上调用......

相反，您可以遍历返回的数组，并`setText`在各个标签上调用..

```
for(JLabel label: mtr.showArrayIdVal()) {
     label.setText("Your text");
} 
```

# batch-file - 批处理文件连续按回车键

> ID：12757446
> 
> 赞同：-2
> 
> 时间：2012-10-06T06:45:36.277
> 
> 标签：batch-file, key, enter

我需要一个可以一遍又一遍地连续按回车键的批处理文件。老实说，我不知道关于批处理文件的第一件事，但我很确定这是可以做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:37:30.230

看看[SendKey.NET](http://sendkeysnet.blogspot.ca/2009/06/finally-keyboard-macro-you-can.html)免费软件自动化工具：

```
@echo off
start notepad.exe
SendKeys Hello World!{enter} 
```

[AutoIt](http://www.autoitscript.com/site/autoit/)自动化和脚本语言也可能有所帮助，它可以模拟击键。

# iphone - 如何使用 SLRequest 在 iOS 6 中集成 Facebook？

> ID：12757449
> 
> 赞同：21
> 
> 时间：2012-10-06T06:46:10.357
> 
> 标签：iphone, facebook, ios6

我一直在寻找如何使用 SLRequests 将 Facebook 集成到 iOS6 中。经过一番研究，我能够做到。这是一些代码片段，显示了它是如何完成的。

```
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    __block ACAccount *facebookAccount = nil;

    ACAccountType *facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    // Specify App ID and permissions
    NSDictionary *options = @{
    ACFacebookAppIdKey: @"012345678912345",
    ACFacebookPermissionsKey: @[@"publish_stream", @"publish_actions"],
    ACFacebookAudienceKey: ACFacebookAudienceFriends
    };

    [accountStore requestAccessToAccountsWithType:facebookAccountType
        options:options completion:^(BOOL granted, NSError *e) 
        {
            if (granted)
            {
                NSArray *accounts = [accountStore accountsWithAccountType:facebookAccountType];

                facebookAccount = [accounts lastObject];
             }
             else
             {
              // Handle Failure
             }
         }];

    NSDictionary *parameters = @{@"message": @"My first iOS 6 Facebook posting "};

    NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

    SLRequest *feedRequest = [SLRequest 
                              requestForServiceType:SLServiceTypeFacebook
                              requestMethod:SLRequestMethodPOST 
                              URL:feedURL 
                              parameters:parameters];

    feedRequest.account = facebookAccount;

    [feedRequest performRequestWithHandler:^(NSData *responseData, 
                                             NSHTTPURLResponse *urlResponse, NSError *error)
     {
         // Handle response
     }];
} 
```

我希望这可以帮助别人。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-12T20:02:42.120

我有一篇关于如何使用 SLRequest 的文章。

```
-(IBAction)postMessage:(id)sender
{
    // Create the URL to the end point
    NSURL *postURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

    NSString *link = @"http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html%23//apple_ref/doc/uid/TP40012233";
    NSString *message = @"Testing Social Framework";
    NSString *picture = @"http://www.stuarticus.com/wp-content/uploads/2012/08/SDKsmall.png";
    NSString *name = @"Social Framework";
    NSString *caption = @"Reference Documentation";
    NSString *description = @"The Social framework lets you integrate your app with supported social networking services. On iOS and OS X, this framework provides a template for creating HTTP requests. On iOS only, the Social framework provides a generalized interface for posting requests on behalf of the user.";

    NSDictionary *postDict = @{
    @"link": link,
    @"message" : message,
    @"picture" : picture,
    @"name" : name,
    @"caption" : caption,
    @"description" : description
    };

    SLRequest *postToMyWall = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST URL:postURL parameters:postDict];

    FacebookAccountManager* sharedManager = [FacebookAccountManager sharedAccount];
    [postToMyWall setAccount:sharedManager.facebookAccount];

    [postToMyWall performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
    {
        if (error) {
            // If there is an error we populate the error string with error
            _errorString = [NSString stringWithFormat:@"%@", [error localizedDescription]];

            // We then perform the UI update on the main thread. All UI updates must be completed on the main thread.
            [self performSelectorOnMainThread:@selector(updateErrorString) withObject:nil waitUntilDone:NO];
        }

        else
        {
            NSLog(@"Post successful");
            NSString *dataString = [[NSString alloc] initWithData:responseData encoding:NSStringEncodingConversionAllowLossy];
            NSLog(@"Response Data: %@", dataString);
        }
     }];
} 
```

此处提供完整的帖子和应用程序下载：[https ://github.com/stuarticus/SocialFrameworkReference](https://github.com/stuarticus/SocialFrameworkReference)

# windows-phone-7 - wp7中的持久全局变量

> ID：12757452
> 
> 赞同：0
> 
> 时间：2012-10-06T06:46:40.030
> 
> 标签：windows-phone-7, global-variables

当我的应用程序第一次启动时，我被声明为一个静态变量，在该变量中我存储了一些值，但是当我停止应用程序并再次打开应用程序时，我无法再次访问该变量值。您能告诉我重新打开应用程序后如何访问该变量的值吗？或者我应该在哪里保存该变量？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:04:42.743

如果要持久化变量值，则需要将其保存在独立存储中，以便每次打开应用程序时都可以读取它。应用退出后，静态变量将不再存在。您可以将其保存为独立存储中的文本或 XML 文件

你可以在这里阅读更多关于它的信息[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402541(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402541(v=vs.92).aspx)

# java - 网络游戏的Java多线程套接字编程

> ID：12757457
> 
> 赞同：0
> 
> 时间：2012-10-06T06:47:46.857
> 
> 标签：java, multithreading, sockets, serversocket

我是java多线程的新手。实际上，我想通过使用 Socket 编程在局域网上的 java 上制作两人游戏。我只希望当两个玩家都连接到服务器之后，游戏才会开始。我的 GameServer 基本上是使用线程。当客户端连接到服务器时谁创建线程。我的逻辑是，当一个客户端与服务器建立连接后，该线程将等到第二个线程建立连接。当第二个线程成功建立连接时。然后两个线程都将生效并开始工作。这是我的 GameServer 逻辑的连接部分。

```
for(int i = 0; i <= 1; i++) {
    connectionSocket = welcomeSocket.accept();
    System.out.println("Connection has been accepted");
    no++;              
} 
```

但是这段代码在逻辑上是行不通的。请问有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:07:04.997

你的服务器每次运行只支持一场比赛——你启动服务器，玩家连接，玩游戏，如果要开始另一场游戏，你必须杀死服务器并重新启动——因为 for 循环的编写方式。

```
while(true) {
    playerOneSocket = welcomeSocket.accept(); // 1
    playerTwoSocket = welcomeSocket.accept(); // 2
    startNewMatch(playerOneSocket,playerTwoSocket);
}

public void startNewMatch(final Socket pOne, final Socket pTwo) {
    new Thread(new Runnable() {
        @Overrride
        public void run() {
            // pOne, pTwo variables visible here       
        }
      }).start();
} 
```

（任何）服务器必须始终可以自由地接受新请求，这就是为什么您在处理单个匹配逻辑的新线程中传递两个套接字的原因。startNewMatch 函数的参数已设置为 final，以便在 run 方法中看到，但您可能希望创建一个扩展 Thread 的新类并将它们传递给构造函数。希望有帮助。

编辑：

while 循环在您的主线程中运行，例如在内部：

```
public static void main(String[] args) 
```

函数，并且您在每场比赛中启动*一个新线程。*您不希望每个玩家都在自己的线程中，因为~~这会浪费资源~~（请参阅 EDIT^3）并且编写这样的代码会更加繁重*。*看看下面的教程[1](http://www.tutorialspoint.com/java/java_multithreading.htm) , [2](http://javamex.com/tutorials/threads/) , [3](http://www.javabeginner.com/learn-java/java-threads-tutorial)

编辑^2：

“但我的困惑是服务器如何知道现在playerone正在通信以及玩家2何时通信......Bcz服务器对两个客户端都有相同的套接字。”

不，服务器总是在给定的端口上监听，并且每个请求都通过 accept 方法获得一个新的连接（端口）。

java API doc 是你最好的朋友——专门针对[ServerSocket 接受](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#accept%28%29)它说：

> 侦听要与此套接字建立的连接并接受它。该方法阻塞，直到建立连接

那么，当

```
playerOneSocket = welcomeSocket.accept(); 
```

执行时，在 playerOneSocket 变量中，您已经建立了到播放器的“连接”（在服务器和播放器都知道的*其他*端口上），并且服务器可以接受同一端口上的另一个连接 - 第二个也是如此播放器。例如 1345 是您的游戏端口：

> P1：连接@服务器：1345
> *接受方法开始 - 第 1 行*
> 服务器：让我们在端口 9999 见面
> P1：连接@服务器：9999
> 服务器：确定已连接
> *接受方法结束 - 第 1 行*
> P2：连接@服务器：1345
> *接受方法开始 - 第 2 行*
> 服务器：让我们在端口 10000 见面
> P2：连接@服务器：10000
> 服务器：确定已连接
> *接受方法结束 - 第 2 行*

编辑^3：

我建议你这样做：首先，让它在每场比赛中使用一个线程，然后移动到每个玩家一个线程（如 Tudor 所示） - 游戏将在更大的网络延迟（例如通过 Internet）上响应更快。为了每个播放器模型执行一个线程，您需要了解良好的线程和线程通信 - 请参阅[本教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:23:00.947

我想你的意思是这样的？

```
class Player implements Runnable {

     private Socket socket;

     public Player(Socket socket) {
         this.socket = socket;
     }

     public void run() {
     }
}

List<Socket> players = new ArrayList<Socket>();
// accept two connections
for(int i = 0; i <= 1; i++)
{
     Socket playerSocket = welcomeSocket.accept();
     players.add(playerSocket);
}

// start one thread per connection
for(Socket socket: players) {
     new Thread(new Player(socket)).start();         
} 
```

# c# - 根据 XML 中先前的组合框选择填充组合框

> ID：12757461
> 
> 赞同：2
> 
> 时间：2012-10-06T06:48:11.083
> 
> 标签：c#, xml, winforms, c#-4.0, combobox

我是.net 初学者。我正在读取一个[XML 文件](http://ideone.com/OnpgJ)并将其显示在两个组合框中，即`cbProduct`。`cbBrandName`

我需要`cbBrandName`在`cbProduct`.

我实现了以下代码：

```
DataSet ds = new DataSet();
ds.ReadXml(@"..\..\stock.xml");

cbProduct.DataSource = ds.Tables[0].DefaultView.ToTable(true, "productname");
cbProduct.DisplayMember = "productname";

cbBrandName.DataSource = ds.Tables[0].DefaultView.ToTable(true, "brandname");
cbBrandName.DisplayMember = "brandname"; 
```

上面的代码显示了`cbBrandName`. 如何使其仅显示链接到 .xml 文件中选定的“产品名称”列的文本值`cbProduct`。

请帮忙。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:36:45.600

在**LINQ2XML 中**

```
XElement doc=XElement.Load(@"..\..\stock.xml");

//put this code in the form_load event
cbProduct.Items.AddRange(doc.Descendants("items").Select(x=>x.Element("productname").Value).ToArray<string>());//adds all products

//put this code in the SelectedIndexChanged event of cbProduct
string product2Search=cbProduct.SelectedItem.ToString();//selected value of cbProduct
cbBrandNamedoc.Items.Clear(); //clears all items in cbBrandNamedoc
cbBrandNamedoc.Items.AddRange(doc.Descendants("items").Where(x=>x.Element("productname").Value==product2Search).Select(y=>y.Element("brandname").Value).ToArray<string>()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T08:06:43.033

LINQ 看起来比实际要可怕得多。Anirudha 的回答中使用了两点，我将尝试解释。第一个是`.Select(x=>`。这意味着“对于列表中的每一件事，用某物替换它”。x 代表列表中的每个项目。

例如：

```
new string[]{"a", "b", "c"}.Select(x=>x.ToUpper()); 
```

将 {"a", "b", "c"} 的数组转换为 {"A", "B", "C"} 的数组。它只是说“把列表中的每一件事都拿走，然后用你通过调用它得到的任何东西来替换`ToUpper()`它。

LINQ 的另一部分是`.Where(x=>`. 那只是说“给我一个较小的列表，其中仅包含此陈述正确的内容”。所以

```
new string[]{"a", "b", "c"}.Where(x=>x == "a"); 
```

会给你一个 {"a"} 的列表。替换`x == "a"`为`x != "b"`会给你一个 {"a", "c"} 的列表。所以在第二段代码中，你说“在我用产品名称替换每个项目之前，我想过滤掉任何与我想要匹配的内容不匹配的内容。然后我转换剩下的内容。 "

* * *

要将这些应用到代码示例中，我将重新格式化这些行并对其进行注释。

```
// To set the first combo box:
cbProduct.Items.AddRange( // Add everything we produce from this to the cbProduct list
    doc.Descendants("items") // For each thing that represents an "items" tag and it's subtags
    .Select(x=>x.Element("productname").Value) // Transform it by getting the "productname" element and reading it's Value.
    .ToArray<string>()); // Then convert that into a string[].

// To set the second combo box:
string product2Search=cbProduct.SelectedItem.ToString();// get the currently selected value of cbProduct.
cbBrandName.Items.Clear(); //clears all items in cbBrandNamedoc
cbBrandName.Items.AddRange( // Add everything we produce from this to the cbBrandName list
  doc.Descendants("items") // For each thing that represents an "items" tag and it's subtags
  .Where(x=>x.Element("productname").Value==product2Search) // Filter our list to only those things where the productname matches what's currently selected in cbProduct (which we just stored)
  .Select(y=>y.Element("brandname").Value) // Transform it by getting the "brandname" element and reading it's Value.
  .ToArray<string>()); // Then convert that into a string[] 
```

这有帮助吗？当我自己编写代码时，我喜欢通过将长 LINQ 语句放在单独的行上来拆分它们，就像这样，然后我可以读下这些行：“我得到一个列表，如果这是真的，然后选择这个基于放在上面，然后把它变成一个 ARRAY。”

# php - 如何确定是否使用了ajax？

> ID：12757464
> 
> 赞同：-1
> 
> 时间：2012-10-06T06:48:15.013
> 
> 标签：php, jquery, ajax

> **可能重复：**
> [在 PHP 中检测 Ajax 并确保请求来自我自己的网站](https://stackoverflow.com/questions/1953954/detecting-ajax-in-php-and-making-sure-request-was-from-my-own-website)

我有一个上传图片的表格，我正在使用`Ajaxform()`

```
$('#uploadformimage').ajaxForm({

    beforeSend: function() {
         $(".progress").css("display","block");
         $("#response").html("");
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
        //console.log(percentVal, position, total);
    },
    complete: function(xhr) {
            $(".bar").css("width","100%");
            $(".percent").html("100%").delay("8000").parent().slideUp(1000);
            $("#response").html(xhr.responseText);

    }
}); 
```

这是我的 javascript 代码。我想`server-side`知道表单是否由 ajax 上传？Javascript 可能在某些计算机上被禁用，所以我想显示一些不同的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:57:13.887

```
if ($_SERVER['HTTP_X_REQUESTED_WITH'] === 'XMLHttpRequest')
{
    // This is an AJAX request
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:00:58.790

我建立了一个演示，这是结果

```
Request URL:http://localhost/test.php
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:32
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Host:localhost
Origin:http://localhost
Referer:http://localhost/
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11
X-Requested-With:XMLHttpRequest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T08:16:26.013

您可以使用`<noscript>`HTML 中的标记生成不同的 HTML，以便表单可以发布到不同的服务器端脚本或向表单添加隐藏字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T07:10:37.163

让我们假设不涉及 AJAX。

Javascript/AJAX 所能实现的就是让用户体验优于竞争对手。

那么，当图像由人上传时，您为什么要关心图像。该人可能没有Javascript，

只需追求最低限度并添加花里胡哨！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T06:53:33.857

你可以通过一个选项`GET /foo?xhr=1`

然后在 PHP`$_GET['xhr']`

# python - 在从 metaclass.__new__ 调用的类方法中调用 `super`

> ID：12757468
> 
> 赞同：8
> 
> 时间：2012-10-06T06:48:41.300
> 
> 标签：python, inheritance, super

我有一个案例，我的类有一个自定义元类，它在创建它时调用该类的类方法，例如：

```
class Metaclass(type):
    def __new__(cls, name, bases, attrs):
        ...
        new_class = super(Metaclass, cls).__new__(cls, name, bases, attrs)
        ...
        new_class.get_fields() # do something
        ...
        return new_class

class FooBar(object):
    __metaclass__ = Metaclass

    @classmethod
    def get_fields(cls):
        ... 
```

（此类代码的示例在[Tastypie](https://github.com/toastdriven/django-tastypie)中。）

问题是如果我想做：

```
class NewBar(FooBar):
    @classmethod
    def get_fields(cls):
        super(NewBar, cls).get_fields()
        ... 
```

这不起作用，因为`NewBar`在调用点尚未创建`super`（程序流仍在元类中）。那么，有什么解决方法吗？

我知道`get_fields`方法可能会成为元类的方法，但这会使继承更难实现（您必须同时定义新的元类和类本身，这对想要扩展这些类的开发人员不利）。

（Python 2.7。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:30:42.013

如果`NewBar`可以在`get_fields`被调用时不可用，您仍然可以在 MRO 中找到它`cls`：

```
@classmethod
def get_fields(cls):
    # we can get invoked before NewBar is available in globals,
    # so get NewBar from cls.__mro__
    NewBar = next(c for c in cls.__mro__
                  if c.__module__ == __name__ and c.__name__ == 'NewBar')
    super(NewBar, cls).get_fields()
    ... 
```

尽管此代码看起来很有趣，但它可以正常工作并且比问题中提出的替代方案要简单得多。虽然大多数`super`使用非常量第一个参数（例如 unqualified `super(cls, cls)`）的调用都是不正确的并且会破坏继承，但这个调用是安全的，因为生成器表达式只不过是获取`NewBar`.

在 MRO 中查找 clas 时，我们会检查类和模块名称（如 Mitar 所指出的那样可用`__name__`）[以](https://stackoverflow.com/questions/12757468/calling-class-method-from-metaclass-and-inheritance/12757752#comment17251140_12757752)避免误报，如果`othermodule.NewBar`继承自`thismodule.NewBar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:09:37.720

根据@user4815162342 的回答，我找到了更简单的解决方案：

```
try:
    super(NewBar, cls).get_fields()
except NameError, e:
    if 'NewBar' in str(e):
        super(cls, cls).get_fields()
    else:
        raise 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T08:38:40.310

我知道这个问题是 python 2.7 特有的，但是，对于那些使用 python 3.6 的人，你可以简单地调用`super()`.

```
class NewBar(FooBar):
    @classmethod
    def get_fields(cls):
        super().get_fields()
        ... 
```

# ruby-on-rails - 为什么在 ruby -on-rails 中默认选择端口 3000

> ID：12757469
> 
> 赞同：4
> 
> 时间：2012-10-06T06:48:44.390
> 
> 标签：ruby-on-rails

如果我单独指定端口号，则指定的端口号工作。

**rails s -p 3005** 现在可以使用 localhost:3005

但是当我使用 - **rails s** - 它以 localhost:3000 运行。

为什么 ruby​​-on-rails 选择默认端口是**3000**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T06:58:05.640

哪个端口实际上并不重要（只要它高于 1024（以下是特权端口，您必须是 root 才能使用它们）。

如果您不喜欢 3000 端口，您可以更改它 [如何在开发中更改 Rails 3 服务器默认端口？](https://stackoverflow.com/questions/3842818/how-to-change-rails-3-server-default-port-in-develoment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:37:29.087

Rails 服务器有几个[默认选项](https://github.com/rails/rails/blob/master/railties/lib/rails/commands/server.rb#L106-116)，其中之一是端口 3000。如果您没有明确设置这些设置之一，它将使用那里定义的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T07:06:34.947

**临时解决方案：** /> *rails server -p 8080*

**------完整的解决方案**

*打开' /config/boot.rb* '下的rails应用程序添加代码

```
需要'rails/commands/server'
    模块导轨
        类服务器
            别名 :default_options_alias :default_options
            def default_options
                default_options_alias.merge!(:Port => 8080)
            结尾   
    结尾
结尾

```

**在每次启动服务器时添加上述代码后，它将在端口：8080 上启动。**

# objective-c - 如何在 UItableview 中更改行单元格的大小

> ID：12757475
> 
> 赞同：2
> 
> 时间：2012-10-06T06:49:19.900
> 
> 标签：objective-c, xcode, cocoa-touch, ios5, ios4

我是 iPhone 应用程序开发的新手，我目前正在做一个示例表视图项目。如何更改行单元格的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T07:24:48.773

使用`heightForRowAtIndexPath`委托方法[`UITableViewController`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewController_Class/Reference/Reference.html)

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (Dynamic) 
    {
        //calculate dynamic height and return from here;
        return dynamicheight;
    }
    else
        return fixedheight; //Return fixed height from here e.g. 40
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T11:44:05.817

将此用于高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch (indexPath.row)
    {
        case 0:
            return 10;
            break;

        case 1:
            return 245;
            break;

        case 2:
            return 60;
            break;

        case 3:
            return 120;
            break;

        case 4:
            return 60;
            break;

        case 5:
            return 76;
            break;

        case 6:
            return 60;
            break;

        case 7:
            return 120;
            break;

        case 8:
            return 60;
            break;

        case 9:
            return 76;
            break;

        case 10:
            return 60;
            break;

        case 11:
            return 76;
            break;

        case 12:
            return 60;
            break;

        case 13:
            return 76;
            break;

        default:
            return 44;
            break;
    }
} 
```

# algorithm - 如何通过添加最小边数来增加图中最小切的大小

> ID：12757476
> 
> 赞同：3
> 
> 时间：2012-10-06T06:49:21.440
> 
> 标签：algorithm, graph, graph-theory, graph-algorithm

问题：给定一棵树 T = (V,E) 。添加最小数量的边，以便即使从新创建的图形中删除一条边，仍然有从任何顶点到任何其他顶点的路径。

我相信问题可以简化为将图的最小切割的大小从当前的最小切割 1 增加到 2。但是这样做的有效算法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:14:18.450

这是算法，可以解决任何无向图的这个问题。经过一些简化后，它可以应用于树（不需要第 1 步）。

1.  使用 DFS 或[Robert Tarjan 的 Bridge-finding 算法](http://en.wikipedia.org/wiki/Bridge_%28graph_theory%29#Bridge-finding_algorithm)查找图中的所有桥梁。
2.  创建一个图（实际上，它是一棵树），其中每个无桥子图都替换为单个顶点。
3.  将树中的每条链折叠成一条边。
4.  在两片叶子之间找到一条路径（如果可能，长度至少为 3）。
5.  在原图的子图中选取任意两个顶点，对应于这条路径的两端，并将它们连接起来。
6.  将此路径折叠成一个顶点。
7.  当树中有多个顶点时，从第 3 步开始重复。

第 4 步保证在第 6 步之后我们不会得到一个新的不需要的叶子，这是优化的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:20:08.760

Evgeny 的解决方案非常好，但这里有一个更简单的解决方案，适用于 Trees，其正确性很容易看出。

让我们`L`成为树的（原始）叶子`T`。设`n`是树中的任何节点，使得通过删除获得的每个子树`n`最多具有`|L|/2`原始叶子。请注意，总是可以找到这样的节点`n`。

令`T`[1] , `T`[2] , .. , `T`[k]为移除 得到的子树`n`。每个原始叶子 (in `L`) 都存在于其中一个`T`[i]中。从原始叶子构造最大不相交对，约束条件是任何对中的两个原始叶子属于不同的子树。（这在概念上与在完整的 k 部分图中构建最大匹配相同，其部分是子树中存在的原始叶子）。

如果`|L|`是偶数，那么每个原始叶子都将出现在某个对中，并且添加与这些对中的每一个相对应的边将使结果图 2 连通。所以在这种情况下我们需要添加`|L|/2`边。

如果`|L|`是奇数，则一个原始叶子不会配对，因此我们可以将此叶子连接到存在于不同子树中的任意原始叶子。在这种情况下，我们需要添加`(|L|+1)/2`边。

# android - Android CompoundButton Switch jumpDrawablesToCurrentState null 崩溃

> ID：12757478
> 
> 赞同：3
> 
> 时间：2012-10-06T06:49:44.803
> 
> 标签：android, togglebutton, android-4.2-jelly-bean

我有一个成功使用的应用程序`ToggleButton`。我正在转换应用程序以在 JELLY BEAN (4.1.1) 上使用。4.1.1 有`Switch`小部件，这是一个更好看的`ToggleButton`小部件。这两个小部件都派生自`CompoundButton`.

Android的比较文档在这里：

[http://developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)

它说：

> ToggleButton 和 Switch 控件是 CompoundButton 的子类，并且功能相同，因此您可以以相同的方式实现它们的行为。

所以我所做的是获取包含`ToggleButton`s 的活动布局文件，将其复制到目录并替换`res/layout-v14/`所有实例。这意味着Android 14及以上版本将使用布局文件，14以下将使用布局文件。除了小部件名称之外，每个 XML 都是相同的。`ToggleButton``Switch``Switch``ToggleButton`

```
<Switch
 android:id="@+id/settings_some_option_on_off"
 android:textOn="@string/settings_toggle_on"
 android:textOff="@string/settings_toggle_off"
 android:gravity="center"
 android:paddingRight="@dimen/size_padding_minor"
 android:layout_weight="1"
 android:layout_gravity="center"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"/> 
```

在我的 .java 代码中，我`CompoundButton`只使用。不使用`ToggleButton`或`Switch`根本不使用。

```
private CompoundButton mViewSomeOptionOnOff;
...
mViewSomeOptionOnOff = (CompoundButton) findViewById(R.id.settings_some_option_on_off);
etc. 
```

当我在 < 14 上运行时，效果很好。和之前一样。我得到`ToggeButton`. 当我在 14 上运行时，我在 Android 小部件框架中遇到了 null 崩溃。

我下载了安卓源。从崩溃回溯中，我确切地知道崩溃在哪里。开关.java：

```
808     @Override
809     public void jumpDrawablesToCurrentState() {
810         super.jumpDrawablesToCurrentState();
811         mThumbDrawable.jumpToCurrentState();    <------ boom
812         mTrackDrawable.jumpToCurrentState();
813     } 
```

`thumb`是 的新属性`Switch`。即便如此，我也不应该定义它，对吧？它没有被列为强制属性。

就像测试一样，回到我的 -v14 布局中，我设置`android:thumb`为可绘制对象。然后我在第 812 行点击了 null `track`，. 我设置`android:track`为可绘制对象，崩溃消失了。发生什么了？

为什么我会遇到空崩溃？

我是否需要找到默认值`Track`和`Thumb`可绘制对象，并将它们复制到我的应用程序中？

我正在尝试做的事情——使用 ToggleButton 和 Switch——不可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:26:20.877

确保您的 minSdkVersion 在 AndroidManifest.xml 上为 14

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T12:55:26.190

我也遇到了这个错误，并通过为 api 14 及更高版本设置主题来解决它 - 正如 nandeesh 评论的那样。

# css - 媒体查询如何反应

> ID：12757480
> 
> 赞同：0
> 
> 时间：2012-10-06T06:49:54.173
> 
> 标签：css, media-queries

我想知道媒体查询是如何反应的。

例如，我为基本媒体放置了一个尺寸为`1400px`by的图像，为移动设备放置了另一个尺寸为by的图像。`500px``450px``200px`

我使用媒体查询在同一个 html 页面中调用它。当用户在移动设备中打开它时，我想显示小图像。

如果我为同一张图片调用两个 CSS（即根据媒体使用 CSS 更改背景），我的大图片会加载到移动设备中吗？或者它会简单地加载小图像而忽略较大的图像？我把主要的 CSS 放在移动 CSS 之前。我认为必须已加载大图像。如果是这样，那么我的网站将在移动设备上运行缓慢。

你有什么看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:15:51.123

不，大图不会显示在移动设备上，只要您将它插入到排除它的媒体查询中。但如果您以这种方式组织 CSS ，它将被***下载：***

```
/* FIRST DECLARATION:
    BROWSER STARTS DOWNLOADING THE IMAGE */
.my-img-class{
    background:url(my-large-image.jpg);
}

/* SECOND DECLARATION:
    THE RULE ABOVE IS OVERWRITTEN, SO THIS IMAGE WILL BE DOWNLOADED TOO */
@media only screen and (max-width: 600px) {
    .my-img-class{
        background:url(my-small-image.jpg);
    }
} 
```

* * *

为了防止移动设备继续下载大图像，您应该将这两个规则包装到媒体查询中。

这是一个例子。

```
@media only screen and (max-width: 600px) {
    .my-img-class{
        background:url(my-small-image.jpg);
    }
} 
```

上面的代码只会被屏幕**小于 600px**的设备解释。

```
@media screen and (min-width: 601px) {
    .my-img-class{
        background:url(my-large-image.jpg);
    }
} 
```

上面的代码只会被屏幕**大于 600px**的设备解释。

* * *

您可以使用不同的方法来防止下载这两个图像。

很大程度上取决于您网站的目标。如果移动版本使用最广泛，您应该开始计划，然后通过媒体查询逐步添加桌面版本的内容。

* * *

以下是一些您会发现有用的资源：

*   [CSS3 媒体查询教程](http://webdesignerwall.com/tutorials/css3-media-queries)
*   [CSS 媒体查询的有效示例](http://trentrichardson.com/2011/03/11/effective-example-of-css-media-queries/)
*   [CSS 媒体查询和使用可用空间](http://css-tricks.com/css-media-queries/)

# iphone - 将核心数据和图像共享到 iCloud

> ID：12757481
> 
> 赞同：8
> 
> 时间：2012-10-06T06:50:05.967
> 
> 标签：iphone, objective-c, ipad, core-data, icloud

我已经创建了`**Information**`在**Coredata**模型中调用的实体，并且该实体中有三个属性，分别是名称、电子邮件和图像名。

并将所有图像存储在**文档目录**中..页面上有两个按钮。`Synch On iCloud``**Restore Backup**``Settings`

在`Synch On iCloud`Button 上，所有核心数据和图像都应该放在 iCloud 上。

如何同步所有这些.. 我花了 2 天的时间进行研究工作，但没有成功.. 也没有任何指导方针..

当我点击其他设备时`Restore Backup`，**coredata**模型填充了我存储在 iCloud 上的数据以及所有图像。

请帮我解决这个问题..

谢谢，
梅胡尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T10:15:23.580

只需转到此[链接](http://www.touch-code-magazine.com/add-an-icloud-photo-gallery-to-your-app-with-mticloudphotogallery-library/)

并从中下载代码。它会帮助你。您需要设置配置文件权利，并且您需要根据配置文件权利设置应该完美的代码身份

和下载后改变这个

在`MTICloudImagesController.m`文件中查看此语句此 xib 文件未正确声明

```
 MTICloudFileOpenViewController* openFile = [[MTICloudFileOpenViewController alloc] initWithNibName:@"MTICloudFileOpenViewController" bundle:[NSBundle mainBundle]]; 
```

# javascript - 是否可以将javascript数组存储在json中？

> ID：12757482
> 
> 赞同：1
> 
> 时间：2012-10-06T06:50:11.833
> 
> 标签：javascript, jquery, json, dom

> **可能重复：**
> [将 Javascript 数组转换为 JSON](https://stackoverflow.com/questions/2295496/convert-javascript-array-to-json)

我试图弄清楚如何返回一个数组并将其作为字符串存储在 json 变量中，这可能吗？[如果没有，我怎样才能返回所有输出并将其存储为 json？] - 如果你知道我的意思......

```
 //arr = ["a", "b", "c", "d", "ddd"]
    //largest = 3
    var generateEntryCodes = function(arr, largest) {
        var newText = ""
        for(var i=0; i < arr.length; i++) {
            if (arr[i] == null) {
                arr.splice(i, 1);
                i--;
            }
            var counts = arr[i].length != largest ? (parseInt(largest) - parseInt(arr[i].length)) : 0
            for (var z=0; z<counts;z++)
                newText += "0"
            var result = arr[i].splice( 0, 0, newText )
            newText = ""
            result = [{
                "result": result, 
                "total": result.length
            }]
        }
        return result
    } 
```

我尝试将上面的代码输出为：

```
00a
00b
00c
00d
ddd 
```

但是当我闪烁结果json时。我只得到“ddd”...所以我尝试在**result = [{}]** JSON 代码之前添加：

```
$("textarea").val( $("textarea").val("") + result + "\n")
//outputs:
   00a
   00b
   00c
   00d
   ddd 
```

如何从**结果**变量中获取所有输出并将其存储在**JSON**变量中。

**问题：代码仅将最后一个数组存储到 JSON 中。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T06:55:01.317

一般来说，您可以简单地构造您的 JavaScript 对象，然后将其序列化为 JSON，如下例所示：

```
var myArray = ['a','b','c'];
var jsonString = JSON.stringify(myArray); 
```

那应该行得通。请注意，您可能必须包含[JSON2.js](https://github.com/douglascrockford/JSON-js)，以防您的浏览器本身不支持它。

//编辑：
这应该工作：http: [//jsbin.com/welcome/31083/edit](http://jsbin.com/welcome/31083/edit)

这是代码：

```
var generateEntryCodes = function(arr, largest) {
        var newText = "",
            codes = [],
            currentElement,
            result;

        for(var i=0; i < arr.length; i++) {
          currentElement = arr[i];

          var zerosToPrepend = largest - currentElement.length;
          for (var z = 0; z < zerosToPrepend; z++){
                newText += "0"
          }

          currentElement = newText + currentElement;
          codes.push(currentElement);    

          newText = ""
        }

      result = {
        codes: codes,
        total: codes.length
      };

        return result
    }

var result = generateEntryCodes(["a", "b", "c", "d", "ddd"], 3);
console.log(result); 
```

这应该返回一个如下所示的 JavaScript 对象：

```
{"codes": ["00a", "00b", "00c", "00d", "ddd"], "total": 5} 
```

然后，您可以获取该结果`JSON.stringify(...)`并将其转换为 JSON 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:51:46.307

如果您有类似的字符串`aaa bbb ccc`，则首先将其转换为数组

```
var str="aaa bbb ccc ddd";
var n=str.split(" "); 
```

现在可以`JSON.stringify(string)`用来将字符串转换为 json

```
var myjson=JSON.stringify(n); 
```

# iphone - 自定义 Twitter 框架的取消按钮

> ID：12757483
> 
> 赞同：5
> 
> 时间：2012-10-06T06:50:15.917
> 
> 标签：iphone, xcode, ios5

![在此处输入图像描述](../Images/36f5b807bded858c907972d7d9663d51.png)我正在使用 twitter 框架。`UIView`当我们调用`TWTweetComposeViewController`类时，会出现取消和发送按钮。我想更改发送按钮的取消按钮的颜色，但目前它显示灰色。我试图到达子视图，发现取消按钮的类型`UIButtonLabel`是私有类。然而，它是子类，`UILabel`并试图通过使用它的超类`UILabel`和文本是取消的条件来更改颜色。当我尝试`NSLog`使用子视图时，它有时会对其进行 nslogs 记录，但有时不会打印取消按钮的超级视图（即 a `UIButton`）。我已经打印了该按钮的详细信息：

```
 <UIButton: 0x859fe10; frame = (265 7; 52 30); alpha = 0; opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x859fea0>>.....(
"<UIImageView: 0x85b8910; frame = (0 0; 52 30); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x85b7c30>>",
"<UIButtonLabel: 0x859ffb0; frame = (6 7; 40 15); text = 'Cancel'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x85a0020>>") 
```

是否可以更改按钮的颜色？请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:44:24.400

您可能需要考虑[DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)，它是官方 TWTweetComposeView 控制器的开源克隆，它也与 iOS 4 兼容。

它看起来与开箱即用的官方控制器一模一样，但由于是开源的，您可以轻松地对其进行自定义。

# css - 如何调整 2 个并排元素的宽度以适合容器

> ID：12757494
> 
> 赞同：0
> 
> 时间：2012-10-06T06:51:44.090
> 
> 标签：css

我在另一个 div 中有 2 个 div。两个内部 div 正在显示由我的应用程序生成的文本。文本的长度会有所不同。有没有办法强制一个内部 div，比如说第一个，来填充第二个内部 div 剩余的空间？

如果这听起来很神秘，请看下面的示例...分数框的宽度根据显示的内容而有所不同。0% 表示短，100% 表示长...

如何确保左侧的按钮填充剩余空间以使内容紧密地放入蓝色框中。

![在此处输入图像描述](../Images/9f2960cfcb22b517defeb37f05656309.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:58:21.827

我知道用可变宽度做到这一点的最简单方法是使用假表：

```
<div id="stuff">
 <div id="name">Jesse James</div>
 <div id="percent">100%</div>
</div>

#stuff { display: table; width: 200px; }
#stuff #name { display: table-cell; width: 100%; background: gray; }
#stuff #percent { display: table-cell; background: red; } 
```

[http://jsfiddle.net/chovy/HMnSq/](http://jsfiddle.net/chovy/HMnSq/)

# c++ - boost smart_ptr 运行时错误

> ID：12757500
> 
> 赞同：0
> 
> 时间：2012-10-06T06:53:20.390
> 
> 标签：c++, arrays, boost, runtime-error, shared-ptr

我仍在尝试在我为家庭作业创建的项目中实现 boost shared_ptr，并不断遇到不同的错误。目前，我觉得我的代码非常接近正确，并且构建良好，但我遇到了一个令人讨厌的运行时错误。我只是想在下面的 MyPrint 函数中访问我的 Shape 类和 Point 类 ToString 函数。

我的代码如下：

```
#include "Point_H.hpp"
#include "Shape_H.hpp"
#include "Array_H.hpp"
#include "ArrayException_H.hpp"
#include "boost/shared_ptr.hpp"

using namespace CLARK::Containers;
using namespace CLARK::CAD;

class S1
{
private:
    boost::shared_ptr<Shape> sp;

public:
    S1(boost::shared_ptr<Shape> value) : sp(value) { cout << "S1 constructor call (default)" << endl; }
    virtual ~S1() { cout << "S1 destructor call" << endl; }
    virtual void print() const { cout << "Shape: " << (*sp).ToString() << endl; }
};

class P1
{
private:
    boost::shared_ptr<Point> pp;

public:
    P1(boost::shared_ptr<Point> value) : pp(value) { cout << "P1 constructor call (default)" << endl; }
    virtual ~P1() { cout << "P1 destructor call" << endl; }
    void print() const { cout << "Point: " << (*pp).ToString() << endl; }
};

void MyPrint()
{
    {
        boost::shared_ptr<Shape> myShape;
        {
            S1 Shape1(myShape);
            Shape1.print();
        }

        boost::shared_ptr<Point> myPoint;
        {
            P1 Point1(myPoint);
            Point1.print();
        }           
    }
}

int main()
{       
    // Typedef for a shared pointer to shape
    // a typedef for an array with shapes stored as shared pointers.
    typedef boost::shared_ptr<Shape> ShapePtr;
    typedef Array<ShapePtr> ShapeArray;

    ShapeArray my_ShapeArray(3);

    my_ShapeArray[0] = ShapePtr (new Point(1,2));

    MyPrint();

    try
    {   
    cout << my_ShapeArray[0]->ToString() << endl;

    return 0;       
    }

    catch(ArrayException& err)
    {
        cout << err.GetMessage() << endl;
    }    
} 
```

命令窗口显示以下内容，运行时错误中止程序：

> 数组构造函数调用
> 
> S1 构造函数调用（默认）
> 
> 断言失败：px != 0，文件 c:\program files x86)\boost\boost_1_51_0\boost\smart_ptr\shared_ptr.hpp，第 418 行

有人可以帮我吗？我已经尝试调试了好几个小时！

***编辑：

每个请求，数组默认构造函数：

数组默认构造函数：

```
template <typename Type> class Array
{
private:
Type* m_data; // dynamic array of Type objects
int m_size; // size of array
...
};

template <typename Type>
int Array<Type>::m_default_size = 10;

template <typename Type>
Array<Type>::Array()
{// Default constructor
    m_size = m_default_size;
    m_data = new Type[m_default_size];
    cout << "Array constructor call (default)" << endl;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:16:47.073

在`MyPrint`您创建`myShape`并且从不初始化它。然后，您尝试在`print`调用中取消引用该指针，从而导致`NullPointerException`.

有点不清楚您希望这段代码做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:57:36.807

该声明：

```
boost::shared_ptr<Shape> myShape; 
```

Default 构造一个指向 Shape 的共享指针，但这样做意味着它不引用实际实例（在内部它为空）。相反，您需要将您的形状数组作为参数传递给 MyPrint，如下所示：

```
void MyPrint(const Array<ShapePtr>& shapes)
{
    for (int i = 0; i < shapes.getSize(); ++i)
    {
        // this guard is necessary if you do not fully populate the array
        if (shapes[i])
        {
            shapes[i]->print();
        }
    }
} 
```

并在 main 中这样称呼它：

```
MyPrint(my_ShapeArray); 
```

请注意，您需要将 ShapePtr typedef 移到 main 之外，才能使此更改为您工作。

# c++ - 为什么 ISO C++ 标准禁止对成员进行初始化？

> ID：12757501
> 
> 赞同：4
> 
> 时间：2012-10-06T06:53:23.900
> 
> 标签：c++, initialization, standards

为什么我不能那样做

```
class A {
  public:

    int x = 10;

  ...
}; 
```

我必须这样做吗？

```
class A {
  public:

    int x;

  A(){
    x = 10;
    ...
  }

  ...
}; 
```

这是因为 C++ 试图比 C 之类的语言更安全？还有其他原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T10:08:11.910

这与类型安全无关，两个例子都是安全的。

创建语言时，您需要定义什么是允许的，什么是不允许的。由于编写黑名单将是永无止境的体验，因此通常以白名单的方式编写语言，添加越来越多的可能事物。

但是，不应该在没有明确权衡后果的情况下允许事情发生。每当你想允许新的东西时，你需要检查：

*   易于实施
*   与其他现有功能和已知可能的扩展的交互

此外，这也意味着对于那些希望使用该语言的人来说，还有更多的东西需要学习。

但是，您在这里要求的是相对容易的。对于类，它可以看作是函数默认参数的对应物。这已在 C++11 中采用，因为它是在编写多个构造函数时保证默认值一致性的最简单方法。

就个人而言，在使用 C++11 时，我建议以这种方式初始化所有内置类型（如果只是`0`），就像我建议在声明局部变量时初始化它们一样：这样你就不会忘记在其中一个构造函数中初始化它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:13:09.697

警告：猜测如下。

C++ 类基于 C 结构，具有许多附加特性。C 结构的成员不能有初始化程序（因为每次创建结构类型的对象时都需要执行代码，这对于早期的 C 编译器来说太复杂了）。

早期的 C++（最初称为“C with Classes”）添加了构造函数，这种机制确实需要在每次创建给定类型的对象时执行代码。由于构造函数可以做成员初始化器可以做的所有事情，因此成员初始化器可能被认为是不必要的。

但是正如您在问题中所暗示的那样，拥有成员初始化程序会很*方便*，即使它不是绝对必要的。并且新的 2011 ISO C++ 标准已将该功能添加到该语言中，因此显然 ISO C++ 委员会同意这是一个好主意。这个特性增加了语言的复杂性（例如，必须有新的规则来管理初始化器和构造器的执行顺序，并且依赖于该顺序的代码可能会造成混乱）。委员会认为便利值得增加复杂性。（我*想*我同意。）

（Bjarne Stroustrup，C++ 语言的发明者，有一本书，“ [C++ 的设计和演变](https://rads.stackoverflow.com/amzn/click/com/0201543303)”，讨论了他早期的设计决策。我还没有（还）检查过他是否提到了这个特定的问题。）

总结：成员初始化器很*方便*但不是*必需*的，只是花了一段时间才决定将它们添加为语言特性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T07:52:04.217

AFAIK，语言的纯粹简单性。

使语言紧凑有一定的价值。不允许您的第一个示例，该语言没有构成任何严重的限制，对吗？结果你的书更薄，编译器更简单。这些优势值得商榷。请不要认为它们是正确的。我个人认为紧凑的价值。C语言的非凡成功可以部分归功于它的简单性和紧凑性。

随着 C++11 的引入，情况正朝着越来越少的人了解该语言的方向发展`significantly deep`。这**将**产生负面影响。我并不是说这只是消极的。

# c# - 如果表为空，则为 GridView ASP

> ID：12757503
> 
> 赞同：4
> 
> 时间：2012-10-06T06:53:38.847
> 
> 标签：c#, asp.net

如果没有来自数据库的结果，如何在 GridView 的位置显示一条消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T06:57:29.080

有`GridView`一个`EmptyDataRow`模板和样式，只需使用它：

```
 <asp:gridview id="CustomersGridView" 
    datasourceid="CustomersSqlDataSource" 
    autogeneratecolumns="true"
    runat="server">

    <emptydatarowstyle backcolor="LightBlue"
      forecolor="Red"/>

    <emptydatatemplate>

      <asp:image id="NoDataImage"
        imageurl="~/images/Image.jpg"
        alternatetext="No Image" 
        runat="server"/>

        No Data Found.  

    </emptydatatemplate> 

  </asp:gridview> 
```

来自 MSDN [`GridView.EmptyDataRowStyle`Property](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.emptydatarowstyle.aspx)的示例（自 .NET 2.0 起可用）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T07:03:57.173

还有`EmptyDataText`您在`<asp:GridView ... >`

`EmptyDataText="There is no items in the list box"`

和`EmptyDataRowStyle-CssClass`样式它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T06:55:14.650

您可以使用**[EmptyDataText](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.emptydatatext.aspx)**属性。

```
GridView1.EmptyDataText = "No data found"; 
```

其他方式，但上面给出的方法是更好的方法。

```
if (dt != null && dt.Rows.Count == 0)
{
    lblAfterGridGridView1.TextEmptyDataText = "No recorddata found";
}
if(dt.Rows.Count > 0)
{
    //Show grid here
    lblAfterGrid.Text = "";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T02:09:25.877

你也可以直接在你的代码后面：C#

```
GridView1.EmptyDataText = "This table has no data, or whatever"; 
```

这种方法很好，因为您可以控制何时显示哪条消息。

在我的情况下，当页面首次出现时（！IsPostback）我可以说：“请选择字段......”

如果查询为空，那么我可以说：“对不起，没有找到数据......”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T07:14:49.847

使用`EmptyDataText`属性来设置您的空网格文本。并且只需将您`DataGrid`与 null 绑定，以显示空文本..

```
if(dt.Rows.Count > 0)
{
  //call Bind grid method here       
}
else
{
     Grid.DataSource=null;
     Grid.DataBind();
} 
```

# image-processing - 找到相机图像和投影图像之间的对应关系

> ID：12757504
> 
> 赞同：2
> 
> 时间：2012-10-06T06:53:40.537
> 
> 标签：image-processing

我正在通过投影仪投影图像并通过相机捕获它。投影只是捕获图像的一小部分。我怎样才能在原始图像和捕获的图像之间建立对应关系。

如果有任何不清楚的地方，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-04T05:38:08.493

我只会投射一个没有其他东西的小点，这很容易在捕获的图像中发现。然后我只需将点移动到所有位置，然后您将在整个投影图像上获得相应的地图。

# python - 在 Python OpenCV 中，我无法 setImageCOI - 对数组的操作是标准库的一部分吗？

> ID：12757507
> 
> 赞同：0
> 
> 时间：2012-10-06T06:54:28.847
> 
> 标签：python, opencv

当我尝试更改感兴趣的图像通道 (setImageCOI) 时，Python 给了我这个错误：

```
im = cv2.imread('image.jpg')
cv2.setImageCOI(im, 1)
AttributeError: 'module' object has no attribute 'setImageCOI' 
```

[http://opencv.willowgarage.com/documentation/python/operations_on_arrays.html](http://opencv.willowgarage.com/documentation/python/operations_on_arrays.html)

我是否需要专门安装允许对阵列进行操作的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:02:17.913

该方法在下面的`cv`模块中实现`SetImageCOI`（注意大写`S`）：

```
import cv
cv.SetImageCOI(im, 1) 
```

# wpf - silverlight 命令事件回调对象

> ID：12757512
> 
> 赞同：0
> 
> 时间：2012-10-06T06:55:18.023
> 
> 标签：wpf, silverlight, binding, command, prism

我将按钮传递给我的 MouseEventCommand 类。

我的命令课在这里

```
 public static class MouseEnterCommand
{
    public static ICommand GetCommand(Button button)
    {
        return button.GetValue(CommandProperty) as ICommand;
    }

    public static void SetCommand(Button button, ICommand command)
    {
        button.SetValue(CommandProperty, command);
    }

    public static readonly DependencyProperty CommandProperty =
        DependencyProperty.RegisterAttached(
            "Command",
            typeof (ICommand),
            typeof (MouseEnterCommand),
            new PropertyMetadata(OnSetCommandCallback));

    public static void OnSetCommandCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs eventArgs)
    {
        Button button = dependencyObject as Button;

        if (button != null)
        {
            MouseEnterChangedBehavior behavior = GetOrCreateObject(button);
            behavior.Command = eventArgs.NewValue as ICommand;
        }

    }

    private static MouseEnterChangedBehavior GetOrCreateObject(Button button)
    {
        MouseEnterChangedBehavior behavior = button.GetValue(MouseEnterCommandBehaviorProperty) as MouseEnterChangedBehavior;
        if (behavior == null)
        {
            behavior = new MouseEnterChangedBehavior(button);
            button.SetValue(MouseEnterCommandBehaviorProperty, behavior);
        }
        return behavior;
    }

    private static readonly DependencyProperty MouseEnterCommandBehaviorProperty =
        DependencyProperty.RegisterAttached(
            "MouseEnterCommandBehavior",
            typeof (object),
            typeof (MouseEnterCommand),
            null);

    public static ICommand GetCommandParameter(Button button)
    {
        return button.GetValue(CommandParameterProperty) as ICommand;
    }

    public static void SetCommandParameter(Button button, object parameter)
    {
        button.SetValue(CommandParameterProperty, parameter);
    }

    public static readonly DependencyProperty CommandParameterProperty =
      DependencyProperty.RegisterAttached(
        "CommandParameter",
        typeof(object),
        typeof(MouseEnterCommand),
        new PropertyMetadata(OnSetCommandParameterCallback));

    public static void OnSetCommandParameterCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs eventArgs)
    {
        Button button = dependencyObject as Button;

        if (button != null)
        {
            MouseEnterChangedBehavior behavior = GetOrCreateObject(button);
            behavior.Command = eventArgs.NewValue as ICommand;
        }

    }
}

public class MouseEnterChangedBehavior:CommandBehaviorBase<Button>
{
    public MouseEnterChangedBehavior(Button targetObject) 
        : base(targetObject)
    {
        targetObject.MouseEnter += OnMouseEnter;
    }

    private void OnMouseEnter(object sender, MouseEventArgs e)
    {
        ExecuteCommand();
    }
} 
```

我的 Silverlight 代码在这里

```
 <Button Width="250"
            Height="60"
            Content="MyButton with MouseEnter"
            commands:MouseEnterCommand.Command="{Binding MouseEnterCommand}"
            commands:MouseEnterCommand.CommandParameter="{Binding RelativeSource={RelativeSource Self}}"
            /> 
```

我的Modev视图是这样的

```
public class MouseEnterViewModel
{
    private ICommand mouseEnterCommand;

    public ICommand MouseEnterCommand
    {
        get
        {
            if(mouseEnterCommand==null)
            {
                mouseEnterCommand =new DelegateCommand<object>(OnButtonMouseEnter);
            }
            return mouseEnterCommand;
        }
    }

    public void OnButtonMouseEnter(object obj)
    {
        // !!!!!!!  obj is coming null ????????????????

    }
} 
```

我的问题是我的 obj 对象即将为 Null。

我在 MouseEnterCommand 类中断点，我看到按钮来到这里，并且 ExecuteCommand 运行良好。但在模型视图中，obj 即将为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:50:37.717

你能检查在 OnMouseEnter 事件处理程序中调用的 ExecuteCommand 方法吗？您不会再从那个地方传递发件人对象。

验证发送者对象是否应作为输入参数传递给 ExecuteCommand()

```
public class MouseEnterChangedBehavior:CommandBehaviorBase<Button>
{
    public MouseEnterChangedBehavior(Button targetObject) 
        : base(targetObject)
    {
        targetObject.MouseEnter += OnMouseEnter;
    }

    private void OnMouseEnter(object sender, MouseEventArgs e)
    {  // check if you can pass sender object as input to this method
        ExecuteCommand();
    }
} 
```

# iphone - 如何删除 UITableView 中的多余行？

> ID：12757518
> 
> 赞同：0
> 
> 时间：2012-10-06T06:55:43.233
> 
> 标签：iphone, uitableview, xcode4

我有一个`UITableView`我正在加载它的`NSMutableArray`. 我希望删除额外的行，即我只希望将对象中的计数`array`显示为行。如果我有 3 个对象，`array`我只想显示 3 行`UITableView`。但是我可以看到除了对象的计数之外，还添加了额外的空行。我该`array`怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T07:04:46.490

**使用它可能对你有帮助:)**

```
 - (float)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
        // This will create a "invisible" footer
        return 0.01f;
    }

    - (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
    {
        // To "clear" the footer view
        return [[UIView new] autorelease];
    } 
```

**或者使用它......**

```
 self.tblView=[[UITableView alloc] initWithFrame:CGRectMake(0,0,320,370) style:UITableViewStylePlain];
    self.tblView.delegate=self;
    self.tblView.dataSource=self;
    [self.view addSubview:self.tblView];

    UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 10)];
    v.backgroundColor = [UIColor clearColor];
    [self.tblView setTableHeaderView:v];
    [self.tblView setTableFooterView:v];
    [v release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:07:36.727

如果你想实现这样的目标：

> ![在此处输入图像描述](../Images/932880c26009cb46436629428bc6254f.png)

然后查看本教程： [http ://shiki.me/blog/removing-extra-separator-lines-for-empty-rows-in-uitableview](http://shiki.me/blog/removing-extra-separator-lines-for-empty-rows-in-uitableview)

> 要从空行中删除行，您只需为 tableFooterView 提供一个值。一个空的 UIView 可以正常工作：

```
- (void) viewDidLoad
{
  [super viewDidLoad];
  self.tableView.tableFooterView = [[UIView alloc] init];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:59:08.693

您可以向`UITableView`应该隐藏任何其他“空白”表视图行的空页脚视图添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T07:03:00.093

`UITableView`当您想要隐藏额外的行并且只想显示特定的行时，降低 , 的高度。使表格的高度动态化。

请参阅此链接[降低高度](https://stackoverflow.com/questions/4213197/how-to-hide-empty-rows-in-a-uitableview-and-change-the-height-of-the-uitableview)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T07:05:25.730

您可以通过以下几种方式做到这一点：

```
1) You can change your TableView type to UITableViewStyleGrouped
2) Either you can add a UIView in the Footer of UITableView keeping the UIView height to Zero. Incase if using UITableViewStylePlain 
```

因此，这取决于您希望如何实现它的 TableView 的类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T07:06:23.670

像这样：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

   CGFloat number = 0.0;

   if (indexPath.row <= [yourArray count]) {

   number = 50.0; //or whatever value

 }
   return number;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T07:11:06.743

也有解决方案。

您可以将 tableview 的高度设置为数组中的计数。

例如它将是`[array count]*[tableviewcell heigth]`

希望这可以帮助你....

# objective-c - 确定 CTLine 何时是换行的结果

> ID：12757519
> 
> 赞同：1
> 
> 时间：2012-10-06T06:56:29.473
> 
> 标签：objective-c, core-text

我正在尝试确定 CTLineRef 是否是换行的结果。我正在使用 CTFramesetterCreateFrame 来处理所有换行逻辑（我不是手动创建换行符）。我知道如何做到这一点，但我希望 CTLineRef 上有某种类型的元数据可以明确说明它是否是换行的结果。

例子：

原来的：

```
This is a really long line that goes on for a while. 
```

CTFramesetterCreateFrame 应用换行后：

```
This is a really long line that
goes on for a while. 
```

所以我想确定“持续一段时间”是否是换行的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:58:43.267

我最终使用了 CTLineGetStringRange(CTLineRef)。只是为了清楚; 这将返回 CTLineRef 表示的支持字符串中的位置。之后，CTLineGetStringRange 返回的 CRange.location 与我的线路位置进行了简单的比较。YMMV 取决于您如何获得特定线路的位置。我有一个专门的课程用来获取这些信息（更多信息见下文）。

这是一些代码：

```
NSUInteger totalLines = 100; // Total number of lines in document.
NSUInteger numVisibleLines = 30; // Number of lines that can fit in the view port.
NSUInteger fromLineNumber = 0; // 0 indexed line number. Add + 1 to get the actual line number

NSUInteger numFormatChars = [[NSString stringWithFormat:@"%d", totalLines] length];
NSString *numFormat = [NSString stringWithFormat:@"%%%dd\n", numFormatChars];
NSMutableString *string = [NSMutableString string];
NSArray *lines = (NSArray *)CTFrameGetLines(textFrame);

for (NSUInteger i = 0; i < numVisibleLines; ++i)
{
    CTLineRef lineRef = (CTLineRef)[lines objectAtIndex:i];
    CFRange range = CTLineGetStringRange(lineRef);

    // This is the object I was referring to that provides me with a line's
    // meta-data. The _document is an instance of a specialized class I use to store
    // meta-data about the document which includes where keywords, variables,
    // numbers, etc. are located within the document. (fyi, this is for a text editor)
    NSUInteger lineLocation = [_document indexOfLineNumber:fromLineNumber];

    // Append the line number.
    if (lineLocation == range.location)
    {
        [string appendFormat:numFormat, actualLineNumber];
        actualLineNumber++;
        fromLine++;
    }
    // This is a continuation of a previous line (wrapped line).
    else
    {
        [string appendString:@"\n"];
    }
} 
```

仅供参考，我没有给出任何答案，因为我已经知道 CTLineGetStringRange API 调用存在。我希望有一个 API 调用可以为我提供一个布尔值或指示特定 CTLineRef 是否是前一行的延续的*东西。*

# xcode - 如何从 [NSWorkspace fileLabels] 获取 Finder 标签的本地化名称？

> ID：12757523
> 
> 赞同：1
> 
> 时间：2012-10-06T06:56:42.533
> 
> 标签：xcode, cocoa, nsworkspace

当我使用 [NSWorkspace fileLabels] 时，我会得到一组 Finder 标签的名称。这些名字总是英文的。如何转换（或获取）它们本地化？

# signalr - 如果 IIS 配置超过 1 个工作进程，SignalR 会丢失消息

> ID：12757525
> 
> 赞同：7
> 
> 时间：2012-10-06T06:57:02.983
> 
> 标签：signalr

我使用 1 个工作进程 IIS 广播和接收所有消息。将工作进程提高到 2，我只收到其他所有消息（丢失 50%）。是设计、配置还是错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T09:18:40.290

This is by design. The two worker processes don't share state and clients will be distributed between them on a round-robin basis, which means 50% will connect to process A and 50% to process B. As the underlying SignalR message bus is in-memory by default, process A doesn't see messages from process B.

What you're configuring is called a "web garden" (not to be confused with "web farm") and is commonly used to make faulty applications more responsive (see [this SO question](https://stackoverflow.com/questions/2848784/iis-web-garden-advantages-disadvantages)). As SignalR is built from the ground up with scalability in mind, this configuration won't give you any benefit.

My recommendation is to keep the worker process limit at 1.

There is however a way to make it working with web gardens: you'd need to use an external message bus like Redis or Windows Azure Service Bus (details can be found in the [docs](http://www.asp.net/signalr/overview/performance/scaleout-in-signalr)) for sharing messages between the processes, which of course introduces additional network latency.

# mysql - 使用 perl 将 Excel 导入 MySQL 时处理特殊字符

> ID：12757526
> 
> 赞同：0
> 
> 时间：2012-10-06T06:57:08.583
> 
> 标签：mysql, perl, excel, special-characters

我有一个带有特殊字符的 excel 文件，例如 é、不间断空格和项目符号 (•)。
使用 perl 模块 Spreadsheet::ParseExcel 从 excel 导入 MySQL 数据库时如何处理这些类型的特殊字符？我还想知道我为在 MySQL 数据库中创建目标表而选择的默认字符集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:09:36.460

不知道 Excel 文件有什么编码，但我假设是 utf-8。如果您不操作数据等。

对于您的问题，我假设您只是从字段中提取数据并将它们放入 mysql 中。然后您要确保 MySQL 中的编码是 utf-8（将其设置为默认值或在表上设置“CHARSET=utf8”）。然后在 perl 中执行：

```
$dbh->do('SET NAMES utf8');
$dbh->{'mysql_enable_utf8'} = 1; 
```

你应该很安全。

在这里和互联网上都有大量关于 perl 和 utf-8 的内容可供阅读。

# javascript - 如何在不使用许多 DOM 元素的情况下动态显示照片（ipad 浏览器因许多 DOM 元素而崩溃）？

> ID：12757529
> 
> 赞同：0
> 
> 时间：2012-10-06T06:57:41.500
> 
> 标签：javascript, dom

我将照片显示为网格（每行 3 个）。

我在 server1 中有包含照片 url 的数据库，并且应该将客户端脚本（html 和 js）放在 server2 中。

所以我必须使用 ajax 请求（jsonp）来获取照片 url。

我正在获取照片 url，使用 DOM 动态创建 div 并显示照片。如果用户点击“查看更多”按钮，则会显示下一组照片。

问题出在 ipad 浏览器上。当显示的照片数量超过 15 或 20 时，它们会崩溃。我用谷歌搜索了这个，发现 ipad 浏览器无法处理许多 DOM 元素。

所以我想出了一个只有 4 行照片的想法。然后，当用户点击“查看更多”时，我将第一行替换为新照片。但是，当用户点击“查看上一个”或滚动到浏览器顶部时，我应该显示第一组照片。

我该如何实施？javascript 池会帮助我实现这个吗？如何使用 JavaScript 池？我是线程和池的新手。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T10:10:42.400

css display 属性应该可以工作。默认隐藏所有元素（显示：无），每次显示更多，最后一页隐藏，新页面显示。这样可以避免崩溃，因为未显示的 dom 不会影响浏览器渲染。

# html - 如何将 Spring MVC 与 web-socket html5 集成

> ID：12757536
> 
> 赞同：0
> 
> 时间：2012-10-06T06:58:33.013
> 
> 标签：html, spring, jakarta-ee, spring-mvc

> **可能重复：**
> [在 Spring 中使用 HTML5 Websockets](https://stackoverflow.com/questions/6101204/using-html5-websockets-with-spring)

我制作了一个应用程序，例如 2 路通信（服务器到客户端和客户端到服务器。）所以我使用 web-socket (HTML5)，我尝试与 spring MVC 集成但不连接它。所以

**如何将 spring MVC 与 web-socket 集成？**

有可能还是不可能？如果可以，那怎么办？

请帮我 ...

卡姆莱什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:06:33.260

Spring 不支持网络套接字。

[http://blog.springsource.org/2012/05/08/spring-mvc-3-2-preview-techniques-for-real-time-updates/](http://blog.springsource.org/2012/05/08/spring-mvc-3-2-preview-techniques-for-real-time-updates/)

# javascript - 在创建的文档上使用 GetElementsByClassName

> ID：12757537
> 
> 赞同：3
> 
> 时间：2012-10-06T06:58:45.337
> 
> 标签：javascript, dom

我使用 Javascript 创建了一个文档

```
newdoc = document.implementation.createHTMLDocument('Whatever') 
```

然后我用

```
newdoc.innerHTML = document.innerHTML 
```

给他一些代码。问题是 newdoc 的 DOM 似乎没有完全形成并执行诸如

```
newdoc.getElementsByClassName('somename') 
```

它会产生未定义的结果。你知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:06:34.753

`document`没有`innerHTML`财产。

你应该在`body`.

```
newdoc.body.innerHTML = document.body.innerHTML; 
```

# c++ - 为什么我在使用基于clock()的定时器宏时得到一个负值？

> ID：12757538
> 
> 赞同：1
> 
> 时间：2012-10-06T06:58:48.207
> 
> 标签：c++, c, timer, macros, clock

宏是这样的：

```
#define MAX 10000000
#define CNT 1000000
#define TIMER_INIT             \
    clock_t starttime, endtime;    \
#define TIMER(txt, process)                     \
    starttime = clock();                        \
    process;                            \
    endtime = clock();                      \
    printf("%-20s %20ld\n",                     \
           txt, (endtime - starttime)) 
```

主要代码如下：

```
char vector2[CNT/8 + 1];

TIMER(  "bitsort",
        for(i = 0; i < CNT; ++i)
            set1(rand() % MAX, vector2)); 
```

而set1函数是这样的：

```
void set1(int pos, char* vector)        /* set the position to 1 */
{
    vector[pos/8] |= (0x1 << pos%8);
} 
```

当我执行程序时，输出看起来像这样..

```
bitsort                -36035411302143896 
```

即使我将差异变成`unsigned int`这样，它仍然不起作用：

```
#define TIMER(txt, process)                     \
    starttime = clock();                        \
    process;                            \
    endtime = clock();                      \
    printf("%-20s %20d\n",                      \
           txt, (unsigned int)(endtime - starttime)) 
```

输出是`bitsort -16766097`

我试图修改`%ld`为`%d`，但它不起作用。

但是如果我不在`for`参数中使用，像这样：

```
TIMER("bitsort", set1(rand() % MAX,vector2)); 
```

`TIMER`作品完美，给了我一个合理的结果..

有人知道我的代码有什么问题吗？是宏引起的还是`clock()`函数引起的？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:13:44.247

我发现了你的问题：

查看此文档[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

注意到关于 %d 和 %i 的一些事情了吗？**有符号**十进制整数

您必须使用 %u 或 %lu 因为 clock_t 是无符号的，而 unsigned int 显然也是无符号的。

编辑：这只是问题的一半，另一半是他在 bitsort 函数中**破坏了他的堆栈（MAX 大于 CNT）**，感谢聊天中的@nneonneo 发现了这一点。

# javascript - 是否可以在 Javascript/Chrome 扩展程序中从超过 n 天的 Gmail 中获取邮件？

> ID：12757544
> 
> 赞同：1
> 
> 时间：2012-10-06T06:59:23.357
> 
> 标签：javascript, google-chrome-extension

我已经设法在 javascript/Chrome 扩展中使用[oauth API](http://developer.chrome.com/extensions/tut_oauth.html)设置了 oauth 登录，并尝试从 Gmail 中获取所有电子邮件，`https://mail.google.com/mail/feed/atom/`但我得到了空字符串。但我确实使用以下代码获取 gmail 联系人：

```
var url = "http://www.google.com/m8/feeds/contacts/default/full";
oauth.sendSignedRequest(url, onContacts, {
  'parameters' : {
    'alt' : 'json',
    'max-results' : 100
  }
}); 
```

我是否使用了错误的 URL 来获取电子邮件？我可以通过任何示例吗？

# asp.net - 如何将背景图像应用于 asp.net 的正文

> ID：12757545
> 
> 赞同：0
> 
> 时间：2012-10-06T06:59:28.053
> 
> 标签：asp.net, css

我想将背景图像应用于 asp.net 页面的正文。我试过这样：

```
body
{
  font-family: sans-serif;
  font-weight:bold;
  background-image:url('C:\Users\ARCHANA\Downloads\Opera-Background-Blue-Swirls.jpg');
} 
```

它在设计部分得到应用，但是当我运行应用程序时，图像没有被应用。我无法弄清楚是什么问题。任何人都可以帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:04:31.640

您不能像在 Web 服务器上那样引用本地文件。将其复制到应用程序中的某个位置并使用 URI 引用它，即

```
background-image:url('/Images/Opera-Background-Blue-Swirls.jpg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:04:13.523

你必须`url`不给`directory path`。

```
body
{
  font-family: sans-serif;
  font-weight:bold;
  background-image:url('http://yourwebsite.com/Users/ARCHANA/Downloads/Opera-Background-Blue-Swirls.jpg');
} 
```

# java - 我需要从 Incenter 和侧面用 Java 画一个三角形，想法？

> ID：12757547
> 
> 赞同：1
> 
> 时间：2012-10-06T06:59:30.110
> 
> 标签：java, geometry

我并不担心如何解释如何绘制三角形，但我一直在努力寻找如何找到三角形的索引，只知道三角形的边和中心。

**一些示例三角形输入：**

```
Side 1: 20
Side 2: 30
Side 3: 40
about x=100, y=400

Side 1: 20
Side 2: 40
Side 3: 50
about x=300, y=400 
```

我自己和其他几个人在过去的 4 个小时里一直在绞尽脑汁，但无济于事，因此，任何提示都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:21:40.433

您首先需要弄清楚的是每个角落的位置。由于你有每边的长度，你可以使用[余弦定律](http://en.wikipedia.org/wiki/Law_of_cosines)......

![余弦定律](../Images/76746127ae0b4ee042906706be40f939.png)

...获得*边 1 (a)*和*边 2 (b)*之间的角度：

![角度](../Images/98e0c10a123089ac55859f53dc3c66d3.png)

三角形角的位置是：

*   a) [0, 0]
*   b) [b, 0]
*   c) [c * cos(角度), c * sin(角度)]

在此之后，您有一个源自错误位置的三角形，因为您希望将它们绘制在三角形的中心。可以用[不同的方式](http://www.jimloy.com/geometry/centers.htm)计算三角形的中心，但这里有一个非常简单的方法：

```
centerX = (a.x + b.x + c.x) / 3
centerY = (a.y + b.y + c.y) / 3 
```

然后，您可以将该点转换为您选择的点！

* * *

这是一些可以满足您要求的代码：

```
static class Triangle {
    double a, b, c;

    public Triangle(double a, double b, double c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public double aAngle() {
        return Math.acos(-(Math.pow(a, 2) - Math.pow(b, 2) - Math.pow(c, 2)) / (2 * b * c));
    }

    public Point[] triangle() {

        double angle = aAngle();

        Point[] p = new Point[3];

        p[0] = new Point(0, 0);
        p[1] = new Point((int) b, 0);
        p[2] = new Point((int) (Math.cos(angle) * c), (int) (Math.sin(angle) * c));

        Point center = new Point((p[0].x + p[1].x + p[2].x) / 3, 
                                 (p[0].y + p[1].y + p[2].y) / 3);

        for (Point a : p)
            a.translate(-center.x, -center.y);

        return p;
    }
} 
```

示例用法：

```
public static void main(String[] args) {

    final Triangle t = new Triangle(20, 30, 40);
    final Point translation = new Point(100, 400);

    JFrame frame = new JFrame("Test");

    frame.add(new JComponent() {
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Point[] p = t.triangle();

            g.translate(translation.x, translation.y);

            for (int i = 0; i < p.length; i++)
                g.drawLine(p[i].x, 
                           p[i].y, 
                           p[(i+1) % p.length].x, 
                           p[(i+1) % p.length].y);
        }
    });

    frame.setSize(800, 600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:35:02.943

**你可以在没有任何三角函数的情况下做到这一点！**

考虑*b*和*c*边的水平和垂直分量（设*a*为水平）。根据定义：

> b [x] ² + b [y] ² = b ²
> 
> c [x] ² + c [y] ² = c ²

而且，由于是三角形的一部分：

> b [x] + c [x] = a
> 
> b [y] = c [y] = 高度

替代：

> b [x] ² + b [y] ²
>     = b [x] ² + h ²
>     = b ²
> 
> c [x] ² + c [y] ²
>     = (a - b [x] ) ² + h ²
>     = (a ² - 2ab [x] ) + (b [x] ² + h ² )
>     = (a ² - 2ab [x] ) + b ²
>     = c ²

现在我们可以找到 b [x]：

> b [x] = (a ² + b ² - c ² ) / 2a

并使用我们的第一个等式：

> b [y] = sqrt(1 - b [x] ² )

* * *

在代码中：

```
static class Triangle {
    double a, b, c;

    public Triangle(double a, double b, double c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public Point[] coords() {
        Point[] p = new Point[3];
        double bx = (a*a + b*b - c*c) / (2*a);

        p[0] = new Point(0, 0);
        p[1] = new Point(a, 0);
        p[2] = new Point(bx, Math.sqrt(b*b - bx*bx));

        Point center = new Point(
            (p[0].x + p[1].x + p[2].x) / 3, 
            (p[0].y + p[1].y + p[2].y) / 3
        );

        for (Point a : p)
            a.translate(-center.x, -center.y);

        return p;
    }
} 
```

# c - 释放内存时如何在 gdb 中获得通知？

> ID：12757550
> 
> 赞同：4
> 
> 时间：2012-10-06T06:59:40.563
> 
> 标签：c, debugging, memory, gdb

我正在调试 C 中的内存问题。我正在访问的内存块被`free()`其他人的模块意外 :d 。有没有办法在`gdb`一段内存为`free()`:d 时得到通知？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T07:20:42.340

假设你的 libc 的`free`参数被称为`mem`.

然后，您可以打印出所有被释放的内容：

```
(gdb) break __GI___libc_free # this is what my libc's free is actually called
Breakpoint 2 at 0x7ffff7af38e0: file malloc.c, line 3698.
(gdb) commands 2
Type commands for when breakpoint 2 is hit, one per line.
End with a line saying just "end".
>print mem
>c
>end 
```

现在，每次*任何人*`c`释放任何东西时，您都会得到一个小打印输出（如果您希望它在每次发生时都停止，您可以省略`free`）：

```
Breakpoint 2, *__GI___libc_free (mem=0x601010) at malloc.c:3698
3698    malloc.c: No such file or directory.
    in malloc.c
$1 = (void *) 0x601010 
```

或者，如果您已经知道自己感兴趣的内存地址，请`cond`在有人尝试访问`free`该地址时使用中断：

```
(gdb) cond 2 (mem==0x601010)
(gdb) c
Breakpoint 3, *__GI___libc_free (mem=0x601010) at malloc.c:3698
3698    malloc.c: No such file or directory.
    in malloc.c
(gdb) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:03:43.483

为了获取有关内存泄漏的信息，以下工具将非常有用。

1.  [瓦尔格林德](http://valgrind.org/)

2.  [谷歌性能工具](http://code.google.com/p/gperftools/wiki/GooglePerformanceTools)

并且很快就会习惯使用这些 - 绝对值得一试。

或者使用硬件观察点来跟踪某些地址可能会有所帮助 - 每当您正在观察的地址发生读取或写入时，调试器就会获得控制 - 但我不确定这是否为您的问题提供了确切的解决方案。

# javascript - 添加和删 除多个类

> ID：12757553
> 
> 赞同：1
> 
> 时间：2012-10-06T07:00:10.407
> 
> 标签：javascript, jquery

我想添加/删除三个 css 类和一个默认类。示例：当我单击第一个锚点时，它添加了一个名为 style1 的新类并删除了默认样式，当我单击第二个锚点时，它删除了 style1 并添加了 style2，对于 anchor3 也是如此。

问题是，如果我从单击anchor3 开始，没有任何反应，我无法撤消操作。

无论我首先单击哪个链接，我怎样才能使这项工作正常工作，以便添加/删除类工作？我需要使用这三种样式，但也需要默认样式。

这是 JFiddle 上的代码：http: [//jsfiddle.net/VadUE/2/](http://jsfiddle.net/VadUE/2/)

它适用于浏览器，但不适用于 JFiddle。

代码：

```
$(document).ready(function() {
    $('.anchor1').click(function() {
        $('p').addClass('style1').removeClass('default');
        $('.anchor2').click(function() {
            $('p').addClass('style2').removeClass('style1');
            $('.anchor3').click(function() {
                $('p').addClass('style3').removeClass('style2');
            });
        });
    });
});

<style type="text/css">
.style1{
    color: #FF8000;
}
.style2{
    color: #F36;
}

.style3{
    color: #00F;
}

.default{
    color: #0C0;
}
</style>

<a class="anchor1" href="#/">Link1</a>
<a class="anchor2" href="#/">Link2</a>
<a class="anchor3" href="#/">Link3</a>
<p class="default">This is a sequence into a sound</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:06:29.910

我会稍微改变你的 HTML：

```
<a class="anchor" href="#/">Link1</a>
<a class="anchor" href="#/">Link2</a>
<a class="anchor" href="#/">Link3</a> 
```

然后只需使用这个简单的 JS 代码：

```
$(document).ready(function() {
    $('.anchor').click(function() {
        $('p').attr('class', 'style' + ($(this).index() + 1));
    });
});​ 
```

**演示：http: [//jsfiddle.net/VadUE/4/](http://jsfiddle.net/VadUE/4/)**

原始代码的问题在于您奇怪地绑定了事件处理程序（一个仅在触发另一个事件处理程序后才绑定）。您想将它们一一绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:17:02.623

1.  在您的 jsfiddle 中，您选择了[mootools](http://mootools.net/)库。
2.  在该`ready`方法中，您将*嵌套*所有单击操作。
3.  如果您删除一个类，则必须检索要删除的类名。

解决这个问题（并通过将脚本放在页面底部来消除`ready`调用的需要），您最终会得到：

```
$('.anchor1').on('click',function(){
    $('p').removeClass(function() {
          return $(this).attr('class');
        }).addClass('style1');
});
$('.anchor2').click(function(){
    $('p').removeClass(function() {
          return $(this).attr('class');
        }).addClass('style2');
});
$('.anchor3').click(function(){
    $('p').removeClass(function() {
          return $(this).attr('class');
        }).addClass('style3');
}); 
```

见[**jsfiddle**](http://jsfiddle.net/U6cda/)

对链接使用单个 className 并添加数字 id，您只需要一个处理程序：

```
$('.anchor').on('click',function(){
    $('p').removeClass(function() {
          return $(this).attr('class');
        }).addClass('style'+this.id);
});​ 
```

见[**jsfiddle**](http://jsfiddle.net/QjbbW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:06:03.670

您使用了错误的绑定

```
$('.anchor1').click(function() {
        $('p').addClass('style1').removeClass('default');

}

$('.anchor2').click(function() {
        $('p').addClass('style1').removeClass('style1');

} 
```

或者你可以使用

```
 $('a[class^=anchor]').click(function() {
            $('p').addClass('style'+this.id).removeClass($(this).attr("class"));

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T07:04:32.390

问题是您正在从第一个点击处理程序内部绑定第二个和第三个链接的点击处理程序。*这意味着您的第二个和第三个链接只有在*您单击第一个链接后才会开始工作。

您当前的代码

```
$('.anchor1').click(function() {
    $('p').addClass('style1').removeClass('default');
    $('.anchor2').click(function() {
        $('p').addClass('style2').removeClass('style1');
        $('.anchor3').click(function() {
            $('p').addClass('style3').removeClass('style2');
        });
    });
}); 
```

应改为

```
 $('.anchor1').click(function() {
        $('p').addClass('style1').removeClass('default');
    });

    $('.anchor2').click(function() {
        $('p').addClass('style2').removeClass('style1');
    });

    $('.anchor3').click(function() {
        $('p').addClass('style3').removeClass('style2');
    }); 
```

# java - 在 Mac OS X 上安装了 Java 7，但终端仍在使用版本 6

> ID：12757558
> 
> 赞同：394
> 
> 时间：2012-10-06T07:01:05.463
> 
> 标签：java, macos, java-7

我已经安装了从 oracle 网站下载的 JDK 7u7。但是安装后终端还是显示java version 6

```
$java -version
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M3811)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode) 
```

知道为什么 java 7 没有出现吗？

**答：好的，问题已经解决了。这是答案：我发现我的终端有一个 .bash_profile 并且 java home 变量设置为 1.6**

```
export JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home" 
```

所以每次我打开一个新的终端窗口时，这就是导致问题的行。只需删除此行即可解决问题。您仍然需要遵循@aleroot 所说的内容，但如果这对您不起作用，请检查 .bash_profile（或 .bashrc）设置文件以查看您之前是否导出过任何 java 版本。

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2013-02-14T12:50:15.667

Oracle 的安装程序将 java 放入`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin`. 它不会覆盖`/usr/bin/java`. 所以，如果你发出一个

```
whereis java 
```

在终端中，它将返回 /usr/bin/java。（这又指向`/System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java`Apple 的 1.6 版本）。

因此，如果您想使用新的 java 版本，请替换`/usr/bin/java`符号链接，使其指向`/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java`：

```
sudo rm /usr/bin/java
sudo ln -s /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java /usr/bin 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-08-10T23:52:46.590

安装[**JDK 7**](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，这个问题就会自行解决。

确保获得包含编译器和类似内容的 Java 开发工具包 (JDK)，而不仅仅是 Java 运行时环境 (JRE)。

* * *

## 回答 #3

> 赞同：105
> 
> 时间：2013-03-09T02:44:50.887

`vi ~/.bash_profile`

添加

`export JAVA_HOME=`/usr/libexec/java_home -v 1.7``

这告诉您的`/usr/bin/java`链接目标使用安装在

`/Library/Java/JavaVirtualMachines/`

所以对于 JDK`1.7.0_17` `JAVA_HOME`将是：

`/Library/Java/JavaVirtualMachines/jdk1.7.0_17.jdk/Contents/Home`

注意：最近该领域发生了很多变化，将 Mac OS X 从 Appels 自己的系统集成 Java 包迁移到基于 Oracle 的 Java 包。从 Mac OS X 10.8.2 开始，上述解决方案运行良好

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2012-10-06T07:03:20.470

因为您需要在 Java Preferences 窗格中输入并以这种方式仅标记 JVM 7：

![Java 首选项](../Images/fdb18dcd2b64ee0ee0e7f69ea24a8bef.png)

要在 Mac OS X 中轻松快速地打开**Java 首选项**窗格，您只需调用 Spotlight`⌘</kbd>**+**`SPACE` and type *System Preferences* it will show up in the last row of the window.`

* * *

## 回答 #5

> 赞同：56
> 
> 时间：2013-07-22T19:58:34.103

就我而言，问题在于 Oracle 将其安装到了与我习惯不同的位置。

从 Oracle 下载：http: [//java.com/en/download/mac_download.jsp ?locale=en](http://java.com/en/download/mac_download.jsp?locale=en)

1.  通过查看 System Prefs 来验证它是否已正确安装：

    *   Command-Space 打开 Spotlight，输入“系统偏好设置”，按回车键。
    *   单击底部行中的 Java 图标。Java 控制面板打开后，单击“Java”选项卡、“查看...”，并验证您的安装是否正常。您还可以在那里看到一个“路径”，如果它们与我的不同，您可以将其放入下面的命令中。
2.  验证版本是否符合您的预期（根据需要在您的路径中添加）：

    /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version

3.  创建从 /usr/bin/java 到新安装的链接

    sudo ln -fs /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java /usr/bin/java

4.  健全检查您的版本：

    java版本

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2013-02-12T20:04:09.157

我遇到了类似的问题，终端没有更新 java 版本以匹配安装在 mac 上的版本。

设置 JAVA_HOME 环境变量没有问题

我想出了一个临时的、有点痛苦但有效的解决方案。

在您的 .bash_profile 中添加以下行：

```
export JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk1.7.0_11.jdk/Contents/Home" 
```

（这是我机器上的路径，但在您的机器上可能不同，请确保获取您的。路径应与 /Library/Java/JavaVirtualMachines/ 匹配）

运行`source ~/.bash_profile`

正如我所提到的，这是一个临时的创可贴解决方案，因为 java 主路径是硬编码的。确实没有办法设置获取最新版本的路径，因为这就是苹果应该为终端所做的事情，问题是苹果的 java_home 环境变量没有得到更新。

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2016-03-17T13:21:57.520

`/usr/bin/java`自 El Capitan 以来，由于引入了新的“无根”政策，因此很难删除符号链接。

因此，我只是将最新 java 版本的路径（在我的情况下是`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin`）添加到`PATH`我的`.bashrc`文件中：

```
# Use latest java version
export PATH=/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin:$PATH 
```

`.bashrc`要为当前会话重新加载文件，请`source ~/.bashrc`在 shell 中运行。`.bashrc`您只需对更改文件之前已启动的会话执行此操作。

现在使用最新版本，当您`java`在 shell 中使用时。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2016-12-15T11:20:46.860

**更新**

```
brew tap adoptopenjdk/openjdk
brew cask install adoptopenjdk/openjdk/adoptopenjdk8 
```

[https://stackoverflow.com/a/28635465](https://stackoverflow.com/a/28635465)

**旧版本** 对我来说，最简单和最干净的方法是使用 homebrew 安装 Java，如下所述：

[https://stackoverflow.com/a/28635465](https://stackoverflow.com/a/28635465)

```
brew update
brew cask install java 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2017-05-22T08:10:20.560

您可以在终端中执行以下命令：

```
export PATH="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin:$PATH" 
```

这用新的java替换了旧的java。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2015-11-06T17:02:48.690

基本问题：`/usr/bin/java`最初是指向OSX本身提供的（`/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java`）我们需要将其指向JDK安装程序下载的那个。以下步骤适用于 OSX 10.10.4 Yosemite。

*   打开系统偏好设置 -> 选择 Java。Java 窗口打开。
*   单击顶部的 Java 选项卡。点击“查看”按钮。
*   Java 运行时环境设置选项卡打开如下： [![JRE 设置选项卡](../Images/7e8cdf548591916e623ee87f97f1a612.png)](https://i.stack.imgur.com/yddrR.png)
*   双击该`Path`项目并复制路径 (cmd+c)。这是 JDK 安装程序/更新程序安装的最新版本。就我而言，路径是`/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java`
*   打开终端。在这一步中，我们将（符号链接，`ln -s`命令）系统 java 二进制文件指向我们在上一步中发现的最新版本。运行以下命令：

`sudo ln -s /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java /usr/bin/java`

就是这样。要验证，您可以 `java -version` 在终端上运行。它应该输出您安装/更新到的最新版本。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2014-06-24T17:31:54.620

我做了

```
export JAVA_HOME=`/usr/libexec/java_home` 
```

这解决了我的 Java 8 问题。

前：

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode) 
```

后：

```
java version "1.8.0_05"
Java(TM) SE Runtime Environment (build 1.8.0_05-b13)
Java HotSpot(TM) 64-Bit Server VM (build 25.5-b02, mixed mode) 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2012-10-26T15:58:45.020

[http://www.java.com/en/download/faq/java_mac.xml](http://www.java.com/en/download/faq/java_mac.xml)是一个很好理解的地方，虽然 Apple 正在停止对 Java 的支持，但为什么 Java Preferences 不再存在并依赖 System_Preferences => Java = > 如果安装了 Oracle 的 Java 7，则为 Java。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2013-02-13T15:41:10.853

我可以建议你看看工具[Jenv](https://github.com/hikage/jenv)

这将允许您随时在已安装的 JVM 之间切换。

简单来说：

```
jenv global oracle-1.7 
```

然后用于测试目的：

```
jenv global oracle-1.6 
```

而且您有更多可用的命令。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-02-13T08:13:13.660

硬编码 JAVA_HOME 路径可能不是最好的主意。该`/usr/libexec/java_home`实用程序 sill 适用于我在 Mac OSX Lion 10.7.5 和 JDK 1.7.0_13 上。根据其手册页，它旨在与 Apple 的旧 Java Preferences 窗格一起使用，但它似乎与 Oracle 提供的替代品（Java Control Panel）一起使用。例如，运行`/usr/libexec/java_home -V`列出了我机器上所有已安装的 JDK（1.6.* 和 1.7.*）。

因此，正如在其他线程中所讨论的（例如，[我应该在 OSX 上将 JAVA_HOME 设置为什么](https://stackoverflow.com/questions/1348842/what-should-i-set-java-home-to-on-osx)），我仍然建议将以下行添加到您的 .bash_profile 中：

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2015-02-12T02:31:32.023

这是疯了！Oracle如何提供不安装任何东西的安装程序！？

无论如何对我来说是：

```
sudo rm /usr/bin/java
sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/jre/bin/java /usr/bin/java 
```

其中 1.8.0_31 是您安装的 java 版本...

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2018-03-27T23:08:28.370

如果您的机器上有多个 Java 版本，并且您想在运行时动态选择它，即在我的情况下，我有两个版本：

```
ls -la /Library/Java/JavaVirtualMachines
drwxr-xr-x  3 root  wheel    96B Nov 16  2014 jdk1.7.0_71.jdk/
drwxr-xr-x  3 root  wheel    96B Mar  1  2015 jdk1.8.0_31.jdk/ 
```

您可以通过修改 /etc/profile 内容来更改它们。只需在文件末尾添加（或修改）以下两行：

```
export JAVA_HOME=YOUR_JAVA_PATH/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH 
```

就我而言，如果我想使用它应该如下所示：

爪哇 7：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH 
```

爪哇 8：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH 
```

保存文件后，**请运行** `source /etc/profile`，它应该可以工作。以下是我相应地使用第一个和第二个选项时的结果：

爪哇 7：

```
java -version
java version "1.7.0_71"
Java(TM) SE Runtime Environment (build 1.7.0_71-b14) 
```

爪哇 8：

```
java -version 
java version "1.8.0_31"
Java(TM) SE Runtime Environment (build 1.8.0_31-b13) 
```

如果您的 java 文件夹位于不同的位置，则该过程类似。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2017-05-03T00:14:06.867

# 简单的解决方案

```
export PATH="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin:$PATH" 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-07-05T04:34:05.653

我认为您可以尝试安装 jdk 而不是 jre。通过安装 jdk，/usr/bin/java 中的 java 将被替换，所有库都可以正常工作。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-05-09T14:34:49.353

如果您安装了 Homebrew，您可以安装**java-switcher**以更快地更改 Java 默认版本

```
brew tap andycillin/tap
brew install java-switcher 
```

然后，您可以只使用一个命令来切换您的默认 Java 版本。

```
java-switcher 1.7 
```

或者

```
java-switcher 10 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-03-14T08:54:39.133

发生这种情况是因为您的 .bash_profile 没有反映更改。要反映它，只需使用以下命令

```
$ source .bash_profile 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-03-29T14:59:57.677

您可以运行此命令来查找 /Library/Internet Plugins/ 下的 Java 版本：

```
defaults read /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Info.plist CFBundleVersion 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-02-13T14:57:51.380

由于我没有遇到过这个问题，所以我有一个预感——

你能试试这个：

软链接“java_home”指向哪里：

```
ls -lrt /usr/libexec/java_home 
```

输出：（受阻）lrwxr-xr-x java_home -> /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java_home

**ls -lrt /System/Library/Frameworks/JavaVM.framework/Versions 我的 MAC 生成以下内容：

```
 lrwxr-xr-x CurrentJDK ->
 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents**

 lrwxr-xr-x   Current -> A
 lrwxr-xr-x  1 root  wheel   10 Oct 18 14:39 1.6.0 -> CurrentJDK
 lrwxr-xr-x  1 root  wheel   10 Oct 18 14:39 1.6 -> CurrentJDK
 lrwxr-xr-x  1 root  wheel   10 Oct 18 14:39 1.5.0 -> CurrentJDK
 lrwxr-xr-x  1 root  wheel   10 Oct 18 14:39 1.5 -> CurrentJDK
 lrwxr-xr-x  1 root  wheel   10 Oct 18 14:39 1.4.2 -> CurrentJDK
 lrwxr-xr-x  1 root  wheel   10 Oct 18 14:39 1.4 -> CurrentJDK 
```

基于此，我们可能会得到进一步进行的提示？

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-05-14T22:49:00.670

我通过重新安装 Yosemite 解决了这个问题，然后在终端 (java -version) 和 (javac -version) 上交叉检查 java 版本。它现在工作正常。它不会更改为 java 7，因为版本 6 仍然存在于 (command + n ) libray>java>javavirtualmachine>your javac current version.you 需要寻址到 java home 。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-04-12T19:18:13.663

我解决了这个问题 `sudo rm /usr/bin/java`

我下载并安装了最后一个 Java SE 运行时环境： [http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

`sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/jre/bin/java /usr/bin/java`没有为我工作，因为我得到了`Operation not permitted`. El Capitan 现在以“无根”模式（又称系统完整性保护）保护某些系统目录。它适用于 macOS Sierra，并且在可预见的将来可能会适用于新的 macOS 版本。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-07-27T17:08:44.560

通过 Oracle 站点上的分布式 JDK DMG 安装会为我自动更新所有内容。我已经看到（在 El Capitan 中）通过`System Preferences > Java`do 更新进行更新，但这并没有反映到命令行。通过 DMG 安装就可以了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-03-11T01:18:46.020

检查已安装的 JDK 版本：

```
$ ls  /Library/Java/JavaVirtualMachines/
jdk-11.0.2.jdk  jdk1.8.0_91.jdk 
```

现在在您的`~/.bashrc`导出中`JAVA_HOME`指定版本：

```
if [ -e /usr/libexec/java_home ]; then
  export JAVA_HOME=$(/usr/libexec/java_home -v 11)
fi 
```

获取 bashrc 文件，Java 版本将更新：

```
$ java -version
java version "11.0.2" 2019-01-15 LTS
Java(TM) SE Runtime Environment 18.9 (build 11.0.2+9-LTS)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.2+9-LTS, mixed mode) 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-09-03T12:22:18.697

## 最新100%有效方法：

在 bash 中：

```
vim ~/.bash_profile 
```

添加

```
export PATH="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin:$PATH" 
```

*   `:wq`保存
*   cmd+q 强制退出 bash
*   再次打开 bash，然后输入`java -version`

但实际上这条路径指向的是 jre 而不是 jdk。

如果要指向JDK的路径，则需要

1.  确保您已安装 JDK 而不是单个 JRE 运行时
2.  替换之前的路径`PATH="/Library/Java/JavaVirtualMachines/jdk1.8.0_221.jdk"`，你可以去`/Library/Java/JavaVirtualMachines`确保你已经安装了你期望的JDK版本。

# java - 使用 EclEmma 的 Java 代码覆盖率没有扫描预期的异常方法

> ID：12757559
> 
> 赞同：19
> 
> 时间：2012-10-06T07:01:42.640
> 
> 标签：java, eclipse, unit-testing, junit, eclemma

我正在尝试使用 Eclipse 和 EclEmma 在 java 中获取我的代码覆盖率。

我的测试使用的是 JUnit 4，我有一些看起来像这样的测试：

```
 @Test(expected = IllegalArgumentException.class)
    public void createTime_withInvalidMinuteUnder0_throws(){
    //Arrange
    ...
    //Act
    Something triggering IllegalArgumentException Here       
} 
```

EclEmma 说测试失败是因为抛出了 IllegalArgumentException。所以它会丢弃我的代码覆盖率指标，即使它应该抛出一些东西。有没有一个选项可以让它看到 JUnit 预期的异常标记？

编辑：我发现如果你也将 throw 添加到测试的声明中，它会起作用！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T07:39:47.127

不，没有办法让 EclEmma 注意到该`expected`条款。[他们在这里](http://www.eclemma.org/faq.html#trouble05)承认这一事实。

> **为什么带有预期异常的 JUnit4 测试用例显示为未涵盖？**
> 
> 具有预期异常的 JUnit4 测试用例显示为未涵盖，即使它们已被执行。这样做的原因是底层的 JaCoCo 代码覆盖库仅在执行某些探针时才考虑执行代码。对于带有此标记的成功测试用例，情况`@Test{expected=...}`并非如此。

就个人而言，我不会太担心。测试用例的覆盖率是 EclEmma 能告诉你的最不有趣的事情；我总是完全忽略这些指标并专注于我的生产代码的覆盖范围。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-30T13:50:21.450

尚不能发表评论，但我想指出，关于已接受的答案，有充分的理由关注测试代码的覆盖率。

It's just way to easy with JUnit to screw up the test method naming convention or forget the @Test annotation, depending on your JUnit version. Do that, and you could easily be fooled into thinking that your solid green bar means that the nice test you just added passed, when in fact it never ran. Coverage coloring will show this very prominently. Except of course, as this thread points out, some of your tests that throw exceptions might look like they didn't run when they did.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T14:13:29.537

我遇到了同样的问题，并提出了一个拉取请求来处理造成这种烦恼的最突出的原因。我没有添加太多的探针，而是只处理方法调用的操作码。换句话说，由方法调用引发的异常导致的（以前）错误覆盖结果的问题得到了解决，但如果异常是由例如被零除、错误转换或数组索引引发的，则无法解决问题。

[https://github.com/jacoco/jacoco/pull/261](https://github.com/jacoco/jacoco/pull/261)

随意评论拉取请求或参与我在 JaCoCo 邮件列表上开始的讨论。

# c# - 获取方面相关信息 reg

> ID：12757564
> 
> 赞同：0
> 
> 时间：2012-10-06T07:03:19.643
> 
> 标签：c#, .net, postsharp, aop

假设我有这些结构

```
class ss
{

 public void createfile() 
    { 
        StreamWriter sw= new StreamWriter("d:/test.txt");     
    }
} 
```

我需要在我使用 StreamWriter 的地方做方面？

至于考虑我已经使用下面的代码

```
[assembly: MyAspect(AttributeTargetAssembly="mscorlib", AttributeTargetTypes="System.IO.File", AttributeTargetMembers="Create"]

for file.create method .. 
```

它工作正常..

有什么办法可以解决这个问题...

等待你的答复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:34:30.980

您可能想稍微澄清一下您的问题，我不知道您是否看过以下链接...

[http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)

但是，它提供了一个很好的示例，说明您如何以与您描述的方式类似的方式使用 postsharp。

# javascript - 在覆盖 div 上禁用 touchevents，以便底层 div 接收它们

> ID：12757566
> 
> 赞同：3
> 
> 时间：2012-10-06T07:03:38.423
> 
> 标签：javascript, jquery, jquery-events

我正在开发一个移动网络画廊，用户可以在其中左右拖动幻灯片图像，一切都很好。

问题是，当我覆盖一个具有绝对定位且其中有一个按钮的 div 时，下面的 div 的触摸事件似乎没有被触发。我已经尝试`pointer-events:none;`过覆盖 div，但这似乎不起作用。

是否可以通过覆盖 div 禁用触摸事件，以便 z-index 底部的 div 接收它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:17:10.647

您可以在覆盖的 div 上捕获触摸事件并将其委托给底层 div 以模拟这一点

```
$('#myDiv').click(function(event){
event.preventDefault();
$('#myOtherDiv').trigger(event);
}); 
```

这些方面的东西（使用`.trigger`或仅`.click`在底层div上）

# c# - C# 数组 - string[][] 与 string[,]

> ID：12757570
> 
> 赞同：16
> 
> 时间：2012-10-06T07:03:48.080
> 
> 标签：c#, arrays, multidimensional-array

> **可能重复：**
> [C# 中的多维数组和数组数组有什么区别？](https://stackoverflow.com/questions/597720/what-is-differences-between-multidimensional-array-and-array-of-arrays-in-c)

谁能解释一下`string[][]`和之间的区别`string[,]`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-06T07:07:43.760

`string[,]`是一个[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)。

![多维数组](../Images/86ce1b3b4094d7348c096c113386e387.png)

`string[][]`是一个[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)：

> 锯齿状数组是其元素为数组的数组。锯齿状数组的元素可以具有不同的维度和大小。锯齿状数组有时称为“数组数组”。

![锯齿状阵列](../Images/1e14ed1a6d8c061104294a77a50c1e09.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T07:07:05.957

`string[,]`-[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)（矩形数组）

多维可以有多个维度。下面的例子展示了如何创建一个两行两列的二维数组。

宣言 ：

```
string[,] contacts; 
```

实例化：

```
string[,] contacts = new string[2,2]; 
```

初始化：

```
string[,] contacts = new string[2, 2] { {"John Doe","johndoe@example.com"}, {"Jane Doe","janedoe@example.com"} }; 
```

`string[ ][ ]`-[锯齿状阵列](http://msdn.microsoft.com/en-us/library/2s05feca%28v=vs.110%29.aspx)（Array-of-arrays）

锯齿状数组是其元素为数组的数组。锯齿状数组的元素可以具有不同的维度和大小。锯齿状数组有时称为“数组数组”。

锯齿状数组可以有效地存储许多不同长度的行。可以使用任何类型的数据、引用或值。索引锯齿状数组很快。分配它们有点慢。

锯齿状数组比多维数组快

宣言 ：

```
string[][] contacts; 
```

实例化：

```
string[][] contacts = new string[2][];
for (int i = 0; i < contacts.Length; i++) 
{
   contacts[i] = new string[3];
} 
```

初始化：

```
string[][] contacts = new string[2][] { new string[] {"john@example.com","johndoe@example.com"}, new string[] {"janedoe@example.com","jane@example.com","doe@example.com"} }; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T07:07:52.120

`string[][]`作为[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca%28v=vs.110%29.aspx)

> 锯齿状数组是其元素为数组的数组。锯齿状数组的元素可以具有不同的维度和大小。锯齿状数组有时称为“数组数组”。

而是`string[,]`一个[多维](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)数组

> 数组可以有多个维度

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T07:13:51.267

差异的两个方面很重要：

**内存方面：**

[n,m] - 保存为一长串内存，就好像它是 [n*m] [n][m] - 保存为大小为 n 的简单数组，其中每个元素都是指向大小数组的指针米。

**访问方式：**

[n,m] - 要访问单元格 i,j，真正发生的是它获取 [n*m] 数组的指针并将其偏移 n*width+m，然后访问该值。[n][m] - 要访问单元格 i,j，您只需访问索引 n（偏移量 #1）处的子数组指针，然后访问索引 m（偏移量 #1）处的子数组。

**[][] 两方面都比较好。**访问效率更高，内存更灵活。此外，您可以只访问单行一次并更有效地处理它，因为您不会对该行中的每个单元格执行完整的多维访问。

但是，[,] 有一个优点：您始终知道矩阵的宽度是固定的。使用 [][]，每个子数组可以有不同的长度，甚至可以为空。这可以被认为是一个优势，尽管有时相反也可能有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T07:09:51.523

`string[][]` **（锯齿状数组）**是具有固定行数和可变列长度的数组，而`string[,]` **（矩形数组）**是具有固定行数和列数的矩阵。[**那边**](https://stackoverflow.com/questions/12567329/c-sharp-multidimensional-array-vs/12567404#12567404)有很好的讨论[](https://stackoverflow.com/questions/12567329/c-sharp-multidimensional-array-vs/12567404#12567404)

# perl - 如何使用 Perl 将图像上传到 Amazon S3？

> ID：12757574
> 
> 赞同：4
> 
> 时间：2012-10-06T07:04:00.060
> 
> 标签：perl, upload, amazon-s3, amazon-web-services, amazon

我正在尝试使用 Perl 将文件上传到 S3。

根据这个模块：

[http://metacpan.org/pod/Amazon::S3::Bucket](http://metacpan.org/pod/Amazon%3a%3aS3%3a%3aBucket)

...以下代码将上传文本文件：

```
# create resource with meta data (attributes)
my $keyname = 'testing.txt';
my $value   = 'T';
$bucket->add_key(
   $keyname, $value,
   {   content_type        => 'text/plain',
       'x-amz-meta-colour' => 'orange',
   }
); 
```

但是，如何将图像（GIF、JPEG、PNG）上传到 S3？

谢谢，

琳达

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T07:36:35.723

该代码*不会*上传文件 - 它只是将与键“testing.txt”关联的值设置为“T”。如果要上传文件，可以使用[add_key_filename](http://search.cpan.org/~tima/Amazon-S3/lib/Amazon/S3/Bucket.pm#add_key_filename)方法：

> 该方法的工作方式与 add_key 类似，只是该值被假定为本地文件系统上的文件名。该文件将被流式传输，而不是一大块加载到内存中。

就像是：

```
$bucket->add_key_filename(
    'image-key.jpg',
    'local-filename.jpg',
    {
        content_type => 'image/jpeg',
    }
); 
```

根据需要调整内容类型。

# sql - SQLite 3 与 AM1808 嵌入式 Linux 接口

> ID：12757576
> 
> 赞同：0
> 
> 时间：2012-10-06T07:04:13.633
> 
> 标签：sql, sqlite, embedded-linux, embedded-database

我已经将 SQLite3 与我的 Am1808 处理器连接起来。我将数据存储在 SD 卡中。

它工作得很好。我插入了一个包含 38 个字段的表格。现在我想在同一个表中添加一列。所以我更改了表字段参数，并在相关文件中进行了相应的更改。我的代码成功编译，但是当我执行应用程序时，它给了我以下错误：

> 错误：“39 个值的 38 列”

这是我通过修改创建的表：

```
const char *SQL_CREATE_ABCTABLE   = "CREATE TABLE IF NOT EXISTS MilkCollection   \
                (  MilkCollectionId        INTEGER,  \
                   CollectionDate          DATE,  \
                   CollectionShift         UNSIGNED TINYINT,  \
                   MemberId                INTEGER REFERENCES Member(MemberId) ON UPDATE RESTRICT ON DELETE RESTRICT,  \
                   SocietyId               INTEGER REFERENCES Society(SocietyId) ON UPDATE RESTRICT ON DELETE RESTRICT,  \
                   SampleNo                UNSIGNED INTEGER,  \
                   MilkType                UNSIGNED TINYINT,  \
                   Qty                     FLOAT, \
                   ActualQty               FLOAT, \
                   QtyType                 UNSIGNED TINYINT,  \
                   Fat                     FLOAT, \
                   ActualFat               FLOAT, \
                   LRCLR                   FLOAT, \
                   ActualLRCLR             FLOAT, \
                   SNF                     FLOAT, \
                   ActualSNF               FLOAT, \
                   Solid                   FLOAT, \
                   ActualSolid             FLOAT, \
                   Water               FLOAT, \ // I have inserted this field   
                   FatKG                   FLOAT, \
                   ActualFatKG             FLOAT, \
                   SNFKG                   FLOAT, \
                   ActualSNFKG             FLOAT, \
                   Rate                    FLOAT, \
                   Amount                  FLOAT, \
                   ActualAmount            FLOAT, \
                   CanNumber               UNSIGNED INTEGER, \
                   MemberCodeAuto          UNSIGNED TINYINT, \
                   WeightAuto              UNSIGNED TINYINT, \
                   FatAuto                 UNSIGNED TINYINT, \
                   LRCLRAuto               UNSIGNED TINYINT, \
                   SNFAuto                 UNSIGNED TINYINT, \
                   EntryMode               UNSIGNED TINYINT, \
                   CreatedBy               INTEGER REFERENCES UserMaster(UsermasterId) ON UPDATE RESTRICT ON DELETE RESTRICT, \
                   CreatedOn               DATE, \
                   UpdatedBy               INTEGER REFERENCES UserMaster(UsermasterId) ON UPDATE RESTRICT ON DELETE RESTRICT, \
                   UpdatedOn               DATE, \
                   FlagGSM                 UNSIGNED TINYINT, \
                   FlagUSB                 UNSIGNED TINYINT, \
                   PRIMARY KEY (MilkCollectionId) )"; 
```

创建此表后，我删除了旧的数据库文件。

我仍然收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:48:53.423

在您的`INSERT`命令中，您有 39 个列名，但只有 38 个`NULL`/`?`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T12:47:32.573

很高兴知道您将 SQLlite 与 AM1808 处理器集成。目前我正在做同样的事情。请让我知道如何获取 SQLlite 的源代码，如何为我们的处理器和示例应用程序从 c 编译它以创建、插入表等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T13:58:12.123

`CREATE TABLE`**`IF NOT EXISTS`**

您更改了 SQL DDL 命令来创建表，但新命令从未运行，因为该表已经存在。

您需要检查架构是否正确，导出数据，删除或重命名表，使用新的正确列列表创建表，并导入旧数据（为新列提供适当的值）。

# android - android webview放大/缩小错误

> ID：12757579
> 
> 赞同：0
> 
> 时间：2012-10-06T07:04:37.033
> 
> 标签：android, webview, zooming

我在 webview 上设置了缩放控制

```
webview.getSettings().setBuiltInZoomControls(true);
webview.getSettings().setSupportZoom(true); 
```

但它不能正常工作。

如果我触摸屏进行缩小（多点触摸使用手指）它在触摸屏状态下工作。

但如果我分离屏幕，它会恢复初始大小。

和缩放控制记住缩小操作正常工作。所以我再做一次

和缩放控制'+'按钮改变禁用状态（MAX缩小状态）

但网页仍然没有改变。（变焦不起作用）

我认为这是错误..

该网页是由程序制作的html

像这样

```
<meta http-equiv=’Content-Type’ content=’text/html; charset=utf-8′ />
<html>
<body>
<img src="my image url" width="100%"></img></br>
</body>
</html> 
```

它是如此简单的html源代码。

有什么想法吗？

我可以修复它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T09:53:48.523

我有一个非常相似的问题，并且认为您必须用绝对宽度替换相对宽度。问题的根源在于，webview 会在您缩放后重新计算宽度，并再次缩放图像以适应 100% 的屏幕宽度。我将图像大小调整为以像素为单位的屏幕大小（直接生成到 html 代码中）。然后缩放工作没有问题。

请参阅：[设置 webview 的最小缩放级别 (Android)](https://stackoverflow.com/questions/19593853/set-minimum-zoom-level-of-webview-android?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:17:54.057

只需从图像标签中删除 width="100%" 即可。它将开始神奇地工作。

# jquery - jQuery：从 HTML 计算值

> ID：12757589
> 
> 赞同：0
> 
> 时间：2012-10-06T07:06:10.370
> 
> 标签：jquery, html

我想通过选择某种运输方式来计算总值，然后该值将与订单小计相加。

但是当我选择一种运输方式然后选择另一种运输方式时，总价值与新的和以前选择的总和。例如。开始时总计：200 然后单击“DHL 标准递送：10.50 美元”-> 总计 = 210.50。之后，点击“DHL快递：$42.50”->总计=252.50，但应该是242.50

我该如何解决这个问题？

这是我的 jQuery 代码

```
 $("input:radio[name=shipping]").click(function(){
                var total = 0;
                $("input:radio[name=shipping]:checked").each(function() {
                    total += parseFloat($(this).val());
                });
                var current = parseFloat($('#total').val());
                $("#shipping").html(total);
                total += current;
                $("input:text[name=total1]").val(total);

            }); 
```

HTML 代码

```
<tr valign="top">
    <td>Select Shipping method</td>
<td>
    <input id="shipping_method" type="radio" name="shipping" value="10.50"> DHL standard delivery : $10.50<br>

    <input id="shipping_method" type="radio" name="shipping" value="42.50"> DHL express delivery : $42.50<br>
    <input id="shipping_method" type="radio" name="shipping" value="0.00"> pick up : $0.00<br><br>
</td>
 </tr>

 <tr>
 <td>Order Subtotal<td><label id="subtotal" value="">$200.00</label>
 </tr>
 <tr><td>&nbsp;</tr>
 <tr>
    <td>Shipping<td>$<span id="shipping">0.00</span>
 </tr>
 <tr><td>&nbsp;</tr>
 <tr>               
 <td>Total<td>  $<input type="text" id="total" name="total1" value="252.50" style="border:0px;">
 </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:24:26.203

您确定要将交货添加到小计而不是总计吗？我的字典将总计定义为“多个部分的完整总和”，这意味着您不应该再添加任何内容。你需要

```
var current = parseFloat($('#subtotal').text()); 
```

并从其 html 中删除 $ 符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:22:36.843

试试这个通知我改变了附加的总变量。

```
 <script>
 $(document).ready(function() { 
                $("input:radio[name=shipping]").click(function(){
                    var total = 0;
                    $("input:radio[name=shipping]:checked").each(function() {
                        total = parseFloat($(this).val());
                    });
                    var current = parseFloat($('#total').val());
                    $("#shipping").html(total);
                   total =  total + parseInt($('#subtotal').text().replace('$',''));
                    $("input:text[name=total1]").val(total);

                });
            }); 
</script> 
```

# ruby-on-rails - 如何在 postgres 中恢复 my_backup.tar？

> ID：12757601
> 
> 赞同：2
> 
> 时间：2012-10-06T07:07:45.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我曾使用 Backup gem 来创建 Postgresql DB 的备份。

“backup perform -t my_backup”在2012.10.06.12.30.11文件夹中生成一个my_backup.tar文件

tar 文件包含 image.tar 和 .sql 文件。

从这个 tar 文件恢复数据库的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:21:20.943

做一个 rake 任务（假设你的 SQL 文件名为`foo.sql`）

```
namespace :db do
  task import: :environment do
    import_path = "/tmp/import"
    sql_file = "foo.sql"
    database_config = Rails.configuration.database_configuration[Rails.env]

    # Unpack
    system "tar xf my_backup.tar -C #{import_path}"
    system "gzip -df #{import_path}/#{sql_file}.gz"

    # Import
    system "psql --username=#{database_config['username']} -no-password #{database_config['database']} < #{import_path}/#{sql_file}"
  end
end 
```

确保您的数据库用户具有`superuser`or`createdb`角色。

# algorithm - 如何攻击这个拼图难题？

> ID：12757602
> 
> 赞同：6
> 
> 时间：2012-10-06T07:07:49.240
> 
> 标签：algorithm, tiling

[SRM 209 上的 1000 分问题，第一部分]

在某个阶段，问题归结为以下几点：

给定三个正方形单元的块，如下所示，可以以任何方式旋转，有多少种方式可以填充给定大小的矩形块。

```
| x | x |
| x | 
```

例如，对于 3x4 的块，有 4 种排列这些块的方式。我正在寻找一种方法来解决这个问题，而不是实际的解决方案。我该如何寻找方法的数量。它可能发生的方式有很多，而且我也没有看到 DP 方法的重叠子问题。

欢迎任何见解。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T08:49:11.620

无一例外，每一个 pxq 空间块与 L 形瓷砖的平铺，都将减少为 2x3 块的平铺，由一对 L 形平铺组成。即瓷砖要么采用以下形式：

```
 xx      xx
        xy  or  yx  to form a vertical 2x3 block or
        yy      yy

        xyy       xxy
        xxy  or   xyy  to form a horizontal 3,2 block. 
```

因此，您已经可以将您的问题简化为 2x3 和 3x2 矩形的“镶木地板”平铺。当然，除非您正在平铺不规则的非矩形区域 - 在这种情况下，您必须单独考虑 L 形瓷砖。

# php - 具有 5000 行的 php require_once 文件与较小的 require_once 文件

> ID：12757604
> 
> 赞同：1
> 
> 时间：2012-10-06T07:07:58.217
> 
> 标签：php, memcached, require-once

我已经阅读了很多关于这个主题的不同答案。我搜索的越多，它就越多样化。我有一个包含所有站点功能的 require_once 文件，但这已增长到 5000 行。是时候让我打破它了吗？这样做是否有效率？目前，每个页面显然都必须遍历它不会使用的多行。

我也听说过 apc 和 memcache。这些选项是否存在任何重大问题？

希望有人能澄清一下。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:08:33.767

您应该组织您的包含文件，以便不相关的功能位于不同的文件中，然后应用程序可以包含它需要的功能。

你关于 apc 和 memcache 的问题不是很清楚——你关心什么样的问题？无论如何，您不应该将不相关的问题放在同一个帖子中。像“有问题”这样的一般性问题在 SO 上并不合适。这是针对特定的编程问题——您发布的代码不起作用，人们会帮助您修复它。

# linux - sed 命令编辑多个文件（插入，替换行）

> ID：12757611
> 
> 赞同：3
> 
> 时间：2012-10-06T07:09:07.117
> 
> 标签：linux, shell, sed

Ive 30 个文件命名（ db01.php 到 db30.php ）

包括这一行

```
 require_once('config.php'); 
```

我想添加或替换它

```
 require_once('../new/config.php'); 
```

如何使用sed一次编辑这30个文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:13:17.293

```
sed -i 's/\(require_once(.\)\(config\.php.);\)/\1..\/new\/\2/' db*.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:26:07.140

```
sed -i "s/\(require_once('\)\(.*\.php\)\(');\)/\1..\/new\/\2\3/" db*.txt 
```

# android - 如何在设备上未安装应用程序的情况下打开 PDF 文件

> ID：12757613
> 
> 赞同：1
> 
> 时间：2012-10-06T07:09:30.563
> 
> 标签：android, pdf

我有一个需要打开 PDF 文件的应用程序。我不想用安装在 Android 手机中的任何应用程序打开它。因此，如果我的手机中没有安装处理 PDF 文件的应用程序，我的 PDF 文件无论如何都应该打开。

我搜索了很多链接，但没有找到类似上述内容的内容。有没有人有这方面的知识？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:13:51.380

请看一下这个源代码。

*   [Android PDF 查看器](http://code.google.com/p/apv/)
*   [APDF查看器](http://code.google.com/p/apdfviewer/)
*   [机器人阅读器](http://code.google.com/p/droidreader/)
*   [安卓-pdf](http://code.google.com/p/android-pdf/)

您可以下载应用程序的源代码并使用它

# scala - 需要澄清 scala 中的构造函数定义语法

> ID：12757616
> 
> 赞同：6
> 
> 时间：2012-10-06T07:10:14.963
> 
> 标签：scala

我是 scala 的新手，需要澄清以下涉及类的构造函数的代码片段。

```
class sample (a: Int, b: Int) {
/* define some member functions here */
} 
```

我可以接受这些变量`a`并且`b`是类私有的`sample`吗？

```
class sample (val a: Int, val b: Int) {
/* define some member functions here */
} 
```

在这种情况下，是否可以`a`公开`b`访问？`val`在构造函数的参数列表中添加关键字的确切效果是什么？如果我使用`def`关键字而不是`val`，它是否也具有相同的效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-27T21:25:38.710

以下 Scala 类显示了构造函数参数的四种可能性（3 种不同的声明，其中一种具有两种效果）：

```
class ConstructorParams (local:Int, prvt:Int, val readonly:Int, var writable:Int) {
  def succ_prvt() = prvt + 1
} 
```

1.  第一个参数`local`没有被任何方法引用。它仅作为构造函数中的局部变量存在（字段初始化程序可以引用它而不更改它；尝试添加`val foo = local`到构造函数）。
2.  第二个，`prvt`，被一个方法引用，所以它成为一个私有字段。
3.  第三`val`个声明器创建一个 getter 和一个私有支持字段。
4.  第四个的`var`声明器创建了一个 getter 和一个 setter，以及一个私有的支持字段。

特别要注意，没有`val`or`var`声明符的构造函数参数是私有的（这是一个可访问性的问题），只有当它在类中的函数中被引用时；否则，它是本地的（这是范围问题）。

从技术上讲，最后三个参数作为本地值和私有字段（初始化为本地值）存在，但这种区别不应该出现太多，所以你基本上可以忘记它。

`def`作为参数声明符没有多大意义，因为它用于引入新函数，而不是声明值/变量名；它也不用于函数参数（构造函数参数与函数参数密切相关）。由于函数是第一类，因此您使用函数类型而不是特殊的声明符来声明参数包含函数。

`ConstructorParams`通过传递给编译器打印出编译器所做的事情`-Xprint:constructors`，我们得到（添加了注释）：

```
class ConstructorParams extends Object {
    /* 2nd (no-declarator) param becomes private field due to reference in `succ_prvt()` */
    <paramaccessor> private[this] val prvt: Int = _;

    /* `val` becomes private field + getter */
    <paramaccessor> private[this] val readonly: Int = _;
    <stable> <accessor> <paramaccessor> def readonly(): Int = ConstructorParams.this.readonly;

    /* `var` becomes private field + getter + setter */
    <paramaccessor> private[this] var writable: Int = _;
    <accessor> <paramaccessor> def writable(): Int = ConstructorParams.this.writable;
    <accessor> <paramaccessor> def writable_=(x$1: Int): Unit = ConstructorParams.this.writable = x$1;

    /* causes `prvt` constructor param to become private field */
    def succ_prvt(): Int = ConstructorParams.this.prvt.+(1);

    def <init>(local: Int, prvt: Int, readonly: Int, writable: Int): ConstructorParams = {
        ConstructorParams.this.prvt = prvt;
        ConstructorParams.this.readonly = readonly;
        ConstructorParams.this.writable = writable;
        ConstructorParams.super.<init>();
        ()
    }
} 
```

上面的示例类编译为 Java 等价物：

```
public class ConstructorParams {
    /* 2nd (no-declarator) param becomes private field due to reference in `succ_prvt()` */
    private final int prvt;

    public int succ_prvt() {
        return this.prvt + 1;
    }

    /* `val` becomes private field + getter */
    private final int readonly;
    public int readonly() { return this.readonly; }

    /* `var` becomes private field + getter + setter */
    private int writable;
    public int writable() { return this.writable; }
    public void writable_$eq(int x$1) {
        this.writable = x$1;
    }

    /* 1st param is local, since it's not referenced in any other methods */
    public ConstructorParams(int local, int prvt, int readonly, int writable) {
        /* parent constructor is invoked implicitly, so not repeated here */
        this.prvt = prvt;
        this.readonly = readonly;
        this.writable = writable;
    }
} 
```

如果您`javap`在 ConstructorParams 上使用参数（就像 Brian 所做的那样）`-p`，您将看到与上述 Java 源代码中的类签名等效的类签名。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T07:34:52.590

```
class sample (a: Int, b: Int) 
```

在这种情况下，a 和 b 是私有的。用 javap 反汇编显示 a 和 b 不是类的一部分（Scala 调用这些类字段）：

```
public class Sample extends java.lang.Object implements scala.ScalaObject{
    public Sample(int, int);
} 
```

a 和 b 以 val 开头。使用 javap 反汇编显示 a 和 b 现在是 Sample 中的公共字段。

`class sample (val a: Int, val b: Int)`

```
public class Sample extends java.lang.Object implements scala.ScalaObject{
    public int a();
    public int b();
    public Sample(int, int);
} 
```

`def`而不是在`val`构造函数中，它不会编译。`def`用于定义功能。不确定是否可以`def`在构造函数中用作参数。

另外，请注意，私有和受保护的行为与您预期的一样。鉴于这种：

```
class Sample(private val a: Int, protected val b: Int, val c: Int) 
```

使用 javap 反汇编为以下内容：

```
public class Sample extends java.lang.Object implements scala.ScalaObject{
    public int b();
    public int c();
    public Sample(int, int, int);
} 
```

# java - 当我尝试删除多个选定的行时；只有少数 r 删除不是全部

> ID：12757617
> 
> 赞同：0
> 
> 时间：2012-10-06T07:10:18.693
> 
> 标签：java, swing

当我`rowcount`点击删除按钮打印时，它会打印一些任意值。我正在使用由我创建的表模型作为`dt`. 它打印一些大的任意值。请帮助更正此代码。

```
/*
 * UpdateGymFees.java
 *
 * Created on Sep 21, 2012, 2:26:37 PM
 */
package gymmain;

import java.sql.*;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.ListSelectionModel;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;

/**
 *
 * @author sony
 */
public class UpdateGymFees extends javax.swing.JFrame implements Runnable {
    //String  r[] = new String [7];
    //String r1,r2,r3,r4,r5,r6;

    String b[] = new String[4];
    int v[] = new int[5];
    int c[] = new int[100];
    JComboBox c1 = new JComboBox();
    JComboBox c2 = new JComboBox();
    JComboBox c3 = new JComboBox();
    DefaultTableModel dt;
    DB data = new DB();
    Thread t1;

    /**
     * Creates new form UpdateGymFees
     */
    public UpdateGymFees() {

        setVisible(true);
        t1 = new Thread(this);
        t1.start();

        data.dbConnect();
        initComponents();
        jTable1.setRowSelectionAllowed(true);
        jTable1.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        String a[][] = new String[1000][1000];
        int i = 0;
        try {
            ResultSet rs1 = data.st.executeQuery("select * from UpdateGymFees");

            // Variables declaration - do not modify

    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private com.toedter.calendar.JDateChooser jDateChooser1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    // End of variables declaration

    public void run() {
        while (true) {
            try {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException ex) {
                    Logger.getLogger(MemberReg.class.getName()).log(Level.SEVERE, null, ex);
                }
                for (int q = 0; q < jTable1.getRowCount(); q++) {
                    if (("" == null ? jTable1.getValueAt(q, 4).toString() != null : !"".equals(jTable1.getValueAt(q, 4).toString()))
                        && ("" == null ? jTable1.getValueAt(q, 5).toString() != null : !"".equals(jTable1.getValueAt(q, 5).toString()))
                        && ("" == null ? jTable1.getValueAt(q, 6).toString() != null : !"".equals(jTable1.getValueAt(q, 6).toString()))) {
                        int z = 4, y = 0;
                        while (z < 7) {
                            b[y] = jTable1.getValueAt(q, z).toString();
                            v[y] = Integer.parseInt(b[y]);
                            z++;
                            y++;
                        }
                        v[3] = v[1] - v[2] + v[0];
                        v[4] = v[1] + v[0];
                        b[3] = Integer.toString(v[3]);
                        jTable1.setValueAt(v[3], q, 7);
                        System.out.print(v[3]);
                    }
                }
            } catch (NullPointerException npe) {
            }
        }
    }
} 
```

*编辑*

评论中的删除操作代码：

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    System.out.println(jTable1.getRowCount());
    int c[] = jTable1.getSelectedRows();
    for (int i = 0; i < jTable1.getSelectedRowCount(); i++) {
        try {
            dt.removeRow(c[i]);
            System.out.println(c[i]);
            System.out.println(jTable1.getSelectedRowCount());
        } catch (ArrayIndexOutOfBoundsException e) {
            JOptionPane.showMessageDialog(null, "Select the row to be deleted");
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T09:10:15.033

您的删除操作的问题是您删除了错误的行：

```
 int c[]=jTable1.getSelectedRows(); 
 for(int i=0; i< jTable1.getSelectedRowCount();i++ ) { 
   try{
     dt.removeRow(c[i]); 
```

您首先将行的索引存储在 中`c[]`，然后将它们一一删除。但是，当您删除第一行时，`c[]`由于表的行数已更改，其余索引变得无效。您要么必须一次全部删除它们，要么调整您的索引。

对您在问题中发布的代码的进一步评论：

*   数据库连接和访问/修改 Swing 组件不应同时发生`Thread`。将您的数据库操作移至后台`Thread`。有关更多信息，请参阅[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)指南中的并发性
*   永远不要在事件调度线程上休眠（不确定您的休眠是否实际上在 EDT 上，但由于您正在访问摆动组件，`Runnable`因此它应该在 EDT 上）
*   您希望`"" == null`代码中的所有这些检查会发生什么。这将始终评估为`false`
*   我也怀疑`jTable1.getValueAt(q, 4).toString() != null`电话是否会评估为`false`. 这意味着您有一个`toString`方法返回的类`null`，这将非常奇怪。您更有可能`JTable`包含一个`null`值，在这种情况下，您已经`NullPointerException`通过调用`toString`它触发了
*   s 的所有这些`try-catch`语句`RuntimeException`（喜欢`NullPointerException`并且`ArrayOutOfBoundsException`通常不需要。请参阅上面提到的原因。如果我在代码中遇到这些，警钟就会响起，我会尝试找出为什么首先发生该异常并避免它，而不是抓住它。

# java - 如何在泛型类中创建方法

> ID：12757625
> 
> 赞同：0
> 
> 时间：2012-10-06T07:12:40.227
> 
> 标签：java, generics

```
public class MyArray<V> {
    private ArrayList<V> elements;

    // Creates a MyArray of size "size" and fill it with null objects.
    // Throws NegativeArraySizeException if "size" is negative.
    public MyArray(int size) throws NegativeArraySizeException 
```

我如何创建这个数组，我对使用的泛型类感到困惑，并且用空对象填充它是否意味着将其留空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:18:36.780

首先，无需在您提供的代码中创建 Java 数组。您需要做的是创建并填充一个`ArrayList<V>`. 这很简单：

```
public MyArray(int size) throws NegativeArraySizeException {
    elements = new ArrayList<V>(size);  // 'size' is the capacity argument
    for (int i = 0; i < size; i++) {
        elements.add(null);
    }
} 
```

* * *

至于评论中提到的另外两个构造函数，我看不出你的困难是什么。`elements.add`实际上，使用适当的参数调用适当的次数只是简单的 Java 代码。

（我不会给你代码，因为要么你已经有能力自己编写它，要么你需要学习如何去做。）

* * *

> 如果我在其中创建另一个名为我的数组和字符串元素的数组，我怎么能有一个复制方法来将元素从第一个复制到第二个？有内置的方法吗？

这完全没有意义。但是有一些库方法可以创建作为现有数组副本的数组和作为现有集合副本的集合。您可以在`MyArray`构造函数中使用它们。查看各种集合（即List/Set/Map）实现类的`Arrays`类、类和复制构造函数。`Collections`

# jquery - 特定用户的 Cookie JSON

> ID：12757626
> 
> 赞同：0
> 
> 时间：2012-10-06T07:12:47.933
> 
> 标签：jquery, cookies

我创建的 cookie 有问题。

与[这个问题](https://stackoverflow.com/questions/12757271/cookie-always-null)相关，我的 cookie 现在正在工作。问题是如果我更改了用户，仍然会显示相同的 cookie。有没有办法确保特定的 cookie 是针对特定用户的？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:26:23.107

看来您以前的代码仅在为空时触发cookie创建

```
if ($.cookie('cookieCreditDash') == null) {
  ...
} 
```

所以我建议你每次触发用户注销事件时都清除 cookie。

```
$.removeCookie('cookieCreditDash'); 
```

或者，如果您可以在不退出任何用户的情况下更改用户，则`saveCreditCookie`每次更改用户时都触发函数。不确定如何在您的应用程序中检测到。

```
$.getJSON(url, function(data) {
  saveCreditCookie(data);
}); 
```

# java - ListView 项目未使用 AsyncTask 加载

> ID：12757628
> 
> 赞同：0
> 
> 时间：2012-10-06T07:12:58.960
> 
> 标签：java, android, json, listview, android-asynctask

首先，我要感谢曾经在这个社区帮助过我的每一个人。

我正在尝试在我的活动中加载 Listview 项目（从服务器下载）。因为我使用的是 GingerBread，所以我尝试不使用 AsyncTask 来完成它，并且效果很好。

当我尝试在 AsyncTask 中执行此操作时，列表仍然为空。我还尝试将某些部分从 DoInBackground 移动到 onPostExecute 并且没有任何变化。所以你能帮帮我吗？

这是我的代码（在第二个答案后更新）

```
MAIN

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class StudentMSG extends ListActivity {
    // url to make request
    private static String url = "http://www.xxxxxxxxxxxxx?requsted=xxxxxxxxx";
    // JSON Node names
    private static final String TAG_CONTACTS = "contacts";
    private static final String TAG_ID = "message_id";
    private static final String TAG_NAME = "sender_id";
    private static final String TAG_EMAIL = "title";
    private static final String TAG_ADDRESS = "message_id";
    private static final String TAG_GENDER = "READ";
    private static final String TAG_PHONE = "message_id";
    private static final String TAG_PHONE_MOBILE = "message_id";
    private static final String TAG_PHONE_HOME = "message_id";
    private static final String TAG_PHONE_OFFICE = "message_id";
    ListView lv;
    ArrayList<HashMap<String, String>> contactList ;
    JSONObject json ;
    ListAdapter adapter;
    // contacts JSONArray
    JSONArray contacts = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        load task=new load();
        task.execute();

    }

    public class load extends AsyncTask<Void, Void , Void>
    {
        @Override
        protected Void doInBackground(Void... params) {

            // Hashmap for ListView
            contactList = new ArrayList<HashMap<String, String>>();

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
             json = jParser.getJSONFromUrl(url);
                try {
                    contacts = json.getJSONArray(TAG_CONTACTS);
                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
                    String email = c.getString(TAG_EMAIL);
                    String address = c.getString(TAG_ADDRESS);
                    String gender = c.getString(TAG_GENDER);

                    // Phone number is agin JSON Object

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_EMAIL, email);
                    map.put(TAG_GENDER, gender);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            return null;

        }
        protected void onPostExecute() {

            String[] s = { TAG_NAME, TAG_EMAIL , TAG_GENDER};
            int[] n = {R.id.name, R.id.email , R.id.mobile };
          adapter = new SimpleAdapter(StudentMSG.this, contactList,R.layout.list_item,s,n );
            setListAdapter(adapter);
    }
}
} 
```

这是 JSON 解析器类

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        //"ISO-8859-1,utf-8;q=0.7,*;q=0.7"
        //"iso-8859-1"
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "utf-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:27:03.000

```
replace ur code by this=
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class StudentMSG extends ListActivity {
    // url to make request
    private static String url = "XXXXXXXXXXXXXXXXXXXX/json.php";
    // JSON Node names
    private static final String TAG_CONTACTS = "contacts";
    private static final String TAG_ID = "message_id";
    private static final String TAG_NAME = "sender_id";
    private static final String TAG_EMAIL = "title";
    private static final String TAG_ADDRESS = "message_id";
    private static final String TAG_GENDER = "READ";
    private static final String TAG_PHONE = "message_id";
    private static final String TAG_PHONE_MOBILE = "message_id";
    private static final String TAG_PHONE_HOME = "message_id";
    private static final String TAG_PHONE_OFFICE = "message_id";
    ListView lv;
    ArrayList<HashMap<String, String>> contactList ;
    JSONObject json ;
    ListAdapter adapter;
    // contacts JSONArray
    JSONArray contacts = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        load task=new load();
        task.execute();

    }

    public class load extends AsyncTask<Void, Void , Void>
    {
        @Override
        protected Void doInBackground(Void... params) {

            // Hashmap for ListView
            contactList = new ArrayList<HashMap<String, String>>();

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
             json = jParser.getJSONFromUrl(url);
                try {
                    contacts = json.getJSONArray(TAG_CONTACTS);
                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
                    String email = c.getString(TAG_EMAIL);
                    String address = c.getString(TAG_ADDRESS);
                    String gender = c.getString(TAG_GENDER);

                    // Phone number is agin JSON Object

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_EMAIL, email);
                    map.put(TAG_GENDER, gender);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            return null;

        }
        protected void onPostExecute() {

            String[] s = { TAG_NAME, TAG_EMAIL , TAG_GENDER};
            int[] n = {R.id.name, R.id.email , R.id.mobile };
          adapter = new SimpleAdapter(StudentMSG.this, contactList,R.layout.list_item,s,n );
            setListAdapter(adapter);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:19:32.317

你不能通知 SimpleAdapter 你需要使用 ArrayAdapter 来通知数据......如果你想要每个列表项中的不同视图，你需要通过 BaseAdapter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:30:41.737

本教程表明我想要什么和意思.. [http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) 感谢所有参与者..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T12:14:03.353

在您发布的 Execute 方法上：

```
protected void onPostExecute() {
    runOnUiThread(new Runnable() {
       public void run() {
             String[] s = { TAG_NAME, TAG_EMAIL , TAG_GENDER};
             int[] n = {R.id.name, R.id.email , R.id.mobile };
             adapter = new SimpleAdapter(StudentMSG.this, contactList,R.layout.list_item,s,n );
             setListAdapter(adapter);
}}}; 
```

这将防止它崩溃。希望有帮助

# xml - 无法工作的订单

> ID：12757629
> 
> 赞同：1
> 
> 时间：2012-10-06T07:13:02.533
> 
> 标签：xml

我有一个如下所示的 xml 文件，我想对 toyID 进行分组并获得该玩具已售出的总和。并按销售额最高的 toyID 排序。但是我编写的代码能够汇总玩具销售量，但是按玩具销售量最高的顺序不起作用。我能知道我做错了哪一部分吗？

```
 ToySale.XML
 <toySale companyID="1" toyID="11" >
   <amount>15</amount>
 </toySale>
 <toySale companyID="3" toyID="11" >
   <amount>12</amount>
 </toySale>
 <toySale companyID="1" toyID="22" >
   <amount>3</amount>
 </toySale>
 <toySale companyID="2" toyID="33" >
   <amount>7</amount>
 </toySale> 
```

下面是我写的代码：

```
for $t in distinct-values(ToySale.xml")//@toyID)
return <toyID>
            toyID : {$t} 

          <totalSale>{sum(for $sum in (ToySale.xml")//toySale
                     order by $sum/@toyID/../amount     
                     where $t=$sum/@toyID
                     return $sum/@productID/../amount)  }

           </totalSale

        </toyID> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:42:12.383

```
(:
     Find total sales of each toy sold!

     I tried this query here!   http://www.zorba-xquery.com/html/demo
 :)
let $xml := (
    <toySales>
        <toySale companyID="1" toyID="11" >
            <amount>15</amount>
        </toySale>
        <toySale companyID="3" toyID="11" >
            <amount>12</amount>
        </toySale>
        <toySale companyID="1" toyID="22" >
            <amount>3</amount>
        </toySale>
        <toySale companyID="2" toyID="33" >
            <amount>7</amount>
        </toySale>
    </toySales>
)

let $toy-sales := $xml//toySale
for $toy-id in distinct-values($xml//@toyID)
let $total-amount-sold := fn:sum($toy-sales[@toyID = $toy-id]/amount)
return (

   element toy-sale {       
        attribute toy-id { $toy-id },
        text { 
            fn:concat("Total amount sold: ", $total-amount-sold)        
        }
   }
) 
```

返回

```
<toy-sale toy-id="11">Total amount sold: 27</toy-sale>
<toy-sale toy-id="22">Total amount sold: 3</toy-sale>
<toy-sale toy-id="33">Total amount sold: 7</toy-sale> 
```

xquery #1 最好的^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:15:42.670

**这个查询**：

```
 for $vId
     in (/*/toySale/@toyID)
                     [index-of(/*/toySale/@toyID, .)[1]]

    let $vSales := /*/toySale[@toyID eq $vId]

    order by sum($vSales/amount) descending

   return
     <sale toy-id="{$vId}" total="{sum($vSales/amount)}"/> 
```

**应用于提供的 XML 文档时**：

```
<toySales>
    <toySale companyID="1" toyID="11" >
        <amount>15</amount>
    </toySale>
    <toySale companyID="3" toyID="11" >
        <amount>12</amount>
    </toySale>
    <toySale companyID="1" toyID="22" >
        <amount>3</amount>
    </toySale>
    <toySale companyID="2" toyID="33" >
        <amount>7</amount>
    </toySale>
</toySales> 
```

**产生想要的正确结果**：

```
<sale total="27" toy-id="11"/>
<sale total="7" toy-id="33"/>
<sale total="3" toy-id="22"/> 
```

* * *

**等效且稍短的查询**：

```
 for $vId in distinct-values(/*/toySale/@toyID)

     let $vSales := /*/toySale[@toyID eq $vId]

     order by sum($vSales/amount) descending

    return
       <sale toy-id="{$vId}" total="{sum($vSales/amount)}"/> 
```

# perl - 旋转 3d 结构

> ID：12757631
> 
> 赞同：2
> 
> 时间：2012-10-06T07:13:25.957
> 
> 标签：perl, vector, 3d, rotation

我有一个数组，其中包含 3d 建模信息 x、y、z 坐标，用于旋转并放置在所需姿态的结构。我还有一个新数组，它具有类似的结构，没有旋转或放置。新结构坐标从 [0 0 0] 开始。通过将正确旋转的数组的第一个元素添加到非结构化数组中，很容易将结构的第一部分放到正确的位置。我现在的问题是轮换。如何旋转新元素以使其与正确旋转数组的 x、y 和 z 中的角度相匹配？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:29:37.540

如果您可以从数据中找到三个代表向量*up*、*front*和*right*，那么旋转矩阵将是：

```
[rx ux fx ox]
[ry uy fy oy]
[rz uz fz oz]
[ 0  0  0  1] 
```

其中 O = [ox oy oz] 是原点

如果您对旋转结构的几何结构有足够的了解，这是可行的。

从单位矩阵和旋转矩阵的解释可以看出它为什么起作用：
在参考坐标系中

```
 'Right' = [1 0 0 0], 
 'Up'    = [0 1 0 0],
 'Front' = [0 0 1 0],

 Multiplying each of these by the rotation matrix:
   [a d g 0]   Right*R = [a b c 0];
 R=[b e h 0]   Up * R  = [d e f 0];
   [c f i 0]   Front*R = [g h i 0];
   [0 0 0 1] 

 If there is no rotation, R = I == identity matrix; 

 Then Right * I = [1 0 0 0]; Up*I = [0 1 0 0 ]; Front*I = [0 0 1 0]; 
```

相反，如果你知道你的几何图形包含一个立方体（甚至可能缩放......）
然后知道旋转顶点数组中的哪个点对应于点 *o*，*F*，*R*，*U*，在立方体的情况下，这在很大程度上是一个问题选择...

```
 U
 |
 |        ___---F
 |  ___---    
 o--
    --__
        --R 
```

前向量 = (Fo)/|Fo|，右 = (Ro)/|Ro|，上 = (Uo)/|Uo|

# java - 游戏场景的多个 JFrame

> ID：12757632
> 
> 赞同：2
> 
> 时间：2012-10-06T07:13:25.830
> 
> 标签：java, swing, jframe

如果标题措辞有点不正确，我很抱歉。

最近开始了一个新的Game项目，有想过`JFrame`在Java中使用多个s。

原因是我的游戏有 2`JFrame`秒：

1）主菜单（这是一个单例）

2) 战斗。

现在 MainMenu将在自己的 EDT 上`JFrame`初始化 Battle ，然后通过 隐藏自己，当游戏结束时，可以从 MainMenu 框架单例上的 Battle 框架调用。`JFrame``setVisible(false)``setVisible(true)`

注意：我这样做的原因是 MainMenus EDT 可以在 Battle 中重复使用，`JFrame`因此只有 1 个 EDT 但有 2 个 JFrame。为了防止战斗框架处于活动状态（因为在同一 EDT 上被关闭后），我这样做`setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`

问题：

这是允许的还是有更好的方法？

我想到了一个`CardLayout`，但是因为`GamePanel`每次用户按下 Start 时都必须创建一个新`JButton`实例，所以我无法启动单个实例并将其设置为卡

问的原因是我知道在 Java 中进行游戏编程时，你会做很多不被认为是好的做法的事情（比如设置位置和总体上不使用 LayoutManager）

*为了帮助在Start Game* 的 actionPerformed() 方法中的 MainMenu UI 中澄清，`JButton`我有：

```
 class MainMenu extends JFrame implements ActionListener {
        ...
            public void actionPerformed(..){
            NarutoGame narutoGame = null;
                narutoGame = new NarutoGame(...);

            narutoGame.setVisible(true);//running in MainMenu EDT
            //set this panels containing frame (MainMenu) to not visible
            }
        ...
   MainMenu getInstance() {
        ...
   }
 } 
```

在 Battle JFrame 中游戏结束时：

```
class BattleField extends JFrame  {
    ...
    private void gameOver() {
        MainMenu.getInstance().setVisible(true);
        dispose();//dipsose of Battle JFrame
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:47:42.840

[为了培养人们对怀疑](http://en.wikipedia.org/wiki/Suspension_of_disbelief)的意愿，以及为了简单的多样性，游戏经常以新颖的方式推动用户界面设计。在实践中，多帧的吸引力可能*不会*超过风险。除了这里引用的众所周知的问题[，我还要加上这里](https://stackoverflow.com/a/9554657/230513)[引用](https://stackoverflow.com/a/6310284/230513)的噩梦。

如果`CardLayout`不合适，[`Buttons`](https://sites.google.com/site/drjohnbmatthews/buttons)是一个简单地调用`removeAll()`in的示例`resetGame()`。

# google-app-engine - Google App Engine JDO - 查询结果集不可修改

> ID：12757638
> 
> 赞同：2
> 
> 时间：2012-10-06T07:13:55.230
> 
> 标签：google-app-engine, jdo

[例外：查询结果集不可修改](https://stackoverflow.com/questions/3913583/exception-query-result-sets-are-not-modifiable) 我在这里看到了类似的问题，但它没有回答我的问题，所以我决定开始一个新的。

我正在尝试通过临时存储 Google App Engine 的 High Replication 数据存储来解决读取不一致的问题 ( [https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/E95wH0RkJUE](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/E95wH0RkJUE) )静态变量中最后添加的对象。

每当用户添加一个新航班时，它不会直接保存新航班对象，而是将其作为静态变量存储在 PMF 中。

因此，当在查询中获取航班列表时，它将结果存储在列表中，并将列表与最后添加的对象进行比较，如果最后添加的对象不在列表中，我手动将最后添加的对象添加到名单。

但是，使用此方法，每当列表中缺少新添加的对象并且我手动添加它时，我都会收到以下异常。

```
Oct 6, 2012 2:19:38 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /
java.lang.UnsupportedOperationException: Query result sets are not modifiable
    at org.datanucleus.store.query.AbstractQueryResult.add(AbstractQueryResult.java:222)
    at com.jimfoo88.helloorm.GetFlights.queryJDO(GetFlights.java:101)
    at com.jimfoo88.helloorm.GetFlights.doGet(GetFlights.java:50)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我下面的代码基于谷歌应用引擎示例 HelloORM [http://code.google.com/p/datanucleus-appengine/source/browse/trunk/demos/helloorm/src/com/google/appengine/demos/helloorm /GetFlights.java?r=736](http://code.google.com/p/datanucleus-appengine/source/browse/trunk/demos/helloorm/src/com/google/appengine/demos/helloorm/GetFlights.java?r=736)

我只展示我为简化阅读而修改的部分。

## AddFlight.java

```
private void doPostJDO(Flight f) {
    PersistenceManager pm = PMF.get().getPersistenceManager();
    PMF.setLastObjectAdded(f);
    try {
      pm.makePersistent(f);
    } finally {
      pm.close();
    }
  } 
```

## PMF.java

```
// Copyright 2008 Google Inc. All Rights Reserved.
package com.jimfoo88.helloorm;

import javax.jdo.JDOHelper;
import javax.jdo.PersistenceManagerFactory;

/**
 * @author Max Ross <maxr@google.com>
 */
public final class PMF {

    private static Object lastObjectAdded;

  private static final PersistenceManagerFactory INSTANCE = JDOHelper.getPersistenceManagerFactory("transactions-optional");

  public static Object getLastObjectAdded() {
    return lastObjectAdded;
}

public static void setLastObjectAdded(Object lastObject) {
    lastObjectAdded = lastObject;
}

public static PersistenceManagerFactory get() {
    return INSTANCE;
  }

  private PMF() {}
} 
```

## GetFlights.java

```
private Collection<Flight> queryJDO(String query) {
        PersistenceManager pm = PMF.get().getPersistenceManager();
        try {
            List<Flight> flights = (List<Flight>) pm.newQuery(query).execute();
            // Force all results to be pulled back before we close the entity
            // manager.
            // We could have also called pm.detachCopyAll()
            flights.size();
            //pm.detachCopyAll(flights);
            boolean found = false;
            try {
                for (Flight f : flights) {
                    if ((Flight) PMF.getLastObjectAdded() == null) {
                        found = true;
                        break;
                    }
                    if (f.getDest() == ((Flight) PMF.getLastObjectAdded())
                            .getDest()
                            && f.getOrig() == ((Flight) PMF
                                    .getLastObjectAdded()).getOrig()) {
                        logger.info("found object " + f.toString()
                                + "in datastore");
                        found = true;
                        break;
                    }
                }
                if (found == false) {
                    logger.info("did not find object "
                            + (Flight) PMF.getLastObjectAdded()
                            + " in datastore, need to add it");
                    flights.add((Flight) PMF.getLastObjectAdded());
                }
            } catch (NullPointerException e) {
                logger.error(e.getMessage());
            }
            return flights;
        } finally {
            pm.close();
        }
    } 
```

如果有人能指出我的错误，将不胜感激。如果有任何更好的方法来解决这个问题，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:59:43.227

所以查询结果是不可修改的，所以不要尝试向它们添加对象。我没有看到任何稍微不正确/不一致的地方（实际上是 JDO/JPA 规范所说的）

如果您想在以后的上下文中使用这些结果，您可以轻松创建一个新列表，对查询结果执行 addAll()，然后使用该列表

# ruby-on-rails - 不同类型的 Ruby 二维数组

> ID：12757639
> 
> 赞同：0
> 
> 时间：2012-10-06T07:14:01.393
> 
> 标签：ruby-on-rails, ruby, highcharts

如何声明字符串和 int 类型的二维数组？

我想做这样的事情

```
@products.each do |p|
   array = [p.title, p.price]
end 
```

但我收到一条错误消息，说无法将字符串转换为 int

问题是我只能调用 f.series() 一次，我需要一个数组来保存我的所有数据

```
f.series(:name => 'Product Sales', :data => array) 
```

我正在尝试按照此代码创建饼图

[https://github.com/bakongo/highcharts_plugin_sample_graphs/blob/master/app/controllers/graphs_controller.rb](https://github.com/bakongo/highcharts_plugin_sample_graphs/blob/master/app/controllers/graphs_controller.rb)

```
def pie_chart
@categories = generate_categories(6)
@numbers = generate_numbers(6)
assoc = []
@categories.each_with_index {|c,i| assoc << [c, @numbers[i]]}

@highchart = HighChart.new('graph') do |f|
  f.title(:text => 'Flowers in Yard')
  f.options[:chart][:defaultSeriesType] = "pie"
  f.options[:x_axis][:categories] = @categories
  f.series(:type => 'pie', :name => 'Flower Presence', :data => assoc)
end

def generate_numbers(number)
   numbers = [rand(number)]
   (1...number).each_with_index {|v, i| numbers << (rand(number)+1)}
   numbers
end

def generate_categories(number)
   cats = ['Sunflower', 'Magnolia', "Rose", 'Lily', 'Tulip', 'Iris']
   cats[0...number]
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:40:00.043

在 ruby​​ 中，您可以将不同类型的元素保存在单个数组中，如下所示

```
arr = [1, 1.0, "This is a String", {abc: pqr}, [6]]
#arr[0].class = Fixnum
#arr[1].class = Float
#arr[2].class = String
#arr[3].class = Hash
#arr[4].class = Array 
```

因此，如果您想保存数组数组，如下所示

```
[["value1", 1.0], ["value2", 2.0]] 
```

使用以下

```
array = []
@products.each do |p|
  array << [p.title, p.price]
end 
```

要不就

```
array =  @products.collect{|p|  [p.title, p.price]} 
```

编辑以显示对 2D 阵列的访问

```
arr = [["value1", 1.0], ["value2", 2.0]]
#arr[0] = ["value1", 1.0] 
#arr[0][0] = "value1" 
#arr[0][1] = 1.0
#arr[1] = ["value2", 2.0]
#arr[1][0] = "value2" 
#arr[1][1] = 2.0 
```

# linux-device-driver - 内核模块的动态链接

> ID：12757640
> 
> 赞同：6
> 
> 时间：2012-10-06T07:14:21.673
> 
> 标签：linux-device-driver

也就是说，驱动程序是否可以尝试为另一个驱动程序导入符号，如果符号不存在，驱动程序是否可以继续加载而不解析导入？即使可能，是否允许上游驱动程序？即已经存在于 lnux 内核中的驱动程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T08:44:12.123

任何内核模块中由 EXPORT_SYMBOL 或 EXPORT_SYMBOL_GPL（如果导入模块确实具有与 GPL 兼容的许可证）导出的符号可以被其他模块使用。

> 如果符号不存在，驱动程序能否继续加载而不解析导入？

我不确定。但是您可以验证是否从`cat /proc/kallsyms`. 导出的符号将有两个条目。一个带有符号名称，另一个带有 _ *ksymtab*前缀。

例如，对于 printk。

ffffffff814fd1e2 T printk ffffffff81812550 r __ksymtab_printk

# php - 使用 user_save 更新密码总是会发送一封电子邮件

> ID：12757641
> 
> 赞同：0
> 
> 时间：2012-10-06T07:14:45.510
> 
> 标签：php, drupal, drupal-6

我正在使用 Drupal 6 中的 user_save 函数来更新自定义模块上的用户密码。问题是调用 user_save 函数来更新密码会导致 Drupal 向用户发送一封电子邮件，说明他们的帐户已被激活。

有人知道阻止 Drupal 发送此电子邮件的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:10:52.297

通过查看[此处](http://api.drupal.org/api/drupal/modules!user!user.module/function/_user_mail_notify/7)的 Drupal 7 文档，请尝试以下操作。

$conf['password_reset'] = 假；

以下其他选项可用，以防您希望使用任何其他选项。

*   'register_admin_created'：管理员创建的用户的欢迎消息。
*   'register_no_approval_required'：用户自行注册时的欢迎信息。
*   'register_pending_approval'：欢迎消息，用户等待管理员批准。
*   'password_reset'：密码恢复请求。
*   'status_activated'：帐户已激活。
*   'status_blocked'：帐户被阻止。
*   'cancel_confirm'：帐户取消请求。
*   'status_canceled'：帐户已取消。

# java - 枚举常量特定初始化

> ID：12757643
> 
> 赞同：0
> 
> 时间：2012-10-06T07:14:50.033
> 
> 标签：java, constructor, enums, initialization, multiton

现在，我们都知道枚举是处理多实例的好方法（即，具有固定数量实例的类，在编译时已知），因为每个常量几乎都是您自己的枚举类的单例子类。但是，我遇到了如何进行枚举常量特定初始化的问题。

假设我们有以下枚举：

```
public enum InputMethod {
    FOO {
        private final FooFactory factory;

        public Document createDocument(String inputString) {
            return factory.createFooParser().parse(inputString);
        }
    },
    BAR {
        public Document createDocument(String inputString) {
            BarBuilder builder = new BarBuilder();
            builder.setInput(inputString);
            return input.build();
        }
    };

    public abstract Document createDocument(String inputString);
} 
```

我想要做的是`FooFactory`在`InputMethod.FOO`. 为了做到这一点，我必须打电话给，说，`FooFactory.newInstance()`。但是，这可能会抛出异常，所以我不能简单地`factory = FooFactory.newInstance()`直接说。我不能把它放在枚举类型的构造函数中，因为`InputMethod.BAR`它没有以任何方式使用 FooFactory。由于静态初始化相对于枚举常量本身的初始化的顺序，使用静态初始化似乎不起作用。最后，我不能显式声明一个构造函数，因为它的子类`InputMethod`是`FOO`一个恰好是匿名的实例。

那么，除了让自己接受惰性初始化之外，我将如何正确初始化`FooFactory`实例`InputMethod.FOO`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:23:51.850

```
public enum InputMethod {
    FOO {
        private final FooFactory factory;
        {
            try {
                factory = Factory.newInstance();
            } catch (...) {
                ...
            }
        }
        public Document createDocument(String inputString) {
            return factory.createFooParser().parse(inputString);
        }
    },
    BAR { ... };
    public abstract Document createDocument(String inputString);
} 
```

# windows-8 - 在 Windows 8 中以编程方式发送 SMS 和电子邮件

> ID：12757646
> 
> 赞同：1
> 
> 时间：2012-10-06T07:15:16.923
> 
> 标签：windows-8

我想通过我的 C# 代码发送短信和电子邮件。我怎样才能做到这一点。在 Wp7 中，我们有 SMScomposetask 和 Emailcomposetask。什么相当于 Windows 8 中的那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:45:18.243

从[这里](http://mikaelkoskinen.net/post/windows8-metro-app-winrt-send-email-emailcomposetask.aspx)：

```
var mailto = new Uri("mailto:?to=recipient@example.com&subject=The subject of an email&body=Hello from a Windows 8 Metro app."); 
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

[这里](http://code.msdn.microsoft.com/windowsapps/Sms-SendReceive-fa02e55e)有一个如何发送 SMS 消息的示例。它使用`SendSmsMessageOperation`类。然而：

> 注意 此功能仅适用于移动运营商应用程序和 Windows 应用商店应用程序，这些应用程序由移动网络运营商、移动宽带适配器 IHV 或 OEM 授予特权访问权限。有关详细信息，请参阅移动宽带：Windows 应用商店设备应用。

更多细节[在这里](http://msdn.microsoft.com/en-us/library/windows/hardware/hh852368.aspx)。

# php - 将汉字导出到excel文件

> ID：12757647
> 
> 赞同：1
> 
> 时间：2012-10-06T07:15:23.857
> 
> 标签：php, excel, utf-8, character-encoding, export-to-excel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:26:16.157

Given that you're getting 9 characters in the output for 3 characters in the input, it's most likely that Windows is defaulting to thinking that your spreadsheet is encoded using Cpc-1252\.

I haven't used the libraries in question, but Googling suggests that [this](https://pear.php.net/manual/en/package.fileformats.spreadsheet-excel-writer.spreadsheet-excel-writer-worksheet.setinputencoding.php) might be the answer.

Going by your code, I think that once you create the $worksheet variable, you want to try the following:

```
$worksheet2->setInputEncoding('utf-8'); 
```

That's assuming that your database storage and connection are set to UTF-8\. Basically, set the worksheet encoding to be the same as what you're storing your data as.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:22:43.273

try with this code:

```
$text = htmlentities ( "大股东" , ENT_COMPAT ,  'UTF-8', true); 
```

# javascript - 如何在 firefox addon sdk 1.10 main.js 中使用 nsIParserUtils？

> ID：12757649
> 
> 赞同：3
> 
> 时间：2012-10-06T07:15:36.840
> 
> 标签：javascript, dom, firefox-addon, firefox-addon-sdk

我最近提交的 Firefox 附加站点（基于 Firefox 附加 SDK 1.10）被拒绝了，因为我没有清理我使用的输入并建议[使用`nsIParserUtils`](https://developer.mozilla.org/en-US/docs/XUL_School/DOM_Building_and_HTML_Insertion#Safely_Using_Remote_HTML).

我`parseHTML(doc, html, allowStyle, baseURI, isXML)`在该页面中找到了该功能。我将其更改为：

```
function parseHTML(doc, html, allowStyle, baseURI, isXML) {
    var parser = Cc["@mozilla.org/parserutils;1"].getService(Ci.nsIParserUtils);
    var f =  parser.parseFragment(html, allowStyle ? parser.SanitizerAllowStyle : 0,
                                        !!isXML, baseURI, doc);
    return f;
} 
```

其中的第一个参数被称为文档元素。我不知道那应该是什么？我试过`document.createDocumentFragment()`但我得到“ReferenceError：文档未定义”错误。有人可以帮助我如何调用此函数吗？

并且该函数返回一个`nsIDOMDocumentFragment`. 如何将其转换回字符串？

* * *

更新：

正如@zer0 所建议的，我使用了：

```
var parser = Cc["@mozilla.org/parserutils;1"].getService(Ci.nsIParserUtils);
var sanitizedHTML = parser.sanitize(html, flags); 
```

但这违背了我想做的事情的目的。例如：

```
<html><head><BASE href='http://localhost/t/h.html' />
<link rel="stylesheet" type="text/css" href="h.css">
<style type="text/css">
.b{
    color:green;
}
</style>
<base href="http://foo.example.com/">
</head><body>Sample Text. No Style
<script>Hello malicious code</script>
<p class="a">External Style</p>
<p class="b">Internal Style</p>
<p style="color:blue">Inline Style</p>

<a href="sample.html">Link</a><br><br><div style='color: #666666; font-size: 12px'>Clipped on 6-October-2012, 07:37:39 PM from <a href='http://localhost/t/h.html'>http://localhost/t/h.html</a> </div></body></html> 
```

转换为：

```
<html><head>  

<style type="text/css">
.b{

    color:green;
}
</style>

</head><body>Sample Text. No Style

<p class="a">External Style</p>
<p class="b">Internal Style</p>
<p style="color:blue">Inline Style</p>

<a>Link</a><br><br><div style="color: #666666; font-size: 12px">Clipped on 6-October-2012, 07:37:39 PM from <a href="http://localhost/t/h.html">http://localhost/t/h.html</a> </div></body></html> 
```

由于这剥离了外部超链接和 CSS，它违背了附加组件本身的目的。我想要的只是要删除的脚本：

```
<html><head><BASE href='http://localhost/t/h.html' /> <BASE href='http://localhost/t/h.html' /> 
<link rel="stylesheet" type="text/css" href="h.css">

<style type="text/css">
.b{

    color:green;
}
</style>
<base href="http://foo.example.com/">

</head><body>Sample Text. No Style
<p class="a">External Style</p>
<p class="b">Internal Style</p>
<p style="color:blue">Inline Style</p>

<a href="sample.html">Link</a><br><br><div style='color: #666666; font-size: 12px'>Clipped on 6-October-2012, 07:37:39 PM from <a href='http://localhost/t/h.html'>http://localhost/t/h.html</a> </div></body></html> 
```

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:39:31.840

删除外部样式的链接是有原因的：无法验证外部样式并且它们可能很危险（特别是`-moz-binding`可用于运行代码）。此外，假设您可以将 HTML 代码放在跟随相对链接不安全的位置（例如 Thunderbird 中的邮件消息）。然而，绝对链接总是好的。

您可能想要做的是预处理 HTML 代码以消除这些问题 - 解决对外部样式的相对链接和内联引用。像这样的东西：

```
// Parse the HTML code into a temporary document
var doc = Cc["@mozilla.org/xmlextras/domparser;1"]
               .createInstance(Ci.nsIDOMParser)
               .parseFromString(html, "text/html");

// Make sure all links are absolute
for (var i = 0; i < doc.links.length; i++)
    doc.links[i].setAttribute("href", doc.links[i].href);

// Make sure all stylesheets are inlined
var stylesheets = doc.getElementsByTagName("link");
for (i = 0; i < stylesheets.length; i++)
{
    try
    {
        var request = new XMLHttpRequest();
        request.open("GET", stylesheets[i].href, false);
        request.send(null);
        var style = doc.createElement("style");
        style.setAttribute("type", "text/css");
        style.textContent = request.responseText;
        stylesheets[i].parentNode.replaceChild(style, stylesheets[i]);
        i--;
    }
    catch (e)
    {
        // Ignore download errors
    }
}

// Serialize the document into a string again
html = Cc["@mozilla.org/xmlextras/xmlserializer;1"]
         .createInstance(Ci.nsIDOMSerializer)
         .serializeToString(doc.documentElement);

// Now sanizite the HTML code
var parser = Cc["@mozilla.org/parserutils;1"].getService(Ci.nsIParserUtils);
var sanitizedHTML = parser.sanitize(html, parser.SanitizerAllowStyle); 
```

请注意，我使用同步 XMLHttpRequest 来下载样式表内容 - 为简单起见，您的最终代码应使用`request`不会挂起用户界面的异步下载（很可能通过模块）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:11:02.393

> 其中的第一个参数被称为文档元素。我不知道那是什么？

你不需要那个。只需使用[nsIParserUtils.sanitize](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIParserUtils)方法，该方法只需获取一个字符串作为输入并返回经过清理的版本作为输出：

```
var parser = Cc["@mozilla.org/parserutils;1"].getService(Ci.nsIParserUtils);
var sanitizedHTML = parser.sanitize(html, flags); 
```

检查“常量”部分上方的链接，以查看您需要在场景中拥有哪些标志。

# c - 表达式中未使用的值

> ID：12757651
> 
> 赞同：0
> 
> 时间：2012-10-06T07:16:02.670
> 
> 标签：c, warnings, clang

Clang 似乎在警告我在表达式中未使用 aa char，这是整个代码部分：

```
int yeller(const char * channel) {
char *p, *q;
q = p = MAKE_COPY(temp->bind_chan);
while ((p = next_in_comma_list(q, &q))) {
if (!p || !*p)
break;
if (!my_stricmp(p, channel))
return tmp; 
```

特别是这一行：

```
q = p = MAKE_COPY(temp->bind_chan); 
```

尽管在封闭表达式中使用了存储到“p”的值，但实际上从未从“p”中读取该值

我显然是在 while 循环中评估它，这真的是一个“错误”还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:35:30.563

Clang 提示您代码中可能存在错误。

代码分配了值，`p`并且在被覆盖之前该值在任何地方都没有使用，这看起来很奇怪，应该重新访问执行此操作的代码片段。在接下来的`while`循环中，您将覆盖 的内容，`p`而无需使用其先前的值。

在这样的代码中，此警告可能会更安全：

```
Status status = do_some_job();
...
(some code where status isn't checked)
...
status = do_some_ther_job(); 
```

这很可能是程序员的错误，因为在大多数情况下，如果函数返回状态，则应该对其进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:12:33.447

Clang 试图说服你编写更好的代码，听它。

我认为你的代码片段的语义最好用这样的东西来满足

```
char *q = MAKE_COPY(temp->bind_chan);
for (char *p; (p = next_in_comma_list(q, &q));) {
 ...
} 
```

即在可能的情况下使用初始化而不是赋值，并使迭代变量在使用它的范围内成为本地变量。

*编辑：*这使用了古老的 C，AKA C89 中不存在的功能，但在 1999 年被引入该语言。Clang 应该可以正常工作，因为它默认使用 C99。

# iphone - 如何在 iPhone 中增加 applicationDidEnterBackground？

> ID：12757652
> 
> 赞同：0
> 
> 时间：2012-10-06T07:16:09.940
> 
> 标签：iphone, objective-c, uiapplicationdelegate, appdelegate

我调用了一个 api `applicationDidEnterBackground`，但是`applicationDidEnterBackground`方法在 5 秒后返回，所以我怎么能增加计时器或者在 api 完成之后只会`applicationDidEnterBackground`返回我们所有人建议使用`beginBackgroundTaskWithExpirationHandler`

但是不知道怎么用，有大神指导一下吗？

这是我的代码

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    NSString *link=[NSString stringWithFormat:@"http://www.askpundit.com/dev/js_chat/getNewRequest.php?updateStatus=%@&clientid=%@",UpdateStatus,[self getSetting:@"Clientid"]]; 
    NSURLRequest *request=[[NSURLRequest alloc]initWithURL:[NSURL URLWithString:link]];  

    NSURLConnection *connaction=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (connaction)
    {
        responsedata=[NSMutableData data];

        NSLog( @"Data Saved");

    }
} 
```

`applicationDidEnterBackground`任何人都可以指导我在通话结束后如何返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:27:25.680

正如你所猜测的，`beginBackgroundTaskWithExpirationHandler`是你应该使用的。这很简单。该片段经过最低限度的校对，并且不完整 - 但演示了该方法。

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    _completionTask = [application beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:_completionTask];
        _completionTask = UIBackgroundTaskInvalid;
    }];
    // begin your NSURLConnection, etc.
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    if( _completionTask != UIBackgroundTaskInvalid ) {
         [application endBackgroundTask:_completionTask];
         _completionTask = UIBackgroundTaskInvalid;
} 
```

# c++ - 在 C++ 中使用“else if”

> ID：12757653
> 
> 赞同：12
> 
> 时间：2012-10-06T07:16:25.227
> 
> 标签：c++, if-statement

我有两个问题 - (I)

```
code-fragment-1

if(<condition-statement>){
}

else if(<condition-statement-2>){
    //statements-1
}
//statements-2 
```

代码片段 2

```
if(<condition-statement>){
}

else{
    if(<condition-statement-2>){
        //statements-1
    }
    //statements-2
} 
```

上面两个代码片段是一样的吗？

(II) 什么时候使用`else if`s（在 C++ 中）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T07:19:20.117

唯一的区别是在示例 1 中，无论您检查的条件如何，您的 Statement2 都会被执行。`if`在示例 2 中，Statement2 仅在您的条件为 false时才会执行。除此之外，它们基本相同。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T07:19:29.733

不，在第一种情况下，只有在未`<condition-statement>` *验证**且仅在* `<condition-statement-2>` *已验证*时才执行 else 块。

在第二种情况下，如果*未验证*`<codition-statement>`，则只需执行 else 块。

 *在这种情况下是等价的*，直到*你没有任何 //statements-2。

关于问题：什么时候使用 else if（在 c++ 中）？

基本上在所有其他具有此结构的语言的相同条件下使用。 `else`作为相关 if 的替代执行，作为替代执行，但要验证`else-if`“附加” ，否则不执行。`if`所以它们在逻辑上并不等价。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T07:20:58.953

an 的语法`if`是真的

```
if(condition) statement; 
```

真正做的`{}`是允许您将多个语句组合在一起。在您的第二个示例中，您的 s 中只有一个语句（if）`{}`，所以是的，两个示例都是相同的，除了 //statements-2 总是在 !=true 时运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T07:42:15.143

在您的第一个代码示例中，statement-2 是无条件执行的。第二个是有条件的。不一样。

通常首选“else if”，因为您可以无限期地继续插入或附加更多它们，或者附加一个“else”，而对于另一种形式，您必须无休止地摆弄花括号才能获得相同的效果，而您冒着改变语义的风险，正如您在第二个示例中所做的那样。*

# asp.net - 如何在 Asp.Net 中管理 WebServer 上的非托管 DLL？

> ID：12757656
> 
> 赞同：1
> 
> 时间：2012-10-06T07:16:44.863
> 
> 标签：asp.net, dll, webserver, dllimport

在我的项目中，我正在尝试导入 Dll，但在添加引用时，它向我显示了错误。我在很多博客中搜索过，发现我的 DLL 是非托管的。那么请告诉我如何将非托管 DLL 转换为托管 DLL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:24:22.113

如果 .dll 既不是托管程序集也不是 COM 对象，您需要通过使用[DllImportAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)来利用 P/Invoke 。
可以在[此处](http://www.pinvoke.net/)找到流行库的定义。

# windows - 如何将 linux wxWidgets 应用程序移植到 Windows + Mac

> ID：12757667
> 
> 赞同：-1
> 
> 时间：2012-10-06T07:17:35.727
> 
> 标签：windows, linux, macos, wxwidgets, porting

我正在尝试将在 Linux (Ubuntu) 中使用 Code::Blocks 构建的应用程序移植到 Windows。configure.sh 中有一个选项可以编译 Windows 和 Mac 版本，但随后抛出错误并且无法正常工作。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:38:09.343

您应该在 #if defiend(__WXMSW__) ... #endif 指令中包含所有与平台相关的代码（其他平台有自己的预处理器变量）。你可以看看 wxWidgets 的源代码，看看那里的问题是如何解决的。

```
//Common code
#if defined(__WXMSW__)
    // Windows code goes here
#else if defined(__WXGTK__)
    // Linux code goes here
#else if defined(__WXMAC__)
    // Mac code goes here
#else
    // Code for other platforms
#endif
// Common code 
```

# wordpress - 是否有可用于将评论导入 Disqus 的 Dotclear 到 WXR 转换器？

> ID：12757669
> 
> 赞同：1
> 
> 时间：2012-10-06T07:17:49.430
> 
> 标签：wordpress, disqus

是否有任何脚本（任何语言）可以将 Dotclear (2.4.2) 博客导出文件中的评论转换为 Wordpress WXR 格式？

这样我就可以使用该 WXR 格式文件将评论导入 Disqus。我正在从 Dotclear 转移到另一个博客系统，我将在其中使用 Disqus 来发表评论。这只是为了评论，帖子直接移动到新博客。

从 Dotclear 导出文件中提取评论看起来很简单，并使用帖子 ID 将它们与原始帖子的 URL 相关联，然后将其放入骨架 WXR 文件中。但我不想重新发明轮子，如果这已经存在的话。

# .htaccess - 从 mod_rewrite 中排除链接

> ID：12757670
> 
> 赞同：0
> 
> 时间：2012-10-06T07:18:05.267
> 
> 标签：.htaccess

你好这是我的htaccess代码

```
Options All -Indexes
ErrorDocument 404 /404.php
FileETag MTime Size

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /lang/

RewriteRule ^sitemap\.xml$ index.php [L]
RewriteRule ^(.*)(\.html|\.htm)$ index.php [L]
RewriteRule ^(.*)(\.rss|\.atom|\.txt)$ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/?$ index.php [L]
</IfModule>

<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType image/gif "access plus 1 months"
    ExpiresByType image/jpeg "access plus 1 months"
    ExpiresByType image/png "access plus 1 months"
    ExpiresByType text/css "access plus 1 months"
    ExpiresByType application/x-javascript "access plus 1 months"
</IfModule> 
```

我有这个联系表

[http://www.example.com/lang/contact-se](http://www.example.com/lang/contact-se)

当用户使用表格和联系

它重定向到

[http://www.example.com/lang/contact-se.html](http://www.example.com/lang/contact-se.html)

并给我找不到错误页面

如何仅从重写和重定向到 .html 中排除此链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:47:42.890

Change your form to submit to `/lang/contact-se` instead of `/lang/contact-se.html`.

Not sure what this has to do with your rules, both contact-se and contact-se.html gets pointed to `index.php`.

# mysql - 从具有不同列名的多个表中选择数据并删除 MySQL 中的重复项

> ID：12757671
> 
> 赞同：0
> 
> 时间：2012-10-06T07:18:10.563
> 
> 标签：mysql, sql

我有 3 个要加入的表

`order`桌子

```
|   date    | deliver_date |
----------------------------
| 2011-09-01 | 2011-09-13  |
| 2011-09-05 | 2011-09-15  | 
```

`deliver`桌子

```
| deliver_date |
----------------
| 2011-09-01   |
| 2011-09-13   | 
```

`return`桌子

```
|return_date|
--------------
| 2011-09-04 |
| 2011-09-05 | 
```

3个表中的数据包含相同的日期。

我想从 3 个表中加入日期并显示不重复

我想得到这样的预期结果

```
 2011-09-01,2011-09-04,2011-09-05,2011-09-13 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:31:26.587

你`union`不需要`join`：

```
select date from order

union 

select deliver_date from order

union

select deliver_date from deliver

union

select return_date from return 
```

# android - 为什么这个“您必须在 AndroidManifest.xml 中使用 configChanges 声明 AdActivity。”

> ID：12757676
> 
> 赞同：5
> 
> 时间：2012-10-06T07:18:51.123
> 
> 标签：android, admob

我不知道这个错误是怎么来的，当我尝试了很多次时，所以我在stackoverflow中看到了不同的帖子，但我没有得到解决方案。所以在此之后我发布了这个问题。我有一个正在开发的 2.3.3 android 应用程序，我想在其中添加 Admob 广告。我的错误：

![在此处输入图像描述](../Images/ffdb2bf940e637a46cca5cd6dd8d2cb0.png)

**这是我的java文件>**

```
package com.example.admobtest;

import android.os.Bundle;
import android.app.Activity;

import com.google.ads.*;

public class MainActivity extends Activity {
    private AdView adView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create the adView
         adView=(AdView) findViewById(R.id.adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());
    }

} 
```

**和 main.xml 文件**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="17dp"
        ads:adSize="BANNER"
        ads:adUnitId="**************"
        ads:loadAdOnCreate="true" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

**在图形布局中**

> 无法实例化以下类： - com.google.ads.AdView（打开类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。

**最后在 AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.admobtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation" />
    </application>

</manifest> 
```

在这里，我也尝试使用此 `android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"`方法，`android:configChanges="keyboard|keyboardHidden|orientation"`但没有效果。

我从外部 jar 文件中添加了**GoogleAdMobAdsSdk-6.1.0.jar** 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:23:45.293

要解决此问题，您必须将项目构建目标设置为 Android 3.2 或更高版本。

在此链接上查看更多详细信息。

[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)（参见 Android 标签）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T23:40:44.913

我认为您缺少元数据标签

```
 <meta-data  android:name="com.google.android.gms.version"
           android:value="@integer/google_play_services_version"/> 
```

我希望这会有所帮助

# iphone - 关于 CGRectFromString 的使用

> ID：12757677
> 
> 赞同：2
> 
> 时间：2012-10-06T07:18:54.523
> 
> 标签：iphone, position

在我的应用程序中，我想使用 CGRectFromString 来设置 UIButton 位置。我的代码就是这样

```
NSString *g = @"{0,0},{100, 100}";
CGRect rect = CGRectFromString(g);
self.button1.frame = rect; 
```

但这是剂量工作。有什么我想念的还是苹果虫？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T07:37:34.210

您可以使用它设置框架，它工作正常。请点击此链接关注[CGRect](http://mobiledevelopertips.com/c/cgrect-cgsize-and-cgpoint.html)

```
CGRect optionsFrame = {{0, 0}, {100, 100}};
self.button1.frame = optionsFrame; 
```

或者如果你真的想使用，`CGRectFromString`那么请进行 soma 更改

```
NSString *g = @"{{0,0},{100, 100}}"; 
```

我希望你明白..：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:43:19.407

试试这样......

```
NSString *g = @"{{0,0},{100, 100}}";
CGRect rect = CGRectFromString(g);
self.button1.frame = rect; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T07:48:07.307

从性能上讲，这是一个坏主意。使用`CGRectFromNSString`运行时需要解析你的字符串，成本很高。如果这个 rect 真的是恒定的，你应该使用这个单线：

```
CGRect optionsFrame = (CGRect){{0, 0}, {100, 100}}; 
```

演员表`(CGRect)`在这里是为了防止编译器投诉和警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T11:11:21.173

为什么不使用[`CGRectMake`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectMake)？

```
self.button1.frame = CGRectMake(0,0,100,100); 
```

# r - 使用 sox 统计数据批量测量 .wav 文件

> ID：12757685
> 
> 赞同：3
> 
> 时间：2012-10-06T07:19:48.090
> 
> 标签：r, stat, sox, wav

我的问题类似于之前关于“get-mean-amplitude-of-wav-from-sox”的问题：

[从 sox 获取 .wav 的平均振幅（仅）](https://stackoverflow.com/questions/12383496/get-mean-amplitudeonly-of-wav-from-sox/12434108#12434108)

我希望能够使用 stats sox 对目录中的 1,000 个 .wav 文件进行批量测量，并将结果存储在数据框或类似的结构中，我可以将其保存为 csv 文本文件。

对于一个声音文件，代码为：

./sox SampleSound.wav -n 统计

导致以下输出：

```
Samples read:          72000000
Length (seconds):   3600.000000
Scaled by:         2147483647.0
Maximum amplitude:     0.778809
Minimum amplitude:    -1.000000
Midline amplitude:    -0.110596
Mean    norm:          0.062671
Mean    amplitude:    -0.008131
RMS     amplitude:     0.172914
Maximum delta:         1.778809
Minimum delta:         0.000000
Mean    delta:         0.014475
RMS     delta:         0.057648
Rough   frequency:         1061
Volume adjustment:        1.000 
```

我想： - 对给定目录中的 1,000 个声音文件进行批量测量， - 捕获列中的统计输出以及所测量的声音文件名， - 并导出以用作 R 分析中的协变量.

谢谢！

马修

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T19:53:44.910

首先，您需要对 执行系统调用`sox`，并捕获其输出。例如：

```
> spam = system("sox worf.wav -n stat 2>&1", intern = TRUE)
> spam
 [1] "Samples read:             34000" "Length (seconds):      3.083900"
 [3] "Scaled by:         2147483647.0" "Maximum amplitude:     0.999969"
 [5] "Minimum amplitude:    -0.938721" "Midline amplitude:     0.030624"
 [7] "Mean    norm:          0.190602" "Mean    amplitude:    -0.004302"
 [9] "RMS     amplitude:     0.244978" "Maximum delta:         1.340240"
[11] "Minimum delta:         0.000000" "Mean    delta:         0.051444"
[13] "RMS     delta:         0.099933" "Rough   frequency:          715"
[15] "Volume adjustment:        1.000" 
```

设置`intern = TRUE`将命令的输出返回给变量。奇怪的是，`sox`将其输出提供给`stderr`而不是`stdout`，因此需要`2>&1`. 现在最好的方法是将其包装在一个函数中，该函数还对以下输出进行后处理`system`：

```
get_wav_stats = function(wav_file) {
   rough_wav_stats = system(sprintf("sox %s -n stat 2>&1", wav_file), intern = TRUE)
   wav_stats = data.frame(do.call("rbind", strsplit(rough_wav_stats, split = ":")))
   names(wav_stats) = c("variable", "value")
   wav_stats = transform(wav_stats, value = as.numeric(as.character(value)))
   return(wav_stats)
}
> spam = get_wav_stats("worf.wav")
> spam
            variable         value
1       Samples read  3.400000e+04
2   Length (seconds)  3.083900e+00
3          Scaled by  2.147484e+09
4  Maximum amplitude  9.999690e-01
5  Minimum amplitude -9.387210e-01
6  Midline amplitude  3.062400e-02
7       Mean    norm  1.906020e-01
8  Mean    amplitude -4.302000e-03
9  RMS     amplitude  2.449780e-01
10     Maximum delta  1.340240e+00
11     Minimum delta  0.000000e+00
12     Mean    delta  5.144400e-02
13     RMS     delta  9.993300e-02
14 Rough   frequency  7.150000e+02
15 Volume adjustment  1.000000e+00 
```

接下来，您可以将其包装在应用循环中以从给定目录中获取所有统计信息：

```
# files_dir = list.files("path", full.names = TRUE)
# For this example I create a mock list:
files_dir = rep("worf.wav", 10)
stat_wavs = lapply(files_dir, get_wav_stats)
> str(stat_wavs)
    List of 10
     $ :'data.frame':   15 obs. of  2 variables:
      ..$ variable: Factor w/ 15 levels "Length (seconds)",..: 13 1 14 2 8 7 6 4 10 3 ...
      ..$ value   : num [1:15] 3.40e+04 3.08 2.15e+09 1.00 -9.39e-01 ...
     $ :'data.frame':   15 obs. of  2 variables:
      ..$ variable: Factor w/ 15 levels "Length (seconds)",..: 13 1 14 2 8 7 6 4 10 3 ...
      ..$ value   : num [1:15] 3.40e+04 3.08 2.15e+09 1.00 -9.39e-01 ...
<< snip >> 
     $ :'data.frame':   15 obs. of  2 variables:
      ..$ variable: Factor w/ 15 levels "Length (seconds)",..: 13 1 14 2 8 7 6 4 10 3 ...
      ..$ value   : num [1:15] 3.40e+04 3.08 2.15e+09 1.00 -9.39e-01 ... 
```

要仅提取`value`包含您需要的统计信息的列：

```
stats4files = data.frame(do.call("rbind", lapply(stat_wavs, "[[", 2)))
names(stats4files) = stat_wavs[[1]][[1]]
rownames(stats4files) = files_dir # this doesn't work actually because I have repeated the same file multiple times :)

> stats4files
   Samples read Length (seconds)  Scaled by Maximum amplitude Minimum amplitude Midline amplitude
1         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
2         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
3         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
4         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
5         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
6         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
7         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
8         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
9         34000           3.0839 2147483647          0.999969         -0.938721          0.030624
10        34000           3.0839 2147483647          0.999969         -0.938721          0.030624
   Mean    norm Mean    amplitude RMS     amplitude Maximum delta Minimum delta Mean    delta
1      0.190602         -0.004302          0.244978       1.34024             0      0.051444
2      0.190602         -0.004302          0.244978       1.34024             0      0.051444
3      0.190602         -0.004302          0.244978       1.34024             0      0.051444
4      0.190602         -0.004302          0.244978       1.34024             0      0.051444
5      0.190602         -0.004302          0.244978       1.34024             0      0.051444
6      0.190602         -0.004302          0.244978       1.34024             0      0.051444
7      0.190602         -0.004302          0.244978       1.34024             0      0.051444
8      0.190602         -0.004302          0.244978       1.34024             0      0.051444
9      0.190602         -0.004302          0.244978       1.34024             0      0.051444
10     0.190602         -0.004302          0.244978       1.34024             0      0.051444
   RMS     delta Rough   frequency Volume adjustment
1       0.099933               715                 1
2       0.099933               715                 1
3       0.099933               715                 1
4       0.099933               715                 1
5       0.099933               715                 1
6       0.099933               715                 1
7       0.099933               715                 1
8       0.099933               715                 1
9       0.099933               715                 1
10      0.099933               715                 1 
```

# c# - WPF 动画 GIF

> ID：12757691
> 
> 赞同：0
> 
> 时间：2012-10-06T07:20:45.263
> 
> 标签：c#, wpf

我正在尝试使用[https://github.com/XamlAnimatedGif/WpfAnimatedGif/](https://github.com/XamlAnimatedGif/WpfAnimatedGif/)中的库来使用 wpf 解决我的动画 gif。我编写了一些代码将图像绑定到图像，但它不起作用。

WPF：

```
<Image gif:ImageBehavior.RepeatBehavior="Forever"
           gif:ImageBehavior.AnimatedSource="{Binding ElementName=WpfAnimation, Path=ImageStatus}"/> 
```

代码背后：

```
// Image status property
        public readonly DependencyProperty ImageStatusProperty;
    public ImageSource ImageStatus
    {
        get { return (ImageSource)GetValue(ImageStatusProperty); }
        set { SetValue(ImageStatusProperty, value); }
    }

    public MainWindow()
    {
        InitializeComponent();
        ImageStatus = new BitmapImage(new Uri("Images/anipier_e0.gif", UriKind.Relative));

    } 
```

错误：

```
System.Windows.Markup.XamlParseException was unhandled
  HResult=-2146233087
  Message='The invocation of the constructor on type 'WpfAnimation.MainWindow' that matches the specified binding constraints threw an exception.' Line number '4' and line position '9'.
  Source=PresentationFramework
InnerException: System.ArgumentNullException
       HResult=-2147467261
       Message=Value cannot be null. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:40:58.083

我认为您的绑定有问题：AnimatedSource 绑定到名为“WpfAnimation”的元素。您应该将 AnimatedSource 绑定到 DataContext 的属性。如果 WpfAnimation 类似于 LayoutRoot，请使用如下表达式：

```
<Image gif:ImageBehavior.RepeatBehavior="Forever"
           gif:ImageBehavior.AnimatedSource="{Binding ElementName=WpfAnimation, Path=DataContext.ImageStatus}"/> 
```

此外，检查 Debug/Output 是否有绑定错误、动画 gif 是否是资源、您的 Uri 是否有效以及 DataContext 是否与您的视图相关联。

**编辑：**

看起来视图构造函数中存在异常。

# maven - brew安装maven 404错误

> ID：12757694
> 
> 赞同：33
> 
> 时间：2012-10-06T07:21:44.123
> 
> 标签：maven, homebrew

我做了一个`brew install maven`，结果如下：

```
==> Downloading http://www.apache.org/dyn/closer.cgi/maven/binaries/apache-maven-3.0.4-bin.tar.gz
==> Best Mirror http://apache.oss.eznetsols.org/maven/binaries/apache-maven-3.0.4-bin.tar.gz

curl: (22) The requested URL returned error: 404
Error: Download failed: http://www.apache.org/dyn/closer.cgi/maven/binaries/apache-maven-3.0.4-bin.tar.gz 
```

起初我认为这是我的网络的镜像问题。但是我换了另一个网络，还是一样。4天后仍然是同样的错误。我想知道其他人是否受到影响。

我应该怎么做才能用brew安装maven？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-07-11T18:05:33.313

如果您仍然收到 url 错误，请尝试`brew update`然后`brew install maven`. 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-06T11:06:10.023

这面镜子有些奇怪。你可以改变这个

```
brew edit maven 
```

并将网址更改为

[http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz](http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz)

例如

需要“公式”

```
class Maven < Formula
  homepage 'http://maven.apache.org/'
  #url 'http://www.apache.org/dyn/closer.cgi/maven/binaries/apache-maven-3.0.4-bin.tar.gz'
  url 'http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz'
  sha1 '0de5dc162bafde3fcb0a6b009cfeea81a042523b'

  def install
    # Remove windows files
    rm_f Dir["bin/*.bat"]

    # Fix the permissions on the global settings file.
    chmod 0644, Dir["conf/settings.xml"]

    prefix.install %w{ NOTICE.txt LICENSE.txt README.txt }
    # Install jars in libexec to avoid conflicts
    libexec.install Dir['*']
    bin.install_symlink Dir["#{libexec}/bin/*"]
  end
end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-03T14:37:42.217

ZenBalance 的回答对我有用。我首先尝试了 Emoloney 的回答，当我运行时导致以下错误`brew update`：

```
error: Your local changes to the following files would be overwritten by merge:
Library/Formula/maven.rb
Please, commit your changes or stash them before you can merge.
Aborting Error: Failure while executing: git pull -q origin refs/heads/master:refs/remotes/origin/master 
```

要解决这个问题：

```
cd /usr/local/Library/Formula
git reset --hard 
```

然后：

```
brew update
brew install maven 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-28T15:23:05.820

您需要像 Emoloney 所说的那样使用 brew edit 修改 URL，但最重要的是，不要忘记修改 sha1 代码（从 url 的同一下载页面获取）。验证您是否安全下载了确切的文件很重要

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-25T17:35:25.960

对我来说，以下命令完成了工作：

```
brew update
brew install maven 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-09T11:01:01.853

先更新brew的镜像列表

```
brew update 
```

然后，尝试再次安装。对于这种情况

```
brew install maven 
```

# regex - 珀尔。正则表达式只工作一次

> ID：12757696
> 
> 赞同：6
> 
> 时间：2012-10-06T07:22:21.597
> 
> 标签：regex, perl

我需要用正则表达式处理字符串，如果是数字，则更改 x->y。

**字符串**：`2x2x2 2x 2x2x 2x2x2x2x2`

**正则表达式**：`s/([0-9])x([0-9])/$1y$2/g`

```
my $string = "2x2x2 2x 2x2x 2x2x2x2x2";

$string =~ s/([0-9])x([0-9])/$1y$2/g;

print "$string\n"; 
```

我预计：`2y2y2 xx 2x 2y2x 2y2y2y2y2`

但结果：（`2y2x2 2x 2y2x 2y2x2y2x2`并非所有 2x2 都改变了）

我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T07:28:05.217

试试下面的正则表达式：

```
s/(?<=\d)x(?=\d)/y/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:22:23.017

明确地说：原因是您的表达式首先匹配，`"2x2x2"`将其替换为，然后在找到该匹配项*后*继续搜索。下一位是，它与您的模式不匹配。`"2y2x2"``"2x2"``"2y2"`*`"x2"`*

 *@xdazz 的解决方案有效的原因是环视断言实际上并不消耗字符串的字符。字符串中匹配的部分只是`"x"`, 前后都是数字。

顺便说一句，@xdazz 从`[0-9]`to的变化`\d`并没有太大变化，但略有不同：`\d`还将匹配其他被视为数字的 Unicode 字符，而`[0-9]`仅匹配给定范围内的确切 10 个字符。*

# vb.net - ConnectionString 属性尚未初始化

> ID：12757697
> 
> 赞同：1
> 
> 时间：2012-10-06T07:22:25.627
> 
> 标签：vb.net

我正在研究班加罗尔大学规定的一个项目。我使用 vb.net 2008 作为前端，使用 Ms Access 2007 作为后端。当我尝试运行该程序时，我收到一个错误，因为**ConnectionString 属性尚未初始化**。

这是我使用的代码

```
private Sub Add_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Add.Click
    Dim con As New OleDb.OleDbConnection
    Dim cmd As New OleDb.OleDbCommand
    Dim dbProvider As String
    Dim dbSource As String

    dbProvider = "Provider=Microsoft.Jet.OLEDB.4.0;"
    dbSource = "DataSource=C:\My Project\project.mdb"
    con.ConnectionString = dbProvider & dbSource
    con = New OleDb.OleDbConnection

    con.Open()
    cmd.Connection = con
    cmd.CommandText = "Insert Into Application(appno, mname, age, gender, height, weight, address, purpose, bmi, mailid, phoneno, paymnet)" & _
                      "Values('" & Me.appno.Text & "', '" & Me.mname.Text & "', '" & Me.age.Text & "', '" & Me.gender.Text & "', '" & _
                      Me.mheight.Text & "', '" & Me.weight.Text & "', '" & Me.address.Text & "', '" & Me.purpose.Text & "', '" & _
                      Me.bmi.Text & "', '" & Me.mailid.Text & "', '" & Me.phoneno.Text & "', '" & Me.payment.Text & "')"
    cmd.ExecuteNonQuery()
    con.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:30:59.407

您正在创建两个连接，您正在设置第一个连接，因此后一个连接可能是复制和粘贴错误；

```
Dim con As New OleDb.OleDbConnection

...

dbProvider = "Provider=Microsoft.Jet.OLEDB.4.0;"
dbSource = "DataSource=C:\My Project\project.mdb"
con.ConnectionString = dbProvider & dbSource
con = New OleDb.OleDbConnection                  <-- creates a new connection
                                                     without a connection string. 
```

# jquery - 内联 JavaScript 不起作用

> ID：12757700
> 
> 赞同：0
> 
> 时间：2012-10-06T07:22:46.963
> 
> 标签：jquery, html, css, progress-bar

这个脚本有问题吗？似乎不起作用。如果它有效，有人可以在你这边尝试吗？它使用小提琴工作，但当我在本地运行时它不起作用。

```
<HTML>

<HEAD><TITLE>Server Disk Alert</TITLE>
<script type="text/javascript" src="../../../Backup/2012/Web Projects/jquery-1.8.2.min.js"></script>
<script type="text/javascript">

document.ready(function(){
var widthval = parseInt($('.item').eq(0).text(), 10);
var $hr = $('hr').eq(0);
alert(widthval);
$hr.width(widthval);

if (widthval > 90) {
    $hr.css('background-color', 'red');}

});

</script>

</HEAD>

<BODY BGCOLOR="#EFEFFF">

<TABLE id="table_id" BORDER="1" CELLPADDING="2" CELLSPACING="2">
<TR>
 <TH COLSPAN="5" ALIGN="CENTER">Critical Server Disk Space</TH>
</TR>
<TR>
 <TH>Server</TH>
 <TH>Drive</TH>
 <TH>Percent Free Space</TH>
 <TH>Size Free Space</TH>
 <TH>Status</TH>
</TR>

<TR>
 <TD>%server%</TD>
 <TD>%drive%</TD>
 <TD class="item">50%</TD>
 <TD>%fspace%</TD>
 <TD width=200 style="border: 2px solid silver;padding:none">
 <hr style="color:#c00;background-color:blue;height:15px; border:none; margin:0;" align="left"/> </TD>
</TR>
<TR>

</TABLE>

</BODY>
</HTML> 
```

这是我想要完成的 jsfiddle 链接。
[http://jsfiddle.net/XhxkX/7/](http://jsfiddle.net/XhxkX/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:28:44.667

Your code isn't working because you're mixing regular JavaScript DOM methods with jQuery.

This should work a little better:

```
var width = parseInt($('.item').eq(0).text(), 10);
var $hr = $('hr').eq(0);

$hr.width(width);

if (width > 90) {
    $hr.css('background-color', 'red');
}​ 
```

**Demo: [http://jsfiddle.net/XhxkX/10/](http://jsfiddle.net/XhxkX/10/)**

Also, there are a few invalid tags in your HTML (`<LPFOOTER>` and `<LPHEADER>`). I'm not sure what they're for, but they are both improperly placed and one of them is missing an opening tag. I suggest you update your HTML to current standards before working much more with it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:26:03.130

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:26:22.313

Try this:

```
<HEAD><TITLE>Server Disk Alert</TITLE>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"></script>
<script type="text/javascript" src="../../../Backup/2012/Web Projects/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
var widthValue = document.getElementsByClassName("item")[0].innerText;
document.getElementsByTagName("hr")[0].style.width = widthValue;​

if (parseInt(widthValue, 10) > 90) {
    document.getElementsByTagName("hr")[0].style.backgroundColor = "red";
}
​
});
</script>
</HEAD> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T07:26:44.573

The problem is that you are mixing `javascript` and `jquery`

use this

```
 $(document).ready(function(){
var widthValue = $(".item").text();
$("hr").css("width",widthValue)
if (parseInt(widthValue, 10) > 90) {
   $("hr").css("backgroundColor","red");
}
​
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T07:40:17.647

that should work I used to different approaches to show how you can access and manipulative the DOM elements. I hope that helps.

```
 <script type="text/javascript">

$(document).ready(function(){
var widthValue = parseInt($('.item').eq(0).text());
$('hr').eq(0).css('width',widthValue) ;

if (parseInt((widthValue.replace('%','')/10)* 10) > 90) {
   $('hr').eq(0).css({'background-color':'red'});
}

}); 
```

​​

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T12:28:23.977

I finally got it! Thanks to an old friend who walked me through it.. here's the code:

```
<!DOCTYPE html>
<html>
    <head>
        <title>Critical Server Disk Space</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){

                $('.bar').each(function(i){

                    var width = parseInt($('.item').eq(i).text(), 10);
                    var hr = $(this).eq(i);

                    $(this).width(width);

                    if(width >= 90){
                        $(this).css('background-color', 'red');
                    }
                });

            });

            //window.onload = init();
        </script>
        <style type="text/css">
            hr{
                border:none;
                background:blue;
                height:15px;
                margin:0px;     
                text-align:left;
            }
            .border{border:1px solid #CCC; padding:0px; width:100px;background:#FFF;}
        </style>
    </head>
    <BODY BGCOLOR="#EFEFFF" >
        <TABLE BORDER="1" CELLPADDING="2" CELLSPACING="2">
            <TR>
             <TH COLSPAN="5" ALIGN="CENTER">Critical Server Disk Space</TH>
            </TR>
            <TR>
             <TH>Server</TH>
             <TH>Drive</TH>
             <TH>Percent Free Space</TH>
             <TH>Size Free Space</TH>
             <TH>Status</TH>
            </TR>
            <TR>
             <TD>%server%</TD>
             <TD>%drive%</TD>
             <TD class="item">50 <!-- 2% --></TD>
             <TD>%fspace%</TD>
             <TD width=200">
              <div class="border"><hr class="bar" /></div>
             </TD>
            </TR>
            <TR>
             <TD>%server%</TD>
             <TD>%drive%</TD>
             <TD class="item">30 <!-- 2% --></TD>
             <TD>%fspace%</TD>
             <TD width=200">
              <div class="border"><hr class="bar" /></div>
             </TD>
            </TR>
            <TR>
             <TD>%server%</TD>
             <TD>%drive%</TD>
             <TD class="item">95 <!-- 2% --></TD>
             <TD>%fspace%</TD>
             <TD width=200">
              <div class="border"><hr class="bar" /></div>
             </TD>
            </TR>
            <TR>
             <TD>%server%</TD>
             <TD>%drive%</TD>
             <TD class="item">80 <!-- 2% --></TD>
             <TD>%fspace%</TD>
             <TD width=200">
              <div class="border"><hr class="bar" /></div>
             </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
</html> 
```

# android - 我如何在 android 上使用非活动类中的 ProgressDialog

> ID：12757702
> 
> 赞同：-1
> 
> 时间：2012-10-06T07:22:48.667
> 
> 标签：android, android-asynctask, android-progressbar

在我的应用程序中，我有一个活动（MainActivity.java）和一个类（非活动类 - SubClass.java）。子类有一个 ProgressDialog。我将从 MainActivity 调用子类。

**我的问题是如何使用来自活动类（MainActivity.java）的非活动类（SubClass.java）的 ProgressDialog**

**我在 setProgress() 和包声明处收到空指针异常错误。**

***我做了以下事情***

1) 在 MainActivity 中，我使用构造函数为子类创建对象。

```
 SubClass pro = new SubClass(MainActivity.this);
    pro.call_fun(); 
```

2）在SubClass中：整体编码；

```
package com.progresss;  // Line No : 1 ; Shows Null Pointer Exception
public class SubClass {
Context context = null;
public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private NotificationManager notificationManager;
private Notification notification;
private int progress_val = 0;
private String fileURL = "http://xxxxx.com/folder/sampleproject.apk";
private String destination = null;
private ProgressDialog downloadProgressDialog;

public SubClass(MainActivity progress_DialiogActivity) {
    this.context = progress_DialiogActivity;
}

public void call_fun(){
    new DownloadFileAsync().execute(fileURL);
}

    //  Updated APK File Download Task.
class DownloadFileAsync extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        ((Activity) context).showDialog(DIALOG_DOWNLOAD_PROGRESS);
    //          Notification Coding     
        ...........
        notification.contentIntent = contentIntent;
    //          -------------------            
        notificationManager =(NotificationManager) context.getSystemService(context.NOTIFICATION_SERVICE);
        notificationManager.notify(0, notification);
    }

    @Override
    protected String doInBackground(String... aurl) {
        try {
    //              .......         
        } catch (Exception e) {
            Log.e("Error Report Download Manager", e.getMessage());
          }
        return null;
    }

    protected void onProgressUpdate(String... progress) {
         progress_val = Integer.parseInt(progress[0]);
         .......
         downloadProgressDialog.setProgress(Integer.parseInt(progress[0]));   // Line No : 100 ; Shows Null Pointer Exception
    }

    @Override
    protected void onPostExecute(String unused) {
        notificationManager.cancel(0);
    //          ((Activity) context).dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        ((Activity) context).removeDialog(DIALOG_DOWNLOAD_PROGRESS);
        Log.e("Download", "Stop");

    //          Notification Coding     
        notificationManager = (NotificationManager) context.getSystemService(context.NOTIFICATION_SERVICE);
        .........
        notificationManager.notify(0, notification);

    //          Open The Install App Activity(Intent) Here.            
        ........
    }
} // Async Task Class End

    //our progress bar settings
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case DIALOG_DOWNLOAD_PROGRESS: //we set this to 0
            downloadProgressDialog = new ProgressDialog(context);
            downloadProgressDialog.setMessage("Downloading file...");
            downloadProgressDialog.setMax(100);
            downloadProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            downloadProgressDialog.setCancelable(false);
            downloadProgressDialog.show();
            return downloadProgressDialog;
        default:
            return null;
    }
  }
} 
```

这是 LogCat 错误消息：

```
 FATAL EXCEPTION: main
java.lang.NullPointerException
at com.progresss.SubClass$DownloadFileAsync.onProgressUpdate(SubClass.java:100)
at com.progresss.SubClass$DownloadFileAsync.onProgressUpdate(SubClass.java:1)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:432)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

进度对话框代码在活动类中运行良好。我猜 ProgressDialog 可能没有正确初始化。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:29:08.893

`onCreateDialog`不执行。请将代码移至`onPreExecute`Method 。

`onCreateDialog`是回调方法，它只会在活动中被调用，在你的子类中它只是一个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T10:33:01.300

我遇到了同样的问题。在我将 onCreateDialog 移到 onPreExecute 之后，它不起作用。

我改成后解决了问题`pro.call_fun()`，`pro.call_fun(MainActivity.this)`然后`downloadProgressDialog = new ProgressDialog(context)`在`pro.call_fun(MainActivity.this)`.

这个对我有用。

# iphone - 为什么我只能在 NSDocumentDirectory 保存文件或创建文件夹

> ID：12757705
> 
> 赞同：0
> 
> 时间：2012-10-06T07:23:13.460
> 
> 标签：iphone, objective-c, ios

我使用 ASI 下载文件。但只有当我将路径设置为`NSDocumentDirectory`.

```
NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString  *cachesDirectory = [paths objectAtIndex:0]; 
```

我没有更改任何其他代码，只是替换`NSDocumentDirectory`为 `NSCachesDirectory`or `NSDownloadsDirectory`，它不起作用。

下载进度为 100%，文件未保存。

我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:10:21.890

这段代码：

```
[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] 
```

在我的许多项目中完美运行。我认为问题出在您的保存代码中。你能展示一下吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-06T09:06:53.403

您可以更轻松地完成并写入任何位置。如果您使用的是 ASI，您可以下载 DATA。`(NSData)` 所以：

```
NSFileManager *fileMgr = [NSFileManager defaultManager];
[fileMgr createFileAtPath:@"whateverpathyouwant" contents:downloaddata attributes:nil]; 
```

这只有在你是`jailbroken`我猜的情况下才有效。

# iphone - 如何在对象 C 中使用多个实例解析 JSON

> ID：12757706
> 
> 赞同：-1
> 
> 时间：2012-10-06T07:23:14.377
> 
> 标签：iphone, objective-c, xcode, json

> **可能重复：**
> [如何使用 NSJSONSerialization](https://stackoverflow.com/questions/8356842/how-to-use-nsjsonserialization)

我正在测试在 iphone 应用程序上使用我网站的 web 服务。有问题的 JSON 是：

```
[
    {
        "name": "Jason1",
        "age": 20
    },
    {
        "name": "Jason2",
        "age": 40
    },
    {
        "name": "Jason3",
        "age": 60
    }
] 
```

我的代码：

```
 NSData *jasonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://localhost:3000/all_personal_information.json"]];
    NSDictionary *json = nil;
    if (jasonData) {
        json = [NSJSONSerialization JSONObjectWithData:jasonData options:kNilOptions error:nil];
    } 
```

代码可以正常工作`{"name":"jason","age":20}` ，我可以通过使用`json[@"name"]`和获取值`json[@"age"]`

但我不知道如何从有问题的 JSON 中获取值。我试图用 `[json enumerateKeysAndObjectsWithOptions]`横穿字典。但我会得到一个错误：

```
enumerateKeysAndObjectsWithOptions:usingBlock:]: 无法识别的选择器发送到实例 0x89b2490
```

`[json description]`但是当我登录到控制台时，我可以获得完整的 JSON 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:35:42.523

当你得到一个数组时，你正在创建一个字典。如果您执行以下操作，它应该可以工作：

```
id json = nil;
if (jasonData)
{
    json = [NSJSONSerialization JSONObjectWithData:jasonData options:kNilOptions error:nil];
}

if ([json isKindOfClass:NSArray.class])
{
    for (id personDef in json)
    {
        if ([personDef isKindOfClass:NSDictionary.class])
        {
            NSDictionary * dict = (NSDictionary *) moduleDef;

            NSString * name  = [dict objectForKey:@"name" withClass:NSString.class];

            NSLog(@"Person: @%", name);
        }
    }
} 
```

在这里，我做一些额外的检查对象是否是我们期望的对象。如果不是这种情况，您应该添加（正确的）错误处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:47:58.810

把它放在一个数组中..例如

```
NSData *jasonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://localhost:3000/all_personal_information.json"]];
NSDictionary *json = nil;
if (jasonData) {
    NSError *e = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:jasonData options:NSJSONReadingMutableContainers error: &e];
} 
```

该数组将包含您的

```
{
 "name": "Jason1",
 "age": 20
} 
```

等在其各个索引中。当您想获取其中的值时，可以使用以下方法获取值

```
NSDictionary *userName = [jsonArray objectAtIndex:1];
NSString *stringName = [userName valueForKey:@"name"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T07:41:53.900

它会帮助你。

```
 NSMutableDictionary *CompaintsAry =[NSJSONSerialization JSONObjectWithData:respo options:kNilOptions error:&error];
     NSMutableArray *tempary =[[NSMutableArray alloc]init];
    for (int i=0;i < [CompaintsAry count];i++) {
    CfResultFatch *rs = [[CfResultFatch alloc] initWithName:[[CompaintsAry obj ectAtIndex:i]objectForKey:@"Name"]
                                                     cipd :[[CompaintsAry objectAtIndex:i] objectForKey:@"Age"]];

    [tempary addObject:rs];
}
cfComlaintsLists = [[NSMutableArray alloc] initWithArray:tempary];
SelectComplain = [[NSMutableArray alloc] initWithCapacity:[cfComlaintsLists count]]; 
[chiftab reloadData]; 
```

# multithreading - 是否可以多次打开一个串口？

> ID：12757707
> 
> 赞同：4
> 
> 时间：2012-10-06T07:23:16.620
> 
> 标签：multithreading, synchronization, pthreads

我正在设计一个控制系统，它应该通过串行端口处理太多的执行器（或执行器组）。新设计（尚未实现）应该通过多个 POSIX 线程控制执行器。

这是否可以多次（通过多个线程）打开一个串口？如果是的话，我会写一个同步写/异步读机制。会有`n`线程`M[0]`可以`M[n-1]`直接将数据写入串行端口。他们不应该直接从串口读取。相反，一个线程`R`应该在`while(true)`循环中从端口读取数据并将数据提供给等待它的相应线程。（唤醒`M[i]`等待响应，当数据准备好并且属于`i`线程时）

这完全取决于是否可以通过多个线程写入串行端口的问题。

**注意**：我无法测试串口的行为，因为目前我无法访问我大学机电一体化实验室的设备，

我正在使用用 Xenomai 实时子系统修补的内核 2.6.38-8（如果重要）

我正在将代码移植到与串行端口通信的传统 Linux 方式。（打开`/dev/ttyS0`，设置波特率，，，`read()`等`write()`）目前使用第三方库与串口通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:28:30.260

同一个串口只能打开一次。第二次试用因拒绝访问而失败。打开端口后，您可以使用端口句柄在不同的线程中使用它。当然，您需要在这些线程之间同步端口访问。

# actionscript-3 - AS3 - 在 BitmapData 中查找给定 x 坐标的最高 y 坐标？

> ID：12757708
> 
> 赞同：1
> 
> 时间：2012-10-06T07:23:16.963
> 
> 标签：actionscript-3, flash, collision-detection, game-physics, bitmapdata

我正在制作一个平台游戏。到目前为止，这是我所拥有的：http: [//megaswf.com/s/2486396](http://megaswf.com/s/2486396)（四处移动并用箭头键跳跃）。

我正在使用地面的位图数据来测试与玩家坐标的碰撞，并且玩家正在向地面下沉几个像素（尤其是在上坡时）。为了防止这种情况，我希望玩家的 y 坐标立即改变，以便玩家坐在地面上。这是我正在做的事情：

```
 if (groundClipBmpData.hitTest(rLoc, 255, bLocFuture)) {
        playerClip.y = ???
    } 
```

我希望玩家的 y 坐标变为玩家 x 坐标处 groundClipBmpData 的最高像素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:35:09.377

就像我在另一个问题中所说：

使用`while`代替`if`

像这样：

```
while(groundClipBmpData.hitTest(rLoc, 255, playerClipBmpData, bLocFuture, 255))
{
        playerClip.y--;
}
playerClip.y++; 
```

最快的方法是预先计算最高坐标值并将其存储在一个数组中，然后使用玩家的“x”位置来确定地面的“y”。

# javascript - Web客户端上的大十进制

> ID：12757714
> 
> 赞同：1
> 
> 时间：2012-10-06T07:24:04.423
> 
> 标签：javascript, bigdecimal

我正在使用 bigDecimal.js：

```
https://github.com/iriscouch/bigdecimal.js 
```

在我的 node.js 项目服务器端没有问题但是当我在客户端上尝试相同时，我似乎无法正确引用 bigDecimal 对象。在 github 页面上有一个链接：

```
http://jhs.iriscouch.com/demo/_design/bigdecimal/_show/ui?e=321.4567890*123456789.123456789987654321 
```

我的 html 中有一个指向 bigdecimal.js 的链接：

```
<script src="/javascripts/bigdecimal.js" type="text/javascript"></script> 
```

并且脚本肯定在那里，因为我可以在 chrome 中导航到它。

我的代码如下所示：

```
var bd = {"BigDecimal":BigDecimal, "BigInteger":BigInteger, "RoundingMode":RoundingMode};
var bigDeletedVideoID = bd.BigInteger('9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999');
var bigLowNum = bd.BigInteger('1');
alert(bigDeletedVideoID.subtract(bigLowNum)); 
```

但我在第一行的 chrome 中收到错误消息：

```
BigDecimal is not defined. 
```

有没有人有使用 BigDecimal 的经验以及如何在 javascript Web 客户端上执行此操作？

更新：

我在 localhost 上测试了代码，即像这样引用 .js 库：

```
http://localhost:11709/javascripts/bigdecimal.js 
```

我得到正确显示的警报消息。

但是当我将网站上传到实时服务器时，现在它变成了：

```
 http://pazooza.azurewebsites.net/javascripts/bigdecimal.js 
```

突然之间，我特别收到了 2 个错误：

*   意外标识符 bigdecimal.js 第 293 行
*   BigDecimal 未定义

为什么它可以在本地主机上运行而不是在实时站点上？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:12:07.203

来自：[通过 Firebug 控制台加载 javascript](https://stackoverflow.com/questions/3011817/load-javascript-via-firebug-console)

```
var script = document.createElement("script");
script.src = "http://pazooza.azurewebsites.net/javascripts/bigdecimal.js";
document.body.appendChild(script); 
```

在重写这个答案之前，我怀疑似乎没有任何命名空间冲突：相反，在加载 js 页面*之前，必须非常精确地不使用符号“BigDecimal”......*

这通常由 onload 事件处理。

*最初的建议是使用 node.js 框架或按照*[https://github.com/iriscouch/bigdecimal.js](https://github.com/iriscouch/bigdecimal.js) 的建议假设命名空间*BD*

```
 var foo=require("bigdecimal.js"); var i = foo.BigDecimal("1235"); 
```

# java - 在搜索引擎中显示结果（没有 MySQL）

> ID：12757715
> 
> 赞同：1
> 
> 时间：2012-10-06T07:24:19.173
> 
> 标签：java, search-engine

我正在用java开发一个搜索引擎。它工作正常，但所有结果都显示在一个页面中。如何在谷歌等单独的页面中显示结果。如果我有 100 个结果，那么结果将显示在 10 页中，每页 10 个结果。我没有使用 MySQL。我的数据存储在文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:35:50.327

因此，您需要获取指定的页码并使用它来确定在该页面中首先显示的结果。

说你的网址看起来像这样

```
www.yoursite.com?search=JSP&page=3 
```

然后，您将提取搜索词并找到结果。您还将获得请求的页面并使用它。

```
firstResultNum = page * resultsPerPage
for (i=firstResultNum; i<firstResultNum+resultsPerPage; i++)
{
  displayCurSearchResult(i);
} 
```

# symfony-1.4 - 希望在 symfony 中使用 sfValidatorRegex 只允许小写或“_”

> ID：12757724
> 
> 赞同：2
> 
> 时间：2012-10-06T07:26:07.743
> 
> 标签：symfony-1.4, design-patterns

我想只允许使用 Symfony 1.4 的 sfValidatorRegex 的文本框使用小写字符或“_”字符。

我使用了不同类型的模式，例如`/^[a-z_]+$/i`但它们对我不起作用。

所以如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:39:38.227

正确的模式是`'/^[a-z_]+$/'`

# java - 使用 PDFBox 从 PDF 中删除图片 - 查询此处发布的不起作用的解决方案

> ID：12757727
> 
> 赞同：3
> 
> 时间：2012-10-06T07:26:24.623
> 
> 标签：java, image, pdfbox

我无法让[此处](https://stackoverflow.com/questions/6831194/how-can-i-remove-all-images-drawings-from-a-pdf-file-and-leave-text-only-in-java)找到的解决方案起作用。

代码运行时没有任何异常，并且在调试时显示`resources.getimages().clear();`正在执行某些操作，但由于某种原因，在创建输出文档时更改并未“保存”。相反，输出文档与输入文档相同。

我已经检查了 PDF 是否包含有效图像，因为我使用了 pdfbox 中的另一个代码来提取所有图像。

# ruby - ruby directory function

> ID：12757735
> 
> 赞同：2
> 
> 时间：2012-10-06T07:28:25.947
> 
> 标签：ruby, shared, directory

Here's the code :

```
Dir.foreach('C:\\Documents and Settings\\') { |entry|
    if File.directory?( entry )
        puts entry
    end
}

Dir.foreach('\\\\10.80.14.20\\transfer') { |entry|
    if File.directory?( entry )
        puts entry
    end
} 
```

Both `C:\\Documents and Settings` and `\\10.80.14.20` contain directories. But it only lists the folders under `C:\Documents and Settings`. While the folders under `\\\\10.80.14.20` isn't listed. It seems `File.directory?( entry )` cannot work under shared folders. Am I right? If so, is there any other methods to identify folders when under shared folders?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:19:48.453

map `\\10.80.14.20\transfer` as a separate drive say `F:` on your machine where you're trying to run this program and then modify your code to

```
Dir.foreach('f:\\') { |entry|
    if File.directory?("f:\\#{entry}")
        puts entry
    end
} 
```

However if you intend to run such code as a windows service, then you'll have to map the drive from within your code because windows services don't recognize externally mapped drives.

```
require 'win32ole'
def map_my_drive
    net = WIN32OLE.new('WScript.Network')
    user_name = "<your_domain>\\<your_user>"
    password = "<your_password>"
    net.MapNetworkDrive( 'f:', "\\\\10.80.14.20\\transfer", nil,  user_name, password )
end 

map_my_drive

Dir.foreach('f:\\') { |entry|
    if File.directory?("f:\\#{entry}")
        puts entry
    end
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:12:19.433

If you can mount it to a local drive I suppose it will work with the standard `Dir.foreach` because the operating system will hide it for you.

If you cannot, then you could use the [Ruby/SMB](http://rubysmb.sourceforge.net/) library, I'm not sure it will work nowadays, but you could try other as well ([net-smb](https://github.com/fumiyas/ruby-net-smb)).

Example code (not tested):

```
require 'smb'

SMB::Dir.foreach('smb://10.80.14.20/transfer') do |entry|
  if entry.dir?
    puts entry
  end
end 
```

# jquery - 谷歌地图点击标记

> ID：12757738
> 
> 赞同：0
> 
> 时间：2012-10-06T07:28:59.877
> 
> 标签：jquery, google-maps, google-maps-markers

我有一张地图和多个标记。我已经`click`在地图容器上附加了一个事件，以使用动画消失地图上显示的任何内容（我有图例、时间线等）。

我的问题是，当您单击标记以查看 时`infoWindow`，它还会触发地图上的`click`事件，该事件会消失在地图上的图层对象上。所以，我想防止地图容器已经分配事件，当点击标记时，只会出现 infoWindow 而不会出现其他任何内容。

这是地图点击事件：

```
$('#map_canvas').bind('mousedown', function() { ... 
```

我在标记上唯一能看到的是它们都具有相同的类：`gmnoprint`

我已经测试过这个：

```
$('#map_canvas').not('.gmnoprint').bind('mousedown', function() { ... 
```

和：

```
$('#map_canvas').bind('mousedown', function() {

    if ($(this).is('.gmnoprint'))
        return false;
.... 
```

但他们都没有工作。任何人都知道如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:43:46.907

我会尝试使用 google maps API 事件侦听器，因为它们在与地图元素交互时将是最可靠的：

[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events) https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows

这是 gmaps API 中用于绑定单击以打开与标记关联的信息窗口的基本语法：

```
google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map,marker);
}); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:44:19.323

您必须捕获`event`然后调用`event.preventDefault`具有`.click`infoWindow 功能的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T07:45:05.507

你可以做这样的事情

```
 <div id="map_canvas" class="foo"></div>

$("#map_canvas").hasClass("foo").click(function(){

 $(this).removeClass("foo")
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T09:31:45.497

你的问题是

```
$('#map_canvas').bind(... 
```

那些标记/信息窗口在那个 map_canvas div 中，所以你在技术上点击它

# opencv - 如何使用 OpenCV 查找视频中预存参考图像的匹配帧？

> ID：12757745
> 
> 赞同：0
> 
> 时间：2012-10-06T07:29:20.163
> 
> 标签：opencv, matching, surf

> **可能重复：**
> [OpenCV 匹配模板得分不高](https://stackoverflow.com/questions/2308592/opencv-match-template-not-scoring-well)

我已经存储了一个视频文件，需要检查每个帧是否与已经预存的图像文件匹配。我使用了 cvQueryFrame，从该 createImage 进行帧到图像的转换，并检查这个图像 X 与预存的图像文件图像 Y 起诉模板匹配。 ..但无法得到想要的结果？应该使用 SURF 或 SIFT 或线检测算法的任何组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:01:59.600

无需创建图像....

```
IplImage *frame = cvQueryFrame(); 
```

将以 IplImage 形式为您提供图像...模板匹配只是关联...它可能不会始终为您提供正确的匹配...如果您在那里使用 OpenCV 2.4.2 那么您可以使用 FREAK、ORB、SIFT、SURF用于将您的预存储图像与您的视频帧相匹配...这里是[**链接**](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:09:09.990

如果您的“预存”图像是视频的一部分，您可以简单地计算帧和图像之间的差异（例如 cv::norm）。如果您正在寻找与给定查询图像“相似”的图像，那么这是一个非常不同的主题，并且有很多关于这个主题的学术文章。

# c# - 使用文件选择器 Metro 应用程序 Windows 8 选择所有文件

> ID：12757748
> 
> 赞同：3
> 
> 时间：2012-10-06T07:30:04.777
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.ViewMode = PickerViewMode.Thumbnail;
openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
openPicker.FileTypeFilter.Add(".jpg");
openPicker.FileTypeFilter.Add(".jpeg");
openPicker.FileTypeFilter.Add(".png");

StorageFile file = await openPicker.PickSingleFileAsync();
if (file != null)
{
    // Application now has read/write access to the picked file
    OutputTextBlock.Text = "Picked photo: " + file.Name;
}
else
{
    OutputTextBlock.Text = "Operation cancelled.";
} 
```

**如何添加** `openPicker.FileTypeFilter.Add(".*");` **意味着在文件选择器中显示所有文件类型？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:49:15.377

你快到了..正确的语法是`openPicker.FileTypeFilter.Add("*");`

从[FileTypeFilter](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.pickers.fileopenpicker.filetypefilter)文档：

> [文件选择器示例](http://go.microsoft.com/fwlink/?LinkID=234890)演示了如何在文件选择器中显示**任何类型**的文件以供用户选择。

示例中的代码在哪里：

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.ViewMode = PickerViewMode.List;
openPicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
openPicker.FileTypeFilter.Add("*"); 
```

# mysql - MySQL将两行合并为一行

> ID：12757757
> 
> 赞同：0
> 
> 时间：2012-10-06T07:31:04.260
> 
> 标签：mysql

我有一张要求`connections`建立友谊系统的桌子。这些列是：

`id`, `from`, `to`, `direction`,`liking`

每当用户发送好友请求时，都会添加一行并将方向设置为 1（1 表示正向，2 表示反向）。当其他用户接受好友请求时，将添加另一行并将方向设置为 2。

我试图找出一种方法来获得用户的朋友。但是当我执行以下查询时，行会重复。

```
 SELECT
                `users`.`name`,`users`.`id`
            FROM
                `connections`,
                `users`
            WHERE
                (
                    `connections`.`from` = 1234 AND
                    `connections`.`to` = `users`.`id` AND
                    `connections`.`direction` = 1
                )
                OR
                (
                    `connections`.`to` = 1234 AND
                    `connections`.`from` = `users`.`id` AND
                    `connections`.`direction` = 2
                ) 
```

如何修改此查询以包含行不重复？

**更新**：我要添加两行，因为有一列`liking`。对于“不同的用户连接”，这个值是不同的。

示例 -`A`可以有 0.95 的喜好`B`。并且`B`可以喜欢只是`0.25`为了`A`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:35:27.677

根据您的评论，您可以添加外部查询：

```
 SELECT
            name, DISTINCT(id) AS id
 FROM
     (original query) 
```

您说当朋友接受请求时添加一行。这将创建两行。**用新方向更新**现有行不是更有意义吗？- 根据评论忽略最后一部分

# ruby - 使用正则表达式从字符串中提取前缀值

> ID：12757759
> 
> 赞同：0
> 
> 时间：2012-10-06T07:31:17.057
> 
> 标签：ruby, regex

我有一串表格

```
s = "something prefix1 value1 prefix2 value2 prefix1 value3 prefix2 value4" 
```

我想使用正则表达式提取值（value1、value2 等）。可以有任意数量的值/前缀对。只有两个前缀。这些值可能有空格。

我试过像

```
/((prefix1|prefix2)(.*))+/ 
```

这不起作用，因为第一个 .* 匹配匹配字符串的其余部分。

我正在研究红宝石。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:34:03.993

在我看来，您想使用拆分功能：

`tokens = s.split(/\s+/)`

这将为您提供一个由空格分隔的标记列表。

查看ruby​​ 食谱中的[这一](http://zenspider.com/Languages/Ruby/Cookbook/Strings/TokenizingStrings.html)部分。

**更新：**如果您绝对必须使用单个正则表达式匹配它们，这应该适合您：

```
/((\w+)\s+(.*?))+/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:33:18.157

尝试`/((prefix1|prefix2)(.*?))+/`

问号使它不贪婪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:05:45.040

他的预期结果是什么？如果您只是想提取没有前缀的值，请尝试以下操作：

```
str = "something prefix1 value1 prefix2 value2 prefix1 value3 prefix2 value4"

p str.split.reject { |s| s =~ /prefix/ }

#=> ["something", "value1", "value2", "value3", "value4"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T11:05:23.183

`String#split`可以在正则表达式上拆分：

```
s = "something prefix1 value1 prefix2 value2 prefix1 value3 prefix2 value4"
p s.split(/ prefix1 | prefix2 /) # ["something", "value1", "value2", "value3", "value4"] 
```

# php - 如何在控制器 Codeigniter 中显示验证消息

> ID：12757760
> 
> 赞同：3
> 
> 时间：2012-10-06T07:31:17.623
> 
> 标签：php, jquery, codeigniter

如何在控制器中使用 {ci_form_validation field='title' error='true'} ？

我有这个代码

```
$this->load->library('form_validation');
$this->form_validation->set_rules('title', $this->lang->line('title'), 'trim|required|min_length[3]|xss_clean');   
$this->form_validation->set_rules('fahad', $this->lang->line('blog'), 'trim|required|min_length[20]|xss_clean'); 
$this->form_validation->set_rules('writer', $this->lang->line('writer'), 'trim|required|alpha_dash|min_length[3]|xss_clean'); 
```

我想在控制器中打印错误消息，因为我使用的是 jquery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T07:35:53.737

从用户指南中使用它

```
echo form_error('field_name'); 
```

已编辑

好的试试

```
echo validation_errors(); 
```

这会给你每一个错误之后你可以得到你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T04:24:58.060

实际上，开箱即用的 CodeIgniter 无法做到这一点。但是，扩展原始表单验证库非常容易。

*   在您的应用程序/库文件夹中创建一个名为“MY_Form_validation.php”的文件

*   将以下代码添加到 application/libraries/MY_Form_validation.php

    ```
    class MY_Form_validation extends CI_Form_validation {

        public function __construct() {

            parent::__construct();

        }

        /**
         * Return all validation errors
         *
         * @access  public
         * @return  array
         */
        function get_all_errors() {

            $error_array = array();

            if (count($this->_error_array) > 0) {

                foreach ($this->_error_array as $k => $v) {

                    $error_array[$k] = $v;

                }

                return $error_array;

            }

            return false;

        }

    } 
    ```

然后从您的控制器：

```
 echo "<pre>";

    print_r($this->form_validation->get_all_errors());

    echo "</pre>"; 
```

# windows-8 - 在 Windows 8 中的 TextBlock 中打印换行符

> ID：12757763
> 
> 赞同：5
> 
> 时间：2012-10-06T07:31:58.957
> 
> 标签：windows-8

我想`TextBlock's Text`在我的代码后面分配并在屏幕上显示它。它也可能包含`new line character`。但不知何故，`TextBlock`并没有打印那个字符。我在文本中使用了以下组合来打印换行符

*   `&#x0A;`
*   `&#x0D;&#x0A;`
*   `&#10;`
*   `&#13;&#10;`
*   `\n`
*   `\r\n`

有人做过吗？你能帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T07:36:37.473

在`XAML`你可以这样做

```
<TextBlock>Hello how are you?<LineBreak/>I'm fine</TextBlock> 
```

在代码中你可以这样做

```
textBlock.Text = "Hello how are you?\nI'm fine."; 
```

两者都为我工作。

* * *

**已编辑**

对于您的方案，您可以这样做

```
string str = @"Hello how are you?\nI'm fine.";//This is your actual string containing \n as character 
```

或者在你的情况下

```
string str = _arr[index];
str = str.Replace(@"\n", "\n"); 
```

用换行符替换“\n”字符串。
**PS**它会在您实际想要显示`\n`字符串而不是换行符的地方产生问题。

# javascript - 加载Jquery Mobile时未捕获的TypeError：对象函数（名称，基础，原型）

> ID：12757765
> 
> 赞同：2
> 
> 时间：2012-10-06T07:32:17.763
> 
> 标签：javascript, jquery, jquery-mobile

一旦我在我的 Web 应用程序中加载 JqueryMobile，我就会收到这个错误，不幸的是我无法理解为什么会出现这个问题。你能指出我正确的方向吗？谢谢！

* * *

```
Uncaught TypeError: Object function ( name, base, prototype ) {
        var namespace = name.split( "." )[ 0 ],
            fullName;
        name = name.split( "." )[ 1 ];
        fullName = namespace + "-" + name;

        if ( !prototype ) {
            prototype = base;
            base = $.Widget;
        }

        // create selector for plugin
        $.expr[ ":" ][ fullName ] = function( elem ) {
            return !!$.data( elem, name );
        };

        $[ namespace ] = $[ namespace ] || {};
        $[ namespace ][ name ] = function( options, element ) {
            // allow instantiation without initializing for simple inheritance
            if ( arguments.length ) {
                this._createWidget( options, element );
            }
        };

        var basePrototype = new base();
        // we need to make the options hash a property directly on the new instance
        // otherwise we'll modify the options hash on the prototype that we're
        // inheriting from
    //  $.each( basePrototype, function( key, val ) {
    //      if ( $.isPlainObject(val) ) {
    //          basePrototype[ key ] = $.extend( {}, val );
    //      }
    //  });
        basePrototype.options = $.extend( true, {}, basePrototype.options );
        $[ namespace ][ name ].prototype = $.extend( true, basePrototype, {
            namespace: namespace,
            widgetName: name,
            widgetEventPrefix: $[ namespace ][ name ].prototype.widgetEventPrefix || name,
            widgetBaseClass: fullName
        }, prototype );

        $.widget.bridge( name, $[ namespace ][ name ] );
    } has no method 'extend' jquery.mobile-1.2.0.js:568
    $.Widget._createWidget jquery.mobile-1.2.0.js:568
    $.(anonymous function).(anonymous function) jquery.mobile-1.2.0.js:405
    (anonymous function) jquery.mobile-1.2.0.js:541
    jQuery.extend.each jquery-1.8.2.js:611
    jQuery.fn.jQuery.each jquery-1.8.2.js:241
    $.fn.(anonymous function) jquery.mobile-1.2.0.js:536
    (anonymous function) jquery.mobile-1.2.0.js:1091
    jQuery.event.dispatch jquery-1.8.2.js:3063
    elemData.handle.eventHandle jquery-1.8.2.js:2681
    jQuery.event.trigger jquery-1.8.2.js:2946
    (anonymous function) jquery-1.8.2.js:3604
    jQuery.extend.each jquery-1.8.2.js:611
    jQuery.fn.jQuery.each jquery-1.8.2.js:241
    jQuery.fn.extend.trigger jquery-1.8.2.js:3603
    $.extend.initializePage jquery.mobile-1.2.0.js:9082
    (anonymous function) jquery.mobile-1.2.0.js:9140
    fire jquery-1.8.2.js:974
    self.fireWith jquery-1.8.2.js:1082
    jQuery.extend.ready jquery-1.8.2.js:406
    DOMContentLoaded 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T15:59:49.927

我通过**删除 jquery.ui.widget.js**解决了这个问题，这可能在遥远的过去某个时候是必需的，但现在不再需要了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T06:08:32.277

我意识到加载 jquery ui 库时出现了问题。经过一番挖掘，我发现这两个库可能有一些问题。

# c# - 如何通过加载表单将产品插入组合框

> ID：12757772
> 
> 赞同：0
> 
> 时间：2012-10-06T07:34:02.790
> 
> 标签：c#, xml, visual-studio-2010, combobox

我是 C# 新手，我对 XML 文件有一个问题。我的代码如下

```
 <root>
<product category="Soaps">
    <product type="Washing"></product>
    <product type="Bathing"></product>
</product>
<product category="ThoothPaste">
    <product type="ThoothPaste"></product>
</product>
<product category="Biscuits">
  <product type="Parle"></product>
  <product type="Marrie"></product>
  <product type="Britania"></product>
</product>
   </root> 
```

我希望在加载表单时，应将产品类型属性插入到我的组合框中。我尝试了打击代码，但没有得到预期的结果。

任何人都可以提供解决方案吗？

```
 private void Admin_Load(object sender, EventArgs e)
    {

       DataSet ds = new DataSet();
       ds.ReadXml(strpath + "Products.xml");
       dgvProducts.DataSource = ds.Tables[0];

       xdoc.Load(strpath + "list.xml");
      // MessageBox.Show("Test231");
       XmlNodeList nodeList = xdoc.SelectNodes("//product");
      // MessageBox.Show("Test");
       foreach (XmlNodeList node in nodeList)
       {
           cmbBox.Items.Add(node.innerText)
       }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:01:09.287

使用**LINQ2XML** ..它非常简单，可以完全替代其他 XML API

```
XElement doc=XElement.Load(strpath + "Products.xml");

foreach (string type in doc.Descendants("product").Select(x=>x.Attribute("type").Value).ToList<string>())
       {
           cmbBox.Items.Add(type)
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:33:49.577

上面发布的解决方案不起作用，因为它会抛出空引用异常，使用下面的示例 Linq-xml 代码

```
XElement xElement = XElement.Load(@"XMLFile1.xml");

            var producttypes = from ptypes in
                                   xElement.Descendants("product")
                               let xAttribute = ptypes.Attribute("type")
                               where xAttribute != null
                               select xAttribute.Value;

            comboBox1.Items.Clear();
            foreach (var ptypes in producttypes)
            {
            comboBox1.Items.Add(ptypes);
            } 
```

# android - 如果一旦登录，如何创建一个始终登录的登录页面？

> ID：12757773
> 
> 赞同：1
> 
> 时间：2012-10-06T07:34:04.990
> 
> 标签：android, login-page

我的项目有一个登录页面。我的要求是，如果我登录后，该登录页面总是要登录。我通过谷歌得到了一些想法，即，它建议我使用共享偏好概念，现在我正在遵循这个概念，我已经尝试了一些代码。

在我的项目中，问题是在提供正确的用户名和密码后，它不会切换到另一个屏幕，同时我的日志猫也没有得到任何东西。如何实现这个概念？

建议请..

*请找到我的参考资料*

**类 SaveSharedPreferece**

```
public class SaveSharedPreference 
{
static final String PREF_USER_NAME= "username";

static SharedPreferences getSharedPreferences(Context ctx) {
    return PreferenceManager.getDefaultSharedPreferences(ctx);
}

public static void setUserName(Context ctx, boolean userName) 
{
    Editor editor = getSharedPreferences(ctx).edit();
    editor.putBoolean(PREF_USER_NAME, userName);
    editor.commit();
}

public static String getUserName(Context ctx)
{
    return getSharedPreferences(ctx).getString(PREF_USER_NAME, "");
}} 
```

**MainActivity.java**

```
public class MainActivity extends Activity 
{
Button btn;
EditText edt1,edt2;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
 }

 public void loginpage()
 {  
    edt1 = (EditText)findViewById(R.id.editText_username);
    edt2 = (EditText)findViewById(R.id.editText_password);

    btn = (Button)findViewById(R.id.button_login);
    btn.setOnClickListener(new View.OnClickListener()
    {

@Override
public void onClick(View v) 
{
    if(edt1.getText().toString().length()!=0 && edt1.getText().toString().length()!=0)
    {
        Intent intvar =  new Intent(v.getContext(), ResultActivity.class);
        startActivity(intvar);
    }
    else
    {
    Toast.makeText(getApplicationContext(), "oops! empty..", Toast.LENGTH_SHORT).show();
        }
    }
});

if(SaveSharedPreference.getUserName(MainActivity.this).length() == 0)
{
     // call Login Activity
     loginpage();
   }
 else
 {
    // Call Next Activity

 }

 if (getIntent().getBooleanExtra("EXIT", false)) 
 {
   finish();
        }
    }
} 
```

**结果活动.java**

```
public class ResultActivity extends Activity 
{ 

Button btn_exit;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    btn_exit = (Button)findViewById(R.id.button_exit);
    btn_exit.setOnClickListener(new View.OnClickListener()
    {

    @Override
    public void onClick(View v) 
    {
        Intent intent = new Intent(ResultActivity.this, MainActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        intent.putExtra("EXIT", true);
        startActivity(intent);
        }
    });
}} 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:38:08.253

您正在将布尔值保存到 SharedPreferences 并获取字符串。这怎么可能。

最好保存并获取布尔值或字符串。

如下更改 SaveSharedPreference 类中的 setUserName() 代码，它可以工作

```
public static void setUserName(Context ctx, String userName) 
{
    Editor editor = getSharedPreferences(ctx).edit();
    editor.putString(PREF_USER_NAME, userName);
    editor.commit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:50:40.787

首先在 SharedPrefernce 文件中添加另一个字段作为密码。对用户名（在 setter 方法中将其设为字符串而不是布尔值）执行相同的操作，例如 setter 和 getter 方法。

创建一个从 sharedPrefernce 中获取值的方法，如下所示：

```
private void validateUser(){
String username  = SaveSharedPreference.getUserName(MainActivity.this);
String password = SaveSharedPreference.getPassword(MainActivity.this);
 if (check_for_any_condition){
    Intent intvar =  new Intent(v.getContext(), ResultActivity.class);
    startActivity(intvar);
 }
} 
```

在您的 oncreate 方法中调用此方法。

希望它会帮助你。

# c# - 使用密码保护 ASPX 页面

> ID：12757774
> 
> 赞同：0
> 
> 时间：2012-10-06T07:34:25.410
> 
> 标签：c#, asp.net

我正在制作一个页面，用户应该再次输入密码才能打开，当他离开并再次返回时，他应该重新输入密码。没有会话或饼干，只是一个简单的页面，您输入您查看的密码。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:42:09.107

您应该使用**2 个页面**，一个用于输入密码，另一个用于显示页面...

`form`密码页面，将有一个`POST`指向`page2.aspx`

示例`protected.aspx`：

```
<form action="page2.aspx" mehod="post">
  Pasword: <input type="password" id="pwd" name="pwd" /> 
  <input type="submit" value="Enter" />
</form> 
```

并且`Page_Load`事件`page2.aspx`应该是这样的

```
if(Request["pwd"] == null || Request["pwd"] != "123") {
  Response.Redirect("InvalidPassword.aspx");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:47:14.177

使用两个 div。

一个包含主要内容，另一个包含文本框和按钮。

```
<div id="MainDiv" runat="server" Visible="false">Main Content goes here. </div> 
```

和登录 div

```
<div id="LoginDiv" runat="server" Visible="true">
        <asp:TextBox ID="PasswordTextBox" runat="server"></asp:TextBox>
        <asp:Button ID="LoginButton" runat="server" Text="Button" OnClick="LoginButton_Click" /></div> 
```

在登录按钮单击处理程序上，检查密码并切换可见性。

```
protected void LoginButton_Click(object sender, EventArgs e)
        {
            if(PasswordTextBox.Text=="Password")
            {
                MainDiv.Visible=true;
                LoginDiv.Visible=false;
            }
        } 
```

# regex - 正则表达式：在字符串中的任何位置匹配“year:2012”？

> ID：12757778
> 
> 赞同：2
> 
> 时间：2012-10-06T07:35:17.893
> 
> 标签：regex, search, digit

我正在研究一个搜索引擎，我需要用户能够按年份过滤结果。我希望用户能够在搜索字符串的任何位置添加“年份：（四位数字）”。我创建了这个，但它不是我想要的：

```
(year\:\d{4}) 
```

它确实符合我的需要，但我只想匹配它旁边是否有空格或没有空格。现在，即使它位于单词的中间，它也会匹配。

例子：

```
testyear:2012test - Don't want match
test year:2012test - Don't want match
test year:2012 test - DO want match
test year:2012 - DO want match 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:38:08.893

您可以使用单词边界：

```
\b(year:\d{4})\b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:37:46.910

使用以下正则表达式：

```
\byear:\d{4}\b 
```

`\b`匹配单词边界

# iphone - 如何在 NSURLConnection 中放置阿拉伯语

> ID：12757779
> 
> 赞同：2
> 
> 时间：2012-10-06T07:35:20.063
> 
> 标签：iphone, ios, url, nsurlconnection, arabic

我必须将阿拉伯语放在 NSURLConnection 中，但问题是当我无法使用 NSLog 正确查看阿拉伯语字符串时，我会得到以下字符串。

```
 Country is ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑŸÖÿ™ÿ≠ÿØÿ© 
```

如果我从 NSURLConnection 我得到

```
 http://xxxxxx.com/api/api.php?func=showAllCompaniesCategoriesCountryWise&params[]=ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©&params[]=all 
```

错误的网址

```
 Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x2f0b00 {NSUnderlyingError=0x2f1130 "bad URL", NSLocalizedDescription=bad URL} 
```

所以，请帮助我，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:05:58.540

您应该使用`- (NSString *)stringByAddingPercentEscapesUsingEncoding:(NSStringEncoding)encoding`为`NSURL`.

# java - Java二维数组乘法错误？

> ID：12757784
> 
> 赞同：0
> 
> 时间：2012-10-06T07:35:44.257
> 
> 标签：java

我必须为学校编写这个程序，将一对二维数组相乘。当我尝试运行程序时，我不断收到 out of bounds:3 错误。

我已经检查了很多次代码，但我一生都无法弄清楚故障发生在哪里。我进行了调试，第一个断点位于 if 语句“if (a[0].length != b.length)”处，我无法弄清楚为什么这是一个断点。

有人可以帮助我吗？

```
 public class Multiply {

    public static double[][] Multiply_2D_Arrays(double[][] a, double[][] b)

    { 
        if (a[0].length != b.length) // Check to see if the number of a's colums equals the number of b's rows
        {
            throw new IllegalArgumentException("Matrices don't match: " + a[0].length + " != " + b.length);

        }

        int a_rows = a.length;      // Defines the variable M as the row length of array a
        int b_columns = b[0].length;   // Defines the variable N as the column length of array b
        double[][] c = new double[a_rows][b_columns]; // This means that the dimensions of array c will be the rows of a by the columns of b

        for(int i = 0; i < a.length; i++)
            {
                for(int j = 0; j < b[0].length; j++)
                {
                    for(int k = 0; k < a[0].length; )
                    {

                        c[i][j] += a[i][k] * b[k][j];     //Iterates through each row and column of array a and b and then adding it to the dot point sum

                    }

                }
            }

            return c;      //returns the final new array c

        }

    public static void main(String[] args)

    {
        double[][] array1 = {{4.0, 5.0, 6.0}, {2.0, 1.0, 4.0}, {8.0, 7.0, 6.0}, {1.0, 1.0, 2.0}};
        double[][] array2 = {{5.0, 7.0, 7.0, 8.0}, {8.0, 8.0, 9.0, 2.0}, {10.0, 2.0, 3.0, 1.0}};
        double[][] array3 = Multiply.Multiply_2D_Arrays(array1, array2); //Calls the Multiply_2D_Arrays method

        for(int i = 0; i < array3.length; i++)
        {
            for (int j = 0; j < array3.length; j++)
            {
                System.out.print(array3[i][j] + " ");
            }
        }

        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:45:22.023

你错过`k++`了 `for(int k = 0; k < a[0].length; )`

然后你有一个无限循环

此外，如果要将结果打印为矩阵，请放入`System.out.println()`for 循环：

```
 for(int i = 0; i < array3.length; i++)
    {
        for (int j = 0; j < array3.length; j++)
        {
            System.out.print(array3[i][j] + " ");
        }
        System.out.println();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:49:14.947

`for(int k = 0; k < a[0].length; )`如果您将其更改为`for(int k = 0; k < a[0].length;k++ )`您错过了`k++`内部 for 循环，程序将正确执行。

# c# - C# 添加 STS 引用缺失

> ID：12757785
> 
> 赞同：0
> 
> 时间：2012-10-06T07:35:45.040
> 
> 标签：c#, visual-studio-2010, azure

我在 Windows 7（32 位）VM 上安装了 Visual Studio 2010。我已经安装了 Windows Identity Foundation 插件，我从 Visual Studio 2010 的插件管理器中对其进行了交叉检查。

当我在解决方案资源管理器中右键单击项目时，缺少添加 STS 引用。

根据第 8 步中的文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx#BKMK_2](http://msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx#BKMK_2)

我需要添加 STS 参考。但是上下文菜单中缺少该选项。请帮忙。

在此先感谢您的帮助... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:20:41.480

解决方案：这是一个愚蠢的错误。该项目应创建为 Windows Azure 云项目。

在链接的第 7 步中：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx#BKMK_2](http://msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx#BKMK_2)

未指定应在“C#”或“Visual Basic”下选择“Cloud”，这导致我感到困惑。

现在，当我在资源管理器窗口中右键单击项目名称时，上下文菜单显示“添加 STS 引用”，因为该项目是 Windows Azure 项目类型。

# javascript - 在文本输入框中添加块，类似于将电子邮件应用程序添加到字段

> ID：12757789
> 
> 赞同：3
> 
> 时间：2012-10-06T07:36:27.503
> 
> 标签：javascript, jquery, html, css

我需要使用 HTML、CSS 和 JS 为 Web 应用程序中的撰写消息页面编写以下标题。

![在此处输入图像描述](../Images/f000d454ddd0a30d3bbabd40b4aa033c.png)

我的问题是如何向输入框添加功能以将选定的电子邮件地址转换为框，如下图所示：

![在此处输入图像描述](../Images/ad79fe37a57c46ba126bc30d207343f6.png)

如今，几乎所有电子邮件应用程序都使用了类似的功能。

stackoverflow 上的标签文本框也使用了相同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:45:40.203

你可以使用 jQuery **Tag 来完成它！**插入。

[关联](http://archive.plugins.jquery.com/project/tag-it)

[演示](http://levycarneiro.com/projects/tag-it/example.html)

甚至这个插件也很棒：[**AutoSuggest**](https://github.com/drewwilson/AutoSuggest) | [**演示**](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

# mysql - 像这样的 SQL 查询什么时候开始和结束？

> ID：12757797
> 
> 赞同：0
> 
> 时间：2012-10-06T07:37:12.477
> 
> 标签：mysql, sql

我正在使用如下 SQL 查询：

```
SELECT * FROM game_list 
WHERE  start_date <= DATE(NOW()) AND end_date >= DATE(NOW())
ORDER BY game_id DESC; 
```

现在，这实际上什么时候开始和结束？我的意思是我知道什么日期，但时间是几点，是午夜、上午 12 点、下午还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:13:09.643

如果我理解正确，您只想在当前时间在开始时间和结束时间之间时才显示游戏，在这种情况下，您实际上需要的是：

```
SELECT * FROM game_list 
WHERE  DATE(NOW()) >= start_date AND DATE(NOW()) <= end_date 
ORDER BY game_id DESC; 
```

这样它应该可以正常工作我能看到的唯一问题是如果你没有正确格式化你的 start_date 和 end_date。

*   如果您的值是完整时间戳，您应该直接使用 NOW() 或 CURRENT_TIMESTAMP，因为它包含日期和时间
*   如果您的 start_date 是年月日，例如：2012-05-12 您应该使用 CURDATE()
*   如果您的值只是一个天数，例如 1...2...3...4..etc 您应该使用 DAY()

我会仔细检查 start_date 返回的内容并做出相应决定，作为参考，我会在这里查看[mysql 中的日期和时间](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:44:00.430

如果您询问该`DATE`函数是如何工作的：它只是提取日期时间的日期部分。

见[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)

```
SELECT DATE('2003-12-31 01:02:03');
-> '2003-12-31 
```

这仅代表那一天。再次被视为日期时间，它将变为午夜（2003-12-31 00:00:00）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:46:15.170

我认为您想要以下内容

```
SELECT * FROM game_list 
WHERE  start_date <= DATE(NOW()) AND end_date >= DATE_SUB(NOW(), INTERVAL 1 DAY)
ORDER BY game_id DESC; 
```

上面的查询获取今天之前开始并且结束日期大于明天日期的记录

# android - 用于 ListView 的 Android LazyAdapter

> ID：12757804
> 
> 赞同：0
> 
> 时间：2012-10-06T07:38:24.990
> 
> 标签：android, android-lazyadapter

我想我搞砸了我的上下文。有人可以纠正我的代码吗？我似乎无法弄清楚如何在我的lazyadapter中实现上下文。请看一下我的LOGCAT。谢谢。

AndroidFragment.java

```
public class AndroidFragment extends SherlockListFragment  implements ActionBar.TabListener{

    static final String URL = "https://myxml.xml";
    static final String KEY_SONG = "song";
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_CAT_ARTIST = "artistcat";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_CAT_URL = "cat_url";
    ArrayList<HashMap<String, String>> menuItems;
    ListAdapter adapter;
    Context appContext;
    ListView list;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        appContext = inflater.getContext().getApplicationContext();

        new loadListView().execute();   

    return super.onCreateView(inflater, container, savedInstanceState);
    }

    public class loadListView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
            menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_CAT_ARTIST, parser.getValue(e, KEY_CAT_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                map.put(KEY_CAT_URL, parser.getValue(e, KEY_CAT_URL));

                // adding HashList to ArrayList
                menuItems.add(map);
            }
                return null;
            }   

        @Override
        protected void onPostExecute(String args) {

            adapter=new MainPageLazyAdapter(appContext, menuItems);   
             list.setAdapter(adapter);
         }
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.add(android.R.id.content, this);

        ft.attach(this);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(this);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

} 
```

MainPageLazyAdapter.java

```
public class MainPageLazyAdapter extends BaseAdapter {

private Application activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public MainPageImageLoader imageLoader; 

public MainPageLazyAdapter(Context appContext, ArrayList<HashMap<String, String>> d) {
    activity = appContext;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new MainPageImageLoader(activity);
} 
```

我收到了这个错误：

```
Type mismatch: cannot convert from Context to Application 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:21:44.130

删除`(Activity)`您在构造函数中使用的演员表。您在创建实例时已经使用`inflator.getContext.getApplicationContext`过，并且不能`Activity`再次将其转换为上下文。要么你传递`inflator.getContext()`唯一的（如果你使用`Activity`上下文，你可能会出现内存泄漏），或者你使用`Application`上下文，所以你删除了`Activity`强制转换。

**编辑：**

您已经将 ApplicationContext 传递给构造函数，因此无需再次将其转换为 Activity：

```
activity = (Activity) appContext; 
```

然后再次获取 Application 上下文：

```
imageLoader=new MainPageImageLoader(activity.getApplicationContext()); 
```

只需设置`activity = appContext;`（该变量现在应该命名为Application）并直接传递它`imageLoader=new MainPageImageLoader(activity);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:33:16.963

查看`MainPageLazyAdapter`构造函数代码：`activity = (Activity) appContext;`
从另一方面 - 类`AndroidFragment.onCreateView`：appContext = inflater.getContext().getApplicationContext();

并且在`AndroidFragment.onPostExecute`：
`adapter=new MainPageLazyAdapter(appContext, menuItems);`
所以 - 您正在将 Application Context 转换为 Activity 并且它会导致转换错误。

为避免这种情况，您可以覆盖`AndroidFragment.onAttach`方法并将一个成员添加到`AndroidFragment`：

```
protected Activity fragmentActivity;    
@Override public void onAttach (Activity activity){
    fragmentActivity = activity;
} 
```

然后替换
`adapter=new MainPageLazyAdapter(appContext, menuItems);`
为
`adapter=new MainPageLazyAdapter(fragmentActivity, menuItems);`

和...考虑`imageLoader=new MainPageImageLoader(activity.getApplicationContext());`
搬到`onAttach()`

# android - 在 android 的 init.rc 中注册我的应用程序，以自动重启

> ID：12757805
> 
> 赞同：1
> 
> 时间：2012-10-06T07:38:44.490
> 
> 标签：android, android-ndk, android-framework

我想在 init.rc 中注册我的服务或我的应用程序

换句话说，一个普通的android应用程序有**ZYGOTE**作为它的父级，它可以在强制停止后被杀死。但是，如果注册或使我的应用程序成为父 **级 init.rc**，我将能够实现我想要的！

有相同的信息吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:55:02.823

我不确定您要完成什么。如果你想要一个在系统进程中运行的服务，那么你应该有一个战利品： http: [//processors.wiki.ti.com/index.php/Android-Adding_SystemService](http://processors.wiki.ti.com/index.php/Android-Adding_SystemService)。

如果您希望此服务在有人杀死它或服务管理器被杀死时重新启动。然后您需要执行以下操作：

*   你的班级必须有一个`void main(int arcgc, argv[])`运行它。这意味着您的服务必须是可执行文件（用 cpp 编写）
*   将此添加到`init.rc`：

> 服务 your_service_name 位置
> 
> ```
>  class main
>   critical
>   onrestart restart zygote 
> ```

并修改它说的地方`servicemanager`：

```
service servicemanager /system/bin/servicemanager
    class core
    user system
    group system
    critical
    onrestart restart zygote
    onrestart restart media
    onrestart restart surfaceflinger
    onrestart restart drm
    onrestart restart your_service_name 
```

您应该查看：[https](https://github.com/android/platform_system_core/blob/master/init/README.md) ://github.com/android/platform_system_core/blob/master/init/README.md 以获得更多选项。

如果您想查看参考`bootanim`并`init.rc`查看它是如何实现的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:36:27.430

AFAIK 只有可执行文件可以从 init.rc 启动。无法从 init.rc 启动 android 服务。

# php - Zend framework 2 \Zend\Db\ResultSet\ResultSet->toArray() 不返回记录

> ID：12757808
> 
> 赞同：9
> 
> 时间：2012-10-06T07:39:05.707
> 
> 标签：php, zend-framework2

我只是试图通过扩展 Zend`AbstractTableGateway`并利用继承的`select()`函数来获取给定表中的所有记录。此`select()`函数返回 Zend 类型`ResultSet`，但是我无法使用`toArray()`.

我收到以下消息：

> 作为此 DataSource 一部分的行，对象类型不能转换为数组

## 更新

我解决了

假设您已扩展 AbstractTableGateway

```
$resultSet = $this->select();
foreach($resultSet as $row) { echo $row->yourProperty } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-30T13:51:37.117

你应该`HydratingResultSet`这样使用：

```
class MyClassTable extends AbstractTableGateway
{
    public function __construct(Adapter $adapter)
{
    $this->adapter = $adapter;
    $this->resultSetPrototype = new HydratingResultSet();
    $this->resultSetPrototype->setObjectPrototype(new MyClass());
    $this->initialize();
}

public function fetchAll()
{
    $resultSet = $this->select();
    return $resultSet;
}

public function fetchAllToArray()
{
    $aData = $this->fetchAll()->toArray();
    return $aData;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T19:57:13.220

你也可以试试这个

```
$sql = new Sql($adapter);

$select = $sql->select();

$select->from('table');

$statement = $sql->prepareStatementForSqlObject($select); 

$results = $statement->execute();

$resultSet = new ResultSet();
$resultSet->initialize($results);

print_r($resultSet->toArray()); 
```

使用 Zend\Db\ResultSet\ResultSet；

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T14:31:29.327

只是尝试使用

```
(array)$resultSet 
```

我有时在 ZF 上使用过它并且工作正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-15T10:51:03.250

我的问题正如@Fatmuemoo 指出的那样。

如果您注册自定义对象原型，例如代码。

```
$resultSetPrototype = new ResultSet($entityClassName, new $entityClassName);
$instance->setResultSetPrototype($resultSetPrototype); 
```

你必须在你的实体类中实现**toArray()**方法。

```
public function toArray()
{
    return get_object_vars($this);
} 
```

# sql - 将毫秒转换为天、小时、分钟和秒

> ID：12757811
> 
> 赞同：8
> 
> 时间：2012-10-06T07:39:56.317
> 
> 标签：sql, sql-server, valueconverter

我在 Microsoft SQL Server 2008R2 中有一个充满滴答声的 bigint 字段（单个滴答声表示一百纳秒或一千万分之一秒。一毫秒内有 10,000 个滴答声。）

[http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

我需要将所有记录的总和转换为天：小时：分钟：秒：毫秒。

它适用于单个记录：

```
SELECT CONVERT(TIME, DATEADD(ms, duration/10000, 0)) FROM tblMediaFileProperties WHERE FileId = '6C0A849D-95B4-4755-A923-B9DD8F1AF23E' 
```

但如果使用以下方法对所有记录进行总结：

```
SELECT CONVERT(TIME, DATEADD(ms, SUM(duration/10000), 0)) FROM tblMediaFileProperties 
```

我得到一个：

将表达式转换为数据类型 int 时出现算术溢出错误。

我知道溢出来自 CONVERT to Data Type TIME 函数...

帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T07:44:44.383

对于[只](http://msdn.microsoft.com/en-us/library/ms186819.aspx)接受`int`.
把它分成两部分：秒，然后是毫秒。

```
SELECT CONVERT(TIME,
          DATEADD(ms, SUM(duration/10000 % 1000),
          DATEADD(ss, SUM(duration/10000000), 0)))
FROM tblMediaFileProperties 
```

如果您的总持续时间超过 1 天，您可以使用它来分别获取天数和 hr:min:sec:ms。如果你真的想要文本形式的结果，这是一个强制转换和字符串连接的问题。

```
declare @duration bigint
set @duration = 1230000000
SELECT @duration/10000/1000/60/60/24 DAYS,
       CONVERT(TIME,
          DATEADD(ms, SUM(@duration/10000 % 1000),
          DATEADD(ss, SUM(@duration/10000000), 0))) HR_MIN_SEC 
```

# macos - WebView 作为响应者

> ID：12757820
> 
> 赞同：1
> 
> 时间：2012-10-06T07:40:38.483
> 
> 标签：macos, cocoa, webview, nsfontmanager, nscolorpanel

我想在子类中接收[`changeFont:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSFontManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/changeFont%3a)and[`changeColor:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorPanel_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/changeColor%3a)消息`WebView`。

根据文档，这些方法由响应者发送`NSFontManager`并`NSColorPanel`分别发送给响应者。

然而，他们从未在我的`WebView`子类中被调用。这是预期的行为吗？如果没有，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:58:58.643

显然，由于`WebView`具有可编辑的内容，事件正在被子响应者使用。

解决方法是倾听`WebViewDidChangeNotification`何时发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:52:23.477

这是我认为正在发生的事情

NSFontManager 显然是沿着响应者链发送消息，而不是发送给委托人。

我会将我的 CustomWebViewController 设置为窗口的代表。

# python - Python打印函数

> ID：12757832
> 
> 赞同：2
> 
> 时间：2012-10-06T07:42:38.017
> 
> 标签：python, printing, python-3.x

不久前我开始学习 Python，遇到了第一个问题。这是代码：

```
fh = open('/usr/share/dict/words')
for line in fh.readlines():
    print(line, end='') 
```

当我在终端（OS X）中执行它时，它告诉我放置等号的位置`invalid syntax`出错。`end`这里有什么问题？没找到解决办法...

我从此[页面](http://python.org/download)安装了 Python 3.3.0 ，Python 3.3.0 Mac OS X 64-bit/32-bit x86-64/i386 Installer

对不起这么无聊的问题:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T07:44:26.623

您的终端可能正在使用 Python2.x

尝试使用命令`python3 yourfilename.py`

要查看终端上的标准 Python 版本，只需键入`python`

您应该看到如下内容：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information. 
```

要使您的代码与 2.x 一起使用，您可以使用 print 不带括号：

```
print "Python", "yay!" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T07:46:45.717

Python 3 安装程序不会使 Python 3 成为默认 Python（如果这样做，它会破坏很多东西，因为很少有 Python 脚本与 Python 3 兼容）。因此，要获得 Python 3，您应该将脚本执行为`python3 script.py`，或添加`#!/usr/bin/env python3`到文件的顶部。

# iphone - 如何去iphone的facebook设置页面点击警报视图IOS6中的设置按钮

> ID：12757833
> 
> 赞同：1
> 
> 时间：2012-10-06T07:42:46.437
> 
> 标签：iphone, objective-c, ios6

> **可能重复：**
> [iOS 6 社交集成 - 转到设置问题](https://stackoverflow.com/questions/12638132/ios-6-social-integration-go-to-settings-issue)

我正在使用 twitter 和 facebook 的 IOS 6 共享功能。如果我没有在 Iphone 的常规设置中配置我的帐户。它给了我设置的警报视图。请参阅随附的屏幕截图。

我是新来的，所以无法附上截图

但是当我点击设置按钮时，它不会带我进入设置页面。这个怎么做 ？请帮忙

# directx-9 - 失踪 ';' PVOID64 之前的标识符

> ID：12757838
> 
> 赞同：0
> 
> 时间：2012-10-06T07:43:56.333
> 
> 标签：directx-9

我看到另一个帖子解决了这个问题，但是提问者显然包括*winnt.h*而不是*windows.h*（据说包括*winnt.h*）

我正在使用*windows.h*但仍然遇到这个问题。

我试过使用 Visual Studio 2010 Express 和 Ultimate 并且都产生这个错误。

有没有人遇到过这个？

这是代码：

```
#include<Windows.h>
#include<d3d9.h>
#include<time.h>
#include<d3dx.h>

#define APPTITLE "Create Surface"

#define KEY_DOWN(vk_code)((GetAsyncKeyState(vk_code) & 0x8000) ? 1 : 0)
#define KEY_UP(vk_code)((GetAsyncKeyState(vk_code) & 0x8000) ? 1 : 0)

#define SCREEN_WIDTH 640
#define SCREEN_HEIGHT 480

LRESULT WINAPI WinProc(HWND, UINT, WPARAM, LPARAM);
ATOM MyRegisterClass(HINSTANCE);
int Game_Init(HWND);
void Game_Run(HWND);
void Game_End(HWND);

LPDIRECT3D9 d3d = NULL;
LPDIRECT3DDEVICE9 d3ddev = NULL;

LPDIRECT3DSURFACE9 backbuffer = NULL, surface = NULL;

LRESULT WINAPI WinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam){
    switch(msg){
    case WM_DESTROY:
        Game_End(hWnd);
        PostQuitMessage(0);
        return 0;
    }
    return DefWindowProc(hWnd, msg, wParam, lParam);
}

ATOM MyRegisterClass(HINSTANCE hInstance){
    WNDCLASSEX wc;
    wc.cbSize = sizeof(WNDCLASSEX);

    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = (WNDPROC)WinProc;
    wc.cbWndExtra = 0;
    wc.cbClsExtra = 0;
    wc.hInstance = hInstance;
    wc.hIcon = NULL;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);
    wc.lpszMenuName = NULL;
    wc.lpszClassName = APPTITLE;
    wc.hIconSm = NULL;

    return RegisterClassEx(&wc);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow){
    MSG msg;

    MyRegisterClass(hInstance);

    HWND hWnd;

    hWnd = CreateWindow(
        APPTITLE,
        APPTITLE,
        WS_EX_TOPMOST | WS_VISIBLE | WS_POPUP,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        SCREEN_WIDTH,
        SCREEN_HEIGHT,
        NULL,
        NULL,
        hInstance,
        NULL);

    if(!hWnd)
        return FALSE;

    ShowWindow(hWnd, nCmdShow);
    UpdateWindow(hWnd);

    if(!Game_Init(hWnd))
        return 0;

    int done = 0;
    while(!done){
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE)){
            if(msg.message == WM_QUIT)
                done = 1;
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
        else
            Game_Run(hWnd);
    }
    return msg.wParam;
}

int Game_Init(HWND hWnd){
    HRESULT result;

    d3d = Direct3DCreate9(D3D_SDK_VERSION);
    if(d3d == NULL){
        MessageBox(hWnd, "Failed to initialise d3d", "Error", MB_OK);
        return 0;
    }

    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory(&d3dpp, sizeof(d3dpp));

    d3dpp.Windowed = FALSE;
    d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
    d3dpp.BackBufferFormat = D3DFMT_X8R8G8B8;
    d3dpp.BackBufferCount = 1;
    d3dpp.BackBufferHeight = SCREEN_HEIGHT;
    d3dpp.BackBufferWidth = SCREEN_WIDTH;
    d3dpp.hDeviceWindow = hWnd;

    d3d->CreateDevice(
        D3DADAPTER_DEFAULT,
        D3DDEVTYPE_HAL,
        hWnd,
        D3DCREATE_SOFTWARE_VERTEXPROCESSING,
        &d3dpp,
        &d3ddev);

    if(d3ddev == NULL){
        MessageBox(hWnd, "Failed to initialise Direct3D device", "Error", MB_OK);
        return 0;
    }

    srand(time(NULL));

    d3ddev->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);

    d3ddev->GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &backbuffer);

    result = d3ddev->CreateOffscreenPlainSurface(
        100,
        100,
        D3DFMT_X8R8G8B8,
        D3DPOOL_DEFAULT,
        &surface,
        NULL);

    if(!result)
        return 1;

    return 1;
}

void Game_Run(HWND hWnd){
    RECT rect;
    int r,g,b;

    if(d3ddev == NULL)
        return;

    if(d3ddev->BeginScene()){
        r = rand() % 255;
        g = rand() % 255;
        b = rand() % 255;
        d3ddev->ColorFill(surface, NULL, D3DCOLOR_XRGB(r,g,b));

        rect.left = rand() % SCREEN_WIDTH / 2;
        rect.right = rect.left + rand() % SCREEN_WIDTH / 2;
        rect.top = rand() % SCREEN_HEIGHT;
        rect.bottom = rect.top + rand() % SCREEN_HEIGHT / 2;

        d3ddev->StretchRect(surface, NULL, backbuffer, &rect, D3DTEXF_NONE);

        d3ddev->EndScene();
    }

    d3ddev->Present(NULL, NULL, NULL, NULL);

    if(KEY_DOWN(VK_ESCAPE))
        PostMessage(hWnd, WM_DESTROY, 0, 0);
}

void Game_End(HWND hWnd){
    surface->Release();

    if(d3ddev != NULL)
        d3ddev->Release();

    if(d3d != NULL)
        d3d->Release();
} 
```

还有我上面提到的帖子的链接： [语法错误：缺少';' 编译 winnt.h 时在标识符“PVOID64”之前](https://stackoverflow.com/questions/9923628/syntax-error-missing-before-identifier-pvoid64-when-compiling-winnt-h)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:31:30.113

这是因为VC++包含目录的顺序，尽量把windows SDK的路径放在DirectX SDK之前，如下图。

![在此处输入图像描述](../Images/83c36e643bec274978eaf51b85a24243.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T08:53:47.870

所以我想我在尝试在另一台笔记本电脑上进行排序时偶然发现了一个解决方案。

Windows SDK 似乎安装了一些东西，称为 Windows SDK 配置工具。运行它会检测您安装了哪些版本的 SDK，然后允许您选择要使用的版本。然后，它会配置您必须使用所选版本的所有 Visual Studio 版本。

我认为这解决了这个问题 - 还没有适当的机会进行全面检查 - 我还卸载了所有相关组件的 Visual Studio 版本，并仅重新安装了我需要的那个（暂时 - 以后可能会安装其他版本看看这是否可能导致各种冲突）。

无论如何，只是想我会在这里为发生在这个线程中的任何人留下一个可能的解决方案。

\,,/[>.<]\,,/

# java - Java中数组是按值传递还是按引用传递？

> ID：12757841
> 
> 赞同：224
> 
> 时间：2012-10-06T07:44:15.833
> 
> 标签：java, arrays

数组不是Java中的[原始类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)，但它们[也不是对象](https://stackoverflow.com/questions/5564423/arrays-in-java-and-how-they-are-stored-in-memory)，那么它们是通过值传递还是通过引用传递？它是否取决于数组包含的内容，例如引用或原始类型？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-10-06T07:47:07.800

**Java 中的所有内容都是按值传递的。**对于数组（只不过是一个对象），数组引用是按值传递的（就像对象引用是按值传递一样）。

当您将数组传递给其他方法时，实际上会复制对该数组的引用。

*   通过该引用对数组内容的任何更改都会影响原始数组。
*   但是将引用更改为指向新数组不会更改原始方法中的现有引用。

请参阅这篇文章：[Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

**请参阅此工作示例：**

```
public static void changeContent(int[] arr) {

   // If we change the content of arr.
   arr[0] = 10;  // Will change the content of array in main()
}

public static void changeRef(int[] arr) {
   // If we change the reference
   arr = new int[2];  // Will not change the array in main()
   arr[0] = 15;
}

public static void main(String[] args) {
    int [] arr = new int[2];
    arr[0] = 4;
    arr[1] = 5;

    changeContent(arr);

    System.out.println(arr[0]);  // Will print 10.. 

    changeRef(arr);

    System.out.println(arr[0]);  // Will still print 10.. 
                                 // Change the reference doesn't reflect change here..
} 
```

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2012-10-06T07:47:44.567

你的问题是基于一个错误的前提。

> *数组不是 Java 中的原始类型，但它们也不是对象……”*

事实上，Java 中的所有数组**都是**对象¹。每个 Java 数组类型都有`java.lang.Object`其超类型，并继承`Object`API 中所有方法的实现。

> ...那么它们是通过值传递还是通过引用传递？它是否取决于数组包含的内容，例如引用或原始类型？

简短的回答：1）按价值传递，2）没有区别。

更长的答案：

像所有 Java 对象一样，数组是按值传递的……但值是对数组的引用。因此，当您在被调用方法中为数组的单元格分配某些内容时，您将分配给调用者看到的同一个数组对象。

这不是通过引用传递。 *真正*的传递引用涉及传递*变量的地址*。使用*真正的*传递引用，被调用的方法可以分配给它的局部变量，这会导致调用者中的变量被更新。

但不是在Java中。在 Java 中，被调用的方法可以更新数组的内容，并且可以更新其数组引用的副本，但不能更新保存调用者数组引用的调用者中的变量。因此……Java 提供的不是引用传递。

这里有一些链接解释了按引用传递和按值传递之间的区别。如果你不理解我上面的解释，或者如果你倾向于不同意这些术语，你*应该*阅读它们。

*   [http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/cplr233.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/cplr233.htm)
*   [http://www.cs.fsu.edu/~myers/c++/notes/references.html](http://www.cs.fsu.edu/~myers/c++/notes/references.html)

相关的SO问题：

*   [Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

历史背景：

短语“pass-by-reference”最初是“call-by-reference”，用于区分FORTRAN（call-by-reference）和ALGOL-60（call-by-value）的参数传递语义和点名）。

*   在按值调用中，参数表达式被评估为一个值，并且该值被复制到被调用的方法中。

*   在按引用调用中，参数表达式被部分评估为传递给调用方法的“左值”（即变量或数组元素的地址）。然后调用方法可以直接读取和更新变量/元素。

*   在按名称调用中，实际的参数表达式被传递给调用方法（!!），该方法可以对其进行多次评估（!!!）。这实现起来很复杂，并且可以用来（滥用）编写非常难以理解的代码。直呼只在 Algol-60 中使用过（谢天谢地！）。

**更新**

实际上，Algol-60 的名称调用类似于将 lambda 表达式作为参数传递。问题是这些不完全是 lambda 表达式（它们在实现级别被称为“thunk”）可以*间接*修改调用过程/函数范围内的变量状态。这是让他们如此难以理解的部分原因。[（例如，参见Jensen 设备](http://en.wikipedia.org/wiki/Jensen%27s_Device)上的 Wikipedia 页面。）

* * *

^(1\. 链接的问答（[Java 中的数组以及它们如何存储在内存中](https://stackoverflow.com/questions/5564423/arrays-in-java-and-how-they-are-stored-in-memory)）中没有任何内容表明或暗示数组不是对象。)

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-10-06T07:46:17.927

数组实际上是对象，所以传递了一个引用（引用本身是按值传递的，还困惑吗？）。快速示例：

```
// assuming you allocated the list
public void addItem(Integer[] list, int item) {
    list[1] = item;
} 
```

您将从调用代码中看到对列表的更改。但是，您不能更改引用本身，因为它是按值传递的：

```
// assuming you allocated the list
public void changeArray(Integer[] list) {
    list = null;
} 
```

如果您传递一个非空列表，则在方法返回时它不会为空。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-10-06T07:47:38.673

不，那是错误的。数组是 Java 中的特殊对象。所以它就像传递其他对象一样，您传递引用的值，而不是引用本身。意思是，在被调用例程中更改数组的引用不会反映在调用例程中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-06T07:49:22.820

**Java 中的一切都是按值传递的。**

在数组的情况下，引用被复制到一个新的引用中，但请记住，Java 中的所有内容都是通过 value 传递的。

看看[这篇有趣的文章](http://javadude.com/articles/passbyvalue.htm)以获取更多信息......

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-06T08:51:52.860

数组的最终讨论位于[http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html#27803](http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html#27803)。这清楚地表明 Java 数组是对象。这些对象的类在 10.8 中定义。

语言规范的第 8.4.1 节[http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#40420](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#40420)描述了如何将参数传递给方法。由于 Java 语法源自 C 和 C++，因此行为相似。原始类型按值传递，与 C 一样。传递对象时，对象引用（指针）按值传递，反映了按值传递指针的 C 语法。参见 4.3.1，[http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#4.3](http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#4.3)，

实际上，这意味着在方法内修改数组的内容会反映在调用范围内的数组对象中，但是在方法内为引用重新分配新值对调用范围内的引用没有影响，即这正是您对指向 C 中的结构或 C++ 中的对象的指针所期望的行为。

术语的混淆至少有一部分源于 C 普遍使用之前的高级语言的历史。在以前流行的高级语言中，应尽可能避免通过地址直接引用内存，并且被认为是语言的工作来提供抽象层。这使得该语言有必要明确支持从子例程（不一定是函数）返回值的机制。当提到“通过引用”时，这种机制就是正式的意思。

引入 C 时，它带有一个精简的过程调用概念，其中所有参数都是仅输入的，返回给调用者的唯一值是函数结果。然而，传递引用的目的可以通过显式和广泛使用指针来实现。由于它具有相同的目的，因此将指针作为对值的引用传递的做法通常通俗地称为通过引用传递。如果例程的**语义**调用要通过引用传递的参数，则 C 的**语法**要求程序员显式传递指针。按值传递指针是在 C 中实现按引用传递语义的**设计模式。**

由于在 C 语言中使用原始指针的唯一目的似乎通常是创建崩溃错误，因此后续开发，尤其是 Java，已寻求返回更安全的方法来传递参数。然而，C 的主导地位使得开发人员有责任模仿熟悉的 C 编码风格。结果是类似于指针传递的引用，但实施了更多保护以使其更安全。另一种选择是像 Ada 这样的语言的丰富语法，但这会出现不受欢迎的学习曲线，并减少 Java 的可能采用。

In short, the design of parameter passing for objects, including arrays, in Java,is esentially to serve the **semantic** intent of pass by reference, but is imlemented with the **syntax** of passing a reference by value.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T07:48:03.267

有点诡计……甚至引用在 Java 中也是按值传递的，因此对引用本身的更改被限定在被调用的函数级别。编译器和/或 JVM 通常会将值类型转换为引用。

# php - 无法在 PHP 中的函数名称中使用魔法常量字符串

> ID：12757844
> 
> 赞同：0
> 
> 时间：2012-10-06T07:44:20.837
> 
> 标签：php, function, syntax, constants, syntax-error

我最近注意到这一点，`__METHOD__`并且`__CLASS__`在扩展类时不返回正确的名称。当我为替代方法编写方法并尝试使用 name`__METHOD__`时，出现以下错误。

> 解析错误：语法错误，意外的 T_METHOD_C，期待 T_STRING

```
$myclass = new myclass();
echo $myclass->__METHOD__() . '<br />';

class myclass
{
    function __METHOD__() {
        return get_class($this) . '::' . __FUNCTION__;
        // return __METHOD__;
    }
} 
```

似乎 PHP 不允许在函数/方法名称中使用魔法常量。我找不到有关此限制的官方文档。我在哪里可以找到它？

感谢你的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:08:30.797

***`__METHOD__`***被称为魔术常数，这意味着它可以被打印出来，不能被用户修改。您也不能将其用作函数名称。这不是限制。就是这样，魔法常量的用途，主要用于调试。

php.net 页面 -[魔术常量](http://php.net/manual/en/language.constants.predefined.php)

还要检查[变量函数](http://php.net/manual/en/functions.variable-functions.php)。语言结构不能用作变量函数名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T10:48:32.273

显然，魔术常量是特殊的——它们比用户定义的常量有更多的限制。它们更像是语言关键字而不是常量。

它似乎没有在文档中说出来，但它在经验上是正确的。

# c# - 在 C# 中读取和写入 Excel

> ID：12757847
> 
> 赞同：0
> 
> 时间：2012-10-06T07:44:47.127
> 
> 标签：c#, excel, oledb

我正在创建一个应该从 excel 表中读取参数的测试框架。我希望能够：

1.  获取工作表中测试记录的行数
2.  获取列数
3.  引用特定单元格，例如 A23 并读取或写入值。

我在互联网上找到了这段代码。它很棒，但它似乎已被编码为与表单组件一起使用。我不一定需要在数据网格上显示 excel 表。

这是我找到的代码。它工作正常，但我需要添加上面的功能。谢谢你的帮助 ：）

```
using System.Data;
using System.Data.OleDb;
...
OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Book1.xls;Extended Properties=Excel 8.0");
OleDbDataAdapter da = new OleDbDataAdapter("select * from MyObject", con);
DataTable dt = new DataTable();
da.Fill(dt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:49:53.563

计数行

```
sheet.Range["A11"].Formula = “COUNT(A1:A10)”; 
```

计数列

```
sheet.Range["A12"].Formula = “COUNT(A1:F1)”; 
```

.NET Excel 组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:58:31.677

you can Reference particular cells using this code :

```
Select * from [Sheet1$A1:B10] 
```

for example above code access to cell A1 to B10

see [here](http://support.microsoft.com/kb/316934)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:37:47.463

您可以使用此方法：

```
private DataTable LoadXLS(string filePath)
{
    DataTable table = new DataTable();
    DataRow row;
    try
    {
        using (OleDbConnection cnLogin = new OleDbConnection())
        {
            cnLogin.ConnectionString = "provider=Microsoft.Jet.OLEDB.4.0;Data Source='" + filePath + "';Extended Properties=Excel 8.0;";

                cnLogin.Open();
                string sQuery = "SELECT * FROM  [Sheet1$]";
                table.Columns.Add("Tags", typeof(string));
                table.Columns.Add("ReplaceWords", typeof(string));
                OleDbCommand comDB = new OleDbCommand(sQuery, cnLogin);

                using (OleDbDataReader drJobs = comDB.ExecuteReader(CommandBehavior.Default))
                {
                    while (drJobs.Read())
                    {
                        row = table.NewRow();
                        row["Tags"] = drJobs[0].ToString();
                        row["ReplaceWords"] = drJobs[1].ToString();
                        table.Rows.Add(row);
                    }
                }
            }
            return table;
        } 
```

并像这样使用：

```
DataTable dtXLS = LoadXLS(path);
//and do what you need 
```

如果您需要写入 Excel，您需要查看[http://msdn.microsoft.com/en-us/library/dd264733.aspx](http://msdn.microsoft.com/en-us/library/dd264733.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T07:26:32.553

以下是处理 excel 文件和对其进行操作的一种简单方法：

*   添加对`microsoft.office.interop.excel`项目的引用（添加引用.. => 在 .NET 选项卡下搜索 => 添加引用）
*   创建一个新的 excel 应用程序并打开工作簿：

    ```
    Excel.Application application = new Excel.Application();
    Excel.Workbook workbook = application.Workbooks.Open(workBookPath);
    Excel.Worksheet worksheet = workbook.Sheets[worksheetNumber]; 
    ```

*   您可以使用以下行获取行数和列数：

    ```
    var endColumn = worksheet.Columns.CurrentRegion.EntireColumn.Count;
    var endRow = worksheet.Rows.CurrentRegion.EntireRow.Count;*** 
    ```

*   从一个单元格或一系列单元格中读取值可以通过以下方式完成（rowIndex 是您要读取的单元格所在的行号）：

    ```
    System.Array values = (System.Array)worksheet.get_Range("A" + 
    rowIndex.ToString(), "D" + rowIndex.ToString()).Cells.Value; 
    ```

# asp.net - 使用 VB.Net 使用 SqlDatasource 编辑 Gridview

> ID：12757851
> 
> 赞同：1
> 
> 时间：2012-10-06T07:46:00.840
> 
> 标签：asp.net, vb.net, gridview, editing

我开发了以下用于编辑 GridView 的代码（遵循用 C# 编写的教程），它进入编辑模式，但我的编辑没有生效，这是我的代码：

aspx.vb 代码：

```
Imports System.Data
Imports System.Data.SqlClient
Imports System.Globalization

Partial Class MemberPages_editOutage
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
        If Not IsPostBack Then
            BindGrid()
        End If
    End Sub

    Private Sub BindGrid()
        Dim dt As New DataTable()
        Dim connection As New SqlConnection("server='\SQLEXPRESS'; trusted_connection='true'; Database='OutagesMgt_db'")
        Try
            connection.Open()
            Dim sqlStatement As String = "SELECT OutageDetailId, LocationName, Description, DetailDescription, CreateDate, StatusId FROM OutageDetail WHERE StatusId='1' ORDER BY CreateDate DESC"
            Dim cmd As New SqlCommand(sqlStatement, connection)
            Dim sqlDa As New SqlDataAdapter(cmd)

            sqlDa.Fill(dt)
            If dt.Rows.Count > 0 Then
                MyDataGrid.DataSource = dt
                MyDataGrid.DataBind()
            End If
        Catch ex As System.Data.SqlClient.SqlException
            Dim msg As String = "Fetch Error:"
            msg += ex.Message
            Throw New Exception(msg)
        Finally
            connection.Close()
        End Try
    End Sub
    'edit command
    Protected Sub MyDataGrid_RowEditing(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewEditEventArgs) Handles MyDataGrid.RowEditing
        'turn to edit mode
        MyDataGrid.EditIndex = e.NewEditIndex
        'Rebind the GridView to show the data in edit mode
        BindGrid()
    End Sub
    'cancel command
    Protected Sub MyDataGrid_RowCancelingEdit(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCancelEditEventArgs) Handles MyDataGrid.RowCancelingEdit
        ' switch back to edit default mode
        MyDataGrid.EditIndex = -1
        'Rebind the GridView to show the data in edit mode
        BindGrid()
    End Sub
    'Update Function
    Private Sub UpdateRecord(ByVal SOutageDetailId As String, ByVal SDescription As String, ByVal SDetailDescription As String, ByVal SCreateDate As String, ByVal SstatusId As String)
        Dim connection As New SqlConnection("server='\SQLEXPRESS'; trusted_connection='true'; Database='OutagesMgt_db'")
        Dim sqlStatement As String = String.Empty
        sqlStatement = "UPDATE OutageDetail SET @OutageDetailId = @OutageDetailId, LocationName = @LocationName, " & _
                        "Description = @Description, DetailDescription= @DetailDescription, " & _
                        "CreateDate = @CreateDate, StatusId = @StatusId WHERE OutageDetailId = @OutageDetailId"
        connection.Open()

        Dim cmd As New SqlCommand(sqlStatement, connection)
        cmd.Parameters.Add(New SqlParameter("@OutageDetailId", SOutageDetailId))
        cmd.Parameters.Add(New SqlParameter("@LocationName", SDescription))
        cmd.Parameters.Add(New SqlParameter("@Description", SDescription))
        cmd.Parameters.Add(New SqlParameter("@DetailDescription", SDetailDescription))
        cmd.Parameters.Add(New SqlParameter("@CreateDate", SCreateDate))
        cmd.Parameters.Add(New SqlParameter("@StatusId", SstatusId))
        cmd.CommandType = CommandType.Text
        cmd.ExecuteNonQuery()

        ' MyDataGrid.EditIndex = -1
        connection.Close()

        BindGrid()
    End Sub
    'update command
    Protected Sub MyDataGrid_RowUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles MyDataGrid.RowUpdating
        'Accessing Edited values from the GridView
        Dim SOutageDetailId As String = MyDataGrid.Rows(e.RowIndex).Cells(0).Text
        Dim SDescription As String = MyDataGrid.Rows(e.RowIndex).Cells(1).Text
        Dim SDetailDescription As String = MyDataGrid.Rows(e.RowIndex).Cells(2).Text
        Dim SCreateDate As String = MyDataGrid.Rows(e.RowIndex).Cells(3).Text
        Dim SstatusId As String = MyDataGrid.Rows(e.RowIndex).Cells(4).Text

        'Call the function to update the GridView
        UpdateRecord(SOutageDetailId, SDescription, SDetailDescription, SCreateDate, SstatusId)

        MyDataGrid.EditIndex = -1

        'Rebind Gridview to reflect changes made
        BindGrid()
    End Sub
End Class 
```

asp代码：

```
<asp:GridView id="MyDataGrid" runat="server"
                    Width="750px"
                    CssClass="gridViewEdit"
                    BackColor="White"
                    BorderColor="Black"
                    CellPadding="3"
                    Font-Name="Verdana"
                    Font-Size="8pt"
                    HeaderStyle-BackColor="#FFFFFF"
                    OnEditCommand="MyDataGrid_RowEditing"
                    OnCancelCommand="MyDataGrid_RowCancelingEdit"
                    OnUpdateCommand="MyDataGrid_RowUpdating"
                    DataKeyField="OutageDetailId" 
                    Font-Names="Verdana">
                  <Columns>
                     <asp:CommandField ShowEditButton="True" EditText="Edit" CancelText="Cancel" UpdateText="Update" />
                 </Columns>
                <HeaderStyle BackColor="White"></HeaderStyle>
            </asp:GridView> 
```

有人可以阐明我所缺少的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:16:02.367

在你点击编辑的那一刻，你去获取必须更新的行的 ID，你从这条线得到它

```
Dim SOutageDetailId As String = MyDataGrid.Rows(e.RowIndex).Cells(0).Text 
```

但是在页面加载时您已设置

```
 If Not IsPostBack Then
        BindGrid()
    End If 
```

所以在回帖中，直到您尝试从单元格中获取 id 的网格是空的。

两种方式，以太在回发时再次给出数据，并`DataBind`在更新后立即进行，或者获取网格视图的索引来进行更新，而不是获取单元格。

例如，我将您的代码更改为：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)        
        BindGrid()
End Sub

Private Sub BindGrid()
    Dim dt As New DataTable()
    Dim connection As New SqlConnection("server='\SQLEXPRESS'; trusted_connection='true'; Database='OutagesMgt_db'")
    Try
        connection.Open()
        Dim sqlStatement As String = "SELECT OutageDetailId, LocationName, Description, DetailDescription, CreateDate, StatusId FROM OutageDetail WHERE StatusId='1' ORDER BY CreateDate DESC"
        Dim cmd As New SqlCommand(sqlStatement, connection)
        Dim sqlDa As New SqlDataAdapter(cmd)

        sqlDa.Fill(dt)
        If dt.Rows.Count > 0 Then
            MyDataGrid.DataSource = dt
           If Not IsPostBack Then
               MyDataGrid.DataBind()
           End If                
        End If
    Catch ex As System.Data.SqlClient.SqlException
        Dim msg As String = "Fetch Error:"
        msg += ex.Message
        Throw New Exception(msg)
    Finally
        connection.Close()
    End Try
End Sub 
```

[*] 假设您在 sql 上没有其他错误...

# unit-testing - 如何在 grails TagLib 单元测试中模拟服务

> ID：12757855
> 
> 赞同：5
> 
> 时间：2012-10-06T07:46:29.477
> 
> 标签：unit-testing, grails, grails-2.0, taglib

我有 TagLib、Service 和 TestCase 如下

如何在 taglib 中模拟服务以从服务中获得预期结果

标签库：

```
 class SampleTagLib {

     static namespace = "sample"
     def baseService

     def writeName = { attrs, body ->
        def result = baseService.findAttributeValue(attrs.something)

        if(result)
           out << body()
     }
 } 
```

服务：

```
 class BaseService {

     def findAttributeValue(arg1) {

       return false  
     }
} 
```

TagLibUnitTestCase：

```
import spock.lang.*
import grails.plugin.spock.*
import org.junit.*
import grails.test.mixin.*
import grails.test.mixin.support.*

import grails.test.mixin.Mock

@TestFor(SampleTagLib)
@Mock(BaseService)
class SampleTagLibSpec extends Specification {
      def template

      def setup(){

         tagLib.baseService = Mock(BaseService)
      }

      def 'writeName'(){
        given:
        tagLib.baseService.findAttributeValue(_) >> true
        def template ='<sample:writeName something='value'>output</sample:writeName>'

        when: 'we render the template'
        def output = applyTemplate(template, [sonething:'value')

        then: 'output'
        output =="output"
     }
 } 
```

但它得到错误条件不满足。获取输出 =“”

预期输出=“输出”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T10:53:02.753

您需要使用 grails`mockFor`来模拟服务。

查看[模拟合作者](http://grails.org/doc/latest/guide/testing.html#mockingCollaborators)

未经测试的例子：

```
def strictControl = mockFor(BaseService)
strictControl.demand.findAttributeValue(1..1) { arg1 -> return true }
taglib.baseService = strictControl.createMock() 
```

# python - django异常处理程序中间件和handler500

> ID：12757856
> 
> 赞同：3
> 
> 时间：2012-10-06T07:46:38.900
> 
> 标签：python, django, exception-handling, django-views, middleware

我有一个带有`handler500`set 的 django 应用程序。我想向它添加自定义异常处理程序。我创建了一个处理进程异常的中间件：

> 当视图引发异常时，Django 调用 process_exception()。process_exception() 应该返回 None 或 HttpResponse 对象。如果它返回一个 HttpResponse 对象，则响应将返回给浏览器。否则，将启动默认异常处理。

[https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-exception](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-exception)

我的`ErrorMiddleware`样子：

```
class ErrorMiddleware(object):
    def process_exception(self, request, exception):
        try:
            #logic goes here
        except Exception:
            pass
        return None 
```

我的`settings`样子：

```
MIDDLEWARE_CLASSES = (
    'my.error.ErrorMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)
DEBUG = False 
```

在这种情况下，我的浏览器永远不会从页面获得异常响应。尽管列表中没有我的中间件，但我可以`handler500`正常工作。

我希望执行默认的异常处理机制，而不是`handler500`在我的中间件中显式调用视图。

**更新**：

handler500 模块如下所示：

```
#imports ....

def custom_500(request):
    """ Return an error ID (hash) that can be provided to support """
    return render(request, '500.html', {
        'timestamp': datetime.datetime.now().isoformat(),
        'diagcode': "hello",
        }
    ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T13:33:17.247

尝试将您的中间件移动到`MIDDLEWARE_CLASSES`堆栈的底部，这样它就是第一个在发送到客户端的过程中处理请求的中间件。如果你把它放在最后，我相信 Django 已经捕获了你的异常并呈现了自己的错误 500 页面。

# mysql - Mysql中的一级嵌套

> ID：12757861
> 
> 赞同：0
> 
> 时间：2012-10-06T07:47:07.160
> 
> 标签：mysql

我有桌子

```
+-------------+----------------------+--------------------+
| category_id | name                 | parent_category_id |
+-------------+----------------------+--------------------+
|           1 | Pizzas               |               NULL |
|           2 | Cheese Pizzas        |                  1 |
|           3 | Spicy Pizzas         |                  1 |
|           4 | Shakes               |               NULL |
|           5 | Milk Shakes          |                  4 | 
```

我只有单层嵌套，它会是一样的

我希望检索像

```
Pizza
   Cheese Pizzas
   Spicy Pizzas
Shakes
   Milk Shakes 
```

在 MySQL 中是否有像 Oracle 中的“树”之类的东西，我确实阅读了文章[http://ftp.nchu.edu.tw/MySQL/tech-resources/articles/hierarchical-data.html](http://ftp.nchu.edu.tw/MySQL/tech-resources/articles/hierarchical-data.html)

当存在动态嵌套级别时，更改表结构似乎更可行，就我而言，它始终为 1

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:52:29.580

您可以使用自联接并执行以下操作：

```
SELECT   parent.category_id, parent.name AS parent, child.name AS child
FROM     my_table parent JOIN my_table child
      ON parent.parent_category_id IS NULL
     AND child.parent_category_id = parent.category_id
ORDER BY parent.category_id, child.category_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b8bf7/1/0)上查看。

如果需要，甚至可以对结果进行分组：

```
SELECT   parent.name, GROUP_CONCAT(child.name ORDER BY child.category_id)
FROM     my_table parent JOIN my_table child
      ON parent.parent_category_id IS NULL
     AND child.parent_category_id = parent.category_id
GROUP BY parent.category_id
ORDER BY parent.category_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b8bf7/2/0)上查看。

# javascript - IE9 和modernizr 2.6.1，下拉列表打不开

> ID：12757867
> 
> 赞同：0
> 
> 时间：2012-10-06T07:47:39.587
> 
> 标签：javascript, internet-explorer, asp.net-mvc-4, modernizr

使用在 IE9 上运行的 modernizr 2.6.1 在我的 MVC4 应用程序上的下拉列表显示了意外行为。它在 FF 和 Chrome 上运行良好。当modernizr 2.6.1 未被引用时，它也可以工作。

问题是，当页面加载一些通过单击打开的下拉列表时，它们也接受键盘输入，但其中一些根本不接受输入（鼠标和键盘）。但是经过几次随机点击后，它们中的一些在获得和失去焦点几次时开始工作。

我该如何解决这个问题？

**编辑**

确认modernizr有问题，我删除了除modernizr之外的所有脚本，问题就在那里，当只删除modernizr时问题就消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:18:54.577

我对 IE、Modernizr och jQuery UI Slider 元素有一个类似的问题。适用于 Firefox，但不适用于 IE。如果我删除 Modernizr，它也可以在 IE 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:17:06.387

Modernizr 不适用于 IE，简单！

# java - 从互联网解析 xml 数据

> ID：12757873
> 
> 赞同：0
> 
> 时间：2012-10-06T07:48:07.823
> 
> 标签：java, android, xml-parsing

大家好，我开发了一个简单的应用程序，该应用程序使用 SAX 从 Internet 读取 XML 文件，但我在 logcat 上收到此错误任何帮助可能会有所帮助

**清单文件**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.reaf.xml"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.read.xml.DataHandler"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MainActivity" >
    </activity>
</application> 
```

**日志猫**

```
10-06 07:38:00.014: D/dalvikvm(543): newInstance failed: no <init>()
10-06 07:38:00.054: D/AndroidRuntime(543): Shutting down VM
10-06 07:38:00.054: W/dalvikvm(543): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-06 07:38:00.064: E/AndroidRuntime(543): FATAL EXCEPTION: main
10-06 07:38:00.064: E/AndroidRuntime(543): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.reaf.xml/com.read.xml.DataHandler}: java.lang.InstantiationException: com.read.xml.DataHandler
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.os.Looper.loop(Looper.java:123)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-06 07:38:00.064: E/AndroidRuntime(543):  at java.lang.reflect.Method.invokeNative(Native Method)
10-06 07:38:00.064: E/AndroidRuntime(543):  at java.lang.reflect.Method.invoke(Method.java:507)
10-06 07:38:00.064: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-06 07:38:00.064: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-06 07:38:00.064: E/AndroidRuntime(543):  at dalvik.system.NativeStart.main(Native Method)
10-06 07:38:00.064: E/AndroidRuntime(543): Caused by: java.lang.InstantiationException: com.read.xml.DataHandler
10-06 07:38:00.064: E/AndroidRuntime(543):  at java.lang.Class.newInstanceImpl(Native Method)
10-06 07:38:00.064: E/AndroidRuntime(543):  at java.lang.Class.newInstance(Class.java:1409)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-06 07:38:00.064: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
10-06 07:38:00.064: E/AndroidRuntime(543):  ... 11 more 
```

我不知道错误是什么

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:54:41.517

您的包裹是`com.reaf.xml`，您的活动名称是`com.read.xml.DataHandler`（您的包裹名称有误）。

请通过将包设置为`com.read.xml`并将活动名称设置为来给予它们`.DataHandler`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:55:46.833

`DataHandler`当您调用方法时，它无法初始化`newInstance`。请确保您提供`nullary constructor`上课`DataHandler`。出于其他原因，请查看[API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#newInstance%28%29)

# php - 使用登录用户和 SHA1 密码更新多个文件

> ID：12757874
> 
> 赞同：0
> 
> 时间：2012-10-06T07:48:08.323
> 
> 标签：php, mysql, ezsql

我一直在环顾四周，找不到向我展示有效方法的地方。目前我有一个在用户提交表单时运行的查询：

```
$query = "UPDATE user SET username='$_POST[username]',
nicename='$_POST[nicename]', 
email='$_POST[email]', 
password=(SHA1)'$_POST[password]', 
position='$_POST[position]', 
race='$_POST[race]', 
type='$_POST[type]' WHERE username=$_SESSION[admin_login]"; 
```

我不确定如何让它真正正常工作。抱歉，如果以前有人问过，但我在任何地方都找不到一个好的解决方案。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:56:10.327

首先整个事情是错误的：**为什么？**

因为首先你需要清理你没有做的输入，至少你应该`mysqli_real_escape_string`像这样使用：

```
$nicename = mysqli_real_escape_string($connect, $_POST['nicename']); 
```

[**参考**](http://php.net/manual/en/mysqli.real-escape-string.php)

其次，您应该在查询中使用密码之前对其进行加密，例如将加密密码分配给变量，然后在查询中使用它，如下所示：

```
$hashed_pass = sha1($_POST['password']);

//Query goes here 
```

最后但并非最不重要的是，不要`super global $_SESSION variable`直接在查询中使用，而是使用连接它..像这样

```
WHERE username='".$_SESSION[admin_login]."'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:08:08.380

首先，永远记住[小鲍比桌](http://xkcd.com/327/)。插入这样的数据可能会导致 SQL 注入攻击，就像漫画中一样。我强烈建议您使用准备好的语句，这是 PDO 和 MySQLi 中的一个功能，它们是使用 PHP 读取和写入数据库的方法，一些信息：[PDO](http://es.php.net/manual/en/pdo.prepared-statements.php)和一些信息：[MySQLi](http://es.php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

无论您选择哪种方式都无关紧要，更多的是个人喜好。我喜欢 PDO，所以这是一个绑定数据然后使用 PDO 执行查询的示例：

```
$dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);  

$password = sha1($_POST[password]);

$stmt = $dbh->prepare("UPDATE user SET username = :username, nicename = :nicename, email = :email, password = :password, position = :position, race = :race, type = :type WHERE  = :username");
$stmt->bindParam(':username', $_POST['username']);
$stmt->bindParam(':nicename', $_POST['nicename']);
$stmt->bindParam(':email', $_POST['email']);
$stmt->bindParam(':password', $password);
$stmt->bindParam(':position', $_POST['position']);
$stmt->bindParam(':race', $_POST['race']);
$stmt->bindParam(':type', $_POST['type']);
$stmt->bindParam(':username', $_SESSION['admin_login']);

$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T08:08:26.460

`$_POST`并且`$_GET`数组可能包含危险数据，因此您需要先从这些数组中准备数据，然后再将它们插入数据库。

首先，您需要对正确的数据类型进行类型转换。在 PHP 中，您可以使用以下构造：`(string)`对于字符串数据，`(int)`对于`(float)`数字数据，`(bool)`对于布尔数据。

`email`检查有效电子邮件的必要字段，使用正则表达式。

以下代码是检查数据的示例：

```
<?php
    $link     = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');

    $username = mysqli_real_escape_string($link, (string) $_POST['username']);
    $nicename = mysqli_real_escape_string($link, (string) $_POST['nicename']);
    $email    = mysqli_real_escape_string($link, (string) $_POST['email']);
    $email    = preg_replace( '/^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,3})|(aero|coop|info|museum|name))$/', $email );
    $password = sha1((string) $_POST['password']);
    $position = mysqli_real_escape_string($link, (string) $_POST['position']);
    $race     = mysqli_real_escape_string($link, (string) $_POST['race']);
    $type     = mysqli_real_escape_string($link, (string) $_POST['type']);
    $admin    = $_SESSION['admin_login'];

    $query = "UPDATE `user` 
              SET `username`='$username',
                  `nicename`='$nicename', 
                  `email`='$email', 
                  `password`='$password', 
                  `position`='$position', 
                  `race`='$race', 
                  `type`='$type' 
              WHERE `username`='$admin'";

    mysqli_query($link, $query);
    mysqli_close($link); 
```

# c#-4.0 - 字符数据 HTML

> ID：12757875
> 
> 赞同：0
> 
> 时间：2012-10-06T07:48:40.170
> 
> 标签：c#-4.0, html-parsing, cdata

我需要在 HTML 文件中显示字符数据。当数据简单时它工作得很好，但是当数据类似于标签时就会出现问题。

让我描述一下我的问题。

我正在显示来自数据库表的数据到 HTML 文件（我正在创建表来显示数据）。现在，如果我的表中的内容就像`<img src ="445521.jpg">`它在解析时给我的错误。因为它会尝试在我的系统中搜索图像。

在 XML 中，我们必须`<![CDATA["content"]]>`拯救，但我不知道在 HTML 中为此做什么，此外，我正在将此 HTML 转换为 PDF。即使转换为PDF，它也会给我错误。

谁能告诉如何创建 html 以使解析器理解内容是字符数据？

感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:40:08.373

尝试[`HttpUtility.HtmlEncode`](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)（你必须`import System.Web`）。这会将特殊字符转换为 HTML 实体（例如`<`→ `&lt;`）。

# objective-c - 如何在navigationController下面放一张图片？

> ID：12757883
> 
> 赞同：0
> 
> 时间：2012-10-06T07:49:29.087
> 
> 标签：objective-c, uinavigationcontroller

我想为我的乐队构建一个 iPhone 应用程序。我想知道如何在 navigationController 下面放一张图片，它只有在下拉时才可见（让我们看一下这个应用程序）：http: [//img11.hostingpics.net/pics/227613image.jpg](http://img11.hostingpics.net/pics/227613image.jpg)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:02:11.377

使用滚动视图方法

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{  
    CGPoint offset = scrollView.contentOffset;
    CGRect bounds = scrollView.bounds;
    CGSize size = scrollView.contentSize;
    UIEdgeInsets inset = scrollView.contentInset;
    float y = offset.y + bounds.size.height - inset.bottom;
    float h = size.height;

    if(scrollView.contentOffset.y < 0.0f && scrollView.contentOffset.y > -80.0f) 
    {
       //
        display your image at this point
        NSLog(@"\n pos: %f of %f", y, h);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:03:09.770

你可以更容易地做到这一点：

UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,320,1000)]; [self.view addSubview:scrollView];

这将添加一个滚动视图 :) UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,HEIGHTYOUWANT)]; imgView.image = [UIImage imageName:@"band.png"]; [scrollView addSubview:imgView];

这将添加您的乐队的图片，该图片必须位于滚动视图顶部的 Projectfolder 中，因此如果您向下滚动，图片会随之出现 :)

在此处创建 UINAVIGATIONBAR

[self.view addSubview:navigationBar];

//^ 它必须是 self.view 而不是 scrollView 否则导航栏也会移动

# python - python：多个SocketServer同时工作

> ID：12757884
> 
> 赞同：0
> 
> 时间：2012-10-06T07:49:46.060
> 
> 标签：python, serversocket

我想在一个 python 程序中制作 3 个 SocketServer：

```
import threading
import SimpleHTTPServer
import SocketServer

class PolicyHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        self.data = self.request.recv(128).strip()
        print self.data
        if self.data == '<policy-file-request/>\0':
            self.request.sendall('message 1')

class LiveRequestHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        self.request.sendall('message 2')

def main():
    httpd = SocketServer.TCPServer(('',80),\
                               SimpleHTTPServer.SimpleHTTPRequestHandler)
    httpdThr = threading.Thread(target=httpd.serve_forever)
    httpdThr.daemon = True
    httpdThr.start()

    liveServer = SocketServer.TCPServer(('',8090), LiveRequestHandler)
    livThr = threading.Thread(target=liveServer.serve_forever)
    livThr.daemon = True
    livThr.start()

    policyServer = SocketServer.TCPServer(('',834), PolicyHandler)
    policyThr = threading.Thread(target=policyServer.serve_forever)
    policyThr.daemon = True
    policyThr.start()

if __name__ == '__main__':
    main() 
```

我运行它，输出如下：

```
Finding files... done.
Importing test modules ... done.

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

奇怪的是它立即退出程序，所以我的客户端程序无法连接到三套接字服务器。如何防止它退出程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:55:44.823

If you really want to start the three servers from the same program, that would be one solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:58:23.570

当没有更多非守护线程运行时，守护线程终止，因此它们在主线程结束时退出。添加一些内容以保持 main 运行，例如：

```
raw_input('Press enter to stop servers.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:11:14.027

现在我改变我的代码如下：

```
httpd = SocketServer.TCPServer(('',80), SimpleHTTPServer.SimpleHTTPRequestHandler)
httpdThr = threading.Thread(target=httpd.serve_forever)
httpdThr.daemon = True
httpdThr.start()

liveServer = SocketServer.TCPServer(('',8090), LiveRequestHandler)
livThr = threading.Thread(target=liveServer.serve_forever)
livThr.daemon = True
livThr.start()

policyServer = SocketServer.TCPServer(('',834), PolicyHandler)
policyThr = threading.Thread(target=policyServer.serve_forever)
policyThr.daemon = True
policyThr.start() 
```

它工作正常。但现在我不知道如何在需要时向客户端发送消息。

# php - 在 wamp 服务器中启用 shell_exec()

> ID：12757891
> 
> 赞同：6
> 
> 时间：2012-10-06T07:51:54.590
> 
> 标签：php, wamp

最近我在 wamp 服务器上通过了一个问题。我需要使用`shell_exec()`PHP 中的函数来运行一些外部 shell 脚本（一些校验和文件）。但在我的 wamp 服务器中，默认情况下禁用该功能。我在谷歌搜索，但我找不到解决方案。所以我尝试将该代码放在实时服务器中。但也有同样的问题。我联系了该服务器的技术人员，但他说我们无法启用 shell_script。这是安全暴力。

**所以唯一的方法是在 wamp 服务器中尝试...如何启用** `shell_exec()`或`exec()`..？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-08T11:59:24.990

以下行是我对这个问题读到的最好的：“您需要禁用位于 \Apache2\bin 文件夹中的 php.ini 中的安全模式，而不是 php 文件夹。在加载新设置后立即重新启动 Apache2 服务。”

解决方案是：

1.  停止 Wamp-Server 的所有服务并关闭程序

2.  打开 .../wamp/bin/apache/Apache2。*.* /bin/php.ini

3.  将 php.ini 复制到桌面并打开它

4.  设置**safe_mode_exec_dir**（= 之后的行是空的，所以它是 ON ！！！） 将其关闭！

5.  节省

6.  复制回目录（也许你需要管理员权限）

7.  启动 wamp 服务器

8.  享受 exec() 和合作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-08T20:41:21.557

我遇到了同样的问题，并尝试了很多解决方案。对我有用的是以管理员身份运行 XAMPP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T07:55:19.483

Open your `php.ini` file used by wamp, find the `disable_functions` part, change it and restart the server.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T14:31:00.207

尝试使用 WAMP 服务器堆栈，这显然是用于开发的，例如[WPN-XM](http://wpn-xm.org)或[XAMPP](http://www.apachefriends.org/de/xampp.html)。对开发人员没有任何安全限制。所以在执行system()、shell_exec()、passthrough()时不会遇到麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T22:08:14.917

您需要在`\Apache2\bin`文件夹中的 php.ini 中禁用安全模式，而不是 php 文件夹。

加载新设置后立即重新启动 Apache2 服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T22:35:31.637

你试过反引号吗？（如果安全模式关闭）

```
`ls -hal` 
```

Windows 等效项是

```
`dir \AH` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T17:43:03.600

不是“服务器问题”。不建议使用此配置。您必须在管理员模式下运行 WAMP 服务器。

以下是一些信息：[PHP 不适用于 shell_exec()、system() 或 passthru()](https://stackoverflow.com/questions/11005831/php-doesnt-work-with-shell-exec-system-or-passthru)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-22T08:13:04.870

我想我们可以使用这些步骤

1.  打开 wamp\bin\apache\apache2.4.9\bin（不管 apache 版本）
2.  在编辑器中打开 php.ini 文件
3.  搜索“ ***disable_functions*** ”。
4.  从禁用函数中删除***exec***和***shell_exec***
5.  重新启动所有服务。

享受！！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-03T10:16:55.517

```
<?php
function _exec($cmd)
{
    shell_exec('SCHTASKS /F /Create /TN _proc /TR "' . $cmd . '"" /SC DAILY /RU INTERACTIVE');
    shell_exec('SCHTASKS /RUN /TN "_proc"');
    shell_exec('SCHTASKS /DELETE /TN "_proc" /F');
}
_exec("mspaint.exe");
?> 
```

而是一种 hack，但是如果您尝试使用 gui 启动任何东西，或者挂起，这就是我发现的有效方法。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-10-30T11:27:12.220

我刚刚找到了一个更好的解释，但还没有尝试过。看看 - [http://discussion.accuwebhost.com/linux-server/1096-how-enable-shell_exec-function-one-account.html](http://discussion.accuwebhost.com/linux-server/1096-how-enable-shell_exec-function-one-account.html)

# php - path with js / php files and ajax functions

> ID：12757894
> 
> 赞同：0
> 
> 时间：2012-10-06T07:52:12.723
> 
> 标签：php, javascript, path

I've got problems after I moved my files in a structered directory list (I used relative links in all files).

A quick overview:

```
www
  js
    functions.js
  php
    ajax.send.php       include ('./functions.php');
    ajax.delete.php     include ('./functions.php');
    functions.php
  other dirs that have no influence
  index.php             include ('./php/functions.php'); and ofc js embedding <script type="text/javascript" src="./js/functions.js"></script> 
```

The ajax stuff on the startpage works, but the php functions within ajax.send.php and ajax.delete.php aren't working correctly (but the path is correct?!) I've tried every possible path in theses two files but there's no way to get this stuff to work.

Have I missed something? I'm at the end of my rope.

Greetings Fabio

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:35:18.767

最好使用绝对路径。尝试使用这种结构：

```
ajax.send.php       include dirname(__FILE__) . DIRECTORY_SEPARATOR . 'functions.php';
index.php           include dirname(__FILE__) . DIRECTORY_SEPARATOR . 'php' . DIRECTORY_SEPARATOR . 'functions.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:01:14.563

你能试试吗

```
ajax.send.php       include ('./php/functions.php');
ajax.delete.php     include ('./php/functions.php'); 
```

# php - “which”命令在 PHP 中不起作用

> ID：12757898
> 
> 赞同：1
> 
> 时间：2012-10-06T07:52:47.413
> 
> 标签：php, mercurial, shell-exec

我有两台远程服务器需要同步某个代码库。我在第一个设置了所有内容，但是在第二个设置时，我遇到了一个问题：

它们没有`hg`安装在同一位置。我不能只是运行`hg <command>`，因为它返回错误：

> sh：hg：找不到命令

所以我一直在使用完整路径，但这不适用于两个单独的`hg`位置。

我认为运行`which hg`并使用响应中的路径会很聪明，所以这是新代码：

```
$hg = trim(`which hg`, "\n");
$output = `{$hg} pull -u` 
```

但是`$hg`是`NULL`，所以这行不通！我可以通过 ssh 进入第二台服务器，并且看到它`which hg`确实有效。我什至附加`2>> path/to/log`了该命令是否有任何错误`which`，但没有。我确保它正在写入日志，因此与此无关。

我没有在安全模式下运行，我绝对可以运行`shell_exec`，因为其他命令有效。

我知道我可以创建一个符号链接，这样它们都有相同的路径并且只是对路径进行硬编码，但这让我发疯了为什么`shell_exec('which hg')`不工作！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T07:55:35.357

`which hg`仅当`hg`已经在您的路径中时才有效，否则它将返回空字符串。

显然这不是你想要的，因为如果它已经在你的路径中，你可以使用`hg`.

如果您正在使用具有不同配置的多台机器，您可以`bin`在主目录中创建一个目录，将其添加到您的路径并链接到该目录中您需要的命令。这将允许您在所有机器上使用相同的命令。

对于 PHP，您需要将其放在 Web 服务器可访问的目录中（但最好在文档根目录之外），除此之外，您可以使用相同的技术，提供您创建的公共目录的绝对路径链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:55:21.497

尝试

`shell_exec('/usr/bin/which hg');`

反而。`$PATH`可能没有设置，这是一个典型的位置`which`

# c++ - 如何通过玩缓冲区大小来优化读写？

> ID：12757904
> 
> 赞同：4
> 
> 时间：2012-10-06T07:54:39.120
> 
> 标签：c++, file, c++11, stream, buffer

如何在标准 C++/C++11（无 POSIX 函数）中优化 std::ifstream 和 std::ofstream 的读写速度？（1 <- 因为有几个问题，这些数字表示不同的点）

我不确切知道缓冲区的作用，所以你能确认一下：

*   用于读取：文件的很大一部分预加载在内存中（因此缓冲区大小定义了这一大部分的大小）（2）
*   用于写入：数据写入内存，一旦缓冲区满，就会从内存传输到文件系统 (3)

如何在 std::ifstream 和 std::ofstream 上设置缓冲区大小？(4)

考虑到我使用非常大的二进制文件（几个 10 GB），并且文件系统通常最适合大型读/写，我可以定义一个 100 MB 的缓冲区大小吗？如果它会降低性能，为什么？(5)

最后，从 ifstream/ofstream 将检测您正在读取/写入文件的数据量并调整缓冲区大小以提供最大速度的意义上说，默认缓冲区是否“智能”？(6)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T10:35:02.660

AFAICS，您对缓冲工作原理的描述是正确的。

但是，大于 1 MB 的缓冲区不太可能给您带来任何好处。实际上，甜蜜点可能远低于该值。请注意，缓冲区使用的缓冲区`std::ifstream`与`std::ofstream`磁盘缓存无关——这是内核的工作，它自行决定。流缓冲区仅影响通过一个系统调用传入或传出内核的最大字节数。因此，理想的缓冲区大小*并不*取决于您传输的数据量。*是*什么取决于是

1.  系统调用的开销成本。更高的开销意味着您需要一次性传输更多数据。
2.  缓冲区管理的间接成本。如果有的话，对于更大的缓冲区可能更大。
3.  CPU 缓存破坏效果。将强烈支持较小的缓冲区。

由于 (1) 有利于较大的缓冲区，而 (2) 和 (3) 有利于较小的缓冲区，因此在某个地方会有一个甜蜜点。由于 CPU 缓存大小可能是几兆字节左右，接近该限制的缓冲区大小将受到 (3) 的*严重*影响，因此最佳位置肯定在 1 MB 左右。您可能可以忽略 (2)，因此仍然需要估计 (1) 以获得缓冲区大小的下限。假设一个系统调用大约需要 1000 个周期左右，并假设 CPU+内存的原始复制速度是 4 字节/周期。然后，传输 4k 的成本与进行一次系统调用的成本差不多。因此，缓冲区大小为 20k 时，系统调用开销大​​约为 20%，而缓冲区大小为 100k 时，系统调用开销约为 4%。因此，理想的缓冲区大小在几百 kB 的范围内*与文件大小*无关！**

 *您可能可以相信您的标准库实现可以做到这一点，除非分析为您提供确凿的证据表明存在影响性能的缓冲问题*。**

# javascript - 如何使用div在javascript中显示当前月份，年份

> ID：12757911
> 
> 赞同：6
> 
> 时间：2012-10-06T07:55:21.643
> 
> 标签：javascript, jquery, date, datetime

我正在尝试获取用于在 div 中显示当前月份和年份的 jquery 或 java-script 代码，但到目前为止还不能。我的意思是我想以这种格式显示当前的月份和年份：`October 2012`这样每个月我都不需要编辑它或任何东西。

我在这里看到了很多问题，但没有一个显示如何在 div 中显示变量。

知道如何实现吗？

非常感谢您的帮助和想法

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-06T08:00:42.213

JavaScript 本身并没有实现`strftime`，所以你必须做一些不太优雅的事情：

```
window.onload = function() {
    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];;
    var date = new Date();

    document.getElementById('date').innerHTML = months[date.getMonth()] + ' ' + date.getFullYear();
}; 
```

我假设您的 HTML 中有一个带有`id`of的元素。`date`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-06T08:01:58.340

javascript 中没有内置函数来获取月份的全名。您可以创建一个月份名称数组并使用它来获取完整的月份名称，例如

```
var m_names = ['January', 'February', 'March', 
               'April', 'May', 'June', 'July', 
               'August', 'September', 'October', 'November', 'December'];

d = new Date();
var n = m_names[d.getMonth()]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-05T06:33:09.440

获取当前日期、月份、年份或 ETC....

```
new Date().getDate()          // Get the day as a number (1-31)
new Date().getDay()           // Get the weekday as a number (0-6)
new Date().getFullYear()      // Get the four digit year (yyyy)
new Date().getHours()         // Get the hour (0-23)
new Date().getMilliseconds()  // Get the milliseconds (0-999)
new Date().getMinutes()       // Get the minutes (0-59)
new Date().getMonth()         // Get the month (0-11)
new Date().getSeconds()       // Get the seconds (0-59)
new Date().getTime()          // Get the time (milliseconds since January 1, 1970) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-06T08:01:14.277

看看 moment() [http://momentjs.com](http://momentjs.com)

```
moment().format('MMMM YYYY'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-24T19:40:04.320

> 使用它，您可以获得唯一的当前月份

```
var d = new Date();
var n = d.getMonth()+1; 
```

n 的值为 3（如当前月份是三月）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-06T08:01:16.687

```
var dt = new Date();
var m = ['January','February', 'March', ...][dt.getMonth()]; //you get the idea...
var y = dt.getFullYear();
$('<div>').html(m + " " + y).appendTo(document); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-06T08:06:18.613

您可以使用 JqueryUI 格式化您的日期（如果您已经使用它）。Datepicker 提供格式：

```
$.datepicker.formatDate("MM yy", date); 
```

要在 div 中插入日期，您可以使用此功能：

```
$("#divId").append($.datepicker.formatDate("MM yy", new Date())); 
```

来源：[http ://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

# mono - What is the minimum software I need to install in a windows machine in order to run a mono + gtk# application?

> ID：12757913
> 
> 赞同：2
> 
> 时间：2012-10-06T07:55:34.680
> 
> 标签：mono, gtk#

I have developed an application with mono and I would like to know what are the minimum libraries that need to be available in a windows machine, in order to run this app.

I've heard .net will suffice, no need to install the mono package for windows. Is this true? which .net version do I have to install?

BTW, my application uses GTK# as well.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:08:19.680

MonoDevelop 建立在 GTK# 之上，它对 Windows 的最低要求是，

*   .NET 框架 4
*   GTK# 运行时

如[http://monodevelop.com/Download中所述](http://monodevelop.com/Download)

因此，您的应用程序应该要求相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T21:50:45.213

您需要[Gtk# 的单声道项目下载页面中的安装程序](http://www.mono-project.com/download/#download-win)。看看[这个问题](https://stackoverflow.com/questions/1888463/)。

从技术上讲，您还需要单声道，但由于这是用于 Windows，它将包括安装的 .NET。除非它是 Windows 的真正旧版本。

希望这可以帮助。

# magento - Magento 中的密码存储在哪里以及如何存储？

> ID：12757926
> 
> 赞同：7
> 
> 时间：2012-10-06T07:58:39.280
> 
> 标签：magento, hash, passwords, ipb

如果能在我网站的各种应用程序中进行通用登录，那将是一种巨大的用户体验。目前，我有一个 Magento 店面和一个 IPS 板社区。我正在尝试将它们集成到我的用户的一个通用登录中。

IPS 板提供多种登录方法，其中一种是外部数据库，它使我能够将其与外部数据库集成以获取用户详细信息。

极好的！所以我可以将 IPS 与 Magento 的数据库链接起来，以获得统一的用户凭据。

但是，到目前为止，我只能找到**customer_entity.email**的电子邮件字段。

我的问题是：

1.  **Magento 中的密码哈希字段（table.field）是什么？**
2.  **Magento 如何生成密码哈希？MD5？沙1？什么是盐（我猜它因安装而异，但我在哪里可以找到它）？**

正如您从所附图片中看到的，我需要 Magento 存储密码的位置和方式的详细信息，以使 IPS 能够将 Magento 的数据库用作用户登录详细信息的外部数据库。

随附的：

[![在此处输入图像描述](../Images/166eb244f71a0f6e2fff4f2b56ec1207.png)](https://i.stack.imgur.com/vH8pw.png)

[![在此处输入图像描述](../Images/ec5d65cd5e8adffe39264e9705c45635.png)](https://i.stack.imgur.com/V4gUR.png)

任何关于如何完成这项工作的想法或建议将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T00:16:07.997

客户的密码存储在 中`customer_entity_varchar`，它是一个 eav 属性。您不能使用 IPB 外部数据库功能。您应该使用`Mage::getModel('customer/customer')->authenticate($logi, $password);`在您的代码中对客户进行身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T08:34:05.707

您可以在 /app/etc/local.xml 中找到加密密钥。我还没有查看用户表，但我的猜测是哈希字段是加密的密码。

具有加密功能，`Mage_Core_Model_Encryption`因此如果您可以从 IPS 板上访问 Magento，您可以执行以下类似操作：

```
$password = 'whatever'; //your logic provides this password

require_once('app/Mage.php'); //path to your Magento app/Mage.php
Mage::app(); //we can now use magento functionality

$decrypted = Mage::getModel('core/encryption')->decrypt($password); 
```

你需要找出最好的地方放置这个逻辑以便集成它，但这至少是一个开始。

# python - Django and limiting RAM usage: Recommended syntax, conventions, and strategies?

> ID：12757928
> 
> 赞同：0
> 
> 时间：2012-10-06T07:59:10.253
> 
> 标签：python, django, linux, apache, ram

my django project is hosted using apache2 server has been consuming a ton of memory lately and i'm not sure if unusual or if something is being systematically done incorrectly in the project.

For the record, debug is set to False, memory leaks are being monitored and do not exist, the django queryset database has been cleared, and all static references are hosted on a seperate static application.

Here is the specific memory consumption:

```
2120 /home/path/apache2/bin/httpd.worker -f /home/path/apache2/conf/httpd.conf
46408 /home/path/apache2/bin/httpd.worker -f /home/path/apache2/conf/httpd.conf
47124  /home/path/apache2/bin/httpd.worker -f /home/path/apache2/conf/httpd.conf
4800 /home/path/apache2/bin/httpd.worker -f /home/path/apache2/conf/httpd.conf 
```

**Misunderstandings and questions:**

What actually ends up costing memory and RAM? a queryset call? Defining a view? Everything? I know this is a really elementary question but I only have an abstract understanding of how servers and web applications interact.

For an industrial project, is:

```
Model.objects.all() 
```

Really really bad? Or should everything be filtered as much as possible?

Is a rss of 46408 and 47124 considered overwhelmingly large for a django project? Or should I not even be concerned about optimizing the RAM usage further?

Every view in my project is being responded to with at least three SomeModel.objects.all() calls. Does this severely hurt performance, or does it not matter?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:42:00.033

并非每个`Model.objects.all()`结果都会评估所有项目。Django 中的查询集是惰性求值的。如果您现在没有做类似`len(Model.objects.all())`which 评估它的愚蠢事情，那么您可能不会以这些评估结束。至少并非总是如此 - 例如所有分页器都会限制查询集等等。

我在 Django 中遇到的最消耗 RAM 的事情之一是在管理员中显示由数十万个可能的相关对象组成的选择框时......（这就是为什么`raw_id_fields`可用）。

# macos - 不再需要在 Cocoa 中移除通知观察者？

> ID：12757930
> 
> 赞同：1
> 
> 时间：2012-10-06T07:59:18.473
> 
> 标签：macos, cocoa, automatic-ref-counting, nsnotificationcenter, weak-references

在这篇关于垃圾收集的[帖子中，作者指出：](http://cocoasamurai.blogspot.com.es/2010/12/objective-c-memory-management-garbage.html)

> 在 Mac OS X 10.6 及更高版本中，NSNotificationCenter 被弱引用，因此您不再需要在代码中执行以下操作
> 
> ```
> [[NSNotificationCenter defaultCenter] removeObserver:self
>       name:kObservationName
>       object:nil]; 
> ```

这是在某处正式记录的吗？仍然的文档[`removeObserver:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/removeObserver%3a)说：

> 确保在 notificationObserver 或 addObserver:selector:name:object: 中指定的任何对象被释放之前调用此方法（或 removeObserver:name:object:）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:31:46.867

如果您正在构建**垃圾收集**应用程序，那么您确实不需要取消注册对象来接收观察或通知。

但是垃圾收集现在已被弃用，而不是您应该在新项目中使用的东西。

如果您使用的是**ARC**或**MRC**，那么您仍然需要删除对象。最好的地方通常是在`dealloc`方法中。

# vim - 有没有办法关闭“附加注册？

> ID：12757938
> 
> 赞同：0
> 
> 时间：2012-10-06T08:00:51.260
> 
> 标签：vim

来自：帮助“A

“Vim 只有在你这样说的时候才会填充这些寄存器。将它们指定为小写字母以替换它们以前的内容或指定为**大写字母以附加到它们以前的内容**”

有没有办法关闭它？

这太烦人了：当我按住 shift 输入双引号 " 以附加到寄存器时，通常情况下我将 shift 保持一瞬间太久并输入 "A 而不是 "a (所以它*附加*到寄存器 a而不是完全*替换*它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:57:03.437

如果您希望实现@romainl 建议的内容，可以在六行中完成（如果您不介意使用幻数，则三行，留下不需要的变量并在运算符挂起模式下重新映射）：

```
let s:capshift=char2nr('A')-char2nr('a')
for s:ch in range(char2nr('A'), char2nr('B'))
    execute 'nnoremap "'.nr2char(s:ch).' "'.nr2char(s:ch-s:capshift)
    execute 'vnoremap "'.nr2char(s:ch).' "'.nr2char(s:ch-s:capshift)
endfor
unlet s:capshift s:ch 
```

. `"`但是这个解决方案有一个缺点：你现在失去了在按下和之间无限期等待的能力`A`（除非你想要`set notimeout`它自己有问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:49:29.763

我最终写了一个小补丁，添加了一个“registerappend”选项

...有了这个你可以`:set noregisterappend`禁用它！

```
diff -r 4cb1f10316ca -r aedf9e836670 src/ops.c
--- a/src/ops.c Thu Oct 11 04:44:33 2012 +0200
+++ b/src/ops.c Tue Oct 16 01:28:47 2012 -0700
@@ -894,7 +894,8 @@ get_yank_register(regname, writing)
     else if (ASCII_ISUPPER(i))
     {
    i = CharOrdUp(i) + 10;
-   y_append = TRUE;
+   if(p_regappend)
+       y_append = TRUE;
     }
     else if (regname == '-')
    i = DELETION_REGISTER;
diff -r 4cb1f10316ca -r aedf9e836670 src/option.c
--- a/src/option.c  Thu Oct 11 04:44:33 2012 +0200
+++ b/src/option.c  Tue Oct 16 01:28:47 2012 -0700
@@ -2068,6 +2068,9 @@ static struct vimoption
                (char_u *)NULL, PV_NONE,
 #endif
                {(char_u *)2000L, (char_u *)0L} SCRIPTID_INIT},
+    {"registerappend", NULL,  P_BOOL,
+               (char_u *)&p_regappend, PV_NONE,
+               {(char_u *)TRUE, (char_u *)TRUE} SCRIPTID_INIT}, 
     {"relativenumber", "rnu", P_BOOL|P_VI_DEF|P_RWIN,
                (char_u *)VAR_WIN, PV_RNU,
                {(char_u *)FALSE, (char_u *)0L} SCRIPTID_INIT},
diff -r 4cb1f10316ca -r aedf9e836670 src/option.h
--- a/src/option.h  Thu Oct 11 04:44:33 2012 +0200
+++ b/src/option.h  Tue Oct 16 01:28:47 2012 -0700
@@ -495,6 +495,7 @@ EXTERN char_u   *p_popt;    /* 'printoptions'
 EXTERN char_u  *p_header;  /* 'printheader' */
 #endif
 EXTERN int p_prompt;   /* 'prompt' */
+EXTERN int p_regappend;    /* 'registerappend' */
 #ifdef FEAT_GUI
 EXTERN char_u  *p_guifont; /* 'guifont' */
 # ifdef FEAT_XFONTSET 
```

# javascript - 使用 paper.js 将 pointtext 插入画布会将其他项目推开

> ID：12757940
> 
> 赞同：0
> 
> 时间：2012-10-06T08:01:05.253
> 
> 标签：javascript, canvas, paperjs

我正在尝试创建一个矩形和一个 pointtext 元素，其中矩形将是文本元素的容器。

没有文本元素，一切正常。当插入文本元素时，矩形被推开。好吧，矩形显示在正确的位置，但是它接收事件的点被推开。

请参阅[http://jsbin.com/abejim/1](http://jsbin.com/abejim/1)

悬停时矩形的可见性应该增加。悬停不影响，但是当鼠标移动到 580,280 及附近时，它的可见性会增加。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T16:31:21.050

那个 jsbin 似乎在 Firefox 中对我来说工作得很好。矩形显示在正确的位置，将鼠标悬停在矩形上使其突出显示。自您提出问题以来，paper.js 代码可能已更新。

* * *

看起来您在 paper.js[邮件列表中](https://groups.google.com/forum/#!forum/paperjs)提出了同样的问题。为了将来在这里参考，响应是：

> pointtext 采用相对坐标，而您试图给出绝对坐标。试试这个：

```
var size = new paper.Size(125, 75);    //SM size to paper size
var rectangle = new paper.Rectangle({ x: 0, y: 0 }, size);    //(top_left, bottom_right)
var cornerSize = new paper.Size(10, 10);    //rounding of edges
var shape = new paper.Path.RoundRectangle(rectangle, cornerSize);
shape.strokeWidth = 3;
shape.strokeColor = '#525252';
shape.fillColor = '#FFFFFF';
shape.name = 'shape';
var stateNameTxt = new paper.PointText(10, 65);
stateNameTxt.content = state_name;
stateNameTxt.name = 'stateNameTxt';
var state = new paper.Group();    //create group
state.name = state_name;
state.opacity = 0.8;
state.addChild(shape);    //add shape to grpup
state.addChild(stateNameTxt);    //add pointtext  to group 
```

# c# - 在 WCF 中反序列化 JSON

> ID：12757946
> 
> 赞同：2
> 
> 时间：2012-10-06T08:02:00.770
> 
> 标签：c#, json, wcf, deserialization

我正在向 WCF 服务发送一条包含文件名和 base64 编码图像的 JSON 消息。我不太确定如何将其转换回图像，更具体地说是反序列化返回流。

WCF 接口

```
 [OperationContract]
        [WebInvoke(
            Method = "POST",
            UriTemplate = "/UploadImage", ResponseFormat =  WebMessageFormat.Json,
            RequestFormat =  WebMessageFormat.Json)]
        string UploadImage(Stream image); 
```

以及消息的某些部分（我将其保存到文件中，以便查看并尝试理解）

```
--hr56lXG6Q_hKg5opmTx4xejr28dU17AC
Content-Disposition: form-data; name="entity"

{"filename":"mypicture.jpg","thebigfile":"\/9j\/4Re6RXhpZgAATU0AKgAAAAgACwEPAAIAAAAOAAAAkgEQAAIAAAAGAAAAoAESAAMAAAABAAYAAAEaAAUAAAABAAAApgEbAAUAAAABAAAArgEoAAMAAAABAAIAAAExAAIAAAATAAAAtgEyAAIAAAAUAAAAygITAAMAAAABAAEAAIdpAAQAAAABAAAA3oglAAQAAAABAAACegAAAoBTb255IEVyaWNzc29uAExUMjZpAAAAAEgAAAABAAAASAAAAAE2LjEuQS4yLjQ1XzUzX2YxMDAApDIwMTI6MTA6MDYgMDk6MzI6MTcAABiCmgAF
        and lots more of the base64 encoded image....
        --hr56lXG6Q_hKg5opmTx4xejr28dU17AC-- 
```

我如何反序列化这个？流是要走的路吗？我不只是想删除最上面的行然后开始反序列化 JSON 数组，我想知道为什么它看起来像这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:30:03.123

要处理您提供的消息，OperationContract 需要类似于：

> [WebInvoke(Method="POST", UriTemplate="/UploadImage", BodyStyle=WebMessageBodyStyle.WrappedRequest, ResponseFormat=WebMessageFormat.Json, RequestFormat=WebMessageFormat.Json)] [OperationContract] string UploadImage(string filename, string thebigfile);

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb885100.aspx](http://msdn.microsoft.com/en-us/library/bb885100.aspx)

然后，您需要使用 .NET Framework 提供的解码器手动对“thebigfile”参数进行 Base64 解码。据我所知，JSON 中没有对 Base64 的内置支持，有关如何支持各种数据类型的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb412170.aspx 。](http://msdn.microsoft.com/en-us/library/bb412170.aspx)

# linq - 如何为实体模型 MVC4 中的多个表编写 linq 查询？

> ID：12757949
> 
> 赞同：0
> 
> 时间：2012-10-06T08:03:07.883
> 
> 标签：linq, asp.net-mvc-4, entity-framework-4, asp.net-web-api

我的实体模型中有这些表

`dbo.Options`

```
[OptionsId] [OptionName]
    1        Color
    2        Size
    3        Fit 
```

`dbo.ProductAttributes`：

```
[ProdcutAttributeId]   [SKU]       [OptionId]   [Value]
     3001              Shirt_1001    1            Grey
     3002              Shirt_1001    2              S 
     3003              Shirt_1001    3           Regular
     3004              Shirt_1002    1            Black
     3005              Shirt_1002    2             M
     3006              Shirt_1002    3            Slim 
```

`dbo.Products`：

```
[ProductId  [ProductName]   [ProductDescription]    [Stock] [ImageURL]  [ProductType] 
```

`dbo.ProductSKU`：

```
 ID      SKU       ProductId  Price   ImageURL
   2001    Shirt_1001   1001    12  C:\Users\Administrator\Desktop\Images\LongSleeveShirt.jpg
   2002    Shirt_1002   1001    13  C:\Users\Administrator\Desktop\Images\LongSleeveShirtBlack.jpg
   2003    Shirt_1003   1001    12  C:\Users\Administrator\Desktop\Images\LongSleeveShirtkhaki.jpg
   2004    Shirt_1004   1001    13  C:\Users\Administrator\Desktop\Images\LongSleeveShirtOrange.jpg
   2005    Tshirt_1001  1002    13  C:\Users\Administrator\Desktop\Images\PlainWhiteT.jpg
   2006    Tshirt_1002  1002    12  C:\Users\Administrator\Desktop\Images\PrintedTBlue.jpg
   2007    Tshirt_1003  1002    13  C:\Users\Administrator\Desktop\Images\PrintedTWhite.jpg
   2008    Tshirt_1004  1002    12  C:\Users\Administrator\Desktop\Images\LongSleeveBlackT.jpg 
```

所以这些是我在我的实体模型中的表，现在我想编写一个 linq 查询，我将在其中传递`productID`as 参数，我应该得到传递`productid,productname,productdescription`的`productid`参数，并且每个`Sku`产品都有 sku 的每个选项和`imageURl`的 SKU。

我该如何为此编写一个 linq 查询？

这就是我的模型的外观

```
 public class ProductItems
                  {
                   public long ProductID { get; set; }
                   public string ProductName { get; set; }
                   public string ProductDescription { get; set; }
                   public string ImageURL { get; set; }
                   public string SKU { get; set; }
                   public long OptionID { get; set; }
                   public string optionName { get; set; }
                   public string Value{ get; set; }
                   public ProductItems()
                    {
                     if (SKUs == null )
                      SKUs = new List<productSKU>();
                     }
                   public List<productSKU> SKUs { get; set; }     
                   public List<options> oPTIONS { get; set; }
                   }

                 public class productSKU
                   {
                  public productSKU()
                  {
                  if (oPTIONS == null)                          
                      oPTIONS = new List<options>();
                    }
                     public string productsku { get; set;}
                    public string SKUImageURL { get; set;}
                    public List<options> oPTIONS { get; set; }
                    }

                 public class options
                    {
                     public long OptionID { get; set; }
                     public string OptionName { get; set;}
                     public string OptionValue { get; set;}
                    } 
```

现在我想绑定`prodcuname,description`和类，每个 sku 细节都应该绑定到`prodid`类，每个都应该绑定到选项类`ProductItems``ProductSku``SKuOption`

最后我应该得到这些列`[ProductID ],[ProductName ],[ProductDescription ],[SKU],[OptionId],[OptionName],[Value],[ImageURL]`我需要`ProductName,Description`的是产品的每个 SKU，每个选项值和产品名称

这是我想要做的事情，但我很困惑如何将它绑定到我的模型

```
 var produ = from PS in products.ProductSKUs
                    join PA in products.ProductAttributes on PS.SKU equals PA.SKU
                    join p in products.Products on PS.ProductId equals p.ProductId
                    join o in products.Options on PA.OptionId equals o.OptionsId
                    where PS.ProductId==ID
                    select new ProductItems()
                          {
                              ProductID=p.ProductId,
                              ProductName=p.ProductName,
                              ProductDescription = p.ProductDescription, 
```

我被困在这里下一步该做什么可以在这里帮助我或为我提供解决方案将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:37:52.477

感谢任何试图回答我的问题的人

```
 private ProductEntities products = new ProductEntities();

    public IEnumerable<ProductItems> GetProductDetail(long ID)
    {       
        ProductItems items=new ProductItems();
        List<ProductItems> objcollection=new List<ProductItems>();   
        var productdetail=from prod in products.Products where prod.ProductId==ID select new {productid=prod.ProductId,description=prod.ProductDescription,productname=prod.ProductName};           
        foreach(var detail in productdetail)
        {
         items.ProductID=detail.productid;
         items.ProductName=detail.productname;
         items.ProductDescription=detail.description;                    
         var prodsku=from prodksu in products.ProductSKUs where prodksu.ProductId==ID select prodksu;           
        foreach(var sku in prodsku)
        {
            productSKU prdsk=new productSKU();
            prdsk.productsku=sku.SKU;
            prdsk.SKUImageURL=sku.ImageURL;
            items.SKUs.Add(prdsk);
            var opt = from PA in products.ProductAttributes
                      join O in products.Options on PA.OptionId equals O.OptionsId
                      where PA.SKU == prdsk.productsku
                      select new { OptionId = PA.OptionId, OptionValue = PA.Value, OptionName = O.OptionName }; 
            foreach(var op in opt)
            {
                options obj=new options();
                obj.OptionID=Convert.ToInt16(op.OptionId);
                obj.OptionName = op.OptionName;
                obj.OptionValue=op.OptionValue;
                prdsk.oPTIONS.Add(obj); 
            }            
            objcollection.Add(items);
        } 
        }      

            return objcollection;         
    } 
```

# c++ - create_task 和返回值

> ID：12757951
> 
> 赞同：4
> 
> 时间：2012-10-06T08:03:25.333
> 
> 标签：c++, windows-8, c++-cx, windows-store

我需要在我声明的方法中调用 Async 方法。该方法应该返回一个值。我正在尝试将对 Windows 应用商店的调用包装到一个易于使用的类中。我的方法应该是这样的：

```
bool Purchase(enum_InAppOption optionToPurchase); 
```

`enum_InAppOption`是一个枚举，包含所有要购买的应用内选项。在某些时候我需要打电话`RequestProductPurchaseAsync`。此调用的结果确定该方法是否应返回`true`或`false`。我是 c++/cx 的新手（或者至少从现在到上次使用 c++ 之间我有很长的历史），所以也许这比我想的更容易。

`create_task`看起来像这样：

```
create_task(CurrentAppSimulator::RequestProductPurchaseAsync(this->_LastProductId, false)) 
```

我考虑/尝试的选项：

1.  返回任务不会抽象商店

2.  试图调用等待任务。我有例外`An invalid parameter was passed to a function that considers invalid parameters fatal.`

3.  尝试使用`structured_task_group`，但似乎这不允许非 void 返回方法，或者我试图提供错误的解释。编译器返回错误 C2064（谷歌搜索但我不明白要更改什么）

4.  使用一系列任务和`when_all`

在页面中间的[http://msdn.microsoft.com/en-us/library/dd492427.aspx#when_all](http://msdn.microsoft.com/en-us/library/dd492427.aspx#when_all)上找到以下代码：

```
array<task<void>, 3> tasks = 
{
    create_task([] { wcout << L"Hello from taskA." << endl; }),
    create_task([] { wcout << L"Hello from taskB." << endl; }),
    create_task([] { wcout << L"Hello from taskC." << endl; })
};

auto joinTask = when_all(begin(tasks), end(tasks));

// Print a message from the joining thread.
wcout << L"Hello from the joining thread." << endl;

// Wait for the tasks to finish.
joinTask.wait(); 
```

所以我试着把它翻译成下面的代码：

```
array<task<Platform::String^>,1> tasks = {
    create_task(CurrentAppSimulator::RequestProductPurchaseAsync(this->_LastProductId, false))
}; 
```

即使我包括编译器抛出 C2065（'array'：未声明的标识符），C2275（'Concurrency::task<_ReturnType>'：非法使用这种类型作为表达式和一些错误似乎是跟进这两个错误.

总结一下：如何在异步任务完成后让方法返回，这样我就可以根据异步进行的东西返回有意义的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:12:23.040

> 如何在异步任务完成后使方法返回，以便我可以根据异步进行的内容返回有意义的结果？

这没有多大意义：如果你想在返回之前等待它完成， “东西”不是*异步的。*这就是*同步*的定义。

使用 C++/CX 时，您不能等待 STA 上尚未完成的任务。任何这样做的尝试都将导致抛出异常。如果您要调用`Purchase()`STA 并且如果它启动异步操作，则您不能等待该操作完成后再返回。

相反，您可以[`.then`](http://msdn.microsoft.com/en-us/library/hh750044.aspx)在异步操作完成时使用它来执行另一个操作。如果需要在调用线程上执行延续，请确保传递[`use_current()`](http://msdn.microsoft.com/en-us/library/hh750085.aspx)延续上下文以确保延续在正确的上下文中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T08:56:49.303

萨沙，

1.  返回任务会抽象出商店，我认为这将是最合理的决定，因为您不会限制帮助类的用户立即获得结果，而且还允许他们以自己的方式处理结果并且是异步的。
2.  正如@James 正确提到的那样，您不允许在 UI 线程中等待，那么您将使应用程序无响应，有不同的方法可以避免等待：

    *   `concurrency::task::then`用;创建一个延续
    *   您不能在 UI 线程中等待，但您可以等待 UI 线程上的操作完成，这意味着您可以将在 UI 上运行的任务的未来结果包装在[task_completion_event](http://msdn.microsoft.com/en-us/library/vstudio/hh750136(v=vs.110).aspx)中，然后在另一个（后台）中等待事件线程并处理结果；

        ```
        concurrency::task_completion_event<Platform::String^> purchaseCompleted;

        create_task(CurrentAppSimulator::RequestProductPurchaseAsync(
            this->_LastProductId, false)).then(
                [purchaseCompleted](concurrency::task<Platform::String^> task)
        {
            try
            {
                purchaseCompleted.set(task.get());
            }
            catch(Platform::Exception^ exception)
            {
                purchaseCompleted.set_exception(exception);
            }
        });

        // and somewhere on non-UI thread you can do
        Platform::String^ purchaseResult = create_task(purchaseCompleted).get(); 
        ```

    *   更准确地说，您可以使用更多特定于 WinRT 的工具而不是并发运行时来实现前面的技巧，并且;[`IAsyncOperation<T>`](http://msdn.microsoft.com/en-us/library/windows/apps/br206598.aspx)`::Completed``IAsyncOperation<T>::GetResults`

3.  和

4.  在这里似乎无关紧要，因为您只有一项真正的任务，那就是购买。

# javascript - 如何避免使用 javascript 在文本框中显示提示文本

> ID：12757952
> 
> 赞同：0
> 
> 时间：2012-10-06T08:03:33.213
> 
> 标签：javascript, html

我正在处理简单的登录表单。我有两个文本字段作为用户名和密码。

用户名文本字段提示为“用户名”。

密码文本字段提示为“密码”。

我想在文本框内单击时隐藏提示文本。

在这里我遇到了两个问题，

1.  如果我单击用户名文本框内的提示文本隐藏。但是当我按 ctrl+z 然后再次出现提示并且可以通过按键盘箭头键进行编辑。

2.  第二个是密码文本字段类型是密码。所以它没有将提示文本显示为“密码”。

这是我的代码：

```
<html>
<head>
  <title>login</title>
<script>
function ForUserName()
{
    if(document.getElementById('username').value == "user name")
    {
       document.getElementById('username').value='';
    }
    else if(document.getElementById('username').value == '')
    {
       document.getElementById('username').value='user name';
    }
}

function ForPassword()
{
    if(document.getElementById('password').value == "password")
    {
       document.getElementById('password').value='';
    }
    else if(document.getElementById('password').value == '')
    {
       document.getElementById('password').value='password';
    }
}
</script>

</head>
<body>

<input type="text" id="username" value="user name" onclick="ForUserName();" onblur="ForUserName();">
<input type="password" id="password" value="password" onclick="ForPassword();" onblur="ForPassword();">

</body>
</html> 
```

任何人都可以请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:07:54.150

我建议你使用`placeholder`. 你不需要任何 JavaScript 并且所有最新的浏览器都支持它。[jsfiiddle](http://jsfiddle.net/FjR5m/)

```
 <input type="text" id="username" placeholder="user name" onclick="ForUserName();" onkeyup="ForUserName();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:08:21.690

有一个 HTML5 属性可以做到这一点，称为`placeholder`. 所以你只需这样做：

```
<input type="text" id="username" placeholder="user name"> 
```

对于向后兼容性（旧浏览器），您只需遵循本[教程](http://webdesignerwall.com/tutorials/cross-browser-html5-placeholder-text)即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T08:10:19.037

你可以使用*HTML5 的 placeholder 属性*

```
<input type="text" id="username"  placeholder="user name">
<input type="password" id="password" placeholder="password"> 
```

对于支持旧浏览器：

```
<input type="text" id="username" value="user name"  onfocus="if (this.value == 'user name') {this.value = '';}" onblur="if (this.value == '') {this.value = 'user name';}">
<input type="password" id="password" value="password" onfocus="if (this.value == 'password') {this.value = '';}" onblur="if (this.value == '') {this.value = 'password';}"> 
```

# c#-4.0 - 无法使用 C# 从目录中删除图像

> ID：12757953
> 
> 赞同：1
> 
> 时间：2012-10-06T08:03:43.073
> 
> 标签：c#-4.0, c#-3.0

我正在尝试使用以下语句从目录中删除图像

```
System.IO.File.Delete(Path); 
```

我以前在另一个函数中访问过这个图像

```
Image image=Image.FromFile(imagePath)
imageList1.Images.Add(image); 
```

但它显示文件被另一个进程锁定的错误。我搜索了这个，发现我应该使用 using 来处理图像对象，所以我尝试了这个

```
using(Image image=Image.FromFile(imagePath))
    imageList1.Images.Add(image); 
```

但这在 program.cs 中给我一个错误，即参数无效并且程序无法运行。有时它会给出错误在单个线程上启动第二个消息循环不是有效的操作。请改用 Form.ShowDialog。

我正在将 imagelist 添加到列表视图中，在删除文件之前，我正在使用以下命令清除 imagelist 和 listview 的所有项目。

```
imageList1.Images.RemoveByKey(imageName);
imageList1.Images.Clear();
listView1.Items.RemoveByKey(imageName);
listView1.Items.Clear();
listView1.SmallImageList = null; 
```

这是我填充列表视图的代码。

```
try
        {
            string album = albumListBox.SelectedItem.ToString();
            List<string> imageName=new List<string>();
            XmlDocument doc = new XmlDocument();
            doc.Load(Application.StartupPath + "/image.xml");
            XmlNodeList list = null;
            list = doc.SelectNodes(string.Format("/images/image"));
            listView1.Columns.Clear();
            listView1.Columns.Add("Image List",210,HorizontalAlignment.Left);
            listView1.SmallImageList = imageList1;
            listView1.Items.Clear();
            imageList1.Images.Clear();
            listView1.MultiSelect = false;
            foreach (XmlNode node in list)
            {
                if (node.ChildNodes[2].InnerText == album)
                {
                    string imagePath = Application.StartupPath + "\\images\\" + album + "\\" + node.ChildNodes[0].InnerText;
                    Image image = Image.FromFile(imagePath);
                        imageList1.Images.Add(image);
                    imageName.Add(node.ChildNodes[0].InnerText);
                }
            }
            for (int j = 0; j < this.imageList1.Images.Count; j++)
            {
                listView1.Items.Add(imageName[j],imageName[j],j);
                listView1.View = View.Details;
            }
        }
        catch (Exception e)
        {
            MessageBox.Show("No Images in this Album Please add the Images");
            showImage.Hide();
        } 
```

这是我要删除文件的代码

```
var listItem = listView1.SelectedItems[0];
        string album = albumListBox.SelectedItem.ToString();
        string imageName = listItem.Text;
        string imagePath = Application.StartupPath + "\\images\\" + album + "\\" + imageName;
        XmlDocument doc = new XmlDocument();
        doc.Load(Application.StartupPath + "/image.xml");
        XmlNode node = doc.SelectSingleNode(string.Format("//image[./imageName/text()='" + imageName + "' and ./album/text()='" + album + "']"));
        if (node != null)
        {
            //remove image from directory tooV
            doc.DocumentElement.RemoveChild(node);
            doc.Save(Application.StartupPath + "/image.xml");
            imageList1.Images.RemoveByKey(imageName);
            imageList1.Images.Clear();
            listView1.Items.RemoveByKey(imageName);
            listView1.Items.Clear();
            listView1.Items[listView1.SelectedIndices[0]].Remove();
            imageList1.Images.RemoveAt(listView1.SelectedIndices[0]);
            listView1.SmallImageList = null;
            fillImageList();
            System.IO.File.Delete(imagePath);
            MessageBox.Show("Image deleted");
            fillAlbumList();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:08:43.103

只要图像仍然在 imagelist1 中被引用，它就不会被释放。为了正确处理它，您还必须处理 imagelist1。然后只关闭所有对 Image 的引用。

# php - 如何在不使用 PHP PDO 的情况下访问 MySQL 数据库？

> ID：12757954
> 
> 赞同：0
> 
> 时间：2012-10-06T08:03:51.387
> 
> 标签：php, mysql, pdo

我有这个使用 PHP PDO 访问 MySQL 数据库的脚本，但问题是我的托管服务提供商禁用了 PHP PDO，所以现在我被卡住了，不知道如何更改此代码以在没有 PHP PDO 的情况下访问数据库：

```
<?php

    class DbHandler {

        private $dbname = '**********';
        private $host = '**********';
        private $user = '**********';
        private $pass = '**********';
        public $dbh;
        private $sth;

        public function __construct()
        {
            try{
                $this->dbh = new PDO("mysql:$this->host=localhost;dbname=$this->dbname", $this->user, $this->pass);
            }
            catch(PDOException $e){
                echo 'Unable to connect to database!';
            }
        }

        // Retrive all replays from the database
        public function selectAll($offset, $rowsperpage){

            $this->sth = $this->dbh->query("SELECT game_id, game_title,game_date_upload,game_file_name FROM games ORDER BY game_id DESC LIMIT $offset, $rowsperpage");
            $this->sth->setFetchMode(PDO::FETCH_ASSOC);
            $replays = $this->sth->fetchAll();

            return $replays;
        }

        // Return number of replays from db
        public function numOfReplays(){
            $this->sth = $this->dbh->query("SELECT game_id FROM games");
            $this->sth->setFetchMode(PDO::FETCH_ASSOC);
            $replays = $this->sth->fetchAll();
            $numOfReplays = count($replays);
            return $numOfReplays;
        }

        // Search db
        public function search1($search_text, $offset, $rowsperpage){
            $this->sth = $this->dbh->query("SELECT game_id, game_title,game_date_upload,game_file_name FROM games WHERE game_title LIKE '%$search_text%' ORDER BY game_id DESC LIMIT $offset, $rowsperpage");
            $this->sth->setFetchMode(PDO::FETCH_ASSOC);
            $replays = $this->sth->fetchAll();
            return $replays;
        }

        public function search($search_text, $offset, $rowsperpage){
            $search_text = '%' . $search_text . '%';
            $this->sth=$this->dbh->prepare("SELECT game_id, game_title,game_date_upload,game_file_name FROM games WHERE game_title LIKE ? ORDER BY game_id DESC LIMIT $offset, $rowsperpage");
            $this->sth->setFetchMode(PDO::FETCH_ASSOC);
            $this->sth->execute(array($search_text));
            $replays = $this->sth->fetchAll();
            return $replays;
        }

        public function numOfSearchResults($search_text){
            $search_text = '%' . $search_text . '%';
            $this->sth = $this->dbh->prepare("SELECT game_id FROM games WHERE game_title LIKE ?");
            $this->sth->setFetchMode(PDO::FETCH_ASSOC);
            $this->sth->execute(array($search_text));
            $replays = $this->sth->fetchAll();
            $numOfReplays = count($replays);
            return $numOfReplays;
        }

        // Retrieve last five uploaded replays
        public function latestReplays(){
            $this->sth = $this->dbh->query("SELECT game_title,game_file_name FROM games ORDER BY game_date_upload DESC LIMIT 2");
            $this->sth->setFetchMode(PDO::FETCH_ASSOC);
            $lastReplays = $this->sth->fetchAll();

            return $lastReplays;
        }

        // Insert replay data in db
        public function exec($data=array())
        {
            $this->sth = $this->dbh->prepare("INSERT INTO games(game_title,game_description,game_file_name) values(?,?,?)");
            $this->sth->execute($data);
        }
    }
?> 
```

我的数据库工作正常，因为我使用了这个 MySQL 测试脚本来连接它并且它工作正常：

```
<?php
    mysql_connect("myhost.com", "username", "password") or die(mysql_error());
    echo "Connected to MySQL<br/>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:07:14.977

如果您的主机已禁用 PDO，我强烈建议您**切换主机！**

如果这不可能，您可以将 PDO 函数替换为 mysqli* 函数。

例子：

```
class DbHandler
{

  private $dbname = '**********';
  private $host = '**********';
  private $user = '**********';
  private $pass = '**********';

  public  $dbh;
  private $sth;

  public function __construct()
  {
    $this->dbh = new mysqli( $this->host, $this->user, $this->pass, $this->dbname);
  }

  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:14:46.503

正如 JvdBerg 所说，您可以切换主机或更改为[MySQLi](https://en.wikipedia.org/wiki/MySQLi)

这是从 PDO 到 MySQLi 的快速更改

**从**

```
$this->dbh = new PDO("mysql:$this->host=localhost;dbname=$this->dbname", $this->user, $this->pass);` 
```

**到**

```
$this->dbh = new mysqli($this->host,$this->user,$this->pass,$this->dbname); 
```

和

**从**

```
$this->sth = $this->dbh->query("SELECT game_id, game_title,game_date_upload,game_file_name FROM games ORDER BY game_id DESC LIMIT $offset, $rowsperpage");
$this->sth->setFetchMode(PDO::FETCH_ASSOC);
$replays = $this->sth->fetchAll(); 
```

**到**

```
$this->sth = $this->dbh->query("SELECT game_id, game_title,game_date_upload,game_file_name FROM games ORDER BY game_id DESC LIMIT $offset, $rowsperpage");
$replays = $this->sth->fetch_all(MYSQLI_ASSOC); 
```

[冲洗，起泡，](https://en.wiktionary.org/wiki/lather,_rinse,_repeat#Phrase)对其余的类方法重复。

# java - 按对象的属性对 Arraylist 进行排序

> ID：12757956
> 
> 赞同：1
> 
> 时间：2012-10-06T08:04:00.427
> 
> 标签：java, sorting, comparator

所以我想通过使用我分配给它的对象字符串名称来对我的 ArrayList 中的所有内容进行排序。

到目前为止，我已经阅读了 Comparators 来完成我想要做的事情。但是当我实现它时，我得到一个编译错误。

我像这样初始化它

`private static ArrayList<PeopleInfo> infoArray = new ArrayList<PeopleInfo>();`

并调用这样的排序

`Collections.sort(infoArray, new CustomComparator());`

这就是班级。

```
public class CustomComparator implements Comparator<PeopleInfo> {
    @Override
    public int compare(PeopleInfo o1, PeopleInfo o2) {
        return o1.GetLast().compareTo(o2.GetLast());
    }
} 
```

我得到的错误是“无法访问 mainClass 类型的封闭实例。必须使用 mainClass 类型的封闭实例（例如 xnew A()，其中 x 是 MainClass 的实例）来限定分配。”

不是很了解发生了什么。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:06:31.370

将您的 Comparator 类声明为静态类

`public static class CustomComparator implements Comparator<PeopleInfo> {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:32:03.187

或者，您可以在主类之外声明比较器。

# java - 显示 HTTP STATUS 404 的 Servlet 程序

> ID：12757959
> 
> 赞同：1
> 
> 时间：2012-10-06T08:04:22.347
> 
> 标签：java, servlets, tomcat7

我已经为 servlet 编写了这段代码

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Httpservlet1  extends HttpServlet 
{
    public void doGet(HttpServletRequest request,
    HttpServletResponse response)
    throws ServletException, IOException
    {
        String color = request.getParameter("color");
        response.setContentType("text/html");
        PrintWriter pw = response.getWriter();
        pw.println("<B>The selected color is: ");
        pw.println(color);
        pw.close();
    }
} 
```

我已经编译了它，它对应的 html 文件动作属性值为

```
action="http://localhost:8765/HS/HTTPSERVLET"> 
```

和 web.xml 包含

servlet-name 四个
servlet-class Httpservlet1

xml 代码格式的servlet-name 四个
url-pattern /HTTPSERVLET 仍然在运行时显示错误消息

![在此处输入图像描述](../Images/26bba6132f182202c46ba3bb7eb14295.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:14:40.510

也许您的 web.xml 格式不正确。它对我来说没问题。

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
   <servlet>
    <servlet-name>four</servlet-name>
    <servlet-class>Httpservlet1</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>four</servlet-name>
    <url-pattern>/HTTPSERVLET</url-pattern>
  </servlet-mapping>
</web-app> 
```

# html - CSS浮动行为从左到右

> ID：12757960
> 
> 赞同：0
> 
> 时间：2012-10-06T08:04:44.840
> 
> 标签：html, css

据我所知，浮动往往以这种方式表现。

![在此处输入图像描述](../Images/8fa8e6b3febcd7e23c70d3acc7a3f0bd.png)

它应该从左到右填充整个空间。我的问题是如何使它以这种方式运行。

![在此处输入图像描述](../Images/4e6da8ac288087c7d3d24505d77e8828.png)

它会填满第一列空间的底部，然后填充第二列。

代码：http: [//jsfiddle.net/EwqYW/](http://jsfiddle.net/EwqYW/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:33:33.867

只需删除浮动！

```
.container {
    margin:0.5em;
} 
```

### 演示：http: [//jsfiddle.net/EwqYW/11/](http://jsfiddle.net/EwqYW/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T08:10:52.710

最好不要浮在想要完成和输入的内容中：

```
display:block; 
```

适合您的 DOM 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T08:24:21.337

尝试使用：

```
.container { clear:left; } 
```

检查这个小提琴：http: [//jsfiddle.net/EwqYW/5/](http://jsfiddle.net/EwqYW/5/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T09:09:22.537

[Jquery Mason](http://masonry.desandro.com/)是我正在寻找的答案。感谢 Josh Davenport 指出这一点。

# sql - SQLite 语法错误（从 PostgreSQL 转换）

> ID：12757965
> 
> 赞同：1
> 
> 时间：2012-10-06T08:05:53.793
> 
> 标签：sql, postgresql, syntax, sqlite

我正在尝试将一些内容合并`table1`到`table2`另一个`table3`. 我启动并运行了以下查询`PostgreSQL`：

```
CREATE TABLE table3 AS SELECT 
table1.orig_zon AS orig_zon,
table1.dest_zon AS dest_zon,
table1.same_zon AS same_zon,
table1.adjacent AS adjacent,
table1.distance AS distance,
table1.da_ivtt AS da_ivtt1,
table1.da_ovtt AS da_ovtt1,
table1.tr_avail AS tr_avail1,
table1.tr_ivtt AS tr_ivtt1,
table1.tr_ovtt AS tr_ovtt1,
table1.tr_cost AS tr_cost1,
table1.au_cost AS au_cost1,
table1.sr_ivtt AS sr_ivtt1,
table1.sr_cost AS sr_cost1,
table2.da_ivtt AS da_ivtt2,
table2.da_ovtt AS da_ovtt2,
table2.tr_avail AS tr_avail2,
table2.tr_ivtt AS tr_ivtt2,
table2.tr_ovtt AS tr_ovtt2,
table2.tr_cost AS tr_cost2,
table2.au_cost AS au_cost2,
table2.sr_ivtt AS sr_ivtt2,
table2.sr_cost AS sr_cost2,
FROM table1, table2
WHERE ((table1.orig_zon = table2.orig_zon)) AND ((table1.dest_zon = table2.dest_zon)); 
```

我已经测试了一个非常小的虚拟数据集的查询，结果符合预期。但是我的实际数据库在`SQLite`其中，当我通过 Linux shell 在 sqlite3 中运行它时，我收到一个错误：

```
Error: near "table1": syntax error 
```

谁能指出我需要做的修改才能在 SQLite 中进行这项工作？谢谢您的帮助！

**Edit1**：删除尾随逗号后（请参阅下面的 Craig 的评论），问题仍然存在。

**Edit2**：玩了一会儿后，我找到了解决方法。看起来很傻，但是如果我要在一行中传递查询的内容，那么该语句就可以工作！

```
table2.sr_ivtt AS sr_ivtt2,
table2.sr_cost AS sr_cost2 FROM table1, table2 WHERE ((table1.orig_zon = table2.orig_zon)) AND ((table1.dest_zon = table2.dest_zon)); 
```

哦！类型转换的祸根！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:15:32.650

SQL 不允许在`SELECT`列表中使用尾随逗号。

```
table2.sr_cost AS sr_cost2,
FROM table1, table2 
```

应该：

```
table2.sr_cost AS sr_cost2
FROM table1, table2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:14:10.777

您需要删除多余的逗号

```
table2.sr_ivtt AS sr_ivtt2,
table2.sr_cost AS sr_cost2
FROM table1, table2 
```

# c++ - 使初始化列表与 C++ 中的继承一起使用

> ID：12757969
> 
> 赞同：3
> 
> 时间：2012-10-06T08:06:05.107
> 
> 标签：c++, inheritance, initializer-list

下面的代码被编译在`g++ 4.6.3 for Linux`

```
#include <iostream>

class A {
  public:  

    int x;
    std::string c;

    A(int x,std::string c):x(10),c("Hi"){
    }

    ~A(){
      std::cout << "Deleting A()" << std::endl;
    }
};

class B : public A {
  public:

    B():A(20,"Hello"){
    }

    ~B(){
      std::cout << "Deleting B()" << std::endl;
    }
};

int main(){
  B o;
  std::cout << o.x << std::endl;
  std::cout << o.c << std::endl;
  return(0);
} 
```

但它没有做应该做的事情，类型 B 无法更改它从 A 继承的 2 个变量的值。

关于为什么这不能正常工作的任何解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:07:52.707

您的基本构造函数采用这些值......并完全无视它们！

改变这个：

```
A(int x,std::string c):x(10),c("Hi"){} 
```

对此：

```
A(int x,std::string c):x(x),c(c){} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:57:15.427

好的，我不明白您到底想要什么以及为什么，但这里有一个建议，使用 C++11，您可以执行以下操作：

```
struct Base {
        int a;
        float b;
};

struct Derived: public Base {
        Derived(): Base{1,1.0} {}
};

int main() {
        Derived d;
} 
```

只要底座是[POD](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)类型。

不过我还是更喜欢`A(int x = 10,std::string c = std::string("Hi")):x(x),c(c){...}`。

恕我直言，您首先需要检查您是否真的需要对基类进行如此多的控制。你真的不应该像那样从外部微观管理一个类，这表明你的类层次结构存在缺陷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T09:13:17.763

关于您想要什么以及如何实现这一点似乎有些混乱。如果我猜对了，这就是你想要的：

```
class A {
  public:  

    int x;
    std::string c;
    //default initization of A
    A():x(10), c("Hi") {}

    //initializing the values of A via parameters
    A(int x,std::string c):x(x),c(c){}

    ~A(){
      std::cout << "Deleting A()" << std::endl;
    }
};

class B : public A {
  public:

    B():A(20,"Hello"){
    }

    ~B(){
      std::cout << "Deleting B()" << std::endl;
    }
}; 
```

所以在这个例子中：

```
int main()
{
    A a;
    A a1(2, "foo");
    B b;
    return 0;
} 
```

*   `a.x == 10`,`a.c == "Hi"`
*   `a1.x == 2`,`a1.c == "foo"`
*   `b.x == 20`,`b.c == "Hello"`

# sql - 使用图片查询报表时出错

> ID：12757977
> 
> 赞同：0
> 
> 时间：2012-10-06T08:06:49.767
> 
> 标签：sql, oracle-apex

当我执行这个获取个人数据和用户图像的报告 sql 时，它给了我以下错误：

> ORA-06502: PL/SQL: 数字或值错误: 字符到数字的转换错误

```
SELECT
ID, 
NAME,
ADDRESS,  
DECODE(GENDER,'M','MALE','F','FEMALE') as GENDER, 
DECODE(nvl(dbms_lob.getlength(IMG),0), 0, null,
            '<img style="border: 4px solid #CCC; -moz-border-radius: 4px; -webkit-border-radius: 4px;" '||
                 'src="'||apex_util.get_blob_file_src('P2_IMG',ID)||'" height="75" width="75" '||
                 'alt="Product Image" title="Product Image" />')  IMG 
FROM USMAN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:15:29.703

可能是因为您对 blob 列的解码，它产生一个数字，比较一个数字，并获取一个 char 作为默认值。你可以试试

```
DECODE(TO_CHAR(nvl(dbms_lob.getlength(IMG),0)), '0', null, '<img ... />') 
```

# html - 图像显示方向不正确

> ID：12757988
> 
> 赞同：4
> 
> 时间：2012-10-06T08:08:02.607
> 
> 标签：html

为这个令人难以置信的基本问题道歉，但我已经搜索了问题库，老实说我看不到一个可比较的问题（或者至少，如果它是可比较的，我对此太陌生，无法辨别相关性）。

我正在尝试学习如何将图像插入网页。我目前使用的是直接 html 而不是 RoR。虽然我能够在我的 html 文件中嵌入图像并将图像显示在屏幕上，但我似乎无法保持正确的方向 - 本质上，当它应该是肖像时，它会在风景中重现我的 jpg。

我正在使用以下代码：

```
<img src="/Users/user/images/image.jpg" width="259" height="193" alt="Image" /> 
```

它以左手边作为其基础呈现图像；我尝试过切换尺寸，但这只会导致图像的更高版本，仍然坐在应该是左手边的位置。我在 html Dog 页面中看不到任何解释此问题的内容...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-25T23:30:08.330

EXIF 方向信息似乎有问题。我无法为您提供完整的解决方案，但您可以编写一个 PHP 脚本，通过重新排序 JPEG 的像素顺序来应用旋转，然后从 EXIF 中删除方向信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:21:02.210

检查你是否有任何适用于 img 的 CSS 类

尝试仅设置宽度

```
<img src="Users/user/images/image.jpg" width="259" alt="Image" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T08:21:46.827

如果只指定宽度，则高度会根据原始图像的纵横比自动缩放，如果只指定高度，反之亦然。

# amazon-web-services - AWS 运行状况变为 RED 的原因是什么？

> ID：12757989
> 
> 赞同：7
> 
> 时间：2012-10-06T08:08:04.357
> 
> 标签：amazon-web-services

我已将应用程序部署到 AWS 弹性 beantalk。

启动应用程序后，它运行良好。但是 5 分钟后（我每 5 分钟设置一次健康检查），它运行失败。我访问 url 但返回 HTTP 503 错误。

从事件信息中，我只得到健康状态从黄色到绿色的信息。

但是我怎样才能得到详细的信息，我能做些什么来处理这个错误呢？

BTW：我不明白是这个健康状态RED导致应用程序无法启动还是其他一些失败导致应用程序失败，然后健康状态变为RED？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:10:48.797

Elastic Load Balancing 有一个运行状况检查守护程序，用于检查您为 200 范围的 HTTP 状态提供的路径。

如果应用程序有问题，或者它没有返回 2xx 状态代码，或者如果您错误配置了健康检查 URL，则状态将变为 RED。

你可以做两件事来看看发生了什么：

1.  在 Web 浏览器中点击单个实例的主机名——尤其是运行状况检查路径。你看到你所期望的了吗？

2.  SSH 进入实例并检查登录`/var/log`和`/opt/elasticbeanstalk/var/log`. 有没有可以发现的错误？

在不了解您的应用程序、堆栈或容器类型的情况下，这是我能做的最好的事情。

我希望这有帮助！:)