# StackOverflow 问答 13751000-13751999

# asp.net - 通过asp.net将数据插入access数据库

> ID：13751001
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:23:57.983
> 
> 标签：asp.net, ms-access

我正在使用以下代码通过 asp.net (c#) 将数据插入访问数据库，但发现错误 INSERT INTO 语句中的错误..这里的问题只是日期..我们如何将日期转换为这样的格式#dd-mmm -yyyy#。因为它允许这样做，但我没有找到任何方法以这种格式转换日期。

```
String query = "INSERT INTO order(orderDesc, orderType, orderCost, orderQty, orderContent, orderStatus, orderDate, orderShipDate, orderDeposit) VALUES (@desc,@type,@cost,@qty,@content,@status,@date,@shipdate,@deposit)";

        System.Data.OleDb.OleDbCommand cmm = new System.Data.OleDb.OleDbCommand(query,conn);
        cmm.Parameters.AddWithValue("@desc", "");
        cmm.Parameters.AddWithValue("@type", "");
        cmm.Parameters.AddWithValue("@cost", 34);
        cmm.Parameters.AddWithValue("@qty", 2);
        cmm.Parameters.AddWithValue("@content", "");
        cmm.Parameters.AddWithValue("@status", "");
        cmm.Parameters.AddWithValue("@date", DateTime.Now.ToOADate());
        cmm.Parameters.AddWithValue("@shipdate", DateTime.Now.ToOADate());
        cmm.Parameters.AddWithValue("@deposit", 34);
        cmm.ExecuteNonQuery();
        TextBox1.Text = "Success"; 
```

这个静态查询有效：

```
String query = "INSERT INTO [ORDER] (orderDesc, orderType, orderCost, orderQty, orderContent, orderStatus, orderDate, orderShipDate, orderDeposit) VALUES ('uhgu', 'sagu', 34.5, 4, 'dsg', 'dgs', #23-Mar-2323# , #23-Mar-2323#, 23)"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:42:28.890

```
DateTime.Now.ToString("#dd-MMM-yyyy#"); 
```

# php - 在 PHP 中按下“提交”按钮后变量值丢失

> ID：13751002
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:23:58.463
> 
> 标签：php, forms, variables, submit

当第一次运行 Page_B 时（通过单击另一个页面 Page_A 上的提交按钮），变量 SG（从 Page_A 发送过来）的值被很好地打印出来。但是，当我单击 Page_B 上的提交按钮时（如果我错了，请纠正我，再次运行 Page_B），打印空间变空。我得出结论，SG 的内容（值）已因提交操作而被删除。这不是我想要的，因为在 Page_B 上需要这个值（代码尚未编写）。我怎样才能避免这种删除发生？

**这是Page_B的代码：**

```
<html>

<?php

$SG=$_POST['SG'];
print ($SG);

?>

<form action="Page_B.php" method="POST">

<input type="text" name="trekking">
<input type="submit">

</form>

<?php

$T=$_POST['trekking'];
print ($T);

?>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:27:55.990

if you receive e.g. `$_POST['myvalue']` you have to post it through form

```
<form action="" method="post">
    <input type="hidden" name="myvalue" value="<?= $_POST['myvalue'] ?>" />
    <input type="submit" />
</form> 
```

# objective-c - Objective C / iOS：使用 ARC 释放内存（内存泄漏）

> ID：13751009
> 
> 赞同：7
> 
> 时间：2012-12-06T19:24:45.643
> 
> 标签：objective-c, ios, memory-leaks, automatic-ref-counting

我是新手`iOS/Objective-C`，我不正确理解内存的释放。为了测试它，我创建了一个空的`ARC`启用 iPhone-Project 并创建了一个非常简单的测试类：

```
#import "MemTest.h"

@implementation MemTest {

}

-(void) start {
    for (int i = 0; i < 1500000; i++) {
        NSMutableString *myString = [NSMutableString string];

        // The appended string is 2000 characters long in the real test class.
        [myString appendString:@"12345678901234567890123456 <very long>"];

        if (i % 1000 == 0) {
            NSLog(@"i = %d", i);
        }

        myString = nil;
    }
}

@end 
```

我只是在以下位置开始测试`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    MemTest *test = [[MemTest alloc] init];
    [test start];

    ....
} 
```

应用程序（如预期的那样）打印了许多漂亮的数字“i = xy”，但内存使用量随着每次迭代而增加，最终应用程序崩溃：

```
....
2012-12-06 20:17:40.193 MemTestApp[19250:11303] i = 930000
2012-12-06 20:17:40.208 MemTestApp[19250:11303] i = 931000
MemTestApp(19250,0xac63f2c0) malloc: *** mmap(size=16777216) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

所以我的问题是：为什么内存使用量会增长？

我认为通过分配 nil，应该释放内存，当使用`ARC`. 我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T19:28:50.517

一些事情可能会出错：

1.  您可能实际上没有启用 ARC。你应该仔细检查一下。最简单的方法是`-retain`在代码中抛出 a 并确保抛出编译器错误。

2.  ARC 不一定会阻止对象进入自动释放池。如果可以的话，它会试图抓住它，但它不做任何保证。值得注意的是，在`-O0`（无优化）时，它通常不会阻止对象进入自动释放池。这很可能是你正在发生的事情。

3.  即使在更高的优化级别，启用 ARC 的代码仍然不能保证捕获自动释放。

如果你坚持你的循环`@autoreleasepool{}`内部，`for`你会发现内存使用应该消失。或者，`[NSMutableString string]`您可以尝试使用，而不是使用`[NSMutableString new]`，它根本不使用自动释放池*，但在 ARC 代码中的行为应该相同。

* 好吧，`NSMutableString`如果需要，可以在内部免费使用自动释放池

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T19:29:09.503

> 所以我的问题是：为什么内存使用量会增长？

因为你在一个循环中完成了所有的分配。所有这些字符串都是自动释放的对象，一旦顶部的自动释放池被耗尽，它们就会被清理掉，每次运行循环都会发生这种情况。但是您根本没有给运行循环运行的机会，因此自动释放池永远不会耗尽并且您的内存不足。

ARC 让您不必担心管理单个对象，但您仍然需要了解[Objective-C 中的内存管理是如何工作的](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)，因为 ARC 根据相同的规则工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:31:22.903

该`[NSMutableString string]`方法返回一个“自动释放”对象。这意味着对象被放入“自动释放”池中。当池被耗尽时，对象将被释放（并且，如果没有更多的强引用，它将被释放）。自动释放池在运行循环结束时自动排空（就在系统进入睡眠等待另一个事件之前）。

当您编写一个可能分配大量自动释放对象的循环时，您可能需要管理自己的自动释放池：

```
-(void) start {
    for (int i = 0; i < 1500000; i++) {
        @autoreleasepool {
            NSMutableString *myString = [NSMutableString string];
            ...
        }
    }
} 
```

该代码在每次循环迭代开始时创建一个新的自动释放池，并在每次循环迭代结束时将其排出。因此，您创建的每个字符串都将在循环结束时释放，并且在您的示例代码中，将被释放，因为没有其他东西保留它。

有关更多信息，请阅读[*高级内存管理编程指南*](http://developer.apple.com/library/ios/#Documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-CJBFBEDI)，尤其是“使用自动释放池块”一章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:31:27.480

我不认为仅仅因为你的项目有 ARC 就以不同的方式释放自动释放的对象。实际上，自动释放池的工作方式完全相同：因为您在循环内分配了很多对象，所以池在迭代时永远不会耗尽。

You should try by forcing an new `autoreleasepool` directly inside the loop body to see if this fixes your problem. Of course this could be overkill, you could try by splitting the loop in two nested loops to have just an autorelease pool from time to time, eg

```
for (int i = 0; i < TOTAL_STEPS; ++i) {
  @autoreleasepool {
    for (int j = 0; j < STEP_SIZE; ++j) {
      ..
    }
  }
} 
```

I don't even think that setting a local variable to `nil` could make the difference in your situation, since it's a variable local to the scope of the loop body, the compiler already knows you couldn't use it anywhere else.

# python - 使用 Python 从文件中提取符号之间的文本块

> ID：13751014
> 
> 赞同：0
> 
> 时间：2012-12-06T19:24:54.203
> 
> 标签：python, regex, extract

我有一个看起来像这样的 txt 文件：

```
=-=-=-=-=-=-=-=-=-=-=\n

data report

=-=-=-=-=-=-=-=-=-=-=\n

\n

\n

=-=-=-=-=-=-=-=-=-=-=\n

data report

=-=-=-=-=-=-=-=-=-=-=\n

\n

\n 
```

...等等

我希望能够提取每个数据报告并对其执行各种操作（例如打印一个特定的 # 作为我拥有的其他字典中的键值，将其写入另一个文件等）。我该怎么做呢？我一直在尝试学习正则表达式来提供帮助，但是由于我是 python 新手，所以这很令人困惑，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:55:48.993

您可以将整个文件读入一个字符串，在 =-=-=... 字符串上拆分，然后从报告中去除前导和尾随空格，如下所示：

```
s = open(filename).read()
reports = [x.strip() for x in s.split('=-=-=-=-=-=-=-=-=-=-=\n')] 
```

# android - 在多选列表视图中选择一个项目会选择多个项目

> ID：13751015
> 
> 赞同：1
> 
> 时间：2012-12-06T19:24:57.873
> 
> 标签：android, android-contacts, listactivity

我正在尝试制作具有多项选择的联系人选择器。我可以加载所有带有复选框的联系人。但是，当我选择一个项目时，我的列表中会自动选择每第 8 个项目。此外，当我向上和向下滚动时，所有选择都会自行更改。

有人知道这有什么问题吗？这是我的联系人选择器类

```
public class HomeActivity extends ListActivity {

    public void onCreate(Bundle paramBundle) {
        super.onCreate(paramBundle);

        Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                android.R.layout.simple_list_item_multiple_choice, 
                cursor, 
                new String[] {ContactsContract.Contacts.DISPLAY_NAME}, 
                new int[] { android.R.id.text1},0);

        setListAdapter(adapter);    
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {        
        CheckedTextView textView = (CheckedTextView)v;
        textView.setChecked(!textView.isChecked());
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:53:48.667

发生这种情况是因为`ListView`. 尝试在您中添加以下内容`onCreate()`。

```
getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

# web-applications - 如何为 Clojure Noir Web 应用程序构建 war 文件？

> ID：13751016
> 
> 赞同：5
> 
> 时间：2012-12-06T19:25:00.350
> 
> 标签：web-applications, clojure, leiningen, noir

我能够使用这些命令从该网站上的指令生成和运行示例 Web 应用程序

[https://github.com/ibdknox/lein-noir](https://github.com/ibdknox/lein-noir)

```
lein new noir my-project-name
lein run 
```

（我在 Java 1.7.0_09 Java HotSpot(TM) Client VM 上使用 Leiningen 2.0.0-preview10）

入门 Web 应用程序运行正常，但我想生成可以手动部署到我的应用程序服务器 (Websphere) 的 war 文件。

为 Noir 项目生成 war 文件需要 Leingen 2 的什么命令或配置？

澄清一下，这个命令“lein new noir webpoc2”用这个.clj文件生成一个noir项目

```
(defproject webpoc1 "0.1.0-SNAPSHOT"
            :description "FIXME: write this!"
            :dependencies [[org.clojure/clojure "1.4.0"]
                           [noir "1.3.0-beta3"]]
            :main webpoc1.server) 
```

如果我将 Ring 添加到 cl 文件

```
:ring {
                   :handler webpoc1.server/handler

} 
```

，然后运行 ​​lein ring uberwar，我明白了：

```
Exception in thread "main" java.lang.RuntimeException: No such var: webpoc1.server/handler, compiling:(
/servlet.clj:1)
        at clojure.lang.Compiler.analyze(Compiler.java:6281)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler$InvokeExpr.parse(Compiler.java:3497)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6457)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler$BodyExpr$Parser.parse(Compiler.java:5618)
        at clojure.lang.Compiler$FnMethod.parse(Compiler.java:5054)
        at clojure.lang.Compiler$FnExpr.parse(Compiler.java:3674)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6453)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6443)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler$InvokeExpr.parse(Compiler.java:3548)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6457)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler$InvokeExpr.parse(Compiler.java:3497)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6457)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler$BodyExpr$Parser.parse(Compiler.java:5618)
        at clojure.lang.Compiler$FnMethod.parse(Compiler.java:5054)
        at clojure.lang.Compiler$FnExpr.parse(Compiler.java:3674)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6453)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6443)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.access$100(Compiler.java:37)
        at clojure.lang.Compiler$DefExpr$Parser.parse(Compiler.java:518)
        at clojure.lang.Compiler.analyzeSeq(Compiler.java:6455)
        at clojure.lang.Compiler.analyze(Compiler.java:6262)
        at clojure.lang.Compiler.analyze(Compiler.java:6223)
        at clojure.lang.Compiler.compile1(Compiler.java:7030)
        at clojure.lang.Compiler.compile1(Compiler.java:7025)
        at clojure.lang.Compiler.compile(Compiler.java:7097)
        at clojure.lang.RT.compile(RT.java:387)
        at clojure.lang.RT.load(RT.java:427)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.core$load$fn__4890.invoke(core.clj:5415)
        at clojure.core$load.doInvoke(core.clj:5414)
        at clojure.lang.RestFn.invoke(RestFn.java:408)
        at clojure.core$load_one.invoke(core.clj:5227)
        at clojure.core$compile$fn__4895.invoke(core.clj:5426)
        at clojure.core$compile.invoke(core.clj:5425)
        at user$eval3.invoke(NO_SOURCE_FILE:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6500)
        at clojure.lang.Compiler.eval(Compiler.java:6501)
        at clojure.lang.Compiler.eval(Compiler.java:6477)
        at clojure.core$eval.invoke(core.clj:2797)
        at clojure.main$eval_opt.invoke(main.clj:297)
        at clojure.main$initialize.invoke(main.clj:316)
        at clojure.main$null_opt.invoke(main.clj:349)
        at clojure.main$main.doInvoke(main.clj:427)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:419)
        at clojure.lang.AFn.applyToHelper(AFn.java:163)
        at clojure.lang.Var.applyTo(Var.java:532)
        at clojure.main.main(main.java:37)
Caused by: java.lang.RuntimeException: No such var: webpoc1.server/handler
        at clojure.lang.Util.runtimeException(Util.java:170)
        at clojure.lang.Compiler.resolveIn(Compiler.java:6740)
        at clojure.lang.Compiler.resolve(Compiler.java:6710)
        at clojure.lang.Compiler.analyzeSymbol(Compiler.java:6671)
        at clojure.lang.Compiler.analyze(Compiler.java:6244)
        ... 60 more
Subprocess failed 
```

由于我是 Noir（和 Clojure）的新手，所以我很想弄清楚这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:55:05.537

为其他新手回答我的问题/记录我在**leingen noir ring 依赖项中的艰辛。**您可以使用“lein new noir...”命令生成一个 noir 项目，但如果您想要一个 war 文件，请按如下方式更新这些文件。

**项目.clj**

```
(defproject noir3 "0.1.0-SNAPSHOT"
            :description "FIXME: write this!"
            :dependencies [[org.clojure/clojure "1.4.0"]
                           [noir "1.3.0-beta10"]
                           [hiccup "1.0.2"]
                           [cheshire "4.0.3"]
                           ]
            :plugins [[lein-ring "0.7.5"]]
            :ring {:handler noir3.server/handler}            

            :main noir3.server) 
```

**服务器.clj**

```
(ns noir3.server
  (:require [noir.server :as server]))

;;(server/load-views-ns 'noir3.views)

(server/load-views "src/noir3/views/")

(def handler (server/gen-handler {:mode :dev
                                  :ns 'noir3}))

(defn -main [& m]
  (let [mode (keyword (or (first m) :dev))
        port (Integer. (get (System/getenv) "PORT" "8080"))]
    (server/start port {:mode mode
                        :ns 'noir3}))) 
```

然后，运行以下

1.  “lein run”（检查您的页面是否可访问），
2.  “lein ring server”（检查您的页面是否可访问），
3.  最后是“lein ring war”——你应该在目标目录中看到 war 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:13:37.490

您是否声明了`handler`您`webpoc1.server`所引用的？像这样的东西：

```
(def handler
  (server/gen-handler {:mode :prod
                       :ns *ns*})) 
```

[http://www.webnoir.org/tutorials/others/](http://www.webnoir.org/tutorials/others/)提供了如何使用 Noir 和 Ring 的说明。

# javascript - 对象文字表示法 - 是否应该使用 new

> ID：13751018
> 
> 赞同：1
> 
> 时间：2012-12-06T19:25:20.560
> 
> 标签：javascript

```
function foo() {
    return {a:9};
}

var bar = foo();
bar.a //returns 9 
```

或者

```
function foo() {
    return {a:9};
}

var bar = new foo(); 
bar.a // returns 9 
```

据我所知 new 没有与对象文字表示法一起使用，但是 new 怎么会与它一起使用呢？另外，为什么原型可以用新对象访问，但不能用对象文字符号访问？

编辑：

我现在明白了，如果有其他人偶然发现这个问题/问题，这可能会帮助你理解它：

```
function foo() {
    this.a = "LOL";
    return "WTF";
};
var bar = new foo(); // bar = [Object object]
var c = foo(); // c = "WTF"
window.a // "LOL" 
```

另请阅读接受的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T19:27:50.953

在这种情况下使用与您返回的内容`new`无关，而是. 使用,将是对 foo 内部的一个实例的引用。没有新的，将是全局的（可能）`this``foo()``new``this``foo()``this``window`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T19:29:55.570

它之所以有效，是因为如果您从作为构造函数调用的函数显式返回非原始类型（使用`new`），则返回该对象而不是创建的对象。您没有以任何方式在函数中使用创建的对象，因此`new`是多余的。

在这里您可以看到它不适用于原语：

```
function test() {
    return "string"; //This is not returned when called with new, because it's primitive
}

var a = new test();
a == "string" // false

function test() {
    return new String("string"); //This is returned when called with new, because it's an object, like {}
}

var b = new test();
b == "string" //true 
```

我正在使用`==`和`new String`用于演示目的。你不应该`new String`在实践中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:27:03.963

`{}`只是一个捷径`new Object()`

# javascript - AppEngine box2djs 在本地非常慢，部署时一切都很好

> ID：13751022
> 
> 赞同：0
> 
> 时间：2012-12-06T19:25:37.060
> 
> 标签：javascript, performance, google-app-engine, google-chrome, box2d

我一直在 appengine 上搞砸 python，用 pycharm 在我的 Windows 机器上设置了所有东西。现在我正在开发这个 box2djs 游戏，除了由 appengine 提供服务外，它目前与 appengine 本身没有任何关系。

问题是，box2d world.step() 函数每次通过它时都会挂起几秒钟（在 Firefox 中工作正常）。当我部署到appspot.com 时，它在chrome（和firefox）中运行良好，没有代码更改。当我将它作为文件：//*.html 在本地打开时，它也可以正常工作。

似乎应用程序引擎与它有关，但我不知道为什么或什么，有什么想法吗？

更新循环是一个简单的更新函数，它执行 world.Step(1/60,10,10); 每次使用 window.requestAnimationFrame() 触发时；

**更新：**

事实证明，如果我将所有内容都作为静态服务，它可以从 appengine（本地）正常工作，但我使用 jinja2 模板输出包含 javascript 导入的 index.html。所以好像是哪里出了问题，虽然还是不知道...

# c++ - 未知错误，调试器只给我一个内存地址

> ID：13751027
> 
> 赞同：0
> 
> 时间：2012-12-06T19:26:18.110
> 
> 标签：c++, debugging, exception-handling

我正在尝试制作一个简单的快速排序算法，每当我运行它时，它都会引发一个我无法调试的异常。错误显示“Final.exe 中 0x00D01367 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000000。” 我不能使用`s[i] = value;`并且应该使用`s.push_back(value);`吗？我以前使用过前者，没有任何问题，所以我现在不知道为什么会出错。

```
#include <iostream>
#include <vector>
#include <list>
#include <cassert>
using namespace std;

typedef unsigned int uint;

uint partition(uint low, uint high, vector<double> & s)
{
uint i; //first index for partitioning
uint j; //second index for partitioning
uint pivotpoint; //index of the partition
double pivotvalue; //value at the pivot
double swapvalue; //placeholder variable for the swap

pivotvalue = s[low];
j = low;
for (i = (low+1); i<=high; i++)
{
    if (s[i] < pivotvalue)
    {
        j++;
        swapvalue = s[i];
        s[i] = s[j];
        s[j] = swapvalue;
    }
}
pivotpoint = j;
swapvalue = s[low];
s[low] = s[pivotpoint];
s[pivotpoint] = swapvalue;

return pivotpoint;
}

void quicksort(uint low, uint high, vector<double> & s)
{
uint pivotpoint;

if(high>low)
{
    pivotpoint = partition(low,high,s);

    if(pivotpoint != 0)
    {
        quicksort(low, pivotpoint-1, s);
    }
    if(pivotpoint != high)
    {
        quicksort(pivotpoint+1,high, s);
    }
}
}

int main( /*int argc, char* argv[] */)
{/*
  if( argc != 2 )
  {
cout << "Usage: ./filename.txt" << endl;
cout << "filename.txt should be a file with the items to be sorted" << endl;
exit( 2 );
  }
  assert(argc == 2)
  {
  }
  */
vector<double> s;
s[0] = 1.1;
s[1] = 2.4;
s[2] = 7.1;
s[3] = 5.4;
s[4] = 2.5;
s[5] = 1.2;
s[6] = 0.9;
quicksort(0,s.size(),s);
for(uint i = 0; i<s.size(); i++)
{cout << s[i] << endl;}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:28:28.333

One immediate problem is with your vector initialization:

```
vector<double> s;
s[0] = 1.1;
s[1] = 2.4;
s[2] = 7.1;
s[3] = 5.4;
s[4] = 2.5;
s[5] = 1.2;
s[6] = 0.9; 
```

All of the above `s[]` assignments are out of bounds since the vector has size zero.

The easiest fix is perhaps to change the first line to:

```
vector<double> s(7); // set the size at construction 
```

In C++11, you can replace the whole thing with:

```
vector<double> s{1.1, 2.4, 7.1, 5.4, 2.5, 1.2, 0.9}; 
```

# c# - SharpGL 对象透明度

> ID：13751030
> 
> 赞同：1
> 
> 时间：2012-12-06T19:26:32.340
> 
> 标签：c#, opengl

我正在为 Visual C# 使用 SharpGL 库。我想为我正在绘制的对象添加透明度。我正在创建一个这样的球体。

```
SharpGL.SceneGraph.Quadrics.Sphere sphere = new SharpGL.SceneGraph.Quadrics.Sphere(); 
```

然后我创建一个材质并用 alpha 值设置它的色彩。接下来，我将新材料设置为球体。

```
SharpGL.SceneGraph.Assets.Material material1 = new SharpGL.SceneGraph.Assets.Material();
material1.Ambient = Color.FromArgb(100, Color.Red);
sphere.Material = material1; 
```

即使我更改了 alpha 值，球体的透明度也不会改变。

# c# - Chromium Build 18 总是得到 FileReader NOT_READABLE_ERR

> ID：13751038
> 
> 赞同：1
> 
> 时间：2012-12-06T19:27:31.543
> 
> 标签：c#, javascript, chromium, filereader

我正在运行一个 C# 应用程序。这个 C# 应用程序嵌入了一个 Chromium（build 18）浏览器，它指向一个在 http 上运行的远程站点。这是一个 Backbone/Require 站点，所以它是 99% 的 JavaScript。

除了 FileReader 之外，此站点上的所有内容都与 Chrome 内部的工作方式完全相同。无论我们尝试上传什么，我们都会到达 NOT_READABLE_ERR。

我知道总是会触发 NOT_READABLE_ERR 的 build 14 错误。这已在版本 18 中得到纠正（据称？）。

我也尝试启用 --file-allow-file-access 标志。那没有帮助。

相关JS代码如下。抱歉，我无权访问 C# 代码，但如果有任何我可能陷入的陷阱，我可以在那里提出更改建议。我怀疑 C# 没问题，因为[http://www.google.com/imghp](http://www.google.com/imghp)在我们的嵌入式 Chromium 浏览器中运行良好。

一些注意事项： 文件未锁定。我们尝试了多种文件和文件类型。C# 应用程序在本地运行（Windows 客户端）并嵌入了指向 http 站点的 Chromium 浏览器。

```
// called from <input type='file'> change event
fileSelected: function(e) {
    this._processFile(e.target.files[0]);
},

_processFile: function(filehandle) {
    var reader = new FileReader();

    reader.onload = function(evt) {
        console.log('done loading', evt);
    };

    reader.onprogress = function(evt) {
        console.log("on progress!");
        if(evt.lengthComputable) {
            console.log("loaded: " + evt.loaded);
            console.log("total: " + evt.total);
        }
    };

    reader.onloadstart = function(evt) {
        console.log("on load start!");
    };

    reader.onerror = function(evt) {
        switch(evt.target.error.code) {
            case evt.target.error.NOT_FOUND_ERR:
                console.log('File Not Found!');
                break;
            case evt.target.error.NOT_READABLE_ERR:  // we always arrive here, no matter what type of file.  img, pdf, etc.  files are not locked.
                console.log('File is not readable');
                break;
            case evt.target.error.ABORT_ERR:
                break; // noop
            default:
                console.log('An error occurred reading this file.');
        };
    };

    reader.onabort = function() {
        console.log("upload aborted.");
    };

    reader.readAsDataURL(filehandle);
} 
```

# php - 为“Contenteditable”表格单元格模拟“OnChange”的方法

> ID：13751049
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:28:13.907
> 
> 标签：php, javascript, html, contenteditable

> **可能重复：**
> [当 contenteditable 改变时触发事件](https://stackoverflow.com/questions/6256342/trigger-an-event-when-contenteditable-is-changed)

我的页面上有一个表格（使用 PHP 生成），我已为其启用了“Contenteditable”。用户加载表格后，他们可以单击任何表格单元格并在本地更改值。我想将一个函数绑定到表格单元格上，以便本地的任何更改都会被推送回服务器。执行此操作的自然方法是将“OnChange”事件绑定到每个生成的表格单元格。但由于我不使用传统的 HTML 表单，因此不能选择“OnChange”。有没有办法让我在表格的每个数据单元格上模拟“OnChange”事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:28:33.920

你可以试试我曾经写过的一个小库：[OnChange](https://github.com/ninov/onChange) on Github 然后你可以试试这个：

```
OnChange.set("document.queryString('#tablecell').innerHTML", function() {
    //AJAX-stuff here. new content is in var 'newval'.
}); 
```

# jquery - 淘汰延迟加载和循环

> ID：13751063
> 
> 赞同：1
> 
> 时间：2012-12-06T19:29:26.787
> 
> 标签：jquery, json, knockout.js, lazy-loading

我正在尝试使用一个获取研究列表的主要 json 调用来构建树状结构。由此，它在另一个 json 调用中使用了 studyId。此查询并不总是有数据。我如何处理未定义的？但是，这可能不是我的主要问题，因为我无法让它正常工作。我会密切关注这篇文章，所以请随时提出问题，我应该尽快回复。谢谢！

//================================================= =====\

```
function StudyInfo(data) {
    this.StudyId = ko.observable(data.StudyId);
    this.Name = ko.observable(data.Name);
    this.Title = ko.observable(data.Title);
    this.Samples = ko.observableArray([]); // this field is not mapped in lazy load.
}
function SampleInfo(data) {
    this.Name = ko.observable(data.Name);
}

function viewModel() {
    var self = this;
    self.Studies = ko.observableArray([]);

    var request = $.getJSON("/api/studies");
    request.done(function (data) {
        var mappedStudies = $.map(data, function (item) {
            // now get study
            var study = new StudyInfo(item);
            study.Samples(self.getSamples(study.StudyId));
            return study;
        });
        self.Studies(mappedStudies);
    });
    request.fail(function (data) {
        // error stuff not important in example
    });
    self.getSamples = function (StudyId) {
        var request = $.getJSON("/api/samples/"+StudyId());
        request.done(function (data) {
            var mappedSamples = $.map(data, function (item) {
                var sample = new SampleInfo(item);
                return sample;
            });
            return mappedSamples;
        });
        request.fail(function (data) {
            // error stuff
        });
    };
} 
```

//================================================= =====\

```
<!--- list that resembles a tree -->
<ul data-bind="foreach: Studies()">
     <li><a><span data-bind="text: Name"></span></a>
          <ul data-bind="foreach: Samples">
                <li><a><span data-bind="Title"></span></a>
          </ul>
     </li>
<ul> 
```

//================================================= =====\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:52:55.227

根据 antishok 的评论，为您的视图模型尝试此操作：

```
function viewModel() {
  var self = this;
  self.Studies = ko.observableArray([]);

  $.getJSON("/api/studies", function(allStudiesData) {

    $.each(allStudiesData, function (index, studyData) {

        var study = new StudyInfo(studyData);

        // The getJSON call returns immediately and the $.each loop will
        // loop around to the next study in allStudiesData.  Later on, 
        // each time the web server returns data to us from each of the samples
        // calls, the function(allSamplesData) will be called
        $.getJSON("/api/samples/"+studyData.StudyId, function(allSamplesData) {

            var mappedSamples = $.map(allSamplesData, function (sampleData) {
                var sample = new SampleInfo(sampleData);
                return sample;
            });
            study.Samples(mappedSamples);

            // If you put this push call outside the $.getJSON, the push would
            // happen before the mappedSamples were added to the study
            self.Studies.push(study);                    
        });                

    });

  });

  return self;
} 
```

​</p>

但是，我会建议一种不同的方法。我建议将所有这些数据放在服务器上，这样您就可以对 /api/studieswithsamples 进行一次调用并获取大量 JSON。然后你的代码可以被简化，但真正的好处是它只需要对服务器进行一次 HTTP 调用就可以取回你的所有代码。这可能有助于改善页面加载时间。

PS不要忘记从视图模型中返回自我。

# ruby - Rails 根据操作隐藏表单字段

> ID：13751064
> 
> 赞同：7
> 
> 时间：2012-12-06T19:29:27.973
> 
> 标签：ruby, ruby-on-rails-3, forms

我正在制作一个包含多个字段的表单，其中一个应该具有默认值，如果正在创建资源，则该值不可见。但是，如果正在编辑该字段，则应显示该字段。所以我尝试这样的事情：

```
<%= form_for(@task) do |f| %>
    <div class="field" id="v_field">
    <%= f.label :v_field, "Always visible field." %>
    <%= f.text_field :status %>
  </div>
  <% if params[:action] != "new" %>
    <div class="field" id="default_field">
    <%= f.label :default_field, "Default field (should be invisible for new resources only)." %>
    <%= f.text_field :status %>
  </div>
  <% end
<% end %> 
```

但它不起作用。我也尝试像这样更改控制器设置：

```
format.html { :except => [:default_field] } 
```

但它不起作用。

请告诉我，在这种情况下我应该使用什么比较？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T19:56:12.363

如果您遵循正常的 Rails 约定，您将通过任务控制器中的`new`or方法显示此表单。`edit`

对于新的，创建一个新的（空）任务，对于编辑，从数据库中获取一个现有的。

然后一个简单的测试是看任务是否`id`还有。

```
<% if @task.id %>
  ...
<% end %> 
```

您最好查看您正在操作的对象的状态，而不是查看用户为到达那里所采取的操作。

# ios - Monotouch combine TabBar and Toolbar

> ID：13751068
> 
> 赞同：0
> 
> 时间：2012-12-06T19:29:47.303
> 
> 标签：ios, xamarin.ios, monodevelop, uisplitviewcontroller, toolbar

Hy community,
I have a question: I want to have a toolbar which is at the top of all three tabviews.
If I add the toolbar in the interface builder to the splitviewcontroller, the toolbar isn't showed. Here is a screenshot of my ui:

[http://www.abload.de/img/bildschirmfoto2012-12ato6r.png](http://www.abload.de/img/bildschirmfoto2012-12ato6r.png)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:48:57.947

我有同样的问题。我尝试了很多不同的东西，但没有找到解决方案。即使您将标签栏向上移动 1 个像素并且没有将其绑定到屏幕底部，它也不会显示。如果将其添加到 xcode 中或以编程方式添加，则没有区别。我认为这与Apple的设计原则有关？

顺便说一句：[将标签栏移动到屏幕顶部](https://stackoverflow.com/questions/6684425/move-tab-bar-to-top-of-screen)

所以我最终改为编程一个 SegmentedControl。

# ruby - 无法使用 Rubinius 2.0.0 gem 安装赛璐珞

> ID：13751069
> 
> 赞同：1
> 
> 时间：2012-12-06T19:29:50.983
> 
> 标签：ruby, rvm, rubinius, celluloid

我已将 rvm 设置为

```
# .rvmrc
rvm use rbx-2.0.0-rc1 
```

它正确设置了版本

```
$ ruby -v
rubinius 2.0.0rc1 (1.8.7 release 2012-11-02 JI) [x86_64-apple-darwin12.2.1] 
```

当我尝试

```
$ gem install celluloid -v '0.12.3' 
```

我得到错误

```
ERROR:  Error installing celluloid:
celluloid requires Ruby version >= 1.9.2. 
```

有什么问题？我知道赛璐珞支持 Rubinius，因为它是推荐的解释器。[https://github.com/celluoid/赛璐珞](https://github.com/celluloid/celluloid)

[更新：感谢这个链接https://gist.github.com/4123305](https://gist.github.com/4123305)我明白了

我需要通过 -X19 标志

```
ruby -X19 -S bundle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:52:43.537

您可以在编译级别强制执行此操作：

```
rvm install rbx --1.9 
```

现在所有 rbx 的使用都将默认在 1.9 模式下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:42:29.550

[感谢这个链接https://gist.github.com/4123305](https://gist.github.com/4123305)我想通了

我需要通过 -X19 标志

```
ruby -X19 -S bundle 
```

# c++ - 错误 LNK2019 ARuco 和 OpenCV VS2010 c++

> ID：13751076
> 
> 赞同：4
> 
> 时间：2012-12-06T19:30:04.933
> 
> 标签：c++, visual-studio-2010, opencv, lnk2019

我是 OpenCV e VS2010 的新手。我在 windows7 x64 上工作。我想检测一个标记，所以我从这个[站点](http://sourceforge.net/projects/aruco/)下载了 ARuco 库：我写了这个简单的代码：

```
#include <iostream>
#include <stdio.h>
#include "C:/Users/Cristina/Desktop/OpenCV/dep/aruco/src/aruco.h"
#include "C:/Users/Cristina/Desktop/OpenCV/dep/aruco/src/cvdrawingutils.h"
#include "C:/Users/Cristina/Desktop/OpenCV/dep/aruco/src/cameraparameters.hpp"
#include "C:/Users/Cristina/Desktop/OpenCV/opencv/include/opencv/cv.h"
#include "C:/Users/Cristina/Desktop/OpenCV/opencv/include/opencv/highgui.h"
#include "C:/Users/Cristina/Desktop/OpenCV/opencv/modules/imgproc/include/opencv2/imgproc/imgproc.hpp"
#include "C:/Users/Cristina/Desktop/OpenCV/opencv/modules/highgui/include/opencv2/highgui/highgui.hpp"
#include "C:/Users/Cristina/Desktop/OpenCV/opencv/modules/core/include/opencv2/core/core.hpp"

using namespace cv;
using namespace aruco;

int main() {

    aruco::CameraParameters CamParam;
    aruco::MarkerDetector MDetector;
    vector <Marker> Markers;
    cv::Mat img;

    img = imread("prova marker", 0);

    cv::namedWindow("originale", 1);
    cv::namedWindow("risultato", 1);

    cv::Mat risultato;

    img.copyTo(risultato);

    MDetector.detect(img, Markers, CamParam, -1);

    for (int i=0; i< Markers.size(); i++) {

        Markers[i].draw(risultato, Scalar(0,0, 255));
    }

    cv::imshow("originale", img);
    cv::imshow("risultato", risultato);
    waitKey(0);

return 0;
} 
```

当我编译这个时，我得到这个错误：

```
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: __thiscall aruco::MarkerDetector::~MarkerDetector(void)" (??1MarkerDetector@aruco@@QAE@XZ) non risolto nella funzione _main
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: void __thiscall aruco::Marker::draw(class cv::Mat &,class cv::Scalar_<double>,int,bool)const " (?draw@Marker@aruco@@QBEXAAVMat@cv@@V?$Scalar_@N@4@H_N@Z) non risolto nella funzione _main
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: void __thiscall aruco::MarkerDetector::detect(class cv::Mat const &,class std::vector<class aruco::Marker,class std::allocator<class aruco::Marker> > &,class aruco::CameraParameters,float,bool)" (?detect@MarkerDetector@aruco@@QAEXABVMat@cv@@AAV?$vector@VMarker@aruco@@V?$allocator@VMarker@aruco@@@std@@@std@@VCameraParameters@2@M_N@Z) non risolto nella funzione _main
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: __thiscall aruco::CameraParameters::CameraParameters(class aruco::CameraParameters const &)" (??0CameraParameters@aruco@@QAE@ABV01@@Z) non risolto nella funzione _main
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: __thiscall aruco::MarkerDetector::MarkerDetector(void)" (??0MarkerDetector@aruco@@QAE@XZ) non risolto nella funzione _main
1>main.obj : error LNK2019: riferimento al simbolo esterno "public: __thiscall aruco::CameraParameters::CameraParameters(void)" (??0CameraParameters@aruco@@QAE@XZ) non risolto nella funzione _main
1>C:\Users\Cristina\Desktop\OpenCV\Progetti\MIEI PROGETTI\aruco marker\Debug\aruco marker.exe : fatal error LNK1120: 6 esterni non risolti
========== Compilazione: 0 completate, 1 non riuscite, 0 aggiornate, 0 ignorate ========== 
```

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:47:26.670

您需要在 Visual Studio 上编译 Aruco 来构建库。

之后，将生成的 lib 文件复制到 Visual Studio 的正确库文件夹中。

最后，编辑项目的属性并将库的名称添加为链接器的依赖项。

# c++ - 显示 mongodb 索引内容

> ID：13751078
> 
> 赞同：4
> 
> 时间：2012-12-06T19:30:16.277
> 
> 标签：c++, mongodb, indexing

建立索引后，我想查看索引的内容。以 MonboDB 文档中的示例为例：

```
{ "_id" : ObjectId("..."),
"name" : "Warm Weather",
"author" : "Steve",
"tags" : [ "weather", "hot", "record", "april" ] } 
```

然后标签字段上的索引将具有以下值：

```
{ tags: "weather" }
{ tags: "hot" }
{ tags: "record" }
{ tags: "april" } 
```

所以，我想运行一个命令，比如说，`db.weather._tags_.find()`显示所述值。

**问：**这样的shell命令存在吗？或者有没有办法在 C++ 驱动程序中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:40:17.767

@user1883451

您给出的示例是哈希索引，mongodb 内部存储 B-Tree 索引。

因此，您给出的示例并不总是正确的，在某些情况下，mongodb 最终会以这种方式存储，但并非总是如此。[用过于简单的方式理解它很好]

1.  shell 是客户端，它没有显示“关于如何存储索引的内部”
2.  驱动程序主要与服务器交互（过于简单），它也不知道如何存储东西。

A)如何查看mongodb索引

最好的开始是获取 mongo 源代码并开始使用它。

[https://github.com/mongodb/mongo/tree/master/src/mongo/db/](https://github.com/mongodb/mongo/tree/master/src/mongo/db/)带有索引的文件 * [https://github.com/mongodb/mongo/tree/master/src/mongo/db/](https://github.com/mongodb/mongo/tree/master/src/mongo/db/)带有索引 的文件树*

B）我假设您只是为了学习目的而尝试这样做。如果您有任何特定的查询，为什么要执行该查询。

PS：1.关于内部和源代码的代码更多，文档更少。2.可以加入[http://groups.google.com/group/mongodb-dev](http://groups.google.com/group/mongodb-dev)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:46:38.957

> > @ranman 是的，我使用的。我想看看索引本身，看看为什么没有使用查询。我喜欢亲身体验这些位、字节和字符，以增加我对幕后发生的事情的理解。– user1883451 1 小时前

在这种情况下，您应该查看查询优化器和相关的内部结构。

# java - 将像素转换为 mdpi 和 hdpi 屏幕的 dpi

> ID：13751080
> 
> 赞同：0
> 
> 时间：2012-12-06T19:30:22.373
> 
> 标签：java, android, dpi, floating-accuracy

我正在使用我在另一个线程上找到的在 mdpi 屏幕上运行良好的代码：

```
public static float convertDpToPixel(float dp,Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi/160f);
        return px;
    }

public static float convertPixelsToDp(float px,Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float dp = px / (metrics.densityDpi /160f);
        return dp;

    } 
```

在 hdpi 屏幕上使用它时，尝试增加文本大小时，文本大小会跳跃。我假设它是因为它在划分密度Dpi时使用硬编码的160f？有没有动态的方法来判断是160dpi还是240dpi？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:11:39.017

试试这个方法：

```
public float dpToPx(float dp, Context context) {
    float density = context.getResources().getDisplayMetrics().density;
    return dp * density;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:50:20.300

从[文档](http://developer.android.com/reference/android/util/DisplayMetrics.html)：

```
metrics.density 
```

是您正在寻找的比例因子。

> 这是密度无关像素单元的比例因子，其中一个 DIP 是大约 160 dpi 屏幕（例如 240x320、1.5"x2" 屏幕）上的一个像素，提供系统显示的基线。因此，在 160dpi 屏幕上，此密度值为 1；在 120 dpi 屏幕上为 0.75；等等

# java - Assigning a @CollectionId to and @ElementCollection

> ID：13751081
> 
> 赞同：4
> 
> 时间：2012-12-06T19:30:22.963
> 
> 标签：java, hibernate

I have a class which im trying to implement, (similar to the example in 'Java Persistence with Hibernate' 6.3.3)

```
public class Property
{
    ...

    @ElementCollection(fetch=FetchType.EAGER)
    @CollectionId(
        columns=@Column(name="Property_image_id"),
        type=@Type(type="long"),
        generator="native"
    )
    private Collection<FileAttachment> images = new ArrayList<FileAttachment>();

    ...
} 
```

The unit test fails throwing the following exception:

```
java.lang.ClassCastException: org.hibernate.id.IdentifierGeneratorHelper$2 
    cannot be cast to java.lang.Long 
```

Im not too sure about the best value for 'generator', and I assume this will affect the outcome.

Also when i get this working, can the FileAttachment object access the Property_image_id? And how do you assign it to a property, since its defined in the Property class?

What I'd like is for the Property_images table to have a composite key [Property_id-Image_index], where Image_index starts at 1 for each new Property_id but I have no idea how to implement this using @ElementCollection and @CollectionId with a generator. Maybe i have to have FileAttachment as an @Entity instead of @Embeddable, but id rather not as its only used inside the Property class.

Cheers! NFV

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:47:51.270

来自[Java 持久性 Wikibook](http://en.wikibooks.org/wiki/Java_Persistence/ElementCollection)：

> JPA 2.0 规范没有提供在 Embeddable 中定义 Id 的方法。但是，要删除或更新 ElementCollection 映射的元素，通常需要一些唯一键。否则，在每次更新时，JPA 提供者都需要从实体的 CollectionTable 中删除所有内容，然后将值插入回来。因此，JPA 提供者很可能会假设 Embeddable 中所有字段的组合是唯一的，并结合外键 (JoinColumn(s))。但是，如果 Embeddable 很大或很复杂，这可能效率低下，或者根本不可行。一些 JPA 提供程序可能允许在 Embeddable 中指定 Id，以解决此问题。请注意，在这种情况下，ID 只需要对集合而不是表是唯一的，因为包含外键。有些人可能还允许为此使用 CollectionTable 上的唯一选项。否则，如果您的 Embeddable 很复杂，您可以考虑将其设为实体并改用 OneToMany。

我认为您的`IMAGE_INDEX`要求可以通过[OrderColumns](http://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/OrderColumns)来解决：

```
@ElementCollection(fetch=FetchType.EAGER)
@OrderColumn(name = "IMAGE_INDEX")
private List<FileAttachment> images; 
```

* * *

[这篇文章](https://stackoverflow.com/questions/3742897/hibernate-elementcollection-strange-delete-insert-behavior)可能有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-27T04:37:21.523

我想您应该为生成器提供一个实现。我们可以使用“序列”生成器。

试试这个：

```
@GenericGenerator(name="myGenerator",strategy="sequence")
@CollectionId(
    columns=@Column(name="Property_image_id"),
    type=@Type(type="long"),
    generator="myGenerator"
) 
```

# java - How would I finish activity 'B' and go back to activity 'A'?

> ID：13751082
> 
> 赞同：0
> 
> 时间：2012-12-06T19:30:22.703
> 
> 标签：java, android, activity-finish

I have a startup screen with an app I'm working on and when you click the "existing user" button it opens a page to input a username and password. When that is done the user will click "OK" and then the "Processing. May take a few moments." screen pops up with a button to abort which should bring it back to the user info input screen. I just don't know how to get the "Abort" button to work correctly, as I am new to the whole programming thing. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:31:04.463

Have you tried finish()? Just call [finish();](http://developer.android.com/reference/android/app/Activity.html#finish%28%29) inside activity B where you want to finish, that takes you to previous activity (assuming that is A).

See this [tutorial](http://www.edumobile.org/android/android-programming-tutorials/difference-between-kill-activity-and-finish-activity/) for an example.

# jsf - jsf fill table using repeat - special case

> ID：13751084
> 
> 赞同：0
> 
> 时间：2012-12-06T19:30:29.960
> 
> 标签：jsf, repeat

I get a List of object Computer, and I need to show the status (online or offline) of each one. For example

* * *

Comp1:Online | Comp2:Online | Comp3:Online | (Comp4:OffLine)

* * *

Comp6:Online | Comp7:Offline | Comp8:Online | (Comp9:Online )

* * *

Comp11:Online | Comp12:Online | Comp13:Online | (Comp14:OffLine)

* * *

In all the examples that I found, the table add one row for each object, so the screen look like

Comp1:Online

* * *

Comp2:Online

* * *

Comp3:Online . .

* * *

Comp15:Online

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:51:00.333

在里面做循环怎么样`<h:panelGrid columns="4">`？

```
<h:panelGrid columns="4">
    Loop goes here
</h:panelGrid> 
```

# django - Django: Recognizing a recently registered user from the template engine

> ID：13751086
> 
> 赞同：0
> 
> 时间：2012-12-06T19:30:34.577
> 
> 标签：django

Is there any way to recognize if the registered user is a recent user, such as registed a day ago from template?

I want to display "how my site works" banner for not logged in or a day of users.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:44:28.190

添加上下文处理器。我在过去一小时内注册的用户的示例代码。

# 额外上下文.py

```
def extra_user_context(request):
    return {'is_recently_register': (datetime.today()-request.user.date_joined).seconds<3600 } if request.user.is_authenticated() else {} 
```

# 索引.html

```
{% if is_recently_register %}BangGangOfFour{% endif %} 
```

# c# - IEnumerable FirstOrEmpty Extension

> ID：13751088
> 
> 赞同：3
> 
> 时间：2012-12-06T19:30:49.407
> 
> 标签：c#, generics, extension-methods, covariance

## Problem

I am looking for a way to implement `FirstOrEmpty` for a `IEnumerable<X>` where X implements `IEnumerable<T>`. Basically, if the predicate does not match anything, return `Enumerable<T>.Empty`. I do not want to constrain the source parameter to `IEnumerable<IEnumerable<X>>` or because I might want to pass in something that implement `IEnumerable<X>` (e.g. `IEnumerable<IGrouping<bool, X>>`).

## Usage Example

```
IEnumerable<T> myCollection;
var groupCheck = myCollection.GroupBy(t => t.SomeProp == 23);

var badGroup = groupCheck.FirstOrEmpty(t => !t.Key);
var goodGroup = groupCheck.FirstOrEmpty(t => t.Key);

foreach(T x in badGroup) { ... }
foreach(T x in goodGroup) { ... } 
```

Old way:

```
IEnumerable<T> myCollection = ...;
var groupCheck = myCollection.GroupBy(t => t.SomePropOnClassT == 23);

var badGroup = (groupCheck.FirstOrDefault(t => !t.Key) ?? Enumerable<T>.Empty);
var goodGroup = (groupCheck.FirstOrDefault(t => t.Key) ?? Enumerable<T>.Empty);

foreach(T x in badGroup) { ... }
foreach(T x in goodGroup) { ... } 
```

## Attempts

### Attempt 1:

```
public static IEnumerable<TResult> FirstOrEmpty<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate) where TSource : IEnumerable<TResult>
{
    TSource tmp = source.FirstOrDefault(predicate);
    if(tmp != null) {
        foreach(TResult x in tmp)
        {
            yield return x; 
        } 
    }
} 
```

### Attempt 2:

```
public static IEnumerable<TResult> FirstOrEmpty<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate) where TSource : IEnumerable<TResult>
{
    TSource tmp = source.FirstOrDefault(predicate);
    return tmp == null ? Enumerable.Empty<TResult>() : tmp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:51:19.177

您自己的解决方案：

```
public static IEnumerable<TResult> FirstOrEmpty<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate
    )
    where TSource : class, IEnumerable<TResult>
{
    return source.FirstOrDefault(predicate) ?? Enumerable.Empty<TResult>();
} 
```

实际上正在工作。我只添加了`class`约束。这意味着“`TSource`必须是引用类型”，并且接口可以带有`class`约束。这样做的原因是，如果是某种结构，则`default(TSource)`可能不是。你可以这样称呼它：`null``TSource`

```
var badGroup = groupCheck.FirstOrEmpty<IGrouping<bool, T>, T>(g => !g.Key);
var goodGroup = groupCheck.FirstOrEmpty<IGrouping<bool, T>, T>(g => g.Key); 
```

不幸的是，编译器不够聪明，无法判断类型参数本身，因此您必须`<..., ...>`像上面一样在尖括号中提供它们。我还没有找到解决方案。

现在，如果您总是将它与 一起使用`IGrouping<,>`，您可能希望使用以下不太通用的方法：

```
public static IEnumerable<TResult> FirstOrEmpty<TKey, TResult>(
    this IEnumerable<IGrouping<TKey, TResult>> source,
    Func<IGrouping<TKey, TResult>, bool> predicate
    )
{
    return source.FirstOrDefault(predicate) ?? Enumerable.Empty<TResult>();
} 
```

这次是这样的：

```
var badGroup = groupCheck.FirstOrEmpty<bool, T>(g => !g.Key);
var goodGroup = groupCheck.FirstOrEmpty<bool, T>(g => g.Key); 
```

好消息是，通过这种方法，编译器*将*推断您的类型参数，因此：

```
var badGroup = groupCheck.FirstOrEmpty(g => !g.Key);
var goodGroup = groupCheck.FirstOrEmpty(g => g.Key); 
```

作品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:47:33.147

我可能会使用尝试 2 的重构版本：

```
public static IEnumerable<TResult> FirstOrEmpty<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate) where TSource : class, IEnumerable<TResult>
{
    return source.FirstOrDefault(predicate) ?? Enumerable.Empty<TResult>();
} 
```

编辑：我很想知道为什么这个答案被否决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:36:19.293

我想出了与@phoog 相同的结果，但很难让编译器推断类型参数：

```
public static IEnumerable<TResult> FirstOrEmpty<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate) where TSource : IEnumerable<TResult>
{
    return (IEnumerable<TResult>)source.FirstOrDefault(predicate) ?? Enumerable.Empty<TResult>();
} 
```

我想出的最好的办法是明确说明它们：

```
var badGroup = groupCheck.FirstOrEmpty<IGrouping<bool,int>,int>(t => !t.Key);
var goodGroup = groupCheck.FirstOrEmpty<IGrouping<bool,int>,int>(t => t.Key); 
```

# vim - How to remove Skype timestamps in chat logs using VIM?

> ID：13751089
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:30:52.267
> 
> 标签：vim, text

I have some Skype chatlogs that I want to clean up. They look like this:

```
[12-12-6 下午1:54:53] Xerxes: Bla Bla 
[12-12-6 下午1:55:23] Aron: Bla Bla Bla
[12-12-6 下午1:55:29] Aron: Bla 
```

What command can I use in VIM to delete everything in brackets [] (including the brackets themselves)?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T20:57:34.547

替代的替代方法：

```
:%norm da]x 
```

解释：

*   `:normal {commands}``{commands`在正常模式下为一行运行}
*   `:norm`简称`:normal`
*   `:%norm``:normal`在文件的每一行上运行命令
*   `da]`删除行首的`[]`块
*   `x`删除后面的空格`]`

如需更多帮助，请参阅：

```
:h range
:h :norm
:h a]
:h d
:h x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:54:43.007

或者，从第一个 [ 上的光标开始，您可以这样做：

```
d%xj 
```

在哪里：

*   `d%`删除到匹配的大括号
*   `x`删除尾随空格
*   `j`向下移动到下一行

此外，您可以将其记录为宏：

```
qqd%xjq 
```

然后`@@`在每一行上快速播放（或`99@@`重复 99 行等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:33:58.660

只需一个[替代品](http://vim.wikia.com/wiki/Search_and_replace)即可：

```
:%s/^\[.*\] //g 
```

# c++ - 检测到合并排序堆损坏

> ID：13751096
> 
> 赞同：0
> 
> 时间：2012-12-06T19:31:33.330
> 
> 标签：c++, merge, heap-memory, mergesort, heap-corruption

我正在编写一个应该使用归并排序对数组进行排序的函数。到目前为止，我有两个功能：

```
template <typename Item, typename SizeType>
void merge_sort(Item data[], SizeType size) {
SizeType size1, size2;
if(size > 1) {
    size1 = size/2;
    size2 = size - size1;
    merge_sort(data,size1);
    merge_sort((data+size1),size2);

    merge(data,size1,size2);
}
} 
```

和：

```
template <typename Item, typename SizeType>
void merge(Item data[], SizeType size1, SizeType size2) {
Item* temp;
SizeType copied = 0;
SizeType copied1 = 0;
SizeType copied2 = 0;

temp = new Item[size1 + size2];

while(copied1 < size1 && copied2 < size2) {
    if(data[copied1] < (data + size1)[copied2])
        temp[++copied] = data[++copied1];
    else
        temp[++copied] = (data + size1)[++copied2];
}

while (copied1 < size1)
    temp[++copied] = data[++copied1];
while (copied2 < size2)
    temp[++copied] = (data + size1)[++copied2];

for(SizeType i = 0; i < size1 + size2; ++i)
    data[i] = temp[i];
delete [] temp;
} 
```

然而，当我尝试运行该程序时，我收到一个调试错误，指出堆在正常块后损坏，并且 CRT 检测到应用程序在堆缓冲区结束后写入内存。谁能解释这意味着什么以及我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:34:43.897

在使用这些值之前您正在递增......所以基本上使检查过时......

改为使用`copied++`。

您需要后增量运算符，因为如果在使用它之前对其进行增量，则会超出范围。 **[递增和递减运算符](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:37:09.803

你的意思是你的增量是后增量而不是前增量？例如：

```
 temp[copied++] = (data + size1)[copied2++]; 
```

使用预增量，在第一次迭代时`copied2`，`0`您正在访问`(data + size1)[1]`. 当`copied2`到达分配内存的末尾时，您正在访问末尾的内存。

为避免这种情况，我建议不要将增量作为子表达式。写作*和*阅读可能会令人困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:42:23.867

如果已复制 = 0 且已复制 1 = 0 则行

> 临时[++复制] = 数据[++复制1]；

会产生

> 温度[1] = 数据[1]；

因为前缀 ++ 在这里具有最高优先级

# javascript - Dynamicjs 扩展形状类导致未捕获范围错误？

> ID：13751097
> 
> 赞同：1
> 
> 时间：2012-12-06T19:31:34.173
> 
> 标签：javascript, jquery, kineticjs

这是我第一次发帖，我已经尽我所能来回答这个问题。我空手而归。

以前我使用的是 3.10.2 的 kineticJS。我已将库更新为使用截至今天最新的 4.1.2。我遇到了几个错误，其中大部分已经解决，但是，我已经走到了死胡同。

这是我在 js 文件中遇到的错误。我不知道它发生在 js 中的哪个位置。

```
Uncaught RangeError: Maximum call stack size exceeded
  Kinetic.Node.getParent
  Kinetic.Node.getStage
  Kinetic.Node.getStage
  ..... 
```

`Kinetic.Node.getStage`之后重复 100 多次。

我有理由相信这与我修改原型的方式有关，`Kinetic.Shape` [因为这篇文章](https://github.com/ericdrowell/KineticJS/issues/99)

```
function Datapoint() {
 this.uv = 0;
 this.royalblue = 0;
 this.royalblue2 = 0;
 this.presetId = 0;
 this.blue = 0;
 this.coolwhite = 0;
 this.green = 0;
 this.hyperred = 0;
 this.brightness = 0;
 this.clouds = 0;
 this.storms = 0;
 this.pointTime = new Date();
 this.id = 0;
 this.profileId = 0;
 this.intensity = 0;
 this.xCoord = 0;
 this.yCoord = 0;
 this.isStartNight = false;
 this.isStartDay = false;
 this.isNight = false
 this.isDay = false;
 this.isNatural = false;
}

//Modify the shape object
var DatapointObject = Kinetic.Shape;
DatapointObject.prototype.Datapoint; 
```

然后，我尝试以标准方式创建一个点。

```
var point = Kinetic.Circle({<config object>}); 
```

我相信这可能是我错误的根源。如果是这样，我该如何解决？

如果这不是我的错误的根源，任何人都可以提供一些建议来帮助我推断出问题的确切位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:17:33.507

事实证明，这个错误也是由向自身添加层引起的。像这样：

```
myLayer.add(myLayer);  //<--doesn't make any sense 
```

这应该是

```
myStage.add(myLayer); //<-- fixed 
```

# python - loadFinished 完成后退出 PyQt4 应用程序

> ID：13751098
> 
> 赞同：0
> 
> 时间：2012-12-06T19:31:34.967
> 
> 标签：python, qt, pyqt4, qwebview

我想在 loadFinished 完成后关闭窗口。想象一下简单的代码：

```
class Example(QWebView):
    def __init__(self):
        QWebView.__init__(self)
        self.frame = self.page().mainFrame()
        self.frame.loadFinished.connect(self.some_action)

    def some_action(self):
        # do something here
        # after it's done close app

if __name__ == '__main__':
    app = QApplication(sys.argv)
    url = QUrl("some_website")
    br = Example()
    br.load(url)
    br.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:51:35.890

只需在主窗口上调用[close() ：](https://qt-project.org/doc/qt-4.8/qwidget.html#close)

```
def some_action(self):
    # do something here
    # after it's done close app
    self.close() 
```

关闭最后一个主窗口后，应用程序将自动退出。

您也可以直接调用应用程序的[退出](https://qt-project.org/doc/qt-4.8/qcoreapplication.html#quit)函数：

```
 app.quit() 
```

或者，更一般地说：

```
 QCoreApplication.instance().quit() 
```

# c# - C# 类列表实例初始化语法

> ID：13751099
> 
> 赞同：1
> 
> 时间：2012-12-06T19:31:40.750
> 
> 标签：c#

在 C# 中我可以写

```
var y = new List<string>(2) { "x" , "y" }; 
```

用`List`“x”和“y”初始化一个。

如何声明一个类以接受这种初始化语法？

我的意思是，我想写：

```
var y = new MyClass(2, 3) { "x" , "y" }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:36:53.077

查看 C# 规范的第 7.6.10.3 节：

> 应用集合初始值设定项的集合对象必须是实现 System.Collections.IEnumerable 的类型，否则会发生编译时错误。对于按顺序指定的每个指定元素，集合初始化程序调用目标对象的 Add 方法，并将元素初始化程序的表达式列表作为参数列表，对每个调用应用正常的重载决策。因此，集合对象必须包含适用于每个元素初始值设定项的 Add 方法。

一个非常简单的例子：

```
 class AddIt : IEnumerable
   {
      public void Add(String foo) { Console.WriteLine(foo); }

      public IEnumerator GetEnumerator()
      {
         return null; // in reality something else
      }
   }

   class Program
   {
      static void Main(string[] args)
      {
         var a = new AddIt() { "hello", "world" };

         Console.Read();
      }
   } 
```

这将在控制台打印“hello”，然后是“world”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:44:36.233

我不确定 (2,3) 应该表示什么。我知道这是您在第一行的收藏大小。您可以简单地从 List 或您需要模仿的任何结构继承。

刚刚在 LinqPad 中测试了这个示例：

```
void Main()
{
    var list = new Foo{
        "a",
        "b"
    };

    list.Dump();
}

class Foo : List<string>{ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:35:54.177

只需使用以下语法初始化类的字段：

```
// ...

Car myCar1 = new Car () { Model = "Honda", YearBuilt=2009 };
Car myCar2 = new Car () { Model = "Toyota", YearBuilt=2011 };

// ...

public class Car {

    public string Model;
    public int YearBuilt;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:41:54.690

正如 Marcus 所指出的，该类必须实现`IEnumerable`接口并具有`Add()`调用者可以访问的方法。

简而言之，这个骨架示例将起作用：

```
public class MyClass : IEnumerable
{
    public void Add(string item)
    {

    }

    public IEnumerator GetEnumerator()
    {
        throw new NotImplementedException();
    }
} 
```

# ios - 通过 NSFetchedResultsController 按距离排序的核心数据中的位置？

> ID：13751100
> 
> 赞同：8
> 
> 时间：2012-12-06T19:31:43.673
> 
> 标签：ios, core-data, geolocation, nssortdescriptor, nsfetchedresultscontroller

我的 iOS Core Data 数据库中有一组实体对象，用于描述某个位置的某些内容。让我们称实体位置。我通过在 Location 上有两个引用位置的属性来实现这一点 - 纬度和经度，都是双精度的。还有其他元素，例如名称。

我正在使用 NSFetchedResultsController 将实体绑定到 UITableViewController。我想做的是让结果按到给定 CLLocationCoordinate2D 的距离排序。在一个非常理想的情况下，我可以刷新该列表以根据新位置重新计算排序。因此，这种排序将取决于两个键和第三个“静态”变量（一个不会在集合中的项目之间变化的变量）。

如果我使用 NSSortDescriptors 对任意列表进行排序，我想我可以弄清楚如何做到这一点。但是，我不控制排序描述符在 NSFetchedResultsController 中的使用方式。

有没有办法可以配置我的实体、我的 NSFetchedResultsController、我的 NSSortDescriptors 等来完成这个？我怀疑答案不在于创建一个花哨的 NSSortDescriptor，而是在实体中创建一个表示与我的距离的瞬态属性，并定期重新计算该属性。但是，我对 Core Data 还很陌生，所以我不确定如何最好地做到这一点（遍历所有实体并重新计算一个字段）。我也不确定 NSSortDescriptors 是否适用于瞬态属性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T06:22:28.780

*（来自评论：）*

对（基于 SQLite）Core Data 存储的获取请求不能使用基于瞬态属性或基于 Objective-C 谓词的排序描述符。

如果您不想失去获取结果控制器的优势（如动画表格视图更新、自动分组到部分等），您必须预先计算到当前位置的距离并将其存储在（持久）属性中你的对象。

或者，您可以获取所有对象并在内存中对它们进行排序。在这种情况下，您可以使用任意排序描述符。但这不能与获取的结果控制器结合使用，因此您必须注册托管对象上下文中的更改并在必要时重新加载表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T00:04:05.393

我发现了[BSFetchedResultsController github 项目](https://github.com/blindingskies/BSFetchedResultsController)，它是一个 NSFetchResultsController 子类，它执行 Martin 建议的操作，它使用任意排序描述符在内存中排序，此外，它还注册上下文更改并再次计算任何索引更改，同时考虑到任意排序描述符. 总而言之，这是一个非常令人印象深刻的壮举！我成功地使用它按距离排序，如下所示：

```
BSFetchedResultsController* fetchedResultsController = [[BSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:nil cacheName:nil];

//  create a location to compare distance to, e.g. current location
CLLocation* sourceLocation = [[CLLocation alloc] initWithLatitude:55.87595153937809 longitude:-4.2578177698913855];

// compare the distance from both to the source location
fetchedResultsController.postFetchComparator= ^(id a, id b) {
    Venue* v1 = (Venue*)a;
    Venue* v2 = (Venue*)b;

    double d1 = [v1.coreLocation distanceFromLocation:sourceLocation];
    double d2 = [v2.coreLocation distanceFromLocation:sourceLocation];

    return [@(d1) compare:@(d2)];
};

NSError *error = nil;
if (![fetchedResultsController performFetch:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
} 
```

由于它是一个旧项目，它没有 ARC，因此当您包含这两个文件时，请记住在目标、构建阶段中使用编译器标志 -fno-objc-arc 标记 .m。另请注意，开发人员认为代码尚未准备好生产，因此如果使用它，请务必进行充分的测试。

在我上面的代码中，我的 Venue 托管对象子类上有一个瞬态属性 coreLocation，您可以[在此处](http://davemeehan.com/technology/objective-c/core-data-transient-properties-on-nsmanagedobject)查看如何实现它。此外，距离计算效率低下，您可能希望将距离缓存在对象中，而不是在每次比较时重新计算它。

最后，这个项目似乎是因为创建者 Daniel Thorpe 的 Stackoverflow 问题没有得到解答，导致他自己解决了问题并发布了唯一的答案，所以我认为如果你觉得他的项目有用，你可以[给他的帖子投票](https://stackoverflow.com/questions/4526927/nsfetchedresultscontroller-does-anyone-have-any-insights-into-the-cache-implemen)就像我一样。

# c++ - 使用 Clang 的 scan-build 和 scons 和 C++11

> ID：13751103
> 
> 赞同：14
> 
> 时间：2012-12-06T19:32:04.330
> 
> 标签：c++, c++11, clang, scons, scan-build

根据这些答案 [ [1](https://stackoverflow.com/q/9922521/478288) , [2](https://stackoverflow.com/a/9305378/478288) , [3](https://stackoverflow.com/a/13179467/478288) ] ，我已将所有内容添加到 my`$PATH`并调整了 my以设置适当的环境变量。现在当我跑`SConstruct`

```
scan-build --use-c++=`which clang++` scons 
```

构建开始，我可以看到分叉的过程`scons`是

```
/path/to/c++-analyzer ... -std=c++11 ... 
```

目标文件成功构建，但随后出现错误：

```
could not find clang line 
```

`c++-analyzer`当派生进程不包含字符串时会发生此错误`-cc1`。但如果我检查`ps aux`，我清楚地看到

```
/path/to/clang -cc1 ... 
```

程序如何正确构建但静态分析器会像这样失败？

* * *

作为参考，如果我手动运行

```
scan-build clang++ <parameters from scons> 
```

然后构建成功并生成报告！

我也可以通过添加“作弊”

```
env["ENV"]["PATH"] = os.environ["PATH"] 
```

然后运行

```
CXX="scan-build clang++" scons 
```

我只是无法`scan-build`使用`scons`未经修改的`SConstruct`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-20T16:15:46.210

问题是clang不在[执行环境（Wayback Machine）](https://web.archive.org/web/20130912091915/http://scons.org/doc/HTML/scons-user/x1750.html)中的搜索路径上。这解释了为什么添加该行`env["ENV"]["PATH"] = os.environ["PATH"]`可以解决问题。

要`scan-build`在未修改的环境上运行，`SConstruct`您可以将 clang 可执行文件（`clang++`也可能`clang`）放在执行环境使用的搜索路径上，例如，通过在 Linux 上创建指向`/usr/bin/clang++`您的符号链接。`/path/to/clang++`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-31T17:15:13.490

我遇到了同样的问题：目标文件成功构建，但随后出现错误：

```
could not find clang line 
```

问题是我使用的标志对有效`gcc`但对`clang`.

```
touch empty.c

scan-build gcc -fdiagnostics-show-caret -c empty.c
scan-build: Using '/usr/bin/clang-8.exe' for static analysis
could not find clang line
...

scan-build --use-cc=clang gcc -fdiagnostics-show-caret -c empty.c
scan-build: Using '/usr/bin/clang-8.exe' for static analysis
clang-8: error: unknown argument: '-fdiagnostics-show-caret'
... 
```

删除`-fdiagnostics-show-caret`使问题消失：

```
scan-build gcc -c empty.c
scan-build: Using '/usr/bin/clang-8.exe' for static analysis
... 
```

另外，为了搅浑水，`clang`这个开关的名字是`-fcaret-diagnostics`，`gcc`不接受。

# ruby-on-rails - 用于 Ruby 测试框架的 UI 工具

> ID：13751104
> 
> 赞同：0
> 
> 时间：2012-12-06T19:32:07.520
> 
> 标签：ruby-on-rails, ruby, unit-testing, rubygems, ruby-test

是否有用于 Ruby 测试框架的 UI，类似于内置于 Eclipse 中的 JUnit 的 UI 或内置于 Visual Studio 中的 MSUnit？但是，我对 IDE 集成并不是特别感兴趣。它可能是一个独立的应用程序，很可能是 Web。这应该具有所有单元测试工具的基本功能：

1.  列出项目中的所有测试
2.  列出项目中给定文件中的所有测试
3.  能够运行一组测试或单个测试并获得反馈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:57:13.677

我对 JUnit 不是很熟悉，但是您可以集成[simplecov 之](https://github.com/colszowka/simplecov)类的东西来获得测试的覆盖率结果。

你也可以使用像[Jenkins CI](http://jenkins-ci.org/)或[Travis CI这样的 CI 服务器](https://travis-ci.org/)

当与测试框架结合使用时，这些工具应涵盖您列出的所有要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:51:09.560

[RubyMine](http://www.jetbrains.com/ruby/features/ruby_unit_testing.html)有一个图形化的测试运行器。它显然要花钱（除非你在做[开源](http://www.jetbrains.com/ruby/buy/buy.jsp#openSource)），而且它带有一个完整的 IDE，这可能不是你想要的。它是我听说过的唯一的 ruby​​ 图形测试运行器。

你有没有考虑过自己滚动？您可能可以很容易地获得基础知识。

# python - 父节点在语法树中引用子节点的简单方法是什么？

> ID：13751108
> 
> 赞同：1
> 
> 时间：2012-12-06T19:32:18.237
> 
> 标签：python, abstract-syntax-tree

对于个人项目，我正在构建一个简单的 HTML 编译器。编译器读入一个模板文件，逐行解析它，将每一行作为一个单独的节点添加到语法树中。子节点由制表符缩进表示，类似于 Python。这是一个示例模板文件：

```
$doctype
    html {lang: $lang}
        head
            meta {charset: $encoding}
            title Hello World!
        body
            h1 {class: $test-class, foo: $bar} Hello world!
            p {class: $bar} How are you today? Is [span {class: $test-class} this] class total foobar? 
```

对于这个例子，`doctype`标签是树的根，`html`是它唯一的孩子。`html`依次有两个孩子，`head`并且`body`，每个孩子都有自己的孩子列表。

如果您查看`p`底部的标签，您会看到 line `[span {class: $test-class} this]`，使用方括号表示内联 HTML 元素。该跨度将在树中表示为 的子节点`p`。

稍后在程序执行中，我将根据构建的语法树输出一个 HTML 文件。但是，如果存在内联 HTML 元素，则在构造该 HTML 文件时，我遇到了一个心理障碍。

我的问题是：父节点引用其子节点的简单方法是什么，特别是在输出编译文件时块元素可以从其子内联元素中提取数据的方式？

# python - Perl 到 Python 和 cx_Oracle，fetchrow_array

> ID：13751109
> 
> 赞同：1
> 
> 时间：2012-12-06T19:32:18.910
> 
> 标签：python, oracle, perl, cx-oracle

使用 Python 连接到 Oracle 时是否有等效于 perl fetchrow_array 的方法？

我实际上是在尝试将以下 perl 代码转换为 python 以与 cx_Oracle 一起使用...我需要创建键控字典来代替哈希，我猜（我根本不知道 perl），但首先我想将返回值转换为数组形式，以便我可以连接列。

```
# read the data and place into a species hash (sphash) and a data hash (tmphash)
my (@lnarr, %sphash, %tmphash, $tmpln, $tmpsel, $x, $datetime) ;
while (@lnarr = $csr->fetchrow_array) {
 # $line =~ s/\s//g ;  #remove spaces and newline character
 # @lnarr = split /,/, $line ;
  $datetime = $lnarr[4].'-'.$lnarr[5] ;
  $tmpln = join '_', $lnarr[8], $lnarr[9] ;
  $sphash{$lnarr[7]} = 'x';
  $tmphash{$lnarr[0].'_'.$lnarr[1].'_'.$lnarr[2].'_'.$lnarr[3].'_'.$datetime.'_'.$lnarr[6]}{$lnarr[7]} .= $tmpln ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:43:11.643

[cx_Oracle](http://cx-oracle.sourceforge.net/html/index.html)符合[Python DB API 2.0](http://www.python.org/dev/peps/pep-0249)。因此它必须支持[`cursor.fetchone()`](http://www.python.org/dev/peps/pep-0249/#fetchone)，这应该与[Perl 的`fetchrow_array()`](http://www.felixgers.de/teaching/perl/cpan_DBI.html#fetchrow_array).

换句话说：cx_Oracle 只是数据库驱动程序，您与之交互的 API 是 Python DB API。

[http://www.orafaq.com/wiki/Python](http://www.orafaq.com/wiki/Python)应该让您开始使用 cx_Oracle。

# python - 如何从 pypy 中的 .py 文件在 python 中打开 .py 文件？

> ID：13751110
> 
> 赞同：0
> 
> 时间：2012-12-06T19:32:19.090
> 
> 标签：python, pypy

我的程序目前包含 2 个 .py 文件。

我在 pypy 中运行代码的主要部分（这要快得多），然后在 python 中打开第二个文件，该文件使用`matplotlib.pyplot`.

我已经设法打开使用：

```
subprocess.Popen(['C:\\python26\\python.exe ','main_plot.py',]) 
```

打开我的第二个文件...

```
import matplotlib.pyplot as pyplot
def plot_function(NUMBER):
    '''some code that uses the argument NUMBER'''
    pyplot.figure()
    ---plot some data---
    pyplot.show() 
```

但是，我希望能够将参数传递给`plot_function`在 python 中打开的。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:38:44.417

是的，Popen 构造函数采用长度为 n 的列表。[请参阅此处的注释。](http://docs.python.org/2/library/subprocess.html#popen-constructor)因此，只需将 main_plot.py 的参数添加到您的列表中：

```
subprocess.Popen(['C:\\python26\\python.exe ','main_plot.py','-n',1234]) 
```

编辑（回应您的编辑）：

您需要修改 main_plot.py 以接受命令行参数来调用您的函数。这将做到：

```
import matplotlib.pyplot as pyplot
def plot_function(NUMBER):
    '''some code that uses the argument NUMBER'''
    pyplot.figure()
    ---plot some data---
    pyplot.show()

import argparse
if __name__=="__main__":
    argp=argparse.ArgumentParser("plot my function")
    argp.add_argument("-n","--number",type=int,default=0,required=True,help="some argument NUMBER, change type and default accordingly")
    args=argp.parse_args()
    plot_function(args.number) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:38:26.323

最简单的方法是`os.system("main_plot.py arg")`

# jquery - MVC3 ModelClientValidationRule 比较 2 个不同的字段。向其中一个添加必需的标志

> ID：13751113
> 
> 赞同：2
> 
> 时间：2012-12-06T19:32:28.817
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

我正在尝试使用创建自定义验证`IClientValidatable`

我有 2 个字段 PhoneNumber 和 Mobile。我希望用户选择其中一个或两个。只需要 1 个，但必须至少提供 1 个。

到目前为止，我已经设法做到了

```
 public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
                       {
                           ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
                           ValidationType = "required",
                       };

        rule.ValidationParameters.Add("phone", "PhoneNumber");
        rule.ValidationParameters.Add("mobile", "MobileNumber");

        yield return rule;
    } 
```

这会将验证应用于输出的 html 元素

```
<input data-val="true" data-val-length="Mobile number must be a maximum length of 14." data-val-length-max="14" data-val-required="Landline or mobile phone number is needed." data-val-required-required="MobileNumber" id="MobileNumber" name="MobileNumber" type="text" value="">
<input data-val="true" data-val-length="Landline number must be a maximum length of 14." data-val-length-max="14" data-val-required="Landline or mobile phone number is needed." data-val-required-required="PhoneNumber" id="PhoneNumber" name="PhoneNumber" type="text" value=""> 
```

现在我知道这还没有完成。但是如果我尝试点击提交按钮，验证会在我的摘要中显示 2 个验证错误。

我对如何添加验证器适配器有点困惑。

到目前为止....任何我知道它错了但是

```
 jQuery.validator.unobtrusive.adapters.add('required',
        [$("#PhoneNumber").val(), $("#MobileNumber").val()],
        function(options) {
                    options.rules['required'] = options.params;
                    options.messages['required'] = options.message;
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:05:12.027

[首先，您需要以与比较属性](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/CompareAttribute.cs)类似的方式创建自己的验证属性。

在此属性中，您将指定其他依赖属性，错误消息的格式将考虑属性显示名称。

该属性看起来像这样（我对它的名称和默认错误消息不太自豪！）：

```
public class SelectOneValidationAttribute : ValidationAttribute, IClientValidatable
{
    private const string DefaultErrorMessage = "Please enter '{0}' or '{1}'.";
    private string _otherFieldName;

    public SelectOneValidationAttribute(String otherFieldName)
        : base(DefaultErrorMessage)
    {
        _otherFieldName = otherFieldName;
    }

    public override string FormatErrorMessage(string name)
    {
        return String.Format(CultureInfo.CurrentCulture, ErrorMessageString, name, _otherFieldName);
    }

    protected override DataAnnotationsValidationResult IsValid(object value, ValidationContext validationContext)
    {
        PropertyInfo otherPropertyInfo = validationContext.ObjectType.GetProperty(_otherFieldName);
        if (otherPropertyInfo == null)
        {
            return new DataAnnotationsValidationResult("Unknown property " + _otherFieldName);
        }

        string strValue = value == null ? null : value.ToString();
        if(!String.IsNullOrEmpty(strValue))
            //validation succeeds as this field has been populated
            return null;

        object otherPropertyValue = otherPropertyInfo.GetValue(validationContext.ObjectInstance, null);

        string strOtherPropertyValue = otherPropertyValue == null ? null : otherPropertyValue.ToString();
        if (!String.IsNullOrEmpty(strOtherPropertyValue))
            //validation succeeds as the other field has been populated
            return null; 
        else
            //validation failed, none of the 2 fields were populated
            return new DataAnnotationsValidationResult(DefaultErrorMessage);
    }

    //Create the data attributes for the client to use
    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ValidationType = "selectone",
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName())
        };

        rule.ValidationParameters["otherfield"] = FormatPropertyForClientValidation(_otherFieldName);

        yield return rule;
    }

    public static string FormatPropertyForClientValidation(string property)
    {
        return "*." + property;
    }
} 
```

因此，您可以在模型中使用它，如下所示：

```
public class YourModel
{
    [SelectOneValidation("Phone")]
    public string Mobile { get; set; }

    [SelectOneValidation("Mobile")]
    public string Phone { get; set; }
} 
```

使用该代码，错误消息“请输入‘手机’或‘电话’。” 和“请输入‘电话’或‘手机’。” 将在服务器端验证失败时显示。（您可以在两者上设置相同的错误消息，例如“请输入...”）

为了添加客户端验证，您需要为不显眼的验证创建适配器。（确保在不显眼的验证解析文档之前将其添加到某处，否则您将需要手动解析它）：

```
//Add an adaptor for our new jquery validator, that builds the optional parameters 
//for our validation code (the other field to look at)
$.validator.unobtrusive.adapters.add("selectone", ["otherfield"], function (options) {
    var prefix = getModelPrefix(options.element.name),
        other = options.params.otherfield,
        fullOtherName = appendModelPrefix(other, prefix),
        element = $(options.form).find(":input[name=" + fullOtherName + "]")[0];

    setValidationValues(options, "selectone", element);
}); 
```

这是使用在不显眼的验证库中定义的一些实用程序函数，例如：

```
function setValidationValues(options, ruleName, value) {
    options.rules[ruleName] = value;
    if (options.message) {
        options.messages[ruleName] = options.message;
    }
}

function getModelPrefix(fieldName) {
    return fieldName.substr(0, fieldName.lastIndexOf(".") + 1);
}

function appendModelPrefix(value, prefix) {
    if (value.indexOf("*.") === 0) {
        value = value.replace("*.", prefix);
    }
    return value;
} 
```

最后我创建了一个新的验证规则。这是因为尽管所需的验证允许设置过滤表达式，因此该字段仅在该表达式被评估为 true 时才被标记为有效，请参阅[required validation](http://docs.jquery.com/Plugins/Validation/Methods/required)，我们需要对 onBlur 验证应用与 equalto 规则类似的修复。

验证方法是从 equalto 验证中应用上述修复，然后仅在其他相关字段上使用依赖选择器调用所需规则，因此仅当字段为空且依赖项尚未填充时，所需验证才返回 false。

```
$.validator.addMethod("selectone", function (value, element, param) {
    // bind to the blur event of the target in order to revalidate whenever the target field is updated
    // TODO find a way to bind the event just once, avoiding the unbind-rebind overhead
    var otherField = $(param);
    if (this.settings.onfocusout) {
        otherField.unbind(".validate-selectone").bind("blur.validate-selectone", function () {
            $(element).valid();
        });
    }

    var otherFieldBlankFilter = ":input[name=" + otherField[0].name + "]:blank";
    return $.validator.methods.required.call(this, value, element, otherFieldBlankFilter);
}); 
```

如果您不介意这一点，就好像您仅在提交表单时进行验证，您可以编写一个直接使用所需规则的适配器：

```
$.validator.unobtrusive.adapters.add("selectone", ["otherfield"], function (options) {
    var prefix = getModelPrefix(options.element.name),
        other = options.params.otherfield,
        fullOtherName = appendModelPrefix(other, prefix),
        element = $(options.form).find(":input[name=" + fullOtherName + "]")[0];

    setValidationValues(options, "required", ":input[name=" + fullOtherName + "]:blank");
}); 
```

有了所有这些，您的验证应该可以工作。如果两者都是空的并且您尝试提交，则会为这两个字段显示错误消息。如果您随后在其中一个中输入内容并标记出来，则应删除两条错误消息。

您还应该能够根据自己的需要进行调整，因为您可以修改验证属性、不显眼的适配器和验证规则。

# asp.net-mvc-4 - 我可以将 UserId 保留在 User.Identity 中吗？MVC4 简单成员

> ID：13751116
> 
> 赞同：2
> 
> 时间：2012-12-06T19:33:05.510
> 
> 标签：asp.net-mvc-4, simplemembership

我想知道 SimpleMembership 是否将 UserId 保留在某个地方，或者如果没有，一旦派生数据，如何强制它保留。

我有简单的动作：

```
 [Authorize(Roles="User")]
    public ActionResult Create()
    {
        var ownerId = WebSecurity.GetUserId(User.Identity.Name);
        return View()
    } 
```

我的 MiniProfiler 说：

```
 DECLARE @0 nvarchar(4) = N'NICK'
 SELECT [UserId] FROM [UserProfile] WHERE (UPPER([UserName]) = @0)   

 DECLARE @0 int = 2
 SELECT r.RoleName FROM webpages_UsersInRoles u, webpages_Roles r Where 
 (u.UserId = @0 and u.RoleId = r.RoleId) GROUP BY RoleName 

 DECLARE @0 nvarchar(4) = N'NICK'
 SELECT [UserId] FROM [UserProfile] WHERE (UPPER([UserName]) = @0) 
```

所以，我重复了对 UserId 的查询——首先是获取角色，其次是调用`WebSecurity.GetUserId(User.Identity.Name);`. 调用 [Authorize] 后，是否有一种聪明的方法可以将 UserId 保存在某处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:52:47.697

我通常将我的用户配置文件包装在会话变量中。

```
 public static userProfile UserInfo
 {
     get { return HttpContext.Current.Session["UserInfo"] as userProfile; }
     set { HttpContext.Current.Session["UserInfo"] = value; }
 } 
```

用户登录后查询`UserProfile`表并执行

```
UserInfo = QueryAsClass; //you need to map your sql to an object 
```

一旦在那里，您可以随时访问它

```
UserInfo.userId 
```

我`userProfile`在我的应用程序中将表作为对象类

**编辑**

我有在用户登录后执行的代码

```
using (var db = new DBEntities())
    {
        var userId = WebSecurity.GetUserId(HttpContext.Current.User.Identity.Name);
        if (userId == -1) return;
        SessionHelpers.UserInfo = db.userProfiles.Single(x => x.userId == userId);
    } 
```

我正在使用 EF5，并且我的`userProfile`模型中有表格，因此如果您不使用 EF，则需要调整这部分。

当我需要的时候，`userId`我就去做`SessionHelpers.UserInfo.userId`。这让我可以在需要时获取所有用户的个人资料信息，而无需重新查询数据库。

当然，如果您**更改**用户配置文件中的某些内容，您也需要更新会话变量。

您可能需要更高级的逻辑并检查会话是否为空（我正在其他地方做）。

# c++ - pthread_create 问题

> ID：13751117
> 
> 赞同：1
> 
> 时间：2012-12-06T19:33:09.197
> 
> 标签：c++, gcc, pthreads

我有这个代码：

```
void* ConfigurationHandler::sendThreadFunction(void* callbackData)
{
   const EventData* eventData = (const EventData*)(callbackData);

   //Do Something

   return NULL;
}

void ConfigurationHandler::sendCancel()
{
    EventData* eventData = new EventData();
    eventData ->Name = "BLABLA"

    pthread_t threadId = 0;
    int ret = pthread_create(&threadId,
                             NULL,                                                              
                             ConfigurationHandler::sendThreadFunction,
                             (void*) eventData );                                   // args passed to thread function
    if (ret)
    {
        log("Failed to launch thread!\n");
    }
    else
    {
        ret = pthread_detach(threadId);
    }   
} 
```

我收到编译器错误：

```
error: argument of type 'void* (ConfigurationHandler::)(void*)' does not match 'void* (*)(void*)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:47:03.297

您不能安全地将 C++ 方法（甚至是静态方法）作为例程传递给`pthread_create`.

假设您不传递对象 - 即`ConfigurationHandler::sendThreadFunction`声明为静态方法：

```
// the following fn has 'C' linkage:

extern "C" {

void *ConfigurationHandler__fn (void *arg)
{
    return ConfigurationHandler::sendThreadFunction(arg); // invoke C++ method.
}

} 
```

并将`ConfigurationHandler__fn`作为参数传递给`pthread_create`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:55:48.883

解决问题的典型方法是通过 void 指针（其接口中的此数据指针）将 C++ 对象传递给 pthread_create()。传递的线程函数将是全局的（可能是静态函数），它知道 void 指针实际上是一个 C++ 对象。

就像在这个例子中一样：

```
void ConfigurationHandler::sendThreadFunction(EventData& eventData)
{
   //Do Something
}

// added code to communicate with C interface
struct EvendDataAndObject {
   EventData eventData;
   ConfigurationHandler* handler;
};
void* sendThreadFunctionWrapper(void* callbackData)
{
   EvendDataAndObject* realData = (EvendDataAndObject*)(callbackData);

   //Do Something
   realData->handler->sendThreadFunction(realData->eventData);
   delete realData;
   return NULL;
}

void ConfigurationHandler::sendCancel()
{
    EvendDataAndObject* data = new EvendDataAndObject();
    data->eventData.Name = "BLABLA";
    data->handler = this; // !!!

    pthread_t threadId = 0;
    int ret = pthread_create(&threadId,
                             NULL,                                                              
                             sendThreadFunctionWrapper,
                             data ); 
    if (ret)
    {
        log("Failed to launch thread!\n");
    }
    else
    {
        ret = pthread_detach(threadId);
    }   
} 
```

# magento - 如何将自定义选项卡添加到管理面板-> 在 magento 中管理类别？

> ID：13751119
> 
> 赞同：1
> 
> 时间：2012-12-06T19:33:15.073
> 
> 标签：magento

我知道我可以使用方法 addAttribute() 通过安装脚本添加表单元素。但是，现在我想在常规、显示设置等旁边获得一个全新的选项卡。我想知道在不过度复杂的情况下最简单的方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:53:48.383

假设你已经知道如何做模块的其他部分。您需要覆盖：

```
Mage_Adminhtml_Block_Catalog_Category_Tabs 
```

在您的 config.xml 上，您可以：

```
 <blocks>           
         <adminhtml>  
            <rewrite> 
                 <catalog_category_tabs>YouModule_Block_Catalog_Category_Tabs</catalog_category_tabs>  
            </rewrite>  
        </adminhtml>  
    </blocks> 
```

您需要覆盖 _prepareLayout 函数。

您将编写以下代码：

```
$this->addTab('idname', array(
                'label'     => Mage::helper('catalog')->__('Tab name'),
                'content'   => $this->getLayout()->createBlock('yourmodule/yourblock')->toHtml(),
        ));

    return parent::_prepareLayout(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T21:23:13.087

重写块的另一种方法是监听事件`adminhtml_catalog_category_tabs`，然后在你的观察者中做类似的事情。

```
$tabs = $observer->getTabs();
$tabs->addTab('myextratab', array(
    'label'     => Mage::helper('catalog')->__('My Extra Tab'),
    'content'   => 'Here is the contents for my extra tab'
)); 
```

这将有助于阻止不同扩展之间可能发生的重写冲突。

# visual-studio-2005 - 在 SAML 2.0 中更改名称格式

> ID：13751123
> 
> 赞同：0
> 
> 时间：2012-12-06T19:33:40.777
> 
> 标签：visual-studio-2005, saml-2.0

我们正在使用 SAML 2.0。我们应该与外部客户端集成。客户要求使用更改以下内容

NameFormat="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress" 而不是 NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic"

我们能做到吗。如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:16:39.490

*NameFormat*是SAML 断言的 AttributeStatement 元素下的*Attribute元素的一个属性。*SAML 核心规范提到了三个属性名称格式标识符：

1.  urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified
2.  urn:oasis:names:tc:SAML:2.0:attrname-format:uri
3.  urn:oasis:names:tc:SAML:2.0:attrname-format:basic

现在，urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress 是名称 ID 格式标识符。它用作*NameID*、*NameIDPolicy*或*Issuer*元素的属性*Format*的值。

 ***当你提到你想用 urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress 替换 urn:oasis:names:tc:SAML:2.0:attrname-format:basic 时，我很困惑，因为它们是用于不同的目的。

也许你可以澄清你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:52:34.347

在您的 AuthnRequest 中，您应该具有以下内容：

```
<samlp:NameIDPolicy xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
 Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient"
 SPNameQualifier="xxx"
 AllowCreate="true"
/> 
```

更改那里的格式，例如上面的格式是“瞬态”。***

# php - PHP Mysqli bind_result 在准备好的插入语句期间抛出警告

> ID：13751125
> 
> 赞同：1
> 
> 时间：2012-12-06T19:33:40.640
> 
> 标签：php, mysqli, prepared-statement

下面准备好的语句有 5 个变量。

`INSERT INTO folder (folder_name, folder_parent_id, folder_user_id, folder_order, hk_created) VALUES (?,?,?,?,?);`

我打电话时收到此警告`$_STATEMENT->bind_result( $_RESULT );`

`Warning: mysqli_stmt::bind_result(): Number of bind variables doesn't match number of fields in prepared statement`

虽然显然这是真的（5 个变量，1 个结果变量），但执行时的 INSERT 语句仅返回 true（成功）或 false（失败）。以防万一我遗漏了什么，我尝试提供 5 个变量`bind_result()`，但我仍然得到相同的消息。

插入查询成功执行。我应该只是@suppress 警告并将其归结为 PHP 中的怪癖或错误（有时我想知道是否有区别）还是我遗漏了什么？

**编辑以反映我尝试为 bind_result() 提供 5 个变量**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:41:46.783

您不能[`bind_result`](http://php.net/manual/en/mysqli-stmt.bind-result.php)与`INSERT`查询一起使用。它没有结果。

[`$_STATEMENT->execute()`](http://php.net/manual/en/mysqli-stmt.execute.php)将返回`TRUE`或`FALSE`。[`$_STATEMENT->affected_rows`](http://php.net/manual/en/mysqli-stmt.affected-rows.php)如果您想查看插入了多少行，请使用。

# amazon-s3 - Amazon S3 上传元数据？

> ID：13751127
> 
> 赞同：2
> 
> 时间：2012-12-06T19:33:47.593
> 
> 标签：amazon-s3, mp3, metadata

我正在尝试将数千个歌曲文件上传到 Amazon S3。所有这些文件都有与之关联的元数据，例如作者、流派等。有没有办法保留这些元数据，以便在上传文件时出现在 S3 管理控制台中？

如果没有，你能建议一种方法来轻松地将这些元数据添加到歌曲中吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:29:28.653

您可以创建元数据“键”“值”的集合。然后你给你的请求这个集合作为参数。

在 C# 中是

```
 InitiateMultipartUploadRequest initiateMultipartUploadRequest =
                new InitiateMultipartUploadRequest()
                    .WithBucketName(_transferUtility.BucketName)
                    .WithKey(_key)
                    .WithMetaData(collection); 
```

它可以是任何其他请求。

此元数据在 S3 管理控制台中显示为带有前缀的元数据。

# javascript - 我可以在同一个页面中使用两个不同版本的backbone.js 吗？

> ID：13751134
> 
> 赞同：0
> 
> 时间：2012-12-06T19:34:24.130
> 
> 标签：javascript, backbone.js, requirejs

我可以在同一个页面中使用两个不同版本的backbone.js 吗？require.js 怎么样？Dust.js？木偶？其他 JS FW？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:38:49.613

这取决于框架。

骨干？是的。jQuery？是的。

灰尘.js？不。

您需要做的是查看每个项目的文档以找出答案，但这并不一定能回答您为什么要这样做的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:37:08.597

是的你可以。用于`noConflict`为您加载的每个版本的 Backbone.js 创建不同的命名空间。

[http://backbonejs.org/#Utility-noConflict](http://backbonejs.org/#Utility-noConflict)

# iphone - 如何向嵌入式 UIWebView 添加导航？

> ID：13751143
> 
> 赞同：1
> 
> 时间：2012-12-06T19:35:26.223
> 
> 标签：iphone, ios, uiweb

我使用 UIWebView 从我的 iPhone 应用程序中访问移动网站。我需要帮助添加前进和后退导航按钮。我对此真的很陌生，所以如果有人可以提供一些好的细节，我将非常感谢您的帮助。

这是我所拥有的：

```
UIWebView *webView1 = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 480, 251)];
[contentView addSubview:webView1];
webView1.alpha = 1.0;
webView1.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[webView1 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.logsitall.com/m"]]];
webView1.scalesPageToFit = YES;
[webView1 release];

contentView.frame = self.view.bounds;
[self.view addSubview:contentView];
[contentView release];
}

- (void)viewDidUnload {
    [self setWebView:nil];
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:animated];
}

@end 
```

最终代码：

```
//header
@interface MywebsiteViewController : UIViewController <UIWebViewDelegate>
{
    IBOutlet UIWebView *aWebView;
}

@property (nonatomic, retain) UIWebView *aWebView;

@end

//implementation

- (void)viewWillAppear:(BOOL)animated {
    self.aWebView.delegate = self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *myURL = [NSURL URLWithString:@"http://www.WebSiteToLoad.com"];
    NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];

    [aWebView loadRequest:myRequest];

}

#pragma mark UIWebViewDelegate

- (void)webViewDidStartLoad:(UIWebView *)webView{
    //show indicator while loading website
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

}
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    //turn off indicator and display the name of the website in the navBar
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    self.title = [webView stringByEvaluatingJavaScriptFromString:@"document.title"];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:44:17.603

有很多关于UIWebView的教程……等着……万维网！也就是说，我记得，它就像在 WebView 上调用 goForward 或 goBack 一样简单：

```
[[self mainWebView] goForward]; 
```

# javascript - 在 jquery 中解析一个字符串，更改一些内容并取回修改后的字符串

> ID：13751145
> 
> 赞同：1
> 
> 时间：2012-12-06T19:35:30.460
> 
> 标签：javascript, jquery, parsing

我有一个包含 html 代码的字符串，如下所示：http: [//jsbin.com/ocoteg/1](http://jsbin.com/ocoteg/1)。我想解析这个字符串，进行一些更改（例如：将所有链接更改为跨度），然后取回修改后的 html 字符串。

这是一个 jsbin，我从这里开始，但我无法让它工作：http: [//jsbin.com/okireb/1/edit](http://jsbin.com/okireb/1/edit)。

我得到了 html 字符串，我用 jquery 解析它，但我无法替换链接，并取回修改后的 html 字符串。

**更新**

为什么投反对票？这个问题有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:42:09.593

使用 find 而不是 filter ：

```
var dom = $('<div>'+text+'</div>');
dom.find('a').each(function() {
  var el = $(this);
  var html = el.html();
  var span = $('<span/>').html(html);
  el.replaceWith(span);
});    
console.log(dom.children()); ​ 
```

请注意，我为初始 dom 不是一个元素的情况包装了所有内容。

[示范](http://jsfiddle.net/5sBxP/)

要将 html 作为字符串返回，请使用

```
var html = dom.html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:03:56.740

您也可以循环执行

```
dom.each(function(i,v){
  if(v.tagName == "A"){
    dom[i] = $('<span/>').html($(v).html())[0]; // replace it right away with new span element
  }
});

var newString = $('<div>').append(dom.clone()).html(); //<-- to get new string http://stackoverflow.com/a/652771/1385672
console.log(newString);​ 
```

编辑：

这是保留其他标签的方法

```
var dom = $(text.split('\n'));  

$(dom).each(function(i,v){ 
  var ele = $(v)[0];      
  if($(ele).is('a')){            
     dom[i] = $('<div>').append($('<span/>').html($(v).html())).html();        
  }
});

var newString = dom.get().join('\n'); 
```

[http://jsbin.com/okireb/32/edit](http://jsbin.com/okireb/32/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T21:25:47.013

这应该是你想要的（可以改进）

```
var text = '<!DOCTYPE html><html><head><meta charset=utf-8 /><title>JS Bin</title></head><body><a href="#">Link 1</a><a href="#">Link 2</a><a href="#">Link 3</a></body></html>';
var body_content = text.substring(text.indexOf('<body>') + 6, text.indexOf('</body>'));
var $dom = $('<div/>').html(body_content);
$('a', $dom).each(function() {
    $('<span>' + $(this).html() + '</span>').insertAfter($(this));
    $(this).remove();
});
var text_new = text.replace(body_content, $dom.html());
// text_new contains the entire HTML document with the links changed into spans 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:45:21.363

你可以用 .replace 来做到这一点。可能不是最好的方法。

```
dom = dom.replace(/<a /g,'<span');
dom = dom.replace(/<\/a>/g,'</span>'); 
```

演示：http: [//jsbin.com/okireb/14/edit](http://jsbin.com/okireb/14/edit)

# c++ - 以下代码是否会针对一个函数调用进行优化？

> ID：13751146
> 
> 赞同：3
> 
> 时间：2012-12-06T19:35:37.630
> 
> 标签：c++, compiler-optimization

我对编译器的专业知识很少（没有读过），并且想知道以下代码片段是否会由相对较新的（VS2008+/GCC 4.3+）编译器自动优化：

```
Object objectPtr = getPtrSomehow();

if (objectPtr->getValue() == something1)       // call 1
    dosomething1;
else if (objectPtr->getValue() == something2)  // call N (there are a few more)
    dosomething2;

return; 
```

其中 getValue() 仅返回一个成员变量，该成员变量是枚举之一。（该调用没有可观察到的效果）

我的编码风格是在“开关”之前进行一次调用并保存值以将其与每个 somethingX 进行比较，但我想知道这对于今天的编译器是否有争议。

我也不确定自己用谷歌搜索什么来找到答案。

谢谢，

AK

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:37:21.363

这没有实际意义，特别是如果方法是可变的。

如果`getValue`未声明`const`，则无法优化调用，因为后续调用可能返回不同的值。

如果它被声明，编译器优化调用`const`更容易，但**也不是微不足道的。**它需要访问实现，以确保调用没有副作用。即使被标记`const`（修改并返回全局），它也有可能返回不同的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:43:18.473

`getValue()`除非编译器可以在编译那段代码时检查其定义，否则它不能忽略第二次调用，因为它不知道该调用是否具有可观察的效果以及第二次是否返回相同的值。

即使它看到了定义，它也*可能*（这是我对一些编译器内部结构的疯狂猜测）不会特意去检查它。您唯一的机会是实现是微不足道的*并*内联两次，*然后*被公共子表达式消除所捕获。**编辑：**由于定义在标题中，而且很小，因此（内联和后续的 CSE）很可能会发生。不过，如果您想确定，请检查`g++ -O2 -S`您的编译器的输出或等效项。

所以总而言之，你不应该*期望*优化会发生。再说一次，`getValue`可能很便宜，因此不太值得手动优化。与几个机器周期相比，额外的生产线是什么？不多，在大多数情况下。如果您正在编写大量代码，那么您不应该询问而只是检查它（反汇编/分析）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:53:55.520

正如其他答案所指出的那样，编译器通常无法消除第二次调用，因为可能会有副作用。

然而，一些编译器有办法告诉编译器该函数没有副作用并且允许这种优化。在 GCC 中，函数可以声明为**pure**。例如：

`int square(int) __attribute__((pure));`

表示该函数“除了返回一个值之外没有任何作用，并且 [the] 返回值仅取决于参数和/或全局变量。”</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:43:41.237

你写了：

> 我的编码风格是在“开关”之前进行一次调用并保存值以将其与每个 somethingX 进行比较，但我想知道这对于今天的编译器是否有争议。

是的，这是一个有争议的问题。编译器所做的是它的业务。您将忙于编写可维护的代码，而不是试图对一个比我们任何人都希望的工作做得更好的软件进行微观管理。

专注于编写可维护的代码并信任编译器来执行其任务。如果您后来发现您的代码太慢，那么您可以担心优化。

记住一句谚语：

> 过早的优化是万恶之源。

# ios - 删除或卸载之前添加的库：cocoapods

> ID：13751147
> 
> 赞同：353
> 
> 时间：2012-12-06T19:35:45.353
> 
> 标签：ios, iphone, ipad, cocoapods

我通过 cocoapods 在我的 iOS 应用程序中添加了一个外部框架。如何从项目中删除该库？

* * *

## 回答 #1

> 赞同：478
> 
> 时间：2012-12-07T07:50:48.403

从 Podfile 中删除 lib，然后`pod install`再删除。

* * *

## 回答 #2

> 赞同：390
> 
> 时间：2016-02-10T13:33:51.993

**[Kyle Fuller](https://fuller.li/)**编写的脚本已消除了简单文件夹删除或安装在现有安装上的不良副作用- [deintegrate](https://github.com/CocoaPods/cocoapods-deintegrate)并且这是正确的工作流程：

1.  安装干净：

    ```
    sudo gem install cocoapods-clean 
    ```

2.  在项目的文件夹中运行 deintegrate：

    ```
    pod deintegrate 
    ```

3.  ~~清洁~~（此工具不再可用）：

    ```
    pod clean 
    ```

4.  修改您的 podfile（删除您不想再使用的 pod 的行）并运行：

    ```
    pod install 
    ```

完毕。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-08-27T01:14:20.133

1.  从 Podfile 中删除库

2.  `pod install`在终端上运行

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-09T18:21:44.043

这些都不适合我。我有 pod 版本 1.5.3，正确的方法是从 Podfile 中删除不再需要的 pod，然后运行：

```
pod update 
```

这会从您的 Podfile 更新您的 Podfile.lock 文件，删除已删除的库并更新您的所有库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-06T09:21:34.300

1.  从 Podfile 中删除 pod 名称（要删除的），然后
2.  打开终端，设置项目文件夹路径
3.  运行 pod install --no-integrate

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-09T08:23:01.370

从打开终端中删除 pod 名称`Podfile`，设置项目文件夹路径和运行`pod update`命令。

注意：`pod update`会将所有库更新到最新版本，并将删除名称已从 podfile 中删除的那些库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-15T15:57:35.910

首先，确定安装了哪些版本的 Cocoapods：

```
gem list --local | grep cocoapods 
```

你得到这样的输出：

```
cocoapods (1.11.2)
cocoapods-clean (0.0.1)
cocoapods-core (1.11.2, 1.10.2, 1.10.1)
cocoapods-deintegrate (1.0.4) 
```

要完全删除，请发出以下命令：

```
gem uninstall cocoapods
gem uninstall cocoapods-clean
gem uninstall cocoapods-core
gem uninstall cocoapods-deintegrate 
```

再次运行以确认 Cocoapods 已被删除：

```
gem list --local | grep cocoapods 
```

您的目录中的隐藏文件夹中可能有残留的人工制品。删除这些：

```
rm -rf ~/.cocoapods 
```

# php - unable to retreve Nodevalue from xml response in ajax

> ID：13751148
> 
> 赞同：0
> 
> 时间：2012-12-06T19:35:50.600
> 
> 标签：php, xml, ajax, request

**brothers!! :)** I am e beginner in ajax and I have a problem retrieving a note value from an response XML. what i am trying to do is (simple i think): with ajax I make a request for an XML file to a PHP page. I get the XML but i can not gat the notes values.

my simple XML:

```
<items>
  <item>
    <name>..</name>
    <address>..</address>
    <owner>..</owner>
  </item>
</items> 
```

my PHP (that response):

```
<?php
    header('Content-Type: text/xml');
    $doc = new DOMDocument();
    $doc->formatOutput=true;
    $doc->load('data.xml');
    echo $doc->saveXML();
?> 
```

my request function:

```
 function getUserParameters(){
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange=function Return(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            var result = xmlhttp.responseXML;
            var name= result.getElementsByTagName("name");
            var val = name[0].childNodes[0].nodeValue;
            alert(val);
        }
  }
xmlhttp.open("GET","request.php",true);
xmlhttp.send();
} 
```

everything works ok, but when i try to **alert(val)** the string is null. Nothing appear! can anyone tell me what i do wrong please?
theks a lot for your time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:34:17.667

First try calling the PHP response page directly, you should see the XML contents. If not, put the full path (not URL) of the XML file instead of data.xml.

This is not the ideal way of doing this though. You would be better to use the PHP reponse page to parse the data that you need put it into JSON and then use the Ajax to retrieve the values. See this page for more info: [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# android - 服务方法在android中不起作用

> ID：13751153
> 
> 赞同：0
> 
> 时间：2012-12-06T19:36:13.513
> 
> 标签：android, android-service, toast

我刚刚创建了一个服务，如下所示：

```
package com.example.timepass;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class alarm extends Service{

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Toast.makeText(this, "Entered in service", Toast.LENGTH_SHORT).show();

}

 public int onStartCommand(Intent intent, int flags, int startId) {

         Toast.makeText(this, "onStartCommand...", Toast.LENGTH_LONG).show();
         return 1; 

        // Log.i("YourService", "Yes this works.");
     }
   @Override
   public void onDestroy() {
       super.onDestroy();
       Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
   }

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "Changed", Toast.LENGTH_SHORT).show();
    return null;
}

} 
```

现在，当我通过以下命令从 mainactivity 启动服务时：

```
Intent myIntent = new Intent("com.example.timepass.ALARM");
MainActivity.this.startService(myIntent); 
```

通过这样做没有错误，但没有服务类的 TOAST 被显示

我的清单是：

```
<service class=".alarm" android:name=".alarm" android:enabled="true">
  <intent-filter>
   <action android:value="com.example.timepass.ALARM"
               android:name=".alarm" />

       </intent-filter>
   </service> 
```

请指导我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:45:23.437

可能您没有`service in your manifest`，或者它没有与您的操作相匹配的 。检查 LogCat 应该会发现一些可能有帮助的警告。

更有可能的是，您应该通过以下方式启动服务：

```
startService(new Intent(this, alarm.class)); 
```

# sql-server - 致命错误：在 mac osx lion 10.7.4 上调用未定义函数 mssql_connect()

> ID：13751159
> 
> 赞同：0
> 
> 时间：2012-12-06T19:36:32.000
> 
> 标签：sql-server, php

所以，我可以从终端执行 php 脚本，但是当脚本尝试使用 mssql_connect() 连接到数据库时，我遇到了这个问题。我已经浏览了几乎所有可用于此问题的资源。但是，我好像有什么不一样的。我对 Mac 还很陌生，但我遵循了大多数步骤，例如取消注释

```
 #LoadModule php5_module libexec/apache2/libphp5.so 
```

从 httpd.conf 文件，在系统偏好设置下打开网络共享。但是，我不确定是否还需要从 php.ini 文件中取消注释 php_mysql/(i).dll，因为我使用的是 ms sql 而不是我的 sql。此外，我似乎没有 php_mssql70.dll，就像我在搜索过程中遇到的一个论坛中建议的那样。但是，我的 .ini 文件中有 2 行读取

```
extension=php_pdo_mssql.dll   
extension=php_pdo_mysql.dll  \\Yes. They both read the same thing. 
```

有人可以指出我正确的方向吗？我不确定我提供的信息是否足够。但是，是的，我想我已经阅读并尝试效仿 90% 声称解决此问题的论坛。

注意：这篇文章似乎与我正在尝试的内容非常接近，因为用户对此是个菜鸟。我还没有真正自己设置过 PHP、Apache 等，因为到目前为止我只在学校使用过 PHP 和 MySQL。 [如何在 mac v 10.7.2 上安装/使用 php](https://stackoverflow.com/questions/8440948/how-to-install-use-php-on-mac-v-10-7-2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:54:39.617

由于您*不在*Windows 上，因此您需要忽略任何提及包含“*.dll”的内容的人。

查找`extensions.ini`应该在与 php.ini 相同的文件夹中，或者在非常接近它的文件夹中，您应该能够从那里启用它，它应该是一个 .so 文件。如果它不存在，则根本没有安装扩展。不过，我不知道如何在 OSX 上添加 PHP 扩展。：我

# java - Eclipse - 从包资源管理器访问右键单击属性的简单方法？

> ID：13751160
> 
> 赞同：0
> 
> 时间：2012-12-06T19:36:33.183
> 
> 标签：java, eclipse, package-explorer

我在 Eclipse (Java) 中遇到了这个工作流问题，其中我的包资源管理器中当然有数百个文件。我知道我可以用它`Ctrl+R`来打开一个很棒的文件 - 但是我无法从选项卡中右键单击并执行诸如`Compare With`以及`Team > Commit`我需要的许多其他有用选项之类的事情。这导致我在包资源管理器中浏览文件 - 它不像文件出现在包资源管理器中`Ctrl+R`- 这是一个烦人的工作流程问题。

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:47:44.750

在使用 Ctrl-R（或 Mac 上的 Command-Shift-R）打开文件编辑器后，您可以在文件编辑器内右键单击以使用 Compare With 和 Team——Package Explorer 中的大多数选项都可用作 Java 文件编辑器中的上下文选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:50:56.820

发现的包资源管理器实际上有一个黄色的左/右箭头按钮，可以在包资源管理器中打开当前文件。这是我一直在寻找的功能。

# java - JUnit @Theory：有没有办法抛出有意义的异常？

> ID：13751161
> 
> 赞同：2
> 
> 时间：2012-12-06T19:36:35.087
> 
> 标签：java, unit-testing, testing, junit, junit-theory

我最近尝试了 Junit @Theory 测试风格：这是一种非常有效的测试方式。但是，我对测试失败时引发的异常不满意。例子 ：

```
import static org.junit.Assert.assertEquals;
import org.junit.experimental.theories.DataPoint;
import org.junit.experimental.theories.Theories;
import org.junit.experimental.theories.Theory;
import org.junit.runner.RunWith;

@RunWith(Theories.class)
public class TheoryAndExceptionTest {

    @DataPoint
    public static String yesDataPoint = "yes";

    @Theory
    public void sayNo(final String say) {
        assertEquals("no",say);
    }
} 
```

我希望这个测试抛出一个**描述性**异常，而不是得到类似的东西：

```
org.junit.ComparisonFailure: expected:<'[no]'> but was:<'[yes]'> 
```

...我明白了：

```
org.junit.experimental.theories.internal.ParameterizedAssertionError: sayNo(yes) at
....
[23 lines  of useless stack trace cut]
...
Caused by: org.junit.ComparisonFailure: expected:<'[no]'> but was:<'[yes]'>
.... 
```

有没有办法摆脱前 24 行，除了 yesDataPoint @DataPoint 导致失败之外什么都不告诉 * *my *test ？*这是我需要的信息，以了解失败的原因，但我真的很想知道它是*如何*同时失败的。

**[编辑]**

我用经典的 org.junit.Assert.assertEquals 替换了 org.fest.assertions 的用法，以避免混淆。此外，它也与 Eclipse 无关：当您从命令行运行 @Theory 并使其失败时，您也会得到那个长（无用/令人困惑的）堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:37:17.530

[捕获比较](http://kentbeck.github.com/junit/javadoc/latest/org/junit/ComparisonFailure.html)失败并打印它的 GetMessage()是否有问题？

```
public void sayNo(final String say) {
    try {
        assertThat(say).isEqualTo("no");
    }catch(ComparisonFailure e) {
        System.out.println(e.getMessage);
    }
} 
```

抱歉，如果我有什么误解。

编辑：ComparisonFailure 还具有 getExpected() 和 getActual() 方法，如果您正在寻找某些格式，您可以调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:40:59.253

你有一个非常奇怪的图书馆。assertThat 的语法很奇怪。我建议：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.experimental.theories.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;

@RunWith(Theories.class)
public class TheoryAndExceptionTest {

    @DataPoint
    public static String yesDataPoint = "yes";

    @Theory
    public void sayNo(final String say) {

        assertThat(say,is("no"));
    }

    @Test
    public void yesNo() {
        assertEquals("must be equal, ", "yes","no");
    }
} 
```

然后你将拥有：

```
org.junit.experimental.theories.internal.ParameterizedAssertionError: sayNo(yesDataPoint)
....

Caused by: java.lang.AssertionError: 
Expected: is "no"
     got: "yes" 
```

至于 assertEqual 你是对的，它似乎对理论没有帮助。仅适用于@Test：

```
 org.junit.ComparisonFailure: must be equal,  expected:<[yes]> but was:<[no]> 
```

# 增加项：

你也可以使用

```
assertThat("must be equal, ", say,is("no")); 
```

比你有输出：

```
Caused by: java.lang.AssertionError: must be equal, 
Expected: is "no"
     got: "yes" 
```

至于过滤多余的行，请使用 Eclipse 中的 Failure Trace View。

# java - 如何测试 Weka 文本分类 (FilteredClassifier)

> ID：13751162
> 
> 赞同：2
> 
> 时间：2012-12-06T19:36:45.900
> 
> 标签：java, serialization, classification, weka

看了很多例子，到目前为止还没有运气。我想对自由文本进行分类。

1.  配置文本分类器。（FilteredClassifier 使用 StringToWordVector 和 LibSVM）
2.  训练分类器（添加大量文档，训练过滤文本）
3.  将 FilteredClassifier 序列化到磁盘，退出应用程序

然后稍后

1.  加载序列化的 FilteredClassifier
2.  给东西分类！

当我尝试从磁盘读取并对事物进行分类时，一切正常。所有文档和示例都显示了同时构建的培训列表和测试列表，就我而言，我正在尝试在事后构建测试列表。

**单独的 FilteredClassifier 不足以创建与原始训练集具有相同“字典”的测试实例，那么如何保存以后需要分类的所有内容？**

[http://weka.wikispaces.com/Use+WEKA+in+your+Java+code](http://weka.wikispaces.com/Use+WEKA+in+your+Java+code)只是说“从某处加载的实例”，并没有说任何关于使用类似字典的内容。

```
ClassifierFramework cf = new WekaSVM();
if (!cf.isTrained()) {
  train(cf); // Train, save to disk
  cf = new WekaSVM(); // reloads from file
}
cf.test("this is a test"); 
```

结束投掷

```
java.lang.ArrayIndexOutOfBoundsException: 2
at weka.core.DenseInstance.value(DenseInstance.java:332)
at weka.filters.unsupervised.attribute.StringToWordVector.convertInstancewoDocNorm(StringToWordVector.java:1587)
at weka.filters.unsupervised.attribute.StringToWordVector.input(StringToWordVector.java:688)
at weka.classifiers.meta.FilteredClassifier.filterInstance(FilteredClassifier.java:465)
at weka.classifiers.meta.FilteredClassifier.distributionForInstance(FilteredClassifier.java:495)
at weka.classifiers.AbstractClassifier.classifyInstance(AbstractClassifier.java:70)
at ratchetclassify.lab.WekaSVM.test(WekaSVM.java:125) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:50:13.267

在序列化分类器时，序列化你的`Instances`哪个包含训练数据的定义 - 相似的字典？ -

```
Instances trainInstances = ... //

Instances trainHeader = new Instances(trainInstances, 0);
trainHeader.setClassIndex(trainInstances .classIndex());

OutputStream os = new FileOutputStream(fileName);
ObjectOutputStream objectOutputStream = new ObjectOutputStream(os);
objectOutputStream.writeObject(classifier);
if (trainHeader != null)
    objectOutputStream.writeObject(trainHeader);
objectOutputStream.flush();
objectOutputStream.close(); 
```

反序列化：

```
Classifier classifier = null;
Instances trainHeader = null;

InputStream is = new BufferedInputStream(new FileInputStream(fileName));
ObjectInputStream objectInputStream = new ObjectInputStream(is);
classifier = (Classifier) objectInputStream.readObject();
try { // see if we can load the header
    trainHeader = (Instances) objectInputStream.readObject();
} catch (Exception e) {
} 
objectInputStream.close(); 
```

用于`trainHeader`创建新的`Instance`：

```
int numAttributes = trainHeader.numAttributes();
double[] vals = new double[numAttributes];

for (int i = 0; i < numAttributes - 1; i++) {
    Attribute attribute = trainHeader.attribute(i);

    //If your attribute is nominal or string:       
    double value = attribute.indexOfValue(myStrVal); //get myStrVal from your source

    //If your attribute is numeric
    double value = myNumericVal; //get myNumericVal from your source

    vals[i] = value;
}

vals[numAttributes] = Instance.missingValue();

Instance instance = new Instance(1.0, vals);
instance.setDataset(trainHeader);
return instance; 
```

# javascript - javascript - 未捕获的 ReferenceError：未定义键

> ID：13751166
> 
> 赞同：39
> 
> 时间：2012-12-06T19:36:53.590
> 
> 标签：javascript

在包含的脚本中运行以下命令时出现错误。但是如果我从谷歌浏览器控制台运行命令，它就可以正常工作。

```
var a = {};
console.log(keys(a)); 
```

错误：

```
 Uncaught ReferenceError: keys is not defined 
```

这里发生了什么？如何`keys`在包含的脚本中使用该函数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-06T19:39:13.923

```
console.log(keys(a)) 
```

`keys()`不是浏览器提供的用于您的代码的功能。你可能想要`Object.keys()`

```
a = {};
console.log(Object.keys(a)); 
```

有时，控制台会暴露一些额外的功能，以便于调试，而这些功能在您的实际代码中是不可用的。`keys()`听起来像一个，又`copy('some text')`是另一个。

遗憾的是，我找不到列出它们的链接。但我很确定不止这两个功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:42:22.437

每当您遇到这样的错误时，请尝试搜索报告为未定义的函数/变量的定义。如果*已*定义，请尝试寻找可能无法正常工作的原因。你知道`keys`函数是`Object`构造函数的一部分吗？你不能把它当作一个独立的函数来调用。虽然如果您养成这样做的习惯，请尝试制作自己的函数来允许这样做：

```
function key( object ) {

    return Object.keys( object );

} 
```

您的代码应该通过给定这样的定义。

# rest - REST：删除非规范资源

> ID：13751169
> 
> 赞同：1
> 
> 时间：2012-12-06T19:37:00.333
> 
> 标签：rest

*   如果`/users/{username}`是（一个不能没有另一个就不能存在）的**别名**，`/users/{userId}`那么我期望删除前者意味着您要删除后者。
*   如果`/lists/{listId}/users/{userId}`是对（一个可以不存在另一个）的**引用**`/users/{userId}`，那么我希望能够在不影响规范资源的情况下删除该引用。
*   在这两种情况下，调用`HTTP GET`都会导致规范资源的[HTTP 303 。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4)

我认为这两种类型的行为相同`HTTP GET`但对于`HTTP DELETE`.

这导致我提出以下问题：

1.  *在别名*`HTTP DELETE`上调用时会发生什么？
**   从列表中删除引用而不删除它们指向的实际对象的适当方法是什么？*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:04:08.783

[5.3.5。删除](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-21#section-5.3.5)

> DELETE 方法请求源服务器删除目标资源。此方法可能会被源服务器上的人工干预（或其他方式）覆盖。即使从源服务器返回的状态码表明操作已经成功完成，客户端也不能保证操作已经执行。但是，服务器不应指示成功，除非在给出响应时它打算删除资源或将其移动到无法访问的位置。

**> 如果响应包含一个成功的响应应该是 200（OK）

> 描述状态的表示，如果尚未执行该操作，则为 202（已接受），如果已执行该操作但响应不包含表示，则为 204（无内容）。**

所以：

> 如果 /users/{username} 是 /users/{userId} 的别名（没有另一个就不能存在）那么>我希望删除前者意味着您要删除后者
> 
> **当对别名调用 HTTP DELETE 时会发生什么？**

必须删除“两个”资源。据我了解，如果没有其他人就不能存在，它们只是同一资源的不同标识符，因此在删除其中一个之后，必须用 404 Not Found 来回答这两个请求。

> 从列表中删除引用而不删除它们指向的实际对象的适当方法是什么？

**更新：**

> 我的问题是应该使用什么 HTTP 方法来指示客户端想要从列表中删除引用？

如果用户（客户端？）想在不删除实际资源的情况下从列表中删除引用，那么只有一种方法 - 客户端必须将带有修改列表的 PUT 请求发送到服务器，这意味着必须用新列表替换现有列表。如果用户没有足够的权限，可以返回“403 Forbidden”作为响应。

如果资源（即本例中的列表）应该缓存在客户端并且删除一些其他资源会影响此列表，则要执行此操作的相反操作（即在列表更改时通知用户），我能想到的唯一方法是“通知" 用户将使用缓存。例如：

**要求**

```
GET /list HTTP/1.1
Host: service.org 
```

**回复**

```
HTTP/1.1 200 OK
Content-Type: application/...
Content-Length: ...
Cache-Control: private, max-age=0
ETag: a32lasdf 
```

在上述 Cache-Control 标头值“private, max-age=0”的响应中，客户端可以在本地缓存表示，但每次都必须向服务器发送以下请求：

**要求**

```
GET /list HTTP/1.1
Host: service.org
If-None-Match: a32lasdf 
```

如果 /list 资源未被触及，则 ETag 值将匹配“If-None-Match”值，服务器可以以“304 Not Modified”响应，客户端不需要做任何事情。但是，如果之前的删除操作影响了 /list，ETag 的哈希码将与“If-None-Match”标头提供的哈希码不同，因此服务器将返回 /list 资源的新表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:23:12.180

URI 是对资源的引用，而不是资源本身。从某种意义上说，它们都是规范的。不同的 URI 可以标识相同的资源。他们也可能是一些甚至还不存在的东西的持有者。“一个不能没有另一个”的概念是特定于应用程序的，它不是 REST 约束。理想情况下，您不会有相互依赖的 URI。如果删除资源，所有指向它的 URI 都将指向任何内容。或者至少如果 URI 指向资源而不是彼此，那么事情应该是这样的。

**更新：**

根据[RFC2396](https://www.ietf.org/rfc/rfc2396.txt)：

> 1.1 URI概述：
> 
> ...
> 
> 资源
> 
> 资源可以是任何具有身份的东西。熟悉的示例包括电子文档、图像、服务（例如，“洛杉矶今天的天气报告”）以及其他资源的集合。并非所有资源都是网络“可检索”的；例如，图书馆中的人、公司和装订书籍也可以被视为资源。
> 
> **资源是到一个实体或一组实体的概念映射**，不一定是在任何特定时间实例对应于该映射的实体。因此，资源可以保持不变，即使它的内容——它当前对应的实体——随着时间而改变，只要概念映射在过程中没有改变。
> 
> 标识符
> 
> **标识符是一个对象，它可以作为对具有身份的事物的引用。** 在 URI 的情况下，对象是具有受限语法的字符序列。

**更新：**

我想，如果资源可以通过多个 URI 访问/修改，则由应用程序指定一个规范的（将包含在响应超文本中的 URI）。但是，是的，不规范的是 URI（从应用程序的角度来看），而不是资源。*

# c# - 按订单 ID 排序的文章/新闻

> ID：13751174
> 
> 赞同：0
> 
> 时间：2012-12-06T19:37:12.623
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

我在文章/新闻管理系统中想出一个订购模式和更改订单时遇到了一些麻烦。

这里是：我有新闻对象模型如下：

```
 class News {
   int id;
   string Title;
   string Content;
   string OrderId;
   // trimmed
 } 
```

我有对象模型的 CRUD。并列出如下：

```
Id Title Order
1\. Foo    -+
2\. Bar    -+
3\. Glah   -+ 
```

我想要做的是当用户点击时 - 对于第一个新闻，我想替换 1 和 2 orderid，当然也显示。

那么我如何在服务器端做到这一点？假设 1\. 商品订单 ID 为 1，我如何找到第一个订单 ID 高于此商品的商品？

或者采取 2\. Bar，当我单击 - 时，我如何使用第一个查找/替换订单 ID。或者我单击 + 如何用 3\. Glah 替换此新闻的订单 ID？

有更好的方法吗？

还有一些用户拖放的用户界面？对此有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:56:27.447

我认为这里最好的方法是实现一个`Swap`方法，它需要两个`News`对象并交换它们`OrderId`，我假设它是数字的。

所以这个想法是你将这个方法传递给被点击的对象，以及上面的一个（如果用户点击了`+`）或下面的一个（如果他们点击了`-`）。如果你这样做，那么你就避免了试图找到下一个或上一个项目的任务。

在拖放的情况下，任务略有不同。您首先需要检索（包括）被拖动的项目和放置目标之间的所有项目，按`OrderId`. 从那里您将拖动的项目与下一个或上一个项目交换（取决于方向），并继续这样做，直到您将它与放置目标交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:19:28.253

当用户更改项目的位置时，服务器需要知道哪个项目被更改以及它的新位置是什么。在下面的代码中，我使用 List 来找出新的位置。在此示例代码中，newPosition 是新的从零开始的位置，而 selectedArticle 是被移动的文章。

```
List<Article> articles = LoadSortedArticles()
articles.Remove(selectedArticle);
articles.Insert(newPosition, selectedArticle);
UpdateArticles(articles); 
```

运行后，列表中的文章索引会告诉您它的新位置。这适用于列表中的所有文章，并且对于拖放 UI 的工作方式相同。我不知道实体框架，但是如果您可以将数据库中的orderId字段映射到列表中文章的索引，那么您应该很好。

我希望这至少能给你一些想法。也许其他人可以提供特定于实体框架的解决方案，但我认为将文章放入排序列表并让列表完成工作可能是最简单的方法。

# c# - 实体框架在更新一个属性时会遍历所有记录（60,000 条！）

> ID：13751176
> 
> 赞同：1
> 
> 时间：2012-12-06T19:37:14.120
> 
> 标签：c#, .net, entity-framework, entity-framework-4, entity

我正在尝试为 POCO 对象设置单个属性的值，看起来 Entity 正在检索最初检索 POCO 对象的数据库表中的每条记录。这是代码：

```
public void DeleteFile(int fileid)
{
    var context = GetContext(myTrans, false);
    FILE pocofile = (from f in context.FILES.All()
                     where f.File_Id == fileId
                     select f).FirstOrDefault();

    // the following line causes a retrieve of 60,000 records
    pocofile.State_Id = Global.DeletedStateId // global constant

    // additional code that is eventually reached after about 10 minutes
} 
```

我们有一个`FILES`表，其中有一`State_Id`列映射到`STATE`表。因此，当我尝试设置上面的 State_Id 属性时，它似乎设置了第一个文件，但从它在`FILE`poco 类中遇到的断点判断，一旦它设置了`State_Id`from ，它似乎正在为数​​据库中的每个文件进行检索一开始。

FILE.cs 类也粘贴在下面以供参考。它基本上在一个 60,000 长的循环中碰到了很多 getter 和 setter，如果我在任何给定时间在其中一个上设置断点并检查调试器中的 File_Id，它每次都有一个新的 File_Id，这就是我的方式知道它正在遍历所有这些。

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated from a template.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;    

namespace FORTRESSPOCO
{
    public partial class FILE
    {
        #region Primitive Properties

        public virtual int File_Id
        {
            get;
            set;
        }

        public virtual string Name
        {
            get;
            set;
        }

        public virtual string Description
        {
            get;
            set;
        }

        public virtual Nullable<System.DateTime> Expiration_Date
        {
            get;
            set;
        }

        public virtual bool Is_Directory
        {
            get;
            set;
        }

        public virtual string Path
        {
            get;
            set;
        }

        public virtual int Data_Asset_Id
        {
            get { return _data_Asset_Id; }
            set
            {
                if (_data_Asset_Id != value)
                {
                    if (Data_Asset != null && Data_Asset.Data_Asset_ID != value)
                    {
                        Data_Asset = null;
                    }
                    _data_Asset_Id = value;
                }
            }
        }
        private int _data_Asset_Id;

        public virtual int State_Id
        {
            get { return _state_Id; }
            set
            {
                if (_state_Id != value)
                {
                    if (STATE != null && STATE.State_Id != value)
                    {
                        STATE = null;
                    }
                    _state_Id = value;
                }
            }
        }
        private int _state_Id;

        #endregion
        #region Navigation Properties

        public virtual Data_Asset Data_Asset
        {
            get { return _data_Asset; }
            set
            {
                if (!ReferenceEquals(_data_Asset, value))
                {
                    var previousValue = _data_Asset;
                    _data_Asset = value;
                    FixupData_Asset(previousValue);
                }
            }
        }
        private Data_Asset _data_Asset;

        public virtual ICollection<File_DateTime_Attribute> File_DateTime_Attribute
        {
            get
            {
                if (_file_DateTime_Attribute == null)
                {
                    var newCollection = new FixupCollection<File_DateTime_Attribute>();
                    newCollection.CollectionChanged += FixupFile_DateTime_Attribute;
                    _file_DateTime_Attribute = newCollection;
                }
                return _file_DateTime_Attribute;
            }
            set
            {
                if (!ReferenceEquals(_file_DateTime_Attribute, value))
                {
                    var previousValue = _file_DateTime_Attribute as FixupCollection<File_DateTime_Attribute>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupFile_DateTime_Attribute;
                    }
                    _file_DateTime_Attribute = value;
                    var newValue = value as FixupCollection<File_DateTime_Attribute>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupFile_DateTime_Attribute;
                    }
                }
            }
        }
        private ICollection<File_DateTime_Attribute> _file_DateTime_Attribute;

        public virtual ICollection<File_Int_Attribute> File_Int_Attribute
        {
            get
            {
                if (_file_Int_Attribute == null)
                {
                    var newCollection = new FixupCollection<File_Int_Attribute>();
                    newCollection.CollectionChanged += FixupFile_Int_Attribute;
                    _file_Int_Attribute = newCollection;
                }
                return _file_Int_Attribute;
            }
            set
            {
                if (!ReferenceEquals(_file_Int_Attribute, value))
                {
                    var previousValue = _file_Int_Attribute as FixupCollection<File_Int_Attribute>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupFile_Int_Attribute;
                    }
                    _file_Int_Attribute = value;
                    var newValue = value as FixupCollection<File_Int_Attribute>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupFile_Int_Attribute;
                    }
                }
            }
        }
        private ICollection<File_Int_Attribute> _file_Int_Attribute;

        public virtual ICollection<File_String_Attribute> File_String_Attribute
        {
            get
            {
                if (_file_String_Attribute == null)
                {
                    var newCollection = new FixupCollection<File_String_Attribute>();
                    newCollection.CollectionChanged += FixupFile_String_Attribute;
                    _file_String_Attribute = newCollection;
                }
                return _file_String_Attribute;
            }
            set
            {
                if (!ReferenceEquals(_file_String_Attribute, value))
                {
                    var previousValue = _file_String_Attribute as FixupCollection<File_String_Attribute>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupFile_String_Attribute;
                    }
                    _file_String_Attribute = value;
                    var newValue = value as FixupCollection<File_String_Attribute>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupFile_String_Attribute;
                    }
                }
            }
        }
        private ICollection<File_String_Attribute> _file_String_Attribute;

        public virtual STATE STATE
        {
            get { return _sTATE; }
            set
            {
                if (!ReferenceEquals(_sTATE, value))
                {
                    var previousValue = _sTATE;
                    _sTATE = value;
                    FixupSTATE(previousValue);
                }
            }
        }
        private STATE _sTATE;

        #endregion
        #region Association Fixup

        private void FixupData_Asset(Data_Asset previousValue)
        {
            if (previousValue != null && previousValue.FILES.Contains(this))
            {
                previousValue.FILES.Remove(this);
            }

            if (Data_Asset != null)
            {
                if (!Data_Asset.FILES.Contains(this))
                {
                    Data_Asset.FILES.Add(this);
                }
                if (Data_Asset_Id != Data_Asset.Data_Asset_ID)
                {
                    Data_Asset_Id = Data_Asset.Data_Asset_ID;
                }
            }
        }

        private void FixupSTATE(STATE previousValue)
        {
            if (previousValue != null && previousValue.FILES.Contains(this))
            {
                previousValue.FILES.Remove(this);
            }

            if (STATE != null)
            {
                if (!STATE.FILES.Contains(this))
                {
                    STATE.FILES.Add(this);
                }
                if (State_Id != STATE.State_Id)
                {
                    State_Id = STATE.State_Id;
                }
            }
        }

        private void FixupFile_DateTime_Attribute(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (File_DateTime_Attribute item in e.NewItems)
                {
                    item.FILE = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (File_DateTime_Attribute item in e.OldItems)
                {
                    if (ReferenceEquals(item.FILE, this))
                    {
                        item.FILE = null;
                    }
                }
            }
        }

        private void FixupFile_Int_Attribute(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (File_Int_Attribute item in e.NewItems)
                {
                    item.FILE = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (File_Int_Attribute item in e.OldItems)
                {
                    if (ReferenceEquals(item.FILE, this))
                    {
                        item.FILE = null;
                    }
                }
            }
        }

        private void FixupFile_String_Attribute(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (File_String_Attribute item in e.NewItems)
                {
                    item.FILE = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (File_String_Attribute item in e.OldItems)
                {
                    if (ReferenceEquals(item.FILE, this))
                    {
                        item.FILE = null;
                    }
                }
            }
        }

        #endregion
    }
} 
```

这种行为有什么合乎逻辑的原因吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:36:28.260

是的，这种行为有一个合乎逻辑的原因。但在我看来，这不是你的错，而是 EF 4.0 POCO T4 模板的错。问题在于这些自动生成的`Fixup...`方法与延迟加载的结合。

会发生以下情况：

*   您设置 FK 属性：

    ```
    pocofile.State_Id = Global.DeletedStateId; 
    ```

*   它调用`State_Id`setter：

    ```
    if (_state_Id != value)
    {
        if (STATE != null && STATE.State_Id != value)
        {
            STATE = null;
        }
        _state_Id = value;
    } 
    ```

*   第一个`if`条件是`true`，除非您设置与`FK`加载的实体相同的值（FK 没有变化）。第二个`if`条件是`true`因为延迟加载将`STATE`在表达式中从数据库加载`STATE != null`并且因为`STATE`数据库中的 不能是`null`因为您的关系不可为空（`State_Id`是一个`int`）。如果不`STATE.State_Id`等于，则不能等于，这将违反数据库中的 FK 约束。于是，被执行。换句话说，导航属性的设置器被称为：`value``_state_Id``value``STATE = null``STATE`

    ```
    if (!ReferenceEquals(_sTATE, value))
    {
        var previousValue = _sTATE;
        _sTATE = value;
        FixupSTATE(previousValue);
    } 
    ```

*   `if`条件再次是`true`因为`_STATE`is not `null`（它之前刚刚从数据库加载）并且`value`is `null`。因此，`FixupSTATE`将使用`previousValue`不是的参数调用`null`：

    ```
    if (previousValue != null && previousValue.FILES.Contains(this))
        //... 
    ```

*   现在，如果启用了延迟加载（默认情况下），访问`previousValue.FILES`集合将导致延迟加载启动并发出数据库查询，`previousValue.FILES`从数据库加载整个集合 - 在您的情况下似乎包含 60000 个实体。

这个问题的解决方案是禁用延迟加载：

```
var context = GetContext(myTrans, false);
context.ContextOptions.LazyLoadingEnabled = false;

//... 
```

或者，修改 T4 模板，使其不再创建 Fixup 代码（可能很难做到正确）。或者，也许已经有一个针对 EF 4.0 的修改过的 T4 模板可供您使用。或者，升级到 EF >= 4.1，`DbContext`因为 POCO 模板`DbContext`没有此附加代码。生成的 POCO 类要简单得多。

# c# - 制作通用表单参数

> ID：13751177
> 
> 赞同：0
> 
> 时间：2012-12-06T19:37:15.647
> 
> 标签：c#, .net

我正在尝试创建一个线程类。该类只是创建一个新表单的线程以打开

```
class Threading
{
    private static int sendingForm;
    public void StartThread()
    {
        System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(ThreadProc));
        t.SetApartmentState(System.Threading.ApartmentState.STA);
        t.Start();
    }

    public static void ThreadProc()
    {
        switch (sendingForm)
        {
            case 1:
                System.Windows.Forms.Application.Run(new MainForm());
                break;
            case 2:
                System.Windows.Forms.Application.Run(new ReportPicker());
                break;
        }
    }
} 
```

这个想法很简单，我只是在练习使用线程。我不想在每种形式中都这样做，所以我尝试通过在一个类中回收一些代码。正如你所看到的，我检测我想要去的表格的方式是根据我想要去的表格发送一个数字。基于该数字将是线程运行的形式。如果可能的话，我想改进它。我在想也许一种方法可以将我想去的表单作为参数发送，但由于每个表单都是它自己的类型，我找不到办法。事实上，我不知道是否可以这样做。所以，我在这里问你是否可以帮助我改进我的代码。是否按我要求的方法都没关系，只是尽可能多地回收代码。这是为了学习使用线程。感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:05:02.507

使用线程时有一些黄金法则。

1.  线程处理的数据应该作为参数给出。（sendingForm 是这里的问题。）
2.  UI 不应该是多线程的，使用 Invoke 或 BeginInvoke 来做 UI 的东西。
3.  如果共享资源在线程使用时被修改，则锁定它们。
4.  只有在 UI 中花费的时间太长或没有 UI 时才使用线程。

但我建议您查看 Task 和 BackgroundWorkerThread，而不是在前几次对自己进行一些线程化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:21:31.300

好的，你想去掉 ThreadProc 中的冗余和重复。那挺好的！这是一个可能的解决方案：

```
public static void ThreadProc<TForm>() where TForm : Form, new()
{
    System.Windows.Forms.Application.Run(new TForm());
}

new System.Threading.Thread(() => ThreadProc<MainForm>()) 
```

或者，基于反射：

```
public static void ThreadProc(Type formType)
{
    System.Windows.Forms.Application.Run((Form)Activator.CreateInstance(formType));
}

new System.Threading.Thread(() => ThreadProc(typeof(MainForm))) 
```

或者，调用者注入：

```
public static void ThreadProc(Form form)
{
    System.Windows.Forms.Application.Run(form);
}

new System.Threading.Thread(() => ThreadProc(new MainForm())) 
```

请注意，调用者必须在所有情况下更改以采用新的调用约定。

# c# - if x and y => or if y => or if y in C#

> ID：13751182
> 
> 赞同：-4
> 
> 时间：2012-12-06T19:37:37.350
> 
> 标签：c#, if-statement

可能吗？

例如：

```
z = something;
w = something else;

if (x == z && y == z){
   Do something;
} or if (y == w){
   Do something else;
or if...
or if... 
```

基本上我想要的是一种更简单的写作方式：

```
if (x == z && y == z){
   Do something;
else if (x == z && y == w){
   Do something else;
if else...
if else... 
```

不会每次都比较 x 和 z（这不是最明显的，比如使用多个 if，除非那是更简单的一个）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:42:07.337

听起来你只想嵌套 if/else。

```
if (x == z) {
    if (y == z) {
        ...
    } else if (y == w) {
        ...
    } else {
        ...
    }
} else {
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:43:28.973

首先检查`x!=z`：

```
if (x != z)
{
  // maybe do nothing?
}
else if(y == z)
{
  // Do something;
}
else if (y == w)
{
} 
```

或嵌套：

```
if (x == z)
{
  if(y == z){
    Do something;
  }
  else if (y == w){
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:40:23.450

```
switch (expression)
{
   case constant-expression:
      statement
      jump-statement
   [default:
      statement
      jump-statement]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:40:48.267

只需切换比较的顺序：

```
if (y == z && x == z)
{
   Do something;
}
else if (y == w && x == z)
{
   Do something else;
}
else if ...
else if ... 
```

由于短路，x 只会在第一个条件为真时与 z 进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T23:25:31.410

您可以进行一次比较并将结果保存在本地布尔变量中。然后在 if 语句中使用该布尔值。

```
bool b = (x==z);
if (b && y == z){
    Do something;
else if (b && y == w){
    Do something else; 
```

不过，如果其他人推荐，我仍然会做嵌套。

# nosql - 如何在 Neo4j Cypher 中获取与给定属性具有给定数量的传出关系的节点？

> ID：13751183
> 
> 赞同：3
> 
> 时间：2012-12-06T19:37:38.157
> 
> 标签：nosql, neo4j, graph-databases, cypher

在我的域中，一个节点可以与其他实体有多个相同类型的关系。每个关系都有几个属性，我想检索由至少 2 个呈现给定属性的关系连接的节点。

EG：节点之间的关系有一个属性`year`。如何找到与`year`set to至少有两个传出关系的节点`2012`？

为什么`Chypher`查询到目前为止看起来像这样（语法错误）

```
START x = node(*)
MATCH x-[r:RELATIONSHIP_TYPE]->y
WITH COUNT(r.year == 2012) AS years
WHERE HAS(r.year) AND years > 1
RETURN x; 
```

我也尝试过嵌套查询，但我相信它不允许在`Cypher`. 最接近的是以下内容，但我不知道如何摆脱值为 1 的节点：

```
START n = node(*)
MATCH n-[r:RELATIONSHIP_TYPE]->c
WHERE HAS(r.year) AND r.year == 2012
RETURN n, COUNT(r) AS counter
ORDER BY counter DESC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:03:41.153

试试这个查询

```
START n = node(*)
MATCH n-[r:RELATIONSHIP_TYPE]->c
WHERE HAS(r.year) AND r.year=2012
WITH n, COUNT(r) AS rc
WHERE rc > 1
RETURN n, rc 
```

# javascript - d3 中的分层边缘捆绑在我的 mac 上不起作用

> ID：13751187
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:06.457
> 
> 标签：javascript, svg, d3.js, bundle-layout

我刚刚在我的 Mac 上下载了 d3，并通过在 Firefox 中打开它们开始探索文件夹中的示例。除了捆绑地图之外，它们中的大多数都运行良好。任何人都可以帮助我这是怎么回事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:39:43.853

当我没有在我放置代码（如 MAMP 或 XAMP）的机器上模拟 Web 服务器时，我遇到了这个问题。尝试使用 MAMP 并将代码放在 htdocs 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:39:36.397

如果您指的是[这个示例](http://mbostock.github.com/d3/talk/20111116/bundle.html)，它使用 XHR 获取 JSON 数据以生成图形，并且由于尝试访问您机器上的本地资源而导致错误。

# php - 如何在 Wordpress 中使用 PHP 更改 HTML 标签和属性？

> ID：13751188
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:07.710
> 
> 标签：php, html, image, wordpress

在我的 wordpress 博客中，我正在尝试设置一个代码/一个函数，以使用该`phpThumbnail`库将帖子中的每个图像转换为缩略图。

到目前为止，我有这个函数可以在帖子中生成一组图像，并使用`_thumbnail_id`元键从第一个图像中创建一个缩略图。

```
function sThumbnail() {
$post_id = get_the_ID();
$post = get_post($post_id);
$first_img = '';
ob_start();
ob_end_clean();
$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
$first_img = $matches[1][0];

var_dump($matches);

$first_img = substr($first_img, strlen(site_url()));

$post_thumbnail = get_post_meta( $post_id, '_thumbnail_id', true );

if (!wp_is_post_revision($post_id)) { // Verify that post is not a revision
    if (empty($post_thumbnail)) {       // Check if Thumbnail does NOT exist!
          if(empty($first_img)){
            update_post_meta( $post_id, '_thumbnail_id', 'http://static.guim.co.uk/sys-images/Guardian/About/General/2012/11/1/1351779022327/Nicki-Minaj---You-ve-neve-010.jpg' );
          } else {
              update_post_meta( $post_id, '_thumbnail_id', $first_img );
          } // Get the first image of a post (if available)
    }
}
} 
```

通过一些修改，我可以使用该函数来获取帖子中的所有图像，然后对它们做一些事情。
问题是我不知道如何更改标签的`src`属性`<img>`或删除它并输入一个新的。

基本上，我需要的只是改变`src`属性的 1-2 行或一些关于如何改变/使用标签及其属性的一般信息。

几点：
- 只是为了澄清，`src`我的意思是`<img src="..." />`。
- 上面的函数**不是**我要使用的函数！
仅供参考，前6/7行是获取**图片**标签`src`属性内容的方式。

# python - Python 函数 - 当我不知道函数需要多少参数时，如何动态调用它？

> ID：13751189
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:08.710
> 
> 标签：python, unit-testing, function

我想在 python 中编写一个动态读取模块并创建该模块中所有函数的列表的方法。然后我想遍历这个列表并调用每个函数。到目前为止，我有以下代码：

```
import mymodule
from inspect import getmembers, isfunction

def call_the_functions():
    functions_list = [f for f in getmembers(mymodule) if isfunction(f[1])]
    for f in functions_list:
        result = f() 
```

我的问题是我的程序崩溃了，因为某些函数需要参数。我想做类似以下的事情，但不知道如何：

```
for f in functions_list:
    args = [""] * f.expectedNumberOfArguments()
    result = f(*args) 
```

我会以正确的方式解决这个问题吗？（我基本上是在写一个单元测试，第一个检查就是函数返回一个正确类型的对象，不管它们被调用的参数是什么。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:43:20.520

你可以使用[`inspect.getargspec()`](http://docs.python.org/2/library/inspect.html#inspect.getargspec)：

```
In [17]: def f(x, z=2, *args, **kwargs): pass

In [18]: inspect.getargspec(f)
Out[18]: ArgSpec(args=['x', 'z'], varargs='args', keywords='kwargs', defaults=(2,)) 
```

用任意参数调用你一无所知的函数是否有意义是一个不同的问题......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:48:09.193

你的方法从根本上是有缺陷的。如果仔细编写，函数将通过引发`TypeError`或断言来拒绝无效类型的参数。如果做不到这一点，他们将尝试访问参数上的属性或方法并立即获得一个`AttributeError`.

试图避免编写对正在测试的函数有所了解的单元测试是徒劳的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:49:31.320

您可以使用`inspect`模块和`getargspec`. 这是一个简单的例子：

```
import inspect

def myfunc(x): 
    return x * 2 

print inspect.getargspec(myfunc); 
```

给出：

```
ArgSpec(args=['x'], varargs=None, keywords=None, defaults=None) 
```

某些函数可能是生成器，因此您调用它们的测试策略可能不会给您期望的结果， `inspect.isgeneratorfunction()`这将允许您对此进行测试。

# android - 在 SpannableStringBuilder 中对齐位图

> ID：13751195
> 
> 赞同：3
> 
> 时间：2012-12-06T19:38:33.500
> 
> 标签：android, spannablestring

如何将位图与 SpannableString 中的文本对齐？

```
SpannableStringBuilder ssb = new SpannableStringBuilder(arr_messages.get(position));
String msg1 = ssb.toString();
for (int i=0; i<smileys.length; i++)
{   
        if (msg1.indexOf(smileys[i]) > 0)
        {
            int t = msg1.indexOf(smileys[i]);
            ssb.setSpan(new ImageSpan(bitmapArray.get(i)), t, t+2, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        }
}
holder.txtName.setText(ssb, BufferType.SPANNABLE); 
```

我想用这些图像证明问题：

我想要的是使文本和图像垂直居中（文本没问题，但图像搞砸了）。

结果是： ![在此处输入图像描述](../Images/86bdbb23f88153706a5b76c25c29b1ef.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T20:00:27.840

试试看`...new ImageSpan(bitmapArray.get(i), ImageSpan.ALIGN_BASELINE)...`！

# windows - PERL 中的 NTLM 访问权限

> ID：13751197
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:38.460
> 
> 标签：windows, perl, ntlm

有没有办法检查用户是否有权访问网络中的特定文件？我有共享文件夹中的用户名和文件名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:12:49.173

一种便宜的方法是使用 SysInternals AccessChk 工具，然后解析结果。

Win32:: 命名空间下的 CPAN 中可能有用于检查访问权限的代码。

# jquery - jquery 脚本可在除 IE 8 之外的所有浏览器中运行

> ID：13751200
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:44.403
> 
> 标签：jquery, internet-explorer

我有一个 jquery 脚本，它在除 IE 之外的所有浏览器中都能正常工作。它的一部分在 IE 中工作，但主要部分没有，我不知道为什么。

```
$(document).ready(function() {

$(".close").hover(

function() {
    $(this).css({
        opacity: "0.4"
    });
}, function() {
    $(this).css({
        opacity: "0.2"
});
});
$(".name").hover(

function() {
    $(this).css({
        color: "#ED6736"
    });
}, function() {
    $(this).css({
        color: "#292929"
});
});

$("#wrapper_MAIN_INPT").css({
'height': $("#practice_staff_MAIN_INPT").innerHeight()
});

$("#STAFF_HEADER_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").innerHeight()
});

$("#BIO_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").height()
});

$("#EDU_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").height()
});

$("#CONTACT_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").height()
});

var a1, a2, a3; //Establish Loading Variables 

$(".name_MAIN_INPT").on('click' , function() { 

MAIN_OUTPT_close();
close_850();
FOX_close();
SPEECH_close();

a1=0; //Reset the Loading Variables
a2=0;
a3=0;

var id = $(this).attr('id');

$('#photo_MAIN_INPT').empty();

$("<img>", { src: id + ".jpg" }).prependTo("#photo_MAIN_INPT"); 

$("#therapist_MAIN_INPT").load(id +"_name.txt");  
$("#credentials_MAIN_INPT").load(id +"_credentials.txt");

$("#bio_MAIN_INPT_text").load(id +"_bio.txt", function() {

$("#bio_MAIN_INPT_img").css({
'marginTop': ($("#bio_MAIN_INPT_text").innerHeight() /2) -   
($("#bio_MAIN_INPT_img").height() / 2)
});

console.log('Loaded'); //Testing Purposes Only
a1=1; // Loaded
animate_MAIN_INPT(); // Attempt Animation    
});

$("#edu_MAIN_INPT_text").load(id +"_edu.txt", function() {

$("#edu_MAIN_INPT_img").css({
'marginTop': ($("#edu_MAIN_INPT_text").innerHeight() /2) -   
($("#edu_MAIN_INPT_img").height() / 2)
});

console.log('Loaded'); //Testing Purposes Only
a2=1; // Loaded
animate_MAIN_INPT(); // Attempt Animation    
});

$("#contact_MAIN_INPT_text").load(id +"_contact.txt", function() {

$("#contact_MAIN_INPT_img").css({
'marginTop': ($("#contact_MAIN_INPT_text").innerHeight() /2) -   
($("#contact_MAIN_INPT_img").height() / 2)
});

console.log('Loaded'); //Testing Purposes Only
a3=1; // Loaded
animate_MAIN_INPT(); // Attempt Animation
});

});

function animate_MAIN_INPT() {

if((a1===1) && (a2===1) && (a3===1)){ //Animate if all thre divs are loaded

$("#wrapper_MAIN_INPT").animate({
 'height': 87 + $("#BIO_MAIN_INPT").outerHeight() +   $("#EDU_MAIN_INPT").outerHeight()   
+ $("#CONTACT_MAIN_INPT").outerHeight()
}, 300);  
$("#practice_staff_MAIN_INPT").animate({
 'margin-top': $("#practice_staff_MAIN_INPT").innerHeight() * -1
}, 300);  
$("#STAFF_HEADER_MAIN_INPT").delay(160).animate({
 'marginTop': 15
}, 300);  
$("#BIO_MAIN_INPT").delay(330).animate({
 'marginTop': 0
}, 450);    
$("#EDU_MAIN_INPT").delay(450).animate({
 'marginTop': 0
}, 450);  
$("#CONTACT_MAIN_INPT").delay(570).animate({
 'marginTop': 0
}, 450);    
}                
}

function MAIN_INPT_close() {

$("#wrapper_MAIN_INPT").animate({
 'height': $("#practice_staff_MAIN_INPT").innerHeight()
}, 300);    
$("#practice_staff_MAIN_INPT").animate({
 'margin-top':0 
}, 300);  
$("#STAFF_HEADER_MAIN_INPT").animate({
 'marginTop': $("#practice_staff_MAIN_INPT").innerHeight()
}, 300, function () {       

$("#STAFF_HEADER_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").innerHeight()
});

$("#BIO_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").height()
});

$("#EDU_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").height()
});

$("#CONTACT_MAIN_INPT").css({
'marginTop': $("#practice_staff_MAIN_INPT").height()  
});

});

}

$("#close_MAIN_INPT").click(function() {
MAIN_INPT_close();
});
}); 
```

这里是完整页面的链接[http://www.brighamandwomens.org/Patients_Visitors/pcs/rehabilitationservices/mock/about_us/about3.html](http://www.brighamandwomens.org/Patients_Visitors/pcs/rehabilitationservices/mock/about_us/about3.html) 当你翻过它们时，工作的名称链接会变成橙色，你可以看到它们工作在 Firefox、Chrome、Safari 中，但在 IE 中再次不走运。任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:49:21.300

删除`console.log()`，IE 无法处理。为什么您的某些脚本有效而其他脚本无效，这是有道理的。IE 失败并在`console.log()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T19:43:53.820

通过[JSLint](http://www.jslint.com/)运行你的 JavaScript 。我怀疑你会在那里找到你的问题。

# c# - 将 System::String^ (C# 字符串) 转换为 C++ std::string

> ID：13751201
> 
> 赞同：2
> 
> 时间：2012-12-06T19:38:45.477
> 
> 标签：c#, c++, string, visual-studio

> **可能重复：**
> [C++/CLI 从 System::String^ 转换为 std::string](https://stackoverflow.com/questions/946813/c-cli-converting-from-systemstring-to-stdstring)

我在我的 C++ 代码 (Visual Studio 2010) 中使用 C# DLL。如何将 System::String^ 转换为 C++ std::string？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:45:07.010

[`System.Runtime.InteropServices.Marshal`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal_members%28v=vs.71%29.aspx)有几种方法可以将字符串转换为字符数组，然后您可以使用任何方法来获取`std::string`.

我相信建议是在将数据复制到不同对象后使用[`StringToBSTR`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtobstr%28v=vs.71%29.aspx)最终调用。`FreeBSTR`

我作为评论链接的问题建议`StringToCoTaskMemUni`。

# tridion - 分离 Tridion Deployer 和 Upload Service 以进行扩展

> ID：13751203
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:50.687
> 
> 标签：tridion

我有一个图表 (SDL) 显示了一个场景，其中部署程序被拆分为在 n 个服务器上运行的 HTTP 上传服务和在 n 个服务器上运行的部署程序服务，共享已上传包的存储 - 我很好奇这将如何配置为乍一看没有意义，有人这样做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:52:29.110

我想您的部署人员正在查看他们的“传入”目录的网络映射共享目录？

我还想象您的服务是基于服务的部署程序，您的 http 上传是基于 Web 的风格。

也许你可以分享你的图表？

# java - 如何在java中扫描复数

> ID：13751205
> 
> 赞同：2
> 
> 时间：2012-12-06T19:38:53.077
> 
> 标签：java

我如何扫描以这种形式插入的数字：Java 中的 1.7+2.8990i？我想有可能用+或-分开一次？我应该如何将此行作为字符串或其他内容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:41:37.170

如果你想使用一个库，总会有[Commons Math](http://commons.apache.org/math/index.html)让你做这样的事情：

```
ComplexFormat cf = new ComplexFormat();
Complex c = cf.parse("1.110 + 2.222i");
Complex second = new Complex(2.0, 5.0);
Complex answer = c.log();        // natural logarithm.
        answer = c.cos();        // cosine
        answer = c.pow(second);  // first raised to the power of second

ComplexFormat format = new ComplexFormat(); // default format
String s1 = format.format(c);      // s1 contains "1.110 + 2.222i"
String s2 = format.format(second); // s2 contains "2.0 + 5.0i" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:54:57.013

这是一种 RegEx 方法（没有外部库，但也无法使用复数进行解析）：

```
Pattern pattern = Pattern.compile("([+-]?\\d*\\.\\d+)([+-]?\\d*\\.\\d+)i",Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
Matcher matcher = pattern.matcher("1.7+2.8990i");
if(matcher.matches()) {
  System.out.println("a:" + Float.parseFloat(matcher.group(1)));
  System.out.println("b:" + Float.parseFloat(matcher.group(2)));
} else {
  System.out.println("Not a complex number");
} 
```

这种方法支持 a 和 b 的正值和负值。现在这种方法的一个缺点是它不能容忍数字周围的空格（您可以安全地从输入中删除空格而不改变等式）。

# sql - SSRS - 日期参数在 WebKit 浏览器中不显示日历控件

> ID：13751206
> 
> 赞同：2
> 
> 时间：2012-12-06T19:38:56.883
> 
> 标签：sql, sql-server, google-chrome, reporting-services, safari

我在 SSDT(2012) 中开发了一组 SSRS 报告。我的所有参数都设置为 Data type = "Date/Time" 应该能够通过日历控件接受值。

这就是这些参数在 IE 中的默认行为方式，但我在 Safari（见下文）、Mobile Safari 或 Chrome 中没有此功能。

**这就是我希望它的行为方式（如在 IE 中）：** ![在此处输入图像描述](../Images/d6e18d948be89557dcece833097dc4f7.png)

**这是它在 Safari/Chrome 中的行为方式：** ![在此处输入图像描述](../Images/42badcf260830c9b953f05df2197aaf5.png)

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:54:55.087

Chrome 不是官方支持的 SSRS 报告浏览器，如果其他非 IE 浏览器出现问题，也不会感到惊讶。[见这里](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/f50eb196-3f15-408d-acb7-7f90e3348e3e)。此外，[这里](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/8b82ca3e-ffd8-4724-a8ac-e7f3fe90b0a8/)讨论日历在 Safari 中不起作用。

用户是否绝对需要使用这些浏览器？如果是这样，我会让他们手动输入日期。我会将参数键入为“自（例如 2012 年 1 月 20 日）以来未访问过：”

# objective-c - 不知道我会如何使用 objectAtIndex

> ID：13751207
> 
> 赞同：0
> 
> 时间：2012-12-06T19:38:57.160
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何将 nsstring 转换为 uicolor？](https://stackoverflow.com/questions/2027255/how-to-convert-nsstring-to-uicolor)

不是objective-c程序员，但不确定我是否不能做这样的事情。我知道我正在返回一个字符串值，但只是想要一种简洁的方式来获取这些值：

```
NSMutableArray *colorsArray=[[NSMutableArray alloc] init];
[colorsArray addObject:@"whiteColor"];
[colorsArray addObject:@"blueColor"];
 // val5 is either 0 or 1
[view setBackgroundColor:[UIColor [colorsArray objectAtIndex:val5]]]; 
```

这可能吗？

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:43:43.557

为什么不直接存储颜色而不是`NSString`？

```
NSMutableArray *colorsArray=[[NSMutableArray alloc] init];
[colorsArray addObject:[UIColor whiteColor]];
[colorsArray addObject:[UIColor blueColor]];
if (val5 < colorsArray.count) // Doesn't hurt any to be safe, and this way you won't get a crash if something messes up your val5 at some point
{
    // val5 is either 0 or 1
    [view setBackgroundColor:[colorsArray objectAtIndex:val5]];
}
else
{
    NSLog(@"Error - Color not expected - leaving color the way it is.")
} 
```

您按原样编写代码不会编译，语法无效，因为您尝试这样做`[UIColor @"whiteColor"]`不是有效的语法。您可以使用`performSelector:`，但这毫无意义，除非您真的需要将颜色存储为字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:45:57.220

或者，如果您必须使用`NSString`数组中的实例：

```
NSMutableArray *colorsArray=[[NSMutableArray alloc] init];
[colorsArray addObject:@"whiteColor"];
[colorsArray addObject:@"blueColor"];

SEL colorSelector = NSSelectorFromString([colorsArray objectAtIndex:val5]);
[view setBackgroundColor:[UIColor performSelector:colorSelector]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:45:38.523

```
NSMutableArray *colorsArray = [[NSMutableArray alloc] init];
[colorsArray addObject:@"whiteColor"];
[colorsArray addObject:@"blueColor"];
UIColor *color = [UIColor performSelector:NSSelectorFromString([colorsArray objectAtIndex:1])];
view.backgroundColor = color; 
```

# c - 通过在 nginx 配置中调用外部 C 代码来设置缓存键

> ID：13751210
> 
> 赞同：2
> 
> 时间：2012-12-06T19:39:39.847
> 
> 标签：c, nginx, lua

这可能在[ServerFault](http://serverfault.com)上提供更好的服务，但是，我正在评估 nginx 以确定它是否能够解决特定问题。

### 问题

我想将 nginx 响应缓存与 FastCGI 缓存一起使用。但我需要使用 cookie 中的值设置缓存键。问题是 cookie 需要先被解密，然后我才能获得在缓存键中使用它的值。

### 我知道的

我知道如何将 nginx 配置为缓存（[`fastcgi_cache`](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_cache)）。`fastcgi_cache_key`我也知道我可以在缓存键 ( )中设置和使用自定义变量。但是，我不知道如何调用自定义函数来解密 cookie。我知道 nginx 有模块的概念。我还注意到与 Lua 的集成。

### 问题

如果我的解密可以作为 C 代码使用，我可以从 nginx 配置访问这个外部代码并使用它的返回值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:32:18.637

只要您的代码是 C 语言，最简单的解决方案就是编写简单的 nginx 模块，该模块提供一个具有解密值的变量。可以在[ngx_http_secure_link_module](http://trac.nginx.org/nginx/browser/nginx/trunk/src/http/modules/ngx_http_secure_link_module.c)中找到如何提供变量的相对简单的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:51:59.817

如果使用 LuaJIT 编译 Lua 模块，它确实可以帮助您。

在这里查看如何与 cookie 交互的简单示例：http: [//mailman.nginx.org/pipermail/nginx/2011-January/024798.html](http://mailman.nginx.org/pipermail/nginx/2011-January/024798.html)

现在使用 LuaJIT，您可以使用 FFI 调用您的 C 解密代码： http: [//luajit.org/ext_ffi.html](http://luajit.org/ext_ffi.html)

另一种可能性是在 C 中完成这一切，这可能会更快，但可能会做更多的工作。

# django - super.save() 方法可以在模型中多次使用吗？

> ID：13751217
> 
> 赞同：1
> 
> 时间：2012-12-06T19:40:00.843
> 
> 标签：django

在`save`我的项目模型的方法中，我需要将实例保存在数据库中，以便根据某个数量计算排名：

```
def save(self, *args, **kwargs):        

    super(Item, self).save(*args, **kwargs)

    # get all the Item instances, order and get the ranking of the current instance

    self.ranking = ranking

    super(Item, self).save(*args, **kwargs) 
```

它似乎有效，但我想确保不会产生不良影响。这样做可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:38:32.977

我认为这不会产生任何负面影响，但另一种方法只是更新排名而不保存整个模型。你可以这样做：

```
def save(self, *args, **kwargs):
    super(Item, self).save(*args, **kwargs)

    Item.objects.filter(pk=self.pk).update(ranking=ranking) 
```

# php - 如何读取csv文件的输出并在php中打印输出

> ID：13751218
> 
> 赞同：1
> 
> 时间：2012-12-06T19:40:04.480
> 
> 标签：php, csv

我正在尝试使用 PHP 读取 CSV 文件。我想为每一行使用一个 while 语句，并想为每一列分配一个变量。我为每一列分配变量的原因是我可以在 sql 查询中使用这些变量。

```
$csv = fopen('sample2.csv','r') or die("can't open file");
while($csv_line = fgetcsv($csv,1024)) {
    //Not sure what to do here
}
fclose($csv) or die("can't close file"); 
```

我了解如何打开文件并阅读整行，但不了解如何控制各个列。

更新代码

```
<?php
    $csv = fopen('sample.csv','r') or die("can't open file");
    while($csv_line = fgetcsv($csv,1024)) {
        list($column1, $column2, $column3) = $csv_line;
        echo 'Column 1: '.$column1.'<br />';
        echo 'Column 2: '.$column2.'<br />';
        echo 'Column 1: '.$column1.'<br />';
        echo 'Column 3: '.$column3.'<br />';
    }
    fclose($csv) or die("can't close file");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:43:29.060

`fgetcsv`返回一个包含每个字段的数组。您可以使用该`list`函数获取该数组中的所有列：

```
while($csv_line = fgetcsv($csv,1024)) {
    list($column1, $column2, $column3) = $csv_line;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:57:33.560

$csv = fopen('sample2.csv','r') 或 die("无法打开文件"); 而($csv_line = fgetcsv($csv,1024)) { $column0 = $csv_line[0]; $column2 = $csv_line[0]; $column3 = $csv_line[0]; $column4 = $csv_line[0]; $column = $csv_line[];

} fclose($csv) 或 die("无法关闭文件");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:41:49.927

如果你做 a `print_r($csv_line)`，你会看到你得到了一个数组，由每个字段为你分割。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-23T10:11:07.910

您可以使用 csv 阅读器类并将您的 csv 文件数据简单地解析为数组格式。

[http://www.mbyte.in/csv-reader/](http://www.mbyte.in/csv-reader/)

```
<?php 
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1);
include "csv_reader.php";
$csvObject=new Mbyte_Csv();
$file='seed.csv';
$data=$csvObject->getData($file);
echo "<pre>";
print_r($data);
echo "</pre>";
?>
```

# android - 为什么 RTC_WAKEUP 不起作用？

> ID：13751219
> 
> 赞同：1
> 
> 时间：2012-12-06T19:40:15.697
> 
> 标签：android, alarmmanager, real-time-clock

```
public void runSound(){

    Intent it = new Intent(Values.TAG_EXECUTE_ALARM);
    PendingIntent pendIntent = PendingIntent.getBroadcast(this, 0, it, 0);

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND,0);

    AlarmManager alarm = (AlarmManager) getSystemService(ALARM_SERVICE);
    long time = calendar.getTimeInMillis();
    alarm.set(AlarmManager.RTC_WAKEUP,time,pendIntent);
} 
```

此方法是从服务调用的。即使设备处于睡眠模式，我的服务也应该播放声音以通知用户。

```
public class AlarmReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context arg0, Intent arg1) {
    MediaPlayer player = MediaPlayer.create(arg0, R.raw.order_alarm);
    player.setAudioStreamType(AudioManager.STREAM_ALARM);

    player.start();

} 
```

这是实际播放声音的类。不幸的是，设备没有唤醒，也没有播放声音。在设备进入睡眠模式之前调用 runSound 时，声音会完美运行......有什么想法吗？

编辑：

-> 删除了静态引用（是的，它们很愚蠢，因为 runSound 在服务中）。

-> 是的，标签值在接收者意图过滤器中定义

-> 改进了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:50:40.083

好吧，我现在无法测试，但是查看您的代码我可以看到一些问题。

在 getBroadcast() 中，最后一个参数必须是一个标志，例如“FLAG_CANCEL_CURRENT”，我不确定 0 是否是一个有效标志。

在“长时间 = calendar.getTimeInMillis();” 看起来你正在过去一段时间，如果它在过去，它不会运行，尝试添加 5000（5s）。

所有其他的事情对我来说都很好。

# javascript - D3折线图未填充整个svg宽度

> ID：13751220
> 
> 赞同：1
> 
> 时间：2012-12-06T19:40:21.093
> 
> 标签：javascript, jquery, d3.js

正如标题所述，我创建了一个 D3 线/面积图，我发现很难让图形的宽度保持不变，这取决于我给它渲染的数据量，它会缩放图形的宽度因此，但我不确定如何让它保持在一个恒定的宽度，不管给定的数据量是多少，这是我想要实现的。

我想这与 x 和 y 坐标的缩放有关，但我现在被困住了，似乎无法弄清楚它为什么这样做。

这是我到目前为止的代码，

```
 //dimensions and margins
  var width = 625,
  height = 350,
  margin = 5,

  // get the svg and set it's width/height
  svg = d3.select("#main")
    .attr("width", width)
    .attr("height", height);

  //initialize the graph
  init([
        [12345,42345,32345,22345,72345,62345,32345,92345,52345,22345], 
        [1234,4234,3234,2234,7234,6234,3234,9234,5234,2234] 
      ]);

  $("button").live('click', function(){
      var id = $(this).attr("id");
      if(id == "one"){
        updateGraph([
                [52345,32345,12345,22345,62345,72345,92345,32345,22345,22345,52345,32345,12345,22345,62345,72345,92345,32345,22345,22345,52345,32345,12345,22345,62345,72345,92345,32345,22345,22345], 
                [4234,12345,2234,32345,6234,7234,9234,3234,2234,2234,4234,1234,2234,3234,6234,7234,9234,3234,2234,2234,4234,1234,2234,3234,6234,7234,9234,3234,2234,2234] 
              ]);
      }else if(id == "two"){
        updateGraph([
              [12345,42345,32345,22345,72345,62345,32345,92345,52345,22345,12345,42345,32345,22345,72345,62345,32345,92345,52345,22345,12345,42345,32345,22345,72345], 
              [1234,2345,3234,2234,7234,6234,3234,9234,5234,2234,1234,4234,3234,2234,7234,6234,3234,9234,5234,2234,1234,4234,3234,2234,7234] 
            ]);
      }

  });

function init(data){

  var x = d3.scale.linear()
    .domain([0,data[0].length])
    .range([margin, width-margin]),

  y = d3.scale.linear()
    .domain([0,d3.max(data[0])])
    .range([height-margin, margin]),

  /* line path generator */
  line = d3.svg.line().interpolate('monotone')
    .x(function(d,i) { return x(i); })
    .y(function(d) { return y(d); }),

  /* area path generator */
  area = d3.svg.area().interpolate('monotone')
    .x(line.x())
    .y1(line.y())
    .y0(y(0)),

  groups = svg.selectAll("g")
    .data(data)
    .enter()
    .append("g");

  svg.select("g")
    .selectAll("circle")
  .data(data[0])
  .enter()
    .append("circle")
    .attr("class", "dot")
    .attr("cx", line.x())
    .attr("cy", line.y())
    .attr("r", 4);

  /* add the areas */
  groups.append("path")
    .attr("class", "area")
    .attr("d",area)
    .style("fill", function(d,i) { return (i == 0 ? "steelblue" : "red" ); });

  /* add the lines */
  groups.append("path")
    .attr("class", "line")
    .attr("d", line);
}

function updateGraph(data){

  var x = d3.scale.linear()
    .domain([0,data[0].length])
    .range([margin, width-margin]),

  y = d3.scale.linear()
    .domain([0,d3.max(data[0])])
    .range([height-margin, margin]),

  /* line path generator */
  line = d3.svg.line().interpolate('monotone')
    .x(function(d,i) { return x(i); })
    .y(function(d) { return y(d); }),

  /* area path generator */
  area = d3.svg.area().interpolate('monotone')
    .x(line.x())
    .y1(line.y())
    .y0(y(0));

  groups = svg.selectAll("g")
    .data(data),

  circles = svg.select("g")
    .selectAll("circle");

  circles.data(data[0])
      .exit().remove();

  circles.data(data[0])
    .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", line.x())
        .attr("cy", line.y())
        .attr("r", 4);

  /* animate circles */
  circles.data(data[0])
    .transition()
    .duration(1000)
    .attr("cx", line.x())
    .attr("cy", line.y());

  /* animate the lines */
  groups.select('.line')
    .transition()
    .duration(1000)
    .attr("d",line);

  /* animate the areas */
  groups.select('.area')
    .transition()
    .duration(1000)
    .attr("d",area);

} 
```

​</p>

以及小提琴[http://jsfiddle.net/JL33M/](http://jsfiddle.net/JL33M/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:11:30.917

图表的宽度取决于`range()`你给它。`range([0,100])`将始终“拉伸”`domain()`值以占用 100 个单位。

这就是您的代码当前正在执行的操作：

```
var x = d3.scale.linear()
  .domain([0,data[0].length])
  .range([margin, width-margin]);// <-- always a fixed width 
```

您希望宽度取决于数据条目的数量。假设您已决定希望每个数据点占用 5 个单位，则`range()`需要取决于数据集的大小：

```
var x = d3.scale.linear()
  .domain([0,data[0].length])
  .range([margin, 5 * data[0].length]);// <-- 5 units per data point 
```

当然，在这些条件下，您的图形宽度会随着数据集而增长；如果你给它一个非常长的数据数组，比如 500 个点，那么图形将是 2500 个单位宽，并且可能会超出屏幕。但是如果你的数据是这样的，你知道它的最大长度，那么你会没事的。

在不相关的说明中，我认为您的代码可以使用重构来减少重复性。您应该能够使用单个功能来实现您正在做的事情`update()`，而无需该`init()`功能。

[mbostock 的本教程](http://bl.ocks.org/3808218)描述了我所指的“一般更新模式”。[然后第二部分](http://bl.ocks.org/3808221)和第三[部分](http://bl.ocks.org/3808234)继续解释如何转换到这种模式。

# regex - 仅适用于两位数月份和两位数日期的正则表达式

> ID：13751225
> 
> 赞同：4
> 
> 时间：2012-12-06T19:40:48.190
> 
> 标签：regex, date

我一直在寻找一个**只**验证 MM/DD 的正则表达式。我不需要年份（我们在表格中询问财政年度结束，所以我们不需要年份，我们需要知道他们财政年度的范围）。

例如，我需要他们能够分别在 6 月 30 日或 12 月 31 日输入 06/30 或 12/31。我能找到的所有正则表达式示例都将年份作为日期的一部分，我不需要，而且我对正则表达式语法非常不熟悉。什么正则表达式只能用于两位数的月份和日期？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T19:59:04.627

对于所有月份（即 28 天）：

```
(0[1-9]|1[0-2])/([01][1-9]|10|2[0-8]) 
```

除二月外的所有月份：

```
(0[13-9]|1[0-2])/(29|30) 
```

对于 31 天的月份（即 01、03、05、07、08、10 和 12）

```
(0[13578]|1[0-2])/31 
```

把这个放在一起

```
((0[1-9]|1[0-2])/([01][1-9]|10|2[0-8]))|((0[13-9]|1[0-2])/(29|30))|((0[13578]|1[0-2])/31) 
```

然后对于闰年将以下内容附加到正则表达式

```
|02/29 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:46:55.547

您可以避免`regex`使用类似的方法`split`

所以，你必须按照这些步骤

1>`Split`字符串`/`

2>解析结果`MM`和`DD``integer`

3>现在`compare`解析整数以检查它是否是有效的月份或日期..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T21:24:38.467

您需要的模式是：

```
#(0[13578]|1[02])/(0[1-9]|[12][0-9]|3[01])|(0[469]|11)/(0[1-9]|[12][0-9]|30)|02/(0[1-9]|[12][0-9])# 
```

在 PHP 中测试它：

```
<?

$p = '#' . implode('|', array(
    '(0[13578]|1[02])/(0[1-9]|[12][0-9]|3[01])', // 31-day months
    '(0[469]|11)/(0[1-9]|[12][0-9]|30)', // 30-day months
    '02/(0[1-9]|[12][0-9])', // February
)) . '#';

for ($m = 0; $m < 14; $m++) {
    for ($d = 0; $d < 33; $d++) {
        $date = sprintf('%02d/%02d', $m, $d);
        echo $date . ' - ' . preg_match($p, $date) . "\n";
    }
    echo "\n";
} 
```

结果是：

```
00/00 - 0
00/01 - 0
00/02 - 0
00/03 - 0
00/04 - 0
00/05 - 0
00/06 - 0
00/07 - 0
00/08 - 0
00/09 - 0
00/10 - 0
00/11 - 0
00/12 - 0
00/13 - 0
00/14 - 0
00/15 - 0
00/16 - 0
00/17 - 0
00/18 - 0
00/19 - 0
00/20 - 0
00/21 - 0
00/22 - 0
00/23 - 0
00/24 - 0
00/25 - 0
00/26 - 0
00/27 - 0
00/28 - 0
00/29 - 0
00/30 - 0
00/31 - 0
00/32 - 0

01/00 - 0
01/01 - 1
01/02 - 1
01/03 - 1
01/04 - 1
01/05 - 1
01/06 - 1
01/07 - 1
01/08 - 1
01/09 - 1
01/10 - 1
01/11 - 1
01/12 - 1
01/13 - 1
01/14 - 1
01/15 - 1
01/16 - 1
01/17 - 1
01/18 - 1
01/19 - 1
01/20 - 1
01/21 - 1
01/22 - 1
01/23 - 1
01/24 - 1
01/25 - 1
01/26 - 1
01/27 - 1
01/28 - 1
01/29 - 1
01/30 - 1
01/31 - 1
01/32 - 0

02/00 - 0
02/01 - 1
02/02 - 1
02/03 - 1
02/04 - 1
02/05 - 1
02/06 - 1
02/07 - 1
02/08 - 1
02/09 - 1
02/10 - 1
02/11 - 1
02/12 - 1
02/13 - 1
02/14 - 1
02/15 - 1
02/16 - 1
02/17 - 1
02/18 - 1
02/19 - 1
02/20 - 1
02/21 - 1
02/22 - 1
02/23 - 1
02/24 - 1
02/25 - 1
02/26 - 1
02/27 - 1
02/28 - 1
02/29 - 1
02/30 - 0
02/31 - 0
02/32 - 0

03/00 - 0
03/01 - 1
03/02 - 1
03/03 - 1
03/04 - 1
03/05 - 1
03/06 - 1
03/07 - 1
03/08 - 1
03/09 - 1
03/10 - 1
03/11 - 1
03/12 - 1
03/13 - 1
03/14 - 1
03/15 - 1
03/16 - 1
03/17 - 1
03/18 - 1
03/19 - 1
03/20 - 1
03/21 - 1
03/22 - 1
03/23 - 1
03/24 - 1
03/25 - 1
03/26 - 1
03/27 - 1
03/28 - 1
03/29 - 1
03/30 - 1
03/31 - 1
03/32 - 0

04/00 - 0
04/01 - 1
04/02 - 1
04/03 - 1
04/04 - 1
04/05 - 1
04/06 - 1
04/07 - 1
04/08 - 1
04/09 - 1
04/10 - 1
04/11 - 1
04/12 - 1
04/13 - 1
04/14 - 1
04/15 - 1
04/16 - 1
04/17 - 1
04/18 - 1
04/19 - 1
04/20 - 1
04/21 - 1
04/22 - 1
04/23 - 1
04/24 - 1
04/25 - 1
04/26 - 1
04/27 - 1
04/28 - 1
04/29 - 1
04/30 - 1
04/31 - 0
04/32 - 0

05/00 - 0
05/01 - 1
05/02 - 1
05/03 - 1
05/04 - 1
05/05 - 1
05/06 - 1
05/07 - 1
05/08 - 1
05/09 - 1
05/10 - 1
05/11 - 1
05/12 - 1
05/13 - 1
05/14 - 1
05/15 - 1
05/16 - 1
05/17 - 1
05/18 - 1
05/19 - 1
05/20 - 1
05/21 - 1
05/22 - 1
05/23 - 1
05/24 - 1
05/25 - 1
05/26 - 1
05/27 - 1
05/28 - 1
05/29 - 1
05/30 - 1
05/31 - 1
05/32 - 0

06/00 - 0
06/01 - 1
06/02 - 1
06/03 - 1
06/04 - 1
06/05 - 1
06/06 - 1
06/07 - 1
06/08 - 1
06/09 - 1
06/10 - 1
06/11 - 1
06/12 - 1
06/13 - 1
06/14 - 1
06/15 - 1
06/16 - 1
06/17 - 1
06/18 - 1
06/19 - 1
06/20 - 1
06/21 - 1
06/22 - 1
06/23 - 1
06/24 - 1
06/25 - 1
06/26 - 1
06/27 - 1
06/28 - 1
06/29 - 1
06/30 - 1
06/31 - 0
06/32 - 0

07/00 - 0
07/01 - 1
07/02 - 1
07/03 - 1
07/04 - 1
07/05 - 1
07/06 - 1
07/07 - 1
07/08 - 1
07/09 - 1
07/10 - 1
07/11 - 1
07/12 - 1
07/13 - 1
07/14 - 1
07/15 - 1
07/16 - 1
07/17 - 1
07/18 - 1
07/19 - 1
07/20 - 1
07/21 - 1
07/22 - 1
07/23 - 1
07/24 - 1
07/25 - 1
07/26 - 1
07/27 - 1
07/28 - 1
07/29 - 1
07/30 - 1
07/31 - 1
07/32 - 0

08/00 - 0
08/01 - 1
08/02 - 1
08/03 - 1
08/04 - 1
08/05 - 1
08/06 - 1
08/07 - 1
08/08 - 1
08/09 - 1
08/10 - 1
08/11 - 1
08/12 - 1
08/13 - 1
08/14 - 1
08/15 - 1
08/16 - 1
08/17 - 1
08/18 - 1
08/19 - 1
08/20 - 1
08/21 - 1
08/22 - 1
08/23 - 1
08/24 - 1
08/25 - 1
08/26 - 1
08/27 - 1
08/28 - 1
08/29 - 1
08/30 - 1
08/31 - 1
08/32 - 0

09/00 - 0
09/01 - 1
09/02 - 1
09/03 - 1
09/04 - 1
09/05 - 1
09/06 - 1
09/07 - 1
09/08 - 1
09/09 - 1
09/10 - 1
09/11 - 1
09/12 - 1
09/13 - 1
09/14 - 1
09/15 - 1
09/16 - 1
09/17 - 1
09/18 - 1
09/19 - 1
09/20 - 1
09/21 - 1
09/22 - 1
09/23 - 1
09/24 - 1
09/25 - 1
09/26 - 1
09/27 - 1
09/28 - 1
09/29 - 1
09/30 - 1
09/31 - 0
09/32 - 0

10/00 - 0
10/01 - 1
10/02 - 1
10/03 - 1
10/04 - 1
10/05 - 1
10/06 - 1
10/07 - 1
10/08 - 1
10/09 - 1
10/10 - 1
10/11 - 1
10/12 - 1
10/13 - 1
10/14 - 1
10/15 - 1
10/16 - 1
10/17 - 1
10/18 - 1
10/19 - 1
10/20 - 1
10/21 - 1
10/22 - 1
10/23 - 1
10/24 - 1
10/25 - 1
10/26 - 1
10/27 - 1
10/28 - 1
10/29 - 1
10/30 - 1
10/31 - 1
10/32 - 0

11/00 - 0
11/01 - 1
11/02 - 1
11/03 - 1
11/04 - 1
11/05 - 1
11/06 - 1
11/07 - 1
11/08 - 1
11/09 - 1
11/10 - 1
11/11 - 1
11/12 - 1
11/13 - 1
11/14 - 1
11/15 - 1
11/16 - 1
11/17 - 1
11/18 - 1
11/19 - 1
11/20 - 1
11/21 - 1
11/22 - 1
11/23 - 1
11/24 - 1
11/25 - 1
11/26 - 1
11/27 - 1
11/28 - 1
11/29 - 1
11/30 - 1
11/31 - 0
11/32 - 0

12/00 - 0
12/01 - 1
12/02 - 1
12/03 - 1
12/04 - 1
12/05 - 1
12/06 - 1
12/07 - 1
12/08 - 1
12/09 - 1
12/10 - 1
12/11 - 1
12/12 - 1
12/13 - 1
12/14 - 1
12/15 - 1
12/16 - 1
12/17 - 1
12/18 - 1
12/19 - 1
12/20 - 1
12/21 - 1
12/22 - 1
12/23 - 1
12/24 - 1
12/25 - 1
12/26 - 1
12/27 - 1
12/28 - 1
12/29 - 1
12/30 - 1
12/31 - 1
12/32 - 0

13/00 - 0
13/01 - 0
13/02 - 0
13/03 - 0
13/04 - 0
13/05 - 0
13/06 - 0
13/07 - 0
13/08 - 0
13/09 - 0
13/10 - 0
13/11 - 0
13/12 - 0
13/13 - 0
13/14 - 0
13/15 - 0
13/16 - 0
13/17 - 0
13/18 - 0
13/19 - 0
13/20 - 0
13/21 - 0
13/22 - 0
13/23 - 0
13/24 - 0
13/25 - 0
13/26 - 0
13/27 - 0
13/28 - 0
13/29 - 0
13/30 - 0
13/31 - 0
13/32 - 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:46:18.007

我认为这可能有效

```
^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T19:52:18.643

正则表达式不是正确的答案，请使用日期库来执行此验证。

话虽这么说，这里有一个正则表达式应该可以解决问题（这应该有助于说服你正则表达式不是正确的答案）：

```
^(0[13578]|1[02])/([012]\d|3[01])|(0[469]|11)/([012]\d|30)|02/[012]\d$ 
```

如果您只需要不检查一个月中的天数的简单验证，则可以使用以下方法：

```
^(0[1-9]|1[012])/([012]\d|3[01])$ 
```

# c# - 在 HTML 中格式化异常，以便在 c# 中向 SysAdmin 发送电子邮件

> ID：13751227
> 
> 赞同：6
> 
> 时间：2012-12-06T19:40:59.927
> 
> 标签：c#

我们的错误处理程序通过电子邮件发送 SysAdmin 异常。现在它们作为纯文本看起来很糟糕。

有没有办法获取异常并将其格式化为漂亮的 html，以便系统管理员可以更轻松地阅读它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T19:43:00.550

```
<pre>
... htmlencoded output from Exception.ToString() goes here ...
</pre> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:04:43.287

我会将异常序列化为 XML 元素，然后使用自定义 XSLT 对其进行格式化。

有一种关于如何序列化的有趣方法`Exception`，您可以在此处阅读：[Serializing Exceptions to XML](http://seattlesoftware.wordpress.com/2008/08/22/serializing-exceptions-to-xml/)。总而言之，如果您尝试`System.Exception`使用该`[Serializable]`属性装饰继承自的自定义类，然后在其上使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类，您将得到一个运行时异常，因为[Exception.Data](http://msdn.microsoft.com/en-us/library/system.exception.data.aspx)属性正在实现`System.Collections.IDictionary`。因此，您可以轻松使用新的[System.Xml.Linq](http://msdn.microsoft.com/en-us/library/system.xml.linq.aspx) API（从 .NET 3.5 开始的新 API）。

这是一个生成异常并将其格式化为 HTML 的简单程序。

```
using System;
using System.IO;
using System.Text;
using System.Xml;
using System.Xml.Xsl;
using ConsoleApplication2.Properties;

class Program
{
    public static void Main(string[] args)
    {
        try
        {
            //throw an DivideByZeroException
            var a=0;
            var b=1/a;
        }
        catch (Exception ex)
        {
            //using the ExceptionXElement class
            var xmlException = new ExceptionXElement(ex);
            XslCompiledTransform myXslTrans = new XslCompiledTransform();

            //Resources.formatter is the xsl file added as a Resource to the project (ConsoleApplication2.Properties.Resources.formatter)
            //So, here we load the xsl
            myXslTrans.Load(XmlReader.Create(new StringReader(Resources.formatter)));

            //initialize a TextWriter, in this case a StringWriter and set it to write to a StringBuilder
            StringBuilder stringBuilder = new StringBuilder();
            XmlTextWriter myWriter = new XmlTextWriter(new StringWriter(stringBuilder));

            //apply the XSL transformations to the xmlException and output them to the XmlWriter
            myXslTrans.Transform(xmlException.CreateReader(), null, myWriter);

            //outputting to the console the HTML exception (you can send it as the message body of an email)
            Console.WriteLine(stringBuilder);
        }
    }
} 
```

这是**Formatter.xsl**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8" indent="no"/>
  <xsl:template match="/">
    <html>
      <body>
        <h1>
          <xsl:value-of select="name(/*)"/>
        </h1>
        <h2>
          <xsl:value-of select="//Message"/>
        </h2>
        <table border="1">
          <tr bgcolor="#9acd32">
            <th>StackTrace</th>
          </tr>
          <xsl:for-each select="//Frame">
            <tr>
              <td>
                <xsl:value-of select="."/>
              </td>
            </tr>
          </xsl:for-each>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

这是**ExceptionXElement 类**定义：

```
using System;
using System.Collections;
using System.Linq;
using System.Xml.Linq;

/// <summary>Represent an Exception as XML data.</summary>
public class ExceptionXElement : XElement
{
    /// <summary>Create an instance of ExceptionXElement.</summary>
    /// <param name="exception">The Exception to serialize.</param>
    public ExceptionXElement(Exception exception)
        : this(exception, false)
    { }

    /// <summary>Create an instance of ExceptionXElement.</summary>
    /// <param name="exception">The Exception to serialize.</param>
    /// <param name="omitStackTrace">
    /// Whether or not to serialize the Exception.StackTrace member
    /// if it's not null.
    /// </param>
    public ExceptionXElement(Exception exception, bool omitStackTrace)
        : base(new Func<XElement>(() =>
        {
            // Validate arguments

            if (exception == null)
            {
                throw new ArgumentNullException("exception");
            }

            // The root element is the Exception's type

            XElement root = new XElement
                (exception.GetType().ToString());

            if (exception.Message != null)
            {
                root.Add(new XElement("Message", exception.Message));
            }

            // StackTrace can be null, e.g.:
            // new ExceptionAsXml(new Exception())

            if (!omitStackTrace && exception.StackTrace != null)
            {
                root.Add
                (
                    new XElement("StackTrace",
                        from frame in exception.StackTrace.Split('\n')
                        let prettierFrame = frame.Substring(6).Trim()
                        select new XElement("Frame", prettierFrame))
                );
            }

            // Data is never null; it's empty if there is no data

            if (exception.Data.Count > 0)
            {
                root.Add
                (
                    new XElement("Data",
                        from entry in
                            exception.Data.Cast<DictionaryEntry>()
                        let key = entry.Key.ToString()
                        let value = (entry.Value == null) ?
                            "null" : entry.Value.ToString()
                        select new XElement(key, value))
                );
            }

            // Add the InnerException if it exists

            if (exception.InnerException != null)
            {
                root.Add
                (
                    new ExceptionXElement
                        (exception.InnerException, omitStackTrace)
                );
            }

            return root;
        })())
    { }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:44:42.283

我正在考虑更多关于制作带有 %message% 标记的 html 文件的内容。将 html 文件放入您的资源中，以便您可以像字符串一样调用它。然后只需使用 string.Replace("%message%", error.Message); 然后通过电子邮件发送。我在某处读到了一个很好的解决方案。我会找到这篇文章并编辑我的答案

我修改了一些类似的代码。看看这是否有帮助

```
public System.Net.Mail.AlternateView GenerateHTMLErrorEmail(Exception ex)
{
    string body = ProductionEmailer.Properties.Resources.ShippedEmail;
    //Build replacement collection to replace fields in email.html file
    body = body.Replace("%MESSAGE%", ex.Message);

    AlternateView html = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text.Html);

    //add a image to the html email, optional
    Bitmap b = new Bitmap(Properties.Resources.html_email_header_01);
    ImageConverter ic = new ImageConverter();
    Byte[] ba = (Byte[])ic.ConvertTo(b, typeof(Byte[]));
    MemoryStream logo = new MemoryStream(ba);
    LinkedResource header1 = new LinkedResource(logo, "image/gif");
    header1.ContentId = "header1";
    html.LinkedResources.Add(header1);

    return html;
} 
```

# c# - 有没有办法可以在 Steema Teechart Graphics 3D 中设置字体高度？

> ID：13751228
> 
> 赞同：0
> 
> 时间：2012-12-06T19:41:09.637
> 
> 标签：c#, teechart, graphics3d

有没有办法可以在 Steema Teechart Graphics 3D 中设置字体高度？我能找到的最接近的是 tchart.graphics3d.fontheight ，但它获得了字体高度，没有设置它，所以有没有办法设置字体高度？

太感谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:45:44.337

TeeChart 的图表默认在其背景中具有渐变。如果要更改颜色，之前必须禁用背景渐变。您可以执行以下代码行：

```
private void InitializeChart()
{
    tChart1.Panel.Gradient.Visible = false;
    tChart1.Panel.Color = Color.Aqua;

} 
```

我希望会有所帮助。

谢谢，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T10:41:37.303

您不能只更改 FontHeight，因为您只能获取 FontHeight 或 FontWidth 来查阅它们的值。因此，如果您想更改字体的大小（高度和宽度），您必须为字体大小分配一个值，就像在下一行代码中所做的那样：

```
 public Form1()
        {
            InitializeComponent();
            InitializeChart();
        }
        private void InitializeChart()
        {
            tChart1.AfterDraw += new PaintChartEventHandler(tChart1_AfterDraw);
        }

        void tChart1_AfterDraw(object sender, Steema.TeeChart.Drawing.Graphics3D g)
        {
            g.Font.Size = 25; 
            g.TextOut(100, 150, "TeeChartFor.Net");
        } 
```

我希望会有所帮助。

谢谢，

# xml - 通过 powershell 将数据附加到现有的 xml 文件中

> ID：13751230
> 
> 赞同：3
> 
> 时间：2012-12-06T19:41:29.237
> 
> 标签：xml, powershell, foreach, selectnodes

我可以帮助我使用 powershell 将节点添加到现有的 XML 中吗？

这是我所拥有的：

```
<agentList>
 <newAgent>
      <name>Justice, Kari</name>
      <mu>4690</mu>
  <agentData>
   <group>
       <description>GROUP_DESCRIPTION</description><value>GROUP_NAME</value>
   </group>
  </agentData>
 </newAgent>
</agentList> 
```

我需要添加这个：

```
 <group><description>ACSR System Logon</description><value></value></group>
  <group><description>Current Call Type</description><value></value></group>
  <group><description>OMS</description><value></value></group>
  <group><description>RIO Log-in</description><value></value></group>
  <group><description>Site</description><value></value></group> 
```

这里：

```
<agentList>
 <newAgent>
      <name>Justice, Kari</name>
      <mu>4690</mu>
  <agentData>
   <group>
       <description>GROUP_DESCRIPTION</description><value>GROUP_NAME</value>
           <====== HERE
           <====== HERE
           <====== HERE
           <====== HERE
   </group>
  </agentData>
 </newAgent>
</agentList> 
```

我在 XML 上可能有多个用户，所以我想使用 FOREACH 行.. 但是我在 powershell 中使用 xml 有点迷路了...如果有人可以分享一些想法，我会很高兴使用它...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T20:09:56.610

它应该是这样的：

```
$GroupList = @{"Mickey" = "mouse";"Minnie" = "mouse";"Goofy" = "dog"}

$xml=[xml](get-content .\yourfile.xml)
$xml | Select-Xml -XPath '/agentList/newAgent/agentData' | foreach-object{$_.node.removeall()} #clear group section
$groupNode = $xml.createelement("group")

foreach ($description in $($GroupList.keys))
{
    $descNode = $xml.createelement("description")
    $descNode.setattribute("value",$description)
    $groupNode.appendchild($descNode)

    $valueNode = $xml.createelement("value")
    $valueNode.setattribute("value",$GroupList[$description])
    $groupNode.appendchild($valueNode)
}

$xml.selectsinglenode("agentList/newAgent/agentData").appendchild($groupNode)
$xml.save("C:\YourPathHere\test.xml") 
```

** 此代码假定“.\yourfile.xml”中已经存在“组”元素。

# javascript - 带有弹出窗口的 Maphilight jQuery

> ID：13751232
> 
> 赞同：0
> 
> 时间：2012-12-06T19:41:34.817
> 
> 标签：javascript, jquery, jquery-plugins, imagemap, maphilight

我试图让 maphilight jQuery 插件允许我在鼠标悬停时执行操作，但我似乎无法让它工作并且仍然允许突出显示。

到目前为止，这是我的代码：

```
var j = jQuery.noConflict();

j(document).ready(function() {
    j('.mapF').maphilight({ stroke: true, fillColor: 'FF0000', fillOpacity: 0.2 });

    j('.areaH').hover(function (e) {
        alert('1');
    }, function() {});
});

<img src="img.jpg" usemap="#map" class="mapF">

<map name="map" class="mapH">
<area shape="poly" coords="161,64,226,7,273,44,211,88,160,65" href="#" mystuff="img1.jpg" class="areaH" />
<area shape="poly" coords="3,269,5,282,11,296,24,315,41,326,49,329,58,329,58,339,0,339,0,272,3,270" href="#" />
<area shape="poly" coords="231,328,368,328,369,345,230,345" href="#" />
<area shape="poly" coords="293,204,297,228,298,251,281,252,280,265,243,264,243,261,231,261,231,226,292,204" href="#" />
<area shape="poly" coords="306,199,370,175,369,231,309,231,305,199" href="#" />
<area shape="poly" coords="362,106,379,158,515,104,498,58,435,88,417,85" href="#" />
<area shape="poly" coords="48,163,73,194,17,237,18,223,29,197,48,164" href="#" />
</map> 
```

好的，悬停是有效的，但它会从 Hilight 插件中夺走控制权，并且该区域不再突出显示。

我怎样才能让它工作，我想实际运行整个函数并出现一个弹出窗口但保持对象突出显示。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:36:45.373

好的，我想出了如何使用 jQuery Cluetips 来代替。我尝试了几个模态框，例如 Shadowbox 和 Lightbox，但它们只是从地图部分移除了焦点，也不会让它突出显示。

因此，最快和最简单的方法是使用 Cluetip 并使用需要使用关闭按钮关闭的持久框。

```
var j = jQuery.noConflict();

j(document).ready(function() {
    j('.mapF').maphilight({
        stroke: true,
        fillColor: 'FF0000',
        fillOpacity: 0.2
    });

    j('.areaH').cluetip({
        width: '553px',
        showTitle: true,
        sticky: true,
        closePosition: 'title',
        closeText: '<img src="cross.png" alt="" />',
        tracking: false
    });
});

<img src="image.jpg" usemap="#map" class="mapF">
<map name="map" class="mapH">
<area shape="poly" coords="161,64,226,7,273,44,211,88,160,65" href="#" rel="img1.jpg" class="areaH" />
<area shape="poly" coords="3,269,5,282,11,296,24,315,41,326,49,329,58,329,58,339,0,339,0,272,3,270" href="#" rel="img4.jpg" class="areaH" />
<area shape="poly" coords="231,328,368,328,369,345,230,345" href="#" rel="img3.jpg" class="areaH" />
<area shape="poly" coords="293,204,297,228,298,251,281,252,280,265,243,264,243,261,231,261,231,226,292,204" href="#" rel="img10.jpg" class="areaH" />
<area shape="poly" coords="306,199,370,175,369,231,309,231,305,199" href="#" rel="img5.jpg" class="areaH" />
<area shape="poly" coords="362,106,379,158,515,104,498,58,435,88,417,85" href="#" rel="img8.jpg" class="areaH" />
<area shape="poly" coords="48,163,73,194,17,237,18,223,29,197,48,164" href="#" rel="img2.jpg" class="areaH" />
</map> 
```

此设置完美运行，并允许我拥有我想要的小弹出窗口，并且用户必须关闭每个弹出窗口。或者，如果他们在启动时转到另一个，则新的将替换前一个，而无需关闭。所以总而言之，这是一个很好的解决方案。如果我需要拉入外部页面，加上线索提示支持 Ajax 调用。

# wpf - 触发时无法显示下划线

> ID：13751235
> 
> 赞同：2
> 
> 时间：2012-12-06T19:41:44.167
> 
> 标签：wpf, xaml, triggers, underline, text-decorations

我有以下样式，但是当鼠标悬停触发器为真时，文本上不会显示下划线。

```
<Style x:Key="HyperlinkToggleButtonStyle" TargetType="ToggleButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <TextBlock x:Name="TextBlock">
                            <ContentPresenter Content="{TemplateBinding  Content}" ContentTemplate="{TemplateBinding  ContentTemplate}"/>
                </TextBlock>
            </ControlTemplate>
        </Setter.Value>
    </Setter>

    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="false">
            <Setter Property="Background" Value="{StaticResource StandardBackground}"/>
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontStyle" Value="Normal"/>
            <Setter Property="FontWeight" Value="Normal"/>                                         
        </Trigger>

        <Trigger Property="IsMouseOver" Value="true">
            <Setter Property="Background" Value="{StaticResource StandardBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource StandardBlue}" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontStyle" Value="Normal"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="TextBlock.TextDecorations" Value="Underline"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:54:53.473

这可能不是一个理想的解决方案，但您可以在控件模板中定义触发器。不要忘记使用`TargetName`setter 上的属性引用您的 TextBlock。

```
 <Setter Property="Template">
        <Setter.Value>
           <ControlTemplate TargetType="ToggleButton">
              <TextBlock x:Name="TextBlock">
                        <ContentPresenter Content="{TemplateBinding  Content}" ContentTemplate="{TemplateBinding  ContentTemplate}"/>
              </TextBlock>
              <ControlTemplate.Triggers>
                 <Trigger Property="IsMouseOver" Value="true">
                    <Setter TargetName="TextBlock" Property="TextBlock.TextDecorations" Value="Underline"/>
                 </Trigger>
              </ControlTemplate.Triggers>
           </ControlTemplate>
        </Setter.Value>
     </Setter> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:55:57.013

TextDecorations[属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.textdecorations.aspx)不是继承的，因此在 Button 上设置值（这是您的触发器所针对的）不会完成您想要的。您可能可以使用 StoryBoard 来做到这一点，但我不记得故事板是否可以针对模板中定义的元素（唯一的方法就是这样做）。

# php - PHP中的隐形错误

> ID：13751252
> 
> 赞同：-2
> 
> 时间：2012-12-06T19:43:01.627
> 
> 标签：php, mysql

试图弄清楚为什么我移动的 Wordpress 网站会出现白屏死机。

试图打开错误转储 - 但它不起作用。绝对什么都没有出现。

这是示例代码：

```
<?php

ini_set('display_errors', 1);
 ini_set('log_errors', 1);
 ini_set('error_log', dirname(__FILE__) . '/error_log.txt');
 error_reporting(E_ALL);

$con = mysql_connect('localhost', 'groupasa', 'groupasa');

$selected = mysql_select_db("groupasa",$con)

Echo "Test";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:45:35.683

对于致命错误，您可以打开 php 代码中的错误，您必须在 apache 或 htaccess 级别打开它们。你也可以去查看错误日志中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:48:01.783

右键单击并检查页面的来源，有时 html 不会显示错误，但它实际上在代码中。

不确定是否是这种情况，但希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:11:23.470

大多数情况下，您可以通过进入数据库并使用以下查询强制“停用”所有活动插件来解决“白屏”问题。

```
UPDATE wp_options SET option_value = '' WHERE option_name = 'active_plugins'; 
```

WP的*核心*是相当稳固的，但真正把一切搞砸的是插件和垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:55:42.693

尝试将 Echo 语句放在页面的最顶部，然后退出；如果显示回显，那么您的 PHP 编译器工作正常，并且您知道问题出在页面上的代码上。

接下来，在 mysql_select_db 行的末尾添加缺少的分号

您还可以检查您的 PHP 错误日志。

# javascript - 在主干 js 中使用相同的集合从不同的 url 获取数据

> ID：13751253
> 
> 赞同：4
> 
> 时间：2012-12-06T19:43:10.857
> 
> 标签：javascript, jquery, backbone.js, backbone-model, backbone.js-collections

我有一个必须调用 4 个外部 API 的集合，例如：http [:](http://www.abc.com) //www.abc.com、http: //www.fgt.com、http : [//www.jkl.com](http://www.jkl.com)和[http](http://www.fgt.com) [://www.rty .com](http://www.rty.com) _

我有一个名为 Todos.js 的集合。有没有办法我可以在一个集合中同时获取 4 个 api，因为所有四个 api 都会为我提供相同的模型响应所以我从 4 个 api 获得的响应具有相同的数据结构，即“名称”和“链接”。

有没有办法可以将所有响应附加到同一个集合中？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T21:36:27.160

我认为方法是覆盖`fetch`，您可以在其中对每个 API 进行 Ajax 调用。将返回的部分集合存储在一个临时数组中，当所有 4 个都完成后，使用`this.reset`. （我想你可以使用 JQuery `Deferred`，或者只是保持内部统计返回的调用次数。）

像这样的东西：

```
var Collection = Backbone.Collection.extend({

    fetch: function() {
        this.completeCount = 0;
        this.errorCount = 0;
        this.temp = [];
        this.urls = [ 'url1', 'url2', 'url3', 'url4' ];
        var self = this;

        // make a $.get call for each URL and add
        _.each(this.urls, function(url) {
            $.get(url, { success: function(data) {
                console.log("Got partial collection from " + url);
                self.addPartial(data);

                // alternatively, just call "self.add(data);" here

            }, error: function(response) {
                console.log("Oops, the Ajax call failed for some reason... ignoring");
                self.completeCount ++;
                self.errorCount ++;
            } });
        });
    },

    // add a JSON array that contains a subset of the collection
    addPartial: function(data) {
        this.completeCount ++;
        var self = this;    

        // add each item to temp
        _.each(data, function(item) {
            self.temp.push(item);   
        });

        // if all have been received, then create the collection
        if (this.completeCount == this.urls.length) {
            this.reset(this.temp);
        }
    }
}); 
```

[这是一个小提琴](http://jsfiddle.net/EnJyq/3/)，我`$.get`用一个在短暂延迟后只返回虚拟数据的方法替换了它。

**对评论的回应**

将响应添加到集合中可能会更好（无论如何它更容易）。 [这是一个更新的小提琴。](http://jsfiddle.net/HSHfB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-17T16:54:47.963

我知道这是一个老问题，但如果有人到达这里，这些信息可能会有所帮助。要保留集合先前获取的数据，您可以更改 url 并使用此选项随时调用方法 fetch() ：

```
reset: false,
remove: false, 
```

像这样

```
yourCollection.fetch({reset: false, remove: false, [other]: [wathever]}) 
```

仅此而已，无需重写该方法。（也许在 2012 年是必要的，不知道。事实是这些选项适用于 Backbone 1.1.2 或更高版本）。请注意，即使重复，我也不确定这是否会合并或仅添加新数据。

文档 ( [http://backbonejs.org/#Collection-fetch ) 对“](http://backbonejs.org/#Collection-fetch) *reset* ”选项有点混淆，因为它说默认设置为***false***，也许这仅适用于 url 保持静态和单一的情况。

# objective-c - UICollectionView performBatchUpdates 插入、删除、移动同时进行

> ID：13751255
> 
> 赞同：2
> 
> 时间：2012-12-06T19:43:13.103
> 
> 标签：objective-c, ios, uicollectionview

我正在尝试使用`UICollectionView`'s`performBatchUpdates`方法执行过滤操作（排序），并在块内插入单元格、移动单元格和删除单元格。我得到了一些奇怪的结果，所以我想知道是否真的支持这种行为（我认为这些指标都搞砸了）。我是否只需将每种“类型”的操作（插入、移动和删除）分解为单独的不同块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-08T15:15:44.547

刚刚找到这个答案，寻找各种操作的排序，并认为我会分享我在与项目插入删除（不移动）结合时发现的关于部分插入/删除的内容。当事情变空时，我正在过滤`UICollectionView`和删除单元格/部分，并在清除搜索时重新填充它们。我基本上是用一组数组来支持它。

我发现在从数据源中删除要删除的部分之前，我需要使用行和部分索引计算已删除的项目。（前段删除）

然后从数据源中删除这些部分并存储这些索引以进行删除。

然后插入任何新的部分/根据需要进行排序/并跟踪所有插入的部分。

最后根据新的节索引计算插入的行。

```
Deleted Sections: (pre deleted index)
Inserted Sections: (indexes after deleting the deleted sections and adding these back in)
Deleted Rows: (row, pre-deleted section)
Inserted rows: (row, section based on index after inserting new sections) 
```

这是在 iOS 9 上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T20:22:28.783

里面的所有操作`performBatchUpdates`都是针对当前索引执行的。所以不，你不应该将插入/删除/移动分解成不同的块，这正是`performBatchUpdates`它的用途。如果没有一些代码或对您所看到的怪异的描述，很难提供帮助......

# asp.net - ASP.NET MVC Session 变量通过 HTML.Action ChildAction 变为 null

> ID：13751263
> 
> 赞同：1
> 
> 时间：2012-12-06T19:43:31.940
> 
> 标签：asp.net, asp.net-mvc-3, session

我正在使用 ASP.NET MVC3 和 Razor 语法开发一个简单的测试网站。它具有`_LayoutPage.cshtml`作为主模板，用于`@HTML.Action`在每个页面的站点顶部打印用户 ID。

我为这个局部视图实现了一个`childAction`命名`userInfo`，它从中读取用户 ID`HTTPContext.Session`并将其打印出来。子动作在一个称为`CommonActionController`派生自的控制器中实现`Controller`。除了用户 ID，它还从会话中读取另外两个变量并打印出来。

```
public class CommonActionController: Controller
{

    [ChildActionOnly]
    public ActionResult userInfo()
    {

        if(HTTPContext.Session["x-user-id"] != null)
        {
            ViewBag.UserId = (string)(HTTPContext.Session["x-user-id"]);
            ViewBag.UserFirstName = (string)(HTTPContext.Session["x-user-first-name"]);
            ViewBag.UserLastName = (string)(HTTPContext.Session["x-user-last-name"]);
            ViewBag.UserLoggedinSince = (DateTime)(HTTPContext.Session["x-user-logon-timestamp"]).ToString("f");
        }

        return PartialView();
    }
} 
```

我调用的主页控制器`HomeController`具有实际实现的仪表板功能`Dashboard`（目前它只打印“仪表板”一词）。在这个控制器中，我重写`Controller.OnActionExecuting()`了验证用户 ID 是否存在于会话中的方法。就像前面提到的 childAction 一样，它从 session 中读取总共三个变量。

```
public class HomeController: Controller
{

    public HomeController()
    {

    }

    protected override void OnActionExecuting(ActionExecutingContext ctx)
    {

        base.OnActionExecuting(ctx);

        if(HTTPContext.Session["x-user-id"] == null)
            ctx.Result = new RedirectResult("logon/userlogon");

        if(HTTPContext.Session["x-user-logon-timestamp"] == null)
            ctx.Result = new RedirectResult("logon/userlogon");

        if(HTTPContext.Session["x-user-internal-flag"] == null)
            ctx.Result = new RedirectResult("logon/userlogon");

    }

    public ActionResult Dashboard()
    {
        // nothing to see here
        return View();
    }

} 
```

我已经稍微清理了代码以删除 debug.print 语句。

根据日志，我看到`OnActionExecuting()`方法和`userInfo`子操作是同时调用的。在某一时刻`OnActionExecuting()`，会话变量为空。在日志中，我可以看到在`ChildAction`调用该点之前，会话变量将它们的值保持在`OnActionExecuting()`. 一旦`childaction`访问它们，它们就会变为空。

当我评论从子操作访问会话的代码时，一切正常。我究竟做错了什么？访问会话变量时我必须采取一些预防措施吗？这是因为我不知道如何异步访问 Session 吗？

我也有以下内容`web.config`：

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T20:02:19.267

1）开始->管理工具->服务

2) 右键单击​​ ASP.NET 状态服务，然后单击“开始”</p>

*此外，您可以将服务设置为自动，以便它在重新启动后工作。

有关更多详细信息，您可以查看我的博客文章：http: [//jamshidhashimi.com/2011/03/16/unable-to-make-the-session-state-request-to-the-session-state-server/](http://jamshidhashimi.com/2011/03/16/unable-to-make-the-session-state-request-to-the-session-state-server/)

ref: [无法向会话状态服务器发出会话状态请求](https://stackoverflow.com/questions/1376717/unable-to-make-the-session-state-request-to-the-session-state-server)

# php - 使用 PHP 检查重复文件的更可靠方法

> ID：13751264
> 
> 赞同：1
> 
> 时间：2012-12-06T19:43:34.873
> 
> 标签：php

我已经看到了有关使用 md5 和 sha1 哈希以及文件大小来比较文件的问题和答案，我设置了系统，虽然这在大多数情况下都有效，但有一个特定的情况，它与相同的 md5 匹配误报， sha1 哈希和文件大小。

特别是我的情况，当用户直接从 ipad 和 iphone 上传图片时，即使图像实际上完全不同，也会发生这种情况。

我想知道是否有人知道另一种方法可以添加到更可靠和独特的支票中。

谢谢你。

编辑：也使用以字节为单位的文件大小

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:46:57.870

使用 MD5 和文件大小的组合，这应该是非常准确的。

您确定创建哈希时没有错误吗？得到很多误报的可能性很小。

# python - python守护进程+进程间通信+网络服务器

> ID：13751271
> 
> 赞同：1
> 
> 时间：2012-12-06T19:43:50.713
> 
> 标签：python, arduino, interprocess, python-multithreading

情况：

我有一个 python 脚本来连接/发送信号到串行连接的 arduino。我想知道实现 Web 服务器的最佳方法，以便我可以查询 arduinos 的状态。我希望“Web 服务器”部分和串行连接都在同一个脚本上运行。有可能吗，还是我必须将其分解为守护进程和服务器部分？

谢谢，任何评论都是最受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T06:40:07.747

有 WAMP 服务器。这是最简单快捷的方法。Web 服务器将支持 php、python、http 等。如果您使用的是 Linux，最简单的串行通信工具是 php。但在 windows php 中无法从串行通信中读取数据。因此使用 python / perl 等。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T10:48:59.587

对于那些想知道我选择了什么的人；我已经解耦了这两部分：

**Arduino 守护进程**

我将 Python 与一个名为 [Bottle][1] 的微型 Web 框架一起使用，该框架处理 API 调用，并且我使用 PySerial 与 Arduino 进行通信。

**网络服务器**

规范的 Apache 和 PHP；用于对 Arduino 守护进程进行 API 调用。

# c++ - 指针变量赋值

> ID：13751274
> 
> 赞同：0
> 
> 时间：2012-12-06T19:43:58.787
> 
> 标签：c++, pointers, linked-list

我创建了一个结构：

```
struct time
{
    int hours;
    int minutes;
    int seconds;
    double total_time;
    double price;

    time* next;
    time* back;
}; 
```

我创建了 2 个指向结构的指针：

```
time* traverse, head; 
```

我想将 head 的位置指向与 head 相同的位置：

```
traverse = new time;
    head = traverse; // Error here 
```

为什么我在作业中遇到错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:46:10.477

写的时候

```
time* traverse, head; 
```

星号只影响第一个变量。将您的声明更改为

```
time *traverse, *head; 
```

并且错误应该消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:45:11.023

指针声明错误

```
time* traverse, head; 
```

它只是声明一个指针和一个对象

您应该将其声明为：

```
time* traverse;
time* head; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:45:03.987

因为您没有声明`head`为指针：

```
time* traverse, *head;   //both are pointers 
```

不一样

```
time* traverse, head;    //one is a pointer, one is an object 
```

# python - 如何在 Flask / WSGI 服务器中使用 app-factory，为什么它可能不安全？

> ID：13751277
> 
> 赞同：14
> 
> 时间：2012-12-06T19:44:10.940
> 
> 标签：python, flask, wsgi

# 关于应用程序可调用对象、WSGI 服务器和 Flask 循环导入的问题

我（可能）很困惑。我想从 app-factories 安全地创建 Flask / WSGI 应用程序，并且仍然能够轻松地在 WSGI 服务器中使用它们。

tl;博士

1.  我可以安全地避免在导入**init**时创建应用程序（如推荐的那样），而是稍后创建它（即使用工厂方法）

2.  如何使该应用程序与 WSGI 服务器一起工作？尤其是当我传入配置和其他设置而不是从 ENV 中提取它们时

例如：：

```
def make_app(configdict, appname):
    app = Flask(appname)
    app.config.update(configdict)
    init_db(configdict)
    set_app_in_global_namespace(app)

    #importing now will allow from pkg import app        
    from mypackage import views

    return app 
```

我想使用上面的“工厂”，因为我想轻松地控制配置以进行测试等。

然后我大概想创建一个 wsgi.py 模块，将应用程序提供给 WSGI 服务器。

所以最终事情看起来有点像这样

**初始化**.py::

```
app = None

def make_app(configdict, appname):
    flaskapp = Flask(appname)
    flaskapp.config.update(configdict)
    init_db(configdict)

    global app
    app = flaskapp    

    #importing now will allow from pkg import app        
    from mypackage import views

    return flaskapp 
```

wsgi.py::

```
from mypackage import app

app = make_app(configfromsomewhere, "myname") 
```

uWSGI::

```
uwsgi --module=mypackage.wsgi:app 
```

但是 wsgi.py 仍然不是我可以调用的东西，例如 wsgi.py --settings=x --host=10.0.0.1 所以我真的不知道如何将配置传递给 *.*

我问是因为虽然这看起来......好吧......它也有点乱。

当一切都在 ENV 中时，生活会更轻松。

不仅如此，而且：

## 那么使用 app-factory 有什么不安全的地方

给出的建议`here <http://flask.pocoo.org/docs/patterns/packages>`是::

```
1\. the Flask application object creation has to be in the
__init__.py file. That way each module can import it safely and
the __name__ variable will resolve to the correct package.

2\. all the view functions (the ones with a route() decorator on
  top) have to be imported in the __init__.py file. Not the object
  itself, but the module it is in. Import the view module after
  the application object is created. 
```

回复：2\. 显然，路由装饰器期望实例化应用程序具有某些能力，没有它们就无法运行。没关系。

回复：1.，好的，我们需要正确的**名称**。但是什么是不安全的？为什么？如果未初始化，导入和使用应用程序是否不安全？好吧，它会坏掉，但那不是不安全的。它是大肆吹嘘的线程本地吗？可能。但是，如果我不顾一切地从随机模块中提取应用程序实例，我应该会遇到麻烦。

含义——我们不从视图以外的任何地方引用应用程序对象——本质上我们保持我们的模块化良好和紧凑，并传递字典、错误对象甚至 WebObs。

[http://flask.pocoo.org/docs/patterns/appdispatch](http://flask.pocoo.org/docs/patterns/appdispatch) [http://flask.pocoo.org/docs/deploying/#deployment](http://flask.pocoo.org/docs/deploying/#deployment) [http://flask.pocoo.org/docs/patterns/packages/#larger-应用程序](http://flask.pocoo.org/docs/patterns/packages/#larger-applications) [http://flask.pocoo.org/docs/becomingbig](http://flask.pocoo.org/docs/becomingbig)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-06T23:16:59.903

根据[Flask Documentation](http://flask.pocoo.org/docs/patterns/appfactories/)，应用程序工厂很好，因为：

> 1.  测试。您可以使用具有不同设置的应用程序实例来测试每种情况。
>     
>     
> 2.  多个实例。想象一下，您想运行同一应用程序的不同版本。当然，您可以在您的网络服务器中设置多个具有不同配置的实例，但是如果您使用工厂，则可以在同一个应用程序进程中运行同一应用程序的多个实例，这很方便。

但是，正如文档的[其他测试技巧](http://flask.pocoo.org/docs/testing/#other-testing-tricks)部分所述，如果您使用应用程序工厂`before_request()`，`after_request()`则不会自动调用这些函数。

在接下来的段落中，我将展示如何将应用程序工厂模式与 uWSGI 应用程序服务器和 nginx 一起使用（我只使用过这些，但我可以尝试帮助您使用另一台服务器对其进行配置）。

## 应用工厂

因此，假设您的应用程序位于文件夹**yourapplication**中，其中包含`__init__.py`文件：

```
import os
from flask import Flask

def create_app(cfg=None):
    app = Flask(__name__)

    load_config(app, cfg)

    # import all route modules
    # and register blueprints

    return app

def load_config(app, cfg):
    # Load a default configuration file
    app.config.from_pyfile('config/default.cfg')

    # If cfg is empty try to load config file from environment variable
    if cfg is None and 'YOURAPPLICATION_CFG' in os.environ:
        cfg = os.environ['YOURAPPLICATION_CFG']

    if cfg is not None:
        app.config.from_pyfile(cfg) 
```

现在您需要一个文件来创建应用程序的实例：

```
from yourapplication import create_app

app = create_app()

if __name__ == "__main__":
    app.run() 
```

在上面的代码中，我假设有一个环境变量设置了配置文件的路径，但是您可以将配置路径提供给工厂，如下所示：

```
app = create_app('config/prod.cfg') 
```

或者，您可以使用带有环境和相应配置文件的字典之类的东西：

```
CONFIG_FILES = {'development': 'config/development.cfg',
                'test'       : 'config/test.cfg',
                'production' : 'config/production.cfg' } 
```

在这种情况下，`load_config`函数将如下所示：

```
def load_config(app, env):
    app.config.from_pyfile('config/default.cfg')

    var = "YOURAPPLICATION_ENV"
    if env is None and var in os.environ:
        env = os.environ[var]

    if env in CONFIG_FILES:
        app.config.from_pyfile(CONFIG_FILES[env]) 
```

## Nginx 和 uWSGI

以下是 nginx 的配置文件示例：

```
server {
    listen             80;
    server_name        yourapplication.com;
    access_log         /var/www/yourapplication/logs/access.log;
    error_log          /var/www/yourapplication/logs/error.log;

    location / {
        try_files $uri @flask;
    }

    location @flask {
        include        uwsgi_params;
        uwsgi_pass     unix:/tmp/yourapplication.sock;

        # /env is the virtualenv directory
        uwsgi_param    UWSGI_PYHOME                /var/www/yourapplication/env;

        # the path where the module run is located
        uwsgi_param    UWSGI_CHDIR                 /var/www/yourapplication;

        # the name of the module to be called
        uwsgi_param    UWSGI_MODULE                run;

        # the variable declared in the run module, an instance of Flask
        uwsgi_param    UWSGI_CALLABLE              app;
    }
} 
```

uWSGI 配置文件如下所示：

```
[uwsgi]
plugins=python
vhost=true
socket=/tmp/yourapplication.sock
env = YOURAPPLICATION_ENV=production
logto = /var/www/yourapplication/logs/uwsgi.log 
```

## 如何使用`before_request()`和`after_request()`

这些函数的问题在于，如果您在其他模块中调用它们，则在应用程序实例化之前无法导入这些模块。同样，[文档](http://flask.pocoo.org/docs/patterns/appfactories/)对此有话要说：

> 缺点是您不能在导入时使用蓝图中的应用程序对象。但是，您可以在请求中使用它。您如何使用配置访问应用程序？使用 current_app：

```
from flask import current_app, Blueprint, render_template
admin = Blueprint('admin', __name__, url_prefix='/admin')

@admin.route('/')
def index():
    return render_template(current_app.config['INDEX_TEMPLATE']) 
```

或者你可以考虑[创建一个 extension](http://flask.pocoo.org/docs/extensiondev/#the-extension-code)，然后你可以在没有任何 Flask 实例的情况下导入类，因为类扩展只会在创建后使用 Flask 实例。

# javascript - VideoJS - 字幕/字幕轨道在 Chrome 中显示两次？

> ID：13751278
> 
> 赞同：2
> 
> 时间：2012-12-06T19:44:13.733
> 
> 标签：javascript, video.js

2个问题：

1）我一直在努力`video.js`与`colorbox`（用于`lightbox`显示）集成，它工作正常，但是当我添加字幕或字幕轨道信息时：

```
<track kind="subtitles" src="subtitles/sample.vtt" srclang="en" 
label="English" default> 
```

在 Chrome 中，我将字幕/字幕轨道覆盖了两次。

![http://s9.postimage.org/hnuj82vzx/screenshot.png](../Images/09334cbbd770eddfe00fb9eccf726a5f.png)

当我打开它上面的开发工具时，我可以“看到”底部使用较小文本的轨道，但我不知道较大文本的来源。所以问题：这个其他轨道是Chrome“有用”的功能吗？

在 FF 中它工作正常，只出现单个字幕/字幕轨道。

2) 知道何时引入元数据轨道支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:19:14.173

您在曲目中有“默认”。您希望字幕默认显示还是要等到用户触发它们？如果您删除默认设置，它应该会阻止 Chrome 显示第二个版本。

Video.js在读入视频标签时会从视频标签[中删除](https://github.com/zencoder/video-js/blob/master/src/player.js#L64)它们，但显然这对于​​ Chrome 来说还不够，它仍然会拾取并显示它们。我们必须添加一些东西来禁用本机播放器中的曲目。

我添加了一个你可以关注的问题。[https://github.com/zencoder/video-js/issues/259](https://github.com/zencoder/video-js/issues/259)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T12:10:05.100

将此代码插入到脚本元素中的网页中

```
var myvideo = document.getElementsByTagName('video');
for (var i = 0, j = myvideo .length; i < j; i++) {
    myvideo[i].textTracks[0].mode = "hidden";
}; 
```

# forms - Symfony2：将基于表继承结构的集合添加到 FormView

> ID：13751279
> 
> 赞同：10
> 
> 时间：2012-12-06T19:44:16.687
> 
> 标签：forms, symfony, doctrine, single-table-inheritance, class-table-inheritance

我正在开发一个使用类表继承（http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html#class-table-inheritance）的 Symfony2/Doctrine 应用程序在咨询中管理投诉。每个咨询可以有许多投诉（OneToMany），每种不同类型的投诉都有不同的结构和外观。投诉是一个集合，使用 JS 动态添加。

在这一点上，我能够持久化投诉并将它们链接到咨询，方法是在持久化之前将它们重铸为控制器中的适当类型。我遇到了一些问题，我计划将其迁移到表单事件（http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html）或类似性质的东西以简化流程.

然而，此时我遇到的问题是，我无法使用 FormView 在视图中显示现有的投诉，因为表单构建器要求我设置要显示的集合的类型。如果每个咨询只有一种类型的投诉，那很好，但它们可以有多种类型，并且在表单构建器中设置类型会将我限制为那种类型。

在没有类型的情况下，我是否可以采取一些方法来阻止 FormView 转换为字符串，或者以某种方式在每个投诉的基础上动态检测和分配类型（使用 $complaint->getComplaintType()，也许）？

```
<?php
namespace Acme\ConsultBundle\Entity;
class Consult
{
    /**
     * @ORM\OneToMany(targetEntity="Acme\ConsultBundle\Entity\ComplaintBase", mappedBy="consult", cascade={"persist", "remove"})
     */
    protected $complaints;
}
?>

<?php
namespace Acme\ConsultBundle\Entity;
/**
 * Acme\ConsultBundle\Entity\ConsultBase
 *
 * @ORM\Entity
 * @ORM\Table(name="ConsultComplaintBase")
 * @ORM\HasLifecycleCallbacks
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="complaint_name", type="string")
 * @ORM\DiscriminatorMap({
 *  "ComplaintDefault"      = "Acme\ConsultBundle\Entity\ComplaintDefault",
 *  "ComplaintRosacea"      = "Acme\ConsultBundle\Entity\ComplaintRosacea",
 *  "ComplaintBotox"        = "Acme\ConsultBundle\Entity\ComplaintBotox",
 *  "ComplaintAcne"         = "Acme\ConsultBundle\Entity\ComplaintAcne",
 *  "ComplaintUrticaria"    = "Acme\ConsultBundle\Entity\ComplaintUrticaria",
 * })
 */
abstract class ComplaintBase
{
    /**
     * @ORM\ManyToOne(targetEntity="Acme\ConsultBundle\Entity\Consult", inversedBy="complaints")
     * @ORM\JoinColumn(name="consult_id", referencedColumnName="id")
     */
    protected $consult;
    /**
     * @ORM\Column(type="string", length="255")
     */
    protected $complaintType;
}
?>

<?php
namespace Acme\ConsultBundle\Form\Type;
class ConsultType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('complaints', 'collection', array(
                // 'type' => new ComplaintUrticariaType(),
                'error_bubbling' => true,
                'allow_add' => true,
                'allow_delete' => true,
                'by_reference' => false,
            ));
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T05:46:53.440

不完全确定它是否适用于集合，但它肯定适用于单一表单。请尝试这个想法。

首先为您的基本实体制作一个表格`ComplaintBase`

```
class ComplaintForm extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $subscriber = new ComplaintSubscriber($builder);
        $builder->addEventSubscriber($subscriber);

        /* your fields */ 
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\ConsultBundle\Entity\ComplaintBase',
        ));
    }
} 
```

然后在订阅者中，您可以根据提交的实体类型定义其他字段。

```
class ComplaintSubscriber implements EventSubscriberInterface
{
    private $factory;
    private $builder;

    public function __construct(FormBuilderInterface $builder)
    {
        $this->factory = $builder->getFormFactory();
        $this->builder = $builder;
    }

    public static function getSubscribedEvents()
    {
        return array(
            FormEvents::PRE_SET_DATA => 'preSetData',
        );
    }

    public function preSetData(FormEvent $event)
    {
        $data = $event->getData();
        $form = $event->getForm();

        if (null === $data) {
            return;
        }

        $class = get_class($data);
        if( $class === 'Acme\ConsultBundle\Entity\ComplaintDefault' ) {
            $this->processDefault($data, $form);
        }
        elseif( $class === 'Acme\ConsultBundle\Entity\ComplaintRosacea' ) {
            $this->processRosacea($data, $form);
        }
        elseif( $class === 'Acme\ConsultBundle\Entity\ComplaintBotox' ) {
            $this->processBotox($data, $form);
        }
        else {
            #NOP
        }
    }

    protected function processDefault(Entity\ComplaintDefault $node, FormInterface &$form)
    {
        #NOP
    }

    protected function processRosacea(Entity\ComplaintRosacea $node, FormInterface &$form)
    {
        $form->add($this->factory->createNamed('some_field', 'text'));
    }

    protected function processBotox(Entity\ComplaintBotox $node, FormInterface &$form)
    {
        $form->add($this->factory->createNamed('other_field', 'text'));
    }
} 
```

# matlab - 在 Simulink 中以编程方式标记信号

> ID：13751280
> 
> 赞同：5
> 
> 时间：2012-12-06T19:44:23.950
> 
> 标签：matlab, properties, signals, line, simulink

我正在尝试编写一个生成基本 Simulink 模型的脚本，我想知道是否有办法以编程方式标记信号线。我查看了 add_line 函数（这是我用来添加行的函数），但我没有看到用于定义名称或标签属性之类的选项。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-24T12:43:27.377

`add_line`返回新创建的行的句柄，因此您还可以编写：

```
lineHandle = add_line('sys','oport','iport');
set_param(lineHandle, 'Name', 'yourSignalName'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T22:13:31.537

使用当前选定的块`gcb`或要命名其输出信号的块的名称，您可以编写

> ```
> name = gcb
> h = get_param(name, 'PortHandles')
> 
> h = 
>   Inport: [72.0029 73.0029]
>  Outport: 74.0029
>   Enable: []
>  Trigger: []
>    State: []
>    LConn: []
>    RConn: []
> Ifaction: []
> 
> set(h.Outport(1), 'SignalNameFromLabel', 'output_sig') 
> ```

# web-services - 在 Delphi 的 SOAP Header 中发送简单的字符串

> ID：13751289
> 
> 赞同：12
> 
> 时间：2012-12-06T19:44:47.993
> 
> 标签：web-services, delphi, soap, delphi-xe2

我需要发送这样的东西：

```
 <soapenv:Header>
      <ser:userName>admin</ser:userName>
      <ser:userPassword>secret</ser:userPassword>
   </soapenv:Header> 
```

Delphi WSDL 导入器，生成了这个：

```
 userName2 = class(TSOAPHeader)
  private
    FValue: string;
  published
    property Value: string  read FValue write FValue;
  end;

  userName      =  type string;

  WsService = interface(IInvokable)
    function call(const userName: userName; const userPassword: userPassword); 
```

并将类型注册为：

```
 InvRegistry.RegisterHeaderClass(TypeInfo(WsService), userName2, 'userName', 'http://localhost/path/to/services'); 
```

问题是，**当我使用 delphi 生成的代码调用它时，它会将用户名和密码放在 SOAP 消息的 Body 部分，而不是 Header 中**。

所以我尝试自己发送标头，如下所示：

将类型定义更改为从 userName2 类继承，因为我无法使用 ISOAPHeaders.Send() 方法发送字符串。

```
userName = class(userName2); 
```

然后发送标题：

```
user := userName.Create;
user.Value := 'admin';

WS := GetWsService;
(WS as ISOAPHeaders).Send(user); 
```

现在标头位于正确的位置，但它们的发送方式如下：

```
<SOAP-ENV:Header>
    <NS1:userName xmlns:NS1="http://localhost/path/to/services">
        <Value xmlns="http://localhost/path/to/services">admin</Value>
    </NS1:userName>
</SOAP-ENV:Header> 
```

快到了，但**我不想要“Value”属性，我只想要一个简单的 header 标记**。

我该怎么做？

谢谢。

**== 编辑 ==**

根据要求，WSDL 在这里：[http ://desenvolvimento.lemontech.com.br:8081/wsselfbooking/WsSelfBookingService?wsdl](http://desenvolvimento.lemontech.com.br:8081/wsselfbooking/WsSelfBookingService?wsdl)

SOAP UI 将其导入并生成此示例请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://lemontech.com.br/selfbooking/wsselfbooking/services">
   <soapenv:Header>
      <ser:userPassword></ser:userPassword>
      <ser:userName></ser:userName>
      <ser:keyClient></ser:keyClient>
   </soapenv:Header>
   <soapenv:Body>
      <ser:pesquisarSolicitacao>
         <!--You have a CHOICE of the next 2 items at this level-->
         <idSolicitacaoRef></idSolicitacaoRef>
         <dataInicial></dataInicial>
         <dataFinal></dataFinal>
         <registroInicial>1</registroInicial>
         <!--Optional:-->
         <quantidadeRegistros>50</quantidadeRegistros>
      </ser:pesquisarSolicitacao>
   </soapenv:Body>
</soapenv:Envelope> 
```

这个示例请求工作得很好，但我不知道如何在 Delphi 中进行这个调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:16:22.937

您可以覆盖任何`TSOAPHeader`类的序列化。只需覆盖其`ObjectToSOAP`功能。我想出了这个：

```
unit Unit16;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, WsSelfBookingService, StdCtrls,
  InvokeRegistry, SOAPHTTPClient, opCOnvertOptions, XMLIntf, XSBuiltIns;

type
  TForm1 = class(TForm)
    Memo2: TMemo;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

type
 TSOAPCredentials = class(TSoapHeader)
 private
    FPassword: string;
    FUsername: string;
    FKeyClient: string;
 public
   function ObjectToSOAP(RootNode, ParentNode: IXMLNode;
                            const ObjConverter: IObjConverter;
                            const NodeName, NodeNamespace, ChildNamespace: InvString; ObjConvOpts: TObjectConvertOptions;
                            out RefID: InvString): IXMLNode; override;
 published
   property userName     : string read FUsername write Fusername;
   property userPassword : string read FPassword write FPassword;
   property keyClient : string read FKeyClient write FKeyClient;
 end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TSOAPCredentials }

function TSOAPCredentials.ObjectToSOAP(RootNode, ParentNode: IXMLNode; const ObjConverter: IObjConverter; const NodeName,
  NodeNamespace, ChildNamespace: InvString; ObjConvOpts: TObjectConvertOptions; out RefID: InvString): IXMLNode;
begin
 Result := ParentNode.AddChild('userName');
 Result.Text := FUsername;
 Result := ParentNode.AddChild('userPassword');
 Result.Text := FPassword;
 Result := ParentNode.AddChild('keyClient');
 Result.Text := FKeyClient;
end;

procedure TForm1.Button1Click(Sender: TObject);

var
 ws   : WsSelfBooking;
 Req  : pesquisarSolicitacao;
 Resp : pesquisarSolicitacaoResponse;
 Rio  : THTTPRIO;
 Cred : TSOAPCredentials;

begin
 Rio := THttpRIO.Create(nil);
 ws := GetWsSelfBooking(false, '', Rio);
 Cred := TSOAPCredentials.Create;
 Cred.userName := 'admin';
 Cred.userPassword := 'secret';
 Cred.keyClient := 'key';
 Rio.SOAPHeaders.Send(cred);
 Req := pesquisarSolicitacao.Create;
 Req.registroInicial := 1;
 Req.quantidadeRegistros := 50;
 Resp := ws.pesquisarSolicitacao(Req);    
end;

end. 
```

导致此请求标头：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<SOAP-ENV:Header>
 <SOAP-ENV:userName>admin</SOAP-ENV:userName>
 <SOAP-ENV:userPassword>secret</SOAP-ENV:userPassword>
 <SOAP-ENV:keyClient>key</SOAP-ENV:keyClient>
</SOAP-ENV:Header> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T13:51:43.557

**解决方案：**

这不是很明显，但我只需将**IS_TEXT**值添加到**索引**并声明一个新的 TSOAPHeader 后代，解决方案是这样的：

```
const
  IS_TEXT = $0020;

type
  TSimpleHeader = class(TSOAPHeader)
  private
    FValue: string;
  published
    property Value: string Index (IS_TEXT) read FValue write FValue;
  end;

  userName = class(TSimpleHeader); 
```

然后注册这个头文件：

```
InvRegistry.RegisterHeaderClass(TypeInfo(WsService), userName, 'userName', 'http://localhost/path/to/services'); 
```

并手动发送标题：

```
 User := userName.Create;
    User.Value := 'username';

    (WS as ISOAPHeaders).Send(User); 
```

基本上，索引中的 IS_TEXT 值会阻止 Delphi 在其中创建 userName 标记和 Value 标记。它只是将 Value 属性的字符串放在 userName 标记内。

很遗憾，索引键用于一些不那么明显的东西，关于它的文档也很难找到也很难理解：

> AS_ATTRIBUTE 功能已被弃用。它仍然适用于遗留代码，但首选方法是使用属性的索引值。index 属性允许您指定属性是属性、无界元素、可选元素、文本值还是可以具有 NULL 值。

资料来源：[http ://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Remotable_Objects](http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Remotable_Objects)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:51:24.110

您可以在 XML 字符串“上线”前使用 stringreplace 来注入标签。您需要一个 RIO_BeforeExecute 处理程序，然后您可以直接处理 SOAPRequest。

# ssl - SSL 重定向失败

> ID：13751295
> 
> 赞同：1
> 
> 时间：2012-12-06T19:45:16.703
> 
> 标签：ssl, nginx

我有一台服务器，它同时运行站点的开发和暂存实例，每个版本都必须在端口 80 和 443 上响应。暂存实例——只有一个——完全符合我的预期，但是开发实例——为每个用户配置 - 直接在任一协议上加载给定页面就可以了，但是如果我在一个端口上的页面上并尝试链接到另一个端口它会失败。

我的配置

```
 server {
    listen 80;
    server_name ~^dev\.(?<username>[^.]+)\.client\.tld\.net$
                ~^(?<username>[^.]+)\.client\.dev\.tld\.net$
                ~^(?<username>[^.]+)\.dev\.client\.tld\.net$;

    location / {
      rewrite ^(.*) http://$username.client.tld.net$1 permanent;
    }
  }
  # This is the primary host that will ultimately answer requests.
  server {
    listen      80;
    server_name ~^(?<username>[^.]+)\.client\.tld\.net$;
    root        /home/$username/client/www/app/webroot;
    index       index.php;

    access_log /var/log/nginx/client.sandbox.access.log;
    error_log  /var/log/nginx/client.sandbox.error.log;

    location / {
      try_files $uri $uri/ /index.php?url=$uri;
    }

    location ~ \.php$ {
      include /etc/nginx/conf/php;
    }

    include /etc/nginx/conf/expire_content;
    include /etc/nginx/conf/ignore;
  }

  server {
  listen 443 ssl;
  server_name ~^dev\.(?<username>[^.]+)\.client\.tld\.net$
              ~^(?<username>[^.]+)\.client\.dev\.tld\.net$
              ~^(?<username>[^.]+)\.dev\.client\.tld\.net$;

  location / {
    rewrite ^(.*) https://$username.client.tld.net$1 permanent;
  }
}
# This is the primary host that will ultimately answer requests.
server {
  listen      443 ssl;
  server_name ~^(?<username>[^.]+)\.client\.tld\.net$;
  root        /home/$username/client/www/app/webroot;
  index       index.php;

  include /etc/nginx/conf/ssl;

  access_log /var/log/nginx/client.sandbox.access.log;
  error_log  /var/log/nginx/client.sandbox.error.log;

  location / {
    try_files $uri $uri/ /index.php?url=$uri;
  }

  location ~ \.php$ {
    include /etc/nginx/conf/php;
  }

  include /etc/nginx/conf/expire_content;
  include /etc/nginx/conf/ignore;
} 
```

知道我在哪里搞砸了我的配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:55:34.647

首先，不需要创建四个单独的配置，因为您的两个服务器（HTTP 和 HTTPS）具有完全相同的主体。您可以使用`$scheme`包含`http`或`https`根据您正在工作的上下文（用于重定向）的变量。其次，我`root`在您的配置中没有看到任何声明`dev`，也没有可能导致浏览器出现问题的证书。

除此之外，配置对我来说还不错（好吧，您可以将`index`声明移至您的`http`配置；因此您不必一直重复它）。

请查看我为您制作的以下（注释）示例配置。也许它有帮助。

```
# Put this in http context!
index           index.php;

server {
  # One server configuration to rule them all!
  listen        80;
  listen        443 ssl;

  # Seems legit.
  server_name   ~^dev\.(?<username>[^.]+)\.client\.tld\.net$
                ~^(?<username>[^.]+)\.client\.dev\.tld\.net$
                ~^(?<username>[^.]+)\.dev\.client\.tld\.net$;

  # Where am I?
  #root          /home/$username/client/www/app/webroot;

  # No wildcard certificate? No need to specify /etc/nginx as all paths
  # in the configuration are relative to the installation path.
  #include       conf/ssl;

  location / {
    # May work as well, can't test.
    #rewrite ^(.*) $scheme://$server_name$1 permanent;
    rewrite ^(.*) $scheme://$username.client.tld.net$1 permanent;
  }
}

server {
  listen        80;
  listen        443 ssl;
  server_name   ~^(?<username>[^.]+)\.client\.tld\.net$;
  root          /home/$username/client/www/app/webroot;
  include       conf/ssl;
  access_log    /var/log/nginx/client.sandbox.access.log;
  error_log     /var/log/nginx/client.sandbox.error.log;

  location / {
    try_files $uri $uri/ /index.php?url=$uri;
  }

  location ~ \.php$ {
    include     conf/php;
  }

  include       conf/expire_content;
  include       conf/ignore;
} 
```

# java - Android WifiManager 线程永远不会关闭

> ID：13751301
> 
> 赞同：5
> 
> 时间：2012-12-06T19:45:39.603
> 
> 标签：java, android, android-wifi

执行此行后：

```
WifiManager man = ((WifiManager) ctx.getSystemService(Context.WIFI_SERVICE)); 
```

将显示一个标有“WifiManager”的线程。在[WifiService.java 的 Java 源文件第 203 行](http://gitorious.org/android-eeepc/base/blobs/50108e9282031bbd3a22683061496285a806403e/services/java/com/android/server/WifiService.java)：

```
 HandlerThread wifiThread = new HandlerThread("WifiService");
 wifiThread.start();
 mWifiHandler = new WifiHandler(wifiThread.getLooper()); 
```

问题是，每次我们的应用程序关闭并重新打开时，它都会创建一个新线程，运行 5 次，你就有 5 个线程。不知道有没有办法阻止它？

编辑

更改为 getApplicationContext 以确保它正在访问的上下文是一致的并且一切正常。我仍然得到一个标有“WifiService”的线程，但我在多次运行中只得到一个线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T00:43:08.803

我相信您正在开始/停止中创建一个新的 WifiManager `(Context) Activity`。

来自[Context.getSystemService()的注释](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)

> > 注意：通过此 API 获取的系统服务可能与获取它们的上下文密切相关。...

同样来自[ContextImpl.java:1478](https://github.com/android/platform_frameworks_base/blob/jb-mr1-release/core/java/android/app/ContextImpl.java#L1478)和[:227](https://github.com/android/platform_frameworks_base/blob/jb-mr1-release/core/java/android/app/ContextImpl.java#L227)

```
@Override
public Object getSystemService(String name) {
    ServiceFetcher fetcher = SYSTEM_SERVICE_MAP.get(name);
    return fetcher == null ? null : fetcher.getService(this);
}

...
service = cache.get(mContextCacheIndex);
if (service != null) {
    return service;
}
... 
```

它使用地图来缓存系统服务，所以我相信如果你使用相同的上下文`Application`，你就不会遇到这个问题。我不确定这是否是解决此问题的正确方法，但是，如果有线程为您解决更大的问题，则可能值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:46:30.210

当您使用 Context.getSystemService() 获取系统服务的实例时，您不会调用服务的构造函数。相反，您实际上是使用 IBinder 获取服务的实例，以便对其进行远程过程调用。所以 WiFiService.java 的构造函数不会在每次获取它的实例时被调用。你到底在哪里看到这个线程弹出？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:47:17.083

我希望您的应用程序是唯一访问 WifiManager 的应用程序。请同时检查一些访问WifiManager的虚拟应用程序；在这种情况下，它不应该创建一个新线程。

# sql-server - 访问 SDF 和 SQL Server 数据源的一致性

> ID：13751303
> 
> 赞同：1
> 
> 时间：2012-12-06T19:45:46.890
> 
> 标签：sql-server, vb.net, linq-to-sql, sql-server-ce

如果客户端支持，我的应用程序能够运行`.SDF`文件（SQL Server Compact）以获取数据，或者如果客户端不支持`.SDF`文件，则运行 SQL Server 数据库。唯一的问题是编写代码，无论我是在处理一个还是另一个，它都会汇集到一个共同的轨道上。让我举一些例子来说明我要去哪里。

我不想每次我需要做一些事情来查看数据库是否链接到服务器或者我是否从`.SDF`. 我有两个映射表和字段的 .dbml 文件，因此我现在可以使用 sql 到 linq 语法。我唯一的问题是，如果两个 .dbml 文件存在于同一个项目中，它们会发生冲突，因为它们上有公共声明。据我所知，我不能完全将这些类设为私有或以某种方式将它们分开，这样即使它们具有相同的名称和字段，它们也不会抛出错误，说明该类具有多个签名。

```
Public Sub SDFAccess()
        Dim dc As New Members("Data Source = C:\Members.sdf")  

        Dim q = _
            From Leader In dc.GetTable(Of Roles)() _
            Select Leader

        DataGridView2.DataSource = q
 End Sub

 Public Sub ServerAccess()
        Dim dc As New ServerDBDataContext()

        Dim q = _
            From sLeader In dc.GetTable(Of ServerRole)() _
            Select sLeader

        DataGridView2.DataSource = q
    End Sub 
```

我需要能够只拥有一个适用于两种条件的潜艇。无论数据是来自`.SDF`SQL Server 数据库还是来自 SQL Server 数据库。我很感激你的时间。

**Update-1** 所以我在`.DBML`Designer 文件中注意到 New() 的重载。`.DBML`只要两个数据源相同，我是否可以仅将一个文件用于服务器或 Compact 访问？

**Update-2** 我还假设如果一切都相同，那么在两者之间唯一阻碍我的是服务器文件`.DBML`中的 System.Data.Linq.Mapping.DatabaseAttribute(Name:="TestServer")> 属性。`.DBML`

**Update-3** 好的新方法，也许...我可以包含两个单独生成的`.DBML`文件中的两个类，并且只使用我需要的属性，然后将上下文提交回数据源。问题再次是我如何强制程序忽略命名空间中的一个类，而不是在每次我想执行某些操作时编写条件。我开始怀疑我是否应该只使用数据集作为中介。不过，我真的希望为此选择 Linq-Sql。

# c# - 嵌套 XML 到字典

> ID：13751304
> 
> 赞同：1
> 
> 时间：2012-12-06T19:45:52.547
> 
> 标签：c#, .net, xml, dictionary

我正在尝试将 XML 数据转换为字典。我遇到了相同节点名称的问题。C# .Net 3.5

示例 XML = 问题是我无法控制它。我只需要处理它。

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
  <a1>val1</a1>
  <a2>val2</a2>
  <Parameter>
    <ParameterName>param1</ParameterName>
    <ParameterValue>paramval1</ParameterValue>
  </Parameter>
  <Parameter>
    <ParameterName>param2</ParameterName>
    <ParameterValue>paramval2</ParameterValue>
  </Parameter>
</Root> 
```

我的尝试：

```
XMLStream.Position = 0;
        XElement xmlDetails2 = XElement.Load(new System.IO.StreamReader(XMLStream));
        var x = xmlDetails2.Elements().ToDictionary(
            e => e.Name.LocalName,
            e => e.Elements()
                      .ToDictionary(
                          f => f.Name.LocalName,
                          f => f.Value)); 
```

我得到的错误（这当然是有道理的）：

```
An item with the same key has already been added. 
```

预期结果（来自示例 xml）：

```
a1 => val1
a2 => val2
param1 => paramval1
param2 => paramval2
... 
```

我根据@LB 的建议创建了自己的。这不是最好的解决方案，但它现在有效。

```
public void XMLTODictionary(XElement xmlDetails, ref Dictionary<string, string> dic)
{
    foreach (var node in xmlDetails.Elements())
    {
        if (node.Name.LocalName.Equals("parameter", StringComparison.CurrentCultureIgnoreCase))
        {
                dic.Add(node.Element("ParameterName").Value, node.Element("ParameterValue").Value);
        }
        else
        {
            dic.Add(node.Name.LocalName, node.Value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:53:44.630

除非您提供唯一的、不可为空的键，否则您将无法导入字典结构。我能想到的几个选择：

*   在导入期间创建人工密钥
*   请改用 ToLookup() 扩展方法。这不会返回字典，但可能适合您的需求。更好地了解您为什么需要字典，我可以提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:01:06.750

[在这里使用 DynamicXml](https://stackoverflow.com/a/13705918/932418)怎么样

```
dynamic root = DynamicXml.Load("a.xml");

Console.WriteLine(root.a1);
foreach (var p in root.Parameter)
{
    Console.WriteLine("{0}:{1}",p.ParameterName, p.ParameterValue);
}
Console.WriteLine(root.Parameter[0].ParameterValue); 
```

**编辑**

一种通用的方法是获取字典`Dictionary<string,object>` 但是将 xml 转换为字典时存在一些问题。例如

```
<a1>val1</a1> 
```

`dict["a1"]`会返回*val1*，但是这个 xml 会返回什么

```
<a1 name="valAttr"><name>valName</name><a1> 
```

`dict["a1"]["name"]`? *valAttr*还是*valName*？

`dict["a1"]`考虑到您的示例，和之间的唯一区别`dict["Parameter"]`是 *Parameter*在同一个父级下不止一次存在，它应该被视为一个数组而不是单个元素。

[DynamicXml](https://stackoverflow.com/a/13705918/932418)试图解决这些问题。当然还有很大的改进空间，但它应该可以满足基本需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:51:21.897

这是一种将数据提炼成元组然后输出字典的方法。请注意，它不会检查重复键，但可以添加：

```
string data = @"<?xml version=""1.0"" encoding=""utf-8""?>
<Root>
  <a1>val1</a1>
  <a2>val2</a2>
  <Parameter>
    <ParameterName>param1</ParameterName>
    <ParameterValue>paramval1</ParameterValue>
  </Parameter>
  <Parameter>
    <ParameterName>param2</ParameterName>
    <ParameterValue>paramval2</ParameterValue>
  </Parameter>
</Root>";

var elements = XDocument.Parse( data )
                        .Element("Root")
                        .Descendants();

var asTupleChildren =  elements.Where (e => e.HasElements)
                               .Select (e => new Tuple<string,string>(e.Element("ParameterName").Value, e.Element("ParameterValue").Value ));

var asTupleElements =  elements.Where (e => e.HasElements == false)
                               .Where (e => e.Name != "ParameterName" && e.Name != "ParameterValue" )
                               .Select (e => new Tuple<string,string>(e.Name.ToString(), e.Value ));

var asDictionary =  asTupleElements.Concat(asTupleChildren)
                                   .ToDictionary (te => te.Item1, te => te.Item2);

/* asDictionary is a Dictionary<String,String> (4 items)

a1 val1
a2 val2
param1 paramval1
param2 paramval2

*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T13:41:13.280

刚做了这个，对我有用。有点笨重。将其用作模板。

```
 public static Dictionary<string, dynamic> RecDis(string ThisXML)
    {
        Dictionary<string, dynamic> ThisBlock = new Dictionary<string, dynamic>();

        XElement doc = XElement.Parse(ThisXML);

        XNode[] ThisNoideArray = doc.Nodes().ToArray();

        foreach (XNode park in ThisNoideArray)
        {
            XElement parker = XElement.Parse(park.ToString());

            if (parker.HasElements)
            {
                ThisBlock.Add(parker.Name.ToString(), RecDis(parker.ToString()));
            }
            else
            {
                ThisBlock.Add(parker.Name.ToString(), parker.Value.ToString());
            }
        }

        return ThisBlock;
    } 
```

# ios - 在程序执行期间是否可以将对象始终保持在最前面？

> ID：13751305
> 
> 赞同：1
> 
> 时间：2012-12-06T19:45:55.517
> 
> 标签：ios, xcode, uiview

我需要让一个物体总是在前面`UIView`

不干扰这个动作

```
- (IBAction)botonArribaMenu:(id)sender {

    [self.view bringSubviewToFront:_propArribaRegresar];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:52:00.107

使用以下任一 UIView 方法来控制深度。

```
– bringSubviewToFront:
– sendSubviewToBack:
– insertSubview:atIndex:
– insertSubview:aboveSubview:
– insertSubview:belowSubview: 
```

每个超级视图将其子视图存储在有序数组中，并且该数组中的顺序也会影响每个子视图的可见性。如果两个同级子视图相互重叠，则最后添加的（或移动到子视图数组末尾的）出现在另一个之上。

# javascript - Javascript 中的奇怪行为；计算时不显示 div

> ID：13751307
> 
> 赞同：1
> 
> 时间：2012-12-06T19:45:59.527
> 
> 标签：javascript, html

我正在对一些音频文件进行一些相当繁重的处理器处理。在我进入这个名为 startProcessing 的函数之前，我想显示一个覆盖整个页面的 div 并说正在计算...问题是 div 仅在函数终止后显示。当我单击激活 tis 代码的按钮时，按钮会冻结，并且只有当进程功能终止时，它才会解冻并显示加载程序。任何人都看到过类似的行为并能够解决它？

```
document.getElementById('loader').innerHTML = "<p>Calculating...</p><p>Please Wait</p><img src='../img/loader.gif' />";
document.getElementById('loader').style.visibility = "visible";
document.getElementById('notification').style.visibility = "visible";

var speed = document.getElementById("playbackSpeed").value/100;

    console.log("Changing speed");
    if (speed > 1.5){
        startProcessing(1.5);   
        backend.playbackSpeed = 1.5;
    } else if (speed < 0.75){
        startProcessing(0.75);
        backend.playbackSpeed = 0.75;
    } else {
        startProcessing(speed);
        backend.playbackSpeed = speed;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:56:00.850

您可以将繁重的处理投入到[Web Worker](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)中。这将释放你的用户界面。

**注意：**它对 IE 不友好......只有 IE10（我认为）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:54:15.290

尝试运行繁重的计算，但有一些延迟：

```
setTimeout(function(){
    var speed = document.getElementById("playbackSpeed").value/100;

    console.log("Changing speed");
    speed = Math.min(Math.max(speed, 0.75), 1.5);
    startProcessing(speed);
    backend.playbackSpeed = speed;
}, 13); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:57:41.350

一种方法是使用**setTimeout**或**setInterval**为您的 div 显示进度条。另一种解决方法是做一些（伪）[多线程](https://stackoverflow.com/questions/30036/javascript-and-threads)。

# java - 试图用正则表达式匹配行

> ID：13751310
> 
> 赞同：1
> 
> 时间：2012-12-06T19:46:05.853
> 
> 标签：java, regex

我正在尝试匹配以下行：

```
801\. Our origination charge (Includes Originat ion Point (s) %  or $ ) (f rom GFE #1)$ 1,169.00 
```

我创建了这个正则表达式：

`.*801\..*\(f\s?rom.*$\s?(.*)`

这应该做的是：

1.  匹配 801 之前的任何内容。
2.  匹配任何东西直到(f\s?rom
3.  匹配任何东西直到 $
4.  可选空间
5.  匹配线的其余部分

我相信这会破坏我的字符串的方式是这样的：

1.  801。
2.  我们的发起费用（包括发起点 (s) % 或 $ ）
3.  （来自 GRE #1
4.  （没有什么）
5.  1,169.00

然而，这种情况并非如此。我的正则表达式与此字符串不匹配。任何想法为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T19:48:50.243

逃脱你的美元符号`$`。这是行尾[锚点](http://www.regular-expressions.info/anchors.html)。

```
.*801\..*\(f\s?rom.*\$\s?(.*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:44:37.197

```
.*801\..*\(f\s?rom.*\$\s?.*
```

转义 $ 字符。并删除最后的括号。这个正则表达式与字符串完全匹配。

# javascript - 解释基本 JavaScript 结果

> ID：13751311
> 
> 赞同：-6
> 
> 时间：2012-12-06T19:46:05.450
> 
> 标签：javascript

我想弄清楚这段代码会产生什么？我假设数组“t”已经定义并填充。

```
var j, s;
for (var j = 0; j < 34; j++){
    s += (t[j] * 4) / 5;
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:49:00.003

`s`将是`NaN`因为它没有用数值初始化。`undefined + x`（其中`x`是一个数字）总是`NaN`.

# git - git - 推送当前与推送上游（跟踪）

> ID：13751319
> 
> 赞同：37
> 
> 时间：2012-12-06T19:46:49.833
> 
> 标签：git

我已经阅读了关于 push 命令的 git man，但我仍然不明白要在**push.default**中设置的*current*和*upstream之间的确切区别*

 **我希望我们的团队只进行推送，并且只推送他们当前正在处理的分支上的更改。据我了解，这个分支是我做**git branch**时用 * （星号）标记的分支。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-06T20:20:19.183

问题是你在推动什么，以及*在**哪里*：

*   **`current`**：

    *   “**什么**”只是你当前的分支（没有其他分支），
    *   “ **to where ” 是****[上游 repo](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)**中同名的分支（如果不存在则创建）。
*   **`upstream`**：

    *   “ **what** ”也只是当前分支，
    *   “**到哪里**”是上游仓库上的任何分支（不一定同名）[已被分配为](https://stackoverflow.com/a/11012861/6309)您正在推送的本地分支的上游分支。

正如[这里](https://stackoverflow.com/a/6547682/6309)所解释的，Git2.0 将另外引入一个新的默认值`push.default`：**`simple`**

**`simple`**就像**`upstream`**，但上游也必须具有相同的名称，否则推送将失败。

* * *

只推送一个分支（使用模式“ `simple`”、“ `current`”或“ `upstream`”）避免[了](http://jimkubicek.com/blog/2012/08/16/git-push-current-branch/)所有匹配的分支都被推送的情况（模式“ `matching`”，这是很长一段时间的默认设置），即使您的某些分支可能不是准备好被推了。

```
(master)> git push
...
To git@github.com:jkubicek/my_proj.git
   21b430d..dd378ca  master -> master
 ! [rejected]        release -> release (non-fast-forward)
error: failed to push some refs to 'git@github.com:jkubicek/my_proj.git'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. 
hint: If you did not intend to push that branch, you may want to
hint: specify branches to push or set the 'push.default' configuration
hint: variable to 'current' or 'upstream' to push only the current branch. 
```

* * *

两者 (`current`和`upstream`)之间的区别在于**拉取**（从远程拉取什么到您的分支？）：

*   push " `current`" 并不意味着你当前的分支`B`有`remote/B`它的上游分支。
    即：`branch.B.merge`未设置，当您推动“ `current`”分支时。
    即：当拉到 时`B`，git 不知道要拉哪个分支。

*   push " `upstream`" 表示你当前的分支`B`有`remote/B`它的上游分支。
    即：`branch.B.merge` *设置*，当你推“ `upstream`”分支。
    即：当拉到 时`B`，git 知道要拉哪个分支（以及哪个远程仓库`branch.B.remote`：）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-01T13:15:04.277

`push.default`最好在 git config ( `man git-config`) 的手册页中介绍。

要了解 的“上游”和“当前”之间的区别`push.default`，您应该知道术语*上游*：

Upstream 是从普通本地分支到本地远程跟踪分支的本地指针。（是的，这些都是本地的。）示例：

*   分支*blabla*将*origin/blabla*配置为上游（非常常见）
*   *blabla*分支将*origin/foo*作为上游（分支具有不同的本地名称；不常见）
*   *blabla*分支将*origin2/foo*作为上游

请注意，*origin/**分支是本地的，并且在每次从源获取时（重新）设置。这些被称为“本地远程跟踪分支”。它们代表上次获取时远程“原点”上的分支状态。

每个（普通）本地分支都可以配置一个上游，但这不是必须的：上游关系的配置只是为了方便一些 git 命令！

例如，如果你做一个`git status`例子，如果 git 知道上游，它会告诉你“x commits behind/ahead”（所以 git 可以与它​​进行比较）。

正常的初始`git checkout blabla`通常会为您设置上游配置（如果 origin/blabla 存在，则将其检出并设置为上游 - 否则检出失败）。

`git push`还可以使用分支的上游配置，即将您的新提交复制到代表上游的远程分支。（这是`push.default = upstream`。）

`push.default = current`允许以*相同的名称*`git push`将新提交复制到远程。它完全忽略了上游配置。– 如果您的本地分支名称始终与远程分支名称相同，则两种配置具有相同的效果，但如果尚未配置上游，则with将失败。*`git push``push.default = upstream`*

 *PD：是的，`*`在输出中`git branch`显示了当前分支。***

# perl - 将 perl 中的 STDOUT/STDERR 重定向到 txt 文件？

> ID：13751325
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:47:03.580
> 
> 标签：perl, shell, environment

我正在尝试记录命令的输出：

`innobackupex --incremental $INC1_BACKUP_FOLDER --incremental-basedir=$BASEDIR_FULL $SLAVE_INFO > $PATH_TO_LOG/log_inc1.txt 2>&1`;

但是它不会写入文件，而是在 STDOUT 上打印。

这有效并记录到文件：

`innobackupex $DB_USER_INFO $FULL_BACKUP_FOLDER $SLAVE_INFO > $PATH_TO_LOG/log_full.txt 2>&1`;

但是这不会记录到文件中：

`innobackupex --incremental $INC1_BACKUP_FOLDER --incremental-basedir=$BASEDIR_FULL $SLAVE_INFO > $PATH_TO_LOG/log_inc1.txt 2>&1`;

我尝试的另一个解决方案是：

```
open (INC1_RESULT,">$PATH_TO_LOG/log_inc1.txt");
my $incr1_backup_result = `innobackupex --incremental $INC1_BACKUP_FOLDER --incremental-basedir=$BASEDIR_FULL $SLAVE_INFO`;
print INC1_RESULT $incr1_backup_result;
close INC1_RESULT; 
```

这也不起作用，因为它只会在命令完成执行后写入文件。命令运行时，我需要跟踪日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:54:17.773

假设 bash 在 *nix 环境中，尝试将 stdout 和 stderr 都重定向到文本文件（注意与号）：

```
innobackupex --incremental $INC1_BACKUP_FOLDER --incremental-basedir=$BASEDIR_FULL $SLAVE_INFO &> $PATH_TO_LOG/log_inc1.txt 
```

更多信息在[BASH Programming HOWTO 简介中](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)。如果您在不同的环境中，请查看有关流重定向的文档。

--

根据[文档](http://www.percona.com/doc/percona-xtrabackup/innobackupex/how_innobackupex_works.html?id=percona-xtrabackup%3ainnobackupex%3ahow_it_works)：

> 请注意，innobackupex 的 STDERR 没有写入任何文件。您必须将其重定向到一个文件，例如 innobackupex OPTIONS 2> backupout.log。

它将 stderr 重定向到一个文件。OP 指出（在下面的评论中）重定向 stderr 和 stdout 没有按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:25:35.960

在那里，它现在应该同时执行，即打印到 STDOUT 并写入 Log-

```
innobackupex --incremental $INC1_BACKUP_FOLDER --incremental-basedir=$BASEDIR_FULL $SLAVE_INFO | tee -a $PATH_TO_LOG/log_inc1.txt 
```

或者只是写日志

```
innobackupex --incremental $INC1_BACKUP_FOLDER --incremental-basedir=$BASEDIR_FULL $SLAVE_INFO >> $PATH_TO_LOG/log_inc1.txt 
```

# apache-poi - 使用 Apache POI 在 Word 文档中创建水平线

> ID：13751326
> 
> 赞同：1
> 
> 时间：2012-12-06T19:47:09.710
> 
> 标签：apache-poi, xwpf

是否可以使用 Apache POI 在 Word 文档中创建水平线？我在文档中找不到任何似乎相关的内容。如果没有，有没有办法将原始 HTML 插入到文档中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:28:50.713

尝试这个：

```
XWPFParagraph p1 = document.createParagraph();
p1.setBorderBottom(Borders.SINGLE); 
```

# sql - SSIS 计数和求和

> ID：13751335
> 
> 赞同：0
> 
> 时间：2012-12-06T19:47:40.010
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我想根据 P_id 生成计数。下面用一个例子来解释。

假设我总共有 500 行记录，其 P_id 从 1 到 100（500 行，重复 P_id）。在我的过程中，我在 3 个产品 A、B、C 中过滤了这些 P_id。

认为

```
Product  P_ID            Rows
-------  --------------  ----
A        1 to 10         25
B                        0
C        5,6,8,55 to 75  230 
```

现在我必须生成 A、B、C 的计数，它应该根据 P_ID 像 - 在 C 8 10 中和在 A 8 15 中相同，所以 8 的总计数应该是 25。我必须根据更新这些计数P_id。

请让我知道如果你没有得到我的问题..我会解释更多。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:06:20.983

如果我理解正确，您可以使用 Count(Distinct[P_ID])。这将为您提供列中不同 P_ID 值的计数。

[http://blog.sqlauthority.com/2011/03/08/sql-server-difference-between-countdistinct-vs-countall/](http://blog.sqlauthority.com/2011/03/08/sql-server-difference-between-countdistinct-vs-countall/)

# .net - 表单关闭后保持子运行

> ID：13751343
> 
> 赞同：0
> 
> 时间：2012-12-06T19:48:01.783
> 
> 标签：.net, vb.net

我在一个名为“sys”的类中有一个名为 notify 的子。我使用这个子作为通知表来代替通知图标/气球提示。

所以它看起来像这样......

```
sys.notify("message") 
```

我的问题是我需要能够显示通知并在不久之后关闭表单。我现在的方式是在通知仍处于活动状态时关闭表单，并且通知被切断。

即使在调用它的表单关闭后，有什么方法可以让它继续运行，还是我必须等到通知完成才能关闭表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:29:38.007

关键是启动一个不是背景的线程。这样您的表单将被关闭，但该进程将继续运行，直到该非后台线程完成，从而使您的气球提示可见。

到要显示 baloontip 的位置（子或函数）放置：

```
Dim x As New Threading.Thread(AddressOf somesub)
x.IsBackground = False
x.Start() 
```

并将其放在某处：

```
Private Sub somesub()
        sys.notify("message")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:18:54.377

有可能。

1）通知部分：将其编码在不同的线程中，因此即使关闭主窗体也不会关闭。

2）更简单的方法：在主窗体关闭事件中，检查通知部分是否显示或主窗体不可见，如果没有，则关闭窗体。如果是，隐藏表单（不可见），并中止关闭事件。在 notify 部分，在关闭 notify 时，检查主窗体是否不可见，如果是，则关闭它，然后关闭 notify。

2）中的关键是使主窗体不可见而不是关闭。

# javascript - MOSS 07 editform.aspx 提交失败并转到空白 html 页面

> ID：13751346
> 
> 赞同：0
> 
> 时间：2012-12-06T19:48:10.007
> 
> 标签：javascript, asp.net, html, sharepoint-2007

从 Microsoft 博客中找到解决方案...见下文

好的，首先我不喜欢随机这个词，但是我在测试用例中找不到与这个问题的任何相关性，所以我将使用随机来描述这个问题的一部分。

设置：我有一个列表，其中我为 EditForm.aspx 和 NewForm.aspx 创建了自定义 UI。我在两者之间使用相同的 JS 文件和 JavaScript。我在谷歌地图中添加了帮助说明位置选择。我在“确定”按钮中添加了额外的代码以进行一些动态验证。我也做了很多动态菜单的事情。所有用户都使用 IE 9，并且该站点位于 MOSS 2007 服务器上。

问题：仅在 EditForm.aspx 上，单击“随机”确定会导致立即出现白屏。表单未保存，当查看白屏的源代码时，我发现一个空白的 html 页面。

我试图找到这个问题： - 我试图缩小发生这种情况的用户和计算机的范围，发现每台计算机上的每个人都会发生这种情况（再次“随机”）。- 我尝试禁用“确定”按钮前面的代码 - 我尝试按照调试了 IE9 的外部脚本的代码并没有发现错误

我可以提供代码，但它有点长，我真的不知道从哪里开始。所以如果需要我可以提供。

感谢您提前提供帮助。

编辑：这是重新连接我的确定按钮的代码（我之前将值重置为“保存”）

```
 var okBtns = $('input[value="Save"]')
    $.each(okBtns, function(index,value){
        okFunction=$(value).attr('onclick');
        $(value).attr('onclick','return false;')
        $(value).bind('click', function(){
            if ($('#'+StatusBox).val()=='Draft') {$('#'+StatusBox).val('New Request')}
            var err = clickOKbutton();
            if(err==0) {okFunction()};
        });
    }); 
```

这是 clickOKbutton 函数，它是原始共享点操作之前的代码：

```
function clickOKbutton()
{
    //all of the imput validation i could ever wish for!!!!
    var NoteVal = ''
    var NameAry = $('#'+PersonnelBox).parent().children(":first").children("SPAN").children("SPAN");
    $.each(NameAry, function(index,value){
        var $n=$(value).html();     
        if(NoteVal.length==0) {NoteVal=$n} else {NoteVal=NoteVal+';'+$n};
    });
    //$('#'+AddNotes).val(NoteVal);

    var plh = $('#'+PersonnelBox).parent().html()
    userNameTx = $('#zz8_Menu').text();
    userNameTx = userNameTx.replace('Welcome ','');
    $.each(OICUsers, function(i,v){
        if(plh.indexOf(v) > -1 && st=='New Request'){
            $('#'+StatusBox).val('OIC Bypassed')
            $('#'+CommentsBox).val('OIC is travling on this TDY/TAD and cannot approve. So this request is bypassing the "OIC Approval" step')
        }
    });

    /*userNameTx = $('#zz8_Menu').text();
    userNameTx = userNameTx.replace('Welcome ','')

    $('#' + ModBox).closest('TR').show();*/
    var message=''
    message = detectFieldChanges(AllFieldsArray,AllOrgValArray,"Draft,New Request,Modified")        
    if(message.length>0){
        $('#'+ModBox).val(message);
        AutoResizeTextarea(ModBox);
    }

    message = detectFieldChanges(ValFieldsArray,OrgValuesArray,"Draft,New Request,Modified,OIC Approved,OIC Bypassed,Pending RFI,Ready for COS")
    userNameTx = $('#zz8_Menu').text();
    userNameTx = userNameTx.replace('Welcome ','');
    if(message.length>0&&$.inArray(userNameTx,COSUsers)==-1){
        $('#'+StatusBox).val('Modified').change;
        $('#'+StatusLongBox).val('Modified').change;
    }       

    //Subject box
    var pb = NoteVal;
    var ep = $('#'+ExtPersonnel).val();
    var ab = $('#'+AddressBox).val();
    var sd = $('#'+sDateBox).val();
    var ed = $('#'+eDateBox).val();
    var st = $('#'+StatusBox).val();
    var p = pb+';'+ep;
    var p = p.replace(/mossaspnetmembershipprovider:/g,'');
    var p = p.slice(0,-1);
    var ad = ab+' '+sd+' to '+ed;
    var s = 'eTDY | '+st+' - '+p+' - '+ad;
    if(s.length>255){
        var l = s.length-255;
        p = p.substring(0,p.length-l);
        s = 'eTDY | '+p+' - '+ad;
    }
    $('#'+Subject).val(s);

    //check Lat/Lng value
    if($('#'+LatBox).val()=='' || $('#'+LngBox).val()==''){
        //alert("Cannot continue unless the Lat Lng has a vallid coordinate");
        if($('#LatLngError').length==0){
            errorHTML='<br><span class="ms-error" id="LatLngError">You must specify a value for Lat and Lng</span>'
            $('#'+AddressBox).closest('TD').append(errorHTML)

        }
        return -1
    }
    return 0
}; 
```

它很混乱，但希望你能理解它。

编辑2：

我想我已经追踪到了随机性……我完全关闭了所有自定义代码，但问题仍然存在。然后我尝试将工作记录与非工作记录进行比较。一切看起来都很正常，直到我带着多人选择器到达现场。如果我在该字段中有超过 2 人，它将正常保存，但是当我在人员选择器字段中有超过 2 人的情况下对该记录进行修改时会导致此问题。我将做更多的研究，并将发布我的结果。

编辑3：

[http://blogs.msdn.com/b/jorman/archive/2009/12/22/mystery-of-the-sharepoint-white-screens.aspx](http://blogs.msdn.com/b/jorman/archive/2009/12/22/mystery-of-the-sharepoint-white-screens.aspx)

这个问题都归结为 IIS 配置和模拟级别。显然我们的服务器管理员决定在不告诉任何人的情况下更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:01:33.030

通常，当您从网页（尤其是在 MOSS 中）获得 [看似随机的] 行为时，这意味着您在页面上定义了模棱两可的事件。通常，当我将某种 JScript 添加到按钮或表单 on_submit 时，我会得到这个。
如果没有看到您的代码，我真的无法进一步缩小范围。我建议：在您的 HTML 表单或按钮单击事件上查找 JavaScript 事件，或查找指向无处 (href=#) 但具有 javascript 的锚 [a] 标记。然后决定（严格地）使用 HTML 方式（表单、提交按钮）或 javascript 方式（没有表单，没有 asp:button）并断开另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:50:00.070

这个问题都归结为 IIS 配置和模拟级别。显然我们的服务器管理员决定在不告诉任何人的情况下更改它。

[http://blogs.msdn.com/b/jorman/archive/2009/12/22/mystery-of-the-sharepoint-white-screens.aspx](http://blogs.msdn.com/b/jorman/archive/2009/12/22/mystery-of-the-sharepoint-white-screens.aspx)

# python - 元组和列表

> ID：13751348
> 
> 赞同：1
> 
> 时间：2012-12-06T19:48:18.010
> 
> 标签：python, python-3.x, tuples

我有一个由 Python 中的元组组成的列表。我需要引用每个元组的每个索引来创建 NBA 球员统计数据列表。元组中的第一个索引 [0] 是效率等级，接下来的两个位置是球员姓名，最后是球队名称。现在元组在一个很长的列表中。当我运行程序时，我得到的只是前四个元组的输出，而不是各种元组的列表。我曾尝试使用附加，但这也无济于事。

这是我的代码：

```
def get_data_list (file_name):
    data_file = open(file_name, "r")
    data = []
    player_list=[]
    for line_str in data_file:

        # strip end-of-line, split on commas, and append items to list
        data_list =line_str.strip().split(',')

        data_list.append (data)

        gp=int(data_list[6])
        mins=int(data_list[7])
        pts=int(data_list[8])
        oreb=int(data_list[9])
        dreb=int(data_list[10])
        reb=int(data_list[11])
        asts=int(data_list[12])
        stl=int(data_list[13])
        blk=int(data_list[14])
        to=int(data_list[15])
        pf=int(data_list[16])
        fga=int(data_list[17])
        fgm=int(data_list[18])
        fta=int(data_list[19])
        ftm=int(data_list[20])
        tpa=int(data_list[21])
        tpm=int(data_list[22])

        efficiency = ((pts+reb+asts+stl+blk)-(fgm-ftm-to))/gp        

       data_list.append (efficiency)
       data.append(data_list)
       score=data_list[24]
       first_name=data_list[2]
       last_name=data_list[3]
       team_name=data_list[4]
       player_tuple = score, last_name, first_name, team_name

       player_list.append(player_tuple)

       a=sorted(player_list)

       a.reverse()

   return a

def print_results (lst):
   """Print the result in a nice format"""
    print("The top 50 players based on efficiency are: ")
    print('*'*75)
    print('{:<20s}{:<20s}, {:<15s}{:<5s}'.format(lst[(0)],lst[(1)],lst[(2)],lst[(3)]))

file_name1 = input("File name: ")

result_list = get_data_list (file_name1)

top_50_list=[]
top_50_list=result_list[:50]

print_results(top_50_list) 
```

我认为我的问题出在 print_results 函数中。

请记住，我正在参加入门课程，因此许多高级选项不适合我。请保持解决方案简单。

玻利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:07:58.363

看来您的问题出在附加功能上...

```
a=[some,list]
a.append(42) #a = [some,list,42]
a.append([1,2]) #now a = [some,list,42,[1,2]] 
```

对你来说，索引 0 本身就是一个空列表

因此，在您的代码中，对于循环的第一次迭代：

```
data_list =line_str.strip().split(',')  # data_list = [some,list]
data_list.append (data)                 # data_list = [some,list,[]]  
...
data_list.append (efficiency)           # data_list = [some,list,[],efficiency]
data.append(data_list)                  # data = [[some,list,[],efficiency]]
...
a = something special 
```

然后循环继续，直到输入文件的最后一行

然后你返回`a`。`a`只返回一次，并且由于前面提到的洗牌而变得古怪。

玩 for 循环并追加一点，你应该没问题地解决它。

如果你感到勇敢，那就抬头看看`yield`。发电机在这里是完美的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:57:10.480

在`print_results`

```
def print_results (lst):
   """Print the result in a nice format"""
    print("The top 50 players based on efficiency are: ")
    print('*'*75)
    print('{:<20s}{:<20s}, {:<15s}{:<5s}'.format(lst[(0)],lst[(1)],lst[(2)],lst[(3)])) 
```

可能是类似的东西

```
def print_results(lst):
  """Print the result in a nice format"""
  print("The top 50 players based on efficiency are: ")
  print('*'*75)
  for player_tuple in lst:
     print('{:<20s}{:<20s}, {:<15s}{:<5s}'.format(*player_tuple[:4])) 
```

由于您有一个元组列表，每个元组代表一个玩家，循环遍历每个玩家并打印出他们的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:54:01.460

我不明白你的代码试图用`data`vs.做什么`data_list`。我重写它以摆脱`data`. 此外，在您计算后将`efficiency`其附加到列表中，但随后您似乎再次将其从列表中拉出`score`。我只是摆脱了那个。

对于处理文件，最佳实践是使用`with`语句，所以我重写了它。

此外，您一次将字符串项转换为一个整数，而您可以通过列表理解一次完成所有这些项。我希望列表推导对您来说不是问题，因为它们使代码更清晰。第一个列表推导`.strip()`在三个字符串中的每一个上调用方法函数来获取名称。第二个以一种方便的方式转换所有整数。

我没有创建一个名为的临时列表`a`然后反转该列表，而是`reverse=True`在`sorted()`. 现在列表以相反的顺序构建，正是您想要的。

正如其他人所指出的，您的打印功能需要一个循环来打印列表中的内容。由于打印函数中的消息说它打印前 50 个，我将列表切片更改为在打印函数内部进行。现在 print 函数接受一个可选参数，指定要打印的项目数；它的默认值为 50，因此如果您不指定其他值，它将打印前 50 个项目。

虽然您不需要这样做，但 Python 有一个常见的功能，即放在`if __name__ == __main__:`代码之前。你可以在这里看到一个解释：[What does if __name__ == "__main__": do?](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)

```
def get_data_list (file_name):
    player_list=[]
    with open(file_name, "r") as f:
        for line in f:
            # split line on commas, and convert items to integer values
            # make a list of the integer values.
            items = line.split(',')

            first_name = items[2].strip()
            last_name = items[3].strip()
            team_name = items[4].strip()

            data_list = [int(x) for x in items[6:]
            gp = data_list[0]
            mins = data_list[1]
            pts = data_list[2]
            oreb = data_list[3]
            dreb = data_list[4]
            reb = data_list[5]
            asts = data_list[6]
            stl = data_list[7]
            blk = data_list[8]
            to = data_list[9]
            pf = data_list[10]
            fga = data_list[11]
            fgm = data_list[12]
            fta = data_list[13]
            ftm = data_list[14]
            tpa = data_list[15]
            tpm = data_list[16]

            efficiency = ((pts+reb+asts+stl+blk)-(fgm-ftm-to))/gp        

            player_tuple = efficiency, last_name, first_name, team_name

            player_list.append(player_tuple)

    return sorted(player_list, reverse=True)

def print_results(lst, how_many=50):
    """Print the result in a nice format"""
    template = '{:<20}{:<20s}, {:<15s}{:<5s}'

    print("The top {} players based on efficiency are: ".format(how_many))
    print('*'*75)
    for tup in lst[:how_many]:
        print(template.format(tup[0], tup[1], tup[2], tup[3]))

if __name__ == "__main__":
    file_name1 = input("File name: ")
    result_list = get_data_list(file_name1)
    print_results(result_list) 
```

现在我要进一步平滑它。这是在 Python 中使用更高级的特性，但它们是使事情变得更方便的特性，而不是只是棘手的事情。

首先，我们将使用生成器表达式并将项目直接解包为变量名，而不是使用列表推导式构建列表，然后按索引号选择项目。生成器表达式就像一个列表推导式，只是它不是构建一个列表，而是提供一个可以循环的“迭代器”，或者可以解压缩为变量名，如我在这里展示的那样。

其次，在打印函数中，我们只想按顺序打印元组中的所有值。Python 提供了一个快捷方式：`*`在调用内部的元组前面放置一个 a`.format()`表示“解包并使用解包后的值作为此函数调用的参数”。

```
def get_data_list (file_name):
    player_list=[]
    with open(file_name, "r") as f:
        for line in f:
            # Split line on commas and convert each item to integer.  Unpack
            # values directly into variable names.  We are using a
            # generator expression to convert all the items to integer,
            # and Python's ability to unpack an iterator into a tuple.
            items = line.strip().split(',')

            # use list slicing to select just the three string values
            first_name, last_name, team_name = (s.strip() for s in items[2:5])

            # Use a generator expression to convert all values to int.
            # Unpack directly to variable names using tuple unpacking.
            # Put parentheses so Python won't worry about multiple lines
            # of variable names.
            (
                gp, mins, pts, oreb, dreb, reb, asts,
                stl, blk, to, pf, fga, fgm, fta, ftm,
                tpa, tpm
            ) = (int(x) for x in items[6:])

            efficiency = ((pts+reb+asts+stl+blk)-(fgm-ftm-to))/gp        

            player_tuple = efficiency, last_name, first_name, team_name

            player_list.append(player_tuple)

    return sorted(player_list, reverse=True)

def print_results(lst, how_many=50):
    """Print the result in a nice format"""
    template = "{:<20}{:<20s}, {:<15s}{:<5s}"

    print("The top {} players based on efficiency are: ".format(how_many))
    print('*'*75)
    for player_tuple in lst[:how_many]:
        print(template.format(*player_tuple))

if __name__ == "__main__":
    file_name1 = input("File name: ")
    result_list = get_data_list(file_name1)
    print_results(result_list) 
```

编辑：这是另一个经过编辑的版本。这个将解析一行的逻辑分解为一个`player_tuple`自己的函数。这`get_data_list()`很短。

```
def player_tuple(line):
    # Split line on commas and convert each item to integer.  Unpack
    # values directly into variable names.  We are using a
    # generator expression to convert all the items to integer,
    # and Python's ability to unpack an iterator into a tuple.
    items = line.strip().split(',')

    # use list slicing to select just the three string values
    first_name, last_name, team_name = (s.strip() for s in items[2:5])

    # use a generator expression to convert all values to int
    # unpack directly to variable names using tuple unpacking
    (
        gp, mins, pts, oreb, dreb, reb, asts,
        stl, blk, to, pf, fga, fgm, fta, ftm,
        tpa, tpm
    ) = (int(x) for x in items[6:])

    efficiency = ((pts+reb+asts+stl+blk)-(fgm-ftm-to))/gp        

    return efficiency, last_name, first_name, team_name

def get_data_list(file_name):
    with open(file_name, "r") as f:
        player_list = [player_tuple(line) for line in f]
    return sorted(player_list, reverse=True)

def print_results(lst, how_many=50):
    """Print the result in a nice format"""
    template = "{:<20}{:<20s}, {:<15s}{:<5s}"

    print("The top {} players based on efficiency are: ".format(how_many))
    print('*'*75)
    for player_tuple in lst[:how_many]:
        print(template.format(*player_tuple))

if __name__ == "__main__":
    file_name1 = input("File name: ")
    result_list = get_data_list(file_name1)
    print_results(result_list) 
```

现在我们有了一个函数，我们可以进一步`player_tuple()`简化。`get_data_list()`我不会重复整个程序，只是简化的`get_data_list()`. 如果我必须解决这个问题，这可能是我要编写的代码。

```
def get_data_list(file_name):
    with open(file_name, "r") as f:
        return sorted((player_tuple(line) for line in f), reverse=True) 
```

在这里，我们甚至没有明确地构建列表。我们只需创建一个提供所有`player_tuple`值的生成器表达式，然后直接将其传递给`sorted()`. 没有必要在里面给这个列表命名`get_data_list()`；它可以在一行中构建和返回。

# java - 在android的xml资源文件中创建“ArrayList”

> ID：13751349
> 
> 赞同：1
> 
> 时间：2012-12-06T19:48:22.750
> 
> 标签：java, android, xml

我知道如何像这样在 xml 中创建一个简单的数组

```
<resources>
    <string-array name="countries_array">
        <item>Afghanistan</item>
        <item>Albania</item>
        <item>Algeria</item>
        <item>American Samoa</item>
        <item>Andorra</item>
        <item>Angola</item>
        <item>Anguilla</item>
        <item>Antarctica</item>
    </string-array>
</resources> 
```

然后我在代码中像这样初始化它

```
ArrayAdapter<String> adapter = 
        new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, countries_array);
textView.setAdapter(adapter); 
```

但是我想存储更多的项目而不仅仅是一个字符串，所以我需要一种方法来存储一个数组列表而不是一个简单的数组。

像下面

```
<resources>
<Share>
    <name>Apple</name>
    <currentRate>5.69</currentRate>
    <changeToday>-0.11</changeToday>
    <changeTodayPercent>-0.02</changeTodayPercent>
    <timeUpdated>2012,12,06,18,00,00</timeUpdated>
<Share>
<Share>
    <name>Microsoft</name>
    <currentRate>5.88</currentRate>
    <changeToday>0.19</changeToday>
    <changeTodayPercent>+0.09</changeTodayPercent>
    <timeUpdated>2012,12,06,18,00,00</timeUpdated>
<share>
...
</resources> 
```

我已经有一个名为 Share.java 的类，其中包含需要通过 setMethods 设置的以下变量

公共类 ShareHolding {

```
private String name;
private double currentRate;
private double changeToday;
private double changeTodayPercent;
private GregorianCalendar timeUpdated;
} 
```

并将它们添加到数组列表中

```
ArrayList<Share> allShares = new ArrayList<Share>();

allShares.getShare(0).setName("I want to access my xml file here and add the first shares name here"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:03:11.900

据我所知，您将无法使用资源文件不匹配数据类型。该资源仅支持 [单向数据类型。](http://developer.android.com/guide/topics/resources/more-resources.html)例如字符串数组、整数数组等。

最好的解决方案是将 Share xml 放入它自己的文件中，然后解析到您的共享对象中。[android 开发人员有一些内置 xml 解析器的示例](http://developer.android.com/training/basics/network-ops/xml.html)

# performance - Haskell Fibonacci 序列性能取决于方法

> ID：13751352
> 
> 赞同：2
> 
> 时间：2012-12-06T19:48:42.523
> 
> 标签：performance, list, haskell

我正在尝试不同的方法来获取斐波那契数列的给定索引处的数字，它们基本上可以分为两类：

*   建立一个列表并查询一个索引
*   使用变量（可能是单独的或元组的，没有列表）

我选择了两者的一个例子：

```
fibs1 :: Int -> Integer
fibs1 n = fibs1' !! n
    where fibs1' = 0 : scanl (+) 1 fibs1'

fib2 :: Int -> Integer
fib2 n = fib2' 1 1 n where
    fib2' _ b 2 = b
    fib2' a b n = fib2' b (a + b) (n - 1) 
```

谎言1：

```
real    0m2.356s
user    0m2.310s
sys     0m0.030s 
```

谎言2：

```
real    0m0.671s
user    0m0.667s
sys     0m0.000s 
```

两者均使用 64 位 GHC 7.6.1 和`-O2 -fllvm`. 它们的核心转储长度非常相似，但它们在我不太擅长解释的部分上有所不同。

`fibs1`对于 n = 350000 ( `Stack space overflow`)失败，我并不感到惊讶。但是，我对它使用了这么多内存这一事实感到不舒服。

我想澄清一些事情：

1.  为什么 GC 在整个计算过程中不处理列表的开头，即使其中大部分很快变得无用？
2.  为什么 GHC 不将列表版本优化为可变版本，因为一次只需要两个元素？

编辑：对不起，我混合了速度结果，修复了。不过，我的三个疑问中有两个仍然有效；）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:25:41.880

> 为什么 GC 在整个计算过程中不处理列表的开头，即使其中大部分很快变得无用？

`fibs1`使用大量内存并且很慢，因为`scanl`它很懒，它不评估列表元素，所以

```
fibs1' = 0 : scanl (+) 1 fibs1' 
```

生产

```
0 : scanl (+) 1 (0 : more)
0 : 1 : let f2 = 1+0 in scanl (+) f2 (1 : more')
0 : 1 : let f2 = 1+0 in f2 : let f3 = f2+1 in scanl (+) f3 (f2 : more'')
0 : 1 : let f2 = 1+0 in f2 : let f3 = f2+1 in f3 : let f4 = f3+f2 in scanl (+) f4 (f3 : more''') 
```

等等，所以你很快就会得到一个巨大的嵌套重击。当这个 thunk 被评估时，它被压入堆栈，在 250000 到 350000 之间的某个点，它对于默认堆栈来说变得太大了。

并且由于每个列表元素在未评估时都包含对前一个元素的引用，因此无法对列表的开头进行垃圾收集。

如果您使用严格的扫描，

```
fibs1 :: Int -> Integer
fibs1 n = fibs1' !! n
  where
    fibs1' = 0 : scanl' (+) 1 fibs1'
    scanl' f a (x:xs) = let x' = f a x in x' `seq` (a : scanl' f x' xs)
    scanl' _ a [] = [a] 
```

当第`k`-th 个列表单元产生时，它的值已经被评估，所以不引用先前的，因此列表可以被垃圾收集（假设没有其他东西持有对它的引用），因为它被遍历。

通过该实现，列表版本大约与`fib2`（它仍然需要分配列表单元格，因此它分配更多一点，因此可能会慢一点，但差异很小，因为斐波那契数变得如此之大以至于列表构造开销变得可以忽略不计）。

的想法`scanl`是，它的结果是增量消耗的，因此消耗会强制元素并防止大型 thunk 的积累。

> 为什么 GHC 不将列表版本优化为可变版本，因为一次只需要两个元素？

它的优化器无法看穿算法来确定这一点。`scanl`对编译器是不透明的，它不知道做什么`scanl`。

如果我们采用确切的源代码`scanl`（重命名或隐藏`scanl`前奏曲，我选择重命名），

```
scans                   :: (b -> a -> b) -> b -> [a] -> [b]
scans f q ls            =  q : (case ls of
                                []   -> []
                                x:xs -> scans f (f q x) xs) 
```

并编译导出它的模块（使用-O2），然后查看生成的接口文件

```
ghc --show-iface Scan.hi 
```

我们得到（例如，编译器版本之间的细微差别）

```
Magic: Wanted 33214052,
       got    33214052
Version: Wanted [7, 0, 6, 1],
         got    [7, 0, 6, 1]
Way: Wanted [],
     got    []
interface main:Scan 7061
  interface hash: ef57dac14815e2f1f897b42a007c0c81
  ABI hash: 8cfc8dab79de6a51fcad666f1869574f
  export-list hash: 57d6805e5f0b5f76f0dd8dfb228df988
  orphan hash: 693e9af84d3dfcc71e640e005bdc5e2e
  flag hash: 1e8135cb44ef6dd330f1f56943d1f463
  used TH splices: False
  where
exports:
  Scan.scans
module dependencies:
package dependencies: base* ghc-prim integer-gmp
orphans: base:GHC.Base base:GHC.Float base:GHC.Real
family instance modules:
import  -/  base:Prelude 1cb4b618cf45281dc97748b1831bf0cd
d79ca4e223c0de0a770a3b88a5e67687
  scans :: forall b a. (b -> a -> b) -> b -> [a] -> [b]
    {- Arity: 3, HasNoCafRefs, Strictness: LLL -}
vectorised variables:
vectorised tycons:
vectorised reused tycons:
scalar variables:
scalar tycons:
trusted: safe-inferred
require own pkg trusted: False 
```

并且看到接口文件没有暴露函数的展开，只有它的类型、数量、严格性，并且它没有引用 CAF。

当一个模块导入被编译时，编译器所要做的就是接口文件暴露的信息。

在这里，除了发出对函数的调用外，没有任何信息可以允许编译器执行任何其他操作。

如果展开被暴露，编译器就有机会内联展开并分析知道类型和组合函数的代码，以生成更多不构建 thunk 的急切代码。

然而，的语义`scanl`是最大的惰性，输出的每个元素都是在检查输入列表之前发出的。这导致 GHC 不能使添加变得严格，因为如果列表包含任何未定义的值，这会改变结果：

```
scanl (+) 1 [undefined] = 1 : scanl (+) (1 + undefined) [] = 1 : (1 + undefined) : [] 
```

尽管

```
scanl' (+) 1 [undefined] = let x' = 1 + undefined in x' `seq` 1 : scanl' (+) x' []
                         = *** Exception: Prelude.undefined 
```

可以做一个变种

```
scanl'' f b (x:xs) = b `seq` b : scanl'' f (f b x) xs 
```

这将为`1 : *** Exception: Prelude.undefined`上述输入产生，但如果列表包含未定义的值，任何严格性确实会改变结果，因此即使编译器知道展开，它也无法使评估严格 - 除非它可以证明没有未定义列表中的值，这一事实对我们来说是显而易见的，但编译器却不是[而且我认为教编译器认识到这一点并能够证明不存在未定义的值并不容易]。

# database - Access Upsize 到 Sqlserver 不传输数据

> ID：13751355
> 
> 赞同：2
> 
> 时间：2012-12-06T19:48:56.297
> 
> 标签：database, sql-server-2008, ms-access, data-transfer

我有一个包含 11,000,000 条记录的 Access 数据库。我想使用 Upsize 工具将此记录传输到 Sqlserver 2008 中的同一个表。此工具可以正确创建数据库和表，但 SQL Server 中的表为空且未传输数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:17:13.837

由于您没有提到收到错误消息，请检查新 SQL Server 表中的字段类型以确认它们与 Access 对应项兼容。

如果看起来正常，请启动 Access 并创建指向 SQL Server 表的 ODBC 链接。然后创建一个 Access“追加查询”，将 Access 表中的数据添加到 SQL Server 表中。

```
INSERT INTO remote_table (field1, field2, field3)
SELECT field1, field2, field3
FROM local_table
WHERE date_field >= #2012-01-01# AND date_field < #2012-02-01#; 
```

请注意，我设想了一个`WHERE`子句，它将行数限制为 1100 万行中相当小的一个子集。根据您的情况进行调整。

如果`INSERT`成功，请使用不同`WHERE`的条件重复此操作，以将数据块附加到 SQL Server，直到将其全部传输。

如果它失败了，希望你会收到一条错误消息来解释原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:57:35.827

正如这里所指出的，在大多数情况下，这是一个错误的日期，或者只是一个超出 SQL Server 的日期，从而导致失败。我建议您使用 Access 迁移工具，而不是内置工具。它做得更好。

您可以在此处找到此实用程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=28763](http://www.microsoft.com/en-us/download/details.aspx?id=28763)

以上倾向于处理日期和其他阻止数据上传的问题，远远优于内置的升迁工具

# isabelle - 伊莎贝尔案例分析

> ID：13751358
> 
> 赞同：3
> 
> 时间：2012-12-06T19:49:20.210
> 
> 标签：isabelle

如何在 Isabelle 中应用案例分析？我正在寻找类似于`apply (induct x)`（用于归纳）的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:29:21.817

案例分析通常使用`cases`方法进行（另见Isabelle2014的[Isabelle/Isar参考手册](http://isabelle.in.tum.de/website-Isabelle2014/dist/Isabelle2014/doc/isar-ref.pdf)索引中的“案例（方法）” ）。如果您是初学者，我推荐使用[Isabelle/HOL 中的编程和证明](http://isabelle.in.tum.de/website-Isabelle2014/dist/Isabelle2014/doc/prog-prove.pdf)教程。

请注意，自 Isabelle 2014 以来，文档也可在文档面板的 Isabelle/jEdit IDE 中找到。

# linux - Jar 命令排除任何文件夹中的隐藏文件

> ID：13751361
> 
> 赞同：0
> 
> 时间：2012-12-06T19:49:37.977
> 
> 标签：linux, web-applications, ubuntu

我正在使用 jar 命令创建一个战争文件。它有很多文件夹和很多子文件夹等。我在 Ubuntu Linux 上工作，当我创建战争时，所有隐藏文件也包含在战争文件中。这使最终产品的尺寸增加了一倍。

如何排除所有隐藏文件？

```
/my/path_to/folder/myfile.jsp
/my/path_to/folder/myfile.jsp~
/my/path_to/folder/myfile2.jsp
/my/path_to/folder/myfile2.jsp~ 
```

所以我想排除任何以 ~ 结尾的文件

谢谢

斯普诺格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:28:47.637

我建议使用[Apache Ant](http://ant.apache.org)创建 jar/war 文件，因为它是可移植的，因此您不需要依赖 shell 功能来处理基于正则表达式的排除文件。

满足您需求的最简单的`ant`build.xml 将是：

```
<project>
  <property name="classes.dir" value="." />
  <jar destfile="a.jar" basedir="${classes.dir}" excludes="**/*~" />
</project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:33:50.270

如果要从选择中消除结果，可以使用 ^（不）来执行此操作。这将排除所有带有 ~ 的文件

```
jar cf myFile.war *[^~] 
```

添加图像以进行验证

![在此处输入图像描述](../Images/3ec65ef41a33955fa7f7cb9b35a0dc2d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:44:51.627

```
find . -type f -name "*~" -exec rm -f {} \; 
```

# asp.net - ASP.NET / C# item.FileName

> ID：13751362
> 
> 赞同：1
> 
> 时间：2012-12-06T19:49:39.050
> 
> 标签：asp.net

litFiler.Text += [a class='group2' href='./references/big/'][img src=\"./references/small/" + item.FileName + "\" width=\"100\ " /][/a][br /]";

WHERE TO PUT A **'+ item.FileName'** on the **class 'group2'**，例如： [img src=\"./references/small/" + item.FileName + "\" width=\"100 \" /]

我可以想办法把它放在哪里，当我点击它们时，我的颜色框会打开大图片，正确知道悬停小图片的 url 是“references/big/”

# android - 长按菜单

> ID：13751364
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:49:46.500
> 
> 标签：android

我不知道如何处理这段代码中的删除和编辑

```
@Override  
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);  
    menu.setHeaderTitle("Select");  
    menu.add(0, R.id.editt, 0, "Edit");  
    menu.add(0, R.id.delete, 0, "Delete");  
    menu.add(0, R.id.DeleteAll, 0, "delete all");
}  

public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch(item.getItemId())
    {
    case R.id.editt: {
        Intent ed  = new Intent(DsTest2Activity.this, Edit.class);
        startActivity(ed);
        break; }

    case R.id.delete: {

        break; }

    case R.id.DeleteAll: {
        SQLiteDatabase ld = openOrCreateDatabase(dbName, Context.MODE_PRIVATE, null);
        ld.delete(tableName, null, null);
        String[] from = {"task", "_id"};
        int[] to = {R.id.textview_id,R.id.checkbox_id};

        SimpleAdapter sa = new SimpleAdapter(this, lc, R.layout.checkbox, from, to);
        ListView li = (ListView) findViewById(R.id.listview_id);
        li.setAdapter(sa);
        sa.notifyDataSetChanged();
        li.setVisibility(ListView.INVISIBLE);
        break; }

    default: { return true; }

    }

    return super.onContextItemSelected(item);
} 
```

当用户长按时

```
li.setOnItemLongClickListener(new OnItemLongClickListener() {
    public boolean onItemLongClick(AdapterView<?> adapter, View view, int position, long id)
    {   
        registerForContextMenu(li);
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:48:04.340

You have to call the `registerForContextMenu(li)` in the `onCreate()` method of the activity, or in the `onActivityCreated()` method if you use fragments.

You don't have to call the `li.setOnItemLongClickListener(...)`. Please delete it.

Please also see the following discussions: [How do you implement context menu in a ListActivity on Android?](https://stackoverflow.com/questions/433761/how-do-you-implement-context-menu-in-a-listactivity-on-android) and [Context menu in list activity](https://stackoverflow.com/questions/3961031/context-menu-in-list-activity)

# facebook - 在 Facebook 注册插件中预填充字段

> ID：13751367
> 
> 赞同：1
> 
> 时间：2012-12-06T19:50:00.893
> 
> 标签：facebook, field, registration

我想使用国际前缀预填充 Facebook 注册插件中的电话号码字段。

我试过： value="+44" 和 "value" : "+44"

```
<fb:registration redirect-uri="" 
 fields='[
   {"name":"name"},
   {"name":"number","description":"Phone number","type":"text", value="+44"},
]' 
 onvalidate="validate"></fb:registration> 
```

但它不起作用，如何解决它？

# php - 修复未定义的索引通知

> ID：13751372
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:50:19.070
> 
> 标签：php

我收到未定义的索引通知，但不知道如何修复它。

```
Notice: Undefined index: id in /home/jharvard/vhosts/localhost/html/book_details.php on line 10 
```

这是有问题的代码：

```
 // query for the listing
$listing = query("SELECT name, author, id, edition, price, course, date FROM books WHERE submission = ?", $_GET["submission"]); 

// query for the email of the seller
$seller = query("SELECT email FROM users WHERE id = ?", $listing["id"]); 
```

任何人都可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:53:03.070

问题是从您的第一个查询返回的数组`$listing`没有带有 key 的元素`id`。

我怀疑如果数据库中没有任何作为`submission`GET 参数传入的记录，就会发生这种情况。`query()`尽管不知道函数是如何编写的，但很难确定。

# javascript - 直接从 CasperJS 调用 JS 方法

> ID：13751373
> 
> 赞同：2
> 
> 时间：2012-12-06T19:50:19.350
> 
> 标签：javascript, testing, phantomjs, casperjs

我正在尝试使用 CasperJS 测试页面，特别是我想戳一堆数据模型。假设我有一个名为 tax 的基本函数，我想确保它使用正确的税率。所以我想要类似的东西：

```
 this.test.assert(taxes(100, 'Ontario') === 15, "Check ontario tax rate"); 
```

而不是填写表格并查看打印的内容。该`taxes`方法存在于全局范围内，因此我可以从任何地方（包括从 firebug 或 Chrome 中的控制台）轻松执行它。但它不在 CasperJS 中工作的正确范围（我认为？我得到`ReferenceError: Can't find variable: taxes`.

好像我错过了一些简单的东西。

TL;DR：如何在 CasperJS 测试中直接执行页面上的 JS 位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T20:58:53.533

你试过使用[`evaluate()`](http://docs.casperjs.org/en/latest/modules/casper.html#evaluate)吗？

相关引用：“像使用浏览器控制台一样执行代码。”

类似于：

```
casper.evaluate(function(amount, province) {

    return taxes(amount, province);

}, {100, 'Ontario'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:55:17.323

使用[assertEvalEquals()](http://casperjs.org/api.html#tester.assertEvalEquals)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:08:42.960

如果您通过 jQuery 样式的引用调用该方法，请确保显式包含该库，以免出现 ReferenceError：

```
var casper = require('casper').create({ 
   clientScripts: ['js/jquery-1.7.2.js'] 
}); 
```

...

```
casper.start('foo.php', 
   function() { 
      console.log(this.evaluate(function() { 
         return $('taxes').text(); 
      }));
   }); 

casper.run(); 
```

请参阅：[https ://groups.google.com/forum/#!msg/casperjs/2uyUOqdzShw/bHWrJYXni40J](https://groups.google.com/forum/#!msg/casperjs/2uyUOqdzShw/bHWrJYXni40J)

如果您在全局范围内隐式调用它（即直接 javascript，而不是例如 $('taxes')），则可能必须显式地将窗口或文档命名空间添加到引用：

```
document.querySelector('#taxes').value = taxes_text; 
```

# vb.net - 动态按钮不适用于 VB.NET 中的 AddHandler

> ID：13751376
> 
> 赞同：1
> 
> 时间：2012-12-06T19:50:26.000
> 
> 标签：vb.net, visual-studio, button, dynamic, addhandler

我正在开发一个项目，在该项目中我试图在[代码隐藏](http://en.wiktionary.org/wiki/code-behind)中动态创建一个按钮，以将文件提交并上传到服务器。我正在使用 AddHandler，但按钮不会回发。由于网页的工作方式，我到处都读到我需要在每次回帖后重新生成此按钮。我仍然无法让这个按钮工作。我有一个带有 HTML 的主页：

```
<%@ Page Language="vb"
    AutoEventWireup="false"
    MasterPageFile="~/Site.Master"
    CodeBehind="Departments.aspx.vb"
    Inherits="Homepage.Departments" %>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <script type="text/javascript" src="~/Scripts/jquery-1.8.2.js"></script>
    <script src="~/Scripts/jquery-ui-1.8.24.custom.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    </script>
    <div id="Top" runat="server"> </div>
    <div id="Left" runat="server"></div>
    <div id="Right" runat="server"></div>
</asp:Content> 
```

Top、Left 和 Right div 只是我动态生成页面内容的占位符。页面的代码隐藏只是调用我开发的类中的一个函数并将其添加到页面上的一个 div 中（我听说如果我在 page_init 中处理它，它应该以正确的顺序创建页面.. .):

```
Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init

    *SNIP business logic to determine what information to pull*

    'NewWebPart is my class that creates the custom parts and returns them as an object

                For Each DeptLayoutRow As MyDataSet.DeptLayoutRow In DeptLayout
                    Dim NewPartObject As Object = NewWebPart.CreateNewPart

                    Select Case DeptLayoutRow.Area
                        Case 1
                            Top.Controls.Add(NewPartObject)
                        Case 2
                            Left.Controls.Add(NewPartObject)
                        Case 3
                            Right.Controls.Add(NewPartObject)
                    End Select

                    i += 1
                Next
            End If
        End If
    End If
End Sub 
```

函数 CreateNewWebPart 以表格的形式返回一个对象，其中包含一个网格视图、一个按钮和一些 JavaScript 代码。这个类的重要部分是创建我遇到问题的部分的函数。这部分包含一个网格视图，它列出了服务器上文件夹中的项目。如果用户需要，他们可以单击gridview 下方的上传按钮，然后JavaScript 会创建一个叠加层，让他们可以单击想要的文件并将其上传到服务器。提交按钮是我遇到问题的按钮：

```
Private Function CreateDocument() As Table
        Dim Documents As New GridView
        Documents.Width = width
        Documents.Height = height

        Dim table As New Table

        'Dim Files As String()
        Dim FileLocation As String = _
          ConfigurationManager.AppSettings.Item("DeptLoc").ToString + _
          "\" + DeptName + "\" + PartName

        If Directory.Exists(FileLocation) Then
            Dim DirInfo As New IO.DirectoryInfo(FileLocation)
            Dim FileArray As IO.FileInfo() = DirInfo.GetFiles()
            Dim FileInfo As IO.FileInfo

            Dim Dt As New DataTable
            Dt.Columns.Add("File Name", GetType(String))
            Dt.Columns.Add("File Link", GetType(String))
            Dt.Columns.Add("File Size", GetType(String))
            Dt.Columns.Add("Last Updated", GetType(Date))

            For Each FileInfo In FileArray
                Dt.Rows.Add(FileInfo.Name, _
                            FileInfo.FullName, _
                            Math.Round(FileInfo.Length / 1024).ToString, _
                            FileInfo.LastWriteTime)
            Next

            Documents.DataSource = Dt
            Documents.Attributes.Add("Class", "mGrid")
            Documents.ID = "Documents" + IDNum.ToString

            'This function creates and returns a table with Documents in the first cell
            table = CreatePartTable(Documents)

            'Create Upload file button'''''''''''''''''''''''''''''''''''''
            '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
            Dim btnUpload As New HtmlGenericControl
            btnUpload.InnerHtml = "<button id='btnUpload" + IDNum.ToString + "'>Upload File</button>"

            Dim UploadRow As New TableRow
            Dim UploadRowCell As New TableCell
            UploadRowCell.Controls.Add(btnUpload)
            UploadRow.Cells.Add(UploadRowCell)

            Dim UploadDiv As New HtmlGenericControl("DIV")

            UploadDiv.ID = "UploadDiv" + IDNum.ToString
            Dim lbl As New Label With {.Text = "Choose what files you would like to upload!"}
            Dim FileUpload As New HtmlInputFile With {.ID = "FileUpload" + IDNum.ToString}
            Dim btnSubmit As New Button With {.ID = "Submit" + IDNum.ToString, .Text = "Submit"}
            'Neither of these seem to work either....
            'btnSubmit.Attributes.Add("runat", "server")
            'btnSubmit.Attributes.Add("onclick", "btnUploadSubmit_OnClick")

            UploadDiv.Controls.Add(lbl)
            UploadDiv.Controls.Add(New LiteralControl("<br />"))
            UploadDiv.Controls.Add(New LiteralControl("<br />"))
            UploadDiv.Controls.Add(FileUpload)
            UploadDiv.Controls.Add(New LiteralControl("<br />"))
            UploadDiv.Controls.Add(New LiteralControl("<br />"))
            UploadDiv.Controls.Add(btnSubmit)
            AddHandler btnSubmit.Click, AddressOf btnUploadSubmit_OnClick

            Dim UploadDialogRow As New TableRow
            Dim UploadDialogRowCell As New TableCell
            UploadDialogRowCell.Controls.Add(UploadDiv)
            UploadDialogRow.Cells.Add(UploadDialogRowCell)

            Dim UploadDivJQuery As New UI.HtmlControls.HtmlGenericControl
            Dim JQueryString As New StringBuilder
            JQueryString.Append("<script type='text/javascript'>")
            JQueryString.Append("   $(function() {")

            JQueryString.Append("       $(""*[id$='UploadDiv" + IDNum.ToString + "']"").dialog({")
            JQueryString.Append("           autoOpen: false,")
            JQueryString.Append("           modal: true,")
            JQueryString.Append("           show: 'clip',")
            JQueryString.Append("           hide: 'clip'")
            JQueryString.Append("       }); ")
            JQueryString.Append("       $(""*[id$='btnUpload" + IDNum.ToString + "']"").click(function() {")
            JQueryString.Append("       $(""*[id$='UploadDiv" + IDNum.ToString + "']"").dialog( 'open' );")
            JQueryString.Append("            return false; ")
            JQueryString.Append("       }); ")
            JQueryString.Append("   });")
            JQueryString.Append("</script>")
            UploadDivJQuery.InnerHtml = JQueryString.ToString

            Dim UploadDivJQueryRow As New TableRow
            Dim UploadDivJQueryRowCell As New TableCell
            UploadDivJQueryRowCell.Controls.Add(UploadDivJQuery)
            UploadDivJQueryRow.Cells.Add(UploadDivJQueryRowCell)

            table.Rows.Add(UploadRow)
            table.Rows.Add(UploadDialogRow)
            table.Rows.Add(UploadDivJQueryRow)

            'To fix up the document's DataGrid the way we want it!
            'This addhanlder for the documents gridview works fine...
            AddHandler Documents.DataBound, AddressOf DocumentsDataGridHandler
            Documents.DataBind()

        End If
        Return Table
    End Function 
```

抱歉，如果我张贴太多，但我一直在寻找这个问题的答案，但似乎无法弄清楚。我不确定是不是因为我没有按正确的顺序加载它，是因为它在另一个类中，还是因为我正在使用 Master Pages 或其他什么。

# wordpress - 在 Wordpress 中上传期间重命名文件

> ID：13751377
> 
> 赞同：3
> 
> 时间：2012-12-06T19:50:32.673
> 
> 标签：wordpress, filenames, rename

我正在尝试重命名与帖子标题匹配的上传文件名。

这个另一个线程显示了如何重命名为哈希：
[在 Wordpress 后端上传期间重命名文件](https://stackoverflow.com/questions/3259696/rename-files-during-upload-within-wordpress-backend)

使用此代码：

```
function make_filename_hash($filename) {
    $info = pathinfo($filename);
    $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
    $name = basename($filename, $ext);
    return md5($name) . $ext;
}
add_filter('sanitize_file_name', 'make_filename_hash', 10); 
```

有谁知道重命名文件以匹配 Post Title.extension 的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:19:26.643

barakadam 的答案几乎是正确的，只是根据我在他的答案下方留下的评论进行了一点修正。

```
function new_filename($filename, $filename_raw) {
    global $post;
    $info = pathinfo($filename);
    $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
    $new = $post->post_title . $ext;
    // the if is to make sure the script goes into an indefinate loop
    if( $new != $filename_raw ) {
        $new = sanitize_file_name( $new );
    }
    return $new;
}
add_filter('sanitize_file_name', 'new_filename', 10, 2); 
```

代码说明：

假设您上传了`picture one.jpg`一个名为“我在巴黎/伦敦的假期”的帖子的原始文件名的文件。

当您上传文件时，WordPress 会使用该[`sanitize_file_name()`](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/formatting.php#L800)功能从原始文件名中删除特殊字符。

函数的底部是过滤器所在的位置。

```
// line 854 of wp-includes/formatting.php
return apply_filters('sanitize_file_name', $filename, $filename_raw); 
```

此时，$filename 将是`picture-one.jpg`. 因为我们使用`add_filter()`了 ，所以我们的 new_filename() 函数将使用 $filename as`picture-one.jpg`和 $filename_raw as调用`picture one.jpg`。

然后我们的 new_filename() 函数将文件名替换为附加了原始扩展名的帖子标题。如果我们停在这里，新的文件名`$new`最终会成为`My Holiday in Paris/London.jpg`我们所有人都知道的无效文件名。

这是我们再次调用 sanitize_file_name 函数的时候。注意那里的条件语句。由于`$new != $filename_raw`此时，它会尝试再次清理文件名。

[`sanitize_file_name()`](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/formatting.php#L800)将被调用，并在函数结束时，`$filename`将是`My-Holiday-in-Paris-London.jpg`while`$filename_raw`仍然是`My Holiday in Paris/London.jpg`. 由于`apply_filters()`，我们的`new_filename()`函数再次运行。但这一次，因为`$new == $filename_raw`，这就是它结束的地方。

并`My-Holiday-in-Paris-London.jpg`最终归还。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:01:27.543

像这样的东西？（考虑到`$post`您的 post 变量，使其成为全局变量）：

```
function new_filename($filename) {
    global $post;
    $info = pathinfo($filename);
    $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
    return $post->post_title . $ext;
}
add_filter('sanitize_file_name', 'new_filename', 10); 
```

我理解你了吗？

# android - 片段中的 ProgressDialog

> ID：13751378
> 
> 赞同：1
> 
> 时间：2012-12-06T19:50:37.933
> 
> 标签：android, android-fragments

这是我列表中的加载程序

```
 @Override
    protected void onPreExecute() {
        progress = ProgressDialog.show(
                getActivity(), null, "Loading...");

        super.onPreExecute();
    } 
```

我在应用程序中有 8 个选项卡，它们几乎相同，不同之处在于加载不同的内容...当我打开我的应用程序时，它们都同时显示，我不会将其更改为仅选择的片段...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:12:10.507

我使用的布局看起来像这样：

```
<ViewSwitcher ...>
   <ProgressBar indetermiate="true" />
   <!-- Insert actual content here -->
</ViewSwitcher> 
```

然后您可以使用片段中的代码来控制加载页面和内容之间的切换。

# c++ - 读取和写入 .dat 文件

> ID：13751382
> 
> 赞同：0
> 
> 时间：2012-12-06T19:50:52.400
> 
> 标签：c++, io, fstream

为什么这个文件总是包含一个额外的`Fraction`结构？如果用户在程序刚启动时输入选项 3 来查看所有分数（文件应该为空），`0/0`则打印出来。如果用户选择选项一并输入一个分数`1/1`，然后选择选项 3，则打印出两个分数`1/1 1/1`。

注意：要运行它，您需要创建一个`.dat`名为 `"fractions.dat"`

我真的很感谢你的帮助！

```
#include <iostream>
#include <fstream>

using namespace std;

struct Fraction
{
    int num, den;
};

int search(fstream& file, Fraction* f);
int menu();
void proccessChoice(int i);
Fraction* readFrac();

Fraction* fracs[100];
int index;
string fileName = "fractions.dat";
fstream file(fileName,  ios::in | ios::out | ios::binary | ios::trunc);

//structure called Fraction with num and den as its only integer members
int main()
{
    if (!file)
    {
        cout << "Error opening file. Program aborting.\n";
        system("pause");
        exit(1);
    }
    int choice;
    do
    {
        choice = menu();
        proccessChoice(choice);
    } while(choice != 4);

    system("pause");
    return 0;
}

int menu()
{
    int c;
    cout << "1.Enter new fraction" << endl;
    cout << "2.Display/update a fraction" << endl;
    cout << "3.Display all fractions" << endl;
    cout << "4.Quit" << endl;
    cin >> c;
    return c;
}

void proccessChoice(int i)
{
    switch(i)
    {
    case 1:
        {
            cout << "Enter a fraction to add: ";
            fracs[index] = readFrac();
            file.seekp(0, ios::end);
            file.write(reinterpret_cast<char*>(fracs[index]), sizeof(Fraction));
            /*cout << fracs[index]->num << "/" << fracs[index]->den ;*/
            index++;
        }
            break;
    case 2:
        {
            cout << "Enter fraction to view/update: ";
            Fraction* fToFind = readFrac();
            int i = search(file, fToFind);
            if (i == -1)
            {
                cout << "Fraction not found." << endl;
            }
            else
            {
                char r;
                cout << fToFind->num << "/" << fToFind->den << " found at index " << i << ". Update? [y/n]";
                cin >> r;
                if(r == 'y' || r == 'Y')
                {
                    cout << "Enter a new fraction: ";
                    Fraction* fToWrite = readFrac();
                    file.seekp(sizeof(Fraction) * (i));
                    file.write(reinterpret_cast<char*>(fToWrite), sizeof(Fraction));
                }
            }
            cout << i << endl;
            cout << "Case 2" << endl;
        }
            break;
    case 3:
        {
            Fraction* cur = new Fraction();
            //int pos = -1;
            if (!file)
            {
                cout << "Error opening file. Program aborting.\n";
                system("pause");
                exit(1);
            }
            file.seekg(0, ios::beg);
            while(!file.eof())
            {
                file.read(reinterpret_cast<char *>(cur), sizeof(Fraction));
                cout << cur->num << "/" << cur->den << endl;
            }
                    cout << "Case 3" << endl;
        }
            break;
    }
}

int search(fstream& file, Fraction* f)
{
    Fraction* cur = new Fraction();
    int pos = -1;
    if (!file)
    {
        cout << "Error opening file. Program aborting.\n";
        system("pause");
        exit(1);
    }
    file.seekg(0, ios::beg);
    while(!file.eof())
    {
        file.read(reinterpret_cast<char *>(cur), sizeof(Fraction));
        if((cur->num == f->num) && (cur->den == f->den))
        {
            cout << "\nFrac found!" << cur->num << "/" << cur->den<<endl;
            pos = file.tellg()/sizeof(Fraction) - 1;
            return pos;
        }
    }
    return pos;
}

Fraction* readFrac()
{
    Fraction* f = new Fraction();
    char slash;
    cin >> f->num >> slash >> f->den;
    return f;
} 
```

尝试的解决方案 1：适用于用户第一次尝试查看所有分数，但在第二次尝试时找不到文件。

```
case 3:
        {
            Fraction* cur = new Fraction();
            //int pos = -1;
            if (!file)
            {
                cout << "Error opening file. Program aborting.\n";
                system("pause");
                exit(1);
            }
            file.seekg(0, ios::beg);
            while(!file.eof())
            {
                if(file.read(reinterpret_cast<char *>(cur), sizeof(Fraction)).gcount()== sizeof(Fraction))
                {
                    cout << cur->num << "/" << cur->den << endl;
                }
            }
                    cout << "Case 3" << endl;
        }
            break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:54:34.610

因为你还没有到达文件的末尾！

```
while(!file.eof()) 
```

但是，您打开了空文件，请注意读取光标当前位于位置`0`。只要您没有尝试读取数据`file.eof()`就会为假，因为光标尚未到达文件末尾。

您需要检查您是否真的能够提取分数：

```
if(
   file.read(reinterpret_cast<char *>(cur), sizeof(Fraction)).gcount() 
   == sizeof(Fraction)
){
     // Fraction has been extracted
}
else
     // either eof() or some other error. 
```

请注意，如果您为此提供自定义运算符，这将变得更加简单：

```
std::istream& operator>>(std:istream& in, Fraction& f){
    return in.read(reinterpret_cast<char *>(&f), sizeof(Fraction));
}

// ....
while(file >> *cur){
   // ... your code.
} 
```

# eclipse - Primefaces 更新到 3.4.2 但仍显示为在 PrimeFaces 3.1.1 上运行

> ID：13751383
> 
> 赞同：0
> 
> 时间：2012-12-06T19:50:52.813
> 
> 标签：eclipse, maven, jsf-2, primefaces

我使用的是 Primefaces 3.1.1，今天我已经更新到 3.4.2 并获得相应的 jar，我已将 pom.xml 中的我更改为以下内容，它已成功下载 3.4.2 jar。

```
<!-- Primefaces library -->
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.2</version>
        </dependency> 
```

问题是当我启动我的服务器时它仍然显示为

```
Running on PrimeFaces 3.1.1 
```

我做了清理项目，安装 Maven，构建项目等，但没有用。

如何指向 Primefaces 3.4.2？

我正在使用 Eclipse Helios 和 Glassfish 3。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:59:50.277

您的类路径可能包含旧的 primefaces jar。你可以找出什么 jar 提供了 primefaces 类。检查[here](https://stackoverflow.com/questions/1716290/how-to-find-out-what-jar-file-provides-a-class-during-runtime-using-maven)并尝试找到您的primeface jar并将其从类路径中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:48:29.177

检查 Web 服务器类路径是个好主意，我遇到了同样的问题。我通过删除我的 Tomcat 类路径上的旧版本来解决它。

# android - 寻找相机自动对焦指示器示例

> ID：13751385
> 
> 赞同：3
> 
> 时间：2012-12-06T19:50:58.840
> 
> 标签：android, android-camera

我正在构建一个具有自动对焦功能的自定义相机，只是想知道是否有办法调用与本机相机相同的自动对焦矩形指示器，或者我是否必须从头开始构建它......任何示例或教程链接都会不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T22:37:46.127

查看最新的 Jelly Bean 4.2 相机处理此问题的方式可能会有所帮助。您可以通过以下方式下载相机源：

```
git clone https://android.googlesource.com/platform/packages/apps/Camera.git 
```

获得代码后，导航到`FocusOverlayManager`类和`PieRenderer`类。如果您之前没有尝试过这个最新版本，那么对焦计是一个饼状圆圈，在对焦完成后会旋转。您可以在 photoshop 中制作自己的正方形或使用我过去使用过的这两个中的一个（一个是我制作的 iPhone ripoff，另一个是在某些版本的 android 相机中使用的九个补丁）：

![在此处输入图像描述](../Images/1d91fb4ad8a1c3d5807fb7e41c2d00fd.png) ![在此处输入图像描述](../Images/e702c86207cd02c4410c8495790dc09b.png)

Jelly Bean 示例对于您要查找的内容可能有点复杂，因此以下是我为自动对焦实现视觉反馈的方式的一些指南。该过程可能有些复杂。我不会假装我的方式是做到这一点的最佳方式，但这里有一些示例代码可以为您提供总体思路...

在我的相机预览布局 xml 文件中：

```
<!-- Autofocus crosshairs -->

<RelativeLayout
    android:id="@+id/af_casing"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerInParent="true"
    android:clipChildren="false" >

    <com.package.AutofocusCrosshair
        android:id="@+id/af_crosshair"
        android:layout_width="65dp"
        android:layout_height="65dp"
        android:clipChildren="false" >
    </com.package.AutofocusCrosshair>
</RelativeLayout> 
```

这个 AutofocusCrosshair 类如下：

```
public class AutofocusCrosshair extends View {

    private Point mLocationPoint;

    public AutofocusCrosshair(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    private void setDrawable(int resid) {
        this.setBackgroundResource(resid);
    }

    public void showStart() {
        setDrawable(R.drawable.focus_crosshair_image);
    }

    public void clear() {
        setBackgroundDrawable(null);
    }

} 
```

在我的活动中，当我想开始自动对焦时，我会执行以下操作：

```
mAutofocusCrosshair = (AutofocusCrosshair) findViewById(R.id.af_crosshair);
//Now add your own code to position this within the view however you choose
mAutofocusCrosshair.showStart();
//I'm assuming you'll want to animate this... so start an animation here
findViewById(R.id.af_casing).startAnimation(mAutofocusAnimation); 
```

并确保在动画结束时清除图像：

```
mAutofocusAnimation.setAnimationListener(new AnimationListener() {
    @Override public void onAnimationEnd(Animation arg0) {
        mAutofocusCrosshair.clear();            
    }
    @Override public void onAnimationRepeat(Animation arg0) {}
    @Override public void onAnimationStart(Animation arg0) {}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:26:33.723

如果您的意思是在相机应用程序的预览屏幕中改变颜色的小矩形，我很确定您必须自己绘制它。抱歉，如果这不是您想要的答案！

但是，您可以调用`autoFocus()`它，它稍后会提供一个结果，告诉您相机是否在焦点上。从 API 14 开始，即使相机在`FOCUS_MODE_CONTINUOUS_PICTURE`.

我也很抱歉，我不知道描述使用焦点机制的好教程。我在过去一周学到的一件事：在开始预览图像之前不要打电话`autoFocus()`，因为它会使 HTC Nexus One 崩溃。

我从[http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)的示例代码构建了我的第一个 Android 相机应用程序， 但请注意，那里编写的代码将每个预览帧写入 SD 卡并快速填充！里面没有关于自动对焦的代码。

**编辑：**当然，最终的示例代码，包括焦点指示器，在相机应用程序源代码中。本题：[哪里可以得到Android相机应用源码？](https://stackoverflow.com/questions/1105196/where-can-i-get-the-android-camera-application-source-code#1105311)告诉如何获得它。我只是按照那里的说明获得了大约 35MB 的源代码，恐怕我还没有找到那个小的聚焦矩形！

# javascript - 仅检测输入文本中的字母（使用 javascript 时出错）

> ID：13751391
> 
> 赞同：0
> 
> 时间：2012-12-06T19:51:18.330
> 
> 标签：javascript, jsp

我写的函数检查输入是否是字母。如果不是，它会显示一条警报消息，然后删除内容。刚输入一个字母的时候效果很好，但是如果我输入数字，它会显示输入字母的消息，这是可以的，但是当我在框中输入字母时，它仍然会弹出消息并要求我输入一个字母。为什么？我该如何解决？

```
<%//javascript file %>
<script type="text/javascript" >
function allLetter(value)  
{  
 var letters = /^[A-Za-z]+$/;  
 if(value.match(letters))  
   {
    return true;  
   }  
 else  
   {  
   alert("first, last and middle name contain only letters");  
   return false;  
   }  
} 

function checkform ( form )
{
  // see http://www.thesitewizard.com/archive/validation.shtml
  // for an explanation of this script and how to use it on your
  // own website

  // ** START **
  if ((form.firstName.value == "") || (form.lastName.value == "") ) {
    alert("Please enter both your first and last name.");
    form.firstName.focus();
    form.lastName.focus();
    return false ;
  }
  // ** END **
  return true ;
}
</script>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Names and country of residence page</title>
</head>
<body>
<%

Connection conn = null;
PreparedStatement pstmt = null;
ResultSet rs = null;

    // Registering Postgresql JDBC driver with the DriverManager
    Class.forName("org.postgresql.Driver");

    // Open a connection to the database using DriverManager
    conn = DriverManager.getConnection(
        "jdbc:postgresql://localhost:5432/assignment1",
        "postgres","Km81920265");

        // Create the statement
        Statement statement = conn.createStatement();

        // Use the created statement to SELECT
        // the student attributes FROM the Student table.
        rs = statement.executeQuery("SELECT * FROM countries_and_states WHERE is_country='t'");

%>

<%//first delcare input %>
Please enter your first name, last name and middle initial:<p>
<form method="get" action="address.jsp" onsubmit="return checkform(this);">
<%//store input into session %>
Your first name :<input type="text" size="15" name="firstName" onchange="if(!allLetter(this.value)){this.value= ' ';} "/><p/>
Your last name  :<input type="text" size="15" name="lastName" onchange="if(!allLetter(this.value)){this.value= ' ';} "/><p/>
Your middle name:<input type="text" size="15" name="middleName" onchange="if(!allLetter(this.value)){this.value= ' ';} "/><p/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:53:31.537

您将值设置为一个空格，而不是一个字母。

还值得注意的是，有些人的名字中有空格。数字也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:55:26.140

更改字母以匹配`/^\s*[A-Za-z]+\s*$/`或修剪值周围的空白。

# sql - 找到 NULL 值时显示列名

> ID：13751396
> 
> 赞同：1
> 
> 时间：2012-12-06T19:51:43.547
> 
> 标签：sql, oracle

我有下表：

```
Col1    Col2    Col3    Col4    Col5    Col6    Col7
=====================================================
XYZ             GH      JY              IOP 
GH      TY                                      HGF
                TR              OPY 
```

我想编写一个 SQL 查询，它将检查`NULL`每一行中的值并将具有`NULL`值的列名显示到一个名为“缺失值”的新列中。

所以输出将如下所示：

```
Missing Value 
=============
Col2,Col5,Col7
Col3,Col4,Col5,Col6
Col1,Col2,Col4,Col6,Col7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:28:31.390

如果您希望结果以逗号分隔，您可以在@Randy 的回答中尝试这种变体：

```
SELECT
    SUBSTR
    (
        DECODE(COL1, NULL, ',COL1')
        ||
        DECODE(COL2, NULL, ',COL2')
        ||
        DECODE(COL3, NULL, ',COL3')
        ||
        DECODE(COL4, NULL, ',COL4'),
        2
    )
FROM
    YOUR_TABLE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:15:07.803

结构应该工作

```
select decode( col1, null, 'col1 ' ) 
|| decode( col2, null, 'col2 ' )
|| decode( col3, null, 'col3 ' ) 
from mytable 
```

# linux - 内核模块未构建 .ko 文件

> ID：13751398
> 
> 赞同：1
> 
> 时间：2012-12-06T19:51:54.407
> 
> 标签：linux, module, kernel, cross-compiling

我有一个正在尝试交叉编译的第 3 方设备驱动程序。当我构建驱动程序时，一切都很顺利，但我没有看到任何 driver.ko 文件，但是 driver.o 文件生成正常，并且在构建过程中我没有看到任何错误。我也尝试使用选项 V=1 并且看到以下错误

```
echo; 
echo "  ERROR: Kernel configuration is invalid.";
echo "         include/generated/autoconf.h or include/config/auto.conf are         missing.";
echo "         Run 'make oldconfig && make prepare' on kernel src to fix  it.";
echo; 
```

但是我的内核配置是正确的，我已经尝试了一个简单的 hello world 模块，在这种情况下，我可以构建我的模块，但仍然看到这个错误消息。我还可以在内核源代码中看到文件 include/generated/autoconf.h 和 include/config/auto.conf 。仍然为什么我无法构建我的驱动程序模块。

这是构建的输出。

```
LD [M]  /home/farshad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca3.1RC_553/imx6build/host/os/linux/ar6000.o                                                          
Building modules, stage 2.
MODPOST 0 modules
make[2]: Leaving directory  `/home/farshad/Work/CSP/projects/phase_1/farshad/cspbox/platform/imx6/mel5/fs/workspace/linux-2.6.38-imx6' 
```

正如您在上面看到的 ar6000.o 正确构建而没有任何错误，但为什么没有构建 ar6000.ko 否则它应该报告“MODPOST 1 模块”。由于在完整构建过程结束时未构建 ar6000.ko，因此我也收到以下错误

```
cp: cannot stat `/home/farshad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca3.1RC_553/imx6build/host/os/linux/ar6000.ko': No such file or directory
2404 make[1]: *** [install] Error 1 
```

这是显而易见的。我的问题是为什么我一开始就没有得到 ar6000.ko。在谷歌上搜索有人也遇到了这个问题，并提到用 sudo 运行 make 解决了它，但它没有给我带来运气！

我在徘徊我的内核配置是否有任何问题（即驱动程序正在寻找一些我尚未在我的内核中启用的配置设置，但在这种情况下它应该给编译器错误寻找所需的#define），另一点可能是驱动程序构建系统存在问题，我正在努力解决这个问题。我的交叉编译环境很好，因为我在为我的（Ubuntu x86）机器构建相同的驱动程序时看到了完全相同的问题！

有什么想法吗。问候， Farrukh Arshad

更新 #1 它是一个第 3 方驱动程序包，它还与驱动程序模块一起构建其他实用程序。这是驱动模块构建过程的输出

```
make CT_BUILD_TYPE=MX6Q_ARM CT_OS_TYPE=linux CT_OS_SUB_TYPE=  CT_LINUXPATH=~/Work/CSP/projects/phase_1/farshad/cspbox/platform/imx6/mel5/fs/workspace/linu x-2.6.38-imx6 CT_BUILD_TYPE=MX6Q_ARM CT_CROSS_COM      PILE_TYPE=~/bin/mgc/CodeSourcery/Sourcery_CodeBench_for_ARM_GNU_Linux/bin/arm-none-linux- gnueabi- CT_ARCH_CPU_TYPE=arm CT_HC_DRIVERS=pci_std/ CT_MAKE_INCLUDE_OVERRIDE=  CT_BUILD_OUTPUT_OVERRIDE=/home/far      shad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca3.1RC_553 /imx6build/host/.output/MX6Q_ARM-SDIO/image  -C   /home/farshad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux      _release_[posted_2011_8_19_olca3.1RC_553/imx6build/host/sdiostack/src default
make[3]: Entering directory  `/home/farshad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olc a3.1RC_553/imx6build/host/sdiostack/src'
make  -C ~/Work/CSP/projects/phase_1/farshad/cspbox/platform/imx6/mel5/fs/workspace/linux-2.6.38-imx6 SUBDIRS=/home/farshad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca     3.1RC_553/imx6build/host/sdiostack/src ARCH=arm CROSS_COMPILE=~/bin/mgc/CodeSourcery/Sourcery_CodeBench_for_ARM_GNU_Linux/bin/arm-none-linux-gnueabi- EXTRA_CFLAGS="-DLINUX -I/home/farshad/Work/CSP/board     s/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca3.1RC_553/imx6build/host/sdiostack/src/include  -DDEBUG" modules
make[4]: Entering directory `/home/farshad/Work/CSP/projects/phase_1/farshad/cspbox/platform/imx6/mel5/fs/workspace/linux-2.6.38-imx6'
    Building modules, stage 2.
    MODPOST 0 modules
make[4]: Leaving directory  `/home/farshad/Work/CSP/projects/phase_1/farshad/cspbox/platform/imx6/mel5/fs/workspace/linu x-2.6.38-imx6' 
```

这是驱动模块的Makefile。

```
ifdef CT_MAKE_INCLUDE_OVERRIDE
-include $(CT_MAKE_INCLUDE_OVERRIDE)
else
-include localmake.$(CT_OS_TYPE).inc
-include localmake.$(CT_OS_TYPE).private.inc
endif

export CT_OS_TYPE
export CT_OS_SUB_TYPE
export CT_OS_TOP_LEVEL_RULE 
export CT_PASS_CFLAGS
export CT_SRC_BASE
export CT_BUILD_SUB_PROJ

# this makefile can only be invoked from the /EMSDIO/src base
CT_SRC_BASE :=$(shell pwd)

# export flags for which HCDs to build. Set the hcd driver name in hcd/ in your     localmake.*.inc file.
export CT_HC_DRIVERS
export PDK_BUILD
export HDK_BUILD
export ALL_BUILD
export ATHRAW_FD_BUILD
export BUS_BUILD

# For Linux
ifeq ($(CT_OS_TYPE),linux) 

#make a copy for linux 2.4
EXTRA_CFLAGS += -DLINUX -I$(CT_SRC_BASE)/include 
ifneq ($(CT_RELEASE),1)
EXTRA_CFLAGS += -DDEBUG
endif  
export EXTRA_CFLAGS 

CT_SRC_OUTPUT :=$(CT_SRC_BASE)/../output

ifdef CT_BUILD_OUTPUT_OVERRIDE
_CT_COMPILED_OBJECTS_PATH :=$(CT_BUILD_OUTPUT_OVERRIDE)
_MAKE_OUTPUT_DIR :=
_CLEAN_OUTPUT_DIR :=
else
_CT_COMPILED_OBJECTS_PATH := $(CT_SRC_OUTPUT)/$(CT_BUILD_TYPE)
_MAKE_OUTPUT_DIR := mkdir --parents $(_CT_COMPILED_OBJECTS_PATH)
_CLEAN_OUTPUT_DIR := rm -R -f $(CT_SRC_OUTPUT)
endif

ifeq ($(CT_OS_SUB_TYPE),linux_2_4)

CT_PASS_CFLAGS := $(EXTRA_CFLAGS)
_CT_MOD_EXTENSION :=o
ifeq ($(ALL_BUILD),1)
subdir-m += busdriver/ lib/ hcd/ function/   
else 
ifeq ($(BUS_BUILD),1)
subdir-m += busdriver/ lib/ hcd/
else
ifeq ($(PDK_BUILD),1)
subdir-m += function/
else
ifeq ($(HDK_BUILD),1)
subdir-m += hcd/ function/ 
endif
endif
endif
endif

# add in rules to make modules
CT_OS_TOP_LEVEL_RULE :=$(CT_LINUXPATH)/Rules.make
include $(CT_OS_TOP_LEVEL_RULE)
else
#2.6+
_CT_MOD_EXTENSION :=ko
ifeq ($(ALL_BUILD),1)
obj-m += busdriver/ lib/ hcd/ function/  
else 
ifeq ($(BUS_BUILD),1)
obj-m += busdriver/ lib/ hcd/
else 
ifeq ($(PDK_BUILD),1)
obj-m += function/
else
ifeq ($(HDK_BUILD),1)
obj-m += hcd/ function/ 
endif
endif
endif
endif

endif

ifdef CT_BUILD_SUB_PROJ
_CT_SUBDIRS=$(CT_BUILD_SUB_PROJ)
else
_CT_SUBDIRS=$(CT_SRC_BASE)
endif

ifdef CT_CROSS_COMPILE_TYPE 
CT_MAKE_COMMAND_LINE=$(CT_OUTPUT_FLAGS) -C $(CT_LINUXPATH) SUBDIRS=$(_CT_SUBDIRS)     ARCH=$(CT_ARCH_CPU_TYPE) CROSS_COMPILE=$(CT_CROSS_COMPILE_TYPE)
else   
CT_MAKE_COMMAND_LINE=$(CT_OUTPUT_FLAGS) -C $(CT_LINUXPATH) SUBDIRS=$(_CT_SUBDIRS)
endif

makeoutputdirs:
$(_MAKE_OUTPUT_DIR)

default: makeoutputdirs
echo " ************ BUILDING MODULE ************** "
$(MAKE) $(CT_MAKE_COMMAND_LINE) EXTRA_CFLAGS="$(EXTRA_CFLAGS)" modules
echo " *** MODULE EXTENSION = $(_CT_MOD_EXTENSION)"
$(CT_SRC_BASE)/../scripts/getobjects.scr $(CT_SRC_BASE) $(_CT_COMPILED_OBJECTS_PATH)     $(_CT_MOD_EXTENSION)

ifeq ($(CT_OS_SUB_TYPE),linux_2_4)
# on 2.4 we can't invoke the linux clean with SUBDIRS, it will just clean out the kernel
clean:
find $(_CT_SUBDIRS) \( -name '*.[oas]' -o -name core -o -name '.*.flags' -o -name   '.ko' -o -name '.*.cmd' \) -type f -print \
    | grep -v lxdialog/ | xargs rm -f
$(_CLEAN_OUTPUT_DIR)
else 
clean:
$(MAKE) $(CT_MAKE_COMMAND_LINE) clean
find $(_CT_SUBDIRS) \( -name '*.[oas]' -o -name core -o -name '.*.flags' \) -type f  -print \
    | grep -v lxdialog/ | xargs rm -f
$(_CLEAN_OUTPUT_DIR)
endif
endif 

# For QNX
ifeq ($(CT_OS_TYPE),qnx)  
LIST=VARIANT
EARLY_DIRS=lib
##ifndef QRECURSE
QRECURSE=./recurse.mk
##ifdef QCONFIG
###QRDIR=$(dir $(QCONFIG))
##endif
##endif
include $(QRDIR)$(QRECURSE)

endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:00:00.020

好的，我已经找到了问题所在。我在模块源目录中有方括号字符“[”

```
LD [M]  /home/farshad/Work/CSP/boards/imx6q/ar6k3/ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca3.1RC_553/imx6build/host/os/linux/ar6000.o 
```

从路径中删除它效果很好，我得到了我的内核模块目标文件。我改名了

```
ar6003_3.1_RC_Linux_release_[posted_2011_8_19_olca3.1RC_553 
```

到

```
ar6003, 
```

并且还测试了

```
ar6003_3.1_RC_Linux_release_posted_2011_8_19_olca3.1RC_553 
```

两者都工作得很好。我在 Ubuntu 10.04 上构建。我的一位同事在 Ubuntu 11.04 上的路径中使用具有“[”字符的相同来源构建，并且内核模块目标文件构建良好，这也表明 grep / find / awk 或此类实用程序在不同版本中的行为发生了变化，正在使用哪个内核构建系统，导致此问题。

问候， Farrukh Arshad。

# jsf - 获取数据表 myfaces 2.1 中一行的值

> ID：13751399
> 
> 赞同：1
> 
> 时间：2012-12-06T19:51:55.313
> 
> 标签：jsf, jsf-1.2

myfaces 1.2 我在 myfaces2.1 中有一个数据表，如果我针对要在托管 bean 中获取行数据并想要将这些特定值传递到不同的屏幕上，谁能帮助我将特定检查的行值传递给托管 bean..？

```
 <h:column>
                    <h:selectBooleanCheckbox   value="#{myResourcesDetails.chkBxVal}" binding="#{myResourcesDetails.selectedValue(actionEvent)}"/>

                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText id="tblHdr0" value="Employee Id" style="font-family: arial; font-size: 12px; color: blue"/>
                    </f:facet> 
                    <h:commandLink id="emNo" value="#{resList.empNo}" onclick="fn_openResDetails(#{resList.empNo});" style="font-family: verdana; font-size: 12px; color: olive"/>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        &nbsp;&nbsp;&nbsp;
                        <h:outputText id="tblHdr1" value="Resource Name" style="font-family: arial; font-size: 12px; color: blue"/>
                    </f:facet> 
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <h:outputText value="#{resList.resName}" style="font-family: verdana; font-size: 12px; color: olive"/>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <h:outputText id="tblHdr3" value="Project Name" style="font-family: arial; font-size: 12px; color: blue"/>
                    </f:facet>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <h:outputText value="#{resList.projName}" style="font-family: verdana; font-size: 12px; color: olive"/>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <h:outputText id="tblHdr4" value="Manager Id" style="font-family: arial; font-size: 12px; color: blue"/>
                    </f:facet>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <h:outputText value="#{resList.manager}" style="font-family: verdana; font-size: 12px; color: olive"/>
                </h:column>

                 </h:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:00:05.343

将`chkBxVal`字段添加到您的对象中`resList`

尝试

和改变

```
<h:selectBooleanCheckbox   value="#{myResourcesDetails.chkBxVal}" 
   binding="#{myResourcesDetails.selectedValue(actionEvent)}"/> 
```

进入

```
<h:selectBooleanCheckbox value="#{resList.chkBxVal}"/> 
```

比向服务器提交数据时循环遍历列表中的值并查看列表`chkBxVal`中每个对象中的值...

# ruby-on-rails-3 - 用户中的参数错误#show Rails

> ID：13751402
> 
> 赞同：1
> 
> 时间：2012-12-06T19:52:16.903
> 
> 标签：ruby-on-rails-3, arguments

我不断收到上述错误和以下消息：

```
'nil' is not an ActiveModel-compatible object that returns a valid partial path. 
```

错误指向第 18 行的源。

```
15:     <% if @user.microposts.any? %>
16:       <h3>Comments (<%= @user.microposts.count %>)</h3>
17:       <ol class="microposts">
18:         <%= render @microposts %>
19:       </ol>
20:       <%= will_paginate @microposts %>
21:     <% end %> 
```

我尝试检查命名约定，但我完全按照 Michael Hartl 的 Rails 教程中所示的方式使用它们。对于名为“recipes”的模型，我有类似的代码块，所以我假设我也会遇到类似的错误。奇怪的是，我可以同时创建微博和食谱，并且两者都会显示在登录用户的主页上。当我转到“用户”并尝试单击那里的帐户时出现此错误。有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:05:15.447

失败的行是试图渲染一个局部视图——渲染的参数，但通常`@microposts`是`nil`一个引用视图文件的字符串，例如

```
<%= render "microposts" %> 
```

会告诉 Rails 查找目录中命名`_microposts.html.erb`的`views/users`文件。视图中的使用`render`不同于控制器中的使用。

[在此处查看有关渲染局部的文档](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

PS 欢迎来到 StackOverflow——第一个问题很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T21:01:47.493

我刚刚遇到了这个问题，而其他答案提供了丰富的信息，这个潜在的问题更多地与教程中的差异有关。它指示您将此代码添加到您的 users_controller：

```
 def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
  end 
```

但是在本教程的前面，你有这个我不记得的 #show 方法，我最终在我的控制器中添加了第 13 章中的一个 #show 方法：

```
 def show
    @user = User.find(params[:id])
    redirect_to root_url and return unless @user.activated?
  end 
```

..所以我为解决这个问题所做的就是将它们组合成一种方法，然后我得到了带有无样式微博的用户页面，如教程图中的那样。不完全确定如何引用这个 Hartl，但我想我会在这里添加它，因为我也刚刚启动 Rails，遇到这个问题大约 20 分钟令人沮丧，并且由于某种原因扫描我的 user_controller 后不知何故注意到了重复的方法。

```
 def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
    redirect_to root_url and return unless @user.activated?
  end 
```

# c++ - 静态单例？

> ID：13751406
> 
> 赞同：1
> 
> 时间：2012-12-06T19:52:20.723
> 
> 标签：c++, templates, static

是否可以制作通用单例？我想创建一些我可以继承的东西并获得单例的功能。我在使用带有静态成员的模板时遇到了麻烦。

这不应该工作吗？

**

更新

**

感谢您到目前为止的答复。所以现在我的问题是 GameEngine 看不到它自己的构造函数。我知道这是私人的，但仍然。

**单例.h**

```
template <typename T>
class Singleton
{
private:
    static std::shared_ptr<T> m_Instance;
public: 
    static std::shared_ptr<T> Instance();
};

template<typename T>
std::shared_ptr<T> Singleton<T>::m_Instance = nullptr;

template<typename T>
std::shared_ptr<T> Singleton<T>::Instance()
{
if(m_Instance == nullptr)
    m_Instance = std::make_shared<T>();

return m_Instance;
} 
```

**游戏引擎.h**

```
class GameEngine : public Singleton<GameEngine>
{
private:
GameEngine();

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:55:02.960

我不明白它是如何工作的，因为没有什么能阻止你创建更多的`GameEngine`.

即使有可能（并且确实）有一种创建单例的通用方法（可能涉及宏），我还是建议不要这样做，因为**您真正想要单例的情况很少见**。让我换个说法……**真正需要**单身人士的情况很少见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:23:37.330

创建单例的最佳方法如下：

```
class GameEngine
{
public:
    static GameEngine& instance() { static GameEngine e; return e; }

private:
    GameEngine() {}
    GameEngine(const GameEngine&) = delete;
}; 
```

e 变量将在第一次调用实例时（线程安全地）初始化，并在有序进程退出时被销毁。私有/删除的构造函数防止创建第二个实例。

# iphone - appcelerator 中的大按钮

> ID：13751411
> 
> 赞同：0
> 
> 时间：2012-12-06T19:52:31.777
> 
> 标签：iphone, ios5, titanium-mobile, appcelerator-mobile

我在 Titanium Appcelerator 中创建了一个应用程序。该应用程序运行良好，直到 iPhone 5 和 ios 6 出现。问题在于按钮栏中的按钮比它们应该的大。它们与条重叠。

这是一个图像以及按钮的代码。有没有人遇到过这个问题？

[http://postimage.org/image/thlu3i8pf/](http://postimage.org/image/thlu3i8pf/)

```
 var statusButton = Titanium.UI.createButtonBar({
    labels:['Open', 'Closed'],
    backgroundColor:'#336699'
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:30:43.360

确保您使用的是 Titanium SDK 2.1.4 或更新版本——2.1.3 和 2.1.4 包含许多针对 iOS 6 和 iPhone 5 的修复程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:52:35.697

你需要增加高度。

```
var statusButton = Titanium.UI.createButtonBar({
labels:['Open', 'Closed'],
backgroundColor:'#336699',
height: 40
}); 
```

# css - 为什么字体名称需要引号？

> ID：13751412
> 
> 赞同：65
> 
> 时间：2012-12-06T19:52:32.830
> 
> 标签：css, fonts, conventions

据我所知，如果字体包含空格，则需要使用双引号或单引号，例如：

```
font-family: "Times New Roman", Times; 
font-family: 'Times New Roman', Times; 
```

但是在谷歌字体（[http://www.google.com/webfont](http://www.google.com/webfont)）上，我也看到了

```
font-family: 'Margarine', cursive; 
```

有些人甚至像这样使用它：

```
font-family: 'Margarine', 'Helvetica', arial; 
```

我觉得这很奇怪，因为以下方法也有效：

```
font-family: Arial, Helvetica, sans-serif;
font-family: Cambria, serif; 
```

那么 CSS 中字体名称周围引号的正确用法是什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-06T20:41:05.000

您始终可以将特定字体系列名称放在引号中，双引号或单引号，因此`Arial`、`"Arial"`和`'Arial'`是等价的。只有 CSS 定义的通用字体系列名称 like`sans-serif`必须不带引号。

与流行的看法相反，由空格分隔的名称组成的字体名称，例如`Times New Roman`不需要引用。但是，[规范](https://www.w3.org/TR/2018/REC-css-fonts-3-20180920/#propdef-font-family) *建议*“引用包含空格、数字或连字符以外的标点符号的字体系列名称”</p>

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-08-29T20:08:03.760

# 何时引用字体系列：

## 可选的

```
font-family: Times New Roman;         /* These are equivalent */
font-family: 'Times New Roman';
font-family: "Times New Roman";

font-family: Unique Ode™  Épopée;   /* These are equivalent */
font-family: "Unique Ode™  Épopée";

font-family: "Answer #42"             /* These are equivalent */
font-family: "Answer \23 42";
font-family: Answer \23 42; 
```

只要字体名称仅包含：

*   字母
*   数字
*   短跑
*   下划线
*   非 ASCII Unicode
*   单个内部空间
*   [反斜杠十六进制字符代码](https://www.w3.org/International/questions/qa-escapes)

那么引号是可选的。单引号或双引号。忽略大小写。有一些奇怪的边缘情况：未引用的单词不能以数字、破折号或破折号开头。

## 必须

```
font-family: "Intro Rust 2"           /* Unquoted words must not start with numbers. */
font-family: "Serif";                 /* For your own Serif, not the generic serif. */
font-family: "Yin/Yang";              /* Quote or code most ASCII punctuation. */ 
```

## 应该

```
font-family: "Initial Seals JNL"      /* `initial` and `default` are reserved words. */
font-family: "Omar Serif"             /* Generic names might also be reserved words? */ 
```

## 一定不

```
font-family: monospace;               /* Generic fonts must NOT be quoted. */
font-family: serif;
font-family: sans-serif;
font-family: cursive;
font-family: fantasy; 
```

谢谢：

*   [Mathias Bynens关于字体名称](https://mathiasbynens.be/notes/unquoted-font-family)的文章，由[Stephan B 的评论](https://stackoverflow.com/q/13751412/673991#comment18899051_13751412)链接。
*   bizworld关于与通用字体冲突的[观点。](https://stackoverflow.com/a/27608994/673991)
*   Mozilla 对[自定义标识符](https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident)的描述。
*   [W3C 规范](https://www.w3.org/TR/CSS/#css)font [-family](https://www.w3.org/TR/2018/REC-css-fonts-3-20180920/#propdef-font-family)和[identifiers](https://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)，由[Jukka K. Korpela 的回答链接](https://stackoverflow.com/a/13752149/673991)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-06T19:57:28.447

我刚刚了解到，引号不是必需的，而是推荐的。我们每天都会学到一些新东西。

您看到它们的另一个地方是需要 url 的 css 属性

```
background:url('hithere.jpg');
background:url(hithere.jpg); 
```

这两个语句都将完全相同。字体也是如此，在这种情况下，您使用哪种类型的引用无关紧要，只要在您做事的方式上保持一致，这才是真正重要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-22T19:13:07.713

有两个原因；

1.  当实际字体系列名称与通用系列名称共享相同名称时，以避免与具有相同名称的关键字混淆，例如

`p {font-family: 'Shift', sans-serif;}`

2.  当字体系列名称中有多个单词时，例如

`p {font-family: 'Times New Roman', ..... , a generic family name here ;}`

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-12-06T19:56:05.063

当字体名称中有空格时，您必须使用引号。如果字体名称中没有空格，最好不要使用它们，尽管保留它们不会对文件大小造成任何影响。

例子：

```
font-family: "Times New Roman", Times; // ok, and best practice
font-family: Times New Roman, Times; // incorrect, Browser won't be able to find Times New Roman
font-family: "Times New Roman", "Times"; // ok, but has extraneous quotes around Times 
```

# javascript - d3.js：将数据从父节点传递到子节点onclick事件

> ID：13751414
> 
> 赞同：3
> 
> 时间：2012-12-06T19:52:42.270
> 
> 标签：javascript, d3.js

我正在使用 d3 制作堆积条形图。

由于[这个先前的问题](https://stackoverflow.com/questions/13662756/d3-js-passing-data-from-parent-to-child-nodes)，我正在使用 parentNode.__ data__.key 将与父节点关联的数据绑定到子节点。

数据是一个数组，每个条都有一个对象（例如“喜欢”）。然后每个对象包含一个值数组，这些值驱动每个条形的各个矩形：

```
data =  [{
          key = 'likes', values = [
            {key = 'blue-frog', value = 1}, 
            {key = 'goodbye', value = 2}
          ]
        }, {
          key = 'dislikes, values = [
            {key = 'blue-frog', value = 3},
            {key = 'goodbye', value = 4}
          ]
        }] 
```

该图表工作正常，将父指标数据绑定到子 svg 属性也是如此：

```
// Create canvas
bars = svg.append("g");

// Create individual bars, and append data
// 'likes' are bound to first bar, 'dislikes' to second
bar = bars.selectAll(".bar")
        .data(data)        
        .enter()
        .append("g");

// Create rectangles per bar, and append data
// 'blue-frog' is bound to first rectangle, etc.
rect = bar.selectAll("rect")
        .data(function(d) { return d.values;})
        .enter()
        .append("rect");

// Append parent node information (e.g. 'likes') to each rectangle    
// per the SO question referenced above        
rect.attr("metric", function(d, i, j) {
  return rect[j].parentNode.__data__.key;
}); 
```

然后，这允许为每个矩形创建工具提示，例如“喜欢：2”。到目前为止，一切都很好。

问题是如何将相同的信息与点击事件相关联，建立在：

```
rect.on("click", function(d) {
  return _this.onChartClick(d);
});

// or

rect.on("click", this.onChartClick.bind(this)); 
```

这是有问题的，因为 onChartClick 方法需要访问绑定数据 (d) 和图表执行上下文 ('this')。如果不是，我可以切换执行上下文并`d3.select(this).attr("metric")`在 onChartClick 方法中调用。

我的另一个想法是将指标作为附加参数传递，但在这里使用 function(d, i, j) 的技巧似乎不起作用，因为它在单击事件发生之前不会运行。

你能提出一个解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T03:02:16.893

您可以使用闭包来保持对父数据的引用，如下所示：

```
bar.each(function(dbar) {            // dbar refers to the data bound to the bar
  d3.select(this).selectAll("rect")
      .on("click", function(drect) { // drect refers to the data bound to the rect
        console.log(dbar.key);       // dbar.key will be either 'likes' or 'dislikes'
      });
}); 
```

更新：

请参阅下文，了解访问 DOM 结构中不同级别的各种方法。连连看！查看此版本的实时版本并尝试单击 .rect div：[http ://bl.ocks.org/4235050](http://bl.ocks.org/4235050)

```
var data =  [
    {
        key: 'likes',
        values: [{ key: 'blue-frog', value: 1 }, { key: 'goodbye', value: 2 }]
    }, 
    {
        key: 'dislikes',
        values: [{ key: 'blue-frog', value: 3 }, { key: 'goodbye', value: 4 }]
    }];

var chartdivs = d3.select("body").selectAll("div.chart")
    .data([data]) // if you want to make multiple charts: .data([data1, data2, data3])
  .enter().append("div")
    .attr("class", "chart")
    .style("width", "500px")
    .style("height", "400px");

chartdivs.call(chart); // chartdivs is a d3.selection of one or more chart divs. The function chart is responsible for creating the contents in those divs

function chart(selection) { // selection is one or more chart divs
  selection.each(function(d,i) { // for each chartdiv do the following
    var chartdiv = d3.select(this);
    var bar = chartdiv.selectAll(".bar")
        .data(d)
      .enter().append("div")
        .attr("class", "bar")
        .style("width", "100px")
        .style("height", "100px")
        .style("background-color", "red");  

    var rect = bar.selectAll(".rect")
        .data(function(d) { return d.values; })
      .enter().append("div")
        .attr("class", "rect")
        .text(function(d) { return d.key; })
        .style("background-color", "steelblue");

    bar.each(function(dbar) {
      var bardiv = d3.select(this);
      bardiv.selectAll(".rect")
          .on("click", function(drect) { 
            d3.select(this).call(onclickfunc, bardiv);
          });
    });

    function onclickfunc(rect, bar) { // has access to chart, bar, and rect
      chartdiv.style("background-color", bar.datum().key === 'likes' ? "green" : "grey");
      console.log(rect.datum().key); // will print either 'blue-frog' or 'goodbye'
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:08:47.837

`rect.on("click", this.onChartClick.bind(this));`将不起作用，因为您没有传递函数，而是传递了函数的返回值（通过附加`(this)`）。

如果你想传递`this`和数据（`d`），试试这个：

```
// assuming you have this somewhere earlier
var onChartClick = function () {}

// change your parent click to
rect.on("click", function(d) {
    return onChartClick.call(this, d);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T13:48:34.497

另一种方法可能是传递一个对象/json，或者在我的情况下是一个类实例，它为事件创建该矩形以在内部访问它

```
var rect = svgContainer.append("rect");
rect.datum(this);
rect.on('click', function(d){
    alert(d);
    alert(d.id); // etc.
}); 
```

# backbone.js - 什么时候在 Backbone 中实际渲染和可用的东西

> ID：13751417
> 
> 赞同：1
> 
> 时间：2012-12-06T19:52:47.847
> 
> 标签：backbone.js, render

所以我在 BackBone 的 render() 方法中引入了一个模板。

```
var html = $(template).render();
this.el.html(html); 
```

我为该模板定义了一些 CSS，例如元素的百分比宽度。在上面的行之后，我似乎无法使用 jquery 获得那个高度。那么这是否真的将它呈现给 DOM，什么时候计算元素？

谢谢拉尔夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:06:00.297

首先，您需要使用 jquery 缓存元素`this.$el.html(html)`。在此之后，它已经渲染了视图，但没有附加到 DOM，因此，高度或宽度等属性将是未定义的（或零）。

例如，这应该返回一些东西：

```
var html = $(template).render();
this.$el.html(html);
this.$el.appendTo("body");
console.log(this.$el.height()); 
```

# function - Cypher Query Labguage Neo4j，迭代函数

> ID：13751418
> 
> 赞同：0
> 
> 时间：2012-12-06T19:52:51.740
> 
> 标签：function, cypher, iteration

我有一个包含 ~1'000,000 个节点的数据库，每个节点都有两个主要属性：质量和 lev，我有 1 到 50 个 lev，我想在每个 lev 中找到最大的节点（按质量给出），我的起始节点可以是任何人，有某种迭代函数或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:38:07.717

纯密码中没有迭代，您可以使用使用密码的高级 lvl 语言进行迭代，或者使用索引手动定义起始节点：

```
START n1=node:levIndex('lev:1') WITH max(n1.mass) as mx MATCH n1 where n1.mass=mx RETURN Id(n1),n1.mass;
START n2=node:levIndex('lev:2') WITH max(n2.mass) as mx MATCH n2 where n2.mass=mx RETURN Id(n2),n2.mass;
START n3=node:levIndex('lev:3') WITH max(n3.mass) as mx MATCH n3 where n3.mass=mx RETURN Id(n3),n3.mass;
..... 
```

# vb.net - app.config -- configSections -- sectionGroup:allowExeDefinition="MachineToLocalUser"

> ID：13751425
> 
> 赞同：8
> 
> 时间：2012-12-06T19:53:30.080
> 
> 标签：vb.net, winforms, app-config

这是什么意思？

```
allowExeDefinition="MachineToLocalUser"

    <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=99999999999" >
        <section name="MyApp.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=99999999999" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
    </sectionGroup> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T22:53:01.803

`allowExeDefinition`控制存储用户设置的位置。
对于 userSettings 部分，默认值为 MachineToLocalUser，这意味着该部分可以存储在本地用户配置文件目录中的 Machine.config、exe.config 或 user.config 中。

此属性的其他值是：

*   **MachineOnly** = ConfigurationSection 只能在 Machine.config 文件中定义。
*   **MachineToApplication** = ConfigurationSection 可以在 Machine.config 文件或客户端应用程序目录的 Exe.config 文件中定义。这是默认值。
*   **MachineToLocalUser** = ConfigurationSection 可以在 Machine.config、客户端应用程序目录的 Exe.config 文件、漫游用户目录的 User.config 文件或本地用户目录的 User.config 文件中定义。
*   **MachineToRoamingUser** = ConfigurationSection 可以在 Machine.config 文件、客户端应用程序目录的 Exe.config 文件或漫游用户目录的 User.config 文件中定义。

# haskell - 使用 Maybe a、IO a 和 MaybeT IO a

> ID：13751430
> 
> 赞同：4
> 
> 时间：2012-12-06T19:53:41.567
> 
> 标签：haskell, monad-transformers, maybe

我正在编写一个快速响应式系统，其中包含了 Maybe a、IO a 和 MaybeT IO a 的各种组合，并且有很多东西需要考虑。一些没有无效输入的 IO 操作（因此不包含在 MaybeT 中），一些是（并返回 MaybeT IO a）一些不是 IO 操作但可能失败，因此返回 Maybe a，还有一些这只是简单的值，并且开始似乎我必须记住过度组合`<$>, Just, fmap, MaybeT, lift, =<<,`并且`return`只是为了使所有内容都成为正确的类型。有没有更简单的方法来管理这个或推理我需要使用哪些函数来获取我需要的值？还是我只希望随着时间的推移我会变得更好？这是我的例子：

```
getPiece :: Player -> Board -> MaybeT IO Piece
getPiece player@(Player pieces _ _ _) board = piece
    where
        promptString = displayToUserForPlayer player board ++ "\n" ++ (display player) ++ "\n" ++ "Enter piece number: "
        input :: MaybeT IO String
        input = lift $ prompt promptString
        index :: MaybeT IO Int
        index = MaybeT <$> return <$> ((fmap cvtFrom1indexedInt) . maybeRead) =<< input
        piece :: MaybeT IO Piece
        piece = MaybeT <$> return <$> maybeIndex pieces =<< index

getRotatedPiece :: Player -> Board -> MaybeT IO Piece
getRotatedPiece player@(Player pieces _ _ _) board = piece
    where
        promptString :: MaybeT IO String
        promptString = (++) <$> displayListString <*> restOfString
        input :: MaybeT IO String
        input = MaybeT <$> (fmap Just) <$> prompt =<< promptString
        index :: MaybeT IO Int
        index = MaybeT <$> return <$> ((fmap cvtFrom1indexedInt) . maybeRead) =<< input
        piece :: MaybeT IO Piece
        piece = MaybeT <$> return <$> maybeIndex pieces =<< index
        rotatedPieceList :: MaybeT IO [Piece]
        rotatedPieceList = rotations <$> getPiece player board
        displayListString :: MaybeT IO String
        displayListString = displayNumberedList <$> rotatedPieceList
        restOfString :: MaybeT IO String
        restOfString = MaybeT <$> return <$> Just $ "\nEnter rotation number:" 
```

我必须说，我对缺乏简洁性感到失望，即使我删除了类型提示，我也可能会编写一个更短的函数来在 C# 或 python 中做同样的事情

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T20:57:27.063

由于您仅提供了一个代码片段，因此我无法尝试对其进行重构。但是，这就是我要做的：大多数 monad 都有相应的类型类。其原因正是您需要的：当您使用 monad 转换器创建 monad 时，它将继承内部 monad 的操作（如果合适）。所以你可以忘记内部的单子，只在最后的单子中工作。

在你的情况下，你有`MaybeT IO`. `MonadPlus`它是和的实例`MonadIO`。因此，您可以重构返回`Maybe something`以使用通用`MonadPlus`实例的代码，只需替换`Just`with`return`和`Nothing`with即可`mzero`。像：

```
-- before
checkNumber :: Int -> Maybe Int
checkNumber x | x > 0       = Just x
              | otherwise   = Nothing x
-- after
checkNumber :: MonadPlus m => Int -> m Int
checkNumber x | x > 0       = return x
              | otherwise   = mzero
-- or just: checkNumber = mfilter (> 0) . return 
```

它适用于任何`MonadPlus`，包括`Maybe`和`MaybeT IO`。

您可以重构返回`IO something`以使用一般`MonadIO`实例的代码：

```
-- before
doSomeIO :: IO ()
doSomeIO = getLine >>= putStrLn
-- after
doSomeIO :: MonadIO m => m ()
doSomeIO = liftIO $ getLine >>= putStrLn 
```

这样，您就可以忘记// `<$>`、`fmap`等。您只需使用,和在某些地方。`liftM``Just``MaybeT``return``mzero``liftIO`

这也将帮助您创建更通用的代码。如果您稍后意识到需要向 monad 堆栈添加一些内容，则现有代码不会中断，只要新的 monad 堆栈实现相同的类型类即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:49:37.420

我的一个不那么雄心勃勃的答案。查看您的代码，您的操作`getPiece`不会真正从特定错误站点返回任何信息。`Maybe`如果您真的想要这些，您可能只需使用 IO 并将异常转换为值即可。我将一些示例代码与您的代码中引用的一些未定义函数放在一起：

```
import Control.Exception (handle, IOException)

data Board = Board deriving (Show)
data Piece = Piece deriving (Show)
type Pieces = [Piece]
data Player = Player Pieces () () () deriving (Show)

prompt :: String -> IO String
prompt = undefined

cvtFrom1indexedInt :: Int -> Int
cvtFrom1indexedInt = undefined

maybeIndex :: Pieces -> Int -> Maybe Piece
maybeIndex = undefined

displayToUserForPlayer :: Player -> Board -> String
displayToUserForPlayer = undefined

display :: Player -> String
display = undefined

-- I used this when testing, to deal with the Prelude.undefined errors
--returnSilently :: SomeException -> IO (Maybe a)
returnSilently :: IOException -> IO (Maybe a)
returnSilently e = return Nothing

getPiece :: Player -> Board -> IO (Maybe Piece)
getPiece player@(Player pieces _ _ _) board = handle returnSilently $ do
    let promptString = displayToUserForPlayer player board ++ "\n" ++ (display player) ++ "\n" ++ "Enter piece number: "
    input <- prompt promptString
    let index = cvtFrom1indexedInt (read input)
    return (maybeIndex pieces index)

main = do
    maybePiece <- getPiece (Player [] () () ()) Board
    putStrLn ("Got piece: " ++ show maybePiece) 
```

`MaybeT IO Piece`值得注意的是，我已经从`IO (Maybe Piece)`. 而不是使用`fmap`or`lift`我只是使用`do`符号来引用我的`IO`操作的中间结果。

继续您对 C# 或 Python 的评论，我希望这是您正在寻找的那种更简单的答案。

# python - 将 RTSP 流下载到文件

> ID：13751435
> 
> 赞同：1
> 
> 时间：2012-12-06T19:53:54.593
> 
> 标签：python

我最近购买了几台 WANSCAM 无线摄像机，可让您通过 RTSP 流式传输视频。我希望找到一种简单的方法来使用 python 做到这一点。最终游戏是将 5 秒的提要缓冲到一个文件，然后通过烧瓶或其他一些轻量级 python 框架将该文件流式传输到网页，以便在我的家庭网络上查看。

有任何想法吗？

# mysql - JOINed SELECT 语句中的日期变量

> ID：13751437
> 
> 赞同：0
> 
> 时间：2012-12-06T19:53:56.340
> 
> 标签：mysql, date, join

```
$sql = 'SELECT have_show FROM `date` WHERE DATE(`date`.day) = ?';
$this->db->query($sql, array($date));            //works fine 
```

这按预期工作正常。

```
$sql = 'SELECT actors, visitors, tickets, have_show FROM show
            JOIN `date` ON show.day = `date`.id
            WHERE DATE(`date`.day) = ?';

$this->db->query($sql, array($date)); 
```

在这里，使用连接语句它给出 0 个结果。

**数据库模式**

```
id(AI)     day(INT FK-date.id)    actors(INT)    visitors(INT)  
  1                 2                   3               45               

id(AI)     day(DATE)               have_show(BOOLEAN)
  1       2012-12-06                       0
  2       2012-12-07                       1 
```

codeigniter 的活动记录也是如此。

你们中有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:00:46.267

试试这个

```
 $sql = 'SELECT actors, visitors, tickets, acts FROM `show`
        JOIN `date` ON show.day = date.id
        WHERE DATE(date.day) = ?';

    $this->db->query($sql, array($date)); 
```

你混在`date.day`和之间`date.id`。

或者你可能`show.id`没有`show.day`那么看你桌子上有什么，如果是的话

在你的 sql 中替换`show.day`为`show.id`

编辑：

```
 $sql = 'SELECT s.day s.actors, s.visitors, s.tickets, s.acts d.day FROM `show` s
        JOIN `date` d ON s.day = d.id '; 
```

# php - PHP在PHP运行后将页面创建为字符串

> ID：13751439
> 
> 赞同：0
> 
> 时间：2012-12-06T19:54:15.903
> 
> 标签：php, function

我坚持如何将 test.php 页面结果（在 php 运行后）写入字符串：

测试函数.php：

```
<?php

function htmlify($html, $format){
    if ($format == "print"){

        $html = str_replace("<", "&lt;", $html);
        $html = str_replace(">", "&gt;", $html);
        $html = str_replace("&nbsp;", "&amp;nbsp;", $html);
        $html = nl2br($html);
        return $html;
  }
};

$input = <<<HTML
<div style="background color:#959595; width:400px;">
&nbsp;<br>
input <b>text</b>
<br>&nbsp;
</div>
HTML;

function content($input, $mode){
  if ($mode =="display"){
    return $input;
  }
  else if ($mode =="source"){
    return htmlify($input, "print");
  }; 

};

function pagePrint($page){

  $a = array(
    'file_get_contents' => array($page),
    'htmlify' => array($page, "print")
  );  
  foreach($a as $func=>$args){
      $x = call_user_func_array($func, $args);
      $page .= $x;
  }    
  return $page;
};

$file = "test.php";
?> 
```

测试.php：

```
<?php include "testFunctions.php"; ?>

<br><hr>here is the rendered html:<hr>

<?php $a = content($input, "display"); echo $a; ?>

<br><hr>here is the source code:<hr>

<?php $a = content($input, "source"); echo $a; ?>

<br><hr>here is the source code of the entire page after the php has been executed:<hr>
<div style="margin-left:40px; background-color:#ebebeb;">
<?php $a = pagePrint($file); echo $a; ?>
</div> 
```

我想将所有 php 文件保留在 testFunctions.php 文件中，这样我就可以将简单的函数调用放入 html 电子邮件的模板中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:13:40.757

这可能不是您正在寻找的东西，但您似乎想要构建一个用于处理电子邮件模板的引擎，您可以将 php 函数放入其中？您可以查看[http://phpsavant.com/](http://phpsavant.com/)，这是一个简单的模板引擎，可让您将 php 函数直接放入模板文件以及基本变量分配。

我不确定 printPage 应该做什么，但我会像这样重写它只是为了让它更明显，因为函数调用数组有点复杂，我认为这就是真正发生的一切：

```
function pagePrint($page) {
    $contents = file_get_contents($page);
    return $page . htmlify($contents,'print');
}; 
```

您可能会考虑摆脱 htmlify() 函数并使用内置函数 htmlentities() 或 htmlspecialchars()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:05:26.520

您可以使用[输出缓冲](http://us1.php.net/manual/en/intro.outcontrol.php)来捕获包含文件的输出并将其分配给变量：

```
function pagePrint($page, array $args){
 extract($args, EXTR_SKIP);
 ob_start();
 include $page;
 $html = ob_get_clean();
 return $html;
}

pagePrint("test.php", array("myvar" => "some value"); 
```

与`test.php`

```
<h1><?php echo $myvar; ?></h1> 
```

会输出：

```
<h1>some value</h1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:01:13.210

似乎我原来的方法可能不是最好的方法。与其就同一主题提出新问题，不如提供一种替代方法，看看它是否会导致我想要的解决方案。

测试函数.php：

```
$content1 = "WHOA!";
$content2 = "HEY!";
$file = "test.html";

$o = file_get_contents('test.html');

$o = ".$o.";

echo $o;

?> 
```

文本.php：

```
<hr>this should say "WHOA!":<hr>

$content1

<br><hr>this should say "HEY!":<hr>

$content2 
```

我基本上是想让 $o 返回 test.php 文件的字符串，但我希望解析 php 变量。好像它是这样读的：

```
$o = "
    <html>$content1</html>
"; 
```

或者

```
$o = <<<HTML
<html>$content1</html>
HTML; 
```

谢谢！

# jquery - Codeigniter jQuery 文件上传意外的令牌

> ID：13751448
> 
> 赞同：0
> 
> 时间：2012-12-06T19:54:44.937
> 
> 标签：jquery, codeigniter, file-upload

我正在尝试实施[本](http://vortexdev.netii.net/article_20/Integrate_jQuery_File_Upload_with_CodeIgniter)教程，我相信我已经完成了教程中所说的内容。但是在下载过程似乎完成后我收到了这个错误。

> `Error SyntaxError: Unexpected token <`

在这里你可以看到我的控制器：

```
<?php

class Upload extends CI_Controller{

function __construct() {
    parent::__construct();
}

public function index()
{
    $this->load->view("upload");
}

public function upload()
{
    error_reporting(E_ALL | E_STRICT);

    $this->load->helper("upload.class");

    $upload_handler = new UploadHandler();

    header('Pragma: no-cache');
    header('Cache-Control: no-store, no-cache, must-revalidate');
    header('Content-Disposition: inline; filename="files.json"');
    header('X-Content-Type-Options: nosniff');
    header('Access-Control-Allow-Origin: *');
    header('Access-Control-Allow-Methods: OPTIONS, HEAD, GET, POST, PUT, DELETE');
    header('Access-Control-Allow-Headers: X-File-Name, X-File-Type, X-File-Size');

    switch ($_SERVER['REQUEST_METHOD']) {
        case 'OPTIONS':
            break;
        case 'HEAD':
        case 'GET':
            $upload_handler->get();
            break;
        case 'POST':
            if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
                $upload_handler->delete();
            } else {
                $upload_handler->post();
            }
            break;
        case 'DELETE':
            $upload_handler->delete();
            break;
        default:
            header('HTTP/1.1 405 Method Not Allowed');
    }
} 
```

}

有一个类可以制作所有上传的东西，它被放入 helpers 文件夹中。我怀疑不是将函数而是将类放入帮助文件夹会导致问题吗？但是，我认为该错误与此无关。也许是 jQuery 的问题，但又不确定。

以下是我的部分观点供您查看：

```
<form id="fileupload" action="<?=base_url()?>upload/upload" method="POST" enctype="multipart/form-data">
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="span7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span>Add files...</span>
                    <input type="file" name="files[]" multiple>
                </span>
                <button type="submit" class="btn btn-primary start">
                    <i class="icon-upload icon-white"></i>
                    <span>Start upload</span>
                </button>
                <button type="reset" class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span>Cancel upload</span>
                </button>
                <button type="button" class="btn btn-danger delete">
                    <i class="icon-trash icon-white"></i>
                    <span>Delete</span>
                </button>
                <input type="checkbox" class="toggle">
            </div>
            <!-- The global progress information -->
            <div class="span5 fileupload-progress fade">
                <!-- The global progress bar -->
                <div class="progress progress-success progress-striped active">
                    <div class="bar" style="width:0%;"></div>
                </div>
                <!-- The extended global progress information -->
                <div class="progress-extended">&nbsp;</div>
            </div>
        </div>
        <!-- The loading indicator is shown during file processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
    </form>

<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>{%=locale.fileupload.start%}</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="<?=base_url()?>js/vendor/jquery.ui.widget.js"></script>
<!-- The Templates plugin is included to render the upload/download listings -->
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
<script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
<script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="<?=base_url()?>js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="<?=base_url()?>js/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="<?=base_url()?>js/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="<?=base_url()?>js/jquery.fileupload-ui.js"></script>
<!-- The localization script -->
<script src="<?=base_url()?>js/locale.js"></script>
<!-- The main application script -->
<script src="<?=base_url()?>js/main.js"></script> 
```

这是我的 Codeigniter 助手文件夹中的上传类：

```
 <?php

class UploadHandler
{
    protected $options;

    function __construct($options=null) {
        $this->options = array(
            'script_url' => $this->getFullUrl().'/',
            'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
            'upload_url' => $this->getFullUrl().'/files/',
            'param_name' => 'files',
            // Set the following option to 'POST', if your server does not support
            // DELETE requests. This is a parameter sent to the client:
            'delete_type' => 'DELETE',
            // The php.ini settings upload_max_filesize and post_max_size
            // take precedence over the following max_file_size setting:
            'max_file_size' => null,
            'min_file_size' => 1,
            'accept_file_types' => '/.+$/i',
            // The maximum number of files for the upload directory:
            'max_number_of_files' => null,
            // Image resolution restrictions:
            'max_width' => null,
            'max_height' => null,
            'min_width' => 1,
            'min_height' => 1,
            // Set the following option to false to enable resumable uploads:
            'discard_aborted_uploads' => true,
            // Set to true to rotate images based on EXIF meta data, if available:
            'orient_image' => false,
            'image_versions' => array(
                // Uncomment the following version to restrict the size of
                // uploaded images. You can also add additional versions with
                // their own upload directories:
                /*
                'large' => array(
                    'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
                    'upload_url' => $this->getFullUrl().'/files/',
                    'max_width' => 1920,
                    'max_height' => 1200,
                    'jpeg_quality' => 95
                ),
                */
                'thumbnail' => array(
                    'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/thumbnails/',
                    'upload_url' => $this->getFullUrl().'/thumbnails/',
                    'max_width' => 80,
                    'max_height' => 80
                )
            )
        );
        if ($options) {
            $this->options = array_replace_recursive($this->options, $options);
        }
    }

    protected function getFullUrl() {
        return
            (isset($_SERVER['HTTPS']) ? 'https://' : 'http://').
            (isset($_SERVER['REMOTE_USER']) ? $_SERVER['REMOTE_USER'].'@' : '').
            (isset($_SERVER['HTTP_HOST']) ? $_SERVER['HTTP_HOST'] : ($_SERVER['SERVER_NAME'].
            (isset($_SERVER['HTTPS']) && $_SERVER['SERVER_PORT'] === 443 ||
            $_SERVER['SERVER_PORT'] === 80 ? '' : ':'.$_SERVER['SERVER_PORT']))).
            substr($_SERVER['SCRIPT_NAME'],0, strrpos($_SERVER['SCRIPT_NAME'], '/'));
    }

    protected function set_file_delete_url($file) {
        $file->delete_url = $this->options['script_url']
            .'?file='.rawurlencode($file->name);
        $file->delete_type = $this->options['delete_type'];
        if ($file->delete_type !== 'DELETE') {
            $file->delete_url .= '&_method=DELETE';
        }
    }

    protected function get_file_object($file_name) {
        $file_path = $this->options['upload_dir'].$file_name;
        if (is_file($file_path) && $file_name[0] !== '.') {
            $file = new stdClass();
            $file->name = $file_name;
            $file->size = filesize($file_path);
            $file->url = $this->options['upload_url'].rawurlencode($file->name);
            foreach($this->options['image_versions'] as $version => $options) {
                if (is_file($options['upload_dir'].$file_name)) {
                    $file->{$version.'_url'} = $options['upload_url']
                        .rawurlencode($file->name);
                }
            }
            $this->set_file_delete_url($file);
            return $file;
        }
        return null;
    }

    protected function get_file_objects() {
        return array_values(array_filter(array_map(
            array($this, 'get_file_object'),
            scandir($this->options['upload_dir'])
        )));
    }

    protected function create_scaled_image($file_name, $options) {
        $file_path = $this->options['upload_dir'].$file_name;
        $new_file_path = $options['upload_dir'].$file_name;
        list($img_width, $img_height) = @getimagesize($file_path);
        if (!$img_width || !$img_height) {
            return false;
        }
        $scale = min(
            $options['max_width'] / $img_width,
            $options['max_height'] / $img_height
        );
        if ($scale >= 1) {
            if ($file_path !== $new_file_path) {
                return copy($file_path, $new_file_path);
            }
            return true;
        }
        $new_width = $img_width * $scale;
        $new_height = $img_height * $scale;
        $new_img = @imagecreatetruecolor($new_width, $new_height);
        switch (strtolower(substr(strrchr($file_name, '.'), 1))) {
            case 'jpg':
            case 'jpeg':
                $src_img = @imagecreatefromjpeg($file_path);
                $write_image = 'imagejpeg';
                $image_quality = isset($options['jpeg_quality']) ?
                    $options['jpeg_quality'] : 75;
                break;
            case 'gif':
                @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
                $src_img = @imagecreatefromgif($file_path);
                $write_image = 'imagegif';
                $image_quality = null;
                break;
            case 'png':
                @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
                @imagealphablending($new_img, false);
                @imagesavealpha($new_img, true);
                $src_img = @imagecreatefrompng($file_path);
                $write_image = 'imagepng';
                $image_quality = isset($options['png_quality']) ?
                    $options['png_quality'] : 9;
                break;
            default:
                $src_img = null;
        }
        $success = $src_img && @imagecopyresampled(
            $new_img,
            $src_img,
            0, 0, 0, 0,
            $new_width,
            $new_height,
            $img_width,
            $img_height
        ) && $write_image($new_img, $new_file_path, $image_quality);
        // Free up memory (imagedestroy does not delete files):
        @imagedestroy($src_img);
        @imagedestroy($new_img);
        return $success;
    }

    protected function validate($uploaded_file, $file, $error, $index) {
        if ($error) {
            $file->error = $error;
            return false;
        }
        if (!$file->name) {
            $file->error = 'missingFileName';
            return false;
        }
        if (!preg_match($this->options['accept_file_types'], $file->name)) {
            $file->error = 'acceptFileTypes';
            return false;
        }
        if ($uploaded_file && is_uploaded_file($uploaded_file)) {
            $file_size = filesize($uploaded_file);
        } else {
            $file_size = $_SERVER['CONTENT_LENGTH'];
        }
        if ($this->options['max_file_size'] && (
                $file_size > $this->options['max_file_size'] ||
                $file->size > $this->options['max_file_size'])
            ) {
            $file->error = 'maxFileSize';
            return false;
        }
        if ($this->options['min_file_size'] &&
            $file_size < $this->options['min_file_size']) {
            $file->error = 'minFileSize';
            return false;
        }
        if (is_int($this->options['max_number_of_files']) && (
                count($this->get_file_objects()) >= $this->options['max_number_of_files'])
            ) {
            $file->error = 'maxNumberOfFiles';
            return false;
        }
        list($img_width, $img_height) = @getimagesize($uploaded_file);
        if (is_int($img_width)) {
            if ($this->options['max_width'] && $img_width > $this->options['max_width'] ||
                    $this->options['max_height'] && $img_height > $this->options['max_height']) {
                $file->error = 'maxResolution';
                return false;
            }
            if ($this->options['min_width'] && $img_width < $this->options['min_width'] ||
                    $this->options['min_height'] && $img_height < $this->options['min_height']) {
                $file->error = 'minResolution';
                return false;
            }
        }
        return true;
    }

    protected function upcount_name_callback($matches) {
        $index = isset($matches[1]) ? intval($matches[1]) + 1 : 1;
        $ext = isset($matches[2]) ? $matches[2] : '';
        return ' ('.$index.')'.$ext;
    }

    protected function upcount_name($name) {
        return preg_replace_callback(
            '/(?:(?: \(([\d]+)\))?(\.[^.]+))?$/',
            array($this, 'upcount_name_callback'),
            $name,
            1
        );
    }

    protected function trim_file_name($name, $type, $index) {
        // Remove path information and dots around the filename, to prevent uploading
        // into different directories or replacing hidden system files.
        // Also remove control characters and spaces (\x00..\x20) around the filename:
        $file_name = trim(basename(stripslashes($name)), ".\x00..\x20");
        // Add missing file extension for known image types:
        if (strpos($file_name, '.') === false &&
            preg_match('/^image\/(gif|jpe?g|png)/', $type, $matches)) {
            $file_name .= '.'.$matches[1];
        }
        if ($this->options['discard_aborted_uploads']) {
            while(is_file($this->options['upload_dir'].$file_name)) {
                $file_name = $this->upcount_name($file_name);
            }
        }
        return $file_name;
    }

    protected function handle_form_data($file, $index) {
        // Handle form data, e.g. $_REQUEST['description'][$index]
    }

    protected function orient_image($file_path) {
        $exif = @exif_read_data($file_path);
        if ($exif === false) {
            return false;
        }
        $orientation = intval(@$exif['Orientation']);
        if (!in_array($orientation, array(3, 6, 8))) { 
            return false;
        }
        $image = @imagecreatefromjpeg($file_path);
        switch ($orientation) {
              case 3:
                $image = @imagerotate($image, 180, 0);
                break;
              case 6:
                $image = @imagerotate($image, 270, 0);
                break;
              case 8:
                $image = @imagerotate($image, 90, 0);
                break;
            default:
                return false;
        }
        $success = imagejpeg($image, $file_path);
        // Free up memory (imagedestroy does not delete files):
        @imagedestroy($image);
        return $success;
    }

    protected function handle_file_upload($uploaded_file, $name, $size, $type, $error, $index) {
        $file = new stdClass();
        $file->name = $this->trim_file_name($name, $type, $index);
        $file->size = intval($size);
        $file->type = $type;
        if ($this->validate($uploaded_file, $file, $error, $index)) {
            $this->handle_form_data($file, $index);
            $file_path = $this->options['upload_dir'].$file->name;
            $append_file = !$this->options['discard_aborted_uploads'] &&
                is_file($file_path) && $file->size > filesize($file_path);
            clearstatcache();
            if ($uploaded_file && is_uploaded_file($uploaded_file)) {
                // multipart/formdata uploads (POST method uploads)
                if ($append_file) {
                    file_put_contents(
                        $file_path,
                        fopen($uploaded_file, 'r'),
                        FILE_APPEND
                    );
                } else {
                    move_uploaded_file($uploaded_file, $file_path);
                }
            } else {
                // Non-multipart uploads (PUT method support)
                file_put_contents(
                    $file_path,
                    fopen('php://input', 'r'),
                    $append_file ? FILE_APPEND : 0
                );
            }
            $file_size = filesize($file_path);
            if ($file_size === $file->size) {
                if ($this->options['orient_image']) {
                    $this->orient_image($file_path);
                }
                $file->url = $this->options['upload_url'].rawurlencode($file->name);
                foreach($this->options['image_versions'] as $version => $options) {
                    if ($this->create_scaled_image($file->name, $options)) {
                        if ($this->options['upload_dir'] !== $options['upload_dir']) {
                            $file->{$version.'_url'} = $options['upload_url']
                                .rawurlencode($file->name);
                        } else {
                            clearstatcache();
                            $file_size = filesize($file_path);
                        }
                    }
                }
            } else if ($this->options['discard_aborted_uploads']) {
                unlink($file_path);
                $file->error = 'abort';
            }
            $file->size = $file_size;
            $this->set_file_delete_url($file);
        }
        return $file;
    }

    public function get() {
        $file_name = isset($_REQUEST['file']) ?
            basename(stripslashes($_REQUEST['file'])) : null;
        if ($file_name) {
            $info = $this->get_file_object($file_name);
        } else {
            $info = $this->get_file_objects();
        }
        header('Content-type: application/json');
        echo json_encode($info);
    }

    public function post() {
        if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
            return $this->delete();
        }
        $upload = isset($_FILES[$this->options['param_name']]) ?
            $_FILES[$this->options['param_name']] : null;
        $info = array();
        if ($upload && is_array($upload['tmp_name'])) {
            // param_name is an array identifier like "files[]",
            // $_FILES is a multi-dimensional array:
            foreach ($upload['tmp_name'] as $index => $value) {
                $info[] = $this->handle_file_upload(
                    $upload['tmp_name'][$index],
                    isset($_SERVER['HTTP_X_FILE_NAME']) ?
                        $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'][$index],
                    isset($_SERVER['HTTP_X_FILE_SIZE']) ?
                        $_SERVER['HTTP_X_FILE_SIZE'] : $upload['size'][$index],
                    isset($_SERVER['HTTP_X_FILE_TYPE']) ?
                        $_SERVER['HTTP_X_FILE_TYPE'] : $upload['type'][$index],
                    $upload['error'][$index],
                    $index
                );
            }
        } elseif ($upload || isset($_SERVER['HTTP_X_FILE_NAME'])) {
            // param_name is a single object identifier like "file",
            // $_FILES is a one-dimensional array:
            $info[] = $this->handle_file_upload(
                isset($upload['tmp_name']) ? $upload['tmp_name'] : null,
                isset($_SERVER['HTTP_X_FILE_NAME']) ?
                    $_SERVER['HTTP_X_FILE_NAME'] : (isset($upload['name']) ?
                        $upload['name'] : null),
                isset($_SERVER['HTTP_X_FILE_SIZE']) ?
                    $_SERVER['HTTP_X_FILE_SIZE'] : (isset($upload['size']) ?
                        $upload['size'] : null),
                isset($_SERVER['HTTP_X_FILE_TYPE']) ?
                    $_SERVER['HTTP_X_FILE_TYPE'] : (isset($upload['type']) ?
                        $upload['type'] : null),
                isset($upload['error']) ? $upload['error'] : null
            );
        }
        header('Vary: Accept');
        $json = json_encode($info);
        $redirect = isset($_REQUEST['redirect']) ?
            stripslashes($_REQUEST['redirect']) : null;
        if ($redirect) {
            header('Location: '.sprintf($redirect, rawurlencode($json)));
            return;
        }
        if (isset($_SERVER['HTTP_ACCEPT']) &&
            (strpos($_SERVER['HTTP_ACCEPT'], 'application/json') !== false)) {
            header('Content-type: application/json');
        } else {
            header('Content-type: text/plain');
        }
        echo $json;
    }

    public function delete() {
        $file_name = isset($_REQUEST['file']) ?
            basename(stripslashes($_REQUEST['file'])) : null;
        $file_path = $this->options['upload_dir'].$file_name;
        $success = is_file($file_path) && $file_name[0] !== '.' && unlink($file_path);
        if ($success) {
            foreach($this->options['image_versions'] as $version => $options) {
                $file = $options['upload_dir'].$file_name;
                if (is_file($file)) {
                    unlink($file);
                }
            }
        }
        header('Content-type: application/json');
        echo json_encode($success);
    }

} 
```

任何想法，任何帮助都会非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T15:32:15.627

您不应该将类加载为[助手](http://ellislab.com/codeigniter/user-guide/general/helpers.html)：

> 与 CodeIgniter 中的大多数其他系统不同，Helper 不是以面向对象的格式编写的。它们是简单的程序函数。每个辅助函数执行一项特定任务，不依赖于其他函数。

对于该功能，有[库](http://ellislab.com/codeigniter/user-guide/general/libraries.html)：

> 当我们使用术语“库”时，我们通常指的是位于库目录中并在本用户指南的类参考中描述的类。但是，在这种情况下，我们将改为描述如何在 application/libraries 目录中创建自己的库，以保持本地资源和全局框架资源之间的分离。

当您手动加载`$this->load->helper()`或将其放入 CodeIgniter 正在执行的配置数组中时`autoload.php`，您只需转到应用程序文件夹的 helpers 文件夹，然后什么都不做`include_once`。

至于库，它是一样的，但不同的是 CI 将创建一个库类对象的实例并将其附加到它的当前实例，即主要的 CodeIgniter 应用程序实例，您可以使用它访问`get_instance()`

话虽如此，当您期望来自服务器的 json 响应之类的对象时，您得到的是一个常见问题，但您却得到了某种 html 输出，在这种情况下，它必须是 codeigniter 错误页面。这就是为什么您会看到`Error SyntaxError: Unexpected token <`html 标记以该符号开头的原因。

打开 firefox 或 chrome 开发者工具并调试服务器响应，在响应中你应该能够看到 CodeIgniter 的内容（如果有），这将是错误页面和错误描述，当然，如果你有环境设置为显示此类错误。

请参阅我在此处了解如何调试您的错误的[其他回复。](https://stackoverflow.com/questions/18614951/can-i-change-codeigniter-show-error-function-to-return-json-object/21786593#21786593)

# sql-server - 比较两列中的值

> ID：13751457
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:55:09.433
> 
> 标签：sql-server, tsql, sql-server-2012, sql-like

我需要帮助在查询中返回值。考虑下面我的示例，其中 A 列中的值链接到 B 列：

```
Column A             Column B
---------            ---------
45008                AQZ45008D
45008                ABC12345
45007                45007AX
45007                11652019
45007                JMD45007 
```

我所需要的只是返回 A 列中的值位于 B 列某处的行。因此在此示例中，需要返回第 1、3 和 5 行。

我希望这是一个明显的例子。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:57:14.660

你可以试试：

```
SELECT *
FROM Table
WHERE ColumnB LIKE '%' + ColumnA + '%' 
```

我假设这两列是varchar。否则，您可能需要投射它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:03:37.473

不确定您是否希望这些值并行匹配，这将是最简单的，但如果任何值`ColumnB`可以与任何值匹配`ColumnA`

尝试使用：

```
SELECT DISTINCT ColumnA
FROM Table t
WHERE EXISTS (SELECT TOP 1 ColumnB FROM table t2 WHERE t2.ColumnB LIKE '%' + t.ColumnA + '%') 
```

# ssl - OpenSSL SSL_ERROR_WANT_WRITE 在 SSL_write() 期间永远不会恢复

> ID：13751458
> 
> 赞同：2
> 
> 时间：2012-12-06T19:55:14.497
> 
> 标签：ssl, openssl, client-server

我有两个应用程序通过 SSL 相互通信。客户端在 windows 机器上运行，服务器是基于 linux 的应用程序。客户端在启动时向服务器发送大量数据。数据以约 4000 字节的块发送到包含 30 个条目的服务器。我必须发送大约 50000 个条目。

在该传输期间，服务器向客户端发送消息，消息大小约为 4000 字节。之后，客户端的 SSL_write() 开始返回 SSL_ERROR_WANT_WRITE 错误。客户端休眠 10 毫秒，并使用完全相同的参数重试 SSL_write，但是 SSL_write 无限失败。随后它中止。如果它尝试发送一条新消息，我会收到一条错误消息，表明我没有发送与之前相同的中止消息。

错误：1409F07F：SSL 例程：SSL3_WRITE_PENDING：错误的写入重试”

服务器最终会终止连接，因为它已经 60 秒没有收到客户端的消息并重新建立一个新连接。这只是一个仅供参考，真正的问题是如何让 SSL_write 恢复。

如果服务器在接收期间没有发送请求，问题就会消失。如果我将请求的大小从 16K 缩小到 100 字节，问题就不会发生。

SSL CTX MODE 设置为 SSL_MODE_AUTO_RETRY 和 SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER。

有谁知道什么可能导致双方同时传输大量信息会导致此故障。如果这是限制从服务器到客户端的大小之外的限制，我能做些什么来防止它。我担心的是，如果客户没有发送任何东西，我为避免这个问题而应用的限制是一种浪费。

在客户端，我尝试执行 SSL_read 以查看是否需要在写入期间读取，即使我从未收到 SSL_ERROR_PENDING_READ，但缓冲区并没有那么大。大小约为 1000 字节。

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T05:24:58.273

SSL_ERROR_WANT_WRITE - 只有当套接字发送给它一个 EWOULDBLOCK 或 EAGAIN 错误时，OpenSSL 才会返回此错误（我假设您使用的是 OpenSSL）。当发送端缓冲区已满时，套接字发送将给出 EWOUDLBLOCK 错误，这反过来意味着您的服务器没有读取从客户端发送的消息。

因此，本质上，问题在于您的服务器没有读取发送给它的消息。您需要检查您的服务器并修复它，这将自动修复您的客户端问题。

另外，为什么要设置“SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER”选项？SSL 总是希望它尝试发送的记录应该在下一条记录可以发送之前完全发送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T16:31:34.197

事实证明，对于客户端和服务器端应用程序，读取和写入都在一个线程中处理。在我上面描述的完美风暴中，客户端正忙于写作（非阻塞）。然后，服务器决定在处理其 rx 缓冲区之间写入一大组自己的消息。服务器 tx 是一个阻塞调用。服务器写入卡住，读取饥饿，缓冲区填满，我们遇到了死锁场景。

默认的 windows 缓冲区是 8k 字节，因此填充它不需要太多。

架构应该使得双方都有一个单独的线程用于 rx 和 tx 处理。作为一个捷径/期限修复，一次可以增加 rx 缓冲区并限制 tx 端的速率以防止死锁。

# html - 仅 CSS 下拉菜单，在 li:hover 和 child ul 之间有间隙在 IE 中不起作用

> ID：13751459
> 
> 赞同：1
> 
> 时间：2012-12-06T19:55:24.097
> 
> 标签：html, css, internet-explorer

我有一个基本的纯 CSS 下拉菜单，在 Chrome 和 Firefox 中效果很好，但在 IE9 中效果不佳。问题是我正在实施的设计在父项的水平行与其各自的子导航项的子列表之间存在细微差距。

我在父 li 悬停时显示子菜单。子菜单在所有浏览器中都很好。

当我尝试将光标移动到父 li 和子菜单无序列表之间的小（大约 10px）间隙时，就会出现问题。光标实际上并没有离开父 li，因为间隙是通过对 li 应用更大的高度（并且对其子锚元素的高度更小）来形成的，所以我不明白为什么 IE 的行为就像 li:hover 不再发生一旦我的光标不再位于子链接上。

如果我在间隙中快速移动光标，我实际上可以将其移至子菜单并很好地使用它，但这出于可用性原因并不好。

我肯定在这里错过了一些非常明显的东西！

要查看问题，请访问[http://beta.pancreaticcanceraction.org/](http://beta.pancreaticcanceraction.org/)

将“preview2012”添加到该 URL 的末尾以访问该站点（我不想放下整个链接以防它被抓取）。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:13:47.413

如果您将 LI (LI.parent) 的背景设置为红色，您将在 IE 中看到，无论您给它多少额外的高度，它只与包含的 NAV 元素一样高。

我一直在玩弄 IE9 开发工具，试图让它位于顶部和 NAV 容器“外部”，但还没有运气。我想我会发帖帮助你找到正确的方向。

编辑：如果您在 UL.menu 元素上放置“位置：相对”，它可以解决问题。

希望有帮助！

# ios - UIBarButtonSystemItemFlexibleSpace

> ID：13751468
> 
> 赞同：3
> 
> 时间：2012-12-06T19:55:55.530
> 
> 标签：ios, uibarbuttonitem, uitoolbar

苹果文档有这样的说法：

UIBarButtonSystemItemFlexibleSpace 要在其他项目之间添加的空白空间。空间在其他项目之间平均分配。设置此值时，将忽略其他项目属性。

说的有点模糊（究竟什么空间是平均分配的？）所以我写了一个测试方法：

```
-(void) createToolbar {
    BOOL stuffInTopLeftCorner = NO;
    UIToolbar* bar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 1024, 44)];
    self.bar = bar;
    [self addSubview:bar];
    UILabel* titleLabel = [[UILabel alloc]initWithFrame:CGRectZero];
    titleLabel.text = @"Centered title";
    titleLabel.font = [UIFont systemFontOfSize:30];
    [titleLabel sizeToFit];
    CGSize titleSize = [titleLabel bounds].size;
    NSLog(@"titleSize is %g %g", titleSize.width, titleSize.height);
    UIBarButtonItem* titleItem = [[UIBarButtonItem alloc]initWithCustomView:titleLabel];
    UIBarButtonItem* flexibleSpace = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UILabel* leftLabel = [[UILabel alloc]initWithFrame:CGRectZero];
    leftLabel.text = @"Stuff in top left corner";
    leftLabel.font = [UIFont systemFontOfSize:30];
    [leftLabel sizeToFit];
    UIBarButtonItem* topLeftCornerItem = [[UIBarButtonItem alloc]initWithCustomView:leftLabel];
    NSMutableArray* items = [NSMutableArray arrayWithObjects: flexibleSpace, titleItem, flexibleSpace, nil];
    if (stuffInTopLeftCorner) {
        [items insertObject:topLeftCornerItem atIndex:0];
    }
    bar.items = items;
} 
```

这是上面代码的样子：

![在此处输入图像描述](../Images/878eb3b8bf3bb6d721b683caca0c0d6d.png)

如果我将 stuffInTopLeftCorner 更改为 YES，这就是它的样子：

![在此处输入图像描述](../Images/8ffb48446793a82887158cfcf5127ec3.png)

似乎在标题左侧添加某些内容根本不会导致所述标题移动。

我的问题是——这是否意味着它总是以标题为中心，而不管它的两边是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:18:21.307

据我所知，是的，它总是以标题为中心，假设这是可能的。

# c++ - 有没有办法将数组行为作为静态结构数据成员？

> ID：13751471
> 
> 赞同：2
> 
> 时间：2012-12-06T19:55:59.243
> 
> 标签：c++, templates, static-members

我有一种类似以下的机制，用于为我需要处理的有限数量的不同类型的对象检索某些参数：

```
template <class T>
struct params {};

template <>
struct params<FooObj>
{
    static const int paramA = 17;
    static const int paramB = 29;
}; 
```

这简化了我以后的代码，因为在我处理不同对象的 switch 语句中，如果我得到一个，`FooObj`那么我所要做的就是这样的：

```
typedef params<FooObj> paramsT; 
```

然后在该代码片段中，我可以访问参数以使用该`FooObj`通过`paramsT::paramC`或其他方式。

现在我遇到了一个对象，我有这样的东西：

```
template <>
struct params<BarObj>
{
    static const int paramA  = 0;
    static const int paramB  = 9;
    static const int paramC  = 17;
    static const int paramD1 = 18;
    static const int paramE1 = 20;
    static const int paramD2 = 28;
    static const int paramE2 = 30;
    static const int paramD3 = 38;
    static const int paramE3 = 40;
    static const int paramD4 = 48;
    static const int paramE4 = 50;
    static const int paramD5 = 58;
    static const int paramE5 = 60;
    static const int paramD6 = 68;
    static const int paramE6 = 70;
}; 
```

当我处理这个对象时，我开始写如下内容：

```
typedef params<BarObj> paramsT;
BarObj bar;
//load the first 3 params via the above info into bar

int a,b;
for (int i = 1; i <= 6; ++i)
{
    a = doSomethingA(bla + paramsT::paramD1);
    b = doSomethingB(bla + paramsT::paramE1);
    bla.paramD1 = functionOf(stuff,and,a,b);
} 
```

但是当然上面已经`1`硬编码了，理想情况下它会读到这样的内容：

```
typedef params<BarObj> paramsT;
BarObj bar;
//load the first 3 params via the above info into bar

int a,b;
for (int i = 0; i < 6; ++i)
{
    a = doSomethingA(bla + paramsT::paramD[i]);
    b = doSomethingB(bla + paramsT::paramE[i]);
    bla.paramD[i] = functionOf(stuff,and,a,b);
} 
```

尽管对于上述情况，我需要 params 模板专业化是这样的：

```
template <>
struct params<BarObj>
{
    static const int paramA   = 0;
    static const int paramB   = 9;
    static const int paramC   = 17;
    static const int paramD[] = {18, etc..};
    static const int paramE[] = {20, etc..};
}; 
```

它不会编译，因为即使硬编码的数组也是非整数类型。是否有一个简单的补丁来解决这个问题，希望看起来与我目前的使用情况不会有太大的不同？或者有一种方法可以把那个数组的东西放在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:05:29.300

“静态隐式内联函数静态局部变量”破解：

```
template<typename T>
struct params;
struct Bob;
template<>
struct params<Bob> {
  static int paramE(unsigned int idx) {
    static const int v[] = {18, 20, 22, 24};
    return v[idx];
  }
};

#include <iostream>
int main() {
  for(auto i = 0; i < 4; ++i)
    std::cout << params<Bob>::paramE(i) << "\n";
} 
```

请注意，结果值不是“编译时常量”（即，不能用于模板参数之类的东西），但对于编译器优化为常量来说是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:05:37.350

您*可以*初始化静态 const 数组，而不是在类内部，就像在[这个 Stack Overflow question](https://stackoverflow.com/questions/2117313/initializing-constant-static-array-in-header-file)中一样。挑战在于您必须对每个编译单元进行一次初始化，因此通常在源 (.cpp) 文件中完成，因此，它将远离您的其余初始化，这是相当粗略的。

# c++ - 堆排序没有产生正确的输出

> ID：13751477
> 
> 赞同：0
> 
> 时间：2012-12-06T19:56:09.807
> 
> 标签：c++, heap, sorting, heapsort

我正在编写一个函数来使用堆排序对数组进行排序。到目前为止，我有：

```
template <typename Item, typename SizeType>
void heap_sort(Item data[], SizeType size) {
vector<int> v(data,data+size);
SizeType unsorted = size;

make_heap(v.begin(),v.end());

while(unsorted > 1) {
    --unsorted;
    swap(data[0], data[unsorted]);
    reheapify_down(data,unsorted);
}
} 
```

和：

```
template <typename Item, typename SizeType>
void reheapify_down(Item data[], SizeType size) {
SizeType current(0), big_child;
bool heap_ok = false;

while(!heap_ok && 2*current+1 < size) {
    if(2*current+2 > size)
        big_child = 2*current + 1;
    else if(data[2*current+1] > data[2*current+2])
        big_child = 2*current+1;
    else
        big_child = 2*current + 2;

    if(data[current] < data[big_child]) {
        swap(data[current],data[big_child]);
        current = big_child;
    }
    else
        heap_ok = true;
}
} 
```

当我运行程序时，它会输出一个错误排序的数组。有什么我遗漏的或我忽略的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:54:26.940

只是一些建议。

首先，我会编写一个小型代理类，它只会让您在集合上使用基于 1 的索引。堆中使用的所有索引数学都假定基于 1 的索引，并且在一个地方补偿基于 0 的索引比在所有代码中要容易得多。就目前而言，我很难在索引之后确保您`reheapify_down`的正确性。这当然是正确的一般想法，但要确定所有数学运算都是正确的，需要做很多工作。

其次，我会写一个`check_heap`（或其他）你可以用来验证你`make_heap`和你的`reheapify_down`（顺便说一句，我会决定“make_heap”或“heapify”，所以名字可以是“make_heap”和“remake_heap”，或者“heapify”和“reheapify”）。

但是，除此之外，很难确定问题所在，尤其是因为您没有在`make_heap`问题中包含您的代码。如果它不能正常工作，其余的就没有希望了。

# jquery - jQuery——CORS 和标头（Tastypie）

> ID：13751485
> 
> 赞同：0
> 
> 时间：2012-12-06T19:56:54.723
> 
> 标签：jquery, tastypie, cors

我正在通过 CORS 请求访问 API。创建的 API 响应设置新创建资源的“位置”标头。我无法通过 jQuery 的 xhr 对象访问它。

```
var location = xhr.getResponseHeader( 'Location' ); // returns null 
```

服务器设置了我知道的正确的跨站点标头：

```
Access-Control-Allow-Headers:Content-Type,Location 
```

有什么帮助吗？我可以访问 API，因此可以更新任何必要的标头。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:19:54.887

问题是我正在发送标头`Access-Control-Allow-Headers`，如果我理解正确，它会指定客户端将在请求中发送到服务器的标头。相反，我添加了`Access-Control-Expose-Headers: Location`它指定允许客户端查看响应中的哪些标头并且它有效。

# assembly - 英特尔 8080 仿真器测试仪

> ID：13751489
> 
> 赞同：2
> 
> 时间：2012-12-06T19:57:12.303
> 
> 标签：assembly, emulation, instructions, test-suite, intel-8080

我为 Intel 8080 编写了一个模拟器，我想检查我实现的指令是否正确。是否有测试套件或方法来测试每条指令是否正确？

我的模拟器是用 C 编写的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-17T17:23:07.293

不幸的是，喧闹的链接都早已失效。所以我会尝试发布一个不依赖链接的更全面的答案。

您正在寻找的是一套 8080/8085 CPU 诊断练习。我发现三个一起构成了一个非常全面的测试套件。

*   8080/8085 CPU 诊断，1.0 版，由 Microcosm Associates 提供
*   诊断 II，1.2 版，由 Supersoft Associates 进行的 CPU 测试
*   Ian Bartholomew 和 Frank Cringles 的 8080/8085 CPU 锻炼器

这是 Microcosm CPU Diag 测试套件的 ASM：

```
;***********************************************************************
; MICROCOSM ASSOCIATES  8080/8085 CPU DIAGNOSTIC VERSION 1.0  (C) 1980
;***********************************************************************
; Load into virtual altair with: ALTAIR L=TEST.HEX
; Then press F2 to view screen, and 'G' to execute the test.
;
;DONATED TO THE "SIG/M" CP/M USER'S GROUP BY:
;KELLY SMITH, MICROCOSM ASSOCIATES
;3055 WACO AVENUE
;SIMI VALLEY, CALIFORNIA, 93065
;(805) 527-9321 (MODEM, CP/M-NET (TM))
;(805) 527-0518 (VERBAL)
;
        CPU 8080    
        ORG 00100H

        LXI     H, LOLZ
        CALL    MSG
        JMP     CPU ;JUMP TO 8080 CPU DIAGNOSTIC
;
LOLZ:   DB  "MICROCOSM ASSOCIATES 8080/8085 CPU DIAGNOSTIC VERSION 1.0  (C) 1980", 0dh, 0ah, 24h
;
BDOS    EQU     00005H  ;BDOS ENTRY TO CP/M
WBOOT:  JMP     0
;
;MESSAGE OUTPUT ROUTINE
;
MSG:    MOV A,M ; Get data
        CPI '$' ; End?
        RZ
        CALL    PCHAR   ; Output
        INX H   ; Next
        JMP MSG ; Do all
;
;
;CHARACTER OUTPUT ROUTINE
;
PCHAR:  PUSH    PSW
        PUSH    D
        PUSH    H
        MOV E,A
        MVI C,2
        CALL    BDOS
        POP     H
        POP D
        POP PSW
        RET
;
;
;
BYTEO:  PUSH    PSW
        CALL    BYTO1
        MOV E,A
        CALL    PCHAR
        POP PSW
        CALL    BYTO2
        MOV E,A
        JMP PCHAR
BYTO1:  RRC
        RRC
        RRC
        RRC
BYTO2:  ANI 0FH
        CPI 0AH
        JM  BYTO3
        ADI 7
BYTO3:  ADI 30H
        RET
;
;
;
;************************************************************
;           MESSAGE TABLE FOR OPERATIONAL CPU TEST
;************************************************************
;
OKCPU:  DB  0DH,0AH
        DB  "CPU IS OPERATIONAL$"
;
NGCPU:  DB  0DH,0AH
        DB  " CPU HAS FAILED!    ERROR EXIT=$"
;
;
;
;************************************************************
;                8080/8085 CPU TEST/DIAGNOSTIC
;************************************************************
;
;NOTE: (1) PROGRAM ASSUMES "CALL",AND "LXI SP" INSTRUCTIONS WORK!
;
;      (2) INSTRUCTIONS NOT TESTED ARE "HLT","DI","EI",
;          AND "RST 0" THRU "RST 7"
;
;
;
;TEST JUMP INSTRUCTIONS AND FLAGS
;
CPU:    LXI SP,STACK    ;SET THE STACK POINTER
        ANI 0   ;INITIALIZE A REG. AND CLEAR ALL FLAGS
        JZ  J010    ;TEST "JZ"
        CALL    CPUER
J010:   JNC J020    ;TEST "JNC"
        CALL    CPUER
J020:   JPE J030    ;TEST "JPE"
        CALL    CPUER
J030:   JP  J040    ;TEST "JP"
        CALL    CPUER
J040:   JNZ J050    ;TEST "JNZ"
        JC  J050    ;TEST "JC"
        JPO J050    ;TEST "JPO"
        JM  J050    ;TEST "JM"
        JMP J060    ;TEST "JMP" (IT'S A LITTLE LATE,BUT WHAT THE HELL!
J050:   CALL    CPUER
J060:   ADI 6   ;A=6,C=0,P=1,S=0,Z=0
        JNZ J070    ;TEST "JNZ"
        CALL    CPUER
J070:   JC  J080    ;TEST "JC"
        JPO J080    ;TEST "JPO"
        JP  J090    ;TEST "JP"
J080:   CALL    CPUER
J090:   ADI 070H    ;A=76H,C=0,P=0,S=0,Z=0
        JPO J100    ;TEST "JPO"
        CALL    CPUER
J100:   JM  J110    ;TEST "JM"
        JZ  J110    ;TEST "JZ"
        JNC J120    ;TEST "JNC"
J110:   CALL    CPUER
J120:   ADI 081H    ;A=F7H,C=0,P=0,S=1,Z=0
        JM  J130    ;TEST "JM"
        CALL    CPUER
J130:   JZ  J140    ;TEST "JZ"
        JC  J140    ;TEST "JC"
        JPO J150    ;TEST "JPO"
J140:   CALL    CPUER
J150:   ADI 0FEH    ;A=F5H,C=1,P=1,S=1,Z=0
        JC  J160    ;TEST "JC"
        CALL    CPUER
J160:   JZ  J170    ;TEST "JZ"
        JPO J170    ;TEST "JPO"
        JM  AIMM    ;TEST "JM"
J170:   CALL    CPUER
;
;
;
;TEST ACCUMULATOR IMMEDIATE INSTRUCTIONS
;
AIMM:   CPI 0   ;A=F5H,C=0,Z=0
        JC  CPIE    ;TEST "CPI" FOR RE-SET CARRY
        JZ  CPIE    ;TEST "CPI" FOR RE-SET ZERO
        CPI 0F5H    ;A=F5H,C=0,Z=1
        JC  CPIE    ;TEST "CPI" FOR RE-SET CARRY ("ADI")
        JNZ CPIE    ;TEST "CPI" FOR RE-SET ZERO
        CPI 0FFH    ;A=F5H,C=1,Z=0
        JZ  CPIE    ;TEST "CPI" FOR RE-SET ZERO
        JC  ACII    ;TEST "CPI" FOR SET CARRY
CPIE:   CALL    CPUER
ACII:   ACI 00AH    ;A=F5H+0AH+CARRY(1)=0,C=1
        ACI 00AH    ;A=0+0AH+CARRY(0)=0BH,C=0
        CPI 00BH
        JZ  SUII    ;TEST "ACI"
        CALL    CPUER
SUII:   SUI 00CH    ;A=FFH,C=0
        SUI 00FH    ;A=F0H,C=1
        CPI 0F0H
        JZ  SBII    ;TEST "SUI"
        CALL    CPUER
SBII:   SBI 0F1H    ;A=F0H-0F1H-CARRY(0)=FFH,C=1
        SBI 00EH    ;A=FFH-OEH-CARRY(1)=F0H,C=0
        CPI 0F0H
        JZ  ANII    ;TEST "SBI"
        CALL    CPUER
ANII:   ANI 055H    ;A=F0H<AND>55H=50H,C=0,P=1,S=0,Z=0
        CPI 050H
        JZ  ORII    ;TEST "ANI"
        CALL    CPUER
ORII:   ORI 03AH    ;A=50H<OR>3AH=7AH,C=0,P=0,S=0,Z=0
        CPI 07AH
        JZ  XRII    ;TEST "ORI"
        CALL    CPUER
XRII:   XRI 00FH    ;A=7AH<XOR>0FH=75H,C=0,P=0,S=0,Z=0
        CPI 075H
        JZ  C010    ;TEST "XRI"
        CALL    CPUER
;
;
;
;TEST CALLS AND RETURNS
;
C010:   ANI 000H    ;A=0,C=0,P=1,S=0,Z=1
        CC  CPUER   ;TEST "CC"
        CPO CPUER   ;TEST "CPO"
        CM  CPUER   ;TEST "CM"
        CNZ CPUER   ;TEST "CNZ"
        CPI 000H
        JZ  C020    ;A=0,C=0,P=0,S=0,Z=1
        CALL    CPUER
C020:   SUI 077H    ;A=89H,C=1,P=0,S=1,Z=0
        CNC CPUER   ;TEST "CNC"
        CPE CPUER   ;TEST "CPE"
        CP  CPUER   ;TEST "CP"
        CZ  CPUER   ;TEST "CZ"
        CPI 089H
        JZ  C030    ;TEST FOR "CALLS" TAKING BRANCH
        CALL    CPUER
C030:   ANI 0FFH    ;SET FLAGS BACK!
        CPO CPOI    ;TEST "CPO"
        CPI 0D9H
        JZ  MOVI    ;TEST "CALL" SEQUENCE SUCCESS
        CALL    CPUER
CPOI:   RPE     ;TEST "RPE"
        ADI 010H    ;A=99H,C=0,P=0,S=1,Z=0
        CPE CPEI    ;TEST "CPE"
        ADI 002H    ;A=D9H,C=0,P=0,S=1,Z=0
        RPO     ;TEST "RPO"
        CALL    CPUER
CPEI:   RPO     ;TEST "RPO"
        ADI 020H    ;A=B9H,C=0,P=0,S=1,Z=0
        CM  CMI ;TEST "CM"
        ADI 004H    ;A=D7H,C=0,P=1,S=1,Z=0
        RPE     ;TEST "RPE"
        CALL    CPUER
CMI:    RP      ;TEST "RP"
        ADI 080H    ;A=39H,C=1,P=1,S=0,Z=0
        CP  TCPI    ;TEST "CP"
        ADI 080H    ;A=D3H,C=0,P=0,S=1,Z=0
        RM      ;TEST "RM"
        CALL    CPUER
TCPI:   RM      ;TEST "RM"
        ADI 040H    ;A=79H,C=0,P=0,S=0,Z=0
        CNC CNCI    ;TEST "CNC"
        ADI 040H    ;A=53H,C=0,P=1,S=0,Z=0
        RP      ;TEST "RP"
        CALL    CPUER
CNCI:   RC      ;TEST "RC"
        ADI 08FH    ;A=08H,C=1,P=0,S=0,Z=0
        CC  CCI ;TEST "CC"
        SUI 002H    ;A=13H,C=0,P=0,S=0,Z=0
        RNC     ;TEST "RNC"
        CALL    CPUER
CCI:    RNC     ;TEST "RNC"
        ADI 0F7H    ;A=FFH,C=0,P=1,S=1,Z=0
        CNZ CNZI    ;TEST "CNZ"
        ADI 0FEH    ;A=15H,C=1,P=0,S=0,Z=0
        RC      ;TEST "RC"
        CALL    CPUER
CNZI:   RZ      ;TEST "RZ"
        ADI 001H    ;A=00H,C=1,P=1,S=0,Z=1
        CZ  CZI ;TEST "CZ"
        ADI 0D0H    ;A=17H,C=1,P=1,S=0,Z=0
        RNZ     ;TEST "RNZ"
        CALL    CPUER
CZI:    RNZ     ;TEST "RNZ"
        ADI 047H    ;A=47H,C=0,P=1,S=0,Z=0
        CPI 047H    ;A=47H,C=0,P=1,S=0,Z=1
        RZ      ;TEST "RZ"
        CALL    CPUER
;
;
;
;TEST "MOV","INR",AND "DCR" INSTRUCTIONS
;
MOVI:   MVI A,077H
        INR A
        MOV B,A
        INR B
        MOV C,B
        DCR C
        MOV D,C
        MOV E,D
        MOV H,E
        MOV L,H
        MOV A,L ;TEST "MOV" A,L,H,E,D,C,B,A
        DCR A
        MOV C,A
        MOV E,C
        MOV L,E
        MOV B,L
        MOV D,B
        MOV H,D
        MOV A,H ;TEST "MOV" A,H,D,B,L,E,C,A
        MOV D,A
        INR D
        MOV L,D
        MOV C,L
        INR C
        MOV H,C
        MOV B,H
        DCR B
        MOV E,B
        MOV A,E ;TEST "MOV" A,E,B,H,C,L,D,A
        MOV E,A
        INR E
        MOV B,E
        MOV H,B
        INR H
        MOV C,H
        MOV L,C
        MOV D,L
        DCR D
        MOV A,D ;TEST "MOV" A,D,L,C,H,B,E,A
        MOV H,A
        DCR H
        MOV D,H
        MOV B,D
        MOV L,B
        INR L
        MOV E,L
        DCR E
        MOV C,E
        MOV A,C ;TEST "MOV" A,C,E,L,B,D,H,A
        MOV L,A
        DCR L
        MOV H,L
        MOV E,H
        MOV D,E
        MOV C,D
        MOV B,C
        MOV A,B
        CPI 077H
        CNZ CPUER   ;TEST "MOV" A,B,C,D,E,H,L,A
;
;
;
;TEST ARITHMETIC AND LOGIC INSTRUCTIONS
;
        XRA A
        MVI B,001H
        MVI C,003H
        MVI D,007H
        MVI E,00FH
        MVI H,01FH
        MVI L,03FH
        ADD B
        ADD C
        ADD D
        ADD E
        ADD H
        ADD L
        ADD A
        CPI 0F0H
        CNZ CPUER   ;TEST "ADD" B,C,D,E,H,L,A
        SUB B
        SUB C
        SUB D
        SUB E
        SUB H
        SUB L
        CPI 078H
        CNZ CPUER   ;TEST "SUB" B,C,D,E,H,L
        SUB A
        CNZ CPUER   ;TEST "SUB" A
        MVI A,080H
        ADD A
        MVI B,001H
        MVI C,002H
        MVI D,003H
        MVI E,004H
        MVI H,005H
        MVI L,006H
        ADC B
        MVI B,080H
        ADD B
        ADD B
        ADC C
        ADD B
        ADD B
        ADC D
        ADD B
        ADD B
        ADC E
        ADD B
        ADD B
        ADC H
        ADD B
        ADD B
        ADC L
        ADD B
        ADD B
        ADC A
        CPI 037H
        CNZ CPUER   ;TEST "ADC" B,C,D,E,H,L,A
        MVI A,080H
        ADD A
        MVI B,001H
        SBB B
        MVI B,0FFH
        ADD B
        SBB C
        ADD B
        SBB D
        ADD B
        SBB E
        ADD B
        SBB H
        ADD B
        SBB L
        CPI 0E0H
        CNZ CPUER   ;TEST "SBB" B,C,D,E,H,L
        MVI A,080H
        ADD A
        SBB A
        CPI 0FFH
        CNZ CPUER   ;TEST "SBB" A
        MVI A,0FFH
        MVI B,0FEH
        MVI C,0FCH
        MVI D,0EFH
        MVI E,07FH
        MVI H,0F4H
        MVI L,0BFH
        ANA A
        ANA C
        ANA D
        ANA E
        ANA H
        ANA L
        ANA A
        CPI 024H
        CNZ CPUER   ;TEST "ANA" B,C,D,E,H,L,A
        XRA A
        MVI B,001H
        MVI C,002H
        MVI D,004H
        MVI E,008H
        MVI H,010H
        MVI L,020H
        ORA B
        ORA C
        ORA D
        ORA E
        ORA H
        ORA L
        ORA A
        CPI 03FH
        CNZ CPUER   ;TEST "ORA" B,C,D,E,H,L,A
        MVI A,000H
        MVI H,08FH
        MVI L,04FH
        XRA B
        XRA C
        XRA D
        XRA E
        XRA H
        XRA L
        CPI 0CFH
        CNZ CPUER   ;TEST "XRA" B,C,D,E,H,L
        XRA A
        CNZ CPUER   ;TEST "XRA" A
        MVI B,044H
        MVI C,045H
        MVI D,046H
        MVI E,047H
        MVI H,(TEMP0/0FFH)  ;HIGH BYTE OF TEST MEMORY LOCATION
        MVI L,(TEMP0&0FFH)  ;LOW BYTE OF TEST MEMORY LOCATION
        MOV M,B
        MVI B,000H
        MOV B,M
        MVI A,044H
        CMP B
        CNZ CPUER   ;TEST "MOV" M,B AND B,M
        MOV M,D
        MVI D,000H
        MOV D,M
        MVI A,046H
        CMP D
        CNZ CPUER   ;TEST "MOV" M,D AND D,M
        MOV M,E
        MVI E,000H
        MOV E,M
        MVI A,047H
        CMP E
        CNZ CPUER   ;TEST "MOV" M,E AND E,M
        MOV M,H
        MVI H,(TEMP0/0FFH)
        MVI L,(TEMP0&0FFH)
        MOV H,M
        MVI A,(TEMP0/0FFH)
        CMP H
        CNZ CPUER   ;TEST "MOV" M,H AND H,M
        MOV M,L
        MVI H,(TEMP0/0FFH)
        MVI L,(TEMP0&0FFH)
        MOV L,M
        MVI A,(TEMP0&0FFH)
        CMP L
        CNZ CPUER   ;TEST "MOV" M,L AND L,M
        MVI H,(TEMP0/0FFH)
        MVI L,(TEMP0&0FFH)
        MVI A,032H
        MOV M,A
        CMP M
        CNZ CPUER   ;TEST "MOV" M,A
        ADD M
        CPI 064H
        CNZ CPUER   ;TEST "ADD" M
        XRA A
        MOV A,M
        CPI 032H
        CNZ CPUER   ;TEST "MOV" A,M
        MVI H,(TEMP0/0FFH)
        MVI L,(TEMP0&0FFH)
        MOV A,M
        SUB M
        CNZ CPUER   ;TEST "SUB" M
        MVI A,080H
        ADD A
        ADC M
        CPI 033H
        CNZ CPUER   ;TEST "ADC" M
        MVI A,080H
        ADD A
        SBB M
        CPI 0CDH
        CNZ CPUER   ;TEST "SBB" M
        ANA M
        CNZ CPUER   ;TEST "ANA" M
        MVI A,025H
        ORA M
        CPI 037H
        CNZ CPUER   ;TEST "ORA" M
        XRA M
        CPI 005H
        CNZ CPUER   ;TEST "XRA" M
        MVI M,055H
        INR M
        DCR M
        ADD M
        CPI 05AH
        CNZ CPUER   ;TEST "INR","DCR",AND "MVI" M
        LXI B,12FFH
        LXI D,12FFH
        LXI H,12FFH
        INX B
        INX D
        INX H
        MVI A,013H
        CMP B
        CNZ CPUER   ;TEST "LXI" AND "INX" B
        CMP D
        CNZ CPUER   ;TEST "LXI" AND "INX" D
        CMP H
        CNZ CPUER   ;TEST "LXI" AND "INX" H
        MVI A,000H
        CMP C
        CNZ CPUER   ;TEST "LXI" AND "INX" B
        CMP E
        CNZ CPUER   ;TEST "LXI" AND "INX" D
        CMP L
        CNZ CPUER   ;TEST "LXI" AND "INX" H
        DCX B
        DCX D
        DCX H
        MVI A,012H
        CMP B
        CNZ CPUER   ;TEST "DCX" B
        CMP D
        CNZ CPUER   ;TEST "DCX" D
        CMP H
        CNZ CPUER   ;TEST "DCX" H
        MVI A,0FFH
        CMP C
        CNZ CPUER   ;TEST "DCX" B
        CMP E
        CNZ CPUER   ;TEST "DCX" D
        CMP L
        CNZ CPUER   ;TEST "DCX" H
        STA TEMP0
        XRA A
        LDA TEMP0
        CPI 0FFH
        CNZ CPUER   ;TEST "LDA" AND "STA"
        LHLD    TEMPP
        SHLD    TEMP0
        LDA TEMPP
        MOV B,A
        LDA TEMP0
        CMP B
        CNZ CPUER   ;TEST "LHLD" AND "SHLD"
        LDA TEMPP+1
        MOV B,A
        LDA TEMP0+1
        CMP B
        CNZ CPUER   ;TEST "LHLD" AND "SHLD"
        MVI A,0AAH
        STA TEMP0
        MOV B,H
        MOV C,L
        XRA A
        LDAX    B
        CPI 0AAH
        CNZ CPUER   ;TEST "LDAX" B
        INR A
        STAX    B
        LDA TEMP0
        CPI 0ABH
        CNZ CPUER   ;TEST "STAX" B
        MVI A,077H
        STA TEMP0
        LHLD    TEMPP
        LXI D,00000H
        XCHG
        XRA A
        LDAX    D
        CPI 077H
        CNZ CPUER   ;TEST "LDAX" D AND "XCHG"
        XRA A
        ADD H
        ADD L
        CNZ CPUER   ;TEST "XCHG"
        MVI A,0CCH
        STAX    D
        LDA TEMP0
        CPI 0CCH
        STAX    D
        LDA TEMP0
        CPI 0CCH
        CNZ CPUER   ;TEST "STAX" D
        LXI H,07777H
        DAD H
        MVI A,0EEH
        CMP H
        CNZ CPUER   ;TEST "DAD" H
        CMP L
        CNZ CPUER   ;TEST "DAD" H
        LXI H,05555H
        LXI B,0FFFFH
        DAD B
        MVI A,055H
        CNC CPUER   ;TEST "DAD" B
        CMP H
        CNZ CPUER   ;TEST "DAD" B
        MVI A,054H
        CMP L
        CNZ CPUER   ;TEST "DAD" B
        LXI H,0AAAAH
        LXI D,03333H
        DAD D
        MVI A,0DDH
        CMP H
        CNZ CPUER   ;TEST "DAD" D
        CMP L
        CNZ CPUER   ;TEST "DAD" B
        STC
        CNC CPUER   ;TEST "STC"
        CMC
        CC  CPUER   ;TEST "CMC
        MVI A,0AAH
        CMA 
        CPI 055H
        CNZ CPUER   ;TEST "CMA"
        ORA A   ;RE-SET AUXILIARY CARRY
        DAA
        CPI 055H
        CNZ CPUER   ;TEST "DAA"
        MVI A,088H
        ADD A
        DAA
        CPI 076H
        CNZ CPUER   ;TEST "DAA"
        XRA A
        MVI A,0AAH
        DAA
        CNC CPUER   ;TEST "DAA"
        CPI 010H
        CNZ CPUER   ;TEST "DAA"
        XRA A
        MVI A,09AH
        DAA
        CNC CPUER   ;TEST "DAA"
        CNZ CPUER   ;TEST "DAA"
        STC
        MVI A,042H
        RLC
        CC  CPUER   ;TEST "RLC" FOR RE-SET CARRY
        RLC
        CNC CPUER   ;TEST "RLC" FOR SET CARRY
        CPI 009H
        CNZ CPUER   ;TEST "RLC" FOR ROTATION
        RRC
        CNC CPUER   ;TEST "RRC" FOR SET CARRY
        RRC
        CPI 042H
        CNZ CPUER   ;TEST "RRC" FOR ROTATION
        RAL
        RAL
        CNC CPUER   ;TEST "RAL" FOR SET CARRY
        CPI 008H
        CNZ CPUER   ;TEST "RAL" FOR ROTATION
        RAR
        RAR
        CC  CPUER   ;TEST "RAR" FOR RE-SET CARRY
        CPI 002H
        CNZ CPUER   ;TEST "RAR" FOR ROTATION
        LXI B,01234H
        LXI D,0AAAAH
        LXI H,05555H
        XRA A
        PUSH    B
        PUSH    D
        PUSH    H
        PUSH    PSW
        LXI B,00000H
        LXI D,00000H
        LXI H,00000H
        MVI A,0C0H
        ADI 0F0H
        POP PSW
        POP H
        POP D
        POP B
        CC  CPUER   ;TEST "PUSH PSW" AND "POP PSW"
        CNZ CPUER   ;TEST "PUSH PSW" AND "POP PSW"
        CPO CPUER   ;TEST "PUSH PSW" AND "POP PSW"
        CM  CPUER   ;TEST "PUSH PSW" AND "POP PSW"
        MVI A,012H
        CMP B
        CNZ CPUER   ;TEST "PUSH B" AND "POP B"
        MVI A,034H
        CMP C
        CNZ CPUER   ;TEST "PUSH B" AND "POP B"
        MVI A,0AAH
        CMP D
        CNZ CPUER   ;TEST "PUSH D" AND "POP D"
        CMP E
        CNZ CPUER   ;TEST "PUSH D" AND "POP D"
        MVI A,055H
        CMP H
        CNZ CPUER   ;TEST "PUSH H" AND "POP H"
        CMP L
        CNZ CPUER   ;TEST "PUSH H" AND "POP H"
        LXI H,00000H
        DAD SP
        SHLD    SAVSTK  ;SAVE THE "OLD" STACK-POINTER!
        LXI SP,TEMP4
        DCX SP
        DCX SP
        INX SP
        DCX SP
        MVI A,055H
        STA TEMP2
        CMA
        STA TEMP3
        POP B
        CMP B
        CNZ CPUER   ;TEST "LXI","DAD","INX",AND "DCX" SP
        CMA
        CMP C
        CNZ CPUER   ;TEST "LXI","DAD","INX", AND "DCX" SP
        LXI H,TEMP4
        SPHL
        LXI H,07733H
        DCX SP
        DCX SP
        XTHL
        LDA TEMP3
        CPI 077H
        CNZ CPUER   ;TEST "SPHL" AND "XTHL"
        LDA TEMP2
        CPI 033H
        CNZ CPUER   ;TEST "SPHL" AND "XTHL"
        MVI A,055H
        CMP L
        CNZ CPUER   ;TEST "SPHL" AND "XTHL"
        CMA
        CMP H
        CNZ CPUER   ;TEST "SPHL" AND "XTHL"
        LHLD    SAVSTK  ;RESTORE THE "OLD" STACK-POINTER
        SPHL
        LXI H,CPUOK
        PCHL        ;TEST "PCHL"
;
;
;
CPUER:  LXI H,NGCPU ;OUTPUT "CPU HAS FAILED    ERROR EXIT=" TO CONSOLE
        CALL    MSG
        XTHL
        MOV A,H
        CALL    BYTEO   ;SHOW ERROR EXIT ADDRESS HIGH BYTE
        MOV A,L
        CALL    BYTEO   ;SHOW ERROR EXIT ADDRESS LOW BYTE
        JMP WBOOT   ;EXIT TO CP/M WARM BOOT
;
;
;
CPUOK:  LXI H,OKCPU ;OUTPUT "CPU IS OPERATIONAL" TO CONSOLE
        CALL    MSG
        JMP WBOOT   ;EXIT TO CP/M WARM BOOT
;
;
;
TEMPP:  DW  TEMP0   ;POINTER USED TO TEST "LHLD","SHLD",
            ; AND "LDAX" INSTRUCTIONS
;
TEMP0:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
TEMP1:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
TEMP2   DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
TEMP3:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
TEMP4:  DS  1   ;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
SAVSTK: DS  2   ;TEMPORARY STACK-POINTER STORAGE LOCATION
;
;
;
STACK   EQU TEMPP+256   ;DE-BUG STACK POINTER STORAGE AREA
;
        END 
```

其他两个测试套件可以在[Alexander Demin 的 i8080-core repo](https://github.com/begoon/i8080-core)或[我的 fork](https://github.com/JALsnipe/i8080-core)中找到。不幸的是，我只有 Microcosm 测试套件的 asm。

# eclipse - 无法从 Eclipse/Linux 启动 Android 模拟器

> ID：13751499
> 
> 赞同：0
> 
> 时间：2012-12-06T19:57:48.573
> 
> 标签：eclipse, android-emulator, opensuse

我在 openSUSE 12.2 上使用 Eclipse Juno（构建 20120920-0800）来编写 Android 应用程序。

我已经通过将 SDK 解压缩到我的主目录中来安装 SDK（如果我通过 YaST 包安装 SDK，除非我是 root，否则我无法下载东西）。我从 Eclipse Marketplace 安装了 ADT，配置了 SDK 的路径并配置了几个模拟器配置。

我可以在手机上正常运行和调试，我想这同样适用于我的平板电脑，即使我还没有尝试过。

真正的问题是我**无法运行模拟器**。单击`bacarozzo`调试图标会提示我在设备上运行应用程序，但不会显示可用的模拟器。 ![调试屏幕](../Images/652d99f9e518e1a6503629c07bc59748.png)

如果我打开设备管理器，我会看到我创建的虚拟设备，但我无法启动任何设备。进度条到达末尾，我看不到模拟器屏幕，如果我尝试删除模拟器，我会收到实例正在运行的警告......（截图中只有一个，我已经设法删除了另一个） ![ADT 设备管理器](../Images/7357f4617aa9bc7325d202c85b50a5e8.png)

我强烈要求在过时的 Android 版本中测试一些 GUI 功能。我已经在 J​​B 设备上对我的程序中的业务逻辑代码进行了所有现场测试，并且我确信**该**代码可以在任何设备上运行。

现在我只需要向后兼容首选项和布局。

如何在 Linux 中启动模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:05:14.557

幸运的是，我设法从控制台运行了模拟器

```
djechelon@RAYNOR:~/android-sdk-linux/tools> ./emulator-arm -avd Emulator_cell 
```

它栩栩如生，Eclipse 调试将其检测为活动设备

# android - 如何使用 android:maxWidth？

> ID：13751502
> 
> 赞同：30
> 
> 时间：2012-12-06T19:58:06.547
> 
> 标签：android, width

我想设置编辑框的最大宽度。所以我创建了这个小布局：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:maxWidth="150dp" > 

    <EditText 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:ems="10" /> 
</LinearLayout> 
```

但它不起作用，盒子无论如何可能超过150 dp。`android:maxWidth="150dp"`在`EditText`将给出相同的结果。我已阅读（[maxWidth 不适用于 fill_parent](https://stackoverflow.com/questions/13325403/fill-parent-and-maxwidth-doesnt-work)）将最大和最小宽度设置为相同大小应该可以解决它：

```
<EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:maxWidth="50dp"
        android:minWidth="50dp" /> 
```

但事实并非如此。

我在这里找到了解决我的问题的方法： [Setting a maximum width on a ViewGroup](https://stackoverflow.com/questions/5875877/setting-max-width-of-linearlayout-or-other-viewgroup-on-android/8619442#8619442) 这很好用。但我想这个`maxWidth`属性是出于我的原因。应该如何使用？或者有这方面的任何文件吗？我在这个问题上花了几个小时，但仍然不明白如何使用这个简单的属性。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-06T20:00:36.407

> 我想设置编辑框的最大宽度。

在您的示例中：

```
<EditText 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:ems="10" /> 
```

和属性试图设置相同的值`layout_width`。`ems`Android似乎选择了较大的`fill_parent`值而忽略了另一个。当你使用它时：

```
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:maxWidth="50dp"
    android:minWidth="50dp" /> 
```

在这里`ems`和`maxWidth`试图设置相同的值，再次使用更大的值。因此，根据您实际想要的内容，您可以使用：

```
<EditText 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:ems="10" /> 
```

或者如果您更喜欢使用 dp 则`android:ems="10"`替换为。`android:maxWidth="50dp"`

最后，您的 LinearLayout 只有一个孩子 EditText。通常，当这种情况发生时，您可以删除 LinearLayout 标签并单独使用 EditText。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2020-04-27T03:59:35.890

对于那些近年来看到这个问题的人，我们`app:layout_constraintWidth_max="225dp"`现在看到了。将您的布​​局放在约束布局中，并在您想要最大宽度的视图上使用它。

# sql - 如何在 DATEADD() 函数中引用 2 周 - 1 天？

> ID：13751503
> 
> 赞同：0
> 
> 时间：2012-12-06T19:58:10.120
> 
> 标签：sql, sql-server, sql-server-2008

我有一个数据集，它显示了相关工作日的货币即期汇率，并希望提取 10 个最近数据点的值，包括每种货币的参考日期。

数据如下：

```
AsOfDate    Currency    ExchangeRateUSD
9/11/1997   AED -1
9/11/1997   AUD 1.389178
9/11/1997   CAD 1.39125
9/11/1997   CHF 1.4774
9/11/1997   CZK 33.6755
9/11/1997   DKK 6.8203
9/11/1997   HKD 7.7455
9/11/1997   IDR 2943
9/11/1997   JPY 119.77
9/11/1997   KWD -1
9/11/1997   MXN 7.7855
9/11/1997   NOK 7.36715
9/11/1997   NZD 1.579654
9/11/1997   PHP 32.53
9/11/1997   SEK 7.7944
9/11/1997   SGD 1.511
9/11/1997   THB 35.475
9/11/1997   TWD 28.6125
9/11/1997   ZAR 4.698
9/12/1997   AED -1
9/12/1997   AUD 1.386001
9/12/1997   CAD 1.39325
9/12/1997   CHF 1.46475
9/12/1997   CZK 33.449
9/12/1997   DKK 6.7377
9/12/1997   HKD 7.746
9/12/1997   IDR 2933
9/12/1997   JPY 120.815
9/12/1997   KWD -1
9/12/1997   MXN 7.7765
9/12/1997   NOK 7.2844
9/12/1997   NZD 1.575175
9/12/1997   PHP 32.2
9/12/1997   SEK 7.65845
9/12/1997   SGD 1.514
9/12/1997   THB 36.225
9/12/1997   TWD 28.613
9/12/1997   ZAR 4.6865
9/15/1997   AED -1
9/15/1997   AUD 1.387829
9/15/1997   CAD 1.39185
9/15/1997   CHF 1.45175 
```

参考日期为 1999 年 2 月 19 日，我想返回以下数据（示例仅显示两种货币，返回的实际数据将包括所有货币）：

```
 AsOfDate    Currency    ExchangeRateUSD
2/8/1999    EUR 0.888968
2/9/1999    EUR 0.884956
2/10/1999   EUR 0.883275
2/11/1999   EUR 0.885152
2/12/1999   EUR 0.886682
2/15/1999   EUR 0.889957
2/16/1999   EUR 0.894454
2/17/1999   EUR 0.890234
2/18/1999   EUR 0.891107
2/19/1999   EUR 0.901266
2/8/1999    JPY 113.71
2/9/1999    JPY 114.38
2/10/1999   JPY 114.52
2/11/1999   JPY 114.3
2/12/1999   JPY 114.305
2/15/1999   JPY 115.525
2/16/1999   JPY 118.175
2/17/1999   JPY 118.895
2/18/1999   JPY 119.82
2/19/1999   JPY 120.53 
```

对于 1999 年 2 月 25 日的参考日期，我想返回以下数据（同样，实际数据将显示所有货币）：

```
AsOfDate    Currency    ExchangeRateUSD
2/12/1999   EUR 0.886682
2/15/1999   EUR 0.889957
2/16/1999   EUR 0.894454
2/17/1999   EUR 0.890234
2/18/1999   EUR 0.891107
2/19/1999   EUR 0.901266
2/22/1999   EUR 0.906454
2/23/1999   EUR 0.910705
2/24/1999   EUR 0.91295
2/25/1999   EUR 0.904895
2/12/1999   JPY 114.305
2/15/1999   JPY 115.525
2/16/1999   JPY 118.175
2/17/1999   JPY 118.895
2/18/1999   JPY 119.82
2/19/1999   JPY 120.53
2/22/1999   JPY 120.33
2/23/1999   JPY 121.195
2/24/1999   JPY 121.88
2/25/1999   JPY 120.1 
```

As you can see, the number of days covered between the start and end dates will be different depending on the reference date, so I can't use the day DATEPART within DATEADD(). Using the compound 2weeks-1day WILL get me the appropriate range though.

Is there any way to use a compound DATEPART within DATEADD() or another way to do this?

EDIT - I missed a pivotal point...I'd like to do this for multiple currencies with multiple reference dates simultaneously. I have a table of reference dates (#referenceDates) that I'll be joining the exchange rates table (#exchangeRates) to and I'd like to use BETWEEN within a WHERE clause to pull the appropriate dates for each reference date, hence the need for compound DATEPART within DATEADD().

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:11:57.323

For a reference date of `2/25/1999`

```
SELECT TOP(10) *
  FROM DATA
 WHERE Currency = 'JPY'
   AND AsOfDate <= '19990225'
ORDER BY AsOfDate DESC; 
```

For reference, if you actually want 2 weeks - 1 day, a naive expression:

```
DATEADD(D, +1, DATEADD(WK, -2, '19990225')) 
```

But you're better to go with -13 days directly

```
DATEADD(D, -13, '19990225') 
```

Or in your query (but it won't give you 10 data points if you have gaps in the days in your data):

```
SELECT *
  FROM DATA
 WHERE Currency = 'JPY'
   AND AsOfDate <= '19990225'
   AND AsOfDate >= DATEADD(D, -13, '19990225')
ORDER BY AsOfDate ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:10:04.167

It looks like you can get away with:

```
select top 10 *
from YourTable
where AsOfDate <= @refDate
order by AsOfDate desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:11:40.633

Query:

**[SQLFIDDLEExample](http://sqlfiddle.com/#!3/91350/2)**

```
SELECT
a.*
FROM(
SELECT TOP 10
t1.*
FROM tbl t1
WHERE t1.AsOfDate <='2/25/1999'
ORDER BY t1.AsOfDate DESC
)a
ORDER BY a.AsOfDate ASC 
```

Result for 2/25/1999:

```
|                        ASOFDATE | CURRENCY | EXCHANGERATEUSD |
----------------------------------------------------------------
| February, 12 1999 00:00:00+0000 |      JPY |         114.305 |
| February, 15 1999 00:00:00+0000 |      JPY |         115.525 |
| February, 16 1999 00:00:00+0000 |      JPY |         118.175 |
| February, 17 1999 00:00:00+0000 |      JPY |         118.895 |
| February, 18 1999 00:00:00+0000 |      JPY |          119.82 |
| February, 19 1999 00:00:00+0000 |      JPY |          120.53 |
| February, 22 1999 00:00:00+0000 |      JPY |          120.33 |
| February, 23 1999 00:00:00+0000 |      JPY |         121.195 |
| February, 24 1999 00:00:00+0000 |      JPY |          121.88 |
| February, 25 1999 00:00:00+0000 |      JPY |           120.1 | 
```

# symfony - 如何在不选择计算值的情况下对其进行排序

> ID：13751504
> 
> 赞同：0
> 
> 时间：2012-12-06T19:58:11.667
> 
> 标签：symfony, doctrine, dql

我想对计算的标量值从 Doctrine 查询返回的实体进行排序。在简化的 DQL 中是这样的：

```
SELECT a, SOMEFUNC(a.foo,a.bar) AS b 
FROM MyStuff:Thing a 
ORDER BY b 
```

排序有效，但我实际上并不想要标量值`b`，它只是用于排序；我只想要`Thing`实体回来。

但是，使用此查询，返回的每个结果都将是一个数组，其中包含我想要的根对象`[0]`，然后是冗余标量值`[1]`。这很有意义，但这不是我想要的，我不知道如何要求 Doctrine 忽略该值。

这种排序应该如何用 Doctrine 完成？如何在不选择的情况下执行此排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:49:57.157

使用`AS HIDDEN`子句：

```
SELECT a, SOMEFUNC(a.foo,a.bar) AS HIDDEN b 
FROM MyStuff:Thing a 
ORDER BY b 
```

资料来源：[https ://speakerdeck.com/asm89/what-is-new-in-doctrine?slide=19](https://speakerdeck.com/asm89/what-is-new-in-doctrine?slide=19)

# php - 如何使用 CodeIgniter 处理表单验证和批量编辑？

> ID：13751509
> 
> 赞同：1
> 
> 时间：2012-12-06T19:58:23.130
> 
> 标签：php, forms, codeigniter

我正在使用 CodeIgniter 2.1.3。我正在尝试将现有应用程序转换为 CI 应用程序。`form_validation`批量编辑数据时可以使用这些功能吗？我目前的形式是这样的：

```
foreach($cash_flow as $key => $value) {
?>
<tr>
    <td><input type="text" name="historical[<?php echo $value->id; ?>]" value="<?php echo set_value('historical['. $value->id .']', $value->historical); ?>" /></td>
    ...
</tr>
} 
```

我还有其他几个字段，但所有输入名称都是数组格式，括号 ( `values->id`) 中包含记录/行 ID。根据 CI 文档，如果我在输入名称中使用数组，我也必须在验证规则中使用数组。我该怎么做？我是否需要创建一个循环（类似于上面）并遍历我的数据并使用数组括号中的记录 ID？像这样：

```
foreach($input_arr as $key) {
    $this->form_validation->set_rules('historical['. $key .']', 'Historical Value', 'required|clean_dec');
    ....
} 
```

我试过了，但没有用。它只是为每条记录输出一个 CI 验证错误，说明该字段是必需的。我很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:42:42.590

在您设置验证规则的控制器中，将您的 foreach 更改为：

```
foreach($input_arr as $key => $value): 
```

# c# - 数据集行数到文本框

> ID：13751510
> 
> 赞同：0
> 
> 时间：2012-12-06T19:58:28.117
> 
> 标签：c#, sql, dataset

我`DataSet`在 C# 中有一个行数，`textbox9`但我想过滤它，以便它只计算`Status='Closed'`. 我可以在执行此操作之前使用 SQL 语句执行此操作，`DataSet`但我想将所有数据放入单个数据中`DataSet`，然后对其进行过滤。

```
MyCommand = new OleDbDataAdapter("SELECT * FROM [CR$]'", MyConnection);
DataSet dtSet = new System.Data.DataSet();
MyCommand.Fill(dtSet);
bindingSource1 = new BindingSource();
bindingSource1.DataSource = dtSet;
bindingSource1.DataMember = dtSet.Tables[0].TableName;
dataGridView1.DataSource = bindingSource1;
textBox9.Text = dtSet.Tables[0].Select("Status='Closed'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:10:18.323

```
DataView dv = new DataView();
dv = dtSet.Tables[0].DefaultView;
dv.RowFilter = "Status='Closed'"; 
```

# sql-server - 没有足够的小数空格从 varchar 转换/转换为数字？

> ID：13751512
> 
> 赞同：1
> 
> 时间：2012-12-06T19:58:42.647
> 
> 标签：sql-server, tsql

我将一个文件导入到临时表中，并且导入使所有 varchar 类型的数字字段。这些数字字段最终必须转到定义为数字（28,6）的字段，我将无法更改目标。

我遇到的问题是一些字段的小数位数超过 6 位。

总是有蛮力的方法来测试每一行它有多少小数位并且只取你可以使用的东西。有谁知道解决问题的更好方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:05:30.093

T-SQL 将在隐式或显式转换期间自动舍入任何额外的小数位......您不需要进行任何测试。

```
DECLARE
    @VarcharField VARCHAR(50),
    @NumericField NUMERIC(28,6)

SET @VarcharField = '123456789.123456789'
SET @NumericField = @VarcharField

PRINT @NumericField

-- OUTPUT
-- 123456789.123457 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:06:06.983

如果输入值的小数点后超过 6 位也没关系，除非我误解了你。

你可以这样做：

```
select convert(decimal(28,6),'17897986056.1235246346') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:07:17.710

您要排除这些行吗？如果没有，我会简单地使用 ROUND 函数 (http://msdn.microsoft.com/en-us/library/ms175003.aspx)。如果您愿意，这使您能够截断附加数字或四舍五入。

# jquery - Jquery post不保留换行符

> ID：13751517
> 
> 赞同：2
> 
> 时间：2012-12-06T19:58:51.320
> 
> 标签：jquery, post, line-breaks

我有这个 javascript 发布来自各种 div 的数据，但我似乎无法让它保持换行符。

我认为这与我在找到的内容上使用 .text() 的事实有关，这可能根本不保留换行符。我尝试使用 .html() ，但由于某种原因，这使得所有文本都写在嵌入 div 的新行中。

代码如下：

```
<script type="text/javascript">

$(document).ready(function() {

    $("#actor_result").load('xml/actortoxml.php?owner=<?php echo $_SESSION['username'] . "&id=" . $_GET['id']; ?>');
    $('#save_editable').click(function() {
        var name = $(document).find('#actorname').text();
        var current = $(document).find('#currenthealth').text();
        var max = $(document).find('#maxhealth').text();
        var effects = $(document).find('#actoreffects').text();
        var notes = $(document).find('#actornotes').text();

        $.ajax({
            url: 'actor_profile.php',
            type: 'POST',
            data: {
                update: 'true',
                actorid: <?php echo $_GET['id']; ?>,
                actorname: name, currenthealth: current, maxhealth: max, actoreffects: effects, actornotes: notes
            },
            success : function() {
            // gets called when ajax request completes successfully
            $("#actor_result").hide().load('xml/actortoxml.php?owner=<?php echo $_SESSION['username'] . "&id=" . $_GET['id']; ?>').fadeIn(500);     
            },
            error : function(err) {
                // in case of error
                console.log(err);
                alert('error');
            }
        });
    });
});
</script> 
```

编辑，这是从 xml 文件生成的 html：

```
<div id="actor_result" style="display: block;">
    <!--?xml version="1.0"?-->

    <div class="row-fluid row span6 offset3">
        <div class="media well well-small">
            <a class="pull-left" href="#"><img class=
            "media-object img-circle circle128" src=
            "images/avatar/actor/Davius.png"></a>

            <div class="media-body page-header actor-profile">
                <div class="editable_name" contenteditable="true" id=
                "actorname">
                    <h4 class="media-heading">Davius</h4>
                </div><small><strong>awarnhag's minion</strong></small>
            </div><strong>Health:</strong>

            <div class="div_inline editable_hp" contenteditable="true" id=
            "currenthealth">
                17
            </div>/

            <div class="div_inline editable_hp" contenteditable="true" id=
            "maxhealth">
                20
            </div>hp
        </div>

        <h5><span class="label">Effects</span></h5>

        <div class="editable well well-small" contenteditable="true" id=
        "actoreffects">
            Mumblecore bushwick sed, nulla street art dolore delectus wolf
            american apparel artisan sriracha. Laboris seitan hoodie,
            freegan brooklyn letterpress adipisicing chambray mixtape id
            tofu organic butcher small batch. Art party carles readymade
            messenger bag williamsburg. Irony placeat sustainable, high
            life cillum yr sed vinyl pork belly messenger bag williamsburg
            VHS. Occaecat lo-fi readymade gluten-free 3 wolf moon. Ad tofu
            twee, blog nulla mumblecore gentrify brooklyn odio cliche
            selvage put a bird on it pork belly chillwave deserunt. Ea
            assumenda chillwave, keytar velit tumblr pour-over enim VHS
            mcsweeney's blog.aaaa
        </div>

        <h5><span class="label">Notes</span></h5>

        <div class="editable well well-small" contenteditable="true" id=
        "actornotes"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:28:48.683

您可以获取innerHTML并手动替换所有div和brs；

```
$("#id").html()
        .replace(/<(br|p|div)[^>]*>/g, "\n")
        .replace(/<\/?\w+[^>]*>/g, ""); 
```

[http://jsfiddle.net/tarabyte/GsECc/4/](http://jsfiddle.net/tarabyte/GsECc/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:06:28.113

很难从上面的代码片段中确切地确定发生了什么。

您是否尝试在发送（POST）数据之前或收到数据（$.load）之后将**<br>** -tags 转换为“ **\n** ”，反之亦然？**“ #actor_result** ”（div、textarea、input 等）是什么标签类型？

# php - 在 While 循环中排序记录

> ID：13751519
> 
> 赞同：1
> 
> 时间：2012-12-06T19:59:00.993
> 
> 标签：php, mysql

这是问题所在，我不知道如何解决它..假设我有这样的事情：

```
SELECT news_key FROM tblNews (WHERE news_key>100);
  while ($row = mysql_fetch_array($rid)) {
  $key=$row['news_key'];

         SELECT articles from tblMain WHERE news_key=$key;
         while ($row2 = mysql_fetch_array($rid2)) {
         echo ($row['articles']);
         }
  } 
```

现在假设我想按受欢迎程度对文章进行排序，所以我可以将第二个查询更改为这样的内容......

```
 SELECT articles, popularity from tblMain WHERE 
         news_key=$key ORDER BY popularity DESC; 
```

但是现在这行不通了..因为它只是在第一个循环找到记录时抓取记录。另外，我在这里做了一个非常简单的说明，我知道在第一个查询中加入表会做到这一点，但我现实生活示例中的第一个查询有很多计数和分组，所以我担心这不是一个选项. 我还应该提到我涉及分页，因此每次选择页面时都会重新查询第一个查询......

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:05:03.340

假设您不想进行连接（无论出于何种原因，如果您担心锁定表或编写过于复杂的 SQL），您可以将第一个查询中的键加载到数组中，对数组进行排序，然后迭代通过数组运行第二个查询：

```
// SELECT news_key FROM tblNews (WHERE news_key>100);
// Execute query.
$keysArray = array();
while ($row = mysql_fetch_array($rid)) {
    $keysArray[] =$row['news_key'];
}
arsort($keysArray);
foreach ($keysArray as $key) {
    // SELECT articles from tblMain WHERE news_key=$key;
    // Execute query.
    while ($row2 = mysql_fetch_array($rid2)) {
    echo ($row['articles']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:04:44.183

在这种情况下，您必须使用 a`JOIN`将两个表连接在一起并对结果进行排序。您的查询应如下所示：

```
SELECT articles, popularity 
FROM tblNews 
JOIN tblMain 
    ON (tblNews.news_key = tblMain.news_key) 
WHERE news_key > 100 
ORDER BY popularity DESC 
```

这样你应该能够得到正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:34:36.527

感谢您的建议！实际上，我最终接受了您的建议并返回并在第一个查询中加入...这很复杂，但我想我知道了。

非常感谢！

# spring - 一个值的 Spring Property 占位符值

> ID：13751520
> 
> 赞同：0
> 
> 时间：2012-12-06T19:59:03.800
> 
> 标签：spring, properties, dependency-injection, dependency-properties

我试图找出这是否可能：我想要一个属性文件说

`

```
prop.properties: 
classDefA=com.ClassA
classDefB=com.ClassB
classDefC=com.ClassC

classType=classDefA  #or may be classType=classDefB ...

application-context.xml :
...
   <bean id="beanToUse" class="${classType}" />
... 
```

`

在这里，如果在道具文件中，如果我做了classType = classDefA，我希望它把com.ClassA。我探索这条路线的原因之一是因为我只希望类加载器根据属性文件中的值加载其中一个类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:03:54.650

您是否查看过 Spring 配置文件？

[http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

您可以使用不同的配置文件名称定义 bean 定义，并指定要在初始化时使用的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:27:40.007

这应该有效：

```
<util:properties id="props" location="application.properties"/>
<bean id="beanToUse" class="#{props['classType']}" /> 
```

# sql - 如何在“案例”声明中添加第三部分

> ID：13751522
> 
> 赞同：0
> 
> 时间：2012-12-06T19:59:23.480
> 
> 标签：sql, sql-server

我有一个查询，检查无效发票以及是否重新投标。我们不允许“快速销售”在那里重新招标，因为如果快速销售无效，我的查询就会变得混乱。我想做的是，如果“快速销售”已作废......在重新提交的字段显示“快速销售”中，它也不应该检查发票是否已经重新提交，因为我们不允许这样做。我的查询在下面，我们将搜索 t1.Register_Transaction_Type 列以查看“快速”是否是类型。所有其他交易都很好。

```
SELECT        
  t1.Store_Number, 
  t1.Invoice_Number, 
  t1.Invoice_Date, 
  t1.Vehicle_Tag, 
  t1.Void_Reason, 
  vt1.Invoice_Total, 
  t2.Invoice_Number AS [New Invoice #], 
  t2.Vehicle_Tag AS [Vehicle Tag], 
  t2.Invoice_Total AS [New Invoice Total], 
  CASE 
    WHEN t2.Vehicle_Tag IS NULL THEN 'NO'
    WHEN t1.register_transaction_type = 'QUICK' THEN 'Quicksale'
    ELSE 'YES'
  END AS [Re-tendered?], 
  User_Tb.User_Name, 
  t1.Register_Transaction_Type
FROM            
  Invoice_Tb AS t1 
  INNER JOIN Employee_Tb 
    ON t1.Void_Employee_Tax_Payer_Id = Employee_Tb.Tax_Payer_Id 
  INNER JOIN User_Tb 
    ON Employee_Tb.User_Id = User_Tb.User_Id 
  LEFT OUTER JOIN Invoice_Tb AS t2 
    ON t1.Vehicle_Tag = t2.Vehicle_Tag AND 
       t2.Void_Flag = 'n' AND 
       t2.Invoice_Date >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0) AND
       t2.Invoice_Date < DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)
WHERE        
  (t1.Void_Flag = 'y') AND 
  (t1.Invoice_Date >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) 
  AND (t1.Invoice_Date < DATEADD(day, DATEDIFF(day, 0, GETDATE()),0)) 
  AND (t1.Store_Number = '2')
ORDER BY t1.Store_Number, t1.Invoice_Date 
```

下面是我得到的一个例子：你可以看到它只是倾销发票，它没有链接到......

```
-- -------  ---------------------  ------  -------  -------  -------  ---------  ----
2  3******  12/5/2012 12:00:00 AM  REFUND  54.9900  3******  52.9000  Quicksale  user
2  3******  12/5/2012 12:00:00 AM  REFUND  54.9900  3******  59.9800  Quicksale  user
2  3******  12/5/2012 12:00:00 AM  REFUND  54.9900  3******  24.9900  Quicksale  user 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:02:33.450

```
-- code
CASE
    WHEN t2.Vehicle_Tag IS NULL THEN 'NO'
    WHEN [COLUMN] IS [CONDITION]
    -- ...
    ELSE 'YES'
END AS [Re-tendered?] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:00:32.670

你问这个吗？

```
CASE
  WHEN t1.Register_Transaction_Type = 'Quick' THEN 'QuickSale'
  WHEN t2.Vehicle_Tag IS NULL THEN 'NO'
  ELSE 'YES'
  END AS [Re-tendered?] 
```

如果您可以提供一个小表格来显示您所考虑的逻辑，这可能会有所帮助，即对于这种列值组合，我想要这种输出值的分类。

# javascript - Django + jQuery 问题

> ID：13751530
> 
> 赞同：0
> 
> 时间：2012-12-06T19:59:59.763
> 
> 标签：javascript, jquery, django

警告：我对 Django 和 jQuery/Javascript 都很陌生。到目前为止，它把我逼上一堵墙。我想创建一个搜索页面，允许用户从下拉菜单中选择查询参数，然后在文本框中输入他们的查询文本。我还想动态创建更多搜索栏/下拉菜单。我还希望能够显示有关某些下拉菜单选项可用性的注释（例如，“年份可能不适用于所有记录；没有年份信息的记录将不会在没有附加参数的情况下显示。”）

我现在最头疼的是，我的“更多”按钮似乎起到了“提交”按钮的作用，我看不到任何原因。也就是说，不是显示更多的搜索表单，而是单击“更多”按钮将文本框中的内容传输到 url，就像“提交”应该做的那样。我不知道这是否是我的 javascript 的问题，或者 Django 处理表单的方式，或者什么。就像我说的那样，我完全被这些东西弄湿了，我敢肯定这是我忽略的一些愚蠢的东西，尽管 JSlint 说一切都很好。有人请帮助我。

代码：

```
var i, i_str, sel_str, add_form, shownote, changeval, changebool, form_array,more_array, note_array, selected_str;
$(document).ready(function () {
i = 1;
i_str = i.toString();
sel_str = (i - 1).toString();
add_form = function () {
    form_array = [
        '<p><form id="form' + i_str + '" action="" method="get">',
        '<select id="row" name="row">',
        '<option value="dish_name">Name</option>',
        '<option value="year">Year</option>',
        '<option value="period">Five-Year Period</option>',
        '<option value="location">Location</option>',
        '<option value="ingredient">Main Ingredient</option>',
        '<option value="course">Course or Dish Type</option>',
        '</select>',
        '<label for="query">Dish Name</label>',
        '<input type="text" name="dish_name" id="query"></input>',
        '<button id="more">More</button>',
        '<input type="submit" value="Search"></input>'
    ];
    more_array = [
        '<select id="bool" name="bool">',
        '<option value="none" selected="selected">    </option>',
        '<option value="and">AND</option>',
        '<option value="or">OR</option>',
        '<option value="and_not">AND NOT</option>',
        '<option value="or_not">OR NOT</option>',
        '</select>'
    ];
    note_array = [
        '<p class="note"></p>',
        '</form></p>'];
    $("#search").append(form_array.join("\n"));
    $("option:eq(" + sel_str + ")").attr("selected", "selected");
    $("label").text = $(($("this select").val).text);
    $("select#row").change(shownote());
    $("button").click(function () {
        $('input[type="submit"]').hide();
        $(".search").append(more_array.join("\n"));
    });
    i++;
};
$(document).ready(add_form());
});
$(document).ready(function () {
shownote = function () {
    switch ($(this).val) {
    case "year":
        $(".note").append("Note: Year information may not be available for all dishes. Dishes without years will not be returned without additional search criteria.<br />");
        break;
    case "period":
        $(".note").append("Note: Please enter periods in YYYY-YYYY format. Period information may not be available for all dishes. Dishes without periods will not be returned without additional search criteria.<br />");
        break;
    case "location":
        $(".note").append("Note: Location information may not be available for all dishes. Dishes without location information will not be returned without additional search criteria.<br />");
        break;
    }
};
});
$(document).ready(function () {
changeval = function () {
    var changed_to = $("#row").val, get_new_label = function (changed_to) {switch (changed_to) {
    case "dish_name":
        return "Dish Name";
    case "year":
        return "Year";
    case "period":
        return "Five-Year Period";
    case "location":
        return "Location";
    case "ingredient":
        return "Main Ingredient";
    case "course":
        return "Course or Dish Type";
    }
        };
    $('this label[for="query"]').innerHTML = get_new_label(changed_to);
    $('this input[id="query"]').attr("name", changed_to);
};
});
$(document).ready(function () {
changebool = function () {
//something that changes the boolean values of the search string
};
});
$("#form" + i_str + " #row").change(changeval());
$("#form" + i_str + " #row").change(shownote()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:05:38.737

有一点我可以评论你的 javascript 的结构和标记的输出。虽然这不是您的要求，但如果您愿意，我很乐意提供帮助。

要防止您的按钮发送：

```
<button type='button'>My button<button> 
```

如果你好奇，这里是一个参考：

> 未指定类型属性的按钮元素与类型属性设置为“提交”的按钮元素表示相同的事物。

[http://dev.w3.org/html5/markup/button.html](http://dev.w3.org/html5/markup/button.html)

# html - 当 > 65535 个字符 Chrome、Safari 时，pre 元素中的文本不显示

> ID：13751532
> 
> 赞同：1
> 
> 时间：2012-12-06T20:00:07.920
> 
> 标签：html, google-chrome, safari, pre

我有一个 <pre> 元素，我正在填充大量文本（在本例中约为 72000 个字符）。在 chrome 和 safari 中，我注意到 <pre> 中的文本在 65535 字符标记处被分成两部分。我可以这样说，因为在检查器中，我可以选择两个文本块，类似于我选择元素的方式。

您会认为在这种情况下，您会看到前 65535 个字符，但实际上我看到的是第二个字符块，而前 65535 个字符是隐藏的。我认为这是因为元素内的文本包含转义的 XML。

<pre> 元素内的文本有没有办法绕过这个字符限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:16:44.990

文本节点有最大内存限制，在这种情况下似乎是 65535 字节。因此，当您的文本大于该值时 - 它将被放置在两个文本节点中。

不知道你的意思是什么`"while the first 65535 characters are hidden"`，我在这里试过：http: [//jsfiddle.net/valentinas/dv99r/1/](http://jsfiddle.net/valentinas/dv99r/1/)它在 Chrome 23 上看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:10:12.240

请注意，在 PRE 中，行长度限制为 80 个字符。在段落中换行需要一个换行符。要准确地打破一个段落，需要两个换行符。

如果重排 text/plain，它仍应遵循段落结构，而不仅仅是中断长行。无论对于移动设备来说多么必要，这仍然是个问题。

默认情况下，它不应该中断并且应该横向滚动行。

纯文本的这种先例可以追溯到远程打印，并且是编程和编译器输入的基础。像微软一样打破它，我会很生气。

如果应用程序的限制为 64kio，则可以将其更改为在段落中中断，这样它们就不会被拆分。

# java - Java 的 SocketChannel$read() 是否同步输出缓冲区？

> ID：13751538
> 
> 赞同：0
> 
> 时间：2012-12-06T20:00:36.933
> 
> 标签：java, networking, nio, synchronized, channels

Java 的 SocketChannel.read() 方法是否同步输出缓冲区？

换句话说：传递给`read(ByteBuffer)`java.nio.channels.SocketChannel （基本上是任何通道）中的方法的 ByteBuffer 参数是否存在锁定。我需要知道这一点，所以我没有不必要的同步块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:21:11.510

SocketChannel 的 Java-Doc 说：

*   套接字通道可以安全地被多个并发线程使用。他们
*   支持并发读写，但最多可以有一个线程
*   读取，并且在任何给定时间最多可以有一个线程正在写入。链接
*   #connect connect} 和 {@link #finishConnect finishConnect} 方法是
*   相互同步，并尝试启动读取
*   或在调用这些方法之一时写入操作
*   进度将阻塞，直到该调用完成。

# iphone - 我可以在 applicationWillTerminate 中保持应用程序处理多少时间？

> ID：13751539
> 
> 赞同：1
> 
> 时间：2012-12-06T20:00:44.590
> 
> 标签：iphone, objective-c

在应用程序被操作系统本身停止之前，我可以在 applicationWillTerminate 委托中终止之前保持我的应用程序处理多长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:13:14.290

根据[Apple 编程指南](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，应用程序在终止前有 5 秒的时间。在页面上搜索“应用程序终止”。

# android - GTV 或 Android 是否使用 HLS 属性 RESOLUTION / CODECS？

> ID：13751541
> 
> 赞同：1
> 
> 时间：2012-12-06T20:00:54.627
> 
> 标签：android, http-live-streaming, google-tv

我们正在将多比特率 HLS 视频流式传输到 Android 和 Google TV 设备。目前我们的 m3u8 变体播放列表（即触发播放的初始 m3u8）不包括 RESOLUTION 和 CODECS 属性。所以我们文件中的一个片段将是：

```
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1459829
http://www.somedomain.com/somefolder/medium.m3u8 
```

而如果我们包含额外的属性，相同的片段将是：

```
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1459829,RESOLUTION=530x424,CODECS="mp4a.40.5,avc1.4d401f"
http://www.somedomain.com/somefolder/medium.m3u8 
```

我的问题是，Android 和 Google TV 中的视频播放器是否使用了这些额外属性？使用它们有什么意义吗？

我问的原因是，当这些播放器在同一个播放列表中从一个比特率切换到另一个比特率时，我们经常会看到短暂的停顿。这些额外的属性会对这种行为产生任何影响吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:02:28.930

如果您查看[Apple 的示例流](https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_4x3/bipbop_4x3_variant.m3u8)，您会发现他们将其中的一些内容放入：

> #EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=232370,CODECS="mp4a.40.2,avc1.4d4015"

这些是有用的提示，可帮助您确定设备的最佳选择。

# cocos2d-iphone - Cocos2d 不规则形状精灵

> ID：13751543
> 
> 赞同：0
> 
> 时间：2012-12-06T20:01:08.413
> 
> 标签：cocos2d-iphone, sprite, shape, vertex

嗨，我正在开发 cocos2d 游戏，这是一款带有风景和目标的射击游戏，您面前的目标就像在真实的射击场中一样。对于子弹撞击，我使用粒子效果，在屏幕上的某个点撞击，当撞击目标时，它会播放简单的动画并落在地上。我的游戏非常适合矩形目标，但我也想使用真实的身体形状。所以当粒子撞击身体时它会掉下来。我想使用轮廓跟踪精灵，所以当粒子在腿之间或肩膀之间撞击时，头部射击失败。我使用此代码来检测粒子何时撞击正常矩形目标的目标。

//Sustem 是我的粒子(bullet) CGRect projectileRect = [enemy boundingBox];

```
if ( CGRectContainsPoint(projectileRect, system.position)) {
    [enemy runAction:_walkAction];} 
```

我尝试使用 vertexHelper 物理编辑器和其他工具但没有成功，我不希望碰撞检测仅在粒子位于某些跟踪点之间时运行某些动作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:02:35.553

我感觉到你的痛苦。没有简单的方法来检测非方形碰撞。您可以使用 PhysicsEditor 并遵循 Ray 的教程： [如何使用 box2d 进行碰撞检测](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)。我讨厌实现物理引擎的想法（在我看来，这是草率的），以便我可以使用非方形精灵。还有其他方法可以解决它，例如贝塞尔曲线，但在您的情况下（目标射击），我怀疑您将需要尽可能高的准确性。PhysicsEditor 和 box2d/chipmunk 将提供该功能。

# ios - 从 iTunesConnect 中删除此产品 ID（应用内购买）后，用户能否恢复购买的非消耗性产品？

> ID：13751544
> 
> 赞同：3
> 
> 时间：2012-12-06T20:01:10.227
> 
> 标签：ios, iphone, in-app-purchase

这是一种情况。用户通过应用内购买机制购买了一些非消耗性产品（一旦购买，该产品应该可供用户在任何地方使用并自动恢复）。一段时间后，开发人员决定在 iTunes Connect 中更新分配给此应用的应用内购买列表，并删除（或从销售中移除）相应的应用内购买产品 ID。

问题是如果用户出于某种原因删除了之前购买的内容然后决定恢复它（或在新设备上安装应用程序并为已完成的交易激活恢复机制）会发生什么？

是否可以停止销售特定产品（并删除相应的应用内购买），同时为已经购买的用户保持恢复工作？

提前致谢。

# ruby-on-rails - rails ssh 密码安全性

> ID：13751547
> 
> 赞同：2
> 
> 时间：2012-12-06T20:01:13.847
> 
> 标签：ruby-on-rails, ssh

我们有一个 Rails 应用程序需要通过 ssh 连接到远程服务器（unix）并执行一些命令行操作。我对安全性不太了解，所以寻求建议。目前，控制器接收来自视图的提交，在 params 散列中带有密码（未散列，或任何东西）。然后我们使用 Net::SSH gem ssh 到远程服务器并做一些事情。这似乎是各种不安全的。我们的想法是：

*   通过 SSH 设置公钥身份验证，因此不需要 pw（我们的用户数量很少，所以设置这个没有问题）

或者

*   在视图中散列密码，在控制器中解码，然后调用 ssh 命令

或者

*   在视图中对 pw 进行散列和加盐？（真的不知道这是如何工作的，只是一个想法）

任何文章或解释的链接，非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:10:59.337

使用公钥身份验证，您只是在您的网络服务器和您要连接到的服务器之间进行身份验证。因此，如果我了解您的布局，那么访问该页面的任何人都不需要密码即可进入。如果您通过帖子传递密码，您可以简单地使用类似这样的方式从日志中过滤它

```
filter_parameter_logging :password 
```

在您的应用程序控制器中。然后它只是在内存中传递，而不是存储在任何静态的地方。尽管通过 javascript 在视图中进行散列和加盐处理，然后在控制器中解码，但如果您不使用 SSL，可能仍然是一个好主意。我当然不会反对实施相当简单的额外安全措施......

编辑：看起来在 Rails 3 中过滤参数的方法是

```
config.filter_parameters += [:password] 
```

在 config/application.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:26:59.087

我会投票给你的第一个选项——公钥认证。人们需要知道的密码越少越好。除非您的表单使用 HTTPS (SSL) 显示，否则密码有点不安全，并且正如 @Scott S 在他的回答中指出的那样，它确实会出现在日志等意想不到的地方，除非您过滤它。

使用 ssh 设置公钥身份验证的最常见方法是使用具有空密码的密钥。更安全的方法可能是使用`ssh-agent`，只要服务器本身是安全的（特别是请求服务器的私钥），这可能不是必需的。

# html - css动画字体上奇怪的蓝色和橙色边缘

> ID：13751553
> 
> 赞同：1
> 
> 时间：2012-12-06T20:01:56.620
> 
> 标签：html, css, css-transitions

我在使用 CSS3 动画的完整条形符号上看到了一些奇怪的行为。在某些浏览器中，符号沿其两侧形成蓝色和橙色边缘。一直无法弄清楚为什么。

CSS：

```
/* blink cursor*/
span#textblink {
color: #fff;
font-family: "Lucida Console";
animation: colorPulse 0.2s infinite alternate;  
-moz-animation: colorPulse 0.2s infinite alternate; 
-webkit-animation: colorPulse 0.2s infinite alternate;
-o-animation: colorPulse 0.2s infinite alternate;
} 
```

HTML：

```
<div id="linkbg">
<a href="developers.html" id="dev-link">DreaMLer::Wanted.developers()</a>
<span id="textblink">█&lt;/span>
</div> 
```

示例页面：[Dreamler.se](http://dreamler.se/index.html) - 效果似乎在很短的时间内发展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:51:13.800

哦，讽刺。

这对我来说真的像一个浏览器错误。我能够在 Chrome 23.0.1271.95 m 中偶尔重现它。看起来确实是字符略微溢出预期区域以及外部区域未正确重绘的问题。正方形左侧的蓝色最有意义，当您突出显示文本然后清除突出显示（蓝色）时，左侧会留下一条 1px 的蓝线。另请注意，当您突出显示单个矩形字符时，突出显示在左侧和右侧丢失了大约 1px。

我尝试过的一件事是在文本周围添加 1px 黑色边框：

```
span#textblink {
    color: #FFF;
    animation: colorPulse 0.2s infinite alternate;  
    -moz-animation: colorPulse 0.2s infinite alternate; 
    -webkit-animation: colorPulse 0.2s infinite alternate;
    -o-animation: colorPulse 0.2s infinite alternate;

    border: 1px solid black;
} 
```

这似乎解决了这个问题，但是就像我们已经看到的那样，这个问题是零星的，所以它可能只是避开了我的测试。

否则，您可能会陷入以下三个选项之一：

*   寻找另一个稍小的字符（可能使用不同的字体）
*   使用 jQuery 为角色设置动画
*   如果一切都失败了，请使用 gif。

# php - 如何将动态生成的图像保存到我的数据库中？

> ID：13751555
> 
> 赞同：0
> 
> 时间：2012-12-06T20:02:02.500
> 
> 标签：php, javascript, html

我有一个将用户签名捕获为 SVG 的 HTML 页面。我在页面上将其转换为 .png 并将其放入图像容器中。

我如何利用它进入数据库？我知道如何使用：`<input type="file" />`但我不知道如何将`<img />`元素传递给 PHP。

## 这会将我的 SVG 更改为 PNG

```
 $("#save").click(function(){
          var datapair = sigdiv.jSignature("getData", "svg");
          var i = new Image();
          i.src = "data:" + datapair[0] + "," + datapair[1];
          $(i).appendTo($("#outputSvg"));

          var canvas = document.getElementById("canvas");

          canvg(canvas, datapair[1]);

          var img = canvas.toDataURL("image/png");
          $("#outputRaster").append("<img src='"+img+"'/>");
        }); 
```

如何获取`<img />`我生成的标签`<div id='outputRaster'>`并将其传递给我的 PHP？我知道如何将它放入数据库，它实际上只是将图像从我的视图层获取到我的 PHP 页面，该页面仅用于数据访问。

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:04:35.043

将图像另存为文件。将文件路径存储在数据库中。

莱昂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:04:29.933

如果您谈论的是图像本身，请查找 BLOB（它们代表二进制大对象）。它们是在数据库中存储大型二进制数据的方式。

如果你在谈论标签，你会像存储任何其他文本一样存储它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:22:30.607

假设您只需要保存图像的路径（您的图像存储在服务器中，或者您从互联网上使用它。）

```
 $("#save").click(function(){
      var datapair = sigdiv.jSignature("getData", "svg");
      var i = new Image();
      i.src = "data:" + datapair[0] + "," + datapair[1];
      $(i).appendTo($("#outputSvg"));

      var canvas = document.getElementById("canvas");

      canvg(canvas, datapair[1]);

      var img = canvas.toDataURL("image/png");
      $("#outputRaster").append("<img src='"+img+"'/>");
      imageTag = "<img src='"+img+"'/>";
      //$.ajax( {url : yourUrl , data: imageTag} );
    }); 
```

如果您需要使用 jQuery 上传图片，请阅读本文：[链接](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

# popup - 如何将此注册/选择加入表格变成弹出框？

> ID：13751558
> 
> 赞同：0
> 
> 时间：2012-12-06T20:02:08.163
> 
> 标签：popup

我正在尝试将这个选择加入表单变成一个带有定时延迟和点亮背景的弹出框。例如，当访问者访问我的网站时，它会在 10 秒后直接出现在屏幕中央。他们还可以选择关闭该框，但他们仍然可以在背景中看到网站，变暗。选择加入框的代码如下。任何建议表示赞赏。

```
<form method="post" action="http://oi.vresp.com?fid=524a3264c1" target="vr_optin_popup" onsubmit="window.open( 'http://www.verticalresponse.com', 'vr_optin_popup', 'scrollbars=yes,width=600,height=450' ); return true;" >

  <div style="font-family: verdana; font-size: 11px; width: 160px; padding: 10px; border: 1px solid #0D2EC0D; background: #540DEC;">
    <strong><span style="color: #D2EC0D;">Enter Email For Updates</span></strong>
    <p style="text-align: right; margin-top: 10px; margin-bottom: 10px;"><span style="color: #f00;">* </span><span style="color: #333333">required</span></p>
    <label style="color: #D2EC0D;">Email Address:</label>    <span style="color: #f00">* </span>
    <br/>
    <input name="email_address" size="15" style="margin-top: 5px; margin-bottom: 5px; border: 1px solid #999; padding: 3px;"/>
    <br/>
    <input type="submit" value="Next" style="margin-top: 5px; border: 1px solid #999; padding: 3px;"/><br/>
    <br/><span style="color: #333333"><a title="Email Marketing by VerticalResponse" href="http://www.verticalresponse.com">Email Marketing</a> by VerticalResponse</span>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:16:59.967

制作您的 div 并为其提供 id 然后使用 jquery 将其用作弹出窗口

```
$('#IdofElement').dialog('option', 'modal', true); 
```

你需要 jquery 主文件来使用它

[http://jqueryui.com/dialog](http://jqueryui.com/dialog)

# android - Android NDK：没有存档符号表

> ID：13751560
> 
> 赞同：5
> 
> 时间：2012-12-06T20:02:18.183
> 
> 标签：android, linker, android-ndk

我正在尝试使用`FFTW`2.1.5`.cpp`版本的`FFTW`. 我使用 configure & make 命令对其进行了编译，并尝试将其用作预构建库。在我的`NDK`项目中，所有内容都可以正常编译，但是在链接时出现以下错误：

```
Compile++ thumb  : water <= vertex.cpp
Compile++ thumb  : water <= face.cpp
Compile++ thumb  : water <= Solver.cpp
Compile++ thumb  : water <= Water.cpp
SharedLibrary  : libwater.so
/Users/Xavi/Documents/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: /Users/Xavi/Documents/workspace/mmm/obj/local/armeabi/libfftw.a: no archive symbol table (run ranlib) 
```

我的 Android.mk 代码如下

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := fftw
LOCAL_SRC_FILES := fftw/lib/libfftw.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := water
LOCAL_C_INCLUDES := $(LOCAL_PATH)/water/include
LOCAL_SRC_FILES := \
water/src/vertex.cpp \
water/src/face.cpp \
water/src/Solver.cpp \
water/src/Water.cpp 
LOCAL_STATIC_LIBRARIES := fftw
include $(BUILD_SHARED_LIBRARY) 
```

我做错了什么，还是`FFTW`以不同的方式编译库更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-16T08:29:51.150

这对我有用。

```
LOCAL_PATH := $(call my-dir)
ROOT_PATH := $(LOCAL_PATH)

include $(call all-subdir-makefiles)
include $(CLEAR_VARS)

LOCAL_PATH = $(ROOT_PATH)
LOCAL_CFLAGS := -Wall -Wextra

LOCAL_MODULE    := water

LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog
LOCAL_STATIC_LIBRARIES := fftw3
LOCAL_SRC_FILES := \
water/src/vertex.cpp \
water/src/face.cpp \
water/src/Solver.cpp \
water/src/Water.cpp

include $(BUILD_SHARED_LIBRARY) 
```

我使用 android ndk 工具链来构建 fftw 这是我的 build.sh。把它放在你的android项目文件夹中并运行它并将fftw文件夹放在父文件夹中

```
#!/bin/sh
# fftw3/build.sh
# Compiles fftw3 for Android
# Make sure you have NDK_ROOT defined in .bashrc or .bash_profile

INSTALL_DIR="`pwd`/app/jni/fftw3"
SRC_DIR="`pwd`/../fftw-3.3.4"

cd $SRC_DIR

export
  PATH="<your path>/android-ndk-r11c/toolchains/arm-linux-androideabi-  4.9/prebuilt/darwin-x86_64/bin:$PATH"
export SYS_ROOT="<your path>/android-ndk-r11c/platforms/android-17/arch-arm/"
export CC="arm-linux-androideabi-gcc --sysroot=$SYS_ROOT"
export LD="arm-linux-androideabi-ld"
export AR="arm-linux-androideabi-ar"
export RANLIB="arm-linux-androideabi-ranlib"
export STRIP="arm-linux-androideabi-strip"

mkdir -p $INSTALL_DIR
./configure --host=arm-linux-androideabi --build=x86_64-apple-darwin --   
prefix=$INSTALL_DIR LIBS="-lc -lgcc"

make 
make install 

exit 0 
```

你会在 app/jni 中找到 fftw 文件夹，它将包括 bin、include、lib、share 文件夹，在 lib 文件夹中你会找到 libfftw3.a

# c - 向量化具有间接访问的循环

> ID：13751561
> 
> 赞同：1
> 
> 时间：2012-12-06T20:02:21.580
> 
> 标签：c, performance, optimization, vectorization, simd

我有以下代码段，它是应用程序中的热点。由于`for`矢量相关性，循环未矢量化。有没有办法重写这个循环以使其运行得更快。

```
#define  NUM_KEYS  (1L << 20)
#define  NUM_BUCKETS (1L << 10)    
int i,k;
int shift = (1L << 11);
int key_array[NUM_KEYS],key_buff[NUM_KEYS];
int bucket_ptrs[NUM_BUCKETS];

for( i=0; i<NUM_KEYS; i++ )  
{
    k = key_array[i];
    key_buff[bucket_ptrs[k >> shift]++] = k;
} 
```

我尝试的一种方法是创建一个临时数组来保存`key_array`.

```
for( i=0; i<NUM_KEYS; i++ )  
{
        key_arrays[i] = key_array[i] >> shift;
}
for( i=0; i<NUM_KEYS; i++ )  
{
    k = key_array[i];
    j = key_arrays[i];
    key_buff[bucket_ptrs[j]++] = k;
} 
```

在这里，第一个循环被矢量化。但总体来说性能并没有什么提升。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:29:36.793

> 为什么循环不可矢量化？

这是因为您在这里有非顺序的内存访问：

```
key_buff[bucket_ptrs[k >> shift]++] = k; 
```

`bucket_ptrs`确定访问的索引`key_buff`。由于这些索引无处不在，因此内存访问是非顺序的。

目前，x86 处理器仅支持 SIMD 加载/存储到连续的内存块。（理想情况下也对齐）

如果您希望它矢量化，您将需要 AVX2 的收集/分散指令。那些不存在，但应该在下一代英特尔处理器中出现。

> 在这里，第一个循环被矢量化。但总体来说性能并没有什么提升。

这是因为您要添加额外的循环开销。所以你现在做了两次传球`key_array`。如果有的话，我很惊讶它没有*变慢*。

> 有没有办法重写这个循环以使其运行得更快。

我对此表示怀疑——至少在不改变算法的情况下是这样。至少，您将希望`key_buff`舒适地适应您的 L1 缓存。

AVX2 会让它矢量化，但问题`key_buff`是 4MB。这不适合较低级别的缓存。所以即使是 AVX2 也可能没有多大帮助。您将完全受内存访问的约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:24:33.200

可能让您感到困扰的是，虽然您对 key_array 的访问是顺序的，并且 bucket_ptrs 足够小以适合 L1，但您对 key_buff 的访问却无处不在。

不过，您正在做的事情看起来像是基数排序中的一个步骤。如果这实际上是您正在做的事情，您可能会通过首先将存储桶的数量减少到 32 或 64 个左右，然后对最重要的 5 或 6 位进行排序来提高性能。然后你有一大堆小数组，其中大部分可能适合缓存，你可以使用另一遍基数排序对它们中的每一个进行排序。

# objective-c - 方法名称和“from”和“with”的使用

> ID：13751562
> 
> 赞同：1
> 
> 时间：2012-12-06T20:02:21.127
> 
> 标签：objective-c, ios, xcode, naming-conventions

在方法名称中使用“From”或“With”是否意味着什么？

```
[NSIndexPath indexPathForItem:item inSection:section];

[NSIndexPath indexPathWithIndex:index]; 
```

如果是这样，我猜“With”会保留而“From”不会，但我从未听过任何关于此的讨论。

如果不是，为什么方法的命名方式有所不同？如果他们都有“With”或“From”，这不是同一件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:04:49.283

它没有任何意义，只是有助于使方法更具可读性和人性化。

# php - mysqli_affected_rows 总是返回 1

> ID：13751567
> 
> 赞同：0
> 
> 时间：2012-12-06T20:02:41.997
> 
> 标签：php, mysql

我遇到了 mysqli_affected_rows 的一些问题，它始终返回 1，即使更新不受影响。

```
$dbConnect = mysql_connect($dbHost, $dbUser, $dbPass);
$dbSelect = mysql_select_db($dbName, $dbConnect);

$sqlprove = mysql_query('UPDATE '.tblAVB.' SET a= "1" WHERE id= "'.$_POST['id'].'" AND Active = "1" ');

$isprove = mysqli_affected_rows($sqlprove); 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:03:51.187

如果你正在使用，`mysqli`那么你*只* `mysqli`使用前缀函数。您不能混合和匹配已弃用的`mysql_query`方法。

事实上，`mysql_query`如果您使用的是`mysqli`.

如果您刚刚开始，您应该改用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。该`mysqli`界面比旧版更好，但与 PDO 相比，它相当烦人和脾气暴躁。

在任何情况下，您**必须**非常小心，始终对任何和所有值使用[正确的 SQL 转义。](http://bobby-tables.com/php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:33:28.867

我有这个，它可以工作，但我不想在代码中间使用面向对象的样式：

```
$mysqli->query('UPDATE '.tblAVB.' SET a= "1" WHERE id= "'.$_POST['id'].'" AND Active = "1" ');

$prove = $mysqli->affected_rows; 
```

并且程序样式不起作用！！！！因为我在查询之前将它连接到数据库而不使用 $link ！！！

```
$link = mysqli_connect("localhost", "my_user", "my_password", "world");
mysqli_query($link, "UPDATE Language SET Status=1 WHERE Percentage > 50");
printf("Affected rows (UPDATE): %d\n", mysqli_affected_rows($link)); 
```

是因为我使用**mysql**而不是mysqli吗？有没有办法让mysql的affected_rows？ [参考](http://www.nusphere.com/kb/phpmanual/function.mysqli-affected-rows.htm)

# jquery-mobile - 使用 Ember.js 处理视觉元素

> ID：13751568
> 
> 赞同：3
> 
> 时间：2012-12-06T20:02:49.247
> 
> 标签：jquery-mobile, ember.js

我正在探索移动框架，并且遇到了 Ember.js。我喜欢 MVC 模型，但我很好奇通常如何处理视觉元素。例如，使用 jQuery Mobile，您可以轻松创建针对移动设备优化的表单元素（按钮、滑块、切换开关等）。您还可以处理页面转换。这些类型的视觉元素似乎超出了 Ember.js 的范围。

大多数人会将 Ember.js 与另一个处理视觉元素的框架（如 jQuery Mobile）结合使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:17:23.413

Ember 在内部使用 jQuery，并且倾向于与 jQueryUI 小部件一起工作。人们遇到的主要问题是 ember 如何呈现视图和 jQueryUI 小部件丢失事件处理程序的动态特性（这通常很容易解决）。

理想情况下，您将使用 Ember 视图层为滑块等内容创建自定义视图，并且如果需要，这些自定义视图可以包装外部小部件。

[https://github.com/flamejs/flame.js](https://github.com/flamejs/flame.js)

FlameJS 也是一个有趣的项目，它提供了很多您所询问的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:41:59.767

您可以使用继承自 Ember.View 类的 didInsertElement 函数轻松地将基于 jQuery 的插件和框架与 Ember 集成。一个简单的例子是制作一个日期选择器：

```
App.DatePicker = Em.TextField.extend({
    didInsertElement: function() {
        this.$().datepicker();
    }
}); 
```

在此示例中，this.$() 是 Ember 的 $(this.element) 简写，并在将文本输入插入 dom 后创建日期选择器。您可以使用 Ember 内置的观察者和属性绑定来处理更改。

jQueryMobile 特别需要一些配置以允许 Ember 控制路由和链接。一个很好的例子是[https://github.com/LuisSala/emberjs-jqm](https://github.com/LuisSala/emberjs-jqm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:02:48.653

你检查过 bootstrap.js 吗？它们的所有样式都会自动缩放以适应显示它们的任何尺寸的屏幕，并且不需要将任何特殊的东西集成到车把模板中，只需添加适当的类，它就可以处理其余部分。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# c# - WCF 调用 WCF - 滞后

> ID：13751569
> 
> 赞同：0
> 
> 时间：2012-12-06T20:02:52.007
> 
> 标签：c#, wcf

尝试控制台应用托管 WCF 服务。一切都好，但时间...

控制台应用程序中的 WCF 以代码开头：

```
 ServiceHost host = new ServiceHost(typeof(DeviceService));

    public void StartServiceHost()
    {
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine(DateTime.Now.ToString() + " ServiceHost is opened");
        host.Open();
        Console.ForegroundColor = ConsoleColor.Green;
    } 
```

在其他 WCF 服务（用于向 SL 应用程序发送数据）中，我通过代码调用此服务：

```
DeviceCacheService.DeviceServiceClient client = new DeviceCacheService.DeviceServiceClient();
List<Telemetry.Models.Device.DeviceModel> models = client.DEVICE_Get().ToList(); 
```

当最后一个代码向第一个服务创建请求时，下一行在 3-4 秒后处理。我尝试设置断点 - 在调用服务方法和启动 ConsoleAppWCF 侧代码之间处理 2-3 秒。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:54:45.830

请从您的应用程序（服务器和 SL）中添加任何绑定信息。

也就是说，心理调试表明您正在使用使用 Windows 身份验证的安全绑定。第二个猜测是您没有运行连接到域的这台机器，因此调用需要一些时间来获取凭据来确定 AD 控制器不存在。

即使机器没有连接到域，WCF 也会调用函数来尝试获取 Windows 凭据，就好像 MACHINEName\UserName 的 MACHINEName 实际上是一个域一样。一旦失败，代码会将 MACHINEName 视为机器名称。此故障转移通常需要 3-4 秒。

当然，我可能会走得更远，但我想我会猜测一下。

# windows - _wstat 和 Windows 7 共享的路径截断问题

> ID：13751570
> 
> 赞同：0
> 
> 时间：2012-12-06T20:02:52.233
> 
> 标签：windows, windows-7, smb, stat

这段代码：

```
int main()
{
   wchar_t fnucs2[260];
   wcscpy(fnucs2, L"//buildserver7500/wec");
   std::wcout << L" | wstat: " << fnucs2 << std::endl;
   struct _stat32i64 b;
   int r;
   r = _wstat32i64(fnucs2, &b);            

   return 0;
} 
```

更新：非宽版本也会发生同样的事情。

生成多个 SMB2 请求，路径的最后一个字符被截断 (\buildserver7500\we)。我怀疑这个问题与我们系统中的大量网络共享问题有关。关于为什么会发生这种情况的任何线索？

![Wireshark 捕获问题](../Images/9ba3d7974260ab0cae31076591c54a28.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:26:11.413

Stat 不适用于共享本身。使用 stat 处理任意 unc 路径的代码需要 \\server\share 的特殊情况。

# python - 动态规划最优硬币变化

> ID：13751572
> 
> 赞同：7
> 
> 时间：2012-12-06T20:02:54.893
> 
> 标签：python, algorithm, dynamic-programming

我一直在审查一些动态编程问题，并且我很难围绕一些代码来寻找最少数量的硬币来进行更改。

假设我们有价值 25、10 和 1 的硬币，我们正在找零 30。贪婪将返回 25 和 5(1)，而最优解将返回 3(10)。这是书中关于这个问题的代码：

```
def dpMakeChange(coinValueList,change,minCoins):
   for cents in range(change+1):
      coinCount = cents
      for j in [c for c in coinValueList if c <= cents]:
            if minCoins[cents-j] + 1 < coinCount:
               coinCount = minCoins[cents-j]+1
      minCoins[cents] = coinCount
   return minCoins[change] 
```

如果有人能帮助我理解这段代码（第 4 行是我开始感到困惑的地方），那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T01:43:46.327

在我看来，代码正在解决每个美分值的问题，直到目标美分值。给定一个目标值`v`和一组硬币`C`，您知道最佳硬币选择`S`必须是形式`union(S', c)`，其中`c`一些硬币来自哪里，`C`并且`S'`是最佳解决方案`v - value(c)`（请原谅我的符号）。所以问题有[最优子结构](http://en.wikipedia.org/wiki/Optimal_substructure)。动态规划方法是解决所有可能的子问题。它需要`cents * size(C)`一些步骤，而不是如果你只是试图暴力破解直接解决方案，那么事情就会爆炸得更快。

```
def dpMakeChange(coinValueList,change,minCoins):
   # Solve the problem for each number of cents less than the target
   for cents in range(change+1):

      # At worst, it takes all pennies, so make that the base solution
      coinCount = cents

      # Try all coin values less than the current number of cents
      for j in [c for c in coinValueList if c <= cents]:

            # See if a solution to current number of cents minus the value
            # of the current coin, with one more coin added is the best 
            # solution so far  
            if minCoins[cents-j] + 1 < coinCount:
               coinCount = minCoins[cents-j]+1

      # Memoize the solution for the current number of cents
      minCoins[cents] = coinCount

   # By the time we're here, we've built the solution to the overall problem, 
   # so return it
   return minCoins[change] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T20:43:24.473

如果您对图论感到满意，这里有一种思考硬币兑换问题的方法可能有用。

假设您有一个按以下方式定义的图形：

*   从 0 到您感兴趣的值（例如 39 美分或其他）的每个货币单位（例如便士）都有一个节点。
*   任意两个节点之间有一条弧线，由您允许使用的硬币的价值隔开（例如，如果允许您使用镍币，则在 34 美分和 29 美分之间的节点。）

现在您可以将硬币更换问题视为从您感兴趣的值下降到零的最短路径问题，因为硬币的数量将与您路径中的弧数完全相同。

该算法不使用图论术语，但它做的事情基本相同：外循环覆盖所有“分”（或节点，在图论框架中），内循环覆盖所有从当前弧到下一个弧的弧（coinValueList 中的值）。总之，他们正在寻找从零到您感兴趣的价值的最短路径。（值降到零，零到值，无关紧要。不过，传统上我们向下搜索到零。）

当我意识到许多问题可以转换为图问题时，我才真正开始理解动态编程。（不过要小心——不是所有的都可以。有些是超图，有些可能甚至不是。但它对我帮助很大。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T01:53:49.283

我认为第四行令人困惑，因为虽然 Python 可以在列表理解中选择/过滤`(transform(x) for x in iterable if condition(x))`，但它不能在其标准`for x in iterable:`表达式中做同样的事情。

因此，人们绕过的一种（俗气的imo）方法是将两者焊接在一起。他们创建了一个实际上不进行转换的列表理解（因此是`c for c in coinValueList`），因此他们可以添加`if c <= cents`子句。然后将其用作标准`for x in iterable:`表达式的可迭代对象。我怀疑这就是你的一些困惑的来源。

编写该行的另一种方法可能是：

```
...
for eachCoinValue in filter(lambda x: x <= cents, coinValueList):
... 
```

或者更清楚地说，“意图揭示变量”将是：

```
...
smallEnoughCoins = filter(lambda each: each <= cents)
for each in smallEnoughCoins:
    ... 
```

# php - 创建不离开页面并在提交时修改 CSS 的表单

> ID：13751577
> 
> 赞同：0
> 
> 时间：2012-12-06T20:03:05.587
> 
> 标签：php, jquery, ajax, forms, submit

我想创建一个向我发送电子邮件的表单，但也不加载新页面，而是简单地修改同一页面上的一些 CSS 值。

我一直在搜索这个网站并且一直在玩一些代码。我尝试通过 JavaScript（验证）、PHP（处理和格式化电子邮件）和 jQuery（发送电子邮件和修改 CSS）来做到这一点，但它并不完全正确。我对这些语言还很陌生，所以有点困难。

目前，它通过 JavaScript 正确验证表单，并且除非验证，否则不会提交。完美的。它还发送电子邮件，这很棒！问题是它加载我的 PHP 页面而不是停留在当前页面上。回声“谢谢...”通过 jQuery 放置在 PHP 页面上，而不是放在我的 HTML 中的 div 中。此外，我对 PHP 和 jQuery 代码感到困惑。PHP 当前发送电子邮件，但 jQuery 应该这样做。但是如果我从 PHP 中删除它，它就不会发送电子邮件。

如果你能帮我把所有这些碎片放在一起，我一定会很感激的！

HTML 表单：

```
 <form id='form' method='post' onsubmit="return validateForm()" action='sendemail.php'>
                    Name: <br />
                    <input type="text" id="name" name="name" />
                    <br />
                    Email: <br />
                    <input type="email" id="email" name="email" />
                    <br /><br />
                    Subject: <br />
                    <input type="text" id="subject" name="subject" />
                    <br />

                    Comments:</a> <br />
                    <textarea id="comments" name="comments" rows="10" cols="60"></textarea>
                    <br />

                    <input type="image" src="..." alt="Submit" name="myFormSubmitted" value="Submit" />        
                </form>
                <div id="formResponse" style="display: none;"></div> 
```

JavaScript（验证）：

```
<script type="text/javascript">
            function validateForm() {
                var validName = false;
                var validEmail = false;
                var validSubject = false;
                var validComments = false;

                //Perform validation here...

if (validName && validEmail && validSubject && validComments) {
return true;
} else {
return false;
} 
```

PHP sendemail.php（处理表单，格式化电子邮件）：

```
<?php
if(isset($_POST['myFormSubmitted'])) {
//Construct format here.....
// Blank message to start with so we can append to it.
    $message = '';

    // Construct the message
    $message .= <<<TEXT
        Name: {$_POST['name']}
        Email: {$_POST['email']}
        Subject: {$_POST['subject']}
        Comments: {$_POST['comments']}  
        {$checkString}
TEXT;
$to = 'sendToThisEmail@example.com';
$subject = $_POST['subject'];
$from = $_POST['name'];
$fromEmail = $_POST['email'];

    $header = 'From: ' . $from . '<' . $fromEmail . '>';

    //Send the email - shouldn't be here!
    mail($to, $subject, $message, $header);

    echo 'Thank you for your Email. We will get in touch with you very soon.';
}
?> 
```

jQuery（发送电子邮件，修改 CSS）：

```
$("#form").submit(function() {
    $.post('sendemail.php', {name: $('#name').val(), email: $('#email').val(), comments: $('#comments').val(), myFormSubmitted: 'yes'}, function(data) { //I don't understand this line
        $("#formResponse").html(data).fadeIn('100'); //Place echo in original page
        //Add more CSS changes here...
        $('#name, #email, #comments').val(''); // Clear the inputs - what does this do?
    }, 'text');
    return false;
});
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:09:28.353

为了防止表单实际发布并将您带到 PHP 页面，您需要`preventDefault()`在 jQuery`submit()`函数中执行如下操作：

```
$("#form").submit(function(event) {
    event.preventDefault();
    if (validateForm) {
        $.post(
            'sendemail.php',
            {
                name: $('#name').val(),
                email: $('#email').val(),
                comments: $('#comments').val(),
                myFormSubmitted: 'yes'
            },
            function(data) { //I don't understand this line
                $("#formResponse").html(data).fadeIn('100'); //Place echo in original page
                //Add more CSS changes here...
                $('#name, #email, #comments').val(''); // Clear the inputs - what does this do?
            },
            'text'
         );
     } else {
         // form is not validated, perhaps do something to notify user here
     }
} 
```

注意我还使用这个 onsubmit 函数添加了表单验证。这将允许您从`<form>`元素中删除 onsubmit 属性。

这应该允许其他一切工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:07:26.960

您的表单被提交是因为您有一个`onsubmit`调用`validateForm()`. 如果一切都有效，validateForm() 将返回 true。您应该删除该属性并在 jQuery `submit`EventHandler 中调用该函数并防止事件冒泡。

```
$("#form").submit(function(e) {
    if (validateForm()) {
        $.post(
            'sendemail.php', 
            {
                name: $('#name').val(), 
                email: $('#email').val(), 
                comments: $('#comments').val(), 
                myFormSubmitted: 'yes'
            }, 
            function(data) {
                $("#formResponse").html(data).fadeIn('100');
                $('#name, #email, #comments').val(''); /* Clear the inputs */
            }, 
            'text'
        );
    }

    // LINES ADDED
    e.preventDefault();
    e.stopPropagation();

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:06:37.110

代替带有提交的表单，绑定您的“提交”按钮以向您的 PHP 发送 Ajax 调用。你的 PHP 会做它需要做的事情，并将控制权和任何数据返回给你的 javascript，它可以采取任何额外的行动来响应这些数据。

谷歌“阿贾克斯”。这是完成所有这些工作的关键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T10:04:40.267

我刚刚在另一个论坛上找到了这个问题的答案：

它不涉及JS。

```
 <?php
    if (isset($_POST['submit'])) {
        print "<div class=\"h1span\">Thank you!</div>\n";
    }
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T20:10:57.950

您需要对 php 脚本进行异步 ajax 调用。有关具体细节，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)，但这里是您可以使用的片段（当然有一些修改）

```
$.ajax({
    url: "sendemail.php",
    type: 'post',
    success: function() {
        $(this).addClass("someclass");
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T20:18:03.600

将各个部分连接在一起：

将 jQuery 库添加到头部，在使用它的脚本之前，如`<script src="...">`

将`jQuery`部件作为脚本添加到文档中的某处。这`<head>`是最好的地方。将代码保存在外部文档中也有帮助。

如果脚本包含在表单之前，请将代码包装在`$(document).ready(function(){...})`. 如果不是，那么您无论如何都可以这样做以防止将来出现错误。

将`Javascript`部件添加为脚本，最有可能添加到与部件相同的`script`标签中`jQuery`。

从表单中删除`onsubmit`属性，因为现在`submit`处理程序将调用`validateForm`.

`this`在提交处理程序中是指正在提交的表单。你可以利用它来发挥你的优势。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T20:35:09.703

这不能以这种方式完成：

如果您创建一个表单，提交将仅提交到服务器，如果它已提交。这将重新加载您的页面。

一种解决方案是将表单提交到命名的 iframe 中。

```
<iframe height="1px" width="1px" name="hiddenSubmit" src="" />
<form id='form' method='post' onsubmit="return validateForm()" action='sendemail.php' target='hiddenSubmit'>[...] 
```

# algorithm - 一种算法来查看图中是否恰好有两个 MST？

> ID：13751582
> 
> 赞同：16
> 
> 时间：2012-12-06T20:03:43.917
> 
> 标签：algorithm, minimum-spanning-tree

我有一个无向连通图 G。如果至少有 2 个 MST，我希望找到一个返回 true 的算法。

如果我想查看是否正好有 2 个 MST 怎么办？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-08T15:57:08.107

我们可以通过修改 Kruskal 算法有效地检测这两种情况。如果有人能想到一种更简单的方式来描述这一切，请告诉我！

## Kruskal 为等权边的每个排列构建一个 MST

Kruskal 算法通过始终包含连接迄今为止已构建的森林的不同组件的下一个最小边来构建 MST。*只要选择了任何*这样的最小边，即不管具有相同权重的边如何排序，该算法都是正确的。

## 克鲁斯卡尔可以找到每一个 MST

此外，*每*可以通过选择某种特定的方式对每组等权边进行排序，然后运行 ​​Kruskal 算法来生成 MST。为了看到这一点，假设有一些 MST 不能以这种方式生产。现在从这个 MST 中每个边的权重中减去一些小量 epsilon（小于任何不相等边权重之间的差）：这个 MST 现在是唯一的 MST，所以 Kruskal 必须在使用新的边权重运行时产生这个 MST . 但是因为我们最多只通过 epsilon 调整边，所以当边按权重排序时，权重为 w_i - epsilon 的所有边的集合必须立即出现（以某种顺序）在权重为 w_i 的边集（以某种顺序）之前，两组之间没有其他边。但对于原始的、未修改的边缘，这是一个有效的可能排序，并且 Kruskal 算法只关心边的顺序而不是它们的特定权重，因此 Kruskal 算法也必须从该顺序中产生 MST。这与我们的假设相矛盾，因此必须是克鲁斯卡尔算法可以产生每个 MST。

## 组件图

在 i >= 0 边添加步骤 F(i) 之后调用由 Kruskal 算法构建的森林，剩余的边要考虑并且不会创建循环 R(i)。（当在步骤 i 中添加一条边时，我们通过从 R(i-1) 的副本开始并删除刚刚添加的边和连接同一对组件的所有其他边来形成 R(i)。虽然 Kruskal算法实际上“懒惰地”消除了这些其他边，以这种方式定义 R(i) 简化了证明算法的属性。）我们将把 Kruskal 算法分解为一系列*块*，每个块都由一系列边添加组成，其中的边添加相同的重量。如果 i = 0 或 R(i) 中的最小权重边大于在步骤 1 中添加的任何边，则调用 i*块定义.. i。*

假设在执行了一些块定义数 i >= 0 的 Kruskal 算法的边加法步骤之后，R(i) 中的最小边（即不会创建循环的下一个最小边）的权重为 w . Kruskal 算法将继续以某种方式将所有在它们之间具有权重 w 边的树连接在一起，然后再执行其他任何操作，即使为这些等权边选择不同的边排序会影响生成的树，但它不会影响每棵树中的*顶点集。*使这更精确：

定义一个新的、未加权的多重图（即，在一对顶点之间可以有多个边的图）C(i)，由森林 F(i) 中每个组件（树）的顶点组成。对于 C(i) 中的任何顶点 v，调用 t(v) F(i) 中对应于 v 的树。只要 R(i) 中存在权重 w 边，就在 C 中的两个顶点 u 和 v 之间创建一条边在 t(u) 中的某个顶点和 t(v) 中的某个顶点之间。在 i 步后调用 C(i)*组件图*。

**引理：**假设对于某个块定义数 i，C(i) 有 k 个分量包含至少 1 个边（即不是单个顶点的分量），并且这些分量中总共有 m >= 2k 个顶点。称这组顶点为M。那么不管等权边是如何排序的，经过Kruskal算法mk个边加法步骤后，M中的顶点对应的m棵树将被合并为k棵树，其中第 j 棵树由对应于 C(i) 的第 j 个分量的顶点的树的并集组成，加上一个或多个权重为 w 的边，每个 1 <= j <= k。特别是，k 个结果树中的每一个中的顶点集不受在 C(i) 中产生边的权重 w 边的特定排序的影响。

**证明：**C(i) 中的每条边 (u, v) 对应于 R(i) 中的一个权重 w 边，该边可能首先出现在等权边的某个排列中的所有权重 w 边中，因此可以通过以下方式选择克鲁斯卡尔算法。添加它的效果是将 F(i) 中的两棵树合并为 F(i+1) 中的一棵树，并丢弃 R(i+1) 中的一条或多条边。对组件图的影响是将 C(i) 中的 u 和 v 合并为 C(i+1) 中的单个顶点 x，删除 C(i+1) 中 u 和 v 之间的所有其他平行边，并更改第三个顶点 y 和 C(i) 中的 u 或 v 之间的所有边变成 y 和 C(i+1) 中的新顶点 x 之间的边。如果接下来由 Kruskal 选择 C(i) 的一个分量中的一条边，则其他分量中的边不受影响，因此不同分量的边在排列中如何交错没有影响。因此我们可以假设首先看到一个组件的所有边，然后是另一个组件的所有边，依此类推，直到第 k 个组件。假设第一个组件有 s 个顶点。Kruskal 算法添加的每条边都会将该组件的顶点数减少 1，而不会断开该组件。在 C(i+j) 中的分量中存在一条边表示在 R(i+j) 中存在一条连接 F(i+j) 中两棵不同树的权重 w 边，因此 Kruskal 算法将继续选择缩小该分量的边，直到它成为 C(i+s-1) 中的单个顶点。无论在每一步选择哪些边，F(i+s-1) 中相应树中的顶点将由 F(i) 中 s 树中的所有顶点的并集组成。这可以对剩余的组件重复。

## 计算 MST

**定理：** MST 的数量是多重图 C(i) 中每个块定义 i 的生成森林数量的乘积。

**证明：**正如引理中所确定的，通过在 C(i) 中的边的某些排列上运行 Kruskal 可以产生的每个森林相对于 F(i+mk) 中每个结果树组件中的顶点集都是相同的。C(i) 的 s 顶点分量的每个生成树代表一组不同的 s-1 边，可以通过 Kruskal 算法选择这些边以生成一个不同的底层 MST，该 MST 包含 F(i) 中相应的 s 树集. 生成林是生成树的组合，每个组件一个，因此生成林的数量是每个包含的树的生成树数量的乘积。将 C(i) 中的生成森林数称为 q(i)。由于后续 Kruskal 块中的边添加步骤不关心每个组件的边结构，而只关心每个组件中的顶点，

计算图的生成树数量有一些复杂的算法，例如[imslavko 给出的基于](https://stackoverflow.com/a/13773641/47984)[Kirchhoff 定理](http://en.wikipedia.org/wiki/Kirchhoff%27s_theorem)的算法。我不确定那个是否适用于多图。但无论如何，由于我们只关心特定情况 1、2 和 2 以上，我们可以走捷径。

*   如果我们只想检测图形是否正好有 1 个 MST 或大于 1，我们可以使用这样一个事实，即整数乘积等于 1 的唯一方法是每个因子都等于 1：即如果有任何块C(i) 的生成树超过 1 个，立即停止并报告“超过 1 个”。如果我们没有发生这种情况就结束了，报告“1”。

*   如果我们想检测图是否正好有 2 个 MST，我们可以使用这样一个事实：对于整数乘积等于 2，恰好有 1 个因子必须等于 2，其余的因子都必须为 1。对于多重图要恰好有 2 棵生成树，它必须由一个森林组成，再加上两个顶点之间已经有一条边的额外（平行）边。（任何包含 k >= 3 的 k 循环的多重图必须至少有 k 个生成树，通过删除 k 个边中的任何 1 个而形成。）

## 算法概述

像往常一样执行 Kruskal，但是每当一个新块开始时（由添加的边缘比之前添加的任何边缘都具有更高的权重表示），在添加边缘之前，执行以下步骤：

1.  使用邻接表表示创建一个空的多重图 C。
2.  向前扫描所有具有此权重的剩余边，对于每条边 (u, v)，将 (c(u), c(v)) 添加到 C，其中 c(v) 是联合找到的 v 的代表节点/find 用于检查连通性的结构。
3.  通过这个多重图的每个组件执行 DFS，使用一组标志来记录哪些顶点已经被访问过。此 DFS 的目的是检查循环和平行边：
    *   如果有任何长度为 3 或更高的循环，则该组件至少有 3 棵生成树，这意味着算法可以在此时终止。
    *   如果出现任何平行边的重数为 3 或更多，该算法同样可以立即终止。
    *   每次在两个顶点之间看到一条双边，就增加一个全局计数器：如果这个计数器大于 1，那么至少存在 2*2 = 4 个 MST，因此算法可以再次立即终止。如果我们到达 Kruskal 算法的末尾并且计数器为 1，那么恰好存在 2 个 MST；否则它必须为 0，在这种情况下恰好存在 1 个 MST。

所有这些额外的操作在不相交的边块上都需要线性时间，因此它们不会增加底层 Kruskal 算法的时间复杂度超过 O(E log V)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:48:21.137

我知道确定不同生成树数量的算法：该[算法](http://en.wikipedia.org/wiki/Kirchhoff%27s_theorem)使用基尔霍夫定理。我记得解决了关于最小树数的问题，但如果我没记错的话，它是指数级的。主要思想是测试树中使用的边缘的位掩码和包含-排除方法。

顺便说一句，如果所有边的权重都不同，则只有一个 MST。希望能帮助到你。

# c# - 使用 C# 更新在 PPT 中设置为手动的链接

> ID：13751585
> 
> 赞同：1
> 
> 时间：2012-12-06T20:03:46.500
> 
> 标签：c#

我有一个每月交付的内容，其中涉及更新一个 excel 文件和一个带有链接到所述文件的对象的 powerpoint。

我已经编写了一些 C# 来打开 excel 文件并轻松地刷新连接，但是 powerpoint 给我带来了困难。具体来说，我希望定期手动更新 powerpoint，但presentation.updatelinks() 似乎不起作用，除非链接设置为在打开文件时自动更新。

我当前的代码看起来像：

```
using PowerPoint = Microsoft.Office.Interop.PowerPoint; 
```

...

然后

```
public void Main()
    {
        PowerPoint.Application ppt = new PowerPoint.Application();
        PowerPoint.Presentation PRS = ppt.Presentations.Open(Filename.pptx",
        Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse);

        PRS.UpdateLinks();
        PRS.Save()
ppt.quit(); 
```

我对使用一些 PowerPoint.LinkFormat... 功能感到好奇，但我必须缺少参考或其他东西，因为我输入 linkformat 时唯一的选择是 linkformat.equals(...)

所以我想我的问题有两个可能的答案：

1.  在演示文稿中将链接设置为手动时如何更新链接
2.  如何将它们更改为自动，更新，然后将它们更改回来。

我在网上到处找，仍然找不到答案，但在这里希望你们能提供帮助。

非常感谢

# collections - Groovy findIndexValues 返回列表

> ID：13751587
> 
> 赞同：4
> 
> 时间：2012-12-06T20:03:53.083
> 
> 标签：collections, types, groovy

我一定快疯了，但为什么 Groovy findIndexValues 会返回`List<long>`？我可以得到整数的索引吗？

```
foo = ['a','b','d','e', 'e','e']
indices  = foo.findIndexValues { it == 'e'}
indices.each { println foo[it] } 
```

以上将崩溃，因为 foo 集合无法处理 long 作为访问索引。我没有使用应有的语言吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:19:39.173

这就是该方法的工作原理。它使用迭代器遍历集合并跟踪匹配的索引。理论上，它支持大于 的集合`Integer.MAX_VALUE`，尽管我怀疑这在实践中是否有用。

您可以使用以下方法解决它：

```
indices.each { println foo[it as int] } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-21T03:01:10.927

而不是每次使用索引时都进行转换，而是在初始分配中预先将其全部转换。

```
foo = ['a','b','d','e', 'e','e']
indices  = foo.findIndexValues { it == 'e'}.collect { it as Integer }
indices.each { println foo[it] } 
```

# android - 如何在带有文本的android中显示弧

> ID：13751591
> 
> 赞同：2
> 
> 时间：2012-12-06T20:04:04.730
> 
> 标签：android, android-layout, android-widget

我需要在 android 中显示一个带有文本的弧。假设文本应该是白色的，而弧应该用红色背景填充。我通过使用`addArc()`方法成功地在弧中显示文本，但无法填充弧的背景。我在我的`onDraw()`方法中使用了以下代码：

```
path = new Path();
path.addArc(rect, 0, 60); 
paint6 = new Paint(Paint.ANTI_ALIAS_FLAG); 
paint6.setStyle(Paint.Style.FILL_AND_STROKE); 
paint6.setColor(Color.BLACK);
paint6.setTextSize(20f);
paint2.setStrokeWidth(mRadius/2);
paint2.setStrokeCap(Paint.Cap.BUTT);
canvas.drawTextOnPath("Hello", path, 0, 20, paint6); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:36:47.783

我自己找到了答案

```
 Paint mPaint = new Paint();
    mPaint.setColor(Color.GREEN);
    Path mPath = new Path();
    mPath.addArc(rect, 0, 60);
    mPaint.setStrokeWidth(mRadius/2);
    mPaint.setStyle(Paint.Style.STROKE);
    canvas.drawPath(mPath, mPaint);

    mPaint.setColor(Color.BLUE);
    mPaint.setStrokeWidth(mRadius/2);
    mPaint.setStyle(Paint.Style.FILL);
    mPaint.setTextSize(20);
    canvas.drawTextOnPath("Draw ", mPath, 0, 20, mPaint); 
```

# c++ - Visual Studio 2010 C++ 中的自定义项模板

> ID：13751593
> 
> 赞同：2
> 
> 时间：2012-12-06T20:04:12.293
> 
> 标签：c++, visual-studio-2010, templates

我希望能够在 Visual Studio 2010 C++ 中添加自定义项模板，这样当我转到“文件”>“新建”>“文件”时，我可以拥有自己的自定义标题和包含我的布局/注释等的源文件。一切准备就绪. 目前，我正在通过在每个新项目中放置 TemplateSource.cpp、TemplateHeader.h 和 TemplateTestSuite.cpp 等文件来解决此问题，然后在每次需要新文件时复制并粘贴内容。但是，这并不理想，因为它需要一些设置，并且每次我需要使用它时都要摆弄。这也意味着文件需要能够编译，否则我的构建会失败，这意味着我无法拥有我想要的模板。

我知道，在其他语言中，您可以简单地转到文件 > 导出模板，但这个选项在 C++ 中是灰色的，原因超出了我的理解。我搜索了类似的问题，发现了很多问题，但答案很少。我自己[在这里](https://stackoverflow.com/a/13404502/1227469)提供了一个答案，但我已经尝试了那里描述的方法，但没有成功。

有谁知道实现我想要的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:45:09.510

我去了工具->选项菜单，然后弹出一个选项菜单。
我在左窗格中展开了“项目和解决方案”项。
我在左窗格中突出显示了“常规”。

第三个文本框显示用户项模板的路径。

接下来，我在网上搜索“Visual Studio 2012 项目模板 c++”。

希望有帮助。

# html - 绝对定位元素超出其“最小宽度”的收缩窗口保留“左”值但破坏“右”值

> ID：13751594
> 
> 赞同：0
> 
> 时间：2012-12-06T20:04:25.260
> 
> 标签：html, css, layout

我有[这个 html 和 css 代码](http://jsbin.com/bentley4/12/edit)。当我将窗口宽度缩小到最小尺寸时`div.element2`，`20px`在`left`. `right`但是，当我缩小超出该`min-width`值时，空间就会消失。

我怎样才能保持`20px`右边的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:07:31.213

最小宽度阻止它缩小到 340 像素以下。如果您删除它，那么它将保留 20px 的边距，但显然不会总是超过 340px 宽。

# tunnel - 隧道到位于 2 个安全服务器后面的服务器

> ID：13751595
> 
> 赞同：1
> 
> 时间：2012-12-06T20:04:26.550
> 
> 标签：tunnel

我正在使用以下过程连接到我的安全 linux 服务器。

1）首先我连接到一台连接机器（系统A）。从这里我连接到另一个连接的服务器（系统 B）。从系统 B 我们可以直接访问我们的安全服务器。

在这里，我需要访问我的一个 linux 服务器 Web 控制台，例如 server.map.com:7777 端口。

如何访问此服务器 URL。

请在这里帮我..

有什么方法可以在 p 中设置这两个连接的服务器

# python - python用正则表达式查找替换字符串中的非拉丁词

> ID：13751596
> 
> 赞同：2
> 
> 时间：2012-12-06T20:04:28.723
> 
> 标签：python, regex

我正在尝试这样做：

`val = re.sub(r'\b' + u_word +'\b', unicode(new_word), u_text)`

（所有字符串都是非拉丁语。）

它根本不起作用！

是否可以使用正则表达式在非拉丁文本中查找替换非拉丁词（整个词）？如何？

编辑：

如果你想测试试试这些字符串：

```
>>> u_word = u'αβ'
>>> u_text = u'αβγ αβ αβγδ δαβ'
>>> new_word = u'χχ'
>>> val = re.sub(r'\b' + u_word +r'\b', unicode(new_word), u_text)
>>> val
u'\u03b1\u03b2\u03b3 \u03b1\u03b2 \u03b1\u03b2\u03b3\u03b4 \u03b4\u03b1\u03b2'
>>> u_text
u'\u03b1\u03b2\u03b3 \u03b1\u03b2 \u03b1\u03b2\u03b3\u03b4 \u03b4\u03b1\u03b2'
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:07:01.600

您需要将**`re.UNICODE`**标志传递给`sub`，如下所示：

```
val = re.sub(r'\b' + u_word + r'\b', unicode(new_word), u_text, flags=re.UNICODE) 
```

`\b`是单词边界。如果没有`re.UNICODE`标志，“单词”仅包含 set 中的字符`[a-zA-Z0-9_]`，因此`αβ`不会被视为“单词”。有关详细信息，请参阅[文档`re`（](http://docs.python.org/2.7/library/re.html#module-re)特别`\b`是 、`\w`和`re.UNICODE`）。

供参考：

*   如果`new_word`已经是一个 unicode 字符串（如您的示例中），`unicode(new_word)`是多余的，[它返回`new_word`unmodified](http://docs.python.org/2.7/library/functions.html#unicode)。
*   在 Python 3.x 中，unicode 不再是特例。您的代码将在 Python 3.x 中按原样工作（减去`unicode()`因为不再需要而被删除）。

# objective-c - 如何通过 performSelector 传递数字？

> ID：13751601
> 
> 赞同：1
> 
> 时间：2012-12-06T20:04:40.763
> 
> 标签：objective-c, ios

我必须将数字（int）传递给我的下一个方法，我正在尝试下一个代码但没有成功：

```
int myNumber = 45;
[self performSelector:@selector(startNewThing) withObject:myNumber afterDelay:0.5f]; 
```

如何通过 performSelector 传递数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:13:11.220

以下是我对您的代码段所做的更改：

```
NSNumber *myNumber = [NSNumber numberWithInteger:45];
[self performSelector:@selector(startNewThing:) withObject:myNumber afterDelay:0.5f]; 
```

请注意，我在`-startNewThing`. 这样该方法就可以接受`myNumber`作为参数。（这是假设 -startNewThing: 确实需要一个参数。）并且由于我们已经`myNumber`从标量更改为对象，因此您需要对`-startNewThing:`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:06:19.410

您将不得不使用 NSNumber。

NSNumber *myInt = [NSNumber numberWithInt:myNumber];

然后将其传入，当您在选择器中收到它时：

NSInteger newInteger = [myNumber integerValue];

重要的是要了解您正在使用 NSNumber 将原语转换为对象。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T22:37:45.450

选择：

```
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.5f * NSEC_PER_SEC), dispatch_get_main_queue(), ^{
    [self startNewThing:100];
}); 
```

# php - 具有多列主键的 Laravel 模型

> ID：13751604
> 
> 赞同：2
> 
> 时间：2012-12-06T20:04:47.533
> 
> 标签：php, mysql, primary-key, laravel

所以我在我的应用程序中有一个简单的表，它存储了用户和订单之间的多对多关系。因此，该表有一个 2 列主键（用户 ID、订单 ID）来存储值。

在 Laravel 中，我想检查表中是否存在某个用户/订单组合，如果不存在，则插入该行。

我无法弄清楚如何使用`Order::find()`来检索这一行。理想情况下，我希望能够做类似的事情`Order::find(array('userid' => $userno, 'orderid' => $orderno))`，但这会引发错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:34:25.840

您可以使用 where 方法：

`Order::where_userid($userno)->where_orderid($orderno)->count();` 此行返回结果计数。如果为零，则可以插入。最后，我建议您阅读[docs](http://laravel.com/docs/database/eloquent)。

# css - Ultimate CSS Gradient Code Breaking CSS

> ID：13751607
> 
> 赞同：0
> 
> 时间：2012-12-06T20:05:00.233
> 
> 标签：css, gradient

[我在这里](http://www.colorzilla.com/gradient-editor/)使用 Colorzilla 的 Ultimate CSS Generator 为 div 复制了一些代码

添加到我的 CSS 文件时，它看起来像这样：

```
.su-quote-shell
{
padding:20px !important;
border-radius:50px !important;
border:5px solid #fef5d6 !important;
background: #ffffff !important; /* Old browsers */
background: -moz-linear-gradient(top,  #ffffff 1%, #fff4d6 100%) !important; /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#ffffff), color-stop(100%,#fff4d6)) !important; /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 1%,#fff4d6 100%) !important; /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 1%,#fff4d6 100% !important); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 1%,#fff4d6 100%) !important; /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 1%,#fff4d6 100%) !important; /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#fff4d6',GradientType=0 !important; /* IE6-9 */
} 
```

注意：填充和边框代码是我自己的

当我运行我的页面时，似乎此部分下方的任何 CSS 都被忽略/未加载。我猜这与所有 /* 评论有关，但我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:08:34.983

`!important`您在:之前的最后一行缺少右括号

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#fff4d6',GradientType=0) !important; /* IE6-9 */ 
```

# excel - 按路径和名称参考工作簿 - VBA

> ID：13751610
> 
> 赞同：7
> 
> 时间：2012-12-06T20:05:09.877
> 
> 标签：excel, excel-2007, vba

```
Sub Quack()

Dim LookupWB As Workbook
Set LookupWB = Application.Workbooks("C:\Users\user1\Desktop\Book1.xlsx")

End Sub 
```

此代码给出错误：

> 下标超出范围我认为这是因为“设置”行。如何通过路径正确引用工作簿？

如果我写：（`Set LookupWB = Application.Workbooks("Book1.xlsx")`没有完整路径）它工作得很好。非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T20:31:55.403

我认为您需要先使用该`Open`功能：

```
Workbooks.Open Filename:="C:\Users\user1\Desktop\Book1.xlsx"
Set LookupWB = Application.Workbooks("Book1.xlsx") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-09T14:42:08.223

如果工作簿已打开，则无需包含路径。这就是为什么`Set LookupWB = Application.Workbooks("Book1.xlsx")`有效。

如果工作簿已关闭，则必须包含 Open 功能（请参阅@thornomad 的答案）。

# node.js - 在 Azure 中使用来自 nodejs 的 DiagnosticMonitor

> ID：13751612
> 
> 赞同：1
> 
> 时间：2012-12-06T20:05:11.730
> 
> 标签：node.js, azure

我想知道人们是否有运气在 Azure 中运行的 nodejs 应用程序中配置 DiagnosticMonitor？[http://www.windowsazure.com/en-us/develop/nodejs/common-tasks/performance-profiling/](http://www.windowsazure.com/en-us/develop/nodejs/common-tasks/performance-profiling/)链接在nodejs 下...但显示了 C# 示例代码。

非常感谢任何提示/示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:03:31.980

实际上有一个更好的方法来配置 Windows Azure 诊断，它是通过[diagnostics.wadcfg](http://msdn.microsoft.com/en-us/library/gg604918.aspx)文件。您只需通过此 XML 文件配置诊断并将其包含在您的包中。

[David Hardin](http://blogs.msdn.com/b/davidhardin/archive/2011/03/29/configuring-wad-via-the-diagnostics-wadcfg-config-file.aspx)在一篇博文中解释了这些优势：

> 相反，我建议对所有角色类型使用 diagnostics.wadcfg 来执行大部分配置，并且仅在需要时通过代码进行配置，例如在使用自定义性能计数器时。这将允许 WAD 在 OnStart 执行之前捕获诊断信息，而且维护配置文件比维护代码更容易。

# ios - UITable 没有调用委托方法

> ID：13751615
> 
> 赞同：0
> 
> 时间：2012-12-06T20:05:15.977
> 
> 标签：ios, uitableview

我有一个 UIView，我在其中初始化一个表并将 UIView 设置为它的委托。我的 .h 文件：

```
...
@interface vOperatingRooms : UIView <UITableViewDataSource, UITableViewDelegate>{
... 
```

表 init 在一个名为 showSelf 的方法中，我已经测试了电视的显示位置，这是 init：

```
...
dataTable = [[UITableView alloc] init];
    CGRect dataTableFrame = dataTable.frame;
    dataTableFrame.origin.x = (self.frame.size.width/2)-100;
    dataTableFrame.origin.y = 115.0;
    dataTableFrame.size.width = 200.0;
    dataTableFrame.size.height = 200.0;
    dataTable.frame = dataTableFrame;
    dataTable.alpha = 0.0;
    dataTable.tag = 33;
    dataTable.delegate = self;
    dataTable.dataSource = self;
    [self addSubview:dataTable];
... 
```

以及另一种从 plist 读取以构建表的数据源的方法：

```
...
//set up the directory path
        NSString* pathToProjectFolder = [NSString stringWithFormat:@"Projects/%@", projectNumber];
        //set up the file path
        NSString* ORDataFilePath = [NSString stringWithFormat:@"%@/ORData.plist", pathToProjectFolder];

        //check to make sure the project directory exists and the ORData.plist file
        [fileManager createDirectory:pathToProjectFolder];
        [fileManager createPlist:ORDataFilePath];

        //pull the data from the file
        NSDictionary* ORData = [fileManager readPlist:ORDataFilePath];
        ORNames = [[NSMutableArray alloc] init];

        for(NSString* thisOR in ORData){

            if (![thisOR isEqualToString:@"File Name"]) {
                [ORNames addObject:thisOR];
            }
        }

        //fade in table
        //fade in
        [UIView animateWithDuration:0.25 delay:0.0 options:UIViewAnimationOptionCurveEaseOut

            animations:^{
                dataTable.alpha = 1.0;
            }

            completion:^ (BOOL finished) {
            }

         ];

... 
```

我已经记录了结果，并且正在获取我正在寻找的数据 - 这是 NSArray ORNames 的控制台：

```
2012-12-06 15:01:23.370 IntegrationSiteReport[18697:c07] (
    Test4,
    Test6
) 
```

这是委托方法：

```
#pragma mark Table View Management
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return ORNames.count;
    NSLog(@"%i", ORNames.count);
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [ORNames objectAtIndex:indexPath.row];
    cell.textLabel.textColor = [colorManager setColor:66.0 :66.0 :66.0];
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:20.0];
    return cell;
} 
```

我知道他们没有被调用，因为他们内部没有任何记录。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:18:41.473

什么时候调用 showSelf？如果是在视图加载层次结构之后，您可能只需要添加 a`[dataTable reloadData];`作为 showSelf 的最后一行，但不确定。

# actionscript-3 - 我的 actionscript 3 怎么了？

> ID：13751619
> 
> 赞同：1
> 
> 时间：2012-12-06T20:05:24.757
> 
> 标签：actionscript-3, function, event-listener

我正在尝试编写一个事件侦听器和函数，以便在单击按钮时从关联数组中输出我的文本。我认为我比较接近它应该是的，但我在功能部分遇到了麻烦。我的老师给了我们一个指南，它与我们在课堂上所做的不同，所以我很困惑。

这是我的代码

```
//Associative array with an indexed array
//Array constructor:
var desserts:Array = new Array();
//Format:
//array titleNoSpaces
desserts["PistachioFluffFruitSalad"] = ["Pistachio Fluff Fruit Salad", "1 can Crushed              pineapple with juice", "1 package Instant pistachio pudding mix", "1 container Whipped topping, thawed", "2 bananas, sliced", "2 cups mini marshmallows", "1 can fruit cocktail, drained", "1 can mandarin oranges, drained" ];
desserts["CoconutCreamPieIV"] = ["Coconut Cream Pie IV", "3/4 cup White Sugar", "1/4 cup Cornstarch", "1/4 tsp Salt", "2 cups Milk", "3 Egg Yolks", "2 tbsp Butter", "1 tsp Vanilla Extract", "1 cup Flaked Coconut", "1 Pie Shell, baked", "3 Egg Whites", "6 tbsp White Sugar" ];
desserts["EasySugarCookies"] = ["Easy Sugar Cookies", "2 and 3/4 cups All-purpose Flour", "1 tsp Baking Soda", "1/2 tsp Baking Powder", "1 cup Butter, Softened", "1 and 1/2 cups White Sugar", "1 Egg", "1 tsp Vanilla Extract" ];
desserts["ChocolateMeringuePie"] = ["Chocolate Meringue Pie", "1 Pie crust, baked", "1 cup White Sugar", "2 tbsp Unsweetened Cocoa Powder", "2 tbsp All-Purpose Flour", "1 pinch salt", "2 Eggs, separated", "1 cup Milk", "1 tbsp Butter", "1 tsp Vanilla Extract", "1/4 cup White Sugar"];
desserts["SweetAndSaltyCaramelApples"] =["Sweet and Salty Caramel Apples", "6 Granny Smith Apples", "6 Wooden Sticks", "1 package Individually wrapped caramels, unwrapped", "2 tbsp water", "1/2 tsp Vanilla Extract", "1 1/2 tbsp coarse sea salt", "1 cup Semisweet Chocolate Chips"]; 

//Output data:
//  |--Dynamic text field instance name
//  |                 array titleNoSpaces   ingredient's index number
text_headline.text = desserts.PistachioFluffFruitSalad[0];
text_headline.text = desserts.CoconutCreamPieIV[0];
text_headline.text = desserts.EasySugarCookies[0];
text_headline.text = desserts.ChocolateMeringuePie[0];
text_headline.text = desserts.SweetAndSaltyCaramelApples[0];

//Output for ingredients
text_bigfield.htmlText = desserts.PistachioFluffFruitSalad[1] + "<br>" +  desserts.PistachioFluffFruitSalad[2] + "<br>" + desserts.PistachioFluffFruitSalad[3] + "<br>" + desserts.PistachioFluffFruitSalad[4] + "<br>" + desserts.PistachioFluffFruitSalad[5] + "<br>" + desserts.PistachioFluffFruitSalad[6] + "<br>" + desserts.PistachioFluffFruitSalad[7];
text_bigfield.htmlText = desserts.CoconutCreamPieIV[1] + "<br>" + desserts.CoconutCreamPieIV[2] + "<br>" + desserts.CoconutCreamPieIV[3] + "<br>" + desserts.CoconutCreamPieIV[4] + "<br>" + desserts.CoconutCreamPieIV[5] + "<br>" + desserts.CoconutCreamPieIV[6] + "<br>" + desserts.CoconutCreamPieIV[7] + "<br>" + desserts.CoconutCreamPieIV[8] + "<br>" + desserts.CoconutCreamPieIV[9] + "<br>" + desserts.CoconutCreamPieIV[10] + "<br>" + desserts.CoconutCreamPieIV[11];
text_bigfield.htmlText = desserts.EasySugarCookies[1] + "<br>" + desserts.EasySugarCookies[2] + "<br>" + desserts.EasySugarCookies[3] + "<br>" + desserts.EasySugarCookies[4] + "<br>" + desserts.EasySugarCookies[5] + "<br>" + desserts.EasySugarCookies[6] + "<br>" + desserts.EasySugarCookies[7];
text_bigfield.htmlText = desserts.ChocolateMeringuePie[1] + "<br>" + desserts.ChocolateMeringuePie[2] + "<br>" + desserts.ChocolateMeringuePie[3] + "<br>" + desserts.ChocolateMeringuePie[4] + "<br>" + desserts.ChocolateMeringuePie[5] + "<br>" + desserts.ChocolateMeringuePie[6] + "<br>" + desserts.ChocolateMeringuePie[7] + "<br>" + desserts.ChocolateMeringuePie[8] + "<br>" + desserts.ChocolateMeringuePie[9] + "<br>" + desserts.ChocolateMeringuePie[10];
text_bigfield.htmlText = desserts.SweetAndSaltyCaramelApples[1] + "<br>" + desserts.SweetAndSaltyCaramelApples[2] + "<br>" + desserts.SweetAndSaltyCaramelApples[3] + "<br>" + desserts.SweetAndSaltyCaramelApples[4] + "<br>" + desserts.SweetAndSaltyCaramelApples[5] + "<br>" + desserts.SweetAndSaltyCaramelApples[6] + "<br>" + desserts.SweetAndSaltyCaramelApples[7];

btn_pistachio.addEventListener(MouseEvent.CLICK, pistachiotext);
btn_coconut.addEventListener(MouseEvent.CLICK coconuttext);
btn_cookie.addEventListener(MouseEvent.CLICK cookietext);
btn_chocolate.addEventListener(MouseEvent.CLICK chocolatetext);
btn_caramelapple.addEventListener(MouseEvent.CLICK caramelappletext);

function pistachiotext(event:MouseEvent){
text_headline.text[0]
text_bigfield.htmlText[1]
}

function coconuttext(event:MouseEvent){
text_headline.text[0]
text_bigfield.htmlText[2]
}
function cookietext(event:MouseEvent){
text_headline.text[0]
text_bigfield.htmlText[3]
}
function chocolatetext(event:MouseEvent){
text_headline.text[0]
text_bigfield.htmlText[4]
}
function caramelappletext(event:MouseEvent){
text_headline.text[0]
text_bigfield.htmlText[5]
} 
```

我知道这些功能有些古怪，但我不太清楚是什么。我一直在谷歌搜索并浏览我的书（我的老师要求但从未教过）。他改变了我们做这件事的方式，并没有真正考虑这种新的方式，这一事实真的让我很反感。

现在输入所有内容的方式出现编译器错误：

场景 1，图层“动作”，第 1 帧，第 31 行 1084：语法错误：在椰子文本之前需要右括号。场景 1，图层“操作”，第 1 帧，第 32 行 1084：语法错误：在 cookietext 之前需要 rightparen。场景 1，图层“操作”，第 1 帧，第 33 行 1084：语法错误：在巧克力文本之前需要右括号。场景 1，图层“操作”，第 1 帧，第 31 行 1084：语法错误：在 caramelappletext 之前需要 rightparen。

编辑：我现在收到输出错误：ReferenceError: Error #1069: Property 1 not found on String 并且没有默认值。在 KaraRichardsonRecipesDigitalA1_fla::MainTimeline/pistachiotext()

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:53:33.533

您需要在函数的参数之间放置一个**, ，例如：**

```
 btn_pistachio.addEventListener(MouseEvent.CLICK, pistachiotext);
 btn_coconut.addEventListener(MouseEvent.CLICK, coconuttext);
 btn_cookie.addEventListener(MouseEvent.CLICK, cookietext);
 btn_chocolate.addEventListener(MouseEvent.CLICK, chocolatetext);
 btn_caramelapple.addEventListener(MouseEvent.CLICK, caramelappletext); 
```

# zend-framework - 基本 Zend 应用程序 - URL 未正确路由

> ID：13751620
> 
> 赞同：0
> 
> 时间：2012-12-06T20:05:24.800
> 
> 标签：zend-framework, frameworks

我是 Zend 的新手，正在尝试创建我的第一个 Zend 应用程序。我使用 zf.sh 创建我的项目。我保留了所有内容，只修改了默认 IndexController.php 中的 indexAction 方法，以将一些数据分配给视图。

我转到 URL mydomain/myapp/ 并成功加载视图。但是，我转到 mydomain/myapp/index 却找不到一个页面。我在 IndexController.php 中创建了另一个名为 testAction 的方法。我尝试通过 mydomain/myapp/index/test 访问，但也找不到一个页面。

由于我保留了所有配置（由 zf.sh 生成），我认为这一切都应该开箱即用，所以我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:00:46.563

听起来这可能是您新项目的虚拟主机设置的问题。

快速入门中有一些关于[创建虚拟主机](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-project.html#learning.quickstart.create-project.vhost)的信息。需要注意的重要事项是`Document Root`和`Directory`部分应该具有相同的路径，指向`public`您的项目文件夹。该`AllowOverride All`指令也很重要，因为它允许目录`.htaccess`中的文件`public`设置重写规则。

如果您曾经`zf.sh`创建过项目，那么您应该会在`docs`目录中看到一个名为`README.txt`. 此文件将包含一些文本以及示例 vhosts 配置 - 它应该已经包含正确的配置以帮助您入门。您可以简单地将此文件中的部分剪切并粘贴`<VirtualHost>...</VirtualHost>`到 vhost 文件中（您需要为您的特定操作系统制定正确的方法来执行此操作），它应该可以正常工作。

对于 Ubuntu，我似乎记得的一件事是目录中的`sites-available`文件*不应*以 a 结尾，`.conf`否则它们*将不会*被解析 (YMMV)。您还必须记住启用虚拟主机（`sudo a2ensite <The name of your vhost>`适用于 Ubuntu）并重新加载 apache 配置（`sudo apache2 reload`适用于 Ubuntu）。

另请注意，这`zf.sh`将在您的项目`public`目录中创建一个 .htaccess 文件。您不需要触摸此文件，但请确保它在那里。它包含重写规则，告诉 apache 通过`index.php`路由发送应用程序的所有请求。

希望这可以帮助。

# ios - 如何在 MagicalRecord 版本 >= 2.0 中使用上下文？

> ID：13751626
> 
> 赞同：2
> 
> 时间：2012-12-06T20:05:41.623
> 
> 标签：ios, core-data, nsmanagedobjectcontext, magicalrecord

我在正确使用 MagicalRecord 时遇到问题；何时使用 MR_save 与 MR_saveNestedContexts？后者似乎是更好的选择：

> 这意味着可能需要使用 MR_saveNestedContexts 而不是典型的 MR_save 方法，以便将更改一直保存到持久存储

但是一些节省是异步发生的，所以我不知道这是否适合每个用例。

另外 - 如何读取、更改和保存数据，尤其是在后台？使用默认上下文 contextForCurrentThread?

在读取、编辑、保存以及何时使用哪种保存方法时，是否有一些规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T21:42:51.260

I've had the most success using the `MR_saveWithBlock:` and `MR_saveWithBlockAndWait:` methods. The only gotcha is that if you are using a NSManagedObject from a different context/thread in the block you will want to grab a version of it in the local context using the `MR_inContext:` method.

# jquery - jquery $variable 检查属性是否等于

> ID：13751629
> 
> 赞同：0
> 
> 时间：2012-12-06T20:06:05.100
> 
> 标签：jquery

[http://jsfiddle.net/2Wpfw/16/](http://jsfiddle.net/2Wpfw/16/)

这似乎真的是微不足道的问题，但我不能终生解决这个问题。

我有这个 jQuery 变量...

```
var $selectArea = $("ul#1 li input[type='checkbox'],
ul#2 li input[type='checkbox'], ul#3 li input[type='checkbox']"); 
```

我想运行这个...

```
$selectArea.closest('li').addClass('box-checked'); 
```

但前提是`$selectArea`属性`checked`是`"checked"`- 非常简单，对吧？

所以我试过这个...

```
if ( $selectArea.attr("checked") == "checked" ) {

    $selectArea.closest('li').addClass('box-checked');

} 
```

和...

```
$selectArea.filter('[checked="checked"]').closest('li').addClass('box-checked'); 
```

还有这个......（但认为我在这里嗅到了错误的树）

```
$selectArea.is('[checked="checked"]').closest('li').addClass('box-checked'); 
```

想法会很棒，谢谢。

[http://jsfiddle.net/2Wpfw/16/](http://jsfiddle.net/2Wpfw/16/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:08:56.340

这是因为您在`change`复选框的事件中执行此操作。继续检查其中一个复选框 - 它将添加类。

我会将您希望选中复选框的代码设为一个单独的函数，以便您可以轻松调用它`onload`并`onchange`获得相同的结果。

这是一个更新的[小提琴](http://jsfiddle.net/2Wpfw/18/)，向您展示我的意思。

```
// reusable function
function check($elem)
{
    $elem.closest('li').toggleClass('box-checked', this.checked)
}

$selectArea.on('change', function() {
    check($(this));
});

$(function(){
    // onload get all checked inputs via the :checked selector 
    check($('input:checked'));
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:09:24.873

你试过 $selectArea.is(':checked') [http://api.jquery.com/checked-selector](http://api.jquery.com/checked-selector/) /

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:17:10.540

尝试这个：

```
$selectArea.each( function(i,e) {
    if ( $(e).is(':checked') ) {    
        $(e).closest('li').addClass('box-checked');
    }
}); 
```

正如你在这里看到的：http: [//jsfiddle.net/darkajax/75kPU/3/](http://jsfiddle.net/darkajax/75kPU/3/)

# sql - 如果存储过程用于批量选择和单行选择，SQL Server 如何利用查询计划？

> ID：13751631
> 
> 赞同：2
> 
> 时间：2012-12-06T20:06:06.333
> 
> 标签：sql, sql-server, stored-procedures, sql-execution-plan

我有一个存储过程，用于处理大约 90,000 条记录以返回各种信息；我只是加入一个 SQL 表来过滤要运行的记录（在我的 vb.net 批处理使用它之前从另一个进程加载）。现在，我需要拥有与存储过程中完全相同的逻辑，可用于通过 Windows 应用程序为个人运行的 90,000 人。我最初的想法是使用相同的存储过程（不重复逻辑）并且只有一个加载/使用的临时表变量：--传入的memberID（在通过windows应用程序的情况下）或--包含 90,000 个成员的表（如果没有传入 memberID 并从批处理中调用）。我担心的是，如果它有时用于单个行，有时用于 90,000 行，它可能会对查询计划产生什么影响。性能和效率将如何受到影响？这是一个好主意吗？还是应该只是具有重复逻辑的单独存储过程？

**以下是关于我正在谈论的内容的更多详细信息。我试图简化它，并且还必须重命名所有内容才能在线显示。

```
--===========================================================================================
--The first query is getting all the members information for the batch run.
--It is joining to a tmpMembers table which is loaded with the members for the batch run 
--(filtering it down to approxiately 90,000 members for that batch run)

CREATE PROCEDURE s_GetMembersInfoSEL
AS
SELECT * --Includes a great deal of output (some of which is calculated before being returned)
FROM Members m 
INNER JOIN tmpMembers tm
  ON tm.MbrID = m.MbrID
--Also a bunch of other joins to member, claim, service, etc tables for the additional info.  

--===========================================================================================

--Proposed changes...

CREATE PROCEDURE s_GetMembersInfoSEL
                            @MbrID INT = NULL
AS
DECLARE @MbrsTable TABLE (MbrID INT  PRIMARY KEY)

IF @MbrID IS NULL
  BEGIN 
    INSERT INTO @MbrsTable          
    SELECT MbrID
    FROM tmpMembers
  END
ELSE
  BEGIN 
    INSERT INTO @MbrsTable
                (MbrID)         
    VALUES (@MbrID)
  END  

SELECT * --Includes a great deal of output (some of which is calculated before being returned)
FROM Members m 
INNER JOIN @MbrsTable tm
  ON tm.MbrID = m.MbrID
--Also a bunch of other joins to member, claim, service, etc tables for the additional info. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:01:30.070

您使用表变量的方式可能会导致使用效率低下的计划。

从文章[查询性能和表变量](http://blogs.msdn.com/b/psssql/archive/2010/08/24/query-performance-and-table-variables.aspx)：

> 编译包含表变量的批处理或存储过程时，表变量的行数是未知的。因此，优化器必须做出一些假设。 **它估计表变量的行数非常少。这会导致计划效率低下。** 大多数时候，嵌套循环连接与表变量一起用作外部表。如果表变量中存在大量行，这将导致内表被执行多次。
> 
> ...
> 
> 如果您有大量行要填充到表变量中，请考虑使用此解决方案。 **您可以将选项重新编译添加到涉及表变量与其他表连接的语句中。通过这样做，SQL Server 将能够在重新编译时检测行数，因为这些行已经被填充。** 此选项仅适用于 SQL Server 2005 及更高版本。

（重点补充）

您更新后的查询如下所示：

```
SELECT *
FROM Members m 
INNER JOIN @MbrsTable tm
  ON tm.MbrID = m.MbrID
OPTION (RECOMPILE) 
```

但是，请注意，如果存储过程执行得足够频繁，重新编译可能会导致其自身的性能问题。在这种情况下，您可能会考虑使用不同的方式来整合此逻辑，例如使用视图或用户定义的函数，并将这两种不同的场景拆分为单独的查询并避免使用表变量。

# java - 调用方法“.class 预期”

> ID：13751634
> 
> 赞同：0
> 
> 时间：2012-12-06T20:06:16.033
> 
> 标签：java, class, methods

尝试使用以下代码从主类运行 start 方法时：

```
public class rungame {
    public void run() {
        Menu.start(string[]);
    }
} 
```

我试图运行的方法是：

```
 public class Menu{

    public static void start(String[] args){
        for( ; ; ){
            System.out.println("\nWelcome To The Block Game By Joe Easton\n");
            System.out.println("Enter S To Start");
            System.out.println("Enter H For Help");
            System.out.println("Enter E To Exit");
            System.out.println("\nWhat is your command?");

            //loop looking for input
            for( ; ; ){

                //private
                String answer;
                Keyboard kb = new Keyboard();
                answer = kb.readString();

                if(answer.charAt(0) == 'S' || answer.charAt(0) == 's' || answer.charAt(0) == 'H' || answer.charAt(0) == 'h' || answer.charAt(0) == 'e' || answer.charAt(0) == 'E') {

                    if(answer.charAt(0) == 'S' || answer.charAt(0) == 's'){
                        System.out.println("\nWhat is your name?");
                        String name;
                        name = kb.readString();

                        System.out.println("\nPress y to start");
                        String start;
                        start = kb.readString();

                        if(answer.charAt(0) == 'y' || answer.charAt(0) == 'Y') {

                        }

                        else{break;
                        }
                    }

                    if(answer.charAt(0) == 'H' || answer.charAt(0) == 'h'){

                                    System.out.println("\nIn this game, you have to avoid the B's by moving your character P. \nThe longer you last, the more points you get. \n\nTo move your character:\nUse the G key to go left\nUse the H key to go right\nUse the J key to go up\nUse the K key to go down");
                                    System.out.println("\nWhat is your command?");
                            }

                    if(answer.charAt(0) == 'E' || answer.charAt(0) == 'e'){
                    System.exit(0);
                    }
                }
                else{System.out.println("\nInvalid Command!");
                System.out.println("\nWhat is your command?");
                }
            }
        }
    }
} 
```

当我尝试从另一个类运行它时出现 .class 预期错误，菜单类编译并运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:07:30.560

什么是`string[]`，你应该传递有效的实例`String[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:17:53.473

如果您正在运行`rungame`，那么我怀疑它是如何运行的，因为它没有 main 方法。它确实有一个 run 方法，但该类既不实现`Runnable`接口也不扩展`Thread`类。

`string[]`还有其他人所说的模棱两可。

此外，如果两个类都在同一个文件中，则`public`单个文件中只能存在 1 个类。如果要将`public`标识符附加到类，则需要准备单独的文件。

检查以上内容，然后它应该可以正常工作。

# c - c中的双精度比较失败

> ID：13751639
> 
> 赞同：1
> 
> 时间：2012-12-06T20:06:46.803
> 
> 标签：c, floating-point, double, precision

> **可能重复：**
> [为什么“for( i = 0.1 ; i != 1.0 ; i += 0.1)” 不会在 i = 1.0 处中断？](https://stackoverflow.com/questions/13542220/why-for-i-0-1-i-1-0-i-0-1-doesnt-break-at-i-1-0)

我有一个数字（实数）区间 [x, y]。我必须使用类似的东西遍历它：

```
nr = 0;
for (i = x; i <= y; i += step) //step is a small double value
    nr++; 
```

对于步长为 0.001 的 [-1, 1]，很明显 nr 应该是 2001（-1.000 ... 0.999 1.000），但是它计算出 nr = 2000（我进行了调查，但最后一次比较失败：0.999 + 0.001 > 1.000）

如何计算准确的 nr 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:09:12.150

您需要使用整数来执行此操作，或者对不精确感到满意，因为浮点数和双精度数本质上是不精确的*。您的代码完全按照 C 语言规范工作。在需要精确精度的情况下使用浮点数和双精度数是不安全的。

除此之外，您需要在问题中提供有关您的要求的更多信息。如果`nr`是温度，那么要计算您需要使用不存在或不存在的物理学的确切值（我不是物理学家，所以我不能告诉你）。如果`step`实际上是一个不合理的值，那么您必须向上或向下舍入-您的调用以及正确的调用取决于您的业务逻辑要求。如果它是合理的并且不需要四舍五入，那么您需要乘以最小公分母并使用`int`s （或 C 中的分数类等）。

*当分数的分母是 2 的幂时，每条评论的浮点数/双精度数是精确的，如果你可以强制`step`并`y`遵守这一点，你的问题就会很清楚，但当然，如果`step`不均匀划分`y`，你需要做与上面完全相同的业务逻辑处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:12:08.240

您遇到的问题是浮点数 (`float`或`double`) 没有准确存储，因此内存中的表示往往比不准确。

所以你有两个选择——使用精确的数字或​​使用整数作为循环的次数，然后计算值。

这可以按如下方式完成：

```
int numberOfIntervals = 2000;
double lowestValue = -1.0;
for (loop = 0; loop <= numberOfIntervals; ++loop)
{
    double v = (0.001 * loop ) + lowestValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:12:31.403

```
int nsteps = (int)((y-x)/step);
for(int i=0; nsteps; ++i){
   double v = x + (i*step);  // use v in your calculations
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T20:32:26.543

二进制浮点不精确是不正确的。正确的是，对于内容符合 2 的不同（正和/或负）幂之和的数字，该值将是精确的。显然，十进制数符合十的幂的总和，所以它们不会是精确的。以四、八和十六为底是一致的，因为它们是二的倍数。

我很久以前发布了[这个答案](https://stackoverflow.com/questions/4738768/printing-double-without-losing-precision/4851671#4851671)，它会给你一个关于浮点数有多精确的提示。您还可以通过将 2 的负幂求和来查看分数如何组合。

至于如何解决问题，您拥有所需的工具。如果算法不适合，您可以使其适合。

# ajax - 带有 f:ajax 的 JSF 2 自定义复合组件

> ID：13751641
> 
> 赞同：6
> 
> 时间：2012-12-06T20:06:54.930
> 
> 标签：ajax, jsf-2, event-handling, custom-component, composite-component

我正在尝试使用这个 jQuery 插件[http://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)创建一个自定义复合组件 colorPicker 。

我希望能够附加一个 jsf 标签`f:ajax`，并在选择颜色时，对服务器执行 ajax 调用。我一直在测试这个功能，一切似乎都是正确的，但显然我错过了一些东西，因为从来没有调用过监听器。

这是我的组件代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:composite="http://java.sun.com/jsf/composite">
<composite:interface>
<composite:attribute name="label" />
<composite:clientBehavior name="customEvent" event="change" targets="#{cc.clientId}"/>
</composite:interface>
<composite:implementation>
    <h:outputStylesheet library="css" name="colorpicker/colorpicker.css" />
      <h:outputStylesheet library="css" name="colorpicker/layout.css" />
      <h:outputScript library="js" name="colorpicker/jquery.js" target="head"/>
      <h:outputScript library="js" name="colorpicker/colorpicker.js" target="head"/>
      <h:outputScript library="js" name="colorpicker/eye.js" target="head"/>
      <h:outputScript library="js" name="colorpicker/utils.js" target="head"/>
      <h:outputScript library="js" name="colorpicker/layout.js" target="head"/>
      <h:outputScript library="js" name="colorpicker/hex.js" target="head"/>

    <div id="#{cc.clientId}" class="colorSelector">
        <div style="background-color: #0000FF;"></div>
    </div>

    <script>

    //jQuery(document).ready(function() {

      jQuery('##{cc.clientId}').ColorPicker({
        color: '#0000ff',
        onShow: function (colpkr) {
          jQuery(colpkr).fadeIn(2000);
          alert('onchange1');
        launchEvent(document.getElementById('#{cc.clientId}'));
        alert('onchange2');
          //return false;
        },
        onHide: function (colpkr) {

          jQuery(colpkr).fadeOut(2000);
          return false;
        },
        onChange: function (hsb, hex, rgb) {

        }
      });

    //});

    /* <![CDATA[ */
    function launchEvent(fieldName) {
      alert('launchEvent1');
        if ("fireEvent" in fieldName) {
          alert('launchEvent2');
          fieldName.fireEvent("onchange");
          alert('launchEvent3');
    } else {
      alert('launchEvent4');
    var evt = document.createEvent("HTMLEvents");
    alert('launchEvent5');
      evt.initEvent("change", false, true);
      alert('launchEvent6');
      fieldName.dispatchEvent(evt);
      alert('launchEvent7');
    }
        /* ]]> */
}

  </script>

</composite:implementation>
</html> 
```

这是页面实现：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  
xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:r="http://richfaces.org/rich"
      xmlns:a="http://richfaces.org/a4j"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:cp="http://java.sun.com/jsf/composite/component">

<h:head>
   <title>Test</title>  
</h:head>
<h:body>
  <f:view>
    <h:form prependId="false">
      <cp:colorpicker id="colorSelector">
        <f:ajax event="customEvent" listener="#{themeBean.changeColor1}" onevent="alert('event raised');"/>
      </cp:colorpicker>
      <h:inputText value="#{themeBean.color1}"></h:inputText>
    </h:form>
  </f:view>
</h:body>       

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:19:17.330

`<f:ajax>`只能附加到[`ClientBehaviorHolder`](http://docs.oracle.com/javaee/6/api/javax/faces/component/behavior/ClientBehaviorHolder.html)诸如。`<h:inputText>`纯 HTML`<div>`不是这样一个组件。您基本上需要一个 HTML`<input>`元素，而不是一个`<div>`元素。更重要的是，您将如何在 bean 中设置提交的值？

```
<cc:interface>
    ...
    <cc:clientBehavior name="customEvent" targets="input" event="valueChange" />
</cc:interface>
<cc:implementation>
    ...    
    <h:inputText id="input" value="#{cc.attrs.value}" />

    <h:outputScript>
        jQuery("[id='#{cc.clientId}:input']").ColorPicker({ 
            // ...
        });
    </h:outputScript>
</cc:implementation> 
```

*（请注意，我也修复了 jQuery 选择器；这样 JSF 客户端 ID 分隔符`:`将被正确考虑，而不是使 CSS 选择器畸形）*

* * *

**与具体问题无关**，您的用法`<f:ajax onevent>`是错误的。它应该指向一个函数引用，它不应该包含一些函数调用。正确的用法是

```
<f:ajax ... onevent="functionName" />

...

<h:outputScript>
    function functionName(data) {
        alert("Event " + data.status + " raised");
    }
</h:outputScript> 
```

### 也可以看看：

*   [jsf 2.0 (myfaces) 中的 ajax 调用，在渲染完成之前调用 ajax 标签中的 onevent Javascript 函数](https://stackoverflow.com/questions/11350769/ajax-call-in-jsf-2-0-myfaces-the-onevent-javascipt-function-in-the-ajax-tag-g/11351236#11351236)

# jquery - Fancybox 2，将标题描述更改为 alt

> ID：13751642
> 
> 赞同：-1
> 
> 时间：2012-12-06T20:07:01.920
> 
> 标签：jquery, fancybox

我有这样的链接

```
<a class="fancybox-effects-c" rel="gallery1" href="images/large/9.png"  title="project description here >> <a href='http://www.google.com'target='_blank'>View website</a>"> <img src="images/thumbs/107.png" alt="" /></a> 
```

但是在悬停时它会显示代码。在玩弄了很多东西之后，我决定将标题描述切换到该`alt`字段可以解决我的问题，但无法弄清楚如何做到这一点。我假设它在 jquery.fancybox.js 文件中，我只需要切换它。任何人都可以帮忙吗？

更新：我找到了一个更好的解决方案，无需将标题描述移动到 alt 字段我可以使用此代码禁用悬停功能

```
var tempTitle = "";
$('a[title]').hover(
function(e){
     e.preventDefault();
     tempTitle = $(this).attr('title');

     $(this).attr('title', '');

         $(this).mousedown(
            function(){
                $(this).attr('title', tempTitle);
            }
        );
 }
 ,
 function() {
   $(this).attr('title', tempTitle);
 }
 ); 
```

奇迹般有效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:12:45.810

如果有这个 html ：

```
<a class="fancybox-effects-c" rel="gallery1" href="images/large/9.png"><img src="images/thumbs/107.png" alt="project description here &gt;&gt; <a href='http://www.google.com'target='_blank'>View website</a>" /></a> 
```

.... fancybox 的所需标题在标签（缩略图）的`alt`属性中`img`，然后使用以下代码：

```
$(document).ready(function() {
    $(".fancybox-effects-c").fancybox({
        beforeShow: function() {
            this.title = $(this.element).find('img').attr('alt');
        }
    }); // fancybox
}); // ready​ 
```

**注意**，我使用`&gt;`而不是`>`避免脚本问题。

见**[演示](http://jsfiddle.net/22ywQ/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T20:27:14.970

尝试这个：

```
<a class="fancybox-effects-c" 
   rel="gallery1" href="images/large/9.png" 
   title="project description here >> <a href='http://www.google.com' target='_blank'>View website</a>">
<img src="images/thumbs/107.png" alt="" />
</a> 
```

`target`在你的之前没有空格`title`

# c - 寻求澄清/理解 gcc 的标签作为价值特征

> ID：13751647
> 
> 赞同：2
> 
> 时间：2012-12-06T20:07:17.940
> 
> 标签：c

在一个小型嵌入式系统上工作时，我想尝试使用诸如 C 协程之类的东西，你发现这些协程是用 switch/case/macro 结构和 gcc 的标签作为值扩展来实现的。所以我想出了一些结构和函数以及一个模式，这样我就可以编写如下函数（只是一个测试/示例函数）：

```
void fiber1(FiberContext *fiber)
{
    if (fiber->restore) goto fiber->restore; // initial jump if called for
stateA:
    printf("Fiber 1: A state\n");
    fiber->misc = &&stateB;
    fiber->restore = &&sleep;
    return;
stateB:
    printf("Fiber 1: A state\n");
    fiber->misc = &&stateA;
    fiber->restore = &&sleep;
    return;
sleep:
    fiberSleepTicks(fiber, 1000000);
    fiber->restore = fiber->misc ? fiber->misc : &&stateA;
    return;
} 
```

但是 GCC 不喜欢原来的`goto fiber->restore`（`restore`是 FiberContext 的 void* 成员）。我的想法是，基本上，当我在外部结构中返回时，我会捕获要跳转到的标签，离开函数，然后返回并跳转到新标签。

我认为，我得出的结论是 GCC 不知道该怎么做，因为 && 运算符产生一个绝对跳转地址，而不是相对于当前函数堆栈的跳转地址。所以我不能安全地重用它，因为没有什么可说的，我不会用不同的堆栈深度调用这个函数。

所以我的问题基本上是双重的。我对为什么它不起作用/编译的理解正确吗？或者是别的什么，如果是这样，我在这个功能上做错了什么？我正在编译只是`gcc -std=gnu99`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:43:54.583

尝试

```
goto *(fiber->restore); 
```

看

[http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)

此外，堆栈深度与函数*代码*地址无关——只有共享库重定位才有意义（上面的页面也解释了如何很好地做到这一点）。

# c# - PetaPoco - 来自动态类型的属性名称

> ID：13751648
> 
> 赞同：2
> 
> 时间：2012-12-06T20:07:18.360
> 
> 标签：c#, dynamic, reflection, petapoco

我正在尝试返回从数据库动态类型返回的属性名称：

```
var d = mDataAccess.Single<dynamic>("select col1 = 'asd', col2 = 'qwe'");
object o = d;
var props = o.GetType().GetProperties();
int propsCount = props.Count(); 
```

propsCount 为 0，但我希望有 2，在这种情况下，下面的代码将返回给我两个名称：col1 和 col2

```
List<string> names = o.GetType().GetProperties().Select(x => x.Name).ToList(); 
```

任何想法为什么我没有得到我期望的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:32:19.100

如果您对字典列表感到满意，可以使用：

```
var results = database.Fetch<dynamic>(sql).Cast<IDictionary<string, object>>().ToList(); 
```

如果您想将其转换为`Dictionary<string, List<string>>`，请执行以下操作：

```
result.First().Keys.ToDictionary(k => k, k => result.Select(r => r[k].ToString()).ToList()); 
```

检查结果计数后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:42:43.230

单返回 ExpandoObject。

您可以使用以下方法从查询中获取名称：

```
(d as IDictionary<String, object>).Keys
List<string> names = (d as IDictionary<String, object>).Keys.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:14:37.793

由于没有人可以提供有效的答案，我将发布我能够解决此问题的解决方案。

```
var e = new Dictionary<string, List<string>>();

Sql sql = new Sql("select col1 = 'asd', col2 = 'qwe'");
var d = mDataAccess.Query<dynamic>(sql);

if (d != null && d.Count() > 0)
{
    List<string> cols = new List<string>();
    foreach (var t in d.First())
    {
        cols.Add(t.Key);
    }

    foreach (var key in cols)
    {
        List<string> values = new List<string>();
        foreach (var row in d)
        {
            foreach (var t in row)
            {
                if (t.Key == key) values.Add(t.Value.ToString());
            }
        }
        e.Add(key, values);
    }
}

return e; 
```

# iphone - iOS + 内存管理中的多个故事板

> ID：13751654
> 
> 赞同：6
> 
> 时间：2012-12-06T20:07:35.207
> 
> 标签：iphone, memory-management, ios6, uistoryboard

我在我的 iOS6 / iOS6 应用程序中将多个故事板与 NIB 文件混合在一起。

**内存管理如何与多个故事板一起工作？**

*   启动storyboardA后，如果我返回另一个nib文件/转到另一个storyboard，那个storyboardA会留在内存中吗？
*   我是否能够像使用 UIViewControllers 获取导航控制器堆栈中的视图数组**一样在堆栈中获取故事板的“数组” ？**
*   对于内存管理，我可以从内存中弹出或删除情节提要吗？当我转到另一个故事板时，是否将其设置为 nil ？

我将多个故事板与 nib 文件混合使用的原因：

*   我想要复杂的叙事故事板流程。将它们全部放在一个地方是没有意义的。
*   最终我将与许多不同的人一起工作，我发现团队合作的论点，版本控制足以选择多故事板路线
*   我正在混合 NIB 文件，因为情节提要还不能处理复杂的 nib 文件、许多编程视图等。

**我的代码片段**

在 InitialNibFile.m <-- 从 appdelegate 启动的内部。

```
- (IBAction)newStoryboardBtnPressed:(id)sender {

[self.view removeFromSuperview]; // here I remove this view from the superview to save memory
UIStoryboard *newStoryboard = [UIStoryboard storyboardWithName:@"NewStoryboard" bundle:nil];
UIViewController *initialSettingsVC = [newStoryboard instantiateInitialViewController];

[self presentViewController:initialSettingsVC
                   animated:YES completion:nil];

 } 
```

在这里，在故事板场景中的 UIViewController 视图中。

```
- (IBAction)anotherStoryboardBtnPressed:(id)sender {

    // I'm inside a storyboard right now. I'm calling another storyboard. 
    // can i remove this storyboard before i launch the otherone? will keeping 2 or 3 toryboards in memory cause a memory leak?

    UIStoryboard *settingsStoryboard = [UIStoryboard storyboardWithName:@"AnotherStoryboard" bundle:nil];
    UIViewController *initialSettingsVC = [settingsStoryboard instantiateInitialViewController];
    // i'm going to load this view controller modally
    // initialSettingsVC.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:initialSettingsVC
                       animated:YES
                     completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T20:24:35.520

所以我们开始 =)

**启动storyboardA后，如果我返回另一个nib文件/转到另一个storyboard，那个storyboardA会留在内存中吗？**
故事板由您创建的 UIViewController 保留（通过`storyboard`）属性。所以是的，它确实保留在内存中，直到它的所有视图控制器都被释放。查看（简要）[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

**我是否能够像使用 UIViewControllers 获取导航控制器堆栈中的视图数组一样在堆栈中获取故事板的“数组”？**
不，因为故事板是相互独立的。但是，您可以通过遍历导航堆栈中的视图控制器来获取故事板。

**对于内存管理，我可以从内存中弹出或删除情节提要吗？当我转到另一个故事板时，是否将其设置为 nil ？**
只要您在内存中有一个实例化的视图控制器，它就会一直存在。当您使用`storyboardWithName:`自动释放的对象时，它会返回给您。视图控制器会保留它，所以不用担心释放或设置为 nil。

对于您的其他问题的参考，我尊重 SO 和互联网的其余部分：
[SO](https://stackoverflow.com/questions/10965749/what-is-the-best-practice-when-using-uistoryboards)
[UIStoryboard best practice](http://robsprogramknowledge.blogspot.pt/2012/01/uistoryboard-best-practices.html)
[Multiple Storyboards in iOS on SO](https://stackoverflow.com/questions/8297701/using-multiple-storyboards-in-ios)

快乐的故事板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T20:43:21.213

听起来您正试图避免在内存中保留不必要的视图控制器。避免这种情况是一件好事，因为视图控制器很大，因为它们引用了许多其他对象。您的问题听起来好像您担心右舷引用情节提要中的所有视图控制器，因此也将它们全部保留。事实并非如此。故事板对象只是对应用程序包资源目录中文件的引用，每次要求创建新的视图控制器时，它都会从这些资源中实例化一个新的视图控制器。例如，它可以多次从情节提要中实例化同一个模板视图控制器。实例化后，它不会保留任何实时视图控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-30T04:24:17.930

**听起来您正试图避免在内存中保留不必要的视图控制器**

重要的是要意识到情节提要一旦实例化，就会在应用程序的整个生命周期内保存在内存中。如果这不是您想要的，那么您可以将静态常量属性转换为静态计算属性。创建情节提要的扩展，您可以为视图控制器应用同样的内容，以使您的应用程序内存干净。

```
import UIKit

extension UIStoryboard {

static var main: UIStoryboard {
    return UIStoryboard(name: "Main", bundle: Bundle.main)
} 
```

}

# openldap - 尝试在 OpenLDAP 2.4 中启用“olcAllows：bind_v2”

> ID：13751655
> 
> 赞同：2
> 
> 时间：2012-12-06T20:07:36.523
> 
> 标签：openldap

我有一个运行 OpenLDAP 2.4 的 Linux 服务器，它使用 cn=config 设置而不是 slapd.conf 文件。服务器目前不支持 LDAPv2 连接，只支持 v3，所以我尝试将 olcAllows: bind_v2 添加到 cn=config。

一些搜索使我相信我可以编辑 cn=config.ldif 文件并重新启动 slapd 但这并没有做出改变。我现在怀疑我需要使用 ldapmodify 来使用更新后的 cn=config.ldif 来更新数据库。我对 OpenLDAP 不是很有经验，尤其是在使用 cn=config 方面，所以我对运行一个草率的命令和搞砸服务器有点紧张。

在这种情况下如何启用 LDAPv2 有什么建议吗？

谢谢， RP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:58:30.933

自从

> 2.3 中的 slapd 运行时配置完全支持 LDAP，并且可以使用标准 LDAP 操作和 LDIF 中的数据进行管理。[openldap_doc](http://www.openldap.org/doc/admin23/slapdconf2.html)

使用 ldapmodify 是您想要做的，假设您使用 slapd.config 而不是 slapd.conf 文件正在运行 openldap 设置。

要添加`olcAllows: bind_v2`您，请创建一个包含以下内容的 ldif 文件：

```
 dn: cn=config
    add: olcAllows
    olcAllows: bind_v2 
```

然后添加它，您使用可以编辑 cn=config 的 dn 运行 ldapmodify

```
ldapmodify -D <root/admin dn> -w <password> -f add_olcAllows_bind_v2.ldif 
```

要删除它，您可以使用单独的 remove_olcAllows_bind_v2.ldif

```
 dn: cn=config
    delete: olcAllows

ldapmodify -D <root/admin dn> -w <password> -f remove_olcAllows_bind_v2.ldif 
```

与任何 ldif 文件一样，请注意空格。另外，如果你有 SASL 工作，我想你可以使用`ldapmodify -Y EXTERNAL -H ldapi:/// -f <filename>`我还没有尝试过这个。

免责声明：我在 openldap 方面有大约一个月的同等经验。我是一个初学者。

-- 月相学

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T16:29:19.090

CheckPoint R80 不仅支持 LDAP v3。它只支持v2。

谢谢你。

# ajax - 为什么我的 SessionScoped ManagedBean 在一个地方显示正常而在另一个地方显示为空？

> ID：13751656
> 
> 赞同：0
> 
> 时间：2012-12-06T20:07:55.020
> 
> 标签：ajax, jsf

以下 facelet 代码在employeeId inputText 组件失去焦点时呈现一条消息，正在成功执行...

```
<h:inputText id="employeeId" value="#{questionAnswerAction.questionAnswerActionForm.employeeId}" 
 required="true" requiredMessage="#{app:requiredFieldMessage(bundle, 'label.peoplesoftId')}"
 binding="#{questionAnswerAction.questionAnswerActionForm.employeeIdInputText}">
    <f:ajax event="blur" render="employeeIdMessage" />
</h:inputText>
<h:message id="employeeIdMessage" errorClass="deg-msg-error" infoClass="deg-msg-info" for="employeeId"></h:message> 
```

但是由于某种原因，当我尝试在另一个 facelet 上应用几乎相同的代码时（不同之处在于它是针对 managerId 而不是 employeeId），当发生在 ajax 调用中触发的 setter 时（`setEmployeeId`在上面的调用中） ，我的 SessionScoped ManagedProperty 在方法中被标记为 null。ManagedProperty 实际上是一个 SessionScoped ManagedBean 本身。

无法弄清楚为什么此代码在一个页面中运行良好，但在另一个 facelet 中，当“set”发生时，ManagedProperty 显示为 null ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:59:02.667

当绑定到比请求范围更广的范围内的 bean 属性时，该`binding`属性会导致问题，例如会话范围，因为您基本上在多个页面包含、页面视图和浏览器选项卡之间共享物理上相同的 JSF 组件状态/windows 贯穿整个会话。摆脱它或将其重新绑定到请求范围的 bean。

> *然后将 UIInput 字段传递给将 FacesContext 消息添加到指定 UIComponent 的方法（在本例中为 UIInput 字段*

只需使用普通`Validator`或`Converter`根据功能要求并将其注册到组件上。如果你抛出一个`ValidatorException`or `ConverterException`，那么被包裹的`FacesMessage`东西会自动出现在正确的位置。这样你就不再需要组件绑定了。

> *将管理器 bean 设置为 RequestScoped 已修复...这很奇怪，因为当我将员工托管 bean 设置为 SessionScoped 时，ajax 功能开始工作*

这由[commandButton/commandLink/ajax action/listener method not invoked 或 input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)中的第 4 点和第 5 点回答。

# vb.net - 如何在 VB.NET 中全局声明结构变量

> ID：13751658
> 
> 赞同：0
> 
> 时间：2012-12-06T20:07:57.407
> 
> 标签：vb.net

我在某个模块之上声明了一个公共结构：

```
<Serializable()> Public Structure aSetup
    Dim check As Boolean
    Dim times As Double
    Dim sTimes As Integer
    Dim noone As String
End Structure 
```

在以任何形式或模块使用它之前，我必须从此结构中声明一个局部变量。

例如：

```
Dim asT as aSetup
asT.noone = "Nemo" 
```

我想知道是否可以`asT`全局声明变量，以便可以通过所有文件获得结构数据。如果可能的话，我该如何以及在哪里做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:12:35.927

您需要将它放在一个静态类中 -`Module`在 VB.NET 中称为 a

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:21:43.330

创建`Shared`附加到某个类的结构的实例。就像是：

```
Public Class Settings
    Private Shared Property asTInitialized As Boolean = False
    Private Shared _asT As aSetup
    Public Shared ReadOnly Property asT As aSetup
        Get
            If Not asTInitialized Then
                _asT.noone = "Nemo"
                'other init code

                asTInitialized = True
            End If
        End Get
    End Property
End Class 
```

然后在其他文件中通过`Settings.asT`.

# objective-c - 选项卡式应用程序中的获取结果控制器

> ID：13751667
> 
> 赞同：1
> 
> 时间：2012-12-06T20:08:27.477
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我正在尝试编写一个带有三个选项卡的选项卡式应用程序，其中使用 Fetched Results Controller 从核心数据中显示数据。

*   表 1 显示了核心数据中的项目列表。
*   选项卡 2 具有删除核心数据中的项目的操作。

现在，即使我删除选项卡 1 中的项目，表格视图也会更新以描述更改。

但是当我从选项卡 2 中删除一个项目，然后返回选项卡 1 时，表不是最新的。

每当我删除选项卡 2 中的项目时，我都尝试委托查看选项卡 1 的控制器，然后表 1 的视图控制器调用：-

```
[self.tableView reloadData];
// Still doesn't work 
```

当我退出应用程序并再次启动它时，它会显示更新的数据。

任何人都可以请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:57:50.757

你确定你在删除后保存你的 ManagedObjectContext 吗？如果您正在创建两个核心数据上下文（每个 tableView 一个）并且没有在第二个选项卡上保存删除，那么您将得到您描述的症状。

# java - 如何在 Java 中动态添加到 JSON 对象中的嵌套元素？

> ID：13751668
> 
> 赞同：1
> 
> 时间：2012-12-06T20:08:32.983
> 
> 标签：java, javascript, json

我想要一个相当于的 json 对象

```
var data = {"nodes":"var postLoadData = {\n nodes:{408868239:{'tipo':'clase','shape':'dot','label':'clase2'},843594076:{'tipo':'clase','shape':'dot','label':'ESTADIA'}},edges:{\n 2:{408868239:{},843594076:{}}}};\n \n sys.graft(postLoadData);"} 
```

我已经这样做了

```
JSONObject jsonObject = new JSONObject();
jsonObject.put("nodes", "var postLoadData = {\n nodes:{408868239:{'tipo':'clase','shape':'dot','label':'clase2'},843594076:{'tipo':'clase','shape':'dot','label':'ESTADIA'}}," +
                "edges:{\n 2:{408868239:{},843594076:{}}}};\n \n sys.graft(postLoadData);"); 
```

我需要动态地向这个 json 对象添加边和节点。怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:48:14.197

你没有 JSON，你在那个字符串中拥有的是这个 javascript 代码：

```
var postLoadData = {
    nodes: {
        408868239: {
            'tipo': 'clase',
            'shape': 'dot',
            'label': 'clase2'
        },
        843594076: {
            'tipo': 'clase',
            'shape': 'dot',
            'label': 'ESTADIA'
        }
    },
    edges: {
        2: {
            408868239: {},
            843594076: {}
        }
    }
};
sys.graft(postLoadData); 
```

最接近的有效 JSON 可能是：

```
{
    "nodes": {
        "408868239": {
            "tipo": "clase",
            "shape": "dot",
            "label": "clase2"
        },
        "843594076": {
            "tipo": "clase",
            "shape": "dot",
            "label": "ESTADIA"
        }
    },
    "edges": {
        "2": {
            "408868239": {},
            "843594076": {}
        }
    }
} 
```

您可以使用上面的 JSON（不是 javascript 代码），然后执行以下操作：

```
JSONObject jsonObject = (JSONObject) JSONSerializer.toJSON( theJsonString ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:18:09.763

您是否阅读过[JSONObject](http://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html)的 API，它定义了您需要的操作。从我所见，您将需要操纵 key 的值`nodes`。

鉴于您的 JSON 中有 JS，我很想知道您的 JS 会是什么样子。你打算打电话`exec`吗？我会非常小心你如何实施。JSON 用于交换数据，您尝试做的是交换 JS，这不是它的目的，这样做也不安全。

# javascript - HTML DIV 上面 DIV 里面 DIV

> ID：13751670
> 
> 赞同：2
> 
> 时间：2012-12-06T20:08:42.560
> 
> 标签：javascript, jquery, html

我正在尝试为我的一个项目构建一个可扩展的幻灯片，但为了让我的 div 看起来像我预期的那样，我陷入了困境。

我有一个 div #container，它可以容纳另外两个 div：一个 #shadow div 和一个 #bgimg div。

```
<div class="container" id="container">
     <div class="shadow"></div>
     <div class="bgimg"></div>
</div>​

.container {
    width:   81px;
    height:  500px;
    background-color: red;
    overflow: hidden;
}

.bgimg {
    width:   300px;
    height:  100%;
    background: url("http://www.jbraccini.com/files/bg.jpg") no-repeat left top;
}

.shadow {
    width:   100%;
    height:  100%;
    background: url("http://www.jbraccini.com/files/container-shadow.png") no-repeat right top;
    position: relative;
} 
```

*   #bgimg div 用于保存幻灯片将显示的实际图像。

*   #container div 溢出属性已设置为隐藏，还有宽度和高度；后来，通过 javascript，我计划检测 mouseover(hover) 和 mouseout 事件以扩展它并以更大的视角显示图像。

*   #shadow div 计划在 #bgimg 之上（在同一个位置但具有更高的 z-index），并且将具有右上对齐的透明 png(image) 作为背景图像，以模拟 #container内部阴影，因此幻灯片似乎（从视觉上讲）以某种方式物理嵌入页面主体。

最终结果将是改变#container 宽度，它也会改变#shadow 宽度，因为它的宽度设置为100%，因此，当#bgimg 未被覆盖时，它会将阴影定位到右上角。

我显然没有达到这样的结果：D #shadow div 保持在 #bgimg 之上，将其推到底部。我试图设置#shadow position: absolute; 但我希望不必通过代码更改#shadow 属性，如果可能的话，我想为此找到一个 css 解决方案。

为了理解的目的，我在这里创建了一些示例剑：http: [//jsfiddle.net/jbraccini/jyuKL/8/](http://jsfiddle.net/jbraccini/jyuKL/8/)

最终结果应该是这样的： [http ://www.jbraccini.com/files/final.jpg](http://www.jbraccini.com/files/final.jpg)

无论如何，我希望有人能启发我。

最好的祝福！

Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:35:18.383

试试这个：

```
.container {
    width:   300px;
    height:  500px;
    background-color: red;
    overflow: hidden;
    position:relative;
}

.bgimg {
    width:   300px;
    height:  100%;
    background: url("http://www.jbraccini.com/files/bg.jpg") no-repeat left top;
}

.shadow {
    left:0;
    right:0;
    top:0;
    bottom:0;
    background: url("http://www.jbraccini.com/files/container-shadow.png") no-repeat right top;
    position: absolute;
    z-index:2;
} 
```

​</p>

# rally - API 2.0p5，看板，在放置时保存数据

> ID：13751674
> 
> 赞同：1
> 
> 时间：2012-12-06T20:08:47.523
> 
> 标签：rally

在我以前的板子 (2.0p2) 上，如果卡片被放入 InDev 列，我有一个功能可以自动将故事分配给当前用户。

我将这段代码移过来，在调试器中检查所有字段似乎都正常，但卡片又回到了原始列。

这是我的听众：我的 cardBoardConfig

```
 listeners: {
     beforecarddroppedsave: function (cardboard, card) {
         var con = Rally.environment.getContext();
         //map the new state from on this card to the new state
         var kState = card.record.get(this.mappedFromField);
         var newState = this.fieldNameMap[card.record.get(this.mappedFromField)];
         card.record.set(this.mappedToField, newState);
          if (kState == 'In Dev') card.record.set('Owner', con.context.user)
    }, 
```

一切似乎调试正常，但卡只是回到原始列，并且没有保存任何数据。

任何帮助，将不胜感激。

# xml - 使用函数库而不使用 或者

> ID：13751675
> 
> 赞同：0
> 
> 时间：2012-12-06T20:08:48.280
> 
> 标签：xml, xslt, libxslt

我有几个具有通用代码的 XSL 转换。公共代码由使用 exslt 的函数扩展构建的函数组成。现在我想将这些函数外包到一个库中，以使它们更易于维护。

转换作为资源编译为可执行文件，并在需要时从内存中读取。我想保持这种状态，并为库使用相同的机制。原因是，可执行文件将始终知道它们在哪里，并且不需要路径配置。
现在我的问题是：如何导入外部样式表，它以*字符串*形式给出，并且不能作为文件使用？

解决问题的一种方法是将样式表写入临时文件并包含这些文件。存在的问题是，临时文件的文件名每次都会更改，因此我必须操纵主要转换以包含临时文件名。在这种情况下，参数不起作用。

关于如何解决这个问题的任何想法，这*应该*是微不足道的？

环境：libxml2、libxslt (xslt 1.0)、exslt 扩展、Linux。

谢谢，
约斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:22:17.857

感谢 Dimitre 和 Michael 将我推向正确的方向。

URIResolver-Mechanism 在 libxml 中称为“目录”，并且可以直接工作（对于简单的用例）：

1.  包括“libxml/catalog.h”
2.  使用函数“xmlInitializeCatalog”初始化系统目录
3.  使用“xmlCatalogAdd”添加分辨率映射
4.  清理，使用“xmlCatalogCleanup”

谢谢你的提示，
约斯特

# android - 尚未显示的按钮的 onclick 侦听器

> ID：13751676
> 
> 赞同：0
> 
> 时间：2012-12-06T20:08:52.533
> 
> 标签：android, layout, button, onclicklistener, forceclose

我在做一个非常简单的事情时遇到了一些麻烦。这是发生了什么：

我有一个显示布局 1 的活动。

布局 1 有一个用于移动到布局 2 的按钮。

布局 2 移回 1。

该活动一直持续到最后一部分。我可以打开它，移动到布局 2，但我无法返回。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    position = 1;
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    if(position == 1 ){
        setContentView(R.layout.p1);        
    }
    if(position == 2 ){
        setContentView(R.layout.p2);        
    }

    final Button p1p21 = (Button) findViewById(R.id.p1p2);
    final Button p2p11 = (Button) findViewById(R.id.p2p1);

    p1p21.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            setContentView(R.layout.p2);

        }

    });

    p2p11.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            setContentView(R.layout.p1);

        }

    });

    p2p11.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            setContentView(R.layout.p1);

        }

    });

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
} 
```

如果我删除这部分：

```
 p2p11.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            setContentView(R.layout.p1);

        }

    }); 
```

然后活动开始了。所以，我猜问题是我不能为一个还不可见的按钮创建一个 onclicklistener？我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:30:00.537

尝试这个：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.p1);

    Button button1 = findViewById(R.id.button1);

    View.OnClickListener listener1 = new View.OnClickListener() {

        public void onClick(View v) {
            setContentView(R.layout.p2);
            Button button2 = findViewById(R.id.button2);
            button2.setOnClickListener(listener2);
        }
    });

    View.OnClickListener listener2 = new View.OnClickListener() {

        public void onClick(View v) {
            setContentView(R.layout.p1);
            Button button1 = findViewById(R.id.button2);
            button1.setOnClickListener(listener1);
        }
    });

    button1.setOnClickListener(listener1);
} 
```

这样，您首先初始化侦听器，然后在您处于特定布局时“膨胀”按钮。

我可能使用了错误的术语，但我很确定这行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:55:11.650

你应该只使用一次 setContentView() 。

# python - matplotlib imshow - 使用矩阵作为 y 轴值

> ID：13751688
> 
> 赞同：1
> 
> 时间：2012-12-06T20:09:39.513
> 
> 标签：python, numpy, matplotlib

这是我想做的一个非常简化的版本：

```
In [44]: data = np.array([[0]*3,[1]*3,[2]*3])

In [45]: data
Out[45]: 
array([[0, 0, 0],
       [1, 1, 1],
       [2, 2, 2]])

In [46]: xaxis = np.array([0,1,2])

In [47]: yaxis = np.array([[0,0.1,0.4],[1.1,1.6,1.9],[2.3,2.6,4]])

In [48]: yaxis
Out[48]: 
array([[ 0\. ,  0.1,  0.4],
       [ 1.1,  1.6,  1.9],
       [ 2.3,  2.6,  4\. ]]) 
```

我想`imshow()`使用网格中的 y 轴值绘制一个图。（“数据”中的每个数据值都是与其在 y 轴网格中的等效位置相关联的强度值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:26:52.830

我认为`y-axis`必须扩展，在本例中为 41 像素。然后创建一个维度为 (3, 41) 的新数组`data2`。这填充了`data`在位置给定的值，`xaxis`并`yaxis`转换到新的 y 轴。`data2`可以由 绘制`imshow`。这不是一个非常简单的解决方案。

```
data = np.array([[0]*3,[1]*3,[2]*3])

xaxis = np.array([0,1,2])

yaxis = np.array([[0,0.1,0.4],[1.1,1.6,1.9],[2.3,2.6,4]])

# expand the y-axis to 4/0.1 = 40 in this case
ydim = int(np.max(yaxis)/np.min(yaxis[where(yaxis!=0.)])) + 1

# create new data array of size (len(xaxis), ydim)
data2 = np.zeros((len(xaxis), ydim))

# fill the new data array according to the values given in data at the positions specified in xaxis and yaxis
for i in xaxis:
    for nr, j in enumerate(yaxis[i]):
        data2[i,int(j*10)] = data[i, nr]
# use interpolation='nearest' to clarify the behaviour and extent x-axis to 40
imshow(data2, extent = (0, ydim-1, ydim-1, 0), interpolation='nearest')
show() 
```

![创建的图片](../Images/db5bed76f897d754e53de42533c7ba61.png)

# soap - 如何添加 节点缓存 Web 服务 WSDL？

> ID：13751689
> 
> 赞同：0
> 
> 时间：2012-12-06T20:09:42.110
> 
> 标签：soap, wsdl, intersystems-cache

需要加...像这样

```
<definitions>
    <documentation></documentation>
     <types></types>
    <message><message/>
</definitions> 
```

我将`INCLUDEDOCUMENTATION`参数设置为 1，但这不会生成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:08:49.257

目前这仅适用于复杂类型，不适用于[webmethods](http://docs.intersystems.com/cache20111/csp/docbook/DocBook.UI.Page.cls?KEY=GSOP_serv_details#GSOP_serv_details_annotations)：

此参数不会导致 WSDL 包含 Web 服务及其 Web 方法的注释；没有选项可以在 WSDL 中自动包含这些注释。

除此之外，INCLUDEDOCUMENTATION 是要更改的正确参数。已经向 ISC 提交了关于此的增强请求。

# css - 如何创建流体高度 Div？

> ID：13751692
> 
> 赞同：6
> 
> 时间：2012-12-06T20:09:52.907
> 
> 标签：css

注意：我还在学习 CSS 和 HTML，所以如果这个问题看起来很“无聊”——那是因为它确实如此。如果你能提供一个例子，或者一篇针对我的问题的文章，那就太好了。

我创建了一个 div（“背景”），其中包含两个 div（“左”和“右”）。

我希望根据“左”和“右” div 中的内容量来扩展或收缩“背景” div 的高度。

```
#background {
width:100%;
height:15em;
background-color:#FFF;
box-shadow: 0 0 5px #888;
-moz-box-shadow: 0 0 5px #888;
-webkit-box-shadow: 0 0 5px#888;
clear:both;
} 
```

我目前将“背景” div 的高度设置为 15em，因为我不确定如何使其扩展或收缩。我尝试将其设置为“100%”和“自动”，但这些只会让“背景”div 消失。

这是我的整个 HTML 和 CSS 代码：http: [//jsfiddle.net/jueRh/](http://jsfiddle.net/jueRh/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:18:53.507

设置`overflow: hidden;`和`#background`删除`height:15em;`声明。

演示：http: [//jsfiddle.net/sonic1980/jueRh/1/](http://jsfiddle.net/sonic1980/jueRh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:14:17.160

如果您的容器`div`没有`height`值，它将成为其内容的可扩展容器。

如果您仍然希望您`div`有一定的高度，但扩展溢出的内容，您可以使用`min-height`. 另请注意，此链接`min-height`中仅受同等或以上[登记的浏览器支持。](http://www.w3schools.com/cssref/pr_dim_min-height.asp)

**编辑：**但是，如果您将在容器内使用`float`ed ，则必须使用float 才能正确渲染。您也可以使用替代方案，然后您可以跳过ing，但这[也是支持有限的。](http://www.w3schools.com/cssref/pr_class_display.asp)`div``clear``display:inline-block``float``clear`

# c# - 允许 MVC 中 textarea 的 HTML 用于站点上下文之外的模型

> ID：13751694
> 
> 赞同：3
> 
> 时间：2012-12-06T20:10:02.083
> 
> 标签：c#, asp.net-mvc, razor, xss, data-annotations

我在域模型上有一个描述字段，我想打开它以允许 html。当我提交表单时，我收到了“可能很危险的请求” yada.... 这是我所预料的，但事实证明很难用我目前的设置来补救。

我的视图模型有多个对象，例如：

```
public class MyViewModel
{
    public ISomething Something { get; set; }
    public IAnotherThing Another { get; set; }
} 
```

其中`ISomething`包含描述，接口和类本身是在 mvc 站点的另一个项目中定义的。

虽然我确定我可以`ValidateInput(false)`在控制器操作上添加属性，但我不一定要打开所有打开的东西……只是这个特定的描述。

无论如何，`[AllowHtml]`这似乎是答案，但它在`System.Web.Mvc`. 添加对外部库的引用让我很痛苦，但我硬着头皮，我什至无法添加该引用，因为它不在我的可用列表中，即使它与 mvc4 应用程序在同一个解决方案中。

我不禁想象其他人已经能够克服这一点，但我似乎已经被打败了。很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:59:44.320

您是否尝试使用 MetaDataType 属性来扩展您的模型？

如果您的 Model 是 Partial 类，您可以执行以下操作：

```
namespace YourModelsNamespace
{
    [MetadataType(typeof(ISomethingMD))]
    public partial class ISomething
    {
    }

    public partial class ISomethingMD
    {
        [AllowHtml]
        public string Descriptin { get; set; }
    }
} 
```

这样您就可以“扩展”模型，并为该特定属性设置元数据。这些类将在您的 MVC 项目中，因此您将对模型有更多的控制权。此方法可用于添加显示名称属性，以及 DataAnnotations 命名空间中的其他属性。

请注意，此类的命名空间应与您的模型相同。

# css - Codeigniter 不会加载 css 表单文件

> ID：13751699
> 
> 赞同：0
> 
> 时间：2012-12-06T20:10:17.410
> 
> 标签：css, codeigniter

k 所以我将所有的 css 放在单独的文件中，但它不会加载，我将它放在根目录中名为 css 的文件夹中，并且每个视图都有单独的 css 文件。它确实加载在主页上，但其他都没有。

这是我在标题标签中的视图中尝试过的代码：

```
<link rel="stylesheet" type="text/css" href="/css/(name of file for specific view).css" />

<link rel="stylesheet" type="text/css" href="css/(name of file for specific view).css" />

<link rel="stylesheet" type="text/css" href="<?php base_url() ?>css/about.css" />

<link rel="stylesheet" type="text/css" href="<?php base_url('css/about.css') ?>" />

<link rel="stylesheet" type="text/css" href="<?php base_url().'css/about.css' ?>" />

<link rel="stylesheet" type="text/css" href="<?php base_url().'/css/about.css' ?>" />

<link rel="stylesheet" type="text/css" href="<?php echo base_url() . 'css/about.css' ?>" /> 
```

从根目录到我的 css 的路径是：/css/(file name).css

从根目录到我的视图的路径是：/applications/view/(file name).php

我究竟做错了什么？

我正在使用 mod_rewrite 运行 codeigniter 2.1.3

编辑：

这是来自浏览器的源代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">

<title>The Groundscore Way</title>

<link rel="stylesheet" type="text/css" href="/css/about.css" />

</head>
<body>

<div class='site'>

    <div class='ban' >
        <img src="http://www.ground-score.com/imgs/gs_banner_med.JPEG" />
    </div>

    <div class='map'>
        <BR /><BR /><BR /><BR />
        <A HREF="http://www.ground-score.com/main/home" TITLE="home" ><img src="http://www.ground-score.com/imgs/home_0.png"></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/about" TITLE="about" ><img src="http://www.ground-score.com/imgs/about_0.png" /></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/members" TITLE="members" ><img src="http://www.ground-score.com/imgs/members_0.png" /></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/news" TITLE="members" ><img src="http://www.ground-score.com/imgs/news_0.png" /></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/blog" TITLE="blog" ><img src="http://www.ground-score.com/imgs/blog_0.png" /></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/projects" TITLE="projects" ><img src="http://www.ground-score.com/imgs/projects_0.png" /></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/portfolios" TITLE="portfolios" ><img src="http://www.ground-score.com/imgs/portfolios_0.png" /></A>
        <BR />
        <A HREF="http://www.ground-score.com/main/contact"TITLE="contact" ><img src="http://www.ground-score.com/imgs/contact_0.png" /></A>
        <BR />
        <BR /><a href=http://www.ground-score.com/main/login><img src="http://www.ground-score.com/imgs/log_in_0.png" /></a><BR /><a href=http://www.ground-score.com/main/signup><img src="http://www.ground-score.com/imgs/sign_up_0.png" /></a><BR />        </div>

    <div class='content'>

</div>

    <div class=cpwrt>

        <P> <span style="color:#ffffff;"> Copyright (c) 2012 ground-score.com. All rights reserved.</span> </P>

    </div>

</div>
</body>
</html>

<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

css文件代码：

```
 p 
{
    color:black;
    font-family:arial;
    line-height:130%;
}

body 
{
    background-image:url('/imgs/green_tex.jpg');
}

.ban
{
    position:absolute;
    top:20px;
    left:25%;
}
.map
{
    position:absolute;
    top:20px;
    left:5%;
    border-style:solid;
    border-color:black;
    width:130px;
    height:625px;
    padding:12px;
    border-width:1px;
    background:#9d1e15
}
h2
{
    text-align:center;
}
.content
{
    position:absolute;
    top:16%;
    left:25%;
    border-style:solid;
    border-color:black;
    padding:8px;
    border-width:1px;
    background:white;
    width:583px;
    height:542px;
}

.cpwrt
{
    position:absolute;
    top:97%;
    left:33%;

}

.site
{
    position:absolute;
    top:0px;
    left:0px;
    width:1200px;
    height:690px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:55:37.660

尝试`<?php echo base_url() . 'css/about.css' ?>`

如果这不起作用，我认为您的 /css 目录中可能实际上没有名为“about.css”的文件。[http://www.ground-score.com/css/home.css](http://www.ground-score.com/css/home.css)工作正常。 [http://www.ground-score.com/css/about.css](http://www.ground-score.com/css/about.css)没有。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T00:10:37.953

好的，它现在可以工作了，这是我让它打字的唯一`https://`方法`https://www.site.com/css/(file).css`

# wpf - 从本地字符串变量绑定故事板颜色动画

> ID：13751701
> 
> 赞同：0
> 
> 时间：2012-12-06T20:10:28.363
> 
> 标签：wpf, binding, storyboard, coloranimation

关于 WPF 中的绑定，我仍然有点业余，但我希望我能在将字符串绑定到情节提要动画方面获得一些帮助。我有一个自定义的 UserControl，仅包含一个 TextBox 和一些按钮。我想要做的是每当 TextBox 从服务器获取前景将从浅色动画到深色的信息时。在创建此控件后，用户指定他们希望看到的动画颜色。例如，让我们从浅绿色到深绿色。我在 UserControl 中有 2 个变量存储为字符串，现在我想将它们绑定到情节提要动画。任何帮助将不胜感激。

XAML：

```
<EventTrigger RoutedEvent="TextBox.TextChanged">
    <BeginStoryboard>
        <Storyboard>
            <ColorAnimation AutoReverse="False" Duration="0:0:2" From="{Binding StartTextColor}" To="{Binding EndTextColor}"
                Storyboard.TargetName="txtTextField" AccelerationRatio="1" 
                Storyboard.TargetProperty="(TextBox.Foreground).(SolidColorBrush.Color)"
                 FillBehavior="HoldEnd">
            </ColorAnimation>
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

代码：

```
public string StartTextColor
{
    get
    {
        return startTextColor;
    }
    set
    {
        startTextColor= value;
    }
}

public string EndTextColor
{
    get
    {
        return _endTextColor;
    }
    set
    {
        _endTextColor= value;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:31:08.817

刚刚对动画进行了颜色绑定的快速测试，`string`效果很好。如果您曾经绑定过，您应该确保您的对象实现`INotifyPropertyChanged`，因为这会通知 XAML 某个属性已更改。

我的测试：

```
 public partial class MainWindow : Window, INotifyPropertyChanged
    {
        private string startTextColor = "Green";
        private string _endTextColor = "Red";

        public MainWindow()
        {
            InitializeComponent();
        }

        public string StartTextColor
        {
            get { return startTextColor; }
            set
            {
                startTextColor = value;
                NotifyPropertyChanged("StartTextColor");
            }
        }

        public string EndTextColor
        {
            get { return _endTextColor; }
            set
            {
                _endTextColor = value;
                NotifyPropertyChanged("EndTextColor");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        /// <summary>
        /// Notifies the property changed.
        /// </summary>
        /// <param name="info">The info.</param>
        public void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

    } 
```

xml:

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication4"
        Title="MainWindow" Height="350" Width="2640" Name="UI" >
        <Grid>
            <TextBox Name="txtbx">
              <TextBox.Triggers>
                <EventTrigger RoutedEvent="TextBox.TextChanged">
                    <BeginStoryboard>
                        <Storyboard>
                            <ColorAnimation AutoReverse="False" Duration="0:0:2" AccelerationRatio="1" Storyboard.TargetName="txtbx" FillBehavior="HoldEnd" 
                                            From="{Binding ElementName=UI, Path=StartTextColor}" 
                                            To="{Binding ElementName=UI, Path=EndTextColor}"
                                            Storyboard.TargetProperty="(TextBox.Foreground).(SolidColorBrush.Color)">
                            </ColorAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
              </TextBox.Triggers>
            </TextBox>
        </Grid>
</Window> 
```

希望这可以帮助 ：）

# ruby-on-rails - Rails rabl - 返回所有属性，而不仅仅是命名的

> ID：13751704
> 
> 赞同：6
> 
> 时间：2012-12-06T20:10:40.170
> 
> 标签：ruby-on-rails, json, rabl

Rabl 允许您通过在视图中命名属性来获取属性，例如：

```
object @user
attributes :name, :email 
```

我有一个模型，其属性未知，但我想使用 rabl 在我的实例变量中显示从控制器返回的所有内容。

有没有类似的捷径：

```
attributes :all 
```

等等

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T20:14:49.813

您应该能够使用`.column_names`：

```
attributes *User.column_names 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-15T14:17:46.253

如果你想去掉一些列，比如“created_at”和“updated_at”：

```
attributes *User.column_names - ["created_at", "updated_at"] 
```

# vhdl - 通过 ISE 使用 vhdl 代码模拟函数

> ID：13751705
> 
> 赞同：1
> 
> 时间：2012-12-06T20:10:47.607
> 
> 标签：vhdl

我最近开始学习VHDL。我写了一段 VHDL 代码来确定算术

声明，但它不起作用。实际上当我模拟它时，输出没有

变化，它仍然是 0.0。我不知道我的错误在哪里。我需要使用一个

外部时钟？当我这样做时，它不会改变:-(

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

package mypack is
    type real_vector is array (integer range <>) of real;
end mypack;

library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
--use IEEE.STD_LOGIC_UNSIGNED.ALL;
use work.mypack.all;

entity convolution is port (
    x:in real_vector(0 to 3);
    y:in real_vector(0 to 1);

    f:out real_vector (0 to 4)
);
end convolution;

architecture Behavioral of convolution is
    --signal temp : real_vector (0 to 4):= (others => 0.0);
    --signal enable : std_logic :='0';
begin
    process (x,y)
        variable sum :real;
    begin

        for n in f'range loop
            enable <= '0';
            for k in y'range loop
                sum:=sum + x(k)*y(n-k);
            end loop;
            -- temp(n) <= sum;
            f(n) <= sum ;
            sum:=0.0;
        end loop;

        enable <= '1';

        --if (enable'event and enable='1') then
        --    f <= temp;
        --end if;

    end process;
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:05:37.483

我可以在您的代码示例中看到一些内容：

1.  你使用真正的类型。您应该避免使用它们，因为通常无法合成并且只能在模拟中工作。另一种方法是使用[定点算法](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)。
2.  你使用变量。只要您真的不知道自己在做什么，就应该尽量避免使用变量，因为变量的行为与正常信号不同。变量立即赋值，而信号值在进程结束时赋值。因此，变量通常仅用于简化更复杂的语句（例如`#define`C 中的语句）。
3.  您应该使您的设计同步/时钟并使用寄存器。每个时钟周期执行一项特定操作。

我认为`sum:=0.0`主循环末尾的语句会覆盖 assignment 中 sum 的值`f(n) <= sum`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:06:40.250

VHDL 不是一种编程语言，它是一种硬件描述语言。

出于这个原因，为了获得可靠的结果并尽可能优化最终设计，使用硬件原生的 std_logic_vectors、unsigneds 和其他原语非常重要。

您没有看到输出变化，因为整个 for 循环在流程的一次迭代中完全执行。最终结果只会是 for 循环的最后一个状态，在这种情况下是`sum:=0.0;`. 为了解决这个问题，强烈建议您在设计中使用外部时钟，并且该时钟是您的工艺敏感度列表的一部分。这将允许您将您的流程本质上用作 for 循环，这将完全消除对显式 for 循环的需要。

几天前在 EE 堆栈交换站点上出现了一个与此问题非常相似的问题，我写了一个非常全面的答案，解释了如何以这种方式将进程用作 for 循环。

这是我对另一个问题的回答的链接。 [连接器](https://electronics.stackexchange.com/questions/57035/n-bit-shift-register-serial-in-serial-out-in-vhdl/57042#57042)

我已经浏览了您的代码并对其进行了一些修复（并添加了一个时钟！）。我没有模拟它，所以它可能不会执行 100% 计时，但这是一个示例，可以了解我在将进程用作 for 循环并让您走上正确的轨道方面的意思。

干得好。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.numeric_std.all;

-- unsigned types are part of the numeric_std package. They are like std_logic types, but have native support for +,-,*, etc.
package mypack is
    type x_vector is array(0 to 3) of unsigned(0 to 31);
    type y_vector is array(0 to 1) of unsigned(0 to 31);
    type f_vector is array(0 to 4) of unsigned(0 to 31);
end mypack;

library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.numeric_std.all;

use work.mypack.all;

entity convolution is 
port (
    clk : in std_logic;
    rst : in std_logic;
    x:in x_vector;
    y:in y_vector;
    f:out f_vector
);
end convolution;

architecture Behavioral of convolution is
    signal enable : std_logic;

    -- These are your for-loop count variables
    signal n_count : unsigned(0 to 4);
    signal k_count : unsigned(0 to 1);

    -- sum variable (you might want to look into making this 64 bits long, so the answer doesn't overflow)
    signal sum : unsigned (0 to 31);
begin

    -- process only executes when clock or reset changes
    convolve : process (clk,rst)
    begin
        if (rst = '1') then

            -- this is where you set your variables to 0;
            n_count <= (others => '0');
            k_count <= (others => '0');
            sum <= (others => '0');
            enable <= '0';

            -- nice way of setting all values in f array to zero (nest "others =>" for as many dimensions as you need)
            f <= (others => (others => '0'));

        elsif (rising_edge(clk)) then
            -- if your n counter hits its max value ('high), reset the counter
            if (n_count = n_count'high) then
                n_count <= (others => '0');
                -- Add whatever you want to do when n hits it's max here...

            -- This is what is executed while n is counting up.
            else 

                -- if your k counter hits its max value ('high), reset the counter
                if (k_count = k_count'high) then
                    k_count <= (others => '0');
                    -- Add whatever you want it to do when k hits it's max here...

                -- This is what is executed while k is counting up (with n)
                else
                    -- This is where the actual convolution takes place.
                    -- The counters are converted to integers in order to be used as array references
                    sum <= sum + sum + (x(to_integer(k_count))*y(to_integer(n_count-k_count)));
                    -- Increment k!
                    k_count <= k_count + "1";
                end if;
                -- Increment n!
                n_count <= n_count + "1";

                -- I'm not hugely sure what you want to do with the enable, but this is where 
                -- it was in the other code.  
                enable <= '0';
                -- drive F with sum value
                f(to_integer(n_count)) <= sum;
                -- clear sum for next round.
                sum <= (others => '0');
            end if;
            -- enable again.
            enable <= '1';
        end if;
    end process;
end Behavioral; 
```

# php - PHP变量正确回显但未进入数据库

> ID：13751706
> 
> 赞同：1
> 
> 时间：2012-12-06T20:10:48.580
> 
> 标签：php, mysql

我正在尝试将 5 个变量输入到 MySQL 数据库中。这是代码：

```
 foreach ($avail_t as $row) {
    $ava = explode("+",$row);
    $day = $ava[0];
    $from = $ava[1];
    $to = $ava[2];
    //echo $day." ".$from." ".$to;
    $query = "INSERT INTO availability (username, login_value, day, from, to) VALUES ('{$_SESSION['username']}', '{$_SESSION['login_value']}', '{$day}', '{$from}', '{$to}')";
    mysql_query($query);
} 
```

当我取消注释该 echo 语句时，所有变量都打印得很好，但是当我处理查询时，它不会进入数据库。奇怪的是，如果我去掉 $from 和 $to 并输入 $day ，它就会输入日期。当我放回 $from 和 $to 时，什么都没有输入。

你看到这段代码有什么问题吗？$from 和 $to 的数据类型是军用时间格式 2100、1300 等的整数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T20:13:18.367

您正在使用`from`and`to`作为[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)```的列名，请在查询中使用反引号将它们转义

```
$query = "INSERT INTO availability (username, login_value, day, `from`, `to`) VALUES ('".$_SESSION['username']."', '".$_SESSION['login_value']."', '$day', '$from', '$to')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:16:52.853

你不能使用`from`or `to`，那些是保留字。

# python - 如何在python中从表单中发布参数

> ID：13751711
> 
> 赞同：1
> 
> 时间：2012-12-06T20:10:58.167
> 
> 标签：python, google-app-engine

我认为这对很多人来说真的很容易，但我实际上不明白为什么我的脚本不起作用，好吧，我是新手，所以如果有人回答，我会很高兴。

该表单只需要一个参数并将其发布到同一页面上的同一表单中，但是现在当页面重新加载时，该参数不显示，我不知道是python错了还是因为它是html ，无论如何我不知道，因为我没有收到任何错误消息......

```
import webapp2

form="""
    <h2>Enter some text</h2>
    <form method="post">
        <textarea name="text" value=%(word)s style="height: 100px; width: 400px;">
        </textarea>
        <br>
        <input type="submit">
    </form>
 """

class MainHandler(webapp2.RequestHandler):
    def write_form(self, text=""):
        self.response.write(form % {"word": text})

def get(self):
    self.write_form()

def post(self):
    text=self.request.get("text")
    self.write_form(text)

app = webapp2.WSGIApplication([('/', MainHandler)], debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:44:28.040

`textarea`s 没有 value 属性 - 相反，内容应该在`textarea`open/close 标记内。

例如：

```
<textarea>%(word)s</textarea> 
```

虽然值得研究模板，但你提到可能会在你的教程中进一步出现，所以......

# linux - Linux tmp 文件夹中超过 40G 的 Rewrite.log

> ID：13751712
> 
> 赞同：2
> 
> 时间：2012-12-06T20:10:59.323
> 
> 标签：linux, tmp

我们正在尝试减少基于 linux 的服务器上的一些空间，并注意到在 ./tmp 中有一个名为 rewrite.log 的文件，大小为 41G。我不完全确定是否可以删除此文件，或者如何/是否可以缩小它。

谢谢，

布兰登

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:18:54.363

您需要关闭[`RewriteLog`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:19:21.443

这是由 Apache HTTPD 服务器创建的日志文件。[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)是创建它的东西。您可以安全地删除它，或者只是更改 httpd.conf 中的 LogLevel，以便它不会输出太多信息。如果我是你，我会 1) 停止 HTTPD 服务器，2) 删除日志文件，3) 编辑 httpd.conf 文件并设置`LogLevel`为`warn`4) 启动 HTTPD 服务器。希望这可以帮助。

# mdx - 具有顶部/底部 x 值过滤器的层次结构的总成员

> ID：13751715
> 
> 赞同：1
> 
> 时间：2012-12-06T20:11:15.687
> 
> 标签：mdx, olap, msas

我将 MSAS 2008 与 Adventure Works DW 一起使用。这是我想使用 MDX 查询获得的切片的结构：

*   [Product].[Style], [Product].[Product Categories], [Measures].[Discount Amount], [Measures].[Reseller Order Quantity] 行
*   [产品].[颜色] 列

我坚持创建查询以从产品类别层次结构中获取前 2 个成员。问题是我不知道如何为 [Product].[Style] 层次结构创建新的计算 Total 成员。使用下面的查询，我只能为 [Product].[Product Categories] 层次结构创建 Total 成员，但是我所有尝试获取 Style 层次结构的总数都失败了。

```
WITH 
    SET [Product Color (set)] as 'DRILLDOWNLEVEL(
        {[Product].[Color].[All Products]}
    )'
    SET [Top 2 Categories For Each Style (set)] as 'GENERATE(
        [Product].[Style].[Style],
        TOPCOUNT(
            ([Product].[Style].CURRENTMEMBER, [Product].[Product Categories].[Category]),
            2,
            [Measures].[Discount Amount]
        ) + ([Product].[Style].CURRENTMEMBER, [Product].[Product Categories].[Total])
    )'
    SET [Product Style (set)] as 'DRILLDOWNLEVEL(
        {[Product].[Style].[All Products]}
    )'
    SET [rowSet] AS '[Top 2 Categories For Each Style (set)] *
                     {
                        [Measures].[Discount Amount],
                        [Measures].[Reseller Order Quantity]
                     }'
    SET [columnSet] as '[Product Color (set)]'
    member [Product].[Product Categories].[Total] as 'AGGREGATE(
        TOPCOUNT(
            ([Product].[Style].CURRENTMEMBER, [Product].[Product Categories].[Category]),
            2,
            [Measures].[Discount Amount]
        )
    )'
SELECT 
    [rowSet] ON ROWS, 
    [columnSet] ON COLUMNS 
    FROM [Adventure Works] CELL PROPERTIES VALUE 
```

任何意见，将不胜感激。

# android - 服务器检索复杂类型的 ksoap2 错误 服务器无法处理请求。---> 对象引用未设置为对象的实例

> ID：13751717
> 
> 赞同：2
> 
> 时间：2012-12-06T20:11:25.920
> 
> 标签：android, ksoap2, android-ksoap2

从 Android 客户端请求和检索复杂类型时出现以下错误：

**服务器无法处理请求。---> 对象引用未设置为对象的实例。faultactor：'null' 详细信息：org.kxml2.kdom.Node**

wsdl：

```
<s:complexType name="AlFi_Rsp">
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="RspResult" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="RspReason" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="RspExplain" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="RspInstruc" type="s:string"/>
</s:sequence>
</s:complexType>

<s:element name="wsVale">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="UserId" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Service" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="FiTerminal" type="s:string"/>
</s:sequence>
</s:complexType>
</s:element>

<s:element name="wsValeResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="wsValeResult" type="tns:AlFi_Rsp"/>
</s:sequence>
</s:complexType>
</s:element> 
```

客户端：

```
 PropertyInfo pi1 = new PropertyInfo();PropertyInfo pi2 = new PropertyInfo();
    PropertyInfo pi3 = new PropertyInfo();

    pi1.setName(KEY_USERID);
    pi2.setName(KEY_SERVICE);
    pi3.setName(KEY_FITERMINAL);

    pi1.setValue(VAR_USERID);
    pi2.setValue(VAR_SERVICE);
    pi3.setValue(VAR_FITERMINAL);

    pi1.setType(PropertyInfo.STRING_CLASS);
    pi2.setType(PropertyInfo.STRING_CLASS);
    pi3.setType(PropertyInfo.STRING_CLASS);

    request.addProperty(pi1);
    request.addProperty(pi2);
    request.addProperty(pi3);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11); // put all required data into a soap
                                    // envelope
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request); // prepare request
    envelope.implicitTypes = true;
    envelope.addMapping(XNAMESPACE, "AlFi_Rsp", OutValeResponse.class);

    HttpTransportSE httpTransport = new HttpTransportSE(XURL);
    httpTransport.debug = true;
    httpTransport.call(XSOAP_ACTION, envelope); // send request 
```

信封.bodyIn 检索上述错误。

请求转储：

```
<?xml version="1.0" encoding="UTF-8"?>
<v:Envelope xmlns:v="http://schemas.xmlsoap.org/soap/envelope/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/">
   <v:Header />
   <v:Body>
      <wsVale xmlns="https://.../AlCheq/">
         <UserId i:type="d:string">0</UserId>
         <Service i:type="d:string">0</Service>
         <FiTerminal i:type="d:string">0</FiTerminal>
      </wsVale>
   </v:Body>
</v:Envelope> 
```

响应转储：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Server</faultcode>
         <faultstring>Server was unable to process request. ---> Object reference not set to an instance of an object.' faultactor: 'null' detail: org.kxml2.kdom.Node</faultstring>
         <detail />
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

InVale 和 OutValeResponse 类都实现了 KvmSerializable 方法。

我正在使用最后一个 ksoap2-android-assembly-3.0.0-RC.4-jar-with-dependencies 和 Android 2.2。有什么建议吗？，我已经搜索了好几天，但没有达到重点。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:26:38.263

问题解决了。

很奇怪，但最终这是 NAMESPACE 和 SOAP 操作的构造中的一个问题。我改变了这个

```
String METHOD_NAME = "method";
String NAMESPACE = "https://url/.../AlCheq/";
String SOAP_ACTION = NAMESPACE + METHOD_NAME; 
```

为了这

```
String METHOD_NAME = "method";
String SOAP_ACTION = "https://url/.../AlCheq/method"; 
```

这意味着，它与 NAMESPACE 中的“/”有关

# jquery - 播放 2.0 Ajax 调用以重新渲染表单的一部分

> ID：13751721
> 
> 赞同：2
> 
> 时间：2012-12-06T20:11:49.843
> 
> 标签：jquery, playframework

我想在 Play 2.0 中使用 ajax 调用重新渲染表单的一部分。

所以，我有一个表单，它调用 jQuery 加载来重新呈现该表单的子部分。表单模板包含我要重新呈现的子模板。所以，我已经在它自己的模板中拥有了表单的适当部分。出现困难是因为该模板通过重复包含在父级中。并且，该重复会自动将支持数据模型转换为 Play Field 对象。我似乎无法自己构建一个 Field，但我也应该尝试一下吗？鉴于缺乏这方面的信息，我显然必须在这里做一些根本错误的事情......

因此，顶级表单看起来像这样：

```
@(dataForm: Form[dataModel])
...

<div class="container">
...
    @helper.form(action = routes.customerData.validate, args='class -> "form-horizontal") {
...
        @repeat(dataForm("metaData")) { metaData =>
...
            @metaDataDiv(metaData)

</div> 
```

而且，div 子模板看起来像这样：

```
@(metaData: play.api.data.Field)
...

<div class="row-fluid" id='expandedView@metaData("metaId").value' style="display: none;">
...
</div> 
```

而且，ajax 调用看起来像这样：

```
$('[id="' + metaDataContainerId + '"]').load(fetchMetaDataUrl, function(response, status, xhr) {
    if (status == "error") {
        showAjaxError(xhr.responseText);
    }
}); 
```

最后，Controller 函数如下所示：

```
public static Result fetchMetaData(...)
{
    ...

    MetaData metaData = ...;

    play.api.data.Field field = new Field(null, ????, ...);  ????

    return ok(????.render(?????));
} 
```

那么，这是否有任何模糊的正确性？我是否应该将我的子模板嵌入一个简单的表单并在生成的 html 上使用 JQuery 选择器？是否有某种（其他）方法可以通过 ajax 调用重新呈现表单的一部分？

# excel - 如果另一个单元格有值，如何编写改变单元格值的excell？

> ID：13751726
> 
> 赞同：0
> 
> 时间：2012-12-06T20:11:57.460
> 
> 标签：excel, excel-2007, excel-2010, excel-2003, vba

我是 Excel 编程新手。我正在尝试完成一项操作，当其他单元格具有值时，我必须更改 excel 单元格的值。否则该值不必更改，它将作为先前的结果重新发送。

因此，让我详细解释一下，我的月基金在 B3（1000）（数字）中，因为我在 B5 到 B36（数字）中有价值（代表每天的费用）我将每天为当前添加一个值月。在本月的 emd，我有我的基金余额。我将删除每个月的使用天数 (B5:b36)。但我的余额不应该被删除。

概率。1）我想将剩余余额自动存储在某个单元格中。

概率。2）我想总结下个月的剩余余额和下个月的资金。

我知道有很多优秀的程序员可以帮助我...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:38:08.687

我无法理解您的确切问题。但总的来说，总结你使用“总和”公式。因此，假设您想将每天的费用汇总为每月总计，您可以将此公式放入您想要总计的单元格中：

```
=Sum(B5:B36) 
```

要获得剩余余额（如果我理解正确的话），您的公式将是：

```
=B3-Sum(B5:B36) 
```

然后在下个月，您可以参考上面的单元格。所以说它是 B37，那么你可以通过以下方式引用它：

```
=B37 
```

我希望这会有所帮助，但正如我所说，我无法完全理解您的问题。

# python - 在 python 中可视化谷歌地图的最佳方法

> ID：13751730
> 
> 赞同：2
> 
> 时间：2012-12-06T20:12:07.537
> 
> 标签：python, google-maps, pygtk

我想知道哪个是使用 python 和 pygtk 可视化谷歌地图的最佳方式，现在我已经尝试过这个：

```
import gtk
import webkit
win = gtk.Window()
win.set_default_size(600, 400)
web = webkit.WebView()
web.open('https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple')
map=gtk.Frame('Maps')
map.add(web)
win.add(map)
win.show_all()
gtk.main() 
```

但也存在一些问题，例如无法正确调整窗口大小，并且在尝试使用街景时出现许多异常。有正确的方法来做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T11:12:33.647

我找到了一个解决方案：

```
import gtk
import webkit
win = gtk.Window()
win.set_default_size(600, 400)
web = webkit.WebView()
web.open('https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple')
map=gtk.Frame('Maps')
scroll = gtk.ScrolledWindow()
scroll.add(web)
map.add(scroll)
win.add(map)
win.show_all()
gtk.main() 
```

您只需添加一个滚动视图

# c# - C#，MySQL - 从表中检索行并在方法中填充变量，然后将 Add() 方法填充到 List<>

> ID：13751732
> 
> 赞同：1
> 
> 时间：2012-12-06T20:12:24.857
> 
> 标签：c#, mysql

我正在从数据库中检索数据并尝试填充 List<>。那是我的目标。

我目前正在将检索到的数据插入到方法中的变量中，然后尝试将该方法添加到 List<>。

这是我的代码：

```
public void Select()
    {
        var sprite = new Sprite();

        if (Game.player.inBattle)
        {
            //Open a connection
            databaseCon.Open(); //Works

            //Create Command
            var cmd = new MySqlCommand(BattleEngine.query, databaseCon); //Works

            //Create a data reader and Execute the command
            var dataReader = cmd.ExecuteReader(); //Works

            try
            {

                //Read the data and store them in the list
                while (dataReader.Read())
                {
                    //Inserts matching Row's first Column attribute into method variable

                    sprite.id = (dataReader.GetInt32(0));
                    //Inserts matching Row's second Column attribute into method variable

                    sprite.identifier = (dataReader.GetString(1)); 

                    Console.WriteLine(sprite.id + ": " + sprite.identifier); //Works. Variables are loaded with data

                    //Fails. Doesn't load the method into the list
                    Game.sprite.Add(new Sprite()); 
                }
            }
            catch (MySqlException ex)
            {
                Console.WriteLine("Error: {0}", ex);

            }
            finally
            {
                if (dataReader != null)
                {
                    //close Data Reader
                    dataReader.Close();
                }

                if (databaseCon != null)
                {
                    //close Connection
                    databaseCon.Close();
                }
            }
        }
    } 
```

`Console.WriteLine(Game.sprite[0]);`然后我在这个循环之后有一个测试设置，它显示`Namespace.Sprite`

可能还有其他方法可以做到这一点，但最终我希望用新方法中的每条记录填充列表。通过将其存储在 List<> 中，我可以提取特定信息以供以后使用。

理论上我希望能够做到这一点；

```
Console.WriteLine("{0}", Game.sprite[0].id); 
```

我以前见过这样做，但我似乎无法复制它。

添加：

```
public class Game
{
    public static Player player;
    public static List<Character> sprite;
    GameScreens mainMenu = new GameScreens();
    GameScreens titleScreen = new GameScreens();

    public Game()
    {
        Console.SetWindowSize(100, 50);
        Console.BufferHeight = 50;
        Console.BufferWidth = 100;

        titleScreen.TitleScreen();

        player = new Player();
        sprite = new List<Character>();
        Player.Initialize(player);

        GameLoop();
    }

    void GameLoop() //Our game loop.
    {
        mainMenu.MainMenu();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:27:42.753

你有没有在声明中尝试过，`Sprite sprite = new Sprite();`而不是`var sprite = new Sprite();`然后`sprite.Add(new Sprite());`而不是失败的行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:29:21.550

尝试：

`Game.sprite.Add(sprite);`

代替：

`Game.sprite.Add(new Sprite());`

您的代码添加了一个空`Sprite`对象 - 不是您声明的对象

# excel - 我们如何在 XLS Jasper Report 上锁定或嵌入图片到单元格中？

> ID：13751735
> 
> 赞同：4
> 
> 时间：2012-12-06T20:12:43.507
> 
> 标签：excel, jasper-reports

我正在使用 Jasper 为日托准备电子表格。我们将每个孩子的信息和孩子的相应图片与他们的父母一起填充在一行中。（即）每一行将有一个子信息，其中一个单元格有图像。当我尝试按孩子的姓氏​​过滤或按字母顺序排列时，图像不遵循行中的信息。我们在 Jasper 中有一个属性可以将图像嵌入到单元格（单元格的一部分）吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T11:57:12.373

尝试添加下一个属性字符串：

```
property name="net.sf.jasperreports.export.xls.ignore.graphics" value="false"/ 
```

或者在您的模板属性中设置它：

```
property: net.sf.jasperreports.export.xls.ignore.graphics value: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T14:05:04.050

JasperReports[`net.sf.jasperreports.export.xls.image.anchor.type`](http://jasperreports.sourceforge.net/config.reference.html#net.sf.jasperreports.export.xls.image.anchor.type) 自版本 5.0.4 起具有该属性。要在 Excel 中激活“使用单元格移动和调整大小”选项，您需要将此属性设置为“MoveSize”值。

# c++ - 使用 boost::spirit 时无法在 boost::variant 中转换 boost::fusion 结构

> ID：13751752
> 
> 赞同：2
> 
> 时间：2012-12-06T20:14:03.803
> 
> 标签：c++, boost, boost-spirit, boost-variant, boost-fusion

一天中的好时光！

我写了这段代码，并希望它能够被编译。

```
#include <string>

#include <boost/spirit/include/qi.hpp>
#include <boost/tuple/tuple.hpp>
#include <boost/variant/recursive_variant.hpp>
#include <boost/fusion/include/adapted.hpp>

struct ParsedThunk
{
    typedef boost::variant<std::string, boost::tuple<boost::recursive_wrapper<ParsedThunk>, boost::recursive_wrapper<ParsedThunk> > > ParsedThunkEntity;
    ParsedThunkEntity _entity;
};

BOOST_FUSION_ADAPT_STRUCT(
    ParsedThunk,
    (ParsedThunk::ParsedThunkEntity, _entity)
)

class ThunkParser
{
protected:
    boost::spirit::qi::rule<std::string::iterator, ParsedThunk(), boost::spirit::ascii::space_type> _thunkRule;

public:
    ThunkParser()
    {
        _thunkRule %= (
            (boost::spirit::qi::lexeme[+(boost::spirit::qi::char_ - boost::spirit::qi::char_(" =()"))]) | 
            (boost::spirit::qi::lit("(") >> _thunkRule >> _thunkRule >> boost::spirit::qi::lit(")")) | 
            (_thunkRule >> _thunkRule)
            ) >> boost::spirit::qi::eps;
    }
};

int main(void)
{
    return 0;
} 
```

但是当我用 clang 或 GCC 编译它时，我得到一个错误。其中最有趣的部分是：

```
/usr/include/boost/variant/detail/initializer.hpp:89:24: note: candidate function not viable: no known conversion from 'const boost::fusion::vector2<ParsedThunk, ParsedThunk>' to 'const
      boost::tuples::tuple<boost::recursive_wrapper<ParsedThunk>, boost::recursive_wrapper<ParsedThunk>, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type,
      boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>' for 2nd argument;
            static int initialize(void* dest, param_T operand) 
```

我使用 clang 3.1 或 gcc 4.7 和 boost 1.52，但我认为没关系。:)

我应该如何编辑这段代码以使其被编译？

**更新**

好吧，我刚刚注意到我指定的语法是左递归的，因此递归下降解析器在处理输入时可能不会停止。这可能是编译问题的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:08:37.030

修复您的变体类型：

```
typedef boost::variant<
            std::string,
            boost::recursive_wrapper<boost::tuple<ParsedThunk, ParsedThunk> >
        > ParsedThunkEntity; 
```

# ruby-on-rails-3 - 除非为真，否则 Ruby on rails 无法填写表单

> ID：13751753
> 
> 赞同：0
> 
> 时间：2012-12-06T20:14:06.223
> 
> 标签：ruby-on-rails-3, forms, email, views, radio-button

我想实现一些有的东西。您想向用户发送电子邮件吗？有一个是或否单选按钮。只有当单选按钮说是时。它下面的文本是否允许该人填写要发送的电子邮件内容。这就是我的电子邮件内容，但我不知道如何让它依赖于按钮。

```
 <div align="center">
  Open orders?
  &nbsp;&nbsp;
  Yes
  <%= f.radio_button :orders_open, true, :class=>"radio-control"%> 
  &nbsp;&nbsp;
  No
  <%= f.radio_button :orders_open, false, :class=>"radio-control"%> 

</div>

<br>

 <div align="center">

  Email users?
  &nbsp;&nbsp;
  Yes
  <%= f.radio_button :email_users, true, :class=>"radio-control"%> 
  &nbsp;&nbsp;
  No
  <%= f.radio_button :email_users, false, :class=>"radio-control", :checked => true %> 

</div>
<br> <br>
<div class="control-group">
  <label class="control-label">
    <%= f.label :email_content, "Note to users" %>
  </label>
  <% if @application_state.orders_open %>
    <div class="controls">
        <%= f.text_area :email_content %>
    </div>
  <% else %>
    <div class="controls">
        <%= f.text_area :email_content %>
    </div>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:08:35.377

使用 JavaScript，您可以轻松完成您想要的。在单选按钮的选择更改上绑定事件，并根据需要的条件启用或禁用 email_content 文本区域。

```
<input type="radio" id="no" name="email_users"/>
<input type="radio" id="yes" name="email_users"/>
<textarea rows="4" cols="50" id="email_content">
</textarea> 
```

使用 jQuery 解决问题：

```
jQuery("input[name=email_users]").change(function (e) {
  if(this.id === "yes") {
    jQuery("#email_content").attr('disabled', 'disabled');
  }
  else if(this.id === "no"){
    jQuery("#email_content").removeAttr('disabled');;
  }
} 
```

# javascript - 使用 kineticJS 为画布上绘制的图像添加拖放功能

> ID：13751759
> 
> 赞同：0
> 
> 时间：2012-12-06T20:14:42.820
> 
> 标签：javascript, html5-canvas, draggable, kineticjs

我有一个网页，用于在 HTML5 画布上显示一些图像。我目前正在显示图像，现在希望可以在画布周围拖放图像。

在研究了如何做到这一点之后，在我看来，最好的方法是使用 KineticJS 库，网址为：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image -教程/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/)

我已经研究过了，但我不确定如何实际使用它。我已经开始在我的 index.html 文件中包含脚本 src，但是如何将可拖动属性应用于我显示的图像？

这是我的 index.html 页面：

```
<!DOCTYPE html>
<html>
<head>
<script src = "kinetic.js" type = "text/javascript"></script>
<title>Home</title>

<script src = "drawLevelOneElements.js" type = "text/javascript"></script>
<script src = "layers&analytics.js" type = "text/javascript"></script>
<script src = "startGameDrawGameElementsDrawStartButton.js" type = "text/javascript"></script>
<script src = "interaction.js" type = "text/javascript"></script>
<script src = "dragAndDrop.js" type = "text/javascript"></script>
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.5.js"></script>
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.1.2.js"></script>

</head>

<body onLoad="startGame()">

<section hidden>
<img id="StartButton" src="StartButton.png" alt="Start Button" width="179" height="180" href="javascript:drawLevelOneElements();"/>

<img id="building" src="images/assets/building.png" alt="Asset" draggable="true" ondragstart="drag(event)"/>
<img id="chair" src="images/assets/chair.gif" alt="Asset"/>
<img id="drink" src = "images/assets/drink.jpg" alt="Asset"/>
<img id="food" src = "images/assets/food.gif" alt="Asset"/>
<img id="fridge" src = "images/assets/fridge.png" alt="Asset"/>
<img id="land" src = "images/assets/land.jpg" alt="Asset"/>
<img id="money" src = "images/assets/money.jpg" alt="Asset"/>
<img id="oven" src = "images/assets/oven.jpg" alt="Asset"/>
<img id="table" src = "images/assets/table.gif" alt="Asset"/>
<img id="van" src = "images/assets/van.jpg" alt="Asset"/>

<img id="burger" src = "images/expenses/direct/burger.png" alt="Direct Expense"/>
<img id="chips" src = "images/expenses/direct/chips.png" alt="Direct Expense"/>
<img id="drink" src = "images/expenses/direct/drink.jpg" alt="Direct Expense"/>
<img id="franchiseFee" src = "images/expenses/direct/franchiseFee.jpg" alt="Direct Expense"/>
<img id="wages" src = "images/expenses/direct/wages.jpg" alt="Direct Expense"/>

<img id="admin" src = "images/expenses/indirect/admin.jpg" alt="Indirect Expense"/>
<img id="cleaners" src = "images/expenses/indirect/cleaners.gif" alt="Indirect Expense"/>
<img id="electricity" src = "images/expenses/indirect/electricity.gif" alt="Indirect Expense"/>
<img id="insurance" src = "images/expenses/indirect/insurance.jpg" alt="Indirect Expense"/>
<img id="manager" src = "images/expenses/indirect/manager.jpg" alt="Indirect Expense"/>
<img id="rates" src = "images/expenses/indirect/rates.jpg" alt="Indirect Expense"/>
<img id="training" src = "images/expenses/indirect/training.gif" alt="Indirect Expense"/>
<img id="water" src = "images/expenses/indirect/water.gif" alt="Indirect Expense"/>

<img id="burger" src = "images/income/burger.png" alt="Income"/>
<img id="chips" src = "images/income/chips.png" alt="Income"/>
<img id="drink" src = "images/income/drink.jpg" alt="Income"/>

<img id="creditors" src = "images/liabilities/creditors.gif" alt="Liability"/>
<img id="electricity" src = "images/liabilities/electricity.png" alt="Liability"/>
<img id="food" src = "images/liabilities/food.jpg" alt="Liability"/>
<img id="hirePurchase" src = "images/liabilities/hirePurchase.jpg" alt="Liability"/>
<img id="loan" src = "images/liabilities/loan.png" alt="Liability"/>
<img id="overdraft" src = "images/liabilities/overdraft.jpg" alt="Liability"/>
<img id="payeTax" src = "images/liabilities/payeTax.jpg" alt="Liability"/>
<img id="tax" src = "images/liabilities/tax.jpg" alt="Liability"/>

</section>

    <h1>Home</h1>
    <p>The purpose of this website is to teach users the basic principles of running a business by playing the game below. <br /><br /></p>

    <canvas id="gameCanvas" width="1000" height="500" style="border:1px solid">
    Your browser does not support the canvas element.
    </canvas>

    <br /><br />
    <p>Use this paragraph to enter text that provides the user with instructions for how to play the game. <br />
        Update the instructions so that they're appropriate to whatever level the user is currently playing.</p>

    <script src = "variables&preloadingImages.js" type = "text/javascript"></script>
</body> 
```

这是我用来将图像绘制到画布上的函数：

```
function drawLevelOneElements(){
            /*First, clear the canvas */ 
            context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
            /*This line clears all of the elements that were previously drawn on the canvas. */
            /*Then redraw the game elements */
            drawGameElements(); 
            /*Call the function to enable drag and drop */
            canvasState(document.getElementById('gameCanvas'));

            /*Create the four description areas, and place them near the bottom of the canvas */
            /*Create boxes with rounded corners for the description areas */
            CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
                if(typeof stroke == "undefined" ){
                    stroke = true;
                }
                if(typeof radius === "undefined"){
                    radius = 5;
                }
                this.beginPath();
                this.moveTo(x + radius, y);
                this.lineTo(x + width - radius, y);
                this.quadraticCurveTo(x + width, y, x + width, y + radius);
                this.lineTo(x + width, y + height - radius);
                this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                this.lineTo(x + radius, y + height);
                this.quadraticCurveTo(x, y + height, x, y + height - radius);
                this.lineTo(x, y + radius);
                this.quadraticCurveTo(x, y, x + radius, y);
                this.closePath();
                if(stroke){
                    context.stroke();
                }
            }

            context.drawDescriptionArea(70, 400, 120, 70);
            context.font = '25pt Calibri';
            context.strokeText('Asset', 90, 440);

            context.drawDescriptionArea(300, 400, 120, 70);
            context.strokeText('Liability', 310, 440);

            context.drawDescriptionArea(540, 400, 120, 70);
            context.strokeText('Income', 550, 440);

            context.drawDescriptionArea(750, 400, 180, 70);
            context.strokeText('Expenditure', 760, 440);

            /*Now draw the images to the canvas */
            /*First, create variables for the x & y coordinates of the image that will be drawn.
                the x & y coordinates should hold random numbers, so that the images will be 
                drawn in random locations on the canvas.*/
                var imageX = Math.floor(Math.random()*100);
                var imageY = Math.floor(Math.random()*100);
                var imageWidth = 50;
                var imageHeight = 50;

                /*Create a 'table' of positions that the images will be drawn to */
                var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
                var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];

            /*Draw all images from assetsImageArray */
            /*Use a while loop to loop through the array, get each item and draw it. */
            var arrayIteration = 0;
            console.log('All Images Array length: ' + allImagesArray.length); /*Display the length of the array in the console, to check it's holding the correct number of images. */
            while(arrayIteration < allImagesArray.length){
                //var randomPositionX = Math.floor(Math.random()*10);
                //var randomPositionY = Math.floor(Math.random()*10);
                context.drawImage(allImagesArray[arrayIteration], imageX, imageY, imageWidth, imageHeight); /*Declare variables for image height and width, so it can be accessed elsewhere */
                console.log(arrayIteration); /*Display the current array position that's being drawn */
                arrayIteration = arrayIteration+1;
                /*Now try changing the values of imageX & imageY so that the next image is drawn to a 
                    different location*/
                //imageX = imagePositionsX[randomPositionX];    /* imageX+(Math.floor(Math.random()*100)); */
                //imageY = imagePositionsY[randomPositionY];    /* imageY+(Math.floor(Math.random()*100));  */
                imageX = Math.floor(Math.random()*950);
                imageY = Math.floor(Math.random()*350);

            }

        } 
```

该函数底部的 while 循环循环遍历数组，在该数组中我已将要绘制的所有图像加载到 JavaScript 中，并将每个图像绘制到画布上的随机位置。

因为这实际上是图像成为 JavaScript 对象的地方，所以我假设这是我需要将每个人的“可拖动”属性设置为 true 的地方。

我试过在行中添加

```
allImagesArray[arrayIteration].draggable = "true"; 
```

但随后浏览器控制台给了我错误，“未捕获的 TypeError：无法设置未定义的属性 'draggable'”。

有谁知道这是为什么，我怎么能把它改正？

**编辑**

好的，我已经通过在 while 循环中将该行移动到该行`allImagesArray[arrayIteration].setDraggable = "true";`的正下方来消除该错误`context.drawImage...`，但我仍然无法在画布周围拖放图像。

有谁知道我需要做什么才能将拖放功能添加到图像中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:35:12.563

让 KineticJS 使图像可拖动

1.  它们必须在 KineticJS 画布中，而不是在您创建的自定义画布中。
2.  它们必须作为[KineticJS Image 对象](http://kineticjs.com/docs/symbols/Kinetic.Image.php)实例添加，而不是直接用`drawImage`.

请参阅[教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/)。

# php - PHP输出缓冲区不刷新

> ID：13751772
> 
> 赞同：15
> 
> 时间：2012-12-06T20:15:35.067
> 
> 标签：php, apache

我有许多脚本在执行时会回显进度，因为它们运行时间很长。每个基本上在处理的每个循环数据行的末尾都执行以下操作：

```
echo '.';
@ob_flush();
flush(); 
```

这多年来一直运行良好，然后我在多台服务器上升级到 PHP 5.3.x 和 Apache 2.2.x。现在，即使我用空白填充缓冲区或设置“ob_implicit_flush(1)”，我也无法让它显示命令输出。

一台服务器仍然显示输出，但它是成块的。可能需要将近 5 分钟，然后屏幕上突然出现一串点。对于其他服务器，在脚本完全执行完之前我什么也得不到。

我试过查看 php.ini 和 httpd.conf 文件，看看我是否能弄清楚不同服务器之间发生了什么变化，但我显然遗漏了一些东西。

我还尝试在 .htaccess 中为受影响的脚本禁用 mod_deflate，但这也无济于事（禁用 mod_gzip 用于立即解决问题）。

有人可以指出我正确的方向吗？无法实时监控脚本执行会导致各种问题，但我们不能再停留在这些较旧的 PHP 版本上。

在一个更奇怪的方面，我确实尝试将服务器降级到 PHP 5.2.17，但降级后输出缓冲区问题仍然存在。这让我怀疑这与 Apache 处理 PHP 输出的方式有关，因为 Apache 2 保留在原地。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T22:56:09.190

ob_flush() (an flush()) 只刷新 PHP 缓冲区——网络服务器自己维护一个缓冲区。听起来很奇怪，过早刷新缓冲区实际上会降低服务器的吞吐量，因此最新版本的 apache 缓冲区更加激进。在使用 HTTP 分块编码时，还存在与压缩和部分渲染相关的可怕问题。

如果您想逐步向页面添加内容，请使用 ajax 或 websockets 一次添加一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-22T11:33:51.377

此问题与您的服务器（apache）有关，而不是与 php 版本有关。

一种选择是禁用输出缓冲，尽管站点其他部分的性能可能会受到影响

## 在阿帕奇

从您的服务器配置中设置 php ini 指令 ( `output_buffering=off`)，包括 .htaccess 文件。所以我在一个`.htaccess`文件中使用了以下内容来禁用该文件的 output_buffering：

```
<Files "q.php">
    php_value output_buffering Off
</Files> 
```

然后在我的静态服务器配置中，我只需要`AllowOverride Options=php_value`（或更大的锤子，如`AllowOverride All`）以便在`.htaccess`文件中允许它。

## 在 Nginx 上

禁用 Nginx 缓冲（将“proxy_buffering off;”添加到配置文件并重新启动 Nginx

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-22T13:22:58.543

原始问题中描述的最有可能的变化是新设置使用的是 FastCgi ( [http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html) )，并且默认情况下已打开缓冲。

但还有其他因素需要检查：

如果您使用的是 Fcgid，那么这也有缓冲：[http ://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidoutputbuffersize](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidoutputbuffersize)

如果您在 PHP 和 Apache 之间的字符集不匹配 - 这可能会导致问题。

mod_deflate 和 mod_gzip 也缓冲（如原始问题中所述）

所以检查的步骤是：

1.  刷新 PHP 缓冲区 - （如问题中所述）

2.  关闭 Apache 缓冲 - 添加`php_value output_buffering off`.htaccess

3.  禁用缓冲通货紧缩的模组 - 禁用 mod_deflate 和 mod_gzip

4.  确保 PHP 和 Apache 之间的字符编码匹配 - 添加`default_charset = "utf-8";`php.ini 和`AddDefaultCharset utf-8`httpd.conf）

5.  禁用 FastCgi 或 Fcgid 中的缓冲 - 您可以通过添加 -flush 选项禁用 FastCgi 中的缓冲。详细信息在上面的链接中。上面还列出了 Fcgid 的选项。

据我所知，这些是服务器上唯一的缓冲区；显然，服务器和浏览器之间的其他设备也可能会缓冲，例如，代理可能会在传递之前等待提供完整的输出。Fiddler ( [https://www.telerik.com/fiddler](https://www.telerik.com/fiddler) ) 就是这样做的，它经常让我失望，直到我记起来。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-22T20:17:07.123

这个问题有一个可能的解决方法，不需要您编辑现有脚本或修改服务器配置以停止缓冲输出。通过使用包装脚本，您可以在后台从服务 Web 请求的 php 脚本启动长时间运行的进程。然后，您可以将长时间运行的进程的输出通过管道传输到一个文本文件中，该文件可以轻松读取以通过轮询查找脚本的当前进度。下面的例子：

## 长时间运行的进程脚本

```
<?php
// long_process.php
echo "I am a long running process ";
for ($i = 0; $i < 10; $i++) {
    echo ".";
    sleep(1);
}
echo " Processing complete";
?> 
```

## 用于初始化长时间运行的进程并观察输出的脚本

```
<?php
    // proc_watcher.php
    $output = './output.txt';
    if ($_GET['action'] == 'start') {
        echo 'starting running long process<br>';
        $handle = popen("nohup php ./long_process.php > $output &", 'r');
        pclose($handle);
    } else {
        echo 'Progress at ' . date('H:i:s') . '<br>';
        echo file_get_contents($output);
    }
    $url = 'proc_watcher.php';
?>
<script>
    window.setTimeout(function() {
         window.location = '<?php echo $url;?>';
    }, 1000);
</script> 
```

如果您向脚本发送 Web 请求，`proc_watcher.php?action=start`则应在后台启动长时间运行的进程，然后每秒将输出文件的内容返回到 Web 浏览器。

这里的技巧是命令行`nohup php ./long_process.php > ./output.txt &`，它在后台运行进程并将输出发送到文件而不是 STDOUT。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-18T08:52:43.877

我尝试了一切以使其正常工作，包括上面列出的所有已知设置。我一直在尝试使用 PHP 来提供使用 HTTP_RANGE 的分块视频文件，但它不起作用。

拔掉大部分头发后，我找到了答案：你必须输出至少比缓冲区大小多一个字节才能输出到浏览器。这是最终为我工作的脚本：

```
<?php 
// Close open sessions
session_write_close();

// Turn off apache-level compression
@apache_setenv('no-gzip', 1);

// Turn off compression
@ini_set('zlib.output_compression', 0);

// Turn error reporting off
@ini_set('error_reporting', E_ALL & ~ E_NOTICE);

// Tell browser not to cache this
header("Cache-Control: no-cache, must-revalidate");

// close any existing buffers
while (ob_get_level()) ob_end_clean();

// Set this to whatever you like
$buffer = 8096;

for($i = 1; $i <= 8; $i++) 
{
    // Start a output buffer with specified size
    ob_start(null,$buffer,PHP_OUTPUT_HANDLER_FLUSHABLE);
    // Output exactly one byte more than that size 
    // \n == 2 bytes, so 8096-1+2 = 8097
    echo str_repeat('=', $buffer-1)."\n";
    // 0.25s nap
    usleep(250000);
    // End output buffering and flush it
    ob_end_flush();
    flush();
} 
```

希望这对某人有帮助！

# ruby - 使用 Ruby 进行测试

> ID：13751773
> 
> 赞同：2
> 
> 时间：2012-12-06T20:15:40.533
> 
> 标签：ruby, testing

原谅这个问题的简单性。我正在学习 TDD 并有以下陈述。

```
def test_equilateral_triangles_have_equal_sides
   assert_equal :equilateral, triangle(2, 2, 2)
   assert_equal :equilateral, triangle(10, 10, 10)
end

def test_isosceles_triangles_have_exactly_two_sides_equal
  assert_equal :isosceles, triangle(3, 4, 4)
  assert_equal :isosceles, triangle(4, 3, 4)
  assert_equal :isosceles, triangle(4, 4, 3)
  assert_equal :isosceles, triangle(10, 10, 2)
end

def test_scalene_triangles_have_no_equal_sides
  assert_equal :scalene, triangle(3, 4, 5)
  assert_equal :scalene, triangle(10, 11, 12)
  assert_equal :scalene, triangle(5, 4, 2)
end 
```

我为这个问题做了一个非常基本的解决方案，并希望从更有经验的程序员那里获得关于替代解决方案的反馈。

我的代码：

```
def triangle(a, b, c)
  if (a == b) && (a == c) && (b == c)
    :equilateral
  elsif (a == b) && ((a || b) != c)
    :isosceles
  elsif (a == c) && ((a || c) != b)
    :isosceles
  elsif (b == c) && ((b || c) != a)
    :isosceles
  else
    :scalene
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T21:05:06.397

您可以通过对边进行排序来简化条件检查

```
sides = [a, b, c].sort
return :equilateral if sides[0] == sides[2]
return :isosceles if sides[0] == sides[1] || sides[1] == sides[2]
return :scalene 
```

或者更简单的方法是使用`.uniq`

```
sides = [a, b, c].uniq
type = case sides.length
        when 1 then :equilateral 
        when 2 then :isosceles 
        when 3 then :scalene
       end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:40:42.337

你的很多条件都是多余的。如果 a==b 和 a==c，则 b==c 必然。此外，如果第一个条件为假且 a==b，则 c 不能等于其中任何一个，否则第一个条件为真。所以你可以简化为：

```
def triangle(a, b, c)
  if (a == b) && (a == c)
    :equilateral
  elsif (a == b) || (a == c) || (b == c)
    :isosceles
  else
    :scalene
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T20:41:16.410

两条评论。首先，通常您希望通过测试来确认阳性病例，以及检查失败情况 ( `assert_not_equal`)。

`triangle`我想你可以稍微收紧你的方法。

考虑：如果`a == b`并且`b == c`那么 是真的`a == c`

考虑：如果或`a == b`然后三角形是等腰三角形`b == c``a == c`

考虑：满足第一个条件将阻止其他人执行，并排除其他情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T21:18:21.270

这应该涵盖您：

```
def triangle(a, b, c)

  raise TriangleError, 'Sum of two sides must be greater than the third.' if a + b < c || b + c < a || a + c < b # not a triangle!
  raise TriangleError, 'Sum of two sides must not be equal to the third.' if a + b == c || b + c == a || a + c == b # degenerate triangle!

  return :equilateral  if a == b && a == c
  return :isosceles    if a == b || b == c || a == c
  return :scalene      if a != b && b != c && a != c

end 
```

感谢您通过 Ruby Koans 取得的进步！:-)

# javascript - 使用 Sqlite ResultSet 验证表单

> ID：13751774
> 
> 赞同：3
> 
> 时间：2012-12-06T20:16:01.170
> 
> 标签：javascript, jquery, asp.net, sqlite

我在尝试在 Sqlite 中验证我的 Web 表单的某些部分时遇到了时间问题。

```
function submitForm()
{
   var isValid = validateK2();
   if(isValid)
      submitK2();
}

function validateK2()
{
    db.transaction(function(tx){
        tx.executeSql("Select * From K2", [], function(tx, result){
             if (results meet my criteria)
                  return true;
             else
                  return false;
        }, onSqlError);
    });
} 
```

但在 if (isValid...) 代码执行时，它返回 undefined，因为 validateK2 函数尚未完成执行，因此尚未返回 true 或 false。我在这里想念什么？

编辑：该网站是一个门户网站，允许员工从文件菜单中选择填写。提交后，他们可能会提交 1 个或 5 个表单。所以@CL 是正确的，我可以在 executeSql 回调中提交，而不是返回 true 然后提交。但是，根据所选文档，我可能需要运行更多验证，这意味着我需要一种动态方法来验证每个文档，并且在“提交”表单之前能够检查所有文档是否有效。所以这就是我所做的：

```
var submitFinalTimeout;
var doc1IsValid;
var doc2IsValid;
var selectedDocCount = selectedDocs.length \\selectedDocs is an array containing all the documents that have been selected and completed

function ValidateForm()
{
   submitFinalTimeout = window.setTimout(submitFinal, 3000);

   if(selectedDocs.indexOf("Doc1") != -1)
       validateDoc1();
   if(selectedDocs.indexOf("Doc2") != -1)
       validateDoc2();
}

function validateDoc1()
{
    db.transaction(function(tx){
       tx.executeSql("Select * From Doc1Data", [], function(tx, result){
         if (results meet my criteria)
            doc1IsValid = true;
            selectedDocCount--;
            if(selectedDocCount != 0)
              {
                 window.cancelTimeout(submitFinalTimeout);
                 submitFinalTimeout = window.setTimeout(submitFinal, 3000);
              }
      }, onError);
    });
}

function validateDoc2()
{
    db.transaction(function(tx){
       tx.executeSql("Select * From Doc2Data", [], function(tx, result){
         if (results meet my criteria)
            doc2IsValid = true;
            selectedDocCount--;
            if(selectedDocCount != 0)
              {
                 window.cancelTimeout(submitFinalTimeout);
                 submitFinalTimeout = window.setTimeout(submitFinal, 3000);
              }
      }, onError);
    });
}

function submitFinal()
{
   if (doc1IsValid && doc2IsValid)
       submitForm();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:22:20.553

您传递给`transaction`并`executeSql`异步执行的函数。

如果你想作为交易的结果做某事，你必须在那个回调中做。替换`return true`为`submit2K`调用。

# scala - 将 Any 转换为 Tuple2

> ID：13751775
> 
> 赞同：2
> 
> 时间：2012-12-06T20:16:06.657
> 
> 标签：scala, casting, tuples

我有一个传递“任何”类型消息的 Scala 函数。在大多数情况下，它将是一个大小为 2 的元组。接收此消息的函数需要查看元组元素的具体类型：

```
main() {
// call to function
// msg is of type Any.
    func (msg) 
} 
```

现在在我的职能中，

```
function (msg : Any) {
    String inputType = msg.getClass.getCanonicalName
    if (inputType.compareTo("scala.Tuple2") == 0) {
        // I now know that the input to the function is a tuple..I want to extract the type of each element in this tuple.
        //something like:
        var tuple = msg.asInstanceof(scala.Tuple2) // This line gives an error. I want to cast object of Type Any to a tuple.
        var 1type = tuple._1.getClass.getCanonicalName
        var 2type = tuple._2.getClass.getCanonicalName
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T20:22:42.863

你为什么不只使用[模式匹配](http://www.scala-lang.org/node/120)？

```
def function(msg: Any) = {
  msg match {
    case tuple @ (a: Any, b: Any) => tuple
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:22:10.117

模式匹配

```
msg match {
   case (x,y) =>  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T01:08:25.927

在使用 Scala Build Tools 版本 sbt-0.13.8 进行测试后，我刚刚想出了这个答案

def castfunction(msg: Any):Tuple2[Char,Int] = { msg match { case (x: Char,y:Int) => Tuple2(x,y) } }

谢谢你。坦率

# r - R在Rgtk2程序中返回错误，说明“externalptr”不是子集

> ID：13751776
> 
> 赞同：0
> 
> 时间：2012-12-06T20:16:18.027
> 
> 标签：r, user-interface, gtk

我开始用 RGtk2 编写一个 R GUI，并且在我的代码的第三行收到错误

```
library(RGtk2)
window <- gtkWindow()
window["title"] <- "Testing" 
```

错误是“externalptr”不是子集

```
> sessionInfo()
R version 2.12.2 (2011-02-25)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RGtk2_2.20.19

loaded via a namespace (and not attached):
[1] tools_2.12.2 
```

# php - php执行sh文件

> ID：13751777
> 
> 赞同：0
> 
> 时间：2012-12-06T20:16:23.623
> 
> 标签：php, linux, ssh, arguments, shell-exec

我正在尝试通过带有参数的 PHP 启动一个 sh 文件，但是我根本无法让它工作：

```
<?php
$ip = $_GET['ip'];
$port = $_GET['port'];

echo shell_exec('sh var/www/html/Grant73565/Grant.sh $ip $port')or die("bash didn't work");
echo('Sent!');
?> 
```

通过 ssh 手动运行文件可以正常工作，例如：

./Grant.sh 127.0.0.1 80

但是在 php 中，它只是回显“Bash 不起作用”。

据我所知，这与参数无关，因为它甚至不会在没有它们的情况下启动文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:18:42.213

如果要包含变量，则需要使用双引号。

```
echo shell_exec("sh var/www/html/Grant73565/Grant.sh $ip $port") or die("bash didn't work"); 
```

使用您当前的代码，任何人都可以更改 http 查询并在您的服务器上执行任何操作。这是一个重大的安全漏洞。

解决方案是验证输入。端口将始终是数字，所以这很简单。您可以使用正则表达式来验证 IP 地址。

# expressionengine - 检查表达式引擎中的 playa 计数

> ID：13751781
> 
> 赞同：2
> 
> 时间：2012-12-06T20:16:29.200
> 
> 标签：expressionengine

我在表达式引擎中使用 playa。我的结构是一个 h1 标题，然后循环播放 playa 结果。但是，在我拥有 h1 之前，我想检查 playa 是否有任何结果。如果是，则显示标题和结果。如果否，则不显示标题。

如何在使用之前检查 playa 结果的计数？

```
<section id="related-products">
<h1 class="product-page-titles">Related Products</h1>
<div>
    {exp:playa:children field="related_products"}
    <article>
        <a href="/product/{url_title}" title="{title}">
            <h2>{title}</h2>
            <img src="{hero_image}"/>
        </a>
    </article>
    {/exp:playa:children}
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:39:22.853

确实！

```
{if "{exp:playa:total_children field='related_products'}"}
    ...
{/if} 
```

（根据[文档](http://pixelandtonic.com/playa/docs/templates#playa%3atotal_children)。）

另外 - 请考虑在专用的[ExpressionEngine StackExchange](http://expressionengine.stackexchange.com)网站上发布未来的问题。这就是行动所在。

# css - 无需编码即可修改 CSS 布局的简单方法？

> ID：13751784
> 
> 赞同：1
> 
> 时间：2012-12-06T20:16:37.337
> 
> 标签：css

我正在为我的内部站点维护一个基本上类似于 wiki 的页面。

我想更改我们报告页面之一的布局，但它们是用 CSS 制作的

有什么方法可以修改 CSS 样式，而不必手动编写代码并花时间处理表格和测量值？我试图手动更改表格的值和顺序，但结果远非令人满意（几乎 12 年前将 HTML 和 Web 编码抛在了后面）。

是否有任何应用程序可以让我加载 CSS 样式，以可视方式重新排列页面上的项目和部分（有点像您在 VisualStudio 等 UI 编辑器中所做的），并允许您在页面上放置更多部分或元素？

我可能会选择编写 CSS 样式的路线，但很想节省时间来学习一些我很可能不会长时间使用的东西（我是 C++ 语言的程序员，所以基本上每 4 年左右一次）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:20:43.273

谷歌 Chrome 和 Firefox 有一些非常好的工具来为页面上的元素查找 css 并重新排列浏览器中的内容，以便您可以看到它们在更改后的外观。非常简单，只需根据您在浏览器中所做的更改创建一个新的 css 文件并将页面链接到该新 css 文件，而无需进行大量手动编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:21:21.893

在firefox中使用带有chrome或firebug的web-developer（f12）。您可以在网页中实时添加/删除/修改css样式

萤火虫：[https ://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

# ruby - 在 Ruby 中对克隆的哈希使用 gsub 会修改原始哈希

> ID：13751785
> 
> 赞同：1
> 
> 时间：2012-12-06T20:16:40.573
> 
> 标签：ruby, clone

我面临一个问题，我无法在不影响其原始内容的情况下替换克隆哈希中的字符串。我最好用一个例子来解释：

```
product_attributes = raw_attributes.clone

# do some stuff on product_attributes like removing hash elements using "select!"

puts product_attributes[:code]
# => 64020-001
puts raw_attributes[:code]
# => 64020-001

product_attributes[:code].gsub!(/[\/|\-][0-9\.]*$/, "")

puts product_attributes[:code]
# => 64020
puts raw_attributes[:code]
# => 64020 
```

我在 OSX 上使用 Ruby 1.9.3p327。

这是一个已知问题（甚至是一个功能）吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:25:08.687

`clone`只制作数组的浅拷贝，因此元素被复制而不是克隆自己。请参阅[在 Ruby 中深度复制对象的最有效方法是什么？](https://stackoverflow.com/questions/5643432/whats-the-most-efficient-way-to-deep-copy-an-object-in-ruby)关于如何有效地进行深拷贝的一些很好的讨论。

如果您只需要深度克隆这个值：

```
product_attributes = raw_attributes.clone
product_attributes[:code] = product_attributes[:code].clone 
```

# jquery - JQuery Ajax Get 结果正在失去价值

> ID：13751788
> 
> 赞同：-1
> 
> 时间：2012-12-06T20:16:45.863
> 
> 标签：jquery

> **可能重复：**
> [变量未返回 JQuery](https://stackoverflow.com/questions/12475269/variable-doesnt-get-returned-jquery)

我不确定这里可能出现什么问题，但我正在丢失我的 JQuery Ajax .get 调用的结果值。（针对问题简化的代码）

文件：SomeJSFile.js

```
var MyApp = function () {

 this.GetAThing = function(url){

 var result = "";
        $.get(url, function (data) {
            result = data;
            alert(data); // Alert works and 'data' looks great! 
            result = data;
        });
        alert(result); // nothing, no value
        return result; // no good since it has no value
  };

 return this;
}; 
```

我在一个基本的 html 页面中使用这个文件进行测试。

已经阅读：[jQuery async ajax 查询和返回值问题（作用域、闭包）](https://stackoverflow.com/questions/2931100/jquery-async-ajax-query-and-returning-value-problem-scope-closure)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:21:23.303

由于您`result`在发送异步请求后立即提醒值，因此`result`仍然具有其旧值。该值仅在请求*完成后*更改，即处理程序执行的时间。

以下是发生的时间线：

1.  `result`被赋值为`""`
2.  AJAX 请求被发送到一个 url
3.  的值`result`被警告（它仍然是一个空字符串）
4.  AJAX 请求完成
5.  的值`result`设置为响应
6.  响应的值被警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:40:45.080

我认为从内部调用中获取结果值的唯一方法是调用内部函数并在外部函数中使用它的返回值。可能是这样的：

```
var MyApp = function () {
 function getUrl() {
  $.get(url, function (data) {
   result = data;
   alert(data); 
   result = data;
   return result;
  };
 }

 var result = getUrl();
 return result;
} 
```

# node.js - 有没有办法将 Mongoose 中间件与查询构建器一起使用？

> ID：13751789
> 
> 赞同：5
> 
> 时间：2012-12-06T20:16:47.170
> 
> 标签：node.js, mongodb, mongoose

这就是我想要做的。

我在受信任的环境中使用 mongoosejs（也就是传递的内容总是被认为是安全的/预先验证的），我需要在我运行的每个查询中传递“选择”和“填充”内容。对于每个请求，我都会以一致的方式得到这个。我想做这样的事情：

```
var paramObject = sentFromUpAbove; // sent down on every Express request
var query = {...}
Model.myFind(query, paramObject).exec(function(err, data) {...}); 
```

我将传递给中间件或其他构造的函数很简单，只是：

```
function(query, paramObject) {
  return this.find(query)
    .populate(paramObject.populate)
    .select(paramObject.select);
} 
```

findOne 也是如此。我知道如何通过直接扩展 Mongoose 来做到这一点，但这感觉很脏。我宁愿使用中间件或其他一些以干净且有点面向未来的方式执行此操作的结构。

我知道我可以在一个模型一个模型的基础上通过静力学来实现这一点，但我想在每个模型上普遍做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T05:04:16.477

您可以执行类似的[操作](https://stackoverflow.com/questions/18488712/mongoose-nested-ref-models-population)，但不幸的是 find 操作不会调用`pre`，`post`因此它们会跳过中间件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T17:14:59.610

您可以通过创建一个简单的 Mongoose[插件](http://mongoosejs.com/docs/plugins.html)来做到这一点，该插件将添加`myFind`和`myFindOne`功能到您希望将其应用于的任何模式：

```
// Create the plugin function as a local var, but you'd typically put this in
// its own file and require it so it can be easily shared.
var selectPopulatePlugin = function(schema, options) {
    // Generically add the desired static functions to the schema.
    schema.statics.myFind = function(query, paramObject) {
        return this.find(query)
            .populate(paramObject.populate)
            .select(paramObject.select);
    };
    schema.statics.myFindOne = function(query, paramObject) {
        return this.findOne(query)
            .populate(paramObject.populate)
            .select(paramObject.select);
    };
};

// Define the schema as you normally would and then apply the plugin to it.
var mySchema = new Schema({...});
mySchema.plugin(selectPopulatePlugin);
// Create the model as normal.
var MyModel = mongoose.model('MyModel', mySchema);

// myFind and myFindOne are now available on the model via the plugin.
var paramObject = sentFromUpAbove; // sent down on every Express request
var query = {...}
MyModel.myFind(query, paramObject).exec(function(err, data) {...}); 
```

# c# - ToolStripManager 不恢复工具条的位置

> ID：13751798
> 
> 赞同：2
> 
> 时间：2012-12-06T20:17:19.887
> 
> 标签：c#, winforms, toolstrip

ToolStripManager 不会按预期将我的工具条恢复到以前的位置。我创建了一个非常简单的应用程序来演示。我在 ToolStrip 容器中包含 4 个可移动的工具条。我移动工具条以将它们从上到下排列为 4-3-2-1（图 A）。然后关闭应用程序。当我重新打开它时，它们的顺序如图 B 所示。

这是简单的代码。我已经验证 LoadSettings 和 SaveSettings 方法调用中使用的 Key 是相同的字符串。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ZT2
{
    public partial class Form1 : Form
    {
        string keyName = "abc";
        public Form1()
        {
            InitializeComponent();
            keyName = Application.ProductName + this.Name + "xyz";
            ToolStripManager.LoadSettings(this, keyName);
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            ToolStripManager.SaveSettings(this, keyName);
        }
    }
} 
```

![图 A 关闭前表格](../Images/ed3d5c50ed4ee090e9ce46aa243a0d40.png)

# ![图 B 重新打开的表格](../Images/bce8e5ae8c6898ececfb8385a281460e.png)

Visual Studio 2010 - C# .Net 4 客户端配置文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:20:11.867

抱歉太快了...

您必须将其保存在配置文件或其他位置的某个位置，并在每次显示时检查这些值。

检查此代码段

[代码片段](http://www.c-sharpcorner.com/Forums/Thread/77600/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:22:43.170

保存表单关闭设置：

```
ToolStripManager.SaveSettings(this); 
```

通过以下方式加载表单加载中的设置：

```
ToolStripManager.LoadSettings(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T22:09:06.693

ToolStripContainer 的一个问题是您不能只设置包含 ToolStrip 的位置，因为容器总是检查容器中的其他 ToolStrip。

如果您在设计时不将 ToolStrips 放置在容器中，它工作正常。您只需要一个函数来初始化它们一次。

另一种可能性是在调用 ToolStripManager.LoadSettings 函数之前将每个工具条的父属性设置为 null

# android - 如何将子类与 XML 文件相关联？

> ID：13751801
> 
> 赞同：0
> 
> 时间：2012-12-06T20:17:43.973
> 
> 标签：android, xml, subclass

我有一个描述包含按钮、图像和文本的对话框的 XML 文件。为了覆盖 onClick 并在对话框中为所有小部件调用它，我编写了一个扩展 RelativeLayout 的子类。现在我想将 XML 文件与子类相关联。我可以不使用充气机吗？

```
 <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginTop="20dp"
                android:clickable="true"
                android:duplicateParentState="true"
                android:onClick="onClick"
                android:src="@drawable/ic_launcher" />

            <EditText
                android:id="@+id/TextView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="20dp"
                android:layout_weight="1"
                android:duplicateParentState="true"
                android:ems="10"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:inputType="textMultiLine"
                android:text="text" >

                <requestFocus />
            </EditText>

        </RelativeLayout> 
```

谢谢，西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:49:41.913

当然。不要输入RelativeLayout，而是使用您的子类的完整包名。

```
 <com.example.MySubclassRelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
      ...
  </com.example.MySubclassRelativeLayout > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:50:37.117

您可以将这些小部件放入一个布局中，例如 dialogwidgets.xml，然后您可以使用 include 标签插入您想要的所有布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width=”match_parent”
    android:layout_height=”match_parent”
    android:background="@color/app_bg"
    android:gravity="center_horizontal">

    <include layout="@layout/dialogwidgets"/>

    <TextView android:layout_width=”match_parent”
              android:layout_height="wrap_content"
              android:text="@string/hello"
              android:padding="10dp" />

    ...

</LinearLayout> 
```

# c# - C# LINQ to Entities 无法识别该方法

> ID：13751803
> 
> 赞同：3
> 
> 时间：2012-12-06T20:17:49.060
> 
> 标签：c#, asp.net, linq

我正在尝试编写一个按列名排序的函数

我在第二种情况下遇到问题=“计数”。如何将转换 IQueryable 转换为 IOrderedQueryable。

谢谢你

```
 public PagedResults<activity> getList(Expression<Func<activity, bool>> criteria, PagingSpecification paging)
    {
        IQueryable<activity> search = criteria != null? Query.Where(criteria): Query;

        IOrderedQueryable<activity> orderedQuery;

        switch (paging.SortColumnName)
        {=
            case "Name":
                orderedQuery = (paging.SortDirection == SortDirection.Ascending)
                                   ? search.OrderBy(e => e.Person.Name)
                                   : search.OrderByDescending(e => e.Person.Name);
                break;
            case "Count":
                orderedQuery = (paging.SortDirection == SortDirection.Ascending)
                                     ? search.ToList().OrderBy(e => e.GetCount()).AsQueryable<activity>()
                                     : search.ToList().OrderByDescending(e => e.GetCount()).AsQueryable<activity>();
                break;
            default:
                orderedQuery = GetOrderedQueryable(search, paging.SortColumnName, paging.SortDirection);
                break;
        }

        IQueryable<activity> dataQuery = orderedQuery.Skip(paging.StartIndex).Take(paging.PageSize);

        return new PagedResults<activity>(dataQuery.ToList(), search.LongCount());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:20:35.330

打电话`AsQueryable`之前`OrderBy`：

```
orderedQuery = (paging.SortDirection == SortDirection.Ascending)
    ? search.ToList().AsQueryable<activity>().OrderBy(e => e.GetCount())
    : search.ToList().AsQueryable<activity>().OrderByDescending(e => e.GetCount()); 
```

`OrderBy`将 an `IEnumerable`(like `List`) 变为 an `IOrderedEnumerable`，但将 an`IQueryable`变为`IOrderedQueryable`.

# c# - 如果我重建我的项目引用的 dll，我是否也必须重建项目？

> ID：13751807
> 
> 赞同：17
> 
> 时间：2012-12-06T20:18:00.287
> 
> 标签：c#, dll, reference

我一直在编写这个程序（`FOO`），它包含对 dll（`BAR`）的引用。All `BAR`contains 是执行各种不同计算的方法。 `FOO`将能够在多台计算机上安装和部署。我的问题是，如果我在其中一种方法中更改公式（即更改`x + y`为`x - y`），我是否需要`FOO`针对新方法进行重建`BAR`？更重要的是，只部署新版本是否安全`BAR`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T20:30:42.373

@vcsjones 的评论在这里提出了一个重要的观点。

**当且仅当**程序集版本没有更改并且您没有使用强命名程序集时，您可以放入一个新的 DLL 作为替换。

如果版本确实发生了变化，那么您*可能会*收到运行时错误，因为您的程序尝试加载特定版本并获得与预期不同的版本。但是，如果没有更改方法签名，这可能会正常工作，但我不能保证并且总是建议重新编译。

当使用强命名程序集时，这甚至会成为一个更大的问题，因为强名称会同时编码程序集的版本和数字签名。因此，如果程序集中的任何代码发生了变化，那么即使版本没有变化，数字签名也会发生变化，因此强名称会发生​​变化。

同样，这将导致运行时错误，因为您的程序期望的强名称与程序集强名称不匹配。所以在这种情况下，总是需要重新编译。

总结一下：

*   代码更改，没有版本更改和没有强名称 - 好的
*   版本更改和没有强名称 - 可能需要重新编译，推荐
*   代码更改和强命名 - 需要重新编译
*   版本更改和强命名 - 需要重新编译

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T20:21:27.170

如果更改方法中包含的公式，则无需重新构建程序。但是，如果您通过更改调用参数来修改方法的签名，则需要重新构建程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T20:20:59.713

您只需确保项目的 dll 在`Bar`项目的 bin 中`Foo`。只要方法签名没有改变，你就很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T18:18:42.310

关于引用的程序集被强命名的情况：假设 A 是任何程序集，B 是强命名程序集，并且 A 引用 B。那么（与上面的声明相反？）可以在*不*改变 B 的内容的情况下重新编译 A。我刚刚尝试了这个，为 A 使用了一个简单的控制台应用程序，为 B 使用了一个类库。对强命名 B 的更改在 A 中没有导致运行时错误。但是有一个特殊情况：如果 B 从not-strongly-named 改为 strong-named，则需要重新编译 A，否则*会*出现运行时错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T20:20:18.107

不——您可以根据需要放入一个新的 DLL。只要新 DLL 不破坏任何旧功能，就无需重新构建引用项目。

# tinymce - CPDF 错误：[图像] 无法获取图像：

> ID：13751812
> 
> 赞同：3
> 
> 时间：2012-12-06T20:18:14.847
> 
> 标签：tinymce, tcpdf

我已经到处寻找答案，但没有一个解决方案奏效！我正在尝试打印出某人使用html 文本编辑器*TinyMCE创建的一封信的 PDF。*我们可以很好地从网络上打印图像，但是当我们尝试在测试服务器上点击图片时，我们想出了

```
TCPDF ERROR: [Image] Unable to get image: 
```

我检查了所有文件权限，*curl*和*allow_url_open*都打开/启用。

我很困惑，如果可以的话请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T19:59:01.067

很简单，在 TCPDF 中引用图像时不要使用绝对链接，例如 /images/myimage.png

TCPDF 不使用网站主页结构，它使用基本操作系统目录结构。因此，如果文件夹图像与 tcpdf php 文件位于同一文件夹中，请使用相对链接，例如：images/myimage.png。或 ../../images/myimage.png 如果它位于 tcpdf 文件夹下方。

我在引用我的 TTF 字体文件时遇到了同样的问题。应该很容易解决。

# jquery - 固定滚动div

> ID：13751817
> 
> 赞同：2
> 
> 时间：2012-12-06T20:18:53.473
> 
> 标签：jquery, html, scroll, fixed

[我的网站 ( http://www.medigapbuyersguide.com/new/](http://www.medigapbuyersguide.com/new/) )的整个左侧是固定的，并且在向下滚动时会随屏幕滚动。我为此使用了 Jquery。

我有两个问题；

*   一旦碰到页脚（底部），左侧就不会停止滚动。
*   当我调整窗口大小时，左侧移动不合适。

我该如何解决这些问题？

jQuery代码：

```
<script>
$(document).ready(function () {  
  var top = $('#left-menu').offset().top - parseFloat($('#left-    menu').css('marginTop').replace(/auto/, 0));
  $(window).scroll(function (event) {
    // what the y position of the scroll is
    var y = $(this).scrollTop();

    // whether that's below the form
    if (y >= top) {
      // if so, ad the fixed class
      $('#left-menu').addClass('fixed');
    } else {
      // otherwise remove it
      $('#left-menu').removeClass('fixed');
    }
  });
});
</script> 
```

CSS：

```
<style>

#left-menu { 
  left: 20%;
  position: absolute;
  margin-left: 40px;
  width:290px;
}

#left-menu {
  position: absolute;
  top: 0;
  margin-top: 132px;
  padding-top: 19px;
}

#left-menu.fixed {
  position: fixed;
  top: 0;
}
</style> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:24:01.610

我可以帮助你，但你需要做一些改变。有两种方法可以解决这个问题： 1 - 您需要将侧栏和内容包装在一个 DIV 中，然后将它们分成 2 个 DIVS = SIDEBAR 和 MAINCONTENT 例如。然后我们就可以计算了。

2 - 现在做一些疯狂的计算！

我建议首先正确创建 div 容器，然后我们可以计算。还要检查[http://j.mp/11Mjvgk](http://j.mp/11Mjvgk)

# php - jQuery 和 PHP 电子邮件表单未运行成功功能

> ID：13751821
> 
> 赞同：1
> 
> 时间：2012-12-06T20:18:55.330
> 
> 标签：php, jquery, ajax

嗨，我正在尝试创建一个足够简单的 php 电子邮件表单，而无需使用 jQuery .ajax() 方法刷新页面，但是我希望在发送电子邮件后重置所有字段，目前这不是'由于某种原因不会发生！

这是我的 jQuery：

```
$.ajax({
    url:"http://www.mysite.co.uk/contactMe.php",
    data: {'email': email,'content': content},
    success: function(response){
        $("#mailContent").css({ 'box-shadow': ''}); 
            $("#email").css({'box-shadow': ''});    
            $("#email").val('');
            $("#mailContent").val('');
            alert("DONE");

        return false;
        }
}) 
```

这是我的 php

```
<?php 

function spamcheck($field)
  {
  //filter_var() sanitizes the e-mail
  //address using FILTER_SANITIZE_EMAIL
  $field=filter_var($field, FILTER_SANITIZE_EMAIL);

  //filter_var() validates the e-mail
  //address using FILTER_VALIDATE_EMAIL
  if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
    return TRUE;
    }
  else
    {
    return FALSE;
    }
  }

$email = $_GET['email'];
$content = $_GET['content'];

$mailcheck = spamcheck($email);
  if ($mailcheck==FALSE)
    {

    }
  else
    {//send email
    mail("myemail@googlemail.com", "Subject: Website Contact Form",
    $content, "From: $email" );
    }

?> 
```

请注意，出于隐私考虑，我更改了 url 地址和电子邮件地址，电子邮件发送正常，因为我在收件箱中收到了它。我也尝试过同样的事情：

`.ajax().done(function{})`也没有运气，最糟糕的是，这在我使用 .ajax() 创建评论系统时使用过的另一个网站上运行良好，但它根本拒绝在这个网站上运行！！！：/

你很沮丧，西蒙。

编辑：表格：

```
 <form name="contact"> Email: <input name="email" type="text" id="email" ><br>
Message:<br> <textarea name="message" rows="20" cols="246" id="mailContent"></textarea><br> 
<input class="button" value=""> </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:39:19.763

您不能使用 ajax`POST`跨域（请阅读[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)了解详情）；出于安全原因，浏览器会阻止它，因为它可能会将您（和您的数据）带到阴暗的网站，而您不会注意到它。

如果您发布的脚本在同一台服务器上，您应该删除域名并使用相对于网站根目录的路径：

```
url:"/contactMe.php" 
```

# eclipse - 无法从 Eclipse 运行我的 Struts 2 Maven 项目

> ID：13751824
> 
> 赞同：2
> 
> 时间：2012-12-06T20:19:04.850
> 
> 标签：eclipse, tomcat, struts2

我的 Struts 2 项目运行良好。我通过命令行构建了它，一切都很顺利。我的最后一步是再次通过命令行部署到 tomcat：

```
mvn tomcat:run 
```

在带有 pom 文件的文件夹中。那行得通-我可以通过浏览器点击该项目。但是当我将它导入 Eclipse 时；

文件 -> 导入 -> 现有 Maven 项目 -> MyProject

项目已导入，但无法从 Eclipse 运行。Run As -> Run on Server 下的选项不存在。

如何让该选项出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:34:26.343

弄清楚了。右键单击项目文件夹，向下滚动到属性（或在 Windows 上按 Alt+Enter 快捷键）并选择项目构面。

从那里确保单击“动态 Web 模块”并选择“应用”。现在您应该可以在服务器上运行该项目了。

# c - 为什么这个 C 数组引用看起来不正确？

> ID：13751837
> 
> 赞同：12
> 
> 时间：2012-12-06T20:19:51.367
> 
> 标签：c

[下面是从网站](http://www.steike.com/code/useless/evil-c/)复制的一段代码。为方向设置的值从“nsew”打印相应的字符。例如，这段代码的输出是字符 w。

我想知道它是如何工作的。

```
#include<stdio.h>
void main (void){
   int direction = 3;
   char direction_name = direction["nsew"];
   printf("%c",direction_name);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T20:22:19.897

这是因为数组下标运算符是可交换的，即：

```
const char *p = "Hello";
char x = p[0]; 
```

相当于

```
const char *p = "Hello";
char x = 0[p]; 
```

很奇怪吧？在您的情况下，您正在索引字符串文字（它是一个数组）的第三个位置`"nsew"`。

`some_ptr[n]`等价于`*(some_ptr + n)`，并且由于加法是可交换的，所以它也等价于`*(n + some_ptr)`。那么这`n[some_ptr]`也是一个等价的表达式。

我不建议使用此“功能”，但是……说真的，不要这样做。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T20:26:20.933

运算符`[]`与指针算术具有相同的语义。So`a[i]`等价于`*(a + i)`which 等价于`*(i + a)`which 等价于`i[a]`:

所以`direction["nsew"]`== `"nsew"[direction]`== `"nsew"[3]`==`'w'`

# python - Python 3.3：Anagram 函数的输出

> ID：13751838
> 
> 赞同：0
> 
> 时间：2012-12-06T20:19:52.380
> 
> 标签：python, python-3.x

```
def anagram(word,check):  
    for letter in word:  
        if letter in check:  
            check = check.replace(letter, '') 
        else:  
            return 0  
    return 1  

while True:
    f = open('dictionary.txt', 'r')
    try:
        user_input = input('Word? ')
        for word in f:
            word = word.strip()
            if len(word)==len(user_input):
                if word == user_input:
                    continue
                elif anagram(word, input):
                    print (word)
                    #try:
                        #if word == 1:
                            #print ('The only anagram for', user_input, 'is', word)
                        #elif word > 1:
                            #print ('The anagrams for', user_input, 'are', word)
                    #except TypeError:
                        #pass
    except EOFError:
        break
    f.close() 
```

该功能按我的意愿工作，但我需要一些关于输出的帮助。我希望在一行中输出，并且措辞应该反映找到的字谜的数量。（即“只有一个字谜”、“字谜是”、“没有字谜”或“字典中没有这个词”）代码中的注释是我尝试过的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:49:42.530

我理解您的程序的方式是，您想不断提示用户输入单词，直到他按下 Ctrl-D （这会导致 EOF 错误并中断循环）？在这种情况下，您应该只在循环开始之前读取文件一次，并在其中构造一个列表或一组单词。此外，您的 try/except 语句应该只包含对的调用，`input`因为这是您的函数中唯一可能发生此异常的地方。

现在回到您的主要问题 - 要计算结果的数量并相应地打印不同的语句，只需使用列表推导来获取输入的所有字谜的列表。然后您可以计算字谜并将它们连接在一起以形成输出字符串。

```
def find_anagrams():
    with open("dictionary.txt", "r") as fileInput:
        words = set(word.strip() for word in fileInput)

    while True:
        try:
            user_input = input("Word? ").strip()
        except:
            break  #you probably don't care for the type of exception here

        anagrams = [word for word in words if anagram(word, user_input)]
        print_results(anagrams)

def print_results(anagrams):
    if len(anagrams) == 0:
        print("there are no anagrams")
    elif len(anagrams) == 1:
        print("the only anagram is %s" % anagrams[0])
    else:
        print("there are %s anagrams: %s" % (len(anagrams), ', '.join(anagrams))) 
```

这段代码中唯一缺少的是检查输入词不是结果列表的一部分，但这可以移动到`anagram`函数中。还可以使用内置集合模块中的 Counter 类来简化该功能。此类是一个类似字典的对象，可以从可迭代对象中构造，并将可迭代对象中的每个对象映射到其出现次数：

```
>>> Counter("hello") == {"h":1, "e":1, "l":2, "o": 1}
True 
```

所以我们可以像这样重写 anagram 函数：

```
from collections import Counter

def anagram(word, check):
    return not word == check and Counter(word) == Counter(check) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:38:16.343

你可以用你的结果创建一个列表，如下所示：

```
with open("dictionary.txt", "r") as fileInput:
    user_input = input("Search keyword: ").strip()

    listAnagrams = []
    for line in fileInput.readlines():
       for word in line.split(" "):
           if len(word) == len(user_input):
               if word == user_input:
                   continue
               elif anagram(word, user_input):
                   listAnagrams.append(word)

    if len(listAnagrams) == 1:
        print ('The only anagram for', user_input, 'is', listAnagrams[0])

    elif len(listAnagrams) > 1:   
        print ('The anagrams for', user_input, 'are', ", ".join(listAnagrams))

    else:
        print ('No anagrams found for', user_input) 
```

# sql - SQL，更新特定行中的列，而不是所有行

> ID：13751840
> 
> 赞同：0
> 
> 时间：2012-12-06T20:19:56.377
> 
> 标签：sql, postgresql, triggers, sql-update, plpgsql

`klienta_nr`任务是更新位于表中的列中的特定行`klientu_ieteikumi`。`klienti`如果在表中删除了特定行。此代码更新整列而不是特定行。问题是什么？

```
CREATE FUNCTION "funkc"() RETURNS "opaque" AS '
DECLARE
BEGIN

IF (TG_OP = ''DELETE'') THEN
UPDATE klientu_ieteikumi SET klienta_nr = NULL ; 
END IF;
RETURN NEW;
END;
' LANGUAGE 'plpgsql';

CREATE TRIGGER "triger"
AFTER DELETE ON "klienti"
FOR EACH ROW EXECUTE PROCEDURE funkc(); 
```

* * *

这个做了我想要的，无论如何谢谢大家:)

```
CREATE FUNCTION "funkcija1"() RETURNS TRIGGER AS $$

BEGIN

UPDATE klientu_ieteikumi SET klienta_nr = NULL 
FROM klienti WHERE old.klienta_nr = klientu_ieteikumi.klienta_nr;
RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER "trigeris"
AFTER DELETE ON "klienti"
FOR EACH ROW EXECUTE PROCEDURE funkcija1(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:21:07.153

您需要一个`WHERE`子句来限制受语句影响的行数。

编辑：

```
UPDATE klientu_ieteikumi 
SET klienta_nr = NULL 
WHERE klienta_ieteikumi.klienta_nr = klienti.klienta_nr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:59:59.207

您提出的“解决方案”行不通，并且**以一种偷偷摸摸的方式是错误的**。

```
CREATE FUNCTION funkcija1()
  RETURNS TRIGGER AS
$func$
BEGIN

CREATE FUNCTION funkcija1()
  RETURNS TRIGGER AS
$func$
BEGIN

UPDATE klientu_ieteikumi
SET    klienta_nr = NULL 
~~FROM   klienti~~  -- !!
WHERE  klientu_ieteikumi.klienta_nr = OLD.klienta_nr;

~~RETURN NEW;~~
RETURN NULL;

END
$func$ LANGUAGE plpgsql;

CREATE TRIGGER trigeris
AFTER DELETE ON klienti
FOR EACH ROW EXECUTE PROCEDURE funkcija1();
```

*   触发器`NEW`中没有。`AFTER`这根本不起作用并立即引发异常。

*   子句中未绑定（并且完全没有意义）`klienti`的表导致. 即，而不是仅仅一次，执行的次数与. 这将对性能造成重大拖累，而且**您可能永远不会发现**，因为没有错误消息。只是在您的服务器上浪费了大量的周期和表格膨胀。`FROM``CROSS JOIN``UPDATE``klienti`

# c# - 如何在 C# 中获取主板传感器读数

> ID：13751842
> 
> 赞同：2
> 
> 时间：2012-12-06T20:20:08.623
> 
> 标签：c#, .net, performance, accelerometer, sensors

我正在尝试用 C# 从我的主板上获取任何温度/风扇速度/加速度计读数我已经做了很多研究，我知道这并不容易，但必须有可能得到我可以使用的东西。

我曾尝试使用主板监视器.net，但我不知道如何将 dll 合并到我的程序中。

我已经尝试使用我下载的主板监视器.DLL“使用主板监视器”。但是绝对没有关于如何使用它的文档。我现在只是在摸索它无济于事。

而且我尝试过使用sensor.dll，但我认为我没有足够的知识来进一步研究。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:10:14.020

这是您要实现的目标的工作示例。希望它有帮助。

[http://forums.whirlpool.net.au/archive/1723879](http://forums.whirlpool.net.au/archive/1723879)

它可能不是一个完整的解决方案，但它应该让您朝着正确的方向开始。

以下内容也很有用：

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/34f0fa55-567b-4a98-a29d-b92a5c9b5f8f/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/34f0fa55-567b-4a98-a29d-b92a5c9b5f8f/)

[CPU温度监控](https://stackoverflow.com/questions/2923984/cpu-temperature-monitoring-c-sharp)

# haskell - 处理 OPTIONS 方法的最简单方法是什么？

> ID：13751844
> 
> 赞同：2
> 
> 时间：2012-12-06T20:20:11.960
> 
> 标签：haskell, yesod, haskell-warp

我正在 angular.js 中为我的 Yesod JSON 服务器编写一个客户端。在检查标头流量时，Chrome 似乎正在发送一个 OPTIONS 方法，我的处理程序拒绝了该方法。[调查](http://bionicspirit.com/blog/2011/03/24/cross-domain-requests.html)表明我应该发回这样的东西：

```
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://source.com
Access-Control-Allow-Headers: Content-Type, * 
```

看着脚手架，我发现它`makeApplication`开始了我想要遵循的路径：

```
makeApplication :: AppConfig DefaultEnv Extra -> IO Application
makeApplication conf = do
    foundation <- makeFoundation conf
    app <- toWaiAppPlain foundation
    return $ logWare app
  where
    logWare   = if development then logStdoutDev
                               else logStdout 
```

最初，我认为我需要修改`conf`，但据我所知，管理操作系统环境。全局更改响应标头最直接的地方在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:07:09.703

大概最简单的就是除了logWare之外再添加一个中间件。

# user-interface - 从哪里开始学习如何将此应用程序转换为 GUI？

> ID：13751845
> 
> 赞同：1
> 
> 时间：2012-12-06T20:20:11.917
> 
> 标签：user-interface

我目前与军队一起部署在海外，并利用我的休息时间来跟上我的平民教育，即大约 1 年的计算机科学。我开发了这个相当简单的批处理程序，它的功能是使用 taskkill 在指定时间后杀死特定的 .exe，也就是特定于应用程序的睡眠定时器： [描述程序使用的博客文章。](http://streamingfreebies.com/blog/2012/12/pandorasleeptimer/)

但是，我从未有过使用 GUI 程序的经验。我在这里看到了一些旧的问答，推荐使用 Qt 开始，但是随着技术世界的变化如此之快，你们都愿意给我一些关于如何从这个应用程序创建 GUI 的新信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:41:51.303

您可以通过学习和使用 tcl/tk 来缩短学习和开发时间，而不是使用与 Qt 相结合的 Microsoft 技术，它带有“expect”来与命令行程序和实用程序进行通信。唯一的缺点是需要将 tcl/tk 部署到每台机器上才能运行您的程序，因为它没有被编译，而是一种解释性语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:27:50.960

我会使用 Windows API + Windows 资源文件 + C 语言来做到这一点。ResEdit 是编辑资源文件的有用工具。一些方便的链接：

[Windows 应用程序 UI 开发](http://msdn.microsoft.com/en-us/library/windows/desktop/ff657751%28v=vs.85%29.aspx)
[MSDN 库](http://msdn.microsoft.com/en-us/library/)
[ResEdit 主页](http://www.resedit.net)

希望能帮助到你。

# html - 如何为 div 中的图像添加 alt 标签以便靴子可以查看它？

> ID：13751848
> 
> 赞同：-1
> 
> 时间：2012-12-06T20:20:19.340
> 
> 标签：html, seo

实际上我的代码如下所示。

```
<div id="logoSec"></div>
<style>
#logoSec {
    background-image: url("http://c.mtro.co/am/i/amlogo.png");
    background-position: center center;
    background-repeat: no-repeat;
    height: 66px;
    width: 100%;
} 
</style> 
```

所以我想给图像添加 ALT。那我怎么给呢？这样靴子就可以查看了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:08:19.067

通常，如果要为图像赋予 alt 属性，则应使用 img 标签，而不是创建带有背景图像的 div。像这样：

```
<img src="http://c.mtro.co/am/i/amlogo.png" alt="Your alt text"> 
```

但是，如果这张图片是公司的徽标（看起来是这样），我建议使用 h1 元素，并用图片替换文本。这是语义，搜索引擎会更好地理解。它看起来像这样：

### HTML

```
<h1 class="logo">America's Mattress</h1> 
```

### CSS

```
h1.logo {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
  background: url("http://c.mtro.co/am/i/amlogo.png") no-repeat center center;
  height: 66px;
  width: 100%;
} 
```

您可以在此处阅读有关此图像替换技术的更多信息[：REPLACING THE -9999PX HACK（新图像替换）](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)

# c# - 将匿名方法传递给 ProgressBar.Invoke()

> ID：13751850
> 
> 赞同：1
> 
> 时间：2012-12-06T20:20:34.453
> 
> 标签：c#, .net, winforms, multithreading, invoke

我正在尝试使用匿名方法将委托传递给`progressBar.Invoke(Delegate)`：

```
progressBar.Invoke(() => progressBar.Value = count); 
```

但我收到以下错误：

> 无法将 lambda 表达式转换为类型“System.Delegate”，因为它不是委托类型。

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T20:22:15.910

该方法需要一个委托，而不是一个动作。因此，当您这样做时：

```
() => { .. } 
```

它不知道你想要什么代表。改为这样做：

```
progressBar.Invoke(new Action(() => progressBar.Value = count)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:22:44.637

`Invoke`不接受特定类型的委托，它接受一个`Delegate`（意味着它可以接受任何具有任何签名的委托）。您需要传入特定类型的委托（无论您选择哪一种）：

```
progressBar.Invoke(new Action(() => progressBar.Value = count)); 
```

# delphi - 扩展数的小数部分

> ID：13751853
> 
> 赞同：1
> 
> 时间：2012-12-06T20:20:42.477
> 
> 标签：delphi

为了获得数字中的小数部分，我有问题。

我尝试过这种方式：

```
var
  x: Extended;
begin
  x := 1.563;
  x := Frac(x);
  ShowMessage(FormatFloat('#.000', x));
end; 
```

它会给出结果`.563`，但我不需要`.`（点）在结果中。

实际上，单独的小数部分的问题是结果中的一个点。

我是怎么得到`563`那个例子的？还有其他方法吗？

谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:24:23.900

一个简单的解决方案是去掉小数分隔符：

```
Copy(FormatFloat('#.000', x), 2, MaxInt); 
```

# ruby-on-rails - 避免 Mongoid N+1

> ID：13751859
> 
> 赞同：0
> 
> 时间：2012-12-06T20:21:02.640
> 
> 标签：ruby-on-rails, mongodb, mongoid

我想拉出所有至少有一个“CEO”职位头衔的公司。

我可以将它与每个表的查询和一个相交一起破解（我知道......没有连接[http://mongoid.org/en/mongoid/docs/tips.html#relational_associations](http://mongoid.org/en/mongoid/docs/tips.html#relational_associations)和[mongoid 中的 N+1 问题](https://stackoverflow.com/questions/3912706/n1-problem-in-mongoid)，我可以在公司中嵌入职位），但是可以通过任何方式执行以下操作：

Company.includes(:positions).where("positions.title" => "CEO")?

谢谢：

```
class Position
  include Mongoid::Document

  field :title, type: String
  field :profile_id, type: String
  field :tenure, type: BigDecimal

  belongs_to :company, index: true

class Company
  include Mongoid::Document

  field :name, type: String
  field :linkedin_id, type: String
  field :positions_count, type: Integer #Mongo Index

  belongs_to :industry, index: true
  has_many :positions

  index({ positions_count: 1}, {background: true}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:45:35.567

为避免 N+1 问题，启用 Mongoid [identity_map 功能](http://mongoid.org/en/mongoid/docs/identity_map.html)

这将允许您执行以下查询：

```
companies_with_ceo = Position.where(title: 'CEO').includes(:company).map(&:company) 
```

应该只对数据库执行 2 个查询。

# c++ - Eclipse CDT 显示一些错误，但项目已成功构建

> ID：13751863
> 
> 赞同：1
> 
> 时间：2012-12-06T20:21:07.997
> 
> 标签：c++, c, eclipse, makefile

我有一个包含多个源文件和头文件的项目，我通过指定所需的外部库和头文件（包含 OpenCV 头文件的目录和包含 OpenCV 库的目录）编写了自己的 Makefile。

当我开始编译项目时，它的编译没有任何错误。但是在写代码的时候，Eclipse在OpenCV的一些函数上报错，就好像它不知道这些函数一样。既然我已经在makefile中列出了所有需要的头文件和库（见下文），为什么会出现这个问题？

```
CXXFLAGS = -O3 -g -Wall -fmessage-length=0 -I./include -I/usr/local/include/opencv
LIBS = -L/usr/local/lib -lcv -lcvaux -lhighgui -lcxcore -limgproc

MAIN_PROG_OBJS =    MainProgram.o src/Utilities.o src/ImageStream.o src/VideoStream.o
MAIN_PROG_TARGET =  MainProgram

TEST_PROG_OBJS = TestProgram.o src/Utilities.o
TEST_PROG_TARGET = TestProgram

$(MAIN_PROG_TARGET):    $(MAIN_PROG_OBJS)
    $(CXX) -o $(MAIN_PROG_TARGET) $(MAIN_PROG_OBJS) $(LIBS)

$(TEST_PROG_TARGET):    $(TEST_PROG_OBJS)
    $(CXX) -o $(TEST_PROG_TARGET) $(TEST_PROG_OBJS) $(LIBS)

all:    $(MAIN_PROG_TARGET) $(TEST_PROG_TARGET)

clean:
    rm -f $(MAIN_PROG_OBJS) $(MAIN_PROG_TARGET) $(TEST_PROG_OBJS) $(TEST_PROG_TARGET) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:22:35.777

Eclipse 会尝试快速查找错误，但不会一直更新。不要只依赖 Eclipse 的错误消息。

例如，如果您刚刚向项目中添加了一个文件，Eclipse 可能仍然会告诉您它找不到该文件，而实际上它就在那里。

使用 Project -> Clean 来更新 Eclipse 的错误检查。

# android - 计算机崩溃后 Eclipse 将不再调试

> ID：13751866
> 
> 赞同：1
> 
> 时间：2012-12-06T20:21:16.330
> 
> 标签：android, eclipse, debugging

昨晚在用Eclipse开发安卓应用的时候，电脑突然出现故障，出现蓝屏。

重启后，打开Eclipse，继续开发，发现即使输入错误，Eclipse也不会显示任何错误信息。

比如我在activity中输入**$^&((^(*&$GFKGHlkgvfekigfe**，Eclipse什么都不显示，就像代码是对的一样LOL

如何重新启用自动调试功能？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:28:27.257

或者尝试以干净模式运行 Eclipse。请看下面的讨论：[How to run eclipse in clean mode](https://stackoverflow.com/questions/2030064/how-to-run-eclipse-in-clean-mode-and-what-happens-if-we-do-so)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:26:24.193

您可以通过以下方式自动构建

1.  转到 Eclipse 项目菜单
2.  选择`Build Automatically`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:45:11.773

尝试清理您的项目。在 Eclipse 中，在项目导航器中选择您的根项目文件夹，然后转到`Project > Clean... > OK`. 您还可以通过选择`Clean all projects`清理对话框中的单选按钮来清理所有项目。

# java - java - ArrayList - 合并排序

> ID：13751877
> 
> 赞同：0
> 
> 时间：2012-12-06T20:21:43.660
> 
> 标签：java, sorting

当我运行它时，合并排序没有发生，我无法弄清楚问题出在哪里。存在 int brelem 和 SortThread 任务参数只是因为我需要它们正确地覆盖父类的方法，因此它们在这种情况下不起任何作用。

```
class MergeSort extends Sort {

@Override
ArrayList sort(ArrayList<Integer> a, int brelem, SortThread task) {
    if (a.size() > 1) {

        ArrayList<Integer> firstHalf = new ArrayList<>(a.subList(0, a.size() / 2));

        firstHalf.subList(0, a.size() / 2);
        firstHalf=sort(firstHalf, a.size() / 2, task);

        ArrayList<Integer> secondHalf = new ArrayList<>(a.subList(a.size()/2, a.size()));

        secondHalf=sort(secondHalf, secondHalf.size(), task);

        ArrayList<Integer> temp = merge(firstHalf, secondHalf);
        a.subList(0, temp.size());
    }
    return a;
}

private static ArrayList merge(ArrayList<Integer> list1, ArrayList<Integer> list2) {
    ArrayList<Integer> temp = new ArrayList<>();

    int current1 = 0;
    int current2 = 0;
    int current3 = 0;

    while (current1 < list1.size() && current2 < list2.size()) {
        if (list1.get(current1) < list2.get(current2)) {
            temp.set((current3++), list1.get(current1++));
        } else {
            temp.set((current3++), list2.get(current2++));
        }
    }

    while (current1 < list1.size()) {
        temp.set((current3++), list1.get(current1++));
    }

    while (current2 < list2.size()) {
        temp.set((current3++), list2.get(current2++));
    }

    return temp;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:26:27.777

除其他外，您正在返回`a`，而不是`temp`。据我所知，您永远不会修改`a`.

也许你对做什么感到困惑`List.subList()`。它*返回*列表的视图，因此无论您在`sort`倒数第二条语句中使用它做什么都将无效，因为您忽略了返回值。

# vim - VimL：取消加载插件的功能

> ID：13751883
> 
> 赞同：0
> 
> 时间：2012-12-06T20:22:15.863
> 
> 标签：vim, vim-plugin

也许问题标题不太具体。所以让我解释一下：

这是为了[这个 GitHub 分支](https://github.com/Greduan/vim_number-toggle)，为了[numbertoggle Vim 插件](https://github.com/jeffkreeftmeijer/vim-numbertoggle)。请检查我的叉子的结构，以理解我的意思。

我需要的是一种在加载后停用它的方法。换句话说，如果调用该函数，请将其从图表中完全删除。

换句话说，换句话说。如果插件被调用，而我这样做`:call NumberToggleOff()`了，那么它将禁用它并像 Vim 正常运行一样。

什么是实现这一目标的好方法？我尝试了几种方法，但没有一个有效。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:29:18.303

通常它可以通过周围的自动命令来完成

```
augroup NumberToggle
    …
augroup END 
```

并记住`{lhs}`映射。要禁用它，然后执行

```
let s:plugin_lhs=exists('g:NumberToggleTrigger') ? g:NumberToggleTrigger : '<C-n>'
let g:numbertoggle={}
function! g:numbertoggle.unload()
    augroup NumberToggle
        autocmd!
    augroup END
    augroup! NumberToggle
    execute 'nunmap' s:plugin_lhs
    delfunction NumberToggle
    delfunction UpdateMode
    delfunction FocusGained
    delfunction FocusLost
    delfunction InsertLeave
    delfunction InsertEnter
    unlet g:numbertoggle
    unlet g:loaded_numbertoggle
    unlet g:insertmode g:focus
    unlet s:plugin_lhs
endfunction
" Then do :call g:numbertoggle.unload()
" Loading is done by resourcing numbertoggle 
```

如果不是使用一堆`delfunction`调用，而是将所有函数名称转换为`g:numbertoggle.toggle`, `g:numbertoggle.update`, ... 并离开，那会好得多`unlet g:numbertoggle`。

它完全取消了插件的效果，而不仅仅是禁用它。

# javascript - 如何在 D3.js 中的 svg 上显示一条直线？

> ID：13751884
> 
> 赞同：1
> 
> 时间：2012-12-06T20:22:16.450
> 
> 标签：javascript, d3.js, charts, visualization, tsv

我有一个难题。[我在这里](http://pastebin.com/6wHssc80)有一段代码，它是“多系列”画廊示例的稍微修改的示例（对不起，10 个代表，并且不能链接超过两次）并使用[这个 .tsv 文件](http://pastebin.com/K3UPm0Su)。期望是将当前在代码中绘制的数据（“流”列）与未绘制图形的数据（+Avgstream 和 -Avgstream）列放在同一个 SVG 上。但是，在我完成的每个 D3.js 项目中，我都无法在图表上画出直线。目前在此图中，仅绘制流列。这是我尝试一种简单的方法来表明流的结果在我正在使用的数据的运行平均值之内或之外。

关于为什么这些线不会绘制的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:25:18.863

你只是想策划所有三个系列吗？应该没有问题，除了您在 tsv 文件中的列名包含我不确定是否允许的“+”和“-”字符：

```
Unixtime        stream  +Avgstream      -Avgstream
1351805809      5594    5489    6379
1351865010      5468    5489    6379
1351868732      5479    5489    6379
1351875915      5504    5489    6379
1351883184      7177    5489    6379
1351890345      5481    5489    6379
... 
```

我将您的列名（和 tsv 解码）替换为：

```
data = [
    {Unixtime:1351805809, stream: 5594, plusavg:5489, lessavg:6379},
    {Unixtime:1351865010, stream: 5468, plusavg:5489, lessavg:6379},
    {Unixtime:1351868732, stream: 5479, plusavg:5489, lessavg:6379},
    {Unixtime:1351875915, stream: 5504, plusavg:5489, lessavg:6379},
    {Unixtime:1351883184, stream: 7177, plusavg:5489, lessavg:6379}
]; 
```

我在图表中得到三行：

![在此处输入图像描述](../Images/5f8804570c2556d3c8b670e79b7d408a.png)

这就是你想要做的吗？见[这里](http://jsfiddle.net/td2zX/)。

# jsf - 是否可以使用 里面

> ID：13751889
> 
> 赞同：2
> 
> 时间：2012-12-06T20:22:25.227
> 
> 标签：jsf, jstl, repeat, ajax4jsf

可以在`<c:if>`里面使用`<a4j:repeat>`吗？

我需要渲染`<br />`每 4 个元素。我尝试了以下方法：

```
<a4j:repeat value="#{MBean.sucursal.events}" var="item" rowKeyVar="idx" >   
   <h:outputText value="#{item.eventDescription}" id="item1" />
   <c: if test=#{idx % 4 == 0}>
       <br />
   </c:if>
</a4j:repeat> 
```

但是，它根本不渲染`<br />`元素。

无论如何，我怎样才能达到要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:04:11.033

注意：我将忽略导致它根本无法正确编译/运行的代码的粗心公式。有一个空格，并且属性`<c :if>`中缺少引号。`<c:if test>`在以后的问题中，请多注意您发布的代码片段的正确性，否则由于那些红鲱鱼，您只会得到无效的答案。

* * *

回到你的具体问题，这个构造确实会失败。在`<c:if>`视图构建时运行（即将基于 Facelets/JSP 文件填充 JSF 组件树时），而`<a4j:repeat>`在视图渲染时运行（当即将基于 JSF 组件树生成 HTML 代码时）。因此，目前`<c:if>`运行时，`#{idx}`范围内根本不存在，并且始终评估为`null`.

基本上有2个解决方案：

1.  使用`<c:forEach>`而不是`<a4j:repeat>`迭代项目。它在视图构建期间运行，因此它将与`<c:if>`.

    ```
    <c:forEach items="#{MBean.sucursal.events}" var="item" varStatus="loop">   
       <h:outputText value="#{item.eventDescription}" id="item#{loop.index}" />
       <c:if test="#{loop.index % 4 == 0}">
           <br />
       </c:if>
    </c:forEach> 
    ```

    *（请注意，我也更改了`<h:outputText id>`，否则您最终会出现重复的组件 ID 错误或格式错误的 HTML；您可以`id`完全省略该属性，JSF 将自动生成正确的属性）*

2.  使用 JSF 组件的`rendered`属性而不是`<c:if>`有条件地呈现 HTML。它在视图渲染期间运行，因此它将与`<a4j:repeat>`.

    ```
    <a4j:repeat value="#{MBean.sucursal.events}" var="item" rowKeyVar="idx">   
       <h:outputText value="#{item.eventDescription}" id="item1" />
       <h:panelGroup rendered="#{idx % 4 == 0}">
           <br />
       </h:panelGroup>
    </a4j:repeat> 
    ```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# asp.net - 会话状态在多台计算机上持续存在

> ID：13751893
> 
> 赞同：1
> 
> 时间：2012-12-06T20:22:32.003
> 
> 标签：asp.net, asp.net-ajax, session-state

我确定这与多台计算机之间的持久性无关，但似乎很奇怪，第二次网站访问会触发动态加载以显示在 Ajax 更新面板中的问题和答案的刷新。

### 会话交互和日志记录

网络配置：

```
 <sessionState mode="InProc" cookieless="UseCookies" timeout="20" cookieName="ASPNET_Quiz" /> 
```

全球.asax：

```
Sub Session_Start(ByVal sender As Object, ByVal e As EventArgs)
    Session("test") = "true"    'Used only to create a static Session ID for references.

    If (Globals.Quiz(Session) Is Nothing) Then
        Globals.Quiz(Session) = New classes.Quiz(WebConfigurationManager.OpenWebConfiguration("~"))
    End If
End Sub

Sub Session_End(ByVal sender As Object, ByVal e As EventArgs)

    ' Fires when the session ends
    Globals.Quiz(Session) = Nothing
    Session.Remove("test")
    Session.Abandon()
End Sub 
```

全局变量.vb

```
Module Globals
    'Get/Set a Quiz object into the SessionState.
    Public Property Quiz(sess As HttpSessionState) As Quiz
        Get
            Return CType(sess("quiz"), Quiz)
        End Get
        Set(value As Quiz)
            sess("quiz") = value
        End Set
    End Property

End Module 
```

我有一个带有 UpdatePanel 的母版页，用于根据数据库值倒计时分钟数，并且 AsyncPostBack 触发了 Timer Tick 事件（间隔 = 1000）

内容页面有一个不同的 UpdatePanel 围绕站点的 Question & Answers 包装，并且还有一个 AsyncPostBack 触发器（通过代码隐藏）注册到已构建的 RadioButtonList 的 SelectedIndexChanged 事件。

如果只有一个人访问该站点，则没有问题。一旦另一个用户访问该站点，就会在 Quiz 对象中重新排列问题和答案，然后重新排列它们的显示并基本上导致尚未回答的问题显示在用户当前位置的上方或下方。已经选择的答案不会改变，但答案的顺序会重新洗牌。问答的随机化植根于 SQL Server 端，通过 SProc。

### 2012-12-07 更新

*   更改了上面所有 3 个代码段以反映我当前的设计
*   此外，不确定是否重要，但将内容页面 UpdatePanel PostBackTrigger 从更改`AsyncPostBack`为`PostBack`

### 问题：

1.  有什么建议可以解决这个问题吗？如果有任何问题，我还为该站点合并了 PageRouting。
2.  是否有更好的方法来存储 .Net 对象，以便它们在回发中存活？关键是与 Quiz 对象关联的 Questions & Answers 类在每次调用 Sproc 时都是动态排序的。所以我需要让它们保持与它们首次出现时相同的顺序。
3.  我应该在`Application_BeginRequest`而不是初始化 Quiz 对象`Session_Start`吗？

# javascript - 从事件处理程序闭包访问公共和私有方法

> ID：13751901
> 
> 赞同：0
> 
> 时间：2012-12-06T20:23:05.283
> 
> 标签：javascript, closures, dom-events, private-members

我很难理解我当前的 JavaScript 代码是如何工作的。我已经设法解决了从事件处理程序闭包访问私有对象方法的问题，但我想知道它为什么会这样工作。

该代码利用了众所周知的模块/插件隐喻：

```
(function(module, $, undefined)
{
  function myPrivateCode(e){ /*...*/ }

  module.myPublicCode = function(e) { /*...*/ }

  module.init = function()
  {
    var that = this;
    $('.clickable').click(function(e)
    {
      if($(e.target).hasClass('classX'))
      {
         that.myPublicCode(e.target); // requires 'that' to work
      }
      else
      {
         // that.
         myPrivateCode(e.target);     // will fail if 'that' uncommented
      }
    });
  }

}(window.module = window.module || {}, jQuery )); 
```

在代码中，我设置了一个调用公共或私有方法的点击处理程序。完全可以想象，我们需要将对象引用传递给事件处理程序闭包，这是由`that`局部变量完成的。对我来说奇怪的是，`myPrivateCode`它既不需要`that`作为参考，也不会因为它的“隐私”而失败。这让我认为`myPrivateCode`访问不合适的对象，并且以某种方式与预期的方式不同。有人可以解释会发生什么吗？当然，我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:31:37.513

您的调用`myPrivateCode(e.target);`在您作为处理程序传递给函数的匿名函数的上下文中运行`click`。

有关更多信息，请阅读[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)。

对于一个更简单的示例，请尝试以下代码：

```
var foo = function () {
    var a = 1;

    return function (b) {
        return a+b;
    }
};

var bar = foo();

bar(1); // 2 
```

`bar(1)`将始终给出 2，因为`a = 1`在创建函数时在范围内。在你的情况下，`a`是你的`that`，你的处理程序是封闭的功能。

[http://jsfiddle.net/Fh8d3/](http://jsfiddle.net/Fh8d3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:37:59.683

两者`that`和`myPrivateCode`都可以通过[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)供您的事件处理程序使用。简而言之，您在另一个函数中声明的每个变量和函数都可以访问外部作用域。

`myPublicCode`另一方面，不能通过闭包获得，因为它是专门分配给您的`module`对象的。所以调用它的唯一方法是使用`module.myPublicCode()`（或者`that.myPublicCode()`像你一样 - 但你实际上并不需要`that`那里，因为`module`它也可用）。

# uddi - 为服务更改构建订阅警报

> ID：13751903
> 
> 赞同：1
> 
> 时间：2012-12-06T20:23:20.160
> 
> 标签：uddi

我在 Windows 2008 上使用 Biztalk UDDI V3（独立安装）。我已经配置了所有服务（Web、数据库和订阅）：

*   我成功发布了几个服务
*   我从我的 .net 控制台应用程序中成功访问并检索了服务信息。

我此时的问题是订阅服务。我尝试订阅其中一项已发布的服务，却发现我需要创建自己的侦听器。

我按照[此处](http://www.packtpub.com/article/soa-capabilities-in-biztalk-uddi)列出的步骤进行操作。请查看标题为“为服务更改构建订阅警报”的部分。我对我创建的 WCF 服务应该是什么样子感到困惑。指令说明如下：

***现在我们创建一个新的 WCF 服务项目并引用这个现有的服务库。在确保 .svc 文件指向我们引用的库对象并添加有效的端点配置文件后，在 Web 浏览器中查看我们的服务以确保它已启动并运行**。*

我觉得这部分令人困惑。不确定 WCF 服务将公开哪些公共方法（如果有的话）或如何公开我刚刚从 WCF 项目中引用的服务库中的功能。

当然，如果您知道实现我想要实现的目标的不同方法，那也将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T00:37:50.150

这可能会有所帮助。实际上，我只是使用 .NET C# 为 Apache jUDDI 的客户端库编写了一个完整的端口。其中一个用例实际上是您正在尝试做的事情。这是使用的粗略方法。

*   从 wsdl 生成代码（使用 wsdl.exe，因为 svcutil 不喜欢 UDDI wsdls）
*   更改接口代码以具有订阅侦听器类的 WCF 绑定
*   创建订阅侦听器的实现并处理回调
*   使用 WCF 的嵌入式服务启动实现
*   向 UDDI 注册您的子侦听器端点（根据规范使用正确的注释）
*   使用您的子侦听器的绑定模板设置订阅
*   等待回调

这是代码 [http://svn.apache.org/repos/asf/juddi/trunk/juddi-client.net/](http://svn.apache.org/repos/asf/juddi/trunk/juddi-client.net/)

示例 [http://svn.apache.org/repos/asf/juddi/trunk/juddi-client.net/juddi-client.net-sample/org.apache.juddi.client.samples/SubscriptionCallbackExample.cs](http://svn.apache.org/repos/asf/juddi/trunk/juddi-client.net/juddi-client.net-sample/org.apache.juddi.client.samples/SubscriptionCallbackExample.cs)

还有一个 Java 版本可以做同样的事情。

# objective-c - Objective-C 是否具有与 java 注释等效的功能？

> ID：13751906
> 
> 赞同：12
> 
> 时间：2012-12-06T20:23:35.407
> 
> 标签：objective-c, ios

Objective-C 是否具有与 java 注释等效的功能？

我要做的是创建一个属性并能够以某种方式访问​​有关它的一些元数据。

我希望能够确定我的数组中应该包含什么类型的类，所以我想以某种方式注释它。然后稍后可以通过运行时库之类的东西访问该注释，我可以在其中访问属性列表及其名称。

```
//Put some sort of annotation giving a class name.
@property (strong) NSArray *myArray; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T22:00:09.110

你说：

> 我希望能够确定我的数组中应该包含什么类型的类，所以我想以某种方式注释它。然后稍后可以通过运行时库之类的东西访问该注释，我可以在其中访问属性列表及其名称。

在 Objective-C 中有几种方法可以做这种事情。Apple 的框架通过添加返回所需信息的类方法来执行此类操作。示例：[KVO 中的依赖键](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVODependentKeys.html#//apple_ref/doc/uid/20002179-BAJEAIEE)，[`+[CALayer needsDisplayForKey:]`以及相关方法](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/clm/CALayer/needsDisplayForKey%3a)。

因此，让我们创建一个类方法，该方法返回一个类数组，可以在给定属性名称的情况下进入您的容器属性。首先，我们将添加一个类别来`NSObject`实现该方法的通用版本：

```
@interface NSObject (allowedClassesForContainerProperty)

+ (NSArray *)allowedClassesForContainerPropertyWithName:(NSString *)name;

@end

@implementation NSObject (allowedClassesForContainerProperty)

+ (NSArray *)allowedClassesForContainerPropertyWithName:(NSString *)name {
    if (class_getProperty(self, name.UTF8String)) {
        return @[ [NSObject class] ];
    } else {
        [NSException raise:NSInvalidArgumentException
            format:@"%s called for non-existent property %@", __func__, name];
        abort();
    }
}

@end 
```

如您所见，该方法的默认版本并没有做任何特别有用的事情。但是添加它`NSObject`意味着我们可以将消息发送到任何类，而不必担心该类是否实现了该方法。

为了使消息返回有用的信息，我们在自己的类中覆盖它。例如：

```
@implementation MyViewController

+ (NSArray *)allowedClassesForContainerPropertyWithName:(NSString *)name {
    if ([name isEqualToString:@"myArray"]) {
        return @[ [UIButton class], [UIImageView class] ];
    } else {
        return [super allowedClassesForContainerPropertyWithName:name];
    }
}

... 
```

我们可以这样使用它：

```
SomeViewController *vc = ...;
SomeObject *object = ...;
if ([[vc.class allowedClassesForContainerPropertyWithName:@"bucket"] containsObject:object.class]) {
    [vc.bucket addObject:object];
} else {
    // oops, not supposed to put object in vc.bucket
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-25T22:38:04.663

此功能没有本机支持，但您可以查看以下解决方案 - <a href="https://github.com/epam/lib-obj-c-attr/" rel="noreferrer"> https://github.com/epam/lib-obj-c-attr/ 它是属性的编译时实现。基于定义而不是注释的属性定义，如 ObjectiveCAnnotate 等其他解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T21:18:52.203

不，Objective-C 没有注释或泛型支持。

* * *

实现这种事情的一种方法是[破解 Clang 以读取评论](http://llvm.org/devmtg/2012-11/#talk3)并将元数据对象与原始对象相关联。但是，您将被绑定到您被黑的编译器。

```
NSString *v1 = [[NSString alloc] init];

// associate
static char key;
NSString *v2 = [[NSString alloc] init];
objc_setAssociatedObject (
    v1,
    &key,
    v2,
    OBJC_ASSOCIATION_RETAIN
);

// retrieve
NSString *associate = (NSString *)objc_getAssociatedObject(v1, &key); 
```

* * *

使用协议进行限定不会很麻烦，您可以测试集合是否实现了它，但在此过程中，您需要为同一集合上的每种类型创建一个类别。这将需要在编译时使用宏进行不同的集合。过于复杂。

```
@interface Tomato:NSObject @end
@implementation Tomato @end

@protocol TomatoNSArray <NSObject>
- (Tomato*)objectAtIndexedSubscript:(NSUInteger)index;
- (void)setObject:(Tomato*)tomato atIndexedSubscript:(NSUInteger)index;
@end

// here is the problem, you would need to create one of this for each type
@interface NSMutableArray (TomatoNSArray) <TomatoNSArray>
@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSMutableArray<TomatoNSArray> *tomatoes = [[NSMutableArray alloc] initWithCapacity:2];
        tomatoes[0] = [Tomato new];
        tomatoes[1] = [NSObject new]; // warning: incompatible pointer types 
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T21:36:47.077

Objective C 不像 Java 那样支持泛型，但是该语言当然非常灵活，您可以通过简单的技巧和知识完成几乎任何事情。要实现类似通用的功能，您可以在 NSArray 类上创建一个类别并创建自己的方法来初始化数组，然后检查对象是否真的是您想要的对象的类型。

我会在 NSArray 上写一个简单的类别来拥有这样的功能。假设，我希望我的数组只保存 MyClass 类的对象，然后我的类别看起来像，

```
@interface NSArray(MyCategory)

@end

@implementation NSArray(MyCategory)

-(NSArray*)arrayWithMyClasses:(NSArray*)classes{
    if([classes count] > 0){
        NSMutableArray *array = [[NSMutableArray alloc] init];
        for(id anObj in classes){
            NSAssert([anObj isKindOfClass:[MyClass class]], @"My array supports only objetcts of type MyClass");
            [array addObject:anObj];
        }
        return array;
    }
    return nil;
}
@end 
```

当然，它有一些限制。由于您已经创建了自己的类别，因此您应该使用自己的方法来初始化和创建自己的数组。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T20:40:44.370

> Objective-C 是否具有与 java 注释等效的功能？

不完全等同，但有，而且更好。在 Objective-C 中，编译器必须在编译后的代码中存储一些类型和名称信息（因为语言是高度动态的，很多事情发生在运行时而不是编译时），例如方法名称（“选择器”） 、方法类型签名、关于属性、协议等的数据。然后， [Objective-C 运行时库](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)可以访问这些数据。例如，您可以通过编写来获取对象具有的属性列表

```
id object = // obtain an object somehow
unsigned count;
objc_property_t *props = class_copyPropertyList([object class], &count); 
```

或者您可以检查对象属于哪个类：

```
if ([object isKindOfClass:[NSArray class]]) {
    // do stuff
} 
```

（是的，为了方便，部分运行时库本身被封装到了 NSObject 的一些方法中，其他的只有 C 函数 API。）

如果您特别想存储有关对象或类的自定义元数据，您可以使用[关联引用来做到这一点。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocAssociativeReferences.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-21T06:37:47.750

我希望现在应该很清楚，答案是**否定**的，目前还没有。

有些人发现了一些似乎适用于他们特定用例的替代方案。

但总的来说，objective-c 中还没有类似的功能。恕我直言，clang 元数据似乎为此提供了良好的基础，但据我了解，只要没有 Apple 的支持，这将无济于事。

顺便提一句。我想这应该很清楚，但只是重复一遍：需要两个更改来支持 java.util 中提供的注释。

1.  该语言需要对源代码中的方法、属性、类等注释进行扩展。
2.  访问注释信息需要标准接口。这只能由苹果提供。

大多数替代解决方案将注释信息移动到运行时并定义自己的接口。Objective-c 运行时提供了一个标准接口，但只有通过一些技巧才能注释属性，但仍然存在运行时填充问题。

此类功能的典型用例是 IOC 容器（在 Java 中，例如 Spring），它使用带注释的信息来注入其他对象。

我建议为 Apple 打开一个功能请求以支持此功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T21:47:24.540

The answer to your question is that Objective-C does not have a direct equivalent of annotations as found in Java/C#, and though as some have suggested you might be able to engineer something along the same lines it probably is either far too much work or won't pass muster.

To address your particular need see [this answer](https://stackoverflow.com/questions/5197446/nsmutablearray-force-the-array-to-hold-specific-object-type-only/5198040#5198040) which shows how to construct an array which holds objects of only one type; enforcement is dynamic and not static as with parametric types/generics, but that is what you'd be getting with your annotation so it probably matches your particular need in this case. HTH.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-26T16:33:13.097

您需要的可能是 Objective-C 的元数据解析器。我使用了 ObjectiveCAnnotate（编译时可检索）和 ROAnnotation（运行时可检索）。

# c# - 无法写入数据库

> ID：13751908
> 
> 赞同：1
> 
> 时间：2012-12-06T20:23:42.723
> 
> 标签：c#, asp.net, sql

我有一个带有用户名、密码和用户标识符的网络表单，它将用户分类为管理员的“A”或标准用户的“U”。

当您提交表单时，它应该写入我在 Visual Studio 中设置的数据库，该数据库目前已经有其他用户。

当我测试 Web 表单时，我收到一个错误“NullReferenceException 未被用户代码处理”、“对象引用未设置为对象的实例”。它指向我的网页表单页面上的这行代码。

```
clsDataLayer.SaveUser(Server.MapPath("PayrollSystem_DB.mdb"), Session["txtUserName"].ToString(), Session["txtPassword"].ToString(), Session["drpdwnlstSecurityLevel"].ToString()); 
```

你看到这行代码有什么问题吗？

我有一个标记为“txtPassword”的文本框、一个标记为“txtPassword”的文本框和一个带有 U 或 A 选项的下拉列表，标记为“drpdwnlstSecurityLevel”。

当您提交信息时，它应该将其发送到我的 clsDataLayer.cs SaveUser 方法，该方法是：

```
public static bool SaveUser(string Database, string UserName, string UserPassword, string SecurityLevel)
    {

        bool userSaved;

        try
        {
            // Define SQLConnClass
            OleDbConnection conn = new OleDbConnection("PROVIDER=Microsoft.Jet.OLEDB.4.0;" +
                                                       "Data Source=" + Database);
            conn.Open();
            OleDbCommand command = conn.CreateCommand();
            string strSQL;

            // this insert data to user table
            strSQL = "Insert into tblUserLogin " +
                     "(UserName, UserPassword, SecurityLevel) values ('" +
                     UserName + "', '" + UserPassword + "', " + SecurityLevel + "')";

            // this gives a command to get or set values
            command.CommandType = CommandType.Text;
            command.CommandText = strSQL;

            // This sql statements brings out the affacted rows
            command.ExecuteNonQuery();

            // closes the connection
            conn.Close();
            userSaved = true;
        }

        catch (Exception ex)
        {
            userSaved = false;
        }

        return userSaved;
    } 
```

当您尝试使用我的网络表单创建新用户时，它不会创建任何记录，它只会发出我提到的错误。

这是我与此问题相关的所有代码：

文件 clsDataLayer.cs：

// 这个函数保存用户数据 public static bool SaveUser(string Database, string UserName, string UserPassword, string SecurityLevel) {

```
bool userSaved;

try
{
    // Define SQLConnClass
    OleDbConnection conn = new OleDbConnection("PROVIDER=Microsoft.Jet.OLEDB.4.0;" +
                                               "Data Source=" + Database);
    conn.Open();
    OleDbCommand command = conn.CreateCommand();
    string strSQL;

    // this insert data to user table
    strSQL = "Insert into tblUserLogin " +
             "(UserName, UserPassword, SecurityLevel) values ('" +
             UserName + "', '" + UserPassword + "', " + SecurityLevel + "')";

    // this gives a command to get or set values
    command.CommandType = CommandType.Text;
    command.CommandText = strSQL;

    // This sql statements brings out the affacted rows
    command.ExecuteNonQuery();

    // closes the connection
    conn.Close();
    userSaved = true;
}

catch (Exception ex)
{
    userSaved = false;
}

return userSaved; 
```

}

文件 frmManageUsers.aspx.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class frmManageUsers : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnAddUser_Click(object sender, EventArgs e)
    {
        string userName, userPassword;

        if (txtUserName.Text == "" || txtUserName.Text == null)
        {
            lblUserError.Text = ("User Name may not be empty");
            lblUserError.ForeColor = System.Drawing.Color.Red;
            return;
        }
        else

            userName = (txtUserName.Text);

        if (txtPassword.Text == "" || txtPassword.Text == null)
        {
            lblUserError.Text = ("Password may not be empty");
            lblUserError.ForeColor = System.Drawing.Color.Red;
            return;
        }
        else
        {
            userPassword = (txtPassword.Text);
        }

        // clsDataLayer.SaveUser(Server.MapPath("PayrollSystem_DB.mdb"), Session["txtUserName"].ToString(), Session["txtPassword"].ToString(), Session["drpdwnlstSecurityLevel"].ToString());
        clsDataLayer.SaveUser(
    Server.MapPath("PayrollSystem_DB.mdb"),
    txtUserName.Text,
    txtPassword.Text,
    drpdwnlstSecurityLevel.SelectedValue
    );
        Server.Transfer("frmManageUsers.aspx");        
    }
} 
```

文件 frmManageUsers.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="frmManageUsers.aspx.cs" Inherits="frmManageUsers" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div align="center">

        <a href="frmMain.aspx">
            <font color="black" size="2" style="text-align: center"><strong>
            <font color="blue" face="Comic Sans MS" size="4">Cool</font>
            <font color="#ff6600" face="Comic Sans MS" size="4">Biz</font>
            <font face="Comic Sans MS" size="4"> <font color="#993366">Productions</font>, 
            Inc.</font></strong></font>
        </a>
        <br />
        <br />
        <asp:Label ID="Label1" runat="server" Text="Manage Users"></asp:Label>
        <br />
        <asp:Label ID="Label2" runat="server" Text="User Name: "></asp:Label>
        <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
        <br />
        <asp:Label ID="Label3" runat="server" Text="Password: "></asp:Label>
        <asp:TextBox ID="txtPassword" runat="server"></asp:TextBox>
        <br />
        <asp:Label ID="lblUserError" runat="server"></asp:Label>
        <br />
        <asp:Label ID="Label4" runat="server" Text="Security Level: "></asp:Label>
        <asp:DropDownList ID="drpdwnlstSecurityLevel" runat="server" 
            DataSourceID="SqlDataSource2" DataTextField="SecurityLevel" 
            DataValueField="SecurityLevel">
            <asp:ListItem></asp:ListItem>
            <asp:ListItem></asp:ListItem>
        </asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:PayrollSystem_DBConnectionString %>" 
            ProviderName="<%$ ConnectionStrings:PayrollSystem_DBConnectionString.ProviderName %>" 
            SelectCommand="SELECT [SecurityLevel] FROM [tblUserLogin]">
        </asp:SqlDataSource>
        <br />
        <br />

        <asp:Button ID="btnAddUser" runat="server" onclick="btnAddUser_Click" 
            Text="Add User" />

        <br />
        <br />
        <asp:GridView ID="grdUserLogin" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource1">
            <Columns>
                <asp:BoundField DataField="UserID" HeaderText="UserID" InsertVisible="False" 
                    SortExpression="UserID" />
                <asp:BoundField DataField="UserName" HeaderText="UserName" 
                    SortExpression="UserName" />
                <asp:BoundField DataField="UserPassword" HeaderText="UserPassword" 
                    SortExpression="UserPassword" />
                <asp:BoundField DataField="SecurityLevel" HeaderText="SecurityLevel" 
                    SortExpression="SecurityLevel" />
            </Columns>
        </asp:GridView>
        <br />
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:PayrollSystem_DBConnectionString %>" 
            InsertCommand="INSERT INTO [tblUserLogin] ([UserID], [UserName], [UserPassword], [SecurityLevel]) VALUES (?, ?, ?, ?)" 
            ProviderName="<%$ ConnectionStrings:PayrollSystem_DBConnectionString.ProviderName %>" 
            SelectCommand="SELECT * FROM [tblUserLogin]">
            <InsertParameters>
                <asp:Parameter Name="UserID" Type="Int32" />
                <asp:Parameter Name="UserName" Type="String" />
                <asp:Parameter Name="UserPassword" Type="String" />
                <asp:Parameter Name="SecurityLevel" Type="String" />
            </InsertParameters>
        </asp:SqlDataSource>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:32:09.160

您是否将这些值存储在`Session`? 如果您发布的代码在代码隐藏中，您应该能够直接访问这些值：

```
clsDataLayer.SaveUser(
    Server.MapPath("PayrollSystem_DB.mdb"), 
    txtUserName.Text, 
    txtPassword.Text, 
    drpdwnlstSecurityLevel.SelectedValue
    ); 
```

此外，您应该**强烈**考虑使用带有参数而不是连接的 SQL 以[避免 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)：

```
strSQL = "Insert into tblUserLogin " +
         "(UserName, UserPassword, SecurityLevel) " + 
         "values (@UserName, @UserPassword, @SecurityLevel)"; 
```

当你在做的时候，也做以下事情：

*   `OleDbConnection`将你的和包装`OleDbCommand`成`using`块
*   在你的块中以某种方式显示异常消息`catch`，不要只是返回`false`

# php - PHP 套接字 (socket_read)

> ID：13751909
> 
> 赞同：1
> 
> 时间：2012-12-06T20:23:43.887
> 
> 标签：php, sockets

我从事个人项目，在多客户端服务器上管理套接字时遇到问题。

因此，根据 php.net，可以将 socket_read() 的参数放入由 socket_create 创建或由 socket_accept 接受的套接字...

如果我理解，socket_create 创建的套接字是一个“本地”套接字，而 socket_accept 发送的套接字是套接字客户端，是这样吗？

在这种情况下，我想将我的服务器套接字放在 socket_read 的参数中，以便在此套接字上的多个写入中等待客户端。

更清楚地说，我接受 4 个客户端并等待其中一个在此套接字上写入，但我无法输入特定客户端套接字的参数，因为我不知道他们中的哪一个会写入...

当我把套接字创建：socket_create，php返回一个错误

如您所见，我的母语不是英语，但没有人能回答我...

```
if (($sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP)) === false) {
            echo "socket_create() a échoué : raison : " . socket_strerror(socket_last_error()) . "\n";
        } 

        if (socket_bind($sock, $this->address, $this->port) === false) {
            echo "socket_bind() a échoué : raison : " . socket_strerror(socket_last_error($sock)) . "\n";
        }

        if (socket_listen($sock, 5) === false) {
            echo "socket_listen() a échoué : raison : " . socket_strerror(socket_last_error($sock)) . "\n";
        }

        for($i=0;$i<$this->maxClient;$i++){

            if(($client = socket_accept($sock)) === false){
                 echo "socket_accept() a échoué : raison : " . socket_strerror(socket_last_error($sock)) . "\n";
                 break; 
            }else echo "<br/>Client $client[$i] has connected\n";

            $this->joueurs[$i] = new Joueur($client,$i);
        } 
                    while($start){
            $messageClient = socket_read($sock , 1024);
                        ......
                    } 
```

所以，我有两个问题，第一个是，我需要 socket_read() 不会阻止我的脚本并扫描我的套接字，直到它找到要读取的内容。

第二个问题是，由于我的程序没有停止，我的客户没有收到任何东西，当我停止我的服务器时，我的客户收到了消息......

你有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:17:17.227

我发现了我的问题：解锁 socket_read()

```
socket_set_option($socket,SOL_SOCKET, SO_RCVTIMEO, array("sec"=>1, "usec"=>0));
                socket_set_nonblock($socket); 
```

而对于清除缓冲区，我使用“/n”，而只有当服务器停止时，我才能在客户端接收消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:42:37.227

熟悉[`socket_select`](http://php.net/manual/en/function.socket-select.php)- 它允许等待多个套接字变得可读或/和可写，或者有错误。当有新的连接挂起/准备就绪时，侦听套接字变得可读`accept()`。

# html - 如何编写 HTML 特殊字符而不渲染它们

> ID：13751910
> 
> 赞同：2
> 
> 时间：2012-12-06T20:23:55.780
> 
> 标签：html

这可能是一个非常简单的问题，但它一直困扰着我一段时间。

我正在尝试将用户输入呈现`'&amp;'`为`'&amp;'`. 浏览器一直在`'&'`为我转换它，我正在想办法解决它。所有编码字符都会发生这种情况，而不仅仅是＆符号。

如何`'&amp;'`在 HTML 中呈现为文本，而不是呈现为`'&'`?

这是一个 JSFiddle—— [http://jsfiddle.net/WSu6a/](http://jsfiddle.net/WSu6a/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:29:10.010

您可以使用`&#38;`或`&amp;`（与号）后跟代码的其余部分：

```
&#38;amp;
&amp;amp; 
```

**结果**

&

&

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:56:06.297

利用

`<xmp>&amp;</xmp>`

它似乎工作得很好。

（我想我会回来写一些关于`<xmp>`标签的内容。基本上它`<pre>`是浏览器仍然支持的弃用版本 - 示例的工作版本：http: [//jsdo.it/haxxed/tmCT](http://jsdo.it/haxxed/tmCT) - [XMP 标签详细信息](http://www.htmlcodetutorial.com/_XMP.html))

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T20:30:39.913

```
&amp;amp; 
```

也可以正常工作。

# ruby - 此 Active Record (2.3) 查询是否正确且完整？

> ID：13751911
> 
> 赞同：2
> 
> 时间：2012-12-06T20:23:59.783
> 
> 标签：ruby, activerecord, ruby-on-rails-2

我有一些相关的模型（Rails 2）：

```
class User < ActiveRecord::Base
  has_many :proposals, :dependent => :destroy  
end

class Proposal < ActiveRecord::Base
  belongs_to :user
  has_many :proposal_sections, :dependent => :destroy
end

class ProposalSection < ActiveRecord::Base
  belongs_to :proposal
end 
```

在行动中，我想返回所有与用户数据相关的数据。我正在使用这个查询：

```
User.find(:first, :conditions => ["id = ?", params[:id]], :include => [:proposals,   {:proposals => :proposal_sections}]) 
```

此查询是否正确且完整？谢谢你的回答。

# mysql - 从数据库导出用户

> ID：13751914
> 
> 赞同：0
> 
> 时间：2012-12-06T20:24:15.550
> 
> 标签：mysql, database, joomla, joomla2.5

我需要复制哪些数据库表才能将所有用户从一个 2.5 站点转移到另一个站点？我只需要用户而不需要其他表，因此不适用完整的数据库传输。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:38:55.533

这四个表 5 表用于保存用户数据。

```
#__usergroups
#__users
#__user_notes
#__user_profiles    
#__user_usergroup_map 
```

`#_`您的表前缀在哪里。在这 5 个`#__users`中是最重要的。但是，如果您有与用户关联的自定义组，组表也很有用。因此，这取决于您需要什么数据。查看这些表的字段和图出什么表就够了。

# mysql - MySQL ODBC 连接器 32 位还是 64 位？

> ID：13751915
> 
> 赞同：4
> 
> 时间：2012-12-06T20:24:22.600
> 
> 标签：mysql, odbc, mysql-odbc-connector

我想要一个 32 位应用程序（在 Windows 7 64 位上运行）通过 ODBC 连接到 MySQL 5 64 位。

MySQL ODBC 连接器必须是 32 位还是 64 位？

MySQL ODBC 连接器的寄存器大小是否必须与应用程序或 MySQL 相匹配？Windows 7 64bit 可以处理 32bit 和 64bit 连接器 - 所以这无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:32:11.227

（使用 R 32 位和 64 位/Windows 7 64 位/MySQL 5 32 位验证。）

**只有通过 ODBC 适配器连接的应用程序架构（32 位或 64 位）才重要，并且必须与之匹配。**

Windows 7 64bit 可以处理 32bit 和 64bit ODBC 连接器（虽然不同的数据源管理器）

对于 MySQL 5 32bit，您可以使用 32bit 和 64bit ODBC 连接器进行连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:54:40.907

您无法将 32 位应用程序链接到 64 位 ODBC 驱动程序，因此如果您的应用程序是 32 位的，则您别无选择。32 位 ODBC 驱动程序是否与 64 位 mysql 对话是另一回事

# javascript - 使用 onclick 事件删除 cookie

> ID：13751917
> 
> 赞同：0
> 
> 时间：2012-12-06T20:24:32.463
> 
> 标签：javascript, cookies

我的脚本使用 JavaScript 设置了一个名为 stop_mobi 的 cookie。然后，当用户单击带有 onclick 事件的链接时，我尝试删除 cookie，但是当我对此进行测试时，cookie 没有被删除。任何指向我哪里出错的指针都将不胜感激。谢谢。

```
<script type="text/javascript">
    // set stop_mobi cookie for test purposes

    function setCookie(cookieName, cookieValue, nDays) {
        var today = new Date();
        var expire = new Date();
        if (nDays == null || nDays == 0) nDays = 1;
        expire.setTime(today.getTime() + 3600000 * 24 * nDays);
        document.cookie = cookieName + "=" + escape(cookieValue) + ";expires=" + expire.toGMTString();
    }
    setCookie("stop_mobi", "yes", "5");

    function deleteCookie(name) {
        document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        alert('Cookie deleted');
    }
</script>

<a href="" onclick="deleteCookie('stop_mobi');">Delete cookie</a> 
```

# java - 更新或覆盖 Android 支持库中的文件

> ID：13751922
> 
> 赞同：0
> 
> 时间：2012-12-06T20:24:51.720
> 
> 标签：java, android, android-fragments

我发现我认为是 FragmentTabHost.java 中的一个错误，即使指定了布局，它也总是为 tabhost 生成一个新布局。[请参阅此处](http://code.google.com/p/android/issues/detail?id=40035)的 google 讨论。

我想在我的项目中覆盖这个文件，但是当我将它导入到我的项目中时遇到了错误。

有谁知道使用我自己的 FragmentTabHost.java 副本的正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:39:23.150

你可以使用这个类，然后用这个扩展你的新类

```
public class YourFragmentTabHost extends FragmentTabHost { 
```

**FragmentTabHost.java**

```
import java.util.ArrayList;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.TabHost;
import android.widget.TabWidget;

public class FragmentTabHost extends TabHost
        implements TabHost.OnTabChangeListener {
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    private FrameLayout mRealTabContent;
    private Context mContext;
    private FragmentManager mFragmentManager;
    private int mContainerId;
    private TabHost.OnTabChangeListener mOnTabChangeListener;
    private TabInfo mLastTab;
    private boolean mAttached;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    static class SavedState extends BaseSavedState {
        String curTab;

        SavedState(Parcelable superState) {
            super(superState);
        }

        private SavedState(Parcel in) {
            super(in);
            curTab = in.readString();
        }

        @Override
        public void writeToParcel(Parcel out, int flags) {
            super.writeToParcel(out, flags);
            out.writeString(curTab);
        }

        @Override
        public String toString() {
            return "FragmentTabHost.SavedState{"
                    + Integer.toHexString(System.identityHashCode(this))
                    + " curTab=" + curTab + "}";
        }

        public static final Parcelable.Creator<SavedState> CREATOR
                = new Parcelable.Creator<SavedState>() {
            public SavedState createFromParcel(Parcel in) {
                return new SavedState(in);
            }

            public SavedState[] newArray(int size) {
                return new SavedState[size];
            }
        };
    }

    public FragmentTabHost(Context context) {
        // Note that we call through to the version that takes an AttributeSet,
        // because the simple Context construct can result in a broken object!
        super(context, null);
        initFragmentTabHost(context, null);
    }

    public FragmentTabHost(Context context, AttributeSet attrs) {
        super(context, attrs);
        initFragmentTabHost(context, attrs);
    }

    private void initFragmentTabHost(Context context, AttributeSet attrs) {
        TypedArray a = context.obtainStyledAttributes(attrs,
                new int[] { android.R.attr.inflatedId }, 0, 0);
        mContainerId = a.getResourceId(0, 0);
        a.recycle();

        super.setOnTabChangedListener(this);

    }
    /**
     * @deprecated Don't call the original TabHost setup, you must instead
     * call {@link #setup(Context, FragmentManager)} or
     * {@link #setup(Context, FragmentManager, int)}.
     */
    @Override @Deprecated
    public void setup() {
        throw new IllegalStateException(
                "Must call setup() that takes a Context and FragmentManager");
    }

    public void setup(Context context, FragmentManager manager) {
        super.setup();
        mContext = context;
        mFragmentManager = manager;
        ensureContent();
    }

    public void setup(Context context, FragmentManager manager, int containerId) {
        super.setup();
        mContext = context;
        mFragmentManager = manager;
        mContainerId = containerId;
        ensureContent();
        mRealTabContent.setId(containerId);

        // We must have an ID to be able to save/restore our state.  If
        // the owner hasn't set one at this point, we will set it ourself.
        if (getId() == View.NO_ID) {
            setId(android.R.id.tabhost);
        }
    }

    private void ensureContent() {
        if (mRealTabContent == null) {
            mRealTabContent = (FrameLayout)findViewById(mContainerId);
            if (mRealTabContent == null) {
                throw new IllegalStateException(
                        "No tab content FrameLayout found for id " + mContainerId);
            }
        }
    }

    @Override
    public void setOnTabChangedListener(OnTabChangeListener l) {
        mOnTabChangeListener = l;
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        if (mAttached) {
            // If we are already attached to the window, then check to make
            // sure this tab's fragment is inactive if it exists.  This shouldn't
            // normally happen.
            info.fragment = mFragmentManager.findFragmentByTag(tag);
            if (info.fragment != null && !info.fragment.isDetached()) {
                FragmentTransaction ft = mFragmentManager.beginTransaction();
                ft.detach(info.fragment);
                ft.commit();
            }
        }

        mTabs.add(info);
        addTab(tabSpec);
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();

        String currentTab = getCurrentTabTag();

        // Go through all tabs and make sure their fragments match
        // the correct state.
        FragmentTransaction ft = null;
        for (int i=0; i<mTabs.size(); i++) {
            TabInfo tab = mTabs.get(i);
            tab.fragment = mFragmentManager.findFragmentByTag(tab.tag);
            if (tab.fragment != null && !tab.fragment.isDetached()) {
                if (tab.tag.equals(currentTab)) {
                    // The fragment for this tab is already there and
                    // active, and it is what we really want to have
                    // as the current tab.  Nothing to do.
                    mLastTab = tab;
                } else {
                    // This fragment was restored in the active state,
                    // but is not the current tab.  Deactivate it.
                    if (ft == null) {
                        ft = mFragmentManager.beginTransaction();
                    }
                    ft.detach(tab.fragment);
                }
            }
        }

        // We are now ready to go.  Make sure we are switched to the
        // correct tab.
        mAttached = true;
        ft = doTabChanged(currentTab, ft);
        if (ft != null) {
            ft.commit();
            mFragmentManager.executePendingTransactions();
        }
    }

    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        mAttached = false;
    }

    @Override
    protected Parcelable onSaveInstanceState() {
        Parcelable superState = super.onSaveInstanceState();
        SavedState ss = new SavedState(superState);
        ss.curTab = getCurrentTabTag();
        return ss;
    }

    @Override
    protected void onRestoreInstanceState(Parcelable state) {
        SavedState ss = (SavedState)state;
        super.onRestoreInstanceState(ss.getSuperState());
        setCurrentTabByTag(ss.curTab);
    }

    @Override
    public void onTabChanged(String tabId) {
        if (mAttached) {
            android.support.v4.app.FragmentTransaction ft = doTabChanged(tabId, null);
            if (ft != null) {
                ft.commit();
            }
        }
        if (mOnTabChangeListener != null) {
            mOnTabChangeListener.onTabChanged(tabId);
        }
    }

    private FragmentTransaction doTabChanged(String tabId, android.support.v4.app.FragmentTransaction ft) {
        TabInfo newTab = null;
        for (int i=0; i<mTabs.size(); i++) {
            TabInfo tab = mTabs.get(i);
            if (tab.tag.equals(tabId)) {
                newTab = tab;
            }
        }
        if (newTab == null) {
            throw new IllegalStateException("No tab known for tag " + tabId);
        }
        if (mLastTab != newTab) {
            if (ft == null) {
                ft = mFragmentManager.beginTransaction();
            }
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mContext,
                            newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
        }
        return ft;
    }
} 
```

# disqus - Disqus 508 是否兼容？

> ID：13751923
> 
> 赞同：0
> 
> 时间：2012-12-06T20:24:55.757
> 
> 标签：disqus, section508

我正在对评论/创意管理工具进行比较，我似乎无法找到答案的一个问题是，如果 508 兼容，Disqus 是否“开箱即用”。

我知道我可以通过 API 自定义输出，但如果我只想在 Drupal 站点上使用它，它是否满足最低 508 要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:47:24.563

我 100% 不同意 kcunning 的回答。像她一样，我没有分阶段的演示，所以我无法给出官方评论。我查看了 Disqus 的博客，我认为这将是一个很好的来源。查看渲染的代码，您将看到：

```
<div class="textarea-wrapper" data-role="textarea">
<div class="textarea" contenteditable="true" tabindex="0" role="textbox"
  aria-multiline="true" style="overflow: auto; max-height: 350px;">
<p>
text here<br>
</p>
</div> 
```

他们使用 ARIA 来允许`div`成为文本区域，但他们不使用 aria-label、-labeledby 或 - describeby。所以这相当于不提供 a `<label>`，这违反了 508 (1194.22(n))。

昆宁 说

> 我只用键盘或鼠标就可以访问所有内容，输入显示焦点，并且标题使用得当。

`div`在 Disqus 博客上，除了充当`textarea`、名称和电子邮件框外，您在任何地方都没有获得焦点指示。这可能是他们最终的一些 CSS 行为与产品/平台上的默认值。如果它是默认值，它会失败 1194.21(c)，在 UI 中缺乏明确定义的焦点。软件应用程序和操作系统适用，因为该表单编写了大量脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:26:20.630

Disqus 没有我可以查看的示例评论框，所以我去了 Oatmeals 并查看了他的。

开箱即用，我*认为*通过 508 评估不会有任何问题。我只用键盘或鼠标就可以访问所有内容，输入显示焦点，并且标题使用得当。头像没有替代文字，但我认为他们不需要它们，因为用户的名字就在它们旁边。

此外，由于您可以自定义界面来处理任何未解决的问题，这可能是您最容易使用的评论模块。

# sdk - 从 jenkins @ cloudbees 调用 cloudbees sdk

> ID：13751924
> 
> 赞同：0
> 
> 时间：2012-12-06T20:24:56.073
> 
> 标签：sdk, jenkins, java-7, cloudbees

我有一个在 Build@Cloud 上运行的 Jenkins 实例，它构建了一个运行 JDK7 的 WAR。在我的计算机上，我使用 -Rjava_version=1.7 调用 Cloudbees SDK bees:app deploy 命令，以指定要在运行时使用的 JDK。

但是，使用 Jenkins 中的 Cloudbees Deploy 插件，我无法指定这样的运行时参数。另一方面，我不能直接调用 SDK 命令。

是否有记录的方法可以从 Jenkins 实例中指定 -Rjava_version=1.7 选项？

感谢您的帮助，达米安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:40:10.713

您可以使用 SDK 设置此参数一次，相同应用程序 ID 的所有后续部署将重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T09:30:48.903

如果由于其他原因，您仍想使用 CloudBees SDK，有一个解决方案： [http ://wiki.cloudbees.com/bin/view/DEV/Scripting+Bees+SDK+in+Jenkins](http://wiki.cloudbees.com/bin/view/DEV/Scripting+Bees+SDK+in+Jenkins)

例如，我想部署一个简单的 java 应用程序（不是 WebApp）。所以不得不这样做：

```
bees app:deploy -a brnvrn/gdataaccess -t java -R class=com.brnvrn.test.Main -R classpath=gdataaccess.jar target\gdataaccess.zip waitForApplicationStart=false 
```

# python - 有效地将单行添加到 Pandas Series 或 DataFrame

> ID：13751926
> 
> 赞同：4
> 
> 时间：2012-12-06T20:25:00.733
> 
> 标签：python, performance, pandas, time-series

我想使用 Pandas 实时处理系列。每一秒，我都需要将最新的观察结果添加到现有系列中。我的系列被分组到一个 DataFrame 中并存储在一个 HDF5 文件中。

这是我目前的做法：

```
>> existing_series = Series([7,13,97], [0,1,2]) 
>> updated_series = existing_series.append( Series([111], [3]) ) 
```

这是最有效的方法吗？我已经阅读了无数帖子，但找不到任何关注高频数据效率的帖子。

**编辑**：我刚刚阅读了关于搁置和泡菜的模块。似乎他们会实现我想要做的事情，基本上将列表保存在磁盘上。因为我的列表很大，有没有办法不将完整列表加载到内存中，而是一次有效地追加一个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:21:51.583

查看 0.10 中的新 PyTables 文档（即将推出），或者您可以从 master 获取。[http://pandas.pydata.org/pandas-docs/dev/whatsnew.html](http://pandas.pydata.org/pandas-docs/dev/whatsnew.html)

PyTables 实际上非常擅长追加，并且每秒写入 HDFStore 都可以。你想存储一个 DataFrame 表。然后，您可以以查询方式选择数据，例如

```
store.append('df', the_latest_df)
store.append('df', the_latest_df)
....
store.select('df', [ 'index>12:00:01' ]) 
```

如果这一切都来自同一个过程，那么这将非常有效。如果你有一个 writer 进程，然后另一个进程正在读取，这有点棘手（但会根据你正在做的事情正常工作）。

另一种选择是使用消息传递从一个进程到另一个进程（然后附加到内存中），这样可以避免序列化问题。

# python - 允许用户输入变量 (Python)

> ID：13751928
> 
> 赞同：0
> 
> 时间：2012-12-06T20:25:27.510
> 
> 标签：python, input, pulp

我正在使用 PuLP 开发一个项目，我正在尝试创建一个终端提示符以允许用户输入他们的数据，然后我的 Python 程序会将输入更改为 PuLP 可读的代码。为此，我必须允许用户输入：

```
2*a + 3*b <= c 
```

我的代码将 eval() 这段代码以及创建变量 a、b 和 c 等

```
a = LpVariable("a",None,None,LpContinuous)
b = LpVariable("b",None,None,LpContinuous)
c = LpVariable("c",None,None,LpContinuous) 
```

有任何想法吗？我试过使用 exec() 但它似乎不太喜欢。

目前我通过以下方式获得输入：

```
print "Please enter your constraints 1 at a time and enter '#' when done:"
control = True
while (control):
    entry = raw_input('-->')
    entryS = ""
    entryS += entry 
```

所以字符串 2*a+3*B <= c 存储为 entryS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T01:40:17.177

使用`eval()`可能不是一个好主意，但如果你坚持（Python 3）：

```
call = lambda f: lambda *args: f(*args)
flip = lambda f: lambda *args: f(*reversed(args))

class Expression:

    def __repr__(self):
        return '{}({})'.format(type(self).__name__, self)

class BinaryExpression(Expression):

    def __init__(self, left, right):
        self.left = promote(left)
        self.right = promote(right)

    def __str__(self):
        return '({} {} {})'.format(self.op, self.left, self.right)

class Variable(Expression):

    def __init__(self, name):
        self.name = name

    def __str__(self):
        return self.name

class Number(Expression):

    def __init__(self, value):
        self.value = int(value)

    def __str__(self):
        return str(self.value)

class Multiplication(BinaryExpression):
    op = '*'

class Addition(BinaryExpression):
    op = '+'

class Smaller(BinaryExpression):
    op = '<'

class Greater(BinaryExpression):
    op = '>'

class SmallerOrEqual(BinaryExpression):
    op = '<='

class GreaterOrEqual(BinaryExpression):
    op = '>='

Expression.__mul__ = call(Multiplication)
Expression.__rmul__ = flip(Multiplication)
Expression.__add__ = call(Addition)
Expression.__radd__ = flip(Addition)
Expression.__lt__ = call(Smaller)
Expression.__gt__ = call(Greater)
Expression.__le__ = call(SmallerOrEqual)
Expression.__ge__ = call(GreaterOrEqual)

def promote(item):
    if isinstance(item, str):
        return Variable(item)
    elif isinstance(item, int):
        return Number(item)
    else:
        return item

class LpVariable:

    def __init__(self, name, x, y, z):
        self.name = name
        self.x = x
        self.y = y
        self.z = z

    def __str__(self):
        return 'LpVariable({}, {}, {}, {})'.format(
            self.name,
            self.x,
            self.y,
            self.z,
        )

    __repr__ = __str__

LpContinuous = 'LpContinuous'

class ExpressionVisitor:

    def visit(self, node):
        return getattr(self, 'visit_' + type(node).__name__)(node)

class LpTransformer(ExpressionVisitor):

    def visit_Variable(self, node):
        return LpVariable(node.name, None, None, LpContinuous)

    def visit_Number(self, node):
        return node.value

    def visit_Multiplication(self, node):
        return [node.op, self.visit(node.left), self.visit(node.right)]

    def visit_Addition(self, node):
        return [node.op, self.visit(node.left), self.visit(node.right)]

    def visit_Smaller(self, node):
        return [node.op, self.visit(node.left), self.visit(node.right)]

    def visit_Greater(self, node):
        return [node.op, self.visit(node.left), self.visit(node.right)]

    def visit_SmallerOrEqual(self, node):
        return [node.op, self.visit(node.left), self.visit(node.right)]

    def visit_GreaterOrEqual(self, node):
        return [node.op, self.visit(node.left), self.visit(node.right)]

class Evaluator(ExpressionVisitor):

    def __init__(self, **env):
        self.env = env

    def visit_Variable(self, node):
        return self.env[node.name]

    def visit_Number(self, node):
        return node.value

    def visit_Multiplication(self, node):
        return self.visit(node.left) * self.visit(node.right)

    def visit_Addition(self, node):
        return self.visit(node.left) + self.visit(node.right)

    def visit_Smaller(self, node):
        return self.visit(node.left) < self.visit(node.right)

    def visit_Greater(self, node):
        return self.visit(node.left) > self.visit(node.right)

    def visit_SmallerOrEqual(self, node):
        return self.visit(node.left) <= self.visit(node.right)

    def visit_GreaterOrEqual(self, node):
        return self.visit(node.left) >= self.visit(node.right)

class Namespace(dict):

    def __missing__(self, key):
        value = self[key] = Variable(key)
        return value

def main():
    constraints = '2*a + 3*b <= c'
    namespace = Namespace()
    tree = eval(constraints, {}, namespace)
    print('AST in prefix notation:', tree)
    print()
    print('Namespace:', namespace)
    print()
    print('LP-Transformed tree:')
    import pprint
    pprint.pprint(LpTransformer().visit(tree))
    print()
    print('Evaluated with a=3, b=5, c=10:')
    pprint.pprint(Evaluator(a=3, b=5, c=10).visit(tree))
    print()
    print('Evaluated with a=3, b=5, c=100:')
    pprint.pprint(Evaluator(a=3, b=5, c=100).visit(tree))

if __name__ == '__main__':
    main() 
```

结果：

```
AST in prefix notation: (<= (+ (* 2 a) (* 3 b)) c)    

Namespace: {'a': Variable(a), 'c': Variable(c), 'b': Variable(b)}

LP-Transformed tree:
['<=',
 ['+',
  ['*', 2, LpVariable(a, None, None, LpContinuous)],
  ['*', 3, LpVariable(b, None, None, LpContinuous)]],
 LpVariable(c, None, None, LpContinuous)]

Evaluated with a=3, b=5, c=10:
False

Evaluated with a=3, b=5, c=100:
True 
```

`LpVariable`课程显然是一个模型。此外，该`LpTransformer`课程应该产生可供纸浆使用的东西。只需相应地更改`visit_*`方法即可。

数字都是`int`s，你可能不想要。您可能应该添加`float`s 和/或将所有数字转换为`decimal.Decimal`.

我可能会编写一个真正的解析器，而不是`eval()`使用 pyparsing，或者，我最喜欢这样的东西，Parcon。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:43:20.817

放

```
entryS = "" 
```

在while循环之前。

# c# - 编译 Release 和 Debug 会生成不同的 IL 代码 + 不同的机器代码吗？

> ID：13751929
> 
> 赞同：9
> 
> 时间：2012-12-06T20:25:31.057
> 
> 标签：c#, .net, vb.net, csc, .net-framework-version

我听说在 Release 模式下编译会比在 Debug 模式下生成优化的代码，这很好。

但这是 IL 中的优化吗？一旦CLR运行它，它就在机器代码中吗？Release和Debug中编译的元数据结构与PE不同吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T20:41:36.950

Build in Release build 打开 C# 编译器的 /optimize 编译选项。这有*一些*副作用，IL 确实发生了变化，但变化不大。值得注意的是，编译器不再努力使代码完全可调试。例如，它会跳过一个空的静态构造函数，它不再发出允许您在花括号上设置断点并允许具有不同范围的局部变量在堆栈帧中重叠的 NOP 操作码。小东西。

最重要的区别是为程序集发出的 [Debuggable] 属性，其 IsJITOptimizerDisabled 属性为 false。

这会打开*真正的*优化器，即抖动中内置的优化器。您将在[此答案](https://stackoverflow.com/a/4045073/17034)中找到它执行的优化列表。请注意这种方法的有用性，*任何*语言都受益于在抖动中使用代码优化器而不是编译器。

所以简而言之，IL 的变化非常小，生成的机器代码变化非常大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:27:58.817

是的，IL 中有一些优化——特别是调试版本将包含 NOP 指令，我相信这使得调试器可以轻松插入断点。在提供的调试信息级别（行号等）方面也存在潜在差异。

我建议你拿一个小示例程序，以两种方式编译它，然后查看`ildasm`.

C# 编译器没有做*太多*优化——JIT 编译器做了大部分优化——但我认为存在*一些*差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T20:29:17.187

cil 不同，它是优化的。由于机器代码是 cil 的翻译，因此它也有所不同。可以自己看，在visual studio中打开反汇编窗口即可。元数据应保持不变，因为您不会更改版本之间的类合同结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T22:02:17.877

在 VB 中有一个副作用是编辑 + 继续支持编译到可执行文件中，这可能会导致内存泄漏。它受到使用 WithEvents 关键字声明的任何事件的影响。WeakReference 跟踪这些事件实例。问题是，如果您在没有调试器的情况下运行应用程序，这些 WeakReferences 就会泄露。进程消耗内存的速率很大程度上取决于创建了多少类实例。泄漏是每个对象每个事件 16 个字节。

免责声明：从汉斯的回答复制[here](https://stackoverflow.com/questions/5722562/net-winform-memory-consumption)

请参阅[此 Microsoft 知识库文章](http://support.microsoft.com/?kbid=919481)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T07:04:48.403

这不是确切问题的答案。*只是要补充一点，您可以在预处理器*标记的帮助下有目的地标记哪些代码必须在调试模式下运行，哪些在发布模式下运行。

```
 #if DEBUG
    // code only meant for debug mode
 #endif

 #if NOT DEBUG
    // code only meant for release mode
 #endif 
```

所以如果你这样做，你会得到不同的 IL 生成。

# jboss - Jboss AS 7 和类加载

> ID：13751931
> 
> 赞同：1
> 
> 时间：2012-12-06T20:25:43.580
> 
> 标签：jboss, resteasy

我正在使用 JBOSS AS 7.0.2 Final，并试图将 7.0.2 RESTEASY 2.2.1.GA 附带的 RESTEASY 版本升级到更新版本，例如 2.3.4.Final。我按照 JBOSS 提供的补丁中指示的说明进行操作，当我这样做时，在应用程序服务器启动时会抛出无法解析 module.xml 文件的错误。

我在 7.1.1 Final 上尝试了相同的程序，效果很好。

第一个问题是，任何人都知道如何在 7.0.2 中更新 RESTEASY（我的其他服务器都在使用这个，所以我真的不想重置我的其他服务器并用更新版本的 JBOSS 替换）

我希望升级 RESTEASY，希望这个错误可能已经在新版本中得到解决

我还尝试通过调整我的 POM 以使用版本 2.3.4.Final 并尝试了每个范围，但它总是无法使用较新的 jar 并坚持使用 JBOSS 提供的 jar。

> 15:14:09,947 严重 [org.jboss.resteasy.core.SynchronousDispatcher] (http--127.0.0.1-8443-6) 执行 POST /countermeasure/customQueryLite 失败：org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure：找不到MessageBodyWriter 响应对象类型：java.util.ArrayList 媒体类型：application/xml
> 
> > 在 org.jboss.resteasy.core.ServerResponse.writeTo(ServerResponse.java:216) [resteasy-jaxrs-2.2.1.GA.jar:]

它适用于 json、文本和单个 xml 对象，但不适用于 xml 的列表对象。

关于resteasy和jboss的这些问题的任何答案都会有所帮助。

# java - 在平铺的水平面上阻挡光线

> ID：13751937
> 
> 赞同：1
> 
> 时间：2012-12-06T20:26:22.603
> 
> 标签：java

我正在用 Java 制作平铺（平铺大小为 16 像素）级别的滚动游戏。现在我正在处理照明系统。我用这个代码为每个光（黄色块和瓷砖）计算了光梯度（如图所示）：

```
visMap = new int[level.getWidth() * level.getHeight()];

    int lighted = 0;

    for (int x = 0; x < level.getWidth(); x++) {
        for (int y = 0; y < level.getHeight(); y++) {
            double xd = (this.x >> 4) - x;
            double yd = (this.y >> 4) - y;

            double distance = Math.sqrt(xd * xd + yd * yd);

            double p = power * 1.0;
            double bright = p - distance;

            visMap[x + y * level.getWidth()] = (int) (bright * power);
        }
    } 
```

现在我正试图让方块以某种方式阻挡光线（就像在现实生活中一样）。有什么好的方法吗？提前致谢， Zaplik

图片：[点击](http://i.imgur.com/f0n5x.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:44:17.200

Spread light recursively. Decrease with each level of recursion the light intensity with the appropriated amount. Keep also track of the direction light is moving. Once you hit an obstacle, stop that branch of the recursion.

# ios - 取消引用指向指针的指针时，分支条件评估为垃圾值

> ID：13751940
> 
> 赞同：2
> 
> 时间：2012-12-06T20:26:24.493
> 
> 标签：ios, c, pointers

我正在尝试从 xcode 的分析器中清理一些问题。我还没有找到解决方案是“分支条件评估为垃圾值”。它以下列方式发生：

```
int methodToCloseMyDatabase(sqlite3 **myDatabase, const char *callingFunctionName)
{
    if (myDatabase)
    {
        if (*myDatabase)  // The warning is thrown here
        {
           // Do something
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:30:19.427

这个错误对我来说听起来好像 CLang 分析了您的代码并发现 *myDatabase 没有设置为任何内容。

甚至可能是分析器发现了一个未设置值的可能代码分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:44:12.173

你是怎么设置的`myDatabase`？您可能忘记正确初始化它，因此它指向内存中的任意位置。

# android - 在 Android PreferenceScreen 中验证电话号码

> ID：13751942
> 
> 赞同：1
> 
> 时间：2012-12-06T20:26:38.220
> 
> 标签：android, android-preferences

`PreferenceScreen`如果系统无法自动检测到它，我有一个用户可以输入设备的电话号码。我仍在学习 Android 的这一部分，但`PreferenceScreen`通过 Android SDK 本身提供的示例和一些教程，我设法理解了一些 s。

我想要的是用户只能在 null 或有效时保存电话号码，其中“有效”是指运行通用验证逻辑（即返回 true 或 false 的匿名方法，可以在**任何可能的**情况下重用*) 或更好，只是为了简化事情，`^(\+39)?3[0-9]{9}$`

现在我有以下 XML 片段

```
<EditTextPreference
    android:inputType="phone"
    android:key="@string/preference_phoneNo"
    android:selectAllOnFocus="true"
    android:singleLine="true"
    android:summary="@string/pref_phoneNumber_description"
    android:title="@string/pref_phoneNumber" /> 
```

并由 Eclipse`New Activity`向导提供以下代码：

```
private void setupSimplePreferencesScreen() {
    if (!isSimplePreferences(this)) {
        return;
    }

    addPreferencesFromResource(R.xml.pref_general);
    bindPreferenceSummaryToValue(findPreference(getString(R.string.preference_phoneNo)));

} 
```

`addPreferenceFromResource`应该加载 XML 节点并将首选项添加到屏幕，而*应该*`binPreferenceSummaryToValue`在首选项更新时更改描述文本。只是为了那些不喜欢 IDE 代码的人的完整性，第二种方法由 Eclipse 提供，它还在代码文件中提供了一个私有类，即

```
 /**
 * A preference value change listener that updates the preference's summary
 * to reflect its new value.
 */ 
```

## 在一般情况下，当我在首选项编辑器上单击“确定”时，在保存首选项之前我应该​​如何执行验证逻辑？验证逻辑放在哪里`PreferenceScreen`？

*我们不都是来学习的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:19:32.847

Android 有一个内置的帮助方法。

```
String phoneNumber = ...;
boolean valid = PhoneNumberUtils.isGlobalPhoneNumber(phoneNumber); 
```

对于通用的、可重用的方法，这里是[PhoneNumberUtils](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/telephony/java/android/telephony/PhoneNumberUtils.java)中该方法的实现，由 AOSP（Apache 许可）提供

```
 private static final Pattern GLOBAL_PHONE_NUMBER_PATTERN =
         Pattern.compile("[\\+]?[0-9.-]+");
 ...
 public static boolean isGlobalPhoneNumber(String phoneNumber) {
     if (TextUtils.isEmpty(phoneNumber)) {
         return false;
     }

     Matcher match = GLOBAL_PHONE_NUMBER_PATTERN.matcher(phoneNumber);
     return match.matches();
 } 
```

Validation should occur within a Preference.OnPreferenceChangeListener , in the onPreferenceChange method. Simply return false if you don't want the value to be saved.

Example snippet:

```
private static Preference.OnPreferenceChangeListener myListener =
    new Preference.OnPreferenceChangeListener() {
        @Override
        public boolean onPreferenceChange(Preference preference, Object value) {
            String stringValue = value.toString();
            if (preference instanceof PhoneNumberPreference) {
                return isGlobalPhoneNumber(value);
            }
        }
        ... 
```

As a note, since you're starting off with the Settings activity generated by the Eclipse wizard, this listener has already been built for you. You just need to edit it to include validation of the phone number (assuming that's what's being edited), and to return false if the number is invalid, so it won't be saved to preferences.

# composer-php - 他们为什么要像这样在 1 行中编写 composer.json？

> ID：13751943
> 
> 赞同：0
> 
> 时间：2012-12-06T20:26:58.237
> 
> 标签：composer-php

不确定我是否理解在这样的单行中使用正斜杠和反斜杠编写 .json 配置的意义？：

```
{"name":"zendframework\/zendservice-twitter","description":"OOP wrapper for the Twitter web service","type":"library","keywords":["zf2","twitter"],"homepage":"http:\/\/packages.zendframework.com\/","license":"BSD-3-Clause","autoload":{"psr-0":{"ZendService":"library\/"}},"repositories":[{"type":"composer","url":"http:\/\/packages.zendframework.com\/"}],"require":{"php":">=5.3.3","zendframework\/zend-http":">=2.0.0","zendframework\/zend-uri":">=2.0.0","zendframework\/zend-version":">=2.0.0"},"extra":{"branch-alias":{"dev-master":"2.0.x-dev"}},"version":"2.0.1","dist":{"url":"http:\/\/packages.zendframework.com\/composer\/ZendService_Twitter-2.0.1.zip","type":"zip"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:30:17.617

反斜杠`\`是转义字符，所以每次看到`\/`时，`/`都会被转义。

整个对象写在一行上这一事实很可能是生成 JSON 的任何东西的产物（我假设它不是手写的）。

# javascript - 谷歌分析 API 自定义变量

> ID：13751948
> 
> 赞同：0
> 
> 时间：2012-12-06T20:27:22.977
> 
> 标签：javascript, asp.net, google-analytics, google-api

我有一个用于 asp.net 应用程序的谷歌分析帐户，该应用程序根据 URL 中的 queryString 确定许多客户端之一。GA 页面的代码段位于母版页中，因此 GA 代码在所有客户端中都是一致的。

对于每个客户端（每个 queryString），通过 GA 门户获取一组基本分析的最有效流程是什么？

- -编辑 - -

临时，但从未完成，我想知道我是否可以在片段中设置一个变量 var1 ，该变量设置为识别客户端的 GA，然后根据用户的 var1 获得离散但相同的报告。所以 var[0] .. var[n-1] = 访问者，其中 n 是客户的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:58:29.823

您可以将唯一查询字符串（假设它是某种 uID）作为自定义变量推送到分析中。如果它是连续的，您可以为客户端分配范围（再一次，我只是在猜测您的设置是什么样的）。

或者，您可以使用 uID 作为键并将访问频率作为值。（这里是一些用于检查自定义 var 键值的原型代码[https://github.com/vly/js_ga_cvars](https://github.com/vly/js_ga_cvars)）

请记住，当您设置自定义变量时，您必须推送网页浏览或事件才能将其实际传递给 GA。

如果您有权访问 GA 通用 Beta 计划，您就有机会定义自定义指标（如果是数字数据）或维度，这将使聚合报告变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:54:20.900

如果客户是个人，谷歌服务条款不允许这样做。

> 您不会（也不会允许任何第三方）使用本服务来跟踪、收集或上传任何可识别个人身份的数据

[http://www.google.com/analytics/terms/us.html](http://www.google.com/analytics/terms/us.html)

# asp.net-mvc-3 - KnockoutJS 从选择屏幕获取编辑/添加屏幕

> ID：13751949
> 
> 赞同：0
> 
> 时间：2012-12-06T20:27:24.097
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-mapping-plugin

我刚刚开始学习 KnockoutJS，如果这个问题看起来很傻，请原谅我，但是使用 ASP MVC 3 框架如何从我的选择屏幕获取信息到我的添加/编辑视图中。

基本上，我使用 MVCScaffold 为我拥有的每个模型构建了一个基本控制器，其中包含索引、创建、编辑、_CreateEdit 和其他几个视图。这在使用模型时工作正常，因为控制器创建它们并将它们传递到我的视图中，但是现在我正在尝试使用 Knockout，所以我认为我不应该传递模型但是一旦在视图中使用 $get 来获取数据要显示在视图上的服务器。话虽如此，一旦我从我的选择视图进入我的编辑/添加屏幕，我如何知道使用 $get 函数获取什么记录。我还应该将一些信息传递给模型吗？似乎必须有比这更好的方法。我只是不确定最佳实践。

我还有一个添加和编辑屏幕，但都使用 _CreateEdit 的部分视图，所以如果我在创建或编辑视图中创建我的视图模型，我该如何访问它或将其传递给我的部分视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:50:29.650

取决于，您是否尝试使用[`Razor`](http://en.wikipedia.org/wiki/Microsoft_ASP.NET_Razor_view_engine)with `Knockout`？如果是这样，那么您处于混合情况，其中一些东西可能来自`Razor`- 模型，而另一些可能来自 ajax 调用。

我猜你的`$get`应该是 [`$.get()`](http://api.jquery.com/jQuery.get/)我们称之为[`Ajax`](http://en.wikipedia.org/wiki/Ajax_%28programming%29)电话

另一方面，如果您想要更纯净`Knockout`，那么您可能会使用 a[`WebAPI Controller`](http://www.asp.net/web-api)代替。

如果您想从您的 mvc`Controller`中返回一个`Knockout`易于阅读的模型，请执行以下操作：

```
if (this.Request.IsAjaxRequest()) return Json(model,JsonRequestBehavior.AllowGet); 
```

# casperjs - casper 未能通过 args 来填充方法

> ID：13751951
> 
> 赞同：0
> 
> 时间：2012-12-06T20:27:38.150
> 
> 标签：casperjs

```
 keyword = 'Hotels';

casper.thenOpen('domain.com', function() {
  // search for ...
    this.fill('form[action="/query"]', { q: 'pizza' }, true);
 }); 
```

这里如何传递 'keyword' 变量而不是 'pizza' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:52:13.377

你试过`{ q: keyword }`吗？

# session - wget 无法使用动态会话 ID 下载

> ID：13751952
> 
> 赞同：0
> 
> 时间：2012-12-06T20:27:39.540
> 
> 标签：session, session-cookies, wget

我一直在使用 Wget 使用以下命令从我的网站上提取保修信息。

```
wget -q -O getinfo.tmp "http://www-307.ibm.com/pc/support/site.wss/warrantyLookup.do?type=$TYPE&serial=$SERIAL&country=897&iws=off" 
```

现在 IBM 更改了 URL 并提供了动态会话 ID

不久前，当 IBM 更改站点以使用动态会话 ID 时，新 URL`http://www-947.ibm.com/support/entry/portal/wlup` 停止工作。我希望能够再次做到这一点。

您可以使用您的机器类型和序列号来获取信息，或者我可以提供示例数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:31:42.140

我怀疑这会奏效

--keep-session-cookies

但它可能。

快速查看站点，您必须执行更复杂的操作，包括抓取站点并查找动态 URL。但是，如果 IBM 试图阻止此表单的自动化，也许您应该考虑不自动访问此表单。

# java - DnD - 为什么拖动的标签显示在其他组件下方？

> ID：13751954
> 
> 赞同：1
> 
> 时间：2012-12-06T20:27:47.083
> 
> 标签：java, swing, drag, drag-and-drop

我编写了一个基本的 DnD 程序，它连续有四个 JLabel。我注意到当我向左拖动标签时，它会显示在下一个标签下方。但是，当我将标签向右拖动时，它会显示在下一个标签的上方。标签按从左到右的顺序添加。因此，拖动的标签显示在拖动标签之前添加的其他标签下方，并显示在拖动标签之后添加的其他标签上方。谁能解释为什么会这样？任何人都可以提供修复以使拖动的标签显示在其他标签上方吗？谢谢。

源代码：

```
public class LabelDnd extends JPanel {

    private JLabel[] labels;
    private Color[] colors = { Color.BLUE, Color.BLACK, Color.RED, Color.MAGENTA };

    public LabelDnd() {
        super();
        this.setLayout(new FlowLayout(FlowLayout.CENTER, 0, 0));
        this.setBackground(Color.WHITE);
        this.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));

        JPanel basePanel = new JPanel();
        basePanel.setLayout(new GridLayout(1, 4, 4, 4));
        basePanel.setBackground(Color.CYAN);

        MouseAdapter listener = new MouseAdapter() {

            Point p = null;

            @Override
            public void mousePressed(MouseEvent e) {
              p = e.getLocationOnScreen();
            }

            @Override
            public void mouseDragged(MouseEvent e) {
              JComponent c = (JComponent) e.getSource();
              Point l = c.getLocation();
              Point here = e.getLocationOnScreen();
              c.setLocation(l.x + here.x - p.x, l.y + here.y - p.y);
              p = here;
            }
          };

        this.labels = new JLabel[4];

        for (int i = 0; i < this.labels.length; i++) {
            this.labels[i] = new JLabel(String.valueOf(i), JLabel.CENTER);
            this.labels[i].setOpaque(true);
            this.labels[i].setPreferredSize(new Dimension(100, 100));
            this.labels[i].setBackground(this.colors[i]);
            this.labels[i].setForeground(Color.WHITE);
            this.labels[i].addMouseListener(listener);
            this.labels[i].addMouseMotionListener(listener);
            basePanel.add(this.labels[i]);
        }

        this.add(basePanel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame("LabelDnd");
                frame.getContentPane().setLayout(new BorderLayout());

                LabelDnd panel = new LabelDnd();

                frame.getContentPane().add(panel, BorderLayout.CENTER);

                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:31:28.710

您不会更改在代码中添加或绘制标签的顺序。考虑在拖动时将 JLabel 提升到玻璃窗格（在将其从主容器中移除之后），然后在释放鼠标时将其重新添加到主容器中。

例如：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.event.*;
import java.util.Comparator;
import java.util.PriorityQueue;

import javax.swing.*;

@SuppressWarnings("serial")
public class LabelDnd extends JPanel {
   private static final String X_POS = "x position";
   private JLabel[] labels;
   private Color[] colors = { Color.BLUE, Color.BLACK, Color.RED, Color.MAGENTA };

   public LabelDnd() {
      super();
      // this.setLayout(new FlowLayout(FlowLayout.CENTER, 0, 0));
      this.setBackground(Color.WHITE);
      this.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));

      JPanel basePanel = new JPanel();
      basePanel.setLayout(new GridLayout(1, 4, 4, 4));
      basePanel.setBackground(Color.CYAN);

      MouseAdapter listener = new MouseAdapter() {
         Point loc = null;
         Container parentContainer = null;
         Container glasspane = null;
         JLabel placeHolder = new JLabel("");
         private Point glassLocOnScn;

         @Override
         public void mousePressed(MouseEvent e) {
            JComponent selectedLabel = (JComponent) e.getSource();

            loc = e.getPoint();
            Point currLocOnScn = e.getLocationOnScreen();

            parentContainer = selectedLabel.getParent();

            JRootPane rootPane = SwingUtilities.getRootPane(selectedLabel);
            glasspane = (Container) rootPane.getGlassPane();
            glasspane.setVisible(true);
            glasspane.setLayout(null);
            glassLocOnScn = glasspane.getLocationOnScreen();

            Component[] comps = parentContainer.getComponents();

            // remove all labels from parent
            parentContainer.removeAll();

            // add labels back except for selected one
            for (Component comp : comps) {
               if (comp != selectedLabel) {
                  parentContainer.add(comp);
               } else {
                  // add placeholder in place of selected component
                  parentContainer.add(placeHolder);
               }
            }

            selectedLabel.setLocation(currLocOnScn.x - loc.x - glassLocOnScn.x,
                  currLocOnScn.y - loc.y - glassLocOnScn.y);
            glasspane.add(selectedLabel);
            glasspane.setVisible(true);

            parentContainer.revalidate();
            parentContainer.repaint();

         }

         @Override
         public void mouseDragged(MouseEvent e) {
            JComponent selectedLabel = (JComponent) e.getSource();

            glassLocOnScn = glasspane.getLocationOnScreen();
            Point currLocOnScn = e.getLocationOnScreen();
            selectedLabel.setLocation(currLocOnScn.x - loc.x - glassLocOnScn.x,
                  currLocOnScn.y - loc.y - glassLocOnScn.y);

            glasspane.repaint();
         }

         @Override
         public void mouseReleased(MouseEvent e) {
            JComponent selectedLabel = (JComponent) e.getSource();

            if (parentContainer == null || glasspane == null) {
               return;
            }

            // sort the labels based on their x position on screen
            PriorityQueue<JComponent> compQueue = new PriorityQueue<JComponent>(
                  4, new Comparator<JComponent>() {

                     @Override
                     public int compare(JComponent o1, JComponent o2) {
                        // sort of a kludge -- checking a client property that
                        // holds the x-position 
                        Integer i1 = (Integer) o1.getClientProperty(X_POS);
                        Integer i2 = (Integer) o2.getClientProperty(X_POS);
                        return i1.compareTo(i2);
                     }
                  });

            // sort of a kludge -- putting x position before removing component
            // into a client property to associate it with the JLabel
            selectedLabel.putClientProperty(X_POS, selectedLabel.getLocationOnScreen().x);
            glasspane.remove(selectedLabel);
            compQueue.add(selectedLabel);
            Component[] comps = parentContainer.getComponents();
            for (Component comp : comps) {
               JLabel label = (JLabel) comp;
               if (!label.getText().trim().isEmpty()) { // if placeholder!
                  label.putClientProperty(X_POS, label.getLocationOnScreen().x);
                  compQueue.add(label); // add to queue
               }
            }
            parentContainer.removeAll();

            // add back labels sorted by x-position on screen
            while (compQueue.size() > 0) {
               parentContainer.add(compQueue.remove());
            }

            parentContainer.revalidate();
            parentContainer.repaint();
            glasspane.repaint();

         }
      };

      this.labels = new JLabel[4];

      for (int i = 0; i < this.labels.length; i++) {
         this.labels[i] = new JLabel(String.valueOf(i), JLabel.CENTER);
         this.labels[i].setOpaque(true);
         this.labels[i].setPreferredSize(new Dimension(100, 100));
         this.labels[i].setBackground(this.colors[i]);
         this.labels[i].setForeground(Color.WHITE);
         this.labels[i].addMouseListener(listener);
         this.labels[i].addMouseMotionListener(listener);
         basePanel.add(this.labels[i]);
      }

      this.add(basePanel);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            JFrame frame = new JFrame("LabelDnd");
            frame.getContentPane().setLayout(new BorderLayout());

            LabelDnd panel = new LabelDnd();

            frame.getContentPane().add(panel, BorderLayout.CENTER);

            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:32:32.843

因为`z-index`你的 Swing 组件。您应该在拖动后使用`setComponentZOrder`来更改组件的值。`z-index`

请检查[此](http://tips4java.wordpress.com/2009/07/26/overlap-layout/)链接以获取更多详细信息

# java - 测试是 SessionFactory 是有效的

> ID：13751956
> 
> 赞同：2
> 
> 时间：2012-12-06T20:27:53.260
> 
> 标签：java, hibernate, testing, tdd

我试图通过以下方式测试 SessionFactory 是否有效：

```
assertFalse(sessionFactory.isClosed()); 
```

但即使底层数据源无法获得连接，我的测试也会通过：

```
java.sql.SQLException: Connections could not be acquired from the underlying database! 
```

如何测试 SessionFactory 是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:35:13.130

似乎您真的想测试您是否具有有效的数据库连接。`SessionFactory`只是一个包装器，一旦配置好，只要底层没问题，它就可以工作`DataSource`。

那么如何测试`DataSource`呢？首先，各种连接池允许您定义所谓的*测试查询*。通常`"SELECT 1"`. 如果您的数据库连接池没有公开这样的功能，只需从池中选择任何连接并运行类似的查询。

# 也可以看看

*   [Spring-JPA EntityManager 如何处理“断开”的连接？](https://stackoverflow.com/questions/9481644)
*   [如何从休眠会话中获取 jdbc 连接？](https://stackoverflow.com/questions/9482731)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:04:39.087

[这是@Tomasz Nurkievicz](https://stackoverflow.com/users/605744/tomasz-nurkiewicz)回答后我的测试代码的样子：

```
@Test(description = "Test we can get the connection factory")
public void getApplicationSessionFactory() {
    SessionFactory sessionFactory = null;
    Session session = null;
    try {
        sessionFactory = createSessionFactory();
        session = sessionFactory.getCurrentSession();
        session.beginTransaction();
        session.doWork(new Work() {
        public void execute(Connection connection) throws SQLException {
            assertFalse(connection.isClosed());
        }
        });
    } finally {
        if ( session != null ) {
            session.close();
        }
        if (sessionFactory != null) {
            sessionFactory.close();
        }
    }
} 
```

# php - 发出包含发布数据和文件上传的 http 多部分请求

> ID：13751958
> 
> 赞同：2
> 
> 时间：2012-12-06T20:28:02.793
> 
> 标签：php, file-upload, http-post, multipartform-data

我正在尝试向具有发布数据和文件上传的 php 文件发送发布请求，这是我发送的内容、设置标头的代码、我拥有的 php 文件以及我得到的内容从php文件返回：（[图像文件内容]是我发送的图像文件的二进制数据的占位符）

我的问题是 $_POST 和 $_FILES 都没有显示空数组。我试图弄清楚如何解决这个问题。

//我发送到服务器的数据：

```
- 边界
内容配置：发布；名称='param1'

价值1
- 边界
内容配置：发布；名称='field2'

价值2
- 边界
内容配置：发布；名称='field3'

价值3
- 边界
内容处置：表单数据；名称='文件'; 文件名='app/native/assets/sampleFile.jpg'
内容类型：图片/jpg
内容传输编码：二进制

[图片文件内容]
- 边界 - 

-------------------------------------------------- ---

```

对于我的标题，我有：

```
request.setRawHeader("Content-Type", "mulipart/form-data, boundary=boundary");
//data holds the string above
request.setRawHeader("Content-Length", QString::number(data.length()).toAscii()); 
```

* * *

.php 文件：

```
<?php
  echo "\npost:\n\n";
  print_r($_POST);

  echo "\nfiles:\n\n";
  print_r($_FILES);
?> 
```

* * *

php文件的结果：

```
邮政：

大批
(
)

文件：

大批
(
)

```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:41:02.730

尝试类似的东西

```
- 边界
内容处置：表单数据；名称="参数1"

价值1
- 边界
内容处置：表单数据；名称=“字段2”

价值2
- 边界
内容处置：表单数据；名称=“字段3”

价值3
- 边界
内容处置：表单数据；名称=“文件”；文件名="app/native/assets/sampleFile.jpg"
内容类型：图片/jpg
内容传输编码：二进制

[图片文件内容]
- 边界 - 

```

```
request.setRawHeader("Content-Type", "multipart/form-data; boundary=boundary"); 
```

# r - 错误：L-BFGS-B 需要有限的“fn”值

> ID：13751960
> 
> 赞同：5
> 
> 时间：2012-12-06T20:28:10.530
> 
> 标签：r, analysis, correlation, r-factor

我有一个相关矩阵，当我尝试使用“factanal”函数对其进行最大似然因子分析时，出现以下错误：

```
factanal(covmat=matches_adjusted, factors=5, rotation=none, na.omit(matches_adjusted))
Warning in log(e) : NaNs produced
Error in optim(start, FAfn, FAgr, method = "L-BFGS-B", lower = lower,  : 
L-BFGS-B needs finite values of 'fn' 
```

这可能是什么原因造成的？

# r - 多维绑定

> ID：13751961
> 
> 赞同：1
> 
> 时间：2012-12-06T20:28:21.803
> 
> 标签：r, multidimensional-array

用于处理二维矩阵，`rbind`并且`cbind`是有用的函数。是否有更通用的函数可以在更多维度上执行相同的操作？假设我有这样的数据：

```
data <- lapply(c(11,22,33), function(i) matrix(i, nrow=2, ncol=4)) 
```

我想得到的是：

```
data <- do.call(c, data)
dim(data) <- c(2, 4, 3) 
```

但不必自己计算所有尺寸。

**是否有提供此功能的功能，无论是内置的还是作为合理通用包的一部分？**或者你想分享你自己关于如何最优雅地实现这样一个功能的想法？

奖励积分：

*   如果该函数对维度的顺序进行了一些控制，则`aperm`可以避免后续调用。
*   如果它可以通过传递多个函数参数或一个参数来操作，那就太好*了*，*尽管*使用`list`or `do.call`，`list`任何一个都足够了。
*   我想使用这样的函数作为[foreach](http://cran.r-project.org/web/packages/foreach/index.html)调用的`.combine`参数。所以它应该能够使用以下形式的调用来构造多维矩阵（每个调用恰好有两个参数，第一个通常是前一次调用的结果）甚至（超过两个参数，第一个仍然可能是之前的调用），具有相同的大小，导致矩阵的维度比这些维度高 1，并且该维度的大小为 4，对应于 4 个元素。`f(f(f(a, b), c), d)``f(f(a, b), c, d)``a, b, c, d``a``d`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:50:49.403

abind包[正好](http://cran.r-project.org/web/packages/abind/index.html)有这个功能，你提到的大部分功能都具备，虽然我没有详细检查所有这些功能。

至少，它会让您开始了解如何按照这些思路实现某些东西。

# r - 如何绘制一个大的 ctree() 以避免重叠节点

> ID：13751962
> 
> 赞同：26
> 
> 时间：2012-12-06T20:28:22.653
> 
> 标签：r, output, decision-tree

`ctree()`当我从包中绘制决策树结果时`party`，字体太大，框也太大。它们与其他节点重叠。

有没有办法自定义输出，`plot()`使盒子和字体更小？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-08T17:20:50.193

简短的回答似乎是，不，您不能更改字体大小，但还有一些不错的其他选择。

我知道三种可能的解决方案。首先，您可以更改绘图中的其他参数以使其更紧凑。其次，您可以将其写入图形文件并查看该文件。第三，您可以在 partykit 包中使用 ctree() 的替代实现，它是一些相同作者的较新包。

## 默认绘图示例

```
library(party)
airq <- subset(airquality, !is.na(Ozone))
airct <- ctree(Ozone ~ ., data = airq, 
               controls = ctree_control(maxsurrogate = 3))
plot(airct)  #default plot, some crowding with N hidden on leafs 
```

![默认图](../Images/b4e70d05ac82d29b02d3c751e6ecb154.png)

## 简化图

```
# simpler version of plot
plot(airct, type="simple",           # no terminal plots
  inner_panel=node_inner(airct,
       abbreviate = TRUE,            # short variable names
       pval = FALSE,                 # no p-values
       id = FALSE),                  # no id of node
  terminal_panel=node_terminal(airct, 
       abbreviate = TRUE,
       digits = 1,                   # few digits on numbers
       fill = c("white"),            # make box white not grey
       id = FALSE)
   ) 
```

![在此处输入图像描述](../Images/762c5be41e94c2da29539e8308cfe5a3.png)

这要好一些，也许可以进一步改进。为了弄清楚这些细节，我最初做`class(airct)`了返回“BinaryTree”。有了这些信息，我开始阅读`?plot.BinaryTree`

## 写入文件

第二种简单的解决方案是将绘图写入文件，然后查看该文件。您可能需要使用设置来找到最合适的设置。

```
png("airct.png", res=80, height=800, width=1600) 
   plot(airct) 
dev.off() 
```

## 改为使用partykit 包进行绘图

最后，您可以使用一些相同作者对派对包的更新且尚未完成的重新实现。在这一点上（2012 年 12 月），他们重新完成的唯一功能是`ctree()`. 此版本允许您更改字体大小。

```
 library(partykit) 
    airct <- ctree(Ozone ~ ., data = airq)
    class(airct)  # different class from before
    # "constparty" "party"  
plot(airct, gp = gpar(fontsize = 6),     # font size changed to 6
  inner_panel=node_inner,
  ip_args=list(
       abbreviate = TRUE, 
       id = FALSE)
  ) 
```

![在此处输入图像描述](../Images/cdbc3bac2091563bcbc8805f6ce01c90.png)

在这里，我将叶子保留在默认设置中，因为坦率地说，我从来没有弄清楚如何让它以我想要的方式工作。我怀疑这与包裹不完整（截至 2012 年 12 月）有关。您可以阅读有关绘图方法的信息`?plot.party`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-05T00:21:50.030

另一种选择（这不会改变你想要的，但可能会解决潜在的问题）是改变图形本身的大小，正如我在课堂上学到的那样。

替换下面的 r：

```
{r} 
```

和：

```
{r, fig.width=X, fig.height=Y} 
```

X 和 Y 需要替换为您选择的数字，具体取决于您认为哪种尺寸效果更好。

[该网站](https://sebastiansauer.github.io/figure_sizing_knitr/)在整个文档中更详细且普遍地讨论了这样做。

# web-applications - iOS 上的缩放画布似乎使 Mobile Safari 崩溃

> ID：13751964
> 
> 赞同：4
> 
> 时间：2012-12-06T20:28:28.520
> 
> 标签：web-applications, mobile-safari, html5-canvas, css-transforms

我遇到了一个问题，似乎缩放画布会导致移动 Safari 崩溃。崩溃日志表明内存不足，但除此之外似乎没有多大帮助。

要重现问题，请尽可能使用捏缩放手势放大，然后移开手指。等待新画布加载。使用捏缩放手势缩小画布，然后按住手指直到画布完成平铺。在 iPad 3 上，当您按住手指时，这似乎会崩溃.

在 iPad 1 上，如果设置 this.numPages = 2、this.numCanvases = 2、this.zoomFactor = 2.5，它似乎仍然会发生。

我已经使用各种 Android 平板电脑进行了测试，但我无法重现崩溃，所以它似乎是特定于 iOS 的。在画布上绘制图像和其他东西的完整代码中，我可以用更少的画布重现这个问题。

以前有没有人遇到过这个问题，如果有，有什么解决方法吗？我可能对捏缩放代码做错了吗？

这是 javascript 的精简版：

```
(function(exports) {
"use strict";

var ReaderControl = function() {
    this.numPages = 2;
    this.numCanvases = 8;
    this.zoomFactor = 5.2;

    this.pageWidth = 479.86;
    this.pageHeight = 621;

    this.isPinching = false;
    this.distRatio = 1;
    this.oldScale = 1;
    this.newScale = 1;
    this.oldPinchCenter = {};

    this.bindEvents();
    this.c = this.createPageWrapper();
    $('body').append(this.c.$e);
};

ReaderControl.prototype = {

    bindEvents: function() {
        this.currentPageZoom = parseFloat(document.documentElement.clientHeight) / this.pageHeight;
        this.currentPageMinZoom = this.currentPageZoom;
        this.currentPageMaxZoom = (800 * 800 * this.zoomFactor) / (this.pageWidth * this.pageHeight * window.devicePixelRatio);

        var tbind = function(func, context) {
            return function() {
                func.apply(context, Array.prototype.slice.call(arguments));
            };
        };

        $(document).bind('touchstart', tbind(this.onTouchStart, this));
        $(document).bind('touchmove', tbind(this.onTouchMove, this));  
        $(document).bind('touchend', tbind(this.onTouchEnd, this));

        document.ontouchmove = function(e) { 
            e.preventDefault();
        };
    },

    createCanvas: function (width, height) {
        var canvas = document.createElement('canvas');

        var cWidth = width * window.devicePixelRatio;
        var cHeight = height * window.devicePixelRatio;
        canvas.setAttribute('width', cWidth);
        canvas.setAttribute('height', cHeight);

        $(canvas).css('width', width);
        $(canvas).css('height', height);                

        var ctx = canvas.getContext("2d");
        ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        ctx.fillStyle = 'pink';
        ctx.fillRect(0, 0, width, height);
        return canvas;
    },

    createPageWrapper: function() {
        var $wrapper = $("<div></div>");

        var scWidth = this.pageWidth * this.currentPageZoom;
        var scHeight = this.pageHeight * this.currentPageZoom;

        var origWidth = scWidth;
        var origHeight = scHeight;

        var totalWidth = origWidth * this.numPages;
        var maxHeight = origHeight;

        for (var pageNum = 0; pageNum < this.numPages; pageNum++){
            for (var j = 0; j < this.numCanvases; j++) {
                var canvas = this.createCanvas(scWidth, scHeight / this.numCanvases);
                var ctx = canvas.getContext("2d");

                if (pageNum % 2 === 0) {
                    ctx.fillStyle = 'blue';
                    ctx.fillRect(0, 0, scWidth, scHeight);
                }

                $wrapper.append($(canvas));
            }
        }

        $wrapper.css("width", totalWidth + "px");
        $wrapper.css("height", maxHeight + "px");

        var left = (exports.innerWidth - totalWidth) / 2;
        var top = (exports.innerHeight - maxHeight) / 2;

        this.transform($wrapper, left, top);
        return {$e:$wrapper, tX: left, tY: top};
    },

    onTouchStart: function(evt) { 
        if (evt.originalEvent.touches.length > 1) {
            this.isPinching = true;

            var touch0 = evt.originalEvent.touches[0];
            var touch1 = evt.originalEvent.touches[1];

            var x1 = touch1.clientX;
            var y1 = touch1.clientY;
            var x0 = touch0.clientX;
            var y0 = touch0.clientY;

            this.oldPinchCenter.x = (x0 + x1) / 2;
            this.oldPinchCenter.y = (y0 + y1) / 2;            

            this.oldDist = Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));
        }
    },

    transform: function($e, x, y, scale) {
        scale = scale || 1;

        $e.css('-webkit-transform', 'translate3d(' + x + 'px,' + y + 'px, 0) scale(' + scale + ')');
    },

    onTouchMove: function(evt) {
        var width = this.c.$e.width();
        var height = this.c.$e.height();

        if (evt.originalEvent.touches.length > 1) {
            var touch0 = evt.originalEvent.touches[0];
            var touch1 = evt.originalEvent.touches[1];

            var x1 = touch1.clientX;
            var y1 = touch1.clientY;
            var x0 = touch0.clientX;
            var y0 = touch0.clientY;

            this.newDist = Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));
            this.distRatio = this.newDist / this.oldDist;

            var newPinchCenter = {
                x: (x0 + x1) / 2,
                y: (y0 + y1) / 2
            };

            this.newScale = this.distRatio * this.oldScale;

            var actualZoom = this.newScale * this.currentPageZoom;
            if (actualZoom > this.currentPageMaxZoom) {
                this.newScale = this.currentPageMaxZoom / parseFloat(this.currentPageZoom);
            }

            var pcMidX = this.c.tX + width / 2;
            var pcMidY = this.c.tY + height / 2;

            var pcCenter = {
                x: pcMidX, 
                y: pcMidY
            };

            var scX = pcCenter.x - (this.newScale / this.oldScale) * (pcCenter.x - this.oldPinchCenter.x);
            var scY = pcCenter.y - (this.newScale / this.oldScale) * (pcCenter.y - this.oldPinchCenter.y);

            var scaledOldPinchCenter = {
                x: scX, 
                y: scY
            };

            var offsetX = newPinchCenter.x - scaledOldPinchCenter.x;
            var offsetY = newPinchCenter.y - scaledOldPinchCenter.y;
            this.c.tX = this.c.tX + offsetX;
            this.c.tY = this.c.tY + offsetY;

            this.transform(this.c.$e, this.c.tX, this.c.tY, this.newScale);

            this.oldScale = this.newScale;
            this.oldDist = this.newDist;
            this.oldPinchCenter.x = newPinchCenter.x;
            this.oldPinchCenter.y = newPinchCenter.y;
        }
    },

    onTouchEnd: function(evt) {
        if (evt.originalEvent.touches.length === 0) {
            var newPageZoom = this.newScale * this.currentPageZoom;

            if (newPageZoom < this.currentPageMinZoom) {
                newPageZoom = this.currentPageMinZoom;
                this.newScale = newPageZoom / parseFloat(this.currentPageZoom);
                this.oldScale = this.newScale;
            }

            this.c.tX = 31.37;
            this.c.tY = 0;
            this.transform(this.c.$e, this.c.tX, this.c.tY);

            if (this.isPinching) {
                var zoomedIn = newPageZoom > this.currentPageMinZoom;
                var goingToMinZoom = (newPageZoom === this.currentPageMinZoom) && (this.currentPageZoom !== this.currentPageMinZoom);
                var shouldZoom = newPageZoom !== this.currentPageZoom && (goingToMinZoom || zoomedIn);

                if (shouldZoom) {
                    this.currentPageZoom = newPageZoom;

                    this.invisC && this.invisC.$e.remove();
                    this.invisC = this.createPageWrapper();
                    $('body').append(this.invisC.$e);
                    this.c.$e.remove();

                    this.c = this.invisC;
                    this.invisC = null;

                    this.newScale = 1;
                    this.oldScale = 1;
                } 
            }

            this.isPinching = false;
        }
    }
};

exports.ReaderControl = ReaderControl;
})(window);

$(function(){
    window.readerControl = new ReaderControl();
}); 
```

这是 HTML 文件：

```
<html>
<head>
    <title>Canvas Crash Test</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="test.js"></script>
</head>

<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-31T22:37:55.723

多年后，我找到了解决方法...

如果您使用非标准 CSS [“缩放”属性](https://developer.mozilla.org/en-US/docs/Web/CSS/zoom)代替，`transform: scale`那么这不会导致崩溃。

transform-origin 似乎没有等效项，因此您需要调整定位计算。但除此之外，它似乎工作得很好！

# c# - 为什么是列表 .Enumerator 比我的实现快吗？

> ID：13751967
> 
> 赞同：16
> 
> 时间：2012-12-06T20:28:37.400
> 
> 标签：c#, .net

由于各种巨大的性能优势（在我的情况下），我发现自己必须推出自己的动态数组实现。然而，在为我的版本创建了一个枚举器，并将效率与 List 使用的一个进行比较之后，我有点困惑；List one 比我的版本快大约 30-40%，尽管它要复杂得多。

这是 List 枚举器实现的重要部分：

```
public struct Enumerator : IEnumerator<T>, IDisposable, IEnumerator
{
    private List<T> list;
    private int index;
    private int version;
    private T current;
    internal Enumerator(List<T> list)
    {
        this.list = list;
        this.index = 0;
        this.version = list._version;
        this.current = default(T);
        return;
    }

    public bool MoveNext()
    {
        List<T> list;
        list = this.list;
        if (this.version != list._version)
        {
            goto Label_004A;
        }
        if (this.index >= list._size)
        {
            goto Label_004A;
        }
        this.current = list._items[this.index];
        this.index += 1;
        return 1;
        Label_004A:
        return this.MoveNextRare();
    }

    public T Current
    {
        get {  return this.current; }
    }
} 
```

这是我的准系统版本：

```
internal struct DynamicArrayEnumerator<T> : IEnumerator<T> where T : class
{
     private readonly T[] internalArray;
     private readonly int lastIndex;
     private int currentIndex;

     internal DynamicArrayEnumerator(DynamicArray<T> dynamicArray)
     {
          internalArray = dynamicArray.internalArray;
          lastIndex = internalArray.Length - 1;
          currentIndex = -1;
     }

     public T Current
     {
          get { return internalArray[currentIndex]; }
     }

     public bool MoveNext()
     {
          return (++currentIndex <= lastIndex);
     }
} 
```

我知道这是微优化，但我实际上很想了解为什么 List 枚举器比我的快得多。有任何想法吗？谢谢！

编辑：根据要求；DynamicArray 类（相关部分）：枚举器是 this 中的一个内部类。

```
public struct DynamicArray<T> : IEnumerable<T> where T : class
{
    private T[] internalArray;
    private int itemCount;

    internal T[] Data
    {
        get { return internalArray; }
    }

    public int Count
    {
        get { return itemCount; }
    }

    public DynamicArray(int count)
    {
        this.internalArray = new T[count];
        this.itemCount = 0;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return new DynamicArrayEnumerator<T>(this);
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }

} 
```

至于我如何测试：

```
 List<BaseClass> list = new List<BaseClass>(1000000);
 DynamicArray<BaseClass> dynamicArray = new DynamicArray<BaseClass>(1000000);

// Code for filling with data omitted.

   int numberOfRuns = 0;
   float p1Total = 0;
   float p2Total = 0;
   while (numberOfRuns < 100)
   {
        PerformanceAnalyzer p1 = new PerformanceAnalyzer(() =>
        {
             int u = 0;
             foreach (BaseClass b in list)
             {
                  if (b.B > 100)   // Some trivial task
                      u++;
             }
        });
        p1.ExecuteAndClock();
        p1Total += p1.TotalElapsedTicks;

        PerformanceAnalyzer p2 = new PerformanceAnalyzer(() =>
        {
             int u = 0;
             foreach (BaseClass b in dynamicArray)
             {
                  if (b.B > 100)  // Some trivial task
                       u++;
             }
        });
        p2.ExecuteAndClock();
        p2Total += p2.TotalElapsedTicks;

        numberOfRuns++;
    }

    Console.WriteLine("List enumeration: " + p1Total / totalRuns + "\n");
    Console.WriteLine("Dynamic array enumeration: " + p2Total / totalRuns + "\n"); 
```

PerformanceAnalyzer 类基本上启动一个秒表，执行提供的动作委托，然后停止秒表。

编辑 2（对 Ryan Gates 的快速回答）：我想自己动手有几个原因，最重要的是我需要一个非常快速的 RemoveAt(int index) 方法。

由于在我的特定情况下我不必担心列表元素的顺序，我可以避免 .Net 内置列表的执行方式：

```
public void RemoveAt(int index)
{
    T local;
    if (index < this._size)
    {
        goto Label_000E;
    }
    ThrowHelper.ThrowArgumentOutOfRangeException();
Label_000E:
    this._size -= 1;
    if (index >= this._size)
    {
        goto Label_0042;
    }
    Array.Copy(this._items, index + 1, this._items, index, this._size - index);
Label_0042:
    this._items[this._size] = default(T);
    this._version += 1;
    return;
} 
```

而是使用以下内容：

```
public void RemoveAt(int index)
{
     // overwrites the element at the specified index with the last element in the array and decreases the item count.
     internalArray[index] = internalArray[itemCount];  
     itemCount--;
} 
```

就我而言，如果说必须通过索引删除长列表中的前 1000 个元素，则可能会节省大量时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T20:56:29.450

好的，除了基准测试问题，您可以通过以下方式使您的`DynamicArray`课程更像`List<T>`：

```
public DynamicArrayEnumerator<T> GetEnumerator()
{
    return new DynamicArrayEnumerator<T>(this);
}

IEnumerator<T> IEnumerable<T>.GetEnumerator()
{
    return GetEnumerator();
}

IEnumerator IEnumerable.GetEnumerator()
{
    return this.GetEnumerator();
} 
```

现在，*知道*它正在使用动态数组的代码可以在`DynamicArrayEnumerator<T>` *没有任何装箱和虚拟调度*的情况下使用 a 进行迭代。这正是这样`List<T>`做的。当一个类型以自定义方式实现*模式*时，编译器会注意到，并将使用所涉及的类型而不是接口。

使用您*当前*的代码，您不会从创建`struct`- 中获得任何好处，因为您将它装箱在`GetEnumerator()`.

尝试上述更改*并*修复基准以延长工作时间。我希望看到很大的不同。

# .net - 如何对 AjaxControlToolkit.dll 进行源代码更改？

> ID：13751968
> 
> 赞同：1
> 
> 时间：2012-12-06T20:28:46.053
> 
> 标签：.net, ajax, dll

我想在 ajaxcontroltoolkit 中更改 ModalPopupBehavior.js 的源代码。有人可以帮我完成这个吗？

1.  如何从 dll 中提取 .js 文件？
2.  修改完成后，如何重新打包dll？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:36:10.397

您可以从以下网址下载 AjaxControlToolkit 项目的源代码

[AjaxControlToolkit](http://ajaxcontroltoolkit.codeplex.com)页面

修改源代码，然后在 MS Visual Studio 中重建程序集

# hibernate - 子类的休眠映射表

> ID：13751988
> 
> 赞同：2
> 
> 时间：2012-12-06T20:30:29.273
> 
> 标签：hibernate, mapping

我有 3 节课：

```
Person {
    int id;
    String name;
    String lastName;
}

Employee extends Person {
    //some additional data
}

Owner extends Person {
    //some additional data
} 
```

对于每个班级，我都有单独的表格。表中的键应与`Employee`表中的键完全相同`Person`。

现在，当我插入类时，表中`Employee`应该有一条记录，一条记录相同（假设这是值 1）。`Person``Employee``ID`

之后我想插入 Owner 类并且我希望它是同一个 Person (ID=1) 所以在插入 Owner 之后应该在表 Owner 中只添加一条记录，但表 Person 中的记录应该保持原样。

我试过这个：http: [//viralpatel.net/blogs/hibernate-inheritance-table-per-subclass-annotation-xml-mapping/](http://viralpatel.net/blogs/hibernate-inheritance-table-per-subclass-annotation-xml-mapping/)

插入第一个类是可以的，插入具有不同 ID 的第二个是可以的，从 db 获取对象是可以的，但是我想添加具有相同 ID 的 Owner 类，例如我得到 hibernateException 的现有人......有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:14:27.733

“这根本不可能。” 在我的代码示例中，员工扩展个人资料，所有者扩展个人资料。

如果我完全理解你的回答，你会建议这样的事情：

```
Person{
Employee emp;
Owner owner;
} 
```

在我的第一堂课中，我能够做到：

```
Person getPersonFromDb( Class class, int id){  ...  session.get(class, id) ... }

Owner o = (Owner) getPersonFromDb(Owner.class, id);
Employee e =(Employee) getPersonFromDb(Employee.class, id); 
```

在你的方法中，我不能有这样的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:51:23.863

这根本不可能。由于Java只有单一继承，一个对象不能既是雇员又是所有者。您不应该使用继承来映射这些关联。

相反，您应该让 Person 具有与其 Employee 角色的 OnetoOne 关联，以及与其 Owner 角色的 OnetoOne 关联。

# java - Maven安装guvnor找不到ResourceType变量

> ID：13751990
> 
> 赞同：0
> 
> 时间：2012-12-06T20:30:39.300
> 
> 标签：java, maven, maven-3, drools, drools-guvnor

我正在尝试在带有 的 Ubuntu 系统上安装 drools guvnor `mvn clean install -DskipTests`，但我收到如下错误输出：

```
[INFO] 39 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Guvnor multiproject ............................... SUCCESS [1.539s]
[INFO] kie-uberfire-bootstrap ............................ SUCCESS [5.865s]
[INFO] kie-project-editor ................................ SUCCESS [6.465s]
[INFO] Guvnor API ........................................ SUCCESS [1.993s]
[INFO] Guvnor repository connector multiproject .......... SUCCESS [0.056s]
[INFO] Guvnor repository connector JCR ................... SUCCESS [1.463s]
[INFO] Guvnor repository connector Jackrabbit ............ SUCCESS [1.920s]
[INFO] Guvnor repository connector ModeShape ............. SUCCESS [1.827s]
[INFO] Guvnor repository ................................. SUCCESS [8.587s]
[INFO] Drools and jBPM IDE common ........................ FAILURE [11.337s]
[INFO] Guvnor web application core ....................... SKIPPED
[INFO] Guvnor web application Drools ..................... SKIPPED
[INFO] Guvnor bulk importer .............................. SKIPPED
[INFO] Guvnor JCR to UberFire VFS migration .............. SKIPPED
[INFO] Guvnor examples ................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 43.425s
[INFO] Finished at: Thu Dec 06 22:13:58 EET 2012
[INFO] Final Memory: 32M/78M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:testCompile (default-testCompile) on project droolsjbpm-ide-common: Compilation failure: Compilation failure:
[ERROR] SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
[ERROR] SLF4J: Defaulting to no-operation (NOP) logger implementation
[ERROR] SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[ERROR] /home/neyo/drools/guvnor/droolsjbpm-ide-common/src/test/java/org/drools/ide/common/server/factconstraints/predefined/RangeConstraintMultipleOperatorsTest.java:[37,22] error: cannot find symbol
[ERROR] symbol:   class ResourceType
[ERROR] location: package org.kie.builder
[ERROR] /home/neyo/drools/guvnor/droolsjbpm-ide-common/src/test/java/org/drools/ide/common/server/factconstraints/predefined/RangeConstraintSingleOperatorTest.java:[38,22] error: cannot find symbol
[...]
[ERROR] symbol:   variable ResourceType
[ERROR] location: class MandatoryFieldConstraintTest
[ERROR] /home/neyo/drools/guvnor/droolsjbpm-ide-common/src/test/java/org/drools/ide/common/server/factconstraints/predefined/NotMatchesConstraintTest.java:[148,124] error: cannot find symbol
[...] 
```

任何想法为什么它找不到`ResourceType`？

我正在使用 maven 3.0.4 和 java 1.7，并且我已经从 github.com/droolsjbpm 克隆了所有存储库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:58:41.203

我遇到了同样的问题，我在他们的 github 存储库中看到一个可能相关的文件提交[：](https://github.com/droolsjbpm/jbpm/commit/73cee9a551da1aff9f5488f100f2386f72661472#jbpm-gwt/jbpm-gwt-graph/src/main/java/org/jbpm/integration/console/graph/GraphViewerPluginImpl.java)

```
-import org.kie.builder.ResourceType;
+import org.kie.io.ResourceType; 
```

所以他们可能会稍微改变一下他们的包裹。尝试在文件中更改它，看看它是否可以修复它，今晚我会在可以验证的时候进行验证。

# mysql - MYSQL 按一列分组结果，但为唯一的第二列分开

> ID：13751993
> 
> 赞同：0
> 
> 时间：2012-12-06T20:30:53.393
> 
> 标签：mysql, sql

我知道那里有类似的问题，但我在其中找不到这个特殊情况。如果有人知道这个问题的答案，请给我一个链接。否则就到这里了。

我有一个表，其中有两个我感兴趣的字段 - 代码和 id。这些都不是唯一的，尽管有一个 company 字段与 id 字段结合以构成主键。

我需要一份所有代码和名称的列表，这些代码和名称具有多个与同一代码相关联的名称。所以如果我的约会是这样的：

```
| code          | name          | company                                            |
+---------------+---------------+----------------------------------------------------+
| 00009         | name          | 1                                                  |
| 00009         | name          | 2                                                  |
| 00009         | name          | 3                                                  |
| 00009         | name          | 4                                                  |
| 00009         | diff name     | 1                                                  |
| 00014         | Foo           | 2                                                  |
| 00014         | foo           | 3                                                  |
| 00014         | foo           | 4                                                  |
| 00014         | foo           | 5                                                  |
| 00014         | foo           | 6                                                  |
| 00015         | barbaz        | 1                                                  |
| 00015         | barbaz        | 2                                                  |
| 00015         | barbaz        | 3                                                  |
| 00015         | barbaz        | 4                                                  |
| 00015         | bar baz       | 5                                                  |
| 00017         | foo           | 1                                                  |
| 00018         | bar           | 1                                                  | 
```

我需要我的结果也看起来像这样：

```
| code          | name                                                              |
+---------------+-------------------------------------------------------------------+
| 00009         | name                                                              |
| 00009         | diff name                                                         |
| 00014         | Foo                                                               |
| 00014         | foo                                                               |
| 00015         | barbaz                                                            |
| 00015         | bar baz                                                           | 
```

我尝试了几件事，包括

```
SELECT DISTINCT t1.code, t1.name from items t1 
  inner join (select t2.code from items t2 group by t2.name ) t2 
  on (t1.code = t2.code)    
  group by t1.code order by t1.code; 
```

这当然是错的。感谢您的任何见解！

[编辑] 我忘了提一个细节。我只想列出给定代码具有多个唯一名称条目的结果。我已经更新了初始数据（这不会改变我想要的结果）。

[编辑错别字]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:32:27.490

将 HAVING 与 COUNT(DISTINCT) 一起使用：

```
SELECT code, name
FROM items
WHERE code IN (
    SELECT code 
    FROM items
    GROUP BY code 
    HAVING count(DISTINCT name) > 1
) t1
ORDER BY code, name 
```

# java - JSF CommandButton 不调用动作

> ID：13751995
> 
> 赞同：0
> 
> 时间：2012-12-06T20:31:05.717
> 
> 标签：java, jsf, jakarta-ee

> **可能重复：**
> [未调用 h:commandLink / h:commandButton](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

我有一个`Command Button`这样的声明：

```
 <p:panel>
            <h:commandButton 
                id="addBtn" 
                value="Add"
                action="#{createResourceDialogController.add()}" 
                disabled="#{!createResourceDialogController.enableAddButton}"/>
        </p:panel>
        </p:dialog>
    </h:form> 
```

在`CreateResourceDialogController 类中，我有一个名为 add 的函数，它是这样定义的：

```
 /**
 * Called to handle the upload of the resource. 
 */
public void add()
{
    Resource resource = new Resource();
    resource.setCompanyOwner(getAccount().getCompany());
    resource.setCreatedBy(getAccount());
    resource.setCreatedOn(new Date());
    resource.setLastModified(new Date());
    resource.setName(name);
    resource.setResourceBinaryList(null);
    resource.setUserOwner(getAccount());
    setType(resource);
    setOwnerType(resource);  
    setLocation(resource);
    setGroups(resource);

    createNewResource(resource);
} 
```

我单击命令按钮，没有任何反应。我还在 add 函数中设置了断点，但没有任何反应。我在页面上有其他动作监听器，它们都工作正常。这个命令按钮有一些东西导致它不起作用。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:54:50.900

弄清楚了。它与表格有关。该对话框位于 2 个表单内。

# cordova - PhoneGap：尝试预先填充使用电子邮件编辑器发送的电子邮件

> ID：13751998
> 
> 赞同：3
> 
> 时间：2012-12-06T20:31:16.947
> 
> 标签：cordova

我一直在寻找这个问题的答案。我已经下载并成功安装了 PhoneGap 的 EmailComposer 插件。我可以点击我的“电子邮件”按钮，电子邮件字段在那里弹出没有问题。问题是，我正在尝试预先填充“收件人：”字段和“主题”字段。我搜索了各种帖子（主要是在 StackOverflow 上）并且我看到了一些类似的帖子，但没有任何与这个完全相同的问题或真正的解决方案有关的帖子：

我试过的帖子： [PhoneGap Email Composer Plugin](https://stackoverflow.com/questions/5069328/phonegap-email-composer-plugin) [How to send email using mail composer plugin in iphone using phone gap jQuery mobile](https://stackoverflow.com/questions/11340346/how-to-send-email-using-mail-composer-plugin-in-iphone-using-phone-gap-jquery-mo)

我能找到的最接近的是： [https ://groups.google.com/forum/#!searchin/phonegap/EmailComposer/phonegap/ItUj30UZnig/XTaBK7B8ahsJ](https://groups.google.com/forum/#!searchin/phonegap/EmailComposer/phonegap/ItUj30UZnig/XTaBK7B8ahsJ)

但我对那里的解决方案没有任何运气。

正如刚才提到的。我要做的就是预先填充“收件人：”和“主题：”字段。包含的 EmailComposer.js 文档如下所示：

```
// window.plugins.emailComposer

function EmailComposer() {
this.resultCallback = null; // Function
}

EmailComposer.ComposeResultType = {
    Cancelled:0,
    Saved:1,
    Sent:2,
    Failed:3,
    NotSent:4
}

// showEmailComposer : all args optional
EmailComposer.prototype.showEmailComposer = function(subject,body,toRecipients,ccRecipients,bccRecipients,bIsHTML) {

    var args = {};

    if(toRecipients)
        args.toRecipients = toRecipients;
    if(ccRecipients)
        args.ccRecipients = ccRecipients;
    if(bccRecipients)
        args.bccRecipients = bccRecipients;
    if(subject)
        args.subject = subject;
    if(body)
        args.body = body;
    if(bIsHTML)
        args.bIsHTML = bIsHTML;

    cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);

}

// this will be forever known as the orch-func -jm
EmailComposer.prototype.showEmailComposerWithCB =     function(cbFunction,subject,body,toRecipients,ccRecipients,bccRecipients,bIsHTML) {
    alert("email showEmailComposerWithCB?");
    this.resultCallback = cbFunction;
    this.showEmailComposer.apply(this,    [subject,body,toRecipients,ccRecipients,bccRecipients,bIsHTML]);
}

EmailComposer.prototype._didFinishWithResult = function(res) {
    this.resultCallback(res);
}

cordova.addConstructor(
    function()  {
        if(!window.plugins) {
            window.plugins = {};
        }

        // shim to work in 1.5 and 1.6
        if (!window.Cordova) {
            window.Cordova = cordova;
        };

        //window.plugins.emailComposer.showEmailComposer(subject,body,toRecipients,ccRecipients,bccRecipients,bIsHTML)
        window.plugins.emailComposer = new     EmailComposer();
    }
); 
```

以以下开头的实际行：

```
EmailComposer.prototype.showEmailComposer 
```

从未真正被解雇。在面向公众的方面，我有这个（它是有效的 HTML，但我删除了一些标签以用于发布目的：

```
<a onclick="cordova.exec(null, null, 'EmailComposer', 'showEmailComposer', [args]);">Send Email</a> 
```

然后我有：

```
app.initialize();
var args; 
```

当页面首次加载时会发生这种情况。

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-27T09:32:23.210

（由 OP 在问题编辑中回答。移至社区 wiki 答案。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我想到了！解决方案相对容易，但在我的一生中，前几个小时我无法得到它。
> 
> 在您的 HTML 代码中，无论您的按钮在哪里，都输入以下内容：

```
<a onclick="sendEmail(); return false;">Send Email Now</a> 
```

> 该`sendEmail()`功能是业务所在，因此在同一页面上，创建一个脚本标签并添加以下内容：

```
<script>
    function sendEmail(){
         window.plugins.emailComposer.showEmailComposer("subject","body", "recipient@something.com", "cc@something.com", "bcc@something.com",false); 
    }
</script> 
```

> 在您的应用程序初始化后的同一个 HTML 中，只需添加 args 变量：

```
app.initialize(); //under this
var args = {}; 
```

> 保持`EmailComposer.js`文件相同，一切都应该很好。为了寻找这个答案，我遇到了大量的帖子，人们可以通过主题行，但不能通过身体或其他任何东西。我对其进行了测试，这将正确通过所有字段。我希望这可以帮助别人。

# matlab - 在 Matlab 中根据距查询点的距离选择数据

> ID：13751999
> 
> 赞同：0
> 
> 时间：2012-12-06T20:31:23.940
> 
> 标签：matlab, statistics

我有一个包含四列 [XYZC] 的数据集。我想找到以 [X, Y, Z] 为中心、半径为 r 的给定球体中的所有 C 值。解决这个问题的最佳方法是什么？我应该使用 clusterdata 命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:38:58.453

这是一种使用简单欧几里得距离的解决方案：

说`V = [X Y Z C]`是你的数据集， `Center = [x,y,z]`是球体的中心，然后

```
dist = bsxfun(@minus,V(:,1:3),Center);  % // finds the distance vectors 
                                        % // between the points and the center
dist = sum(dist.^2,2); % // evaluate the squares of the euclidean distances (scalars)
idx = (dist < r^2);    % // Find the indexes of the matching points 
```

好的`C`价值观是

```
 good = V(idx,4);  % // here I kept just the C column 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:00:49.537

这不是“聚类分析”：您不会尝试**发现**数据中的结构。

相反，您所做的通常称为“范围查询”或“半径查询”。在经典的数据库术语中，a `SELECT`，带有距离选择器。

您可能想使用欧几里得距离来定义您的球体。出于计算目的，它实际上是有益的，而不是*平方*欧几里得，只需取半径的平方。

我不使用matlab，但是必须有大量示例说明如何计算数据集中每个实例与查询点的距离，然后选择距离足够小的那些对象。

我不知道 Matlab 有没有好的*索引结构*包。但总的来说，在 3D 中，这可以通过索引结构很好地加速。计算所有距离`O(n)`，但仅使用索引结构`O(log n)`。