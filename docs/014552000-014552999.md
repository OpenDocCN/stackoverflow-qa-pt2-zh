# StackOverflow 问答 14552000-14552999

# arrays - 使用循环将整数放入数组时遇到问题

> ID：14552006
> 
> 赞同：1
> 
> 时间：2013-01-27T20:39:49.360
> 
> 标签：arrays, vb.net

我有 VB 2008 代码，可以搜索灰度位图图像部分的单个像素。如果像素值小于 72，我想将像素的坐标存储在二维数组中。

当我运行我的代码时，出现以下错误：“'integer' 类型的值不能转换为'二维整数数组'。

我的代码如下所示。此代码位于获取单个像素值的循环中。关于我做错了什么有什么建议吗？

```
Dim bpCoordinates(,) As Integer
Dim yindex As Integer
Dim xindex As Integer
'If pixel value is < 72, store in array
'Framenumber and y are the integer values of the pixel coordinate
'xindex and yindex are the index values for the array that I want to store the coordinates in
If pixelValue < 72 Then                    
    bpCoordinates = (FrameNumber, y  xindex,yindex )
    yindex = yindex + 1
    xindex = xindex + 1
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:07:44.017

如果您只想保存像素坐标列表，使用更高级的数据类型会更容易，例如

```
 Dim pixelList As New List(Of Point)
   ...
   pixelList.Add(New Point(xValue, yValue)) 
```

数组是很多需要关心的工作。你必须在循环之前初始化数组，比如

```
ReDim bpCoordinates(1, 0) 
```

在循环中类似

```
 n = n + 1
    ReDim Preserve bpCoordinates(1, n)
    bpCoordinates(0, n) = Framenumber
    bpCoordinates(1, n) = y 
```

第一个维度保持从 0 到 1（存储两个值）并且不能更改。`ReDim Preserve`如果您对此感到困惑，请阅读；-)

# jquery - 有没有办法使用 jQuery 同位素来定位每行中的第一个和最后一个元素？

> ID：14552017
> 
> 赞同：10
> 
> 时间：2013-01-27T20:40:57.570
> 
> 标签：jquery, jquery-isotope

我有一个砌体同位素网格，它有 n 行，两个列大小：160 像素 x 160 像素和 320 像素 x 320 像素，我想为每行的第一个和最后一个元素分配不同的样式。我的行可能有 4 个元素到 7 个元素。我一直在为此苦苦挣扎，想知道这是否可能。

**HTML**

```
<div id="grid" style="position: relative; overflow: hidden; height: 960px;"
class="isotope">
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="two_by_two">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_two">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="two_by_two">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_two">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="two_by_two">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_two">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
    <div class="one_by_one">
        <img class="thumb" src="https://s3.amazonaws.com/stitch-images/products/gucci.png"
        />
    </div>
</div> 
```

**CSS**

```
#grid {
    margin:auto;
    margin-top:55px;
    margin-bottom:200px;
    width:1140px
}
#grid .thumb {
    width:97%;
    height:97%
}
#grid .one_by_one {
    width:160px;
    height:160px;
    background:url(https://s3.amazonaws.com/stitch-images/assets/cell_1x1.png);
    cursor:pointer
}
#grid .one_by_two {
    width:160px;
    height:320px;
    background:url(https://s3.amazonaws.com/stitch-images/assets/cell_1x2.png);
    cursor:pointer
}
#grid .two_by_two {
    width:320px;
    height:320px;
    background:url(https://s3.amazonaws.com/stitch-images/assets/cell_2x2.png);
    cursor:pointer
} 
```

**JS**

```
$("#grid").isotope masonry: layoutMode: 'fitRows' 
```

**查看我的 Jsfiddle** [http://jsfiddle.net/TDma4/](http://jsfiddle.net/TDma4/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T19:54:09.143

这是解决问题的一种方法。

**工作解决方案：http:** [//jsbin.com/ufuleb/21/](http://jsbin.com/ufuleb/21/)

**CSS**

```
.first, .last {
  border:2px dashed blue;
  opacity:.75;
} 
```

**JavaScript**

```
$("#grid").isotope(
    { layoutMode : 'fitRows' });

// Last div element
$("#grid div:last-child").addClass("last");

var maxWidth = 0;

// Use max to handle last div
$("#grid div").each(function (i) {  
  matrix = matrixToArray($(this).css("-transform"));

  // identify first elements
  if ( parseInt(matrix[4],10) == 0 ) {
    $(this).addClass("first");
  }

  // identify last elements
  if ( parseInt(matrix[4],10) > parseInt(maxWidth,10) ) { 
    maxWidth = matrix[4];
  } else {      
    $(this).prev().addClass("last");
    maxWidth = 0;
  } 
});

// Util function for parsing -webkit-transform
function matrixToArray(matrix) {    
    return matrix.substr(7, matrix.length-8).split(', ');
} 
```

遍历每个`div`并跟踪当前`xT`值（[CSS -webkit-transform](http://www.quackit.com/css/properties/webkit/css_-webkit-transform.cfm)）。每当传递最大值时，只需更新前一个值，该值应该是每行的最后一个元素。最后一个元素用`:last-child`. *请注意，此解决方案还处理整体`#grid`宽度变化。*

**示例输出**

![示例输出](../Images/16d4e8de388a846f251dc804df1d1262.png)

这可能会进一步优化，但至少提供了一个起点。

我从这个答案中得到了一些帮助：[https ://stackoverflow.com/a/5968313/1085891](https://stackoverflow.com/a/5968313/1085891)

**以供参考：**

*   [https://developer.mozilla.org/en-US/docs/CSS/:last-child](https://developer.mozilla.org/en-US/docs/CSS/:last-child)
*   [https://developer.mozilla.org/en-US/docs/CSS/:first-child](https://developer.mozilla.org/en-US/docs/CSS/:first-child)
*   [https://developer.mozilla.org/en-US/docs/CSS/:nth-child](https://developer.mozilla.org/en-US/docs/CSS/:nth-child)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T14:41:49.300

同位素有一个[`itemPositionDataEnabled`](http://isotope.metafizzy.co/docs/options.html#itempositiondataenabled)选项可以显示每个元素的位置。使用它和[`onLayout`](http://isotope.metafizzy.co/docs/options.html#onlayout)处理程序，您可以计算每行的第一个和最后一个元素（[demo](http://jsfiddle.net/jefferyto/rERvZ/7/)）：

```
$('#grid').isotope({
    itemPositionDataEnabled: true,
    onLayout: function (elems, instance) {
        var items, rows, numRows, row, prev, i;

        // gather info for each element
        items = elems.map(function () {
            var el = $(this), pos = el.data('isotope-item-position');
            return {
                x: pos.x,
                y: pos.y,
                w: el.width(),
                h: el.height(),
                el: el
            };
        });

        // first pass to find the first and last items of each row
        rows = [];
        i = {};
        items.each(function () {
            var y = this.y, r = i[y];
            if (!r) {
                r = {
                    y: y,
                    first: null,
                    last: null
                };
                rows.push(r);
                i[y] = r;
            }
            if (!r.first || this.x < r.first.x) {
                r.first = this;
            }
            if (!r.last || this.x > r.last.x) {
                r.last = this;
            }
        });
        rows.sort(function (a, b) { return a.y - b.y; });
        numRows = rows.length;

        // compare items for each row against the previous row
        for (prev = rows[0], i = 1; i < numRows; prev = row, i++) {
            row = rows[i];
            if (prev.first.x < row.first.x &&
                    prev.first.y + prev.first.h > row.y) {
                row.first = prev.first;
            }
            if (prev.last.x + prev.last.w > row.last.x + row.last.w &&
                    prev.last.y + prev.last.h > row.y) {
                row.last = prev.last;
            }
        }

        // assign classes to first and last elements
        elems.removeClass('first last');
        $.each(rows, function () {
            this.first.el.addClass('first');
            this.last.el.addClass('last');
        });
    }
}); 
```

**更新：**基于 JSuar 反馈的修正算法

**更新 #2：**修复了项目高于 2 行时的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T19:45:09.133

Mike，如果您喜欢冒险，可以扩展 Isotop 来执行此操作。我从[http://isotope.metafizzy.co/docs/extending-isotope.html中提取了以下内容](http://isotope.metafizzy.co/docs/extending-isotope.html)

您可以在 .each 块中执行您想要执行的任何其他属性

```
_fitRowsLayout : function( $elems ) {
  var instance = this,
      containerWidth = this.element.width(),
      props = this.fitRows;

  $elems.each( function() {
    var $this = $(this),
        atomW = $this.outerWidth(true),
        atomH = $this.outerHeight(true);

    if ( props.x !== 0 && atomW + props.x > containerWidth ) {
      // if this element cannot fit in the current row
      props.x = 0;
      props.y = props.height;
    } 

    // position the atom
    instance._pushPosition( $this, props.x, props.y );

    props.height = Math.max( props.y + atomH, props.height );
    props.x += atomW;

  });
}, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T07:33:18.330

使用这个：http: [//jsfiddle.net/86WVw/1/](http://jsfiddle.net/86WVw/1/)

**编辑**：同位素现在使用 translate3d，编辑为同时使用 translate n translate3d [http://jsfiddle.net/86WVw/3/](http://jsfiddle.net/86WVw/3/)

附加CSS：

```
[style*="translate(0px"], [style*="translate3d(0px"], .border { // .border is class for end of row item, you can change it to whatever you want
    border: 3px dotted #f00;
} 
```

附加js：

```
gw = $('#grid').width(); // get grid width
w = $('#grid').width(); // to find smallest width, take a big number first
$('#grid>div').each(function(){ // iterate through tiles
    if ($(this).width()<w) // if width smaller then assumed smallest width
        w = $(this).width(); // change smallest width
});

var x;
for (x = w; x < gw; x += w) // iterate translated tiles from smallest width to grid width
{
    var elms = $('[style*="translate3d('+x+'px"], [style*="translate('+x+'px"]');
    $(elms).each(function(){
        if ((x+$(this).width())>(gw-w)) // if tiles left + tile width reach end of grid
        $(this).addClass('border'); // apply class
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T21:13:07.477

这个问题比看起来要简单得多。
盒子的大小是一个普通矩阵的倍数。

这是我的方法。

```
var columnsWidth = 100; // the base matrix width
var columns = 8; // the number of columns available (container.width / columnsWidth)

$.each(box, function() {
    var box = $(this) // the current box
    var boxSize = [2,2] // obtained subdividing size by matrix
    var maximumXChord = (columns - boxSize[0]) * columnsWidth // the maximum X available

    if (box.x == maximumXChord) { // check if the current X Chords is equal to the maximum
        console.log('the box is the last of this row!')
    } else if (box.x == 0) { // check if the the X is 0
        console.log('the box is the first of this row!') 
    }
}) 
```

就这样！

# css - 用css去除圆形和矩形相交处的边框

> ID：14552019
> 
> 赞同：0
> 
> 时间：2013-01-27T20:41:00.193
> 
> 标签：css, drawing, border

是否可以围绕这两个形状绘制最终边框，而左右两侧没有圆圈的边框？

这是我到目前为止所拥有的

```
<div class="site-header1">
  <div class="logo">
    <div class="text">
      <span>Class</span>
      <span>Class</span>
    </div>
    <div class="img"></div>
 </div>
</div> 
```

css

```
.site-header1 .logo{
    position:relative;
    height: 80px;
}

.site-header1 .logo .text{
    padding: 10px;
    font-weight: lighter;
    font-family: 'Lato', sans-serif;
    font-size:1.5em;
    border-radius: 25px;
    background:white;
    border:1px solid rgba(0, 0, 0, 0.5);
    position:absolute;
    top: 17px;
}
.site-header1 .logo .text span+span{
    padding-left:75px;
}
.site-header1 .logo .img{
    border-radius: 100px;
    background:white;
    border:1px solid rgba(0, 0, 0, 0.5);
    position:absolute;
    left: 75px;
    top: 7px;
    height: 70px;
    width: 70px;
} 
```

我有一个小提琴从这里开始[http://jsfiddle.net/TH5E5/](http://jsfiddle.net/TH5E5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:13:39.373

虽然我相信您可以使用背景渐变来获得效果（[类似于为此答案所做的事情](https://stackoverflow.com/questions/10501488/css-3-shape-inverse-circle-or-cut-out-circle/10503105#10503105)），但更简单的方法是...

## 为边框使用伪元素

[这个小提琴似乎是你想要](http://jsfiddle.net/TH5E5/15/)的，在 Chrome、Firefox 和 IE9 中对我来说看起来不错。它将边框放在伪元素上，将带边框的圆推到主形状后面，然后使用`.img`自身覆盖该形状的边框。这是您的 css 代码的更改部分（您的 html 与您拥有的相同，大部分原始 css 也是如此）：

**更改/添加 CSS**

```
.site-header1 .logo .img { /*this is the image itself */
    border-radius: 99px; /* 1px less than the border */
    background:white;
    border:0;
    position:absolute;
    left: 76px; /* 1px more than border below */
    top: 8px; /* 1px more than border below */
    height: 70px;
    width: 70px;
}
.site-header1 .logo:after { /*this is the image border */
    content: '';
    border-radius: 100px;
    background:white;
    border:1px solid rgba(0, 0, 0, 0.5);
    position:absolute;
    z-index: -1; /* push it behind */
    left: 75px;
    top: 7px;
    height: 70px;
    width: 70px;
} 
```

## 让文本与图像重叠

更改一些属性：

```
.site-header1 .logo .text {
    /* position: absolute; needs to be removed */
    display: inline-block;
    margin-top: 17px; /* this replaces the top: 17px when it was absolute */
} 
```

然后添加以下内容以将文本推送到 img 上方：

```
.site-header1 .logo .text span {
    position: relative;
    z-index: 1;
} 
```

[在这个小提琴中查看结果。](http://jsfiddle.net/TH5E5/18/)

# c# - 在 EF5 中生成连接两个类的结果

> ID：14552020
> 
> 赞同：0
> 
> 时间：2013-01-27T20:41:09.147
> 
> 标签：c#, .net, wpf, ef-code-first, entity-framework-5

在我的项目中，我有两个类`ProductCategory`和`Product`.

```
public class ProductCategory
{
    [Key]
    public int CategoryId { get; set; }
    [Required]
    public string CategoryName { get; set; }

    public ObservableCollection<Product> Products { get; set; }
}

public class Product{
    [Key]
    public int ProductId { get; set; }
    [Required]
    public string ProductName { get; set; }
    [Required]
    public int CategoryId { get; set; }

    public virtual ProductCategory ProductCategory { get; set; }
} 
```

在我的 UI 中，有一个表单可以在类别下创建产品。该表单包括 2 个组合框。一个用于产品 ID，一个用于类别（值成员 - 类别 ID，显示成员 - 类别名称）。还有另一个产品名称文本框。还有一个 ListView 用于显示产品及其类别名称。

我的问题是；我想检索一个包含这些字段的对象集合（显示在 ListView 中）。

```
ProductID, ProductName, CategoryID, CategoryName 
```

请告诉我处理这件事的正确方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:50:14.427

您可以使用*投影*`Select`：

```
var objects = context.Products
    .Select(p => new
    {
        ProductId = p.ProductId,
        ProductName = p.ProductName,
        CategoryId = p.CategoryId,
        CategoryName = p.ProductCategory.CategoryName
    })
    .ToList(); 
```

# javascript - 通过 jquery 添加链接并使其调用 jquery 函数

> ID：14552023
> 
> 赞同：0
> 
> 时间：2013-01-27T20:41:13.280
> 
> 标签：javascript, jquery, css

我有一个在页面加载之前添加的链接。这是代码：

```
<script type="text/javascript" language="javascript">

    myLink= '<a href="#" id="test" class="test" value="1">SomeLink</a>';
    $("#Control").append(myLink);

    $(document).ready(function() {
        $("a").click(function() {
            Id = $(this).attr("value");
            ShowId(Id);
        }); 
```

页面加载完成后，已验证链接是否正确显示。问题是当我点击链接时，该函数没有被调用。如果我单击属于原始页面的任何其他链接并且尚未通过 jquery 添加，则调用该函数。如果我使用 $("#test") 代替，行为是相同的。

当我通过 jquery 添加链接时，我需要做些什么不同的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:43:49.590

也许这是最正确的方法：

```
$(function() {
    $("<a />", {
        href: "#",
        id: "test",
        className: "test",
        text: "SomeList"
    }).data("value", "1").on("click", function() {
        var id = $(this).data("value");
        // ...
    }).appendTo("#Control");
}); 
```

请注意，该`value`属性对锚元素无效，因此我建议使用[`data`](http://api.jquery.com/data/)它。

**演示：http:** [//jsfiddle.net/N3vKS/](http://jsfiddle.net/N3vKS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:45:42.873

```
$('body').on('click', 'a', function() {
    // whatever
}); 
```

将选择器“body”更改为最高公共父级。

# angularjs - angularjs：指令链接函数中的日志范围属性显示未定义

> ID：14552024
> 
> 赞同：10
> 
> 时间：2013-01-27T20:41:22.313
> 
> 标签：angularjs, javascript-framework

我有这个基本的[plnkr](http://plnkr.co/edit/XXtz7pHaPJ7IgQfTM5nl?p=preview)，它只是实现了一个基本的“Hello，X”指令。在我正在记录的链接功能中，`scope.name`但我得到了`undefined`？为什么会这样？它不应该`name`在控制台中记录属性的值吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T20:56:33.963

这是一个已知的“问题”，其中属性的插值`@`发生在调用链接函数之后。有一个[拉取请求打开](https://github.com/angular/angular.js/pull/1555)以更改此问题，但尚不清楚此问题是否将被合并。

同时，获取插值的一种方法是通过观察如下属性：

```
attrs.$observe('hello', function(changedValue){
     console.log(scope.name);
}); 
```

和 plunk：[http ://plnkr.co/edit/Lnw6LuadTLhhcOTsPC8w?p=preview](http://plnkr.co/edit/Lnw6LuadTLhhcOTsPC8w?p=preview)

因此，归根结底，AngularJS 的这种行为有点令人困惑，将来可能会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:18:21.390

Pawel is right ([https://stackoverflow.com/a/14552200/287070](https://stackoverflow.com/a/14552200/287070)) but I wanted to add that the problem is that any attribute that contains {{}} interpolation will be set to null in the attrs parameter during the link function as the first $digest since the compilation has not yet run to evaluate these.

The fact that @ bindings are null in linking functions is just a symptom of this.

Currently there is no real fix, since we can't start running $digests in the middle of the compilation process. So $observe (or $watch) is the only real way to get hold of these values.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T11:31:11.450

对于那些在 2015 年阅读这篇文章的人，请注意 Angular 处理`"@"`属性的方式已经改变。从 Angular 1.2 开始，插值发生在调用链接函数之前。

[这里](http://www.bennadel.com/blog/2650-looking-at-attribute-interpolation-workflow-changes-in-angularjs.htm)有一篇关于这个主题的优秀文章。

# clojure - 连接到 ClojureScript bREPL：clojure.browser.repl/connect 在编译的 JavaScript 中抛出 TypeError

> ID：14552026
> 
> 赞同：8
> 
> 时间：2013-01-27T20:41:28.997
> 
> 标签：clojure, google-closure-compiler, leiningen, google-closure, clojurescript

我正在尝试连接到 ClojureScript 浏览器 REPL，但遇到了`clojure.browser.repl/connect`. 我编译的 JavaScript在顶部的 Google Closure 代码块中`TypeError`尝试调用对象。我正在按照*[ClojureScript：启动并运行](http://shop.oreilly.com/product/0636920025139.do)*（第 9 章，第 78 页，可在预览版中获得）中的说明进行操作，并且想知道自发布以来，用于此的工具是否发生了变化。`appendChild``null`

我正在使用 Leiningen 2.0.0、Java 1.6.0_37、OS X 10.7.5，以及我的依赖项`project.clj`：

```
(defproject brepl-hello "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/clojurescript "0.0-1552"]
                 [compojure "1.1.5"]
                 [ring/ring-jetty-adapter "1.1.8"]]
  :plugins [[lein-cljsbuild "0.3.0"]]
  :source-paths ["src/clj"]
  :cljsbuild {:builds [{
                :source-paths ["src/cljs"]
                :compiler {
                 :output-to "resources/public/brepl-hello.js"
                 :optimizations :whitespace 
                 :pretty-print true}}]}) 
```

这是唯一的 ClojureScript 源文件`src/cljs/brepl_hello/brepl-hello.cljs`：

```
(ns brepl-hello
  (:require [clojure.browser.repl :as repl]))

(repl/connect "http://localhost:9000/repl") 
```

这将编译为`resources/public/brepl-hello.js`我插入到`index.html`同一目录中的文件：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <script type="text/javascript" src="brepl-hello.js"></script>
    </head>
    <body>
    </body>
</html> 
```

我一直在使用 REPL 或 Python SimpleHTTPServer 的 Ring/Jetty 在端口 3000 上提供此服务。当我在 Chrome 中打开此页面时，开发控制台显示，并在已编译的 js 文件顶部的 Google Closure 代码中`Uncaught TypeError: Cannot call method 'appendChild' of null`回溯到此`if`/块，其中（作为参数传递给包含函数）是。`else``parentElm``null`

```
if(goog.userAgent.GECKO || goog.userAgent.WEBKIT) {
    window.setTimeout(goog.bind(function() {
      parentElm.appendChild(iframeElm);
      iframeElm.src = peerUri.toString();
      goog.net.xpc.logger.info("peer iframe created (" + iframeId + ")")
    }, this), 1)
  }else {
    iframeElm.src = peerUri.toString();
    parentElm.appendChild(iframeElm);
    goog.net.xpc.logger.info("peer iframe created (" + iframeId + ")")
  } 
```

这似乎是一个问题`clojure.browser.repl/connect`。将 ClojureScript 源代码中的这一行替换为以下内容：

```
(ns brepl-hello
  (:require [clojure.browser.repl :as repl]))

(.write js/document "Hello World!") 
```

将在浏览器中编译和运行就好了。我怀疑在我的构建设置或目录结构中配置错误，或者我在这一切的某个地方犯了一个菜鸟错误。自从我遵循的说明发布以来，发生了什么变化？我在#clojure irc 日志中找到了几个关于这个问题的引用，但没有解决方案。

最后，这是一个简短的目录树供参考：

```
├── out
│   ├── cljs
│   │   ├── core.cljs
│   │   └── core.js
│   ├── clojure
│   │   └── browser
│   │       ├── event.cljs
│   │       ├── event.js
│   │       ├── net.cljs
│   │       ├── net.js
│   │       ├── repl.cljs
│   │       └── repl.js
│   └── goog
│       └── [...] 
├── pom.xml
├── project.clj
├── resources
│   └── public
│       ├── brepl-hello.js
│       └── index.html
├── src
│   ├── clj
│   │   └── brepl_hello
│   │       └── core.clj
│   └── cljs
│       └── brepl_hello
│           └── brepl-hello.cljs
└─── target
     ├── brepl-hello-0.1.0-SNAPSHOT.jar
     ├── classes
     ├── cljsbuild-compiler-0
     │   ├── brepl_hello
     │   │   └── brepl-hello.js
     │   ├── cljs
     │   │   ├── core.cljs
     │   │   └── core.js
     │   └── clojure
     │       └── browser
     │           ├── event.cljs
     │           ├── event.js
     │           ├── net.cljs
     │           ├── net.js
     │           ├── repl.cljs
     │           └── repl.js
     └── stale
         └── extract-native.dependencies 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T13:32:56.010

好吧，它的开源和查看代码似乎`document.body`在 repl 隐藏 iframe 被添加到它时为空（`connect`调用导致这一点）。

您应该`connect`在 dom ready 或 body on load 上执行此调用，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T15:37:11.430

看一眼：

[https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-02.md](https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-02.md)

或者，为了获得更好的 brepl 体验，请点击此处

[https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-18.md](https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-18.md)

# php - 按引用的嵌入文档过滤

> ID：14552029
> 
> 赞同：0
> 
> 时间：2013-01-27T20:41:52.593
> 
> 标签：php, mongodb, doctrine

我需要通过嵌入文档映射中的属性进行过滤，问题是它被引用了。

游戏 -> 结构。

```
"_id" : ObjectId( "51051e7d8ead0ebd4e000000" ),
  "active" : true,
  "created" : 1359289981,
  "difficulty" : 0,
  "map" : { "$ref" : "Map",
    "$id" : ObjectId( "5103c0228ead0e3764000000" ),
    "$db" : "fantasytd" },
  "mode" : "coop", 
```

对于未引用的嵌入文档，这就足够了

```
$q->field('map.playerLimit')->equals($playerLimit); 
```

我尝试使用

$q->field('map')->prime()

但是没有运气，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:26:09.223

没门。以标准方式，您可以按 map.$ref/map.$id/map.$db 过滤集合，其中 map.$id 查询非常有用。通过引用文档的其他属性过滤完全是另一回事。也许您可以将 intersted 属性保存在 DBRef 中并正常查询它，这是您不应该的，并且在将来的某些版本中将无法使用。

# php - 在joomla中生成xml文件

> ID：14552031
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:42:06.027
> 
> 标签：php, xml, joomla

我是 joomla 开发的新手，具备 FED 开发技能，并迈出了进入服务器端世界的第一步

我习惯使用 joomla 进行开发，但我遇到了问题

我需要从 php foreach 参数生成 xml 文件

意味着我在 joomla 中有一些带有 foreach 到几篇文章的模板，我需要从其中任何一个 xml 行中制作并将其写入 joomla 文件系统中的新 xml 文件。

我花了很多时间来找到我的问题的答案并进入了 joomla！文档 这个 [链接](http://docs.joomla.org/Generating_XML_output)解释了如何进行解析，而不是如何制作文件，这部分对我来说是缺失的，我需要帮助

如果有人可以帮忙吗？

谢谢分配！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:50:21.547

您可以为此使用 JFile。看一下这个：

```
$fileName = 'path/to/file.txt';
$buffer = 'nafu';

if( JFile::write($fileName, $buffer) )
{
   echo 'File was written';
} 
```

[http://docs.joomla.org/API16:JFile/write](http://docs.joomla.org/API16:JFile/write)

# php - SORT_FLAG_CASE 标志的问题

> ID：14552040
> 
> 赞同：1
> 
> 时间：2013-01-27T20:43:23.063
> 
> 标签：php

我想做（喜欢）一个二维数组，不区分大小写。

我有：

```
foreach ($rows as $key=>$row) { 
    $names[$key]=$row['Name']; 
} 

array_multisort($rows,SORT_STRING|SORT_FLAG_CASE,$names); 
```

以上最终产生相同的结果（带或不带大小写标志）。

厌倦了盯着这个，外面有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:44:32.410

首先，**SORT_FLAG_CASE**仅在 PHP v5.4+ 中可用，所以我建议检查您正在运行的 PHP 版本（如果**5.3ish**可能会有所帮助）。

如果不是，请确保您放入**$names**的所有值都是小写或大写。

您在对**array_multisort**的调用中颠倒了争论**$rows**和**$names**的顺序。

 **最后，如果它来自数据库（或其他方式，这意味着您不能在进入数组的过程中更改数据），那么您可以使用**array_walk**。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T11:55:19.133

由于我使用 PHP 5.3.16 遇到了这个问题，我想我会分享我的简单解决方案：只需将您的密钥转换为小写（或大写），例如：

```
foreach ($rows as $key=>$row) { 
    $names[$key]=strtolower($row['Name']); 
} 

array_multisort($names,SORT_STRING,$rows); 
```

我还交换了`$rows`&`$names`并删除了`SORT_FLAG_CASE`（以摆脱日志消息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-14T09:05:24.477

您还可以在排序中进行排序，因此可以将 usort 与 strcasecmp 一起使用：

```
foreach ($rows as $key=>$row) { 
    $names[$key]=row['Name']; 
} 

array_multisort(usort($names,strcasecmp),$rows); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T11:00:13.283

上面的答案不起作用，因为第一个数组混合在一起，而另一个没有。所以我写了一个通用的多维数组不区分大小写的比较函数。它还可以使用多个键：

```
function array_casecmp($keys) {
    if (gettype($keys) != "array") $keys = func_get_args();
    return function ($a, $b) use ($keys) {
        foreach($keys as $value) {
            $akeys = $akeys . $a[$value];
            $bkeys = $bkeys . $b[$value];
        }
        return strcasecmp($akeys, $bkeys);
    };
} 
```

像这样使用它：

```
usort($files,strcasecmp(array(0,1)); // with standard array
usort($files,strcasecmp(1); // single key
usort($files,strcasecmp(0,1); // arguments are converted to array
usort($files,strcasecmp("dir","link")); // you can also use symbolic keys
usort($files,strcasecmp(0,1,2,3,4,...); // use as many keys as you like 
```

请记住，键是连接的，因此您可能必须在数组列中使用 str_pad 以使它们以正确的方式分开。**

# java - 如果尝试使用反射为 String 类的 value[] 字段设置值，Java 6 和 Java 7 会产生不同的结果

> ID：14552041
> 
> 赞同：2
> 
> 时间：2013-01-27T20:43:23.750
> 
> 标签：java, string, reflection, java-7, java-6

以下代码尝试**使用 Java 7**`private final char value[]`为 String 类的字段设置一个值。

 **```
package test;

import java.lang.reflect.Field;

public final class Test 
{
    static
    {
        try
        {
            Field value = String.class.getDeclaredField("value");
            value.setAccessible(true);
            value.set("Hello World", value.get("1234567890"));
        }
        catch (IllegalArgumentException | IllegalAccessException | NoSuchFieldException | SecurityException e)
        {
            System.out.println(e.toString());
        }
    }

    public static void main(String[] args) 
    {
        System.out.println("Hello World");
    }
} 
```

它默默地显示`1234567890`在控制台上，毫无疑问。

* * *

当我尝试使用**Java 6**做同样的事情时，如下所示，

```
package test;

import java.lang.reflect.Field;

public final class Test
{
    static
    {
        try
        {
            Field value = String.class.getDeclaredField("value");
            value.setAccessible(true);
            value.set("Hello World", value.get("1234567890"));
        }
        catch (IllegalArgumentException e)
        {
            System.out.println(e.toString());
        }
        catch (IllegalAccessException e)
        {
            System.out.println(e.toString());
        }
        catch (NoSuchFieldException e)
        {
            System.out.println(e.toString());
        }
        catch (SecurityException e)
        {
            System.out.println(e.toString());
        }
    }
    public static void main(String[] args)
    {
        System.out.println("Hello World");
    }
} 
```

它会导致引发以下异常。

> 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常

当`value.get("1234567890")`此语句`value.set("Hello World", value.get("1234567890"));`中的长度大于等于字符串时有效`Hello World`

例如，

如果以下语句（如前面的代码片段）

```
value.set("Hello World", value.get("1234567890")); 
```

被类似下面的东西取代

```
value.set("Hello World", value.get("12345678901")); 
```

那么，当方法的第二个参数的长度小于第一个参数时，为什么这不适用于**Java 6**（或者可能更低，我没有尝试过） ？`set()`

顺便说一句，我可以理解，根本不建议以这种方式处理具有反射的私有字段，而且是最糟糕的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T20:50:34.823

> 那么当 set() 方法的第二个参数的长度小于第一个参数时，为什么这不适用于 Java 6（或者可能更低，我没有尝试过）？

在 Java 6 中，您正在设法将`value`字符数组设置为新引用 - 但您不会更改指定字符串引用的部分的*其他字段。*`char[]`

我不记得确切的字段名称，但它是这样的：

```
char[] value;
int offset;
int count; 
```

因此，对于“覆盖”整个字符数组的字符串，将为`offset`0 和. 现在，如果您用*更短*的替换，但不更改，则超出数组的末尾......它超出了数组的范围。这样做是为了不需要复制字符数据之类的操作——它们只是创建一个引用现有数组的新对象，具有不同的偏移量/计数值。`count``value.length``value` *`char[]``count``offset + count``substring`*

 *从更新 5 开始的 Java 7 中，字符串没有这个偏移/计数概念；相反，每个字符串都有自己的字符数组，并且开头和结尾是隐式的。我怀疑这就是为什么它在 Java 7 中对你有用。***

# php - 使用 PHP 抓取 Google 搜索

> ID：14552043
> 
> 赞同：2
> 
> 时间：2013-01-27T20:43:26.373
> 
> 标签：php, javascript, google-api, web-crawler

我试图弄清楚如何使用 PHP 或 JavaScript 获取 Google 搜索结果。我知道以前有可能，但现在我找不到方法。

我正在尝试复制（某种程度上）
[http://www.getupdated.se/sokmotoroptimering/seo-verktyg/kolla-ranking/的功能](http://www.getupdated.se/sokmotoroptimering/seo-verktyg/kolla-ranking/)

但实际上我要解决的核心问题只是通过 PHP 或 JavaScript 获取搜索结果，其余的我可以弄清楚。

使用 file_get_contents() 或 cURL 获取结果似乎不起作用。

例子：

```
$ch = curl_init();
$timeout = 5;
curl_setopt($ch, CURLOPT_URL, 'http://www.google.se/#hl=sv&q=dogs');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$result = curl_exec($ch);
curl_close($ch);
echo '<pre>';
var_dump($result);
echo '</pre>'; 
```

结果：

> " string(219) "302 Moved 文档已移至此处。"

因此，通过一些谷歌搜索，我发现[http://code.google.com/apis/customsearch/v1/overview.html](http://code.google.com/apis/customsearch/v1/overview.html)但这似乎只适用于为一个或多个网站生成自定义搜索。似乎需要通过“自定义搜索引擎”cx 参数。

所以无论如何，有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T20:50:13.863

我之前做过。通过发出 http 请求生成 html 内容`https://www.google.co.in/search?hl=en&output=search&q=india`，现在使用 htmldom php 库解析特定标签。[您可以使用PHP SIMPLE HTML DOM](http://simplehtmldom.sourceforge.net/)解析结果页面的内容

> **演示：下面的代码将为您提供所有结果的标题：**

```
<?php

include("simple_html_dom.php");

$html = file_get_html('http://www.google.co.in/search?hl=en&output=search&q=india');

$i = 0;
foreach($html->find('li[class=g]') as $element) {
    foreach($element->find('h3[class=r]') as $h3) 
    {
        $title[$i] = '<h1>'.$h3->plaintext.'</h1>' ;
    }
       $i++;
}
print_r($title);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T13:26:06.840

There is php [a github package named google-url](https://github.com/SneakyBobito/google-url) that does the job.

The api is very comfortable to use. See the example :

```
// this line creates a new crawler
$googleUrl=new \GoogleURL\GoogleUrl();
$googleUrl->setLang('en'); // say for which lang you want to search (it could have been "fr" instead)
$googleUrl->setNumberResults(10); // how many results you want to check
// launch the search for a specific keyword
$results = $googleUrl->search("google crawler");
// finaly you can loop on the results (an example is also available on the github page) 
```

However you will have to think to use a delay between each query, or else google will consider you as a bot and ask you for a captcha that will lock the script.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T20:49:08.573

奇怪的。因为如果我`curl`从命令中执行一个，就像我得到一个`200 OK`：

```
curl -I 'http://www.google.se/#hl=sv&q=dogs'
HTTP/1.1 200 OK
Date: Sun, 27 Jan 2013 20:45:02 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
Set-Cookie: PREF=ID=b82cb66e9d996c48:FF=0:TM=1359319502:LM=1359319502:S=D-LW-_w8GlMfw-lX; expires=Tue, 27-Jan-2015 20:45:02 GMT; path=/; domain=.google.se
Set-Cookie: NID=67=XtW2l43TDBuOaOnhWkQ-AeRbpZOiA-UYEcs7BIgfGs41FkHlEegssgllBRmfhgQDwubG3JB0s5691OLHpNmLSNmJrKHKGZuwxCJYv1qnaBPtzitRECdLAIL0oQ0DSkrx; expires=Mon, 29-Jul-2013 20:45:02 GMT; path=/; domain=.google.se; HttpOnly
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Server: gws
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Transfer-Encoding: chunked 
```

另外，也许考虑`urlencode`为传递的 URL 设置一个，所以这一行：

```
curl_setopt($ch, CURLOPT_URL, 'http://www.google.se/#hl=sv&q=dogs'); 
```

对此的更改：

```
curl_setopt($ch, CURLOPT_URL, 'http://www.google.se/' . urlencode('#hl=sv&q=dogs')); 
```

# python - 在 Python 中抓取 HTML

> ID：14552046
> 
> 赞同：2
> 
> 时间：2013-01-27T20:43:38.157
> 
> 标签：python, web-scraping

我试图从页面源中找到一系列 URL（twitter 链接），然后将它们放入文本文档中的列表中。我遇到的问题是，一旦我 .readlines() urlopen 对象，我总共有 3-4 行，每行包含几十个我需要一个接一个收集的 url。这是我尝试纠正的代码片段：

```
page = html.readlines()
for line in page:
       ind_start = line.find('twitter')
       ind_end = line.find('</a>', ind_start+1)
       while ('twitter' in line[ind_start:ind_end]):
           output.write(line[ind_start:ind_end] + "\n")
           ind_start = line.find('twitter', ind_start)
           ind_end  = line.find('</a>', ind_start + 1) 
```

不幸的是，我无法使用它提取任何网址。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:22:52.427

You can extract links using [lxml](/questions/tagged/lxml "show questions tagged 'lxml'") and a [xpath](/questions/tagged/xpath "show questions tagged 'xpath'") expression :

```
from lxml.html import parse

p = parse('http://domain.tld/path')
for link in p.xpath('.//a/@href'):
    if "twitter" in link:
        print link, "match 'twitter'" 
```

Using [regex](/questions/tagged/regex "show questions tagged 'regex'") there, is not the better way : parsing `HTML` is a solved problem in 2013\. See [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T20:46:51.227

您可以使用 BeautifulSoup 模块：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup('your html')
elements = soup.findAll('a')

for el in elements:
    print el['href'] 
```

如果没有 - 只需使用正则表达式：

```
import re

expression = re.compile(r'http:\/\/*')
m = expression.search('your string')

if m:
    print 'match found!' 
```

这也将匹配`<img />`标签中的 url，但您可以轻松调整我的解决方案以仅在`<a />`标签中查找 url

# android - 如何使用 Android SQLite 数据库

> ID：14552055
> 
> 赞同：0
> 
> 时间：2013-01-27T20:44:20.820
> 
> 标签：android, sqlite

当我运行以下示例时，“添加”按钮和“删除”按钮在点击时没有显示任何错误，但是，当我点击“显示”按钮时，我收到错误 - “不幸的是，学习已停止。”

这是我的 mainactivity.java 代码-

```
package com.example.learn;

import com.example.timepass.R;

import android.os.Bundle;
import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    Button b1, b2,b3;
    EditText t1,t2;

    SQLiteDatabase db;
    Cursor c;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        t1 = (EditText) findViewById(R.id.editText1);
        t2 = (EditText) findViewById(R.id.editText2);

        db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
        db.execSQL("CREATE TABLE IF NOT EXISTS Names(Name VARCHAR)");

        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                if (t1.getText().toString().equals("")) {
                    t1.setText("Enter Name");
                }

                else {
                    String input = t1.getText().toString();
                    db.execSQL("INSERT INTO Names VALUES(" + "'" + input + "'"
                            + ")");
                }

            }
        });

        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                c = db.rawQuery("SELECT * FROM Names",null);
                int count = c.getCount();

                t2.setText(count);

              }
        });

        b3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                db.execSQL("DELETE FROM Names");
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是activity_main.xml代码-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:hint="Add" >

    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="19dp"
        android:text="@string/add" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/button1"
        android:layout_marginTop="36dp"
        android:ems="10"
        android:hint="Result" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_centerVertical="true"
        android:text="@string/show" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button2"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="38dp"
        android:text="@string/del" />

</RelativeLayout> 
```

我正在学习android，所以不太了解它，请帮助。为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:24:16.510

这里：`t2.setText(count);` 这将崩溃，因为您试图将整数设置为文本并且框架需要有效的资源 id.. 所以您应该更改为 this(a `String`)：`t2.setText(String.valueOf(count));`

# .net - 我该如何逃脱 | 绑定的 StringFormat 中的（垂直线）字符？

> ID：14552060
> 
> 赞同：2
> 
> 时间：2013-01-27T20:44:51.213
> 
> 标签：.net, wpf, xaml, binding, escaping

例如，我有标签：

```
<Label Content="{Binding SiteName, StringFormat={}{0}   |  }" /> 
```

标签的内容应显示为：“A Site Name |”。但是，省略了空格，竖线也是如此。

如另一个资源中所述，我尝试使用克拉 ( `^`) 转义栏，但这没有用。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:51:02.907

使用 a`TextBlock`而不是 a`Label`

```
<TextBlock Text="{Binding SiteName, StringFormat={}{0}   |  }" /> 
```

（如果您想确保将空格考虑在内：

```
<TextBlock Text="{Binding SiteName, StringFormat='{}{0}   |  '}" /> 
```

或者，使用 的`ContentStringFormat`属性`Label`而不是`StringFormat`。

```
<Label Content="{Binding SiteName}" ContentStringFormat="{}{0}   |  " /> 
```

# c# - 如何保存复选框的状态

> ID：14552061
> 
> 赞同：4
> 
> 时间：2013-01-27T20:45:15.480
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps, checkbox

如何使用 C# 在 Visual Studio Ultimate 2012 中保存复选框的状态。即使在应用程序终止后，当我再次重新打开时，最后查看的状态应该是可见的？该怎么办？你能帮我写代码吗？

提前致谢.....

维萨里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:49:44.543

在这里你应该找到你需要的一切：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T21:10:56.770

对于大多数 Windows 8 应用商店应用程序，数据可大致分为两类：

1.  应用数据——设置、文件、缓存、会话状态、自定义列表等。
2.  用户数据——文件、凭证、照片、音乐等。

这篇文章[Data Persistence & Application Life-Cycle Management](http://www.silverlightshow.net/items/Windows-8-Apps-The-8-Must-Know-Tricks-Day-6.aspx)应该可以帮助您了解您需要哪种类型的持久性。数据可以保存为键值对中的*应用程序设置，但也可以保存为**应用程序文件*，通常存储在应用程序具有的沙盒文件系统访问权限中。

作为一个简单的例子，你应该有：

```
 // Reference to Local Application Settings.
   Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings; 
   // Reference to Roaming Application Settings.
   Windows.Storage.ApplicationDataContainer roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings;  
   // Persisting simple Application Settings.
   localSettings.Values["myOption1"] = myBox1.isChecked;
   roamingSettings.Values["myOption2"] = myBox2.isChecked;

   // Reading settings back.
   var mySavedOption1 = (bool)(localSettings.Values["myOption1"]);
   var mySavedOption2 = (bool)(roamingSettings.Values["myOption2"]); 
```

**编辑**

有效的测试示例：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        // Reference to Local Application Settings.
        Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
        // Reading settings back.
        object mySavedOption1;
        localSettings.Values.TryGetValue("myOption1Key", out mySavedOption1);
        if (mySavedOption1 != null)
            myOption1.IsChecked = (bool)mySavedOption1;
    }

    private void myOption1_Checked_1(object sender, RoutedEventArgs e)
    {
        // Reference to Local Application Settings.
        Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
        // Persisting simple Application Settings.
        localSettings.Values["myOption1Key"] = myOption1.IsChecked;

    } 
```

在xml中：`<CheckBox x:Name="myOption1" Grid.Row="1" Checked="myOption1_Checked_1" Unchecked="myOption1_Checked_1"/>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T20:49:53.820

您可以使用应用程序提供的本地存储：

```
Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
localSettings.Values["CheckboxState"] = "checked"; 
```

`localSettings`然后，您可以通过从值中提取状态来使用相同的恢复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T21:30:38.697

应用程序设置是存储应用程序数据的最佳方式... [http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings的最佳解决方案](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings)

# leaflet - 停用以前的瓷砖

> ID：14552067
> 
> 赞同：0
> 
> 时间：2013-01-27T20:45:43.907
> 
> 标签：leaflet

我试图在放大/缩小时停用以前的图块。目前地图加载了所有的瓦片并将旧瓦片保留在那里（按比例放大），直到整个加载完成，我找不到任何设置来修改这种情况；所以我想知道我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:42:58.850

如果你设置`zoomAnimation`在`false`你的`Map`对象上会发生什么？我自己从来没有使用过这个设置，但我一直认为它会关闭你不想要的行为。

# android - Android：从文件中读取并增加读取的行不起作用

> ID：14552068
> 
> 赞同：0
> 
> 时间：2013-01-27T20:45:49.697
> 
> 标签：android, for-loop, readline

我有一个包含不同问题的文件，当用户单击“下一步按钮”时，我需要一个接一个地阅读它们。但是，我只能阅读第一行和下一行，之后的布局保持不变并且不起作用。为了阅读全部问题，我将不胜感激。这是我的代码的一部分：

```
public class Questions {
int i = 0;
int questionCount = 0;
int category;
String question;
int questionNumber=1;

void currentQuestion(Context context, int cat) {
    category = cat;

    String questionFile = "";

        questionFile = "VerbalSup1.txt";
        questionCount = 25;

    Log.i("Question", questionFile + ": " + questionCount);
    try {
        InputStream is = context.getAssets().open(questionFile);
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        // Skips lines
        for (i = 0; i< questionNumber; i++) {
            reader.readLine();

        }
        question = reader.readLine();

    } catch (IOException e) {
        e.printStackTrace();
    }

}
void Next(){
    questionNumber=questionNumber + 1;
} 
```

这是下一个按钮：

```
bNext.setOnClickListener(new View.OnClickListener(){
            @Override

                public void onClick(View v) {
                    questions.Next();
                     questions = new Questions();
                     questions.Next();
                     currentQuestion();

            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:51:23.237

问题是您正在重置`questions`对象，因此它只会获得第一行。这里：

```
questions.Next();
questions = new Questions(); // this is wrong as the counts will be reset to defaults
questions.Next();
currentQuestion(); 
```

你应该有：

```
questions.Next();       
currentQuestion();
currentQuestion(); 
```

我希望它有所帮助。

# django - Django setLang 不处理“Next”参数

> ID：14552069
> 
> 赞同：1
> 
> 时间：2013-01-27T20:45:51.337
> 
> 标签：django, translation

我正在尝试使用以下代码实现即时语言更改：

```
 {% for lang in LANGUAGES %}
   <li>
      <form name="setLang{{ lang.1}}" action="/i18n/setlang/" method="POST">{% csrf_token %}
          <input name="next" type="hidden" value="http://google.com" />
         <input type="hidden" name="language" value="{{ lang.0 }}" />
        <a href="#" {% if LANGUAGE_CODE = lang.0 %} class="active" {%endif%} onclick="document.setLang{{ lang.1 }}.submit();return false;">{{ lang.0 }}</a>
      </form>
      </li>
{% endfor %} 
```

它很好用，问题是它不会返回到“下一个”字段中指定的 URL。我强迫它成为“google.com”只是为了看看它是如何工作的，但它不断将我重定向回我的主页。

这是我的 urls.py：

```
urlpatterns = patterns('',
# Examples:
# url(r'^$', 'izolyatsia.views.home', name='home'),
# url(r'^izolyatsia/', include('izolyatsia.foo.urls')),
url(r'^$', 'showcase.views.home', name='home'),
# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
(r'^project/(?P<project_name>[a-zA-Z0-9_.-]+)/$', 'izolyatsia.views.project'),
(r'^post/(?P<slug>[a-zA-Z0-9_.-]+)/$', 'izolyatsia.views.post'),

#Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)),
(r'^tinymce/', include('tinymce.urls')),
url(r'^wysiwyg_post/$', 'izolyatsia.views.wysiwyg_post', name='wysiwyg_post'),
url(r'', include('multiuploader.urls')),
(r'^i18n/', include('django.conf.urls.i18n')),
url(r'^(.*)/$', 'pages.views.show_page', name='show_page'), 
```

)

我不知道为什么它不起作用，也许这里有人可以帮助我？

在此先感谢，米。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:43:46.627

代码明确阻止重定向到域外的站点 -[`set_language`](https://github.com/django/django/blob/master/django/views/i18n.py#L15)视图调用[`django.utils.is_safe_url()`](https://github.com/django/django/blob/master/django/utils/http.py#L231)，它检查您没有尝试完全这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:58:28.733

请查看[此处](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#how-django-discovers-language-preference)的 django 文档，您可以在其中发现`settings.py`文件中的中间件应按此顺序排列：

```
MIDDLEWARE_CLASSES = (
   'django.contrib.sessions.middleware.SessionMiddleware',
   'django.middleware.locale.LocaleMiddleware',
   'django.middleware.common.CommonMiddleware',
) 
```

也许这可能是发生在你身上的事情，我想。

# java - ORMLite - 更新没有空值

> ID：14552071
> 
> 赞同：0
> 
> 时间：2013-01-27T20:45:54.067
> 
> 标签：java, android, sqlite, ormlite

我想更新我的 SQLite 数据库中的记录。该记录存储在一个表中，表中的字段由 annotation 描述`@DatabaseField(canBeNull = false)`。首先，我存储一条记录，填写所有必需的值，然后尝试更新它。我只想更新一些记录值。例如：

```
Order o = new Order();
o.setStatus(OrderStatus.PENDING);
o.setIdOrder(1);

orderDAO.update(order); 
```

我`update`使用`RuntimeExceptionDao`. 它使用所有列构造完整的更新查询。

例如：

```
UPDATE `order` SET `idCustomer` = ?, `number` = ?, `orderDate` = ?, `status` = ? WHERE `idOrder` = ? 
```

它让我例外

```
java.lang.RuntimeException: java.sql.SQLException: Unable to run update stmt on object Order 
```

如何指定`UPDATE`查询字段？我只想要这个查询

```
UPDATE `order` SET `status` = ? WHERE `idOrder` = ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:51:59.443

默认情况下`dao.update(...)`更新所有字段。它不知道你只改变了其中的几个或任何东西。

通常，您从数据库中请求项目，更改它并调用`dao.update(...)`：

```
Order order = orderDao.queryForId(1);
if (order.getStatus() != OrderStatus.PENDING) {
   order.setStatus(OrderStatus.PENDING);
   orderDao.update(order);
} 
```

这允许您测试当前`Order`状态等。如果您必须创建自定义`UPDATE`方法，您可以使用`UpdateBuilder`：

> [http://ormlite.com/docs/update-builder](http://ormlite.com/docs/update-builder)

例如：

```
UpdateBuilder<Order, Integer> updateBuilder = orderDAO.updateBuilder();
updateBuilder.updateColumnValue(Order.STATUS_FIELD_NAME, OrderStatus.PENDING);
updateBuilder.where().eq(Order.ID_FIELD_NAME, 1);
updateBuilder.update(); 
```

# c++ - 在方法中创建向量并将其设置为变量

> ID：14552076
> 
> 赞同：0
> 
> 时间：2013-01-27T20:46:41.677
> 
> 标签：c++, vector, reference, eclipse-cdt

好的，所以我是 C++ 的新手，如果我能问对的话，我很确定这应该是一个简单的问题。基本上这是我需要工作的：

```
printInfoFromVector(this->mycontroller.createVector) 
```

这是我的实际代码：

```
vector<GasStation>& highPrices = this->myController.findHighestPrice();
    this->findPrice(highPrices);

vector<GasStation>& findHighestPrice(){ 
```

我遇到的问题是我无法让它们的 highPrice 类型和 findHighestPrice() 匹配。我相当确定问题是因为我正在通过 ref 但我很确定这是正确的方法。

谁能告诉我编写赋值语句和方法头以使类型匹配的正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:14:56.590

如果`findHighestPrice`正在计算一个新的向量，那么你不应该返回一个引用，而是一个实际的向量。因此，您将拥有：

```
vector<GasStation> findHighestPrice() { ... }
vector<GasStation> highPrices = this->myController.findHighestPrice(); 
```

例如，如果您定义`findHighestPrice`为

```
vector<GasStation>& findHighestPrice() {
  vector<GasStation> stations;
  // ...
  return stations;
} 
```

then`stations`将在函数返回时被释放并且`highPrices`未定义。

# c++ - 从 double 转换为 int 时值发生变化

> ID：14552079
> 
> 赞同：4
> 
> 时间：2013-01-27T20:47:02.223
> 
> 标签：c++, int, double

基本问题，代码很大，但我的问题是，核心是基本的：

我有一个称为变量的双精度值，如果我用 cout << 变量检查它，它会给我，例如，982。

下一行代码是 int intvariable = variable。

然后，当我用 cout << intvariable 检查它时，我得到了 981。

有趣的是，这并不总是发生。使用 985，它可能会保持在 985，但随后在 984 和 983，它将返回 983 和 982。我似乎根本无法弄清楚这一点。我尝试将其转换为浮点数，然后转换为 int，或者转换为另一个 double，然后再转换为 int。

我需要它作为一个整数，所以我可以使用它的模运算符。

我应该指出，之前在代码中双精度小于 1（即 0.987），然后乘以小数位数使其成为实数正整数（尽管它仍以双精度形式存储）观点）。也许这与随机四舍五入有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:00:03.407

将浮点值转换为`int`将截断（返回）该值，可能会导致您的问题，因为浮点数本质上是不精确的。尝试将数字四舍五入，即`intvariable = (int)(0.5 + variable)`. 您可能还对`fmod`计算浮点除法余数的函数感兴趣（请参阅[http://www.cplusplus.com/reference/cmath/](http://www.cplusplus.com/reference/cmath/)）。

# r - data.frame 标签使用失败

> ID：14552081
> 
> 赞同：1
> 
> 时间：2013-01-27T20:47:05.803
> 
> 标签：r

我创建了 3 个向量：

> v1 = c(1,2,3)
> v2 = c(11,22,33)
> v3 = c(111,222,333)

然后我用它们做了一个框架：

```
> df = data.frame(vec1 = v1, vec2 = v2, vec3 = v3)                                                                                                                                
> df
  vec1 vec2 vec3
1    1   11  111
2    2   22  222
3    3   33  333 
```

现在似乎列名不是自动的，但是`vec1, vec2, vec3`.

在此之后，我想获得一个`vec2`等于 11 的帧行：

```
> df[vec2 == 11,]
Error in `[.data.frame`(df, vec2 == 11, ) : object 'vec2' not found 
```

但以下代码有效：

```
> df[v2 == 11,]
  vec1 vec2 vec3
1    1   11  111 
```

我认为这是错误的。我不明白为什么`R`使用旧的矢量名称，而不是 tags `vec1, vec2, vec3`。

这是我的版本的错误`R`吗？

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin12.2.0/x86_64 (64-bit) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:50:33.750

当您使用以下语法时：

```
df[vec2 == 11,] 
```

R 试图`df`根据`vec2`向量的值选择行。但是没有这样的向量：您的数据框中只有一个具有此名称的列。所以你正在寻找的语法是：

```
df[df$vec2 == 11,] 
```

以下是有效的，因为该向量之前已在您的 R 会话中定义：

```
df[v2 == 11,] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T20:48:56.590

要么使用：

```
df[df$vec2 == 11, ] 
```

或者

```
df[with(df, vec2 == 11), ] 
```

第二个有效，因为`v2 == 11`计算结果为`TRUE, FALSE, FALSE`，因此第一行正在打印。但是，`vec2`不是设置的变量。它是 a 的一列`data.frame`。因此，您必须使用`df$vec2`（或使用`with`）来识别它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T20:57:07.930

这不是一个错误，而是一个误解 -`v2`使用删除`rm(v2)`并且`df[v2 == 11,]`会失败。可以使用`subset()`列名对数据框进行子集化：

```
> subset(df, vec2 == 11)
  vec1 vec2 vec3
1    1   11  111 
```

`subset`还支持提取特定列，例如

```
> subset(df, vec2 == 11, select = vec1:vec2)
  vec1 vec2
1    1   11 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T21:53:20.043

如果您先[附加](http://cran.r-project.org/doc/manuals/R-intro.html#attach_0028_0029-and-detach_0028_0029) `df`，则可以使用上述语法：

```
df = data.frame(vec1 = v1, vec2 = v2, vec3 = v3)
attach(df)
df[vec2 == 11,] 
```

将输出：

```
 vec1 vec2 vec3
1    1   11  111 
```

虽然这在控制台上工作时可以避免纯粹的输入，但根据[Google R 风格指南，](http://google-styleguide.googlecode.com/svn/trunk/google-r-style.html#attach)在编写脚本期间通常应该避免这种情况。

# php - PHP正则表达式从字符串中获取

> ID：14552083
> 
> 赞同：0
> 
> 时间：2013-01-27T20:47:31.503
> 
> 标签：php, regex

假设我有这个字符串：

```
I like bacon but nothing else 
```

我将如何从字符串中提取“培根”？也像这个：

```
I like jerking around 
```

那一个只会抽搐吗？

谢谢！:)

这可能会涉及正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:53:43.200

```
$string = "I like bacon but nothing else";
$word = end(explode(" ", $string, 3));
echo $word; 
```

这将从字符串中获取您的第三个单词。

# excel - 根据动态值从偏移行复制相邻单元格

> ID：14552084
> 
> 赞同：0
> 
> 时间：2013-01-27T20:47:37.987
> 
> 标签：excel, vba

我之前发布过类似的东西，以为我有它，然后删除了我的帖子。啊。所以，这就是我想要完成的事情：

*   如果变量相等 c = d（比较两个循环），则在工作表上找到正确的 d 值位置（列/行）
*   将单元格中的 d 值复制到另一张纸上的指定范围内 .end(xlup).offset(1,0) ----这很好用
*   从 d 值复制相邻的单元格值几行（偏移量 0，-16）

我无法正确获得偏移值。它给了我 range1 R3 值。

建议？

例子：

```
Set range1 = wbk1.Worksheets(1).Range(R3:R20)
Set range2 = wbk2.worksheets(2).Range("N" & .Rows.Count).End(xlup).Offset(1,0)
Set range3 = wbk2.worksheets(2).Range("O" & .Rows.Count).End(xlup).Offset(1,0)
Set range4 = range1.Offset(0,-16)
For Each c in g.keys
     For Each d in range1 
          If c = d Then 
               range2.Value = d  
               range3.value = range4.value  (this isn't working)
          End If
     Next d
Next c 
```

最终代码：

```
Set rngchassIP = wbkJackPot.Worksheets(1).Range("R3:R30") 
Set rngchassCS = wbkVer.Worksheets("Cutsheets").Range("M2:M5")
Set rngchassyver = wbkVer.Worksheets("Cutsheets").Range("N" & .Rows.Count).End(xlUp).Offset(1, 0)
Set rngchassypst = wbkVer.Worksheets("Cutsheets").Range("O" & .Rows.Count).End(xlUp).Offset(1, 0)

For Each c In rngchassCS               
    For Each w In rngchassIP           
        If c = w Then                   
            rngchassyver.Value = w      
            rngchassypst.Value = w.Offset(0, -16)
        End If
    Next w
Next c 
```

问题的根源在于，一旦确定了 w 的值/位置，我需要从该单元格中获取偏移量（0，-16）并将其放在“O”中。我尝试了几种不同的方法，但我只是没有看到它......呃。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:07:03.160

只是猜测你想在这里做什么......

```
Set range1 = wbk1.Worksheets(1).Range("R3:R20")

'are range 2 and 3 on the same row?
Set range2 = wbk2.worksheets(2).Range("N" & .Rows.Count).End(xlup).Offset(1,0)
Set range3 = wbk2.worksheets(2).Range("O" & .Rows.Count).End(xlup).Offset(1,0)

For Each c in g.keys
     For Each d in range1.Cells 
          If c = d Then 
               range2.Value = d  
               range3.value = d.Offset(0,-16)
               'What now?  Once one match has been found,
               '  any later matches will write to the same cells...
          End If
     Next d
Next c 
```

# jquery - 通过获取被点击元素的 id 来下载正确的文件

> ID：14552086
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:47:48.100
> 
> 标签：jquery

我正在为我网站上的几个文件下载链接添加密码保护。我通过添加一个显示密码提示的 onclick 事件来完成此操作，然后在成功时我使用 window.loaction = /path/to/file_name.zip。我的代码大部分都在工作，只是它下载了错误的文件。如果我单击 id="2012" 的链接，它总是会下载 2011.zip。

链接代码：

```
<a class="download" id="2011" href="#" onclick="promptPassword()">Download the</br> 2011 CD</a>

<a class="download" id="2011" href="#" onclick="promptPassword()">Download the</br> 2011 CD</a> 
```

Javascript代码：

```
<script>
    $(function promptPassword(){

        var tips = $(".validateTips");

        function updateTips(t) {
            tips
                    .text(t)
                    .addClass("ui-state-highlight");
        }

        $('#password-form').dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true,
            buttons: {
                "Enter": function(file_name) {
                    var file_name = $('.download').attr('id');
                    var  password = $('#password').val();

                    var data_html = "password=" + password;
                    $.ajax({
                        type: 'POST',
                        url: 'password.php',
                        data: "password=" + password,
                        success: function(password) {
                            if(password == 'true'){
                                window.location = 'downloads/' + file_name + '.zip';
                                $('#password-form').dialog( 'close' );

                            }
                            else {
                                updateTips("Incorrect Password. Please try again.")
                                $('#password').addClass("ui-state-error")
                                return false
                            }
                        }

                    });
                }
            }
        });

        $( ".download")
                .click(function() {
                    $("#password-form").dialog( "open" );
        });

    });
</script> 
```

我的问题是：

我应该如何/在 promptPassword 函数中获取激活 promptPassword 事件的下载链接的 ID？我最好的猜测是在 $('.download').click 函数期间，但我如何将它传递给 window.location = 'downloads/' + file_name + '.zip'; 这是 $('#password-form').dialog() 函数的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:02:38.273

问题在这里：

```
var file_name = $('.download').attr('id'); 
```

当您尝试从元素集合中获取值时，它只会返回集合中第一个元素的值。

`active`您可以向单击的元素添加一个类：

```
$( ".download").click(function() {
         $("#password-form").dialog( "open" );
       $( ".download.active").removeClass('active');
      $(this).addClass('active');
 }); 
```

对话框中的`Enter`按钮：

```
var file_name = $('.download.active').attr('id'); 
```

# jquery - jquery images逐个加载图像

> ID：14552087
> 
> 赞同：2
> 
> 时间：2013-01-27T20:47:47.850
> 
> 标签：jquery, image, load

我一直在寻找一个 jquery 解决方案，它在执行某些操作（淡入淡出等）之前监听每个图像（从一堆中）何时加载。

当`imagesLoaded`加载所有图像时，我已经设法做到这一点，但是我希望它在每个图像加载后独立于其他图像的状态执行。

我认为这是可能的`imagesLoaded`，但还没有设法让它发挥作用。有人吗？

其他解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-09T07:31:51.260

监听 imagesLoaded 进度事件。

（[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)）

```
imagesLoaded("img").on("progress", function(imagesLoadedInstance, image) {
    // Code for each image
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:15:37.547

您可以将函数直接附加到 DOM，例如`<img onload="executeThisImage(imgId);" />`：

或者您可以使用 jQuery 直接将负载绑定到它，例如 mipe34 建议：

```
$("#myImage").load(function() { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:15:44.920

使用 jQuery 试试这个：

```
$("#myImage").bind("load", function () { $(this).fadeIn(); }); 
```

或相同但语法不同：

```
$("#myImage").load(function(event) {
    $(this).fadeIn();
}); 
```

还要检查这个有趣的主题：

*   [jQuery 如何让图像在加载时淡入？](https://stackoverflow.com/questions/1383870/jquery-how-do-you-get-an-image-to-fade-in-on-load)
*   [图像加载时的 jQuery 回调（即使图像被缓存）](https://stackoverflow.com/questions/3877027/jquery-callback-on-image-load-even-when-the-image-is-cached)

*第二个真的很有趣。即使图像被浏览器缓存，有一个解决方案如何使它工作。*

遵循有关此主题的最佳答案。我看到了最好的解决方案，例如：

```
$("#myImage").one('load', function() {
  $(this).fadeIn();
}).each(function() {
  if(this.complete) $(this).load();
}); 
```

这里用于事件绑定以确保事件处理程序最多执行一次[。](http://api.jquery.com/one/)该`each`循环将确保如果图像被缓存，它将触发其上的加载事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T21:32:26.623

为此，您首先需要隐藏图像：

```
$('img').css('display', 'none'); 
```

然后在`load`事件触发时淡入：

```
$('img').load(function(){
    $(this).fadeIn();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T21:17:00.067

您可以为此使用[jQuery 加载](http://api.jquery.com/load-event/)事件：

```
$("img").load(function(event) {
    console.log(this);
}); 
```

将代码限制为某些特定的图像集可能是个好主意。例如使用一个类：

```
$("img.foo").load(function(event) {
    console.log(this);
}); 
```

# python - 使用 curl 与 Python 请求

> ID：14552088
> 
> 赞同：4
> 
> 时间：2013-01-27T20:47:53.627
> 
> 标签：python, curl, python-requests

在抓取网站时，哪个更可取：使用 curl 还是使用 Python 的 requests 库？

我最初计划使用请求并明确指定用户代理。但是，当我使用它时，我经常会收到“HTTP 429 请求过多”错误，而使用 curl，它似乎可以避免这种情况。

我需要更新 10,000 个标题的元数据信息，并且我需要一种方法以并行方式下拉每个标题的信息。

使用每个下拉信息的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:18:38.987

Since you want to parallelize the requests, you should use `requests` with `grequests` (if you're using gevent, or `erequests` if you're using eventlet). You may have to throttle how quickly you hit the website though since they may do some ratelimiting and be refusing you for requesting too much in too short a period of time.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T20:56:34.990

使用请求将允许您以编程方式执行此操作，这应该会产生更清洁的产品。

如果你使用 curl，你正在执行更慢的 os.system 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T20:58:20.520

任何一天我都会通过外部程序购买语言版本，因为它不那么麻烦。

只有当它变得不可行时，我才会退回到这个。始终认为人的时间比机器时间更有价值。无论如何，这种应用程序中的任何“性能提升”都可能会被网络延迟所淹没。

# javascript - 打开而不是灯箱效果

> ID：14552089
> 
> 赞同：0
> 
> 时间：2013-01-27T20:48:00.413
> 
> 标签：javascript, jquery, lightbox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:35:26.337

我认为你需要像 Fancybox 这样的东西。这是一个 JQuery 灯箱插件。 [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

# mysql - mysql join，从select中的其他表中检索数据

> ID：14552090
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:48:11.980
> 
> 标签：mysql, sql

我有一个表 1 产品（产品 ID、名称、描述、productCategoryID）和表 2 类别（类别 ID、名称）的经典示例，我想要的只是使用 select 语句来获取产品表输出，但使用产品类别名称代替结果集中的ID，我知道这一定很简单，但我用谷歌搜索并查看了所有类似的问题，但不明白在我的情况下加入是如何工作的，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:51:11.040

您想`JOIN`在两个表之间使用 a ：

```
select p.productId
   p.name as ProductName, 
   p.description,
   c.name CategoryName
from products p
inner join categories c
  on p.productCategoryId = c.categoryId 
```

如果您在学习联接方面需要帮助，这里是联接的一个[很好的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

我`INNER JOIN`在两张桌子之间使用了一个。这将返回两个表之间匹配的所有行。如果`products`无论表中是否有匹配的行都想返回所有`category`，那么您将需要使用`LEFT JOIN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:51:35.190

理想情况下，我们会看到一些您自己的代码......但是......

```
SELECT products.productID, 
       products.name as ProductName, 
       products.description, 
       categories.name as CategoryName
FROM Products
INNER JOIN categories 
ON categories.categoryID = Products.productCategoryID 
```

# hdfs - Nuodb 和 HDFS 作为存储

> ID：14552091
> 
> 赞同：2
> 
> 时间：2013-01-27T20:48:18.803
> 
> 标签：hdfs, nuodb

Nuodb 使用 HDFS 作为存储。这会对性能产生影响吗？

如果我理解正确，HDFS 更适合批处理模式或一次写入多次读取的应用程序类型。如果需要从存储中读取，它不会增加获取记录的延迟吗？

在 HDFS 块大小概念之上，保持文件大小较小，这会在获取数据时增加网络流量。我在这里错过了什么吗？请指出相同。

Nuodb 将如何管理这些延迟问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:54:50.377

下午好，

我叫 Elisabete，是 NuoDB 的技术支持工程师。我相信我可能刚刚通过您在我们自己的论坛上的帖子回答了这个问题，但我也在这里为任何好奇的人做出回应。

**首先...关于 NuoDB 架构/布局的迷你课程：**

最基本的 NuoDB 设置包括：

*   经纪代理
*   交易引擎 (TE)
*   连接到存档目录的 Storage Manager (SM)

**Broker Agents**跟踪域中的所有移动部分（托管 NuoDB 进程的机器的集合），并为客户端应用程序提供下一个可用事务引擎的连接信息。

**事务引擎**处理传入的 SQL 请求并管理事务。

**存储管理**器从“磁盘”（存档目录）读取和写入数据

所有这些组件都可以驻留在一台机器上，但最佳设置将使它们分布在多台主机上（允许每个进程充分利用主机的可用 CPU/RAM）。此外，虽然可以仅使用每个组件中的一个来运行，但在这种情况下，肯定是更多。额外的代理提供弹性，额外的 TE 提高性能/速度，额外的 SM 确保耐用性。

**好的，现在让我们谈谈存储：**

这是您的存储管理员正在写入的“存档目录”。目前，我们支持三种存储模式：

*   本地文件系统
*   Amazon Web Services：简单存储卷 (S3)、弹性块存储 (EBS)
*   Hadoop 分布式文件系统 (HDFS)

所以，要详细说明 NuoDB 如何与 HDFS 一起工作......它不知道 HDFS 层正在写入的多台机器。就 SM 而言，它正在读取数据原子并将其写入单个目录。HDFS 层决定如何在其所在的机器集群中分发和检索数据。

**现在终于解决延迟问题：**

事情是这样的，每当我们引入远程存储设备时，我们不可避免地会引入一些额外的延迟，因为 SM 现在在向内存读取/写入原子时需要走得更远。HDFS 可能会增加一点，因为现在它需要做的是神奇的分割、分发、检索和重组数据。再加上网络速度等方面的差异。

我想获得的磁盘空间超过了旅行时间的成本，但这是您必须根据具体情况决定的事情。

现在，所有这些都说了……我没有提到***TE 和 SM 都具有将数据缓存到本地内存的能力***。在启动每个进程时，您可以设置此缓存的大小。NuoDB 使用多版本并发控制 (MVCC) 和所有进程之间几乎恒定的通信流的组合，以确保缓存中的数据与系统内发生的所有更改保持同步。当缓存增长接近其限制时，垃圾收集也会以最近最少使用的顺序启动并清除原子。

所有这些都有助于减少延迟，因为 TE 可以保留他们最常引用的数据，并从兄弟 TE 那里获取他们没有的数据副本。当他们确实求助于向 SM 请求数据时，SM（或其兄弟 SM 之一）有可能在本地缓存中拥有所请求数据的副本，从而节省了前往存档目录的行程。

唷.. 这太多了，我绝对忽略了几个概念。这些主题通过我们主网站上提供[的新白皮书套件（和新的“绿皮书”）进行了更深入的介绍。](https://www.nuodb.com/resources/documents/)我目前也在制作一些视觉指南，以帮助解释所有这些。

如果您想了解更多有关 NuoDB 的信息，或者如果我没有完全回答您的问题....请直接通过[NuoDB 社区论坛](http://www.nuodb.com/community/forum.php)与我联系（我会回复那里的帖子，速度会更快一些）。

谢谢你，伊丽莎白

NuoDB 技术支持工程师

# javascript - 切换类的按钮元素单击事件不起作用

> ID：14552092
> 
> 赞同：0
> 
> 时间：2013-01-27T20:48:22.267
> 
> 标签：javascript, html, css, jquery

我有一个开/关按钮，[这里有特色](http://www.hongkiat.com/blog/css3-on-off-button/)

我已经准备好所有元素，并且我希望按钮类`.on`在按下时启动。

只是无论我尝试什么都行不通。

我在 jsFiddle 中添加了确切的代码，它在那里工作，但不在我的页面上。

*   [jsFiddle](http://jsfiddle.net/MhBEy/1/)
*   [我的页面](http://www.tranceil.fm/player2)

我在 jquery 中添加 HTML：

```
'<section>'+
        '<button id="button" href="#">&#xF011;</button>'+
    '<span>'+
    '</span>'+
'</section>'+ 
```

我猜这是 CSS 元素之间的冲突，但我无法确定问题所在。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T20:52:47.153

尝试这个

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#button').on('click', function(){
            $(this).toggleClass('on');
        });
    })
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T20:53:21.333

在 jsFiddle 中，您正确地将事件绑定在 中`$(document).ready()`，而在您自己的页面中则没有。所以在 jsFiddle 中，只有在 DOM 准备好后，事件才会正确绑定到`button`元素，而在您自己的页面中，事件无法绑定，因为该元素在该阶段尚不存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T20:53:35.980

我可以在您页面的 HTML 中看到这一点：

```
<script>
   $(function(){
      $('#player').metroPlayer();
   });
</script>
<script type="text/javascript">
   $('#button').on('click', function(){
      $(this).toggleClass('on');
   });
</script> 
```

您需要将您的`on()`功能**放在**`$(function() { ... });`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T20:54:40.820

尝试这个

```
 $(document).ready(function(){
      $('#button').click(function(){
         $(this).toggleClass('on');
      });
    }); 
```

# python - 使用 Python 按顺序解析 XML

> ID：14552094
> 
> 赞同：0
> 
> 时间：2013-01-27T20:48:41.200
> 
> 标签：python, xml, xml-parsing

我正在尝试解析 XML 文档。该文档具有嵌入的 HTML 格式，例如

```
<p>This is a paragraph
 <em>with some <b>extra</b> formatting</em>
 scattered throughout.
</p> 
```

到目前为止我已经使用

```
import xml.etree.cElementTree as xmlTree 
```

处理 XML 文档，但我不确定这是否提供了我正在寻找的功能。我将如何处理这里的文本节点？

另外，有没有办法在文档中找到结束标签？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:13:02.973

如果您的 XML 文档适合内存，您应该使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)，它可以让您更清晰地访问文档。您将能够选择一个节点并自动与其子节点交互；每个节点都有一个`.next`命令，它将遍历文本直到下一个标签。

所以：

```
>>> b = BeautifulSoup.BeautifulStoneSoup("<p>This is a paragraph <em>with some <b>extra</b> formatting</em> scattered throughout.</p>")

>>> b.find('p')
<p>This is a paragraph <em>with some <b>extra</b> formatting</em> scattered throughout.</p>

>>> b.find('p').next
u'This is a paragraph '

>>> b.find('p').next.next
<em>with some <b>extra</b> formatting</em> 
```

那或类似的东西应该可以解决您的问题。

如果它不适合内存，则需要对 SAX 解析器进行子类化，这需要更多的工作。为此，您使用`from xml.parsers import expat`并编写处理程序来打开和关闭标签。它涉及更多。

# iphone - 在 IOS 中创建翻译器/字典

> ID：14552102
> 
> 赞同：-2
> 
> 时间：2013-01-27T20:49:07.383
> 
> 标签：iphone, ios, objective-c

所以我导入了一个包含字符集列表的文本文件。这些集合有一个含义，它们指的是对象的状态。例如 TOMTOM100 表示已宣布交货。我导入他的文本文件，状态以 0-5 个标签显示（取决于有多少状态更新可用）。

起初我想用一个 if 语句来做到这一点，但很快意识到这将是太多了。

```
 if ((trackTraceStatusone.text = @"TOMTOM100")) 
                {
                    trackTraceStatusone.text = @"Delivery announced.";
                } 
```

有没有办法创建某种翻译器，自动将状态翻译成可读格式？

TOMTOM100 > 交货公告

TOMTOM101 > 交付扫描

等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:55:20.033

听起来像是工作[`NSLocalizedStringFromTable()`](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/macro/NSLocalizedStringFromTable)或相应的 NSBundle 方法[`-localizedStringForKey:value:table:`](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/localizedStringForKey%3avalue%3atable%3a)。这将允许您从包中的文件加载字符串，`.strings`如下所示：

```
"TOMTOM100" = "Delivery Announced";
"TOMTOM101" = "Delivery Scanned"; 
```

这也将使为不同语言提供不同的字符串变得容易。有关详细信息，请参阅资源编程指南的[字符串资源部分](https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/LoadingResources/Strings/Strings.html#//apple_ref/doc/uid/10000051i-CH6)。

# cordova - Phonegap - 通过 JavaScript 选择“选择”选项

> ID：14552111
> 
> 赞同：0
> 
> 时间：2013-01-27T20:50:01.790
> 
> 标签：cordova, selection, local-storage

给定以下**html**代码：

```
<body onload="loadSett()">
<form id="settingsForm" name="settingsForm">
    <select name="Sound" id="Sound">
        <option value="0">Off</option>
        <option value="1">On</option>
    </select>

    <select name="Vibration" id="Vibration">
        <option value="0">Off</option>
        <option value="1">On</option>
    </select>
</form>
</body> 
```

我有以下**javascript**：

```
var getSound;
var getVibra;

function loadSett() {
    var form = $("#settingsForm");
    getSound = localStorage.getItem("sound");
    getVibra = localStorage.getItem("vibra");

    if(getSound != undefined && getVibra != undefined) {
        if(getSound == "1"){
            document.getElementById('Sound').options[1].selected = true;
        }
        if(getVibra == "1"){
            document.getElementById('Vibration').options[1].selected = true;
        }
    } else { alert("Empty"); }
} 
```

**问题：**为什么根据localStorage中存储的值在加载页面时没有***选择***select标签的**选项？**提前致谢

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:36:06.677

您的代码基础没有问题。也许检查控制台输出是否有错误等。

这是您的代码的 jsbin 版本，可以按预期工作：http: [//jsbin.com/uwucib/1/edit](http://jsbin.com/uwucib/1/edit)*

# node.js - 使用 Node.js 将 HTML 转为 PDF

> ID：14552112
> 
> 赞同：85
> 
> 时间：2013-01-27T20:50:03.850
> 
> 标签：node.js, express, pdf-generation

我正在寻找创建`pdf`我的网站网页的可打印版本。像`express.render()`只将页面呈现为`pdf`

有谁知道这样做的节点模块？

如果没有，您将如何实施？我见过一些方法谈论使用无头浏览器`phantom.js`，但不确定流程是什么。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-20T20:43:47.930

Extending upon Mustafa's answer.

A) Install [http://phantomjs.org/](http://phantomjs.org/) and then

B) install the phantom node module [https://github.com/amir20/phantomjs-node](https://github.com/amir20/phantomjs-node)

[![enter image description here](../Images/b62d09d0e75668d63fe4f4073956526b.png)](https://i.stack.imgur.com/wVrcx.png)

C) Here is an example of rendering a pdf

```
var phantom = require('phantom');   

phantom.create().then(function(ph) {
    ph.createPage().then(function(page) {
        page.open("http://www.google.com").then(function(status) {
            page.render('google.pdf').then(function() {
                console.log('Page Rendered');
                ph.exit();
            });
        });
    });
}); 
```

**Output of the PDF:**

[![enter image description here](../Images/d1057be24bb2ac16b076a995673670f2.png)](https://i.stack.imgur.com/VcUJs.png)

**EDIT:** [Silent printing that PDF](http://apache.cu.be/pdfbox/2.0.2/pdfbox-app-2.0.2.jar)

`java -jar pdfbox-app-2.0.2.jar PrintPDF -silentPrint C:\print_mypdf.pdf`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-27T21:07:46.953

[Phantom.js](http://phantomjs.org/)是一个无头 webkit 服务器，它将加载任何网页并将其呈现在内存中，尽管您可能看不到它，但有一个屏幕捕获功能，您可以在其中将当前视图导出为 PNG、PDF 、JPEG 和 GIF。[从 phantom.js 文档](http://phantomjs.org/screen-capture.html)中查看这个示例

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-08-09T02:46:34.033

如果要将 HTML 导出为 PDF。你有很多选择。甚至没有节点

选项 1：在您的 html 页面上有一个调用 window.print() 函数的按钮。使用浏览器原生 html 转 pdf。使用媒体查询使您的 html 页面在 pdf 上看起来不错。并且您还可以在事件之前和之后进行打印，您可以使用这些打印在打印之前对页面进行更改。

选项 2\. [htmltocanvas](http://html2canvas.hertzen.com/)或[rasterizeHTML](https://github.com/cburgmer/rasterizeHTML.js)。将您的 html 转换为 canvas ，然后在 canvas 对象上调用 toDataURL() 以获取图像。并使用[jsPDF 之](http://parall.ax/products/jspdf)类的 JavaScript 库将该图像添加到 PDF 文件中。这种方法的缺点是 pdf 无法编辑。如果您想从 PDF 中提取数据，有不同的方法。

选项 3。@Jozzhard 回答

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-10-03T11:55:52.240

尝试使用 Puppeteer 从 HTML 创建 PDF

来自这里的示例[https://github.com/chuongtrh/html_to_pdf](https://github.com/chuongtrh/html_to_pdf)

或[https://github.com/GoogleChrome/puppeteer](https://github.com/GoogleChrome/puppeteer)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-05-31T12:54:56.100

我找到的最佳解决方案是 html-pdf。它很简单，可以使用大 html。

[https://www.npmjs.com/package/html-pdf](https://www.npmjs.com/package/html-pdf)

就这么简单：

```
 pdf.create(htm, options).toFile('./pdfname.pdf', function(err, res) {
        if (err) {
          console.log(err);
        }
    }); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-10-02T11:04:26.693

**包裹**

我用[了html-pdf](https://www.npmjs.com/package/html-pdf)

易于使用，不仅可以将 pdf 保存为文件，还可以将 pdf 内容通过管道传输到 WriteStream（因此我可以将其直接流式传输到 Google Storage 以保存我的报告）。

**使用 css + 图片**

它考虑了css。我面临的唯一问题 - 它忽略了我的图像。我找到的解决方案是`src`用base64替换属性值中的url，例如

`<img src="data:image/png;base64,iVBOR...kSuQmCC">`

您可以使用您的代码或使用在线转换器之一，例如[https://www.base64-image.de/](https://www.base64-image.de/)

**从 html 片段 + css 编译有效的 html 代码**

1.  我必须得到我`html`文档的一个片段（我只是在 jQuery 选择器上应用了 .html() 方法）。
2.  然后我已经阅读了相关`css`文件的内容。

使用这两个值（存储在变量中`html`并`css`相应地）我使用[模板字符串编译了一个有效的 html 代码](https://developer.mozilla.org/he/docs/Web/JavaScript/Reference/template_strings)

```
var htmlContent = `
<!DOCTYPE html>
<html>
  <head>
    <style>
      ${css}
    </style>
  </head>
  <body id=direct-sellers-bill>
    ${html}
  </body>
</html>` 
```

并将其传递给[html-pdf](https://www.npmjs.com/package/html-pdf)`create`的方法。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-03-18T11:06:34.987

对于那些不想在他们的服务器上安装 PhantomJS 和 Chrome/Firefox 实例的人 - 或者因为[PhantomJS 项目*当前已*暂停](https://github.com/ariya/phantomjs/issues/15344)，这里有一个替代方案。

您可以将转换外部化为 API 来完成这项工作。许多存在并且变化，但您将获得的是具有最新功能的可靠服务（我认为 CSS3、Web 字体、SVG、Canvas 兼容）。

例如，使用[PDFShift](https://pdfshift.io)（免责声明，我是创始人），您可以简单地通过使用`request`包来做到这一点：

```
const request = require('request')
request.post(
    'https://api.pdfshift.io/v2/convert/',
    {
        'auth': {'user': 'your_api_key'},
        'json': {'source': 'https://www.google.com'},
        'encoding': null
    },
    (error, response, body) => {
        if (response === undefined) {
            return reject({'message': 'Invalid response from the server.', 'code': 0, 'response': response})
        }
        if (response.statusCode == 200) {
            // Do what you want with `body`, that contains the binary PDF
            // Like returning it to the client - or saving it as a file locally or on AWS S3
            return True
        }

        // Handle any errors that might have occured
    }
); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-10-12T21:47:46.417

**从外部 URL 创建 PDF**

这是对先前答案的改编，它利用`html-pdf`了 ，但也将其与`requestify`外部 URL 结合使用：

安装你的依赖

```
npm i -S html-pdf requestify 
```

然后，创建脚本：

```
//MakePDF.js

var pdf = require('html-pdf');
var requestify = require('requestify');
var externalURL= 'http://www.google.com';

requestify.get(externalURL).then(function (response) {
   // Get the raw HTML response body
   var html = response.body; 
   var config = {format: 'A4'}; // or format: 'letter' - see https://github.com/marcbachmann/node-html-pdf#options

// Create the PDF
   pdf.create(html, config).toFile('pathtooutput/generated.pdf', function (err, res) {
      if (err) return console.log(err);
      console.log(res); // { filename: '/pathtooutput/generated.pdf' }
   });
}); 
```

然后你只需从命令行运行：

```
node MakePDF.js 
```

观看为您创建的美化像素完美 PDF（免费！）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-06T00:31:57.960

在我看来，最好的方法是通过 API 来实现，这样您就不会在运行非托管代码的应用程序中添加大量复杂的依赖项，这些依赖项需要经常更新。

这是一个简单的方法，每月 800 个请求是免费的：

```
var CloudmersiveConvertApiClient = require('cloudmersive-convert-api-client');
var defaultClient = CloudmersiveConvertApiClient.ApiClient.instance;

// Configure API key authorization: Apikey
var Apikey = defaultClient.authentications['Apikey'];
Apikey.apiKey = 'YOUR API KEY';

var apiInstance = new CloudmersiveConvertApiClient.ConvertWebApi();

var input = new CloudmersiveConvertApiClient.HtmlToPdfRequest(); // HtmlToPdfRequest | HTML to PDF request parameters
input.Html = "<b>Hello, world!</b>";

var callback = function(error, data, response) {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
};
apiInstance.convertWebHtmlToPdf(input, callback); 
```

使用上述方法，您还可以根据需要在本地或您自己的基础架构上安装 API。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-10T05:38:14.950

使用**[html-pdf](https://www.npmjs.com/package/html-pdf)**

```
var fs = require('fs');
var pdf = require('html-pdf');
var html = fs.readFileSync('./test/businesscard.html', 'utf8');
var options = { format: 'Letter' };

pdf.create(html, options).toFile('./businesscard.pdf', function(err, res) {
  if (err) return console.log(err);
  console.log(res); // { filename: '/app/businesscard.pdf' } 
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-17T19:30:54.217

除了@Jozzhart Answer，还可以制作本地html；用快递送达；并使用 phantom 从中制作 PDF；像这样的东西：

```
const exp = require('express');
const app = exp();
const pth = require("path");
const phantom = require('phantom');
const ip = require("ip");

const PORT = 3000;
const PDF_SOURCE = "index"; //index.html
const PDF_OUTPUT = "out"; //out.pdf

const source = pth.join(__dirname, "", `${PDF_SOURCE}.html`);
const output = pth.join(__dirname, "", `${PDF_OUTPUT}.pdf`);

app.use("/" + PDF_SOURCE, exp.static(source));
app.use("/" + PDF_OUTPUT, exp.static(output));

app.listen(PORT);

let makePDF = async (fn) => {
    let local = `http://${ip.address()}:${PORT}/${PDF_SOURCE}`;
    phantom.create().then((ph) => {
        ph.createPage().then((page) => {
            page.open(local).then(() =>
                page.render(output).then(() => { ph.exit(); fn() })
            );
        });
    });
}

makePDF(() => {
    console.log("PDF Created From Local File");
    console.log("PDF is downloadable from link:");
    console.log(`http://${ip.address()}:${PORT}/${PDF_OUTPUT}`);
}); 
```

index.html 可以是任何东西：

```
<h1>PDF HEAD</h1>
<a href="#">LINK</a> 
```

结果：

[![在此处输入图像描述](../Images/23ef479c01e482127be2723c4c6af89a.png)](https://i.stack.imgur.com/Yly3n.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-26T13:37:36.683

[https://www.npmjs.com/package/dynamic-html-pdf](https://www.npmjs.com/package/dynamic-html-pdf)

我使用dynamic-html-pdf，这很简单，也可以将动态变量传递给html。

```
var html = fs.readFileSync('./uploads/your-html-tpl.html', 'utf8');
var options = {
    format: "A4",
    orientation: "portrait"
    // border: "10mm"
};
var document = {
    type: 'file',     // 'file' or 'buffer'
    template: html,
    context: {
       'your_key':'your_values'
    },
    path: '/pdf/1.pdf'   // pdf save path
};

pdf.create(document, options)
.then(res => {
    console.log(res)
}).catch(error => {
    console.error(error)
}); 
```

在 html 上你可以使用 {{your_key}}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-25T08:38:49.280

如果您来到这里寻找一种从 Express 中的视图模板制作 PDF 的方法，我和一位同事制作了[express-template-to-pdf](https://www.npmjs.com/package/@ministryofjustice/express-template-to-pdf)

它允许您从您在 Express 中使用的任何模板生成 PDF - Pug、Nunjucks 等等。

它依赖于 html-pdf 并且被编写成在你的路由中使用，就像你使用 res.render 一样：

```
const pdfRenderer = require('@ministryofjustice/express-template-to-pdf')

app.set('views', path.join(__dirname, 'views'))
app.set('view engine', 'pug')

app.use(pdfRenderer()) 
```

如果您使用过 res.render，那么使用它应该看起来很明显：

```
app.use('/pdf', (req, res) => {
    res.renderPDF('helloWorld', { message: 'Hello World!' });
}) 
```

您可以将选项传递给 html-pdf 以控制 PDF 文档页面大小等

仅仅建立在别人的优秀作品之上。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-30T11:49:32.353

```
const fs = require('fs')
const path = require('path')
const utils = require('util')
const puppeteer = require('puppeteer')
const hb = require('handlebars')
const readFile = utils.promisify(fs.readFile)

async function getTemplateHtml() {

    console.log("Loading template file in memory")
    try {
        const invoicePath = path.resolve("./invoice.html");
        return await readFile(invoicePath, 'utf8');
    } catch (err) {
        return Promise.reject("Could not load html template");
    }
}

async function generatePdf() {

    let data = {};

    getTemplateHtml()
        .then(async (res) => {
            // Now we have the html code of our template in res object
            // you can check by logging it on console
            // console.log(res)

            console.log("Compiing the template with handlebars")
            const template = hb.compile(res, { strict: true });
            // we have compile our code with handlebars
            const result = template(data);
            // We can use this to add dyamic data to our handlebas template at run time from database or API as per need. you can read the official doc to learn more https://handlebarsjs.com/
            const html = result;

            // we are using headless mode 
            const browser = await puppeteer.launch();
            const page = await browser.newPage()

            // We set the page content as the generated html by handlebars
            await page.setContent(html)

            // we Use pdf function to generate the pdf in the same folder as this file.
            await page.pdf({ path: 'invoice.pdf', format: 'A4' })

            await browser.close();
            console.log("PDF Generated")

        })
        .catch(err => {
            console.error(err)
        });
}

generatePdf(); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-10-23T18:13:02.477

您还可以使用 pdf 节点创建器包

包 URL - [https://www.npmjs.com/package/pdf-creator-node](https://www.npmjs.com/package/pdf-creator-node)

# python - Python 包和导入

> ID：14552117
> 
> 赞同：0
> 
> 时间：2013-01-27T20:50:22.287
> 
> 标签：python, packages

我想知道如果该目录不是包，是否可以从不是本地目录的目录中使用 python 中的 import 语句？另外，系统路径上的所有目录都必须是包吗？如果在系统路径中添加相对路径，它与什么相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:16:44.707

您可以更改 sys.path 以实现您要求的所有结果。

1.  **是的你可以。**添加一个不是本地目录的目录：

    ```
    import sys
    sys.path += '/your_path/your_subpath/'  # absolute paths
    import your_package 
    ```

    如果您需要从文件系统中的任意路径加载模块而不将其添加到 sys.path 您也可以使用[imp.load_module](http://docs.python.org/2/library/imp.html?highlight=__import__#imp.load_module)

2.  系统路径上的所有目录都必须是包吗？**不，他们没有**

3.  *如果在系统路径中添加相对路径，它与什么相关？*

    **到包含用于调用 Python 解释器的脚本的目录。** 但是，我建议以这种方式设置它：

    ```
    import sys,os
    sys.path.append(os.path.realpath('..')) 
    ```

    或从脚本的路径：

    ```
    import sys,os
    sys.path.append(os.path.realpath(os.path.join(os.path.dirname(sys.argv[0]), '..'))) 
    ```

    这两个示例也适用于交互式 shell。无论操作系统如何，这两个示例都确保相对路径是您的意思

    有关 python 中相对路径的更多详细信息，另请参阅[这篇文章](http://www.faqs.org/docs/diveintopython/regression_path.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:15:16.957

这真的是3个不同的问题：

> 我想知道如果该目录不是包，您是否可以从不是本地目录的目录中使用 python 中的 import 语句

是的你可以。

> 另外，系统路径上的所有目录都必须是包吗？

不，他们没有。

> 如果在系统路径中添加相对路径，它与什么相关？

相对于当前工作目录。

# neo4j - 有人在 JDK 7 中使用 Neo4j Embedded (v 1.8.x) 吗？

> ID：14552122
> 
> 赞同：1
> 
> 时间：2013-01-27T20:50:39.683
> 
> 标签：neo4j, java-7

我想知道是否有人在使用嵌入 Sun JDK 7 的 Neo4J 1.8.x？如果是这样，你有没有遇到任何问题，它们是什么？

让我再澄清一下，我不打算构建 Neo4J 源代码 - 仅在 Sun Java 7 上运行 Neo4j 1.8.1 Embedded。

我知道 Neo4j 1.9 是第一个支持 Java 7 的版本，但如果 Neo 1.8.1 在 Sun JDK 7 上运行没有任何问题，我们将考虑使用它进行部署。

使用 Java 7 有许多好处（即安全性等），但如果 Neo 1.8.1 存在兼容性问题，我们想找出答案。

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T07:54:40.850

Java 7 改变了内置的排序算法。新的排序算法（[TimSort](http://en.wikipedia.org/wiki/Timsort)）对并发修改更敏感。Java 6 和更早版本中的排序算法在面对并发修改时只会产生未完美排序的结果，TimSort 将抛出异常。

Neo4j`sort()`在其页面缓存中使用这些方法。

这些异常意味着 Neo4j 在 Java 7 上以多线程运行时会意外崩溃。

Neo 技术团队正在为 Neo4j 1.9 解决这个问题。

# android - 在android中解析复杂的json

> ID：14552123
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:50:46.353
> 
> 标签：android, json, parsing

我有这个json：

```
[{"id":"1","name":"john"},{"id":"2","name":"jack"},{"id":"3","name":"terry"}] 
```

我怎么能解析这个？我必须使用循环来提取每个组？对于简单的 jsons，我使用以下代码：

```
 public static String parseJSONResponse(String jsonResponse) {

    try {

         JSONObject  json = new JSONObject(jsonResponse);

           // get name & id here
         String  name = json.getString("name");
         String  id =  json.getString("id");

    } catch (JSONException e) {

        e.printStackTrace();
    }

    return name;
} 
```

但现在我必须解析我的新 json。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:57:31.670

这意味着由**JSONArray**解析，然后每个“记录”都是一个**JSONObject**。

您可以在数组上循环，然后使用[getString(int)](http://developer.android.com/reference/org/json/JSONArray.html#getString%28int%29)方法检索每条记录的 JSON 字符串。然后使用这个字符串构建一个**JSONObject**，并像现在一样提取值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T20:58:21.977

它应该是这样的：

```
public static String parseJSONResponse(String jsonResponse) {

try {

    JSONArray jsonArray = new JSONArray(jsonResponse);

    for (int index = 0; index < jsonArray.length(); index++) {
        JSONObject  json = jsonArray.getJSONObject(index);

        // get name & id here
        String  name = json.getString("name");
        String  id =  json.getString("id");
    } 

} catch (JSONException e) {

    e.printStackTrace();
}

return name;
} 
```

当然，您应该返回一个名称数组或任何您想要的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:03:49.487

您可以使用以下代码：

```
public static void parseJSONResponse(String jsonResponse) {

    try {

        JSONArray jsonArray = new JSONArray(jsonResponse);     
        if(jsonArray != null){
            for(int i=0; i<jsonArray.length(); i++){
                JSONObject json = jsonArray.getJSONObject(i);
                String  name = json.getString("name");
                String  id =  json.getString("id"); 
                //Store strings data or use it
            }
        }
    }catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

您需要修改循环以存储或使用数据。

希望能帮助到你。

# r - 在R中运行指定时间的函数

> ID：14552128
> 
> 赞同：2
> 
> 时间：2013-01-27T20:51:18.397
> 
> 标签：r

我正在尝试让函数运行指定的时间，此时我正在尝试使用该`system.time`函数。我不知道如何定义一个新变量来获取函数运行的累积值，然后将其放入 while 循环中。

```
timer<-(system.time(simulated_results<-replicate(n=1,simulation(J,10000,FALSE,0.1),simplify="vector"))[3])

print(timer)

while(cumsum(timer)<15){
    print(cumsum(timer)) 
    simulated_results<-replicate(n=10000,simulation(J,10000,FALSE,0.1),simplify="vector")
} 
```

我将不胜感激任何帮助！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:02:06.817

如果要在指定的秒数内运行某些代码，可以尝试以下操作：

```
start <- as.numeric(Sys.time())
duration <- 5
results <- NULL
while(as.numeric(Sys.time())-start < duration) {
  results <- c(results, replicate(...))
} 
```

当然，您必须更改`duration`（以秒为单位）的值，并`replicate(...)`用您的代码替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T19:02:12.437

您可以使用 tryCatch 方法来完成此任务。例如，考虑以下代码

```
fun_test = function(test_parameter){

  result <- 1+test_parameter #some execution
  return(result)
}
time = 10 #seconds
res <- NULL
tryCatch({
  res <- withTimeout({
    check = fun_test(tsp)
  }, timeout = time)
}, TimeoutException = function(ex) {
  message("Timeout. Skipping.")
}) 
```

该程序将运行函数 fun_test 10 秒。如果此时执行成功，则返回结果，否则程序停止。[如需更多指导，您可以通过类似 try() 的](https://stackoverflow.com/questions/7891073/time-out-an-r-command-via-something-like-try)方式关注此 URL Time out an R command

# java - 使用杰克逊的 JsonMappingException - 错误地将字段放在错误的类中

> ID：14552130
> 
> 赞同：0
> 
> 时间：2013-01-27T20:51:29.207
> 
> 标签：java, android, json, jackson, deserialization

所以我得到了一个 JsonMappingException ，我认为这是一个奇怪的错误：

> org.codehaus.jackson.map.exc.UnrecognizedPropertyException：无法识别的字段“CoTravellers”（JobPush 类），在 [Source: java.io.StringReader@416a60a0; 行：1，列：947]（通过参考链：>JobPush["CoTravellers"]）

现在，我所拥有的是：

```
ProtocolContainer --> JobPush (inherits from DataPacket) --> Job --> CoTravellers 
```

上面错误中提到的 JobPush 是 DataPacket 的子类。所以，ProtocolContainer 有一个 DataPacket，我有几个继承 DataPacket 的类，其中 JobPush 是其中之一。

JobPush 很简单，如下所示：

```
public class JobPush extends DataPacket 
{
    public Job Job;
} 
```

*并且 CoTravellers 字段存在于 Job 类中，而不是 JobPush 中*：

```
public class Job implements Serializable
{
    @JsonDeserialize(using=CustomMapCoTravellerDeserializer.class)
    public Map<Objects.CoTravellers, Integer> CoTravellers;

    // ....
} 
```

如您所见，我正在尝试使用自定义反序列化器（[请参阅此处以供参考](https://stackoverflow.com/questions/14543119/how-do-i-correctly-deserialize-net-dictionaries-using-jackson)）。

**现在，我无法理解为什么我会收到一条错误消息，提示 JobPush 中没有“CoTravellers”字段？我从来没有说过 CoTravellers 在 JobPush 中，因为它在 Job 类中。**

我正在解析的 JSON 看起来像这样（为了清楚起见，这被裁剪了一点，其中 SubPacket 是变量名称，保存 DataPacket，在这种情况下是 JobPush）：

```
"SubPacket":{
    "__type":"JobPush:#DataPackets.ToVehicle",
    "Job":{
    "CoTravellers":[
        {
           "Key":{
              "CoTravellerId":0,
              "Name":"Medresenär"
           },
           "Value":1
        }
     ]
     }
} 
```

有大佬能帮我介绍一下吗？=)

**---- 编辑 1 ----**

为了清晰起见，添加一些东西：

因此，类继承自“DataPacket”类，因此我使用了@JsonSubTypes 注释来处理它。这是 DataPacket 类：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property="__type")
@JsonSubTypes(
{
    @JsonSubTypes.Type(value = JobPush.class, name = "JobPush:#DataPackets.ToVehicle"),
})
public class DataPacket 
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:04:56.537

您谈论的是 CoTraveller 字段，但在 JSON 中它是 CoTravellers，末尾带有“s”。

# c - 理解指针 - c

> ID：14552132
> 
> 赞同：-3
> 
> 时间：2013-01-27T20:51:34.140
> 
> 标签：c, pointers

> **可能重复：**
> [理解指针的障碍是什么，可以做些什么来克服它们？](https://stackoverflow.com/questions/5727/what-are-the-barriers-to-understanding-pointers-and-what-can-be-done-to-overcome)

我对c和指针真的不熟悉，我想了解这里发生了什么：

```
typedef struct {
        int q[QUEUESIZE+1];
        int first;
        int last;
        int count;
} queue;
init_queue(queue *q)
{
        q->first = 0;
        q->last = QUEUESIZE-1;
        q->count = 0;
} 
```

是否正确认为： q->first = 0 意味着如果一个分配给 '0' 地址某个值 'val'，那么 *(q->first) 将返回 'val' ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T20:53:19.617

没有。 q->first = 0 将 0 分配给队列的属性 first。q 是一个指针，但 q->first 是一个 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:55:38.520

`q->first`是`(*q).first`
The parenthesis are necessary 因为`.`会在 the 之前进行评估`dereference *`，因为`q`是一个很好的指针`q.first == NOT A VALID THING`

* * *

`queue aQ;
init_queue(&aQ);`

该函数`init_queue`采用指向 a 的指针，`queue`而不是指向 a 的指针`int`。
该功能的作用是`initialize`使结构的所有领域以后都可以被其他功能使用。

# javascript - 如何在 NVD3 中更改 XTick 格式？

> ID：14552134
> 
> 赞同：0
> 
> 时间：2013-01-27T20:51:43.057
> 
> 标签：javascript, d3.js, nvd3.js

我想将小图表的 XTick 格式更改为日期。我有以下内容来自[此示例](http://nvd3.org/ghpages/lineWithFocus.html)：

```
function chart(div)
{
var testdata = loadData();
nv.addGraph(function() {

    var chart = nv.models.lineWithFocusChart();

    chart.xAxis.tickFormat(function(d) {
       var dx = testdata[0].values[d] && testdata[0].values[d].x || 0;
       return d3.time.format('%x')(new Date(dx))
     });

    chart.yAxis
        .tickFormat(d3.format(',.2f'));

   chart.y2Axis
       .tickFormat(d3.format(',.2f'));

   d3.select(div + ' svg')
       .datum(loadData())
     .transition().duration(500)
       .call(chart);

   nv.utils.windowResize(chart.update);

   return chart;
 });
 } 
```

但迄今为止，只有大图表的格式发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:26:27.623

有两种方法可以固定第二个 x 轴的刻度。

第一种方法是也`tickFormat`为第二个轴显式设置。这种设计遵循一次设置一个属性的传统范例。

```
var xFormat = function(d) {
   var dx = testdata[0].values[d] && testdata[0].values[d].x || 0;
   return d3.time.format('%x')(new Date(dx));
};

chart.xAxis.tickFormat(xFormat);
chart.xAxis2.tickFormat(xFormat); 
```

第二种避免代码重复的方法是使用`chart`API 公开的特殊函数将两个轴设置在一起：

```
// This would set both the axis simultaneously
chart.xTickFormat(xFormat); 
```

这个函数出现在代码中（[这里介绍](https://github.com/novus/nvd3/commit/ef3a7aefb0aab9786ab6d5b8c58c19370d8e0b46#L2R336)）正是为了这个目的。但是，由于 API 不是很稳定，以后可能会被删除。

# php - bindParam 插入到表中

> ID：14552136
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:51:52.050
> 
> 标签：php, pdo

我已经在这件事上编码了几个小时，所以我想我在这里遗漏了一些非常简单的东西，但我似乎找不到它。

我收到这两个错误

> 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens on line 77
> 
> 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens on line 79

```
public function resetPassword($password, $email){
    $rst    =   $this->db->prepare("insert into users (password) values (?) where email=? ");
    $rst->bindParam('?', $password);
    $rst->bindParam('?', $email);
    $rst->execute();

    if($rst->execute()){
        return "Password changed!"; 
    }
    else echo "Could not change password.";
} 
```

我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:56:50.033

当使用问号作为占位符时，您将一个数组发送到 execute 方法，如下所示：`$rst->execute(array('placeholder1value', 'placeohlder2value'));`

但是，如果您想使用命名占位符，您可以 bindParam/bindValue 它们，如下所示：

```
$stmt = $pdo->prepare('INSERT INTO table (key1, key2) VALUES (:key1, :key2)');
$stmt->bindValue(':key1', 'somevalue', PDO::PARAM_STR);
$stmt->bindValue(':key1', 3532, PDO::PARAM_INT);
$stmt->execute(); 
```

`bindParam`请阅读和之间的区别`bindValue`

另请注意，您的 SQL 查询没有意义，您的意思是执行`UPDATE`?

# python - Python ElementTree find() 使用通配符？

> ID：14552138
> 
> 赞同：3
> 
> 时间：2013-01-27T20:51:55.417
> 
> 标签：python, find, wildcard, elementtree

我正在解析 python 中的 XML 提要以提取某些标签。我的 XML 包含命名空间，这导致每个标签都包含一个命名空间，后跟标签名称。

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:rte="http://www.rte.ie/schemas/vod">
    <id>10038711/</id>
    <updated>2013-01-24T22:52:43+00:00</updated>
    <title type="text">Reeling in the Years</title>
    <logo>http://www.rte.ie/iptv/images/logo.gif</logo>
    <link rel="self" type="application/atom+xml" href="http://feeds.rasset.ie/rteavgen/player/playlist?type=iptv&amp;showId=10038711" />
    <category term="feed"/>
    <author>
        <name>RTE</name>
        <uri>http://www.rte.ie</uri>
    </author>
    <entry>
        <id>10038711</id>
        <published>2012-07-04T12:00:00+01:00</published>
        <updated>2013-01-06T12:31:25+00:00</updated>
        <title type="text">Reeling in the Years</title>
        <content type="text">National and international events with popular music from the year 1989.First Broadcast: 08/11/1999</content>
        <category term="WEB Exclusive" rte:type="channel"/>
        <category term="Classics 1980" rte:type="genre"/>
        <category term="rte player" rte:type="source"/>
        <category term="" rte:type="transmision_details"/>
        <category term="False" rte:type="copyprotectionoptout"/>
        <category term="long" rte:type="form"/>
        <category term="3275" rte:type="progid"/>
        <link rel="site" type="text/html" href="http://www.rte.ie/tv50/"/>
        <link rel="self" type="application/atom+xml" href="http://feeds.rasset.ie/rteavgen/player/playlist/?itemId=10038711&amp;type=iptv&amp;format=xml" />
        <link rel="alternate" type="text/html" href="http://www.rte.ie/player/#v=10038711"/>
        <rte:valid start="2012-07-23T15:56:04+01:00" end="2017-08-01T15:56:04+01:00"/>
        <rte:duration ms="842205" formatted="0:10"/>
        <rte:statistics views="19"/>
        <rte:bri id="na"/>
        <rte:channel id="13"/>
        <rte:item id="10038711"/>
        <media:title type="plain">Reeling in the Years</media:title>
        <media:description type="plain">National and international events with popular music from the year 1989\. First Broadcast: 08/11/1999</media:description>
        <media:thumbnail url="http://img.rasset.ie/00062efc200.jpg" height="288" width="512" time="00:00:00+00:00"/>
        <media:teaserimgref1x1 url="" time="00:00:00+00:00"/>
        <media:rating scheme="http://www.rte.ie/schemes/vod">NA</media:rating>
        <media:copyright>RTÉ</media:copyright>
        <media:group rte:format="single">
            <media:content url="http://vod.hds.rasset.ie/manifest/2012/0728/20120728_reelingint_cl10038711_10039316_260_.f4m" type="video/mp4" medium="video" expression="full" duration="842205" rte:format="content"/>
        </media:group>
        <rte:ads>
            <media:content url="http://pubads.g.doubleclick.net/gampad/ads?sz=512x288&amp;iu=%2F3014%2FP_RTE_TV50_Pre&amp;ciu_szs=300x250&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=xml_vast2&amp;unviewed_position_start=1&amp;url=[referrer_url]&amp;correlator=[timestamp]" type="text/xml" medium="video" expression="full" rte:format="advertising" rte:cue="0" />
            <media:content url="http://pubads.g.doubleclick.net/gampad/ads?sz=512x288&amp;iu=%2F3014%2FP_RTE_TV50_Pre2&amp;ciu_szs=300x250&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=xml_vast2&amp;unviewed_position_start=1&amp;url=[referrer_url]&amp;correlator=[timestamp]" type="text/xml" medium="video" expression="full" rte:format="advertising" rte:cue="0" />
            <media:content url="http://pubads.g.doubleclick.net/gampad/ads?sz=512x288&amp;iu=%2F3014%2FP_RTE_TV50_Pre3&amp;ciu_szs=300x250&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=xml_vast2&amp;unviewed_position_start=1&amp;url=[referrer_url]&amp;correlator=[timestamp]" type="text/xml" medium="video" expression="full" rte:format="advertising" rte:cue="0" />
        </rte:ads>
    </entry>
<!-- playlist.xml -->
</feed> 
```

解析 XML 时，每个元素都显示为：

```
{http://www.w3.org/2005/Atom}id
{http://www.w3.org/2005/Atom}published
{http://www.w3.org/2005/Atom}updated
.....
.....
{http://www.rte.ie/schemas/vod}valid
{http://www.rte.ie/schemas/vod}duration
....
....
{http://search.yahoo.com/mrss/}description
{http://search.yahoo.com/mrss/}thumbnail
.... 
```

因为我有 3 个不同的命名空间，我不能保证它们总是相同的，所以我不想像这样硬指定每个标签：

```
for elem in tree.iter({http://www.w3.org/2005/Atom}entry'):
    stream = str(elem.find('{http://www.w3.org/2005/Atom}id').text)
    date_tmp = str(elem.find('{http://www.w3.org/2005/Atom}published').text)
    name_tmp = str(elem.find('{http://www.w3.org/2005/Atom}title').text)
    short_tmp = str(elem.find('{http://www.w3.org/2005/Atom}content').text)
    channel_tmp = elem.find('{http://www.w3.org/2005/Atom}category', "channel")
    channel = str(channel_tmp.get('term'))
    icon_tmp = elem.find('{http://search.yahoo.com/mrss/}thumbnail')
    icon_url = str(icon_tmp.get('url')) 
```

有什么方法可以将通配符或类似的东西放入 find 中，这样它就会简单地忽略命名空间？

```
stream = str(elem.find('*id').text) 
```

我可以像上面那样对它们进行硬编码，但是我很幸运，命名空间会改变并且我的查询停止返回数据。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:33:20.877

您可以将 XPath 表达式与 local-name() 函数一起使用：

```
<?xml version="1.0"?>
<root xmlns="ns">
  <tag/>
</root> 
```

假设“doc”是上述 XML 的 ElementTree：

```
import lxml.etree
doc = lxml.etree.parse(<some_file_like_object>)
root = doc.getroot()
root.xpath('//*[local-name()="tag"]')
[<Element {ns}tag at 0x7fcde6f7c960>] 
```

适当替换`<some_file_like_object>`（或者，您可以使用`lxml.etree.fromstring`XML 字符串直接获取`root`元素）。

# android - 在自定义视图之间共享布局尺寸？

> ID：14552140
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:52:18.057
> 
> 标签：android, layout, dimensions, custom-view

所以我有两个自定义视图。我需要知道我的自定义视图的像素尺寸，我通过以下方式得到它：

```
 protected void onSizeChanged(int xNew, int yNew, int xOld, int yOld)
    {
        width_dimension = xNew; // << this is the field i need to share
        super.onSizeChanged(xNew, yNew, xOld, yOld);
    } 
```

我有另一个自定义视图，我需要在其中传递字段“width_dimension”。这样做的正确方法是什么？我尝试在我的活动的 onCreate() 方法中传递信息，但它在我的自定义视图的 onSizeChanged() 之前被调用，因此该字段未定义。我还尝试传入 onSizeChanged() 方法（上图），但我的 OTHER 自定义视图尚未由 xml 布局实例化（引发空指针异常）。

覆盖 onSizeChanged() 方法是否是确定视图宽度的正确方法（它在 xml 中设置为 wrap_content）？以及如何将此信息共享到另一个自定义视图？

对不起，如果这个问题不是很清楚。很难解释，我面临的问题是我需要知道我的所有自定义视图何时被实例化和布局，以便我可以在它们之间交换维度信息（在运行时确定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:04:47.500

您可以使用维度，请参见此处： http: [//developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)如果您在 xml 中实现了自定义视图，则很有用。您还可以将维度加载到像这样的代码：

```
Resources res = context.getResources(); // you can use application or activity context for this
float customWidth = res.getDimension(R.dimen.custom_width); 
```

我希望它有帮助！

**编辑**

所以这似乎有帮助：

```
yourlayout.getViewTreeObserver().addOnGlobalLayoutListener(ViewTreeObserver.OnGl‌​obalLayoutListener yourCustomListener); 
```

在视图被测量和绘制之后，回调将被调用。此外，我建议在调用回调后从视图中删除侦听器以避免无用的调用。

# javascript - typeof a === '未定义'

> ID：14552144
> 
> 赞同：1
> 
> 时间：2013-01-27T20:52:50.833
> 
> 标签：javascript

> **可能重复：**
> [variable === undefined vs. typeof variable === “undefined”</a>](https://stackoverflow.com/questions/4725603/variable-undefined-vs-typeof-variable-undefined)
> 
> [](https://stackoverflow.com/questions/4725603/variable-undefined-vs-typeof-variable-undefined)

 [假设`undefined`没有被篡改，下面是等价的吗？

```
typeof a === 'undefined' 
```

和

```
a === undefined 
```

?](https://stackoverflow.com/questions/4725603/variable-undefined-vs-typeof-variable-undefined) 

[[我问的原因是因为](https://stackoverflow.com/questions/4725603/variable-undefined-vs-typeof-variable-undefined)[Parsley.js](https://raw.github.com/guillaumepotier/Parsley.js/master/parsley.js)的作者似乎喜欢写作`'undefined' !== typeof someExpression`。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T20:55:45.437

这两种方法几乎相同，除了一个：如果变量未定义为变量，`typeof`则不会引发。`ReferenceError: a is not defined``a`

说，`typeof`方法只是更加万无一失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:54:30.877

`undefined`是的，如果没有被篡改，它们是等效的。`typeof`与 undefined 直接比较相比，唯一的原因是因为`undefined`可以重新定义为其他任何东西，例如`undefined = 5`. 同样正如 VisioN 所指出的，`ReferenceError`当您不检查函数参数的上下文而是检查是否`a`是时，a 可以引发 a `defined globally`。为了`ReferenceError`在全局上下文中直接与 undefined 进行比较时不会得到 a ，您需要执行：

```
window.a === undefined 
```

# jquery - jQuery - 在动画悬停之前隐藏元素

> ID：14552145
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:52:55.627
> 
> 标签：jquery, jquery-animate

当我将鼠标悬停在特定元素上时，我目前正在使用这个小 jQuery 片段来淡入/淡出 div。

```
$(".wall-block-content").hover(function(){
    $(this).stop().animate({'opacity':'1'},300); //stop for preveting conflict
},function(){
    $(this).stop().animate({'opacity':'0'},300); //100 for time/speed
}); 
```

除了“.wall-block-content” div 在页面加载时可见之外，它工作正常，当我需要隐藏它时。

以下是一些示例标记，以防万一；

```
<div class="grid-block">

   <img src="images/thumbnail.jpg"/>

    <div class="wall-block-content">

        <!-- SOME FANCY CONTENT HERE -->

    </div><!--/.wall-block-content-->

</div><!--/.grid-block--> 
```

因此，基本上在页面加载时可见的所有内容都是 thumbnail.jpg 图像，然后当有人将鼠标悬停在该图像上时， .wall-block-content div 会淡入它上面......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:06:36.983

使用`fadeIn()`and`fadeOut()`会更好。

```
$('#imgtest').hover(function(){
    $('.wall-block-content').fadeIn('slow');

},function(){
    $('.wall-block-content').fadeOut('slow');
}); 
```

[演示](http://jsfiddle.net/ew4xq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T20:56:49.237

为什么不使用 jQuery 函数 .fadeIn() 和 .fadeOut()？

[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)
[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

对于您的问题：
`.wall-block-content { display: none; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:10:05.740

CSS：

```
.wall-block-content {display:none} 
```

jQuery：

```
$('#imgtest').hover(function(){
    $('.wall-block-content').fadeToggle();
}); 
```

您还可以添加像 fadeToggle('slow') 这样的持续时间

# php - php输出缓冲和休眠

> ID：14552148
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:53:03.267
> 
> 标签：php, sleep, buffering

我想让php加载一个网页，等待一分钟，然后加载另一个页面..问题是，php在睡眠之前不输出第一页并将第二页输出到屏幕......

这是我的代码：

```
<?php
header("Location: http://www.paylesstitleloans.com/");
sleep(60);
header("Location: http://www.paylesstitleloans.com/faq.html");
?> 
```

使用这样的函数对我有帮助吗：ob_start(); ob_flush();

我需要在睡觉前在浏览器上显示第一页。任何帮助都会很棒！谢谢你。杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:56:11.793

您需要在客户端使用某些东西（Javascript、元刷新、iFrames）来完成此操作。

相关主题：

*   [jquery 函数将 html 代码加载到 div 中，然后将其他内容加载到 html 内的 div 中加载](https://stackoverflow.com/questions/9394066/jquery-function-that-load-html-code-into-a-div-and-then-load-other-content-into)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T20:58:46.997

页面加载后，您不能使用 php 中的标头。但是，您可以在一定时间后使用元标记进行重定向。请参考下面的元示例。

```
<meta http-equiv="refresh" content="60;url=http://www.paylesstitleloans.com/faq.html/" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T21:02:25.273

您不能使用 http 标头中的位置来执行此操作，因为您只能发送一次。您必须使用带有超时功能的javascript。

在第一页包含这个脚本就可以了：

```
<script type="text/JavaScript">
<!--
redirectTime = "60";
redirectURL = "http://www.paylesstitleloans.com/faq.html";
function timedRedirect() {
    setTimeout("location.href = redirectURL;",redirectTime);
}
//   -->
</script> 
```

# objective-c - 将标量添加到向量

> ID：14552149
> 
> 赞同：0
> 
> 时间：2013-01-27T20:53:07.763
> 
> 标签：objective-c, vector

假设我有一个现有的向量 x：

```
float x[4] = {1.0f, 2.0f, 4.0f, 8.0f}; 
```

如何生成另一个与 x 完全相同但标量 1.0 在前面位置的向量，从而生成一个 5 元素向量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:55:57.957

也许是这样的：

```
float y[5];
y[0] = 1.0f;
memcpy(&y[1], x, sizeof(x)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:55:59.037

`memcpy`可以为你做：

```
float y[5] = { 1.0f };
memcpy(y + 1, x, sizeof x); 
```

# ios - AdBannerView 中的 iAd 错误

> ID：14552150
> 
> 赞同：0
> 
> 时间：2013-01-27T20:53:09.630
> 
> 标签：ios, ios5, admob, iad

我有一个仅包含广告的测试应用程序，用于测试设置。它设置为使用 admob 中介服务，将 iAd 和 admob 广告发送到设备。

我看到发生以下错误：

> [AppDeveloper]：ADBannerView：未处理的错误（没有委托或委托未实现 didFailToReceiveAdWithError:)：错误域 = ADErrorDomain Code = 3“操作无法完成。广告库存不可用” UserInfo = 0x9f82850 {ADInternalErrorCode = 3，ADInternalErrorDomain = ADErrorDomain, NSLocalizedFailureReason=广告资源不可用}

奇怪的错误，因为我已经实现了 didFailToReceiveAdWithError 的方法，这是我完整的 imp 代码。

```
- (void)viewDidLoad {
[super viewDidLoad];

// Create a view of the standard size at the top of the screen.
// Available AdSize constants are explained in GADAdSize.h.
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

// Specify the ad's "unit identifier." This is your AdMob Publisher ID.
bannerView_.adUnitID = kAdMobPublisherID;

// Let the runtime know which UIViewController to restore after taking
// the user wherever the ad goes and add it to the view hierarchy.
bannerView_.rootViewController = self;
[self.view addSubview:bannerView_];

// Initiate a generic request to load it with an ad.
[bannerView_ loadRequest:[GADRequest request]];
bannerView_.delegate = self;
bannerView_.backgroundColor = [UIColor blueColor];

GADRequest *request = [GADRequest request];
// Make the request for a test ad. Put in an identifier for
// the simulator as well as any devices you want to receive test ads.
request.testDevices = [NSArray arrayWithObjects:
                       @"4D047EB9-A3A7-441E-989E-C5437F05DB04",
                       @"YOUR_DEVICE_IDENTIFIER",
                       nil];

}

- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error;
{
    NSLog(@"Error - did Fail to Receive an Ad");
    bannerView_.hidden = YES;

}

- (void)adViewDidReceiveAd:(GADBannerView *)view;
{
    NSLog(@"Ad Received");
    bannerView_.hidden = NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:25:14.200

尝试放在`return self;`方法的末尾，以便委托接收错误

# php - 检查记录是否存在，如果找到或创建，则返回其 ID？

> ID：14552157
> 
> 赞同：-3
> 
> 时间：2013-01-27T20:53:30.913
> 
> 标签：php, mysql, insert, ezsql

> **可能重复：**
> [标准化数据库插入](https://stackoverflow.com/questions/14551847/normalized-db-insertions)

是否可以执行单个查询来查找记录并返回它的 ID 或插入它并返回它的 ID？这是我认为可能适用于此的方法：

```
INSERT INTO firstname (id, name) VALUES (NULL,'$name') 
ON DUPLICATE KEY UPDATE name ='$name', id=LAST_INSERT_ID(id) 
```

如果它有帮助，我正在使用 ezSQL 并且可以做一个`$db->query("...");`then an`$id = $db->insert_id;`来获取插入 id 并在变量中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:56:02.340

您可以编写自己的存储过程来检查现有记录。

1.  尝试通过其 id 检索记录
2.  检查是否为空，插入
3.  否则你得到了行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T20:58:22.810

我不确定我是否了解您需要什么。

在调用 INSERT INTO ... ON DUPLICATE KEY UPDATE ... 您只需要从数据库中获取 last_insert_id() 就可以了。

# html - 使用多个最小高度 100% div 时防止单个页面上的 div 重叠

> ID：14552158
> 
> 赞同：0
> 
> 时间：2013-01-27T20:53:31.177
> 
> 标签：html, css

我有一个在容器 div 中使用多个 div 的单页网站。每一个的高度都设置为 100% 的最小高度。这可以正常工作，直到其中一个 div 内的内容大于浏览器分辨率 - 内容与边框 div 重叠。我试图添加 position:relative 到容器， position:absolute 到孩子，但这会导致除了底部 div 之外的所有内容都消失了。

我将以下内容放在一起来证明我在说什么：

HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
    <body>
        <div id="container">
            <!-- Content -->
            <div id="content">
                <h1>content</h1>
            </div>
            <!-- About -->
            <div id="about">
                <h1>about</h1>
            <!-- Contact -->
            <div id="contact">
            </div>
        </div>
    </body>
</html> 
```

CSS

```
html, body{height:100%;min-height:100%;min-width:60.000em;font-size:30px;}
#container{
    width:100%;
    min-height:100%;
    margin:auto;
    padding:auto;
    height:100%;
    position:relative;
}
#content, #about, #contact {
    position: absolute;
}
#content{
    min-height: 100%;
    height:100%;
    background-color:red;
}
#about{
    min-height: 100%;
    background-color:blue;
}
#contact {
    min-height: 100%;
    background-color:yellow;
} 
```

这是在行动：http: [//jsfiddle.net/s62nr/1/](http://jsfiddle.net/s62nr/1/)

如果我删除相对/绝对定位，大小很好，但内容重叠：http: [//jsfiddle.net/s62nr/2/](http://jsfiddle.net/s62nr/2/)

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:06:30.880

发现了问题（当我提出问题时似乎总是会发生这种情况^^）。

问题在于我将子 div 高度设置为 100%。这需要删除：

从：

```
#content{
    min-height: 100%;
    height:100%;
    background-color:red;
} 
```

至：

```
#content{
    min-height: 100%;
    background-color:red;
} 
```

我强迫内容占据浏览器高度的 100%。这阻止了 div 像它应该的那样自动扩展。

# python - 我应该如何创建基于另一个类的 SQLAlchemy 模型？

> ID：14552161
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:53:43.457
> 
> 标签：python, sqlalchemy

我有一个普通的班级`Something`，基本上只包含一些领域。我需要创建一个`SomethingModel`代表类似对象的 SQLAlchemy 模型（在 ORM 中）`Something`，并带有几个额外的字段（例如，主键）。最好的方法是什么？

到目前为止，我一直在考虑`SomethingModel`继承 from `Something`，但后来我使用了我听说不好的多重继承（`SomethingModel`将继承 from`Something`和 SQLAlchemy's `Base`）。我还认为我可以简单地`Something.__init__`从内部调用`SomethingModel.__init__`——这样会更好吗？

我知道我仍然需要 SQLAlchemy 的列字段`Something`来保存我想要保存的字段`SomethingModel`。这似乎也让事情变得有点混乱。

实现这一目标的“最佳”方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:18:09.873

为您的班级使用[经典映射](http://docs.sqlalchemy.org/en/latest/orm/mapper_config.html)

# android - 如何打开我的应用程序包中的文本文件？

> ID：14552163
> 
> 赞同：0
> 
> 时间：2013-01-27T20:53:45.530
> 
> 标签：android, eclipse, file-io, java-io

使用 Eclipse、Android SDK。

我有一个包含我需要拉入的数据的文本文件。（现在，这是更简单的方法，最终我需要从 URL 中抓取动态数据，但现在我有我需要的测试数据此文本文件）。

我创建了一个类来打开这个文件，但无论我如何尝试打开它，我都会遇到“找不到文件”异常。

我尝试将我的“data.txt”文件放在各种相对路径中（在我的应用程序中）：
-“/AppName/”
-“/AppName/src/com/example/appname/data.txt”

我试过传递不同的相对路径。我尝试将文本文件放在试图打开它的 .java 类文件的同一路径中，但它仍然找不到它！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:00:56.083

> 我究竟做错了什么？

您有两个主要选项可以选择将此文件存储在项目目录中的位置：`assets/`和`res/raw/`.

如果您使用`assets/`，您可以调用`getAssets()`您的`Activity`（或其他`Context`），并在那里调用`open()`其中的相对路径`assets/`以获取`InputStream`该文件的一个（例如，`assets/data.txt`将通过 访问`getAssets().open("data.txt")`）。

如果您使用`res/raw/`，您可以调用`getResources()`您的`Activity`（或其他`Context`），并在那里调用，根据您的文件名`openRawResource()`传入值（例如，将通过 访问）。`R.raw``res/raw/data.txt``getResources().openRawResource(R.raw.data)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:00:14.653

使用 /res/raw 目录。我从原始读取声音文件：

```
InputStream soundFile1 = context.getResources().openRawResource(soundOneId); 
```

其中 context 是传递给类的活动的基本上下文。 [http://developer.android.com/reference/android/content/Context.html](http://developer.android.com/reference/android/content/Context.html)

# jquery - 引用对象元素名称而不是内容

> ID：14552165
> 
> 赞同：-1
> 
> 时间：2013-01-27T20:54:09.300
> 
> 标签：jquery, regex, arrays, object, match

下面是一个包含正则表达式的对象，这些正则表达式在下面的函数中用于在要在数组中找到的某些字符串中查找匹配项。

如果是匹配，我想要检查匹配是否是车祸（即对象中最后一个元素的匹配）。

在第 27 行，我尝试这样做，但这不起作用，因为 INCIDENT_MATCHES[type] 指的是对象元素的内容（即正则表达式），而不是元素的名称（trafficAccidents）。

我写什么来引用元素名称而不是它的内容？

```
 1\. var INCIDENT_MATCHES = {
 2\.     battery: /\w*(bråk)\w*|överfall|slagsmål|slogs|misshandel|misshandlad|\w*(tjuv)\w*/ig,
 3\.     burglaries: /snattade|snattare|snatta|inbrott|bestulen|stöld|\w*(tjuv)\w*/ig,
 4\.     robberies: /\w*(rån)\w*|personrån|\w*(ryckning)\w*|väskryckt*/ig,
 5\.     gunfire: /skottlossning|skjuten|sköt/ig,
 6\.     drugs: /narkotikabrott/ig,
 7\.     vandalism: /skadegörelse|klotter|\w*(klottra)\w*/ig,
 8\.     trafficAccidents: /(trafik|bil)olycka|(trafik|bil)olyckor|\w*(personbil)\w*|singelolycka|kollision|\w*(kollidera)\w*|påkörd|trafik|smitningsolycka/ig,
 9\. };
10.
11\. function FindIncidents(incidentReports) {
12.
13\.     var incidentCounts = {};
14\.     var incidentTypes = Object.keys(INCIDENT_MATCHES);
15\.     incidentReports[2].forEach(function(incident) {
16\.         matchFound = false;
17.
18\.         incidentTypes.forEach(function(type) {
19\.             if(typeof incidentCounts[type] === 'undefined') {
20\.                 incidentCounts[type] = 0;
21\.             }
22\.             var matchFound = incident.match(INCIDENT_MATCHES[type]);
23\.             if(matchFound){
24\.                 matchFound = true;
25\.                 incidentCounts[type] += 1;
26\.                 console.log(INCIDENT_MATCHES[type]); // refers to the elements content, not the name which I want.
27\.                 if (INCIDENT_MATCHES[type] == 'trafficAccidents') {
28\.                     //
29\.                 }
30              }
31\.         });
32\.     });
33\.  }
34.
35\.    FindIncidents(arrayWithStringsToMatch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:58:51.757

> 我写什么来引用元素名称而不是它的内容？

只是`type`。

# opencv - opencv_traincascade 总是卡住

> ID：14552167
> 
> 赞同：3
> 
> 时间：2013-01-27T20:54:20.367
> 
> 标签：opencv, cascade

我正在尝试使用 OpenCV 的 opencv_traincascade 来生成 Haar Cascade。到目前为止，我有 87 个独特的阳性样本和 39 个阴性样本用于测试目的。我用 opencv_createsamples 生成了 .vec 文件，效果很好。当我运行 opencv_traincascade 时，无论我如何更改参数，它总是在几个阶段后卡住。我的电话看起来像这样：

```
opencv_traincascade -data /opencvimgs/haarcascades/data/ -vec /opencvimgs/haarcascades/out.vec -bg /opencvimgs/haarcascades/neg.txt -numPos 87 -numNeg 39 
```

我尝试增加和减少 minHitRate 和 maxFalseAlarmRate 以及 numPos 和 numNeg 没有任何成功。它可能会运行几个阶段，但随后它似乎再次陷入无限循环。我该如何解决这个问题？

下面的输出是程序写入控制台的内容：

```
opencv_traincascade -data /opencvimgs/haarcascades/data/ -vec 
/opencvimgs/haarcascades/out.vec -bg /opencvimgs/haarcascades/neg.txt -numPos 87 -numNeg 39
PARAMETERS:
cascadeDirName: /opencvimgs/haarcascades/data/
vecFileName: /opencvimgs/haarcascades/out.vec
bgFileName: /opencvimgs/haarcascades/neg.txt
numPos: 87
numNeg: 39
numStages: 20
precalcValBufSize[Mb] : 256
precalcIdxBufSize[Mb] : 256
stageType: BOOST
featureType: HAAR
sampleWidth: 24
sampleHeight: 24
boostType: GAB
minHitRate: 0.995
maxFalseAlarmRate: 0.5
weightTrimRate: 0.95
maxDepth: 1
maxWeakCount: 100
mode: BASIC

===== TRAINING 0-stage =====
<BEGIN
POS count : consumed   87 : 87
NEG count : acceptanceRatio    39 : 1
Precalculation time: 1
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|        0|
+----+---------+---------+
END>

===== TRAINING 1-stage =====
<BEGIN
POS count : consumed   87 : 87
NEG count : acceptanceRatio    39 : 0.0697674
Precalculation time: 1
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|        0|
+----+---------+---------+
END>

===== TRAINING 2-stage =====
<BEGIN
POS count : consumed   87 : 87
NEG count : acceptanceRatio    39 : 0.00945455
Precalculation time: 1
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|        0|
+----+---------+---------+
END>

===== TRAINING 3-stage =====
<BEGIN
POS count : consumed   87 : 87
NEG count : acceptanceRatio    39 : 0.000326907
Precalculation time: 1
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|        0|
+----+---------+---------+
END>

===== TRAINING 4-stage =====
<BEGIN
POS count : consumed   87 : 87 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:47:25.200

一个可能的答案是您使用的负样本太少。阅读 OpenCV 文档中的说明以及 Viola 和 Jones 的参考论文。他们使用级联分类器通过每次消除部分负样本来实现高精度和低误报。如果你使用的负样本太少，它首先会破坏级联分类器的目的。请注意，在实际使用中，系统中没有人脸的图像比有人脸的图像要多得多。

# jquery - 谁能告诉我这个悬停效果是什么？

> ID：14552168
> 
> 赞同：0
> 
> 时间：2013-01-27T20:54:22.467
> 
> 标签：jquery, html, jquery-ui, css

我正在查看此页面（[http://montreal.ubisoft.com/en/ubisoft-our-news](http://montreal.ubisoft.com/en/ubisoft-our-news)），并且我还注意到在其他页面上，当您将鼠标悬停在某些按钮上时，我访问过此悬停效果。我想知道这是如何完成的，css3 还是 JqueryUI？如果可能的话，有人可以将我链接到 tut 或插件（如果 Jquery）谢谢；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:58:06.180

**HTML**

```
<input type="button" id="myButton" value="welcome to stackoverflow"/> 
```

**CSS**

```
#myButton
{
    background-color:blue;
}
#myButton:hover
{
    background-color:red;
} 
```

选择你的[颜色](http://www.w3schools.com/tags/ref_colorpicker.asp)

**确切的效果**

**HTML**

```
 <div id="parentDiv">
        <a id="myButton" href="">Welcome to StackOverflow</a>
        <div id="transparentDiv"></div>
    </div> 
```

**CSS**

```
#parentDiv
{
    position:relative;
    overflow:hidden;
}
#myButton
{
    display:block;
    height:70px;
    font-size:20px;
    text-decoration:none;
    text-align:center;
    color:white;
    background-color:red;
}
#transparentDiv
{
    position:absolute;
    top:0px;
    bottom:0px;
    right:0px;
    left:0px;
    background-color:black;
    opacity:0.7;
} 
```

**jQuery**

```
$("#parentDiv").mouseenter(function(e){
    $("#transparentDiv").slideUp(500);
});
$("#parentDiv").mouseleave(function(e){
    $("#transparentDiv").slideDown(500);
}); 
```

看看：http: [//jsfiddle.net/AliBassam/AzmUp/](http://jsfiddle.net/AliBassam/AzmUp/)

# python - Pytables。如何迭代唯一值？

> ID：14552169
> 
> 赞同：3
> 
> 时间：2013-01-27T20:54:24.547
> 
> 标签：python, pytables

我在 Pytables 中有一个数据集，看起来像

```
class myData(IsDescription):
    date = StringCol(16)
    item = Int32Col() 
```

我在同一日期有多个项目，例如：

```
'2010-01-01', 5
'2010-01-01', 6
'2010-01-02', 7
'2010-01-02', 8 
```

有没有办法遍历唯一日期，然后遍历日期中的项目？我的意思是

```
for date in DATE
    print date
     for ITEM
         print item 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T21:05:49.000

我不熟悉 Pytables 的内部工作（因此这可能与您要查找的内容不相符），但模块中的`groupby`函数在`itertools`这些类型的情况下非常有用（请注意下面的排序步骤 - 这在这种情况下很重要，以便对`groupby`具有相同日期的所有项目进行分组。有关更多信息，请参见[此处](http://docs.python.org/2/library/itertools.html#itertools.groupby)。）：

```
In [1]: from itertools import groupby

In [2]: from operator import attrgetter

In [3]: class myData(object):
    def __init__(self, date, item):
        self.date = date
        self.item = item
   ...:         

In [4]: l = [myData('2012-01-01', 'thing'), myData('2012-01-01', 'another thing'), myData('2013-01-01', 'and another')]

In [5]: l_sorted = sorted(l, key=attrgetter('date'))

In [6]: for date, my_objects in groupby(l_sorted, key=attrgetter('date')):
   ...:     print date
   ...:     for obj in my_objects:
   ...:         print obj.item
   ...:         
2012-01-01
thing
another thing
2013-01-01
and another 
```

这里的基本模式是获取一个包含要分组的对象的列表/容器。然后，您根据我们稍后将分组的属性（在本例中为`date`）对该列表进行排序。然后将该排序列表传递给`groupby`函数，该函数将在每次迭代中发出两个值 - 一个`key`表示您分组的值（因此这里它将是`date`每个组的值）和一个`group`包含所有共享对象的迭代器那把`date`钥匙。然后，您可以遍历该组，提取`item`每个对象的属性。

# javascript - jquery-在两个表之间传递值

> ID：14552177
> 
> 赞同：0
> 
> 时间：2013-01-27T20:54:57.927
> 
> 标签：javascript, jquery, html

我有一个表，我需要在单击按钮后从其他表（从该表中的选定行）中放入行值。带有值的表被隐藏，直到我单击“添加”按钮。我正在尝试将最后单击的行索引号存储在第一个表中，变量在脚本之上声明，但它的内部函数值是*udnefined*。

获取行索引的代码：

```
var rowSelected = 1;
$(document).ready(function () {
    $(document).delegate('tr', 'click', function (event) {
        rowSelected = $(this).closest("tr")[0].rowIndex;
    });
}); 
```

表内“单击”行后的函数，其中要传递的值：

```
$('#tablica_produktow').on('click','tr',function(){
        var wiersz = $(this).find('td').map(function(){
            return $.trim($(this).text())
        })
        $('input[name="products['+rowSelected+'][prod_name]"]').val(wiersz[1]); //rowSelected is *undefined*
        $('input[name="products['+ rowSelected +'][prod_metr]"]').val(wiersz[2]);
        $('input[name="products['+rowSelected+'][prod_pricentax]"]').val(wiersz[3]);      
        $("#wczytaj_produkt").dialog("close");
        calculate();
    }) 
```

我怎么能做到这一点？

为了更好地观看：

在此页面[http://bergamot.com.pl/sklep/oferty/start/](http://bergamot.com.pl/sklep/oferty/start/)上是名为“Produkty”的字段，带有“Dodaj z bazy”按钮。此按钮将打开第二个表，我需要将数据从单击的行传递到字段“Produkty”内的输入。

# javascript - 下拉菜单在 ipad 上不起作用

> ID：14552182
> 
> 赞同：1
> 
> 时间：2013-01-27T20:55:26.460
> 
> 标签：javascript, ipad, drop-down-menu, click, hover

我的导航菜单有问题。它基本上是一个徽标图像，当悬停时，子菜单会向下滑动，然后在未悬停时向上滑动。它在台式机上运行良好，但我在移动设备上遇到的问题。特别是 iPad。出于某种原因，iPhone 似乎可以翻译它，但在 iPad 上，当您第一次单击图像时，下拉菜单会向下滑动然后快速向上滑动，并且不会再次出现。我一直在网上搜索解决方案，并尝试完全重写菜单以使用点击，但仍然没有让它在 iPad 上正常工作。如果有人可以帮助我或指出我正确的方向，我将不胜感激！

我还将代码部分放在[js fiddle](http://jsfiddle.net/newbie2012/jCMrX/)

```
<div id="button">
<ul class="hover">
    <li class="hoverli">
        <img src="assets/images/menu_logo.jpg" width="210" height="160" class="menu_class"/>
        <ul class="file_menu">
            <li><a href="ourwork.html">our work</a>
            </li>
            <li><a href="about/about.html">about</a>
            </li>
            <li><a href="contact.html">contact</a>
            </li>
            <li class="#"><a href="#">blog</a>
            </li>
          </ul>
    </li>
</ul> 
```

```
$(document).ready(function () {
$(".hoverli").hover(

function () {
    $('ul.file_menu').slideDown('medium');
},

function () {
    $('ul.file_menu').slideUp('medium');
});

$(".file_menu li").hover(

function () {
    $(this).children("ul").slideDown('medium');
},

function () {
    $(this).children("ul").slideUp('medium');
});
}); 
```

的CSS

```
#newmenu {
position: absolute;
height: 32px;
width: 184px;
left: 35px;
top: 100px;
margin: auto;
}
ul, li {
margin:0;
padding:0;
list-style:none;
}
#submenu {
display:none;
width:100px;
position: relative;
left: 110px;
font-family: helvetica;
font-size:12px;
}
#submenu li {
background-color: #FFFFFF;
position: relative;
}
#submenu li a {
color:#00000;
text-decoration:none;
padding:5px;
display:block;
text-align: right;
padding-right: 13px
}
.file_menu li a:hover {
color: #585858;
}
.blog {
padding-bottom: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T14:17:33.670

如您所见，触摸设备（包括 Android）不处理 Hover 或 Mouse 事件。考虑使用 .click() 或 .change()，我发现这对 DDL 或其他菜单/过滤行为特别有用。

# java - 使用限制在多对一关系中获取数据

> ID：14552184
> 
> 赞同：0
> 
> 时间：2013-01-27T20:55:38.353
> 
> 标签：java, hibernate, orm

有两个具有@OneToMany 和@ManyToOne 双向关系的表，如下所示：

```
@Entity
public class Asset {
    private int id;
    private int count;
    @OneToMany
    private Set<Dealing> dealings;
...
}

@Entity
public class Dealing {

    private int id;
        ...
    @ManyToOne
    @JoinColumn(name = "customer_id", nullable = false, updatable = false)
    private Customer customer;
    @ManyToOne
    @JoinColumn(name = "product_id", nullable = false, updatable = false)
    private Product product;
    @ManyToOne(cascade = CascadeType.ALL)
    private Asset asset;
} 
```

一切听起来都不错，但是当我想像这样使用 Restriction 搜索数据时，

```
session.createCriteria(Asset.class).add(Restrictions.eq("dealings.customer.id", customerId)).add(Restrictions.eq("dealing.product.id", productId)).list(); 
```

在这个级别我得到这个错误，

```
could not resolve property: dealings.customer of: com.project.foo.model.Asset 
```

解决方案之一是改变我的策略，但我浪费时间找到这个，顺便说一句，我对此一无所知，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:30:43.240

首先，您没有双向 OneToMany 关联，而是两个不相关的单向关联。`mappedBy`在双向 OneToMany 关联中，必须使用属性将一侧标记为多侧的逆：

```
@OneToMany(mappedBy = "asset")
private Set<Dealing> dealings; 
```

其次，对此类静态查询使用标准 API 是多余的，并且会导致代码比必要的更难阅读。我会简单地使用更容易阅读的 HQL。标准应该用于动态查询，恕我直言，但不适用于静态查询：

```
select asset from Asset asset 
inner join asset.dealings dealing
where dealing.customer.id = :customerId
and dealing.product.id = :productId 
```

无论您使用 HQL 还是 Criteria，都不能使用`asset.dealings.customer`，因为`asset.dealings`它是一个集合。集合没有客户属性。为了能够从 Dealing 实体引用属性，您需要一个连接，如上面的 HQL 查询所示。标准也是一样的：

```
Criteria criteria = session.createCriteria(Asset.class, "asset");
criteria.createAlias("asset.dealings", "dealing"); // that's an inner join
criteria.add(Restrictions.eq("dealing.customer.id", customerId);
criteria.add(Restrictions.eq("dealing.product.id", productId); 
```

# javascript - 条形图示例 D3

> ID：14552195
> 
> 赞同：1
> 
> 时间：2013-01-27T20:56:15.340
> 
> 标签：javascript, d3.js

在过去的一个小时里，我一直在摆弄这个，但我不明白为什么这个例子没有运行。我所做的只是复制并粘贴代码。我尝试以以前教程的格式复制这个示例，但没有区别。

教程是： http: [//mbostock.github.com/d3/tutorial/bar-1.html](http://mbostock.github.com/d3/tutorial/bar-1.html)

我的复制和粘贴代码：http: [//jsfiddle.net/2ga27/2/](http://jsfiddle.net/2ga27/2/)

注意，我跳到了 SVG 部分 `.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:31:41.520

查看[Google Chrome 中的控制台](https://developers.google.com/chrome-developer-tools/docs/console)表明问题所在：

```
Uncaught ReferenceError: data is not defined 
```

[在Web 控制台](https://developer.mozilla.org/en-US/docs/Tools/Web_Console)上的 Firefox 中可以看到相同的错误。

以这种方式定义数据后（如示例所示）：

```
var data = [4, 8, 15, 16, 23, 42]; 
```

[jsFiddle 有效](http://jsfiddle.net/2ga27/3/)。

# mysql - 引用会占用磁盘空间吗？

> ID：14552196
> 
> 赞同：0
> 
> 时间：2013-01-27T20:56:17.690
> 
> 标签：mysql, sql

我有个问题。

假设我有 2 张桌子

`Parent(nameParent, children)`

显然，如果我有：

```
Parent

'Mary' | 'John'
'Mary' | 'Dan'
'Mary' | 'Chris' 
```

我有重复的`nameParent`条目。所以如果我有：

```
Parent(nameParent)
'Mary'

Child(nameChild, nameParent)
'John' | 'Mary'
'Dan'  | 'Mary'
'Chris'| 'Mary' 
```

这是否比第一个示例更有效，因为`nameParent`它是指向父 Mary 的指针，而不是占用磁盘空间的条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:03:43.307

高效的？有些。您应该更多地关注设计和性能，而不是物理磁盘空间。它确实提供了参照完整性。这个问题的典型设计是这样的：

```
编号 | 姓名 | parent_id
1 玛丽 NULL
2 约翰 1
3 丹 1
4 克里斯 1
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:16:06.793

磁盘空间方面，a`VARCHAR`只占用（大致）您提供的最大字节数（`VARCHAR(16)`总是占用 2 倍`VARCHAR(8)`），an`INT`是恒定的 4 个字节，等等。很容易估计每行的磁盘空间量（减去索引) 通过总结所有领域：

```
INT id           -- 4 bytes
CHAR name(15)    -- 15 bytes
TEXT description -- variable, depending on the content 
```

理想情况下，通过从不存储相同的字符串两次来避免重复数据。在您的情况下，最好将`nameParent`列替换为指向父表的数字 ID。

也就是说，索引也会占用磁盘空间，大约是字段大小乘以行数的两倍。假设您将`id`键 ( `int`) 设为主键，如果有 2048 行，它将占用大约 16 KB。

在估计每行表的总磁盘使用量时，将所有字段的大小相加，然后只需添加索引的大小。这会给你一个粗略的估计。

* * *

**真正重要的部分**

当然，磁盘空间对于数据库来说并不重要，您应该始终关注性能。除非您的表会变得非常大（数百万行），否则这根本不会成为问题。

在您的特定情况下，只需`person`使用字段`id`和制作一个表格。为那些没有父母的人设置字段，并让孩子使用该字段来指定他们的父母是谁。然后你把所有东西都放在一张桌子上，你可以代表整个家族，这仍然很容易。`parent``name``parent``NULL``parent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:16:21.803

考虑创建名称表以消除数据冗余，同时提高数据完整性。

```
create table Names (
  ID MEDIUMINT NOT NULL AUTO_INCREMENT,
  Name VARCHAR(30) NOT NULL,
  PRIMARY KEY (ID),
  UNIQUE (Name)
);

create table ChildParentNames (
  ChildName MEDIUMINT,
  ParentName MEDIUMINT,
  FOREIGN KEY (ChildName) REFERENCES Names(ID),
  FOREIGN KEY (ParentName) REFERENCES Names(ID)
) 
```

# c# - 使用 XAML 设置对象属性

> ID：14552197
> 
> 赞同：0
> 
> 时间：2013-01-27T20:56:21.620
> 
> 标签：c#, wpf, xaml, data-binding

我的项目代码中有两个自定义 UserControl：TableControl 和 DeckControl。在后者的代码中，我可以在需要时访问前者。所以在我的 DeckControl 中，我实现了以下属性：

```
private TableControl m_Table;

public TableControl Table
{
    get { return m_Table; }
    set { m_Table = value; }
} 
```

问题是我无法从 XAML 代码设置属性：

```
<Canvas Core:Name="Layout" Loaded="OnLayoutLoaded">
    <Namespace:TableControl Core:Name="Table" Canvas.Left="0" Canvas.Top="0" Height="{Binding ElementName=Layout, Path=ActualHeight}" Width="{Binding ElementName=Layout, Path=ActualWidth}"/>
    <Namespace:DeckControl Core:Name="Deck" Canvas.Left="50">
</Canvas> 
```

我尝试使用 Reference 但编译器说该方法或操作

```
<Namespace:DeckControl Core:Name="Deck" Canvas.Left="50" Table="{Core:Reference Name=Table}"> 
```

我试过这个，但它也不起作用：

```
<Namespace:DeckControl Core:Name="Deck" Canvas.Left="50" Table="{Core:Static Table}"> 
```

我也尝试使用绑定：

```
<Namespace:DeckControl Core:Name="Deck" Canvas.Left="50" Table="{Binding ElementName=Table}"> 
```

好吧……这是我第一次使用 XAML 的方法，我仍在努力……但我真的无法理解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:05:02.717

如果要绑定到模型（窗口/用户控件）代码隐藏中的属性，则必须`DataContext`在`Xaml`. 有很多方法可以做到这一点，但最简单的方法就是命名您的窗口或用户控件并使用`ElementName`.

窗口示例：

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="143" Name="UI">

    <Canvas DataContext="{Binding ElementName=UI}" > <!-- Set dataContext to Window -->
        <Namespace:DeckControl Canvas.Left="50" Table="{Binding ElementName=Table}">
    </Canvas>
</Window> 
```

如果您希望`Xaml`在 Table 更改您的代码后应该实现时更新`INotifyPropertyChanged`，这将通知`Xaml`属性已更改。

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private TableControl m_Table;

    public TableControl Table
    {
       get { return m_Table; }
       set { m_Table = value; NotifyPropertyChanged("Table"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

如果您的 Table 属性不是 DependancyProperty，您将不得不更改它以便可以绑定。

例子：

```
public class DeckControl : UserControl
 {
     .......

     // Using a DependencyProperty as the backing store for Table.  This enables animation, styling, binding, etc...
     public static readonly DependencyProperty TableProperty =
         DependencyProperty.Register("Table", typeof(TableControl), typeof(DeckControl), new UIPropertyMetadata(null));

     public TableControl Table
     {
         get { return (TableControl)GetValue(TableProperty); }
         set { SetValue(TableProperty, value); }
     }
 } 
```

此外，在 UserControl 范围之外绑定的任何属性都必须是 DependancyProperty。

例子：

```
public partial class DeckControl : UserControl
{
    public DeckControl()
    {
        InitializeComponent();
    }

    private int myVar;
    public int MyProperty
    {
        get { return myVar; }
        set { myVar = value; }
    }
} 
```

当它是一个简单属性时，它将绑定在用户控件内部，因为它是在范围内。

```
<UserControl .....
             d:DesignHeight="300" d:DesignWidth="300" Name="UI">

    <TextBlock Text="{Binding MyProperty}" />
</UserControl> 
```

这不会绑定，因为它超出了 UserControl 的范围，MyProperty 必须是 DependancyProperty 才能在此处绑定

```
<Window ....
        Title="MainWindow" Height="233" Width="143" Name="UI">

    <Grid>
        <local:DeckControl MyProperty="{Binding Width}"  /> // Will not bind
    </Grid>

</Window> 
```

希望这是有道理的:)

# c++ - Win32 ReleaseDC 和 DestroyWindow 返回 0

> ID：14552202
> 
> 赞同：1
> 
> 时间：2013-01-27T20:56:38.907
> 
> 标签：c++, winapi

我为我正在编码的引擎创建了一个使用 CS_OWNDC 样式的单个窗口，并且它显示正确，但是当我关闭程序并调用 ReleaseDC(hWnd, hDC) 时，该函数始终返回 0（并且根据 MSDN这意味着它不能被释放）。DestroyWindow(hWnd) 也返回 0。

我在创建窗口期间调用 GetDC(hWnd)。

奇怪的是，如果我通过消息传递函数，我只会得到这个错误，即使它里面没有任何编码。

我的主要代码如下所示：

```
WindowManager windowManager;
HWND mainWindow = windowManager.Initialize("Title", "ClassName", 1024, 768, 32, WindowProc);

MSG msg;
while(true)
{
    if(PeekMessage(&msg, 0, 0, 0, PM_REMOVE))
    {
        if(msg.message == WM_QUIT) { break; }
        else
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }
}
windowManager.Clear(); //this calls ReleaseDC(hWnd, DC) and DestroyWindow(hWnd) among other release codes 
```

我不明白的是，如果我评论整个**while**循环，我不会得到释放或破坏窗口错误。调用**GetLastError()**也会给我一个 0。在 MSDN 上，它说 DestroyWindow 必须从同一个线程调用，但我没有编写任何多线程函数，所以我不认为是这种情况。

这可能是什么原因造成的？

# c - 将传递给程序的参数转换为长双精度变量的正确方法是什么？

> ID：14552203
> 
> 赞同：0
> 
> 时间：2013-01-27T20:56:46.310
> 
> 标签：c, linux, arguments, command-line-arguments, argument-passing

我遇到了麻烦...它可以编译，但是在运行时会立即出现段错误...使用GDB，我确定它在尝试启动长双打时会出现段错误。我觉得 atoi 可能是使用错误的函数，但我尝试了其他类似的函数，但仍然出现段错误。

```
int main(int argc, char *argv[]) {
  long double x = atoi(argv[1]);
  char oper = argv[2][0];
  long double y = atoi(argv[3]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:58:44.103

`atoi()`代表“ascii to integer”，这不是你想要的。您应该使用适当的功能 —[`strtold(3)`](http://www.manpagez.com/man/3/strtold/)是最合适的，但您也可以使用[`sscanf(3)`](http://www.manpagez.com/man/3/sscanf/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T20:58:46.217

将字符串转换为 a 的正确方法`long double`是

```
long double strtold(const char *nptr, char **endptr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T21:00:22.160

使用`strtold`：

```
#include <stdlib.h>
#include <errno.h>

char * e;
errno = 0;
long double d = strtold(argv[1], &e);

if (*e != 0 || errno != 0) { /* Error! Do not consume the result. */ }

// result now in "d" 
```

您可以使用 的值`*e`来确定是否使用了字符串的任何部分；有关详细信息，请参阅手册。我的示例只是检查是否可以解析*整个字符串。*

~~我实际上不确定是否有线程安全的解决方案......~~（哦，我认为是，因为`errno`是线程本地的。）

# memory-barriers - JMM 食谱混淆的内存屏障示例

> ID：14552208
> 
> 赞同：2
> 
> 时间：2013-01-27T20:57:00.230
> 
> 标签：memory-barriers, java-memory-model

我对 JMM 食谱 [http://g.oswego.edu/dl/jmm/cookbook.html中的障碍示例的编译器插入感到困惑](http://g.oswego.edu/dl/jmm/cookbook.html)

i = u （它不涉及来自 u 的不稳定负载和正常存储到 i 中吗？）

j = b （在我看来是来自 b 的正常加载和正常存储到 j ）

根据cookbook中的查表，LoadLoad和LoadStore这两个屏障是哪里来的？

谢谢！

///////////////JSR 示例 ////

易变的诠释你;

整数 i,b,j;

我=你; //加载你

```
 LoadLoad
    LoadStore 
```

j = b; //加载b

# facebook - 如何使 Facebook 画布缩小？

> ID：14552215
> 
> 赞同：0
> 
> 时间：2013-01-27T20:58:09.347
> 
> 标签：facebook, facebook-canvas

我已将画布设置为具有流体大小，但在调整浏览器窗口大小后，iframe 的大小不会改变。它永久保持在 760 像素。

我需要它，因为我的客户希望在 fb 应用程序中拥有响应式前端，但我不确定是否有可能。

问题是：如何使它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:30:51.240

嗯，我猜你是在谈论水平调整大小 - 一旦你激活相应的选项，这肯定会发生（即使没有调用 FB.setAutoGrow）：

![在此处输入图像描述](../Images/9ccecaa748e284d8793464389f9c2514.png)

事实上，即使您根本不加载 JS-SDK，这也有效。

这是一个演示：[https ://apps.facebook.com/lastfm-og-scrobbler/](https://apps.facebook.com/lastfm-og-scrobbler/)

# java - 如何使用适用于 Windows、Mac 和 Linux 的通用文件路径保存文件？

> ID：14552217
> 
> 赞同：3
> 
> 时间：2013-01-27T20:58:13.770
> 
> 标签：java

我有一个应用程序需要创建一个文件夹来解压缩一些文件，但我想传递一个文件路径，我的应用程序可以在任何操作系统中运行、创建和保存我的文件，但我不知道输出路径应该是什么要做到这一点。

例如：

```
File folder = new File(outputFolder);
if (!folder.exists()) {
    folder.mkdir();
} 
```

我应该在 outputFolder 中使用什么路径在任何操作系统（Windows、mac 或 linux）的 Documents/UnzipTest 中创建我的文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T21:01:46.053

```
System.getProperty("user.dir"); 
```

或者，如果您使用的是 Java 7

```
Filesystems.getDefault(); 
```

将为您提供工作的基本目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:14:46.083

使用[java.io.File#separator](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html#separator)：

```
String userHome = System.getProperty("user.home");
String outputFolder = userHome + File.separator + "dir1";
File folder = new File(outputFolder);
if (!folder.exists()) {
   folder.mkdir();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:04:25.383

我将为*根*文件夹定义一个属性（例如在某些外部属性文件中），因此用户可以在设置之后或安装期间为所有操作定义根文件夹。

其他选项是使用*用户文件夹*（又名*主文件夹*）作为此根文件夹（或者如果未定义上述属性），在系统属性中定义`user.dir`。或者使用安装应用程序的文件夹 - 例如，您可以通过在应用程序 jar 中查找一些资源然后从返回的 URL 解析路径来找到它。

定义根文件夹后，您可以使用构造函数`new File(rootFolder, outputFolder)`；您可以简单地在路径中使用斜杠`outputFolder`（例如/foo/bar）。这样的路径适用于所有操作系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T21:55:06.237

您可以将[Apache Commons的](http://commons.apache.org/)[Commons IO](http://commons.apache.org/io/)与类和.[`FileUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)[`FilenameUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html)

如果您在应用程序中为路径使用 UNIX 样式，则可以使用以下方法将路径转换为 ​​SO 样式：

```
org.apache.commons.io.FilenameUtils.separatorsToSystem(String) 
```

如果您只想在不存在的情况下创建目录：

```
org.apache.commons.io.FileUtils.forceMkdir(File) 
```

可能你有一个目录的路径，可能你需要在这个目录中创建一个新文件夹，你可以使用获取完整路径的方法进行连接：

```
org.apache.commons.io.FilenameUtils.concat(String, String) 
```

返回的路径总是规范化的，包含系统格式的分隔符。

可能你需要用户目录路径：

```
org.apache.commons.io.FileUtils.getUserDirectory() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T21:36:45.753

```
String outputFolder = System.getProperty("user.home") + File.separator + "Documents" + File.separator +"TestandoUnzip"; 
```

我需要的代码。多谢你们。

# javascript - HTML5 中的同步视频采样

> ID：14552225
> 
> 赞同：2
> 
> 时间：2013-01-27T20:58:45.413
> 
> 标签：javascript, html, video, sampling

我正在尝试对 HTML5 中的视频进行采样。

接下来是问题：`video.currentTime`在循环中设置 while 执行太快而无法捕获帧，因为帧更新相对较慢。我通过为每个采样设置 150 毫秒的间隔来解决这个问题。

有没有办法创建一个循环来无间隔地对其进行采样？（我现在正在对高清视频进行采样，对于较小的视频，150 毫秒的速率可能会过慢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T17:02:26.550

尝试为事件添加事件侦听器`seeked`以了解视频何时更改位置。我还建议使用`requestAnimationFrame`而不是`setTimeout`，因为这将确保任何读取事件与视频帧更新同步。

```
videoElement.addEventListener('seeked', function() {
    console.log('current time has successfully been changed.');
    requestAnimationFrame(function() {
        // new frame to sample *should* now be available
        // you could test by comparing videoElement.currentTime against
        // last time you sampled.
    });
}); 
```

# jquery - jQuery $.ajax 和 Comet 方法 - 如何知道脚本何时执行完毕？

> ID：14552229
> 
> 赞同：0
> 
> 时间：2013-01-27T20:58:59.033
> 
> 标签：jquery, ajax, comet, long-polling

我正在尝试在我的网站上实现类似彗星的行为来模拟 PUSH 事件。

我正在使用 jQuery 和 $.ajax 请求。我的原则的问题是当我收到成功事件时我会重新请求......但是......我在发送请求时立即获得成功，而不是在脚本完成执行时......

你可能会看到我现在遇到的问题。即使脚本中没有数据，也会发生重新请求 - 非常糟糕的行为，因为它每秒调用我的脚本 > 50 次......

有没有办法知道脚本何时完成了它的部分（真正的成功事件）？

兄弟，斯捷潘。

编辑：代码

```
/*

    IPR Comet implementation

*/

// Define singleton
IPRComet = new function()
{
    // Variables
    this.m_bStopExecution = false;
    this.m_iTmp = 1;

    // Init IPR Comet implementation
    this.Init = function()
    {
        // Start poll worker thread
        this.m_bStopExecution = false;
        this.PollThread();
    };

    // Main poll thred
    this.PollThread = function()
    {
        if(this.m_bStopExecution)
            return;

        this.m_iTmp += 1;

        $.ajax(
        {
            url: BASE_IPRBASE_URL + "/AJAX/Comet.php",
            success: function(pCometResponse) { IPRComet.OnResponse(pCometResponse); },
            error: function() { IPRComet.OnSystemError(); },
            complete: function(jqXHR, sStatus)
            {
                $("#Sandbox-Output2").text(jqXHR.readyState + ": " + IPRComet.m_iTmp);
                if(sStatus == "success" || sStatus == "timeout")
                    IPRComet.PollThread();
            },
            dataType: "json",
            timeout: 30000
        });
    };

    // System error handler
    this.OnSystemError = function()
    {
        // Stop further execution
        this.m_bStopExecution = false;

        IPRClientHooks.CallHook("Comet::OnSystemError");
    };

    // Response error handler
    this.OnResponseError = function(pCometResponse)
    {
        // Stop further execution
        this.m_bStopExecution = false;

        IPRClientHooks.CallHook("Comet::OnResponseError", pCometResponse);
    };

    // Response handler
    this.OnResponse = function(pCometResponse)
    {
        // Error case       
        if(pCometResponse.Type == "Error")
        {
            IPRComet.OnResponseError(pCometResponse);
            return;
        }

        IPRClientHooks.CallHook("Comet::OnResponse", pCometResponse);
    };

};

// Start Comet when document is ready
$(document).ready(function() { IPRComet.Init(); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:11:54.073

不得不从图片中删除 jQuery ......它不能正常工作......

不得不使用 XMLHTTPRequest 对象和 onreadystatechange 事件。

无论如何，这是工作代码：

```
/*

    IPR Comet implementation

*/

// Define singleton
IPRComet = new function()
{
    // Variables
    this.XHR = null;
    this.m_bStopExecution = false;

    // Init IPR Comet implementation
    this.Init = function()
    {
        this.m_bStopExecution = false;

        this.XHR = new $.ajaxSettings.xhr();
        this.XHR.onreadystatechange = function()
        {
            if(this.readyState == 4 && this.status == 200)
                IPRComet.OnResponse(this.responseText);
        };
        // Start poll worker thread
        this.PollThread();
    };

    // Main poll thred
    this.PollThread = function()
    {
        if(this.m_bStopExecution)
            return;

        try
        {
            this.XHR.open("GET", BASE_IPRBASE_URL + "/AJAX/Comet.php", true);
            this.XHR.send();
        }
        catch(pException)
        {
            this.OnSystemError();
        }
    };

    // System error handler
    this.OnSystemError = function()
    {
        // Stop further execution
        this.m_bStopExecution = false;

        IPRClientHooks.CallHook("Comet::OnSystemError");
    };

    // Response error handler
    this.OnResponseError = function(pCometResponse)
    {
        // Stop further execution
        this.m_bStopExecution = false;

        IPRClientHooks.CallHook("Comet::OnResponseError", pCometResponse);
    };

    // Response handler
    this.OnResponse = function(sCometResponse)
    {
        var pCometResponse = JSON.parse(sCometResponse);

        // Error case       
        if(pCometResponse.Type == "Error")
        {
            IPRComet.OnResponseError(pCometResponse);
            return;
        }

        IPRClientHooks.CallHook("Comet::OnResponse", pCometResponse);

        this.PollThread();
    };

};

// Start Comet when document is ready
$(document).ready(function() { IPRComet.Init(); }); 
```

# c++ - cpp 文件的部分行以输出文件结尾 - 闹鬼的代码？

> ID：14552231
> 
> 赞同：1
> 
> 时间：2013-01-27T20:59:11.943
> 
> 标签：c++, c, file, printf

对不起，制作一个完全可重现的错误版本是非常困难的——所以请用我的原理图代码。

该程序从网页中检索信息，对其进行处理，并将输出保存到 ASCII 文件中。我还有一个“日志”文件（`FILE *theLog`---包含在一个`Manager`对象中）用于报告错误等。

* * *

一些后台方法：

```
// Prints string to log file
void Manager::logEntry(const string lstr) {
    if( theLog != NULL ) { fprintf(theLog, "%s", lstr.c_str()); }
}

// Checks if file with given name already exists
bool fileExists(const string fname) {
    FILE *temp;
    if( temp = fopen(fname.c_str(), "r") ) { 
        fclose(temp);
        return true;
    } else { return false; }
}

// Initialize file for writing (some components omitted)...
bool initFile(FILE *&oFile, const string fname) {
    if(oFile = fopen(fname.c_str(), "w") ) { return true; }
    else { return false; }
} 
```

* * *

造成麻烦的东西：

```
// Gets data from URL, saves to file 'dataFileName', input control flag 'foreCon'
//                     stu is some object that has string which i want
bool saveData(Manager *man, Stuff *stu, string dataFileName, const int foreCon) {
    char logStr[CHARLIMIT_LARGE];          // CHARLIMIT_LARGE = 2048
    sprintf(logStr, "Saving Data...\n");
    man->logEntry( string(logStr) );       // This appears fine in 'theLog' correctly

    string data = stu->getDataPrefixStr() + getDataFromURL() + "\n";        // fills 'data' with stuff
    data += stu->getDataSuffixStr();

    if( fileExists(dataFileName) ) {
        sprintf(logStr, "save file '%s' already exists.", dataFileName.c_str() );
        man->logEntry( string(logStr) );
        if( foreCon == -1 ) {
            sprintf(logStr, "foreCon = %d, ... exiting.", foreCon);        // LINE 'A' : THIS LINE ENDS UP IN OUTPUT FILE
            tCase->logEntry( string(logStr) );
            return false;
        } else {
            sprintf(logStr, "foreCon = %d, overwriting file.", foreCon);   // LINE 'B' : THIS LINE ENDS UP IN LOG FILE
            tCase->logEntry( string(logStr) );
        }                                                                                                 
    }

    // Initialize output file
    FILE *outFile;
    if( !initFile(outFile, dataFileName) ) {
        sprintf(logStr, "couldn't initFile '%s'", dataFileName.c_str());
        tCase->logEntry( string(logStr) );
        return false;
    }

    fprintf(outFile, "%s", data.c_str());                 // print data to output file

    if( fclose(outFile) != EOF) {
        sprintf(logStr, "saved to '%s'", dataFileName.c_str());
        tCase->logEntry( string(logStr) );
        return true;
    }

    return false;
} 
```

如果文件已经存在，并且“ `int foreCon`= -1”，那么代码应该将“A”行打印到日志文件中。如果文件存在并且`foreCon`!= -1，则旧文件将被覆盖`data`。如果文件不存在，则创建它，并将数据写入其中。

然而，结果是数据文件中出现了行'A'的分解版本，并且日志文件中打印了行'B'！！！！

数据文件的样子：

```
.. exiting.20130127 161456
20130127 000000,55,17,11,0.00
20130127 010000,54,17,11,0.00
... ... 
```

第二行及以后看起来是正确的，但有一个额外的行包含行“A”的一部分。

现在，真正奇怪的部分。如果我注释掉`if( foreCon == -1) { ... }`块中的所有内容，则数据文件如下所示：

```
%d, ... exiting.20130127 161456
20130127 000000,55,17,11,0.00
20130127 010000,54,17,11,0.00
... ... 
```

还有一个额外的行，但它是复制到数据文件中的 LITERAL CODE。

我认为我的代码中有一个 poltergeist。我不明白这怎么可能发生。

* * *

编辑：我尝试打印来控制台`data`字符串，它给出了相同的混乱值：即`%d, ... exiting.20130127 161456`- 所以它必须是关于`string`而不是`FILE *`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:00:38.493

根据您的最新评论回答：

> getDataPrefixStr() 最终返回一个字符串，该字符串以字符串 retStr = COMCHAR + " file created on ..."; 开头 这样 const char COMCHAR = '#';。COMCHAR 可能是问题吗？

您不能像这样添加字符和字符串文字（它们是 s 的数组`char`，而不是`string`s 的数组）。

您将 35（“#”的 ASCII）添加到“file created on ...”的地址，即 getDataPrefixStr() 是从该字符串开头的 35 个字符开始的任何内容。由于所有文字字符串都存储在同一数据区域中，因此您将在输出中从程序中获取字符串。

相反，你冷做

```
 const string COMCHAR = "*"; 
   string retStr = COMCHAR + " file created on ..."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:53:51.240

可能`logStr`是太短了，导致数据在其他缓冲区中被覆盖（您是否仔细检查过`CHARLIMIT_LARGE`？）。您可以通过评论所有写入`logStr`( `sprintf`) 来诊断此问题，并查看是否`data`仍然损坏。一般来说，如果用户可以设置`dataFileName`（很长的字符串），您的代码很容易受到攻击；使用`snprintf`or`ostringstream`代替。

否则，我会猜测要么 要么`stu->getDataPrefixStr()`正在`getDataFromURL()`返回损坏的结果或返回类型`char*`而不是`string`. 尝试将这些值直接打印到控制台以查看它们是否已损坏。如果他们返回 a `char*`，那么`data = stu->getDataPrefixStr() + getDataFromURL()`将有未定义的行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T21:07:43.510

```
if( temp = fopen(fname.c_str(), 'r') ) { 
```

应该

```
if( temp = fopen(fname.c_str(), "r") ) { 
```

# c# - 这是重载的任务方法吗？

> ID：14552234
> 
> 赞同：0
> 
> 时间：2013-01-27T20:59:19.913
> 
> 标签：c#, rss, feed, overloading, c#-5.0

我正在阅读这段代码，它正在处理提要 RSS 和 Atom 提要，就像它看起来使用提要数据源类返回 feedsdata 对象一样：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Threading.Tasks;
using Windows.Web.Syndication;

namespace WindowsBlogReader
{
    // FeedData
    // Holds info for a single blog feed, including a list of blog posts (FeedItem).
    public class FeedData
    {
        public string Title { get; set; }
        public string Description { get; set; }
        public DateTime PubDate { get; set; }

        private List<FeedItem> _Items = new List<FeedItem>();
        public List<FeedItem> Items
        {
            get
            {
                return this._Items;
            }
        }
    }

    // FeedItem
    // Holds info for a single blog post.
    public class FeedItem
    {
        public string Title { get; set; }
        public string Author { get; set; }
        public string Content { get; set; }
        public DateTime PubDate { get; set; }
        public Uri Link { get; set; }
    }

    // FeedDataSource
    // Holds a collection of blog feeds (FeedData), and contains methods needed to
    // retreive the feeds.
    public class FeedDataSource
    {
        private ObservableCollection<FeedData> _Feeds = new ObservableCollection<FeedData>();
        public ObservableCollection<FeedData> Feeds
        {
            get
            {
                return this._Feeds;
            }
        }

        public async Task GetFeedsAsync()
        {
            Task<FeedData> feed1 =
                GetFeedAsync("http://blogs.windows.com/skydrive/b/skydrive/atom.aspx");
            Task<FeedData> feed2 =
                GetFeedAsync("http://blogs.windows.com/windows/b/windowsexperience/atom.aspx");
            Task<FeedData> feed3 =
                GetFeedAsync("http://blogs.windows.com/windows/b/extremewindows/atom.aspx");
            Task<FeedData> feed4 =
                GetFeedAsync("http://blogs.windows.com/windows/b/business/atom.aspx");
            Task<FeedData> feed5 =
                GetFeedAsync("http://blogs.windows.com/windows/b/bloggingwindows/atom.aspx");
            Task<FeedData> feed6 =
                GetFeedAsync("http://blogs.windows.com/windows/b/windowssecurity/atom.aspx");
            Task<FeedData> feed7 =
                GetFeedAsync("http://blogs.windows.com/windows/b/springboard/atom.aspx");
            Task<FeedData> feed8 =
                GetFeedAsync("http://blogs.windows.com/windows/b/windowshomeserver/atom.aspx");
            // There is no Atom feed for this blog, so use the RSS feed.
            Task<FeedData> feed9 =
                GetFeedAsync("http://blogs.windows.com/windows_live/b/windowslive/rss.aspx");
            Task<FeedData> feed10 =
                GetFeedAsync("http://blogs.windows.com/windows_live/b/developer/atom.aspx");
            Task<FeedData> feed11 =
                GetFeedAsync("http://blogs.windows.com/ie/b/ie/atom.aspx");
            Task<FeedData> feed12 =
                GetFeedAsync("http://blogs.windows.com/windows_phone/b/wpdev/atom.aspx");
            Task<FeedData> feed13 =
                GetFeedAsync("http://blogs.windows.com/windows_phone/b/wmdev/atom.aspx");
            Task<FeedData> feed14 =
                GetFeedAsync("http://blogs.windows.com/windows_phone/b/windowsphone/atom.aspx");

            this.Feeds.Add(await feed1);
            this.Feeds.Add(await feed2);
            this.Feeds.Add(await feed3);
            this.Feeds.Add(await feed4);
            this.Feeds.Add(await feed5);
            this.Feeds.Add(await feed6);
            this.Feeds.Add(await feed7);
            this.Feeds.Add(await feed8);
            this.Feeds.Add(await feed9);
            this.Feeds.Add(await feed10);
            this.Feeds.Add(await feed11);
            this.Feeds.Add(await feed12);
            this.Feeds.Add(await feed13);
            this.Feeds.Add(await feed14);
        }

        private async Task<FeedData> GetFeedAsync(string feedUriString)
        {
            Windows.Web.Syndication.SyndicationClient client = new SyndicationClient();
            Uri feedUri = new Uri(feedUriString);

            try
            {
                SyndicationFeed feed = await client.RetrieveFeedAsync(feedUri);

                // This code is executed after RetrieveFeedAsync returns the SyndicationFeed.
                // Process the feed and copy the data you want into the FeedData and FeedItem classes.
                FeedData feedData = new FeedData();

                if (feed.Title != null && feed.Title.Text != null)
                {
                    feedData.Title = feed.Title.Text;
                }
                if (feed.Subtitle != null && feed.Subtitle.Text != null)
                {
                    feedData.Description = feed.Subtitle.Text;
                }
                if (feed.Items != null && feed.Items.Count > 0)
                {
                    // Use the date of the latest post as the last updated date.
                    feedData.PubDate = feed.Items[0].PublishedDate.DateTime;

                    foreach (SyndicationItem item in feed.Items)
                    {
                        FeedItem feedItem = new FeedItem();
                        if (item.Title != null && item.Title.Text != null)
                        {
                            feedItem.Title = item.Title.Text;
                        }
                        if (item.PublishedDate != null)
                        {
                            feedItem.PubDate = item.PublishedDate.DateTime;
                        }
                        if (item.Authors != null && item.Authors.Count > 0)
                        {
                            feedItem.Author = item.Authors[0].Name.ToString();
                        }
                        // Handle the differences between RSS and Atom feeds.
                        if (feed.SourceFormat == SyndicationFormat.Atom10)
                        {
                            if (item.Content != null && item.Content.Text != null)
                            {
                                feedItem.Content = item.Content.Text;
                            }
                            if (item.Id != null)
                            {
                                feedItem.Link = new Uri(item.Id);
                            }
                        }
                        else if (feed.SourceFormat == SyndicationFormat.Rss20)
                        {
                            if (item.Summary != null && item.Summary.Text != null)
                            {
                                feedItem.Content = item.Summary.Text;
                            }
                            if (item.Links != null && item.Links.Count > 0)
                            {
                                feedItem.Link = item.Links[0].Uri;
                            }
                        }
                        feedData.Items.Add(feedItem);
                    }    
                }
                return feedData;
            }
            catch (Exception)
            {
                return null;
            }
        }

        // Returns the feed that has the specified title.
        public static FeedData GetFeed(string title)
        {
            // Simple linear search is acceptable for small data sets
            var _feedDataSource = App.Current.Resources["feedDataSource"] as FeedDataSource;

            var matches = _feedDataSource.Feeds.Where((feed) => feed != null && feed.Title.Equals(title));
            if (matches.Count() == 1) return matches.First();
            return null;
        }

        // Returns the post that has the specified title.
        public static FeedItem GetItem(string uniqueId)
        {
            // Simple linear search is acceptable for small data sets
            var _feedDataSource = App.Current.Resources["feedDataSource"] as FeedDataSource;

            var matches = _feedDataSource.Feeds
                .Where(group => group != null)
                .SelectMany(group => group.Items).Where((item) => item.Title.Equals(uniqueId));
            if (matches.Count() == 1) return matches.First();
            return null;
        }
    }
} 
```

我的问题是关于任务方法：

1.  `public async Task GetFeedsAsync()`
2.  `private async Task<FeedData> GetFeedAsync(string feedUriString)`

很明显，第二种方法是从第一种方法重载的，现在我想在这里明确的是我可以处理数据源的方式的这两种实现，以使我的问题更清楚：这是否意味着我们可以使用是提供提要 uri 的第一个 TASK 方法还是使用第二个 TASK 方法，我可以选择使用其中一个？

我希望我能很好地解释我的误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:09:12.693

这是两个完全不相关的方法，除了其中一个调用另一个。

你可以打电话给你喜欢的任何一个，这取决于你想要做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T10:06:25.313

不，第一种方法是 Get **Feeds** Async，而第二种方法是 Get **Feed** Async()。它们显然是两种不同的方法。

Get **Feeds** Async 方法调用 Get **Feed** Async() 方法 14 次，每次都会传递一个指向该 Feed 的 Web 链接。Get **Feed** Async() 方法然后下载 feed 数据并解析检索到的 xml 以提取有价值的信息。如标题、出版日期、作者等

# excel - 电子商务数据馈送

> ID：14552235
> 
> 赞同：0
> 
> 时间：2013-01-27T20:59:21.223
> 
> 标签：excel, csv, e-commerce, datafeed

我正在尝试为客户建立一个电子商务网站，但它并不像我希望的那样简单。我正在使用 Magento 社区，我的客户有一个批发商，他提供数据馈送（超过 5000 种产品）。为了使这个数据馈送符合 Magento（及其属性），我在 Excel 中编辑了一些列标题并成功上传为 CSV 文件。

我的问题是批发商会定期自动更新数据馈送。发生这种情况时，我假设我对电子表格的调整将被否决，使我现在与 Magento 兼容的 CSV 文件再次无用。

那么我的问题是如何使批发商数据馈送符合我的修订版本，这样我就不必不断重命名元素？这可能吗？

如果这听起来很愚蠢，我深表歉意，但我更熟悉静态网站构建。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:52:35.433

您的网络服务器是否可以访问新生成的更新自动数据馈送？

如果是这样，只需获取提要，将其修改为与 magento 数据提要有关，然后找到 magento 'processfeed' 或任何功能，然后针对文件运行它？

如果您的网络服务器无法自动获取文件，制作提要的电脑可以自动将数据发布到网络服务器吗？

如果到目前为止两者都不可能，那么总会有一个手动人员必须“重新上传提要”。在这种情况下，只需为他们制作一个简单的页面，“上传提要”，或修改 magento 页面，然后让他们上传他们的标准提要，重新格式化，然后处理重新格式化的提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T06:59:50.383

您需要编写一个脚本来将批发商数据馈送转换为 magento 格式，这样您就不需要每次都手动重命名。

# google-chrome-extension - Chrome 扩展程序的明显虚假安装

> ID：14552237
> 
> 赞同：0
> 
> 时间：2013-01-27T20:59:34.230
> 
> 标签：google-chrome-extension, chrome-web-store

我们有一个新的扩展，我们构建了好几个月，并在网上商店上线。

我们的扩展程序与我们的 API 通信，我们每天都会收到许多虚假安装 - 我们在 API 中看到的安装，而不是在网上商店中看到的安装。

在无数个不眠之夜之后——我们怀疑带有 chrome 的机器人每次都运行我们的扩展程序并删除本地存储——这只是我们最好的猜测，尽管我们不确定这是否可能，因为每个安装的 IP 都不同。

还有更多详细信息-因此，如果您想提供帮助并需要更多信息，请告诉我什么，我可以详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:07:13.330

我不熟悉这个 Chrome 扩展 API，但是，**如果有人通过让人们安装你的扩展来赚钱**，那么我会检查那个线索。

最终，显然“安装”您的扩展程序的客户端（您说的许多 IP）**通过发出 HTTP 请求来报告此事件**- 我只是假设！
话虽如此，可能是有人控制了许多计算机，这些计算机只是**启动这些 HTTP 请求以“报告”（假）安装**，从而赚钱。

如果是这种情况，并且有人确实从您的扩展程序中赚钱（也可能是间接的），那么请检查会员代码或其他任何内容，这甚至是向 Google 本身报告的问题，他们当然可以对此进行调查。

# php - 在 Symfony2 中创建 REST API - 空输入

> ID：14552238
> 
> 赞同：2
> 
> 时间：2013-01-27T20:59:36.770
> 
> 标签：php, symfony

我一直在尽可能地遵循[本指南，以便在 Symfony2 中创建一个简单的 REST API。](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)

不幸的是，无论我向 API 发布什么，我总是得到：

```
{"children":{"firstName":{"errors":["This value should not be blank."]},"lastName":{"errors":["This value should not be blank."]},"email":{"errors":["This value should not be blank."]},"password":{"errors":["This value should not be blank."]},"dob":{"errors":["This value should not be blank."],"children":{"year":[],"month":[],"day":[]}},"tutorialWatched":{"errors":["This value should not be blank."]},"challengeEmails":{"errors":["This value should not be blank."]},"mailingList":{"errors":["This value should not be blank."]}}} 
```

我的验证如下：

```
LifeMirror\APIBundle\Model\Users:
    properties:
        firstName:
            - NotBlank:
        lastName:
            - NotBlank:
        email:
            - NotBlank:
            - Email:
        password:
            - NotBlank:
        dob:
            - NotBlank:
            - Date:
        tutorialWatched:
            - NotBlank:
            - Choice:
                choices: [0, 1]
        challengeEmails:
            - NotBlank:
            - Choice:
                choices: [0, 1]
        mailingList:
            - NotBlank:
            - Choice:
                choices: [0, 1] 
```

我的控制器是：

```
class RegisterController extends Controller
{
    public function indexAction()
    {
        return $this->processForm(new Users());
    }

    private function processForm(Users $user)
    {
        $statusCode = $user->isNew() ? 201 : 204;

        $form = $this->createForm(new UsersType(), $user);
        $form->bind($this->getRequest());

        if ($form->isValid()) {
            $user->save();

            $response = new Response();
            $response->setStatusCode($statusCode);
            return $response;
        }
        $view = View::create($form, 400);
        $view->setFormat('json');
        return $view;
    }
} 
```

我可以 var_dump`$this->getRequest()`并且可以看到数据在那里，但我不确定验证器为什么抱怨。

**编辑：**

这是表格：

```
namespace LifeMirror\APIBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class UsersType extends AbstractType
{
    /**
     * {@inheritdoc}
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('firstName');
        $builder->add('lastName');
        $builder->add('email');
        $builder->add('password');
        $builder->add('dob');
        $builder->add('tutorialWatched');
        $builder->add('challengeEmails');
        $builder->add('mailingList');
    }

    /**
     * {@inheritdoc}
     */
    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'LifeMirror\APIBundle\Model\Users',
            'csrf_protection'   => false,
        );
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'users';
    }
} 
```

我的意见： ![在此处输入图像描述](../Images/78a4548d4f965e1ec0d590efb2f0f20b.png)

**编辑 2：** $_REQUEST 的内容：

```
array(9) { ["firstName"]=> string(5) "James" ["lastName"]=> string(6) "Hadley" ["email"]=> string(9) "fd@fd.com" ["password"]=> string(7) "test123" ["dob"]=> string(33) "{'year':1991,'month':08,'day':02}" ["location"]=> string(9) "Lancaster" ["tutorialWatched"]=> string(1) "0" ["challengeEmails"]=> string(1) "0" ["mailingList"]=> string(1) "0" } 
```

**编辑 3：** HTML 表单：

```
<form action="http://www.lifemirror.org/api/register/" method="post">
    <input type="hidden" name="firstName" value="James" />
    <input type="hidden" name="lastName" value="Hadley" />
    <input type="hidden" name="email" value="fd@fd.com" />
    <input type="hidden" name="password" value="test123" />
    <input type="hidden" name="dob" value="{'year':1991,'month':08,'day':02}" />
    <input type="hidden" name="location" value="Lancaster" />
    <input type="hidden" name="tutorialWatched" value="0" />
    <input type="hidden" name="challengeEmails" value="0" />
    <input type="hidden" name="mailingList" value="0" />
    <input type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T11:51:22.350

如果您使用 FOSRestBundle 和主体侦听器，则请求不再接受任何 application/x-www-form-urlencoded 内容。您不能使用 HTML 表单发送数据。

REST Web 服务意味着，您将请求数据作为 JSON 或 XML 发送，就像您收到响应一样。

对于测试，您可以将[NelmioApiDocBundle](https://github.com/nelmio/NelmioApiDocBundle)添加到您的项目中，它们有一个出色的测试沙箱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:54:30.863

问题是您没有在操作中考虑表单名称。顺便说一句，您的表单名称是“用户”。

将您的操作更改为

```
class RegisterController extends Controller
{
    public function indexAction()
    {
        return $this->processForm(new Users());
    }

    private function processForm(Users $user)
    {
        $statusCode = $user->isNew() ? 201 : 204;

        $form = $this->createForm(new UsersType(), $user);
        $form->bind(array('users'=>$this->getRequest()->query->all()));

        if ($form->isValid()) {
            $user->save();

            $response = new Response();
            $response->setStatusCode($statusCode);
            return $response;
        }
        $view = View::create($form, 400);
        $view->setFormat('json');
        return $view;
    }
} 
```

现在它应该可以正常工作了。

新的绑定是让它工作的关键

```
$form->bind(array('users'=>$this->getRequest()->query->all())); 
```

PS：请注意，如果您使用 Twig 来呈现该表单，则无需更改代码，因为表单名称将与 HTML 标记一起呈现。

您的 HTML 表单应该类似于

```
<form>
    <input name="users[firstName]">
    <input name="users[lastName]">
    <input name="users[email]">
    <input name="users[password]">
    <input name="users[tutorialWatched]">
    <input name="users[challengeEmails]">
    <input name="users[mailingList]">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T11:44:49.907

我也遇到了这个问题。我能够通过绑定（POST）请求变量来使其工作，如下所示：

```
$form->bind($request->request->all()); 
```

尽管如此，我还是觉得默认方法不起作用很奇怪......

编辑：好的，我想通了。这是一个命名空间的事情。如果我使用这样的名称空间发布变量，`myformname[fieldname]`而不是只是`fieldname`，那么它适用于

```
$form->bind($request); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:44:54.773

奇怪的是，在我的例子中，每个字段都必须在控制器中手动指定：

```
 $form->bind(array(
        "firstName" => $this->getRequest()->request->get('firstName'),
        "lastName" => $this->getRequest()->request->get('lastName'), 
```

等等

# asp.net - IIS 7 Windows Server 2008 密码保护

> ID：14552239
> 
> 赞同：1
> 
> 时间：2013-01-27T20:59:44.250
> 
> 标签：asp.net, .net, vb.net, iis

一般来说，我是在 Apache 上工作的 PHP 开发人员。然而，我已经使用了新站点，该站点内置于 ASP.net(VB) 中，并且显然在 IIS 上运行。我已经设置了一个子域，我想用密码保护这个域，所以只有我自己和我允许的人才能访问这个域。

通常在 apache 上，我可以用 .htaccess 和 .htpassword 文件来做这种事情。我知道我可以让 .htaccess 在 IIS 上工作，但我不必努力让某些东西工作，当我确信有人能够说这是 IIS 中的内置方式来做到这一点时。

有人可以说明如何锁定我的网站，以便我可以创建用户名和密码，以便在测试版中锁定我的域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:23:23.130

仅供参考，虽然不是直接相关，但 IIS 中的 .htaccess 等效项是您的 web.Config 文件。

要使其正常工作，您需要在 Web.Config 中启用 Windows 身份验证。

```
<authentication mode="Windows"> 
```

你可以像这样设置谁被授权。

```
<configuration>
  <system.web>
    <authorization>
      <allow roles="domainname\Managers" />
      <allow users="domainname\user1,domainname\user2,domainname\user3" />
    </authorization>
  </system.web>
</configuration> 
```

[这是更详细的说明](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication)，以及[here](http://support.microsoft.com/KB/323176)和[here](https://www.simple-talk.com/dotnet/asp.net/authentication-and-authorization-with-windows-accounts-in-asp.net/)

# google-apps-script - 复制以编程方式创建的重复事件？

> ID：14552247
> 
> 赞同：5
> 
> 时间：2012-12-19T20:05:08.197
> 
> 标签：google-apps-script, google-calendar-api, google-calendar-recurring-events

使用 Google Apps 脚本，我创建了一个包含复杂重复事件的日历。但是，我无法将该事件作为重复事件复制到另一个日历。*注意：循环规则不能通过网页界面生成或编辑。*

举一个真实的例子，假设用户想要从[这个公开共享的 Google 日历](https://www.google.com/calendar/embed?dates=20130101%2F20130107&src=etsmtl.net_raf55j165paaj0dc9bqa8rgbk8@group.calendar.google.com&ctz=America/New_York)中复制定期事件。该活动是我大学星期四课程的课程表的一种*模板活动。*

以下是阻止用户将重复事件复制到用户有权访问的另一个日历中的两个困难：

*   单击事件的实例并说“复制到我的日历”仅复制该单个事件，即使该事件被定义为重复。这不是一个好的解决方案，因为用户必须这样做超过 10 次才能获得一个学期的所有事件。
*   单击事件的实例，然后单击“更多详细信息”，然后尝试在“更多操作”菜单（其中 xxxx 是用户拥有的日历）下尝试“复制到 xxxx”似乎可以工作。但是，点击保存时，出现错误：“出现错误，请稍后再试。”

**编辑**这里是事件在谷歌日历中的样子的屏幕截图（点击事件，“更多细节”）。

![已创建事件详细信息的屏幕截图](../Images/cc9581aeb50659e736724996e2e581bf.png)

请注意，此重复事件是从学期开始到结束的每个星期一，但有几个例外。没有假期（例如**Mon 2013-02-25**），但也包括**Wed 2013-02-27**，这天课程将像星期一一样（根据大学课程安排）。

我再说一遍：重复的事件在 Google 日历中看起来不错，但它们不能在那里完全复制到另一个日历。

创建日历的 GAS 函数（并非所有代码都在这里）：

```
函数 createCalendar(calendarName, courseCode, weekday, times, room, isLab) {

  Logger.log("最后一天：" + LAST_TRIMESTER_DATE);
  // 修改最后一天，使其不是午夜，而是在第二天之前，即 23:59:59
  varadjustedLastDay = LAST_TRIMESTER_DATE;
  adjustedLastDay.setTime(adjustedLastDay.getTime() + (23*60*60*1000) + (59*60*1000) + (59*1000));
  Logger.log("调整的最后一天：" +adjustedLastDay);

  var eventRecurrence = CalendarApp.newRecurrence();
  eventRecurrence.addDailyRule().until(adjustedLastDay).interval(1).onlyOnWeekday(weekday);

  // 获取第一天的星期几
  var weekdayOfFirstDay = Utilities.formatDate(FIRST_TRIMESTER_DATE, LONG_TIME_ZONE, "EEEE").toUpperCase();

  // 如果此日历用于实验室，则排除第一周的天数
  如果（isLab）{
    eventRecurrence.addDailyExclusion().times(1);
  } 别的 {
    // 这是一门课程，所以如果不是课程日，则排除第一天
    // -- 这是一个错误，因为事件的“第一天”总是会尝试创建，即使它没有指定“onlyOnWeekday”
    if (weekdayOfFirstDay != weekday.toString()) {
      eventRecurrence.addDailyExclusion().times(1);
// eventRecurrence.addDateExclusion(FIRST_TRIMESTER_DATE);
    }
  }

  // 排除所有假期
  对于 (var i = 0; 我
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:33:06.893

这似乎是 Google 日历中的一个错误，因为它无法复制复杂的重复规则。您可以使用 Google 日历界面中齿轮图标下的“发送反馈”链接向团队报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-26T15:01:08.783

另一种选择是尝试导出 ICA 并让用户导入它。您甚至可以使用某种链接按钮来完成这两项工作。下面是一个如何获取谷歌事件的 ica 文件的示例；

[http://google.com/calendar/ical/](http://google.com/calendar/ical/%5bCALENDARID%5d/public%5bor) [CALENDARID]/public[或私有取决于]/full/[eventID].ics

这应该将代码提供给用户，他们可以手动将其导入他们的日历。您可以生成 URL 并向所有注册指定课程的学生发送电子邮件。

吨

# c# - 数据可视化工具提示行为

> ID：14552252
> 
> 赞同：-2
> 
> 时间：2013-01-27T21:01:15.947
> 
> 标签：c#, .net, wpf, charts, tooltip

我已成功设置我的 XAML 以检索在我的视图模型中生成的自定义工具提示；但是，当我在调试模式下运行并在“getter”处休息时，我发现在构建图表时，它多次击中“getter”。我不明白的是为什么它在构建图表时会击中“getter”？是否在构建图表时构建工具提示，使它们在本质上有些静态。

如果是这样的话，我的猜测是它正在为每个数据点构建工具提示；那么我将如何访问我的工具提示“getter”中的当前数据点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:29:28.607

我为我的愤世嫉俗的反应道歉，但让它坐了好几天，我感到很沮丧。最后我选择了不同的方法。但是我没有在原始方法中找到我的问题的答案。我决定使用值转换器，而不是将工具提示绑定到包含文本框的对象。最初，我试图设置文本框，以便它在我的图表中显示所有 3 个系列的值，但无法弄清楚如何做到这一点。Gert Arnold 建议我发布代码和堆栈跟踪，但是有很多代码而且我不知道如何在断点期间获取堆栈跟踪。

# backbone.js - 在集合数据中传递附加变量

> ID：14552256
> 
> 赞同：0
> 
> 时间：2013-01-27T21:02:00.610
> 
> 标签：backbone.js

我使用按钮制作了帖子提要，该按钮在点击时加载了 10 多个帖子。问题是如果没有帖子，我不知道何时隐藏该按钮。

所以我认为我需要传入`aditional variable`（`collection data`从 JSON 接收），它告诉主干是否有更多帖子。如何从集合中接收这个变量？这是正确的做法吗？

也许有更好的方法可以在不额外调用数据库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:31:31.117

如果您**绝对**需要避免另一个服务调用，请将您的集合 API 响应包装在一个包装器元素中，该元素告诉您是否还有更多帖子。

**获取/帖子：**

```
{
  more: true,
  posts: [
    {id:1, title:"..."},
    {id:2, title:"..."},
    {id:3, title:"..."},
  ]
} 
```

并用于[`Collection.parse`](http://backbonejs.org/#Collection-parse)解包数据：

```
parse: function(response) {
  this.more = response.more;
  return response.posts;
} 
```

所以你可以从集合中检查它：

```
if(collection.more) {
  //..
} 
```

但是，如果您的数据是不稳定的，即有可能在用户在页面上时创建新帖子，这意味着用户一旦到达末尾就无法加载更多帖子.

# php - MySQL Join 并在多个表中查找

> ID：14552267
> 
> 赞同：-1
> 
> 时间：2013-01-27T21:02:40.283
> 
> 标签：php, mysql, inner-join

我知道关于这个问题有很多问题，但是我无法理解，因为它们似乎是直接的答案，对我没有很好的理解。

这就是我想要做的：

我有三个表：`fusers`, `tusers`, `lusers`。它们都包含以下行：`email`

我想组合这三个表，并找出用户提交的变量是否`$email`已经存在于`email`行中。

我知道使用内部连接和可能的联合都可以，但是对于我的生活，我找不到一个像样的教程或示例可以从中学习。

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:04:08.393

```
SELECT some_primary_id as id, 'fusers' as table_name FROM fusers WHERE email = '$email' UNION 
SELECT some_other_primary_id as id, 'tusers' as table_name FROM tusers WHERE email = '$email' UNION
SELECT some_misc_primary_id as id, 'lusers' as table_name FROM lusers WHERE email = '$email' 
```

注意我使用`fusers_id as id`了，因为联合选择中的所有列都需要具有相同的名称

感谢@njk，您可以使用`UNION ALL`它会更快，因为`UNION`单独检查重复行并删除它们。

**句法：**

```
(SELECT a as COMMON_COLUMN_1, b as COMMON_COLUMN_2, c as COMMON_COLUMN3 FROM xxx WHERE ...)
UNION
(SELECT d as COMMON_COLUMN_1, e as COMMON_COLUMN_2, f as COMMON_COLUMN3 FROM yyy WHERE ...)
UNION
(SELECT g as COMMON_COLUMN_1, h as COMMON_COLUMN_2, i as COMMON_COLUMN3 FROM zzz WHERE ...)
# where a,b,c are columns from table xxx ONLY
# where d,e,f are columns from table yyy ONLY
# where g,h,j are columns from table zzz ONLY 
```

*   文档：[http ://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

**Simply`UNION`用于将多个 SELECT 语句的结果组合成一个结果集。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:07:32.417

尝试这样的事情：

```
select if(count(*) > 0, 1, 0) as exists from fusers f, tusers t, lusers l where f.email = "$email" or t.email = "$email" or l.email = "$email"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:24:11.377

> 我有三张桌子：fusers、tusers、lusers。它们都包含以下行：电子邮件
> 
> 我想合并这三个表，并找出用户提交的变量 $email 是否已存在于电子邮件行中。

您有三个表来描述具有公共字段的用户？然后答案（像往常一样）是规范化您的数据：所有常见数据都应该在一个表中。

# java - 每次我更新我的 Play 框架网站时，防止 MySQL 完全下降

> ID：14552270
> 
> 赞同：0
> 
> 时间：2013-01-27T21:03:00.080
> 
> 标签：java, mysql, frameworks, playframework, playframework-2.0

每次我更新我的 Play 框架网站时，我都会收到一条消息，说数据库需要进化。即使我只更改数据库中一个表的一个小方面，整个数据库也会被清空。我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:34:11.503

我猜你的帖子由于缺乏解释而被否决。不过，我会尽力帮助你。

不确定这会对您有所帮助，但我想知道您的问题来自persistence.xml 文件。

你可能有类似的东西

```
<property name="hibernate.hbm2ddl.auto" value="create-drop"/> 
```

如果有，请将其替换为（它不会再次丢弃您的桌子）

```
<property name="hibernate.hbm2ddl.auto" value="update"/> 
```

我希望我离你的问题不远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:27:49.687

如果您正在使用具有默认 Ebean 支持的 Play 2 Java，请查看同时提出的类似问题：[如何在生产中处理 Play Framework 2 数据库演变，](https://stackoverflow.com/q/14616005/1066240)您将在那里找到如何防止删除数据库的答案。

如果 Ebean 更改`persistance.xml`将不会生效。

**提示：准确写出您正在使用的 Play 版本很重要，因为...** *vs.* *vs等**的默认设置存在差异。此外，在每个版本中，您可以使用不同的数据库访问技术（、、等）-您没有指定该详细信息，因此很难猜测，因此您的问题被低估了。`Play 1``Play 2 Java``Play 2 Scala``JDBC``Hibernate``Ebean`*

# c# - IronRuby，如何将参数变量从 C# 传递到 Ruby？

> ID：14552273
> 
> 赞同：2
> 
> 时间：2013-01-27T21:03:32.730
> 
> 标签：c#, ruby, argument-passing, ironruby

首先，这是我在 SharpDevelop 项目的 bin/debug 文件夹中设置的 ruby​​ 文件的代码：

```
class Run_Marshal

    def initialize(id, name)
        @list = []
        @list[0] = Employee_Info.new(id, name)

        File.open("employee_sheet.es", "wb") {|f| Marshal::dump(@list, f)}
    end

end

class Employee_Info

    attr_accessor :id
    attr_accessor :name

    def initialize(id, name)
        @id = id
        @name = name
    end

end 
```

上面的代码允许将 Employee_Info 对象序列化为文件。请注意，我已经安装了 IronRuby。

下面是我用来执行 ruby​​ 代码的 C# 代码。将参数从 C# 传递给新的 Ruby 对象很重要。

```
void Btn_exportClick(object sender, EventArgs e)
{
            var engine = Ruby.CreateEngine();
            engine.ExecuteFile("Ruby_Classes.rb");
            dynamic ruby = engine.Runtime.Globals;

            int id = 0;
            string name = "John Coles";

            dynamic foo = ruby.Run_Marshal.@new(id, name);
} 
```

最后，这是在另一个不同的 ruby​​ 环境中设置的另一个 ruby​​ 项目的 ruby​​ 代码。

```
@my_foo = File.open("Data/employee_sheet.es", "rb") {|f| Marshal.load(f)}
@name = @my_foo[0].name 
```

当然，我还确保 Employee_Info 类在其他环境中可用。

```
class Employee_Info

    attr_accessor :id
    attr_accessor :name

    def initialize(id, name)
        @id = id
        @name = name
    end

end 
```

该代码在我的 SharpDevelop 项目中完美运行，并在 bin/debug 文件夹中输出了一个序列化（编组）文件。然后我把那个序列化的文件放在另一个 ruby​​ 环境的另一个文件夹中。

当我运行其他环境时，程序崩溃并产生此错误：“ArgumentError发生。未定义的类/模块系统：：”

我又做了一些测试，我意识到当我将上面的代码更改为此时（参见带有三重“*”的行：

```
class Run_Marshal

    def initialize(id, name)
        @list = []
        @list[0] = Employee_Info.new(0, "Beettlejuice") // ***

        File.open("employee_sheet.es", "wb") {|f| Marshal::dump(@list, f)}
    end

end 
```

它现在打开序列化文件没有任何问题。所以我怀疑问题是由于从 C# 代码传递给 ruby​​ 代码的参数。我确实需要为更复杂的任务传递 c# 变量，但到目前为止我不知道如何使它工作。我希望你们能解释什么是错的。那么如何将参数变量从 C# 传递给 Ruby？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:08:11.527

我无法解释如何以及为什么，但我以这种方式解决了问题：

```
class Run_Marshal

    def initialize(id, name)
        @list = []
        @list[0] = Employee_Info.new(id, name.to_s)

        File.open("employee_sheet.es", "wb") {|f| Marshal::dump(@list, f)}
    end
end 
```

我将 to_s 添加到传递的字符串中。显然 Ruby 没有将参数识别为字符串。

# jquery - 使用多选设置 jQuery UI 自动完成的默认值

> ID：14552282
> 
> 赞同：1
> 
> 时间：2013-01-27T21:04:17.800
> 
> 标签：jquery, select, user-interface, autocomplete, multi-select

我正在尝试使用 jQuery UI 自动完成多选来编辑一个类别（准确地说是 200 个类别之一）。大量可能的类别是我想使用 jQuery UI 的自动选择功能的原因。但是，我不知道如何设置预定义的类别。

看看这个小提琴中的自动完成多选输入：http: [//jsfiddle.net/sgxKJ/](http://jsfiddle.net/sgxKJ/)

它做我想做的事。但我喜欢在加载页面时找到一种方法来预定义一个或两个元素（例如示例中的“Java”和“AppleScript”）。如何在页面的 Java 脚本中做到这一点？是否可以在已经存在的同一个“.autocomplete（{”函数）中执行此操作？

作为 css 我使用：

```
<link rel="stylesheet" type="text/css" href="autocomplete/css/ui-lightness/jquery-ui-1.10.0.custom.css"> 
```

我还使用以下CSS：

```
@import url(http://fonts.googleapis.com/css?family=Ubuntu:300);

body, html {
    font-family: Calibri,Verdana,Arial,sans-serif;
    border: 0;
    margin: 0;
    padding: 0;
}

h1,
h2,
h3 {
    font-family: Ubuntu;
    line-height: 1.5;
    margin-bottom: .5em;
}

h1 {
    font-size: 2em;
}

h1.has-sub {
    margin-bottom: 0;
}

h2 {
    font-size: 1.3em;
}

ul {
    list-style: disc;
    margin-left: 1.5em;
    margin-top: .5em;
    margin-bottom: .5em;
    line-height: 1.4;
}

p {
    line-height: 1.4;
    margin-bottom: .5em;
}

p.hint {
    font-style: italic;
    font-size: .8em;
    line-height: 1.5;
    color: #555;
}

p.hint:before {
    content: "Hint: "
}

header {
    background: rgb(76,76,76); /* Old browsers */
    background: -moz-linear-gradient(top, rgba(76,76,76,1) 1%, rgba(63,63,63,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,rgba(76,76,76,1)), color-stop(100%,rgba(63,63,63,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* Opera11.10+ */
    background: -ms-linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* IE10+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#3f3f3f',GradientType=0 ); /* IE6-9 */
    background: linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* W3C */
    padding: .2em 1.2em;
    font-family: Ubuntu;
    font-size: 1.3em;
    color: #999;
    text-shadow: -1px -1px 0 #333;
    text-align: right;
    box-shadow: 0 0 50px 20px rgba(0,0,0,.1);
    border-bottom: 1px solid #fff;
}

header span {
    margin-left: .3em;
    font-size: .6em;
}

article {
    padding: 20px;
}

label {
    vertical-align: top;
    line-height: 1.7;
}

.columns {
    padding: 2em;
    -webkit-column-count: 3;
    -webkit-column-gap: 5em;
    -webkit-column-rule: 1px dashed #ccc;
    column-count: 2;
    column-rule: 1px dashed #ccc;
    border: 1px solid #ccc;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -o-border-radius: 10px;
    border-radius: 10px;
    background-color: #f1f1f1;
}

.columns > h2 {
    -webkit-column-break-before: always;
}

#header {
    height: 10px;
    background: rgb(76,76,76); /* Old browsers */
    background: -moz-linear-gradient(top, rgba(76,76,76,1) 1%, rgba(63,63,63,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,rgba(76,76,76,1)), color-stop(100%,rgba(63,63,63,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* Opera11.10+ */
    background: -ms-linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* IE10+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#3f3f3f',GradientType=0 ); /* IE6-9 */
    background: linear-gradient(top, rgba(76,76,76,1) 1%,rgba(63,63,63,1) 100%); /* W3C */
}

#body {
    padding: 20px;
}

input.vanilla,
.ui-autocomplete-multiselect.ui-state-default {
    display: block;
    background: #fff;
    border: 1px solid #ccc;
    padding: 3px 3px;
    padding-bottom: 0px;
    overflow: hidden;
    cursor: text;
}

input.vanilla {
    line-height: 1.7;
    padding: 2px 5px;
}

.ui-autocomplete-multiselect .ui-autocomplete-multiselect-item .ui-icon {
    float: right;
    cursor: pointer;
}

.ui-autocomplete-multiselect .ui-autocomplete-multiselect-item {
    display: inline-block;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 1px 3px;
    margin-right: 2px;
    margin-bottom: 3px;
    color: #333;
    background-color: #f6f6f6;
}

.ui-autocomplete-multiselect input {
    display: inline-block;
    border: none;
    outline: none;
    height: auto;
    margin: 2px;
    overflow: visible;
    margin-bottom: 5px;
    text-align: left;
}

input.vanilla:focus,
.ui-autocomplete-multiselect.ui-state-active {
    outline: none;
    border: 1px solid #7ea4c7;
    -moz-box-shadow: 0 0 5px rgba(50,150,255,0.5);
    -webkit-box-shadow: 0 0 5px rgba(50,150,255,0.5);
    -khtml-box-shadow: 0 0 5px rgba(50,150,255,0.5);
    box-shadow: 0 0 5px rgba(50,150,255,0.5);
}

.ui-autocomplete {
    border-top: 0;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
} 
```

作为输入，我在 HTML 部分使用它：

```
<input id="AutoMultiSelect" class="vanilla" type="text" value="" size="40" /> 
```

我使用的 jQuery 版本是：

```
<script type="text/javascript" src="autocomplete/js/jquery-1.9.0.js"></script>
<script type="text/javascript" src="autocomplete/js/jquery-ui-1.8.custom.min.js"></script> 
```

以下脚本用于我的 html 文件正文部分的末尾：

```
<script type="text/javascript">
(function($, undefined) {
    if (typeof $.uix !== "object") { $.uix = {}; }
    var ac = $.ui.autocomplete.prototype;
    var _super = {
        _create: ac._create,
        _destroy: ac._destroy,
        _resizeMenu: ac._resizeMenu,
        _suggest: ac._suggest,
        search: ac.search,
        open: ac.open,
        close: ac.close
    };
    ac = $.extend({}, ac, {
        options: $.extend({}, ac.options, {
            multiselect: false,
            triggerChar: false
        }),
        _create: function(){
            var self = this,
                o = self.options;
            _super._create.apply(self);

            if (o.multiselect) {
                self.selectedItems = { };           
                self.multiselect = $("<div></div>")
                    .addClass("ui-autocomplete-multiselect ui-state-default ui-widget")
                    .css("width", self.element.width())
                    .insertBefore(self.element)
                    .append(self.element)
                    .bind("click.autocomplete", function(){
                        self.element.focus();
                    });

                var fontSize = parseInt(self.element.css("fontSize"), 10);
                function autoSize(e){
                    // Hackish autosizing
                    var $this = $(this);
                    $this.width(1).width(this.scrollWidth+fontSize-1);
                };

                var kc = $.ui.keyCode;
                self.element.bind({
                    "keydown.autocomplete": function(e){
                        if ((this.value === "") && (e.keyCode == kc.BACKSPACE)) {
                            var prev = self.element.prev();
                            delete self.selectedItems[prev.text()];
                            prev.remove();
                        }
                    },
                    // TODO: Implement outline of container
                    "focus.autocomplete blur.autocomplete": function(){
                        self.multiselect.toggleClass("ui-state-active");
                    },
                    "keypress.autocomplete change.autocomplete focus.autocomplete blur.autocomplete": autoSize
                }).trigger("change");

                // TODO: There's a better way?
                o.select = o.select || function(e, ui) {
                    $("<div></div>")
                        .addClass("ui-autocomplete-multiselect-item")
                        .text(ui.item.label)
                        .append(
                            $("<span></span>")
                                .addClass("ui-icon ui-icon-close")
                                .click(function(){
                                    var item = $(this).parent();
                                    delete self.selectedItems[item.text()];
                                    item.remove();
                                })
                        )
                        .insertBefore(self.element);

                    self.selectedItems[ui.item.label] = ui.item;
                    self._value("");
                    return false;
                }
            }
            return this;
        },
        _resizeMenu: function(){
            if (this.options.multiselect) {
                var ul = this.menu.element;
                ul.outerWidth( Math.max(
                    ul.width( "" ).outerWidth(),
                    this.multiselect.outerWidth()
                ) );
            } else {
                _super._resizeMenu.apply(this);
            }
        },
        _suggest: function( items ) {
            var elm = this.element;
            // Override this.element with our multiselect for proper positioning
            this.element = this.options.multiselect ? this.multiselect : this.element;
            _super._suggest.apply(this, [items]);   
            this.element = elm;
        },
        search: function( value, event ) {
            value = value != null ? value : this._value();
            if (this.options.triggerChar) {
                if (value.substring(0,1) != this.options.triggerChar) {
                    return;
                } else {
                    value = value.substring(1);
                }
            }
            return _super.search.apply(this, [value, event]);
        },
        // Borrowed from 1.9
        _value: function( value ) {
            return this.valueMethod.apply( this.element, arguments );
        },
        // Borrowed from 1.9
        valueMethod: function() {
            var result = this[this.is( "input" ) ? "val" : "text"].apply(this, arguments);
            this.trigger("change");
            return result;
        }
    });

    $.uix.autocomplete = ac;
    $.widget("uix.autocomplete", $.uix.autocomplete);
})(jQuery);

var availableTags = [
    "ActionScript",
    "AppleScript",
    "Asp",
    "BASIC",
    "C",
    "C++",
    "Clojure",
    "COBOL",
    "ColdFusion",
    "Erlang",
    "Fortran",
    "Groovy",
    "Haskell",
    "Java",
    "JavaScript",
    "Lisp",
    "Perl",
    "PHP",
    "Python",
    "Ruby",
    "Scala",
    "Scheme"
];
</script>

<script>
    $( "#AutoMultiSelect" ).autocomplete({
        source: availableTags,
        multiselect: true
    });
</script> 
```

PS我是这里的新手，已经尝试了我能找到的stackoverflow中的所有答案。但是，似乎没有一个适用于上面的代码。

# java - java中.equals对于2个字符串的时间复杂度是多少？

> ID：14552285
> 
> 赞同：13
> 
> 时间：2013-01-27T21:04:32.293
> 
> 标签：java, string, big-o

我想知道 Java 中 .equals 运算符的时间复杂度（大 O）对于两个字符串是多少。

基本上，如果我做了 stringOne.equals(stringTwo) 这表现如何？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-26T03:21:34.947

The other answers here are over-simplistic.

In general, proving that two different Strings are equal is `O(n)` because you *may* have to compare each character.

However this is only a worst-case: there are many shortcuts that mean that the `equals()` method can perform much better than this in the average / typical cases:

*   It's `O(1)` if the Strings are identical: they are the same object so equal by definition so the result is true
*   It's `O(1)` if you are able to check pre-computed hashcodes, which can prove that two Strings are *not equal* (obviously, it can't help prove that two Strings are equals because many Strings hash to the same hashcode).
*   It's `O(1)` if the Strings are of different lengths (they can't possibly be equal, so the result is false)
*   You only need to detect one different character to prove that Strings are not equal. So for *randomly distributed* Strings, it is actually average `O(1)` time to compare two Strings. If your Strings aren't completely random, then the result may be anywhere between `O(1)` and `O(n)` depending on the data distribution.

As you can see, the exact performance **depends on the distribution of the data**.

Apart from that: this is **implementation dependent** so exact performance characteristics will depend on the version of Java used. However, to my knowledge, all the current main Java implementations do the optimisations listed above so you can expect `equals()` performance on Strings to be pretty fast.

A final trick: If you use **String interning** then all Strings that are equal will be mapped to the same object instance. Then you can use the extremely fast `==` check for object identity in place of `equals()`, which is guaranteed to be `O(1)`. This approach has downsides (you may need to intern a lot of Strings, causing memory issues, and you need to strictly remember to intern any Strings that you plan to use with this scheme) but it is extremely useful in some situations.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-27T21:07:41.500

最坏的情况是 O(n)，除非两个字符串是同一个对象，在这种情况下是 O(1)。

（虽然在这种情况下，n 是指从第一个字符开始的两个字符串中匹配字符的数量，而不是字符串的总长度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-25T15:37:50.750

为了添加出色的答案，我们可以看到它查看代码：

```
public boolean equals(Object anObject) {
    if (this == anObject) { // O(1)
        return true;
    }
    if (anObject instanceof String) //O(1)  {
        String anotherString = (String)anObject;
        int n = value.length;
        if (n == anotherString.value.length) { // O(1)
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = 0;
            while (n-- != 0) {  // O(n)
                if (v1[i] != v2[i]) //O(1)
                    return false;
                i++;
            }
            return true;
        }
    }
    return false;
} 
```

最佳情况：O(1)

最坏情况：O(n)

# jquery - jQuery克隆失去了一些功能？

> ID：14552286
> 
> 赞同：2
> 
> 时间：2013-01-27T21:04:32.243
> 
> 标签：jquery, clone, jqxwidgets

`clone`如果用户决定“取消”，我正在使用 jQuery克隆表单的一部分并恢复到它们的原始状态（保存在克隆中）。

我的克隆代码如下所示：

```
$(filterSec).find("select option:selected").attr("selected", true); // clone doesn't save user selections
savedFilterSec = filterSec.clone(true); 
```

以及要恢复的代码：

```
$('.openFilter').replaceWith(savedFilterSec); 
```

这适用于我的大部分表格。问题是我有一些[jqxListBoxes](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxlistbox/jquery-listbox-api.htm)在用户取消时恢复到原始状态，但不再工作 - 我不能再选择任何东西（或拖放，我使用[jqxdragdrop](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxdragdrop/jquery-dragdrop-api.htm)设置）。是否有一些没有被克隆的功能？“回滚”后如何重新激活列表框？

**编辑：**

这似乎是所有 jqxWidgets 的问题，而不仅仅是列表框。

# pattern-matching - SML 如何定义正确的选项

> ID：14552287
> 
> 赞同：2
> 
> 时间：2013-01-27T21:04:43.920
> 
> 标签：pattern-matching, sml, smlnj

为什么下面的代码不起作用？

```
fun sum_list xs =
case xs of
    [] => NONE
 | x::xs' => SOME (x+sum_list xs') 
```

当它不是 NONE 它为零并且当我删除 SOME 时，此代码运行良好。我知道对于一个空列表的总和为零是合理的答案。但是为什么下面的例子失败了？

更新：通过遵循 Diego 的回答使其工作：

```
fun sum_list xs =
    case xs of
        [] => NONE
      | x => 
        let
            fun slist x =
                case x of
                    [] => 0
                  | x::xs' => x + slist xs'
        in 
            SOME (slist x)
        end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T21:22:23.597

问题是该函数返回一个`'a option`但在 lat 表达式中你使用它就好像它返回一个 int：

```
x + sum_list xs' 
```

您必须构建一个仅在列表中工作并返回数字（而不是选项）的内部函数，然后将最终结果装箱到选项中，或者评估`sum_list`返回时的结果以查看它是否包含值或它是`NONE`. 我可以两种方式都写，但你应该在看到写出的解决方案之前尝试一下。

# c# - 创建一个实体代码优先数据库，其中包含复杂对象以及它们之间的关系

> ID：14552290
> 
> 赞同：0
> 
> 时间：2013-01-27T21:04:53.917
> 
> 标签：c#, entity-framework, nested, code-first, relationship

我正在尝试使用代码优先实体框架创建数据库，但不清楚如何使用复杂的嵌套对象完成此操作。我已经阅读了有关 MS 和一些博客等的教程，但它们看起来非常简单，希望有人能给我一些关于如何正确执行此操作的指示。

我有一个与 Web 服务器通信的应用程序。每个设备都在服务器中注册，并且不时地从服务器向客户端推送/拉取一些数据。现在我正在创建一些调查。每个设备都可以有一些被询问的调查问题。每个调查都有一个他们给出的答案列表。每个答案都应与其所属的问题以及给出该答案的设备配对。

所以这里有一些部分代码。请建议正确的方法来创建我需要的关系以及最佳推荐实践中的类结构。

```
public class Device
    {
        public virtual int Id { get; set; }
        [Required]
        public virtual string Udid { set; get; }
        public virtual string Contact { set; get; }
        public virtual DateTime EnrollDate { get; set; }
        public virtual List<SurveyQuestion> Surveys { get; set; } 
    }

public class SurveyQuestion
    {
        public virtual int Id { set; get; }
        public virtual string Question { get; set; }
        public virtual List<Answer> Answers { get; set; }
        public virtual DateTime Time { get; set; }
    }

public class Answer
    {
        public virtual int Id { get; set; }
        public virtual string UserAnswer { get; set; }
        public virtual DateTime Time { get; set; }
        public virtual SurveyQuestion SurveyQuestion { get; set; }
        public virtual Device DeviceWhichAnswered {get; set;}
    } 
```

数据源的抽象

```
public interface IDataSource
    {
        IQueryable<Device> Devices { get; }
        IQueryable<SurveyQuestion> SurveyQuestions { get; }
        IQueryable<Answer> Answers { get; }
        void Save();
    } 
```

以及实现实体 db 的具体类

```
public class MyDb : DbContext, IDataSource
    {
        public MyDb() : base("DefaultConnection")
        {
            Debug.Write(Database.Connection.ConnectionString);
        }
        public DbSet<Device> Devices { get; set; }
        public DbSet<SurveyQuestion> SurveyQuestions { get; set; }
        public DbSet<Answer> Answers { get; set; }
        IQueryable<Device> IDataSource.Devices
        {
            get { return Devices; }
        }
        IQueryable<SurveyQuestion> IDataSource.SurveyQuestions
        {
            get { return SurveyQuestions; }
        }
        IQueryable<Answer> IDataSource.Answers
        {
            get { return Answers; }
        }
} 
```

# java - 在 Java 集中并行搜索

> ID：14552297
> 
> 赞同：5
> 
> 时间：2013-01-27T21:05:35.087
> 
> 标签：java, multithreading, collections

我有一个`List<String>`被调用`lines`的和一个巨大的（~3G）`Set<String>`被调用`voc`的。我需要从中找到所有`lines`行`voc`。我可以用这种多线程方式吗？

目前我有这个简单的代码：

```
for(String line: lines) {
  if (voc.contains(line)) {
    // Great!!
  }
} 
```

有没有办法同时搜索几行？可能有现有的解决方案吗？

PS：我正在使用`javolution.util.FastMap`，因为它在填充过程中表现更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T23:20:07.443

这是一个可能的实现。请注意，错误/中断处理已被省略，但这可能会给您一个起点。我包含了一个 main 方法，因此您可以将其复制并粘贴到您的 IDE 中以进行快速演示。

***编辑**：清理了一些东西以提高可读性和列表分区*

```
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import java.util.concurrent.Callable;
import java.util.concurrent.CompletionService;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorCompletionService;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class ParallelizeListSearch {

    public static void main(String[] args) throws InterruptedException, ExecutionException {
        List<String> searchList = new ArrayList<String>(7);
        searchList.add("hello");
        searchList.add("world");
        searchList.add("java");
        searchList.add("debian");
        searchList.add("linux");
        searchList.add("jsr-166");
        searchList.add("stack");

        Set<String> targetSet = new HashSet<String>(searchList);

        Set<String> matchSet = findMatches(searchList, targetSet);
        System.out.println("Found " + matchSet.size() + " matches");
        for(String match : matchSet){
            System.out.println("match:  " + match);
        }
    }

    public static Set<String> findMatches(List<String> searchList, Set<String> targetSet) throws InterruptedException, ExecutionException {
        Set<String> locatedMatchSet = new HashSet<String>();

        int threadCount = Runtime.getRuntime().availableProcessors();   

        List<List<String>> partitionList = getChunkList(searchList, threadCount);

        if(partitionList.size() == 1){
            //if we only have one "chunk" then don't bother with a thread-pool
            locatedMatchSet = new ListSearcher(searchList, targetSet).call();
        }else{  
            ExecutorService executor = Executors.newFixedThreadPool(threadCount);
            CompletionService<Set<String>> completionService = new ExecutorCompletionService<Set<String>>(executor);

            for(List<String> chunkList : partitionList)
                completionService.submit(new ListSearcher(chunkList, targetSet));

            for(int x = 0; x < partitionList.size(); x++){
                Set<String> threadMatchSet = completionService.take().get();
                locatedMatchSet.addAll(threadMatchSet);
            }

            executor.shutdown();
        }

        return locatedMatchSet;
    }

    private static class ListSearcher implements Callable<Set<String>> {

        private final List<String> searchList;
        private final Set<String> targetSet;
        private final Set<String> matchSet = new HashSet<String>();

        public ListSearcher(List<String> searchList, Set<String> targetSet) {
            this.searchList = searchList;
            this.targetSet = targetSet;
        }

        @Override
        public Set<String> call() {
            for(String searchValue : searchList){
                if(targetSet.contains(searchValue))
                    matchSet.add(searchValue);
            }

            return matchSet;
        }

    }

    private static <T> List<List<T>> getChunkList(List<T> unpartitionedList, int splitCount) {
        int totalProblemSize = unpartitionedList.size();
        int chunkSize = (int) Math.ceil((double) totalProblemSize / splitCount);

        List<List<T>> chunkList = new ArrayList<List<T>>(splitCount);

        int offset = 0;
        int limit = 0;
        for(int x = 0; x < splitCount; x++){
            limit = offset + chunkSize;
            if(limit > totalProblemSize)
                limit = totalProblemSize;
            List<T> subList = unpartitionedList.subList(offset, limit);
            chunkList.add(subList);
            offset = limit;
        }

        return chunkList;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:10:52.137

绝对有可能使用多个线程并行化它。您可以执行以下操作：

1.  将列表分解为不同的“块”，每个执行搜索的线程一个。
2.  让每个线程查看它的块，检查每个字符串是否在集合中，如果是，则将字符串添加到结果集中。

例如，您可能有以下线程例程：

```
public void scanAndAdd(List<String> allStrings, Set<String> toCheck,
                       ConcurrentSet<String> matches, int start, int end) {
    for (int i = start; i < end; i++) {
        if (toCheck.contains(allStrings.get(i))) {
            matches.add(allStrings.get(i));
        }
    }
} 
```

然后，您可以根据需要生成尽可能多的线程来运行上述方法并等待所有线程完成。然后将生成的匹配存储在`matches`.

为简单起见，我将输出设置为 a `ConcurrentSet`，它会自动消除由于写入导致的竞争条件。`allStrings`由于您只对要检查的字符串列表和字符串集进行读取，因此在读取或执行查找时不需要同步`toCheck`。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:11:10.807

如果您正在寻找这个，只需在不同线程之间拆分*行*（至少在 Oracle JVM 中）会将工作分散到所有 CPU 中。我喜欢使用 CyclicBarrier，可以更轻松地控制这些线程。

[http://javarevisited.blogspot.cz/2012/07/cyclicbarrier-example-java-5-concurrency-tutorial.html](http://javarevisited.blogspot.cz/2012/07/cyclicbarrier-example-java-5-concurrency-tutorial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T23:24:23.227

另一种选择是使用[Akka](http://akka.io)，它非常简单地完成了这些事情。

实际上，在使用 Akka 进行了一些搜索工作之后，我也可以告诉您的其中一件事是它支持两种并行化此类事物的方式：通过可组合期货或代理。对于您想要的，可组合期货就足够了。然后，Akka 实际上并没有增加那么多：Netty 提供了大规模并行的 io 基础设施，Futures 是 jdk 的一部分，但是 Akka 确实使将这两者放在一起并在需要时/如果需要时扩展它们变得非常简单。

# jquery - 使用 jQuery 将图像插入表格

> ID：14552300
> 
> 赞同：0
> 
> 时间：2013-01-27T21:06:04.367
> 
> 标签：jquery, html-table

我正在尝试将包含图像的 jQuery 代码插入到`<td>`表格中，但图像超出了表格范围。我尝试了很多方法，但没有奏效。

**Javascript**

```
<script type="text/javascript">
    $(document).ready(function() { 
       var $elements = $('#picOne, #picTwo, #picTree, #picFour');

       function anim_loop(index) {
           $elements.eq(index).fadeIn(4000, function() {
               var $self = $(this);
               setTimeout(function() {
               $self.fadeOut(4000);
               anim_loop((index + 1) % $elements.length);
               }, 6000);
           });
        }
        anim_loop(0); // start with the first element

    });
</script> 
```

**HTML**

```
<table align="center" width="975" border="1">

<tr>
<td>
<div id="picOne"><img src="pic1.jpg" /></div>
<div id="picTwo"><img src="pic1b.jpg" /></div>
<div id="picTree"><img src="2b.jpg" /></div>
<div id="picFour"><img src="2.jpg" /></div>
</td>
</tr>

</table>
</body>
</html> 
```

我该如何解决？

# c# - 当应用重新聚焦时重新启动 MediaCapture

> ID：14552301
> 
> 赞同：4
> 
> 时间：2013-01-27T21:06:29.370
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

在 Windows 8 应用程序 (C#) 中使用类`MediaCapture`(`Windows.Media.Capture`应用程序，然后再次单击以返回我的应用程序）。

我现在尝试重新启动预览的方式是：

```
Application.Current.Resuming += (sender, o) => StartVideo(video);
Application.Current.Suspending += (sender, args) => StopVideo();

internal async void StartVideo(CaptureElement e)
{
    try
    {
        this.stream = new MediaCapture();
        await this.stream.InitializeAsync();
        e.Source = this.stream;
        await this.stream.StartPreviewAsync();
    }
    catch
    {
        new MessageDialog("Unable to start the video capture.").ShowAsync();
    }
}

internal async void StopVideo()
{
    try
    {
        await stream.StopPreviewAsync();
    }
    catch { }
} 
```

但是，在我上面描述的示例中， `Resuming`and`Suspending`事件似乎没有触发。这不是“暂停”应用程序吗？如果是这样，它是什么/我应该注意哪些事件？

或者，我是否应该使用其中一种方法，而不是使用长时间运行的“预览”来显示网络摄像头`this.stream.StartRecord...`？

**编辑：**如果我使用 Visual Studio 的 Suspend/Resume 按钮（在调试位置工具栏上）手动触发事件，该功能将按需要工作（当应用程序恢复时视频会重新启动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:01:03.180

我看到一些错误的地方：

*   你应该避免`async void`；用于`async Task`除事件处理程序之外的所有方法。
*   对于诸如 的“命令”事件，如果您有事件处理程序`Suspending`，请使用 提供的延迟。`args.SuspendingOperation.GetDeferral``async`

# heroku - OpenSSL::Cipher::CipherError 在 JRuby 上使用 Rails4

> ID：14552303
> 
> 赞同：21
> 
> 时间：2013-01-27T21:06:32.613
> 
> 标签：heroku, openssl, jruby, ruby-on-rails-4

Rails4 默认使用加密的 cookie 会话存储。当应用程序尝试加密 cookie 时，会引发以下错误：`OpenSSL::Cipher::CipherError: Illegal key size: possibly you need to install Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files for your JRE`（stacktrace：[https](https://gist.github.com/8ba56b18060ae30e4d44) ://gist.github.com/8ba56b18060ae30e4d44 ）。

[正如这里](http://jira.codehaus.org/browse/JRUBY-4326)提到的，这可以通过降级密码学或安装 JCE 来解决——第一个是我真的不想做的事情，而后者在 heroku 上是不可能的（afaik）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-15T05:01:09.747

不确定它是否适用于 Heroku，但这[解决了](https://github.com/jruby/jruby/wiki/UnlimitedStrengthCrypto)我本地 Jruby 上的问题。

创建 config/initializers/unlimited_strength_cryptography.rb：

```
if RUBY_PLATFORM == 'java' # Allows the application to work with other Rubies if not JRuby
  require 'java'
  java_import 'java.lang.ClassNotFoundException'

  begin
    security_class = java.lang.Class.for_name('javax.crypto.JceSecurity')
    restricted_field = security_class.get_declared_field('isRestricted')
    restricted_field.accessible = true
    restricted_field.set nil, false
  rescue ClassNotFoundException => e
    # Handle Mac Java, etc not having this configuration setting
    $stderr.print "Java told me: #{e}n"
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-09T14:17:11.873

Heroku 开发中心现在有这篇文章：[“自定义 JDK”](https://devcenter.heroku.com/articles/customizing-the-jdk)。

> 在某些情况下，需要将文件与 JDK 捆绑在一起，以便在运行时 JVM 中公开功能。例如，为了利用更强大的密码库，通常会将无限强度的 Java 加密扩展 (JCE) 添加到 JDK。为了处理这种情况，Heroku 会将应用程序指定的 .jdk-overlay 文件夹中的文件复制到 JDK 的目录结构中。

以下是将 JCE 文件添加到您的应用程序的方法：

1.  在应用程序的根目录中，创建一个`.jdk-overlay`文件夹

2.  复制 JCE`local_policy.jar`并`US_export_policy.jar`进入`.jdk-overlay/jre/lib/security/`

3.  提交文件

    > $ git add .jdk-overlay
    > $ git commit -m "自定义 JCE 文件"

4.  部署到 Heroku

    > $ git push heroku 大师

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T14:26:55.410

使用[Leons](https://stackoverflow.com/users/476159/leons)的方法，这解决了我在生产中的问题，但在没有救援的情况下破坏了开发。

```
# config/initializers/unrestricted_crypto.rb
begin # Enable 'restricted' cipher libraries on crippled systems
  prop = Java::JavaxCrypto::JceSecurity.get_declared_field 'isRestricted'
  prop.accessible = true
  prop.set nil, false
rescue NameError
end 
```

这是因为不同的javas有不同的flavas......我会让自己出去。

# php - PHP - 使用没有 .pdf 扩展名的 URL 抓取 PDF

> ID：14552305
> 
> 赞同：0
> 
> 时间：2013-01-27T21:06:41.167
> 
> 标签：php, pdf, filepicker.io

我正在使用 Filepicker.io 将 PDF 上传到我的应用程序。我拥有所有这些 URL，现在我正在尝试使用 PDF Tool Kit PHP 库合并其中的一些 PDF。它对我不起作用，所以我在 PHP 上使用“file_exists”运行了一些测试，但它一直返回 false。

我认为这与 URL 最后没有“.pdf”扩展名的事实有关。这就是它们的样子：“ [https://www.filepicker.io/api/file/LCvbgpqEQLGwt8bfnqc1](https://www.filepicker.io/api/file/LCvbgpqEQLGwt8bfnqc1) ”

有谁知道我如何使用 PHP 提取 PDF 以便使用 PDF 工具包库合并这些文件？

谢谢！

阿兰·F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:12:08.630

[`file_exists`](http://php.net/file_exists)不适用于 URL，仅适用于本地文件。而是使用命令将文件下载到临时目录[`copy`](http://php.net/copy)。

如果无法下载文件，则复制命令将返回`false`.

```
$exists = copy('https://www.filepicker.io/api/file/LCvbgpqEQLGwt8bfnqc1', '/tmp/example.pdf');
if (!$exists) throw new Exception("PDF could not be downloaded"); 
```

使用 PDF 工具包中下载的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:26:01.560

*编辑：*这并不能解决这个特定问题，但确实解决了它不起作用的理论，因为“URL 最后没有“.pdf”扩展名。”

您可以将内容添加到文件选择器 URL 的末尾，并带有尾随 +

以下网址是等效的：

```
https://www.filepicker.io/api/file/LCvbgpqEQLGwt8bfnqc1
https://www.filepicker.io/api/file/LCvbgpqEQLGwt8bfnqc1+name.pdf 
```

# bitmap - 如何在 Direct2D 中执行高质量的位图缩放？

> ID：14552306
> 
> 赞同：5
> 
> 时间：2013-01-27T21:06:43.020
> 
> 标签：bitmap, gdi, scaling, direct2d

出于性能原因，我正在尝试将应用程序从 GDI+ 移动到 Direct2D。

以前，我在 HALFTONE 模式下使用 StretchBlt()，效果很好，但效果很慢。

现在我使用 RenderTarget->DrawBitmap() 在 Direct2D 中绘图，但它只有两种模式，LINEAR 和 NEAREST_NEIGHBOR，这两种模式都不是很好。LINEAR 更好，但仍然会产生可怕的伪影。

Direct2D 是否有任何高质量的缩放选项？如果不是，我最好坚持使用 GDI 还是有其他选择？这是一个在带有各种 Win32 控件的窗口中运行的 Windows 应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T00:28:58.857

Direct2D 1.0 仅支持线性和最近邻插值。Direct2D 1.1 添加了四种额外的插值算法。这些可通过新的设备上下文渲染目标 ( `ID2D1DeviceContext`) 及其`DrawBitmap`和`DrawImage`方法获得。看看`D2D1_INTERPOLATION_MODE`枚举：

[http://msdn.com/library/hh447004.aspx](http://msdn.com/library/hh447004.aspx)

# xml - 运行 perl 脚本以解析 OpenStreetMap XML 文件时出现“内存不足”错误

> ID：14552309
> 
> 赞同：1
> 
> 时间：2013-01-27T21:06:51.877
> 
> 标签：xml, perl, xml-parsing, openstreetmap

我使用 Debian GNU/Linux Squeeze。

当我尝试运行此脚本时，我收到停止运行脚本错误消息“内存不足！”。

脚本：

```
use XML::Parser;
my $Filename = shift();

# Temporary data
my (%MainAttr,$Type,%Tags, @WaySegments);
# Stats
my %AllTags;
# Stored data
my (@Nodes, @Segments, @Ways, %Stats);

# Processing stage
#----------------------------------------------
my $P = new XML::Parser(Handlers => {Start => \&DoStart, End => \&DoEnd, Char => \&DoChar});
$P->parsefile($Filename);
printf STDERR "Creating output files\n";

# Combine way data into segments
#----------------------------------------------
if(open(WAYS,">ways.txt")){
  foreach my $Way (@Ways){
    #printf WAYS "Way: %s,%s\n", $Way->{"segments"}, $Way->{"name"};
    my @SubSegments = split(/,/,$Way->{"segments"});
    $Stats{"empty ways"}++ if(scalar(@SubSegments) < 1); 

    printf WAYS "Copying keys: %s to segments %s\n",
      join(",",keys(%$Way)),
      join(",",@SubSegments);

    # Each segment in a way inherits the way's attributes
    foreach my $Segment(@SubSegments){
      foreach my $Key(keys(%$Way)){
        $Segments[$Segment]{$Key} = $Way->{$Key}
      }
    }
  }
  close WAYS;
}

# Main output (segments)
#----------------------------------------------
if(open(OSM, ">osm.txt")){
  foreach my $Segment(@Segments){
    my $From = $Segment->{"from"};
    my $To = $Segment->{"to"};
    $Stats{"segments without endpoints"}++ if($From == 0 or $To == 0);
    printf OSM "%f,%f,%f,%f,%s,%s,%s\n",
      $Nodes[$From]{"lat"},
      $Nodes[$From]{"lon"},
      $Nodes[$To]{"lat"},
      $Nodes[$To]{"lon"},
      $Segment->{"class"},
      $Segment->{"name"},
      $Segment->{"highway"};
  }
  close OSM;
}

# Secondary output (named points)
#----------------------------------------------
if(open(POINTS, ">points.txt")){
  foreach my $Node(@Nodes){
    $Stats{"Nodes with zero lat/long"}++ if($Node->{"lat"} == 0 and $Node->{"lon"} == 0);

    if($Node->{"name"} || $Node->{"amenity"} || $Node->{"class"}){
      printf POINTS "%f,%f,%s,%s,%s\n",
        $Node->{"lat"},
        $Node->{"lon"},
        $Node->{"name"},
        $Node->{"amenity"},
        $Node->{"class"};
      }
  }
  close POINTS;
}

# Statistics output
#----------------------------------------------
if(open(STATS, ">stats.txt")){
  foreach(sort {$AllTags{$b} <=> $AllTags{$a}} keys(%AllTags)){
    printf STATS "* %d %s\n", $AllTags{$_}, $_;
  }
  printf STATS "\n\nStats:\n";
  foreach(keys(%Stats)){
    printf STATS "* %d %s\n", $Stats{$_}, $_;
  }
}
printf STDERR "Done\n";
exit;

# Function is called whenever an XML tag is started
#----------------------------------------------
sub DoStart()
{
  my ($Expat, $Name, %Attr) = @_;

  if($Name eq "node"){
    undef %Tags;
    %MainAttr = %Attr;
    $Type = "n";
  }
  if($Name eq "segment"){
    undef %Tags;
    %MainAttr = %Attr;
    $Type = "s";
  }
  if($Name eq "way"){
    undef %Tags;
    undef @WaySegments;
    %MainAttr = %Attr;
    $Type = "w";
  }
  if($Name eq "tag"){
    # TODO: protect against id,from,to,lat,long,etc. being used as tags
    $Tags{$Attr{"k"}} = $Attr{"v"};
    $AllTags{$Attr{"k"}}++;
    $Stats{"tags"}++;
  }
  if($Name eq "seg"){
    push(@WaySegments, $Attr{"id"});
  }
}

# Function is called whenever an XML tag is ended
#----------------------------------------------
sub DoEnd(){
  my ($Expat, $Element) = @_;
  if($Element eq "node"){
    my $ID = $MainAttr{"id"};
    $Nodes[$ID]{"lat"} = $MainAttr{"lat"};
    $Nodes[$ID]{"lon"} = $MainAttr{"lon"};
    foreach(keys(%Tags)){
      $Nodes[$ID]{$_} = $Tags{$_};
    }
    $Stats{"named nodes"}++ if($Nodes[$ID]{"name"});
    $Stats{"tagged nodes"}++ if($MainAttr{"tags"});
    $Stats{"nodes"}++;
    #print "Node:".join(",",keys(%Tags))."\n" if(scalar(keys(%Tags))>0);
  }
  if($Element eq "segment"){
    my $ID = $MainAttr{"id"};
    $Segments[$ID]{"from"} = $MainAttr{"from"};
    $Segments[$ID]{"to"} = $MainAttr{"to"};
    foreach(keys(%Tags)){
      $Segments[$ID]{$_} = $Tags{$_};
    }
    $Stats{"tagged segments"}++ if($MainAttr{"tags"});
    $Stats{"segments"}++;
  }
  if($Element eq "way"){
    my $ID = $MainAttr{"id"};
    $Ways[$ID]{"segments"} = join(",",@WaySegments);
    foreach(keys(%Tags)){
      $Ways[$ID]{$_} = $Tags{$_};
    }    
    $Stats{"Ways"}++;
  }
}

# Function is called whenever text is encountered in the XML file
#----------------------------------------------
sub DoChar(){
  my ($Expat, $String) = @_;
} 
```

终端：

```
root@Delta:~/Perl/Map# perl convert.pl map.osm
Out of memory!

root@Delta:~/Perl/Map# ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 16382
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) unlimited
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

我需要使用脚本将 OpenStreetMap XML 文档转换为文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T23:26:41.503

我发现您使用数字元素 ID 作为`@nodes`和的索引`@ways`。我的测试中的有效索引`@nodes`从 开始`1010888852`，所以 perl 试图创建超过十亿个标量值来`undef`填充元素`0`。`1010888851`

将这些变量更改为哈希（以及`@segments`在我的测试中为空但使用方式相同的 ）似乎可以解决问题。

请检查这个程序，它纠正了我发现的错误，它是用 Perl 编写的（你似乎是一个 C 程序员）。

```
use strict;
use warnings;

use autodie;

STDOUT->autoflush;
STDERR->autoflush;

use XML::Parser;

my ($filename) = @ARGV;

# Processing stage
#----------------------------------------------
my $parser = XML::Parser->new(
  Handlers => { Start => \&do_start, End => \&do_end, Char => \&do_char });
$parser->parsefile($filename);

print STDERR "Creating output files\n";

# Stats
my %all_tags;

# Stored data
my (%nodes, %segments, %ways, %stats);

# Combine way data into segments
#----------------------------------------------
open WAYS, '>', 'ways.txt';

foreach my $way (values %ways) {

  #printf WAYS "way: %s,%s\n", $way->{segments}, $way->{name};
  my @subsegments = split /,/, $way->{segments};
  $stats{'empty ways'}++ if @subsegments < 1;

  printf WAYS "Copying keys: %s to segments %s\n",
      join(',', keys %$way),
      join(',', @subsegments);

  # Each segment in a way inherits the way's attributes
  foreach my $segment (@subsegments) {
    foreach my $key (keys %$way) {
      $segments{$segment}{$key} = $way->{$key};
    }
  }
}

close WAYS;

# Main output (segments)
#----------------------------------------------
open OSM, '>', 'osm.txt';

foreach my $segment (values %segments) {

  my $from = $segment->{from};
  my $to = $segment->{to};
  $stats{'segments without endpoints'}++ if $from == 0 or $to == 0;

  printf OSM "%f,%f,%f,%f,%s,%s,%s\n",
      $nodes{$from}{lat},
      $nodes{$from}{lon},
      $nodes{$to}{lat},
      $nodes{$to}{lon},
      $segment->{class},
      $segment->{name},
      $segment->{highway};
}

close OSM;

# Secondary output (named points)
#----------------------------------------------
open POINTS, '>', 'points.txt';

foreach my $node (values %nodes) {
  $stats{'nodes with zero lat/long'}++
      if $node->{lat} == 0 and $node->{lon} == 0;

  if ($node->{name} or $node->{amenity} or $node->{class}) {
    printf POINTS "%f,%f,%s,%s,%s\n",
        $node->{lat} // 'none',
        $node->{lon} // 'none',
        $node->{name} // 'none',
        $node->{amenity} // 'none',
        $node->{class} // 'none';
  }
}

close POINTS;

# Statistics output
#----------------------------------------------
open STATS, '>', 'stats.txt';

foreach (sort { $all_tags{$b} <=> $all_tags{$a} } keys %all_tags) {
  printf STATS "* %d %s\n", $all_tags{$_}, $_;
}

printf STATS "\n\nStats:\n";

foreach (keys %stats) {
  printf STATS "* %d %s\n", $stats{$_}, $_;
}

close STATS;

printf STDERR "Done\n";

exit;

# Temporary data
my ($main_attr, %tags, @way_segments);

# Function is called whenever an XML tag is started
#----------------------------------------------
sub do_start {

  my ($expat, $name, %attr) = @_;

  if ($name eq 'node') {
    %tags = ();
    $main_attr = \%attr;
  }
  elsif ($name eq 'segment') {
    %tags = ();
    $main_attr = \%attr;
  }
  elsif ($name eq 'way') {
    %tags = ();
    @way_segments = ();
    $main_attr = \%attr;
  }
  elsif ($name eq 'tag') {

    # TODO: protect against id,from,to,lat,long,etc. being used as tags
    $tags{ $attr{k} } = $attr{v};
    $all_tags{ $attr{k} }++;
    $stats{tags}++;
  }
  elsif ($name eq 'seg') {
    push @way_segments, $attr{id};
  }
}

# Function is called whenever an XML tag is ended
#----------------------------------------------
sub do_end {
  my ($expat, $element) = @_;

  if ($element eq 'node') {
    my $id = $main_attr->{id};

    $nodes{$id}{lat} = $main_attr->{lat};
    $nodes{$id}{lon} = $main_attr->{lon};
    $nodes{$id}{$_} = $tags{$_} foreach keys %tags;

    $stats{'named nodes'}++  if $nodes{$id}{name};
    $stats{'tagged nodes'}++ if $main_attr->{tags};
    $stats{nodes}++;

    #print "node:", join(',', keys %tags), "\n" if keys %tags > 0;
  }
  elsif ($element eq 'segment') {
    my $id = $main_attr->{id};

    $segments{$id}{from} = $main_attr->{from};
    $segments{$id}{to} = $main_attr->{to};
    $segments{$id}{$_} = $tags{$_} for keys %tags;

    $stats{'tagged segments'}++ if $main_attr->{tags};
    $stats{segments}++;
  }
  elsif ($element eq 'way') {
    my $id = $main_attr->{id};

    $ways{$id}{segments} = join ',', @way_segments;
    $ways{$id}{$_} = $tags{$_} for keys %tags;

    $stats{ways}++;
  }
}

# Function is called whenever text is encountered in the XML file
#----------------------------------------------
sub do_char {
  my ($expat, $string) = @_;
} 
```

# verilog - 在 Verilog 中模拟输出等于 zzzzzz

> ID：14552310
> 
> 赞同：0
> 
> 时间：2013-01-27T21:06:54.320
> 
> 标签：verilog

代码很简单，有一堆ifs把某个值放入变量BUS中，模拟时BUS输出等于：zzzzzzzzzzzzzzzz的问题，而它应该有一些与if case对应的值。

```
module Bus (AR_OUT, IR_OUT, DR_OUT, PC_OUT, AC_OUT, MEM_OUT, read, S, BUS);

 input [11:0]AR_OUT ;
 input [11:0]PC_OUT ;
 input [15:0]IR_OUT ;
 input [15:0]DR_OUT ;
 input [15:0]AC_OUT ;
 input [15:0]MEM_OUT ;
 input read ;
 input [2:0]S ;

 output [15:0]BUS ;

 reg [15:0]BUS ;
 // inputs are implicitly defined as wire

always @*
   begin

 if(S == 3'b001)
   BUS = AR_OUT;

 else if(S == 3'b010)
   BUS = PC_OUT;  

 else if(S == 3'b011)
   BUS = DR_OUT;

 else if(S == 3'b100)
   BUS = AC_OUT;

 else if(S == 3'b101)
   BUS = IR_OUT;

 else if( (S == 3'b111)&&(read == 1'b1) )
   BUS = MEM_OUT;

 else 
   BUS = 16'b 0000000000000000; 
 end

endmodule

module Bus_tb();

 reg [11:0]AR_OUT ;
 reg [11:0]PC_OUT ;
 reg [15:0]IR_OUT ;
 reg [15:0]DR_OUT ;
 reg [15:0]AC_OUT ;
 reg [15:0]MEM_OUT ;
 reg read ;
 reg [2:0]S ;

 wire [15:0]BUS ;

 initial begin

 AR_OUT = 12'b 0000_0000_1111 ;  
 PC_OUT = 12'b 0000_1111_0000 ;
 IR_OUT = 16'b 0000_0000_1111_0000 ;
 DR_OUT = 16'b 0000_0000_1111_1111 ;
 AC_OUT = 16'b 0000_1111_1111_0000 ;
 MEM_OUT = 16'b 1111_0000_1111_0000 ;

 S = 3'b 001 ;
 #10 S = 3'b 011;
 #10 S = 3'b 010;
 #10 S = 3'b 000;   // 
 #10 S = 3'b 101;
 #10 S = 3'b 100;
 #10 S = 3'b 111;
 #5 read = 1'b1;

 end
 endmodule 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:15:40.873

您的`Bus`模块未在`Bus_tb`测试台中实例化。您需要实例化端口的实例`Bus`并连接端口。

例如：

`Bus u_bus( .BUS(BUS), ...);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:32:03.167

为什么使用模块 Bus_tb？为什么不使用案例结构？试试这个：

```
module Bus(AR_OUT, IR_OUT, DR_OUT, PC_OUT, AC_OUT, MEM_OUT, read, S, BUS);

 input [11:0]AR_OUT ;
 input [11:0]PC_OUT ;
 input [15:0]IR_OUT ;
 input [15:0]DR_OUT ;
 input [15:0]AC_OUT ;
 input [15:0]MEM_OUT ;
 input read ;
 input [2:0]S ;
 output [15:0]BUS ; 
 reg [15:0]BUS ;
 // inputs are implicitly defined as wire

always @(S or AR_OUT or IR_OUT or DR_OUT or PC_OUT or AC_OUT or MEM_OUT or read)
case(S)
1:BUS = AR_OUT;
2:BUS = PC_OUT;
3:BUS = DR_OUT;
4:BUS = AC_OUT;
5:BUS = IR_OUT;
7:if(read) BUS = MEM_OUT; //there is no state 6 in your code
default BUS = 16'b0000000000000000;
endcase

endmodule 
```

# objective-c - 单独类中的大型浮点数组常量

> ID：14552311
> 
> 赞同：0
> 
> 时间：2013-01-27T21:06:58.487
> 
> 标签：objective-c

下面的数组 x 不大，但它是我的示例数组。

```
float x[4] = {1.0f, 2.0f, 4.0f, 8.0f}; 
```

说，我想在我的 ViewController 中使用数组`BSViewController.h/.m`。我已经包含`BSParam.h`在 中`BSViewController.h`，但我不知道还有什么要使用`x`的`BSViewController.m`

下面是到目前为止我的类的代码，它将包含我的常量数组。

```
//
//  BSParam.h

#import <Foundation/Foundation.h>

@interface BSParam : NSObject

@end

//
//  BSParam.m

#import "BSParam.h"

@implementation BSParam

#include <stdio.h>

float x[4] = {1.0f, 2.0f, 4.0f, 8.0f};

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:08:49.480

您可以创建函数为您返回它们，或者只`extern`在标题中使用声明：

```
extern float x[4]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:24:04.273

1）如果你想让它在你的班级之外可用，请使用`extern`关键字使其可用：

```
//  BSParam.h
extern float x[4];

//  BSParam.m
#import "BSParam.h"    
float x[4] = { 1.0f, 2.0f, 4.0f, 8.0f };

// BSViewController.m
#import "BSParam.h"

- (void)dummy {
  float t = x[0]; // etc.
} 
```

2）无论如何，这个解决方案将使变量成为`x`全局变量，并且在您的应用程序的任何地方都可用，没有任何上下文/命名空间来访问它，所以这不是最佳解决方案。

为了使应用程序的其他部分可以访问全局值，您最好使用**单例模式**，或者为此使用类方法。

例如：

```
@interface BSParam : NSObject
+(float[4])x;
@end

@implementation BSParam
+(float[4])x {
    return (float[4]){ 1.0f, 2.0f, 4.0f, 8.0f };
}
@end 
```

这样您就可以使用`[BSParam x]`来访问您的数组，而不仅仅是`x`添加一些*命名空间*来访问该`x`数组，避免与其他局部变量或其他任何东西混淆的风险。

# javascript - 用于重排文本的 JavaScript

> ID：14552317
> 
> 赞同：0
> 
> 时间：2013-01-27T21:07:23.653
> 
> 标签：javascript, jquery, jquery-plugins

寻找一个插件来流动文本，如谷歌潮流或其他 iPhone 应用程序，您可以在其中向左或向右滑动以获取下一页。

这存在吗？还是使用 JavaScript 重排文本太占用内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:43:07.233

阅读您的问题后，我找到了此链接。我假设流程测试就像逐页滑动，至少 div 一个 div。关于那个......我在下面找到了一个。希望这会有所帮助。

[http://srobbin.com/jquery-plugins/pageslide/](http://srobbin.com/jquery-plugins/pageslide/)

# javascript - 我应该使用什么脚本来绕过 Google 电子表格中 ImportData 的限制？

> ID：14552318
> 
> 赞同：0
> 
> 时间：2013-01-27T21:07:24.037
> 
> 标签：javascript, google-apps-script, google-sheets, google-docs

我有 A 列，其中包含一些 Internet 站点的 URL 页面。在 B 列中，我使用以下函数：

“=CONCATENATE（ImportData（来自 A 列的 URL）”。

... 将数据页提取为该列中的文本，但 Google Docs 在文档中的 50 个函数中对该函数有限制。

也就是说，A列的URL地址每次变化，网页的数据如何以文本的形式提取到B列，就像我使用ImportData一样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:07:57.503

您可以使用 onOpen 触发器，该触发器对 A 列中的每个 url 使用[UrlFetch](https://developers.google.com/apps-script/class_urlfetchapp#fetch)并设置 B 列中的文本。这将在每次打开电子表格时更新电子表格。

这可能会起作用（我以前从未使用过 UrlFetch）：

```
 function onOpen(e){
  var sheet = SpreadsheetApp.getActiveSheet();

  //Load all the URLs
  var urls = sheet.getRange("A:A").getValues();

  //Initialize array for content
  var text = [];

  //Loop through URLs
  for(var i = 0; i < urls.length; i += 1){
    if(urls[i][0] === "") continue;//Skip blank cells
    //Fetch the webpage, push the content to the array (inside an array since it needs to be 2d)
    text.push(
      [UrlFetchApp.fetch(urls[i][0]).getContentText()]
    );
  }
  //Store text in spreadsheet in range the size of the text array
  sheet.getRange("B1:B" + text.length).setValues(text);
} 
```

如果要在 url 更改时加载新内容，请使用 onEdit 触发器

```
function onEdit(e){
  //Get the active cell
  //Then get its url
  //Fetch the web page and store it in the cell next to edited url
} 
```

# php - 检测 SELECT 语句中的重复列

> ID：14552327
> 
> 赞同：-3
> 
> 时间：2013-01-27T21:08:04.640
> 
> 标签：php, mysql

我正在按字段获取雇主记录`emp_id`，如果在`First`.

另外，我将如何调整条件表达式以使用新查询？

这是我要修复的代码：

```
<?php
$emp = mysql_query("SELECT * FROM employees
WHERE s_id = '" .$s. "' ORDER BY emp_id ASC");
while($names = mysql_fetch_array($emp)) { 
if ($names['Show'] == 'TRUE'){
?>
        <table width="100%" class="round1" border="1" cellspacing="0" cellpadding="0">
            <tr>
                <td height="7.5%" class="name_phone"
                    <div>
                        <?php 
                        if (($names['First'] == $names['First']) && ($names['u_id'] != $names['u_id']))
                        {echo $names['First'];}
                        else
                        {echo $names['First']. ' ' .$names['Last'];} ?>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="phone">
                    <div>
                        <?php if ($names['ShowPhone'] == 'TRUE')
                        {echo $names['Phone'];}
                        else
                        {echo '&nbsp;';} ?>
                    </div>
                </td>
            </tr>
        </table>
<?php }} ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:09:34.480

您需要使用 double`==`进行相等比较。

```
<?php 
if (($names['First'] == $names['First']) && ($names['u_id'] != $names['u_id']))
{echo $names['First'];}
else
{echo $names['First']. ' ' .$names['Last'];}
?> 
```

[比较运算符](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:10:04.557

`==`对于您使用或`===`（或`!=`或在您的情况下）的php比较`!==`，您使用的是赋值运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:10:31.000

修复代码：

```
 <?php 
                        if (($names['First'] == $names['First']) && ($names['u_id'] == $names['u_id']))
                        {echo $names['First'];}
                        else
                        {echo $names['First']. ' ' .$names['Last'];}
 ?> 
```

# mongodb - 使用 php 的 MongoDB 更新数组

> ID：14552329
> 
> 赞同：0
> 
> 时间：2013-01-27T21:08:21.640
> 
> 标签：mongodb, mongodb-php, mongodb-query

当我使用rockmongo修改文档时，我使用以下内容：

标准：

```
array (
  'friends.50e6b194f028b9790b000002' => 
  array (
    '$exists' => true,
  ),
) 
```

新对象：

`array ( '$set' => array ( 'friends.$.50e6b194f028b9790b000002.info' => "blablabla", ), )`

它工作正常。

在 php 中：

```
 $collection->update(array('friends.'.$val =>  array (
                                    '$exists' => true,
                                  )),
                    array ( '$set' => 
                                  array (
                                    'friends.$.'.$val.'.info' => "blablabla",
                                  ),
                                ) ); 
```

不行。

php有什么问题？$val = 50e6b194f028b9790b000002

# javascript - 显示“绿色”时停止功能

> ID：14552330
> 
> 赞同：0
> 
> 时间：2013-01-27T21:08:27.250
> 
> 标签：javascript, html, function

我正在使按钮激活将颜色更改为随机颜色的功能，但是当它是绿色时，我希望按钮停止更改颜色。

```
<html>
<head>

<script type="text/javascript">
function roll1() {
rand = Math.ceil(Math.random() * 6);
die = document.getElementById("die1");

if (rand >= 1 && rand <= 3) {
    die.innerHTML = "<p>'GREEN'<\/p>";
} else if (rand == 4 || rand == 5) {
    die.innerHTML = "<p>'GREEN'<\/p>";
} else if (rand == 6) {
    die.innerHTML = "<p>'RED'<\/p>"
}
}
</script>

</head>

<body>

<button onclick="roll1()">Roll Dice</button>

<table>
<tr>
<td style="width:55px; height:55px;">

<p id="die1">'YELLOW'</p></td>

</tr>
</table>

</body>
</html> 
```

我也不希望按钮消失，因为它仍然需要执行此代码中没有的其他操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:14:17.827

```
var stop_flag = false;

function roll1() {
    if (stop_flag)
        return false;

    rand = Math.ceil(Math.random() * 6);
    die = document.getElementById("die1");

    if (rand >= 1 && rand <= 3) { 
        stop_flag = true;
        die.innerHTML = "<p>'GREEN'<\/p>";
    } else if (rand == 4 || rand == 5) {
        die.innerHTML = "<p>'GREEN'<\/p>";
    } else if (rand == 6) {
        die.innerHTML = "<p>'RED'<\/p>"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:14:58.940

您可以添加属性`disabled`，因此该按钮不再可点击。

# apache - htaccess重定向循环问题

> ID：14552331
> 
> 赞同：0
> 
> 时间：2013-01-27T21:08:33.260
> 
> 标签：apache, .htaccess, mod-rewrite

我想要一个 htaccess modrewrite 规则来重定向，我自己做了，但它一次又一次地从一个循环中重定向，所以它在我这边不起作用。

[http://freemp3tx.com/anything](http://freemp3tx.com/anything)到[http://freemp3tx.com/anything-mp3-download.html](http://freemp3tx.com/anything-mp3-download.html)

htaccess 文件：

```
DirectoryIndex home.php
RewriteEngine On
RewriteRule ^(.*)-mp3-download.html$ index.php?search=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:15:45.693

如果要从 to 重定向`anything`，则`anything-mp3-download.html`必须使用 a 防止无限循环`RewriteCond`

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !-mp3-download.html$
RewriteRule .* $0-mp3-download.html [L] 
```

# android - Android 文件类型查看器

> ID：14552336
> 
> 赞同：0
> 
> 时间：2013-01-27T21:09:33.833
> 
> 标签：android, android-intent, file-type, file-browser

好的，所以我有一个具有自定义文件夹的应用程序：

我想打开以下类型：

```
protected String[] acceptableTypes = {"jpg", "gif", "png", "bmp", "pdf", "txt"}; 
```

每当我单击文件时，我都可以使用以下代码打开图像或至少 jgps：

```
MediaScannerConnection.scanFile(((Activity) getContext()), new String[] { filePath }, null, 
                new MediaScannerConnection.OnScanCompletedListener() { 
            @Override public void onScanCompleted(String path, Uri uri) { 
                Intent intent = new Intent(Intent.ACTION_VIEW); 
                intent.setDataAndType(uri, "image/*"); 
                ((Activity) getContext()).startActivityForResult(intent, ConferenceActivity.ACTIVITY_SELECT_IMAGE); 
            } 
        }); 
```

现在我该如何过滤它以便我可以使用正确的程序打开正确的文件类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:16:33.767

阅读[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)了解如何执行此操作的介绍。从该页面上的“image/”搜索。

您需要在应用程序的清单文件中声明文件类型。请务必使用“image/*”或“image/png”之类的 mimeType 声明它们，以便您可以从 gmail 等其他应用程序打开文件。

在您的活动中，您将添加如下内容：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

另一个问题是您还必须同时处理“文件”方案和“内容”方案。要查看我的意思，在 Jellybean 中打开 Gmail 中的文件，您会看到提供的 URI 是内容类型，而不是典型的文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:51:25.277

您只需在 setDataAndType 中传递正确的 mimeType。您可以使用 URLConnection.guessContentTypeFromName 获取文件的 mimeType

所以是这样的：

```
Intent i = new Intent();
i.setAction(android.content.Intent.ACTION_VIEW);
String mimeType = URLConnection.guessContentTypeFromName(filePath);
i.setDataAndType(Uri.fromFile(new File(filePath)), mimeType);
startActivity(i); 
```

# google-apps-script - Google Apps 脚本中的“发布到图库”选项发生了什么变化？

> ID：14552338
> 
> 赞同：0
> 
> 时间：2013-01-27T21:09:35.337
> 
> 标签：google-apps-script

[Google Apps 脚本文档](https://developers.google.com/apps-script/publishing_gallery)声称：

“在脚本编辑器中加载脚本后，单击菜单栏中的发布 > 发布到图库。”

在开始一个新的脚本（用于电子表格）项目后，我尝试发布到画廊。但是没有这样的选择：

![在此处输入图像描述](../Images/0673f905e94bb0fb3e05103ebaf49ee8.png)

它是最近删除的吗？我需要在某处更改设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T00:46:23.780

我认为它不适用于 Google Apps/企业帐户。我不得不将副本复制到消费者帐户，然后发布。

# java - 将大量 system.out.println 重定向到 .txt 文件

> ID：14552342
> 
> 赞同：2
> 
> 时间：2013-01-27T21:09:53.060
> 
> 标签：java, file-io, println, printstream

> **可能重复：**
> [将 java 输出打印到文件](https://stackoverflow.com/questions/5695331/print-java-output-to-a-file)

在 Java 程序中，我有一个很长的方法（我认为发布它并不重要，因为它对问题并不重要），它有大量的 println 语句来将状态更新打印到控制台。

我不想将这些打印输出到控制台，而是希望它们进入一个 txt 文件，我可以在其中存储它们并稍后查看它们。

有没有一种简单的方法来重定向输出而无需手动执行每个 println 语句？

如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T21:26:05.307

我以前必须这样做，它不是很整洁，我希望你不是为了最后一段代码而这样做，但我做到了：

```
PrintStream ps = new PrintStream("\file.txt");
PrintStream orig = System.out;
System.setOut(ps);
//TODO: stuff with System.out.println("some output");
System.setOut(orig);
ps.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T21:26:47.130

System 类有一个静态方法，`System.setOut(PrintStream out)`. 您所要做的就是创建自己的 PrintStream 写入文件，将其填充到此方法中，一切就绪。

更好的不那么脆弱的解决方案：不要使用 System.out.printFoo(...) 而只是使用记录器，并根据当时的目的更改记录级别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:19:54.343

1.  在方法中添加额外的参数`, PrintStream out`
2.  在您的方法中 搜索和替换`System.out`。`out`
3.  完毕。
4.  （使用包裹在 FileOutputStream 周围的 PrintStream 调用方法）

# youtube - 在 wordprss 中的 Shadowbox/Fancybox 中显示 iframe youtube 视频

> ID：14552345
> 
> 赞同：0
> 
> 时间：2013-01-27T21:10:07.343
> 
> 标签：youtube, fancybox, shadowbox

我一直在寻找解决方案，但找不到要打开的解决方案

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/A6XUVjK9W4o" frameborder="0" allowfullscreen></iframe> 
```

想要以这种格式打开的原因是生成的图片链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:53:35.357

而不是使用嵌入代码，我只使用包裹图像的嵌入链接，所以当我单击图像时，会打开一个带有视频的影子框弹出窗口

# c - 选择（）没有响应？

> ID：14552346
> 
> 赞同：1
> 
> 时间：2013-01-27T21:10:07.833
> 
> 标签：c, sockets, network-programming

我的程序的目标是使用 select 来管理多个套接字。但是，我想先用一个插座试试。现在，我面临的问题是最初客户端向服务器发送数据，服务器接收并显示它，但是当客户端再次发送一些数据时，服务器代码仍然处于选择命令中。

这里有一些片段可以让您了解我如何初始化套接字。

```
if((master_socket = socket(PF_INET, SOCK_STREAM, 0)) < 0)
    {
      exit(1);
    }

    if((bind(master_socket, (struct sockaddr *)&req, sizeof(req))) < 0)
    {
      exit(1);
    }

    listen(master_socket, 5);
    FD_SET(master_socket,&listening);

    /* wait for connection, then receive and print text */
    len = sizeof(struct sockaddr);
    while(1)
     {
            FD_ZERO(&listening);  //Flush out everything in socket
        FD_SET(master_socket,&listening); // Add master
        if(f_client>0)           // Add client if any
        {
            FD_SET(f_client,&listening);
        }
        printf("Checking for new connection \n");
           //Timeout is null, so waiting indefinitely
        rc = select(FD_SETSIZE, &listening, NULL, NULL, NULL);

     if (FD_ISSET(master_socket, &listening))
        {
          printf("Master side invoked\n");
          if((f_client = accept(master_socket, (struct sockaddr *)&req, &len)) < 0)
          {
             exit(1);
              }
            }

    else if (FD_ISSET(f_client,&listening))
    {
         if ((valread = read( f_client , buf, 1024)) == 0)
         {
            close(f_client);
            f_client=0;
         }
         else
         {
            fputs(buf, stdout);  
         }

    } 
```

}

基本上在上面的程序中，它连接到服务器，为客户端维护一个文件描述符`f_client`并添加它。并且在每一轮中，它都会清除套接字，添加主套接字和客户端套接字（如果有），然后检查。这里的问题是，第一次它工作，但第二次客户端发送一些数据。它挂了`rc = select(FD_SETSIZE, &listening, NULL, NULL, NULL);`

我不明白这里出了什么问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:22:58.140

```
 if ((valread = read( f_client , buf, 1024)) == 0)
     {
        close(f_client);
        f_client=0;
     }
     else
     {
        fputs(buf, stdout);  
     } 
```

此代码已损坏。该`fputs`函数*只能*与 C 风格的字符串一起使用。您只是拥有没有特定结构的任意数据。既然你忽略`valread`了，你也不知道你读了多少字节。（想一想，怎么`fputs`可能知道要输出多少字节？该信息仅在 中`valread`，而您不会将这些信息传递给它。）

您已经收到了数据，这个损坏的代码只是把它扔掉了。如果你 log `valread`，你会看到你实际上已经在你最后一次调用时读过它，`read`然后再调用`select`那个挂起。

而不是`fputs`，你可以使用这样的东西：

```
for (int i = 0; i < valread; ++i)
   putchar(buf[i]); 
```

# mysql - 重新索引复合主键

> ID：14552347
> 
> 赞同：0
> 
> 时间：2013-01-27T21:10:08.440
> 
> 标签：mysql

创建多对多关系时，索引已用作复合主键的 2 个字段是否正确？

```
PRIMARY KEY (`lineup_id`, `term_id`) ,
INDEX `lineup_id1_idx` (`lineup_id` ASC) ,
INDEX `term_id1_idx` (`term_id` ASC) , 
```

由于我将它们标记为外键，因此 MySQL Workbench 添加了`lineup_id`这种重新索引。`term_id`在这种情况下，我还应该将它们标记为外键吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:12:41.323

唯一应该这样做的情况是，如果您的查询使用复合键的第二列，因为索引从左到右工作。否则，您应该使用单个复合键。或者，您可以创建代理键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:15:30.343

如果您需要两者的索引`lineup_id`并且`term_id`您只能添加`INDEX term_id1_idx (term_id ASC)`PK 也可以`lineup_id`。并考虑`njk`建议。

# visual-c++ - 嵌入式 Python 应用程序中的运行时错误 R6034

> ID：14552348
> 
> 赞同：41
> 
> 时间：2013-01-27T21:10:11.807
> 
> 标签：visual-c++, python-2.7, visual-studio-2005, manifest, boost-python

我正在开发一个使用 Boost.Python 嵌入 Python 解释器的应用程序。这用于运行与主程序交互的用户生成的“脚本”。

不幸的是，一位用户在尝试运行脚本时报告了运行时错误 R6034。主程序启动正常，但我认为加载 python27.dll 时可能会出现问题。

我正在使用 Visual Studio 2005、Python 2.7 和 Boost.Python 1.46.1。该问题仅发生在一个用户的机器上。我以前处理过明显的问题，并设法解决了它们，但在这种情况下，我有点不知所措。

有没有其他人遇到过类似的问题？你能解决吗？如何？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-02-04T05:35:38.537

我找到了问题的解决方案。希望这会对其他人有所帮助——这些问题调试起来非常令人沮丧*。*

该问题是由第三方软件将自身添加到路径并在其程序文件夹中安装 msvcr90.dll 引起的。在这种情况下，问题是由英特尔的 iCLS 客户端引起的。

那么......如何在类似情况下找到问题？

1.  [在此处](http://technet.microsoft.com/en-ca/sysinternals/bb896653.aspx)下载 Process Explorer 。

2.  启动您的应用程序并重现运行时错误 R6034。

3.  启动进程资源管理器。在“查看”菜单中，转到“下窗格视图”并选择“DLL”。

4.  在顶部窗格中，找到您的应用程序并单击它。底部窗格应显示为您的应用程序加载的 DLLS 列表。

5.  在列表中找到“msvcr??.dll”。应该有几个。查找不在“winsxs”文件夹中的那个，并记下它。

6.  现在，在应用程序运行之前检查路径。如果它包含您在第 5 步中记下的文件夹，您可能已经找到了罪魁祸首。

如何解决问题？在运行程序之前，您必须从路径中删除有问题的条目。就我而言，我不需要路径中的任何其他内容，因此我编写了一个简单的批处理文件，如下所示：

```
path=
myprogram.exe 
```

而已。批处理文件只是在我的程序运行之前清除路径，以便找不到冲突的运行时 DLL。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-25T09:31:24.233

这篇文章详细介绍了@Micheal Cooper 和@frmdstryr，并提供了比我之前的答案更好的选择。**您可以将以下内容放在python 脚本**前面以清除有问题的条目。

```
import os, re
path = os.environ['PATH'].split(';')

def is_problem(folder):
    try:
        for item in os.listdir(folder):
            if re.match(r'msvcr\d\d\.dll', item):
                return True
    except:
        pass
    return False

path = [folder for folder in path if not is_problem(folder)]
os.environ['PATH'] = ';'.join(path) 
```

对于**带有 YouCompleteMe 的 vim**，您可以将以下内容放在您**的顶部**`vimrc`：

```
python << EOF
import os, re
path = os.environ['PATH'].split(';')

def is_problem(folder):
    try:
        for item in os.listdir(folder):
            if re.match(r'msvcr\d\d\.dll', item):
                return True
    except:
        pass
    return False

path = [folder for folder in path if not is_problem(folder)]
os.environ['PATH'] = ';'.join(path)
EOF 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-08T13:17:13.660

更通用的解决方案是：

```
import os
os.environ['path'] = ";".join(
    [path for path in os.environ['path'].split(";") 
     if "msvcr90.dll" not in map((lambda x:x.lower()), os.listdir(path))]) 
```

（我对 VanDyke SecureCRT 有同样的问题）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-23T19:46:15.977

（作为评论，这可能比完整的答案更好，但是我尘土飞扬的 SO 帐户。还没有足够的代表。）

与 OP 一样，我也使用嵌入式 Python 2.7 和其他一些本机程序集。

使这件事复杂化的是，我的应用程序是一个运行在 64 位 IIS Express (VS2013) 之上的中型 .Net 解决方案。

我尝试了 Dependency Walker（很棒的程序，但已经过时，无法提供帮助）和 Process Monitor（ProcMon——它可能确实找到了一些提示，但即使我使用过滤器，问题也被隐藏在数千个不相关的操作中，更好的过滤器可能会有所帮助）。

然而，**非常感谢迈克尔库珀！** 您的步骤和 Process Explorer (procexp) 让我很快找到了一个整天都在躲避我的解决方案。

我可以在 Michael 的优秀帖子中添加一些注释。

*   我不仅忽略了（即保持不变）\WinSxS\... 文件夹，还忽略了\System32\... 文件夹。

最终我发现 msvcr90.dll 是从以下位置拉进来的：

*   C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64

通过我的路径，我发现了上面和另一个类似的目录，它似乎包含 32 位版本。我删除了这两个，重新启动并且......*仍然*有问题。

因此，我再次按照 Michael 的步骤进行操作，发现*另一个*msvcr90.dll 正在从以下位置加载：

*   C:\Program Files\英特尔\iCLS 客户端\

再次通过我的路径，我找到了上面的目录和这个目录的（x86）版本。所以，我删除了这两个，应用了更改，重新启动了 VS2013 并......

**不再有 R6034 错误！**

我不禁对英特尔这样做感到沮丧。实际上，我在网上的其他地方找到了关于从路径中删除 iCLS 客户端的提示。我试过了，但症状是一样的，所以，我认为这不是问题。可悲的是，iCLS 客户端和 OpenCL SDK 正在标记我的 iisexpress。如果我有幸删除了其中任何一个，R6034 错误仍然存​​在。为了解决这个问题，我不得不切除他们两个。

再次感谢 Michael Cooper 和其他所有人的帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-11T18:35:03.953

使用上面迈克尔的回答，我可以在没有 bat 文件的情况下通过添加以下内容来解决这个问题：

```
import os

# Remove CLS Client from system path
if os.environ['PATH'].find("iCLS Client")>=0:
    os.environ['PATH'] = "".join([it for it in os.environ['PATH'].split(";") if not it.find("iCLS Client")>0]) 
```

到应用程序的主要 python 文件。它只是确保系统路径不包括在导入加载 dll 的库之前导致问题的路径。

谢谢！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-09T16:34:42.790

这篇文章详细介绍了@Micheal Cooper 和@frmdstryr。**一旦您确定了有问题的 PATH 条目，您可以将以下内容放在python 脚本**前面 ，假设这里`iCLS Client`有`CMake`问题。

```
import os
for forbidden_substring in ['iCLS Client', 'CMake']:
    os.environ['PATH'] = ';'.join([item for item in os.environ['PATH'].split(';')
                                   if not item.lower().find(forbidden_substring.lower()) >= 0]) 
```

关于**带有 YouCompleteMe 的 vim**案例，您可以将以下内容放在您**的顶部**`vimrc`：

```
python << EOF
import os
for forbidden_substring in ['iCLS Client', 'CMake']:
    os.environ['PATH'] = ';'.join([item for item in os.environ['PATH'].split(';')
                                   if not item.lower().find(forbidden_substring.lower()) >= 0])
EOF 
```

如果这些解决方案都不适用于您，您可以尝试手动从 PATH 中删除导致条目的问题，但您要确保不会破坏系统上依赖于这些 PATH 条目的任何其他内容。因此，例如，对于 CMake，您可以尝试删除其 PATH 条目，并且仅将指向 cmake.exe 二进制文件的符号链接（或类似内容）放入 PATH 中的其他目录中，以确保 cmake 仍然可运行从任何地方。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-20T14:08:59.157

感谢您的解决方案。我只是稍微修改了这个示例代码，因为我系统中的路径变量包含字符串“ICLS CLIENT”而不是“iCLS Client”

```
import os
# print os.environ['PATH']
# Remove CLS Client from system path
if os.environ['PATH'].find("iCLS Client") >= 0 or os.environ['PATH'].find("ICLS CLIENT") >= 0:
    os.environ['PATH'] = "".join([it for it in os.environ['PATH'].split(";") if not (it.find("iCLS Client")>0 or it.find("ICLS CLIENT")>0)]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-11T01:23:02.260

在我的情况下，重建链接库和具有类似“运行时执行库”项目设置的主项目有帮助。希望这对任何人都有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-14T12:47:46.507

*在使用Universal-CRT*`Python27.dll`从 C 程序嵌入时，我也遇到了同样的问题。

 *A`<PYTHON_ROOT>\msvcr90.dll`是罪犯。并且`<PYTHON_ROOT>`在我的`PATH`. AFAICS 的唯一用户`msvcr90.dll`是[PyWin32](https://github.com/mhammond/pywin32/releases)模块 `<PYTHON_ROOT>\lib\site-packages\win32\win32*.pyd`。

修复只是移动`<PYTHON_ROOT>\msvcr90.dll`到该目录。

*附言*。7 年后，PyWin32 仍然存在这个[问题](https://github.com/mhammond/pywin32/issues/566)！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-31T09:05:40.270

就我而言，当我将应用程序编译成 exe 文件后，我将重命名该文件时，我意识到问题来了。所以保留exe文件的原始名称不会显示错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-09T04:48:02.680

The discussion on this page involves doing things way far advanced above me. (I don't code.) Nevertheless, I ran Process Explorer as the recommended diagnostic. I found that another program uses and needs msvcr90.dll in it's program folder. Not understanding anything else being discussed here, as a wild guess I temporarily moved the dll to a neighboring program folder.

Problem solved. End of Runtime error message.

(I moved the dll back when I was finished with the program generating the error message.)

Thank you all for your help and ideas.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-23T03:51:18.520

通过 Process Explorer 检查任何具有用户指定路径的库。除了运行 Python 3 外，我不必`msvcr??.dll` 解决相同的问题。目前的解决方案没有帮助，因为它们没有指示`msvcr90.dll`. 我一步一步调试代码，直到行后出现错误对话框（当我的代码导入[PyTables](http://www.pytables.org/)模块时调用）：

```
import ctypes
ctypes.cdll.LoadLibrary('libbz2.dll') 
```

然后 Process Explorer 帮助找到`libbz2.dll`导致问题的路径（@Micheal Cooper 算法的第 3、4 步）

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-08-08T08:18:09.660

为仍在寻找解决方案的人添加此答案。ESRI 针对此错误发布了补丁。只需从他们的网站下载补丁（无需登录），安装即可解决问题。我下载了 10.4.1 的补丁，但可能还有其他版本的补丁。*

# php - 表格数据不会出现在单独的行中

> ID：14552349
> 
> 赞同：0
> 
> 时间：2013-01-27T21:10:16.070
> 
> 标签：php, html, html-table

我从我的服务器获取数据并希望它们显示如下：

![http://gyazo.com/3ed9349af4a0c3eb9fe9492b74104526](../Images/c1dc50d92285f5db3aa10007ab9d9c49.png)

相反，会发生这种情况：

![http://gyazo.com/2c7960ff62c35723b444545476e1d99c](../Images/b99e78013dce73d3bcd7a4c99671707b.png)

我使用 PHP 作为值：

```
<table border="0" cellspacing="0" cellpadding="0">
        <tr> 
            <td>
                Player Name
            </td>
            <td >
                PK Level
            </td>
            <td>
                Kills
            </td>
            <td>
                Experience
            </td>           
        </tr>

        <tr>
            <td >
                    <?php
                        $result = mysql_query("SELECT * FROM high ORDER BY Runecraftlvl DESC LIMIT 20");

                        while($row = mysql_fetch_array($result))
                          {
                          echo $row['Runecraftlvl'];
                          echo "<br />";
                          }
                    ?>
            </td>
            <td>
                    <?php
                        $result = mysql_query("SELECT * FROM high ORDER BY Runecraftlvl DESC LIMIT 20");

                        while($row = mysql_fetch_array($result))
                          {
                          echo $row['Runecraftlvl'];
                          echo "<br />";
                          }
                    ?>
            </td>
            <td>
                    <?php
                        $result = mysql_query("SELECT * FROM high ORDER BY Runecraftlvl DESC LIMIT 20");

                        while($row = mysql_fetch_array($result))
                          {
                          echo $row['Runecraftlvl'];
                          echo "<br />";
                          }
                    ?>
            </td>
            <td>
                    <?php
                        $result = mysql_query("SELECT * FROM high ORDER BY Runecraftlvl DESC LIMIT 20");

                        while($row = mysql_fetch_array($result))
                          {
                          echo $row['Runecraftlvl'];
                          echo "<br />";
                          }
                    ?>
            </td>           
        </tr>

    </table> 
```

为什么会这样？我怎样才能让数据放在单独的行上，每行 4 个数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T23:35:40.753

Before giving away any code, I'll give you a few hints.

Since you're not getting my point... You should add a **counter** yourself, and check whether or not you have to close the row.

But... Because you want 4 values in one cell, you will have to write them to **temporary variables**. You would need 4 variables: **player_name**, **pk_level**, **kills** and **experience**. When you've read out every 4th row of your query result, write them to the table.

`($counter % 4) == 0` will be the main if-clause in your code. This will be `true` whenever the remainder of the division `$counter / 4` is 0.

Also remember: you only need to **perform your query once**.

Give it a try first, and let us know what you come up with.

# c++ - Eratosthenes 的 C++ 筛选器发现 3 个太多素数

> ID：14552351
> 
> 赞同：-1
> 
> 时间：2013-01-27T21:10:20.287
> 
> 标签：c++, linked-list, sieve-of-eratosthenes

我有一个编程任务，用 C++ 编写一个程序，该程序找到所有小于*n*的素数（用户输入）。一半的任务涉及埃拉托色尼筛。*我的代码正在运行（阅读：分配完成），但在我编辑输出之前，它无条件地将n-3*、*n-2*和*n-1*打印为素数，即使它们不是素数。我不确定为什么会这样。对于程序为何如此运作，我将不胜感激一些反馈和想法。这是未更改的代码：

请注意，我*使用*的是 ListNode 类和 LinkedList 类，它们都是功能齐全的。编辑：部分主要添加；*注意for*循环中的第二项是*size-3*。如果它保留在*size*，程序会输出 3 个额外的非素数。

```
int main()
{
    for(int i = 0; i<my_list.size()-3; i++)
    {
        if(marked[i]==true)
            cout<<my_list[i]<<"\n";
    }
}

void eratosthenes(int item)
{
   bool run=true;
   int p=2, count=0;

   for(int i=2; i<=item; i++)
   {
      my_list.append(i);    // Entire list is filled with integers from 2 to n
      marked.append(true);  // Entire list is filled with true entries
   }

   while(run==true&&(2*p)<item)
   {
      count = 0;
      int i = (2*p);

      do {
         marked[i-2]=false;       // marked values are false and not prime
         i+=p;
      } while(i<item-2);

      for(int i=0; i<item-2; i++) // i starts at 0  and increments by 1 
      {                           // each time through the loop
         if(my_list[i]>p)
         {
            if(marked[i]==true)   // If a value stored in a node is true  
            {                     //   (prime), it becomes the new p.
               p=my_list[i];      //   The loop is then broken. 
               break;
            }
         }
      }
      for(int j=1; j<item-2; j++)
      {
         if(marked[j]==false)
         {
            count=1;
         }
      }
      if(count==0)
         run=false;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:53:02.847

完整方法

```
 void Eratosthenes(int upperBound)
    {
        bool Prime[upperBound];
        for(int i = 0;i<upperBound;i++)
         Prime[i]=true;

        for (int i = 2; i <= sqrt(upperBound); i++) 
         {
             if (Prime[i]) 
             {
                for (int j = i * 2; j < upperBound; j += i) 
                    Prime[j] = false;

              }
         }
         for(int i=2;i<upperBound;i++)
         {
                 if(Prime[i]==true)
                 cout<<i<<" ";
          }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:33:16.997

从您的代码：

```
 do{
     marked[i-2]=false;//marked values are false and not prime
     i+=p;
  }while(i<item-2); 
```

据我了解，这个循环负责遍历所有`i`是素数整数倍的数字`p`并将它们标记为非素数。你为什么要停止条件`i < item - 2`？如果您的and列表`i`是您的索引，这会很好，但在这种情况下它不是；这是您标记的实际数字不是素数。我怀疑这就是为什么你得到的数字接近你的极限（）被标记为素数——你的循环在到达这些数字之前就退出了！`my_list``marked``item``i`

顺便说一句，您可以将其作为 for 循环来执行，这样更易​​于阅读。for 循环的含义是“遍历集合中的每个元素”（无论是连续整数，还是每第 n 个整数，或数组/列表/双端队列中的元素等），所以阅读您的代码的程序员会立即知道并且不必从您的 while 循环中弄清楚。

```
// mark every multiple of the current prime as not prime
for(int i = 2*p; i < item - 2; i += p)
{
    marked[i-2] = false;
} 
```

（这与您的原始代码相同，未应用任何修复）。

* * *

一些改进您的算法/代码的一般性评论：

尝试使用更具描述性的变量名称。您使用`i`两次来表示不同的事物令人困惑，并且通常单个字母对于变量所代表的含义并不大（尽管有时它们就足够了，例如 for 循环，其中`i`列表/数组的索引） .

此外，您对列表的循环次数超出了您的需要。Eratosthenes 算法需要的最小筛选是两个嵌套的 for 循环（不包括将列表/数组初始化为 all `true`）。

你做的工作比必要的多的一个例子是你从索引 0 开始循环寻找下一个`p`要使用的——而不是仅仅记住你的电流在哪里`p`并从那里开始。你甚至不需要检查`my_list[i] > p`那种情况，因为你知道你会超越它开始。此外，您的最后一个循环可能会`break;`提前并避免在找到非质数后继续（我不确定它的意义是什么）。

Nikola Mitev 的第二个答案是筛子的更有效和更易读的实现（~~但替换`sqrt(upperBound)`为`upperBound/2`使其正常工作；`upperBound/2`从筛子的工作方式中应该很清楚~~的原因），尽管他并没有真正给出太多评论或对它的解释。第一个循环是“遍历每个数字直到上界”；在其中，“如果当前数字是素数，则遍历该素数的所有倍数并将它们标记为非素数”。在内循环执行后，外循环继续，遍历下一个数字——不需要从头开始，甚至不需要输入另一个 for 循环来查找下一个素数。

编辑：`sqrt(upperBound)`是正确的。我考虑得不够仔细。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:32:50.627

为简单起见，您为什么不使用布尔数组从索引 2 开始，当您打印结果时，您将打印值为 true 的索引

# html - 使用纯 css 显示不是锚的子元素的元素

> ID：14552359
> 
> 赞同：0
> 
> 时间：2013-01-27T21:11:03.677
> 
> 标签：html, css

我想触发元素在悬停时显示隐藏元素

HTML

```
<div class="contents">
   <aside>
     <section class="tumb">
       <a class="placeHoldTumb" href="#"><img src="http://placehold.it/100x100">
       <a class="placeHoldTumb" href="#"><img src="http://placehold.it/100x100">
     </section>
   </aside>
   <div class="hidden">
      <a href="#" class="one" ><img src="http://placehold.it/1000x1000/bada55" width="500px" ></a>
      <a href="#" class="two" ><img src="http://placehold.it/1000x1000/bada55" width="500px" ></a>
   </div>
   <a href="#" class="background" ><img src="http://placehold.it/1000x1000/000000/bada55" width="500px" /></a>
</div><!-- end contents --> 
```

CSS

```
aside  {
  z-index: 100;
  background: rgba(0, 182, 173, 0.9); 
  width: 230px; 
  position: absolute; }
aside .tumb img { 
  margin: 5px; position: relative; }
.contents img {
  position: absolute; }
.hidden img {  opacity: 0; }

.tumb a:hover ~ .hidden img {
  opacity: 1;
  filter:alpha(opacity=100); /*For IE8*/ } 
```

演示在这里：[http ://codepen.io/mvaneijgen/pen/ELBAg](http://codepen.io/mvaneijgen/pen/ELBAg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:32:05.990

在您的代码中尝试以下 CSS ......它会工作

```
.hidden{ 
opacity:0;
    filter:alpha(opacity=0); 
}
.contents:hover .hidden{
opacity: 1;
    filter:alpha(opacity=100);
} 
```

我已经在 Fiddle 中尝试过您的代码...请参阅此链接：http: [//jsfiddle.net/NUBkp/14/](http://jsfiddle.net/NUBkp/14/)

# asp.net - 您如何为图像设置淡入/淡出 wpf vb.net（使用 xaml 代码和 vbcode）并将其作为用户控件添加到 winforms

> ID：14552365
> 
> 赞同：0
> 
> 时间：2013-01-27T21:11:58.110
> 
> 标签：asp.net, wpf, vb.net, winforms, winforms-interop

您如何为图像设置淡入/淡出 wpf **vb.net**（使用 xaml 代码和 vbcode）并将其作为用户控件添加到 winforms 是可能的

我知道如何使用 xaml 中的矩形来做到这一点，但我想将相同的设置添加到**现有的**图像框

* * *

我将此代码用于矩形

* * *

```
<Rectangle Name="myrect" Width="350" Height="250">
<Rectangle.Fill>
    <SolidColorBrush x:Name="brush" Color="Red"/>
</Rectangle.Fill>
<Rectangle.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="myrect" 
                    Storyboard.TargetProperty="Opacity" From="0" To="1" 
                    Duration="0:0:1" BeginTime="0:0:0" AutoReverse="True" 
                    RepeatBehavior="Forever"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>    
   </Rectangle.Triggers> 
```

* * *

提前致谢

~kirubel丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:22:34.367

像这样做：

```
<Image x:Name="img01" Height="48" VerticalAlignment="Top" Source="Picture.png" Margin="187,25,165,0">
    <Image.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="img01"
                        Storyboard.TargetProperty="Opacity" From="0" To="1" 
                        Duration="0:0:1" BeginTime="0:0:0" AutoReverse="True" 
                        RepeatBehavior="Forever"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Image.Triggers>
</Image> 
```

# xml - 如何在避免元素顺序的情况下编写 DTD？

> ID：14552366
> 
> 赞同：1
> 
> 时间：2013-01-27T21:12:01.637
> 
> 标签：xml, dtd

我想验证以下 XML。分支机构可以没有或有多个经理和/或会计师。他们的顺序是随机的。我尝试过的如下：

```
 <!ELEMENT branch (office, manager*, accountant*)> 
```

但是我遇到了错误，我知道上面的声明是严格的。我怎样才能避免经理和会计的顺序。

XML：

```
<branch name = "south">
<office>
    <addr>St. 32, Downtown</addr>
</office>
<manager>
    <username>
        knitemorgan
    </username>
</manager>
<accountant>
    <username>
        johnsmith
    </username>
</accountant>
<manager>
    <username>
        jenifer
    </username>
</manager>
<accountant>
    <username>
        fclark
    </username>
</accountant>
   <branch>
  <branch name = "north">
<office>
    <addr>St. 328, Downtown</addr>
</office>
<accountant>
    <username>
        rogerbentley
    </username>
</accountant>
<manager>
    <username>
        wendymaria
    </username>
</manager>
    <branch> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:32:26.870

尝试这样的事情：

```
<!ELEMENT branch (office,(manager|accountant)*)> 
```

这意味着恰好一个`office`后跟零或多个`manager`或`accountant`。

顺序与`manager`或无关，`accountant`因为`|`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:56:12.353

您可能不知道内容模型可以在其中嵌套模型。所以这样的事情应该有效

```
<!ELEMENT branch (office, (manager | accountant )*) > 
```

但是，作为一项规则，不将重复元素分组到一个不同的容器元素中是一种糟糕的设计：如果这样做，您会发现处理更容易管理。

```
<!ELEMENT branch (office, staff) >
<!ELEMENT staff (manager|accountant)*> 
```

# c++ - 列内的 C++ 自动换行

> ID：14552371
> 
> 赞同：0
> 
> 时间：2013-01-27T21:12:56.720
> 
> 标签：c++, word-wrap, iomanip

我需要在 C++ 中输出一些如下所示的列：

```
 Lower  Upper
   Line   case   case   Digits Spaces Other
   ------ ------ ------ ------ ------ ------ 
```

从文件读取等中打印出一些结果等。

无论如何用setw（6）在c ++中进行自动换行？？？

我的代码如下所示：

```
 #include <iostream>
   #include <iomanip>

   using namespace std;

   void printLines(); // declaring

   int main(int argc, char *argv[]) {

          // print table headings
      cout << setw(6) << "Line" << setw(1) << " ";
      cout << setw(6) << "Lower case" << setw(1) << " ";
      cout << setw(6) << "Upper case" << setw(1) << " ";
      cout << setw(6) << "Digits" << setw(1) << " ";
      cout << setw(6) << "Spaces" << setw(1) << " ";
      cout << setw(6) << "Other" << endl;

       printLines();

   };

   // function to output 5 "lines" to divide the table headings from the data

   void printLines() {

       for (int i = 0; i < 6; i++) {

           cout << setfill('-') << setw(6); // set output fill
           cout << "-" << setfill(' ') << setw(1) << " ";

       };

       return;

   }; 
```

但我的输出如下所示：

```
 Line Lower case Upper case Digits Spaces  Other
------ ------ ------ ------ ------ ------ 
```

有什么建议么？谢谢。

# android - 何时调用 GLSurfaceView 方法 onPause() 和 onResume()

> ID：14552372
> 
> 赞同：1
> 
> 时间：2013-01-27T21:12:59.550
> 
> 标签：android, opengl-es, onresume, glsurfaceview, onpause

我反复阅读过，在封闭活动的 onPause() 和 onResume() 方法期间，必须为 GLSurfaceview 调用 onPause() 和 onResume()。我认为这是停止并重新启动渲染线程以节省资源。但是，当我记录渲染线程的 onDraw 方法的每次迭代时，我看到当我按下主页或返回按钮时 onDraw 停止被调用，当我返回应用程序时，onSurfaceCreated 和 onSurfaceChanged 被调用，然后是 onDraw调用恢复 - 即使我在相应的活动方法中删除了对 GLSurfaceview 的 onPause() 和 onResume() 方法的调用。如果渲染线程没有被停止，我怎么看这种行为？即使不再调用 onDraw，渲染线程是否仍然存在？如果在activity失去焦点时渲染线程会自动关闭，那为什么还要调用GLSurfaceview版本的onPause()和onResume()呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:01:15.480

它似乎是一个错误`GLSurfaceView`，它试图通过容忍你忘记调用`onResume()`和来变得聪明`onPause()`。我不确定这是不是故意的。

忽略调用几乎总是有效的，但在某些情况下它可能会导致奇怪的行为和崩溃。我不确定这些情况是什么，但我已经将一些奇怪的崩溃追溯到丢失`onResume()`/`onPause()`呼叫。当你不调用它们时，状态机会稍微有点混乱`GLSurfaceView`——看起来在 100% 的情况下不会触发“自动”恢复和暂停的回退逻辑。

# android - 防止 WebView 在 FragmentPagerAdapter 中重新加载？

> ID：14552377
> 
> 赞同：9
> 
> 时间：2013-01-27T21:13:45.143
> 
> 标签：android, android-fragments, android-webview

我有一个 FragmentPagerAdapter 用于显示大约 6 个选项卡，所有这些选项卡都从 Web 服务器加载它们的数据。其中一个选项卡包含一个从我的服务器加载图像的 WebView。**生成图像的服务器端成本很高，因此我想减少重新加载 WebView 的调用次数。**对于非 WebView 选项卡，我已经能够保存我的状态（对于那些，只是一个简单的数组）并在选项卡被刷过时恢复它们。

**问题：**

*   每次我使用 FragmentPagerAdapter 滑回 WebView 时，它都会重新加载，这会导致我的 Web 服务器的重新加载时间和负载很高。

**考虑的解决方案：**

*   使用[ViewPager.setOffscreenPageLimit()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29) 这是有问题的，因为它会强制加载更多选项卡，即使它们永远不会被查看。这在我的服务器上是不必要的昂贵。
*   使用[WebView.saveState()](http://developer.android.com/reference/android/webkit/WebView.html#saveState%28android.os.Bundle%29)和[WebView.restoreState()](http://developer.android.com/reference/android/webkit/WebView.html#restoreState%28android.os.Bundle%29) 文档已经更新，明确显示状态在这里不再维护，所以这对于这种场景不再有用。
*   将我的活动设置为： android:configChanges="keyboardHidden|orientation|screenSize" 这适用于旋转情况，但不影响 ViewPager/FragmentPagerAdapter 在选项卡情况下滑动。

听起来[WebView.saveState()](http://developer.android.com/reference/android/webkit/WebView.html#saveState%28android.os.Bundle%29)的旧行为会很完美......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T21:49:29.227

问题似乎是你正在抹杀自己的结果。

虽然您需要一个新`WebView`的配置更改，但您不需要一个新的`WebView`。而且，如果您已经拥有`WebView`，则不必告诉它做任何事情。

所以，我会试试这个：

*   保留您在片段的数据成员中`WebView`创建的内容`onCreateView()`
*   仅`onCreateView()`当该数据成员为`null`
*   仅`loadUrl()`在您膨胀布局时才调用

（如果您正在创建`WebView`in Java 代码，请将“inflate the layout”替换为“create the `WebView`via its constructor”）

如果片段的内容超过`WebView`，您还需要保留在数据成员中膨胀的根视图，以便您可以从`onCreateView()`.

# arrays - 双精度数组错误

> ID：14552380
> 
> 赞同：3
> 
> 时间：2013-01-27T21:13:58.637
> 
> 标签：arrays, fortran, precision, fortran90

我正在尝试为数学算法（共轭梯度法）运行代码。在这样做时，我输入了一个双精度矩阵，在我的序言中如此定义。编译时，我收到以下错误：

```
A=RESHAPE((/ 0,8,0,4,26,8,0,17.5,0,0,0,17.5,0,2.5,-8,4,0,2.5,0,-5,26,0,-8,-5,0 
                        1
Error: Element in INTEGER(4) array constructor at (1) is REAL(4)
make: FTranProjectBuilder: Error: Execution exited with code 2 
*** [cg_main.o] Error 1 
```

我在程序中定义了矩阵的定义是这样给出的（数组定义是我程序的第一个操作）：

```
PROGRAM cg_main 
IMPLICIT NONE 

INTEGER,PARAMETER                     ::d=5 !use a parameter for the dimensions (simple)
DOUBLE PRECISION,DIMENSION(d,d)       ::A !matrix
INTEGER,DIMENSION(2)                  ::order2 = (/ 2, 1 /) !matrix reshape order

[MORE DECLARATIONS HERE]

A=RESHAPE((/ 0,8,0,4,26,8,0,17.5,0,0,0,17.5,0,2.5,-8,4,0,2.5,0,-5,26,0,-8,-5,0 /),(/d,d/), order2) !specify dxd matrix

[MORE CODE HERE]

END PROGRAM 
```

该代码在我的矩阵输入中没有十进制数字的情况下工作，但似乎与我的小数无关，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-05T08:26:50.877

前面的回答是不正确的，标准对数组构造函数的处理方式很清楚。请参阅 Fortran 2008 C4103。

问题形式的数组构造函数中的所有元素必须具有相同的声明类型和相同类型的类型参数。此处的编译器会抱怨，因为将实数表达式与那些整数表达式混合在一起违反了此约束。

仅仅使第一个元素成为实数/双精度元素是不够的。也许编译器正在使用有关“数组构造函数”的错误消息`integer(4)`作为“第一个元素是`integer(4)`但不是所有其他元素是”的简写。

为了解决这个问题，使用这种形式的数组构造函数，您应该使所有元素具有相同的类型/种类（可能是实数/双精度）。

正如其他答案中所述（正确），数组构造函数还有另一种形式：

```
[ real ::0,8,0,4,26,8,0,17.5,0,0,0,17.5 ... ] 
```

它将所有元素转换为指定的类型。你甚至可以使用这种形式来创建一个大小为零的数组：

```
 [ real :: ] 
```

# java - Java中的匹配器和正则表达式输出方括号内的内容，但只输出一次

> ID：14552384
> 
> 赞同：-1
> 
> 时间：2013-01-27T21:14:31.107
> 
> 标签：java, regex, grammar, matcher

我在理解正则表达式出了什么问题时遇到了很大的麻烦。为了完整起见，我将列出一些背景信息。

这个程序应该实现一个 SIMPLESEM 解释器。这里关注的语法是这样的：

```
< Expr >    ==>   < Term > {( + | - ) < Term >}

< Term >    ==>   < Factor > {( * | / | % ) < Factor >}

< Factor >  ==>   < Number > | D[< Expr >] | (< Expr >)

< Number >  ==>   0 | (1..9){0..9} 
```

我得到了这段代码，它应该给我 a 方括号内的内容`< Factor >`，但它没有用：

```
 Matcher m;

(m = Pattern.compile("D\\[(.*)").matcher(expr)).find();
        expr = parseExpr(m.group(1));
        (m = Pattern.compile("\\](.*)").matcher(expr)).find();
        expr = m.group(1); 
```

作为示例输入，我有这个：

```
jumpt 5, D[0] == 0 
```

这里`< Factor >`关心的是`D[0]`。它不起作用，因为上面的函数`0]`不`parseExpr()`处理左括号，它不应该处理。所以我把它改成：

```
(m = Pattern.compile("D\\[(.*)").matcher(expr)).find();
        expr = m.group(1);
        (m = Pattern.compile("\\](.*)").matcher(expr)).find();
        expr = parseExpr(m.group(1)); 
```

但由于匹配器/正则表达式，这不起作用。我相信它输出了一个空字符串。所以然后我尝试了这个，它只是给了我一个没有匹配的错误：

```
(m = Pattern.compile("D\\[(.*)").matcher(expr)).find();
expr = m.group(1);

if(expr.contains("(.*)")) 
{
    (m = Pattern.compile("\\](.*)").matcher(expr)).find();
}
else
{
    (m = Pattern.compile("\\]").matcher(expr)).find();
}   
    expr = m.group(1);
    expr = parseExpr(expr); 
```

它在倒数第二行给出超出范围的索引。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:18:50.483

If you want the data inside of the square brackets then your regex should look something like:

```
D\[([^\]]*) 
```

which basically says "Take 'D[', then take everything from there on that isn't a ']' and store it in the match".

Check out [Regexper](http://www.regexper.com/) to obtain a visualization of your regular expressions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:20:16.500

There is this part `D[ <Expr> ]` and `( <Expr> )`, which introduces the problem of bracket matching. This is not something Java regex can handle, since it doesn't support recursive regex.

In this case, regex is only useful for lexing, you need to write a custom parser for your language.

# c - C 矩阵和向量的动态分配

> ID：14552390
> 
> 赞同：0
> 
> 时间：2013-01-27T21:15:20.763
> 
> 标签：c, vector, matrix, dynamic-allocation

我正在用 C 编写这段代码来实现遗传算法。这是我对所有工作结构（矩阵和向量）进行动态分配的部分。当我运行它时，有时（5 次 3 次）它会崩溃。我的分配有问题吗？

```
int main()
{

const char progress[] = "|/-\\";
int n, popSize, numIter,optRoute,minDist,range,globalMin,idx;
int maxcell;
int i,j,p,t,k,d,iter,perm,index,m;
int dists[4];
int* dmat, * totalDist, * distHistory, *randomOrder, *bestOf4Route;
int** pop, ** newPop, ** tmpPop, **rtes;
unsigned int iseed = (unsigned int)time(NULL);

// Values initialization
n = 5;
range = 10;
popSize = 100;
numIter = 1*10^4;
globalMin = 100000;

srand (iseed);

//printf("Insert the number of cities: ");
//scanf("%i",&n);

printf("Matrix costs creation...");
// Creates dmat NxN matrix
// dmat è una matrice triangolare superiore con diag = 0
// declare halfsize 1D array
maxcell = ((n*n)-n)/2;
dmat = (int*)malloc(maxcell * sizeof(int));

//set array
for(i=0; i<maxcell; i++)
    dmat[i] = (rand()%10)+2;

printf("done.\n");

//print entire matrix
//print_triangmat(dmat,n);

printf("Creation of the pop matrix...");
// create popSize x N matrix
pop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  pop[i] = (int*)malloc(popSize * sizeof(int));
}

printf("done.\n");
printf("Pop matrix loading...");
// charge the first row of the matrix
for (j = 0; j < n; j++) {
  pop[j][0] = j+1;
}

// charge the rest of the matrix with randperm of the first row
for (i = 0; i < popSize; i++)
{
    for (j = 0; j < n; j++)
    {
        perm = rand()%(n-j)+j;
        t = pop[perm][i];
        pop[perm][i] = pop[j][i];
        if(i!=popSize-1)
        pop[perm][i+1] = pop[j][i];
        pop[j][i] = t;
        if(i!=popSize-1);
        pop[j][i+1] = t;
    }
}
print_matrix(pop,popSize,n);

printf("done.\n");
printf("Creation of the working structures...");

// create 4 x N matrix
rtes = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  rtes[i] = (int*)malloc(4 * sizeof(int));
}

// Creates an array of popSize
totalDist = (int*)malloc(popSize * sizeof(int));

// Creates an array of numIter
distHistory = (int*)malloc(numIter * sizeof(int));

// Creates an array of n
bestOf4Route = (int*)malloc(n * sizeof(int));

// create 4 x N matrix
tmpPop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  tmpPop[i] = (int*)malloc(4 * sizeof(int));
}

// create popSize x N matrix
newPop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  newPop[i] = (int*)malloc(popSize * sizeof(int));
}

// Creates an array of popSize
randomOrder = (int*)malloc(popSize * sizeof(int));

printf("done.\n"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:18:52.850

```
pop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < popSize; i++) {
  pop[i] = (int*)malloc(popSize * sizeof(int));
} 
```

if popSize > n you are in trouble here...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:37:45.967

问题就在这里。考虑 i=popsize-1 然后您将写入 pop[perm][popsize] 这是一个无效的内存位置。然后，当请求以下分配时，有时请求的内存位置与 pop[perm][popsize] 相交，因此您会收到运行时错误。

```
for (i = 0; i < popSize; i++) {
    for (j = 0; j < n; j++) {
        perm = rand()%(n-j)+j;
        t = pop[perm][i];
        pop[perm][i] = pop[j][i];
        if(i!=popsize-1)
        pop[perm][i+1] = pop[j][i];
        pop[j][i] = t;
        if(i!=popsize-1)
        pop[j][i+1] = t;
    }
} 
```

另一方面有很多错误的内存分配：

```
 pop = (int**)malloc(n * sizeof(int*));
    for (i = 0; i < popSize; i++) {
      pop[i] = (int*)malloc(popSize * sizeof(int));
    } 
```

应该

```
pop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  pop[i] = (int*)malloc(popSize * sizeof(int));
} 
```

和

```
 rtes = (int**)malloc(n * sizeof(int*));
    for (i = 0; i < 4; i++) {
      rtes[i] = (int*)malloc(4 * sizeof(int));
    } 
```

应该

```
rtes = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  rtes[i] = (int*)malloc(4 * sizeof(int));
} 
```

和

```
tmpPop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < 4; i++) {
  tmpPop[i] = (int*)malloc(4 * sizeof(int));
} 
```

应该

```
tmpPop = (int**)malloc(n * sizeof(int*));
for (i = 0; i < n; i++) {
  tmpPop[i] = (int*)malloc(4 * sizeof(int));
} 
```

这个问题还有一个模棱两可的地方。

```
numIter = 1*10^4; 
```

这使得 numIter 14 因为 ^ 是逻辑 XOR 运算符。你确定要这样做吗？

# mysql - 如何让 MySQL 在查询中提示输入值？

> ID：14552396
> 
> 赞同：1
> 
> 时间：2013-01-27T21:15:41.593
> 
> 标签：mysql, console

我在 MySQL 控制台中对一些 SQL 查询进行了很多试验和错误，例如

```
select fname, age, address from person where lname = ?; 
```

我想得到一个提示，询问我 lname 的值，以便我可以轻松地使用不同的值重复查询。这 ？在查询来自 Java 代码的情况下有效。

是否有可能在 MySQL 控制台中，如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T22:31:24.253

这是不可能的。

您可能想要创建一个存储过程，例如

```
DELIMITER //
CREATE PROCEDURE GetPerson(p_lname VARCHAR(50))
BEGIN
    SELECT fname, age, address FROM person WHERE lname = p_lname;
END //
DELIMITER ; 
```

然后能够

```
mysql> CALL GetPerson('smith'); 
```

但这几乎是你能做到的。

`mysql`客户端的目的是运行 SQL 查询（并管理服务），SQL 是一种查询语言，不用于用户交互。

# sql - Visual Studio 2010 C# - 具有集中式数据库的应用程序 - 开发

> ID：14552401
> 
> 赞同：0
> 
> 时间：2013-01-27T21:16:08.943
> 
> 标签：sql, database, visual-studio-2010, deployment

我已经开始研究我的数据库**桌面**应用程序。目标是拥有一个集中的数据库，以便每个员工都可以连接。

我的目标：

*   SQL Server 2008 Express 上的集中式数据库

*   使用 Sql 到 Linq

*   应用程序的首次运行应在服务器上创建数据库结构。

**现在我的问题是：如何做最后一点？**

我知道我可以通过 SQL Managment Studio 生成 sql 脚本然后执行它，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:57:19.560

就像评论说的那样，我不确定您为什么要这样做，但是如果您有一台集中式数据库机器并且您想在第一次连接时为每个用户创建一个新数据库，那么您可以创建一个规范/模板数据库并在第一次连接时通过脚本克隆它。

您的 UI 会说“我们正在创建您的新数据库时请稍候...”，您将为数据库/表/存储过程/视图/等运行 CREATE 脚本。

请记住，一旦猫从袋子里出来，更新这些数据库的模式可能会很痛苦。

# php - 如何使用 php 从 xooplate.com 获取文件

> ID：14552403
> 
> 赞同：0
> 
> 时间：2013-01-27T21:16:20.037
> 
> 标签：php, curl, download, file-get-contents

我看到 [http://xooplate.com/templates/download/13693](http://xooplate.com/templates/download/13693)返回一个文件。我用过

```
$ch = curl_init("http://xooplate.com/templates/download/13693");
$fp = fopen("example_homepage.zip", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);

function get_include_contents($filename) {
    if (is_file($filename)) {
        ob_start();
        include $filename;
        $contents = ob_get_contents();
        ob_end_clean();
        return $contents;
    }
    return false;
}
$string = get_include_contents('http://xooplate.com/templates/download/13693'); 
```

但不工作，我期待一个帮助，谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:27:47.127

> **更新答案：**

嘿伙计，我检查了那个网站。他们在下载按钮（[widget.js](http://platform.stumbleupon.com/1/widgets.js)第 27 行）上放置了 onClick jQuery 方法，具有后域安全性。我试图[触发 onClick](http://api.jquery.com/trigger/)事件，但由于域检查安全功能服务器只允许[http://www.stumbleupon.com](http://www.stumbleupon.com)和[http://xooplate.com](http://xooplate.com)使用 AJAX 发布数据。所以不可能使用 curl 或 PHPDOM。对不起。:) 非常安全。

> **下面的解决方案不是答案！**

嗨，我找到了一个使用[PHP Simple HTML DOM Library](http://simplehtmldom.sourceforge.net/manual.htm)的解决方案。只需下载它并使用以下代码

```
<?php
include("simple_html_dom.php");
$html = file_get_html('http://xooplate.com/templates/details/13693-creative-circular-skills-ui-infographic-psd');

foreach($html->find('a[class=btn_green nturl]') as $element) 
       echo $element->href . '<br>';
?> 
```

# python - Python 扭曲的 TCP/IP 连接

> ID：14552404
> 
> 赞同：3
> 
> 时间：2013-01-27T21:16:20.047
> 
> 标签：python, tcp, twisted, telnet, linode

我有一个 Linode 帐户，我正在尝试使用 telnet 与用 Python（Twisted）编写的基本 TCP/IP 服务器进行通信，该服务器安装在带有 ubuntu lts 的 linode 中：

```
import os
from twisted.internet import protocol, reactor

class Echo(protocol.Protocol):
    def dataReceived(self, data):
        self.transport.write(data)

class EchoFactory(protocol.Factory):
    def buildProtocol(self, addr):
        return Echo()

port = 5000
reactor.listenTCP(port, EchoFactory(), interface="<my linode's ip>")
reactor.run() 
```

我以为我可以做`telnet <my linode's ip> 5000`并且能够从服务器发送和接收消息，例如当我在本地测试应用程序时，`telnet localhost <some port>` 您能否将我转发给某种指南或参考来帮助我完成此操作？我认为我需要在安装服务器应用程序的 linode 上配置一些东西？很难吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:15:56.593

这段代码是正确的。可能是您在防火墙中的问题，您可以通过连接到本地主机来测试此代码吗？telnet localhost 5000 你能改成 0.0.0.0 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:08:32.420

我对linode不熟悉，但我猜你需要在防火墙上打开5000端口才能连接。您可以通过在 linode 实例上的 ssh 会话中尝试相同的 telnet 命令来验证这一点。如果它从那里工作，那肯定是防火墙。

# c++ - 是否可以在构造函数中使用模板方法模式？

> ID：14552412
> 
> 赞同：5
> 
> 时间：2013-01-27T21:17:10.643
> 
> 标签：c++, constructor, virtual, template-method-pattern

> **可能重复：**
> [在构造函数中调用虚函数](https://stackoverflow.com/questions/962132/calling-virtual-functions-inside-constructors)

我有一个类 Shape 及其子类 Sphere ：

```
//Shape : 

class Shape
{
    public:
        Shape(const string& name);
        virtual ~Shape();

        virtual string getName();

    protected:

        string mName;

};

Shape::Shape(const string& name) : mName(name)
{
   /*Some stuff proper to Shape*/

   /*Some stuff proper to subclass (sphere)*/

   /*Some stuff proper to Shape*/
}

Shape::~Shape(){}

string Shape::getName(){ return mName; }

//Sphere :

class Sphere : public Shape
{
    public:
        Sphere(const string& name, const float radius);
        virtual ~Sphere();

        virtual string getRadius();

    protected:

        float mRadius;
}

Sphere::Sphere(const string& name, const float radius) : Shape(name), mRadius(radius)
{
   /*Some stuff*/
}

Sphere::~Sphere(){}

float Sphere::getRadius(){ return mRadius; } 
```

现在，如何处理 Shape 构造函数中的子类内容？我可以求助于 [模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)，但我将被迫在构造函数中调用纯虚函数；我试过了，编译器不喜欢它

**编辑**：

我选择在一个新方法“init”中移动构造函数，而虚拟方法将是“subInit”：

```
//Shape : 

class Shape
{
    public:
        Shape(const string& name);
        virtual ~Shape();

        virtual string getName();

        virtual void init();

    protected:

        string mName;

        virtual void subInit() = 0;

};

Shape::Shape(const string& name) : mName(name){}

Shape::~Shape(){}

string Shape::getName(){ return mName; }

void Shape::init()
{
   /*Some stuff proper to Shape*/

   /*Some stuff proper to subclass (sphere)*/
   /*Call to the pure virtual function subInit*/

   subInit();

   /*Some stuff proper to Shape*/
}

//Sphere : 

class Sphere : public Shape
{
    public:
         Sphere(const string& name, const float radius);
         virtual ~Sphere();

         virtual string getRadius();

        protected:

            float mRadius;

            void subInit();
    }

    Sphere::Sphere(const string& name, const float radius) : Shape(name),mRadius(radius)
    {}

    Sphere::~Sphere(){}

    float Sphere::getRadius(){ return mRadius; }

    Sphere::subInit()
    {
       /*Some stuff previously in the constructor*/
    } 
```

它基本上是模板方法模式

客户会写：

```
Shape* sphere = new Sphere();
sphere->init(); 
```

然后我有我的答案：在构造函数中应用这种模式是不可能的，至少在 C++ 中是这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:49:56.007

```
Shape::Shape(const string& name) : mName(name)
{
   /*Some stuff proper to Shape*/

   /*Some stuff proper to subclass (sphere)*/

   /*Some stuff proper to Shape*/
} 
```

子类特有的东西在子类存在之前不能运行，所以它应该放在子类的构造函数中。后面的东西可以放入子类构造函数调用的函数中。

```
Shape::Shape(const string& name) : mName(name)
{
   /*Some stuff proper to Shape*/
}

void Shape::finishConstruction()
{   
   /*Some stuff proper to Shape*/
}

Sphere::Sphere(const string& name, const float radius)
: Shape(name), mRadius(radius)
{
    /*Some stuff proper to subclass (sphere)*/

    finishConstruction();
} 
```

# javascript - 加法是可交换的吗？

> ID：14552415
> 
> 赞同：3
> 
> 时间：2013-01-27T21:17:34.120
> 
> 标签：javascript, numbers

JavaScript 的数字很古怪。我意识到加法不是关联的：

```
(-9999999999999999 + 1) + 1 === -9999999999999999 + (1 + 1) // false! 
```

可交换性呢？是否有 JavaScript 数字`a`，`b`例如

```
typeof a === 'number'
typeof b === 'number'
a + b !== b + a 
```

全部评估为`true`（除了`NaN`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:54:51.197

如果你仔细看，你会看到1-9999999999999999返回-10000000000000000，这不是这个操作的结果（应该是-9999999999999998）你只是达到了浮点精度的极限。执行此操作时可以看到相同的效果：0.0000000000000001+1 和 0.0000000000000002+1

所以[ecmascript 规范](http://www.ecma-international.org/ecma-262/5.1/)，数字应该遵循 64 位格式的 IEEE 754 标准。这对应于 16 位精度。这正是您的数字的大小。

**编辑**

关于您关于交换性的问题，以下是规范所述：

*在其余情况下，既不涉及无穷大，也不涉及零，也不涉及 NaN，并且操作数具有相同的符号或具有不同的大小，使用 IEEE 754 舍入到最近计算和舍入到最接近的可表示值模式。如果幅度太大而无法表示，则操作溢出，结果是适当符号的无穷大。ECMAScript 语言需要支持 IEEE 754 定义的逐渐下溢。*

所以它应该始终是可交换的，因为总和是计算然后四舍五入的。任何其他行为都将是您浏览器的错误。

**编辑 2**

更清楚的是，规范明确指出（第 11.6.3 节）：

*加法是一种交换运算，但并不总是结合的。*

# javascript - jQuery拼接DOM元素

> ID：14552417
> 
> 赞同：0
> 
> 时间：2013-01-27T21:17:48.843
> 
> 标签：javascript, jquery

我想执行一个非常类似于原生 Array.splice 的拼接方法，但我想拼接一个 DOM 元素的 jQuery 集合。这是如何干净地完成的？

编辑：为什么我需要示例代码？我正在寻找与 ECMAScript Array.splice 函数完全相同的功能，除了我希望它在 DOM 元素的 jQuery 数组上工作，并在完成后更新 DOM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:28:51.890

如果您在拼接集合后使用 DOM 集合，则需要使用该集合重新加载 DOM 以使更改生效。

因此，使用 append 和 remove 关键字进行实时更改 .. 这等于在集合上拼接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:49:53.870

使用 jQuery 选择元素实际上会为您提供一个元素数组，可以将其视为普通的 javascript 数组以及 jQuery 对象。为确保数组是 jQuery 对象，您可以将其包装在对`jQuery()`. 例如：

```
var x = jQuery('p'),
    y = jQuery(x.splice(x.length / 2, x.length));

x.css('background-color', 'red');
y.css('background-color', 'blue'); 
```

`x`包含`<p>`标签的前半部分，现在都具有红色背景，而`y`后半部分则具有蓝色背景。

这里有一些[证据](http://jsfiddle.net/86mqx/)。

此外，混合标签没有问题（例如`<p>`，`<div>`标签可以在数组中，jQuery 将按预期工作）。见[这里](http://jsfiddle.net/86mqx/1/)。

# jquery - 如何设置数据拇指

> ID：14552421
> 
> 赞同：0
> 
> 时间：2013-01-27T21:18:19.453
> 
> 标签：jquery, url

我有一个看起来像这样的 img：

```
<img data-thumb="//i4.ytimg.com/vi/G9S_E2NgSM8/mqdefault.jpg" src="http:///yts/img/pixel-vfl3z5WfW.gif" alt="Miniatuur" width="182"> 
```

我想对驻留在 data-thumb 中的 url 做一些事情。如果是`img src`我会使用`prop`or `attr`，我尝试了这个用于 data-thumb 但它不起作用。如何使用 Jquery 访问 data-thumb 中的 url？（在互联网上找不到任何东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:20:50.600

```
$('img').data('thumb'); 
```

有关更多信息，请参阅[http://api.jquery.com/data/](http://api.jquery.com/data/)。

# java - Java unsigned - remove sign bit

> ID：14552424
> 
> 赞同：0
> 
> 时间：2013-01-27T21:18:30.297
> 
> 标签：java, converter, unsigned, unsigned-integer

I have this function:

```
public static final int UNSIGN(short b){

    return (b & 0xFFFF);
} 
```

The intent here is to use the value in 'b' as if it were positive, by this I mean as if it were an unsigned int, capable of holding 65536 values. However, it doesn't work. For example:

If 'b == -122' the function returns '65414'.

I also tried this way:

```
public static final int UNSIGN(short b){

    return (b & 0xFF);
} 
```

But that would return me '48' if 'b == 304'.

I'm really lost here, hope someone can help out.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:21:22.263

> The intent here is to use the value in 'b' as if it were positive.

Do you mean you want to find the absolute value of `b`? That would be [`Math.abs`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#abs%28int%29).

But your code *is* treating `b` as if it were an unsigned short. When `b` is -122, the bits will be

```
1111111110000110 
```

... which is 65414 when viewed as an unsigned value.

(122 is 0000000001111010, so to negate it you reduce the value by 1 and flip all the bits.)

# java - How do I correspond a for loop with a String array?

> ID：14552425
> 
> 赞同：0
> 
> 时间：2013-01-27T21:18:35.197
> 
> 标签：java, arrays, string

> **Possible Duplicate:**
> [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

I have an array of `String`s, the array is called `Morse`:

```
private final static String[] Morse = {".-", "-...", "-.-.", "-..", ".", "..-.", "--.", "....",
    "..", ".---", "-.-", ".-..", "--", "-.", "---", ".--.", "--.-",  ".-.", "...", "-", "..-",
    "...-" ,".--" ,"-..-", "-.--", "--..",".-.-.-","--..--","..--.." ,"|"};

private final static String[] Colours = {"red","green","white"}; 
```

Then there is my code:

```
char[] stringArray;
stringArray = converttoMorse(letter).toCharArray();

char ch;

for(int i=0;i<stringArray.length;++i)
{
    if(stringArray[i]== "." ) //Problem here
    {
        System.out.println(Colours[0]);
    }
    else if (stringArray[i] == "-" ) //Problem here
    {
        System.out.println(Colours[1]);
    }
    else
    {
        System.out.println(Colours[2]);
    }
} 
```

This is only a snippet of my actual program, the english to morse is working absolutely perfect. HOWEVER, I would like to indicate the dots and dashes as colors "red" and "green" respectively as string (with spaces indicating white).

I used the `toCharArray()` method to breakdown the printed outcome Morse as an array. However I'm not able to correspond each of these dots and dashes to their specific colours. For example, I would like `".-"` to show as `"red green"`. How can I do this? Is there a specific method for doing so?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:48:03.987

因为`stringArray`是 a`char[]`您需要将其内容与 a 进行比较`char`。

你需要：

```
if (stringArray[i] == '.') 
// '.' is the dot character,
// "." is a String that contains only the dot character 
```

如果你想比较字符串，你应该阅读这个问题：[How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:04:18.693

在我看来，您有 a `String[]`，并且您希望结果是 a`String[]`以指示红绿色。为此，我们将使用一些正则表达式和外部方法。我什至不想弄乱 char 数组，因为从那个到 String 数组会不那么简单。

注意：这假定您的数组中没有元素是`null`，否则肯定会爆炸。您可以在 之前进行简单的空检查`replaceAll`以减轻这种情况。

```
public static String[] convertToRedGreen() {
    // Since the array we want is static, our method is too.
    String[] redGreen = new String[Morse.length];
    for(int i = 0; i < Morse.length; i++) {
        redGreen[i] = Morse[i].replaceAll("[.]", " red ").replaceAll("[-]", " green ");
    }
    return redGreen;
} 
```

这会给你一个`String[]`看起来像这样的东西。

> ```
> [ red  green ,  green  red  red  red ,  green  red  green  red ,  green  red  red ,  red ,  red  red  green  red ,  green  green  red ,  red  red  red  red ,  red  red ,  red  green  green  green ,  green  red  green ,  red  green  red  red ,  green  green ,  green  red ,  green  green  green ,  red  green  green  red ,  green  green  red  green ,  red  green  red ,  red  red  red ,  green ,  red  red  green ,  red  red  red  green ,  red  green  green ,  green  red  red  green ,  green  red  green  green ,  green  green  red  red ,  red  green  red  green  red  green ,  green  green  red  red  green  green ,  red  red  green  green  red  red , |] 
> ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T21:20:57.670

Don't use == to compare strings: [see here](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)

# android - 使用全局 JSON 标签解析 Android JSON

> ID：14552430
> 
> 赞同：0
> 
> 时间：2013-01-27T21:18:56.507
> 
> 标签：android, json, parsing, tags

我正在开发一个 Android 项目，我的 json 字符串有点奇怪，所有教程都显示我需要解析 JSONArray，但我的 JSON 没有数组名称。这是一个示例 json url。（我的理解是在 [

```
 [
 ///Something should be here
 {
    "id": 15483,
    "title": "Bilbo Baggins is Cool",
    "permalink": "http://example.com/2012/12/03/",
     "content": "Hello World",
    "date": "2012-12-03 00:04:08",
    "author": "Bilbo Baggins",
    "thumbnail": "http://example.com/wp-        content/uploads/2012/12/DSC02971.jpg",
    "categories": [
        "News"
    ],
    "tags": [
        "LOTR",
        "One Ring",
        "Patch",
        "Police Department"
    ]
}
] 
```

像这个例子[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/) 他们在开头有一个名为“contacts”的标签，让他可以使用 JSONArray 遍历所有内容并获取标签...我迷路了。如何解析这些数据？教程代码不起作用，因为我无法提取数组（至少我认为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:29:43.223

可以看[这篇](https://stackoverflow.com/questions/14552123/parse-complex-json-in-android/14552221#14552221)帖子，好像有类似的 JSONArray.. 可以简单的使用：

```
JSONArray yourArray = new JSONArray(jsonString);
// do the rest of the parsing by looping through the JSONArray 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:47:59.243

```
 I am lost 
```

首先，我想告诉您，在 androidhive 的示例中，jsonstring 的`root`元素是 ，而您作为问题发布的 jsonstring`jsonobject`的元素是. 其次，不必总是在数组的开头有一个名称来使用它并从中提取数据。但是，在复杂的情况下肯定需要它，这也是一种**很好的做法**。`root``jsonarray`

 **```
How can I parse this data? 
```

根元素不同，所以需要改变消费数据的方式，

以 androidhive 为例，

```
 // Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url); //look at the left side of assignment operator.here result is being consumed in JSONObject

try {
    // Getting Array of Contacts
    contacts = json.getJSONArray(TAG_CONTACTS);

    // looping through All Contacts
    for(int i = 0; i < contacts.length(); i++){
        JSONObject c = contacts.getJSONObject(i);

        // Storing each json item in variable
        String id = c.getString(TAG_ID);
        String name = c.getString(TAG_NAME);
        String email = c.getString(TAG_EMAIL);
        String address = c.getString(TAG_ADDRESS);
        String gender = c.getString(TAG_GENDER);

        // Phone number is agin JSON Object
        JSONObject phone = c.getJSONObject(TAG_PHONE);
        String mobile = phone.getString(TAG_PHONE_MOBILE);
        String home = phone.getString(TAG_PHONE_HOME);
        String office = phone.getString(TAG_PHONE_OFFICE);

    }
} catch (JSONException e) {
    e.printStackTrace();
} 
```

您作为问题发布的 jsonstring 可以在 JSONArray 中使用，

```
 // Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONArray json = jParser.getJSONFromUrl(url); //look at the left side of assignment operator.here result is being consumed in JSONArray

try {
    // looping through All data
    for(int i = 0; i < json.length(); i++){
        JSONObject c = json.getJSONObject(i);

        // Storing each item in variable
        String id = c.getString("id");
        String title= c.getString("title");
        String permalink= c.getString("permalink");
        String content= c.getString("content");

    }
} catch (JSONException e) {
    e.printStackTrace();
} 
```**

# perl - Perl Script to grep for and string in a multiple text files and copy matching line to spreadsheet

> ID：14552437
> 
> 赞同：0
> 
> 时间：2013-01-27T21:19:46.527
> 
> 标签：perl

I am newbie to perl, I would like to write a perl script to read in multiple text files and look for string and copy the line containing string to an spreadsheet.

Ex: I want to open file csv.txt and look for string "Color" in each line and copy the line to a spread sheet

> > Color: Name any color

From this line I want to copy Name any color to spreadsheet.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:45:18.147

对于初学者：阅读 CSV 文件，您可以使用 Text:Csv。

[http://metacpan.org/pod/Text::CSV](http://metacpan.org/pod/Text::CSV)

不错的教程： http: [//perlmaven.com/how-to-read-a-csv-file-using-perl](http://perlmaven.com/how-to-read-a-csv-file-using-perl)

您可以使用简单的正则表达式来查找每一行：

```
if ($line =~ m!Color!){
   #do things if $line contain this word

} 
```

您可以使用此模块编写一个新的 excel 文件：Excel::Writer::XLSX

[http://metacpan.org/pod/Excel::Writer::XLSX](http://metacpan.org/pod/Excel::Writer::XLSX)

如果您仍然遇到问题，请关闭此问题，创建一个新问题，并且不要忘记在其中包含您的代码：[https ://stackoverflow.com/questions/how-to-ask](https://stackoverflow.com/questions/how-to-ask)

# css - 定位 CSS 调用框以正确对齐

> ID：14552439
> 
> 赞同：0
> 
> 时间：2013-01-27T21:20:11.577
> 
> 标签：css, twitter-bootstrap

我无法对齐以下项目（如下所示）：基本上，该用户的文本主体左侧出现了一个小的用户头像和一些统计信息，以及下面的任何其他元素。我已将我的整个页面设置为 Bootstrap `<div class="container">`，因此换句话说，用户头像可以与`container`类设置的页面的最左侧对齐，主要元素位于右侧。我无法排列任何“附加元素”，而且`vertical-align:text-top`在我的课程中使用它似乎不起作用..感谢您的帮助！

想要的输出...

```
 ----   -------------------------------
|user| |main text ...                  |
|ava-| |                               |
|tar | |                               |
 ----  |                               |
       |                               |
        -------------------------------
        -------------------------------
       |additional elements...         |
        ------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:23:10.090

**HTML**

```
<div id="parentDiv">
    <img id="avatar" src="" />
    <div id="rightDiv">
        <div id="mainText">
        </div>
        <div id="elements">
        </div>
    </div>
</div> 
```

**CSS**

```
#parentDiv
{
    overflow:hidden;
}
#avatar
{
    float:left;
    width:200px;
    height:300px;
}
#rightDiv
{
    float:left;
    margin-left:10px;
} 
```

看看：http: [//jsfiddle.net/AliBassam/pxY6c/](http://jsfiddle.net/AliBassam/pxY6c/)

# javascript - Javascript JSON 显示主题标签符号

> ID：14552441
> 
> 赞同：1
> 
> 时间：2013-01-27T21:20:17.453
> 
> 标签：javascript, json

我正在通过 URL 保存一些数据，其中一个数据元素是文本。我希望能够保存和存储带有主题标签的笔记。例如，我希望能够保存“我相信 #yolo”，但是当我保存它（通过 php）并使用 javascript 再次检索它时，我得到“我相信”。无论如何，我可以找回那个#yolo 吗？我尝试使用 str_replace，但我可能弄错了正则表达式。

感谢所有的帮助！

```
 function dropsuccess() {
        answerArray = [];
        answerArray.id = Math.round(new Date().getTime() / 1000);
        answerArray.text = document.getElementById("boglory").value;
        $.getJSON("saveBlade.php?id="+answerArray.id+"&text="+answerArray.text,
        function(data) {
            if (data.hasOwnProperty("error")) {
                alert(data.error);
                } else {
                    $("#handle").animate({marginTop:"100%"},800, 
                    function() {
                        document.getElementById("handle").style.display = "none";document.getElementById("bladecontainer").style.display = "none";$('#qod').fadeIn('medium');
                    });     
            }
        });     
    } 
```

answerArray.text 包括正在传递的文本。例如（“我相信#yolo。”）#yolo 是一个字符串，而不是一个 div-id 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:30:35.280

问题是它`#`是 URL 中的保留字符，用于指示跳转到锚点。

你需要逃避它。如果您在 getJSON 函数中将它们作为数据参数提供，JQuery 会自动转义所有需要的字符：

```
$.getJSON("saveBlade.php",
  {
    id: answerArray.id,
    text: answerArray.text
  },
  function(data) { 
```

看[这里](http://api.jquery.com/jQuery.getJSON/)了解详情

# html - 页面右侧出现renundat空白的原因

> ID：14552443
> 
> 赞同：0
> 
> 时间：2013-01-27T21:20:42.903
> 
> 标签：html, css, width, whitespace, padding

在我的网站上，我的页面右侧有空格，但页面中的所有宽度都设置为 100%，包括页面的颜色。因此，即使有一个宽度延伸到页面之外，这部分也应该与其余部分的颜色相同。

我正在使用一个基于锚的网站，如果你查看它[http://www.jeremyspence.net78.net/](http://www.jeremyspence.net78.net/)你可以看到只有第一个锚的侧面有空格，但侧面有额外的空间一直（显然）。我不想要空白或额外的空间，但空白令人困惑。是的，我`margin: 0;`有`padding: 0;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:27:56.637

**了解盒子模型**

`websitecontainer`在您的站点中，classes`packagecontainer`和`mecontainer`all 具有以下样式规则：

```
...
width:100%;
padding:50px;
... 
```

这实际上意味着它们应该跨越容器的整个宽度（在本例中为主体），然后浏览器应该在该宽度周围*添加*50px 的填充。根据现代浏览器使用的[W3C 标准盒模型](https://developer.mozilla.org/en-US/docs/CSS/box_model)，这就是它应该采用的方式。在过时的 IE 版本中，box-model 会按照页面中当前设置的方式工作，并且会从宽度中*减去填充。*

请参阅下图以了解差异：

![W3C 盒子模型](../Images/6ab489f0c508d045234674f91e600370.png)

**解决方案**

直接的解决方案是从这些容器中移除填充，消除额外的宽度和多余的间距。如果您需要该填充，您可以简单地将当前容器的内容包装在另一个容器中，然后将填充应用于这个新的内部容器。例如：

```
 <div class="some-container">
     <div class="inner-container">
          <!--Content goes here as before-->
     </div>
 </div> 
```

现在的样式规则是：

```
 .some-container {width:100%;}
 .inner-container {padding:50px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:24:56.433

用这个替换这些样式的当前 CSS 代码

```
.websitescontainer {
    width: 100%;
    height: 1080px;
    background: #cefece;
}
.packagescontainer {
    width: 100%;
    height: 1080px;
    background: #cefefe;
}
.mecontainer {
    width: 100%;
    height: 1080px;
    background: #fecefe;
} 
```

注意：您可以通过这种方式制作此代码

```
.websitescontainer, .packagescontainer, .mecontainer{
    width: 100%;
    height: 1080px;
    background: #cefece;
}
.mecontainer {
    background: #fecefe;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:30:30.507

你的CSS在这里：

```
.homecontainer {
    background:#ffe6ce;
    width: 100%;
    height: 1080px;
    padding-top:50px;
} 
```

应该是：

```
.homecontainer {
    background:#ffe6ce;
    width: 100%;
    height: 1080px;
    padding: 50px 0 0 0;
    margin: 0;
} 
```

注意添加`margin`和修改你`padding`的简写格式，基本上从顶部顺时针运行：50px（顶部）0（右）0（底部）0（左）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T21:33:12.537

好像去掉

```
padding: 50px; 
```

从`.mecontainer`解决它。

# android - 按下设置按钮后我的首选项不显示

> ID：14552445
> 
> 赞同：0
> 
> 时间：2013-01-27T21:20:51.793
> 
> 标签：android, android-preferences

所以，我目前正在尝试编辑android的api提供的Snake游戏。我试图让它在按下菜单->设置->恢复后恢复游戏。但是，在我按下设置后，它并没有一路恢复，而是退出并从那里恢复。我正在使用 Intents 来恢复程序。

```
public boolean onOptionsSelected(MenuItem menu){
    switch(menu.getItemId()){
        case R.id.settings:
        Intent prefActivity = new Intent(this,MyPreferences.class);
        startActivityForResult(prefActivity, KEY_RESUME_RESULT);
        return true;
}

public void onActivityResult(int requestCode, int resultCode, Intent data){
    switch(requestCode){
    case KEY_RESUME_RESULT:
        if(resultCode==RESULT_OK){
            if(mSnakeView.getMode() == SnakeView.PAUSE)
                this.mSnakeView.setMode(SnakeView.RUNNING);
        }
    }
} 
```

这是在 MyPreferences.class

```
public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.snake_preferences);
        resume = (Preference)findPreference(getString(R.string.key_resume));
        onPreferenceTreeClick(this.getPreferenceScreen(),resume);
    }

@Override
public boolean onPreferenceTreeClick(PreferenceScreen preferencescreen,Preference preference){
        super.onPreferenceTreeClick(preferencescreen,preference);
        Intent intent = new Intent();
        if(preference == resume){
            setResult(Activity.RESULT_OK,intent);
            finish();
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:33:34.977

您明确地调用了在内部恢复游戏的方法`onCreate()`，这可能就是您启动设置后游戏立即恢复的原因。我建议不要使用该方法，而是根据您的喜好设置一个点击监听器：

```
public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.snake_preferences);
  resume = (Preference)findPreference(getString(R.string.key_resume));
  resume.setOnPreferenceClickListener (new Preference.OnPreferenceClickListener()
                                         {
    @Override
    public void onPreferenceClick(Preference preference)
    {
      setResult(Activity.RESULT_OK,intent);
      finish();
    }
  });
} 
```

此外，基于您的代码`onOptionsSelected()`没有显式暂停游戏（但是考虑到`onPause()`将被调用的 UI 应该暂停），您可能需要对此进行调查。

# javascript - JavaScript，高级 .replace()

> ID：14552446
> 
> 赞同：0
> 
> 时间：2013-01-27T21:20:53.607
> 
> 标签：javascript, text, replace, emoticons

```
function changeText(getString){
    var smiles_from_to = new Array();
    smiles_from_to[":)"] = "ab"; smiles_from_to[":-)"] = "ab";
    smiles_from_to[":("] = "ac"; smiles_from_to[":-("] = "ac";
    smiles_from_to["B)"] = "af"; smiles_from_to["B-)"] = "af";
    smiles_from_to[";("] = "crygirl2"; smiles_from_to[";-("] = "crygirl2";
    smiles_from_to[":-*"] = "aw"; smiles_from_to[":*"] = "aw";
    smiles_from_to[":D"] = "ag"; smiles_from_to[":-D"] = "ag";
    smiles_from_to["(devil)"] = "aq"; smiles_from_to["(wtf)"] = "ai";
    smiles_from_to["(sos)"] = "bc"; smiles_from_to["(boom)"] = "bb";
    smiles_from_to["(rofl)"] = "bj"; smiles_from_to["xD"] = "bj";
    smiles_from_to["(music)"] = "ar"; smiles_from_to["(angel)"] = "aa";
    smiles_from_to["(beer)"] = "az"; smiles_from_to["(omg)"] = "bu";
    smiles_from_to["(dance)"] = "bo"; smiles_from_to["(idiot)"] = "bm";
    smiles_from_to["(clap)"] = "bi"; smiles_from_to["(gotkiss)"] = "as";
    var replaced = getString;
    for(var key in smiles_from_to){
       replaced = replaced.replace(key, "<img src='"+chrome.extension.getURL("images/"+smiles_from_to[key]+".gif")+"' />");
    }
    return replaced;
} 
```

大家好，我需要为更简单的东西优化代码，所以尽量避免 for 循环。“var 替换”是一个巨大的 html 代码（包含 100 行带有日期、用户名、用户信息（工具提示）的消息的 div 内容，消息，.....）此代码是我的 chrome 扩展中的一部分。所以我不能做到这一点 php 方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:26:03.050

您可以使用一个巨大的正则表达式，形式为`/:\)|:\(|.../g`，然后传递一个回调作为替换，在您的查找对象中查找匹配项。

# mysql - Can "1054 Unknown column in order clause" be the result of an incorrectly killed mysql process?

> ID：14552453
> 
> 赞同：1
> 
> 时间：2013-01-27T21:21:34.197
> 
> 标签：mysql, xampp

I just got a `1054 Unknown column x.y in order clause` error inside phpMyAdmin on a query where I did not expect it, because

*   The query used did not contain an ORDER clause.
*   The query used cannot be faulty since it works fine on a database with the identical table schema.

The problem came up after I stopped a long running query by simply killing the mysql daemon from XAMPP Control panel.

A `REPAIR TABLE x` didn't help. I got rid of the problem by explicitly querying the column that allegedly doesn't exist (`SELECT x.y FROM x`) and then doing my query again - which then worked.

*Is it possible that stopping the mysql process like I did is the reason for this symptom?*

**EDIT:** The query that produced the said error:

```
SELECT * FROM x AS tblA

INNER JOIN (

    SELECT z, y, COUNT(*) AS count
    FROM x
    GROUP BY z, y
    HAVING count > 1

           ) tblB
ON tblA.z = tblB.z AND tblA.y = tblB.y 
```

**EDIT 2:** The original query that was running on a 300k row table when I killed mysql:

```
SELECT * FROM x AS temp1

INNER JOIN ( SELECT z, y, Count(*) AS count FROM x GROUP BY z, y HAVING Count > 1 ) temp2
ON temp1.z = temp2.z AND temp1.y = temp2.y

RIGHT JOIN 
(
SELECT DISTINCT whole.v FROM x AS tblA

INNER JOIN ( SELECT z, y, Count(*) AS count FROM x GROUP BY z, y HAVING Count > 1 ) tblB
ON tblA.z = tblB.z AND tblA.y = tblB.y

RIGHT JOIN ( SELECT * FROM x ) whole
ON tblA.v = whole.v AND tblA.w = whole.w

WHERE tblA.v IS NULL
) temp3

ON temp1.v != temp3.v 
```

# java - Cant add gui elements from other methods and if statmens

> ID：14552456
> 
> 赞同：0
> 
> 时间：2013-01-27T21:22:01.757
> 
> 标签：java, if-statement, methods

Hey all I have one question I am new to GUI stuff so I need some help when I want to add an element to a window using some other method or if statement I don't get error but it doesn't show up hears a code I marked problem I am working in java by the way this is not whole program but only this is a problem

```
import java.awt.*;  

import java.awt.event.*;

import javax.swing.*;

public class Gui extends JFrame{

private JTextField usernameTF;
private JPasswordField passwordField;
private String username,password;
private JRadioButton A,B,C,D,F;

//private JComboBox box;
private JLabel logo,errorPic,promt;
private JButton logIn;
private boolean value;
private Apples function= new Apples();

public Gui(){
    super ("Awsome Progrma");
    setLayout(new FlowLayout());

    Icon errorIcon = new  ImageIcon(getClass().getResource("wrong.png"));
    errorPic = new JLabel(errorIcon);

    usernameTF = new JTextField(10);
    usernameTF.setToolTipText("Enter your user name hear");
    add(usernameTF);

    passwordField = new JPasswordField(10);
    passwordField.setToolTipText("Enter your password hear");
    add(passwordField);

    logIn = new JButton("Log IN");
    add(logIn);

    usernameTF.addActionListener(
            new ActionListener(){
                public void actionPerformed(ActionEvent event){
                    username = event.getActionCommand();
                    password = passwordField.getText();
                    value = function.chack(username,password);
                    if (value == true){add(errorPic);}                      // this is a problem JLabel dosn't show up in my window 
                }
            }
        );
    passwordField.addActionListener(
            new ActionListener(){
                public void actionPerformed(ActionEvent event){
                    username = usernameTF.getText();;
                    password = event.getActionCommand();
                    value = function.chack(username,password);
                    if (value == true){add(errorPic);}                          // this is a problem JLabel dosn't show up in my window 
                }
            }
        );
    logIn.addActionListener(
            new ActionListener(){
                public void actionPerformed(ActionEvent event){
                    username = usernameTF.getText();
                    password = passwordField.getText();
                    value = function.chack(username,password);
                    if (value == true){add(errorPic);}                                  // this is a problem JLabel dosn't show up in my window 
                    }
                }
            );
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:32:07.867

唯一不会显示的 GUI 元素是`Jlabel` `errorPic`. 这是因为容器需要在组件添加后进行验证。您需要致电：

```
revalidate();
repaint(); 
```

添加后`JLabel`。更好的方法是在向 中`JLabel`添加组件时添加没有图像，`JFrame`然后简单地调用`JLabel.setIcon`以更新标签。

* * *

*一些旁注：*

*   不要延长`JFrame`。而是直接创建窗口组件的实例。
*   `JPassword.getText`已*弃用*。使用起来更安全`JPassword.getPassword`。
*   考虑在应用程序启动时使用[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

# python-2.7 - 在python中生成十六进制数字列表

> ID：14552460
> 
> 赞同：0
> 
> 时间：2013-01-27T21:22:35.717
> 
> 标签：python-2.7

我正在研究一个密码学项目，我需要生成所有可能的十六进制数字（数字的长度= 16 位二进制）并将它们放在一个列表中以便以后使用它们。

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:27:56.813

为什么不生成从 0 到 2^16-1 的所有整数，并转换为十六进制？是的，我知道它可以更有效地完成，但你只做一次。为什么要让事情变得困难？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:14:54.993

（然而）另一个 Python one liner：

```
a = [hex(x) for x in xrange(0,pow(2, 16))] 
```

**编辑：**鉴于所有评论，我们现在有：

```
a = map(hex, xrange(pow(2,16) - 1)) 
```

# windows - 为什么 Git 命令的长结果会杀死我的 PowerShell 提示符？

> ID：14552466
> 
> 赞同：15
> 
> 时间：2013-01-27T21:23:36.637
> 
> 标签：windows, git, powershell

我在 Windows 上使用 Git Shell（PowerShell 的模块）。它是我在为 Windows 安装 Git 时安装的。当我运行一个导致大量文本的命令时，例如`git log`我得到一页结果，然后在屏幕底部出现一个“：”。我想这是一个继续提示，因为我按下`ENTER`并获得另一个数据屏幕。发生这种情况后，我通常无法恢复到正常提示。我在 shell 底部得到了文本`(END)`，它看起来像是掩盖了我尝试输入的任何命令的前几个字符，甚至看起来有点零星。我似乎无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T00:47:42.097

一些 git 命令使用分页器来允许您一次查看一个完整的屏幕信息。git 附带的通常是`less`（[更多信息](http://en.wikipedia.org/wiki/Less_%28Unix%29)）。您可以访问常用命令的链接，但您发现最重要的是`q`退出以返回命令提示符。我发现的下一个最有用的方法是`space`全屏移动到下一个屏幕。

如果您愿意，可以在 git 配置文件的`core.pager`字段中更改使用的寻呼机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-25T20:36:16.377

只是为了添加到现有答案，正常的“windows”寻呼机是`more.com`，它通常`cmd`被简单地引用，但被具有类似功能`more`的函数隐藏在. 如果你设置`more``PowerShell`

```
git config --global core.pager more.com 
```

您的问题应该消失（尽管以较少但不多的功能为代价）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-05T13:26:22.620

这是一个老问题，但我想我会提到 git 还提供了一个 --no-pager 选项供您使用。

```
git --no-pager log 
```

希望对某人有所帮助。

# ruby-on-rails - Rails 参数，为什么是 params[:key] 语法？

> ID：14552471
> 
> 赞同：5
> 
> 时间：2013-01-27T21:24:07.867
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试手动创建一些参数以传递给 Rails 控制器函数，为什么参数哈希的键用冒号列出，例如`params[:key]`而不是`params["key"]`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T21:31:03.133

Rails对几乎所有来自其内部[的哈希使用 ActiveSupport`HashWithIndifferentAccess`](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html#method-c-new)，例如`params`. A 的`HashWithIndifferentAccess`行为与常规哈希相同，只是通过相同“值”的符号或字符串的键访问返回相同的哈希值。例如：

```
h = HashWithIndifferentAccess.new
h[:foo] = 'bar'
h[:foo]  #=> "bar"
h['foo'] #=> "bar"

h['foo'] = 'BAR'
h[:foo]  #=> "BAR" 
```

与普通哈希相比：

```
h = {}
h[:foo] = 'bar'
h[:foo]  #=> "bar"
h['foo'] #=> nil

h['foo'] = 'BAR'
h[:foo]  #=> "bar" 
```

这使您不必担心（无论好坏）特定键是符号还是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:33:11.553

哈希使用符号作为键，因为每个符号总是只有一个实例，这使得搜索更容易。使用字符串时，必须计算哈希值，因为它不能是相同的字符串（另一个实例，但具有相同的内容）。所以它使它更快。主动支持`HashWithIndifferentAccess`将使用方法将所有字符串转换为符号`#to_sym`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:44:46.360

在大多数情况下，字符串（带引号）和符号（带冒号）在 Rails 中作为哈希键互换。当哈希键是预定义的常量时，它们是惯用的。Ruby 1.9 具有用于编写带有键符号的哈希的语法糖。

# javascript - iBooks：导入 *.epub 文件时是否可以使用 localStorage？

> ID：14552474
> 
> 赞同：1
> 
> 时间：2013-01-27T21:24:24.337
> 
> 标签：javascript, local-storage, ibooks, epub3

我正在尝试创建一个可以在 iBooks 中阅读的示例 epub 文件，其中包含 iBooks 将通过 localStorage 访问的交互式内容。我可以在 chrome 和 firefox（不是 IE）中让 localStorage 片段在浏览器上正常工作。

我注意到当文件具有 *.xhtml 扩展名，只有 *.html 扩展名时，localStorage javascript 位不起作用。

我能够压缩 html、opf 和 ncx 并获得一个我可以在数字版本中阅读的 epub，并且只抛出与 javascript 相关的 epubcheck 错误。

我首先尝试将其导入 iBooks，并且可以正常阅读，但表单不是交互式的。然后我用谷歌搜索，发现一个帖子说它需要在 iFrame 中，我做到了。然后我可以在表单中输入文本，但本地存储位不起作用。

以下是 2 个相关的 html 文件：

```
<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
</head>
<body onLoad="writeStoredData( 'storedName' );" >

<div epub:type="chapter">

<h1>An HTML5 Ebook Sample</h1>
<p> A simple html5 form that uses local storage to hold user input info</p>
<ul><li>Does a device retain the info when the user moves from page to page? </li>
    <li>When the device is turned off and on?</li>
</ul>
<p>In this simple form, the body has an onLoad attribute that calls a function to load     the "name" from local storage. When the user enters input from a form the value is updated.     When the user closes the page and opens it again the value is still there.</p>
<br/>

<div class="formContainer">
<iframe class="content" src="form.html"></iframe>
</div>
<div id="storedName"></div>

<p>Go to <a href="ebook-sample-pg2.html">page 2</a>
</p>
</div>

<script>
    function writeStoredData( id ){

        var storedNameDiv = document.getElementById(id);
    storedNameDiv.innerHTML = "<p>The stored name is: <span class='selected'>"     + localStorage.getItem('somename') + "</span></p>";
    }   
</script>
</body>
</html> 
```

和形式：（这有写入localStorage的功能）

```
<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<title>Epub3 Test Input Form</title>

</head><body>
<form>
Please enter your name: <input type="text" id="nameInput"/>
<input type="submit" value="enter" onClick="writeLocal();"     onSubmit="window.location.reload()"/>

</form>

<script>
        function writeLocal(){
            var submittedName = document.getElementById('nameInput').value;
            // calling it 'somename' to indicate user defined key
            localStorage.setItem('somename', submittedName);
            writeStoredData( 'storedName' );
    }

    function writeStoredData( id ){
        var storedNameDiv = document.getElementById(id);
        storedNameDiv.innerHTML = "<p>The stored name is: <span class='selected'>"     + localStorage.getItem('somename') + "</span></p>";
    }   
</script>

</body></html> 
```

这是 content.opf 文件中的清单：

```
 <manifest>
    <item id="js" href="javascript/ebook-test.js" media-type="text/javascript"/> 
    <item href="form.html" id="form1" media-type="application/xhtml+xml"     properties="scripted"/>
    <item href="ebook-sample.html" id="page1" media-type="application/xhtml+xml" properties="scripted"/>
    <item href="ebook-sample-pg2.html" id="page2" media-type="application/xhtml+xml" properties="scripted"/>
    <item href="toc.ncx" id="ncx" media-type="application/x-dtbncx+xml"/>
    <item id="toc" properties="nav" href="toc.xhtml" media-type="application/xhtml+xml"/>
  </manifest> 
```

javascript编写的位根本不会出现。我的下一步是尝试在 iBooks Author 中创建一个文件，但希望能够使用 epub 来执行此操作。我知道 iBooks 应该能够做到这一点，因为我所做的大部分谷歌搜索都为 iBooks Author 提供了教程。

另外，我用 javascript 尝试了各种方法；我看到的大多数示例都在 html 文件底部的标记中包含代码，但我尝试在单独的 *.js 文件中，并且在 head 标记中，没有任何区别。

非常感谢任何帮助。bp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T22:57:16.693

`localStorage`已被 Apple 在 iBooks 中禁用，因此您不能希望您的代码从它呈现的 EPUB 中运行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T12:49:18.360

您可以使用 contenteditable 它将起作用。删除输入标签

# php - 带有注册的“字段列表”中的未知列“名称”

> ID：14552481
> 
> 赞同：0
> 
> 时间：2013-01-27T21:25:19.080
> 
> 标签：php, html, forms, multiplayer

好的，所以我正在创建一个在线多人游戏并创建了注册表单。我真的没有注意到代码有任何问题，想知道是否可以得到一些帮助。我写下用户名、密码、电子邮件，然后单击“注册”，它会出现“'字段列表'中的“未知列'名称'谢谢：

```
<?PHP

//Database Information

$dbhost = "databasehost";
$dbname = "databasename";
$dbuser = "databaseusername";
$dbpass = "datebasepassword";

//Connect to database

mysql_connect ( $dbhost, $dbuser, $dbpass)or die("Could not connect: ".mysql_error());
mysql_select_db($dbname) or die(mysql_error());

$name = $_POST['name'];
$email = $_POST['email'];    
$username = $_POST['username'];
$password = ($_POST['password']);

// lets check to see if the username already exists

$checkuser = mysql_query("SELECT username FROM users WHERE username='$username'");

$username_exist = mysql_num_rows($checkuser);

if($username_exist > 0){
    echo "That name already exists.Try another";
    unset($username);
    include 'registration.html';
    exit();
}

// lf no errors present with the username
// use a query to insert the data into the database.

$query = "INSERT INTO users (name, email, username, password)
VALUES('$name', '$email', '$username', '$password')";
mysql_query($query) or die(mysql_error());
mysql_close();

echo "You are now registered!!!";

// mail user their information

$yoursite = 'www.foodworldvw.tk';
$webmaster = 'Jordan';
$youremail = 'simplyentertainingji@gmail.com';

$subject = "Thanks for registering at our website :)";
$message = "$username, you are now registered on Food World  
    To login, simply go to http://foodworldplay.tk and enter in the following details in the login form:
    Username: $username
    Password: $password

 $webmaster";

mail($email, $subject, $message, "From: $yoursite <$youremail>\nX-Mailer:PHP/" . phpversion());
echo "Thank you for registering with Food World.More information has been sent to your E-mail"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:26:13.307

`INSERT INTO users (name`=>`INSERT INTO users (username`

你应该感到羞耻 我比你更了解你的数据库

[此外，您的代码中存在 SQL 注入漏洞，这是一个严重的安全问题。](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

你需要尽快修复它。

# python - For循环跳过大部分数据集

> ID：14552482
> 
> 赞同：1
> 
> 时间：2013-01-27T21:25:28.183
> 
> 标签：python, numpy, pandas

我的数据集还有另一个问题。基本上，有一个具有相关特征的基因列表，包括位置麻木（第 3 和 4 列）和链方向（+ 或 -）。我正在尝试对位置进行计算，以使它们相对于每个基因的起始密码子类型（第二列），而不是整个基因组（就像现在一样）。问题是，计算只在 + STRAND 序列上执行， - STRAND 序列没有出现在输出中。下面是数据集、我的代码、输出以及我尝试过的示例。

这是数据集：

```
 GENE_ID TYPE    POS1    POS2    STRAND
PITG_00002  start_codon 10520   10522   -
PITG_00002  stop_codon  10097   10099   -
PITG_00002  exon    10474   10522   -
PITG_00002  CDS 10474   10522   -
PITG_00002  exon    10171   10433   -
PITG_00002  CDS 10171   10433   -
PITG_00002  exon    10097   10114   -
PITG_00002  CDS 10100   10114   -
PITG_00003  start_codon 38775   38777   +
PITG_00003  stop_codon  39069   39071   +
PITG_00003  exon    38775   39071   +
PITG_00003  CDS 38775   39068   + 
```

这是代码：

```
import numpy
import pandas
import pandas as pd
import sys

sys.stdout = open("outtry2.txt", "w")
data = pd.read_csv('pinfestans-edited2.csv', sep='\t')
groups = data.groupby(['STRAND', 'GENE_ID'])

corrected = []

for (direction, gene_name), group in groups:
    ##print direction,gene_name
    if group.index[group.TYPE=='start_codon']:
        start_exon = group.index[group.TYPE=='exon'][0]
    if direction == '+':
        group['POSA'] = 1 + abs(group.POS1 - group.POS1[start_exon])
        group['POSB'] = 1 + abs(group.POS2 - group.POS1[start_exon])
    else:
        group['POSA'] = 1 - abs(group.POS2 - group.POS2[start_exon])
        group['POSB'] = 1 - abs(group.POS1 - group.POS2[start_exon])
    ##print group
    corrected.append(group) 
```

以下是输出示例：

```
 + PITG_00003
    GENE_ID     TYPE         POS1   POS2   STRAND  POSA  POSB
8   PITG_00003  start_codon  38775  38777  +       1     3   
9   PITG_00003  stop_codon   39069  39071  +       295   297 
10  PITG_00003  exon         38775  39071  +       1     297 
11  PITG_00003  CDS          38775  39068  +       1     294 
```

以前我得到一个数组值错误（[制表符分隔的数据集 ValueError 具有多个元素的数组的真相是模棱两可的错误](https://stackoverflow.com/questions/14543663/tab-delimited-dataset-valueerror-truth-of-array-with-more-than-one-element-is-am#comment20286851_14543663)），但这已经得到了解决。所以接下来我尝试只做这部分：

```
import numpy
import pandas
import pandas as pd
import sys

##sys.stdout = open("outtry2.txt", "w")
data = pd.read_csv('pinfestans-edited2.csv', sep='\t')#,
              #converters={'STRAND': lambda s: s[0]})
groups = data.groupby(['STRAND', 'GENE_ID'])

corrected = []

for (direction, gene_name), group in groups:
    print direction,gene_name 
```

并且输出打印出所有 GENE_ID 和它们的 STRAND 符号（+ 或 -），并且它对 + 和 - 序列都执行了此操作。所以在下面的某个地方，它没有在 STRAND 列中选择任何带有 - 的序列。

所以我尝试将其添加到原始代码中：

```
if direction == '+':
    group['POSA'] = 1 + abs(group.POS1 - group.POS1[start_exon])
    group['POSB'] = 1 + abs(group.POS2 - group.POS1[start_exon])
elif direction == '-':
    group['POSA'] = 1 - abs(group.POS2 - group.POS2[start_exon])
    group['POSB'] = 1 - abs(group.POS1 - group.POS2[start_exon])
else:
    break
print group
# put into the result array
corrected.append(group) 
```

这是输出的最后，它打印了第一个 - 然后在结束前冻结了一段时间：

```
+
        GENE_ID     TYPE         POS1    POS2    STRAND  POSA  POSB
134991  PITG_23350  start_codon  161694  161696  +       516   518 
134992  PITG_23350  stop_codon   162135  162137  +       957   959 
134993  PITG_23350  exon         161179  162484  +       1     1306
134994  PITG_23350  CDS          161694  162134  +       516   956 
- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T00:59:39.227

这些行对我来说似乎很奇怪：

```
if group.index[group.TYPE=='start_codon']:
    start_exon = group.index[group.TYPE=='exon'][0] 
```

第一个，我猜，只是试图检查该组是否具有起始密码子标记。但这没有意义，原因有两个。

(1) 如果只有一个 start_codon 条目并且它是第一个，那么条件实际上是错误的！

```
In [8]: group.TYPE == 'start_codon'
Out[8]: 
0     True
1    False
2    False
3    False
4    False
5    False
6    False
7    False
Name: TYPE

In [9]: group.index[group.TYPE == 'start_codon']
Out[9]: Int64Index([0], dtype=int64)

In [10]: bool(group.index[group.TYPE == 'start_codon'])
Out[10]: False 
```

也许你想要`any(group.TYPE == 'start_codon')`，或`(group.TYPE == 'start_codon').any()`或`sum(group.TYPE == 'start_codon') == 1`或什么？但这也不对，因为

(2) 您的代码仅在`start_exon`设置时才有效。如果不是，那么它要么给出 a`NameError`要么回退到上次发生的任何值，并且你无法保证这将是一个合理的顺序。

如果我只是单独使用`start_exon = group.index[group.TYPE=='exon'][0]`，那么我会得到

```
In [28]: for c in corrected:
   ....:     print c
   ....:     
       GENE_ID         TYPE   POS1   POS2 STRAND  POSA  POSB
8   PITG_00003  start_codon  38775  38777      +     1     3
9   PITG_00003   stop_codon  39069  39071      +   295   297
10  PITG_00003         exon  38775  39071      +     1   297
11  PITG_00003          CDS  38775  39068      +     1   294
      GENE_ID         TYPE   POS1   POS2 STRAND  POSA  POSB
0  PITG_00002  start_codon  10520  10522      -     1    -1
1  PITG_00002   stop_codon  10097  10099      -  -422  -424
2  PITG_00002         exon  10474  10522      -     1   -47
3  PITG_00002          CDS  10474  10522      -     1   -47
4  PITG_00002         exon  10171  10433      -   -88  -350
5  PITG_00002          CDS  10171  10433      -   -88  -350
6  PITG_00002         exon  10097  10114      -  -407  -424
7  PITG_00002          CDS  10100  10114      -  -407  -421 
```

我不知道这些值是否有意义，但它似乎并没有跳过任何东西。

# python - Python SyntaxError：在一行中使用 if 时语法无效

> ID：14552483
> 
> 赞同：2
> 
> 时间：2013-01-27T21:25:34.953
> 
> 标签：python

我尝试运行[Python 是否具有用于字符串自然排序的内置函数？](https://stackoverflow.com/questions/4836710/does-python-have-a-built-in-function-for-string-natural-sort)，但它给了我以下错误：

```
File " < stdin >", line 4

convert = lambda text: int(text) if text.isdigit() else text 

SyntaxError: invalid syntax 
```

有人可以帮忙吗？

谢谢...

* * *

更新：谢谢大家的回复。我首先将代码集成到自己的脚本中，但收到了错误。然后我刚刚在 Python 交互式窗口（就这一行）上测试了这个 def，它给出了同样的错误。

我正在使用 python/2.6.5。奇怪的是，这段代码在我的另一台计算机（Python 2.6.1）上运行。此代码是否特定于版本？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T21:42:09.063

下面的代码适用于 2.6.x

```
import re

li = ['elm1', 'elm0', 'Elm18', 'elm9', 'elm10', 'Elm11', 'Elm12', 'elm13']

def natural_sort(l): 
    convert = lambda text: int(text) if text.isdigit() else text.lower() 
    alphanum_key = lambda key: [ convert(c) for c in re.split('([0-9]+)', key) ] 
    return sorted(l, key = alphanum_key)

print natural_sort(li) 
```

再试一次，复制粘贴。

# servlets - 如何在 Windows 7 中配置 Tomcat 6.0.36 以使用 servlet

> ID：14552485
> 
> 赞同：0
> 
> 时间：2013-01-27T21:25:56.233
> 
> 标签：servlets, windows-7, tomcat6, web.xml

我将 tomcat-6.0.36 zip 文件解压缩到 c:\tomcat，现在我的 Tomcat 安装的根目录是*C:\tomcat*。我已将 CLASSPATH 设置为

".;C:\tomcat\lib\servlet-api.jar;C:\Program Files\Java\jdk1.7.0_10"

Tomcat-6.0.36 现在正在运行并显示主页

我创建了以下 Servlet

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
   public void doGet(HttpServletRequest req, HttpServletResponse res)
                                    throws ServletException, IOException  {

                    res.setContentType("text/html");
                    PrintWriter out = res.getWriter();

                    out.println("<HTML>");
                    out.println("<HEAD><TITLE>Hello World</TITLE></HEAD>");
                    out.println("BODY");
                    out.println("<BIG>Hello World</BIG>");
                    out.println("</BODY></HTML>");

            }
} 
```

上面的Servlet编译成功，生成的.class文件放在/webapps/ROOT/WEB-INF/classes目录下。提取 Tomcat zip 文件时没有创建 classes 目录，所以我自己创建了它。在 WEB-INF/ 目录中有一个 web.xml 文件，我没有对它做任何事情。

当我尝试通过 URL /servlet/HelloWorld 访问 Servlet HelloWorld 时，响应是

> HTTP 状态 404 - /servlet/HelloWorld
> 
> 类型状态报告
> 
> 消息 /servlet/HelloWorld
> 
> 描述 请求的资源不可用。Apache Tomcat/6.0.36

尝试使用 URL`/servlets/servlet/HelloWorld` 得到与上面相同的响应

必须做什么才能部署 Servlet？请告诉我如何修改WEB-INF 目录中的*web.xml*文件。我已经提到了很多甚至在 Stackoverflow 上发布的问题，但没有找到解决方案。

谢谢

# windows-phone-7 - 我的 Windows Phone 7 应用程序中是否需要有关于页面？

> ID：14552488
> 
> 赞同：2
> 
> 时间：2013-01-27T21:26:04.017
> 
> 标签：windows-phone-7

我想将我的第一个应用程序提交到 windows 市场，但是在尝试找出认证过程时，我是否需要关于页面（包含支持信息）感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:30:40.003

是的，您确实需要包含一些信息，这些信息可能最好放在关于页面上。参见[认证要求中的 5.6.1](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)

> 应用程序必须包含易于发现的应用程序名称、版本信息和技术支持联系信息。

如果您使用位置 API，您将需要在应用程序中拥有隐私政策或在应用程序中链接（[要求 2.7.2](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184841%28v=vs.105%29.aspx)，也与 2.7.4 相关）：

> 您的应用程序的隐私政策必须告知用户如何使用和披露来自位置服务 API 的位置数据，以及用户对位置数据的使用和共享的控制权。这可以托管在应用程序内或直接从应用程序链接。隐私政策必须可以随时从您的应用程序中访问。

如果您从应用程序上传图片、联系人等也是如此（参见[2.8](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184841%28v=vs.105%29.aspx)）。

当然，这些信息不需要专门的关于页面，但在他们写的时候，用户应该很容易找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:31:07.467

如果您不想在 about 页面上花费太多时间并且仍然希望它看起来很棒，请查看这个开源项目！ [http://ylad.codeplex.com/](http://ylad.codeplex.com/)

它是一个 nuget，很容易添加到您的 wp7 项目中！[http://nuget.org/packages/YLAD](http://nuget.org/packages/YLAD)

# ios - 关闭 Popover，在 popover 仍然可见时达到 [UIPopoverController dealloc]

> ID：14552490
> 
> 赞同：6
> 
> 时间：2013-01-27T21:26:11.893
> 
> 标签：ios, ipad, automatic-ref-counting, uipopovercontroller

我有一个 UIPopoverController 存储在我的视图控制器的一个强属性中。当用户在弹出框可见时旋转 iPad 时，我关闭弹出框并将我的属性设置为 nil。

```
if (self.popover != nil) {
    [self.popover dismissPopoverAnimated:NO];
    self.popover.delegate = nil;
    self.popover = nil;
} 
```

当代码达到 self.popover = nil 时，ARC 尝试解除 UIPopoverController 的分配，但它崩溃了，因为它应该仍然可见。

我应该如何在不崩溃的情况下解雇并消除弹出窗口？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T01:37:21.143

首先，建议检查是否正在显示弹出框，这也将方便地检查它是否已分配：

```
if ([self.popover isPopoverVisible]) {
    [self.popover dismissPopoverAnimated:NO];
} 
```

现在，问题是，如果像这样以编程方式关闭弹出框，则不会获得委托回调`- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController`，但是您需要对弹出框的强引用，直到它不再可见。

这样做的方法是延迟将属性设置为 nil，直到您返回主运行循环，因为当您返回主运行循环时，所有动画都将完成，因此弹出框将不再可见。

您需要将设置 popover 为 nil 的代码移动到另一个方法中：

```
- (void)releasePopover {
    self.popover.delegate = nil;
    self.popover = nil;
} 
```

然后，在您的旋转回调中，添加此方法以在主运行循环中触发，我喜欢通过向主运行循环添加调用操作来做到这一点：

```
if ([self.popover isPopoverVisible]){
    [self.popover dismissPopoverAnimated:NO];
    NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(releasePopover) object:nil];
    [[NSOperationQueue mainQueue] addOperation:invocationOperation];
} 
```

最后，为了清洁起见，您可能希望`-releasePopover`从回调内部`- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController`调用。

所以，把它们放在一起：

```
- (void)releasePopover
{
    self.popover.delegate = nil;
    self.popover = nil;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if ([self.popover isPopoverVisible]){
        [self.popover dismissPopoverAnimated:NO];
        NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(releasePopover) object:nil];
        [[NSOperationQueue mainQueue] addOperation:invocationOperation];
    }
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    [self releasePopover];
} 
```

说了这么多，除非有充分的理由，否则您可能只想保留弹出框以重复使用，并且仅在收到内存不足警告和/或视图已卸载时将其设置为 nil，正如 Chris Loonam 的回答所提到的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:31:39.350

如果您真的觉得有必要这样做，请尝试在 viewDidUnload 中将其清零。由于 ARC 自动释放对象，我不确定这样做是否真的有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:24:49.280

站在西蒙回答的肩膀上，这是我对崩溃的修复：

```
// set to nil on main queue to prevent "dealloc'd while still visible" exception
dispatch_async(dispatch_get_main_queue(), ^{
        self.popover = nil;
}); 
```

# trigger.io - forge.prefs.set() 不适用于 iPhone 模拟器

> ID：14552493
> 
> 赞同：0
> 
> 时间：2013-01-27T21:26:21.487
> 
> 标签：trigger.io

我正在使用 trigger.io 开发应用程序，并且正在尝试将一些数据保存到设备中

例如，这是我的代码

```
 forge.prefs.set('tokens', 'Some Data'); 
```

当得到它时

```
 var tokens=forge.prefs.get('tokens');
 forge.logging.log(tokens); 
```

我越来越

```
 [INFO] [FORGE] undefined 
```

首选项模块已启用，我尝试使用此代码先清除它

```
forge.prefs.clear('tokens'); 
```

我的 Iphone 模拟器是 6.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:35:05.017

调用`forge`函数通常是异步的，要获得一个偏好，你需要做类似的事情

```
 forge.prefs.get("tokens", function (tokens) {
     forge.logging.log(tokens);
 }); 
```

[http://docs.trigger.io/en/v1.4/features/api.html](http://docs.trigger.io/en/v1.4/features/api.html)有更多细节。

# c++ - 如何将 Windows 消息发送到 MessageBox

> ID：14552494
> 
> 赞同：0
> 
> 时间：2013-01-27T21:26:25.587
> 
> 标签：c++, winapi

我正在寻找一种像窗口一样操作 MessageBox 的方法，我是否必须实际使用`CreateWindowEx`并制作一个小窗口才能获得窗口的全部功能，包括使用诸如`WM_GETTEXT`和`WM_SETTEXT`或有什么方法可以发送将这些消息发送到 MessageBox？如果我绝对不能将 Windows 消息发送到 MessageBox，那么是否有比使用更简单的替代方法`CreateWindowEx`来完成我正在寻找的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:13:47.263

当您调用以获取其窗口句柄时，请使用线程本地`WH_CBT`挂钩。`MessageBox()`然后，您可以像任何其他窗口一样向它发送消息。

```
// if you need to customize MessageBox() across threads,
// store this variable in a TLS (thread-local storage) slot...
HHOOK hHook; 

LRESULT CALLBACK MyCBTHook(int nCode, WPARAM wParam, LPARAM lParam)
{
    switch (nCode)
    {
        case HCBT_CREATEWND: // window is being created
        case HCBT_ACTIVATE:  // window is being activated
        {
            HWND hWnd = (HWND) wParam;
            // use hWnd as needed...
            break;
        }
    }
    return CallNextHookEx(hHook);
}

int MyMessageBox(HWND hWnd, LPCTSTR lpText, LPCTSTR lpCaption, UINT uType)
{
    hHook = SetWindowsHookEx(WH_CBT, (HOOKPROC)&MyCBTHook, NULL, GetCurrentThreadId());
    int iResult = MyMessageBox(hWnd, lpText, lpCaption, uType);
    UnhookWindowsHookEx(hHook);
    return iResult;
} 
```

# jasper-reports - jasper-report : 在 String 中使用的标签以在 word 中创建未编号列表

> ID：14552495
> 
> 赞同：0
> 
> 时间：2013-01-27T21:26:42.230
> 
> 标签：jasper-reports, rtf, docx

在java中获取一个包含以下内容的常规字符串：

```
 String test = "hello I'm a list [ul][li]item1[li]item2[/ul]"; 
```

现在假设我想使用这个字符串在 html 文档中打印，我所要做的就是将 [] 替换为 <> 并且我正在做生意。但我也想在导出为 docx 格式的碧玉报告中使用这个字符串。如果我想让一个未编号的列表出现在 word 中，我应该使用哪种替换？这甚至可能吗？

我一直在考虑使用我在这里读到的 RTF 标签

[https://metacpan.org/pod/distribution/RTF-Writer/lib/RTF/Cookbook.pod#RTF-Document-Formatting-Commands](https://metacpan.org/pod/distribution/RTF-Writer/lib/RTF/Cookbook.pod#RTF-Document-Formatting-Commands)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:25:54.033

这种方法是错误的。您应该将数据与其呈现方式分开，并允许 Jasper 相应地呈现 HTML 或 RTF。

如果您将数据结构修改为如下所示，则以不同格式呈现会容易得多：

```
<data>
<heading>hello I'm a list</heading>
<items>
    <item>item1</item>
    <item>item2</item>
</items>
</data> 
```

# c# - 客户端关闭时，NetworkStream 在 Read() 上引发异常

> ID：14552496
> 
> 赞同：2
> 
> 时间：2013-01-27T21:26:45.367
> 
> 标签：c#, sockets, networkstream

我创建的应用程序有一些问题。一般情况（以下描述与问题不是1-1相关的）：我有一个WCF客户端-服务器应用程序，用于在多个站点收集数据。客户端检索本地数据（一些文件等），将其发送到数据中心的服务器，该服务器对其进行处理。客户端从本地主机获取其大部分数据，但其中一些是从 LAN 上的不同服务器检索的。这是我的问题开始的地方。我必须创建一个将数据发送到指定客户端的第三个应用程序。在这篇文章的提醒中，我将客户端和服务器称为同一 LAN 上的应用程序（而不是上面数据中心中的服务器）

我尝试使用命名管道，它在同一主机上进行了极好的进程间处理，但服务器到服务器的速度非常慢。（如果有人知道为什么会这样，请不要犹豫告诉我。一些测试高达 1000 毫秒，仅发送和接收几个字节）

所以我去使用 TcpClient 类。测试显示响应比 NP 等效项快得多，因此我决定使用此选项。

现在，当客户端和服务器都按照他们应该做的那样开始和结束时，一切都很好。当服务器启动，客户端已经连接，服务器正在等待它的 stream.Read() 方法，然后客户端应用程序退出时，问题就出现了：

`Unable to read data from the transport connection: De externe host heeft een verbinding verbroken.`（第二部分翻译：一个现有的连接被远程主机强行关闭。）

目前我用 Try-Catch 语句包装了整个部分，在 IoException 上重新启动了整个部分。这确实有效，但是当我阅读了几篇关于“异常应该是异常的东西！”的帖子时，感觉不太好。

所以最后的问题是：如何避免这种异常？（在现实生活中保持服务器和客户端应用程序之间连接的正常方法是什么？）

服务器 TcpListener serverSocket = new TcpListener(System.Net.IPAddress.Any, 8888); TcpClient clientSocket = 默认（TcpClient）；

```
 while (true)
        {
            serverSocket.Start();
            clientSocket = serverSocket.AcceptTcpClient();

            while ((true))
            {
                try
                {
                    NetworkStream networkStream = clientSocket.GetStream();
                    byte[] bytesFrom = new byte[10025];
                    networkStream.Read(bytesFrom, 0, (int)clientSocket.ReceiveBufferSize);//THIS THROWS THE EXCEPTION WHEN A CLIENT QUITS
                    string dataFromClient = System.Text.Encoding.ASCII.GetString(bytesFrom);
                    dataFromClient = dataFromClient.Substring(0, dataFromClient.IndexOf("$"));
                    Console.WriteLine(" >> Data from client - " + dataFromClient);
                    string serverResponse = "Server response " + DateTime.Now.ToString("HH:mm:ss,fff");
                    Byte[] sendBytes = Encoding.ASCII.GetBytes(serverResponse);

                    int len = sendBytes.Length;
                    networkStream.WriteByte((byte)(len / 256));
                    networkStream.WriteByte((byte)(len & 255));

                    networkStream.Write(sendBytes, 0, sendBytes.Length);
                    networkStream.Flush();
                }
                catch (System.IO.IOException ex)
                {
                    Console.WriteLine(ex.ToString());
                    break;
                }

            }
            clientSocket.Close();
            serverSocket.Stop();
        }
    } 
```

客户

```
System.Net.Sockets.TcpClient clientSocket = new System.Net.Sockets.TcpClient();

    private void button2_Click(object sender, EventArgs e)
    {
        NetworkStream serverStream = clientSocket.GetStream();
        byte[] outStream = System.Text.Encoding.ASCII.GetBytes("Message from Client$");
        serverStream.Write(outStream, 0, outStream.Length);
        serverStream.Flush();
        int len = serverStream.ReadByte() * 256;
        len += serverStream.ReadByte();

        byte[] inStream = new byte[len];
        serverStream.Read(inStream, 0, len);
        string returndata = System.Text.Encoding.ASCII.GetString(inStream);
        msg("Data from Server : " + returndata);
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        clientSocket.Connect("127.0.0.1", 8888);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:17:02.933

此错误有多种原因，但最常见的是您写入的连接已被另一端关闭。换句话说，一个应用程序协议错误：你在一个永远无法使用的情况下写了一些东西。

如果您编写了两端，另一种有点遥远的可能性是您将客户端编码为由于某种原因中止关闭。基本上你不应该那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:30:06.367

我对`Socket`API 的理解是，您应该`Shutdown(Write)`在完成发送后调用。然后，读取直到流返回 0。这意味着对方也调用`Shutdown`了 。

只有在您关闭写入（使用`Shutdown`）并接收到零长度读取之后，通信才真正在线上完成。现在`Dispose`它`Socket`现在已经不复存在了。

这样，只有在发生网络错误或错误时才会出现异常。在这种情况下，您可能应该丢弃当前的“事务”并重新启动它。

# c - libVLC 无法创建视频输出

> ID：14552500
> 
> 赞同：4
> 
> 时间：2013-01-27T21:27:20.997
> 
> 标签：c, libvlc

当我在 OS 10.8 上从[http://wiki.videolan.org/LibVLC_Tutorial](http://wiki.videolan.org/LibVLC_Tutorial)编译示例时

`gcc -I /Applications/VLC.app/Contents/MacOS/include/ -L /Applications/VLC.app/Contents/MacOS/lib/ -lvlc vlc.c`

一切正常，但是当我尝试执行它时，我收到以下错误消息：

```
[0x7ff389e094e0] main window error: corrupt module: /Applications/VLC.app/Contents/MacOS/plugins/libmacosx_plugin.dylib
[0x7ff38d002af0] main video output error: video output creation failed
[0x7ff38b0010f0] main decoder error: failed to create video output 
```

它无法创建视频输出，但设法创建音频输出。这是特定于 VLC 的 OSX 版本还是这种行为的原因是什么？

# jenkins - 不同构建步骤中的当前构建参数/ENV 变量

> ID：14552501
> 
> 赞同：1
> 
> 时间：2013-01-27T21:27:23.343
> 
> 标签：jenkins

是否可以在构建步骤中定义一个新的构建参数/ENV 变量，以便在下一个步骤中可用？

假设我有 2 个不同的“执行 shell”步骤，并希望在第二步中访问第一个中定义的变量。

**PS**：变量的值是在运行时设置的 - 从第 3 方资源中读取，所以我无法对其进行硬编码，因此需要从 shell 脚本中设置它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:45:19.323

插件[EnvInject](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)将为您做到这一点。它可以配置为`pre-SCM`步骤或`build`步骤。将它放在您现有的两个构建步骤之间。

**更新**

*在您的情况下，作为第二个*构建步骤的一部分，仅读取“第 3 方”文件的值可能更容易：

```
var=$(<3rdpartyfile.txt) 
```

在上述行之后，您的内容`3rdpartyfile.txt`将在环境变量中可用`var`。您现在可以`$var`像使用任何其他变量一样使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-23T09:27:41.830

你也可以使用类似的东西

```
stage('stage-1') {
    steps {
        script{
        env.variable = ${value};
        }
    }
} 
```

现在您可以在整个管道中使用变量 env.variable

# java - 在同一范围内两次调用具有数组输出的方法

> ID：14552502
> 
> 赞同：0
> 
> 时间：2013-01-27T21:27:23.700
> 
> 标签：java

假设您有一个输出不同大小数组的方法。

在使用它之前，您需要创建一个数组引用变量。在你这样做之前，你需要找到数组长度，例如

```
int[] intArray = new int[methodReturnsArray().length] 
```

然后您可以将 intArray 设置为由 methodReturnsArray() 生成的数组。

对此我感到有点不安，因为我们调用了两次 methodReturnsArray()：一次是为了找出数组有多大，一次是为了将它设置为等于引用变量。

两次调用该方法是浪费资源，还是只创建一次数组（当您找到它的大小时）？

编辑：我知道您可以将 intArray 初始化为数组返回的方法。但是由于一些复杂的原因（与在循环中调用“methodReturnsArray”有关，每次迭代使用不同大小的数组），我需要知道调用两次是否会浪费计算资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:31:22.643

这取决于您将如何填充新的数组变量。

但是常见的方法是引入新的局部变量来保存对原始数组的引用`methodReturnsArray`。IE：

```
int[] methodArray = methodReturnsArray();
int[] intArray = new int[methodArray.length];
... 
```

那么复制数组的最好方法就是`System.arrayCopy(...)`方法。这种方法在任何情况下都有效，它会阻止你在方法中做`methodReturnsArray`两次。

# mysql - mysql，选择合并开销

> ID：14552503
> 
> 赞同：1
> 
> 时间：2013-01-27T21:27:44.173
> 
> 标签：mysql

如果在每个 SELECT 列上使用 COALESCE，MySql 开销会是多少，因为我厌倦了在我的 VB 应用程序中出现 DBNUll 错误。我应该担心吗？

```
Select COALESCE(price_small_breed, 0), COALESCE(discount_small_breed, '') From tblServicePrice Where service_id = .... just some example found on net 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:45:55.783

不，您不应该担心开销。

我知道的唯一性能问题`coalesce()`是在某些版本的*SQL Server*（不是 MySQL！）中，当第一个参数不为 NULL 时，它会被计算两次。当它很昂贵时，例如子查询，这是一个问题。

但是，一般来说，与将数据移入和移出数据库的成本相比，内置函数的开销是最小的。

在更复杂的查询中有一个例外，其中使用诸如`coalesce()`可以阻止索引用于某些操作的函数。再一次，这不适用于您的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:29:35.797

也许最好的解决方案是更新架构，以便字段不允许空值。您可以关闭 null，并设置一个默认值（例如 0 或 ''）来解决问题。

# javascript - pagedown 编辑器全屏模式

> ID：14552506
> 
> 赞同：0
> 
> 时间：2013-01-27T21:27:55.963
> 
> 标签：javascript, jquery, editor, pagedown

我正在使用[pagedown 编辑器](http://pagedown.googlecode.com/hg/demo/browser/demo.html)。它是 stackoverflow 编辑器的克隆。

[这是该编辑器的官方项目页面](http://code.google.com/p/pagedown/)。

有人能告诉我如何实现全屏模式吗？

在全屏模式下，我想要`editor in the left 50% area`and `preview in the right 50% area`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:52:43.520

与其花时间欺骗系统，不如花时间向我们展示你做了什么..

我的解决方案和其他大多数人一样不会到处下载插件并尝试，会这样做..

```
 $(function(){
$('.link-to-fullscreen').click(function(){
    $('.wmd-panel').css({'width':'100%'});
})
    }) 
```

把它放在插件的代码下！并玩弄这些值，你应该得到你想要的结果..

# pharo - 类浏览器中图标的含义

> ID：14552509
> 
> 赞同：5
> 
> 时间：2013-01-27T21:27:58.807
> 
> 标签：pharo, squeak

有谁知道在哪里可以找到在各种浏览器中的类和方法旁边找到的各种“图标”和/或符号含义的描述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:46:07.787

一些类根据它们的类型定义图标。集合、流、变形、数字、异常、公告、测试等。查看类层次结构以了解图标。

对于方法，有两组图标。第一组与类层次结构有关：

*   *向上箭头：*该方法覆盖超类中的方法。
*   *向下箭头：*该方法被子类中的方法覆盖。
*   *上下箭头：*该方法覆盖超类中的方法，并被子类中的方法覆盖。

第二组仅用于测试类：

*   *绿点：*测试方法的最后一次运行是成功的。
*   *橙色圆点：*最后一次运行测试方法失败。
*   *红点：*最后一次运行测试方法出错。
*   *灰点：*最近未运行测试方法。

[Pharo by Example](http://gforge.inria.fr/frs/download.php/25599/PBE1-2009-10-28.pdf)在第 114 页更详细地描述了其中一些图标。此[网站](http://scg.unibe.ch/research/hermion/icons/)还包含一个稍微过时的图标列表。

如果您想了解不同图标的实现，请查看以下两种方法： 类图标定义在 中`#browserIcon`，方法图标定义在`#browerIcon:selector:`.

# ruby-on-rails - 访问子模型的最佳方式？

> ID：14552516
> 
> 赞同：0
> 
> 时间：2013-01-27T21:29:18.237
> 
> 标签：ruby-on-rails, rubygems

我正在使用 Ruby Gem 'Socialization'，在我的模型上做一些跟随/喜欢的事情。

场景：用户可以关注一个主题，通过该主题，用户可以检索到给定主题下的所有文章。所以，我真的不知道如何使用 gem 提供的方法来做到这一点。所以我尝试在用户模型中制作自己的方法。

```
class User < ActiveRecord::Base
  ..

  acts_as_follower
  acts_as_liker

  def get_subjects
    follows = self.follows

    f = []

    follows.each do |follow|
      f << follow.followable
    end

    return f
  end

  def get_articles
    subjects = self.get_subjects

    a = []

    subjects.each do |subject|
      if subject.articles.count > 0
        a << subject.articles
      end
    end

    return a
  end

..
end 
```

我在这里要做的是根据用户关注的主题找到用户感兴趣的文章。

这可能工作正常，但我相信它可以做得更好。有人可以在这里指导我吗？

谢谢，奥卢夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:42:26.917

也许这个简单的解决方案是合适的？

在主体模型中：

```
has_many :articles 
```

在用户模型中：

```
has_many :subjects
has_many :articles, through: :subjects 
```

之后，用户有一个方法`articles`：

```
@user.articles 
```

# geolocation - Windows Store App 离线时可以获取当前位置吗？

> ID：14552517
> 
> 赞同：1
> 
> 时间：2013-01-27T21:29:24.720
> 
> 标签：geolocation, gps, location, windows-store-apps, offline

我正在尝试确定如果 Windows 8 设备未通过 Wi-Fi 连接到互联网，是否可以获得该设备的当前位置。我的目标是 Windows 8 平板电脑，我不认为它们都支持 GPS。有谁知道解决这个问题的最佳方法是什么？或者有可能吗？有点迷失和轰炸似乎对我的情况没有帮助的解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:16:37.267

你不能。

如果没有互联网连接也没有 GPS，就根本无法确定您在地球上的位置！

我建议做的是：

1）每次执行时保存位置并使用以前的位置并通知用户。

2) 什么都不做，而是要求用户打开他们的 GPS。

但是，是的，即使它们没有互联网连接，我仍然会*尝试*找出位置，因为某些设备将板载并启用 GPS。

# ruby-on-rails - 复制的主/从服务器和数据库

> ID：14552519
> 
> 赞同：0
> 
> 时间：2013-01-27T21:29:35.393
> 
> 标签：ruby-on-rails, heroku, database-replication

我有一个小型 Rails 应用程序，我部署在 heroku 的免费层上，只有一个 API，没有用于创建书籍、返回书籍类型和从数据库中删除所有书籍的视图。它看起来有点像这样：

A`POST request to site.herokuapp.com/add_book?name=harrypotter&genre=fantasy`加了一本书。

A`GET request to site.herokuapp.com/find_book?name=harrypotter`返回流派。

一个`POST request to site.herokuapp.com/reset clears the database of all books`

现在我已经在一台服务器上工作了，我想在三台服务器上复制它，每台服务器都有一个唯一的 URL，这样我就可以将我的调用发送到 3 台服务器中的任何一台，并让它们的所有数据库都包含相同的 Book 条目。

例如，如果我发送一个

```
POST request to site1.herokuapp.com/add_book?name=harrypotter&genre=fantasy 
```

然后发送一个

`POST request to site2.herokuapp.com/add_book?name=littlewomen&genre=fiction`

我可以发一个

`GET request to site3.herokuapp.com/find_book?name=littlewomen`.

但是，如果我向服务器发送重置调用，它不会重置其他服务器。

我发现了两个名为[Octopus](https://github.com/tchandy/octopus)和[Data Fabric](https://github.com/bpot/data_fabric)的 gem，但看起来它们在同一台服务器上的数据库之间复制，而不是在不同的服务器上。另外，由于我要调用三个不同的站点，这些 gem 会起作用吗？

在 Rails 中进行这种类型的数据库/服务器复制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:29:57.847

Not sure if I quite understand your complete use case. Is it that you simply want to distribute reads/writes across the different databases for different API calls ?

If it is a small application why don't you have all 3 applications on site 1, site 2 and site 3 connect to the same database instance ?

Following options:

1.  Master Slave Replication

    In your case you would have 1 master db and 2 slave db. Data will be read and written to the master db but will be replicated to the slaves. You can then configure your rails application to do reads across selected databases.

    You can use [Octopus](https://github.com/tchandy/octopus) to distribute writes/reads between slaves and master.

    > When using replication, all writes queries will be sent to master, and read queries to slaves.

2.  MySQL Cluster

    I have not used MySQL cluster yet but should be using it soon. If your requirement is to distribute reads/writes across all the databases while having the data remain consistent across all nodes MySQL cluster looks like a good candidate. The data is distributed across a pool of data nodes. Every MySql server has access to all the data nodes and as result when a server within the cluster changes data example by inserting rows, this new data is immediately accessible and seen by the other MySql servers in the cluster.

    See more here [MySql Cluster](http://dev.mysql.com/doc/refman/5.0/en/mysql-cluster-overview.html)

# c# - 如何在 WPF 中创建带有条件悬停图像的条件图像按钮

> ID：14552523
> 
> 赞同：0
> 
> 时间：2013-01-27T21:29:49.867
> 
> 标签：c#, wpf, styles, imagebutton

我正在尝试创建一个图像按钮，该按钮根据条件呈现不同的图像。此外，我需要另一个条件，将鼠标悬停在另一个图像上。

该示例适用于数据网格行（单元格）内的按钮，该按钮在错误条件下显示灰色十字，在鼠标悬停时显示红色十字。如果初始条件为真，则显示灰色勾号，鼠标悬停时显示绿色勾号。初始条件来自行的绑定元素。

到目前为止，我没有任何工作！在下面的示例中忽略图像的路径位置。

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <Button Style="{StaticResource ExcludeIncludeButtonStyle}" />
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate>

<Style x:Key="ExcludeIncludeButtonStyle" TargetType="Button">
    <Setter Property="OverridesDefaultStyle" Value="True"/>
    <Setter Property="Margin" Value="5"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="border" BorderThickness="0" Background="Transparent">
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Width="15" Height="15" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter Property="Background">
                            <Setter.Value>
                                <ImageBrush ImageSource="exclude.png" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background">
                            <Setter.Value>
                                <ImageBrush ImageSource="exclude_hover.png" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:35:41.060

在您`Border`添加所需的模板绑定中，并且您的绑定有多个条件，您必须使用`MultiDataTrigger`s：

```
<ControlTemplate TargetType="Button">
    <Border Name="border" BorderThickness="0" Background="{TemplateBinding Background}">
        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Width="15" Height="15" />
    </Border>
    <ControlTemplate.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{TemplateBinding IsMouseOver}" Value="false"/>
                <Condition Binding="{Binding InitialCondition}" Value="false"/>
            </MultiDataTrigger.Conditions>

            <Setter Property="Background">
                <Setter.Value>
                    <ImageBrush ImageSource="GreyCross.png" />
                </Setter.Value>
            </Setter>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{TemplateBinding IsMouseOver}" Value="true"/>
                <Condition Binding="{Binding InitialCondition}" Value="false"/>
            </MultiDataTrigger.Conditions>

            <Setter Property="Background">
                <Setter.Value>
                    <ImageBrush ImageSource="RedCross.png" />
                </Setter.Value>
            </Setter>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{TemplateBinding IsMouseOver}" Value="false"/>
                <Condition Binding="{Binding InitialCondition}" Value="true"/>
            </MultiDataTrigger.Conditions>

            <Setter Property="Background">
                <Setter.Value>
                    <ImageBrush ImageSource="GreyTick.png" />
                </Setter.Value>
            </Setter>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{TemplateBinding IsMouseOver}" Value="true"/>
                <Condition Binding="{Binding InitialCondition}" Value="true"/>
            </MultiDataTrigger.Conditions>

            <Setter Property="Background">
                <Setter.Value>
                    <ImageBrush ImageSource="GreenTick.png" />
                </Setter.Value>
            </Setter>
        </MultiDataTrigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# forms - 将数据发布到 URL 动作脚本

> ID：14552527
> 
> 赞同：0
> 
> 时间：2013-01-27T21:30:11.863
> 
> 标签：forms, flash, post, actionscript, adobe

我在这里遇到了真正的麻烦。我是 Flash 的新手，我创建了一个表单，然后我需要将数据发布到 URL。我不知道如何做到这一点，我在网上找到的只是包含 PHP 的信息。

任何帮助表示赞赏，并提前感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:29:36.440

您使用的是哪个 actionscript 版本？

对于 actionscript2，您需要使用 LoadVars（此处为 sendAndLoad 示例[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001161.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001161.html)）

对于 actionscript3，您需要使用 URLRequest 和 URLLoader（例如[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#includeExamplesSummary)）

actionscript3 参考文档写得非常糟糕而且不可读，所以你可能想看看这篇文章[http://labs.grupow.com/blog/2008/11/06/sending-variables-in-as3-aka-sendandload-在-as2](http://labs.grupow.com/blog/2008/11/06/sending-variables-in-as3-aka-sendandload-in-as2)

# r - 如何将值引入 R 中随机位置的向量？

> ID：14552528
> 
> 赞同：-4
> 
> 时间：2013-01-27T21:30:21.873
> 
> 标签：r, random, vector

我刚开始学习 R，我的任务是创建*一个包含 10000 个*值的向量，其*正态分布*,`mean = 0`和`sd = 100`. 我做到了。

```
x <- rnorm(10000, mean = 0, sd = 100) 
```

但现在我被要求`values between 500 and 700`在该向量中引入 1000 个随机位置。

谁能帮我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T21:46:23.197

如果您打算将`x`向量 中的 1000 个元素替换*为 500 到 700 之间的值*，则首先需要生成这 1000 个元素：

```
r <- runif(1000, min=500, max=700) 
```

我在这里假设随机值*统一*在 500 到 700 之间。

然后您需要选择将这些值放入的位置：

```
idx <- sample(10000, 1000) 
```

最后，替换这些地方的值：

```
x[ idx ] <- r 
```

最后，查看您的操作的结果：

```
hist(x) 
```

它应该看起来像：![x的直方图](../Images/d8850aeb7adea8ddf476f668658459e3.png)

# css - 动态 Sass 变量

> ID：14552529
> 
> 赞同：17
> 
> 时间：2013-01-27T21:30:22.357
> 
> 标签：css, sass

有什么方法可以根据 html 元素上的类来设置颜色变量吗？或者任何其他方式来实现同样的目标？

```
html {

  &.sunrise {
    $accent: #37CCBD;
    $base: #3E4653;
    $flat: #eceef1;
  }

  &.moonlight {
    $accent: #18c;
    $base: #2a2a2a;
    $flat: #f0f0f0;
  }

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T23:35:18.990

这是基本的主题。您可能想要使用 mixin 或 include 在单个 CSS 文件中执行多个主题。这就是你将如何使用包括：

_theme.scss

```
section.accent {
    background: $accent;
}

.foo {
    border: $base;
}

.bar {
    color: $flat;
} 
```

主文件

```
html {
  &.sunrise {
    $accent: #37CCBD;
    $base: #3E4653;
    $flat: #eceef1;

    @import "theme";
  }

  &.moonlight {
    $accent: #18c;
    $base: #2a2a2a;
    $flat: #f0f0f0;

    @import "theme";
 }
} 
```

您可以轻松地制作一个使用 3 种颜色作为参数的 mixin，以代替 include：

```
@mixin theme($accent, $base, $flat) {
    // .. do stuff ..
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T21:55:57.340

不幸的是，*Sass/Scss*文件需要编译成*Css*文件，才能在您的网络浏览器中得到支持。

由于*Css*文件不支持变量，因此只能在*Scss*模板中设置变量值，因为*Sass*编译器会替换 var。（在每个位置，都使用了 var。），具有给定的值。

这意味着，根据*Html*文件中包含的类，更改变量的颜色无济于事，因为*Css*文件不包含任何变量。

你可以做这样的事情的唯一方法是：

1.  阅读*Html*文件以找出已使用的类，
2.  而不是将*Scss*模板变量更改为正确的颜色值
3.  并将*Scss*模板编译成*Css*文件

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-27T22:56:56.460

如果你喜欢使用 JavaScript，你可以这样做：

您将需要一个带有 Id 和 Class 的 HTML 元素（决定使用什么颜色的元素）。

```
<exampleTagg id="Target" class="Sunrise">...</exampleTagg> 
```

接下来，您需要添加一些 JavaSript

```
var CurrentColor = document.getElementById("Target").className; 

if (CurrentColor == "sunrise") {
  document.exampleTagg.style.exampleProperty = "#37CCBD";
}
else if (CurrentColor == "moonlight") {
  document.exampleTagg.style.exampleProperty = "#18c";
} 
```

（第一行将声明一个变量，其中包含我们的 exampleTagg 元素的值（具有“目标”id 的那个），然后 if 语句将找出我们的类的名称（日出或月光），最后，我们将将 exampleTagg 的背景更改为我们喜欢的颜色）

要将此示例用于您自己的目的，请将 exampleTagg 替换为一些真实的标记并将 exampleProperty 更改为有效的 Css 属性。

请注意，您不需要 Scss 来完成这项工作（您仍然可以使用它），因为 JavaScript 将访问您编译的 Css 文件。

# php - 查询错误重复列id sql

> ID：14552533
> 
> 赞同：1
> 
> 时间：2013-01-27T21:30:47.013
> 
> 标签：php, mysql, sql

为什么此查询返回重复 ID 错误？我正在使用 php

```
SELECT DISTINCT * FROM products  as prd
    LEFT OUTER JOIN  (SELECT DISTINCT * FROM product_aliases) AS product_aliases
    ON product_aliases.product_id = prd.id 
    AND product_aliases.alias = '$alias'

    LEFT OUTER JOIN  (SELECT DISTINCT * FROM product_images as prdim
        LEFT OUTER JOIN  product_image_votes as prdimvt 
            ON prdimvt.product_image_id = prdim.id) AS productimages 
    ON productimages.product_id = prd.id 
WHERE prd.id = $id 
```

错误：

> 数据库错误错误：SQLSTATE [42S21]：列已存在：1060 列名“id”重复 SQL 查询：SELECT DISTINCT * FROM products as prd LEFT OUTER JOIN (SELECT DISTINCT * FROM product_aliases) A​​S product_aliases ON product_aliases.product_id = prd.id AND product_aliases.alias = 'Pringles The Original' LEFT OUTER JOIN (SELECT DISTINCT * FROM product_images as prdim LEFT OUTER JOIN product_image_votes as prdimvt ON prdimvt.product_image_id = prdim.id) AS productimages ON productimages.product_id = prd.id WHERE prd.id = 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:37:55.963

您的查询中有 3 个表，其中至少有 2 个可能具有相同的列`id`。在您的选择中使用`*`将选择这三个表中的所有列选择`id`多次

您可以通过使用别名指定列来解决此问题

```
SELECT DISTINCT prd.id, prd.Name FROM products  as prd
LEFT OUTER JOIN  (SELECT DISTINCT * FROM product_aliases) AS product_aliases
ON product_aliases.product_id = prd.id 
AND product_aliases.alias = '$alias'
... rest of your query here 
```

你也可以做

```
SELECT DISTINCT prd.* FROM products  as prd 
```

如果您不想一一列出

# ios - 计时一个函数需要多长时间

> ID：14552538
> 
> 赞同：0
> 
> 时间：2013-01-27T21:31:26.933
> 
> 标签：ios, objective-c

*我在这里看到了关于其他语言的计时函数持续时间的 Q/A，但在 Objective-C 中没有找到任何内容。如果有，请发布链接，我将删除此问题*

我想测量某些功能运行所需的时间。我已经将下面的代码拼凑在一起，但我想知道是否有更紧凑或更便携的方式来做到这一点。

```
 CFTimeInterval startTime = CFAbsoluteTimeGetCurrent();

 // do some work

 CFTimeInterval difference = CFAbsoluteTimeGetCurrent() - startTime;

 printf("elapsed:  %f\n", difference) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:35:35.300

不，这是使用 CFAbsoluteTimeGetCurrent() 的最佳方式；其绝对时间以相对于绝对参考日期 2001 年 1 月 1 日 00:00:00 GMT 的秒数为单位测量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T21:45:33.363

如果您想精确地计时非常短的时间跨度，我想到了另外两个开销非常低的计时设施：

*   [`mach_absolute_time`](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)纳秒级分辨率
*   [`__builtin_readcyclecounter`](http://clang.llvm.org/docs/LanguageExtensions.html#builtin-functions)：一个 clang 内置函数，用于读取低延迟、高精度的时钟。

# javascript - 如何在 Google Maps API 中使用 id 或参考标识一个地方？

> ID：14552539
> 
> 赞同：3
> 
> 时间：2013-01-27T21:31:30.380
> 
> 标签：javascript, google-maps

使用 Places Autocomplete，我可以获得具有不同名称的同一个地方（主要是更改 Bound）。我将这个地方保存在我的数据库中。我需要确定地点，无论名称是否已被介绍。两个值是候选值：`id`和`reference`。但是，根据文档，这两个值都可以改变！

[https://developers.google.com/maps/documentation/javascript/places?hl=en#place_details_responses](https://developers.google.com/maps/documentation/javascript/places?hl=en#place_details_responses)

我如何识别一个地方？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-31T03:16:10.607

是的，两者都可以改变，但 refId 也会指向同一个地方。出于某种原因，您可以在一个地方拥有许多 refId。只对id感到厌烦。

reference 包含一个标记，可用于将来查询详细信息服务。此令牌可能与详细信息服务请求中使用的引用不同。建议定期更新 Places 的存储参考。尽管此令牌唯一标识了 Place，但反之则不正确：一个 Place 可能有许多有效的参考令牌

# django - 将多个实例提交到数据库的表单的 Django 示例？

> ID：14552545
> 
> 赞同：5
> 
> 时间：2013-01-27T21:32:00.220
> 
> 标签：django, django-models, django-forms

我需要一个提交多个单独请求的 django 表单，如果没有大量定制，我找不到如何做到这一点的示例。即，假设有一个汽车维修店使用的表格。该表格将列出商店能够进行的所有可能的维修，并且用户将选择他们想要进行的维修（即，使用 checkboes。）

每次维修都可以分配给不同的机械师。每次维修也可以取消或宣布完成，独立于其他维修。这似乎要求每次修复都成为数据库中的一个单独实例。

此外，每个维修工作只能由特定的机械师执行。所以我需要能够将每个维修工作与它自己独特的机制列表相关联，以供选择。

有没有人看过一个 django 表单的例子，它做这样的事情？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:34:20.887

这就是[表单集](https://docs.djangoproject.com/en/1.4/topics/forms/formsets/)（和[模型表单集](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#model-formsets)）的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T18:49:27.690

自从提出问题以来已经有一段时间了，我遇到了同样的问题：

我通过instance = form.save(commit=False)解决它，然后设置不同的属性，然后instance.save(force_insert=True)，然后删除form.instance.id....

然而，这意味着最终在 save 方法中被覆盖的所有字段都保留在第一次调用 save() 之后......这让我很难受！

你最后是怎么做到的？

# php - sphinx - 哪个 id 到哪个索引？

> ID：14552562
> 
> 赞同：0
> 
> 时间：2013-01-27T21:33:45.177
> 
> 标签：php, sphinx

我正在使用 sphinx 来搜索我们的数据库。在这个例子中，我查询了两个索引；索引 1 和索引 2。

```
$res = $cl->Query( $query, "index1 index2" ); 
```

结果很好，但我无法从代码中区分来自 index1 和 index2 的结果 ID。有没有一种方法可以使来自 index1 的所有 ID 看起来像：in1_1、in1_600、in1_x ......所以我可以区分它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:24:23.663

只需设置一个属性来标识它来自哪个索引，请参阅

[http://sphinxsearch.com/forum/view.html?id=5653](http://sphinxsearch.com/forum/view.html?id=5653)

# java - 简单的 Java 优先队列 错误

> ID：14552569
> 
> 赞同：7
> 
> 时间：2013-01-27T21:34:43.790
> 
> 标签：java, priority-queue

我所做的只是将三个字符串添加到 Java PriorityQueue 中，然后将它们打印出来这是我的代码：

```
import java.util.*;
import java.lang.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
        PriorityQueue<String> pq=new PriorityQueue<String>();
        pq.add("abc");
        pq.add("ability");
        pq.add("aberdeen");

        String s="ability";
        System.out.println(s.compareTo("aberdeen"));

        System.out.println(pq);
    }
} 
```

这是输出：

```
4
[abc, ability, aberdeen] 
```

这不应该是`abc, aberdeen, ability`相反的吗。因为这是正确的字母顺序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T21:37:00.343

从以下文档[`PriorityQueue.iterator()`](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#iterator%28%29)：

> 返回此队列中元素的迭代器。迭代器不会以任何特定顺序返回元素。

这就是`toString()`用来构造字符串表示的方法，因为实现[继承自`AbstractCollection`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractCollection.html#toString%28%29)：

> 返回此集合的字符串表示形式。字符串表示由集合元素的列表组成，按其迭代器返回的顺序排列，用方括号 ("[]") 括起来。[...]

尝试将结果出列，您将获得预期的顺序：

```
while (pq.size() > 0) {
    System.out.println(pq.poll());
} 
```

输出：

```
abc
aberdeen
ability 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T21:39:43.230

队列正常工作。运行此代码：

```
PriorityQueue<String> pq=new PriorityQueue<String>();
pq.add("abc");
pq.add("ability");
pq.add("aberdeen");
System.out.println(pq);
for (String s; (s = pq.poll()) != null;) System.out.println(s); 
```

它会打印

```
[abc, ability, aberdeen]
abc
aberdeen
ability 
```

原因在于优先级语义仅适用于出队操作，而在其他方面，队列仅受普通合约的约束`java.util.Collection`：它的迭代器不需要遵守任何特定的顺序，特别是`PriorityQueue`的迭代器碰巧观察到插入顺序。

# cuda - 在 Visual Studio 2010 下的 CUDA 中禁用 Fused Multiply-Add

> ID：14552576
> 
> 赞同：4
> 
> 时间：2013-01-27T21:35:18.673
> 
> 标签：cuda

我想编译一个禁用融合乘加 (FMA) 操作的 CUDA 代码。然后我正在使用

```
Project -> Properties -> CUDA C/C++ -> Host -> Additional Compiler Options 
```

和打字

```
-fdma=false 
```

在附加编译器选项行中。这对禁用 FMA 有效吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T22:39:00.140

请参阅[指导 CUDA 编译的选项](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#options-for-steering-cuda-compilation)。您的参数中有错字，否则您是正确的。

> -fmad ：启用（禁用）浮点乘法的收缩和加法/减法到浮点乘法加法运算（FMAD、FFMA 或 DFMA）。默认值为 -fmad=true。

# ios - 基于当前视图控制器的条件segue

> ID：14552579
> 
> 赞同：1
> 
> 时间：2013-01-27T21:35:36.027
> 
> 标签：ios, uibutton, uistoryboard, segue, uistoryboardsegue

所有，我正在尝试根据当前显示的视图控制器的身份执行 segues。本质上，我已经给出了我的 VC 的故事板 ID，现在想在代码中访问它们。所以，基本上我想要一些逻辑，如果现有的视图控制器是第一个，我想执行 firstSegue，如果它是第二个，我想执行 secondSegue 等等。此外，我的 VC 是导航控制器的一部分，我知道导航控制器有一个属性，我可以在其中查看当前视图控制器或类似的东西。但我不确定那是什么。有人可以帮帮我吗？同样，我预见我的代码类似于：

```
(IBAction)firstButtonPressed:(id)sender
 { if (presentviewcontroller ==a) // If the current view controller Is A
 {
  [self performSegueWithIdentifier:@"segueA" sender:self];}
 if(storyboard.viewcontroller==b)//If the current view controller is B
{
  [self.performSegueWithIdentifier:@"segueB" sender:self];}

  } 
```

有人可以帮我写一些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:50:18.727

我不确定我是否理解您的设置，但如果这是我认为的那样，那么您不需要知道按钮是从哪个控制器按下的。即使 2 个控制器继承自一个共同的祖先，它们仍然是独立的实例，并且只有连接到该实例的 segue 才会被调用。因此，您的每个控制器都可以有一个具有相同标识符的 segue，比如说 button1Segue。那么 AncestorController 中的代码可能就是：

```
-(IBAction)firstButtonPressed:(UIButton *)sender{
    [self performSegueWithIdentifier:@"button1Segue" sender:self];
} 
```

将执行正确的转场，因为无论按下哪个实例的按钮，只有该实例的转场才会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:53:29.197

如果您要在界面构建器中为每个视图设置不同的标签，您可以使用以下内容

```
if (self.view.tag == 1) {
    NSLog(@"something");
} 
```

我在我的应用程序中成功地使用了这种方法来获取不同的视图，并且效果很好。

# matlab - 如何在matlab中保存libsvm模型

> ID：14552582
> 
> 赞同：2
> 
> 时间：2013-01-27T21:35:51.047
> 
> 标签：matlab, libsvm

我在 matlab 中使用 libsvm，似乎没有现有的方法来保存由 svmtrain 形成的模型。相反，提供的功能迫使我每次都重新训练。仅将 svmtrain 模型变量保存在 .mat 中是行不通的。我应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:06:01.860

与 NN 不同，SVM 的好处在于训练速度很快，在某些情况下甚至可以在线完成。我有一个多类 SVM，我将训练向量、类和内核参数保存到一个 txt 文件中。

# javascript - 如何将表单输入传递给 javascript iframe URL？

> ID：14552583
> 
> 赞同：1
> 
> 时间：2013-01-27T21:36:01.530
> 
> 标签：javascript, jquery, iframe, webforms, argument-passing

> **可能重复：**
> [您如何发布到 iframe？](https://stackoverflow.com/questions/168455/how-do-you-post-to-an-iframe)

我有一个表单，我想做两件事 - 使用一个按钮（有效）提交标准表单请求，并有第二个按钮（也可以部分有效）在页面内打开一个 iframe，其值为来自附加到 iframe URL 的表单。

这是我正在使用的脚本：

```
<script language="JavaScript" type="text/javascript"> 
function makeFrame() { 
ifrm = document.createElement("IFRAME"); 
ifrm.setAttribute("src", "https://www.hostname.com/filepath"); 
ifrm.style.width = 340+"px"; 
ifrm.style.height = 630+"px"; 
document.body.appendChild(ifrm); 
} 
</script> 
```

和形式：

```
<FORM action="https://www.hostname.com/filepath" method="POST" name="form" id="viewGift">
  <P><br>
    <LABEL for="giftId">giftId: </LABEL><INPUT type="text" name="giftId"><BR>
    <INPUT type="radio" name="opt1" value="1" checked> opt1<BR>
    <INPUT type="radio" name="opt2" value="2"> opt2<BR>
    <INPUT type="radio" name="opt3" value="3"> opt3<BR>
    <INPUT type="radio" name="opt4" value="4"> opt4<BR>
    <INPUT type="button" value="Send Gift" onclick="formSubmit()">
    <INPUT type="button" value="Show Gift" onclick="makeFrame()">
 </P>
 </FORM> 
```

我的表单正确提交，但我不知道如何使用 Show Gift 按钮将表单 giftId 值传递给 iframe URL。如果我对 URL 进行硬编码，“显示礼物”按钮就可以正常工作，但这对页面的用途没有多大帮助。

基本上，我需要 Show Gift 按钮来创建一个 URL 为[https://www.hostname.com/filepath/giftId](https://www.hostname.com/filepath/giftId)的 iframe ，其中 giftId 由用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:00:59.857

这应该有效：

```
function makeFrame() {
    var ifrm = document.createElement("IFRAME");
    var gift_id=document.getElementById('viewGift').elements['giftId'].value
    ifrm.setAttribute("src", "https://www.hostname.com/filepath/"+gift_id);
    ifrm.style.width = 340 + "px";
    ifrm.style.height = 630 + "px";
    document.body.appendChild(ifrm);
} 
```

# vb.net - 关闭多个同名程序

> ID：14552584
> 
> 赞同：2
> 
> 时间：2013-01-27T21:36:07.813
> 
> 标签：vb.net, winforms, process

我的程序的一部分是关闭另一个程序或具有相同名称的相同程序...我查找了如何执行此操作并得到以下代码：

```
Dim myprocesses() As Process
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
  For Each p As Process In myprocesses
    If p.MainWindowTitle.Contains("notepad") Then
      p.CloseMainWindow()
    End If
  Next
End Sub 
```

它应该可以工作，但是当我运行它时，我在`Next`声明中收到一条错误消息：

> {“你调用的对象是空的。”}

有谁知道上面的代码有什么问题？

更新：其中一些答案似乎有效:) 谢谢。但是有一个小问题，因为有时程序直到大约 30 秒才加载（为了简单起见，记事本只是放在那里）所以我需要代码来关闭 PROCESS 而不是加载时的实际程序。

希望你能理解xD ^^^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:47:56.690

显然你声明了`myprocesses()`but `null`，所以要完成你的任务，你必须使用[`GetProcessesByName`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocessesbyname.aspx)

```
For Each process1 As Object In Process.GetProcessesByName("Notepad")
    process1.Kill()
Next 
```

但这是管理[流程的](https://stackoverflow.com/a/9955853/1080742)**正确**方法。`.exe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:55:48.133

在您的按钮单击事件中尝试以下代码：

```
Dim myProc As System.Diagnostics.Process
For Each myProc In System.Diagnostics.Process.GetProcesses
  Console.WriteLine(myProc.MainWindowTitle)
  If myProc.MainWindowTitle.ToUpper.Contains("NOTEPAD") Then
    myProc.CloseMainWindow()
  End If
Next 
```

# c# - 将变量从控制台传递到 vbs 到 Excel 宏

> ID：14552586
> 
> 赞同：2
> 
> 时间：2013-01-27T21:36:11.153
> 
> 标签：c#, vba, vbscript

我正在尝试将变量传递给以下代码集：

从编写的控制台应用程序`C#`：

```
static void Main(string[] args) {

    string myPath = @"R:\xxx\xxx\xxx\test.vbs";
    Process p = new Process();
    ProcessStartInfo ps = new ProcessStartInfo(myPath,"hello");
    p.StartInfo = ps;
    p.Start();

    Console.WriteLine("press [enter] to exit");
    Console.ReadLine();

} 
```

进入以下`test.vbs`文件：

```
strFolder = Wscript.Arguments.Item(0)
Set XL=CreateObject("Excel.Application") 
XL.Visible=True 
XL.Workbooks.Open "\\xxx\xxx\xxx\PassInVariable.xlsm",,True
XL.Run "'PassInVariable.xlsm'!xxx", strFolder   '<<<<<<<<<<<<<<PROBLEM SEEMS TO BE HERE
XL.Workbooks("PassInVariable.xlsm").close false
XL.quit
Set XL=nothing 
```

然后在`PassInVariable.xlsm`文件中我有以下内容：

```
Option Explicit
Sub xxx(x As String)

MsgBox x

End Sub 
```

似乎文件中的变量`strFolder`是`VBScript`问题所在，因为如果我将其替换为诸如“hello”之类的文字，则该变量将移动到 excel VBA 中。

如何修复 vbs 文件以使变量向下传递？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:51:02.947

VBScript 中的所有变量都是`Variant`s。您不能将按引用传递给需要`Variant`按引用字符串的方法。但是，您可以按值传递它，因为这样解释器将为您进行转换。

修复你`Sub xxx`的`Sub xxx(ByVal x As String)`.

# javascript - Ember-Data clearRelationships 中的无限循环？

> ID：14552589
> 
> 赞同：1
> 
> 时间：2013-01-27T21:36:24.607
> 
> 标签：javascript, ember.js, ember-data

**查询：**
谁能告诉我为什么我在尝试删除 Ember 数据模型时可能会出现无限循环。经历崩溃后，问题似乎出在 clearRelationships 中，但无论我尝试建立模型关系的程度如何，我似乎都无法摆脱无限循环，而不是一起避免它们。

* * *

**相关代码：**

```
//// Config
App = Ember.Application.create();
App.Adapter = DS.RESTAdapter.extend();
App.store = DS.Store.create({
  revision: 11,
  adapter: App.Adapter.create()
});
App.Router = Ember.Router.extend({});
App.Router.map(function() {
  this.resource('main', { path: '/' });
});

//// Models
App.Scientist = DS.Model.extend({
  name:     DS.attr('string'),
  tests:    DS.hasMany('App.Tests'),
  criteria: DS.belongsTo('App.Criteria')
});
App.Test = DS.Model.extend({
  name:      DS.attr('string'),
  scientist: DS.belongsTo('App.Scientist'),
  criteria:  DS.belongsTo('App.Criteria')
});
App.Criteria = DS.Model.extend({
  name:      DS.attr('string'),
  scientist: DS.belongsTo('App.Scientist'),
  test:      DS.belongsTo('App.Test'),
  resources: DS.hasMany('App.Resource')
});
App.Resource = DS.Model.extend({
  name:     DS.attr('string'),
  criteria: DS.belongsTo('App.Criteria')
});

//// Pre-Load Models
App.store.loadMany(App.Test,
  [{id:'1', scientist_id:'1', name:'gravity', criteria_id:'2'},
   {id:'2', scientist_id:'1', name:'not gravity', criteria_id:'3'}]);
App.store.load(App.Scientist, 
  {id:'1', name:'Bill', tests:['1', '2'], criteria_id:'1'});
App.store.load(App.Criteria, 
  {id:'1', name:'control', scientist_id:'1', test_id:null, resources:['1']});
App.store.loadMany(App.Criteria,
  [{id:'2', name:'variation1', scientist_id:null, test_id:'1', resources:['2','3']},
   {id:'3', name:'variation2', scientist_id:null, test_id:'2', resources:['4','5']}]);
App.store.loadMany(App.Resource, 
  [{id:'1', name:'resource1', criteria_id:'1'},
   {id:'2', name:'resource2', criteria_id:'2'},
   {id:'3', name:'resource3', criteria_id:'2'},
   {id:'4', name:'resource4', criteria_id:'3'},
   {id:'5', name:'resource5', criteria_id:'3'}]);

var filter = App.Test.filter(
  function(model) { if (model.get('isLoaded') === true) { return model; } }
);

App.MainRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    controller.set('tests', filter);
  }
});

///// Controller
App.MainController = Ember.ArrayController.extend({
  name: 'Main',
  createTest: function() {
    App.Test.createRecord();
    App.store.commit();
  },
  removeTest: function(test) {
    test.deleteRecord();
    App.store.commit();
  }
}); 
```

* * *

**重现步骤：http:**
[//jsfiddle.net/hilem/GMt7H/](http://jsfiddle.net/hilem/GMt7H/)

1) 打开浏览器控制台。
2）运行小提琴。
3) 在列表项之一上点击删除时观看控制台。

* * *

**更新 1（2013 年 1 月 27 日晚上 8 点 44 分）**
附加上下文：这是使用 ember-1.0.0-pre.4.js && 截至 2013 年 1 月 27 日在 master 上最新提交的 ember-data。我还在上面的示例代码中添加了更多内容。

* * *

**更新 2（2013 年 2 月 1 日下午 5 点 25 分）**
凹凸！问题仍然存在，最近在 github 问题跟踪器上似乎有很多涉及 deleteRecord 的问题，听起来与我的问题相似。这是我在跟踪器上的具体问题的链接：
[https ://github.com/emberjs/data/issues/671](https://github.com/emberjs/data/issues/671)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:04:35.630

这是一个错误。Github 上的这个拉取请求为我修复了它。[https://github.com/emberjs/data/pull/715](https://github.com/emberjs/data/pull/715)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:33:35.910

我遇到了类似的问题。我有这样的模型

```
App.User = DS.Model.extend({
  account: DS.belongsTo('App.Account'),
  name: DS.attr('string')

});

App.Account = DS.Model.extend({
  user: DS.belongsTo('App.User'),
  type: DS.attr('string')
}); 
```

递归实际上并没有在 clearRelationships 中发生，而是在 ember.js set 方法的这一部分

```
var meta = obj[META_KEY], desc = meta && meta.descs[keyName],
      isUnknown, currentValue;
  if (desc) {
    desc.set(obj, keyName, value);
  } else {
   ....
  } 
```

当我删除用户时，它试图清除`set(this, "account", null)`最终到达上面的调用部分的关系，这些调用一次又一次地设置。

我不确定解决此问题的正确方法，但我通过删除帐户上的用户 belongsTo 关系让它在我的情况下工作。所以我的新模型看起来像这样

```
App.User = DS.Model.extend({
  account: DS.belongsTo('App.Account'),
  name: DS.attr('string')

});

App.Account = DS.Model.extend({
  // user: DS.belongsTo('App.User'),
  type: DS.attr('string')
}); 
```

# knockout.js - 没有必需值的淘汰 BindingHandlers

> ID：14552592
> 
> 赞同：7
> 
> 时间：2013-01-27T21:36:55.040
> 
> 标签：knockout.js

是否可以创建一个没有必需值的 Knockout bindingHandler？

```
ko.bindingHandlers['superAction'] = {
    init: function(...) { },
    update: function(...) { }
}; 
```

例如，语法可能是：

```
<span data-bind="superAction"></span> 
```

有一个可选值，所以偶尔可能是：

```
<span data-bind="superAction: myProperty"></span> 
```

我只尝试了一个冒号，没有冒号，......它们都会导致运行时解析异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T14:35:59.153

这可以从淘汰赛 3.0 开始。请参阅[https://github.com/knockout/knockout/issues/289](https://github.com/knockout/knockout/issues/289)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T21:54:01.910

不，`data-bind`如果用花括号括起来，属性内的所有内容都应该是有效的 javascript 对象字面量。而`{ superAction }`不是。

# c# - 如何将数据表中的所有行复制到数据行数组？

> ID：14552595
> 
> 赞同：3
> 
> 时间：2013-01-27T21:37:05.100
> 
> 标签：c#, datatable, datarow

我有两张桌子：

**tbl_ClassFac:** ClassFacNo (Primary Key) ,FacultyID ,ClassID

**tbl_EmpClassFac：** EmpID，（主键）DateImplement，（主键）ClassFacNo

我想知道特定 ClassFacNo 上的所有员工。IE。所有具有特定 ClassFacNo 的 EmpID... 我所做的是首先使用用户提供的 EmpID 搜索 tbl_EmpClassFac。我存储这些数据行。然后使用这些数据行中的 ClassFacNo 搜索 tbl_ClassFac。以下是我的代码。

```
 empRowsCF = ClassFacDS.Tables["EmpClassFac"].Select("EmpID='" + txt_SearchValueCF.Text + "'");
        int maxempRowsCF = empRowsCF.Length;
        if (maxempRowsCF > 0)
        {
            foundempDT = ClassFacDS.Tables["ClassFac"].Clone();
            foreach (DataRow dRow in empRowsCF)
            {
                returnedRowsCF = ClassFacDS.Tables["ClassFac"].Select("ClassFacNo='" + dRow[2].ToString() + "'");
                foundempDT.ImportRow(returnedRowsCF[0]);
            }
        }
        dataGrid_CF.DataSource = null;
        dataGrid_CF.DataSource = foundempDT.DefaultView;

        ***returnedRowsCF = foundempDT.Rows;*** // so NavigateRecordsCF can be used

        NavigateRecordsCF("F");  // function to display data in textboxes (no importance here) 
```

我知道代码不是很好，但这就是我能想到的。如果有人有任何建议，请告诉我。如果不告诉我如何将数据表中的所有行复制到数据行数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:45:13.323

*“如何将数据表中的所有行复制到数据行数组中？”*

如果有帮助，请使用`Select`不带参数的重载

```
DataRow[] rows = table.Select(); 
```

[`DataTable.Select()`](http://msdn.microsoft.com/en-us/library/h71xaeh0%28v=vs.80%29.aspx)

> 获取所有 DataRow 对象的数组。

根据您的其余问题：实际上尚不清楚问题是什么。

但我假设您想通过第二个（相关）表中的字段值过滤第一个表。您可以使用这个简洁的`Linq-To-DataSet`查询：

```
var rows = from cfrow in tbl_ClassFac.AsEnumerable()
           join ecfRow in tbl_EmpClassFac.AsEnumerable()
           on cfrow.Field<int>("ClassFacNo") equals ecfRow.Field<int>("ClassFacNo")
           where ecfRow.Field<int>("EmpId") == EmpId
           select cfrow;
// if you want a new DataTable from the filtered tbl_ClassFac-DataRows:
var tblResult = rows.CopyToDataTable(); 
```

* * *

请注意，`CopyToDataTable`如果数据行序列为空，则可能会出现异常，因此过滤器没有返回任何行。您可以通过以下方式避免它：

```
var tblResult = rows.Any() ? rows.CopyToDataTable() : tbl_ClassFac.Clone(); // empty table with same columns as source table 
```

# entity-framework - 使用 AppHarbor 部署 EntityFramework

> ID：14552596
> 
> 赞同：1
> 
> 时间：2013-01-27T21:37:06.037
> 
> 标签：entity-framework, appharbor

将我的网站部署到 AppHarbor 后，我遇到了一个奇怪的问题。

我总是收到此错误：异常详细信息：System.Data.MetadataException：指定的架构无效

它显然与我的连接字符串相关联（在我的开发机器上完美运行）

```
<add name="DbEntities" connectionString="metadata=res://*/Models.DbModel.csdl|res://*/Models.DbModel.ssdl|res://*/Models.DbModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Server=xxx.sqlserver.sequelizer.com;Database=xxx;User ID=xxx;Password=xxx;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我不首先使用 EF 代码，所以我无法删除元数据部分。

知道该怎么做才能修复它吗？我找不到任何东西可以帮助我克服这个...

有关信息，我正在使用 VS 2012、.Net 4.0、EF 4.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:19:55.483

AppHarbor 知识库包含有关使用 SQL Server 加载项的信息，包括设置元数据字符串：http: [//support.appharbor.com/kb/add-ons/using-sequelizer](http://support.appharbor.com/kb/add-ons/using-sequelizer)

# jquery - 使用 ashx 的 jQuery UI 自动完成

> ID：14552600
> 
> 赞同：1
> 
> 时间：2013-01-27T21:37:21.820
> 
> 标签：jquery, asp.net, json, jquery-ui

目前正在尝试在搜索产品和文本页面的客户网站上实现自动完成功能。为此，我制作了一个通用处理程序，它以 JSON 形式返回匿名对象。我的匿名对象如下所示：

```
new
{
    Name = product.Name,
    Url = product.Url,
    ImageUrl = imageUrl
}); 
```

对象列表使用标准的 .NET JavascriptSerializer 进行序列化。

我的 javascript 看起来像这样：

```
searchField.autocomplete({
    source: "/handlers/SearchHandler.ashx",        
    response: function (event, ui) {
        ...
    }
}); 
```

不过，在将 JSON 中的值放入自动完成下拉框中时，我有点卡住了。另外，我想将结果用作链接，因此当用户单击下拉列表中的结果时，他/她会被重定向到页面/产品。

有谁知道如何实现这一目标？

**解决方案：**

```
searchField.autocomplete({
    source: "/handlers/SearchHandler.ashx?nodeId=" + currentNodeId,
    search: function (event, ui) {
        searchField.css("background-image", "url('../img/ajax-loader-small.gif')");
    },
    response: function (event, ui) {                        
        searchField.css("background-image", "");
    }
}).data("ui-autocomplete")._renderItem = function (ul, item) {    
        return $("<li>")
            .data("ui-autocomplete-item", item)
            .append("<a href='" + item.Url + "'>" + item.Name + "</a>")
            .appendTo(ul);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:45:21.770

您正在尝试将示例用于*静态*源以实现*动态*目的。

您的源属性不应该是 a `url`，而是 a `function`：

```
.autocomplete({
    source: function( request, response ) {
        $.getJSON( "/handlers/SearchHandler.ashx", {
            term: extractLast( request.term )
        }, response );
    }, ...
}) 
.data( "autocomplete" )._renderItem = function( ul, product ) {
    return $( "<li>" )
        .append( "<a href=" + product.Url + ">" + product.Name + "</a>" )
        .appendTo( ul );
}; 
```

正确的示例可在[此处](http://jqueryui.com/autocomplete/#multiple-remote)（来源）和[此处](http://jqueryui.com/autocomplete/#custom-data)（自定义显示）找到。

**根据评论，仅更改您的渲染以处理您的产品响应（请参阅第二个链接）。**

# php - 使用 PHP 返回 mysql 存储过程的输出参数

> ID：14552601
> 
> 赞同：2
> 
> 时间：2013-01-27T21:37:27.997
> 
> 标签：php, mysql, stored-procedures, mysqli

我正计划使用 PHP 和 MySQL 开发一个 CMS，它利用 MySQL 存储过程对我的 MySQL 数据库执行准备好的语句查询。自从我用 PHP 开发（回到程序时代）以来已经有很长时间了，所以我将尝试使用 PHP 的新 OOP 结构来实现这个系统。在我这样做之前，我需要处理将我的 MySQL 存储过程的输出参数返回到一个简单的 php 页面的简单问题。这只是一个测试，以便我可以在开发我的第一个 php 类之前获得正确的语法，因此此处发布的初始代码是程序性的。

首先，有我的存储过程：

```
 DELIMITER $$
    DROP PROCEDURE IF EXISTS `text_development`.`get_user`$$
    CREATE PROCEDURE  `text_development`.`get_user`
    (
    IN userId INT,
    OUT user_name VARCHAR(100)
    )
    BEGIN
    SELECT username
    INTO user_name
    FROM user
    WHERE user_id = userId;
    END $$
    DELIMITER ; 
```

然后是我的两个 php 文件：

```
 <?php
    //db_config.php
    $mysqli_host = "localhost";
    $mysqli_user = "root"; //I'm not stupid enough to use this in development
    $mysqli_pass = "root"; //before anyone comments about the root usage
    $mysqli_db = "text_development";
    ?>

    <?php
    //index.php
    require('incl/db_config.php');
    $dbConnection = new Mysqli($mysqli_host, $mysqli_user, $mysqli_pass, $mysqli_db) or die(mysql_error());
    print '<h1>Stored Procedure Retrieval Test</h1>';
    $id = 1;
    $return = '';
    $result = $dbConnection->query( 'CALL get_user($id,$return)');
    print $result;
    ?> 
```

我的问题出现在 index.php 页面上。它实际上似乎没有返回任何东西。在 PHPMyAdmin 中执行存储过程时，当我传入 1 的用户 ID 时返回用户名测试，但是在 php.ini 中调用函数时没有任何内容返回到屏幕。我也尝试过打印 $return ，但这只是返回一个空字符串（正如我在上面的代码中定义的那样）。我试过使用这个在线教程，但那里的解决方案似乎不起作用：

[http://www.joeyrivera.com/2009/using-mysql-stored-procedures-with-php-mysqlmysqlipdo/](http://www.joeyrivera.com/2009/using-mysql-stored-procedures-with-php-mysqlmysqlipdo/)

有谁知道我在这里做错了什么以及为什么这个存储过程的返回参数没有被打印到屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:44:50.103

首先，您参考了有关 PDO 的教程，但您使用的是 Mysqli。

第二：转换：

```
$result = $dbConnection->query( 'CALL get_user($id,$return)'); 
```

to（注意双引号和@return`）：

```
$result = $dbConnection->query( "CALL get_user({$id},@return)"); 
```

然后，稍后，执行：

```
$result = $dbConnection->query( 'SELECT @return'); 
```

如果 SP 是一个 SELECT，那么你就是你写的。

原因是，SP 不会返回任何东西给 PHP，它会将值返回到 MySQL 变量 ( `@return`)（scop 在 MySQL 中），因此您需要在单独的调用中查询该变量。如果它是对简单 select SP 的调用，那么它将像任何其他 select 语句一样返回值。

# rss - Google 日历提要缺少事件

> ID：14552602
> 
> 赞同：1
> 
> 时间：2013-01-27T21:37:42.007
> 
> 标签：rss, google-calendar-api

在测试解析 Google 日历的应用程序时，我注意到日历本身存在问题。下面是实际的日历链接，以及相应的 Feed 链接。并非日历中列出的所有事件都在提要中。例如，您会注意到 1 月 29 日在 Dover 的比赛不在任何地方的 Feed 中。对可能发生的事情有任何想法吗？

[日历本身](https://www.google.com/calendar/embed?src=ocacademy.org_2q91g7ko9qo4sgb1qgg8l9hbpk@group.calendar.google.com&ctz=America/Chicago)

[喂养](http://www.google.com/calendar/feeds/ocacademy.org_2q91g7ko9qo4sgb1qgg8l9hbpk@group.calendar.google.com/public/basic)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:31:20.113

默认情况下，Feed 仅显示最近编辑的 25 个条目。如果你想让它显示更多，你必须在你的 URL 之后添加类似：?max-results=1000 的内容，如下所示：

```
www.google.com/calendar/feeds/<id>/private-<magic-cookie>/full?max-results=1000 
```

# javascript - EmberJS 嵌套

> ID：14552604
> 
> 赞同：1
> 
> 时间：2013-01-27T21:37:48.877
> 
> 标签：javascript, ember.js, ember-data

鉴于以下代码，我认为 person.index 和嵌套的 person.finish 路由将使用 PersonController 内容/模型属性，因为它们是空的/未定义的？我究竟做错了什么？[http://jsfiddle.net/EasyCo/MMfSf/5/](http://jsfiddle.net/EasyCo/MMfSf/5/)

更简洁：当你点击 id 时，`{{id}}`and`{{name}}`是空白的？我该如何解决？

**功能性**

```
// Create Ember App
App = Ember.Application.create();

// Create Ember Data Store
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.FixtureAdapter'
});

// Create parent model with hasMany relationship
App.Person = DS.Model.extend({
    name: DS.attr( 'string' ),
    belts: DS.hasMany( 'App.Belt' )

});

// Create child model with belongsTo relationship
App.Belt = DS.Model.extend({
    type: DS.attr( 'string' ),
    parent: DS.belongsTo( 'App.Person' )
});

// Add Person fixtures
App.Person.FIXTURES = [{
    "id" : 1,
    "name" : "Trevor",
    "belts" : [1, 2, 3]
}];

// Add Belt fixtures
App.Belt.FIXTURES = [{
    "id" : 1,
    "type" : "leather"
}, {
    "id" : 2,
    "type" : "rock"
}, {
    "id" : 3,
    "type" : "party-time"
}];

App.Router.map( function() {
    this.resource( 'person', { path: '/:person_id' }, function() {
        this.route( 'finish' );
    });
});

// Set route behaviour
App.IndexRoute = Ember.Route.extend({
  model: function() {
    return App.Person.find();
  },
  renderTemplate: function() {
    this.render('people');
  }
}); 
```

**模板**

```
<script type="text/x-handlebars">
    <h1>Application</h1>
    {{outlet}}
</script>

<script type="text/x-handlebars" id="people">
    <h2>People</h2>
    <ul>
    {{#each controller}}
        <li>
            <div class="debug">
                Is the person record dirty: {{this.isDirty}}
            </div>
         </li>
        <li>Id: {{#linkTo person this}}{{id}}{{/linkTo}}</li>
        <li>Name: {{name}}</li>
        <li>Belt types:
            <ul>
            {{#each belts}}
                <li>{{type}}</li>
            {{/each}}
            </ul>
        </li>
    {{/each}}
    </ul>
</script>

<script type="text/x-handlebars" id="person">
    <h2>Person</h2>
    Id from within person template: {{id}}<br><br>
    {{outlet}}
</script>

<script type="text/x-handlebars" id="person/index">
    Id: {{id}}<br>
    Name: <a href="#" {{action  "changeName"}}>{{name}}</a><br><br>

    {{#linkTo index}}Go back{{/linkTo}}<br>
    {{#linkTo person.finish}}Go to finish{{/linkTo}}
</script>

<script type="text/x-handlebars" id="person/finish">
    <h2>Finish</h2>
    {{id}}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:08:37.023

您可以在路由器中使用它：

```
 model: function() {
    return this.modelFor("person");
  } 
```

而不是你的：

```
controller.set('content', this.controllerFor('person')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:00:26.260

您的视图是通过不同的控制器提供的，无论是 Ember 生成的控制器还是您定义的控制器，都`PersonIndexController`导致了您面临的问题。我没有修补原始示例以使其正常工作，而是对其进行了重新设计，以向您展示应该如何构建视图/路由以利用 Emberjs 功能。

您应该将您的应用程序/示例设计为一系列相互工作和通信的状态，并在路由器映射中捕获。在您的示例中，您应该有一个`people`,`person`资源和一个`finish`带有相应视图和控制器的路由，您可以显式创建它们，或者让 Ember 为您执行此操作，前提是您遵循其约定。

[这是](http://jsfiddle.net/MMfSf/7/)一个工作示例，下面我强调了该示例的一些最重要的部分

```
<script type="text/x-handlebars" data-template-name="people">
    <h2>People</h2>
    <ul>
    {{#each  person in controller}}
        <li>
            <div class="debug">
                Is the person record dirty: {{this.isDirty}}
            </div>
         </li>
        <li>Id: {{#linkTo 'person' person}}{{person.id}}{{/linkTo}}</li>
        <li>Name: {{person.name}}</li>
        <li>Belt types:
            <ul>
            {{#each person.belts}}
                <li>{{type}}</li>
            {{/each}}
            </ul>
        </li>
    {{/each}}
    </ul>
</script>

<script type="text/x-handlebars" data-template-name="person">
    <h2>Person</h2>
    Id from within person template: {{id}}<br><br>
    Id: {{id}}<br>
    Name: <a href="#" {{action  "changeName"}}>{{name}}</a><br><br>

    {{#linkTo index}}Go back{{/linkTo}}<br>
    {{#linkTo person.finish}}Go to finish{{/linkTo}}
    {{outlet}}
</script> 
```

模型、视图、控制器和路由定义

```
DS.RESTAdapter.configure("plurals", { person: "people" });

App.Router.map( function() {
    this.resource('people',function() {
        this.resource('person', { path: ':person_id' }, function() {
            this.route( 'finish');
        });    
    })

});

App.PeopleController = Ember.ArrayController.extend();
App.PeopleRoute = Ember.Route.extend({
    model: function() {
        return App.Person.find();
    }
})

App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('people');
    }
});
App.PersonRoute = Ember.Route.extend({
    model: function(params) {
        debugger;
        return App.Person.find(params.client_id);
    },
    renderTemplate: function() {
        this.render('person',{
            into:'application'
        })
    }
})

App.PersonFinishRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('finish',{
            into:'application'
        })
    }
}) 
```

# youtube - 嵌入的 Youtube 视频未出现在 infowindows 中

> ID：14552607
> 
> 赞同：0
> 
> 时间：2013-01-27T21:38:00.663
> 
> 标签：youtube, youtube-api, kml, google-earth, google-earth-plugin

我正在尝试将 Youtube 视频嵌入到以下 KML 文件中的一些信息窗口中：

[http://www.jonangfoundation.org/files/newdef.kml](http://www.jonangfoundation.org/files/newdef.kml)。

视频在 Google 地球和 KML Builder 上显示良好，但在此页面上根本不显示：

[http://www.jonangfoundation.org/taktentest](http://www.jonangfoundation.org/taktentest)

有谁知道是什么让他们无法出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:47:08.043

不幸的是，您的“测试”页面未加载 - 未找到页面错误。但是，我认为您需要为 .kml 文件设置正确的 MIME 类型。您的 newdef.kml 在我的浏览器窗口中显示为 XML，而不是下载为 .kml 文件。这*可能*是你的问题，很难说没有别的可以继续。查看此链接以获取有关设置正确 MIME 的详细信息

[https://developers.google.com/kml/documentation/kml_tut#kml_server](https://developers.google.com/kml/documentation/kml_tut#kml_server)

编辑：我不确定发生了什么。您的 KML 代码对我来说看起来不错，而且我看到您尝试了几种不同的方法，但似乎都不起作用。我建议你访问[这个 SO question](https://stackoverflow.com/questions/11254449/dynamic-content-in-kml-balloon-from-url)，因为它的答案是你可以做的事情。

基本上，您在单击地标时覆盖默认行为，并允许在气球中使用 iframe 和 javascript。这是解决问题的原始方法（但我认为它已在最新版本的插件中修复。也许不是？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:32:19.753

我相信您的内容正在被清除。有关描述和可能的解决方法，请参见链接。 [https://developers.google.com/earth/documentation/balloons#scrubbing](https://developers.google.com/earth/documentation/balloons#scrubbing)

# java - 如何使用二进制搜索搜索一系列值？

> ID：14552608
> 
> 赞同：0
> 
> 时间：2013-01-27T21:38:02.347
> 
> 标签：java, range, binary-search

我正在尝试编写一个程序，该程序将采用排序整数的*ArrayList*，并且将有一个二进制搜索方法，您可以在其中指定要从*ArrayList*返回的范围和值。

```
import java.util.ArrayList;

public class ArraySearch {
    ArrayList<Integer> myArrayList = new ArrayList<Integer>();
    static ArrayList<Integer> range = new ArrayList<Integer>();

public static ArrayList<Integer> binarySearch(ArrayList<Integer> arrayList, int min, int max, int first, int last)
                                        throws NotFoundException {
    if(first > last) {
        throw new NotFoundException("Elements not found.");
    }
    else {
        int middle = (first + last) /2;
        int mid_number = arrayList.get(middle);

        if(mid_number >= min && mid_number <= max)
        {
            range.add(middle);
        }

        if(mid_number <= min) {
            if(mid_number == min) {
                range.add(arrayList.get(middle));
                return binarySearch(arrayList, min, max, first, middle-1);
            }
            return binarySearch(arrayList, min, max, first, middle-1);
        }
        else {
            if(mid_number == max) {
                range.add(arrayList.get(middle));
                return binarySearch(arrayList, min, max, middle+1,last);
            }
            return binarySearch(arrayList, min, max, middle+1,last);
        }
    }   
}

public static void main (String [] args) throws NotFoundException {
    ArrayList<Integer> a = new ArrayList<Integer>();
    a.add(0);       
                a.add(1);
    a.add(2);
    a.add(3);
    a.add(6);
    a.add(7);
    a.add(7);
    a.add(10);
    a.add(10);
    a.add(10);

    binarySearch(a, 3, 7, 0, 9);
} 
```

}

我能得到一些帮助吗？
我不知道应该返回*ArrayList*范围的基本情况条件。而且我想我可能把二分搜索方法的逻辑弄错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-26T23:50:51.020

首先，找到元素的下标范围。然后，找到元素的上索引范围。要找到较低的索引范围，当你找到元素时，而不是像我们在正常搜索中那样跳出循环。将值放入 index 并使中间值比您正在检查的当前索引小一。这将使循环再次找到较低的索引，而不是在第一个索引处停止。同样对于上索引，更新开始到我们正在检查的当前索引 + 1。看看代码。

```
public ArrayList<Integer> searchRange(ArrayList<Integer> a, int b) {
    int first=lowerIndex(a,b);
    int last=upperIndex(a,b);
    ArrayList<Integer> result= new ArrayList<Integer>();
    result.add(first);
    result.add(last);
    return result;

}

public int upperIndex(ArrayList<Integer> a, int b) {
    int index=-1; //will return -1 if element not found.
    int start=0;
    int end=a.size()-1;

    while(start<=end){
        int mid=(start+end)/2;
        if(a.get(mid)==b){
            index=mid;    //Update Index, which is the upper index here.
            start=mid+1; // This is the main step.
        }
        else if(a.get(mid)>b){
            end=mid-1;
        }
        else{
            start=mid+1;
        }
    }

    return index;
}

public int lowerIndex(ArrayList<Integer> a, int b) {
    int index=-1; // will return -1 if element not found
    int start=0;
    int end=a.size()-1;

    while(start<=end){
        int mid=(start+end)/2;
        if(a.get(mid)==b){
            index=mid;  //Update Index, which is the lower index here.
            end=mid-1; // This is the main step .
        }
        else if(a.get(mid)>b){
            end=mid-1;
        }
        else{
            start=mid+1;
        }
    }

    return index;
} 
```

# java - Java中的检查案例

> ID：14552611
> 
> 赞同：-2
> 
> 时间：2013-01-27T21:38:37.023
> 
> 标签：java, string

我是 Java 新手，我有实验室要做（就像作业一样）

我试图弄清楚如何编写这个方法

```
public int checkCase(String data) 
```

来自网站的问题：

Java 是区分大小写的……所以仅仅敲击键盘上的正确键并不一定意味着您将获得正确的变量或文件名！！！！为一个预期的字符串，其值由应用程序从标准输入中读取，并作为参数传递给此方法。例如，如果参数值为“XY”，则此方法将列出以下内容（尽管不一定按此顺序）：

```
X.y
X.Y
X>Y
X>y
x.Y
x.y
x>Y
x>y 
```

您应该提供 1-8 个字符的可能数据长度以及任何字母键或句点键。

* * *

我不是想直接问我的作业或任何事情的答案，但我只是想从你们那里得到一些指导或建议，这些人对 Java 有更好的了解或对 Java 有更好的了解，以便我可以完成我的作业...... .如果我的教授在课堂上说清楚了，我就不会在这里问，也不会在这里浪费任何人的时间，但我现在真的迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:40:43.603

最简单的方法是遍历输入字符串，并为每个字符使用原始`char`类型下的对象包装器检查其大小写——我的意思是`Character`类。它有这样的方法：

~~`Character.isUpperCase(char ch)`~~

**UPD：** 根据更新的问题文本，我必须更改答案。

是的，我认为你应该使用`Character`类来实现这个目标。它有这样的方法： `Character.toUpperCase(char ch)`和`Character.toLowerCase(char ch)`。您必须实现方法，该方法将为输入字符串中的每个字符组合所有可能的情况。

符号怎么样`.`- > `>`- 这种情况你必须在你的程序中考虑作为一种特殊情况。

# java - Objective C 中的构造函数、静态方法和类变量

> ID：14552612
> 
> 赞同：2
> 
> 时间：2013-01-27T21:39:01.753
> 
> 标签：java, iphone, ios, objective-c

只是试图将一些Java代码转换为Objective-C。

这是用 Java 编写的名为“bone”的类的构造函数的代码片段。

```
public class Bone {

public static double            RADS_TO_DEGS =
                                Quaternion.RADS_TO_DEGS;
public static double            DEGS_TO_RADS =
                                Quaternion.DEGS_TO_RADS;

public static int               LUPA_4CC =
                                FourCCUtil.fourCCInt("LUPA");
public static int               RUPA_4CC =
                                FourCCUtil.fourCCInt("RUPA");
public static int               LLRA_4CC =
                                FourCCUtil.fourCCInt("LLRA");
public static int               RLRA_4CC =
                                FourCCUtil.fourCCInt("RLRA");

protected float                 length;
protected Bone                  parent;
protected Bone[]                childBones;
protected int                   fourCCName;
protected int                   parentFourCCName;
protected float[]               translation; 
```

这是我在objective-c中重写这段代码的尝试：

骨头.h

```
@interface Bone : NSObject{

@property static double         RADS_TO_DEGS;
@property static double         DEGS_TO_RADS;

@property static int                LUPA_4CC;
@property static int                RUPA_4CC;
@property static int                LLRA_4CC;
@property static int                RLRA_4CC;

@protected {
    @property float length;
    @property Bone parent;
    @property Bone[] childBones ;
    @property int fourCCName;
    @property int parentFourCCName;
    @property float[] translation; 
```

骨骼.m

```
@implementation VA_Bone

-(id)init{

    self=[super init];
    if(self){

        VA_4ccUtil       *FCC       = [[VA_4ccUtil alloc] init];
        VA_Bone          *Bone      = [[VA_Bone alloc] init];
        VA_TRTransform   *TRTform   = [[VA_TRTransform alloc] init];
        VA_TRUtil        *TRUtil    = [[VA_TRUtil alloc] init];
        VA_Quaternion    *Quat      = [[VA_Quaternion alloc] init]];           

       [Bone setDEGS_TO_RADS: [Quat DEGS_TO_RADS]];
       [Bone setRADS_TO_DEGS: [Quat RADS_TO_DEGS]];

       [Bone setLUPA_4CC: [TRUtil fourCCInt:"LUPA"]];
       [Bone setRUPA_4CC: [TRUtil fourCCInt:"RUPA"]];
       [Bone setLLRA_4CC: [TRUtil fourCCInt:"LLRA"]];
       [Bone setRLRA_4CC: [TRUtil fourCCInt:"RLRA"]];

        [self setParent:NULL];
        [self setFourCCName:0];
        [self setParentFourCCName:0];
        [self setTranslation:NULL];
        [self setLength:0];

    }
    return self;
} 
```

我的问题是：

1）我是否正确声明了静态方法？

2) 是否可以分配类类型，还是使用 NSMutableArray 等数组而不是 Bone[] 更好？

由于我目前正在将一些 Java 代码转换为目标 c，因此我仍在尝试了解如何在 Objective-c 中构造一个类。

亲切的问候，山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:49:05.763

> 我是否正确声明了静态方法？

不。在Objective C中没有这样的东西`@property static`。您需要将它们声明为*类方法*：

```
+(double)RADS_TO_DEGS; // This is a getter 
```

如果你需要一个 setter，再写一个方法：

```
+(void)setRADS_TO_DEGS:(double)val; // This is a setter 
```

> 是否可以分配类类型，还是使用 NSMutableArray 之类的数组而不是 Bone[] 更好？

由于所有权问题，普通 C 数组存在问题。使用属性会更好地为您服务`NSArray`：它将为您提供相同的灵活性，为您的客户提供快速枚举，并以符合 Objective C 的惯用方式处理资源清理。

# javafx - 是否可以滚动 JavaFX 菜单栏

> ID：14552615
> 
> 赞同：1
> 
> 时间：2013-01-27T21:39:55.387
> 
> 标签：javafx, menubar, scrollable

我想将 javafx.scene.control.MenuBar 添加到 AnchorPane 中。菜单条目的数量是灵活的。用户可以在 MenuBar 中添加一个或多个条目。如果我只在 MenuBar 中使用几个菜单项，那么水平位置就足够了。

```
MenuBar menuBar = new MenuBar();
Menu menuFile = new Menu("File");
Menu menuEdit = new Menu("Edit");
Menu menuView = new Menu("View");
menuBar.getMenus().addAll(menuFile, menuEdit, menuView); 
```

但如果条目多于一些，有些长的项目，则没有足够的地方。这不是正常情况，但有些用户希望添加更多菜单项。菜单项的最大数量将限制为十个条目。

```
MenuBar menuBar = new MenuBar();
Menu menu1 = new Menu("Long first menu");
Menu menu2 = new Menu("My second long entry");
Menu menu3 = new Menu("another long entry");
Menu menu4 = new Menu("Long menu 4");
Menu menu5 = new Menu("My fifth long entry");
Menu menu6 = new Menu("another long long entry");

menuBar.getMenus().addAll(menu1, menu2, menu3, menu4, menu5, menu6); 
```

我的对话框不能调整大小。并且所有菜单都必须在 MenuBar 中的一行中。这是一个 GUI 设计决策。

我想要一个带有可滚动菜单栏的解决方案。如果这个解决方案绝对不可能，那么下一个解决方案可能是减少所有菜单的显示字符数。例如：|长杉...|我的第二个...|另一个...| ...但我更喜欢第一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:38:46.980

> 减少所有菜单的显示字符数。例如：|长杉...|我的第二个...|另一个...| ...

这是放置在可调整大小窗格内的 MenuBar 的默认行为。

这是一些使用您的长菜单示例的示例代码。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class ElidedMenu extends Application {
    @Override public void start(Stage stage) {
        MenuBar menuBar = new MenuBar();
        Menu menu1 = new Menu("Long first menu");
        Menu menu2 = new Menu("My second long entry");
        Menu menu3 = new Menu("another long entry");
        Menu menu4 = new Menu("Long menu 4");
        Menu menu5 = new Menu("My fifth long entry");
        Menu menu6 = new Menu("another long long entry");

        menuBar.getMenus().addAll(menu1, menu2, menu3, menu4, menu5, menu6);      

        StackPane stack = new StackPane();
        stack.getChildren().add(new Label("Hello World!"));

        VBox layout = new VBox();
        layout.getChildren().addAll(menuBar, stack);
        VBox.setVgrow(stack, Priority.ALWAYS);

        stage.setScene(new Scene(layout, 500, 250));
        stage.setResizable(false);
        stage.show();
    }

    public static void main(String[] args) { launch(args); }
} 
```

示例代码的输出是：

![省略的菜单](../Images/e0a4d74f2b1b4fb894a8a21e43a256e5.png)

* * *

> 带有可滚动菜单栏的解决方案

将 MenuBar 包装在 ScrollPane 中以使其可滚动。

这是一些使用您的长菜单示例的示例代码。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class ScrollingMenu extends Application {
    @Override public void start(Stage stage) {
        MenuBar menuBar = new MenuBar();
        Menu menu1 = new Menu("Long first menu");
        Menu menu2 = new Menu("My second long entry");
        Menu menu3 = new Menu("another long entry");
        Menu menu4 = new Menu("Long menu 4");
        Menu menu5 = new Menu("My fifth long entry");
        Menu menu6 = new Menu("another long long entry");

        menuBar.getMenus().addAll(menu1, menu2, menu3, menu4, menu5, menu6);      
        ScrollPane scrollingMenu = new ScrollPane();
        scrollingMenu.setContent(menuBar);

        StackPane stack = new StackPane();
        stack.getChildren().add(new Label("Hello World!"));

        VBox layout = new VBox();
        layout.getChildren().addAll(scrollingMenu, stack);
        VBox.setVgrow(stack, Priority.ALWAYS);

        stage.setScene(new Scene(layout, 500, 250));
        stage.setResizable(false);
        stage.show();

        scrollingMenu.setPrefSize(stage.getScene().getWidth(), menuBar.getHeight());
    }

    public static void main(String[] args) { launch(args); }
} 
```

示例代码的输出是：

![滚动菜单](../Images/2232288fea407eb687ca63f032c157aa.png)

# cross-browser - 旧浏览器的浏览器兼容性升级页面

> ID：14552616
> 
> 赞同：0
> 
> 时间：2013-01-27T21:40:08.693
> 
> 标签：cross-browser

我决定不支持旧版浏览器（IE6 及之前），而是提供一个强制用户升级浏览器的页面。我的目标人群通常精通技术，很少有用户会遇到这个页面。我希望做的是不支持任何超过 5 到 6 年的浏览器。实现这一目标的最佳方法是什么？只消除IE6及以下会更好吗？早期版本的 Firefox 等呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:52:12.693

您可以从浏览器传递的 User-Agent 字符串中读取浏览器版本。您想对其进行正则表达式匹配。根据您想要的苛刻程度，您可以在页面顶部放置一个大横幅，其中包含您检测到他们的浏览器的内容以及他们升级的链接。您应该能够以您选择的服务器端语言找到库来为您进行解析，省去繁重的工作。一个超快速的谷歌返回：[https ://github.com/tobie/ua-parser](https://github.com/tobie/ua-parser)

# c - 无限循环和奇怪的字符：while (chars = fgetc(map) != EOF)

> ID：14552619
> 
> 赞同：2
> 
> 时间：2013-01-27T21:40:40.483
> 
> 标签：c, infinite-loop, eof, operator-precedence, getchar

我正在尝试使用 fopen() 和 fgetc() 读取文件 (map.txt)，但我得到一个无限循环和奇怪的字符作为输出。我试过不同的条件，不同的可能性，循环总是无限的，好像EOF不存在一样。

我想用文本文件（Allegro）创建一个地图瓦片基本系统，为此我需要学习如何阅读它们。所以我试图简单地读取文件并逐个字符地打印它的内容。

```
void TileSystem() {

    theBitmap = al_load_bitmap("image.png"); // Ignore it.  

    float tileX = 0.0; // Ignore it.    
    float tileY = 0.0; // Ignore it.    
    float tileXFactor = 0.0; // Ignore it.  
    float tileYFactor = 0.0; // Ignore it.  

    al_draw_bitmap( theBitmap, 0, 0, 0 ); // Ignore it. 

    FILE *map;
    map = fopen( "map.txt", "r");

    int loopCondition = 1;
    int chars;

    while ( loopCondition == 1 && ( chars = fgetc( map ) != EOF ) ) {
            putchar( chars );
        }
} 
```

map.txt 的内容是：

```
1
2
3
4
5
6
7
8
9 
```

我得到的输出是一个无限循环：

```
???????????????????????????????????????????????????
???????????????????????????????????????????????????
???????????????????????????????????????????????????... 
```

但我在终端上看到的是：

![EOF 错误](../Images/c5b2c75880dc23a995f0c7cbc8bfdacf.png)

好吧，我只需要读取所有字符，编译器需要正确识别文件的结尾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:42:48.753

```
chars = fgetc( map ) != EOF 
```

应该

```
(chars = fgetc(map) ) != EOF 
```

这是一个完整的工作示例：

```
#include <stdio.h>

int main() {
  FILE *fp = fopen("test.c","rt");
  int c;
  while ( (c=fgetc(fp))!=EOF) {
    putchar(c);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:42:59.053

```
chars = fgetc( map ) != EOF 
```

`!=`的优先级高于`=`，您可能想做这样的事情：`(chars = fgetc( map )) != EOF`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:43:10.910

这一行：

```
chars = fgetc( map ) != EOF 
```

正在像这样执行：

```
chars = (fgetc( map ) != EOF) 
```

所以你应该像这样添加括号：

```
(chars = fgetc( map )) != EOF 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T21:45:09.297

```
while ( loopCondition == 1 && ( chars = fgetc( map ) != EOF ) ) { 
```

doesn't look right... Have you tried:

```
while ( loopCondition == 1 && ( ( chars = fgetc( map ) ) != EOF ) ) { 
```

# ruby-on-rails - 使用可选的 :sort 参数将 GET 请求路由到“索引”操作

> ID：14552623
> 
> 赞同：0
> 
> 时间：2013-01-27T21:40:57.357
> 
> 标签：ruby-on-rails, routes

作为 Edx 的 SaaS 课程的一部分，我正在努力使用我的第一个 Rails 应用程序。卡住了一个大概相当基本的路由问题。

搜索、试验和错误只让我在下面进行了适度的尝试，所以我现在第一次尝试使用 stackoverflow。

任务是在单击标题时使“电影”表的“标题”列可排序。到目前为止，我已经添加了下面标记为粗体的 'link_to' .. 'movie_path...' 部分。

```
%h1 All Movies
%table#movies
  %thead
    %tr
      %th= link_to "Movie Title", movie_path(:sort => "title")
      %th Rating
      %th Release Date
      %th More Info
  %tbody
  ... 
```

我的 routes.rb 文件只有基于`resources :movies`. 为了处理“排序”选项，我更改了 MoviesController 的基本“索引”方法，如下所示：

```
def index
  sort = params[:sort]
  @movies = Movie.find(:all, **:order => "title"**) **if :sort == "title"**
end 
```

现在我收到此错误消息：

```
Started GET "/movies" for 127.0.0.1 at 2013-01-27 14:58:55 -0600
  Processing by MoviesController#index as HTML
Rendered movies/index.html.haml within layouts/application (1.6ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (No route matches {:action=>"show", :controller=>"movies"}):
    4: %table#movies
    5:   %thead
    6:     %tr
    7:       %th#title_header= link_to "Movie Title", movie_path
    8:       %th Rating
    9:       %th Release Date
    10:       %th More Info
  app/views/movies/index.html.haml:7:in `_app_views_movies_index_html_haml__237103960__639242128' 
```

问题）：

*   我应该定义一个单独的方法“排序”而不是在其中包含“排序”选项`index`吗？
*   无论哪种情况，如何正确路由请求？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:29:34.417

那是一堂很棒的课！当他们说要问你是否自己想不通时，我看到你在注意。

正如评论所建议的，您需要`movies_path`，但您的代码还有另一个问题。

您当前设置了一个`sort`变量，但随后您正在检查`:sort`哪个不是变量而是一个符号 - 基本上是一个常量。

此外，当您将 放在`if`行尾时，它会影响整行。因此，当您现在拥有它时，您将永远不会分配`@movies`.

我希望这会有所帮助。

# android - Android 是否缓存应用程序数组资源？

> ID：14552630
> 
> 赞同：1
> 
> 时间：2013-01-27T21:41:43.537
> 
> 标签：android, resources

Android是否缓存结果`Resource#getIntArray(int)`？我在源代码中四处寻找，但在涉及本机代码时迷失了方向。

我遵循了从`getIntArray(int)`调用本机方法的线索`AssetManager#getArrayIntResource(int)`。

我想我也在问 call 有多贵`Resources#getIntArray(int)`，因为这是我经常使用的一种方法？我应该实现自己的缓存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:25:57.940

答案是由 Freenode 上的一些好心人提供的，不，Android 似乎没有缓存结果。

# c++ - C++：如何检测向量中的重复项 并打印一份？

> ID：14552633
> 
> 赞同：3
> 
> 时间：2013-01-27T21:41:48.383
> 
> 标签：c++, duplicates, stdvector

我是 C++ 新手。我想知道如何在向量中找到重复的字符串并打印出字符串的一个副本。例如，如果我有 <"cat", "dog", "dog", "bird",> 它将打印出 cat, dog, bird。我已经对我的向量进行了排序，并且正在使用相邻查找函数并遍历向量（因为我必须查找是否有任何单词重复）。我的代码检测到重复项，但它只打印出非重复项。我想更改它以打印出所有非重复项以及其中一个重复项，以便打印出向量中的所有字符串。这是我到目前为止的代码：

```
public: void print(vector<string> in) // print method for printing a vector and it's key
{ 

  sort(in.begin(), in.end()); // sort the vector alphabetically first

  vector<string>::iterator it; 

      for( it = in.begin(); it != in.end(); it++ ) // iterate through it

             if(adjacent_find(in.begin(), in.end()) == in.end()) // don't print duplicates

             cout << *it<<endl; // and print out each string in the vector
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T21:43:37.853

您可以使用 STL 算法`std::unique()`或`std::unique_copy()`. 它们适用于任何 STL 容器，而不仅仅是向量。

将向量打印到标准输出的简单示例：

```
#include <iostream>
#include <algorithm>
#include <iterator>

using namespace std;

int main()
{
    vector<string> v = { "hello", "hello", "world" };
    unique_copy(begin(v), end(v), ostream_iterator<string>(cout, " "));
} 
```

如果您想就地执行此操作，您可以使用`std::unique()`. 重要的是要记住，此函数不会物理删除冗余元素，但它会将迭代器返回到集合的新逻辑端：

```
#include <iostream>
#include <algorithm>
#include <iterator>

using namespace std;

int main()
{
    vector<string> v = { "hello", "hello", "world" };
    auto newEnd = unique(begin(v), end(v));
    for_each(begin(v), newEnd, [] (string const& s) { cout << s << " "; });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T21:43:21.697

Try `std::unique`，它从每组连续的相同元素中删除除第一个元素之外的所有元素（更多示例+信息[here](http://www.sgi.com/tech/stl/unique.html)）。由于您的矢量已排序，这听起来像您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:43:43.697

如果您的向量已经排序，您可以使用它[`std::unique`](http://en.cppreference.com/w/cpp/algorithm/unique)来删除连续的重复项。

另一种选择是[`std::set`](http://en.cppreference.com/w/cpp/container/set)从向量构造一个。这将具有设计独特的元素。

# ruby-on-rails - rails sprockets include_tree

> ID：14552634
> 
> 赞同：0
> 
> 时间：2013-01-27T21:41:57.463
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

所以这是我的问题

sprocket 定义了这些指令

```
include
require_directory
require_tree
require_self
depend_on
stub 
```

所以我想念的是`include_tree`在一个文件中包含所有javascript源（放置在另一个目录中）的指令！

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:10:03.840

假设您的 js 文件在目录中`lib/assets/your_library/yourfiles.js`（注意，它应该是 assets 目录）。您只需要创建一个名为 index.js 的索引文件（它也是一个清单文件）并插入如下指令：

```
//= require_tree . 
```

（或您希望包含的文件）

之后，在您的`application.js`插入中：

```
//= require your_library 
```

有关在资产管道中使用索引文件的更多信息，请参阅[此 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)。

# node.js - 使用 node.js (http.get) 读取远程文件

> ID：14552638
> 
> 赞同：56
> 
> 时间：2013-01-27T21:42:08.383
> 
> 标签：node.js

读取远程文件的最佳方法是什么？我想获取整个文件（而不是块）。

我从以下示例开始

```
var get = http.get(options).on('response', function (response) {
    response.on('data', function (chunk) {
        console.log('BODY: ' + chunk);
    });
}); 
```

我想将文件解析为 csv，但是为此我需要整个文件而不是分块数据。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-27T21:50:49.193

我会为此使用[请求：](https://github.com/mikeal/request)

```
request('http://google.com/doodle.png').pipe(fs.createWriteStream('doodle.png')) 
```

或者，如果您不需要先保存到文件，而只需将 CSV 读入内存，则可以执行以下操作：

```
var request = require('request');
request.get('http://www.whatever.com/my.csv', function (error, response, body) {
    if (!error && response.statusCode == 200) {
        var csv = body;
        // Continue with your processing here.
    }
}); 
```

等等

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-08-17T16:50:26.483

你可以做这样的事情，而不使用任何外部库。

```
const fs = require("fs");
const https = require("https");

const file = fs.createWriteStream("data.txt");

https.get("https://www.w3.org/TR/PNG/iso_8859-1.txt", response => {
  var stream = response.pipe(file);

  stream.on("finish", function() {
    console.log("done");
  });
}); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-28T00:33:01.737

```
http.get(options).on('response', function (response) {
    var body = '';
    var i = 0;
    response.on('data', function (chunk) {
        i++;
        body += chunk;
        console.log('BODY Part: ' + i);
    });
    response.on('end', function () {

        console.log(body);
        console.log('Finished');
    });
}); 
```

对此进行更改，这有效。任何意见？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-14T06:01:20.470

```
function(url,callback){
    request(url).on('data',(data) => {
        try{
            var json = JSON.parse(data);    
        }
        catch(error){
            callback("");
        }
        callback(json);
    })
} 
```

你也可以使用这个。这是异步流。当响应不是 JSON 时会出现错误。同样在 404 状态码。

# ninject - Ninject with bbEventBroker - 如何实例化事件订阅者？

> ID：14552643
> 
> 赞同：0
> 
> 时间：2013-01-27T21:42:40.060
> 
> 标签：ninject, publish-subscribe, bbv.common.eventbroker

我正在使用 Ninject 的 bbEventBroker 扩展来连接我的应用程序中的一些 pub/sub。我有发布事件的业务服务，然后我有其他订阅事件的类。Ninject 的接线工作正常，但有一个问题。我没有看到一个明显的地方应该实例化事件订阅者。现在我正在破解它，只是确保在其他任何人使用它之前，所有订阅者都作为单例请求进入内核。但这似乎不对。如果我什么都不做，那么就没有订阅者的实例，并且事件最终会被忽略。

我应该如何实例化 bbEventBroker 事件的订阅者，以便它们最终连接到内核中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:48:45.407

bbvEventBroker 假定您的订阅者已经实例化并在 EventBroker 上注册。您可能希望将 Ninject.Extensions.DependencyCreation 视为管理订阅者生命周期的一种方式。我已经在 MVP 应用程序中成功地使用了它，以确保我的所有演示者（即 bbvEventBroker 订阅者）在应用程序启动时被实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:39:17.957

我最终创建了一些非常hacky的代码来解决这个问题，但它确实有效。在连接事件订阅者的 Ninject 模块中，我还为 IEventBroker 添加了一个 OnActivation 处理程序。当调用该激活处理程序时，我在内核上为每个订阅者执行 Get（通过使用反射来查找正确的类型）。这可确保每个订阅者的实例都连接到代理。

这导致了一个问题，由于某种原因，当 Ninject 尝试处理时，可以激活 IEventBrokers。因此，我必须在我的模块上覆盖 OnDispose 并设置一个标志以在 dispose 开始后停止执行上述操作。黑客攻击！:-)

# android - adb 无法识别三星 Note II 和 Note 10.1

> ID：14552648
> 
> 赞同：5
> 
> 时间：2013-01-27T21:43:07.737
> 
> 标签：android, adb, samsung-mobile

为了让 adb 识别我的手机和平板电脑，我需要做些什么特别的事情吗？

我打开了开发人员模式，但是当我执行“adb devices”时，我仍然只能得到模拟器，或者如果没有模拟器运行，我什么也得不到。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-12T23:25:15.567

如果您在 Windows 下工作，请尝试安装[适用于 Windows 的三星 USB 驱动程序](http://developer.samsung.com/android/tools-sdks/Samsung-Andorid-USB-Driver-for-Windows).. 应该足够了 ;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T05:52:05.860

我谷歌了一下，发现如果你安装三星凯斯然后 adb 开始识别三星产品。=]

# ruby - 如何使用 Ruby 将空格分隔的 .txt 文件转换为“，”分隔的 .txt 文件？

> ID：14552652
> 
> 赞同：-1
> 
> 时间：2013-01-27T21:43:36.840
> 
> 标签：ruby

我确实有一个如下的文本文件：

***员工详情.txt***

```
Raja Palit     77489  24   84   12/12/2011
Mathew bargur  77559  25   88   01/12/2011
harin Roy      77787  24   80   12/12/2012
Soumi paul      77251  24   88   11/11/2012 
```

我想要的文件如下：

***预期文件：***

```
Raja,Palit,77489,24,84,12/12/2011
Mathew,bargur,77559,25,88,01/12/2011
harin,Roy,77787,24,80,12/12/2012
Soumi,paul,77251,24,88,11/11/2012 
```

我在下面尝试了什么：

```
IO.foreach('D://docs//details.txt') do |line|
  splits = line.split("\t")

  col1, col2, col3, col4, col5, col6 = splits

  splits[6..-1].join(',')
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T06:11:56.610

尽管通过在空格上拆分来处理此类数据似乎是一种快速的方法，但如果任何字段包含嵌入的空格，则该方法将失败。例如，如果记录中的人名类似于“Maria Von Trapp”或“Smokey the Bear”，则生成的以逗号分隔的字段将是错误的。

处理此问题的正确方法是根据列字段宽度进行解析，然后在这些字段中压缩并去除空格，然后将记录转换为 CSV 记录。

```
require 'csv'
require 'scanf' if (RUBY_VERSION >= '1.9.3')

FORMAT = '%15c %d %d %d %10c'

data = <<EOT
Raja Palit      77489  24   84   12/12/2011
Mathew bargur   77559  25   88   01/12/2011
harin Roy       77787  24   80   12/12/2012
Soumi paul      77251  24   88   11/11/2012
Maria Von Trapp 99999  99   99   12/31/2012
Smokey the Bear 99999  99   99   12/31/2012
EOT

data.split("\n").each do |li|
  fields = li.scanf(FORMAT)
  puts [fields.first.strip, *fields[1 .. -1]].to_csv
end 
```

哪个输出：

```
Raja Palit,77489,24,84,12/12/2011
Mathew bargur,77559,25,88,01/12/2011
哈林罗伊,77787,24,80,12/12/2012
苏米保罗,77251,24,88,11/11/2012
玛丽亚·冯·特拉普,99999,99,99,12/31/2012
Smokey the Bear,99999,99,99,12/31/2012

```

注意，Ruby 1.9.3 分成`scanf`了自己的模块，它解释了条件要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T22:04:20.693

字符串带有一种`squeeze`方法，它将参数中的字符的运行压缩到一个字符中。在这种情况下，它将多个空格减少为一个空格，然后用逗号替换：

```
File.open("test.txt") do |in_file|
  File.open("test.csv", 'w') do |out_file| #the 'w' opens the file for writing
    in_file.each {|line| out_file << line.squeeze(' ').gsub(' ', ',') }
  end # closes test.csv
end # closes test.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T21:45:54.460

您可以使用正则表达式将任何空格字符替换为逗号：

```
my_string.sub! /\s/g, ',' 
```

如果要丢弃空字段，可以使用：

```
my_string.sub! /\s+/g, ',' 
```

另一种方法是将其拆分为空格并加入逗号。这也将丢弃空字段：

```
my_string = my_string.split(' ').join(',') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T21:54:53.080

```
File.open("details.txt", "r+"){|io| io.write(io.read.gsub(/[ \t]+/, ","))} 
```

# android - 创建带有文本的可点击进度条的最佳方法

> ID：14552655
> 
> 赞同：1
> 
> 时间：2013-01-27T21:43:40.387
> 
> 标签：android, android-widget, android-button, android-progressbar

我需要实现一个带有圆角和文本的厚可点击进度条。

什么是最好的 - 意味着最简单的 - 实现它的方法？我在带圆角的进度条上找到了几个主题，但我需要一些超越它的东西......

我应该扩展 Button、ProgressBar 还是 TextView？

TIA

# objective-c - 正则表达式模式匹配目标 C 中的字符串

> ID：14552657
> 
> 赞同：0
> 
> 时间：2013-01-27T21:43:46.117
> 
> 标签：objective-c, regex, pattern-matching, nsregularexpression

这是我在 Objective C 中创建的正则表达式模式：

```
^\n?([#]{1,2}$|[*]{1,2}$|[0-9]{1,3}.$) 
```

我想匹配：

1.  以 \n 开头或为空
2.  以 # 或 * 或 . 结尾。
3.  如果以 . 中间会有 1 或 2 或 3 位数字
4.  如果以 # 或 * 结尾，则其间可能还有 1 个 # 或 *

我创建的正则表达式匹配 '\n1#' 这不是我想要的。谁能帮我纠正这个？这是最快的吗？正则表达式会经常使用，所以我希望它尽可能快。

更新：

这是用于测试的示例字符串：

```
"\n#", "11*1", "1#", "a1.", "111*", "\n1#", "\n11.", "a11.", "1\. ", "*1." 
```

和`1#`匹配`111*`。不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:12:04.247

你匹配`#1`并且`111#`因为`[0-9]{1,3}.`. 您还没有转义，`.`并且该组基本上匹配任何 1 到 3 位数字后跟任何字符的序列。

你正在寻找的是

```
^\n?(#{1,2}|\*{1,2}|[0-9]{1,3}\.)$ 
```

在 ObjC 中正确逃脱，它将是

```
@"^\n?(#{1,2}|\\*{1,2}|[0-9]{1,3}\\.)$" 
```

如果这个正则表达式被大量使用，你可能想要缓存`NSRegularExpression`对象以避免每次都编译它。

[Regexpal](http://regexpal.com/)对于测试正则表达式非常有用。

# windows-runtime - WinRT - 如何在代码中打开文件并防止用户尝试使用应用程序打开相同类型的文件

> ID：14552660
> 
> 赞同：1
> 
> 时间：2013-01-27T21:43:47.897
> 
> 标签：windows-runtime, storagefile

在我的 WinRT 应用程序中，我需要从用户文档文件夹中读取一个特定的文本文件（我确切地知道该文件的位置，因为 WinRT 应用程序是用户已经安装的软件的伴侣）。我可以使用 StorageFile/ReadTextAsync 和添加到应用程序清单的已注册文件关联类型来执行此操作。

我的问题是，由于我必须在应用程序清单中声明文件关联，现在每次用户打开任何文本文件 (.txt) 时，Windows 8 都会提醒他们我的 WinRT 应用程序可以打开它。这并不理想，因为我的应用程序仅以编程方式在代码中的一个位置读取特定文本文件 - 它无法打开任何文本文件。当然，如果我从清单中删除文件关联，那么我将无法以编程方式读取我的文本文件。

我的问题是如何读取代码中的文本文件，但不能让用户认为我的应用程序可以打开任何文本文件？

注意：文件关联属性上有一个名为“始终不安全”的复选框，您认为它会做我想要的，但显然它不会禁止用户使用我的应用程序打开文本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:49:31.193

我可能对您的情况理解错了，但是如果在您的应用程序中用户可以选择一个文件，您可以在选择器选项中过滤他可以打开的文件类型。

# url - Opencart面包屑链接不一致

> ID：14552666
> 
> 赞同：0
> 
> 时间：2013-01-27T21:44:50.103
> 
> 标签：url, seo, opencart, breadcrumbs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:59:51.877

产品、制造商、信息页面和类别都有 SEO 关键字字段，您可以在其`DATA`选项卡中找到这些字段（选项卡中的制造商除外`GENERAL`）。需要为上述所有内容设置这些以使其正常工作。您显示的第二个链接不起作用的原因是因为它`product/manufacturer/product`不仅仅是`product/manufacturer`

## 编辑

`product/manufacturer/product`实际上是一个制造商链接 - 它只是被 OpenCart 命名不佳。OpenCart 仍然知道它是制造商链接，您可以通过与它一起传递的 id 看到它（`manufacturer_id`不是`product_id`）

此外，OC 并不是要重写它的标准 URL，只有产品、类别、制造商（个别制造商页面而不是制造商列表）和信息页面。这适用于我知道的所有版本，所以如果不是你的版本，vQmod 可能有问题，你需要让开发者修复它

我自己编写了一个路线编辑器 mod，不需要进入并破解 vQmod 即可使其工作，因此我了解它的复杂性

# google-apps-script - 作为通过加载 GUI 组件创建的参数传入的不兼容类型。

> ID：14552674
> 
> 赞同：0
> 
> 时间：2013-01-27T21:45:52.083
> 
> 标签：google-apps-script

我在 Google 电子表格中构建的 UI 存在问题。我将首先解释一下它是如何工作的，然后我会解决这个问题。UI 是一个连接 SQL 数据库的相当简单的程序，它允许用户创建新记录、查询、搜索和呈现报告。我已经在 GUI 构建器中创建了所有面板（例如介绍页面、创建记录）。当用户在 UI 中导航时，我用我希望用户看到的新面板替换了一个 Grid。例如，在介绍页面上有一个创建按钮，当用户单击按钮时，介绍面板所在的网格被创建记录面板替换。我为用户查询/搜索数据创建了两种方式。第一种方法是在介绍面板上选择一个数字范围，然后单击查询按钮。这将在我将调用 MainForm 的 GUI 构建面板中查询最后 10 条左右的记录。第二种方法是“搜索”工作。在介绍页面上有一个搜索按钮，当用户点击按钮时，它会进入一个新页面；网格切换到搜索面板。在新页面/面板上，用户可以输入一些参数进行搜索。用户单击搜索按钮后，程序应将搜索结果加载到 MainForm 中，方式与从介绍页面查询时相同。我已将整个功能逐行分开，因此我确信问题与加载面板/组件有关。我的意思是这几行代码。在介绍页面上有一个搜索按钮，当用户点击按钮时，它会进入一个新页面；网格切换到搜索面板。在新页面/面板上，用户可以输入一些参数进行搜索。用户单击搜索按钮后，程序应将搜索结果加载到 MainForm 中，方式与从介绍页面查询时相同。我已将整个功能逐行分开，因此我确信问题与加载面板/组件有关。我的意思是这几行代码。在介绍页面上有一个搜索按钮，当用户点击按钮时，它会进入一个新页面；网格切换到搜索面板。在新页面/面板上，用户可以输入一些参数进行搜索。用户单击搜索按钮后，程序应将搜索结果加载到 MainForm 中，方式与从介绍页面查询时相同。我已将整个功能逐行分开，因此我确信问题与加载面板/组件有关。我的意思是这几行代码。我已将整个功能逐行分开，因此我确信问题与加载面板/组件有关。我的意思是这几行代码。我已将整个功能逐行分开，因此我确信问题与加载面板/组件有关。我的意思是这几行代码。

```
 var Component = app.loadComponent("MainForm");
  var panel = app.createVerticalPanel().setSize("770px", "900px").add(Component);
  app.getElementById("contentGrid").setWidget(0,0, panel); 
```

但是为什么它会在一种情况下加载，而在另一种情况下却没有呢？也不是加载组件的方法，而是返回面板/组件。

总而言之，当我使用查询函数加载组件时，它可以工作，但是当我在搜索函数中加载组件时，我得到错误：作为参数传入的不兼容类型。此外，我将 MainForm 组件加载到其他两个函数中，并且它在大多数情况下都可以正常工作，但有时我会遇到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:09:09.067

我认为你的方法并不理想，`load component`不应该被多次调用。将所有面板放在同一个组件中并利用每个面板的可见性来按需显示/隐藏它们会更有效率。每个面板都应插入垂直面板中，以便在“旧面板”隐藏时“新面板”滑到其位置。

[这篇文章中展示了](https://stackoverflow.com/questions/11661146/replicate-tab-panel-in-gui-builder-google-apps/11669914#11669914)这种方法的一个示例，用于模拟选项卡，并且可以很容易地适应您的需求。

顺便说一句，这种方法也非常快速且响应迅速，因为完整的 UI 从一开始就准备好了；-)

# video - 如何在 Octave 中捕捉视频？

> ID：14552676
> 
> 赞同：6
> 
> 时间：2013-01-27T21:46:00.430
> 
> 标签：video, octave

是否有在**Octave中****捕捉视频**的本地方法？

 **在 Matlab 中，我习惯于使用以下内容（也可能对其他人有用）：

```
a = imaqhwinfo('linuxvideo',1)  # or "imaqhwinfo('winvideo',1)" in Windows
a.SupportedFormats              # check supported formats
vid = videoinput('linuxvideo', 1, 'YUYV_640x480'); # open video stream with one of supported formats

start(vid);                     # start processing video
preview(vid);                   # open preview window

pics = cell(1,20)               # create array to store images from video
for i = 1:20                    
   pause(1);                    # every 1 second ...
   pics{i} = getsnapshot(vid);  # get video frame and save into corresponding position in array
end 
```

但在 Octave 中，与视频相关的功能都不起作用。也可以使用[OpenCV 的 Octave 绑定](http://octave-swig.sourceforge.net/octave-opencv.html)来捕获视频，但我主要是在寻找更*纯粹*和*便携*的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-14T16:29:29.027

安装并加载图像采集包。有关更多信息，请阅读 Wiki：[http ://wiki.octave.org/Image_acquisition_package](http://wiki.octave.org/Image_acquisition_package)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-16T11:55:44.587

如果其他解决方案失败，您可以尝试逐帧捕获。您可以使用 for 循环并将框架添加/绑定在一起。aviread 已经可以捕获帧。至少这是我在其他一切都失败时所做的。**

# php - 使用 Ajax 和 3 个连续的下拉列表，具体取决于彼此

> ID：14552680
> 
> 赞同：2
> 
> 时间：2013-01-27T21:46:40.013
> 
> 标签：php, sql, ajax, drop-down-menu

和平与你同在，我是使用 Ajax 的新手，问题是，我有 3 个连接到数据库的下拉列表，第一个是“姓名”，第二个是“年龄”，第三个是“国家”！因此，我已连接到数据库，并在第一个列表“名称”中从中检索数据，然后使用 Ajax，在选择第一个列表的任何选项并将它们放入名为“年龄”的第二个列表后，我已成功检索到匹配数据，问题是当我使用与第二个名为“age”的列表完全相同的方式将匹配数据检索到名为“country”的第三个列表中时，它不起作用！所以请帮助我，因为我正在使用这个例子来学习 Ajax，然后应用到一个更大的实际项目中！这是代码：-首先，home.php页面：-

```
<?php
include "config.php";
?>
<html> 
<head> 
<script type="text/javascript">
function agematch() {
 if (window.XMLHttpRequest) {
  xmlhttp = new XMLHttpRequest();
} 
 else {
 xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
 }

xmlhttp.onreadystatechange = function() {
  if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {

  document.getElementById('age').innerHTML = xmlhttp.responseText;
  }

} 
xmlhttp.open('GET', 'connection.inc.php?name='+document.ajax.name.value, true );
xmlhttp.send();

}

function countrymatch() {
 if (window.XMLHttpRequest) {
  xmlhttp = new XMLHttpRequest();
} 
 else {
 xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
 }

xmlhttp.onreadystatechange = function() {
  if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {

  document.getElementById('country').innerHTML = xmlhttp.responseText;
  }

} 
xmlhttp.open('GET', 'country.inc.php?age='+document.ajax.age.value, true );
xmlhttp.send();

}

</script>
</head>
<body> 
<form id="ajax" name="ajax" > 
Choose your name : <select name="name" id="name" select="selected"  onchange="agematch();"> <option>  </option> 
 <?php

   $query = "SELECT DISTINCT name FROM info";
   $result = mysql_query($query);
   while($row = mysql_fetch_array($result)){
   echo"<option  value ='".$row[0]."'> '".@$row[0]."'</option>";
                                }   
 ?>
</select>
Age : <select id="age" name="age" onchange="countrymatch();">  </select>
country : <select id="country" name="country"> <option> </option> </select>

</form>
</body>
</html> 
```

现在，第一次 Ajax 调用的页面：-

```
<?php
include "config.php";
echo " <option>  </option> " ;
if(isset( $_GET['name']) ) {
  @$name = $_GET['name'];
  }

  $query = "SELECT age FROM info WHERE name = '".@$name."' "; 
  $result = mysql_query($query);
    while ($query_row = mysql_fetch_array($result)) {

      echo " <option  value ='".$query_row[0]."'> $query_row[0]</option> ";
      }

 ?> 
```

现在，第三个下拉菜单的第二个 Ajax 调用页面：-

```
<?php
include "config.php"; 

  if (isset( $_GET['age']) ) {
     @$age=$_GET['age'];
   }     

  $query = "SELECT country FROM info WHERE name='".@$name."' AND age='".@$age."'  ";
  $result= mysql_query($query);
  while  ($query_row = mysql_fetch_array($result)) {

   echo " <option value = '".$query_row[0]."'> $query_row[0] </option> ";

  }

 ?> 
```

如您所见，这是代码，当然我是通过一个名为“config.php”的页面连接到数据库的，所以我希望您帮我解决这个问题，并将数据库中的数据检索到第三个drop下拉列表“国家”。提前致谢！

好的，Musa 是编辑：-

```
function countrymatch() {
 if (window.XMLHttpRequest) {
  xmlhttp = new XMLHttpRequest();
} 
 else {
 xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
 }

xmlhttp.onreadystatechange = function() {
  if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {

  document.getElementById('country').innerHTML = xmlhttp.responseText;
  }

} 
var age = encodeUriComponent(document.ajax.age.value),
var name = encodeUriComponent(document.ajax.name.value),
xmlhttp.open('GET', 'country.inc.php?age='+age+'&name'+name, true );
xmlhttp.send();

} 
```

并且 ：-

```
<?php
include "config.php";
  if (isset($_GET['age'], $_GET['name']) ) {
     @$age=$_GET['age'];
     @$name = $_GET['name'];
   }     

  $query = "SELECT country from info where name='".@$name."' AND age='".@$age."'  ";
  $result= mysql_query($query);
  while  ($query_row = mysql_fetch_array($result)) {

   echo " <option value = '".$query_row[0]."'> $query_row[0] </option> ";

  }

 ?> 
```

我没有收到任何错误消息，我相信您的观点是正确的，但不幸的是，这个解决方案没有奏效！非常感谢你帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:08:12.913

您没有在第二个 ajax 请求中发送名称，但您的数据库查询需要它，因此您需要在 ajax 请求中发送名称和年龄。另外你没有清理你的输入，你必须始终验证用户输入，我也建议不要使用 mysql_*

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

```
var age = encodeURIComponent(document.ajax.age.value),
var name = encodeURIComponent(document.ajax.name.value),
xmlhttp.open('GET', 'country.inc.php?age='+age+'&name'+name, true ); 
```

```
if (isset($_GET['age'], $_GET['name']) ) {
    $age = $_GET['age'];
    $name = $_GET['name'];
    ...
} 
```

# opengl - 反过来使用带有 OpenGL 的 SDL 窗口

> ID：14552683
> 
> 赞同：1
> 
> 时间：2013-01-27T21:47:07.003
> 
> 标签：opengl, window, sdl

我最近刚刚将我的应用程序/游戏中的所有渲染从 SDL 更改为 OpenGL。我仍然使用 SDL 进行键盘输入、加载图像和创建窗口。

但是由于我只在 OpenGL 中渲染，你认为我应该将窗口更改为 OpenGL 初始化窗口而不是 SDL 窗口。我目前用于 OpenGL 函数的头文件是“SDL_opengl.h”。这会影响事情吗？

如果我这样做有什么好处和坏处？现在感觉这是合乎逻辑的“下一步”，因为我摆脱了所有其他 SDL 渲染代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T23:58:16.987

继续使用 SDL 进行输入和窗口管理。

OpenGL 规范中没有任何规定，因此实际上没有“OpenGL 初始化窗口”之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:56:02.797

正如 genpfault 所说，您应该继续使用 SDL 进行窗口初始化。它比为 OpenGL 渲染初始化窗口的特定于操作系统的方法更干净、更便携。

我还建议从 SDL_opengl.h 切换到 SDL.h 和 gl.h；SDL_opengl.h 中的定义对于基本窗口管理不是必需的，并且它们与其他 OpenGL 库中的定义冲突，例如[GLEW](http://glew.sourceforge.net/)（您可能希望稍后将其用于像素着色器和帧缓冲区）。

# php - 使用 SOAP 返回一个 php xpath 答案

> ID：14552684
> 
> 赞同：0
> 
> 时间：2013-01-27T21:47:10.537
> 
> 标签：php, xml, exception, soap, xpath

我正在尝试向肥皂客户端返回 xpath 答案（我使用 xml 文件作为数据库）。该方法在服务器端调用时工作正常，不幸的是，客户端总是得到一个恼人的“看起来我们没有 XML 文档”错误，这种 [xml 答案](http://pastebin.com/hnmRn5Ja)：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn://localhost/projet/srv" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns2="http://xml.apache.org/xml-soap" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<ns1:getTypesVehiculeResponse>
<return SOAP-ENC:arrayType="SOAP-ENC:Struct[4]" xsi:type="SOAP-ENC:Array">
<item xsi:type="SOAP-ENC:Struct">
<@attributes xsi:type="ns2:Map">
<item>
<key xsi:type="xsd:string">id</key>
<value xsi:type="xsd:string">0</value>
</item>
...
</return>
</ns1:getTypesVehiculeResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我应该使用另一种方式来发送我的 XML 数据库答案而不是直接返回 xpath 答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:13:52.367

`SoapClient`应该消除对 xpath 查询的需要，因为它已经解析了 SOAP XML，但是如果您仍然想使用 xpath，您可以尝试`simplexml`按照[这个答案](https://stackoverflow.com/a/3630000/633406)使用。如果你对命名空间有疑问，[试试这个](https://stackoverflow.com/a/3864690/633406)

# sql - 导出到 Excel - 不允许隐式转换

> ID：14552686
> 
> 赞同：0
> 
> 时间：2013-01-27T21:47:18.023
> 
> 标签：sql, sql-server, excel, insert, oledb

我想创建导出到 Excel 文件。

为此，我使用以下代码：

```
INSERT INTO OPENROWSET('Microsoft.ACE.OLEDB.12.0', 
'Excel 8.0;Database=C:\Temp\65343\file.xls;',
'SELECT group,subgroup,name_product,manufacture,unit,
retail_price,wholesale_price,info FROM [ExportSheet$]') 
VALUES 
('name','name','name','name','name','0.00','0.00',''),
('name','name','name','name','name','0.00','0.00',''); 
```

但我得到这个错误：

> *消息 257，级别 16，状态 3，行 2
> 不允许从数据类型 varchar 到 varbinary 的隐式转换。
> 使用 CONVERT 函数运行此查询。*

请告诉我为什么我有错误以及如何正确编写此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:40:02.403

你的语法对我来说是正确的，所以我有一些观察。

该错误通常意味着您遇到了数据类型转换问题 - 在这种情况下，您的 excel 文件中的一个字段看起来需要一个 varbinary 字段，但正在接收一个 varchar 字段。

如果您将字段限制为一个，例如组，它是否有效？如果是这样，您可以找出哪个领域是罪魁祸首。

或者，您可以使用临时表而不是使用 VALUES 子句：

```
INSERT INTO OPENROWSET('Microsoft.ACE.OLEDB.12.0', 
'Excel 8.0;Database=C:\Temp\65343\file.xls;',
'SELECT group,subgroup,name_product,manufacture,unit,
retail_price,wholesale_price,info FROM [ExportSheet$]') 
SELECT group,subgroup,name_product,manufacture,unit,
retail_price,wholesale_price,info FROM YourTempTable; 
```

不确定这是否会有所帮助，但我从未使用过 INSERT INTO OPENROWSET 明确提供值 - 似乎它应该可以工作。

祝你好运。

# c++ - cin.getline() 在 cin 之后不起作用

> ID：14552688
> 
> 赞同：0
> 
> 时间：2013-01-27T21:47:38.850
> 
> 标签：c++

> **可能重复：**
> [c++ cin 输入不起作用？](https://stackoverflow.com/questions/5877420/c-cin-input-not-working)

我一直在尝试使用 C++ 中的以下代码在整数之后输入一个字符串。

```
#include<iostream>
#include<cstdio>
using namespace std;
int main(){
     int n;
     char inp[10];
     cin>>n;
     //fflush(stdin);
     cin.getline(inp,10);
     cout<<inp;
     return 0;
} 
```

当我编译和运行上面的代码时，程序只提示输入一次并且什么也不打印。我正在使用 g++ 来编译代码。另外，当我取消注释该行时

```
fflush(stdin) 
```

（清除输入缓冲区），程序的o/p保持不变。我不明白这里发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:42:12.740

```
#include<iostream>
#include<cstdio>
using namespace std;

int main()
{

 int n;
 char inp[10];
 cin>>n;
 cin.get();//cin.get(); just waits for enter. more approprate for this would be cin.ignore(); because it will flush the input stream for cin.
 cin.getline(inp,10);
 cout<<inp;
 // cin.get(); you could use this so your program wont return0 and close right away.
return 0;
}//tested in this config it works as desired, good luck 
```

# android - android异步图像url加载

> ID：14552689
> 
> 赞同：0
> 
> 时间：2013-01-27T21:47:46.980
> 
> 标签：android, android-listview, android-asynctask

我有一个自定义 ImageView 子类，我用它来使用 AsyncTask 获取 URL 中的图像。但是，似乎无论我做什么，列表视图填充都会暂停，直到获取图像。

```
public void setImageURL(final String url) {
    // do we have url in the cache?
    Bitmap bitmap = mCache.getBitmap(url);
    if(bitmap == null) {
        new AsyncTask<Void, Void, Bitmap>() {
            protected Bitmap doInBackground(Void... p) {
                Bitmap bm = null;
                try {
                    URL aURL = new URL(url);
                    URLConnection conn = aURL.openConnection();
                    conn.setUseCaches(true);
                    conn.connect();
                    InputStream is = conn.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(is);
                    bm = BitmapFactory.decodeStream(bis);
                    bis.close();
                    is.close();
                } catch(IOException e) {
                    e.printStackTrace();
                }

                if(bm == null) {
                    return null;
                }
                return bm;
            }

            protected void onPostExecute(Bitmap bmp) {
                if(bmp == null) {
                    return;
                }
                mCache.cacheBitmap(url, bmp);
                setImageBitmap(bmp);
            }
        }.execute();
    } else {
        setImageBitmap(bitmap);
    }
} 
```

为什么异步任务应该阻止与列表人口有关的任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:53:05.827

您是否正在启动多个 AsyncTasks？我会将它实现为仅使用 1 个加载所有图像的 AsyncTask。将花费大量时间为每个图像分配和启动新线程。

[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)将帮助您入门。但是请务必考虑诸如 ListView 在滚动时如何重用视图之类的问题。您并不总是有一个简单的 1 视图到 1 位图对。

# c++ - 在 C++11 中访问移动对象时发出警告

> ID：14552690
> 
> 赞同：17
> 
> 时间：2013-01-27T21:47:47.407
> 
> 标签：c++, c++11, warnings, move-semantics

> **可能重复：**
> [我可以对移出的对象做什么？](https://stackoverflow.com/questions/7027523/what-can-i-do-with-a-moved-from-object)

在您调用`std::move`并将结果传递给函数之后，您通常必须假设稍后访问移动的对象将导致未定义的行为。

是否有工具可以检测这些访问并警告您。例如：

```
{
  Widget w;
  foo(std::move(w));
  // w may be undefined at this point

  w.doSomething(); // WARN
} 
```

至少，并`gcc 4.7.2`没有抱怨。`clang 3.2``-Wall`

**更新：**回顾这个问题，关键点是编译器无法确定一个对象在被移动后是否仍然有效。如果提案[N4034: Destructive Move](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4034.pdf)被接受，我希望编译器有更多的选择（但前提是移动是破坏性的）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T21:56:22.077

他们也不应该。搬出班级的行为是你想要的。这不是编译器应该警告的事情。

对于标准库对象，移出的类处于“有效但未指定的状态”。因此，这样做是完全合法的：

```
std::vector<int> v{20, 30, 40};
std::vector<int> v2 = std::move(v);
v = std::vector<int>{50, 60, 70, 80}; 
```

`clear`不在乎向量的当前状态是什么；它只是清除向量。因此，它被重置为已知状态。同样，`operator=`不关心当前状态是什么；它会将其重置为已知状态。

# angularjs - 如何在 Windows 上运行 Testacular？

> ID：14552694
> 
> 赞同：0
> 
> 时间：2013-01-27T21:47:58.663
> 
> 标签：angularjs, karma-runner

在 Windows 上工作（x86 版本，不是 cygwin）

我能够安装 Testacular

npm 列表 -g

```
C:\Users\myName\AppData\Roaming\npm
└─┬ testacular@0.4.0
  etc.... 
```

但是当我运行睾丸得到...

'testacular' 不是内部或外部命令、可运行程序或批处理文件。

我尝试将 bin 添加到路径..

```
SET PATH=%PATH%;C:\Users\myName\AppData\Roaming\npm\node_modules\testacular\bin 
```

但它不起作用，似乎没有可执行文件或批处理文件（testacular.bat、testacular.exe）

我错过了什么？

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:55:41.223

你应该使用`testacular.cmd`:-)

在命令提示符下，只需键入`testacular.cmd`而不是`testacular`. 您必须对 windows 上的许多节点模块执行相同的操作。

# jquery - 为什么 JQuery 热键会多次触发快捷方式

> ID：14552696
> 
> 赞同：1
> 
> 时间：2013-01-27T21:48:02.937
> 
> 标签：jquery, hotkeys, jquery-hotkeys

我有以下代码：

每个快捷方式用于不同的功能，但是当我使用 ctrl+r 时，它会显示 4 次警报。我做错什么了吗？下面的代码对我来说看起来不错...

我正在使用 chrome，但我认为这并不重要

```
$(document).bind('keydown', 'ctrl+r', function (event) {
    alert("should be only once");
    event.preventDefault();
    return false;
});

$(document).bind('keydown', 'ctrl+1', function () {
    //other code
    return false;
});

$(document).bind('keydown', 'ctrl+2', function () {
    //other code
    return false;
});

$(document).bind('keydown', 'ctrl+3', function () {
    //other code
    return false;
}); 
```

编辑：我正在使用 Hotkeys JQuery 插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:13:35.723

确保 JS 没有被多次调用。您可以在回调函数中 unbind(...) 它以查看是否发生了这种情况。

# c++ - 如何知道代码的哪一部分使用了 Glibc

> ID：14552706
> 
> 赞同：0
> 
> 时间：2013-01-27T21:49:31.433
> 
> 标签：c++, linux, glibc

我有一个应用程序，这个应用程序使用 Glibc，但我想在不链接 glibc 的情况下进行编译，我需要删除/更改使用它的代码。我在哪里可以获得 glibc 中定义的函数列表？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T23:15:31.917

您需要 glibc 为您的典型`main`入口点提供启动（例如将 , 设置`argc`到`argv`正确的位置）。

`read`您需要 glibc 来调用系统调用（它提供了围绕, `write`, `open`,`fork`等的“包装器” 。

您需要 glibc 来提供 I/O 功能，例如`printf`, `scanf`, `getchar`, `getc`, `fopen`, `fclose`, 等。

您需要 glibc 提供典型的字符串函数，例如`strcpy`, `strcat`, `strtok`,`strchr`等。

您需要 glibc 提供其他标准功能，`rand`, `srand`, `qsort`, `assert`, `exit`, `setjmp`,`longjmp`等。

总之，如果没有 glibc，您可能无法编写任何有意义的程序。

当然，除非您将 glibc 替换为提供相同功能的其他库。据说uclibc更“轻量级”，因为它针对的是内存更昂贵的嵌入式系统[。](http://www.uclibc.org/)

# python - 嵌套列表引用不起作用

> ID：14552707
> 
> 赞同：1
> 
> 时间：2013-01-27T21:49:33.307
> 
> 标签：python, python-3.x, nested-lists

我是初中的菜鸟。我有一小段代码不起作用：

```
board=[]
temp=[]

for var0 in range(17):
    temp.append('  ')
for var in range(17):
    board.append(temp)
class group:
    def __init__(self):
        self.f=[]
        self.x=[]
        self.y=[]

groupb=[]
groupw=[]

while 1:
    for var0 in range(17):
        for var1 in range(17):
            if var1==16:
                print((board[var0])[16])
            else:
                print((board[var0])[var1],end='')
    move=input()
    move=(move.lower()).split()
    move[1]=int(move[1])
    move[2]=int(move[2])
    if move[0]=='b':
        board[move[1]][move[2]]=' b'
        for var0 in range(len(groupb)):
            if (move[1]-1 in groupb[var0].x or move[1]+1 in groupb[var0].x or move[1] in groupb[var0].x) and (move[2]-1 in groupb[var0].y or move[2]+1 in groupb[var0].y or move[2] in groupb[var0].y):
                (groupb[var0].x).append(move[1])
                (groupb[var0].y).append(move[2])
                temp=1
        if temp!=1:
            groupb.append('')
            groupb[len(groupb)-1]=group()
    elif move[0]=='w':
        board[move[1]][move[2]]=' w'
        for var0 in range(len(groupw)):
            if (move[1]-1 in groupw[var0].x or move[1]+1 in groupw[var0].x or move[1] in groupw[var0].x) and (move[2]-1 in groupw[var0].y or move[2]+1 in groupw[var0].y or move[2] in groupw[var0].y):
                (groupw[var0].x).append(move[1])
                (groupw[var0].y).append(move[2])
        if temp!=1:
            groupw.append('')
            groupw[len(groupb)-1]=group()
    else:
        print('TurnError') 
```

但是每次我尝试运行它时，当我只想要一个字符时，它就会吐出一整列：

```
 b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b                        
     b 
```

谁能告诉我我做错了什么？我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:20:19.210

正如 Dan 所说，答案是将 board.append(temp) 更改为 board.(list(temp))。它反复引用温度。

# ios - 带有 NSFetchedResultsController 的 UITableView 为没有对象的部分保留标题

> ID：14552708
> 
> 赞同：1
> 
> 时间：2013-01-27T21:49:35.903
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobject

我有一堆 NSManagedObjects，它们在 UITableView 中被分成几个部分。

```
[Section Header 0]
[NSManagedObject]
[NSManagedObject]
[NSManagedObject]
[Section Header 1]
[NSManagedObject]
[Section Header 2]
[NSManagedObject]
[NSManagedObject]
[NSManagedObject] 
```

用户可以按部分编辑对象，包括删除它们。假设我删除了`[NSManagedObject]`上面`[Section 1]`的内容。这会更新我的 NSFetchedResultsController 并删除行和部分，包括部分标题。

有没有办法用任何对象保留空白部分？我考虑过放入一些代码来设置节的最小计数，但问题是它不会与 NSFetchedResultsController 同步。添加一个额外的部分只会将其添加到底部，但我想在第一部分之后添加它，无论之后是否有一个或多个部分。

这些对象都是服务器驱动的，所以我想做这样我就不会有很多硬编码的部分。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:06:31.487

您应该在数据模型中包含属性或关系以跟踪这些部分。看到您对用户进行分组，您必须有一个可以在数据中建模的标准。

然后`NSFetchedResultsController`用适当的`sectionNameKeyPath`. 使用 Apple 的普通代码显示部分信息（如果有）。

您在每个部分中实际显示的内容仍然取决于您。（这是您在数据源方法中放入的内容）。但至少你可以有一个一致的部分系统和对象分组。

# assembly - PIC单片机中的银行切换

> ID：14552709
> 
> 赞同：2
> 
> 时间：2013-01-27T21:49:50.620
> 
> 标签：assembly, pic

通常我在每次 GPR 访问之前都会做一次银行，但我发现我有很多不必要的线路。所以，问题是这样的。我对访问不同内存库的子例程进行了一些调用，而不是调用例程。将 GPR 保存在 STATUS 寄存器中是否是一个好主意，以维护当前的银行并在返回之前切换回它，或者这样做的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:35:53.747

有很多方法可以解决这个问题，很大程度上取决于你想变得多么聪明，你想节省多少代码空间，以及你的代码对时间的要求有多高。在尝试节省代码空间/时间和冒着在错误的时间意外进入错误银行的风险之间需要权衡取舍。

我更喜欢这里的安全选项...

我所做的是，对于任何可能改变银行的 Sub，然后我写一个小的“Calling Sub”来备份 GPR 状态。“Calling Sub”然后调用“Real Sub”，它可以随心所欲地改变银行。当“Real Sub”退出时，它返回到“Calling Sub”，然后将 Bank 恢复到原来的状态，然后返回到您的程序循环

**伪代码：**

```
CALL_MYSUB        BACKUP STATUS
                  BACKUP GPR
                  CALL MYSUB
                  RESTORE GPR
                  RESTORE STATUS
                  RETURN 
```

您可以通过上面的方法变得聪明，并编写一个小宏来替换存储和检索代码，从而简化代码的外观，并提高可维护性......它当然使用相同的代码空间，请注意。

**伪代码：**

```
CALL_MYSUB        BACKUP_MACRO
                  CALL MYSUB
                  RESTORE_MACRO
                  RETURN 
```

理论上，如果您可能有两个以上的备份指令和两个还原指令，那么您将创建一个备份例程和一个还原例程，而不是宏，然后调用它们；

**伪代码：**

```
BACKUP_CONTEXT    BACKUP STATUS
                  BACKUP GPR
                  BACKUP OTHER THINGS
                  BACKUP MORE STUFF
                  RETURN

BACKUP_CONTEXT    BACKUP STATUS
                  BACKUP GPR
                  BACKUP OTHER THINGS
                  BACKUP MORE STUFF
                  RETURN

RESTORE_CONTEXT   RESTORE MORE STUFF
                  RESTORE OTHER THINGS
                  RESTORE GPR
                  RESTORE STATUS
                  RETURN

CALL_MYSUB        BACKUP_CONTEXT
                  CALL MYSUB
                  RESTORE_CONTEXT
                  RETURN 
```

当然，您可以将上述内容直接合并到需要它的每个子项中。但我更喜欢上面的方法，因为它允许您在没有备份和恢复的情况下调用子程序，让您的子程序知道它正在尝试做什么，允许您将所有类似的调用放在一个地方，允许您在一个地方进行更改，并明确表明该潜艇将更改 GPR。

这里唯一需要注意的是确保没有太多**嵌套**调用，这当然会溢出堆栈！

我希望这有帮助....

**编辑：**

如果您只需要备份您的 Bank Select Bits 即可，您可以尝试以下方法...

**仅存储银行选择位；**

```
MOVF        STATUS,w        ;Get the Current Bank Select bits
ANDLW       B'01100000'     ;Remove all but the Bank Select bits
MOVWF       TEMP1           ;Store in a Temporary Register 
```

**仅检索银行选择位；**

```
MOVLW       B'10011111'
ANDWF       STATUS,1        ; Clear the Bank Select Bits   
MOVF        TEMP1,w         ; Get the Old Bank Select Bits
XORWF       STATUS,1        ; Restore Old Bank Select Bits 
```

但是，我这里没有任何环境，所以我无法确认这是否 100% 有效，但我认为数学很好！

我还假设您使用的是 16c77，它的 RP1 位于 STATUS 位 6，RP0 位于 STATUS 位 5。

当然，如果您还需要 IRP 位，那么您还需要存储 STAUTS 位 7 - IRP

您还需要确保 TEMP1 存储在 GPR 中，以便它没有银行账户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T00:03:18.777

我建议最简单的方法可能是声明为全局策略，除非另有说明，否则每个例程都会假设 RP0 和 RP1 在进入时是明确的；IRP 设置为适用于 FSR 中加载的任何内容（如果有），否则未指定。在退出时，除非另有说明，否则每个例程都应该保持 RP0 和 RP1 为空，并且可以对 IRP 做任何它想做的事情（尽管如果一个例程永远不会对 IRP 做任何事情，那么记录这一事实可能对它很有用）。

因此，除非使用 FSR，否则“位于”bank 0 中的代码不必对 bank 位做任何事情。访问另一个银行的代码必须在进行任何子程序调用或返回给调用者之前重新选择银行 0。

在某些情况下，使用一些指定不同行为的特殊方法可能很有用，但这个“公式”在许多情况下应该是相当不错的。关键是要有一个大多数方法都遵循的规则，并明确说明任何不使用该规则的方法都被清楚地记录在案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T23:26:27.340

我使用了两个宏：

m_SaveBank 宏 Var

```
clrf Var
btfsc STATUS,RP1
bsf Var,RP1
btfsc STATUS,RP0
bsf Var,RP0 
```

端

m_RestoreBank 宏 Var

```
bcf STATUS,RP1
bcf STATUS,RP0
btfsc Var,RP1
bsf STATUS,RP1
btfsc Var,RP0
bsf STATUS,RP0 
```

端

子程序必须首先保存 STATUS.RP1 和 RP0，然后在退出时恢复它们。W 寄存器保持不变，因为大多数时候承载子程序的数据，除 RP0 和 RP1 之外的 STATUS 位也不受影响。我这样省了十一个字，但我认为没有其他选择。

# filter - 为带有撇号的主题创建 GMail 搜索/过滤器

> ID：14552715
> 
> 赞同：1
> 
> 时间：2013-01-27T21:50:05.420
> 
> 标签：filter, gmail

我正在尝试创建一个 GMail 搜索/过滤器，以识别主题行（任何地方）中带有撇号但遇到困难的邮件（并且认为这应该很简单）。

我试过了：

*   主题：'
*   主题： ”'”
*   主题： \'
*   主题： （'）
*   主题： （\'）
*   主题： （”\'”）
*   主题： '
*   主题： '

任何人都知道如何做到这一点？

# java - SessionContext getBusinessObject 创建新 bean

> ID：14552718
> 
> 赞同：0
> 
> 时间：2013-01-27T21:50:23.753
> 
> 标签：java, jakarta-ee, jboss, ejb-3.0, jboss5.x

我正在使用 jboss `5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221634)`。并且需要获取bean的业务接口。这是事务管理所必需的。所以我有：

```
@Local
public interface MyBeanInterface {
    void transactionalMethod();
}

@Stateless
public class MyBean implements MyBeanInterface {
    @Resource
    private SessionContext context;

    private int aState;

    public void someMethod() {
        aState = 42;
        context.getBusinessObject(MyBeanInterface.class).transactionalMethod();
    }

    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public void transactionalMethod() {
        System.out.println(aState); // 0!!!!!
    }
} 
```

出于某种原因，我没有得到相同的 bean，但是创建了新的 bean。这是灾难性的，因为`transactionalMethod`需要状态变量值才能正确执行。

我在做什么错，或者那是jboss的错误？顺便说一句，有一个错误会影响通过 bean 的类获取业务对象的能力：[https](https://issues.jboss.org/browse/EJBTHREE-2126) ://issues.jboss.org/browse/EJBTHREE-2126 。但是不确定它是否与我的问题有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-10T16:06:49.437

最好的解决方案是这样的：

```
@Stateless
public class MyBean implements MyBeanInterface {

    @Resource private TransactionManager tm;

    private int aState;

    public void someMethod() {
        aState = 42;

        Transaction transaction = tm.suspend();

        transactionalMethod();

        tm.resume(transaction);
    }

    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public void transactionalMethod() {
        System.out.println(aState); // 0!!!!!
    }
} 
```

当您从同一个实例调用已发布的接口方法时，通过 ejb 上下文传递，资源为：

*   如果是@Stateless，则创建一个新实例。
*   如果是@Stateful，则为第一次调用创建一个新会话，然后其他调用与@Singleton 相同。
*   如果是@Singleton，则调用者等待资源被释放，如果它调用自己，则会创建死锁。如果方法带有@Read 注释，则调用自己不会产生任何死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:13:27.327

我没有时间查看语法是否完美，但您可以尝试：

```
InitialContext jndiContext = new InitialContext();
Object ref = jndiContext.lookup("projname/MyBeanInterface/local");
MyBeanInterfaceLocal m = (MyBeanInterfaceLocal) ref; 
```

但是我看到你有一个 SessionContext 字段，所以也许对你来说代码应该有点不同。也许会是：

```
Object ref = SessionContext.lookup("projname/MyBeanInterface/local");
MyBeanInterfaceLocal m = (MyBeanInterfaceLocal) ref; 
```

让我知道这是否有帮助！

# annotations - 在spring security 3中，如何自定义我的@PreAuthorize注解？

> ID：14552719
> 
> 赞同：1
> 
> 时间：2013-01-27T21:50:29.140
> 
> 标签：annotations, spring-security, pre-authentication

这些天我遇到一个问题，我无法弄清楚，所以请帮助我......

我的实体： `Utilisateur` 这是一个法语单词，意思是用户

```
 @Entity
    @Inheritance(strategy = InheritanceType.JOINED)
    public class Utilisateur implements Serializable 
    {
         private static final long serialVersionUID = 1L;
         @Id
         @GeneratedValue(strategy = GenerationType.IDENTITY)
         protected int id;
         protected String login;
         protected String password;
         protected String nom;
         protected String prenom;
         protected String email;
         protected String username;}

    @OneToOne(mappedBy="user", cascade={CascadeType.ALL})
    private Role role;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUsername() {
        return login;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getLogin() {
        return login;
    }

    public void setLogin(String login) {
        this.login = login;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getNom() {
        return nom;
    }

    public void setNom(String nom) {
        this.nom = nom;
    }

    public String getPrenom() {
        return prenom;
    }

    public void setPrenom(String prenom) {
        this.prenom = prenom;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public Role getRole() {
        return role;
    }

    public void setRole(Role role) {
        this.role = role;
    }
} 
```

和一个`Role`实体。

在我的网络应用程序中，有一个控制器可以显示例如有关学生的信息（`Etudiant`法语）

```
@EJB(mappedName = "Etudiant.EtudiantFacade")
    EtudiantFacade etudiantF;

    // Affiche le detail d'un Etudiant  (show the infomations of the student)
    @RequestMapping(value = "/Etudiant/{idEtudiant}/info")
    public ModelAndView detail(@PathVariable String idEtudiant, Model m) {
        m.addAttribute("etudiant",
                etudiantF.trouver(Integer.parseInt(idEtudiant)));
        return new ModelAndView("EtudiantInformation", "null", null);
    } 
```

`CustomUseDetailService`我直接使用实体实现了我自己的`Utilisateur`。

```
 @Override
    public UserDetails loadUserByUsername(String username)
            throws UsernameNotFoundException, DataAccessException {
        // TODO Auto-generated method stub
        System.out.println("!!!!!!!!!!!!!!!!!");
        System.out.println(username);

        boolean enabled = true;
        boolean accountNonExpired = true;
        boolean credentialsNonExpired = true;
        boolean accountNonLocked = true;

            Utilisateur etudiant = etudiantF.trouverParLogin(username);

            return new User(etudiant.getLogin(), etudiant.getPassword(), enabled,accountNonExpired,credentialsNonExpired,accountNonLocked,getAuthorities(etudiant.getRole().getRole()));

    } 
```

我的security.xml如下：

```
<http auto-config="true" use-expressions="true">
        <intercept-url pattern="/app/Login" access="permitAll"/>
        <intercept-url pattern="/app/*" access="hasAnyRole('ROLE_ADMIN','ROLE_USER')"/>
        <form-login login-page="/app/Login" 
            authentication-success-handler-ref="authenticationSuccessHandler"/> 
        <logout logout-url="/app/Logout" logout-success-url="/"/>
    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="customUserDetailsService"/>
    </authentication-manager> 
```

最后我的问题是：对于一个学生，他的id是1，他的用户名是stu1，要控制这个id为1的学生只能访问他自己的页面信息 `/ProjetName/Student/{studentId}/Info` 我该如何编写代码`@PreAuthorize`，我已经看到了spring表单中的文档，有这样的例子`@PreAuthorize(#contract.name = principal.username)`，因为principal中有一个属性username，但是在这里，我需要的是Id，我`@RequestMapping(value = "/Etudiant/{idEtudiant}/info")`用来匹配学生而不是用户名。那么我该如何解决呢？非常感谢...我找不到教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:35:59.297

您可以为 User 类提供自己的实现（只需扩展**org.springframework.security.core.userdetails.User**）。向其添加标识符字段。**然后在loadUserByUsername**方法中设置相应的值：

```
@Override
public UserDetails loadUserByUsername(String username)
    ...
    return new CustomUser(etudiant.getId(), etudiant.getLogin(), etudiant.getPassword(), enabled,accountNonExpired,credentialsNonExpired,accountNonLocked,getAuthorities(etudiant.getRole().getRole()));

} 
```

然后你就可以使用它了：

```
@PreAuthorize(#contract.name = principal.id) 
```

# backbone.js - jsfiddle 会自动导入淘汰赛和骨干吗？

> ID：14552722
> 
> 赞同：0
> 
> 时间：2013-01-27T21:50:55.847
> 
> 标签：backbone.js, knockout.js, jsfiddle

看看这个使用淘汰赛和主干的小提琴，这些库是自动导入的吗？

[骨干和淘汰赛小提琴](http://jsfiddle.net/geekdave/bjUBq/)

```
Code here : 

Name: <input data-bind="value: name" type="text"/><br>
Age: <input data-bind="value: age" type="text"/><br>
Evil: <input type="checkbox" data-bind="checked: evil" /><br>

<button id="foo">Change Model!</button>

// create a plain old backbone model
var backboneModel = new Backbone.Model({
    name: "Montgomery Burns",
    age: 102,
    evil: true
});

// use knockback.js to bridge knockout data-binding with backbone models
// read_only is set to false to make the binding two-way.
// note the use of the "kb" api for knockback.
var viewModel = kb.viewModel(backboneModel, {
    read_only: false
});

// at this point, knockback has given us a viewModel which is compatible
// with the normal knockout api.  so we can use the "ko" api now.
ko.applyBindings(viewModel);

$("#foo").click(function() {
    backboneModel.set ({
        "name": "Lisa Simpson",
        "age": 8,
        "evil": false
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:54:22.100

小提琴的作者使用左侧边栏中的**管理资源功能将它们包含在内。**

# php - 用简单的 html dom 替换结果中的短语和字符

> ID：14552728
> 
> 赞同：0
> 
> 时间：2013-01-27T21:51:24.850
> 
> 标签：php, html, dom

我的代码运行良好，可以使我从在线商店获得商品价格的外部部分，但加载了标准的 html、css 和字母，我只想成为没有“，”或“ABC”的数字，只是像“123”这样的数字”。

这是外部移动商店网站的一部分：

```
<div class="prod-box-separation" style="padding-left:15px;padding-right:15px;text-align:center;padding-top:7px;">
   <div style="color:#cc1515;">
      <div class="price-box">
         <span class="regular-price" id="product-price-47488">
            <span >
               <span class="price">2.443,<sup>00</sup> RON</span>                                                    
            </span>
         </span>
      </div>
   </div>
</div>
<div class="prod-box-separation" style="padding-left:10px;padding-right:10px;">
   <style>
      .delivery {
     display:block;
      }
  </style>
  <p class="availability in-stock">
     <div class="stock_info">Produs in  stoc</div>
     <div class="delivery"><div class="delivery_title">Livrare(in timpul orelor de   program):</div>
     <div class="delivery_item">Bucuresti - BANEASA : imediat</div>
     <div  class="delivery_item">Bucuresti - EROILOR : luni dupa ora 13.00.</div>
     <div  class="delivery_item">CURIER : Marti</div>
  </div>
  </p> 
```

Garanţie: 12 卢尼

这是我的实际代码：

```
<?php
include_once('../simple_html_dom.php');
$dom = file_get_html("http://www.site.com/page.html");
// alternatively use str_get_html($html) if you have the html string already...
foreach ($dom->find('span[class=price]') as $node)
{
echo $node->innertext;
} 
?> 
```

我的结果是这样的：`2.443,<sup>00</sup> RON`但正确的结果将是：`2.443`或`2443`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:57:20.740

你可以这样做：

```
<?php
include_once('../simple_html_dom.php');
$dom = file_get_html("http://www.site.com/page.html");
// alternatively use str_get_html($html) if you have the html string already...
foreach ($dom->find('span[class=price]') as $node)
{
$result = $node->innertext;
$price = explode(",<sup>", $result);
echo $price[0];
} 
?> 
```

# delphi - 使用 INDY/DELPHI 发送邮件，修改值不受限制

> ID：14552735
> 
> 赞同：2
> 
> 时间：2013-01-27T21:52:21.650
> 
> 标签：delphi, indy

我使用以下代码发送带有 INDY 10 组件的电子邮件：

```
 try
    MyNewIndyMessage.From.Address := edFrom.Text;
    MyNewIndyMessage.Recipients.EMailAddresses := edTo.Text;
    MyNewIndyMessage.CCList.EMailAddresses := edCC.Text;
    MyNewIndyMessage.BCCList.EMailAddresses := edBCC.Text;
    MyNewIndyMessage.Subject := edSubject.Text;
    MyNewIndyMessage.Body := edContent.Lines;
    MyIndySMTP.Send(MyNewIndyMessage);
  finally
    MyIndySMTP.Disconnect;
  end; 
```

Indy smtp 要求我在 Message.from.address 中输入一个有效的组织，例如 "myname@companyX.com" ，我想在这里输入和任意字符串，例如 "This mail is Emergency to read"。我可以绕过在我的 INDY SMTP 组件中完成的此类检查吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T00:02:08.430

根据 Internet 消息格式规范 (RFC 2822)，发件人字段必须包含有效邮箱，*通常*为（第 3.4 节）：

> 通常，邮箱由两部分组成：(1) 可选的显示名称，指示可以显示给邮件应用程序用户的收件人（可以是个人或系统）的名称，以及 (2)括在尖括号（“<”和“>”）中的 addr-spec 地址。还有另一种简单的邮箱形式，其中 addr-spec 地址单独出现，没有收件人姓名或尖括号。

这方面的一个例子可能是这样的：

```
John Doe <john.doe@example.com> 
```

正如暗示的那样，邮件客户端通常显示（可选）名称属性（如果存在），如果名称不存在，则显示地址本身。

在 INDY 术语中，TIdEMailAddressItem 具有三个始终同步的属性：

*   `Address`是邮箱的地址规范部分，例如：`john.doe@example.com`
*   `Name`是邮箱的名称部分，例如：`John Doe`
*   `Text`有两个部分，例如：`John Doe <john.doe@example.com>`

您可以更改其中一个，其他的将反映相同的更改。

因此，您可以通过直接设置 Text 属性来做您想做的事情，如下所示：

```
MyNewIndyMessage.From.Text := 'This mail is urgent to read <myname@companyX.com>'; 
```

或者您可能希望分别设置每一项：

```
MyNewIndyMessage.From.Address := 'myname@companyX.com';
MyNewIndyMessage.From.Name := 'This mail is urgent to read'; 
```

综上所述，您可能希望使用该*名称*作为主题（以及更多信息），而不是真正的名称，但这取决于您。

# ruby-on-rails - rails 将外部 url 中的元数据插入表中

> ID：14552736
> 
> 赞同：0
> 
> 时间：2013-01-27T21:52:29.467
> 
> 标签：ruby-on-rails, gem

我有一个用于存储链接的表。我正在尝试使用 pismo gem 从 url 获取元数据，并将其保存到表中。

在我的链接控制器中，我有一个前置过滤器：

```
 def pismo_grab_meta_data
    doc = Pismo::Document.new("http://google.com/")
    @link_title = doc.title
  end 
```

在 new 和 create 动作中调用它。在我看来，我在隐藏字段中传递了实例变量。

```
 <%= f.hidden_field :name, :value => @link_title %> 
```

这在将 url 硬编码为字符串时有效（如上面的 google 示例），但当我将 url 参数传递给它时会失败，如下所示：

```
doc = Pismo::Document.new(params[:url]) 
```

错误：**未定义的方法“gsub！” 对于零：NilClass**

Rails 很新，所以我想我在这里做一些愚蠢的事情。非常欢迎任何帮助！

```
<%= form_for(@link, :html => { "data-behavior" => "submit-form"}) do |f| %>
  <% if @link.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@link.errors.count, "error") %> 
        prohibited this link from being saved:
      </h2>
      <ul>
      <% @link.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <%= f.hidden_field :name, :value => @link_title %>
  <div class="field urlsaver">
    <%= f.label :url %><br />
      <% if params[:link].present? %>
        <%= f.text_field :url, :value => params[:link] %>
      <% else %>
        <%= f.text_field :url %>
      <% end %>
  </div>
  <div class="actions">
    <%= f.submit 'Save', :class => 'btn' %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:49:47.417

您要查找的值应该在 params[:link][:url] 中。将行更改为：

```
doc = Pismo::Document.new(params[:link][:url]) 
```

# java - 创建 ImageButton 时出现 NullPointerException

> ID：14552743
> 
> 赞同：1
> 
> 时间：2013-01-27T21:53:14.507
> 
> 标签：java, android, xml

我有一个刚刚添加到布局中的 ImageButton，但是当我在布局上调用 setContentView 时，我的程序现在崩溃了。查看 logcat，在尝试创建此 ImageButton 时似乎给了我一个 NullPointerException。ic_menu_send.png 位于适当的可绘制文件夹中。这是 ImageButton 的 xml：

```
<ImageButton
    android:id="@+id/imageButton1"
    android:src="@drawable/ic_menu_send"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/enterPassword2"
    android:layout_alignRight="@id/enterPassword1"
    android:layout_alignTop="@id/enterPassword2"
    android:background="@style/AppTheme"
    android:contentDescription="@string/submit_button" /> 
```

这是此 Activity 的 onCreate：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.first_time); // causes nullpointerexception
    EditText enterPassword1 = (EditText)findViewById(R.id.enterPassword1);
    enterPassword1.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            return onEditAction(v);
        }
    });
    EditText enterPassword2 = (EditText)findViewById(R.id.enterPassword2);
    enterPassword2.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            return onEditAction(v);
        }
    });
    /*ImageButton submit1 = (ImageButton)findViewById(R.id.imageButton1);
    submit1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            EditText enterPassword1 = (EditText)findViewById(R.id.enterPassword1);
            onEditAction(enterPassword1);
        }
    });*/ 
```

代码的 ImageButton 部分只是为了测试而被注释掉，但程序崩溃得更早。有谁知道可能导致这种情况的原因？谢谢您的帮助。

编辑：这里是 logcat 日志：

```
01-27 15:52:11.264: E/AndroidRuntime(31195): FATAL EXCEPTION: main
01-27 15:52:11.264: E/AndroidRuntime(31195): java.lang.RuntimeException: Unable to start activity ComponentInfo{us.securecow.nearfieldunlock/us.securecow.nearfieldunlock.FirstTimeActivity}: android.view.InflateException: Binary XML file line #50: Error inflating class android.widget.ImageButton
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.os.Looper.loop(Looper.java:137)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at java.lang.reflect.Method.invokeNative(Native Method)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at java.lang.reflect.Method.invoke(Method.java:511)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at dalvik.system.NativeStart.main(Native Method)
01-27 15:52:11.264: E/AndroidRuntime(31195): Caused by: android.view.InflateException: Binary XML file line #50: Error inflating class android.widget.ImageButton
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.Activity.setContentView(Activity.java:1881)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at us.securecow.nearfieldunlock.FirstTimeActivity.onCreate(FirstTimeActivity.java:19)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.Activity.performCreate(Activity.java:5104)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-27 15:52:11.264: E/AndroidRuntime(31195):    ... 11 more
01-27 15:52:11.264: E/AndroidRuntime(31195): Caused by: java.lang.reflect.InvocationTargetException
01-27 15:52:11.264: E/AndroidRuntime(31195):    at java.lang.reflect.Constructor.constructNative(Native Method)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-27 15:52:11.264: E/AndroidRuntime(31195):    ... 24 more
01-27 15:52:11.264: E/AndroidRuntime(31195): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001}
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.content.res.Resources.loadDrawable(Resources.java:1927)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.view.View.<init>(View.java:3328)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.widget.ImageView.<init>(ImageView.java:114)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.widget.ImageButton.<init>(ImageButton.java:87)
01-27 15:52:11.264: E/AndroidRuntime(31195):    at android.widget.ImageButton.<init>(ImageButton.java:83)
01-27 15:52:11.264: E/AndroidRuntime(31195):    ... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:14:20.307

这是你应该寻找的：

```
01-27 15:52:11.264: E/AndroidRuntime(31195): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001} 
```

尝试删除 @style 行，看看会发生什么，因为你说其他资源已经到位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:18:08.040

堆栈跟踪说明了一切：

> 资源不是可绘制的（颜色或路径）：

根据 Android[文档](http://developer.android.com/reference/android/R.attr.html#background)，背景属性需要 A drawable 或颜色。

完整报价：

> 用作背景的可绘制对象。这可以是对完整可绘制资源的引用（例如 PNG 图像、9-patch、XML 状态列表描述等），也可以是纯色，例如“#ff000000”（黑色）。

样式不符合任何这些标准，因此，您的应用程序在运行时崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T22:12:10.923

该问题与以下情况之一有关：

*   `android:src="@drawable/ic_menu_send"`
*   `android:background="@style/AppTheme"`

很可能是第二个。这些参数需要一种`drawable`资源，其中一个不是`drawable`（如堆栈跟踪所示）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T22:12:21.277

从布局 xml 中删除 "android:background="@style/AppTheme"。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T20:09:23.843

检查您的图像（ic_menu_send）是否在您的项目中的可绘制文件夹下。

我有同样的情况，但我的图像已损坏，当我检查它们时它们不可见。

在我将所有图像复制到drawable forlder下后，一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T22:11:57.723

```
Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050001 a=-1 r=0x7f050001} 
```

嗯……呼……

# cakephp - 设置页面和多编辑行

> ID：14552744
> 
> 赞同：-1
> 
> 时间：2013-01-27T21:53:19.407
> 
> 标签：cakephp

我想为我的 CMS 制作一个这样的配置页面

[http://img4.hostingpics.net/pics/72087272ok.png](http://img4.hostingpics.net/pics/72087272ok.png)

我希望此页面（管理员/设置/索引）将各种设置（ID 1 到 21）带到我的表中，如果发生更改，我可以以这种形式进行更新

经过 3 天不是特别富有成效的研究后，我发现了一些东西。我把我的设置控制器：

```
admin_index public function () {
    if (!empty($this->data)) {
        $this->Setting->saveAll($this->request->data['Setting']);
    } else { 
    $this->request->data['Setting'] = Set::combine($this->Setting->find('all'), 
        '{n}. Setting.id', '{n}. Setting');
    }
} 
```

和我的观点：

```
<?php
echo $this->Form->create('Setting', array ('class' => 'form-horizontal'));

foreach($this->request->data['Setting'] as $key => $value) {
    echo $this->Form->input('Setting.' . $key . '.pair');
    echo $this->Form->input('Setting.' . $key . '.id');
}

echo $this->Form->end(array('class' => 'btn btn-primary', 'label' => 'Save',
     'value' => 'Update!', 'div' => array ('class' => 'form-actions')));
?> 
```

他正在很好地恢复我的所有信息，我什至可以更新。问题是我真的不知道如何才能获得与我的第一个屏幕截图相同的结果。他将所有内容都放在文本区域中，而在某些情况下我想要复选框和/或下拉菜单。

请帮助我或向我解释如何制作一个从我的表中检索配置信息并允许我在不使用 admin/settings/edit/ID 之类的地址的情况下进行编辑的页面

我的表设置是这样的

[http://img4.hostingpics.net/pics/724403settings.png](http://img4.hostingpics.net/pics/724403settings.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:07:21.887

如果您询问如何格式化输出以生成“设置”页面，则需要手动执行或将某种元数据添加到表架构中，例如“field_type”。

现在 Cake 会自动为 boolean 或 tiny int 生成一个复选框，但是由于你有 varchars、ints、texts 等，这对你不起作用（`pair`大概是`varchar`或者`text`允许不同的可能值。

在不告诉 Cake 的情况下，你无法真正自动生成你想要的输出。

一种选择是将 a 添加`field_type`到表中，因此：

```
key            value        field
site_name      My Site      input
site_online    1            checkbox
meta_desc      [some text]  textarea 
```

和类似的东西

```
foreach($settings as $setting) {
  echo $this->Form->{$setting['field']}($setting['key'], 
      array('value' => $setting['value']));
} 
```

可能会做你所追求的。

或者`if($key=='site_name') // output a textbox`

但这并不完全理想。

# javascript - 使用自定义 HTML 标签并用 outerHTML 替换自定义标签好吗？

> ID：14552746
> 
> 赞同：1
> 
> 时间：2013-01-27T21:53:21.590
> 
> 标签：javascript, html

可以定义和使用自定义标签吗？（这不会与未来的 html 标签冲突） - 同时通过更改 outerHTML 替换/呈现这些标签？

我在下面创建了一个演示，它似乎工作正常

```
    <!DOCTYPE HTML>
    <html lang="zh-CN">
    <头部>
        <script type="text/javascript" src="jquery.min.js"></script>
    </head>

    <正文>

    <div id="customtags">
        <c-TextField name="用户名" ></c-TextField> <br/>
        <c-NameField name="name" id="c-NameField"></c-NameField> <br/>
        <c-TextArea name="description" ></c-TextArea> <br/>
        <blahblah ct="d"></blahblah>
    </div>
    </正文>

    <脚本>

    /* 下面的代码用实际的 html 替换 cspa —— 哇，它工作得很好 */    
        函数替换自定义标签（）{
            // cspa 是一个随机术语——实际上并没有任何意义
            var grs = $("*");
            $.each（grs，函数（索引，值）{
                var tg = value.tagName.toLowerCase();
                如果（tg.indexOf（“c-”）==0）{
                    控制台.log（索引）；
                    控制台.log（值）；
                    var obj = $(值);
                    变量 newhtml;
                    if(tg=="c-textfield") {
                        newhtml= '<input type="text" value="'+obj.attr('name')+'"></input>';
                    } 否则 if(tg=="c-namefield") {
                        newhtml= '<input type="text" value="FirstName"></input><input type="text" value="LastName"></input>';
                    } 否则 if(tg=="c-textarea") {
                        newhtml= '<textarea cols="20" rows="3">来自模型的一些描述</textarea>';
                    }
                    obj.context.outerHTML = newhtml;
                }

                z = 对象；
            });
        }

        if(typeof(console)=='undefined' || console==null) { console={}; console.log=function(){}}

        $(document).ready(ReplaceCustomTags);
    </脚本>
    </html>

```

* * *

更新问题：

让我进一步解释一下。请假设在浏览器上启用了 JavaScript - 即应用程序不应该在没有 javascript 的情况下运行。

> 我见过使用自定义属性在指定标签中定义自定义行为的库。例如 Angular.js 大量使用自定义属性。（它也有关于自定义标签的例子）。尽管我的问题不是从技术策略的角度来看 - 我不明白为什么它会在战略上导致代码的可扩展性/可维护性问题。
> 
> > 对于我来说，像 <ns:contact .....> 这样的代码比像 <div custom_type="contact" ....> 这样的代码更具可读性。唯一的区别是自定义标签被忽略并且不呈现，而 div 类型由浏览器呈现
> 
> Angular.js 确实显示了一个自定义标签示例（窗格/选项卡）。在上面的示例中，我使用 outerHTML 替换这些自定义标签 - 虽然我在库中没有看到这样的代码 - 我是否通过使用 outerHTML 替换自定义标签做了一些短视和错误的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:56:27.673

它可能工作得很好，但它可能不是一个好主意。屏幕阅读器和搜索引擎可能很难/不可能阅读您的页面，因为它们可能无法解释 JavaScript。虽然我明白这一点，但最好使用此模板进行开发，然后将其“烘焙”为 HTML，然后再将其放到服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:00:44.610

我想不出你为什么要这样做的理由。

如果您必须从事一个忽略所有常见做法和惯例的其他人编写的项目，您会怎么想？如果他们不再在公司寻找他们为什么以某种方式做某事，会发生什么？

您必须通过 JavaScript 才能使其正常工作这一事实应该是一个巨大的危险信号。除非您有很好的理由，否则请帮自己一个忙并使用预先存在的标签。六个月后，你会记得你为什么那样做吗？

# objective-c - Cocos2D滚球音效

> ID：14552748
> 
> 赞同：2
> 
> 时间：2013-01-27T21:53:47.657
> 
> 标签：objective-c, audio, cocos2d-iphone

我正在尝试为在我的比赛中不断滚动的球创造一种声音效果。目前我只是简单地使用 SimpleAudioEngine 来循环播放球滚动的声音效果，但这听起来非常奇怪，因为文件的音高完全与球的速度无关。

有什么方法可以使用 SimpleAudioEngine 让播放音频文件的频率与球的速度相匹配？还是我必须使用其他类型的音频引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:50:36.147

CDSoundSource 有一个属性“音高”。所以你只需要在更新调用中设置它。

```
CDSoundSource *soundFile = [[SimpleAudioEngine sharedEngine] soundSourceForFile:@"sound.wav"];

...

-(void) update:(ccTime) dt {
   soundFile.pitch = ball.speed; 
} 
```

# c# - Elmah - 检查服务器变量

> ID：14552750
> 
> 赞同：0
> 
> 时间：2013-01-27T21:53:52.477
> 
> 标签：c#, asp.net, elmah

使用[elmah](http://code.google.com/p/elmah/)进行调试时，有没有办法检查异常中的实际变量？

我知道我可以在 querystring/form 部分找到 http-get/post 变量，但是有没有办法在抛出异常的方法中查看变量的当前值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:01:57.817

Elamh 对此没有直接支持，事实上即使 .NET 本身也没有提供这种类型的支持。您可以看到这个先前的问题[Values of local variables in C# after exception?](https://stackoverflow.com/questions/3087595/values-of-local-variables-in-c-sharp-after-exception) 第三方工具在异常期间处理局部变量捕获的方式。

您可以使用此示例并构建自己的异常处理，并通过类似于以下内容的方式向 Elmah 抛出自定义错误类型：

```
 try
 {

   ...
 } 
 catch (Exception ex)
 {
    Elmah.ErrorSignal.FromCurrentContext()
       .Raise(new CustomException(ex,<insert method variables here>));
 } 
```

# macos - 我的 macbook 上的 GLSL 版本与预期的不一样

> ID：14552752
> 
> 赞同：0
> 
> 时间：2013-01-27T21:53:59.930
> 
> 标签：macos, opengl, glsl

我有配备 Radeon HD6750、MacOS 10.7.5 的 MacBook pro，我发现它应该支持 OpenGL 3.2 和 GLSL 1.5 [proof](https://developer.apple.com/graphicsimaging/opengl/capabilities/GLInfo_1075_Core.html)。不幸的是，当我尝试使用着色器（OpenVDB 查看器）构建一个第三方应用程序时，它返回我的硬件不支持`#version 130`. 代码如下：

```
mShader.setVertShader(
    "#version 130\n
    "in vec3 vertex;\n"
    "in vec3 color;\n"
    "out vec4 f_color;\n"
    "void main() {\n"
    "f_color = vec4(color, 1.0);\n"
    "gl_Position =  gl_ModelViewProjectionMatrix * vec4(vertex, 1.0);}\n");
//check that it is shader and add source
glCompileShader(mVertShader);

char buffer[256];
int l = 0;
glGetShaderInfoLog(mVertShader, 256, &l, buffer);
if(GL_NO_ERROR != glGetError()) throw "Error: Unable to compile vertex shader."; 
```

我安装了 OpenGL 扩展查看器，它告诉我着色语言版本是 1.20，OpenGL 版本是 2.1（完全支持，3.2 中的一些功能可用）。如果我的硬件能够支持更新的版本，我不想使用 GLSL 1.2。您知道我的驱动程序/硬件出了什么问题以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:33:18.870

您必须告诉像素格式使用 OpenGL 3.2（或核心 opengl）。

```
NSOpenGLPixelFormatAttribute attribute[] = 
{
    NSOpenGLPFAOpenGLProfile, NSOpenGLProfileVersion3_2Core,
    //You can add other attributes here
    0
};

NSOpenGLPixelFormat *pixelFormat = [[NSOpenGLPixelFormat alloc] initWithAttributes:attribute];
[self setPixelFormat:pixelFormat]; 
```

**编辑：** 旁注，我很确定 OpenGL Extension Viewer 允许您在将使用 OpenGL 3.2 的某个地方使用 Core OpenGL。

# java - 不同数组之间切换的算子，内部更精准

> ID：14552757
> 
> 赞同：0
> 
> 时间：2013-01-27T21:54:23.180
> 
> 标签：java, arrays, if-statement

我正在为一个程序编写一个脚本，并且我正在尝试添加一个功能，如果客户端检测到正在发送的某个字符串，并执行响应中指定的操作。

这是我的问题，我试图得到它，这样当它说任何带有“这里”的东西时，它就会移动到一个新的瓷砖阵列！那么，如果发送消息，有没有办法让脚本转到下一个数组？

这是我的代码，我将在下面更好地解释我的问题：

```
@ScriptDetails(author = "iSully", category = "Firemaking", description = "Burns Your  Willow Logs So You Don't Have To!", name = "iFire - Willows", version = 1.1)
public class iFire extends Script implements Painter, LoopTask {

private static int logs;
private static final int tinderbox = 591;
private int loopCounter = 0;
private static final int fire = 2732;
private static final int ID_BANKBOOTH = 2213;
private FontMetrics FONTMETRICS = null;
private final Timer RUNTIME = new Timer();
private String STATE = "";
private int Burnt = 0;
private int XP = 0;
public boolean guiWait = true;
gui g = new gui();

Tile[] toFire1 = new Tile[] { new Tile(2722, 3493, 0),
        new Tile(2725, 3489, 0), new Tile(2725, 3485, 0),
        new Tile(2734, 3486, 0) };

Tile[] fire1ToBank = new Tile[] { new Tile(2711, 3486, 0),
        new Tile(2716, 3484, 0), new Tile(2721, 3486, 0),
        new Tile(2725, 3489, 0), new Tile(2722, 3493, 0) };

Tile[] toFire2 = new Tile[] { new Tile(2721, 3493, 0), new Tile(2723, 3488, 0), new Tile(2720, 3484, 0), 
        new Tile(2715, 3483, 0), new Tile(2710, 3483, 0), new Tile(2708, 3483, 0) };

Tile[] toFire3 = new Tile[] { new Tile(2722, 3493, 0), new Tile(2725, 3489, 0), new Tile(2721, 3486, 0), 
        new Tile(2716, 3485, 0), new Tile(2711, 3485, 0), new Tile(2706, 3485, 0), 
        new Tile(2706, 3484, 0) };

Tile[] fire3ToBank = new Tile[] { new Tile(2683, 3484, 0), new Tile(2688, 3484, 0), new Tile(2695, 3484, 0), 
        new Tile(2701, 3484, 0), new Tile(2706, 3484, 0), new Tile(2711, 3485, 0), 
        new Tile(2716, 3485, 0), new Tile(2721, 3485, 0), new Tile(2724, 3489, 0), 
        new Tile(2721, 3493, 0) };

Tile[] fire2ToBank = new Tile[] { new Tile(2680, 3482, 0), new Tile(2686, 3482, 0), new Tile(2691, 3482, 0), 
        new Tile(2696, 3484, 0), new Tile(2701, 3485, 0), new Tile(2706, 3485, 0), 
        new Tile(2711, 3485, 0), new Tile(2716, 3485, 0), new Tile(2721, 3485, 0), 
        new Tile(2723, 3490, 0), new Tile(2721, 3493, 0) };

Tile[] toFire4 = new Tile[] { new Tile(2721, 3493, 0), new Tile(2724, 3489, 0), new Tile(2721, 3485, 0), 
        new Tile(2716, 3484, 0), new Tile(2711, 3484, 0), new Tile(2708, 3485, 0) };

Tile[] fire4ToBank = new Tile[] { new Tile(2682, 3484, 0), new Tile(2688, 3484, 0), new Tile(2695, 3484, 0), 
        new Tile(2700, 3484, 0), new Tile(2705, 3483, 0), new Tile(2710, 3483, 0), 
        new Tile(2716, 3483, 0), new Tile(2721, 3482, 0), new Tile(2722, 3487, 0), 
        new Tile(2721, 3492, 0), new Tile(2720, 3493, 0) };

private ArrayList<Strategy> strategy = new ArrayList<Strategy>();

protected boolean onExecute() {
    strategy.add(new a1());
    provide(strategy);
    g.setVisible(true);

    while (guiWait == true) {
        BotGUI.log("Starting up....");
        sleep(10000);
    }
    return (true);
}

public void paint(Graphics g) {
    if (FONTMETRICS == null) {
        FONTMETRICS = g.getFontMetrics();
        RUNTIME.start();
    }
    drawGradientText(g, "Runtime: " + RUNTIME.getElapsedTime(), 15, 200,
            Color.red);
    drawGradientText(g, "State: " + STATE, 15, 218, Color.red);
    drawGradientText(g, "Logs Burnt: " + Burnt + "", 15, 236, Color.red);

}

public class a1 extends Strategy {

    public boolean isValid() {
        BotGUI.log("Script Started!");
        return true;

    }

    public void run() {
        Camera.setPitch(true);

    }
}

protected void onFinish() {
    BotGUI.log("Script Stopped! Thanks for using iFire by iSully!");
    BotGUI.log("Please leave feedback on the Parabot forum");
}

public int loop() {
    bank();
    toFire1();
    lightFires();
    toBank1();
    bank();
    toFire2();
    lightFires();
    toBank2();
    bank();
    toFire3();
    lightFires();
    toBank3();
    bank();
    toFire4();
    lightFires();
    toBank4();
    loopCounter++;
    return 1000;
}

void toBank1() {
    STATE = "Walking To Bank";
    Path path = new Path(fire1ToBank);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(fire1ToBank).traverse();
        }
    }

}

void toBank2() {
    STATE = "Walking To Bank";
    Path path = new Path(fire2ToBank);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(fire2ToBank).traverse();
        }
    }

}

void toFire1() {
    STATE = "Walking To Burning Path #1";
    Path path = new Path(toFire1);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(toFire1).traverse();
            if(toFire1.equals(2732)){
                toFire2();
            }
        }
    }

}

void toFire2() {
    STATE = "Walking To Burning Path #2";
    Path path = new Path(toFire2);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(toFire2).traverse();
        }if(toFire2.equals(2732)){
            toFire3();
        }
    }

}
void toBank3() {
    STATE = "Walking To Bank";
    Path path = new Path(fire3ToBank);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(fire3ToBank).traverse();
        }
    }

}

void toFire3() {
    STATE = "Walking To Burining Location #3";
    Path path = new Path(toFire3);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(toFire3).traverse();
        }if(toFire3.equals(2732)){
            toFire4();
        }
    }

}

void toFire4() {
    STATE = "Walking To Burining Location #4";
    Path path = new Path(toFire4);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(toFire4).traverse();
        }if(toFire4.equals(2732)){
            toFire2();
        }
    }

}

void toBank4() {
    STATE = "Walking To Bank";
    Path path = new Path(fire4ToBank);
    while (!path.hasReached()) {
        while (!Players.getMyPlayer().isMoving()) {
            Walking.getPath(fire4ToBank).traverse();
        }
    }

}

void closeBank() {
    if (Walking.isRunEnabled() == false) {
        Time.sleep(1000); // 1600
        Mouse.hop(460, 41);
        Time.sleep(500); // 900
        Mouse.click(460, 41, true);
        Time.sleep(500); // 1000
    }
}

void bank() {
    GameObject bankBooth = GameObjects.getNearest(ID_BANKBOOTH);
    if (!bankBooth.isOnScreen()) {
        Camera.turnTo(bankBooth);
    }

    while (!Bank.isOpen()) {
        bankBooth.interact("Use-quickly");
        Time.sleep(2000);
    }

    while (!Inventory.isFull()) {
        Bank.withdraw(logs, 27);
        Time.sleep(500);
    }

}

private boolean isLighting() {
    return Players.getMyPlayer().getAnimation() != -1;
}

void lightFires() {
    STATE = "Lighting Fires";
    while (Inventory.contains(logs)) {
        if (isLighting() == false) {
            Inventory.getItem(tinderbox).interact("Use");
            Inventory.getItem(logs).interact("Use Tinderbox with");
            Burnt++;
            Time.sleep(3000);
        } else {
            Time.sleep(4500);
        }
    }

}

void useRun() {
    if (Walking.isRunEnabled() == false) {
        Time.sleep(1000);
        Mouse.hop(710, 485);
        Time.sleep(500);
        Mouse.click(710, 485, true);
        Time.sleep(1000);
        Mouse.hop(625, 270);
        Time.sleep(500);
        Mouse.click(625, 270, true);
        Time.sleep(500);
        Mouse.hop(650, 185);
        Time.sleep(1000);
        Mouse.click(650, 185, true);
        Time.sleep(random(750, 1250));
    }
}

public void drawGradientText(Graphics g, String text, int x, int y, Color c) {
    Graphics2D g2 = (Graphics2D) g;
    Color color3 = new Color(51, 51, 51, 205);
    Font font1 = new Font("Arial", 0, 12);
    g.setFont(font1);
    FONTMETRICS = g.getFontMetrics();
    Rectangle textBox = new Rectangle(x, y - g.getFont().getSize(),
            (int) FONTMETRICS.getStringBounds(text, g).getWidth() + 8,
            (int) FONTMETRICS.getStringBounds(text, g).getHeight() + 5);
    Paint defaultPaint = g2.getPaint();
    g2.setPaint(new RadialGradientPaint(new Point.Double(textBox.x
            + textBox.width / 2.0D, textBox.y + textBox.height / 2.0D),
            (float) (textBox.getWidth() / 2.0D),
            new float[] { 0.5F, 1.0F }, new Color[] {
                    new Color(color3.getRed(), color3.getGreen(), color3
                            .getBlue(), 175),
                    new Color(0.0F, 0.0F, 0.0F, 0.8F) }));
    g.fillRect(textBox.x, textBox.y + 12, textBox.width, textBox.height);
    g2.setPaint(defaultPaint);
    g.setColor(Color.WHITE);
    g.drawRect(textBox.x, textBox.y + 12, textBox.width, textBox.height);
    g.setColor(Color.WHITE);
    g.drawString(text, x + 4, y + 15);
    for (int i = 0; i < text.length(); i++) {
        if (Character.isDigit(text.charAt(i))) {
            g.setColor(new Color(255, 255, 255));
            g.drawString("" + text.charAt(i),
                    x + FONTMETRICS.stringWidth(text.substring(0, i)) + 4,
                    y + 15);
        }
    }
}

public class Timer {
    long millis;

    /**
     * Starts the timer
     */
    public void start() {
        millis = System.currentTimeMillis();
    }

    /**
     * Resets the timer
     */
    public void reset() {
        millis = 0;
    }

    /**
     * Determines if timer is running
     * 
     * @return <b>true</b> if timer is running
     */
    public boolean isRunning() {
        return millis != 0;
    }

    /**
     * Generates string based on HH:MM:SS
     * 
     * @return String
     */
    public String getElapsedTime() {
        long elapsedTime = System.currentTimeMillis() - millis;
        String format = String.format("%%0%dd", 2);
        elapsedTime = elapsedTime / 1000;
        String seconds = String.format(format, elapsedTime % 60);
        String minutes = String.format(format, (elapsedTime % 3600) / 60);
        String hours = String.format(format, elapsedTime / 3600);
        String time = hours + ":" + minutes + ":" + seconds;
        return time;
    }

    /**
     * Calculates Experience per hour based on timer
     * 
     * @param Gained
     *            experience
     * @return Experience per hour
     */
    public int getEXPHour(int xpgained) {
        return (int) ((xpgained) * 3600000D / (System.currentTimeMillis() - millis));
    }

}

public void messageRecieved(String message) {
    if (message.toLowerCase().contains("burn")) {
        Burnt++;
        if(message.toLowerCase().contains("here")){

        }
    }
} 
```

好的，所以在我的脚本中，除了一个数字外，我有多个相同的数组，例如：toFire1、toFire2、toFire3、toFire4、fire1ToBank、fire2ToBank、fire3ToBank、fire4ToBank。现在，我不想让脚本做的是，在方法“public void messageRecieved”（在底部）中，我不想让它移动到我拥有的下一个图块数组列表。我将使用哪种运算符使其移动到下一个数组？请记住，这个脚本运行在一个循环中，所以我不能让它每次都从 toFire1 到 toFire2 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:01:00.743

在 Java 中，我会使用多维数组。所以，而不是使用：

```
Tile[] toFire1 = ...
Tile[] toFire2 = ...
Tile[] toFire3 = ... 
```

我建议改用这个：

```
Tile[][] toFire = {{ new Tile(2722, 3493, 0), new Tile(2725, 3489, 0), new Tile(2725, 3485, 0), new Tile(2734, 3486, 0)},  // was toFire1
                   { new Tile(2721, 3493, 0), new Tile(2723, 3488, 0), new Tile(2720, 3484, 0), new Tile(2715, 3483, 0), new Tile(2710, 3483, 0), new Tile(2708, 3483, 0) }, // was toFire2
                   { new Tile(2722, 3493, 0), new Tile(2725, 3489, 0), new Tile(2721, 3486, 0), new Tile(2716, 3485, 0), new Tile(2711, 3485, 0), new Tile(2706, 3485, 0), new Tile(2706, 3484, 0) }} // was toFire3 
```

以此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:58:42.220

每当您需要在变量名称上使用数字后缀时，请将此作为提示，您应该改用适当的数据结构（例如，数组或列表）来存储值的集合。

所以：使用数组来存储数组，而不是单个变量。然后，您可以简单地使用数字索引来标识当前数组，并将其递增*。*这也应该有助于简化和[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)代码的其他部分，比如`loop()`方法。

# java - 模型周围的相机移动

> ID：14552758
> 
> 赞同：1
> 
> 时间：2013-01-27T21:54:23.287
> 
> 标签：java, opengl, camera

我想让我的相机在模型旋转时移动到模型后面，就像在第三人称视角游戏中一样——让它“看起来”总是在模型的背面。我提供了一个框架，因此语法可能与普通的 opengl 有点不同。我使用标准相机

`Mat4 mv = MatrixMath.lookAt(this.eyeX,this.eyeY,this.eyeZ,this.at,this.up);`

并旋转我试过的相机

`this.mouseRotation += 20.0f;
this.eyeX = (float) Math.sin(this.mouseRotation / 180.0f * 3.14f) * 2.0f; this.eyeZ = (float) Math.cos(this.mouseRotation / 180.0f * 3.14f) * 2.0f;`

mouseRotation 是模型所在的角度，因此显然相机也应该移动到位于“圆”上 20 度的位置。但取而代之的是，对象围绕自身旋转，并且相机进行圆周运动，但不是围绕模型，而是在模型旁边，仍然看着同一个点。

任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:51:53.360

从您的示例中，我相信简短的答案是将`this.at`（应该是您的对象的位置）添加到您的`this.eye`中，以便眼睛相对于对象定位。

更详细地说，假设您的对象的位置在`this.at`，并且您希望相机在一定距离处跟随对象，例如“d”在对象“后面”。如果你有一个指向物体前面的单位向量（即长度为 1.0 的向量），那么`this.at - d`应该是相机的位置（即`this.eye`）。为了让相机围绕对象旋转，首先对“d”应用旋转（在上面的示例中，您似乎正在围绕“Y”轴旋转[因为您只修改 eyeX 和 eyeZ]），以便

```
this.eye = this.at - rotation(Y) * d; 
```

# ios - iOS UILabel 不同大小的文本动态加载？

> ID：14552759
> 
> 赞同：0
> 
> 时间：2013-01-27T21:54:23.753
> 
> 标签：ios, uilabel

例如，我有固定宽度的标签，带有 4 个字的文本和固定的字体大小。但是当4（小）字句子“这是我的车”和其他4（大）字句子“大象最美丽的动物”时，字体大小相同。如此小的 4 个单词句子将调整为固定标签宽度，但较大的单词句子“大象最美丽的动物”将导致 UILabel 文本中的问题

如何动态计算句子单词的大小并调整要在 UIlabel 中固定的文本字体大小。

请指导...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:02:37.463

可能您正在寻找该[`adjustsFontSizeToFitWidth`物业](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/doc/uid/TP40006797-CH3-SW8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:02:39.833

在界面生成器中单击标签并设置最小字体大小。如果它不在界面生成器中，请执行此操作

```
[Label setAdjustsLetterSpacingToFitWidth:YES];
[Label setMinimumScaleFactor:2];
[Label setAdjustsFontSizeToFitWidth:YES]; 
```

这些会根据句子的长度缩小字体大小。第一个收紧字母间距，第二个将字体缩小 2。第三个调整字体大小。

# computer-science - 计算机科学中符号幅度系统的加法

> ID：14552771
> 
> 赞同：1
> 
> 时间：2013-01-27T21:55:59.507
> 
> 标签：computer-science

我很难理解有符号幅度系统中的加法。我读了维基百科，我的笔记，但我仍然不明白。

例如：`1100 1001 + 1111 1111`在有**符号幅度**的 8 位系统中添加了什么。我知道如果操作数的符号位相同，我们只需添加幅度。但结果会与 2 的补码系统中的加法不同。

如果符号位不同怎么办？那么结果的标志是什么？

这是一个例子：

```
- 1 | 101 1100
+ 0 | 100 0010
  --------------
- 1 | 001 1010 
```

结果的符号是`1`因为第一个操作数的幅度更大？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:07:27.337

这正是您手动添加的方式：如果符号相同，则添加幅度；它们是否不同，检查哪个具有较大的量级（即结果的符号），并从较大的量级中减去较小的量级。

# encryption - 长键和数据大小相同

> ID：14552772
> 
> 赞同：1
> 
> 时间：2013-01-27T21:56:13.747
> 
> 标签：encryption, cryptography

我正在尝试制作对称加密算法。我的密钥是 256 位，块大小和生成的密文也是 256 位。由于密钥、明文和密文的大小相同，是否有缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:04:58.447

不要*将*自制的密码算法用于任何值得保护的事情。这是一个复杂的领域，你做梦也想不到的技术是饼干的常规做法。周围有很多经过时间考验和专家审查的算法，请使用其中一种（在查找已知弱点和可能的建议之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:53:34.640

大多数（如果不是全部）[块密码](https://en.wikipedia.org/wiki/Block_cipher)假设消息大小是块大小的倍数，就像你的一样。AFAIK 并没有内在的缺点，它使处理数据变得更加容易。如果您不想以块为单位处理数据，则需要[流密码](https://en.wikipedia.org/wiki/Stream_cipher)。

正如@vonbrand 所提到的，您**永远不**应该使用这种自定义密码来加密任何类型的敏感数据，因为它**会**被轻易破解。如果您只想拥有一个工作块密码，那么您正在寻找[AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)，这是不可破解的，就顶级大学所知。

# phpdoc - phpDocumentor 2.0 页面级 DocBlock - 它在哪里？

> ID：14552777
> 
> 赞同：3
> 
> 时间：2013-01-27T21:56:35.957
> 
> 标签：phpdoc

我有一组类，每个类都在自己的文件中。我添加了适当的 DocBlocks，以便在构建文档时不会收到错误或警告。这是一个非常简化的示例：

```
<?php
/**
 * Page level description.
 */

/**
 * Short class description.
 *
 * Longer description on what this class is all about.
 */
class Test {
    // a bunch of code
}
?> 
```

当我在此类上运行 phpdoc 时，页面级 DocBlock 不会出现在生成的 HTML 中的任何位置。

原因可能是因为 2.0 版仍处于 Alpha 阶段。如果事实上我错过了什么，有人可以告诉我我错过了什么吗？

顺便说一句，我确实在试图找到答案方面做了功课。我在 2 个月前发现[了这篇文章](https://stackoverflow.com/questions/13411636/phpdocumentor-page-level-docstrings)，但它引用了 phpDocumentor 的早期版本，并且看起来 OP 并没有指定它是否令人满意地回答了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:29:53.050

> [...] 如果页面级 DocBlock 包含 @package 标记，则它是文件中的第一个 DocBlock。[...]

```
<?php
/**
 * Page-level DocBlock
 * @package pagepackage
 */
/**
 * Define DocBlock
 */
define("ahhhh","Now the Page-level DocBlock is for the page, and the Define DocBlock for the define");
?> 
```

参考： http: [//manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_elements.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_elements.pkg.html)

# python - django/BeautifulSoup 错误与字典

> ID：14552778
> 
> 赞同：1
> 
> 时间：2013-01-27T21:56:38.900
> 
> 标签：python, django, dictionary, beautifulsoup

我正在尝试报废一个网站，报废的结果是我按预期得到了一个字典列表，但是当我尝试过滤字典时出现错误。当我使用 BeautifulSoup 时，我得到一个错误，但是当我将字典输出复制并粘贴到一个变量中时，我没有得到任何错误。如果我在这个问题中使用了错误的术语，我提前道歉。我是编程和堆栈溢出的新手

```
import urllib2
from BeautifulSoup import  BeautifulSoup
url = ("http://mlb.mlb.com/lookup/json/named.sport_hitting_composed.bam?game_type='R'&sport_code='mlb'&sport_code='aaa'&sport_code='aax'&sport_code='afa'&sport_code='afx'&sport_code='asx'&sport_code='rok'&sort_by='season_asc'&player_id=405395&sport_hitting_composed.season=2013")
p = urllib2.urlopen(url)
soup = BeautifulSoup(p) 
```

我得到的结果如下：

```
{"sport_hitting_composed":{"copyRight":" Copyright 2013 MLB Advanced Media, L.P.  Use of any content on this page acknowledges agreement to the terms posted here http://gdx.mlb.com/components/copyright.txt  ","sport_career_hitting":{"queryResults":{"created":"2013-01-27T15:53:40","totalSize":"4","row":[{"hr":"475","gidp":"251","sac":"1","team_count":"2","sport_code":"mlb","rbi":"1434","tb":"4206","sport_id":"1","bb":"1027","avg":".325","slg":".608","ops":"1.022","hbp":"82","g":"1859","d":"505","so":"780","sport":"MLB","sf":"74","h":"2246","cs":"36","obp":".414","t":"15","ao":"2089","r":"1376","go_ao":"0.95","sb":"92","player_id":"405395","ab":"6919","ibb":"267","go":"1988"},{"hr":"0","gidp":"0","sac":"0","team_count":"1","sport_code":"aaa","rbi":"2","tb":"4","sport_id":"11","bb":"1","avg":".214","slg":".286","ops":".552","hbp":"0","g":"3","d":"1","so":"2","sport":"AAA","sf":"0","h":"3","cs":"0","obp":".267","t":"0","ao":"0","r":"1","go_ao":"","sb":"1","player_id":"405395","ab":"14","ibb":"0","go":""},{"hr":"2","gidp":"3","sac":"1","team_count":"1","sport_code":"afa","rbi":"10","tb":"39","sport_id":"13","bb":"7","avg":".284","slg":".481","ops":".822","hbp":"0","g":"21","d":"8","so":"8","sport":"A (Adv)","sf":"0","h":"23","cs":"1","obp":".341","t":"1","ao":"0","r":"11","go_ao":"","sb":"1","player_id":"405395","ab":"81","ibb":"0","go":""},{"hr":"17","gidp":"10","sac":"0","team_count":"1","sport_code":"afx","rbi":"84","tb":"223","sport_id":"14","bb":"38","avg":".324","slg":".565","ops":".953","hbp":"5","g":"109","d":"32","so":"37","sport":"A (Full)","sf":"2","h":"128","cs":"4","obp":".389","t":"6","ao":"0","r":"62","go_ao":"","sb":"2","player_id":"405395","ab":"395","ibb":"7","go":""}]}},"sport_hitting_tm":{"queryResults":{"created":"2013-01-27T15:53:40","totalSize":"15","row":[{"hr":"0","gidp":"0","sac":"0","sport_code":"aaa","rbi":"2","tb":"4","sport_id":"11","slg":".286","bb":"1","avg":".214","league_short":"Pacific Coast","ops":".552","team_full":"Memphis Redbirds","hbp":"0","g":"3","league_full":"Pacific Coast League","d":"1","team_abbrev":"MEM","so":"2","sport":"AAA","league_id":"112","team_short":"Memphis","sf":"0","team_seq":"1","league":"PCL","h":"3","cs":"0","obp":".267","t":"0","ao":"0","season":"2000","r":"1","go_ao":"","sb":"1","player_id":"405395","ab":"14","ibb":"0","team_id":"235","go":""},{"hr":"2","gidp":"3","sac":"1","sport_code":"afa","rbi":"10","tb":"39","sport_id":"13","slg":".481","bb":"7","avg":".284","league_short":"Carolina","ops":".822","team_full":"Potomac Cannons","hbp":"0","g":"21","league_full":"Carolina League","d":"8","team_abbrev":"POT","so":"8","sport":"A (Adv)","league_id":"122","team_short":"Potomac","sf":"0","team_seq":"2","league":"CAR","h":"23","cs":"1","obp":".341","t":"1","ao":"0","season":"2000","r":"11","go_ao":"","sb":"1","player_id":"405395","ab":"81","ibb":"0","team_id":"436","go":""},{"hr":"17","gidp":"10","sac":"0","sport_code":"afx","rbi":"84","tb":"223","sport_id":"14","slg":".565","bb":"38","avg":".324","league_short":"Midwest","ops":".953","team_full":"Peoria Chiefs","hbp":"5","g":"109","league_full":"Midwest League","d":"32","team_abbrev":"PEO","so":"37","sport":"A (Full)","league_id":"118","team_short":"Peoria","sf":"2","team_seq":"3","league":"MID","h":"128","cs":"4","obp":".389","t":"6","ao":"0","season":"2000","r":"62","go_ao":"","sb":"2","player_id":"405395","ab":"395","ibb":"7","team_id":"443","go":""},{"hr":"37","gidp":"21","sac":"1","sport_code":"mlb","rbi":"130","tb":"360","sport_id":"1","slg":".610","bb":"69","avg":".329","league_short":"National","ops":"1.013","team_full":"St. Louis Cardinals","hbp":"9","g":"161","league_full":"National League","d":"47","team_abbrev":"STL","so":"93","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"7","team_seq":"1","league":"NL","h":"194","cs":"3","obp":".403","t":"4","ao":"162","season":"2001","r":"112","go_ao":"0.92","sb":"1","player_id":"405395","ab":"590","ibb":"6","team_id":"138","go":"149"},{"hr":"34","gidp":"20","sac":"0","sport_code":"mlb","rbi":"127","tb":"331","sport_id":"1","slg":".561","bb":"72","avg":".314","league_short":"National","ops":".955","team_full":"St. Louis Cardinals","hbp":"9","g":"157","league_full":"National League","d":"40","team_abbrev":"STL","so":"69","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"4","team_seq":"1","league":"NL","h":"185","cs":"4","obp":".394","t":"2","ao":"163","season":"2002","r":"118","go_ao":"1.09","sb":"2","player_id":"405395","ab":"590","ibb":"13","team_id":"138","go":"177"},{"hr":"43","gidp":"13","sac":"0","sport_code":"mlb","rbi":"124","tb":"394","sport_id":"1","slg":".667","bb":"79","avg":".359","league_short":"National","ops":"1.106","team_full":"St. Louis Cardinals","hbp":"10","g":"157","league_full":"National League","d":"51","team_abbrev":"STL","so":"65","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"5","team_seq":"1","league":"NL","h":"212","cs":"1","obp":".439","t":"1","ao":"158","season":"2003","r":"137","go_ao":"1.02","sb":"5","player_id":"405395","ab":"591","ibb":"12","team_id":"138","go":"161"},{"hr":"46","gidp":"21","sac":"0","sport_code":"mlb","rbi":"123","tb":"389","sport_id":"1","slg":".657","bb":"84","avg":".331","league_short":"National","ops":"1.072","team_full":"St. Louis Cardinals","hbp":"7","g":"154","league_full":"National League","d":"51","team_abbrev":"STL","so":"52","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"9","team_seq":"1","league":"NL","h":"196","cs":"5","obp":".415","t":"2","ao":"183","season":"2004","r":"133","go_ao":"0.93","sb":"5","player_id":"405395","ab":"592","ibb":"12","team_id":"138","go":"170"},{"hr":"41","gidp":"19","sac":"0","sport_code":"mlb","rbi":"117","tb":"360","sport_id":"1","slg":".609","bb":"97","avg":".330","league_short":"National","ops":"1.039","team_full":"St. Louis Cardinals","hbp":"9","g":"161","league_full":"National League","d":"38","team_abbrev":"STL","so":"65","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"3","team_seq":"1","league":"NL","h":"195","cs":"2","obp":".430","t":"2","ao":"176","season":"2005","r":"129","go_ao":"0.90","sb":"16","player_id":"405395","ab":"591","ibb":"27","team_id":"138","go":"158"},{"hr":"49","gidp":"20","sac":"0","sport_code":"mlb","rbi":"137","tb":"359","sport_id":"1","slg":".671","bb":"92","avg":".331","league_short":"National","ops":"1.102","team_full":"St. Louis Cardinals","hbp":"4","g":"143","league_full":"National League","d":"33","team_abbrev":"STL","so":"50","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"3","team_seq":"1","league":"NL","h":"177","cs":"2","obp":".431","t":"1","ao":"178","season":"2006","r":"119","go_ao":"0.75","sb":"7","player_id":"405395","ab":"535","ibb":"28","team_id":"138","go":"133"},{"hr":"32","gidp":"27","sac":"0","sport_code":"mlb","rbi":"103","tb":"321","sport_id":"1","slg":".568","bb":"99","avg":".327","league_short":"National","ops":".997","team_full":"St. Louis Cardinals","hbp":"7","g":"158","league_full":"National League","d":"38","team_abbrev":"STL","so":"58","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"8","team_seq":"1","league":"NL","h":"185","cs":"6","obp":".429","t":"1","ao":"167","season":"2007","r":"99","go_ao":"0.98","sb":"2","player_id":"405395","ab":"565","ibb":"22","team_id":"138","go":"163"},{"hr":"37","gidp":"16","sac":"0","sport_code":"mlb","rbi":"116","tb":"342","sport_id":"1","slg":".653","bb":"104","avg":".357","league_short":"National","ops":"1.114","team_full":"St. Louis Cardinals","hbp":"5","g":"148","league_full":"National League","d":"44","team_abbrev":"STL","so":"54","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"8","team_seq":"1","league":"NL","h":"187","cs":"3","obp":".462","t":"0","ao":"159","season":"2008","r":"100","go_ao":"0.92","sb":"7","player_id":"405395","ab":"524","ibb":"34","team_id":"138","go":"147"},{"hr":"47","gidp":"23","sac":"0","sport_code":"mlb","rbi":"135","tb":"374","sport_id":"1","slg":".658","bb":"115","avg":".327","league_short":"National","ops":"1.101","team_full":"St. Louis Cardinals","hbp":"9","g":"160","league_full":"National League","d":"45","team_abbrev":"STL","so":"64","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"8","team_seq":"1","league":"NL","h":"186","cs":"4","obp":".443","t":"1","ao":"187","season":"2009","r":"124","go_ao":"0.87","sb":"16","player_id":"405395","ab":"568","ibb":"44","team_id":"138","go":"162"},{"hr":"42","gidp":"23","sac":"0","sport_code":"mlb","rbi":"118","tb":"350","sport_id":"1","slg":".596","bb":"103","avg":".312","league_short":"National","ops":"1.011","team_full":"St. Louis Cardinals","hbp":"4","g":"159","league_full":"National League","d":"39","team_abbrev":"STL","so":"76","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"6","team_seq":"1","league":"NL","h":"183","cs":"4","obp":".414","t":"1","ao":"189","season":"2010","r":"115","go_ao":"0.89","sb":"14","player_id":"405395","ab":"587","ibb":"38","team_id":"138","go":"168"},{"hr":"37","gidp":"29","sac":"0","sport_code":"mlb","rbi":"99","tb":"313","sport_id":"1","slg":".541","bb":"61","avg":".299","league_short":"National","ops":".906","team_full":"St. Louis Cardinals","hbp":"4","g":"147","league_full":"National League","d":"29","team_abbrev":"STL","so":"58","sport":"MLB","league_id":"104","team_short":"St. Louis","sf":"7","team_seq":"1","league":"NL","h":"173","cs":"1","obp":".366","t":"0","ao":"179","season":"2011","r":"105","go_ao":"1.15","sb":"9","player_id":"405395","ab":"579","ibb":"15","team_id":"138","go":"205"},{"hr":"30","gidp":"19","sac":"0","sport_code":"mlb","rbi":"105","tb":"313","sport_id":"1","slg":".516","bb":"52","avg":".285","league_short":"American","ops":".859","team_full":"Los Angeles Angels","hbp":"5","g":"154","league_full":"American League","d":"50","team_abbrev":"LAA","so":"76","sport":"MLB","league_id":"103","team_short":"LA Angels","sf":"6","team_seq":"1","league":"AL","h":"173","cs":"1","obp":".343","t":"0","ao":"188","season":"2012","r":"85","go_ao":"1.04","sb":"8","player_id":"405395","ab":"607","ibb":"16","team_id":"108","go":"195"}]}},"sport_career_hitting_agg":{"queryResults":{"created":"2013-01-27T15:53:40","totalSize":"2","row":[{"hr":"475","gidp":"251","sac":"1","team_count":"2","sport_code":"mlb","rbi":"1434","tb":"4206","sport_id":"1","bb":"1027","avg":".325","slg":".608","ops":"1.022","hbp":"82","g":"1859","d":"505","so":"780","sport":"MLB","sf":"74","h":"2246","cs":"36","obp":".414","t":"15","ao":"2089","r":"1376","go_ao":"0.95","sb":"92","player_id":"405395","ab":"6919","ibb":"267","go":"1988"},{"hr":"19","gidp":"13","sac":"1","team_count":"3","sport_code":"min","rbi":"96","tb":"266","sport_id":"21","bb":"46","avg":".314","slg":".543","ops":".920","hbp":"5","g":"133","d":"41","so":"47","sport":"Minors","sf":"2","h":"154","cs":"5","obp":".378","t":"7","ao":"0","r":"74","go_ao":"","sb":"4","player_id":"405395","ab":"490","ibb":"7","go":""}]}},"sport_hitting_agg":{"queryResults":{"created":"2013-01-27T15:53:40","totalSize":"13","row":[{"hr":"19","gidp":"13","sac":"1","team_count":"3","sport_code":"min","rbi":"96","tb":"266","sport_id":"21","bb":"46","avg":".314","slg":".543","ops":".920","hbp":"5","g":"133","d":"41","so":"47","sport":"Minors","sf":"2","h":"154","cs":"5","obp":".378","t":"7","ao":"0","season":"2000","r":"74","go_ao":"","sb":"4","player_id":"405395","ab":"490","ibb":"7","go":""},{"hr":"37","gidp":"21","sac":"1","team_count":"1","sport_code":"mlb","rbi":"130","tb":"360","sport_id":"1","bb":"69","avg":".329","slg":".610","ops":"1.013","hbp":"9","g":"161","d":"47","so":"93","sport":"MLB","sf":"7","h":"194","cs":"3","obp":".403","t":"4","ao":"162","season":"2001","r":"112","go_ao":"0.92","sb":"1","player_id":"405395","ab":"590","ibb":"6","go":"149"},{"hr":"34","gidp":"20","sac":"0","team_count":"1","sport_code":"mlb","rbi":"127","tb":"331","sport_id":"1","bb":"72","avg":".314","slg":".561","ops":".955","hbp":"9","g":"157","d":"40","so":"69","sport":"MLB","sf":"4","h":"185","cs":"4","obp":".394","t":"2","ao":"163","season":"2002","r":"118","go_ao":"1.09","sb":"2","player_id":"405395","ab":"590","ibb":"13","go":"177"},{"hr":"43","gidp":"13","sac":"0","team_count":"1","sport_code":"mlb","rbi":"124","tb":"394","sport_id":"1","bb":"79","avg":".359","slg":".667","ops":"1.106","hbp":"10","g":"157","d":"51","so":"65","sport":"MLB","sf":"5","h":"212","cs":"1","obp":".439","t":"1","ao":"158","season":"2003","r":"137","go_ao":"1.02","sb":"5","player_id":"405395","ab":"591","ibb":"12","go":"161"},{"hr":"46","gidp":"21","sac":"0","team_count":"1","sport_code":"mlb","rbi":"123","tb":"389","sport_id":"1","bb":"84","avg":".331","slg":".657","ops":"1.072","hbp":"7","g":"154","d":"51","so":"52","sport":"MLB","sf":"9","h":"196","cs":"5","obp":".415","t":"2","ao":"183","season":"2004","r":"133","go_ao":"0.93","sb":"5","player_id":"405395","ab":"592","ibb":"12","go":"170"},{"hr":"41","gidp":"19","sac":"0","team_count":"1","sport_code":"mlb","rbi":"117","tb":"360","sport_id":"1","bb":"97","avg":".330","slg":".609","ops":"1.039","hbp":"9","g":"161","d":"38","so":"65","sport":"MLB","sf":"3","h":"195","cs":"2","obp":".430","t":"2","ao":"176","season":"2005","r":"129","go_ao":"0.90","sb":"16","player_id":"405395","ab":"591","ibb":"27","go":"158"},{"hr":"49","gidp":"20","sac":"0","team_count":"1","sport_code":"mlb","rbi":"137","tb":"359","sport_id":"1","bb":"92","avg":".331","slg":".671","ops":"1.102","hbp":"4","g":"143","d":"33","so":"50","sport":"MLB","sf":"3","h":"177","cs":"2","obp":".431","t":"1","ao":"178","season":"2006","r":"119","go_ao":"0.75","sb":"7","player_id":"405395","ab":"535","ibb":"28","go":"133"},{"hr":"32","gidp":"27","sac":"0","team_count":"1","sport_code":"mlb","rbi":"103","tb":"321","sport_id":"1","bb":"99","avg":".327","slg":".568","ops":".997","hbp":"7","g":"158","d":"38","so":"58","sport":"MLB","sf":"8","h":"185","cs":"6","obp":".429","t":"1","ao":"167","season":"2007","r":"99","go_ao":"0.98","sb":"2","player_id":"405395","ab":"565","ibb":"22","go":"163"},{"hr":"37","gidp":"16","sac":"0","team_count":"1","sport_code":"mlb","rbi":"116","tb":"342","sport_id":"1","bb":"104","avg":".357","slg":".653","ops":"1.114","hbp":"5","g":"148","d":"44","so":"54","sport":"MLB","sf":"8","h":"187","cs":"3","obp":".462","t":"0","ao":"159","season":"2008","r":"100","go_ao":"0.92","sb":"7","player_id":"405395","ab":"524","ibb":"34","go":"147"},{"hr":"47","gidp":"23","sac":"0","team_count":"1","sport_code":"mlb","rbi":"135","tb":"374","sport_id":"1","bb":"115","avg":".327","slg":".658","ops":"1.101","hbp":"9","g":"160","d":"45","so":"64","sport":"MLB","sf":"8","h":"186","cs":"4","obp":".443","t":"1","ao":"187","season":"2009","r":"124","go_ao":"0.87","sb":"16","player_id":"405395","ab":"568","ibb":"44","go":"162"},{"hr":"42","gidp":"23","sac":"0","team_count":"1","sport_code":"mlb","rbi":"118","tb":"350","sport_id":"1","bb":"103","avg":".312","slg":".596","ops":"1.011","hbp":"4","g":"159","d":"39","so":"76","sport":"MLB","sf":"6","h":"183","cs":"4","obp":".414","t":"1","ao":"189","season":"2010","r":"115","go_ao":"0.89","sb":"14","player_id":"405395","ab":"587","ibb":"38","go":"168"},{"hr":"37","gidp":"29","sac":"0","team_count":"1","sport_code":"mlb","rbi":"99","tb":"313","sport_id":"1","bb":"61","avg":".299","slg":".541","ops":".906","hbp":"4","g":"147","d":"29","so":"58","sport":"MLB","sf":"7","h":"173","cs":"1","obp":".366","t":"0","ao":"179","season":"2011","r":"105","go_ao":"1.15","sb":"9","player_id":"405395","ab":"579","ibb":"15","go":"205"},{"hr":"30","gidp":"19","sac":"0","team_count":"1","sport_code":"mlb","rbi":"105","tb":"313","sport_id":"1","bb":"52","avg":".285","slg":".516","ops":".859","hbp":"5","g":"154","d":"50","so":"76","sport":"MLB","sf":"6","h":"173","cs":"1","obp":".343","t":"0","ao":"188","season":"2012","r":"85","go_ao":"1.04","sb":"8","player_id":"405395","ab":"607","ibb":"16","go":"195"}]}}}} 
```

所以我得到了一个字典列表。如果我尝试过滤列表，则会收到错误消息：

```
soup['sport_hitting_composed']    
Traceback (most recent call last):                                                                                                                                                                   
File "<stdin>", line 1, in <module>
File "build/bdist.macosx-10.8-intel/egg/BeautifulSoup.py", line 613, in __getitem__
KeyError: 'sport_hitting_composed' 
```

如果我复制并粘贴整个汤输出，让我们说一个变量 p，我可以过滤列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:15:14.037

你得到的不是字典也不是列表，而是一个[json](http://en.wikipedia.org/wiki/JSON)对象。要获得 python 数据结构，您必须先对其进行解码。为此，有一个内置的[json 模块](http://docs.python.org/2/library/json.html)：

```
import urllib2
import json
url = ("http://mlb.mlb.com/lookup/json/named.sport_hitting_composed.bam?game_type='R'&sport_code='mlb'&sport_code='aaa'&sport_code='aax'&sport_code='afa'&sport_code='afx'&sport_code='asx'&sport_code='rok'&sort_by='season_asc'&player_id=405395&sport_hitting_composed.season=2013")
res = urllib2.urlopen(url)
data = json.load(res)  # type(data) --> dict
print data[u'sport_hitting_composed'] 
```

# menu - wxpython - 菜单交互

> ID：14552779
> 
> 赞同：1
> 
> 时间：2013-01-27T21:56:41.817
> 
> 标签：menu, wxpython

我在使用菜单系统时遇到问题 - 我在此处（如下）有一个基本示例，显示了我遵循的基本菜单示例；具体来说，我的问题是如何从使用菜单选择中做出决定，我不确定如何将用户选择与菜单选择进行交互？有人能指出我正确的方向吗，或者最好给出一个简短的例子——比如从菜单输入数据并显示这个？

谢谢

```
import wx

class myFrame(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id,'Menu', size=(300,200))
        panel = wx.Panel(self)

        status     = self.CreateStatusBar()
        menubar    = wx.MenuBar()
        firstMenu  = wx.Menu() 
        secondMenu = wx.Menu()

        # create files
        firstMenu.Append(wx.NewId(), 'Save Data'  , 'Save data')        
        firstMenu.Append(wx.NewId(), 'Open Data..', 'Open a new window') 
        secondMenu.Append(wx.NewId(),'Configure..', 'Input Data here')
        # append to menu
        menubar.Append(firstMenu, 'File')
        menubar.Append(secondMenu,'Options')
        # 
        self.SetMenuBar(menubar)

if( __name__ == '__main__' ):
    app = wx.PySimpleApp()
    frame = myFrame(parent=None, id=-1)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:11:09.973

你必须绑定`wx.EVT_MENU`事件。有关更多示例，请参阅 wxPython 演示。在你的情况下，这会是这样的：

```
import wx

SAVE_DATA = wx.NewId()
OPEN_DATA = wx.NewId()
CONFIGURE = wx.NewId()

class myFrame(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id,'Menu', size=(300,200))
        panel = wx.Panel(self)

        status     = self.CreateStatusBar()
        menubar    = wx.MenuBar()
        firstMenu  = wx.Menu() 
        secondMenu = wx.Menu()

        # create files
        firstMenu.Append(SAVE_DATA, 'Save Data'  , 'Save data')        
        firstMenu.Append(OPEN_DATA, 'Open Data..', 'Open a new window') 
        secondMenu.Append(CONFIGURE,'Configure..', 'Input Data here')
        # append to menu
        menubar.Append(firstMenu, 'File')
        menubar.Append(secondMenu,'Options')
        # 
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.SaveData, id=SAVE_DATA)
        self.Bind(wx.EVT_MENU, self.OpenData, id=OPEN_DATA)
        self.Bind(wx.EVT_MENU, self.Configure, id=CONFIGURE)

    def SaveData(self, e):
        print("Save")

    def OpenData(self, e):
        print("Open")

    def Configure(self, e):
        print("Config")

if( __name__ == '__main__' ):
    app = wx.PySimpleApp()
    frame = myFrame(parent=None, id=-1)
    frame.Show()
    app.MainLoop() 
```

# javascript - onclick 属性与 eventListeners

> ID：14552797
> 
> 赞同：5
> 
> 时间：2013-01-27T21:59:28.527
> 
> 标签：javascript, jquery, html, events

我正在重写几年前创建的网站的代码，我想知道处理元素上的点击事件的最有效方法是什么？

我有一个带有编辑链接的项目列表，它们都是用`onclick="..."`HTML 属性编写的。那样更好还是我应该使用`$.bind()`或`addEventListener`处理它？最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:08:12.480

使用所谓的[unobtrusive javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)被认为是最佳实践。这意味着您将 HTML 的布局与元素的行为分开。因此，不是使用混合元素结构和行为的 onclick 属性，而是在标记中布局 DOM 结构，然后通过 javascript 附加事件处理程序。

这意味着使用 javascript 附加事件处理程序被认为是最佳实践，如下所示：

```
<html>
   <script>
        ... bind event handlers to your DOM and set behaviours here
   </script>
   <body>
       .... layout your DOM here
    </body>
<html> 
```

这对于长期代码的可维护性和可扩展性具有优势。这种方法非常适用于 jQuery 等 javascript 库。

在性能方面，您可以通过使用智能缓存策略通过不显眼的 javascript 方法获得性能提升。

有关不显眼的 javascript 的更多信息，请参见[此处](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:02:31.430

`addEventListener`或者它的 jQuery 版本`on`\`bind`是最佳实践，因为它将可视部分 HTML 与功能部分 javascript 分开。

*分道扬镳*。

如果代码已经写好了，我不会改变它，这并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T22:03:18.607

很多人会不鼓励使用，`onclick`因为“如果你想添加另一个 onclick 事件怎么办？” - 就我个人而言，我从来没有遇到过这个问题，但我可以理解。

如果您没有将链接用于单个`click`事件以外的任何内容，那么`onclick`很好。但是，如果您希望它是防弹的，您可能需要`addEventListener`. 我实际上有我自己的`addEvent`/ `fireEvent`/`removeEvent`三个函数来跟踪事件并为我处理浏览器的不一致（`window.event`例如，引入），而且效果很好。

# android - 无法在 ListView 中选择其内容由数组适配器设置的项目

> ID：14552799
> 
> 赞同：0
> 
> 时间：2013-01-27T21:59:51.960
> 
> 标签：android, android-listview

我无法在 ListView 上选择项目。我使用自定义适配器来设置 ListView 的内容。我已经设置了 ListView 的 OnItemClickListener。然而，它没有回应。我感谢你的帮助。这是我的代码：

列表项（connections.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="6dip" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.90"
        android:orientation="vertical" >
        <TextView
        android:id="@+id/connname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:text="@string/acc1" />
    <TextView
        android:id="@+id/conntype"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"    
        android:textSize="9sp"    
        android:text="@string/acctype1" />
    </LinearLayout>

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

包含 ListView (groupconnections.xml) 的屏幕：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dip"  
        android:layout_marginBottom="5dip"
        android:orientation="vertical"
        android:id="@+id/textOperLayout">
        <TextView
            android:id="@+id/connectionsLabel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/connections"
            android:textColor="@color/conn_text"
            android:textSize="25sp"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:paddingLeft="15dp" 
            android:background="@color/conn_back"/>

        <EditText
            android:id="@+id/searchEditText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/searchhint"
            android:layout_marginTop="10dp"
            android:inputType="textPersonName" />
    </LinearLayout>

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="100dip"  
        android:layout_marginBottom="50dip"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_above="@+id/textOperLayout"
        android:id="@+id/listviewlayout">
        <ListView
            android:id="@+id/connectionlist"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:choiceMode="singleChoice"  />
    </LinearLayout>

    <Button
        android:id="@+id/addConnCommitButton"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginLeft="15dp"
        android:text="@string/commitToAdd" />

</RelativeLayout> 
```

相关活动（AddMoreConnections.xml）：

```
public class AddMoreConnections extends Activity implements OnItemClickListener{

    private ListView mainListView ;  
    private ArrayAdapter<AbstractHolder> listAdapter ; 
    private TextView searchConnTextView;
    private Button commitButton;
    private ArrayList<AbstractHolder> connlist;
    private ArrayList<AbstractHolder> listNotOnView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Generate list View from ArrayLis 

        setContentView(R.layout.groupconnections);  

        addListenerOnSearchConnTextView();
        //Initialize properties   
        mainListView = (ListView) findViewById( R.id.connectionlist );  
        mainListView.setOnItemClickListener(this);

        // Create and populate a List of planet names.
        listNotOnView = new ArrayList<AbstractHolder>();
        connlist = new ArrayList<AbstractHolder>(5);
        Iterator<AbstractHolder> iter = SocialRssModel.holders.values().iterator();
        while(iter.hasNext())
            connlist.add(iter.next());

        // Create ArrayAdapter using the planet list.  
        listAdapter = new CustomAdapter(this,
                R.layout.connlist, connlist);
        mainListView.setAdapter( listAdapter );

    }
    public void addListenerToFinishButton(){
        commitButton = (Button) findViewById(R.id.addConnCommitButton);
        commitButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

            }
        });
    }
    public void addListenerOnSearchConnTextView(){
        searchConnTextView = (TextView) findViewById(R.id.searchEditText);
        searchConnTextView.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                int listNotOnViewsize = listNotOnView.size();
                int connlistsize = connlist.size();

                for(int i= 0; i < connlistsize; i++){
                    if(!connlist.get(i).connNameContains(s.toString())){
                        listNotOnView.add(connlist.remove(i));
                        i--;
                        connlistsize--;
                    }
                }
                for(int i=0; i < listNotOnViewsize; i++){
                    if(listNotOnView.get(i).connNameContains(s.toString())){
                        connlist.add(listNotOnView.remove(i));
                        i--;
                        listNotOnViewsize--;
                    }
                }
                ((CustomAdapter) listAdapter).updateList(connlist);
                listAdapter.notifyDataSetChanged();

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {                
            }

            @Override
            public void afterTextChanged(Editable s) {              
            }
        });
    }
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        AbstractHolder temp = (AbstractHolder)mainListView.getItemAtPosition(arg2);
        Intent i = new Intent(this, CategoryContentViewerController.class);
        Bundle b = new Bundle();
        b.putInt("AbstractHolderKey", temp.getId());
        i.putExtras(b);
        startActivity(i);
        finish();
    }
    private class CustomAdapter extends ArrayAdapter<AbstractHolder> {

          private ArrayList<AbstractHolder> connectionList;

          public CustomAdapter(Context context, int textViewResourceId, ArrayList<AbstractHolder> connList) {
              super(context, textViewResourceId, connList);
              this.connectionList = new ArrayList<AbstractHolder>();
              this.connectionList.addAll(connList);
          }
          public void updateList(ArrayList<AbstractHolder> connList){
              connectionList.clear();
              connectionList.addAll(connList);
          }
          private class ViewHolder {
              TextView name;
              TextView acctype;
              CheckBox sel;
          }

          @Override
          public View getView(int position, View convertView, ViewGroup parent) {

              ViewHolder holder = null;
              Log.v("ConvertView", String.valueOf(position));

              if (convertView == null) {
                  LayoutInflater vi = (LayoutInflater)(((Activity)this.getContext()).getSystemService(Context.LAYOUT_INFLATER_SERVICE));
                  convertView = vi.inflate(R.layout.connlist, null);

                  holder = new ViewHolder();
                  holder.name = (TextView) convertView.findViewById(R.id.connname);
                  holder.acctype = (TextView) convertView.findViewById(R.id.conntype);
                  holder.sel = (CheckBox) convertView.findViewById(R.id.checkBox1);
                  convertView.setTag(holder);

              } 
              else {
                  holder = (ViewHolder) convertView.getTag();
              }

              AbstractHolder conn = connectionList.get(position);
              holder.name.setText(conn.getName());
              holder.acctype.setText(conn.getConntype());
              holder.sel.setChecked(conn.isSelected());
              holder.sel.setTag(conn);

              return convertView;

          }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:37:59.237

它与connections.xml 中的复选框项目相关，即列表行项目。如果我删除复选框，相关的听众会响应。我认为，可能认为不需要`setItemOnClickListener(..)`方法，因为每一行都有一个复选框。或者这是一个错误。

# python - 无法让自定义 DNS 服务器在 Python 中工作

> ID：14552801
> 
> 赞同：0
> 
> 时间：2013-01-27T22:00:27.360
> 
> 标签：python, sockets, dns, urllib2, httplib

我在让 python 使用自定义 dns 服务器时遇到了真正的麻烦。我已经按照这个[告诉 urllib2 使用自定义 DNS](https://stackoverflow.com/questions/2236498/tell-urllib2-to-use-custom-dns/2237040#2237040) 如果我没有指定 self.host 和 self.port，它将通过而不会阻塞。

这是代码：

```
import urllib2
import httplib
import socket
class MyHTTPConnection (httplib.HTTPConnection):
    def connect (self):
        if self.host == 'www.porn.com':
            self.host = '208.67.222.123' #OpenDNS FamilyShield
            self.port = 53
        self.sock = socket.create_connection ((self.host, self.port))
class MyHTTPHandler (urllib2.HTTPHandler):
    def http_open (self, req):
        return self.do_open (MyHTTPConnection, req)

opener = urllib2.build_opener(MyHTTPHandler)
urllib2.install_opener (opener)
f = urllib2.urlopen ('http://www.porn.com/videos/anime-toon.html')
data = f.read ()
print data 
```

我不断收到“raise BadStatusLine(line)”错误

错误日志：

```
Traceback (most recent call last):
  File "K:\Desktop\rte\dns2.py", line 16, in <module>
    f = urllib2.urlopen ('http://www.porn.com/videos/anime-toon.html')
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 394, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 412, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "K:\Desktop\rte\dns2.py", line 12, in http_open
    return self.do_open (MyHTTPConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1170, in do_open
    r = h.getresponse(buffering=True)
  File "C:\Python27\lib\httplib.py", line 1027, in getresponse
    response.begin()
  File "C:\Python27\lib\httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "C:\Python27\lib\httplib.py", line 371, in _read_status
    raise BadStatusLine(line)
BadStatusLine: '' 
```

编辑：继续isedev响应，我以错误的方式去做。

似乎没有向 urllib2 注册名称服务器的更改

```
import dns.resolver
import urllib2

resolver = dns.resolver.Resolver()
resolver.nameservers = ['208.67.222.123']
answer = resolver.query('www.porn.com','A')
web_url = 'http://www.porn.com/videos/anime-toon.html'
req1 = urllib2.Request(web_url)
req1.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3')
response1 = urllib2.urlopen(req1)
html=response1.read()
print html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:15:17.503

我认为您误解了您所指的“自定义 DNS”答案中正在执行的操作。该解决方案中给出的示例实际上并未设置自定义 DNS 服务器 - MyResolver 类仅作为示例给出，并为“news.bbc.co.uk”执行硬编码的名称到 IP。

所以你的代码实际上正在做的是将HTTP请求重定向到'www.porn.com'（端口80）到OpenDNS Family Shield DNS服务器（端口53）......这显然会导致你得到的错误.

所以你需要做的是替换：

```
if self.host == 'www.porn.com':
    self.host = '208.67.222.123' #OpenDNS FamilyShield
    self.port = 53 
```

使用实际直接针对所选 DNS 服务器解析“www.porn.com”的代码（例如使用 dnspython）。

假设您已经安装了 dnspython 包，您可以执行以下操作：

```
import urllib2
import httplib
import socket
import dns.resolver

class MyHTTPConnection (httplib.HTTPConnection):
    def connect (self):
        if self.host == 'www.porn.com':
            resolver = dns.resolver.Resolver()
            resolver.nameservers = ['208.67.222.123']
            answer = resolver.query(self.host,'A')
            self.host = answer.rrset.items[0].address
        self.sock = socket.create_connection ((self.host, self.port))

class MyHTTPHandler (urllib2.HTTPHandler):
    def http_open (self, req):
        return self.do_open (MyHTTPConnection, req)

opener = urllib2.build_opener(MyHTTPHandler)
urllib2.install_opener (opener)
f = urllib2.urlopen ('http://www.porn.com/videos/anime-toon.html')
data = f.read ()
print data 
```

此代码返回“404 - 未找到”，网络跟踪显示对“hit-adult.opendns.com”的 HTTP 请求，这是“www.porn.com”在使用“208.67.222.123”名称服务器时解析的内容：

```
dig @208.67.222.123 www.porn.com A
;; ANSWER SECTION:
www.porn.com.           0       IN      A       67.215.65.130

nslookup 67.215.65.130
130.65.215.67.in-addr.arpa      name = hit-adult.opendns.com. 
```

以上只是一个例子。真正的代码需要错误检查等...

# php - 如何删除 parent_id=>id 结构中的树

> ID：14552805
> 
> 赞同：1
> 
> 时间：2013-01-27T22:00:56.170
> 
> 标签：php, mysql, recursion, tree

我有一个使用结构映射树的数据库表（目录）`parent_id=>id`。

我有另一个表（文件）将文件映射到第一个表中的项目`directory_id => directories.id`

我想要做的是，给定第一个表中的 id，删除第二个表中与同一树中所选 id 相同或更高的所有行。

然后删除第一个表中在同一棵树中相等或向上的所有行。

解释它的最好方法是文件系统，删除一个目录，它会删除它下面的所有内容。

我能想到的唯一方法是（半伪代码！）：

```
$id = :id
$files = array();
$directories = array($id);
delete_tree($query:results, $files, $directories);

function delete_tree($id, &$files, &$directories){
    $query = SELECT `id` FROM `directories` WHERE `parent_id` = $id;
    foreach($query:results as $directory){
        $directories[] = $directory:id;
        $query2 = SELECT `id` FROM `files` WHERE `directory_id` = $directory:id;
        foreach($query2:results as $file){
            $files[] = $file:id
        }
        delete_tree($directory:id, $files, $directories);
    }
}

$query = DELETE from `directories` WHERE `id` IN (explode(',', $directories));
$query = DELETE from `files` WHERE `id` IN (explode(',', $files)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:28:00.677

你可以尝试使用递归 sql ;-)

在这里你可以找到信息：

[http://wiki.yaslaw.info/wikka/MySQLTree](http://wiki.yaslaw.info/wikka/MySQLTree)

在“4)..”下，您可以找到所需的 sql 条件示例。

这里的示例代码：

```
SELECT
    nav.id,
    nav.title
FROM
    (
        SELECT
            @rownum := @rownum+1 AS rownum, 
            IF(@lastid <> mylist.id, @id := mylist.id, @id) AS pathid,
            @lastid := mylist.id AS id,
            @id := (SELECT parentID FROM nav  WHERE id = @id) AS parentID
        FROM
            (SELECT @id := 0, @lastid := 0, @rownum := 0) AS vars,
            (SELECT id FROM nav) AS myloop,
            (SELECT id FROM nav) AS mylist
    ) AS t
    INNER JOIN nav
        ON t.id = nav.id
WHERE
    pathid = 2  // all subitems from id=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:43:30.030

我会通过数据库约束来做到这一点。

假设我有以下表格

![在此处输入图像描述](../Images/19a8891fb7cd25eada917bb6fc4467ce.png)

我可以定义这两种关系，以便通过删除主记录来级联删除记录。

phpMyAdmin 中的示例：

//目录

![在此处输入图像描述](../Images/6e0f134e05d617e4b53db684212dcf1f.png)

//文件

![在此处输入图像描述](../Images/58c8a0ebbff8c5d8bdc91316f3f55e20.png)

现在我删除 id=10 的目录“03”

//目录

![在此处输入图像描述](../Images/ff0aa9d2457e3db9bd20f361e6b3abe0.png)

//文件

![在此处输入图像描述](../Images/6dbf2480da484b4eed48a435b057cf9e.png)

如您所见，两个表中作为节点子节点的所有记录都被删除了。非常快速且无需任何脚本。

这是一个小转储：

```
CREATE TABLE IF NOT EXISTS `directories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `parent_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `parent_id` (`parent_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=cp1250 AUTO_INCREMENT=13 ;

INSERT INTO `directories` (`id`, `name`, `parent_id`) VALUES (0, 'root', 0),(6, '02', 0), (10, '03', 0),(11, '031', 10),(12, '032', 10);

CREATE TABLE IF NOT EXISTS `files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `directory_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `directory_id` (`directory_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=cp1250 AUTO_INCREMENT=7 ;

INSERT INTO `files` (`id`, `name`, `directory_id`) VALUES (2, '031_f01', 11),(3, '031_f02', 11),(4, '02_f01', 6),(6, '02_f02', 6);

ALTER TABLE `directories`
  ADD CONSTRAINT `directories_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `directories` (`id`) ON DELETE CASCADE;

ALTER TABLE `files`
  ADD CONSTRAINT `files_ibfk_1` FOREIGN KEY (`directory_id`) REFERENCES `directories` (`id`) ON DELETE CASCADE; 
```

# qt - qmake缺少目标文件

> ID：14552806
> 
> 赞同：0
> 
> 时间：2013-01-27T22:00:55.400
> 
> 标签：qt, compilation, qmake

好吧...所以我对 Qt 很陌生。我刚刚将它安装在我的 Ubuntu 发行版上。我创建了一个新的测试应用程序，以查看它是否适用于我的 ../helloworld/ 目录中的以下文件 (helloworld.cpp)：

```
/*  helloworld.cpp */
#include <QApplication>
#include <QWidget>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QWidget window;

    window.resize(250, 150);
    window.setWindowTitle("Simple example");
    window.show();

    return app.exec();
} 
```

我跑来`qmake -project`生成 helloworld.pro 文件。接下来我运行`qmake`以生成 Makefile 接下来我运行`make`以编译并得到以下输出/错误：

```
g++ -c -m64 -pipe -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG 
-DQT_GUI_LIB -DQT_CORE_LIB -I/usr/share/qt4/mkspecs/linux-g++-64 -I. 
-I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 
-I. -I. -o helloworld.o helloworld.cpp
helloworld.cpp:1:24: fatal error: QApplication: No such file or directory
compilation terminated.
make: *** [helloworld.o] Error 1 
```

意味着 helloworld.o 文件丢失了......我该如何解决这个问题？我尝试`QT += webkit`像另一个讨论所说的那样添加......但这也不起作用。

那里的任何代码猴子都知道如何解决这个问题？？？我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T03:06:47.680

在您的 .pro 文件中，添加以下行

```
 QT += core widgets gui 
```

不要忘记`qmake`在命令行中再次调用，以便`qmake`重新创建`Makefile`. 这应该可以为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T23:51:35.073

`QApplication`应该在里面`/usr/include/qt4/QtGui`，前提是你已经安装了`libqt4-dev`包。如果未安装该软件包，那就是错误的原因：只需安装它：

`sudo apt-get install libqt4-dev`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:18:27.107

```
cpp:1:24: fatal error: QApplication: No such file or directory
compilation terminated. 
```

实际错误是缺少头文件 (QApplication)。这导致您的代码（helloworld.cpp）无法编译生成次要错误

```
make: *** [helloworld.o] Error 1 
```

因此，解决方案是确保可以找到 QApplication。这通常由`Qt +=`.pro 文件中的语句处理。

`Qt += webkit`告诉 QMake 你想要制作一个 webkit（网络浏览器）应用程序。在这种情况下，不需要这样做。

您正在尝试构建的是一个 GUI 应用程序，因此您需要确保您的 .pro 文件指定了它。这可以通过指定来完成`Qt += gui`。

此外，我建议您`Qt += gui core`将文件放在文件的顶部。这告诉 QMake 您正在使用 Qt 的核心组件和 gui 组件。

# python - 尝试打印具有一定长度的单词数

> ID：14552810
> 
> 赞同：2
> 
> 时间：2013-01-27T22:01:21.573
> 
> 标签：python

此函数的格式为 numLen(s,n)：其中 s 是字符串，n 是整数。代码应该做的是返回字符串中长度为 n 的单词数，因此：

numLen("这是一个测试", 4)

将返回 2，因为两个单词有 4 个字符。

```
def numLen(s, n):
'''
takes string s and integer n as parameters and returns the number of words
in the string s that have length n
'''
return s.split()
if len(s) == n:
    return 'hello' 
```

我试图将字符串拆分为一个列表并检查该列表中每个单词的长度，但这似乎没有成功。当我用 14 替换 4 时，我设法得到的最远的结果是返回“hello”，只是为了看看长度代码是否有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T22:04:06.483

尝试这个：

```
def numLen(s, n):
    return sum(1 for x in s.split() if len(x) == n) 
```

我正在使用生成器表达式，它的工作原理如下：

*   首先，我们将字符串拆分为`s`单词`split()`
*   然后，我们过滤那些长度正好的单词`n`
*   我们`1`为每个满足条件的人添加
*   最后我们添加所有的`1`s

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T22:06:49.093

因为我假设这是一个类，所以下面的示例是完成它的基本方法（尽管 +1 对 Oscar Lopez 的 Pythonicity 解决方案 :) ）。

```
In [1]: def numLen(s, n):
   ...:     # Split your string on whitespace, giving you a list
   ...:     words = s.split()
   ...:     # Create a counter to store how many occurrences we find
   ...:     counter = 0
   ...:     # Now go through each word, and if the len == the target, bump the counter
   ...:     for word in words:
   ...:         if len(word) == n:
   ...:             counter += 1
   ...:     return counter
   ...: 

In [2]: numLen("This is a test", 4)
Out[2]: 2

In [3]: numLen("This is another test", 7)
Out[3]: 1

In [4]: numLen("And another", 12)
Out[4]: 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T22:08:00.167

```
reduce(lambda a, w: a+(len(w)>=4), s.split(), 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T22:17:47.730

这对我有用：

```
def numLen(s, n):
    num = 0
    for i in s.split():
        if len(i) == n:
            num += 1
    return num 
```

这是你的目的吗？但是，这不考虑标点符号（句点、逗号等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-03T12:50:26.060

使用此代码，您可以从句子中获取每个单词的长度。使用python 2.7

```
a = raw_input("Please give a sentence: ").split() 
for i in range(len(a)):
   print "The Word, ", str(a[i]), " have,", str(len(a[i])), " lengths" 
```

使用 Python 3.x

```
 a = input("Please give a sentence: ").split() 
 for i in range(len(a)):
    print ("The Word, ", str(a[i]), " have,", str(len(a[i])), " lengths") 
```

# nodejitsu - Nodejitsu 上有多个自定义子域？

> ID：14552811
> 
> 赞同：2
> 
> 时间：2013-01-27T22:01:25.267
> 
> 标签：nodejitsu

我在 Nodejitsu 上托管了 2 个应用程序

**第一个应用程序**（“主”站点）..package.json：-

```
"subdomain": "myapp",
"domains": [
  "myapp.com",
  "www.myapp.com"
], 
```

这从**www.myapp.com**和**myapp.com成功服务**

第二个应用程序..package.json：-

```
"subdomain": "myaccount.myapp-otherapp",
"domains": [
  "otherapp.myapp.com"
], 
```

我希望第二个应用程序从 otherapp.myapp.com 提供服务，**Nodejitsu**上的应用程序页面将**otherapp.myapp.com**和**myaccount.myapp-otherappp.jit.su**列为“域”，但只有 jit.su 域实际有效，另一个只是挂起/超时。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:26:09.537

问题是我没有为子域添加 CNAME 记录。我添加了一个（otherapp.myapp.com.. 映射到 nodejitsu，它工作正常。

# jquery - 无论如何要知道用户是否停止加载页面？

> ID：14552812
> 
> 赞同：1
> 
> 时间：2013-01-27T22:01:36.183
> 
> 标签：jquery

我想知道是否有可能知道用户是否让页面加载，或者他是否从 Chrome 或 Firefox 中单击 X 以阻止它的执行。

我有这个代码：

```
jQuery(window).load(function () {
if (condition == 1){
...
else
... 
```

如果用户让网站加载到最后，第一个条件将符合。

如果用户强制停止加载，则符合第二个条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:06:30.043

如果用户点击 X 那么这意味着他很可能没有加载 jQuery 库，或者你的代码......

如果您想检查页面是否已完全加载，那么有一个技巧可能会有所帮助......

在页面末尾放置一个 div 并在它准备好时将事件绑定到它

```
jQuery('.div-trick').load(function () {}); 
```

编辑：更多你可以将你的jQuery代码放在页面的末尾......

注意：不要忘记不要用准备好的文档包装你的代码，因为那样它就不会被解雇......

编辑：嗯，我想我的最终解决方案是这样做......

```
function loadchecker() {
    if($('.div-trick').length<0){
        alert('page is not fully loaded');
    } else {
        alert('now the page is loaded')
    }
}

// fast counter is an over kill but it wills stop when the page is loaded
var checker = window.setInterval(loadchecker, 5);

//then on my documnet ready i will            
$(function(){
     clearInterval(checker);
}); 
```

相当肮脏的解决方案，但我能说这就是我所知道的所有可以做的......

至于你最后的评论，你为什么要检查他是否没有加载页面！您需要做的就是检查页面是否已加载并给他奖品

```
$(function(){
    // page is fully loaded
    // you will get the prize

}); 
```

或在加载图像或添加您想要的内容时绑定ajax调用...如上所示...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:09:17.753

你可以试试：

```
if (document.readyState === "complete") { 
   // Loaded
} else {
   // Not loaded
} 
```

或者只使用 jQuery：

```
$(document).ready( function() {
   // Loaded
} 
```

# ios - 从 NSData 加载 UIImage 导致 UITableView 滚动不稳定

> ID：14552817
> 
> 赞同：3
> 
> 时间：2013-01-27T22:01:49.430
> 
> 标签：ios, objective-c, xcode, uitableview, nsdata

从 NSData 加载图像时，我的 tableview 可以平滑滚动。

一些背景......我将图像 NSData 存储在 Core Data 中（使用“允许外部存储”选项，所以我不认为存储 URL 或类似的东西是这里的解决方案）。此外，我存储了两种类型的数据，一种是高分辨率的 UIImagePNGRepresentation，另一种是低分辨率的 UIImageJPGRepresentation。我正在为我的表格视图加载低分辨率图像。入口对象上的图像属性不存储在核心数据中，它是事后设置的。这是我的做法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{        

    DMLogTableViewCell *cell = (DMLogTableViewCell *)[self.tableView dequeueReusableCellWithIdentifier:@"LogCell" forIndexPath:indexPath];

    [cell setGradients:@[[UIColor whiteColor], [UIColor lightTextColor]]];
    Entry *entry = [self.fetchedResultsController objectAtIndexPath:indexPath];
    UIImage *entryImage = entry.image;

    if (entryImage)
        cell.rightImageView.image = entryImage;
    else {
        NSOperationQueue *oQueue = [[NSOperationQueue alloc] init];
        [oQueue addOperationWithBlock:^(void) {
            UIImage *image = [UIImage imageWithData:entry.photo.lowResImageData];
            if (!image) image = [UIImage imageNamed:@"defaultImage.png"];
            entry.image = image;
        }];
        [oQueue addOperationWithBlock:^(void) {
            [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
                DMLogTableViewCell *cell = (DMLogTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath];
                cell.rightImageView.image = entry.image;
            }];
        }];

    }

    return cell;
} 
```

关于如何让它更顺利地运行的任何想法？任何帮助是极大的赞赏！

谢谢

**更新**

This has gotten me much closer, but there is still a little bit of jerkiness . . . (within cellForRowAtIndexPath)

```
 UIImage *entryImage = entry.image;

    if (entryImage)
        cell.rightImageView.image = entryImage;
    else {
        [self.imageQueue addOperationWithBlock:^(void) {
            UIImage *image = [UIImage imageWithData:entry.photo.lowResImageData];
            if (!image) image = [UIImage imageNamed:@"bills_moduleIcon.png"];
            entry.image = image;
            [entry.image preload];

            [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
                DMLogTableViewCell *cell = (DMLogTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath];
                cell.rightImageView.image = entry.image;
            }];
        }];
    } 
```

that preload method is in a cateogory on UIImageView and looks like this:

```
- (void)preload
{
    CGImageRef ref = self.CGImage;
    size_t width = CGImageGetWidth(ref);
    size_t height = CGImageGetHeight(ref);
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, width, height, 8, width * 4, space, kCGImageAlphaPremultipliedFirst);
    CGColorSpaceRelease(space);
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), ref);
    CGContextRelease(context);
} 
```

I think my next plan of attack is to mess around with the size of the images stored (as mentioned in the comments) or perhaps trying to not update the imageViews while the table is scrolling. Any thoughts on those two methods are much appreciated! ill check back in when i've done that

**UPDATE 2** Many many thanks for everyone who helped me out with this! Here was the final solution (in cellForRowAtIndexPath:

```
 if (entryImage)
        cell.rightImageView.image = entryImage;
    else {
        [self.imageQueue addOperationWithBlock:^(void) {
            UIImage *image = [UIImage imageWithData:entry.photo.lowResImageData];
            if (!image) image = [UIImage imageNamed:@"bills_moduleIcon.png"];
            entry.image = [image scaleToSize:cell.rightImageView.frame.size];

            [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
                DMLogTableViewCell *cell = (DMLogTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath];
                cell.rightImageView.image = entry.image;                
            }];
        }];
    } 
```

adding a new category method to UIImage:

```
-(UIImage*)scaleToSize:(CGSize)size
{
    UIGraphicsBeginImageContext(size);
    [self drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return scaledImage;
} 
```

Scrolling is now perfectly smooth. Awesome

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:33:13.097

A couple of issues:

1.  I'd want to see how much time these two lines are taking:

    ```
    Entry *entry = [self.fetchedResultsController objectAtIndexPath:indexPath];
    UIImage *entryImage = entry.image; 
    ```

    While I gather that `entry.image` is a cached image, I wouldn't be so confident that `objectAtIndexPath:indexPath` isn't actually retrieving the `NSData` from Core Data (which is a good portion of the performance issue in storing images in a local database rather than the file system). I'd be inclined to do this in the background queue.

2.  I don't understand why you're adding two operations to `oQueue` (which could operate concurrently!). It should just be as follows, so you don't try to dispatch to main queue until the image is retrieved:

    ```
    [oQueue addOperationWithBlock:^(void) {
        UIImage *image = [UIImage imageWithData:entry.photo.lowResImageData];
        if (!image) image = [UIImage imageNamed:@"defaultImage.png"];
        entry.image = image;

        [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
            DMLogTableViewCell *cell = (DMLogTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath];
            cell.rightImageView.image = entry.image;
        }];
    }]; 
    ```

3.  It's probably not material, but you really shouldn't create a new `NSOperationQueue` for each cell. You should define a class property that is a `NSOperationQueue`, initialize it in `viewDidLoad`, and then use that queue in `cellForRowAtIndexPath`. It's not material, I'm sure, but it's not worth the overhead of creating a queue for each row of your table. (And if you ever go to server-based image retrieval, using a single queue is very important so you can control the `maxConcurrentOperationCount`.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:10:23.377

UIImage wont actually do the decode until it needs to draw the image, so its actually happening on the main thread when you assign the image to the image view.

I have a UIImage category which will force the image to be decoded (which you should run on a background thread) here : [https://github.com/tonymillion/TMDiskCache](https://github.com/tonymillion/TMDiskCache)

# javascript - 如何避免后台页面滚动？

> ID：14552818
> 
> 赞同：2
> 
> 时间：2013-01-27T22:01:52.290
> 
> 标签：javascript, twitter-bootstrap

我正在使用 Twitter Bootstrap 的模式窗口，我注意到当你滚动时，模式弹出窗口在背景页面移动时保持固定。对于演示，您可以单击以下页面中的“启动演示模式”按钮：

[http://getbootstrap.com/2.3.2/javascript.html#modals](http://getbootstrap.com/2.3.2/javascript.html#modals)

如何避免这种情况并让滚动事件控制模态窗口？Bootstrap 提供的选项似乎不包括在内。

模态弹出窗口是`<div>`with `position: fixed`，这就是我滚动时它保持固定的原因。但是我不能将它设置为其他值，因为它需要保持弹出状态。我还想如果我将`<body>`'s style 设置为`overflow:hidden`，滚动条将被隐藏。但这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T11:19:22.187

```
$('.modal') 
.on('shown', function(){ 
console.log('show'); 
$('body').css({overflow: 'hidden'}); 
}) 
.on('hidden', function(){ 
$('body').css({overflow: ''}); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:48:54.893

您可以`overflow: hidden`根据`body.modal-open`此[答案添加](https://stackoverflow.com/a/11013994/633406)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T15:37:55.787

我用

```
body{
    position: fixed;
    left: 0px;
    right: 0px;
    /*margin: auto;*/
} 
```

# video-streaming - Windows Phone 8 中的 CISCO 2500 IPC 流式传输

> ID：14552820
> 
> 赞同：0
> 
> 时间：2013-01-27T22:02:02.177
> 
> 标签：video-streaming, windows-phone-8, cisco, ip-camera, http-streaming

我正在开发一个 WP8 应用程序，它需要实现实时视频流功能。到目前为止，我已按照[这些步骤](http://playerframework.codeplex.com/wikipage?title=Windows%20Phone%208%20Player%20Documentation&referringTitle=Documentation)在我的应用程序中配置 Silverlight 视频播放器。我有[Cisco 2500](http://www.cisco.com/en/US/prod/collateral/vpndevc/ps6918/ps9692/ps7307/data_sheet_c78-455613.html)（有线）和 Cisco 交换机。我可以使用以下 URL 通过 HTTP 获取 ASF 流：

```
http://<username>@<password>.<ip-address>/img/video.asf 
```

它适用于 Windows 8 操作系统上的 Windows Media Player、VLC 播放器和 IE10。

当我尝试在 Windows Phone 8 的 IE 中打开相同的 URL（以及我的应用程序中`MediaPlayer`的元素`Source`属性）时，它给了我一个错误；“您的手机不支持此视频格式”。

在媒体信息中，VLC 建议其使用 MP4S 编解码器来流式传输视频。

谁能建议如何在上述设置中在 Windows Phone 上提供简单的现场直播——不涉及 IIS（但流畅的流）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:21:03.700

据我所知，ASF 格式不是[Windows Phone 支持的媒体编解码器的](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087%28v=vs.105%29.aspx)一部分。如果您的 ASF 只是标准音频/视频渐进式下载的一个笨拙的大包装，您可以获取 ASF，将其解压缩并在 Windows Phone 中使用真正的媒体端点。

如果您正在对 Windows Phone 进行视频自适应流式传输，最好考虑将[IIS Smooth Streaming Media Service](http://www.iis.net/downloads/microsoft/smooth-streaming)与[SmoothStreamingMediaElement](http://www.microsoft.com/en-us/download/details.aspx?id=29940) / [SmfPlayer](http://smf.codeplex.com/)一起使用。

# c++ - 将 std::ostream 传递给函数？

> ID：14552821
> 
> 赞同：0
> 
> 时间：2013-01-27T22:02:01.727
> 
> 标签：c++

我正在使用 LLVM clang++（FreeBSD 上的 3.1 版）作为我的编译器来完成*Wiley 的自学 C++ （第 7 版）的示例程序。*英寸。23、“类继承”，提供如下代码：

Date.h - 基类：

```
...snip..
inline void Date::Display(std::ostream& os)
   { os << "Date: " << *this; }
...snip... 
```

SpecialDate.h - 从 Date 派生的类并重载 Display() 函数：

```
#include "Date.h"
...snip...
void Display(std::ostream& os)
   { os << "SpecialDate: " << *this; }
...snip... 
```

23-1.cpp - 实例化一个 SpecialDate 对象并使用它：

```
#include <iostream>
#include "SpecialDate.h"
int main()
{
...snip... 
// da, mo, & yr are all ints and declared
SpecialDate dt(da, mo, yr);
...snip...
dt.Display();
...snip... 
```

当我编译代码时，我得到的唯一错误是：

```
./23-1.cpp:14:14: error: too few arguments to function call, expected 1, have 0
            dt.Display();
            ~~~~~~~~~~ ^
./SpecialDate.h:15:2: note: 'Display' declared here
    void Display(std::ostream& os)
    ^
1 error generated. 
```

我可以看到我需要通过引用将 std::ostream 类型变量传递给 Display()，但我不知道如何继续。FWIW：Date.h 和 SpecialDate.h 都重载了`<<`运算符。我试过了：

```
dt.Display(std::cout); /* all sorts of weird compiler errors */
...
std::ostream os; /* error: calling a protected constructor of class */
dt.Display(os);
...
std::cout << dt.Display(); /* same "too few arguments" error */ 
```

我需要做什么才能编译此代码？

编辑：克里斯，clang++ 错误`dt.Display(std::cout);`：

```
/tmp/23-1-IecGtZ.o: In function `SpecialDate::Display(std::ostream&)':
./23-1.cpp:(.text._ZN11SpecialDate7DisplayERSo[_ZN11SpecialDate7DisplayERSo]+0x34):    undefined reference to `operator<<(std::ostream&, SpecialDate&)'
/tmp/23-1-IecGtZ.o: In function `Date::Date(int, int, int)':
./23-1.cpp:(.text._ZN4DateC2Eiii[_ZN4DateC2Eiii]+0x34): undefined reference to `Date::SetDate(int, int, int)'
clang++: error: linker command failed with exit code 1 (use -v to see invocation) 
```

此外，`#include <iostream>`在 Date.h 和 SpecialDate.h 中。

编辑 2：重新阅读错误后`dt.Display(std::cout);`，我意识到编译器没有看到 SpecialDate 和 Date 的源代码，只是标题。所以我将它们添加到命令行，最终编译没有错误！

```
clang++ 23-1.cpp Date.cpp SpecialDate.cpp 
```

不幸的是，行为不符合预期（未显示日期），但我最初的问题已得到解答。我会继续戳它。感谢您对菜鸟的耐心等待！

# html - Tumblr 主题 - 自定义块

> ID：14552827
> 
> 赞同：4
> 
> 时间：2013-01-27T22:02:34.857
> 
> 标签：html, css, themes, tumblr

我正在创建一个 tumblr 主题，我对它完全陌生。

现在，我知道用户可以配置他的博客，例如添加标题或描述，然后我可以使用`{blocks}`.

但是，我希望用户添加他的联系数据，例如指向他的社交网络的链接。

Tumblr 通常如何处理这个问题？用户是否必须编辑 HTML？
这意味着我必须对此进行硬编码。不是很讨人喜欢。

或者我可以`{blocks}`以某种方式添加可定制的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T22:16:41.243

从[主题定制指南](http://www.tumblr.com/docs/en/custom_themes#appearance-options)看来，您只需在主题中包含某些标签，它们就会显示在用户的定制面板中。

> 通过在主题中包含特殊的元文本标签，用户可以轻松配置您定义的文本变量。这对于调整文本或配置需要用户信息的小部件很有用。
> 
> 例子

```
<html>
    <head>
        <!-- DEFAULT TEXT -->
        <meta name="text:Flickr Username" content=""/>
    </head>
    <body>
        {block:IfFlickrUsername}
            <div id="flickr_widget">
                <script type="text/javascript"
                src="http://flickr.com/widget?user={text:Flickr Username}">
                </script>
            </div>
        {/block:IfFlickrUsername}
    </body>
</html> 
```

从上面的示例看起来`{text:Flickr Username}`意味着用户的可自定义输入字段应该是文本输入并具有标签“Flickr 用户名”，然后在`{block}`标签中您将使用不带空格的标签作为变量名称。

# java - Android：无效的线性布局不起作用

> ID：14552831
> 
> 赞同：1
> 
> 时间：2013-01-27T22:03:06.790
> 
> 标签：java, android

我在 LinearLayout 中有一个 imageView，当我在该 LinearLayout 上调用 invalidate 时，它​​不会失效，直到手机休眠并再次唤醒。

是否有强制 LinearLayout 立即失效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:17:50.917

来自有关无效功能的android文档

> 使整个视图无效。如果视图可见，onDraw(android.graphics.Canvas) 将在未来的某个时间点被调用。这必须从 UI 线程调用。要从非 UI 线程调用，请调用 postInvalidate()。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-20T19:24:59.043

这已经超过 3 年了，所以我不期待回复，但如果你不认为你`LinearLayout`的无效是因为你没有接到任何电话`onDraw()`，请查看[https://stackoverflow.com/a/ 17595671/852795](https://stackoverflow.com/a/17595671/852795)：

> 默认情况下，所有 ViewGroup 子类都不调用它们的`onDraw`方法，你应该通过调用`setWillNotDraw(false)` [链接来启用它](https://developer.android.com/reference/android/view/View.html#setWillNotDraw%28boolean%29)

从文档：

> 默认情况下，该标志未在 View 上设置，但可以在某些 View 子类上设置，例如 ViewGroup。通常，如果您覆盖， `onDraw(android.graphics.Canvas)`您应该清除此标志。

尝试添加`setWillNotDraw(false);`到您的 LinearLayout。

# c++ - Gtkmm3：单击TreeView中的一行时获取信号

> ID：14552838
> 
> 赞同：0
> 
> 时间：2013-01-27T22:03:56.897
> 
> 标签：c++, treeview, gtkmm

我有这个代码：

```
Glib::RefPtr<Gtk::TreeSelection> clSelection = treeview.get_selection();
clSelection.signal_changed().connect( sigc::mem_fun(*this, &MyClass::treeview_clicked) ); 
```

并在使用 g++ 编译时出现此错误：

```
‘class Glib::RefPtr<Gtk::TreeSelection>’ has no member named ‘signal_changed’ 
```

我到处寻找，我似乎没有遗漏任何东西。为什么它在文档中说 signal_changed() 不存在？我还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:29:46.683

我认为应该是：

```
clSelection->signal_changed().connect( sigc::mem_fun(*this, &MyClass::treeview_clicked) ); 
```

# objective-c - 原生 Facebook/iOS6 集成：尝试获取个人资料图片时出现 Cocoa 错误 3840

> ID：14552841
> 
> 赞同：0
> 
> 时间：2013-01-27T22:04:03.637
> 
> 标签：objective-c, ios6, facebook-ios-sdk

我目前只使用 Social.framework（没有 FacebookSDK）并开始请求和访问基本用户数据。这是我拥有的所有代码（您会注意到，在外部声明了一些属性）。在获得正确的权限方面一切正常，但是在询问用户的个人资料图片时出现以下输出错误：

```
2013-01-27 21:28:44.324 TestApp[9230:1a703] Account saved to accountStore
2013-01-27 21:28:45.002 TestApp[9230:1d603] (null)
2013-01-27 21:28:45.003 TestApp[9230:1d603] Request error: The operation couldn’t be     completed. (Cocoa error 3840.) 
```

这是代码：

```
- (IBAction)btnFbLoginPressed:(id)sender
{
ACAccountType *fbAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier: ACAccountTypeIdentifierFacebook];
NSArray *permissions = @[@"email"];
self.requestAccessOptions = @{ACFacebookAppIdKey:FB_API_KEY, ACFacebookPermissionsKey:permissions, ACFacebookAudienceKey:ACFacebookAudienceOnlyMe};

[self.accountStore requestAccessToAccountsWithType:fbAccountType options:self.requestAccessOptions completion:^(BOOL granted, NSError *e) {
    if (granted && e == nil) {

        NSArray *readPermissions = @[@"user_photos"];
        NSDictionary *readAcccessOptions = @{ACFacebookAppIdKey:FB_API_KEY, ACFacebookPermissionsKey:readPermissions, ACFacebookAudienceKey:ACFacebookAudienceOnlyMe};

        [self.accountStore requestAccessToAccountsWithType:fbAccountType options:readAcccessOptions completion:^(BOOL granted, NSError *e) {
            if (granted && e == nil) {

                NSArray *accounts = [self.accountStore accountsWithAccountType:fbAccountType];
                self.facebookAccount = [accounts lastObject];

                [self.accountStore saveAccount:self.facebookAccount withCompletionHandler:^(BOOL success, NSError *error) {
                    if (error != nil || !success) {
                        NSLog(@"Error saving account to accountStore: %@", error.localizedDescription);
                    } else {
                        NSLog(@"Account saved to accountStore");
                    }
                }];

                NSString *uid = [NSString stringWithFormat:@"%@", [[self.facebookAccount valueForKey:@"properties"] valueForKey:@"uid"]];
                NSString *url = [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture", uid];
                NSURL *profilePictureURL = [NSURL URLWithString:url];

                SLRequest *profilePictureRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:profilePictureURL parameters:nil];
                profilePictureRequest.account = self.facebookAccount;

                [profilePictureRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *e)
                 {
                     NSDictionary *responseDataDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:&e];
                     NSLog(@"%@", responseDataDictionary);
                     if (e != nil) {
                         NSLog(@"Request error: %@", e.localizedDescription);
                     } else {

                     }
                 }];

            } else {
                NSLog(@"Read permissions request error: %@", e.localizedDescription);
            }
        }];

    } else {
        NSLog(@"Basic permissions request error: %@", e.localizedDescription);
    }
}];
} 
```

可以看到 reponseDataDictionary 为 null 并且在解析数据时发生了一些事情。我注意到 SO 上有几个关于相同错误代码的其他线程，但到目前为止还没有运气。我的猜测是 1）我的 Facebook 代码有问题，或者 2）我错误地解析了数据。任何帮助表示赞赏！

注意：我想坚持只使用社交/帐户框架。

**更新：**由于评论中的建议，略有修改。

更改代码：

```
[profilePictureRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *e)
{
   NSLog(@"Request error value: %@", e.localizedDescription);

   NSError *jsonError = nil;
   NSDictionary *responseDataDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:&jsonError];
   NSLog(@"Response data dictionary value: %@", responseDataDictionary);
   if (jsonError != nil) {
       NSLog(@"Serialization error: %@", jsonError.localizedDescription);
   } else {
       NSLog(@"Serialization successful");
   }
}]; 
```

输出：

```
2013-01-28 18:55:16.265 TestApp[9565:1ae03] Account saved to accountStore
2013-01-28 18:55:17.640 TestApp[9565:1b503] Request error value: (null)
2013-01-28 18:55:17.640 TestApp[9565:1b503] Response data dictionary value: (null)
2013-01-28 18:55:17.642 TestApp[9565:1b503] Serialization error: The operation couldn’t be completed. (Cocoa error 3840.) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:13:15.280

profilePictureRequest 正在返回图像而不是 JSON。用于`+ (CIImage *)imageWithData:(NSData *)data`将响应转换为图像。

# ruby-on-rails - 如何在 Ruby 中设置代理连接的超时时间

> ID：14552847
> 
> 赞同：1
> 
> 时间：2013-01-27T22:04:21.000
> 
> 标签：ruby-on-rails, ruby, http

我知道如何为通过代理的请求[设置打开/读取超时。](https://stackoverflow.com/questions/10261725/set-proxy-request-timeout)然而，我的问题是我的代理偶尔会出现故障，因此我无法连接到代理。所以我希望能够将连接到代理的超时设置为某个值，然后通过尝试其他方法来处理超时。知道如何设置连接到 http 代理的超时值吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:21:05.603

首先是代码，然后是下面的一些解释：

```
# get an instance of Net::HTTP that has proxy settings embedded
# see the source:  http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-Proxy
proxyclass = Net::HTTP::Proxy("proxy_host");

# Create a new instance of the URL you want to connect to
# NOTE: no connection is attempted yet
proxyinstance = proxyclass.new("google.com");

# Make your setting changes, specifically the timeouts
proxyinstance.open_timeout = 5;
proxyinstance.read_timeout = 5;

# now, attempt connecting through the proxy with the desired
# timeout settings.
proxyinstance.start do |http|
    # do something with the http instance
end 
```

关键是实现`open_timeout`并且`read_timeout`是实例变量，它`Net::HTTP::Proxy`实际上返回了一个装饰`Net::HTTP`类。

您会遇到类似`Net::HTTP`用法的相同问题。您必须以“长”方式构造它，而不是使用`Net::HTTP.start()`类方法快捷方式。

# c# - 如何在代码中获取 DataTemplate 的 x:Key？

> ID：14552849
> 
> 赞同：1
> 
> 时间：2013-01-27T22:04:24.463
> 
> 标签：c#, .net, wpf

我有一个使用 ax:Key 来标识自己的 DataTemplate，如下所示：

```
<DataTemplate 
    x:Key="myTemplate
    >
    ...
</DataTemplate> 
```

在其他一些 C# 代码中，我有对此 DataTemplate 的引用，但实际上想要检索 DataTemplate 的 x:Key。

问题：

有没有办法在 C# 中从 DataTemplate 中检索 DataTemplate 的 x:Key？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:05:58.690

您可以遍历所有资源并检查它们的密钥。

```
public static string GetResourceInDictionary(ResourceDictionary dictionary, object item)
{
    return (from DictionaryEntry key in dictionary
            where key.Value == item
            select key.Key.ToString()).FirstOrDefault();
} 
```

然后将其用于：

```
string resourceKey = GetResourceInDictionary(this.Resources, myResource); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:06:14.380

尝试这个：

```
foreach (var key in this.Resources.Keys)
{
    Console.WriteLine(key);
} 
```

# css - 在背景触摸屏幕左侧的同时将内容居中，

> ID：14552857
> 
> 赞同：1
> 
> 时间：2013-01-27T22:05:01.887
> 
> 标签：css

希望我能很好地解释这一点，因为我过去没有。

我希望实现这样的目标......将网页分成三份，并在中间放置一个标题。

|TitleLeft|Title|TitleRight|

所以假设标题是`width:500px`. 左右标题将根据窗口大小而变化。`500px`将其设置为then就足够简单了`margin: 0 auto;`。这就是我拥有页面内容的方式，但是标题应该向左伸展，同时仍然位于页面的中心（或在该`500px`边界内左对齐）。所以假设标题有橙色背景。TitleLeft 也应该有一个橙色的背景。

也许这会有所帮助（它使用表格并且对齐很差......如果可能的话，我想避免使用表格！）因为它大致显示了我的目标。

[http://jsfiddle.net/CmWRu/](http://jsfiddle.net/CmWRu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:57:04.540

如果我正确理解您的问题，您正在寻找：

*   中间列是固定的，以屏幕为中心
*   左列和右列将始终分别向左和向右扩展，以填充剩余的可用空间，即使屏幕重新调整大小
*   标题将始终以各自的 div 为中心。

好的，首先是一些 HTML（我正在使用演示标记来使其更易于理解……您需要确定哪些标记在语义上与您的项目相关：

```
<div id="wrapper">
    <div id="left">
        <h2>Title Left</h2>
    </div>
    <div id="center">
        <h2>Title Center</h2>
    </div>
    <div id="right">
        <h2>Title Right</h2>
    </div>
</div><!-- wrapper --> 
```

一点CSS：

```
#wrapper {
    width: 100%;
    overflow: hidden;
}
#left, #right {
    background: #FF8C00;
}
h2 {
    text-align: center;
}
#center {
    width: 500px;
    float: left;
    background: #e0e0e0;
} 
```

还有一些 jQuery：

```
//document ready function
$(document).ready(function(){

    //on page load, call the resizeColumns function
    resizeColumns(); 

    //and also call it whenever the window resizes
    $(window).resize( resizeColumns );

    //we define the function
    function resizeColumns(){

        //grab the width of the wrapper and save it to a variable
        var windowSize = $('#wrapper').width(), 

        //same thing for the width of the div with id of "center"           
        centerSize = $('#center').width(),

        //windowSize - centerSize = the remaining width of the screen. 
        //Divide that by 2, and that's how wide each remaining column should be. 
        //We save that value to a variable
        fluidSize = (windowSize-centerSize)/2;

        //Now just set the width of the left and right columns equal to fluidSize
        //and float them to the left.
        $('#left, #right').width(fluidSize).css('float','left');

     }

 }); 
```

# c++ - 是否可以使函数的行为对于常量参数或变量参数有所不同？

> ID：14552862
> 
> 赞同：3
> 
> 时间：2013-01-27T22:05:28.443
> 
> 标签：c++, function, arguments, metaprogramming, compile-time

例如，factorial(n)，如果参数是一个常量（表达式），那么结果是确定性的，并且可以在编译时完成（通过使用模板元编程）。

是否可以只编写一个函数，这样无论何时调用它，如果参数是一个常量，那么结果将在编译时计算，如果它是一个变量，那么它将在运行时进行计算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T22:06:37.597

这正是`constexpr`函数存在的目的。`constexpr`函数是在 C++11 中引入的。当使用可以在编译时求值的常量表达式调用时，它们往往会在编译时求值（有时您可以强制这种情况发生）。但是，一般情况下无法提供保证。否则，它们会在运行时进行评估（并且您可以像使用在运行时计算的常量或非常量参数的常规函数​​一样调用它们）。

除了无法保证它们的编译时评估之外，一个`constexpr`函数也有一些限制：它必须只包含**一个 return 语句**，所以如果你正在寻找一种方法来执行任何复杂的计算，这不适合您的需求。然而，`constexpr`函数可能是最接近您正在寻找的东西。

既然你提到了函数的例子，`factorial()`下面是函数的样子`constexpr`：

```
#include <iostream>

using namespace std;

constexpr int factorial(int n)
{
    return (n == 0) ? 1 : factorial(n - 1);
}

int foo() 
{ 
    int result = 1;
    // do some processing...
    return result; 
}

int main()
{
    int v[factorial(5)]; // Evaluated at compile-time
    cout << factorial(foo()); // Evaluated at run-time
} 
```

# ios - iOS - 动画上显示的文本

> ID：14552863
> 
> 赞同：1
> 
> 时间：2013-01-27T22:05:41.237
> 
> 标签：ios, animation, text, layer, catextlayer

我正在为 iOS 中的一组帧设置动画，并希望在其末尾显示一个文本。在这一点上，我只能为图像设置动画。我尝试使用 CATextLayer 在其上显示的文本未显示。我根本不知道如何使图层成为视图的子视图。此外，我尝试使用的 initWithFrame 方法似乎不适用于 UIViewController。有人可以帮忙吗？

1）这是完美运行的动画代码：

```
//setup animation
NSArray *theFrames = [NSArray array];
theFrames = [[NSArray alloc] initWithObjects:
             [UIImage imageNamed:@"frame1.png"],
             [UIImage imageNamed:@"frame2.png"],
             [UIImage imageNamed:@"frame3.png"],
             [UIImage imageNamed:@"frame4.png"],
             nil];

sceneFrames.animationImages = theFrames;
sceneFrames.animationDuration = 1;
sceneFrames.animationRepeatCount = 1;
sceneFrames.image = [theFrames objectAtIndex:theFrames.count - 1];
[sceneFrames startAnimating]; 
```

2）这是我尝试显示包含文本的图层的方式。正如你所看到的，我什至没有在最后显示它。仍然试图首先将它放在那里并且已经遇到问题：

```
// Create the new layer object
boxLayer = [[CATextLayer alloc] init];

// Give it a size
[boxLayer setBounds:CGRectMake(0.0, 0.0, 300.0, 85.0)];

// Give it a location
[boxLayer setPosition:CGPointMake(160.0, 350.0)];

// Make half-transparent red the background color for the layer
UIColor *reddish = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.75];

// Get CGColor object with the same color values
CGColorRef cgReddish = [reddish CGColor];
[boxLayer setBackgroundColor:cgReddish];

// Make it a sublayer on the view's layer
// THIS LINE DOES NOT WORK AND GIVES ME HEADACHES. It does not work without initWithFrame, which does not seem to work with UIViewController...
[[self layer] addSublayer:boxLayer];

// Create string
NSString *text2 = @"You are me.";

// Set font
[boxLayer setFont:@"Times New Roman"];

// Set font size
[boxLayer setFontSize:20.0];

[boxLayer setAlignmentMode:kCAAlignmentCenter];

// Assign string to layer
[boxLayer setString:text2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:16:45.470

代替

```
[[self layer] addSublayer:boxLayer]; 
```

和

```
[self.view.layer addSublayer:boxLayer]; 
```

或者

```
[[self.view layer] addSublayer:boxLayer]; 
```

他们都是一样的

编辑

经过测试，它对我来说很完美

# python - 如何在 Python 中连接一个字符和两个或多个整数并将它们存储起来以便在程序中进一步使用？

> ID：14552865
> 
> 赞同：1
> 
> 时间：2013-01-27T22:05:53.150
> 
> 标签：python

在我的代码中，我想在 for 循环中连接一个字符和`D`两个整数。`l``i`

```
l = 1
for root, dirs, files in os.walk(r'D:\Python_Programs\B1'):
p = root.split('\\')
NoOfDir = len(dirs)                 #Here NoOfDir is 2 for my directory structure
    for i in range(0, NoOfDir):
        Dli = p[-1] + os.sep + dirs[i]
        print(Dli) 
```

**期望的输出：**

```
B1\New1    # As D10
B1\New2    # As D11 
```

这里`New1`和`New2`是根目录的两个子目录`B1`。我也想使用`D10`和`D11`进一步使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:25:00.030

使用动态生成的变量名是个坏主意。使用直接`__dict__`访问是可能的，但没有好方法让您以后的代码知道使用的名称是什么。相反，请使用可以索引（或迭代）的列表或字典。这是使用`D`字典的代码版本，其键是`(l, i)`元组：

```
l = 1 # I assume this gets incremented somewhere not shown
D = {}

for root, dirs, files in os.walk(r'D:\Python_Programs\B1'):
    p = os.path.split(root)
    for i, dir in enumerate(dirs):
        D[l, i] = os.path.join(p[-1], dir)
        print("D[{}, {}] = {}".format(l, i, D[l, i])) 
```

但这仍然有一个逻辑问题，因为字典键在外循环的迭代之间不是唯一的。也许这`l`就是应该增加的地方？如果是这样，这是一个替代版本，`l`来自`enumerate`：

```
import os.path

D = {}

for l, (root, dirs, files) in enumerate(os.walk(r'D:\Python_Programs\B1')):
    p = os.path.split(root)
    for i, dir in enumerate(dirs):
        D[l, i] = os.path.join(p[-1], dir)
        print("D[{}, {}] = {}".format(l, i, D[l, i])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:20:10.740

您可以使用字典而不是创建新变量，并且`Dli`可以是键。

```
Dli = 'D'+str(l)+str(i)
new_dic[Dli] = p[-1] + os.sep + dirs[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:22:32.477

您可以使用 vars 保存其变量以供进一步使用。

`vars()['new_global_var'] = 'bla'`

`print new_global_var`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T23:01:13.620

简单的方法：

```
l = 1
for root, dirs, files in os.walk(r'D:\Python_Programs\B1'):
p = root.split('\\')
NoOfDir = len(dirs)                 #Here NoOfDir is 2 for my directory structure
    for i in range(0, NoOfDir):
        varName = 'D%d%d' % (l, i)
        globals()[varName] = p[-1] + os.sep + dirs[i]
        print(globals()[varName]) 
```

我希望它有帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T22:34:35.447

我只是从代码的样子猜测，而不是

```
 Dli = p[-1] + os.sep + dirs[i] 
```

你不应该使用

```
os.path.join(p[-1], dirs[i]) 
```

`os.sep`在通常情况下使用文件路径时，您不必担心。

我认为您需要查看 os.path ，因为您`string.split`可能`os.path.split`确实需要这样做。

我认为您正在尝试解决`os.path`已经解决的问题。

# java - Java NavigableMap 为什么 headMap 对于相同的方法返回不同

> ID：14552868
> 
> 赞同：3
> 
> 时间：2013-01-27T22:06:03.197
> 
> 标签：java, treemap

关于 Java TreeMap 方法（或 NavigableMap 接口）：

```
public SortedMap<K,V> headMap(K toKey)
public NavigableMap<K,V> headMap(K toKey, boolean inclusive) 
```

为什么他们返回不同的类型？我知道 SortedMap 对 NavigableMap 来说是超级的，我只想知道为什么包含标志需要不同的返回。

查看代码也没有任何意义，因为没有包含标志的版本只是调用另一个。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T22:13:33.680

我认为原因是历史性的。[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)它本身并[`headMap(K)`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#headMap%28K%29)可以追溯到 Java 1.2，而[`NavigableMap`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)和[`headMap(K, boolean)`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#headMap%28K,%20boolean%29)已在 Java 1.6 中引入。

# xml - XPATH - 如何选择具有具有最大值的给定属性的子节点的节点？

> ID：14552877
> 
> 赞同：1
> 
> 时间：2013-01-27T22:06:50.817
> 
> 标签：xml, xpath, xpath-1.0

例如：

```
<a>
  <b>
    <c1>c1 text</b1>
    <c2 c2attr="10">c2 text</b2>
    <c3>c3 text</b3>
  </b>
  <b>
    <c1>c1 text</b1>
    <c2 c2attr="5">c2 text</b2>
    <c3>c3 text</b3>
  </b>
</a> 
```

我想选择具有最大属性`<b>`的子元素的元素；在此示例中，第一个 (10 > 5)。`<c2>``c2attr`

我努力了

```
/a/b[not(c2@c2attr <= preceding-sibling::c2@c2attr) and not(c2@c2attr <=following-sibling::c2@c2attr)] 
```

但是PHP说它是无效的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:11:51.883

您在`@`符号前缺少斜杠，您需要查找`preceding-sibling`名为 的元素`b`，而不是`c2`：

```
/a/b[not(c2/@c2attr <= preceding-sibling::b/c2/@c2attr) and not(c2/@c2attr <=following-sibling::b/c2/@c2attr)] 
```

然而，这种检查在`b`元素数量上是二次方的，因为它是相互比较`b`的`b`。简单地提取所有`b`元素，然后使用 PHP 代码迭代它们（一次），跟踪`c2attr`您迄今为止看到的最高值以及它`b`属于哪个，这样会更有效。这将是线性的而不是二次的。

# php - sql按用户记录距离的总和对用户进行排序

> ID：14552890
> 
> 赞同：1
> 
> 时间：2013-01-27T22:08:01.273
> 
> 标签：php, mysql, sql, wordpress

我正在使用一个表格，其中包含用户报告的运动距离的日志。我想通过记录距离的总和对用户进行排名。

首先，我找到所有用户 ID：

```
select distinct wordpress_user_id from wp_exercise_log 
```

然后我遍历它并获取名称和总和（距离）：

```
 foreach($users as $user) {
// DISTANCE
    $user_distance = floor($wpdb->get_var( "select sum(distance) from wp_exercise_log where wordpress_user_id='$user'"));
// FULL NAME
  $user_info = get_userdata($user);
  $full_name = $user_info-> user_firstname . ' ' . $user_info-> user_lastname;
} 
```

这是我的问题：除非我将它们附加到多维数组并使用 PHP 排序，否则我不确定如何对用户进行排名。

有没有更好的方法来选择所有这些数据并使用一个 SQL 查询对其进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:11:27.623

```
select
   wordpress_user_id, 
   sum(distance) as user_distance 
from 
   wp_exercise_log 
group by 
   wordpress_user_id 
order by 
   user_distance desc 
```

请注意`ORDER BY GROUP_FUNCTION()`总是导致性能问题。

您可以考虑在`user_total_distance`您的用户表中添加一些列，并在`wp_exercise_log`.

# c# - 使图像可拖动

> ID：14552893
> 
> 赞同：0
> 
> 时间：2013-01-27T22:08:26.600
> 
> 标签：c#, jquery, asp.net, draggable

如果我使用 jquery UI 通过 HTML 添加图像，我可以毫无问题地使其可拖动。

```
$('#div1 img').draggable({
            containment: '#div1',
});

<div id='div1' class="div1" runat="server" >
     <asp:Image ImageUrl='Images/img1.gif' ID='img1' runat='server'  Height='30px' Width='30px' />
</div> 
```

但是，如果我要从 page_load 后面的代码中添加图像，我将如何使其可拖动？

```
div1.Controls.Add(new HtmlImage()
                {
                    ID = "img2",
                    Src = "Images/img2.gif",
                    Width = 30,
                    Height = 30
                }); 
```

对不起，伙计们，我解决了：最后，这就是原因。我在 $(this).css("opacity", "1.0");

```
$('#div1 img').draggable({
        containment: '#div1',
        $(this).css("opacity", "1.0");
}); 
```

删除了不透明度线，解决了我的可拖动问题。对不起大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:38:10.200

使用 jQuery 的[`on()`](http://api.jquery.com/on/)事件处理程序。

```
$( "#div1" ).on( "click", "img", function( event ){
  $( this ).draggable();
}); 
```

简而言之，附加`on`到动态加载图像的现有父元素。接下来有一个事件（如果您使用单击，则必须先单击，然后再次单击以拖动，因此您可能想尝试不同的事件）导致带有可拖动代码的函数在现在存在的任何 img 上运行。

# actionscript-3 - as3如何忽略掩码外的MOUSE_DOWN

> ID：14552896
> 
> 赞同：0
> 
> 时间：2013-01-27T22:08:47.480
> 
> 标签：actionscript-3, actionscript, masking, image-masking

我正在 as3 中开发一个类似拼图的游戏，其中使用从 Photoshop 导入的不规则形状的图层来掩盖其原始背景的一部分。

通过在遮罩及其内容上设置 cacheAsBitmap=true ，结果是一个很好的不规则形状，其透明边界部分被省略了。

然而，在 MOUSE_DOWN 时仍会检测到不可见的边界区域。我希望在可见的蒙面部分以外的任何地方都不会检测到鼠标。目前，我无法在舞台上可能出现在重叠透明区域后面的任何其他剪辑上检测到鼠标。

我在这里看到了一个涉及位图像素检测的解决方案，我还没有找到一种方法来应用它作为解决方案。我的蒙版区域的内容是形状或影片剪辑。

我希望有人可以帮助我找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:20:04.460

防止位图图形透明区域上的鼠标事件的最简单和最稳定的方法是创建一个单独的矢量形状作为鼠标的目标，并将`mouseEnabled`位图的标志设置为 false 或设置`hitArea`该形状的属性。

您可以在 Flash IDE 中为测试甚至生产手动创建此类形状。有时更适合编写位图跟踪脚本，通过检查像素透明度在运行时创建轮廓形状。

# ios - xcode / ios app distrubution ad hoc

> ID：14552897
> 
> 赞同：2
> 
> 时间：2013-01-27T22:08:47.613
> 
> 标签：ios, xcode, ad-hoc-distribution

是否可以在不先将设备置于开发模式的情况下通过 ad-hoc 分发应用程序？我已经成功地从一个带有 ipa 和清单文件的简单网页下载并安装了我的应用程序，我想在位于该国其他地方的朋友设备上进行测试。

他是否必须将他的设备设置为开发模式才能工作，如果在这种情况下，有没有办法在没有在他的 mac 上安装 xcode 的情况下轻松做到这一点？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:23:15.127

是的，您的朋友可以安装它，但最多只能安装 100 台设备。我几乎可以肯定他不必处于开发模式。[https://developer.apple.com/programs/ios/distribute.html](https://developer.apple.com/programs/ios/distribute.html)是我的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T22:34:27.497

TestFlight 是你最好的朋友。导出 ipa 文件并将其上传到您在[TestFlightApp.com](http://testflightApp.com)上的帐户。然后，您只需要用户的 UDID，他们就可以直接从手机上的 testFlight 应用程序下载您的构建。不需要 xcode 或开发模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T22:23:20.477

简单的答案是“是”。

您可以将 ADHOC 构建安装到具有设备标识符 (UDID) 的任何设备上。

这可能有更多细微差别，但我相信设备处于“开发模式”的主要目的是让您可以将该设备直接连接到您的开发机器，在 Xcode 中调试时您可以逐行执行，或者能够轻松查看连接设备上的控制台或崩溃日志。

# c++ - 在行星上实现四叉树地形（Geomipmapping）

> ID：14552898
> 
> 赞同：3
> 
> 时间：2013-01-27T22:08:48.610
> 
> 标签：c++, opengl, terrain, quadtree

我有一个 QuadTree，可以通过在节点中放置对象来细分它。我还有一个用 OpenGL 制作的四边形行星。问题是我不知道如何将它们放在一起。QuadTree 如何存储有关地球的信息？我是否将顶点存储在叶子四叉树节点中？如果是这样，我如何在不破坏纹理和法线的情况下将顶点数据分成 4 组。如果是这种情况，我是否使用索引？

所以简而言之，我的问题是：

我如何将我的顶点数据存储在四叉树中，以便我可以分割地球上的地形，以便地球在更近的范围内变得更详细。我假设这是通过使用相机作为分割节点的对象来完成的。

我已经阅读了很多文章，其中大多数都没有涵盖这一点。Quadtree 是我的应用程序中最重要的东西之一，因为它可以让我同时渲染许多行星，同时仍然能够在陆地上获得良好的清晰度。我的星球的一张漂亮照片，它是高清太阳： ![我的星球的一张漂亮照片，它是高清太阳！](../Images/e2a4beb87077ad4f16e6f0bb81a7af7c.png)

也可以在[此处找到该星球的视频。](http://www.youtube.com/watch?v=nxU-0LaBDlY)

我已经设法在一个平面上实现了一个简单的四叉树，但是我一直有很多洞，因为我认为我的位置是错误的。这是这里的最后一篇文章 - [http://www.gamedev.net/topic/637956-opengl-procedural-planet-generation-quadtrees-and-geomipmapping/](http://www.gamedev.net/topic/637956-opengl-procedural-planet-generation-quadtrees-and-geomipmapping/)你也可以在那里获得 src。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T23:32:29.637

您正在寻找的是一种类似于[ROAM](http://en.wikipedia.org/wiki/ROAM)（实时优化适应网格）的算法，能够根据相机的距离提高或降低模型的精度。然后该算法将使用您的四叉树。

查看 gamasutra 上的这个系列，了解如何渲染[实时程序宇宙](http://www.gamasutra.com/view/feature/3042/a_realtime_procedural_universe_.php)。

**编辑：**使用这些方法使用四叉树的原因是尽量减少不需要细节的区域（例如平坦地形）的顶点数量。[维基百科](http://en.wikipedia.org/wiki/Quadtree)上的四叉树定义非常好，您应该以此为起点。目标是为您的四叉树创建子节点，您可以在其中更改“高度”（您可以使用高度图生成立方体的边），直到达到预定义的深度。也许，作为第一遍，您应该尝试避免四叉树并使用简单的网格。当你开始工作时，你可以通过添加四叉树来“优化”你的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:34:37.447

要了解四叉树和地形数据如何协同工作以实现基于 LOD 的渲染，请阅读[本文](http://www.stereofx.org/papers/TERRAIN.PDF)。通过说明性示例易于理解。

我曾经在一个球体上实现了一个 LOD。这个想法是从一个简单的双金字塔开始，上金字塔代表北球，下金字塔代表南球。金字塔的底部与赤道对齐，尖端位于两极。然后通过连接三角形边缘的中点将每个三角形细分为 4 个更小的**三角形。****尽可能多地**取决于您的需求，到相机的距离和物体放置可能是您进行细分的触发器

# c# - 如何调用添加到控件的事件处理程序mentod？

> ID：14552900
> 
> 赞同：1
> 
> 时间：2013-01-27T22:09:31.963
> 
> 标签：c#, winforms

> **可能重复：**
> [如何从函数调用事件处理程序？](https://stackoverflow.com/questions/647815/how-can-i-invoke-an-event-handler-from-a-function)

我需要做一些我很确定应该很简单的事情，我有带有控件的表单，每个控件都有事件处理程序，可以设置正确格式的标签等
。我需要为特定类型的每个控件调用每个处理程序集合。我浏览了所有stackoverflow，但从未看到结果。

这是一个简单的应用程序，因此请停止评论，例如：“您需要从事件处理程序调用的附加函数”。

这是我尝试过的

```
 foreach (Control ctrl in Controls)
 {
     if (ctrl is TrackBar)
     {
        TrackBar tb = ctrl as TrackBar;
        Invoke(tb.Scroll, tb, new EventArgs());
     }
 } 
```

但我看到非常奇怪的错误

> 事件“System.Windows.Forms.TrackBar.Scroll”只能出现在左侧`+=`或`-=`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:14:18.490

您不能在声明事件的类之外引发事件（仅添加和删除处理程序可用）。与其尝试引发将调用事件处理程序的事件，不如简单地将处理程序逻辑提取到单独的方法中，然后调用该方法：

```
foreach (TrackBar tb in Controls.OfType<TrackBar>())
{
    DoSomething(tb.Value);
} 
```

和处理程序：

```
void trackBar_Scroll(object sender, EventArgs e)
{
    DoSomething(((TrackBar)sender).Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:15:48.170

出现错误是因为`tb.Scroll`is `event`not `delegate`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:40:32.837

您可以尝试使用`delegate`与事件相同`Signature`的方法，为您的控件创建一个通用事件处理程序，然后您可以调用它或正常响应事件。

IE

像这样的东西：

```
public partial class Form1 : Form
{
    public delegate void  trackbarscroll( object sender, EventArgs e);
    trackbarscroll tbs; 
    public Form1()
    {
        InitializeComponent();
        trackBar1.Scroll += new EventHandler(trackBar_Scroll);
        trackBar2.Scroll += new EventHandler(trackBar_Scroll);
        tbs = trackBar_Scroll; 
    }

    void trackBar_Scroll(object sender, EventArgs e)
    {
        TrackBar tb = (TrackBar)sender;

    }

    private void button1_Click(object sender, EventArgs e)
    {
        foreach (Control ctrl in Controls)
        {
            if (ctrl is TrackBar)
            {
                TrackBar tb = ctrl as TrackBar;
                Invoke(tbs,tb, new EventArgs());
            }
        }
    }
} 
```

# ssrs-2008 - SQL Server Reporting Services - 自定义安全模块

> ID：14552908
> 
> 赞同：1
> 
> 时间：2013-01-27T22:10:24.803
> 
> 标签：ssrs-2008, reporting-services

采取以下两种情况：-

开发人员 A 创建了一组报告：- 报告 A 显示奥迪汽车销售的详细信息 报告 B 显示梅赛德斯汽车销售的详细信息 报告 C 显示沃尔沃汽车销售的详细信息，等等 30 多个制造商中的每一个。所以我们有 30 个报告文件 (.rpt)。

开发人员 A 已经这样做了，因此他可以为每个 AD 用户组分配不同的安全权限：-

A组只能看到奥迪汽车销量，B组只能看到奔驰汽车销量，C组只能看到沃尔沃汽车销量，以此类推。

开发商 B 采取了不同的方法：-

她创建了一个接受“制造商”参数的报告（一个 .rpt 文件），以便显示任何制造商的数据。

在这两种情况下，报告都是从报告“菜单”加载的。在第一种情况下，每个制造商的超链接会将您带到相关报告。在第二种情况下，相同的超链接将制造商名称作为参数提供给单个报告。

这种情况的缺点是单个报告文件不能锁定给一组特定的用户。如果报告被锁定到 A 组，那么 B 组或 C 组根本无法查看它。

关于问题：-

为了使第二种情况可行，我们需要一种检查当前用户或当前用户组是否有权查看他们请求的数据的方法。

我正在考虑使用自定义函数，例如`CheckAccess(Username,Manufacturer)`返回真或假，并根据返回值将用户重定向到加载报告，或分别重定向到错误页面。

另一种选择是为每个制造商设置角色，然后将角色分配给每组人员。然后可以使用自定义函数来检查“Bill”是否具有“Audi”角色吗？

在这里寻找最佳方法的想法。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-28T07:53:38.610

我建议你：

1.  创建一个包含用户 ID 和报告参数的表。这样可以管理用户访问的安全性。

2.  然后在查询中使用 ssrs`User!UserID`引用作为参数。

作为一个额外的好处，您可以创建一个查询来仅填充允许活动用户查看的制造商。

# ember.js - 将类添加到 ember 链接到

> ID：14552911
> 
> 赞同：54
> 
> 时间：2013-01-27T22:10:33.520
> 
> 标签：ember.js

我尝试建立一个到嵌套路由的链接，并想向这个链接添加一个类（用于 twitter bootstrap）

结果应该是这样的：

```
< a href="/#/rents/42" class="btn btn-primary btn-small">do something< /a> 
```

第一次尝试：

```
{{#link-to "rent" rent}} 
```

给我一个资源链接，但我不能指定一个（css）类。在文档中，我看到只能指定标题属性

第二次尝试：

```
< a href="/#/rents/{{rend.id}}" class="btn btn-primary btn-small">do something< /a> 
```

也是个坏主意，因为 Ember 会在 href 中添加它的辅助标签 [用于自动更新]。

那么我能做什么呢？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-27T22:38:25.173

采用：

`{{#link-to 'rent' rent class='btn btn-primary btn-small'}}Go to rent{{/link-to}}`

作为`link-to`视图助手。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-13T20:46:12.503

你可以在助手中添加类就好了`{{#linkTo}}`，你只需要记住不要混淆 ember。

Ember 可能认为您的课程是 的`routeName`，`params`我在两者之后都包含了课程`params`，并且`routeName`效果很好。

```
{{#linkTo 'dashboard.screenshots' value.model class='thumbnail'}}
   ........
{{/linkTo}} 
```

生产

```
<a id="ember507" class="ember-view thumbnail" href="#/project-2/member-1/task-2/screenshot-30">
   .........
</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:33:40.573

如果你想从变量中手动构造一些东西`{{unbound}}`——ember.js 中有帮助器。

在你的情况下，代码将如下所示：

```
<a href="/#/rents/{{unbound rend.id}}" class="btn btn-primary btn-small">
   do something
</a> 
```

# ruby-on-rails - 嵌套 :has_many 茧

> ID：14552914
> 
> 赞同：1
> 
> 时间：2013-01-27T22:10:43.063
> 
> 标签：ruby-on-rails, cocoon-gem

我正在使用`cocoon`gem 创建一个嵌套形式，深度为 3 个对象。我的第一组对象工作得很好，渲染新的部分并添加到记录中，但是在尝试添加另一个嵌套`has_many`的相关对象时，表单正在呈现，但对象没有正确保存。[完整的代码“视图和模型”在这里。](https://gist.github.com/4173335bf56275489664)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:26:04.930

需要添加`objects_attributes`到我的`dashact.rb attr_accessible`声明中

（根本不在文档中）

# ios - Jasmine 应用程序与 YouTube 应用程序

> ID：14552915
> 
> 赞同：1
> 
> 时间：2013-01-27T22:10:45.887
> 
> 标签：ios, xcode, youtube-api, gdata-api

我正在制作一个 iOS 应用程序，它显示来自选定频道和播放列表的 youtube 视频`UITableView`。点击单元格时，视频会在`UIWebView`.

该应用程序将异步下载缩略图并缓存图像，以确保同一图像不会被下载超过一次。（缓存在核心数据中）

但我仍然觉得 Jasmine 应用加载内容的速度更快，甚至比 YouTube 应用还要快。Jasmine 如何比谷歌的 Youtube 应用更快地加载内容？

我可以做些什么来更快地加载数据？

# javascript - 创建自定义 JS 方法的正确方法

> ID：14552918
> 
> 赞同：3
> 
> 时间：2013-01-27T22:10:57.280
> 
> 标签：javascript, oop, object, methods, prototype

只是一个小的原型继承问题
最近我试图创建一个自定义方法，例如：JS`.toUpperCase()`和其他方法......它使用`this`来自前缀对象的引用。

它工作得很好^(（愚蠢无用的例子）)：

```
Object.prototype.customMethod = function(){
    return this.toLowerCase() ; 
}; 
```

并且可以像这样使用：

```
// access some object and get a key value
member.name; // JOHN
// use custom Method
member.name.customMethod(); // john 
```

问题是，似乎 Method`.customMethod()`全局继承了每个`Object`.
**如何减少干扰并仅引用前缀对象？还是根本没有？**

这是一个例子：http: **[//jsbin.com/evaneg/2/edit](http://jsbin.com/evaneg/2/edit)**

```
// CREATE OBJECT
var obj = { "text" : "Hi" };

// TEST OBJECT KEY VALUE
alert( "OBJECT TEXT: "+ obj.text );     // Hi

// CREATE CUSTOM METHOD ( just like e.g. JS's .toUpperCase() method )
Object.prototype.addText = function(){ 
  return this+' there!';  
};

// USE CUSTOM .addText() METHOD
alert( "OBJECT TEXT+method: "+obj.text.addText() ); // Hi there! // wow, the method works!

for(var key in obj){
  alert( 'obj KEYS: '+ key ); // text // addText
}

// hmm... addText method as obj Key ???
// ok let's try with a new one...

var foobee = { "foo" : "bee" };

for(var key in foobee){
  alert( 'foobee KEYS: '+ key ); // foo // addText
}

// addText  ...again... but why? 
```

我还在SOverflow 上阅读了这个[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)`new F( arguments )`和许多其他类似的东西，但它们中的大多数都专注于使用创建一个使用特定参数的东西，这不是我的情况。感谢您的任何解释

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T23:12:58.477

您不必将方法添加到每个对象——只需添加您正在使用的对象类型。如果它是一个字符串方法，您可以将它添加到`String.prototype`所有字符串中并对其进行定义。

```
var obj = { "text" : "Hi" };

// We only want to add this method to strings.
String.prototype.addText = function(){ 
  return this+' there!';  
};

alert("OBJECT TEXT+method: " + obj.text.addText()); 
```

请注意，这确实使方法**enumerable**，这意味着它们显示在一个`for..in`循环中。

* * *

### 对象.defineProperty

如果您只关心自 2010 年以来支持的浏览器（没有 IE8），那么我强烈建议您使用[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)来定义属性，这样它们就不会被枚举：

```
var obj = { foo: 'bar' };

// Extending all objects this way is likely to break other scripts...
Object.prototype.methodA = function() { return 'A'; };

// Instead you can do extensions this way...
Object.defineProperty(Object.prototype, 'methodB', {
    value: function() { return 'B'; },
    // Prevent the method from showing up in for..in
    enumerable: false,
    // Allow overwriting this method.
    writable: true,
    // Allow reconfiguring this method.
    configurable: true
});

for (var propertyName in obj) {
    console.log(propertyName);
    // Logs: "foo" and "methodA" but not "methodB"
} 
```

上面的代码记录了“foo”属性和“methodA”属性，但它没有记录“methodB”属性，因为我们将它定义为不可枚举。您还会注意到“toString”、“valueOf”、“hasOwnProperty”等内置方法也没有出现。这是因为它们也被定义为不可枚举的。

这样其他脚本将被允许`for..in`自由使用，一切都应该按预期工作。

* * *

### 回到特定的内置插件

我们也可以在特定类型的对象上定义不可枚举的方法`Object.defineProperty`。例如，以下`contains`向所有数组添加了一个方法，`true`如果数组包含一个值，`false`如果它不包含，则该方法将返回：

```
Object.defineProperty(Array.prototype, 'contains', {
    value: (function() {
        // We want to store the `indexOf` method so that we can call
        // it as a function. This is called uncurrying `this`.
        // It's useful for ensuring integrity, but I'm mainly using
        // it here so that we can also call it on objects which aren't
        // true Arrays.
        var indexOf = Function.prototype.call.bind(Array.prototype.indexOf);
        return function(value) {
            if (this == null)
                throw new TypeError('Cannot be called on null or undefined.');
            return !!~indexOf(this, value);
        }
    })(),
    enumerable: false,
    writable: true,
    configurable: true
});

var colors = [ 'red', 'green', 'blue', 'orange' ];

console.log(colors.contains('green'));  // => true
console.log(colors.contains('purple')); // => false 
```

请注意，由于我们在 上定义了此方法`Array.prototype`，因此它仅适用于数组。它在其他对象上不可用。但是，本着其他数组方法的精神，它的编写具有足够的通用性，可以在类似数组的对象上调用它：

```
function foo() {
    Array.prototype.contains.call(arguments, 5);
}

console.log(foo(1, 2, 3, 4, 5));  // => true
console.log(foo(6, 7, 8, 9, 10)); // => false 
```

调用`contains`上面的`arguments`作品，事件虽然`arguments`不是一个真正的数组。

* * *

### 简化样板

Using`Object.defineProperty`提供了很大的功能，但它也需要很多额外的代码，大多数人宁愿不要一直输入这些代码。ECMAScript 委员会在定义函数时就理解了这一点，但他们认为人们可以编写辅助函数来使代码更清晰。请记住这一点。例如，您始终可以执行以下操作：

```
var define = (function() {
    // Let's inherit from null so that we can protect against weird situations
    // like Object.prototype.get = function() { };
    // See: https://mail.mozilla.org/pipermail/es-discuss/2012-November/026705.html
    var desc = Object.create(null);
    desc.enumerable = false;
    desc.writable = true;
    desc.configurable = true;
    return function define(constructor, name, value) {
        if (typeof constructor != 'function'
            || !('prototype' in constructor))
            throw new TypeError('Constructor expected.');
        desc.value = value;
        Object.defineProperty(constructor.prototype, name, desc);
    }
})(); 
```

然后你可以这样做：

```
define(String, 'addText', function() {
    return this + ' there!';
});

console.log('Hi'.addText()); // => "Hi there!" 
```

甚至已经开发了一些小型库来帮助解决其中的一些问题。查看[Andrea Giammarchi 的 redefine.js](https://github.com/WebReflection/redefine#redefinejs)作为示例。

* * *

### 警告

这里唯一真正要注意的是，如果您将自己的方法添加到内置函数中，则可能会与 (a) JavaScript 的未来版本或 (b) 其他脚本发生名称冲突。（名称冲突问题将在下一版本的 JavaScript 中使用**symbols**解决。）许多人会认为这是一个足够大的问题，你不应该修改内置函数，而应该坚持只修改你“拥有的东西” " -- 你用自己的构造函数创建的东西。在某些（或许多）情况下，我倾向于同意，但我认为对于您自己的个人使用和学习，使用内置原型可能是一件非常有用和有趣的事情。

查看这篇关于权衡修改内置插件的一些成本的文章，以更详细地描述可能的缺点：[http](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/) ://perfectionkills.com/extending-built-in-native-objects-evil-or-not/ 请注意这篇文章有点过时了（1 1/2 年），他的主要抱怨之一是可枚举性问题，这`Object.defineProperty`在所有现代浏览器中都可以克服。正如我所说，另一个主要问题（名称冲突）将在下一版本的 JavaScript 中解决。情况正在好转！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:38:45.227

您也应该使用 new F() 。您只需要定义 F。让我们将 F 称为“名称”，以便更容易识别。

```
var Name = function(){
    var newName = {
        text: 'Hello',
        customMethod: function(){
            this.text = this.text.toUpperCase();
        }
    }
    return newName;
}

var Member = function(){
    var newMember = {
        name = new Name(),
        customMethod: function(){
        this.name.customMethod(); // make a member invoke upperCase on name (or any number of vars)
        }
    }
    return newMember;
}

var member = new Member();  //now when you run new Member, it runs the function above. and automatically makes your object with it's properties and methods.

console.log(member.name.text); //Hello!
member.customMethod();
// or
member.name.customMethod();
console.log(member.name.text); //HELLO! 
```

# node.js - nodejs将mongo连接添加到全局

> ID：14552920
> 
> 赞同：0
> 
> 时间：2013-01-27T22:11:13.200
> 
> 标签：node.js, mongodb

我将服务器开始处的 mongo 连接添加到我的全局 obj 以从任何文件访问它

```
// app.js
mClient.connect(mongoUrl, function(err, db) {
  global.mongo = db;
}); 
```

并像这样使用它

```
// store.js  
global.mongo.collection(thisColl, function(err, collection) {
  if (err) return self.emit("error", "collection not found");

  collection.find(query, select).toArray(function(err, stores) {
    if (err || !stores) return self.emit("error", "result not found");

    return self.emit("done", stores);
    });
  }); 
```

但有时我得到和单独修复的错误，我不知道如何

```
// Error
{"code":"InternalError","message":"Cannot call method 'collection' of undefined"} 
```

我这样做是因为它不会在每个请求上打开/关闭连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:48:23.070

我设法使它工作，也许不是更好的方法，但有效

```
// Create MongoDB connection
mClient.connect(mongoUrl, function(err, db) {
  global.mongo = db;
  // Start HTTP server  
  server.listen(4000, function() {
    console.log("%s listening at %s", server.name, server.url);
  });
}); 
```

# javascript - 使用javascript将两个图像从数组随机附加到'li'中

> ID：14552922
> 
> 赞同：0
> 
> 时间：2013-01-27T22:11:34.333
> 
> 标签：javascript, html-lists

我基本上是在尝试动态地将图像数组随机添加到他们自己的 li 元素中，这工作正常，但我现在真正想做的是为每个列表元素附加第二个图像。我不确定这将如何工作。这是我的工作随机脚本，它打乱了数组顺序：

```
var imgs = ['img-1.jpg','img-2.jpg','img-3.jpg','img-4.jpg','img-5.jpg','img-6.jpg'];

var i = imgs.length, j, tempi, tempj;
while (i--) {
    j = Math.floor(Math.random() * (i + 1));
    tempi = imgs[i];
    tempj = imgs[j];
    imgs[i] = tempj;
    imgs[j] = tempi;

    var img = imgs[i];
    var folder = 'img/';

    var li = document.createElement('li');
    li.className = 'phototickr';
    document.getElementById('stream').appendChild(li);

    var tickr = document.createElement('img');
    tickr.src = folder + img;
    tickr.alt = '';

    li.appendChild(tickr);
} 
```

我想要的最终标记是这样的：

```
<ul id="stream">
<li><img src="img-1.jpg"><img src="img-2.jpg"></li>
<li><img src="img-3.jpg"><img src="img-4.jpg"></li>
<li><img src="img-5.jpg"><img src="img-6.jpg"></li>
</ul> 
```

不知道如何理解它，或者是否有一个干净的解决方案，非常感谢任何帮助。不，我不想使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:47:52.580

提前打乱数组，然后任务变得更加清晰，但是如果你有奇数个图像，你需要留出余地。

```
var imgs = ['img-1.jpg','img-2.jpg','img-3.jpg','img-4.jpg','img-5.jpg','img-6.jpg'];

function shuffleArray(a) { // Fisher-Yates shuffle
    var i = a.length, t, j;
    while (--i) t = a[i], a[i] = a[j = ~~(Math.random() * (i+1))], a[j] = t;
}
shuffleArray(imgs);

var i = imgs.length, stream, li, img1, img2;
stream = document.getElementById('stream');
while ((i = i - 2) >= 0) {
    // <li>
    li = document.createElement('li');
    li.className = 'phototickr';
    // <img>
    img1 = document.createElement('img');
    img1.src = 'img/' + imgs[i];
    img1.alt = '';
    img2 = document.createElement('img');
    img2.src = 'img/' + imgs[i + 1];
    img2.alt = '';
    // append
    li.appendChild(img1);
    li.appendChild(img2);
    stream.appendChild(li);
}
if (i === -1) { // odd number of images
    // <li>
    li = document.createElement('li');
    li.className = 'phototickr';
    // <img>
    img1 = document.createElement('img');
    img1.src = 'img/' + imgs[0];
    img1.alt = '';
    // append
    li.appendChild(img1);
    stream.appendChild(li);
} 
```

[**小提琴示例**](http://jsfiddle.net/ChvMU/)（带有损坏的图像）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:38:14.567

我稍微修改了您的算法，这样您就不会不断地将项目附加到 DOM（因为这会降低性能）。我将图像添加到 li，然后将 li 添加到文档片段。我不是 100% 确定你的目标是什么，但我认为这会让你走上正轨。

```
var imgs = [
  'img-1.jpg',
  'img-2.jpg',
  'img-3.jpg',
  'img-4.jpg',
  'img-5.jpg',
  'img-6.jpg'
];

function randomize(list){
  var i = list.length, j, tempi, tempj;
  if(i == 0) return false;
  while(--i){
    j = Math.floor(Math.random() * (i + 1));
    tempi = list[i];
    tempj = list[j];
    list[i] = tempj;
    list[j] = tempi;
  }
}

function buildList(){
  var fragment = document.createDocumentFragment();
  var folder   = 'img/';

  randomize(imgs);
  var l = imgs.length;
  while(l > 1){
    var img1 = imgs[--l];
    var img2 = imgs[--l];

    var li = document.createElement('li');
    li.className = 'phototickr';

    var tickr1 = document.createElement('img');
    tickr1.src = folder + img1;
    tickr1.alt = '';

    var tickr2 = document.createElement('img');
    tickr2.src = folder + img2;
    tickr2.alt = '';

    li.appendChild(tickr1);
    li.appendChild(tickr2);
    fragment.appendChild(li);
  }

  document.getElementById('stream').appendChild(fragment);
} 
```

# php - 对象内的 PHP 对象

> ID：14552923
> 
> 赞同：0
> 
> 时间：2013-01-27T22:11:38.463
> 
> 标签：php, class, object

以下代码工作正常：

```
$memcached = new Memcached();
$memcached->setOption(Memcached::OPT_CLIENT_MODE, Memcached::DYNAMIC_CLIENT_MODE);
$memcached->setOption(Memcached::OPT_DYNAMIC_POLLING_INTERVAL_SECS, 60);    
$memcached->addServer('etc.expalp.cfg.apse1.cache.amazonaws.com', 11211);

$memcached->set('tester', 'set tester...babe!!', 600);
echo $memcached->get('tester'); 
```

但是，我想将对象的创建移到一个类中（因为设置了更多设置，我不希望每个页面都包含这些设置）。我尝试了以下方法，但它不起作用：

```
$elasticache = new elasticache();
$elasticache->memcached->set('tester', 'set tester...babe!!', 600);
echo $elasticache->memcached->get('tester'); 
```

然后我有一个名为 elasticache 的类（加载了 spl_autoload_register），如下所示：

```
class elasticache {

  function __construct() {
    $memcached = new Memcached();   
    $memcached->setOption(Memcached::OPT_CLIENT_MODE, Memcached::DYNAMIC_CLIENT_MODE);
    $memcached->setOption(Memcached::OPT_DYNAMIC_POLLING_INTERVAL_SECS, 60);
    $memcached->addServer('etc.expalp.cfg.apse1.cache.amazonaws.com', 11211);
  }

} 
```

失败了，所以很明显我在这里做错了什么。注意：Memcached() 对象是一个 PHP 动态库 - 请注意，这很重要）。任何人都有任何想法 - 我第一次尝试这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:13:03.977

$memcached 是类方法中的一个局部变量，一旦方法退出就会超出范围；$this->memcached 将是一个类属性，只要该类的对象存在就存在

```
class elasticache {
  public $memcached;

  function __construct() {
    $this->memcached = new Memcached();   
    $this->memcached->setOption(Memcached::OPT_CLIENT_MODE, Memcached::DYNAMIC_CLIENT_MODE);
    $this->memcached->setOption(Memcached::OPT_DYNAMIC_POLLING_INTERVAL_SECS, 60);
    $this->memcached->addServer('etc.expalp.cfg.apse1.cache.amazonaws.com', 11211);
  }

} 
```

# php - 用于导航选项卡的 AJAX / jQuery 用法

> ID：14552929
> 
> 赞同：2
> 
> 时间：2013-01-27T22:12:08.563
> 
> 标签：php, ajax

我想在我的 Wordpress 主题的管理页面中实现 AJAX。我似乎几乎在那里，但我不知何故淡入了错误的班级。

请查看此屏幕截图以及提供的类标签：

![主题选项截图](../Images/1895122a8bb6a695bea24d8d595e7ec1.png)

这是正在发生的事情：

1.  我单击外观 > 站点选项，页面显示正确，并带有单页选项

2.  我单击顶部导航选项卡之一，页面正确淡出。

3.  当页面淡入时 - 它看起来像下面的第二个屏幕截图。

![在此处输入图像描述](../Images/f981cf4b55c4254a2bb2abb3ab4df6f8.png)

这是当前处理请求的代码：

```
 jQuery('.nav-tab').live('click', function(e){ 
     e.preventDefault();
     var link = jQuery(this).attr('href'); //Get the href attribute
 jQuery('.page-form').fadeOut(500, function(){ //fade out the content area
 jQuery("#loader").show(); // show the loader animation
    }).load(link + '.page-form', function(){ jQuery('.page-form').fadeIn(500, function(){ 
 jQuery("#loader").hide(); //hide the loader
   });
  });
 }); 
```

所以我只需要知道如何在渲染内容中只显示“页面表单”类，而不是整个 wordpress 管理区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T23:09:46.967

您在 AJAX 请求中加载整个页面（如 Bence 所述）并修改响应服务器端*是*最好的选择，但是，*可以*使用 jQuery 解决此问题；

```
jQuery('.nav-tab').on('click', function(e){ 
    e.preventDefault();
    jQuery('.page-form').load(jQuery(this).attr('href') + ' .page-form');
}); 
```

这应该从单击的链接的位置加载 url，并从结果中提取具有类“.page-form”的元素，并将“.page-form”选择的元素替换为其内容。然而;

*   确保 url 和选择器（'.page-form'）之间存在 [空格]，代码中缺少空格
*   使用“类”作为选择器可能会返回多个元素，我不确定如果选择了多个元素会产生什么结果

请参阅此处的文档：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

注意：您在代码中使用 jQuery.live()，自 jQuery 1.7 ( [http://api.jquery.com/live/](http://api.jquery.com/live/) ) 起已弃用。您可能想要重写您的代码并使用 jQuery.on() 作为其替代品 ( [http://api.jquery.com/on/](http://api.jquery.com/on/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:40:48.727

除了在每个单独的选项卡中使用 ajax，您还可以将[jQuery ui 选项卡小部件](http://jqueryui.com/tabs/)应用于页面。然后你的标记会是这样的：

```
<head>

<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script type="text/javascript>
  $(document).ready(function() {
    $("#tabs").tabs();
  });
</script>

</head>
<body>
<div id="tabs">
  <ul>
    <li><a href="#tabs-General">General Settings</a></li>
    <li><a href="#tabs-Layout">Layout Options</a></li>
    <li><a href="#tabs-Content">Content Display</a></li>
    <li><a href="#tabs-Advanced">Advanced Options</a></li>
  </ul>
  <div id="tabs-General">
    <!-- general settings form -->
  </div>
  <div id="tabs-Layout">
    <!-- Layout options form -->
  </div>
  <div id="tabs-Content">
    <!-- content display form -->
  </div>
  <div id="tabs-Advanced">
    <!-- advance options form -->
  </div>
</div>
</body> 
```

这假设您能够将自定义脚本添加到头部。您还必须注意确保选项卡与您提供的任何保存/取消操作都能很好地配合，但您的 AJAX 解决方案也是如此。只是不同。

**编辑：**我还应该链接到控制淡入和淡出动画的[隐藏](http://api.jqueryui.com/tabs/#option-hide)和[显示选项。](http://api.jqueryui.com/tabs/#option-show)我认为您可以将这些选项添加到构造函数中（除了在`tabs()`调用完成后添加它们，如链接文档中的示例代码中所示），如下所示：

```
<script type="text/javascript>
  $(document).ready(function() {
    $("#tabs").tabs(
                hide : {
                    effect : 'fadeOut',
                    duration : 500
                },
                show : {
                    effect : 'fadeIn',
                    duration : 500
                }
            );
  });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T23:17:20.433

您可以继续使用整个页面`AJAX`，然后将其添加到导航栏和标题上：

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) &&
strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    return;
} 
```

这将检查页面是否已被请求，`AJAX`并且`return;`将停止加载任何内容。或者，您可以在`if`通过调用此语句时将所需的代码放入此语句中`AJAX`。

# angularjs - 我在哪里可以初始化模块范围的变量？

> ID：14552937
> 
> 赞同：14
> 
> 时间：2013-01-27T22:13:18.720
> 
> 标签：angularjs

我正在尝试做这样的事情：

```
angular.module('MyModule', ['ui'])
    .config(function($rootScope) {
        $rootScope.Gender = {
            'M': 'Male',
            'F': 'Female',
            'U': 'Unknown',
        };
    }) 
```

但我得到这个错误：

> 未捕获的错误：未知的提供者：来自 MyModule 的 $rootScope

如果我无法访问`$rootScope`我的模块配置内部，那么初始化模块范围变量的合适位置在哪里？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-27T22:41:51.890

除了使用`$rootScope`，您还可以使用角度常数或值：

```
angular.module('MyModule', ['ui']).constant( 'Gender', {
  'M': 'Male',
  'F': 'Female',
  'U': 'Unknown',
}); 
```

常量永远不能改变，而值可以。你可以在任何你需要的地方注入它：

```
app.controller( 'MainController', function ( $scope, Gender ) {
  console.log( Gender.M );
}); 
```

在我看来。对于站点范围的变量，这似乎比使用`$rootScope`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T22:25:18.467

您不能将服务（此处为 $rootScope）注入配置块。在配置阶段只能注入常量和提供者。

在您的情况下，正确的解决方案是使用运行块。只需将配置更改为运行，事情就应该按预期工作。

# php - 在我的 PHP 代码中找不到“语法错误”

> ID：14552938
> 
> 赞同：2
> 
> 时间：2013-01-27T22:13:22.650
> 
> 标签：php, database, mysqli, prepared-statement

我正在编写一个函数来验证用户。我创建与数据库的连接，然后准备查询，绑定参数，执行查询，将结果绑定到变量，检查查询是否返回结果。

如果是，我比较结果（绑定到变量），关闭语句，关闭连接，然后返回适当的值。好吧，这就是我认为我正在做的事情，但我不断收到语法错误，我无法弄清楚我做错了什么：

> 语法错误：预期：exit、if、标识符、变量、echo、do、while、for、foreach、declare、switch、break、continue、function、return、try、throw、use、global、unset、isset、empty、class , 接口, 数组, {, }, include, include_once, eval, require, require_once, print, ';', +, -, !, ~, ++, --, @, [, new, static, abstract, final , (, $

我的代码：

```
/**
     * Authenticates a user. 
     * @param type $email - String value
     * @param type $hashedPassword - String value
     * @return true if user is authenticated or false otherwise - Boolean value
     */
    function isValidUser($email, $hashedPassword)
    {
        //This variable will hold the value returned from the query to the database.
        var $rPassword = NULL;

        //Establish a connection
        $mysqli = new mysqli($GLOBALS['dbServer'], $GLOBALS['dbUserName'], $GLOBALS['dbPassword'], $GLOBALS['dbName']);

        //Check if connection failed
        if($mysqli->connect_error)
        {
            die('Connect Error (' . $mysqli->connect_errno . ') ' 
                    . $mysqli->connect_error);
        }

        $stmt = $mysqli->prepare("SELECT password FROM user_info WHERE email=?");
        $stmt->bind_param('s', $email);
        $stmt->execute();
        $stmt->bind_result($rPassword);
        if($stmt->fetch())
        {
            if(($rPassword != null) && ($rPassword == $hashedPassword))
            {
                $stmt->close();
                $mysqli->close();
                return true;
            } 
        }           
        $stmt->close();
        $mysqli->close();
        return false;           
    } 
```

我在没有使用准备好的语句的情况下这样做，并且代码运行良好，但后来我做了一些研究，发现准备好的语句是要走的路，因为它们有助于防止 SQL 注入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:17:44.943

```
var $rPassword = NULL; 
```

应该：

```
$rPassword = NULL; 
```

`var`用于初始化类中的属性。请参阅[文档](http://php.net/manual/en/keyword.class.php)。如果您使用的是类，则需要在方法（函数）之外对其进行初始化，然后通过`$this->rPassword`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T22:25:07.640

从 PHP 5.0 开始，该`var`关键字已被弃用...

它用于在 PHP4 中声明类成员变量，不再需要。它可以在 PHP5 中工作，但会`E_STRICT`在 PHP 5.0.0 到 5.1.2 版本中引发警告，从该版本开始，它已被弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:19:08.693

你有两个错误

一个不要重新启动 rPassword 为 NULL 只需让它像这样 $rPassword = 0; 或者使用大写使两个 NULL 和 null 相同的 NULL ！其次，rPassword 没有得到你需要的结果，你需要通过正确的语言看这里

[http://php.net/manual/en/mysqli-stmt.bind-result.php](http://php.net/manual/en/mysqli-stmt.bind-result.php)

```
 $stmt->bind_result($rPassword);
        if($stmt->fetch())
        {
            if(($rPassword == null) || ($rPassword != $hashedPassword))
            {
                $stmt->close();
                $mysqli->close();
                return false;
            } 
        } 
```

# linux - 创建的窗口没有出现

> ID：14552945
> 
> 赞同：2
> 
> 时间：2013-01-27T22:14:17.880
> 
> 标签：linux, opengl, glut, ubuntu-10.10

我安装了 GLUT，这是我用 GCC 编译的代码：

```
#include <GL/glut.h>

void display()
{
    glClearColor(1.0,1.0,1.0,1.0);
    glClear(GL_COLOR_BUFFER_BIT);
    glFlush();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE);
    glutInitWindowSize(500,500);
    glutCreateWindow("test");
    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
} 
```

这就是我编译它的方式：

```
gcc -Wall -o test -lGL -lGLU -lglut test.c 
```

而且我没有收到任何错误/警告。

但是当我执行它时，窗口不会出现。在下面的面板中，我看到有一个名为“test”的应用程序，但没有窗口。它冻结外壳几秒钟，然后我按`ctrl`+`c`并杀死它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T00:46:02.563

我在这里找到了答案：

[http://ubuntuforums.org/showthread.php?t=1156705](http://ubuntuforums.org/showthread.php?t=1156705)

我不得不暂时禁用 compiz 来渲染窗口。

```
metacity --replace &   # Disables compiz temporarily
./your_prog
compiz --replace &     # Enables compiz again 
```

# ios - 在 UIView 中初始化 UIScrollView 会显示警告：“本地声明隐藏实例变量”

> ID：14552950
> 
> 赞同：0
> 
> 时间：2013-01-27T22:15:13.897
> 
> 标签：ios, objective-c, uiview, uiscrollview

下面的行 ( `myScrollView.delegate = self;`) 是一个警告：`Local declaration of 'myScrollView' hides instance variable`。我的问题是，为什么会这样？

**我的视图控制器.h**

```
@interface myViewController : UIViewController
{
    UIScrollView *myScrollView;
} 
```

**我的视图控制器.m**

```
UIScrollView *myScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
myScrollView.delegate = self; // Warning: Local declaration of 'myScrollView' hides instance variable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T22:20:24.840

您的局部变量与实例变量具有相同的名称。将 myViewController.m 的第一行更改为：

```
myScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds]; 
```

你不应该再收到错误了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:17:43.523

发生这种情况是因为您声明了一个与实例变量同名的局部变量。只要局部变量在范围内，对`myScrollView`变量的赋值就会分配给局部变量，而不是实例变量。实际上，看起来您的意图是分配实例变量`myScrollView`，而不是本地变量。这种情况下，需要去掉变量名前面的类型。

这只是一个警告，而不是错误。编译器告诉你，代码的这个区域可能会让你的代码的读者感到困惑（在你编写代码的那一刻起经过足够长的时间之后，你也会感到困惑）。重命名局部变量以提高代码的可读性是一个好主意。

# php - ajax - 使用 AJAX 提交多个按钮但仅获得第一个值

> ID：14552958
> 
> 赞同：0
> 
> 时间：2013-01-27T22:15:48.627
> 
> 标签：php, jquery, ajax

我遇到了一个问题，我试图将提交按钮的值与表单一起传递给 ajax，但由于某种原因，无论我按下哪个按钮，唯一传递的值都是第一个按钮。表单还有更多内容，但我只是显示按钮。

```
<form>
    <input type="submit" name"finalize_invoice" id="finalize_invoice" value="Delete" />
    <input type="submit" name"finalize_invoice" id="finalize_invoice" value="Save" />
    <input type="submit" name"finalize_invoice" id="finalize_invoice" value="Finalize" />
</form> 
```

```
 $(document).ready(function(){
            $("form#submit").submit(function() {
            // we want to store the values from the form input box, then send via ajax below
            var invoice_temp_id = $('#invoice_temp_id').attr('value');
            var man_part_number = $('#man_part_number').attr('value');
            var customer = $('#customer').attr('value');
            var date = $('#date').attr('value');
            var shipdate = $('#shipdate').attr('value');
            var shipvia = $('#shipvia').attr('value');
            var ponumber = $('#ponumber').attr('value');
            var rep = $('#rep').attr('value');
            var invoicenotes = $('#invoicenotes').attr('value');
            var serial_number = $('#serial_number').attr('value');
            var skid = $('#skid').attr('value');
            var finalize_invoice = $('#finalize_invoice').attr('value');
            $.ajax({
            type: "POST",
            url: "includes/createfinalinvoice.php?",
            data: "invoice_temp_id="+ invoice_temp_id+
                "&man_part_number="+ man_part_number+
                "&customer="+ customer+
                "&date="+ date+
                "&shipdate="+ shipdate+
                "&shipvia="+ shipvia+
                "&ponumber="+ ponumber+
                "&rep="+ rep+
                "&invoicenotes="+ invoicenotes+
                "&serial_number="+ serial_number+
                "&skid="+ skid+
                "&finalize_invoice="+ finalize_invoice+
                $( this ).serialize(),
                success: function(data){
                    if (data == 1) {
                        var thiserror = 'You may not have any blank fields, please make sure there is a serial number in each field';
                        alert(thiserror);
                    }
                    if (data == 2) {
                        var thiserror = 'Your serial number(s) do not match with the Manufacture Part Numbers, please double check your list';
                        alert(thiserror);
                    }
                    if (data == 3) {
                        var thiserror = 'Some of your serial numbers are not located in the database, please make sure you entered the correct serial number';
                        alert(thiserror);
                    }
                    if (data == 4) {
                        var thiserror = 'This item has already been sold to another customer. Please report this to administration';
                        alert(thiserror);
                    }
                    if (data == 5) {
                        var thiserror = 'Everything went OK, you may continue and view the processed invoice';
                        alert(thiserror);
                    }
                    if (data == 6) {
                        var thiserror = 'There are no default prices setup for this customer matching the Manufacture Part Numbers. Please check and make sure they all exist before processing this list';
                        alert(thiserror);
                    }
                    if (data == 7) {
                        window.location = ('/admin/?mmcustomers=1&viewinvoice=1');
                    }

                }
            });
            return false;
            });
         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:25:43.220

```
<form>
    <input type="button" name"del_button" id="del_btn" value="Delete" />
    <input type="button" name"save_button" id="save_btn" value="Save" />
    <input type="button" name"finalize_button" id="finalize_btn" value="Finalize" />
</form> 

<script>
    $(document).ready(function(){
        var clicked_btn = '';
        $('form').submit(function(){ return false; });
        $('form input[type=button]').click(function(){ 
             clicked_btn = $(this).attr('id'); 
             yourSubmitFunction(clicked_btn); 
             return false; 
        });
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:27:02.223

您有三个具有相同s 的`submit`按钮。但是 s 必须是唯一的。这就是原因，jquery 只选择第一个按钮，无论单击哪个按钮。如果要使用单击按钮发送请求，请将函数绑定到单击事件`id``finalize_invoice``id``button`

```
$('form#submit input[type="submit"]').click(function() {
    ...
    var finalize_invoice = $(this).attr('value');
    $.ajax(...);
    ...
    return false;
} 
```

正如@thaJeztah 建议的那样，抑制提交事件`form`

```
$('form#submit').submit(function() {
    return false;
}); 
```

# c - read() 似乎进入了无限循环

> ID：14552959
> 
> 赞同：1
> 
> 时间：2013-01-27T22:15:49.277
> 
> 标签：c, linux

我正在尝试从套接字读取数据。出于某种我无法理解的原因，读取函数似乎进入了无限循环。我认为发生这种情况的原因是因为在使用 eclipse 进行调试时，调试器没有通过 read 函数。另外，当我用终端运行程序时，它会永远运行。帮助！！

附加信息：在 Linux 上运行，并且不确定是否与此问题有关，但我在程序中创建了线程。

我想我应该提到的另一件事：第一次调用 read() 时，它按预期工作并读取套接字中的整个消息。当第二次再次调用 read() 时问题就开始了（当没有什么可读取的时候）。我预计 read 会返回 0 来结束函数，但是 read 会进入无限循环。

这就是一切发生的地方：

```
read_write_res block_read_reply(int fd, void* buf, int max, int* read_size) {
int flag = 1;
if (read_size != NULL)
    *read_size = 0;
int i;
while (1) {
    i = read(fd, buf, max); /* HERE is where the debbuger gets stuck */
    if (i == 0 && flag == 1) //nothing to read
        continue;
    if (i == 0 && flag == 0)
        return READ_WRITE_SUCCESS;
    if (i < 0){
        return READ_WRITE_FAILURE;
    if (i > 0 && read_size != NULL)
        *read_size += i;
    }
    flag = 0;
    max -= i;
    buf = (char*) (buf) + i;
}
return READ_WRITE_SUCCESS; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T22:20:23.687

如果`read`返回 0，则表示您已达到文件结束状态。对于套接字或管道，这意味着将没有更多可读取的内容。曾经。所以`continue;`在这种情况下表演绝对不是你想做的。

# javascript - 尝试设置绑定到具有不同值的回调

> ID：14552961
> 
> 赞同：0
> 
> 时间：2013-01-27T22:16:03.503
> 
> 标签：javascript, jquery

我正在尝试构建一个 jquery 函数，该函数构建一系列按钮并将它们绑定到具有不同参数值的回调。我遇到的问题是，无论单击哪个按钮，始终使用最后一个按钮 [] 值“取消”的参数值调用回调。

```
var buttons = ["OK|ok", "Cancel|cancel"];
buildButtons(buttons, function(response){
    alert(response);
});

function buildButtons(buttons){
    for (i = 0; i < buttons.length; i++){
        var btnTitle = buttons[i].split("|")[0];
        var btnName = buttons[i].split("|")[1].toString();
        var btnElem = $('<button/>', {
            type: 'button',
            id: 'btn_' + btnName,
            html: btnTitle,
        })

        $(btnElem).on('click', function () {
            //..some other code
            fnResponse(btnName); //<<------- Issue Should return 'ok' or 'cancel'
        });
    }
} 
```

问题是回调总是使用最后一个元素的值 [btnName] 调用。无论单击哪个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:07:47.623

我在这里重现了这个问题：http: [//jsfiddle.net/makque/zgHGc/](http://jsfiddle.net/makque/zgHGc/) 我还包含了一个日志元素，这样我们就可以看到代码中到底发生了什么。

如果您尝试运行代码，我们可以看到`for`循环已执行，您可以看到在我们的日志元素中，仅`#menu`执行了按钮的创建和添加。并且事件处理程序的代码 [inside] 被跳过了......

因此，这证明了事件处理程序的定义是正确的：

> **JavaScript 可以在事件发生时执行**，例如当用户单击 HTML 元素时。
> 
> 要在用户单击元素时执行代码，请将 JavaScript 代码添加到 HTML 事件属性：
> 
> `onclick=JavaScript`

为了证明这一点，当我们单击按钮时，代码将唯一运行（正如我们的日志所证明的那样）......

**与问题有关：** 局部变量或与此相关的任何变量（即，在 for 循环内将保留它的最后一个给定值）

这意味着……例如，在

调用 0=i: 如果`var a = i`；a=0

在通话 1=i 时： 的值`var a = i`；a=1

因此，当你使用循环的局部变量运行事件处理程序代码时，当循环已经执行时，它会给你它的当前值，在我们的例子中是 CANCEL ...

**那么我们该如何解决这个问题呢？*&* @&$!**

在代码执行过程中`for loop`，所有满足条件的代码行都被执行，这意味着对于这些代码行：

```
1 $(btnElem).on('click', function () {
2    ...
3    alert(btnName);
4 }); 
```

第 1 行和第 4 行被执行，而第 2 行和第 3 行没有被执行，因为它们不满足条件：**点击时**

运行第 1 行和第 4 行意味着按钮元素已经注册它有一个 Eventhandler `onclick`，并且正在等待执行。

总之，原因：使用错误的变量解决方案：在上下文中使用变量

```
$(btnElem).on('click', function () {
    fnResponse($(this).html()); //passes the button's title
}); 
```

最后，我们可以有这样的代码：http: [//jsfiddle.net/makque/mq9cJ/](http://jsfiddle.net/makque/mq9cJ/)

希望我有所帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:21:14.190

您需要更改每个文字的上下文。你可以用 jQuery 做到这一点`each`：

```
function buildButtons(buttons, fnResponse){
    $.each(buttons, function(index, button)) {
        // wrapped into diffent function, context changed
        var btnTitle = button.split("|")[0];
        var btnName = button.split("|")[1].toString();
        var btnElem = $('<button/>', {
            type: 'button',
            id: 'btn_' + btnName,
            html: btnTitle,
        });

        $(btnElem).on('click', function () {
            //..some other code
            fnResponse(btnName); //<<------- Issue Should return 'ok' or 'cancel'
        });
    });
} 
```

另一种解决方案：[https ://gist.github.com/4650951](https://gist.github.com/4650951)

为什么需要另一个函数的一些简单示例：http: [//jsfiddle.net/nYmtV/](http://jsfiddle.net/nYmtV/)

# groovy - Groovy 闭包不适用于超类中的静态最终字段

> ID：14552964
> 
> 赞同：5
> 
> 时间：2013-01-27T22:16:54.943
> 
> 标签：groovy, static, closures, final

```
class Parent {
    final static String newLine = "*"
}
class Child extends Parent{
    List body = [3, 4, 5]
    String toString() {
        def str = new StringBuilder()
        body.each { str.append(it + newLine) }
        str
    }
}

def c = new Child()
println c 
```

以上是说明问题的一个简单示例。它无法使用`Groovy plugin`on编译`Eclipse`。删除`final`或者`static`在领域中的超类解决了这个问题。但是，我不知道为什么会这样。

[http://groovy.codehaus.org/Groovy+Beans](http://groovy.codehaus.org/Groovy+Beans) 在这个链接中，它提到了 Groovy 中使用的属性和字段的规则。我想应用的应该是最后一个，即元类。不幸的是，我仍然无法理解这种行为。

该行为在所有版本的 Groovy 中都一致地重现。也许有人可以向 Groovy 团队报告一个错误。我以前从来没有这样做过。如果有经验的人能做到这一点会更有效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:56:14.543

这很可能是[https://issues.apache.org/jira/browse/GROOVY-5776](https://issues.apache.org/jira/browse/GROOVY-5776)这比看起来更难修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T14:14:18.920

正如 blackdrag 已经指出的那样：这是一个错误。但另一种解决方法是添加`protected`关键字：

```
protected final static String newLine = "*" 
```

# ios - 为什么我的情节提要在执行前一行代码之前触发？

> ID：14552965
> 
> 赞同：0
> 
> 时间：2013-01-27T22:16:55.657
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch, uiactivityindicatorview

我正在我的游戏主菜单和游戏本身之间切换，我需要一个加载屏幕。当前的行为是我点击 Play 按钮，几秒钟内没有任何动作和segue，然后游戏开始。

暂时，我只是抛出 a`UIActivityIndicatorView`并手动告诉它 to `startAnimating`，然后将 segue 调用到另一个场景。问题是来自游戏视图（segue 的终点）的代码在视图在屏幕上发生物理变化之前正在运行（即我在执行游戏代码时看到菜单）。我不太明白这是怎么发生的，因为微调器被告知在调用 segue 之前显示。这是代码：

```
- (IBAction) startGame: (id) sender
{
    [_loadingView setHidden: NO];
    [_loadingSpinner startAnimating];
    [self performSegueWithIdentifier: @"PlayGame" sender: self];
} 
```

在 segue 完成之前（即，直到游戏的主视图以完全不同的方式显示在屏幕上`ViewController`（它正在查询 SQLite 数据库））才调用实际花费时间的东西，那么为什么微调器直到工作之后才显示已经完成？我应该为此使用 GCD 还是类似的？我已经做了一些实验，但它可能比我目前的水平略高。繁重的代码包含在一种方法中，所以我希望能够做这样的事情，按顺序执行这些行。

```
[spinner startAnimating];
[self callMethodThatTakesAges];
[spinner stopAnimating]; 
```

我尝试过使用`performSelectorOnMainThread:withObject:waitUntilDone:`，但似乎在这两个视图之间感到困惑。理想情况下，微调器应该显示在游戏视图上，而不是菜单视图上，所以我应该点击播放，到游戏视图的转换应该是即时的，然后微调器应该出现，加载应该开始，完成后微调器应该消失。

有任何想法吗？谢谢！

编辑：这是我的游戏视图控制器中的一些方法（`makeNewWord`是麻烦的方法）。

```
- (void) viewDidAppear: (BOOL) animated
{
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle: UIActivityIndicatorViewStyleWhiteLarge];
    [spinner setCenter: CGPointMake(240, 55)];
    [self.view addSubview: spinner];
    [spinner startAnimating];
    [self makeNewWord];
    [spinner stopAnimating];
    [self becomeFirstResponder];

}

- (void) viewDidLoad
{
    [super viewDidLoad];
    [self canBecomeFirstResponder];

    firstLetterMultiplierLetter = [[NSString alloc] init];
    userIsEnteringAWord = NO;

    [self setUpGestures];
} 
```

这是从我的主菜单视图中调用的方法，该方法进入游戏视图：

```
- (IBAction) startGame: (id) sender
{
    [self performSegueWithIdentifier: @"PlayGame" sender: self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:44:22.737

很难从你的问题中看出你在哪里。我会说你想这样做：

```
1) add the spinner to the game view 
2) in game view viewDidAppear, have [spinner startAnimating];
3) call [self methodThatTakesAges] (as the next line in viewDidAppear).
4) call [spinner stopAnimating] from whatever call back method you have in methodThatTakesAges 
```

startGame: 方法中唯一的东西应该是 performSegue 行。您可能还需要将开始下载的位置更改为我所说的位置，目前尚不清楚您从哪里开始。

# java - 循环查找斐波那契数列中的第 n 项

> ID：14552966
> 
> 赞同：1
> 
> 时间：2013-01-27T22:17:06.660
> 
> 标签：java, loops, sequence, fibonacci

我正在尝试编写一个可以在斐波那契型数列中找到第 n 项的程序（顺便说一下，它必须是非递归的）。它必须能够从用户那里获取任意两个数字，并将它们用作前两个术语。

例如，如果用户输入 f1 = 2 和 f2 = 3，则系列为 2、3、5、8、13、21 等。

用户还可以输入他们想要提出的术语。

我已经完成了大部分程序（我认为），但我有两个问题

1.  当找到第 n 项时，程序必须将 f1 和 f2 计为第 1 项和第 2 项。我无法做到这一点，它将第 3 个数字计为第一个
2.  该程序打印出直到第 n 项的所有数字，但我希望它只打印出第 n 项

我已经有一段时间了，我对 Java 很陌生，两年前我参加了一个介绍课程，现在我在下一堂课，遇到了一些麻烦，所以任何帮助都是赞赏！

```
import java.util.Scanner;
public class fibs
{
  public static void main(String[] args)
  {
    Scanner keyboard = new Scanner(System.in); // readying keyboard for input
    int f1, f2, n, fib;
    System.out.println("Please enter a vaule for F(1):");
    f1 = keyboard.nextInt();
    System.out.println("Please enter a vaule for F(2):");
    f2 = keyboard.nextInt();
    System.out.println("Please enter a vaule for n :");
    n = keyboard.nextInt();

    if ((f1<0)||(f2<0)||(f1>1000)||(f2>1000)||(n<1))
    {
      System.out.println("Please try again");
      return;
    }
    else
    {
      int i;
      for (i=0; i<n; i++)
      {

        fib=f1+f2;
        f1=f2;
        f2=fib;
        System.out.println( fib );

      }

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:26:49.503

第二个问题的解决方案只需键入**System.out.println(fib);** 在循环之外。所以会直接显示fib的最终值。我无法理解你的第一个问题！

初始化 fib ( int fib = 0 ) 您还可以使用 for 循环声明变量。所以不需要在 for 循环之前声明 i 。只需在 for 循环中声明它

```
for (int i=2; i<n; i++)  
{  
    fib=f1+f2;  
    f1=f2;  
    f2=fib;  
}  

System.out.println( fib ); 
```

> **完整代码**

```
import java.util.Scanner;  
public class fibs  
{  
 public static void main(String[] args)  
 {  
  Scanner keyboard = new Scanner(System.in); // readying keyboard for input  
  int f1, f2, n, fib = 0;  
  System.out.println("Please enter a vaule for F(1):");  
  f1 = keyboard.nextInt();  
  System.out.println("Please enter a vaule for F(2):");  
  f2 = keyboard.nextInt();  
  System.out.println("Please enter a vaule for n :");  
  n = keyboard.nextInt();  

  if ((f1<0)||(f2<0)||(f1>1000)||(f2>1000)||(n<1))  
  {  
   System.out.println("Please try again");  
   return;  
  }  
  else  
  {  
   for (int i=2; i<n; i++)  
   {  
    fib=f1+f2;  
    f1=f2;  
    f2=fib;        
   }
   System.out.println( fib );  
  }  
 }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:27:44.513

1）从2开始你的循环：

```
for (i=2; i<n; i++) 
```

2) 将对 println() 的调用置于循环之外。

```
for (i=2; i<n; i++)  
{  
    fib=f1+f2;  
    f1=f2;  
    f2=fib;  
}
System.out.println(fib); 
```

# maven - 如何从 Maven 中排除依赖项

> ID：14552969
> 
> 赞同：0
> 
> 时间：2013-01-27T22:17:20.617
> 
> 标签：maven, conflict

我是 Maven 的新手，我收到了这个错误：

```
SEVERE: SLF4J: Class path contains multiple SLF4J bindings. 
SEVERE: SLF4J: Found binding in [jar:file:/.../WEB-INF/lib/slf4j-jdk14-1.5.8.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SEVERE: SLF4J: Found binding in [jar:file:/.../WEB-INF/lib/slf4j-log4j12-1.6.4.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SEVERE: SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SEVERE: SLF4J: The requested version 1.5.8 by your slf4j binding is not compatible with [1.6]
SEVERE: SLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details.
SEVERE: Exception while preparing the app
SEVERE: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/String; 
```

所以我在想的是我需要摆脱这个 slf4j-jdk14-1.5.8.jar。有可能还是有其他解决方案。这是我在 pom 文件中的依赖项：

```
<dependencies>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>
        <version>1.0-rev-1</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>            
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency> 
    <dependency>
        <groupId>aopalliance</groupId>
        <artifactId>aopalliance</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.6.10</version>
    </dependency>
    <dependency>
        <groupId>org.skywaysoftware</groupId>
        <artifactId>skyway-spring-utils</artifactId>
        <version>7.1.3</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.10.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.22</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>
    <dependency>
        <groupId>com.atomikos</groupId>
        <artifactId>transactions-jta</artifactId>
        <version>3.7.0</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.4</version>
    </dependency>

</dependencies> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T22:24:33.830

跑去`mvn dependency:tree`看看是什么把它拉进来了。

然后按照[如何使用依赖排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#How_to_use_dependency_exclusions)排除它，大致：

```
<dependency>
  <groupId>org.foo.bar</groupId>
  <artifactId>offending-artifact</artifactId>
  <version>1.0</version>
  <exclusions>
    <exclusion>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-jdk14</artifactId>
    </exclusion>
  </exclusions> 
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T22:21:14.273

来自[http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

```
<project>
...
 <dependencies>
<dependency>
  <groupId>sample.ProjectA</groupId>
  <artifactId>Project-A</artifactId>
  <version>1.0</version>
  <scope>compile</scope>
  <exclusions>
    <exclusion>  <!-- declare the exclusion here -->
      <groupId>sample.ProjectB</groupId>
      <artifactId>Project-B</artifactId>
    </exclusion>
  </exclusions> 
</dependency>
</dependencies>
</project> 
```

# wordpress - 将永久链接设置为 Wordpress 中的任何域

> ID：14552973
> 
> 赞同：0
> 
> 时间：2013-01-27T22:17:43.713
> 
> 标签：wordpress

这是否可以在没有太多努力或插件的情况下实现？如果帖子没有任何内容，它只是立即重定向到我在我的投资组合中创建的网站。

请注意，我不希望实际帖子中的脚本重定向，因为我只使用 Wordpress 作为后端并获取 JavaScript 主干应用程序使用的所有数据。

编辑：在评论中添加了一些额外的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:55:39.790

**简短回答：**不。您不能在不直接编辑数据库的情况下将您的 Post Permalink 设置为外部资产。

**长答案：**首先，您需要了解永久链接的目的。它不仅仅是到*某个地方*的任意链接。它专门用于存储特定帖子在您的 Wordpress 安装环境中的位置。

您的帖子不在 example.com 上。它有自己的 ID，Wordpress 为其预留了一个特定位置，可以在您的域上看到它。就这样吧。

相反，您应该做的是使用 Wordpress 为您提供的工具来实现您想要的。插件不存在满足您的需求，因为 - 坦率地说 - 在正确处理时这是一项相当微不足道的任务，并且不保证使用外部资源。

## 那么正确的方法是什么？

使用[自定义字段](http://codex.wordpress.org/Custom_Fields)。将您的自定义字段命名为“externalHref”，并填写您想要指向的网站的链接，以防没有帖子内容。

然后在您用于生成帖子的任何模板中，只需检查是否存在名为“externalHref”的自定义字段或检查不存在帖子内容。在任何一种情况下，您都可以简单地构建一个指向您需要的任何地方的链接，而不是使用[永久链接生成链接。](http://codex.wordpress.org/Function_Reference/the_permalink)

# angularjs - 如何使用 AngularJS 获取选项文本值？

> ID：14552976
> 
> 赞同：37
> 
> 时间：2013-01-27T22:17:47.890
> 
> 标签：angularjs

我正在尝试使用 AngularJS 获取选项列表的文本值

这是我的代码片段

```
<div class="container-fluid">
        Sort by:
        <select ng-model="productList">
            <option value="prod_1">Product 1</option>
            <option value="prod_2">Product 2</option>
        </select>
</div>

<p>Ordered by: {{productList}}</p> 
```

`{{productList}}`返回选项的值，例如：prod_1。我正在尝试获取文本值“产品 1”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-27T22:42:58.767

最好的方法是在元素上使用`ng-options`指令。`select`

**控制器**

```
function Ctrl($scope) {
  // sort options
  $scope.products = [{
    value: 'prod_1',
    label: 'Product 1'
  }, {
    value: 'prod_2',
    label: 'Product 2'
  }];   
} 
```

**HTML**

```
<select ng-model="selected_product" 
        ng-options="product as product.label for product in products">           
</select> 
```

这会将所选`product`对象绑定到`ng-model`属性 - `selected_product`。之后你可以使用这个：

```
<p>Ordered by: {{selected_product.label}}</p> 
```

**jsFiddle**：http: [//jsfiddle.net/bmleite/2qfSB/](http://jsfiddle.net/bmleite/2qfSB/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-25T23:15:53.440

除了`ng-options="product as product.label for product in products">`在 select 元素中，您甚至可以使用它：

```
<option ng-repeat="product in products" value="{{product.label}}">{{product.label}} 
```

这也很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-22T12:02:08.103

你也可以这样做：

```
<select class="form-control postType" ng-model="selectedProd">
    <option ng-repeat="product in productList" value="{{product}}">{{product.name}}</option>
</select> 
```

其中“selectedProd”将是选定的产品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-30T21:35:38.910

```
<div ng-controller="ExampleController">
  <form name="myForm">
    <label for="repeatSelect"> Repeat select: </label>
    <select name="repeatSelect" id="repeatSelect" ng-model="data.model">
      <option ng-repeat="option in data.availableOptions" value="{{option.id}}">{{option.name}}</option>
    </select>
  </form>
  <hr>
  <tt>model = {{data.model}}</tt><br/>
</div> 
```

AngularJS：

```
angular.module('ngrepeatSelect', [])
 .controller('ExampleController', ['$scope', function($scope) {
   $scope.data = {
    model: null,
    availableOptions: [
      {id: '1', name: 'Option A'},
      {id: '2', name: 'Option B'},
      {id: '3', name: 'Option C'}
    ]
   };
}]); 
```

取自 AngularJS 文档

# servicestack - ServiceStack 空元数据

> ID：14552977
> 
> 赞同：1
> 
> 时间：2013-01-27T22:17:49.527
> 
> 标签：servicestack

看到一个奇怪的问题，获取 xml、json 和 jvs 的空元页面。使用以下命令行应用程序。如何调试这些问题？

```
namespace ConsoleApplication2
{
    public struct NativeUser
    {
        public int login;
        public string group;
        public string name;
    }

    [DataContract]
    public class User
    {
        private NativeUser _native;

        public User() { }

        public User(NativeUser native)
        {
            _native = native;
        }

        public static implicit operator NativeUser(User user)
        {
            return user._native;
        }

        public static implicit operator User(NativeUser native)
        {
            return new User(native);
        }

        // ReSharper disable InconsistentNaming
        [DataMember]
        public int login
        {
            get { return _native.login; }
            set { _native.login = value; }
        }

        [DataMember]
        public string group
        {
            get { return _native.group; }
            set { _native.group = value; }
        }
        [DataMember]
        public string name
        {
            get { return _native.name; }
            set { _native.name = value; }
        }
    }

    [Description("GET account, all or by list of groups or by list of logins")]
    [Route("/accounts/{groups}", "GET")]
    [Route("/accounts/{logins}", "GET")]
    [Route("/accounts/", "GET")]
    public class Accounts : IReturn<User[]>
    {
        public string[] groups { set; get; }
        public int[] logins { set; get; }

        public Accounts() { }

        public Accounts(params int[] logins)
        {
            this.logins = logins;
        }

        public Accounts(params string[] groups)
        {
            this.groups = groups;
        }
    }

    public class Host : AppHostHttpListenerBase
    {
        public Host() : base("Test", 
                            typeof(Accounts).Assembly)
        {

        }

        public override void Configure(Funq.Container container)
        {

        }
    }

    public class Servce : IService
    {
        public object Get(Accounts request)
        {
            return new List<User>(){new User(new NativeUser())};
        }

    }

    class Program
    {
        static void Main(string[] args)
        {
            var host = new Host();
            host.Init();
            host.Start("http://+:12345/");

            global::System.Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:25:06.423

Nm，发现错误：

```
public class Accounts : IReturn<User[]> 
```

需要是

```
public class Accounts : IReturn<List<User>> 
```

另一个非常值得注意的事情是：所有 DTO 和被传回的对象和 DTO 中的第四个对象都需要一个空的构造函数才能正确生成元数据。不确定这是设计使然还是错误

# c++ - C++：在当前实例被销毁后创建类的新实例的问题

> ID：14552981
> 
> 赞同：0
> 
> 时间：2013-01-27T22:18:14.060
> 
> 标签：c++, segmentation-fault, instance

我正在研究二叉搜索树 (BST) 程序。根据作业的要求，用户加载一个文本文件来构建树。如果用户愿意，他们可以通过加载新的文本文件来创建新树。加载新的文本文件应该会破坏旧树。

为了适应这个要求，我创建一棵新树的方法`readNewFile()`，首先检查一棵树是否已经存在。如果是这样，它将在树上运行析构函数。但是，然后我需要创建一个存在于 范围之外的新树，`readNewFile()`以便可以全局访问它。这可能吗？如果是这样，你能解释一下如何吗？

我的简化代码：

```
int main() {

    //BST
    BST rootTree;

    readNewFile(rootTree);
    readNewFile(rootTree);

    return 0;
}

void readNewFile(BST& tree) {
    ifstream inFile;
    string fileName;

    // if tree was previously filled, destroy it
    if (tree.rootPtr() != NULL) {
        tree.~BST();
        BST tree = new BST();
    }

    cout << "\nEnter file to load: ";
    cin.ignore();
    getline(cin, fileName);
    cout << "Opening file " << fileName << endl;
    inFile.open(fileName.c_str(), ios::in);

    // Populates tree... //

} 
```

析构函数（在 BST.hpp 中）：

```
BST::~BST() {
    destroyTree(root);
}

void BST::destroyTree(TreeNode*& treePtr) {
    if (treePtr != NULL) {
        destroyTree(treePtr->leftChildPtr);
        destroyTree(treePtr->rightChildPtr);
        delete treePtr;
    }
} 
```

这会返回一个段错误，这是有道理的，因为树被破坏了。但是，有没有办法可以创建一个与被破坏的范围相同的新树`BST rootTree`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:28:57.607

满足要求的一种方法是`del()`在您的`BST`类中调用一个方法。它所做的只是删除树的所有节点，但不删除根指针。这是指向根节点的指针。调用后`del()`，您可以开始创建新树。伪代码看起来像这样：

```
// if tree was previously filled, destroy it
if (tree.rootPtr() != NULL) {
   tree.del()
}

// read the input file
// Start inserting the new nodes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:29:16.307

首先：代码有什么问题。

正如您已经指出的那样，如果树被破坏，您将无法再次使用它。在这种情况下，它是双重坏的：通过在`BST`in上调用析构函数`readNewFile()`，你会导致析构函数被调用两次——一次是当你显式调用它时，第二次是当本地实例 in`main()`超出范围时。 [这是不好的。](http://www.parashift.com/c++-faq/dont-call-dtor-on-local.html)

* * *

现在关于如何修复它：

最简单的方法就是在`rootTree`内部声明为指针`main()`，然后将`readNewFile()`指向指针的指针作为参数。 `readNewFile()`将破坏指针指向的现有树，然后将指针重置为指向它创建的新树。简单的。

但是，更好的设计是`readNewFile()`创建`BST`. 然后`main()`应该构造一个新的`BST`并调用该实例的`readNewFile()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:27:01.117

除非您非常清楚自己在做什么，否则您永远不会直接调用析构函数。然后，这通常是因为它是使用 Placement new 创建的。此外，“T t = 新 T；” 没有意义，将指向 T 的指针分配给 T。我的猜测是您在这里复制 Javaism，但是这两种语言的对象模型太不同了。

# sql-server - 多维数据集中的地图向下钻取

> ID：14552982
> 
> 赞同：0
> 
> 时间：2013-01-27T22:18:28.983
> 
> 标签：sql-server, reporting-services, map, data-visualization, ssrs-2008-r2

我使用 SSRS 2008R2，我的数据在一个多维数据集中。在我的立方体中，我有 3 个维度：

1.  具有层次结构的地理维度（国家 -> 部门 -> 城镇）
2.  具有层次结构的活动（组 -> 子组 -> 家庭）
3.  时间与年份

还有一个衡量标准：价值

我想建立一个报告，在地图中显示参数函数的测量值。

例如：用户可能希望查看 1 个子组或 1 个组的国家和城镇（地理维度）的度量值。

困难在于在同一数据集的地理层次结构和活动之间导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:21:27.183

您需要带有几何列的形状文件或 SQL 表来提供地理维度（例如国家、部门、城镇）和多维数据集数据之间的链接。SQL 表是最好的，因为通常可以发现数据质量问题，您可以发出 SQL 空间查询（例如 X 200km 内的所有城镇），并且运行时性能更好。

# android - 如何从 SQLite 数据库中获取数据并在 ListView 中显示

> ID：14552983
> 
> 赞同：0
> 
> 时间：2013-01-27T22:18:47.170
> 
> 标签：android, sqlite

我在这里编辑了我以前的帖子。（[如何使用 Android SQLite 数据库](https://stackoverflow.com/questions/14552055/how-to-use-android-sqlite-database)）

在这篇文章中，我更改了“显示”按钮的代码。现在我正在尝试访问数据库。我添加了一个 ListView 并尝试在其中显示数据库的内容。但再次得到同样的错误。（“不幸的是，学习已停止。”）点击“显示”按钮。

这是完整的代码 -

```
 package com.example.learn;

    import android.os.Bundle;
    import android.app.Activity;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ListView;

    public class MainActivity extends Activity {

        Button b1, b2, b3;
        EditText t1;
        ListView lv1;
        SQLiteDatabase db;
        Cursor c;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            b1 = (Button) findViewById(R.id.button1);
            b2 = (Button) findViewById(R.id.button2);
            b3 = (Button) findViewById(R.id.button3);
            t1 = (EditText) findViewById(R.id.editText1);
            lv1 = (ListView) findViewById(R.id.listView1);

            db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
            db.execSQL("CREATE TABLE IF NOT EXISTS Names(Name VARCHAR)");

            b1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                    if (t1.getText().toString().equals("")) {
                        t1.setText("Enter Name");
                    }

                    else {
                        String input = t1.getText().toString();
                        db.execSQL("INSERT INTO Names VALUES(" + "'" + input + "'"
                                + ")");
                    }

                }
            });

            b2.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    c = db.rawQuery("SELECT * FROM Names", null);
                    int count = c.getCount();

                    String[] values = new String[count + 1];
                    int i = 0;
                    do {
                        values[i] = c.getString(c.getColumnIndex("Name"));
                        i++;
                    } while (c.moveToNext());
                    // Define a new Adapter
                    // First parameter - Context
                    // Second parameter - Layout for the row
                    // Third parameter - ID of the TextView to which the data is
                    // written
                    // Forth - the Array of data

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                            getBaseContext(), android.R.layout.simple_list_item_1,
                            android.R.id.text1, values);

                    // Assign adapter to ListView
                    lv1.setAdapter(adapter);

                }
            });

            b3.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    db.execSQL("DELETE FROM Names");
                }
            });
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    }

and this is activity_main.xml -

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:hint="Add" >

    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="18dp"
        android:text="@string/add" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_centerHorizontal="true"
        android:text="@string/show" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button2"
        android:layout_alignBottom="@+id/button2"
        android:layout_alignParentRight="true"
        android:text="@string/del" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1" >

    </ListView>

</RelativeLayout> 
```

我觉得有问题

```
do {
     values[i] = c.getString(c.getColumnIndex("Name"));
     i++;
   }
while (c.moveToNext()); 
```

现在有什么问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:40:19.977

尝试像这样循环：

```
for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
   values[i] = c.getString(c.getColumnIndex("Name"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T19:57:51.027

我认为您应该尝试此代码。

```
Cursor cursor = new Cursor();
cursor.moveToFirst();
do{
values[i++] = cursor.getString(cursor.getColumnIndex("name"));
}while(cursor.moveToNext());
cursor.close(); 
```

# python - django-extensions test_error_logging

> ID：14552986
> 
> 赞同：4
> 
> 时间：2013-01-27T22:18:58.717
> 
> 标签：python, django, django-extensions

为 django 运行全套测试时，我收到此错误：

```
FAIL: test_error_logging (django_extensions.tests.management_command.CommandTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/django_extensions/tests/management_command.py", line 35, in test_error_logging
    self.assertEqual(len(handler.messages['error']), 1)
AssertionError: 0 != 1 
```

谁能解释为什么我可能会得到这个以及如何阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:02:37.777

您描述的行为类似于django-extensions github 页面上的这个[问题。](https://github.com/django-extensions/django-extensions/issues/279)

看起来解决方案是更新到版本 1.0.3

# c++ - 移除栈中的空元素

> ID：14552988
> 
> 赞同：0
> 
> 时间：2013-01-27T22:19:10.167
> 
> 标签：c++, data-structures, null, linked-list, stack

我有作业要求删除堆栈中的空元素？但我认为如果我定义结构，堆栈中不可能有一个空元素：

```
struct element{
  type value;
  element* next;
} 
```

`element`如果它是最后一个，则仅指向 null。

我非常感谢任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:22:47.970

对于堆栈的元素内容，您不需要特殊的结构或类。你`element struct`看起来更像是在单向链表中使用的东西。

要从堆栈中删除空值：创建第二个临时`stack`. `Pop`来自第`stack`一个的元素一个接一个，如果它们被`null`丢弃。如果没有，`push`他们就换上新的`stack`. 要保留与开始时相同的 LIFO 排序，您需要从临时堆栈中填充一个新堆栈或原始堆栈。

当您浏览完原始堆栈中的所有元素后，您将获得分配所要求的内容。删除了所有空元素的堆栈。

# javascript - 哪种将javascript事件与jquery绑定的方法性能更高？

> ID：14552991
> 
> 赞同：0
> 
> 时间：2013-01-27T22:19:41.023
> 
> 标签：javascript, jquery, performance, events

假设您有一个带有表单的网页，并且您希望在提交其中一个表单时触发处理程序，或者每当提交稍后添加到页面的表单时。哪种方法更好：

```
$('form').on('submit', handler); 
```

或者

```
$(document).on('submit', 'form', handler); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:23:52.273

不是哪个更好，而是哪个更适合你的需要，两种方法都好，各有各的用处。

第一个只监听表单内部发生的提交，后者监听所有提交，等待它们冒泡到`document`，然后触发`handler`回调。

请注意， with `onsubmit`，它没有太大的区别，因为 with`mousemove`或`click`which 可以出现在 中的每个地方`<body>`， submit 只发生在 中`<forms>`，但它一直冒泡到文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:24:53.147

如果您希望它应用于稍后将动态添加到页面的表单，则后者是唯一可以使用的版本。

（老实说，除非您的页面有数千个表单，否则性能差异应该无关紧要）

# caching - Amazon Cloudfront：私有内容，但最大化本地浏览器缓存

> ID：14552997
> 
> 赞同：16
> 
> 时间：2013-01-27T22:20:47.473
> 
> 标签：caching, amazon-web-services, amazon-s3, http-headers, amazon-cloudfront

对于我的 Web 应用程序中的 JPEG 图像传输，我正在考虑使用 Amazon S3（或 Amazon Cloudfront，如果它被证明是更好的选择）但有两个可能相反的要求：

1.  图片是私人内容；我想使用过期时间短的签名 URL。
2.  图像很大；我希望它们被用户的浏览器长期缓存。

我正在考虑的方法是：

1.  用户请求 www.myserver.com/the_image
2.  我服务器上的逻辑确定允许用户查看图像。如果他们被允许...
3.  将浏览器 ( ) 重定向`is HTTP 307 best ?`到签名的 Cloudfront URL
4.  签名的 Cloudfront URL 在 60 秒后过期，但其响应包括“ `Cache-Control max-age=31536000, private`”

我预见的问题是，下次加载页面时，浏览器将寻找 www.myserver.com/the_image 但其缓存将用于已签名的 Cloudfront URL。由于过期时间非常短，我的服务器将第二次返回一个不同的签名 Cloudfront URL，因此浏览器不会知道它可以使用它的缓存。

**有没有办法让我的网络服务器代理来自 Cloudfront 的图像（这显然否定了使用 Cloudfront 的所有好处）？**

想知道是否有一些我可以做`etag`但`HTTP 304`不能完全加入这些点的事情......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-16T01:29:48.017

总而言之，您有想要通过 Amazon Cloudfront 通过签名 url 提供的私有图像，并且到期时间很短。然而，虽然通过特定 url 的访问可能是有时间限制的，但即使在 url 过期之后，客户端仍希望在后续请求中从缓存中提供图像。

无论客户端如何到达云端 url（直接或通过某些服务器重定向），图像的客户端缓存将仅与用于请求图像的特定 url 相关联（而不是任何其他 url）。

例如，假设您的签名网址如下（出于示例目的缩短了到期时间戳）：

```
http://[domain].cloudfront.net/image.jpg?Expires=1000&Signature=[Signature] 
```

如果您希望客户端从缓存中受益，则必须将其发送到相同的 url。例如，您不能将客户端定向到以下 url 并期望客户端使用来自第一个 url 的缓存响应：

```
http://[domain].cloudfront.net/image.jpg?Expires=5000&Signature=[Signature] 
```

目前还没有缓存控制机制来解决这个问题，包括 ETag、Vary 等。 web 上客户端缓存的本质是缓存中的一个资源与一个 url 相关联，其他机制的目的是帮助客户端确定由特定 url 标识的资源的缓存版本何时仍然是新鲜的。

因此，您陷入了这样一种情况，即为了从缓存响应中受益，您必须将客户端发送到与第一个请求相同的 url。有可能实现这一点的方法（cookie、本地存储、服务器脚本等），假设您已经实现了一种。

接下来您必须考虑缓存只是一个建议，即使这样也不是保证。如果您希望客户端缓存图像并将原始 url 提供给它以从缓存中受益，那么您将面临缓存未命中的风险。如果在 url 过期时间后缓存未命中，则原始 url 不再有效。然后客户端无法显示图像（来自缓存或提供的 url）。

*当到期时间在 url 中时，您正在寻找的行为根本无法通过常规缓存提供。*

由于无法实现所需的行为，您可能会考虑下一个最佳选项，其中每个选项都需要放弃您需求的一个方面。按照我考虑的顺序：

1.  如果您放弃较短的到期时间，您可以使用更长的到期时间并轮换网址。例如，您可以将 url 到期时间设置为午夜，然后为当天的所有请求提供相同的 url。您的客户将受益于当天的缓存，这可能总比没有好。明显的缺点是您的网址的有效期更长。

2.  如果您放弃内容交付，您可以从服务器提供图像，该服务器检查每个请求的访问权限。客户端将能够根据需要缓存资源，这可能比内容交付更好，具体取决于缓存命中的频率。一种变体是将 Amazon CloudFront 换成另一个提供商，因为可能有其他支持这种行为的内容交付网络（尽管我不知道有）。根据您的特定访问者，内容交付网络的丢失可能是不利的，也可能无关紧要。

3.  如果您放弃单个静态 HTTP 请求的简单性，您可以使用客户端脚本来确定应该发出的请求。例如，在 javascript 中，您可以尝试使用原始 url 检索资源（以从缓存中受益），如果失败（由于缓存未命中和过期过期）请求新的 url 用于资源。一种变体是使用浏览器缓存以外的一些缓存机制，例如本地存储。这里的缺点是增加了浏览器预取的复杂性和受损的能力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-12T21:52:16.507

看来你已经解决了这个问题。您说您的服务器正在向`http 307`云端 URL（签名 URL）发出重定向，因此浏览器仅缓存云端 URL 而不是您的 URL（www.myserver.com/the_image）。所以场景如下：客户端 1 检查 www.myserver.com/the_image -> 被重定向到 CloudFront URL -> 内容被缓存 CloudFront url 现在过期。

客户端 1 再次检查 www.myserver.com/the_image -> 被重定向到相同的 CloudFront URL-> 从缓存中检索内容，而无需再次获取云端内容。

客户端 2 检查 www.myserver.com/the_image -> 被重定向到 CloudFront URL，该 URL 由于签名过期而拒绝其访问。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T14:36:11.493

保存用户+图像+到期时间的列表 -> 云端链接。如果用户有未过期的云端链接，请将其用于图像并且不要生成新的。

# scripting - 批处理脚本语法错误

> ID：14552998
> 
> 赞同：0
> 
> 时间：2013-01-27T22:21:02.477
> 
> 标签：scripting, batch-file, cmd

我正在尝试使用批处理脚本构建一个简单的地牢爬虫游戏，但是在创建菜单屏幕时我不断遇到错误。任何人都可以帮忙指出我哪里出错了吗？固定欢呼伙计们:)

```
@echo off 
cls
echo LOADING GAME
ping localhost -n 2 >nul
@echo off
color 8a
title Josh's Game Beta

:loop 
:menu
cls 
echo You get to...
echo.
echo 1) Start
echo.
echo 2) Info
echo.
echo 3) Exit
set /p number = 

if not defined number (
cls
goto loop
)

if %number% == 1 goto game 
if %number% == 2 goto info 
if %number% == 3 exit

:game
cls
echo Who are you?
set /p name = 
echo Hello, %name% 
echo Do you want to start the game(Y/N)
set /p start =

if %start% == Y goto lvl1
if %start% == y goto lvl1
if %start% == N goto menu
if %start% == n goto menu 
if not defined start (
cls
goto menu 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:34:11.837

我没有寻找其他问题，但以下语句正在创建一个名为“number”的变量（末尾有一个空格）：

```
set /p number = 
```

正确的语法是

```
set /p "number=" 
```

# ruby-on-rails - will_paginate 和 .sort =>

> ID：14552999
> 
> 赞同：1
> 
> 时间：2013-01-27T22:21:05.110
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sorting, will-paginate

我最近安装了 will_paginate gem，它运行良好，但我希望它能够与我目前的设置一起使用。现在我在同一页面上显示所有提要（或帖子），但它们是根据点击该页面的人数排序的：

控制器.rb

```
 @t = Time.now
 @h1 = @t - 1.hour
 @feeds = Feed.find(:all, :order => "created_at DESC").sort { |p1, p2| p2.impressionist_count(:filter=>:all, :start_date=>@h1) <=> p1.impressionist_count(:filter=>:all, :start_date=>@h1)} 
```

现在...我测试了分页 gem，如果我在控制器中执行此操作，它可以正常工作：

控制器.rb

```
 @feeds = Feed.paginate(:per_page => 10, :page => params[:page], :order => "created_at DESC") 
```

所以我认为 1+1=2 并尝试通过以下方式将两者结合起来：

控制器.rb

```
@feeds = Feed.paginate(:per_page => 10, :page=>params[:page], :order => "created_at DESC").sort { |p1, p2| p2.impressionist_count(:filter=>:all, :start_date=>@h1) <=> p1.impressionist_count(:filter=>:all, :start_date=>@h1)} 
```

我无法对我的帖子进行排序和分页。尝试加载页面时出现错误：

未定义的方法 `total_pages' 用于#

我希望这个工作，它会很甜蜜:)。但是，如果它不起作用，有没有其他方法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T22:38:43.120

这是因为 will_paginate 默认情况下仅适用于 ActiveRecord 关系。使用排序后，它将转换为数组。如果您希望 will_paginate 使用数组，则需要在控制器中要求支持它。

```
require 'will_paginate/array' 
```