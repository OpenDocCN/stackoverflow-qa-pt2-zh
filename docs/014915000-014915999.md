# StackOverflow 问答 14915000-14915999

# visual-studio - 网络安全不起作用

> ID：14915003
> 
> 赞同：0
> 
> 时间：2013-02-16T20:55:09.320
> 
> 标签：visual-studio

我将此代码放在_AppStart.cshtml中以在数据库中创建表（VS 2012）问题是WebSecurity上存在错误，即当前上下文中不存在名称WebSecurity

@使用系统.Web.安全；@{

WebSecurity.InitializeDatabaseConnection("MembershipExample","UserProfile","UserId","UserName", true); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:18:00.287

您需要添加对`System.Web`项目的引用（在右侧的项目管理器中，右键单击`References`并选择`Add`）。

然后，您可以将 a 添加`using System.Web.Security`到您的代码文件中。

# php - 用另一个字符串替换字符串中的某个“索引”（例如第三个字符）的 PHP 方法

> ID：14915016
> 
> 赞同：1
> 
> 时间：2013-02-16T20:57:01.003
> 
> 标签：php

说我讨厌“帽子”这个词。我想要一个可以工作的函数，`strreplace("hat", 1, "o")`因此将其更改为`hot`而不是`hat`.

有没有办法用函数做到这一点？还是我必须自己写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:08:20.743

```
function changeChar($string,$newchar,$pos){
  $string[$pos] = $newchar;
  return $string;
}

echo changeChar("Logs","L",2); 
```

会呼应“LoLs”

```
Logs
0123 <position (g is the 2nd character ;) 
```

如果您希望第一个字符是第一个而不是第 0 个，请在第一行下方插入：

```
$pos = $pos + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:09:56.030

```
 <?php
function myReplacing($theString, $theCharacter, $thePosition)
{
    return substr_replace($theString, $theCharacter, $thePosition, 1);
}

$a = "test";
$a = myReplacing($a, "u", 1);
echo $a;

    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:14:01.723

您只需要 str_replace()。见这里：[http ://www.php.net/manual/en/function.str-replace.php](http://www.php.net/manual/en/function.str-replace.php)

例如

```
echo str_replace("a", "o", "hat");
// outputs 'hot' 
```

# ios - 用于“上拉”刷新的 UIRefreshControl？

> ID：14915018
> 
> 赞同：8
> 
> 时间：2013-02-16T20:57:08.477
> 
> 标签：ios, objective-c, uicollectionview, uirefreshcontrol

如何将 UIRefreshControl 添加到 UIColloectionView 的底部？这意味着在向上滚动（查看旧数据或其他内容）时它是如何工作的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T08:22:39.573

您不能`UIRefreshControl`这样做，但如果您可以使用更简单的解决方案，您可以设置您的集合视图，以便在滚动到底部时自动加载更多数据。（顺便说一句，这是一个更常见的用户界面......上拉刷新并不常见，但当您触底时自动检索更多数据。）

最原始的表现是响应该`UIScrollViewDelegate`方法并确定您是否已滚动到集合视图的底部（它本身就是 的子类`UIScrollView`）：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if ((scrollView.contentOffset.y + scrollView.frame.size.height) >= scrollView.contentSize.height)
    {
        if (!self.isLoadingMoreData)
        {
            self.loadingMoreData = YES;

            // proceed with the loading of more data
        }
    }
} 
```

更好的是，如果您要加载更多数据，请在底部显示一个单元格，上面写着“请稍候，加载更多数据”，可能带有`UIActivityIndicatorView`. 例如，如果您要加载更多数据，请在此单元格的末尾添加一个部分。如果你正确地格式化这个额外的单元格（例如，一个贯穿整个集合视图的单元格），它肯定可以呈现你正在寻找的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-20T20:44:10.117

这是实现**bottomRefreshControl**属性的 UIScrollView 类（UICollectionView 类的父级）的 CCBottomRefreshControl[类别](https://github.com/vlasov/CCBottomRefreshControl)。它与 iOS 6 和 7 原生刷新控件兼容。

 *** * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-17T02:47:20.097

你不能。您根本无法真正自定义`UIRefreshControl`。**

# java - 为什么这不会绘制图像？

> ID：14915022
> 
> 赞同：0
> 
> 时间：2013-02-16T20:57:23.827
> 
> 标签：java, swing

我想要做的是，当我运行我的应用程序时，它会启动线程并且图像显示 3 秒（3000 毫秒），然后线程停止运行。

图片路径正确，图片文件存在，线程本身运行；但是，图像似乎没有显示。有什么问题？这是我的代码：

```
package org.main;

import java.awt.Graphics;
import java.awt.Image;

import javax.swing.ImageIcon;
import javax.swing.JPanel;

public class Splasher extends JPanel implements Runnable {
    private static final long serialVersionUID = 1L;
    Image image;
    ImageIcon splash = new ImageIcon("res/splash.png");
    public static Thread DrawSplash = new Thread(new Splasher());

    public Splasher() {
        setFocusable(true);
        image = splash.getImage();  
        repaint();
    }
    boolean hasRan = false;
    public void run() {
        try {
            System.out.println("Drawing Splash Screen");
            repaint();
            Thread.sleep(3000);
            System.out.println("Repainted");
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void paint(Graphics g) {
        g.drawImage(image, 0, 0, null);
    }

    public Image getImage() {
        return image;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:35:40.217

你的问题还不够。

你没有展示你如何使用启动画面，如果它附加到任何东西或你如何启动/使用`Thread`.

所以问题可能是任何...

除了 VishalK 已经指出的所有其他内容，我想补充`public static Thread DrawSplash = new Thread(new Splasher())`的是一个坏主意。你不应该使用`static` `Thread`s 因为线程是不可重入的，也就是说，你可以运行同一个线程两次。

这是一个小例子，展示了一个“褪色”的闪屏，使用了一些 Swing `Timer`s

这假设您使用的是 Java 7，它还可以用于 Java 6，我还没有发布该代码。

```
public class TestSplashScreen01 {

    public static void main(String[] args) {
        new TestSplashScreen01();
    }

    public TestSplashScreen01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                SplashScreen splash = new SplashScreen();
                splash.start();

            }
        });
    }

    public class SplashScreen extends JWindow {

        private SplashPane splash;

        public SplashScreen() {
            setBackground(new Color(0, 0, 0, 0));
            splash = new SplashPane();
            add(splash);
            pack();
            setLocationRelativeTo(null);
        }

        public void start() {
            splash.start();
        }

        public class SplashPane extends JPanel {

            private BufferedImage splash;
            private Timer timer;
            private float alpha = 0f;
            private int duration = 1000;
            private long startTime = -1;

            public SplashPane() {
                try {
                    splash = ImageIO.read(getClass().getResource("/res/SokahsScreen.png"));
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
                timer = new Timer(3000, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        fadeOut();
                    }
                });
                timer.setRepeats(false);
            }

            protected void fadeOut() {
                Timer fadeInTimer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        long now = System.currentTimeMillis();
                        long runTime = now - startTime;
                        alpha = 1f - ((float) runTime / (float) duration);
                        if (alpha <= 0.01f) {
                            alpha = 0f;
                            ((Timer) (e.getSource())).stop();
                            SwingUtilities.invokeLater(new Runnable() {
                                @Override
                                public void run() {
                                    dispose();
                                }
                            });
                        }
                        repaint();
                    }
                });
                startTime = System.currentTimeMillis();
                fadeInTimer.setRepeats(true);
                fadeInTimer.setCoalesce(true);
                fadeInTimer.start();
            }

            protected void fadeIn() {
                Timer fadeInTimer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        long now = System.currentTimeMillis();
                        long runTime = now - startTime;
                        alpha = (float) runTime / (float) duration;
                        if (alpha >= 1f) {
                            alpha = 1f;
                            ((Timer) (e.getSource())).stop();
                            timer.start();
                        }
                        repaint();
                    }
                });
                startTime = System.currentTimeMillis();
                fadeInTimer.setRepeats(true);
                fadeInTimer.setCoalesce(true);
                fadeInTimer.start();
            }

            public void start() {
                if (!SplashScreen.this.isVisible()) {
                    alpha = 0f;
                    SplashScreen.this.setVisible(true);
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            fadeIn();
                        }
                    });
                }
            }

            @Override
            public Dimension getPreferredSize() {
                return splash == null ? super.getPreferredSize() : new Dimension(splash.getWidth(), splash.getHeight());
            }

            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                if (splash != null) {
                    Graphics2D g2d = (Graphics2D) g.create();
                    g2d.setComposite(AlphaComposite.SrcOver.derive(alpha));
                    int x = (getWidth() - splash.getWidth()) / 2;
                    int y = (getHeight() - splash.getHeight()) / 2;
                    g2d.drawImage(splash, x, y, this);
                    g2d.dispose();
                }
            }
        }
    }
} 
```

注意：

这个例子的问题是一旦你调用 start，程序会继续执行，这需要某种监听器在启动画面完成时告诉感兴趣的各方。

或者，您可以使用未装饰的模式`JDialog`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:52:04.507

您在代码中犯的许多错误...

1.  您有重写`paint`方法而不是`paintComponent`绘制图像。
2.  您已用于在组件 ( )`Thread`上绘制和删除图像。您应该改用[javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。`Swing``JPanel`
3.  尽管您应该使用`javax.swing.Timer`，但您犯的基本错误仍然是您创建了一个静态线程并在其中传递了一个新对象`Splasher`而不是当前对象。
4.  每次您想在图形中进行更改时，`Component`您都应该`repaint`显式调用。例如，如果您想让图像在 3 秒后消失，您应该`repaint`在 3 秒 laps 后调用方法，并且应该在`paintComponent`方法中写入适当的逻辑来删除该图像。

这是您的代码的修改版本，它完全符合您的要求。看看它。：

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentAdapter;

import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.Timer;
import javax.swing.SwingUtilities;

public class Splasher extends JPanel {

    private static final long serialVersionUID = 1L;
    Image image;
    ImageIcon splash = new ImageIcon("apple.png");
    MyComponentListener componentListener ;
    Timer timer ;

    public Splasher() 
    {
        componentListener = new MyComponentListener();
        setFocusable(true);
        image = splash.getImage();  
        timer = new Timer(3000, new LoadAction());
        addComponentListener(componentListener);
     }
    boolean hasRan = false;

    @Override
    public void paintComponent(Graphics g) 
    {
        super.paintComponent(g);
        if (image == null && timer !=null )
        {
            g.clearRect(0, 0, getWidth(), getHeight()) ;
            timer.stop();
            removeComponentListener(componentListener);
        }
        else
        {
            g.drawImage(image, 0, 0, null);
        }
    }
    public Image getImage() 
    {
        return image;
    }
    private class MyComponentListener extends ComponentAdapter
    {
        @Override
        public void componentResized(ComponentEvent evt)
        {
            System.out.println("Resized..");
            timer.start();
        }
    }
    private class LoadAction implements ActionListener 
    {
        public void actionPerformed(ActionEvent evt)
        {
            System.out.println("Drawing Splash Screen");
            repaint();
            image = null;
            repaint();
            System.out.println("Repainted");
        }

    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater ( new Runnable()
        {
            @Override
            public void run()
            {
                JFrame frame = new JFrame("Splash:");
                frame.getContentPane().add(new Splasher());
                frame.setSize(300,500);
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            }
        });
    }
} 
```

另请观看以下有关 java 中的 Paint 机制的教程。 [http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)

# java - Java 中的正则表达式：a*

> ID：14915026
> 
> 赞同：0
> 
> 时间：2013-02-16T20:58:00.300
> 
> 标签：java, regex, metacharacters

你知道为什么在一个简单的正则表达式模式中 if put a*( *quantifier) 它不匹配匹配器中的任何结果，即使它实际上包含字符 a; （在任何情况下，它都应该返回一个发现空字符串的结果，因为我正在使用“* ”）。它适用于其他字符，例如 r* 和 b* 没有问题。我知道如果内容放在引号或括号之间，它会起作用。（“a *”）。虽然只是想知道为什么它可以使用不带引号的 b* 而不是不带引号的 a* 。

代码：

```
Pattern pat = Pattern.compile(args[0]);
        Matcher match = pat.matcher(args[1]);
while (match.find())
        {
            System.out.println("Indeed this the information I need:"+ match.group());

            System.out.println("Here it starts:"+match.start());
} 
```

我知道 'a' 是一个元字符，但 'e' 和 'f' 也是，并且与它们一起正常工作。

我在命令行中插入：args[0] = a* args[1] = abba 作为输入。

任何的想法？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T20:59:43.670

可能是因为`*`运行 Java 的 shell 正在扩展它。尝试打印出 的内容`args[0]`，我想你会发现你匹配的模式不是你认为匹配的模式。

您可以通过引用您的论点来解决此问题 -`'a*'`而不仅仅是`a*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:03:52.677

为了选择你的正则表达式必须是这样的：`"(a*)"`并且你感兴趣`group(1)`

# ember.js - 如何在 ember.js RC1 中指定使用带有已编译车把的视图

> ID：14915027
> 
> 赞同：0
> 
> 时间：2013-02-16T20:58:05.067
> 
> 标签：ember.js

我正在尝试将 pre2 应用程序移植到 1.0.0 rc。他们设置我的应用程序的方式如下：我所有的模板都编译到他们自己的视图中。

所以我的代码看起来像这样：

```
 App.NewUserController = Em.Controller.extend({});
    App.NewUserView = Em.View.extend({
        template: Em.Handlebars.compile(NewUserHtml)
    }); 
```

NewUserHtml 是一个通过 require.js 加载的 html/handlebars 文件。

由于文件直接编译到模板中，因此不包含`<script type="text/x-handlebars"…&gt;`标签。

我知道我需要覆盖我的路线的渲染功能，但我看到的选项似乎需要我指定一个模板，而我真的没有。就我而言，由于模板已经在我的视图中，我正在寻找一种方法来指定要使用的视图。

我可能正在做一些从根本上反 rc 1.0 的事情......

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:16:11.073

鉴于 NewUserHtml 只是带有把手标签的纯文本，您应该能够在您的视图中执行以下操作：

```
Ember.TEMPLATES['NewUser'] = Handlebars.compile(NewUserHtml);
App.NewUserView = Ember.View.extend({
    templateName: 'NewUser'
}); 
```

或者

```
App.NewUserView = Ember.View.extend({
    template: Handlebars.compile(NewUserHtml)
}); 
```

或者

```
App.NewUserView = Ember.View.extend({
    templateName: 'some-other-template'
}); 
```

[您可以在此处](http://emberjs.com/api/classes/Ember.View.html)的“模板”部分阅读有关视图的更多信息。

# sql - 提取具有特定场景的行

> ID：14915030
> 
> 赞同：1
> 
> 时间：2013-02-16T20:58:24.833
> 
> 标签：sql, oracle

我有一张包含以下详细信息的表格

```
EMP_NAME     TEST_RESULT   RUN_DATE
----------------------------------------------
John            Pass    12-FEB-2013 18:03:55
Albert          Fail    12-FEB-2013 18:24:29
Chris           Pass    12-FEB-2013 18:24:28
John            Fail    12-FEB-2013 19:32:35
Chris           Pass    12-FEB-2013 19:32:35
Steve           Pass    12-FEB-2013 20:04:35 
```

现在我需要提取具有唯一名称和 TEST_RESULT 的行。但是，如果员工同时具有通过和失败结果，则测试结果应该只有“失败”结果。查询的结果应该是

```
EMP_NAME     TEST_RESULT   RUN_DATE
----------------------------------------------
Albert          Fail    12-FEB-2013 18:24:29
Chris           Pass    12-FEB-2013 18:24:28
John            Fail    12-FEB-2013 19:32:35
Steve           Pass    12-FEB-2013 20:04:35 
```

我只关心一个员工姓名，如果该员工有两个结果通过和失败，则只显示失败记录，我不在乎时间。如果 EMPLOYEE 有两个结果为“通过”和“通过”，我仍然需要一个记录，我不在乎时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:35:24.613

 `Select emp_name, test_result, run_date
from (
select emp_name, test_result, run_date,
row_number() over (partition by emp_name
order by test_result, run_date ) rn
from
T1)
where rn=1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:09:08.100

这样的事情可能会奏效。

```
select emp_name, test_result, run_date
from YourTable
where test_result = 'Fail'
union
select emp_name, test_result, run_date
from YourTable
where test_result = 'Pass'
and emp_name in 
(select emp_name
from YourTable
where TestResult = 'Pass'
minus
select emp_name
from YourTable 
where TestResult = 'Fail'
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:10:31.917

```
SELECT EMP_NAME, TEST_RESULT, RUN_DATE
FROM (
  SELECT ROW_NUMBER() OVER (PARTITION BY t1.EMP_NAME ORDER BY RUN_DATE) AS RowNumber,
       t1.EMP_NAME, TEST_RESULT, RUN_DATE
  FROM MyTable t1
  LEFT JOIN 
  (SELECT DISTINCT EMP_NAME 
   FROM MyTable
   WHERE TEST_RESULT = 'Fail' 
  ) AS EMP_With_Failure ON t1.EMP_NAME = EMP_With_Failure.EMP_Name
  WHERE t1.TEST_RESULT = 'Fail' OR EMP_With_Failure.EMP_NAME IS NULL ) t
WHERE RowNumber = 1 
```

此查询将为任何失败的用户过滤掉任何成功记录，您仍然需要过滤结果集以仅获取每个用户的一条记录

# emacs - 如何获取 Emacs ido-mode 的最近文件列表以忽略不感兴趣的文件？

> ID：14915033
> 
> 赞同：0
> 
> 时间：2013-02-16T20:58:49.037
> 
> 标签：emacs, ido-mode, recent-file-list

如何让 Emacs ido-mode 的recentf-list 忽略不感兴趣的文件？

我将 ido-mode 与[xSteve 的函数一起用于 ido 最近的文件](http://www.xsteve.at/prg/emacs/power-user-tips.html)（函数见下文）。

但就像现在一样，它首先显示无趣的文件，如下所示：

```
-> ~/.ido-last
   ~/Library/Application Support/Aquamacs Emacs/recent-addresses
   ~/Documents/journal.org 
```

## 那么我如何才能`ido-mode`忽略不感兴趣的文件，比如`~/.ido-last`and`~/Library/Application Support/Aquamacs Emacs/recent-addresses`呢？

PS这是那个功能，供参考：

```
(defun xsteve-ido-choose-from-recentf ()
"Use ido to select a recently opened file from the `recentf-list'"
(interactive)
(let ((home (expand-file-name (getenv "HOME"))))
(find-file
 (ido-completing-read "Recentf open: "
                      (mapcar (lambda (path)
                                (replace-regexp-in-string home "~" path))
                              recentf-list)
                      nil t))))

(global-set-key [(meta f11)] 'xsteve-ido-choose-from-recentf) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:20:12.653

一种使recentf 忽略某些文件的方法，只需将适当的正则表达式添加到recentf-exclude 列表中：

```
(add-to-list 'recentf-exclude "\\.windows\\'")
(add-to-list 'recentf-exclude "\\.revive\\'") 
```

这将防止上述任何以后的条目被添加到recentf 列表中。需要删除您最近的文件中的当前条目以将它们永久删除，或者直到它们从其他条目中逐步淘汰。

来源：[使用recentf 强制emacs 最近的文件忽略指定的文件（例如.windows 和.revive）](https://stackoverflow.com/questions/8025119/force-emacs-recent-files-using-recentf-to-ignore-specified-files-windows-and?rq=1)

# python - 有没有一种简单的方法可以将二维浮点列表转换为 python 中的二维元组列表？

> ID：14915036
> 
> 赞同：0
> 
> 时间：2013-02-16T20:59:07.627
> 
> 标签：python, list, tuples

假设我有一个 2d 的浮点数列表，例如

```
[[0.1, 0.2], [1.1, 1.2]] 
```

我想将其转换为诸如

```
[[(0, 0.1), (0, 0.2)], [(0, 1.1), (0, 1.2)]] 
```

我想知道是否有更好或更短的方法来执行此操作，然后使用如下循环

```
for i in range(len(float_array)):
     for j in range(len(float_array[i])):
          float_array[i][j] = (0, float_array[i][j]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:00:54.683

*嵌套* [列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
>>> l = [[0.1, 0.2], [1.1, 1.2]]
>>> [[(0, val) for val in elem] for elem in l]
[[(0, 0.1), (0, 0.2)], [(0, 1.1), (0, 1.2)]] 
```

# matlab - Matlab读取文本文件列表排除前34个字符

> ID：14915042
> 
> 赞同：0
> 
> 时间：2013-02-16T20:59:44.100
> 
> 标签：matlab

我正在尝试从文本文件中读取值。我想要'：'之后的值。

这是文本文件的示例。所有行的格式都相同。数据开始前有 34 个位置。

```
File Name                       : IMG_1184.JPG
File Size                       : 2.1 MB
File Modification Date/Time     : 2012:07:14 11:53:18-05:00
File Permissions                : rw-rw-rw-
File Type                       : JPEG
MIME Type                       : image/jpeg
Exif Byte Order                 : Big-endian (Motorola, MM) 
```

我尝试使用此代码：

```
fileID = fopen('Exif.txt');
Exif1 = textscan(fileID, '%s %s','delimiter', ':'); 
```

这适用于大多数数据，但有些数据也使用了“：”，所以这不起作用。

我尝试使用此代码：

```
fileID = fopen('Exif.txt');
Exif1 = textscan(fileID, '%s %s','delimiter', ': '); 
```

这返回了一团糟。不知道为什么。一切都支离破碎。

谁能解释如何将第 35 个值放在每个字符串的末尾并将其放入数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:03:20.163

Matlab中有一个功能`strtrim(string)`可以为您去除前导和尾随空格。尝试使用后将当时一行中的数据读入`textscan`函数中`strtrim`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:56:07.637

将整行读入一个变量，然后获取第 35 个和后续字符，如下所示：

```
whole_line(35:end) 
```

# javascript - Javascript调用函数需要简单的帮助

> ID：14915045
> 
> 赞同：0
> 
> 时间：2013-02-16T20:59:49.500
> 
> 标签：javascript, windows-8

@TheSystem 这里是代码看看并解决它

```
<div class="fragment groupeditemspage">
    <header aria-label="Header content" role="banner">
        <button class="win-backbutton" aria-label="Back" disabled></button>
        <h1 class="titlearea win-type-ellipsis">
            <span class="pagetitle"><b>OvalFox </b>News Reader</span>
        </h1>
    </header>
    <section aria-label="Main content" role="main">
    <progress class="win-ring withText" id="loadingIndicator"></progress>
        <div class="groupeditemslist" aria-label="List of groups" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none' }"></div>
    </section>
</div> 
```

上面是 html 代码，如果你看到它包含进度标签，当我启动 Windows 8 应用程序时它会显示进度条，一旦我点击任何项目以查看其详细信息，进度条会在内容加载后立即运行并隐藏页面，它打开没有问题，但是当我点击后退按钮时，这是哪个功能

```
navigated: function () {
                // Do application specific on-navigated work here
                var backButton = this.pageElement.querySelector("header[role=banner] .win-backbutton");
                if (backButton) {
                    backButton.onclick = function () { nav.back(); };

                    if (nav.canGoBack) {
                        backButton.removeAttribute("disabled");
                    } else {
                        backButton.setAttribute("disabled", "disabled");
                    }
                }
            }, 
```

进度条出现在主页中，即使内容默认加载在页面上，也不会再次隐藏

这是进度条的javascript代码

```
for (var n = 0; n < items.length; n++) {
        var article = {};
        // Get the title, author, and date published.
        article.title = items[n].querySelector("title").textContent;
        article.author = items[n].querySelector("creator").textContent;
        article.date = items[n].querySelector("pubDate").textContent;
        var thumbs = items[n].querySelectorAll("content");
        article.content = items[n].querySelector("description").textContent;
        var staticContent = toStaticHTML(items[n].querySelector("description").textContent);
        var progressBar = document.getElementById("loadingIndicator").style.display = 'none';
        progressBar.value = 1;
        // Process the content so that it displays nicely.

        if (thumbs.length > 1) {
            article.thumbnail = thumbs[thumbs.length - 1].attributes.getNamedItem("url").textContent;

        }
        else {
            var firstindex = article.content.indexOf("<img");
            if (firstindex !== 1) {
                var secondindex = article.content.indexOf("src=", firstindex) + 5;
                var thirdindex = article.content.indexOf("\"", secondindex);
                article.thumbnail = article.content.slice(secondindex, thirdindex);
            }
        } 
```

上面的代码包含以下代码部分

```
var progressBar = document.getElementById("loadingIndicator").style.display = 'none';
        progressBar.value = 1; 
```

上面的代码是实际代码，用于在加载内容后立即隐藏进度条，但是一旦单击后退按钮，此功能就不起作用

希望从@TheSystem 和其他人那里得到关于这个详细而复杂的代码的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:19:55.440

这段代码不符合你的想法：

```
var progressBar = document.getElementById("loadingIndicator").style.display = 'none';
progressBar.value = 1; 
```

你要

```
var progressBar = document.getElementById("loadingIndicator");
progressBar.style.display = 'none';
progressBar.value = 1; 
```

# python - Python构建exe进程一段时间后杀死自己

> ID：14915048
> 
> 赞同：0
> 
> 时间：2013-02-16T21:00:10.673
> 
> 标签：python, process, terminate

如何让一个用 Python 编写的已编译的 .exe 程序在启动一段时间后自杀？

如果我有一些代码并将其编译成 .exe，然后启动它并且它保持在“运行”或“等待”状态，那么无论程序在做什么，我怎样才能让它在几分钟后终止？

原因是启动的 exe 使用 PAMIE 调用 URL 并自动执行一些点击。我注意到的是，如果浏览器关闭，该进程将保留在内存中并且不会自行清理。我想找到一种在 5 分钟后自动清理进程的方法，这已经足够了。我尝试使用 psutils 来检测该过程，但在我的情况下不起作用。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:45:41.877

```
def one(Time):
    time.sleep(Time)
    sys.exit(0)

def two():
    thread.start_new_thread(one, (600,)) #10min countdown..
    #Your running function here....Will run sim. with function one. when time ends,
    #sys.exit exits program..(Not tested:) )

two() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:43:29.920

1.  当你的进程开始时创建一个线程。
2.  使该线程休眠所需的持续时间。
3.  当睡眠结束时，终止进程。

# android - Android Sqlite 没有结果

> ID：14915050
> 
> 赞同：2
> 
> 时间：2013-02-16T21:00:20.830
> 
> 标签：android, sqlite

你认为我的问题是什么。

我正在查询一个 sqlite 数据库。这段代码没有给出任何结果。

```
String sql = " select _id from MYTABLE where  _id = ?  ";
  Cursor cur = mDb.rawQuery(sql, new String[] {"5653"}) ; 
```

但是如果我在没有这样的参数的情况下执行查询：

```
String sql = " select _id from MYTABLE where  _id = 5653  ";
  Cursor cur = mDb.rawQuery(sql, null) ; 
```

一行按预期返回。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:08:50.253

发生这种情况是因为这些值被绑定为字符串，并且该列（我猜）是一个 int。所以 where 子句最终会变成

```
where _id = "5653" 
```

来自用于 selectionArgs 的 rawQuery javadoc -

> 您可以在查询的 where 子句中包含 ?s，它将被 selectionArgs 中的值替换。这些值将绑定为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:11:22.517

试试这个：

```
String sql = " select _id from MYTABLE where  _id = '5653'  "; 
```

# process - erlang函数调用乱序？

> ID：14915052
> 
> 赞同：1
> 
> 时间：2013-02-16T21:00:54.240
> 
> 标签：process, erlang

[我使用标准 IO 函数修改了Learn you some Erlang](http://learnyousomeerlang.com/more-on-multiprocessing)中的厨房模块，以查看按执行顺序打印出来的内容，我发现了一些非常奇怪的东西。基本上我在shell中运行了以下

```
3> Pid = spawn(kitchen, fridge2, [[baking_soda]]).
<0.41.0>
4> kitchen:store(Pid, water).
0
2
1
ok
ok 
```

在我看来，函数 store 在打印出 0 之后的 store 函数中的 receive 子句之前调用了函数 freezer2 ，然后在打印了 2 之后，执行了接收子句并最终打印了 1 。修改后的代码如下。如何从 store 函数中调用冰箱函数？这是因为以某种方式并行执行吗？这条线`{Pid, Msg} ->`在 store 功能中有什么作用？是函数调用吗？为什么可以打印？

```
-module(kitchen).
-compile(export_all).

start(FoodList) ->
    spawn(?MODULE, fridge2, [FoodList]).

store(Pid, Food) ->
    Pid ! {self(), {store, Food}},
    io:format("~p~n", [0]),
    receive                 
        {Pid, Msg} -> 
            io:format("~p~n", [1]),
            io:format("~p~n", [Msg]),
            Msg
    end.

take(Pid, Food) ->
    Pid ! {self(), {take, Food}},
    receive
        {Pid, Msg} -> Msg
    end.

store2(Pid, Food) ->
    Pid ! {self(), {store, Food}},
    receive
        {Pid, Msg} -> Msg
    after 3000 ->
        timeout
    end.

take2(Pid, Food) ->
    Pid ! {self(), {take, Food}},
    receive
        {Pid, Msg} -> Msg
    after 3000 ->
        timeout
    end.

fridge1() ->
    receive
        {From, {store, _Food}} ->
            From ! {self(), ok},
            fridge1();
        {From, {take, _Food}} ->
            %% uh....
            From ! {self(), not_found},
            fridge1();
        terminate ->
            ok
    end.

fridge2(FoodList) ->
    receive
        {From, {store, Food}} ->
            From ! {self(), ok},
            io:format("~p~n", [2]),
            fridge2([Food|FoodList]);
        {From, {take, Food}} ->
            case lists:member(Food, FoodList) of
                true ->
                    io:format("~p~n", [3]),
                    From ! {self(), {ok, Food}},
                    fridge2(lists:delete(Food, FoodList));
                false ->
                    io:format("~p~n", [4]),
                    From ! {self(), not_found},
                    fridge2(FoodList)
            end;
        terminate ->
            ok
    end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:33:19.120

与 case 语句类似，receive 使用模式匹配来确定要执行的子句。 `{Pid, Msg}`是一个匹配任何 2 元组的子句。

让我们来看看你的代码的执行——

```
Pid = spawn(kitchen, fridge2, [[baking_soda]]). 
```

这会产生一个执行该`kitchen:fridge2/1`函数的新进程。该函数会阻塞，直到它接收到一个 2 元组形式`{From, {[store|take], Food}}`或原子“终止”的消息。

```
kitchen:store(Pid, water). 
```

同时，您从 shell 调用上述函数。它将消息发送`{self(), {store, Food}}`到该新进程，打印“0”，然后等待接收 2 元组的消息。

另一个进程现在已经收到一条满足其接收的消息。它将消息发送`{self(), ok}`回发送消息的进程，打印“2”，递归调用自身并再次等待接收消息。

shell 进程现在已经收到一条消息并继续执行。它打印“1”，然后打印它收到的元组的第二个元素（“ok”）。最后它返回'ok'到shell。

shell 打印结果（“ok”）并显示提示。

第二个进程仍在等待接收消息。

# javascript - 如何将二进制数据显示为图像 - extjs 4

> ID：14915058
> 
> 赞同：36
> 
> 时间：2013-02-16T21:01:30.437
> 
> 标签：javascript, ajax, extjs, extjs4

这是有效 .JPEG 图像的二进制文件。
~~[http://pastebin.ca/raw/2314500](http://pastebin.ca/raw/2314500)~~

我曾尝试使用 Python 将此二进制数据保存到图像中。

如何使用 extjs 4 将此数据转换为可查看的 .JPEG 图像？

我试过这个，但它不起作用。

```
data:image/jpeg;base64,+ binary data 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-17T05:52:37.130

需要将其转换为base64。

JS 有 btoa() 函数。

例如：

```
var img = document.createElement('img');
img.src = 'data:image/jpeg;base64,' + btoa('your-binary-data');
document.body.appendChild(img); 
```

但我认为您在 pastebin 中的二进制数据是无效的 - jpeg 数据必须以“ffd9”结尾。

**更新：**

需要编写简单的十六进制到base64转换器：

```
function hexToBase64(str) {
    return btoa(String.fromCharCode.apply(null, str.replace(/\r|\n/g, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ")));
} 
```

并使用它：

```
img.src = 'data:image/jpeg;base64,' + hexToBase64('your-binary-data'); 
```

[**在jsfiddle**](http://jsfiddle.net/79NnG/)上查看使用十六进制数据的工作示例[](http://jsfiddle.net/79NnG/)

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-01T13:49:40.203

数据 URI 格式为：

> `data:<headers>;<encoding>,<data>`

因此，您只需要将数据附加到“data:image/jpeg;”字符串：

```
var your_binary_data = document.body.innerText.replace(/(..)/gim,'%$1'); // parse text data to URI format

window.open('data:image/jpeg;,'+your_binary_data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-18T04:47:04.467

在 ExtJs 中，您可以使用

> xtype：'图像'

渲染图像。

这是一个显示使用 extjs 呈现二进制数据的小提琴。

atob --> 将 ascii 转换为二进制

btoa --> 将二进制转换为 ascii

```
Ext.application({
    name: 'Fiddle',

    launch: function () {
        var srcBase64 = "data:image/jpeg;base64," + btoa(atob("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8H8hYDwAFegHS8+X7mgAAAABJRU5ErkJggg=="));

        Ext.create("Ext.panel.Panel", {
            title: "Test",
            renderTo: Ext.getBody(),
            height: 400,
            items: [{
                xtype: 'image',
                width: 100,
                height: 100,
                src: srcBase64
            }]
        })
    }
}); 
```

[https://fiddle.sencha.com/#view/editor&fiddle/28h0](https://fiddle.sencha.com/#view/editor&fiddle/28h0)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-07-19T18:32:22.123

在前端 JavaScript/HTML 中，您可以将二进制文件加载为图像，而不必转换为 base64：

```
<img src="http://engci.nabisco.com/artifactory/repo/folder/my-image"> 
```

my-image 是一个二进制图像文件。这将加载就好了。**

# mysql - 子查询以及通过相关子查询引用外部的可能性

> ID：14915065
> 
> 赞同：3
> 
> 时间：2013-02-16T21:02:01.370
> 
> 标签：mysql, sql, subquery, correlated-subquery

我正在刷新我的 SQL。
我正在阅读有关子查询以及使用相关子查询在外部引用的可能性。
例子：

```
SELECT *  
FROM ORDERS O  
WHERE 'ROAD BIKE' =  
(SELECT DESCRIPTION FROM PART P WHERE P.PARTNUM = O.PARTNUM) 
```

这等效于连接：

```
SELECT O.ORDEREDON, O.NAME,  
O.PARTNUM, O.QUANTITY, O.REMARKS  
FROM ORDERS O, PART P  
WHERE P.PARTNUM = O.PARTNUM AND P.DESCRIPTION = 'ROAD BIKE' 
```

我的问题是我没有得到第一个表格以及我们何时/为什么使用它。外部引用查询何时有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:33:15.177

简而言之，你应该避免像瘟疫这样的相关子查询。

相关子查询对外部表中的每一行执行一次内部查询。这会导致糟糕的性能（一个 100 万行的外部表将导致内部查询执行 100 万次！）

另一方面，连接非常有效，数据库非常擅长优化它们。

如果可能，始终将您的查询表达为优先于相关子查询的连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:23:21.630

Orders 具有对零件号的引用，因此 Orders 表具有零件号的外键。

我们想要零件编号为“公路自行车”的所有订单。

第一个表单首先对每条记录进行子查询，以检查 O.PARTNUM 是否是“Road Bike”的零件号。

可以这样想，主要查询是遍历 Orders 表中的每条记录。在每条记录上，它执行一个子查询，其中它的 PARTNUM 字段在查询中使用。因此，如果您在子查询中使用 Orders 记录的 PARTNUM，请选择在 PART 表中查找具有该 PARTNUM 的记录，然后选择 DESCRIPTION 字段。然后主查询的 where 子句检查“公路自行车”是否等于从子查询返回的说明。

我建议不要使用第一种形式，因为它是关联查询，出于性能原因，您应该避免关联查询，因此请使用第二种形式。第一种形式的更好版本是：

```
SELECT *  
FROM ORDERS O  
WHERE O.PARTNUM =  
(SELECT P.PARTNUM FROM PART P WHERE DESCRIPTION = 'ROAD BIKE') 
```

这不是相关查询。数据库可以进行一次子查询，获取以“ROAD BIKE”为DESCRIPTION的记录的PARTNUM，然后以WHERE O.PARTNUM等于子查询结果的条件运行主查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:08:52.980

可能适合子查询的场景如下所示：

```
select some fields
from some tables
where some conditions are met  
and somefield = (select min(something) from etc) 
```

但是，我不知道这是否是相关子查询。语义不是我的强项。

# java - 在java中调用方法时遇到问题

> ID：14915073
> 
> 赞同：-1
> 
> 时间：2013-02-16T21:03:01.617
> 
> 标签：java, jsf

一个简单的问题，但我几乎不记得了，基本上我想按特定顺序运行 java 方法，我确实让它工作得很好，但我不得不在开始时添加一些东西，现在它不会按顺序运行

基本上之前是这段代码，

```
@PostConstruct
    public void init() {

        //System.out.println(destinationPDF);
        //System.out.println(destination);

// Get the username from the login page, this is used to create a folder for each user
        System.out.println("called get username");
        username = FacesContext.getCurrentInstance().getExternalContext().getRemoteUser();
    }

    public void File() {
        File theFile = new File(destination + username); // will create a sub folder for each user (currently does not work, below hopefully is a solution)
        theFile.mkdirs();
        System.out.println("Completed File");
    } 
```

它会运行并自动调用下一个需要的方法，它会按以下顺序调用它们：

```
INFO: buttonToUploadText invoked
INFO: called get username
INFO: called handle file
INFO: Completed Creation of folder
INFO: Now in copying of file proccess
INFO: Completed Creation of folder for copy of PDF
INFO: End of copying file creation
INFO: Called CopyFile
INFO: New file created!
INFO: Copying is now happening 
```

但是我添加了一个新方法，它从文件中调用变量：

```
@PostConstruct
    public void loadProp() {
        System.out.println("Loading properties");
        InputStream in = this.getClass().getClassLoader().getResourceAsStream("config.properties"); //points to a properties file, this will load up destinations instead of having to declare them here
        try {
            configProp.load(in);
            System.out.println(configProp.getProperty("destinationPDF"));
            System.out.println(configProp.getProperty("destination"));
            System.out.println(configProp.getProperty("fileList"));
        } catch (IOException e) {
            e.printStackTrace();
        }

    } 
```

现在它必须在被触发时首先运行才能声明变量，但是现在它现在将在完成后运行 public void int() 而不是跳过很多并运行 public void handleFileUpload

那么从 public void loadProp() { 调用 public void init() 的最佳方法是什么？

编辑2：

```
 private Properties configProp = new Properties();

    public void loadProp() {
        System.out.println("Loading properties");
        InputStream in = this.getClass().getClassLoader().getResourceAsStream("config.properties"); //points to a properties file, this will load up destinations instead of having to declare them here
        try {
            configProp.load(in);
            System.out.println(configProp.getProperty("destinationPDF"));
            System.out.println(configProp.getProperty("destination"));
            System.out.println(configProp.getProperty("fileList"));
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
    private String destinationPDF = configProp.getProperty("destinationPDF");
    public String destination = configProp.getProperty("destination");
    private String username;
    //public static String destination = "D:/Documents/NetBeansProjects/printing~subversion/fileupload/uploaded/"; // main location for uploads//TORNADO ONLY //"D:/My Documents/NetBeansProjects/printing~subversion/fileupload/uploaded/"; // USE ON PREDATOR ONLY 
    public static String NewDestination;
    public static String UploadedfileName;
    public static String CompletefileName;
    //
    //Strings for file copy
    //
    //private String destinationPDF = "D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/pdf/"; //USE ON TORNADO//"D:/My Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/pdf/";//USE ON PREDATOR    
    private String NewdestinationPDF;
    public static String PdfLocationViewable;

    //
    @PostConstruct
    public void init() {

       FileUploadController.loadProp();

        //System.out.println(destinationPDF);
        //System.out.println(destination);

// Get the username from the login page, this is used to create a folder for each user
        System.out.println("called get username");
        username = FacesContext.getCurrentInstance().getExternalContext().getRemoteUser();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:57:22.633

您可以而且应该只有一种`@PostConstruct`方法。

代替

```
@PostConstruct
public void loadProp() {
    // ...
}

@PostConstruct
public void init() {
    // ...
} 
```

经过

```
@PostConstruct
public void postConstruct() {
    loadProp();
    init();
}

private void loadProp() {
    // ...
}

private void init() {
    // ...
} 
```

*（我只考虑重命名并将原件重命名为`postConstruct()`与其实际工作相匹配的其他名称）`init()``init()`*

# html - Google 字体文本在 Firefox 中变得不可读，字体粗细 300

> ID：14915082
> 
> 赞同：0
> 
> 时间：2013-02-16T21:03:57.460
> 
> 标签：html, firefox

所以，是的，我正在编写一个网站，我主要使用字体“Robot Condensed”（[http://www.google.com/webfonts/specimen/Roboto+Condensed](http://www.google.com/webfonts/specimen/Roboto+Condensed)）

现在的问题是我有一个 jQuery 的东西，你点击按钮，它会扩展为全文。但是，当您点击它时，页面上的所有 font-weight: 300 文本都搞砸了，除了刷新页面外，没有明显的方法可以将它们恢复正常。

不过，我不相信问题出在 Javascript 上，因为我不知道其中的原因可能导致这种情况，而且，在我实现任何 Javascript 之前，它昨天也这样做了（您只需向下滚动页面，几秒钟后字体会混乱）。我只在 Firefox 中看到过这个问题。

正常 [http://prntscr.com/t009m](http://prntscr.com/t009m)

破 [http://prntscr.com/t005u](http://prntscr.com/t005u)

正常 [http://prntscr.com/t00fl](http://prntscr.com/t00fl)

破 [http://prntscr.com/t007z](http://prntscr.com/t007z)

这就像字体变得更薄或什么的。有没有人经历过这样的事情，或者可能知道是什么原因造成的？

谢谢。

编辑：好的，当我在页面上使用任何类型的 jQuery 时似乎会发生这种情况。

# javascript - 模型选项的 Backbone.js 集合

> ID：14915085
> 
> 赞同：0
> 
> 时间：2013-02-16T21:04:12.737
> 
> 标签：javascript, backbone.js, collections

我有一个表单，用户可以在其中创建新模型。该模型有许多潜在的属性，表单需要列出用户可以选择作为该模型的“活动”的所有选项。

我想知道我应该如何管理选项的集合。我认为有两种不同的方式：

1) 将一个集合附加到带有表单的视图和模型上的另一个集合。当列表中的项目在视图中被选中时，这些项目被复制到模型中的集合中。

2）在模型上有一个集合，并将项目标记为“已选择”或“未选择”，所以我只有一个集合，并且在显示为该模型选择的内容和尚未选择的内容时不需要比较两个不同的集合不。

我认为第一个选项更“合适”，因为模型中只有合法地属于模型的数据，并且应该发送到服务器进行保存。如果我有整个“选定”的东西，我需要在保存时对这些数据进行排序，以确定要发送到服务器的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:29:44.940

我建议你应该有两个独立的模型。一个您的父模型和一个选项模型。两者都有相应的集合。

您的父模型中将有一个嵌套的 Options 集合。这是 Backbone 中基本的多对多实现。

我总是非常渴望让我的模型和系列反映真实的关系。在这里，如果您认为选项是具有自己用途的适当实体，那么我会考虑为它们创建模型。

# objective-c - 从 plist 数组中检索数据

> ID：14915086
> 
> 赞同：0
> 
> 时间：2013-02-16T21:04:17.393
> 
> 标签：objective-c, cocoa, plist, nsdata

我很难理解这个问题。

我正在创建一个测验。在 plist 中有问题......和可能的答案，这是我的 plist

```
<plist version="1.0">
<dict>
<key>quest</key>
<array/>
<key>Quest1</key>
<string>3234</string>
<key>A</key>
<string>3</string>
<key>B</key>
<string>2</string>
<key>C</key>
<string>1</string>
</dict>
</plist> 
```

数组被调用`quest`，我希望能够从代码和 3 个答案中提取“Quest1”......这是我的代码，但我似乎缺少一些东西来让它显示

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [path objectAtIndex:0];
NSString *plistpath = [documentsPath stringByAppendingPathComponent:@"question.plist"];
if(![[NSFileManager defaultManager] fileExistsAtPath:plistpath])
{
    plistpath = [[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"];
}
NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistpath];
NSString *errorDesc = nil;
NSPropertyListFormat format;
NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization     propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
if (!temp)
{
NSLog(@"error reading plist: %@, format:%d",errorDesc, format);

}
  self.question.text = [temp objectForKey:@"quest"];
  self.answer1.text =[temp objectForKey:@"A"];
  self.answer2.text =[temp objectForKey:@"B"];
  self.answer3.text =[temp objectForKey:@"C"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:04:25.817

试试下面的代码..它会帮助你

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [path objectAtIndex:0];
NSString *plistpath = [documentsPath stringByAppendingPathComponent:@"question.plist"];
NSMutableArray *savedStock = [[NSMutableArray alloc] initWithContentsOfFile:plistFilePath];
 for (int i=0; i<[savedStock count]; i++)
    {
        [A-array addObject:[[savedStock objectAtIndex:i] valueForKey:@"A"]];
        [B-array addObject:[[savedStock objectAtIndex:i] valueForKey:@"B"]];
    } 
```

# r - 将给定索引从一个向量映射到另一个向量

> ID：14915087
> 
> 赞同：0
> 
> 时间：2013-02-16T21:04:18.263
> 
> 标签：r, function

我必须要向量

```
x <- c(2,5,6) # index vector
y <- c(10:20)  # value vector 
```

现在，我编写了一个函数，只给我 v1 中描述的 v2 中的值。示例返回值 (11,14,15)

```
mapIdxToVector <- function(x,y) {
  ret <- c(x);
  for( i in 1:length(x) ) {
    ret[i] <- y[x[i]];
  }
  return(ret);
} 
```

R中是否有任何花哨的功能来改进我自己的功能？

真诚的基督徒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:09:01.530

没什么好展示的，只需利用 R 的使用方式：

```
> y[x]
[1] 11 14 15 
```

这在 R 手册介绍中有所介绍，您可以通过粗略阅读以下文档节省大量时间：http: [//cran.r-project.org/doc/manuals/r-release/R-intro。 html#Index-vectors](http://cran.r-project.org/doc/manuals/r-release/R-intro.html#Index-vectors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:08:17.747

你不需要在这里循环。做就是了

```
y[x] 
```

由于 R 很好地处理了向量，几乎你可以做的每一个动作都支持向量。索引也是如此。

# objective-c - 无法在 NSDictionary 中获得价值

> ID：14915089
> 
> 赞同：2
> 
> 时间：2013-02-16T21:04:48.443
> 
> 标签：objective-c, json, nsdictionary

```
NSURL *jsonURL = [NSURL URLWithString:stringURL];
NSData *jsonData = [NSData dataWithContentsOfURL:jsonURL];
NSDictionary *jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
NSString *stringImageURL = [jsonArray valueForKey:@"artworkUrl100"]; 
```

最后一行是问题。我可以很好地得到数组，但值为`stringImageURL`nil。如何正确检索下面突出显示的密钥？

![我想使用的 NSDictionary 值](../Images/de2680787ff8659a319c33d59346bb57.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:07:47.380

```
NSString *stringImageURL = [jsonArray valueForKey:@"artworkUrl100"]; 
```

应该

```
NSString *stringImageURL = [[[jsonArray valueForKey:@"result"]
                                      objectAtIndex:0]
                                        valueForKey:@"artworkUrl100"]; 
```

或者，更简洁

```
NSString *stringImageURL = jsonArray[@"result"][0][@"artworkUrl100"]; 
```

## 为什么？

数据的嵌套比您想象的要深 2 级，您要查找的字典值包含在数组中，在另一个字典中，在 key 下`result`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:09:43.900

首先，您的 jsonArray 不是数组，而是字典。

其次，看起来你有一个带有字典数组的字典，所以它会是：

```
NSArray *resultsArray = [jsonArray valueForKey:@"results"];
NSDictionary *resultDict = [resultsArray objectAtIndex:0];
NSString *stringImageURL = [resultDict valueForKey:@"artworkUrl100"]; 
```

# c# - 从用户输入而不是文件目录将多个文件 ext 转换为 pdf

> ID：14915091
> 
> 赞同：0
> 
> 时间：2013-02-16T21:05:00.940
> 
> 标签：c#, asp.net, word-automation

我在这个网站上发现了这段不错的、可以工作的代码，但我想做一些修改。

我想要求用户上传一个文档，但如果他们的文档不是 PDF 格式，我想将其转换为 PDF 文件，例如转换所有 doc、docx 和 excel 文件。

我让它与 .doc 文件一起工作，如果我想添加更多，我会将它们添加到“*.doc，*.docx，...”吗？

此外，如果文件位于同一目录中，则当前程序正在转换文件。我希望它接受来自用户的新目录并将其保存到不同的目录，并且不一定都在同一个位置 - 例如，程序将从 ...\Documents 保存到 ...\Uploads。我怎么能这样做？

这是Word到PDF的代码：

```
private void Word2PDF() {
        //Create a new Microsoft Word application object
     Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();

    //Adding dummy value because c# doesn't have optional arguments
     object oMissing = System.Reflection.Missing.Value;

    //Getting list of word files in specified directory
     DirectoryInfo dirInfo = new DirectoryInfo("C:\\TestFilestore\\");
    FileInfo[] wordFiles = dirInfo.GetFiles("*.doc");

    word.Visible = false;
    word.ScreenUpdating = false;

        foreach (FileInfo wordFile in wordFiles) {
            //Cast as object for word open method
            Object filename = (Object) wordFile.FullName;

           Microsoft.Office.Interop.Word.Document doc = word.Documents.Open(ref filename, ref oMissing,
                                               ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                                               ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                                               ref oMissing, ref oMissing, ref oMissing, ref oMissing);
            doc.Activate();

            object outputFileName = wordFile.FullName.Replace(".doc", ".pdf");
            object fileFormat = WdSaveFormat.wdFormatPDF;

            //Save document into pdf format
            doc.SaveAs(ref outputFileName,
                ref fileFormat, ref oMissing, ref oMissing,
                ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                ref oMissing, ref oMissing, ref oMissing, ref oMissing);

            //close the word document, but leave the word application open.
            //doc has to be cast to type_document so that it will find the correct close method.
            object saveChanges = WdSaveOptions.wdDoNotSaveChanges;
            ((_Document)doc).Close(ref saveChanges, ref oMissing, ref oMissing);
            doc = null;
        }

        //word has to be case to type_application so that it will find the correct quit method.
        ((_Application)word).Quit(ref oMissing, ref oMissing, ref oMissing);
        word = null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:33:11.113

如果您想遍历所有`Word`具有不同扩展名的文档，您可以从目录中获取所有文件，并使用 Linq 过滤列表。

这是一个示例，您需要将其合并回您的代码中才能使其正常工作，但您会明白的。

```
 Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();
    var oMissing = System.Reflection.Missing.Value;

    // grab all the filenames from your directory (*.*) and filter them with linq
    var wordDocumentFilenames = Directory.GetFiles(@"C:\TestFilestore\", "*.*").
                                Where(file => 
                                    file.ToLower().EndsWith("doc") ||
                                    file.ToLower().EndsWith("docx")).  // extend the list to your needs
                                    ToList(); 

    foreach (var wordDocumentFilename in wordDocumentFilenames)
    {
        Microsoft.Office.Interop.Word.Document wordDocument = word.Documents.Open(
            wordDocumentFilename, 
            ref oMissing,
            /* supply the rest of the parameters */);
    } 
```

# python - 用 python 睡觉和醒来

> ID：14915097
> 
> 赞同：2
> 
> 时间：2013-02-16T21:05:39.333
> 
> 标签：python, windows-7, sleep

我有一个 Python 脚本做一些工作，最多需要 5 分钟，然后它会休眠一个小时并重新开始。现在我希望我的笔记本电脑进入睡眠状态，而不是在等待时一直打开，并且大约每小时醒来一次以运行工作。是否可以用 Python 睡觉和醒来？

我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:11:52.393

看起来这个[问题](https://stackoverflow.com/questions/2673707/os-reboot-shutdown-hibernate-sleep-wakeup-windows-python)解决了一个解决方案：

```
import os
os.system(r'%windir%\system32\rundll32.exe powrprof.dll,SetSuspendState Hibernate') 
```

这实际上只是使用本机命令行实用程序进行睡眠。

[MSFT 的这篇](http://msdn.microsoft.com/en-us/library/ms686289.aspx)文章将解释如何唤醒计算机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:15:41.553

您最好在 Windows 中创建一个任务计划程序任务，该任务按计划运行您的 python 脚本并在需要时唤醒 PC（任务的设置）。要让它进入睡眠状态，只需将能量设置设置为在几分钟不活动后进入睡眠状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-18T15:57:05.680

您可以尝试制作一个 Visual Basic 脚本 (.vbs) 或批处理 (.bat) 程序并从 python 运行它。该程序应该有代码来运行睡眠/唤醒功能。

再说一次，因为您使用的是 Windows，所以只需使用任务调度程序。

# c++ - 提升二进制序列化 - 为什么按位复制似乎只适用于集合？

> ID：14915100
> 
> 赞同：4
> 
> 时间：2013-02-16T21:05:48.840
> 
> 标签：c++, boost, binary, bit-manipulation, boost-serialization

使用 boost 序列化，我试图找到大对象快速二进制序列化的最佳设置。我的测试表明，对于标记为按位可序列化的结构，我只能在数组（和向量）上获得更好的性能，而不是在单个对象上。

例如，假设我的结构仅由 POD 类型组成

```
struct BigStruct
{
  double    m1;
  long long m2;
  float     m3;
  // ...
  bool      m499;
  short     m500;
};

namespace boost
{
  namespace serialization
  {
    template <class Archive>
    void serialize(Archive& ioArchive, BigStruct& ioStruct, const unsigned int iVersion)
    {
      ioArchive & ioStruct.m1;
      ioArchive & ioStruct.m2;
      ioArchive & ioStruct.m3;
      // ...
      ioArchive & ioStruct.m499;
      ioArchive & ioStruct.m500;
    }
  }
}

#include <boost/serialization/is_bitwise_serializable.hpp>
BOOST_IS_BITWISE_SERIALIZABLE(BigStruct); 
```

然后，序列化单个对象

```
{
  std::ofstream outStream(tmpFolder + "/BinarySerializationOfBigStruct.txt", std::ios_base::binary);
  boost::archive::binary_oarchive binOutArchive(outStream, boost::archive::no_header);

  BigStruct bigStruct;

  std::clock_t c_start = std::clock();
  binOutArchive << bigStruct;
  std::clock_t c_end = std::clock();

  // ...compute elapsed time...
} 
```

比序列化 1 个对象的数组花费大约 7 倍的时间

```
{
  std::ofstream outStream(tmpFolder + "/BinarySerializationOfBigStructArray.txt", std::ios_base::binary);
  boost::archive::binary_oarchive binOutArchive(outStream, boost::archive::no_header);

  BigStruct bigStructArray[1];

  std::clock_t c_start = std::clock();    
  binOutArchive << bigStructArray;
  std::clock_t c_end = std::clock();

  // ...compute elapsed time...
} 
```

我错过了什么吗？这是提升序列化的疏忽吗？

顺便说一句，我正在使用 boost v1.53。

# c++ - std::getline：分隔字符与字符数

> ID：14915101
> 
> 赞同：1
> 
> 时间：2013-02-16T21:05:54.553
> 
> 标签：c++, istream

成员函数`istream& istream::getline(char* s, streamsize n, char delim);`使您能够从流中提取字符，直到发生以下 3 件事之一：

1.  找到指定的分隔符，
2.  `n - 1`从流中读取字符，或
3.  发生 EOF 或错误

显然，条件 3（发生错误）很容易检测到。但是调用者如何区分条件（1）和（2）呢？您如何判断分隔符是否存在？可能`n - 1`已读取字符，但未找到分隔字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:10:43.050

根据[http://en.cppreference.com/w/cpp/io/basic_istream/getline](http://en.cppreference.com/w/cpp/io/basic_istream/getline)

在情况 3 中，`setstate(eofbit)`将被执行。

在情况 2 中，`setstate(failbit)`将被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:32:59.703

你可以不问这个问题。使用`getline(std::basic_istream&, std::basic_string&, Elem delim);`. 或者，如果您使用的是 C++11，那就是`getline(std::basic_istream&&, std::basic_string&, Elem delim);`. 也就是说，读入一个`std::string`. 如果你这样做，你不必处理数组大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:10:18.540

您可以使用`std::istream::gcount()`来了解读取的字符数，并将其与`n`找出问题的答案进行比较。此外，可以搜索输出缓冲区以找出分隔符。

# magento-1.7 - Magento 不允许我执行文件

> ID：14915103
> 
> 赞同：0
> 
> 时间：2013-02-16T21:06:05.183
> 
> 标签：magento-1.7, rhel5

我有magento`public_html`

在`/public_html/affiliate`我已经为第三方工具复制了应用程序文件。当我尝试运行时，`/public_html/affiliate/install/index.php`我得到一个 magento “找不到您请求的页面”。页。

它正在工作，但安装程序失败了，现在我什至无法再次运行它或这些目录中的任何东西。不确定发生了什么变化。而且不知道在哪里看。

我什至不能跑`/public_html/affiliate/phpinfo.php`

**编辑**
好吧，这更奇怪。我创建了一个新文件夹`/public_html/afftest` 并放入`phpinfo.php`其中。

为什么我可以执行`phpinfo.php`in `/public_html/afftest`，但不能复制 in `/public_html/affiliate`？

它们具有相同的所有者、组和权限。

另外，如果我重命名`/affiliate`为`/xaffiliate`我仍然无法运行`phpinfo.php`内部。

到底他妈发生了什么！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:51:44.977

可能是您的网络服务器的路径设置错误。

您确定访问文档根目录时运行的 phpinfo.php 是您所指的文件夹中的实际文件吗？

可能是文档根目录指向某个其他默认位置，该位置恰好有一个 phpinfo.php 并且正在运行，因此当您添加文件夹时，它会在错误的位置查找。

尝试编辑您的 phpinfo.php 文件并在顶部添加一些内容，例如

然后，您可以确认文档根目录实际上位于正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:52:42.793

这是某种权限问题！

这解决了它

```
find -type f -name ‘*.php’ -exec chmod 644 {} \;
find -type d -exec chmod 755 {} \; 
```

# mysql - 大型 UPDATE [...] SELECT FROM 导致并行 UPDATE/DELETE 终止

> ID：14915105
> 
> 赞同：1
> 
> 时间：2013-02-16T21:06:38.400
> 
> 标签：mysql, select, locking, sql-update, table-locking

我试图通过例子来解释我的问题。我有一个长期运行的声明，比如

```
UPDATE <table_A>
INNER JOIN <table_B> ON [...]
LEFT JOIN <table_C> ON [...]
LEFT JOIN <table_D> ON [...]
LEFT JOIN <table_E> ON [...]
SET <table_A>.<col_A>=X
WHERE <table_A>.<col_A>=Y AND COALESCE(<table_C>.<id>,<table_D>.<id>,<table_E>.<id> IS NULL 
```

该语句在大表上运行（其中两个每个表包含 7+ 百万行）。更新运行 3-5 分钟。在另一个会话中以高并发完成

```
UPDATE <table_C> SET <col_A>=Z WHERE <id> IN ([...]) 
```

或者

```
DELETE FROM <table_C> WHERE <id> IN ([...]) 
```

当大`UPDATE`运行时，这些并发`UPDATE`并`DELETES`在一两分钟后因锁定等待超时或死锁而死。所有`JOIN`列都有索引（标准索引）。我已经尝试过

```
SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
[BIG UPDATE];
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ; 
```

但这无济于事。数据一致性并不是那么重要（如果它包含不再存在于...`<table_A>`中的行也没问题）。最重要的是，small / s on ...正在处理中。`<table_C>``<table_E>``UPDATE``DELETE``<table_C>``<table_E>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:48:33.627

由于在实时数据库上运行这么大的更新通常不是一个好主意，因此我建议您分解您的大更新。

这不是最优化的方法，但我相信你会设法自己优化它。

循环运行：

1.  `SELECT Id, ColA FROM TableA ORDER BY Id DESC LIMIT 10 OFFSET (iteration)*10`
2.  第二个循环，从先前的结果中获取行，其中`tableA.colA=Y`
    2.1\. `SELECT Id FROM TableB WHERE ID=id_from_current_iteration`
    2.2\. `SELECT Id FROM TableC WHERE ID=id_from_current_iteration`
    2.3 如果之前的两个查询都返回null，则进行下一步，否则进行下一次迭代 2.4`UPDATE TableA SET ColA=X WHERE ID=id_from_current_iteration`

换句话说 -**避免连接**。
这将比一次更新花费更长的时间，但它会起作用。
优化它的第一步是批处理查询。

# sql-server - 使用 CTE 生成组/段标识

> ID：14915108
> 
> 赞同：0
> 
> 时间：2013-02-16T21:07:09.973
> 
> 标签：sql-server, tsql, recursion, sql-server-2012, common-table-expression

问题是必须在 A（Segment）列中生成一个串行 GroupID，它开始将 A 到 B（Indicator）列的下一个 C 的行标识为一个段。B 列是段开始（A）和段结束（C）的指示符。介于（B 或 X）之间的任何内容都应标有段 ID，包括带有 A 和 C 的行。希望它足够清楚。

[收到的文件](http://imageshack.us/photo/my-images/35/beforen.png/)

[具有生成的组/段标识的已处理文件](http://imageshack.us/photo/my-images/689/afterqf.png/)

我需要最好的解决问题的建议。我有一个 .Net 循环缓慢地执行此操作，但正在尝试使用 CTE。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:43:21.113

如果您的表格有一个 Id 列，并且您的表格被称为 [Stuff]，那么这有效：

```
-- Set the segment values for rows where Indicator = 'A'
update [Stuff]
    set Segment = s.row
from
    (select ROW_NUMBER() OVER(ORDER BY Id) as Row, Id 
    from [Stuff] where Indicator = 'A' ) s
where
    s.Id = [Stuff].Id

-- Update the other rows
update [Stuff]
set Segment = (
    select top 1 Segment from [Stuff] s1 
    where s1.Segment is not null and s1.Id <= [Stuff].Id 
    order by Id desc
)

update [Stuff] set Segment = -1 where Indicator = '#'
update [Stuff] set Segment = 0 where Indicator = '##' 
```

# javascript - Joomla 2.5 jQuery 与 TinyMCE

> ID：14915111
> 
> 赞同：0
> 
> 时间：2013-02-16T21:07:22.990
> 
> 标签：javascript, jquery, joomla

我今天已经四处寻找了一段时间，但我似乎无法让它工作。

由于我想使用 jQuery 中的 .remove() 函数及其类似功能，我认为这将是一个“简单的过渡”。

目前在 Joomla 2.5.9 上，并试图在文章编辑器中访问 TinyMCE。

任何人都能够做到这一点？

我需要将该编辑器的内容加载到临时 div 或 var 中，然后使用类似的东西`$('#tmp').remove('...');`，最后将其放回活动编辑器。

问题是我不断得到 null 作为回报，无论我尝试什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:23:36.883

您将需要通过[TinyMCE Javascript API](http://www.tinymce.com/wiki.php/API3%3atinymce.api.3.x)来完成此操作。我为最近的一个项目执行了类似的任务，我可以推荐以下方法：

```
tinyMCE.onAddEditor.add( function() {
    tinyMCE.activeEditor.onChange.add( function( ed ) {
         var content = ed.getContent();

         // process the content here
         // ...

         ed.setContent( content );
    });
}); 
```

该`getContent()`方法返回编辑器框架中的整个文本，包括 HTML 标记。之后您可以将其动态加载为 HTML 并对其进行操作：

```
$( content ).remove( '...' ); 
```

# intellij-idea - IntelliJ 中的 Google AppEngine Dev Server 数据存储在重新启动时丢失数据

> ID：14915112
> 
> 赞同：0
> 
> 时间：2013-02-16T21:07:36.810
> 
> 标签：intellij-idea, google-cloud-datastore

每次我在 IntelliJ 中启动本地 Google AppEngine 开发服务器时，数据存储都是空的。如何配置 AppEngine 以持久化数据存储区？

我尝试添加`--datastore_path=c:\tmp`到服务器参数。

我究竟做错了什么？

![在此处输入图像描述](../Images/722f7cf90cddbacabd219270c94a9fd6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:59:47.393

这已在[https://stackoverflow.com/a/14009082/1389219](https://stackoverflow.com/a/14009082/1389219)使用以下 VM 选项解决：

```
-Ddatastore.backing_store=c:/tmp/local_db.bin 
```

注意：启动程序后，文件显示可能需要几分钟时间。

# javascript - 从jquery中的多个元素中选择

> ID：14915117
> 
> 赞同：0
> 
> 时间：2013-02-16T21:07:56.757
> 
> 标签：javascript, jquery, html

我正在尝试将此 JavaScript 代码更改为 jQuery，但我不确定`onClick = 'function(this)'`与 jQuery`.click`函数一起使用的等价物。

JavaScript：

```
function setInput(text) {

   var getClicked = text.name;
   var  click = document.getElementById(getClicked);
   var  show = document.getElementById('show_' + getClicked);

   show.value = click.value;
} 
```

HTML：

```
<input type='text' name = "a" id = "a" onclick='setInput(this);'>
<input type = "text" id = "show_a"><br>
<input type='text' name = "b" id = "b" onclick='setInput(this);'>
<input type = "text" id = "show_b"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:14:27.493

如果输入已存在于 DOM 中，则以下将起作用。

```
$('#a, #b').click(function () {
    setInput(this);
}); 
```

否则，请尝试

```
$(function() {
    $('#a, #b').click(function () {
        setInput(this);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:14:34.317

HTML：

```
<input class="clickme" type="text" name ="a" id ="a">
   <input type ="text" id ="show_a"><br>
<input class="clickme"  type="text" name ="b" id ="b">
   <input type ="text" id ="show_b"> 
```

jQuery：

```
$(document).ready(function(){
    $(".clickme").click(function(){
        id = "#show_";
        id += $(this).prop("id");
        $(id).show();
    });
}); 
```

小提琴：http: [//jsfiddle.net/gTtHT/1/](http://jsfiddle.net/gTtHT/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:14:13.737

```
$('input[type="text"]').on('click', function(){
  $('#show_' + $(this).attr('name')).val($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T21:19:47.237

jQuery 使用 CSS 选择器来访问 DOM 中的元素。如果你给这些输入元素一个类名，比如“settable”，你可以添加行为：

```
$(".settable").click(function(e){
    var getClicked = $(this).attr('name');
    ...
}); 
```

其中 $(this) 指的是被点击的元素。

# jquery - 使用缩略图助手 Fancybox 时遇到问题

> ID：14915126
> 
> 赞同：0
> 
> 时间：2013-02-16T21:08:35.153
> 
> 标签：jquery, fancybox, thumbnails

目前使用 Fancybox 在此[原型上显示灯箱画廊](http://mtthwbsh.com/sta499)

我在触发 Fancybox（包括缩略图助手）时使用以下 jQuery，但无法显示它们。有任何想法吗？

```
$(document).ready(function () {
    $(".fancybox").fancybox({
        type: "image",
        helpers: {
            title: {
                type: 'inside'
            },
            buttons: {},
            thumbs: {
                width: 50,
                height: 50
            }
        },
        afterLoad: function () {
            this.title = '' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T22:02:57.103

您是否知道您还必须包含 fancybox-thumbs .js 和 .css 文件？喜欢 ：

```
<link rel="stylesheet" href="./helpers/jquery.fancybox-thumbs.css" type="text/css" media="screen" />
<script type="text/javascript" src="./helpers/jquery.fancybox-thumbs.js"></script> 
```

....（检查您设置了自己的正确路径）否则您将永远无法使它们工作。

它们`helpers/`位于下载的子目录下。

# c++ - 使用 QGraphicsBlurEffect 进行 QImage 变换

> ID：14915129
> 
> 赞同：0
> 
> 时间：2013-02-16T21:08:56.813
> 
> 标签：c++, qt

我正在寻找一种方法来应用模糊到`QImage`using`QGraphicsBlurEffect`而不做诡计，例如`setGraphicsEffect`在持有它的标签上（这在不同的 SO 问题上得到证明）。

基本上，我正在寻找`blur`这样的功能`QImage blur(QImage, QGraphicsBlurEffect);`

存在一个类似的函数，`qt_blurImage`但它在私有标头中导出，我宁愿不使用它。

可悲`QImage`的是，没有`setGraphicsEffect`

我当然可以推出我自己的适用于原始数据的模糊功能，但我宁愿不重新实现已经存在的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-19T20:19:07.107

让我们为这个话题做出贡献。从 Qt 5.3 开始，以下函数将对您应用（而不是丢失 alpha）有很大帮助`QGraphicsEffect`-因为它再次处于回归中。`QImage``QWidget::grab()`

```
QImage applyEffectToImage(QImage src, QGraphicsEffect *effect, int extent=0)
{
    if(src.isNull()) return QImage();   //No need to do anything else!
    if(!effect) return src;             //No need to do anything else!
    QGraphicsScene scene;
    QGraphicsPixmapItem item;
    item.setPixmap(QPixmap::fromImage(src));
    item.setGraphicsEffect(effect);
    scene.addItem(&item);
    QImage res(src.size()+QSize(extent*2, extent*2), QImage::Format_ARGB32);
    res.fill(Qt::transparent);
    QPainter ptr(&res);
    scene.render(&ptr, QRectF(), QRectF( -extent, -extent, src.width()+extent*2, src.height()+extent*2 ) );
    return res;
} 
```

他们，使用这个功能来模糊你的图像很简单：

```
QGraphicsBlurEffect *blur = new QGraphicsBlurEffect;
blur->setBlurRadius(8);
QImage source("://img1.png");
QImage result = applyEffectToImage(source, blur);
result.save("final.png"); 
```

当然，你不需要保存它，这只是一个有用的例子。你甚至可以投下阴影：

```
QGraphicsDropShadowEffect *e = new QGraphicsDropShadowEffect;
e->setColor(QColor(40,40,40,245));
e->setOffset(0,10);
e->setBlurRadius(50);
QImage p("://img3.png");
QImage res = applyEffectToImage(p, e, 40); 
```

并注意范围参数，它将`extent`像素数添加到原始图像的各个方面，特别适用于不被切断的阴影和模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:19:30.833

不幸的是，看起来图形效果 API 是专为与 和 一起使用而设计`QWidget`的`QGraphicsItem`。快速查看 4.7 源代码（这是我手头的），必要的钩子都是私有的/内部的。从 5.x 的源码来看，还是这样的。

似乎您唯一的选择就是您描述的那些：`QGraphicsEffect`与丑陋的黑客一起使用，或者自己实现模糊/效果。（就个人而言，我会推荐后者。）

# css - 将鼠标悬停在一个 div 上会将另一个 div 向下推得太远

> ID：14915130
> 
> 赞同：1
> 
> 时间：2013-02-16T21:08:57.253
> 
> 标签：css, html, css-float, positioning

我制作一个网站只是为了提高我的技能，我制作了一些动画鼠标悬停 div。当鼠标悬停时，它们都可以正常工作，但左上角的似乎将其下方的右下推。

这是一些图片和我的代码：

[http://imageshack.us/photo/my-images/39/werwe1.png/](http://imageshack.us/photo/my-images/39/werwe1.png/)

[http://imageshack.us/photo/my-images/18/werwe2.png/](http://imageshack.us/photo/my-images/18/werwe2.png/)

我的代码：

```
*{
margin: 0px;
padding: 0px;
}

h1 {
font: bold 20px Prisoner SF
}

header, section, footer, aside, nav, article, hgroup{
   display: block;
}

#big_wrapper{
max-width: 1000px;
margin: 20px 0px;
display: -webkit-box;
-webkit-box-orient: vertical;
-webkit-box-flex: 1;
margin-left: auto ;
margin-right: auto ;
}

body{
width: 100%;
margin: 0;
display:-webkit-box;
-webkit-box-pack: center;

} 

#main_div{
display: -webkit-box;
-webkit-box-orient: horizontal;
}

#main_section{
width: 600px;
height: 450px;
border: 4px solid black;
padding: 5px;
margin: 10px;
-webkit-transition: -webkit-transform 2s, border 2s, scale 2s,
}

#sidebar {
width: 500px;

}

.subsection1{
width: 200px;
height: 200px;
border: 4px solid black;
padding: 5px;
margin: 10px;
float: left;
-webkit-box-flex: 1;
-webkit-transition: -webkit-transform 2s, border 2s, scale 2s,
}

.subsection2{
width: 200px;
height: 200px;
border: 4px solid black;
padding: 5px;
margin: 10px;
float: left;
-webkit-box-flex: 1;
-webkit-transition: -webkit-transform 2s, border 2s, scale 2s,
}

.subsection3{
width: 200px;
height: 200px;
border: 4px solid black;
padding: 5px;
margin: 10px;
float: left;
-webkit-box-flex: 1;
-webkit-transition: -webkit-transform 2s, border 2s, scale 2s,
}

.subsection4{
width: 200px;
height: 200px;
border: 4px solid black;
padding: 5px;
margin: 10px;
float: left;
-webkit-box-flex: 1;
-webkit-transition: -webkit-transform 2s, border 2s, scale 2s,
}

#main_section:hover{
-webkit-transform: scale(1.05);
border: 5px solid yellow;
}

.subsection1:hover{
-webkit-transform: scale(1.05);
border: 5px solid yellow;
}

.subsection2:hover{
-webkit-transform: scale(1.05);
border: 5px solid yellow;
}

.subsection3:hover{
-webkit-transform: scale(1.05);
border: 5px solid yellow;
}

.subsection4:hover{
-webkit-transform: scale(1.05);
border: 5px solid yellow;
}

/* End Section Code */

/* Footer Code */

#footer{
text-align: center;
}

/* End Footer Code */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:50:57.650

发生这种情况的原因是当您将鼠标悬停在左上角时 b/c 将其缩放 5%

```
-webkit-transform: scale(1.05); 
```

并且由于所有这些框都是浮动的，因此当您缩放左上角的框时，它会挤满底部框的宽度，因此它会跳到右下角的框下方。

在数学术语中，盒子包含在`.sidebar`其中没有设置高度，因此它只是采用相同的高度`.main_div`= 450px。如果您进行数学运算，您会发现如果将左上角的框缩放 5% ((200+10)*1.05 = 210) 并将其添加到底部（那么您还必须添加填充和边距)，您会看到总数将超过 450px，因此发生了跳跃。

为了证明我在说什么，您可以尝试将左上角的高度降低为 150 像素（而不是 200 像素），您会发现将鼠标悬停在其上方不会再将下方的高度撞到底部。

简而言之，浮动元素必须适合包含的 div。如果他们不这样做，他们就会开始跳来跳去

**更新：**

经过进一步研究..事实证明，问题不在于盒子的高度比我之前声称的容器大..而仅仅是因为您为浮动元素使用了不同的高度..浮动元素不如果它们的高度不同，就不能很好地工作。[（您将在css the missing manual](https://rads.stackoverflow.com/amzn/click/com/1449325947)的第 211 页看到一个与您的完全相同的详细示例。

为了证明我的观点.. 执行以下操作来调试正在发生的事情：

1.  在 chrome 上右键单击窗口并转到`inspect element`
2.  转到 div`.subsection1`并将其高度更改为 210px
    *   您会看到它下面的框会下降，这会重现您的问题
3.  现在也将高度更改`.subsection2`为 210px ..
    *   你会看到掉下来的盒子又回到了原来的位置。。
4.  如果你改变高度`.subsection3`并且`.subsection4`你会注意到没有任何变化（即没有盒子掉下来等）
    *   这证明了具有不同高度的元素浮动会导致不可预测或*未定义*的行为..所以这种情况应该避免

**最后说明：**

像你正在做的那样通过反复试验来学习 css 是好的。但我强烈建议你遵循一本结构化的书（就像我链接到的那本书）。css 可能非常不直观和令人沮丧，你很容易基于错误的结论得出结论根据您的试错结果。

# javascript - jQueryUI 可排序 - 在“项目”中可能是复杂的选择器

> ID：14915132
> 
> 赞同：2
> 
> 时间：2013-02-16T21:09:02.913
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable

我在使用 jQueryUI 的可排序功能时遇到了问题：

```
 <div class="sortable">
        <div class="ui-state-default">
            <h4></h4>
            <input type="text" />
            <button></button>
        </div>
        ...more <div>
    </div> 
```

我的目标是不能对整个 div 进行排序，而只能对输入元素进行排序。那可能吗？

我已经尝试了几件事，但没有任何效果......

```
$(".sortable").sortable({ items: "> input" });
$(".sortable").sortable({ items: "> input[type=text]" });
$(".sortable").sortable({ items: "> div > input" });
$(".sortable").sortable("option", 'items', 'div > input'); 
```

我已经用谷歌搜索了一个解决方案，但除了这个[类似的问题](https://stackoverflow.com/questions/2918175/can-jquery-uis-sortable-handle-complex-selectors-for-the-items-option "类似的问题")之外什么也没找到，但我认为 .cancel() 函数对我来说不是一个解决方案。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:04:25.833

你遇到的问题是输入框本身不能做成可拖动的句柄。您需要将输入包装在 span 或 div 中，并在`{ items: }`标签中使用它。输入框本身还是拿不出来的，所以强烈建议在div里面使用一个handle来拖拽，让操作更直观。

或者，您可以在输入顶部添加一个隐藏的 div`{ position: absolute; width: 100%; height:100% }`作为句柄，但这会使您的输入不可编辑，因为点击会击中该 div 而不是您的输入。

# algorithm - 如何决定应该使用哪种树遍历？

> ID：14915134
> 
> 赞同：0
> 
> 时间：2013-02-16T21:09:08.210
> 
> 标签：algorithm, tree

在 StackOverFlow 的一个问题中，我读到如果我需要删除某个文件夹，那么首先我需要删除该文件夹中的文件和子文件夹（这是一个递归过程）。

有人提到我们需要使用后序遍历技术。

是不是因为我们需要最后处理父级，我的意思是在删除子文件夹和文件之后，我们需要删除文件夹？

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:15:20.297

因此，如果您将文件夹作为树结构进行管理，则叶节点就是文件。您想在删除之前清空文件夹。因此，从根节点（要删除的文件夹）向下遍历到叶节点（文件）并向上删除。

这样，您可以在删除文件夹之前清空它们。因此，如果您有一个文件夹 A 和一个文件夹 B，其中包含文件 c 和 d：

A/B/c 和 A/B/d 你删除 c 和 d，然后是 B，然后是 A。

我希望这是您正在寻找的答案。

# c - 从 C 中的指针打印出值

> ID：14915136
> 
> 赞同：0
> 
> 时间：2013-02-16T21:09:19.683
> 
> 标签：c, pointers, int, printf

在以下示例中，我将如何打印出 u 中的值？我继续打印地址。

```
int example (float f) 
{ 
    unsigned int u = *(unsigned int*)&f;
    printf("The value in u is: %u\n", u);
} 
```

编辑

我有这样的事情：

```
int example (float f) 
{ 
    unsigned int u = *(unsigned int*)&f;

    if((u&u) && u != MASK) {

     printf("The value in u is: %u\n", u);

     printf("The address in u is: %u" , u);
    }
}

int main ()
{
    example(3);
    return(EXIT_SUCCESS);
} 
```

我遇到的问题是当我尝试检查并打印出'u'的值时。我似乎无法将其打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:42:17.467

这是您的代码的扩展，可在 Mac OS X 10.7.5 上的 GCC 4.7.1 下正常编译和运行。

```
#include <stdio.h>
#include <inttypes.h>

static void example(float f) 
{ 
    unsigned int u = *(unsigned int*)&f;
    printf("%13.6e: %10u = 0x%08X (address 0x%08" PRIXPTR ")\n",
           f, u, u, (uintptr_t)&f);
}

int main(void)
{
    example(+3.14159F);
    example(+0.0);
    example(-0.0);
    example(+3.456789e24);
    example( 3.456789e-24);
    example(-3.456789e24);
    example(-3.456789e-24);
    return(0);
} 
```

输出：

```
 3.141590e+00: 1078530000 = 0x40490FD0 (address 0x7FFF5FD3754C)
 0.000000e+00:          0 = 0x00000000 (address 0x7FFF5FD3754C)
-0.000000e+00: 2147483648 = 0x80000000 (address 0x7FFF5FD3754C)
 3.456789e+24: 1748435002 = 0x6837003A (address 0x7FFF5FD3754C)
 3.456789e-24:  411417185 = 0x1885BA61 (address 0x7FFF5FD3754C)
-3.456789e+24: 3895918650 = 0xE837003A (address 0x7FFF5FD3754C)
-3.456789e-24: 2558900833 = 0x9885BA61 (address 0x7FFF5FD3754C) 
```

如您所见，我使用的是 64 位机器。您可以在十六进制中看到符号位在最高有效字节中；不太明显的是指数在接下来的 8 位中，尾数在剩余的 23 位中。

您的代码与我所展示的非常接近——一旦错别字被修复。您使用的代码`MASK`很神秘，因为您没有显示是什么`MASK`。但是，它应该打印几乎所有浮点值的信息，除了正零（因为随后`u&u`评估为假）或具有匹配的位模式的一个特定浮点值`MASK`。

对于我的代码，编译器会发出警告：

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
      -Wold-style-definition x.c -o x
x.c: In function ‘example’:
x.c:6:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
$ 
```

这是另一个扩展，以及更多示例输出：

```
#include <stdio.h>
#include <inttypes.h>

static void example(float f) 
{ 
    unsigned int u = *(unsigned int*)&f;
    unsigned int s = u >> 31;
    unsigned int e = (u >> 23) & 0xFF;
    unsigned int m = (u >> 16) & 0x7F;
    printf("%13.6e: %10u = 0x%08X (s=%u, e=x%02X, m=0x%02X) (0x%08" PRIXPTR ")\n",
           f, u, u, s, e, m, (uintptr_t)&f);
}

int main(void)
{
    example(+3.14159F);
    example(+0.0);
    example(-0.0);
    example(+1.0);
    example(-1.0);
    example(+2.0);
    example(-2.0);
    example(+3.0);
    example(-3.0);
    example(+4.0);
    example(-4.0);
    example(+5.0);
    example(-5.0);
    example(+3.456789e24);
    example( 3.456789e-24);
    example(-3.456789e24);
    example(-3.456789e-24);
    return(0);
} 
```

输出：

```
 3.141590e+00: 1078530000 = 0x40490FD0 (s=0, e=x80, m=0x49) (0x7FFF6112754C)
 0.000000e+00:          0 = 0x00000000 (s=0, e=x00, m=0x00) (0x7FFF6112754C)
-0.000000e+00: 2147483648 = 0x80000000 (s=1, e=x00, m=0x00) (0x7FFF6112754C)
 1.000000e+00: 1065353216 = 0x3F800000 (s=0, e=x7F, m=0x00) (0x7FFF6112754C)
-1.000000e+00: 3212836864 = 0xBF800000 (s=1, e=x7F, m=0x00) (0x7FFF6112754C)
 2.000000e+00: 1073741824 = 0x40000000 (s=0, e=x80, m=0x00) (0x7FFF6112754C)
-2.000000e+00: 3221225472 = 0xC0000000 (s=1, e=x80, m=0x00) (0x7FFF6112754C)
 3.000000e+00: 1077936128 = 0x40400000 (s=0, e=x80, m=0x40) (0x7FFF6112754C)
-3.000000e+00: 3225419776 = 0xC0400000 (s=1, e=x80, m=0x40) (0x7FFF6112754C)
 4.000000e+00: 1082130432 = 0x40800000 (s=0, e=x81, m=0x00) (0x7FFF6112754C)
-4.000000e+00: 3229614080 = 0xC0800000 (s=1, e=x81, m=0x00) (0x7FFF6112754C)
 5.000000e+00: 1084227584 = 0x40A00000 (s=0, e=x81, m=0x20) (0x7FFF6112754C)
-5.000000e+00: 3231711232 = 0xC0A00000 (s=1, e=x81, m=0x20) (0x7FFF6112754C)
 3.456789e+24: 1748435002 = 0x6837003A (s=0, e=xD0, m=0x37) (0x7FFF6112754C)
 3.456789e-24:  411417185 = 0x1885BA61 (s=0, e=x31, m=0x05) (0x7FFF6112754C)
-3.456789e+24: 3895918650 = 0xE837003A (s=1, e=xD0, m=0x37) (0x7FFF6112754C)
-3.456789e-24: 2558900833 = 0x9885BA61 (s=1, e=x31, m=0x05) (0x7FFF6112754C) 
```

这是开始对[IEEE 754 单精度浮点格式](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)进行一些详细的分析。引用的 Wikipedia 页面提供了有关为什么我用于创建`s`,`e`的值`m`具有相关性的更多信息（注意我正在使用 Intel 机器，因此这是 little-endian 数据）。

除了“逐渐下溢”值、零、无穷大和 NaN 之外，“真实”尾数的第一位始终为 1，因此该格式实际上并未存储该值。您可以从 1、2、4 的值中看到这一点——与 3 和 5 形成对比（尽管 3 和 5 的二进制表示包含两个设置位，但它们中的每一个都在尾数中设置了一个位）。

# ios - 通过 iOS 创建和导出动画 gif？

> ID：14915138
> 
> 赞同：74
> 
> 时间：2013-02-16T21:09:32.160
> 
> 标签：ios, objective-c, swift, core-graphics, animated-gif

我在 iOS 应用程序中有一系列用户自定义的图像，这些图像以简单的逐帧翻书风格进行动画处理。

我的问题是：有没有办法让用户将他们的动画导出为动画 gif？理想情况下，我希望他们能够通过电子邮件、社交分享 (T/FB) 或（最坏的情况......）将动画 gif 保存到他们的文档文件夹中，以便通过 iTunes 检索。

我知道如何将 .png 保存到照片库，并且我找到了一种将动画录制为 QT 文件的方法（[http://www.cimgf.com/2009/02/03/record-your-core-animation -animation/](http://www.cimgf.com/2009/02/03/record-your-core-animation-animation/)），但我还没有找到一种方法来踢出一个普通的旧动画 gif。我在核心动画或其他地方遗漏了什么吗？是否有任何人可以推荐的方法、框架或资源？对不起，如果问题太笼统 - 努力寻找起点。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-02-16T23:01:36.163

您可以使用 Image I/O 框架（它是 iOS SDK 的一部分）创建动画 GIF。您还需要包含`MobileCoreServices`定义 GIF 类型常量的框架。您需要将这些框架添加到您的目标中，并将它们的标题导入您要创建动画 GIF 的文件中，如下所示：

```
#import <ImageIO/ImageIO.h>
#import <MobileCoreServices/MobileCoreServices.h> 
```

用例子来解释是最容易的。我将向您展示我用来在 iPhone 5 上制作此 GIF 的代码：

![由所示代码创建的动画 GIF](../Images/13e9f849d527cf44c8d11a685ff3aca2.png)

首先，这是一个辅助函数，它接受一个大小和一个角度，并以该角度返回`UIImage`红色圆盘的 a：

```
static UIImage *frameImage(CGSize size, CGFloat radians) {
    UIGraphicsBeginImageContextWithOptions(size, YES, 1); {
        [[UIColor whiteColor] setFill];
        UIRectFill(CGRectInfinite);
        CGContextRef gc = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(gc, size.width / 2, size.height / 2);
        CGContextRotateCTM(gc, radians);
        CGContextTranslateCTM(gc, size.width / 4, 0);
        [[UIColor redColor] setFill];
        CGFloat w = size.width / 10;
        CGContextFillEllipseInRect(gc, CGRectMake(-w / 2, -w / 2, w, w));
    }
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
} 
```

现在我们可以创建 GIF。首先，我们将为帧数定义一个常量，因为稍后我们需要它两次：

```
static void makeAnimatedGif(void) {
    static NSUInteger const kFrameCount = 16; 
```

我们需要一个属性字典来指定动画应该重复的次数：

```
 NSDictionary *fileProperties = @{
        (__bridge id)kCGImagePropertyGIFDictionary: @{
            (__bridge id)kCGImagePropertyGIFLoopCount: @0, // 0 means loop forever
        }
    }; 
```

我们需要另一个属性字典，我们将其附加到每个帧，指定该帧应该显示多长时间：

```
 NSDictionary *frameProperties = @{
        (__bridge id)kCGImagePropertyGIFDictionary: @{
            (__bridge id)kCGImagePropertyGIFDelayTime: @0.02f, // a float (not double!) in seconds, rounded to centiseconds in the GIF data
        }
    }; 
```

我们还将在文档目录中为 GIF 创建一个 URL：

```
 NSURL *documentsDirectoryURL = [[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:YES error:nil];
    NSURL *fileURL = [documentsDirectoryURL URLByAppendingPathComponent:@"animated.gif"]; 
```

现在我们可以创建一个`CGImageDestination`将 GIF 写入指定 URL 的方法：

```
 CGImageDestinationRef destination = CGImageDestinationCreateWithURL((__bridge CFURLRef)fileURL, kUTTypeGIF, kFrameCount, NULL);
    CGImageDestinationSetProperties(destination, (__bridge CFDictionaryRef)fileProperties); 
```

我发现传递`fileProperties`作为的最后一个参数是`CGImageDestinationCreateWithURL`行不通**的**。你必须使用`CGImageDestinationSetProperties`.

现在我们可以创建和编写我们的框架：

```
 for (NSUInteger i = 0; i < kFrameCount; i++) {
        @autoreleasepool {
            UIImage *image = frameImage(CGSizeMake(300, 300), M_PI * 2 * i / kFrameCount);
            CGImageDestinationAddImage(destination, image.CGImage, (__bridge CFDictionaryRef)frameProperties);
        }
    } 
```

请注意，我们将帧属性字典与每个帧图像一起传递。

在我们准确地添加了指定数量的帧之后，我们最终确定了目标并释放它：

```
 if (!CGImageDestinationFinalize(destination)) {
        NSLog(@"failed to finalize image destination");
    }
    CFRelease(destination);

    NSLog(@"url=%@", fileURL);
} 
```

如果您在模拟器上运行它，您可以从调试控制台复制 URL 并将其粘贴到浏览器中以查看图像。如果您在设备上运行它，您可以使用 Xcode Organizer 窗口从设备下载应用程序沙箱并查看图像。或者您可以使用这样的应用程序`iExplorer`，让您直接浏览设备的文件系统。（这不需要越狱。）

我在运行 iOS 6.1 的 iPhone 5 上对此进行了测试，但我相信代码应该可以追溯到 iOS 4.0。

我已将所有代码放在[此要点](https://gist.github.com/mayoff/4969104)中，以便于复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-07T12:05:37.210

对于**斯威夫特 3**

```
import Foundation
import UIKit
import ImageIO
import MobileCoreServices

extension UIImage {
    static func animatedGif(from images: [UIImage]) {
        let fileProperties: CFDictionary = [kCGImagePropertyGIFDictionary as String: [kCGImagePropertyGIFLoopCount as String: 0]]  as CFDictionary
        let frameProperties: CFDictionary = [kCGImagePropertyGIFDictionary as String: [(kCGImagePropertyGIFDelayTime as String): 1.0]] as CFDictionary

        let documentsDirectoryURL: URL? = try? FileManager.default.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: true)
        let fileURL: URL? = documentsDirectoryURL?.appendingPathComponent("animated.gif")

        if let url = fileURL as CFURL? {
            if let destination = CGImageDestinationCreateWithURL(url, kUTTypeGIF, images.count, nil) {
                CGImageDestinationSetProperties(destination, fileProperties)
                for image in images {
                    if let cgImage = image.cgImage {
                        CGImageDestinationAddImage(destination, cgImage, frameProperties)
                    }
                }
                if !CGImageDestinationFinalize(destination) {
                    print("Failed to finalize the image destination")
                }
                print("Url = \(fileURL)")
            }
        }
    }
} 
```

我已经从[上面的答案](https://stackoverflow.com/a/14916097/6536841)转换了它。我希望它有所帮助。

可作为[要点](https://gist.github.com/NikhilManapure/6f4c4e18692d51d6a8acfdc440dcac5f)。

欢迎编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T09:02:19.430

如果您正在寻找 Swift 3 解决方案，可以查看[https://github.com/onmyway133/GifMagic](https://github.com/onmyway133/GifMagic)。它有`Encoder`它`Decoder`的汇编和反汇编gif文件。

基本上，您应该使用具有这些功能的`Image IO`框架，，，，`CGImageDestinationCreateWithURL``CGImageDestinationSetProperties``CGImageDestinationAddImage``CGImageDestinationFinalize`

还有 Swift [https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/WorkingWithCocoaDataTypes.html](https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/WorkingWithCocoaDataTypes.html)

> 从带注释的 API 返回的 Core Foundation 对象在 Swift 中自动进行内存管理——您不需要自己调用 CFRetain、CFRelease 或 CFAutorelease 函数。

# jquery - 设置它的孩子的 li 宽度

> ID：14915145
> 
> 赞同：1
> 
> 时间：2013-02-16T21:10:26.580
> 
> 标签：jquery

我想设置`li`它自己的每个宽度`a`。这是我正在尝试[的代码：](http://jsbin.com/aduruk/3/edit)

```
if($('ul').length()) { 
    $('ul li').each(function() {
        $(this).children('a').each(function() {
            var width2 = $(this).style.width();
            $('ul li').style.width = width2;
            $(this).text(width2);
        });
    });
} 
```

HTML：

```
<ul>
    <li class="home"><a href="#">Home</a></li>
    <li class="about-me"><a href="#">About</a></li>
    <li class="portfolio"><a href="#">Realizations</a></li>
    <li class="contact"><a href="#">Contact</a></li>
</ul> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:23:21.960

这是[更新的 jsBin](http://jsbin.com/aduruk/6/edit)。

在 jQuery 中，您可以使用 访问样式属性`.css("attribute")`，并使用 更新`.css("attribute","value")`。另外，你可以说`$("ul").length`，不需要`()`.

最后结果：

```
if($('ul').length) { 
   $('ul li').each(function() {
      $(this).children('a').each(function() {
         var width2 = $(this).css("width");
         $('ul li').css("width",width2);

      });
   });
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:24:11.270

```
var width;
$('ul li a').each(function() {
  width = $(this).css('width');
  $(this).parent('li').css('width', width);
}); 
```

它选择所有`a`元素，获取宽度并设置为父`li`元素

# php - PHP FPM - 检查是否正在运行

> ID：14915147
> 
> 赞同：56
> 
> 时间：2013-02-16T21:10:33.080
> 
> 标签：php

php fpm 网站上的文档说 php fpm 从 5.3.3 开始是 coe php 的一部分

我正在运行 5.3.10，如何检查它是否正常工作？我以为这是在端口上运行的服务？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-11-19T12:46:01.597

假设你在 Linux 上，通过搜索进程列表来检查 php-fpm 是否正在运行：

```
ps aux | grep php-fpm 
```

如果通过 IP 运行（而不是通过 Unix 套接字），那么您还可以检查端口：

```
netstat -an | grep :9000 
```

或使用 nmap：

```
nmap localhost -p 9000 
```

最后，我读到您可以请求状态，但根据我的经验，这已被证明是不可靠的：

```
/etc/init.d/php5-fpm status 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-11-30T15:06:03.250

对于 php7.0-fpm 我调用：

```
service php7.0-fpm status 
```

> php7.0-fpm 启动/运行，进程 25993

现在注意好的部分。进程名其实是php-fpm7.0

```
echo `/bin/pidof php-fpm7.0` 
```

> 26334 26297 26286 26285 26282

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-09T19:44:33.360

这是在 php-fpm 7 上使用套接字的方法

```
install socat
apt-get install socat

#!/bin/sh

  if echo /dev/null | socat UNIX:/var/run/php/php7.0-fpm.sock - ; then
    echo "$home/run/php-fpm.sock connect OK"
  else
    echo "$home/run/php-fpm.sock connect ERROR"
  fi 
```

您还可以检查服务是否像这样运行。

```
service php7.0-fpm status | grep running 
```

它会回来

活动：自 2017 年 4 月 9 日星期日 12:48:09 PDT 以来活动（运行）；48 岁前

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-05T17:34:49.213

如果它可以帮助安装了 php5.6 和 php-fpm 的 amilinux 上的某人，它是：

`sudo /etc/init.d/php-fpm-5.6 status`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T21:19:03.197

PHP-FPM 是一种在需要时生成新 PHP 进程的服务，通常通过像 nginx 这样的 fast-cgi 模块。您可以通过检查 init.d 脚本来判断（有误差），例如“sudo /etc/init.d/php-fpm status”

使用什么端口或 unix 文件套接字取决于配置，但通常只是 TCP 端口 9000。即 127.0.0.1:9000

判断它是否正确运行的最好方法是让 nginx 运行，并设置一个虚拟主机，它将 fast-cgi 传递给 PHP-FPM，然后使用 wget 或浏览器检查它。

# redirect - PHP页面超时，现在浏览器将www放在我的网址前面

> ID：14915148
> 
> 赞同：1
> 
> 时间：2013-02-16T21:10:34.210
> 
> 标签：redirect, local, hosts

我在本地主机上运行了一个非常耗时的脚本，并且我认为我已正确设置它以使用此代码不超时：`ini_set('max_execution_time', 300);`

但是，在 5 分钟结束之前，我的互联网服务提供商 (BT) 烦人地将我重定向到“我们找不到您的页面”页面。我更改了偏好以阻止他们再次这样做。

我的脚本在 URL“myproject.local/script.php”上运行。我已经使用主机文件设置了我的计算机，以将指向 myproject.local 的任何内容定向到文件夹：Applications/MAMP/htdocs/myproject

现在的问题是，每当我输入 myproject.local 时，我都会被重定向到 www.myproject.local 并且浏览器无法找到该页面。我必须输入[http://myproject.local](http://myproject.local)才能找到正确的页面。

注意我第一次设置 myproject.local （几个月前）并在浏览器中访问它时，我的浏览器问我“你的意思是[http://myproject.local](http://myproject.local)吗？” 我点击是，它从那以后就记住了。也就是说，直到现在。

谁能告诉我如何让我的浏览器带我[http://myproject.local](http://myproject.local)而不必总是输入 http:// （我遇到问题的浏览器是 Firefox）

# html - 嵌入 Flash 的简单方法

> ID：14915151
> 
> 赞同：0
> 
> 时间：2013-02-16T21:10:45.680
> 
> 标签：html, flash

首先，我想澄清一下，我知道如何在网站上嵌入 swf 文件。我要问的是有点不同的东西。为了理解，我会详细说明。

我正在开发一个小的“小部件”，我希望它允许网站所有者嵌入到他们的电子网站上。此小部件将根据不同的参数（主要是 ID）显示一些信息。此数据将从我托管的数据库中检索，该数据库与嵌入此小部件的站点位于不同的服务器上。我知道 flash 可以与 PHP 通信以发送检索数据，所以我不认为这是一个问题。想要这个小部件的网站所有者将从我那里获得一个“嵌入代码”，其中包含 ID，可能是宽度和高度以及其他信息。但是，它们不会托管 swf 文件。

我想知道的是您认为拥有此代码以使其尽可能小且几乎没有入侵的最佳方式。我知道这些小部件通常是用 javascript 制作的，用户只需要一个`<script type="text/javascript" src="...?id=111412"></script>`.

另外，我需要更新控制，这样如果我更改 SWF 文件，新版本将出现在所有嵌入它的网站上。

谢谢。

# facebook - 加载 iframe Facebook（加载被 X-Frame-Options 拒绝）

> ID：14915152
> 
> 赞同：28
> 
> 时间：2013-02-16T21:10:48.783
> 
> 标签：facebook, iframe, facebook-iframe

我的团队负责 Facebook 上的应用程序的一些困难。我们认为这在加载 iframe 时发生了一些错误。我们通过 Firebug 发现了这个错误：

> X-Frame-Options 拒绝加载：[https ://www.facebook.com/dialog/oauth?client_id=140656472747871&redirect_uri=https%3A%2F%2Fnuvemapps.com.br%2Fci%2Fncupons%2Fhome%2F%3Ffb_source%3Dsearch %26ref%3Dts%26fref%3Dts&state=32e667a3645c047d751d20811d49ef6b&req_perms=email%2C+publish_steram%2C+manage_pages](https://www.facebook.com/dialog/oauth?client_id=140656472747871&redirect_uri=https%3A%2F%2Fnuvemapps.com.br%2Fci%2Fncupons%2Fhome%2F%3Ffb_source%3Dsearch%26ref%3Dts%26fref%3Dts&state=32e667a3645c047d751d20811d49ef6b&req_perms=email%2C+publish_steram%2C+manage_pages)不允许装帧。

这主要发生在没有允许该应用程序的人身上，因此我们不知道这个问题具体从哪里开始。我们还有三个可能的原因：

*   服务器配置
*   我们的编码有问题
*   或者在我们的设置 facebook app dev

任何人都可以帮助识别此错误吗？

这是应用程序的链接： [https ://apps.facebook.com/cupomigo](https://apps.facebook.com/cupomigo)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-23T13:10:54.187

我使用`target="_top"`了链接，现在它工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-07T10:38:25.510

使用下面给出的这一行而不是 header() 函数。

```
echo "<script>window.top.location = 'https://apps.facebook.com/yourappnamespace/';</script>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-04T22:17:49.600

只需添加

```
https://www.facebook.com/plugins/video.php?href= 
```

在您的链接之前：

```
https://www.facebook.com/plugins/video.php?href=<your link> 
```

# cmake - 带有 CMake 的 QtCreator：读取源文件夹时访问被拒绝

> ID：14915153
> 
> 赞同：0
> 
> 时间：2013-02-16T21:10:50.767
> 
> 标签：cmake, qt-creator

我的 CMakeLists.txt 文件如下所示：

```
project(DeadWeight)

# Versioning
set (DeadWeight_VERSION_MAJOR 0)
set (DeadWeight_VERSION_MINOR 1)

SET( DEBUG_BUILD 1 )
ADD_DEFINITIONS( -DDEBUG )
SET(CMAKE_BUILD_TYPE Debug)

cmake_minimum_required(VERSION 2.8)

file(GLOB DEADWEIGHT_SRC ./src "*.cpp")    

add_executable(${PROJECT_NAME} ${DEADWEIGHT_SRC})
SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINKER_LANGUAGE CXX) 
```

将其加载到 QtCreator 并运行 CMake（顺便说一句完成时没有错误），我无法在我的 QtCreator 视图中打开源文件夹。当我单击源文件夹时，它显示：“无法打开阅读。访问被拒绝。” 我确定我对相关文件夹具有读写权限。如果我不正确地使用源文件，有人可以指出吗？还是我做错了什么？这是 CMake 错误还是 QtCreator 问题？

编辑：另外，构建失败说：来自 MSVC++ 9 编译器的“缺少源文件名：找不到文件”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:26:14.717

您的`file`命令确实是问题所在。你可能的意思是：

```
file(GLOB DEADWEIGHT_SRC src/*.cpp) 
```

顺便说一句，对于单一配置的 IDE（如 QtCreator），您通常会从命令行/cmake gui 而不是在 CMakeLists.txt 中将构建类型设置为调试。对于多配置 IDE（如 MSVC），它是在 IDE 中设置的。

您可能也不需要显式设置链接器语言 - 它应该从“.cpp”文件扩展名中自动推导出来。

# highcharts - 重绘到底是做什么的？

> ID：14915154
> 
> 赞同：1
> 
> 时间：2013-02-16T21:11:02.147
> 
> 标签：highcharts

更改图表上的某些内容时，例如`myChart.addSeries(mySeriesObj)`或

`myChart.get("myPointId').update(50);`默认行为是调用重绘函数。

现在，假设我在该图表上有 3 个系列（系列 A、系列 B、系列 C），而我刚刚更新了系列 A 中的**1 个点**。它会非常快地重绘所有图表（seriesA、seriesB、seriesC、轴、标签等），还是只是新点？

**Highchart 是否与图层一起使用，或者都在同一个“框架”中？**

我问这个是因为我将使用大于 1,000 点的系列，并且我知道在 Highchart 上使用大数据时可能会出现一些性能问题。（我已经看到启用**marker.states.hover**时性能会变慢选项或**工具提示**选项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:28:02.817

据我了解，Highcharts 很可能只会重绘脏组件（在您的情况下是该点所属的系列）。

源代码的一些点点滴滴`chart.redraw()`看起来像

```
// redraw affected series
each(series, function (serie) {
    if (serie.isDirty && serie.visible &&
            (!serie.isCartesian || serie.xAxis)) { // issue #153
        serie.redraw();
    }
}); 
```

当您调用 时`point.update()`，只有该点所属的系列被标记为脏。因此在下一次`chart.redraw()`调用时重绘，而其他未更新点的系列将不会重绘。

`chart.redraw()`话虽如此，除了上述之外，还有其他一些代码。主要用于重绘轴和图例和其他东西。似乎其中大多数也是基于类似的`isDirty`逻辑重新绘制的，因此不应成为性能障碍。但是，如果性能确实是一个关键因素，您可以`point.update()`使用第二个参数调用 as `false`，这将跳过隐式`chart.redraw()`调用，从而跳过其中的所有内容。然后，您可以显式调用`series.redraw()`您希望更新的特定系列（该点所属的系列）上的方法。
**注意**：这不会重绘轴（和其他东西），如果点的更新值超出当前轴的极值，则可能需要重绘。还有`series.redraw()`未在文档中列出，可能表明不鼓励使用它并可能产生意外结果。
在 99% 的情况下，我会采用这种`chart.redraw()`方式，因为大多数时候性能是可以接受的。

**参考资料：**
[`point.update()`api参考](http://api.highcharts.com/highstock#Point.update%28%29)
[**Demo@JsFiddle**](http://jsfiddle.net/dUGjc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:06:12.317

From the source code:

```
/**
 * Redraw legend, axes or series based on updated data
 *
 * @param {Boolean|Object} animation Whether to apply animation, and optionally animation
 *    configuration
 */
 redraw: function (animation) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:09:46.860

您还可以使用点更新（）函数[http://api.highcharts.com/highstock#Point.update()](http://api.highcharts.com/highstock#Point.update())

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T10:28:41.907

我在加载 > 1000 点健身数据系列（如心率、速度等）时遇到了一些问题。我发现在情节[Highcharts 示例](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-enabled-false/)中禁用标记，提供了相当显着的性能提升。我也禁用了动画。

我在我的解决方案上运行了 chrome 分析器，发现在准备渲染期间调用了 highcharts.src.js 中的每个函数。

```
 this.each =
            //Array.prototype.forEach ?
        //  function (arr, fn) { // modern browsers
        //      return Array.prototype.forEach.call(arr, fn);

        //  } : 
            function (arr, fn) { // legacy
                var i = 0, 
                    len = arr.length;
                for (; i < len; i++) {
                    if (fn.call(arr[i], arr[i], i, arr) === false) {
                        return i;
                    }
                }
            }; 
```

我听说forEach 比for 循环慢，所以我注释掉了forEach 的默认选择。在[jsperf for vs foreach](http://jsperf.com/for-vs-foreach/37)上进行测试，在我的机器环境中显示 foreach 比最快的反向 for 循环慢 85%

# c++ - 创建从特定地址开始的数组

> ID：14915159
> 
> 赞同：0
> 
> 时间：2013-02-16T21:11:15.967
> 
> 标签：c++, arrays, memory

在 C++ 中，是否可以创建从特定地址（例如 0x1000）开始的特定大小的数组（例如短数组 [2048]）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:29:02.510

在嵌入式系统中，您可以使用链接器文件在此处映射符号或特殊段。或者可能是一个pragma。这对于嵌入式系统来说是很常见的事情，其中​​引导加载程序需要与其启动的应用程序共享内存空间，或者协处理器在固定地址与主 CPU 具有共享内存库。问题是方法因工具而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:15:15.690

简短回答：不。在**非嵌入式系统中**（我将对此进行限制），用户地址空间是**虚拟地址空间**。这意味着即使你得到一个指向 0x1000 的指针，它**也不是你在物理内存映射中分配的数据的物理位置**。因此，由于系统对您隐藏了物理地址 - 您无法请求特定的**物理**地址。然而，虚拟地址是不同的故事......

了解了指向 0x1000 并不能保证实际上意味着您指向的是**物理地址**0x1000，在 Linux 中，您可以使用该函数`mmap()`及其 Windows 对应函数`VirtualAlloc()`来请求分配给特定的**虚拟**地址。当然，这些功能不能保证正常工作（例如，如果您请求的虚拟地址已经被映射，或者它是系统“保留”的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:36:11.123

可以使用placement new：

```
struct A { short array[2048]; };
char *addr = (char*)0x1000;
new (addr) A; 
```

如果您想要动态大小，请使用以下内容：

```
new (addr) short[size]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-31T07:06:13.580

假设一个嵌入式系统，你的问题确实有道理~~。~~

通常，您可以通过定义具有寄存器大小的易失性指针来访问外设的内存映射寄存器。然而，由于这种方法很常见，因此一旦涉及 MISRA 或 CERT C 等编码标准，它就有一个缺点。这些标准声称指针在一般的安全关键系统中是危险的东西。因此，您应该尽可能避免使用它们。

当我偶然发现这个问题一段时间时，似乎有像ARM 所述的“更好”的方法可用（[将变量映射到特定地址）。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka3750.html)您必须在自己的编译单元中定义结构/数组（结果是单个 .o 文件）。在此之后，您需要编写一个链接器文件，将这个单个 .o 文件放在指定的地址。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-16T21:35:54.477

如果您想要一个特定地址的数组，您可以将它放在一个结构中，然后您可以分配一个指向所需位置的指针。看这个例子：

```
struct A {
  short array[2048];
};

int main(char argc, char** argv) {
  A* a = (A*)0x1000;
  printf("%p\n", &a->array[0]);
  return 0;
} 
```

# c# - 在第二个 AppDomain 中运行服务

> ID：14915160
> 
> 赞同：0
> 
> 时间：2013-02-16T21:11:18.637
> 
> 标签：c#, appdomain, service-reference

我有一个对象，我将其实例化到它自己的 AppDomain 中。这样做的主要原因是它调用了我无法控制的代码（第三方 dll），如果我需要中止线程，我可以这样做，然后销毁 AppDomain 以确保不会发生任何奇怪的事情。这部分工作正常。

但是，此对象还具有对我控制的 ServiceReference 的引用。由于服务引用位于第二个 AppDomain 的对象中，因此我收到了序列化异常，因为该服务未标记为可序列化。服务引用只是 Visual Studio 为我生成的代理，我不确定解决此问题的正确方法。

我应该使用不同的设计，还是有一种简单的方法可以从单独的 AppDomain 中运行服务？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:25:08.443

如果我正确理解了您的问题，您需要使用 .Net Remoting 之类的东西在 appdomains 之间使用对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:59:12.217

想通了我的问题。我将我的类型标记为 [Serializable]，而不是从 MarshalByRefObject 派生。一旦我弄清楚这一点，一切似乎都开始正常工作。

然而，现在我使用这个新模型有几个 CPU 周期，我对它不满意，正在寻找另一种方法。稍后我将发布一个单独的“设计”问题。

谢谢，

斯科特

# qt - 如何使用 Qt 的 OpenGL 类加载和绑定纹理？

> ID：14915167
> 
> 赞同：0
> 
> 时间：2013-02-16T21:12:29.853
> 
> 标签：qt, opengl, qt5

我正在使用 Qt5 开发一个简单的 OpenGL 应用程序，并且我使用新的 QOpenGL 类来处理我的顶点缓冲区、索引缓冲区和着色器。不过，我有点卡在纹理上。

我有我的 QOpenGLBuffer 和 QOpenGLShaderProgram...但是 QOpenGLTexture 在哪里？[Qt5 类列表](http://qt-project.org/doc/qt-5.0/qtdoc/classes.html)中似乎不存在这样的类。我是否必须求助于直接 OpenGL 调用来管理纹理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:07:24.667

没错：在 Qt5 的 QtGui 模块中不存在这样的类。是的，如果您不想拉入小部件库，则必须求助于普通的 OpenGL 调用来处理您的纹理。

话虽如此，Qt 开发人员已经认识到并积极讨论了当前（假设有些非最佳和不一致）的情况。[请参阅Qt 5.1 和后续邮件中](http://lists.qt-project.org/pipermail/development/2012-December/008765.html)的 Sean Harmer 的OpenGL ，特别是第 7 点。但是按照该线程并查看当前的开发树，我怀疑它会在 5.1 中登陆。

* * *

编辑：查看其他答案和我想添加的关于标准 Qt 5.0 选项的最新评论：

您的主要目标是：

1.  得到一些指针，你可以`glTexImage2D(..., GL_UNSIGNED_BYTE, GL_RGBA, pointer)`从你可能“奇怪”的格式化 QImage 传递给它？或者
2.  使用一些帮助您处理`glTex*()`相关功能的帮助类？

如果它是第一个并且链接（旧）OpenGL 模块（它是 Qt 5.0 的一部分）是一个选项（除了“美学”原因，我不明白为什么它不会），你可以使用静态`QGLWidget::convertToGLFormat(QImage)`维克多暗示的。如果不是，那么“手动”执行类似该函数的操作（按照 Xīcò 建议的方式）应该可以工作：基本上首先调用`QImage::convertToFormat(QImage::Format_ARGB32)`然后添加一些依赖于平台的字节调整和镜像（参见[源代码](http://qt.gitorious.org/qt/qt/blobs/4.8/src/opengl/qgl.cpp)中的*convertToGLFormatHelper(...)*）。虽然，如果您碰巧使用自己的着色器，那么在 GPU 上执行此操作会更快。

如果您想同时拥有*并*`QGLWidget::bindTexture(...)`链接提到的 OpenGL Qt 5.0 附加模块是一个选项，您甚至可以在 QQuickView 类中实际使用等效模块：

```
GLuint texID = QGLContext::fromOpenGLContext(
                   this->openglContext())->bindTexture(...) 
```

`this`QQuickView*在哪里？请参阅[QGLContext 帮助](http://qt-project.org/doc/qt-5.0/qtopengl/qglcontext.html)。（免责声明：我自己没有尝试过。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:16:15.520

`QImage`直接支持 OpenGL 友好格式，可以提供给 glTexImage..() 函数。

[请参阅此处](http://digitalfanatics.org/projects/qt_tutorial/chapter14.html)的第 6 章注释。

所以是的，可以/应该使用直接的 OpenGL 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:09:56.207

> 伊克。要在我的非小部件应用程序中将 QImages 转换为 OpenGL 格式，我必须包含 QGLWidget？

根据您的机器字节顺序和所需的 OpenGL 格式，您可以使用如下公式：

`QImage gl_compatible_image = standard_image.rgbSwapped ().mirrored ();`

例如，将`Format_RGB32`QImage 映射到`GL_RGBA`Intel 机器上的纹理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T05:33:04.947

看来我正在寻找的类是[`QGLTexture2D`](http://doc-snapshot.qt-project.org/qt3d-1.0/qgltexture2d.html)，它是 Qt3D 的一部分。不幸的是，正如 axxel 所提到的，它不是 Qt 5.0 的一部分，并且可能不会进入 Qt 5.1。

也就是说，我可以自己[检索和构建 Qt3D](http://doc-snapshot.qt-project.org/qt3d-1.0/qt3d-building.html)。然后我可以以与我已经拥有`QGLTexture2D`的非常相似的方式使用。`QOpenGLBuffer``QOpenGLShaderProgram`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-23T11:33:13.527

[QOpenGLTexture 是在 Qt 5.2 中添加的](http://doc.qt.io/qt-5/qopengltexture.html)。

# iphone - 将核心数据数据库/.sqlite 文件同步到 Dropbox

> ID：14915168
> 
> 赞同：2
> 
> 时间：2013-02-16T21:12:44.517
> 
> 标签：iphone, objective-c, xcode, core-data, dropbox

我正在尝试将我的核心数据数据库/.sqlite 文件同步/上传到保管箱。一旦我的用户登录，我有一个按钮来上传文件：

```
-(IBAction)sync{

NSString *localPath = [[NSBundle mainBundle] pathForResource:@"cache" ofType:@"sqlite"];
NSString *filename = @"cache.db";
NSString *destDir = @"/";
[self.restClient uploadFile:filename toPath:destDir withParentRev:nil fromPath:localPath];
} 
```

但这里的问题是：我不知道我的 .sqlite 数据库的名称，我查看过：

`~/Library/Application Support/iPhone Simulator/<SDK>/Applications/<UUID>/Documents/bc.db`

//我也查看了每个文件，但找不到`.sqlite`文件。

但我找不到任何名为：`app name.sqlite`我只能找到`cache.db`这样的文件，我不确定我应该从这里做什么？我可以上传 cache.db 文件吗？还是有另一个文件`app name.sqlite`？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:09:44.000

SQLite 文件位于您创建它的任何位置。这并不神秘——你必须告诉 Core Data 你想把文件放在哪里，它会去你说它应该去的地方。

如果您使用 Apple 的项目模板之一，您的应用程序委托类（在方法中）中可能有一行`persistentStoreCoordinator`看起来像

```
NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"MyApp.sqlite"]; 
```

这就是它所在的位置，这就是您应该在应用程序中找到文件路径的方式。

那**可能**就是一切。如果您没有使用选中“允许外部存储”的二进制属性，则它是整个数据存储。如果您**正在**使用它们，则有一个并行的隐藏目录，其名称未记录，其中包含外部二进制文件。

将数据存储复制到 Dropbox 不太可能有用。您无法通过这种方式将数据存储从一台设备同步到另一台设备 - 几乎可以保证数据损坏。

# c++ - 那么 emplace(c.end(),_1) 和 emplace_back(_1) 的区别是什么？

> ID：14915169
> 
> 赞同：1
> 
> 时间：2013-02-16T21:13:18.853
> 
> 标签：c++, c++11, std

我认为使用 emplace(c.end(),_1) 与 emplace_back(_1) 相同，但我不明白为什么语言设计者提供了两个功能而不是一个。我假设我遗漏了一些信息。

那么 emplace(c.end(),_1) 与 emplace_back(_1) 的区别是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:52:33.273

最大的区别是对容器的要求`value_type`相对于.`vector::emplace_back``deque::emplace_back``emplace`

`vector`只为`deque`：

除了`EmplaceConstructible`来自`args`;

`emplace`需要`MoveInsertable`和`MoveAssignable`，而

`emplace_back`只需要`MoveInsertable`.

对于大多数分配器，包括`std::allocator`，`MoveInsertable`与 相同`MoveConstructible`。

因此，如果您有一个类型要放入`vector`or`deque`中，它是`MoveConstructible`，但不是`MoveAssignable`，`emplace_back`是您的朋友。它也可能会*稍微*快一些，并且代码大小会*稍微*小一些，但这是一个实现质量问题（标准不保证）。并且差异可能比您注意到的要小（除非仔细测量）。

例如，给定：

```
#include <vector>

struct A
{
    A() = default;
    A(A&&) = default;
    A& operator=(A&&) = delete;
}; 
```

这编译：

```
int main()
{
    std::vector<A> v;
    v.emplace_back();
} 
```

但这不会：

```
int main()
{
    std::vector<A> v;
    v.emplace(v.end()); //  error A is not MoveAssignable
} 
```

但是，如果我改变：

```
 A& operator=(A&&) = delete; 
```

至：

```
 A& operator=(A&&) = default; 
```

那么这两个例子都会编译（并运行良好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:21:17.267

根据数据结构，可能`emplace_back`比`emplace(c.end(), _1)`. 例如，使用`std::vector`,`emplace_back`不必检查哪些（如果有）元素需要移动，从而`emplace_back`稍微快一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:15:51.510

是的，在那种情况下它们是等价的。

`emplace`更通用，因为它不仅在最后起作用；`emplace_back`很方便，因为您不必编写`c.end()`.

实现也可能有好处——回想一下，`emplace`不*知道*您提供给它的迭代器是*结束*迭代器。

而已。

# c# - XNA Game 每次运行都会变得更迟钝

> ID：14915173
> 
> 赞同：1
> 
> 时间：2013-02-16T21:13:51.030
> 
> 标签：c#, xna, kinect, lag

我目前正在使用 Kinect SDK 开发的 3D XNA 游戏/模拟器遇到问题。当我打开解决方案并运行它时，每次运行它都会变得越来越迟钝，直到几乎停止。如果我关闭并重新打开解决方案，它仍然会很迟钝，直到我重新启动计算机。

任何想法为什么会发生这种情况，我能做些什么？我假设当游戏关闭时，它正在使用的所有资源都会被释放，因此每次运行时都会提供相同的性能。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:43:59.457

可能是游戏应该覆盖一些文件，例如在开始时加载但游戏不会覆盖它们的瓷砖列表 - 游戏将整个列表附加到现有文件 - 所以每次都有更多加载。

将是我的理论。

# vba - ms access 浏览文件并获取文件名和路径

> ID：14915179
> 
> 赞同：5
> 
> 时间：2013-02-16T21:14:26.623
> 
> 标签：vba, ms-access

我正在使用 ms 访问，我想添加一个按钮来浏览文件，获取文件的名称及其路径。然后我想将文件路径和文件名存储在 2 个单独的变量中。到目前为止我的代码如下，目前我可以浏览文件并仅获取文件名。谁能帮我添加到我的代码中以获取文件路径并将文件名和文件路径存储在单独的变量中。

```
Private Sub Command7_Click()

Dim f As Object

Set f = Application.FileDialog(3)

f.AllowMultiSelect = True

If f.Show Then
    For i = 1 To f.SelectedItems.Count
        MsgBox Filename(f.SelectedItems(i))
    Next
End If

End Sub

Public Function Filename(ByVal strPath As String) As String

If Right$(strPath, 1) <> "\" And Len(strPath) > 0 Then
    Filename = Filename(Left$(strPath, Len(strPath) - 1)) + Right$(strPath, 1)

End If

End Function 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T21:36:04.240

您正在将完整路径传递给您的函数，因此您可以从中获取路径。例如：

```
Public Function Filename(ByVal strPath As String, sPath) As String
    sPath = Left(strPath, InStrRev(strPath, "\"))
    Filename = Mid(strPath, InStrRev(strPath, "\") + 1)
End Function 
```

打来电话，说：

```
 sFile = Filename(f.SelectedItems(i), sPath)
    MsgBox sPath & "---" & sFile 
```

在全

```
Private Sub Command7_Click()

Dim f As Object

Set f = Application.FileDialog(3)

f.AllowMultiSelect = True

If f.Show Then
    For i = 1 To f.SelectedItems.Count
        sFile = Filename(f.SelectedItems(i), sPath)
        MsgBox sPath & "---" & sFile
    Next
End If

End Sub

Public Function Filename(ByVal strPath As String, sPath) As String
    sPath = Left(strPath, InStrRev(strPath, "\"))
    Filename = Mid(strPath, InStrRev(strPath, "\") + 1)
End Function 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T16:30:22.700

对于您想要从单击事件过程中获得的内容，无需调用单独的自定义 VBA 函数。

```
Private Sub Command7_Click()
    Dim f As Object
    Dim strFile As String
    Dim strFolder As String
    Dim varItem As Variant

    Set f = Application.FileDialog(3)
    f.AllowMultiSelect = True
    If f.Show Then
        For Each varItem In f.SelectedItems
            strFile = Dir(varItem)
            strFolder = Left(varItem, Len(varItem) - Len(strFile))
            MsgBox "Folder: " & strFolder & vbCrLf & _
                "File: " & strFile
        Next
    End If
    Set f = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-12T17:36:27.870

我用来加载 Excel 文件的另一种方法：

```
Public Sub Command7_Click()
    Dim FD As FileDialog
    Dim fileNamePath As String, fileExtension As String, fileName As String
    If fileNamePath = "" Then
        Set FD = Application.FileDialog(msoFileDialogOpen)
        Dim FileChosen As Integer
        FileChosen = FD.show
        FD.Title = "Choose workbook"
        FD.InitialView = msoFileDialogViewList

        FD.Filters.Clear
        FD.Filters.Add "Excel workbooks", "*.xlsx"
        FD.Filters.Add "All files", "*.*"
        FD.FilterIndex = 1
        FD.ButtonName = "Choose this file"
        If FileChosen <> -1 Then 'didn't choose anything (clicked on CANCEL)
            MsgBox "No file opened", vbCritical
        Else
            fileNamePath = FD.SelectedItems(1)
            fileName = Dir(fileNamePath)
            fileExtension = Right$(fileName, Len(fileName) - InStrRev(fileName, "."))
        End If
        Set FD = Nothing
    End If
End Sub 
```

# php - 服务器上的 javascript 和 php

> ID：14915181
> 
> 赞同：1
> 
> 时间：2013-02-16T21:14:30.323
> 
> 标签：php, javascript

我有一个轻微的程序问题，

我有一个基于 php 的服务器。基本上我向服务器 php 文件（ server.php 文件）发送一个字符串，这个 php 文件对该字符串执行一些操作，然后返回新字符串。

我想在 server.php 文件中添加一些 js，它将在字符串上运行一些 jquery dom 遍历函数。该字符串是一个 DOM。

我知道这不是 js 的设计初衷，我知道它应该只在浏览器上运行，但是我可以做一个简单的解决方法吗？

字符串看起来像这样：

```
<body>      
<em>
    heres a em and this works as well

</em>
<p>
   here is another para and it works , BUT NOW LOOK AT THE NEXT LINE
    <br>
       where is this prepend,no prepend here, ladies and gentlement,,NADA.

</p>
<button onclick = "addtags()">here is the magic</button>

 </body> 
```

所以我需要通过 php 做一些事情，然后进行一些额外的树遍历，我喜欢 jquery 函数，我正在使用 .text() 、 .contains() 、 .before() , .after(), .attr('class') 来自 jquery 的函数，如果有人可以提出任何替代方案，我觉得很好.. 这一切都可以在 XPATH 中完成吗？我不知道.. 对我来说 jquery 完美。我是否需要从我收到的字符串中创建一个新的 .html 文件并以某种方式在其上运行 js？

最好的问候，理查德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:26:09.293

您不能在服务器上同时运行 js 和 php。理论上可以完成，但不能在同一个执行流程中完成。

您可以在 php.ini 中进行 DOM 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:26:46.190

You can use PHP to echo javascript code to run on the client, but you cannot intermingle javascript and PHP in terms of execution on the server (unless you use some sort of interpreter like [v8js](http://php.net/manual/en/book.v8js.php)).

Why can't you traverse your strings with PHP code? If you really want to use javascript then use jquery to make an ajax call to your PHP file. Then manipulate the returned string in jquery however you need to.

# maven - 无法获取最新版本的库

> ID：14915186
> 
> 赞同：1
> 
> 时间：2013-02-16T21:14:39.090
> 
> 标签：maven, netty, m2eclipse, m2e

我正在使用 Eclipse Juno SR1，我认为集成的 m2e 插件使用 Maven 3，但我不确定。

Netty 最近发布了 4.0.0.Beta1 版本，但我似乎无法通过 Maven 更新它——Eclipse 的 m2e 插件。我已经打开了`pom.xml`文件 -> 依赖项选项卡 -> 添加 -> 搜索了 netty。它只能找到以前的版本4.0.0.Alpha8。

我尝试过（强制）更新依赖项。我尝试手动删除 m2e 的本地（缓存）存储库目录的内容并从头开始重建索引。~~我已经手动编辑了`pom.xml`~~ *This works now！*我仍然无法下载最新版本，即使它已明确发布到[此处](http://search.maven.org/#search%7Cga%7C1%7Cg:%22io.netty%22)的中央存储库。

编辑：[这个 SO 问题](https://stackoverflow.com/questions/10122483/m2e-not-finding-missing-repository-m2e-eclipse-plugin)似乎与我的相似。我已经尝试过答案提供的解决方案（如上所述），但没有奏效。

编辑：啊！事实上，他们已经将 artifactId 从 更改`netty`为`netty-all`！所以，现在*手动*获取最新版本是可行的，但我仍然希望我能通过依赖项搜索窗口找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:25:20.363

仔细查看 artifactId。也许它已从 Alpha 更改为 Betta。

```
<dependency>
    <groupId>io.netty</groupId>
    <artifactId>netty-common</artifactId>
    <version>4.0.0.Beta1</version>
</dependency> 
```

2）新建一个Maven项目，试玩一下，看看是否不能下载其他jar包。对我来说，它适用于 netty-common 工件。

# networking - IP地址以零结尾？

> ID：14915188
> 
> 赞同：42
> 
> 时间：2013-02-16T21:14:53.767
> 
> 标签：networking, ip

这可能不是正确的地点或正确的时间，但我有一个问题。我是一名计算机工程师，我知道一些关于网络的事情，但是当我看到（见图片）时，我 WTF'ed。

情况：我这个星期五回到家，被要求帮助我父亲解决一些网络问题。不久前，他安装了几个 IP 摄像机，我可以在任何地方使用它。但是本周 ISP 进行了某种“重启”或升级或其他任何操作，我们得到了图片中显示的 IP。现在我无法从外部 IP 连接到这些 IP-Cam。

假设：我猜 ISP 的子网掩码小于 24 位，但 ISP 为什么要这样做？为什么我无法连接到这个IP？

有人对这种情况有什么要说的吗？如果我只是联系 ISP，我很可能会获得一个新 IP，但我想我只是为了好玩而分享这个。我从没想过会从 ISP 获得这样的 IP :p

![在此处输入图像描述](../Images/992043d06f230a3bd3bda3f7f1888848.png)

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-02-16T21:27:32.530

如今，以 结尾的 IP 地址`.0`是完全合法的。但是，*一些*设备（和防火墙策略）认为它不是。

在旧的“全类”寻址方案中，从 192.0.0.0 到 223.255.255.255 的 IP 被认为是“C 类”空间，即它们有一个隐含的子网掩码 255.255.255.0。

所以，在那个时候，你实际上并没有`.0`主机地址，因为`.0`它是“网络地址”。同样，您不能`.255`在该范围内拥有地址，因为那是广播地址。

然而，大约 20 年前，每个人都改为使用“无类”CIDR 样式寻址，使用可变长度的子网掩码，并且没有隐式子网掩码。如果你有 a`/23`那么就不应该有任何理由不能使用`.255`that's 在第一个的结尾`/24`和`.0`that's 在下一个的开头。

然而，5 多年前，当我在 ISP 行业时，我们的系统会很乐意向最终用户提供地址`.0`和`.255`地址，但后来我们发现他们无法访问 Microsoft 的网站，因为他们要么损坏了套件，要么过于狂热的防火墙规则。我们最终不得不排除这些地址，即使它们是合法的。

# node.js - Mongo 加入字符串数组

> ID：14915205
> 
> 赞同：1
> 
> 时间：2013-02-16T21:16:59.477
> 
> 标签：node.js, mongodb

我正在编写一个应用程序来使用我的 Mongo 数据库中的数据，但我需要以平面格式处理数据。我的文档中有一些数组，我想将它们转换为字符串数组，但找不到使用 mongo 查询的方法。

文档：

```
{
  name: 'Hello World',
  tags: ['simple', 'easy']
} 
```

期望的输出：

```
{
  name: 'Hello World',
  tags: 'simple,easy',
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-01-09T06:36:16.973

它可以通过以下方式在 MongoDB 聚合中本地完成`$reduce`：

```
db.myCollection.aggregate([{
  $set: {
     tags: {
       $reduce: {
         input: "$tags",
         initialValue: "",
         in: {
           $concat : ["$$value", "," ,"$$this"]
         }
       }
     }
  }, {
  $project: {
     name: 1,
     tags: { $substr: [ "$tags", 1, -1 ] }
  }
}]); 
```

使用 时无法避免额外的分隔符（前导或尾随）`$concat`，因此需要额外的步骤`$substr`来删除它。

1.  `$concat : ["$$value", "," ,"$$this"]`产生字符串`",a,b,c,d"`
2.  `$substr: [ "$tags", 1, -1 ]`使 substring 从 index 开始`1`， length `-1`，在这种情况下“尽可能”。

另请参阅[$reduce](https://docs.mongodb.com/manual/reference/operator/aggregation/reduce/)、[$concat](https://docs.mongodb.com/manual/reference/operator/aggregation/concat/)、[$substr](https://docs.mongodb.com/manual/reference/operator/aggregation/substr/)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-28T08:24:31.090

这在一个阶段是非常可行的。addFields 将覆盖 $tags 元素，因为它已经存在。[蒙戈游乐场](https://mongoplayground.net/p/pjowUIvaLt3)

```
{
"$addFields": {
  "tags": {
    "$reduce": {
      "input": "$tags",
      "initialValue": "",
      "in": {
        "$concat": [
          //add the running concatination of this array to the front
          "$$value",
          //add the current value after that
          "$$this",
          {
            //comma. if current index is the last element, don't add a comma to the end.
            $cond: {
              if: {
                "$eq": [
                  {
                    $subtract: [
                      {
                        $size: "$tags"
                      },
                      1
                    ]
                  },
                  {
                    $indexOfArray: [
                      "$tags",
                      "$$this"
                    ]
                  }
                ]
              },
              then: "",
              else: ","
            }
          }
        ]
      }
    }
  }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T19:00:44.513

我能想到的使用聚合查询实现此目的的唯一方法如下，但它非常静态。

```
db.test.aggregate([
    { $unwind: "$tags" },
    { $group: { _id: "$_id", name: {$first: "$name"}, firstTag: {$first: "$tags"}, lastTag: {$last: "$tags"} } },
    { $project: { name: "$name", tags: { $concat: [ "$firstTag", ",", "$lastTag" ] } } }
]); 
```

但是，您可以使用 mapReduce 实现此目的：

```
db.test.mapReduce(
   function() {emit(this._id, this);},
   function(key, value) {return value}, {   
      out:"tags",
      finalize: function(key, reducedVal){
            reducedVal.tags = reducedVal.tags.join();
            return reducedVal;
      }
   }
)

> db.tags.find()
{ "_id" : ObjectId("5849a9f6a4db9c5811299d08"), "value" : { "name" : "Hello World", "tags" : "simple,easy" } } 
```

# android - SAXParser 与 android

> ID：14915207
> 
> 赞同：0
> 
> 时间：2013-02-16T21:17:08.497
> 
> 标签：android, xml-parsing, saxparser

我的项目需要帮助，我有一个 Web 服务，它返回如下 XML 响应：

```
 <ads>
    <id>6</id>
    <lnk>http://www.nkahtani.com/</lnk>
  </ads> 
```

我使用 SAXParser 解析元素，这是我的代码

**AdvParser.java**

```
 public class AdvParser extends DefaultHandler{

String elementValue = null;
Boolean elementOn = false;
public static AdvList sitesList = null;

public static AdvList getSitesList() {
    return sitesList;
}

public static void setSitesList(AdvList sitesList) {
    AdvParser.sitesList = sitesList;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    super.startElement(uri, localName, qName, attributes);

    elementOn=true;
    if (localName.equals("ads"))
    {
        sitesList = new AdvList();
    } else if (localName.equals("id")) {

    }

}

    @Override
     public void endElement(String uri, String localName, String qName)
    throws SAXException {
// TODO Auto-generated method stub
super.endElement(uri, localName, qName);
elementOn = false;

/** 
 * Sets the values after retrieving the values from the XML tags
 * */ 
if (localName.equalsIgnoreCase("id"))
    sitesList.setId(elementValue);
else if (localName.equalsIgnoreCase("lnk"))
    sitesList.setLink(elementValue);

    }

    @Override
      public void characters(char[] ch, int start, int length)
    throws SAXException {
// TODO Auto-generated method stub
super.characters(ch, start, length);
if (elementOn) {
    elementValue = new String(ch, start, length);
    Log.i("XMLParser", elementValue);
    elementOn = false;
}

 }
  } 
```

**AdvList.java**

```
 public class AdvList {

private ArrayList<String> link = new ArrayList<String>();
private ArrayList<String> id = new ArrayList<String>();

public ArrayList<String> getLink() {
    return link;
}
public void setLink( String link) {
    this.link .add(link);
}
public ArrayList<String> getId() {
    return id;
}
public void setId(String id) {
    this.id .add(id);
}
  } 
```

**这就是调用 URL**

```
 public class RegisterTask extends AsyncTask<Void, Integer,  String> {
    ProgressDialog dialog;

       protected String doInBackground(Void... N) {
         publishProgress(0);
        try {
            //Result = LoginRequest();

            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();
            XMLReader xmlReader=saxParser.getXMLReader();
            AdvParser handler = new AdvParser(); 
             xmlReader.setContentHandler(handler);
            URL url = new URL("http://82.192.79.39:9000/api/ads/get");
            HttpURLConnection connection =        (HttpURLConnection)url.openConnection();

            connection.setRequestMethod("POST");
            is = connection.getInputStream();

            xmlReader.parse(new InputSource(is));
            //saxParser.parse(is, handler);
            //Log.i("Pars", handler.getNameAtt() +"  "+handler.getNameAtt());

                // TODO Auto-generated catch block

     return "hi";
            } 
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                  return null;
            }       
       }
       @Override
        protected void onProgressUpdate(Integer... progress) {
        if(progress[0] == 0)
        {
            dialog = ProgressDialog.show(SplashScreen.this, "Please wait", 
                       "Login ,Please wait.", true);
               super.onProgressUpdate(progress);
        }
       }
       protected void onPostExecute(InputStream result) {

         dialog.dismiss();
       }
   } 
```

我的代码中没有任何异常，但问题是我没有得到任何结果，解析器只解析第一个标签（广告）并且没有读取其他标签（id，lnk）有人能告诉我怎么解决

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T11:54:40.283

前段时间我遇到了类似的问题，对我有用的是我对所有标签使用了不同的布尔值，对所有标签值使用了不同的 StringBuilder。以下是对您的处理程序的一些小的修改。

```
public static final String ID = "id";
public static final String LINK = "lnk";
Boolean bool_id, bool_link,flag;
StringBuilder out_id,out_link;
Boolean elementOn = false;

public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    if (localName.equalsIgnoreCase("ads")) {
        flag = true;
    }
    if (flag) {
        if (localName.equalsIgnoreCase(ID)) {
            out_id= new StringBuilder();
            elementOn = true;
            bool_id= true;
        } else if (localName.equalsIgnoreCase(LINK)) {
            out_link = new StringBuilder();
            elementOn = true;
            bool_link = true;
        }
    }
}

public void characters(char[] ch, int start, int length)
        throws SAXException {
    if (elementOn) {
        if (bool_id)
            out_id.append(new String(ch, start, start + length));
        else if (bool_link)
            out_link.append(new String(ch, start, start + length));
       }
 }

 public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if (elementOn) {
        elementOn = false;
        if (localName.equalsIgnoreCase(ID)) {
            sitesList.setId(out_id.toString());
            bool_id = false;
        } else if (localName.equalsIgnoreCase(LINK)) {
            sitesList.setLink(out_link.toString());
            bool_link= false;
                   }
             }
       } 
```

希望这可以帮助。

# git - 子目录（空的）不会被推送到 git repo

> ID：14915209
> 
> 赞同：1
> 
> 时间：2013-02-16T21:17:24.737
> 
> 标签：git, github

我正在为我的项目设置骨架，所以我在我的项目根目录下创建了一些这样的目录：

```
+src
  |
  +--- etc
  |     +--header.txt
  |
  +--- main
  |     |
  |     +--- java
  |     |
  |     +--- resources
  |
  +--- test
        |
        +--- java
        |
        +--- resources 
```

我提交并推送更改，但在我的 github repo web UI 上，我只看到`src/etc`

`src/main`并且`src/test`不在场！！！

`git`不允许推送空目录？有什么办法可以强制吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:24:37.563

Git 不会显式跟踪目录，而只会跟踪文件。因此它无法跟踪空目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:20:17.643

您可以在要推送的空目录中创建一个虚拟文件。将该文件添加到您的存储库中，目录将随之而来......

# namespaces - Laravel：如何在包中命名帮助程序库？

> ID：14915213
> 
> 赞同：0
> 
> 时间：2013-02-16T21:17:36.300
> 
> 标签：namespaces, bundle, laravel

我通过构建我的第一个包来学习，并且对命名空间/别名感到非常困惑..

我正在尝试在我的包中创建一个宏（不确定这是否真的是一个宏，只是看起来像一个？），我可以从我的视图中调用它，如下所示：

`{{ CMS::text('1','Title') }}`

或者

`{{ \CMS::text('1','Title') }}`

但我得到了错误：

`Class 'Lax\CMS' not found`

包含应该产生输出的代码的文件位于**/Lax/libraries/cms.php**并开始： `namespace Lax\libraries;`

我的包**Lax/start.php**有：

```
Autoloader::map(array(
   'Lax_Base_Controller' => Bundle::path('lax').'controllers/cms.php',
   'CMS' => Bundle::path('lax').'libraries/cms.php',
));

Autoloader::namespaces(array(
    'Lax\Models' => Bundle::path('lax').'models',
)); 
```

我添加到**/application/config/application/**中的别名数组

```
'CMS' => 'Lax\\CMS', 
```

**捆绑包.php：**

```
'lax' => array(
        'auto'      => true,
        'handles'   => 'lax'
    ), 
```

我究竟做错了什么！？

任何建议都感激不尽！德克萨斯州，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:43:15.437

您正在自动加载 Lax\Models 命名空间，并尝试从未自动加载的 Lax\Libraries 命名空间访问内容。您应该考虑“仅”自动加载 Lax 命名空间，这将允许您从将来可能添加的任何文件夹中加载内容。

在代码中，这就是你所要做的，改变：

```
Autoloader::namespaces(array(
    'Lax\Models' => Bundle::path('lax').'models',
)); 
```

对此：

```
Autoloader::namespaces(array(
    'Lax' => Bundle::path('lax'),
)); 
```

现在，在您看来，您可以像这样访问 CMS 类（在 Lax\Libraries 命名空间中）：

```
{{ Lax\Libraries\CMS::some_wicked_cool_method(1, 'title') }} 
```

如果您想摆脱 Lax\Libraries 部分，可以在视图顶部的某处添加“use”语句，如下所示：

```
<?php use Lax\Libraries\CMS; ?> 
```

然后在视图中的其他地方，像这样使用它：

```
{{ CMS::some_wicked_cool_method(1, 'title') }} 
```

更好的方法是在控制器中“准备”这些变量，并将它们作为简单变量发送到您的视图。

在您的控制器中可能看起来像这样

```
<?php

use Lax\Libraries\CMS;

class Some_Controller {

    public function get_index()
    {
        $title = CMS::some_wicked_cool_method(1, 'title');

        return View::make('someview', compact('title'))
    }
} 
```

现在，您的观点又回到了只使用这个：

```
{{ $title }} 
```

甜，不是吗？

# javascript - 从 iframe 内部调用父 jquery 函数？

> ID：14915214
> 
> 赞同：1
> 
> 时间：2013-02-16T21:17:38.010
> 
> 标签：javascript, jquery

假设我有这个页面“index.php”，其中我有这个链接调用一个弹出框：

```
<a href="#" id="signinlink">Sign in</a> 
```

jquery函数是：

```
<script type="text/javascript" charset="utf-8">
    jQuery(function() {
        function launch() {
             jQuery('#sign_up').lightbox_me({centered: true, onLoad: function() { jQuery('#sign_up').find('input:first').focus()}});
        }
        jQuery('#signinlink').click(function(e) {
            jQuery("#sign_up").lightbox_me({centered: true, onLoad: function() {
                jQuery("#sign_up").find("input:first").focus();
            }
        });
    });
</script> 
```

**如何从 iframe 调用这个函数？**

（* iframe 是从父页面“index.php”调用的）我想我必须添加一个链接

```
window.parent.callme(); 
```

但是怎么做？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:28:32.390

首先 - 如果 iframe 与登录表单有关 - 它应该自己发送自己的内容。代码应该在那里，而不是在父框架中被调用。

无论如何，您的问题缺少有关您到底想要做什么的一些细节。

要从父母那里访问东西，您可以：

`window.parent.functionname()`而不仅仅是`functionname()`

所以

`$(document).find(...)`会成为`window.parent.$(window.parent.document).find(...)`

要从父级访问 iframe，您需要获取 iframe DOM 节点的 contentDocument。

这也很有帮助：[如何使用 jQuery 公开 IFrame 的 DOM？](https://stackoverflow.com/questions/1654017/how-to-expose-iframes-dom-using-jquery)

如果您可以使您的问题更清楚，则可以向您展示一个适用于您所拥有的代码的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:46:58.563

这对我有用 - 但只有当我将 jQuery 设置为 1.8 或添加[jQuery 迁移](https://github.com/jquery/jquery-migrate/)时，因为 lightbox-me 需要在 1.8 中弃用并在 1.9 浏览器检测代码中删除

[演示](http://jsfiddle.net/mplungjan/hSC4R/show/)

在 iframe 中（假设 iFrame 中没有 jQuery）：

```
<a id="parentsignin" href="#">Signup</a> 
```

使用

```
window.onload=function() {
  document.getElementById("parentsignin").onclick=function() {
    parent.document.getElementById('signinlink').click();
    return false;
  }
} 
```

* * *

实际上，您可能想在 parent 中执行此操作 - 请注意我使用 preventDefault 取消链接本身并重用代码：

```
function launch() {
  $('#sign_up').lightbox_me({ 
    centered: true, 
    onLoad: function() { 
      $('#sign_up').find('input:first').focus();
    }
  });
}

$(function() {
  $('#signinlink').click(function(e) {
    e.preventDefault(); // stop the link from being followed
    launch(); 
  });
}); 
```

# c++ - C++复制初始化+隐式构造函数调用=失败

> ID：14915216
> 
> 赞同：1
> 
> 时间：2013-02-16T21:17:51.307
> 
> 标签：c++, c++11, constructor, implicit-conversion, copy-initialization

这段代码：

```
class foo
{
    int x;
public:
    foo(int x) : x(x) { }
    int get() const { return x; }
    //...
};

class bar
{
    int x;
public:
    bar(const foo& x) : x(x.get()) { }
    int get() const { return x; }
    bar& operator =(const foo& rhs) { x = rhs.get(); return *this; }
    //...
};

void func()
{
    foo f = 3;
    bar b = 3;
    b = 7;
    //...
} 
```

在线出错`bar b = 3`（g++ 4.7.1 with `-fstd=gnu++11`）：

```
error: conversion from 'int' to non-scalar type 'bar' requested 
```

但是，我提供了一个`bar`构造函数，它采用`foo`, 并且 ints 可以隐式转换为`foo`如前面的行所示。那么，出了什么问题？

顺便说一句，出于多种原因，不希望强制转换为`foo`使用`foo(3)`，因为这会使我的实际代码难看使用和阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:24:58.203

> 我提供了一个接受 foo 的 bar 构造函数，并且 ints 可以隐式转换为 foo，如它前面的行所示。那么，出了什么问题？

C++ 中不允许链式转换，这意味着（链式）转换不能发生：

```
int -> foo -> bar  //not allowed (chained conversion) 
```

即使给出了以下内容：

```
int -> foo  //given
foo -> bar  //given 
```

因此，如果您想`int -> bar`工作，请添加另一个构造函数`int`到 class `bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:34:40.217

§ 13.3.3.1.2/1 关于隐式用户定义转换序列的要求：

> **用户定义的转换序列由初始标准转换序列和用户定义的转换 (12.3) 和第二个标准转换序列组成**。如果用户定义的转换由构造函数 (12.3.1) 指定，则初始标准转换序列将源类型转换为构造函数参数所需的类型。如果用户定义的转换由转换函数 (12.3.2) 指定，则初始标准转换序列会将源类型转换为转换函数的隐式对象参数。

这意味着不可能链接多个用户定义的转换。

# jquery - 播放声音 HTML 5 till mouse move

> ID：14915218
> 
> 赞同：0
> 
> 时间：2013-02-16T21:18:03.110
> 
> 标签：jquery

jquery有办法在鼠标移动时静音吗？

```
<audio src="music/file.mp3" autoplay loop></audio> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:58:45.660

在您的音频上添加一个 id

```
<audio id="audio1" src="music/file.mp3" autoplay loop></audio> 
```

然后使用`mousemove`事件静音，并设置一个定时器，如果鼠标停止移动恢复声音

```
$(function(){

    var t;
    $("body").mousemove(function(){

        clearTimeout(t); //Clear restore volume function

        //Mute
        var audio = document.getElementById("audio1");
        audio.volume=0.0;

        //Time restore volume
        t = setTimeout(function(){
            var audio = document.getElementById("audio1");
            audio.volume=1.0;
        }, 200);
    });
}); 
```

您不需要使用 jQuery 来处理`<audio>`：[w3schools 音频/视频](http://www.w3schools.com/tags/ref_av_dom.asp)

# parallel-processing - Specflow 并行测试：PNunit - 我不想在配置中指定每个测试

> ID：14915220
> 
> 赞同：1
> 
> 时间：2013-02-16T21:18:12.467
> 
> 标签：parallel-processing, nunit, specflow, pnunit

我已成功让 pNunit ( [http://www.plasticscm.com/infocenter/technical-articles/pnunit.aspx](http://www.plasticscm.com/infocenter/technical-articles/pnunit.aspx) ) 并行运行我的 specflow 测试。

我真的不喜欢我必须指定我想在每个代理上运行的特定测试这一事实。测试更改并经常添加。我不想因为有人忘记更新配置文件而无法运行测试。

在理想的世界中，我想说代理 1 将运行类别 A 的测试，代理 2 将运行类别 2。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T20:19:04.357

我们在 CI 服务器上也有类似的需求，并且对 SpecRun 不满意，因此我们为它构建了自己的工具。 [https://github.com/uShip/Concord](https://github.com/uShip/Concord)

我们让它在本地和服务器端的 12 个线程之间运行 130 个类别。我们还让它并行运行硒测试。

我个人从未尝试过使用 nCrunch 或 pNunit 进行 specflow 测试，但启动此工具的人在启动此工具之前对其进行了数周的研究。然后我帮助增强了该工具以满足进一步的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T05:08:00.913

我创建了一个生成 nant 构建文件的解决方案，该文件在自定义并行 nant 任务中使用 nunit：

[https://github.com/MartyIce/SpecflowParallelizer](https://github.com/MartyIce/SpecflowParallelizer)

由于我的遗留测试是如何编写的，我遇到了后端并发问题，所以它对我来说还没有成功（还），但希望这对其他人有用。

# python - 定义一个函数 isVowel(char)，如果 char 是元音（'a'、'e'、'i'、'o' 或 'u'）则返回 True，否则返回 False

> ID：14915222
> 
> 赞同：-1
> 
> 时间：2013-02-16T21:18:29.303
> 
> 标签：python

**问题：**

定义一个函数 isVowel(char)，如果 char 是元音（'a'、'e'、'i'、'o' 或 'u'）则返回 True，否则返回 False。您可以假设 char 是任何大小写的单个字母（即，'A' 和 'a' 都是有效的）。

不要使用关键字 in。你的函数应该接受一个字符串并返回一个布尔值。

**给出的代码：**

```
def isVowel(char):
    '''
    char: a single letter of any case

    returns: True if char is a vowel and False otherwise.
    ''' 
```

**我的代码：**

```
def isVowel(char):
    '''
    char: a single letter of any case

    returns: True if char is a vowel and False otherwise.
    '''
    if char == 'a' or 'e' or 'i' or 'o' or 'u' or 'A' or 'E' or 'I' or 'O' or 'U':
        return True
    else:
        return False 
```

**我的问题：** 我的输出总是 True。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T21:19:38.187

你的 if 语句：

```
if char == 'a' or 'e' or 'i' or 'o' or 'u' or 'A' or 'E' or 'I' or 'O' or 'U':
        return True 
```

相当于：

```
if (char == 'a') or 'e' or 'i' or 'o' or 'u' or 'A' or 'E' or 'I' or 'O' or 'U': 
```

which 将始终被评估为要么`True`，要么`e`也是`True`，因此你的函数总是返回`True`。

将您的 if 语句更改为：

```
if char == 'a' or char == 'e' or char == 'i' so on...:
        return True 
```

* * *

但是，如果你可以使用运算符，这个问题就很简单了`in`。这是这样的：

```
def isVowel(char):
    return char.lower() in 'aeiou' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T09:42:17.927

```
def is_vowel(char):
    try:
            'aeiou'.index(char.lower())
            return True
    except: 
            return False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T21:20:51.943

Python 读起来不像英语。您希望您的代码能够正常工作，但它的评估如下：

```
if (char == 'a') or ('b') or ('c') ... 
```

`'a'`是真实的（不是`False`, `0`,`None`等），因此您的`if`陈述将始终评估为`True`.

要修复您的代码，您必须*准确*地写出您的意思：

```
if char == 'a' or char == 'b' or ... 
```

或者只是使用`in`：

```
if char.lower() in 'aeiou':
    ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T21:21:39.700

首先，这就是你应该如何在没有愚蠢限制的情况下做到这一点：

```
def is_vowel(char):
    return char.lower() in 'aeiou' 
```

由于您不能使用`in`运算符。我假设`in`from 循环是允许的：

```
def is_vowel(char):
    char = char.lower()
    return any(char == c for c in 'aeiou') 
```

如果这仍然是不行的，这里有一些不是很好但与`or`其他答案中的链不同的东西：

```
def is_vowel(char):
    return is_in_list(char.lower(), 'aeiou')

def is_in_list(char, lst):
    if not lst:
        return False
    if char == lst[0]:
        return True
    return is_in_list(char, lst[1:]) 
```

最后但并非最不重要的一点是，您可以`in`在仍然使用其功能的同时避免使用运算符：

```
def is_vowel(char):
    return 'aeiou'.__contains__(char.lower()) 
```

显然，这很可能不是你的教授/老师所期望的——但这会向他表明你很聪明（或者他已经看过这篇文章并且会知道你没有自己做作业）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-16T02:49:24.627

```
def is_vowel(char):
    return False if 'aeiouAEIOU'.find(char) < 0 else True 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-16T02:03:51.657

我在我的 Mac 上使用 Xcode，但我认为结果应该是一样的。

```
//Program: Vowels      
#include < iostream >
#include < cctype >

using namespace std;

bool isVowel (char ch);

int main()    
{
    char ch;

    cout << "Enter a letter and I will tell you if it is a vowel: \n" ;      
    cin >> ch;      
    cout << isVowel(ch) << endl;
}

bool isVowel(char ch)    
{       
    ch= tolower(ch);
    if (ch=='a' || ch=='e' || ch=='i' || ch=='o' || ch=='u') {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-21T17:37:09.147

```
def vowel(char):
    if char.lower() in 'aeiou':
        return True
    if char.upper() in 'AEIOU':
        return TRUE
    else:
        return False 
```

# ios - 绘制 MKPolyline 填充颜色

> ID：14915226
> 
> 赞同：7
> 
> 时间：2013-02-16T21:19:19.153
> 
> 标签：ios, objective-c, mkmapview, mapkit, polyline

我正在尝试`MKPolyline`在`MKPolylineView`. 到目前为止一切都很好 - 折线按照我想要的方式绘制，并且在我想要它的时候使用以下代码：

```
[[self map] addOverlay:routeLine]; 
```

这个方法告诉应用程序如何绘制它：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    MKOverlayView* overlayView = nil;
    self.routeLineView = [[MKPolylineView alloc] initWithPolyline:[self routeLine]];
    [[self routeLineView] setFillColor:[UIColor colorWithRed:167/255.0f green:210/255.0f blue:244/255.0f alpha:1.0]];
    [[self routeLineView] setStrokeColor:[UIColor colorWithRed:0/255.0f green:136/255.0f blue:255/255.0f alpha:1.0]];
    [[self routeLineView] setLineWidth:15.0];
    [[self routeLineView] setLineCap:kCGLineCapRound];
    overlayView = [self routeLineView];
    return overlayView;
} 
```

结果，我得到了一条纯蓝色的线。然而，我看到的蓝色不是我期望的笔触填充颜色 - 它是笔触颜色的蓝色。使用此方法时没有填充颜色。**为什么不在折线上绘制填充颜色？**

在进一步调查之后，我在 Xcode 的*Quick Help*部分发现了这个花絮：

> MKPolylineView 类为 MKPolyline 注释对象提供可视化表示。此视图描边由注释表示的路径。（**该类不会填充路径所包围的区域**。）您可以通过修改继承自MKOverlayPathView 类的属性来改变路径的颜色和其他绘制属性。

这听起来很荒谬。我必须使用这个类来*设置*填充颜色，但是我不能使用这个类来*绘制*填充颜色？考虑到它已经画了笔画，这似乎很奇怪。文档中这个解释的最后一行有点不清楚，但似乎提供了一个答案——我只是很难编码/找到答案。我的`MKOverlayPathView`项目中没有（那是什么？）但**它似乎是解决方案 - 有人知道如何使用它吗？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-16T22:21:58.107

如果您想要一种颜色的线条和另一种颜色的填充，请使用 a`MKPolygon`而不是 a `MKPolyline`。因此，相应地修改您最初创建的注释。然后您修改您的`viewForOverlay`（或者，对于 iOS 7，`rendererForOverlay`）以识别`MKPolygon`并执行以下操作：

```
// for iOS7+; see `viewForOverlay` for earlier versions

- (MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id<MKOverlay>)overlay
{
    if ([overlay isKindOfClass:[MKPolygon class]])
    {
        MKPolygonRenderer *renderer = [[MKPolygonRenderer alloc] initWithPolygon:overlay];

        renderer.fillColor   = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        renderer.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        renderer.lineWidth   = 3;

        return renderer;
    }

    return nil;
}

// for iOS versions prior to 7; see `rendererForOverlay` for iOS7 and later

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    if ([overlay isKindOfClass:[MKPolygon class]])
    {
        MKPolygonView *overlayView = [[MKPolygonView alloc] initWithPolygon:overlay];

        overlayView.fillColor      = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        overlayView.strokeColor    = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        overlayView.lineWidth      = 3;

        return overlayView;
    }

    return nil;
} 
```

请注意，您不需要在此处引用任何类属性，因为覆盖已传递给您的`viewForOverlay`. 如果您在地图中添加了多个叠加层，这会更加灵活一些。

* * *

顺便说一句，这些是我的标准`viewForOverlay`（iOS 7.0 之前的版本）和`rendererForOverlay`（iOS 7+），它们将处理`MKPolygon`、`MKPolyline`和`MKCircle`覆盖：

```
// for iOS7+; see `viewForOverlay` for earlier versions

- (MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id<MKOverlay>)overlay
{
    if ([overlay isKindOfClass:[MKPolygon class]])
    {
        MKPolygonRenderer *renderer = [[MKPolygonRenderer alloc] initWithPolygon:overlay];

        renderer.fillColor   = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        renderer.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        renderer.lineWidth   = 3;

        return renderer;
    }

    if ([overlay isKindOfClass:[MKCircle class]])
    {
        MKCircleRenderer *renderer = [[MKCircleRenderer alloc] initWithCircle:overlay];

        renderer.fillColor   = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        renderer.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        renderer.lineWidth   = 3;

        return renderer;
    }

    if ([overlay isKindOfClass:[MKPolyline class]])
    {
        MKPolylineRenderer *renderer = [[MKPolylineRenderer alloc] initWithPolyline:overlay];

        renderer.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        renderer.lineWidth   = 3;

        return renderer;
    }

    return nil;
}

// for iOS versions prior to 7; see `rendererForOverlay` for iOS7 and later

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    if ([overlay isKindOfClass:[MKPolygon class]])
    {
        MKPolygonView *overlayView = [[MKPolygonView alloc] initWithPolygon:overlay];

        overlayView.fillColor      = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        overlayView.strokeColor    = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        overlayView.lineWidth      = 3;

        return overlayView;
    }

    if ([overlay isKindOfClass:[MKCircle class]])
    {
        MKCircleView *overlayView = [[MKCircleView alloc] initWithCircle:overlay];

        overlayView.fillColor     = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        overlayView.strokeColor   = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        overlayView.lineWidth     = 3;

        return overlayView;
    }

    if ([overlay isKindOfClass:[MKPolyline class]])
    {
        MKPolylineView *overlayView = [[MKPolylineView alloc] initWithPolyline:overlay];

        overlayView.strokeColor     = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        overlayView.lineWidth       = 3;

        return overlayView;
    }

    return nil;
} 
```

通过这种方式，我可以在地图中添加尽可能多的这三种类型的叠加层，并且可以正确渲染所有这些叠加层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-10T10:04:57.660

您可以通过实现自己的 MKOverlayPathView 子类来做到这一点，该子类在地图矩形中绘制路径两次。一次用黑色变厚，一次用另一种颜色变薄。

我创建了一个简单的 MKPolylineView 替代品，它可以让你做到这一点：ASPolylineView。

```
- (void)drawMapRect:(MKMapRect)mapRect
          zoomScale:(MKZoomScale)zoomScale
          inContext:(CGContextRef)context
{
    UIColor *darker = [UIColor blackColor];
    CGFloat baseWidth = self.lineWidth / zoomScale;

    // draw the dark colour thicker
    CGContextAddPath(context, self.path);
    CGContextSetStrokeColorWithColor(context, darker.CGColor);
    CGContextSetLineWidth(context, baseWidth * 1.5);
    CGContextSetLineCap(context, self.lineCap);
    CGContextStrokePath(context);

    // now draw the stroke color with the regular width
    CGContextAddPath(context, self.path);
    CGContextSetStrokeColorWithColor(context, self.strokeColor.CGColor);
    CGContextSetLineWidth(context, baseWidth);
    CGContextSetLineCap(context, self.lineCap);
    CGContextStrokePath(context);

    [super drawMapRect:mapRect zoomScale:zoomScale inContext:context];
}

- (void)createPath
{
    // turn the polyline into a path

    CGMutablePathRef path = CGPathCreateMutable();
    BOOL pathIsEmpty = YES;

    for (int i = 0; i < self.polyline.pointCount; i++) {
        CGPoint point = [self pointForMapPoint:self.polyline.points[i]];

        if (pathIsEmpty) {
            CGPathMoveToPoint(path, nil, point.x, point.y);
            pathIsEmpty = NO;
        } else {
            CGPathAddLineToPoint(path, nil, point.x, point.y);
        }
    }

    self.path = path;
} 
```

或者您可以从以下链接下载代码[https://github.com/nighthawk/ASPolylineView](https://github.com/nighthawk/ASPolylineView)

我已经使用它并查看此屏幕截图。

[![折线的边框颜色](../Images/1882353cb9035267dbe4196713b806b3.png)](https://i.stack.imgur.com/0mLNE.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T14:06:32.050

我有另一种方法。

如果您没有坐标数组，则可以绘制两条折线。

绘制特定 line1_width 的第一行，然后使用 line2_width = line1_width - 1.0 绘制另一行。

这将绘制两条线，在第二条线中，您只会看到它的边距，成为第一条线的笔划。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-18T23:22:46.897

是的，正如 Rob 提到的，使用 MKPolygon 和 MKPolygonRenderer 而不是 MKPolyline 和 MKPolylineRenderer，但还要确保您的点数组按顺时针顺序排列。如果它是逆时针顺序，你只需要通过在数组上调用 reverse() 来反转它。

```
pointsToUse.reverse()
let overlay = MKPolygon(coordinates: &pointsToUse, count: pointsToUse.count) 
```

# java - 为什么我的 JLabel 永远不会被绘制？

> ID：14915227
> 
> 赞同：1
> 
> 时间：2013-02-16T21:19:26.397
> 
> 标签：java, swing, jlabel, repaint

首先，我在这里查看了所有其他类似的帖子，但没有一个能够提供帮助。我正在编写一个扫雷游戏，我试图在我的 JFrame 的边框布局顶部放置一个 Jlabel，并让它显示一个计数器，显示有多少地雷需要标记。每当单击网格上的任何其他 Jlabel 时，都需要重新绘制它。首先，在我的代码中，我的标题 JLabel 上从未显示任何文本。我可以让文本显示的唯一方法是将它放在我的 JLabel 构造函数中。这让我认为我的paintComponent 永远不会被调用。我还在mouseHandler 中调用了headerJabel 的repaint 方法，用于我的游戏的实际网格。这样，如果用户点击游戏中的任何组件，标题 JLabel 将重新绘制自身以反映用户的移动。

基本上，为什么我的 JLabel 不会显示任何东西，除非我明确地将它放在构造函数中？

导入 javax.swing。*; 导入 java.awt。*;

公共类 JLabelCounter 扩展 JLabel {

```
private MinesweeperModel model;
public JLabelCounter(MinesweeperModel myModel)
{
   model = myModel;    

}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    int minesRemaining = model.numberOfMinesRemaining();
    setText("Mines remaining" + minesRemaining);

} 
```

}

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class MinesweeperPanel extends JPanel {

 private MinesweeperModel model;
 private JLabelCounter labelCounter;

public MinesweeperPanel(MinesweeperModel myModel, JLabelCounter counter)
{
    model = myModel;
    labelCounter = counter;
    setLayout(new GridLayout(10,10));
    //addMouseListener(new MouseHandler());

     for(int i = 0; i <10; i++)
    {
        for(int j = 0; j < 10; j++)
        {
            MinesweeperJLabel myJLabel = new MinesweeperJLabel(i,j,myModel);
            myJLabel.addMouseListener(new MouseHandler());
            add(myJLabel);
        }

    }

}

private class MouseHandler extends MouseAdapter
{
    public void mouseClicked(MouseEvent e)
    {

        MinesweeperJLabel labelClicked = (MinesweeperJLabel)e.getSource();
        int x = labelClicked.getXCoordinate();
        int y = labelClicked.getYCoordinate();
        int buttonClicked = e.getButton();

        if (buttonClicked == 1)
        {
            model.stepOnMine(x,y);
        }
        else if(buttonClicked == 3)
        {
            model.flagMine(x, y);
        }
      repaint(); 
      labelCounter.repaint();

    }
} 
```

}

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;

public class MinesweeperFrame  extends JFrame{

public MinesweeperFrame()
{
    MinesweeperModel myModel = new MinesweeperModel();
    setTitle("My Super Awesome Minesweeper Game!");
    Toolkit kit = Toolkit.getDefaultToolkit();
    Dimension screenSize = kit.getScreenSize();
    setSize(screenSize.width/2,screenSize.height/2);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JLabelCounter counter = new JLabelCounter(myModel);
    Container contentPane = getContentPane();
    MinesweeperPanel panel = new MinesweeperPanel(myModel,counter);
    contentPane.add(counter,BorderLayout.PAGE_START);
    contentPane.add(panel);

    setVisible(true);      

} 
```

}

使用原样的代码，看起来好像我在运行时甚至在我的标题中都没有 JLabel。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:29:52.907

不要从paintComponent中调用setText，它会导致组件失效和另一个重绘请求，一次又一次......你明白了

而不是尝试在paint方法中更新标签。向您的模型添加某种侦听器接口，您可以使用它来更新标签。

基本上，当您的模型更改时，它会触发一个事件，您的标签可以对此做出反应并自行更新

# sql - 我遇到问题的 SQL 查询

> ID：14915228
> 
> 赞同：0
> 
> 时间：2013-02-16T21:19:26.633
> 
> 标签：sql, database, sqlite

我有这些表：

高中生（ID、姓名、年级） 在某个年级有一个具有唯一 ID 和给定名字的高中生。

Friend ( ID1, ID2 ) ID1 的学生是 ID2 的学生的朋友。友谊是相互的，所以如果 (123, 456) 在 Friend 表中，那么 (456, 123) 也是。

Likes ( ID1, ID2 ) ID1 的学生喜欢 ID2 的学生。喜欢某人不一定是相互的，因此如果 (123, 456) 在 Likes 表中，则不能保证 (456, 123) 也存在。

如果两个学生 A 和 B 是朋友，并且 A 喜欢 B 但反之不喜欢，我想删除 Likes 元组。

首先，我尝试只获得两个非互惠的喜欢的元组，但我没有成功......

我有这个：

```
SELECT * 
FROM Likes
where Likes.ID1 in (
   select Likes.ID1 
   from Likes, Friend
   where Likes.ID1=Friend.ID1 
     and Likes.ID2=Friend.ID2
   ) 
AND NOT IN (
   SELECT Likes.ID1 
   FROM Likes L1, Likes L2, Friend
   WHERE L1.ID1=Friend.ID1 
     AND L2.ID2=Friend.ID2 
     AND L1.ID1 = L2.ID2 
     AND L1.ID2 = L2.ID1); 
```

但它不起作用..我收到一个错误..有人可以帮我解决这个问题吗！

我实际上有一张带有值的表格的图像，但我不能发布它，因为我需要超过 10 个声誉才能做到这一点......

编辑：

好的，我要把表格放在这里，因为我仍然没有得到正确的结果

```
Highschooler
ID  name    grade
1510    Jordan  9
1689    Gabriel 9
1381    Tiffany 9
1709    Cassand 9
1101    Haley   10
1782    Andrew  10
1468    Kris    10
1641    Brit    10
1247    Alexis  11
1316    Austin  11
1911    Gabriel 11
1501    Jessica 11
1304    Jordan  12
1025    John    12
1934    Kyle    12
1661    Logan   12

Friend
ID1 ID2
1510    1381
1510    1689
1689    1709
1381    1247
1709    1247
1689    1782
1782    1468
1782    1316
1782    1304
1468    1101
1468    1641
1101    1641
1247    1911
1247    1501
1911    1501
1501    1934
1316    1934
1934    1304
1304    1661
1661    1025
1381    1510
1689    1510
1709    1689
1247    1381
1247    1709
1782    1689
1468    1782
1316    1782
1304    1782
1101    1468
1641    1468
1641    1101
1911    1247
1501    1247
1501    1911
1934    1501
1934    1316
1304    1934
1661    1304
1025    1661

Likes
ID1 ID2
1689    1709
1709    1689
1782    1709
1911    1247
1247    1468
1641    1468
1316    1304
1501    1934
1934    1501
1025    1101 
```

我应该最终从喜欢表中消除这两个元组：1911-1247 1641-1468

他们是非互惠的喜欢，也是朋友

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T19:15:45.403

由于您正在为这个问题学习斯坦福 SQL 入门课程，因此我将包括我的工作答案。提到它必须在 SQlite 中工作是一个好主意。我是 SQL 的初学者，我很确定有一个更优雅的解决方案，但这应该通过自动化测试。这是我的解决方案：

```
DELETE FROM likes
WHERE likes.id1 in (Select s1.id
FROM highschooler s1, highschooler s2, friend, likes
WHERE s1.id <> s2.id
  AND friend.id1 = s1.id 
  AND friend.id2 = s2.id
  AND likes.id1 = s1.id 
  AND likes.id2 = s2.id
  AND s2.id NOT IN (SELECT s3.id FROM likes, highschooler s3, highschooler s4
                    WHERE s3.id = s2.id 
                        AND s4.id = s1.id
                        AND s3.id <> s4.id 
                        AND likes.id1 = s3.id 
                        AND likes.id2 = s4.id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:28:28.430

试试这个

```
 SELECT * 
 FROM Likes
 where Likes.ID1 in 
               (select Likes.ID1 from Likes, Friend where Likes.ID1=Friend.ID1 and Likes.ID2=Friend.ID2) 
  AND Likes.ID1 NOT IN (SELECT Likes.ID1 FROM Likes L1, Likes L2, Friend WHERE L1.ID1=Friend.ID1 AND L2.ID2=Friend.ID2 AND L1.ID1 = L2.ID2 AND L1.ID2 = L2.ID1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:29:12.793

您的错误是因为您需要在第二个 AND 条件中重复 Likes.ID1 字段。

```
SELECT * 
FROM Likes
where Likes.ID1 in (select Likes.ID1
                    from Likes, Friend
                    where Likes.ID1=Friend.ID1 and Likes.ID2=Friend.ID2)
  AND Likes.ID1 NOT IN (SELECT Likes.ID1
             FROM Likes L1, Likes L2, Friend
             WHERE L1.ID1=Friend.ID1
               AND L2.ID2=Friend.ID2
               AND L1.ID1 = L2.ID2
               AND L1.ID2 = L2.ID1); 
```

我没有分析您的查询是否会返回正确的结果。不过，这可能，

```
select *
from Likes L1
  inner join Friend on L1.ID1 = Friend.ID1
  left outer join Likes L2 on Friend.ID2 = L2.ID1 and L1.ID1 = L2.ID2
where L2.ID2 is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T21:45:38.177

虽然这并不能完全在您的查询中找到错误，但我会这样做：

```
SELECT * 
FROM Likes L1
WHERE
EXISTS ( -- friendship exists
   SELECT *
   FROM Friends F 
   WHERE  F.ID1 IN (L1.ID1, L1.ID2) AND F.ID2 IN (L1.ID1, L1.ID2)
)
AND NOT EXISTS ( -- reverse like does not exist
   SELECT *
   FROM Likes L2
   WHERE L1.ID1  = L2.ID2 AND L1.ID2 =  L2.ID1
); 
```

请注意，朋友的顺序`A`和`B`in`Likes`和`Friends`可以不同，所以我们需要像我一样`JOIN`使用或声明。`IN``OR`

# matlab - 根据子矩阵规则改变大矩阵的元素

> ID：14915230
> 
> 赞同：1
> 
> 时间：2013-02-16T21:19:33.070
> 
> 标签：matlab, optimization, for-loop

我有一个 105x105 矩阵 B（实际上是一个 35x35 的 <3x3> 矩阵连接组），我必须根据适用于 <3x3> 矩阵的规则更改其元素。

鉴于任何子矩阵每行只能有“1”，而“1”只能出现在 (1,1) 和/或 (2,2) 和/或 (3,3) 处。

因此，唯一可能的子矩阵是

[0 0 0;0 0 0;0 0 0]，变为 [0 0 0;0 0 0;0 0 0]

[1 0 0;0 0 0;0 0 0]，变成[1 1 1;0 0 0;0 0 0]

[0 0 0;0 1 0;0 0 0]，变成 [0 0 0;1 1 1;0 0 0]

[0 0 0;0 0 0;0 0 1]，变成 [0 0 0;0 0 0;1 1 1]

[1 0 0;0 1 0;0 0 0]，变成 [1 1 1;1 1 1;0 0 0]

[1 0 0;0 0 0;0 0 1]，变为 [1 1 1;0 0 0;1 1 1]

[0 0 0;0 1 0;0 0 1]，变成 [0 0 0;1 1 1;1 1 1]

和 [1 0 0;0 1 0;0 0 1]，变成 [1 1 1;1 1 1;1 1 1]

我正在使用`[1 1 1]*any(submatrix,2)`更改值 acc。遵守规则，它工作正常。但我使用以下循环遍历所有子矩阵：

```
 for i=1:3:103
     for j=1:3:103
      temp=A(i:i+2,j:j+2);
      temp=[1 1 1]*any(temp,2);
      A(i:i+2,j:j+2)=temp
     end
    end 
```

没有替代的无循环方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:01:54.930

一种解决方案是重塑数组，以便重新分配变得容易：

```
%# remember size of A
[nRows,nCols] = size(A);

%# reshape A to 3xn
%# transpose so that we get each "row" as a separate column
temp = reshape(A',3,[]);

%# overwrite temp with the rows filled in 
temp = repmat(any(temp,1),3,1);

%# reshape to recreate the original array
%# and transpose
B = reshape(temp,nRows,nCols)'; 
```

# javascript - Holder.js——取回 DOM 元素？

> ID：14915237
> 
> 赞同：6
> 
> 时间：2013-02-16T21:20:25.987
> 
> 标签：javascript, holder.js

[持有人.js](http://imsky.github.com/holder/)

我想动态地将占位符图像添加到我的页面。

像这样插入它不起作用：

```
$('<li>',{class:'file-item'})
    .append($('<img>',{'data-src':'holder.js/150x150'}))
    .append($('<span>',{class:'file-name'}).text(file.name))
    .appendTo('#file-list'); 
```

因为持有者脚本已经运行并且没有搜索新元素。

但是，我们可以手动再次运行它：

```
Holder.run() 
```

但随后它将扫描所有已添加的元素。

那么...有没有办法让 holder.js 创建并返回一个 DOM 元素，这样我就可以手动添加它而无需重新运行整个东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T08:21:27.497

将 a`Node`作为`images`属性传递给`Holder.run`，您将能够在任何单个图像上运行 Holder。Holder 本身不会创建 DOM 元素，它只是更改`src`值。

代码：

```
var image = $("<img>").attr({
    "data-src": "holder.js/300x200"
})

Holder.run({
    images: image[0]
});

image.appendTo("body"); 
```

现场示例：http: [//jsfiddle.net/imsky/p3DMa/](http://jsfiddle.net/imsky/p3DMa/)

# c++ - 使用用户定义的文字在 C++11 中条件包含？

> ID：14915238
> 
> 赞同：6
> 
> 时间：2013-02-16T21:20:33.177
> 
> 标签：c++, c++11

在 C++11 中，当表单的预处理指令...

```
#if expr 
```

...遇到，`expr`被评估为 a `constant-expression`，如 中所述`16.1 [cpp.cond]`。

这是在宏替换 on 之后完成的`expr`，它的标识符（和关键字）被 0 替换，它`preprocessing-tokens`被转换为`tokens`，`defined`运算符被评估，等等。

我的问题是当其中一个标记`expr`是 a时会发生什么`user-defined-literal`？

用户定义的文字就像函数调用，但函数调用不能在`expr`（我认为）中发生，这是标识符替换的副作用。但是从技术上讲`user-defined-literals`可以生存。

我怀疑这是一个错误，但我不太明白如何从标准中得出结论？

`[cpp]`也许只是忽略了在第 16 条上添加用户定义的文字的（迂腐的）影响？

还是我错过了什么？

**更新：**

举个例子来说明：

这个预处理是什么：

```
#if 123_foo + 5.5 > 100
bar
#else
baz
#endif 
```

bar 或 baz 还是错误？

GCC 4.7 报告：

```
test.cpp:1:5: error: user-defined literal in preprocessor expression 
```

所以它认为这是一个错误。参考标准可以证明这是合理的吗？或者这只是“隐含的”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:03:12.987

> 在 C++11 中，当`#if expr ...`遇到 ... 形式的预处理指令时， `expr`将评估为 a `constant-expression`，如`16.1 [cpp.cond]`.
> 
> 这是在宏替换 on 之后完成的`expr`，它的标识符（和关键字）被替换为`0`，它`preprocessing-tokens`被转换为`tokens`， `defined`运算符被评估，等等。
> 
> 我的问题是当其中一个`tokens`是`expr`a 时会发生什么`user-defined-literal`？

该程序格式不正确。

`16.1/1`我的论点的核心是从脚注中的观察中收集的`147`，在翻译阶段 4 中`identifiers`除了宏名称之外别无他物。

争论：

根据`2.14.8 [lex.ext]/2`

> A`user-defined-literal`被视为对 a`literal operator` 或的调用`literal operator template` `(13.5.8)`。

因此，即使在`16.1/4`. （其他尝试，例如使用`constexpr`函数，将被所有非宏替换为`identifiers`. `0`)

由于这发生在翻译阶段 4，还**没有**定义甚至声明的函数；尝试查找`literal-operator-id`must 失败（参见脚注 147 中`16.1/1`的类似论点）。

从稍微不同的角度来看，`5.19/2`我们发现：

> A`conditional-expression`是 a `core constant expression`，除非它涉及以下之一作为潜在评估的子表达式 (3.2) [...]：
> 
> *   [...]
> *   对文字类或 constexpr 函数的 constexpr 构造函数以外的函数的调用；
> *   调用未定义的 constexpr 函数或未定义的 constexpr 构造函数 [...]；

由此，在 a`user-defined literal`中使用 a`constant expression`需要*定义*和*constexpr* `literal operator`，这在翻译阶段 4 中也不能使用。

gcc 拒绝这一点是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:13:30.063

> 在 C++11 中，当`#ifdef expr`遇到形式的预处理指令时，将`expr`被评估为常量表达式，如 16.1 所述。这是在 expr 上的宏替换之后完成的，它的标识符（和关键字）被替换为 0，它的预处理标记被转换为标记，定义的运算符被评估，等等。

不！

`#ifdef`、`#ifndef`或`defined`的参数*不*被评估。例如，假设我从不`#define`使用预处理器符号`SYMBOL_THAT_IS_NEVER_DEFINED`。这是完全有效的：

```
#ifdef SYMBOL_THAT_IS_NEVER_DEFINED
code
#endif 
```

扩展未定义符号的符号是非法的。假设`SYMBOL_THAT_IS_NEVER_DEFINED`尚未定义，这是非法的：

```
#if SYMBOL_THAT_IS_NEVER_DEFINED
code
#endif 
```

类似于在解除引用之前检查指针是否为非空，在使用之前检查符号是否合法：

```
#if (defined SYMBOL_THAT_MIGHT_BE_DEFINED) && SYMBOL_THAT_MIGHT_BE_DEFINED
code
#endif 
```

# emacs - 在 Emacs 中，是否有访问最近打开的文件的命令？

> ID：14915239
> 
> 赞同：5
> 
> 时间：2013-02-16T21:20:34.557
> 
> 标签：emacs, ido-mode, recent-file-list

在 Emacs 中，是否有打开最近打开的文件的命令？像一个`visit-most-recent-file`？

请注意，我不想查看最近文件的列表，然后选择一个。我想自动访问最近打开的一个。

用一次击键访问最近打开的文件（不再在当前缓冲区中）会很棒。然后能够通过再次调用击键来访问下一个最近打开的文件，依此类推。

因此，通过按该键四次（例如`A-UP`），我可以自动打开最近文件列表中的前四个文件。

我已经可以通过浏览最近的文件，按`C-x C-f UP RET`来做到这一点，但是在一次击键中完成它会很酷（例如`A-UP`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:45:35.173

以pokita的答案为基础，

```
(defun visit-most-recent-file ()
  "Visits the most recently open file in `recentf-list' that is not already being visited."
  (interactive)
  (let ((buffer-file-name-list (mapcar 'buffer-file-name (buffer-list)))
        most-recent-filename)
    (dolist (filename recentf-list)
      (unless (memq filename buffer-file-name-list)
        (setq most-recent-filename filename)
        (return)))
    (find-file most-recent-filename))) 
```

我没有对此进行太多测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:45:33.007

您可以通过使用 recentf 包来做到这一点：

```
(require 'recentf)
(defvar my-recentf-counter 0)
(global-set-key (kbd "<M-up>")
        (lambda ()
          (interactive)
          (setq my-recentf-counter (1+ my-recentf-counter))
          (recentf-open-most-recent-file my-recentf-counter))) 
```

您可能会遇到这样的问题：“最近”列表中有您不感兴趣的文件（退出 Emacs 时保存的临时文件）。使用 recentf-exclude 变量从最近打开的文件列表中排除这些文件。

# objective-c - AVAudioPlayer 噪音、干扰

> ID：14915242
> 
> 赞同：0
> 
> 时间：2013-02-16T21:20:43.583
> 
> 标签：objective-c, cocoa-touch, avaudioplayer

我看过很多关于 AVAudioPlayer 的问题，但我还没有找到我的问题的答案。首先我描述我的问题我有一个类

```
@interface Ex_1: UIView {
   AVAudioPlayer *player;
}

@property(retain, nonatomic) AVAudioPlayer *player;

-(void) playSongByParameters;
@end

@implementation Ex_1
@synthesize player;

-(void) playSongByParameters {
    //here i download mp3 from url and then i get NSData *data
    //then
    NSError *err;
    if (player) {
         [player stop];
         [player release];
    }
    player = [[AVAudioPlayer alloc] initWithData : data : &err];
    if (!err) {
        [player prepareToPlay];
        [player play];
    }
}
@end 
```

所以在主类中我创建 Ex_1 类的对象，有时我调用 playSongByParameters 方法。有时歌曲完全播放，没关系，但有时同一首歌在 30 秒（可能更少，可能更多）内播放，然后放慢速度，然后出现噪音，然后中断。有一次我用断点停止程序（当它出现问题时），然后我继续运行程序，歌曲播放完全没有错误，噪音。你能告诉我什么是问题吗？（我使用非弧）

# performance - 在 Canvas 更新期间 GUI 被阻止 - 如何优化它？

> ID：14915243
> 
> 赞同：1
> 
> 时间：2013-02-16T21:20:51.060
> 
> 标签：performance, canvas, javafx-2

我在 JavaFX 2.2 Canvas 上绘制了大约 12.000 个对象。GUI 阻塞了大约 2 秒，而测量我的代码的执行时间声称我的代码的执行时间不到半秒。

所以我想知道我的代码的测量执行时间怎么会比 GUI 被阻塞的时间短得多 - 我猜 Canvas 上有某种缓冲，所以首先将内容写入缓冲区并稍后处理？所以大约 0.5 秒后，我在画布上绘制的所有内容都只写入缓冲区？

假设一切都首先被缓冲导致我的下一个问题：缓冲区中事物的绘制是否总是在 UI 线程上完成，所以我无法优化 GUI 被阻塞以从缓冲区中绘制事物的时间跨度? 即使我会从应用程序线程绘制到画布，当缓冲区仍在 UI 线程上处理时，我不会摆脱这个 1.5 秒的 GUI 阻塞？

感谢您的任何提示！

**更新：伪代码：**

```
long start = System.nanoTime();

// Using GraphicsContext, draw ~ 12.000 arc parts (GraphicsContext.drawArc method)
// to a Canvas

long end = System.nanoTime();
double elapsedTime = (end-start)/1000000000.0; //in seconds
System.out.println("elapsed time: " + elapsedTime); // something around 0.5, however the GUI hangs for around 2 seconds - where do the additional 1.5 seconds come from? 
```

我在应用程序线程上做所有事情，所以我知道 GUI 挂起 0.5 秒，在此期间我正在向画布添加东西。但是我不明白，当我在画布上的绘图在 0.5 秒后完成时，为什么 GUI 会挂起约 2 秒？

# iphone - 在我的应用程序中显示 Facebook 个人资料

> ID：14915246
> 
> 赞同：1
> 
> 时间：2013-02-16T21:21:29.110
> 
> 标签：iphone, ios, objective-c, facebook

我想在我的应用程序中显示 facebook 个人资料，直到现在我使用以下方法：

```
NSURL *url = [NSURL URLWithString:@"fb://profile/userId"];
[[UIApplication sharedApplication] openURL:url]; 
```

但我想知道是否有可能在我的应用程序中显示个人资料，而不是为此打开 Facebook 应用程序。我想这样做是因为当 iPhone 中没有 FaceBook 应用程序时用户无法看到个人资料的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:39:43.113

您可以创建一个 webView 来显示它。

1.  制作`UIWebView`, 设置`frame`, 添加到`view`
2.  用那个加载页面`url`，看看这个函数：

    `(void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL`

并确保在`UIWebView`这里查看类参考：[`UIWebView`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# backbone.js - d3.js 在主干视图中强制布局命名空间

> ID：14915251
> 
> 赞同：0
> 
> 时间：2013-02-16T21:21:57.863
> 
> 标签：backbone.js, d3.js, backbone-views, backbone-boilerplate, force-layout

我正在使用backbone.js 处理wordpress 数据的中型复杂应用程序，我不知道如何让力在主干布局中工作。

基本上，我正在尝试在骨干样板布局中实例化强制布局，如下所示：

```
myLayout = Backbone.Layout.extend({
    initialize: function() {
        var f = this; // i.e. the layout instance
        f.force = d3.layout.force()
            .nodes(myModels)
            .on("tick", f.tick)
            .gravity(0)
            .friction(0.9)
            .start();

        console.log(f.force);
    },
    tick: function() {
        // stuff to do when the force ticks
    }
}); 
```

问题是力是用所有空白函数定义的，比如`gravity: function(x) { //lots of null things here }`. 我很确定这是一个命名空间问题，但我没有尝试任何工作 - 我已经尝试过`$(window).force`，，`var force`...`$this.force`

在我的示例`tick`中是唯一的命名空间函数，但我也尝试与所有其他函数（重力、摩擦等）一起这样做，但无济于事（即使它们应该只是链接到力对象上）。

有人有想法么？我不能真正发布 .jsfiddle，因为该应用程序太复杂了，所以提前抱歉。当前版本在[这里](http://learning.samgalison.com/wp_bb/)

**编辑**：这里是 d3 如何成功访问模型：

这有效：

```
myLayout.nodes = myLayout.d3_wrapper.selectAll(".node")
    .data(myModels)
    .enter().append("g").attr("class", "node")
    .attr("x",10)
    .attr("y",10);

    myLayout.nodes.append("clipPath")
        .attr("id", function(d) { return d.get("slug"); }) 
```

就像这样： `myLayout.nodes.append("clipPath") .attr("id", function(d) { return d.attributes.slug });`

**编辑**：为了清楚起见，这里是非昵称代码：

```
setforce: function() { // this gets called from the layout's initialize fn
    console.log("setting force");
    var f = this; // the layout
    f.force = d3.layout.force()
        .nodes(Cartofolio.elders.models) // Cartofolio is the module, elders is a Backbone Collection
        .gravity(0)
        .friction(0.9)
        .start();

    console.log(f.force);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:11:02.653

我会尝试`toJSON()`在您的收藏上使用，然后再将其传递给`d3`：

```
myLayout = Backbone.Layout.extend({
    initialize: function() {
        var f = this; // i.e. the layout instance
        f.force = d3.layout.force()
            .nodes(myModels.toJSON())
            .on("tick", f.tick)
            .gravity(0)
            .friction(0.9)
            .start();

        console.log(f.force);
    },
    tick: function() {
        // stuff to do when the force ticks
    }
}); 
```

# linux - 使用 sed 进行输出过滤

> ID：14915252
> 
> 赞同：1
> 
> 时间：2013-02-16T21:22:07.687
> 
> 标签：linux, unix, sed, mpc

我需要过滤这个 mpc 输出：

```
Burzum - Budstikken
[playing] #6/7   5:03/10:10 (49%)
volume: 60%   repeat: off   random: on    single: off   consume: offere 
```

对此：

```
5:03 
```

使用 sed。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:26:00.113

尝试这样做：

```
mpc (...) | 
sed -nr '/^\[playing/s@.* ([0-9]+:[0-9]+)/.*@\1@p' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:26:50.947

尝试这个：

```
sed -r '/playing/!d; s%.*([0-9]+:[0-9]+)/.*%\1%' 
```

# javascript - JavaScript Metro 应用后台任务错误

> ID：14915253
> 
> 赞同：1
> 
> 时间：2013-02-16T21:22:18.750
> 
> 标签：javascript, windows-8, windows-store-apps, background-process, winjs

我正在尝试为我的 JavaScript Metro 应用程序创建一个后台任务。我将这些添加到`default.js`文件中：

```
function RegisterBackgroundTask(taskEntryPoint, taskName, trigger, condition) {
    // Check for existing registrations of this background task.
    var taskRegistered = false;
    var background = Windows.ApplicationModel.Background;
    var iter = background.BackgroundTaskRegistration.allTasks.first();
    var hascur = iter.hasCurrent;

    while (hascur) {
        var cur = iter.current.value;
        if (cur.name === taskName) {
            taskRegistered = true;
            break;
        }
        hascur = iter.moveNext();
    }

    // If the task is already registered, return the registration object.
    if (taskRegistered == true) {
        return iter.current;
    }

    // Register the background task.
    var builder = new background.BackgroundTaskBuilder();

    builder.Name = taskName;
    builder.TaskEntryPoint = taskEntryPoint;
    builder.setTrigger(trigger);

    if (condition != null) {
        builder.addCondition(condition);
    }
    var task = builder.register();
    return task;
}

var trigger = new Windows.ApplicationModel.Background.SystemTrigger(Windows.ApplicationModel.Background.SystemTriggerType.timeZoneChange, false);

RegisterBackgroundTask("js\\bgtask.js", "test", trigger); 
```

这是我的`bgtask.js`：

```
(function () {
    "use strict";
    var backgroundTaskInstance = Windows.UI.WebUI.WebUIBackgroundTaskInstance.current;

    function doWork() {

        // Write JavaScript code here to do work in the background.
        console.log("task done");

        close();
    }

    doWork();
})(); 
```

这是我的应用清单：

![在此处输入图像描述](../Images/c265c9556169332071a2255ae08c618b.png)

当我更改时区时，什么也没发生。我检查了事件日志，有一个错误：

> 具有入口点和名称的后台任务无法激活，错误代码为 0x80040154。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T03:11:00.553

```
builder.Name = taskName;
builder.TaskEntryPoint = taskEntryPoint; 
```

应该

```
builder.name = taskName;
builder.taskEntryPoint = taskEntryPoint; 
```

# css - Visual Studio 设计视图忽略 CSS 位置：设计视图中的相对位置

> ID：14915257
> 
> 赞同：2
> 
> 时间：2013-02-16T21:22:31.333
> 
> 标签：css, visual-studio

我非常喜欢在样式表中为我的应用程序添加 CSS 以使表单内容在浏览器中居中，这样无论浏览器窗口的大小如何，应用程序或页面内容都将水平居中。

我用来执行此操作的 CSS 代码如下：

```
.panel
{
     width: 300px; /* Can be whatever value you need it to be */
     position: relative;
     left: 50%;
     margin-left: -150px; /* This is half of width */
} 
```

但是，当我在 Visual Studio 中为正在处理的应用程序执行此操作时，它会将内容从设计视图中移出页面的一半。就像它应用了 left 和 margin-left CSS 属性，但忽略了 relative 属性。你知道如何让 Visual Studio 以与浏览器相同的方式处理我的 CSS，以便我可以应用我的 CSS 定位代码并仍然在应用程序上工作。截至目前，我必须注释掉上面的 CSS，直到我完全完成项目的工作，这样我才能在设计视图中看到内容。

感谢您的任何帮助，您可以提供。

# grails - 带有 JPA 1.0 的 Grails 2.1.1

> ID：14915258
> 
> 赞同：1
> 
> 时间：2013-02-16T21:22:34.133
> 
> 标签：grails, jpa, websphere

我想问一下是否可以使用 JPA 1.0 实现运行 Grails 2.1.1。

我对 Grails 完全陌生，我现在只知道它使用 Hibernate（符合 JPA 2.0）作为持久性提供程序。我们目前有一个问题，我们希望将我们的应用程序部署在符合 JPA 1.0 的服务器 - WebSphere 7.0 上。这是设置的，不能更改，我们必须使用 JPA 1.0 实现（OpenJPA）。所以问题再次是 - 是否可以将 grails 与服务器中的提供程序一起使用，或者在服务器将加载 jpa 1 api 并且实现将是一些较旧的 hibernate 的模式下使用它？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:11:22.497

我认为核心休眠插件不支持JPA。您需要卸载它并改用 JPA 插件，它似乎与 JPA 1.0 兼容并受 SpringSource/VMWare/Pivotal 支持 - [http://grails.org/plugin/gorm-jpa](http://grails.org/plugin/gorm-jpa)

# php - Doctrine 没有在我的实体中加载或保存特定属性

> ID：14915259
> 
> 赞同：0
> 
> 时间：2013-02-16T21:22:40.363
> 
> 标签：php, mysql, doctrine-orm, doctrine

在过去的几个小时里，这个问题一直让我发疯。我将属性**posts_published_date**添加到我的**用户**实体（它跟踪特定用户最后发帖的日期）。以下是一些相关的行：

初始化实体中的属性。

```
/**
 * @Column(type="integer", length=3, nullable=false)
 */
protected $posts_published_today;
/**
 * @Column(type="string", length=7, nullable=true)
 */
protected $posts_published_date;
/**
 * @Column(type="integer", length=3, nullable=true)
 */
protected $posts_published_limit; 
```

使用实体中的属性：

```
public function setPostsPublishedToday($value){
    $today = date("now");
    if ($today != $this->posts_published_date){
        $this->posts_published_today = 1;
        debug($this->posts_published_date . " != " . $today, "1");
        $this->posts_published_date  = $today;
        debug($this->posts_published_date . " == " . $today, "2");
    } else {
        $this->posts_published_today = $value;
    }
} 
```

这两个调试使用以下输出运行：

```
Debug 1: != 220136
Debug 2: 220136 == 220136 
```

posts_published_date**没有**存储在数据库中，但**posts_published_today**正在被检索和存储良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:42:24.927

为什么不使用该类变量的 setter 函数，而不是直接访问它？尝试：

```
public function setPostsPublishedToday($value)
{
   $today = date("now");
   if ($today != $this->getPostsPublishedDate()) {
      $this->posts_published_today = 1;
      $this->setPostsPublishedDate($today);
   } else {
      $this->posts_published_today = $value;
   }
} 
```

这样，所有内容都通过您可以保证其行为的基本方法进行路由。如果您允许您的代码访问类变量，那么如果您碰巧更改了特定的 DB 列等，它将变得无法包含和调试的噩梦。当您尝试上述操作时会发生什么？你坚持一切吗？

# ruby-on-rails - 如何从 URL before_create 中提取域名？

> ID：14915261
> 
> 赞同：1
> 
> 时间：2013-02-16T21:22:46.940
> 
> 标签：ruby-on-rails

我有具有 2 个属性的模型。

```
attr_accessible :app_url, :entity_name 
```

我正在从 View 传递 :app_url 对象值，例如“www.aaronsw.com/feeds/pgessays.rss”。

在模型中使用 before_create 方法。entity_name 应该是这样的“www.aaronsw.com”（必须从 app_url 属性中提取域名）

解决方法请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:29:13.263

您应该使用 ruby​​ URI：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)

它拥有完成任务所需的一切。

```
url = URI.parse 'http://www.aaronsw.com/feeds/pgessays.rss'
url.host
 => "www.aaronsw.com" 
```

# php - 我需要使用什么mysql代码？查找日期之间的所有 id

> ID：14915264
> 
> 赞同：0
> 
> 时间：2013-02-16T21:22:59.797
> 
> 标签：php, mysql, sql, database

我正在尝试计算两个日期之间的 id 数量，基本上我想知道我今天有多少用户，所以我不确定我真的需要什么：/

我有一个列调用日期，其中包含用户注册日期而且我有 ID 列当然会有所帮助

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:24:16.657

使用[`BETWEEN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between). 例如：

```
SELECT
    COUNT(*) AS total_users
FROM
    users
WHERE
    date_of_registration BETWEEN CURRENT_DATE AND INTERVAL CURRENT_DATE - 1 WEEK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:27:17.197

```
SELECT
    id
FROM
    t1
WHERE
    DATE(`date`) = CURDATE() 
```

该`DATE()`调用只需要`date`一个时间戳。

# c++ - 两个for循环，大O理论

> ID：14915272
> 
> 赞同：0
> 
> 时间：2013-02-16T21:23:50.310
> 
> 标签：c++, complexity-theory, big-o

我在程序中运行了这个循环：

```
for(int I =0;I < n;I++){
   for(int it = 0; it < m; it++){

       Access vector.at(it+1) & add number plus vector.at(it)
        }
  } 
```

n 和 m 都是用户输入，我想做的是在内部循环中运行向量 (m) 的大小并存储信息。外部循环说要重复该过程 n 次。那么我的大 O 符号会是 O(m^n) 吗，因为我重复了 m 但 n 是多少次？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:25:41.430

它实际上是`O(M x N)`

`O(M^N)`非常非常慢:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:25:59.397

它是 O( *mn* )，假设内部循环内的操作是 O(1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:26:23.760

您正在内部循环中执行 2 次操作，因此您总共执行了 2 * n * m 次操作，这给出了 O(n*m) 复杂度。

# rdf - RDF 词汇和谓词

> ID：14915274
> 
> 赞同：5
> 
> 时间：2013-02-16T21:23:59.467
> 
> 标签：rdf, semantic-web, rdfs

我正在尝试将一些数据转换为 RDF 格式。我能够使用 dc 和 foaf 类型创建基本本体。问题是对于更复杂的本体，我需要一些更具体的谓词。我正在寻找一些更具体的词汇，但我不确定词汇的含义。它只是一个 URI（可能是某个网站），其中包含我想要使用的术语的信息，或者它必须以 RDF 格式编写？一个例子：我可以使用 IMDB 术语吗？例如[http://www.imdb.com/glossary/C](http://www.imdb.com/glossary/C)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T12:07:27.300

对于不属于词汇表（由域所有者定义）的 RDF 谓词，您不应使用外部 URI。

为什么？好吧，因为没有定义任何含义，您可以以某种方式使用这样的 URI，而另一个人可能会将其用于其他用途。这些三元组不会以任何方式“兼容”。您无法重复使用数据，其他人无法理解它等等。

另一个问题：因为这些 URI 不受您的控制，并且域所有者尚未（尚未）定义词汇表，所以事情可能会发生变化。所有者将来可能决定将此 URI 用于词汇表，这可能与您的“定义”不匹配→不兼容。

但是，您当然可以将每个 URI 用于 RDF 主题和/或 RDF 对象。

如果您需要某个 RDF 谓词，[请查找已](https://stackoverflow.com/a/12098901/1591669)发布的 RDF 词汇表/本体并使用它们的 URI。如果你没有找到任何东西，你可以在 Stack Overflow 上请求合适的词汇表。如果似乎没有您可以使用的词汇表，请创建自己的（在您自己的域下）。

# c# - 从 web.config 中指定的自定义部分加载文件，即使在更改这些文件之后也是如此

> ID：14915279
> 
> 赞同：0
> 
> 时间：2013-02-16T21:24:22.990
> 
> 标签：c#, asp.net, web-config

我想在`ConfigSections`我的 web.config 中添加一个自定义部分，然后在应用程序加载时，将该文件加载到内存中。我唯一的问题是我有一些文件，其中一个将每天生成并在项目中访问。每次该文件更改时，我都想读取新值。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:29:38.750

我不确定你的意思。

如果您的意思是 web.config 是自动生成的，那么只要发生这种情况，您的网站就会重新启动。

如果您的意思是不同的文件，您应该查看 FileSystemWatcher 类，该类可以配置为在文件更改时引发事件。

# java - JButton 无法解析为类型

> ID：14915280
> 
> 赞同：1
> 
> 时间：2013-02-16T21:24:29.227
> 
> 标签：java

我在 JButton 所在的行上遇到错误。有人可以帮忙吗？顺便说一句，这真的是很短的代码：

```
public class Main {
    public JButton[] grid = new JButton[9];
    public void init_components() {}
    public void init_icons() {}
    public static void main(String[] args) {}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T21:26:19.420

您需要在源代码中使用适当的“import”语句来告诉 Java 'JButton' 的含义。

```
import javax.swing.JButton; 
```

像 Eclipse 这样的 IDE 将使您更容易从这里开始。

# php - 简单的 PHP 代码不起作用

> ID：14915282
> 
> 赞同：-1
> 
> 时间：2013-02-16T21:24:56.993
> 
> 标签：php

我有一些用 PHP 编写的简单代码，但我不知道为什么它不起作用:(

第一个php文件：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Title</title>
</head>
<body>
<?php include_once "php/codes.php"; ?>

 <ul>
<?php echo "<li><a href='' class='".whereAmI("files")."'>YYYYY</a></li> ";?>
<li><a href=''>XXXX</a></li>
  </ul>
</body>
</html> 
```

第二个（codes.php）：

```
<?php
$menu= array("privileges","files", "posts", "menu");

    function whereAmI($addr){
        foreach ($menu as $value) {
            if($value===$addr) return "current"; 

    }
} 
```

问题是网页没有显示任何内容，我不知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:29:03.197

尽管我反对全局变量，但请将您的代码更改为：

```
<?php
$menu= array("privileges","files", "posts", "menu");

    function whereAmI($addr){
        global $menu;
        foreach ($menu as $value) {
            if($value===$addr) return "current"; 

    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:29:05.003

在你的函数中添加`global $menu;`

阅读[变量范围](http://www.php.net/manual/en/language.variables.scope.php)

# java - 重复调用终端命令的最佳方法

> ID：14915290
> 
> 赞同：2
> 
> 时间：2013-02-16T21:26:02.303
> 
> 标签：java, mencoder

我`mencoder`用来分割文件，如果可能的话，我想把它变成一种面向对象的方法，例如使用 Java 或类似的方法。但我不确定最好的方法，所以我把它放在公开的地方。这是我需要的：

我有一个包含开始时间和结束时间的 excel 文件，我需要从视频文件中提取适当的剪辑。在终端（我在 Mac OS X 上）我已经成功使用，例如：

```
mencoder -ss 0 -endpos 10 MyVideo.avi -oac copy -ovc copy -o Output.avi 
```

它通过剪辑 MyVideo.avi 视频的前 10 秒来创建视频 Output.avi。

但是，就像我说的，我想让一个程序从一个 excel 文件中读取，并为每个开始时间和结束时间多次（超过 100 次）调用这个 mencoder 命令。

我知道如何在 Java 中读取 excel 文件，但我不确定最好从 Java 调用此命令。另外，我希望能够看到的输出`mencoder`（因为它打印出一个很好的百分比，所以你知道单个命令需要多长时间）。这种类型的事情在 shell 脚本中可行吗？如果可能的话，我想`really`使用 Java，因为我在 Java 方面有多年的经验，而在 shell 脚本方面没有经验。

* * *

**更新**

这是我在 Java 中尝试过的，但它冻结在`in.readLine()`

```
 File wd = new File("/bin");
        System.out.println(wd);
        Process proc = null;
        try {
           proc = Runtime.getRuntime().exec("/bin/bash", null, wd);
        }
        catch (IOException e) {
           e.printStackTrace();
        }
        if (proc != null) {
           BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
           PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(proc.getOutputStream())), true);
           out.println("cd ..");
           out.println("pwd");
           String video = "/Users/MyFolder/MyFile.avi";
           String output = "/Users/MyFolder/output.avi";
           int start = 0;
           int end = 6;
           String cmd = "mencoder -ss " + start + 
                          " -endpos " + end + 
                          " " + video + " -oac copy -ovc copy -o " + output;

           out.println(cmd);
           try {
              String line;
              System.out.println("top");
              while ((line = in.readLine()) != null) {

                 System.out.println(line);
              }
              System.out.println("end");
              proc.waitFor();
              in.close();
              out.close();
              proc.destroy();
           }
           catch (Exception e) {
              e.printStackTrace();
           }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:35:26.847

我不太确定 mencoders 的多核功能，但我认为使用 Java，您可以使用多线程来获得所有 cpu 核心的最大功能。

您不应该像使用它一样使用运行时。

使用 Runtime 时，不应像在终端上键入命令那样运行 bash 并通过输入流发送命令。

> Runtime.getRuntime().exec("mencoder -ss " + start + " -endpos " + end + " " + video + " -oac copy -ovc copy -o " + output);

要获取输出，您可以使用 inputStream

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String[],%20java.io。文件 %29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)

使用此命令，您还可以设置执行命令的工作目录。

我也更喜欢使用 String[] 作为参数的版本。它比串联的字符串更具可读性。

# php - 搜索 YouTube 并在 PHP 中显示第一个视频，需要建议吗？

> ID：14915298
> 
> 赞同：0
> 
> 时间：2013-02-16T21:26:40.907
> 
> 标签：php, youtube-api

我不确定什么时候，但在某些时候，我的 YouTube 搜索方法停止工作，它已经工作了多年，但 API 和显示嵌入视频的首选方法都发生了变化。我查看了 Google 官方文档，可以选择使用 Zend 或当前正在开发的 Google API 版本 3，这些代码库比我目前使用的要大得多。

我已经尝试调试我的代码并且最终可能让它再次工作，我是否应该放弃它并将更官方的 PHP 代码库集成到我的项目中。这是我的方法所在的位置，它可以找到数据，但我似乎没有显示任何视频......

```
public function embeddableVideoClipFor($searchString)
   {
        // Previous experience revealed that video search is not perfect, but we're just going to giver and create an embedded player with the 
        // top result or return NULL
        // I used this as a guide to build my embedded player http://code.google.com/apis/youtube/youtube_player_demo.html
        $embeddableVideoClipHTML = NULL;

        // Further details on searching YouTube http://www.ibm.com/developerworks/xml/library/x-youtubeapi/
        // This was working well for over two years but now I'm getting no videos, I may have been throttled or more likely the API has changed...
        // Before switching to Zend or going to switch to version 3.0 of Google/YouTube API I should try and debug...

        $vq = $searchString;
        $vq = preg_replace('/[[:space:]]+/', ' ', trim($vq));
        $vq = urlencode($vq);
        $feedURL = 'http://gdata.youtube.com/feeds/api/videos?q=' . $vq . '&safeSearch=none&orderby=viewCount&v=2'; // Added version two tag...

        print_r($feedURL);  

        // read feed into SimpleXML object
        try
        {
            $youTubeXML = simplexml_load_file($feedURL);
        }
        catch(Exception $e)
        {   
            // This rarely throws an error, but when it does, I just want to pretend I can't find a video clip
            $youTubeXML = NULL;
        }   

        print("<pre>");
        print_r($youTubeXML);
        print("</pre>");

        if(($youTubeXML != NULL) && ( ! empty($youTubeXML->entry->link[0]['href'])))
        {
            $videoLink = $youTubeXML->entry->link[0]['href'];  // This is not enough, I need to trim the beginning and end off this to just get the video code
            $trimedURL = str_replace('http://www.youtube.com/watch?v=', '' , $videoLink);
            $videoCode = str_replace('&feature=youtube_gdata', '', $trimedURL);
            // $embeddableVideoClipHTML = '<object style="height: 390px; width: 640px"><param name="movie" value="http://www.youtube.com/v/' . $videoCode . '"><param name="allowFullScreen" value="true"><param name="allowScriptAccess" value="always"><embed src="http://www.youtube.com/v/' . $videoCode . '?version=3" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="390"></object>';
            // $embeddableVideoClipHTML = '<iframe id="ytplayer" type="text/html" width="640" height="360" src="https://www.youtube.com/embed/' . $videoCode . '"frameborder="0" allowfullscreen>';
            // Version 3
            $embeddableVideoClipHTML = '<object width="640" height="360"><param name="movie" value="https://www.youtube.com/v/' . $videoCode . '?version=3"></param><param name="allowFullScreen" value="true"></param><param name="allowScriptAccess" value="always"></param><embed src="https://www.youtube.com/v/' . $videoCode . '?version=3" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="360"></embed></object>';
        }

        return $embeddableVideoClipHTML;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:47:14.110

我不知道为什么，因为我确实尝试过，但是切换到 iFrame，即这行代码：

```
// $embeddableVideoClipHTML = '<iframe id="ytplayer" type="text/html" width="640" height="360" src="https://www.youtube.com/embed/' . $videoCode . '"frameborder="0" allowfullscreen>'; 
```

现在可以工作，但我仍然想知道我是否应该跳过箍来使用更官方的 PHP 框架之一，我真的只使用这种方法来访问 Google/YouTube api，它不是我 mashup 的重要组成部分，但是我喜欢电影预告片和歌词引用。

# windows - 如何检索原始目的地地址

> ID：14915302
> 
> 赞同：0
> 
> 时间：2013-02-16T21:27:11.973
> 
> 标签：windows, sockets, proxy, udp, iptables

我正在使用路由器（OpenWRT）中的 REDIRECT iptables 规则将某些 UDP 数据包从服务器 A 重定向到服务器 B，我需要知道如何获取原始目标地址（如代理）。

我已经找到了很多关于如何使用 TProxy 和其他方法在 Linux 上执行此操作的信息，但不幸的是我没有看到如何在 Windows 上使用它们，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:21:11.953

如果您使用`REDIRECT`iptables 目标，则会覆盖原始目标 IP 地址。它丢失了，无法恢复。

此外，iptables 仅在 Linux 上运行，因此您关于如何在 Windows 上执行此操作的问题没有意义。

# python - NFA 中的缩写，python

> ID：14915304
> 
> 赞同：0
> 
> 时间：2013-02-16T21:27:21.297
> 
> 标签：python, finite-automata, nfa

我正在尝试创建一种方法是缩写从一个点跳到另一个点。

我用当前的边缘创建了一个 NFA

```
EDGES = [
(0, 'h', 1),
(1,'a',2),
(2,'z', 3),
(3,'a',4),
(4, 'r', 5),
(5, 'd', 6)
)] 
```

我正在尝试完成的示例 `nrec("h-rd", nfa, 1)`应该返回`accept`

`nrec`是为 NFA 处理字符串并检查它是否接受或拒绝的方法。

```
def nrec(tape, nfa, trace=0):
"""Recognize in linear time similarly to transform NFA to DFA """
char = "-"
index = 0
states = [nfa.start]
while True:
    if trace > 0: print " Tape:", tape[index:], "   States:", states
    if index == len(tape): # End of input reached
        successtates = [s for s in states
                          if s in nfa.finals]
        # If this is nonempty return True, otherwise False.
        return len(successtates)> 0
    elif len(states) == 0:
        # Not reached end of string, but no states.
        return False
    elif char is tape[index]:

    # the add on method to take in abreviations by sign: -
    else:
        # Calculate the new states.
        states = set([e[2] for e in nfa.edges
                           if e[0] in states and
                              tape[index] == e[1] 
                      ])
        # Move one step in the string
        index += 1 
```

我需要添加一个将缩写词纳入帐户的方法。我不太确定如何从一个州跳到另一个州。这是 NFA 类中的内容：

```
def __init__(self,start=None, finals=None, edges=None):
    """Read in an automaton from python shell"""
    self.start = start
    self.edges = edges
    self.finals = finals
    self.abrs = {} 
```

我坚持使用 abrs，但是在尝试定义我自己的 abrs 时，我经常遇到错误，例如

```
nfa = NFA(
start = 0,
finals = [6],
abrs = {0:4, 2:5},
edges=[
(0,'h', 1),
(1,'a', 2),
(2,'z', 3),
(3,'a', 4),
(4,'r', 5),
(5,'d', 6)
]) 
```

我收到错误“TypeError: **init** () got an unexpected keyword argument 'abrs'” 为什么我收到该错误？

对于修改，我认为我会做这样的事情

```
 elif char is tape[index]:
 #get the next char in tape tape[index+1] so
 #for loop this.char with abrs states and then continue from that point. 
```

明智的选择还是更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:32:42.553

该错误是由于`__init__`不接受`abrs`定义的关键字参数引起的。

`def __init__(self,start=None, finals=None, edges=None):`

您需要`abrs=None`（或另一个值）使其成为关键字参数或`abrs`使其成为必需的参数。

# objective-c - ffmpeg 64 位 Xcode

> ID：14915318
> 
> 赞同：2
> 
> 时间：2013-02-16T21:28:33.970
> 
> 标签：objective-c, macos, compilation, ffmpeg, 64-bit

我正在尝试在 Mac 上的 Xcode 中使用 ffmpeg 库。我想针对像 Lion 和 Mountain Lion 这样的 64 位系统。我试图编译

```
./configure --enable-static --enable-nonfree --enable-version3 --enable-gpl --disable-doc --disable-programs --arch=x86_64 --cc=cc --disable-yasm --host-cflags="-arch x86_64" --host-ldflags="-arch x86_64" --prefix=ffmpeg 
```

然后我将 ffmpeg 目录（带有 lib 和 include 文件夹）复制到我的项目文件夹中。我将 .a 文件添加到我的项目中，并将 .a 文件添加到“使用库链接二进制文件”）。我还调整了项目设置中的标题和库文件夹。到目前为止，一切都很好。

我是这些库的初学者，所以我从打开视频开始。工作正常。

现在我正在尝试解码给定的输入文件。因此我查看了这个示例文件： http: [//ffmpeg.org/doxygen/1.0/decoding__encoding_8c-source.html](http://ffmpeg.org/doxygen/1.0/decoding__encoding_8c-source.html)

我复制了 video_decode_example 函数。但是在编译时出现以下错误：

```
Undefined symbols for architecture x86_64:
  "_decode_write_frame", referenced from:
    _video_decode_example in cutClass.o
ld: symbol(s) not found for architecture x86_64 
```

我在编译ffmpeg时做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:04:07.947

`decode_write_frame()`不是 ffmpeg 的一部分——它是您所指的示例代码的一部分。更仔细地阅读示例代码并实现您自己的等效代码。（`decoding_encoding.c`示例中的实现几乎肯定**不是**您在生产代码中想要的——它只是将每一帧作为[PGM](http://en.wikipedia.org/wiki/Netpbm_format)图像文件写入磁盘。）

# java - 使用 Java 获取终端命令的输出

> ID：14915319
> 
> 赞同：7
> 
> 时间：2013-02-16T21:28:40.757
> 
> 标签：java, terminal, runtime

对于某些终端命令，它们会重复输出。例如，对于正在生成文件的内容，它可能会输出完成的百分比。

我知道如何使用 Java 调用终端命令

```
Process p = Runtime.getRuntim().exec("command goes here"); 
```

但这并不能让我实时了解命令的当前输出。我怎样才能做到这一点，以便我可以`System.out.println()`每 100 毫秒执行一次，例如，查看进程的最新输出是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T21:32:37.647

您需要`InputStream`从流程中读取，这是一个示例：

**编辑**我修改了[这里建议](https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream)`errStream`的代码以接收`stdInput`

```
ProcessBuilder builder = new ProcessBuilder("command goes here");
builder.redirectErrorStream(true);
Process process = builder.start();
InputStream is = process.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(is));

String line = null;
while ((line = reader.readLine()) != null) {
   System.out.println(line);
} 
```

出于调试目的，您可以将输入读取为字节，而不是`readLine`仅在进程不终止消息的情况下使用`newLine`

# angularjs - 指令定义对象的“要求”是什么？

> ID：14915332
> 
> 赞同：37
> 
> 时间：2013-02-16T21:30:44.780
> 
> 标签：angularjs, angularjs-directive

> require - 要求将另一个控制器传递到当前指令链接函数中。require 需要传入指令控制器的名称。如果找不到这样的控制器，则会引发错误。该名称可以带有前缀：
> 
> *   ? - 不要引发错误。这使得 require 依赖项是可选的。
> *   ^ - 也在父元素上寻找控制器。

以上是官方文档中的定义。这里的歧义是什么是“指令控制器”。

以[angularjs-ui bootstrap 项目](https://github.com/angular-ui/bootstrap/blob/master/src/tabs/tabs.js)中的 tabs 指令为例。

```
angular.module('ui.bootstrap.tabs', [])
.controller('TabsController', ['$scope', '$element', function($scope, $element) {
  ... // omitted for simplicity
}])
.directive('tabs', function() {
  return {
    restrict: 'EA',
    transclude: true,
    scope: {},
    controller: 'TabsController',
    templateUrl: 'template/tabs/tabs.html',
    replace: true
  };
})
.directive('pane', ['$parse', function($parse) {
  return {
    require: '^tabs',
    restrict: 'EA',
    transclude: true,
    scope:{
      heading:'@'
    },
    link: function(scope, element, attrs, tabsCtrl) {
      ... // omitted for simplicity
    },
    templateUrl: 'template/tabs/pane.html',
    replace: true
  };
}]); 
```

该`pane`指令具有`require: '^tabs'`，其中`tabs`是其父元素上指令的名称，而附加到该指令的控制器的名称是`TabsController`。从我自己对上述定义的解释来看，它应该`require: '^TabsController'`不是`require: '^tabs'`，这显然是错误的。请告诉我我的理解中缺少什么。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-11-27T09:13:50.810

[API 参考页面](https://docs.angularjs.org/api/ng/service/$compile#-require-)[上记录了](https://docs.angularjs.org/api/ng/service/$compile#-require-)该`require`参数（包括其前缀）。[`$compile`](https://docs.angularjs.org/api/ng/service/$compile#-require-)

> 需要另一个指令并将其控制器作为第四个参数注入链接函数。require 需要传入指令的字符串名称（或字符串数​​组）。如果使用数组，则注入的参数将是相应顺序的数组。如果找不到这样的指令，或者该指令没有控制器，则会引发错误。该名称可以带有前缀：
> 
> *   （无前缀） - 在当前元素上找到所需的控制器。如果找不到则抛出错误。
> *   `?`- 尝试定位所需的控制器，如果找不到，则传递`null`给`link`fn。
> *   `^`- 通过搜索元素及其父元素找到所需的控制器。如果找不到则抛出错误。
> *   `^^`- 通过搜索元素的父元素找到所需的控制器。如果找不到则抛出错误。
> *   `?^`- 尝试通过搜索元素及其父元素来定位所需的控制器，如果未找到则传递 `null`给`link`fn。
> *   `?^^`- 尝试通过搜索元素的父元素来定位所需的控制器， 如果找不到则传递`null`给fn。`link`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-17T00:39:15.643

文档的这个特定主题确实令人困惑，但是看起来很奇怪，这一切都是有道理的。

理解这个定义背后的逻辑的关键是要理解“指令控制器”是指指令的**控制器实例**，而不是控制器工厂。

按照选项卡示例，`tabs`创建元素时，还会创建一个新实例`TabsController`并将其附加到该特定元素数据，例如：

```
tabElement.data('$tabsController', tabsControllerInstance) 
```

`require: '^tabs'`元素上的基本上是对父元素上使用的`pane`特定控制器实例 ( ) 的请求。`tabsControllerInstance``tabs`

# c# - 通过 ItemsSource 将内容添加到 WPF datagridview

> ID：14915335
> 
> 赞同：0
> 
> 时间：2013-02-16T21:30:50.407
> 
> 标签：c#

我像这样读了一个xml文件

```
 string appDataPath1 = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    string configPath1 = appDataPath1 + "/LWRF/ReaderProfiles";
    string fn = System.IO.Path.Combine(configPath1 + ComboBoxProfiles.Text);
        _currentProfile.Clear();
        try
        {
            Log("Loading profile: " + fn);
            _currentProfile.ReadXml(fn);
            _dgvProfile.ItemsSource = _currentProfile.DefaultView;
        }
        catch
        {

        } 
```

我还需要做什么才能使 xml 文件内容显示在 gridview 中？我将此代码添加到一个`ComboBox_SelectionChanged`事件中，但即使在选择更改后我的 datagridview 也是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:07:16.383

很可能您`/`在 configPath1 中缺少 a ：

```
string configPath1 = appDataPath1 + "/LWRF/ReaderProfiles/"; 
```

# assembly - ATT 汇编（算术和逻辑运算）

> ID：14915336
> 
> 赞同：1
> 
> 时间：2013-02-16T21:31:01.743
> 
> 标签：assembly, x86, bit-shift, att

```
// Code I'll be working with
int shift_left2_rightn(int x, int n)
{
    x <<= 2;
    x >>= n;
    return x;
} 
```

问题 1\. 左移 =`SAL`和`SHL`. 我的书说它们具有相同的效果。那为什么会有两个班次操作呢？

例如：

```
movl    8(%ebp), %eax    //Get x
_______                  //x <<= 2 
```

我的书给出了一个答案

```
sall    $2, %eax 
```

将

```
shll    $2, %eax 
```

也是正确答案吗？

问题2：

`SHR`通俗地说和 和有什么区别`SAR`？我的书说一个是逻辑移位（用零填充），另一个是算术移位（用符号位的副本填充）。

用 0/符号位填充什么？

例如：

我如何知道使用以下装配说明使用哪一个？

```
movl   12(%ebp), %ecx   //Get n
______                  //x >>=n 
```

书后有答案

```
sarl   %cl, %eax 
```

请向我解释如果我们使用`shrl`.

感谢您帮助理解这一点！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:58:08.307

`sal`并且`shl`是同义词，它们具有相同的操作码。

正如`sar`有符号除以 2 舍入数向负无穷大 (-Inf) 和`shr`无符号除以 2 一样，英特尔的工程师可能已经决定将两者合并`sal`，`shl`即使它们是同义词。

这是一个做什么`shr`和`sar`做什么的例子：

```
mov al,0b10001000 ; 0b10001000 = 136d = -120d (2's complement)

shr al,1          ; 0b01000100 =  68d =   68d (2's complement)

mov al,0b10001000 ; 0b10001000 = 136d = -120d (2's complement)

sar al,1          ; 0b11000100 = 196d =  -60d (2's complement) 
```

所以`shr`用零`sar`填充，用符号位填充。

`shr`一般用于无符号除法或位移，以及`sar`有符号除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:48:26.743

实际上没有两种不同的操作，只有同一指令的两个名称。

如果右移，有符号 (SAR) 和无符号值 (SHR) 之间存在差异，因此一个操作符号扩展而另一个不扩展。

左移时没有区别，但它仍然有两个名称（SAL 和 SHL），只是为了与右移对称。它们都映射到相同的机器代码。

# jquery - jQuery Chosen div 落后于 Twitter Bootstrap 手风琴

> ID：14915337
> 
> 赞同：10
> 
> 时间：2013-02-16T21:31:10.853
> 
> 标签：jquery, html, css, twitter-bootstrap, jquery-chosen

我在 Twitter Bootstrap 手风琴中使用 jQuery Chosen 插件。我遇到的问题是 Chosen 插件的下拉菜单出现在`div`手风琴菜单的“下方”。我试图将 设置`z-index`为更高的值，但这并没有成功。

我举了一个我的问题的例子：http: [//jsfiddle.net/8BAZY/1/](http://jsfiddle.net/8BAZY/1/)

如果单击该`select`框，您将看到菜单出现在`div`. 如何让下拉菜单出现在手风琴 div 的顶部，以便我可以看到所有结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:21:00.787

它并不优雅，但你可以这样做：

```
#collapseOne {
    overflow: hidden;
}
#collapseOne.in {
    overflow: visible;
} 
```

这将确保它在折叠时被剪裁，并且在显示时可见。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-27T08:00:58.723

Sudhir 发布的解决方案对我有用，除了它有一个小问题：当您在 div 中有多个选定控件并且您扩展其他选定控件而已经扩展了一个时，新控件将落后于手风琴。这是因为第一个下拉菜单在第二个展开后将溢出设置为隐藏。这是修复。

```
$(function () {
   fixChoosen();
});

function fixChoosen() {
   var els = jQuery(".chosen-select");
   els.on("chosen:showing_dropdown", function () {
      $(this).parents("div").css("overflow", "visible");
   });
   els.on("chosen:hiding_dropdown", function () {
      var $parent = $(this).parents("div");

      // See if we need to reset the overflow or not.
      var noOtherExpanded = $('.chosen-with-drop', $parent).length == 0;
      if (noOtherExpanded)
         $parent.css("overflow", "");
   });
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T07:51:09.197

关于这个选定问题的更多信息在这里 [https://github.com/harvesthq/chosen/issues/86](https://github.com/harvesthq/chosen/issues/86)

基于 PilotBob 在该页面上给出的建议的一种解决方案 [http://jsfiddle.net/8BAZY/6/](http://jsfiddle.net/8BAZY/6/)

```
$(function() {
    var els = jQuery(".chzn-select");
    els.chosen({no_results_text: "No results matched"});
    els.on("liszt:showing_dropdown", function () {
            $(this).parents("div").css("overflow", "visible");
        });
    els.on("liszt:hiding_dropdown", function () {
            $(this).parents("div").css("overflow", "");
        });
}); 
```

谢谢。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-19T00:44:31.077

> 问题是因为`.collapse`有`overflow: hidden`。显然绝对定位选择的下拉菜单将被剪裁。– dfsq 2 天前

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-20T00:28:59.213

当我在 Bootstrap 折叠元素中使用它时，我遇到了选择的宽度为 0px 的类似问题。这很容易通过添加到我的 CSS`width:100%!important;`中的元素来解决。`.chosen-container`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-25T23:40:18.953

更改 selected.min.css 或 selected.css ：

```
.chosen-container{position:relative; 
```

至 ：

```
.chosen-container{position: fixed; 
```

这个对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-09T22:11:42.670

我刚刚用 css 线修复了它：

```
div.chosen-container-active{
    z-index:9999;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-18T07:34:44.840

对于新版本

```
.chosen-drop {
    z-index: 999999 !important;
} 
```

对于旧版本

```
.chzn-drop {
    z-index: 999999 !important;
} 
```

这对我“chosen1.3”和“bootstrap3.1”有用，这个解决方案**可能**需要一些考虑，但我没有遇到任何问题。请阅读更多[https://github.com/harvesthq/chosen/issues/86](https://github.com/harvesthq/chosen/issues/86)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-10T05:33:40.950

我通过在父级上放置溢出来解决这个问题：自动

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-15T09:37:27.510

简单地说，这对我有用：

```
.chosen-container.chosen-with-drop .chosen-drop {
    position: relative;
} 
```

我不是自己发明的，通过[https://github.com/harvesthq/chosen/issues/86获得解决方案](https://github.com/harvesthq/chosen/issues/86)

# python - 如何为这个应用程序结构编写 setup.py？

> ID：14915340
> 
> 赞同：6
> 
> 时间：2013-02-16T21:31:22.260
> 
> 标签：python, distutils, setup.py

我用python（2.7）编写了一个应用程序。结构如下：

```
kent$  tree myApp
myApp
|-- foo.py
|-- gui
|   |-- g1.py
|   |-- g2.py
|   |-- g3.py
|   `-- __init__.py
|-- icons
|   |-- a.png
|   `-- e.png
|-- logic
|   |-- __init__.py
|   |-- l1
|   |   |-- __init__.py
|   |   |-- la.py
|   |   `-- lc.py
|   |-- l2
|   |   |-- __init__.py
|   |   |-- ld.py
|   |   `-- lf.py
|   |-- logic1.py
|   |-- logic2.py
|   `-- logic3.py
|-- myApp.py
`-- resources
    |-- x.data
    `-- z.data 
```

现在我要写一个`setup.py`来分发我的应用程序。我是新来的。在阅读了 py 文档并进行了一些测试之后。出现了几个问题：

1.  **我如何（或应该）将我的根包（myApp）打包在下面`/lib/python/site-package`？**

    因为在我的 py 文件中，我通过相对路径引用资源/图标。例如，in `foo.py`there could be`icons/a.png`和 in `gui/g1.py`there could be`../icons/e.png`等等

2.  **如何打包`icons`和`resources`目录？**

    似乎不会将这两个目录复制到正确的位置`package_data`。`data_files`

3.  **这是正确的方法吗？**

    ```
    packages = [''],
    package_dir = {'': ''},
    package_data= {'': ['icons/*.*', 'resources/*.*']}, 
    ```

    安装后，我的文件将是：

    ```
    /usr/lib/python2.7/site-packages/icons/*.png
    /usr/lib/python2.7/site-packages/resources/*.data
    /usr/lib/python2.7/site-packages/gui/...
    /usr/lib/python2.7/site-packages/logic/... 
    ```

4.  **我的应用程序结构有问题吗？**

    这些资源/图标/任何文件是否应该转到某些 python 包，而不是项目根目录下？这样在 setup.py 中我就可以使用`package_data`它们将它们复制到正确的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:23:17.580

```
from ez_setup import use_setuptools
use_setuptools()
from setuptools import setup

setup(name="somename",
      version="1.0",
      description="description string",
      long_description="""\
long description
""",
      author="Foo",
      author_email="bar@gmail.com",
      url="http://nowhere.com",
      include_package_data=True,
      license="MIT",
      packages=["gui", "logic"],
      package_dir={
            "gui": "myApp/gui",
            "logic": "myApp/logic",
            },
      classifiers=[
         "Development Status :: 5 - Production/Stable",
         "Topic :: Utilities",
         "License :: OSI Approved :: MIT License"
      ],
      data_files=[
          ('/path/to/resources', ['resources/x.data', 'resources/y.data']),
          ('/path/to/icons', ['myApp/icons/a.ico', 'myApp/icons/e.ico'])
      ]
      ) 
```

# java - 制作幻灯片 JAVA

> ID：14915341
> 
> 赞同：0
> 
> 时间：2013-02-16T21:31:24.007
> 
> 标签：java, slideshow, image

我的提示如下：

编写一个程序，将几个图像文件的名称作为命令行参数，并在幻灯片放映（每两秒一个）中显示它们，使用淡入淡出效果到黑色和在图片之间淡入淡出。

我有使图像变淡的部分，但我遇到了一个问题，即把所有图像都保存在一个窗口下。例如，当我运行我的程序时，它会打开一个新窗口 - 将图片 A 淡化为黑色图片。用黑色图像打开一个新窗口，然后淡入图片 c。我试图让它从图片 A 开始，淡入黑色，然后在不打开新窗口的情况下淡入新图片。我知道这与我的 pic.show() 代码有关，但我不确定如何解决这个问题。

这是我的代码：

```
package fade;

import edu.princeton.cs.introcs.Picture;
import java.awt.Color;

public class Fade {

    public static Color blend(Color c, Color d, double alpha) {
        double r = (1 - alpha) * c.getRed() + alpha * d.getRed();
        double g = (1 - alpha) * c.getGreen() + alpha * d.getGreen();
        double b = (1 - alpha) * c.getBlue() + alpha * d.getBlue();
        return new Color((int) r, (int) g, (int) b);
    }

    public static void pause(int t) {
    try { Thread.sleep(t); }
    catch (InterruptedException e) { System.out.println("Error sleeping"); }
}

    public static void main(String[] args) {
        for (int k = 1; k < args.length; k++) {
            Picture source = new Picture(args[k]);
            Picture target = new Picture(args[0]);
            int M = 100;
            int width = source.width();
            int height = source.height();
            Picture pic = new Picture(width, height);
            for (int t = 0; t <= M; t++) {
                for (int i = 0; i < width; i++) {
                    for (int j = 0; j < height; j++) {
                        Color c0 = source.get(i, j);
                        Color cM = target.get(i, j);
                        Color c = blend(c0, cM, (double) t / M);
                        pic.set(i, j, c);
                    }
                }
                pic.show();
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:30:18.507

因为你只使用了几张图片。

*   使用 JPanel 创建 Java Swing JFrame。扩展 JPanel，以便您可以覆盖 paintComponent 方法并绘制 java.awt.image.BufferedImage。

*   使用 javax.imageio.ImageIO，将每张图片读入一个 BufferedImage。

*   创建一个全黑的 BufferedImage。

*   循环浏览 BufferedImages。

# c++ - 在多维 C++ 数组中交换 unique_ptr？

> ID：14915342
> 
> 赞同：1
> 
> 时间：2013-02-16T21:31:27.197
> 
> 标签：c++, unique-ptr

我正在尝试重构以下依赖于经典 C 样式数组的代码，使其更像 C++：

```
fb::Block *blocks[Panel::X][Panel::Y];

void Panel::mechanics(int64_t tick) {
  for (int32_t y = 1; y < Panel::Y; y++) {
    for (int32_t x = 0; x < Panel::X; x++) {
      fb::Block* current = blocks[x][y];
      if (current -- nullptr) {
        continue;
      }
      // Switching the 2 pointers
      blocks[x][y] = blocks[x + 1][y];
      blocks[x + 1][y] = current;
    }
  }
} 
```

以下代码依赖于`std::array`and `std::unique_ptr`。我需要像在前面的代码中那样交换 2 个值，但我不确定这是否是正确的方法：

```
std::array<std::array<std::unique_ptr<fb::Block>, Panel::Y>, Panel::X> blocks;

void Panel::mechanics(int64_t tick) {
  for (int32_t y = 1; y < Panel::Y; y++) {
    for (int32_t x = 0; x < Panel::X; x++) {
      std::unique_ptr<fb::Block>& current = blocks[x][y];
      if (!current) {
        continue;
      }
      // Swapping the 2 pointers
      blocks[x][y].swap(blocks[x + 1][y]);
    }
  }
} 
```

会员是`swap`实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:37:11.213

当然是。请参阅[unique_ptr::swap的文档](http://en.cppreference.com/w/cpp/memory/unique_ptr/swap)

# javascript - 如何从路由器调用根处理程序？

> ID：14915346
> 
> 赞同：0
> 
> 时间：2013-02-16T21:32:29.627
> 
> 标签：javascript, backbone.js, backbone-routing

我有一个路由器代码：

```
var HellospaceRouter = Backbone.Router.extend({
    routes: {
        ""      :   "root", 
        "signup":   "signup",  
        "login" :   "login"
    }
}); 
```

这些处理程序更改模型状态。更改模型的状态会使视图重绘。第一个处理程序未调用...

**UPD**

[代码](http://pastebin.com/tPHCbRgk)

# ruby - 返回 Redis 实例而不是 ConnectionPool 的连接池

> ID：14915351
> 
> 赞同：1
> 
> 时间：2013-02-16T21:32:47.097
> 
> 标签：ruby, ruby-on-rails-3, redis

我正在尝试让我的 Rails 应用程序`Resque`用于管理工人。但是，我想继续使用 ConnectionPool gem。

我在初始化程序中有这个：

```
puts ENV["REDISTOGO_URL"]

uri = (not ENV["REDISTOGO_URL"].nil?) ? URI.parse(ENV["REDISTOGO_URL"]) : nil

# at this point, debugger confirms $redis is nil
$redis = ConnectionPool::Wrapper.new(:size => 5, :timeout => 3) { 
  if uri.nil?
    Redis.connect
  else
    Redis.connect(:host => uri.host, :port => uri.port, :password => uri.password) 
  end
}

$redis # just put this in here for the debugger
       # At this point, $redis is #<Redis:0x007fb1b0036bf0>
       # when it should be an instance of ConnectionPool::Wrapper 
```

有谁知道为什么`$redis`不作为实例返回`ConnectionPool::Wrapper`？

我搜索了所有 gems 源代码，它没有设置`$redis`. 在 ConnectionPool 的源代码中，我没有找到任何会返回实例`Redis`而不是自身的东西。

这只发生在我从 DelayedJob 切换到 Resque 时。所以，这似乎是问题所在。然而，我不知所措。

我正在使用独角兽。这是`config`.

```
worker_processes 2
timeout 30
preload_app true

before_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
  end

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis.quit
    Rails.logger.info('Disconnected from Redis')
  end

  sleep 1
end

after_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    # Yes, commented the Resque out for debugging, still get the same problem.
    #Resque.redis = ENV['REDISTOGO_URL']
    Rails.logger.info('Connected to Redis')
  end
end 
```

最后，Procfile：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
worker: env TERM_CHILD=1 QUEUE=* bundle exec rake resque:work 
```

我`foreman`在我的开发环境中使用。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:54:58.007

From the docs:

> You can use ConnectionPool::Wrapper to wrap a single global connection.

I looks like the `ConnectionPool::Wrapper` is meant to wrap a single connection to Redis as a convenience for migrating large applications from using Redis directly to using `ConnectionPool`s

If you call `$redis.with`, you get the `#with` defined by `ConnectionPool`

To get an actual connection pool, just change your

```
ConnectionPool::Wrapper.new(:size => 5, :timeout => 3) { #redis logic } 
```

to

```
ConnectionPool.new(:size => 5, :timeout => 3) { #redis logic } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T02:18:46.070

ConnectionPool::Wrapper 在内部创建一个普通的 ConnectionPool 对象，并在包装​​器上调用任何方法时使用 method_missing 自动从该池中签出/签入。

method_missing 的这种使用包括对`inspect`、 或`class`或任何数量的方法的调用，这些方法通常用于尝试查看对象或确定其类型。

```
require 'connection_pool'

class MyClass
  def foo
    'bar'
  end
end

obj = MyClass.new
obj.respond_to?(:foo) # true
obj.respond_to?(:with) # false  

wrapper = ConnectionPool::Wrapper.new { MyClass.new }
wrapper.respond_to?(:foo) # true
wrapper.respond_to?(:with) # also true! 'with' is a method on ConnectionPool::Wrapper 
```

您确实有一个 ConnectionPool::Wrapper 实例，只是有点难以分辨。

# ios - 将 UIView 或 UILabel 放置在 UITextField 或 UITextView 中充当角色

> ID：14915352
> 
> 赞同：1
> 
> 时间：2013-02-16T21:32:47.027
> 
> 标签：ios, uitextfield, uitextview

例如，我需要创建一个对话框，类似于用于在 Apple 的 Numbers 中编写函数的对话框。

用户可以在表格中选择范围，然后将其表示为文本输入行内的任何类型的 UIView。长按时，可以像普通文本一样编辑内容，但最重要的是整个子视图，包含范围描述的文本被视为一个字符。

有人知道或知道如何实现这一目标吗？

我将不胜感激任何提示...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:25:15.630

我不得不处理类似的事情，在搜索字段中有自定义 UIView(s)。

我不知道实现目标的“简单”方式（即API）。您需要创建一个看起来像经典字段但又不是经典字段的自定义组件。

更具体一点：

*   子类化 UIView（或直接是 UIScrollView）
*   在 TextField 内部（或 UITextView 取决于它是否需要多行）来处理“键盘”。
*   在 textField/textView 之前放置一些自定义 UIView/UILabel 并根据这些视图/标签调整 textField/textView 原点

如果你想在文本中有一个标签/视图，那么它会更复杂一些，你需要一些更自定义的东西：

*   在没有 textField/textView 的情况下处理键盘事件（有一种方法，但我忘了具体如何）
*   绘制文本并在特定位置添加视图/标签。

当然，这一切都取决于您要创建的组件^^ 没有一个简单的答案。

# computer-vision - 高斯平滑滤波器

> ID：14915353
> 
> 赞同：1
> 
> 时间：2013-02-16T21:32:58.133
> 
> 标签：computer-vision

他们要求我使用 Python 中的可分离滤波器实现 2D 高斯平滑。我不知道该怎么做......事实上我不知道一维和二维高斯平滑的区别。我在哪里可以找到有关它的更多信息？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:37:45.817

关于二维过滤：

高斯平滑算子是一种二维卷积算子，用于“模糊”图像并去除细节和噪声。

处理图像时 - 卷积是一种计算给定像素的新值的操作，其中考虑了周围相邻像素的值。主要元素是卷积核。

Сonvolution kernel - 一个矩阵（任意大小，最常用的方阵（默认为 3x3）

[ ][ ][ ]
[ ][k][ ]
[ ][ ][ ]

卷积的工作非常简单：当计算所选像素的新值时，卷积核通过其中心像素应用于它。相邻像素被相同的内核覆盖。接下来，计算图像中的像素与卷积核的值的乘积之和，该卷积核覆盖了给定的像素。结果总和是所选像素的新值。现在，如果我们将卷积应用于图像中的每个像素，你会得到一定的效果，这取决于所选择的卷积核。

例如，我们有以下图像：

[47][48][49][][][][][][][][][]
[47][50][42][][][][][][][][] [][]
[47][48][42][][][][][][][][][][][][]
[][][][][][][][ ][ ][ ]

你有卷积核：

[0][1][0]
[0][0][0]
[0][0][0]

结果按以下方式计算：

结果 = 47*0 + 48*1 + 49*0 + 47*0 + 50*0 + 42*0 + 47*0 + 48*0 + 42*0 = 48

将我们的内核应用于值为 50 的像素的结果：

[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][48][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ] [ ][ ][ ][
][ ][ ][ ][ ][ ][ ][ ][ ]

[这](http://homepages.inf.ed.ac.uk/rbf/HIPR2/gsmooth.htm)是对高斯平滑的一个很好的解释。关于一维和二维高斯平滑：

“实际上，卷积可以相当快地执行，因为上面显示的二维各向同性高斯方程可分离为 x 和 y 分量。因此，二维卷积可以通过首先与一维高斯卷积来执行x 方向，然后在 y 方向与另一个一维高斯卷积。”

[您可以尝试在此站点](http://sakri.net/technology/flash/flex/convolution_filter/ConvolutionFilterExplorer.html)中应用卷积过滤器。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:03:43.337

您可以查看[Python Imaging Library](http://www.pythonware.com/library/pil/handbook/index.htm)。

基本思路是这样的。你有一个图像，你有一个叫做内核的东西。然后，您使用内核/过滤器处理图像。这将创建一个新图像，该图像是通过对源图像中的每个像素应用内核并将结果添加到目标图像而创建的。

从[图像过滤器](http://www.pythonware.com/library/pil/handbook/imagefilter.htm)中进行了一些更改，以更清楚地说明如何创建自定义内核并使用它处理图像。我没有尝试过，所以它应该被视为伪代码：

```
import ImageFilter

customKernelData = ( 0.0, 0.0, 0.0,
                     0.0, 1.0, 0.0,
                     0.0, 0.0, 0.0 )    

customKernel = ImageFilter.Kernel( (3,3), customKernelData )
im = im.filter( customKernel ) 
```

在您的情况下，您必须使用数据实际上是 2D 高斯数据的内核。

# c# - C# 中的 Object.Equals 澄清？

> ID：14915360
> 
> 赞同：1
> 
> 时间：2013-02-16T21:33:27.707
> 
> 标签：c#, .net, equals

我做了一个简单的测试：

```
 object t = 3;
     object aa = 3;
#1   Console.WriteLine(t.Equals(aa));  
#2   Console.WriteLine(t.Equals(3));  
#3   Console.WriteLine(3.Equals(aa)); 
```

他们都是真的。（这实际上是我的问题）。

看`object` ，这是使用的功能：

```
 public virtual bool Equals(object obj); 
```

等号是虚拟的。所以它可以被覆盖。

但我**没有**看到任何多态行为。这只是一个纯装箱值。

*   关于第 1 行`t.Equals(aa)`

    引用类型是静态类型——Object。

    所以我认为它应该调用`Object.Equals`: 这意味着参考是**不同** 的，这意味着第一个答案应该是`False`.（我可能在这里错了）。这是为什么？

*   关于第 2 行`t.Equals(3)`

    同样，`t's`静态类型是对象。运行也是如此`Object.Equals`。怎么回事`true`？

*   关于第 3 行`3.Equals(aa)`

    我相信它正在`public override bool Equals(object obj);`运行，因为静态类型是`in`t。参数类型是对象。但为什么会这样`true`？它是否取消了值？

*似乎有些东西在没有我通知的情况下以某种方式拆箱:-(*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T21:43:53.307

`Object`s`Equals`方法是多态的，因此它可以被 .s 等子类型覆盖`int`。[Int32.Equals](http://msdn.microsoft.com/en-us/library/de3wwa8z.aspx)覆盖此方法以在当前对象与其参数之间进行值比较，并且由于参数在拆箱后相等，因此它返回 true。

`Int32.Equals`-`bool Equals(object)`和有两个重载`bool Equals(int)`。`bool Equals(object)`重载是从 覆盖的`object`。由于`t`和`aa`是`object`引用，因此这是示例 1 和示例 2 中将调用的方法。

在示例 3 中，仍然调用 this 重载，因为`aa`is an `object`，因此这是唯一有效的重载。

运算符是静态的`==`，并根据其参数的类型静态解析，这两个参数都`object`在您的示例中。比较引用的`==`运算符`object`，在这种情况下，将为两个单独的装箱整数返回 false。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T21:46:43.990

`Object.Equals`正在调用虚拟方法，但由于虚拟方法的工作方式，它`Int32.Equals`改为调用该方法，该方法比较`int`值，而不是引用。

**虚拟方法在运行时绑定。**也就是说，他们在运行时而不是在编译时选择适当的方法。在这种情况下，`Object.Equals`是编译代码中的内容，但由于您正在比较`int`s，它会`Int32.Equals`在运行时选择。这是使用称为 v-tables 的东西来完成的（如果您想了解更多信息）。

请记住，`Equals`它应该是这样的，如果你真的想要引用相等，你可以使用`ReferenceEquals`.

请注意，这与拳击无关。您将获得相同的行为，例如，a`string`或自定义类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:10:10.130

正如您在问题中所写，以下断言将全部通过

```
[Test] 
public void EqualityOnInts()
{
    object a = 1;
    object b = 1;

    Assert.AreEqual(a, b);
    Assert.IsTrue(1.Equals(a));
    Assert.IsTrue(b.Equals(1));
} 
```

如果您实例化`a`您将创建一个`integer`值为 1 的新对象。调用`Equals`方法 on`a`将导致调用`Equals`方法 on `Int32`。另外，如果你做`a.GetType() it will return`Int32`。

由于`Equals`执行`Int32`将检查值是否相等，并且不关心不同的对象引用，因此结果将为“true”。

# fadein - 使用 Kineticjs 设置超时后加载背景图像淡入淡出

> ID：14915361
> 
> 赞同：0
> 
> 时间：2013-02-16T21:33:42.603
> 
> 标签：fadein, kineticjs

是否可以在设定的时间后通过图像淡入来更改背景？我正在使用以下代码，但图像没有淡入。我现在要做的就是使用 transitionTo 方法淡出图像，但是我希望它淡入。这是我正在玩的代码：

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 1770,
    height: 900
  });
  var layer = new Kinetic.Layer();

  var imageObj = new Image();
  imageObj.onload = function() {
    var myBg = new Kinetic.Image({
     x: 0,
      y: 0,
      image: imageObj,
      width: 1770,
      height: 900
    });

    // add the shape to the layer
    layer.add(myBg);

    // add the layer to the stage
    stage.add(layer);
setTimeout(function() {
    myBg.transitionTo({
      opacity: 0,
      duration: 4,
    });
  }, 3000);

  };
  imageObj.src = 'bg.png'; 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:19:07.833

It happens because you did not set initial opacity. What you were doing is setting opacity from 1 to 1, not from 0 to 1\. please refer the following code.

```
var myBg = new Kinetic.Image({
  x: 0,
  y: 0,
  image: imageObj,
  opacity: 0,
  width: 1770,
  height: 900
});

myBg.transitionTo({
  opacity: 1,
  duration: 4,
}) 
```

# xml - WSDL 类型部分中的类型或元素

> ID：14915362
> 
> 赞同：0
> 
> 时间：2013-02-16T21:33:56.603
> 
> 标签：xml, web-services, xsd, wsdl

`<types/>`在 wsdl部分 中定义类型时，我似乎有一些选择。

如果我定义了一个类型（简单或复杂），那么我可以像这样引用该类型：`<message> <part name="x" type="tns:myTypeName"/>`

如果我将`<types/>`部分中的元素定义为 an`<element/>`然后我可以像这样引用它：`<message> <part name="x" element="myElementName"/>`

这两个选项似乎都通过了验证。我已经看到了一些元素方法的例子，但我没有看到类型方法有什么问题。哪一个是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:12:33.323

任何一个都是一种选择，但它们具有不同的含义。

如果使用元素，则在消息中指定元素的名称、命名空间和类型。如果您指定`type`，那么您只指定类型。那么在实践中， `part`WSDL`message`元素中的 指定了元素的名称，但是名称空间是不明确的。

这是不兼容的常见来源。[WS-I BP 1.1](http://www.ws-i.org/profiles/basicprofile-1.1-2004-08-24.html)规范指定使用，而`element`不是`type`，因为这样可以防止歧义。

* * *

我已经有几年没有阅读 WS-I BP 1.1 文档了。我现在记得它比我回忆的要复杂。

`type`如果要创建 RPC/Literal 服务，则必须使用。`element`如果您正在创建文档/文字服务，则必须使用。在这两种情况下，WSDL 中属性的使用都有限制，`namespace`原因是我指定的：防止歧义。

除其他外，参见[4.7.21。部件访问器的子项的命名空间](http://www.ws-i.org/profiles/basicprofile-1.1-2004-08-24.html#Namespaces_for_Children_of_Part_Accessors)

WS-I 的存在暗示了一件事情：不要手动创建 WSDL，期望模式验证为您生成有效的服务。相反，请使用您选择的 Web 服务框架提供的工具。这至少将您产生的歧义*种类减少到每个框架一组。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:08:56.263

好的，我刚刚找到了答案。根据规范，任何一个都是一种选择。 [http://www.w3.org/TR/wsdl#_messages](http://www.w3.org/TR/wsdl#_messages)

这似乎暗示如果使用类型，则只允许一部分。使用元素引用可以在消息中指定许多部分。然而，情况似乎并非如此。有关详细信息，请参考上面[John Saunder 的帖子](https://stackoverflow.com/a/14916183/265877)。

# jquery - 如何从我的脚本中选择这个 div 的 dang 值？

> ID：14915365
> 
> 赞同：-3
> 
> 时间：2013-02-16T21:34:45.003
> 
> 标签：jquery, jquery-selectors, traversal

// 这行有效：

```
var remove = jQuery(this).closest('.item').hide(); 
```

// 为什么这行代码不能在同一个脚本中运行几行？

```
var discount_amount = jQuery(this).closest('.discount_amount').text(); 
```

我只是想用 .discount_amount 类获取最接近的 div 的值并将其分配给变量：-/我在这里遗漏了什么吗？

文件在这里： [http ://www.extremecouponnetwork.com/templates/ja_wall/js/clip.js](http://www.extremecouponnetwork.com/templates/ja_wall/js/clip.js)

此处的 HTML：

```
<a class="clip_it" href="javascript:void(0)" onclick="jfbc.opengraph.triggerAction('1','http://www.extremecouponnetwork.com<?php echo $this->item->link; ?>')  "><img src="/templates/ja_wall/images/scissors_add.png" /><span>Clip It</span></a>
    <img src="/templates/ja_wall/images/animated_scissors.gif" class="ToBeAnimated">

    <br />
    <div class="discount_amount" style="display:  !important;"><?php echo $this->item->extraFields->DiscountAmount->value; ?></div>
    <div class="percent_off" style="display:  !important;"><?php echo $this->item->extraFields->PercentOff->value; ?></div>
    <div class="brand_avg_sale" style="display:  !important;"><?php echo $this->item->extraFields->BrandAvgSale->value; ?></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:46:34.077

正如您在评论中所说，假设这些元素是兄弟姐妹，那么我建议：

```
var discount_amount = jQuery(this).siblings('.discount_amount').text(); 
```

这不考虑邻近性，它只会获取与传递给方法的选择器字符串匹配的*第一个*元素的文本。`siblings()`

# ios - 如何使用 Storyboard 创建 iOS Titanium 模块？

> ID：14915366
> 
> 赞同：0
> 
> 时间：2013-02-16T21:34:59.220
> 
> 标签：ios, module, storyboard, titanium

有没有人有任何例子？我已经为 Titanium 创建了 iOS 和 Android 模块，但还没有找到人们使用 Storyboard 进行视觉效果的任何示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:07:03.320

我知道您可以使用 在模块中加载笔尖`initWithNibName`，[请查看此 SO 答案。](https://stackoverflow.com/a/10567961/874257)

特别是对于故事板，我认为这会变得复杂，因为故事板定义了一个完整的导航结构。我认为您有两个选择，将情节提要中的特定窗口分解为 nib 文件，然后根据需要加载它们，或者使用类似于以下的代码打开情节提要本身：

```
// You have to get the resource bundle first 
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"YourStoryBoards" bundle:resourceBundle];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"yourViewController"];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:vc animated:YES completion:NULL]; 
```

我还没有尝试过，但我认为关键是提供正确的资源包，然后从模式打开。

# mysql - 在这个 SQL 示例中，INTERVAL 的使用是否正确？

> ID：14915369
> 
> 赞同：1
> 
> 时间：2013-02-16T21:35:36.430
> 
> 标签：mysql, sql, datetime

我正在尝试追踪一个错误，即该`next`列未更新为将来的日期。

我在`next`列中添加 INTERVAL 的用法是否正确？

```
UPDATE 
    `delay_shorts` AS `DelayShort`  
    SET 
        `DelayShort`.`delta` = 1, 
        `DelayShort`.`next` = '2002-04-14 21:31:01' + INTERVAL 5 SECOND, 
        `DelayShort`.`last_changed` = '2002-04-14 21:31:01'  
    WHERE `DelayShort`.`id` = 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:39:14.193

`INTERVAL`表达式用于[`DATE_ADD`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-add)or[`DATE_SUB`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-sub)函数：

```
UPDATE 
    `delay_shorts` AS `DelayShort`  
    SET 
        `DelayShort`.`next` = DATE_ADD('2002-04-14 21:31:01', INTERVAL 5 SECOND) 
    WHERE `DelayShort`.`id` = 3 
```

需要注意的是，单位*总是*`INTERVAL`以单数形式表示：尽管您添加 5*秒****s***，但您将其表示为。***`5 SECOND`***

# android - Android 在 SwipeView 中显示数据库

> ID：14915376
> 
> 赞同：1
> 
> 时间：2013-02-16T21:36:14.957
> 
> 标签：android, android-fragments, android-viewpager, android-sqlite, android-context

我通过 viewpager 有一个带有两个不同视图（片段）的 swipeview。我现在希望这两个页面显示来自 sqllite 数据库的不同数据。问题是我无法弄清楚如何做到这一点，从主要活动我无法访问我的片段上的视图（TableLayout）以及从片段源代码我无法访问数据库，因为适配器不会打开（适配器的上下文是超级.getActivity())。有没有办法做到这一点？

片段代码：

```
DBAdapter adapter = new DBAdapter(getActivity());

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    if(container==null){
        return null;
    }

    layout=(RelativeLayout)inflater.inflate(R.layout.layout_morning, container, false);

    adapter.open();
    adapter.close(); 
```

DBAdapter 的代码：

```
 private static String DB_NAME = "database.dat";

private final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) {
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
}

public DBAdapter open() throws SQLException {

    db = DBHelper.getWritableDatabase();
    return this;
}

public void close() {
    if (db!=null){
        db.close();
    }
    DBHelper.close();
} 
```

错误是 NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:43:02.640

当然你可以访问片段内的数据库，你只需要使用`getActivity();`而不是**`this`**.

将图像文件保存在片段类中的示例：

```
db = new DatabaseHandler(getActivity());
ByteArrayOutputStream stream = new ByteArrayOutputStream();
photo.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] imageInByte = stream.toByteArray();
db.updateUser(imageInByte);
db.close(); 
```

# excel - 如何为整个单元格和列范围重复宏？

> ID：14915377
> 
> 赞同：-1
> 
> 时间：2013-02-16T21:36:45.320
> 
> 标签：excel, vba

基本上我将workbook1的单元格与workbook2链接起来，为整个电子表格执行此操作的代码是什么？我的错误没有得到清楚的解释，如下所示，我正在从 workbook2 分配 workbook1 中单元格的值

```
Sub Macro2() 
    Windows("workbook2.xlsx").Activate 
    Windows("workbook1.xlsx").Activate 
    ActiveCell.FormulaR1C1 = _ 
       "='[workbook2.xlsx]workbook1'!R18C1" 
    Range("A19").Select 
    ActiveCell.FormulaR1C1 = _
        "='[workbook2.xlsx]workbook1'!R19C1" 
    Range("A20").Select 
    ......... 
End Sub 
```

我想知道在 A9 到 A120、E9 到 E120、F9 到 F120 范围内最快的方法是什么.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:45:10.190

此代码将链接所有工作表中的所有单元格：

```
Sub LinkSheets()
    Dim ws As Worksheet

    Application.Calculation = xlCalculationManual
    Application.ScreenUpdating = False

    For Each ws In Worksheets
        ws.UsedRange.FormulaR1C1 = "='[workbook2.xlsx]" & ws.Name & "'!RC"
    Next

    Application.Calculation = xlCalculationAutomatic
    Application.ScreenUpdating = True
End Sub 
```

如果您只想链接一个工作表中的某些单元格，请尝试以下代码：

```
Sub LinkRange()
    Workbooks("workbook1.xlsx").Worksheets("Sheet1"). _
        Range("A9:A120,E9:E120,F9:F120").FormulaR1C1= _
        "='[workbook2.xlsx]Sheet1'!RC"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T22:14:58.263

```
Sub CopyPasteEntries()
 Dim i, g, h As Integer
 Sheets("Sheet1").Select
 Range("A1").EntireRow.Copy
 Sheets("Sheet2").Range("A1").PasteSpecial Paste:=xlPasteAll
 i = 2
 Sheets("Sheet1").Select
  Do Until IsEmpty(Cells(i, 1))  
  i = i + 1        
  Loop
  g = i - 1
  h = 2
  For i = 2 To g 
 Sheets("Sheet1").Select
  If Cells(i, 1).Value <> "Created" Then
   Cells(i, 1).EntireRow.Copy
 Sheets("Sheet2").Select
   Cells(h, 1).Select
 ActiveCell.PasteSpecial xlPasteAll
 h = h + 1
 End If     
  Next
 Application.CutCopyMode = False
 End Sub 
```

# php - 在 div 中嵌入 Wordpress 博客？

> ID：14915378
> 
> 赞同：1
> 
> 时间：2013-02-16T21:36:51.233
> 
> 标签：php, jquery, wordpress

我有一个现有的单个网站 (index.html)，它与 ​​jquery 内容滑块一起使用，我想在其中一个选项卡中添加我的 wordpress 博客。该博客安装在 mysite.com/blog/ 中。我看到了一个关于如何使用 php 显示帖子的教程，但是当点击这些帖子时，它会将人们从我的页面发送到博客。如果我使用 iframe，那么我会遇到 SEO 问题（或者是吗？），并且在对帖子进行评论时，博客似乎正在向上移动。

我希望有人能帮忙！真诚的，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:00:21.073

你可能需要这样的东西[Demo](http://papermashup.com/creating-an-iframe-with-javascript/) is [here](http://papermashup.com/demos/javascript-iframe.php)

# php - xml解析错误，使用php的asxml()

> ID：14915379
> 
> 赞同：0
> 
> 时间：2013-02-16T21:36:51.340
> 
> 标签：php, error-handling, xml-parsing

```
$file = simplexml_load_file($url); {

    foreach($file->entry as $post) {

    $row = simplexml_load_string($post->asXML()); // after adding this line, i get error message

    $links = $row->xpath('//link[@rel="alternate" and @type="text/html"]');
    echo (string) $post->title;
    echo (string) $links[0]['href']; 
```

我使用这个脚本来解析原子提要。起初不起作用，因为它无法正确传递链接的 href 属性。我添加了`$row`，即使它有效，它也会给出一个错误：“未定义条目上 etag 的命名空间前缀 gd”。我搜索了几个小时，找不到解决方案。我是如此接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:56:47.037

这条线`$row = simplexml_load_string($post->asXML());`，如果有效的话，将是一种冗长的写作方式`$row = $post`。`->asXML()`并`simplexml_load_string`彼此执行相反的操作，这样您就可以取回开始时的同一个对象。

我认为它在您的情况下表现异常的原因是您的 XML 文档正在使用“命名空间”，而生成的 XML 片段`$post->asXML()`本身并不能完全作为 XML 文档工作。

我怀疑您遇到的最初问题（这条线似乎神奇地解决了）也与名称空间有关，因为 XPath 对它们相当敏感。查找使用示例，`registerXPathNamespace`看看它们是否能解决您的问题。如果没有，请随时发布后续问题，展示您的原始问题，并包括您正在处理的 XML 示例。

# java - 无法通过 Internet 从 PC 服务器接收 Android 上的 UDP 数据

> ID：14915380
> 
> 赞同：5
> 
> 时间：2013-02-16T21:36:57.487
> 
> 标签：java, android, udp

我目前正在探索 Java 中的 UDP 数据包传输，以在 Android 上创建多人游戏。我通过使用通常的“127.0.0.1”成功地在我的 Nexus 4 中交换了数据包，并且我还成功地在我的 PC 服务器和本地网络中的 Android 客户端之间交换了数据包。但是由于我希望我的游戏可以在 Internet 上玩，所以我希望我的 Android 客户端能够在我的 PC 服务器不在同一个本地网络上时交换数据包。这就是我挣扎的地方。

我的设置：一台 PC 服务器与我的家庭 Internet 连接和一台 Nexus 4 与 3G 网络连接。

首先，我的 PC 服务器开始监听 10000 端口，我的 Android 客户端打开一个套接字以在端口 10001 上接收服务器的数据包。然后，Android 客户端向 PC 服务器发送一个数据包到其当前公共地址“173.246.12.125”上的端口10000。PC服务器收到数据包并在10001端口向发送者发送响应。但Android客户端从未收到响应。

这是我的 PC 服务器代码：

```
public class UDPServer {
    private final static int SERVER_PORT = 10000;
    private final static int CLIENT_PORT = 10001;

    public static void main(String[] args) {
        InetAddress clientAddr = null;
        DatagramSocket socket = null;
        try {
            //Initializing the UDP server
            System.out.println(String.format("Connecting on %s...", SERVER_PORT));
            socket = new DatagramSocket(SERVER_PORT);
            System.out.println("Connected.");
            System.out.println("====================");
        } catch (UnknownHostException e1) {
            e1.printStackTrace();
        } catch (SocketException e) {
            e.printStackTrace();
        }

        while(true){
            try {
                //Listening
                byte[] buf = new byte[1024];
                DatagramPacket packet = new DatagramPacket(buf, buf.length);
                System.out.println("Listening...");
                socket.receive(packet);

                //Getting client address from the packet we received
                clientAddr = packet.getAddress();
                System.out.println("Received: '" + new String(packet.getData()).trim() + "' from "+clientAddr.toString());

                //Sending response
                byte[] message = ("Hello Android").getBytes();
                DatagramPacket response = new DatagramPacket(message, message.length, clientAddr, CLIENT_PORT);
                DatagramSocket clientSocket = new DatagramSocket();
                System.out.println("Sending: '" + new String(message) + "'");
                clientSocket.send(response);
                System.out.println("Response sent.");
                System.out.println("--------------------");
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

} 
```

这是我的 Android 客户端类：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        new Thread(new Receiver()).start();
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        new Thread(new Client()).start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

public class Receiver implements Runnable {
    private final static int LISTENING_PORT = 10001;

    @Override
    public void run() {
        try {
            //Opening listening socket
            Log.d("UDP Receiver", "Opening listening socket on port "+LISTENING_PORT+"...");
            DatagramSocket socket = new DatagramSocket(LISTENING_PORT);
            socket.setBroadcast(true);
            socket.setReuseAddress(true);

            while(true){
                //Listening on socket
                Log.d("UDP Receiver", "Listening...");
                byte[] buf = new byte[1024];
                DatagramPacket packet = new DatagramPacket(buf, buf.length);
                socket.receive(packet);
                Log.d("UDP", "Received: '" + new String(packet.getData()).trim() + "'");
            }
        } catch (Exception e) {
            Log.e("UDP", "Receiver error", e);
        }
    }
}

public class Client implements Runnable {
    private final static String SERVER_ADDRESS = "173.246.12.125";//public ip of my server
    private final static int SERVER_PORT = 10000;

    @Override
    public void run() {
        try {
            //Preparing the socket
            InetAddress serverAddr = InetAddress.getByName(SERVER_ADDRESS);
            DatagramSocket socket = new DatagramSocket();

            //Preparing the packet
            byte[] buf = ("Hello computer").getBytes();
            DatagramPacket packet = new DatagramPacket(buf, buf.length, serverAddr, SERVER_PORT);

            //Sending the packet
            Log.d("UDP", String.format("Sending: '%s' to %s:%s", new String(buf), SERVER_ADDRESS, SERVER_PORT));
            socket.send(packet);
            Log.d("UDP", "Packet sent.");
        } catch (Exception e) {
            Log.e("UDP", "Client error", e);
        }
    }
} 
```

服务器的控制台显示客户端的 IP：

```
Connecting on 192.168.1.126:10000...
Connected.
====================
Listening...
Received: 'Hello computer' from /204.48.72.68
Sending: 'Hello Android'
Response sent.
--------------------
Listening... 
```

数据包似乎来自地址 204.48.72.68，但如果我在我的 Android 上访问 whatismyip.com，它会显示 96.22.246.97...我不知道 204.48.72.68 来自哪里...

我不确定问题是我的 Android 客户端上的侦听套接字不好，还是 PC 服务器没有将响应发送到正确的地址。有人可以指出我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:48:21.317

我遇到了类似的问题，但我使用的是 TCP 套接字而不是 UDP。我最强烈的是将文件直接发送到手机。在局域网中，这非常有效。看来，当您的手机使用移动连接连接到互联网时，无法将数据发送到侦听套接字。我在一些页面上读过（sry 没有任何链接了），手机上的传入连接被电信提供商阻止。我的解决方法是创建到服务器的传出连接并使用 tcp 套接字的双向可能性。也许您可以使用您的“工作”数据报套接字与您的手机交换数据。这是我发现的一个例子：http: [//itucet.blogspot.de/2011/03/java-bidirectional-data-transfer-using.html](http://itucet.blogspot.de/2011/03/java-bidirectional-data-transfer-using.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T05:38:31.583

相同的代码对我来说效果很好，尝试使用模拟器时会出现问题，但如果您使用任何 android mobile ，它的效果很好。

问题的原因是 android 模拟器和您的计算机不在同一个子网中。

# ruby - 使用 jekyll 插件将元数据添加到流动模板

> ID：14915390
> 
> 赞同：2
> 
> 时间：2013-02-16T21:38:28.030
> 
> 标签：ruby, yaml, jekyll, liquid, jekyll-extensions

我是杰基尔的新手。我有以下 yml 前端问题的帖子：

```
---
layout: images-grid
title: Grid Sample
image: "/imgs/image1.jpg"
--- 
```

我想创建 .rb 插件，用“layout = images-grid”标识所有帖子，并将图像的高度和宽度添加为 yaml 元数据，以便液体模板可以使用高度和宽度。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T08:33:14.560

你不能在你的文件中做这样的事情吗？

```
{% if page.layout == images-grid %}
// do something
<img src="{{image}}" class="image-class"/>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T07:46:29.277

我正在寻找类似的东西（虽然不是很*相似*，但目标是一样的，使用插件来编辑一个或多个帖子的前端）。

到目前为止，我发现的唯一选择是实际使用 ruby​​ File 类来打开和编辑文件。所以像：

```
fileHandler = File.open("2013-11-23-post-title.html", "w+") 
```

然后逐行阅读，根据需要将新内容编辑/添加到前端，即：

```
fileHandler.puts "height: 480px\n width: 640px" 
```

如果可以将前端作为页面或帖子对象的属性进行操作，那会更好/更理想，但我认为不是。我将检查 github 上的项目页面，看看是否已经有为此打开的功能请求。

# c# - 在 WP8 中控制任何条件下的应用程序执行

> ID：14915392
> 
> 赞同：0
> 
> 时间：2013-02-16T21:38:32.543
> 
> 标签：c#, xaml, windows-phone-8, windows-phone

我正在尝试为 Windows Phone 8 构建一个基本的跟踪应用程序。但是我不知道要使用哪个模型。应用程序应以可定义的时间间隔（例如 5 秒甚至 2 小时）记录位置。

如果我将应用程序开发为前台应用程序，如果用户打开另一个程序、屏幕锁定（您可以将应用程序配置为在锁定屏幕下继续运行）或您收到电话，跟踪将停止。总体而言，应用程序未执行的风险很高。

还有一些由操作系统安排的后台任务，根据手机的当前状态，只允许运行几秒钟或几分钟。是否有一些解决方法来安排用户定义的后台任务执行？例如，可以将电子邮件客户端设置为每 15 分钟获取一次电子邮件，因此必须有一些方法。

第三个选项是使用推送通知服务。然而，这似乎很愚蠢，因为必须涉及一些第三方 Microsoft 服务器，并且可能适用其他限制。更重要的是，应用程序必须运行才能接收通知。

这方面的最佳做法是什么？只要应用程序按要求运行，我就不关心电池消耗。对于应该更频繁地更新的图块（30 分钟或更长时间似乎非常长），必须存在类似的解决方案吗？我错过了什么吗？

一个可以调用它自己的基本应用程序`sleep`会很棒，但如果它在几秒钟后被杀死，那就不行了。还是`sleep`时间不算数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:17:06.833

恐怕你无法确保你的应用程序执行。

1.  标准的前台应用程序总是不如来电之类的重要，因此您必须假设它可以随时暂停或停止。您也不能强迫用户使用您的应用程序 - 这就是用户可以随时退出应用程序的原因。

2.  Windows Phone 上的后台执行不能永久化——这就是操作系统的设计方式。邮件应用程序不是一个很好的例子，因为它是一个内置应用程序。它是作为该系统的一部分制作的，因此它有另一套规则（如果有的话）。

3.  我真的没有看到使用推送通知的方法。但即使有一个，我敢肯定这不是应该如何使用该功能。

# javascript - 如何通过单击不同的图标来更改另一个 div 中的文本

> ID：14915394
> 
> 赞同：-1
> 
> 时间：2013-02-16T21:38:43.483
> 
> 标签：javascript, css, html

我主要是入站营销人员，但我擅长 HTML 和 CSS。我的知识不超过这两个。

我目前正在为我的企业建立一个主页。我被困在这一点上。

我的主页上有六个图标，代表不同的好处。

我想在下面单独`div`放置一个，它将通过更改文本来响应单击的图标。

这样做的网站最好的例子是他们[主页](http://www.kissmetrics.com)上的 Kiss Metrics 。

我不知道 JS 或 jQuery，有什么方法可以使用 CSS 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:42:54.303

你可以用 jQuery 做到这一点：

```
$("#imgDiv1").click(function () {
  $("#textDiv2", "#textDiv3", "#textDiv4", "#textDiv5", "#textDiv6").hide();
  $("#textDiv1").show();
}); 
```

**代码说明：**为每个图像 div 分配一个单击功能以隐藏所有其他 textDivs 并显示所需的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:56:22.123

实际上，这仅使用**CSS3 是**可能的，这要归功于`:target`- 您可以在点击时为目标元素应用不同的样式。

**[现场 jsFiddle 演示](http://jsfiddle.net/CAkU7/1/)**

**html:**

```
<div id="icons">
  <a href="#txt1">ICON1</a>
  <a href="#txt2">ICON2</a>
  <a href="#txt3">ICON3</a>
</div>
<div id="text">
  <span id="txt1">Benefit 1</span>
  <span id="txt2">Benefit 2</span>
  <span id="txt3">Benefit 3</span>
</div> 
```

**CSS：**

```
#text span {
  display:none;
}
#text span:target {
  display:block;
} 
```

**请注意：**

1.  `#icons`单击外部元素后，文本将立即消失。

2.  真的推荐使用 jQuery 来完成这类任务。真的很简单，试试吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:42:42.650

虽然我还没有丰富的 javascript 经验，但我必须说，这将完全通过使用 javascript 来完成。我是一名 Web 开发学生，谈到经验，HTML 和 CSS 真的只是更专注于结构/样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T21:44:34.540

没有 JavaScript - 没有。

使用 JavaScript，您可以使用

```
document.getElementById('elementId').style.display='none' 
```

使元素消失，并且

```
document.getElementById('elementId').style.display='block' 
```

让它出现。

无论如何，jQuery 将是一个更好的解决方案。

# matlab - 通过 Crank-Nicolson 实现 Fitzhugh-Nagumo 模型

> ID：14915398
> 
> 赞同：0
> 
> 时间：2013-02-16T21:39:00.577
> 
> 标签：matlab, model, ode

对于一个问题，我需要通过 Crank-Nicolson 方案实现具有空间扩散的 Fitzhugh-Nagumo 模型。现在问题在于空间扩散。

```
(V_{t}) (DV_{xx} + V(V-a)(1-V) - W + I)
(W_{t}) (epsilon(V - b*W ) 
```

而 DV_{xx} 是空间扩散。

使用Matlab，可以给即ODE45求解器以下函数。但是它还没有实现空间扩散......

```
function dy = FHN( t, Y, D, a, b, eps, I )
    V  = Y(1);
    W  = Y(2);

    dY = zeros(2,1);

    % FHN-model w/o spatial diffusion
    Vxx = 0;
    dY(0) = D .* Vxx + V .* (V-a) .* (1-V) - W + I;
    dY(1) = eps .* (V-b .* W); 
```

问题：如何实现 V_{xx} ？

此外，V 需要是什么矩阵形状？通常 V 仅取决于 t，因此是一个 [1 by t] 向量。现在 V 取决于 x 和 t，因此我希望它是一个 [x by y] 向量，对吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:42:02.157

花了很长时间，但嘿，这不是一个正常的日常问题。

```
function f = FN( t, Y, dx, xend, D, a, b, eps, I )
% Fitzhug-Nagumo model with spatial diffusion.
%       t  = Tijd
%       X  = [V; W]
%       dx = stepsize
%       xend = Size van x

% Get the column vectors dV and dW from Y
    V = Y( 1:xend/dx );
    W = Y( xend/dx+1:end );

% Function
    Vxx = (V([2:end 1])+V([end 1:end-1])-2*V)/dx^2;
    dVdt = D*Vxx + V .* (V-a) .* (1-V) - W + I ;
    dWdt = epsilon .* (V-b*W);

    f = [dVdt ; dWdt]; 
```

V 和 W 都是大小为 1:(xend/dx) 的列向量

调用方法：

```
V = zeros(xend/dx,1);
W = zeros(xend/dx,1);

% Start Boundaries
% V(x, 0) = 0.8 for 4 < x < 5
% V(x, 0) = 0.1 for 3 < x < 4
V( (4/dx+1):(5/dx-1) ) = 0.8;
V( (3/dx+1):(4/dx-1) ) = 0.1;

Y0 = [V; W];
t = 0:0.1:400;
options = '';
[T, Y] = ode45( @FN, t, Y0, options, dx, xend, D, a, b, eps, I ); 
```

# java - 关于阅读单词的快速调试

> ID：14915404
> 
> 赞同：-2
> 
> 时间：2013-02-16T21:39:20.107
> 
> 标签：java

我有这段代码，运行程序时收到错误消息。我做错了什么吗？

```
import java.io.*;
import java.util.*;

public class countLines {
    public static void main(String[] args) throws Exception {
        int count = 0;
        int word = 0;
        File f = new File("file.txt");
        Scanner input = new Scanner(f);
        while(input.hasNext()){
            String words = input.next();
            word++;
        }
        while (input.hasNextLine()) {
            input.nextLine();
            count++;
        }
        input.close();
        System.out.println("Number of Line: " + count);
        System.out.println("This file has " + word + " words.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:42:55.017

在你的第一个`while`循环中，你正在阅读你的文件，然后是你`close`。然后，在您的下一个`while`循环中，您尝试再次从文件中读取。这将触发错误，因为文件已关闭！

# javascript - Javascript父子继承不使用原型

> ID：14915408
> 
> 赞同：3
> 
> 时间：2013-02-16T21:39:46.720
> 
> 标签：javascript, inheritance, constructor, prototype

我对 JavaScript 有点陌生。我知道您应该使用原型来实现对象之间的继承，但是我尝试了以下方法并且效果很好（使用 Visual Studio 2012）。我究竟做错了什么？

```
function Person(firstname, lastname, age, eyecolor) {
    this.firstname = firstname;
    this.lastname = lastname;
    this.age = age;
    this.eyecolor = eyecolor;

    this.name = function() {
        return this.firstname + " " + this.lastname;
    }
}

function Student(firstname, lastname, age, eyecolor, level) {
    this.level = level;
    Person.call(this, firstname, lastname, age, eyecolor);
}

var per = new Person("Abe", "Lincoln", 45, "green");

var obj = new Student("Abe", "Lincoln", 45, "green", "senior"); 
```

当我检查 obj 时，它具有 Person 和 Student 的属性，我可以调用 obj.name() 来获取“Abe Lincoln”。即使在 Visual Studio 即时窗口中，我也可以将所有属性视为彼此的兄弟，正如我所期望的那样。但是我没有使用原型，所以显然这是不对的。

请让我直截了当:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:44:22.347

要使用原型继承，您可以将`name`方法放在`Person.prototype`：

```
function Person(firstname, lastname, age, eyecolor) {
    this.firstname = firstname;
    this.lastname = lastname;
    this.age = age;
    this.eyecolor = eyecolor;
}
Person.prototype.name = function() {
    return this.firstname + " " + this.lastname;
} 
```

然后制作一个实例的`.prototype`对象：`Student``Person`

```
function Student(firstname, lastname, age, eyecolor, level) {
    this.level = level;
    Person.call(this, firstname, lastname, age, eyecolor);
}

// Make the prototype object of the Student constructor inherit from the
//    prototype object of the Person constructor.
Student.prototype = Object.create(Person.prototype) 
```

所以现在你的`name`方法在所有创建的实例之间共享，而不是为每个实例重新制作。

```
var per = new Person("Abe", "Lincoln", 45, "green");

var obj = new Student("Abe", "Lincoln", 45, "green", "senior"); 
```

# objective-c - 在objective-c中将文本保存在iTXt块中

> ID：14915409
> 
> 赞同：1
> 
> 时间：2013-02-16T21:39:56.077
> 
> 标签：objective-c, xcode, text, png

如何在objective-c的iTXt png块中保存文本？

我找到[了 PNG 格式的描述，](http://www.w3.org/TR/PNG/#11iTXt)[Java](https://stackoverflow.com/questions/721918/how-can-i-save-a-png-with-a-text-or-itxt-chunk-from-java)和[PHP](https://stackoverflow.com/questions/8842387/php-add-itxt-comment-to-a-png-image)中的一个示例，但无法弄清楚如何在 Objective-c 上做到这一点。

如何读取保存的信息？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-16T21:51:37.303

此外，为了将自定义对象保存在文件中，您的对象必须符合 NSCoding 协议。在此处查看详细信息：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)。

这意味着您的对象类必须实现：

```
– initWithCoder: 
– encodeWithCoder: 
```

一旦你有一个符合 NSCoding 协议的对象，你就可以使用 NSKeyedArchiver/NSKeyedUnarchiver 从文件读取和写入数据。在此处查找参考资料：

NSKeyedArchiver：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)

NSKeyedUnarchiver：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-16T21:46:48.007

在 Objective C 中，有几种方法可以从文件中读取数据。一般来说，大多数集合类都有类似于以下的方法：

```
+ arrayWithContentsOfFile:
+ arrayWithContentsOfURL:
+ dictionaryWithContentsOfFile:
+ dictionaryWithContentsOfURL:
+ stringWithContentsOfFile:encoding:error: 
```

根据文件中存储的数据类型，您使用不同的方法。当文件中保存的数据为 PLIST 格式时，使用前 4 种方法。最后一个用于从文件中读取字符串。

注意所有这些方法都是类方法（C++中的静态类函数），还有对应的实例方法（C++中的成员函数）。

详情请参考 iOS/MAC 开发者库：http: [//developer.apple.com/library/ios/navigation/](http://developer.apple.com/library/ios/navigation/) [http://developer.apple.com/library/mac/navigation/](http://developer.apple.com/library/mac/navigation/)

# c# - 如果我的程序将 dll 文件复制到临时目录，我需要特定权限吗？

> ID：14915411
> 
> 赞同：0
> 
> 时间：2013-02-16T21:40:03.930
> 
> 标签：c#, c++, permissions, pinvoke, loadlibrary

**问题：** 我想知道我是否需要请求特定权限和/或做一些额外的事情以使其“值得信赖”，以防我的程序将 dll 文件多次复制到临时目录。如果我这样做，该程序是否会被反病毒软件视为恶意软件？

**示例代码：**

```
if (needANewCopyOfTheDll)
{
    string fileName = System.IO.Path.GetTempPath() + Guid.NewGuid().ToString() + ".dll";
    // Here, copy my dll to the new file.
} 
```

**但为什么？**我有一个用 C++ 编写的静态库，它有全局变量、初始化过程和许多其他东西。我想拥有该库的不同实例，并且我只能在内存中加载相同的 dll 一次。因此，我正在考虑将库包装在实例类中，当我需要它的新实例时，只需将 dll 文件复制到临时目录并使用`LoadLibrary()`kernel32.dll 中的函数为其获取新句柄

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:47:48.723

复制到临时目录不需要任何特殊权限。你可以这样做，它应该没有问题。很多程序都是这样做的。

从您的问题中不清楚您的软件是否被认为是恶意软件。如果是，我怀疑是因为您正在从临时目录加载 dll。

无论如何，你所做的听起来像是一个相当大的黑客攻击。您应该重写您的库以不使用全局变量。

# regex - Perl 正则表达式问题

> ID：14915415
> 
> 赞同：2
> 
> 时间：2013-02-16T21:40:22.880
> 
> 标签：regex, perl

为什么这个 perl REGEX 不起作用？我正在获取日期和用户名（日期工作正常），但是当它点击 bob.thomas 并获取整行时，它会获取所有用户名

代码：

```
m/^(.+)\s-\sUser\s(.+)\s/;
print "$2------\n"; 
```

样本数据：

```
Feb 17, 2013 12:18:02 AM - User plasma has logged on to client from host 
Feb 17, 2013 12:13:00 AM - User technician has logged on to client from host 
Feb 17, 2013 12:09:53 AM - User john.doe has logged on to client from host 
Feb 17, 2013 12:07:28 AM - User terry has logged on to client from host 
Feb 17, 2013 12:04:10 AM - User bob.thomas has been logged off from host  because its web server session timed out. This means the web server has not received a request from the client in 3 minute(s). Possible causes: the client process was killed, the client process is hung, or a network problem is preventing access to the web server. 
```

对于要求提供完整代码的用户

```
open (FILE, "log") or die print "couldn't open file";

$record=0;
$first=1;

while (<FILE>)
{
    if(m/(.+)\sto now/ && $first==1) # find the area to start recording
    {
        $record=1;
        $first=0;
    }
    if($record==1)
    {
        m/^(.+)\s-\sUser\s(.+)\s/;
        <STDIN>;
        print "$2------\n";
        if(!exists $user{$2})
        {
            $users{$2}=$1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T21:44:14.300

`.+`是*贪婪*的，它匹配最长的可能字符串。如果您希望它匹配最短，请使用`.+?`：

```
/^(.+)\s-\sUser\s(.+?)\s/; 
```

或者使用与空格不匹配的正则表达式：

```
/^(.+)\s-\sUser\s(\S+)/; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T21:46:04.653

使用不情愿/不贪婪的量词匹配直到第一次出现而不是最后一次出现。你应该在这两种情况下都这样做，以防“用户”行也有“-用户”

```
m/^(.+?)\s-\sUser\s(.+?)\s/; 
```

# mongodb - 如何使用 MapReduce 进行 k 均值空间聚类

> ID：14915416
> 
> 赞同：4
> 
> 时间：2013-02-16T21:40:38.450
> 
> 标签：mongodb, mapreduce, cluster-analysis, spatial

我是 mongodb 和 map-reduce 的新手，想通过使用 k-means 空间聚类来评估空间数据。我发现这篇[文章](http://blog.data-miners.com/2008/02/mapreduce-and-k-means-clustering.html)似乎是对算法的一个很好的描述，但我不知道如何将它翻译成一个 mongo shell 脚本。假设我的数据如下所示：

```
{
  _id: ObjectID(),
  loc: {x: <longitude>, y: <latitude>},
  user: <userid>
} 
```

我可以使用 { k = sqrt(n/2) } 其中 n 是样本数。我可以使用聚合来获取数据的边界范围和计数等。我有点迷失了对集群点文件的引用，我认为这只是另一个集合，我不知道该怎么做迭代或者是否会在客户端或数据库中完成？

好的，我在这方面取得了一些进展，因为我已经生成了初始随机点数组，我需要在 map-reduce 阶段计算最小二乘之和，但我不知道如何将这些传递给地图功能。我尝试编写 map 函数：

```
var mapCluster = function() {
    var key = -1;
    var sos = 0;
    var pos;
    for (var i=0; i<pts.length; i++) {
        var dx = pts[i][0] - this.arguments.pos[0];
        var dy = pts[i][1] - this.arguments.pos[1];
        var sumOfSquare = dx*dx + dy*dy;
        if (i == 0 || sumOfSquares < sos) {
            key = i;
            sos = sumOfSquares;
            pos = this.arguments.pos;
        }
    }
    emit(key, pos);
}; 
```

在这种情况下，聚类点就像，这可能行不通：

```
var pts = [ [x,y], [x1,y1], ... ]; 
```

因此，对于每次 mr 迭代，我们将所有收集点与该数组进行比较，并发出我们最接近的点的索引以及收集点的位置，然后在 reduce 函数中，与每个索引关联的点的平均值将是用于创建新的聚类点位置。然后在完成函数中我可以更新集群文档。

我假设我可以在集群文档上执行 findOne() 以在 map 函数中加载集群点，但我们是否希望在每次调用 map 时加载此文档？或者有没有办法为每次迭代加载一次？

所以看起来你可以像这样使用范围变量来执行上述操作：

```
db.main.mapReduce( mapCluster, mapReduce, { scope: { pnts: pnts, ... }} ); 
```

您必须小心范围内的变量名，因为它们被放置在映射的范围内，减少和完成函数，它们可能与现有的变量名发生冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:52:13.050

你试过什么？

请注意，您将需要不止一轮的映射器。

使用在 MR 上运行 k-means 的规范方法，*每次迭代*都需要一个 mapper/reducer 。

那么，您可以尝试仅编写单次迭代的 map 和 reduce 步骤吗？

# mysql - 从 AWS MYSQL 移动大表

> ID：14915418
> 
> 赞同：0
> 
> 时间：2013-02-16T21:40:50.310
> 
> 标签：mysql, linux

我有一个关于从在 AWS 中运行的 mysql 获取一个巨大的表到本地机器的问题。我刚刚创建了一个大小为 2.3GB 的表，但是我只有 2 GB 的可用磁盘空间。这导致我什至无法将表转储到转储文件中，这会导致错误 28。然后我有两个选择。

1.  清理具有 300+MB 可用空间的磁盘。我已经尝试删除所有可以删除的内容。我只有 2.5G 的数据库，但 mysqldb1 最多占用 4GB 大小，我不知道。

    ```
    ubuntu@ip-10-60-125-122:~$ df -h
    Filesystem      Size  Used Avail Use% Mounted on
    /dev/xvda1      8.0G  5.6G  2.0G  74% /
    udev            819M   12K  819M   1% /dev
    tmpfs           331M  184K  331M   1% /run
    none            5.0M     0  5.0M   0% /run/lock
    none            827M     0  827M   0% /run/shm
    /dev/xvdb       147G  188M  140G   1% /mnt 
    ```

2.  将我的表分成两个或更多不同的表，我可以将它们单独转储，然后再将它们放在一起。

我是 mysql 新手，希望能提供一个安全简单的解决方案。

最好的问候，如果我能做些什么来改善我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:08:05.877

如果您确定您实际上没有在数据库中存储那么多数据，您可能想在 SO 上查看其他问题：

[MySQL InnoDB 从表中删除数据行后未释放磁盘空间](https://stackoverflow.com/questions/1270944/mysql-innodb-not-releasing-disk-space-after-deleting-data-rows-from-table/1280625#1280625)

默认情况下，如果您删除数据，MySQL 不会减小文件大小。如果您的 MySQL 配置为按表文件，您应该能够通过优化数据库来减少数据。否则，您必须将所有数据传送到另一台机器并重新创建配置了每个表文件的数据库。

# php - 使用 PHP 进行表单验证

> ID：14915424
> 
> 赞同：2
> 
> 时间：2013-02-16T21:41:31.180
> 
> 标签：php, validation, required-field

我想验证我的表单，所以所有字段都是必需的。如果未插入字段或将其留空，则会在提交后显示错误消息。有人可以帮忙吗？

形式

```
<html>  
<head>  
<title>Form Input Data</title> 
</head>
<table>  
<body><table border="1">
<table bgcolor="lightblue"></body>

     <form method="post" action="insert_ac.php"> 
    <br>
<tr><td align="left"><strong>Nurse Information</strong></td></tr>
<tr>
<td><font color="red">Please select your name</font></td>
</tr>
<tr>
<td>Fullname</td>
<td><select name="valuelist">;
<option value="valuelist" name="nurse_name" value='<?php echo $nurse_name;  ?>'></option>
<?php
$value=$_POST ["valuelist"];
$con = mysql_connect("localhost","root","") or die('Could not connect:'.mysql_error());
mysql_select_db("a&e", $con) or die('Could not select database.');

$fetch_nurse_name = mysql_query("SELECT DISTINCT Fullname FROM nurse");

while($throw_nurse_name = mysql_fetch_array($fetch_nurse_name)) {
echo '<option   value=\"'.$throw_nurse_name[0].'">'.$throw_nurse_name[0].'</option>';
 }
 echo "</select>";

?>
</td>
</tr>
<tr>
<td>Please register name here:</td>
<tr>  

        <td>Fullname</td>

       <td><input type="text" name="nurse_forename" size="30"> </td>

     </tr>
 </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:48:35.543

我会做这样的事情：

```
$req = ['field1', 'field2', 'field...'];
$status = true;
foreach ($req as $field) {
    if (empty($_POST[$field])) {
        echo 'Field ' . $field . ' is empty';
        $status = false;
    }
}
if ($status) {
    // ok
} else {
    // not okay!
} 
```

您创建一个包含所有字段名称的数组 ( `$req`) 并遍历它们。检查每个字段`empty()`（检查此功能的 php 手册）。

这是一个更好（并且大部分）正确的 HTML 片段...请正确缩进并阅读任何 HTML 教程以获取格式正确的代码。您的 HTML 是 **。

```
<?php

$value=$_POST["valuelist"];
$con = mysql_connect("localhost","root","") or die('Could not connect:'.mysql_error());
mysql_select_db("a&e", $con) or die('Could not select database.');

$fetch_nurse_name = mysql_query("SELECT DISTINCT Fullname FROM nurse");

?>
<html>
<head>
    <title>Form Input Data</title> 
</head>
<body>

    <form method="post" action="insert_ac.php"> 

    <table border="1" bgcolor="lightblue">
        <tr>
            <td align="left"><strong>Nurse Information</strong></td>
        </tr>
        <tr>
            <td><font color="red">Please select your name</font></td>
        </tr>
        <tr>
            <td>Fullname</td>
            <td>
                <select name="valuelist">
                    <option value="valuelist" value="<?php echo $nurse_name;  ?>"></option>
                    <?php

                    while($throw_nurse_name = mysql_fetch_array($fetch_nurse_name)) {
                        echo '<option value="'.$throw_nurse_name[0].'">'.$throw_nurse_name[0].'</option>';
                    }
                    ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>Please register name here:</td>
        </tr>
        <tr>  
            <td>Fullname</td>
            <td><input type="text" name="nurse_forename" size="30"> </td>
        </tr>
    </table>
    </form>
</body>
</html> 
```

如果您只有两个给定字段，则可以这样做：

```
$status = false;
$name = '';

if (!empty($_POST['nurse_forename'])) {
    $name = $_POST['nurse_forename'];
    $status = true;

} elseif (!empty($_POST['valuelist'])) {
    $name = $_POST['valuelist'];
    $status = true;

} else {

    $status = false;
    // none of nurse_forname OR valuelist is filled
    // abort.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:46:56.430

就像是

```
foreach($_POST as $form_entry)
 if(empty($form_entry))
  echo 'you have to fill in all fields'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:48:27.090

```
 if (isset($_POST['variable']{0})) {
   echo 'I exist and I have at least one char!';
   else
   echo 'I dont exist or I have no chars!'; 
```

它检查是否`$_POST['variable']`存在并且至少有一个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T21:44:40.683

`if($_POST['valuelist'] == NULL or $_POST['nurse_forename'] == NULL){ die('empty'); }`

未经测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T21:47:56.990

试试这种方式：

```
if(empty($_POST['nurse_forename'])){
echo "Field Nurse-Forename is empty";
} 
```

你也可以这样检查：

```
if($_POST['nurse_forename']==""){
echo "Nurse-Forename is empty";
} 
```

您无法使用一个命令检查所有字段（因为您无法区分一个和多个空字段）。您可以使用 OOP 做得更优雅一些，但我认为对于您在示例上方发布的代码应该这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T22:00:14.447

您也可以试试这个，它正在验证所有表单项。

```
if (isset ( $_POST ['submit_button_name'] )) {
    $validated = true;
    array_walk_recursive ( $_POST, function ($value, $key) {
        global $validated;
        if (! trim ( $value ))
            $validated = false;
    } );
    if ($validated) {
        // insert function and redirect
    } else {
        // print Your message
    }
}
// Your form 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-16T12:48:17.733

```
<!DOCTYPE HTML>
<html>
<head>
<style>
.error {color: #FF0000;}
</style>
</head>
<body>

<?php
// define variables and set to empty values
$nameErr = $emailErr = $genderErr = $websiteErr = "";
$name = $email = $gender = $comment = $website = "";

if ($_SERVER["REQUEST_METHOD"] == "POST")
{

   if (empty($_POST["name"]))
     {$nameErr = "Name is required";}
   else
     {$name = test_input($_POST["name"]);}

   if (empty($_POST["email"]))
     {$emailErr = "Email is required";}
   else
     {$email = test_input($_POST["email"]);}

   if (empty($_POST["website"]))
     {$website = "";}
   else
     {$website = test_input($_POST["website"]);}

   if (empty($_POST["comment"]))
     {$comment = "";}
   else
     {$comment = test_input($_POST["comment"]);}

   if (empty($_POST["gender"]))
     {$genderErr = "Gender is required";}
   else
     {$gender = test_input($_POST["gender"]);}

}

function test_input($data)
{
     $data = trim($data);
     $data = stripslashes($data);
     $data = htmlspecialchars($data);
     return $data;
}
?>

<h2>PHP Form Validation Example</h2>
<p><span class="error">* required field.</span></p>
<form method="post" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>">
   Name: <input type="text" name="name">
   <span class="error">* <?php echo $nameErr;?></span>
   <br><br>
   E-mail: <input type="text" name="email">
   <span class="error">* <?php echo $emailErr;?></span>
   <br><br>
   Website: <input type="text" name="website">
   <span class="error"><?php echo $websiteErr;?></span>
   <br><br>
   Comment: <textarea name="comment" rows="5" cols="40"></textarea>
   <br><br>
   Gender:
   <input type="radio" name="gender" value="female">Female
   <input type="radio" name="gender" value="male">Male
   <span class="error">* <?php echo $genderErr;?></span>
   <br><br>
   <input type="submit" name="submit" value="Submit">
</form>

<?php
echo "<h2>Your Input:</h2>";
echo $name;
echo "<br>";
echo $email;
echo "<br>";
echo $website;
echo "<br>";
echo $comment;
echo "<br>";
echo $gender;
?>

</body>
</html> 
```

# django - Django 按最高评分过滤查询集

> ID：14915425
> 
> 赞同：1
> 
> 时间：2013-02-16T21:41:41.667
> 
> 标签：django, filter, django-queryset

我有一个允许对其对象进行评级的模型，并且我希望能够按最高评级进行过滤，这是一个可以是正整数或负整数的数字范围：

```
class Thing(models.Model):
    user = models.ForeignKey(User)
    created_on = models.DateTimeField(auto_now_add=True)
    rating = VotingField(can_change_vote=True)
    .... 
```

`VotingField`来自django-ratings的[一个分支](https://github.com/Kronuz/django-ratings/blob/master/djangoratings/fields.py)。

如何将此查询集过滤到所有对象中`order_by`的最高数字？谢谢你的想法！`rating``Thing`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:00:11.050

我不确定您是想要最高平均值还是最高总和，因此您可能需要更改注释

```
from django.db.models import Sum, Avg

Thing.objects.annotate(avg_rating=Avg('rating__score')).order_by('-avg_rating')
Thing.objects.annotate(sum_rating=Sum('rating__score')).order_by('-sum_rating') 
```

见[https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)

看起来您正在调用您的 VotingField `rating`，看起来它本质上对`Vote`模型有很多。所以我们想要每个集合字段`Thing`的Sum 或 Avg 。（我认为它是我们想要注释的分数字段[https://github.com/Kronuz/django-ratings/blob/master/djangoratings/models.py#L15](https://github.com/Kronuz/django-ratings/blob/master/djangoratings/models.py#L15)但我不使用这个插件所以做一些研究如果这不是你需要的）`Vote``score`

# php - 日志行格式

> ID：14915427
> 
> 赞同：0
> 
> 时间：2013-02-16T21:42:05.100
> 
> 标签：php, class, logging, psr-3

我在基于 PSR-3 标准（以及随它提供的接口/类 - [https://github.com/php-fig/log](https://github.com/php-fig/log)）实现日志系统时遇到问题。

我创建了一些扩展 PSR-3 的类：logger，它使用适配器进行实际日志记录（logger 类存储适配器实例并在其中调用 log() 方法），我来到文件适配器（将日志消息写入文件的适配器)) 我正在寻找一些方法来实现自定义日志行格式。我的意思是我可以将消息记录为

`[01/01/2013 12:00:00] NOTICE: Log message content\n`

也

`user: Log message content (NOTICE) ~ 01-01-2013`

（完整的定制订单和内容）

另外，我想为此创建单独的类。

有没有办法以非常容易的方式做到这一点，所以其他人（甚至是低技能的phpers）不会有改变这个的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T01:30:40.687

也许它是主流，但你看过[Monolog](https://github.com/Seldaek/monolog/)

您可以实施`HandlerInterface`而不是`LoggerInterface`. Monolog 将使用您的模式解决格式化问题。

这个解决方案也更好，因为您可以在 Monolog 中使用 ONE Logger 和许多 Handlers。

有一个缺点/优点（由您决定）：您必须在处理程序中实现您的级别日志记录，这可能有点难看。

# uitableview - SegmentControl 不随 TableView 滚动而移动

> ID：14915429
> 
> 赞同：1
> 
> 时间：2013-02-16T21:42:15.157
> 
> 标签：uitableview, ios6, scroll, embed, uisegmentedcontrol

当前视图中的场景是“RunTestViewController”。如您所见，嵌入了一个段控件。

一切运行良好，segmentcontrol 工作，但是当我滚动segment 控件时，它会停留在单元格的顶部。

**有没有办法将段控制器嵌入到表格视图中，以便它与表格一起移动？**

![表视图](../Images/a685e9aca26c52464e6f68d5b307379d.png) 谢谢，

**编辑：

------------------**

我在 viewDidLoad 部分添加了这段代码：

```
UIView *headerView = [[UIView alloc] init ];
    [headerView addSubview:resultsSegment];
    self.tableView.tableHeaderView = headerView; 
```

这允许段控件在表格视图滚动时移动，这很棒，但是段控件现在不可点击，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:56:16.937

您想将视图或控件嵌入到 tableview 中，以便它与 tableview 一起滚动？您应该将视图或控件放入 tableview 标题中。

```
UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,200)];
UISegmentedControl *segmentControl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(0, 0, 200, 44)];
[headerView addSubview:segmentControl];
self.tableView.tableHeaderView = headerView; 
```

# wordpress - Wordpress 中的 Opencart 会话信息

> ID：14915431
> 
> 赞同：0
> 
> 时间：2013-02-16T21:42:21.353
> 
> 标签：wordpress, integration, opencart

我有一个同时使用 WordPress 和 Opencart 的网站。主站点是由 WP 构建的，然后在子目录中有一个 OC 站点。

我想将 OC 中的会话数据带入 wordpress 站点，这样我就可以在整个站点中拥有愿望清单、购物车、结帐、登录状态和我的帐户信息。

有谁知道我可以向 WP 添加什么代码来引入这些信息？

再次提前感谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:25:53.933

OpenCart 中已经有很多关于模块开发和导出以及会话构建的文章。

鉴于您现有的页面：

```
yoursite.com/wordpress
yoursite.com/wordpress/page.php (i.e. your page outside the shop),
yoursite.com/products/catalog/controller/common/header.php -and-
yoursite/products/catalog/view/theme/default/template/common/header.tpl 
```

# 1\. 使用以下代码创建文件 headerXYZ.php 并将其保存到主站点的根目录（或您在 OC 商店之外选择的其他位置）。

```
<?php
// Config
require_once('shop/config.php');

// VirtualQMOD
require_once('shop/vqmod/vqmod.php');
$vqmod = new VQMod();

// VQMODDED Startup
require_once($vqmod->modCheck(DIR_SYSTEM . 'startup.php'));

// Application Classes
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/customer.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/affiliate.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/currency.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/tax.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/weight.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/length.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/cart.php'));

$myVar = array();

$myVar = array();

// Registry
$registry = new Registry();

// Loader
$loader = new Loader($registry);
$registry->set('load', $loader);

// Config
$config = new Config();
$registry->set('config', $config);

// Database
$db = new DB(DB_DRIVER, DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE);
$registry->set('db', $db);

// Url
$url = new Url($config->get('config_url'), $config->get('config_use_ssl') ? $config->get('config_ssl') :

$config->get('config_url'));   
$registry->set('url', $url);

// Log
$log = new Log($config->get('config_error_filename'));
$registry->set('log', $log);

function error_handler($errno, $errstr, $errfile, $errline) {
   global $log, $config;

   switch ($errno) {
      case E_NOTICE:
      case E_USER_NOTICE:
         $error = 'Notice';
         break;
      case E_WARNING:
      case E_USER_WARNING:
         $error = 'Warning';
         break;
      case E_ERROR:
      case E_USER_ERROR:
         $error = 'Fatal Error';
         break;
      default:
         $error = 'Unknown';
         break;
   }

   if ($config->get('config_error_display')) {
      echo '<b>' . $error . '</b>: ' . $errstr . ' in <b>' . $errfile . '</b> on line <b>' . $errline . '</b>';
   }

   if ($config->get('config_error_log')) {
      $log->write('PHP ' . $error . ':  ' . $errstr . ' in ' . $errfile . ' on line ' . $errline);
   }

   return true;
}

// Error Handler
set_error_handler('error_handler');

// Request
$request = new Request();
$registry->set('request', $request);

// Response
$response = new Response();
$response->addHeader('Content-Type: text/html; charset=utf-8');
$response->setCompression($config->get('config_compression'));
$registry->set('response', $response);

// Cache
$cache = new Cache();
$registry->set('cache', $cache);

// Session
$session = new Session();
$registry->set('session', $session);

// Language Detection
$languages = array();

$query = $db->query("SELECT * FROM " . DB_PREFIX . "language");

foreach ($query->rows as $result) {
   $languages[$result['code']] = $result;
}

$detect = '';

if (isset($request->server['HTTP_ACCEPT_LANGUAGE']) && ($request->server['HTTP_ACCEPT_LANGUAGE'])) {
   $browser_languages = explode(',', $request->server['HTTP_ACCEPT_LANGUAGE']);

   foreach ($browser_languages as $browser_language) {
      foreach ($languages as $key => $value) {
         if ($value['status']) {
            $locale = explode(',', $value['locale']);

            if (in_array($browser_language, $locale)) {
               $detect = $key;
            }
         }
      }
   }
}

if (isset($request->get['language']) && array_key_exists($request->get['language'], $languages) &&

$languages[$request->get['language']]['status']) {
   $code = $request->get['language'];
} elseif (isset($session->data['language']) && array_key_exists($session->data['language'], $languages)) {
   $code = $session->data['language'];
} elseif (isset($request->cookie['language']) && array_key_exists($request->cookie['language'], $languages)) {
   $code = $request->cookie['language'];
} elseif ($detect) {
   $code = $detect;
} else {
   $code = $config->get('config_language');
}

if (!isset($session->data['language']) || $session->data['language'] != $code) {
   $session->data['language'] = $code;
}

if (!isset($request->cookie['language']) || $request->cookie['language'] != $code) {    
   setcookie('language', $code, time() + 60 * 60 * 24 * 30, '/', $request->server['HTTP_HOST']);
}         

$config->set('config_language_id', $languages[$code]['language_id']);
$config->set('config_language', $languages[$code]['code']);

// Language   
$language = new Language($languages[$code]['directory']);
$language->load($languages[$code]['filename']);   
$registry->set('language', $language);

// Document
$document = new Document();
$registry->set('document', $document);       

// Customer
$registry->set('customer', new Customer($registry));

// Affiliate
$affiliate = new Affiliate($registry);      
$registry->set('affiliate', $affiliate);

if (isset($request->get['tracking']) && !isset($request->cookie['tracking'])) {
   setcookie('tracking', $request->get['tracking'], time() + 3600 * 24 * 1000, '/');
}

// Currency
$registry->set('currency', new Currency($registry));

// Tax
$tax = new Tax($registry);
$registry->set('tax', $tax);

// Weight
$registry->set('weight', new Weight($registry));

// Length
$registry->set('length', new Length($registry));

// Cart
$registry->set('cart', new Cart($registry));

// Front Controller
$controller = new Front($registry);

// Maintenance Mode
$controller->addPreAction(new Action('common/maintenance'));

// SEO URL's
$controller->addPreAction(new Action('common/seo_url'));

// Router
if (isset($request->get['route'])) {
   $action = new Action($request->get['route']);
} else {
   $action = new Action('common/home');
}

// Dispatch
$controller->dispatch($action, new Action('error/not_found')); 
```

# 2\. 现在，在 page.php 中包含 headerXYZ.php，即将下面的语句放在 page.php 最顶部的第 1 行

```
<?php require_once ('headerXYZ.php');?> 
```

# 3\. 最后，在您的外部 page.php 页面的开始正文标记之后添加以下语句列表

```
<?php
require_once('shop/catalog/model/total/sub_total.php');
require_once('shop/catalog/language/english/total/sub_total.php');
require_once('shop/catalog/model/total/reward.php');
require_once('shop/catalog/model/total/shipping.php');
require_once('shop/catalog/model/total/coupon.php');
require_once('shop/catalog/model/total/tax.php');
require_once('shop/catalog/model/total/credit.php');
require_once('shop/catalog/language/english/total/credit.php');
require_once('shop/catalog/model/total/voucher.php');
require_once('shop/catalog/model/total/total.php');
require_once('shop/catalog/language/english/total/total.php');
foreach($myVar as $key=>$value)
{
   $$key = $value;
}

require_once('shop/catalog/controller/common/header.php');
require_once('shop/catalog/view/theme/default/template/common/header.tpl');
?> 
```

就是这样......你完成了！您现在应该在位于您的 Opencart 商店之外的页面中有一个功能齐全的标题（带有工作车、登录等）。

旁注：您也可以将整个代码（包括 headerXYZ.php 的内容和 13 个 require_once 语句）直接插入到您的外部页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T15:55:01.353

我一直在寻找类似的东西，我所做的是在两个系统中为页脚和页眉编写相同的 html/css，之后，我编写了一个额外的 Wordpress 插件来在用户登录 opencart 时显示用户和购物车信息。

[https://github.com/saRca/op2wp](https://github.com/saRca/op2wp)

# java - 试图将列表中的元素一个一个地移动到另一个，直到一个为空；并发修改异常

> ID：14915441
> 
> 赞同：2
> 
> 时间：2013-02-16T21:43:14.687
> 
> 标签：java

**注意：**请在下面查看我的编辑：

一段时间以来，我一直在尝试编写一个洗牌模拟 java 程序。高级概述是这样的：

*   做一个甲板
*   切入`myDeck`我的`handLeft`和`handRight`
*   虽然我`handRight`的不是空的：
    *   从右手向左移动随机数量的牌。

这个移动部分是通过以下方法完成的：

```
public ArrayList<Card> leftShuffle(int fudge){
    Random randomGenerator = new Random();
    int numberOfCardsToMove = 0;
    while(!handRight.isEmpty()){
        numberOfCardsToMove = randomGenerator.nextInt(fudge);
        if (numberOfCardsToMove<handRight.size()){
            List<Card> cardsBeingMoved = handRight.subList(0, numberOfCardsToMove);
            handRight.removeAll(cardsBeingMoved);  <---line 81
            handLeft.addAll(cardsBeingMoved);      <---line 82
        }else{
            handLeft.addAll(handRight);
            handRight.clear();
        }
    }
    return handLeft;
} 
```

但是，当我尝试将卡片添加到 SubList 时，`cardsBeingMoved`java 吓坏了，并给了我这个异常：

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.ArrayList$SubList.checkForComodification(ArrayList.java:1091)
at java.util.ArrayList$SubList.size(ArrayList.java:921)
at java.util.AbstractCollection.toArray(AbstractCollection.java:136)
at java.util.ArrayList.addAll(ArrayList.java:497)
at org.Craig.CardShuffling.Scientist.leftShuffle(Scientist.java:82)
at org.Craig.CardShuffling.Scientist.shuffle(Scientist.java:49)
at org.Craig.CardShuffling.Launcher.main(Launcher.java:11) 
```

现在我熟悉迭代器及其工作方式，但我认为标准`while(it.hasNext)`循环不会在这里工作。[我在这里](https://stackoverflow.com/a/8585533/1075247)看到了一种解决方案的尝试，但我不确定它是否能巧妙地解决我的问题。删除某些内容不会导致此问题，添加与 while 子句无关的内容会导致此问题。否则我可以将条件更改为类似的东西`while(handLeft.size!=52)`，然后从最后删除`handRight`。

我尝试使用 CopyOnWriteArrayList 类，但错误方式相同（参见附录 A），我已经厌倦了各种“持有”列表，因此同一列表不会同时被更改，但它仍然给出异常.

我该如何解决这个问题？有没有一种聪明的方法来使用我还没有想到的迭代器？

* * *

### 附录 A

**洗牌法**

```
 public ArrayList<Card> shuffle (int fudge, Shuffling method){
    cutDeck(fudge);
    switch(method){
    case right:
        myDeck.setDeck(rightShuffle(fudge));
        break;
    case left:
        myDeck.setDeck(leftShuffle(fudge));
        break;
    case both:
        myDeck.setDeck(bothShuffle(fudge));
        break;
    }
    return myDeck.getDeck();
} 
```

**CopyOnWriteArrayList 异常堆栈跟踪。**

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.concurrent.CopyOnWriteArrayList$COWSubList.checkForComodification(CopyOnWriteArrayList.java:1130)
at java.util.concurrent.CopyOnWriteArrayList$COWSubList.size(CopyOnWriteArrayList.java:1170)
at java.util.AbstractCollection.toArray(AbstractCollection.java:136)
at java.util.concurrent.CopyOnWriteArrayList.addAll(CopyOnWriteArrayList.java:770)
at org.Craig.CardShuffling.Scientist.leftShuffle(Scientist.java:82)
at org.Craig.CardShuffling.Scientist.shuffle(Scientist.java:49)
at org.Craig.CardShuffling.Launcher.main(Launcher.java:11) 
```

### 附录 B：

我已将方法更改为：

```
 public ArrayList<Card> leftShuffle(int fudge){
    Random randomGenerator = new Random();
    int numberOfCardsToMove = 0;
    while(!handRight.isEmpty()){
        numberOfCardsToMove = randomGenerator.nextInt(fudge);
        if (numberOfCardsToMove<handRight.size()){
            List<Card> cardsBeingMoved = handRight.subList(0, numberOfCardsToMove);
            handRight.removeAll(cardsBeingMoved);
            /* cardBeingMoved is just a view, 
             * clearing it removes the same cards from handRight*/
            cardsBeingMoved.clear();
        }else{
            handLeft.addAll(handRight);
            handRight.clear();
        }
        System.out.println("Size of Deck one:" + handRight.size() + "\n");
        System.out.println("Size of Deck one:" + handLeft.size() + "\n");
    }
    return handLeft;
} 
```

现在例外是这个。

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.ArrayList$SubList.checkForComodification(ArrayList.java:1091)
at java.util.ArrayList$SubList.size(ArrayList.java:921)
at java.util.AbstractList.clear(AbstractList.java:234)
at org.Craig.CardShuffling.Scientist.leftShuffle(Scientist.java:86)
at org.Craig.CardShuffling.Scientist.shuffle(Scientist.java:49)
at org.Craig.CardShuffling.Launcher.main(Launcher.java:11) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:49:40.173

子列表是一个*视图*，而不是一个副本。`cardsBeingMoved`因此，您在尝试将其用于其他用途的同时删除了元素。

相反，请执行以下操作：

```
 handLeft.addAll(cardsBeingMoved);
 cardsBeingMoved.clear(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:49:47.797

该`subList`函数创建一个由初始列表支持的列表，即所有操作都反映在子列表 -> 列表中，反之亦然。所以下面的代码是无效的：

```
List<Card> cardsBeingMoved = handRight.subList(0, numberOfCardsToMove);
handRight.removeAll(cardsBeingMoved);  <---line 81
handLeft.addAll(cardsBeingMoved);      <---line 82 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T22:48:09.943

与其使用 subList，不如使用循环将卡片一张一张地从 handRight 移动到 handLeft，如下所示：

```
 public ArrayList<Card> leftShuffle(int fudge){
    Random randomGenerator = new Random();
    int numberOfCardsToMove = 0;
    while(!handRight.isEmpty()){
        numberOfCardsToMove = randomGenerator.nextInt(fudge);
        if (numberOfCardsToMove<handRight.size()){
            for(int i = 0; i < numberOfCardsToMove; i++){
                handLeft.add(handRight.get(i));
                handRight.remove(i);
            }
        }else{
            handLeft.addAll(handRight);
            handRight.clear();
        }
    }
    return handLeft;
} 
```

# playframework - 是否有更合适的方法为闭包编译器（ Play 2.1 ）设置 language_in 选项？

> ID：14915444
> 
> 赞同：3
> 
> 时间：2013-02-16T21:43:22.510
> 
> 标签：playframework, playframework-2.0

我必须将闭包编译器中的 language_in 选项配置为 ECMASCRIPT5 以编译需要 ES5 的 libs Ember、Angular 和其他...必须有更好的方法，但我是这样实现的：

```
 // Build.scala

  val root = new java.io.File(".")
  val defaultOptions = new CompilerOptions()
  defaultOptions.closurePass = true
  defaultOptions.setProcessCommonJSModules(true)
  defaultOptions.setCommonJSModulePathPrefix(root.getCanonicalPath + "/app/assets/javascripts/")
  defaultOptions.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5)

  CompilationLevel.WHITESPACE_ONLY.setOptionsForCompilationLevel(defaultOptions)

  val main = play.Project(appName, appVersion, appDependencies).settings(
    (Seq(requireJs += "main.js", requireJsShim += "main.js") ++ closureCompilerSettings(defaultOptions)): _*
  ) 
```

有没有更合适的方法来做到这一点？

# javascript - 无法对齐通过 CSS 旋转的文本

> ID：14915448
> 
> 赞同：2
> 
> 时间：2013-02-16T21:44:12.930
> 
> 标签：javascript, html, css

我目前正在修改 Chris Callison-Burch 的 Amazon Mechanical Turk Word Alignment UI（[https://github.com/callison-burch/mechanical_turk_workshop/wiki/word-alignment](https://github.com/callison-burch/mechanical_turk_workshop/wiki/word-alignment)或[http://cs.jhu.edu/~ccb/interface -word-alignment.html](http://cs.jhu.edu/~ccb/interface-word-alignment.html)），这样它就不会将图像用于旋转的源词。我已成功旋转源（英文）单词，但无法正确对齐它们。我想让单词环绕在桌子上，所以顶部的英文单词应该与桌子的顶部对齐，而底部的英文单词应该与桌子的底部对齐。基本上，我希望它看起来像这个页面（[http://cs.jhu.edu/~ccb/interface-word-alignment.html](http://cs.jhu.edu/~ccb/interface-word-alignment.html)），但使用旋转文本而不是旋转图像。

你可以在这里查看代码：http: [//jsfiddle.net/BqTJe/](http://jsfiddle.net/BqTJe/)

具体来说，我正在使用以下 CSS 类旋转单词：

```
.rotated { 
    display: block; 
    position: relative; 
    width: 20px; 
    -webkit-transform: rotate(-90deg); 
    -moz-transform: rotate(-90deg); 
    -o-transform: rotate(-90deg);
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:15:25.890

我在 www.reddit.com/r/css 上问了这个问题，这就是我得到的（感谢 www.reddit.com/u/dangoodspeed！）

首先，将以下行添加到 css：

```
table { border-collapse:collapse; margin:100px auto;}
td { border:2px solid white; min-width:20px; min-height:20px;}
table tr:last-child td { overflow:hidden; height:100px; max-width:20px;}
table tr:last-child td div { display:block; text-align:right; width:100px; height:20px; positon:relative; left:-40px;} 
```

然后你用 div 而不是 span 将表格底部的文本包装起来。

您可以在此处查看固定版本：http: [//jsfiddle.net/BqTJe/12/](http://jsfiddle.net/BqTJe/12/)

注意：字数不能超过 100px。

# android - android sip 没有接到任何电话

> ID：14915451
> 
> 赞同：2
> 
> 时间：2013-02-16T21:44:25.137
> 
> 标签：android, sip

我无法在我的 android SIP 应用程序上接听任何电话，我可以在 SIP 服务器上成功注册，我可以发起呼叫并成功邀请其他用户，但我无法接听任何电话。我认为我的 SIP 服务器或设备没有任何问题，因为我能够使用 Sipdroid 应用程序并发起和接听电话。

我的代码如下，基于 SipDemo 示例：

```
public class WalkieTalkieActivity extends Activity implements View.OnTouchListener {
public static final String TAG = "WalkieTalkieActivity";  

public String sipAddress = null;

public SipManager manager = null;
public SipProfile me = null;
public SipAudioCall call = null;
public IncomingCallReceiver callReceiver;

private static final int CALL_ADDRESS = 1;
private static final int SET_AUTH_INFO = 2;
private static final int UPDATE_SETTINGS_DIALOG = 3;
private static final int HANG_UP = 4;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.walkietalkie);

    ToggleButton pushToTalkButton = (ToggleButton) findViewById(R.id.pushToTalk);
    pushToTalkButton.setOnTouchListener(this);

    // Set up the intent filter.  This will be used to fire an
    // IncomingCallReceiver when someone calls the SIP address used by this
    // application.
    IntentFilter filter = new IntentFilter();
    filter.addAction("android.SipDemo.INCOMING_CALL");
    callReceiver = new IncomingCallReceiver();
    this.registerReceiver(callReceiver, filter);

    // "Push to talk" can be a serious pain when the screen keeps turning off.
    // Let's prevent that.
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    initializeManager();
}

@Override
public void onStart() {
    super.onStart();
    // When we get back from the preference setting Activity, assume
    // settings have changed, and re-login with new auth info.
    initializeManager();
}

@Override
public void onDestroy() {
    super.onDestroy();
    if (call != null) {
        call.close();
    }

    closeLocalProfile();

    if (callReceiver != null) {
        this.unregisterReceiver(callReceiver);
    }
}

public void initializeManager() {
    if(manager == null) {
      manager = SipManager.newInstance(this);
    }

    initializeLocalProfile();
}

/**
 * Logs you into your SIP provider, registering this device as the location to
 * send SIP calls to for your SIP address.
 */
public void initializeLocalProfile() {
    if (manager == null) {
        return;
    }

    if (me != null) {
        closeLocalProfile();
    }

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String username = prefs.getString("namePref", "XXX");
    String domain = prefs.getString("domainPref", "192.168.1.11");
    String password = prefs.getString("passPref", "");

    if (username.length() == 0 || domain.length() == 0 || password.length() == 0) {
        showDialog(UPDATE_SETTINGS_DIALOG);
        return;
    }

    try {
        SipProfile.Builder builder = new SipProfile.Builder(username, domain);
        builder.setPassword(password);
        builder.setOutboundProxy(domain);
        builder.setPort(8090);
        builder.setProtocol("UDP");
        me = builder.build();            
        Log.d(TAG, "Auto Registration: " + me.getAutoRegistration());
        Log.d(TAG, "SipProfile: " + me.getUriString());

        Intent i = new Intent();
        i.setAction("android.SipDemo.INCOMING_CALL");
        PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, Intent.FILL_IN_DATA);
        manager.open(me, pi, null);

        Log.d(TAG, "manage.isOpen() " + manager.isOpened(me.getUriString()));
        // This listener must be added AFTER manager.open is called,
        // Otherwise the methods aren't guaranteed to fire.

        manager.setRegistrationListener(me.getUriString(), new SipRegistrationListener() {
                public void onRegistering(String localProfileUri) {
                    updateStatus("Registering with SIP Server...");
                }

                public void onRegistrationDone(String localProfileUri, long expiryTime) {
                    updateStatus("Ready");
                    Log.d(TAG,"Registration done successfully.....");
                    Log.d(TAG,"Local Profile URI: " + me.getUriString());
                    Log.d(TAG,"Local Profile URI: " + me);
                }

                public void onRegistrationFailed(String localProfileUri, int errorCode,
                        String errorMessage) {
                    updateStatus("Registration failed.  Please check settings. " + errorMessage);
                }
            });
    } catch (ParseException pe) {
        updateStatus("Connection Error.");
    } catch (SipException se) {
        updateStatus("Connection error.");
    }
}

/**
 * Closes out your local profile, freeing associated objects into memory
 * and unregistering your device from the server.
 */
public void closeLocalProfile() {
    if (manager == null) {
        return;
    }
    try {
        if (me != null) {
            manager.close(me.getUriString());
        }
    } catch (Exception ee) {
        Log.d("WalkieTalkieActivity/onDestroy", "Failed to close local profile.", ee);
    }
}

/**
 * Make an outgoing call.
 */
public void initiateCall() {

    updateStatus(sipAddress);

    try {
        SipAudioCall.Listener listener = new SipAudioCall.Listener() {
            // Much of the client's interaction with the SIP Stack will
            // happen via listeners.  Even making an outgoing call, don't
            // forget to set up a listener to set things up once the call is established.
            @Override
            public void onCallEstablished(SipAudioCall call) {
                call.startAudio();
                call.setSpeakerMode(true);
                call.toggleMute();
                updateStatus(call);
            }

            @Override
            public void onCallEnded(SipAudioCall call) {
                updateStatus("Ready.");
            }
        };
        Log.d(TAG,"Calling:  " + sipAddress);
        call = manager.makeAudioCall(me.getUriString(), sipAddress, listener, 30);

    }
    catch (Exception e) {
        Log.i("WalkieTalkieActivity/InitiateCall", "Error when trying to close manager.", e);
        if (me != null) {
            try {
                manager.close(me.getUriString());
            } catch (Exception ee) {
                Log.i("WalkieTalkieActivity/InitiateCall",
                        "Error when trying to close manager.", ee);
                ee.printStackTrace();
            }
        }
        if (call != null) {
            call.close();
        }
    }
}
}

public class IncomingCallReceiver extends BroadcastReceiver {
public static final String TAG = "IncomingCallReceiver";

/**
 * Processes the incoming call, answers it, and hands it over to the
 * WalkieTalkieActivity.
 * @param context The context under which the receiver is running.
 * @param intent The intent being received.
 */
@Override
public void onReceive(Context context, Intent intent) {
    Log.d(TAG,"************************* Incoming call received.....");
    SipAudioCall incomingCall = null;
    try {

        SipAudioCall.Listener listener = new SipAudioCall.Listener() {
            @Override
            public void onRinging(SipAudioCall call, SipProfile caller) {
                try {
                    call.answerCall(30);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };

        WalkieTalkieActivity wtActivity = (WalkieTalkieActivity) context;

        incomingCall = wtActivity.manager.takeAudioCall(intent, listener);
        incomingCall.answerCall(30);
        incomingCall.startAudio();
        incomingCall.setSpeakerMode(true);
        if(incomingCall.isMuted()) {
            incomingCall.toggleMute();
        }

        wtActivity.call = incomingCall;

        wtActivity.updateStatus(incomingCall);

    } catch (Exception e) {
        if (incomingCall != null) {
            incomingCall.close();
        }
    }
}

}

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.android.sip"
android:versionCode="1"
android:versionName="1.0" >

<application android:icon="@drawable/icon" android:label="SipDemo">
  <activity android:name=".WalkieTalkieActivity"
      android:configChanges="orientation|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".SipSettings" android:label="set_preferences"/>

    <receiver android:name=".IncomingCallReceiver" android:label="Call Receiver"/>
</application>
<uses-sdk android:minSdkVersion="9" />
<uses-permission android:name="android.permission.USE_SIP" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />

<uses-feature android:name="android.hardware.sip.voip" android:required="true" />
<uses-feature android:name="android.hardware.wifi" android:required="true" />
<uses-feature android:name="android.hardware.microphone" android:required="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T01:54:28.203

我在 Manifest.xml 中列出了一些功能和权限，希望对您有所帮助。

```
<uses-feature android:name="android.software.sip" android:required="false" />
<uses-feature android:name="android.software.sip.voip" android:required="false" />
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-permission android:name="android.permission.CONFIGURE_SIP" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

# google-app-engine - GAE DATASTORE 选择 __KEY__

> ID：14915457
> 
> 赞同：1
> 
> 时间：2013-02-16T21:45:08.907
> 
> 标签：google-app-engine, google-cloud-datastore

当我执行以下查询以获取**KEY**时，我得到空值。以下是查询：

```
g_keys = db.GqlQuery("SELECT __KEY__ FROM greeting") 
```

以下是 Greeting DB 对象中的实体：

```
Key Write Ops      ID   Key Name author comment     date            source
aglkZXZ-...  11    11  None      None   COMMENT1    2013-02-16      twitter
glkZXZ-...   11    12  None      None   COMMENT2    2013-02-17      facebook 
```

这是模型定义：

```
class Greeting(db.Model):

  author = db.UserProperty()
  comment = db.StringProperty(multiline=True)
  source = db.StringProperty(multiline=False)
  date = db.DateTimeProperty(auto_now_add=True) 
```

请让我知道我做错了什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:54:42.167

对于仅键查询，您必须使用 key_only 参数。

```
g_keys = Greeting.all(keys_only=True) 
```

顺便说一句：在您的查询中，您使用问候语，但您的模型名称是 Greeting

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:24:18.453

我认为你应该使用

```
__key__ (lowercase) 
```

此处的示例[https://developers.google.com/appengine/docs/python/datastore/gqlreference?hl=en](https://developers.google.com/appengine/docs/python/datastore/gqlreference?hl=en)

```
SELECT __key__ FROM Person WHERE age = NULL 
```

# android - 类型 Environment 的方法 getExternalFilesDir() 未定义？

> ID：14915460
> 
> 赞同：2
> 
> 时间：2013-02-16T21:45:11.113
> 
> 标签：android, environment

我用的安卓版本是4.2

我想通过使用这个来获取存储文件的路径

```
String file = Environment.getExternalFilesDir() + "/"+title+".zip" 
```

我收到此错误：

```
The method getExternalFilesDir() is undefined for the type Environment 
```

但是，Environment 类确实有这个方法，为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:52:29.687

`getExternalFilesDir()`是一种方法`Context`。

[环境](http://developer.android.com/reference/android/os/Environment.html)有其他方法，但不是那个。

[这个答案](https://stackoverflow.com/a/10124040/752320)也解释了它们之间的区别。

# c - C - 你如何调用链表中的第一个元素？

> ID：14915462
> 
> 赞同：-2
> 
> 时间：2013-02-16T21:45:25.853
> 
> 标签：c, linked-list, insertion-sort

我试图让一个链表进行排序，然后能够显示它。我的代码的问题是，我可以在排序之前显示它，但是排序之后它不会显示，它会崩溃。我认为它与“top”变量有关，因为通过调试，它不包含任何内容。如何调用链表中的第一个元素并使用它来显示它们？我真的很困惑。下面只是显示和排序功能。

```
//Sort and display all employees
void displayAllEmps()
{
if(numEmps == 0)
{
    printf("No employees are hired.");
    fflush(stdout);
}
else
{
    char output[80];
    struct EMP* emp = top;

    int i;
    for(i = 1; i < numEmps; i++)
    {
        if (emp != NULL)
        {
            displayEmployee(emp, output);

            printf("%s", output);
            fflush(stdout);
        }
        emp = emp -> next;
    }

}
}

//Sort function to call insertion sort function
void sortEmps()
{
temp = NULL;
struct EMP* next = top;

while(temp != NULL)
{
    next = top -> next;
    insert(temp);
    temp = next;
}

top = temp;
}

//Insertion sort function
void insert(struct EMP *emp)
{
prev = NULL;
current = temp;

while (current != NULL && current->id < emp->id)
{
    prev = current;
    current = current->next;
}

if (prev == NULL)
{
    temp = emp;
}
else
{
    emp -> next = prev -> next;
    prev -> next = emp;
}
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:50:14.320

您的“排序”函数除了将列表的头部设置为“NULL”之外什么都不做，因此您实际上根本没有列表。`while`循环永远不会进入，因为最初`temp`定义为`NULL`，所以`temp != NULL`不可能是真的。你然后设置`top = temp;`，所以现在`top = NULL`。

# c++ - CIN 循环不工作

> ID：14915465
> 
> 赞同：1
> 
> 时间：2013-02-16T21:45:37.230
> 
> 标签：c++, while-loop, cin

编辑：

```
Ctrl-D 
```

终止 linux 中的缓冲区。

```
Ctrl-Z 
```

在 Windows 中。

我应该添加我使用Linux。我使用 g++。

现在，我正在通过 C++ Primer Edition 4 学习 C++。

在一个示例中，给出了以下代码：

```
#include <iostream>
    int main()
    {
        int sum = 0, value;
        // read till end-of-file, calculating a running total of all values read
        while (std::cin >> value)
            sum += value; // equivalent to sum = sum + value
        std::cout << "Sum is: " << sum << std::endl;
        return 0;
     } 
```

现在，我输入“3 4 5 6”，然后按回车，我得到的只是一个换行符，例如：

```
1 2 3 4 5
Blank line 
```

根本没有输出。

我拒绝使用我还没有学过的概念，到目前为止我不知道`cin.METHOD`函数，所以有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:47:50.397

输入和输出被缓冲。通过在控制台中按`Ctrl`+来结束输入以终止循环。`Z`

或从文件中读取：

```
echo '1 2 3 4 5' > foo.txt
./your-program < foo.txt 
```

或者通过管道从标准输入中读取：

```
echo '1 2 3 4 5' | ./your-program 
```

或者：

```
./your-program <<< '1 2 3 4 5' 
```

（取决于您使用的终端模拟器。）

# php - 如何获取上传文件的客户端路径

> ID：14915470
> 
> 赞同：0
> 
> 时间：2013-02-16T21:46:12.203
> 
> 标签：php, javascript

我有一个上传文件的表单，我需要获取文件的客户端路径吗？
我可以从 php 数组 $_FILES 获得的服务器路径

```
$_FILES["UploadFileName"]["tmp_name"] 
```

如何获取存储在客户端计算机上的文件的客户端路径？

```
<form method="POST" action="upload.php" enctype="multipart/form-data">
    <p>File to upload : <input type ="file" name = "UploadFileName"></p><br />
    <input type = "submit" name = "Submit" value = "Press THIS to upload">
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T21:46:45.883

你不能。这是一个安全问题，浏览器不会向您提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:47:50.000

> 如何获取存储在客户端计算机上的文件的客户端路径？

出于安全原因**不允许**这样做。如果可能，攻击者可以获得有关文件/文件夹在客户端计算机上的结构的信息。用户机器上的任何**完全受信任的代码**都可以做到这一点。所以你的目标是说服用户安装一些可以为你提供信息的东西。

对于 Windows（都需要某种安装）：

*   ActiveX 控件
*   本机EXE
*   本地安装的托管 EXE
*   本地安装的 HTA 仅适用于 IE

# c# - Directory.GetFiles() 不适用于“。”模式

> ID：14915473
> 
> 赞同：9
> 
> 时间：2013-02-16T21:46:14.290
> 
> 标签：c#, .net, directory

当我将以下行添加到我的 WPF 应用程序中时，我遇到了一些奇怪的问题。

```
private void button1_Click(object sender, RoutedEventArgs e)
{

    foreach(string files in Directory.GetFiles(path,".",SearchOption.TopDirectoryOnly))
      tb_FileBrowse.Text = files;

} 
```

问题是，在**FrameWork 3.5**中，上述方法什么都不做，甚至没有错误，但如果我将其更改为**FrameWork 4.5** ，它就可以工作了！另外，如果我使用**Framework 3.5**并将其更改为 ConsolApp 像这样

```
foreach (string files in Directory.GetFiles(path, ".", SearchOption.TopDirectoryOnly))
{
   Console.WriteLine("{0}",files);
} 
```

代码给出了一些结果。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T22:03:54.763

我尝试了这个并得到了相同的结果。使用 Resharper 深入研究 API 源代码会发现 .NET 3.5 和 4.5 版本的 Directory.GetFiles 完全不同。

特别是 .NET 4.5 版本包含此功能（而 .NET 3.5 没有）：

```
private static string NormalizeSearchPattern(string searchPattern)
{
  string searchPattern1 = searchPattern.TrimEnd(Path.TrimEndChars);
  if (searchPattern1.Equals("."))
    searchPattern1 = "*";
  Path.CheckSearchPattern(searchPattern1);
  return searchPattern1;
} 
```

这就解释了为什么“。”的搜索模式。适用于 .NET 4.5 但不适用于 3.5。

为了兼容性，您应该使用 '*' 或 '*.*'。

# wpf - 是否可以在 GridView 模式下隐式设置 WPF ListView 的样式？

> ID：14915476
> 
> 赞同：4
> 
> 时间：2013-02-16T21:46:39.140
> 
> 标签：wpf, styles, skinning

我可以轻松地在基本（非 GridView）模式下“隐式”设置 ListView 的样式，但我尝试在 GridView 模式下隐式设置 ListView 的样式却惨遭失败。下面的工作是因为我明确设置了第二个 ListView 的 Style 和 ItemContainerStyle。如果您删除这两个设置，则第二个 ListView 不会像第一个那样获得隐式样式。似乎一个基本的 ListView 需要一个 ContentPresenter，而一个 GridView ListView 需要一个 GridViewRowPresenter。

我在这里遇到了 WPF 砖墙吗？这甚至可能吗？如果没有，它会降低创建应用程序外观的健壮性，因为现在您的用户必须知道在 GridView 模式下显示的 ListView 上显式设置 Style 和 ItemContainerStyle。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:system="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="ListView">
            <Setter Property="Background" Value="Lime"/>
        </Style>
        <Style TargetType="ListViewItem">
            <Setter Property="Background" Value="Yellow"/>
            <Setter Property="Template">
              <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Grid>
                      <ContentPresenter x:Name="ContentHost" Margin="{TemplateBinding Padding}"
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Grid>
                </ControlTemplate>
              </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="{x:Static GridView.GridViewStyleKey}"
               TargetType="{x:Type ListView}">
            <Setter Property="Background" Value="Lime"/>
        </Style>
        <Style x:Key="{x:Static GridView.GridViewItemContainerStyleKey}"
               TargetType="{x:Type ListViewItem}">
            <Setter Property="Background" Value="Yellow"/>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <ListView x:Name="_listView1">
            <system:String>Item 1</system:String>
            <system:String>Item 2</system:String>
            <system:String>Item 3</system:String>
        </ListView>

        <ListView x:Name="_listView2" Grid.Column="1" 
                  Style="{StaticResource {x:Static GridView.GridViewStyleKey}}"
                  ItemContainerStyle="{StaticResource {x:Static GridView.GridViewItemContainerStyleKey}}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Date"/>
                    <GridViewColumn Header="Day of Week" DisplayMemberBinding="{Binding DayOfWeek}" />
                    <GridViewColumn Header="Year" DisplayMemberBinding="{Binding Year}" />
                </GridView>
            </ListView.View>
            <system:DateTime>1/1/2010</system:DateTime>
            <system:DateTime>1/1/2011</system:DateTime>
            <system:DateTime>1/1/2012</system:DateTime>
        </ListView>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T10:24:16.093

我遇到了与您在上面描述的相同的奇怪/棘手的问题，并遇到了一篇博客文章，该文章建议了一个简洁的小黑客/修复，这似乎提供了您所追求的行为。如果链接失效，则重复要点。

`ListView`如果您想使用`GridViews`;覆盖视图，您已经描述了样式的奇怪要求。一个基本`ListView`需要一个`ContentPresenter`，一个`GridView ListView needs`一个`GridViewRowPresenter`。

海报设法通过在他的风格中包含两个演示者来解决这个问题，并仅在需要时使用 a`Setter`来显示。`ContentPresenter`

因此，您`ControlTemplate`可以按照这些方式实现一些东西（根据需要添加额外的样式属性）：

```
<ControlTemplate TargetType="{x:Type ListBoxItem}">
    <!-- Pair of presenters -->
    <Grid>
        <GridViewRowPresenter x:Name="gridrowPresenter"
                Content="{TemplateBinding Property=ContentControl.Content}"/>
        <ContentPresenter x:Name="contentPresenter"
                Content="{TemplateBinding Property=ContentControl.Content}"  Visibility="Collapsed"/>
    </Grid>
    <!-- Visibility Controlling Setter -->
    <ControlTemplate.Triggers>
        <Trigger Property="GridView.ColumnCollection" Value="{x:Null}">
            <Setter TargetName="contentPresenter" Property="Visibility" Value="Visible"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

`GridViewRowPresenter`和都`ContentPresenter`出现在样式中，但`ContentPresenter`隐藏了 ( `Visibility="Collapsed"`)。

巧妙的技巧是使用`Trigger`on `GridView.ColumnCollection`; 如果此值为 null（当`GridViewRowPresenter`没有内容时发生），则`ContentPresenter`将变为可见，正确显示您的正常`ListView`内容）。将`GridViewRowPresenter`没有内容，因此不会显示任何冲突的视觉效果。

如果`GridView`有内容，它将被显示（提供正确的行格式），并且`ContentPresenter`将保持隐藏。

原始博客条目： http: [//www.steelyeyedview.com/2010/03/contentpresenter-gridviewrowpresenter.html](http://www.steelyeyedview.com/2010/03/contentpresenter-gridviewrowpresenter.html)

# linux - 如何在linux中创建不可读的文件

> ID：14915482
> 
> 赞同：0
> 
> 时间：2013-02-16T21:46:55.947
> 
> 标签：linux, system, ubuntu-12.04, system-administration

我有一个配置文件，想让其他人无法读取该文件。

可以用它做什么？

加密是一种方法，但加密使文件在 Linux 平台上可卸载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:48:00.397

只需删除其他人的可读模式位

```
chmod o-r file.txt 
```

或在创建时适当地设置 umask

```
umask 027 
```

当您创建新文件时，这会关闭`w`组的位和其他人的位。`rwx`

如果它应该只对软件可读，您可以将权限设置为

```
chmod 0400 file.conf 
```

或使用 umask

```
umask 0377 
```

这与`-r--------`. 为此，该文件必须具有与读取它的软件进程相同的用户 ID。

# node.js - 如何在我的 Express 路线中允许使用斜线？

> ID：14915496
> 
> 赞同：29
> 
> 时间：2013-02-16T21:48:37.353
> 
> 标签：node.js, express

我正在尝试以`/2013/02/16/title-with-hyphens`. 我想使用路由参数。如果我尝试以下路线：

```
app.get('/:href', function(req, res) { }); 
```

...然后我得到一个 404，大概是因为 Express 只在寻找一个参数，并且认为有 4 个。

我可以使用 来解决它`/:y/:m/:d/:t`，但这会迫使我的永久链接永久采用这种形式。

如何获取包含斜杠的路由参数？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-06-23T12:32:37.027

似乎`app.get("/:href(*)", ...)`工作正常（至少在 Express 4 中）。你会得到你的参数值`req.params.href`。

它也会被`/`路由触发，这可能不是你想要的。`app.get('/', ...)`您可以通过在应用程序的其他位置进行设置或显式检查空字符串来避免它。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-16T22:03:01.473

使用正则表达式而不是字符串。

```
app.get(/^\/(.+)/, function(req, res) {
    var href = req.params[0]; // regexp's numbered capture group
}); 
```

* * *

请注意，您不能使用字符串语法 ( )，因为 Express 只允许在路由字符串中使用一小部分正则表达式，并且它使用这些正则表达式作为对路由的*特定组件*`app.get('/:href(.+)')`的条件检查。它不会捕获条件中的匹配内容，也不允许您跨组件（由斜杠分隔的 URL 部分）进行匹配。

 *例如：

```
app.get('/:compa([0-9])/:compb([a-z]/') 
```

此路由仅在第一个组件 ( compa ) 是单个数字且第二个组件 ( *compb* ) 是单个字母 az*时匹配。*

`'/:href(.+)'`说“仅当内容为任何内容时才匹配第一个组件”，这没有多大意义；无论如何，这是默认行为。此外，如果您检查[source](https://github.com/visionmedia/express/blob/3.1.0/lib/utils.js#L262-282)，您会发现 Express 实际上是在将该条件中的点强制为文字。

例如，`app.get('/:href(.+)')`实际上编译成：

```
 /^\/(?:(\.+))\/?$/i 
```

请注意，您`.`已转义，因此此路线将仅匹配一个或多个句点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T22:03:57.060

您可以使用正则表达式路由来做到这一点

```
app.get('/:href(\d+\/\d+\/\d+\/*)', function(req, res) { }); 
```

我不知道正则表达式是否正确，但你明白了

编辑：

我不认为上述工作，但这确实

```
app.get(/^\/(\d+)\/(\d+)\/(\d+)\/(.*)/, function(req, res) { }); 
```

去`http://localhost:3000/2012/08/05/hello-i-must-be`收获`req.params = [ '2012', '08', '05', 'hello-i-must-be' ]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-14T06:02:25.320

如果您的参数中包含斜杠，您可以使用它

```
app.get('/:href(*)', function(req, res) { ... }) 
```

这个对我有用。就我而言，我使用了诸如`ABC1/12345/6789(10)`.
希望这有用。*

# qt - 创建一个 QPainter 对象并在paintEvent中使用它

> ID：14915497
> 
> 赞同：4
> 
> 时间：2013-02-16T21:48:49.413
> 
> 标签：qt, qt4, qt5, qpainter

> QPainter 的常见用途是在小部件的绘制事件中：构造和自定义（例如设置钢笔或画笔）画家。然后画。记得在绘制后销毁 QPainter 对象。

这是来自 QPainter 类参考。如果我在构造函数中创建一个 QPainter 对象并在 paintEvent 中使用会怎样。这是否有任何隐藏的问题或一切都会好起来的？在我的程序中需要将 QPainter 传递给另一个 Painter 对象。当然，所有的绘画都是由paintEvent完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T22:12:40.387

是的，您可以在类的构造函数中创建一个`QPainter`对象，以便以后在类的函数中使用。然后，您必须在使用它绘制之前和之后调用`begin()`和`end()`函数`QPainter`，这是将绘制器与 a 关联`QPaintDevice`并释放绘制期间分配的任何资源。

# html - HTML 输入并使用用户输入创建 iFrame URL？

> ID：14915498
> 
> 赞同：0
> 
> 时间：2013-02-16T21:48:50.627
> 
> 标签：html

如何获取以下提示并使用用户在提示中键入的内容并将其转换为 iFrame URL，如下所示：

```
<iframe src="http://www.weather.com" sandbox="" seamless="" width="100%" height="200 </iframe>

<html>
<head>
<script>
function disp_prompt()
 {
var sitename=prompt("Please enter your Website:","www.anywebsite.com")
document.getElementById("msg").innerHTML="Your Site: " + sitename
}
</script>
</head>
<body>

<input type="button" onclick="disp_prompt()" value="Click to enter in Website URL">
<br><br>

<div id="msg"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:57:45.980

```
<html>
<head>
<body>

<iframe id="iframeID" src="http://www.weather.com" sandbox="" seamless="" width="100%" height="200"></iframe>
    <form name="FormInput" action="" method="get" id="input" onsubmit="document.getElementById('iframeID').src=document.FormInput.site.value;">
 Website URL: 
<input type="text" name="site"/>
<br/>
<br/>
<input type="submit" value="Submit"/>
<br/>
</form>

<div id="msg"></div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T19:35:17.383

在 Youtube、Vimeo 上工作

希望能帮助到你：

[单击此处运行脚本](http://jsfiddle.net/RxeZd/)

```
function createIFrame(url, width, height){

switch(url.substring(7,12)){
    case "www.y":
        return url.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g, '<iframe width="'+width+'" height="'+height+'" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>');       
        break;
    case "youtu":
         return url.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g, '<iframe width="'+width+'" height="'+height+'" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>');       
        break;
    case "vimeo":
        return url.replace(/(?:http:\/\/)?(?:www\.)?(?:vimeo\.com)\/(?:\/\?)?(.+)/g, '<iframe width="'+width+'" height="'+height+'" src="http://player.vimeo.com/video/$1" frameborder="0" allowfullscreen></iframe>');
        break;
} 
```

}

# c++ - C ++没有构造函数“Card :: Card”的实例与参数列表匹配

> ID：14915500
> 
> 赞同：0
> 
> 时间：2013-02-16T21:49:24.713
> 
> 标签：c++, class, constructor

**这是我的 Card 结构头文件：**

```
#include "stdafx.h"
enum Suits {clubs, diamonds, hearts, spades};
enum Ranks {two = 2, three, four, five, six, seven, eight, nine, ten, jack, queen, king, ace};

struct Card {   
    Card (Suits suit, Ranks rank);
private:
    Suits suit_;
    Ranks rank_;
}; 
```

**我在我的 cpp 中初始化 Card 成员变量：**

```
#include "stdafx.h"    
#include "Card.h"
#include "Header.h"

using namespace std;

Card::Card (Suits suit, Ranks rank) : suit_(suit), rank_(rank) {} 
```

**现在，我正在尝试在一个函数中解析一堆卡定义字符串，例如 2C、3h、7s、10h**

```
int FileParsing(vector<Card> & v, char * FileName) {
    ... //omiting the details, basically open FileName, parse card definition strings
    //After I finish parsing 10h, I tried to push it back
    v.push_back(Card(ten, hearts)); //got an error here
    ... 
    return 0;
} 
```

**我的怀疑是卡片（西装，等级）中的类型冲突，但我不确定。任何输入将不胜感激！！！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:52:51.057

```
v.push_back(Card(ten, hearts)); //got an error here 
```

这一定不是

```
v.push_back(Card(hearts, ten)); 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:53:14.340

您的构造函数采取诉讼然后排名。

```
Card::Card (Suits suit, Ranks rank) : suit_(suit), rank_(rank) {} 
```

当您在此处创建参数时，您的参数是向后的。

```
v.push_back(Card(hearts, ten)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:53:19.677

```
v.push_back(Card(ten, hearts)); //got an error here 
```

应该写成：

```
v.push_back(Card(hearts, ten)); //fixed 
```

因为第一个参数`Card`应该是`Suits`，第二个应该是`Ranks`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T21:53:28.250

如果`ten`and`hearts`是相应的类型`Suits`，`Ranks`那么看起来您的构造函数参数的顺序错误。构造函数是`Card(Suits, Ranks)`，但您正试图调用`Card(Ranks,Suits)`. 切换您的构造函数参数，它应该可以工作。

# php - 从浏览器 url 中检索 id？

> ID：14915508
> 
> 赞同：-1
> 
> 时间：2013-02-16T21:50:17.203
> 
> 标签：php, url, get

大家好，我有这样的浏览器网址

```
www.test.com/?category=3D&page=0 
```

我想让这个网址像

```
www.test.com/category/3D/0 
```

在核心 php 中，但是当我这样做时，如何`value 3D and o`从 url 检索。请帮助我！

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:55:31.307

您可以使用 Apache mod_rewrite 来实现这一点。在您的情况下，以下 .htaccess RewriteRule 可以完成这项工作。要获得更好的概述，请参阅此[页面](http://www.sitepoint.com/guide-url-rewriting/)

```
RewriteEngine on
RewriteRule ^/category/([A-Z0-9]+)/([0-9]+) /index.php?category=$1&page=$2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:53:00.760

您需要使用 htaccess 文件设置 url 重写，然后您可以访问 $_GET['category'] 之类的变量，即使 url 类似于 www.test.com/category/3D/0

# java - 无法在具体位置插入元素和无限循环

> ID：14915511
> 
> 赞同：0
> 
> 时间：2013-02-16T21:50:43.163
> 
> 标签：java, arrays, infinite-loop

我试图在二维数组中包含一个字符，问题是，当我为元素编写位置时，代码似乎忽略了它，默认情况下位置为 0、0。这是该方法的代码：

```
public boolean placePiece(int row, int col, char piece)
{
    setPos(x, y);
    setPiece(piece);
    if (piece != 'K' && piece != 'C')
        return false;   
    else {
        board[x][y] = piece;
        return true;
    }
} 
```

方法 setPos() 的代码

```
private void setPos(int x, int y)
{
    this.x = x;
    this.y = y;

    if (x >= size && y >= size)
    {
        System.out.println("Out of range.");
    }

} 
```

除了正在发生的奇怪事情之外，我在执行另一种方法时也会出现无限循环。此方法计算所选行中的所有“K”并将结果打印给用户。

```
 this.line = line;
    this.number = number;
    int counter = 0;
    if (line == 'r' || line == 'R')
        for (int j = 0; j < size; j++) {
            while (board[number][j] == 'K')
            {
                counter += 1;
                System.out.println("You've found " + counter + " keys!");
            }
            if (board[number][j] != 'K')
            {
                System.out.println("Try again, you haven't found any key yet.");
            }
        } 
```

不知道如何摆脱 while 并引入另一种结构。

希望你能帮助我，提前问候和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:55:31.523

替换`while`为`if`

```
for (int j = 0; j < size; j++) {
   if( board[number][j] == 'K') {
      ++counter;
   }
}
System.out.println("You've found " + counter + " keys!"); 
```

# c# - 使用 WPF 组合框的运行时错误

> ID：14915515
> 
> 赞同：0
> 
> 时间：2013-02-16T21:51:03.837
> 
> 标签：c#, wpf, combobox

我想要做的是使组合框中的特定字符串成为选定索引。组合框的内容是目录中文件的文件名。这是一个可编辑的组合框。所以我做了

```
private void InitComboBoxProfiles()
{
    string appDataPath1 = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    string configPath1 = appDataPath1 + "/LWRF/ReaderProfiles";
    string[] files = Directory.GetFiles(configPath1);
    foreach( string fn in files)
    {
        ComboBoxProfiles.Items.Add(fn);

    }
    int index = -1;
    foreach (ComboBoxItem cmbItem in ComboBoxProfiles.Items) //exception thrown at this line
    {
        index++;
        if (cmbItem.Content.ToString() == "Default.xml")
        {
            ComboBoxProfiles.SelectedIndex = index;
            break;
        }
    }

} 
```

例外：

> 无法将 System.String 类型的对象转换为 System.Windows.Controls.ComboBoxItem

我如何实现我的目标？谢谢，萨罗杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:52:42.570

由于 ComboBox 项目是字符串，您可以简单地将[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)属性设置为所需的字符串：

```
ComboBoxProfiles.SelectedItem = "Default.xml"; 
```

* * *

请注意，这会自动将`SelectedIndex`属性设置为正确的值，`SelectedItem`并且`SelectedIndex`始终保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:55:48.787

`ComboBox`Items 是`string`type 。将您的代码更改为：

```
foreach (string cmbItem in ComboBoxProfiles.Items) 
    {
        index++;
        if (cmbItem == "Default.xml")
        {
            ComboBoxProfiles.SelectedIndex = index;
            break;
        }
    } 
```

并且比循环更好：

```
ComboBoxProfiles.SelectedIndex = ComboBoxProfiles.Items.IndexOf("Default.xml"); 
```

# objective-c - 移动到 NSArray 中的每个位置后执行 CCAction

> ID：14915521
> 
> 赞同：1
> 
> 时间：2013-02-16T21:51:45.177
> 
> 标签：objective-c, cocos2d-iphone

现在我有一个 NSArray 包含我希望精灵跟随的平铺坐标。Sprite 将“跳转”到每个坐标并在移动到数组中的下一个坐标之前执行 CCAction。我不确定如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:23:48.147

使用 CCSequence，您可以为要到达的每个点生成一个动作。我的示例假设您正在包装 CGPoint，它非常具有指示性，它可能不会按照您的要求进行操作，但这只是为了给您一个想法：

```
// I suppose that you wrapped CGPoint with an object able to return the x and y coordinates.
// points contains all these coordinate objects.
NSMutableArray* actions= [[NSMutableArray alloc]initWithCapacity: points.count];
for(NSUInteger i=0; i<points.count; i++)
{
    id coordinate= points[i];
    CGPoint point= CGPointMake(coordinate.x, coordinate.y);
    // Change this code to whatever is needed to initialize the point.
    CCMoveTo* move= [CCMoveTo actionWithDuration: duration position: point];
    // I suggest to compute duration in a way that it depends from the speed, so
    // that the sprite moves with constant speed.
    [actions addObject: move];      
}
CCSequence* sequence= [CCSequence actionsWithArray: actions];
[sprite runAction: sequence]; 
```

我已经直接在浏览器中输入了，我只是希望没有语法错误，在这种情况下让我知道。

# actionscript-3 - 不使用 Flex 的 ActionScript 弹出窗口

> ID：14915537
> 
> 赞同：0
> 
> 时间：2013-02-16T21:53:21.953
> 
> 标签：actionscript-3, popupwindow

有没有什么方法可以使用纯ActionScript弹出一个类似于Flex中PopupManager创建的窗口？弹出窗口时，背景应该是灰色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:37:30.970

这就是我最终得到的：

```
import flash.display.DisplayObjectContainer;
import flash.display.Sprite;

import screens.GameScreen;

/**
 * The PopUpManager is used to pop up a dialog.
 * <p>
 * Usage:
 * <p>
 * <code>
 * var dialog:Sprite = ... // initialize a Sprite
 * // To pop up
 * PopUpManager.openPopUp(stage, dialog);
 * // To close the pop-up
 * PopUpManager.removePopUp();
 * </code>
 */
public final class PopUpManager
{
    private static var instance:PopUpManager;
    private static var dialog:Sprite;
    private static var curtain:Sprite;

    /**
     * @param parent The parent of this pop up window. If it is other display object other than stage,
     * only that display object will be dimmed.
     * @param dialog The dialog to be popped up.
     */
    public static function openPopUp(parent:DisplayObjectContainer, dialog:Sprite, modal:Boolean):void
    {
        if(curtain == null) {
            // Init the curtain to dim the screen or part of the screen
            curtain = new Sprite();
            curtain.graphics.beginFill(0xFFFFFF,.4);
            curtain.graphics.drawRect(0,0,parent.width/GameScreen.dpiScale,parent.width/GameScreen.dpiScale);
            curtain.graphics.endFill();
        }
        curtain.mouseEnabled = modal;
        parent.addChild(curtain);
        PopUpManager.dialog = dialog;
        curtain.addChild(dialog);
    }

    public static function removePopUp():void
    {
        curtain.removeChild(PopUpManager.dialog);
        curtain.parent.removeChild(curtain);
    }
} 
```

# ios - 从 CLLocationCoordinates2D 获取 NSTimeZone

> ID：14915540
> 
> 赞同：1
> 
> 时间：2013-02-16T21:53:33.267
> 
> 标签：ios, objective-c, nstimezone

我想要当前时间`CLLocationCoordinate2D`。

例如，我在东海岸的一个城市，应该知道加利福尼亚偏远地区的时间。我有 CLLocationCoordinate2D。既不`CLLocation`也不`CLPlacemark`给我`NSLocale`或`NSTimeZone`。有没有办法在不使用 3rd 方服务的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T14:07:53.383

查看这个 GitHub 项目：[https](https://github.com/Alterplay/APTimeZones) ://github.com/Alterplay/APTimeZones 。

它有助于 NSTimeZone 和 CLLocation。

# qt - 将 Qt3D 与 Qt5 一起使用

> ID：14915541
> 
> 赞同：4
> 
> 时间：2013-02-16T21:53:36.160
> 
> 标签：qt, qt5, qt3d

我正在尝试将 Qt3D 库与 Qt5 一起使用。

我按照以下步骤操作：

*   我已经在这个路径上安装了 Qt5（在 Arch Linux 64 位上）：`/Qt5.0.0`
*   我已经克隆了`git://gitorious.org/qt/qt3d.git`
*   我已经构建了 qt3d ( `/Qt5.0.0/5.0.0/gcc_64/lib/qmake`, `make`, `make install`)

现在我在正确的地方有正确的文件，如果我手动添加

```
 LIBS += -L/Qt5.0.0/5.0.0/gcc_64/lib/ -lQt53D
   INCLUDEPATH += /Qt5.0.0/5.0.0/gcc_64/include/Qt3D/
   DEPENDPATH += /Qt5.0.0/5.0.0/gcc_64/include/Qt3D/ 
```

在我的 .pro 文件中，我可以包含 Qt3D 标头（如`qglabstractscene.h`）。

不幸的是，我仍然无法编译该项目，因为库代码将自己称为 Qt3D 的一部分：

```
#include <Qt3D/qt3dglobal.h> 
```

有没有办法让 Qt 理解一个`INCLUDEPATH`是 Qt 模块？任何建议表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T22:25:22.000

问题一定与QtCreator有关。

使用 qmake 直接构建库成功，而使用 QtCreator 失败。

添加

```
QT += 3d 
```

也有效

# css - CSS：多个背景的 Z-index

> ID：14915542
> 
> 赞同：8
> 
> 时间：2013-02-16T21:53:44.540
> 
> 标签：css

我想通过多个背景创建边框并发现了一个问题。我需要对每个背景应用优先级，因为它们中的许多是相互重叠的。

是否有任何 css 属性来设置每个背景的 z-index？

```
left-top-corner(z-index:2) top(repeat-x) right-top-corner(z-index:2)
left(repeat-y)
left-bottom-corner(z-index:2) bottom(repeat-x) right-bottom-corner(z-index:2) 
```

像那样。

就像是：

```
background-z-index:2,1,2 .. etc. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T22:01:32.867

没有 z-index，但有一个堆叠顺序。这有点违反直觉，但是您指定的第一个图像将按堆叠顺序（与 HTML 元素相反）位于顶部（随后的图像将在其下方）。更多信息在这里：

[http://css-tricks.com/stacking-order-of-multiple-backgrounds/](http://css-tricks.com/stacking-order-of-multiple-backgrounds/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:10:13.503

背景图像没有 z-index。z-index 仅适用于单个元素，不适用于这些元素的属性。

# jquery - 具有 fullCalendar 预设小时的日期时间选择器

> ID：14915543
> 
> 赞同：3
> 
> 时间：2013-02-16T21:54:05.307
> 
> 标签：jquery, fullcalendar, datetimepicker

[在http://trentrichardson.com/examples/timepicker/datetimepicker](http://trentrichardson.com/examples/timepicker/)中预设一个小时和分钟后，我有很多 bin 搜索，但我仍然无法让它工作。

```
var start = $('#eventStart').datetimepicker({

     dateFormat: "yy-mm-dd",
     hour: 12,
     minute: 15,
     stepMinute: 15
}); 
```

我的 inputfeald 很普通

我的问题是如何从我的 fullCalendar 中设置当前选择的日期，例如 12:15

```
select: function(start, end, allvDay) {

     $('#eventStart').datepicker("setDate", new Date(start));
     $('#eventEnd').datepicker("setDate", new Date(end));
     $myCalendar.fullCalendar('unselect');
     $("#calEventDialog").dialog("option", "title", "Add Event");
     $('#calEventDialog').dialog('open');

  }, 
```

我在萤火虫中得到这个打印“解析日期字符串时出错：在日期中找到额外/未解析的字符：12:15”

任何可以帮助我的人，

//托比亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:25:32.820

我猜是你的问题`date time format`。

日期时间选择器功能采用您提供的小时和分钟，在解析日期时，您没有在`format`.

请尝试更改您的`date format to "yy-mm-dd HH:mm"`

# java - tomcat热部署war文件到现场

> ID：14915545
> 
> 赞同：1
> 
> 时间：2013-02-16T21:54:12.173
> 
> 标签：java, tomcat, deployment, tomcat7, war

从[这个博客](http://agoodcoder.blogspot.co.uk/2011/03/tomcat-7-hot-deploy-rolling-upgrade.html)：

> 您需要做的就是
> 
> 1.  保持您的旧应用程序 foo.war 不受影响
>     
>     
> 2.  将新版本的应用程序命名为 foo##0001.war 并上传到 webapps 文件夹
>     
>     
> 
> 旧会话将使用 foo.war，新用户将使用 foo##0001.war。

这是在不重新启动网络服务器的情况下部署新版本应用程序的最佳方式吗？字符串是否正确，`myApp.war`将替换为`myApp##0001.war`，字符串似乎相当不寻常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:04:31.313

根据[Tomcat 7 文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)：

> 出于性能原因和允许版本控制方案的灵活性，版本组件被视为字符串。字符串比较用于确定版本顺序。如果未指定版本，则将其视为空字符串。因此，foo.war 将被视为比 foo##11.war 更早的版本，而 foo##11.war 将被视为比 foo##2.war 更早的版本。如果使用纯数字版本控制方案，建议使用零填充，以便将 foo##002.war 视为比 foo##011.war 更早的版本。

所以字符串虽然非常规似乎是预期的。

但我想知道：从 Tomcat 管理中，您可以在不重新启动 Tomcat 的情况下部署/取消部署 Web 应用程序。你不能用那个吗？

# javascript - 更改 JavaScript 日历日期

> ID：14915548
> 
> 赞同：0
> 
> 时间：2013-02-16T21:54:59.007
> 
> 标签：javascript, html

我为我的网站创建了一个 Javascript/HTML 日历。（下面的 HTML）。

```
<table width="690" cellpadding="0" cellspacing="0" border="2" bordercolor="#999999">
<tr class="week">
    <td width="98" class="dayofweek">Sunday</td>
    <td width="98" class="dayofweek">Monday</td>
    <td width="98" class="dayofweek">Tuesday</td>
    <td width="98" class="dayofweek">Wednesday</td>
    <td width="98" class="dayofweek">Thursday</td>
    <td width="98" class="dayofweek">Friday</td>
    <td width="98" class="dayofweek">Saturday</td>
</tr>
<tr class="week" valign="top">
    <td class="day" id="d1"><div class="daynumb" id="1"></div></td>
    <td class="day" id="d2"><div class="daynumb" id="2"></div></td>
    <td class="day" id="d3"><div class="daynumb" id="3"></div></td>
    <td class="day" id="d4"><div class="daynumb" id="4"></div></td>
    <td class="day" id="d5"><div class="daynumb" id="5"></div></td>
    <td class="day" id="d6"><div class="daynumb" id="6"></div></td>
    <td class="day" id="d7"><div class="daynumb" id="7"></div></td>
</tr>
<tr class="week" valign="top">
    <td class="day" id="d8"><div class="daynumb" id="8"></div></td>
    <td class="day" id="d9"><div class="daynumb" id="9"></div></td>
    <td class="day" id="d10"><div class="daynumb" id="10"></div></td>
    <td class="day" id="d11"><div class="daynumb" id="11"></div></td>
    <td class="day" id="d12"><div class="daynumb" id="12"></div></td>
    <td class="day" id="d13"><div class="daynumb" id="13"></div></td>
    <td class="day" id="d14"><div class="daynumb" id="14"></div></td>
</tr>
<tr class="week" valign="top">
    <td class="day" id="d15"><div class="daynumb" id="15"></div></td>
    <td class="day" id="d16"><div class="daynumb" id="16"></div></td>
    <td class="day" id="d17"><div class="daynumb" id="17"></div></td>
    <td class="day" id="d18"><div class="daynumb" id="18"></div></td>
    <td class="day" id="d19"><div class="daynumb" id="19"></div></td>
    <td class="day" id="d20"><div class="daynumb" id="20"></div></td>
    <td class="day" id="d21"><div class="daynumb" id="21"></div></td>
</tr>
<tr class="week" valign="top">
    <td class="day" id="d22"><div class="daynumb" id="22"></div></td>
    <td class="day" id="d23"><div class="daynumb" id="23"></div></td>
    <td class="day" id="d24"><div class="daynumb" id="24"></div></td>
    <td class="day" id="d25"><div class="daynumb" id="25"></div></td>
    <td class="day" id="d26"><div class="daynumb" id="26"></div></td>
    <td class="day" id="d27"><div class="daynumb" id="27"></div></td>
    <td class="day" id="d28"><div class="daynumb" id="28"></div></td>
</tr>
<tr class="week" valign="top">
    <td class="day" id="d29"><div class="daynumb" id="29"></div></td>
    <td class="day" id="d30"><div class="daynumb" id="30"></div></td>
    <td class="day" id="d31"><div class="daynumb" id="31"></div></td>
    <td class="day" id="d32"><div class="daynumb" id="32"></div></td>
    <td class="day" id="d33"><div class="daynumb" id="33"></div></td>
    <td class="day" id="d34"><div class="daynumb" id="34"></div></td>
    <td class="day" id="d35"><div class="daynumb" id="35"></div></td>
</tr> 
```

我创建了一个 JavaScript 函数来检查加载日期，并调用正确的函数来相应地更改月份。换句话说，日历日期将始终在变化。我需要创建一个 JS 函数来更改每个月的日期。下面是我正在使用的 JavaScript。它根本没有做任何事情。我已经在其中发表了很多评论，以向您（和我自己）展示正在发生的事情。

```
function february() { //this is the function for February
var numbdays = 28; //February has 28 days

for (var date=1 /* February starts on Day 1 */;date<=numbdays /* make sure it doesn't exceed 28 days */;date++ /* advance the date number */) { 
    for (var id=6 /* Day 1 of Feb is on the id "6" */;id<=34 /* 6+28=34, don't exceed past id "34" */;id++ /* advance the id number */) {
        var idstring = id.toString(); //I have no clue if the toStrings even need to be here.
        var datestring = date.toString();
        document.getElementById(idstring).innerHTML = datestring; //change the text to the correct date for the correct id.
    }
} 
```

} //什么都没发生...

有任何想法吗？我究竟做错了什么？

# django - 从未调用 Django 管理界面中字段的只读方法

> ID：14915549
> 
> 赞同：8
> 
> 时间：2013-02-16T21:55:05.803
> 
> 标签：django, django-admin

Django Docs[声明](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)您可以在管理界面中为只读字段输出自定义 HTML。这正是我需要的，但它似乎不起作用。

在 admin.py 中：

```
from django.contrib import admin

class ExampleAdmin(admin.ModelAdmin):
    readonly_fields = ('myfield', )

    def myfield(self, instance):
        print 'This part of the code is never reached!'
        return u'<b>My custom html for the readonly field!</b>'

    myfield.allow_tags = True

admin.site.register(State, StateAdmin) 
```

在模型.py 中：

```
class State(models.Model):
    myfield = MyCustomField()
    ... etc ...

class MyCustomField(models.TextField):
    def to_python(self, value):
        ... etc ... 
```

该字段在管理员编辑页面上显示为只读。但是，永远不会调用应该创建自定义 html 的“myfield”方法。

有人知道我做错了什么吗？

亲切的问候，

帕特里克

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T04:35:08.403

查看“django/contrib/admin/util.py”文件的`lookup_field`方法，这似乎是预期的行为。这是您正在使用的代码：

```
readonly_fields = ('myfield', ) 
```

由于`myfield`是模型中定义的实际字段，因此将其放入`readonly_fields`只会使其不可编辑；它不允许您自定义向用户显示的内容。为此，您必须提供`readonly_fields`一些不是实际字段的内容，例如`myfield_readonly`. 然后，您必须将您`ModelAdmin`的`myfield`方法重命名为`myfield_readonly`，当然，以及`myfield.allow_tags = True`. 您可能还想添加`myfield_readonly.short_description = 'My Field'`. 最后，您需要使用或将实际`myfield`字段留在表单之外。`exclude``fields`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-15T10:09:35.493

readonly 方法可能令人讨厌的另一件事是它消除了错误。所以，如果你有类似的东西

```
def readonly_field(self, instance):
    errored_calcuated_value = self.kek * instance.peck
    print('wut', errored_calcuated_value)
    return errored_calcuated_value 
```

它既不打印也不工作。

# java - 使用 JSON 和 Java 时如何映射嵌套对象和表单字段

> ID：14915553
> 
> 赞同：0
> 
> 时间：2013-02-16T21:55:40.223
> 
> 标签：java, javascript, json, parsing, nested-attributes

**错误信息**

```
org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "address" (Class entity.User), not marked as ignorable
 at [Source: org.apache.catalina.connector.CoyoteInputStream@1c6a59e0; line: 1, column: 67] (through reference chain: entity.User["address"]) 
```

**HTML**

```
<input type="text" class="" id="address" name="address" placeholder="Street"/>
<input type="text" id="postalCode" name="postalCode" placeholder="Zipcode"/></br>
<input type="text" id="city" class="" name="city" placeholder="City"/>
<input type="text" id="country" name="country" placeholder="Country"/> 
```

**地址对象有一个字段城市和邮政编码**

```
private String address;
private City cityId;
private String postalCode; 
```

**城市对象包括国家**

```
private Country countryId; 
```

**Java 脚本**

```
return JSON.stringify({
      "address": $('#address').val(),
      "postalCode": $('#postalCode').val(),
      "city": $('#city').val()
   });
$.ajax({
   type: "POST",
   contentType: "application/json",
   url: "http://localhost:8080/testSoft/webresources/entity.user/",
   dataType: "json",
   data: formToJSON(),
   success: function(response) 
```

**用户对象**

```
@Entity

@Table(name = "users")
@XmlRootElement
public class User implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 255)
    @Column(name = "username")
    private String username;
...
    @JoinColumn(name = "address_address_id", referencedColumnName = "address_id")
    @ManyToOne
    private Address addressAddressId; 
```

**问题**

将 json 对象发布到我的 Web 服务时如何处理嵌套对象？在我的情况下，地址是用户对象中的一个对象，城市是一个对象，并且城市对象中有国家对象。

# security - 即使两个应用程序都在专用网络中，是否推荐使用 https ssl？

> ID：14915557
> 
> 赞同：0
> 
> 时间：2013-02-16T21:56:14.187
> 
> 标签：security, ssl, https

如果有两个应用程序通过 http 使用 web 服务进行通信，是否建议使用 ssl，即使主机名：端口不是面向外部的？

如果可以合理地保证没有外部调用会到达这个应用程序，为什么我们仍然需要使用 ssl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:06:33.263

SSL（和 HTTPS，基本上是基于 SSL 的 HTTP）在正确配置后停止客户端和服务器之间的*所有窥探。*窥探者可以在您的组织内部也可以在组织外部。是的，内部人员不应该这样做，但它*确实*发生了，仅仅依靠网络配置来保护你是不明智的。

但是你不需要花很多钱在这上面！您可以使用内部证书颁发机构（OpenSSL 包含您需要的所有软件，即使文档和界面还有很多不足之处）并且很少有内部应用程序需要扩展很多，因此您可能不需要任何特殊硬件，例如随机数来源。保护服务器的工作量很小，对合法用户的入侵也很小，没有理由不这样做。

请记住，您永远不应该只应用一层安全性。申请多！SSL。防火墙。网络分离。记录。每个都可以防止不同类型的问题和攻击者。

# ios - Core-Plot CPTScatterPlot 数据标签

> ID：14915558
> 
> 赞同：2
> 
> 时间：2013-02-16T21:56:19.747
> 
> 标签：ios, core-plot

创建散点图时，它会自动标记图表本身的点。我觉得这很烦人，想把它关掉，因为它对我们正在做的事情没有用。有没有办法不删除所有标签？

为了清楚起见，这些显示没有添加任何注释。我想删除这个默认行为。

![在此处输入图像描述](../Images/7a65cda58f7fa0a9a0d5680956062273.png)

我想删除图中的 1、2、3、4、5、6、7 等。

这是我用来创建图表的代码。如您所见，它没有设置任何注释等。

```
 -(void) constructScatterPlot
    {
    // Create graph from theme
    graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
    [graph applyTheme:theme];
    scatterPlotView.hostedGraph = graph;

    graph.paddingLeft   = 0.0;
    graph.paddingTop    = 0.0;
    graph.paddingRight  = 0.0;
    graph.paddingBottom = 0.0

    // Setup plot space
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.allowsUserInteraction = NO;
    plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-2.5) length:CPTDecimalFromFloat(28)];
    plotSpace.yRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-5) length:CPTDecimalFromFloat(desiredPeak+10)];

    NSArray *exclusionRanges = [NSArray arrayWithObjects:[CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-1) length:CPTDecimalFromFloat(-100)],
                                                         [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(25) length:CPTDecimalFromFloat(10000)], nil];

    // Axes
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;

    CPTXYAxis *x          = axisSet.xAxis;
    x.majorIntervalLength         = CPTDecimalFromString(@"4");
    x.minorTicksPerInterval = 4;
    x.minorTickLength = 5.0f;
    x.majorTickLength = 7.0f;
    x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
    x.minorTicksPerInterval       = 10;
    x.labelExclusionRanges = exclusionRanges;

    exclusionRanges = [NSArray arrayWithObjects:[CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-1) length:CPTDecimalFromFloat(-100)],
                                                [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(101) length:CPTDecimalFromFloat(10000)], nil];
    CPTXYAxis *y = axisSet.yAxis;
    y.majorIntervalLength         = CPTDecimalFromString(@"10");
    y.minorTicksPerInterval       = 20;
    y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
    y.labelExclusionRanges = exclusionRanges;

    // Put an area gradient under the plot above
    CPTColor *areaColor       = [CPTColor colorWithComponentRed:0.3 green:1.0 blue:0.3 alpha:0.8];
    CPTGradient *areaGradient = [CPTGradient gradientWithBeginningColor:areaColor endingColor:[CPTColor clearColor]];
    areaGradient.angle = -90.0f;
    CPTFill *areaGradientFill = [CPTFill fillWithGradient:areaGradient];

    // Create a blue plot area
    CPTScatterPlot *boundLinePlot = [[CPTScatterPlot alloc] init];
    boundLinePlot.identifier = @"Blue Plot";

    CPTMutableLineStyle *lineStyle = [boundLinePlot.dataLineStyle mutableCopy];
    //lineStyle.miterLimit = 1.0f;
    lineStyle.lineWidth  = 3.0f;
    lineStyle.lineColor  = [CPTColor blueColor];
    lineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:5.0f], [NSNumber numberWithFloat:5.0f], nil];
    boundLinePlot.dataSource     = self;
    boundLinePlot.cachePrecision = CPTPlotCachePrecisionDecimal;//Double;
    boundLinePlot.interpolation  = CPTScatterPlotInterpolationCurved;//Histogram;
    [graph addPlot:boundLinePlot];

    // Do a blue gradient
    CPTColor *areaColor1       = [CPTColor colorWithComponentRed:0.3 green:0.3 blue:1.0 alpha:0.8];
    CPTGradient *areaGradient1 = [CPTGradient gradientWithBeginningColor:areaColor1 endingColor:[CPTColor clearColor]];
    areaGradient1.angle         = -90.0f;
    areaGradientFill            = [CPTFill fillWithGradient:areaGradient1];
    boundLinePlot.areaFill      = areaGradientFill;
    boundLinePlot.areaBaseValue = [[NSDecimalNumber zero] decimalValue];

    CABasicAnimation *fadeInAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    fadeInAnimation.duration            = 1.0f;
    fadeInAnimation.removedOnCompletion = NO;
    fadeInAnimation.fillMode            = kCAFillModeForwards;
    fadeInAnimation.toValue             = [NSNumber numberWithFloat:1.0];
    [boundLinePlot addAnimation:fadeInAnimation forKey:@"animateOpacity"];
} 
```

所以默认情况下会打开一些东西..

感谢您的任何帮助。

-大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:42:32.077

如果您通过以下方式触摸，您也可以使其出现在图表上：

```
 -(void)scatterPlot:(CPTScatterPlot *)plot
plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{
    int plotNumber = 0;

    for (int i = 0; i < [mainDataForPlot count]; i++)
    {
        if ([mainDataForPlot objectAtIndex:i] != [NSNull null]
            &&
            [(NSString *)plot.identifier isEqualToString:
             [NSString stringWithFormat:@"%@-%@",[[mainDataForPlot objectAtIndex:i] objectAtIndex:0],[[mainDataForPlot objectAtIndex:i] objectAtIndex:1]]
             ]) 
        {
            plotNumber = i;
            break;
        }
    }

    if (self.symbolTextAnnotation != nil) 
    {
        self.symbolTextAnnotation = nil;
    }

    // Setup a style for the annotation
    CPTMutableTextStyle *hitAnnotationTextStyle = [CPTMutableTextStyle textStyle];
    hitAnnotationTextStyle.color = [CPTColor whiteColor];
    hitAnnotationTextStyle.fontSize = 16.0f;
    hitAnnotationTextStyle.fontName = @"Helvetica-Bold";

    // Determine point of symbol in plot coordinates
    NSNumber *x = [NSNumber numberWithInt:index];
    NSNumber *y = [[[mainDataForPlot objectAtIndex:plotNumber] objectAtIndex:3] objectAtIndex:index];
    NSArray *anchorPoint = [NSArray arrayWithObjects:x, y, nil];

    // Add annotation
    // First make a string for the y value
    NSNumberFormatter *formatter = [[[NSNumberFormatter alloc] init] autorelease];
    [formatter setMaximumFractionDigits:2];
    NSString *yString = [formatter stringFromNumber:y];

    // Now add the annotation to the plot area
    CPTTextLayer *textLayer = [[[CPTTextLayer alloc] initWithText:yString style:hitAnnotationTextStyle] autorelease];
    self.symbolTextAnnotation = [[[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:(CPTXYPlotSpace *)self.graph.defaultPlotSpace  anchorPlotPoint:anchorPoint] autorelease];
    self.symbolTextAnnotation.contentLayer = textLayer;
    self.symbolTextAnnotation.displacement = CGPointMake(0.0f, 20.0f);
    [graph.plotAreaFrame.plotArea addAnnotation:symbolTextAnnotation];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T13:07:31.010

“数据标签”（每个点上方的标签）默认不显示。自动标签需要 a`labelTextStyle`和`labelFormatter`. 这两个属性都默认`nil`隐藏标签。

# javascript - 获取元素宽度打破了while循环

> ID：14915560
> 
> 赞同：0
> 
> 时间：2013-02-16T21:56:23.543
> 
> 标签：javascript, jquery, css, dimensions

我试图将一大块文本分成单独的行。每行需要包含尽可能多的单词，而不是增长到大于其容器的宽度。

使用 jQuery，我创建了一个这样做的函数，但我遇到了问题。

在一个 while 循环中，我浏览了我的一段文本，然后抓住了 6 个单词放在一行上。我想将该文本的宽度与该容器的宽度进行比较。但是我尝试获取的所有元素的宽度都超出了我的 while 循环。

我尝试使用 jQuery 的方法来获取宽度：

```
$('element').width(); 
```

以及原始的 JS 宽度属性：

```
$('element').get(0).offsetWidth; 
```

似乎都不起作用，但我不确定为什么？任何人都可以帮忙吗？

这是一个 jsfiddle 的链接，损坏的部分已被注释掉。

[http://jsfiddle.net/CZH2p/](http://jsfiddle.net/CZH2p/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:41:10.213

我认为您需要重新审视对象在 javascript 中的工作方式，这也可能比普通对象更适合函数。

仍然不确定您在这里要达到的目的。但这是我可以帮你的。

1\. 你在引用当前对象的属性而不引用对象，这意味着你到处都有未知的属性。

```
$parent = $featured_el.closest('.img-wrap');
parent_width = $parent.width(); 
```

这些创建新事物，而不是设置您已经定义的属性。

2\. 你有一个空的 try catch，这意味着你的调试控制台中没有错误。我想这就是为什么您似乎认为 width() 将您拉出循环的原因。不是，这是一个异常被捕获和抑制。

```
} catch(err) {} 
```

3\. $lastLine 和 last_width 永远不会设置为“0”以外的任何值，这意味着您的 console.log 始终显示 0。您对 $lastLine.text() 的调用是一个错误。

4\. 我猜测了 $lastLine 的含义，并修复了上面的基本问题。这现在实现了你想要的吗？[http://jsfiddle.net/rakkeh/CZH2p/2/](http://jsfiddle.net/rakkeh/CZH2p/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:34:43.200

该问题的CSS解决方案：

**版本 2**

```
#a{
width: 400px;
height: 120px;
font-family: sans-serif;
text-transform: uppercase;
color:#fff;
background: #222;
padding: 200px 5px 0 5px;
}
#a>span{
display: block;
float:left;
font-size: 20px;
background: rgba(255,111,111,0.7);
padding: 10px;
margin: 5px 0;
} 
```

将每个单词包装在 span 标签中

```
<div id="a">
    <span>word</span>
    <span>word</span>
    <span>word</span>
    <span>word</span>
    <span>word</span>
    <span>word</span>
    <span>word</span>
</div> 
```

可以用一点 JS 来完成

最简单的代码，给你的想法：

```
'<span>'+text.split(' ').join('</span><span>')+'</span>' 
```

**版本 1**

它在换行符处缺少填充，但接近您想要的：

```
#a{
width: 400px;
height: 400px;
background: #222;
}

#a>h1 {
font-family: sans-serif;
display: inline;
font-size: 20px;
line-height: 50px; /*this does the trick*/
text-transform: uppercase;
color:#fff;
background: rgba(255,111,111,0.7);
padding: 10px;
} 
```

和html：

```
<div id="a">
    <h1>Lol'em ipsum doll or e-man and again lol'em ipsum doll or e-man</h1>
</div> 
```

# emacs - 我如何开始使用 Emacs 的文档？

> ID：14915572
> 
> 赞同：6
> 
> 时间：2013-02-16T21:58:13.527
> 
> 标签：emacs, org-mode

我想熟悉 Emacs 的自文档帮助系统，这样我就可以自己解决问题了。

示例：我想学习如何使用 org-mode 的`:VISIBILITY:`属性，以便我可以使某些子树始终以展开状态打开。

我猜了一下语法...

`:VISIBILITY: CHILDREN`

......但它没有工作。

所以我想使用帮助系统来解决这个问题。

所以我这样做：

`M-x apropos`

Apropos 符号（单词列表或正则表达式）：`org visibility`

那里没有帮助。

`C-h v`描述变量`org visibility`org-inhibit-startup-visibility-stuff

那里没有帮助。

`C-h a visibility`

org-set-visibility-according-to-property 是“org.el”中的一个交互式 Lisp 函数。

(org-set-visibility-according-to-property & optional NO-CLEANUP)

根据 :VISIBILITY: 属性切换子树可见性。

`C-h a visibility`

org-toggle-custom-properties-visibility 是“org.el”中的一个交互式 Lisp 函数。

(org-toggle-custom-properties-visibility)

...而且我仍然不知道如何使用 org-mode 的`:VISIBILITY:`属性。

我怎样才能更好地使用帮助系统来找到我正在寻找的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T00:34:49.047

信息手册是最详细的文档，它们都已编入索引。

为方便起见，`(emacs)`和`(elisp)`手册都有从任何地方搜索索引的命令（`emacs-index-search`和`elisp-index-search`），但是有许多库都有自己的顶级手册，毫不奇怪 org-mode 就是其中之一。当您键入时，您会在主页中看到它（如果您已经在阅读其他信息页面，则`C-h``i`紧随其后），或者您可以直接跳转到它：`d`

`C-h``i``g` `(org)` `RET`

您可能需要先学习如何使用信息阅读器。您可以从`*info*`缓冲区键入`h`开始其教程，并`d`返回到顶级页面（顶部有一些有用的注释）。

一旦你在任何特定的手册中，你可以用`I`（大写字母`i`）搜索索引。请注意，小写`i`也可以搜索，但我发现一般来说前者更有用。

所以在这种情况下，我会先尝试`I` `:VISIBILITY:` `RET`

这没有给出任何结果（我注意到由于`:`某种原因我现在不确定它实际上忽略了领先），但是再次尝试`VISIBILITY`（不带冒号）会给出一堆你可以遵循的结果（主要在`(org) Visibility cycling`节点中，我可以在其中看到您要查找的值列表）。

您也可以使用`C-s`. 这将在当前节点中搜索，但如果失败，`C-s`再次键入会将您带到它在该手册中找到的下一个匹配节点。如果您要查找的内容未编入索引，这将非常有用。

请注意，如果您不知道要搜索哪个手册，您可以使用搜索*所有*信息手册`info-apropos`（这自然要慢得多）。

还有[http://emacswiki.org/emacs/SelfDocumentation](http://emacswiki.org/emacs/SelfDocumentation)（没有详细说明，但您至少应该确保您熟悉它提到的内容）。

# php - 无法在 PHP 和 MySQLi 中列出表中的所有记录

> ID：14915573
> 
> 赞同：0
> 
> 时间：2013-02-16T21:58:14.413
> 
> 标签：php, mysqli

```
<?php
    require( '../connect_db.php' ) ;
    $query = $dbc->query('SELECT * FROM customer');
    while($row = $query->fetch(PDO::FETCH_ASSOC)) {
        echo $row['clientid'].' '.$row['inital'].' '.$row['firstname'].' '.$row['lastname'].' '.$row['mobile'].' '.$row['landline'].' '.$row['email'].' '.$row['address'].' '.$row['postcode'].' '.$row['accessibility'];
    }
?> 
```

但给了我一个**致命错误：在第 13 行的 list_customer.php 中调用未定义的方法 mysqli_result::fetch()**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:00:32.913

浏览一下[mysqli_result 类的文档，就可以](http://php.net/mysqli_result)确认该类确实没有这样的方法`fetch`。

有关可用方法，请参见该页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T22:00:24.063

Mysqli 没有方法 fetch，你可能是指 fetch_assoc()

# syntax - Python 2.6.1 和 2.7.3 之间的语法差异？

> ID：14915574
> 
> 赞同：2
> 
> 时间：2013-02-16T21:58:16.787
> 
> 标签：syntax, syntax-error

所以我使用下面的代码片段作为一个更大的项目的一部分，

```
with open(file) as fin:
    rows = ( line.split() for line in fin )
    d = { row[0]:row[1:] for row in rows } 
```

对于制表符分隔的输入，`file`. 它在我的个人机器上运行良好，但是当我将它移到共享计算集群时，它不喜欢第 3 行，`d = { row[0]:row[1:] for row in rows }`. 我一直在试图找出原因。

我唯一能想到的就是 Python 版本的不同。我运行的是 2.7.3，共享集群运行的是 2.6.1，但这似乎并不完全合理——我错过了一些非常明显的东西吗？我很感激你们的任何建议。

这是错误的文本（在集群上的 Python 2.6.1 中），

```
File "Alphabet.py", line 22
  d = { row[0]:row[1:] for row in rows }
                         ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T23:13:42.617

dict 理解是 Python 2.7 中的新功能，请参阅 PEP 274 [http://www.python.org/dev/peps/pep-0274/](http://www.python.org/dev/peps/pep-0274/)

从此：

```
>>> dict([(i, chr(65+i)) for i in range(4)]) 
```

在语义上等价于

```
>>> {i : chr(65+i) for i in range(4)} 
```

如果需要兼容 2.7 之前的 Python，请使用第一个版本。

# java - 如何用空格键开始游戏动画？

> ID：14915580
> 
> 赞同：0
> 
> 时间：2013-02-16T21:59:19.730
> 
> 标签：java, user-interface, graphics, keyevent

我正在开发一个小游戏小程序，我希望它等到用户按下`spacebar`开始，但我不确定最好的方法是什么。这里我写了一个移动盒子的*SSCCE*。

[http://pastebin.com/Zq1eMEJ9](http://pastebin.com/Zq1eMEJ9)

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:18:59.820

希望这可以解决您的问题...

```
public void keyTyped(KeyEvent evt) {
    if (evt.getKeyChar() == ' ') {
           Thread th = new Thread(movingBoxInstance);
           th.start();
    }
} 
```

# css - 列表中锚点上的 CSS 背景，由于图像项目符号，无法拉伸以覆盖整个 li

> ID：14915582
> 
> 赞同：0
> 
> 时间：2013-02-16T21:59:30.863
> 
> 标签：css, list, background

我有一个 3 层下拉菜单。其中一个链接在悬停时具有背景颜色，设置为锚标记。包含列表标记包含用作项目符号的背景图像。

我需要一个锚标签（服务）的背景颜色..如果我尝试：

```
.pages_nav li a.services:hover {
    background-color: #00A99D;
} 
```

它不起作用..但是这个：

```
.pages_nav li.services:hover {
    background-color: #00A99D;
} 
```

作品。但是，背景一直延伸到图像项目符号，这是我不想要的。

有什么建议么？[http://jsfiddle.net/PDYrU/](http://jsfiddle.net/PDYrU/)

的HTML：

```
<div id="pages_nav">
    <ul class="pages_nav">
        <li class="home"><a class="home" href="/home">Home</a></li>
        <li class="about"><a class="about" href="/about">About Us</a></li>
        <li class="services"><a class="services" href="/services">Our Services</a>
        <ul>
            <li class="procure"><a class="procure" href="/procure">PROCURE TO PAY (P2P)</a></li>
            <li class="cash"><a class="cash" href="/cash">ORDER TO CASH (02C)</a></li>
            <li class="general"><a class="general" href="/general">GENERAL ACCOUNTING</a>
            <ul>
                <li class="charting"><a class="charting" href="/charting">Charting of Accounts</a></li>
                <li class="maintenance"><a class="maintenance" href="/maintenance">General Ledger Maintenance</a></li>
                <li class="receivable"><a class="receivable" href="/receivable">Accounts Receivable Services</a></li>
                <li class="payable"><a class="payable" href="/payable">Accounts Payable Services</a></li>
                <li class="reconciliation"><a class="reconciliation" href="/reconciliation">Reconciliation of Bank Accounts and Credit Cards</a></li>
                <li class="statements"><a class="statements" href="/statements">Preparing Financial Statements</a></li>
                <li class="payroll"><a class="payroll" href="/payroll">Payroll Processing</a></li>
            </ul>
            <div class="clear"></div>
            <li class="closing"><a class="closing" href="/closing">CLOSING & REPORTING</a></li>
        </ul>
        <div class="clear"></div>
        <li class="how-it-works"><a class="how-it-works" href="/how-it-works">How It Works</a></li>
        <li class="contact"><a class="contact" href="/contact">Contact Us</a></li>
        <li class="careers"><a class="careers" href="/careers">Careers</a></li>
    </ul>
    <div class="clear"></div>
</div> 
```

CSS：

```
.pages_nav {
    position: relative;
    list-style-type: none;
    margin: 55px 0;
    padding: 0;
}

    .pages_nav li {
        float: left;
    }

        .pages_nav a {
            text-decoration: none;
            display: block;
            padding: 0 5px;
            color: #4D4D4D;
        }

        .pages_nav li a:hover { color: #FFF; font-family: fsalbert-bold; }
        .pages_nav li a.current { color: #FFF; font-family: fsalbert-bold; }

        .pages_nav li.home { width: 65px; }
        .pages_nav li a.home:hover { color: #20368B; }
        .pages_nav li a.home.current { color: #20368B; }
        .pages_nav li.about { width: 80px; background: url('../../assets/brand/bullet_about.png') center left no-repeat; padding-left: 10px; }
        .pages_nav li a.about:hover { color: #F7931E; }
        .pages_nav li a.about.current { color: #F7931E; }
        .pages_nav li.services { width: 100px; background: url('../../assets/brand/bullet_services.png') center left no-repeat; padding-left: 10px; }
        .pages_nav li a.services:hover { background-color: #00A99D; }
        .pages_nav li a.services.current { background-color: #00A99D; }
        .pages_nav li.how-it-works { width: 110px; background: url('../../assets/brand/bullet_works.png') center left no-repeat; padding-left: 10px; }
        .pages_nav li a.how-it-works:hover { color: #0071BC; }
        .pages_nav li a.how-it-works.current { color: #0071BC; }
        .pages_nav li.contact { width: 85px; background: url('../../assets/brand/bullet_contact.png') center left no-repeat; padding-left: 10px; }
        .pages_nav li a.contact:hover { color: #20368B; }
        .pages_nav li a.contact.current { color: #20368B; }
        .pages_nav li.careers { width: 65px; background: url('../../assets/brand/bullet_careers.png') center left no-repeat; padding-left: 10px; }
        .pages_nav li a.careers:hover { color: #F7931E; }
        .pages_nav li a.careers.current { color: #F7931E; }

            .pages_nav ul {
                position: absolute;
                list-style-type: none;
                display: none;
                width: 200px;
                margin: 0;
                padding: 20px 0 10px 2px;
                background-color: #00A99D;
            }

                .pages_nav ul li {
                    padding: 2px 0;
                    width: 100%;
                }

                .pages_nav ul a {
                    float: left;
                    color: #FFF;
                }

                .pages_nav ul a.general {
                    background: url('../../assets/brand/arrow.png') center right no-repeat;
                    padding-right: 10px;
                }

                    .pages_nav li ul ul {
                        left: 200px;
                        margin: -8px 0 0 0;
                        padding: 5px 5px;
                        width: 190px;
                    }

                    .pages_nav ul ul a {
                        background: url('../../assets/brand/bullet_white.png') center left no-repeat;
                        padding-left: 10px;
                    }

                    .pages_nav li:hover ul ul {
                        display: none;
                    }

                    .pages_nav li:hover ul, .pages_nav li li:hover ul {
                        display: block;
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:05:26.850

怎么样：

```
.pages_nav li.services:hover a {
    background-color: #00A99D;
} 
```

# php - javascript应该返回false，表单仍然有效并且php在表中插入数据

> ID：14915588
> 
> 赞同：1
> 
> 时间：2013-02-16T22:00:21.650
> 
> 标签：php, javascript, forms, validation

您好，非常感谢所有阅读和回答这篇文章的人。首先，如果这个问题已经得到解答，我感到非常抱歉，但我正在整个网络上寻找这个问题的答案，比如 12 小时，但我没有发现任何问题。所以我的问题如下：我有一个表单、一个脚本和一个 php 部分。由于该网页将有许多表单页面，因此我尝试编写脚本，以便直接从字段中获取需要验证的数据。因此该函数有一个参数。现在，提交按钮被隐藏，我在最后一个字段后使用输入来自动提交表单。即使 javascript 有效（它会在空字段周围创建一个红色边框），当我按下 enter 时，表单仍然通过 php 提交。在我的菜鸟中，我认为问题在于脚本没有返回 true 或 false，或者 onSubmit 有错误，因此它没有通过 true 或 false。我在下面发布代码。非常感谢，再次！

对于表单部分：

```
 <form action="addUser.php" method="post" name="login" onsubmit="return checkField()">

          <table border="0" cellpadding="0" cellspacing="0" class="addUser">
            <tr>
              <td><p class="capRegister">Date de utilizator</p></td>
              <td><p class="capRegister">Date de identificare</p></td>
            </tr>
            <tr>
              <td><input class="input1" name="user" type="text" placeholder="alege-ti un nume de utilizator" tabindex="1" onblur="checkField(name)" value="<?php echo $user; ?>"/></td>
              <td><input class="input1" name="nume" type="text" placeholder="numele tau" tabindex="4" onblur="checkField(name)" value="<?php echo $nume ?>" /></td>
            </tr>
            <tr>
              <td><input class="input1" name="password" type="password" placeholder="alege-ti o parola" tabindex="2" onblur="checkField(name)" /></td>
              <td><input class="input1" name="prenume" type="text" placeholder="prenumele tau" tabindex="5" onblur="checkField(name)" value="<?php echo $prenume; ?>"/></td>
            </tr>
            <tr>
              <td><input class="input1" name="confirma" type="password" placeholder="confirma parola" tabindex="3" onblur="checkField(name)" /></td>
              <td><input class="input1" name="interior" type="tel" placeholder="interior" tabindex="6" onblur="checkField(name)" value="<?php echo $interior ?>"/></td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td><input class="input1" name="mobil" type="tel" placeholder="mobil" tabindex="7" onblur="checkField(name)" value="<?php echo $mobil; ?>"/></td>
            </tr>
          </table>
          <p><input class="submitButton" name="login2" type="submit" value="" /></p>

  </form> 
```

现在是脚本部分：

```
function checkField(x) {

//initializeaza o variabila care pe baza argumentului functiei verifica campurile dupa nume (argumentul contine numele campului)
var continutCamp=document.getElementsByName(x)[0].value;
//variabila pentru footer
var msgJos;
//variabila pentru parola
var tempParola=document.getElementsByName('password')[0].value; 

msgJos="";
document.getElementById('bottomBar').innerHTML=msgJos;
document.getElementsByName(x)[0].style.borderStyle='none';

//verifica daca campul este gol     
if (continutCamp==null || continutCamp=="")
    {   
    // inconjoara cu o margine rosie eroarea
    document.getElementsByName(x)[0].style.borderColor='#FF0000';
    document.getElementsByName(x)[0].style.borderStyle='solid';
    document.getElementsByName(x)[0].style.borderRadius='4px';

    // scrie un mesaj in campul de jos

    msgJos='<p id="footerInfo">nu ai completat campul '+ x +'</p>';
    document.getElementById('bottomBar').innerHTML=msgJos;

    //return false pentru a impiedica procesarea formularului
    return false;

    }

        //daca nu se potriveste parola cu confirmarea
if((name=="confirma")&&(continutCamp!=tempParola))
{
    //coloreaza ambele campuri de parola si confirmare cu rosu
    document.getElementsByName('confirma')[0].style.borderColor='#FF0000';
    document.getElementsByName('confirma')[0].style.borderStyle='solid';
    document.getElementsByName('confirma')[0].style.borderRadius='4px';
    document.getElementsByName('password')[0].style.borderColor='#FF0000';
    document.getElementsByName('password')[0].style.borderStyle='solid';
    document.getElementsByName('password')[0].style.borderRadius='4px';

    //cod ca sa schimbe continutul footerului cu mesajul potrivit
    msgJos='<p id="footerInfo">parolele nu se potrivesc</p>';
    document.getElementById('bottomBar').innerHTML=msgJos;

    //din nou return false ca sa nu se proceseze formularul daca parola nu e aceeasi
return false;
}

} 
```

最后是 php 部分：

```
<?php
require_once("localVars.php");

$footerError;

if(isset($_POST['user']))
{

// $dbc=mysqli_connect(USER,PASS,BAZA) or die ('<p id="footerInfo"> Eroare in timp ce ma conectam </p>');

$user=$_POST['user'];
$parola=$_POST['password'];
$nume=$_POST['nume'];
$prenume=$_POST['prenume'];
$interior=$_POST['interior'];
$mobil=$_POST['mobil'];

$query="INSERT INTO users (user, parola, nume, prenume, interior, mobil) VALUES ('$user','$parola','$nume','$prenume','$interior','$mobil')"; 

// $result=mysqli_query($dbc, $query) or die ('<p id="footerInfo"> Eroare in timp ce bagam datele </p>');

mysqli_close($dbc); 
}

else{

    $footerError='nu sunt date de introdus';
}

?> 
```

为了不在数据库中发送十亿次尝试，php 对其进行了评论。$_POST 检查用户，但之前确实检查过提交或任何其他字段名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:09:12.913

您的函数`checkField(x)`需要一个变量“x”，但您的 onSubmit 侦听器只有“ `return checkField()`”，它缺少预期的变量。这是一个 javascript 错误，由于它无法评估并向表单返回真/假，因此提交了表单。

如果您还没有它，请下载 firebug (getfirebug.com) 并将其安装在您的浏览器中，它将使调试这些类型的 javascript 错误变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:19:21.197

您的主要问题似乎是当没有这样的变量时您正在使用全局变量“名称”。因此，您的 onblur 事件不会正确调用该函数。 `name`不是同义词`this`。`name`如果要获取触发事件的元素的名称，则必须改为`this.name`：

```
<input class="input1" name="password" type="password" placeholder="alege-ti o parola" tabindex="2" onblur="checkField(this.name)" /> 
```

**更新：**

另一个问题是您`name`再次检查该变量，而该变量不存在。替换`name`为`x`这里：

```
if((name=="confirma")&&(continutCamp!=tempParola)) 
```

所以看起来像

```
if((x=="confirma")&&(continutCamp!=tempParola)) 
```

应该是这样，我在编辑此答案之前对其进行了测试。

# python - 从收件箱 Python 中检索最大的电子邮件

> ID：14915596
> 
> 赞同：1
> 
> 时间：2013-02-16T22:01:27.417
> 
> 标签：python, imaplib

如何从我的 Gmail 收件箱中分类和检索最大的电子邮件，而无需向电子邮件服务器发送多个 IMAP 请求？例如，如果我的 gmail 帐户有 10,000 条消息，则代码不应发送 10,000 个 IMAP 请求来找出每条消息的大小。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:19:22.067

这有帮助吗？它回来的速度足够快，只有几百条消息。

```
import imaplib
mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login('me@gmail.com', 'SECRET)

resp,data = mail.uid('FETCH', '1:*' , '(RFC822.SIZE)')
print data 
```

给出：

```
['1 (UID 1 RFC822.SIZE 6383)', '2 (UID 2 RFC822.SIZE 35641)', '3 (UID 3 RFC822.SIZE 4787)',.... 
```

# wordpress - 如何在 Wordpress 中的小部件之前摆脱神秘的换行符

> ID：14915599
> 
> 赞同：0
> 
> 时间：2013-02-16T22:02:11.370
> 
> 标签：wordpress, widget, line-breaks

出于某种原因，Wordpress 在我的小部件之前插入了一个换行符，这让我的网站无法正常工作。

看看底部的[http://mytimeforart.com/galleries/pen-and-ink/](http://mytimeforart.com/galleries/pen-and-ink/)，其中有 3 列（最近的推文、咨询我们和空白列）。看到小部件标题上方的空白了吗？这就是神秘断线的结果。

这是中间小部件的源代码：

```
<div id="footer-mid">﻿&lt;div class="bottom-widget"><h4>Inquire With Us</h4>           <div class="textwidget">Lorem ipsum dolor sit amet cons ecter adipisicing elit, sed a eiuma smod temp incididunt ut<br>
<a href="/contact"><img src="/wp-content/uploads/2013/02/inquire.png" border="0" style="margin-top:6px"></a></div>
</div></div> 
```

以及它是如何在我的主题中设置的：

```
<div id="footer-mid"><?php get_sidebar('bottom-2'); ?></div> 
```

以及它是如何在我的functions.php中设置的：

```
if ( function_exists('register_sidebar') )
register_sidebar(array('name'=>'Sidebar Bottom 2',
'before_widget' => '<div class="bottom-widget">',
'after_widget' => '</div>',
'before_title' => '<h4>',
'after_title' => '</h4>',
)); 
```

任何帮助将非常感激！

谢谢，

辛西娅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:51:12.790

您仍然有 BOM 问题；见[http://validator.w3.org/check?uri=http%3A//mytimeforart.com/galleries/pen-and-ink/&doctype=Inline&ss=1&group=0&user-agent=W3C_Validator/1.654](http://validator.w3.org/check?uri=http%3A//mytimeforart.com/galleries/pen-and-ink/&doctype=Inline&ss=1&group=0&user-agent=W3C_Validator/1.654)

# python - 如何总结我从python中的数据库获得的列表。错误类型错误：不支持的操作数类型：'int'和'tuple'

> ID：14915600
> 
> 赞同：1
> 
> 时间：2013-02-16T22:02:24.907
> 
> 标签：python, python-2.7, subprocess

如何对我从 python 中的数据库获得的列表中的元素求和。每次我尝试时都会收到错误 TypeError: unsupported operand type(s) for +: 'int' and 'tuple'

```
def sum_num(mylist):
     return sum(mylist) 
```

当我打印我的列表时，我得到这个 [(52642,), (57127,), (9000,), (29000,), (350000,), (21000,), (41400,), (21600,)] 是我表中的数据

mylist 是从我的数据库中的数据填充的列表。谁能告诉我哪里有错误？如果还有其他方法可以做到这一点？

当我在做 print sum(mylist[1]+ mylist[2]) 我得到了正确的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:02:27.320

```
lst = [ i[0] for i in mylist]
sum(lst) 
```

这种方式需要创建另一个列表，但您也可以考虑使用它。

**编辑：**

像已经提到的其他人一样， 的元素`mylist`是元组。由于 in 中的每个元素在`mylist`其第一个位置都有一个数值 (int)，因此您将位于`0`列表内每个元素（元组）位置的值相加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:42:20.673

你有一个元组列表，所以你应该这样做：

```
sum( sum(tuple) for tuple in mylist ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:48:16.983

您可以先展平列表或元组列表，然后再对组件求和：

```
mylist =  [(52642,), (57127,), (9000,), (29000,), (350000,), (21000,)...]
sum(sum(mylist,())) 
```

# c++ - 带有行的列向量 - 带有 std::accumulate?

> ID：14915602
> 
> 赞同：5
> 
> 时间：2013-02-16T22:02:40.677
> 
> 标签：c++, vector, stl, mean, accumulate

为了尽可能懒惰，我在矩阵中读取为

```
vector< vector<double> > data ( rows, vector<double> ( columns ) ); 
```

并尝试使用尽可能多的 STL 好东西。

接下来我需要做的一件事是计算行均值。在 C 风格的编程中，这将是

```
vector<double> rowmeans( data.size() );
for ( int i=0; i<data.size(); i++ )
    for ( int j=0; j<data[i].size(); j++ )
        rowmeans[i] += data[i][j]/data[i].size(); 
```

在[C++ 中，如何使用向量视图和 gsl_stats_mean 计算整数向量的平均值？](https://stackoverflow.com/questions/4852954)解释说，对于数字向量，您可以在一行中计算向量均值，而无需在每一步调用 size() 运算符：

```
double mean = std::accumulate(stl_v.begin(), stl_v.end(), 0.0) / stl_v.size(); 
```

是否可以在向量向量上使用这些迭代器？中间形式是

```
vector<double> rowmeans( rows );
    for ( int i=0; i<data.size(); i++ )
        rowmeans[i] = std::accumulate(data[i].begin(), data[i].end(), 0.0) / data[i].size(); 
```

已经有 1 行不见了！但是使用 STL 函数是否也可以摆脱 [i] 索引？（在顶层这只是收集行手段的问题）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T22:15:44.830

```
std::transform(data.begin(), data.end(), rowmeans.begin(),
    [](std::vector<double> const& d) {
        return std::accumulate(d.begin(), d.end(), 0.0) / d.size();
    }); 
```

虽然，我的个人风格会涉及一个命名的 lambda 或函数，因为我会发现更多的自我记录：

```
auto Mean = [](std::vector<double> const& d) { return std::accumulate(d.begin(), d.end(), 0.0) / d.size(); };
std::transform(data.begin(), data.end(), rowmeans.begin(), Mean); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:14:24.620

但是使用`boost::numeric::ublas`（如果它是一个选项）：

```
matrix<double> m(rows,columns);
double mean = accumulate(m.data().begin(),m.data().end(),0,std::max<double>) / (rows * columns); 
```

# gridview - GridView (WinRT) 中项目之间的大空间

> ID：14915603
> 
> 赞同：0
> 
> 时间：2013-02-16T22:02:41.523
> 
> 标签：gridview, windows-8, windows-runtime, winrt-xaml

## 我到底想要什么

具有相同外观的项目表（漂亮的控件），但上面有不同的文本，就像这样，但更多：

`_ 3 6`
`1 4 7`
`2 5 8`
`_ _ 9`

其中“_”什么都不是。

## 是）我有的

我有一个非常简单的例子，gridView 中有边框，但我不明白为什么 GridView.ItemTemplate 中的项目之间有空格？如果我在 ItemHeight 和 ItemWidth 中设置更大的值，一切都可以（我可以看到边框的完整尺寸），但在这种情况下，**我在项目之间****有**
更大的空间 `<VariableSizedWrapGrid Orientation="Vertical" Margin="0" ItemHeight="`**`" ItemWidth="`**`" />`****

 ****我的示例的完整代码

* * *

```
class SomeData
{
    public SomeData(int i)
    {
        Number = i;
    }

    public int Number { get; set; }
}

class SomeModel
{
    public SomeModel(int key)
    {
        Key = key.ToString();
        Items = new List<SomeData>();
    }

    public string Key { get; set; }

    public List<SomeData> Items { get; set; }
}

class ItemPanelVM : BindableBase
{
    public ItemPanelVM()
    {
        var list = new List<SomeModel>();

        for (int i = 0; i < 10; i++)
        {
            list.Add(new SomeModel(i));

            for (int j = 0; j < 10; j++)
            {
                list[i].Items.Add(new SomeData(j));
            }
        }

        SomeGroup = list;
    }

    private List<SomeModel> _someModels;
    public List<SomeModel> SomeGroup
    {
        get { return _someModels; }
        set
        {
            _someModels = value;
            OnPropertyChanged();
        }
    }
} 
```

* * *

和 xml 片段

* * *

```
<UserControl.Resources>

    <CollectionViewSource
        x:Key="simpleViewSource"
        IsSourceGrouped="True"
        Source="{Binding SomeGroup}"
        ItemsPath="Items"
        d:Source="{Binding SomeGroup, Source={d:DesignInstance Type=test:ItemPanelVM, IsDesignTimeCreatable=True}}"/>

</UserControl.Resources>

<Grid DataContext="{Binding}">  
    <GridView SelectionMode="None" IsItemClickEnabled="False" 
              ItemsSource="{Binding Source={StaticResource simpleViewSource}}" 
              HorizontalAlignment="Left" 
              Margin="0">

        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="0" >
                            <TextBlock Text="{Binding Key}" />
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid Orientation="Vertical" Margin="0"
                                               ItemHeight="30" ItemWidth="30" />
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
        <GridView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Border DataContext="{Binding}" Margin="0" Background="Pink" BorderThickness="2" BorderBrush="Brown" Height="30" Width="30">
                        <TextBlock Text="{Binding Number}" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center"/>
                    </Border>
                </Grid>
            </DataTemplate>
        </GridView.ItemTemplate>
    </GridView>
</Grid> 
```

* * *

## 结果

## [截屏](http://sdrv.ms/12STs4X)

## 问题

为什么？这些空间来自哪里？这不是关于我不知道该怎么做。这是关于我不知道发生了什么。

PS所有投诉谷歌翻译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:58:33.477

它被埋在深处`ItemContainerStyle`；创建一个副本：

![在此处输入图像描述](../Images/c6352e89821c18007699c6f18065f13c.png)

然后在样式中搜索以下两个元素

```
 <Setter Property="Margin" Value="0,0,2,2"/>
  ...

      <Border x:Name="ContentBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="4"> 
```

将两者的边距设置为零，您将删除空格。我确实注意到样式中有很多元素的硬编码边距为 4，因此您可能也需要调整这些元素，因为其中一些元素会在各种视觉状态下发挥作用。****

# python - 在 Python 中合并元组中具有相同项目的元组

> ID：14915604
> 
> 赞同：0
> 
> 时间：2013-02-16T22:02:46.520
> 
> 标签：python, tuples

我意识到这是一个基本问题，但我无法让它发挥作用。我有以下元组：

```
t = (('apple', 'banana'), ('apple', 'carrot'), ('banana', 'carrot')) 
```

我希望每个元组中的第一项`t`是唯一的，并将每个重复项的第二项合并到一个字典中。

```
t = {('apple': 'banana', 'carrot'), ('banana': 'carrot')} 
```

毫不奇怪，这不起作用：

```
t = dict(zip(set(t[0]),t[1])) 
```

这是结果：

```
{'apple': 'apple', 'banana': 'carrot'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:10:10.920

我认为，您应该在`dict`这里使用 a （或者更确切地说是 a `defaultdict`）。其中`key`的`dict`将是你的内部元组的第一个元素 - `tup[0]`。

这就是你想要的：

```
>>> t = (('apple', 'banana'), ('apple', 'carrot'), ('banana', 'carrot'))
>>>
>>> from collections import defaultdict
>>> 
>>> temp_dict = defaultdict(tuple)
>>> 
>>> for tup in t:
        temp_dict[tup[0]] += tup[1:]  

>>> temp_dict
defaultdict(<type 'tuple'>, {'apple': ('banana', 'carrot'), 'banana': ('carrot',)})

>>> {key:value for key, value in temp_dict.items()}
{'apple': ('banana', 'carrot'), 'banana': ('carrot',)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:20:30.557

这是一个完整的解决方案（编辑：**现在** *兼容 Python 3*）：

```
import functools
t = (('apple', 'banana'), ('apple', 'carrot'), ('banana', 'carrot'))

def insert(d,k,v):
        d[k] = (v,) if k not in d else d[k]+(v,)
        return d

z = functools.reduce(lambda d,ti: insert(d,*ti),t,{})

def flat(tpl):
        return sum([(x,) if not isinstance(x,tuple) else x for x in tpl],())

result = [flat(x) for x in z.items()] 
```

产量：

`[('apple', 'banana', 'carrot'), ('banana', 'carrot')]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T22:36:16.303

对于这样的情况，dicts的`setdefault`方法会派上用场：

```
t = (('apple', 'banana'), ('apple', 'carrot'), ('banana', 'carrot'))
d = {}
[d.setdefault(k,[]).append(v) for k,v in t] 
```

# hibernate - 如何将休眠注释放在字段上，但始终具有属性访问权限？

> ID：14915606
> 
> 赞同：0
> 
> 时间：2013-02-16T22:02:51.313
> 
> 标签：hibernate, hibernate-annotations

我问是因为我想为 getter/setter 使用代码生成。

还因为我希望映射注释出现在类的顶部，我在其中声明字段。

我想知道这种方法是否正确：

```
@Entity
@Table(name = "test")
// @Access(AccessType.PROPERTY) // cannot use this, because hibernate complains that no 
public class Test implements Serializable
{
  @Id
  // I hope this results in property access for all of the other
  // properties as well, but I am not sure how to confirm this...
  @Access(AccessType.PROPERTY) 
  @Column(name = "id")
  private long                id         = 0;

  @Column(name = "test_string")
  private String              testString = null;

  ... 
```

更新：我刚刚测试了上面的示例，看起来“testString”属性是使用字段访问来访问的。我在 getter/setter 中添加了日志语句，但它们从未被调用过。另一方面，当我将 @Access(AccessType.PROPERTY) 也添加到“testString”字段时，调用了 getter 和 setter 方法。

所以目前看来我唯一的选择是在每个字段前面写“@Access(AccessType.PROPERTY)”:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:12:02.027

1) 属性访问不是持久化实体的正确方法。您持久化状态，状态存储在字段中。

2）您可以使用[`@Access`注释](http://docs.oracle.com/javaee/6/api/javax/persistence/Access.html?is-external=true)来设置要用于类的访问类型。

# jquery - 无法在 $.ajax 调用的成功函数中内置的表格行上设置替代行颜色

> ID：14915610
> 
> 赞同：0
> 
> 时间：2013-02-16T22:03:11.993
> 
> 标签：jquery, tablerow

在 ajax 调用的成功函数中，我将行从 php 脚本检索到的数据中附加到表中。这是构建行的代码：

```
$.each(data, function(index,element) {
    $('table#tblMovieList tbody').delay(200).append('<tr class="viewMovieRow">' +
        '<td class="listEditMovie">' +
            '<a class="linkEditMovie" name="' + element['movieID'] + '" href="#">Edit</a>' +
        '</td>' +
        '<td class="listDeleteMovie">' +
            '<input type="checkbox" class="chkDeleteMovie" name="deleteMovies[]" value="' + element['movieID'] + '" />' +
        '</td>' +
        '<td class="listMovieTitle">' +
            element['title'] +
        '</td>' +
        '<td class="listMovieDirector">' +
             ((element['directorFirstName'] === null) ? '' : element['directorFirstName']) + ' ' + ((element['directorLastName'] === null) ? '' : element['directorLastName']) +
        '</td>' +
        '<td class="listMovieLength">' +
            ((element['runTime'] === '0') ? '' : element['runTime']) +
        '</td>' +
        '<td class="listMovieMpaaRating">' +
            ((element['mpaaRating'] === null) ? '' : element['mpaaRating']) +
        '</td>' +
        '<td class="listMovieYearReleased">' +
            ((element['yearReleased'] ===  '0') ? '' : element['yearReleased']) +
        '</td>' +
        '<td class="listMovieSynopsis">' +
            element['synopsis'] +
        '</td>' +
        '<td class="listMovieFormat">' +
            ((element['format'] === null) ? '' : element['format']) +
        '</td>' +
        '<td class="listMovieReleaseStatus">' +
            ((element['releaseStatus'] === null) ? '' : element['releaseStatus']) +
        '</td>' +
        '<td class="listMovieMyRating">' +
            ((element['myRating'] === null) ? '' : element['myRating']) +
        '</td>' +
    '/<tr>');
}); 
```

然后我使用这条线来尝试为表中的偶数行着色：

```
$("#tblMovieList tbody tr:even").addClass("alt"); 
```

将该行放在 .each() 函数之后为**所有**tbody 行着色。如果我将该行放在js 文件中的*任何其他位置，则***没有任何**行被着色。

我错过了什么吗？由于行是动态构建的，因此我需要另一种方法吗？我创建了一个 jsFiddle，但我不知道如何通过 .each() 函数模拟迭代来构建行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:04:50.097

假设您不讨厌 CSS，并且您的用户拥有兼容的浏览器：

```
#tblMovieList tbody tr:nth-child(even) td {
    background-color: red; /* or whatever */
} 
```

而且我还没有尝试过，但是以下*应该可以*工作：

```
$('table#tblMovieList tbody')
    .delay(200)
    .append(/* all that table-generating code */)
    .find('tr:even').addClass('alt'); 
```

这*应该*可行，因为该`append()`方法返回内容*附加*到的元素/节点，而不是新添加的元素；因此它应该添加新元素，然后，一旦添加，查找`tr:even`元素，然后添加类。

而且，顺便说一句，您*需要*在生成代码中使用一个函数，如果只是为了在维护或开发该脚本时保持自己的理智。

或者问题可能是在 HTML 构造的最后一行中的错误关闭，或者更确切地说是*未*关闭`tr`的元素，`/<tr>`这会导致 jQuery 在每次迭代时创建一个新的空行。修复标记（更正为`</tr>`）将解决此问题。

参考：

*   [`:nth-child()`伪类，W3.org](http://www.w3.org/TR/selectors/#nth-child-pseudo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:06:50.537

您可以使用[:nth-child 选择器](http://api.jquery.com/nth-child-selector/)来执行此操作，该选择器选择作为其父项的第 n 个子项的所有元素。检查表行是偶数还是奇数，并且它们应用正确的颜色

```
#tblMovieList tbody tr:nth-child(even) td {
    background-color: yourcolor;
} 
```

# list - Haskell：使用列表理解将字符串更改为全大写字母字符串

> ID：14915611
> 
> 赞同：3
> 
> 时间：2013-02-16T22:03:15.967
> 
> 标签：list, haskell, list-comprehension

与递归相比，我发现列表理解几乎是不可能的。我正在尝试获取诸如“te1234ST”之类的字符串并返回“TEST”。似乎很容易，但有限制。不允许使用任何 Haskell 预定义函数，例如 isAlpha，它必须是列表解析。

到目前为止我所拥有的，这对于我花了多长时间来说非常糟糕：

```
 convertAllToUpper :: String -> String
    convertAllToUpper xs = [n |n <- xs, check n == True]

          -- This may not even be allowed, and I know it's incorrect anyway
    check :: n -> Bool
    check (n:ns)
        | n `elem` ['a'..'z']       = True
        | n `elem` ['A'..'Z']       = True
        | otherwise         = False 
```

我只是想让它工作，我什至还没有开始担心将小写字母更改为大写字母。

任何正确方向的观点都将非常感激。

编辑：应该提到从低到高的转换不能使用：如果，那么，否则。简单地列出理解和列出运算符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T23:19:02.190

您的问题可以分解为两个子问题：

1.  仅选择字母字符（“a”和“z”之间的字符，或“A”和“Z”之间的字符）
2.  将小写字符转换为大写。

前者可以通过过滤器或（在列表理解中）所选元素的条件来完成。在Unicode（和ASCII）中，小写字符在大写字符之后，所以我们可以简单地检查字符是否小于'a'来确定它是否是大写的（一旦我们知道它是一个字母），并且所有字母字符都是英文的-字母顺序，例如，小写字母是介于“a”和“z”（含）之间的字母。

使用 Data.Char (chr, ord)：

```
f xs = [ if x < 'a' then x else chr $ ord x + ord 'A' - ord 'a'
         | x <- xs, (x >= 'a' && x <= 'z') || (x >= 'A' && x <= 'Z') ] 
```

仅使用 Prelude（但最好使用 Data.Map 编写）：

```
f xs = [ if x < 'a' then x else maybe x id $ lookup x charMap
         | x <- xs, (x >= 'a' && x <= 'z') || (x >= 'A' && x <= 'Z') ]
  where charMap = zip ['a' .. 'z'] ['A' .. 'Z'] 
```

当然，正确的方法是使用标准库。这可以通过一些基本函数非常简单地完成：

```
-- with Data.Char (toUpper, isAlpha)
f xs = [ toUpper x | x <- xs, isAlpha x ] 
```

这在许多方面都非常优越：它可能更快，并且它不依赖于 ASCII 输入——它可以处理任何 Unicode 字符（原则上任何本地化：例如，土耳其语“i”正确大写为“İ” ，而不是 ASCII 或英语语言环境中的 'I'，因为 'I' 是 'ı' 的大写，尽管我不知道是否有任何 Haskell 实现正确实现了这一点）。

请注意，列表推导是递归的一个子集：如果您可以设法编写以下形式的递归函数：

```
f []       = []
f (x : xs) = if p x then g x : f xs else f xs 
```

它可以机械地转换为以下形式的列表理解：

```
f xs = [ g x | x <- xs, p x ] 
```

尽管您也可以使用多变量列表表达式，但递归表达要复杂一些。因此，如果您了解递归，那么列表推导式对您来说应该是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:05:22.517

看看这个

```
-- The char you want to take into account
valid_char = ['a'..'z'] ++ ['A'..'Z']

-- To filter the other char
valid xs = [ x | x<- xs, v <- valid_char, x==v]

-- Transform the list of valid char in a list of valid upper char 
to_upper xs = [if (x==fst n) then snd n else x | x <- xs, n <- (zip ['a'..'z'] ['A'..'Z']), (x==fst n) || (x==snd n)]  

-- composition of the two preceding function
convert = to_upper . valid 
```

和测试

```
$ convert "test1234ST" => "TEST" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T23:22:48.097

很难一直避免预定义的函数——我认为使用前奏中定义的列表函数是可以的？这是列表理解中的所有内容。

```
upcaseLetters :: String -> String
upcaseLetters cs =
  [d | c <- cs
     , c `elem` (['a'..'z'] ++ ['A'..'Z']) -- test if `c` is a latin letter.
     , let d = if c `elem` ['A'..'Z']      -- test if `c` is uppercase
               then c
               -- Index into [A..Z] using the index of `c` in [a..z]
               else ['A'..'Z'] !! head [i | (i, x) <- zip [0..] ['a'..'z']
                                          , x == c]] 
```

但是，您可能会觉得使用这些列表功能是作弊。[真正的程序员](http://www.ee.ryerson.ca/~elf/hack/realmen.html)避免任何外部依赖。遵循这一理念，我们可以在列表理解中引导大部分前奏：

```
upcaseLetters :: String -> String
upcaseLetters cs =
  [toUpper' c | c <- cs
     , let foldr' _ z []     =  z
           foldr' f z (x:xs) =  f x (foldr' f z xs)

           True ||| _ = True
           _ ||| True = True
           _ ||| _    = False

           elem' e xs = foldr' (|||) False [e==x | x <- xs]

           head' (x:_) = x

           zip' (a:as) (b:bs) =  (a, b) : zip' as bs
           zip' _ _           =  []

           isAlpha' x = x `elem'` (['a'..'z'] ++ ['A'..'Z'])

           isUpper' x = x `elem'` ['A'..'Z']

           toUpper' e
             | isUpper' e = e
             | otherwise  = ['A'..'Z'] !! head' [i | (i, x) <- zip' [0..] ['a'..'z']
                                                   , x == e]
     , isAlpha' c
     ] 
```

这种方法结合了折叠的清晰性和列表推导的可读性。

不幸的是，由于语言设计的疏忽，Haskell 无法在列表解析的主体中声明新的数据类型。这意味着我们不能清除我们对前奏的 Char、String 和 Bool 类型的依赖。

否则，`[toUpper x | x <- xs , isAlpha x]`这就是您通常想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T23:16:56.813

```
convertAllToUpper :: String -> String
--                                  This is equivalent to `check n`
convertAllToUpper xs = [n |n <- xs, check n == True]

-- This is a type declaration. Types always begin with a uppercase letter.
-- Therefore "n" can't be valid in this position.
-- You want "check :: Char -> Bool"
check :: n -> Bool
-- This is a pattern match for a list, but you call it with single
-- characters. That can't work.
check (n:ns)
    -- Again, this is the "if foo then true else false" pattern.
    -- This is redundant.
    | n `elem` ['a'..'z']       = True
    | n `elem` ['A'..'Z']       = True
    | otherwise         = False
-- A shorter version of check
check' :: Char -> Bool
check' x = x `elem` ['a'..'z'] ++ ['A'..'Z']

-- when you have written the function `toUpper`
-- (or taken it from Data.Char`) you can simply apply it to
-- every element in the comprehension.
convertAllToUpper' xs = [toUpper n | n <- xs, check n] 
```

# c# - Linq 查询以选择一个项目，在集合中带有一个参数

> ID：14915619
> 
> 赞同：1
> 
> 时间：2013-02-16T22:04:21.443
> 
> 标签：c#, asp.net, linq

我正在努力处理在 asp.net QueryString 方法中工作的 linq 查询。我尝试了各种方法，但仍然没有完全正确。

我的模型是：

```
public class SportType
{
    public int SportTypeID {get; set;}
    public string SportTypeName {get; set;}
}

public class Company
{
    public int CompanyID {get; set;}
    public string Name {get; set;}
    public ICollection<SportType> sportTypes {get; set;}
} 
```

数据库中有一个运动类型表，其中包含 (1=Football, 2=golf, 3=cricket) 等值。

一家公司可以没有/一种/多于一种运动类型。我想选择所有具有特定运动类型的公司。

但是这个 linq 查询给出了编译器错误：

参数 1：无法从 System.Linq.IQueryable 转换为 MyNamespace.SportType

```
public IQueryable<Company> GetCompanies([QueryString("sportTypeID")] int? sportTypeID)
{
    var db = new MyDatabaseContext();
    IQueryable<Company>query = db.Companies;
    if (sportTypeID.HasValue && sportTypeID>0)
    {
        query = query.Where(theCompany => theCompany.sportTypes.Contains(db.SportTypes.Select(sp => sp.SportTypeID == sportTypeID)));
    }
    return query;
} 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:07:43.420

由于返回值，您遇到错误

```
db.SportTypes.Select(sp => sp.SportTypeID == sportTypeID) 
```

线。它返回您的 SportType 实例的集合（可能包含许多值），而 Contains 方法只需要单个 SportyType 实例。试试这个：

```
public IQueryable<Company> GetCompanies([QueryString("sportTypeID")] int sportTypeID)
{
    var db = new MyDatabaseContext();
    IQueryable<Company>query = db.Companies;
    if (sportTypeID.HasValue && sportTypeID>0)
    {
        query = query.Where(theCompany => theCompany.sportTypes.Any(stype => stype.SportTypeID == sportTypeID)));
    }
    return query;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:41:08.830

这应该比 Blabblablaster 的回答更有效：

```
public IQueryable<Company> GetCompanies([QueryString("sportTypeID")] int? sportTypeID)
{
    var db = new MyDatabaseContext();
    IQueryable<Company>query = db.Companies;
    if (sportTypeID.HasValue && sportTypeID>0)
    {
        return query.Join(db.SportTypes, o => o.CompanyID, i => i.CompanyID, (o, i) => new {
                        Company = o,
                        HasSportType = i.SportTypeID == sportTypeID
                    })
                    .Where(x => x.HasSportType)
                    .Select(x => x.Company)
                    .Distinct();
    }
    return query;
} 
```

The `Any` command is not deferred, which probably isn't desirable in this case.

# wolfram-mathematica - 将项目附加到循环列表中

> ID：14915623
> 
> 赞同：0
> 
> 时间：2013-02-16T22:04:33.170
> 
> 标签：wolfram-mathematica

我正在尝试将项目附加到循环中的空列表：

```
pointList = {};
For[n = 1, n <= 10, n++, Append[pointList, {n, Sum[(-1)^(i + 1) * Binomial[n, i] * (n - i)! / n!, {i, 1, n}]}]]; 
```

但是for循环之后的pointList是空的。我究竟做错了什么？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:46:43.970

你想要 AppendTo[]，但是你可以在这里用一个表格做得更好：

```
pointlist=Table[{n, Sum[(-1)^(i + 1) * Binomial[n, i] * (n - i)! / n!, {i, 1, n}]},{n,10}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:20:15.583

请注意，根据二项式函数的定义`Binomial[n,i]*(n-i)!/n!=1/i!`。`FullSimplify[Sum[(-1)^(i+1)/i!,{i,1,n}],Assumptions->n>0]`此外，总和通过到简化`1-Subfactorial[n]/n!`。因此，

```
pointlist=Table[{n,1-Subfactorial[n]/n!},{n,1,10}] 
```

# c# - 字符重复

> ID：14915626
> 
> 赞同：0
> 
> 时间：2013-02-16T22:04:43.550
> 
> 标签：c#, algorithm, character, repeat

我正在编写一个简单的程序来计算字符串序列中字符的重复。我现在拥有的程序如下，但我希望看看它是否可以进一步优化。我相信现在的程序是 O(n) 最坏情况时间，我想看看是否有什么东西可以给我 O(log n) 运行时间。

```
using System;
using System.Collections.Generic;

namespace Algos
{
    class CharacterRepitition
    {
        private char[] checkStringArray;
        private bool[] discovered;

        public CharacterRepitition(string toCheck)
        {
                checkStringArray= toCheck.ToCharArray();           
                discovered= new bool[checkStringArray.Length];
                for (int i = 0; i < checkStringArray.Length; i++)
                {
                    discovered[i] = false;
                }
        }

        public void CheckRepetitions()
        {
            int charIndex=0;
            Dictionary<char, int> repetitions = new Dictionary<char, int>();
            while (charIndex < checkStringArray.Length)
            {
                int count = 0;

                if(discovered[charIndex].Equals(false))
                {
                    count = RunThroughTheString(charIndex, checkStringArray);
                    if (count > 0)
                    {
                        repetitions.Add(checkStringArray[charIndex], count+1);
                    }
                }
                charIndex++;
            }

            if (repetitions.Count == 0)
            {
                Console.WriteLine("\nNo characters repeated.");
            }
            else
            {
                foreach (KeyValuePair<char, int> result in repetitions)
                {
                    Console.WriteLine("\n'"+ result.Key + "' is present: " + result.Value + " times.");
                }
            }
        }

        private int RunThroughTheString(int currentCharIndex, char[] checkStringArray)
        {
            int counter = 0;
            for (int i = 0; i < checkStringArray.Length; i++)
            {
                if (checkStringArray[currentCharIndex].Equals(checkStringArray[i]) && i !=currentCharIndex)
                {
                    counter++;
                    discovered[i] = true;
                }
            }
            return counter;
        }

    }
} 
```

我知道我也可以使用 LINQ 来实现这一点。但这不是我要找的东西。感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:30:35.073

不确定我是否正确阅读了这个问题，但这是否适用于您的情况

```
 public void FindCharRepetitions(string toCheck)
    {
        var result = new Dictionary<char, int>();
        foreach (var chr in toCheck)
        {
            if (result.ContainsKey(chr))
            {
                result[chr]++;
                continue;
            }
            result.Add(chr, 1);
        }

       foreach (var item in result)
       {
           Console.WriteLine("Char: {0}, Count: {1}", item.Key, item.Value);
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:43:42.000

如果已知不同字符的数量（比如只有 AZ），那么代码可能是这样的：

```
int[] counters = new int['Z' - 'A' + 1];
foreach(char c in toCheck)
    if (c >= 'A' && c <= 'Z')
        counters[c - 'A']++; 
```

# perl - Windows 上的 Perl Imager 模块支持（ActiveState 版本）

> ID：14915633
> 
> 赞同：2
> 
> 时间：2013-02-16T22:06:21.657
> 
> 标签：perl, activestate

我正在尝试在带有 ActiveState Perl (5.12.3) 的 Windows 上使用**Imager (0.94)图像处理模块。**尝试读取或写入 JPEG、GIF 或 PNG 文件时，我收到以下消息的一些变化：

```
format 'jpeg' not supported - formats bmp, ico, pnm, raw, sgi, tga available for reading 
```

当切换到 BMP 格式时，一切都按预期工作。

因此，鉴于 ActiveState 中的 Imager 模块似乎不包括读取和写入任何有用格式所需的库（DLL？）有谁知道 PPM 包的替代源，它具有该模块工作所需的任何东西在 Windows 上正确吗？

# java - jni 本机方法在文件打开时冻结

> ID：14915637
> 
> 赞同：1
> 
> 时间：2013-02-16T22:06:51.760
> 
> 标签：java, c++, java-native-interface

当java代码在

```
 GraphJNIStuff.doMagic(); //my native method call 
```

什么都没有发生......除了程序冻结

通过放置返回“调试”之后；（有没有更好的方法？）在c代码中我发现有问题的位是

```
 FILE* fp = fopen(filename, "r"); 
```

为什么？？

我不知道在这种情况下哪些信息会有所帮助，但如果您需要任何信息，请说出来

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:39:04.453

假设它使用正确，那应该不会引起任何问题。您确定该文件存在/您有权访问它吗？尝试验证 fopen 是否成功。IE：

```
...fp = fopen...
if (fp == NULL) {
    fprintf(stderr, "File could not be opened\n");
    return -1;
} else {
    fprintf(stderr, "File opened successfully\n");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:34:40.330

尝试使用相对路径而不是绝对路径。看看这是否有效：

```
FILE* fp = fopen("./examplepath/file", "r"); 
```

# javascript - Javascript 中的 C# 'ref' 关键字等效或解决方法

> ID：14915644
> 
> 赞同：5
> 
> 时间：2013-02-16T22:07:40.653
> 
> 标签：javascript, javascript-objects

如果我有一个对象：

```
var Edge = function() {
  this.a = 0;
  this.b = 0;
  this.prevEdge = null;
  this.nextEdge = null;
  // +20 other members
} 
```

和一个功能：

```
function ProcessEdge(e)
{
  // some processing and then
  e = e.nextEdge;
  // some processing and then return something
} 
```

以这种方式从其他函数调用：

```
var e = new Edge();
// some processing and then
var res = ProcessEdge(e);
// e should be now the same object as e.nextEdge
// but it is not, e is still e 
```

`e`应该是 now ，`e.nextEdge`但它仍然是`e`，因为`e = e.nextEdge;`在`ProcessEdge()`函数中破坏了引用。

第一个想法是通过`ProcessEdge()`使用类似的东西在函数中一个一个地分配每个成员来实现成员平等`e.a = e.nextEdge.a; e.b = e.nextEdge.b; e.prevEdge = e.nextEdge.prevEdge; e.nextEdge = e.nextEdge.nextEdge;`，但引用仍然被破坏。当我这样做时，我还必须逐个成员比较，意大利面条代码和它的缓慢性就显现出来了。

在C#和类似语言中，引用保留可以简单地通过`ref`在变量名之前使用关键字来实现，并且引用被保留，并且速度和简单性和速度符合预期。

好的，现在有效的方法（这是我迄今为止使用的方法）：

```
function ProcessEdge(e)
{
  // some processing and then
  e.Value = e.Value.nextEdge; // instead of e = e.nextEdge;
  // some processing and then return something
}

// And the calling part:
var e = new Edge();
// some processing and then
var res = (function ()
{
  e = { Value: e };
  var $res = ProcessEdge(e);
  e = e.Value;
  return $res;
})
.call(this); 
```

此方法工作正常，但问题是内联函数，每次`var res = (function() {}...`执行行时都会创建（AFAIK）。这`var res...`是内部循环，如果有很多数据，它会被调用很多次，在某些情况下每秒 100,000 - 500,000 次。

**那么，有没有更快的方法来实现参考保留呢？**

* * *

编辑：

根据下面的评论，我做了一个速度测试： [http :](http://jsperf.com/closure-vs-compund/2) [//jsperf.com/closure-vs-compund http://jsperf.com/closure-vs-compund/2](http://jsperf.com/closure-vs-compund)

结果是上面提到的关闭方法很慢，正如我所料。我发现最快的方法是完全删除该函数`ProcessEdge()`，而是将其内联。闭合方法的速度是最快方法的26.63%。所以内联方法比闭包方法快 3.7 倍。内联方法如下：

```
function main10(a)
{
  var res=0, res2, e, b;
  for (var i=0;i<10000;i++)
  {
    e = new Edge();
    b = new Edge();
    b.a = i*a;

    e.nextEdge = b;

    // ProcessEdge() as inline version:
    e = e.nextEdge;
    res += e.a-10;

    if (e!=b) res+=1000;
  }
  return res;
} 
```

但是通常我们需要使用函数（如果有的话，给解释器一个自动内联的机会）。下一个最快的是使用“全局”引用。速度是最快的98.45%。

是返回值的`global_val`持有者（使用它是因为 Javascript 中的函数不能返回多个值）。这意味着我们在任何循环之外，并且在范围层次结构中只有一个参考对象`global_val`，它是在创建所有其他函数的同时创建的。该`ProcessEdge()`函数会覆盖 的值`global_val`，并且因为`e.nextEdge`是对象，这意味着仅轻而快地覆盖引用（没有新副本）。`e = e.nextEdge`导致参考损坏，但这无关紧要，因为参考现在在`global_val`并且我们是安全的。

在`main11()`函数中，我们以这种方式调用 ProcessEdge()：`res += ProcessEdge11(e)`并以这种方式将 global_val 的引用存储到 e `e = global_val`：。

```
var global_val = {};
function ProcessEdge11(e)
{
  e = e.nextEdge;
  global_val = e;
  return e.a-10;
}

function main11(a)
{
  var res=0, res2, e, b;
  for (var i=0;i<10000;i++)
  {
    e = new Edge();
    b = new Edge();
    b.a = i*a;
    e.nextEdge = b;

    // some processing and then
    res += ProcessEdge11(e);
    e = global_val;
    if (e!=b) res+=1000;  
  }  
  return res;
} 
```

然后还有一种方法值得一提：使用`function inside function`. 它比上述两种方法慢（最快的 84.42 %），但相当简单。它基本上依赖于与使用相同的事实`global_val`：函数可以以一种不会破坏引用的方式访问它的父范围变量（对象），因为没有创建本地变量并且函数处理一个范围向上的变量。重要的注意事项是变量没有“传入”，并且没有这样的局部赋值会破坏引用。

```
function main8(a)
{
  var pseudo_global_ret = 0;

  var res=0, res2, e, b;
  for (var i=0;i<10000;i++)
  {
    e = new Edge();
    b = new Edge();
    b.a = i*a;

     e.nextEdge = b;

    _ProcessEdge();
    res += pseudo_global_ret;
    if (e!=b) res+=1000;
  }
  return res;

  function _ProcessEdge()
  {
    e = e.nextEdge;
    pseudo_global_ret = e.a-10; // instead of return e.a-10
  }
} 
```

`ref`还有一点需要注意： Javascript 版本的交换函数与 C# 中的关键字稍有不同。在 C# 中我们可以调用`swap(ref a, ref b)`，但在 Javascript 中这是不可能的。要走的路是：

```
function swap()
{
  var tmp=a;
  a=b;
  b=tmp;
}
var a={x:0}
var b={x:1}
swap(); 
```

如果尝试某种`swap(a,b)`，则参考中断。当然，这对于包裹内部闭包以防止污染全局范围至关重要。

如果有人找到更快的参考保留方法，请回答这个问题。

# javascript - jQuery - 动态生成的孩子不会触发点击

> ID：14915649
> 
> 赞同：0
> 
> 时间：2013-02-16T22:08:09.030
> 
> 标签：javascript, jquery, html

我的代码：

```
$(".test1").children().click(function(){
    $(".test2").append('<span>something</span>');           
});

$(".test2").children().on('click', function(){
    alert("done");      
}); 
```

单击 test1 的子级后，带有“something”的跨度应该是 test2 的最后一个子级。我的追加做对了吗？test2 上的点击事件是否正确完成？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:22:23.043

这有效：

```
$(".test1").children().click(function(){
    $(".test2").append('<span> something</span>');           
});

$(".test2").on('click', 'span', function(){
    alert("done");      
}); 
```

[现场演示](http://jsfiddle.net/ydUUH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:31:50.567

好的，只是关于您的追加的一点解释，您的追加是正确的，但是您在追加`$(".test2").children()`新的孩子之前附加了点击事件（点击了 test1）。所以点击事件永远不会附加到跨度。

# scala - .map 的函数模拟在处理过程中发生变化的集合？

> ID：14915650
> 
> 赞同：2
> 
> 时间：2013-02-16T22:08:09.613
> 
> 标签：scala, collections, scala-collections

我遇到了尝试“处理”（如“运行函数”）集合中的元素的问题，就像你对`map`or所做的那样`foreach`。问题是集合在处理过程中可能会发生变化——处理函数可以添加需要处理的新元素。在命令式形式中，我会保留一堆这些元素并从堆栈中推送/弹出，直到它为空。我目前正在使用可变列表执行此操作，但结果代码的格式很差。这种情况下是否有标准的不可变功能习语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:43:06.600

OP 似乎有一个功能，可以给出答案或需要完成额外的工作。我能想到的解决这个问题的最简单方法是让生成答案的函数递归，这样它就永远不会返回需要额外工作的东西。

# ruby - 当块需要变量时将块传递给方法

> ID：14915651
> 
> 赞同：-1
> 
> 时间：2013-02-16T22:08:13.673
> 
> 标签：ruby

这行得通，但对我来说并不完全正确。想知道我错过了什么，或者我是否可以以某种方式简化它？

`$redis`把东西抽象出来。

```
def redis_with_connection(&block)
    $redis.with_connection { |conn| yield(conn) }
    # perhaps do other stuff like begin/rescue, etc.
end 
```

那么我可以在我的应用程序中调用它

```
redis_with_connection do |conn|  # is this conn variable necessary here?
  conn.set # do stuff with the connection
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:49:31.287

如果您只是将块传递给方法，则不需要产生变量`.with_connection`。相反，您可以将块作为参数传递：

```
def redis_with_connection(&block)
  $redis.with_connection(&block)
  # etc ...
end 
```

# r - 在 R 中使用 paste() 创建函数名称

> ID：14915652
> 
> 赞同：2
> 
> 时间：2013-02-16T22:08:17.547
> 
> 标签：r, function

我想做以下事情

```
X = matrix(0, nrow = p, ncol = N)
p=5
N=100
for (i in 1:N)
{
X[1,i] = e1(t[i])
X[2,i] = e2(t[i])
X[3,i] = e3(t[i])
X[4,i] = e4(t[i])
X[5,i] = e5(t[i])
} 
```

其中 e1()。e2()、e3()、e4() 和 e5() 是特定的函数。

我尝试了以下代码：

```
for(j in 1:p)
{
for (i in 1:N)
{
    X[j,i] = as.symbol(paste("e", j, sep = ""))(t[i])
}
} 
```

但它不起作用。

谢谢你的帮助

卡罗尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:13:41.930

一种方法是使用`do.call`：

```
R> myfun <- function(x) print(x)
R> do.call(paste0("my","fun"), list("foo"))
[1] "foo" 
```

的第一个参数`do.call`是函数的名称（您可以`paste`在此处使用），第二个参数是要传递的参数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:18:44.453

你想要的功能`get`

```
for(j in 1:p)
{
for (i in 1:N)
{
    X[j,i] = get(paste("e", j, sep = ""))(t[i])
}
} 
```

如果 e1 （等）被矢量化，您可以删除其中一个循环：

```
for (j in 1:p) {
  X[j,] = get(paste0("e", j))(t)
} 
```

# javascript - 使用 javascript 或 jquery 调整大小时刷新页面

> ID：14915653
> 
> 赞同：25
> 
> 时间：2013-02-16T22:08:31.653
> 
> 标签：javascript, jquery, html

我想在用户调整页面大小时强制浏览器刷新页面。我有以下代码：

```
function refresh() { location.reload(); }

<body onResize="refresh()"> 
```

但它不起作用。你们中有人有解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-16T22:12:56.690

使用 javascript/jquery 执行此操作：

只是javascript：

```
window.onresize = function(){ location.reload(); } 
```

用jQuery：

```
$(window).resize(function(){location.reload();}); 
```

或者

```
$(window).on('resize',function(){location.reload();}); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-01-10T06:24:46.257

以下代码似乎适用于所有浏览器，

```
$(window).bind('resize', function(e)
{
  if (window.RT) clearTimeout(window.RT);
  window.RT = setTimeout(function()
  {
    this.location.reload(false); /* false to get page from cache */
  }, 100);
}); 
```

希望对大家有所帮助。我在这里找到了这些信息：[http ://www.jquery4u.com/snippets/jquery-refresh-page-browser-resize/](http://www.jquery4u.com/snippets/jquery-refresh-page-browser-resize/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T22:12:17.320

试试这个：

```
$(window).resize(function() {
        location.reload();
}); 
```

# java - 为什么在交互中的同步集合中再次同步？

> ID：14915656
> 
> 赞同：2
> 
> 时间：2013-02-16T22:09:02.197
> 
> 标签：java, multithreading, synchronized

在 Java 文档中，它说同步的集合必须在迭代中再次手动同步。这是为什么？由于返回的集合已经同步。不太明白为什么会这样。谢谢你。

```
 Collection c = Collections.synchronizedCollection(myCollection);
      ...
    synchronized(c) {
        Iterator i = c.iterator(); // Must be in the synchronized block
        while (i.hasNext())
          foo(i.next());
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:11:50.690

只有个别方法是同步的。如果允许代码的其他部分在您在迭代器中进行的调用之间调用这些方法，则会破坏列表的完整性，在这种情况下同步变得毫无价值。

可能有一些方法不需要使用同步块来包装列表`synchronizedCollection`（例如检查列表中有多少元素），但是如果您正在使用列表并且一种方法取决于另一种调用的精确结果方法，两个方法调用周围都需要一个同步块，以确保在这些调用之间没有其他东西可以触及列表的状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T22:11:55.657

原因是迭代操作无法*保持*链表上的锁。例如，`i.hasNext()`将锁定列表，只要它需要检查`hasNext()`，但列表可能会在您实际调用之前*再次*`next()`更改。

因此，您必须自己锁定列表，以保持整个迭代同步，而不仅仅是单独的每个操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:17:43.500

想象一下`iterator`循环在两个不同的线程中运行。一个线程将调用`i.next().remove()`而另一个线程在同一线程上循环是完全合法的，`list`这可能会破坏列表中数据的一致性。

# applescript - Automator Apple Script - 有条件的重命名/删除

> ID：14915663
> 
> 赞同：0
> 
> 时间：2013-02-16T22:09:14.977
> 
> 标签：applescript, automator

我一直在使用 automator 批量重命名文件，这太棒了！不幸的是，我现在遇到一个问题，帧序列中的所有其他图像都需要重命名，而介于两者之间的图像需要被删除。我得出的结论是，我需要一个带有文件名编号的条件语句的applescript，但我一点也不知道如何创建一个。

基本上，我有 60 帧以 60 fps 运行，每个帧都带有扩展名####。（例如，0000、0001、0002 等）如何通过删除每隔一帧并将其余帧重命名为连续帧，将帧从 60 转换为 30？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:46:58.730

我只是使用一个shell脚本来代替：

`rm *[13579].png; i=0; for f in *.png; do mv "$f" frame_$(printf %04d $i).png; ((i++)); done`

# windows-store-apps - WinJS：如何计算列表视图项的宽度以填充父容器？

> ID：14915664
> 
> 赞同：1
> 
> 时间：2013-02-16T22:09:30.360
> 
> 标签：windows-store-apps, winjs

在[这篇](http://msdn.microsoft.com/en-gb/library/windows/apps/hh850406.aspx#styling_items_and_groups)文章中，有人说，“在你的模板中你必须始终做一件事，那就是设置你的项目的大小。” 我希望列表视图中的项目填充父容器的大小，但是，我应该如何正确计算此大小以适应不同的屏幕分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:34:15.047

这篇文章可能对你有用... [WinJS、ListViews 和限制项数](http://www.slickthought.net/post/2013/02/06/WinJS-ListViews-and-Limiting-the-Number-of-Items.aspx)

如果您想填充垂直空间。您也可以适应处理水平空间。

# javafx - 未找到 Mac 上的 JavaFX 安装

> ID：14915665
> 
> 赞同：5
> 
> 时间：2013-02-16T22:09:39.620
> 
> 标签：javafx

所以我试图为 javafx 运行一个简单的 helloworld 应用程序，但找不到它的包。好的，那一定是某种路径问题吧？

我已经从这里下载了共同捆绑的版本：

[http://www.oracle.com/technetwork/java/javafx/downloads/index.html](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)

您会期望 co-bundled 会像安装 SE 包一样安装。我已经在网上搜索过，人们用 windows 路径给出了 windows 的 mac 问题答案。这真的是 IMO 一个 java 问题，因为你要么像你说的那样共同捆绑并安装两者，要么将它们分开！

我还没有找到一个合适的解决方案来让 javafx 包含在编译中，这不涉及包含长路径。

编辑：安装 netbeans 并创建 javafx 项目后，找到合适的包没有问题。我认为在这一点上应该清楚 FX 与 SE 版本捆绑在一起，但是他们（Java 维护者）已经决定让 FX 从命令行工作变得非常困难。对这个原本愚蠢的决定有任何见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:32:20.577

一些选择：

1.  使用[JavaFX 8](http://jdk8.java.net/download.html)，它将 JavaFX 放置在默认的运行时类路径中。
2.  [使用Oracle JavaFX 部署工具](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)打包您的应用程序，这些工具将在您的应用程序中插入代码以查找 JavaFX。
3.  如果您不能执行上述任一操作，请手动将 jfxrt.jar 的路径添加到您的编译和运行时类路径中。

对于 3，您可以在下面找到 jre 的 jfxrt.jar：

```
/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home 
```

如果您安装了 jdk7，则可以使用如下内容从命令行运行 JavaFX 应用程序（使用 JavaFX 部署工具打包）：

```
export JAVA_HOME=`/usr/libexec/java_home -v 1.7`
java -version
java -jar application.jar 
```

如果只是安装了 JRE7 而没有 JDK，那么可以使用：

```
/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -jar application.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T17:07:35.710

根据 Jewelsea 的答案中的选项 #3，它在我的 ant 构建文件中是这样的：

```
<property name="jfx.dir" value="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib"/>

<path id="project.class.path">
    <pathelement path="${classpath}"/>
    <pathelement location="${jfx.dir}/jfxrt.jar"/>
</path>

<target name="compile"
    description="Compiles the source code.">
    <mkdir dir="${classes.dir}"/>
    <javac includeantruntime="false"
        srcdir="${src.dir}" 
        destdir="${classes.dir}">
        <classpath refid="project.class.path"/>
        <exclude name="**/package-info.java"/>
    </javac>
</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T22:49:15.120

我现在在大学的课堂作业中使用 JavaFX。我刚刚发现没有 JDK 版本可以运行 JavaFX，除了 10.0.2。卸载所有其他版本并运行 10.0.2，JavaFX 应该可以工作。

# php - 在 PHP 脚本完成后启动任务以继续

> ID：14915667
> 
> 赞同：0
> 
> 时间：2013-02-16T22:09:56.080
> 
> 标签：php, multithreading, logging, cron

我有一个由 AJAX 运行的 PHP 脚本。在脚本结束时，服务器向另一台服务器发出 HTTP 请求以记录脚本的成功完成。问题是，这第二台服务器有时需要一段时间才能响应，我希望在 AJAX 客户端完成其请求后发生这种情况。

是否有一些 PHP 库或类似的库可以做到这一点？我最好的选择是将完成记录到第一台服务器上的文件中，然后有一个 cron 脚本根据文件的内容向第二台服务器发出 HTTP 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:20:35.830

您可以使用 file_get_contents 从您的 PHP 调用远程服务器，或者使用 PHP 拥有的更复杂但功能更丰富的 CURL 包装器库。

# objective-c - 没有 sdef 的 ScriptingBridge？（可可）

> ID：14915668
> 
> 赞同：1
> 
> 时间：2013-02-16T22:10:01.087
> 
> 标签：objective-c, xcode, cocoa, scripting-bridge

我想获取当前活动应用程序的属性。我知道这应该可以通过 ScriptingBridge 实现，但是，这似乎需要您生成一个 sdef 文件并将其导入您的项目中以用于您尝试定位的应用程序。由于我想针对所有应用程序，还有其他方法可以做到这一点吗？

访问系统首选项的示例：

```
 SystemPreferencesApplication *systemPreferences =
[SBApplication
 applicationWithBundleIdentifier:@"com.apple.systempreferences"]; 
```

如果有其他方法可以访问任何活动应用程序的属性，请分享。（例如；窗口标题）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:13:26.527

您可以使用以下命令获取每个当前正在运行的应用程序的列表

```
NSWorkSpace.sharedWorkspace.runningApplications; 
```

该数组中的每个对象都应该是一个[NSRunningApplication](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html)，您可以自由地查询和操作它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:36:24.500

我假设你想运行一个applescript。如果您有大量的 AppleScript 代码要运行，那么脚本桥就很好。但是，如果您只有少量，那么更简单的方法是使用 NSApplescript。

例如，如果你想运行这个 applescript...

```
tell application "System Events"
    set theProcesses to processes
    repeat with aProcess in theProcesses
        tell aProcess to get properties
    end repeat
end tell 
```

然后你可以这样写...

```
NSString* cmd = @"tell application \"System Events\"\nset theProcesses to processes\nrepeat with aProcess in theProcesses\ntell aProcess to get properties\nend repeat\nend tell";
NSAppleScript* theScript = [[NSAppleScript alloc] initWithSource:cmd];
NSDictionary* errorDict = nil;
NSAppleEventDescriptor* result = [theScript executeAndReturnError:&errorDict];
[theScript release];
if (errorDict) {
    NSLog(@"Error:%@ %@", [errorDict valueForKey:@"NSAppleScriptErrorNumber"], [errorDict valueForKey:@"NSAppleScriptErrorMessage"]);
    return;
}

// do something with result
NSLog(@"result: %@", result); 
```

# c# - 实例化对象的差异 - C# 基础

> ID：14915669
> 
> 赞同：4
> 
> 时间：2013-02-16T22:10:06.410
> 
> 标签：c#, oop, object, properties, constructor

我是面向对象编程的初学者，我有一个简单的问题。有什么区别：

```
public class Calculation
{
     private _externalObject = new ExternalClass();

     public int FirstParameter {get;set;}
     public int SecondParameter {get;set;}
     public int ThirdParameter {get;set;}
     public int FourthParameter 
     {
          get
          {
               _externalObject.Calculate(FirstParameter, SecondParameter, ThirdParameter);
          }
     }
} 
```

和

```
public class Calculation
{

     private _externalObject;

     public Calculation()
     {
           _externalObject = new ExternalClass();
     }

     public int FirstParameter {get;set;}
     public int SecondParameter {get;set;}
     public int ThirdParameter {get;set;}
     public int FourthParameter 
     {
          get
          {
               _externalObject.Calculate(FirstParameter, SecondParameter, ThirdParameter);
          }
     }
} 
```

我想学习如何编写最佳代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T22:12:59.343

在这种特殊情况下，没有任何可测量的差异。

但是，如果您有多个构造函数，如果您没有直接在字段声明中进行初始化，则必须在每个构造函数中初始化该字段。

这更多的是个人风格问题。

* * *

关于类设计和集成的注意事项——如果你有这样的外部依赖，好的 OOP 会要求你使用 DI（依赖注入）而不是直接在类中实例化值。构造函数注入是一个不错的选择：

```
 private ExternalClass _externalObject;

 public Calculation(ExternalClass externalClass)
 {
       _externalObject = externalClass;
 } 
```

以上允许在不更改实际类的情况下修改行为并使类更可测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:26:05.660

在这种情况下，这两个类是相同的。事实上，对于几乎所有目的，您使用的两种代码风格都是相同的。通常，您会发现大多数样式指南都建议使用字段初始化器（静态字段初始化器尤其如此）。

有一个微妙的区别，但它不太可能影响到你。

每当您内联初始化类成员时，C#都会在运行构造函数中的任何代码*之前生成代码以执行该初始化。*特别是，如果您的构造函数调用基类构造函数。字段初始值设定项在调用基类构造函数*之前*运行，而用户提供的构造函数中的代码必须在*之后*运行。即以下两个类*略有*不同：

```
public class B : A
{
  // This happens *before* the base-class constructor.
  public ExternalObject external = new ExternalObject();

  public B () : base() { }
}

public class C : A
{
  public ExternalObject external;
  public C () : base()
  {
    // This happens *after* the base-class constructor.
    this.external = new ExternalObject();
  }
} 
```

请注意，如果您不提供默认构造函数，C# 会自动提供一个为您调用的构造函数，即使您没有显式提供构造函数`base()`，您的类也会“看起来像”类。`B``B()`

在实践中，这种差异不太重要。您实际上不能`this`在字段初始值设定项中引用，因此在任何一种情况下都不能依赖正在构造的基类。

# php - 如何按元素属性之一对对象数组进行排序？

> ID：14915674
> 
> 赞同：0
> 
> 时间：2013-02-16T22:10:18.207
> 
> 标签：php, sorting, object

我在 PHP 中有一个遵循此结构的数组：

```
$soap->progress = `

0 =>
object(stdClass)#3 (5) {
  ["step"]=>
  int(6)
  ....
}

1 =>
object(stdClass)#4 (5) {
  ["step"]=>
  int(8)

....

}

2 =>
object(stdClass)#5 (5) {
  ["step"]=>
  int(1)

....

}

3 =>
object(stdClass)#6 (5) {
  ["step"]=>
  int(4)

....

}

4 =>
object(stdClass)#7 (5) {
  ["step"]=>
  int(3)
....
}

.... and so on 
```

我将如何排序`$soap->progress[x]->step`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:14:16.297

如果您有需要排序的这些对象的数组，则可以使用该`usort`函数定义自己的自定义排序回调：

```
usort($arrayOfObjects, function($a, $b) {
  if($a->step == $b->step) {
    return 0;
  else if($a->step > $b->step) {
    return -1;
  } else {
    return 1;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:13:38.647

使用[usort()](http://www.php.net/manual/en/function.usort.php)。

```
function sortByStep($a, $b)
{
    if ($a->step == $b->step) {
        return 0;
    }
    return ($a->step < $b->step) ? -1 : 1;
}

usort($array, "sortByStep"); 
```

# php - 使用 mysql 完成所需的数量

> ID：14915675
> 
> 赞同：1
> 
> 时间：2013-02-16T22:10:24.790
> 
> 标签：php, mysql, sql

我正在使用 mysql 和 php，我需要弄清楚如何满足特定请求的数量：如果这是我的请求表：

`request id[pk], custID[fk from customer table], productid[fk in products table], quantites_requested, price_requested` 这是advertising_products 表：

`advertiseid[pk], customerid[fk from customer table], productsid[fk in products table], quantites_advertised, price_advertised`

如果我的请求表中有此记录：

```
1,1,1,10.0,5.00 
```

以及以下广告数量：

```
1,2,1,4.00,2.00 -- This means customer id 2 is selling choclates(product id 1), for 4KG's @£2.00
2,3,1,5.00,2.50
3,4,1,1.00,1.00
4,5,1,10.00,6.00 
```

我如何能够使用 sql select 语句，以便：我可以弥补客户的请求数量？

我希望能够选择构成请求数量的最便宜的总数。

因此，在这种情况下，输出将显示：

```
2,1,4.00,2.00
3,1,5.00,2.50
4,1,1.00,1.00 
```

因此客户 2,3 和 4 将显示为他们的 4+5+1=10.0 的数量构成了请求的数量......而且它也比 5 号卖家便宜。

有没有我可以使用的这样的查询，以便我能够查找 SQL 表并累积添加数量直到请求的数量，然后检查哪个是最便宜的使用？

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:52:40.193

这类似于我的[问题](https://stackoverflow.com/questions/14451965/optimal-selection-for-ordering-multiple-items-parts-from-multiple-suppliers-v)。

正如@Origin 的回答所指出的，这是一个[集合覆盖问题](http://math.mit.edu/~goemans/18434S06/setcover-tamara.pdf)，并且是一个[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)问题，即除了极少数可能性之外的任何可能性都是不可计算的。

对于您的问题，贪心算法解决方案可能就足够了。

我没有时间解决您的问题，但下面发布的是我用来解决我的问题的代码。您的表结构更简单，因此您的解决方案也应该如此！

```
DECLARE @GreedySetCover table
(
    Location_Id int
    ,Supplier_Id int
    ,Ranking int
)

INSERT INTO @GreedySetCover
--Include Suppliers who are sole suppliers for any item
SELECT  ss.Location_Id
        ,si.Supplier_Id
        ,0 Ranking
FROM    (
        SELECT  pr.Location_Id
                ,pr.Item_Id
        FROM    PartsRequests pr
                INNER JOIN
                SupplierItems si ON pr.Item_Id=si.Item_Id
        WHERE   pr.Order_Id IS NULL
        GROUP BY    pr.Location_Id
                    ,pr.Item_Id
        HAVING  COUNT(*)=1
        ) ss
        INNER JOIN
        SupplierItems si ON si.Item_Id=ss.Item_Id
UNION
--Include suppliers who do not charge a delivery fee
SELECT  pr.Location_Id
        ,si1.Supplier_Id
        ,0 Ranking
FROM    PartsRequests pr
        INNER JOIN
        SupplierItems si1 ON si1.Item_Id=pr.Item_Id
WHERE   pr.Order_Id IS NULL
        AND
        (
        NOT EXISTS
        (SELECT ISNULL(si2.AmountPerOrder,0)
        FROM    SupplierItems si2
        WHERE   si1.Supplier_Id=si2.Supplier_Id
                AND
                si2.Item_Id=0)
        OR
        (SELECT ISNULL(si2.AmountPerOrder,0)
        FROM    SupplierItems si2
        WHERE   si1.Supplier_Id=si2.Supplier_Id
                AND
                si2.Item_Id=0
        )=0
        )

DECLARE @Ranking int = 1
--While any item does not have a supplier
WHILE   EXISTS 
        (
        SELECT  pr.Location_Id
                ,pr.Item_Id
        FROM    PartsRequests pr
                EXCEPT  
                (
                SELECT  gsc.Location_Id
                        ,pr1.Item_Id
                FROM    @GreedySetCover gsc
                        INNER JOIN
                        SupplierItems si ON gsc.Supplier_Id=si.Supplier_Id
                        INNER JOIN
                        PartsRequests pr1 ON pr1.Item_Id=si.Item_Id AND pr1.Location_Id=gsc.Location_Id
                WHERE pr1.ORDER_ID IS NULL
                )
        )
BEGIN
    --Get the supllier whcovere uncovered items at the lowest cost
    INSERT INTO @GreedySetCover
    SELECT  sort.Location_Id
            ,sort.Supplier_Id
            ,@Ranking 
    FROM    (
            SELECT  uncovered.Location_Id
                    ,si.Supplier_Id
                    ,ROW_NUMBER() OVER 
                        (PARTITION BY uncovered.Location_Id
                         ORDER BY   
                         --This is the weighting function 
                         SUM(uncovered.Quantity*si.Price) +         --The cost of the Items
                         (SELECT    ISNULL(si2.AmountPerOrder,0)    --Plus the delivery fee
                          FROM      SupplierItems si2
                          WHERE     si.Supplier_Id=si2.Supplier_Id
                                    AND
                                    si2.Item_Id=0)
                         /cast(COUNT(*) as float)) RowNum           --Divided by the number of items covered
            FROM    (
                    SELECT pr.Location_Id
                          ,pr.Item_Id
                          ,pr.Quantity
                    FROM    PartsRequests pr
                            --Remove uncovered items
                            EXCEPT  
                            (
                            SELECT  gsc.Location_Id
                                    ,pr1.Item_Id
                                    ,pr1.Quantity
                            FROM    @GreedySetCover gsc
                                    INNER JOIN
                                    SupplierItems si ON gsc.Supplier_Id=si.Supplier_Id
                                    INNER JOIN
                                    PartsRequests pr1 ON pr1.Item_Id=si.Item_Id AND pr1.Location_Id=gsc.Location_Id
                            WHERE pr1.ORDER_ID IS NULL
                            )
                    ) uncovered
                    INNER JOIN
                    SupplierItems si ON si.Item_Id=uncovered.Item_Id
            GROUP BY Location_Id, Supplier_Id
            ) sort
    WHERE RowNum = 1

    SET @Ranking=@Ranking+1
END

--SELECT    *
--FROM  @GreedySetCover
--ORDER BY  Ranking 
--          ,Location_Id

SELECT  Location_Id
        ,Supplier_Id
        ,Number
        ,Quantity
        ,Price
FROM    (
        SELECT  pr.Id PartsRequest_Id
                ,pr.Item_Id
                ,pr.Quantity
                ,pr.RequestTime
                ,pr.Location_Id
                ,pr.Person_Id
                ,pr.Order_Id
                ,si.Supplier_Id
                ,si.Number
                ,si.Price
                ,si.AmountPerOrder      
                ,ROW_NUMBER() OVER (PARTITION BY gsc.Location_Id,pr.Item_Id
                                    ORDER BY si.Price) RowNum
        FROM    @GreedySetCover gsc
                INNER JOIN  
                PartsRequests pr ON gsc.Location_Id=pr.Location_Id
                INNER JOIN
                SupplierItems si ON gsc.Supplier_Id=si.Supplier_Id
                                    AND
                                    pr.Item_Id=si.Item_Id
        ) Results
WHERE   RowNum=1
UNION
SELECT  gsc.Location_Id
        ,si.Supplier_Id
        ,si.Number
        ,si.AmountPerOrder
        ,Price
FROM    @GreedySetCover gsc
        INNER JOIN
        SupplierItems si ON gsc.Supplier_Id=si.Supplier_Id
WHERE   AmountPerOrder>0
ORDER BY    Location_Id
            ,Supplier_Id
            ,Number 
```

# image - 图像大小列表视图 jquerymobile

> ID：14915676
> 
> 赞同：1
> 
> 时间：2013-02-16T22:10:33.620
> 
> 标签：image, listview, jquery-mobile

我正在尝试设置这样的列表视图：

[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-thumbnails.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-thumbnails.html)

我动态生成我的代码

```
$('#calendarPage').live('pagebeforeshow', function(event) {
    $('#calendarPage').live('pageshow', function(event) {
        application.prev = 'menu.html';
        //get the actu
        application.readFile('calendar.json',function(data){
            data = JSON.parse(data);

            var listview = '<ul data-role="listview" class="ui-listview"  id="calendarList" >';
            for(elem in data){
                var date = new Date(data[elem].date);
                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getYear();
                var hours = date.getHours();
                var min = date.getMinutes();
                var s = date.getSeconds();
                listview += '<li>';
                listview += '<img src="'+application.api+data[elem].img+'" /><a href="actuOne.html?id='+elem+'" ><h3>'+data[elem].title+'</h3><p>'+day+'/'+month+'/'+year+' '+hours+':'+min+':'+s+'</p></a>';
                listview += '</li>';
            }
            listview += '</ul>';
            $('#calendarPage .content').html(listview);
            $('#calendarList').listview();
        });
    });
}); 
```

已创建列表视图，但未调整图像大小

我尝试添加 class="ui-li-thumb" 但效果不佳

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:19:50.230

您的示例中有一个错误，**img**标签必须在**a**标签内，然后才会调整大小。

看看这个例子：http: [//jsfiddle.net/Gajotres/w5bcS/](http://jsfiddle.net/Gajotres/w5bcS/)

```
 <ul data-role="listview">
            <li><a href="index.html">
                <img src="http://www.warrenphotographic.co.uk/photography/bigs/05852-Retriever-puppy-yawning-white-background.jpg" title="sample"/>
                <h3>Sample image</h3>
                <p>Sample</p>
            </a></li>
            <li><a href="index.html">
                <img src="http://www.warrenphotographic.co.uk/photography/bigs/05852-Retriever-puppy-yawning-white-background.jpg" title="sample"/>
                <h3>Sample image</h3>
                <p>Sample 2</p>
            </a></li>
        </ul> 
```

# css - 我可以让标题在 CSS 中缩小一个大小吗？

> ID：14915678
> 
> 赞同：1
> 
> 时间：2013-02-16T22:10:39.667
> 
> 标签：css

在 CSS 中，我可以让它在特定的 div 类中，每个标题都缩小下一个尺寸吗？意思是，h1 是 h2 大小的，h2 是 h3 大小的，等等？但没有实际指定这些尺寸？

我希望能够设置一次 h1、h2、h3，然后在特定情况下将它们全部向下移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:25:14.027

通过 HTML5 CR（参见 4.4.11[标题和部分](http://www.w3.org/TR/html5/sections.html#headings-and-sections)s），您可以使用`article`or`section`元素来达到此目的，因为它们开始新的嵌套级别，因此例如`h1`它们内部对应于`h2`它们外部。最新版本的浏览器通常会实现这一点，例如，您可以通过查看以下内容：

```
<!doctype html>
<title>Headings</title>
<h1>Heading</h1>
<h2>Heading</h2>
<article>
<h1>Heading</h1>
</article>
<section>
<h1>Heading</h1>
</section> 
```

但是，支持仍然有限，并且会在很长一段时间内如此。IE 8（及以上）将是我们多年。尽管在这些浏览器上存在 polyfills 来实现新的 HTML5 元素，例如著名的[html5shiv.js](https://github.com/aFarkas/html5shiv)不处理标题。

所以最强大的方法是明确设置你的字体大小。但是，您可以使用上下文选择器，例如

```
<style>
h2, .article h1 { font-size: 130%; }
</style>
...
<div class=article>
<h1>...</h1>
...
</div> 
```

（或者可能使用`article`带有 html5shiv 的元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:40:42.253

*Jukka 的答案是一种方式，但如果您响应*式地解决问题，我会以另一种方式解决这个问题，这种方式可能会更强大。

[这是 Smashing Magazine 上的一篇文章，](http://coding.smashingmagazine.com/2012/12/17/css-baseline-the-good-the-bad-and-the-ugly/)关于为复制构建适当的基线，如果您正在构建复制繁重的界面，这是一本很好的读物。

因此，您将首先为文本设置适当的基线，然后根据基线使用百分比来缩放标题大小。

### 注意：这些是示例值。我没有测试任何东西。

```
body { font-size: 1.2em } /* Baseline */

article { font-size: 80% } /* 0.8 of ^ Baseline */
aside { font-size: 60% } /* 0.6 of ^ Baseline */

/* x% of the parent font-size */
h1 { font-size:160% }
h2 { font-size:140% }
p{ font-size:100% }
etc... 
```

这将影响, &中的*所有*副本，并且文本大小将相对于基线大小进行缩放。`body``article``aside`

### 例子：

```
<h1>Font size = 1.2em * 160% = 1.92em</h1>
<p>Font size = 1.2em * 100% = 1.2em</p>

<article>
    <h1>Font size = 1.2em * 80% * 160% = 1.536em</h1>
    <p>Font size = 1.2em * 80% * 100% = 0.96em</p>
</article>

<aside>
    <h1>Font size = 1.2em * 60% * 160% = 1.152em</h1>
    <p>Font size = 1.2em * 60% * 100% = 0.72em</p>
</aside> 
```

这使得为​​不同的查询设置不同的基线变得容易`@media`，并且所有的文本大小都正确。

### 进一步的例子：

我们使用媒体查询更改基线：

```
/* Small screen, so beef up the font size */
@media only screen and (max-width: 320px){
    body { font-size:1.4em }
} 
```

这将影响我们之前的所有样式，如下所示：

```
<h1>Font size = 1.4em * 160% = 2.24em</h1>
<p>Font size = 1.4em * 100% = 1.4em</p>

<article>
    <h1>Font size = 1.4em * 80% * 160% = 1.792em</h1>
    <p>Font size = 1.4em * 80% * 100% = 1.12em</p>
</article>

<aside>
    <h1>Font size = 1.4em * 60% * 160% = 1.344em</h1>
    <p>Font size = 1.4em * 60% * 100% = 0.84em</p>
</aside> 
```

`2c`

# android - 如何在 Android.mk 中禁用 LOCAL_MODULE 的编译？

> ID：14915684
> 
> 赞同：1
> 
> 时间：2013-02-16T22:11:22.043
> 
> 标签：android, linux, build

我想暂时忽略编译 LOCAL_MODULE，因为它并不重要并继续使用 Android.mk。有没有办法做到这一点？

我知道我可以删除整个文件夹并继续前进并在需要时替换它，但我觉得可能有一种方法可以使用 Android.mk 来完成。我只是找不到一种方法来谷歌它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:39:10.423

您可以从 Android.mk 中的 LOCAL_SRC_FILES 中删除您不想编译的 .c、.cpp 文件。我没有尝试过，但是，从我读到的关于 Android.mk 和 LOCAL_SRC_FILES 的内容来看，这应该可以帮助您不编译您不想要的文件。

# java - Neo4j 1.8.1 中 TraversalDescription.toJson 的替换

> ID：14915686
> 
> 赞同：0
> 
> 时间：2013-02-16T22:11:29.777
> 
> 标签：java, neo4j

我目前正在浏览这里的教程： [Neo4j 1.8.1 docs](http://docs.neo4j.org/chunked/1.8.1/server-java-rest-client-example.html)，并且由于文档没有保持最新状态，因此该教程至少可以说是无效的。我想要做的是替换以下代码：

```
public void foo()
{
   TraversalDescription t = new TraversalDescription();
t.setOrder( TraversalDescription.DEPTH_FIRST );
t.setUniqueness( TraversalDescription.NODE );
t.setMaxDepth( 10 );
t.setReturnFilter( TraversalDescription.ALL );
} 
```

随着新的处事方式`TraversalDescription`被移至界面并删除了一些功能，例如`setOrder`功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:29:27.440

您将需要以下语法：

```
for (Path position : Traversal.description()
    .depthFirst()
    .uniqueness(Uniqueness.NODE_GLOBAL)
    .evaluator(Evaluators.toDepth(10)
    .traverse(yourStartNode)) { 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T13:30:59.330

Neo4j 教程中使用的 TraversalDescription 不是 neo4j 核心 jar 中的接口，它是示例代码中的自定义类。

您可以在以下位置查看课程

[http://grepcode.com/snapshot/repo1.maven.org/maven2/org.neo4j.examples/neo4j-server-examples/1.9.M04/](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.neo4j.examples/neo4j-server-examples/1.9.M04/)

您还必须复制Relationships 类。

也许本教程也可以帮助您 [http://weblog4j.com/2013/07/22/neo4j-a-next-generation-graph-database-and-java/](http://weblog4j.com/2013/07/22/neo4j-a-next-generation-graph-database-and-java/)

问候

# scala - 如何让 Intellij Idea 调试 Play 2.1 应用程序的源代码文件，而不仅仅是项目定义

> ID：14915690
> 
> 赞同：4
> 
> 时间：2013-02-16T22:12:01.600
> 
> 标签：scala, intellij-idea, playframework-2.1

当我创建一个新的 Play 2.1 项目时，Intellij Idea 坚持只调试项目配置文件。也就是说，./project/Build.scala 中的行，没有其他文件。

我如何告诉 Idea 在 ./app/ 中调试东西？

我已经像这样生成了 Idea 项目文件：（`[project-name] $ idea with-sources=yes`在 Play 的控制台中）。

[（我不记得以前在 Play 2.0 或更早版本的 2.1 中发生过这种情况）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:17:52.107

这个问题有两个原因：一个“有趣”和一个愚蠢。

*有趣的原因：*

Play 2.1 和 SBT 似乎分叉测试（因此在单独的进程中运行它们）。因此，我的单元测试代码中的断点从未被命中。

“修复”此问题的一种方法是添加此配置设置：

```
Keys.fork in Test := false 
```

*愚蠢的原因：*

我还没有在新项目中编译任何“真正的”源代码文件。因此，Idea 从未在这些行上激活断点。但是*项目配置*Build.scala文件我认为是在我启动Play的SBT控制台时编译的，所以Idea直接在Build.scala中激活了断点。— 所以实际上从来没有问题：我只需要`run`在 Play 控制台中点击，然后断点就会生效（在 Play 编译了我的源代码之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:57:17.590

我正在运行 Intellij，在端口 9999 1 上进行远程调试。~apatzer> 播放调试 2。然后在 Intellij 3 中启动我的远程配置。[playproject] $ run ==> 成功地打断点和调试。

由于分叉，我无法在任何测试中达到断点。例如： [playproject] $ test-only com.mydomain.pkg.MyTest ==> FAIL 不同的进程。IDE 中未命中断点。

这是有效的：

```
import sbt._
import Keys._
import play.Project._

object MyBuild extends Build {
...
lazy val main = play.Project(appName, appVersion, appDependencies).settings(
  Keys.fork in testOnly := false,
  libraryDependencies ++= deps,
  ... 
```

# vb.net - 我想知道如何在我的 Windows 窗体上创建动态增量字母“A、B、C”作为标签

> ID：14915694
> 
> 赞同：0
> 
> 时间：2013-02-16T22:12:28.970
> 
> 标签：vb.net

我有一个电影院座位项目，可以动态创建复选框作为座位。我在代表座位（alpha）和行（数字）的复选框的顶部和右侧动态创建标签。目前我在顶部有数字，我想要字母，即 A、B、C、D。

这是我的代码

```
Public Class frmSeating
    ' Declare two dynamic arrays to store the created CheckBox and Label
    ' control instances. The array named chkSeats is a 2-dimensional array
    ' and the array lblRow is a one dimensional array.
    Private chkSeats(,) As System.Windows.Forms.CheckBox
    Private lblRow() As System.Windows.Forms.Label
    Private lblSeat() As System.Windows.Forms.Label

    ' The following constants improve readibility by defining the
    ' standard size of each check box, and the number of seats and rows
    ' for each airplane type.
    Private Const cintCheckBoxHeight As Integer = 23
    Private Const cintCheckBoxWidth As Integer = 23

    Private Const cintABCSeats As Integer = 20
    Private Const cintABCRows As Integer = 20

    Private Const cintCBSSeats As Integer = 26
    Private Const cintCBSRows As Integer = 30

    Private Const cintNBCSeats As Integer = 10
    Private Const cintNBCRows As Integer = 25

    ' The variables mintFull and mintEmpty store the number of
    ' occupied and empty seats in the theater.
    Private mintFull As Integer
    Private mintEmpty As Integer

    ' pntCurrent is used to create a Point structure.
    Private pntCurrent As System.Drawing.Point

    ' All of the work takes place in the ConfigureSeating procedure. This
    ' procedure is called by the constructor. See the New procedure in the
    ' Windows Form Designer generated code.
    Private Sub ConfigureSeating(ByVal TheaterType As String)

        ' Variables to store the current seat and the current row.
        Dim pintSeatCurrent, pintRowCurrent As Integer

        ' The Select Case statement configures the airplane based on the
        ' type of airplane. This value is passed to the procedure, and is
        ' obtained from the argument passed through the constructor.
        Select Case TheaterType

            Case "ABC Theater"
                ' Redimension the arrays containing the check boxes and 
                ' labels based on the current Theater configuration.
                ReDim chkSeats(cintABCSeats, cintABCRows)
                ReDim lblRow(cintABCRows)
                ReDim lblSeat(cintABCSeats)

                ' Define the number of empty seats.
                mintEmpty = cintABCSeats * cintABCRows

                ' Create each check box representing a seat.
                For pintSeatCurrent = 0 To cintABCSeats - 1
                    For pintRowCurrent = 0 To cintABCRows - 1
                        pntCurrent = New Point((pintSeatCurrent + 1) * cintCheckBoxWidth, _
                            (pintRowCurrent + 1) * cintCheckBoxHeight)
                        Call CreateCheckBox(pintSeatCurrent, pintRowCurrent, pntCurrent)
                    Next
                Next

                'Create the labels to identify the rows.
                For pintRowCurrent = 0 To cintABCRows - 1
                    Call CreateRowLabel(pintRowCurrent)
                    lblRow(pintRowCurrent).Left = 490
                    lblRow(pintRowCurrent).Top = (pintRowCurrent + 1) * cintCheckBoxHeight
                    lblRow(pintRowCurrent).Height = 15
                    lblRow(pintRowCurrent).Width = 25
                Next
                'Create the labels to identify the columns
                For pintSeatCurrent = 0 To cintABCSeats - 1
                    Call CreateSeatLabel(pintSeatCurrent)
                    lblSeat(pintSeatCurrent).Left = (pintSeatCurrent + 1) * cintCheckBoxHeight
                    lblSeat(pintSeatCurrent).Top = 1
                    lblSeat(pintSeatCurrent).Height = 15
                    lblSeat(pintSeatCurrent).Width = 25
                Next

            Case "CBS Theater"

                ReDim chkSeats(cintCBSSeats, cintCBSRows)
                ReDim lblRow(cintCBSRows)
                ReDim lblSeat(cintCBSSeats)

                mintEmpty = cintCBSSeats * cintCBSRows

                For pintSeatCurrent = 0 To cintCBSSeats - 1
                    For pintRowCurrent = 0 To cintCBSRows - 1
                        pntCurrent = New Point((pintSeatCurrent + 1) * cintCheckBoxWidth, _
                            (pintRowCurrent + 1) * cintCheckBoxHeight)
                        Call CreateCheckBox(pintSeatCurrent, pintRowCurrent, pntCurrent)
                    Next
                Next

                For pintRowCurrent = 0 To cintCBSRows - 1
                    Call CreateRowLabel(pintRowCurrent)

                    lblRow(pintRowCurrent).Left = 625
                    lblRow(pintRowCurrent).Top = (pintRowCurrent + 1) * cintCheckBoxHeight
                    lblRow(pintRowCurrent).Height = 15
                    lblRow(pintRowCurrent).Width = 25
                Next

                For pintSeatCurrent = 0 To cintCBSSeats - 1
                    Call CreateSeatLabel(pintSeatCurrent)
                    lblSeat(pintSeatCurrent).Left = (pintSeatCurrent + 1) * cintCheckBoxHeight
                    lblSeat(pintSeatCurrent).Top = 1
                    lblSeat(pintSeatCurrent).Height = 15
                    lblSeat(pintSeatCurrent).Width = 25
                Next

            Case "NBC Theater"

                ReDim chkSeats(cintNBCSeats, cintNBCRows)
                ReDim lblRow(cintNBCRows)
                ReDim lblSeat(cintNBCSeats)

                mintEmpty = cintNBCSeats * cintNBCRows

                For pintSeatCurrent = 0 To cintNBCSeats - 1
                    For pintRowCurrent = 0 To cintNBCRows - 1
                        pntCurrent = New Point((pintSeatCurrent + 1) * cintCheckBoxWidth, _
                            (pintRowCurrent + 1) * cintCheckBoxHeight)
                        Call CreateCheckBox(pintSeatCurrent, pintRowCurrent, pntCurrent)
                    Next
                Next

                For pintRowCurrent = 0 To cintNBCRows - 1
                    Call CreateRowLabel(pintRowCurrent)

                    lblRow(pintRowCurrent).Left = 255
                    lblRow(pintRowCurrent).Top = (pintRowCurrent + 1) * cintCheckBoxHeight
                    lblRow(pintRowCurrent).Height = 15
                    lblRow(pintRowCurrent).Width = 25
                Next

                For pintSeatCurrent = 0 To cintNBCSeats - 1
                    Call CreateSeatLabel(pintSeatCurrent)
                    lblSeat(pintSeatCurrent).Left = (pintSeatCurrent + 1) * cintCheckBoxHeight
                    lblSeat(pintSeatCurrent).Top = 1
                    lblSeat(pintSeatCurrent).Height = 15
                    lblSeat(pintSeatCurrent).Width = 25
                Next
        End Select

    End Sub

    ' The CreateCheckBox procedure is responsible for actually creating
    ' each CheckBox control instance and adding a reference to the array.
    ' The current seat and row are passed as arguments, along with the 
    ' position of the check box.
    Private Sub CreateCheckBox(ByVal pintSeatCurrent As Integer, ByVal pintRowcurrent As Integer, ByVal pnt As Point)

        ' Create an instance of the CheckBox control and make it visible.
        chkSeats(pintSeatCurrent, pintRowcurrent) = New CheckBox()
        chkSeats(pintSeatCurrent, pintRowcurrent).Visible = True

        ' Define the size of the CheckBox control instance by creating an 
        ' instance of the Size structure and assigning a value to the Size
        ' property.
        chkSeats(pintSeatCurrent, pintRowcurrent).Size = _
            New System.Drawing.Size(cintCheckBoxWidth, cintCheckBoxHeight)

        ' Define the position of the CheckBox control instance.
        chkSeats(pintSeatCurrent, pintRowcurrent).Location = pnt

        ' Add the event handler for the newly created CheckBox control instance. 
        ' The procedure named chkSeats_CheckChanged will handle the CheckedChanged event for
        ' all of the created check boxes.
        AddHandler chkSeats(pintSeatCurrent, pintRowcurrent).CheckedChanged, _
            AddressOf chkseats_CheckedChanged

        ' Finally, add the newly creted CheckBox control instance to the Controls 
        ' collection for the Panel. Note that by adding the control instance to the
        ' Controls collection of the Panel rather than the form, the control instances
        ' will be contained by the Panel. The reason is simple. The CheckBox control
        ' instances will scroll with the Panel instead of the form.
        Me.pnlSeats.Controls.Add(chkSeats(pintSeatCurrent, pintRowcurrent))
    End Sub

    ' The CreateLabel procedure is responsible for actually creating each
    ' Label control instance and adding a reference to the array.
    Private Sub CreateRowLabel(ByVal pintRowCurrent As Integer)
        lblRow(pintRowCurrent) = New Label()
        lblRow(pintRowCurrent).Visible = True
        lblRow(pintRowCurrent).Text = (pintRowCurrent + 1).ToString()
        Me.pnlSeats.Controls.Add(lblRow(pintRowCurrent))
    End Sub

    Private Sub CreateSeatLabel(ByVal pintSeatCurrent As Integer)
        lblSeat(pintSeatCurrent) = New Label()
        lblSeat(pintSeatCurrent).Visible = True
        lblSeat(pintSeatCurrent).Text = (pintSeatCurrent + 1).ToString()
        Me.pnlSeats.Controls.Add(lblSeat(pintSeatCurrent))
    End Sub

    ' The CheckedChanged event handler is a multicast event handler and
    ' handles the CheckedChanged event for all of the CheckBox control instances.
    ' The statements in the event handler update the number of full or empty
    ' seats in the theater.
    Private Sub chkseats_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)

        ' Declare a varible to store the CheckBox.
        Dim chkCurrent As System.Windows.Forms.CheckBox

        ' Again, because sender is of type System.Object, explicitly convert
        ' the argument to a check box using the CType function
        chkCurrent = CType(sender, System.Windows.Forms.CheckBox)

        ' If the check box is checked, increment the number of occupied seats
        ' and decrement the number of empty seats. If the check box is not checked,
        ' then do the reverse.
        Select Case chkCurrent.Checked
            Case True
                mintFull += 1
                mintEmpty -= 1
            Case False
                mintFull -= 1
                mintEmpty += 1
        End Select

        ' Display the results in the labels.
        lblFull.Text = mintFull.ToString()
        lblEmpty.Text = mintEmpty.ToString()
    End Sub

    ' Uncheck all of the check boxes by enumerating the Controls collection of the Panel.
    Private Sub mmuSeatsClear_Click(sender As System.Object, e As System.EventArgs) Handles mmuSeatsClear.Click

        Dim ctlCurrent As Control
        Dim chkCurrent As CheckBox

        ' The For Each loop enumerates the Controls collection for the 
        ' Panel rather than the form.
        For Each ctlCurrent In pnlSeats.Controls
            ' Check that the type of the control instance is a CheckBox. 
            ' Labels are also contained by the Panel. If the control instance
            ' is a CheckBox, then remove the check mark by setting the Checked property
            ' to False.
            If TypeOf (ctlCurrent) Is System.Windows.Forms.CheckBox Then
                chkCurrent = CType(ctlCurrent, System.Windows.Forms.CheckBox)
                chkCurrent.Checked = False
            End If
        Next
        lblFull.Text = ""
        lblEmpty.Text = ""
    End Sub

    Private Sub mmuFileExit_Click(sender As System.Object, e As System.EventArgs) Handles mmuFileExit.Click
        Me.Close()
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:29:10.553

获取 ascii 值的 Char 表示：

```
Private Sub CreateSeatLabel(ByVal pintSeatCurrent As Integer)
    lblSeat(pintSeatCurrent) = New Label()
    lblSeat(pintSeatCurrent).Visible = True
    lblSeat(pintSeatCurrent).Text = Chr(pintSeatCurrent + 65)
    Me.pnlSeats.Controls.Add(lblSeat(pintSeatCurrent))
End Sub 
```

`65`[是ASCII Chart](http://www.idautomation.com/product-support/ascii-chart-char-set.html)中表示`A`字符的值。每次索引增加 1，您将获得下一个字母字符。

# c++ - 错误：无法在 swscale-2.dll 中找到序数 139

> ID：14915701
> 
> 赞同：0
> 
> 时间：2013-02-16T22:13:24.100
> 
> 标签：c++, visual-studio-2010, ffmpeg

名义上是一个 ffmpeg 问题，但它可能是标准 Windows 库和 VS 版本的问题

运行Win 7、VS2010；我的程序使用 ffmpeg 库和 dll，所以我刚刚将 ffmpeg 库升级到 ffmpeg-1.1.1 win 32 dev 用于库和 win32-shared 用于 dll。

在调试模式下运行我的程序，它运行良好。更改为发布模式，重新编译所有并尝试运行。我立即收到错误消息 Ordinal 139 could not be located in swscale-2.dll

两次运行都使用相同的 dll [好吧，我将它们从 Debug 文件夹复制到 Release 文件夹。两次]，就像我在调试模式下运行时一样。

有什么线索吗？这个让我难住了。

* * *

所以我正在比较调试和发布之间的属性页。

*   两者都有多头调试集（C++/代码生成）
*   发布模式将线性优化引用设置为 Yes /OPT:REF 而调试没有；

==> 将其设置为 NO 并没有收到错误消息 re Ordinal 39 not found。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:08:16.043

我在为 Windows 编译的 ffmpeg 中遇到了这个问题。它总是一个 dll/lib 不匹配。即使我的主 exe 链接到正确的 ffmpeg 库，我的项目中的某些 dll 或库也没有使用新编译的 ffmpeg 库。所以你可能已经正确编译了你的调试依赖而不是你的发布依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:17:03.883

这与使用错误文件几乎没有什么不同。如果您自己构建它们，请确保：

*   您使用 FFmpeg 生成的正确 DLL 和 LIB 文件
*   您的应用程序加载正确的 DLL，例如第三方软件安装的位于 \Windows\system32 中的那些

您还可以使用 Dependency Walker 来识别不匹配并检查您尝试使用的 swscale.dll 是否确实具有相关的导出函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:17:03.233

不同 lib 和 dll 的建议是错误的。重新编译库的建议是错误的，因为基本上 ffmpeg 使用了一些类似 Linux 的结构，并且只能为 Windows 编译困难，因此使用它们的 lib 和 dll。

这是我以痛苦的方式找到的正确答案——不要删除它，因为它实际上是任何陷入“无法找到序数 xxx i yyyy.dll”错误的人的正确答案

所以我正在比较调试和发布之间的属性页。

两者都有多头调试集（c++/代码生成）发布模式将线性优化引用设置为 Yes /OPT:REF 而调试没有；==> 将其设置为 NO 并没有收到错误消息 re Ordinal 39 not found。

# opengl - GLSL Tessellation 着色器的三角形/面数？

> ID：14915705
> 
> 赞同：0
> 
> 时间：2013-02-16T22:13:59.123
> 
> 标签：opengl, glsl

[我已经实现了一个三角形镶嵌着色器，如本](http://antongerdelan.net/opengl/index.php?title=Tessellation_Shaders)网站上的示例所示。

如何确定将为已定义`inter`和`outer`细分因子输出的面总数？- 它不会以任何方式影响我的程序我只想知道我的多边形/面数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:29:38.057

可以使用简单的递归找到单个三角形的重心细分（内部和外部细分相等）的三角形数量：

```
// Calculate number of triangles produced by barycentric subdivision (i.e. tessellation)
// Where n is the level of detail lod and outer and inner level is always equal
int calculateTriangles(int n) {

    if(n < 0)   return 1;                               // Stopping condition
    if(n == 0)  return 0;
    return ((2*n -2) *3) + calculateTriangles(n-2);     // Recurse
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T04:43:15.610

这是基于内部级别和外部级别的三角形，四边形和线的顶点数或面数的完整答案！

我需要一个类似的答案，即在给定细分和内部和外部细节级别（所有 LOD 可以不同）的情况下生成的顶点数量。我解决了这个问题，并没有进一步计算出面孔的数量。

因此，对于三角形镶嵌，这是两者的答案。我对 LOD 的语法是 IL 表示内部 LOD，OL0、OL1 和 OL2 表示三个边缘的外部 LOD。

```
 Inner faces/triangles (based only on IL):
      if IL==1 -> inner faces = 0
      if IL odd -> inner faces = 3/2*(IL-1)(IL-3)+1
      if IL even -> inner faces = 6*(IL/2-1)^2
  Outer faces/triangles
      if IL==1 -> outer faces = (OL0+OL1+OL2 == 3) ? 1 : OL0+OL1+OL2
      else -> outer faces = 3*IL+OL0+Ol1+OL2-6
  Total = Inner + Outer faces 
```

我知道——那些看起来很疯狂的方程式。真正有帮助的一件事是意识到*任何*单调递增序列的总和，例如 (7+9+11+13+15+17) 可以计算为 (num_elements/2*(first_element+last_element)。这就是平方结束的地方来自。

如果有人关心顶点的数量：

```
 Inner vertices:
      if IL==1 -> inner vertices = (OL0+OL1+OL2 == 3) ? 0 : 1
      if IL odd -> inner vertices = (IL-1)^2 * 3/4
      if IL even -> inner vertices = 3((IL/2)^2-IL/2) +1
  Outer vertices = OL0+OL1+OL2
  Total = Inner + Outer vertices (OL0+OL1+OL2) 
```

这是顶点和三角形面数的四边形的答案。

```
 Quad Vertices   (LOD levels are IL0, IL1, OL0, OL1, OL2, OL3)
      Inner vertices:
          if IL0==IL1==1 but OL0+OL1+OL2+OL3>4 -> inner vertices = 1
          else -> inner vertices = (IL0-1)*(IL1-1)
      Outer vertices = OL0+OL1+OL2+OL3
      Total = Inner + Outer vertices

  Quad Faces (triangles)
      Outer ring faces =
        if IL0==IL1==OL0=OL1=OL2=OL3==1 -> 1 face total
        if IL0==IL1==1 but OL0+OL1+OL2+OL3>4 -> calc as if IL0=IL1=2
        else OL0+OL1+OL2+OL3+2*IL0+2*IL1-8
      Inner faces:
        if IL0<3 and IL1<3 -> 0
        else 2*(IL0-2)*(IL1-2)
      Total = Inner + Outer
          i.e.: when IL0/IL1>2 -> OL0+OL1+OL2+OL3+2*IL0+2*IL1-8 + 2*(IL0-2)*(IL1-2) 
```

比较等值线非常简单：

```
 Isoline (LOD levels are OL0, OL1 - OL0 is missing top edge)
      num vertices = OL0*(OL1+1)
      num segments = OL0*OL1 
```

唷，这是一些很长的方程式！

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T22:18:50.547

好吧，当我处理内部和外部镶嵌时，这有助于我理解如何计算它们。非常合理和直接的解释。:)

[http://prideout.net/blog/?p=48](http://prideout.net/blog/?p=48)

[http://prideout.net/blog/?p=49](http://prideout.net/blog/?p=49)

# ruby-on-rails - rails实时应用

> ID：14915714
> 
> 赞同：-1
> 
> 时间：2013-02-16T22:15:16.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, node.js, socket.io, real-time

我正在构建一个实时应用程序，并且我正在使用基于 fayejs 的 private_pub gem，但它没有很多功能，例如 pusher ex。我可以为我获取在线用户的存在渠道对于我的应用程序来说推送器很昂贵任何人都可以帮助我

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T08:18:30.873

我不知道为什么它对您的应用程序来说很昂贵，但我从未发现任何问题。

请参考此链接。

[http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/](http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/)

# javascript - 如何将前导“0”添加到日期字符串的月/日？

> ID：14915718
> 
> 赞同：4
> 
> 时间：2013-02-16T22:16:02.247
> 
> 标签：javascript, jquery, date, datepicker

所以我写了一个方法，它需要一个数字并从当前日期减去月数。

我试图弄清楚如何在小于 10 的月份前添加“0”。此外，如何在小于 10 的日期前添加“0”。

目前，当它返回对象时（2012-6-9）。它返回 6 和 9，前面没有“0”，有人可以告诉我怎么做吗？

这是我的代码

```
lastNmonths = function(n) {
    var date = new Date();

    if (n <= 0)
        return [date.getFullYear(), date.getMonth() + 1 , date.getDate()].join('-');
    var years = Math.floor(n/12); 

   var months = n % 12;

    if (years > 0)
        date.setFullYear(date.getFullYear() - years);

    if (months > 0) {
        if (months >= date.getMonth()) {
            date.setFullYear(date.getFullYear()-1 );
            months = 12 - months; 
            date.setMonth(date.getMonth() + months );
        } else {
            date.setMonth(date.getMonth() - months);
        }
    }

}

    return [date.getFullYear(), date.getMonth() + 1, date.getDate()].join('-');
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T22:26:40.733

如果 n < 10，您还可以使用以下方法避免测试：

```
("0" + (yourDate.getMonth() + 1)).slice(-2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:22:43.047

你可以写一个像这样的小函数：

```
function pad(n) {return (n<10 ? '0'+n : n);} 
```

并将月份和日期传递给它

```
return [date.getFullYear(),pad(date.getMonth() + 1), pad(date.getDate())].join('-'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:26:32.110

尝试连接“0”：

```
 month = date.getMonth() + 1 < 10 ? '0' + date.getMonth() + 1 : date.getMonth() + 1
   return [date.getFullYear(), month, date.getDate()].join('-'); 
```

# ruby-on-rails - 具有自动管理界面和登录的框架

> ID：14915723
> 
> 赞同：2
> 
> 时间：2013-02-16T22:17:02.193
> 
> 标签：ruby-on-rails, django, web-applications

我喜欢尝试不同的语言来保持我在日常工作之外的小型项目上的兴趣。

我发现摆脱 Django 和 Ruby on Rails 变得越来越困难，因为它们附带了一些特性（或者大部分是默认的且易于集成）：身份验证和自动管理界面。Django 两者都有，使用 Rails，您只需将 ActiveAdmin 添加为 gem，就可以开始使用了。

当我尝试使用不同的框架和语言（Clojure 的 Noir，Node 的 Express）时，大多数时候我会发现我喜欢使用的有趣语言，但它们的“Web 框架”想法只是路由和路由的一些方便方法解析 URL 和请求，让您独自处理 Web 开发中所有常见和烦人的部分，例如表单验证、用户身份验证和分析、拥有工作的管理界面等等，所有这些都是 Django 和 RoR 免费提供给您的。

还有哪些其他语言和框架有这样的商品？我知道一些 PHP 框架，例如 Symfony，但我确实在过去几年中使用 PHP 的时间太长了，而且我已经受够了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:08:23.240

在我看来，坚持使用 RoR。它仍然是一个年轻而强大的框架。它得到了良好的维护，并在已知安全风险时迅速插入。

您使用哪种 MVC 框架并不重要，因为这一切都取决于程序员。Ruby on Rails 消除了编程 (IMO) 中痛苦的部分，让您可以完成愉快的部分。在 Rails 中对 SQL 知识的要求非常低，除非您正在做复杂的范围界定。

如果我在找到一种适合我所有需求的语言之后继续寻找不同的语言进行探索，那么我将永远无法完成任何事情。在我看来，从 PHP/CakePHP 迁移到 Rails 绝对是一种升级，但在这一点上，你最好还是使用一种语言（Python/Django 或 Ruby/Rails）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:01:55.880

我会坚持使用 Django。从经典的 ASP、ASP.NET、ASP.NET MVC、Java、PHP 和 Rails 开始，我可以毫不含糊地说 Django 是我用过的最容易使用、最有利可图的框架。

Rails 确实有一些漂亮的控制器，但是当你深入了解功能时，它就显得相形见绌了。当然，Rails 有很多插件，但是 Django 几乎可以将你需要的一切都集中在一个屋檐下。仅 Django-admin 就是一座金矿。我作为一名技术架构师全职工作，但也拥有自己的企业。2008 年从 Rails 切换到 Django 是我为我的业务做过的最好的事情。

如果你想要一些灵活、模块化、易于扩展和令人难以置信的文档，那么 Django 就是你的选择。您还会看到非常少的关于 Django 的[这些可爱的帖子](http://threatpost.com/en_us/blogs/ruby-rails-patches-dos-remote-execution-flaws-021313)。

# javascript - 血压的正则表达式

> ID：14915724
> 
> 赞同：6
> 
> 时间：2013-02-16T22:17:06.003
> 
> 标签：javascript, regex

我有以下正则表达式来验证收缩压/舒张压形式的血压值：

`\b[0-9]{1,3}\/[0-9]{1,3}\b`

该表达式的唯一缺陷是它允许多个非连续斜杠 (/)。例如，它允许 this `2/2/2`。我希望它只允许从 1 到 999 的数字格式和斜线，以及从 1 到 999 的数字。例如，83/23、1/123、999/999、110/80 等。可以有人给我一些帮助吗？

我发现的唯一其他表达式[是在这里](http://regexlib.com/%28A%28vN9p5isH7AWDW5_So2QPyMryVsydhnd82vLVCzR1nXmqlxshgWRqJSpLyy71BExWfuANSrQdw3ByLaoFlaLNxZBsWxljvE-JekHUftKQ2eC-MD4nfS2PFZUD5YfFIIad6c59TfkC2-oK02pycT8IloxKRWH99tKVq8Ucjn4c3E8YcuKF2oSmX2HGKJaL39fA0%29%29/REDetails.aspx?regexp_id=2769&AspxAutoDetectCookieSupport=1): `^\b(29[0-9]|2[0-9][0-9]|[01]?[0-9][0-9]?)\\/(29[0-9]|2[0-9][0-9]|[01]?[0-9][0-9]?)$`，但它不起作用。

顺便说一句，我正在使用 jquery。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T22:28:48.860

使用`^`and`$`匹配字符串的开头和结尾：

```
^\d{1,3}\/\d{1,3}$ 
```

通过这样做，您强制匹配的字符串*完全*符合该格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:31:24.380

不要使用`\b`单词边界，因为斜线算作单词边界。

使用`^`和/或`$`可能是您最简单的解决方案。不幸的是，如果您的输入是字符串或句子的一部分，或者在一行中出现多次等，那么您需要考虑更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-18T11:21:52.753

扩展 Blender 的答案，这是一个简单的检查，用于验证 BP 值的格式：120/80：

```
if(/^\d{1,3}\/\d{1,3}$/.test(120/80)) {
    console.log("BP Valid");
} else {
    console.log("Invalid BP");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-25T23:30:17.740

```
^\b(29[0-9]|2[0-9][0-9]|[01]?[0-9][0-9]?)\/(29[0-9]|2[0-9][0-9]|[01]?[0-9][0-9]?)$ 
```

这是正确的，另一个有一个额外的\

# c++ - C ++：无法将'float（*）（）'转换为'float'

> ID：14915728
> 
> 赞同：0
> 
> 时间：2013-02-16T22:17:35.810
> 
> 标签：c++

我是编程新手，今天我开始使用函数。当我尝试编译代码时，我收到此错误消息：

> 34|错误：无法将参数 '1' 的 'float (*)()' 转换为 'float' 到 'float calculator(float, float, char)'|

问题出在哪里？

```
#include <iostream>
using namespace std;

//Insert number
float ins_num(){
    float num;
    cout<<"Insert a number: ";
    cin>>num;
    return num;
}

//Insert operator
char ins_oper(){
    char oper;
    do{
        cout<<"Insert the operator: ";
        cin>>oper;
    }
    while(oper!='+'&&oper!='-'&&oper!='*'&&oper!='/');
    return oper;
}

//Calculator
float calculator(float n1,float n2,char oper){
    switch(oper){
        case '+':return n1+n2;
        case '-':return n1-n2;
        case '*':return n1*n2;
        case '/':return n1/n2;
    }
}

int main(){
calculator(ins_num,ins_num,ins_oper);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:20:59.987

```
calculator(ins_num, ins_num, ins_oper); 
```

这将调用`calculator()`函数，并以`ins_num`and`ins_oper` **函数本身**作为参数（其类型是`float (*)()`and `char (*)()`，一个指向函数的指针，分别返回`float`or `char`，并且不带参数）。你不想要那个。您想使用其他函数`calculator()`的**返回值**调用该函数，因此您也应该*调用*它们：

```
calculator(ins_num(), ins_num(), ins_oper()); 
```

这里有一些关于函数指针[的思考。](http://c-faq.com/~scs/cgi-bin/faqcat.cgi?sec=decl#ptrfuncinit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:25:46.757

要在函数中执行代码，您需要使用程序员所说的*函数调用*。在 C++ 中，我们使用括号来执行此操作。所以，至少，你需要改变

```
calculator(ins_num,ins_num,ins_oper); 
```

至

```
calculator(ins_num(),ins_num(),ins_oper()); 
```

不过，你需要小心。在我看来，你在这一行代码中做的太多了。我建议你把它分成几行：

```
float lhs = ins_num(); // "lhs" is a common mathematical abbreviation for "left hand side"
float rhs = ins_num(); // "rhs" is a common mathematical abbreviation for "right hand side"
char oper = ins_oper();

calculator(lhs, rhs, oper); 
```

这样做的主要原因是，当您的程序变得更加复杂时，它将帮助您跟踪错误。

# iphone - 我应该如何理解 app bundle 中的 tmp 文件夹？它会在某个时刻被清除吗？

> ID：14915732
> 
> 赞同：3
> 
> 时间：2013-02-16T22:18:29.587
> 
> 标签：iphone, xcode, bundle, video-capture, temp

我正在使用我的应用程序捕获视频。我正在考虑将捕获的电影保存到 Documents 文件夹中。我探索了项目包，看到捕获的电影被保存了 2 次。它在 tmp 和我的 Documents 文件夹中。tmp文件夹会被清除还是什么？或者可以将捕获的电影仅保留在 tmp 中？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:36:01.630

*当您的应用程序未运行时*，这些文件可能会在某个时候被删除。

该`/tmp/`目录适用于您不需要在应用程序启动之间保留的文件。要使用的正确目录取决于您的应用程序的要求。

*在iOS 标准目录*下的 Apple[文件系统编程指南](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)中有很好的描述：文件所在的位置和*应用程序文件的*位置。

# asp.net-mvc - 应使用现有记录时正在创建新记录

> ID：14915737
> 
> 赞同：-2
> 
> 时间：2013-02-16T22:19:03.813
> 
> 标签：asp.net-mvc, json, entity-framework

我试图弄清楚为什么当我将数据发布到我的 MVC4 控制器时，当应该使用现有记录时会创建新记录。

我的控制器如下：

```
 public ActionResult Edit(Song song) {
    JsonBase jsonBase;
    var dbSong = _songRepository.FindById(song.Id);
    TryUpdateModel(dbSong, String.Empty, null, new String[] { "CreatedDate", "SongAlternateTitles", "SongWriterSongs", "Exploitations" });
    if (ModelState.IsValid) {
        _unitOfWork.Commit();
        jsonBase = new JsonBase(true, null, new { Id = dbSong.Id });
    }
    else {
        jsonBase = new JsonBase(false, ModelState.Values);
    }
    return Json(jsonBase);
} 
```

Song 对象如下所示：

```
public class Song : IEntity
{
    public virtual Int32 Id { get; set; }

    [Required]
    [StringLength(128, ErrorMessage = "Song Title cannot exceed 128 characters")]
    public virtual String Title { get; set; }

    [Required]
    [StringLength(512, ErrorMessage = "Song Description cannot exceed 512 characters")]
    public virtual String Description { get; set; }

    [StringLength(8000, ErrorMessage="Song lyrics cannot exceed 4096 characters")]
    public virtual String Lyrics { get; set; }

    [Required]
    [Display(Name="Song Status")]
    public virtual Boolean isMaster { get; set; }

    [StringLength(256, ErrorMessage = "File Path cannot exceed 256 characters.")]
    public virtual String AudioFilePath { get; set; }

    [StringLength(256, ErrorMessage = "File Path cannot exceed 256 characters.")]
    public virtual String CoverImageFilePath { get; set; }

    public virtual DateTime CreatedDate { get; set; }

    public virtual Int32? BPM { get; set; }

    public virtual ICollection<Tag> Tags { get; set; }
    public virtual ICollection<SongAlternateTitles> SongAlternateTitles { get; set; }
    public virtual ICollection<Exploitation> Exploitations { get; set; }
    public virtual ICollection<SongWriterSong> SongWriterSongs { get; set; }
    public virtual ICollection<Tweak> Tweaks { get; set; }
} 
```

我正在传递如下所示的 JSON 数据：

```
{"id":681,"title":"Another You","description":"Cascada - Everytime We Touch","lyrics":"","ismaster":false,"audiofilepath":"http://songistry.blob.core.windows.net/audiosamples/3211556309.mp3","coverimagefilepath":"http://songistry.blob.core.windows.net/coverimages/2711679216.jpg","tags":[{"id":43,"name":"Edgy","description":"This music is on the edge!","valid":true,"editing":false,"checked":true},{"id":44,"name":"Pop","description":"This music pops!","valid":true,"editing":false,"checked":true},{"id":47,"name":"Positive","description":"Positive","valid":true,"editing":false,"checked":true},{"id":45,"name":"Quirky","description":"Quirky","valid":true,"editing":false,"checked":true},{"id":46,"name":"R&B","description":"R&B","valid":true,"editing":false,"checked":true}],"songalternatetitles":[],"exploitations":[],"songwritersongs":[{"Id":742,"Pro":{"Id":2,"Name":"ASCAP"},"Publisher":{"Id":2,"Name":"Some Publisher","Phone":"4035555555","ContactName":"Some Guy","ContactEmail":"guy@songistry.com","ContactPhone":"4035555555","Address":"123 fake street"},"Percentage":100,"SongWriter":{"Id":1,"FirstName":"Mike","LastName":"Cottingham","Name":"Mike Cottingham","Pro":{"Id":2,"Name":"ASCAP"},"Publisher":{"Id":2,"Name":"Some Publisher","Phone":"4035555555","ContactName":"Some Guy","ContactEmail":"guy@songistry.com","ContactPhone":"4035555555","Address":"123 fake street"}}},{"Id":771,"Pro":{"Id":206,"Name":"ACUM"},"Publisher":{"Id":2,"Name":"Some Publisher","Phone":"4035555555","ContactName":"Some Guy","ContactEmail":"guy@songistry.com","ContactPhone":"4035555555","Address":"123 fake street"},"Percentage":0,"SongWriter":{"Id":8,"FirstName":"Jessica","LastName":"Cottingham","Name":"Jessica Cottingham","Pro":{"Id":1,"Name":"Socan"},"Publisher":{"Id":2,"Name":"Some Publisher","Phone":"4035555555","ContactName":"Some Guy","ContactEmail":"guy@songistry.com","ContactPhone":"4035555555","Address":"123 fake street"}}}]} 
```

当应该使用现有记录时，正在为标签创建新记录。我究竟做错了什么？我假设如果我在包含 ID 的标签中传递标签，模型绑定器会自动计算出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:49:26.713

模型绑定器对 ID 一无所知。它甚至不知道 ID 是什么。因此它无法将 JSON 中的更改*合并*到 Tags 集合。

我不确定直接绑定到实体的方式是否有解决方案。我建议为整个结构创建视图模型（因为视图模型类是微不足道的 DTO，所以工作量不大）。然后，您需要手动合并更改，这可能涉及在视图模型标签和实体标签之间进行连接。

这是一个很好的系统，即使一开始看起来很费力。它让你完全控制。您甚至可以添加诸如“当且仅当标签名称更改时，我会将 TagNameChangeDateTime 设置为 UtcNow”之类的流程。绑定不能扩展来做这样的事情。

# java - JSP 不使用 Spring MVC 进行评估

> ID：14915739
> 
> 赞同：2
> 
> 时间：2013-02-16T22:19:20.707
> 
> 标签：java, jsp, spring-mvc

我正在尝试使用注释驱动配置在 Spring 3.2 中呈现 JSP，但 JSP 呈现为字符串并且不被评估。

我正在使用 maven jetty 插件在开发中运行 webapp。所以似乎一切都应该“正常工作”。

我包括使用 JSP 的依赖项是

```
<dependency>
  <groupId>javax.servlet.jsp</groupId>
  <artifactId>jsp-api</artifactId>
  <version>2.1</version>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
</dependency> 
```

配置 JSP 的 bean 是

```
@Configuration
public class WebAppConfiguration {
  @Bean
  public InternalResourceViewResolver internalResourceViewResolver() {
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    resolver.setPrefix("/views/");
    resolver.setSuffix(".jsp");
    return resolver;
  }
} 
```

控制器非常简单

```
@Controller
public class RootController {
  @RequestMapping(value = "/login")
  public String login() {
    return "login";
  } 
```

而且JSP也很简单

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<!DOCTYPE html>

<html>
<head></head>
<body>
<%= "Hello World" %>
${ "Hello World" }
<form name="auth" action="<c:url value='j_spring_security_check' />" method="POST">
  <label>Username: <input type="text" name="j_username"></label>
  <label>Password: <input type="password" name="j_password"></label>
  <input type="submit" value="Submit"/>
</form>
</body>
</html> 
```

从图中可以看出，JSP 没有被评估。我需要做些什么来告诉 JSP 在呈现时进行评估。

![呈现的页面](../Images/11bffd6422c9b8004a2415d9d58386fc.png)

### 编辑 1

所以只是为了一点额外的信息，我使用了[Resthub 原型 resthub-mongodb-backbonejs-archetype](https://github.com/resthub/resthub.org/blob/master/spring-stack.rst#bootstrap-your-project)来引导这个项目，它使用 WebAppInitializer 而不是旧的 web.xml，它使用新的注释驱动 bean 而不是 xml bean。

* * *

### 编辑 2

很长时间以来，我一直在努力解决这个问题，所以我把这个项目放在了 github [https://github.com/austinbv/calendar/](https://github.com/austinbv/calendar/)上。因为我不知道什么重要什么不重要。

谢谢您的帮助

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:56:47.737

@austinbv Please use the [SPRING LINK](http://static.springsource.org/docs/Spring-MVC-step-by-step/part2.html#step2.1) to check the setup. (As @Rohit has pointed you above - the missing piece)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-26T03:53:06.010

我在使用弹簧靴时遇到了同样的问题。将这些依赖项添加到项目 pom.xml 解决了该问题：

```
<dependency>
    <groupId>tomcat</groupId>
    <artifactId>jasper-compiler</artifactId>
    <version>5.5.23</version>
</dependency>
<dependency>
    <groupId>tomcat</groupId>
    <artifactId>jasper-runtime</artifactId>
    <version>5.5.23</version>
</dependency>
<dependency>
    <groupId>tomcat</groupId>
    <artifactId>jasper-compiler-jdt</artifactId>
    <version>5.5.23</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-13T04:11:10.867

在“web.xml”中进行以下更改后，上述问题已为我解决

spring servlet 需要是默认的 servlet。即映射到/而不是/*。

参考链接：[https ://code-examples.net/en/q/b49ce1](https://code-examples.net/en/q/b49ce1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T06:58:06.923

我不知道我的答案会有多少实际，但我遇到了完全相同的问题（Spring + boot + maven + tomcat）。我通过从 tomcat.embed 依赖中删除 scope-provided 来解决它。所以，我的依赖现在看起来像这样：

```
<dependency>
    <groupId>org.apache.tomcat.embed</groupId>
    <artifactId>tomcat-embed-jasper</artifactId>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T23:52:04.387

您需要指定适当的视图类

```
 public InternalResourceViewResolver internalResourceViewResolver() {
InternalResourceViewResolver resolver = new InternalResourceViewResolver();
resolver.setViewClass(org.springframework.web.servlet.view.JstlView.class);
resolver.setPrefix("/views/");
resolver.setSuffix(".jsp");
return resolver; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-08T06:26:33.140

因为 JSP 不遵循 MVC 模式：P

# maven - 无法制作 cobertura 覆盖范围

> ID：14915741
> 
> 赞同：1
> 
> 时间：2013-02-16T22:20:01.610
> 
> 标签：maven, code-coverage, cobertura

我的代码包含测试，这些测试运行良好`mvn clean install`

我已经包含了一个 cobertura prlugin，以便将报告生成为

```
 <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <formats>
                        <format>xml</format>
                        <format>html</format>
                    </formats>
                    <check/>
                </configuration>
                <executions>
                    <execution>
                        <phase>clean</phase>
                        <goals>
                            <goal>cobertura</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

最后，HTML`target`按预期生成。`index.html`显示所有类和包，但...没有覆盖信息（全部覆盖率为 0%）

如果我通过它导出覆盖范围，`IntelliJ`则会适当地显示覆盖范围。我的设置是否缺少明显的东西？

请帮我理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:42:39.990

看起来问题在于您正试图`cobertura`在`clean`项目阶段执行。

根据文档，Cobertura 使用自己的生命周期：http: [//mojo.codehaus.org/cobertura-maven-plugin/cobertura-mojo.html](http://mojo.codehaus.org/cobertura-maven-plugin/cobertura-mojo.html)

请`<phase>clean</phase>`从您的`execution`配置中删除，然后重试。

此处进一步参考：

*   [当 cobertura 测试在 maven-cobertura-plugin 中运行时如何配置？](https://stackoverflow.com/questions/8449283/how-do-i-configure-when-cobertura-tests-run-in-maven-cobertura-plugin)
*   [http://mojo.codehaus.org/cobertura-maven-plugin/usage.html](http://mojo.codehaus.org/cobertura-maven-plugin/usage.html)

# java - MySQL jdbc 驱动程序

> ID：14915742
> 
> 赞同：-1
> 
> 时间：2013-02-16T22:20:15.020
> 
> 标签：java, mysql, jdbc

我有一个让我发疯的问题，我真的不习惯使用 mySQL 数据库，我真的需要一些帮助。我想连接到我的 MySQL 数据库以运行查询并最终能够将数据加载到数据库中并测量加载、查询等所消耗的时间，因此我可以比较不同类型数据库的性能。我认为我让 forName 工作，但现在它抱怨 dbUrl。有人可以向我解释我做错了什么吗？

提前致谢！

```
import java.sql.*;
import java.util.Properties;

import javax.sql.*;

public class jdbcdemo{

public static void main(String args[]){
String dbtime;
String dbUrl = "jdbc:mysql://localhost:3306/Meeting";
String dbClass = "com.mysql.jdbc.Driver";
String query = "Select * FROM customer";

Properties properties = new Properties();
properties.put("user", "student");
properties.put("password", "ingan86");

try {

Class.forName("com.mysql.jdbc.Driver"); 
Connection con = DriverManager.getConnection (dbUrl,properties);
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(query);

while (rs.next()) {
dbtime = rs.getString(1);
System.out.println(dbtime);
} 

con.close();
} 
catch(SQLException e) {
e.printStackTrace();
}

catch(Exception e) {
e.printStackTrace();
}

}  

} 
```

堆栈跟踪：

```
java.sql.SQLException: Access denied for user 'student'@'localhost' (using password:   YES)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2975)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:798)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3700)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1203)
at com.mysql.jdbc.Connection.createNewIO(Connection.java:2572)
at com.mysql.jdbc.Connection.<init>(Connection.java:1485)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at jdbcdemo.main(jdbcdemo.java:22) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:24:32.683

确保用户`student`有足够的权限使用您的数据库：

```
GRANT ALL PRIVILEGES
ON Meeting.*
TO student@localhost
IDENTIFIED BY 'ingan86'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:14:16.300

这可能是一个遥远的镜头，但我曾经遇到过这个问题。检查您的主机文件。查看 127.0.01 是否映射到 localhost。

查找 - [http://en.wikipedia.org/wiki/Hosts_(file)](http://en.wikipedia.org/wiki/Hosts_(file))

# c++ - ULARGE_INTEGER 联合的意义何在？

> ID：14915752
> 
> 赞同：5
> 
> 时间：2013-02-16T22:21:48.757
> 
> 标签：c++, c, windows, winapi

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383742%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383742%28v=vs.85%29.aspx)

它们应该是这样使用的，在 LowPart 和 HighPart 上设置两个 32 位值，然后在 QuadPart 上执行算术运算。

```
int a,b,c;
ULARGE_INTEGER u;
...
u.LowPart = a;
u.HighPart = b;
u.QuadPart += c; 
```

因此，如果您要在 QuadPart（64 位）上执行算术运算，您需要一个 64 位处理器，对吗？那么重点是什么？为什么不直接将值分配给 QuadPart？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T22:49:32.013

您不需要 64 位处理器来对 64 位数据类型执行算术运算。我所知道的所有 32 位编译器都支持 64 位整数的算术运算。如果硬件不允许本机算术，则编译器必须生成代码来执行算术。通常这将利用编译器 RTL 中的支持函数。

该结构旨在供不为 64 位数据类型提供本机支持的编译器使用。您链接到的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383742.aspx)清楚地说明了这一点：

> **注意** 您的 C 编译器可能原生支持 64 位整数。例如，Microsoft Visual C++ 支持**__int64**大小的整数类型。有关详细信息，请参阅 C 编译器随附的文档。

不支持本机 64 位整数的编译器将无法将`QUADPART`联合成员视为整数。

```
typedef union _ULARGE_INTEGER {
  struct {
    DWORD LowPart;
    DWORD HighPart;
  };
  struct {
    DWORD LowPart;
    DWORD HighPart;
  } u;
  ULONGLONG QuadPart;
} ULARGE_INTEGER, *PULARGE_INTEGER; 
```

以及 的定义`ULONGLONG`：

```
#if !defined(_M_IX86)
 typedef unsigned __int64 ULONGLONG;
#else
 typedef double ULONGLONG;
#endif 
```

当然，过去 10 年（或更长时间）编写的所有编译器都将原生支持 64 位整数。但是这个联合是很久以前引入的，那时的编译器环境会有所不同。查看 Windows 头文件时，请始终牢记历史和遗留问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T09:23:02.630

通常`ULARGE_INTEGER`在您需要将一对 32 位整数转换为 64 位整数时使用，反之亦然。

例如，考虑操作一个[`FILETIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)结构：

```
void add_millisecond(FILETIME * ft)
{
  ULARGE_INTEGER uli;
  uli.LowPart = ft->dwLowDateTime;
  uli.HighPart = ft->dwHighDateTime;
  uli.QuadPart += 10000;
  ft->dwLowDateTime = uli.LowPart;
  ft->dwHighDateTime = uli.HighPart;
} 
```

您无法直接分配 QuadPart 值，因为您没有它；你所拥有的只是高低部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T22:31:58.790

> 因此，如果您要在 QuadPart（64 位）上执行算术运算，您需要一个 64 位处理器，对吗？

不，但真正的问题应该是，你需要一个支持 64 位整数类型的编译器吗？在这种情况下，答案也是否定的。这就是这些功能的用途：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383711%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383711%28v=vs.85%29.aspx)

# javascript - JS中的FormData图片上传

> ID：14915759
> 
> 赞同：0
> 
> 时间：2013-02-16T22:22:22.533
> 
> 标签：javascript, form-data

我可以使用以下表单成功地将图像上传到服务器：

```
<form id="upload_form" action="/upload" enctype="multipart/form-data" method="post">
  <input name="image_url" type="file">
  <input id='submit' type="submit" value="Upload">
</form> 
```

我正在尝试做与上面完全相同的事情，但以编程方式使用 HTML5 FormData() 对象。

```
var bts_spritesheet;

handleSpritesheetSelection = function(evt) {
  var f, files, reader;
  files = evt.target.files;
  f = files[0];
  reader = new FileReader();
  reader.onload = (function(theFile) {
    function(e) {
      bts_spritesheet = e.target.result;
    };
  })(f);
  return reader.readAsDataURL(f);
};
document.getElementById('upload_spritesheet').addEventListener('change', handleSpritesheetSelection, false); 
```

当您的用户单击提交按钮时，将调用以下内容：

```
var formData = new FormData();
formData.append('bts_spriteSheet', bts_spritesheet);

var xhr = new XMLHttpRequest();
xhr.open('POST', '/upload', true);

xhr.onload = function(e) {
  return console.log('yay its done');
};
xhr.send(formData); 
```

我的html只是：

```
 <input id="upload_spritesheet" type="file"> 
```

我没有包括或谈论我在服务器端所做的事情，因为正如我所说，使用上面通常的 html5 表单上传文件可以正常工作，所以我知道它一定是我的 JS 代码。

谁能看到为什么 JS 代码会产生 500 伺服器错误，但 html 表单版本工作正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T18:05:41.030

比较两个工作流的请求正文。事实证明，Firefox 中的实时 HTTP 标头很有用。

# objective-c - NSInputStream 未打开流/设置流时如何发布数据

> ID：14915761
> 
> 赞同：1
> 
> 时间：2013-02-16T22:22:36.617
> 
> 标签：objective-c, streaming, nsstream

我正在尝试做的事情：我有一个 url 请求（发布），我将一些信息发送到 api 服务器，然后它开始以字节为单位向我传输数据。

1）我如何在尝试设置流时发布数据，因为现在我只是使用一个 url，我可以合并`NSURLRequest`一些如何？

2）为什么我的流甚至没有打开（streamStatus 返回 0），因此`- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode`从未被调用？，这是我最好的尝试，并且在很大程度上遵循本[指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html#//apple_ref/doc/uid/20002273-BCIJHAGD)

```
- (void)setUpStreamFromURL:(NSURL *)path {

     // iStream is NSInputStream instance variable
     iStream = [[NSInputStream alloc] initWithURL:path];
     [iStream setDelegate:self];
     [iStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                   forMode:NSDefaultRunLoopMode];
     [iStream open];

     NSLog(@"Stream Open: %lu",[iStream streamStatus]); //return 0
}

- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {
     NSLog(@"Streaming");
     switch(eventCode) {
         case NSStreamEventHasBytesAvailable:
         {
             if(!_data) {
                  _data = [[NSMutableData data] init];
             }
              uint8_t buf[1024];
              unsigned int len = 0;
              len = [(NSInputStream *)stream read:buf maxLength:1024];
              if(len) {
              [_data appendBytes:(const void *)buf length:len];
              NSLog(@"DATA BEING SENT : %@", _data);
              // bytesRead is an instance variable of type NSNumber.
             // [bytesRead setIntValue:[bytesRead intValue]+len]; //getting error that setInt value is not part of NSNumber, and thats true so not sure what to do about it, but this isn't the issue. 
              } else {
                    NSLog(@"no buffer!");
              } 
              break;
         }
         case NSStreamEventEndEncountered:
         {
              [stream close];
              [stream removeFromRunLoop:[NSRunLoop currentRunLoop]
                          forMode:NSDefaultRunLoopMode];
              stream = nil; // stream is ivar, so reinit it
              break;
         }
        // continued ...
     }
} 
```

如果它有帮助，我的头文件：

```
 #import <Foundation/Foundation.h>
 #import "Login.h"

 @interface Stream : NSStream <NSStreamDelegate> {
NSMutableArray *searchIdList;
NSInputStream *iStream;
NSNumber *bytesRead;

}
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode ;
-(id)initWithLoginObject:(Login *)log;
@property NSMutableData *data;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:03:50.393

您不能`NSURLRequest`在 Stream 中使用。

要创建请求，您可以使用它。

```
request = CFHTTPMessageCreateRequest(kCFAllocatorDefault, CFSTR("POST"),(CFURLRef) url, kCFHTTPVersion1_1);
CFHTTPMessageSetHeaderFieldValue(request, CFSTR("User-Agent"), CFSTR("MSControl-US"));
CFHTTPMessageSetHeaderFieldValue(request, CFSTR("Content-Type"), CFSTR("application/json"));
CFHTTPMessageSetHeaderFieldValue(request, CFSTR("Connection"), CFSTR("Keep-Alive")); 
```

之后，您可以使用创建流

```
 readStream = CFReadStreamCreateForHTTPRequest(kCFAllocatorDefault, request) 
```

或者如果您已经有一个打开的流，您可以使用以下命令序列化您的请求：

```
NSData *data = (NSData *)CFHTTPMessageCopySerializedMessage(request); 
```

并用这个发送：

```
length = [data length];
CFWriteStreamWrite((CFWriteStreamRef)outStream,data,lenght); 
```

希望这有帮助

# java - 两个字段之间的Java关系

> ID：14915764
> 
> 赞同：0
> 
> 时间：2013-02-16T22:22:57.180
> 
> 标签：java, field

我在java类中有两个字段，都是整数：

```
int a = 0;  
int b = a * a; 
```

例如，一旦该字段`a`接收到另一个值，`10`。但它对 field 没有任何影响`b`，这个 field 仍然存在`0`而不是`100`。

如何以“java”风格做到最好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:26:45.537

您还必须为 b 分配一个值。您应该将 a 和 b 设为私有，并为两者提供 getter，并为 a 提供一个 setter，它也像这样更新 b：

```
int getA() {
    return a;
}

int getB() {
    return b;
}

void setA(int a) {
    this.a = a;
    this.b = a*a;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T22:30:36.417

每个字段都是一个独立变量，读取它通常会返回最后写入它的值 (*)。

为了实现您需要的行为，您应该创建`b`一个方法：

```
public class X {
    int a = 0;

    int b() {
        return a*a;
    }
} 
```

现在，设置`a`为 10 将`b()`返回 100。这也意味着您不能将值分配给`b()`，但如果您总是希望它的值是，`a*a`这可能也是您所期望的。

我还建议您保持`a`私有并为其添加访问器方法，但这完全是另一回事。

(*) 假设单个线程和/或在多个线程的情况下进行适当的协调。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T22:55:11.030

请注意，它`int b = a * a;`只是进行计算并存储结果。Java 不记得结果来自哪里。如果`a`发生更改，您将需要手动更新`b`以传播该更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T22:24:47.257

这些是原语而不是参考。改变一个不会影响另一个。
不知道你想做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T22:32:02.583

一旦 `int b = a* a` jvm 处理了第二行，jvm 就不会记住它。只有 b 的值将保留在内存中。

# c++ - C++ 任何更快的方法来编写大型二进制文件？

> ID：14915765
> 
> 赞同：3
> 
> 时间：2013-02-16T22:22:58.690
> 
> 标签：c++

**目标**

我的目标是从一个*大*的二进制字符串（一个只包含 1 和 0 的字符串）*快速*创建一个文件。

 ***开门见山**

我需要一个可以实现我的目标的功能。如果我不够清楚，请继续阅读。

**例子**

```
Test.exe is running...
.
Inputted binary string:
        1111111110101010
Writing to: c:\users\admin\desktop\Test.txt
        Done!
File(Test.txt) In Byte(s):
        0xFF, 0xAA
.
Test.exe executed successfully! 
```

**解释**

*   首先，Test.exe 要求用户输入一个二进制字符串。
*   然后，它将输入的二进制字符串转换为十六进制。
*   最后，它将转换后的值写入名为 Test.txt 的文件中。

**我试过了**

作为实现我目标的失败尝试，我创建了这个简单（可能很可怕）的功能（嘿，至少我尝试过）：

```
void BinaryStrToFile( __in const char* Destination,
                      __in std::string &BinaryStr )
{
    std::ofstream OutputFile( Destination, std::ofstream::binary );

    for( ::UINT Index1 = 0, Dec = 0;
         // 8-Bit binary.
         Index1 != BinaryStr.length( )/8;

         // Get the next set of binary value.
         // Write the decimal value as unsigned char to file.
         // Reset decimal value to 0.
         ++ Index1, OutputFile << ( ::BYTE )Dec, Dec = 0 )
    {
        // Convert the 8-bit binary to hexadecimal using the
        // positional notation method - this is how its done:
        // http://www.wikihow.com/Convert-from-Binary-to-Decimal
        for( ::UINT Index2 = 7, Inc = 1; Index2 + 1 != 0; -- Index2, Inc += Inc )
            if( BinaryStr.substr( Index1 * 8, 8 )[ Index2 ] == '1' ) Dec += Inc;
    }
    OutputFile.close( );
}; 
```

**使用示例**

```
#include "Global.h"

void BinaryStrToFile( __in const char* Destination,
                      __in std::string &BinaryStr );

int main( void )
{
    std::string Bin = "";

    // Create a binary string that is a size of 9.53674 mb
    // Note: The creation of this string will take awhile.
    // However, I only start to calculate the speed of writing
    // and converting after it is done generating the string.
    // This string is just created for an example.
    std::cout << "Generating...\n";
    while( Bin.length( ) != 80000000 )
        Bin += "10101010";

    std::cout << "Writing...\n";
    BinaryStrToFile( "c:\\users\\admin\\desktop\\Test.txt", Bin );

    std::cout << "Done!\n";
#ifdef IS_DEBUGGING
    std::cout << "Paused...\n";
    ::getchar( );
#endif

    return( 0 );
}; 
```

**问题**

同样，那是我实现目标的失败尝试。问题是速度。它太慢了。花了超过7分钟。有没有什么方法可以从一个大的二进制字符串快速创建一个文件？

提前致谢，

学习者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T22:58:45.277

我建议删除`substr`内部循环中的调用。您正在分配一个新字符串，然后为您处理的每个字符销毁它。替换此代码：

```
for(::UINT Index2 = 7, Inc = 1; Index2 + 1 != 0; -- Index2, Inc += Inc )
    if( BinaryStr.substr( Index1 * 8, 8 )[ Index2 ] == '1' )
        Dec += Inc; 
```

通过类似的东西：

```
for(::UINT Index2 = 7, Inc = 1; Index2 + 1 != 0; -- Index2, Inc += Inc )
    if( BinaryStr[Index1 * 8 + Index2 ] == '1' )
        Dec += Inc; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T22:52:10.430

你的大部分时间都花在这里：

```
 for( ::UINT Index2 = 7, Inc = 1; Index2 + 1 != 0; -- Index2, Inc += Inc )
        if( BinaryStr.substr( Index1 * 8, 8 )[ Index2 ] == '1' ) Dec += Inc; 
```

当我注释掉文件时，文件会在几秒钟内写入。我认为你需要微调你的转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T00:00:31.640

我想我会考虑这样的事情作为起点：

```
#include <bitset>
#include <fstream>
#include <algorithm>

int main() { 
    std::ifstream in("junk.txt", std::ios::binary | std::ios::in);
    std::ofstream out("junk.bin", std::ios::binary | std::ios::out);

    std::transform(std::istream_iterator<std::bitset<8> >(in),
                   std::istream_iterator<std::bitset<8> >(),
                   std::ostream_iterator<unsigned char>(out),
                   [](std::bitset<8> const &b) { return b.to_ulong();});
    return 0;
} 
```

做一个快速测试，这会在我的机器上大约 6 秒内处理一个 8000 万字节的输入文件。除非您的文件比您在问题中提到的要大得多，否则我猜这是足够的速度，而且简单性很难被击败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T22:46:15.563

所以与其在 s 之间来回转换`std::string`，为什么不使用一堆机器字大小的整数来快速访问呢？

```
const size_t bufsz = 1000000;

uint32_t *buf = new uint32_t[bufsz];
memset(buf, 0xFA, sizeof(*buf) * bufsz);
std::ofstream ofile("foo.bin", std::ofstream::binary);

int i;
for (i = 0; i < bufsz; i++) {
    ofile << hex << setw(8) << setfill('0') << buf[i];
    // or if you want raw binary data instead of formatted hex:
    ofile.write(reinterpret_cast<char *>(&buf[i]), sizeof(buf[i]));
}

delete[] buf; 
```

对我来说，这在几分之一秒内运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T22:55:16.153

与此不完全不同的东西应该更快：

```
void
text_to_binary_file(const std::string& text, const char *fname)
{
    unsigned char wbuf[4096];  // 4k is a good size of "chunk to write to file"
    unsigned int i = 0, j = 0;
    std::filebuf fp;           // dropping down to filebufs may well be faster
                               // for this problem
    fp.open(fname, std::ios::out|std::ios::trunc);
    memset(wbuf, 0, 4096);

    for (std::string::iterator p = text.begin(); p != text.end(); p++) {
        wbuf[i] |= (1u << (CHAR_BIT - (j+1)));
        j++;
        if (j == CHAR_BIT) {
            j = 0;
            i++;
        }
        if (i == 4096) {
            if (fp.sputn(wbuf, 4096) != 4096)
                abort();
            memset(wbuf, 0, 4096);
            i = 0;
            j = 0;
        }
    }
    if (fp.sputn(wbuf, i+1) != i+1)
        abort();
    fp.close();
} 
```

适当的错误处理留作练习。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-16T23:49:35.953

即使迟到了，我还是想举个例子来处理这些字符串。特定于架构的优化可以使用未对齐的字符加载到多个寄存器中，以并行“挤出”位。此未经测试的示例代码不检查字符并避免对齐和字节顺序要求。它假定该二进制字符串的字符表示连续的八位字节（字节），最高有效位在前，*而不是*单词和双字等，它们在内存（和该字符串）中的特定表示需要特殊处理以实现可移植性。

```
//THIS CODE HAS NEVER BEEN TESTED! But I hope you get the idea.

//set up an ofstream with a 64KiB buffer
std::vector<char> buffer(65536);
std::ofstream ofs("out.bin", std::ofstream::binary|std::ofstream::out|std::ofstream::trunc);
ofs.rdbuf()->pubsetbuf(&buffer[0],buffer.size());

std::string::size_type bits = Bin.length();
std::string::const_iterator cIt = Bin.begin();

//You may treat cases, where (bits % 8 != 0) as error

//Initialize with the first iteration
uint8_t byte = uint8_t(*cIt++) - uint8_t('0');
byte <<= 1;
for(std::string::size_type i = 1;i < (bits & (~std::string::size_type(0x7)));++i,++cIt)
{
    if(i & 0x7) //bit 7 ... 1
    {
        byte |= uint8_t(*cIt) - uint8_t('0');
        byte <<= 1;
    }
    else //bit 0: write and advance to the the next most significant bit of an octet
    {
        byte |= uint8_t(*cIt) - uint8_t('0');
        ofs.put(byte);

        //advance
        ++i;
        ++cIt;
        byte = uint8_t(*cIt) - uint8_t('0');
        byte <<= 1;
    }
}

ofs.flush(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-16T23:02:13.083

这将生成 1010101010101 的 76.2 MB（80,000,000 字节）文件......

```
#include <stdio.h>
#include <iostream>
#include <fstream>

using namespace std;

int main( void )
{
    char Bin=0;
    ofstream myfile;
    myfile.open (".\\example.bin", ios::out | ios::app | ios::binary);
    int c=0;
    Bin = 0xAA;
    while( c!= 80000000 ){
        myfile.write(&Bin,1);
        c++;
    }
    myfile.close();
    cout << "Done!\n";
    return( 0 );
}; 
```

![这是文件的第一个字节](../Images/2cca965a496a948f64f67ab7be59f75a.png)*

# python - 解析标准输出的输出

> ID：14915773
> 
> 赞同：0
> 
> 时间：2013-02-16T22:24:15.010
> 
> 标签：python

我正在尝试从 python 程序运行一些 hadoop 命令...

例如，如果从命令行，您可以：

```
 bin/hadoop dfs -ls /hdfs/query/path 
```

它返回 hdfs 查询路径中的所有文件.. 非常类似于 unix

现在我正在尝试基本上从 python 中执行此操作.. 并从中进行一些操作。

```
 exec_str = "path/to/hadoop/bin/hadoop dfs -ls " + query_path
 os.system(exec_str) 
```

现在，我正在尝试获取此输出以对其进行一些操作。例如..计算文件数？我查看了 subprocess 模块，但是……这些不是本机 shell 命令。因此不确定我是否可以应用这些概念如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:36:55.463

您可以使用[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)`check_ouput`如果它是您想要捕获的标准输出，可能就是您想要的。

```
>>> subprocess.check_output(["echo", "Hello World!"])
'Hello World!\n' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:52:51.800

`os.popen(exec_str)`将返回一个文件类型对象，您随后可以在该对象上调用该`read`方法。

# stripe-payments - 使用 Stripe 销售下载内容时如何提供安全链接？

> ID：14915774
> 
> 赞同：2
> 
> 时间：2013-02-16T22:24:28.973
> 
> 标签：stripe-payments

我有兴趣在我的网站上销售打包为 ZIP 文件的电子书。我已经使用 Stripe 的 Checkout 功能完成了所有购买流程。一旦我进行测试购买，它就会将我发送到我的“谢谢”页面并创建新客户（cia Stripe_Customer::create）和收费（通过 Stripe_Charge::create）。

我怎样才能在这个页面上提供一个下载链接，然后不能直接传递给其他人？只询问他们的电子邮件地址并将 ZIP 通过电子邮件发送给他们是否更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:42:44.460

最好的办法可能是在您的数据库中创建一个下载令牌对象，并了解用户和创建时间。然后，用户的下载链接可以是`download.php?token=f136803ab9c241079ba0cc1b5d02ee77`.

当 download.php 看到一个令牌时，它可以 1）确保它是有效的，以及 2）它在创建令牌后的 n 分钟内被使用。（也许它被使用了不到 10 次，或者类似的东西。）

显然，这意味着用户无法重新下载他/她的电子书——如果您想支持该用例，您将需要某种方式来重新生成/重新发布令牌。

# r.java-file - AR-Seeker：raw 无法解析或不是字段

> ID：14915776
> 
> 赞同：0
> 
> 时间：2013-02-16T22:24:36.353
> 
> 标签：r.java-file

我正在使用**AR-Seeker** [项目](https://github.com/nmatsui/AR_Speeker)

我面临以下错误：`raw cannot be resolved or is not a field`

在 file:`AR_SpeekerActivity.java`中，在以下 2 行中：

```
players.add(new Player("Porl.obj", "Porl.patt", 3.0f, R.raw.porl_01));
players.add(new Player("Elaine.obj", "Elaine.patt", 3.0f, R.raw.elaine_01)); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:17:25.907

我想这是因为在那个项目中 res 文件夹中没有 raw 文件夹。尝试在 res 文件夹中添加 raw 文件夹，并在 raw 文件夹中添加 2 个 mp3 文件，但将名称更改为`porl_01.mp3`and `elaine_01.mp3`。最后清理项目，这可能会解决问题。

# python - 使用 Python 验证证书

> ID：14915779
> 
> 赞同：1
> 
> 时间：2013-02-16T22:24:50.333
> 
> 标签：python

我正在尝试用 Python 编写脚本来下载 PDF。它工作正常，除非我想访问需要证书的大学页面。

我的问题是：我如何在下载之前“显示”我拥有正确证书的页面？我的代码如下所示：

```
import urllib

def downloadPDF(url):
    webFile = urllib.urlopen(url)
    localFile = open("myPDF.pdf", "wb")
    localFile.write(webFile.read())
    webFile.close()
    localFile.close() 
```

所以，当我尝试使用 后`urllib.urlopen(url)`，我想我需要一些东西来告诉系统我有正确的证书。做这个的最好方式是什么？谢谢！

# android - 如何获取附近的 flickr 照片 android

> ID：14915781
> 
> 赞同：1
> 
> 时间：2013-02-16T22:25:17.913
> 
> 标签：android, flickr

我正在使用[FlickrjApi4Android](http://code.google.com/p/flickrj-android/ "FlickrjApi4Android")根据用户位置获取附近的公共照片。我努力了

```
Flickr.getGeoInterface().photosForLocation(...)  
//and
Flickr.getPhotosInterface().search(...). 
```

我在这两种方法中都提供了经度、纬度和精度/半径，但这些都没有返回任何结果。任何想法？

# caching - OpenCL 缓冲区缓存行为

> ID：14915784
> 
> 赞同：2
> 
> 时间：2013-02-16T22:25:32.277
> 
> 标签：caching, opencl, specifications

我一直想知道 OpenCL 中全局数据的缓存行为。

假设我有一个指向内核中全局内存的指针。现在我读取了指针指向的位置。稍后在内核中我可能再次需要相同的数据，所以我通过指针再次读取它。

现在的问题是，这些数据会被缓存，还是每次都从全局内存中重新读取，因为其他线程可能已经修改了它？如果它没有被缓存，那么我每次都必须制作一个本地副本，这样我就不会因为不断访问全局内存而损失大量性能。

我知道这可能是特定于供应商的，但是规范对此有何评论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:36:48.450

There is some caching but the key to great GPU compute performance it is move "accessed many time" data to private or shared local memory and not re-read it. In a way, you can think of this as "you control the caching". In OpenCL this would be done in your kernel (in parallel!) and then you'd have a memory barrier (to ensure all work items have finished the copy) then your algorithm has access to the data in fast memory. See the matrix multiply example (since each column and row contributes to multiple output values, copying them to shared local memory accelerates the algorithm.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-10T16:58:24.283

那些想要在工作组内为工作项目（例如在 FPGA 上）进行本地兑现的人可以阅读 Andrew Ling 在 IWOCL2017 上的这篇论文[https://www.iwocl.org/wp-content/uploads/iwocl2017-andrew -ling-fpga-sdk.pdf](https://www.iwocl.org/wp-content/uploads/iwocl2017-andrew-ling-fpga-sdk.pdf)。这是正确使用本地缓存和智能通信进行数据流计算的一个很好的例子。那些希望在并行对等设置中方便缓存并且仍然有硬件为他们做这件事的人应该考虑使用 POWER8 或 POWER9 芯片。这些便利是有代价的：缓存全局或虚拟内存集群互连可能必须有几 TB 的带宽。真正的问题是：缓存对于数据流计算（例如机器学习）的价值是什么，尤其是在集群上，与通过其他方式减少通信和增加数据重用相比。

# mysql - 将子查询添加到 SQL 中的查询

> ID：14915789
> 
> 赞同：0
> 
> 时间：2013-02-16T22:26:10.640
> 
> 标签：mysql, sql, subquery

我有一个运行良好的查询。让我从它开始：

**编辑：** SQL 已更新。我进入`0`每一行。

```
 SELECT i.item, i.user_id, u.username,
        (COALESCE(r.ratetotal, 0)) AS total,
        (COALESCE(c.commtotal, 0)) AS comments,
        (COALESCE(r.rateav, '50%')) AS rate,
        (COALESCE(x.wasRated, '0')) AS wasRated
        FROM items AS i
        LEFT JOIN master_cat AS c
            ON (c.cat_id = i.cat_id)
        LEFT JOIN users AS u 
        ON u.user_id = i.user_id    
        LEFT JOIN
            (SELECT item_id, 
            COUNT(item_id) AS ratetotal, 
            AVG(rating) AS rateav 
            FROM ratings GROUP BY item_id) AS r 
        ON r.item_id = i.item_id
        LEFT JOIN
            (SELECT item_id, 
            COUNT(item_id) AS commtotal 
            FROM reviews GROUP BY item_id) AS c
        ON c.item_id = i.item_id
        LEFT JOIN
            (SELECT xu.user_id, ra.item_id, '1' AS wasRated
            FROM users AS xu
            LEFT JOIN ratings AS ra
                ON ra.user_id = xu.user_id
            WHERE xu.user_id = '1') AS x 
         ON x.user_id = u.user_id
              AND x.item_id = r.item_id
        WHERE c.category = 'Movies' 
        ORDER by i.item ASC; 
```

我需要再添加一个功能，你看`AS x`

基本上，这里有三个重要的表。 `items`,`reviews`和`ratings`. 在顶部，您会看到一些子查询正在获取统计信息，例如每个项目的平均值和总计。

我需要一个绑定到`user_id`,`item_id`和`rate_id`(in `ratings`) 的最终查询。在最终结果中，它列出了每个项目及其统计信息，我想要一个多列，如果登录用户对其进行了评价，则为简单的真或假。所以我需要这样的东西：

```
SELECT ???
FROM ratings AS r
WHERE r.user_id = '{$user_id}' 
```

（`user_id`登录用户是从 PHP 传入的。`）

我怎样才能创建一个子查询，给我最后一点信息，但把它放在父查询的每一行项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:01:34.057

将此添加到父查询。

```
, coalesce(x.WasRated, 'false') as WasRated 
```

您的 x 子查询是：

```
(select users.user_id
 , ratings.item_id
, 'true' WasRated
from users join ratings on user.user_id = ratings.user_id
where users.user_id = the one for the logged in user
) x on x.user_id = users.user_id
and x.item_id = ratings.item_id 
```

或类似的东西。

# c - 了解 ATT 汇编语言

> ID：14915791
> 
> 赞同：2
> 
> 时间：2013-02-16T22:26:21.417
> 
> 标签：c, assembly, x86, att

C版：

```
int arith(int x, int y, int z)
{
    int t1 = x+y;
    int t2 = z*48;
    int t3 = t1 & 0xFFFF;
    int t4 = t2 * t3;
    return t4;
} 
```

同一程序的 ATT 汇编版本：

x 在 %ebp+8，y 在 %ebp+12，z 在 %ebp+16

```
movl   16(ebp), %eax    
leal   (%eax, %eax, 2), %eax   
sall   $4, %eax      // t2 = z* 48... This is where I get confused
movl   12(%ebp), %edx   
addl   8(%ebp), %edx
andl   $65535, %edx
imull  %edx, %eax 
```

除了左移之外，我了解它在程序的所有点上所做的一切。

我假设它会向左移动 4 次。这是为什么？

谢谢！

编辑：我也明白我感到困惑的部分等同于 C 版本的 z*48 部分。

我不明白的是如何向左移动 4 次等于 z*48。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:31:06.107

你错过了这`leal (%eax, %eax, 2), %eax`条线。应用一些数学，汇编代码如下：

```
一个：= x
a := a + 2*a // a = 3*x
a := a * 2^4 // a = x * 3*16

```

# c# - 单击 GeckoIFrameElement 中的 GeckoAnchorElement 或更改 GeckoIFrameElement 的 OffsetLeft

> ID：14915796
> 
> 赞同：2
> 
> 时间：2013-02-16T22:26:46.213
> 
> 标签：c#, iframe, geckofx

在我浏览的页面中`GeckoWebBrowser`，有一个 iframe。我可以`GeckoIFrameElement`在上面设置一个引用，访问所有元素。但是当我在 iframe 中调用 a`Click()`时`GeckoAnchorElement`，什么也没有发生（但没有抛出错误）。这个元素，当被鼠标点击时，会改变`OffsetLeft`iframe 以隐藏它。

有什么办法可以`Click()`在 iframe 中工作吗？如果没有，我该如何更改 iframe 的 OffsetLeft ？

（作为记录，我应该指出，我会点击处理不在 iframe 上的元素）

# c++ - GLSL 编译失败但没有错误信息

> ID：14915797
> 
> 赞同：1
> 
> 时间：2013-02-16T22:27:03.867
> 
> 标签：c++, glsl

我正在尝试在 C++ 中创建一个基本的着色器类，但我对 GLSL 有一些问题（第一次使用它）。

这是我的 cpp 文件：

```
#include "shader.h"
#include <iostream>
#include <fstream>

shader::shader(){
    int status;

    std::string line, full;
    std::ifstream fragmentfile("fragment.fs");
    if(fragmentfile.is_open()){
        while(fragmentfile.good()){
            getline(fragmentfile, line);
            full.append(line + '\n');
        }
        fragmentfile.close();
    }
    static const char* fragment_source = full.c_str();

    std::cout << fragment_source << std::endl;

    program_object = glCreateProgram();
    shaderref = glCreateShader(GL_FRAGMENT_SHADER);

    glShaderSource(shaderref, 1, &fragment_source, NULL);

    glCompileShader(shaderref);
    glGetShaderiv(shaderref, GL_COMPILE_STATUS, &status);
    if(status != GL_TRUE){
        std::cout << "The shader could not be compiled\n" << std::endl;
        char errorlog[500] = {'\0'};
        glGetShaderInfoLog(shaderref, 500, 0, errorlog);
        std::cout << "Error: " << errorlog << std::endl;
    }
    else
        std::cout << "The shader could be compiled\n" << std::endl;

    glAttachShader(program_object, shaderref);

    glLinkProgram(program_object);
    glGetProgramiv(program_object, GL_LINK_STATUS, &status);
    if(status != GL_TRUE){
        std::cout << "The shader could not be linked\n";
    }
    else
        std::cout << "The shader could be linked\n";
} 
```

片段.fs：

```
void main(void)
{
    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
} 
```

运行时输出只是：

```
void main(void)
{
    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
}

The shader could not be compiled

Error: 
The shader could not be linked 
```

完全没有错误。

操作系统：Linux

好的，我现在找到了。阅读 API 会很有趣：glGetShaderiv 不会更改 int 状态“如果生成错误”，这里就是这种情况，我会看看我还能找到什么。

确实有些问题，在 Code::Blocks 中创建一个新项目神奇地修复了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:13:56.530

在读取文件时（通过使用`while (fragmentfile.good())`），您会遇到标准的“off by one”错误，该错误会复制文件的最后一行。因此，您尝试编译的着色器是：

```
void main(void)
{
    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
}
} 
```

失败（尽管您在信息日志中看不到有用的错误消息的原因尚不清楚。）

这是 C 和 C++ 中的常见错误，在许多地方重复出现。当您有一个循环读取内容直到文件结束时，您的循环测试应该始终在读取操作上，并且永远不要在流标志上，直到操作尝试读取结束后才会设置文件：

```
while(getline(fragmentfile, line)) {
    full.append(line + '\n');
} 
```

或者，遵循 Nicol Bolas 的建议并立即阅读整个文件：

```
getline(fragmentfile, full, '\0'); 
```

这假定片段程序不包含任何 NUL ( `'\0'`) 字节，如果它是有效的片段程序，则它不能包含任何 NUL ( ) 字节。

# php - 按最受欢迎的数组重新排列数组并使用 PHP 每个实例有 1 个

> ID：14915800
> 
> 赞同：1
> 
> 时间：2013-02-16T22:27:44.337
> 
> 标签：php, arrays

我想按最流行（最常见）排列数组，然后每个实例只有一个。

例如，

```
Array ( [0] => cat [1] => dog [2] => bird [3] => dog [4] => dog [5] => cat [6] => turtle ) 
```

将会：

```
Array ( [0] => dog [1] => cat [2] => bird [3] => turtle ) 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:33:48.550

结合[array_count_values](http://php.net/manual/en/function.array-count-values.php)和[arsort](http://www.php.net/manual/en/function.arsort.php)函数。像这样的东西：

```
$a = array('cat', 'dog', 'bird', 'dog', 'dog', 'cat', 'turtle');
$a = array_count_values($a); // creating a 'name' => 'occurrence count' array
arsort($a); // sorting them reverse order and maintaining keys
$ordered_animals = array_keys($a); // getting the keys in a separate array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:34:48.347

我会用这样的东西：

```
$reversed = array();
foreach($unsorted as $key => $val){
  if(!isset($reversed[$val])) $reversed[$val] = 0;
  $reversed[$val]++;
}

$sorted = array_keys(asort($reversed)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:35:07.177

```
$items = array( 'cat', 'dog', 'cat', 'hello', 'world', 'dog', 'hello', 'ok' ); // etc

$valueCount = array_count_values( $items );

arsort( $valueCount );

$keys = array_keys( $valueCount ); 
```

# c - 无法与发出标准输入请求的程序创建交互性

> ID：14915803
> 
> 赞同：-1
> 
> 时间：2013-02-16T22:28:10.643
> 
> 标签：c, linux

在 C（使用 linux）中，我试图模仿 bash shell 的功能，但它无法处理需要用户输入的程序。以一个简单的添加程序为例：

```
Please enter 1st digit
>

Please enter 2nd digit
>

Answer is: 
```

有人可以用一个基本的示例代码建议如何（分别）：

```
1\. run the test program
2\. store the test program output
3\. recognise that there is a stdin request
4\. enter sample digits into the test program. 
```

此时它不需要与用户进行交互，只允许其他程序与自身之间进行交互。

主要问题是我找不到任何例子，甚至找不到明确的路线来研究如何做到这一点。Bash 可以做到，但如何做到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:38:35.713

这是你要找的吗？

```
#include <stdio.h>

int main(int argc, char** argv)
{
    int i;
    printf("Enter something:");
    scanf("%d",&i);
    printf("You entered %d\n", i);
} 
```

# java - 可以将 Hotspot 配置为在运行之间保留其统计信息吗？

> ID：14915804
> 
> 赞同：4
> 
> 时间：2013-02-16T22:28:12.423
> 
> 标签：java, jvm, jvm-hotspot

HotSpot 编译器会在您的进程运行时了解您的代码。有什么方法可以配置它来持久化它所学到的东西，以便下次进程启动时（假设没有 jar 或类文件发生更改），它不需要从头开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:51:19.493

不。

不过，还有其他 JVM 可以做到这一点。例如，Oracle JRockit 允许您保存分析信息和编译代码。Excelsior JET 也可以做到这一点。

# r - 我可以将更多参数传递给 R 中的 optimize() 函数吗

> ID：14915811
> 
> 赞同：5
> 
> 时间：2013-02-16T22:29:02.277
> 
> 标签：r, optimization

根据我的理解，优化函数仅设计用于处理一个函数参数。但有时一个函数可能取决于变量和参数的不同输入范围。

例如：

```
x.r<-rnorm(100)
y<-function(x,p) -x^2+p*1/exp(x^3)
optimize(y,upper=range(x.r)[2],lower=range(x.r)[1]) 
```

xr 传递给 y 的 x 的域可以随样本变化。我不想使用通用的 x，而是希望能够从许多 xr 值域中提取来运行 y。有没有办法修改优化函数，以便我可以同时传递 y、函数和 x 它的域变量以及优化参数 p？

有了上面我得到一个错误：

```
> optimize(y,upper=range(x.r)[2],lower=range(x.r)[1])
Error in p * 1 : 'p' is missing 
```

编辑：根据下面的建议（这是有道理的......但是）我试过了。

```
x.r<-rnorm(100)
p<-seq(-5,5,1)
y<-function(x,p) -x^2+p*1/exp(x^3)
optimize(y,upper=range(x.r)[2],lower=range(x.r)[1],p) 
```

结果是： p * 1 中的错误：缺少“p”

还，

```
> optimize(y,upper=range(x.r)[2],lower=range(x.r)[1],p,x.r)
Error in optimize(y, upper = range(x.r)[2], lower = range(x.r)[1], p,  : 
  invalid function value in 'optimize' 
```

还有其他想法吗？

编辑 2：循环下方的每个评论都可以，但似乎是一种奇怪的方法。我不确定它是否也唯一考虑了 xr 域。

```
x.r<-rnorm(100)
p<-seq(-5,5,1)
y<-function(p=p,x=x.r) -x^2+p*1/exp(x^3)
for(v in p){
print(optimize(y,upper=range(p)[2],lower=range(p)[1],p=v))}

> for(v in p){
+ print(optimize(y,upper=range(p)[2],lower=range(p)[1],p=v))}
$minimum
[1] -4.999944

$objective
[1] -9.637547e+54

$minimum
[1] -4.999944

$objective
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:57:04.873

我打电话`optimise`给p

```
x.r <- rnorm(100)
p   <- seq(-5,5,1)
y<-function(x,p) -x^2+ p/exp(x^3)
ll <- lapply(p,function(i)
         optimize(y,upper=range(x.r)[2],lower=range(x.r)[1],p=i))

ll[[which.min(sapply(ll,'[[','minimum'))]]

$minimum
[1] -2.14628

$objective
[1] -98357.67 
```

当然如果`maximum = TRUE`最后变成

```
ll[[which.max(sapply(ll,'[[','maximum'))]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:56:04.317

即使您调用的东西不允许您指定传递给函数的额外命名参数，另一种解决方法是创建一个函数生成函数，该函数生成具有给定 p 的函数。

```
yp <- function(p){force(p);function(x){-x^2+p*1/exp(x^3)}}
yp1=yp(1)
yp2=yp(2) 
```

现在`yp`函数只是 x 的函数：

```
> yp1(0)
[1] 1
> yp2(0)
[1] 2 
```

所以你的循环变成：

```
x.r <- rnorm(100)
pv   <- seq(-5,5,1)

ll <- lapply(pv,function(p){
        Y = yp(p)
        optimize(Y,upper=range(x.r)[2],lower=range(x.r)[1])
        }) 
```

它循环遍历`pv`向量并将每个值放入`p`以创建`Y`基于该值的函数。没有其他东西（除了`upper`and `lower`）被传递到`optimize`.

# c - 使用 Cygwin 的 MPICH2 编译问题

> ID：14915812
> 
> 赞同：0
> 
> 时间：2013-02-16T22:29:05.757
> 
> 标签：c, cygwin, mpi, cc, mpich

尝试使用 Cygwin 在 Windows 机器上编译 MPICH2。

一点相关资料

*   $ uname -> CYGWIN_NT-6.1
*   $ gcc --version -> gcc (GCC) 3.4.4 (cygming special, gdc 0.12, using dmd 0.125) 版权所有 (C) 2004 Free Software Foundation, Inc. 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。
*   MPICH2 版本：1.5

配置似乎已正确完成，但在编译期间我收到以下信息：

```
**** Making src/misc ....
make --no-print-directory  build_lib_bin
make --no-print-directory  mpe_debug_objs
make --no-print-directory  /home/Daeden/issm/trunk-jpl/externalpackages/mpich2/src/src/mpe2/lib/libmpe_nompi.a
make[7]: `/home/Daeden/issm/trunk-jpl/externalpackages/mpich2/src/src/mpe2/lib/libmpe_nompi.a' is up to date.
make --no-print-directory  /home/Daeden/issm/trunk-jpl/externalpackages/mpich2/src/src/mpe2/lib/libmpe.a
gcc  -I/home/Daeden/issm/trunk-jpl/externalpackages/mpich2/src/src/include -I/home/Daeden/issm/trunk-jpl/externalpackages/mpich2/src/   src/include -I.. -I../include  -I../../.. -I../../../include   -o dbxerr.po -c dbxerr.c
dbxerr.c: In function `MPE_DefaultHandler':
dbxerr.c:429: error: parse error before '{' token
dbxerr.c:432: error: argument "sig" doesn't match prototype
dbxerr.c:407: error: prototype declaration
dbxerr.c:461: warning: passing arg 2 of `signal' from incompatible pointer type
dbxerr.c:463: warning: passing arg 2 of `signal' from incompatible pointer type
dbxerr.c:465: warning: passing arg 2 of `signal' from incompatible pointer type
dbxerr.c:467: warning: passing arg 2 of `signal' from incompatible pointer type
dbxerr.c:469: warning: passing arg 2 of `signal' from incompatible pointer type
dbxerr.c:473: warning: passing arg 2 of `signal' from incompatible pointer type
Makefile:82: recipe for target `dbxerr.po' failed
make[7]: *** [dbxerr.po] Error 1
Makefile:111: recipe for target `default' failed
make[6]: *** [default] Error 2
Makefile:43: recipe for target `build_lib_bin' failed
make[5]: *** [build_lib_bin] Error 2
Makefile:26: recipe for target `all' failed                                                                                                                make[4]: *** [all] Error 2 
```

检查“dbxerr.c”我发现：

```
#if defined(HAVE_SIGHANDLER_T)
#define SIG_HANDLER_PROTOTYPE sighandler_t
void MPE_DefaultHandler ( SIG_HANDLER_PROTOTYPE );
void MPE_DefaultHandler( sig )
int               sig
#elif defined(MPI_sun4)
#define SIG_HANDLER_PROTOTYPE int, int, struct sigcontext *, char *
void MPE_DefaultHandler ( SIG_HANDLER_PROTOTYPE );
void MPE_DefaultHandler( sig, code, scp, addr )
int               sig, code;
struct sigcontext *scp;
char              *addr;
#elif defined(MPI_IRIX)
#define SIG_HANDLER_PROTOTYPE int, int, struct sigcontext *
void MPE_DefaultHandler ( SIG_HANDLER_PROTOTYPE );
void MPE_DefaultHandler( sig, code, scp )
int               sig, code;
struct sigcontext *scp;
#else
/* The default Posix definition has a single int */
#define SIG_HANDLER_PROTOTYPE int
void MPE_DefaultHandler ( SIG_HANDLER_PROTOTYPE );
void MPE_DefaultHandler( int sig )
#endif
{
static char buf[128];

signal( sig, SIG_DFL );
if (sig >= 0 && sig <= 20)
    sprintf( buf, "Caught signal %s", SIGNAME[sig] );
else
    strcpy( buf, "Caught signal " );
fprintf( stderr, "%s\n", buf );

MPE_Start_debugger( );
} 
```

通过检查'config.log'我发现：

```
$ find ./ -name 'config.log' | xargs grep 'HAVE_SIGHANDLER'
./src/mpe2/src/misc/config.log:| #define HAVE_SIGHANDLER_T 1
./src/mpe2/src/misc/config.log:#define HAVE_SIGHANDLER_T 1 
```

这证实了：

```
void MPE_DefaultHandler ( SIG_HANDLER_PROTOTYPE );
void MPE_DefaultHandler( sig )
int               sig 
```

正被 CPP 使用。

我发现'SIG_HANDLER_PROTOTYPE'被定义为：

```
$ find ./ -name '*.c' | xargs grep 'SIG_HANDLER_PRO'
./src/mpe2/src/misc/src/dbxerr.c:#define SIG_HANDLER_PROTOTYPE sighandler_t 
```

'sighandler_t' 在 '/usr/include/signal.h' 中定义为：

```
typedef _sig_func_ptr sighandler_t; /* glibc naming */ 
```

最后，'_sig_func_ptr' 定义为：

```
 typedef void (*_sig_func_ptr)(int); 
```

这是就我自己的研究而言，我似乎无法将各个部分组合在一起。我不明白为什么会有原型不匹配。我将继续尝试自己解决此问题，但我们将不胜感激！

提前致谢！

更新：

我正在重新检查“make”的输出，我认为我犯了一个错误。我认为问题出在声明上：

```
void MPE_DefaultHandler ( SIG_HANDLER_PROTOTYPE ); 
```

但是，问题似乎与定义有关：

```
void MPE_DefaultHandler( sig ) 
```

'sig' 似乎是一个 int 类型，但我不明白 'SIG_HANDLER_PROTOTYPE' 是什么类型。有人可以解释一下吗：

```
 typedef void (*_sig_func_ptr)(int); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:53:57.863

MPICH2（对于 >= 3.0 的版本现在只是“MPICH”）目前不测试或支持 Windows。Windows 上的最后一个工作版本是 1.4.1p1，即便如此我也不确定 Cygwin 支持的状态。

如果您需要 MPICH2 v1.5 或 MPICH v3.0.x，使用 cygwin 可能是您的最佳选择。v3.0.2 没有将 MPE 与它捆绑在一起，因此您可以避免您提到的一些问题。您还可以通过传递`--disable-mpe`给1.5 来近似此行为`configure`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T15:55:42.697

如果你仍然想让 MPICH 在 Windows 上运行，你可以试试微软打包的版本。它是 MPICH 的衍生物。还有一个旧版本的 Windows 二进制文件可用。[您可以在 MPICH ( http://www.mpich.org/downloads/](http://www.mpich.org/downloads/) )的下载页面上找到更多信息。

# entity-framework - 实体框架列名无效，EF主键加数字1

> ID：14915814
> 
> 赞同：15
> 
> 时间：2013-02-16T22:29:19.360
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5

我有这两个实体：

```
public partial class Suscriptores
{
    public Suscriptores()
    {
       this.Publicacion = new HashSet<Publicacion>();
    }

    [Key]
    public int IdSuscriptor { get; set; }
    public string LogoSuscriptor { get; set; }
    public string Identificacion { get; set; }
    public string Nombre { get; set; }
    public string Direccion { get; set; }
    public string Telefono { get; set; }
    public string Email { get; set; }
    public string Fax { get; set; }
    public string Home { get; set; }

    public virtual ICollection<Publicacion> Publicacion { get; set; }
}

public partial class Publicacion
{
    public Publicacion()
    {
        this.Edictos = new HashSet<Edictos>();
    }

    [Key]
    public decimal IdPublicacion { get; set; }
    public System.DateTime FechaPublicacion { get; set; }
    public string IdUsuario { get; set; }
    public System.DateTime FechaPublicacionHasta { get; set; }
    public System.DateTime FechaArchivoHasta { get; set; }
    public int IdSuscriptor { get; set; }
    public decimal IdTipoPublicacion { get; set; }

    [ForeignKey("IdSuscriptor")]
    public virtual Suscriptores Suscriptores { get; set; }
} 
```

当我尝试运行此查询时：

```
public ActionResult DetailsVSTO(string Identificacion)
{
    var SusQ = from s in db.Suscriptores
               where s.Identificacion == Identificacion
               select s;

    return Json(SusQ.First(), JsonRequestBehavior.AllowGet);
} 
```

它抛出这个消息：

> System.Data.SqlClient.SqlException：列名“Suscriptores_IdSuscriptor1”无效

为了解决这个问题，我在 DBContext 中添加了这个流畅的 API 代码：

```
modelBuilder.Entity<Suscriptores>()
    .HasMany(x => x.Publicacion)
    .WithRequired(x => x.Suscriptores)
    .Map(a => a.MapKey("IdSuscriptor")); 
```

但问题仍然存在。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T01:20:42.447

尝试添加多对一映射。请使用纯 Fluent API，您应该删除 [ForeignKey] 注释。

```
modelBuilder.Entity<Publicacion>()
            .HasRequired(x => x.Suscriptores)
            .WithMany(x => x.Publicacion); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-06T17:27:32.813

我收到了与非外键列有关的此错误，并浪费了太多时间试图找出错误。它在我的代码中，而不是在 EF 或数据库中。我只是***以为***我输入了

```
this.Property(t => t.Revision).HasColumnName("Revision");
this.Property(t => t.DistributionClass).HasColumnName("DistributionClass"); 
```

但我输入的是

```
this.Property(t => t.Revision).HasColumnName("Revision");
this.Property(t => t.Revision).HasColumnName("DistributionClass"); 
```

我想我正在查看上面的行并放置`t.Revision`而不是`t.DistributionClass`. 无论我看了多久，我都看不到自己的错误。运气好的话，这将节省一些其他可怜的灵魂一些时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-09T23:21:24.960

我在刚刚添加的属性（列）上的项目表中遇到了这个问题，真是令人沮丧！

原来我在 Order 的数据模型中有一个 List 属性，并且因为我没有在该配置中忽略它，所以它在 Item 表中导致了同样的问题。这不会发生，除非两个表都有同名的属性，所以我必须这样做......无论如何我都应该这样做。

`public OrderConfiguration() { Ignore(p => p.Items); }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-09T18:40:16.550

大家好 就我而言，我有一个遗留代码，其中包含两个具有相同外键的不同名称的类。添加注释对正确列的引用和其他类中具有相同名称的属性名称。然后注释ForeignKey在两列之间进行匹配。

```
[Table("LFile")]
public partial class LFile
{
    [Key]
    public int FileId { get; set; }

    [StringLength(500)]
    public string FileName { get; set; }

    public int? LRRFileDetailId { get; set; }

    public byte[] FileData { get; set; }

    public FileType Type { get; set; }

    [Column("LUpload_Id")] //Foreign Key of the class
    public int? LUploadId { get; set; }

    [ForeignKey("LUploadId")] //Foreign key inherited
    public virtual LParserProcess LParserProcess { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-26T04:43:51.490

我收到了相同的错误 SqlException 消息，其中数字 1 被附加到我的字段名称中。

一旦我意识到我错误地假设 [ForeignKey] 注释引用了数据库中的字段名称，我就能够解决它。相反，它们应该与模型中定义的属性名称相匹配。

例如：

```
[Column("Organisation_Account_Manager")]
[Display(Name = "Organisation_Account_Manager_ID")]
[DisplayFormat(NullDisplayText = "Unknown")]
public int? Organisation_Account_Manager_ID { get; set; }

[Display(Name = "Account Manager")]
[ForeignKey("Organisation_Account_Manager_ID")]
public Contact Account_Manager { get; set; } 
```

在这个例子中它会起作用，因为 [ForeignKey("Organisation_Account_Manager_ID")] 与 public int 完全匹配？组织_帐户_经理_ID。以前我的 [ForeignKey] 注释使用的是 Organisation_Account_Manager，这是数据库中的字段名称 - 但这是不正确的。

# javascript - $(document).ready 仅在 IE 中触发一次，但在 Firefox 中有效

> ID：14915815
> 
> 赞同：1
> 
> 时间：2013-02-16T22:29:22.473
> 
> 标签：javascript, jquery, model-view-controller

这让我发疯。除了 IE -aaargh 之外，这只是另一个在所有方面都可以正常工作的问题。无论如何，我有一些脚本应该在每次加载页面时运行。在 Firefox 中运行良好，但在 IE 中它只在我第一次进入页面时执行。如果我离开页面然后返回，它将不会执行。

```
<script type="text/javascript">
$(document).ready(function () {
    jQuery.ajaxSetup({ async: false });
    var leftHeight = $('#Interface_Content').height();
    $('#Interface_Nav').css({ 'height': leftHeight });

    //This line calls the Controller and populates the corresponding MEssageDesc Drop down
    $.get('@Url.Action("GetCompanyName","Company")', {}, function (data) {
        $('#Interface_Header_CONAME').replaceWith(data);
    });

    $.get('@Url.Action("GetLoginStatus", "Company")', {}, function (data) {
        if (data == 'True') {
            $('#Nav_Links').show();
        }
        else {
            $('#Nav_Links').hide();
        }
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:27:28.843

如果没有强制使用 JQuery-1.4.4，我建议你至少用 JQuery-1.8.2 替换它。使用 JQuery 1.8.2，我编写了一个示例应用程序并在 IE 8,9 上运行它，它运行良好。

PS - 在您跳转并下载最新的 JQuery 1.9 之前，公平警告他们已经进行了很多重大更改，例如将 $.browser 替换为功能检测等，如果您使用它可能会产生问题。

# php - 为什么 strlen 计算的长度比实际长度高两个？

> ID：14915816
> 
> 赞同：0
> 
> 时间：2013-02-16T22:29:38.440
> 
> 标签：php

我有以下代码：

```
<?php
if (!isset($_SESSION["word"])) {
    $dictionary_file = new SplFileObject("dictionary.txt");
    $dictionary_file->seek(rand(0, 80367));
    $_SESSION["word"] = $dictionary_file->current();
    $_SESSION["word_progress"] = "";

    for ($i = 0; $i < strlen($_SESSION["word"]); $i++) {
        $_SESSION["word_progress"] .= "_";
    }
    echo strlen($_SESSION["word"]);
    echo $_SESSION["word"];
}
else {
    if (isset($_GET["guess"])) {
        // If their guessed letter is in the word
        if (stripos($_SESSION["word"], $_GET["guess"]) !== false) {
            $occurrence_points = strposall($_SESSION["word"], $_GET["guess"]);
            $progress = $_SESSION["word_progress"];

            foreach ($occurrence_points as $values) {
                $progress[$values] = $_GET["guess"];
            }

            $_SESSION["word_progress"] = $progress;
        }
    }
}

?> 
```

我从文件中随机生成一个单词。说它产生“泡沫”。长度是6，但是打印出来确认字确实是气泡后还是会报8。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:38:29.670

随机生成的单词可能会添加空格。做一个修剪（）

```
 $_SESSION["word"] = trim($dictionary_file->current()); 
```

# haskell - 这可以在没有 Quasi Quoter 的情况下完成吗？

> ID：14915819
> 
> 赞同：0
> 
> 时间：2013-02-16T22:29:52.110
> 
> 标签：haskell

我有一个实际上运行良好的小型 DSL。当我说

```
import language.CWMWL

main = runCWMWL $ do
    out (matrixMult, A, 1, row, 1 3 44 6 7) 
```

then`runCWMWL`是由 导出的函数`language.CWMWL`。这会解析 experession 并采取一些行动。

我想要实现的是，有某种方法可以重复此操作，例如 1000 次，并让元组的第三个元素由数字 1 到 1000 组成。我自己的 DSL 还不够完整，无法做到这一点。最终我也想更改最后一个元素中的字符串。

如果没有准行情，是否有可能做到这一点？Quasi Quotes 是最好的工具吗？

我的 DSL 需要包含或需要包装哪些 binops /原语才能以优雅的方式实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:55:16.860

Unless I'm misunderstanding, I don't think quasiquotation will get you something much nicer than

```
main = runCWMWL $
    sequence [ out (matrixMult, A, n, row, 1 3 44 6 7) | n <- [1..1000] ] 
```

You might also look into [`MonadComprehensions`](http://hackage.haskell.org/trac/ghc/wiki/MonadComprehensions) as well as [`RebindableSyntax`](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/syntax-extns.html#rebindable-syntax) for other ideas.

# database - 用于学习/教学存储过程的数据库

> ID：14915820
> 
> 赞同：0
> 
> 时间：2013-02-16T22:29:55.377
> 
> 标签：database, stored-procedures, stored-functions

什么是开始学习存储过程的最佳数据库。

考虑到每个数据库都有自己的语法。就像 Postgresql 有**函数**一样，SyBase、Oracle、MS SQL、DB2 有一些复杂的**程序**..

有没有一些你觉得好用的db，比如说给学生演示原理，知道哪个，学生可以跳到某个特定的数据库没有大问题吗？停留在流行的 dbs 中间的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:46:15.300

如您所知，几乎所有现代 DBMS 都支持存储过程并且语法各不相同。所以这几乎是人事的选择。但是最容易使用的 DBMS 是 MySQL。这可能比 Oracle、MSSQL 或 DB2 更有帮助，尤其是对新生而言。

# php - as3 使用 PHP 5.4 上传文件

> ID：14915822
> 
> 赞同：0
> 
> 时间：2013-02-16T22:30:01.253
> 
> 标签：php, actionscript-3

有谁知道在 PHP rel 中上传文件的方式。5.4或更高？

我在 PHP 5.3 中有一个脚本可以很好地上传文件，但现在我已经更新到 php 5.4，情况发生了很大变化。现在，由于这行代码，脚本无法正常工作：

```
 if (!empty($_FILES)) {
       .... In here is the code when the file is uploaded ......
    } 
```

事实上，**empty**的工作方式与 php 5.3 不同。所以我不知道它是如何工作的。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:09:04.333

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
 <label for="file">Filename:</label>
 <input type="file" name="file" id="file"><br>
 <input type="submit" name="submit" value="Submit">
</form>

if (!empty($_FILES['file'])) {
  if ($_FILES['error'] > 0)
    echo "An error occured" ;
  else
    echo "File loaded" ;// And proceed with upload
} 
```

如果您期望输入名称为“文件”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:53:16.550

尝试使用...

```
if (isset($_FILES)) 
```

# merge - 校正从两个不同的 mpeg-ts 源捕获的 dvb-t 视频

> ID：14915829
> 
> 赞同：1
> 
> 时间：2013-02-16T22:30:57.833
> 
> 标签：merge, stream, ffmpeg, mpeg, dvb

我从不同的 dvb-t 发射器捕获了相同的频道（两个文件 - dvb-t 的完整多路复用 - mpeg-ts）：

发射器-A.ts 发射器-B.ts

我想合并这些流以生成一个完美的频道视频，以纠正来自发射器 B 和发射器 A 的信号故障 - 我知道存在帧间隙，可以说：

发射器-A.ts 1:10-1:20 发射器-B.ts 2:30-2:35

是否有一些现有的工具可以做到这一点？我是否必须进入 ts 数据包的帧级别并在流之间进行比较（比如说找到 I 帧——它们适合吗？然后比较它们）？我希望 pts 和 dts 时间戳适合但不适合 - 是否有某种方法可以使用 pcr 或 ts 数据包中的任何标记阻止我进入帧级别？

# c++ - C++ 安全连接到数据库

> ID：14915831
> 
> 赞同：0
> 
> 时间：2013-02-16T13:55:31.220
> 
> 标签：c++, database, c, reverse-engineering

我一直有这个问题，希望你们中的一个人知道答案。

我通过 Internet / News 听说像 C++ 这样的软件编码是可逆的，据我了解，其他人可以从已经编译的 .exe 中找到您的源代码。

那么如何保护数据库连接呢？我的意思是，如何保持数据库信息及其每个 mysql 查询的私密性。

```
mysql_real_connect(conn, "localhost", "user", "passwd", NULL, 0, NULL, 0) 
```

例如，在上面的代码中，当代码被保留并且用户已经能够访问源代码时，您将如何保护信息用户和密码的安全？

谢谢，

编辑：同样适用于 C 或任何软件开发代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:22:09.157

第一件事是：您不应该将带有硬编码用户名和密码的二进制文件传递给用户，而是允许用户将它们输入到某种形式的配置中。如果他们应该与您的系统对话，您应该为每个用户配置一个用户帐户。

将密码存储在配置文件中时，您可以将其加密存储（在硬编码时也可以这样做，但这是一种不好的做法）并在需要时解密。当然，恶意用户可以尝试识别加密算法和密码，防止这种情况只能通过根本不存储或使用基于硬件的 vrypto 系统（可能是加密狗）来完成

最后的问题是：你想做到多难？拥有（尤其是身体上的）访问权和足够“需要”的人总会找到方法。

# c - 关于在 Objective-c 中在堆上分配 c 结构和数组所需的指导

> ID：14915842
> 
> 赞同：0
> 
> 时间：2013-02-16T22:31:57.103
> 
> 标签：c, objective-c, memory-leaks, malloc, heap-memory

我正在开发我的第一个大型 Objective-c 应用程序，一个纸牌游戏。由于各种原因，我选择使用包含整数、布尔值、数组和各种指针的 C 结构来维护我的游戏状态。（出于好奇，我这样做是因为我最终将不得不制作和销毁成千上万个这样的游戏状态，并且我希望尽可能接近“裸机”。）游戏状态结构定义如下：

```
struct GameState {
    // changing game state properties
    int score;
    int moves;
    bool won;

    int numberOfCards;
    int numberOfPiles;

    // doneness of piles
    bool *pileDoneness;
    bool *pileDisabled;

    // array of cards (each item is a pointer to a card)
    Card *cards;

    // defining piles (each card in the pile is a pointer to a pointer Card in the cards array)
    Card ***piles;

    // previous gameStates
    struct GameState *previous;
}; 
```

需要注意的是，在游戏中进行移动之前，我复制了 gameState（除以前的所有值）并将 gameState->previous 设置为副本。

卡片只是一个整数，其中各种字节代表各种卡片属性（花色、面朝上/朝下、价值等）。

我还有一个 MDCard 类和 MDGameState 类。这两个类都只有类方法，我从不创建任何一个的实例。它们具有可以分别创建和操作卡片和游戏状态的方法。为了解释，您可以使用以下代码翻转卡片：

```
// assume card already exists
[MDCard flip:card]; 
```

我可以像这样得到卡片的颜色：

```
Color color = [MDCard color:card]; 
```

好的。现在 MDGameState 对象也有一个类方法来创建一个新的游戏实例。这是它的代码：

```
+(GameState *)newGameStateWithNumberOfPiles:(u_int)numberOfPiles andNumberOfCards:(u_int)numberOfCards{
    // create our new gameState struct
    GameState *gameState = malloc(sizeof(GameState));

    // array of state of doneness of piles
    gameState->pileDoneness = malloc(sizeof(bool) * numberOfPiles);
    for (int i = 0 ; i < numberOfPiles ; i++) gameState->pileDoneness[i] = false;

    gameState->pileDisabled = malloc(sizeof(bool) * numberOfPiles);
    for (int i = 0 ; i < numberOfPiles ; i++) gameState->pileDisabled[i] = false;

    // array of pointers to cards
    **gameState->cards = malloc(sizeof(Card) * numberOfCards);**
    for (int i = 0 ; i < numberOfCards ; i++) gameState->cards[i] = 0;

    // array of array of pointers to Cards in cards array
    gameState->piles = malloc(sizeof(Card **) * numberOfPiles);
    for (int p = 0 ; p < numberOfPiles ; p++){
        gameState->piles[p] = malloc(sizeof(Card *) * numberOfCards);
        for(int c = 0 ; c < numberOfCards ; c++){
            gameState->piles[p][c] = nil;
        }
    }

    gameState->moves = 0;
    gameState->score = 0;
    gameState->won = false;

    // piles
    gameState->numberOfPiles = numberOfPiles;
    gameState->numberOfCards = numberOfCards;
    gameState->previous = nil;

    return gameState;
} 
```

我目前的理解是gameState会在堆中分配。实际上，gameState 变量只是一个指向堆中分配内存的指针。堆中分配的内存包含各种值，例如移动数，得分，获胜等。它还包含指向堆中其他分配内存的指针，用于 gameState 数组，牌堆等。IE：所有 malloc 都是在堆上分配内存。

我知道当我完成它时，我需要为这个 gameState 释放内存。

我想知道，Objective-C ARC 是否跟踪对这个 gameState 结构的引用？它引用的数组怎么样？我目前认为答案是否定的。

我假设一旦从 newGameStateWithNumberOfPiles:andNumberOfCards: 返回了 gameState，MDGameState 类就不再引用它了。它是否正确？

我假设最终引用 gameState 的对象负责在完成 gameState 后释放其内存？

只要用户在玩游戏，我就需要 gameState 对象。再次注意，每次用户移动时，都会制作一个 gameState 副本并将其设置为前一个 gameState。这是为了撤消目的。

我在 MDGameState 上创建了一个函数，该函数应该释放此结构使用的所有内存：

```
+ (void)freeGameState:(GameState *)gameState recurse:(BOOL)recurse {
    if(recurse && gameState->previous != nil){
        [MDGameState freeGameState:gameState->previous recurse:recurse];
    }

    for (int p = 0 ; p < gameState->numberOfPiles ; p++){
        free(gameState->piles[p]);
    }

    free(gameState->piles);
    free(gameState->pileDoneness);
    free(gameState->pileDisabled);
    free(gameState->cards);
} 
```

请注意，在某些情况下，我可能想要解除分配当前的游戏状态，而不是之前的状态。例如，如果我撤消移动。

因此，当用户开始一个新游戏时，会创建 gameState 并将其返回给我的 viewController，它会保留该引用。当用户开始另一个游戏时，我首先调用 [MDGameState freeGameState:gameState recurse:YES] 来完全清理之前的 gameState，然后我使用 [MDGameState newGameStateWithNumberOfPiles:13 andNumberOfCards:52] 创建一个全新的 gameState。

我认为我在自己之后进行了适当的清理。但是，仪器告诉我我有内存泄漏。它特别突出了 newGameStateWithNumberOfPiles:andNumberOfCards: 上面的示例中的粗体线。这几乎在我开始新游戏时发生。它还突出显示了复制 gameState 的函数中的相同代码。我不明白为什么要突出显示 malloc 而上面的两个却没有。如果我更改该函数中 malloc 的顺序，它仍然会突出显示卡的 malloc。

你有什么想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:43:23.447

你是对的，ARC 不管理使用 malloc() 分配的内存。

您的方法中有泄漏，`+freeGameState:recurse:`因为您从不调用 free(gameState)，这意味着每个 gameState 都已泄漏。

没错，MDGameState 类在从`+newGameStateWithNumberOfPiles:andNumberOfCards`.

是的，gameState 的调用者`newGameStateWithNumberOfPiles:andNumberOfCards`负责释放内存。

# javascript - 集成 netbeans、symfony 和 dart

> ID：14915846
> 
> 赞同：0
> 
> 时间：2013-02-16T22:32:05.523
> 
> 标签：javascript, symfony, twig, dart

在 Symfony 2 项目中使用 Dart 语言而不是 js 有什么好的方法吗？我正在为 twig 寻找与 less-css 编译器类似的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T07:42:29.730

有一个资产的飞镖过滤器：[https ://github.com/kriswallsmith/assetic/tree/master/src/Assetic/Filter](https://github.com/kriswallsmith/assetic/tree/master/src/Assetic/Filter)

您应该可以将它与 symfony2 的 AsseticBundle 一起使用。大多数过滤器的信息并不多，因此您必须深入了解整个assetic/AsseticBundle 功能，但这并不复杂。

之后，您应该能够像使用更少的方式一样使用飞镖。

# sml - SML 中的函数数据类型不明确

> ID：14915848
> 
> 赞同：1
> 
> 时间：2013-02-16T22:32:54.767
> 
> 标签：sml

给定 SML 中的以下函数：

```
fun i a b = let fun j()=a+1 in j end; 
```

该函数的数据类型为：

```
val i = fn : int -> 'a -> unit -> int 
```

我不明白为什么`int -> 'a -> unit -> int`？

为什么不呢`(int * a') -> unit -> int`，因为该函数`i`接收两个输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:39:05.857

由于柯里化，这个函数（以及 SML 中的任何函数）实际上是接收*一个输入。*

从技术上讲，有一个函数接受单位，它返回接受 'a 的函数，它返回接受 int 的函数。

所以

```
fun foo a b = a + b; 
```

只是一个[语法糖](https://stackoverflow.com/questions/14432696/what-does-this-function-signature-mean-in-sml/14438864#14438864)

```
fun foo a = fn b => a + b; 
```

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:40:37.747

如果您将函数定义为，`fun i (a,b) = ...`那么它将接受一个元组作为参数，并且它的类型确实是`(int * 'a) -> unit -> int`. 它将被称为`i (23,42) ()`(`(23,42)`是一个元组并且`()`是单位值)。

但是，您将其定义为`fun i a b = ...`，它定义了一个接受参数的函数，然后返回另一个接受下一个参数的函数。它是`fun i a = fn b => ...`. 它可以称为`i a b ()`。

# c# - XNA CatmullRom 曲线

> ID：14915849
> 
> 赞同：2
> 
> 时间：2013-02-16T22:33:08.197
> 
> 标签：c#, xna, curve, catmull-rom-curve

我需要对我正在尝试的技术进行一些澄清。我正在尝试将实体从 A 点移动到 B 点，但我不希望实体沿直线移动。

例如，如果实体位于 x: 0, y:0 并且我想到达点 x:50, y: 0，我希望实体沿曲线行进到目标，我会想象它的最大距离将离开是 x:25 y:25 所以它在 X 上向目标移动，但在 y 上已经远离目标。

我研究了几个选项，包括样条曲线、曲线，但我认为可以完成这项工作的是 CatmullRom 曲线。我有点迷茫怎么用？我想知道每帧将我的实体移动到哪里，而不是函数返回的是插值。我会很感激一些关于如何使用它的指导。

如果有任何我错过的可能更容易的替代方法，我也会很感激听到它们。

编辑：

为了展示我如何获得曲线：

```
Vector2 blah = Vector2.CatmullRom(
    StartPosition, 
    new Vector2(StartPosition.X + 5, StartPosition.Y + 5), 
    new Vector2(StartPosition.X + 10, StartPosition.Y + 5), 
    /*This is the end position*/ 
    new Vector2(StartPosition.X + 15, StartPosition.Y), 0.25f); 
```

最终的想法是我即时生成这些点，但我现在只是想解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T23:12:40.510

如您所见，样条曲线会产生不同长度的线段。曲线越紧，线段越短。这对于显示目的来说很好，对于移动设备的路径生成不是那么有用。

要获得样条路径的恒速遍历的合理近似值，您需要沿曲线段进行一些插值。由于您已经有一组线段（在返回的点对之间`Vector2.CatmullRom()`），因此您需要一种以恒定速度行走这些线段的方法。

给定一组点和沿定义为这些点之间的线的路径移动的总距离，以下（或多或少的伪）代码将找到一个位于沿路径特定距离的点：

```
Point2D WalkPath(Point2D[] path, double distance)
{
    Point curr = path[0];
    for (int i = 1; i < path.Length; ++i)
    {
        double dist = Distance(curr, path[i]);
        if (dist < distance)
            return Interpolate(curr, path[i], distance / dist;

        distance -= dist;
        curr = path[i];
    }
    return curr;
} 
```

您可以进行各种优化来加快速度，例如存储路径中每个点的路径距离，以便在步行操作期间更容易查找。随着您的路径变得越来越复杂，这变得更加重要，但对于只有几个段的路径可能会过度杀伤力。

**编辑：** 这是我不久前在 JavaScript 中使用此方法所做[的一个示例。](http://emonk.linkpc.net/bstest.html)这是一个概念验证，所以不要太挑剔地看代码：P

**编辑：关于样条生成的更多信息**
给定一组“结”点——曲线必须按顺序通过的点——曲线算法最明显的拟合是 Catmull-Rom。缺点是 CR 需要两个额外的控制点，这些控制点很难自动生成。

不久前，我在网上找到了一篇相当有用的文章（我无法再找到它以给出正确的归属），它根据路径内点集的位置计算了一组控制点。这是计算控制点的方法的 C# 代码：

```
// Calculate control points for Point 'p1' using neighbour points
public static Point2D[] GetControlsPoints(Point2D p0, Point2D p1, Point2D p2, double tension = 0.5)
{
    // get length of lines [p0-p1] and [p1-p2]
    double d01 = Distance(p0, p1);
    double d12 = Distance(p1, p2);
    // calculate scaling factors as fractions of total
    double sa = tension * d01 / (d01 + d12);
    double sb = tension * d12 / (d01 + d12);
    // left control point
    double c1x = p1.X - sa * (p2.X - p0.X);
    double c1y = p1.Y - sa * (p2.Y - p0.Y);
    // right control point
    double c2x = p1.X + sb * (p2.X - p0.X);
    double c2y = p1.Y + sb * (p2.Y - p0.Y);
    // return control points
    return new Point2D[] { new Point2D(c1x, c1y), new Point2D(c2x, c2y) };
} 
```

该`tension`参数调整控制点生成以改变曲线的松紧度。较高的值会导致更宽的曲线，较低的值会导致更紧的曲线。试试看，看看哪种价值最适合您。

给定一组“n”个结（曲线上的点），我们可以生成一组控制点，用于生成结对之间的曲线：

```
// Generate all control points for a set of knots
public static List<Point2D> GenerateControlPoints(List<Point2D> knots)
{
    if (knots == null || knots.Count < 3)
        return null;
    List<Point2D> res = new List<Point2D>();
    // First control point is same as first knot
    res.Add(knots.First());
    // generate control point pairs for each non-end knot 
    for (int i = 1; i < knots.Count - 1; ++i)
    {
        Point2D[] cps = GetControlsPoints(knots[i - 1], knots[i], knots[i+1]);
        res.AddRange(cps);
    }
    // Last control points is same as last knot
    res.Add(knots.Last());
    return res;
} 
```

所以现在你有一个`2*(n-1)`控制点数组，然后你可以用它来生成结点之间的实际曲线段。

```
public static Point2D LinearInterp(Point2D p0, Point2D p1, double fraction)
{
    double ix = p0.X + (p1.X - p0.X) * fraction;
    double iy = p0.Y + (p1.Y - p0.Y) * fraction;
    return new Point2D(ix, iy);
}

public static Point2D BezierInterp(Point2D p0, Point2D p1, Point2D c0, Point2D c1, double fraction)
{
    // calculate first-derivative, lines containing end-points for 2nd derivative
    var t00 = LinearInterp(p0, c0, fraction);
    var t01 = LinearInterp(c0, c1, fraction);
    var t02 = LinearInterp(c1, p1, fraction);
    // calculate second-derivate, line tangent to curve
    var t10 = LinearInterp(t00, t01, fraction);
    var t11 = LinearInterp(t01, t02, fraction);
    // return third-derivate, point on curve
    return LinearInterp(t10, t11, fraction);
}

// generate multiple points per curve segment for entire path
public static List<Point2D> GenerateCurvePoints(List<Point2D> knots, List<Point2D> controls)
{
    List<Point2D> res = new List<Point2D>();
    // start curve at first knot
    res.Add(knots[0]);
    // process each curve segment
    for (int i = 0; i < knots.Count - 1; ++i)
    {
        // get knot points for this curve segment
        Point2D p0 = knots[i];
        Point2D p1 = knots[i + 1];
        // get control points for this curve segment
        Point2D c0 = controls[i * 2];
        Point2D c1 = controls[i * 2 + 1];
        // calculate 20 points along curve segment
        int steps = 20;
        for (int s = 1; s < steps; ++s)
        {
            double fraction = (double)s / steps;
            res.Add(BezierInterp(p0, p1, c0, c1, fraction));
        }
    }
    return res;
} 
```

一旦你在你的结上运行了这个，你现在有一组插值点，它们之间的距离是可变的，距离取决于线的曲率。从这里您可以迭代地运行原始的 WalkPath 方法以生成一组相距恒定距离的点，这些点定义了您的移动设备以恒定速度沿着曲线前进。

您的手机在路径中任何点的航向是（大致）两侧点之间的角度。`n`对于路径中的任何点，`p[n-1]`和之间的角度`p[n+1]`是航向角。

```
// get angle (in Radians) from p0 to p1
public static double AngleBetween(Point2D p0, Point2D p1)
{
    return Math.Atan2(p1.X - p0.X, p1.Y - p0.Y);
} 
```

我已经从我的代码中修改了上面的内容，因为我使用了我多年前编写的 Point2D 类，它具有很多内置功能 - 点算术、插值等。我可能在翻译过程中添加了一些错误，但希望他们玩的时候很容易被发现。

让我知道事情的后续。如果您遇到任何特殊困难，我会看看我能提供什么帮助。

# javascript - 复选框检查缓慢

> ID：14915852
> 
> 赞同：0
> 
> 时间：2013-02-16T22:33:46.790
> 
> 标签：javascript, jquery, jqgrid

我正在使用复选框来显示或隐藏 jqGrid 中的列，并且由于我有很多很多行，每个行在其单元格中都有很多值，所以当我检查它时，复选框需要很长时间才能完成检查。

我希望复选框立即检查，然后执行耗时的 jqGrid 操作。例如，

```
$('input[type="checkbox"]').click(function(e) {
    // First render/unrender the checkmark    
    // Next do some very time-consuming jqGrid operations
} 
```

我怎样才能做到这一点？就目前情况而言，它首先执行 jqGrid 调用，最后只检查 checkox。选中复选框需要整整两秒钟！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:35:43.433

尝试将耗时的代码放入超时：

```
// immediate stuff here
setTimeout(function() {
   // time-consuming stuff here
},1); 
```

理想情况下，您希望将这些耗时的东西放在 Web Worker 中，以免冻结 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:37:01.357

您可以在页面和脚本中进行优化。

1.  **将您的脚本放在`<body>`标签末尾之前。**
2.  **使用工具来提高性能：**我可以推荐的最好的工具是[dynaTrace AJAX 版](http://ajax.dynatrace.com/pages/)，它是 IE 的分析器（通常是 JS 性能最慢的，所以实际上是一个很好的开始优化的测试环境）。它会给你一个完整的细分，向你展示重复的方法调用、调用树以及你的 CPU 周期的去向。 [查看他们关于使用/功能的教程](http://ajax.dynatrace.com/pages/learn/Default.aspx)以开始使用。
3.  **[使用大数据集提高 jQuery 性能](http://jquery-howto.blogspot.com/2009/02/5-easy-tips-on-how-to-improve-code.html)**主题包括：

> 1.  使用 JavaScript 原生 for() 循环而不是 jQuery 的 $.each() 辅助
>     函数。
>     
>     
> 2.  不要在循环中将元素附加到 DOM。
>     
>     
> 3.  如果您有很多元素要插入到 DOM 中，请
>     用父元素将它们包围以获得更好的性能。
>     
>     
> 4.  不要使用字符串连接，而是使用数组的 join() 方法处理很长的字符串。
>     
>     
> 5.  对长列表循环和连接函数使用 setTimeout()
>     函数。
>     
>     
> 6.  **缩小你的脚本**

希望这些足以获得更好的性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:41:09.720

我相信您可以在一个函数中渲染/取消渲染复选标记，然后在另一个`.click()`函数中执行 jqGrid 操作`.click()`。IE

```
$('#selector').click(
    function(){//rendering stuff}
).click(
    function(){//computational stuff}
); 
```

# java - 你如何让一个android应用程序等待？

> ID：14915855
> 
> 赞同：0
> 
> 时间：2013-02-16T22:33:51.843
> 
> 标签：java, android

我正在尝试使用仅使用加速度计来收集数据的 Android 计步器应用程序。我从手机中收集了大量原始数据，发现某些模式构成了我步态的一步，并创建了 3 个布尔值来模拟一步对加速度计的样子。

```
public boolean beforeStep(float y)
    {
        if(y > 1.5 && y < 3){
        return true;
    }
        else
        {
        return false;
        }
    }

public boolean duringStep(float y)
{
    if(y > 3 && y < 5){
        return true;
    }
    else
    {
        return false;
    }
}

public boolean afterStep(float y)
{
    if(y > 1.5 && y < 3){
        return true;
    }
    else
    {
        return false;
    }
}

if(beforeStep(accel)){
    if(duringStep(accel)){
        if(afterStep(accel)){
            stepCount++;
        }
    }
} 
```

起初我在 onSensorChanged() 方法中运行了这些布尔值，但我意识到这意味着它会将相同的加速度值传递给所有三个布尔值，因此程序永远不会识别步骤。如何让 Android 在每次布尔检查之间等待 10 毫秒，以便更新加速度值？

此外，如果有更准确/有效的方法来使用原始加速度数据计算步数，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:39:50.897

您可以将状态存储在 int 中并跟踪您所处的步骤的哪一部分（之前 = 1，期间 = 2，之后 = 3）。然后你可以做类似的事情

```
onSensorChanged(){   
  if(state == 1){
    if(duringStep(accel)){
      state = 2;
      ...
      return;
    }
  }   
  else if(state == 2){
    ... 
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:40:27.623

有很多方法可以让您的应用程序等待，例如使用`wait/notify`,[查看示例](https://stackoverflow.com/questions/886722/how-to-use-wait-and-notify-in-java)或[Semaphore](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)

请参阅此[计步器应用程序](http://code.google.com/p/pedometer/)，它正在做的正是您想要实现的目标

# gtk - 如何转置 cairo 上下文或更改轴的方向？

> ID：14915856
> 
> 赞同：4
> 
> 时间：2013-02-16T22:34:04.223
> 
> 标签：gtk, cairo, gtkmm

我需要想象一个机器人游戏的运动场。不幸的是，游戏使用右手坐标系，y 轴指向上方。

有没有办法调整绘图区域的 cairo 上下文，使其匹配这个坐标系？

我可以缩放、平移和旋转，但我找不到切换 y 轴方向的方法，这比单独转换所有坐标更方便。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:27:30.597

您可以在 a 中定义每个字段`cairo_matrix_t`：

```
cairo_matrix_t flip_y;
cairo_matrix_init(&flip_y, 1, 0, 0, -1, 0, 0);
cairo_set_matrix(cr, &flip_y); 
```

只需记住如何应用转换：

```
x_new = xx * x + xy * y + x0;
y_new = yx * x + yy * y + y0; 
```

# html - HTML CSS 放大/缩小问题

> ID：14915858
> 
> 赞同：2
> 
> 时间：2013-02-16T22:34:36.070
> 
> 标签：html, css, image, background, background-image

放大和缩小我的页面[时我的页面](http://dh-creative-webdesign.de/)在 Chrome 浏览器中的链接背景被扭曲，页面看起来像这样[放大 Chrome 后的](http://s7.directupload.net/file/d/3168/g6qaizz5_png.htm)页面外观。可以在代码中进行哪些更改以修复它以在不扭曲背景图形的情况下放大 Chrome 浏览器？

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>Page Under Construction</title>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">

<style type="text/css">

body {
background:#d7df29 url('1.jpg') center center no-repeat;
width: 100%;
height:  100%;
}

html, body {
width: 100%;
height: 100%;
    }

</style>

</head>

<body>

</body>

</html> 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:44:05.723

这条线说，**我们不能帮助你...**

```
background:#d7df29 url('1.jpg') center center no-repeat; 
```

我刚刚读到你的评论，你有一张图片，所以它会随着放大/缩小而扭曲......最好使用 CSS 来避免这种扭曲......

# javascript - 从文本文件创建一个 javascript 对象

> ID：14915859
> 
> 赞同：0
> 
> 时间：2013-02-16T22:34:46.913
> 
> 标签：javascript, csv, plot, google-visualization, raspberry-pi

我正在尝试在我的树莓派上创建一个简单的网站，显示温度图表。我有一个传感器和一个 python 脚本，每 30 分钟写入一个文本文件`/var/www/data.csv`

现在我想为这些数据制作一个非常简单的线图，如下所示： [https ://google-developers.appspot.com/chart/interactive/docs/gallery/linechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)

我怎么能把这个文本文件（可通过`'./data.csv'`）读入这个图表？

我设法将其读取为字符串，但是如何将其转换为数组？

这是我的 data.csv 的示例：

```
1361048396.0 , 20.0 , 47.0
1361048424.0 , 20.0 , 47.0
1361048719.0 , 21.0 , 46.0
1361048761.0 , 21.0 , 46.0
1361048761.0 , 20.0 , 47.0 
```

最后我需要的是这样的（但当然是作为变量！）：

```
data.addRows([
  [1361048396.0, 20, 47],
  [1361048424.0, 20, 47],
  [1361048719.0, 21, 46],
  [1361048396.0, 21, 46],
  [1361048761.0, 20, 47],
]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:48:42.593

使用 JavaScript 拆分方法怎么样？如果您将整个 data.csv 读入单个字符串，则可能需要拆分两次。

前任：

```
var result=[];
var a=str.split("\n");
for (var i = 0; i < a.length; i++) {
  result.push(a[i].split(","));
} 
```

# mono - Assembly.GetExecutingAssembly() 在嵌入式单声道中不起作用？

> ID：14915863
> 
> 赞同：3
> 
> 时间：2013-02-16T22:35:23.173
> 
> 标签：mono

我正在尝试将单声道嵌入到 c++ 可执行文件中，并且单声道在 Assembly.GetExecutingAssembly 上崩溃。知道我错过了什么吗？

编辑：使用单声道 3.0.3

EmbeddedMonoTest.cpp：

```
// EmbeddedMonoTest.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <mono/metadata/debug-helpers.h>
#include <mono/metadata/exception.h>
#include <mono/jit/jit.h>
#include <mono/metadata/assembly.h>

int _tmain(int argc, _TCHAR* argv[])
{
    MonoDomain* domain = mono_jit_init_version ("ClassLibrary1", "v4.0.30319");
    MonoAssembly* _assembly_fbmonoengine    = mono_domain_assembly_open (domain, "ClassLibrary1.dll");  
    MonoImage* _image_fbmonoengine      = mono_assembly_get_image (_assembly_fbmonoengine);
    MonoClass* klass = mono_class_from_name(_image_fbmonoengine, "ClassLibrary1", "Class1");
    MonoMethod* test = mono_class_get_method_from_name(klass, "Test"    , 0);
    mono_runtime_invoke(test, NULL, NULL, NULL); 
    return 0;
} 
```

Class1.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace ClassLibrary1
{
    public class Class1
    {
        public static void Test()
        {
            Assembly.GetExecutingAssembly();
        }
    }
} 
```

错误 ：

```
Unhandled exception at 0x65ad2148 in EmbeddedMonoTest.exe: 0xC0000005: Access violation reading location 0x`00000008. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:02:25.707

您没有在程序中执行任何程序集，因此在该上下文中 ExecutingAssembly 没有任何意义（尽管需要更好的错误）。您需要在程序集中提供通常的静态 Main() 入口点，并使用 mono_runtime_exec_main() 执行它。

# automation - 实现页面对象模型

> ID：14915864
> 
> 赞同：2
> 
> 时间：2013-02-16T22:35:28.040
> 
> 标签：automation, selenium-webdriver

我正在使用 Perl 和 Selenium 构建一个测试自动化项目。我正在使用页面对象模型。我有点不确定 Selenium 驱动程序在哪里适合页面对象模型的实现。

每个页面对象都应该“有”一个驱动程序吗？我的想法是每个页面对象代表页面提供给用户的一组服务。考虑到这个概念，页面对象与驱动程序没有“具有”关系。页面对象与驱动程序交互。但是，我仍在寻找建议。我应该将驱动程序作为 Web 应用程序中每个页面对象的一部分吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-28T00:03:32.177

这个答案与@zodvik 和您的思考过程没有太大区别，但它是另一种可选方法。您可以创建一个抽象类，而不是传递驱动程序，然后每个页面对象都可以从该类继承。从抽象类中，还可以包含一些您会发现自己经常使用的常用功能方法。

这至少是我在 Java 语言中的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:19:09.463

我总是将驱动程序作为每个页面对象的一部分。我对驱动程序的看法是它代表当前页面的状态。它提供对 URL、页面源等的访问权限。

现在，每个页面**都有**一个当前 URL、一个页面源代码、一个页面标题，这些都可以通过驱动程序访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-02T09:58:27.407

顺便说一句，我实现了框架。我在包含常用元素的 commonFactory.class 中使用了驱动程序。每个页面都作为 commonFactory.class 的子类实现。所以你不必在每个类中实现驱动程序。由于驱动程序独立于测试场景，因此最好以单独的方式拥有它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T09:30:16.443

据我了解，没有实施 POM 的既定规则/标准。

但是，一般的经验法则是在您的框架中创建一个 BaseTest 和 BasePage 类，其中每个网页（如登录）将由其 PageClass(LoginPage) 表示。同样，您的所有 Page 类都将扩展您的 BasePage，所有测试都将扩展您的 BaseTest 类。

以下是其实现的粗略想法->

```
 public class BaseTest{

@BeforeSuite()
setupMethod(){
initialize your WebDriver here
}

}

------------------------------------------
public class BasePage {

  //create constructor
  public BasePage(WebDriver driver) {
    this.driver = driver;
    this.wait = new WebDriverWait(this.driver, Duration.ofSeconds(TIMEOUT));
    PageFactory.initElements(new AjaxElementLocatorFactory(this.driver, TIMEOUT), this);
  }

  //other common methods which can be utilized in your respective child Page classes

}

----------------------------------------------------
public class LoginPage extends BasePage {

    //Your Locators and Weblelements 
    private static final LOGIN_ID = "login";

    //Constructor to supply webdriver
    public LoginPage(WebDriver driver) {
        super(driver);
    }

    //your action methods
    public void loginToApp(){
    driver.findbyelement(By.ID(LOGIN_ID)).click
    }

}
----------------------------------------------------
public class LoginTest extends BaseTest{

public LoginPage login;
BeforeAll()
{
login = new LoginPage(driver);
}

@Test
public void verifyLogin(){
login.loginToApp();
}

} 
```

# c# - 从数据库表列创建链接以打开新的数据库列视图

> ID：14915865
> 
> 赞同：0
> 
> 时间：2013-02-16T22:35:29.610
> 
> 标签：c#, asp.net, sql

我想问一个简单的问题，这让我非常困扰，即使我读了几本书和谷歌和 youtube，我也无法得到一个简单的答案，所以这里是：

在 Web 表单中，我连接到 SQL 数据库，从该数据库中检索 .net 表的数据（行和列），我能够将它们保存到表中，然后通过选择每个行和列的精确 nuber确切的列 - 所以我能够创建一个很好的数据表视图

现在想象我有这个漂亮的视图，让我们说一个“文章的名称”，下面我有一个“文章的文本” - 现在的问题 - 我如何实现，当“文章的名称”是单击后，用户将在新页面上打开该文章的全文。

示例：我有一个页面显示两篇文章的摘要

```
dell studio nb
very good article about advantages of this masterpiece

imb thinkpad nb
in this article i show zou the latest pictures 
```

当用户点击`dell studio nb`或`imb thinkpad nb`它应该重定向他看到这样的页面：

```
imb thinkpad nb
as promised here are the pictures of this beautiful notebook and as zou can see etc. 
```

非常感谢您，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:31:10.570

基本上标题应该由超链接控件表示：

```
<asp:HyperLink id="title1" runat="server" 
NavigateUrl="~/FullText.aspx?Id=2" >imb thinkpad nb</asp:HyperLink> 
```

请注意，`NavigateUrl`其中包含一个[QueryString](http://www.dotnetperls.com/querystring)，它应该是存储在数据库中的文章的 ID。当页面加载时，获取该 ID 并查询数据库以获取完整文章。

# jquery - 从可排序列表拖动到完整日历

> ID：14915867
> 
> 赞同：5
> 
> 时间：2013-02-16T22:35:42.153
> 
> 标签：jquery, jquery-ui, fullcalendar, jquery-ui-sortable

我尝试将一个项目从可排序的事件列表拖到完整日历。

我没有在亚当肖的完整日历的文档中看到这一点，但也许有人已经做过一次了。

这是jsfiddle：http: [//jsfiddle.net/gtbm/VjNFn/2/](http://jsfiddle.net/gtbm/VjNFn/2/)

这里是所要求的代码：

```
/* initialize the external events
    -----------------------------------------------------------------*/
$('ol#external-events').sortable({
    opacity: .6,
    placeholder: 'placeholder',
    revert: "invalid",//  250, //          
    helper:   'clone'
});
$('#external-events li.external-event').each(function() {

    // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
    // it doesn't need to have a start or end
    var eventObject = {
        title: $.trim($(this).text()) // use the element's text as the event title
    };

    // store the Event Object in the DOM element so we can get to it later
    $(this).data('eventObject', eventObject);

});

    /* initialize the calendar
    -----------------------------------------------------------------*/

$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    editable: true,
    droppable: true, // this allows things to be dropped onto the calendar !!!
    drop: function(date, allDay) { // this function is called when something is dropped
        alert('I got it');

        // retrieve the dropped element's stored Event Object
        var originalEventObject = $(this).data('eventObject');

        // we need to copy it, so that multiple events don't have a reference to the same object
        var copiedEventObject = $.extend({}, originalEventObject);

        // assign it the date that was reported
        copiedEventObject.start = date;
        copiedEventObject.allDay = allDay;

        // render the event on the calendar
        // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
        $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);                
    }
}); 
```

我希望你能帮助，提前谢谢，C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:13:22.060

因此，我设法在月视图中找到了可拖动和可排序列表的解决方案。

你可以在这里找到 jsfiddle：http: [//jsfiddle.net/VjNFn/16/](http://jsfiddle.net/VjNFn/16/) 和代码：

```
 function getDateFromCell(td, calInstance){
        var cellPos = {
            row: td.parents('tbody').children().index(td.parent()),
            col: td.parent().children().index(td)
        };

        return calInstance.fullCalendar('getView').cellDate(cellPos);
        }

    /* initialize the external events
    -----------------------------------------------------------------*/
    $('#external-events div.external-event').each(function() {

        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
            title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);

        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });

    });     
    $('ol#sortable-events').sortable({
        helper: 'clone',        
        placeholder: 'placeholder',
        start: function(ev, ui) {
            // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
            var eventObject = {
                id:                 $.trim($(ui.item).attr('id')),  // use the element's id as the event id
                title:              $.trim($(ui.item).text()),      // use the element's text as the event title
                start:              new Date("2013-02-18T18:00:00"),//"2013-02-18T18:00:00", //day,
                end:                new Date("2013-02-18T18:00:00"),//"2013-02-18T18:00:00",//day,
                backgroundColor:    $(ui.item).css('background-color'),
                borderColor:        $(ui.item).css('background-color'),
                textColor:          $(ui.item).css('color'),
                allDay: true 
                };

            // store the Event Object in the DOM element so we can get to it later
            $(ui.item).data('eventObject', eventObject);
            $(ui.item).data('dropped', false);

            return  true;      
            },
        stop: function(ev, ui) {
            // Restore place of Event Object if dropped
            if ( $(ui.draggable).data('dropped') == true ) {
                $('ol#sortable-events').nestedSortable('cancel'); 
                $(ui.draggable).data('dropped') = false ;
                }
            }
        }).disableSelection();

    /* initialize the calendar
    -----------------------------------------------------------------*/
    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
            },
        defaultView: 'agendaWeek',
        editable: true,
        droppable: true, // this allows things to be dropped onto the calendar !!!
        dropAccept: '#external-events div.external-event',
        drop: function(date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

            // is the "remove after drop" checkbox checked?
            if ($('#drop-remove').is(':checked')) {
                // if so, remove the element from the "Draggable Events" list
                $(this).remove();
            }
        }
    }).find('td').each(function() {
        $(this).droppable({
            // greedy: false,
            accept: "ol#sortable-events li.sortable-event",
            // activeClass: "active",
            // tolerance: 'pointer',
            hoverClass: "fc-cell-overlay",
            drop: function( event, ui ) {
                // alert('coucou');
                if ( $(ui.draggable).data('dropped') == false ) {
                    // Get the event and init with the date
                    var eventObject = $(ui.draggable).data('eventObject');
                    var ddrop       = getDateFromCell( $(this), $('#calendar') );
                    eventObject.start = ddrop ;
                    eventObject.end = ddrop ;

                    // Delete the event if already dropped
                    $('#calendar').fullCalendar( "removeEvents", eventObject.id );

                    // render the event on the calendar
                    // the last `true` argument determines if the event "sticks" 
                    $('#calendar').fullCalendar('renderEvent', eventObject, true);

                    // Dropped flag is true state now
                    $(ui.draggable).data('dropped') == true
                    }

                return true;                      
                }
            })
        });; 
```

我不认为，这是一个很好的解决方案，因为它一周和一天都不起作用？？？？

请有任何想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:49:29.313

将这段代码添加到您的 each 方法中：

```
$(this).draggable({
    zIndex: 999,
    revert: true,      // will cause the event to go back to its
    revertDuration: 0  //  original position after the drag
}); 
```

您可以在更新的 jsfiddle [http://jsfiddle.net/EKTWJ/中检查这一点](http://jsfiddle.net/EKTWJ/)

文档中提到了一些从列表中拖拽的[内容](http://arshaw.com/fullcalendar/docs/dropping/droppable/)。

[这里](http://arshaw.com/js/fullcalendar-1.5.3/demos/external-dragging.html)有一个完整的工作示例，因此您可以检查页面的来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T12:40:40.860

@Brousse Ouilisse，您非常接近正确答案:(在您的评论中[https://stackoverflow.com/a/15251724/1198292](https://stackoverflow.com/a/15251724/1198292)您应该更改

```
$(document)
// To add in calendar function ***********************************
  .bind("sortstart", function(ev, ui) { 
      //_dragElement = ev.target;  <---------- REMOVE THIS
      _dragElement = ui.helper;  <---------- ADD THIS
      currentView.dragStart(_dragElement, ev, ui);    
  })
  .bind("sortstop", function(ev, ui) {
      if (_dragElement) {
          currentView.dragStop(_dragElement, ev, ui);
          _dragElement = null;
      }                       
  }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:44:44.933

我尝试展示解决方案，但我无法让它工作...... [http://jsfiddle.net/gtbm/VjNFn/20/](http://jsfiddle.net/gtbm/VjNFn/20/)

您在这个 jsfiddle 中找不到的是要在此处添加 fullcalendar.js 代码：

```
/* External Dragging
------------------------------------------------------------------------*/
if (options.droppable) {
$(document)
// To add in calendar function ***********************************
    .bind("sortstart", function(ev, ui) { 
        _dragElement = ev.target;
        currentView.dragStart(_dragElement, ev, ui);    
    })
    .bind("sortstop", function(ev, ui) {
        if (_dragElement) {
            currentView.dragStop(_dragElement, ev, ui);
            _dragElement = null;
        }                       
    })      
    // **********************************************       
    ... 
```

我希望它有帮助，C

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-08T21:46:43.173

这是一个解决方案。

```
create: function(event, ui) {
    $(this).children().each( (index, item) => {
        $(item).data('event', { // DATA TO PASS TO CALENDAR
            title: this.data.title,
            type: this.data.type, 
            cells: this.data.cells,
            event_id: this.data.id
        });
    });
}, 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-31T15:50:26.313

设置`data-event`可排序元素的属性似乎对我有用。它在[fullcalendar eventReceive 文档中有所描述](https://fullcalendar.io/docs/dropping/eventReceive/)

```
<ul id="sortable-list">
  <li data-event='{"title":"my event"}'>Task</li>
</ul> 
```

也可以使用 jquery 设置数据属性。

```
$('#selector').data('event', {title: 'my event'}) 
```

# php - 在 PHP 上正确解码双编码的 UTF-8

> ID：14915869
> 
> 赞同：0
> 
> 时间：2013-02-16T22:35:52.043
> 
> 标签：php, javascript, jquery, ajax, encoding

所以我试图通过 Ajax 将数据从 HTML 页面发送到 PHP 页面。

这就是我使用的 jQuery 代码：

```
$.ajax({
    url: "test.php",
    type: "POST",
    data: {
        name: "João"
    }
}).done(function (data) {
    alert(data);
}) 
```

如您所见，我发送的参数是“João”。在发出 Ajax 请求之前，jQuery 在后台对其进行编码，“João”变为“Jo%C3%A3o”，它是双重编码的 UTF-8。

当请求被发送并且 PHP 尝试在后台对其进行解码时，我的问题就出现了。**当我使用 $_POST 时，PHP 只会自动解码一次，所以我得到的是“João”，而不是“João”。**发生这种情况是因为 PHP 正在单独解码每个 % ，因此**%C3**变为**Ã**并且**%A3**变为**£**。

如果我尝试通过 utf8_decode() 手动对其进行解码，它将起作用，但我在这里知道是否有更好的解决方案。我真正需要的是一种让 PHP 正确解码我的数据的方法，即使它是双重编码的，甚至是三重编码的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:04:49.233

这不是双重编码的，它是正确的 UTF-8。看起来 PHP 期待的是 latin-1 编码，并且向您展示了如果它们*不是* UTF-8 相同的字节意味着什么。

在这种情况下，由于您的字符似乎低于 0xFF，如果您不知道如何让 PHP 识别 UTF-8，您也可以先将它们 URL 编码为 latin-1 中的 Jo%E3o。

# javascript - 无法引用图像 ID javascript

> ID：14915873
> 
> 赞同：0
> 
> 时间：2013-02-16T22:36:38.537
> 
> 标签：javascript, image, resize, getelementbyid

我有一个显示公告的 PHP 页面，并且文本中嵌入了图像。我在这里添加了简化的代码。问题是当我尝试更改图像的大小时，DOM 无法引用图像。在实际文件中，如果我新加载页面，则无法引用图像，但如果我导航回它（使用日期选择器），突然之间 Javascript 调整大小就可以了。只是在第一次加载图像时不起作用。

```
function resizeImg () {
        var w=document.getElementById("textImg").width;
        var h=document.getElementById("textImg").height;
        alert(h+" "+w);
        if (w>300 || h>300) {
            if (w>300) {
                var factor=((300/w));
            } else {
                if (h>300) {
                    var factor=((300/h));
                }
            }
            w*=factor;w=Math.round(w);
            h*=factor;h=Math.round(h);
            document.getElementById("textImg").style.width=w+"px";
            document.getElementById("textImg").style.height=h+"px";

        }
    }//end FUNCTION 
```

标题：

```
<?php 
    $pic="20130213.gif";
    $blText="Yes, you heard right. Thats all we are going to have for dinner. Why?  because cream of corn is good when you put sugar in it, with some pepper and butter. So, quit your complaining and eat the slop.";
?> 
```

HTML：

```
<body>
   <div id="bullText" class="tBorder">
        <div class="tBorder" id="bullTextArea">
        <?php 
            $file="../../Admin/aPages/upload/".$pic;

            echo "<img id='textImg' class='textImage' src='".$file."' alt='no image' />";
            echo $blText 
        ?>

        </div>
    </div><!--BULL TEXT DIV-->
    <?php
        echo "<script>resizeImg ()</script>";
    ?>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:45:54.030

您可能需要等待图像加载：

```
el = document.getElementById("textImg");

if (el.addEventListener){
  el.addEventListener('load', resizeImg, false); 
} else if (el.attachEvent){
  //IE uses attachEvent
  el.attachEvent('onload', resizeImg);
} 
```

在此之前你应该等待 DOM 准备好，否则 document.getElementById 可能什么也找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:41:25.933

你试过把你的 js 代码放在 window.onload 吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T22:54:01.320

**（[jsFiddle解决方案](http://jsfiddle.net/tmHwY/)）**

这里的问题是你正在尝试

```
var w=document.getElementById("textImg").height; 
```

但这仅在您自己设置高度时才有效。否则，您需要使用以下方法之一：

```
var h = document.getElementById('someDiv').clientHeight;
var h = document.getElementById('someDiv').offsetHeight;
var h = document.getElementById('someDiv').scrollHeight; 
```

**clientHeight**包括高度和垂直填充。

**offsetHeight**包括高度、垂直填充和垂直边框。

**scrollHeight**包括包含文档的高度（在滚动的情况下会大于高度）、垂直填充和垂直边框。

来源：[获取元素的高度](https://stackoverflow.com/questions/526347/css-javascript-how-do-you-get-the-rendered-height-of-an-element)

**当然，宽度也一样。**

# python - 在 Python 中随机化/打乱列表/数组？

> ID：14915877
> 
> 赞同：1
> 
> 时间：2013-02-16T22:37:28.827
> 
> 标签：python, random, shuffle

我对 Python 完全陌生，没有编程经验。我有这个（我不确定它是列表还是数组）：

```
from random import choice
while True:
s=['The smell of flowers',
'I remember our first house',
'Will you ever forgive me?',
'I\'ve done things I\'m not proud of',
'I turn my head towards the clouds',
'This is the end',
'The sensation of falling',
'Old friends that have said good bye',
'I\'m alone',
'Dreams unrealized',
'We used to be happy',
'Nothing is the same',
'I find someone new',
'I\'m happy',
'I lie',
]
l=choice(range(5,10))
while len(s)>l:
s.remove(choice(s))
print "\nFalling:\n"+'.\n'.join(s)+'.'
raw_input('') 
```

其中随机选择 5-10 行并打印它们，但它们以相同的顺序打印；即“我撒谎”如果被选中将始终位于底部。我想知道如何打乱选定的行，使它们以更随机的顺序出现？

编辑：所以当我尝试运行它时：

```
import random
s=['The smell of flowers',
'I remember our first house',
'Will you ever forgive me?',
'I\'ve done things I\'m not proud of',
'I turn my head towards the clouds',
'This is the end',
'The sensation of falling',
'Old friends that have said good bye',
'I\'m alone',
'Dreams unrealized',
'We used to be happy',
'Nothing is the same',
'I find someone new',
'I\'m happy',
'I lie',
]

picked=random.sample(s,random.randint(5,10))
print "\nFalling:\n"+'.\n'.join(picked)+'.' 
```

它似乎运行，但不打印任何东西。我从 Amber 的回答中正确输入了吗？我真的不知道我在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:41:42.007

```
import random

s = [ ...your lines ...]

picked = random.sample(s, random.randint(5,10))

print "\nFalling:\n"+'.\n'.join(picked)+'.' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:44:30.923

您也可以使用`random.sample`，它不会修改原始列表：

```
>>> import random
>>> a = range(100)
>>> random.sample(a, random.randint(5, 10))
    [18, 87, 41, 4, 27]
>>> random.sample(a, random.randint(5, 10))
    [76, 4, 97, 68, 26]
>>> random.sample(a, random.randint(5, 10))
    [23, 67, 30, 82, 83, 94, 97, 45]
>>> random.sample(a, random.randint(5, 10))
    [39, 48, 69, 79, 47, 82] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T22:45:03.460

这是一个解决方案：

```
 import random
    s=['The smell of flowers',
    'I remember our first house',
    'Will you ever forgive me?',
    'I\'ve done things I\'m not proud of',
    'I turn my head towards the clouds',
    'This is the end',
    'The sensation of falling',
    'Old friends that have said good bye',
    'I\'m alone',
    'Dreams unrealized',
    'We used to be happy',
    'Nothing is the same',
    'I find someone new',
    'I\'m happy',
    'I lie',
    ]
    random.shuffle(s)
    for i in s[:random.randint(5,10)]:
        print i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T22:45:06.807

您可以使用`random.sample`从列表中选择随机数量的项目。

```
import random
r = random.sample(s, random.randint(5, 10)) 
```

# excel - 如果数据尚不存在，则将数据从 excel 插入表中，如果存在，则在 SSIS 2005 中写入文件

> ID：14915883
> 
> 赞同：0
> 
> 时间：2013-02-16T22:38:30.543
> 
> 标签：excel, sql-server-2005, insert, ssis, lookup

我是 SSIS 的新手。我正在尝试将数据从 excel 加载到 sql server 表。如果数据已经存在于表中，我必须做什么然后我将它写入临时表或文件，如果不存在，那么我必须插入到表中。

我们正在使用 sql server 2005。我正在使用查找转换来实现这一点。但它不起作用。有什么我可以实现的。

请给我一些建议。非常感谢您的帮助。

问候，VG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:01:43.417

我会写下概念上的步骤——而不是给出一步一步的解决方案。在我看来，这对加深理解更有帮助。如果您在任何步骤上遇到困难，请告诉我们。

步骤1：

首先将文件加载到临时表中。您不需要手动创建表；让 BIDS 为您创建它。更改表以添加新列 - ALREADY_EXISTS - BIT 数据类型。

您将需要使用数据流任务。在其中，使用 Excel 数据源和 ADO 目标。

步骤 2a：在 SSMS 中使用临时表和最终目标表的内部连接编写 sql 语句。确保您提出的查询给出了您期望的结果。使用此 SELECT 语句更新临时表中的 ALREADY_EXISTS 列。

第 2 步：将执行 SQL 任务放在控制面上。使用步骤 2 中的查询。

第 3 步：将另一个 DFT 放在控制面上。编写一个普通的 SELECT 语句来获取所有列 - 包括 ALREADY_EXISTS。

使用条件拆分来确定新的和现有的记录，并将它们相应地指向它们的目的地。

此外，请阅读 Merge 语句，这是 SQL Server 2008 中引入的一项功能。

请分享您对此解决方案的经验。

# java - Web 应用程序内的路径不是直接链接

> ID：14915887
> 
> 赞同：1
> 
> 时间：2013-02-16T22:38:59.303
> 
> 标签：java, jsf, web-applications, file-upload

在我的项目中，我目前正在使用直接链接，这些存储上传到服务器的特定文件，这些位置都在项目的文件夹中（文件上传）

```
destinationPDF=D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/pdf/
destination=D:/Documents/NetBeansProjects/printing~subversion/fileupload/Uploaded/
fileList =D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/resources/Directory Files/directoryFiles.txt 
```

但这不是一个理想的情况，因为我目前正在多台机器上进行测试，并且每台机器都需要不同的路径，所以我想知道，是否可以创建一条路径，以便它在哪台机器上无关紧要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:07:14.210

只需使其在外部可配置。有多种方法可以实现这一目标。

1.  在服务器启动期间设置环境变量。

    ```
    SET UPLOAD_LOCATION=C:\path\to\uploads 
    ```

    可用如下：

    ```
    String uploadLocation = System.getenv("UPLOAD_LOCATION"); 
    ```

2.  在服务器启动期间设置 VM 参数。

    ```
    -Dupload.location="C:\path\to\uploads" 
    ```

    可用如下：

    ```
    String uploadLocation = System.getProperty("upload.location"); 
    ```

3.  将其设置为[属性文件](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)条目。

    ```
    upload.location=C:\path\to\uploads 
    ```

    它可以通过通常的[`Properties`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)API 方式使用：

    ```
    String uploadLocation = properties.getProperty("upload.location"); 
    ```

    属性文件本身的位置实际上是一个完整的问题，这里已经回答了：[在哪里放置以及如何读取基于 servlet 的应用程序中的配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application/2161583#2161583)

无论哪种方式，您都可以轻松地引用文件，如下所示：

```
File some = new File(uploadLocation, "some.ext"); 
```

# matlab - 在具有一个约束的Matlab中找到可能组合的算法？

> ID：14915892
> 
> 赞同：1
> 
> 时间：2013-02-16T22:39:18.620
> 
> 标签：matlab, combinations, linear-programming

一个非常简单的例子：

`A=[100 250 300]`

只要每个组合的总和**小于 500 ，我如何找到所有可能的组合？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:20:02.580

这段代码应该可以工作。结果将存储在元胞数组中`C`：

```
A = [100 250 300];
B = 500;
C = cell(0);

for i = 1:size(A,2)
    D = nchoosek(A,i);
    for j = 1:size(D,1)
        if (sum(D(j,:)) < B)
            C{end+1} = D(j,:);
        end
    end
end 
```

或更紧凑：

```
A = [100 250 300];
B = 500;
C = cell(0);

for i = 1:size(A,2)
    C = [C; num2cell(nchoosek(A,i),2)];
end
C = C(cellfun(@(x) sum(x), C) < B); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:12:10.880

这个简单的代码

```
A=[100 250 300];
p = perms(A);

for nn = 1:numel(A)    
    p(sum(p(:,1:nn), 2) < 500, 1:nn)
end 
```

给出以下输出

```
ans =

   300
   300
   250
   250
   100
   100

ans =
   300   100
   250   100
   100   250
   100   300 
```

如果要删除重复项，例如 [300 100] 和 [100 300]，只需使用`sort`命令对值进行排序，然后您可以使用删除重复项`unique`

# c - 指向指针混淆的指针，以及列表之间的节点转移

> ID：14915894
> 
> 赞同：0
> 
> 时间：2013-02-16T22:39:35.147
> 
> 标签：c, pointers

我对 C 中的一些代码段让自己发疯，我希望能进行干预。我有：

```
typedef struct node{
int value;    
node_t *next;
node_t *prev;
} node_t;

node_t current_node;     
node_t other_list;

void transfer(node_t **ipp) 
{
  if (*ipp == NULL)
  {
     *ipp = current_node;
     current_node->prev->next = current_node->next; 
  }
  else 
  {
    (*ipp)->next = current_node;
    ipp = &(*ipp)->next;
    current_node->prev->next = current_node->next;
  }
}

int main(void)
{
 int i;
 for(i= 0; i< 10; i++)
 {
   transfer(&other_list);
   current_node = current_node->next;
 } 
```

我现在不应该能够从第一个列表中删除项目并将它们转移到第二个吗？插入的最后一个节点的 other_list 点也不应该吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:51:48.537

我看到两个问题：

1.  您正在更新列表中上一个节点的“下一个”指针，而不是列表中下一个节点的“上一个”指针。
2.  您没有检查当前节点是否实际指向列表中的另一个元素。`current_node->prev`很可能`null`。

# css - 使用压缩输出时，SASS/Compass 在@each 中缺少一个条目

> ID：14915896
> 
> 赞同：1
> 
> 时间：2013-02-16T22:39:37.947
> 
> 标签：css, sass, compass-sass

以下 SCSS 片段在使用`compass compile`. 但是如果我使用`-output_style compressed`CSS 则缺少`.box-yellow`定义。`.box-red`等生成，但黄色缺失。

```
$colors: red #f00, yellow #ff0, green #0f0, blue #00f;

@each $entry in $colors {
    $name: nth($entry, 1);
    $color: nth($entry, 2);

    .box-#{$name} > header {
         background: $color;
    }
 } 
```

这可能是一个错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:52:22.780

不确定这是否是一个错误，但对我来说似乎很奇怪。如果我将样式设置为压缩，我可以在这里使用 v 3.2.3 复制它。奇怪的是，将其缩短到`yello`可以正常工作。一种解决方法是引用它们：

```
$colors: "red" #f00, "yellow" #ff0, "green" #0f0, "blue" #00f; 
```

这会产生：

```
.box-red>header{background:red}.box-yellow>header{background:#ff0}.box-green>header{background:lime}.box-blue>header{background:blue} 
```

现在我再次查看输出，出现了一种模式：其他颜色生成颜色名称而不是十六进制值。

# r - RNetLogo 函数 NLStart 无法启动 gui

> ID：14915898
> 
> 赞同：2
> 
> 时间：2013-02-16T22:39:50.993
> 
> 标签：r

当我尝试使用函数 NLStart() 从 RStudio 启动 NetLogo gui 时，我收到有关 java 的消息并且 GUI 没有打开。我正在使用 Win 7 64 位、NetLogo 5.0.3、R 2.15.1 和 R studio 0.96.304。
这是R代码...

```
library(RNetLogo)
nl.path <- "C:\\Program Files (x86)\\NetLogo 5.0.3"
NLStart(nl.path, gui = TRUE, nl.version = 5) 
```

并返回消息

```
<java.awt.HeadlessException
at java.awt.GraphicsEnvironment.checkHeadless(Unknown Source)
at java.awt.Window.<init>(Unknown Source)
at java.awt.Frame.<init>(Unknown Source)
at java.awt.Frame.<init>(Unknown Source)
at javax.swing.SwingUtilities$SharedOwnerFrame.<init>(Unknown Source)
at javax.swing.SwingUtilities.getSharedOwnerFrame(Unknown Source)
at javax.swing.JOptionPane.getRootFrame(Unknown Source)
at javax.swing.JOptionPane.showOptionDialog(Unknown Source)
at javax.swing.JOptionPane.showMessageDialog(Unknown Source)
at javax.swing.JOptionPane.showMessageDialog(Unknown Source)
at nlcon.NLink_v5.<init>(NLink_v5.java:108)> 
```

起初我怀疑 NetLogo 可能在无头模式下运行，但是当我尝试使用...打开模型时

```
model.path <- "\\models\\Sample Models\\Earth Science\\Fire.nlogo"
NLLoadModel(paste(nl.path,model.path,sep="")) 
```

我明白了

```
<Error in .jcall(nl.obj, "V", "loadModel", .jnew("java/lang/String", model.path)) : 
RcallMethod: invalid object parameter> 
```

这里发生了什么？任何解决方案或线索将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:22:08.937

首先，请安装最新版本的 RNetLogo (0.9.6)，可从 R-Forge 获得，请参见此处[http://rnetlogo.r-forge.r-project.org/](http://rnetlogo.r-forge.r-project.org/)（“如何获取”部分）。但这不会解决您的问题，因为我们看到这不是 RNetLogo 问题，而是 rJava 已经出现的问题。似乎您的 Java/配置有问题（不支持视觉显示 --> awt/swing）。

您还没有编写您安装的 Java 类型（Oracle/Sun JRE、Sun JDK、OpenJDK ...）。但我认为这通常不是 Java 问题（因为您已经能够创建 Point 对象，从而得出安装 awt 库的结论），而是配置问题（由 rJava 启动的 JVM 似乎在无头运行模式）。

因为这很难通过远程诊断来解决，所以我会尝试删除 Java（以及所有相关的环境变量：JAVA_HOME、PATH 中的相应条目，可能还有 NOAWT 等）和 rJava，然后安装干净的。

但在你这样做之前，我还有两个想法：

1.  您也可以尝试执行

    Sys.setenv(NOAWT=0)

    在启动JVM之前

    .jinit()

    或在加载 rJava 包之前。但我不是很乐观，因为打电话

    .jcall("java/lang/System", "S", "getProperty", "java.awt.headless")

    正如您所报告的，不应导致 HeadlessException。这对我来说看起来很奇怪。如果你在没有 RStudio 的情况下做所有这些事情（也来自上一个答案）会发生什么？

2.  您是否能够安装和打开 JGR（提供基于 Java 的 R 环境的 R 包，请参阅[http://cran.r-project.org/web/packages/JGR/index.html](http://cran.r-project.org/web/packages/JGR/index.html)）？如果是这样，请尝试从那里启动 RNetLogo。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:31:27.587

乍一看，这听起来像是一个 Java 问题，但我不确定。以前从未见过此错误。

您使用的是哪个 Java 发行版（OpenJDK、Sun JRE、Sun JDK ...）？你安装了哪个版本的 RNetLogo？

```
z <- installed.packages()
z["RNetLogo","Version"] 
```

您的错误在第 108 行抛出，其中 RNetLogo 尝试打开 JOptionPane 以报告 NetLogo 加载期间发生的错误。因此，问题当前是您的 Java 缺少 GUI 支持。这也可能是 NetLogo 未启动的根本问题，但也可能是不同的问题。

我的第一个建议是，您要么安装没有 GUI 库的轻量级 Java 版本，要么将其配置为不使用此类库。

因此，从第一个测试开始：打开 MS-DOS 提示符，导航到您的 NetLogo 安装：

```
cd  "C:\Program Files (x86)\NetLogo 5.0.3" 
```

并尝试从那里启动 NetLogo：

```
java -jar NetLogo.jar 
```

发生了什么？

第二个测试，如果您通过第一个测试：打开一个新的 RStudio 会话并加载 rJava：

```
library(rJava) 
```

初始化它：

```
.jinit() 
```

尝试创建一个简单的 awt 对象：

```
.jnew( "java/awt/Point", 10L, 10L ) 
```

并尝试打开一个简单的 awt 窗口：

```
f <- .jnew("java/awt/Frame","Hello")
.jcall(f,,"setVisible",TRUE) 
```

这应该会打开一个简单的窗口（不能用 X 关闭，因为它没有处理程序 - 只需关闭您的 RStudio）。如果不是，则说明您的 Java/rJava 的 awt GUI 支持有问题。

至少一个摇摆 JOptionPane 测试：

```
component <- .jnull()
component <- .jcast(component, new.class = "java/awt/Component")
message <- .jnew("java/lang/String","This is a JOptionPane test from rJava.")
message <- .jcast(message, new.class = "java/lang/Object")
title <- .jnew("java/lang/String","Test")
type <- .jnew("java/lang/Integer", as.integer(2))
f <- .jnew("javax/swing/JOptionPane")
.jcall(f,,"showMessageDialog", component, message, title, .jsimplify(type)) 
```

把你的 RStudio 带回来，你应该会看到一个对话窗口。如果不是，那么您的 Java/rJava 的 swing 支持有问题。

检查 rJava 是否以您期望的 Java 版本运行：

```
.jcall("java/lang/System", "S", "getProperty", "java.vm.version")
.jcall("java/lang/System", "S", "getProperty", "java.vm.name")
.jcall("java/lang/System", "S", "getProperty", "java.vm.info")
.jcall("java/lang/System", "S", "getProperty", "java.runtime.version")
.jcall("java/lang/System", "S", "getProperty", "sun.arch.data.model")
.jcall("java/lang/System", "S", "getProperty", "java.vm.info") 
```

这是什么报告：

```
.jcall("java/lang/System", "S", "getProperty", "java.awt.headless") 
```

还有这个：

```
Sys.getenv("NOAWT") 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-05T11:36:53.177

我发现将我的所有软件（NetLogo、R 和 Java）都设置为 64 位（对我有用）或 32 位都很好。2021 年开业可能会略有不同。我发现将代码直接运行到 R GUI 而不是从 RStudio 中也有帮助。我有一个 youtube 视频 ( [https://www.youtube.com/watch?v=zWMdaTEPTOc](https://www.youtube.com/watch?v=zWMdaTEPTOc) )，介绍了如何从 R 打开 NetLogo，包括故障排除选项。我的功能代码也可以在这里找到。[https://raw.githubusercontent.com/tonysdatamodels/netlogo.in.r/main/open%20netlogo%20in%20r](https://raw.githubusercontent.com/tonysdatamodels/netlogo.in.r/main/open%20netlogo%20in%20r)

# java - 从具有非均匀分布的集合中选择随机元素？

> ID：14915899
> 
> 赞同：1
> 
> 时间：2013-02-16T22:39:55.313
> 
> 标签：java, data-structures, random, set

我想要一个集合，并且它的元素具有与之关联的概率，所以当我从集合中随机选择一个元素时，分布遵循与元素关联的概率。我想在一个非常小的 Java 应用程序中使用它，该应用程序存储了我想看的电影列表，这样我就可以让它向我推荐一部随机电影（否则我总是要花几个小时来挑选一部电影）。对于每部电影，我想关联向我推荐电影的次数，这将与从列表中选择电影以进行下一个建议的概率成反比。

是否有一种数据结构允许从其中随机选取元素且分布不均匀？

如果不是，那么编写这种数据结构的最有效方法是什么？我当然可以始终构建一个数组，将列表中的每个元素经常放入数组中，以便数组中值的分布与我希望它们具有的概率相匹配，并从该数组中选择一个随机元素；但是对于大型电影来说，这将是非常低效的。我的另一个想法是封装元素和所有元素的概率总和（所以第一个元素将被封装为（first，p（first）），第二个元素被封装为（second，p（second）+ p（首先））等等），然后选择一个介于 0 和 1 之间的随机数，并在这些封装元素的排序列表上进行二进制搜索。这听起来合理吗？

TL:DR（有点抽象）：如何在 Java 中有效地将非均匀分布映射到集合的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T22:48:30.547

不确定我是否正确理解了这个问题。我会用一个`TreeMap<Double, Movie>`.

示例：假设您有电影 A (60 %)、电影 B (30 %) 和电影 C (10 %)。

```
TreeMap<Double, Movie> movies = new TreeMap<>();
movies.put(0.6, new Movie("Movie A"));
movies.put(0.9, new Movie("Movie B")); // 0.6 + 0.3
movies.put(1.0, new Movie("Movie C")); // 0.6 + 0.3 + 0.1
Double probability = Math.random(); // between 0 (inclusive) and 1.0 (exclusive)
Movie chosen = movies.higherEntry(probability).getValue(); 
```

我将把人口和概率的重新排列留给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T12:36:59.577

有一种很酷的方法称为“别名方法”，它可以在 O(1) 中进行选择。[在这里得到了很好的解释： http](http://pandasthumb.org/archives/2012/08/lab-notes-the-a.html) ://pandasthumb.org/archives/2012/08/lab-notes-the-a.html

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T22:58:46.057

我会简单地定义：

```
class Movie {
    int recommendations;
} 
```

然后做

```
public Movie chooseMovie(ArrayList<Movie> movies) {
    Random rand = new Random();
    int sum = 0;
    for(Movie movie : movies) {
        sum += movie.recommendations;
    }
    int choice = rand.nextInt(sum);
    int soFar = 0;
    for(Movie movie : movies) {
        soFar += movie.recommendations;
        if(choice < soFar) {
            return movie;
        }
    }
    return null;
} 
```

如果该范围较大，则选择变量更有可能落在电影的推荐范围内。它很慢，但实际上电影的数量可能足够少，足以让您正常工作。如果您进行大量查找，您可以缓存总推荐总和和增量总和，类似于您建议的方式。

## 编辑 - 概率与推荐数量成反比

```
public Movie chooseMovie(ArrayList<Movie> movies) {
    Random rand = new Random();
    double sum = 0;
    for(Movie movie : movies) {
        if(movie.recommendations > 0) {
            sum += 1 / (double) (movie.recommendations);
        }
    }
    int choice = rand.nextDouble() * sum;
    double soFar = 0;
    for(Movie movie : movies) {
        if(movie.recommendations > 0) {
            soFar += 1 / (double) (movie.recommendations);
            if(choice < soFar) {
                return movie;
            }
        }
    }
    return null;
} 
```

# ios - UIActivityViewController - 上传 Youtube 视频

> ID：14915901
> 
> 赞同：5
> 
> 时间：2013-02-16T22:40:26.400
> 
> 标签：ios, objective-c, xamarin.ios, youtube

我有一个`UIActivityViewController`用来分享视频的文件，我正在传递一个`NSString`文本和一个`NSUrl`指向本地 mp4 视频文件的文件。

分享已经适用于电子邮件、消息、相册等。我怎样才能将我的视频也上传到 Youtube？

如果您在那里尝试，Apple 会在默认的照片和相机应用程序中执行此操作。我也可以在我的应用程序中执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:06:39.770

Apple 只*分享*`UIActivity`它在其应用程序中使用的一些内容。这可能是因为有些是 iOS 的一部分，而另一些是应用程序的一部分（不同的团队）。

OTOH 很容易将您自己的应用程序添加`UIActivity`到您的应用程序中，例如查看我的[AirPlay](https://github.com/spouliot/airplay/blob/master/Poupou.AirPlay/UIAirPlayActivity.cs) `UIActivity`附带的[示例](https://github.com/spouliot/airplay/tree/master/airpic-ios)。

因此，如果您可以找到一个 .NET YouTube 客户端库，那么您*应该*只需要一点胶水来连接它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:57:31.003

不幸的是，根据[UIActivity 类引用](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40011974-CH1-SW13)，它不包含在 iOS 6 中（嗯，至少不包含在公共 API 中）。

您可能必须创建自己的 UIActivity（就像[这里](https://stackoverflow.com/questions/12766300/how-can-i-create-a-custom-uiactivity-and-uiactivityprovider-in-ios-6)一样）并自己实现 youtube 上传。

或者希望有一个现成的库可以这样做。

# objective-c - CCMoveTo 持续时间/速度问题

> ID：14915903
> 
> 赞同：0
> 
> 时间：2013-02-16T22:40:31.443
> 
> 标签：objective-c, cocos2d-iphone, game-physics

一些帮助将不胜感激。基于屏幕上触摸给出的标题的精灵移动。Sprite 按预期移动，但无论我为 currentSpeed 使用什么值，我都无法改变速度。这是在精灵的更新方法中。提前致谢。

```
 // Distance between two points (Distance formula, Pythagorean Theorem c^2=a^2+b^2, so d=sqrt((x2-x1)^2+(y2-y1)^2)
    // Duration (time = distance / rate)

    CGPoint adjustedPosition;
    adjustedPosition.x = position_.x - sinf(heading);
    adjustedPosition.y = position_.y - cosf(heading);

    float distance = CGPointDistanceBetweenTwoPoints(adjustedPosition, position_);
    float duration = distance / currentSpeed;

    position_ = adjustedPosition;

    [self runAction:[CCMoveTo actionWithDuration:duration position:position_]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:58:55.527

不要使用 moveto 或更新方法中的任何操作。相反，计算 position ，如下所示：

```
-(void) update:(ccTime) dt {

    // _velocity in points per second.
    // heading should be in ccw notation, 0 on x axis, RHS

    float deltaX = dt * _velocity * cosf(heading);
    float deltaY = dt * _velocity * sinf(heading);
    CGPoint adjustedPosition = ccpAdd(self.position, ccp(deltaX,deltaY));
    self.position = adjustedPosition;
} 
```

或类似的东西。这将缓解任何方差 id dt，您唯一可以打赌的是它不会是恒定的；但物理学应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:35:37.937

试试这个距离：

```
float distance = ccpLength(ccpSub(adjustedPosition, position_)); 
```

# android - 是否可以调试混淆的 Android 应用程序？

> ID：14915912
> 
> 赞同：1
> 
> 时间：2013-02-16T22:41:34.940
> 
> 标签：android, eclipse, debugging, obfuscation

假设我有混淆应用程序的代码和映射。我可以在 Eclipse 中以某种方式调试这个应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:54:03.843

在 Eclipse 中，Proguard 混淆仅在应用程序被导出时才被激活，也就是发布模式。

据我所知，此配置中未添加调试信息。

> 在发布模式下构建应用程序时，无论是通过运行 ant release 还是使用 Eclipse 中的导出向导，构建系统都会自动检查是否设置了 proguard.config 属性。如果是，ProGuard 会在将所有内容打包成 .apk 文件之前自动处理应用程序的字节码。在调试模式下构建不会调用 ProGuard，因为它使调试更加麻烦。

[资源](https://developer.android.com/tools/help/proguard.html#enabling)

**编辑：**

看起来有些骇人听闻的解决方案存在。以下是两个可能对您有所帮助的讨论：

*   [问题 14469：使用 Eclipse ADT 时可选择在调试版本上运行 proguard](https://code.google.com/p/android/issues/detail?id=14469)
*   [问题 34019：允许在 ADT 的调试版本中剥离 proguard](https://code.google.com/p/android/issues/detail?id=34019)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:32:11.750

是的你可以。Proguard 只是通过混淆代码使其难以理解。

# java - 加载本机库时出现 UnsatisfiedLinkError

> ID：14915918
> 
> 赞同：0
> 
> 时间：2013-02-16T22:42:34.680
> 
> 标签：java, linux, java-native-interface, 64-bit

我正在尝试使用我的 java 程序中的本机库。我可以通过以下命令成功加载`libpHash.so`。`/usr/local/lib`

```
System.loadLibrary("pHash"); 
```

但是，当我尝试`libpHash-jni.so`通过调用加载到同一文件夹中时，`System.loadLibrary("pHash-jni")`出现以下错误：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：/usr/local/lib/libpHash-jni.so：libpHash.so.0：无法打开共享对象文件：没有这样的文件或目录

为什么？

* * *

一些附加信息：

*   `libpHash.so`并且`libpHash.so.0`都是指向的符号链接`libpHash.so.0.0.0`
*   `libpHash.so.0.0.0`并且`libpHash-jni.so`都是 ELF 64 位 LSB 共享对象
*   我有 64 位 JVM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:05:57.233

一种可能的解决方案是使用`ldconfig`. 如果这不能解决问题，您也可以尝试设置`LD_LIBRARY_PATH`

```
export LD_LIBRARY_PATH=/usr/local/lib 
```

并重新启动您的程序。

# c# - 页面重新加载时 TempData 丢失

> ID：14915921
> 
> 赞同：1
> 
> 时间：2013-02-16T22:42:57.040
> 
> 标签：c#, asp.net, asp.net-mvc

我使用 TempData 存储登录用户角色，但是在用户登录并按 F5 重新加载页面后，我遇到了一个错误，指出`Object reference not set to an instance of an object`

我使用 TempData 因为我的页面需要重定向。用户在提交之前填写登录表单，我不知道如何检索发布的数据，因为我需要将用户重定向到管理页面以防他的角色是`administrator`或只是`standard`页面以防他是`normal user`。

```
 private bool IsAdmin(string username)
    {
        return (Roles.GetRolesForUser(username).ToList().Contains("administrator"));
    }

    public ActionResult AdminLayout() 
    {            
        if(IsAdmin(TempData["LoginUsername"].ToString())) //Error TempDate on Reload
        {
             return View();
        } 
        else
        {
             return Index();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:45:59.107

为什么不将它存储在会话变量中？顾名思义，TempData 只是临时的，会话变量将数据保存更长时间。

# android - ScrollView 中带有 LinearLayout 的大量不需要的空白

> ID：14915922
> 
> 赞同：1
> 
> 时间：2013-02-16T22:43:00.577
> 
> 标签：android, android-layout, scrollview

我有一个带有自定义 ImageView 和两个 TextEdits 的布局；一上一下。为了使它适合多个屏幕，我用 ScrollView 包围了整个东西。

但是，当添加 ScrollView 时，顶部 TextEdit 和 ImageView 以及 ImageView 和底部 TextEdit 之间会出现巨大的间隙（大约屏幕高度）。

我只是覆盖`onDraw()`ImageView 中的方法（并且仍在`super.onDraw()`从那里调用）

这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/top_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/top_hint" >

        <requestFocus />
    </EditText>

    <com.javanut13.gememerator.MImageView
        android:id="@+id/image_viewer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="0dp"
        android:src="@drawable/ic_action_search" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/bottom_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:layout_weight="3"
            android:hint="@string/bottom_hint" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/button_text" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T21:40:43.887

好的，事实证明我的 ImageView 在缩放图像时没有调整其高度，因此它会保持原始图像的高度（来自我的相机；大约 2000 像素高），因此上面有很大的空间和它下面。

I came across this question: ([Image do not resize with ImageView](https://stackoverflow.com/questions/12089796/image-do-not-resize-with-imageview)) which says to add `android:adjustViewBounds="true"` to the ImageView, which fixes the problem.

# c++ - 为char数组赋值

> ID：14915924
> 
> 赞同：19
> 
> 时间：2013-02-16T22:43:15.633
> 
> 标签：c++

我输入时没有错误

```
char a[10] = "Hi"; 
```

但是当我将其更改为以下内容时，出现错误：`Array type char is not assignable.`

```
char a[10];
a = "Hi"; 
```

为什么数组类型 char 不可赋值？是因为语言是故意这样写的，还是我漏掉了一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-16T22:47:11.450

数组不是可修改的左值

采用

```
char a[10];
strcpy(a, "Hi"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-16T23:15:17.907

正如我在上面评论的那样，执行此操作的 C++ 方法是使用`std::string`而不是`char[]`. 这将为您提供您期望的分配行为。

也就是说，您只在第二种情况下收到错误的原因是`=`这两行中的 the 表示不同的东西：

```
char a[10] = "Hi";
a = "Hi"; 
```

第一个是初始化，第二个是赋值。

第一行在堆栈上分配了足够的空间来容纳 10 个字符，并将前三个字符初始化为“H”、“i”和“\0”。从这一点开始，`a`所做的就是引用数组在堆栈上的位置。因为数组只是栈上的一个地方，`a`是永远不允许改变的。如果您希望堆栈上的不同位置保存不同的值，则需要不同的变量。

另一方面，第二行（无效）试图更改`a`为引用（技术上不同的）咒语`"Hi"`。由于上述原因，这是不允许的。一旦你有一个初始化的数组，你唯一能做的就是从它读取值并将值写入它。您无法更改其位置或大小。这就是在这种情况下分配尝试做的事情。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-16T22:46:55.600

该语言不允许将字符串文字分配给字符数组。您应该`strcpy()`改用：

```
strcpy(a, "Hi"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T22:46:30.097

a 是指向数组的指针，而不是数组本身。它不能被重新分配。

你用 C++ BTW 标记。对于这种情况，最好使用 std::string。这可能是您所期望的更多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T22:48:08.143

很简单，

```
char a[10] = "Hi"; 
```

是一个小“额外功能”，因为它不能像在运行时那样完成。

但这就是 C/C++ 标准库的原因。

```
#include <string.h>

// ...
strcpy(a,"Test"); // STR-ing C-o-PY. 
```

这来自 C 的标准库。如果使用 C++，您应该使用 std::string，除非您真的想从目标 PC 中吸取所有可能的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T22:48:26.553

这是因为初始化不是赋值。第一个起作用的是初始化，第二个不起作用，正如预期的那样，是赋值。您根本无法将值分配给您应该使用的数组，例如`strcpy`or `memcpy`。或者您也可以使用`std::copy`from`<algorithm>`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-17T08:23:35.527

就是这么简单，(=) 有两种不同的均值赋值和初始化。你也可以这样写你的代码

```
 #include <iostream>

         using namespace std;

          int main ()
         {
             char message[3] = {'H', 'i', '\0'};

                cout << message<< endl;

           return 0;

           } 
```

在这段代码中，您无需编写困难的代码或函数，甚至不需要 string.h

# xml - SSIS 没有从具有内联模式的 XML 源读取数据

> ID：14915925
> 
> 赞同：0
> 
> 时间：2013-02-16T22:43:16.257
> 
> 标签：xml, xml-parsing, ssis

我有一个 SSIS 项目，它调用 Web 服务并以 xml 文档的形式返回数据。接下来，我需要在数据流任务中解析该 xml 并将其加载到 sql server 数据库中。

xml 文件具有内联模式并包含大量数据。在数据流中的 XML 源中，我选择了“内联架构”，并且所有列都正确列出。到目前为止，一切似乎都很好。

但是，当我执行包时，不会从 xml 源加载任何数据，也不会引发任何错误。输出消息显示“'OLE DB 目标写入 0 行'”。我的数据视图没有显示任何从 xml 源输出的数据，并且我通过使用一个简单的平面文件作为我的目标进行测试，消除了我的 OLE DB 目标作为我的麻烦的根源（同样的问题，没有写入数据并且没有错误被抛出）。

下面是我的 xml 源代码的摘录，其中包含一个内联架构，它是由我的 Web 服务任务创建的。我将不胜感激任何和所有帮助解决此问题。

```
<?xml version="1.0" encoding="utf-16"?>
<DataSet>
  <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
  <xs:complexType>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="UPDATEDDEPT">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="DEPT_ID" type="xs:long" />
            <xs:element name="PARENT_ID" type="xs:long" />
            <xs:element name="DEPT_NAME">
              <xs:simpleType>
                <xs:restriction base="xs:string">
                  <xs:maxLength value="30" />
                </xs:restriction>
              </xs:simpleType>
            </xs:element>
            <xs:element name="DEPTH" type="xs:int" />
            <xs:element name="LINEAGE">
              <xs:simpleType>
                <xs:restriction base="xs:string">
                  <xs:maxLength value="150" />
                </xs:restriction>
              </xs:simpleType>
            </xs:element>
            <xs:element name="PRODUCTCOUNT" type="xs:int" />
            <xs:element name="MARKETLEADER" type="xs:int" />
            <xs:element name="PROFITBUILDER" type="xs:int" />
            <xs:element name="NEWITEM" type="xs:int" />
            <xs:element name="PALLET" type="xs:int" />
            <xs:element name="LASTUPDATED" type="xs:dateTime" />
            <xs:element name="STATUS" type="xs:int" minOccurs="0" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
 </xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
<NewDataSet>
  <UPDATEDDEPT diffgr:id="UPDATEDDEPT1" msdata:rowOrder="0">
    <DEPT_ID>1010100000000000000</DEPT_ID>
    <PARENT_ID>1000000000000000000</PARENT_ID>
    <DEPT_NAME>STRIKING AND CUTTING TOOLS    </DEPT_NAME>
    <DEPTH>1</DEPTH>
    <LINEAGE>/1000000000000000000/1010100000000000000/</LINEAGE>
    <PRODUCTCOUNT>1054</PRODUCTCOUNT>
    <MARKETLEADER>1</MARKETLEADER>
    <PROFITBUILDER>2</PROFITBUILDER>
    <NEWITEM>8</NEWITEM>
    <PALLET>0</PALLET>
    <LASTUPDATED>2013-02-04T05:38:57.437-05:00</LASTUPDATED>
    <STATUS>1</STATUS>
  </UPDATEDDEPT>
  <UPDATEDDEPT diffgr:id="UPDATEDDEPT2" msdata:rowOrder="1">
    <DEPT_ID>7070570565000000000</DEPT_ID>
    <PARENT_ID>7070500000000000000</PARENT_ID>
    <DEPT_NAME>KNIVES &amp; ACCESS               </DEPT_NAME>
    <DEPTH>2</DEPTH>
    <LINEAGE>/7000000000000000000/7070500000000000000/7070570565000000000/</LINEAGE>
    <PRODUCTCOUNT>176</PRODUCTCOUNT>
    <MARKETLEADER>0</MARKETLEADER>
    <PROFITBUILDER>0</PROFITBUILDER>
    <NEWITEM>2</NEWITEM>
    <PALLET>0</PALLET>
    <LASTUPDATED>2013-02-04T05:38:59.823-05:00</LASTUPDATED>
    <STATUS>1</STATUS>
  </UPDATEDDEPT>
 </NewDataSet>
 </diffgr:diffgram>
</DataSet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:13:25.920

凯尔，你还在监视这个吗？本文可能会有所 [启发 http://connect.microsoft.com/SQLServer/feedback/details/579439/ssis-xmlsource-xsd-integer-converts-incorrectly-in-xml-source](http://connect.microsoft.com/SQLServer/feedback/details/579439/ssis-xmlsource-xsd-integer-converts-incorrectly-in-xml-source)

我试图读入的 XML 源来自 VFP 9 表并具有 XSD 内联。在 XSD 中，任何明显的整数属性（如键）都指定为 type="decimal"。VFP 没有整数类型。它的毯子类型是数字。我已经尝试过 XSD 的外部、内联和生成版本。XML源中有选项xml整数映射，可以设置int32或decimal但我不明白它的功能。

无论如何，如果我尝试在 XSD 中进行修改，例如，我知道的整数（或长）关键字段的十进制字段肯定是整数，那么 XML 源读取错误。它不会产生任何错误，并且会像幼儿园老师使用酸一样给出绿色刻度。另一方面，如果我让原始内联 XSD 有它的方式，并且十进制字段完好无损，它就可以工作。那是一个 200M 的文件，其 XML 结构为表。导入大约需要 7 秒。哦，是的，最后添加了一个备注字段作为 varchar(4000)

我发现我最快乐的路径是让 SQL 目标生成我的表，加载它，然后将属性转换到另一个具有更多 apt 类型的表。

希望这可以帮助

附录 数据转换过程在 xml 源和 sql 目标之间运行良好。所以将XSD中的所有Int类型重写为十进制，在xml源中重新加载XSD，然后在Data Conversion中转换回int。

# css - 用于流体网格系统的 CSS 精灵

> ID：14915927
> 
> 赞同：1
> 
> 时间：2013-02-16T22:43:28.100
> 
> 标签：css, css-sprites

有没有办法在不使用精灵的情况下使用精灵

```
background: url(); 
```

财产？

例如，有没有办法使用精灵

```
<img> 
```

标签代替？

我问的原因是因为我试图在流体网格系统中使用 CSS 精灵，并且我需要能够控制图像的最大宽度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T22:48:35.687

因此，您想知道是否可以在不同位置多次裁剪图像？是的，有可能。以下是一些解释这些技术的帖子：

[http://tjkdesign.com/articles/how-to_use_sprites_with_my_Image_Replacement_technique.asp](http://tjkdesign.com/articles/how-to_use_sprites_with_my_Image_Replacement_technique.asp) [http://www.artzstudio.com/2010/04/img-sprites-high-contrast/](http://www.artzstudio.com/2010/04/img-sprites-high-contrast/)

# android - setOnItemSelect 的 Android JSON 输入

> ID：14915929
> 
> 赞同：0
> 
> 时间：2013-02-16T22:43:56.290
> 
> 标签：android, json, listview, dynamic, onselect

我正在使用以下格式的远程 JSON 数据填充 ListView：

```
{"nodes":[{"node":{"title":"Article#1","id":"4"}},{"node":{"title":"Article#2","id":"3"}}]} 
```

我的 ListView 是用以下代码构造的：

```
ArrayList<String> articles = new ArrayList<String>();
    try{
                    for(int i=0; i < data.length(); i++){
                        JSONObject dataObj = (JSONObject)data.get(i);
                        JSONObject record = dataObj.getJSONObject("node");
                        title = (record.getString("title"));
                        nid = (record.getString("nid"));

                        Log.i("FOUND", "title: " + title);
                        Log.i("FOUND", "nid: " + nid);

                        articles.add(title);
                    }
                }catch(JSONException j){
                    Log.e("CHECK", "Attempting to read data returned from JSONReader: " + j.toString());
                }
    ListView articlesList = (ListView)findViewById(R.id.articlesList);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(ArticlesActivity.this, R.layout.article_item, R.id.articleItem, articles);
    articlesList.setAdapter(adapter); 
```

整个过程有效并成功列出了我的文章标题。但是，我正在尝试按照教程来帮助我在每个列表项上启用 onSelectListeners。与每篇文章标题关联的 ID 元素就是我远程获取文章内容所需的全部内容。

是否可以将我的 ArrayList 设置为包含标题和 id 数据并使用它来设置启用动态 OnSelectListener 的 ListView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:33:39.650

正确的方法是创建一个类来保存文章名称和 id 以及您需要的任何信息。在您的自定义适配器中，您在创建视图时使用 setTag() 方法。然后在您的 onClickListener 中使用 getTag() 方法。下面我会给你一些代码snipsetss希望他们对你有帮助。

```
public class Article{
private String name;
private String id;

public Article(String name, String id) {
    this.name =name;
    this.id = id;

}

    public String getName() {
        return name;
    }

    public String getID() {
        return id;}
} 
```

在您创建视图时，在您的自定义适配器类中使用 setTag 方法

```
 public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
                LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.group_list, null);
TextView title = (TextView) v.findViewById(R.id.group_title);
                ...//rest of my code 

                Article article = getItem(position);
                title.setText(article.getName());
                title.setTag(article);
                v.setTag(article);
            return v;
        } 
```

在您的点击监听器中

```
list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

                Article article= (Article ) view.getTag();
                String articleID= article.getID();
}
} 
```

# javascript - 类似于 HTML 中的 DOM 操作的 MS Word

> ID：14915931
> 
> 赞同：1
> 
> 时间：2013-02-16T22:43:59.480
> 
> 标签：javascript, html, css, dom, ms-word

看看[这个视频](http://www.youtube.com/watch?v=WorbTh0IMTY&feature=youtu.be)。在 MS Word 中，可以将任何元素拖动到任何地方。基于此，其余内容（在此视频示例中仅为文本）重新排列并换行以适应。例如，当两个图像并排放置并且一个被拖离或拖向另一个时，其间的文本会相应地缩小或扩大。

无论如何有可能用 Javascript 在 HTML 中模仿这种行为吗？我发现最大的困难是元素在 HTML 中*拥有它们的内容。*所以，a`span`拥有它的文本，a`div`拥有它的文本。但在视频中，我们可以看到图像之间的文本元素本身并没有任何内容，它在从左到右传输文本时获取任何适合的内容。这就是为什么它的内容随着方向的变化而变化。此外，它的文本不是连续的。它包含多个句子的点点滴滴。

使用 HTML 和 Javascript 可以进行此类操作吗？如果是这样，任何单挑都会很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:55:22.810

看看 css exculsions：

[http://adobe.github.com/web-platform/samples/css-exclusions/](http://adobe.github.com/web-platform/samples/css-exclusions/)

它可能会帮助你实现你想要的。请注意，这是一个实验性功能。

# ruby-on-rails - RoR - 嵌套属性 - 表链

> ID：14915936
> 
> 赞同：0
> 
> 时间：2013-02-16T22:44:27.960
> 
> 标签：ruby-on-rails, ruby, database

我理解了这个选项：

```
accepts_nested_attributes_for 
```

当我需要通过 1 个表单或 1 个控制器操作 2 个表时，我可以使用它。

在我尝试一些我没有找到答案的东西之前，让我知道我是否会破坏 Rails 哲学中的某些东西。

我的数据库中有一个表链：

```
TableA
  has_many :TableB
end

TableB
  belongs_to :TableA
  has_many:TableC
end

TableC
  belongs_to :TableB
  has_many :TableD
end 
```

等等......它在某处停止。

让我尝试以这种模式使用 5 个表的场景。如果我使用第一个表，在上面的上下文中是那个 TableA，我可以同时操作所有 5 个表吗？我的意思是，在同一个控制器上？相同的形式，使用嵌套属性 => A 接受 B，B 接受 C，等等？我这样想错了吗？

谢谢，你一直很好！

*模式示例：国家有很多州，州有很多城市，城市有很多......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:07:19.317

是的，你可以这么做。不过，这可能会给您的用户留下一个非常复杂的表单。

# c# - 在什么情况下我需要实体框架中的外键和导航属性

> ID：14915938
> 
> 赞同：14
> 
> 时间：2013-02-16T22:44:31.893
> 
> 标签：c#, entity-framework, ef-code-first, foreign-keys, entity-framework-5

我的订单课程有：

```
public int CustomerId { get; set; }

public Customer Customer { get; set; } 
```

我真的需要这两个属性来建立关系吗？

我没有使用断开连接的实体，我使用的是代码优先方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-16T18:44:07.573

根据 Julia Lerman 的书：[Programming Entity Framework: DbContext](https://rads.stackoverflow.com/amzn/click/com/1449312969)，区别在于更新导航属性的难度。在第 85 页，她建议“如果您可以做一件事来让您在 N 层场景中的生活更轻松，那就是为模型中的关系公开外键属性。” 本书包含两种场景的示例。

原因是包含外键属性告诉实体框架使用外键关联，这比在您需要更新关系时使用所谓的独立关联更简单，即在您的示例中将订单从一个客户更改为另一个客户. 使用外键关联，您需要做的就是更改 CustomerId。如果没有 CustomerId 外键，您需要更多步骤。独立关联使用代码优先解释的 ObjectStateManager [：独立关联与外键关联？](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations)ObjectStateManager 很复杂，甚至没有从 DbContext API 中公开。

# python - 如何使用itertools输出只有一定长度的结果

> ID：14915940
> 
> 赞同：0
> 
> 时间：2013-02-16T22:44:56.327
> 
> 标签：python, permutation, itertools

假设我有一个 bytes 列表`(x00 to xFF)`。如何使用 itertools 仅返回长度为 X 的排列。例如，我想要长度为 3 的所有排列，然后我会得到

```
[x00,x00,x00], [x00,x00,x01], ..., [xFF,xFF,xFF] 
```

这样就不会浪费计算资源。

编辑：如果有更好的方法，不必是 itertools。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:50:25.317

```
import itertools
for tup in itertools.product(range(0x100), repeat=3):
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:48:14.390

[`itertools.combinations_with_replacement`](http://docs.python.org/2/library/itertools.html#itertools.combinations_with_replacement)：

```
>>> my_list = [1, 2, 3, 4]
>>> import itertools
>>> 
>>> list(itertools.combinations_with_replacement(my_list, 3))
[(1, 1, 1), (1, 1, 2), (1, 1, 3), (1, 1, 4), 
 (1, 2, 2), (1, 2, 3), (1, 2, 4), 
 (1, 3, 3), (1, 3, 4), 
 (1, 4, 4), 
 (2, 2, 2), (2, 2, 3), (2, 2, 4), 
 (2, 3, 3), (2, 3, 4), 
 (2, 4, 4), 
 (3, 3, 3), (3, 3, 4), 
 (3, 4, 4), 
 (4, 4, 4)] 
```

* * *

似乎您想要所有排列，并带有替换。在这种情况下，您需要：[`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)如@gnibbler 的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T22:58:03.270

似乎@gnibbler 的解决方案更正确？

```
In [162]: >>> l = [1, 2, 3]

In [163]: list(itertools.combinations_with_replacement(l, 3))
Out[163]:
[(1, 1, 1),
 (1, 1, 2),
 (1, 1, 3),
 (1, 2, 2),
 (1, 2, 3),
 (1, 3, 3),
 (2, 2, 2),
 (2, 2, 3),
 (2, 3, 3),
 (3, 3, 3)]

In [164]: list(itertools.product(l, repeat=3))
Out[164]:
[(1, 1, 1),
 (1, 1, 2),
 (1, 1, 3),
 (1, 2, 1),
 (1, 2, 2),
 (1, 2, 3),
 (1, 3, 1),
 (1, 3, 2),
 (1, 3, 3),
 (2, 1, 1),
 (2, 1, 2),
 (2, 1, 3),
 (2, 2, 1),
 (2, 2, 2),
 (2, 2, 3),
 (2, 3, 1),
 (2, 3, 2),
 (2, 3, 3),
 (3, 1, 1),
 (3, 1, 2),
 (3, 1, 3),
 (3, 2, 1),
 (3, 2, 2),
 (3, 2, 3),
 (3, 3, 1),
 (3, 3, 2),
 (3, 3, 3)] 
```

# google-maps-api-3 - 谷歌地图初始标记不会显示

> ID：14915945
> 
> 赞同：2
> 
> 时间：2013-02-16T22:45:22.507
> 
> 标签：google-maps-api-3

我为这个谷歌地图找到的代码似乎工作正常，但是当我加载地图时初始标记没有出现。地图以初始位置为中心，但没有标记。我正在使用 php 填充初始纬度和经度。还有一种方法可以在拖动到新位置后删除旧标记吗？

```
 // global "map" variable
        var map = null;
        var marker = null;

        // popup window for pin, if in use
        var infowindow = new google.maps.InfoWindow({ 
            size: new google.maps.Size(150,50)
            });

        // A function to create the marker and set up the event window function 
        function createMarker(latlng, name, html) {

        var contentString = html;

        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            zIndex: Math.round(latlng.lat()*-100000)<<5
            });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(contentString); 
            infowindow.open(map,marker);
            });

        google.maps.event.trigger(marker, 'click');    
        return marker;

    }

    function initialize() {

        // the location of the initial pin
        var myLatlng = new google.maps.LatLng(<?=$a1[lat]?>,<?=$a1[lon]?>);

        // create the map
        var myOptions = {
            zoom: 12,
            center: myLatlng,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        }
    var myMarker = new google.maps.Marker({
        position: new google.maps.LatLng(<?=$a1[lat]?>, <?=$a1[lon]?>),
        draggable: true
    });

        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        // establish the initial marker/pin
        var myMarker = new google.maps.Marker({
        position: new google.maps.LatLng(<?=$a1[lat]?>, <?=$a1[lon]?>),
        draggable: true
    });

        // establish the initial div form fields
        formlat = document.getElementById("latbox").value = myLatlng.lat();
        formlng = document.getElementById("lngbox").value = myLatlng.lng();

        // close popup window
        google.maps.event.addListener(map, 'click', function() {
            infowindow.close();
            });

        // removing old markers/pins
        google.maps.event.addListener(map, 'click', function(event) {
            //call function to create marker
             if (marker) {
                marker.setMap(null);
                marker = null;
             }

            // Information for popup window if you so chose to have one

             marker = createMarker(event.latLng, "name", "<font color=#660000><b><?=$a1[name]?></b><br>"+event.latLng);

            var image = '/images/googlepins/pin2.png';
            var myLatLng = event.latLng ;

            /*  
            var marker = new google.maps.Marker({
                by removing the 'var' subsquent pin placement removes the old pin icon
            */

            marker = new google.maps.Marker({   
                position: myLatLng,
                map: map,
                icon: image,
                title:"Property Location"
            });

            // populate the form fields with lat & lng 
            formlat = document.getElementById("latbox").value = event.latLng.lat();
            formlng = document.getElementById("lngbox").value = event.latLng.lng();

        });

    }
    //]]> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:09:45.773

需要添加地图标签。我有人尝试帮助我，但是当他的回答造成更多问题时，他删除了他的答案，然后否决了我的问题....谢谢好友.. 这是 Map-Option 需要去的地方。

```
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        // establish the initial marker/pin
        var myMarker = new google.maps.Marker({
        position: new google.maps.LatLng(<?=$a1[lat]?>, <?=$a1[lon]?>),
        map: map, /// <-------This is what I added and seems to have fixed my problem
        draggable: true,

    }); 
```

# postgresql - PostgreSql - 将年份和月份添加到表中

> ID：14915946
> 
> 赞同：1
> 
> 时间：2013-02-16T22:45:34.970
> 
> 标签：postgresql

我正在创建一个客户表，我希望其中一个属性是信用卡的到期日期。我希望格式为“月年”。我应该使用什么数据类型？我想使用日期，但格式是年/月/日。有没有其他方法可以将格式限制为仅限月份和年份？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T22:56:17.977

您可以将日期限制为该月的第一天：

```
create table customer (
    cc_expire date check (cc_expire = date_trunc('month', cc_expire))
); 
```

现在这失败了：

```
insert into customer (cc_expire) values ('2014-12-02');
ERROR:  new row for relation "customer" violates check constraint "customer_cc_expire_check"
DETAIL:  Failing row contains (2014-12-02). 
```

这有效：

```
insert into customer (cc_expire) values ('2014-12-01');
INSERT 0 1 
```

但输入哪一天并不重要。您只会检查月份：

```
select
    date_trunc('month', cc_expire) > current_date as valid
from customer;
 valid 
-------
 t 
```

分别提取年月：

```
select extract(year from cc_expire) "year", extract(month from cc_expire) "month"
from customer
;
 year | month 
------+-------
 2014 |    12 
```

或串联：

```
select to_char(cc_expire, 'YYYYMM') "month"
from customer
;
 month  
--------
 201412 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:23:07.067

作为另一个想法，您基本上可以使用 int[] 创建一些简短的实用程序来为您执行此操作：

```
CREATE OR REPLACE FUNCTION exp_valid(int[]) returns bool LANGUAGE SQL IMMUTABLE as
$$ 
SELECT $1[1] <= 12 AND (select count(*) = 2 FROM unnest($1));
$$;

CREATE OR REPLACE FUNCTION first_invalid_day(int[]) RETURNS date LANGUAGE SQL IMMUTABLE AS 
$$ 
SELECT (to_date($1[2]::text || $1[1]::text, CASE WHEN $1[2] < 100 THEN 'YYMM' ELSE 'YYYYMM' END) + '1 month'::interval)::date;
$$; 
```

这些工作：

```
postgres=# select exp_valid('{04,13}');
 exp_valid 
-----------
 t
(1 row)

postgres=# select exp_valid('{13,04}');
 exp_valid 
-----------
 f
(1 row)

postgres=# select exp_valid('{04,13,12}');
 exp_valid 
-----------
 f
(1 row) 
```

然后我们可以将它们转换为日期：

```
postgres=# select first_invalid_day('{04,13}');
 first_invalid_day 
-------------------
 2013-05-01
(1 row) 
```

数组的这种使用不会违反任何规范化规则，因为数组作为一个整体表示其域中的单个值。我们正在存储两个表示单个日期的整数。“{12,2}”是 2002 年 12 月，而“{2,12}”是 2012 年 2 月。每个代表域的单个值，因此是完全原子的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T01:33:39.900

使用任一

*   char(5) 表示两位数年份，或
*   char(7) 表示四位数年份。

下面的代码假定两位数的年份，这是匹配我所有信用卡的形式。首先，让我们创建一个有效到期日期表。

```
create table valid_expiration_dates (
  exp_date char(5) primary key
); 
```

现在让我们填充它。此代码仅适用于 2013 年。您可以通过更改开始日期（当前为 '2013-01-01'）和“月数”（当前为 11，这样您可以通过添加从距开始日期 0 到 11 个月）。

```
with all_months as (
  select '2013-01-01'::date + (n || ' months')::interval months
  from generate_series(0, 11) n
)
insert into valid_expiration_dates
select to_char(months, 'MM') || '/' || to_char(months, 'YY') exp_date
from all_months; 
```

现在，在您的数据表中，创建一个 char(5) 列，并将其中的外键引用设置为 valid_expiration_dates.exp_date。

当您忙于这个时，请认真考虑“exp_month”是否可能比“exp_date”更适合该列。（我认为会的。）

# android - 使用 Extrasd 测试 Null 或 Empty Intent

> ID：14915947
> 
> 赞同：0
> 
> 时间：2013-02-16T22:45:46.737
> 
> 标签：android, android-intent, null

我有一个活动，我想实现一个非此即彼的逻辑：

我有这条线：

```
Username = getIntent().getExtras().getString("userprofile"); 
```

如果这是空的，我希望它从其他地方分配用户名......例如

```
if (Username.equals("")) {
    Username = Rateit.username;
} 
```

但是，它当然会在第一行崩溃。

**我为什么要这样做？** 如果附加项为空，则此活动将是当前登录用户的用户配置文件。在其他情况下，您单击其他用户名（不是您，登录的用户），它会使用他们的信息进入相同的活动。

我需要找到更好的逻辑或如何测试空值。

LogCat 作为崩溃请求：

```
02-16 14:39:24.088: E/AndroidRuntime(13467): FATAL EXCEPTION: main
02-16 14:39:24.088: E/AndroidRuntime(13467): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.---.---/com.---.---.profile.ProfileFragmentActivity}: java.lang.NullPointerException
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.os.Looper.loop(Looper.java:137)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.ActivityThread.main(ActivityThread.java:4745)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at java.lang.reflect.Method.invokeNative(Native Method)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at java.lang.reflect.Method.invoke(Method.java:511)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at dalvik.system.NativeStart.main(Native Method)
02-16 14:39:24.088: E/AndroidRuntime(13467): Caused by: java.lang.NullPointerException
02-16 14:39:24.088: E/AndroidRuntime(13467):    at com.---.---.profile.ProfileFragmentActivity.onCreate(ProfileFragmentActivity.java:85)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.Activity.performCreate(Activity.java:5008)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-16 14:39:24.088: E/AndroidRuntime(13467):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-16 14:39:24.088: E/AndroidRuntime(13467):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:55:33.433

如果没有任何额外内容，则`getExtras()`返回 null。所以，它会在`getString()`. 您需要拆分该行以检查它是否为空。

```
userName = "";
Bundle extras = getIntent().getExtras();
if(extras != null)
{
    userName = extras.getString("userprofile", "");
} 
```

还要注意在 , 中添加的`""`参数`getString()`，以避免在那里返回空值。这仅适用于 API >= 12。`getString()`如果未找到额外的字符串，则所有 API 级别中可用的单参数将返回 null `"userprofile"`，因此您只需对返回的字符串进行 null 检查。

# javascript - 如何正则表达式两个标记之间的字符串并返回没有标记的字符串？

> ID：14915948
> 
> 赞同：0
> 
> 时间：2013-02-16T22:45:50.263
> 
> 标签：javascript, jquery, regex, string, token

与正则表达式战斗......

我正在使用它来查找某些元素之间的 HTML 字符串：

```
 for (i = 0; i < 2; i += 1) {
   target = block[i];   // like BODY or HEAD
   regex = RegExp('<' + target + '>(.)+</' + target + '>');
   // in case string passed includes breaks/spaces
   data = data.replace(/(\r\n|\n|\r)/gm,"").replace(/\s+/g," ")
             .match(regex);
   entry = data[0].replace(/<!-- [\s\S]*? -->/g, '');
   console.log(entry);
 } 
```

虽然这工作正常，但它返回如下内容：

```
<head>....everthing I want ....</head> 
```

**问题：**
我需要如何修改正则表达式，以便我仍然可以指定我需要其内容的元素，但它只返回内容而不是内容和标记（如`<head></head>`）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:48:07.027

使用第一个匹配组而不是整个匹配。

```
regex = RegExp('<' + target + '>(.+)</' + target + '>'); 
```

接着...

```
entry = data[1].replace(/<!-- [\s\S]*? -->/g, ''); 
```

# javascript - 网络音频：右声道没有声音

> ID：14915951
> 
> 赞同：5
> 
> 时间：2013-02-16T22:45:58.003
> 
> 标签：javascript, html, web-audio-api

我正在尝试使用 Web Audio API 创建自定义平移控件，但是使用通道拆分器和合并节点无法从正确的通道中发出任何声音：

```
var context = new webkitAudioContext(),
    destination = context.destination,
    osc = context.createOscillator(),
    gainL = context.createGainNode(),
    gainR = context.createGainNode(),
    splitter = context.createChannelSplitter(2),
    merger = context.createChannelMerger(2);

osc.frequency.value = 500;

osc.connect(splitter);

splitter.connect(gainL, 0);
splitter.connect(gainR, 1);

gainL.connect(merger, 0, 0);
gainR.connect(merger, 0, 1);

osc.noteOn(0);

gainL.gain.value = 0.1;
gainR.gain.value = 0.5;

osc.noteOff(2);

merger.connect(destination); 
```

我在这里遗漏了一些明显的东西吗？这里有上面代码的 JSBin 预览：http: [//jsbin.com/ayijoy/1/](http://jsbin.com/ayijoy/1/)

我正在运行 Chrome v24.0.1312.57，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:10:21.553

我最好的猜测是发生这种情况是因为振荡器输出单声道信号。尝试使用立体声源，您可能应该有更多的运气。

编辑：这里是如何平移“单声道”信号（绕过分离器，因为没有立体声信号要分离，并将振荡器直接连接到两个增益。然后在调整增益后将两个单声道信号连接到合并器每个频道）[http://jsbin.com/ayijoy/16/](http://jsbin.com/ayijoy/16/)

# php - Mysql查询格式问题

> ID：14915960
> 
> 赞同：1
> 
> 时间：2013-02-16T22:46:40.407
> 
> 标签：php, mysql, database, formatting

我正在构建一个私人消息系统，我的数据库有多行。在数据库中：

```
I love that song do you?

-Joe 
```

但我的查询最终显示如下

```
I love that song do you? -Joe 
```

这是我的查询

```
<?php
include 'core/init.php';
protect_page();
include 'includes/overall/header.php';
$username = $user_data['username'];
?>
<?php
$result = mysql_query("SELECT * FROM messages Where sentto1='$username'");
echo '<h2>Messages: </h2><br>';
while($row = mysql_fetch_array($result)){

  echo '<b>From: ';
  echo $row['from1'];
  echo '</b><br><br>';

  echo 'Subject: ';
  echo $row['subject1'];

  echo '<br><br>';
  echo 'Message: ';
  echo $row['message1'];
  echo "<br />";
echo "<br />";
  }

?>
<?php include 'includes/overall/footer.php'; ?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:54:04.927

使用[nl2br()](http://php.net/manual/en/function.nl2br.php)`<br>` ，它将用 HTML标记替换所有换行符。

```
 echo nl2br($row['message1'], false); 
```

# java - 蜂窝调制解调器项目的客户端/服务器交互故障排除建议和帮助

> ID：14915962
> 
> 赞同：1
> 
> 时间：2013-02-16T22:46:50.397
> 
> 标签：java, sockets, client, socketserver

我需要一些建议并帮助解决我正在处理的蜂窝调制解调器项目的客户端/服务器交互问题。客户端和服务器是用 Java 编写的。

我需要一些建议的问题如下：

(1) 我正在就我所采取的方法是否会针对大文件（要遵循的代码）进行扩展，特别是在网络可能意外退出的蜂窝网络环境中寻求建议。大文件约为 1GB。大文件表示从服务器传输到客户端的图像。这代表了最坏的情况。基本案例包含相对较小的文件，其中包含 GPS 数据和时间戳信息。这些文件可能在 KB 到几 MB 范围内并且经常传输。

(2) 需要有关对客户端/服务器代码进行故障排除的建议。即使这种方法不适用于较大的文件，我也希望代码适用于基本案例，以在不久的将来支持概念验证测试。概念验证不需要软件更新。

客户端/服务器交互的背景。客户端联系服务器。服务器检测到客户端请求，该请求启动一个新线程来处理客户端。客户端发送一个序列化数据包。数据包包含一些头信息（文件大小、CRC、文件类型）和数据负载。在接收到数据包对象后，服务器会验证 crc 和文件大小是否与标头中包含的值匹配。服务器用一个数据包对象进行响应，该对象指示传输是否有效。如果客户端收到来自服务器的有效响应，则客户端发送再见数据包以关闭会话。如果服务器的响应无效，客户端将重新发送数据，并在尝试失败 x 次后最终退出。最终，

这是我在服务器代码上遇到的错误：

```
Feb 16, 2013 7:36:40 AM noaa.logbook.server.ServerConnectionHandler run
SEVERE: null
java.io.EOFException
at
java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2553)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1296)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at noaa.logbook.server.ServerConnectionHandler.run(ServerConnectionHandler.java:69)
    at java.lang.Thread.run(Thread.java:662) 
```

数据作为服务器到达，下次我尝试读取 objectinputstream 上的对象时出现异常，这是再见数据包。

客户代码：

```
public static boolean clientTransmit(Socket sockToServer, String fileName, int dataPacketType, String id, String fileTimeStamp)    {
ObjectOutputStream oos = null;
ObjectInputStream ois = null;
//TCPConnection tcpConn = null;
DataPacket packet = null;

File inputFile = new File(fileName);
boolean fileExists = inputFile.exists();

int size = 0;
int failedAttempts = 0;
String contents = null;
byte[] ref = null;
boolean success = false;
boolean bye = false;
try
{
  sockToServer.setSoTimeout(5000);

  if ((sockToServer.isConnected()) && (fileExists)) {
    System.out.println("LogBookClientCommunications: Connected to Server");
    System.out.print("Stage 0");
    contents = readFile(fileName);

    packet = LogBookUtilities.packageDataPacket(DataPacket.UPLOAD_DATA, contents,    LogBookClient.SOFTWARE_VERSION, LogBookClient.serialNumber);

    oos = new ObjectOutputStream(sockToServer.getOutputStream());
    oos.writeObject(packet);
    oos.flush();
    System.out.println("LogBookClientCommunications: Sending DataPacket");

    ois = new ObjectInputStream(sockToServer.getInputStream());

    while(!success && failedAttempts < 3) {
      Object object = ois.readObject();
      if (object instanceof DataPacket) {
        System.out.println("LogBookClientCommunications: Received a DataPacket Object");
        DataPacket inPacket = (DataPacket)object;
        byte[] compressedByteRef = inPacket.getDataArray();
        boolean sizeValid = verifySize(compressedByteRef, inPacket.getLength());
        boolean crcValid = verifyCRC(inPacket);
        if ((sizeValid) && (crcValid)) {
            System.out.println("LogBookClientCommunications: Size & CRC Valid");
            String uncompressed = new String(uncompress(compressedByteRef));
            String[] strRef = lookupResponsePairs(dataPacketType);

            if (uncompressed.equals(strRef[0])) {
                success = true;
                System.out.println("LogBookClientCommunications: File arrived uncorrupted");
                //tcpConn.disconnect();
            } else if (uncompressed.equals(strRef[1])) {
                success = false;
                failedAttempts++;
                System.out.println("LogBookClientCommunications: File arrived corrupted");
            }
        } else {
            success = false;
            failedAttempts++;
            if (sizeValid)
                System.out.println("LogBookClientCommunications: CRC InValid");
            else
                System.out.println("LogBookClientCommunications: Size InValid");
        }
      }//end if object instanceof
      else {
        System.out.println("LogBookClientCommunications: Not a DataPacket Object");
        failedAttempts++;
      }
    }//while
    //Close Connection by sending bye
    System.out.println("LogBookClientCommunications: Sending Good Bye...");
    DataPacket goodbye  = LogBookUtilities.packageDataPacket(DataPacket.RESPONSE, quit", LogBookClient.SOFTWARE_VERSION, LogBookClient.serialNumber);
    oos.writeObject(goodbye);
    oos.flush();
  }
  else
  {
    System.out.println("LogBookClientCommunications: Failed to Connect or File Did Not Exist");
    success = false;
  }
}
catch (ClassNotFoundException ex) {
  Logger.getLogger(LogBookUtilities.class.getName()).log(Level.SEVERE, null, ex);
} catch (IOException ex) {
  Logger.getLogger(LogBookUtilities.class.getName()).log(Level.SEVERE, null, ex);
} finally {
  try {
    oos.close();
    ois.close();
    sockToServer.close();
  } catch (IOException ex) {
    Logger.getLogger(LogBookUtilities.class.getName()).log(Level.SEVERE, null, ex);
  }
}
return success;
} 
```

服务器连接处理程序代码：

```
public void run()
{
ObjectInputStream ois = null;
ObjectOutputStream oos = null;
int failedAttempts = 0;
boolean success = false;
boolean sendResponse = false;
Socket soc = getSocket();
Object obj = new Object();
long time = System.currentTimeMillis();

DataPacket inPacket = null;
DataPacket outPacket = null;
try {
  System.out.println("Server Connection Handler: Receiving Connection From - " + soc.getRemoteSocketAddress());
  soc.setSoTimeout(15000);
  oos = new ObjectOutputStream(soc.getOutputStream());
  oos.flush();

  ois = new ObjectInputStream(soc.getInputStream());

  if (ois == null | oos == null) {
      System.out.println("Server Connection Handler: Successfull Opened Streams");
      if (ois == null) { System.out.println("Server Connection Handler: ObjectInputStream Failed to Open");}
      else {System.out.println("Server Connection Handler: ObjectOutputStream Failed to Open"); }
  }
  while (true) {
      inPacket = (DataPacket)ois.readObject();
      boolean validPacket = LogBookUtilities.isPacketValid(inPacket);
      if (validPacket) {
          if(inPacket.getField() == DataPacket.RESPONSE) {
              byte[] ref = inPacket.getDataArray();
              String data = LogBookUtilities.uncompress(ref);
              if (data.equalsIgnoreCase("bye")) {
                  System.out.println("Server Connection Handler: Bye....");
                  break;
              }
          }
          else if (inPacket.getField() == DataPacket.UPLOAD_DATA) {
              System.out.println("Server Connection Handler: Writing data to file");
              LogBookUtilities.processClientPacket(inPacket);
              System.out.println("Server Connection Handler: File Successfully Transfered");
              outPacket = LogBookUtilities.makeResponse(inPacket.getField(), true, LogBookServer.SOFTWARE_VERSION, LogBookServer.ID);
              sendResponse = true;
          }
      } 
      else {
          if (inPacket.getField() == DataPacket.UPLOAD_DATA) {
                sendResponse = true;
                outPacket = LogBookUtilities.makeResponse(inPacket.getField(), true, LogBookServer.SOFTWARE_VERSION, LogBookServer.ID);
          }
      }

      if (sendResponse) {
        oos.writeObject(outPacket);
        oos.flush();
      }

  }//end while

    }
    catch (ClassNotFoundException ex) {
      Logger.getLogger(ServerConnectionHandler.class.getName()).log(Level.SEVERE, null,     ex);
    }
    catch (IOException ex) {
      Logger.getLogger(ServerConnectionHandler.class.getName()).log(Level.SEVERE, null, ex);
    }
    finally {
      try {
        ois.close();
        oos.close();
        soc.close();
      }
      catch (IOException ex) {
        Logger.getLogger(ServerConnectionHandler.class.getName()).log(Level.SEVERE, null, ex);
      }
    }
    } 
```

服务器代码：

```
public class LogBookServer
{
public static final String ID = "666666";
public static final String SOFTWARE_VERSION = "0.02";
public static final String VFILE = "vFile";
public static final String DASH = "-";
public static final String DATEXT = ".dat";
public static final int FAILED_THRESHOLD = 3;
private int port = 6767;
private String ip = "";

public int getListeningPort() {
  return this.port;
}

public void setListeningPort(int port) {
  this.port = port;
}

public void run()
  throws Exception
{
Selector acceptSelector = SelectorProvider.provider().openSelector();

ServerSocketChannel ssc = ServerSocketChannel.open();
ssc.configureBlocking(false);

InetAddress lh = InetAddress.getLocalHost();
InetSocketAddress isa = new InetSocketAddress(lh, this.port);
ssc.socket().bind(isa);

SelectionKey acceptKey = ssc.register(acceptSelector, 16);

int keysAdded = 0;

while ((keysAdded = acceptSelector.select()) > 0)
{
  Set readyKeys = acceptSelector.selectedKeys();
  Iterator i = readyKeys.iterator();

  while (i.hasNext()) {
    SelectionKey sk = (SelectionKey)i.next();
    i.remove();

    ServerSocketChannel nextReady = (ServerSocketChannel)sk.channel();

    Socket s = nextReady.accept().socket();

    handleConnection(s);
  }
 }
}

void handleConnection(Socket socket)
{
  System.out.println("hadling connection....");
  ServerConnectionHandler connectionHandler = new ServerConnectionHandler(socket);
  new Thread(connectionHandler).start();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:07:46.490

在您的客户端中，您有（为了便于阅读，分成不同的行）：

```
DataPacket goodbye  = 
    LogBookUtilities.packageDataPacket(DataPacket.RESPONSE, 
                                       "quit", 
                                       LogBookClient.SOFTWARE_VERSION,
                                       LogBookClient.serialNumber); 
```

然后在您的服务器中，您有：

```
if (data.equalsIgnoreCase("bye")) { 
```

其中哪一个不像另一个？;)

您的服务器读取“再见”数据包，但无法识别它，然后再次循环并尝试从关闭的套接字读取。普雷斯托，`IOException`。

至于您关于“可扩展性”的问题……与其说是效率不如说是。如果您担心网络从您下面掉线，那么发送序列化对象可能不是可行的方法；没有办法恢复 - 必须完全重新发送部分发送，如果它是您所说的数据演出......那很糟糕。您最好使用具有合理缓冲区大小的`write()`方法。`OutputStream`这将允许您跟踪已发送的数据并在网络恢复后恢复传输（显然，这将需要在您的客户端和服务器之间实现一些逻辑，以便您可以弄清楚服务器已经收到了什么在网络故障的情况下）。

# css - 约束 到有角度的边界 w/ CSS（附有 JSFiddle 链接）

> ID：14915966
> 
> 赞同：1
> 
> 时间：2013-02-16T22:47:01.680
> 
> 标签：css, html, rotation, transform, paragraph

我希望`<p>`在我的文档中包含在一个有角度的`<section>`容器中，以便为段落创建阶梯线。理想情况下，我希望该段落采用平行四边形的形状。就目前而言，当我旋转我的段落以使线条水平时，该段落超出了`<div>`. 请参阅下面的我的 JSFiddle 链接：

[http://jsfiddle.net/aredtiefilm/sUymx/2/](http://jsfiddle.net/aredtiefilm/sUymx/2/)

当我尝试溢出选项时，我能做的最好的就是隐藏段落之外的部分`<section>`。我想强制段落的内容采用容器的形状，而不隐藏或滚动。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:09:12.410

Use following css for paragraph element. It will work fine.

MODIFIED CSS :

```
p{
  border: 1px solid blue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T20:02:35.780

不完美，但这是我认为你能得到的最好的。用倾斜替换旋转：

```
section{
    color: #4A2583;
    -ms-transform:skewX(10deg); 
    -moz-transform:skewX(106deg); 
    -webkit-transform:skewX(10deg); 
    -o-transform:skewX(10deg);
    transform:skewX(10deg);
    width: 200px;
    border: 1px solid red;
    display: block;
    position: relative;
    left: 200px;
} 
```

您不需要为 p 设置样式，它没用。（你不能旋转个别的线，你只能旋转它作为一个块）

你需要限制角度，因为字母也会歪斜，如果你做得太多会很丑。

[更新的小提琴](http://jsfiddle.net/sUymx/4/)

# css - 当表格行悬停时更改包含链接的背景颜色

> ID：14915969
> 
> 赞同：-1
> 
> 时间：2013-02-16T22:47:19.043
> 
> 标签：css

我一直在使用以下 jquery 代码来设置表格行的样式。

```
$('tr').hover(function() {  
    $('tr td').css('color', '#ffffff'); 
    $('tr td a').css('background', '#0080ff');  
});

$('tr').mouseleave(function() { 
    $('tr td').css('color', '#222222'); 
    $('tr td a').css('background', '#ffffff');
}); 
```

这工作得很好，但我想知道有一个 CSS 替代品。这似乎是一种比我现在拥有的方法更有效的方法，但我对 CSS 真的不太了解。

使用以下 CSS 的问题

```
tr:hover {
    color:#ffffff;
} 
```

是当表格行悬停时锚标签仍然保持相同的颜色。是否有任何通过 CSS 悬停在表格行上的方法可以触发嵌套在给定表格行内的锚标签来更改颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:49:43.623

它有点取决于您的其他 CSS 选择器，但这可能会起作用：

```
tr:hover td {
    color: white;
}

tr:hover td a {
    background: #0080ff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:49:34.487

```
td:hover a {
    your link style on row hover
} 
```

# c++ - cscope：如何使用 cscope 通过命令行搜索符号？

> ID：14915971
> 
> 赞同：8
> 
> 时间：2013-02-16T22:47:56.573
> 
> 标签：c++, c, vim, emacs, cscope

我在网上找到的所有 cscope 教程都在谈论如何使用 cscope 的交互模式在 vim 和 emacs 等编辑器中搜索符号。但我认为应该可以在终端中发出命令来执行类似的操作

```
cscope -d -some_options <my symbol> 
```

而且我应该能够在标准输出中看到结果列表，而不必进入 ncurse UI 并在那里做所有事情。我认为这是可能的，因为“唯一的”前端 cbrowser 可以在其 TclTK UI 中执行类似的操作。但不幸的是，代码超出了我的范围。

但是，我没有找到有关此功能的文档。

我是在做梦还是有没有记录的方法可以做到这一点？

谢谢！

**更新**

一些进展：如果我制作一个包含几个具有子目录结构的文件的小项目。然后 rici 的答案开箱即用。具有更大的项目（具有复杂文件夹结构的数千个文件）。即使 cscope.out 和 cscope.files 存在于项目文件夹的根目录（也是我当前的工作目录），我从相同的命令和相同的符号中什么也得不到。我怀疑该命令存在可伸缩性问题。我也试过命令

```
cat cscope.files | xargs cscope -d -L1 <symbol> -i 
```

无济于事。

**更新**

异常诡异！我尝试使用其他一些符号。原来，我正在搜索的特定符号无法使用命令行显示。但我尝试过的所有其他符号都有效。并且 cbrowser 可以毫无问题地找到那个“失败”的符号。不管怎样，我只是运气不好。我将在命令行中询问有关此异常的单独问题。

我将 rici 的答案标记为正确。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T23:21:05.333

您可能正在寻找这个：

```
cscope -L1<symbol> 
```

您也可以使用`-d`，但如果您正在修改文件，cscope 最好更新它的数据库。

`-L`意思是“执行一个面向行的命令”，后面的数字（`1`在这种情况下），也可以写成一个单独的选项，是特定的命令，手册页混淆地称之为“字段”。“字段”由交互式 cscope 提示给出；为方便起见，我添加了数字。“this”是指数字后面的文本；请记住，这是一种模式，因此您不必输入完整的符号。

```
 0 Find this C symbol:
 1 Find this function definition:
 2 Find functions called by this function:
 3 Find functions calling this function:
 4 Find this text string:
 5 Change this text string:
 6 Find this egrep pattern:
 7 Find this file:
 8 Find files #including this file: 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-30T22:17:17.530

您可以使用该版本调用 cscope`-R`进行递归搜索。例如：

```
cscope -d -f/path/to/cscope.out -R -L1 some_symbol 
```

（搜索 some_symbol 的定义）

```
cscope -d -f/path/to/cscope.out -R -L3 some_symbol 
```

（显示调用 some_symbol 的所有位置）

`-f`如果 cscope.out 位于当前工作目录中，则可以省略该选项。

请注意，如果`-R`省略了索引符号，上述调用将产生零结果。非常旧的 cscope 版本不支持`-R`. 例如，版本 15.8a 确实支持它。

的可能值列表`-L`是：

```
0: Find this C symbol
1: Find this definition
2: Find functions called by this function
3: Find functions calling this function
4: Find this text string
6: Find this egrep pattern
7: Find this file
8: Find files #including this file
9: Find places where this symbol is assigned a value 
```

该`-R`选项也可以在创建`cscope.out`文件时使用，例如：

```
cscope -bR 
```

# jquery - 如何在未定义的父级中检测 jQuery 中的 img？

> ID：14915978
> 
> 赞同：1
> 
> 时间：2013-02-16T22:48:20.837
> 
> 标签：jquery, google-chrome-extension

当alt +单击img时，我想检测图像。

```
$("*").click(function(event){
    if(event.altKey)
    {
          var img = $(this).find("img");
          len = img.length;
          if( len > 0 ){
             alert($(img).attr('src'));
          }
        return false;
    }
}); 
```

此代码仅在您有一个父母时才有效。

```
<body>
  <div id="div1">
     <div id="div2">
       <ol>
         <li>
           <a>      
             <img src="thesrciwannaget.jpg" />
           </a>
         </li>
       </ol>
     </div>
  </div>
</body> 
```

在这种情况下，它不起作用。我正在开发 chrome 扩展程序，我想做相当于右键单击 -> 复制图像 URL 但当 alt + 左键单击时。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:14:43.490

我会做：

```
$("img").click(function(event){ ... 
```

意味着更少的开销，无论父母身份如何，都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:21:08.627

这个怎么样？我认为您应该检查是否单击图像。

```
$("*").click(function(event){
    event.stopPropagation();
    if(event.altKey)
    {
        if($(this).is("img"))
        {
            alert($(this).attr("src"));
        }
        else
        {
            var img = $(this).find("img");
            if(img.length)
            {
                alert($(img).attr('src'));
            }
        }
    }
}); 
```

# installation - 安装程序（使用 Wix 创建）在升级客户端软件时删除注册表项

> ID：14915979
> 
> 赞同：1
> 
> 时间：2013-02-16T22:48:24.347
> 
> 标签：installation, wix

我使用[Wix](http://en.wikipedia.org/wiki/WiX "蜡")框架创建了一个安装程序。

用户第一次安装软件后，他们可以自定义功能，然后在下次运行程序时保存在注册表中。

这是我遇到的问题：

用户的设置被我的程序保存在注册表中。当用户卸载程序时，他们的设置仍然保存在注册表中（同样，他们应该这样做）。**但是**，当用户去安装较新版本的软件时，注册表值会被删除。

**如何防止注册表值在安装时被删除？**

* * *

编辑：

我现在正在尝试运行自定义操作脚本来复制和恢复注册表。这是我的脚本代码：

```
<CustomAction Id="SaveCmd" Directory="TempFolder"  ExeCommand="[SystemFolder]ccbackup.bat" Execute="deferred" Impersonate="no" />
<CustomAction Id="RestoreCmd" Directory="TempFolder" ExeCommand="[SystemFolder]REG.exe RESTORE HKCU\Software\Company\Program[TempFolder]BkUp.hiv" Execute="deferred" Impersonate="no" />
<InstallExecuteSequence>
    <Custom Action="SaveCmd" After="InstallInitialize" />
    <Custom Action="RestoreCmd" Before="InstallFinalize" />
</InstallExecuteSequence> 
```

SaveCmd 自定义操作运行如下所示的脚本 (ccbackup.bat)，以便我可以获得一些调试信息：

```
REG.exe SAVE HKCU\Software\Company\Program BkUp.hiv /Y
pause 
```

脚本 ccbackup.bat 将运行并给我错误：

“**系统找不到指定的注册表项或值**。”

问题是安装程序在“管理员”上下文中运行，因此它不知道如何找到 HKCU 在注册表中的位置。

**有谁知道当我处于“管理员”上下文时如何在 HKCU 下找到一个帐户（然后是正确的注册表）？**

我要尝试的下一个策略是获取当前用户的 SID，然后通过搜索 HKEY_USERS 来访问他们的注册表......但是事实证明这很困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:22:22.353

有很多关于 WiX 的东西要学……这是我摆脱这种泡菜的方法：

为了提升我的自定义操作的权限（如果需要），我使用了这个 VB 脚本：

```
Set objShell = CreateObject("Shell.Application")
Set FSO = CreateObject("Scripting.FileSystemObject")
strPath = FSO.GetParentFolderName (WScript.ScriptFullName)
If FSO.FileExists(strPath & "\CopyRegScript.VBS") Then
     objShell.ShellExecute "wscript.exe", _ 
        Chr(34) & strPath & "\CopyRegScript.VBS" & Chr(34), "", "runas", 1
Else
     MsgBox "Script file CopyRegScript.VBS not found"
End If 
```

此脚本将提示用户允许管理员权限。

要写入 HKU 注册表，我需要知道特定用户的 SID。为此，我使用了这个脚本：

```
Private Function getSid()
    strComputer = "."
    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
    Set wshShell = CreateObject( "WScript.Shell" )
    strDomain = wshShell.ExpandEnvironmentStrings("%ComputerName%")
    Set objAccount = objWMIService.Get("Win32_UserAccount.Name='" & _strUsername & "',Domain='" & strDomain & "'")
    getSID = objAccount.SID
End Function 
```

然后只需复制注册表并在安装程序执行序列完成后恢复注册表即可。我使用[Reg.exe](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/reg.mspx?mfr=true)命令行函数来执行此操作。

注意：我不建议任何人使用这种技术。我们不得不使用它，因为在之前发布的版本中，决定在卸载时必须擦除所有自定义设置。发布后，决定这实际上不是一个可接受的解决方案，但为时已晚......它已经交付给客户。

# user-interface - 如何在 GTK+3 (Python) 中创建侧边栏？

> ID：14915983
> 
> 赞同：1
> 
> 时间：2013-02-16T22:48:39.163
> 
> 标签：user-interface, gtk, gtk3, pygobject

我对 GTK+3 相当陌生（我使用 PyGObject），我需要创建一个具有如下结构的侧边栏：

```
Header 1
    Subheader 1
    Subheader 2

Header 2
    Subheader 3
    Subheader 4 
```

我可以从哪些例子中学习？你能给我看一个关于如何使用`Gtk.Treeview`和`Gtk.TreeModel`（不使用`Gtk.Builder()`）的最小工作示例吗？

除了使用 xml 文件和`Gtk.Builder()`描述布局似乎优于在 python 文件中创建结构，但这样做的文档似乎要少得多。

**我当前的用户界面描述：**

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
    <object class="GtkWindow" id="main-window">
        <property name="title">ApplicationName</property>
        <signal name="delete-event" handler="onDeleteWindow"/>
        <child>
            <object class="GtkBox" id="container">
                <property name="orientation">horizontal</property>
                <child>
                    <object class="GtkTreeView" id="sidebar">
                    </object>
                </child>
                <child>
                    <object class="GtkBox" id="right-container">
                        <property name="orientation">vertical</property>
                        <child>
                            <object class="GtkButtonBox" id="top-buttonbox">
                                <child>
                                    <object class="GtkButton" id="add-button">
                                        <property name="label">Add</property>
                                    </object>
                                </child>
                                <child>
                                    <object class="GtkButton" id="delete-button">
                                        <property name="label">Delete</property>
                                    </object>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </child>
    </object>
</interface> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T13:12:56.953

你应该看看`GtkTreeView`和相关的树状数据模型`GtkTreeStore`。[Python GTK+ 3.0 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html)是一个很好的介绍。

# ruby-on-rails - 部署后如何使 nginx 和乘客自动重启

> ID：14915985
> 
> 赞同：3
> 
> 时间：2013-02-16T22:48:42.070
> 
> 标签：ruby-on-rails, nginx, capistrano, passenger

我目前在虚拟专用服务器上部署了一个 Rails 应用程序。

我使用 Capistrano、Nginx 和乘客在服务器上运行我的 rails 应用程序。

出于某种原因，在我完成 cap deploy:update 之后，我永远无法在网站上显示更新的代码。

部署进行得很好，甚至可以通过 Vim 在实时服务器上看到代码，但是如果我导航到实时站点，它将不会显示。

我目前的解决方法是重新启动服务器，在服务器重新启动后启动 nginx 和乘客。

我担心的是，如果有人在我部署并重新启动时登录到该站点，它会将他们从该站点中删除。

有没有人有任何想法

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-16T22:58:11.040

如果您`touch tmp/restart.txt`从 Rails 根目录运行，则乘客将重新启动应用程序。您不必重新启动 nginx。在 restart.txt 文件的时间戳发生变化后，Passenger 将重新启动下一个请求。如果您的应用程序需要一段时间才能启动，您可能希望通过在触摸文件后立即发出请求来强制执行此操作。

您无需担心将某人踢出站点，如果正在处理请求，它不会重新启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T06:22:38.017

如果您仍然面临问题，您可以使用 Monit gem，在 capstraino 中它工作得非常好。

# python - 只有一个带有 argparse 的命令行参数

> ID：14915986
> 
> 赞同：5
> 
> 时间：2013-02-16T22:48:42.037
> 
> 标签：python, argparse

我正在尝试使用 argparse 以只接受一个或一次的方式实现一个命令行参数。应拒绝多次出现。

我使用以下代码

```
#!/usr/bin/env python3
import argparse
cmd_parser = argparse.ArgumentParser()
cmd_parser.add_argument('-o', dest='outfile')
cmd_line = cmd_parser.parse_args()
print(cmd_line.outfile) 
```

一个参数给出了预期的结果：

```
./test.py -o file1
file1 
```

当两次发出参数时，第一次出现被静默忽略：

```
./test.py -o file1 -o file2
file2 
```

我也尝试过`nargs=1`，`action='store'`但没有达到预期的结果。

如何告诉 argparse 拒绝多个参数出现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T23:02:04.153

它可以用一个自定义动作来安排：

```
import argparse

class Once(argparse.Action):
    def __init__(self, *args, **kwargs):
        super(Once, self).__init__(*args, **kwargs)
        self._count = 0

    def __call__(self, parser, namespace, values, option_string=None):
        # print('{n} {v} {o}'.format(n=namespace, v=values, o=option_string))
        if self._count != 0:
            msg = '{o} can only be specified once'.format(o=option_string)
            raise argparse.ArgumentError(None, msg)
        self._count = 1
        setattr(namespace, self.dest, values)

cmd_parser = argparse.ArgumentParser()
cmd_parser.add_argument('-o', dest='outfile', action=Once, default='/tmp/out')
cmd_line = cmd_parser.parse_args()
print(cmd_line.outfile) 
```

* * *

您可以指定一个默认值：

```
% script.py 
/tmp/out 
```

您可以指定`-o`一次：

```
% script.py -o file1 
file1 
```

但是指定`-o`两次会引发错误：

```
% script.py -o file1 -o file2
usage: script.py [-h] [-o OUTFILE]
script.py: error: -o can only be specified once 
```

# java - 我所有的字段都有一个前缀。我怎么能告诉它休眠？

> ID：14915987
> 
> 赞同：0
> 
> 时间：2013-02-16T22:48:55.967
> 
> 标签：java, hibernate, hibernate-annotations

例如我有：

```
 @Column(name = "username")
  private String m_username; 
```

请注意，@Column 注释只影响数据库列名。

Hibernate 仍然认为属性的名称是'm_username'。

如何告诉 Hibernate 属性名称只是“用户名”？

请告诉我有一种方法可以做到这一点......

编辑：我在我的代码示例中删除了 @AccessType 注释，因为它与这个问题无关。

更新：将所有内容切换到字段访问后，会发生此异常：

```
org.hibernate.QueryException: could not resolve property: username of: mypackage.model.User 
```

它发生在这里：

```
Criteria criteria = session.createCriteria(User.class);
criteria.add(Restrictions.eq("username", username));
User result = (User) criteria.uniqueResult(); 
```

原因很可能是休眠只“知道”名为“m_username”的属性，而我想到它并针对名为“username”的属性进行编程。另请注意，我的 getter/setter 被称为：“getUsername()”和“setUsername(String value)”（自动生成）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:00:31.187

据我所知，我们不能*。

`hibernate`查找 a 的方法的方式仍然存在一个问题`given property name`。

假设您有一个`property`类似“mProperty”的名称（第一个小写，第二个大写，其余无关紧要）。不是`accessor` 源代码中的方法将是`getMProperty`and `setMProperty`。

方式`BasicPropertyAccessor.getterMethod`就是这样实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:24:49.107

我在这里找到了一条线索：[https ://forum.hibernate.org/viewtopic.php?f=1&t=943110](https://forum.hibernate.org/viewtopic.php?f=1&t=943110)

但是该线程已有 7 年历史，我不知道如何将其应用于基于注释的配置（我没有 xml 配置文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:54:24.623

你为什么用`AccessType.PROPERTY`？

删除它，它可以通过“字段”访问。

不要混合字段和属性注释。坚持一个或另一个。

# c - 简单的 TCP 服务器

> ID：14915988
> 
> 赞同：2
> 
> 时间：2013-02-16T22:49:10.010
> 
> 标签：c, signals

这是用于教学目的的基本 TCP-Server 实现。是否有任何错误或改进。欢迎任何建议！

我只有一个疑问：

```
signal(SIGCHLD, SIG_IGN); 
```

该调用是否用于防止缩放子进程？

```
 #include <netinet/in.h>
 #include <sys/socket.h>
 #include <netdb.h>

 #include <sys/signal.h>

 #include <unistd.h>
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>

 #define BACKLOG 5
 #define MAXSIZE 1024 //max-bytes for read-buffer

void main(){

int sock_ds, ret, length;
int acc_ds; //Accept socket descriptor

struct sockaddr_in addr; //this addres
struct sockaddr rem_addr; //remote address (generic)

char buff[MAXSIZE];

sock_ds = socket(AF_INET, SOCK_STREAM, 0); // => TCP

bzero((char *)&addr, sizeof(addr)); //reset struct
addr.sin_family = AF_INET;
addr.sin_port = htons(25000);
addr.sin_addr.s_addr = INADDR_ANY;
ret = bind(sock_ds, &addr, sizeof(addr));
if(ret == -1){
    perror("Binding error");
    exit(1);
}

ret = listen(sock_ds, BACKLOG); // backlog queue
    if(ret == -1){
    perror("Listen error");
    exit(1);
}

length = sizeof(rem_addr);
signal(SIGCHLD, SIG_IGN); //zombie children management

/*Busy-waiting (server) and concurrency */
while(1){

    /*Repeat until success*/
    while(acc_ds = accept(sock_ds, &rem_addr, &length) == -1){

        if(fork() == 0){ //child-process

            close(sock_ds); //unused from child
            do{
                read(acc_ds, buff, MAXSIZE);
                printf("Message from remote host:&s\n", buff);

            }while(strcmp(buff, "quit") == 0);
            /*Transimission completed: server response  */
            write(acc_ds, "Reading Done", 10);
            close(acc_ds); //socket closed
            exit(0); //exiting from child
        }
        else{
            close(acc_ds); //unused from parent
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:01:00.533

1.  返回类型`main`is not `int`。它应该是。要么返回`EXIT_SUCCESS`，要么`EXIT_FAILURE`。
2.  `socket()`不检查调用结果。它应该或者`bind`将会失败，但`perror()`会告诉“无效参数”而不是实际错误。
3.  `read()`未检查的返回值可能会在打印时触发未定义的行为。
4.  没有`&s`指定格式，应该是`%s`.
5.  `%s`需要一个以 null 结尾的字符串。代码不能保证这一点（参见第 3 点）。`strcmp()`也可能会废话。

至于`SIGCHLD`，@cnicutar 已经很好地回答了这个问题，没有什么可添加的。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:52:27.047

是的，这正是忽略 SIGCHLD 的目的。来自 TLPI：

> 还有一种处理死子进程的可能性。将 SIGCHLD 的配置显式设置为 SIG_IGN 会导致任何随后终止的子进程立即从系统中删除，**而不是转换为僵尸**进程。

它是 Unix 实现的标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T03:34:51.047

我也需要了解它是如何工作的。所以，我用谷歌搜索了“simple tcp-server”，找到了这个小程序，并修复了代码，让 gcc -Wall 和评论更满意。这是我放在一起的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>

#include <signal.h>

#include <netinet/in.h>
#include <sys/socket.h>
#include <netdb.h>

#include <sys/wait.h>
#include <sys/types.h>
#include <sys/ptrace.h>

#define BACKLOG 5
#define MAXSIZE 1024 //max-bytes for read-buffer

#define PORT 25000

/****************************************************************/
int main() {

  int sock_ds, ret; unsigned int length;
  int acc_ds; //Accept socket descriptor

  struct sockaddr_in addr; //this address
  struct sockaddr rem_addr; //remote address (generic)

  char buff[MAXSIZE+1];

  if (!(sock_ds = socket(AF_INET, SOCK_STREAM, 0))) perror("socket call failed"); // => TCP

  bzero( (char *)&addr, sizeof(addr)); //reset struct
  addr.sin_family = AF_INET;
  addr.sin_port = htons(PORT);
  addr.sin_addr.s_addr = INADDR_ANY;
  ret = bind(sock_ds, (struct sockaddr *)&addr, sizeof(addr));
  if (ret == -1) {
    perror("Binding error");
    exit(EXIT_FAILURE);
  }

  ret = listen(sock_ds, BACKLOG); // backlog queue
  if (ret == (-1)) {
    perror("Listen error");
    exit(EXIT_FAILURE);
  }

  length = sizeof (rem_addr);
  //  sigaction(SIGCHLD, SA_NOCLDWAIT); //zombie children management

  /*Busy-waiting  (server) and concurrency */
  while (1) {
    fprintf(stderr, "[Waiting for client %d]\n", getpid());

    /*Repeat until success*/
    while ((acc_ds = accept(sock_ds, &rem_addr, &length)) == -1) {
      fprintf(stderr, "[Accepted from client %d]\n", getpid());

      if (fork() == 0) { //child-process
        close(sock_ds); //unused from child
        fprintf(stderr, "[Reading from client %d]\n", getpid());
        while (read(acc_ds, buff, MAXSIZE)) {
          buff[MAXSIZE]='\0';
          printf("Message from remote host:%s\n", buff);
          fflush(stdout);
          if (strncmp (buff, "quit", 5) == 0) break;
        }

        /*Transmission completed: server response  */

        if (write(acc_ds, "Reading Done", 10)) fprintf(stderr, "failed write\n");
        close(acc_ds); //socket closed
        exit(EXIT_SUCCESS); //exiting from child
      }
      else{
        close(acc_ds); //unused from parent
      }
    }
  }
  return EXIT_SUCCESS;
} 
```

两个问题。首先是gnu linux gcc拒绝接受

```
sigaction(SIGCHLD, SA_NOCLDWAIT); //zombie children management 
```

> tcp-server2.c：在函数'main'中：tcp-server2.c:53:3：警告：传递'sigaction'的参数2使指针从整数而不进行强制转换[默认启用]在tcp-server2包含的文件中.c:7:0: /usr/include/signal.h:267:12: 注意：预期的 'const struct sigaction * **restrict** ' 但参数的类型是 'int' tcp-server2.c:53:3: 错误： tcp-server2.c:7:0:/usr/include/signal.h:267:12:/usr/include/signal.h:267:12 中包含的文件中函数“sigaction”的参数太少：注意：在此处声明

第二个是当我远程登录到端口 25000 并键入一些内容时，没有任何内容被回显为收到。所以服务器似乎不起作用。它永远不会被客户接受。

现在，我可以从其他地方找到一个编程示例，但我认为我应该在这里报告这个，所以我们在这里得到了一个最简单的 tcp 服务器。

# javascript - jQuery eq() 选择器不起作用

> ID：14915989
> 
> 赞同：3
> 
> 时间：2013-02-16T22:49:19.623
> 
> 标签：javascript, jquery, html

我已经尝试了我能找到的所有可能的组合，但它仍然不起作用。我正在尝试选择第一、第二、第三...图像并更改 CSS 属性。

JavaScript：

```
 $("#slider:eq(0)")filter(img).css("display","none");
    $("#slider:eq(0)")filter(img).css("visibility","hidden"); 
```

的HTML：

```
 <div id  = "slider">
    <img id = "slider_img5" class = "slider_image" src = "img/slider_image_5.png" width = "1000px" height = "400px" alt = "slider_image_5">
    <img id = "slider_img4" class = "slider_image" src = "img/slider_image_4.png" width = "1000px" height = "400px" alt = "slider_image_4">
    <img id = "slider_img3" class = "slider_image" src = "img/slider_image_3.png" width = "1000px" height = "400px" alt = "slider_image_3">
    <img id = "slider_img2" class = "slider_image" src = "img/slider_image_2.png" width = "1000px" height = "400px" alt = "slider_image_2">
    <img id = "slider_img1" class = "slider_image" src = "img/slider_image_1.png" width = "1000px" height = "400px" alt = "slider_image_1">
    </div> 
```

CSS：

```
#slider{
position : absolute;
height : 400px;
width : 100%;
border-radius : 3px;
-moz-border-radius : 3px;
box-shadow : 1px 1px 5px #bbbbbb;
-moz-box-shadow : 1px 1px 5px #bbbbbb;
}

.slider_image{
position : absolute;
top : 0px;
left : 0px;
border-radius : 3px;
-moz-border-radius : 3px;
}

#slider_img1 , #slider_img2 , #slider_img3 , #slider_img4{
visibility : hidden;
display : none;
} 
```

我希望有一个人可以帮助我。

**更新 1**

感谢您提供所有答案，但没有一个有效。我正在调用文档准备好的函数，它肯定被调用（用 测试`alert();`）。我还预设了所有图像的样式，因此除了第一个之外，它们都被隐藏了。

**更新 2**

对不起，伙计们，少了一个分号。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T22:50:52.673

`#slider`和之间需要一个空格`:eq(0)`。

如果没有空格，它会寻找第一个*元素*`#slider`，而*不是*.*`#slider`*

 *但是请注意，这`:eq`是对选择器的[jQuery 扩展](http://api.jquery.com/eq-selector/)。为了获得更好的性能，您应该使用`$('#slider img').eq(n)`，允许尽可能快地解析整个（有效的）CSS 选择器，然后使用`.eq`来获取您想要的元素。

或者，使用原生 CSS`:nth-child()`语法，即`#slider :nth-child(1)`，但请注意，这使用从 1 开始的数字而不是 0。

此外，您`filter(img)`给出的语法不正确。它应该被链接（即`.filter`）并且参数应该是一个有效的选择器，即`'img'`（带引号）。但是，如果您的真实 HTML 如图所示，则不需要过滤器，因为它是 NoOp - 之前的函数调用只能返回图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:50:42.380

好的，你可以用 CSS 做到这一点。据我了解，您想显示第一张图像并隐藏其他图像？所以添加：

```
#slider_img5{
  visibility : visible;
  display : block;
} 
```

或者

```
#sider img:first-child{
  /* same... */
} 
```

该`visibility`属性在这里是不必要的，因为您已经用`display: none`...隐藏了元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T22:52:30.023

这应该有效：

```
$('#slider img').eq(0).hide(); 
```

真的没有必要设置`visibility: hidden`一次`display: none`已经设置。但这或多或少是`.hide()`这样做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-19T13:55:39.683

应该使用`.find`而不是`.filter`.

```
.find('img').css("display","none"); 
```*

# process - erlang：如何结束系统上的进程？

> ID：14915993
> 
> 赞同：2
> 
> 时间：2013-02-16T22:49:33.283
> 
> 标签：process, erlang, terminate

我`i().`在 werl shell 中运行了该命令，它会输出当前在我的系统上运行的进程列表。有没有办法用一个命令结束它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:59:31.690

你在`i().`命令之后看到的进程都是进程，包括对 VM 本身至关重要的进程。除了要停止整个 VM 之外，您不应该全部停止它们。您必须自己清理自己的流程。严重应用的推荐方法是遵循 OTP 原则。

如何停止 VM 有两种主要方法。第一个是优雅关闭，您可以使用 shell 命令调用它，这与它需要一段时间`q().`完全相同，但您应该将这种方式用于运行严肃应用程序的真实系统。`init:stop().`

第二种方法可以用于正在试验的 VM 节点或用于连接到应用程序节点的临时节点。立即停止使用 VM`erlang:halt().`有更快的方法可以使用`Ctrl+C`then `a`and`Enter`或`Ctrl+G`then `q`and调用此 VM 暂停`Enter`。

您可以使用`erlang:halt/0`或`init:stop/0`从您的脚本或远程调用。

# java - COBOL DATATYPE CONVERSION: Number to Packed Numeric, Packed Date COMP-3

> ID：14915999
> 
> 赞同：1
> 
> 时间：2013-02-16T22:50:46.900
> 
> 标签：java, unix, vbscript, cobol, packed-decimal

我正在尝试将 Number 转换为 PACKED DEMCIMAL，从网络研究编号 123 将是 123D（如果为负数则为 C）作为打包数字，我的问题是“这是正确的 PACKED DEMCIMAL 吗？” 因为我有状态的要求，日期将存储在 3 字节的压缩数字中，长度只有 2 位。

请解释或清除我的疑问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:16:40.843

你倒过来了。

正[压缩十进制](http://www.simotime.com/datapk01.htm)以 C 结尾。负压缩十进制以 D 结尾。假设为正的无符号压缩十进制以 F 结尾。

一个 3 字节的压缩数字包含 5 个数字和一个符号。PIC S9(5) COMP-3 是 3 个字节。

如果只有五位数，我不确定您的日期是什么格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T23:29:36.637

PIC S999 或 S9(3) PACKED-DECIMAL 或 COMP-3 占用两个字节的存储空间。这有一个迹象。

PIC 999 或 9(3) 占用两个字节的存储空间，符号为“F”，表示无符号，始终视为正数。

每个数字占半个字节，半个字节用于“符号”——正如吉尔伯特所说，C 是正数，D 是负数。

您已标记 Java 和 VBScript。您是否正在尝试将“外部”Cobol 转换为将其呈现给 Cobol 程序？如果是这样，将数据显示为带有“单独”符号的“纯文本”会容易得多。省得你乱七八糟。“类型转换”在 Cobol 中是自动的，将所有内容以“纯文本”形式提供给程序并让 Cobol 继续处理会更有意义。

与任何有小数位的东西一样。给出“比例因子”或物理小数点。您将节省自己的时间，不会为 Cobol 程序员浪费任何时间，并且拥有为自己创建测试数据的好方法 - 编辑器。