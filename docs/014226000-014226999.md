# StackOverflow 问答 14226000-14226999

# javascript - 在热键中使用 alt 时停止 Binging Noise

> ID：14226000
> 
> 赞同：4
> 
> 时间：2013-01-08T23:43:08.160
> 
> 标签：javascript, keyboard-shortcuts

当您按 alt+几乎任何其他键时，它会发出刺耳的噪音。噪音说“你试图做一些你做不到的事情”

我想在几种组合中使用 alt 键作为 Web 应用程序的键盘快捷键。

尽管在 alt+* 被击中时有一些事情要做，但 bing 是持久的。

有没有办法阻止 bing 在 JavaScript 中发声？

编辑：~~这可能只是一个 Windows 问题~~这是 chrome 中的一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:08:18.140

我发现将您希望用作 accessKey 的密钥注册将防止 chrome 发出错误噪音*BING*。

通过使用一个非常空白的锚标签并将 accessKey 分配给我想要的热键，问题已得到解决。

```
<a accessKey=*> 
```

由于这篇文章发现了解决方案： [在 Chrome 浏览器中管理 JavaScript 热键](https://stackoverflow.com/questions/13655493/managing-javascript-hotkeys-in-chrome-browser)

# ios - iPhone headphone audio jack re-routing

> ID：14226010
> 
> 赞同：5
> 
> 时间：2013-01-08T23:43:52.913
> 
> 标签：ios, audio, notifications, hardware

We created an external iOS notification light that uses the device’s audio for power. When you get a phone call on iPhone and the light is plugged in, you still get the ringtone but when you pick up, the audio is rerouted to the headphones (the iPhone thinks our light/device is a headphones set) and the user has to extract myLED for at least 2mm to get the audio from the front receiver of the phone.

We have been exploring alternative solutions to this challange - recently we made a prototype with a particular jack shape so that it could be rotated by the user when getting a call to "reroute" the audio to the iPhone speaker/mic. Although it may sound a clever option, this hardware solution is far from being neat - this leads to having positions where the myLED does not work/ it is not reliable, plus other complications.

I know of the existence of kAudioSessionOverrideAudioRoute_Speaker however I suspect that this will only direct the app audio to the rear speaker (the “loud” one) and not to the front receiver (because the “receiver” for the iphone is the headphones set if they are detected).

What would you suggest? Super appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:00:25.210

我认为你处境艰难：

1.  Apple 极不可能发布覆盖电话音频路由的选项。作为电话的一项关键功能，它们倾向于将呼叫方面保持在锁定和密钥状态。

2.  耳机插孔（可能 - 大多数人都是这样做的）使用接地与一个或两个扬声器或遥控器之间的阻抗来确定插头是否插入。除了断开电路之外，没有好的方法来模拟这个。

我认为您拥有的唯一选择是：

1.  要求用户在来电时移除设备。

2.  在插孔上提供一个微控制器来驱动晶体管；该晶体管可以通过电子方式断开电路，以提供与未插入插孔相同的阻抗特征。

我不知道如何、何时以及是否可以向千斤顶提供电话正在进行的信息：是否有一个 API 可以用于“来电但尚未接听的电话”？你是否必须做一个看门狗来确保与你的应用程序的通信？您可以改用扩展坞连接器吗？我认为这些确实是您的选择。不是一个完整的答案，但这些是我的想法。

# c# - 如何评估 System.Linq.Expressions.Expression

> ID：14226014
> 
> 赞同：18
> 
> 时间：2013-01-08T23:44:02.147
> 
> 标签：c#, .net

`System.Linq.Expressions.Expression`评估 a以获得值（对象）的正确或稳健方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T23:44:02.147

我暂时使用以下方法，但不知道它是否是首选方法：

```
public static object Evaluate(Expression e)
{
    //A little optimization for constant expressions
    if (e.NodeType == ExpressionType.Constant)
        return ((ConstantExpression)e).Value;
    return Expression.Lambda(e).Compile().DynamicInvoke();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-08T03:06:47.190

当没有参数时，Timothy Shields 的答案是正确的。对于参数化表达式，您可以使用`Expression.Lambda`（在他的代码中使用的方法）的重载，它采用 的集合`ParameterExpression`，但`ParameterExpression`值必须与给定的值相同`Expression`。如果它是使用来自根表达式的参数的参数化表达式的子表达式，则可以从中获取参数（`LambdaExpression.Parameters`从根传递到`Expression.Lambda`）。

（如果您的表达式已经是 a `LambdaExpression`，您可以直接转换为它并调用`Compile`。）

然后将参数传递给`DynamicInvoke(...)`.

* * *

这是一种扩展 Timothy Shields 方法的方法，用于在您拥有根表达式时调用子表达式。根表达式必须是`LamdbaExpression`（或子类，例如`Expression<TDelegate>`.）

由于我们不知道子表达式需要根表达式的哪些参数，所以我们将它们全部传递。（如果您知道这一点，您可以修改此代码。）

这并不能处理所有情况。它不允许您获取`out`或引用参数的值，并且可能还有其他不受支持的情况。

如果您的表达式不是子表达式或者您没有 root `Expression`，则必须以`ParameterExpression`其他方式获取 s 。

```
using System;
using System.Linq;
using System.Linq.Expressions;

namespace LinqTest
{
    public class LinqCompileSubExpression
    {
        /// <summary>
        /// Compile and invoke a sub-expression of a <see cref="LambdaExpression"/>.
        /// </summary>
        /// <param name="rootExpression">A parameterised expression.</param>
        /// <param name="subExpression">An sub-expression or <paramref name="rootExpression"/>.</param>
        /// <param name="arguments">
        /// The arguments to be supplied on invoking. These must match the parameters to the root expression (empty if it has no parameters).
        /// Any parameters not used by the sub-expression are ignored.
        /// </param>
        /// <returns>The return value of the sub-expression.</returns>
        /// <typeparam name="TReturn">The type of the return value. Use <see cref="Object"/> if it is not known.</typeparam>
        /// <remarks>
        /// If invoking the same expression multiple times, use <see cref="CompileSubExpression(LambdaExpression, Expression)"/> once,
        /// then invoke the delegate (for efficiency).
        /// </remarks>
        public static TReturn InvokeSubExpression<TReturn>(LambdaExpression rootExpression, Expression subExpression, params object[] arguments)
        {
            // compile it (to a delegate):
            Delegate compiledDelegate = CompileSubExpression(rootExpression, subExpression);

            // invoke the delegate:
            return (TReturn)compiledDelegate.DynamicInvoke(arguments);
        }

        /// <summary>
        /// Compile a sub-expression of a <see cref="LambdaExpression"/>.
        /// </summary>
        /// <param name="rootExpression">A parameterised expression.</param>
        /// <param name="subExpression">An sub-expression or <paramref name="rootExpression"/>.</param>
        /// <returns>The compiled expression.</returns>
        public static Delegate CompileSubExpression(LambdaExpression rootExpression, Expression subExpression)
        {
            // convert the sub-expression to a LambdaExpression with the same parameters as the root expression:
            LambdaExpression lambda = Expression.Lambda(subExpression, rootExpression.Parameters);

            // compile it (to a delegate):
            return lambda.Compile();
        }
    }
} 
```

这些是使用 Microsoft 测试框架的单元测试。实际需要的代码是上面两个静态方法中的三行代码。

```
using System;
using System.Linq;
using System.Linq.Expressions;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using static LinqTest.LinqCompileSubExpression;

namespace LinqTest
{
    [TestClass]
    public class LinqCompileSubExpressionTest
    {
        [TestMethod]
        public void InvokeExpressionTest1()
        {
            Expression<Func<string, int>> rootExpression = s => s.Substring(4).Length;

            var subExpression = ((MemberExpression)rootExpression.Body).Expression;   // just the `s.Substring(4)` part
            Assert.AreEqual("t string", InvokeSubExpression<string>(rootExpression, subExpression, "input string"));
        }

        [TestMethod]
        public void InvokeExpressionTest2()
        {
            Expression<Func<object, int>> rootExpression = x => x.ToString().Length;

            var subExpression = ((MemberExpression)rootExpression.Body).Expression;   // just the `x.ToString()` part
            Assert.AreEqual("5", InvokeSubExpression<string>(rootExpression, subExpression, 5));
        }

        [TestMethod]
        public void InvokeExpressionTest3()
        {
            Expression<Func<ClassForTest, int>> rootExpression = x => x.StrProperty.Length + 15;

            var subExpression = ((BinaryExpression)rootExpression.Body).Right;   // `15`
            Assert.AreEqual(15, InvokeSubExpression<int>(rootExpression, subExpression, new ClassForTest()));  // argument is irrelevant
        }

        [TestMethod]
        public void InvokeExpressionTest4()
        {
            Expression<Func<int, int>> rootExpression = x => Math.Abs(x) + ClassForTest.GetLength(x.ToString());

            var subExpression = ((BinaryExpression)rootExpression.Body).Right;
            Assert.AreEqual(3, InvokeSubExpression<int>(rootExpression, subExpression, 123));   // we pass root parameter but evaluate the sub-expression only
        }

        [TestMethod]
        public void InvokeExpressionTest5()
        {
            Expression<Func<int, int>> rootExpression = x => ClassForTest.GetLength(x.ToString());

            var subExpression = ((MethodCallExpression)rootExpression.Body).Arguments[0];        // just the `x.ToString()` part
            Assert.AreEqual("123", InvokeSubExpression<string>(rootExpression, subExpression, 123));  // we pass root parameter but evaluate the sub-expression only
        }

        public class ClassForTest
        {
            public string StrProperty { get; set; }
            public static int GetLength(string s) => s.Length;
        }
    }
} 
```

# django - Django custom template tag being cached

> ID：14226019
> 
> 赞同：3
> 
> 时间：2013-01-08T23:44:07.647
> 
> 标签：django, templates, caching

I won't be offended if you just send a link to where this has already been answered. I haven't found an answer to this.

I'm working on a site where a [cached template loader](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.loaders.cached.Loader) is enabled. They have a custom template tag that they call on many pages, and one of the values passed to this tag is the unique article ID of the page that called it. The problem is that the cached template loader seems to be caching the values too, so even though each page is passing its article ID to the tag, the tag is using the cached article ID.

Is there a way to disable the cached template loader for a single template tag?

Here is some code if it's helpful:

This is the cached template loader setting:

```
TEMPLATE_LOADERS = (
    ('django.template.loaders.cached.Loader', (
        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',
    )),
) 
```

When I comment out this setting and restart the server, the issue goes away, so I know it has "something" to do with caching.

That doc linked above also talks about making sure template tags are [thread-safe](https://docs.djangoproject.com/en/1.2/howto/custom-template-tags/#thread-safety-considerations). Is this because of how the template gets stored in the cache? What I take from that note about thread-safety is that values passed to template tags shouldn't be assigned to the node itself, but to the render_context. Am I on the right track?

Here is a sample of what my code is doing:

Calling the tag on page 1:

```
{% my_tag article_id="{{object.article_id}}" %} 
```

Calling the tag on page 2:

```
{% my_tag article_id="{{object.article_id}}" %} 
```

In both of the above cases, object.article_id is a template variable that contains the article ID for the page calling the template tag.

Below is the template tag code (simplified).

```
@register.tag(name="my_tag")
def do_my_tag(parser, token):

    article_id = None
    values = token.split_contents()
    kwargs = get_kwargs(values[1:])

    if "article_id" in kwargs:
        article_id = kwargs["id"]

    return DoMyTagNode(article_id)

class DoMyTagNode(template.Node):

    def __init__(self, article_id):
        self.article_id = article_id
        self.template = get_template('path/to/template.html')

    def render(self, context):
        article_id = Template(self.article_id).render(context)

        context.update({ 'article_id': article_id })

        return render_to_string(self.template, context) 
```

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-24T15:57:35.330

您不应该使用`django.template.loaders.cached.Loader`in development ，因为这意味着您的 html 文件的更改不会被拾取，需要您重新启动服务器。这很可能是您的问题，因为您并没有真正提供更多。

缓存的加载器不会缓存模板的输出，它会缓存文件系统中的模板。它们仍然会像没有加载器一样正常运行，所以这不是你的问题。加载程序不会缓存您的自定义标签的输出。

# java - 单元测试 Spring DAO

> ID：14226021
> 
> 赞同：0
> 
> 时间：2013-01-08T23:44:20.547
> 
> 标签：java, spring, hibernate, testing

我用 Spring+Hibernate+postgres 写了一个 API，我有以下问题

1) 我正在尝试对我的 DAO 进行单元测试以进行 CRUD 操作。最好的方法是什么，对像 H2 这样的临时数据存储进行测试是否相同？

2）有没有建议的教程来做到这一点？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:58:52.753

您可能希望使用[Spring 配置文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)进行测试，只需将您的 DataSources 与仅在您的测试中运行的嵌入式 H2 数据库交换。[Spring 参考资料](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html#jdbc-embedded-database-support)很好地解释了这一点。这很简单：

```
<jdbc:embedded-database id="dataSource">
    <jdbc:script location="classpath:schema.sql"/>
    <jdbc:script location="classpath:test-data.sql"/>
</jdbc:embedded-database> 
```

id 属性将是 DataSource 类型的 bean 的 id。

您可能需要脚本来设置示例中的测试记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:01:21.797

测试 DAO 的最佳方法是通过 test-applicationContext 使用内存中的 H2 数据库，您也可以使用 mockito 框架。

请参阅此[Hibernate 临时数据存储](https://stackoverflow.com/questions/14227572/hibernate-temporary-datastore) [http://iamjosh.wordpress.com/2007/12/11/unit-testing-dao-classes-with-junit-spring/](http://iamjosh.wordpress.com/2007/12/11/unit-testing-dao-classes-with-junit-spring/)

希望能帮助到你。

# internet-explorer - Compatibility Mode vs IE Version Emulation

> ID：14226023
> 
> 赞同：3
> 
> 时间：2013-01-08T23:44:23.597
> 
> 标签：internet-explorer, compatibility

Is there a difference between the two? I have a web page which IE has a had time processing the Javascript. When I enable Compat mode manually within the toolbar everything works fine.

I did some research on how to force compat mode within the code. What I found was to include a meta tag which tells IE to emulate a specified browser version, like such: `<meta http-equiv="X-UA-Compatible" content="IE=9">` or `<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" >`

I've tried both, inserting them immediately after the opening head tag, but no success. IE still chokes on the javascript.

Much thanks for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:54:29.943

尝试使用 [这里](http://webdesign.about.com/od/metataglibraries/p/x-ua-compatible-meta-tag.htm)有更多选项。 [这里](http://webdesign.about.com/od/internetexplorer/qt/force-compatibility-view-in-ie.htm)解释了强制兼容模式的另一种方法是省略 DOCTYPE 声明！

# node.js - 是否可以自动安装 node.js 脚本所需的模块？

> ID：14226025
> 
> 赞同：16
> 
> 时间：2013-01-08T23:44:36.337
> 
> 标签：node.js

是否可以自动下载 node.js 脚本所需的模块？我想知道是否可以为 node.js 脚本（如下所示）生成所需模块的列表，并自动安装它们，而不是手动安装它们，一个接一个（使用 npm）。

```
#!/usr/bin/env node

var DNode = require('dnode');
var sys = require('sys');
var fs = require('fs');
var http = require('http');

var html = fs.readFileSync(__dirname + '/web.html');
var js = require('dnode/web').source();

//the rest of this script is omitted. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T23:54:18.390

是的，有一段很棒的代码叫做 NPM 就是为了这个：[https ://npmjs.org/](https://npmjs.org/)

您在文件中指定依赖包`package.json`（[请参阅文档](https://npmjs.org/doc/)以了解语法），您可以使用`npm install .`一次将它们全部拉入，然后`require`从脚本中提取它们。

Package.json 语法页面：[https ://docs.npmjs.com/getting-started/using-a-package.json](https://docs.npmjs.com/getting-started/using-a-package.json)

首次安装模块时，您可以提供任意数量的模块来安装，并添加`--save`参数以自动将其添加到您的`package.json`

```
npm i --save dnode request bluebird 
```

下次有人会执行`npm i`它会自动安装你指定的所有模块`package.json`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-03T10:37:06.240

我为此写了一个脚本。
将它放在脚本的开头，当你运行它时，所有卸载的模块都会被安装。

```
(function () {
  var r = require
  require = function (n) {
    try {
      return r(n)
    } catch (e) {
      console.log(`Module "${n}" was not found and will be installed`)
      r('child_process').exec(`npm i ${n}`, function (err, body) {
        if (err) {
          console.log(`Module "${n}" could not be installed. Try again or install manually`)
          console.log(body)
          exit(1)
        } else {
          console.log(`Module "${n}" was installed. Will try to require again`)
          try{
            return r(n)
          } catch (e) {
            console.log(`Module "${n}" could not be required. Please restart the app`)
            console.log(e)
            exit(1)
          }
        }
      })
    }
  }
})() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-19T22:23:37.667

我受到[@Aminadav Glickshtein 的回答的](https://stackoverflow.com/questions/14226025/is-it-possible-to-automatically-install-the-required-modules-for-a-node-js-scrip/21525014#21525014)启发，创建了一个我自己的脚本来**同步**安装所需的模块，因为他的回答缺乏这些功能。

我需要一些帮助，所以我**[在这里](https://stackoverflow.com/questions/53270058/node-cant-find-certain-modules-after-synchronous-install)**开始了一个 SO 问题。您可以在那里阅读有关此脚本如何工作的信息。
结果如下：

```
const cp = require('child_process')

const req = async module => {
  try {
    require.resolve(module)
  } catch (e) {
    console.log(`Could not resolve "${module}"\nInstalling`)
    cp.execSync(`npm install ${module}`)
    await setImmediate(() => {})
    console.log(`"${module}" has been installed`)
  }
  console.log(`Requiring "${module}"`)
  try {
    return require(module)
  } catch (e) {
    console.log(`Could not include "${module}". Restart the script`)
    process.exit(1)
  }
}

const main = async () => {
  const http    = await req('http')
  const path    = await req('path')
  const fs      = await req('fs')
  const express = await req('express')

  // The rest of the app's code goes here
}

main() 
```

还有一个单行字（139 个字符！）。它没有全局定义`child_modules`，没有最后一个`try-catch`，也没有在控制台中记录任何内容：

```
const req=async m=>{let r=require;try{r.resolve(m)}catch(e){r('child_process').execSync('npm i '+m);await setImmediate(()=>{})}return r(m)}

const main = async () => {
  const http    = await req('http')
  const path    = await req('path')
  const fs      = await req('fs')
  const express = await req('express')

  // The rest of the app's code goes here
}

main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-03T03:07:56.803

当我通过右键单击在 Windows 上打开脚本然后使用 nodejs 打开时，它尝试在 system32 中安装节点模块，但它失败了

我修改了脚本并且它有效

单线：

```
var req=async m=>{let r=require;try{r.resolve(m)}catch(e){console.log('Installing ' + m);r('child_process').execSync('npm i --prefix "'+__dirname+'" ' +m);await setImmediate(()=>{})}return r(m)}; 
```

满的：

```
var cp = require('child_process');
var req = async module => {
    try {
        require.resolve(module);
    } catch (e) {
        console.log(`Could not resolve "${module}"\nInstalling`);
        cp.execSync(`npm install --prefix "${__dirname}" ${module}`);
        await setImmediate(() => {});
        console.log(`"${module}" has been installed`);
    }
    console.log(`Requiring "${module}"`);
    try {
        return require(module);
    } catch (e) {
        console.log(`Could not include "${module}". Restart the script`);
        process.exit(1);
    }
}; 
```

# java - Convert byte[] to short[] such that each short element contains 13 bits of data

> ID：14226026
> 
> 赞同：0
> 
> 时间：2013-01-08T23:44:40.350
> 
> 标签：java, algorithm, bit-manipulation

So I am working on a solution where I need any given data type to be broken into a 13 bit encoding I am able to work with everything else except string.

So Steps as I look to code this.

Convert String to byte array

Collect first byte in a short with bit shift of byte to 13

Bit shift next byte with 5 and or it with short to get first short

This is getting cumbersome to iterate I think the approach is all wrong. Can I get a possible solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:06:58.470

使用`BigInteger`. 用`byte[]`. 虽然它不是零，但使用该方法屏蔽掉 13 位`and()`并转换为短 via `intValue()`。将其向右移动 13 位`shiftRight()`并重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:05:55.613

[OpenLR](http://www.openlr.org/)在此处提供了一个二进制库[。](http://www.openlr.org/download.html)

它有一个在其构造函数`ByteArrayBitstreamInput`中接受`byte[]`参数的类，然后您可以获取任意数量的位`getInt()`并将其转换为`short`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:07:06.613

此代码经过轻微测试。这是一个低级别的解决方案，但不会有太多开销（比如移动整个输入或垃圾生成或库膨胀）。

```
// Length of shorts array must be at least (8 * bytes.length + 12) / 13.
static void convert(byte[] bytes, short[] shorts) {
    int nBitsAvail = 13;
    int i = 0;
    for (byte b : bytes) {
        if (nBitsAvail >= 8) {
            // Entire byte fits in available space in short.
            shorts[i] = (short) ((shorts[i] << 8) | b);
            nBitsAvail -= 8;
        } else {
            // Byte must be split between bits remaining in this short and the next.
            int nBitsNeeded = 8 - nBitsAvail ;
            shorts[i] = (short) ((shorts[i] << nBitsAvail) | (b >> nBitsNeeded));
            shorts[++i] = (short) (b & (0xff >> nBitsAvail));
            nBitsAvail = 13 - nBitsNeeded;
        }
    }
    shorts[i] <<= nBitsAvail;
} 
```

# python - 使用 plumbum 捕获前台命令的错误输出

> ID：14226029
> 
> 赞同：6
> 
> 时间：2013-01-08T23:44:54.437
> 
> 标签：python, plumbum

我正在使用 plumbum python 库 (http://plumbum.readthedocs.org/) 作为 shell 脚本的替代品。

我想运行一个命令，当它失败时，它会输出我感兴趣的文件的路径：

```
$ slow_cmd
Working.... 0%
Working.... 5%
Working... 15%
FAIL. Check log/output.log for details 
```

我想在前台运行程序来检查进度：

```
from plumbum.cmd import slow_cmd

try:
    f = slow_cmd & FG
except Exception, e:
    print "Something went wrong."

# Need the error output from f to get the log file :( 
```

当`slow_cmd`失败时，它会抛出异常（我可以捕获）。但我无法从异常或`f`未来对象中获取错误输出。

如果我不在`slow_cmd`FG 上运行，异常包含所有输出，我可以从那里读取文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T08:59:36.290

问题是，`FG`将输出直接重定向到程序的标准输出。见[https://github.com/tomerfiliba/plumbum/blob/master/plumbum/commands.py#L611](https://github.com/tomerfiliba/plumbum/blob/master/plumbum/commands.py#L611)

当输出以这种方式重定向时，它不会通过铅的机器，所以你不会在异常对象中得到它。如果您愿意阻止直到`slow_cmd`完成，更好的解决方案是自己从标准输出中读取。这是一个草图：

```
lines = []
p = slow_cmd.popen()
while p.poll() is None:
    line = p.stdout.readline()
    lines.append(line)
    print line
if p.returncode != 0:
    print "see log file..." 
```

一个更优雅的解决方案是编写自己的 ExecutionModifier（如`FG`）来复制输出流。让我们称之为`TEE`（在[http://en.wikipedia.org/wiki/Tee_(command)](http://en.wikipedia.org/wiki/Tee_(command))之后）......我没有测试过它，但它应该可以解决问题（减去`select`stdout/err ）：

```
class TEE(ExecutionModifier):
    def __init__(self, retcode = 0, dupstream = sys.stdout):
        ExecutionModifier.__init__(self, retcode)
        self.dupstream = dupstream
    def __rand__(self, cmd):
        p = cmd.popen()
        stdout = []
        stderr = []
        while p.poll():
            # note: you should probably select() on the two pipes, or make the pipes nonblocking,
            # otherwise readline would block
            so = p.stdout.readline()
            se = p.stderr.readline()
            if so:
                stdout.append(so)
                dupstream.write(so)
            if se:
                stderr.append(se)
                dupstream.write(se)
        stdout = "".join(stdout)
        stderr = "".join(stderr)
        if p.returncode != self.retcode:
            raise ProcessExecutionError(p.argv, p.returncode, stdout, stderr)
        return stdout, stderr

try:
    stdout, stderr = slow_cmd & TEE()
except ProcessExecutionError as e:
    pass # find the log file, etc. 
```

# ruby - Ruby方法从头开始方法？

> ID：14226034
> 
> 赞同：1
> 
> 时间：2013-01-08T23:45:11.083
> 
> 标签：ruby

示例（导轨）：

```
def blabla

    @ads = ["1", "2"] if @ads.nil?
    @reklame = Reklamer.find(@koder.sample)
    @ads[0] = @reklame.id
    if @ads[0] == @ads[1]
    begin from start method from start
    end

end 
```

是否有一种方法可以重新启动方法/动作，使其从顶部开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:46:51.713

你可以使用[ruby​​-goto](http://raa.ruby-lang.org/project/ruby-goto/)，但我绝对不推荐它。

有关为什么**不**使用 goto 语句的更多信息，请查看[此问题](https://stackoverflow.com/questions/13274661/should-i-use-goto-statement)。它是基于 C# 的，但我认为它很好地涵盖了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:03:42.173

不确定你想要完成什么，但听起来你需要某种循环。这样的事情会做你需要的吗？

```
def blabla
   @ads ||= ["1", "1"]
   # careful with comparing a string ("2") to a numeric id
   while @ads[0] == @ads[1] do
     @reklame = Reklamer.find(@koder.sample)
     @ads[0] = @reklame.id 
   end
end 
```

基本上你会一直重置`@ads[0]`，直到它不同于`@ads[1]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:27:33.497

试试关键字`retry`，这个关键字会从头开始迭代，所以考虑重建你的方法来使用迭代，例如：

```
def blabla
  @ads = ["1", "2"] if @ads.nil?
  @ads.each_slice do |prev_,next_|
    @reklame = Reklamer.find(@koder.sample)
    prev_ = @reklame.id
    retry if prev_ == next_
  end
end 
```

关键字`redo`也将重复当前迭代。

# iphone - iPhone中的UIDatePicker

> ID：14226036
> 
> 赞同：0
> 
> 时间：2013-01-08T23:45:26.753
> 
> 标签：iphone, ios, uidatepicker, popover

我正在努力使用 UIDatePicker。我以为我可以像添加普通子视图一样将它添加到当前视图中，但它没有出现。经过一番搜索，我找到了将其放入弹出框的文档。我按照这些说明让它在 iPad 上工作。但是弹出框在 iPhone 上不起作用。我需要做什么才能让它在那里工作？为什么我不能像常规子视图一样简单地添加它？

这是我的 iPad 代码：

```
-(void)selectADate: (CGPoint)p
{
    UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController
    UIView *popoverView = [[UIView alloc] init];   //view
    popoverView.backgroundColor = [UIColor blackColor];
    UIDatePicker *datePicker=[[UIDatePicker alloc]init];//Date picker
    datePicker.frame=CGRectMake(0,44,320, 216);
    datePicker.datePickerMode = UIDatePickerModeDate;
    [datePicker setTag:10];
    datePicker.date = self.displayedDate;
    [datePicker addTarget:self action:@selector(pickerChanged:)     forControlEvents:UIControlEventValueChanged];
    [popoverView addSubview:datePicker];
    popoverContent.view = popoverView;
    UIPopoverController * popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
    //popoverController.delegate=self;
    self.datePopover = popoverController;
    [popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
    CGRect popoverLocation = CGRectMake(p.x-160, p.y-200, 320, 216);
    [popoverController presentPopoverFromRect:popoverLocation inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];//tempButton.frame where you need you can put that frame//
}

- (void)pickerChanged:(id)sender
{
    self.displayedDate = [sender date];
    [self showMonthContainingDate:[sender date]];
} 
```

我的屏幕目前布局为一种显示一个月天数的日历页面。每天的销售都是一个子视图。屏幕顶部是一个标题，其中包含年、月等信息。当用户点击标题时，会出现日期选择器，日历页面显示与选择器中选择的日期对应的所选月份突出显示日期（当天的子视图的背景具有不同的颜色）。

我不确定为什么我什至需要一个弹出框，除非它只是为了提供一个空白视图，在该视图上放置日期选择器，该日期选择器位于我的日历页面的平铺视图前面。但是我不应该能够简单地将它添加为子视图，然后调用bringSubviewToFront:吗？我试过了，但它在 iPad 上不起作用，因此我使用了弹出框。

如果我在添加其他子视图时添加它，我可以让它显示，但我希望它在我点击标题时显示。这是我的点击代码：

```
- (IBAction)tap:(UITapGestureRecognizer *)sender {
   //tap gesture recognizer
   //Assume the user tapped on a day cell.
   for (UIView *dayCell in self.view.subviews) {
      if (CGRectContainsPoint(dayCell.frame, [sender locationInView:self.view])) {
         //found the cell that was touched.
     //NSLog(@"Found a view containing the touch with coords. %@",NSStringFromCGRect(dayCell.frame));
         for (UIView *insideView in dayCell.subviews) {
            for (UILabel *dayElement in insideView.subviews) {
               //found a subview of the day cell.
               if ([dayElement isKindOfClass:[UILabel class]]) {
                  NSLog(@"Found a subview %@",dayElement.text);
               }
            }
         }
      }
      if ([dayCell isKindOfClass:[UILabel class]]) {
         // This is the heading label.
         UILabel * headingLabel = (UILabel *) dayCell;
         if (CGRectContainsPoint(headingLabel.frame, [sender locationInView:self.view])) {
            NSLog(@"The heading was tapped");
            if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
               //iPhone code goes here
               [self iphoneSelectADate:[sender locationInView:self.view]];
            } else  {
               [self selectADate:[sender locationInView:self.view]];
            }
         }
      }
   }
} 
```

这是当前无法使用的 iPhone 代码：

```
-(void)iphoneSelectADate: (CGPoint)p
{
   UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height - 216, 320, 216)];
   [datePicker setDate:[NSDate date]];  //This is the default
   [datePicker setHidden:NO];
   [self.view addSubview:datePicker];
} 
```

如果我在调试器中单步执行，我会看到此代码已执行，但日期选择器未显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:01:34.580

`UIDatePicker`继承自`UIView`，因此您可以像添加`UILabel`. 确保给它一个框架。

像这样的东西适用于 iPhone 屏幕的底部：

```
datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height - 216, 320, 216)];
[datePicker setDate:[NSDate date]];  //This is the default
[self.view addSubview:datePicker]; 
```

听起来您可能有子视图分层问题，`UIDatePicker`但不是问题。

如果这不起作用，请发布您的一些代码，我们将帮助解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:09:59.203

不确定这是否会有所帮助，但是对于已经存在的视图的 UI 更改需要使用 main_queue 进行调度，例如 `dispatch_async(dispatch_get_main_queue(), ^ { [self.view addSubview:yourSubview]; });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T02:45:54.650

我想我可能找到了解决问题的关键。在阅读了有关放置方向相关代码的各个位置的[文档](http://kevin.dew.name/post/18579273258/where-to-progmatically-lay-out-views-in-ios-5-and)`viewWillLayoutSubviews`后，我决定使用. 我再次通读了文档并决定尝试将代码放入其中`viewWillAppear`，这似乎已经解决了问题。

对使用的更改`viewWillAppear`还需要实施`willAnimateRotationToInterfaceOrientation:duration:`

它看起来`viewWIllLayoutSubviews`需要 iPad 而不是 iPhone，所以我还添加了这个：

```
-(void)viewWillLayoutSubviews
{
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
      //iPhone code goes here (empty, since calling showMonthContainingDate: doesn't work from here in iPhone
   } else  {
      //ipad code goes here
      NSDate *dayToDisplay = self.displayedDate;
      [self showMonthContainingDate:dayToDisplay];
      //iPad uses wrong dimensions unless the routine is called from here.
   }
} 
```

最后一点。有一种情况是设备的方向设置不正确——即 iPhone 在启动时是横向的。根据[this answer to another question](https://stackoverflow.com/questions/5864949/iphone-always-returns-uiinterfaceorientationportrait/5876532#5876532) iPhone总是以纵向启动，除非它是一个仅限横向的应用程序。

# asp.net - 如何使用默认值生成 sts 声明以进行开发和测试

> ID：14226040
> 
> 赞同：0
> 
> 时间：2013-01-08T23:45:36.157
> 
> 标签：asp.net, wif, claims-based-identity

我们有一个 asp.net webform 应用程序，我们在其中使用 STS 声明来管理用户授权。工作流程非常简单。用户点击登录页面输入凭据，生成包含其权限的声明。此声明用于将权限传递给我们的应用程序 WCF 服务，以控制他们可以访问哪些数据等。对于自动化测试（甚至开发），我想设置一个机制，其中自动化测试绕过登录和一个虚拟声明页面加载时使用适当的标准。我想在不重写现有 sts 服务的情况下完成此操作。有谁知道是否可以创建一个虚拟声明以及何时调用主站点将其注入到文档中。我对解决身份验证（isAuthenticated）感到满意，但我' 我不确定授权要求。对于在创建开发/存根声明时在何处查找/阅读的任何建议或提示，我将不胜感激。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:49:00.647

不确定在您的代码中注入的最佳位置是什么，但您始终可以使用您想要的任何声明自己创建 ClaimsIdentity/ClaimsPrincipal。

# java - 如何在 Jython 中使用 Java DOM 删除 XML 元素？

> ID：14226043
> 
> 赞同：1
> 
> 时间：2013-01-08T23:45:48.900
> 
> 标签：java, python, xml, dom, jython

假设我有一个这样的 XML 文件（bookstore.xml）

```
<bookstore>
<book category="cooking">
<title lang="en">Everyday Italian</title>
<author>Giada De Laurentiis</author>
<year>2005</year>
<price>30.00</price>
</book>
<book category="children">
<title lang="en">Harry Potter</title>
<author>J K. Rowling</author>
<year>2005</year>
<price>29.99</price>
</book>
<book category="web">
<title lang="en">XQuery Kick Start</title>
<author>James McGovern</author>
<author>Per Bothner</author>
<author>Kurt Cagle</author>
<author>James Linn</author>
<author>Vaidyanathan Nagarajan</author>
<year>2003</year>
<price>49.99</price>
</book>
<book category="web" cover="paperback">
<title lang="en">Learning XML</title>
<author>Erik T. Ray</author>
<year>2003</year>
<price>39.95</price>
</book>
</bookstore> 
```

我想删除= JK罗琳的`book`元素。 我知道我可以像这样（Jython）获得所有匹配作者的元素`author`

```
docFactory = DocumentBuilderFactory.newInstance()
docBuilder = docFactory.newDocumentBuilder()
doc = docBuilder.parse(bookstore.xml)
list = doc.getElementsByTagName("author") 
```

我想将修改后的 XML 树写入 bookstore.xml。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:15:04.460

我建议不要使用`org.w3c.dom.*`和Java API，而是使用[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)。这个库在 Jython 中得到支持，极大地简化了事情。`javax.xml.*`

```
from xml.etree import ElementTree as ET

root = ET.parse("bookstore.xml").getroot()
books = root.findall("book")

for book in books:
    if book.findtext("author") == "J K. Rowling":
        print "Found!"
        root.remove(book)

ET.ElementTree(root).write("output.xml") 
```

使用 Jython 2.5.2（和 CPython 2.7.2）测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:52:32.507

下面是python2.7中的操作步骤。但我没有写脚本，因为它过度依赖于你的 xml 结构。

```
>>> from xml.dom import minidom
>>> xmldoc = minidom.parse('a.xml')
>>> root = xmldoc.documentElement
>>> nodeList = xmldoc.childNodes
>>> bookstore = nodeList[0].childNodes
>>> bookstore
[<DOM Text node "u'\n'">, <DOM Element: book at 0x2544580>, <DOM Text node "u'\n'">, <DOM Element: book at 0x2544a30>, <DOM Text node "u'\n'">, <DOM Element: book at x2544e90>, <DOM Text node "u'\n'" >, <DOM Element: book at 0x25475d0>, <DOM Text node "u'\n'">]
>>> bookstore[3].getElementsByTagName("author")[0].childNodes[0].data
u'J K. Rowling'
>>> nodeList[0].removeChild(bookstore[3])
>>> with open('output.xml', 'w') as f:
...     f.write(xmldoc.saveXML(nodeList[0]))
...
>>> 
```

结果：

```
<bookstore>
<book category="cooking">
<title lang="en">Everyday Italian</title>
<author>Giada De Laurentiis</author>
<year>2005</year>
<price>30.00</price>
</book>

<book category="web">
<title lang="en">XQuery Kick Start</title>
<author>James McGovern</author>
<author>Per Bothner</author>
<author>Kurt Cagle</author>
<author>James Linn</author>
<author>Vaidyanathan Nagarajan</author>
<year>2003</year>
<price>49.99</price>
</book>
<book category="web" cover="paperback">
<title lang="en">Learning XML</title>
<author>Erik T. Ray</author>
<year>2003</year>
<price>39.95</price>
</book>
</bookstore> 
```

我认为这个 dom moudle 使用起来非常复杂。最好与其他人一起尝试，例如Python 中的[xml.etree.ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T17:50:25.333

以下工作

```
for i in range(list.getLength()):
    node = list.item(i)
    if node != None and node.getNodeName() == "book":
        children = node.getChildNodes()
        for j in range(children.getLength()):
            print "Looking for J K. Rowling in book"
            child = children.item(j)
            if  child.getNodeName() == "author" and child.getTextContent() == "J K. Rowling":
                print "************"
                print "Found!!!!!"
                print child.getNodeName()
                print node.getTextContent()
                node1= node.getParentNode().removeChild(child.getParentNode()) 
```

# asp.net - 如何只显示数据库中登录的用户数据而不显示其他数据？

> ID：14226044
> 
> 赞同：0
> 
> 时间：2013-01-08T23:45:49.517
> 
> 标签：asp.net, sql-server, database, data-binding, asp.net-membership

当我加载一个网格视图（应该显示该用户的数据）时。但是，当我以用户身份登录并查看网格视图时，它会同时显示当前用户的数据和其他用户的数据。我希望它只显示当前登录用户的数据。

我将如何`userid = convert.toint32(session["userId"].tostring())`检查当前登录用户的用户名并仅显示数据库表中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:07:29.117

只需进行查询即可获取类似的数据

```
"Select * from SomeTable Where UserId = @userId" 
```

然后将参数设置为userid

与根据用户输入进行查询的方式相同。

# google-maps - 我无法让我的 Google 地图可拖动

> ID：14226049
> 
> 赞同：1
> 
> 时间：2013-01-08T23:46:32.303
> 
> 标签：google-maps, google-maps-api-3

感谢您的任何帮助，您可以提供！我是谷歌地图的新手，我正在使用 API V3 中的 RouteOptimize 代码。我正在尝试使生成的路线“可拖动”。下面是我的代码的一部分，但我知道我在方向显示中遗漏了一些简单的东西。

```
var rendererOptions = {
draggable: true
};
var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);;
        var directionsService = new google.maps.DirectionsService();
        var map;

        function initialize() {
          directionsDisplay = new google.maps.DirectionsRenderer({panel:document.getElementById('directions_panel')});
          var chicago = new google.maps.LatLng(41.850033, -87.6500523);
          var mapOptions = {
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: chicago
          }
          map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
          directionsDisplay.setMap(map);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:09:08.263

您缺少[DirectionsRenderer 的可拖动选项](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

```
 var directionsService = new google.maps.DirectionsService();
    var map;
    var directionsDisplay;

    function initialize() {
      var rendererOptions = {
        draggable: true,
        panel:document.getElementById('directions_panel')
      };

      directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
      var chicago = new google.maps.LatLng(41.850033, -87.6500523);
      var mapOptions = {
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: chicago
      }
      map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
      directionsDisplay.setMap(map);
    } 
```

# mysql - 优化多个左连接重复两次的 SQL 查询

> ID：14226050
> 
> 赞同：0
> 
> 时间：2013-01-08T23:46:41.760
> 
> 标签：mysql

如果有人可以就改进以下查询提供建议，这将是最有用的。我不确定当我在许多情况下有两次左连接以分隔表时如何进行改进。例如，我有一个位置左连接到用户表和一个位置左连接到图像库表。我不确定我是否可以从这个角度优化 sql。目前它非常缓慢。我已确保所有列都在所有连接和 where 语句上编入索引。

```
SELECT im.alias_title, im.title,im.guid_id, im.description, im.hits, im.show_comment, im.can_print,
 im.can_download, im.can_share, im.created_on, im.date_taken, im.approved, im.visible,
ad.address_line_1, ad.address_line_2, ad.town_village_city, ad.state_province_county, ad.postal_code, ad.other_address_detail, co.country,
geo.latitude, geo.longitude, geo.zoom, geo.yaw, geo.pitch,
c.make, c.model,
us.first_name, us.surname, uf.user_id, uf.real_name, uf.user_name, uf.gender, uf.description, uf.description, uf.buddy_icon_url, uf.first_taken_date, uf.first_date,
uf.time_zone_label, uf.time_zone_offset,
adf.address_line_1 as user_address_line_1, adf.address_line_2 as user_address_line_2, adf.town_village_city as user_town_village_city, adf.state_province_county as user_state_province_county, 
adf.postal_code as user_postal_code, adf.other_address_detail as user_other_address_detail, cof.country as user_country,
geof.latitude as user_geolocation_latitude, geof.longitude as user_geolocation_longitude, geof.zoom as user_geolocation_zoom, geof.yaw as user_geolocation_yaw, geof.pitch as user_geolocation_pitch,
im.alias_title = in_image_alias_title AS image_selected -- image selected
FROM image im
LEFT JOIN address ad ON im.address_id = ad.id
LEFT JOIN country co ON ad.country_id = co.id
LEFT JOIN geolocation geo ON im.geolocation_id = geo.id
LEFT JOIN camera c ON im.camera_id = c.id
INNER JOIN user us ON im.user_id = us.id
LEFT JOIN user_flickr uf ON us.id = uf.id
LEFT JOIN address adf ON uf.address_id =adf.id
LEFT JOIN country cof ON ad.country_id = cof.id
LEFT JOIN geolocation geof ON uf.geolocation_id = geof.id
WHERE (im.alias_title = in_image_alias_title OR im.user_id = user_id)
AND im.approved = in_image_approved 
AND im.visible = in_image_visible
AND (im.advertise_to <= NOW() OR im.advertise_to IS NULL)
ORDER BY image_selected DESC; 
```

![在此处输入图像描述](../Images/12b6ac8bacb7df6eac1476a9196e36c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:32:30.080

在讨论/聊天室之后，了解更多你想做的事情......

在与 where 子句关联的组件上构建复合索引，以便可以应用所有部分，而不仅仅是第一个关键元素的最佳部分。此外，通过从 where 子句中删除“alias_title”（因为您是根据别名标题获取用户 ID），这是一个多余的子句，在查询中需要更多考虑。

我会索引 (user_id, approved, visible, Advertisement_to )

结果将返回并且在事物方案中很小，因此您的最终“order by”子句对其最终排序输出没有问题。

# ios - 允许横向和纵向但强制应用保持纵向 - iOS

> ID：14226051
> 
> 赞同：1
> 
> 时间：2013-01-08T23:46:46.157
> 
> 标签：ios, xcode, device-orientation, mobfox

我有一个设计为纵向运行的应用程序，一切都很好。但是，我已经实现了 Mobfox 的需要横向模式的 vAd。

目前调用 vAD 时出现以下错误

```
2013-01-08 23:44:05.109 Tv - IOS[1422:907] mobfox video did load
2013-01-08 23:44:05.125 Tv - IOS[1422:907] *** Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation', reason: 'Supported orientations has no common orientation with the application, and shouldAutorotate is returning YES' 
```

所以我认为修复将允许应用程序中的横向。

我需要强制应用程序以纵向运行，但在调用 vAd 时允许横向运行

回顾一下：

我需要在普通应用程序视图期间仅纵向方向和在 mobFox vAd 视图期间的横向/纵向可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T23:49:53.453

返回：`NO`_`shouldAutorotate`

```
-(BOOL)shouldAutorotate {
  return NO;
} 
```

或者，如果`YES`您需要返回`supportedInterfaceOrientations`（至少一个），这里它只允许肖像：

```
- (NSUInteger)supportedInterfaceOrientations{
  return UIInterfaceOrientationMaskPortrait;
  if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
      return UIInterfaceOrientationMaskAll;
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T09:08:41.410

好的，在睡了这个之后，我终于解决了这个问题。

解决方案：我必须继承 UINavigationController 并覆盖自动旋转方法并允许在项目>目标>摘要设置中进行所有旋转

```
- (BOOL)shouldAutorotate {
return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;
}
// pre-iOS 6 support 
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# xml - 使用内容控件将 XML 文件加载到 Word 中

> ID：14226052
> 
> 赞同：1
> 
> 时间：2013-01-08T23:46:47.300
> 
> 标签：xml, ms-word, contentcontrol

我遇到了一种情况，我希望能够将 Word 用作各种查看器，以查看由 XSD 文件定义的 XML 文件。我正在考虑使用内容控件，但找不到将 XML 文件导入 Word 模板的方法（我不希望最终用户必须解压缩 Word、添加 XML 文件等）。有没有办法做到这一点？或者在 VBA 中为 Word 文档编写某种类型的弹出窗口？

或者，有没有比使用内容控件更简单的方法来做到这一点？我知道 XSLT，但我在学习如何使用 XSLT 2.0 时运气不佳。

# php - PHP if 语句被“忽略”，呈现两个选项

> ID：14226054
> 
> 赞同：1
> 
> 时间：2013-01-08T23:46:55.700
> 
> 标签：php, if-statement

所以我对 PHP 非常陌生，可能犯了一个愚蠢的错误。但是，我已经搜索了很长时间，但无法弄清楚出了什么问题。

使用 XAMPP 所有的 PHP 都可以正常工作。但是，当我将它加载到我的 Web 服务器上时，调节登录表单的 if 语句会同时显示“登录”表单和“注销”表单。显然不是我想要的！

这是代码片段：

```
<?php
   if ( isset( $_SESSION['email'] ) ) { // Check to see if user is logged in.  If so, display log out button.
?>
    <form class="navbar-form pull-right" action="logout.php" method="POST">
    <button name="submit" type="submit" class="btn btn-success">Log Out</button>
    </form>
<?php 
   } else { // display log in form
?>
    <form class="navbar-form pull-right" action="login.php" method="POST">
    <input name="email" type="text" class="span2" placeholder="email">
    <input name="password" type="password" class="span2" placeholder="password">
    <button name="submit" type="submit" class="btn btn-success">Log In</button>
    </form>
<?php 
   } 
?> 
```

这包含在文件 index.php 中

基本逻辑是测试是否已为会话创建电子邮件变量（在 login.php 执行中完成）以检查用户是否已登录。

我不知道这是否是创建登录的最佳方式，但这就是我试图做的。

再说一次，我对此很陌生，所以任何关于下一步看哪里的见解都将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T23:51:06.173

查看源代码并确保您的 PHP 代码实际上正在被解释。如果您在浏览器的源代码中看到您的 PHP 标记，那么您的 Web 服务器配置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:52:10.077

尝试

```
if(!empty( $_SESSION['email'] )) 
```

我希望你在一开始就做了 session_start() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:52:51.507

我认为您的 *.php 文件的行为不像 PHP 文件。您应该检查您的网络服务器设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T09:55:42.750

你没用`echo`。可以尝试在没有`echo`声明的情况下显示文本吗？

# clang-complete - 如何接受 clang_complete 匹配？

> ID：14226057
> 
> 赞同：0
> 
> 时间：2013-01-08T23:47:40.433
> 
> 标签：clang-complete

我正在尝试 vim [clang_complete](https://github.com/Rip-Rip/clang_complete/blob/master/doc/clang_complete.txt)插件。一旦我在以下代码片段上键入 Cx Cu，位于`some`下方

```
inline void someSizeChecks()
{
   // ...
}

void foo()
{
   some
} 
```

我得到一个选择菜单，例如：

![完成菜单](../Images/4138e6882aff64928f189ea81f8e125f.png)

Gui 挑战问题：如何在这个粉红色的选择菜单中选择 clang_complete 插件吐出的功能？我尝试了空格、回车、f 和制表符。我也没有在插件文档中看到任何关于如何使用菜单的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:21:53.357

您使用 CTRL-N 和 CTRL-P 选择选项，然后使用 CTRL-Y 选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:46:55.833

它在帮助中：

```
 *g:clang_complete_auto*
If equal to 1, automatically complete after ->, ., ::
Default: 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T22:20:15.757

为了选择由 clang_complete 生成的菜单中的项目，您只需使用**向上**和**向下**键进行选择，最后按**Enter**完成完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T02:46:03.373

此时，您可以使用键盘上的箭头，或使用 Cn 和 Cp 浏览完成结果列表。

# ruby-on-rails - 如何编写任务以重新索引轮胎中的所有 ES 索引？

> ID：14226058
> 
> 赞同：0
> 
> 时间：2013-01-08T23:47:55.253
> 
> 标签：ruby-on-rails, elasticsearch, tire

现在我有：

```
desc "Index Elastic Search"
namespace :tire do
  namespace :import do
    task all: :environment do
      aliases = Tire::Configuration.client.get(Tire::Configuration.url + '/_aliases').body
      indexes_names = MultiJson.load(aliases).keys

      indexes_names.each do |name|
        index = Tire::Index.new name
        index.delete
        index.import
        index.refresh
        puts "[INFO] #{name} re-indexed"
      end
    end
  end
end 
```

但我得到一个错误

```
wrong number of arguments (0 for 1)
/Users/rege/.rvm/gems/ruby-1.9.3-p194@network/gems/tire-0.5.2/lib/tire/index.rb:185:in `import'
/Users/rege/Code/Network/lib/tasks/tire.rake:15:in `block (4 levels) in <top (required)>'
/Users/rege/Code/Network/lib/tasks/tire.rake:12:in `each'
/Users/rege/Code/Network/lib/tasks/tire.rake:12:in `block (3 levels) in <top (required)>'
Tasks: TOP => tire:import:all 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:55:03.323

您需要告诉每个索引要导入什么。假设您使用默认索引命名约定，那么您需要这样做：

```
index.import name.singularize.camelcase.constantize.all 
```

**更新**：鉴于您的命名风格，您可以使用：

```
index.import name.gsub(/^myapp_(development|production)__/, '').singularize.camelcase.constantize.all 
```

# sitecore - 如何防止 sitecore 将 ~ 添加到图像路径？

> ID：14226063
> 
> 赞同：0
> 
> 时间：2013-01-08T23:48:17.317
> 
> 标签：sitecore

我有一个全新安装的 Sitecore 6.5、DMS 2.0 以及电子商务模块和示例站点 (v1.2)。当我安装了示例站点时，大多数图像似乎都损坏了。呈现的 HTML 包含 img src 属性，其中包含以 /~/ 开头的路径。例子：

```
http://~/media/Images/Ecommerce/Examples/Products/Digital%20SLR/D200.ashx?w=250&as=1 
```

现在，我假设这是因为示例站点有一段时间没有更新以保持最新的 Sitecore 更改，或者有一个从中返回的媒体路径的配置。下面是用于编写图像的 XSLT 呈现示例：

```
<img id="product_shot" class="fix" alt="{sc:fld('alt',.)}" title="{sc:fld('alt',.)}" src="/{sc:GetMediaUrl(.)}?w={$ImageWidth}&amp;as=1" /> 
```

有谁知道在使用 XSLT 时防止图像 url 以 ~ 呈现的方法？我的初始设置和配置是否做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T06:41:38.617

约翰韦斯特在这里给出了一个很好的细分：[http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/12/Sitecore-Idiosyncrasies-Media-URLs.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/12/Sitecore-Idiosyncrasies-Media-URLs.aspx)

重要信息是“Media.MediaLinkPrefix”的配置。您可以创建一个补丁文件，或修改您的 Web.config 以将其更改为其他内容。我读过的地方有人把它改成一个破折号“-/媒体”

```
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <settings>
      <setting name="Media.RequestExtension">
        <patch:attribute name="value"></patch:attribute>
      </setting>
      <setting name="Media.MediaLinkPrefix">
        <patch:attribute name="value">-/media</patch:attribute>
      </setting>
    </settings>
    <customHandlers>
      <handler trigger="-/media/" handler="sitecore_media.ashx"/>
    </customHandlers>
  </sitecore>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:13:40.147

我能想到的另一个解决方案是像这样更改您的 web.config：

```
InvalidItemNameChars: Add “~“ 
```

但这不仅适用于图像，还适用于 Sitecore 内容树中的任何内容项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:21:40.640

这更像是一种解决方法而不是解决方案。由于我是出于演示目的进行设置的，所以它会做得很好。

在 web.config 中，我更改了 的值`Media.MediaLinkPrefix`以包含主机名**和**媒体前缀。由于 Sitecore 电子商务示例站点 XSLT 呈现`sc:GetMediaUrl(.)`以一个`/`字符开始所有调用，并且`sc:GetMediaUrl(.)`它本身将其第一个字符返回为 a `/`，这导致 src 属性值被写入完整的主机名，然后正确解析：

`<img src="//sitecore.local/~/media/Images/Ecommerce/Examples/Products/Digital%20SLR/D200.jpg`/>

远非理想，但出于这些目的，这种解决方法起到了作用。

# java - 更改剪贴板内容时调用方法

> ID：14226064
> 
> 赞同：10
> 
> 时间：2013-01-08T23:48:42.713
> 
> 标签：java, clipboard

我正在尝试制作一个应该显示剪贴板内容的小桌面应用程序（如果它是一个字符串）。我已经完成了一个构造函数，它运行良好，现在我只想在将文本复制到操作系统中的剪贴板时调用类似的方法。我对此很陌生，所以任何帮助将不胜感激！有些东西告诉我我应该以某种方式使用中断......

```
package pasty;

import java.awt.FlowLayout;
import java.awt.Toolkit;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class PastyFrame implements KeyListener {

    String currentClipboardString;
    JLabel clipboardLabel = new JLabel();

    public PastyFrame() {
        JFrame frame = new JFrame();
        frame.setVisible(true);

        try {
            currentClipboardString = (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);
        } catch (UnsupportedFlavorException | IOException ex) {
            Logger.getLogger(PastyFrame.class.getName()).log(Level.SEVERE, null, ex);

            currentClipboardString = "";
        }
        if (currentClipboardString.isEmpty()) {
            currentClipboardString = "The clipboard is empty";
        }
        frame.setSize(400, 100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        frame.setLayout(new FlowLayout());

        clipboardLabel.setText(currentClipboardString);
        frame.add(clipboardLabel);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T00:07:15.653

您可以调用[Clipboard.addFlavorListener](http://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/Clipboard.html#addFlavorListener%28java.awt.datatransfer.FlavorListener%29)来监听来自操作系统的剪贴板更新：

```
Toolkit.getDefaultToolkit().getSystemClipboard().addFlavorListener(new FlavorListener() { 
   @Override 
   public void flavorsChanged(FlavorEvent e) {

      System.out.println("ClipBoard UPDATED: " + e.getSource() + " " + e.toString());
   } 
}); 
```

* * *

*一些旁注：*

*   要启动您的应用程序，请考虑使用[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。
*   调用`JFrame.pack`设置帧大小。
*   在 Swing`KeyListeners`中映射优先于[键绑定。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)`KeyEvents`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T00:29:09.803

我用这个。全班。

```
public class ClipBoardListener extends Thread implements ClipboardOwner{
Clipboard sysClip = Toolkit.getDefaultToolkit().getSystemClipboard();  

    @Override
  public void run() {
    Transferable trans = sysClip.getContents(this);  
    TakeOwnership(trans);       

  }  

    @Override
  public void lostOwnership(Clipboard c, Transferable t) {  

  try {  
    ClipBoardListener.sleep(250);  //waiting e.g for loading huge elements like word's etc.
  } catch(Exception e) {  
    System.out.println("Exception: " + e);  
  }  
  Transferable contents = sysClip.getContents(this);  
    try {
        process_clipboard(contents, c);
    } catch (Exception ex) {
        Logger.getLogger(ClipBoardListener.class.getName()).log(Level.SEVERE, null, ex);
    }
  TakeOwnership(contents);

}  

  void TakeOwnership(Transferable t) {  
    sysClip.setContents(t, this);  
  }  

public void process_clipboard(Transferable t, Clipboard c) { //your implementation
    String tempText;
    Transferable trans = t;

    try {
        if (trans != null?trans.isDataFlavorSupported(DataFlavor.stringFlavor):false) {
            tempText = (String) trans.getTransferData(DataFlavor.stringFlavor);
            System.out.println(tempText);  
        }

    } catch (Exception e) {
    }
}

} 
```

当其他程序获得剪贴板的所有权时，它会等待 250 毫秒，然后用更新的内容收回剪贴板的所有权。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-29T20:41:33.127

我想出了另一个解决这个问题的方法：下面的监听器使用循环连续读取剪贴板内容。如果检测到文本，则会将其与剪贴板的先前内容进行比较，该内容被缓存。当剪贴板包含以前未缓存的新文本时，它可能会执行一些操作，如“通知观察者”，如本例所示，这可能会提示 GUI 更新自身。

在此示例中，内容更改（其中剪贴板包含字符串以外的内容）将被忽略。

除了检测内容类型的变化（即通过使用 FlavorListerner）之外，该解决方案还通过连续的字符串比较来检测变化。通过仅读取剪贴板，我希望此代码对其他应用程序的干扰比获取剪贴板的所有权要少。

欢迎提出建议。

```
package gui;

import java.awt.HeadlessException;
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;
import java.util.Arrays;
import java.util.List;
import java.util.Observable;

/**
 * @author Matthias Hinz
 */
class ClipboardTextListener extends Observable implements Runnable {

    Clipboard sysClip = Toolkit.getDefaultToolkit().getSystemClipboard();

    private volatile boolean running = true;

    public void terminate() {
        running = false;
    }

    public void run() {
        System.out.println("Listening to clipboard...");
        // the first output will be when a non-empty text is detected
        String recentContent = "";
        // continuously perform read from clipboard
        while (running) {
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            try {
                // request what kind of data-flavor is supported
                List<DataFlavor> flavors = Arrays.asList(sysClip.getAvailableDataFlavors());
                // this implementation only supports string-flavor
                if (flavors.contains(DataFlavor.stringFlavor)) {
                    String data = (String) sysClip.getData(DataFlavor.stringFlavor);
                    if (!data.equals(recentContent)) {
                        recentContent = data;
                        // Do whatever you want to do when a clipboard change was detected, e.g.:
                        System.out.println("New clipboard text detected: " + data);
                        setChanged();
                        notifyObservers(data);
                    }
                }

            } catch (HeadlessException e1) {
                e1.printStackTrace();
            } catch (UnsupportedFlavorException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        ClipboardTextListener b = new ClipboardTextListener();
        Thread thread = new Thread(b);
        thread.start();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-30T14:55:32.707

下面是一个 SSCCE ...您可以运行它并选择文本并多次按 Ctrl-C ... 选择的文本被打印出来。

正如你所看到的，它比 Reimius 的回答更复杂一些。实际上，您确实必须清除剪贴板（这很棘手！），以便风味侦听器在您每次复制一些新文本时做出响应。

此外，当您清除剪贴板时，您可能需要抑制由“风味变化”引起的输出......尽管可能有比我更聪明的解决方案。

```
public class ClipboardListenerTest {

    public static void main(String[] args) throws InvocationTargetException, InterruptedException {

        SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
                final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
                clipboard.addFlavorListener(new FlavorListener() {
                    // this is needed to prevent output when you clear the clipboard
                    boolean suppressOutput = false;

                    // this is a specially devised Transferable - sole purpose to clear the clipboard
                    Transferable clearingTransferable = new Transferable() {
                        public DataFlavor[] getTransferDataFlavors() {
                            return new DataFlavor[0];
                        }
                        public boolean isDataFlavorSupported(DataFlavor flavor) {
                            return false;
                        }
                        public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException {
                            throw new UnsupportedFlavorException(flavor);
                        }
                    };

                    @Override
                    public void flavorsChanged(FlavorEvent e) {
                        Transferable contentsTransferable = clipboard.getContents(null);
                        // NB the Transferable returned from getContents is NEVER the same as the 
                        // clearing Transferable!

                        if (!suppressOutput) {
                            System.out.println(String.format("# clipboard UPDATED, src %s, string %s, clearingT? %b", e.getSource(), e.toString(),
                                    contentsTransferable == clearingTransferable));
                            try {
                                String stringData = (String)clipboard.getData(DataFlavor.stringFlavor);
                                System.out.println(String.format("# string data |%s|", stringData ));
                            } catch (UnsupportedFlavorException | IOException e1) {
                                // TODO Auto-generated catch block
                                e1.printStackTrace();
                            } 
                        }

                        else {
                            // my experiments seem to show that you have to spawn a new Runnable if you want 
                            // to leave suppressOutput long enough for it to prevent the "CLEAR" operation 
                            // producing output...
                            SwingUtilities.invokeLater(new Runnable() {
                                @Override
                                public void run() {
                                    suppressOutput = false;
                                }
                            });

                        }
                        suppressOutput = true;
                        clipboard.setContents(clearingTransferable, null);
                    }
                });

            }

        });

        int i = 0;
        while (i < 100) {
            Thread.sleep(500L);
            System.out.println("# pibble");
            i++;
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-05T15:53:30.117

FlavorListener 在 MacOS (JRE8) 中不起作用，因此轮询是要走的路。Matthias Hinz 给出了一个没有 Swing 的投票解决方案。这是我的解决方案，它使用 Swing 在 JTextPane 中显示实时剪贴板内容：

```
import java.awt.*;
import java.awt.datatransfer.*;
import javax.swing.*;

public class ClipboardWatcher {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame f = new JFrame(ClipboardWatcher.class.getSimpleName());
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JTextPane tp = new JTextPane();
            tp.setPreferredSize(new Dimension(384, 256));
            f.getContentPane().add(new JScrollPane(tp));
            f.pack();
            f.setVisible(true);

            new Timer(200, e -> {
                Clipboard c = Toolkit.getDefaultToolkit().getSystemClipboard();
                DataFlavor df = DataFlavor.stringFlavor;
                if (c.isDataFlavorAvailable(df)) {
                    try {
                        String data = c.getData(df).toString();
                        if (!data.equals(_lastData))
                            tp.setText(_lastData = data);
                    } catch (Exception ex) {
                        System.err.println(ex);
                    }
                }
            }).start();
        });
    }

    private static String _lastData;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-29T16:50:12.360

Reimeus 推荐使用 Clipboard.AddFlavorListener。我想稍微扩展他的答案。我在我的程序中这样做的方式是这样的：

```
final Clipboard SYSTEM_CLIPBOARD = Toolkit.getDefaultToolkit().getSystemClipboard();

SYSTEM_CLIPBOARD.addFlavorListener(listener -> {

    string clipboardText = (String) SYSTEM_CLIPBOARD.getData(DataFlavor.stringFlavor);

    SYSTEM_CLIPBOARD.setContents(new StringSelection(clipboardText), null);

    System.out.println("The clipboard contains: " + clipboardText);
} 
```

这通过本质上使程序本身成为将文本复制到剪贴板的应用程序，解决了仅在新应用程序将内容复制到剪贴板时才触发侦听器的问题。

需要注意的是，对于每个复制事件，侦听器将被调用两次，但是当然有一些方法可以解决这个问题。至少，在这种情况下，每次将某些内容复制到剪贴板时，都会正确调用剪贴板事件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-20T19:14:29.040

我不完全确定它是否是正确和最佳的方法，但至少它对我来说很好。下面是剪贴板处理程序的示例，它实现剪贴板所有者接口并在每次失去所有权时读取剪贴板缓冲区。然后，当新条目进入剪贴板再次读取它时，它会重新获得所有权，以便能够在下次丢失它时丢失它。它还允许实用地设置剪贴板内容（在以下示例中提供新的标准输入行）。

```
public static class ClipboardHandler implements ClipboardOwner, Runnable {

    private final Logger logger = LoggerFactory.getLogger(getClass());

    private final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
    private final Consumer<String> bufferConsumer;

    public ClipboardHandler(Consumer<String> bufferConsumer) {
        this.bufferConsumer = bufferConsumer;
    }

    @Override
    public void lostOwnership(Clipboard clipboard, Transferable notUsed) {
        Transferable contents = clipboard.getContents(this);
        if (contents.isDataFlavorSupported(DataFlavor.stringFlavor)) {
            try {
                String string = (String) contents.getTransferData(DataFlavor.stringFlavor);
                bufferConsumer.accept(string);
            } catch (Exception e) {
                logger.error("Unable to read clipboard buffer.", e);
            }
        }
        getOwnership(contents);
    }

    @Override
    public void run() {
        Transferable transferable = clipboard.getContents(this);
        getOwnership(transferable);
    }

    public void setBuffer(String buffer) {
        getOwnership(new StringSelection(buffer));
    }

    private void getOwnership(Transferable transferable) {
        clipboard.setContents(transferable, this);
    }

}

public static void main(String[] args) {
    ClipboardHandler clipboardHandler = new ClipboardHandler(System.out::println);
    EventQueue.invokeLater(clipboardHandler);

    Scanner scanner = new Scanner(System.in);
    while (scanner.hasNextLine()) {
        String buffer = scanner.nextLine();
        if (!buffer.trim().isEmpty()) {
            clipboardHandler.setBuffer(buffer);
        }
    }

} 
```

# apache - 'ubd' 进程在端口 80 处干扰 MAMP

> ID：14226066
> 
> 赞同：0
> 
> 时间：2013-01-08T23:48:48.480
> 
> 标签：apache, mamp

几天前，我的 Apache 服务器停止“启动”。有谁知道这个问题。

我相信它现在正在发生，因为我愚蠢地将一个名为的文件移动`index.php`到文件`htdocs/`夹中。

我跑去`lsof -i | grep LISTEN`得到：

```
 mysqld    297 waltercarvalho   10u  IPv4 0xc942753e30142a85      0t0  TCP *:mysql (LISTEN)
    ubd       611 waltercarvalho   18u  IPv4 0xc942753e310c9f35      0t0  TCP *:49228 (LISTEN)
    ubd       611 waltercarvalho   19u  IPv6 0xc942753e2d7a5635      0t0  TCP *:49228 (LISTEN)
    Dropbox   720 waltercarvalho   18u  IPv4 0xc942753e310c90c5      0t0  TCP *:17500 (LISTEN)
    Dropbox   720 waltercarvalho   25u  IPv4 0xc942753e31c584dd      0t0  TCP localhost:26164 (LISTEN) 
```

当我尝试在端口 80 上启动 Apache 服务器以访问`localhost`（干净的方式）时，我得到：

我跑去`sudo /Applications/MAMP/bin/startApache.sh`得到：

```
 (48)Address already in use: make_sock: could not bind to address [::]:80
    (48)Address already in use: make_sock: could not bind to address 0.0.0.0:80
    no listening sockets available, shutting down
    Unable to open logs 
```

这意味着正在使用端口 80。您可以在以下位置找到我的`httpd.conf`文件：

[http://pastebin.com/dta3hND8](http://pastebin.com/dta3hND8)

我已经尝试解决这个问题几个小时了，非常令人沮丧。我已经尝试了一切。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T01:43:36.300

我一直在努力解决这个问题.. 相当肯定它是干扰的保管箱。我找到了一个像魅力一样工作的解决方案，尽管不是烫发修复。我经常运行这个序列。这很烦人，但至少这些步骤是清晰、简单且可预测的！..我拿回了我的 80/3306。

[修复由 Abhinav Sood 提供。](http://www.abhinavsood.com/working-apache-port-80-localhost-in-mamp-or-mamp-pro/)

1.  启动 MAMP。通过在 Spotlight (Command + Space) 中键入终端来打开终端。

2.  打开 MAMP Preferences (Command + , ) 并单击重置 MAMP 端口（Apache 和 MySQL 分别为端口 8888 和端口 8889）。单击确定。

3.  切换到终端。键入`sudo apachectl stop`以关闭系统 Apache。

4.  重新启动 MAMP。

5.  再次打开 MAMP Preferences 并单击 Set to Default Apache and MySQL ports。这会将 Apache 和 MySQL 端口分别设置为 80 和 3306。

6.  切换到终端。键入`sudo apachectl restart`以重新启动 Apache。

7.  切换回 MAMP 并单击打开起始页（或`http://localhost/MAMP/?language=English`在浏览器中转到）

你完成了。

# ios - 如何使用 Authlogic 为 Rails 应用程序实现 API 身份验证

> ID：14226073
> 
> 赞同：1
> 
> 时间：2013-01-08T23:49:30.080
> 
> 标签：ios, ruby-on-rails, api, authentication, authlogic

我有一个带有 iOS 移动客户端的 Rails 应用程序。

到目前为止，我已经让 iPhone 客户端向普通 URL 发送 HTTP 请求。我想用适当的 API 替换它。我在 Rails 3 上，并且正在使用 Authlogic 进行身份验证。

[我已经观看了有关版本化 API 和保护 API](http://railscasts.com/episodes/352-securing-an-api)的 railscasts 。但是由于我已经在使用 authlogic 进行身份验证，我认为重新实现令牌创建是不必要的吗？

正如 Ryan Bates 在[本集中](http://railscasts.com/episodes/350-rest-api-versioning?view=asciicast)建议的那样，我使用 app/controllers/api/v1/ 下的控制器创建了 API。我在views/api/v1 中有与RABL 对应的视图。

我的控制器是

```
module Api
  module V1
    class RecordsController < ApplicationController
      respond_to :json

      def index
        status = RecordStatus.where("name = ?", "processed").first
        @records = current_user.records.where("record_status_id = ?", status.id)
      end

      def show
        @record = Record.find(params[:id])
      end
    end
  end
end 
```

基本上，我已经阅读了很多关于实现不同选项的内容（包括关于 SO 的一堆答案），我真的很困惑什么是我安全地实现身份验证的最佳方式。我应该去oauth吗？我可以用 authlogic 来做吗？哪个选项可以使其在 iOS 端易于使用？哪个选项最容易实施？

任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:18:30.540

也许您可以使用已经在 authlogic 中的单一访问令牌？

[http://rubydoc.info/gems/authlogic/Authlogic/Session/Params](http://rubydoc.info/gems/authlogic/Authlogic/Session/Params)

# perforce - Perforce：保护表顺序

> ID：14226074
> 
> 赞同：3
> 
> 时间：2013-01-08T23:49:41.940
> 
> 标签：perforce

perforce 的保护表中的顺序重要吗？我的意思是如果我有一些写权限然后读然后超级然后再列出然后写然后管理员有关系吗？

```
write       user       *           *       //...
read        user       emily       *       //depot/elm_proj/...
super       user       joe         *       -//...
list        user       lisag       *       -//...
write       user       lisag       *       //depot/elm_proj/doc/...
admin       user       admin       *       //...
=write      user       joe         *       -//depot/build/... 
```

或者它必须像这样系统化：

```
list        user       lisag       *       -//...
read        user       emily       *       //depot/elm_proj/...
write       user       *           *       //...
write       user       lisag       *       //depot/elm_proj/doc/...
=write      user       joe         *       -//depot/build/...
admin       user       admin       *       //...
super       user       joe         *       -//... 
```

我是 perforce 的新手，当我阅读[Administering Perforce: Protections](http://www.perforce.com/perforce/doc.current/manuals/p4sag/04_protect.html)时，我没有看到这里提到的任何关于订购的参考（除非我忽略了某些东西并完全错过了它）。

我收到这个问题是因为考虑 CSS 的工作方式，如果为同一个 html 元素提到了两个条目，那么最后一个条目就是被采取行动的条目。同样，这里与 perforce 保护表也有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:57:14.130

如果您使用的是排除映射，例如上面示例中的仓库路径以“-”字符开头的映射，那么顺序很重要。来自[Perforce 在线文档：](http://www.perforce.com/perforce/r12.2/manuals/cmdref/protect.html)

*当不使用排他性映射时，将授予用户在与用户匹配的所有映射、用户的 IP 地址和用户尝试访问的文件的联合中列出的最高权限级别。在这种情况下，映射的顺序无关紧要。当使用排他性映射时，顺序是相关的：排他性映射会覆盖表中它上面列出的任何匹配保护。无论排他性保护中拒绝何种访问级别，匹配用户、文件和 IP 地址的所有访问级别都将被拒绝。如果您使用排他性映射拒绝 group1 的成员访问 depot 的某个区域，但授予 group2 的成员访问 depot 的同一区域的权限，*

# javascript - Phantomjs page.open 多个 url 变慢

> ID：14226076
> 
> 赞同：3
> 
> 时间：2013-01-08T23:49:49.463
> 
> 标签：javascript, url, webpage, phantomjs

我有一组使用 page.open() 打开的 URL。处理完内容后，我在页面上调用page.release()，然后递归调用该函数打开另一个页面。该网页上有javascript，我测试显示javascript何时加载结果的条件。第一个 page.open() 调用在 1 秒内加载 JS，但所有后续调用大约需要 6 秒。我正在使用 page.release() 并且加载的页面不是空白的，并且 phantomjs 没有崩溃。我想知道为什么会这样。我也尝试过使用 page.close()

```
doAnalysis = function (i) {
    var url = 'http://myurl.com'; 
    page.open(url, function(status) {
         //get html and process it
         page.release();
         doAnalysis(i++);
    });
} 
```

# c++ - 从函数返回“本地”char* 与从函数返回“本地”int* 之间的区别

> ID：14226080
> 
> 赞同：-1
> 
> 时间：2013-01-08T23:49:53.450
> 
> 标签：c++, c, string, heap-memory, stack-memory

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

这是一个简单的代码，其中 3 个不同的函数**[localStrPtr, localIntPtr, localCharPtr]**在各自的函数中返回一个指向它们的局部变量**[string, integer, char]的指针。**

**代码：**

```
#include <stdio.h>

char*  localStrPtr (char*);
int*   localIntPtr (int, int);
char*  localCharPtr (char);

main()
{
    int *pInt;
    char *pChar;

    printf( "localStrPtr = %s\n", localStrPtr("abcd") );

    pInt = (int*) localIntPtr(3, 5);
    printf( "localIntPtr = %d\n", *pInt );

    pChar = (char*) localCharPtr('y');
    printf( "localCharPtr = %c\n", *pChar );
}

char* localStrPtr(char* argu)
{
    char str[20];
    // char* str = (char*) malloc (20);

    strcpy (str, argu);
    return str;
}

int* localIntPtr (int argu1, int argu2)
{
    int local;
    local = argu1 + argu2;
    return (&local);
}

char* localCharPtr (char argu)
{
    char local;
    local = argu;
    return (&local);
} 
```

**编译日志：**

```
stringManip.c: In function `localStrPtr':
stringManip.c:27: warning: function returns address of local variable
stringManip.c: In function `localIntPtr':
stringManip.c:34: warning: function returns address of local variable
stringManip.c: In function `localCharPtr':
stringManip.c:41: warning: function returns address of local variable 
```

**运行日志：**

```
localStrPtr =
localIntPtr = 8
localCharPtr = y 
```

正如您在日志文件中看到的，localStrPtr 返回“一些垃圾”，而 localIntPtr 和 localCharPtr 返回“预期”值。

但是，在函数**localStrPtr**中，如果我更改 [ " **char str[20]** " -to-> " **char* str = (char*) malloc (20)** " ]，localStrPtr 会正确返回字符串 "abcd"。这是运行日志，一旦进行了上述更改。

**新的运行日志：**

```
localStrPtr = abcd
localIntPtr = 8
localCharPtr = y 
```

**问题：**

1.  **在函数 localIntPtr 和 localCharPtr 中，返回的局部变量地址的内容 WORKED，但对于函数 localStrPtr， “仅”**使用 malloc返回正确的值，而不会使用 local char str[20]。为什么它不适用于 str[20] ？

2.  为什么我们在编译日志中看到所有 3 个函数的以下行？

    *   stringManip.c:27：警告：函数返回局部变量的地址
    *   stringManip.c:34：警告：函数返回局部变量的地址
    *   stringManip.c:41：警告：函数返回局部变量的地址

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:59:15.463

未定义的行为，在所有 3 种情况下。该“未定义”包括它可能起作用的可能性。或者看起来它正在工作。有时。

您正在返回一个指向在堆栈上分配的局部变量的指针。当该变量超出范围时，该内存不再保留给该变量，这将是函数返回时。内容是否被改变，以及何时发生，都取决于运气。正如您的情况一样，您很幸运有几个案例，但不是另一个。在不同的一天，编译器可能在内部做出了一些不同的选择，它的行为也不同。或者也许（可能）下次打喷嚏时数据会被覆盖。

不要这样做。

# sql - SQL::Abstract - 将值与列操作匹配

> ID：14226082
> 
> 赞同：0
> 
> 时间：2013-01-08T23:50:18.617
> 
> 标签：sql, perl

使用 SQL::Abstract，我将如何构建这个查询：

```
SELECT * FROM mytable WHERE col1*col2 = 4; 
```

在我的一生中找不到任何关于如何使操作的左侧成为定制的东西而不仅仅是一个列的例子。

我能做的最好的事情是让 SQL::Abstract 传递 col1*col2 并在其周围加上引号，但这会破坏乘法。

**编辑：**最好的解决方案是在左侧进行*任何类型的操作，而不仅仅是乘法示例。*例如，如果我想做一些稍微复杂一点的事情：(col1*col2)-col3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:57:31.070

这能满足您的需要吗？

```
use v5.16;
use warnings;

use SQL::Abstract;

my $sqlab = SQL::Abstract->new;

my ($stmt, @bind) = $sqlab->select('mytable', '*', { '(col1*col2)-col3' => 4 });

use Data::Dump;
dd $stmt;
dd @bind; 
```

**输出**

```
"SELECT * FROM mytable WHERE ( (col1*col2)-col3 = ? )"
4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:01:27.070

文档让我认为这就是你的做法，但我没有尝试过：

```
'col1' => { '*' => { -ident => 'col2' } } 
```

但我不确定您如何将其与 4 进行比较。

# ruby-on-rails - 升级 Rails 版本

> ID：14226083
> 
> 赞同：0
> 
> 时间：2013-01-08T23:50:20.800
> 
> 标签：ruby-on-rails, updates

我知道要更新 Rails，你更新你的版本号，`Gemfile`然后`bundle update`但我感到困惑的是你怎么知道是否有其他任何改变？

我怎么知道是否有要添加的配置选项或其他任何地方。文件或整个目录的内容。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:57:13.887

Rails 升级分为以下几类；

1.  补丁版本升级（例如，3.2.10 到 3.2.11）
2.  次要版本升级（例如，3.1.X 到 3.2.X）
3.  主要版本升级（例如，3.XX 到 4.XX）

### 主要/次要升级

主要和次要版本升级需要大量工作，我强烈建议您留意来自 Peepcode 或 Peter Cook 等人的截屏视频。

有时更容易做 a`rails new`并将所有初始化程序和配置文件复制到应用程序的顶部，然后进行比较以查找更改的内容。

我总是建议一次做一个小版本。

例如，如果您仍在使用 2.3.x，则应先升级到 3.0.x，然后升级到 3.1.x，然后升级到 3.2.x

### 补丁升级

Patch version upgrades are generally simpler (and important since they often include security fixes). Look out for any deprecation notices in your logs, and fix the changes.

Do a Gemfile update, run your tests, and most of the time it'll be fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:54:53.730

这当然取决于您要升级的版本。一般来说，Rails 可以很好地记录您需要在发行说明中更改的内容，例如：[http ://edgeguides.rubyonrails.org/3_2_release_notes.html](http://edgeguides.rubyonrails.org/3_2_release_notes.html)

有时，升级后的弃用通知会对您有所帮助。或者，您可以`rails new`使用全新的应用程序，并将全新应用程序的配置文件与现有应用程序进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T04:15:55.257

The [Railsdiff.org](http://railsdiff.org) site can provide the difference between the contents of a vanilla Rails project (ie as if running `Rails New`) between any two versions of Rails going back to `3.0.0`. I find this particularly useful to determine if there have been any changes to the standard configuration options between versions or if there are new files added/removed from a standard project which you may want to copy over to your existing project.

This won't provide any insight into what has changed in the framework itself, for that you'll need to jump into the change logs for each release. Easiest way to pick them up is check out the [Ruby on Rails blog](http://weblog.rubyonrails.org) which includes notes and links for each released version.

# symfony - 自定义 Symfony 2 错误页面

> ID：14226092
> 
> 赞同：1
> 
> 时间：2013-01-08T23:50:43.567
> 
> 标签：symfony

[我正在尝试按照Symfony 的指南](http://symfony.com/doc/2.0/cookbook/controller/error_pages.html)自定义我的 404、500 和 503 错误页面，但我在尝试这样做时遇到了问题。我创建了一个空`error404.html.twig`并将其放入`\symfony\symfony\src\Symfony\Bundle\TwigBundle\Resources\views\Exception`. 当我查看一个不存在的页面时，我仍然看到默认的错误页面。

我也一直在使用`http://local.store.com/app_prod.php`测试，但我得到一个普通的（无样式浏览器）500 错误页面。我创建了一个`error500.html.twig`并将其放置在`\symfony\symfony\src\Symfony\Bundle\TwigBundle\Resources\views\Exception`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:18:17.607

您的文件似乎不在正确的位置。

要覆盖错误模板，正确的位置是`app/Resources/TwigBundle/views/Exception` 您可能必须创建目录和子目录，因为默认情况下它不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T23:46:26.310

Mrok 已经回答了我的[问题](https://stackoverflow.com/a/11640658/1179449)。

打开`\web\app_dev.php`并修改：

`$kernel = new AppKernel('dev', false);`到

`$kernel = new AppKernel('dev', true);`.

# objective-c - iOS 中的 CVSurf (OpenCV) 功能

> ID：14226095
> 
> 赞同：0
> 
> 时间：2013-01-08T23:50:54.373
> 
> 标签：objective-c, opencv, objective-c++, surf

我对 OpenCV 和 iOS 有疑问。我尝试在我的 Xcode 项目中实现 SURF，但是当我尝试执行它时，会出现以下错误消息：

> OpenCV 错误：在 cvExtractSURF，文件 /Users/alexandershishkov/opencv2.4.3rc/opencv/modules/legacy/src/features2d.cpp，第 77 行 libc++abi 中未实现功能/功能（OpenCV 是在没有 SURF 支持的情况下构建的） .dylib：终止调用抛出异常

我已经从 Github 上的官方存储库和本教程编译了 OpenCV：http: [//docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation)

也许你有个主意……我迷路了。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:05:01.500

您需要在这里阅读我的自我回答问题：

[openCV 2.4.3 iOS 框架编译器无法识别一些 C++ 头文件](https://stackoverflow.com/questions/13905471/opencv-2-4-3-ios-framework-compiler-trouble-recognising-some-c-headers)

引起你注意的一点可能是 SURF 已被转移到非免费（因为它有许可问题）。所以你需要：

```
#include <opencv2/nonfree/nonfree.hpp>
#include <opencv2/legacy/compat.hpp> 
```

并且可能

```
 cv::initModule_nonfree(); 
```

如果您使用的是较旧的 C 接口

如果您希望坚持使用开放许可的标准 openCV 库，可以使用 SURF 的替代方案...

# soundcloud - 如果禁用了歌曲下载，经过身份验证的第 3 方应用程序是否仍可以使用下载 URL 来抓取曲目？

> ID：14226101
> 
> 赞同：3
> 
> 时间：2013-01-08T23:51:14.500
> 
> 标签：soundcloud

我正在尝试使用 Ruby on Rails 创建一个应用程序，该应用程序允许用户下载他们上传的所有歌曲。在这一点上，我已经使用 OmniAuth 对用户进行了身份验证，并且我已经设法使用 Soundcloud 的 Ruby[接口](https://github.com/soundcloud/soundcloud-ruby)和他们的 API 提取了一些数据。

根据[API](http://developers.soundcloud.com/docs/api/reference#tracks)，每首曲目都有一个关联的标题、artifact_url 和 download_url（我已经使用 API 获取了这些信息）。我想显示每首歌曲的标题和插图（如果有的话），然后如果他们选择下载该曲目，他们将能够单击一个按钮并从 download_url 下载该曲目。

所以这就是我所意识到的：对于大多数曲目（或声音，因为它们在 Soundcloud 中被称为），默认情况下在您上传时禁用下载。问题是，还有一个选项显示“应用程序已启用/已禁用”。我想知道的是，如果禁用下载歌曲，经过身份验证的第 3 方应用程序是否仍可以使用下载 URL 来抓取曲目？我想知道用户是否需要单独浏览所有曲目并启用下载才能使其正常工作。

如果您需要更多详细信息，请说出来。抱歉，如果这是一个明显的问题。

谢谢，

纳特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:29:26.290

> 我想知道的是，如果禁用下载歌曲，经过身份验证的第 3 方应用程序是否仍可以使用下载 URL 来抓取曲目？

是的，它可以。但是，请注意，为了让 API 实际提供文件，必须有一个 HTTP 授权标头和 client_id GET 参数。

这意味着简单地吐出像这样的链接

```
<a href="https://api.soundcloud.com/tracks/{id}/download">Download {title}</a> 
```

不会有帮助的。至于，`client_id`您可以简单地将其附加到`href`可公开下载。

因此，您需要在 ruby​​ 中构建一个代理，并将`href`s 设置为本地端点，并在 ruby​​ 端处理与 SoundCloud API 的连接，这样您就可以使用 OAuth 令牌传递 HTTP 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T07:02:56.733

向调用“/convert”路由的 API 发出 HTTP 请求 (Get) 将返回您的轨道 ID。

然后，您可以向 API '/stream' 发出 POST 请求，传递轨道 ID 和 ?client_id=YOURCLIENTID

从响应中，您可以获得流 url，可用于流式传输和下载 Soundcloud 中的每个轨道。后一种选择实际上并不合法，因此以所有这些为例。

编辑：这可以用纯 JS/jQuery 完成，不需要运行服务器

# javascript - 为什么这个幻灯片代码不起作用？

> ID：14226104
> 
> 赞同：0
> 
> 时间：2013-01-08T23:51:40.267
> 
> 标签：javascript

```
<img id="slideshow" src="4.png" alt="image" width="264" height="264"/>
<script>
    source=["1.jpg", "2.JPG", "3.JPG"];
    for (var i=0; i<source.length; i++)
    {
        document.getElementById("slideshow").src = source[i];
    }
</script> 
```

不太明白为什么这不起作用，我意识到这会在图像上停止，我认为至少是这样，但它没有显示任何图像。

任何帮助都会非常感谢。

```
 <img id="slideshow" src="4.png" alt="image" width="264" height="264"/>
            <script>
            source=["1.jpg", "2.JPG", "3.JPG"];
            var i=0;
            var c=0;
            while (i<=0)
            {
            if (c<source.length)
            document.getElementById("slideshow").src = source[c];
            c++;
            else
            c=0;
            }
            </script> 
```

任何想法如何让它在每个来源上停止然后重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:53:03.417

您的代码中有错字：

```
for (var i=0; i<source.lenth; i++)
                       ~~~~~
                       ^ 
```

应该`length`不是`lenth`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:49:01.887

问题是浏览器在不重新渲染页面的情况下执行 JavaScript 片段。所以你实际上改变了 src，但是浏览器没有显示任何动画，因为它只是显示结束时的状态。

要创建动画，使用 window.setTimeout()。

`for`您可以更改函数中的，而不是循环（`while`等），`src`然后使用它`window.setTimeout()`来调用相同的函数。

喜欢，

```
var num = 0;

function foo(){
    num = ++num % 4;
    document.getElementById("image").src = "image"+num+".jpg"
    window.setTimeout("foo()", 300);
} 
```

提示：

1.  尝试建立在它之上的 jQuery 和库。

2.  在 Firefox 中安装 Firebug 插件并调试 Javascript 以查看发生了什么。

# android - Resources$NotFoundException when trying to load animation

> ID：14226106
> 
> 赞同：4
> 
> 时间：2013-01-08T23:51:44.990
> 
> 标签：android

Our app on Google Play market has a weird exception being thrown on some devices. I see the following stack trace:

```
android.content.res.Resources$NotFoundException: File res/anim/ani_in_fade.xml from xml type anim resource ID #0x7f040000
   at android.content.res.Resources.loadXmlResourceParser(Resources.java:2185)
   at android.content.res.Resources.loadXmlResourceParser(Resources.java:2140)
   at android.content.res.Resources.getAnimation(Resources.java:894)
   at android.view.animation.AnimationUtils.loadAnimation(AnimationUtils.java:71)
   .... 
```

Basically, all the animations are in place in the res/anim folder. Most of the devices load and display them without a problem.

Any ideas what may be the reason for this? One of the ideas I have is that activity is being (or has been) destroyed at the point we try to load the resource, however the context is not null at that point of time...

Thanks,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:19:28.863

Just in case anyone hits this problem... You need to update your proguard.cfg file and add the following lines:

```
-keepclassmembers class **.R$* {
       public static <fields>; 
} 
```

# ruby-on-rails-3.1 - devise_invitable 路由错误

> ID：14226107
> 
> 赞同：0
> 
> 时间：2013-01-08T23:51:54.350
> 
> 标签：ruby-on-rails-3.1, devise, devise-invitable

错误：

```
Started GET "/users/invitation/new" for 127.0.0.1 at 2013-01-09 01:00:31 +0100
  Processing by Devise::InvitationsController#new as HTML
  User Load (451.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
Rendered users/invitations/new.html.erb within layouts/application (69.2ms)
Rendered layouts/_google_analytics.html.erb (0.4ms)
Rendered layouts/_navbar.html.erb (73.6ms)
Completed 500 Internal Server Error in 10785ms

ActionView::Template::Error (No route matches {:controller=>"devise/dashboards", :action=>"show"}):
    23:         </ul>
    24:         <ul class="nav pull-right" id="main-menu-right">
    25:             <% if user_signed_in? %>
    26:                 <li><%= link_to raw("My Agenda"), {:controller => :dashboards, :action => :show}, :tabindex => "-1" %></li>
    27:                 <li><%= link_to raw("My Services"), {:controller => :creative_services, :action => :index_my_services}, :tabindex => "-1" %></li>
    28:                 <li id="fat-menu" class="dropdown">
    29:                   <a href="#" id="dropUser" role="button" class="dropdown-toggle" data-toggle="dropdown">
  app/views/layouts/_navbar.html.erb:26:in `_app_views_layouts__navbar_html_erb__952134567516339951_70121556350080'
  app/views/layouts/application.html.erb:18:in `_app_views_layouts_application_html_erb___2663940439779075013_70121556359600' 
```

在我的 Rails 3.1 项目中，我已经使用了 Devise。

我在我的 Gemfile 中添加了 devise_invitable gem：

```
gem "devise", "~> 2.0.0"
gem 'devise_invitable', '~> 1.0.0' 
```

运行这些命令

```
rails generate devise_invitable:install
rails generate devise_invitable User
rake db:migrate
rails generate devise_invitable:views users 
```

在 Devise.rb 中设置选项（无限邀请

```
config.invitation_limit = 
```

并启动我的服务器。

当我尝试访问 /users/invitation/new

我收到路由错误

```
Routing Error

No route matches {:controller=>"devise/dashboards", :action=>"show"} 
```

在我的用户模型中：

```
devise :invitable, :database_authenticatable, :registerable, :confirmable,
     :recoverable, :rememberable, :trackable, :validatable, :invitable 
```

我的路线文件：

```
devise_for :users, :controllers => { :registrations => 'registrations' } 
```

如何解决此路由问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:13:28.323

解决方法在这里找到[了设计路由错误 {:controller=>"devise/static", :action=>"about"}](https://stackoverflow.com/questions/8474537/routing-error-with-devise-controller-devise-static-action-about)

更改了我的链接：

```
26:  <li><%= link_to raw("My Agenda"), {:controller => :dashboards, :action => :show}, :tabindex => "-1" %></li>
27:  <li><%= link_to raw("My Services"), {:controller => :creative_services, :action => :index_my_services}, :tabindex => "-1" %></li> 
```

至：

```
<li><%= link_to raw("My Agenda"), "/dashboards/show", :tabindex => "-1" %></li>
<li><%= link_to raw("My Services"), "/creative_services/index_my_services", :tabindex => "-1" %></li> 
```

“然后一切正常”

# css - 移动 Safari 前导/行高问题（使用@font-face）

> ID：14226112
> 
> 赞同：1
> 
> 时间：2013-01-08T23:52:18.477
> 
> 标签：css, mobile-safari, font-face

我正在开发一个响应式网站，但我自己没有移动设备。（仍然生活在黑暗时代）无论如何，我的同事给我发了一张 ipad 上网站的屏幕截图。

前导/行高很糟糕，但在常规 Safari 中看起来不错。这是一些相关的（我认为）CSS：

```
@font-face {font-family: 'Rubrik-Regular';src: url('fonts/237360_5_0.eot');src: url('fonts/237360_5_0.eot?#iefix') format('embedded-opentype'),url('fonts/237360_5_0.woff') format('woff'),url('fonts/237360_5_0.ttf') format('truetype'); font-style: normal; font-weight: normal; }
@font-face {font-family: 'Rubrik-Medium';src: url('fonts/237360_6_0.eot');src: url('fonts/237360_6_0.eot?#iefix') format('embedded-opentype'),url('fonts/237360_6_0.woff') format('woff'),url('fonts/237360_6_0.ttf') format('truetype'); font-style: normal; font-weight: bold; }
@font-face {font-family: 'Rubrik-Bold';src: url('fonts/237360_7_0.eot');src: url('fonts/237360_7_0.eot?#iefix') format('embedded-opentype'),url('fonts/237360_7_0.woff') format('woff'),url('fonts/237360_7_0.ttf') format('truetype'); font-style: normal; font-weight: bold; }

html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;} 

html{font-size:81.25%;-webkit-text-size-adjust:81.25%;-ms-text-size-adjust:81.25%}  /* shrink to ~13px body font without changing all other sizes */
/* 16px base font size with 162.5% (26px) line height */
body, button, input, select, textarea { font: 1em/1.6154em 'Rubrik-Regular', Arial, Verdana, sans-serif; color: #262626; } 
```

这是一个并排的比较：

![移动与桌面 Safari](../Images/743168cc1862bd49fa84effcbeea4300.png)

[现场演示链接](http://client.kathyisawesome.com/seattle-art-museum/)

为什么不尊重行高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:29:22.977

这似乎已经解决了它：

```
html{ font-size: 16px; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%} 
```

我错误地试图像这样调整字体大小：

```
html{ font-size: 82.5%; -webkit-text-size-adjust:82.5%; -ms-text-size-adjust:82.5%} 
```

尺寸调整参数偷偷地扼杀了我在移动设备上的排版。

# php - PDO 选择在哪里

> ID：14226113
> 
> 赞同：0
> 
> 时间：2013-01-08T23:52:19.057
> 
> 标签：php

我是 PHP 和 mysql 的新手，我在这里尝试一些东西。在我的 HTML 中，我有一个表单，我在其中输入里程，然后将其传递给 PHP 代码并转换为整数。然后我想拿它并检查数据库以隔离我想要的记录，以便我可以进行一些计算。换句话说，如果输入的里程数（我将它保存在一个名为 $term 的变量中）小于或等于表中的一个里程数，我想使用符合此条件的记录。例如，我输入 45 英里，表中有 40 英里和 50 英里的记录，我想选择 50 英里的水平。如果用户输入 51，我想使用 50 级别。像这样的东西。

它很好地连接到数据库，但我不确定如何在 foreach 语句中构造它。我有以下内容：

```
$term = (int)$_POST['term'];

try {
    $dbh = new PDO("mysql:host=$hostname;dbname=ratetable", $username, $password);

    /*** The SQL SELECT statement ***/
    $sql = "SELECT * FROM rates WHERE mileage<=term";
    foreach ($dbh->query($sql) as $row)
        {
        print $row['mileage'] .' - '. $row['ratepermile'] . '<br />';
        }

    /*** close the database connection ***/
    $dbh = null;
} 
```

当我这样做时，我得到一个为 foreach() 提供的无效参数。

然后我开始环顾四周，看到如下语句：

```
$stmt = $db->prepare( 'SELECT * FROM rates WHERE mileage<=:term' ); 
```

传递搜索参数的位置等等。

所以现在我很困惑正确的方法是在数据库中的里程升序列表中选择一条满足条件的记录（最后一个匹配的记录与所有匹配的记录）或如何正确构造 WHERE 参数。有什么建议么？

谢谢你的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:00:12.187

您需要做的是将`WHERE`子句与`ORDER BY`and`LIMIT`子句结合使用。例如，要获得小于或等于给定搜索条件的最大值，您可以执行以下操作：

```
SELECT * FROM rates
WHERE mileage <= ?
ORDER BY mileage DESC
LIMIT 1 
```

要获得大于或等于给定搜索值的最小值，请执行以下操作：

```
SELECT * FROM rates
WHERE mileage >= ?
ORDER BY mileage ASC
LIMIT 1 
```

至于做实际的 PDO，你会做这样的事情：

```
$stmt = $dbh->prepare('SELECT * FROM rates WHERE mileage <= ? ORDER BY mileage DESC LIMIT 1');
$stmt->execute(array($term));
$row_object = $stmt->fetchObject(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:03:24.910

```
$sql = "SELECT * FROM rates WHERE mileage<=term"; 
```

这意味着从列里程 <= 列术语的费率中选择 *。我认为您没有列术语，因为它应该是一个参数。

你看看参数是对的。代码应该是这样的：

```
$term = 150;
$sth = $db->prepare('SELECT * FROM rates WHERE mileage<=?');
$sth->execute(array($term)); 
```

要仅获取一条记录，您应该按列排序并仅获取 LIMIT 1

```
$term = 150;
$sth = $db->prepare('SELECT * FROM rates WHERE mileage<=? ORDER BY mileage DESC LIMIT 1');
$sth->execute(array($term)); 
```

因为你只想要 1 行，你可以做一个 $result=$sth->fetchColumn(); 而不是 foreach。

# asp.net - ASP.net：动态创建的 DropDownLists 的复杂验证

> ID：14226115
> 
> 赞同：1
> 
> 时间：2013-01-08T23:52:30.850
> 
> 标签：asp.net, c#-4.0, webforms, asp.net-webcontrol

我有一个`GridView`带有记录的数据库。

`DropDown`我为每个选定的项目动态创建两个列表。这意味着，如果我单击选择，`DropDown`将出现两个列表，第一个定义开始位置，第二个定义停止位置。两者都包括数字*（取决于我选择了多少项目）*。如果我选择了 5 个项目，`DropBox`则所有控件都包含值 1 - 5。一切都由后面的代码完成。

现在我想验证这一点。停止`Control`应设置为较高的作为启动控制。此外，已经使用的每个*区域*都不允许用于下一个控件。例如。如果我在第一对`DropDown`列表中选择区域 1-5，我将无法使用下一对控件选择 2-6。

我怎样才能做到这一点。我想过，`javascript`但这可能非常棘手，因为一切都是通过代码完成的。`validation controls`很好，但我不知道如何验证如此复杂的事情......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:06:34.810

谢谢您的回答！我不会每次都进行异步回发，尤其是因为在更改期间不应限制列表。我以这种方式解决了它：用户单击保存，我为每个下拉项创建一个 bool 数组，然后循环遍历占位符中的所有下拉列表。如果有 3 - 5 的区域，我将 bool 数组中索引为 3-5 的值设置为 true。如果这些值之一已经为真，则必须在开始/停止位置选择错误。我认为，这不是一个很好的方法，但运行速度非常快，并且可以完成我想要的一切。如果有人有更好的主意，请告诉我... ;)

谢谢！斯特凡

# php - Git 和混淆代码

> ID：14226126
> 
> 赞同：0
> 
> 时间：2013-01-08T23:53:41.873
> 
> 标签：php, git, obfuscation

我一直在研究一个想法，并且需要通过某人来运行它，看看我是否已经走到了尽头。

我正在开发一个相当复杂的 PHP 项目，我是唯一的开发人员。我们正在寻找其他人来帮助进行编程工作，但不希望他们在第一天就看到所有内容。“核心架构”和“非核心”之间有一条非常清晰的界线。我希望新人能够阅读和修改“非核心”部分。非核心部分需要核心部分才能工作。

我的计划是这样的：

1.  使核心和非核心部分分开 git 存储库
2.  使核心部分成为非核心的子模块
3.  向核心存储库添加一个提交后挂钩，以运行代码混淆

然后当子模块更新时，文件将执行，但将非常难以阅读。

#1 和 #2 很简单。但是＃3...我不知道它是否可以完成。我正在研究 git 内部结构，以查看文件的实际存储方式，但似乎它们只是存储在文件系统中。因此，没有任何方法可以编辑它们并添加混淆而不完全破坏“好”副本。话虽如此，我总是可以在那里菊花链另一个回购。

良好的回购 -> 核心回购（带有混淆） -> 非核心

我只是想知道是否有更清洁的方法来做到这一点。

* * *

只是另一个想法，但我无法使用混淆代码的存储库。而是让 git commit 钩子调用脚本来复制和混淆核心代码并将其放置在非核心存储库中。添加 .getignore 以便该文件夹不属于非核心代码库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:59:29.450

将您的核心功能公开为 Web 服务并通过 HTTP 访问它们。将非核心位保留在存储库中。

# java - 使用 Matlab 进行 HTTP 发布

> ID：14226128
> 
> 赞同：1
> 
> 时间：2013-01-08T23:54:02.937
> 
> 标签：java, http, matlab

我遵循了这篇文章中给出的示例：[如何将数据从 Matlab 发送到 Rails](https://stackoverflow.com/questions/11064979/how-to-send-data-from-matlab-to-rails)，但收到一条错误消息，我找不到任何信息。我的脚本如下所示：

```
javaaddpath('./httpcomponents/httpclient-4.2.2.jar')
javaaddpath('./httpcomponents/httpcore-4.2.2.jar')

import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;

httpclient = DefaultHttpClient();

httppost = HttpPost('http://localhost:3000/signin');
httppost.addHeader('Content-Type','application/json');
httppost.addHeader('Accept','application/json');

tokenRequest = StringEntity('{"session", "{email_address:""email@aol.com,""password:""password""}"}');
httppost.setEntity(tokenRequest);

response = httpclient.execute(httppost); 
```

在最后一行，我收到错误：

*发生 Java 异常：java.lang.VerifyError：无法从最终类继承*

从网上搜索，我得知这是一个软件版本问题。我尝试使用这些文件的 4.2 版本（与另一篇文章中使用的相同），但我收到了同样的错误。有谁知道可能出了什么问题？或者知道一种方法可以在不使用这些外部库的情况下做我想做的事情？

编辑：

最初我尝试使用此代码：

```
tokenRequest = {'session', '{''email_address'':''email@aol.com'',''password'':''password''}'};
token = urlread('http://localhost:3000/signin','POST',tokenRequest); 
```

但我收到了 NoMethodError 导致我转到其他帖子：

```
NoMethodError (undefined method `each' for "{'email_address':'email@aol.com','password':'password'}":String):
     app/models/session.rb:14:in `initialize' 
```

我认为它抛出此错误的原因是因为服务器认为它正在接收一个没有每个方法的 String 对象。我假设我会通过使用 'Content-Type' 参数来指定它的 json. 有没有办法使用 urlread 做到这一点？

编辑：java libs 问题的完整堆栈跟踪

```
Java exception occurred:
java.lang.VerifyError: Cannot inherit from final class

at java.lang.ClassLoader.defineClass1(Native Method)

at java.lang.ClassLoader.defineClass(Unknown Source)

at java.security.SecureClassLoader.defineClass(Unknown Source)

at java.net.URLClassLoader.defineClass(Unknown Source)

at java.net.URLClassLoader.access$000(Unknown Source)

at java.net.URLClassLoader$1.run(Unknown Source)

at java.security.AccessController.doPrivileged(Native Method)

at java.net.URLClassLoader.findClass(Unknown Source)

at com.mathworks.jmi.CustomURLClassLoader.findClass(ClassLoaderManager.java:760)

at java.lang.ClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClassInternal(Unknown Source)

at org.apache.http.impl.client.DefaultHttpClient.createHttpParams(DefaultHttpClient.java:157)

at  org.apache.http.impl.client.AbstractHttpClient.getParams(AbstractHttpClient.java:448)

at org.apache.http.impl.client.AbstractHttpClient.createClientConnectionManager(AbstractHttpClient.java:309)

at org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:466)

at org.apache.http.impl.client.AbstractHttpClient.createHttpContext(AbstractHttpClient.java:286)

at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:851)

at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)

at
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:45:54.027

看起来正在发送的数据没有被正确引用。最终结果应该是

```
{'email_address':'email@aol.com','password':'password'} 
```

尝试将代码更改为

```
tokenRequest = StringEntity('{"session", {"email_address":"email@aol.com","password":"password"}}'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:05:21.307

[urlread2](http://www.mathworks.com/matlabcentral/fileexchange/35693-urlread2)原来是一个更好的解决方案。这段代码完成了这项工作：

```
tokenRequest = '{ "session" : { "email_address": "email@aol.com", "password": "password" } }';
header = http_createHeader('Content-Type','application/json');
token = urlread2('http://localhost:3000/signin.json','POST',tokenRequest,header); 
```

# ruby-on-rails - 何时使用属性哈希

> ID：14226130
> 
> 赞同：1
> 
> 时间：2013-01-08T23:54:10.493
> 
> 标签：ruby-on-rails

在这个 SO 答案中[未定义的方法 `stringify_keys!' ruby on rails](https://stackoverflow.com/questions/1815697/undefined-method-stringify-keys-ruby-on-rails)，OP 尝试创建一个带有“Honda”字符串的新汽车对象

```
 @car = Car.new(params[:car]) 
```

并得到一个字符串化键错误。回答的人说他必须在创建对象时指定表中的列（在本例中为“名称”列），

```
create expects to get an attributes hash and to stringify it's keys for the column names.

If you have a column named name in your cars table then try this:

@car = Car.new(:name => params[:car]) 
```

但是，我正在观看 RailsCast，其中 Rbates 创建了一个条目表，其中包含“name”字符串和一个列“winner”作为布尔值。在他的控制器（他设置为使用 json 响应）中，他不使用属性哈希。他的创造动作

```
 def create
     respond_with Entry.create(params[:entry])
   end 
```

为什么 Rbates 不必使用属性散列，如果他可以，属性散列会是什么样子？像这样的东西？您是否必须命名每一列，在 ryans 的情况下：name 和 :winner？

```
 def create
     respond_with Entry.create(:name => params[:entry][:name], :winner => params[:entry]     [:winner]
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:01:23.637

这完全取决于`params[:car]`包含的内容。在 Railscast 示例中，`params[:car]`是一个包含两个条目（`name`和`winner`）的 Hash。在另一个 SO 问题中，它看起来像是`params[:car]`一个包含汽车名称的字符串。

Car.new 将始终期望一个哈希。如果你想传递一个值，你需要把它变成一个散列，用一个告诉 Car.new 你传递什么值的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:59:37.703

在上一个问题中， params[:car] 是一个字符串。Rails`new`和`create`方法都需要哈希，这就是为什么代码被修改为传入`:name => params[:car]`

如果你使用 Rails 的 form_for 来构建你的表单，params[:model_name] 将有一个哈希值，它的键匹配模型属性。在这种情况下，不需要自定义工作，只需使用 params[:model_name] 初始化模型即可。

# ajax - Webapp2和POST请求后消失的会话

> ID：14226131
> 
> 赞同：0
> 
> 时间：2013-01-08T23:54:13.420
> 
> 标签：ajax, google-app-engine, session, webapp2

Appengine 1.7.4、webapp2、会话。

会话配置如文档中所示：[http ://webapp-improved.appspot.com/api/webapp2_extras/sessions.html#webapp2_extras.sessions.SessionStore](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html#webapp2_extras.sessions.SessionStore)

```
# Some object
def post(self):
    logging.error(self.session.get('cart')) #A 1 item

    if '_put' in self.request.params:
        return self.put()

    cart = self.session.get('cart')
    # add one item to cart
    self.session['cart'] = cart

    logging.error(self.session.get('cart')) #B OK, 2 items
    return self.redirect(URL)

def put(self):
    logging.error(self.session.get('cart')) #C 1 item?!
    # some code
    return self.redirect(URL) 
```

AJAX 发送的两个 POST 请求。

```
First without _put
- #A - returns 1 item - OK.
- #B - returns 2 items - OK.

Second, POST with _put.
- #A - returns 1 item - why? session was changed?
- #C - as above 
```

请求一个一个执行（用户点击一次，两个请求）。任何想法为什么会发生这种情况？

如果我只运行第一个请求（没有 _put）并刷新页面 - 会话被正确保存。

从 webapp (1.x) 和 Python 2.5 迁移后出现问题。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:55:57.963

这两个请求之间有多少时间？少于 1 或 2 秒？那么你可能在这里有一个竞争条件：

1.  请求。1 读取会话
2.  请求。2 读取会话
3.  请求。1 保存其会话
4.  请求。2 保存会话

==> 需求的变化。1 丢失。请注意（由于 appengine 的分布式架构）即使**在**请求本身完成之后也可能发生“保存”！

# hibernate - 在 playframework 中使用 hibernate 4.1.7 和 c3p0

> ID：14226135
> 
> 赞同：0
> 
> 时间：2013-01-08T23:54:29.823
> 
> 标签：hibernate, jpa, playframework-2.0, classpath, c3p0

我有一个游戏应用程序（play 2.0.4），它使用 Java jar 来完成所有与数据库相关的工作（JPA/Hibernate 4.1.7/PostgreSQL）。一切都很好，直到我意识到我正在使用默认连接池，并且我偶尔会收到似乎是由此导致的错误，所以我切换到 c3p0。当我这样做时，将新 jar 复制到 play 中，我得到以下异常：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[ExceptionInInitializerError: null]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.4]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.4]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.4]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.lang.ExceptionInInitializerError: null
    at models.AuthenticatedUser$.auth(AuthenticatedUser.scala:67) ~[classes/:na]
    at controllers.Application$$anonfun$2.apply(Application.scala:25) ~[classes/:na]
    at controllers.Application$$anonfun$2.apply(Application.scala:24) ~[classes/:na]
    at play.api.data.Mapping$$anonfun$verifying$2.apply(Form.scala:452) ~[play_2.9.1.jar:2.0.4]
    at play.api.data.Mapping$$anonfun$verifying$2.apply(Form.scala:451) ~[play_2.9.1.jar:2.0.4]
    at play.api.data.validation.Constraint.apply(Validation.scala:21) ~[play_2.9.1.jar:2.0.4]
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: persistenceUnit] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:901) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6-Final]
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6-Final]
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63) ~[hibernate-jpa-2.0-api.jar:1.0.1.Final]
    at com.xonami.rest.db.EMFactory.<clinit>(EMFactory.java:29) ~[xonami-api-0.2-SNAPSHOT.jar:na]
    at models.AuthenticatedUser$.auth(AuthenticatedUser.scala:67) ~[classes/:na]
    at controllers.Application$$anonfun$2.apply(Application.scala:25) ~[classes/:na]
Caused by: org.hibernate.HibernateException: Could not instantiate connection provider: org.hibernate.connection.C3P0ConnectionProvider
    at org.hibernate.connection.ConnectionProviderFactory.initializeConnectionProviderFromConfig(ConnectionProviderFactory.java:178) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:102) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
    at org.hibernate.ejb.InjectionSettingsFactory.createConnectionProvider(InjectionSettingsFactory.java:51) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6-Final]
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final]
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final] 
```

我已经尝试在 play libs 文件夹中包含 hibernate 和 c3p0 jar，但无济于事（尽管我认为我正在将它们构建到我的 jar 中）。我猜也许 play 有一个旧版本的 c3p0，它是类路径中的第一个？我可以拿出来吗？如何？还有什么可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:17:45.173

根据您的日志，我认为您忘记添加`hibernate-c3p0`依赖项，可以通过编辑`project/Build.scala`文件来添加：

```
val appDependencies = Seq(
    "org.hibernate" % "hibernate-c3p0" % "4.1.7.Final"
    ...
  ) 
```

或者你也可以把它放到你的`lib`文件夹中。

# java - 同步不进

> ID：14226136
> 
> 赞同：1
> 
> 时间：2013-01-08T23:54:32.320
> 
> 标签：java, android, synchronized, mutual-exclusion

注意：我不是在寻找解决方法；我敢肯定，如果有必要，我可以找到其他方法。我只是觉得我错过了一些基本的或古怪的东西，我想知道我错过了什么。或者，如果有一种方法可以使用调试器来获取更多信息，那也很好。谢谢！

我在使用同步时遇到问题。我收到了僵局，但这似乎完全不可能。我在每个同步调用之前、每个调用内部以及退出之前都放置了打印语句，这样我就可以看到谁拥有哪些同步对象。我发现即使当前没有人持有该对象的锁，它也不会进入我的同步调用之一。是否有一些我遗漏的怪癖或非法嵌套操作？这是我正在做的事情的要点。

哦，是的，最奇怪的是，删除两个“busyFlagObject”同步使它工作正常......

线程 1：

```
public void DrawFunction()
{
    synchronized(drawObject)
    {
        ...
        // Hangs here though nobody has a lock on this object
        synchronized(animationObject)
        {

        }
    }
} 
```

线程 2：

```
public void AnotherFunction()
{
    synchronized(busyFlagObject)
    {
        // Calls a function that also uses this same Synchronized call
        synchronized(busyFlagObject)
        {
            // Calls another function that uses another Synchronized call
            // Hangs here waiting for the draw function to complete which it SHOULD 
            // be able to do no problem.
            synchronized(drawObject)
            {

            }

            // Never gets to this one assuming the Log statements don't 
            // buffer and aren't flushed but still shouldn't be a problem anyway.
            synchronized(animationObject)
            {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:09:19.140

在调试器下运行您的应用程序或使用 JDK 工具中的“jstack”。这将直接向您显示哪些线程等待锁以及哪些持有锁，因此我们不必猜测您的问题出在哪里:-)

也就是说，您提到您在布尔值上同步。请记住，该类仅具有两个实例，并且许多事情（尤其是装箱）会隐式地将您的布尔实例更改为“共享”值。你确定你的锁对象不是同一个实例吗？您可以考虑使用`new Object()`作为您的监控对象。

It's worth noting that this [isn't the only place that this can happen](http://www.docjar.com/html/api/java/lang/Integer.java.html#581) and there's a good entry on this problem in Java Concurrency in Practice, specifically with [string interning](http://en.wikipedia.org/wiki/String_interning), that I'm failing to find a link to at the moment. Don't use a type that isn't under your control as something it wasn't intended to do :-)

# vim - vim ctrl-O 跳转到文件里面

> ID：14226147
> 
> 赞同：0
> 
> 时间：2013-01-08T23:55:50.040
> 
> 标签：vim, macvim

:jumps 返回跳转列表，但是当我按下 < Ctrl-O> 或 < Ctrl-I> 时没有任何反应。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:28:41.530

我认为您以某种方式将 CO 重新映射到其他东西。

`:verbose map <c-o>`会告诉你映射到什么。

从您的评论中，您说如果您发出命令`:verbose map <c-o>`，它就会响应`n <C-o>`。我认为应该有更多的东西。

```
n means Normal mode mapping, 
<C-O> means from key-bind
there should be a mapping to ? 
```

您输入 n，它会报告“找不到模式：跳转列表”。我邀请您上次搜索的是`jumplist`. 为了验证这一点，您可以在正常模式下键入“n”，然后查看未找到的模式字。例如跳转列表。然后输入`"/p`看看这是否是您最后一次搜索。

您可以尝试的另一件事是`:nunmap <c-o>`，然后按`<c-o>`，看看它是否会跳..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:00:25.850

可能您没有以前编辑过的文件。我试过它对我有用。

# c++ - Jgrasp C++ 编译问题

> ID：14226148
> 
> 赞同：1
> 
> 时间：2013-01-08T23:55:58.957
> 
> 标签：c++, jgrasp

当我尝试使用 jgrasp 在 c++ 中编译一个简单的源代码时，我得到了这个

> ----jGRASPwedge2 错误：找不到命令“g++”。---- 此命令必须在当前工作目录---- 或当前 PATH 上才能使用此功能。---- 路径是“;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\ System32\WindowsPowerShell\v1.0\;C:\Program Files\Microsoft\Web 平台安装程序\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\ Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files (x86)\QuickTime\QTSystem\"。----jGRASP：操作完成。

谁知道怎么修它？我正在使用 Windows 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:57:25.833

你要么没有在你的机器上安装 C++ 编译器，要么你安装了 C++ 编译器并且没有将它添加到你的 PATH 中。

# c# - 如何将目录列表的全部或部分拆分为两个单独的字符串

> ID：14226149
> 
> 赞同：-1
> 
> 时间：2013-01-08T23:56:04.953
> 
> 标签：c#, split, directory

我发现了一个实例，我需要能够拆分给定目录列表/路径的一部分。在这种情况下，我有 path`"C:\Program Files(x86)\MyApp\Data"`或 "`C:\Program Files\MyApp\Data\myfile.txt"`并且我想删除之前的所有内容，`\MyApp\Data\`以便将来使用它进行处理。

我知道我可以做类似于以下的事情来拆分每个目录，我可以从那里重建它，但我希望能够拆分不需要的路径信息 - 只保留相关的字符串。

```
string mypath = @"C:\Program Files(x86)\MyApp\Data";
string[] directories = mypath.Split(Path.DirectorySeparatorChar); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:59:41.783

只需拆分 MyApp\Data 并删除第一个条目：

```
 string mypath = @"C:\Program Files(x86)\MyApp\Data";
     string[] directories = mypath.Split(new string[] {@"\MyApp\Data"},  StringSplitOptions.RemoveEmptyEntries);

     string mySavePath = mypath.Remove(0, directories[0].Length); 
     Console.WriteLine(mySavePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:00:38.077

只需从所需部分开始的位置提取一个子字符串：

```
string s1 = @"C:\Program Files(x86)\MyApp\Data";
string s2 = @"\MyApp\Data\";

int index = s1.IndexOf(s2);
if ( index >= 0 )
{
    string end = s1.Substring(index);
    string beg = s1.Substring(0, index);
} 
```

但请考虑，如果您可能`\`在两个字符串的末尾都有一个符号：

```
int index = s1.IndexOf(s2.TrimEnd('\\')); 
```

# php - Javascript 错误：未捕获的 SyntaxError：意外的令牌}

> ID：14226152
> 
> 赞同：1
> 
> 时间：2013-01-08T23:56:32.617
> 
> 标签：php, javascript, jquery, html

我正在为我的网站创建一个聊天。它工作正常，但一个函数在 HTML 按钮内不起作用。我有 3 个用于它的文件，但有一行无法正常工作。

之前，我有一个问题，我设置 Javascript 函数，创建按钮，它会说该函数不存在。我通过将功能放在按钮下方来解决这个问题。

每个按钮都会显示一个在线成员，该成员在您的朋友列表中。

我让我感到困惑的错误，因为我不知道这是如何引起的。

> 错误：'Uncaught SyntaxError: Unexpected token } users.php:3'

（users.php 是我所在的页面，如果我更改它会更改页面名称。）

使用 chrome，我可以单击错误，这会显示：'window.script1357688207590=1;'

脚本（抱歉这么长）：

脚本1：（主脚本）：

```
 var username = '[error]';
        $.ajax({
            url: 'bchat.php',
            type: 'post',
            data: { method: 'method2' },
            success: function(data){
                username = data;
            }
        });
        $.ajax({
            url: 'bchat.php',
            type: 'post',
            data: { method: 'method1' },
            success: function(data){
                if(data!='do not show chat'){
                    function ToggleChat(tof){
                        if(tof == true){
                            $('#chatWindow').css('visibility','visible');
                        }else{
                            $('#chatWindow').css('visibility','hidden');
                        }
                    }
                    $('body').append('\
                        <div id=chatWindow style="background:white; visibility

:hidden; position: fixed; bottom: 0; right: 0; margin-top:-30px; width:200px; height:350px;">\
                        <div style="width:100%; height:100%; border:solid black 1px;">\
                            <div style="hieght:20px; background:rgb(40,40,40); color:white;">\
                                '+data+'<span>  </span>'+username+'\
                                <button id=chat_close style="float:right; background:rgba(0,0,0,0); border:none; color:white;">\
                                    Close\
                                </button>\
                            </div>\
                            <div id=chatOnline style="overflow:auto;">\
                            </div>\
                        </div>\
                    </div>\
                    <div id=chat__window style="background:white; visibility:hidden; position: fixed; bottom: 0; right: 200; margin-top:-30px; margin-left:-400px; width:200px; height:350px;">\
                        \
                    </div>\
                    <div id=chat style="position: fixed; bottom: 0; right: 0;">\
                        <button id=chat_open style="border:none; padding:5px; color:whiteSmoke; background-image: -ms-linear-gradient(bottom, #4A4A4A 0%, #00070A 100%);background-image: -moz-linear-gradient(bottom, #4A4A4A 0%, #00070A 100%);background-image: -o-linear-gradient(bottom, #4A4A4A 0%, #00070A 100%);background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #4A4A4A), color-stop(1, #00070A));background-image: -webkit-linear-gradient(bottom, #4A4A4A 0%, #00070A 100%);background-image: linear-gradient(to top, #4A4A4A 0%, #00070A 100%); width:200px; height:30px;">\
                            '+data+' <span>  </span>Chat\
                        </button>\
                    </div>');
                $('#chat_open').click(function() {
                     ToggleChat(true);
                });
                $('#chat_close').click(function() {
                     ToggleChat(false);
                });
            }   
        }   
    });
    //
    //update online users
    //
    function updateOnline(){
        $.ajax({
            url: 'bchat.php',
            type: 'post',
            data: { method: 'method3' },
            success: function(data){
                $('#chatOnline').html(data);
            }
        });
    }
    updateOnline();
    setInterval(updateOnline,5000); 
```

脚本 2（功能脚本）：

```
function chatWith(url,un){
                                $('#chat__window').html('<div style="width:100%; height:100%; margin-top:-30px; border:solid black 1px;"><div style="hieght:20px; background:rgb(40,40,40); color:white;">'+url+'<span>  </span>'+un+'<button id=chat_chatting_close style="float:right; background:rgba(0,0,0,0); border:none; color:white;">Close</button></div><div id=chat_chats style="overflow:auto;"></div></div>');
                                $('#chat__window').css('visibility','visible');
} 
```

PHP 脚本 (bchat.php):

```
<?php
    include_once("./login_manager_php_file.php");
    if($username&&$userid){
        $method = $_POST['method'];
        if($method){
            if($method=='method1'){
                $url = $images['logged_in'];
                $html = "<img src='".$url."' width=7.5 height=7.5/>";
            }elseif($method=='method2'){
                echo $username;
            }elseif($method=='method3'){
                $friends_q = mysql_query("SELECT * FROM friends WHERE `with`='$username' OR `friender`='$username'");
                $thtml = '';
                if($friends_q){
                    while($friend = mysql_fetch_assoc($friends_q)){
                        if($friend['with']==$username){
                            $usern = $friend['friender'];
                        }else{
                            $usern = $friend['with'];
                        }
                        $url = '';
                        if(ifLoggedIn($usern)===true){
                            $url = $images['logged_in'];
                        }else{
                            $url = $images['logged_out'];
                        }
                        if(ifLoggedIn($usern)===true && $usern != $username){
                            $on = $url;
                            $html = "

                            <button onClick='
                                chatWith('$url','$usern');
                            '
                            style='border:none; background:rgba(0,0,0,0);'><img src='".$url."' width=7.5 height=7.5/>";
                            $thtml = $thtml.$html.$usern.'</button><br/>';
                        }
                    }
                }
                echo $thtml;
            }elseif($method==='method4'){
                if($_POST['usrn']){
                    $url = '';
                    if(ifLoggedIn($_POST['usrn'])===true){
                        $url = $images['logged_in'];
                    }else{
                        $url = $images['logged_out'];
                    }
                    echo "<img src='".$url."' width=7.5 height=7.5/>";
                }else{
                    echo '[error]';
                }
            }
        }
    }else{
        echo 'do not show chat';
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:03:11.743

尝试更改 php 以将 id 属性添加到按钮或类（如果有多个）。另外，删除 onclick 属性

```
<button class="btnChat" ... 
```

刚刚意识到您还需要添加参数。我会将这些添加到按钮上的数据属性中。

```
<button class="btnChat" data-url="$url" data-usern="$usern" 
```

您需要确保 $url 和 $usern 正确转义

然后在脚本 2 文件中，您可以连接该按钮的单击事件：

```
$(function(){

  $('body').on('click','.btnChat',function(){
      chatWith($(this).data('url'),$(this).data('usern'));
  });

}); 
```

# bluetooth - 适用于 Windows 手机 8 的 AVRCP？

> ID：14226153
> 
> 赞同：0
> 
> 时间：2013-01-08T23:56:35.533
> 
> 标签：bluetooth, windows-phone-8, multimedia, avrcp

我有一个在 WP8 上运行的多媒体播放器项目。WP8 SDK 是否支持用户可以从蓝牙设备控制播放的 AVRCP？我应该使用哪些 API 或事件来接收控制事件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:22:25.783

从消费者的角度来看，WP7 OS[支持](http://support.microsoft.com/kb/2449475?wa=wsignin1.0)BT-AVRCP 1.3，WP8 OS 也是如此。根据[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007%28v=vs.105%29.aspx#BKMK_Bluetoothprofilessupportedinwp8)，WP8 支持 BT-AVRCP 1.4 配置文件。

从开发人员的角度来看，BT-SPP 支持开发人员直接读写。我不确定 WP8 是否可以成功打开一个 BT-AVRCP 套接字，所以继续尝试打开一个套接字，看看会发生什么。

如果您只是想在蓝牙耳机上播放音频，请使用普通的 WP7/WP8 媒体播放类并使用新的 WP8 [AudioRoutingManager](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207273%28v=vs.105%29.aspx)强制在蓝牙耳机上输出。

```
AudioRoutingManager.SetAudioEndpoint(AudioRoutingEndpoint.Bluetooth) 
```

# php - PHP MySQL INSERT 不插入也不显示任何错误

> ID：14226154
> 
> 赞同：6
> 
> 时间：2013-01-08T23:56:37.247
> 
> 标签：php, phpmyadmin, mysqli

我有这个代码，所以通过 PHP 将值插入到 MySQL 中的表中。我已经尝试了所有可能的插入语法，它不插入数据......这是我使用的代码。

```
$param = "xyzxyz";
$param1 = "sdfdfg";
$sql = "INSERT INTO trail (User_Name, Quiz_ID) VALUES ('".$param."','".$param1."')";
$result = $mysql->query($sql);
if($result)
   echo "successful";
else
   echo mysql->error;
if(mysql->errno==0)
   echo "successful"
else
   echo mysql->error; 
```

我什至尝试了以下 sql 语法

```
"INSERT INTO trail (User_Name, Quiz_ID) VALUES ('$param1','$param1')";

"INSERT INTO `trail` (`User_Name`, `Quiz_ID`) VALUES ('$param1','$param1')"; 
```

我尝试了其他几个，它们都没有在表中插入任何东西。这是 MySQL 中的表；

```
trail

User_Name varchar(35)
Quiz_ID varchar(35) 
```

它不插入任何东西，也不显示任何错误。而且我有正确的数据库连接，因为我可以从表中选择。它只是棘手的插入。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-10T00:56:05.220

如果有人遇到类似问题，请注意：

我有一个类似的问题 --- 插入查询在 PHPMyAdmin 上工作，但在 PHP 上不工作，也没有发出任何错误（结果一直都是**真的**）。

原因是我正在开始交易但忘记提交它......

```
$mysqli->autocommit(FALSE);

$mysqli->query( "START TRANSACTION" ); 
```

**永远不要忘记这一点：**

```
$mysqli->commit(); 
```

我知道这是一个愚蠢的错误，但我太专注于查询的谜团，以至于忘记了上面几行的事务语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T23:58:49.437

首先检查 mysqli::$errno。

```
if(mysql->errno==0)
   echo "successful"
else
   echo mysql->error; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:49:51.483

我所做的是，如果您没有安装调试器，只需通过电子邮件将查询发送给您。通过这种方式，您可以看到最终查询是什么，如果您有权访问 phpMyAdmin 之类的内容，请尝试手动运行查询并查看会发生什么。另一件事，请确保您正在正确搜索插入的记录，如果您因为记录数而使用搜索查询，请确保 WHERE 条件是正确的，这已经烧了我几次。

**编辑** 名称周围可能缺少符号。我必须运行我所有的 MySQL 查询，比如

```
`nameOfThing` 
```

而不仅仅是 nameOfThing

```
$param = "xyzxyz";
$param1 = "sdfdfg";
$sql = "INSERT INTO `trail` (`User_Name`, `Quiz_ID`) VALUES ('".$param."','".$param1."')";
$result = $mysql->query($sql);
if($result)
   echo "successful";
else
   echo mysql->error;
if(mysql->errno==0)
   echo "successful"
else
   echo mysql->error; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T00:01:36.377

仅供参考，您插入 $param1 两次。

你也没有';' 在回显“成功”之后。

我建议您清理代码示例，然后再试一次，然后告诉我们。

需要清理的东西

1.  `$sql = "INSERT INTO trail (User_Name, Quiz_ID) VALUES ('$param','$param1')";` 您不需要在字符串连接中连接变量，您可以进行插值。但是，您实际上应该将 PDO 与准备好的语句一起使用，以避免 SQL 注入的可能性。
2.  添加缺少的`;`
3.  进行第一次检查`if(mysql->errno==0)`（除非您要为这些东西切换到 PDO）。
4.  固定`mysql->error`为`mysql->error()`
5.  也许评论中还有其他一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T03:55:08.543

好吧，如果以下代码没有产生错误并显示 1 个受影响的行，则很可能您正在错误的数据库中查找结果。

```
ini_set('display_errors', 1);
error_reporting(E_ALL);

$sql = "INSERT INTO trail (User_Name, Quiz_ID) VALUES ('testing','1')";
$mysql->query($sql);
var_dump($mysql->error,$mysql->affected_rows); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T09:38:12.297

我的表是 InnoDB 表，当我将表更改为 MyISAM 时，插入工作正常。好吧，我以前从未遇到过这个问题。好吧，这暂时奏效了。

如果我想使用 InnoDB 引擎进行交易？我怎样才能让 php 能够在 InnoDB 表中插入值？有人有什么建议吗？我正在使用 WAMP 服务器，MySQL 是 5.5.24 版。我确实更改了 my.ini 中的 InnoDB conf，但这似乎也不起作用？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-07-29T05:52:34.057

试试这个

```
$param = "xyzxyz"; 
$param1 = "sdfdfg"; 
$sql = "INSERT INTO trail (User_Name, Quiz_ID) VALUES ('".$param."','".$param1."')"; $result = $mysql_query($sql); if($result){ echo "successful";} else { echo " not successful;} 
```

* * *

# python - 检查列表/字符串中多个项目的成员资格的不太详细的方法？

> ID：14226155
> 
> 赞同：2
> 
> 时间：2013-01-08T23:56:39.013
> 
> 标签：python

我有检查类的属性以及预定字符串是否在字符串或列表中的代码，如下所示：

```
if (self.name in event and 'AL' in event) or (self.name in event and 'FH' in event) 
```

我想知道是否有更优雅的方式来组合这些，所以我不必为这两种情况输入两次“事件”。显然没什么大不了的，但我总是在市场上让事情变得更性感。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:00:10.770

您可以将表单的表达式简化为`(x && y) || (x && z)`表单`x && (y || z)`。因此，您可以将表达式写为：

```
if self.name in event and ('AL' in event or 'FH' in event):
    #... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T23:59:45.397

`self.name in event`您可以将组件从子表达式中分解出来，并用于`any()`迭代其他名称。

```
if self.name in event and any(it in event for it in ['AL', 'FH', ...]):
    ... 
```

（免责声明：这是未经测试的，因此请仔细检查您是否获得与原始结果相同的结果。）

# c# - 将点对象添加到 ZedGraph

> ID：14226156
> 
> 赞同：2
> 
> 时间：2013-01-08T23:56:40.953
> 
> 标签：c#, point, zedgraph

ZedGraph 有一个很好的扩展来绘制标记/点（[PointObj.cs](http://sourceforge.net/p/zedgraph/feature-requests/79/)）。但是，我无法在图表上渲染点。

当我调用 ZedGraph.Invalidate() 函数时，标记会暂时绘制，然后消失。

在以下代码中，变量 zedGraph 是表单 UI 上的可见图形对象。

```
 // Create point
 ZedGraph.PointObj point = new ZedGraph.PointObj(5, 10000, 50, 50, ZedGraph.SymbolType.Square, Color.Green);
 ZedGraph.PaneBase paneBase = zedGraph.GraphPane;
 point.Fill = new ZedGraph.Fill(Color.Green);
 System.Drawing.Graphics graphics = zedGraph.CreateGraphics();

 // Draw point to graph
 point.Draw(graphics, paneBase, paneBase.CalcScaleFactor());

 // Re-draw graph, but point only flashes momentarily. 
 zedGraph.Invalidate(); 
```

编辑：我意识到还有其他添加“点”的方法，例如此处描述的（[在 zedgraph 中标记和圈出特定点](https://stackoverflow.com/questions/9986372/labelling-and-circle-a-specific-point-in-zedgraph)）。但是知道为什么这不起作用仍然会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T19:18:08.073

创建后尝试将点添加到 GraphObjList

zedGraph.GraphPane.GraphObjList.Add(point);

# jquery - 如何让可选择的行为像单选按钮？

> ID：14226162
> 
> 赞同：-2
> 
> 时间：2013-01-08T23:57:23.240
> 
> 标签：jquery, jquery-ui, button, radio-button

我喜欢[这种](http://jqueryui.com/selectable/)可以设置样式的方式，但我讨厌用户能够使用此界面选择多个项目。有没有办法

1.  修改可选示例以仅允许单个选择，或
2.  [修改这样](http://jqueryui.com/button/#radio)的标准单选按钮示例，使其看起来更像可选示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:16:26.537

您可以使用您想要的任何 html 按钮制作类似的 UI，而无需使用`selectable`.

示例 HTML：

```
<div>One: <input type="radio" name="rad"/> Two: <input type="radio" name="rad"/> Three: <input type="radio" name="rad"/></div>
<ul id="rad_buttons">
  <li>Radio 1</li> 
  <li>Radio 2</li>   
    <li>Radio 3</li>   
</ul> 
```

JS：

```
var $radios=$('input[name="rad"]');
$('#rad_buttons li').click(function(){
  $('#rad_buttons li.active').removeClass('active')
  var $btn=$(this).addClass('active'), idx=$btn.index();
  $radios.eq( idx).prop('checked',true)
}) 
```

演示：http: [//jsfiddle.net/aDFr8/](http://jsfiddle.net/aDFr8/)

# wordpress - 使用自定义分类法和 wp_title 查询帖子

> ID：14226167
> 
> 赞同：0
> 
> 时间：2013-01-08T23:57:45.097
> 
> 标签：wordpress

我在 WordPress 中有一个查询，它会提取类别“发布”中的帖子，这些帖子在分类“艺术家”中用艺术家的名字标记 - （恰好是这个页面的标题。）效果很好。直到您使用包含 3 个单词的艺术家姓名/页面标题。所以“san gabriel”有效，“coyote clean up”无效。这是一个较旧的站点，我在某些事情上使用了魔法领域，但我不明白这可能是问题的一部分。

```
<?php query_posts( array(
        'category_name' => 'releases',
        'artist' => wp_title("",false),
        'showposts' => 0
        ) )?>

    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
    <div <?php post_class() ?> id="post-<?php the_ID(); ?>">

        <img alt="release image" src="<?php echo get ('release_info_release_image') ?>">

    </div>

    <?php endwhile; ?>

    <?php else : ?>

        <p>there are currently no releases posted for this artist.</p>

    <?php endif; ?>
    <?php wp_reset_query(); ?> 
```

这是一张图片，显示页面标题和标记的分类之间没有拼写错误。

圣加布里埃尔的页面得到了这个帖子。Coyote Clean Up 没有。当我在标题和艺术家标签中将他们的名字更改为“Coyote Clean”时 - 它可以工作......一个词乐队工作。两个词带工作。三字带没有。

我想不出任何原因会发生这种情况。

有任何想法吗？

![在此处输入图像描述](../Images/cc2e2a845f51a795c8f429087d092cd4.png)

![在此处输入图像描述](../Images/ae3ea0de75878f1a886d1055a4c0ad38.png)

![在此处输入图像描述](../Images/e16344957152b38ceb94ad37326def1d.png)

好的 - 这是有 4 个字的，它正在工作......

# html - CSS 没有导入 HTML

> ID：14226169
> 
> 赞同：2
> 
> 时间：2013-01-08T23:58:15.713
> 
> 标签：html, css, background, stylesheet, grid-system

我一定很累。CSS 没有导入 HTML。所有显示的是：测试测试测试（在不同的行）另外，在网格 CSS 中只有 920.gs：

```
<!DOCTYPE html>
<html>
        <head>
            <title>Some title</title>
        <link rel="stylesheet" type="text/css" href="/css/styles.css" />
    </head>
    <body>
        <div class="container_12" id="content">
            <div class="grid_3" id="leftside">
                <h1>Test</h1>
            </div>
            <div class="grid_6">
                <h1>Test</h1>
            </div>
            <div class="grid_3" id="rightside">
                <h1>Test</h1>
            </div>
        </div>
    </body>
</html> 
```

附上 CSS：

```
@import url("http://fonts.googleapis.com/css?family=Days+One&effect=font-effect-fire-                         animation");
@import url("css/grid.css"")

body {
        background-attachment:fixed;
    background-repeat:no-repeat;
    background-color:#7FA8FF;
    background-position:top;
    background-image:url("../images/background.png");
    text-align: center; 
    font-family: 'Days One', sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:00:22.857

`css`尝试从路径中删除前导斜杠：

```
<link rel="stylesheet" type="text/css" href="css/styles.css" /> 
```

这将假定您`css`在 Web 应用程序的根目录下有一个文件夹，与 HTML 页面处于同一级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:08:16.890

相对 URL`@import`被解释为相对于导​​入样式表。现在，如果您显示的样式表是`"/css/styles.css"`, `@import url("css/grid.css"")`（不包括最后的杂散 "" ）会查找`/css/css/grid.css`可能不是您想要的文件。

只是猜测，但我认为是

```
@import url("grid.css") 
```

你需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:00:25.533

检查您是否可以下载您尝试导入的 CSS。

我无法获得以下 CSS

```
@import url("http://fonts.googleapis.com/css?family=Days+One&effect=font-effect-fire-animation"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T00:07:51.070

我有一个类似的想法，即前导 '/' 可能是像 duffymo 这样的问题。所以我建议使用

```
<link rel="stylesheet" type="text/css" href="css/styles.css" /> 
```

但除此之外，我还会从您的 css 文件中删除 include 语句，并将其放在 main 中，例如：

```
<link rel="stylesheet" type="text/css" href="css/grid.css" /> 
```

可能是网格没有导入，因为您正在从 css/ 调用 css/grid.css 来制作 css/css/grid.css 但我可能是错的；但尝试并没有什么坏处。

# symfony - 跨各种捆绑包的管理区域

> ID：14226170
> 
> 赞同：0
> 
> 时间：2013-01-08T23:58:21.823
> 
> 标签：symfony

我对 Symfony 2 比较陌生，我正在开发一个应用程序，该应用程序有一个仅限管理员的登录区域`domain.com/admin/home/`（它本身是一个名为 AdminBundle 的单独捆绑包），允许管理员管理产品

然而，同样的应用程序也将有一个 BlogBu​​ndle ，它需要一个管理区域来管理博客文章。

解决这个问题的最佳方法是什么，是否有多个管理区域的最佳实践？

将博客管理部分保留在 BlogBu​​ndle 中以提高可重用性/可移植性是有意义的，但是所有登录设置都将在 AdminBundle 中，这似乎是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:25:40.883

一种方法是使用您的 security.yml 文件来保护一组路由。例如;

```
access_control:
   ...
   - { path: ^/admin, roles: [ROLE_ADMIN] } 
```

然后，当您创建您的操作时，您只需为它们提供一个带有管理员前缀的路由，以保护它们免受除管理员之外的所有用户的攻击。我的示例使用注释进行路由，但您可以使用 yml 执行相同的操作。

```
/**
 * Edit a Blog entity.
 *
 * @Route("/admin/blog/{id}/edit", name="blog_edit")
 * @Template()
 */
public function editAction()
{
... 
```

或者，您可以通过为类添加前缀来保护控制器中的每个操作：

```
/**
 * AdminBlog controller.
 *
 * @Route("/admin/blog")
 */
class AdminBlogController extends Controller
{
... 
```

然后创建另一个控制器来处理向最终用户显示博客文章并为他们提供不安全的路由。

如果您想在单独的包中保护其他区域，您可以通过使用安全和不安全的控制器/methods.actions 以相同的方式进行操作

# javascript - 在 Meteor 的客户端上显示服务器时间

> ID：14226176
> 
> 赞同：11
> 
> 时间：2013-01-08T23:58:58.320
> 
> 标签：javascript, node.js, meteor

使用 Meteor，在显示服务器时间的客户端上保持运行时钟 (h:m:s) 的有效方法是什么？

我发现的 JavaScript/PHP 答案通常涉及定期获取服务器时间并计算该时间与客户端之间的差异。

Meteor 会是什么样子？

*更新：自从我最初发布这个问题以来，发生了很多变化。如果您对预先构建的解决方案感兴趣，我建议您查看 @mizzao 的[Meteor Timesync](https://github.com/mizzao/meteor-timesync)。`meteor add mizzao:timesync`通过在控制台中运行来安装它。*

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T01:03:12.580

David Greenspan在 14:30 左右[在 Spark 上的这个演示文稿中获得了](http://www.youtube.com/watch?v=kZumPtYMR3Y)**客户**时间。我稍微修改了这段代码以获得服务器端时间：

Javascript：

```
if (Meteor.isClient) {
    Meteor.startup(function () {
        setInterval(function () {
            Meteor.call("getServerTime", function (error, result) {
                Session.set("time", result);
            });
        }, 1000);
    });

    Template.main.time = function () {
        return Session.get("time");
    };
}

if (Meteor.isServer) {
    Meteor.methods({
        getServerTime: function () {
            var _time = (new Date).toTimeString();
            console.log(_time);
            return _time;
        }
    });
} 
```

和 HTML：

```
<body>
  {{> main}}
</body>

<template name="main">
  {{time}}
</template> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-11T17:59:30.360

关于这个线程有很好的信息。我已经将所有内容整合到 Meteor 的智能包中：

> [https://github.com/mizzao/meteor-timesync](https://github.com/mizzao/meteor-timesync)

除了已经在这里的内容之外，我还添加了两个主要内容：

*   使用 NTP 风格的数学更准确地计算服务器/客户端偏移量，而不是仅仅区分客户端和服务器时间并忽略往返时间。
*   能够反应性地使用服务器时间戳来显示将在模板和反应性计算中自我更新的值。

随意打开拉取请求，特别是如果您有更好/更有效的方法来计算和维护偏移量的想法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T01:59:26.513

感谢@TimDog 的帮助。我对该代码进行了一些扩展，以便仅定期检查服务器，同时仍然在客户端上显示正在运行的时钟。这就是我最终的结果：

客户端代码：

```
 Meteor.startup(function () {

    function setServerTime(){

      //get server time (it's in milliseconds)
      Meteor.call("getServerTime", function (error, result) {

        //get client time in milliseconds
        localTime = new Date().getTime();

        //difference between server and client
        var serverOffset = result - localTime;

        //store difference in the session
        Session.set("serverTimeOffset", serverOffset);

      });
    }

    function setDisplayTime(){
      var offset = Session.get("serverTimeOffset");
      var adjustedLocal = new Date().getTime() + offset;
      Session.set("serverTime", adjustedLocal);
    }

    //run these once on client start so we don't have to wait for setInterval
    setServerTime();
    setDisplayTime();

    //check server time every 15min
    setInterval(function updateServerTime() {
      setServerTime();
    }, 900000);

    //update clock on screen every second
    setInterval(function updateDisplayTime() {
      setDisplayTime();
    }, 1000);

  });

  //pass the clock to the HTML template
  Template.register.clock = function () {
    return new Date(Session.get("serverTime"));
  }; 
```

服务器代码：

```
Meteor.methods({

    //get server time in milliseconds
    getServerTime: function () {
        var _time = (new Date).getTime();
        console.log(_time);
        return _time;
    }

  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:38:53.510

作为这个问题的后续，这是性能消耗吗？我们每秒都在计算偏移量，并根据这个重新计算来改变会话。

这是否意味着任何其他依赖于 Session 的东西也会每秒重新计算一次？

设置成别的东西会更好吗？

或者简单地制作一个根据需要进行本地日期调整的方法，而不是设置间隔和会话变量。

让我知道你发现了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T20:29:40.913

只需订阅一个普通的集合并将您的日期放入其中：（无往返计算）

```
import { Meteor } from 'meteor/meteor';
import { Mongo } from 'meteor/mongo';

export const ServerDate = new Mongo.Collection(null);

if (Meteor.isServer) {
  // This code only runs on the server
  Meteor.publish('serverDate', function serverDatePublication() {
    return ServerDate.find({});
  });
  console.log('<ServerDate>:', new Date());
  Meteor.setInterval(updateDate, 1000 * 1);
}

function updateDate() {
  // Clean out result cache
  ServerDate.remove({});
  ServerDate.insert(new Date());
} 
```

# php - 使用 json 将表单数据传递给 php

> ID：14226178
> 
> 赞同：0
> 
> 时间：2013-01-08T23:59:12.110
> 
> 标签：php, jquery, json

> **可能重复：**
> [使用 jQuery.getJSON 传递给 php 的值](https://stackoverflow.com/questions/14223309/using-value-passed-to-php-by-jquery-getjson)

嗨，我有这段代码正在传递数据：

```
var output = [];
$.getJSON(
    'DisplayMap.php',
    { runDate : $('input[name="date"]').val() },
    function(data) {
        for (var i in data.b) {
            output.push(new google.maps.LatLng(data.b[i].Ya, data.b[i].Za));
        }
    }
); 
```

我的问题是，我将如何处理这些数据并将其分配给 php 变量。我需要解码吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:04:37.940

您将可以通过以下方式访问它

```
$_GET['runDate']; 
```

* * *

旁注：对于 Google Maps API，请勿`Ya`直接访问`Za`。它们的名称并不总是一致的。相反，使用`.lat`和`.lng`属性 getter

例如：

```
new google.maps.LatLng(data.b[i].lat, data.b[i].lng); 
```

# html - 无效的 Wordpress rel='category' 标记，为什么无效？

> ID：14226181
> 
> 赞同：1
> 
> 时间：2013-01-08T23:59:28.300
> 
> 标签：html, wordpress, wordpress-theming, w3c-validation

Wordpress 生成带有`rel="category"`属性的类别链接。当我通过 w3c.org 的验证器运行我的网站时，它告诉我这是无效的，并且我可以在 Microformats wiki ( [http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions) ) 上注册链接类型。然而，

这是验证器的问题，还是我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:31:45.567

`rel`值“ ”`category`不是**无效**的。相反，验证器不是最新的。

`category`在 microformats.org wiki 页面上正式[注册。](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)

所以使用这个值是没有问题的。验证器将来可能会赶上。

# android - 从 Android 应用程序更改 BlackBerry-10 屏幕亮度

> ID：14226191
> 
> 赞同：4
> 
> 时间：2013-01-08T23:59:56.770
> 
> 标签：android, blackberry-10, screen-brightness, blackberry-android

在我的 Android 应用程序中，我使用以下代码来更改屏幕亮度

```
WindowManager.LayoutParams lp = getWindow().getAttributes();
lp.screenBrightness = someValue;
getWindow().setAttributes(lp); 
```

在 Android 设备上它工作正常，但是当我将它移植到 BlackBerry-10 时它不起作用。我应该使用其他方法或解决方法吗？

* * *

Torcellite 的解决方案（由 Anton Cherkashyn 提供）：

我试过这个，经过进一步测试，它确实改变了 Android 设备上的亮度，但在 BlackBerry 上没有。它在 BlakcBerry 上变暗的唯一原因是因为打开了新活动（活动变化变暗）。

在我的活动中：

```
Intent intent = new Intent(getBaseContext(), DummyBrightnessActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.putExtra("brightness value", value[screenBrightness]); 
getApplication().startActivity(intent); 
```

假：

```
public class DummyBrightnessActivity extends Activity{

    private static final int DELAYED_MESSAGE = 1;

    private Handler handler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);            
        handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                if(msg.what == DELAYED_MESSAGE) {
                    DummyBrightnessActivity.this.finish();
                }
                super.handleMessage(msg);
            }
        };
        Intent brightnessIntent = this.getIntent();
        float brightness = brightnessIntent.getFloatExtra("brightness value", 0);
        WindowManager.LayoutParams lp = getWindow().getAttributes();
        lp.screenBrightness = brightness;
        getWindow().setAttributes(lp);

        Message message = handler.obtainMessage(DELAYED_MESSAGE);
        //this next line is very important, you need to finish your activity with slight delay
        handler.sendMessageDelayed(message,1000); 
    }
} 
```

显现：

```
 <activity android:name=".DummyBrightnessActivity"
            android:taskAffinity=".Dummy"
            android:excludeFromRecents="true"
            android:theme="@style/EmptyActivity"></activity> 
```

样式.xml

```
 <style name="EmptyActivity" parent="android:Theme.Dialog">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowAnimationStyle">@android:style/Animation.Toast</item>
        <item name="android:background">#00000000</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:colorForeground">#000</item>
    </style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:25:18.470

While the code you're using only changes the brightness of the current screen, the code I'm going to post changes the system brightness.

```
android.provider.Settings.System.putInt(getBaseContext()
                    .getContentResolver(),
                    android.provider.Settings.System.SCREEN_BRIGHTNESS, bright); 
```

Where `bright` is an integer value from 0-255.

This method will not update your screen's brightness though. So, you'll need to call an invisible activity and close it to update the screen brightness.

Here's more [info](https://stackoverflow.com/questions/6708692/changing-the-screen-brightness-system-setting-android/9848456#9848456).

**[EDIT]**

Try adding this to your manifest:

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

**[EDIT]**

Try adding this too :

```
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" /> 
```

# android - App A 可以在同一部手机上与 App B 通信吗？

> ID：14226195
> 
> 赞同：-2
> 
> 时间：2013-01-09T00:00:18.680
> 
> 标签：android, ios

假设用户安装了两个应用程序 A 和 B。当应用程序 B 发生操作时，我希望能够向用户手机上的应用程序 A 发送消息。

这可以在 Android 和/或 iOS 上完成吗？平台上是否有任何内置框架允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:02:15.653

[Android 上的应用间通信教程](http://code.google.com/p/openmobster/wiki/InterAppCommunication)

# python - 日志记录属性 asctime 生成本地时间

> ID：14226205
> 
> 赞同：4
> 
> 时间：2013-01-09T00:00:53.660
> 
> 标签：python, logging

我正在为我的项目使用日志记录，格式为

```
'格式': '%(asctime)s %(message)s'

```

但是，时间不等于我的当地时间。例如

2013-01-08 11:04:07,383 消息（这是 UTC-6 时间）

我想知道

1.  如何使用我的本地时间登录
2.  如何将时间格式更改为 2013-01-08 11:04:07

* * *

我已经修好了，问题是我需要在setting.py中设置时区！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T00:05:50.520

从[文档](http://docs.python.org/2/library/logging.html#logging.Formatter)：

> 类 logging.Formatter(fmt=None, datefmt=None)
> 
> 返回 Formatter 类的新实例。该实例使用整个消息的格式字符串以及消息的日期/时间部分的格式字符串进行初始化。如果未指定 fmt，则使用 '%(message)s'。如果未指定 datefmt，则使用 ISO8601 日期格式。

还：

> 如果格式化字符串包含`'(asctime)'`,`formatTime()`则调用格式化事件时间。

因此，您可以指定一个，或使用您自己的覆盖`datefmt`创建一个自定义子类。`Formatter``formatTime`

而且，如果您想在当地时间和 GMT 时间（或其他任何时间）之间进行选择：

> 默认情况下，使用 time.localtime()；要为特定的格式化程序实例更改此设置，请将转换器属性设置为与 time.localtime() 或 time.gmtime() 具有相同签名的函数。要为所有格式化程序更改它，例如，如果您希望所有记录时间都以 GMT 显示，请在 Formatter 类中设置转换器属性。

`format`and`datefmt`参数也可以传递给，[`basicConfig`](http://docs.python.org/2/library/logging.html#logging.basicConfig)如果您不使用显式`Formatter`. 你不能这样设置`converter`——但你不必这样做，因为默认是本地时间。

所以：

```
logging.basicConfig(format='%(asctime)s %(message)s',
                    datefmt='%Y-%m-%d %H:%M:%S')
log = logging.getLogger(__name__)
log.error('Out of cheese!') 
```

我在当地时间 16:11:30 运行了这个，输出是：

```
2013-01-08 16:11:30 Out of cheese! 
```

事实上，看起来您要做的只是将标准时间格式的毫秒数减少，您可以通过截断字符串来更简单地做到这一点：

```
logging.basicConfig(format='%(asctime)-.19s %(message)s') 
```

但是，我认为明确指定日期格式更有意义。

# javascript - Highcharts堆叠条形图边框未显示在右侧

> ID：14226207
> 
> 赞同：4
> 
> 时间：2013-01-09T00:01:12.153
> 
> 标签：javascript, highcharts

当我创建堆叠条形图时，最右边的“框”没有在右侧绘制边框。

我可以在[Highcharts](http://www.highcharts.com/)中设置一个选项或其他东西来强制在下图中的 75% 框周围绘制白色边框线吗？

这是我用于测试的 jsfiddle 的链接：http: [//jsfiddle.net/zKgsF/](http://jsfiddle.net/zKgsF/)

![问题的图像](../Images/58b1ca62eb8390c84807162ee8326498.png)

请注意：将borderWidth 属性设置为大于1 可以显示，但最右边的边框比其他边框要细得多。见下图。

![边框宽度为 5](../Images/1208c1c1dc234dec406b18de4f79bbdb.png)

这是图表的javascript：

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar',
            backgroundColor: 'rgba(0,0,0,.3)',
            margin: [15,6,15,15],
        },
        xAxis: {
            categories: ['']
        },
        credits: {
          enabled: false
        },
        yAxis: {
          gridLineColor: "#FF0000",
          labels: 
          {
            align: 'right',
            formatter: function()
            {
              return this.value + "%";
            }
                },
        },
        tooltip: {
                formatter: function() 
          {
                        return "<b>" + this.series.name + '</b>: ' + this.y + ' (' +            Math.round(this.percentage,1) + "%)";
                }
            },
        plotOptions: {
                bar: {
                    animation: false,
                    stacking: 'percent',
                    borderWidth: '1',
                    dataLabels: {
                        enabled: true,
                        color: 'white',
                        formatter: function() {

                            if (this.percentage < 10) 
                            {
                                return ""
                            }
                            else
                            {
                                return Math.round(this.percentage,1) + "%";
                            }
                        },
                        style: {
                            fontSize: '18px'
                        }

                    }
                }
        },
        series: [{
            data: [30]        
        },{
            data: [10]        
        }]
    });
}); 
```

编辑：

看起来它与条形图“可堆叠”无关。这可能与图表转到最大“y”值轴的事实有关……如在另一个示例中所示：http: [//jsfiddle.net/zKgsF/1/](http://jsfiddle.net/zKgsF/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:58:41.297

正如[Cubbuk](https://stackoverflow.com/users/1045081/cubbuk)所建议的，您可以通过添加`max`yAxis 的值来调整它。

此外，您也可以指定一个`endOnTick`属性。

```
 max: 100.1,
 endOnTick: false 
```

对于 API，请在此处导航[，](http://api.highcharts.com/highcharts#yAxis.endOnTick)这里是一个**[示例](http://jsfiddle.net/gopinaghr/zKgsF/26/)。**

# youtube - 通过 API 进行 YouTube 安全搜索和评级

> ID：14226215
> 
> 赞同：2
> 
> 时间：2013-01-09T00:01:29.120
> 
> 标签：youtube, youtube-api

YouTube API v2 允许您 a) 仅搜索 safeSearch 和 b) 获取媒体评级（例如 PG-13）[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_media:rating](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_media:rating)。

有没有办法在 v3 API 中做到这一点？

如果不是：为什么省略？是否有计划将其从 v2 中删除？

一般来说，使用 API 判断视频是否安全的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T11:03:01.610

您应该能够使用以下链接中描述的 safeSearch 参数：

[https://developers.google.com/youtube/v3/docs/search/list](https://developers.google.com/youtube/v3/docs/search/list)

我希望这能回答你问题的前半部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-14T01:03:16.053

此外，您可以在以下位置找到 getRating 方法

[https://developers.google.com/youtube/v3/docs/videos/getRating](https://developers.google.com/youtube/v3/docs/videos/getRating)

在视频方法列表下（本节还列出了各种评级，例如 pg13 等）：

[https://developers.google.com/youtube/v3/docs/videos](https://developers.google.com/youtube/v3/docs/videos)

# google-chrome-extension - chrome.alarms 返回未定义

> ID：14226221
> 
> 赞同：4
> 
> 时间：2013-01-09T00:02:04.907
> 
> 标签：google-chrome-extension

早安，巫师。

我正在尝试为 chromium-browser 编写扩展。铬的版本是`18.0.1025.151 (development build 130497 Linux) Built on Ubuntu 12.04, running on Ubuntu 12.10`

我的操作系统是 ubuntu GNU/Linux 12.04.1 (LTS)，64 位。

问题是：我不能使用`chrome.alarms`. 访问此变量时我得到“未定义”。

我的一部分`manifest.json`：

```
 "background": {
      "scripts": ["background.js"]
    },
  "permissions": [
    "alarms",
    "tabs",
    "http://*/*"
  ], 
```

我的一部分`background.js`：

```
chrome.alarms.onAlarm.addListener(function(alarm) {
    if (! alarm.name.match ('/^extension47_.*/'))
        return;
    alert ('extension47 fired an alarm!');
}); 
```

我得到什么：

```
Uncaught TypeError: Cannot read property 'onAlarm' of undefined 
```

在线`chrome.alarms.onAlarm.addListener`。

当我从扩展页面转到 chromium 控制台时，自动完成提示我 no `chrome.alarms`。显然，当我在那里打字时`chrome.alarms`，我真的得到了`undefined`。为什么这样？..

我完全陷入困境，无法在互联网上的任何地方找到解决方案，我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T04:26:06.953

我最近也遇到了一些麻烦，并且在文档的任何地方（或任何相关位置）都没有看到这一点。

只要确保也请求`alarms`许可：

**清单.json**

```
{
    "manifest_version": 2,
    "permissions": [
        // ...  
        "alarms"
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:37:55.810

您至少需要 Google Chrome 22。

```
Availability:   Google Chrome 22 
```

[http://developer.chrome.com/trunk/extensions/alarms.html](http://developer.chrome.com/trunk/extensions/alarms.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:39:25.440

您需要从第三方维护的 repo 安装 Chromium：

```
sudo add-apt-repository ppa:a-v-shkop/chromium
sudo add-apt-get update
sudo apt-get install chromium-browser 
```

这将为您提供版本 23.0.1271.64 Ubuntu 12.04 (165188)。

# css - CSS 边框半径和 -moz-border-radius

> ID：14226224
> 
> 赞同：4
> 
> 时间：2013-01-09T00:02:19.607
> 
> 标签：css

我继承了一个应该在 IE8 中工作的 web 项目（以及其他浏览器，但相比之下我并不担心它们）。当我在 Firefox 中运行网站并检查错误控制台时，它提到：

“**警告**：未知属性'-moz-border-radius'。声明已删除”

`-moz-border-radius`样式表中出现的任何地方`border-radius`也会出现。例如，这些在样式表中彼此相邻：

```
border-radius:20px;
-moz-border-radius:20px; 
```

有什么理由保留`-moz-border-radius`样式吗？删除它们会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T00:06:12.887

-moz-border-radius 在 Firefox 中很长一段时间都不需要，所以我将其删除。看：

[https://developer.mozilla.org/en-US/docs/CSS/border-radius](https://developer.mozilla.org/en-US/docs/CSS/border-radius)

[-moz-border-radius 从 Firefox 13 中移除](https://stackoverflow.com/questions/10927481/moz-border-radius-removed-from-firefox-13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T00:06:52.273

`border-radius:20px;`适用于所有新浏览器

`-moz-border-radius:` 适用于旧版本的 FireFox，`-webkit-border-radius:`适用于旧版本的 Chrome。两种浏览器都会自行更新，因此用户*应该*可以`border-radius:`接受一切。

尽管在 CSS 中添加新浏览器可能不会使用的额外属性以确保所有旧浏览器也能正常运行，但我认为没有错。

# java - Java中Friend概念的实现

> ID：14226228
> 
> 赞同：11
> 
> 时间：2013-01-09T00:02:48.440
> 
> 标签：java, implementation, friend

如何在 Java（如 C++）中实现友元概念？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-09T00:02:48.440

Java 没有 C++ 中的朋友关键字。但是，有一种方法可以模仿它；一种实际上可以提供更精确控制的方法。假设您有类 A 和 B。B 需要访问 A 中的某些私有方法或字段。

```
public class A {
    private int privateInt = 31415;

    public class SomePrivateMethods {
        public int getSomethingPrivate() { return privateInt;  }
        private SomePrivateMethods() { } // no public constructor
    }

    public void giveKeyTo(B other) {
        other.receiveKey(new SomePrivateMethods());
    }
}

public class B {
    private A.SomePrivateMethods key;

    public void receiveKey(A.SomePrivateMethods key) {
        this.key = key;
    }

    public void usageExample() {
        A anA = new A();

        // int foo = anA.privateInt; // doesn't work, not accessible

        anA.giveKeyTo(this);
        int fii = key.getSomethingPrivate();
        System.out.println(fii);
    }
} 
```

usageExample() 显示了它是如何工作的。B 的实例无权访问 A 实例的私有字段或方法。但是通过调用 giveKeyTo()，B 类可以访问。没有其他类可以访问该方法，因为它 a 需要一个有效的 B 作为参数。构造函数是私有的。

然后类 B 可以使用密钥中传递给它的任何方法。这虽然比 C++ 的朋友关键字设置起来更笨拙，但更细粒度。A 类可以准确地选择将哪些方法公开给哪些类。

现在，在上述情况下，A 正在授予对 B 的所有实例和 B 的子类实例的访问权限。如果不需要后者，则 giveKeyTo() 方法可以在内部使用 getClass() 检查 other 的确切类型，然后抛出如果不完全是 B，则例外。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T02:47:55.200

假设`A.foo()`只应由 调用`B`。这可以通过只能由 生成的令牌来安排`B`。

```
public class B
{
    public static class ToA { private ToA(){} }
    private static final ToA b2a = new ToA();

    void test()
    {
        new A().foo(b2a);
    }
}

public class A
{
    public void foo(B.ToA b2a)
    {
        if(b2a==null)
            throw new Error("you ain't B");
        // ...
    }
} 
```

只能`B`生成非空`B.ToA`令牌。如果两者都`A`并且`B`不将此令牌泄漏给第 3 方，则没有其他人可以调用`A.foo()`

如果也`A2`想加好友`B`，则需要不同的令牌类型。如果是同一个token类型，既然`A`得到了from类型的token `B`，`A`就可以假装是`B`to `A2`。

检查是在运行时而不是编译时完成的，这并不完美。不过没什么大不了的，因为任何第 3 方都只能`A.foo()`用 a调用`null`，所以我们想在编译时检查它不可能是一个无辜的错误；它可能是恶意的，所以我们不在乎在编译时警告调用者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:09:40.033

在 Java 中，您可以将两个（或更多）类放入同一个包中。`protected`该包中的所有类都可以直接访问带有限定符的所有方法和字段。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-09T01:59:54.717

我想出了另一种实现相同目标的方法。基本上，您检查调用类名称的完全限定名称。如果它与您的“朋友”功能匹配，则您授予访问权限，否则返回 null。

```
public class A {
    private static int privateInt = 31415;

    public static int getPrivateInt() { 
        if(Throwable().getStackTrace()[1].getClassName().equals(new String("example.java.testing.B")))
        {
        return privateInt; 
        }
        else
        {
        return null;
        }
    }
}

package example.java.testing;
public class B {

public void usageExample() {
    int foo = A.getPrivateInt; // works only for B
    System.out.println(foo);
    }
} 
```

# centos - yum - 安装一个只有名称和版本的包

> ID：14226231
> 
> 赞同：3
> 
> 时间：2013-01-09T00:03:13.193
> 
> 标签：centos, rpm, yum

根据我对 yum 的了解，我可以指定 rpm 的名称，如下所示：

```
yum install zlib 
```

我还可以指定整个该死的名称，如下所示：

```
yum install zlib-1.2.3-27.el6.x86_64 
```

有没有办法指定中间文件名？比如只是名称和版本，像这样：

```
yum install zlib-1.2.3 
```

当我尝试时，我总是得到

```
No package zlib-1.2.3 available.
Error: Nothing to do 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:11:16.597

尝试在末尾添加 *：

`yum install zlib-1.2.3*`

# scala - Scala @ IntelliJ 12 - 无法获取文档/某些函数未显示在下拉列表中。[错误]

> ID：14226233
> 
> 赞同：0
> 
> 时间：2013-01-09T00:03:26.660
> 
> 标签：scala, ide, intellij-idea

我一直在寻找很长一段时间来为 Scala 找到一个像样的 IDE。Eclipse 一点也不令人满意，因为自动完成不起作用，不知何故。此外，我根本无法在构建路径中修改库，例如设置文档/源代码。IntelliJ 似乎更好，但是，有一些主要错误：当出现列出所有功能的下拉菜单时，其中一些有时没有显示！我认为这是因为 scala-library / scala-compiler，它混合了它们或其他东西......![奇怪的](../Images/9d44494e09a0b45d6041dbdd8843f49c.png)

无法获取文档，我一遍又一遍地收到此消息（这里列出了函数，很奇怪......）： ![功能障碍](../Images/ad3a47387fe9059ead6297db31dcfcc5.png)

这是库窗口： ![漏洞](../Images/b10a2c872190da7e185afba8fc9c374f.png)

我强烈认为，依赖项和编译器设置正确。

有谁知道问题是什么？以及如何解决？或者它是一个已知的错误？

是否有可以处理 Scala 的 IDE？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:28:27.370

通常，与 IntelliJ 中的 Java 相比，为自动完成搜索名称（值/类/函数/等）可能会非常慢，因为自动导入的命名空间可能非常大，并且它还会搜索所有隐式转换。但是，我从未见过它拒绝显示像您的屏幕截图这样的功能，您使用的是什么版本的 IntelliJ 和 Scala 插件？

我从来没有通过附加JavaDocs（我没有尝试过远程获取）来让弹出文档工作，所以我建议只需ctrl+click即可通过源代码阅读那里的文档。（但是，当附加源时，函数/类型定义会正确弹出）。如果有机会，我建议在[http://youtrack.jetbrains.com/issues/SCL上发布问题。](http://youtrack.jetbrains.com/issues/SCL)

对于你的最后一个问题，很遗憾，答案是否定的。Scala 的工具远不及 Java，但 Eclipse 的 Scala IDE 和 IntelliJ 在改变这一点方面取得了很大进展，两者在某些领域很强大，而在另一些领域则很弱。最后，无论哪种方式，您都将获得有限的支持，因此请选择最适合您的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:33:22.683

我找到了解决问题的方法：

该错误是由 Java Decompiler Plugin 引起的。它试图反编译 Scala 类文件的二进制文件，但显然失败了。这导致了该错误消息，并进一步导致 Scala 插件无法正常工作，因此无法显示某些功能。

我花了很长时间才弄清楚，我安装了 2 个其他版本的 IntelliJ（显然导入了 JD 插件）、NetBeans 并下载了几个版本的 Scala 插件，只是为了发现这个原因。停用 Java Decompiler 解决了它。

问候。

# php - 使用 YouTube Gdata API 检索整个 YouTube 播放列表（所有视频）

> ID：14226235
> 
> 赞同：1
> 
> 时间：2013-01-09T00:03:35.997
> 
> 标签：php, youtube-api, zend-gdata

我很难让它按我想要的方式工作。我希望从播放列表中获取所有视频。目前我可以检索 20 个，但有些播放列表包含 100 多个视频。这是我遇到问题的地方。我在这里使用从另一个用户那里找到的以下代码，因为我已经用尽了我能想到的一切。

这将启动该过程。请注意，我通过特定 URL 调用 XML 提要，因为 Google 开发网站上关于我正在尝试做的事情的信息很少。

```
public function saveSpecificVideoFeed($id) {
    $url = 'https://gdata.youtube.com/feeds/api/playlists/' . $id . '?v=2';
    $feed = $this->yt->getPlaylistVideoFeed($url);
    $this->saveEntireFeed($feed, 1);
} 
```

这就是我将上述函数传递给的内容：

```
public function saveEntireFeed($videoFeed, $counter) {
        foreach ($videoFeed as $videoEntry) {
            if (self::saveVideoEntry($videoEntry)) {
                $this->success++;
            } else {
                $this->failed++;
            }
            $counter++;
        }

        // See whether we have another set of results
        try {
            $videoFeed = $videoFeed->getNextFeed();
        } catch (Zend_Gdata_App_Exception $e) {
            echo $e->getMessage() . "<br/>";
            echo "Successfuly Pulled: <b>" . $this->success . "</b> Videos.<br/>";
            echo "Failed to Pull: <b>" . $this->failed . "</b> Videos.<br/>";
            echo "You Tryed to Insert: <b>" . $this->duplicate . "</b> Duplicate Videos.";
            return;
        }

        if ($videoFeed) {
            self::saveEntireFeed($videoFeed, $counter);
        }
    } 
```

以下是我单独保存视频的方式：

```
private function saveVideoEntry($videoEntry) {
        if (self::videoExists($videoEntry->getVideoId())) {
            // Do nothing if it exists
        } else {

            $videoThumbnails = $videoEntry->getVideoThumbnails();

            $thumbs = null;
            foreach ($videoThumbnails as $videoThumbnail) {
                $thumbs .= $videoThumbnail['url'] . ',';
            }

            $binds = array(
                'title' => $videoEntry->getVideoTitle(),
                'videoId' => $videoEntry->getVideoId(),
                'updated' => $videoEntry->getUpdated(),
                'description' => $videoEntry->getVideoDescription(),
                'category' => $videoEntry->getVideoCategory(),
                'tags' => implode(", ", $videoEntry->getVideoTags()),
                'watchPage' => $videoEntry->getVideoWatchPageUrl(),
                'flashPlayerUrl' => $videoEntry->getFlashPlayerUrl(),
                'duration' => $videoEntry->getVideoDuration(),
                'viewCount' => $videoEntry->getVideoViewCount(),
                'thumbnail' => $thumbs,
            );

            $sql = "INSERT INTO $this->tblName (title, videoId, updated, description, category, tags, watchPage, flashPlayerUrl, duration, viewCount, thumbnail) 
            VALUES (:title, :videoId, :updated, :description, :category, :tags, :watchPage, :flashPlayerUrl, :duration, :viewCount, :thumbnail)";

            $sth = $this->db->prepare($sql);

            foreach ($binds as $key => $value) {
                if ($value == null) {
                    $value = '';
                }
                $sth->bindValue(":{$key}", $value);
            }

            if ($sth->execute()) {
                return true;
            } else {
                print_r($sth->errorInfo());
                return false;
            }
        }
    } 
```

这是我从浏览器输出中得到的，以一种易于阅读的格式让我知道我从拉取中得到了什么：

> 表已创建并继续提取。未找到下一组结果的链接。成功拉取：20 个视频。拉取失败：0 个视频。您尝试插入：0 个重复视频。

然而，这是一个包含 36 个视频的播放列表，所以我的问题是访问剩余的视频。有没有更简单但没有记录的方法来做到这一点？任何帮助将不胜感激。

我已经尝试在请求 URL 中使用 max-results 和 start-index 元素，并在循环时将它们增加到所需的值，但这对 YouTube API 的 XML 输出没有影响。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:02:26.567

所以我决定走一条不同的路线并使用以下代码：

```
<?php

include('HttpCurl.php');

class YouTube {

    public $url;
    private $content;
    private $videoId = array();
    private $Http,$Doc;

    function __construct() {
        $this->Http = new HttpCurl();
        $this->Doc = new DOMDocument();
    }

    /*
     * Sets url to strip the videos from;
     * Insert the full URL for the videos YouTube playlist like:
     * http://www.youtube.com/watch?v=saVE7pMhaxk&list=EC6F914D0CF944737A
     */

    public function setUrl($url) {
        $this->url = $url;
        if ($this->check($this->url)) {
            $this->getPage();
        }
    }

    private function check($item) {
        if (isset($item)) {
            return true;
        } else {
            return false;
        }
    }

    /*
     * Grab the page that is needed
     */

    private function getPage() {
        $this->content = $this->Http->getContent($this->url);
        if($this->check($this->content)) {
            $this->getPlaylistVideos();
        }
    }

    /*
     * Parse page for desired result in our case this will default to the
     * playlist videos.
     */

    private function getPlaylistVideos() {
        $this->Doc->preserveWhiteSpace = false;
        // Load the url's contents into the DOM (the @ supresses any errors from invalid XML)
        if (@$this->Doc->loadHTML($this->content) == false) {
            die("Failed to load the document you specified.: " . $page);
        }

        $xpath = new DOMXPath($this->Doc);
        if ($hrefs = $xpath->query("//ol[@id='watch7-playlist-tray']//li")) {
            //echo "<br/>Grabbing Videos and playlists!";
            //Loop through each <a> and </a> tag in the dom and add it to the link array
            //$count = count($this->data['link']);
            foreach ($hrefs as $link) {
                $this->videoId[] = $link->getAttribute('data-video-id');
            }
            var_dump($this->videoId);
        }
    }

} 
```

所以不是我想要的，而是返回视频的所有 id，以便我可以解析它们以获取来自 YouTube API 的完整数据。

# javascript - 年份的 Javascript 正则表达式

> ID：14226238
> 
> 赞同：0
> 
> 时间：2013-01-09T00:03:57.503
> 
> 标签：javascript, jquery, regex

我对javascript很陌生。如果一段文本**包含**四位数的年份，我将如何找到？

例如：

```
var copyright = $('#copyright').val();
if \d{4} in copyright:
    do something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:04:42.107

像这样的事情应该这样做......

```
var isValidYear = /\d{4}/.test(str); 
```

看起来这是用户输入，因此您可能希望在尝试使用此正则表达式对其进行验证之前修剪字符串。或者，在开始锚点和结束锚点之间的任一侧添加 a `\s*`，它将足够接近`trim()`/`$.trim()`对您而言（它也不会杀死不可打印的控制字符）。

或者，如果您想测试年份是否有效（至少与 JavaScript 可以处理的一样有效），您可以这样做...

```
var isValidYear = ! isNaN(new Date(str, 0, 1)); 
```

尽管在我的 Chrome 上，这将假定`xx`是`19xx`并处理超过四位十进制数字的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:14:31.390

```
var copyright = $('#copyright').val();
if ( /^\d{4}$/.test(copyright) ) {
    // do something
} 
```

# python - 使用 pip 和 virtualenv 在 Windows 上安装 psycopg2 时出错

> ID：14226243
> 
> 赞同：3
> 
> 时间：2013-01-09T00:04:27.397
> 
> 标签：python, postgresql, heroku, virtualenv, pip

我正在关注 Heroku 的“Heroku 上的 Django 入门”文章，并且在“pip install psycopg2”上遇到了一系列错误。Django 1.4.3 和 PostgreSQL 9.2.2 已经安装，是的，postgres \bin\ 目录在 PATH 上。

![尝试安装 psycopg2 的命令窗口输出](../Images/748b5350c4d5f70c88dcefc56162ac3b.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:08:47.847

看起来 Windows 上的 Psycopg 不像使用 pip 那样简单。Psycopg 网站建议使用[这些 Windows 版本](http://www.stickpeople.com/projects/python/win-psycopg/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T19:08:50.640

作为在 Heroku 上运行 Python 入门教程的 Windows 用户，我遇到了类似的问题。我在这里找到了 pycopg2：http: [//www.stickpeople.com/projects/python/win-psycopg/](http://www.stickpeople.com/projects/python/win-psycopg/)

然后在虚拟环境目录中使用easy_install。

# algorithm - Scala代码冒泡排序循环

> ID：14226252
> 
> 赞同：0
> 
> 时间：2013-01-09T00:05:49.610
> 
> 标签：algorithm, scala, sorting

```
object BubbleSort {
  def main(args : Array[String]) : Unit = {
    bubbleSort(Array(50,33,62,21,100)) foreach println
  }
  def bubbleSort(a:Array[Int]):Array[Int]={
    for(i<- 1 to a.length-1){
      for(j <- (i-1) to 0 by -1){
        if(a(j)>a(j+1)){
          val temp=a(j+1)
          a(j+1)=a(j)
          a(j)=temp
        }
      }
    }
    a
  }
} 
```

我有上面的代码，据说是在 Scala 中实现冒泡排序。它主要对给定的数字进行排序，但它是一种实现良好的冒泡排序算法吗？另外这行代码在伪代码中的含义是什么：for(j <- (i-1) to 0 by -1){

我无法理解。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:18:06.990

弄清楚一段 Scala 代码的作用的最好方法是在 REPL 中运行它：

```
scala> 5 to 0 by -1
res0: scala.collection.immutable.Range = Range(5, 4, 3, 2, 1, 0) 
```

因此，该代码从`(i-1)`0 倒数计数。

更一般地，`x to y`创建一个从 integer`x`到 integer的 Range `y`。该`by`部分修改此计数。例如，`0 to 6 by 2`表示“从 0 到 6 计数 2”，或`Range(0, 2, 4, 6)`. 在我们的例子中，`by -1`表示我们应该倒数*1*。

至于了解冒泡排序的工作原理，您应该阅读 Wikipedia[文章](http://en.wikipedia.org/wiki/Bubblesort)并使用它来帮助您了解代码在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-27T19:10:48.753

您发布的示例基本上是在 Scala 中进行冒泡排序的命令式或 Java 方式，这还不错，但违背了 Scala 中函数式编程的目的。我们可以编写如下相同的代码排序器（基本上结合了 for 循环一行并在源长度上做一个范围）

```
 def imperativeBubbleSort[T <% Ordered[T]](source: Array[T]): Array[T] = {
    for (i <- 0 until source.length - 1; j <- 0 until source.length - 1 - i) {
      if (source(j) > source(j + 1)) {
         val temp = source(j)
         source(j) = source(j + 1)
         source(j + 1) = temp
      }
    }
    source
   }

Scala Flavor of bubble sort can be different and simple example is below
(basically usage of Pattern matching..)

    def bubbleSort[T <% Ordered[T]](inputList: List[T]): List[T] = {
      def sort(source: List[T], result: List[T]) = {
          if (source.isEmpty) result
          else bubble(source, Nil, result)
      }

    def bubble(source: List[T], tempList: List[T], result: List[T]): List[T] = source match {
          case h1 :: h2 :: t =>
              if (h1 > h2) bubble(h1 :: t, h2 :: tempList, result)
              else bubble(h2 :: t, h1 :: tempList, result)
          case h1 :: t => sort(tempList, h1 :: result)
    }
    sort(inputList, Nil)
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-15T23:24:53.000

这可能是冒泡排序的最短功能实现

```
/**
 * Functional implementation of bubble sort
 * sort function swaps each element in the given list and create new list and iterate the same operation for length of the list times.
 * sort function takes three parameters
 * a) iteration list -> this is used to track the iteration. after each iteration element is dropped so that sort function exists the iteration list is empty
 * b) source list -> this is source list taken for element wise sorting
 * c) result -> stores the element as it get sorted and at end of each iteration, it will be the source for next sort iteration
 */

object Test extends App  {
  def bubblesort(source: List[Int]) : List[Int]  = {
    @tailrec
    def sort(iteration: List[Int], source: List[Int] , result: List[Int]) : List[Int]= source match {
      case h1 :: h2 :: rest => if(h1 > h2) sort(iteration, h1 :: rest, result :+ h2) else sort(iteration, h2 :: rest, result :+ h1) 
      case l:: Nil => sort(iteration, Nil, result :+ l)
      case Nil => if(iteration.isEmpty) return result else sort(iteration.dropRight(1), result, Nil )
    }
    sort(source,source,Nil)
  }
  println(bubblesort(List(4,3,2,224,15,17,9,4,225,1,7)))
 //List(1, 2, 3, 4, 4, 7, 9, 15, 17, 224, 225)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-04T11:46:10.773

```
 @tailrec
  def bubbleSort(payload: List[Int], newPayload: List[Int], result: List[Int]): List[Int] = {
    payload match {
      case Nil => result
      case s::Nil => bubbleSort(newPayload, List.empty, s::result)
      case x::xs => x.compareTo(xs.head) match {
        case 0 => bubbleSort(xs, x::newPayload, result)
        case 1 => bubbleSort(x::xs.tail, xs.head::newPayload, result)
        case -1 => bubbleSort(xs, x::newPayload, result)
      }
    }
  }
  val payload = List(7, 2, 5, 10, 4, 9, 12)
  bubbleSort(payload, List.empty, List.empty) 
```

# gcc - 动态链接 gcc

> ID：14226254
> 
> 赞同：3
> 
> 时间：2013-01-09T00:05:58.983
> 
> 标签：gcc, build, static-linking

这实际上是两个问题：

1 - 在我的 debian amd64 系统上，我似乎无法构建与 gmp/mpfr/mpc 动态链接的交叉 GCC。即使我删除它也总是静态链接它们`--disable-shared`，哪个AFAIK是交叉编译器中的唯一目标选项？

2 - 为什么每个人都将 gcc 与这些库静态链接？我理解如果您正在引导一个系统，为什么您希望它静态链接，但我不明白为什么看到静态链接的 gcc 如此普遍......我的直觉是静态链接 gcc 是浪费的可以动态链接它。是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:10:26.703

> 即使我删除 --disable-shared 它也总是静态链接它们

共享 = 动态

静态 = 静态

就这些。

# java - Bash 在 Java 中无法正确执行

> ID：14226255
> 
> 赞同：0
> 
> 时间：2013-01-09T00:06:02.247
> 
> 标签：java, bash

我正在编写一个需要从系统的 /dev/urandom 接口中提取 32 个字符的密钥的 Java 程序。为此，我使用以下过程：

```
public String generateKey() {
            try {
                    Runtime run = Runtime.getRuntime();
                    Process pr = run.exec("tr -cd '[:alnum:]' < /dev/urandom | fold -w30 | head -n1;echo;");
                    pr.waitFor();
                    BufferedReader buf = new BufferedReader(new InputStreamReader(pr.getInputStream()));
                    StringBuffer sb = new StringBuffer();
                    String line = "";
                    while ((line = buf.readLine())!= null ) {
                            sb.append(line);
                    }
                    return sb.toString();
            } catch (Exception e) {
                    e.printStackTrace();
                    return "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0";
            }
    } 
```

（如果它不能这样做，那么它将返回一堆空字符）

由于某种原因，它什么都不返回（或抛出异常而不打印堆栈跟踪）。我知道这一点，因为我将它打印到控制台（什么都没有），当我将它提供给我的 RC4 引擎时，它会引发除以零错误。为什么命令不起作用，我怎样才能使它起作用？

感谢您的帮助。

**编辑：**在我发布此消息后不到两分钟，我推断它没有返回空字符，因为我将它设置为返回单词“柠檬”并且它做了同样的事情，所以它不会抛出异常。

**编辑2：**根据评论中的建议，我尝试从文件中直接读取结果相同，但我认为我可能做错了......

```
File file = new File("/dev/urandom");
            FileReader freader = null;
            StringBuffer sb = new StringBuffer();
            int x = 0;
            try {
                    freader = new FileReader(file);
                    BufferedReader reader = new BufferedReader(freader);
                    for (int i=0;(i<32||(x=reader.read())==-1);i++) {
                            sb.append((char) x);
                    }
            return sb.toString();
            } catch(Exception e) {
                    e.printStackTrace();
                    return "a\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0";
            } 
```

**编辑 3：**这可能对那些帮助的人有所帮助：使用上面的代码并将输出传送到 od 我发现它只是读取 0。（同样，它不会抛出异常，否则它不会全为零：）

```
# ./run.sh | od
0000000 000000 000000 000000 000000 000000 000000 000000 000000
* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:38:28.563

> `Process pr = run.exec("tr -cd '[:alnum:]' < /dev/urandom | fold -w30 | head -n1;echo;");`

管道 ( `|`) 和重定向 ( `<`) 由 shell 处理，而不是操作系统。您可以通过将整个命令作为字符串参数传递给`sh`. 请参阅以下示例并对其进行调整以供您使用：

```
import java.io.*;
class P1 {
    public static void main(String[] args) throws Exception {
        Runtime run = Runtime.getRuntime();
        Process pr = run.exec("sh -c \"ls </dev/null | grep java\"");
        pr.waitFor();
        BufferedReader buf = new BufferedReader(new InputStreamReader(pr.getInputStream()));
        String line;
        while ((line = buf.readLine())!= null ) {
            System.out.println(line);
        }
    }
} 
```

**编辑**

虽然上述内容可能会帮助您运行使用重定向的 shell 命令，但在当前实例中，正确的方法是根本不使用外部进程，而是直接读取`/dev/urandom`，正如 @Josh Cartwright 在[此评论中解释的那样](https://stackoverflow.com/questions/14226255/bash-not-executing-correctly-in-java/14226535#comment19734899_14226255)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T00:24:06.800

尽管这不是绝对必要的，但为了运行具有多个命令行参数的程序，您需要创建一个包含命令的字符串数组作为第一个参数，并且每个空格都应该是数组的一个条目，例如对于 ls -l

```
String[] command = {"ls" , "-l"};
Runtime.getRuntime().exec(command); 
```

这会正确调用命令行。这是 javadoc：[执行 javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:26:22.357

做的时候不能用linux管道运行几个commans `Runtime.exec()`。您应该单独运行命令或`tr`手动处理命令的结果。除此之外，您必须使用完整路径来命令二进制文件，例如替换`tr`为`/usr/bin/tr`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T16:25:41.160

正如 user 已经指出的那样`Miserable Variable`，尝试在实际的 Unix shell 中运行您的命令；并确保 shell 作为交互式 shell ( `sh -i -c 'cmd1 | cmd2'`) 被调用。

否则 UNIX 管道机制似乎会被阻塞，因为`tr`不断读取`/dev/urandom`但由于某种原因拒绝写入其`stdout`.

`Terminal.app`尽管以下命令运行没有任何问题，但仍执行：

`sh -c 'LC_ALL=C tr -cd [:alnum:] < /dev/urandom | fold -w30 | head -n1; echo;'`

另一种方法是明确限制读取的字节数`/dev/urandom`（参见下面的代码）。

```
/*

# cat GenerateKey.java
javac GenerateKey.java
java GenerateKey

# For more information see the "Java exec and Unix pipes" comment in:
# "Java exec - execute system processes with Java ProcessBuilder and Process (part 3)",
# http://alvinalexander.com/java/java-exec-processbuilder-process-3

*/

import java.io.*;
import java.util.*;

public class GenerateKey {
    public static void main(String[] args) throws Exception {
        Runtime run = Runtime.getRuntime();

        // does not work on Mac OS X 10.6.8
        //String[] cmd = { "/bin/sh", "-c", "LC_ALL=C tr -cd '[:alnum:]' < /dev/urandom | fold -w30 | head -n1; echo;" };  

        // works
        String[] cmd = { "/bin/sh", "-i", "-c", "LC_ALL=C tr -cd '[:alnum:]' < /dev/urandom | fold -w30 | head -n1; echo;" };  
        //String[] cmd = { "/bin/sh", "-c", "head -c 3000 < /dev/urandom | LC_ALL=C tr -cd '[:alnum:]' | head -c 30" }; 
        //String[] cmd = { "/bin/sh", "-c", "dd if=/dev/urandom bs=3000 count=1 2>/dev/null | LC_ALL=C tr -cd '[:alnum:]' | fold -w30 | head -n1" }; 
        Process pr = run.exec(cmd);

        pr.waitFor();
        BufferedReader buf = new BufferedReader(new InputStreamReader(pr.getInputStream()));
        String line;
        while ((line = buf.readLine())!= null ) {
            System.out.println(line);
        }
    }
} 
```

# ios - Xcode 不会解析文件来查找错误

> ID：14226258
> 
> 赞同：2
> 
> 时间：2013-01-09T00:06:11.633
> 
> 标签：ios, xcode

我有一个奇怪的问题，我在其他任何地方都没有看到或读过。我的 Xcode 不再解析我的所有文件来查找问题/错误。它将显示我当前正在查看的文件中的任何问题或错误，此后这些问题或错误将持续存在，但是对于 400 多个文件，我无法合理地访问每个文件以使其编译。如果代码有效，Xcode 可以成功构建，但是我永远不知道那是什么时候，因为我没有看到任何错误。发生索引，但不进行编译。

此外，在构建时，状态栏会指出 Xcode 正在从许多总编译源中编译 x，但总数通常甚至不接近实际总数。例如，当实际上有 400 个编译源时，它可能会说从 40 个文件中编译 x。

当这个问题开始时，我并没有在我的日常任务中做任何不寻常的事情。新项目会编译，一段时间后随机停止编译。

我尝试过的事情：

*   核爆衍生数据
*   退出 Xcode/重新启动计算机
*   从已知的工作存储库重新克隆项目。它会构建，但在确实存在时不会发现错误/问题。至少应该有一些小问题，但没有出现。
*   重新安装 Xcode (4.5.2)
*   尝试了 GCC 4.2 和 LLVM 4.1 编译器

有没有人遇到过这个问题并找到了解决方案？这个问题使我的工作变得非常困难，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:12:33.127

听起来确实像 DerivedData 的损坏。试试这个：

1.  清理目标：cmd+shift+K 或 Product->Clean
2.  退出 xcode
3.  删除 /Users/your_user/Library/Developer/Xcode/DerivedData 的内容
4.  重启xcode

（删除此文件夹的内容是安全的。但如果您对此感到紧张，请先备份它）。

你应该很高兴。

# android - api16/jellybean 上的摄像机配置文件

> ID：14226260
> 
> 赞同：1
> 
> 时间：2013-01-09T00:06:28.023
> 
> 标签：android, android-4.2-jelly-bean, mediarecorder

在我的媒体记录器应用程序中，我有

```
 CamcorderProfile cp480=CamcorderProfile.get(CamcorderProfile.QUALITY_QVGA);
 recorder.setProfile(cp480); 
```

它在 API 级别 15 上运行良好，但对于 API 16，`cp480`它是一个`NullPointerException`. 有谁知道果冻豆的哪些变化可能导致这种情况？

# php - 从抓取的 xml 提要中删除虚拟换行符

> ID：14226263
> 
> 赞同：0
> 
> 时间：2013-01-09T00:06:43.397
> 
> 标签：php, string, str-replace, removing-whitespace

我正在尝试从 php 中的字符串中删除所有额外的空白字符。字符串源来自客户评论的 xml 提要。

一些评论有太多的空白，它们出现在我的 html 中！无论是......空格键被击中太多次，回车或换行符，我只希望`' '`字符之间最多有一个空格。

```
$review = str_replace(array('\n','\r\n',PHP_EOL,'\0','\t'), '', $reviewText[1]);
$review = trim(ereg_replace(' +', ' ', $review)); 
```

我也尝试过使用`preg_replace('/\s\s+/', ' ', $review);`而不是`trim(ereg_replace(`行

尽管我尽了最大的努力，我仍然无法让这个不可见的空格/换行符消失。

有任何想法吗？

我已将下面的评论粘贴为 xxx 以替换任何类型的识别信息。这是一个输出`var_dump($review);`

这是下面的评论：

[http://www.mangomm.co.uk/test/string.php](http://www.mangomm.co.uk/test/string.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:11:04.893

`ereg_*`函数已[弃用](http://php.net/manual/en/function.ereg-replace.php)。不要使用它们。

以下正则表达式应该可以工作

```
preg_replace('/[[:space:]]+/', ' ', $review); 
```

`[:space:]`匹配空白字符。在**“C”**和**“POSIX”**语言环境中，它们是空格、换页`\f`符 ( )、换行符 ( `\n`)、回车符 ( `\r`)、水平制表符 ( `\t`) 和垂直制表符 ( `\v`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:13:12.410

[rtrim()](http://prototype.php.net/rtrim) [ltrim()](http://prototype.php.net/ltrim) [修剪()](http://prototype.php.net/trim)

这些应该可以满足您的需求。

`trim('----')`应该输出''

`rtrim('----a----');`应该输出'----a'

`ltrim('----a----');`应该输出'a----'

每个连字符代表一个空格。

编辑：

*在*我读了你的帖子之后:)

新行是断线（`<br>, <br />`等）吗？`print_r`不将文本转换为 htmlentities

# thumbnails - 在我的博客中拉伸生成的缩略图 - 如何修复它？

> ID：14226264
> 
> 赞同：0
> 
> 时间：2013-01-09T00:06:45.033
> 
> 标签：thumbnails, stretched

我使用 blogger.com 创建了一个博客，但遇到了困难：

*   每当我创建帖子时，它都会自动创建我上传的图像的缩略图。问题是：生成的缩略图被拉伸/扭曲（它没有保持纵横比）。

我能做些什么来解决这个问题吗？我的博客网址 = [http://fabianamakeupartist.blogspot.com.br/](http://fabianamakeupartist.blogspot.com.br/)

（我实际上是在编程，我对 html 知之甚少，这让我可以稍微编辑博客。对不起，如果我在错误的地方问这个问题，对不起我的英语不好）。

非常感谢您的帮助。此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T07:26:30.650

you need to go to advanced feature under custom template blogger and add your own css for post thumbnail to fix the problem.

# c# - Mono Runtime - 是否可以强制只运行强命名或签名程序集？

> ID：14226266
> 
> 赞同：1
> 
> 时间：2013-01-09T00:06:51.787
> 
> 标签：c#, mono, strongname

是否有一些 Mono 运行时配置的咒语可用于强制 Mono 仅运行强命名或签名程序集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:36:19.870

简短的回答：**没有**

长答案：

Mono 是开源的，本着这种精神，没有什么可以限制人们运行或修改运行时或 Mono 附带的类库。

大多数功能（例如强名称甚至验证码）都存在于 Mono 中，因为它们可以用于其他目的，或者可选地用于签名/验证代码。

OTOH 同样的自由允许**您**修改自己的单声道运行时，签署您的程序集（使用您自己的密钥）并**要求**在执行任何程序集之前对其进行签名。

然而，这从来都不是我所知道的任何项目的要求（例如，Moonlight 使用了不强制代码签名的 CoreCLR）。这只意味着这将是你需要弄清楚的事情，并不是不可能的：所有的部分都在那里，但请注意，需要大量的胶水。

# sharepoint-2010 - Sharepoint 2010：Windows Live ACS：重定向到登录页面

> ID：14226267
> 
> 赞同：2
> 
> 时间：2013-01-09T00:06:55.477
> 
> 标签：sharepoint-2010, acs, claims

环境：SharePoint 2010

身份验证：基于声明（通过 ACS 的 Windows Live）和 Windows 声明。

授权：用户使用 PUID 添加到站点上的 Contribute 组。

问题：每当用户单击 SharePoint 页面上的任何链接时，都会将用户重定向到登录页面。这只发生在 Live 用户而不是 Domain 用户。

我是否缺少任何配置。

# mysql - JavaEE JTA UserTransaction 向多个表中插入数据

> ID：14226270
> 
> 赞同：0
> 
> 时间：2013-01-09T00:07:12.993
> 
> 标签：mysql, jpa, jakarta-ee, jboss, foreign-keys

我如何将数据插入到多个表（MySQL）中`Java EE&JBoss7.1`. 我做了几个简单的教程，但现在我有一个表和一个文件，我在其中添加了我的数据，并且从 EntityManager 调用了添加数据的这个文件方法。现在我想使用许多具有关系的表。我添加了一个我想做的简单示例。

[结构表](http://www73.zippyshare.com/v/48459839/file.html)

我的表（类）是使用 JPA 2.0 生成的。

用户.java：

```
@Entity
@Table(name="users")
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private int id;

    private String name;

    private String password;

    //bi-directional one-to-one association to Profile
    @OneToOne(mappedBy="user")
    private Profile profile;

    //bi-directional many-to-one association to UserRole
    @OneToMany(mappedBy="user")
    private Set<UserRole> userRoles;

    //bi-directional many-to-many association to Activity
    @ManyToMany
    @JoinTable(
        name="user_activity"
        , joinColumns={
            @JoinColumn(name="users_id")
            }
        , inverseJoinColumns={
            @JoinColumn(name="activities_id")
            }
        )
    private Set<Activity> activities;

    public User() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Profile getProfile() {
        return this.profile;
    }

    public void setProfile(Profile profile) {
        this.profile = profile;
    }

    public Set<UserRole> getUserRoles() {
        return this.userRoles;
    }

    public void setUserRoles(Set<UserRole> userRoles) {
        this.userRoles = userRoles;
    }

    public Set<Activity> getActivities() {
        return this.activities;
    }

    public void setActivities(Set<Activity> activities) {
        this.activities = activities;
    }

} 
```

用户角色.java：

```
@Entity
@Table(name="user_roles")
public class UserRole implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private UserRolePK id;

    private String name;

    //bi-directional many-to-one association to User
    @ManyToOne
    @JoinColumn(name="users_id", insertable = false, updatable = false)
    private User user;

    public UserRole() {
    }

    public UserRolePK getId() {
        return this.id;
    }

    public void setId(UserRolePK id) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }

} 
```

用户角色PK.java：

```
@Embeddable
public class UserRolePK implements Serializable {
    //default serial version id, required for serializable classes.
    private static final long serialVersionUID = 1L;

    @Column(name="users_id")
    private int usersId;

    @Column(name="role_name")
    private String roleName;

    public UserRolePK() {
    }
    public int getUsersId() {
        return this.usersId;
    }
    public void setUsersId(int usersId) {
        this.usersId = usersId;
    }
    public String getRoleName() {
        return this.roleName;
    }
    public void setRoleName(String roleName) {
        this.roleName = roleName;
    }

    public boolean equals(Object other) {
        if (this == other) {
            return true;
        }
        if (!(other instanceof UserRolePK)) {
            return false;
        }
        UserRolePK castOther = (UserRolePK)other;
        return 
            (this.usersId == castOther.usersId)
            && this.roleName.equals(castOther.roleName);

    }

    public int hashCode() {
        final int prime = 31;
        int hash = 17;
        hash = hash * prime + this.usersId;
        hash = hash * prime + this.roleName.hashCode();

        return hash;
    }
} 
```

数据已插入“用户”，但其余部分不起作用。

我写了这个：

```
@ManagedBean(name="bean")
//@SessionScoped
//@LocalBean

public class RegistrationBean implements Serializable{
    /**
     * 
     */
    private static final long serialVersionUID = 3158649307217736396L;
    //////////////////////////////////////////////////////////////////

        public String name;
        public String password;
        public int id;

        public int usersId = id;
        public String roleName="user";

        public Set<UserRole> userRoles;

        @EJB
        private UserService us;

        public int getUsersId() {
            return usersId;
        }

        public void setUsersId(int usersId) {
            this.usersId = usersId;
        }

        public String getRoleName() {
            return roleName;
        }

        public void setRoleName(String roleName) {
            this.roleName = roleName;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getPassword() {
            return password;
        }

        public void setPassword(String password) {
            this.password = password;
        }

        public int getId() {
            return id;
        }

        public void setId(int id) {
            this.id = id;
        }

        public String addUser() {
            User u = new User();
            UserRolePK urpk = new UserRolePK();
            UserRole ur = new UserRole();
            u.setName(name);
            u.setPassword(password);
            u.setId(id);

            urpk.setUsersId(usersId);
            urpk.setRoleName(roleName);

            ur.setName(name);
            ur.setUser(u);

            us.addUser(u);
            us.addUser(urpk);
            us.addUser(ur);
            return "registerbean";

        }
} 
```

和：

```
@Stateless
@LocalBean
//@ManagedBean
public  class UserService implements UserServiceInterface {

    @PersistenceContext(unitName="virtual.trainer.library")
    private EntityManager em;

    public UserService() {

    }

    @SuppressWarnings("unchecked")
    @Override
    public List<User> getUsers() {
        return em.createQuery("FROM User").getResultList();
    }

    public void addUser(User u) {
        // TODO Auto-generated method stub
        em.persist(u);
    }

    public void addUser(UserRolePK urpk) {
        // TODO Auto-generated method stub
        em.persist(urpk);
    }

    public void addPK(UserRolePK urpk) {
        // TODO Auto-generated method stub
        em.persist(urpk);
    }

    public void addUser(UserRole ur) {
        // TODO Auto-generated method stub
        em.persist(ur);
    }

} 
```

好的，我制作了“UserTransaction”JTA，但我仍然有问题：

```
@ManagedBean(name="bean")
//@SessionScoped
//@LocalBean

public class RegistrationBean implements Serializable{
    /**
     * 
     */
    private static final long serialVersionUID = 3158649307217736396L;

    //u
        public String name;
        public String password;
        public Set<UserRole> userRoles;
    //ur
        public UserRolePK id;
        public User user;
    //urpk
        public String roleName="user";
        public int usersId;

        @EJB
        private UserService us;

        //--- getter, setter

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getPassword() {
            return password;
        }

        public void setPassword(String password) {
            this.password = password;
        }

        public Set<UserRole> getUserRoles() {
            return userRoles;
        }

        public void setUserRoles(Set<UserRole> userRoles) {
            this.userRoles = userRoles;
        }

        public UserRolePK getId() {
            return id;
        }

        public void setId(UserRolePK id) {
            this.id = id;
        }

        public User getUser() {
            return user;
        }

        public void setUser(User user) {
            this.user = user;
        }

        public String getRoleName() {
            return roleName;
        }

        public void setRoleName(String roleName) {
            this.roleName = roleName;
        }

        public int getUsersId() {
            return usersId;
        }

        public void setUsersId(int usersId) {
            this.usersId = usersId;
        }

        public String addUser()  {

            User u = new User();
            UserRole ur = new UserRole();
            UserRolePK urpk = new UserRolePK();

            u.setName(name);
            u.setPassword(password);
            u.setUserRoles(userRoles);

            ur.setName(name);
            ur.setUser(user);
            ur.setId(urpk);

            urpk.setRoleName(roleName);
            urpk.setUsersId(usersId);

            us.addUser(u, ur);

            return "adduser";
        }
} 
```

用户服务.java：

```
@Stateless
@LocalBean
public  class UserService implements UserServiceInterface {

    @PersistenceContext(unitName="virtual.trainer.entities", type=PersistenceContextType.TRANSACTION)
    private EntityManager em;

    @Resource
    @ Inject
    private UserTransaction xtx ;

    public UserService() {

    }

    @SuppressWarnings("unchecked")
    @Override
    public List<User> getUsers() {
//      return null;
        return em.createQuery("FROM User").getResultList();
    }

    public void addUser(User u, UserRole ur)  {

            try {
                xtx.begin();
                em.persist(u);
                em.persist(ur);
                xtx.commit();
            } catch (NotSupportedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia1/7");
            } catch (SystemException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia2/7");
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia3/7");
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia4/7");
            } catch (RollbackException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia5/7");
            } catch (HeuristicMixedException e) {
                // TODO Auto-generated catch block  
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia6/7");
            } catch (HeuristicRollbackException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Chujnia z grzybnia7/7");
            }

//          em.persist(urpk);

            em.flush();
//          em.close();

    }

} 
```

安慰：

```
07:28:53,476 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) javax.transaction.NotSupportedException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!

07:28:53,478 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:63)

07:28:53,479 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:65)

07:28:53,480 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:142)

07:28:53,481 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at virtual.trainer.bean.UserService.addUser(UserService.java:66)

07:28:53,482 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

07:28:53,483 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

07:28:53,484 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

07:28:53,484 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at java.lang.reflect.Method.invoke(Unknown Source)

07:28:53,485 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72)

07:28:53,486 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,487 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)

07:28:53,488 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36)

07:28:53,489 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,490 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)

07:28:53,491 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,492 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)

07:28:53,493 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,494 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)

07:28:53,495 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)

07:28:53,496 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,497 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)

07:28:53,498 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,499 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228)

07:28:53,499 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304)

07:28:53,500 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190)

07:28:53,501 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,502 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)

07:28:53,503 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,504 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)

07:28:53,505 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,506 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)

07:28:53,507 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,508 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32)

07:28:53,509 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,510 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)

07:28:53,511 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,511 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)

07:28:53,512 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165)

07:28:53,513 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173)

07:28:53,514 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

07:28:53,515 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)

07:28:53,516 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72)

07:28:53,517 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at virtual.trainer.bean.UserService$$$view297.addUser(Unknown Source)

07:28:53,517 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at pl.wlukasiak.beans.RegistrationBean.addUser(RegistrationBean.java:120)

07:28:53,518 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

07:28:53,519 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

07:28:53,520 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

07:28:53,521 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at java.lang.reflect.Method.invoke(Unknown Source)

07:28:53,521 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.el.parser.AstValue.invoke(AstValue.java:262)

07:28:53,522 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)

07:28:53,523 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)

07:28:53,524 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)

07:28:53,525 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)

07:28:53,526 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at javax.faces.component.UICommand.broadcast(UICommand.java:315)

07:28:53,527 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)

07:28:53,527 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)

07:28:53,528 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)

07:28:53,529 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)

07:28:53,530 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)

07:28:53,531 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)

07:28:53,532 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)

07:28:53,533 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)

07:28:53,533 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)

07:28:53,534 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)

07:28:53,535 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397)

07:28:53,536 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)

07:28:53,537 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)

07:28:53,538 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)

07:28:53,539 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)

07:28:53,540 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)

07:28:53,541 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)

07:28:53,542 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)

07:28:53,542 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)

07:28:53,543 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)

07:28:53,544 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at java.lang.Thread.run(Unknown Source)

07:28:53,545 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) Caused by: java.lang.IllegalStateException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!

07:28:53,546 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.checkTransactionState(BaseTransaction.java:257)

07:28:53,547 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:59)

07:28:53,548 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   ... 74 more

07:28:53,549 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Chujnia z grzybnia1/7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:50:10.147

您不能一次更新两个表。

您可以通过将 vars 传递给 proc 创建一个数据库过程来执行此操作。

使用事务，您可以检查更新结果并继续进行下一次更新。如果其中一个失败，您可以回滚并且不会发生任何更改。

MySql 支持这一点，但您需要使用正确的设置和数据库 [ InnoDB ]。

开始交易；更新表一组 x = bla; if error rollback else 更新表二 set y = bla; 如果错误回滚，否则提交；

[http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

该示例不是代码 - 只是一个示例

您可以用 Java 或更好的方式编写它——避免使用 Java 并编写一个 proc 。 [http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)

# wcf - 使用 Protobuf-net 序列化 WorkflowServices

> ID：14226274
> 
> 赞同：3
> 
> 时间：2013-01-09T00:07:20.733
> 
> 标签：wcf, workflow-foundation-4, protobuf-net

背景：我有一个将新产品放入产品数据库的过程，该过程允许客户进行 WCF 调用并将原始产品对象发送到进行各种处理的方法中。这种方法变得笨重且难以维护，因此我决定用工作流服务替换该方法。我已经从原始流程中获得了操作合同接口，因此我创建了一个实现相同接口的工作流服务（使用此处概述的技术[Workflow Service that Consumes an Existing Contract](http://msdn.microsoft.com/en-us/library/hh305676.aspx)）。按照刚才提到的链接中的步骤，将为原始操作合同中的方法自动生成发送/接收对活动。然后在工作流服务中使用这些活动。因此，客户无需更改任何内容，因为他们仍在使用原始合同。

这个新的工作流服务托管在 IIS 中。在配置中，我在服务和客户端上都指定了一个 behaviorConfiguration，这应该导致 WCF 使用 protobuf-net 进行序列化。此 WCF 配置与原始流程相同，只是地址现在是工作流服务文件（.xamlx 文件）而不是原始 .svc 文件。但是，当服务是 WF4 工作流服务时，这种行为配置会导致问题（基本上它不起作用，并且我发送到工作流中的任何数据最终都为空）。如果我删除此序列化行为，一切都会按预期工作。

因此，我的问题是是否可以将 protobuf-net 序列化与工作流服务一起使用？我读过这篇文章[在工作流服务中配置序列化](http://msdn.microsoft.com/en-us/library/ff742829.aspx "在工作流服务中配置序列化")，它表明因为工作流服务是 WCF 服务，所以我们可以选择序列化，但接着只列出了两个基本选项（在第一句中）。我原以为我们可以以某种方式更改它以添加我们自己的序列化选项，但看不到任何直接的方法来做到这一点。

我的服务合同如下：

```
[ServiceContract(Namespace = "http://www.MyCompany.com/services/", Name = "NewProductApprovalWorkflow")]
[ContractClass(typeof(NewProductApprovalWorkflowContracts))]
public interface INewProductApprovalWorkflow
{
    /// <summary>
    /// Instantiates a new product approval workflow.
    /// </summary>
    /// <param name="product"></param>
    /// <returns></returns>
    [OperationContract]
    Product StartNewProductApprovalWorkflow(Product product);

    /// <summary>
    /// Approves the product for approval in the product catalog
    /// </summary>
    /// <param name="product"></param>
    /// <returns></returns>
    [OperationContract]
    Product CompleteProductApprovalWorkflow(Product product, ProductApproval approvalInfo);

} 
```

“Product”和“ProductApproval”对象太大，无法在此处发布，但基本上是原始类型，并且从序列化角度经过了很好的测试（它们在我们的平台上用于许多不同的 WCF 服务，所有这些服务都使用 protobuf-网络行为没有任何问题）。

此外，我在 WCF 上启用了消息日志记录，我可以看到消息中的 proto 节点填充了序列化对象（在客户端发送日志和 wcf 接收日志中）。跟踪服务模型、活动和服务模型消息的输出不会显示任何其他错误，除了 wf 服务尝试使用的空对象导致的错误。

欢迎任何想法或建议！

# java - Java，找不到带有 StkTrc 的文本文件

> ID：14226282
> 
> 赞同：0
> 
> 时间：2013-01-09T00:07:59.233
> 
> 标签：java

当它尝试为 Build 函数中的文件创建扫描仪时，我得到一个错误。创建文件后，它具有路径名作为文件，但是当扫描仪尝试使用该文件时，它找不到所述文件。两个扫描仪都失败了。

我刚刚开始在这里工作，在此之前它工作得很好，我没有改变构建方法或扫描部分只是为了调试，所以我知道那仍然是一样的。（第一个构建方法删除了调试代码）。

***如果人们想要该文件，我会发布一张图片，位于“C:\Users\User\Documents\”中，我知道我会被问到该文件是否存在。

```
import java.applet.Applet;
import java.awt.Button;
import java.awt.FlowLayout;
import java.awt.TextArea;
import java.awt.TextField;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.StringTokenizer;

public class CLInventorizerMaster extends Applet implements ActionListener
{

/**
 * Version 1.0 
 */
private static final long serialVersionUID = 1L;

Runtime rt = null;

//Data
int m_iNext = 0;
int m_iInventorySize = 2000;
static String m_sInventoryPath = null;
static String m_sMarkedItemsPath = null;
String m_saInventory[] = new String[m_iInventorySize];
String m_saNumber[] = new String[m_iInventorySize];
String m_saDescription[] = new String[m_iInventorySize];
String m_saRetail[] = new String[m_iInventorySize];
String m_saDiscount[] = new String[m_iInventorySize];
String m_saPrice[] = new String[m_iInventorySize];

String m_saMarkedItems[] = new String[m_iInventorySize];
String m_saActive[] = new String[m_iInventorySize];

// Visual
Button m_BtnLoadInventory = null;
Button m_BtnLoadItems = null;
TextField m_TxtLoadInventory = null;
TextField m_TxtLoadItems = null;
TextField m_TxtDescription = null;
TextField m_TxtItemNumber = null;
TextField m_TxtRetail = null;
TextField m_TxtDiscount = null;
TextField m_TxtPrice = null;
TextArea m_TxtaOut = null;
Button m_BtnNext = null;

public void init()
{
    //****Set the layout
    setLayout(new FlowLayout());

    //****Initilize components 
    //Loading
    m_BtnLoadInventory = new Button("    Load Inventory   ");
    m_TxtLoadInventory = new TextField("C:\\Users\\User\\Documents\\InputInventory.txt", 90);
    m_BtnLoadItems = new Button("Load MarkedItems");
    m_TxtLoadItems = new TextField("C:\\Users\\User\\Documents\\ItemsMarked.txt", 90);
    // Info 
    m_TxtDescription = new TextField("Description", 110);
    m_TxtItemNumber = new TextField("0.0000", 20);
    m_TxtRetail = new TextField("$0.00", 20);
    m_TxtDiscount = new TextField("00%", 20);
    m_TxtPrice = new TextField("$0.00", 20);
    m_TxtaOut = new TextArea("<HTML>", 15, 100);
    //Next
    m_BtnNext = new Button("Next");

    //****Add components
    //Loading
    add(m_BtnLoadInventory);
    add(m_TxtLoadInventory);
    add(m_BtnLoadItems);
    add(m_TxtLoadItems);
    //Info
    add(m_TxtDescription);
    add(m_TxtItemNumber);
    add(m_TxtRetail);
    add(m_TxtDiscount);
    add(m_TxtPrice);
    add(m_TxtaOut);
    //Next
    add(m_BtnNext);

    //Start Action listener
    m_BtnLoadInventory.addActionListener(this);
    m_BtnLoadItems.addActionListener(this);
    m_BtnNext.addActionListener(this);

    //Set Size
    this.setSize(800, 600);

    // Other
    rt = Runtime.getRuntime();
}

@Override
public void actionPerformed(ActionEvent evt)
{
    // Load Button, try to load the inventory
    if (evt.getSource() == m_BtnLoadInventory)
    {
        if(m_TxtLoadInventory.getText().length() != 0)
        {
            m_sInventoryPath = m_TxtLoadInventory.getText();
            m_sMarkedItemsPath = m_TxtLoadItems.getText();
            System.out.println(m_sInventoryPath);
            System.out.println(m_sMarkedItemsPath);

            if( this.BuildInventory() )
                m_TxtLoadInventory.setText(" Loaded Succesfully ");
            else
            {
                m_TxtLoadInventory.setText(" FAILED ");
                //System.exit(1);
            }
            if( this.BuildMarkedItems() )
            {
                m_TxtLoadItems.setText(" Loaded Succesfully ");

            }
            else
            {
                m_TxtLoadItems.setText(" FAILED ");
                //System.exit(1);
            }
        } 
     }
     else 
     // Next
     if(evt.getSource() == m_BtnNext)
     {
        if(true)
        {
            // Find the index of the next item in the marked list
            int index = findTerm(m_saMarkedItems[m_iNext]);
            System.out.println(index);
            // Increase next
            m_iNext = m_iNext + 1;
            // If not in the list
            if (index < 0)
            {
                 m_TxtDescription.setText("NOT FOUND IN INVENTORY");
                 m_TxtItemNumber.setText("!!!!!");
                 m_TxtRetail.setText("!!!!!");
                 m_TxtDiscount.setText("!!!!!");
                 m_TxtPrice.setText("!!!!!");
                 m_TxtaOut.setText("!!!!!");
            }
            else
            {
                  if(m_saNumber[index].equals(""))
                  {
                     m_TxtaOut.setText("------- No Number --------");
                     m_TxtRetail.setText(m_saRetail[index]);
                     m_TxtPrice.setText(m_saPrice[index]);
                     m_TxtDescription.setText(m_saDescription[index]);
                  }
                  else
                  {

                    //Update txtOut
                     m_TxtItemNumber.setText(m_saInventory[index]);
                     m_TxtDiscount.setText(m_saDiscount[index]);
                     m_TxtRetail.setText(m_saRetail[index]);
                     m_TxtPrice.setText(m_saPrice[index]);
                     m_TxtDescription.setText(m_saDescription[index]);

                  }
              }
         }
     }
 }

boolean BuildInventory()
{
    Scanner in = null;
    try
    {
        in = new Scanner(new File(m_sInventoryPath));
    }
    catch (FileNotFoundException e)
    {
        System.out.println("Cannot open inventory");
        return false;
    }
    int i = 0;
    while (in.hasNextLine())
    {
        int j = 0;
        StringTokenizer tkner = new StringTokenizer(in.nextLine());
        while (tkner.hasMoreTokens())
        {
            if(j == 0)
                m_saInventory[i] = tkner.nextToken("|");
            else if(j == 1)
                m_saNumber[i] = tkner.nextToken("|");
            else if(j == 2)
                m_saDescription[i] = tkner.nextToken("|");
            else if(j == 3)
                m_saRetail[i] = tkner.nextToken("|");
            else if(j == 4)
                m_saDiscount[i] = tkner.nextToken("|");
            else if(j == 5)
                m_saPrice[i] = tkner.nextToken("|");
            else
                tkner.nextToken("|");
             j++;
        }
        i++;
    }
    in.close();
    return true;
}

boolean BuildMarkedItems()
{
    Scanner in = null;
    try
    {
        File f = new File(m_sMarkedItemsPath);
        System.out.println(f.getPath());
        in = new Scanner(f);
    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace(System.out);
        System.out.println("Cannot open Marked Items");
        return false;
    }
    int i = 0;
    while (in.hasNextLine())
    {
        int j = 0;
        StringTokenizer tkner = new StringTokenizer(in.nextLine());
        while (tkner.hasMoreTokens())
        {
            if(j == 0)
                m_saMarkedItems[i] = tkner.nextToken("|");
            if(j == 1)
                m_saActive[i] = tkner.nextToken("|");
            else
               tkner.nextToken("|");
             j++;
        }
        i++;
    }
    in.close();
    return true;
}

int findTerm(String key)
{
    int lo = 0; int hi = m_iInventorySize - 1;
    while (lo <= hi)
    {
        int mid = (lo + hi) / 2;
        int diff = key.compareTo(m_saInventory[mid]);
        if (diff == 0) return mid;
        if (diff < 0) hi = mid - 1; else lo = mid + 1;
    }
    return -1;
}

} 
```

堆栈跟踪：：：：：

```
C:\Users\User\Documents\InputInventory.txt
C:\Users\User\Documents\ItemsMarked.txt
Cannot open inventory
C:\Users\User\Documents\ItemsMarked.txt
java.io.FileNotFoundException: C:\Users\User\Documents\ItemsMarked.txt (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.util.Scanner.<init>(Unknown Source)
at CLInventorizerMaster.BuildMarkedItems(CLInventorizerMaster.java:253)
at CLInventorizerMaster.actionPerformed(CLInventorizerMaster.java:131)
at java.awt.Button.processActionEvent(Unknown Source)
at java.awt.Button.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Cannot open Marked Items 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:27:41.410

堆栈跟踪表明小程序无权访问导致小程序在堆栈更上层`SecurityManager`生成的文件`FileNotFoundException`。

小程序被沙盒化以防止恶意攻击，并且必须签名才能访问本地资源。

* * *

代替 AWT，考虑一种更新的方式来表示您的客户端，例如[Java Swing](http://docs.oracle.com/javase/tutorial/uiswing/)，并且还可以将其部署为[Java Web Start](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)`JFrame`上的基于应用程序。

# javascript - 将变量设置为函数调用

> ID：14226283
> 
> 赞同：2
> 
> 时间：2013-01-09T00:08:00.483
> 
> 标签：javascript, jquery

我想将变量设置为`.prev()`or `.next()`，例如：

```
 if(x == y)
       var shift = '.prev()';
   else
       var shift = '.next()';

   $("li.active").removeClass('active')shift.addClass('active'); 
```

我可能可以让它工作，`eval()`但这是一个安全隐患。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T00:09:57.877

可以使用[括号符号*^([spec])*](http://es5.github.com/#x11.2.1)访问对象的每个属性。
`foo.bar()`是一样的`foo['bar']()`：

```
if(x == y)
   var shift = 'prev';
else
   var shift = 'next';

// or a shorter and nicer way: 
// var shift = x == y ? 'prev' : 'next';

$("li.active").removeClass('active')[shift]().addClass('active'); 
```

# java - 从文本文件读取到字符串数组

> ID：14226285
> 
> 赞同：2
> 
> 时间：2013-01-09T00:08:32.443
> 
> 标签：java, arrays, algorithm, sorting

所以我可以在我的文本文件中搜索一个字符串，但是，我想在这个 ArrayList 中对数据进行排序并实现一个算法。是否可以从文本文件中读取并将文本文件中的值 [Strings] 存储在 String[] 数组中。

也可以分开字符串吗？所以不是我的数组有：

```
[Alice was beginning to get very tired of sitting by her sister on the, bank, and of having nothing to do:] 
```

是否可以将数组设置为：

```
["Alice", "was" "beginning" "to" "get"...] 
```

.

```
 public static void main(String[]args) throws IOException
    {
        Scanner scan = new Scanner(System.in);
        String stringSearch = scan.nextLine();

        BufferedReader reader = new BufferedReader(new FileReader("File1.txt"));
        List<String> words = new ArrayList<String>();

        String line;
        while ((line = reader.readLine()) != null) {                
            words.add(line);
        }

        for(String sLine : words) 
        {
            if (sLine.contains(stringSearch)) 
            {
                int index = words.indexOf(sLine);
                System.out.println("Got a match at line " + index);

            }
         }

        //Collections.sort(words);
        //for (String str: words)
        //      System.out.println(str);

        int size = words.size();
        System.out.println("There are " + size + " Lines of text in this text file.");
        reader.close();

        System.out.println(words);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:11:05.117

*也可以分开字符串吗？* 是的，您可以将其用于空格来拆分字符串。

```
 String[] strSplit;
 String str = "This is test for split";
 strSplit = str.split("[\\s,;!?\"]+"); 
```

[请参阅字符串 API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

此外，您还可以逐字阅读文本文件。

```
 Scanner scan = null;
 try {
     scan = new Scanner(new BufferedReader(new FileReader("Your File Path")));
 } catch (FileNotFoundException e) {
     e.printStackTrace();
 }

 while(scan.hasNext()){
     System.out.println( scan.next() ); 
 } 
```

[请参阅扫描仪 API](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner%28java.io.File%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T00:38:48.463

要将一行拆分为一个单词数组，请使用以下命令：

```
String words = sentence.split("[^\\w']+"); 
```

正则表达式的`[^\w']`意思是“不是单词 char 或撇号”

这将捕获带有嵌入撇号的单词，例如“can't”，并跳过所有标点符号。

### 编辑：

一条评论提出了解析引用的单词的边缘情况，`'this'`例如`this`。
这是解决方案 - 您必须首先删除包装引号：

```
String[] words = input.replaceAll("(^|\\s)'([\\w']+)'(\\s|$)", "$1$2$3").split("[^\\w']+"); 
```

这是一些带有边缘和角落案例的测试代码：

```
public static void main(String[] args) throws Exception {
    String input = "'I', ie \"me\", can't extract 'can't' or 'can't'";
    String[] words = input.replaceAll("(^|[^\\w'])'([\\w']+)'([^\\w']|$)", "$1$2$3").split("[^\\w']+");
    System.out.println(Arrays.toString(words));
} 
```

输出：

```
[I, ie, me, can't, extract, can't, or, can't] 
```

# xml - HTML 之于 HAML 就像 XSLT 之于 ...？

> ID：14226288
> 
> 赞同：7
> 
> 时间：2013-01-09T00:08:44.363
> 
> 标签：xml, xslt, formatting, haml, file-conversion

我刚刚发现了 HAML，并且喜欢它的简洁性和可读性。XSLT 有什么等价物吗？特别是，我希望能够更容易区分包含尖括号的输出和包含尖括号的标记本身的东西。

如果没有专门的 XSLT 抽象语言，是否至少有一种通用的 XML 形式也可以使用？

编辑为了好玩，我刚刚做了一个使用实际 Haml（实际上是 HamlPy）生成 XSLT 的快速测试。我观察到的缺点：

*   不支持连字符的元素名称（至少在 HamlPy 中）
*   `%xsl:foo`不够简洁。XLS 命名空间的特殊字符，like`#foo`会更好。
*   特定于 HTML 的规则妨碍了（在我的情况下，特殊的自闭合标签规则`<meta>`是一个问题）
*   `%xsl:attribute(name="foo" value="blah")`还是太冗长了。类似的东西`.foo="blah"`会更好。
*   某些属性`select`很常见，可以隐含：#value-of "./a[@href]"
*   不需要像`-`和处理逻辑这样的功能，因此可以重新用于 xquery 或 xpath 之类的东西。`=`或者可能`{foo}`是`<xsl:value-of select="foo"/>`. 那会很酷：`%p(style={../[@style]})`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:53:59.873

已经有许多尝试为 XSLT 定义“用户友好”或“紧凑”的非 XML 具体语法。据我所知，除了发明者之外，没有任何人曾在愤怒中使用过它们。最后，拥有一个理解 XSLT（例如 oXygen）的优秀编辑器比拥有更简洁的语法能带来更好的生产力提升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T01:20:27.247

感谢 Michael Kay 的指点：

## RXSLT

“真正的 XSLT”： http: [//www.wilmott.ca/rxslt/rxslt.html](http://www.wilmott.ca/rxslt/rxslt.html)

```
template doc
   apply-templates
 template doc/title
   <H1>{apply-templates}</H1>
 template doc/para
   <P>{apply-templates}</P> 
```

## XSLTXT

很旧（2002 年），很久以前就被遗弃了。[示例](http://cvs.savannah.gnu.org/viewvc/%2acheckout%2a/xsltxt/docs/docs.html?root=xsltxt)：

```
tpl .name "foo" ("a", "b")
  "SELECT "
  val "$a"
  " FROM "
  val "$b" 
```

[http://savannah.nongnu.org/projects/xsltxt](http://savannah.nongnu.org/projects/xsltxt)

## LX

一个 lisp-ish 紧凑的 XML 表示法。不确定 XSLT 是否有任何特殊处理：

```
;; The XSLT identity transformation
(lx:namespace ((#f "http://www.w3.org/1999/XSL/Transform"))
  (stylesheet version: 1.0
    (template match: "node()|@*"
      (copy
        (apply-templates select: "@*|node()"))))) 
```

[http://nxg.me.uk/dist/lx/](http://nxg.me.uk/dist/lx/)

# python - 如何在 django/python 中动态创建对象？

> ID：14226292
> 
> 赞同：3
> 
> 时间：2013-01-09T00:09:05.830
> 
> 标签：python, django, dynamic

在我的代码中，我有很多这样的 if/elif 语句：

```
if type == "cat":
    vote = VoteCat (
        user = user,
        cat_id = thing_id )
    vote.save()
elif type == "dog":
    vote = VoteDog (
        user = user,
        dog_id = thing_id )
    vote.save() 
```

什么是更改我的代码以摆脱 if 语句并动态实例化我需要的对象的好方法？我希望我可以编写的代码将完成与上面相同的操作，但看起来更像这样：

```
AnimalVote = get_animalvote_by_type(type)
AnimalVote.user = user
AnimalVote.assign_animal_id(thing_id)
AnimalVote.save() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:19:40.920

最简单的翻译是：

```
types = dict('cat' = CatType, 'dog' = DogType)
newobj = types[type](user = user, cat_id = thing_id) 
```

显然，这依赖于采用相同参数的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T00:18:44.687

Python 中的类是对象，因此您可以将名称映射到类：

```
animal_type_map = {'cat': VoteCat, 'dog': VoteDog} 
```

然后你可以`animal_type_map[type]`像使用`VoteCat`or一样使用`VoteDog`。

# php - MongoDb LIKE 在两个字段上结合 AND

> ID：14226293
> 
> 赞同：0
> 
> 时间：2013-01-09T00:09:21.497
> 
> 标签：php, mongodb, sql-like

我正在寻找 MySQL 的等价物

```
SELECT * FROM table WHERE field1 LIKE '%somestring%' AND field2 LIKE '%anotherstring%' 
```

我确实尝试了几件事，包括

```
'field1' => '/somestring/i', 'field2' => '/anotherstring/i' 
```

我没有得到任何结果，或者只是基于两个字段之一的数据。这在 MongoDB 中是不可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:16:06.583

```
 db.collection.find({field1: {$regex: /somestring/i}, field2: {$regex: /anotherstring/i}}); 
```

In `php` you should do by `MongoRegex`.

```
array(field1 => new MongoRegex("/somestring/i"), field2 => new MongoRegex("/anotherstring/i")) 
```

# javascript - Javascript 对象构造函数与对象字面量

> ID：14226299
> 
> 赞同：17
> 
> 时间：2013-01-09T00:09:47.117
> 
> 标签：javascript

> **可能重复：**
> [创建对象 - 新对象或对象文字表示法？](https://stackoverflow.com/questions/4597926/creating-objects-new-object-or-object-literal-notation)
> [文字符号VS。在 JavaScript 中创建对象的构造函数](https://stackoverflow.com/questions/12356994/literal-notation-vs-constructor-to-create-objects-in-javascript)

我正在阅读我的第一个 Javascript 教程。

我刚刚找到了两种创建 JS 对象的方法。

```
var person = new Object();
person.name = "Tom";
person.age = "17"; 
```

和

```
var person = {};
person.name = "Tom";
person.name = "17" 
```

这两种对象创建方式有什么区别吗？既然第二个看起来更简单，我们可以在任何情况下都使用它吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-09T00:14:39.967

Not only is the second syntax easier to read and not only will it work under any condition, but the first syntax might not work under all conditions:

```
function Object() {
    // Oh crap, we have redefined Object!
    return [];    // return an array because we are EVIL
}

var person = new Object();   // not what we think it is 
```

But `{}`, being a syntactic construct, is immune to such evil trickery.

In addition, the object literal notation can be partially optimized at parse time, since after all there's only one object type that could be created. That may result in a minuscule performance increase.

# iphone - 我在 Xcode for iOS 中收到“来自枚举类型的隐式转换”警告，我不知道为什么

> ID：14226300
> 
> 赞同：6
> 
> 时间：2013-01-09T00:09:53.727
> 
> 标签：iphone, ios, xcode, cocoa-touch

使用此代码：

```
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeLink
                                                               error:&error]; 
```

我收到此警告：

```
Implicit conversion from enumeration type 'enum NSTextCheckingType' to different enumeration type 'NSTextCheckingTypes' (aka 'enum NSTextCheckingTypes') 
```

有人可以向我解释为什么我会收到此警告以及如何解决它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T00:18:15.497

`+dataDetectorWithTypes:`确实声称从 NSTextCheckingTypes 枚举而不是 NSTextCheckingType 中获取一个值，但是按照其文档的其余部分，它确实应该允许您从后一个枚举中指定单个值。我只想为 NSTextCheckingTypes 添加一个演员表。您可能还想在 API 上[提交错误。](http://bugreport.apple.com)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T00:16:20.497

Look at the docs for this method. The first parameter needs to be of type `NSTextCheckingTypes`. But the value you pass in, `NSTextCheckingTypeLink`, is of type `NSTextCheckingType`.

You need to pass in either `NSTextCheckingAllSystemTypes`, `NSTextCheckingAllCustomTypes`, or `NSTextCheckingAllTypes`.

Edit:

Upon further review, while what I stated seems correct from a parameter point of view, the rest of the docs for the method claim something else that contradicts the parameter type. Either something changed or this is a bug. Someone should report this to Apple.

Further edit:

One workaround would be to make use of a cast:

```
NSDataDetector *detector = 
    [NSDataDetector dataDetectorWithTypes:(NSTextCheckingTypes)NSTextCheckingTypeLink
    error:&error]; 
```

# css - 另一个 div 中的 div 填充会影响其他元素

> ID：14226301
> 
> 赞同：3
> 
> 时间：2013-01-09T00:09:54.710
> 
> 标签：css, html, web, padding

您好我正在尝试创建一个导航栏，该导航栏由一个大导航 div 中的几个 div 容器组成。

我不确定我的方法是否正确，但我尝试这样做：

```
<div id="navigation">

    <div class="innen">
        <div class="logo">
            <a href="index.html"><img class= "logo" src="logo.png" title="Logo"/></a>
        </div>

        <div id="bar">
        <!-- Navigation Items are in here --!>
        </div>

        <div id="gamecard">
        <!-- Another right floated Element !-->
        </div>
    </div>
    <div class="unten">
        <p>You are here: <a href="index.html">Main</a></p>
    </div>
</div> 
```

我想通过使用顶部填充将条形 div 向下推以满足图像的高度：

```
#bar{
padding-top: 80px;
} 
```

但现在它也移动了向下的游戏卡容器。我怎样才能防止这种情况发生？

我还添加了一个 jfiddle：http: [//jsfiddle.net/Cv4p2/](http://jsfiddle.net/Cv4p2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:28:33.063

尝试使用位置：绝对

```
<div id="bar" style="position:absolute; padding: 80px 0 0 0">
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-03T06:17:55.197

填充旨在在您实现它的容器内添加一个缓冲。看来您会从使用保证金中受益。你应该替换“padding-top：80px;” 与“边距顶部：80px；” 你会达到预期的效果。

# oracle - Oracle 10g 数据库日期转换为“yyyy-iw”问题？

> ID：14226305
> 
> 赞同：2
> 
> 时间：2013-01-09T00:10:24.993
> 
> 标签：oracle, plsql

我不确定这是一个问题，还是更多的是对可能的错误的探索，或者是关于更好的处理方法的问题。

我有一个汇总报告，它使用

```
select column1id, column2date
from table1
where to_char(column2date,'yyyy-iw') = to_char(to_date('2012-12-31','yyyy-mm-dd'),'yyyy-iw') 
```

该行：`to_char(to_date('2012-12-31','yyyy-mm-dd'),'yyyy-iw')`正在转换为 2012-01，回到年初。

进一步挖掘我发现日期 2012-12-31 既不包括在周：2012-52 也不包括在 2013-01 中，并且 2012-53 也不返回任何数据......所以我不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:19:25.600

[https://forums.oracle.com/forums/thread.jspa?threadID=995899](https://forums.oracle.com/forums/thread.jspa?threadID=995899) **Ravi Kumar**写道：您需要使用 IYYY 格式。 **BluShadow**写道: ... 当它计算 YYYY 和 IW 这些是彼此独立的所以它不会减少 YYYY 输出到 [2013] 只是因为你在格式掩码中包含了 IW。它着眼于面具的组成部分，而不是整个事物的组合。

```
select to_char(to_date('2012-12-31','yyyy-mm-dd'),'iyyy-iw') from dual; 
```

返回 2013-01。

我认为您的 WHERE 子句应该是：

```
where to_char(column2date,'iyyy-iw') = to_char(to_date('2012-12-31','yyyy-mm-dd'),'iyyy-iw') 
```

# java - 间歇性奇怪的tomcat问题部署war文件

> ID：14226307
> 
> 赞同：2
> 
> 时间：2013-01-09T00:10:39.743
> 
> 标签：java, tomcat

我曾尝试先搜索此问题，但没有发现与此确切问题有关的任何内容。

当我尝试在我们的 tomcat 服务器上部署一个 war 文件时，我遇到了一个间歇性问题。它偶尔会失败并出现以下情况，迫使我们`bounce tomcat`在部署之前进行。

`Jan 08, 2013 11:50:20 AM org.apache.catalina.startup.HostConfig deployWAR SEVERE: Error deploying web application archive /usr/local/apache-tomcat-7.0.29/webapps /somewar.war javax.xml.parsers.FactoryConfigurationError: Provider org.apache.xerces.jaxp.SAXParserFactoryImpl not found at javax.xml.parsers.SAXParserFactory.newInstance(SAXParserFactory.java:132)`

一旦我们反弹tomcat，我们就可以毫无问题地部署war文件。事实上，这个失败是如此随机，以至于我什至无法正确地重现它。

有没有人对可能发生的事情有任何想法？

爪哇版：

Java 版本“1.7.0_09”Java(TM) SE 运行时环境（内部版本 1.7.0_09-b05） Java HotSpot(TM) 64 位服务器 VM（内部版本 23.5-b02，混合模式）

Tomcat版本：

服务器版本：Apache Tomcat/7.0.29 服务器构建：2012 年 7 月 3 日 11:31:52 服务器编号：7.0.29.0 操作系统名称：Linux 操作系统版本：2.6.18-308.16.1.el5 架构：amd64 JVM 版本：1.7。 0_09-b05 JVM 供应商：甲骨文公司

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T14:34:32.233

一个可能的原因是 JAR 文件冲突，即您的类路径上有多个相同的类。您可以使用以下代码确定类来自代码内部的位置：

```
System.out.println(javax.xml.parsers.SAXParserFactory.class.getResource("SAXParserFactory.class")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T14:25:38.047

通过同时部署两个 .war 文件并关闭 tomcat 然后重新启动 tomcat，我能够始终如一地重现此问题。（我怀疑它是否相关，但每个 .war 文件的 servlet 非常相似，并且还具有 xerces 依赖项）

该问题似乎已通过更改每个 .war 文件的 web.xml 文件得到解决，如下所示：

将“load-on-startup”元素值更改为 -1 而不是 1。

# google-apps-script - 错误：结果集没有第 1 列

> ID：14226310
> 
> 赞同：1
> 
> 时间：2013-01-09T00:11:02.553
> 
> 标签：google-apps-script, google-cloud-sql

使用 JDBC 服务连接到 Google Cloud SQL 并
遵循[概述示例，](https://developers.google.com/apps-script/jdbc)一切都按预期工作。

当我尝试执行其他一些 SQL 语句时，例如`select database();`
出现错误：***Resultset does not have a column 1***

这是我正在使用的代码。

```
var sqlStatement = "select database();";
var pstmt = conn.prepareStatement(sqlStatement);
var rs = pstmt.executeQuery(sqlStatement);  
app.add(app.createLabel(rs.getString(1))); 
```

我也试过了，`getObject()`但它确实变得更好了。

那么任何想法、教程或示例如何处理
不同于典型选择的 sqlStatements`use database`或
`select database()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:01:01.077

您缺少启动迭代器的语句 - 这是对记录集的 .next() 调用。这是一个对我有用的功能。我只是在此处使用 Logger 记录数据库名称，但同样适用于 UiApp。

```
function simpleRead() {
  var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://arunnagarajan:...");
  var stmt = conn.createStatement();
  var rs = stmt.executeQuery("select database()");
  rs.next(); //if you expect multiple rows, then do this in while(rs.next()) loop
  Logger.log(rs.getString(1));
  rs.close();
  stmt.close();
  conn.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:12:20.180

On the last line, try

`app.add(app.createLabel(rs.getString(0)));`

# xml - XSLT：将同级文本节点移动到选定节点以进行 XLIFF 修复

> ID：14226315
> 
> 赞同：2
> 
> 时间：2013-01-09T00:11:22.310
> 
> 标签：xml, xslt, xpath, xliff

在对 XSLT 进行了几个小时的研究之后，我承认失败了！我需要修复大量从未命名的翻译工具返回给我们的 .xlf XLIFF 翻译文件。理想情况下，我会使用批处理工具将 XSL 转换应用于它们。

下面是其中一个 XLIFF 文件的片段：

```
<body>
    <trans-unit id="1" phase-name="pretrans" restype="x-h3">
        <source>Adding, Deleting or Modifying Notes in the Call Description</source>
        <seg-source>Adding, Deleting or Modifying Notes in the Call Description</seg-source>
        <target state="final">Добавление, удаление и изменение примечаний в описании звонка</target>
    </trans-unit>
    <trans-unit id="2" phase-name="pretrans" restype="x-p">
        <source>Description of Fields on RHS</source>
        <seg-source>Description of Fields on RHS</seg-source>
        <target state="final">Поле описания в правой части</target>
    </trans-unit>
    <trans-unit id="3" phase-name="pretrans" restype="x-p">
        <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
        <seg-source>
            <mrk mtype="seg" mid="1">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
            <mrk mtype="seg" mid="2">These notes are visible to all users who have access to the call recording.</mrk>
            <mrk mtype="seg" mid="3">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
        </seg-source>
        <target state="final">
          <mrk mtype="seg" mid="1" /><ph ctype="" id="1">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> позволяет находить телефонные взаимодействия, содержащие или не содержащие определенные фразы.
          <mrk mtype="seg" mid="2" />Каждая речевая метка содержит одну или несколько таких фраз.
          <mrk mtype="seg" mid="3" />Ядро <ph ctype="" id="3">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> индексирует медиафайлы и помечает места вхождения фразы (добавляет к ним метки).
          <mrk mtype="seg" mid="4" />Затем нужные медиафайлы можно искать по связанным с ними меткам.
        </target>
    </trans-unit>
    <trans-unit id="4" phase-name="pretrans" restype="x-p">
        <source>To add, delete, or modify text in the description field, click inside the description field.</source>
        <seg-source>To add, delete, or modify text in the description field, click inside the description field.</seg-source>
        <target state="final">Чтобы добавить, удалить или изменить текст в поле описания, щелкните это поле.</target>
    </trans-unit>
</body> 
```

注意第三个节点`target`中的标签。标签应该包含现在已经成为兄弟的文本节点（与早期的`trans-unit`标签相比，它仍然是正确的），弄乱了结构。`mrk``seg-source`

因此，我试图识别任何`mrk`不包含文本节点的标签，并将以下文本节点移回其中。

这是期望的结果：

```
<body>
    <trans-unit id="1" phase-name="pretrans" restype="x-h3">
        <source>Adding, Deleting or Modifying Notes in the Call Description</source>
        <seg-source>Adding, Deleting or Modifying Notes in the Call Description</seg-source>
        <target state="final">Добавление, удаление и изменение примечаний в описании звонка</target>
    </trans-unit>
    <trans-unit id="2" phase-name="pretrans" restype="x-p">
        <source>Description of Fields on RHS</source>
        <seg-source>Description of Fields on RHS</seg-source>
        <target state="final">Поле описания в правой части</target>
    </trans-unit>
    <trans-unit id="3" phase-name="pretrans" restype="x-p">
        <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
        <seg-source>
            <mrk mtype="seg" mid="1">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
            <mrk mtype="seg" mid="2">These notes are visible to all users who have access to the call recording.</mrk>
            <mrk mtype="seg" mid="3">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
        </seg-source>
        <target state="final">
            <mrk mtype="seg" mid="1"><ph ctype="" id="1">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> позволяет находить телефонные взаимодействия, содержащие или не содержащие определенные фразы.</mrk>
            <mrk mtype="seg" mid="2">Каждая речевая метка содержит одну или несколько таких фраз.</mrk>
            <mrk mtype="seg" mid="3">Ядро <ph ctype="" id="3">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> индексирует медиафайлы и помечает места вхождения фразы (добавляет к ним метки).</mrk>
            <mrk mtype="seg" mid="4">Затем нужные медиафайлы можно искать по связанным с ними меткам.</mrk>
        </target>
    </trans-unit>
    <trans-unit id="4" phase-name="pretrans" restype="x-p">
        <source>To add, delete, or modify text in the description field, click inside the description field.</source>
        <seg-source>To add, delete, or modify text in the description field, click inside the description field.</seg-source>
        <target state="final">Чтобы добавить, удалить или изменить текст в поле описания, щелкните это поле.</target>
    </trans-unit>
</body> 
```

我通常会在 Perl 中使用 LibXML 或类似工具执行此操作，但我确信这对于 XSLT 来说是一项简单的任务。我已经搜索了一个类似的解决方案，但找不到任何我可以工作的东西。

还有一点需要注意——尽管这里“打印得很漂亮”，但最终的`body`节点定义都在一行上。

谢谢！我期待着学习新的东西！

编辑：更新了上面的源代码以显示`<target>`元素中的更多子标签，这些标签必须保留。编辑 2：添加了所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:39:33.860

试试这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="trans-unit/target/mrk[following-sibling::text()]">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
      <xsl:value-of select="following-sibling::text()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="trans-unit/target/text()"/>

</xsl:stylesheet> 
```

可能它会产生预期的结果：

```
<body>
    <trans-unit id="1" phase-name="pretrans" restype="x-h3">
        <source>Adding, Deleting or Modifying Notes in the Call Description</source>
        <seg-source>Adding, Deleting or Modifying Notes in the Call Description</seg-source>
        <target state="final" />
    </trans-unit>
    <trans-unit id="2" phase-name="pretrans" restype="x-p">
        <source>Description of Fields on RHS</source>
        <seg-source>Description of Fields on RHS</seg-source>
        <target state="final" />
    </trans-unit>
    <trans-unit id="3" phase-name="pretrans" restype="x-p">
        <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
        <seg-source>
            <mrk mtype="seg" mid="1">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
            <mrk mtype="seg" mid="2">These notes are visible to all users who have access to the call recording.</mrk>
            <mrk mtype="seg" mid="3">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
        </seg-source>
        <target state="final"><mrk mtype="seg" mid="1">При наличии соответствующих прав можно добавить описательные текстовые примечания к записи звонка.
            </mrk><mrk mtype="seg" mid="2">Эти примечания видны для всех пользователей, которые имеют доступ к записи звонка.
            </mrk><mrk mtype="seg" mid="3">Во избежание возможной путаницы каждому пользователю рекомендуется к примечаниям добавлять свои инициалы.
        </mrk></target>
    </trans-unit>
    <trans-unit id="4" phase-name="pretrans" restype="x-p">
        <source>To add, delete, or modify text in the description field, click inside the description field.</source>
        <seg-source>To add, delete, or modify text in the description field, click inside the description field.</seg-source>
        <target state="final" />
    </trans-unit>
</body> 
```

# php - PHP ERROR -: Cannot modify header information - headers already sent

> ID：14226316
> 
> 赞同：-2
> 
> 时间：2013-01-09T00:11:28.963
> 
> 标签：php, header

> **Possible Duplicate:**
> [Headers already sent by PHP](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

I have recently shifted to storing sessions in a database. I am trying to set ac cookie in `write_function()`, but it results in a PHP error **Cannot modify header information - headers already sent**. Here's the code:

```
function write_session($sid, $data) 
{
  if(empty($data)){ return; }else if(!isset($_COOKIE['crs'])){ setcookie('crs','xrs',0,'/'); }
}

session_set_save_handler('open_session', 'close_session','read_session', 'write_session','destroy_session','clean_session'); 
```

How do i correct this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:17:17.713

Something is output before you call that function, check especially for blank non-PHP lines. Without more info or code, that's all I can suggest.

# iphone - UIScrollView 不会缩放

> ID：14226320
> 
> 赞同：0
> 
> 时间：2013-01-09T00:11:58.387
> 
> 标签：iphone, objective-c, uiscrollview, ios6

我有一个`UIView`可以滚动但不能缩放的子类。我正在使用自动布局，所以想知道 IOS6 中是否有任何变化。特别是何时实现`scrollViewWillBeginZooming`和`scrollViewDidEndZooming`方法。我的代码看起来像

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.ringSet2 = [[RingView alloc] initWithFrame:CGRectMake(0, 0, 800, 800)];
    [self.ringSet2 setDefaults];

    /// ... more setup for other views but only ringSet2 is scrolled.

    self.scrollview1.delegate=self;
    self.scrollview1.scrollEnabled=YES;
    self.scrollview1.contentSize=self.ringSet2.bounds.size

    self.scrollview1.minimumZoomScale=0.2;
    self.scrollview1.maximumZoomScale=5.0;

    self.ringSet2.userInteractionEnabled=YES;

    // ... needed elsewhere so other views can pick up their dimensionts 

    [self.view setNeedsLayout];
    [self.view layoutIfNeeded];

    /// ... code for additional views

    [self.scrollview1 zoomToRect:CGRectMake(0, 0, 200, 200) animated:YES];
    [self.scrollview1 addSubview:self.ringSet2];

} 
```

和

```
-(UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView{
    return self.ringSet2;
} 
```

等等`scrollViewWillBeginZooming`。实施只是为了追踪正在发生的事情。有趣的是， `viewForZoomingInScrollView`似乎只被调用一次，因为`scrollViewDidEndZooming`比例值略低于 1 但从`scrollViewWillBeginZooming`未被调用。定义了属性 ringSet2

```
@property (strong, nonatomic) IBOutlet RingView *ringSet2; 
```

因为如果视图被定义为弱，则视图不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:04:00.870

为此道歉。答案真的很愚蠢。我目前正在模拟器上的 IOS 6.0 下开发，而我的手机仍在 IOS 5 上。模拟器允许您模拟捏合，但仅以屏幕中心为中心。然而，滚动视图只有在它也在中心时才会接收到这个信号，而在我的初始构建中不是这种情况。将滚动视图的矩形移动到中心解决了这个问题。您不会在真实设备上进行此错误测试。因此代码是可以的。失去了 3 或 4 个晚上，我把头发拉过这个。

# asp.net - How to restrict external access to a specific sub-URL IIS7

> ID：14226322
> 
> 赞同：1
> 
> 时间：2013-01-09T00:12:12.883
> 
> 标签：asp.net, security, iis-7

I've currently got a reasonably large site up that i've been asked to make changes to. Currently To login to this site you need to go to: www.example.com/folder/loginpage.html This site is only accessible internally at this time and it is unlikely to ever be accessible externally. We would like to, however, be able to direct external users to a sub-directory on the site (a 'survey' form) which is located in www.example.com/folder/subfolder/survey.html This survey writes its results back to the main application and i believe they are integrated tightly.

We initially tried the idea of using an additional IIS7 box as a reverse proxy however it is quite confusing to me, i'm not very familiar with IIS/ARR and the other features required (i'm mostly familiar with networking). I did try and follow a number of tutorials but didn't get very far. I'd like to avoid it if possible.

How can I, using IIS7 (this site is in ASP.NET) restrict external users from accessing anything other than the survey pages (there are a few included files necessary as well)? Is it possible to make www.example.com/folder/subfolder/survey.html a 'website' in-itself so that i can publish a URL like survey.example.com externally?

I've come across other examples where access is restricted from specific pages but the root of the site is still accessible ie www.eg.com/ is allowed but www.eg.com/admin.aspx is denied. I'd like to the the reverse in effect, and if possible, hide the 'true' url.

Hope someone can help! If using a reverse proxy is possible i'm happy to do it but i'd need detailed instructions.

Thanks for reading, Much appreciated!

Edit: Sorry all, I'm new to stackoverflow, indeed I've just realised that there are several other sub-communities. Is it more appropriate to ask this in a different community? If so, which one? Thanks!

# class - 关于类公共类型函数的记忆

> ID：14226323
> 
> 赞同：0
> 
> 时间：2013-01-09T00:12:16.107
> 
> 标签：class, function, object, memory, public

当使用类的构造函数创建对象时，它会使用并存储一些内存空间。创建更多对象会占用更多空间。我的问题是：如果那个类有很多公共类型函数，逻辑上会花费更多的空间，但是当创建更多具有许多公共类型函数的同一个类的对象时，这些函数会单独创建并使用更多空间吗？我想问的是例如：类有 3 个公共类型函数，当创建 1 个对象时，它将使用 1*3x 内存，但是当创建更多对象（10）时，它会使用 10*3x 内存，或者只是 10+ 3? 因此，如果我是对的，当对象需要使用许多公共类型函数并且有很多相同的对象时，将这些公共函数存储在父类中可能会更好，这样会花费更少的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:29:34.103

只有对象的数据成员才使用内存空间。函数/方法总是在所有对象之间共享。唯一使用一些内存空间的方法是虚拟方法，但空间成本通常只为每个类类型支付一次。

不管方法是定义在父类还是子类中，它们都将占用与可执行代码相同的内存量。此外，两种情况下参数的处理方式相同，因此在父类或子类中定义方法不会更快或更慢。

# drawing - KineticJS - Drawing a simple line - Kinetic.Line - Strange Behavior - Possibly a bug?

> ID：14226328
> 
> 赞同：1
> 
> 时间：2013-01-09T00:13:08.610
> 
> 标签：drawing, line, kineticjs

I have the following code in a simple, html file:

```
<!DOCTYPE HTML>
<html>
<head>
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
</style>
</head>
<body>
<div id="container"></div>
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js">            </script>
<script>

    var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
  });

  var layer = new Kinetic.Layer();

  var redLine = new Kinetic.Line({
    points: [0, 0, 75, 75, 150, 150],
    stroke: 'red',
    strokeWidth: 2,
    lineCap: 'round',
    lineJoin: 'round'
  });

  layer.add(redLine);
  stage.add(layer);
</script> 
```

This code is supposed to draw a very simple, single line, from the top, left of the browser space, to 150, 150.

However, when I test this, nothing is drawn on the page.

I'm on Windows Vista Business, up to date, I'm using Google Chrome Version 23.0.1271.97 m.

Now, if I add another set of points in the points array - to look like this:

```
points: [0, 0, 75, 75, 150, 150, 300, 300], 
```

when I reload the page including this change, the code works as expected.

Now, further play and research, turned that, if I want to keep this array:

```
points: [0, 0, 75, 75, 150, 150], 
```

I have to add the following, in the line configuration code:

```
dashArray: [1, 1] 
```

with the "dashArray" property, the line is correctly drawn with the initial array problem.

```
 var redLine = new Kinetic.Line({
    points: [0, 0, 75, 75, 150, 150],
    stroke: 'red',
    strokeWidth: 2,
    lineCap: 'round',
    lineJoin: 'round',
    dashArray: [1, 1]
  }); 
```

Is this a bug?

Is this expected behavior? I cannot find any documentation about this.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:05:43.220

如果某些元素没有在屏幕上绘制，您应该调用：

```
 .draw() 
```

在包含该项目的舞台或图层上。例如：

```
 stage.draw(); or layer.draw(); 
```

这将重绘舞台或图层。

更多信息：

javascript 执行的方式并不总是我们认为的方式，基本上，您的代码没有在您认为应该执行的时间执行。创建舞台后，您需要一些东西来触发绘图。简单地说，你可以添加一个 window.onload 函数或 document.onready 函数来在页面加载时绘制舞台。一个不同的解决方案是让绘制由不同的事件触发，例如点击。因此，您可以创建一个带有 onclick 属性的按钮并让它触发舞台绘图。

像这样：

html:

```
 <button onclick='javascript:myRedraw()'>Redraw</button> 
```

javascript:

```
 function myRedraw(){
        stage.draw();
    } 
```

这是一个更新：http: [//jsfiddle.net/ff4sD/2/](http://jsfiddle.net/ff4sD/2/)

# css - CSS 拉伸背景图片

> ID：14226330
> 
> 赞同：7
> 
> 时间：2013-01-09T00:13:21.957
> 
> 标签：css

我有一个大图像用作`background-image`页面。我想要的是图像的高度将被拉伸以填充页面的高度。它也应该居中。

```
background: black url("/image/background.jpg") no-repeat fixed center; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T00:16:30.583

`background-size: cover`将在现代浏览器中发挥作用 - 有关更多详细信息，请参阅 mozilla 的[文档](https://developer.mozilla.org/en-US/docs/CSS/background-size)。

对于较旧的浏览器（尤其是较旧版本的 IE），我使用像[这样](http://louisremi.github.com/jquery.backgroundSize.js/demo/)的 jQuery 插件来模拟行为已经取得了很大的成功。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T00:22:40.027

这是一篇很好的文章

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

它的要点

```
body { 
background: url(images/bg.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:16:19.560

将此添加到CSS

```
{
background: black url("/image/background.jpg") no-repeat fixed center;
height: 100%;
width:100%
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T00:17:58.713

我认为使用 div 将是获得所需效果的最简单方法。

```
<div id="background">
    <img src="/image/background.jpg" class="stretch" alt="" />
</div>
    <style>
    #background {
        background-color:#000000;
        width: 100%; 
        height: 100%; 
        position: fixed; 
        left: 0px; 
        top: 0px; 
        z-index: -1;
    }

    .stretch {
        width:100%;
        height:100%;
    }
    </style> 
```

# javascript - Backbonejs 集合获取错误检测 XHR 对象

> ID：14226333
> 
> 赞同：0
> 
> 时间：2013-01-09T00:14:09.050
> 
> 标签：javascript, jquery, ajax, backbone.js

在我的骨干收藏中，我有

```
fetch_data: function(data, callback) {
  this.fetch({
    data: data,
    success: callback,
    error: function() {
      // detect of HTTP code here
    }
  });
} 
```

我想检查错误中的 HTTP 标头状态代码。如何在错误函数中访问 XHR 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:18:59.493

[http://backbonejs.org/#Model-fetch](http://backbonejs.org/#Model-fetch)

看起来好像 error 被传递了一个 xhr 对象作为它的第二个参数。

因此，将您的代码更改为如下所示：

```
fetch_data: function(data, callback) {
  this.fetch({
    data: data,
    success: callback,
    error: function(model, xhr, options) {
      // do something with the xhr argument here. 
    }
  }); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:22:05.153

这应该适合你：

```
fetch_data: function(data, callback) {
  this.fetch({
    data: data,
    success: callback,
    error: function(model,resp) {
      console.log(resp.status);   // 404..etc.
    }
  });
} 
```

# ios - 如何在带有情节提要的 UITabBarController 中实现 UISplitview？

> ID：14226334
> 
> 赞同：1
> 
> 时间：2013-01-09T00:14:16.463
> 
> 标签：ios, xcode, uitableview, uisplitviewcontroller, uisplitviewdelegate

我一直在寻找答案，但没有一个是故事板。

我已经使用[本](http://timeoutofmind.com/wordpress/2012/01/23/ios_5_simple_master-detail_view_application_with_storyboard_template_example/)教程来创建我的拆分视图，但它可以在以下部分工作：

```
UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
splitViewController.delegate = (id)navigationController.topViewController; 
```

当然不会工作，因为 splitview 在 tabview 中。

如何将我的 DetailViewController 设置为委托？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:16:06.877

问题是因为我将 SplitViewController 设置为委托中的根视图。

我将其更改为：

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
    UISplitViewController *splitViewController = [tabBarController.viewControllers lastObject];//(UISplitViewController *)self.window.rootViewController;
    UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
    splitViewController.delegate = (id)navigationController.topViewController; 
```

而且效果很好。

它也得到了苹果的认可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:23:45.460

你没有。拆分视图必须是窗口的根视图控制器。您不能将一个嵌入到选项卡视图控制器中。

# ivy - 使用 Ivy，我是否需要文件系统解析器才能从本地存储库或缓存中读取？

> ID：14226335
> 
> 赞同：0
> 
> 时间：2013-01-09T00:14:21.387
> 
> 标签：ivy

鉴于那里有大量的文档，Ivy 可能会令人惊讶地令人困惑。以下是我在这一小时里对 Ivy 感到困惑的地方：

[Main Concepts](http://ant.apache.org/ivy/history/latest-milestone/concept.html#cache)页面解释了缓存。

[调整默认设置](http://ant.apache.org/ivy/history/latest-milestone/tutorial/defaultconf.html)教程解释了本地存储库。

如果我同时拥有本地缓存​​和本地存储库，为什么还需要[File System Resolver](http://ant.apache.org/ivy/history/latest-milestone/resolver/filesystem.html)？我是否需要它以便 Ivy 使用本地存储库或缓存？

如果没有，文件系统解析器的工作方式似乎是首先我会下载并组织所有依赖项和传递依赖项。然后我将文件系统解析器指向这些文件。Ivy 然后会从我的文件系统中读取并将文件复制到本地存储库和缓存中。

我确定我没有正确理解这一点 - 这看起来非常笨拙。对于本地存储库、缓存和文件系统解析器指向的本地之间的区别，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:37:38.887

首先，存储库和缓存是两个不同的功能概念。

存储库，本地、文件系统或 URL，是保存工件的地方，并且在大多数情况下，也是共享的。

“公共”存储库保存工件并提供它们。Nexus 或工件是缓存来自公共存储库的工件副本的存储库示例，通常称为“共享”存储库。

“本地”存储库在大多数情况下是文件系统存储库。它们还提供工件（这些工件的来源将在稍后提供），并且这些工件存在于您的文件系统中。

现在，您的项目正在解析的任何工件都将被放入缓存中，无论其来源如何（文件系统、URL、iBiblio）。

对我来说，直截了当的原因之一是在检索工件（将它们从原始位置带回）后对它们进行通用行为。

缓存在您的机器文件系统上，它保存有关每个工件的来源以及时间或分辨率的信息。对工件进行的任何操作（构建类路径，或将它们从一个地方复制到另一个“检索”）都将在缓存中的工件上执行。

希望这一点有帮助。

回答有关本地存储库的问题（我问过）；本地存储库充满了项目生成的工件，例如项目 A 生成并将在项目 B 中使用的 SNAPSHOT。它们不是版本，通常是临时的。

最后，本地存储库是一个文件系统存储库，但并非所有文件系统都是本地存储库。从我的脑海中，我可以在一个所有人都可以访问的文件系统上共享存储库（在团队中共享工件），而不是使用 Nexus（这是一个 URL 解析器）。

# django - CSRF Verification error appeared after I changed DNS

> ID：14226340
> 
> 赞同：0
> 
> 时间：2013-01-09T00:15:05.357
> 
> 标签：django

I have been using Django successfully for a few days now. I was running my django application on an Amazon Web Service machine. I was assigned some arbitrary DNS name that looked like this: [http://ec2-XXX.XXX.XXX.XXX.compute-1.amazonaws.com](http://ec2-XXX.XXX.XXX.XXX.compute-1.amazonaws.com). My Django app was working find with my model and several views with templates.

Last night, I went out and bought a real DNS name from register.com and have that DNS name now pointing to my django application. Since I made that change however, when I submit my django form, I get the following CSRF error:

Forbidden (403) CSRF verification failed. Request aborted.

I tried clearing the cookies in my browser, but that didn't help. I even tried it from other machines that I had never tried before. But still the same problem. Why did assigning a new DNS name for this IP address cause this CSRF error? And how do I get rid of it?

My form:

```
<form action="/forgotUserName2" method="post">{% csrf_token %}

<label for="id_email">E-mail:</label></th><td><input id="id_email" type="text" class="required" name="email" maxlength="75" />
<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:37:34.483

尝试将文件中的[CSRF_COOKIE_DOMAIN](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#csrf-cookie-domain)设置设置`settings.py`为新域名。

另外，顺便说一句，您的操作名为`/forgotUserName2`. `forgot_user_name_2`python中的方法和函数通常是这样的：蛇壳。此外，django 中的 URL 应始终以斜杠结尾：`/forgot_user_name_2/`.

# c# - NLog FileTarget wrapped with BufferingTargetWrapper fails to write log if there is a delay

> ID：14226353
> 
> 赞同：1
> 
> 时间：2013-01-09T00:16:58.553
> 
> 标签：c#, asynchronous, threadpool, nlog

I may have stumbled across an issue with NLog, but thought I would check here first for an answer:

To recreate the issue I cloned the NLog source so I could add a delay to cause the problem. Once open in visual studio, I added a console application that references the NLog source projects and makes some very simple log calls. The NLog.config is as follows:

```
<nlog>
  <targets>
    <target name="buffer" type="BufferingWrapper">
      <target name="logfile" type="File" fileName="log.txt"/>
    </target>
  </targets>
  <rules>
    <logger name="*" minlevel="Debug" writeTo="logfile" />
  </rules>
</nlog> 
```

All works as expected up to this point. The next step is to insert a delay into the flush logic of the `FileTarget`. (The reason I found this to be the problem is that I was originally working with the `MailTarget` that would hang for a duration whilst connecting to the mail server - I have substituted it for the `FileTarget` here instead to make recreating the problem easier).

Open the FileTarget.cs and locate the `Write(AsyncLogEventInfo[] logEvents)` method. Insert in the first line `Thread.Sleep(5000)` so that the method appears as below:

```
protected override void Write(AsyncLogEventInfo[] logEvents)
{
    Thread.Sleep(5000);

    // ... omitted
} 
```

Now, compile and re-run. The log is not written.

As far as I can tell, the logic to flush all targets when the process exits uses an asynchronous method call that has a default timeout of 15 seconds which can be found in the LogFactory.cs `Flush()` method - this is obviously not being exceeded.

However, NLog makes use of `ThreadPool.QueueUserWorkItem()` (found in AsyncHelpers.cs) to orchestrate the flushing of each target in parallel. Could this simply boil down to a question of how does this form of method invocation react to a call to `Thread.Sleep()`, or any other form of blocking (such as connecting to a remote server, as in my original problem)?

Any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:50:08.500

I have finally figured out why nothing is being logged, unfortunately there is not much that can be done about this.

According to the MSDN documentation for [AppDomain.ProcessExit](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx), which is the event handled by NLog:

> The total execution time of all ProcessExit event handlers is limited, just as the total execution time of all finalizers is limited at process shutdown. The default is two seconds. An unmanaged host can change this execution time by calling the ICLRPolicyManager::SetTimeout method with the OPR_ProcessExit enumeration value.

So it seems the only way to handle this from managed code, is to manually call `LogManager.Flush()` before allowing the application to exit.

# c++ - 从函数返回本地 var 字符串失败，而本地 var int 和 char 工作正常。为什么？

> ID：14226356
> 
> 赞同：1
> 
> 时间：2013-01-09T00:17:29.140
> 
> 标签：c++, c, variables, heap-memory, stack-memory

> **可能重复：**
> [从函数返回“本地”char* 与从函数返回“本地”int* 之间的区别](https://stackoverflow.com/questions/14226080/difference-between-returning-a-local-char-from-a-function-vs-returning-a-l)

这是一个简单的代码，其中 3 个不同的函数**[localStrPtr, localIntPtr, localCharPtr]**在各自的函数中返回一个指向它们的局部变量**[string, integer, char]的指针。**

**代码：**

```
#include <stdio.h>

char*  localStrPtr (char*);
int*   localIntPtr (int, int);
char*  localCharPtr (char);

main()
{
    int *pInt;
    char *pChar;

    printf( "localStrPtr = %s\n", localStrPtr("abcd") );

    pInt = (int*) localIntPtr(3, 5);
    printf( "localIntPtr = %d\n", *pInt );

    pChar = (char*) localCharPtr('y');
    printf( "localCharPtr = %c\n", *pChar );
}

char* localStrPtr(char* argu)
{
    char str[20];
    // char* str = (char*) malloc (20);

    strcpy (str, argu);
    return str;
}

int* localIntPtr (int argu1, int argu2)
{
    int local;
    local = argu1 + argu2;
    return (&local);
}

char* localCharPtr (char argu)
{
    char local;
    local = argu;
    return (&local);
} 
```

**编译日志：**

```
stringManip.c: In function `localStrPtr':
stringManip.c:27: warning: function returns address of local variable
stringManip.c: In function `localIntPtr':
stringManip.c:34: warning: function returns address of local variable
stringManip.c: In function `localCharPtr':
stringManip.c:41: warning: function returns address of local variable 
```

**运行日志：**

```
localStrPtr =
localIntPtr = 8
localCharPtr = y 
```

正如您在日志文件中看到的，localStrPtr 返回“一些垃圾”，而 localIntPtr 和 localCharPtr 返回“预期”值。

但是，在函数**localStrPtr**中，如果我更改`char str[20]`-to-> `char* str = (char*) malloc (20)`， localStrPtr 会正确返回字符串“abcd”。这是运行日志，一旦进行了上述更改。

**新的运行日志：**

```
localStrPtr = abcd
localIntPtr = 8
localCharPtr = y 
```

**问题：**

**[1] 在函数 localIntPtr 和 localCharPtr 中，返回的局部变量地址的内容 WORKED，但对于函数 localStrPtr， “仅”**使用 malloc返回正确的值，而不会使用 local char str[20]。为什么它不适用于 str[20] 而与局部变量 char 和 int 一起使用？

[2] 为什么我们在 COMPILE LOG 中看到以下所有 3 个函数的行？

*   stringManip.c:27：警告：函数返回局部变量的地址
*   stringManip.c:34：警告：函数返回局部变量的地址
*   stringManip.c:41：警告：函数返回局部变量的地址

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T00:20:36.500

您不能从函数返回局部变量。局部变量存在于堆栈中，一旦函数完成，堆栈空间就会被释放，可供下一个函数调用使用。

如果您使用 malloc 它会在堆上分配内存。函数结束时不会释放此内存，因此您可以将其返回，并且该内存仍分配在调用函数的空间中（这也是 malloc 会导致内存泄漏但本地数组不会导致内存泄漏的原因）。

这并不像看起来那么清楚，因为返回值总是按值传递。如果您返回一个本地 int，它会返回该 int 的值并且它工作正常。如果您返回一个本地数组，它会返回指向该数组的指针的值，如果该指针不再指向内存的有用部分，那就不行了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T00:30:48.507

如果您在函数中声明变量，它将成为该函数的本地变量，因此，当该函数结束时，它会释放其所有局部变量。由于您要返回指向将自动释放的内存空间的指针，因此您犯了错误并收到警告。使用 malloc，您从进程虚拟内存（堆）中请求空间，并且您对该内存负责：您请求它，因此您应该释放它（当您想要时，但如果您想要，则不要。这是必须做的）。

仅将 C 内存分配视为稍后初始化/分配的工具是错误的，远不止于此。

所以，对于你的第二个问题，我上面的回答几乎已经解释过了，但基本上就是编译器所说的：你正在返回只属于你的本地函数的东西的地址。您可能正在返回指向垃圾的指针。

[编辑] 还有一件事：返回和“非引用传递的参数”是变量的副本，而不是“THE”变量。这很重要，因此您了解为什么它会起作用，例如，如果您有：

```
int localIntPtr(){
 int hi;
 ...
 return hi;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:31:24.763

编译器日志中的警告是有原因的。您永远不应该返回指向局部变量的指针。这些变量使用的内存可以随时重复使用。这就是为什么您在输出中看到垃圾的原因`localStrPtr()`。你很幸运，其他两个函数的输出是正确的。*不*保证会发生这种情况。

using`malloc()`按预期工作的原因是因为它分配的内存不会被回收，除非你通过相应的调用明确告诉计算机这样做`free()`。对于局部变量，计算机可以随时重用内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T00:35:47.440

正如编译器所提到的，您正在返回堆栈上的地址。完成返回后，堆栈中的值可能会或可能不会被稍后传入的其他函数调用覆盖。您获得 int 或 char 的事实只是机会。如果您`printf( "localIntPtr = %d\n", *pInt );`在再次返回之前发出另一个，您可能会看到 pInt 已经被覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T00:45:57.250

虽然到目前为止给出的答案很好地解释了为什么永远不能接受返回指向局部变量的指针，但还有使用 malloc() 的替代方法。最常见的一种是传入一个指向需要填充的数据的指针。例如，我们可以将一个空的 char 数组传递给一个用字符串填充它的函数。或者我们可以将一个指向整数的指针传递给一个用值填充指针的函数。

在函数中分配内存，只是为了让函数可以返回指向某些数据的指针，这通常是一个糟糕的选择。它强制该函数的调用者释放数据[否则会发生泄漏，这是一件坏事]。最好有一个函数允许调用者在调用函数中自由分配或使用局部变量。

显然，在某些情况下，这意味着必须将同一个变量从较低层的函数传递到几层函数调用，然后传递给填充某些内容的“顶层”函数，然后在返回的路上，它在各个层次上得到处理，并且可能还存储在 malloc 的内存位置。这是非常好的做法，应该受到鼓励。

只有当数据量以前未知时才应使用 malloc，因此调用者将无法知道要分配多少内存，或者数据实际上需要存储一段时间，并且局部变量不会“做”。但始终记得释放分配的内存。

# java - 如何使用 Eclipse 编译器进行独立的动态内存编译？

> ID：14226357
> 
> 赞同：7
> 
> 时间：2013-01-09T00:17:41.037
> 
> 标签：java, eclipse

Eclipse 编译器及其 API 与 JDK 中包含的编译器相比具有一些显着优势（对我的应用程序特别有益），因此我想使用它。我有一个独立的实用程序，我想最小化它的大小和依赖关系。

有什么方法可以访问 eclipse 编译器（最小的 jar 文件集以及在哪里下载它们）并在内存中动态编译生成的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:55:03.973

[从此页面开始](http://download.eclipse.org/eclipse/downloads/)下载 ECJ ，单击最新版本，然后找到并下载文件 ecj-[version].jar。为此，我使用的是 4.2.1。在你的类路径中引用这个 jar。

您使用`org.eclipse.jdt.internal.compiler.Compiler`. 构造函数的大多数东西都有可用的默认值。您只需以 ICompilerRequestor 的形式给它一个结果回调。下面的示例使用一个简单的字节类加载器来测试结果。要进行级联编译，您需要创建 FileSystem 的子类，覆盖 INameEnvironment 中的方法。

```
package test.eclipse.compiler;

import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.eclipse.jdt.internal.compiler.ClassFile;
import org.eclipse.jdt.internal.compiler.CompilationResult;
import org.eclipse.jdt.internal.compiler.Compiler;
import org.eclipse.jdt.internal.compiler.DefaultErrorHandlingPolicies;
import org.eclipse.jdt.internal.compiler.ICompilerRequestor;
import org.eclipse.jdt.internal.compiler.batch.CompilationUnit;
import org.eclipse.jdt.internal.compiler.batch.FileSystem;
import org.eclipse.jdt.internal.compiler.batch.FileSystem.Classpath;
import org.eclipse.jdt.internal.compiler.env.ICompilationUnit;
import org.eclipse.jdt.internal.compiler.env.INameEnvironment;
import org.eclipse.jdt.internal.compiler.impl.CompilerOptions;
import org.eclipse.jdt.internal.compiler.problem.DefaultProblemFactory;
import org.eclipse.jdt.internal.compiler.util.Util;

public class TestCompile {
    static class ByteClassLoader extends ClassLoader {
        private Map<String, byte[]> classMap;

        public ByteClassLoader(Map<String, byte[]> classMap) {
            super();
            this.classMap = classMap;
        }

        protected Class<?> findClass(String name) throws ClassNotFoundException {
            byte[] bytes = classMap.get(name);
            if (bytes == null) {
                return super.findClass(name);
            } else {
                return defineClass(name, bytes, 0, bytes.length);
            }
        }
    }

    public static void compile(String code, String filename) {
        ArrayList<Classpath> cp = new ArrayList<FileSystem.Classpath>();
        Util.collectRunningVMBootclasspath(cp);
        INameEnvironment env = new NameEnv(cp.toArray(new FileSystem.Classpath[cp.size()]), null);
        ICompilerRequestor requestor = new ICompilerRequestor() {
            @Override
            public void acceptResult(CompilationResult result) {
                ClassFile[] cf = result.getClassFiles();
                HashMap<String, byte[]> classMap = new HashMap<String, byte[]>();
                classMap.put("Test", cf[0].getBytes());
                ByteClassLoader cl = new ByteClassLoader(classMap);
                try {
                    Class<?> c = cl.loadClass("Test");
                    Method m = c.getMethod("test");
                    m.invoke(null);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };
        Compiler compiler = new Compiler(env, DefaultErrorHandlingPolicies.exitAfterAllProblems(),
                new CompilerOptions(), requestor, new DefaultProblemFactory());

        ICompilationUnit[] units = new ICompilationUnit[] { new CompilationUnit(code.toCharArray(), filename, null) };
        compiler.compile(units);
    }

    public static void main(String[] args) {
        compile("public class Test { public static void test() { System.out.println(\"Hello, world.\"); }}",
                "Test.java");
    }
} 
```

[经此博](http://mentics.com/compiling-on-the-fly-with-the-eclipse-compiler/)文许可复制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:04:54.520

看起来您可以在[maven 存储库](http://mvnrepository.com/artifact/org.eclipse.jdt.core.compiler/ecj/)中找到您要查找的内容，并很容易[将其](http://www.ant4eclipse.org/)与[ant一起使用。](http://ant.apache.org)

# sql-server - 简单会员 MVC4

> ID：14226370
> 
> 赞同：1
> 
> 时间：2013-01-09T00:18:47.083
> 
> 标签：sql-server, asp.net-mvc, sql-server-ce, simplemembership

`SimpleMembership`我有一个在 Visual Studio 2012中建模的应用程序`MVC Template`。我使用`SQL Server CE (4)`数据库作为成员资格提供程序，`web.config`并在`InitializeSimpleMembershipAttribute`. `initializer`创建并添加我的`database`自定义用户和角色，以及`Account controller`允许用户注册和登录。但是，每当我尝试以编程方式询问成员资格提供程序时`User.IsInRole(<rolename>)`，例如我得到一个*SQL 连接错误。*

*建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

此错误不一致，因为请求有时会成功，但仅在本地计算机启动时才会成功。如果我重新编译会引发错误，并且有时只有重新启动才能解决问题。我将应用程序池标识设置为具有`Administrator privileges`. 我正在使用`SQL Server CE`应用程序中的其他数据库，它们都工作得很好。

我什至`MVC 4 application`使用`VS template`and 创建了一个新的，它有同样的问题。我不知道如何继续查找错误原因或实施修复。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:10:44.730

我遇到了同样的问题，不幸的是，您无法使用通常的 User.IsInRole API 检查角色，因为它仍然使用标准提供程序。我发现 SimpleRoleProvider 公开了 GetRolesForUser ，因此您可以检查用户是否具有这样的角色：

```
Roles.GetRolesForUser("mercury2269").Contains("Admin") 
```

# linux - 事件“BufWrite”的vim函数“更新时间戳”：有待改进

> ID：14226376
> 
> 赞同：0
> 
> 时间：2013-01-09T00:19:16.097
> 
> 标签：linux, unix, vim, file-io

该用例由全球所有（vim）开发人员共享（恕我直言）：我们希望更新源文件中每个写入操作的*标签*和*时间戳*。在 Barry Arthur 的帮助下，我的尝试是这样的：

## 每次写入时更新的字符串示例

```
# 2013-01-09 01:04:31.0 +0100 / Me <me@domain.tld> 
```

## vimrc 代码

```
" if not maped, :x don't call UpdateTimestamp()
map :x :wq
function! UpdateTimestamp()
  let old_pos = getpos('.')
  let old_search = histget("search", -1)
  g/^\(#\|\/\/\)\s\+\d\{4\}-\d\{2\}-\d\{2\}\s\+\d\{2\}:\d\{2\}:\d\{2\}\.\d\+\s\++\d\{4\}\s\+\/\s\+Me <me@domain.tld>.*/s/.*/\="# " . strftime('%F %H:%M:%S.0 %z') . " \/ Me <me@domain.tld>"/
  exe "normal /".old_search
  call setpos('.', old_pos)
endfunction

au BufWrite * call UpdateTimestamp() 
```

## 未解决的问题

*   更新标签时不应修改撤消历史记录（如果可能）
*   屏幕位置在写入时发生变化
*   找不到图案时，屏幕上会显示一些不需要的错误

## 问题

简单：如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:46:24.387

*   RE：更新标签时不应该修改
    历史你的意思是撤消历史，对吧？这违背了 Vim 的设计。每一个变化都需要被表现出来。你能做的最好的是`:undojoin`，但我会觉得这很混乱。

*   RE：屏幕位置在写入时更改
    您需要使用`winsaveview()`/`winrestview()`而不是`setpos()`.

*   回复：当找不到模式时，屏幕上会显示一些不需要的错误在 的末尾
    传递标志，并添加到.`/e``:substitute``:silent!``:global`

PS：我认为 vim.org 上有插件可以满足您的需求。你试过其中一些吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:22:25.177

您根本不需要保存/恢复位置，既不使用`setpos()`也不`winrestview()`：您不能移动光标。您不需要技巧来保存/恢复搜索：使用`search()`函数代替`:g`和`setline()`代替`s/.*/\=`：

```
function! UpdateTimestamp()
  " Removed “.*” from the end of the pattern because it is pointless
  " Also made it use very-magic mode because otherwise it looks bad (too many escapes)
  " Also replaced \d\{2\} with \d\d because \d\d takes less characters
  let lnr=search('\v^(\#|\/\/)\s+\d{4}\-\d\d\-\d\d\s+\d\d\:\d\d\:\d\d\.\d+\s+\+\d{4}\s+\/\s+\VMe <me@domain.tld>', 'wn')
  if lnr
    " Matchstr gets comment leader. Above regex intended to work with # or // comments, but \=expression supported only the former, this got fixed
    call setline(lnr, matchstr(getline(lnr), '^\S\+')." " . strftime('%F %H:%M:%S.0 %z') . " / Me <me@domain.tld>")
  endif
endfunction 
```

. 注意：您和我的解决方案之间仍然存在一个差异：这里只更新了一个时间戳。这个问题可以修复。

# android - 什么会导致 Android 上的 SQLite 错误代码 778

> ID：14226377
> 
> 赞同：4
> 
> 时间：2013-01-09T00:19:19.687
> 
> 标签：android, android-sqlite

我使用 ACRA 进行错误报告，在过去的 30 天里，我收到了 6 个（我有 10 个成千上万的用户）与此类似的崩溃报告：

```
android.database.sqlite.SQLiteDiskIOException: disk I/O error (code 778)
at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:931)
at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)
at android.database.sqlite.SQLiteDatabase.replaceOrThrow(SQLiteDatabase.java:1411)
 : 
```

这些发生在我的应用程序的各个部分。所有设备都是运行 Android 4.1.2 的三星设备。我怀疑是三星的错误，但我能做些什么来缓解这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:57:32.563

在读取之前没有错误写入的 4.1.2 的 sqlite 行后，我收到了 IllegalStateException。这只发生在某些列值上。大多数列值都可以正常工作。此外，我可以使用相同的数据库并在 Android 2.3 以及 PC 上的 sqlite 版本上正常阅读。此外，我在 4.1.2 设备上安装了一个 sqlite 浏览器 (aSQLiteManager)，它在尝试读取该表时崩溃。我只能假设这是与 4.1.2 一起部署的 sqlite (3.7.11) 版本中的一个错误。我会将此报告给 sqlite 团队。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T11:30:45.843

这可能与影响 Android 4.2.2 和 4.2.1的[SQLite 错误有关。](http://www.sqlite.org/src/tkthistory/df678d738a)

您可以看到[Android 修复](https://android.googlesource.com/platform/external/sqlite.git/+/6ab557bdc070f11db30ede0696888efd19800475%5E!/)已包含在 Android 版本 4.3 中，并且与 Android 上默认启用的 AUTO_VACUUM SQLite 选项相关。

您可以更改数据库的 AUTO_VACUUM 值，但要小心并在之前阅读[AUTO_VACUUM 文档页面](http://www.sqlite.org/pragma.html#pragma_auto_vacuum)，以确保该解决方案符合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:06:25.367

我发现至少有一些测试`(ExtensionWebstorePrivateApiTest.AppInstallBubble`（例如）在 a 上成功`dev image`但在 a 上失败`test image`。即使通过`sshfs mounted directory`（不涉及自动测试）运行它们也是如此。我在屏幕上看到有关无效配置文件的错误，并且：

```
[10375:10375:0702/172634:2214463961:ERROR:nss_util.cc(88)] Failed to create /home/chronos/user/.pki/nssdb directory.
[10375:10375:0702/172634:2214497333:ERROR:nss_util.cc(588)] Error opening persistent database (configDir='sql:' tokenDescription='Real NSS database'): NSS error code: -8192
[10375:10406:0702/172634:2214908084:ERROR:diagnostic_error_delegate.h(31)] sqlite error 778, errno 0: disk I/O error
[10375:10406:0702/172634:2214908549:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: no such table: meta
[10375:10384:0702/172634:2214913640:ERROR:diagnostic_error_delegate.h(31)] sqlite error 778, errno 0: disk I/O error
[10375:10384:0702/172634:2214913831:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: no such table: meta
[10375:10406:0702/172634:2214913926:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: SQL logic error or missing database
[10375:10384:0702/172634:2214914378:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: no such table: meta
[10375:10384:0702/172634:2214914415:ERROR:keyword_table.cc(536)] Can't write default search id backup.
[10375:10384:0702/172634:2214914432:ERROR:keyword_table.cc(465)] Failed to update default search id backup.
[10375:10384:0702/172634:2214914475:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: SQL logic error or missing database
[10375:10384:0702/172634:2214914497:ERROR:web_data_service.cc(657)] Cannot initialize the web database: 1
[10375:10375:0702/172635:2215119305:ERROR:object_proxy.cc(495)] Failed to call method: org.bluez.Manager.DefaultAdapter: object_path= /: org.bluez.Error.NoSuchAdapter: No such adapter
[10375:10384:0702/172639:2219896500:ERROR:diagnostic_error_delegate.h(31)] sqlite error 778, errno 0: disk I/O error
[10375:10384:0702/172639:2219896877:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: no such table: meta
[10375:10384:0702/172639:2219896943:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: SQL logic error or missing database
[10375:10384:0702/172639:2219898265:ERROR:diagnostic_error_delegate.h(31)] sqlite error 778, errno 0: disk I/O error
[10375:10384:0702/172639:2219898567:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: no such table: meta
[10375:10384:0702/172639:2219898658:ERROR:diagnostic_error_delegate.h(31)] sqlite error 1, errno 0: SQL logic error or missing database
[0702/172716:ERROR:test_launcher.cc(386)] Test timeout (45000 ms) exceeded for ExtensionWebstorePrivateApiTest.AppInstallBubble 
```

`BUGFIX：SQLITE 4.4.1`已修复由 指示的错误`error code 778`，该错误由 引起`disk reading fault`，实际上可以由`db engine`自身在内部恢复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T19:12:10.430

我有同样的问题，它是由文件描述符打开限制引起的。广泛使用打开的文件、套接字或游标可以达到此限制。此外，如果您从这些资源之一中泄漏，则在连续使用一段时间后，您的应用程序中可能会发生此错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-05-26T12:14:56.820

可以参考[Sqlite 官方文档](https://www.sqlite.org/rescode.html#ioerr_write)。好像是硬件异常，如果不能复现，或许我们可以尝试忽略这个问题？

[(778) SQLITE_IOERR_WRITE](https://www.sqlite.org/rescode.html#ioerr_write)

> SQLITE_IOERR_WRITE 错误代码是 SQLITE_IOERR 的扩展错误代码，表示尝试写入磁盘上的文件时 VFS 层中的 I/O 错误。此错误可能是由于硬件故障或文件系统在文件打开时卸载造成的。如果文件系统已满，则不应发生此错误，因为为此目的有一个单独的错误代码 (SQLITE_FULL)。

# matlab - 在matlab中使用离散小波变换进行图像索引

> ID：14226378
> 
> 赞同：0
> 
> 时间：2013-01-09T00:19:21.573
> 
> 标签：matlab

我在matlab中做了一个函数，它使用离散小波变换实现了索引图像的概念，但我需要知道matlab中是否有一个预定义的函数来执行相同的功能

提前致谢，

哈桑。

# javascript - 为什么在引用对象消失后变量仍然包含数据

> ID：14226380
> 
> 赞同：0
> 
> 时间：2013-01-09T00:19:26.700
> 
> 标签：javascript, html, iframe

```
iframe1.map_data=iframe2.map_data 
```

这不是设置`iframe1.map_data`参考`iframe2.map_data`吗？

当一个新文件加载到`iframe2`中时，为什么`iframe1.map_data`仍然包含数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:27:19.367

让我们不要把 iframe 都弄糊涂了。

```
var obj1 = {
  a: {test: 123};
}

var obj2 = {};
obj2.a = obj1.a;

// both properties point to the same object.
obj1.a; // {test:123}
obj2.a; // {test:123}

// modify a property of obj1.
obj1.a = 'abc';

// properties point to different objects.
obj1.a; // 'abc'
obj2.a; // {test:123} 
```

这基本上就是你所说的，没有 iframe。

所以属性*指向*对象，而不是其他属性。`obj1.a = obj2.a`不以任何方式链接属性。它只是将两个属性设置为指向同一个对象。

如果我稍后将这些属性之一指向不同的对象，它不会更改任何其他属性。

* * *

但是，如果您修改多个属性指向的对象，则可以传播有意义的更改。

```
var obj1 = {
  a: {test: 123};
}

var obj2 = {};
obj2.a = obj1.a;

// modify a property of the shared object.
obj1.a.test = 456;

// both properties point to the same object.
obj1.a; // {test:456}
obj2.a; // {test:456} 
```

为什么这两者都改变​​了？因为在这种情况下，`obj1.a`两者`obj2.a`都引用了同一个对象，而那个对象发生了变化。

这次我们修改共享对象。以前，我们修改了未共享的对象。

看到不同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:27:48.757

我假设你在谈论这个：

```
// Get references to 2 <iframe> nodes
var iframes = document.getElementsByTagName('iframe');
var iframe1 = iframes[0];
var iframe2 = iframes[1];

// Create a custom property
iframe2.map_data = { foo : 'bar' };
iframe1.map_data = iframe2.map_data;
iframe2.src = 'http://microsoft.com';

// This won't change, regardless of 
// loading a new document into iframe2
alert(iframe1.map_data.foo); 
```

即使您将新文档加载到该`iframe2`iframe 中，DOM 节点仍将是同一个节点。由于您在其`map_data`上创建了属性，因此它将持续存在。将新文档加载到 iframe 中只会修改框架的`contentWindow.document`，而不是代表主文档上的框架的节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:26:18.817

这取决于是什么`map_data`。如果它是一个对象，那么是的，一个引用。如果它类似于 int，那么不，它是被克隆的。

```
var t = {}, u = {};
t.hi = 3;
u.hi = t.hi;
t.hi = 4;
console.log(u.hi); // 3

t.hi = {x:3};
u.hi = t.hi;
console.log(u.hi) // {x : 3}
t.hi.x = 2;
console.log(u.hi) // {x : 2}

t.hi = 3;
console.log(u.hi) // {x : 2} 
```

# php - PHP is_readable 对不可读文件返回 true

> ID：14226386
> 
> 赞同：5
> 
> 时间：2013-01-09T00:19:52.053
> 
> 标签：php, file-permissions, getimagesize

我有一个图像处理器 PHP 脚本，它包含以下代码：

```
 if (!is_dir($fullFile)) {
            if (is_readable($fullFile)) {
                $im = getimagesize($fullFile); // Will be FALSE if not an image 
```

在某些情况下，脚本将在 getimagesize 处失败，并出现以下错误：

```
getimagesize(/path/to/file.jpg) [function.getimagesize]: failed to open stream: Permission denied at www.yada.yada/page.php 
```

在这种情况下，/path/to/file.jpg 的权限绝对是禁止的（400），所以我预计 is_readable 测试会阻止我达到这一点。除了以不同的方式设置权限之外，我还能做些什么来解决这个问题？为什么似乎 is_readable 的结果不正确？is_readable 是否有可能使用文件所有者的 EUID 进行操作，而 getimagesize 不是？这是唯一对我有意义的解释，但即使是这种知识也无助于解决问题。

在@hek2mgl 的提示下，我创建了这个超复杂的脚本，名为 readable.php：

```
<?php echo is_readable("/stora2/Pics/2009/2009-07-26/DSC00532.JPG") . "\n\n"; ?> 
```

然后我将用户切换到 Web 服务器用户（实际上是该服务器上的 www-data）并运行它。结果是

```
1 
```

然后我以同一个用户的身份运行 strace。这些是我使用的命令。结果是一个 70KB+ 的文件，所以我不让我完整地发布它，所以它发布在[http://pastebin.com/mFqiSBiz](http://pastebin.com/mFqiSBiz)

```
dennis@luke:~$ sudo su - www-data

$ ls -l "/stora2/Pics/2009/2009-07-26/DSC00532.JPG"
-rw------- 1 dennis dennis 524288 2012-02-11 08:18 /stora2/Pics/2009/2009-07-26/DSC00532.JPG

$ file "/stora2/Pics/2009/2009-07-26/DSC00532.JPG"
/stora2/Pics/2009/2009-07-26/DSC00532.JPG: writable, regular file, no read permission

$ php /home/dennis/readable.php
1

$ strace php /home/dennis/readable.php > /tmp/strace.out 2>&1 
```

不知道我在找什么。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:52:24.653

正如 hek2mgl 在评论中所说，这取决于您正在运行的 php 版本，这可能是一个错误。如果要解决此问题，可以使用[fileperms添加基于文件权限的逻辑](http://php.net/manual/en/function.fileperms.php)

# ruby-on-rails - CORS preflight OPTIONS 请求是否应该返回 200 OK？

> ID：14226388
> 
> 赞同：2
> 
> 时间：2013-01-09T00:20:17.267
> 
> 标签：ruby-on-rails, cross-domain, cors

我正在使用 rack-cors 中间件从站点向我的 rails 应用程序发出跨域请求（尽管我不认为这个问题特定于 rack-cors）。当我用 firebug 检查控制台输出时，我注意到只有一个请求发出，即 POST 请求。OPTIONS 请求是秘密提出的吗？

同样，当我检查我的服务器日志时，我看到

`Started OPTIONS "/australia_post_api_connections" for 127.0.0.1 at 2013-01-08 16:06:18 -0800`

但没有对应的

`Completed 200 OK in 1441ms (Views: 85.2ms | ActiveRecord: 0.0ms)`

这是正常的，还是意味着 OPTIONS 请求没有运行完成？我应该从 CORS preflight OPTIONS 请求中得到什么样的响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T00:27:42.623

CORS OPTIONS 响应应该返回 200 个，以及与它们一起的各种`Access-Control-*`标题。

我的猜测是，您没有在 Rails 日志中看到它为“Completed 200”，因为它在 Rails 框架中发生日志记录之前发生在 Rack 中间件中。

您可以在 Firebug/Chrome 的开发者工具网络面板中检查请求/响应标头，以验证一切是否正常进行。我不相信 Firebug 隐藏了 OPTIONS 请求，但是如果`Access-Control-Max-Age`正在返回 OPTIONS 请求的结果，则可能会被缓存。

# vim - 如何使用 NERD Commenter for vim -- 如何使用 钥匙

> ID：14226390
> 
> 赞同：70
> 
> 时间：2013-01-09T00:20:47.557
> 
> 标签：vim

我找到了 vim 的 NERD 评论插件，但我不理解文档。假设我想在 c/c++ 中评论一些代码，例如

```
code line 1  
code line 2 
```

变成

```
/*
code line 1  
code line 2  
*/ 
```

我已经看到了其他线程，但老实说，我不知道[NERD 评论者文档](http://www.vim.org/scripts/script.php?script_id=1218)`<leader>`中的内容。[当我在另一个线程](https://stackoverflow.com/questions/1375031/nerd-commenter-how-to-comment-out-a-range)中尝试接受的答案时，我最终在所选行上执行了更改命令。什么是，以及如何一步一步地用 来评论行？`<leader>``/* */`

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-09T00:50:59.273

试试内置帮助，非常棒。`:help <Leader>`将您带到相关文档。它只是一个未使用键的标识符（默认情况下`\`，但很多人将其更改为`,`），建议用于启动任何自定义映射。

NERD_commenter 定义`<Leader>cc`映射，所以你会按（一个接一个）`\` `C` `C`：。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-10-05T17:37:58.443

# 你的键盘有问题

在许多**非英语键盘布局中，**反斜杠`\`只能通过`AltGr`组合键访问。这使得`<Leader>`字符的默认设置对于这些非英语键盘用户来说相当不切实际。

此外，`<Leader>`按键组合的默认超时时间为 1000 毫秒。这可以通过`<Leader>`命令行右边缘的键消失来观察。因此，非英语键盘用户需要是真正的快速打字员`</kbd>`c``c` to work. Failure to do so, results in an undesired `cc` line change.`

这是德语键盘布局的示例，其中反斜杠键位于顶行，右三： ![德语键盘布局](../Images/b17cc73b7a36aad51c66a1795f7cc722.png)

#Solution 建议非英文键盘用户**将`<Leader>`键**从`\`字符更改为更易于访问的`,`键。Vim 初学者也应该考虑**稍微长一点的 1500 毫秒超时。**这是需要添加的内容`~/.vimrc`

```
let mapleader=","
set timeout timeoutlen=1500 
```

最后一个警告；这些**更改只有在完全退出 Vim 后才会生效。**资源与`:source $MYVIMRC`将不起作用！

完成后，现在可以使用`,``c`c 与 NERD Commenter 进行评论。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-24T21:49:00.263

> 如何用 /* */ 注释行？

Аs 在[文档](http://www.vim.org/scripts/script.php?script_id=1218)中说明：

```
[count]<leader>cm |NERDComMinimalComment| 
Comments the given lines using only one set of multipart delimiters. 
```

所以，只需使用

*   `\` `c` `m`（如果你`<leader>`是`\`），或
*   `,` `c` `m`（如果你`<leader>`是`,`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-02T21:46:14.537

> @IngoKarkat注意：您不需要按住键，只需像其他任何键一样按下它，然后释放它。

对原始问题的建议完全错误！

使用 NerdCommenter，您必须按住该`<leader>`键。否则，正如 OP 发现的那样，您最终只会激活“更改”模式。

# c# - 如何将 WSHttpBinding 添加到 NinjectServiceHostFactory

> ID：14226391
> 
> 赞同：2
> 
> 时间：2013-01-09T00:20:55.583
> 
> 标签：c#, .net, wcf, ninject, ninject-extensions

在我的**NinjectWebCommon**类在**App_start**中运行之后，我将我的 WCF 接口绑定到如下服务：

```
public static void LoadModules(IKernel kernel)
{
    kernel.Bind<IAccountService>().To<WCFAccountService>();
} 
```

如何告诉系统接受对**IAccountService的****WSHttpBinding**调用？

 **这是我的 .svc 供参考：

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="AAA.AAA.AAA.WCFAccountService" 
    Factory="Ninject.Extensions.Wcf.NinjectServiceHostFactory" %> 
```

（注意：我正在使用**Ninject.Extensions.Wcf**并且只有**BasicHttpBinding**似乎“开箱即用”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:41:32.580

您需要在 web.config 中配置服务，例如

```
 <service name="AAA.AAA.AAA.WCFAccountService" behaviorConfiguration="AAA.AAA.AAA.WCFAccountServiceBehavior">
    <endpoint name="IAccountService" address="" binding="wsHttpBinding" contract="AAA.AAA.AAA.IAccountService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service> 
```**

# eclipse - Eclipse 调试和 JBOSS 部署

> ID：14226392
> 
> 赞同：1
> 
> 时间：2013-01-09T00:21:02.130
> 
> 标签：eclipse, jboss

我正在 Eclipse 中调试一个 Web 服务项目，该项目使用 JBOSS 作为 EAR 文件部署在本地服务器上。我想知道我调试的代码和部署的应用程序是如何相关的。我不明白的是，虽然调试器通过了我们看到的代码，但它实际上是在执行部署的应用程序。

# c# - 添加包含字符串的 Linq Where 子句的问题包含测试

> ID：14226393
> 
> 赞同：2
> 
> 时间：2013-01-09T00:21:04.883
> 
> 标签：c#, string, linq, where

好吧，这种行为让我很困惑。我有一个 IQueryable 列表，我正在尝试添加 Where 子句来检查字符串字段是否包含子字符串。当我像这样对搜索字符串进行硬编码时：

```
sourceList = sourceList.Where(license => license.FileNumber.Contains("S0")) 
```

它按预期工作，并通过在 Visual Studio 调试器中检查 sourceList 生成内部查询：

```
{SELECT [Extent1].[id] AS [id], [Extent1].[FileNumber] AS [FileNumber],
    [Extent1].[LegalLocation] AS [LegalLocation]FROM [dbo].[Licenses]
    AS [Extent1]WHERE [Extent1].[FileNumber] LIKE N'%S0%'} 
```

当我从以下变量设置搜索值时，会发生奇怪的事情：

```
string testString = "S0";
sourceList = sourceList.Where(license => license.FileNumber.Contains(testString)) 
```

这会生成内部查询：

```
{SELECT [Extent1].[id] AS [id], [Extent1].[FileNumber] AS [FileNumber],
    [Extent1].[LegalLocation] AS [LegalLocation]FROM [dbo].[Licenses]
    AS [Extent1]WHERE [Extent1].[FileNumber] LIKE @p__linq__0 ESCAPE N'~'} 
```

注意到最后 LIKE 部分的不同了吗？我真的很困惑。任何帮助将不胜感激。希望这真的很愚蠢。如果它有任何相关性，这是用于过滤来自实体框架源的数据。

谢谢，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:32:15.150

如果你观察实际的查询，你会看到`@p__linq__0`实际上是赋值`S0`，然后传递给查询。

```
@p__linq__0 = '%S0%';
... WHERE [Extent1].[FileNumber] LIKE @p__linq__0 ESCAPE N'~' 
```

基本上是这样的：

```
... WHERE [Extent1].[FileNumber] LIKE N'%S0%' ESCAPE N'~' 
```

而且因为它是一个参数，LINQ 只是采取了预防措施并添加了`ESCAPE`子句。它也是一个变量而不是硬编码常量，LINQ 语句中的任何变化值都作为参数传递，而不是直接插入到查询中。

参考：[LIKE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:40:21.273

`LIKE`正如预期的那样，第二个内部查询只是在子句中使用了一个参数。

如果您观察到不同的结果，可能是因为您`"SO"`在一种情况下通过，而`"S0"`在另一种情况下（至少在您问题中的某些代码中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:40:46.387

在第二种情况下，LINQ 生成一个参数化查询。考虑一下，如果您使用 some 手动构造参数化查询`DbCommand`：

```
OleDbCommand cmd = new OleDbCommand(
     "SELECT * from SomeTable where SomeField like @Param1", con);
cmd.Parameters.Add("@Param1", OleDbType.VarChar).Value = "%SomeField value%"; 
```

`@p__linq__0`linq 生成的参数的名称也是如此（而在我的示例中是`@Param1`）。

`ESCAPE`关键字是`LIKE`表达式的一部分（参见[LIKE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms179859.aspx)）：

> **句法**
> 
> ```
> match_expression [ NOT ] LIKE pattern [ ESCAPE escape_character ] 
> ```

在哪里

> 转义字符
> 
> ```
> Is a character that is put in front of a wildcard character to indicate that the    
> wildcard should be interpreted as a regular character and not as a wildcard. 
> escape_character is a character expression that has no default and must evaluate to 
> only one character. 
> ```

# python - Python：将函数分配给动态创建的单选按钮

> ID：14226396
> 
> 赞同：0
> 
> 时间：2013-01-09T00:21:43.160
> 
> 标签：python, tkinter

我是 python 新手，我的任务是从列表框中获取输入并为每个条目创建单选按钮。在我的代码中，我可以创建单选按钮，但是当我单击它们时它们不起作用，即在这种情况下它们不会打印“hello”和数字 i。这是代码：

```
def generateGraph():
    w = Toplevel(bg = "grey")
    w.resizable(0,0)
    frameData = Frame(w, bg="grey", padx=10, pady=10)
    frameData.grid(row = 0, column=0, pady = 1, padx = 1, sticky = N+E+S+W)
    InputLabel = Label(frameData, text="Inputs:", bg="grey")
    InputLabel.grid(row=1, column=0, padx=10, sticky=N+E+S+W)
    OutputLabel = Label(frameData, text="Outputs:", bg="grey")
    OutputLabel.grid(row=1, column=1, padx=10, sticky=N+E+S+W)

    i=0
    c=[]
    inputVar = IntVar()
    while(InputBox.get(i)):
        c.append(Radiobutton(frameData, text=InputBox.get(i), variable=inputVar, value = i, background="grey", command= hello(i)))
        c[i].grid(row = i+2, column = 0, sticky = W)
        i=i+1
    if makemodal:
        w.focus_set()
        w.grab_set()
        w.wait_window()
def hello(i):
    print("hello %d" %i) 
```

请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:31:07.880

问题是您在`hello(i)`构建时调用`Radiobutton`，而不是存储稍后调用的内容：

```
 c.append(Radiobutton(frameData, text=InputBox.get(i), variable=inputVar, value = i, background="grey", command= hello(i))) 
```

由于`hello`退货`None`，您有效地存储了`command=None`.

您需要在此处存储一个可调用对象，例如`hello`其自身（或 a `lambda`or`partial`或其他），而不是调用它的结果。

例如：

```
 c.append(Radiobutton(frameData, text=InputBox.get(i), 
                         variable=inputVar, value = i, background="grey",
                         command=functools.partial(hello, i))) 
```

既然您在评论中问过：请注意，我使用`partial`了而不是`lambda`，因为我想绑定 的值`i`，而不是关闭变量`i`。否则，您最终会得到例如 5 个单选按钮，它们都绑定到`i`具有 value的同一个变量`4`。还有其他方法可以解决这个问题 - 使用显式工厂，do`lambda x=i: hello(x)`代替`lambda: hello(i)`等。对我来说，`partial`这似乎是最清晰和最明确的，但你的里程可能会有所不同。无论如何，关于这个有几十个问题，但是[python lambda函数及其参数的范围](https://stackoverflow.com/questions/938429/scope-of-python-lambda-functions-and-their-parameters)的答案似乎特别清楚。

# iframe - 隐藏 Vimeo 播放/暂停按钮？

> ID：14226399
> 
> 赞同：6
> 
> 时间：2013-01-09T00:22:00.983
> 
> 标签：iframe, vimeo

我正在使用 Vimeo iframe 将 Vimeo 视频嵌入到我的网站中。

在 Vimeo 中，我禁用了所有功能.. 拇指、标题、音量等。但我无法禁用视频中间的播放/暂停按钮。

因为我使用 vimeo 视频作为背景视频，所以我想隐藏播放/暂停按钮。

是否有可能使用 jQuery 找到按钮然后隐藏它？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-25T11:07:56.990

我最近一直在研究这个问题，我认为答案是否定的。基本上，Vimeo 嵌入选项不支持禁用播放/暂停按钮。如果您可以与播放器的 iframe 通信，则可以插入带有一些 CSS 规则的标签来禁用它。但你不能。如果 iframe 是由您编写的，并且您为跨域通信添加了一个侦听器，则可以（如下所示： http: [//www.codeproject.com/Tips/585663/Communication-with-Cross-Domain-IFrame-A -交叉兄弟](http://www.codeproject.com/Tips/585663/Communication-with-Cross-Domain-IFrame-A-Cross-Bro)）。但出于明显的安全原因，Vimeo 播放器 iframe 没有此功能。

在 Vimeo 论坛 ( [https://vimeo.com/forums/topic:37769](https://vimeo.com/forums/topic:37769) ) 中，一位 Vimeo 工作人员一年前说：

> 大家好，如果您是 PRO 会员，您可以使用支持删除所有播放器 chrome 的第三方播放器：vimeo.com/help/faq/sharing-videos/embedding-videos#how-do-i-use -a-third-party-player-with-vimeo-pro Vimeo 的播放器不会移除播放/暂停按钮。

所以，基本上，你/我唯一的选择是去 PRO 并使用第三方播放器，或者开发你自己的（这相当于根本不使用 Vimeo，Vimeo 唯一能为你提供的就是托管视频文件，据我所知）。

# android - 当对焦模式设置为连续图片时，Nexus 4 相机闪光灯不闪光

> ID：14226401
> 
> 赞同：5
> 
> 时间：2013-01-09T00:22:16.537
> 
> 标签：android, camera, android-camera, nexus-4

我遇到了一个奇怪的问题，特别是在 Nexus 4 上（尽管它可能存在于其他设备上），当对焦模式设置为`FOCUS_MODE_CONTINUOUS_PICTURE`. 相同的代码在运行相同版本的 Android (4.2.1) 的 Galaxy Nexus 上运行良好。有没有人遇到过这个问题？我可以通过简单地将焦点模式切换到`FOCUS_MODE_AUTO`. 我希望这个问题有一个简单的解决方法，因为连续图片对焦模式非常重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:48:32.860

*（因为在答案中结束我的评论是值得的。）*

我怀疑在 Nexus 4 上无法连续对焦的原因是我从 Barcode Scanner 用户群那里听到了一些关于此的传言（我是作者）。Nexus 4 似乎无法使用或未启用连续对焦。

我还没有看到更多细节来确认/否认这一点，但是，我确实在其他设备上看到了这种确切形式的问题。特别是 Galaxy S2 似乎有一些不好的焦点错误。

It manifests as something slightly different: there is some *third* parameter you are setting which should be supported, or says it's supported, but actually causes the driver to barf. Then it doesn't honor the focus or torch setting. It may be that continuous focus, and torch, work. But a third setting is tripping it up.

Look into the `logcat` output. You should see debug messages from the driver. The exact nature depends a lot on the firmware. But in cases like this you will likely see errors in the driver. I usually see "unsupported parameter X" and cryptic numbers; sometimes it's much clearer about what it didn't like.

这可能会给您一个线索，实际上是场景模式或测光区域之类的问题。（而且我已经看到其中的每一个都在至少一个设备上导致了这个问题。）

我也有一个 Galaxy Nexus 并且从未观察到这种形式的任何问题。

我还要说，持续聚焦在某些设备上*可以*很好地工作。在某些设备上，比如我的旧 Desire HD，它比简单的自动对焦模式更糟糕。YMMV；我得出的结论是它不一定有用，因此将常规自动对焦设置为条码扫描仪中的默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:15:52.803

Nexus 4 的摄像头存在很多问题。

首先请尝试 parameters.getSupportedFocusModes()

要恢复继续自动对焦，只需在“AutoFocusCallback.java”中调用相机上的“cancelAutoFocus()”，

```
{
if (autoFocusHandler != null) {
  camera.cancelAutoFocus(); 
  ...
} 
```

如果对焦模式为“FOCUS_MODE_AUTO”，则此调用无效，因为调用 onAutoFocus() 时自动对焦已完成。但是当使用“FOCUS_MODE_CONTINUOUS_PICTURE”时，它会恢复连续自动对焦。

希望它有帮助。我会做更多的工作和更新。

# hadoop - Hadoop调度程序保留数据局部性

> ID：14226407
> 
> 赞同：0
> 
> 时间：2013-01-09T00:22:59.403
> 
> 标签：hadoop, scheduler

我检查了几个文档，但我对 Hadoop 中保留数据局部性的任务调度有疑问。假设任务的输入数据`t`是`D1`并且复制因子是 3（这意味着我有 3 个 D1 副本存储在 3 个不同的服务器上）现在到达时，将分配`t`哪个严重者？`t`（考虑默认调度程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:59:10.100

Hadoop 将尝试使用所有可用的映射器插槽。如果它有办法分配任务保留数据的局部性，那么它将这样做（也就是说，如果包含 D1 副本的这 3 个服务器之一具有可用的映射器插槽，它将尝试将其放在该服务器上）。如果这 3 个服务器上的所有映射器都被占用，但还有另一台服务器具有可用的映射器插槽，则任务将放置在该映射器上。

# c# - HttpPostedFileBase 总是返回 null 并且图像不会被发布

> ID：14226408
> 
> 赞同：3
> 
> 时间：2013-01-09T00:23:01.857
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

嗨，我在发布图片时似乎遇到了问题。我在 stackoverflow 和其他讨论该主题的论坛上检查了许多问题，但似乎没有一个提供我需要的答案。这是我的代码：

```
@using( Html.BeginForm("Create", "ProductManager", FormMethod.Post, new{enctype = "multipart/form-data"})){

    <ul>
        ....
        <li>
             @Html.LabelFor(model => model.ProductImagePath , "Avatar")
             <input type="file" id="ProductAvatar" name="ProductAvatar" />
             @Html.HiddenFor(model => model.ProductImagePath , new { id = "AvatarHiddenField"})
        </li>
         <li>
             @Html.LabelFor(model => model.ProductName , "Product Name")
             @Html.EditorFor(model => model.ProductName)
         </li>
         .....
    </ul>
}
[HttpPost]
        public ActionResult Create( FormCollection collection ,  HttpPostedFileBase avatar)
        {
            string file = collection["ProductAvatar"];
            var avatars = avatar;
        } 
```

通过调试，我发现 HttpPostedFileBase 返回 null。集合中的其他表单数据已成功发布。只有图像未发布。我似乎无法从 FormCollection 或 HttpPostedFileBase 访问 ProductAvatar ，似乎它甚至没有发布

我怎样才能纠正这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:36:47.973

您必须使用在表单上将参数名称更改为`HttpPostedFile`与输入文件相同的名称，或者您也可以使用`Request.Files`并通过`name`输入文件的属性获取，尝试如下操作：

```
[HttpPost]
public ActionResult Create(FormCollection collection)
{
   HttpPostedFileBase file = Request.Files["ProductAvatar"];

   if (file.ContentLength > 0)
   {
      file.SaveAs(/* path */);
   }

   // othyer tasks

   return RedirectToAction("Index");
} 
```

该`name`属性是浏览器在提交时将在 post/get 表单上发送的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T01:02:05.177

您的操作方法参数名称需要与文件输入名称匹配。

所以有了这个：

```
<input type="file" id="ProductAvatar" name="ProductAvatar" /> 
```

您需要一个方法签名，例如：

```
public ActionResult Create(FormCollection collection, HttpPostedFileBase productAvatar) 
```

# node.js - node.js 找不到模块“mongodb”

> ID：14226410
> 
> 赞同：54
> 
> 时间：2013-01-09T00:23:20.577
> 
> 标签：node.js, mongodb

我正在经历我的第一个 node.js 项目。我已经安装了 mongodb，有一个 server.js 文件，当我尝试运行它时出现此错误

```
module.js:340
    throw err;
         ^
Error: Cannot find module 'mongodb'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17) 
```

我很确定我已经安装了 mongodb，我是来自 C# windows 背景的 unix 新手，但我认为这是一条未正确配置的路径？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-09T01:26:38.433

您收到的错误表明未正确安装 MongoDB 的 NPM 包。

此处的修复取决于您计划如何利用 NPM。NPM 包管理器操作有两种不同的操作模式：本地和全局。

第一个（*和默认*）模式是“本地”。

如果您进入该文件夹，`server.js`您将看到一个名为`node_modules`. 在该文件夹下将是一个`mongodb`文件夹。如果该文件夹不存在，则该`mongodb`模块未安装在该路径上。

要更正此问题，请到`cd`该文件夹​​并键入`npm install mongodb`. 完成该过程后，您应该可以使用该`node_modules/mongodb`文件夹。

您还可以使用全局安装 MongoDB 包`npm install -g mongodb`。如果您使用大量 node.js 命令行的东西，这很有用，但如果您正在部署整个东西，那么用处不大。

**旁注**：有一个不断发展的标准`package.json`。这`package.json`是包含给定模块的所有依赖项的标准化方式。这允许您运行`npm update`或`npm install`在项目/包的根目录下运行，并有效地“拉入”所有依赖项。这极大地简化了部署过程和保持依赖关系的过程。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-05-30T17:55:36.603

在尝试安装它一段时间后没有成功（因为我是 mongo 和 node 的新手），我确实错过了 npm 链接步骤。总结一下，我这样做了：

1.  npm install mongodb -g
2.  cd /path/to/my/app/文件夹
3.  npm 链接 mongodb

有了它，我可以在我的应用程序文件中执行此操作：require('mongodb')。

以下是一些参考资料，以备不时之需：

*   [npm 全局 vs 本地](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)
*   [npm 链接](https://npmjs.org/doc/link.html)
*   [Mongo DB简介](http://mongodb.github.io/node-mongodb-native/api-articles/nodekoarticle1.html#mongo-db-data-types)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-10T06:28:11.443

此问题可能是由以下原因之一引起的。

1）你还没有安装 mongodb 模块。

2）您已在全局上下文中安装了 mongodb，但未链接到当前应用程序。

**解决方案**

1) 遍历应用顶层目录并执行**npm install mongodb**，这将安装 mongodb 模块，您的项目会自动检测它。

**或者**

2）执行**npm install mongodb -g**全局安装 mongo DB 模块，然后 Ttaverse 到应用程序顶层目录并使用命令**npm link mongodb**命令链接。

**有用的链接**

[http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)

[https://npmjs.org/doc/link.html](https://npmjs.org/doc/link.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-18T14:29:42.950

你可以做两件事来让它运行：-

1）通过以下步骤**全局安装mongodb ：-**

一种）`npm install mongodb -g`

b) 进入你的 app 目录，module.js 所在的目录，然后运行

`npm link mongodb`

说明：- 当您通过 npm 全局安装包时，它会下载到全局 node_module 文件夹。对我（Mac 用户）来说，它位于*/usr/local/lib/node_modules/mongodb*下。我们将其链接到您尝试运行 module.js 的目录。

2）**另一种方法是在本地安装mongodb，而不是**通过全局安装

`npm install mongodb`

执行完其中任一操作后，您将在“module.js”目录下看到 node_modules --> mongodb 文件夹，这意味着 mongodb 已成功安装。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-19T12:20:29.820

通过以下步骤全局安装 mongodb：-

a) npm install mongodb -g

b) 进入你的 app 目录，module.js 所在的目录，然后运行

npm 链接 mongodb

说明：- 当您通过 npm 全局安装包时，它会下载到全局 node_module 文件夹。对我（Mac 用户）来说，它位于 /usr/local/lib/node_modules/mongodb 下。我们将其链接到您尝试运行 module.js 的目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-28T12:02:44.737

**错误**

```
jamsheed-h110m-s2ph:~/project/jamsheed/meanStack/mean$ node server.js
module.js:538
    throw err;
    ^
Error: Cannot find module 'mongodb'
    at Function.Module._resolveFilename (module.js:536:15)
    at Function.Module._load (module.js:466:25)
    at Module.require (module.js:579:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/home/haseeb/project/jamsheed/meanStack/mean/server.js:3:13)
    at Module._compile (module.js:635:30)
    at Object.Module._extensions..js (module.js:646:10)
    at Module.load (module.js:554:32)
    at tryModuleLoad (module.js:497:12)
    at Function.Module._load (module.js:489:3) 
```

**解决了**

> npm 安装 mongodb
> 
> 编辑 package.json = "mongodb": "^3.0.1"，更改 "mongodb": "3.0.1"，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-18T04:50:35.727

我是 MongoDB 的新手。花了几个小时通过 npm 安装 mongodb 后，我终于得到了图片。看，实际上您需要处理三个“mongodb”（我使用的是 OSX）：

1、NodeJS中使用的驱动：即：var mongo = require('/usr/local/lib/node_modules/mongodb')。或者，您可以使用前面帖子中提到的“npm 链接”以避免长路径。命令“npm install -g mongodb”在 /usr/local/lib 下安装 mongodb 驱动程序（这就是“-g”的意思）。这家伙花了几个小时安装，不知道为什么，所以请耐心等待！

2\. mongodb 实用程序（即UNIX 可执行命令）。[您可以从http://www.mongodb.org/downloads](http://www.mongodb.org/downloads)下载它们。它包含允许您启动 mongodb 数据库的 mongod 命令。所以在我的 /usr/local/bin 中，我创建了一个符号链接 mongod，指向 /usr/local/lib/node_modules/mongodb-osx-x86_64-2.6.7/bin/mongod，所以我可以从任何地方执行 mongod .

3、/data/db指向的mongodb数据库。因此，在 /data 下，我创建了一个符号链接 db，指向 /Users/your_user_id/Database/mongodb（或任何您喜欢放置的位置），其中 mongodb 是您可以通过 mkdir 创建的空目录。

因为上面已经安装了#2 mongodb，所以可以在命令行执行mongod，会创建并启动mongodb#3下的数据库。

因为你已经通过 npm 安装了 mongodb #1，所以现在你可以在你的 NodeJS 程序中使用它。

任务完成！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-05T10:19:44.827

我遇到了同样的问题，我通过这些步骤解决了。

1.转到您的项目目录。（cd您的项目路径）

2.在命令shell中运行此命令（安装npm）

3.运行你的项目（例如 node app.js）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-26T07:34:24.907

可能是您尝试运行其他项目路径。我遇到了同样的问题，并通过以下几个步骤得到解决。

**1.) 使用命令外壳“cd /project path”**转到您的项目目录。

 **2.) 现在运行你的项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-22T05:41:29.870

我的问题是，当我最初创建我的 package.json 文件时，我已经使“版本”键对应于“1.0.0”的值。当我将其更改为版本值以反映我想在“依赖项”键下使用的版本时，我摆脱了错误。下面是潜在修复的图片。注意“dependencies”下的“version”和“mongodb”是如何匹配的。 [![在此处输入图像描述](../Images/09b79663f87e4e81a3793691bb69aa91.png)](https://i.stack.imgur.com/kvyYo.png)**

# macos - 使用 Python 标准库验证 OS X 用户密码的最佳方法是什么？

> ID：14226412
> 
> 赞同：0
> 
> 时间：2013-01-09T00:23:36.613
> 
> 标签：macos, python-2.7, passwords

我正在编写一个脚本，该脚本使用 CocoaDialog 提示登录用户输入密码，以启动 FileVault 2 加密。

理想情况下，我想验证密码是否正确，但我还没有找到这样做的好方法。我尝试通过 subprocess 模块生成 /usr/libexec/chkpasswd ，但它似乎在我可以将密码传递给标准输入之前点击返回。（我只是得到“对不起”，这是错误密码的标准输出。）

我简要地查看了 pexpect，但我想在没有第三方工具的情况下执行此操作，以保持部署简单。

所有 Mac 都将运行 OS X 10.8.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:47:12.617

快速浏览一下就会发现：[chkpasswd 中 PAM 身份验证的达尔文源代码](http://www.opensource.apple.com/source/system_cmds/system_cmds-496/chkpasswd.tproj/pam_passwd.c)。看起来 chkpasswd 正在使用它自己的子 TTY 来获取您的密码：

```
/* Initialize PAM. */
pamc.conv = &openpam_ttyconv;
pam_start(progname, uname, &pamc, &pamh);

printf("Checking password for %s.\n", uname); 
```

[然后是更多 PAM 特定代码，以查看密码是否有效。]

这对安全性有好处，但对您不利：您无法使用 I/O 重定向来发送密码。根据 pexpect 的工作方式，*它*甚至可能无法做到这一点：它可能会继续向运行 chkpasswd 的 TTY 而非子终端发送输入。我对每个组件的接线了解得不够多，无法在不测试的情况下进行猜测。

我知道这并不能真正解决您的问题，但我认为这值得一提。

# c - 为 execvp() 添加目录到 PATH

> ID：14226413
> 
> 赞同：0
> 
> 时间：2013-01-09T00:23:38.407
> 
> 标签：c, unix, path, terminal, execvp

我正在用 C 编写一个类似控制台的小型程序，以及 ls、tac 和 dir 的实现。

我使用 execvp() 函数来覆盖进程的分叉子进程，但是当用户插入上述 3 个命令之一时，我必须执行我自己的版本，而不是系统中的那个。

我知道 execvp() 使用系统 PATH 变量在不同位置搜索可执行文件。我可以在我的程序中以某种方式编辑 PATH，这样我就可以添加一个自定义目录作为 execvp() 搜索的第一个位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:27:49.460

您可以更改- 但请注意，在`PATH`执行.`setenv``exec`

# sql - 可以从 CTE 返回记录和计数吗？

> ID：14226415
> 
> 赞同：2
> 
> 时间：2013-01-09T00:23:56.043
> 
> 标签：sql, sql-server, sql-server-2008, common-table-expression

假设我有一个存储过程，它调用了一个返回参数`Count`，它由以下 SQL 组成：

```
with temp as
(
    SELECT ROW_NUMBER() OVER( ORDER BY o.createDate) as rowNum,
           o.orderId
    FROM Orders as o

)
SELECT * FROM temp where rowNum BETWEEEN 10 and 20
SELECT @Count = COUNT(*) FROM Temp 
```

目前这将中断，因为`Temp`在第一次选择之后就消失了。我是否可以将返回参数的值设置为我的 CTE 中的总行数**并**返回 10-20 的行？

我想我可能不得不使用临时表来做这件事，但我很好奇它是否可以使用 CTE 来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:32:32.127

您可以将值直接放入 temp 中：

```
with temp as
(
    SELECT ROW_NUMBER() OVER( ORDER BY o.createDate) as rowNum,
           count(*) over () as cnt,
           o.orderId
    FROM Orders as o

)
SELECT * FROM temp where rowNum BETWEEEN 10 and 20 
```

然后，您可以读取每一行的cnt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:55:22.317

不幸的是，你不能做你想做的事。戈登的回答是可以接受的，只是它没有向您的变量返回值。

你遇到了一个根本性的问题。CTE 只允许在它之后进行一个查询。

临时表或表变量将是唯一的方法。除非您将在 CTE 之外再次查找表以返回变量，如下所示：

```
with temp as
(
    SELECT ROW_NUMBER() OVER( ORDER BY o.createDate) as rowNum,
           o.orderId
    FROM Orders as o
)
SELECT * FROM temp where rowNum BETWEEEN 10 and 20
SELECT @Count = COUNT(*) FROM Orders 
```

# go - Go lang 模板：总是引用一个字符串并删除注释

> ID：14226416
> 
> 赞同：3
> 
> 时间：2013-01-09T00:24:05.897
> 
> 标签：go, go-templates

这个 Go 代码总是在模板中引用一个字符串：[http](http://play.golang.org/p/8k4s8dv2PE) ://play.golang.org/p/8k4s8dv2PE - 你可以看到结果。我怎样才能生成`var currentUser = null`？请注意，它还会从代码中删除所有注释！它是如何调整的？这个问题是我的[Go:quoted string in templates](https://stackoverflow.com/questions/14150985/go-quoted-string-in-templates)的延续。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T00:46:16.003

该`html/template`软件包专门设计用于转义值。在您的情况下，您尝试传递 JavaScript 代码，而不是简单的值。您可以通过将 的类型更改为 的类型来完成此`UserEmail`操作`template.JS`。此类型包装 a`string`并表示此值是有效的 JavaScript，并且在 JavaScript 上下文中使用时应直接替换（不带引号）。

这个版本的代码正是这样做的：[http ://play.golang.org/p/aNGnFMyY1O](http://play.golang.org/p/aNGnFMyY1O)

# mysql - 如果记录中的两列相等，则返回“true”？

> ID：14226418
> 
> 赞同：1
> 
> 时间：2013-01-09T00:24:09.687
> 
> 标签：mysql, sql, select

如果各列彼此相等并返回真或假，我正在寻找一种可能性来检查 sql 语句：

例如：4列（a，b，c，d），我想检查a是否喜欢b和c喜欢d，如果为真则返回真（或1）...

这可以在mysql中做到这一点吗？我实际上是用 php 分两步解决这个问题，但这很糟糕..

谢谢你的建议

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T00:27:29.800

在 MySQL 中

```
select a = b AND c = d as is_check_true
from your_table 
```

`1`如果为真则返回，`0`否则返回。

要使其与其他数据库引擎一起使用，您可以使用

```
select case when a = b AND c = d 
            then 1
            else 0
       end as is_check_true
from your_table 
```

# actionscript-3 - AS3 FileReference 下载在 IE/FF 中不起作用（在 Chrome 中运行良好）

> ID：14226421
> 
> 赞同：0
> 
> 时间：2013-01-09T00:24:20.007
> 
> 标签：actionscript-3, flash, filereference

我在后端使用 Java 生成一个 Excel 文件，它似乎在 Chrome 中工作得很好，但无论出于何种原因，它在 FF/IE 中都没有。我在此站点列出的每个浏览器中都有最新的 Flash：http: [//helpx.adobe.com/flash-player/kb/find-version-flash-player.html](http://helpx.adobe.com/flash-player/kb/find-version-flash-player.html)

我正在将 XML 发送到服务器，它正在生成 Excel 并将其发送到 Flash。我通过执行以下操作来执行导出：

```
private var _fileRef:FileReference;

private function exportReport(e:MouseEvent):void
{       
    _fileRef = new FileReference();
    _fileRef.addEventListener(Event.COMPLETE, excelExportCompleteHandler);
    _fileRef.download(new URLRequest("exportReport"), "report.xlsx");

    function excelExportCompleteHandler(e:Event):void {
        trace('complete');
    }
} 
```

我尝试了所有可能的错误和处理程序，但没有任何失败，所以我在完整的处理程序中放置了一个断点，并注意到有一个 I/O 错误，只是它没有发生在 IOErrorEvent.IO_ERROR 处理程序上。

左边是下载成功，右边是失败。

![左侧成功，右侧失败](../Images/73f96e8b9fe3023d228f31152452a68e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:56:51.100

我在 Adob​​e 的论坛上提出了这个问题，并提出了自己的解决方法。这并不理想，但对于其他感兴趣的人来说：[http ://forums.adobe.com/message/4983605](http://forums.adobe.com/message/4983605)

# python - 多处理模块的map方法中的赋值（Python）

> ID：14226423
> 
> 赞同：2
> 
> 时间：2013-01-09T00:24:58.047
> 
> 标签：python, map, multiprocessing

我的问题是关于 Python 的多处理模块。以最简单的形式，我的问题是以下代码的奇怪行为：

```
import numpy as np
from multiprocessing import Pool

x = np.random.random(100)
y = np.random.random(100)
y2 = y[:]

def I(i):
    y[i] = x[i]

pool = Pool()
pool.map(I,range(100)) 
```

执行后，我希望y = x。然而，我们得到 y = y2。（作业不工作。）为什么会发生这种情况？计算 f(x[i]) 并将其分配给 y[i] 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:58:35.797

`Pool`如果您考虑在用于完成您的工作的进程之间同步的内容，那么您所看到的行为并不令人惊讶。只有函数的参数和返回值在您当前的代码中同步，所以在调用过程中保持它们的原始值`I`是有意义的。`x``y`

我怀疑您当前的代码是一个最小的测试用例，这很麻烦，因为没有真正有意义的实现将一个数组复制到另一个使用`Pool.map`. 这是一个简单的解决方案，但我不确定它是否适用于您的实际任务：

```
import numpy as np
from multiprocessing import Pool

def I(v):
    return v

if __name__ == "__main__":  # this boilerplate is required on on Windows
    x = np.random.random(100)
    y = np.random.random(100)

    pool = Pool()
    y[:] = pool.map(I, x)

    print(x == y) # [True, True, True, ...] 
```

这会将 through 的每个值传递`x`给另一个进程（不对其进行任何操作），并将结果值传回并分配给`y`（pool.map 返回一个列表）。这很愚蠢。

稍微复杂一点的方法可能会复制`x`到工作进程，使用构造函数中的`initializer`and`initargs`参数`Pool`。这是一个这样做的例子：

```
import numpy as np
from multiprocessing import Pool

def I(index):
    return x[index]

def setup(value):
    global x
    x = value

if __name__ == "__main__":
    x = np.random.random(100)
    y = np.random.random(100)

    pool = Pool(initializer=setup, initargs=(x,))
    y[:] = pool.map(I, range(100))

    print(x == y) # [True, True, True, ...] 
```

请注意，这`x`只是一种复制方式。如果`I`要修改其值，则这些更改将不会在进程之间同步。

如果您的任务确实需要同步访问源数组和目标数组，您可以尝试`multiprocessing.Array`. 我没有任何直接的经验，但应该可以用它`y`自己的同步版本替换。不幸的是，我怀疑同步会减慢你的程序，所以除非你真的需要，否则不要这样做！

# magento - 在 Solr (Magento Enterprise) 中将默认运算符从 OR 更改为 AND

> ID：14226424
> 
> 赞同：14
> 
> 时间：2013-01-09T00:25:10.550
> 
> 标签：magento, solr

我正在将 Solr 与 Magento Enterprise 一起使用。我正在尝试将默认搜索运算符从更改为默认情况下`OR`使`AND`搜索更具体。

我尝试的第一件事是更改`defaultOperator`其中`schema.xml`没有达到预期效果（它开始`AND`在字段之间使用，而不是关键字）。

```
<solrQueryParser defaultOperator="AND"/> 
```

然后我阅读了[LocalParams](http://wiki.apache.org/solr/LocalParams)并尝试将其添加到中的几个`requestHandler`部分`solrconfig.xml`（我只是在猜测它应该去哪里，我找不到任何有用的文档）。

```
<requestHandler name="magento_en" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="q.op">AND</str> 
```

我还在代码`app/core/core/Enterprise/Search`（`{!q.op=AND}`

我想这是一个简单的配置更改，有人能指出我正确的方向吗？

**编辑：**为了澄清，搜索“红色夹克”（不带引号）应该返回“红色和夹克”的结果。我只对实际上是红色夹克的产品感兴趣，而不是红色鞋子和/或蓝色夹克。手动搜索“红色 AND 夹克”会返回我想要的结果。

当前，搜索执行以下查询：

```
INFO: [] webapp=/solr path=/select params={start=0&q=articles_title:red+jacket*+articles_summary:red+jacket*+articles_text:red+jacket*+cms_title:red+jacket*+cms_content:red+jacket*&json.nl=map&wt=json&fq=store_id:1+store_id:0&version=1.2&rows=4} hits=7 status=0 QTime=1 
09/01/2013 10:46:21 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={spellcheck=true&sort=attr_sort_score_en+desc&spellcheck.extendedResults=true&json.nl=map&wt=json&spellcheck.collate=true&version=1.2&rows=1&fl=id&start=0&q=(Red+jacket)&spellcheck.dictionary=magento_spell_en&q.op=AND&spellcheck.count=2&qt=magento_en&fq=(visibility:3+OR+visibility:4)+AND+store_id:1} hits=645 status=0 QTime=5 
09/01/2013 10:46:21 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={facet=on&sort=score+desc&json.nl=map&wt=json&version=1.2&rows=24&fl=id&start=0&facet.query=category_ids:8&facet.query=category_ids:46&facet.query=category_ids:88&facet.query=category_ids:126&facet.query=category_ids:168&facet.query=category_ids:180&facet.query=category_ids:207&facet.query=category_ids:224&facet.query=category_ids:242&facet.query=category_ids:276&q=(Red+jacket)&q.op=AND&facet.field=attr_nav_multi_colourway&qt=magento_en&fq=(visibility:3+OR+visibility:4)+AND+store_id:1} hits=645 status=0 QTime=5 
09/01/2013 10:46:22 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={facet=on&sort=attr_sort_score_en+desc&json.nl=map&wt=json&rows=100&version=1.2&start=0&facet.query=category_ids:8&facet.query=category_ids:46&facet.query=category_ids:88&facet.query=category_ids:126&facet.query=category_ids:168&facet.query=category_ids:180&facet.query=category_ids:207&facet.query=category_ids:224&facet.query=category_ids:242&facet.query=category_ids:276&q=(Red+jacket)&q.op=AND&facet.field=attr_nav_multi_colourway&qt=magento_en&fq=(visibility:3+OR+visibility:4)+AND+store_id:1} hits=645 status=0 QTime=6 
09/01/2013 10:46:22 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={facet=on&sort=attr_sort_score_en+desc&json.nl=map&wt=json&rows=100&version=1.2&start=0&facet.query=category_ids:8&facet.query=category_ids:46&facet.query=category_ids:88&facet.query=category_ids:126&facet.query=category_ids:168&facet.query=category_ids:180&facet.query=category_ids:207&facet.query=category_ids:224&facet.query=category_ids:242&facet.query=category_ids:276&q=(Red+jacket)&q.op=AND&facet.field=attr_nav_multi_colourway&qt=magento_en&fq=(visibility:3+OR+visibility:4)+AND+store_id:1} hits=645 status=0 QTime=3 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-02T21:05:28.107

感谢 Macilias 在[dismax 解析器插件](http://wiki.apache.org/solr/DisMaxQParserPlugin)上的链接，我找到了一种通过 solrconfig.xml 中的设置完成此操作的方法。在这个文件中，有许多不同语言的 requestHandler 节点。我修改了英文版，因为我们的商店是英文的。默认情况下，xml 如下所示：

```
<requestHandler name="magento_en" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="qf">fulltext_1_en^1.0 fulltext_2_en^2.0 fulltext_3_en^3.0 fulltext_4_en^4.0 fulltext_5_en^5.0</str>
        <str name="pf">fulltext_1_en^1.0 fulltext_2_en^2.0 fulltext_3_en^3.0 fulltext_4_en^4.0 fulltext_5_en^5.0</str>
        <int name="ps">1</int>
        <str name="mm">1</str>
        <str name="defType">dismax</str>
        <str name="echoParams">explicit</str>
        <str name="spellcheck.onlyMorePopular">false</str>
        <str name="spellcheck.extendedResults">false</str>
        <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
        <str>spellcheck</str>
    </arr>
</requestHandler> 
```

这里的重要参数是“mm”，它代表[最小“应该”匹配](http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29)。dismax 解析器使用它而不是默认运算符来确定应如何处理多个搜索词。值 1 表示查询中只有一个术语必须匹配（与 OR 的行为相同）。值 100% 表示所有术语必须匹配（与 AND 行为相同）。也可以使用更复杂的值。按照上面的链接了解更多信息。更改 solrconfig.xml 文件中的设置后，您需要重新启动 Solr 服务器才能生效。

该视频也是一个很好的 Magento Solr 资源： [http](http://www.youtube.com/watch?v=07uIJSXdqpU) ://www.youtube.com/watch?v=07uIJSXdqpU 他们在 24 分钟左右谈论最小匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-23T00:53:52.033

我最终使用 q.op 将运算符更改为 AND 而不是 OR。例如：

```
 ?q=text:small cars&q.op=AND 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T01:01:47.663

尝试以下（未经测试）：

```
q={!q.op=AND df=articles_title}red jacket&fq=articles_summary:(red AND jacket)&fq=articles_text:(red AND jacket) 
```

`fq`其余字段以与参数类似的方式使用。

以上将返回所有提到的字段包含术语 red 和夹克的所有记录。但是，如果您需要返回至少一个字段包含红色 AND 夹克的记录，那么我建议您使用复制字段将所有这些字段映射到单个字段，然后针对复制字段类型进行搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:21:12.423

为了回答我自己的问题，我最终重写了`Enterprise_Search_Model_Adapter_HttpStream`模型以将`AND`s 注入到搜索查询中。我`prepareSearchConditions()`从以下位置添加了方法`Enterprise_Search_Model_Adapter_Solr_Abstract`：

```
<?php

class Foo_Search_Model_Adapter_HttpStream extends Enterprise_Search_Model_Adapter_HttpStream
{
    protected function prepareSearchConditions($query)
    {
        $query = str_replace(' ', ' AND ', str_replace(' AND ', ' ', $query));

        return parent::prepareSearchConditions($query);
    }
} 
```

显然，它与其他运营商的合作并不好，但就我而言，它已经*足够了*™ （至少目前如此）。不过，我仍然希望找到更好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T04:15:54.153

```
My question is not so much about the syntax but where to configure this so it applies to all searches. 
```

要回答您的问题，我很确定我们需要在 schema.xml 而不是在 solrconfig.xml 中为 solrQueryParser 指定默认运算符。正如你所提到的，它被给出为，

```
< solrQueryParser defaultOperator="AND"/> 
```

您没有得到预期结果的原因可能是因为以下原因：

如果您的搜索网址类似于，

```
q=articles_summary:red+jacket 
```

然后发生的事情是，**“red”**是针对字段**“articles_summary”**搜索的，但**“jacket”**是针对您的**默认搜索字段**（比如“text”）进行搜索的，如果我是对的，它将是一个包含所有可搜索字段副本的**副本**字段。因此，您将在“articles_summary”中匹配“red”，在“text”中匹配“jacket”。

为了达到您的期望，我建议您在将默认操作设置为 AND 之后使用类似以下 URL 的内容，就像您已经做的那样：

```
q=articles_summary:red+articles_summary:jacket 
```

如果您有多个要搜索的字段，则可能必须这样做：

```
q=articles_summary:red+articles_summary:jacket+articles_title:red+articles_title:jacket 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-18T14:01:35.253

在 solr 中，您应该使用 dismax（或 edismax）解析器插件。在这里，您可以将最小值应匹配为 100%。[您可以在这里找到更多信息](http://wiki.apache.org/solr/DisMaxQParserPlugin)

# linux - 不同的“制造”行为

> ID：14226425
> 
> 赞同：0
> 
> 时间：2013-01-09T00:25:15.783
> 
> 标签：linux, makefile, kernel-module

我正在尝试为内核模块编写一个 makefile，但无法让它工作。运行以下有这个输出

```
$ make
make: Nothing to be done for 'all'. 
```

但是直接在终端上运行 make 命令会导致

```
$ make -C /lib/modules/$(uname -r)/build M=$(pwd) modules
make: Entering directory '/usr/src/linux-headers-3.5.0-17-generic'
   CC [M] <blah>
   Building modules, stage 2
   <blah>
make: Leaving directory... 
```

我的 Makefile 的内容是（源文件是 main.c）

```
obj-m += main.o
all:
    make -C /lib/modules/$(shell uname -r)/build M=$(shell pwd) modules 
```

在尝试使用 makefile 之前，我确实删除了 *.o 和 *.ko。更改`all`为`default`也无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:51:32.320

The most likely issue is that you didn't use a *real* tab character to begin the line reading `make -C ...`, but instead used multiple spaces. `make` requires that commands all begin with a tab character.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:54:49.193

# android - Android PowerManager WakeLock – 已弃用

> ID：14226426
> 
> 赞同：20
> 
> 时间：2013-01-09T00:25:31.670
> 
> 标签：android

Android SDK 告诉我，`PowerManager.SCREEN_DIM_WAKE_LOCK`从 API 级别 17 起，类似的常量已被弃用。它还表示，`FLAG_KEEP_SCREEN_ON`可以在大多数情况下使用。

但如果不是这样呢？特别是，我希望能够使屏幕变暗但不完全关闭。还有什么其他“更好”的选择——或者根本就没有？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T07:06:14.177

目前没有更好的选择来实际**使用已弃用的 WakeLock**。

实际上，您还有另一种选择（但不是更好）。您可以将`FLAG_KEEP_SCREEN_ON`与从活动内部手动更改系统亮度结合使用（[示例](http://www.tutorialforandroid.com/2009/01/changing-screen-brightness.html)）。

> 但如果不是这样呢？

我遇到了类似的情况，我需要从 a**不断打开**`Service`屏幕（因此 Activity.getWindow() 不可用）。在这种情况下，我使用已弃用的 WakeLock，直到 Android 提出新的 API。

# javascript - AngularJs 不绑定 ng-checked 和 ng-model

> ID：14226439
> 
> 赞同：2
> 
> 时间：2013-01-09T00:27:46.497
> 
> 标签：javascript, angularjs

我用谷歌搜索了这个，发现人们有这个问题，但我没有找到任何解决方案。

所以这是我的代码

```
 %section(ng-controller="UserCtrl" ng-init="user_genres=#{preferred_genres}")
    %ul
         %li(ng:repeat="genre in preferred_genres")
            %input(type = "checkbox" ng:model="preferred_genres[genre]" id="genre-{{$index + 1}}" ng-checked="user_genres['{{genre}}']")
            %label{:for => "genre-{{$index + 1}}"} {{genre}} 

```

例如，如果某些复选框由于 ng-checked 表达式为真并且在页面呈现上而被选中。而且我实际上并没有再次单击复选框。当涉及到控制器时，范围似乎忽略了由于 ng-checked 而被检查的那个。如何让它们很好地同步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:25:45.617

我不确定我理解真正的问题是什么，但看看这个[小提琴](http://jsfiddle.net/mrajcok/bQ5du/)是否是你想要的。（我从你的[另](https://stackoverflow.com/questions/14225855/how-to-pre-select-checkbox-in-angularjs-with-ng-checked)一篇文章中获得了一个 Preferred_genres 列表。）

控制器范围属性`preferred_genres`正在根据复选框状态进行更新：

```
<li ng-repeat="(genre, checked) in preferred_genres">
  <input type="checkbox" ng-model="preferred_genres[genre]"
   id="genre-{{$index + 1}}"> 
```

正如您在另一篇文章中提到的@dnc253，您可能不需要 ng-checked，因为每个项目都有自己的 ng-model。

# iphone - 当用户平移地图时，iOS 6 中的我的地图注释不会保持旋转

> ID：14226441
> 
> 赞同：0
> 
> 时间：2013-01-09T00:27:48.473
> 
> 标签：iphone, ios6, annotations, rotatetransform

在回答类似问题时，用户说要执行以下操作：

解决方法是在 viewForAnnotation 方法中执行以下操作：

```
// iOS6 BUG WORKAROUND !!!!!!!
if (is6orMore) {
     [annotationView setTransform:CGAffineTransformMakeRotation(.001)]; //any small positive rotation
} 
```

我试过把这段代码放在各处，当地图被平移时，我的注释仍然会旋转。这是我的代码。

每当地图旋转时，我都会调用此方法

```
-(void)rotateAnnotations {

    for (id<MKAnnotation> annotation in self.mapView.annotations)
    {
        MKAnnotationView* annotationView = [self.mapView viewForAnnotation:annotation];

        [annotationView setTransform:CGAffineTransformMakeRotation(- self.mapRotationRadians)];
        if ([annotation isKindOfClass:[FlagAnnotation class]]) {
            [annotationView setSelected:YES animated:NO];
        }
         [annotationView setNeedsDisplay];  //ios6
    }
} 
```

最初的答案说是在 viewForAnnotation 方法中解决代码问题。这是那个代码。

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

   if ([annotation isKindOfClass:[FlagAnnotation class]]) {

        // once flag is set allow for doubleTap zoom
        [self.mapView addGestureRecognizer:doubleTap];

        static NSString *AnnotationViewID = @"annotationViewID";
        MKAnnotationView *annotationView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

        if (!annotationView)
        {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID];
            annotationView.image = [UIImage imageNamed:@"FlagRed"];
            annotationView.draggable = YES;
            [self updateFlagCoordinate:(MKPlacemark *)annotationView.annotation];
            return annotationView;

        }
        else {
            [self updateFlagCoordinate:(MKPlacemark *)annotationView.annotation];
            annotationView.annotation = annotation;
        }

        // iOS6 BUG WORKAROUND !!!!!!!
        if (osVersion() >= 6) {
            [annotationView setTransform:CGAffineTransformMakeRotation(.001)];
        }

        return annotationView;
    }
    return nil;
} 
```

我会很感激你的帮助。

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:59:55.673

在玩了更多代码之后，我发现我确实在 viewForAnnotation 的错误位置修复了错误。我在这里有代码：

```
if (!annotationView)
    {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID];
        annotationView.image = [UIImage imageNamed:@"FlagRed"];
        annotationView.draggable = YES;
        [self updateFlagCoordinate:(MKPlacemark *)annotationView.annotation];
        return annotationView;

    }
    else {
        [self updateFlagCoordinate:(MKPlacemark *)annotationView.annotation];
        annotationView.annotation = annotation;
    }

    // iOS6 BUG WORKAROUND !!!!!!!
    if (osVersion() >= 6) {
        [annotationView setTransform:CGAffineTransformMakeRotation(.001)];
    }

    return annotationView; 
```

我需要把它放在这里：

```
if (!annotationView)
    {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID];
        annotationView.image = [UIImage imageNamed:@"FlagRed"];
        annotationView.draggable = YES;
        [self updateFlagCoordinate:(MKPlacemark *)annotationView.annotation];

        // iOS6 BUG WORKAROUND !!!!!!!
        if (osVersion() >= 6) {
            [annotationView setTransform:CGAffineTransformMakeRotation(.001)];
        }
        return annotationView;
    } 
```

希望这可以帮助有同样问题的人。

# agile - 燃尽图不减少

> ID：14226449
> 
> 赞同：-1
> 
> 时间：2013-01-09T00:28:32.327
> 
> 标签：agile, sprint, burndowncharts

我正在修改软件工程考试，其中一个问题让我想知道。它显示了一个燃尽图，其中团队在 10 天内没有在用户故事上取得任何进展。问题是“概述并证明 ScrumMaster 此时可能考虑采取的任何行动”。

我想过采取激烈的行动，比如停止冲刺。然后是分配结对编程来帮助用户，并考虑更多地分解用户故事。有人有其他建议吗？（这个问题在过去的论文中值四分）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:52:31.657

没有足够的信息来给出完整的答案，但根据我的经验，作为 Scrum Master，我要做的第一件事就是查看燃尽图，该图表绘制了随时间变化的任务时间（而不是随时间变化的故事点）。

正常烧毁小时数但故事点数保持不变的情况很常见。通常被称为“迷你瀑布”，因为团队要在 Sprint 结束之前进行测试，因此直到 Sprint 结束之前都没有“完成”任何故事。

如果我对场景的猜测是正确的，那么作为 Scrum Master，我会花时间在 Sprint Retrospective 上讨论团队为何以这种方式工作，以期让他们集中精力尽快“完成”故事可能并减少在制品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:16:23.763

我个人讨厌这样的抽象问题——因为你实际上没有足够的信息来给出一个“好的”答案。冲刺多长时间？团队一直在做什么？缺乏进展的根本原因是什么？如果你是团队的 Scrum Master，这些都是你已经知道的事情。你*永远不*应该只是在十天后查看燃尽图，然后弄清楚该做什么。

例如：

*   也许团队的任务是在项目范围之外执行“紧急”任务

*   也许有部分完成但由于瓶颈而未完成的故事（例如，故事没有完成，因为没有可用的测试人员，或设计师，或用于最终签字的 PO）

*   也许故事太大并且花费了太长时间 - 或者故事变得异常复杂并且暴露了系统的一个区域，该区域是一个大泥球并且难以调整

真正的答案将取决于实际的工作环境。如果我被迫给出答案，那将是这样的：

1.  写一个提醒，找出我犯错的原因，直到问题发生十天后才发现有一个问题需要解决。

2.  写一个提醒，在 sprint 回顾中提出这个话题——因为显然有不好的事情正在发生

3.  找出瓶颈/问题是什么，并尝试解决它。如果我们有一个非常擅长自主解决问题的团队，我可能会建议切换到每个人都集中在一个故事上的工作模式，这样我们至少可以完成一些事情。

...但真正的答案是“这取决于”;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:48:39.150

为什么会发生这种情况的根本原因分析？是技能差距吗？关于该主题的知识，作为一个团队，他们是否知道如何处理这些用户故事，他们是否在 sprint 计划会议期间将用户故事分解为任务，PO 在整个过程中的协作是否足够参与？

需要一个良好的冲刺计划，以及随后的产品待办事项梳理会议，如果这些已经发生，他们可以避免这些问题。

此外，如果团队对技术环境/领域等不熟悉，他们可以采用各种技术，也许是故事的尖峰或跟踪子弹让他们达到舒适水平？

最后让他们作为一个团队失败，并在 sprint 回顾中重新振作起来。

这就是 scrum master 可以发挥作用的地方，一个好的 scrum master 会记录每日的障碍日志并积极主动地不允许这种情况发生。

这是我的两分钱。希望对你的考试有帮助！

# tfs - MSBuild 因两个包而失败

> ID：14226451
> 
> 赞同：9
> 
> 时间：2013-01-09T00:28:35.420
> 
> 标签：tfs, msbuild, msdeploy, publish-profiles

好的，这是一个很棒的错误。我有一个在 2012 TFS 服务器上执行 MSBuild 的 2012 解决方案。传递给构建过程模板中“MSBuild Arguments”字段的参数如下：

> /p:DeployOnBuild=true /p:PublishProfile=ProfileForProjectA /p:PublishProfile=ProfileForProjectB /p:VisualStudioVersion=11.0

我从 TFS 得到的错误是....

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets (4435)：PublishProfile 的值设置为 'ProfileForProjectA'，预计会在 ' C:\Builds\1\Solution\Solution\Sources\Solution\ProjectB\Properties\PublishProfiles\ProfileForProjectA.pubxml' 但找不到。

换句话说，构建服务器似乎希望每个发布配置文件 (*.pubxml) 位于每个 PublishProfiles 文件夹中。两个项目的发布方法都是“文件系统”。

为我解决它的唯一方法是将 ProfileForProjectA 添加到 ProjectB 的 PublishProfiles 文件夹中，反之亦然，但这似乎不是一个非常优雅的解决方案。任何人都可以重现这种行为吗？有没有人有更优雅的修复？我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T09:14:04.333

当您通过命令行传递属性时，它们是全局 MSBuild 属性。因此，它们被传递给 .sln 文件中的每个项目。Web 项目是唯一响应这些特定属性的项目。

在您的场景中，如果您有两个项目要在 .sln 文件中构建+发布，则需要在每个 Web 项目中创建一个具有相同名称的配置文件，例如“MyProfile”。它们不需要包含相同的信息，它们都可以有自己独特的设置集。他们只需要共享一个名字。

然后当你建立。

```
msbuild.exe mysolution.sln /p:DeployOnBuild=true /p:PublishProfile=MyProfile /p:VisualStudioVersion=11.0 
```

构建每个 Web 项目时，将调用该项目中 MyProfile 的发布过程。

如果您想为 PublishProfile 指定不同的值，则需要创建 MSBuild 脚本而不是构建 .sln 文件。有几种不同的方法可以解决它，但它们都涉及一些 MSBuild。

## 免责声明

**不要将此技术用于实时服务器......** 但如果您在最终发布之前发布到中间位置，那就太好了。

如果您在解决方案中构建+发布超过 1 个项目，**您可能会在另一个项目甚至没有构建时发布一个项目**。这是因为发布过程实际上是构建过程的扩展。这是一个例子。

您在解决方案中有 ProjectA 和 ProjectB，当您使用上面的属性进行构建时，将调用 ProjectA 并将其构建和发布。然后它将转到将构建和发布的 ProjectB。ProjectB 的构建可能会失败，并且 ProjectA 可能已经发布。

# android - Google Maps API v2：如何使标记可点击？

> ID：14226453
> 
> 赞同：140
> 
> 时间：2013-01-09T00:28:38.127
> 
> 标签：android, google-maps, google-maps-android-api-2

如何使 Android Google Maps API v2 中的标记变为可点击状态，以便它们显示带有选项的菜单或开始新的活动？我相信我目前在我的应用程序中使用“newb”方法制作了标记。我没有为它们分配名称或方法，以便能够将其与所需的其余代码链接起来。

```
googleMap.addMarker(new MarkerOptions()
        .position(latLng)
        .title("My Spot")
        .snippet("This is my spot!")
        .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE))); 
```

如果您回答此问题，请提供一个标记示例代码，该示例代码使用唯一名称引入，然后设置为可点击以打开新活动。

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2013-01-09T00:56:23.560

Google Android Maps Api v2 中的所有标记都是可点击的。您无需为标记设置任何其他属性。您需要做的 - 将标记点击回调注册到您的 googleMap 并在回调中处理点击：

```
public class MarkerDemoActivity extends android.support.v4.app.FragmentActivity
    implements OnMarkerClickListener
{
    private Marker myMarker;    

    private void setUpMap()
    {
        .......
        googleMap.setOnMarkerClickListener(this);

        myMarker = googleMap.addMarker(new MarkerOptions()
                    .position(latLng)
                    .title("My Spot")
                    .snippet("This is my spot!")
                    .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
        ......
    }

    @Override
    public boolean onMarkerClick(final Marker marker) {

        if (marker.equals(myMarker)) 
        {
            //handle click here
        }
    }
} 
```

[这是谷歌关于标记自定义](https://developers.google.com/maps/documentation/android-sdk/marker)的一个很好的指南

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-12-04T19:18:30.620

`setTag(position)`在向地图添加标记时。

```
Marker marker =  map.addMarker(new MarkerOptions()
                .position(new LatLng(latitude, longitude)));
marker.setTag(position); 
```

`getTag()``setOnMarkerClickListener`听者_

```
map.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
                @Override
                public boolean onMarkerClick(Marker marker) {
                    int position = (int)(marker.getTag());
                   //Using position get Value from arraylist 
                    return false;
                }
            }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-12T04:33:42.313

避免使用Activity实现OnMarkerClickListener，使用本地的OnMarkerClickListener

```
// Not a good idea
class MapActivity extends Activity implements OnMarkerClickListener {
} 
```

您将需要一张地图来查找链接到标记的原始数据模型

```
private Map<Marker, Map<String, Object>> markers = new HashMap<>(); 
```

您将需要一个数据模型

```
private Map<String, Object> dataModel = new HashMap<>(); 
```

将一些数据放入数据模型中

```
dataModel.put("title", "My Spot");
dataModel.put("snipet", "This is my spot!");
dataModel.put("latitude", 20.0f);
dataModel.put("longitude", 100.0f); 
```

使用数据模型创建新标记时，将两者都添加到制造商地图

```
Marker marker = googleMap.addMarker(markerOptions);
markers.put(marker, dataModel); 
```

对于单击标记事件，请使用本地 OnMarkerClickListener：

```
@Override
public void onMapReady(GoogleMap googleMap) {
    // grab for laters
    this.googleMap = googleMap;

    googleMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
        @Override
        public boolean onMarkerClick(Marker marker) {
            Map dataModel = (Map)markers.get(marker);
            String title = (String)dataModel.get("title");
            markerOnClick(title);

            return false;
        }
    });

    mapView.onResume();

    showMarkers();

    ZoomAsync zoomAsync = new ZoomAsync();
    zoomAsync.execute();
} 
```

为了显示信息窗口，从标记图中检索原始数据模型：

```
@Override
public void onMapReady(GoogleMap googleMap) {
    this.googleMap = googleMap;
    googleMap.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener() {
        @Override
        public void onInfoWindowClick(Marker marker) {
            Map dataModel = (Map)markers.get(marker);
            String title = (String)dataModel.get("title");

            infoWindowOnClick(title);
        }
    }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-20T08:52:00.673

另一种解决方案：您可以通过标题获取标记

```
public class MarkerDemoActivity extends android.support.v4.app.FragmentActivity implements OnMarkerClickListener
{
      private Marker myMarker;    

      private void setUpMap()
      {
      .......
      googleMap.setOnMarkerClickListener(this);

      myMarker = googleMap.addMarker(new MarkerOptions()
                  .position(latLng)
                  .title("My Spot")
                  .snippet("This is my spot!")
                  .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
      ......
      }

  @Override
  public boolean onMarkerClick(final Marker marker) 
  {

     String name= marker.getTitle();

      if (name.equalsIgnoreCase("My Spot")) 
      {
          //write your code here
      }
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-18T13:51:51.257

这是我的带有 4 个可点击标记的地图活动的完整代码。单击标记会显示信息窗口，单击信息窗口后，您将进入另一个活动：英语、德语、西班牙语或意大利语。如果你想在 OnInfoWindowClickListener 的情况下使用 OnMarkerClickListener，你只需要交换这一行：

```
mMap.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener() 
```

对此：

```
mMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() 
```

这一行：

```
public void onInfoWindowClick(Marker arg0) 
```

对此：

```
public boolean onMarkerClick(Marker arg0) 
```

并在方法“onMarkerClick”结束时：

```
return true; 
```

我认为这可能对某人有帮助；）

```
package pl.pollub.translator;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.widget.Toast;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.OnMapReadyCallback;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class MapsActivity extends FragmentActivity implements OnMapReadyCallback {

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);

        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
        Toast.makeText(this, "Choose a language.", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;
        mMap.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener()
        {

            @Override
            public void onInfoWindowClick(Marker arg0) {
                if(arg0 != null && arg0.getTitle().equals("English")){
                Intent intent1 = new Intent(MapsActivity.this, English.class);
                startActivity(intent1);}

                if(arg0 != null && arg0.getTitle().equals("German")){
                Intent intent2 = new Intent(MapsActivity.this, German.class);
                startActivity(intent2);} 

                if(arg0 != null && arg0.getTitle().equals("Italian")){
                Intent intent3 = new Intent(MapsActivity.this, Italian.class);
                startActivity(intent3);}

                if(arg0 != null && arg0.getTitle().equals("Spanish")){
                Intent intent4 = new Intent(MapsActivity.this, Spanish.class);
                startActivity(intent4);}
            }
        });
        LatLng greatBritain = new LatLng(51.30, -0.07);
        LatLng germany = new LatLng(52.3107, 13.2430);
        LatLng italy = new LatLng(41.53, 12.29);
        LatLng spain = new LatLng(40.25, -3.41);
        mMap.addMarker(new MarkerOptions()
                .position(greatBritain)
                .title("English")
                .snippet("Click on me:)"));
        mMap.addMarker(new MarkerOptions()
                .position(germany)
                .title("German")
                .snippet("Click on me:)"));
        mMap.addMarker(new MarkerOptions()
                .position(italy)
                .title("Italian")
                .snippet("Click on me:)"));
        mMap.addMarker(new MarkerOptions()
                .position(spain)
                .title("Spanish")
                .snippet("Click on me:)"));
        mMap.moveCamera(CameraUpdateFactory.newLatLng(greatBritain));
        mMap.moveCamera(CameraUpdateFactory.newLatLng(germany));
        mMap.moveCamera(CameraUpdateFactory.newLatLng(italy));
        mMap.moveCamera(CameraUpdateFactory.newLatLng(spain));
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-22T17:35:45.380

```
Step 1
public class TopAttractions extends Fragment implements OnMapReadyCallback, 
GoogleMap.OnMarkerClickListener

Step 2
gMap.setOnMarkerClickListener(this);

Step 3
@Override
public boolean onMarkerClick(Marker marker) {
    if(marker.getTitle().equals("sharm el-shek"))
        Toast.makeText(getActivity().getApplicationContext(), "Hamdy", Toast.LENGTH_SHORT).show();
    return false;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-23T07:47:37.010

下面的 Kotlin 代码可以帮助你

**创建标记**

```
 for (i in arrayList.indices) {
            val marker = googleMap!!.addMarker(
                MarkerOptions().position(
                    LatLng(
                        arrayList[i].location_latitude!!.toDoubleOrNull()!!,
                        arrayList[i].location_latitude!!.toDoubleOrNull()!!
                    )
                ).title(arrayList[i].business_name)
                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_marker))
            )
            marker.tag = i
        } 
```

**标记点击**

```
 googleMap!!.setOnMarkerClickListener { marker ->
            Log.d(TAG, "Clicked on  ${marker.tag}")
            true
        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-24T23:34:29.650

**Kotlin - 关闭标记点击**

我对关闭地图上标记的可点击功能的回答。

我在搜索“ **android map marker close clickable** ”时发现了这个问题

```
map.setOnMarkerClickListener { true } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-20T14:00:59.357

我`mMap.setOnMarkerClickListener(this);`在`onMapReady(GoogleMap googleMap)`方法中添加了一个。因此，每次单击标记时，它都会在 toast 方法中显示文本名称。

```
public class DemoMapActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener,OnMapReadyCallback, GoogleMap.OnMarkerClickListener {

private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_places);
    Toolbar toolbar = findViewById(R.id.toolbar);
    setSupportActionBar(toolbar);
    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
    mapFragment.getMapAsync(this);
}

@Override
public void onMapReady(GoogleMap googleMap) {
    mMap = googleMap;
    double lat=0.34924212701428;
    double lng=32.616554024713;
    String venue = "Capital Shoppers City";
    LatLng location = new LatLng(lat, lng);
    mMap.addMarker(new MarkerOptions().position(location).title(venue)).setTag(0);
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLng(location);
    CameraUpdate zoom = CameraUpdateFactory.zoomTo(16);
    mMap.moveCamera(cameraUpdate);
    mMap.animateCamera(zoom);
    mMap.setOnMarkerClickListener(this);
}

@Override
public boolean onMarkerClick(final Marker marker) {
    // Retrieve the data from the marker.
    Integer clickCount = (Integer) marker.getTag();

    // Check if a click count was set, then display the click count.
    if (clickCount != null) {
        clickCount = clickCount + 1;
        marker.setTag(clickCount);
        Toast.makeText(this,
                       marker.getTitle() +
                       " has been clicked ",
                       Toast.LENGTH_SHORT).show();
    }
    // Return false to indicate that we have not consumed the event and that we wish
    // for the default behavior to occur (which is for the camera to move such that the
    // marker is centered and for the marker's info window to open, if it has one).
    return false;
} 
```

}

您可以查看此链接以获取参考 [标记](https://developers.google.com/maps/documentation/android-sdk/marker)

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2015-06-04T13:00:50.633

**我已经编辑了上面给出的例子......**

```
public class YourActivity extends implements OnMarkerClickListener
{
    ......

    private void setMarker()
    {
        .......
        googleMap.setOnMarkerClickListener(this);

        myMarker = googleMap.addMarker(new MarkerOptions()
                    .position(latLng)
                    .title("My Spot")
                    .snippet("This is my spot!")
                    .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
        ......
    }

    @Override
    public boolean onMarkerClick(Marker marker) {

       Toast.makeText(this,marker.getTitle(),Toast.LENGTH_LONG).show();
    }
} 
```

# android - 带有自定义 CursorAdapter 的 ListFragment

> ID：14226457
> 
> 赞同：0
> 
> 时间：2013-01-09T00:29:16.487
> 
> 标签：android, android-contentprovider, android-listfragment, android-cursoradapter

我正在使用自定义 CursorAdapter 和 ContentProvider 进行 ListFragment。一切都很顺利，直到我希望我的 ListFragment 上有不止一行的部分。

列表片段代码：

```
public class FragList extends ListFragment implements LoaderCallbacks<Cursor>{
private final static String TAG = SubsList.class.getCanonicalName();
private Account account = null;
private Logs log = Logs.getInstance();
private SubscriptionAdapter mAdapter;
private ListView subscriptionListView;

private BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {                                     
        if(null != mAdapter){
            log.info(TAG, "BroadcastReceiver - DataSetChanged");
                mAdapter.notifyDataSetChanged();
        }           
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);                

    Context mContext = getActivity().getApplicationContext();
    registerBroadcastReceiverFilder(mContext);                

    mAdapter = new MyAdapter(mContext, mContext.getContentResolver()
            .query(CProvider.CONTENT_URI, CProvider.PROJECTION, null, null, null), 
            CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);            
    setHasOptionsMenu(true);
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, null, this);        
}

private void registerBroadcastReceiverFilder(Context mContext) {

    IntentFilter filter = new IntentFilter(Configurations.BR_METADATA_DOWNLOAD);
    mContext.registerReceiver(mBroadcastReceiver, filter);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    MenuItem item = menu.add("Refresh");
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch(item.getItemId())
    {
        case 0:
            if(null != account){
                GetData d= new GetData(getActivity(), account);
                d.execute();
                return true;
            }
        default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);          

    switch (resultCode) {
    case Configurations.ACCOUNT_ADDED:
        account = data.getBundleExtra(Configurations.BUNDLE_DIALOG_CHOOSE_ACCOUNT).getParcelable("account");
        log.info(TAG, account.name + " - " + account.type);
        GetData d = new GetData(getActivity(), account);
        d.execute();            
        break;
    case Configurations.ACCOUNT_ADD_CANCELED:
        //TODO: Add handler for refusals
        break;
    default:
        break;
    }
}

public boolean onQueryTextSubmit(String query) {
    // Don't care about this.
    return true;
}

@Override 
public void onListItemClick(ListView l, View v, int position, long id) {
    log.info(TAG, "FragmentComplexList - Item clicked: " + id);
}

public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {       
    return new CursorLoader(getActivity(), CProvider.CONTENT_URI,
            CProvider.PROJECTION, null, null,null);
    }

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {      
    /*log.info(TAG, "onLoadFinished called");
    mAdapter.notifyDataSetChanged();
    mAdapter.swapCursor(cursor);*/

    mAdapter.swapCursor(cursor);

    // The list should now be shown.
    if (isResumed()) {
        setListShown(true);
    } else {
        setListShownNoAnimation(true);
    }
}

public void onLoaderReset(Loader<Cursor> arg0) {
    log.info(TAG, "onLoaderReset called");
    mAdapter.swapCursor(null);
}       
} 
```

光标适配器代码：

```
public class MyAdapter extends CursorAdapter{

public MyAdapter (Context context, Cursor c, int flags) {
    super(context, c, flags);
}

static class ViewHolder {
    public ImageView image;
    public TextView text; 
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater =  (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.row,null,true);

    ViewHolder holder = new ViewHolder();
    holder.text= (TextView) rowView.findViewById(R.id.text);
    holder.image= (ImageView) rowView.findViewById(R.id.image);
    rowView.setTag(holder);

    return rowView;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
   ViewHolder holder = (ViewHolder) view.getTag();

   String text= cursor.getString(cursor.getColumnIndex(CProvider.TEXT_FIELD));
   holder.text.setText(text);      
}
} 
```

行.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"   
android:orientation="horizontal"
android:padding="5dip" >

<LinearLayout android:id="@+id/llimage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="3dip"
    android:layout_alignParentLeft="true"
    android:layout_marginRight="5dip">

    <ImageView
        android:id="@+id/image"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:src="@drawable/placeholder" 
        android:contentDescription="TODO"/>

</LinearLayout>

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/llimage"
    android:layout_toRightOf="@+id/llimage"
    android:text="@string/text_placeholder"
    android:textColor="#040404"
    android:typeface="sans"
    android:textSize="15dip"
    android:textStyle="bold"/>
 </RelativeLayout> 
```

主.xml：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="vertical">

<FrameLayout 
    android:layout_height="match_parent" 
    android:layout_width="match_parent" 
    android:id="@+id/flList">
</FrameLayout> 

</LinearLayout>

</ScrollView> 
```

我应该有或多或少的 20 行，我只得到一个。这是我第一次使用这种组合，所以我有点迷路了。

感谢您的帮助，Dporem

# objective-c - 初始化方法：这两者有什么区别？

> ID：14226460
> 
> 赞同：0
> 
> 时间：2013-01-09T00:29:27.540
> 
> 标签：objective-c, initialization, init

我目前正在阅读 Apple 的“使用 Objective C 编程”手册，它显示了这两个 init 方法。它们之间有什么区别，什么时候适合使用？

```
 - (id)initWithFirstName:(NSString *)aFirstName lastName:(NSString *)aLastName dateOfBirth: (NSDate *)aDateOfBirth {

    self = [super init];

    if (self) {
        _firstName = aFirstName;
        _lastName = aLastName;
        _dateOfBirth = aDateOfBirth;
    }

    return self;

} 
```

对比

```
- (id)initWithFirstName:(NSString *)aFirstName lastName:(NSString *)aLastName {
    return [self initWithFirstName:aFirstName lastName:aLastName dateOfBirth:nil];
} 
```

手册可以在这里找到[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW15](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW15)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:32:39.910

第二个是循环的，将导致无限递归。

**编辑：**

对于更新后的问题，初始化程序的第二个版本只是为了方便，因为您不再需要指定第三个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:37:52.600

第一个是正常的自定义初始化，它正确设置您的参数并初始化您的类。

第二个调用自己，因此它将在无限递归中一次又一次地调用自己，最终导致堆栈溢出——应用程序将本质上冻结并崩溃。

苹果文档不建议......你可能误读了它

* * *

苹果文档仍然没有建议，但它很接近：

```
- (id)initWithFirstName:(NSString *)aFirstName lastName:(NSString *)aLastName {
return [self initWithFirstName:aFirstName lastName:aLastName dateOfBirth:nil]; // Not the same method, passes dateOfBirth parameter.
} 
```

被调用的方法**可能**如下所示：

```
- (id)initWithFirstName:(NSString *)aFirstName lastName:(NSString *)aLastName dateOfBirth: (NSDate *)dateOfBirth {

   if (self = [super init]) {

         _firstName = aFirstName;
         _lastName = aLastName
         _dateOfBirth = dateOfBirth;
   }

        return self;

} 
```

它调用另一个类似的方法，但传递了一个`dateOfBirth`参数，它不是同一个方法。

* * *

好的，所以区别很简单，如果调用任一方法的类不想`dateOfBirth`从类中传递参数，并且此 Person 实例没有`dateOfBirth`他希望指定的参数，代码编写者可能会觉得它有点 hacky`nil`随便写。所以这是一个方便的方法，你不传递 a `dateOfBirth`，只传递名字和姓氏，它调用另一个方法简单地`nil`for `dateOfBirth`。它只是让代码编写者在编写时不会感到害怕的一种方式`nil`。

所以一切都在这两种方法中被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:42:30.790

正如@ThomasW 指出的那样，第二种情况是错误的。在第一种情况下，您调用`[super init]`让您的*基*类派生自初始化*它们*在您正在实例化的对象中的份额。

这是有效的，因为因为`super`指示`init`消息应该由知道该做什么的基类接收。请注意，它不知道如何记住您的名字或姓氏。

但是，在第二种情况下，`init`消息被发送到`self`，这就是`init`您呼叫的来源。这意味着`init`它将继续调用自身，直到您崩溃。

看起来你假设`aFirstName`并且`aLastName`以某种神奇的方式分配，但你必须教你的对象如何做到这一点，并在这个`init`方法中完全自己实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T01:00:08.977

这是手册中写的：

```
- (id)initWithFirstName:(NSString *)aFirstName lastName:(NSString *)aLastName {
    return [self initWithFirstName:aFirstName lastName:aLastName dateOfBirth:nil];
} 
```

所以它不会导致无限循环，因为被调用的方法是另一个，它不是递归的。

**编辑**

第二种方法是在您不想使用 dateOfBirth 初始化对象时使用。实际上，如果您使用 initWithFirstName:lastName: ，此属性将为 nil。

# perl - 如何在 Perl 中指定“尾部切片”？

> ID：14226464
> 
> 赞同：6
> 
> 时间：2013-01-09T00:29:39.940
> 
> 标签：perl

如果我只想提取制表符分隔记录的第 4、第 5 和第 7 个元素（例如），我可以执行以下操作：

```
my @f = (split(/\t/, $_, -1))[3, 4, 6]; 
```

但是，如果我想要第 4 个元素和包含从第 7 个元素到数组末尾的所有元素的“尾部切片”怎么办？我不知道如何在一行中做到这一点。我能做的最好的是：

```
my @f = split(/\t/, $_, -1);
@f = @f[3, 6..$#f]; 
```

在两行中执行此操作的唯一原因是我可以`$#f`在第二行中指定，但这需要比任务固有的更大程度的特异性；该任务并不真正*关心*返回的值中有多少元素`split`。能够指定诸如“从第 7 个元素开始的所有可用内容”之类的东西会很好......这就是我所说的“尾部切片”的意思：只指定起点的切片，而结束点是隐含的。

（这种规范`cut`在 Unix 中使用该实用程序时很常见；例如：

```
... | cut -f 4,7- 
```

)

> 是否有一些下标表达式可以直接应用于`(split(...))`子表达式以在一行中产生与上面最后两行代码相同的效果？

编辑：要清楚，我要避免的是`$#ARRAY`建筑。我知道我总是可以做类似的事情

```
my @f = do { my @t = split(/\t/, $_, -1); @t[3, 6..$#t] }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T01:03:59.580

列表切片括号中的表达式必须返回零个或多个索引的列表。因此，您甚至必须在生成列表之前就知道列表中被切片的项目数。所以不，它不能使用列表切片来完成。

访问堆栈上列表的最直接方法是 via `@_`。这确实需要一个子调用，但它确实为您提供了一种将列表留在堆栈上的简单机制。

```
my @f = sub { @_[6..$#_] }->( split(/\t/, $_, -1) ); 
```

请注意，此解决方案不会创建数组并将值复制到该数组中，就像您添加到问题中的代码一样。

# sql - 在不使用 JOIN 的情况下在 HSQLDB 中进行透视

> ID：14226465
> 
> 赞同：2
> 
> 时间：2013-01-09T00:29:40.783
> 
> 标签：sql, pivot, hsqldb

我使用通过 java JDBC 连接到的**HSLQDB (2.2.9) 数据库。**

A 人接种了 1 和 3 疫苗，B 人接种了 2 和 4。使用这个简单的查询：

```
SELECT std.*,vac.Date FROM Students AS std
LEFT JOIN ValuesVaccination AS vac
ON vac.ID_Students = std.ID 
```

我得到一个结果集，如：

```
 ID |  Name    | ID_Vaccination | Date
 1  | PersonA  | 1              | 2011-06-01
 1  | PersonA  | 3              | 2012-03-21
 1  | PersonB  | 2              | 2012-08-11
 2  | PersonB  | 4              | 2012-09-08 
```

我想要得到的是：

```
 ID |  Name    | Vaccination1 | Vaccination2 | Vaccination3 | Vaccination4  
 1  | PersonA  |  2011-06-01  |    NULL      |  2012-03-21  |    NULL
 2  | PersonB  |    NULL      |  2012-08-11  |    NULL      |  2012-09-08 
```

一种方法是：

```
SELECT std.*,
       vac1.Date AS "Vaccination1",
       vac2.Date AS "Vaccination2",
       vac3.Date AS "Vaccination3",
       vac4.Date AS "Vaccination4"
FROM Students AS std
LEFT JOIN ValuesVaccination AS vac1
ON vac1.ID_Students = std.ID AND vac1.ID_Vaccinations = 1
LEFT JOIN ValuesVaccination AS vac2
ON vac2.ID_Students = std.ID AND vac2.ID_Vaccinations = 2
LEFT JOIN ValuesVaccination AS vac3
ON vac3.ID_Students = std.ID AND vac3.ID_Vaccinations = 3
LEFT JOIN ValuesVaccination AS vac4
ON vac4.ID_Students = std.ID AND vac4.ID_Vaccinations = 4 
```

问题是**不同疫苗接种的数量是可变的**。有没有一种体面的方法可以做到这一点，而无需使用循环在 java 字符串中使用 JOIN 构建查询？

我发现**PIVOT**函数是我需要的，但似乎 HSQLDB 不支持它并且搜索 stackoverflow 和谷歌并没有带来有用的信息。

感谢您提供任何信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:52:51.327

`PIVOT` is not standard SQL, it's an extension to syntax supported only by [Microsoft SQL Server 2005](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx) (and later), and [Oracle 11g](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html).

Here's a solution that uses standard SQL and should work in any RDBMS:

```
SELECT s.ID, s.Name, 
    MAX(CASE WHEN ID_Vaccination=1 THEN Date END) AS Vaccination1,
    MAX(CASE WHEN ID_Vaccination=2 THEN Date END) AS Vaccination2,
    MAX(CASE WHEN ID_Vaccination=3 THEN Date END) AS Vaccination3,
    MAX(CASE WHEN ID_Vaccination=4 THEN Date END) AS Vaccination4
FROM Students AS s
LEFT JOIN ValuesVaccination AS v
  ON s.ID = v.ID_Students
GROUP BY s.ID, s.Name; 
```

* * *

Re your comment:

SQL does not allow data values to generate new columns dynamically in the same query. So *any* pivot query requires that you know how many distinct vaccinations you want to show in the output before you prepare the query.

You could run two queries: one to "discover" the set of distinct vaccination values:

```
SELECT DISTINCT ID_Vaccination FROM ValuesVaccination; 
```

Then fetch that back into the application and loop over it, adding column expressions as you go, to build the pivot query.

The only alternative is to fetch *all* the data joined to Students, as in your first query, and post-process it into a pivoted format using application code.

Either way, to produce a dynamic pivot query you have to supplement it with application code, either before you prepare the query or after you fetch the results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:42:20.100

`END)`在比尔的答案之后，只有一个括号太多了。要使用原始问题中的别名和列名在此线程中获得 100% 正确答案：

```
SELECT std.ID, std.Name, 
    MAX(CASE WHEN v.ID_Vaccinations=1 THEN Date END) AS Vaccination1,
    MAX(CASE WHEN v.ID_Vaccinations=2 THEN Date END) AS Vaccination2,
    MAX(CASE WHEN v.ID_Vaccinations=3 THEN Date END) AS Vaccination3,
    MAX(CASE WHEN v.ID_Vaccinations=4 THEN Date END) AS Vaccination4
FROM Students AS std
LEFT JOIN ValuesVaccination AS v
ON std.ID = v.ID_Students
GROUP BY std.ID, std.Name 
```

返回想要的结果。

# c# - Microsoft AdControl for Pub Center 的性能问题

> ID：14226468
> 
> 赞同：0
> 
> 时间：2013-01-09T00:30:01.560
> 
> 标签：c#, xaml, windows-8

每次我尝试使用 AdControl，无论大小，似乎性能始终是一个问题。无论是在 GridView 内部还是外部，它似乎都会使任何滚动“锯齿状”，如果没有它就不那么平滑了。

这对于 UX 来说是不可接受的，尤其是在具有更弱 ARM 处理器的 Surface 上。

为了使页面附近存在的 AdControl 滚动变得平易近人，是否有任何快速修复或黑客攻击？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:36:27.307

像这样的问题不适合 StackOverflow。这些问题应直接向 Microsoft 提出。我对您的建议是将此问题发布到官方支持论坛：http: [//community.bingads.microsoft.com/ads/en/publisher/f/63.aspx](http://community.bingads.microsoft.com/ads/en/publisher/f/63.aspx)

至于快速修复，是的：`MyAdd.Suspend()`滚动时调用。但是，请记住，`MyAd.Resume()`当您停止滚动时调用。性能问题很复杂，可能与广告控制没有太大关系。无论如何，这个快速修复将有所帮助。

# javascript - window.open 和发送表单数据不起作用

> ID：14226470
> 
> 赞同：0
> 
> 时间：2013-01-09T00:30:13.497
> 
> 标签：javascript, jquery

我正在尝试打开新窗口并使用**javascript**和**jquery-1.8.3**发送表单数据。但是，它不工作。

这是源代码。

```
<a href="#" onclick="printPage()">Print this</a>

<script type="text/javascript" src="/common/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    function printPage(){

        var form = $("<form method='post' action='/common/print.jsp' target='printWindow'></form>");
        var input = $("<input type='hidden' name='view'/>");
        input.val($("#ctn").html());
        form.append(input);
        var printWindow = window.open(form.attr("action"), "printWindow", "width=700px,height=800px");
        form.submit();
    }
</script> 
```

窗户被打开了。但 `request.getParameter("name")`为空。

这是`/common/print.jsp`页面

```
<%@ page contentType="text/html; charset=utf-8"%>
<% request.setCharacterEncoding("UTF-8"); %>
<div id="ctn">
<%
    out.print(request.getParameter("view"));
%>
</div> 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:36:02.190

你是在伪造一个 ajax 调用吗 ;-)

最好你做这样的事情：

```
<a href="#" onclick="printPage()">Print this</a>

<script type="text/javascript" src="/common/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">

function printPage(){

    $.post('/common/print.jsp', {view:$("#ctn").html()}).success(function(response){
        var oWindow = window.open('', "printWindow", "width=700px,height=800px");
        oWindow.document.write(response);
    });
}
</script> 
```

# java - Google Gmail API - 无法加载用户电子邮件签名

> ID：14226472
> 
> 赞同：1
> 
> 时间：2013-01-09T00:30:20.627
> 
> 标签：java, google-api-java-client

我正在使用 google gmail API 来读取用户电子邮件签名：

```
 public GenericEntry retrieveSettings(String username, String setting)
        throws IOException, ServiceException {
    URL singleUrl = new URL(BASE_URL + "emailsettings/2.0/" + domain + "/" + username + "/" + setting);
    return userService.getEntry(singleUrl, GenericEntry.class);
} 
```

然后我正在阅读这样的签名属性：

```
 genericEntry.getProperty("signature"); 
```

迁移到上一个版本的谷歌客户端库后，上面的行总是返回 null。我注意到签名仍在响应中返回，但它位于 xmlBlob 对象中。

我想知道为什么会发生这种变化以及如何使用与 getProperty 方法相同的编码来解析 xmlBlob 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:54:02.823

我必须解析 XmlBlob 以获取数据并删除 http 编码。

每次我们更改 Google 客户端库的版本时，我们都必须解决一些问题，API 根本不稳定。

# c# - C# 解析 XML 文件

> ID：14226473
> 
> 赞同：8
> 
> 时间：2013-01-09T00:30:26.267
> 
> 标签：c#, xml, linq

我在这里查看了堆栈溢出的几个线程，但找不到答案。我有一个 xml 文件设置，如下所示：

```
<entry id="1" type="a">
    <name>string 1</name>
    <description>any description</description>
</entry>
<entry id="2" type="b">
    <name>string 2</name>
    <description>any description #2</description>
</entry> 
```

我需要选择所有“条目”标签并返回条目的 ID、类型、内部名称和描述标签。我怎样才能用 C# 做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T00:40:21.320

请记住，您的 xml 文件应该有一个根节点。下面是使用 Linq to Xml 解析：

```
var xdoc = XDocument.Load(path_to_xml);
var entries = from e in xdoc.Descendants("entry")
              select new {
                 Id = (int)e.Attribute("id"),
                 Type = (string)e.Attribute("type"),
                 Name = (string)e.Element("name"),
                 Description = (string)e.Element("description")
              }; 
```

查询将返回与每个条目元素对应的匿名对象序列（具有属性 Id、Type、Name 和 Description）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:32:48.443

查看[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)库。使用它，您可以使用 LINQ 或 XPath 解析 HTML。

# javascript - 淘汰对象绑定

> ID：14226477
> 
> 赞同：2
> 
> 时间：2013-01-09T00:30:37.120
> 
> 标签：javascript, binding, knockout.js, mapping

执行 GET，返回一个对象。想知道绑定这个的正确方法是什么：

```
var self = this;
$.getJSON("/api/contentsummary",
                        function (data) {
                            self.contentSummary =data.contentSummary;

                        }); 
```

为了使其正常运行，我需要在每次分配后进行绑定。当 GET 函数返回一个对象时，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:32:33.300

使用[**Knockout 映射**插件](http://knockoutjs.com/documentation/plugins-mapping.html#example_using_komapping)：

```
var self = this;

$.getJSON("/api/contentsummary", function (data) {
    self.contentSummary = ko.mapping.fromJS(data.contentSummary);
}); 
```

# python - 转换为字符串时，浮点数的 Python 列表以 ':' 结尾

> ID：14226486
> 
> 赞同：5
> 
> 时间：2013-01-09T00:31:24.040
> 
> 标签：python, list, colon

我有一个从文本文件中读取的浮点列表。经过一些数据处理后，我使用以下命令将列表写入文件：

```
for val in flist:
    sa = '{0}'.format(val)
    fout.write(sa) 
```

对于特定的输入文件，输出文件将在字符串中包含一个 ':'。我已经运行调试并在故障点停止了脚本。该值应为 58710000.0

```
[Dbg]>>> print val[464]
   5870:000.0
[Dbg]>>> fa = val[464]
[Dbg]>>> print fa
  5870:000.0
[Dbg]>>> 
[Dbg]>>> fa = fa + 1
[Dbg]>>> print fa
   58710001.0
[Dbg]>>> fa = fa - 1
[Dbg]>>> print fa
   5870:000.0 
```

这只发生在某些文件和浮点数上

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-09-11T09:48:27.733

这是 Python 2.7.3 或更早版本中的一个错误，在某些环境下。

用户@ecatmur 在另一篇文章中指出了一个类似的问题，即 `'9' + 1 = ':'`ASCII

**这已**在更高版本的 Python 中得到修复。
具体来说，该问题在**Python 2.7.5**中消失了，因此该问题已得到修复。

请参阅 Gord Thompson 接受的答案：

*   [Python 通过 PyoDBc 在 Access 的十进制数中插入冒号](https://stackoverflow.com/questions/16612301/python-inserts-a-colon-in-a-decimal-number-from-access-via-pyodbc)

类似的问题已关闭或未回答：

*   [Python float相加后小数点后有冒号](https://stackoverflow.com/questions/13825487/python-float-got-a-colon-after-the-decimal-point-after-addition)
*   [转换为字符串时，浮点数的 Python 列表以 ':' 结尾](https://stackoverflow.com/questions/14226486/python-list-of-floats-ends-up-with-a-when-converting-to-a-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:39:29.000

您的值可能实际上不是`float`s。总之，`sa = '{0}'.format(val)`很傻；你不妨这样做`sa = str(val)`。但是如果你这样做`sa = '%f' % (val,)`，当 val 不是 a 时，你会得到一个异常`float`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T10:36:42.300

这似乎是高度特定于平台的。float 的 repr 调用 PyOS_double_to_string 最终调用 PyOS_snprintf，后者用一些代码包装 snprintf 以使该函数在平台之间更加一致。它特别出现在某些版本的 AIX 上，snprintf 可以产生 0: 而不是 10。

你能分享你的 sys.platform 和 sys.version 值吗？（启动交互式 python 解释器时打印的版本标题应该可以。）

相关源文件：Python/mysnprintf.c 用于 PyOS_snprintf，Objects/floatobject.c 用于 float_repr，Python/pystrtod.c 用于 PyOS_string_to_double。

# grails - 带有 RAM 索引的 Grails Searchable 插件集在部署到 Cloud Foundry 时会丢失

> ID：14226489
> 
> 赞同：1
> 
> 时间：2013-01-09T00:31:58.363
> 
> 标签：grails, cloud-foundry, searchable, grails-searchable, searchable-plugin

我正在将 Grails 应用程序部署到 Cloud Foundry，其中可搜索插件“compassConnection”设置为使用 RAM 索引。问题是 Cloud Foundry 应用了一些神奇的自动配置来将“compassConnection”设置为使用基于文件的索引。

如果我使用基于磁盘的索引并且 Cloud Foundry 需要重新配置以使其在其环境中工作但我希望 RAM 索引配置保持原样，这会很好。

有什么想法可以让我完成这项工作吗？

谢谢，奥利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:24:21.493

在浏览 AbstractCloudBeanPostprocessor 中的 Cloud Foundry 插件源代码后，我找到了问题的原因。填充罗盘连接的方法不检查它是否是 RAM 索引，而是盲目地将其设置到磁盘上的某个位置。

```
 /**
 * Update the location of the Searchable Lucene index.
 * @param beanFactory the Spring bean factory
 * @param appConfig the application config
 */
protected void fixCompass(ConfigurableListableBeanFactory beanFactory, ConfigObject appConfig) {
    def compassBean = beanFactory.getBeanDefinition('compass')
    String indexLocation = getCompassIndexRootLocation(appConfig) + '/searchable-index'
    appConfig.searchable.compassConnection = indexLocation
    compassBean.propertyValues.addPropertyValue 'compassConnection', indexLocation
    log.debug "Updated Compass connection details: $indexLocation"
} 
```

我认为这应该真正检查 RAM 索引的存在，并且只将其设置为磁盘位置。一种可能的解决方法是创建我自己的 BeanDefinitionRegistryPostProcessor 并撤消 Cloud Foundry 插件所做的事情。

# python - 如何将参数列表传递给 Python 中的另一个函数？

> ID：14226490
> 
> 赞同：0
> 
> 时间：2013-01-09T00:31:58.897
> 
> 标签：python, argv, optparse, keyword-argument

使用`optparse`，我想将选项列表参数列表与我调用 add_option() 的位置分开。我如何将这些东西打包到文件 A 中（然后在文件 B 中解包），这样才能正常工作？parser_options.append() 行不会像写的那样工作......

档案一：

```
import file_b
parser_options = []
parser_options.append(('-b', '--bootcount', type='string', dest='bootcount', default='', help='Number of times to repeat booting and testing, if applicable'))
parser_options.append(('-d', '--duration', type='string', dest='duration', default='', help='Number of hours to run the test.  Decimals OK'))

my_object = file_b.B(parser_options) 
```

文件 B 接收 parser_options 作为输入：

```
import optparse
class B:
    def __init__(self, parser_options):
        self.parser = optparse.OptionParser('MyTest Options')
        if parser_options:
            for option in parser_options: 
                self.parser.add_option(option) 
```

***编辑：固定使用对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:36:10.337

与其尝试将您的选项硬塞进某个数据结构中，不如在文件 A 中定义一个向您提供的解析器添加选项的函数不是更简单吗？

档案一：

```
def addOptions(parser):
    parser.add_option('-b', '--bootcount', type='string', dest='bootcount', default='', help='Number of times to repeat booting and testing, if applicable')
    parser.add_option('-d', '--duration', type='string', dest='duration', default='', help='Number of hours to run the test.  Decimals OK') 
```

文件 B：

```
import optparse
def build_parser(parser_options):
    parser = optparse.OptionParser('MyTest Options')
    if parser_options:
        parser_options(parser) 
```

别处：

```
import file_a
import file_b
file_b.build_parser(file_a.addOptions) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:14:44.557

您遇到的问题是您试图在元组中传递关键字参数。该代码`('-b', '--bootcount', type='string', dest='bootcount', default='', help='Number of times to repeat booting and testing, if applicable')`仅在函数调用中合法，在其他任何地方都不合法。元组中的`type='string'`位是不合法的！

如果要传递函数参数，则需要对位置参数使用列表或元组，对关键字参数使用字典。这是一种方法，您可以通过将单个元组更改为包含`args`元组和`kwargs`字典的元组：

```
parser_options = []
parser_options.append((('-b', '--bootcount'),
                       dict(type='string', dest='bootcount', default='',
                            help='Number of times to repeat booting and testing, if applicable')))
parser_options.append((('-d', '--duration'),
                       dict(type='string', dest='duration', default='',
                            help='Number of hours to run the test.  Decimals OK'))) 
```

`*`在您的另一个文件中，您可以使用and运算符将元组和 dict 的内容传递给适当的函数`**`来解包参数：

```
class B:
    def __init__(self, parser_options)
        self.parser = optparse.OptionParser('MyTest Options')
        if parser_options:
            for args, kwargs in parser_options: 
                self.parser.add_option(*args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:15:41.077

我最终在构造时将解析器传递给了对象，这很好，因为我可以从调用模块中命名它：

```
import optparse
parser = optparse.OptionParser('My Diagnostics')
parser.add_option('-p', '--pbootcount', type='string', dest='pbootcount', default='testing1234', help=' blah blah')
c = myobject.MyObject(parser) 
```

# mysql - 从 Spring WebApp 运行 shell 命令

> ID：14226498
> 
> 赞同：0
> 
> 时间：2013-01-09T00:32:48.377
> 
> 标签：mysql, tomcat, web-applications, process, mysqldump

我想从基于 Spring 的 webapp 调用 mysqldump 并将输出写入文件。我希望能够向用户提供在服务器上创建的文件的下载链接。

我尝试运行以下命令：

```
Runtime.getRuntime().exec("/usr/bin/mysqldump -u <username> -p<password> <db_name> >" + fileName);
Runtime.getRuntime().exec("mysqldump -u <username> -p<password> db_name >" + fileName); 
```

我尝试了以下文件名值。

```
fileName = "mysql.sql";
fileName = "/tmp/mysql.sql";
fileName = servletContext.getRealPath("") + "/mysql.sql"; 
```

但是命令不成功。process.exitValue() 返回错误代码 2 或 6。

```
 ProcessBuilder pb = new ProcessBuilder("/usr/bin/mysqldump", " -u ", "<username>", " -p<password>", "<db_name>", " > ", fileName);
  pb.redirectErrorStream(true); // equivalent of 2>&1
  Process p = pb.start();
  p.waitFor(); 
```

这也无济于事。

有人可以告诉我从 webapp 运行此类命令的最佳方法是什么吗？应该在哪里创建输出文件？上面的命令有什么问题？

我需要能够在不同的系统（Linux、Windows）上运行它。webapp 在任一系统上运行。如果需要，我可以在属性文件中抽象出 mysqldump 路径。但是我该如何做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:05:15.017

这可能不是一个好主意。servlet 可能需要一个非常宽松的安全环境才能使其正常工作。如果您进行搜索，您会发现很多人对此有疑问。

即使运行时 exec 可能由于某种原因而阻塞并且 servlet 会超时，我也不知道它的后果，但它们对我来说听起来并不好。

我们有一个类似的问题，我在几年前工作并编写了一个简单的多线程服务器，它将请求排队，并在有机会时运行它们并处理诸如挂起、崩溃和重新启动之类的事情。它作为 jsvc 守护进程运行。servlet 通过套接字向它发送一条消息。

# asynchronous - 在 s3 中传输数据的有效方法

> ID：14226500
> 
> 赞同：4
> 
> 时间：2013-01-09T00:33:14.600
> 
> 标签：asynchronous, amazon-s3, boto

我有 50 亿多个密钥可以从一个区域复制到另一个区域。目前，我正在处理线程和多处理，但我得到的结果对于我的需求来说有点慢。`PUT`对于 1000 个复制请求，我的时间从 8 秒到近 2 分钟（平均约 50 秒）不等。这将需要将近一年的时间才能完成。

有谁知道更快的方法来解决这个问题？我正在阅读有关 python 的[asyncore](http://docs.python.org/2/library/asyncore.html)模块的信息，它看起来很有希望，但对我来说相当混乱。如何将 boto 与 asyncore 集成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:28:57.160

不幸的是，当需要大量请求时，API 可能效率很低。

HTTP 开销在这里起着重要作用。向 API 抛出 50 亿个 COPY 请求将需要一段时间，即使使用线程，以传统方式等待每个响应也需要很长时间（如您所说，数年），因为每个请求都会阻塞一个线程。

因此，您使用非阻塞异步连接的想法是一个很好的开始。

不幸的是，我不是一个出色的 python 开发人员，所以我无法真正帮助您替换 boto 中的底层 http 客户端。

[这些人](https://github.com/yyuu/botornado)已经这样做了，（他们说，又快又脏）使用[tornado.httpclient](http://www.tornadoweb.org/documentation/httpclient.html)

也许您可以使用它来了解如何实现 asyncore

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:41:01.143

使用 asyncore 可能会有所帮助，但我认为最终结果不会比线程解决方案快得多。如果我有 50 亿个对象要在 S3 中移动，我会找到一种方法将这项工作分配给尽可能多的 EC2 实例。困难的部分是找到一种在工作实例之间拆分工作的方法。

*   您可以使用收集桶中所有对象的列表，`list_keys`然后在 SQS 中为需要移动的每个对象排队消息。然后启动 N 个 EC2 实例，所有实例都从同一个队列中读取。然而，即使列出密钥也需要很长时间，然后排队 50 亿条消息也需要一段时间。

*   如果对象在 S3 上自然分区，您可以利用这一点。例如，如果存在伪层次结构，您可以使用不同的`prefix`.

*   如果您将对象名称存储在单独的数据库中，则可以生成 N 个单独的对象键文件并将一个文件传递给 N 个 EC2 实例中的每一个。

可能还有其他可能性。如果没有有关您的具体情况的更多详细信息，很难知道。但是，如果您想在合理的时间内完成这项工作，我认为您需要找到某种方法将工作分散到 EC2 实例之间。

# javascript - 数组中的 Javascript 搜索

> ID：14226501
> 
> 赞同：1
> 
> 时间：2013-01-09T00:33:36.787
> 
> 标签：javascript, jquery, arrays, google-maps

JQuery 的 $.inArray 函数有问题（我也尝试过 indexOf）

我的代码：

```
var branches = circles[i].branches;
var counter = 0;
for (var j = 0; j < branches.length; j++) {

   var circle_branch = branches[j];
   var index = $.inArray( circle_branch, activeBranchSettings);
   if (index == -1)counter++;                   
}
if(counter == 0) circles[i].setMap(map); 
```

因此，我正在使用 Google Maps API，并且我有一个控制面板，其中包含一些类别（分支），我可以在其中切换标记。每个圆圈（标记）可以有多个分支，并且这些 ID 附加到每个圆圈。所以我遍历分支并希望在另一个数组（activeBranchSettings）中找到该ID，每次没有匹配时我都会增加一个计数器。如果计数器最后是 0，我会打开圆圈。所以这告诉了哪些标记不应该显示，哪些应该显示。

无论这是否是解决问题的完美方法，问题在于

```
 var index = $.inArray( circle_branch, activeBranchSettings); 
```

每次都返回-1！数组中那个点的值是，我尝试使用 .toString() 将“circle_branch”转换为字符串，但仍然没有变化，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:00:50.733

这些测试用例运行良好。所以也许比较数据类型（typeof（variable））将是找到问题的一个步骤

```
<script type="text/javascript">
    var arr = new Array('a', 'b', 'c', 'd');
    var look = new Array('d', 'b');

    for(var i=0; i<arr.length; i++)
    alert($.inArray( arr[i], look));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:00:13.560

根据 jQuery 文档 inArray 具有以下语法。

```
jQuery.inArray( value, array [, fromIndex ] ) 
```

手段`value`应该排在第一位，并且`array`应该排在第二位。从您的示例中不太清楚`activeBranchSettings`它是数组还是可搜索值？

# php - iOS 如何将 UIImage 和 NSSrting 发布到 php 脚本同一篇文章

> ID：14226502
> 
> 赞同：0
> 
> 时间：2013-01-09T00:33:36.100
> 
> 标签：php, ios

我想知道是否有人可以在代码中举例说明如何一次将 uiiiamge 和字符串参数发布到服务器。我知道如何发送字符串参数，但我不知道如何在同一个 post 方法中同时进行。有人可以演示和解释一下。谢谢

# c++ - 如何调整客户端大小？

> ID：14226510
> 
> 赞同：0
> 
> 时间：2013-01-09T00:35:09.013
> 
> 标签：c++, winapi, gdi

我处理 WM_NCCALCSIZE 消息，并尝试手动设置目标窗口客户端矩形。

```
case WM_NCCALCSIZE: 
        {
            RECT *rect = (LPRECT)lParam;
            if (wParam == TRUE)
            {
                ////缩小客户区的范围
                //RECT *rect = (LPRECT)lParam;
                //rect-&gt;left += 8;
                //rect-&gt;right -= 8;
                //rect-&gt;top += 30;
                //rect-&gt;bottom = 8;
                InflateRect(rect, -50, -50);
                RECT dstRect = *(LPRECT)lParam;
                RECT srcRect = rect[1];
                rect[1] = dstRect;
                rect[2] = srcRect;

                //DefWindowProc(hWnd, message, wParam, lParam);
                return 0;
                //return WVR_REDRAW;
            }
            else
            {
                DWORD lRet =  DefWindowProc(hWnd, message, wParam, lParam);
                return lRet;
            } 
```

但结果很糟糕，![在此处输入图像描述](../Images/502a2f71dc0de2707439d14aa3bd7fc1.png) 当我调整窗口大小时，使用 DrawText 绘制的文本不会被完全擦除。

如何完全擦除背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:08:24.057

这里的根本原因是如果您更改了客户端大小，那么您更改了非客户区大小。但是 WM_ERASEBKGND 处理程序只擦除客户区背景而不是非客户区大小。

因此，如果您更改了客户端大小，您还需要处理 WM_NCPAINT 以擦除非客户端区域背景并使用 DefWindowProc 绘制框架。

# javascript - 如何使用 CSS 和 JavaScript 更改标签的背景图像

> ID：14226511
> 
> 赞同：3
> 
> 时间：2013-01-09T00:35:09.017
> 
> 标签：javascript, html, css, onclick

这真是一个令人头疼的问题。我在一个表单中有三个复选框，我有标签，标签的背景图像设置为 CSS，问题是，我如何让我的 JavaScript 在单击时将图像从当前图像更改为第二个图像和选中复选框。根据我对javascript的了解，它应该可以工作，有什么想法吗？此外，由于 ie 7 和 8 的先前问题，它确实必须是这种方式。

HTML

```
<input type="checkbox" name="interest1" id="interest1" value="interested"style="display:block">
<input type="checkbox" name="interest2" id="interest2" value="interested"style="display:block">
<input type="checkbox" name="interest3" id="interest3" value="interested"style="display:block">
<p align="center">
<label for="interest_inet" id="label-interest1" onClick="func()"></label> 
```

CSS：

```
label {
    border:1px solid red;
    display:inline-block;
}

#label-interest1 {
    background-image: url(images/internetbutton.gif);
    width: 152px;
    height:152px;
} 
```

JavaScript：

```
<script type="text/javascript">
function func()
{
    if(document.getElementById('interest_inet').checked)
    {
        document.getElementById('label-interest1').style.backgroundImage=url(images/internetbutton.gif);
    }
    else
    {
        document.getElementById('label-interest1').style.backgroundImage=url(internetbuttonchecked.gif);
    }
}
</script> 
```

这是一个实时代码[示例](http://jsbin.com/uburan/11/edit)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T00:46:09.000

您似乎只是缺少一些引号（的值`style.backgroundImage`应该是一个字符串）：

```
function func()
{
    var label = document.getElementById('label-interest1');
    if(document.getElementById('interest_inet').checked)
    {
        label.style.backgroundImage = 'url(images/internetbutton.gif)';
    }
    else
    {
        label.style.backgroundImage = 'url(internetbuttonchecked.gif)';
    }
} 
```

# c# - vb6 和 c# 中的 AES 加密

> ID：14226515
> 
> 赞同：4
> 
> 时间：2013-01-09T00:35:22.377
> 
> 标签：c#, vb6, cryptography, encryption-symmetric

我需要一种 .NET *（理想情况下是 C#）*`vb6`算法，它会产生与我为加密和`decrypt`二进制文件所做的相同的结果。我已经尝试寻找代码一周了，但收效甚微。

我从[How to encrypt a string in VB6 decrypt VB.NET](http://support.microsoft.com/default.aspx?scid=kb;en-us;821762)开始，但这只是解决方案的一半，它使用了`RC2`而不是`AES`. 经过一番摆弄，我得到了我的`vb6`代码，`AES`但我找不到`c#`产生相同结果的方法。我认为这与我制作`Key`and的方式有关`IV`。我一直在研究[Cryptographic Services](http://msdn.microsoft.com/en-us/library/93bskf9z.aspx) ，我的尝试可以分为两种基本类型。我尝试过`PasswordDeriveBytes.CryptDeriveKey`并试图使其与`aes`. 根本没有成功。并尝试我试图模仿它的行为。下面我将发布我的`vb6`代码和我最接近的`c#`尝试。我不能 100% 肯定地说`vb6`是完美的，所以如果需要在那里进行更改，我愿意接受。我知道有一种方法可以使用 p 调用，并且我知道有一种方法`.net dll`可以从 my 调用`vb apps`。我宁愿不走那条路。

VB6 函数

```
Public Function Crypt_File(PathToSourceFile As String, PathToDestFile As String, Password As String, HowTo As CryptMethod) As Boolean
Const FName As String = "mdlCryptography.Encrypt_file"
Dim CryptoContext As Long
Dim strProvider As String
Dim HashHnd As Long
Dim CrypKey As Long
Dim Step As Integer
Dim CryptBuff As String
Dim InFileNum As Long, OutFileNum As Long
Dim BytesRemaining As Long, CurrentBufferSize  As Long
Dim MAX_BUFFER_SIZE As Long
Dim DoCryptFinalise As Long
Dim Buff As String
On Error GoTo Trap:
    Step = 10
    Crypt_File = False
    If PathToSourceFile = PathToDestFile Then '
        Err.Raise 334, FName, "Sourse and Dest Path are the same"
    End If
    MAX_BUFFER_SIZE = (2 ^ 20) * 100 '100 MB
    Buff = vbNullChar
    strProvider = MS_ENH_RSA_AES_PROV_A & vbNullChar
    If Not CBool(CryptAcquireContext(CryptoContext, ByVal Buff, ByVal strProvider, PROV_RSA_AES, CRYPT_VERIFYCONTEXT)) Then
        Err.Raise 33410, FName, "Unable to Acquire Context: " & MS_ENH_RSA_AES_PROV_A
    End If

    If Not CBool(CryptCreateHash(CryptoContext, CALG_SHA_256, ByVal 0&, ByVal 0&, HashHnd)) Then
        Err.Raise 33420, FName, "Unable to Create a hash object. " & MS_ENH_RSA_AES_PROV_A
    End If

    If Not CBool(CryptHashData(HashHnd, Password, Len(Password), ByVal 0&)) Then
        Err.Raise 33430, FName, "Unable to Hash password. "
    End If

    If Not CBool(CryptDeriveKey(CryptoContext, CALG_AES_256, HashHnd, ByVal CRYPT_NO_SALT, CrypKey)) Then
        Err.Raise 33440, FName, "Unable to Derive Key. "
    End If
    'Clear HashHnd
    If HashHnd <> 0 Then
        Call CryptDestroyHash(HashHnd)
    End If
    HashHnd = 0

    'Prep Data For encryption
    DoCryptFinalise = 0
    InFileNum = FreeFile
    Step = 20
    Open PathToSourceFile For Binary Access Read As #InFileNum
    If LenB(Dir$(PathToDestFile)) > 0 Then
        Kill PathToDestFile
    End If
    OutFileNum = FreeFile
    Step = 25
    Open PathToDestFile For Binary Access Write As #OutFileNum

    BytesRemaining = LOF(InFileNum)
    'Loop through File Chunks
    Do While BytesRemaining > 0

        If BytesRemaining >= MAX_BUFFER_SIZE Then
            CurrentBufferSize = MAX_BUFFER_SIZE
        Else
            CurrentBufferSize = BytesRemaining
            DoCryptFinalise = 1
        End If

        Buff = String$(CurrentBufferSize, vbNullChar)
        Get #InFileNum, , Buff
            If HowTo = CryptMethod.Encrypt Then
                CryptBuff = EncryptBuffer(CrypKey, DoCryptFinalise, Buff)
            Else
                CryptBuff = DecryptBuffer(CrypKey, DoCryptFinalise, Buff)
            End If
        Put #OutFileNum, , CryptBuff

        BytesRemaining = BytesRemaining - CurrentBufferSize
    Loop
    Close #InFileNum
    Close #OutFileNum
    Crypt_File = True

GoTo Fin
Trap:
    Crypt_File = False
    If Step = 20 Then
        Close #InFileNum
    End If
    If Step = 25 Then
        Close #InFileNum
        Close #OutFileNum
    End If
    Err.Raise Err.Number, Err.source, Err.Description
Fin:

    If CrypKey <> 0 Then
        Call CryptDestroyKey(CrypKey)
    End If
    If HashHnd <> 0 Then
        Call CryptDestroyHash(HashHnd)
    End If
End Function

Private Function EncryptBuffer(CrypKey As Long, DoCryptFinalise As Long, Buff As String) As String
Dim EncDataLength As Long, EnctBuffLen As Long
Dim CryptBuff As String

    EncDataLength = Len(Buff)
    EnctBuffLen = EncDataLength + AES_BLOCK_SIZE
    CryptBuff = String$(EnctBuffLen, vbNullChar)
    LSet CryptBuff = Buff
    If Not CBool(CryptEncrypt(CrypKey, ByVal 0&, ByVal DoCryptFinalise, ByVal 0&, CryptBuff, EncDataLength, EnctBuffLen)) Then
'        Close #InFileNum
'        Close #OutFileNum
        Err.Raise 33450, "mdlCryptography.EncryptBuffer", "Encryption Error"
    End If
    EncryptBuffer = Left$(CryptBuff, EncDataLength)
End Function

Private Function DecryptBuffer(CrypKey As Long, DoCryptFinalise As Long, Buff As String) As String
Dim EncDataLength As Long
Dim CryptBuff As String

    EncDataLength = Len(Buff)
    CryptBuff = String$(EncDataLength, vbNullChar)
    LSet CryptBuff = Buff
    If Not CBool(CryptDecrypt(CrypKey, ByVal 0&, ByVal DoCryptFinalise, ByVal 0&, CryptBuff, EncDataLength)) Then
'        Close #InFileNum
'        Close #OutFileNum
        Err.Raise 33450, "mdlCryptography.DecryptBuffer", "Decryption Error"
    End If
    DecryptBuffer = Left$(CryptBuff, EncDataLength)
End Function 
```

c# 非常粗糙

```
private void Crypt(bool DoEn)
{
    int Rfc2898KeygenIterations = 100;
    int AesKeySizeInBits = 128;
    byte[] rawPlaintext ;//= System.Text.Encoding.Unicode.GetBytes("This is all clear now!");
    byte[] cipherText = null;
    byte[] plainText = null;

    using (Aes aes = new AesManaged())
    {

        int KeyStrengthInBytes = aes.KeySize / 8;

        SHA256 MySHA = new SHA256Cng();
        MySHA.Initialize();
        plainText = Encoding.ASCII.GetBytes(txtPassword.Text);
        aes.Key = MySHA.ComputeHash(plainText );
        aes.IV =  Encoding.ASCII.GetBytes("0000000000000000");
        if (DoEn)
        {
            //using (FileStream fs = new FileStream(txtOut.Text,FileMode.CreateNew ))
            using (MemoryStream ms = new MemoryStream())
            {
                using (CryptoStream cs = new CryptoStream(ms, aes.CreateEncryptor(), CryptoStreamMode.Write))
                {
                    //using (StreamReader myFile = new StreamReader(txtIn.Text))
                    //{
                    //    rawPlaintext = System.Text.Encoding.ASCII.GetBytes(myFile.ReadToEnd());
                        rawPlaintext = File.ReadAllBytes(txtIn.Text);
                        cs.Write(rawPlaintext, 0, rawPlaintext.Length);

                    //}
                }
                cipherText = ms.ToArray();
                File.WriteAllBytes(txtOut.Text, cipherText);
            }
        }
        else
        {
            //using (FileStream fs = new FileStream(txtIn.Text, FileMode.CreateNew))
            using (MemoryStream ms = new MemoryStream())
            {
                using (CryptoStream cs = new CryptoStream(ms, aes.CreateDecryptor(), CryptoStreamMode.Write))
                {
                    //using (StreamReader myFile = new StreamReader(txtOut.Text))
                    //{
                        //string s = myFile.r.ReadToEnd();
                        rawPlaintext = File.ReadAllBytes(txtOut.Text); //System.Text.Encoding.ASCII.GetBytes(s);
                        //cipherText = new int[rawPlaintext.Length];
                        cs.Write(rawPlaintext, 0, rawPlaintext.Length);
                        //cs.Write(cipherText, 0, cipherText.Length);
                    //}
                }
                cipherText = ms.ToArray();
                File.WriteAllBytes(txtIn.Text, cipherText);
            }
        }
    }
    //string s = System.Text.Encoding.ASCII.GetString(plainText);
    //Console.WriteLine(s);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T04:04:59.340

在我看来，在 VB6 示例中，您指定了 CRYPT_NO_SALT，我相信这会导致未使用初始化向量。大概这都是零，但我不确定。

但是，在 C# 代码中，您将获取 ASCII 文本“0000000000000000”的字节，这与数字零 { 0, 0, 0, 0, ... 0 } 的字节数组不同，因为字符 '0' 是等于 ASCII 中的数字 48（参见：[http](http://www.asciitable.com/) ://www.asciitable.com/ ）。我认为这很可能是您的问题的根源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T04:09:31.060

您在此处的向量将产生与您预期不同的结果：

```
aes.IV = Encoding.ASCII.GetBytes("0000000000000000"); 
```

这将返回一个由 48 组成的字节数组，而不是 0。

您可以像这样简单地初始化一个字节数组：

```
aes.IV = new byte() {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}; 
```

# delphi - SQL Server 2005 查询在 SQL Server Management Studio Express 中有效，但在 Delphi 2010 中无效

> ID：14226516
> 
> 赞同：1
> 
> 时间：2013-01-09T00:35:29.617
> 
> 标签：delphi, sql-server-2005, datetime, delphi-2010

我正在使用 SQL Server 2005 Management Studio Express 和 Delphi 2010。`Fecha_hora`= Date_Time 是`smalldatetime`.

我的日期格式是`dd/mm/yyy`

我表中的日期保存如下：

```
08/01/2013 11:22:00 a.m. 
```

我在 Delphi 中有这个查询，以了解给定一段时间内的销售额在哪个时间段更高；天/月，在这种情况下，我在 2013 年 1 月 8 日的同一天进行测试：

```
 conect.Q_total_hora.Active:=false;
  conect.Q_total_hora.SQL.Clear;
  conect.Q_total_hora.SQL.Add('select datepart(hh, fecha_hora) as Hora, sum(Total) as Venta, a.tipo as Tipo');
  conect.Q_total_hora.SQL.Add('from ventas v join articulos a on v.id_articulo=a.id_articulo');
  conect.Q_total_hora.SQL.Add('where tipo='+char(39)+DBLUCB_tipo.Text+char(39)+' and cast(Convert(varchar(10), fecha_hora, 112) as datetime) between'+char(39)+DateToStr(DateTimePicker_fecha1.Date)+char(39)+ 'and'+char(39)+DateToStr(DateTimePicker_fecha2.Date)+char(39));
  conect.Q_total_hora.SQL.Add('group by datepart(hh,fecha_hora), a.tipo order by datepart(hh,fecha_hora) ');
  conect.Q_total_hora.Active:=true; 
```

我之所以使用`cast(Convert(varchar(10), fecha_hora, 112) as datetime)`，是因为我在互联网上发现这样我只能检索日期，而没有时间检索日期之间的数据。

在`DateTimePickers`我选择`08/01/2013`作为 2013 年 1 月 8 日

我用备忘录查看查询`memo1.Text:=conect.Q_total_hora.Text;`

我收到的查询是：

```
select datepart(hh, fecha_hora) as Hora, sum(Total) as Venta, a.tipo as Tipo
from ventas v join articulos a on v.id_articulo=a.id_articulo
where tipo='Burrito Grande' and cast(Convert(varchar(10), fecha_hora, 112) as datetime) between'08/01/2013'and'08/01/2013'
group by datepart(hh,fecha_hora), a.tipo order by datepart(hh,fecha_hora) 
```

我遇到的问题是，当我在 SQL Server Mgmt Studio 中运行此查询时，它返回值，但在 Delphi 中不返回，并且在 Delphi 中，如果我将 的值设置`DateTimePickers`为`01/08/2013`2013 年 8 月 1 日，它会返回`08/01/2012`.

据我所知（而且我知道的不多......）当我向 SQL Server 发送查询时，就像我用 SQL 编写它......为什么如果我将日期`08/01/2013`作为字符串发送它不返回任何东西？

先感谢您。我不擅长数据库，大多数东西我在互联网上寻找它们^^

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T01:52:09.133

您可以避免所有这些问题，并使用参数化查询编写非常简洁的代码。

试试这个

```
 conect.Q_total_hora.Active:=false;
  conect.Q_total_hora.SQL.Clear;
  conect.Q_total_hora.SQL.Add('select datepart(hh, fecha_hora) as Hora, sum(Total) as Venta, a.tipo as Tipo');
  conect.Q_total_hora.SQL.Add('from ventas v join articulos a on v.id_articulo=a.id_articulo');
  conect.Q_total_hora.SQL.Add('where tipo=:tipo and fecha_hora between :fecha1 and :fecha2');
  conect.Q_total_hora.SQL.Add('group by datepart(hh,fecha_hora), a.tipo order by datepart(hh,fecha_hora) ');
  conect.Q_total_hora.Prepared:=True;
  conect.Q_total_hora.ParamByName('tipo').AsString   := DBLUCB_tipo.Text;
  conect.Q_total_hora.ParamByName('fecha1').AsDateTime := DateTimePicker_fecha1.Date;
  conect.Q_total_hora.ParamByName('fecha2').AsDateTime := DateTimePicker_fecha2.Date;
  conect.Q_total_hora.Open; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T00:55:20.020

试试这个：

```
conect.Q_total_hora.SQL.Add('where tipo='+char(39)+DBLUCB_tipo.Text+char(39)+' and  fecha_hora between '+char(39)+DateToStr(DateTimePicker_fecha1.Date)+char(39)+ ' and '+char(39)+DateToStr(DateTimePicker_fecha2.Date)+char(39)); 
```

这应该看起来像：

```
where tipo='Burrito Grande' and fecha_hora between '08/01/2013' and '08/01/2013' 
```

SQL 应该自动将日期转换为日期时间并执行您想要的操作。

你也可以试试这个：

```
where tipo='Burrito Grande' and month(fecha_hora) = 8 and year(fecha_hora) = 2013 and day(fecha_hora) = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T07:21:22.467

如果您使用该术语`BETWEEN '08/01/2013' and '08/01/2013'`，您确实只会看到日期值恰好为 '08/01/2013' 的记录。

如果列是类型`date`，您将得到您想要的，但由于您的列类型是`datetime`，内容 '08/01/2013 11:22' 不在 '08/01/2013 00:00:00' 和 '08' 之间/01/2013 00:00:00' 并因此被忽略。

查询日期时间列时，使用这样的模式

```
...
where DateTimeCol between '<StartDate>' and '<EndDate> 23:59:59,997' 
```

这可能看起来有点奇怪，但将包括给定日期范围内的所有日期戳。

更新：这是一个肮脏的解决方案，它只适用于数据类型`DATETIME`，但不适用于`SMALLDATETIME`or `DATETIME2`。

从我的角度来看，有两种干净的解决方案：要么使用

```
where (DateTimeCol>='<StartDate>') 
  and (DateTimeCol <'<The day following the EndDate>') 
```

或将日期和时间分开到两列。当然，只有在可能的情况下并且不需要小于一天的范围（例如一小时左右）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T18:17:35.490

您应该避免`BETWEEN`日期范围查询，以及避免任何模棱两可的日期格式，例如 m/d/y 或 d/m/y。你最终得到的查询应该是这样的（你如何在你的 delphi 代码中到达那里，我将留给你）：

```
WHERE fecha_hora >= '20130801' AND fecha_hora < '20130802' 
```

但更好的是，正如其他人所建议的那样，您应该通过参数传递日期值，例如

```
WHERE fecha_hora >= @date_param AND fecha_hora < DATEADD(DAY, 1, @date_param) 
```

（如果您需要除单日以外的其他情况，请使用两个参数。）

有关日期/范围查询的更多背景信息以及为什么应该这样做：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

以及为什么不应该使用 CONVERT 从日期时间中删除时间：

*   [从日期时间修剪时间的最有效方法是什么？](http://www.sqlperformance.com/2012/09/t-sql-queries/what-is-the-most-efficient-way-to-trim-time-from-datetime)

*   [从日期时间修剪时间 - 后续行动](http://www.sqlperformance.com/2012/10/t-sql-queries/trim-time)

# html - Ajax 下载的 Javascript 未在 grails 中执行

> ID：14226518
> 
> 赞同：0
> 
> 时间：2013-01-09T00:35:36.387
> 
> 标签：html, ajax, grails, groovy

我有一个布局，可以加载我在整个应用程序中使用的所有公共资源，但是当我通过 ajax 加载页面时，gsp 本身会呈现，我可以看到 ajax 调用下载了 js 文件（通过 firebug），但实际代码没有得到执行.

我尝试了以下方法从ajax加载页面下载并执行js文件，但没有成功。任何帮助将不胜感激。

使用的方法

```
<r:require modules="announcements" />
<r:layoutResources/> 
```

结果：js文件下载但未执行

使用的方法

```
<g:javascript library="announcements"/>

  with and without

  <r:layoutResources/> 
```

结果：文件未下载

方法：

```
<script type="text/javascript" src="js/announcements.js"></script> 
```

结果：http 代码 302 临时移动并尝试下载 js/static/announcements.js，它给出了 http 代码 200 但萤火虫显示它仍在等待该文件，因此它没有被执行。

布局.gsp：

```
<html>
  <head>
    ...
      <g:if test="${session.isLoggedIn}">
        <r:require modules="ui, jqueryDateFormat, loggedin" />
      </g:if>
      <g:else>
        <r:require modules="ui" />
      </g:else>
      <r:layoutResources/>

      <g:layoutHead />
  </head>
  ...
</html> 
```

ajax加载页面

```
<html>
  <head>
    <all methods mentioned above>
    ...
  </head>
  <body>
    ...
  </body>
</html> 
```

更新：我解决了这个问题。原来我的 JS 文件中有语法错误。Firebug 没有发现错误，它只是因为 JS 崩溃而停止。不得不将库调用移动到我的布局以查找错误。修复了 JS 并将该行添加回 gsp 并再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:47:47.500

这是最正确的方法。

```
<script type="text/javascript" src="js/announcements.js"></script> 
```

如果 302 产生 200 但文件未下载，您应该检查您的网络服务器配置

# php - 修改循环以仅显示活动/打开后 Wordpress 的自定义字段

> ID：14226521
> 
> 赞同：0
> 
> 时间：2013-01-09T00:35:48.417
> 
> 标签：php, loops, wordpress

我需要修改此代码以显示仅为用户当前所在的帖子获取自定义字段。

```
// this needs to be modified
<?php
global $post;
$args = array('category' => 37, 'post_type' => 'post' ); 
$postslist = get_posts( $args ); 
foreach ($postslist as $post) : setup_postdata($post); 
?> 
// end this needs to be modified

<?php if( get_post_meta($post->ID, "Title", true) ): ?>
<?php echo get_post_meta($post->ID, "Title", true); ?></p>
<?php endif; ?> 
```

因为这将被包括在内，所以我不能只使用 get_post_meta。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:42:47.180

这会忽略循环，只显示当前页面的自定义字段，注意 get_the_ID()：

```
<?php if( get_post_meta(get_the_ID(), "Title", true) ): ?>
    <p><?php echo get_post_meta(get_the_ID(), "Title", true); ?></p>
<?php endif; ?>

<?php
global $post;
$args = array('category' => 37, 'post_type' => 'post' ); 
$postslist = get_posts( $args ); 
foreach ($postslist as $post){
    setup_postdata($post);
}
?> 
```

这将从循环中输出所有名为“Title”的自定义字段：

```
<?php
global $post;
$args = array('category' => 37, 'post_type' => 'post' ); 
$postslist = get_posts( $args ); 
foreach ($postslist as $post){
    setup_postdata($post);

    echo('<p>'.get_post_meta($post->ID, "Title", true).'</p>');
}
?> 
```

# tsql - 合并以插入/删除/更新整行而不命名每个变量

> ID：14226523
> 
> 赞同：2
> 
> 时间：2013-01-09T00:36:05.800
> 
> 标签：tsql, merge, insert, sql-update

我想做类似的事情

```
use mydb
go

begin tran
merge dbo.aTestTarget as T
using dbo.aTestSource as S
on (T.link = S.link)
when not matched by target and (s.code like '*I%') then
      -- is there a way to do this sort of thing?
      insert (T.*) values (S.*)

when matched and ...
rollback tran
go 
```

有没有办法在不定义每一列的情况下做到这一点？我有许多包含 20 到 50 个字段的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:52:00.230

不，那里没有。无论如何，使用 * 语法是一种不好的做法，因为它会导致难以维护的脆弱代码。

但是，在 SSMS 中，您可以将表下的 Columns 文件夹拖放到编辑器中，以获取该表所有列的逗号分隔列表。这使得打字更容易一些。:)

# video-streaming - 视频流 HDS Flussonic Erlyvideo

> ID：14226528
> 
> 赞同：1
> 
> 时间：2013-01-09T00:37:06.110
> 
> 标签：video-streaming

有没有人用earlyvideoflussonic设置伪流mp4？

我需要示例配置行，smth。像：

{文件，blablabla ...}。

和 manifest.f4m + 目标文件 + 段（下载链接），以及所有这些的放置位置。

Debian Squeeze、nginx、flussonic（正确运行）

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:02:44.980

{http，8080}。{文件，“vod”，“/var/movies”}。{根，“wwwroot”}。

/etc/init.d/flussonic 启动

比去`http://localhost:8080/#play`

输入vod/video.mp4播放/var/movies/video.mp4

它不是伪流，它是 HTTP 流。

# android - 带有 raw pictureCallback 的 Android 相机是什么格式？

> ID：14226531
> 
> 赞同：11
> 
> 时间：2013-01-09T00:37:34.713
> 
> 标签：android, android-camera

我正在尝试使用来自 Android 图片的数据。我不喜欢 JPEG 格式，因为最终我会使用灰度数据。YUV 格式对我来说很好，因为前半部分是灰度的。

来自Android开发教程，

> public final void takePicture（Camera.ShutterCallback 快门，Camera.PictureCallback raw，Camera.PictureCallback postview，Camera.PictureCallback jpeg）
> 
> 在 API 级别 5 中添加
> 
> 触发异步图像捕获。随着图像捕获的进行，相机服务将向应用程序发起一系列回调。拍摄图像后发生快门回调。这可用于触发声音，让用户知道图像已被捕获。原始图像数据可用时发生原始回调（注意：如果没有可用的原始图像回调缓冲区或原始图像回调缓冲区不足以容纳原始图像，则数据将为空）。当缩放的、完全处理的 postview 图像可用时，会发生 postview 回调（注意：并非所有硬件都支持这一点）。jpeg 回调在压缩图像可用时发生。如果应用程序不需要特定的回调，则可以传递 null 而不是回调方法。

它谈论“原始图像数据”。但是，我找不到有关原始图像数据格式的信息？你对此有什么想法吗？

我想获取照片拍摄的照片的灰度数据，数据位于手机内存中，因此不会花费时间从图像文件中写入/读取，或者在不同图像格式之间进行转换。或者也许我必须牺牲一些才能得到它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T18:08:35.787

经过一番搜索，我想我找到了答案：来自[Android 教程](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)：

> “当原始图像数据可用时发生原始回调（注意：如果没有可用的原始图像回调缓冲区或原始图像回调缓冲区不足以容纳原始图像，则数据将为空）。”

请参阅此链接 (2011/05/10) [Android：支持原始图像回调的设备](https://stackoverflow.com/questions/5946837/android-raw-image-callback-supported-devices) 并非所有设备都支持原始图片回调。

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ZRkeoCD2uyc](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ZRkeoCD2uyc) (2009) Google 的员工 Dave Sparks 说：

> “最初的意图是返回一个未压缩的 RGB565 帧，但这被证明是不切实际的。” “我倾向于完全弃用该 API，并将其替换为用于本地信号处理的钩子。”

许多人报告了类似的问题。请参阅： [http ://code.google.com/p/android/issues/detail?id=10910](http://code.google.com/p/android/issues/detail?id=10910)

由于很多图像处理过程都是基于灰度图像的，所以我很期待Android为每张图片生成的内存中的灰度原始数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T21:10:13.243

[您可能对getSupportedPictureFormats()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureFormats%28%29)有一些运气。如果它列出了一些 YUV 格式，您可以使用 setPictureFormat() 和所需的分辨率，并且直观地说，您将在 JpegPreview 回调中获得未压缩的高质量图像，从中可以轻松提取灰度（又名亮度）。

大多数设备只会将 JPEG 列为有效选择。那是因为它们在相机端的硬件中执行压缩。请注意，从相机到应用程序 RAM 的数据传输通常是瓶颈；如果您可以使用 stagefright hw JPEG 解码器，您实际上会更快地获得结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T22:19:16.920

使用原始回调的最大问题是许多开发人员无法在许多手机上返回任何内容。

如果您对 YUV 数组感到满意，您的相机预览`SurfaceView`可以实现[`PreviewCallback`](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html)，您可以将该`onPreviewFrame`方法添加到您的类中。此函数将允许您直接访问每一帧的 YUV 数组。您可以在选择时获取它。

编辑：我应该指定我假设您正在构建一个自定义相机应用程序，您在其中扩展`SurfaceView`了自定义相机预览表面。为了遵循我的建议，您需要构建一个自定义相机。如果您想快速完成操作，我建议您从 JPEG 数据中构建一个新的位图，您自己在其中实现灰度。

# javascript - 如何识别用户代理是否是 Windows 8 平板电脑？

> ID：14226534
> 
> 赞同：4
> 
> 时间：2013-01-09T00:38:15.673
> 
> 标签：javascript, windows-8, device-detection

我有一个网络应用程序。我是我的 JavaScript，我通过用户代理字符串识别设备，如下所示：

```
_android = navigator.userAgent.toLowerCase().indexOf("android");

_iOS = navigator.platform.indexOf("iPhone"); 
```

我的任务是确定设备是否是 win8 平板电脑？

我已经看过[这个帖子了](https://stackoverflow.com/questions/13076839/what-is-the-user-agent-string-for-surface-rt)。但是，字符串“Windows NT”很可能出现在所有 PC 浏览器的 useragent 中。那么，我需要找出一种客户端方法来识别设备是否是 win8 平板电脑？

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T01:18:56.813

您无法识别它是否是平板电脑，但您可以识别它是否具有*触摸功能*。这是这里的 IE 用户代理：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0; Touch) 
```

最后的触摸只有在有触摸的情况下才会出现。

*但是*，如果您只是尝试识别触摸功能，则应该使用特征检测而不是用户代理嗅探。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T09:44:07.167

用户代理字符串（Windows）： http: [//msdn.microsoft.com/en-us/library/ie/hh920767 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh920767(v=vs.85).aspx)

# ruby-on-rails - Slug 基于两个值

> ID：14226537
> 
> 赞同：1
> 
> 时间：2013-01-09T00:38:36.460
> 
> 标签：ruby-on-rails, slug

首先，我对 Rails 和 ruby​​ 很陌生。

我正在尝试为自定义 URLS 创建一个 slug。

我有一个带有名字和姓氏的用户模型。这个模型也有一个蛞蝓。

我想做的是让它检查我的数据库，看看是否有一个要创建的 slug 实例，例如。看看有多少 Joe 博客存在。如果没有，则获取 urlwhatever.com/joe-blogs **，**如果超过 0，则获取 countwhat.com/joe-blogs-COUNT 的**值**

我在打蛞蝓时试图做什么

```
 def generate_slug
    NoSlug == Users.sum("slug").where(:slug => first_name-last_name.perameterize)
      if NoSlug == 0
        self.slug ||= first_name-last_name.perameterize
      else NoSlug > 0
        self.slug ||= first_name-last_name-NoSlug.perameterize
      end
  end 
```

我试图修复它，但没有这样的运气 - 有什么建议或指示吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T06:43:31.627

我一直在使用[FriendlyId 宝石](https://github.com/norman/friendly_id)并且很高兴。如果你想结合名字和姓氏，你可以做类似的事情

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :full_name, use: :slugged

  def full_name
    "#{first_name} #{last_name}"
  end
end 
```

gem 将负责为您进行参数化。[这个 RailsCast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)也可能有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T13:04:54.550

在模型中编写这些方法

before_validation :generate_slug

def name
"#{first_name} #{last_name}"
结束

def generate_slug
self.slug = self.name.downcase.gsub(/\s+/, '-').gsub(/[^a-zA-Z0-9_]+/, '')
end

# apache - 阿帕奇虚拟主机

> ID：14226540
> 
> 赞同：0
> 
> 时间：2013-01-09T00:39:03.597
> 
> 标签：apache

如果 apache 出现域名 origin.datingasia.co，它会匹配下面的两个 VirtualHost 条目吗？

```
<VirtualHost *:80>
    ServerName datingasia.co
    ServerAlias www.datingasia.co
    RewriteEngine on
    RewriteCond %{HTTP_HOST} !^www\. [NC]
    RewriteRule ^(.*) http://www.%{HTTP_HOST}$1 [R=301,L]
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/html/datingasia.co
    ServerName origin.datingasia.co
    ServerAlias origin.datingasia.co
</VirtualHost> 
```

此外，一旦域应用了重写规则 - 例如：添加了“http://www.etc.etct”，它会自动重定向吗？这会在使用 DocumentRoot 路径之前发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:57:48.467

对于域“origin.datingasia.co”，只会触发第二个条目。如果您希望第一个也触发它，则需要添加第二个 ServerAlias 参数。

```
ServerAlias origin.datingasia.co 
```

这会导致问题，因为您的第二个条目包含相同的 ServerAlias。所有 ServerName/ServerAlias 必须是唯一的，否则 Apache 将不知道该请求使用哪个块。

第一个条目只会捕获对“datingasia.co”和“www.datingasia.co”的请求。但是，如果不满足重写规则条件（即：www.datingasia.co），您会丢失 DocuemntRoot。一旦他们到达 www.datingasia.co 页面，这将导致您的请求失败，因为 Apache 将不知道从哪个 root 服务请求。当他们访问“datingasia.co”时，浏览器将自动重定向到“www.datingasia.co”。

对于第二个条目，您不需要“ServerAlias origin.datingasia.co”，因为您已经在 ServerName 中定义了该域。如果您想要一个额外的唯一域指向该主机（即：ServerAlias www.origin.datingasia.co），则只需要一个 ServerAlias 行。

Since your rewrite rules are in the host, if the condition is met Apache will not need the DocumentRoot. But if the condition is not met, Apache will attempt to serve the request and as a result will require the DocumentRoot. Your rule will forward "datingasia.co" to "www.datingasia.co" but will fail at "www.datingasia.co" because it is missing the DocumentRoot and does not meet the RewriteCond.

# java - jDTO Binder 上的 DTO 绑定生命周期

> ID：14226541
> 
> 赞同：1
> 
> 时间：2013-01-09T00:39:05.677
> 
> 标签：java, dto, jdto

我正在尝试在 jDTO Binder 上连接生命周期调用，以便我的 DTO 可以在填充之前执行一些初始化，这是我的回调方法：

```
public void afterPropertiesSet() {
    //here is the initialization
    logger.info("I'm getting called");
} 
```

但是由于某种原因，这个回调方法没有被调用，配置这种回调的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:21:58.723

如果您查看 jDTO Binder 文档，您会发现一个关于如何配置生命周期回调的工作示例。

请参阅以下[jDTO Binder 手册](http://www.jdto.org/media/manual/jdto.html#sec31)

# c# - 写入文件后打开文件

> ID：14226548
> 
> 赞同：0
> 
> 时间：2013-01-09T00:39:57.667
> 
> 标签：c#, winforms, file, epplus

我有一个写入 excel 文件的小应用程序。

我希望程序在完成保存后立即打开文件。

如何去做呢？

使用 Epplus 处理 excel。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T00:44:30.343

如果你只想在 C# 中打开文件，你可以导入

```
using System.Diagnostics; 
```

然后你可以运行“xlsx”文件的过程`Process.Start(string path);`

```
class Program
{
    static void Main()
    {
        Process.Start(@"C:\your.xlsx");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:44:44.527

```
Process process = new Process();

 process.StartInfo.FileName = "excel.exe";
 process.StartInfo.Arguments = "myfyle.xls";
 process.Start(); 
```

# php - 如何修复：解析错误：语法错误，意外的 T_OBJECT_OPERATOR，期待 ',' 或 ';'

> ID：14226551
> 
> 赞同：0
> 
> 时间：2013-01-09T00:40:07.287
> 
> 标签：php, syntax-error

这是PHP代码：

```
function my_profile_link() {

global $bp;

if ( $bp->loggedin_user->id )

echo ‘loggedin_user->domain . $bp->profile->slug . ‘/”&gt;Profile‘;

} 
```

我收到错误：“解析错误：语法错误，意外的 T_OBJECT_OPERATOR，期待 ',' 或 ';'”在线：

> 回声'loggedin_user->域。$bp->profile->slug 。'/”>简介';

这段代码不是我写的（我对PHP一无所知），我只是在使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:41:23.443

改变 >

```
echo ‘loggedin_user->domain . $bp->profile->slug . ‘/”&gt;Profile‘; 
```

到 >

```
echo $loggedin_user->domain . $bp->profile->slug . '/">Profile'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T00:41:19.997

这些不是正常的引号字符。

# javascript - 在某些计算机上未调用 Javascript onclick

> ID：14226558
> 
> 赞同：1
> 
> 时间：2013-01-09T00:40:26.923
> 
> 标签：javascript, .net

我有一个vb.net网页，当检查或未选中数据杂志视图中的复选框时，该网页调用JavaScript函数。该代码在我的计算机上运行良好，也适用于更多人。但是对于大多数人来说，当他们选中或取消选中复选框时，根本不会调用 javascript 函数。所有这些计算机都是 Windows 7 并使用 IE 9。我还检查了 IE->Internet 选项->高级选项卡，这些计算机上的设置是相同的。在这一点上，我对此一无所知，谷歌也没有返回任何有用的结果。如果有人可以帮助我解决此问题，我将不胜感激。如果有帮助，这里是 javascript 函数的代码。

```
function SelectLineItem(pRowIndex)
{
    var vGridView=document.getElementById('dgvFSOView');
    var vLen=vGridView.rows.length;
    var i=parseInt(pRowIndex)+1;
    var intcount;
    var vtxtFcheckbox=vGridView.rows[parseInt(pRowIndex)].cells[0].getElementsByTagName("input")[0].id;
    var vFCheckbox=document.getElementById(vtxtFcheckbox); 
    var browser=navigator.appName;
    for(intcount=i;intcount<=vLen-1;intcount++)
    {
        if ((document.getElementById('hifCheck').value=="ALL") || (document.getElementById('hifCheck').value=="-1"))
        {
            var vtxtSONO=vGridView.rows[intcount].cells[3].innerText;
        }
        else if((document.getElementById('hifCheck').value!="ALL") || (document.getElementById('hifCheck').value=="-1"))
        {
            var vtxtSONO=vGridView.rows[intcount].cells[2].innerText;
        }
        if(vtxtSONO=="")
        {     
           if ((document.getElementById('hifCheck').value=="ALL") || (document.getElementById('hifCheck').value=="-1"))
           {
               var vtxttocheckbox=vGridView.rows[intcount].cells[14].getElementsByTagName("input")[0].id;
            }
            else
            {
                var vtxttocheckbox=vGridView.rows[intcount].cells[13].getElementsByTagName("input")[0].id;
            }
            var vTCheckbox=document.getElementById(vtxttocheckbox); 

            if(vFCheckbox.checked==true)
            {
                vTCheckbox.checked=true;
            }
            else
            {
                vTCheckbox.checked=false;
            }
      }
      else
      {
       return false;
      }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:46:58.297

这可能是用户在其计算机上拥有的权限的问题。安全设置具有不同级别的权限，这取决于用户如何设置他们的机器。

如果您在本地运行代码（即：双击本地 .html 文件），您通常需要启用 Javascript，然后才能在页面上运行任何 javascript。如果它托管在网站上（即：www.example.com/mypage.asp），那么这应该不是问题。

你怎么调用这个函数？您可能还想尝试使用 IE 内置的开发人员工具来查看是否发生任何错误，这会阻止您的脚本完成。

使用像 jQuery 这样的跨浏览器兼容的框架可能有助于您的复选框更改事件触发，但根据您的项目的复杂程度，可能会过度杀伤力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:52:03.577

Checkboxes do not reliably trigger the `click` event. Bind your function to the checkboxes' `change` event instead.

# entity-framework-5 - EF 5 中的多个结果集

> ID：14226560
> 
> 赞同：3
> 
> 时间：2013-01-09T00:41:08.163
> 
> 标签：entity-framework-5

因此，我遵循此处的说明：http: [//msdn.microsoft.com/en-US/data/jj691402](http://msdn.microsoft.com/en-US/data/jj691402)关于如何在 EF 中处理多个结果集。

我试图避免第二种解决方案，因为这将涉及手动更改 EDMX，这让我很担心，因为我不想担心团队中的其他成员会覆盖它们。

但似乎仍然缺乏第一个例子。它指的是`ObjectContext.Translate<TEntity>`方法，但没有说明它是如何`<TEntity>`创建的。每当我手动创建实体时，我当然会收到错误 2062，“实体集和关联集之间没有映射”。有没有我遗漏的步骤？还是第一个解决方案不适用于 DB 优先方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:29:24.520

如果您在 EF 设计器中手动创建实体而不将其映射到现有表或数据库视图，您确实会收到错误消息。尝试创建复杂类型。

# gdb - 如何从文件中读取和执行 GDB 命令？

> ID：14226563
> 
> 赞同：32
> 
> 时间：2013-01-09T00:41:24.890
> 
> 标签：gdb, gnu, disassembly

我在**目标文件**（例如）上运行**GDB**，我想根据几个命令来检查它。如何根据文件中的行执行这些命令（而不是输入每个运行的**GDN**）？**`exeFile`**

 ****例如 - 我想设置休息 -

```
break *0x8048e19
break *0x8048e32
break *0x8048e6f
break *0x8048e90 
```

所以我想将它们保存在一个文件中，然后告诉 GDB 从这个文件中执行它们。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-09T00:51:58.690

将命令写入文件并使用 -x 开关执行 gdb

```
gdb -x command_file_name 
```

或者如果您不想从命令行指定命令文件，则在 gdb 运行时运行 gdb source 命令

```
>source [-s] [-v] command_file_name 
```****

# jquery - 如何添加“标记照片”按钮以开始标记/结束标记

> ID：14226564
> 
> 赞同：1
> 
> 时间：2013-01-09T00:41:37.023
> 
> 标签：jquery, photo-tagging

我正在使用此处找到的照片标记脚本

[http://www.bryantan.info/jquery/5](http://www.bryantan.info/jquery/5)非常简单的代码。

它工作得很好，但始终处于启用标签模式。如何实现一个“标记照片”按钮，单击该按钮将启用标记，否则，标记将被禁用。此外，完成标记后，可以单击此按钮以关闭标记。

就像脸书标签一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:52:35.260

You need a `var` that will toggle a `Boolean` value initially set to `false`.
Return your image clicks if that value is `false` :)
here is how to do it:

## [jsBin demo (with basic button functionality)](http://jsbin.com/ucacor/3/edit)

```
var tagEditing = false; // create this line 
```

than add a button somewhere like:

```
<button id="startTag">Start tagging</button> 
```

than add into this an `if` statement:

```
$('#tagit #btnsave').live('click',function(){

  if( !tagEditing ){
       return;
  }

  name = $('#tagname').val();
  counter++;
  $('#taglist ol').append('<li rel="'+counter+'"><a>'+name+'</a> (<a class="remove">Remove</a>)</li>');
  $('#imgtag').append('<div class="tagview" id="view_'+counter+'"></div>');
  $('#view_' + counter).css({top:mouseY,left:mouseX});
  $('#tagit').fadeOut();
  // add backend code here, use mouseX and mouseY for the axis and counter.
  // ............

}); 
```

Now you just need to toggle your `tagEditing` var, button text and image cursor style:

```
$('#startTag').click(function(){
   tagEditing = !tagEditing;

   $('#imgtag').css({cursor: tagEditing? 'crosshair' : 'default' });
   $(this).text(tagEditing? 'End tagging':'Start tagging');
}); 
```

and also on upload :

```
$('#yourUploadButton').click(function(){

    tagEditing = false;

}); 
```

Additionally if var `tagEditing == false` you'd like to change the image cursor style from `crosshair` to `default` (look in the demo to see how)

# mysql - MySQL基于另一个表多次插入可变数量的行

> ID：14226569
> 
> 赞同：1
> 
> 时间：2013-01-09T00:42:04.330
> 
> 标签：mysql, sql, insert, subquery

我有 3 张表，一张称为订阅者，一张称为用户，一张称为博客。他们每个人看起来都如下。

```
CREATE TABLE IF NOT EXISTS `subscribers` (
   `user_id` int(11) NOT NULL,
   `blog_id` int(11) NOT NULL,
);

CREATE TABLE IF NOT EXISTS `users` (
    `id` int(11) NOT NULL,
    `name` varchar(255)
);

CREATE TABLE IF NOT EXISTS `blogs` (
    `id` int(11) NOT NULL,
    `name` varchar(255),
    `user_id` int(11)
); 
```

我有一个 API 自动在我们的数据库中创建博客记录的情况，这些自动创建的博客都分配了相同的用户 ID（在本例中为 123），以便知道它们确实来自并属于导入 API。现在，需要为这些源自 API 的博客创建一个用户来管理它们。我使用基本插入创建了用户 123，但现在我必须通过插入或一系列插入为该用户订阅他们拥有的每个博客。我想知道是否可以通过一个查询来做到这一点。像这样的东西，但我意识到我写的东西行不通：

```
INSERT INTO `subscribers` (`user_id`,`blog_id`) 
VALUES 
(123, (SELECT id FROM `blogs` WHERE `user_id` = 123)); 
```

是否可以以某种方式基于可变数量的行进行多插入，我已经研究过，但我还找不到答案。感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T00:44:06.877

这是如何做到的：

```
INSERT INTO `subscribers` (`user_id`,`blog_id`) 
   SELECT 123, id FROM `blogs` WHERE `user_id` = 123; 
```

甚至

```
INSERT INTO `subscribers` (`user_id`,`blog_id`) 
   SELECT user_id, id FROM `blogs` WHERE `user_id` = 123; 
```

# perl - 如何以不同的方式从 Perl 模块调用相同的子程序？什么是 Perl 模块“默认模式”？

> ID：14226573
> 
> 赞同：0
> 
> 时间：2013-01-09T00:42:34.907
> 
> 标签：perl, wrapper, perl-module, overloading

我编写了一个 perl 模块（比如`foo`），带有一个主要子例程（比如`f()`），我想以两种方式使用它：

1.  导入模块，然后从脚本导入模块中`foo`调用 sub 。`f(...)``foo`
2.  只需导入模块`foo`并获取模块`foo`来调用子`f(@ARGV)`或一些适当的变体。

我可以制作一个具有这两个选项的模块，
还是
我应该制作一个*包装模块*，比如说`foo_default.pm`，它将`use foo`然后调用`foo::f(@ARGV)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:46:46.657

## 经典之道

如果您不想提供函数的*完全限定名称*，您应该`export`：

```
package foo;
require Exporter;
@ISA = qw(Exporter);
@EXPORT = qw/func1 func2/;

sub func1 { return "hi $_[0] !\n"; }
sub func2 { return "yo breakdown mama !\n"; } 
```

所以要使用它：

```
# uncomment this if you need to add a "./lib" dir in @INC
# BEGIN{ push @INC, "./lib"; }

use foo;

my $res = func1("you");
print $res; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:04:14.457

示例 foo 模块：

```
package foo;

my $nodef = 0;

sub import {
  my ($package, $arg) = @_; 
  print "import called $arg\n";
  $nodef = 1 if (defined $arg && $arg eq 'nodef');
  f(@ARGV) if !$nodef;
}

sub f() {
  print "f() called: ", join(", ", @_), "\n";
}

1; 
```

和用例：

```
sub def {
  use foo;
}

sub nodef {
  use foo qw(nodef);
}

def();
nodef(); 
```

# r - 从 data.frame 中“解包”一个因子列表

> ID：14226575
> 
> 赞同：6
> 
> 时间：2013-01-09T00:42:50.737
> 
> 标签：r, dataframe, reshape2

我是 R 新手/可以选择轻松地重新组织数据，并且一直在寻找解决方案，但找不到我想要做的事情。Reshape2 的熔化/铸造似乎不太奏效，而且我对 plyr 的掌握还不够好，无法将其考虑在内。

基本上我有一个具有下面概述的结构的data.frame，其中每个元素都是一个可变长度的类别列表（更紧凑，因为# 列更大，我实际上有多个我想要的category_lists喜欢分开）：

```
>mydf
       ID      category_list    xval    yval
1     ID1   cat1, cat2, cat3   xnum1   ynum1
2     ID2         cat2, cat3   xnum2   ynum2
3     ID3               cat1   xnum3   ynum3 
```

我想将类别作为因素（以及相关的值，即第 3/4 列）进行操作，所以我认为我最终需要这样的东西，其中 ID 和 x/y/其他列值根据类别列表的长度：

```
 ID           category    xval    yval
1     ID1               cat1   xnum1   ynum1
2     ID1               cat2   xnum1   ynum1
3     ID1               cat3   xnum1   ynum1
4     ID2               cat2   xnum2   ynum2
5     ID2               cat3   xnum2   ynum2
6     ID3               cat3   xnum2   ynum2 
```

如果 category_list 上的因子/方面有另一个解决方案，那将是一个更简单的解决方案，但我没有遇到支持此的方法，例如以下引发错误

```
>ggplot(mydf, aes(x=x, y=y)) + geom_point() + facet_grid(~cat_list) 
```

> layout_base(data, cols, drop = drop) 中的错误：至少一层必须包含用于分面的所有变量

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T01:03:26.143

答案将取决于`category_list`. 如果实际上它是`list`每一行的

就像是

```
mydf <- data.frame(ID = paste0('ID',1:3), 
 category_list = I(list(c('cat1','cat2','cat3'),  c('cat2','cat3'), c('cat1'))), 
 xval = 1:3, yval = 1:3) 
```

或者

```
library(data.table)
mydf <- as.data.frame(data.table(ID = paste0('ID',1:3), 
 category_list = list(c('cat1','cat2','cat3'),  c('cat2','cat3'), c('cat1')), 
 xval = 1:3, yval = 1:3) ) 
```

然后你可以使用`plyr`and`merge`来创建你的长表单数据

```
 newdf <- merge(mydf, ddply(mydf, .(ID), summarize, cat_list = unlist(category_list)), by = 'ID')

   ID    category_list xval yval cat_list
1 ID1 cat1, cat2, cat3    1    1     cat1
2 ID1 cat1, cat2, cat3    1    1     cat2
3 ID1 cat1, cat2, cat3    1    1     cat3
4 ID2       cat2, cat3    2    2     cat2
5 ID2       cat2, cat3    2    2     cat3
6 ID3             cat1    3    3     cat1 
```

或不需要的非 plyr 方法`merge`

```
 do.call(rbind,lapply(split(mydf, mydf$ID), transform, cat_list = unlist(category_list))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T00:56:50.490

一个缓慢但看似强大的解决方案：

```
## Some example data
df <- as.data.frame(cbind(ID = paste0("ID", 1:2), 
                          category_list = list(4:1, 2:3), 
                          xvar = 8:9, 
                          yvar = 10:9))

## Calculate number of times each row of df will be repeated 
nn <- sapply(df$category_list, length)  
ii <- rep(seq_along(nn), times=nn)       

## Reshape data.frame
transform(df[ii,], 
          category = unlist(df$category_list),
          category_list = NULL, 
          row.names = NULL)
#    ID xvar yvar category
# 1 ID1    8   10        4
# 2 ID1    8   10        3
# 3 ID1    8   10        2
# 4 ID1    8   10        1
# 5 ID2    9    9        2
# 6 ID2    9    9        3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T00:52:38.910

一个潜在可能：

```
x <- read.table(textConnection('
    ID      category_list    xval    yval
     ID1   "cat1, cat2, cat3"   xnum1   ynum1
     ID2         "cat2, cat3"   xnum2   ynum2
     ID3               "cat1"   xnum3   ynum3'),
          header=TRUE,stringsAsFactors=FALSE)

library(plyr)
ddply(x,"ID",transform,category=strsplit(category_list,",")[[1]])

##    ID    category_list  xval  yval category
## 1 ID1 cat1, cat2, cat3 xnum1 ynum1     cat1
## 2 ID1 cat1, cat2, cat3 xnum1 ynum1     cat2
## 3 ID1 cat1, cat2, cat3 xnum1 ynum1     cat3
## 4 ID2       cat2, cat3 xnum2 ynum2     cat2
## 5 ID2       cat2, cat3 xnum2 ynum2     cat3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T01:10:26.973

这将是一种非 plyr 方法：

```
cbind( x[ rep(1:nrow(x), 
              times=sapply(x$category_list, 
                            function(xx) sapply( strsplit(xx, ","), length) ) ),
          -2],    # to get rid of the old category column
       new_cats = unlist( strsplit(x$category_list, ",") ) )
 # this used Bolker's example. If these are factor will need to add `as.character`

     ID  xval  yval new_cats
1   ID1 xnum1 ynum1     cat1
1.1 ID1 xnum1 ynum1     cat2
1.2 ID1 xnum1 ynum1     cat3
2   ID2 xnum2 ynum2     cat2
2.1 ID2 xnum2 ynum2     cat3
3   ID3 xnum3 ynum3     cat1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T01:35:26.913

使用 的另一种基本 R 可能性`by`：

```
do.call(rbind,
by(mydf,
   mydf$ID,
   function(x) {
     data.frame(
                ID=x$ID,
                category_list = unlist(strsplit(x$category_list,",")),
                xval=x$xval,
                yval=x$yval
               ) 
   }
  )
) 
```

结果：

```
 ID category_list  xval  yval
ID1.1 ID1          cat1 xnum1 ynum1
ID1.2 ID1          cat2 xnum1 ynum1
ID1.3 ID1          cat3 xnum1 ynum1
ID2.1 ID2          cat2 xnum2 ynum2
ID2.2 ID2          cat3 xnum2 ynum2
ID3   ID3          cat1 xnum3 ynum3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T05:00:54.277

注意：*原始答案已删除，因为我的答案基于与 OP 实际拥有的数据结构不同的数据结构。*

* * *

### 场景 1：列是`list`

使用@mnel 的样本数据：

```
mydf <- data.frame(ID = paste0('ID',1:3), 
 category_list = I(list(c('cat1','cat2','cat3'),  c('cat2','cat3'), c('cat1'))), 
 xval = 1:3, yval = 1:3) 
```

***`listCol_l`从我的“splitstackshape”包中使用***

```
library(splitstackshape)
listCol_l(mydf, "category_list")
#     ID xval yval category_list_ul
# 1: ID1    1    1             cat1
# 2: ID1    1    1             cat2
# 3: ID1    1    1             cat3
# 4: ID2    2    2             cat2
# 5: ID2    2    2             cat3
# 6: ID3    3    3             cat1 
```

***`unnest`从“tidyr”包中使用***

```
library(tidyr)
unnest(mydf, "category_list")
#    ID category_list xval yval
# 1 ID1          cat1    1    1
# 2 ID1          cat2    1    1
# 3 ID1          cat3    1    1
# 4 ID2          cat2    2    2
# 5 ID2          cat3    2    2
# 6 ID3          cat1    3    3 
```

* * *

### 场景 2：列是串联的字符串

使用@BenBolker 的样本数据：

```
x <- read.table(textConnection('
    ID      category_list    xval    yval
     ID1   "cat1, cat2, cat3"   xnum1   ynum1
     ID2         "cat2, cat3"   xnum2   ynum2
     ID3               "cat1"   xnum3   ynum3'),
                header=TRUE,stringsAsFactors=FALSE) 
```

***`cSplit`从我的“splitstackshape”包中使用***

```
library(splitstackshape)
cSplit(x, "category_list", ",", "long")
#     ID category_list  xval  yval
# 1: ID1          cat1 xnum1 ynum1
# 2: ID1          cat2 xnum1 ynum1
# 3: ID1          cat3 xnum1 ynum1
# 4: ID2          cat2 xnum2 ynum2
# 5: ID2          cat3 xnum2 ynum2
# 6: ID3          cat1 xnum3 ynum3 
```

# haskell - 存储在变量中之前对用户 getLine 结果的操作（Haskell）

> ID：14226577
> 
> 赞同：1
> 
> 时间：2013-01-09T00:43:23.127
> 
> 标签：haskell

这是我的代码：

```
askPointer = do
  input <- getLine
  let newInput = map toUpper input
  [..here I will re-use new Input..]
  return () 
```

是否有可能（可能使用兰巴符号）仅在一行中缩短此代码？

我的尝试没有成功：

```
input <- (\a b-> do toUpper (b <- getLine ) ) 
```

有什么建议吗？

编辑：稍加编辑以使这个问题寻找更通用的答案（不限于返回函数）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T01:27:13.487

在使用之前将函数应用于 IO 操作的结果是很好的描述`fmap`。

```
askPointer = do
  newInput <- fmap (map toUpper) getLine
  [..here I will re-use new Input..]
  return () 
```

所以这里`fmap`完全符合您的要求 - 它适用`map toUpper`于`getLine`您将其绑定到`newInput`.

在您的解释器中尝试这些（ghci/hugs）：

1.  `fmap reverse getLine`
2.  `fmap tail getLine`
3.  `fmap head getLine`
4.  `fmap (map toUpper) getLine`

如果你`import Data.Functor`或，你可以使用 ,的`import Control.Applicative`中缀版本`fmap`：`<$>`

1.  `reverse <$> getLine`
2.  `tail <$> getLine`
3.  `head <$> getLine`
4.  `map toUpper <$> getLine`

这意味着你也可以写

```
askPointer = do
  newInput <- map toUpper <$> getLine
  [..here I will re-use new Input..]
  return () 
```

`fmap`确实是一个非常有用的功能。[您可以在关于 fmap](https://stackoverflow.com/questions/13134825/how-do-functors-work-in-haskell/13137359#13137359)的其他答案中阅读更多内容，我最终在其中编写了一个迷你教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T00:50:51.943

这应该有效：

```
askPointer = getLine >>= return . map toUpper 
```

如果你`import Control.Applicative`可以让它更短：

```
askPointer = map toUpper <$> getLine 
```

考虑到上次编辑：

```
input <- getLine >>= return . map toUpper 
```

或者

```
input <- map toUpper <$> getLine 
```

# c# - 将总和添加到计时器

> ID：14226578
> 
> 赞同：0
> 
> 时间：2013-01-09T00:43:54.013
> 
> 标签：c#, timer, sum

我想知道如何创建一个`sum + 1`每 5 秒添加一次的标签？我尝试过使用 if 循环，但不幸的是它在一秒钟后重置。感谢您的关注

```
using System.Diagnostics;
// using system.diagnotics voor stopwatch 

namespace WindowsFormsApplication7
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();                
        }

        private Stopwatch sw = new Stopwatch();

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Enabled = true;
            sw.Start();

            if (timer1.Enabled == true) { button1.Text = "stop"; }
            else { button1.Text = "false"; sw.Stop(); }

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            int hours = sw.Elapsed.Hours;
            int minutes = sw.Elapsed.Minutes;
            int seconds = sw.Elapsed.Seconds;
            int sum = 0; 
            label1.Text = hours + ":" ;
            if (minutes < 10) { label1.Text += "0" + minutes + ":"; }
            else { label1.Text += minutes + ":"; }

            if (seconds < 10) { label1.Text += "0" + seconds ; }
            else { label1.Text += seconds ; }

            if (seconds ==5) { sum = sum +=1; }

            label2.Text = Convert.ToString(sum);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T00:46:36.257

`sum`应该是一个类字段。您也可以为经过的时间跨度使用自定义格式字符串。

```
 int sum = 0;

    private void timer1_Tick(object sender, EventArgs e)
    {
        // int sum = 0; local variable will be set to zero on each timer tick
        label1.Text = sw.Elapsed.ToString(@"hh\:mm\:ss");

        // btw this will not update sum each five seconds
        if (sw.Elapsed.Seconds == 5) 
            sum++; // same as sum = sum +=1;

        label2.Text = sum.ToString();
    } 
```

仅当当前经过的超时的第二个值为 5 时，您当前的实现才会增加总和。这永远不会发生（取决于您的计时器间隔）。如果您将计时器间隔设置为 1000 毫秒，那么您可以在每个刻度上增加 sum，但设置`label2.Text = (sum % 5).ToString()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:51:22.513

every time your stopwatch TICKS, sum is inside TICK and it will reset and start from

```
int sum=0; 
```

so try to make sum variable GLOBAL outside timer1_Tick event and it will continue increasing.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T00:48:51.790

您将不得不`sum`退出计时器回调，因为每次计时器经过时都将其设置为 0

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private int sum = 0;
    private DateTime lastUpdate;
    private Stopwatch sw = new Stopwatch();

    private void timer1_Tick(object sender, EventArgs e)
    {
        label1.Text = string.Format("{0:00}:{1:00}:{2:00}",
                      sw.Elapsed.Hours, sw.Elapsed.Minutes, sw.Elapsed.Seconds);

        if (DateTime.Now >= lastUpdate.AddSeconds(5))
        {
            sum++;
            lastUpdate = DateTime.Now;
            label2.Text = sum.ToString();
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (timer1.Enabled == true)
        {
            sw.Stop(); 
            button1.Text = "stop";
        }
        else 
        {
            sum = 0;
            lastUpdate = DateTime.Now;
            timer1.Enabled = true;
            sw.Start();
            button1.Text = "Start"; 
        }
    } 
```

# mysql - MySQL：将另一个表中的值插入一列

> ID：14226585
> 
> 赞同：7
> 
> 时间：2013-01-09T00:44:55.970
> 
> 标签：mysql

我想使用 MySQL 将项目从一个表移动到另一个表。

这是我目前使用的：

```
INSERT INTO items_rooms (item_id, room_id,x,y,n)  
SELECT id, room_id,x,y,z
  FROM `items_phoenix` 
```

这可行，但是我想将多个值插入一列而不是不同列中的每个值。

例如：

在表 items_rooms 中，我希望将 items_phoenix 中的值 x 和 y 放入 items_rooms 的一列中。

如果 x = 5 和 y = 2，我可以像这样将其保存到 items_rooms 中：一列：5.2 而不是每个值的不同列？

对不起，如果这令人困惑！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T00:48:48.717

您可以在 SELECT 列列表中使用表达式。只要选择列表中的列和目标表中的列在数量和数据类型上匹配，您就可以执行以下操作：

```
INSERT INTO items_rooms (item_id, room_id, x_dot_y, n)  
SELECT id, room_id, CONCAT(x,'.',y), z
  FROM `items_phoenix` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:49:08.370

您可以对简单的情况使用串联，例如：

```
INSERT INTO items_rooms (
  item_id,
  room_id,
  x_and_y,
  n)
SELECT
  id,
  room_id,
  CONCAT(x, '.', y),
  z
FROM `items_phoenix` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:50:35.807

是的，如果该列可以存储文本信息

只是`CONCAT`或`CONCAT_WS`价值观

```
INSERT INTO items_rooms ( item_id, room_id, my_value, n )
SELECT id, room_id, CONCAT_WS( '.', x, y ), z
FROM `items_phoenix` 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/28c21/5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T00:51:34.483

你绝对*可以*做到这一点。请参阅有关此的有用答案。但是，您应该考虑这是否是一个好主意。一旦你将不同的列非规范化为某一列中的某种字符串表达式，你就创建了一些很难维护和查询的东西。这样做会使您的数据对您自己的可用性降低。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-09T00:53:14.680

```
$table_To_Get_From = mysql_query("SELECT * FROM items_phoenix (id, room_id,x,y,z)");
if($table_To_Get_From){
    $table = mysql_fetch_assoc($table_To_Get_From);
    $values = array($table['id'],$table['room_id'],$table['x'],$table['y'],$table['z']);
    mysql_query("INSERT INTO items_rooms (item_id, room_id,x,y,n)  
        VALUES ($values[0],$values[1],$values[2],$values[3],$value[4])");
} 
```

我没有将它们设为字符串，因此您可能需要使用 '$values[num]'

如果有任何值，这将像您想要的那样插入它。

# list - 使用 foldl 删除重复项

> ID：14226587
> 
> 赞同：0
> 
> 时间：2013-01-09T00:45:05.227
> 
> 标签：list, haskell, duplicates, duplicate-removal, fold

我正在尝试编写 , 函数的实现`remdps`，该函数会删除列表中最近的重复项。例如：`"aaabbbsscaa"`应该变成`"absca"`. 我必须使用`foldl`. 这是我的尝试：

```
helper :: Eq a => [a] -> a -> [a]
helper [] ele = [ele]
helper newlist ele = if tail newlist /= ele then newlist:ele
    else newlist

remdps :: Eq a => [a] -> [a]
remdps list = foldl helper [] list

main = putStrLn (show (remdps "aabssscdddeaffff")) 
```

和错误：

```
4.hs:4:41:
    Could not deduce (a ~ [a])
    from the context (Eq a)
      bound by the type signature for helper :: Eq a => [a] -> a -> [a]
      at 4.hs:2:11-33
      `a' is a rigid type variable bound by
          the type signature for helper :: Eq a => [a] -> a -> [a]
          at 4.hs:2:11
    In the second argument of `(/=)', namely `ele'
    In the expression: tail newlist /= ele
    In the expression:
      if tail newlist /= ele then newlist : ele else newlist

4.hs:4:50:
    Could not deduce (a ~ [a])
    from the context (Eq a)
      bound by the type signature for helper :: Eq a => [a] -> a -> [a]
      at 4.hs:2:11-33
      `a' is a rigid type variable bound by
          the type signature for helper :: Eq a => [a] -> a -> [a]
          at 4.hs:2:11
    In the first argument of `(:)', namely `newlist'
    In the expression: newlist : ele
    In the expression:
      if tail newlist /= ele then newlist : ele else newlist

4.hs:4:58:
    Could not deduce (a ~ [a])
    from the context (Eq a)
      bound by the type signature for helper :: Eq a => [a] -> a -> [a]
      at 4.hs:2:11-33
      `a' is a rigid type variable bound by
          the type signature for helper :: Eq a => [a] -> a -> [a]
          at 4.hs:2:11
    In the second argument of `(:)', namely `ele'
    In the expression: newlist : ele
    In the expression:
      if tail newlist /= ele then newlist : ele else newlist
fish: Unknown command './4'
ghc 4.hs; and ./4 
```

问题总是一样的:)。怎么了？

//编辑

好的，我有一个工作代码。它使用`reverse`and `++`，所以非常难看:)。

```
helper :: Eq a => [a] -> a -> [a]
helper [] ele = [ele]
helper newlist ele = if head (reverse newlist) /= ele then newlist ++ [ele]
    else newlist

remdps :: Eq a => [a] -> [a]
remdps list = foldl helper [] list

main = putStrLn (show (remdps "aabssscdddeaffff")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:16:55.413

你可能想要做的是：

```
helper :: Eq a => [a] -> a -> [a]
helper [] ele = [ele]
helper newlist ele = if last newlist /= ele then newlist ++ [ele]
    else newlist 
```

变化：

*   `:`仅以一种方式起作用：左侧是列表的头部（type `a`），右侧是尾部（type `[a]`）。它有时也被称为“缺点”。你想要做的叫做“snoc”：它的右边是列表的最后一个元素（type `a`），左边是初始部分（type `[a]`）。

    Prelude 中不存在“snoc”，因此，您只需以不同的方式编写它：`newlist ++ [ele]`. （将此与 进行比较`x : xs == [x] ++ xs`。）

*   `tail newlist == ele`变成`last newlist == ele`. `tail`获取没有头部的列表，但您想比较`newlist`. 为此，您拥有`last`. （顺便说一句，要获取列表的初始部分，您可以使用`init`。）

~~请注意，您还交换了 if 语句的分支，`aaa`将答案留给您。~~-edit- 我看到你现在已经更新了；）

* * *

另请注意，这是一种非常缓慢的方法。`last`随着答案的增长，每个“snoc”都会花费更长的时间`remdps`，因为 Prelude 列表在“cons”和`head`. 尝试重写该函数，使其改用“cons”。提示：你会`reverse`在某个时候需要。

此外，由于工作方式的原因，此函数在与无限列表一起使用时将不起作用`foldl`。重写这个函数来`foldr`代替使用可能是一个有趣的练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:05:04.880

helper 的类型注释表明 **ele**属于**a 类型**
并且您执行以下测试**(tail(newlist) == ele)**，但 tail if 属于**[a] 类型**

如果类型不同，则无法比较两个值。

这不是唯一的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:19:47.420

我建议您查看[Data.List](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)的文档。特别是`tail`你会看到类型是`[a] -> [a]`，所以很明显它不会像人们想象的那样返回列表的最后一个元素。

如果您想从列表（最后一个）中获取单个元素，则需要带有 type 的东西`[a] -> a`。haskell 的强大之处在于这些信息几乎足以找到正确的功能。

就[胡歌吧！](http://www.haskell.org/hoogle/?hoogle=%5ba%5d+-%3E+a)

PS 作为旁注 - 这种方法很慢，正如 Tinctorius 的回答中提到的那样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T01:24:54.730

为了扩展我的第二条评论，虽然这不能回答你提出的问题，但我不`foldl`会这样做。回到我的计划时代，我会用我的这个宠物`kfoldr`功能来解决它​​，我在这里翻译成 Haskell：

```
-- |  A special fold that gives you both left and right context at each right
-- fold step.  See the example below.
kfoldr :: (l -> a -> l) -> l -> (l -> a -> r -> r) -> (l -> r) -> [a] -> r
kfoldr advance left combine seedRight [] = seedRight left
kfoldr advance left combine seedRight (x:xs) = combine left x (subfold xs)
where subfold = let newLeft = advance left x 
                in newLeft `seq` kfoldr advance newLeft combine seedRight

removeDuplicates :: Eq a => [a] -> [a]
removeDuplicates = kfoldr advance Nothing step (const [])
    where 
      -- advance is the left context generator, which in this case just 
      -- produces the previous element at each position.
      advance _ x = Just x
      -- step's three arguments in this case are:
      --   (a) the element to the left of current
      --   (b) the current element
      --   (c) the solution for the rest of the list
      step Nothing x xs = x:xs
      step (Just x') x xs
           | x == x' = xs
           | otherwise = x:xs 
```

Haskell 的`Data.List`库有`mapAccumL`和`mapAccumR`相似，但它们映射而不是折叠。还有密切相关的`scanl`and `scanr`，可能可以用来实现`kfoldr`（但我懒得尝试）。

# android - 有没有办法让文本完美居中？

> ID：14226588
> 
> 赞同：6
> 
> 时间：2013-01-09T00:45:44.790
> 
> 标签：android, textview

我想知道是否有可能创建一个自定义 TextView 使文本完美居中，无论字体是什么。这是我现在的主要问题，但我也想知道是否可以使用像素设置特定高度，以便高度也保持一致。 ![比较文本字体](../Images/0921dcb446454d59e9d23b4ada5448fd.png) 这张图片显示了不同字体的大小和居中。图片中最长的黑线是空白区域的中间。除了字体之外，图片中的字母在各方面都是相同的。文本大小相同 ( `text.setTextSize(TypedValue.COMPLEX_UNIT_PX, 450);`)，并且它们都居中。我希望有人知道这些问题的答案！如果您需要我的应用程序中的任何代码，请询问。谢谢！

编辑：我知道`android:gravity="veritcal_center"`，但这仅在一定程度上有效。您在上面看到的是在 中实现的`textview`，但每种字体都有不同的重心，因此`android:gravity="veritcal_center"`不会真正使所有这些中心完美地沿着屏幕。我正在寻找一种创建自定义的方法，该自定义`textView`以某种方式测量文本的高度并以这些参数为中心。@vmironov 在评论中的建议有效，但前提是`textview`有一个字符。我一直无法弄乱他的代码，但是当我有机会时我会这样做，如果我发现任何东西，我会在这里发布。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:24:56.270

实现您想要的一个简单方法是使用以下代码：

```
<LinearLayout 
        android:layout_width="100dp"
        android:layout_height="20dp"
        android:gravity="center">

        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="18sp"
                android:text="@string/your_text" />
</LinearLayout> 
```

如果要将文本设置为在恒定的高度和宽度内居中对齐，请将 LinearLayout 的高度和宽度值设置为固定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:25:06.210

将视图的重力设置为“center_vertical”。就像是 ：

```
android:gravity="center_vertical" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T00:59:07.867

您应该能够通过将重力属性应用到包含的 TextView 来使文本居中。

在 XML 中，您可以为 TextView 分配一个属性，如下所示：

```
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:textSize="18sp"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:text="@string/some_text" /> 
```

如果您确实想为文本指定特定大小，强烈建议您使用 SP（缩放像素）作为度量单位，而不是像素。您还可以为您的 TextView 设置一个外观属性来控制大小，这也在代码示例中显示。

# opengl - 将新纹理绑定到现有 FBO

> ID：14226607
> 
> 赞同：0
> 
> 时间：2013-01-09T00:47:29.327
> 
> 标签：opengl, fbo

我希望将新纹理绑定到现有的 FBO。但目前它显着降低了我的速度。

```
 int holdTextureId = glGenTextures();

        glBindTexture(GL_TEXTURE_2D, 0);
        glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, panoramaModelsFboId); 

        glBindTexture(GL_TEXTURE_2D, holdTextureId);                                
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);                   
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);           
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, SAVE_WIDTH, SAVE_HEIGHT, 0,GL_RGBA, GL_INT, (java.nio.ByteBuffer) null);
        glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT,GL_COLOR_ATTACHMENT0_EXT,GL_TEXTURE_2D, holdTextureId, 0);

        glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, panoramaModelsDepthRenderBufferId);              
        glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, SAVE_WIDTH, SAVE_HEIGHT);
        glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT,GL_DEPTH_ATTACHMENT_EXT,GL_RENDERBUFFER_EXT, panoramaModelsDepthRenderBufferId);

  //Rendering starts here..
  // After which I unbind the FBO and use the texture 
```

我有一种感觉 glTexImage2D 是肇事者，所以也许在这个过程开始之前创建纹理是一个想法？另外，我可能不需要每次都创建渲染缓冲区，但您可以节省一些时间并告诉我是否需要 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:59:05.790

性能损失在于调用`glTexImage2D`，这是一个非常昂贵的调用。如果你只是想绑定一个已经存在的纹理，你不需要创建一个新的纹理对象，也不需要重新初始化它。

只要打电话`glFramebufferTexture2D`就够了。无需提前绑定贴图；事实上，纹理不能被绑定用作帧缓冲目标。

# c++ - 内联运算符好吗？

> ID：14226614
> 
> 赞同：15
> 
> 时间：2013-01-09T00:48:25.033
> 
> 标签：c++, operators, inline-method

运算符和其他在 C++ 中进行内联的方法之间有什么区别吗？我已经搜索过了，但正如我所见，这不是一个常见的问题。有没有人有充分的理由使用或避免使用它？注意：显然，我指的是小的内联运算符。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T00:52:59.900

虽然这*可能*因编译器而异，但我希望从编译器的角度来看，运算符只是另一个名称有点不寻常的函数，它允许源代码的语法看起来有点不同。

尽管如此，当编译器的代码生成器部分运行时，我预计重载运算符和另一个函数（执行相同操作）之间的任何差异都会消失。

因此，`inline`在类定义的主体中声明或定义它将与任何其他函数一样具有（很少，取决于您的观点）运算符重载。我通常希望在这两种情况下这种影响都非常小——至少在启用优化时，大多数编译器几乎都会忽略该`inline`关键字，并自行决定要扩展哪些内联（以及哪些不扩展）。

请注意，编译器虽然不能忽略`inline`关键字的一种方式——必须遵守对“单一定义规则”的一些​​特殊修改，无论函数是否实际上是内联扩展的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T00:56:33.443

您可以使用[`inline`](https://en.wikipedia.org/wiki/Inline_function)关键字向编译器*建议*内联函数。

编译器没有义务服从这个要求。

运算符是相似的——它们可能是内联的，也可能不是内联的。

由于不能强制编译器内联，因此可能没有充分的理由使用或避免使用内联提示。因为这就是它们的全部：提示。

在 Visual C++ 中，您可以使用`__forceinline`关键字强制内联，结果是更大的代码和潜在的性能损失。在精心设计的系统中，消除选项（通过强制执行）通常会导致性能下降，这是很常见的。即使你使用这个关键字，也不是每个函数都能成功内联。

[在这里](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)讨论 GCC 内联。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T01:27:29.403

正如其他人提到的，编译器是否“内联”一个方法通常不代表您，关于`inline`关键字的使用和编译器的优化策略。

所以我认为更重要的方面是头文件的可读性，并且`operator`方法可能会出现为例如算术运算实现的集合，其中可以使用简单的转换来构建它们。因此，如果我必须查看这样的头文件，我希望一起查看逻辑相关的运算符方法签名集，以大致了解什么是适用的或不适用的。

一个非常简单的例子是`operator==()`and的实现`operator!=()`：

```
class A
{
public:

    // Equality tests
    //-----------------------------------------------------------------------

    // This may involve some mor complex code that'll look ugly here
    bool operator==(const A& rhs) const;

    // Fine, this is a one liner. Code appears 'inline' (and is likely to be 
    // chosen for inlining by the compiler, no matter if inline keyword or not)
    bool operator!=(const A& rhs) const { return !A::operator==(rhs); }
}; 
```

# activemq - ActiveMQ 监控/记录所有队列中的所有消息

> ID：14226619
> 
> 赞同：0
> 
> 时间：2013-01-09T00:48:49.493
> 
> 标签：activemq

是否有一种简单的方法来记录（可能是部分记录）通过 ActiveMQ 上的所有队列的所有消息？日志拦截器不这样做。

是的，我理解它有点可笑，但它仍然是一个要求。

从骆驼的背景下怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-16T00:12:40.950

我一直在寻找这样的答案，实际上现在有一种相对简单的方法可以做到这一点 - 镜像队列。 [http://activemq.apache.org/mirrored-queues.html](http://activemq.apache.org/mirrored-queues.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:07:11.043

通过使用消息处理程序嵌入骆驼上下文来实现。然后我们窃听我们想要记录的任何队列并让处理程序从队列中消费。处理程序将消息发送到您喜欢的任何数据库。

已记录。

# java - BoxLayout 拒绝尊重 JButton 的首选大小

> ID：14226622
> 
> 赞同：3
> 
> 时间：2013-01-09T00:49:14.750
> 
> 标签：java, swing, jpanel, jbutton, layout-manager

我一直在做一个应该模拟赌博游戏的小项目。不幸的是，我在使用`BoxLayout`. 据我所知，`LayoutManager`s 通常尊重任何组件的首选尺寸。但是，在下面的代码中，`BoxLayout`没有。

到目前为止，这是我的代码：

```
import java.awt.*;
import javax.swing.*;

public class Main 
{
    public static void main(String[] args)
    {
      JFrame.setDefaultLookAndFeelDecorated(true);
      JFrame frame = new JFrame("Suit-Up");
      frame.setContentPane(makeGUI());
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setSize(900,450);
      frame.setLocationRelativeTo(null);
      frame.setResizable(false);
      frame.setVisible(true);
    }

    public static JPanel makeGUI()
    {
      JPanel main = new JPanel();
      main.setMinimumSize(new Dimension(900,450));
      main.setBackground(Color.red);

      JPanel infoPanel = new JPanel();
      infoPanel.setLayout(new BoxLayout(infoPanel, BoxLayout.LINE_AXIS));
      infoPanel.setPreferredSize(new Dimension(900,60));
      infoPanel.setBackground(Color.green);
      main.add(infoPanel);

      JPanel infoText = new JPanel();
      infoText.setLayout(new BoxLayout(infoText, BoxLayout.PAGE_AXIS));
      infoPanel.add(infoText);

      JPanel moneyText = new JPanel();
      moneyText.setLayout(new BoxLayout(moneyText, BoxLayout.LINE_AXIS));
      infoText.add(moneyText);

      JPanel lastGameText = new JPanel();
      lastGameText.setLayout(new BoxLayout(lastGameText, BoxLayout.LINE_AXIS));
      infoText.add(lastGameText);

      JButton playAgain = new JButton("Play Again ($20)");
      playAgain.setPreferredSize(new Dimension(200,60));
      infoPanel.add(playAgain);

      JButton finish = new JButton("End Session");
      finish.setPreferredSize(new Dimension(200,60));
      infoPanel.add(finish);

      JPanel cardPanel = new JPanel();
      cardPanel.setLayout(new BoxLayout(cardPanel, BoxLayout.LINE_AXIS));
      main.add(cardPanel);

      return main;
    }
} 
```

尽管为两个 s 指定了首选大小`JButton`，但它们不会更改其大小。我也试过了`setMaximumSize()`，`setMinimumSize()`但都没有任何效果。

我是否忽略了一些明显的东西，或者这是一个限制`BoxLayout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:05:37.133

*“据我所知，LayoutManagers 通常会尊重任何组件的首选大小”* ——这实际上是不正确的。首选/最小/最大大小只是布局管理器可以用来确定如何最好地布局内容的“提示”。如果他们愿意，允许布局管理器简单地忽略它们。

来自 JavaDocs

> BoxLayout**尝试**以首选的宽度（对于水平布局）或高度（对于垂直布局）排列组件。对于水平布局，如果不是所有组件的高度相同，BoxLayout 会尝试使所有组件与最高组件一样高。如果特定组件无法做到这一点，则 BoxLayout 会根据组件的 Y 对齐方式垂直对齐该组件。默认情况下，组件的 Y 对齐为 0.5，这意味着组件的垂直中心应与其他具有 0.5 Y 对齐的组件的垂直中心具有相同的 Y 坐标。
> 
> 同样，对于垂直布局，BoxLayout 尝试使列中的所有组件与最宽的组件一样宽。如果失败，它会根据它们的 X 对齐方式水平对齐它们。对于 PAGE_AXIS 布局，水平对齐是基于组件的前缘完成的。换句话说，如果容器的 ComponentOrientation 从左到右，则 X 对齐值 0.0 表示组件的左边缘，否则表示组件的右边缘。

# sqlite - Sqlite - 使用自动增量 PID 插入多个表

> ID：14226627
> 
> 赞同：0
> 
> 时间：2013-01-09T00:50:10.707
> 
> 标签：sqlite

我正在使用 SQLite。我有两张桌子：

```
Log:
    pid INTEGER PRIMARY KEY AUTOINCREMENT
    action INTEGER NOT NULL
    .... ect.

ErrorExtras:
    pid INTEGER REFERENCES log(pid)
    msg TEXT,
    request TEXT 
```

现在，当发生错误时，我想插入两者。插入 Log 很容易，因为它会生成 PID，但是，插入 ErrorExtras 更难，因为如果不进行查询我不知道 PID。如果我插入 Log，查询 PID，然后插入 ErrorExtras，这看起来很混乱。这些类型的插入是否有某种捷径？

就我而言，这是可能的，因为日志中的其他信息唯一地标识了 pid（所以有一个组合键），但如果不是这种情况怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:56:15.783

You needn't query for the insert_id, just use the [last_insert_id](http://www.sqlite.org/c3ref/last_insert_rowid.html) in the select statement in `ErrorExtras` and Bob's your uncle.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:08:05.327

如果您可以控制 SQL 命令，则可以像这样使用[`last_insert_rowid`SQL 函数](http://www.sqlite.org/lang_corefunc.html#last_insert_rowid)：

```
INSERT INTO Log(action) VALUES(42);
INSERT INTO ErrorExtras(pid, msg) VALUES(last_insert_rowid(), 'x'); 
```

（但这仅适用于下一个`INSERT`命令，因为之后`last_insert_rowid()`返回记录`rowid`的`ErrorExtras`。）

* * *

如果您使用的是 C API，则可以使用以下[`sqlite3_last_insert_rowid`函数](http://www.sqlite.org/c3ref/last_insert_rowid.html)：

```
sqlite3_prepare_v2(db, "INSERT INTO Log(action) VALUES(42)", -1, &stmt, NULL);
sqlite3_step(stmt);
sqlite3_finalize(stmt);

sqlite3_prepare_v2(db, "INSERT INTO ErrorExtras(pid,msg) VALUES(?,?)", -1, &stmt, NULL);
sqlite3_bind_int64(stmt, 1, sqlite3_last_insert_rowid(db));
sqlite3_bind_text(stmt, 2, "x", -1, SQLITE_TRANSIENT);
sqlite3_step(stmt);
sqlite3_finalize(stmt); 
```

* * *

其他语言的 API 通常也有一些机制来获取最后插入的`rowid`. 例如，在 Android 中，`insert`函数返回它：

```
ContentValues cv = new ContentValues();
cv.put("action", 42);
long log_rowid = db.insert("Log", null, cv);
ContentValues cv = new ContentValues();
cv.put("pid", log_rowid);
cv.put("msg", "x");
db.insert("ErrorExtras", null, cv); 
```

# google-app-engine - golang appengine 内部服务器错误

> ID：14226629
> 
> 赞同：1
> 
> 时间：2013-01-09T00:50:26.373
> 
> 标签：google-app-engine, go, internal-server-error

我正在尝试在 Go on GAE 中开发自定义用户模型/身份验证代码。以下代码是对 demos/guestbook 应用程序中一些代码的简单修改：

```
q := datastore.NewQuery("User").Filter("Email =", email)
users := make([]User, 0, 1)
if _, err := q.GetAll(c, &users); err != nil {
   http.Error(w, err.Error(), http.StatusInternalServerError)
   return
} 
```

从表单中提取电子邮件的位置。它只是使用给定的电子邮件查询用户的数据存储。如果拥有电子邮件的用户存在，则它可以正常工作，如果不存在，则会因“内部服务器错误”页面而死。我不明白的是（我猜是关于 Go 中的错误处理，或者可能是数据存储查询），这就是为什么我不能在那个`if error`块内做任何其他事情。像这样的轻微mod：

```
if _, err := q.GetAll(c, &users); err != nil {
   fmt.Fprintf(w, "%s\n", "user not found")
} 
```

生成相同的“内部服务器错误”页面，而不是仅打印“未找到用户”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:16:25.143

很难在没有看到其余代码的情况下说出来，但要点是，当您说：

```
if _, err := q.GetAll(c, &users); err != nil {
   fmt.Fprintf(w, "%s\n", "user not found")
} 
```

只有在查询过程中出现错误时才会触发内部语句，如果查询没有返回任何内容，则不会触发内部语句。因此，您实际上并没有输入该代码块-我最好的猜测（没有看到代码）是您`Internal Server Error`在其他地方被触发，也许在您将`users`其视为包含数据的变量的地方。如果您想在没有匹配用户的情况下打印出该消息，您可以执行一些简单的操作，例如检查响应的长度 - 如果是`0`，则不返回任何结果，您可以打印您的消息：

```
 if len(users) == 0 {
         fmt.Fprintf(w, "%s\n", "user not found")
     } 
```

可能有一种更惯用的方式，但我相信这将适用于您的情况（它会按照您在那里的说明打印 - 您可能希望以不同的方式处理它）。

# xcode - iOS 5/5.1 上显示的按钮背景而不是我的背景？

> ID：14226632
> 
> 赞同：0
> 
> 时间：2013-01-09T00:50:34.683
> 
> 标签：xcode, uibutton, interface-builder, xib

所以在我正在创建的应用程序中，当它在模拟器中运行时，我看到的是白色背景图像，而不是我设置的透明背景。这是与 XIB 而不是故事板的重要性。

示例：iOS 5.1 及以下： ![iOS <5.1](../Images/2800ecd7f7dc32aa42c8fd71c30648c0.png)

iOS 6 及更高版本： ![iOS 6](../Images/02c4653272f2ad2776d1c2750fcc9fb2.png)

有谁知道为什么会这样以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:56:09.567

我解决了这个问题，而不是使用透明背景 png，将按钮类型设置为自定义，而不是圆角矩形。这解决了显示白色背景的问题。

# xaml - 如何设置按钮的背景而不闪烁？

> ID：14226634
> 
> 赞同：1
> 
> 时间：2013-01-09T00:50:36.470
> 
> 标签：xaml, windows-8, windows-runtime

我正在尝试将按钮的背景更改为图像源。当我们导航到页面时，我想将该图像加载到内存中，以便它在第一次显示时不会闪烁。

在 Windows Phone 上，我可以这样创建图像源：

```
 StreamResourceInfo resourceInfo = Application.GetResourceStream(uri);
  BitmapImage bitmapSource = new BitmapImage();

  // Avoid flicker by not delay-loading.
  bitmapSource.CreateOptions = BitmapCreateOptions.None;

  bitmapSource.SetSource(resourceInfo.Stream);

  imageSource = bitmapSource; 
```

我在我的 Windows 8 应用商店应用中尝试了类似的东西：

```
 BitmapImage bitmapSource = new BitmapImage();
  bitmapSource.CreateOptions = BitmapCreateOptions.None;
  bitmapSource.UriSource = uri;
  imageSource = bitmapSource; 
```

但同样的问题也会发生。该按钮已经具有作为背景的不同图像，并且在某个事件中我希望它更改为新背景。但是当我更改源时，会观察到明显的闪烁。我假设这是因为图像尚未在内存中，因为第二次修改图像源时问题就消失了。

有人知道解决方案吗？我需要以某种方式强制加载此图像。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:24:46.057

如果您`SetSourceAsync`在 BitmapImage 上使用该方法并在将其附加到图像源之前等待它，您应该不会看到闪烁：-

```
// Ensure the stream is disposed once the image is loaded
using (IRandomAccessStream fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read))
{
    // Set the image source to the selected bitmap
    BitmapImage bitmapImage = new BitmapImage();
    await bitmapImage.SetSourceAsync(fileStream);
    imageSource  = bitmapImage;
} 
```

[MSDN](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.ui.xaml.media.imaging.bitmapsource.setsourceasync)文档对此有更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:27:25.750

谢谢罗斯，但我最终做的是通过使用与上面类似的代码预加载了我需要的半打左右的位图，当然除了资源。我在页面加载时异步执行此操作，然后在按钮背景上设置 ImageSource 时，我使用了已经预加载的位图。这样我就知道我没有为位图的每个*实例分配新的内存块。*

# c# - Windows 窗体列表视图最小列宽

> ID：14226635
> 
> 赞同：6
> 
> 时间：2013-01-09T00:50:37.057
> 
> 标签：c#, winforms, listview

我的应用程序看起来像将宽度停止在 50，但如果将鼠标进一步拖动然后放开，宽度将低于：

```
private void ListView1_ColumnWidthChanging(object sender, ColumnWidthChangingEventArgs e)
{
    if (e.ColumnIndex ==0 & e.NewWidth <50)
    {
        e.Cancel = true;
    }
} 
```

`ColumnWidthChanged`如果`changed width = < 50`. _ 我不需要固定列宽，因为信息的长度会有所不同，但会强制设置最小宽度。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T01:15:19.540

如果您想在用户完成拖动列分隔符*后更改宽度，您可以这样做*

```
private const int _minimumColumnWidth = 50;

private void ListView1_ColumnWidthChanged(object sender, ColumnWidthChangedEventArgs e)
{
     if (ListView1.Columns[e.ColumnIndex].Width < _minimumColumnWidth)
     {
          ListView1.Columns[e.ColumnIndex].Width = _minimumColumnWidth;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:47:34.323

[Better ListView](http://www.componentowl.com/better-listview)和[Better ListView Express](http://www.componentowl.com/better-listview-express)（免费）组件在列标题上有一些有用的属性：

```
betterListView.Columns[0].MinimumWidth = 50; 
```

还有**MaximumWidth**和**AllowResize**。

# wpf - 处理 MultiBinding 中绑定的 bool 回退值

> ID：14226638
> 
> 赞同：3
> 
> 时间：2013-01-09T00:50:54.933
> 
> 标签：wpf, xaml, binding, multibinding, fallbackvalue

我有一个`MultiBinding`转换器，它根据我的两个 Binding 字段是否都评估为 true 来确定控件的可见性。如果由于某种原因它无法达到这些布尔属性中的任何一个，我想将它们设置为评估为真。例如：

我目前拥有的代码是：

```
 <MultiBinding Converter="{StaticResource AndToVisibilityConverter1}" FallbackValue="Visible">
              <Binding Path="IsConnected" FallbackValue="true" />
              <Binding Path="CurrentUser.IsConsumerOnlyAgent" Converter="{StaticResource InvertedBooleanConverter1}" FallbackValue="True" />
           </MultiBinding> 
```

代码运行良好，但是我在 IDE 的输出中收到错误消息，指示：

```
System.Windows.Data Error: 11 : Fallback value 'True' (type 'String') cannot be converted for use in 'Visibility' (type 'Visibility'). BindingExpression:Path=IsConnected; DataItem=null; target element is 'StackPanel' (Name=''); 
```

我已经确定了这个转换器并验证了它是 XAML 错误所在的位置。抱歉这里的无知，但是有没有办法将 FallbackValue 设置为这些绑定中的每一个，以便在无法获取设置路径时评估为“true”？提前致谢

更新：

这是我的可见性转换器的代码（我在整个应用程序的几个地方都使用了它，只是想添加回退值）：

```
 internal class AndToVisibilityConverter : IMultiValueConverter
  {
  public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
  {
     if (values == null)
        return Visibility.Collapsed;

     foreach (var value in values)
     {
        if (value == null || !(value is bool))
           return Visibility.Collapsed;

        if (!((bool) value))
           return Visibility.Collapsed;
     }

     return Visibility.Visible;
  }

  public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
  {
     throw new NotImplementedException();
  }
  } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T01:40:01.380

[FallbackValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)值应该是`Visibility`绑定失败时回退的值：

```
<Binding Path="CurrentUser.IsConsumerOnlyAgent" 
    Converter="{StaticResource InvertedBooleanConverter1}" 
                FallbackValue="Visible" /> 
```

**编辑**

来自[FallbackValue 文档](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)：

> *fallbackValue*
> 与目标属性具有相同类型的属性或对象元素值。有关 XAML 使用信息，请参阅该类型的文档。该类型可能支持也可能不支持其值的属性语法，或者可能支持也可能不支持对象元素语法（这需要该类型的默认构造函数）。因此，目标属性类型将影响您为 FallbackValue 属性的值使用的语法。

在这种情况下，MultiBinding 的目标属性是 Visibility 属性。即使子 MultiBinding 属性的值需要一个 bool，父 MultiBinding 也需要一个来自绑定的 Visiblity 值。这意味着每个 MultiBinding 属性的 FallbackValue 都应具有 Visibility 属性的 FallbackValue。

似乎有点违反直觉，但仔细考虑（IMO）时确实有意义，re：如果 MultiBindng 上没有转换器，则绑定的返回值应该是 Visibility 值。从等式中删除转换器，它可能有助于解决问题。

对于您的情况，跳过每个 MultiBinding 值的 FallbackValue 并像现在一样在 MultiBinding 上设置 FallbackValue。

```
<MultiBinding Converter="{StaticResource AndToVisibilityConverter1}" FallbackValue="Visible">
    <Binding Path="IsConnected" />
    <Binding Path="CurrentUser.IsConsumerOnlyAgent" Converter="{StaticResource InvertedBooleanConverter1}" />
</MultiBinding> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-04T19:19:28.490

经过一些测试，似乎当 MultiBinding 中的“子绑定”失败（由于 UnsetValue 或未能找到绑定属性）时，子绑定的 FallbackValues 被传递到 MultiBinding 上的转换器。

奇怪的是，**子绑定**上的 FallbackValue 的类型需要与**MultiBinding**的目标相匹配。我不明白这个要求，因为 MultiBinding 转换器可以从与该类型不匹配的绑定中获取值。

考虑到这一点，最简单的解决方法是修改 MultiBinding 的转换器以处理多种类型。在这种情况下，它需要处理布尔值和可见性。

即，我的转换函数如下所示：

```
 public object Convert( object[] values, Type targetType, object     parameter, System.Globalization.CultureInfo culture )
    {
        var bools = values.Where( b => b is bool ).Cast<bool>();
        var vis = values.Where( v => v is Visibility ).Cast<Visibility>();

        // if no usable values, return unset
        if( vis.Count() + bools.Count() == 0 )
            return DependencyProperty.UnsetValue;

        // if true, return visible
        if( bools.All( b => b ) && vis.All( v => v == Visibility.Visible ) )
            return Visibility.Visible;

        // if false, see if hidden or collapsed is specified
        var param = parameter as string;

        Visibility ret;
        if( Enum.TryParse( param, out ret ) )
            return ret;

        // default to collapsed
        return Visibility.Collapsed;
    } 
```

此解决方法应通过将 Visible 指定为 true 并将其他内容指定为 false 来提供请求的行为：

```
 <MultiBinding Converter="{x:Static con:MultiAndToVisibilityConverter.Instance}">
        <Binding Path="IsChecked" ElementName="CheckButton"/>
        <Binding Path="RadioOne.IsChecked" FallbackValue="{x:Static Visibility.Visible}"
                 Converter="{x:Static con:BoolInverterConverter.Instance}"/>
    </MultiBinding> 
```

# excel - 如何清除excel中评估为假的单元格？

> ID：14226641
> 
> 赞同：0
> 
> 时间：2013-01-09T00:51:00.427
> 
> 标签：excel, if-statement, cell

我尝试搜索此内容，但我一直遇到有关如何使单元格显示为空白而不是错误的问题。我想清除公式。

我正在使用一个访问数据库（我对此无能为力），其中包含我们计算机上会话的数据。数据库目前给我的基本上是“Section 1, 9-10”，“Section 1, 10-11”等，11个小时这样的部分一共有5个。过去，我不得不将这些查询复制到 Excel 工作表中。在这一点上，我可以为每个部分创建一个查询，该查询只提供我需要的信息、开始时间和持续时间，我可以将其粘贴到我制作的工作簿中。

此工作簿所做的是从这些列中获取数据，并使用 if 语句将其移动到按小时排序的第 2 页。这样做的问题是我需要那些 if 语句一直遍历，并且足够远以确保包括我们拥有的最高数量的会话，加上一个舒适的缓冲区，所以它是 7000 行。

排序完成后，我可以从第二张表中取出所有数据并将其粘贴到月度记录中。问题是，每个单元格中都有公式，文件大小增加了大约 7-10 Mb。

是否有某种方式可以删除评估为假的单元格的公式？或者，可能更有可能是一种更好的方法来解决这个问题，而无需太多额外的软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:16:37.153

我猜你想使用一个`if`公式，如果它评估为`False`然后什么都不显示。您可以通过将 false 结果的值设置为“”来做到这一点。

`=if(expression,value if true, "")`

另一种方法是使用宏循环遍历每个单元格，如果值为 false，则将其清除。

```
Sub falseToClear()

' Change to the range you need to parse
Set Rng = Sheets(1).UsedRange

For Each cell In Rng
    If cell.Value = False Then cell.ClearContents
Next cell

End Sub 
```

# crystal-reports - Crystal 报表交叉表日期分组。

> ID：14226642
> 
> 赞同：0
> 
> 时间：2013-01-09T00:51:04.000
> 
> 标签：crystal-reports, crystal-reports-2008

我使用交叉表控件创建了一个报告，该控件按列中的日期对数据进行分组。我想获取早于本月 1 日（运行报告时）的所有日期，并将它们和汇总的数据合并到一个名为“上一个”的列中。

所以不要看到这样的东西：

`Oct Nov Dec Jan Feb Mar Apr May Jun Jul`

我见过这样的事情：

`Previous Jan Feb Mar Apr May Jun Jul`

在 CR XI 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:42:56.520

您必须创建一个公式来执行此操作（或者可能有两个公式，一个以正确的顺序获取它们，另一个用于显示正确的字符串）：

分组公式：`if {table.datefield} < currentdate then '0000' else cStr({table.datefield}, 'yyMM')`

显示公式：`if {table.datefield} < currentdate then 'Previous' else cStr({table.datefield}, 'MMM')`

*添加的屏幕截图*

![在此处输入图像描述](../Images/ad760d466595cf908911b376148eeaa2.png)

![在此处输入图像描述](../Images/85cda30072a32c3e94e0bc9032c34e00.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:51:59.930

答案实际上是对李的答案的修改。

```
if {Command.ReqDate} < date(year({?StartDate}),month({?StartDate}),1) then dateadd('m',-1,{?StartDate}) else {Command.ReqDate}

use this to group on in the CT set to monthly
right click on the column header
select Format field,
select common tab
select display string formula
if currentfieldvalue < date(year({?StartDate}),month({?StartDate}),1) then 'previous' 
else totext(currentfieldvalue,'MMM') 
```

# javascript - Check image HTTP status codes using jQuery/JS?

> ID：14226644
> 
> 赞同：2
> 
> 时间：2013-01-09T00:51:16.960
> 
> 标签：javascript, jquery, http, http-headers

is it possible to check the status codes of images using jQuery/JS?

For example,

```
img1 = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/YellowLabradorLooking_new.jpg/260px-YellowLabradorLooking_new.jpg";

if(statusCheck(img1) == 404){
    /do something
}elseif(statusCheck(img1) == 403){
    //do something else
}elseif(statusCheck(img1) == 304){
    //do something else
} 
```

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:59:13.377

您可以构造一个`Image`不受跨域限制影响的对象：

```
var image = new Image();
image.src = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/YellowLabradorLooking_new.jpg/260px-YellowLabradorLooking_new.jpg"

image.onload = function() {
    alert('Image has loaded');
};

image.onerror = function() {
    alert('Image did not load');
}; 
```

图像加载是异步的，因此创建一个返回错误代码的函数不是一个好主意。

**演示：http: [//jsfiddle.net/Blender/apyL7/](http://jsfiddle.net/Blender/apyL7/)**

此外，似乎没有办法获取响应代码，因此您只能知道图像是否已加载。

# rally - Inconsistencies in RPM hierarchy scoping

> ID：14226645
> 
> 赞同：1
> 
> 时间：2013-01-09T00:51:18.210
> 
> 标签：rally

I am working to create an RPM tree that can be used to select leaf stories from different levels of the RPM hierarchy.

I was able to get *close* to the desired functionality by using the method described [here](https://stackoverflow.com/questions/10725244/lookback-api-find-all-leaf-node-stories-under-a-known-parent), however there appear to be some inconsistencies in the number of leaf stories being returned at each level of the RPM.

The following Image shows the tree (Project names covered for privacy purposes). The yellow badges show the number of leaf stories found below that level of the RPM hierarchy. As you can see from the image, the numbers are inconsistent. (Below the Initiative shows 23 leaf stories and below one of the Rollups shows 44.) There are in fact 44 leaf stories below that Rollup so the problem appears to be from querying at the Initiative level.

![enter image description here](../Images/251675ec589d2533e92633bd7609f3b1.png)

Here is the function I wrote which is intended to return an array of all the OIDs for leaf stories below the selected RPM node:

```
 function getDescendants(OID, callback) {
                        Ext.create('Rally.data.lookback.SnapshotStore', {
                            autoLoad: true,
                            pageSize: 1000000,
                            fetch: ['ObjectID'],
                            filters: [
                                { property: '_ItemHierarchy', value: OID                       },
                                { property: 'Children',       value: null                      },
                                { property: '__At',           value: new Date().toISOString()  },
                                { property: '_TypeHierarchy', value: 'HierarchicalRequirement' }
                            ],
                            listeners: {
                                load: function(model, data, success) {
                                    if (data && data.length && success) {
                                        var descendants = [];
                                        Ext.Array.each(data, function(story) {
                                            descendants.push(story.get('ObjectID'));
                                        });
                                        callback(Ext.Array.unique(descendants));
                                    } else {
                                        callback([]);
                                    }
                                }
                            }
                        });
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:50:53.363

这个查询对我来说是正确的。我认为您遇到了存在于 Lookback API 的数据流中的已知缺陷。流中的问题已得到纠正，但返回并纠正错误历史的工作仍在团队积压中。如果您想通过 Support 跟踪其进度，该缺陷的 ID 为 DE15647。

解决方法（因为您只查询当前数据）是取消父级和重新父级受影响的项目。

对不起。

编辑：有关该问题的更多详细信息 - 在一段时间内，每当创建 PortfolioItem（策略、主题、功能、倡议）并同时设置其父级时，Lookback API 服务都不会收到通知新 PortfolioItem 的父级。现在这个问题已经解决了，但是旧数据还有待修复。您可以通过在该 _ItemHierarchy 中查找具有 null Parent 字段的 PI 来搜索可能存在此问题的 PI。

要获得具有 null 父母（潜在孤儿）的 PI​​：

```
fetch: ['ObjectID', '_ValidFrom', '_ValidTo'],
filters: [
    { property: '_ItemHierarchy', value: OID }, // only include this if you're limiting to a sub-hierarchy
    { property: '_TypeHierarchy', value: 'PortfolioItem' },
    { property: 'Parent', value: null },
    { property: '__At', value: 'current' }
] 
```

对于这些“孤儿”中的每一个，检查其作为孩子的父母：

```
fetch: ['ObjectID'],
filters: [
    { property: 'Children', value: currentChild.ObjectID },
    { property: '_TypeHierarchy', value: 'PortfolioItem' },
    { property: '_ValidFrom', operator: '<=' value: currentChild._ValidFrom.toISOString() },
    { property: '_ValidTo', operator: '>' value: currentChild._ValidFrom.toISOString() }
] 
```

对于每一个，如果您找到一个声称孩子的父母（在创建孩子时），您知道您有一个受此问题影响的快照，并且可以通过在 ALM 中清除其父母，保存，然后重置它来修复它父母并再次保存。我在第一次检查中包括了 __At: 'current'，因为孤立的 PI 有可能稍后分配了不同的父级，而您不想覆盖它。希望这可以帮助。

# c# - Maintaining multiple settings files

> ID：14226653
> 
> 赞同：3
> 
> 时间：2013-01-09T00:52:21.957
> 
> 标签：c#, winforms, parsing, import, export

Currently, I have a form that has various radio buttons, directory browsers, date pickers etc. The application uses the settings, and executes a file deletion task. I was wondering what is the best strategy to save these settings to an external file that can be loaded at a later date. So essentially each configuration can be loaded, executed, and then another configuration loaded. Also, the configuration can be passed across installations / users.

I dont believe I can use the internal .settings file because I will have multiple sets of settings that can be loaded.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:58:23.117

有多种格式可供选择用于存储设置，例如：

*   INI
*   CSV
*   YAML
*   JSON
*   XML

最好的策略之一是使用 XML。XML 是最流行的设置/配置文件格式之一，因为它易于解析、语法规范、功能强大且易于阅读。

使用 XML 文件允许在安装之间传递配置并在用户之间共享。

此外，如果您有一个描述您的 XML 配置文件的 XSD（模式文件），那么您的应用程序验证不同的配置文件是很简单的。

# c++ - Qt ComboBox + Searching XML + Printing out data from XML to GUI

> ID：14226659
> 
> 赞同：2
> 
> 时间：2013-01-09T00:52:41.120
> 
> 标签：c++, xml, qt

**Update**

```
void MainWindow::readXml()
{
    QDomDocument Champions;
    QFile xmlFile("champions.xml");
    xmlFile.open(QIODevice::ReadOnly);

    Champions.setContent(&xmlFile);

    QDomElement root = Champions.firstChildElement();
    QDomNodeList ChampionNames = root.elementsByTagName("Champion");

    for(int i = 0; i < ChampionNames.count(); i++)
    {
        QDomNode championNode = ChampionNames.at(i);
        if(championNode.isElement())
        {
            QDomElement Champion = championNode.toElement();
            ui->comboBox->addItem(Champion.attribute("Name"));
}}} 
```

Managed to get something like this so I've the names in the comboBox now :)

I'm new to this community so I'm happy to meet all of You!

First I want to inform You that I'm pretty new to Qt programming however I've had some basic c++ lessons in school though it was only console programming and I've never worked on stuff like that. Why I've started with Qt? It looked easy to me and hell it was compared to visual studio! So here is my problem.

Basiclly I have a comboBox where I would read my "Name="" " attributes in. There will be around 100 maybe abit less maybe a bit more don't know Yet. I don't know how to start with everything this since I have never done such thing before. What i want the software to do is basiclly when i select a "name" in the combobox, i want all the attributes ("Q" "W" "E" "R") to be printed out in the 4 labels as You can see on the little image I've added.

I don't know if I need to first read the file into some strings arrays or data structures. Do I need to search the XML file for the "Name" which is selected in ComboBox and then somehow print it out? I spent some time on this but I cant find a way to achive the thing I want. I would really appriciate some code exemples specially using the ComboBox since as said I'm new to this.

XML File looks like this in case image is blurry:

```
<ROOT>

 <Champ Name="XXX1">
  <Q>QQ1</Q>
  <W>WW1</W>
  <E>EE1</E>
  <R>RR1</R>
 </Champ>

 <Champ Name="XXX2">
  <Q>QQ2</Q>
  <W>WW2</W>
  <E>EE2</E>
  <R>RR2</R>
 </Champ>

</ROOT> 
```

I'm really bad on describing things so I've made a small ilustration using a pen to let You understand me better :)

[My beautiful sketch.](http://i.stack.imgur.com/MI008.jpg)

Thanks for Your support in advance! Hope I'm clear enought with my question. Have a great day.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:09:37.017

首先，您应该将`XML`数据表示为 C++ 类/结构：

```
class Champ {
public:
   // A constructor using QDomElement as argument
   Champ(QDomElement element);
   QString name;
   QString q, w, e, r;
}; 
```

其次，您应该加载 XML 文件，对其进行解析，然后用对象填充矢量（或地图）`Champ`。

```
QVector<Champ> loadChampsObjects(const QString& xmlPath)
{
    QVector<Champ> champObjects;
    QFile file(xmlPath);
    if (!file->open(QIODevice::ReadOnly | QIODevice::Text))
        return champObjects;

    /* QDomDocument takes any QIODevice. as well as QString buffer*/
    QDomDocument doc("mydocument"); 
    if (!doc.setContent(file)) 
        return champObjects;

    //Get the root element
    QDomElement docElem = doc.documentElement(); 

    // get the nodes we need
    QDomNodeList nodeList = docElem.elementsByTagName("champ");

    // Check each node create a Champ object and add it the vector...
    for(int i = 0; i < nodeList.count(); i++)
        champObjects.append(Champ(nodeList.at(i).toElement()));

    return champObjects;
} 
```

第三填充`QComboBox`. 我们将使用向量中的索引作为`userData`：

```
QVector<Champ> champObjects = loadChampsObjects("path.to.xml");
for (unsigned i=0; i<champObjects.count(); i++)
    pComboBox->addItem(champObjects[i].name, QVariant(i)); 
```

最后，在连接到组合框信号的插槽中，您可以使用指示向量中索引的`currentIndexChanged`轻松访问所选对象的属性：`userData`

```
void champObjectChanged()
{
    unsigned vectorIndex = pComboBox->itemData(pComboBox->currentIndex())->toInt();
    Champ c = champObjects[vectorIndex];
    // do whatever you want with it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:33:12.403

使用 Qt 的 DOM 组件为您完成所有解析和树构建（请参阅[此处](http://doc-snapshot.qt-project.org/4.8/examples-xml.html)的示例以了解它们的使用）。

对于`QComboBox`，一旦`QDomDocument`完成，您可以搜索所有`Champ`节点并从中读取`Name`属性。对于每一个，只需使用`QComboBox::addItem(const QString& text)`添加它们。

然后将`QComboBox::currentIndexChanged (const QString&)`信号连接到 XML 处理类中的方法，该方法在 DOM 树中搜索具有与其匹配的属性的`Champ`节点。`Name`一旦找到读取它的每个子节点值（即“Q”、“W”、“E”、“R”值）。

# rest - 我什么时候应该在我的响应正文中包含 URI？

> ID：14226663
> 
> 赞同：0
> 
> 时间：2013-01-09T00:53:17.647
> 
> 标签：rest

如果我有一个资源 /users 和一个资源 /claims，那么 /claims/7 会返回这个：

```
{ id: 7, text: "hello", postingUserID: 9 } 
```

可以吗？或者应该是

```
{ id: 7, text: "hello", postingUserURI: "/users/9" } 
```

我想后者更安静，但这很不方便，因为如果我想用 ID 做任何其他事情，我必须解析出 9。

或者我应该两者兼得？

```
{ id: 7, text: "hello", postingUserID: 9, postingUserURI: "/users/9" } 
```

我喜欢这个，但它也有点多余。

做什么事情最安心？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:10:16.170

最 RESTful 的做法是**包含 URI。**第一个选项对 RESTful 客户端不是很有用，因为它代表了死胡同。Web 浏览器是一个很好的 restful 客户端示例：选项 1 就像提供一个没有超链接的网页。用户无法推进应用程序状态（浏览器选项卡），他们只能阅读页面，然后按下后退按钮。

**我推荐选项 2。**客户端应该不需要 ID，因为它们只能用于使用 URI 模板生成的 RPC 样式的 HTTP 请求之类的东西。这表示不是 REST 的带外信息。ID 是不需要公开的内部实现细节。您甚至不需要包含声明对象的 ID。您当前在客户端中使用 ID 的任何内容都应该使用从上一个请求中收到的超链接。

例如，我自己的 API 有一个“作业编号”，这个编号是一个没有字母部分的整数。我在我的数据库中使用一个自动递增的 ID 字段来生成和保存这些工作编号，但是在将它们呈现给客户时，我将其显示为“工作编号”而不是数据库 ID。客户端不使用它来生成任何未来的请求，仅用于人类可读的显示。

在开发新的 API 时，您可能会发现输出看起来像 JSON 响应的 HTML 页面很有用。然后使用网络浏览器浏览它。每个 GET 请求都应该通过单击超链接（锚元素）而不是通过在 URL 栏中键入 ID 来生成。这种技术被称为*API Surfing。*

与 REST 无关，我将更改为`postingUserURI`URI`author`的字段名称。

# git - Removing/collapsing git history

> ID：14226664
> 
> 赞同：2
> 
> 时间：2013-01-09T00:53:29.740
> 
> 标签：git, garbage-collection

My git repository is starting to get a bit too large. On a single SSD, I have a repository and two clones with a lot of binary files that take up an awful lot of space.

Every day, a cron job pushes the master clone to the repository to create a history of changes over a long period of time.

However, anything over a month old isn't really worth keeping anymore. I'd like to be able to remove those old commits to save a lot of space... programatically.

I've seen plenty of examples using `rebase` and `squash`, a couple using `gc`, and some other really funky ones. Most of these require you to manually type in the commit tags you want to remove.

I want to remove all commits older than 30 days from my repository (I suppose I'll have to configure hooks to collapse the history elsewhere too) every month from a bash script.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:06:50.540

好的，这个怎么样。它获得第一次提交，然后启动变基。只需删除您喜欢的提交即可。

```
# Get first commit
git log --format=%H | tail -1 | xargs git rebase -i 
```

[**参考**](http://svnpenn.github.com/2012/git/)

# cocoa-touch - 以为我成功地将 Cocos2D 添加到我的 Cocoa Touch 项目中，但自动完成显示没有 CC 类

> ID：14226667
> 
> 赞同：0
> 
> 时间：2013-01-09T00:53:53.433
> 
> 标签：cocoa-touch, cocos2d-iphone, uikit, build-settings

按照几个在线教程，我设法将 Cocos2D 添加到我的 Cocoa Touch (UIKit) 项目中。问题是，我可以`#import "cocos2d.h"`在我的任何一个文件的顶部，我的游戏编译和运行正常，就像以前一样工作，但我无法访问任何 cocos 类，如 CCNode、CCLayer ， ETC。

为了让您了解应用程序的功能，目前，主菜单 UITableView 出现，按应有的方式滚动，通向各种视图控制器（facebook、twitter、新游戏创建、商店、设置等）的按钮都可以正常工作美好的。每个视图中的后退按钮将用户返回到主菜单表视图。到目前为止，这几乎就是它所做的一切。此时的想法是将接力棒传递给 Cocos2D 场景——游戏将在该场景中——当用户点击代表当前匹配的 UITableViewCell 之一时。

我用来将 Cocos2D 添加到我的项目的过程是这样的：

1.  将 cocos2d-ios.xcodeproj 拖放到我的“支持文件”文件夹中
2.  在我的项目的“Build Settings”下的“Link Binary with Libraries”标题下，我添加了 libcocos2d.a（即使在“成功”添加 Cocos2D 后仍继续显示红色）、libz.dylib、OpenGLES.framework 和 QuartzCore。框架。他们都读到“需要”。
3.  在我的**目标**的“构建设置”下，将“用户标题搜索路径”设置为“/Users/Home/Downloads/cocos2d-iphone-master-v2/**”（递归），这是我的 Cocos2D 库文件夹所在的位置。
4.  在我的**目标**的“构建设置”下，将“始终搜索用户路径”设置为“是”。
5.  对我**的项目的**“构建设置”执行相同的两个步骤
6.  遍历并选择所有 Cocos2D .h 和 .m 文件，并为所有 Cocos2D 文件设置 -fno-objc-arc 编译器标志，这使得 pre-ARC 调用可以在旧的 Cocos2D 文件中保留、释放、释放等很好地处理我项目中的所有后 ARC 文件。

另外值得注意的是，当我在现有项目“cmd + n”中创建一个新文件时，在 Cocos2D 模板下我唯一可用的选项是 CCNode 类。

我在这里错过了什么吗？同样，需要明确的是，我可以导入 cocos2d.h 文件，看起来一切正常。但是，当我尝试定义以“CC”开头的任何内容时，自动完成不会显示任何内容。任何帮助，将不胜感激。把我的头撞在墙上，在这里。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:18:29.917

自动完成问题很可能是因为递归搜索路径。Xcode 在索引递归标头搜索路径时存在问题（尤其是如果您只是放入 .xcodeproj）。将其更改为绝对路径，如果源文件分布在多个文件夹中，则添加多个路径。

使用 Xcode 4，您不应再将 xcodeproj 放入另一个项目。使用工作区将多个项目并排组合在一个工作区中。有关示例，请参见[Kobold2D](http://www.kobold2d.com)（或者如果您仍然遇到问题，请使用它，因为这些事情已经在 Kobold2D 中解决了）。

# javascript - Ext JS 3 error on joomla using ose membership component

> ID：14226668
> 
> 赞同：0
> 
> 时间：2013-01-09T00:54:12.140
> 
> 标签：javascript, json, extjs, joomla

Hello guys i am really frustrated trying to figure out what is wrong ...

I am using ose membership component (subscription management) on my joomla platform and i am receiving a js exeption when i try to register a new subsriber here:

[http://www.destinationcrete.gr/index.php?option=com_osemsc&view=register&Itemid=1961&lang=en](http://www.destinationcrete.gr/index.php?option=com_osemsc&view=register&Itemid=1961&lang=en)

The exception i receive is the following:

```
Uncaught SyntaxError: Unexpected token <        ext-all.js:13
Ext.util.JSON.doDecode                          ext-all.js:13
(anonymous function)                            ext-all.js:13
Ext.extend.handleResponse                       ext-all.js:21
Ext.form.Action.processResponse                 ext-all.js:21
Ext.extend.success                              ext-all.js:21
Ext.extend.handleResponse                       ext-all.js:13
f                                               ext-base.js:7
m                                               ext-base.js:7
(anonymous function) 
```

Any ideas on how to proceed with this ?

# ruby-on-rails - rails 从咖啡中获取数据到控制器

> ID：14226672
> 
> 赞同：0
> 
> 时间：2013-01-09T00:54:54.853
> 
> 标签：ruby-on-rails, coffeescript

我有一些这样的控制器代码来更新 workorder.wostatus_id 字段。

```
def changestatus
 @workorder = Workorder.find(params[:id])
 @workorder.update_attributes(params[:wostatus_id])
 render nothing: true
end 
```

以及最终执行 changestatus 的咖啡脚本：

```
 receive: (event, ui) ->
    alert $(ui.item).attr('change_url')
    alert $(this).data('wostatus-id')
    $.ajax
      type: 'PUT'
      url: "http://localhost:5000/workorders/13/changestatus"
      data:
        wostatus_id: 3 
```

我在尝试使其正常工作时对 url 和 wostatus_id 进行了硬编码。

但是，以下行没有从咖啡中得到 3：

```
 @workorder.update_attributes(params[:wostatus_id]) 
```

如果我对此行进行硬编码，则可以将 wostatus 更新为 3：

```
@workorder.update_attribute :wostatus_id, '4' 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:36:51.987

您的 CoffeeScript 的这一点：

```
data:
  wostatus_id: 3 
```

应该给你一个`params`看起来像这样的：

```
{ :wostatus_id => 3 } 
```

所以当你说：

```
@workorder.update_attributes(params[:wostatus_id]) 
```

你真的是在说：

```
@workorder.update_attributes(3) 
```

这并没有多大意义。您需要提供`update_attributes`一个键和一个值：

```
@workorder.update_attributes(:wostatus_id => params[:wostatus_id]) 
```

# sql - SQL aggregate function for any non-specific value from a group

> ID：14226677
> 
> 赞同：8
> 
> 时间：2013-01-09T00:55:47.483
> 
> 标签：sql, oracle

Is there an agregate function that returns any value from a group. I could use `MIN` or `MAX`, but would rather avoid the overhead if possible given it's a text field.

My situation is an error log summary. The errors are grouped by the type of error and an example of the error text is displayed for each group. It doesn't matter which error message is used as the example.

```
SELECT
    ref_code,
    log_type,
    error_number,
    COUNT(*) AS count,
    MIN(data) AS example
FROM data
GROUP BY
    ref_code,
    log_type,
    error_number 
```

What can I replace `MIN(data)` with to not have to compare 100,000s of varchar(2000) values?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T03:08:30.510

您可以将 MIN 与 KEEP 结合使用，如下所示：

```
MIN(data) keep (dense_rank first order by rowid) AS EXAMPLE 
```

这背后的想法是数据库引擎将通过 ROWID 而不是 VARCHAR(2000) 值对数据进行排序，理论上这应该更快。您可以将 ROWID 替换为主键值，并检查它是否更快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T01:09:17.790

按照建议的答案，似乎`MIN(data)`（或`MAX(data)`）是实现我想要的最快方法。我试图不必要地过度优化。

当我可以访问该数据库时，我会尝试出现的任何其他答案，但与此同时，这会排在首位。

感谢大家的努力！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T05:58:03.000

好吧，既然您询问了 OVER PARTITION AND ORDER BY，下面是一个执行 GROUP BY 的版本，但随后也使用 ROW_NUMBER() 和 OVER 和 PARTITION AND ORDER BY，将`ref_code, log_type, error_num`遇到的第一个组合编号为第 1 行（ 1) 处有任何数据列。然后它重新编号，从 1 开始，在`ref_code, log_type, error_num`它找到的下一个不同的组合处（与碰巧在那里的任何数据列）。因此，您可以简单地将第 1 行的数据字段作为给定的代表数据字段`ref_code, log_type, error_num`。

它仍然缺少一些东西。如果我没有双通道（一次用于聚合，一次用于 row_number()）会更优雅；但是，它可能仍然表现得非常好。我将不得不再考虑一下，看看我是否可以消除双重通行证。

但它避免了大数据字段的任何比较。它代表了一种执行您所要求的方法：从与聚合字段相关的数据字段中提取 1 个代表性样本。

```
SELECT
    t.ref_code,
    t.log_type,
    t.error_number,
    t.count,
    d.data
FROM
(
    SELECT
        ref_code,
        log_type,
        error_number,
        COUNT(*) as count
    FROM data
    GROUP BY
        ref_code,
        log_type,
        error_number
) t
INNER JOIN 
(
    SELECT
        ref_code,
        log_type,
        error_number,
        data,
        ROW_NUMBER() OVER
        (
            PARTITION BY
                ref_code,
                log_type,
                error_number
            ORDER BY
                ref_code,
                log_type,
                error_number
        ) as row_number
    FROM data
) d on
    d.ref_code = t.ref_code and
    d.log_type = t.log_type and
    d.error_number = t.error_number and
    row_number = 1 
```

最后警告：我没有甲骨文可以尝试。但我确实是通过阅读 Oracle 文档把它放在一起的。

* * *

在进一步考虑如何消除 GROUP BY 后，我添加了以下内容，我只在 COUNT(*) 中使用了该 GROUP BY。不过不知道会不会快一点。

```
SELECT *
FROM
(
    SELECT
        ref_code,
        log_type,
        error_number,
        data,
        ROW_NUMBER() OVER
        (
            PARTITION BY
                ref_code,
                log_type,
                error_number
            ORDER BY
                ref_code,
                log_type,
                error_number
        ) as row_number,
        COUNT(*) OVER
        (
            PARTITION BY
                ref_code,
                log_type,
                error_number
            ORDER BY
                ref_code,
                log_type,
                error_number
        ) as count 

    FROM data
) t
WHERE row_number = 1 
```

# c# - Need good guide for GridView customization

> ID：14226678
> 
> 赞同：-1
> 
> 时间：2013-01-09T00:55:50.853
> 
> 标签：c#, asp.net, gridview

I'm a beginner at ASP.net. I want to create a custom `GridView` where it contains images and such.

But i've searched a lot for a guide that explains how to customize GridView controller. All existing ones (the ones i found of course) only talks about how to do a certain uses out of it, like e-commerce site Gridview, or inline Gridview and others. But none are explaining it for a beginner like me.

If there's a guide or even a good book for using and customizing ASP.net controls, i'd be grateful if you mentioned it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:58:30.223

关于自定义 gridview 控件的一个非常好的教程是..

*   [在网格视图控件中使用模板字段](http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs)

下面的链接也是gridview的另一个很好的教程系列，您还可以学习如何在gridview中保存图像或其他数据。

*   [ASP.NET-GridView](http://www.dotnetspider.com/resources/Category518-ASP.NET-GridView.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:47:05.163

## 问题 1 - 好的 ASP.NET 书籍

真正帮助我学习 ASP.NET 的书是 - 70-515 Web Application Development With Microsoft .NET Framework 4

本书的唯一前提是 C# 或 VB.NET 以及一些基本的 HTML 知识，假设读者以前从未接触过 ASP.NET，所有示例都非常容易上手。每章的末尾都有步骤步骤实验室可指导您根据您在该章中学到的内容创建示例网站。

以下是本书涵盖的一些主题：

1.  ASP.NET 页面生命周期
2.  ASP.NET 服务器控件
3.  数据绑定控件（GridView、DetailsView、ObjectDataSource、SqlDataSource）
4.  验证和站点导航
5.  ASP.NET 中的数据访问
6.  本地化与全球化
7.  AJAX 和 javascript (jQuery)
8.  ASMX Web 服务和 WCF
9.  ASP.NET 动态数据和 MVC
10.  部署和监视 ASP.NET 应用程序

如果这听起来像你会感兴趣的东西，我是从亚马逊买的，但我知道 oreilly 也有库存

## 问题 2 - 从 GridView 开始

如果您想学习使用gridview，我建议您从基础开始，例如绑定到`List<T>`：

**ASPX：**

```
<asp:GridView ID="gvEmployees" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="Id" HeaderText="Id" />
        <asp:BoundField DataField="Name" HeaderText="Employee name" />
    </Columns>
</asp:GridView> 
```

**后面的代码：**

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            gvEmployees.DataSource = new List<Employee>()
            {
            new Employee{ Id=1,Name="Employee 1"},
            new Employee{ Id=2,Name="Employee 2"}
            };

            gvEmployees.DataBind();
        }
    }
}

public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

一旦你掌握了基础知识，只需使用 gridview 并尝试绑定到不同类型的对象，你就会很快掌握它：

1.  [将 gridview 绑定到 SQL 表](https://stackoverflow.com/questions/8375004/create-a-query-and-put-the-result-into-datagrid/8375159#8375159)
2.  [将gridview绑定到图像列表](https://stackoverflow.com/questions/14015209/list-with-images-from-code-behind-asp-net-c-to-image-overview-in-aspx/14017514#14017514)

# jenkins - Jenkins security - hide all screens unless user is logged in

> ID：14226681
> 
> 赞同：52
> 
> 时间：2013-01-09T00:56:21.913
> 
> 标签：jenkins, continuous-integration

I don't know why "logged in users can do anything" means Jenkins will happily allow non-authenticated users to view project details and access artifacts... Regardless, I need to know how to get Jenkins to allow logged in users to to anything AND hide EVERYTHING for users who AREN'T logged in. Help please?

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-09T01:22:36.733

这可以通过[Role-Strategy 插件](http://wiki.jenkins-ci.org/display/JENKINS/Role+Strategy+Plugin)来完成。

安装插件，添加一个名为“匿名”的新组并取消选中所有内容。然后，您要添加另一个名为“已验证”的组并检查所有内容。将现有用户添加到此组。Jenkins 会立即提示您以这种方式登录。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T11:04:53.053

您可以使用[https://wiki.jenkins-ci.org/display/JENKINS/Role+Strategy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Role+Strategy+Plugin)

它允许指定定义角色并将角色分配给用户，没有角色的用户甚至看不到 jenkins ui。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-23T15:47:53.403

回答一个老问题，但我来这里搜索是因为我试图在 Docker 上自动启动一个 Jenkins 实例并发现了同样的问题。

当问题被问到时，这个选项很可能不可用。截至目前（v2.222.3，但不确定回溯多远），事实证明您可以在不安装任何其他插件的情况下执行此操作。

## 手动

*   导航到**全局安全**（Jenkins > 管理 Jenkins > 全局安全）

*   **将授权**部分更新为“登录用户可以做任何事情”。

    **UNCHECK** *允许匿名读取访问*

[![在此处输入图像描述](../Images/b6d957b96b7c7e0e701ab8d5ee164dbb.png)](https://i.stack.imgur.com/5Davg.png)

任何未经身份验证的访问都将重定向到现在登录。

我会注意到，如果您通过设置向导设置 Jenkins，则默认情况下会禁用匿名读取访问。如果您想要这种行为并且想要自动配置 jenkins，请继续阅读。

## 使用 Docker 自动化

我的情况是我想检查我的 repo，运行我的 compose 文件并准备好我的所有配置/用户/插件等。如果有兴趣，[这里](https://medium.com/faun/dockerized-jenkins-in-2019-8481c7b106c7)有更多详细信息。

简而言之：

Dockerfile

```
FROM jenkins/jenkins:lts-alpine

# Disable setup wizard since security.groovy creates our user
ENV JAVA_OPTS="-Djenkins.install.runSetupWizard=false"

COPY security.groovy /usr/share/jenkins/ref/init.groovy.d/security.groovy 
```

安全.groovy

```
#!groovy

import jenkins.model.*
import hudson.security.*

def instance = Jenkins.getInstance()

// Create Admin User
def hudsonRealm = new HudsonPrivateSecurityRealm(false)
hudsonRealm.createAccount("admin", "admin") // Dont do this. This is bad
instance.setSecurityRealm(hudsonRealm)

// Set Auth to Full Control Once Logged In and prevent read-only access
def strategy = new FullControlOnceLoggedInAuthorizationStrategy()
strategy.setAllowAnonymousRead(false)
instance.setAuthorizationStrategy(strategy)

instance.save() 
```

特别`strategy.setAllowAnonymousRead(false)`是需要什么

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T03:47:51.297

此外，如果您使用 GitHub 作为您的版本控制系统——您可以使用 GitHub OAuth 插件。一旦“匿名”到达您的页面，它们将自动重定向到 GitHub。

# javascript - Using Javascript to apply CSS3 transition for transform/translate property

> ID：14226685
> 
> 赞同：0
> 
> 时间：2013-01-09T00:56:41.997
> 
> 标签：javascript, css, css-transitions, css-transforms

Just trying to get this image to animate the transform property, by editing the CSS3 properties via JS.

By clicking the 'test' button, the expected result is the image to animate left 100 pixels.

It currently just goes to that position immediately and I get this error in the console:

`Uncaught TypeError: object is not a function`

Example:

[http://jsfiddle.net/PzAxu/8/](http://jsfiddle.net/PzAxu/8/)

# java - 为什么我必须在 ApprovalTest 的源代码控制中包含收到的文件？

> ID：14226691
> 
> 赞同：1
> 
> 时间：2013-01-09T00:57:29.820
> 
> 标签：java, approval-tests

我正在阅读`ApprovalTest - Getting Started.pdf`（[它在此处的 zip 中）的文档，它在](http://sourceforge.net/projects/approvaltests/files/ApprovalTests.Java/)**Approving The Result**下说的最后一句话是“注意：您必须在源代码管理中包含收到的文件。”

这真的让我很困惑。有人可以解释这是为什么吗？这是一个错字，意思是说：“注意：您必须在源代码管理中包含已**批准**的文件。”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:03:55.947

是的，您必须在源代码管理中**仅包含已批准**的文件。收到的文件在执行后会自动删除，如果与已批准的文件没有任何差异。如果有任何差异，则批准测试不会通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:49:56.883

感谢您提醒我们注意此文档错误，我们修复了该文档。这是一个错字 - 它应该是“批准的文件”。

# ruby-on-rails - Ruby查看索引内的嵌套元素

> ID：14226694
> 
> 赞同：0
> 
> 时间：2013-01-09T00:57:52.513
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个具有以下关系的模型

```
Event
  has_many :comments
Comment
  belongs_to :event 
```

我想做的是在 Post.index 中显示 Post 的元素以及 comment.descriptions。

这里有一个控制器

```
def index
  @events = Event.all(:include => :comments)
  ... 
```

这里是如何构建的

```
def new
  @event = Event.new
  @event.comments.build
end 
```

但我不确定如何在 post.index.html comments.description 中显示。我试试这个，但它失败了

```
<% @events.each do |event| %>
  <% if event.comments.count <= 1 %>
    <%= event.description%>
  <% end %>
<% end %> 
```

错误是未定义的方法（描述）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:05:37.827

您只需要在遍历事件时遍历每个事件的注释。

```
<% @events.each do |event| %>
  <% event.comments.each do |comment| %>
    <%= comment.description %>
  <% end %>
<% end %> 
```

# c - 通过代理从网站获取数据

> ID：14226695
> 
> 赞同：0
> 
> 时间：2013-01-09T00:58:07.460
> 
> 标签：c, http, sockets, networking, https

我正在开发一个 C 程序以连接到代理，然后通过代理拉数据/发送数据到网站。然而，在我让“CONNECT”语句起作用后，我对该怎么做感到困惑。

我目前的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <netinet/in.h>

#define maxlen 2048

int main(int argc, char *argv[])
{
int mysocket;
int len;
char buffer[2000];
char msg[] = "CONNECT http://example.com:80/ HTPP/1.0\r\n\r\n";

mysocket = socket(AF_INET, SOCK_STREAM, 0);

struct sockaddr_in dest;

memset(&dest, 0, sizeof(dest));

dest.sin_family = AF_INET;
dest.sin_addr.s_addr = inet_addr("101.255.60.162");
dest.sin_port = htons(3128);

connect(mysocket, (struct sockaddr *)&dest, sizeof(struct sockaddr));

send(mysocket, msg, strlen(msg), 0);
len = recv(mysocket, buffer, maxlen, 0);

buffer[len] = '\0';

printf("%s \n", buffer);
close(mysocket);
return 0; 
```

之后我尝试发送另一个命令，但是当我发送第二个命令时，它直接进入站点，而不是通过代理。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:35:10.510

首先忘记代码并学习数据包流。使用任何数据包捕获工具（如wireshark）来查看流量。在浏览器中设置代理并打开一些http站点并观察首先将数据包连接到wireshark中的代理。选择连接数据包，右键单击它并选择“Follow tcp stream”。这将打开一个新窗口，您可以在那里看到该 http 请求的完整数据包流。

一旦你知道了数据包流，那么其余的数据包就可以像你制作第一个 CONNECT 数据包一样被发送和接收。

# java - 在libgdx中使用scene2d时如何实现box2d light

> ID：14226696
> 
> 赞同：0
> 
> 时间：2013-01-09T00:58:12.123
> 
> 标签：java, libgdx, box2d, scene2d

我们正在使用 libgdx 制作游戏，我们想知道如何将 box2D 中的光和物理与 scene2d 一起使用，看来要获得光，您需要进入包含所需内容的 World 类，但我没有知道如何将两者结合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:58:36.177

我正在处理类似的问题。这篇博文似乎有一些答案：

[http://pimentoso.blogspot.com/2013/01/meter-and-pixel-units-in-box2d-game.html](http://pimentoso.blogspot.com/2013/01/meter-and-pixel-units-in-box2d-game.html)

# html - HTML5 - 如何在移动浏览器上多次播放（重播）音频文件？

> ID：14226698
> 
> 赞同：1
> 
> 时间：2013-01-09T00:58:36.493
> 
> 标签：html, audio, mobile, browser, replay

所以我最近试图学习 html5 的东西并得到了音频标签。它似乎在我的 PC 浏览器 Chrome 上运行良好，但在我的 android（4.0，同时使用股票浏览器和 dolphin）上运行得不是很好。它会播放一次音频，但不会再播放一次。以这个网站为例：

[http://www.stefanvignir.de/rimshot/](http://www.stefanvignir.de/rimshot/)

非常基本，它有一个按钮，每次按下它都会播放音频，但在我的安卓上没有。它仅在您第一次按下时播放。你如何解决这个问题？只是等待移动浏览器更新？

我听说一个解决方法是设置 audio.currentTime = 0; 但这似乎并没有解决任何问题。显然您可以重置源（audio.src = audio.src），这将允许您多次播放它，但它必须重新下载文件。我猜是一种解决方法，但不可接受。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:19:54.260

这适用于桌面和安卓浏览器的多次按下 - 您可以包装在 div 等中进行样式设置：

```
<a onclick="this.firstChild.play()"><audio src="1.mp3"></audio>play</a> 
```

不仅仅是音频标签，因此您可以更好地控制播放按钮的外观。如果您需要更多按钮，您可以更改暂停等代码

# javascript - 我的下拉菜单的最后一部分

> ID：14226700
> 
> 赞同：0
> 
> 时间：2013-01-09T00:58:55.953
> 
> 标签：javascript, drop-down-menu

好的，多亏了这里的人，我几乎完成了我的下拉菜单，达到了 3 岁的标准。我知道可能有一种方法可以缩短和简化我的代码，所以任何指针都会很棒。这是我所有的代码，底部有一个 jsfiddle：

哦，在我忘记之前有没有办法可以平滑动画？就像一个 wait() 类型的交易，它会让向下滑动等到向上滑动完成？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="js/calendar.js"></script>
<script type="text/javascript" src="js/formhandler.js"></script>
<script type="text/javascript" src="js/popup.js"></script>
<link href="CSS/style.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="CSS/fonts.css" rel="stylesheet" type="text/css" media="screen"/>
<script type="text/javascript">
$(document).ready(function () {

$('a#1').on('click', function (event) {
    event.preventDefault();
    if ($('#mid-nav > ul').find('ul').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    }
    if ($('#mid-nav > ul').find('ul#1').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    } else {
        $('#mid-nav > ul').find('ul#1').slideToggle(300);
    }
});
$('a#2').on('click', function (event) {
    event.preventDefault();
    if ($('#mid-nav > ul').find('ul').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    }
    if ($('#mid-nav > ul').find('ul#2').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    } else {
        $('#mid-nav > ul').find('ul#2').slideToggle(300);
    }
});
$('a#3').on('click', function (event) {
    event.preventDefault();
    if ($('#mid-nav > ul').find('ul').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    }
    if ($('#mid-nav > ul').find('ul#3').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    } else {
        $('#mid-nav > ul').find('ul#3').slideToggle(300);
    }
});
$('a#4').on('click', function (event) {
    event.preventDefault();
    if ($('#mid-nav > ul').find('ul').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    }
    if ($('#mid-nav > ul').find('ul#4').is(":visible")) {
        $('#mid-nav > ul').find('ul').slideUp(300);
    } else {
        $('#mid-nav > ul').find('ul#4').slideToggle(300);
    }
}); 
```

});

```
<body>
<div id="wrapper">
  <div id="topbanner"></div>
  <div id="header">
    <div id="navigation">
      <div id="topnav">
        <div id="left-side">
          <div id="left-menu">
            <ul>
              <li><a href="#">Link l1</a></li>
              <li><a href="#">Link l2</a></li>
            </ul>
          </div>
        </div>
        <div id="logo"><img src="images/general/nav_logo.png" /> </div>
        <div id="right-side">
          <div id="right-menu">
            <ul>
              <li><a href="#">Link r1</a></li>
              <li><a href="#">Link r2</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div id="mid-nav">
        <ul id="midnav">
          <li><a href="#" >HOME</a></li>
          <li><a id="1" href="#" >ABOUT</a>
            <ul id="1">
              <li><a href="#">test1.2</a></li>
              <li><a href="#">test1.3</a></li>
              <li><a href="#">test1.1</a></li>
            </ul>
          </li>
          <li><a id="2"href="#">Work</a>
            <ul id="2">
              <li><a href="#">test1x.2</a></li>
              <li><a href="#">test1x.3</a></li>
              <li><a href="#">test1x.1</a></li>
            </ul>
          </li>
          <li><a id ="3" href="#">Clients</a>
            <ul id="3">
              <li><a href="#">test2.2</a></li>
              <li><a href="#">test2.3</a></li>
              <li><a href="#">test1.2</a></li>
            </ul>
          </li>
          <li><a id="4"href="#">Contact</a>
            <ul id="4">
              <li><a href="#">test3.2</a></li>
              <li><a href="#">test3.3</a></li>
              <li><a href="#">test3.1</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <!--START 100% HERE!--> 
  </div>
</div>
<div id="footer">
  <div class="social-images"><img src="images/socialmedia/facebook.gif" height="40" width="40"/></div>
  <div class="social-images"><img src="images/socialmedia/google.gif" height="40" width="40"/></div>
  <div class="social-images"><img src="images/socialmedia/twitter.gif" height="40" width="40"/></div>
</div>
</body>
</html>

CSS:

html, body {
    height: 100%;
    margin: 0 auto;
}
/* NAVIGATION */
#wrapper {
    text-align: left;
    margin: 0px auto;
    padding: 0px;
    width: 100%;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -100px; /* the bottom margin is the negative value of the footer's height */
}
#topbanner{
    width:100%;
    height:54px;
    background-color:#f1f2f2;
    position:absolute;
    z-index:-1000;
}
#topnav {
    margin: 0px auto;
    width: 1050px;
    height: 50px;
    padding-top: 4px;
    background-color: #f1f2f2;
}
#left-side {
    float: left;
    width: 439px;
}
#right-side {
    float: right;
    width: 439px;
}
#logo {
    padding-top: 7px;
    float: left;
    width: 15%;
}
#left-menu {
}
#left-menu ul {
    float: right;
    margin: 0px 0px 0px 0px;
    padding: 0px 10px 0px 0px;
}
#left-menu li {
    display: inline;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
}
#left-menu a {
    display: inline-block;
    padding: 10px;
    line-height: 30px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'AftasansRegular';
    font-size: 22px;
    font-weight: normal;
    color: #000;
    border: none;
}
#right-menu {
}
#right-menu ul {
    float: left;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 10px;
}
#right-menu li {
    display: inline;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
}
#right-menu a {
    display: inline-block;
    padding: 10px;
    line-height: 30px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'AftasansRegular';
    font-size: 22px;
    font-weight: normal;
    color: #000;
    border: none;
}
ul#midnav {
    border-width: 1px 0;
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: center;
    border-bottom: solid thin #c8c8c8;
}
ul#midnav li {
    display: inline;
}
ul#midnav li a {
    display: inline-block;
    padding: 10px;
    line-height: 30px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'AftasansRegular';
    font-size: 18px;
    font-weight: normal;
    color: #000;
    border: none;
}
ul#midnav li ul{
line-height: 30px;
 padding: 0;
 position: absolute;
 left: 0; top:100px;
 display: none;/* --Hide by default--*/
 width:100%;
 height:40px;
 background: #fff;
    border-bottom: solid thin #c8c8c8;

}

/* NAVIGATION END */
/* FOOTER BEGIN */
#footerwrapper, #push {
    height: 100px; /* .push must be the same height as .footer */
    background-color: #f1f2f2;
}
#footer {
        border-top: solid thin #c8c8c8;
    width: 100%;
    height: 100px;
    margin: 0 auto;
    background-color: #f1f2f2;
}
#social-wrapper {
    width: 130px;
    height: 100px;
    float: right;
    position: relative;
    top: 40px;
}
.social-images {
    border-style: solid;
    border-width: 1px;
    border-color: #f1f2f2;
    width: 40px;
    height: 40px;
    float: left;
}
/*FOOTER END *? 
```

[http://jsfiddle.net/XN4vf/](http://jsfiddle.net/XN4vf/)

抱歉，如果这被编码为白痴（我仍在使用我的训练轮）。

谢谢

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:21:26.673

你可以试试这个：

```
$(document).ready(function () {
    $('#midnav li a').on('click', function(event){
        event.preventDefault();
        $('#midnav li ul').slideUp(300);
        var ul = $(this).parent().find('ul');
        if(ul.is(':visible')){
            ul.slideUp(300);
        }else{
            ul.slideDown(300);
        }
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:47:47.400

一方面，您应该使用 CSS 类而不是 ids 来`a`触发它们各自子菜单上的 slideToggle 的标签。此外，有效 HTML 页面中的 id 应该是唯一的，并且您对不同的元素使用相同的 id “1”、“2”等。更重要的是，通过使用类，您不需要分别为所有锚标记绑定 onclick 事件，这样可以节省大量代码 ;-)

这是更新的小提琴：http: [//jsfiddle.net/XN4vf/3/](http://jsfiddle.net/XN4vf/3/)

相关代码是这样的：

```
 $("a.slide").on('click', function(e){
   e.preventDefault();
   $(this).parent().siblings().find("ul:visible").slideUp();
   $(this).next("ul").slideToggle(300);
  }); 
```

Once you give the `a` tags a class called "slide" or similar, you can rewrite your event callback to first hide / slideUp all the submenus belonging to the **siblings of the currently clicked a tag**. After that, you trigger the `slideToggle()` to show or hide the **current** submenu. That way, if you first click on ABOUT and then without clicking on ABOUT again (and triggering the toggle) you click on WORK for instance, then the submenu changes correctly.

# c# - 在 C# 中获取资源管理器窗口的排序

> ID：14226704
> 
> 赞同：0
> 
> 时间：2013-01-09T00:59:44.013
> 
> 标签：c#, sorting, explorer

> **可能重复：**
> [如何按名称对文件列表进行排序以匹配 Windows 资源管理器显示它们的方式？](https://stackoverflow.com/questions/1012985/how-would-i-sort-a-list-of-files-by-name-to-match-how-windows-explorer-displays)

我正在制作的 C# 程序是一个图片管理器。当然，如果我在 Windows 资源管理器中双击图像，它会用我的程序打开图像。该程序还获取同一文件夹中的所有图像，以允许从一个切换到另一个。

我想知道，如果可能的话，如何对资源管理器窗口进行排序（如果它是按名称、类型、修改日期排序的......），以便在我的程序中进行相同的排序，以便用户可以完全按照打开图像时看到的顺序在我的程序中的图像之间导航。

谢谢

# c# - 读取访问数据库并绑定到标签

> ID：14226705
> 
> 赞同：0
> 
> 时间：2013-01-09T01:00:01.783
> 
> 标签：c#, asp.net, ms-access

我无法将检索到的数据绑定到标签中。我将从标签创建一个会话变量数据是最近新记录的供应商ID这里是.cs文件

```
 protected void InsertSupplier(object sender, EventArgs e)
    {
        OleDbConnection mDB = new OleDbConnection();
        mDB.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data source="
        + Server.MapPath("~/App_Data/IESDatabase.accdb");
        OleDbCommand cmd;

        string strSQLInsert = "INSERT INTO "
       + " Supplier (sName, sPhone, sAddress, sCompany, sStatus)"
       + " VALUES (@name, @phone, @add, @co, @status)";

        mDB.Open();
        cmd = new OleDbCommand(strSQLInsert, mDB);
        cmd.Parameters.AddWithValue("@name", txtfullname.Text);
        cmd.Parameters.AddWithValue("@phone", Phone.Text);
        cmd.Parameters.AddWithValue("@add", txtaddress.Text);
        cmd.Parameters.AddWithValue("@co", CompanyNameBox.Text);
        cmd.Parameters.AddWithValue("@status", lblStatus.Text);
        cmd.ExecuteNonQuery();
        mDB.Close();
        /*
        OleDbDataReader rdr;
        string strSQLSelect = "SELECT sSupplierId FROM Supplier ORDER BY sSupplierId";
        mDB.Open();
        cmd = new OleDbCommand(strSQLSelect, mDB);
        rdr = cmd.ExecuteReader();

        while (rdr.Read() == true)
        {
           lblSupplier.Text = rdr["sSupplierId"].ToString();
        }
        Session["sSupplierId"] = (string)lblSupplier.Text;
        */
        MessageBox.Show("Insert New Supplier is successful", "Admin");
        Response.Redirect("Adminpage.aspx");
    } 
```

# javascript - 使用“Tab”键向下移动一行

> ID：14226709
> 
> 赞同：0
> 
> 时间：2013-01-09T01:00:21.377
> 
> 标签：javascript, jsp

我已经使用 javascript 设置了多个文本字段

```
<input type=text name="<%=ID%>" value="<%=valueID%> > 

TextF11    TextF12   TextF13   TextF14
TextF21    TextF22   TextF23   TextF24 
TextF31    TextF32   TextF33   TextF34 
```

当我填写 TextF11 并按“Tab”或“向下箭头”时，我希望系统关注 TextF21。然后是TextF31。

有办法吗？

# javascript - 如何确定 setTimeout 是否在后台运行

> ID：14226711
> 
> 赞同：2
> 
> 时间：2013-01-09T01:00:42.817
> 
> 标签：javascript, settimeout

我在停止之前触发的 setTimeout 函数时遇到问题。

我发现了一些相关问题，给出的解决方案是将 time_out 变量放在函数之外以使其工作。我试过了，但还是不行。

```
 this.A = function(){
        if(time_out) clearTimeout(time_out);  
        // time_out is nothing here and this will return error

        time_out = setTimeout(function(){  }, 3000);
    }

    -------------------------------------------------

     this.time_out = 0;
     this.A = function(){
          if(this.time_out) clearTimeout(this.time_out);  
          //will run through, but the setTimeout setup previously will keep running...

         this.time_out = setTimeout(function(){  }, 3000);
     } 
```

* * *

### 更新

我厌倦了将整个功能放入一个元素中，并在重置时将其调用

```
if(el.data('time_out')) clearTimeout(el.data('time_out')); 
```

这很完美

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:11:06.457

确保您在适当的范围内。

```
var timerFun = function(){
     var me = this;
     me.timer= undefined;

     me.startTimeout = function(){
        me.timer = setTimeout(me.SetterFunc, 3000);
     };

     me.setterFunc = function(){
        alert('oh hai!');
        me.ClearTimer();
     };

     me.clearTimer = function(){
        if(me.timer!= undefined){
            me.clearTimeout(me.timer);
        }
     };
     return me;
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:08:44.200

创建超时触发函数

```
startTimeOut(){
started = 1;
setTimeout(yourFunction, 2000);
} 
```

那么你可以检查是否started=1你可以停止它，如果started=0意味着它已经停止

```
stopTimeOut(){
started = 0;
clearTimeout(yourFunction);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:18:13.557

停止 setTimeout 很容易。

```
var timeout = setTimeout(function(){
    myFunc();
}, 1000);

function myFunc(){
    //do something...
}; 
```

清除超时

```
clearTimeout(timeout); 
```

# c++ - C++ 项目的 cmake vs waf

> ID：14226717
> 
> 赞同：14
> 
> 时间：2013-01-09T01:01:50.123
> 
> 标签：c++, build, cmake, build-automation, waf

我发现了类似的主题：[Autotools、Cmake 和 Scons 之间有什么区别？](https://stackoverflow.com/questions/4071880/autotools-vs-cmake-vs-scons)，但我的问题有点不同，我认为答案也可能是其他的。

我发现很多文章都说 waf 不稳定（API 更改），尚未准备好投入生产等（但所有这些文章都有 2 或 3 年的历史）。

如果我想，应该使用以下哪些构建工具：

*   创建大型 C++ (11) 项目 - 假设是一个复杂的编译器
*   与 LLVM 一起使用
*   确保它灵活且易于使用
*   确保它足够快
*   在所有标准平台下编译（基础平台是Linux，但我也想在Windows和MacOSX下编译）

阅读了很多文章，我发现 Cmake 和 waf 是可用的“最佳”工具，但我没有使用它们，而且很难找到任何比较，这不是很偏颇（就像 scons 作者的比较）和不是很老。真的

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T16:30:49.077

waf 几乎涵盖了您的所有要求...

*   API 更改：没有问题，因为 waf 应包含在源 tarball 中（<100Ko）

*   大项目：您可以在子目录中拆分配置（可以继承上下文）。我在 C/C++/fortran77/fortran90/python/Cython 中处理过超过 10k 个文件的项目，包括 doxygen/sphinx 中的文档。

*   灵活性和易用性：您可以在 python 中添加额外的模块（[http://code.google.com/p/waf/wiki/AddingNewToolsToWaf](http://code.google.com/p/waf/wiki/AddingNewToolsToWaf)）

*   快速：任务可以并行运行：[http ://www.retropaganda.info/~bohan/work/psycle/branches/bohan/wonderbuild/benchmarks/time.xml](http://www.retropaganda.info/~bohan/work/psycle/branches/bohan/wonderbuild/benchmarks/time.xml)

*   多平台：您可以在 Python 可用的任何地方运行 Waf，包括 Windows 和 MacO。Waf 与 mscvc、gcc、icc 和其他编译器兼容。您可以制作视觉/日食项目。

~~...但 waf 似乎对 llvm 有问题：[http ://code.google.com/p/waf/issues/detail?id=1252](http://code.google.com/p/waf/issues/detail?id=1252)~~

编辑：正如 Wojciech Danilo 所说，LLVM 问题已得到修复

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T03:28:19.480

我目前正在通过 C++11 和 LLVM 将 CMake 用于我自己的语言实现。

我喜欢 CMake，因为它易于使用的语法。LLVM 可以使用简单的“load_package”命令加载。之后，您可以使用所需的所有头文件和库。CMake 允许子脚本从父脚本继承变量。所以你不需要在每个子目录中设置变量和加载包。

C++11 支持取决于您要使用的编译器。总而言之，CMake 只是一个用于创建“真实”构建脚本的布局。

当你使用 make 时，你可以使用 make 的 --jobs=N 来加速多核平台上的编译。在 Windows 上，您可以生成 Visual Studio 2012 项目文件并使用 Microsoft 的构建系统并使用他们的构建作业来加快编译过程。您应该始终为构建文件（myproject/build 或其他东西）创建一个子文件夹。这样你就可以保持你的源代码树干净（cd build; cmake ..; cd ..）。

我不能代表所有其他工具。

# eclipse - 日食Tomcat 7.0

> ID：14226721
> 
> 赞同：12
> 
> 时间：2013-01-09T01:02:11.433
> 
> 标签：eclipse, tomcat7

我正在尝试在 Eclipse 中设置 Apache Tomcat 7.0 服务器，但我无法让向导让我创建它。像这样选择 Tomcat v7.0 后，我的 NEXT 按钮不会突出显示：

![在此处输入图像描述](../Images/0705d60b38dc63138bfe246173999eb8.png)

尝试创建任何其他版本的 Tomcat 时我没有同样的问题，只有 v7.0：

![在此处输入图像描述](../Images/9b1e106173531f1ee4e96f1b8038062c.png)

关于我的系统的信息：-我之前已经启动并运行它，但必须重新启动我的系统，Eclipse 没有受到影响，因为它位于不同的硬盘上-我已经重新安装了 Tomcat 7.0 两次，一次到驱动器包含这个特定的 Eclipse 工作区，以及一次到我的主操作系统驱动器，都无济于事。

谁能告诉我我在这里做错了什么或这里发生了什么？

非常感谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T01:16:56.297

在您的 Eclipse 菜单中，转到窗口 > 服务器 > 运行时环境 > 点击添加 > 选择 tomcat 7 > 点击下一步按浏览并导航到安装目录并完成。会解决这个问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-24T02:23:21.797

1.  关闭日食
2.  在 {workspace-directory}/.metadata/.plugins/org.eclipse.core.runtime/.settings 中删除以下两个文件：org.eclipse.wst.server.core.prefs org.eclipse.jst.server.tomcat。核心首选项
3.  重启 Eclipse

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-04T11:34:47.893

1.关闭 Eclipse 2.在 {workspace-directory}/.metadata/.plugins/org.eclipse.core.runtime/.settings。删除以下两个文件：org.eclipse.wst.server.core.prefs org.eclipse.jst.server.tomcat.core.prefs 3.重启Eclipse

# php - PHP 代码阻止加载网站内容

> ID：14226722
> 
> 赞同：-2
> 
> 时间：2013-01-09T01:02:18.777
> 
> 标签：php, sql, function, block

我在使用以下代码时遇到问题。它只是阻止站点的其余部分加载，并且没有执行它的预期功能。

主PHP前面有一个JS，如下所示：

```
<script type="text/javascript">
    //http://jsbin.com/ujuse/1/edit
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var boxes = [];
        // You could save a little time and space by doing this:
        var name = this.name;
        // critical change on next line
        $("input[type='checkbox'][name='"+this.name+"']:checked").each(function() {
            boxes.push(this.value);
        });
        if (boxes.length) {
            $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('store/indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('store/indexMain.php', function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
});
</script> 
```

* * *

```
<?php
function echoCheckboxSet($con, $header, $divClass, $columnName, $setName) {
$checkboxes = $con -> prepare("SELECT DISTINCT $columnName FROM item_descr ORDER BY $columnName ASC");
$checkboxes->execute();
?>
<div class="bgFilterTitles">
    <h1 class="filterTitles"><?php echo $header;?></h1>
</div>
<div class="<?php echo $divClass; ?>">
<?php
    while ($box = $checkboxes->fetch(PDO::FETCH_ASSOC)):
    $boxColumnName = str_replace('_',' ',$box[$columnName]);
?>
        <input type='checkbox' class='regularCheckbox' name='<?php echo $setName; ?>' value='<?php echo $box[$columnName]; ?>' />
        <font class='similarItemsText'><?php echo $boxColumnName; ?></font>
        <br />
<?php
endwhile;
?>
</div>
<?php
} // end of echoCheckboxSet

// Call our method twice, once for colors and once for prices
echoCheckBoxSet("COLOR", "colors", "color_base1", "color");
echoCheckBoxSet("PRICE", "prices", "price", "price");
?> 
```

* * *

```
 Warning: Missing argument 5 for echoCheckboxSet(), called in 
\store\indexLeftBar.php on line 58 and defined in \store\indexLeftBar.php on line 35

    Fatal error: Call to a member function prepare() on a non-object in \store\indexLeftBar.php on line 36 
```

你看有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:05:29.960

`$con`被使用，但不在范围内：

```
function echoCheckboxSet($header, $divClass, $columnName, $setName) {
    $checkboxes = $con->....
} 
```

要么将其作为参数（如下所示）传递给函数，要么将其声明为`global`（不推荐后者）。

```
function echoCheckboxSet($con, $header, $divClass, $columnName, $setName) {
    $checkboxes = $con->....
}

$con = some_method_that_connects_to_your_db(); // <!-- Still need this
echoCheckBoxSet( $con, "COLOR", "colors", "color_base1", "color"); 
```

# asp.net-mvc-4 - MVC4 在重定向时不使用主布局

> ID：14226725
> 
> 赞同：9
> 
> 时间：2013-01-09T01:02:39.110
> 
> 标签：asp.net-mvc-4

我有一个使用 MVC4 返回视图的控制器，但是对于这个特定的视图，我不希望它使用我现有的主布局。这有可能实现吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T01:04:58.780

放

```
@{
Layout = null;
} 
```

在您的视图文件的顶部。您还可以提供任何其他布局文件的路径。

您还可以在给定的操作中将您的退货声明更改为

```
return PartialView(); 
```

所以它不会尝试用布局文件包装你的操作结果

# jquery - jQuery - 为什么微调器没有出现在 safari 中

> ID：14226734
> 
> 赞同：0
> 
> 时间：2013-01-09T01:03:29.990
> 
> 标签：jquery, html

我有这个 jQuery

```
$(document).ready(function(){
  $('#credit_btn, #checkout_btn').click(function(){
    $("#content_container .notice, #content_container .error").remove();
    $('#loading').show();
  });
}); 
```

的HTML

```
<div id="loading" style="display: none;">
  <img alt="spinner" border="0" src="/assets/spinner.gif">
</div>
<input class="bigbutton" data-disable-with="One Moment, Processing..." id="checkout_btn" name="commit" type="submit" value="Next Step: Checkout"> 
```

为什么旋转没有出现，当我出现时它出现了

```
 $j('#credit_btn, #checkout_btn').click(function(){
    $j("#content_container .notice, #content_container .error").remove();
    $j('#loading').show();
    return false;
  }); 
```

这里发生了什么，我能做些什么吗？提前致谢

更新

我也测试了这个 jquery

```
 $('#credit_btn, #checkout_btn').click(function(e){
    e.preventDefault();
    $("#content_container .notice, #content_container .error").remove();
    $('#loading').show();
    $(this).closest("form").submit();
  }); 
```

微调器没有再次出现，但是当我删除该行时它会出现`$(this).closest("form").submit();`...我很困惑...为什么表单提交有什么关系为什么加载程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:15:23.037

发生这种情况是因为您的表单被提交，因此页面被重新加载。（*您正在看到表单将您引导至的页面*）

这是正常的浏览器行为。如果您需要保留在当前页面上，您可能想尝试使用 AJAX 提交表单。

# linux - 在 64 位 linux 主机上构建 32 位 linux 内核时出错

> ID：14226735
> 
> 赞同：0
> 
> 时间：2013-01-09T01:03:36.133
> 
> 标签：linux, kernel

我正在尝试在具有 2.6.9（相同版本）的 64 位 linux 主机上构建 32 位 linux 内核 2.6.9。做了一些谷歌搜索并尝试了以下方法：

步骤 1) 使 ARCH=i386 CFLAGS=-m32 menuconfig

步骤 2) 使 ARCH=i386 CFLAGS=-m32

第 1 步没问题。但第 2 步出现以下错误。我做错了什么？

```
make ARCH=i386 CFLAGS=-m32 
< snip >
In file included from include/asm/smp.h:18,
                 from include/linux/smp.h:17,
                 from include/linux/sched.h:23,
                 from arch/i386/kernel/asm-offsets.c:7:
include/asm/mpspec.h:6:25: mach_mpspec.h: No such file or directory
In file included from include/asm/smp.h:18,
                 from include/linux/smp.h:17,
                 from include/linux/sched.h:23,
                 from arch/i386/kernel/asm-offsets.c:7:
include/asm/mpspec.h:8: error: `MAX_MP_BUSSES' undeclared here (not in a function)
include/asm/mpspec.h:22: error: `MAX_IRQ_SOURCES' undeclared here (not in a function)
In file included from include/linux/smp.h:17,
                 from include/linux/sched.h:23,
                 from arch/i386/kernel/asm-offsets.c:7:
include/asm/smp.h:72:26: mach_apicdef.h: No such file or directory
make[1]: *** [arch/i386/kernel/asm-offsets.s] Error 1
make: *** [arch/i386/kernel/asm-offsets.s] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:32:26.397

假设您已经在机器上安装了构建所需的一切，这`make ARCH=i386`应该足够了。我几乎每天都使用它在“ubuntu 12.04”上构建 i386。

如果您之前构建了一个 64 位内核，那么您应该拥有一切，并且您可能需要“make clean”甚至“make mrproper”[将您的 .config 保存在对后者安全的地方]，因为我知道例如asm_offsets.s 在 32 位和 64 位之间会有所不同。

# php - Apache/PHP 过滤掉 POST 字段（通过 curl 发送）

> ID：14226746
> 
> 赞同：2
> 
> 时间：2013-01-09T01:04:39.980
> 
> 标签：php, apache, libcurl

你好亲爱的Stackoverflowers！

我的项目有问题，关于客户端-> 服务器通信。我想将数据从 C++ 程序传输到服务器。为此，我选择了 HTTP 作为通信协议，因为它很容易通过类似的 PHP 脚本在 web 服务器上进行处理。C++ 程序通过 HTTP POST 向服务器发送数据（或命令），服务器通过 PHP 脚本生成纯文本响应（Mime-Type text/plain）。生成的响应相对较短，包含简短的成功或失败消息，也许还有一点“有效负载”（全是纯文本）。

[在我的开发机器（本地 Apache 服务器lampp](http://www.apachefriends.org/en/xampp.html)）上，一切似乎都运行良好。但是，今天我尝试在实时网络服务器（运行 Apache + PHP + MySQL 的虚拟网络服务器服务）上移动服务器 PHP 脚本以进行测试，并且，*有些东西*停止了工作......

## 问题

一个服务器端 PHP 脚本，用于将来自 C++ 应用程序的数据存储在 MySQL 数据库中。我要存储在 MySQL 数据库中的数据是一个原始的 json 字符串（它是实验数据，稍后处理）。json 字符串由 C++ 应用程序形成。它大约有 70 kB 大（所以它很大！）并通过 POST 多部分请求发送到网络服务器。多部分请求是通过 libcurl 形成的：

```
 foreach (const HttpKeyValuePair& kv, localServerCommand.httpKeyValuePairs) {
      if (curl_formadd(&httpPostFirst, &httpPostLast, CURLFORM_PTRNAME, kv.key.c_str(), 
                                                      CURLFORM_NAMELENGTH, (long) kv.key.size(),
                                                      CURLFORM_PTRCONTENTS, kv.value.c_str(), 
                                                      CURLFORM_CONTENTSLENGTH, (long) kv.value.size(),
                                                      CURLFORM_CONTENTTYPE, "text/plain",
                                                      CURLFORM_END) != 0) {
        cerr << "Error assembling form data" << endl;
      }
    }

    [...]

    CURL* curl = curl_easy_init();
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &receiveData);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &receiveBuffer);
    curl_easy_setopt(curl, CURLOPT_URL, url.c_str());

    if (useSimplePost) { // Only true if postString.size() < 200 byte 
      curl_easy_setopt(curl, CURLOPT_POST, 1);
      curl_easy_setopt(curl, CURLOPT_POSTFIELDS, postString.c_str());
    } else {
      // Mutlipart
      curl_easy_setopt(curl, CURLOPT_HTTPPOST, httpPostFirst);
    }

    curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, curlErrorBuffer); 
    curl_easy_setopt(curl, CURLOPT_FAILONERROR, 1);
    curl_easy_setopt(curl, CURLOPT_TIMEOUT, 30);
    CURLcode errorCode = curl_easy_perform(curl);
    curl_easy_cleanup(curl); 
```

（只是为了解决任何疑问：我检查了wireshark......他**正在**使用多部分帖子。使用简单帖子的分支仅存在，因为我认为可以通过省略多部分标题来节省网络连接更频繁，小要求。）

但是，现在有趣的部分是：我的服务器端脚本从不接收 json 字符串。应该携带 json 字符串的字段，称为“数据”，不是 PHP 中 $_POST 结构的一部分！更奇怪的是，所有其他字段都在那里。出于测试目的，我将服务器上的 PHP $_GET、$_POST 和 $_FILES 变量转储到一个日志文件中，对于相关请求，它们看起来像这样：

```
 ------
   GET  
  ------
  array (
  )
  ------
   POST 
  ------
  array (
    'id' => '130',
    'nonceid' => '4656',
    'authentication' => 'fjOynwtBDE/g/llkQlSgrGUx0ttfJMarExF6E3jg0/QeRgzvp+Chr0XqEIzoK6Rm4/19Q6KIA/Lx32Ti1Y+cQhVdF70AS8GaI2i+0FO3Uj7WfFl4FotUzpbyLpD5/AUe0KOiGA==',
  )
  ------
   FILES 
  ------
  array (
  ) 
```

使用我的本地服务器时，“数据”字段是 $_POST 的一部分。'data' 字段是发送到服务器的第一个字段，这意味着它首先通过上面的 curl_formadd 循环写入，TCP 流中的第一个字段通过wireshark 检查，也是 $_POST 中的第一个字段我的本地服务器上的数组。

## 服务器测试

发现这个问题后，我测试了服务器并尝试使用 Firefox 通过 WordPress 上传文件，以测试服务器是否拒绝*任何*大的 $_POST 字段。然而，上传似乎工作（测试上传一个大的PNG，比我要上传的json数据大）。

下一个测试是使“数据”字段更小。我测试上传〜900字节的重复字符串

```
"shorter  amount of data with special characters +/=?=?$Â§+#+\'*>< " 
```

这也有效（使用多部分帖子）。

## 问题

我希望长的“数据”字段可以作为 $_POST 变量的一部分，就像它在我的开发机器上一样。我不知道是什么导致了这个问题。它可以是我正在使用的多部分 mime 类型（“text/plain”）吗？Apache/PHP 中是否有任何限制 POSTFIELD 大小的配置*（*我只知道整体 POST 大小限制）？

我怀疑这是一个奇特的服务器配置问题。但是，我对冗长且（如果您不花时间在上面）复杂的 httpd.conf 知之甚少。

有谁知道是什么导致了这个问题以及如何在我的本地服务器上重现它？甚至如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:40:06.820

好吧，我找到了一种解决方法，但不是导致过滤大型 POST 字段的原因。我首先对缺少的 POST 字段进行了一些额外的测试。

正如 Robbie 建议的那样，我尝试欺骗 Firefox 标头（Agent = "Mozilla/5.0", ...），但没有成功。

下一步是划分“允许的数据包大小”，这似乎是 65536（我测试的最接近的间隔是 65000-66000 字节）；之后，任何超过此限制的字段大小都消失了。

发现这一点后，我很沮丧，重新打开了 libcurl 的 API 文档，并更改了将数据作为多部分帖子的一部分发送到服务器的方式。大型帖子字段现在打包为文件，而不是字段，这与浏览器进行文件上传的方式相同。

```
 if (kv.value.size() > 2048) {
        valueString = "";
        if (curl_formadd(&httpPostFirst, &httpPostLast, CURLFORM_PTRNAME, kv.key.c_str(), 
                                                        CURLFORM_NAMELENGTH, (long) kv.key.size(),
                                                        CURLFORM_BUFFERPTR, kv.value.c_str(), 
                                                        CURLFORM_BUFFERLENGTH, (long) kv.value.size(),
                                                        CURLFORM_FILENAME, kv.key.c_str(), 
                                                        CURLFORM_CONTENTTYPE, "text/plain",
                                                        CURLFORM_END) != 0) {
          cerr << "Error assembling form data" << endl;
        } 
```

然而，在 PHP 方面，这意味着我的数据确实作为 $_POST 字段进入脚本，但作为 $_FILES 结构的一部分。但是，我只允许我的程序上传的消息认证机制要求$_POST结构中的所有数据，并且数据字段的顺序没有改变。因此，除了将我的数据作为文件发送之外，我还在我的 POST（通过 libcurl）中添加了一个与文件同名的空字段（“data=”）。

然后在 PHP 中，我将代码添加到我的“配置脚本”中，它总是首先加载，它从发送的数据文件和接收的 $_POST 数据中重新组装原始的 $_POST 消息：

```
// Reassamble $_POST structure in case parts of it have been sent as file
foreach ($_POST as $pkey => $pvalue) {
  if (strlen($pvalue) == 0) {
    // Perhaps it was sent as file?
    if (isset($_FILES[$pkey])) {
      // Yes, as file! - lets read it in and put it back into $_POST
      $fileData = $_FILES[$pkey];

      if ($fileData["error"] != 0) {
        handleError("File transfer of file '" . $pkey . "' failed");
      }

      $postDataFileHandle = fopen($fileData["tmp_name"], "rb");
      if (!$postDataFileHandle) {
        handleError("Cannot read required \$_POST field that was sent as file");
      }
      $data = fread($postDataFileHandle, $fileData["size"]);
      if ($data === FALSE) {
        handleError("Error on reading required \$_POST field that was sent as file");
      }
      fclose($postDataFileHandle);

      $_POST[$pkey] = $data;
    }
  }
} 
```

这可行，但我仍然不知道Apache 为何/如何过滤POST*字段。*也许它不是由 Apache 完成的，但我的托管服务提供商会进行某种深度数据包过滤。

仍然很困惑，但它现在可以工作了，感谢所有试图提供帮助的人！

# c# - HttpNotFound 是如何实现的以及如何为其他错误创建类似的方法？

> ID：14226751
> 
> 赞同：0
> 
> 时间：2013-01-09T01:05:08.780
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在 ASP.NET MVC 中，`Controller`类只有一组有限的方法可用于从操作中返回某些内容。

有一种`HttpNotFoundResult HttpNotFound()`方法，但没有其他方法可以解决错误。

里面到底是什么`HttpNotFound()`？如何为其他错误代码编写类似的方法，例如`401 Unauthorized`or `403 Forbidden`or `406 Not Acceptable`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:09:52.180

它是这样实现的：

```
public class HttpNotFoundResult : HttpStatusCodeResult
{
    public HttpNotFoundResult() : this(null)
    {
    }

    public HttpNotFoundResult(string statusDescription) : 
           base(HttpStatusCode.NotFound, statusDescription)
    {
    }
} 
```

执行时，[HttpStatusCodeResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpstatuscoderesult%28v=vs.98%29.aspx)只是将状态代码和状态描述设置为`context.HttpContext.Response`. 您可以从[HttpStatusCodeResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpstatuscoderesult%28v=vs.98%29.aspx)类继承并创建自己的结果。例如

```
public class HttpUnauthorizedResult : HttpStatusCodeResult
{
    public HttpUnauthorizedResult() : this(null)
    {
    }

    public HttpUnauthorizedResult(string statusDescription) : 
           base(HttpStatusCode.Unauthorized, statusDescription)
    {
    }
} 
```

# android - 如何成功地将蓝牙搜索结果添加到包含配对设备的阵列适配器

> ID：14226757
> 
> 赞同：0
> 
> 时间：2013-01-09T01:05:38.633
> 
> 标签：android, android-listview, bluetooth

我正在做这个应用程序，它会在手机上选择所有蓝牙配对设备并填充一个 ArrayAdapter，然后它会搜索范围内的蓝牙设备并更新 arrayAdapter。但是当我尝试运行此应用程序时出现错误。

```
public class MainActivity extends Activity implements OnItemClickListener {

ListView JlistView1;
BluetoothAdapter btAdpter;
ArrayAdapter<String> arrayAdapter;
Set<BluetoothDevice> devicesArray;
ArrayList<String> pairedDevices;
ArrayList<BluetoothDevice> devices;
IntentFilter filter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setUP();
    bluetoothStatus();
    gettingPairedDevices();
    startingDiscovering();
    searchDevicesInrange();
}

public void setUP() {
    // setting up user interface
    pairedDevices = new ArrayList<String>();
    devices = new ArrayList<BluetoothDevice>();
    JlistView1 = (ListView) findViewById(R.id.listView1);
    btAdpter = BluetoothAdapter.getDefaultAdapter();
    arrayAdapter = new ArrayAdapter<String>(getApplicationContext(),
            android.R.layout.simple_list_item_1, pairedDevices);
    JlistView1.setAdapter(arrayAdapter);
    JlistView1.setOnItemClickListener(this);
}

public void bluetoothStatus() {
    if (btAdpter == null) {
        // there is not driver
        Toast.makeText(getApplicationContext(),
                "There is no bluetooth adapter", 0).show();
        finish();
    } else {
        if (btAdpter.isEnabled()) {
            Toast.makeText(getApplicationContext(), "Bluetooth is enabled",
                    Toast.LENGTH_SHORT).show();

        } else {

            enablingBluetooth();
        }
    }
}

public void enablingBluetooth() {
    Intent filter = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    startActivityForResult(new Intent(filter), 0);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_CANCELED) {
        Toast.makeText(getApplicationContext(),
                "Bluetooth must be enabled to continue", Toast.LENGTH_SHORT)
                .show();
        finish();
    }

}

public void gettingPairedDevices() {
    devicesArray = btAdpter.getBondedDevices();
    if (devicesArray.size() > 0) {
        for (BluetoothDevice device : devicesArray) {
            pairedDevices.add(device.getName());
        }
    }

}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    if (btAdpter.isDiscovering()) {
        btAdpter.cancelDiscovery();
    }
    String device = pairedDevices.get(arg2).toString();
    Toast.makeText(getApplicationContext(), "Your selected " + device,
            Toast.LENGTH_SHORT).show();
}

public void searchDevicesInrange() {
    filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    registerReceiver(RangReciever, filter);

    filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
    registerReceiver(RangReciever, filter);

    filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
    registerReceiver(RangReciever, filter);

    filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);
    registerReceiver(RangReciever, filter);

}

BroadcastReceiver RangReciever = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String action = intent.getAction();
        // if devices found
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            BluetoothDevice device = intent
                    .getParcelableExtra(BluetoothDevice.ACTION_FOUND);
            devices.add(device);
            pairedDevices.add(device.getName() + " new");

        } else if (BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(action)) {

        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED
                .equals(action)) {

        } else if (BluetoothAdapter.ACTION_STATE_CHANGED.equals(action)) {

            if (btAdpter.getState() == btAdpter.STATE_OFF) {// turn on
                                                            // bluetooth
                                                            // again
                enablingBluetooth();
            }
        }

    }
};

public void startingDiscovering() {
    btAdpter.cancelDiscovery();
    btAdpter.startDiscovery();
} 
```

日志输出

```
01-09 14:00:57.430: E/ActivityThread(1463): Activity com.jingo.bluetoothjingo.MainActivity has leaked IntentReceiver com.jingo.bluetoothjingo.MainActivity$1@4051f108 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-09 14:00:57.430: E/ActivityThread(1463): android.app.IntentReceiverLeaked: Activity com.jingo.bluetoothjingo.MainActivity has leaked IntentReceiver com.jingo.bluetoothjingo.MainActivity$1@4051f108 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:799)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:575)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:857)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:844)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:838)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
01-09 14:00:57.430: E/ActivityThread(1463):     at com.jingo.bluetoothjingo.MainActivity.searchDevicesInrange(MainActivity.java:114)
01-09 14:00:57.430: E/ActivityThread(1463):     at com.jingo.bluetoothjingo.MainActivity.onCreate(MainActivity.java:40)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.os.Looper.loop(Looper.java:150)
01-09 14:00:57.430: E/ActivityThread(1463):     at android.app.ActivityThread.main(ActivityThread.java:4263)
01-09 14:00:57.430: E/ActivityThread(1463):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 14:00:57.430: E/ActivityThread(1463):     at java.lang.reflect.Method.invoke(Method.java:507)
01-09 14:00:57.430: E/ActivityThread(1463):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-09 14:00:57.430: E/ActivityThread(1463):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-09 14:00:57.430: E/ActivityThread(1463):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:08:39.107

在您的情况下，您正在多次`SearchDevicesInRange()`注册s 而无需调用. 如果您需要所有这些，您应该能够使用添加到接收器而不是创建新接收器。**[这篇文章](https://stackoverflow.com/questions/3577566/android-leaked-intentreceiver-exception-is-being-thrown-even-though-i-call-unre)**讨论了这个问题，您可能会发现**[这些文档](http://developer.android.com/reference/android/content/IntentFilter.html#addAction(java.lang.String))**也很有帮助。我希望这有帮助。`IntentReceiver``unRegister()``filter.addAction(...)`

# jquery - 如何实现更新两个 div 的 div 处理程序/调整器？

> ID：14226758
> 
> 赞同：1
> 
> 时间：2013-01-09T01:05:44.187
> 
> 标签：jquery, html, underscore.js, zepto

我正在寻找一种方法来构建处理程序/调整大小，如 jsfiddle 所示（下面的屏幕截图）。我的应用程序有两个高度为 50% 的 div，我想找到一种方法来允许用户调整 div 的大小，就像在 jsfiddle 中一样。使用 JavaScript 和/或 jQuery 最简洁的方法是什么。谢谢

![调整大小处理程序](../Images/035ac73235970878dbf1c1ad71821762.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:23:39.300

使用纯 CSS3，您可以使用以下`resize`属性实现此目的：

[http://www.css3.info/preview/resize/](http://www.css3.info/preview/resize/)

CSS：

```
div
{
    resize: both;
} 
```

**缺点是并非所有浏览器都支持它：**

[http://caniuse.com/css-resize](http://caniuse.com/css-resize)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T01:10:37.597

可以使用 jQUEyUI `rezizeable`。[http://jqueryui.com/resizable/](http://jqueryui.com/resizable/)

在一个 div 上设置可调整大小并使用`alsoRezize`选项连接另一个

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-30T17:48:38.090

它被称为“用户界面布局”。如果你搜索它，你会发现像[这样的](http://w2ui.com/web/demos/#!layout/layout-2)例子。

```
<script type="text/javascript">
$(function () {
    var pstyle = 'border: 1px solid #dfdfdf; padding: 5px;';
    $('#layout').w2layout({
        name: 'layout',
        padding: 4,
        panels: [
            { type: 'top', size: 50, resizable: true, style: pstyle, content: 'top' },
            { type: 'left', size: 200, resizable: true, style: pstyle, content: 'left' },
            { type: 'main', style: pstyle, content: 'main' },
            { type: 'right', size: 200, resizable: true, style: pstyle, content: 'right' }
        ]
    });
});
</script> 
```

# python - 在Python中从mysql输出没有格式的值

> ID：14226761
> 
> 赞同：0
> 
> 时间：2013-01-09T01:05:56.700
> 
> 标签：python, mysql, json

我正在用 Python 和 Flask 为我的应用程序构建 API。我正在尝试以 JSON 格式输出一些数据，但是我从我的 sql 查询中得到了格式奇怪的数据。我希望将数字（即字段 initial_price）视为数字，而不是小数（'3.99'），与 id 和时间戳格式类似。

另外，它是生成 JSON 的正确方法吗？这是我的 API 的输出：

```
$ curl 127.0.0.1:5000/1/product?code="9571%2F702"
[{'update_time': datetime.datetime(2013, 1, 7, 22, 25, 50), 'code': '9571/702', 'description': '', 'gender': '', 'brand': 'Zara', 'initial_price': Decimal('3.99'), 'image_link': 'http://static.zara.net/photos//2012/I/0/3/p/9571/702/401/9571702401_1_1_3.jpg', 'currency': 'GBP', 'colors': 'NAVY', 'link': 'http://www.zara.com/webapp/wcs/stores/servlet/product/uk/en/zara-neu-W2012-s/341501/883021/', 'current_price': Decimal('990.00'), 'original_category': 'Girl (2-14 years)', 'id': 1623L, 'name': '"I LOVE ..." T-SHIRT'}, 
{'update_time': datetime.datetime(2013, 1, 7, 22, 25, 50), 'code': '9571/702', 'description': '', 'gender': '', 'brand': 'Zara', 'initial_price': Decimal('3.99'), 'image_link': 'http://static.zara.net/photos//2012/I/0/3/p/9571/702/401/9571702401_1_1_3.jpg', 'currency': 'GBP', 'colors': 'LIGHT', 'link': 'http://www.zara.com/webapp/wcs/stores/servlet/product/uk/en/zara-neu-W2012-s/341501/883021/', 'current_price': Decimal('990.00'), 'original_category': 'Girl (2-14 years)', 'id': 1624L, 'name': '"I LOVE ..." T-SHIRT'}, 
{'update_time': datetime.datetime(2013, 1, 7, 22, 25, 50), 'code': '9571/702', 'description': '', 'gender': '', 'brand': 'Zara', 'initial_price': Decimal('3.99'), 'image_link': 'http://static.zara.net/photos//2012/I/0/3/p/9571/702/401/9571702401_1_1_3.jpg', 'currency': 'GBP', 'colors': 'ECRU', 'link': 'http://www.zara.com/webapp/wcs/stores/servlet/product/uk/en/zara-neu-W2012-s/341501/883021/', 'current_price': Decimal('990.00'), 'original_category': 'Girl (2-14 years)', 'id': 1625L, 'name': '"I LOVE ..." T-SHIRT'}] 
```

我的代码如下：

```
from flask import Flask, url_for, session, redirect, escape, request
from subprocess import Popen, PIPE
import socket
import MySQLdb
import urllib

@app.route('/1/product')
def product_search():

[some not important stuff here...]

#creating list of codes with lowest Damerau-Levenshtein numbers
best_matching_codes = []
for k, v in lv:
    if v == min:
        best_matching_codes.append(k)

#returning JSON with best matching products info
products_json = []
for code in best_matching_codes:
    cur = db.cursor()
    query = "SELECT * FROM %s WHERE code LIKE '%s'" % (PRODUCTS_TABLE_NAME, product_code)
    cur.execute(query)
    columns = [desc[0] for desc in cur.description]
    rows = cur.fetchall()
    for row in rows:
        products_json.append(dict((k,v) for k,v in zip(columns,row)))   
return str(products_json) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:07:28.977

使用`json`模块。它将`json`从 a正确输出`dict`：

```
import json
return json.dumps(products_json) 
```

* * *

使用`str`不会产生有效的`json`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:07:58.200

您需要使用 json 库来生成 json。

添加到顶部：

```
import json 
```

将最后一行更改为：

```
return json.dumps(products_json) 
```

# android - 无法调度事件：类 android.widget.RelativeLayout 到处理程序

> ID：14226762
> 
> 赞同：0
> 
> 时间：2013-01-09T01:05:57.777
> 
> 标签：android, android-widget, android-maps-v2

我正在使用 Google Android Maps 2。如果我保存位置并且当我在启动屏幕中选择此位置（仅按名称列出保存的位置）应用程序中断并且以下内容时，可以毫无问题地查看地图引发异常：

```
ERROR/Android Runtime(5778): Couldn't get connection factory client : main java.lang.RuntimeException: Could not dispatch event: class android.widget.RelativeLayout to handler
```

它应该以所选位置为中心显示地图。如果以前没有保存位置，即使用于查看结果的布局在用于查看地图时也能正常工作，我已经检查了所有正确传递的位置数据。

任何人都知道发生此错误时要查看的内容。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:25:59.453

好的，现在花了很多时间在这上面，终于找到了问题所在。

当我使用 animateCamera(LatLngBounds, Padding) 设置相机位置时出现问题。

LatLngBounds 无法直接设置，所以我不得不使用

`animateCamera(LatLngBounds, width, height, padding)`

感谢大家观看。

# python - python字典，每个键或类有两个值？

> ID：14226763
> 
> 赞同：0
> 
> 时间：2013-01-09T01:06:07.933
> 
> 标签：python, class, data-structures

我需要这种形式的数据结构：

```
 test_id1: resultValue, timeChecked
   test_id2: resultValue, timeChecked
   test_id3: resultValue, timeChecked
   test_id4: resultValue, timeChecked
   ... 
```

到目前为止，我只使用带有 id 和结果的键值的字典来处理它。但我想添加我检查的时间。最好的方法是什么？我可以将值设为元组吗？或者在这种情况下一个新的类更适合？我的班级需要是什么样子才能适应上述情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:13:15.083

一个轻量级的替代方法是创建一个 1) 保留元组的简单性和 2) 允许命名（而不是位置）字段访问的类`namedtuple`。

```
from collections import namedtuple

Record = namedtuple("Record", ["resultValue", "timeChecked"])
s = {"test_id1": Record("res1", "time1"), "test_id2": Record("res2", "time2")} 
```

您现在可以使用其中的值，`dict`就好像您有一个定义了`resultValue`and`timeChecked`字段的类...

```
>>> s["test_id1"].resultValue
'res1' 
```

...或作为简单的元组：

```
>>> a, b = s["test_id1"]
>>> print a, b
res1 time1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:08:50.207

> 我可以将值设为元组吗？

是的，我不确定你为什么不想这样做。如果是为了使查找更容易阅读，您甚至可以将值设为另一个字典。

```
{"test_id1" : (resultValue, timeChecked)} 
```

或者

```
{"test_id1" : {"resultValue": resultValue, "timeChecked" : timeChecked }} 
```

我认为对于这种情况来说，一个全新的课程是矫枉过正的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T01:53:11.113

您还可以为整个结构使用[pandas](http://pandas.pydata.org/) [DataFrame](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)。除非您打算进行一些严肃的数据处理，否则这可能有点矫枉过正，但了解并直接解决您的问题是一件好事。

# java - Java 销毁变量

> ID：14226768
> 
> 赞同：1
> 
> 时间：2013-01-09T01:07:25.260
> 
> 标签：java, performance, memory

我最近被一位开发人员问到这个问题，但无法提供答案......

在 Java 中，如何/何时处理变量？他们是吗？

假设我们有一个每秒被调用 50-75 次的 run() 方法（高度简化的示例）......

```
public void run() {
    long lastTime = System.nanoTime();
    double unprocessed = 0;
    int ticks = 0;
    int frames = 0;
    double nsPerTick = 1000000000.0 / 60.0;
    long now = System.nanoTime();
    unprocessed += (now - lastTime) / nsPerTick;
    lastTime = now;

    ticks++;
    tick();
    unprocessed -= 1;
} 
```

将这些变量（lastTime、unprocessed、tick 等）带入更高级别的范围是否会使程序运行得更好/更有效——到一个每秒不会多次创建和使用它们的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:11:47.310

由于这些变量是在`stack`.

阅读本文以获取有关 Java 中对象破坏的更多信息：

[Java中的什么方法用于销毁您的对象](https://stackoverflow.com/questions/2486136/what-method-in-java-is-used-to-destroy-your-objects)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T01:12:00.340

Java 使用[垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)，因此未使用的对象会被自动处理掉。在您的示例中，您仅使用局部变量，它们在堆栈上分配，这非常快（这里不涉及垃圾收集）。将这些变量移动到外部函数（“范围更高”）将无济于事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T01:45:51.610

> 在 Java 中，如何/何时处理变量？他们是吗？

首先，让我们弄清楚一些事情。在Java中，有些东西叫做变量，有些东西叫做对象。变量和对象不是一回事。

Java 中的变量总是其他东西的一部分：

*   局部变量是方法*调用*状态的一部分。当它超出范围时，它会被处理掉。这*通常*意味着当方法调用结束并且方法调用的堆栈帧从调用堆栈中弹出时。

*   实例变量（或字段或属性）是对象的一部分。当对象被处置时，它会被处置。

*   *静态变量（或类变量）是类的一部分，只有*在类被卸载时才会被丢弃。

`run()`在您的示例中，所有变量都是局部变量，并且在当前对该方法的调用返回（或由于异常而终止）时将被“处理” 。

> 将这些变量（lastTime、unprocessed、tick 等）带入更高级别的范围是否会使程序运行得更好/更有效——到一个每秒不创建和使用多次的地方？

它没有帮助。创建或处置局部变量的增量成本为零¹。使用局部变量的成本（如果有的话）*小于*使用实例变量的成本。唯一的成本可能是初始化它，但无论如何你都会承担这个成本；例如在每个方法调用上重新初始化一个实例变量。

事实上，将局部变量转换为实例变量实际上*可能*是一件坏事。这意味着该方法现在使用对象变量来表示其状态，使其不可重入。（目前尚不清楚这是否重要。这取决于该`run()`方法是否以需要可重入的方式使用......通常情况并非如此。）

* * *

^(1 - 这有点过于简单了。如果您有足够多的局部变量和/或深度递归方法，那么您可能需要使用比正常更大的线程堆栈大小。额外的内存使用*将是*成本。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T01:18:56.410

Id 取决于 JVM 运行模式和 JVM 版本。

但是大多数 JVM 版本会这样执行：

当 JVM 在`-client`模式下运行时，代码将逐行运行。

但是当 JVM 在`-server`模式下运行时，代码会被优化：

假设 tick() 方法是：

```
public void tick(){
   System.out.println("tick");
} 
```

优化后的最终代码可能：

```
public void run() {
  long lastTime = System.nanoTime();
  int ticks = 0;
  int frames = 1;
  double unprocessed = (System.nanoTime() - lastTime) / 16666666.66 -1 ;
  // tick method will inline here instead of invoking tick();
  System.out.println("tick");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T01:11:21.230

这个问题的答案取决于 Java 的垃圾收集，它有一个称为“nursery gc”的较小切片，它被非常频繁地调用并且不会导致 jvm 停止。所有的局部变量都进入这个 Nursery gc。当此方法执行完成时；所有这些变量都符合 GC 条件；并在调用nursery gc 时被删除。

回答您的问题是否将这些变量移出运行方法会更好。尽管 JVM 在每个版本中都变得越来越智能；创建对象对性能的影响较小。但是即使影响很小，我仍然感到；我觉得使对象全球化并没有什么坏处。

尽管在这种情况下，所有变量都是原始的；它不会产生任何影响。

# vb.net - Web 应用程序中的 Web 服务

> ID：14226771
> 
> 赞同：1
> 
> 时间：2013-01-09T01:07:55.360
> 
> 标签：vb.net, wcf, web-services, web-applications, nested

我有这个项目是由一些傻瓜开发的，他们决定在使用它的 Web 应用程序中嵌套一个依赖的 WebService。这会导致发布更改出现问题，因为您无法在不先发布更改的情况下更新 WebService，并且您无法在未在发布位置更新 WebService 的情况下发布更改。这完全是自相矛盾的。

关于如何简单地解决这个问题的任何建议？我认为最好以某种方式将 WebService 提取到一个可以独立发布的单独项目中（毕竟这是最佳实践，不是吗？）。另请注意，我已将项目更新为 .NET 4，它可以选择使用 WCF 服务，但是如果这需要对项目进行重大改造，那么我希望让事情尽可能简单。

很难提供任何代码来说明这个问题，但这里是项目的基本层次结构。

```
Solution
    Project
        WebService
            MyService 'This is a reference to the Web Service
        Service
            MyService.asmx 'This is the actual code for the Web Service
        [Other Code Pages within the project] 
```

**编辑：如果我这样做了怎么办？**通过这种方式，它们可以相互独立地编译和发布。

```
Solution
    Project - App
        Web Reference
            MyService 'This is a reference to the Web Service
        [Other Code Pages within the project]
    Project - Service
        Service
            MyService.asmx 'This is the actual code for the Web Service 
```

剩下的唯一决定（假设这是推荐的方法）是创建 WCF 服务库还是 WCF 服务应用程序？*（请记住，此服务仅由该应用程序使用，不与任何其他应用程序共享）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:36:06.843

我肯定会将 Web 服务提取到一个新项目中。

此外，如果项目之间还有其他通用的“共享”代码（类、模块），您有几个选择，具体取决于需要共享多少代码：

1）链接来自一个项目或另一个项目的源文件（这样你就只有一个类的物理副本）

2) 创建每个项目引用的 DLL 项目，然后将共享代码移动到该项目。

3）（显然）在每个项目中复制代码。

# python - 从源代码计算可摄取的控制流图

> ID：14226773
> 
> 赞同：8
> 
> 时间：2013-01-09T01:08:11.970
> 
> 标签：python, graph, control-flow

我知道有一些方法可以[从](https://stackoverflow.com/questions/6204914/what-is-the-easiest-way-to-generate-a-control-flow-graph-for-a-method-in-python)[源代码](https://stackoverflow.com/questions/6204914/what-is-the-easiest-way-to-generate-a-control-flow-graph-for-a-method-in-python)[**自动**](https://stackoverflow.com/questions/6204914/what-is-the-easiest-way-to-generate-a-control-flow-graph-for-a-method-in-python)[生成 CFG（**控制**流**图**](https://stackoverflow.com/questions/6204914/what-is-the-easiest-way-to-generate-a-control-flow-graph-for-a-method-in-python)****） 。然而，据我了解，这些方法给了我一个可视化的图表——一个图像。我真的不能用这样的图像来做任何计算。****

 ****因此我的问题是：有没有办法从源代码自动生成 CFG，以便源代码以某种数据结构或可通过编程方式解析的文件返回给我？（理想情况下，我也想访问 CFG 中每个节点/边缘的行号）

我将把它用于一个使用这种 CFG 提取控制流路径以确定输入路径覆盖率的项目（我将使用[trace](http://docs.python.org/2/library/trace.html)解决）

**重要提示**：我要分析的代码是用 python 编写的；我想用python进行分析

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:57:19.970

> 问：是否可以通过基本块获得具有 llvm 基础设施的应用程序的控制流图？
> 
> 答：是的，给定一个 BasicBlock*，您可以像这样遍历 CFG 中的 pred/succ 块：

```
#include "llvm/Support/CFG.h"

   for (pred_iterator PI = pred_begin(BB), E = pred_end(BB); PI != E; ++PI) {
     BasicBlock *OnePredecessor = *PI;
     ... 
```

> 对于继任者，s/pred/succ/
> 
> 问：有什么方法可以查看应用程序的控制流图。
> 
> 答：是的，使用：analyze -print-cfg X.(bc|ll) 或：analyze -print-cfg-only X.(bc|ll)
> 
> 这些将发出“点”文件，这些文件可以使用您可以在网上获得的 graphviz 工具集转换为各种图形格式。

[http://lists.cs.uiuc.edu/pipermail/llvmdev/2005-June/004416.html](http://lists.cs.uiuc.edu/pipermail/llvmdev/2005-June/004416.html) 这向您展示了如何以编程方式提取 CFG *并*使用辅助工具将 CFG 打印到控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:21:47.920

你有没有研究过python的`ast`模块。它不会完全满足您的需求，但您可以更轻松地使用它来构建您自己的产品。

**编辑**要回答评论中的问题：

如果您将以下内容保存在`test.py`

```
def add(a, b):
    return a + b

def mult(a, b):
    result = 0
    for i in range(b):
        result += add(result, a)
    return result 
```

然后做

```
import _ast

test = compile(open('test.py').read(), 'test.py', 'exec', _ast.PyCF_ONLY_AST) 
```

然后你有 test 哪个是 Module 类并且有一个 body 属性。这个 body 属性是模块中所有内容的列表，所以在这个例子中：

```
test.body  # >>> [<_ast.FunctionDef object at 0x...>, <_ast.FunctionDef object at 0x...>]
test.body[0].name  # >>> 'add'
(test.body[0].lineno, test.body[0].col_offset)  # >>> 1, 0
test.body[0].body  # >>> [<_ast.Return object at 0x...>]

test.body[1].body  # >>> [<_ast.Assign ...>, <_ast.For ...>, <_ast.Return ...>]
# etc. 
```

您可以找到要跟踪的类，并注意每个语句都有一个与之关联的不同类。

它可能不会像我最初想象的那么容易，但它不应该是可怕的。此外，要迭代地执行此操作，您需要`ast`具有功能的模块`iter_child_nodes`，例如，

```
test2 = next(ast.iter_child_nodes(test))
test2 is test.body[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-10T08:24:20.153

```
import codecs
import pydot
import ast
import astunparse
import os
import time

#  python3.6   conda   TensorFlow

class FunctionVisitor(ast.NodeVisitor):
    def __init__(self):
        self.number = 0 # 节点编号
        self.s = '' # 简化ast串
        self.n2title = {} # 编号 -> 标题

    def print(self, v):
        self.s += str(v)

    def generic_visit(self, node):
        ast.NodeVisitor.generic_visit(self, node)

    def visit_FunctionDef(self, node):
        self.print('(')
        siz = len(node.body)
        for i in range(siz):
            fun_name = 'visit_' + type(node.body[i]).__name__
            if hasattr(self, fun_name):
                getattr(self, fun_name)(node.body[i])
            else:
                self.number += 1
                self.print(self.number)
                self.n2title[str(self.number)] = astunparse.unparse(node.body[i]).lstrip().rstrip()
            if i != siz - 1:
                self.print(',')
        self.print(')')

    # 忽略掉import等语句
    def visit_Import(self, node):
        ast.NodeVisitor.generic_visit(self, node)

    def visit_ImportFrom(self, node):
        ast.NodeVisitor.generic_visit(self, node)

    def visit_alias(self, node):
        ast.NodeVisitor.generic_visit(self, node)

    # if语句
    def visit_If(self, node):
        # 条件
        self.print('i(')
        self.number += 1
        self.print(self.number)
        self.n2title[str(self.number)] = astunparse.unparse(node.test).lstrip().rstrip()
        # true分支
        self.print(',(')
        siz = len(node.body)
        for i in range(siz):
            fun_name = 'visit_' + type(node.body[i]).__name__
            if hasattr(self, fun_name):
                getattr(self, fun_name)(node.body[i])
            else:
                self.number += 1
                self.print(self.number)
                self.n2title[str(self.number)] = astunparse.unparse(node.body[i]).lstrip().rstrip()
            if i != siz - 1:
                self.print(',')
        # else分支
        self.print('),(')
        siz = len(node.orelse)
        for i in range(siz):
            fun_name = 'visit_' + type(node.orelse[i]).__name__
            if hasattr(self, fun_name):
                getattr(self, fun_name)(node.orelse[i])
            else:
                self.number += 1
                self.print(self.number)
                self.n2title[str(self.number)] = astunparse.unparse(node.orelse[i]).lstrip().rstrip()
            if i != siz - 1:
                self.print(',')
        self.print('))')

    # for 语句
    def visit_For(self, node):
        # 迭代器
        self.print('x(')
        self.number += 1
        self.print(self.number)
        a = astunparse.unparse(node.target).lstrip().rstrip()
        b = astunparse.unparse(node.iter).lstrip().rstrip()
        self.n2title[str(self.number)] = a + ' in ' + b
        # 循环体
        self.print(',(')
        siz = len(node.body)
        for i in range(siz):
            fun_name = 'visit_' + type(node.body[i]).__name__
            if hasattr(self, fun_name):
                getattr(self, fun_name)(node.body[i])
            else:
                self.number += 1
                self.print(self.number)
                self.n2title[str(self.number)] = astunparse.unparse(node.body[i]).lstrip().rstrip()
            if i != siz - 1:
                self.print(',')
        self.print('))')

    # while语句
    def visit_While(self, node):
        # 条件
        self.print('x(')
        self.number += 1
        self.print(self.number)
        self.n2title[str(self.number)] = astunparse.unparse(node.test).lstrip().rstrip()
        # 循环体
        self.print(',(')
        siz = len(node.body)
        for i in range(siz):
            fun_name = 'visit_' + type(node.body[i]).__name__
            if hasattr(self, fun_name):
                getattr(self, fun_name)(node.body[i])
            else:
                self.number += 1
                self.print(self.number)
                self.n2title[str(self.number)] = astunparse.unparse(node.body[i]).lstrip().rstrip()
            if i != siz - 1:
                self.print(',')
        self.print('))')

    def visit_Break(self, node):
        self.print('b')
        self.number += 1
        self.print(self.number)

    def visit_Continue(self, node):
        self.print('c')
        self.number += 1
        self.print(self.number)

    def visit_Return(self, node):
        self.print('r')
        self.number += 1
        self.print(self.number)
        if node.value == None:
            self.n2title['r' + str(self.number)] = 'return'
        else:
            self.n2title['r' + str(self.number)] = 'return ' + astunparse.unparse(node.value).lstrip().rstrip()

class CFG():
    def __init__(self):
        self.special_node = {}
        self.s = ''
        self.n2title = None
        self.idx = 0
        self.graph = None

    # 新建节点
    def new_node(self, title, node_shape='box', node_color='gray', text_fontsize=15):
        if title[0] == 'b':
            return pydot.Node(title, label='break', style='filled', shape=node_shape, fillcolor=node_color, fontname='Consolas', fontsize=text_fontsize)
        elif title[0] == 'c':
            return pydot.Node(title, label='continue', style='filled', shape=node_shape, fillcolor=node_color, fontname='Consolas', fontsize=text_fontsize)
        elif title[0] == 'r':
            return pydot.Node(title, label=self.n2title[title], style='filled', shape=node_shape, fillcolor=node_color, fontname='Consolas', fontsize=text_fontsize)
        elif title in self.n2title:
            return pydot.Node(title, label=self.n2title[title], style='filled', shape=node_shape, fillcolor=node_color, fontname='Consolas', fontsize=text_fontsize)
        else:
            return pydot.Node(title, label=title, style='filled', shape=node_shape, fillcolor=node_color, fontname='Consolas', fontsize=text_fontsize)

    # 新建边
    def new_edge(self, begin, end, title = ''):
        e = pydot.Edge(begin, end, label = title, color='black', arrowhead='open', fontname='Consolas', fontsize=15)
        if begin.get_shape() in ['ellipse', 'diamond']:
            if not begin.get_name() in self.special_node:
                self.special_node[begin.get_name()] = 1
                e.set_color('green')
                e.set_label('yes')
            else:
                e.set_color('red')
                e.set_label('no')
        return e

    # 匹配一个token
    def match(self):
        res = ''
        while self.s[self.idx] not in [',', ')']:
            res += self.s[self.idx]
            self.idx += 1
        return res

    # 检测是否不可达
    def check_unreachable(self, last_nodes):
        # 之前的节点为空显然不可达
        if len(last_nodes) == 0:
            return True
        ok = True
        # 之前全部不可达则当前也不可达
        for node in last_nodes:
            ok &= node.get_fillcolor() == 'red'
        return ok

    # 构建分支语句CFG
    def build_If(self, last_nodes, continue_node, break_nodes, return_nodes):
        self.idx += 1
        if not self.check_unreachable(last_nodes):
            node0 = self.new_node(self.match(), node_shape='diamond', node_color='orange')
        else: # 不可达结点置为红色
            node0 = self.new_node(self.match(), node_shape='diamond', node_color='red')
        self.graph.add_node(node0)
        for node in last_nodes:
            self.graph.add_edge(self.new_edge(node, node0))
        self.idx += 1
        nodes1 = self.build_CFG([node0], continue_node, break_nodes, return_nodes)
        self.idx += 1
        nodes2 = self.build_CFG([node0], continue_node, break_nodes, return_nodes)
        self.idx += 1
        nodes1.extend(nodes2)
        return nodes1

    # 构建循环语句CFG
    def build_For(self, last_nodes, return_nodes):
        self.idx += 1
        if not self.check_unreachable(last_nodes):
            node0 = self.new_node(self.match(), node_shape='ellipse', node_color='deeppink')
        else:
            node0 = self.new_node(self.match(), node_shape='ellipse', node_color='red')
        self.graph.add_node(node0)
        for node in last_nodes:
            self.graph.add_edge(self.new_edge(node, node0))
        self.idx += 1
        break_nodes = [] # 收集break节点
        nodes1 = self.build_CFG([node0], node0, break_nodes, return_nodes)
        for node in nodes1:
            self.graph.add_edge(self.new_edge(node, node0))
        self.idx += 1
        break_nodes.append(node0)
        return break_nodes

    # 构建CFG
    def build_CFG(self, last_nodes, continue_node, break_nodes, return_nodes):
        self.idx += 1
        while self.s[self.idx] != ')':
            if self.s[self.idx] == ',':
                self.idx += 1
                continue
            if self.s[self.idx] == 'i': # 分支语句
                self.idx += 1
                last_nodes = self.build_If(last_nodes, continue_node, break_nodes, return_nodes)
            elif self.s[self.idx] == 'x': # 循环语句
                self.idx += 1
                last_nodes = self.build_For(last_nodes, return_nodes)
            elif self.s[self.idx] == 'b': # break语句
                if not self.check_unreachable(last_nodes):
                    node0 = self.new_node(self.match())
                else:
                    node0 = self.new_node(self.match(), node_color='red')
                self.graph.add_node(node0)
                break_nodes.append(node0)
                for node in last_nodes:
                    self.graph.add_edge(self.new_edge(node, node0))
                last_nodes.clear()
            elif self.s[self.idx] == 'c': # continue语句
                if not self.check_unreachable(last_nodes):
                    node0 = self.new_node(self.match())
                else:
                    node0 = self.new_node(self.match(), node_color='red')
                self.graph.add_node(node0)
                for node in last_nodes:
                    self.graph.add_edge(self.new_edge(node, node0))
                self.graph.add_edge(self.new_edge(node0, continue_node))
                last_nodes.clear()
            elif self.s[self.idx] == 'r': # return语句
                if not self.check_unreachable(last_nodes):
                    node0 = self.new_node(self.match())
                else:
                    node0 = self.new_node(self.match(), node_color='red')
                self.graph.add_node(node0)
                return_nodes.append(node0)
                for node in last_nodes:
                    self.graph.add_edge(self.new_edge(node, node0))
                last_nodes.clear()
            else: # 一般语句
                if not self.check_unreachable(last_nodes):
                    node0 = self.new_node(self.match())
                else:
                    node0 = self.new_node(self.match(), node_color='red')
                self.graph.add_node(node0)
                for node in last_nodes:
                    self.graph.add_edge(self.new_edge(node, node0))
                last_nodes = [node0]
        self.idx += 1
        return last_nodes

    # 从ast构建CFG
    def build_CFG_from_ast(self, tree):
        visitor = FunctionVisitor()
        visitor.visit(tree)
        self.special_node.clear()
        self.s = visitor.s
        self.n2title = visitor.n2title
        self.idx = 0
        self.graph = pydot.Dot(graph_type = 'digraph')
        node_entry = self.new_node('Entry', node_shape='Msquare', node_color='green')
        self.graph.add_node(node_entry)
        return_nodes = [] # 收集return节点
        last_nodes = self.build_CFG([node_entry], None, [], return_nodes)
        last_nodes.extend(return_nodes)
        node_end = self.new_node('End', node_shape='Msquare', node_color='brown')
        self.graph.add_node(node_end)
        for node in last_nodes:
            self.graph.add_edge(self.new_edge(node, node_end))
        return self.graph

class CFGGenerator(ast.NodeVisitor):
    def __init__(self, cfg, folder):
        self.cfg = cfg # CFG对象
        self.folder = folder # 保存CFG的文件夹
        self.prefix = '' # 类名前缀

    def generic_visit(self, node):
        ast.NodeVisitor.generic_visit(self, node)

    def visit_ClassDef(self, node):
        self.prefix = node.name
        ast.NodeVisitor.generic_visit(self, node)

    def visit_FunctionDef(self, node):
        graph = self.cfg.build_CFG_from_ast(node)
        if len(self.prefix) == 0:
            path = node.name + '.png'
        else:
            path = self.prefix + '.' + node.name + '.png'
        path = os.path.join(self.folder, path)
        graph.write_png(path)
        print('generate ' + path)

if __name__ == '__main__':
    try:
        # 解析参数
        # parser = argparse.ArgumentParser()
        # parser.add_argument('file', type = str)
        # parser.add_argument('-o', '--output', type = str, default = '.')
        # args = parser.parse_args()
        # fp = args.file
        # folder = args.output
        fp = "relativate.py"
        folder = "CFG/"
        # 读取文件内容
        file = codecs.open(fp, 'r', 'utf-8')
        code = file.read()
        file.close()
        st = time.time()
        # 解析成AST
        tree = ast.parse(code)
        # 生成CFG
        cfg = CFG()
        generator = CFGGenerator(cfg, folder)
        generator.visit(tree)
        ed = time.time()
        print("time: %.3f s" % (ed - st))
    except Exception as e:
        print('Error:', e) 
```

![在此处输入图像描述](../Images/a93c01a536e234359925c06193ed08f3.png)

![在此处输入图像描述](../Images/ab592011cd9fbb51227d1d20497ad59e.png)****

# c# - 具有不同时区的 Quartz.Net DailyTimeIntervalTriggerImpl

> ID：14226775
> 
> 赞同：0
> 
> 时间：2013-01-09T01:08:15.233
> 
> 标签：c#, .net, quartz-scheduler, quartz.net

是的，这有点棘手。

我想创建一个每日触发器（DailyTimeIntervalTriggerImpl），以便它每天从**07:30**到**23:45**运行。问题是，它必须在用户指定的时区运行，在这种情况下，比如说东京时间。

据我了解，我需要将时间转换为UTC。

下面的示例工作正常，但触发器将在 endTimeUTC 之后过期。如何确保触发器连续运行？

**注意**：我尝试使用 DailyTimeIntervalTriggerImpl 的**StartTimeOfDay**和**EndTimeOfDay**属性，但是当我将它们转换为 UTC 时，我得到了奇怪的触发时间。我相信的问题是因为：

a) UTC 格式的开始时间（在本例中）为2012 年**12 月 31 日晚上 10:30:00**和

b) UTC 的结束时间是**2013 年 1 月 1 日下午 2:30:00**（*次日*）。

DailyTimeIntervalTriggerImpl **StartTimeOfDay**和**EndTimeOfDay**仅采用 TimeOfDay 对象，该对象仅考虑时间而不考虑日期。

所以它将是 StartTimeOfDay = 10:30PM 和 EndTimeOfDay = 2:30PM，这没有任何意义。因为 EndTimeOfDay 应该是第二天下午 2:30。

有任何想法吗？

```
 var startTime = DateTime.Parse("2013/01/01 07:30:00");
 var endTime = DateTime.Parse("2013/01/01 23:45:00");

 var tokyoTimeZoneId = "Tokyo Standard Time";

 TimeZoneInfo timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(tokyoTimeZoneId);

 var startDateTimeUtc = TimeZoneInfo.ConvertTimeToUtc(startTime, timeZoneInfo);
 var endDateTimeUtc = TimeZoneInfo.ConvertTimeToUtc(endTime, timeZoneInfo);

 var dailyTrigger = new DailyTimeIntervalTriggerImpl
  {
    RepeatIntervalUnit = IntervalUnit.Hour,
    DaysOfWeek = GetDays(), // method to get a Quartz.Collection.HashSet list
    RepeatInterval = 3, // every 3 hours
    Key = new TriggerKey(Guid.NewGuid().ToString(), "my-group"),
    StartTimeUtc = startDateTimeUtc,
    EndTimeUtc = endDateTimeUtc,
  };

  // Compute fire times just to show simulated fire times
  IList<DateTimeOffset> fireTimes = ComputeFireTimes(dailyTrigger, null, 10);

  foreach (var dateTimeOffset in fireTimes)
  {
    Console.WriteLine("utc:{0} tokyo:{1}", dateTimeOffset,
      TimeZoneInfo.ConvertTimeFromUtc(dateTimeOffset.DateTime, timeZoneInfo));
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:39:27.600

尝试这个：

```
var daysOfWeek = new Quartz.Collection.HashSet<System.DayOfWeek>() { System.DayOfWeek.Wednesday, System.DayOfWeek.Thursday, System.DayOfWeek.Friday };

DateTimeOffset startTime = DateBuilder.DateOf(0, 0, 0, 14, 1, 2013);
DateTimeOffset endTime = DateBuilder.DateOf(0, 0, 0, 20, 1, 2013);

TimeOfDay startTimeOfDay = TimeOfDay.HourMinuteAndSecondOfDay(7, 30, 0);
TimeOfDay endTimeOfDay = TimeOfDay.HourMinuteAndSecondOfDay(23, 45, 0);

var tokyoTimeZoneId = "Tokyo Standard Time";
TimeZoneInfo timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(tokyoTimeZoneId);

var dailyTrigger = new DailyTimeIntervalTriggerImpl
{
StartTimeUtc = startTime.ToUniversalTime(),
EndTimeUtc = endTime.ToUniversalTime(),
StartTimeOfDay = startTimeOfDay,
EndTimeOfDay = endTimeOfDay,
RepeatIntervalUnit = IntervalUnit.Hour,
DaysOfWeek = daysOfWeek,
RepeatInterval = 3,             // every 3 hours
TimeZone = timeZoneInfo,
Key = new TriggerKey(Guid.NewGuid().ToString(), "my-group"),
};

// Compute fire times just to show simulated fire times
IList<DateTimeOffset> fireTimes = TriggerUtils.ComputeFireTimes(dailyTrigger, null, 1000);

foreach (var dateTimeOffset in fireTimes)
{
Console.WriteLine("utc:{0} - tokyo:{1}", dateTimeOffset,
  TimeZoneInfo.ConvertTimeFromUtc(dateTimeOffset.DateTime, timeZoneInfo));
} 
```

**注意**：

我建议您使用最新版本：2.1.1

# javascript - ajaxStop() 不触发

> ID：14226776
> 
> 赞同：4
> 
> 时间：2013-01-09T01:08:27.463
> 
> 标签：javascript, jquery

这是不起作用的代码：

```
$(document).ajaxStop(function() {
    $(this).unbind("ajaxStop"); //prevent running again when other calls finish

    // Display everything
    display();
}); 
```

这是我的 Ajax 函数：

```
function getAjax(url, callback) {
    jQuery.ajaxPrefilter(function( options ) {
        options.global = true;
    });

    $.ajax({
        url: url,
        type: "GET",
        dataType: "jsonp",
        success: callback
    });
} 
```

为什么`ajaxStop()`从不开火？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T01:08:27.463

您会注意到我正在发出 JSONP 请求。我花了很长时间才找到这个，但可以在[这里](http://bugs.jquery.com/ticket/8338#comment:1)找到这个问题的答案。

从票：

> JSONP 请求不能保证完成（因为没有捕获到错误）。在这种情况下，jQuery 1.5 会强制全局选项为 false，以保证内部 ajax 请求计数器在某一时刻回到零。
> 
> 如果您希望所有请求都触发事件，无论如何（并且冒着与 1.4.4 相同的不一致的风险），您可以使用以下预过滤器：

```
jQuery.ajaxPrefilter(function( options ) {
    options.global = true;
}); 
```

> 举个例子：http: [//jsfiddle.net/X4JTx/](http://jsfiddle.net/X4JTx/)

# php - cpanel 为域设置的 Laravel 文档根目录 - 安全威胁？

> ID：14226777
> 
> 赞同：0
> 
> 时间：2013-01-09T01:08:28.790
> 
> 标签：php, cpanel, laravel

我在共享主机计划中安装了 Laravel，他们使用 CPanel。

当我设置域时，我将它的文档根指向 Laravel 公用文件夹，一切似乎都正常。

这是好习惯吗？有人告诉我，将它放在 public_html 文件夹中根本不好，但是如果服务器仅在 public 文件夹之外为该域提供文档，那与将它放在 public_html 文件夹之外是一样的吗？

我已经在 cPanel 中设置了域以从 /home/user/public_html/site.com/public 中提供服务。

我只是想确保它是安全的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T04:29:36.557

将所有文件放入 /home/user，然后将 'public' 的内容放入 /home/user/public_html 并更改**bootstrap/paths.php**文件中的 $paths['public'] 以反映这一点，如下所示：

```
'public' => __DIR__.'/../public_html', 
```

# jquery - 使用 JQUERY 的多列自动完成

> ID：14226782
> 
> 赞同：3
> 
> 时间：2013-01-09T01:08:58.317
> 
> 标签：jquery, jquery-ui, autocomplete, asp.net-mvc-4

1.  项目清单

我正在查看Jsfiddle 网站中[http://jsfiddle.net/g4stL/212/链接上的 JQUERY 示例。](http://jsfiddle.net/g4stL/212/)

该功能给我留下了深刻的印象。事实上，我们必须在我们的应用程序上实现完全相同的功能。

如果我照原样复制代码，我可以看到多列自动完成。但是选择部分不起作用。如果我选择使用鼠标光标或使用箭头键，程序将失败。

我得到的错误是

“htmlfile：对方法或属性访问的意外调用。”

在 Jquery-1.7.2.js 中 jQuery.fn.extend 代码的 append 函数中。

mcautocomplete 小部件位于 MVC 脚本文件夹下的自定义 js 文件中。

你能帮忙吗？

```
$.widget('custom.mcautocomplete', $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            thead;

        if (this.options.showHeader) {
            table = $('<div class="ui-widget-header" style="width:100%"></div>');
            $.each(this.options.columns, function(index, item) {
                table.append('<span style="padding:0 4px;float:left;width:' + item.width + ';">' + item.name + '</span>');
            });
            table.append('<div style="clear: both;"></div>');
            ul.append(table);
        }
        $.each(items, function(index, item) {
            self._renderItem(ul, item);
        });
    },
    _renderItem: function(ul, item) {
        var t = '',
            result = '';

        $.each(this.options.columns, function(index, column) {
            t += '<span style="padding:0 4px;float:left;width:' + column.width + ';">' + item[column.valueField ? column.valueField : index] + '</span>'
        });

        result = $('<li></li>').data('item.autocomplete', item).append('<a class="mcacAnchor">' + t + '<div style="clear: both;"></div></a>').appendTo(ul);
        return result;
    }
}); 
```

其他发现：代码在 Fiddle 中有效 此代码在 Chorme 或 FireFox 中不会崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T08:58:55.477

我有同样的问题。jQuery UI 1.10 更改了自动竞争保存然后检索菜单中一行的项目数据的键。以前，键是“item.autotsomplete”，现在是“ui-autocomplete-item”。因此，找不到数据，无法显示。

[在https://github.com/deaconsoftware/jQueryUI.MulticolumnAutocomplete](https://github.com/deaconsoftware/jQueryUI.MulticolumnAutocomplete)获取最后一个版本的 MulticolumnAutocomplete

您也可以更改线路

```
result = $('<li></li>')
     .data('item.autocomplete', item)
     .append('<a class="mcacAnchor">' + t
              + '<div style="clear: both;"></div></a>').appendTo(ul); 
```

至

```
result = $('<li></li>')
     .data('ui-autocomplete-item', item)
     .append('<a class="mcacAnchor">' + t
              + '<div style="clear: both;"></div></a>').appendTo(ul); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T11:31:33.487

使用下面的 SQL 代码：

```
SELECT column-duplicate
    FROM TABLE 
GROUP BY column-duplicate
  HAVING COUNT(column-duplicate) > 1 
```

# google-maps - Google Places API - 添加地点详细信息

> ID：14226785
> 
> 赞同：1
> 
> 时间：2013-01-09T01:09:22.937
> 
> 标签：google-maps, google-maps-api-3, google-places-api

我有以下代码：

```
 function getLocation()
                {
                if (navigator.geolocation)
                  {
                  navigator.geolocation.getCurrentPosition(start,showError);

                  }
                else{
                error('Geo Location is not supported');
                }
                }

 function start(position) {

                var mySearch = document.getElementById("search").value;           
               var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                map = new google.maps.Map(document.getElementById('map'), {
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  center: latlng,
                  zoom: 12
                });

                var request = {
                  location: latlng,
                  radius: 500,
                  query: mySearch
                };

                 infowindow = new google.maps.InfoWindow();
                 service = new google.maps.places.PlacesService(map);
                 service.textSearch(request, callback);
                }

                function callback(results, status) {

                  if (status == google.maps.places.PlacesServiceStatus.OK) {
                    for (var i = 0; i < results.length; i++) {
                      var place = results[i];
                      createMarker(results[i]);

                    }
                  }
                }

              function createMarker(place) {

                var placeLoc = place.geometry.location;
                var marker = new google.maps.Marker({
                  map: map,
                  position: place.geometry.location,

                });

                google.maps.event.addListener(marker, 'click', function() {
                  infowindow.setContent(place.name, place.website);
                  infowindow.open(map, this);
                });
              } 
```

该代码工作正常，但是我正在尝试检索有关某个地方的更多详细信息。我在以下位置了解地点详细信息：[https](https://developers.google.com/maps/documentation/javascript/places#place_details) ://developers.google.com/maps/documentation/javascript/places#place_details我只是不确定在哪里以及如何调整我的代码以添加到地点网站。我正在努力弄清楚从哪里获得参考资料以及如何使用它。如果有人可以在我的代码中编写它，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:28:10.523

调整“createMarker”功能（未测试）：

```
function createMarker(place) {
    var placeLoc = place.geometry.location;
    if (place.icon) {
      var image = new google.maps.MarkerImage(
            place.icon, new google.maps.Size(71, 71),
            new google.maps.Point(0, 0), new google.maps.Point(17, 34),
            new google.maps.Size(25, 25));
    } else var image = null;

    var marker = new google.maps.Marker({
      map: map,
      icon: image,
      position: place.geometry.location
    });
    var request =  {
      reference: place.reference
    };

    google.maps.event.addListener(marker,'click',function(){
        service.getDetails(request, function(place, status) {
          if (status == google.maps.places.PlacesServiceStatus.OK) {
            var contentStr = '<h5>'+place.name+'</h5><p>'+place.formatted_address;
            if (!!place.formatted_phone_number) contentStr += '<br>'+place.formatted_phone_number;
            if (!!place.website) contentStr += '<br><a target="_blank" href="'+place.website+'">'+place.website+'</a>';
            contentStr += '<br>'+place.types+'</p>';
            infowindow.setContent(contentStr);
            infowindow.open(map,marker);
          } else { 
            var contentStr = "<h5>No Result, status="+status+"</h5>";
            infowindow.setContent(contentStr);
            infowindow.open(map,marker);
          }
        });
    });
} 
```

[工作示例](http://www.geocodezip.com/v3_GoogleEx_place-search_airport.html)

# c# - C# 在另一个函数中中断其他函数循环

> ID：14226787
> 
> 赞同：2
> 
> 时间：2013-01-09T01:09:26.817
> 
> 标签：c#, function, for-loop, serial-port

我有两个功能 - 一个是在循环中在我的串行端口上运行一些命令，另一个是一个事件处理程序，它应该在第一种方法中停止循环的执行。这是一些示例代码。

```
public void btm_Processing_Click(object sender, EventArgs e)
{   
    for (int i = 1; i <= x ; i++)
    {
        // My processing commands are here .
    }
} 
```

这是我的停止按钮事件处理程序。

```
private void btm_Stop_Click(object sender, EventArgs e)
{
    var dialogResult = MessageBox.Show("Do you want to stop processing?",
                                       "Error",
                                       MessageBoxButtons.YesNo);

    if (dialogResult == DialogResult.Yes)
    {
        // Here is where I want to break that loop.                
    }
    else
    {
        // Do other things.                           
    }
} 
```

我不确定我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:15:51.100

最好的方法是使用 BackgroundWorker 线程来执行你的循环，然后你可以稍后从主线程中取消它。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

更简单的方法是制作您设置的全局变量

```
private volatile bool isWorking = false;
public void btm_Processing_Click(object sender, EventArgs e)
{
    isWorking = true;
    for (int i = 1; i <= x ; i++)
    {
        //My Processing Commands are Here 
        if(!isWorking)
            break;
    }
}

private void btm_Stop_Click(object sender, EventArgs e)
{
    DialogResult dialogResult = MessageBox.Show("Do You Want To Stop Processing ? ", "Error", MessageBoxButtons.YesNo);
    isWorking = dialogResult != DialogResult.Yes;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T01:12:37.990

设置中断变量；

```
private volatile bool shouldStop = false;

private void btm_Processing_Click(object sender, EventArgs e)
{          
    for (int i = 1; i <= x ; i++)
    {
        //My Processing Commands are Here 

        if (shouldStop)
        {
            shouldStop=false;
            break;
        }
    }
}

private void btm_Stop_Click(object sender, EventArgs e)
{
    var dialogResult = MessageBox.Show("Do you want to stop processing?",
                                       "Error",
                                       MessageBoxButtons.YesNo);

    if (dialogResult == DialogResult.Yes)
    {
        shouldStop = true;                
    }
    else
    {    
        // Do other things.
    }
} 
```

# javascript - 在 JS 或 Python 中处理颜色

> ID：14226788
> 
> 赞同：1
> 
> 时间：2013-01-09T01:09:29.430
> 
> 标签：javascript, python, image-processing, colors

我正在从事一个涉及识别图像中字符的项目。我需要将图像的深色部分切换为浅色，将浅色部分切换为深色（或黑色），因为该程序使用浅色作为背景，深色作为字母。任何人都可以告诉我任何可以帮助我做到这一点的脚本吗？在 JavaScript 或 Python 中。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:23:32.217

您将需要一些库来读取图像，例如 opencv。由于通常白色是 255，因此使用它来反转颜色：

```
 import cv2
  image = cv2.imread('imagefile.jpg')
  image = 255 - image
  cv2.imwrite('inverted.jpg') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:19:23.920

要在 Python 中进行图像处理，您可以使用 OpenCV(cv2)、NumPy 和 SciPy、scikit-image...

首先，您将图像从文件读入 NumPy 数组。然后你可以通过（255 - img）反转图像。这是一些示例代码：

```
from pylab import imshow
import cv2
img = cv2.imread("test.png")
rimg = 255 - img
imshow(rimg) 
```

# itunes - 奇怪的 iTunes 导出 XML 代码需要 LinqToXml 帮助

> ID：14226790
> 
> 赞同：2
> 
> 时间：2013-01-09T01:09:36.940
> 
> 标签：itunes, linq-to-xml

Itunes 为我提供了一个我不习惯使用的导出 xml 结构（请参阅 xml 代码）：

```
<?xml version="1.0" encoding="UTF-8"?>
<plist version="1.0">
<dict>
    <dict>
        <key>68768</key>
        <dict>
            <key>Track ID</key><integer>68768</integer>
            <key>Name</key><string>ABBA Medley</string>
            <key>Artist</key><string>Party All Stars</string>           
            <key>Disc Number</key><integer>1</integer>
            <key>Track Number</key><integer>17</integer>
            <key>Persistent ID</key><string>B121116C66BE0F4B</string>
        </dict>
        <key>68781</key>
        <dict>
            <key>Track ID</key><integer>68781</integer>
            <key>Name</key><string>Afflitto</string>
            <key>Artist</key><string>Fiocco</string>
            <key>Disc Number</key><integer>1</integer>
            <key>Track Number</key><integer>9</integer>
            <key>Persistent ID</key><string>5D09837999591307</string>
        </dict>
        <key>68793</key>
        <dict>
            <key>Track ID</key><integer>68793</integer>
            <key>Name</key><string>Agadou</string>
            <key>Artist</key><string>Saradossa Band</string>
            <key>Disc Number</key><integer>1</integer>
            <key>Track Number</key><integer>4</integer>
            <key>Persistent ID</key><string>4DFFF3C3498C02B4</string>
        </dict>
    </dict>
</dict>
</plist> 
```

我的目标是在 c# 中使用 LinqToXml 尽可能获得以下数组：

```
17  ABBA Medley  B121116C66BE0F4B
9   Afflitto     5D09837999591307
4   Agadou       4DFFF3C3498C02B4 
```

这甚至可能吗？
我写了一些基本的 c# 代码，但在路上一个闪电击中了我......

```
XDocument doc = XDocument.Load(iTunesXmlFile);
var linqtoxml = from node in doc.Descendants("dict") select node; // ooo Boy :(

foreach (var dict in linqtoxml)
{
   // and lightning bolt again...
} 
```

Ps：很明显，我无法更改xml结构。
Pps：我知道，这是一个清理 iTunes XML 版本，但基本概念是作为案例研究提出的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:07:16.707

我能想到的最佳解决方案如下：

```
List<Track> MyTrackList = new List<Track>();

public class Track 
{
    public int TrackNumber { get; set; }
    public string Name { get; set; }
    public string PersistentID { get; set; }
} 

XDocument doc = XDocument.Load(@"thexmlfile.xml");
var linqtoxml = from element in doc.Descendants("plist").Descendants("dict").Descendants("dict").Descendants("dict")
                select element;

foreach (var dict in linqtoxml)
{
    try
    {
        string myTrackNumber = dict.Descendants("key").Where(key => key.Value == "Track Number").Select(x => x.NextNode).SingleOrDefault().ToString(); 
        string myName = dict.Descendants("key").Where(key => key.Value == "Name").Select(x => x.NextNode).SingleOrDefault().ToString();                                 
        string myPersistentID = dict.Descendants("key").Where(key => key.Value == "Persistent ID").Select(x => x.NextNode).SingleOrDefault().ToString();

        MyTrackList.Add(new Track
        {
            TrackNumber = myTrackNumber,
            Name = myName,
            PersistentID = myPersistentID
        });

    }
    catch (Exception)
    {
        // Something wasn't set, so skip the node ...
    }            
} 
```

# javascript - 有没有更好的方法来重复一个函数，而不是使用 setTimeout

> ID：14226791
> 
> 赞同：0
> 
> 时间：2013-01-09T01:09:36.553
> 
> 标签：javascript

有没有更好的方法来无限次重复一个函数？

而不是使用：

```
 setTimeout(myfunction(), 10) 
```

我将如何将其添加到其中？当我替换 setTimeout 时，订单变得很奇怪。

```
 <img id="slideshow" src="4.JPG" alt="cheese" width="264" height="264"/>
            <script>
                source=["1.jpg", "2.JPG", "3.JPG", "4.JPG"];
                var i=0
                function show(){
                document.getElementById("slideshow").src = source[i];
                if (i<source.length - 1)                
                i++
                else
                i=0
                setTimeout("show()",2500)                       
                }
                show()
            </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:10:04.077

您正在寻找`window.setInterval(function, 1000);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:33:03.963

```
(function(){

  var images = ['1.jpg', '2.jpg', '3.jpg', '4.jpg'],
      img = document.getElementById('blerg');

  setInterval(function(){

    img.src = images[0];

    images.push(images.shift());

  }, 2500)

})(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T01:12:57.340

或者`while(true) hangTheBrowser();`

# c++ - 如何为原始标头之外的类添加额外的运算符重载？

> ID：14226800
> 
> 赞同：1
> 
> 时间：2013-01-09T01:11:01.453
> 
> 标签：c++, operator-overloading, overloading

我正在使用 DirectXMath.h，其中所有乘法和运算都使用 XMVECTOR（一个 SIMD 包装器）完成，并且使用包含 3 个浮点数的 XMFLOAT3 进行存储。但是在这段特定的代码中，我确实需要为 XMFLOAT3 添加一个*** 运算符**（对于XMFLOAT3*XMFLOAT3 和 XMFLOAT3*float)。我可以这样做吗？或者我必须篡改 SDK 中的 DirectXMath 标头吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:13:20.680

是的，你**可以**定义你的重载，但只能定义为一个自由函数，而不是一个成员函数。

所以你可以做这样的事情（假设这是你感兴趣的重载）：

```
XMFLOAT3 operator*(XMFLOAT3 a, XMFLOAT3 b) {
    // whatever
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T01:14:54.423

当然，在 C++ 中，您可以将运算符重载作为自由函数提供，如下所示：

```
XMFLOAT3 operator*(XMFLOAT3 left, XMFLOAT3 right)
{
    ...
} 
```

如果这将用于对性能敏感的代码，请检查按值传递与按常量传递引用是否会对发出的代码/性能产生任何影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T01:15:34.733

```
XMFLOAT3 operator*(const XMFLOAT3& a, const XMFLOAT3& b){
    XMFLOAT3 ans; 
    ...
    return ans;
} 
```

请注意，这将返回答案的副本，并且不会修改 2 个操作数中的任何一个。这符合`*`运算符的语义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T01:15:24.113

继续，只需定义`operator*`：

```
XMFLOAT3 operator*(XMFLOAT3 l, XMFLOAT3 r) {
    XMVECTOR lvec(XMLoadFloat3(&l));
    XMVECTOR rvec(XMLoadFloat3(&r));
    //Perform operations
}

XMFLOAT3 operator*(XMFLOAT3 l, float r) {
    XMVECTOR lvec(XMLoadFloat3(&l));
    //Perform operations
}

XMFLOAT3 operator*(float l, XMFLOAT3 r) {
    XMVECTOR rvec(XMLoadFloat3(&r));
    //Perform operations
} 
```

# ruby-on-rails - 什么 gem 为我提供了将 16 个字符的字符串加密为 24 个字符的字符串的功能？

> ID：14226801
> 
> 赞同：0
> 
> 时间：2013-01-09T01:11:04.813
> 
> 标签：ruby-on-rails, encryption

我是加密新手，我什至不确定加密是否可行。任何建议或方向将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:19:38.510

加密内置于 rails -> [http://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html](http://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html)这是一个示例 -> [http://snippets.dzone.com/posts/show/12535](http://snippets.dzone.com/posts/show/12535)如果你愿意，我会建议要从 16 更改为 24，可能会在字符串中附加 8 个字符，有很多替代方法可以根据您在获取有关您正在做什么的更多信息之后的安全深度来执行此操作可能会有所帮助。

# javascript - 在执行下一行之前等待 5 秒

> ID：14226803
> 
> 赞同：474
> 
> 时间：2013-01-09T01:11:08.667
> 
> 标签：javascript, dom-events

下面的这个功能不像我想要的那样工作；作为一个JS新手，我不知道为什么。

我需要它等待 5 秒钟，然后再检查是否`newState`为`-1`.

目前，它不等待，它只是立即检查。

```
function stateChange(newState) {
  setTimeout('', 5000);

  if(newState == -1) {
    alert('VIDEO HAS STOPPED');
  }
} 
```

* * *

## 回答 #1

> 赞同：451
> 
> 时间：2013-01-09T01:11:34.453

您必须将代码放入您提供的回调函数中`setTimeout`：

```
function stateChange(newState) {
    setTimeout(function () {
        if (newState == -1) {
            alert('VIDEO HAS STOPPED');
        }
    }, 5000);
} 
```

任何其他代码将立即执行。

* * *

## 回答 #2

> 赞同：377
> 
> 时间：2017-11-24T21:52:32.533

这是使用~~新的~~ [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await)语法的解决方案。

请务必检查[浏览器支持](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await#Browser_compatibility)，因为这是 ECMAScript 6 引入的语言功能。

**实用功能：**

```
const delay = ms => new Promise(res => setTimeout(res, ms)); 
```

**用法：**

```
const yourFunction = async () => {
  await delay(5000);
  console.log("Waited 5s");

  await delay(5000);
  console.log("Waited an additional 5s");
}; 
```

这种方法的优点是它使您的代码看起来和行为像同步代码。

* * *

## 回答 #3

> 赞同：233
> 
> 时间：2015-10-29T12:22:30.283

**您真的不应该这样做**，正确使用 timeout 是解决 OP 问题以及您只想在一段时间后运行某些东西的任何其他场合的正确工具。Joseph Silber 在他的回答中很好地证明了这一点。但是，如果在某些非生产情况下，您***确实***想将主线程挂起一段时间，则可以这样做。

```
function wait(ms){
   var start = new Date().getTime();
   var end = start;
   while(end < start + ms) {
     end = new Date().getTime();
  }
} 
```

以以下形式执行：

```
console.log('before');
wait(7000);  //7 seconds in milliseconds
console.log('after'); 
```

我来到这里是因为我正在构建一个简单的测试用例，用于围绕长时间运行的阻塞操作（即昂贵的 DOM 操作）对混合异步操作进行排序，这是我模拟的阻塞操作。它很适合这份工作，所以我想我把它发布给其他有类似用例的人。即便如此，它还是在 while 循环中创建了一个 Date() 对象，如果它运行的时间足够长，它可能会使 GC 不堪重负。但我怎么强调都不为过，**这仅适用于测试，对于构建任何实际功能，您应该参考 Joseph Silber 的回答。**

* * *

## 回答 #4

> 赞同：107
> 
> 时间：2018-07-23T16:02:35.857

如果你在一个[异步函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)中，你可以简单地在一行中完成：

```
console.log(1);
await new Promise(resolve => setTimeout(resolve, 3000)); // 3 sec
console.log(2); 
```

**仅供参考**，如果目标是 NodeJS，您可以根据需要使用它（这是一个预定义的承诺 setTimeout 函数）：

```
await setTimeout[Object.getOwnPropertySymbols(setTimeout)[0]](3000) // 3 sec 
```

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2015-01-27T15:06:28.807

使用这样的延迟函数：

```
var delay = ( function() {
    var timer = 0;
    return function(callback, ms) {
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
    };
})(); 
```

用法：

```
delay(function(){
    // do stuff
}, 5000 ); // end delay 
```

致谢：[如何延迟 .keyup() 处理程序，直到用户停止输入？](https://stackoverflow.com/q/1909441/1066234)

* * *

## 回答 #6

> 赞同：46
> 
> 时间：2013-01-09T01:13:47.263

您不应该只是尝试在 javascript 中暂停 5 秒。它不是那样工作的。您可以安排一个代码函数在 5 秒后运行，但是您必须将稍后要运行的代码放入一个函数中，该函数之后的其余代码将继续立即运行。

例如：

```
function stateChange(newState) {
    setTimeout(function(){
        if(newState == -1){alert('VIDEO HAS STOPPED');}
    }, 5000);
} 
```

但是，如果你有这样的代码：

```
stateChange(-1);
console.log("Hello"); 
```

该`console.log()`语句将立即运行。它不会等到`stateChange()`函数中的超时触发之后。您不能只暂停 JavaScript 执行一段预定的时间。

相反，您想要运行延迟的任何代码都必须在`setTimeout()`回调函数内（或从该函数调用）。

如果您确实尝试通过循环“暂停”，那么您实际上会“挂起”Javascript 解释器一段时间。因为 Javascript 仅在单个线程中运行您的代码，所以当您循环时，没有其他任何东西可以运行（没有其他事件处理程序可以被调用）。因此，循环等待某个变量更改将永远不会起作用，因为没有其他代码可以运行来更改该变量。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2020-02-19T21:57:29.477

该解决方案来自[React Native 的刷新控制文档](https://facebook.github.io/react-native/docs/refreshcontrol)：

```
function wait(timeout) {
    return new Promise(resolve => {
        setTimeout(resolve, timeout);
    });
} 
```

要将其应用于 OP 的问题，您可以将此功能与以下内容配合使用`await`：

```
await wait(5000);
if (newState == -1) {
    alert('Done');
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-11-03T11:51:21.627

尝试这个：

```
//the code will execute in 1 3 5 7 9 seconds later
function exec() {
    for(var i=0;i<5;i++) {
        setTimeout(function() {
            console.log(new Date());   //It's you code
        },(i+i+1)*1000);
    }
} 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-05-02T12:20:04.280

创建这样一个等待毫秒的函数的最佳方法，此函数将等待参数中提供的毫秒数：

```
function waitSeconds(iMilliSeconds) {
    var counter= 0
        , start = new Date().getTime()
        , end = 0;
    while (counter < iMilliSeconds) {
        end = new Date().getTime();
        counter = end - start;
    }
}
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2020-09-30T18:47:00.963

```
setTimeout(function() {
     $('.message').hide();
}, 5000); 
```

这将在 5 秒后隐藏 '.message' div。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-07-13T14:25:24.600

根据 Joseph Silber 的[回答](https://stackoverflow.com/a/14226807/7747942)，我会这样做，更通用一点。

您将拥有您的功能（让我们根据问题创建一个）：

```
function videoStopped(newState){
   if (newState == -1) {
       alert('VIDEO HAS STOPPED');
   }
} 
```

你可以有一个等待功能：

```
function wait(milliseconds, foo, arg){
    setTimeout(function () {
        foo(arg); // will be executed after the specified time
    }, milliseconds);
} 
```

最后，您将拥有：

```
wait(5000, videoStopped, newState); 
```

这是一个解决方案，我宁愿不在等待函数中使用参数（只使用`foo();`而不是`foo(arg);`），但这只是示例。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2020-01-09T10:30:23.997

您可以通过对函数（ async 和 await ）进行小的更改来增加延迟。

```
const addNSecondsDelay = (n) => {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve();
    }, n * 1000);
  });
}

const asyncFunctionCall = async () {

  console.log("stpe-1"); 
  await addNSecondsDelay(5);
  console.log("step-2 after 5 seconds delay"); 

}

asyncFunctionCall(); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2022-02-24T14:21:39.267

尝试这个。当我不得不限制 API 调用时使用了类似的方法。

```
const sleep = (delay) => new Promise ((resolve) => setTimeout (resolve, delay)) 
```

甚至适用于 for..of 循环：

```
for (const item of items) {
  console.dir('Waiting 2 seconds before doing anything...')
  await sleep(2000)
  // Code below here will be executed after 2 seconds
  // Rinse and repeat
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-09-14T05:40:38.330

使用 angularjs：

```
$timeout(function(){
if(yourvariable===-1){
doSomeThingAfter5Seconds();
}
},5000) 
```

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2018-05-22T08:15:26.000

创建新的 Js 函数

```
function sleep(delay) {
        var start = new Date().getTime();
        while (new Date().getTime() < start + delay);
      } 
```

当您想延迟执行时调用该函数。在 int 中使用毫秒作为延迟值。

```
####Some code
 sleep(1000);
####Next line 
```

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2018-08-05T20:53:36.820

我用它从 Edge 或 IE 运行 PC 游戏。两个自我在 7 秒后关闭。

Firefox 和 Google Chrome 不能用于以这种方式启动游戏。

```
 <html>
    <body>
    <a href="E:\game\game.exe" name="game" onmouseout="waitclose(7000);"> game
    <img src="game.jpg" width="100%" height="97%" ></a>
    <script>
    function waitclose(ms){
     var start = new Date().getTime();var end=start;
     while(end < start + ms) {end = new Date().getTime();}
    window.open('', '_self', ''); window.close();
    }
    </script>
    </body>
    </html> 
```

# javascript - 处理 JS 中的查询字符串，如 http_build_query 等

> ID：14226811
> 
> 赞同：0
> 
> 时间：2013-01-09T01:11:50.110
> 
> 标签：javascript, query-string, location-href

这就是我所拥有的

```
if(condition1) {
     location.href = location.href+'/?site_type=normal';
}
else if(condition2) {
    location.href = location.href+'/?site_type=other';
} 
```

当然，如果 location.href 上已经有查询变量，那就有问题了，等等。

我需要

1.  从查询字符串中查找变量
2.  如果 site_type 已经存在，则将该值替换为“正常”或“其他”
3.  使用新的 site_type 重建 url

编辑：我发现我需要考虑各种 URL：

*   域名.com
*   domain.com/path/to/sth/
*   domain.com/?site_type=正常
*   domain.com?var=123&foo=987
*   domain.com/path/?site_type=normal&var=123&foo=987

所以，这是我想出的，欢迎提出建议：

```
var searchstring = window.location.search;
var url = window.location.href;

console.log('search: ' +  searchstring);
console.log( 'url: ' +  url);
// strip search from url
url = url.replace(searchstring,"");
console.log( 'url: ' +  url);
//strip site_type from search
searchstring = searchstring.replace("&site_type=normal","")
                        .replace("&site_type=other","")
                        .replace("?site_type=normal","")
                        .replace("?site_type=other","")
                        .replace("?","")
                        ;
console.log('search: ' +  searchstring);
if(searchstring != ''){searchstring = '&' + searchstring;}
var final = url + '?site_type=normal' + searchstring;
final = final.replace("&&","&");
console.log('final: ' +  final); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:26:50.930

您可以使用 直接访问查询字符串`window.location.search`。您可以使用[此处](http://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/)找到的正则表达式技巧将其转换为对象。

```
var queryString = {};
window.location.search.replace(/([^?=&]+)(=([^&]*))?/g, function($0, $1, $2, $3) {
  queryString[$1] = $3; }
); 
```

然后适当地设置`site_type`。`queryString`

```
queryString["site_type"] = "normal"; 
```

最后，将其转换回字符串并将其设置为`window.location.search`.

```
var searchString = "";
for ( q in queryString ) {
  searchString+="&" + q + "=" + queryString[q];
}
window.location.search = searchString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:24:28.000

这是一种方法：

```
//remove existing param and append new one..
var newHref = window.location.href.replace(window.location.search,"") + '?site_type=other';

//change href
window.location.href = newHref; 
```

仅当您有一个要替换的参数时才有效，否则它将删除所有参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T01:31:53.763

例如，如果你有

yourpage.com/?site_type=normal

你只需要网站而不是查询你可以清除它们的变量

```
var novars= location.href.replace(window.location.search,"") 
```

这种情况下 novars = youroage.com

为了获取变量，您可以这样做：

```
var site_type = window.location.search.replace("?site_type=",""); 
```

在这里，我将获得 site_type 值，无论它是正常的还是其他的

这种情况下你的变量`site_type = "normal"`

对于重建 url，你可以添加新的 site_type

```
location.href = novars+"?site_type=normal" 
```

或者

```
location.href = novars+"?site_type=other" 
```

# android - webview 在 vi meo 视频上崩溃

> ID：14226812
> 
> 赞同：2
> 
> 时间：2013-01-09T01:11:59.323
> 
> 标签：android, webkit, android-webview

我正在尝试在 WebView 中全屏播放 vimeo 视频，但我的应用程序崩溃了。我基本上复制了这个答案：[https://stackoverflow.com/a/10912199/837746](https://stackoverflow.com/a/10912199/837746)并将 Test.java 更改为加载[http://vimeo.com/channels/staffpicks/54596361](http://vimeo.com/channels/staffpicks/54596361)

打开视频全屏并开始播放后，通过后退按钮退出视频全屏在播放期间工作正常，但让视频完成（您可以手动跳到几乎播放结束）并拥有 WebChromeClient.hideCustomView()播放后自动隐藏视图导致我的应用程序大部分时间因段错误而崩溃：

致命信号 11 (SIGSEGV) 位于 0x59335940 (code=2)，线程 27554 (WebViewCoreThre)

我需要做其他解决方法吗？我尝试在 webview 中将 manifest 和插件状态中的 hardwareAccelerated=true 设置为 on，但它没有帮助。我在果冻豆 4.2.1 上。

# php - 如何在谷歌日历中获取特定事件的颜色 ID

> ID：14226818
> 
> 赞同：1
> 
> 时间：2013-01-09T01:12:50.437
> 
> 标签：php, google-api, google-calendar-api

有没有办法访问谷歌日历中特定事件的 colorID？有很多教程告诉如何设置事件的颜色 ID，但我需要一种方法来获取已经在谷歌日历中的事件的颜色 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T08:41:20.127

@Narayan：是的，实际上非常简单。只需测试来自谷歌日历页面（您可以测试 REST API 的 api 页面）中的任何事件响应，并确保事件也有颜色。然后，您会看到响应中存在 colorid。因此，基本上，您只需像设置日历的任何其他正常属性一样设置 colorid。

# ios - AFNetworking - 在 iOS 上上传 json 文件

> ID：14226820
> 
> 赞同：1
> 
> 时间：2013-01-09T01:13:05.923
> 
> 标签：ios, file-upload, afnetworking

我开始在这里长出白发:-)

我有这个代码，它基于图像上传 - 在网络上有很多，但我需要它来上传 .json 文件 - 该文件正确生成以显示在我的文档目录中，但我需要它上传到我的服务器。

```
 _myJSON= [NSMutableString stringWithFormat:@"{ \" %@ \" : [ ", _menuCategoryPickerFld.text];

[_myJSON appendString: [NSString stringWithFormat: @"{ \"name\" : \"%@\", \"model\" : \"%@\", \"size\" : \"%@\" }",
                        _menuTitlePickerFld.text, _menuSubTitlePickerFld.text, _menuPricePickerFld.text]];

[_myJSON appendString: @" ]}"];

NSData *data = [_myJSON dataUsingEncoding:NSUTF8StringEncoding];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"testJSON2.json"];
[data writeToFile:appFile atomically:YES];

NSString *tempString = @"http://thepalmsmarket.co.nz/jsonExports/uploads/";

NSURL *remoteURL = [NSURL URLWithString:tempString];

// Back to NSData
NSData *convertedFile = [_myJSON dataUsingEncoding:NSUTF8StringEncoding];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:remoteURL];
[request setHTTPMethod: @"POST"];
[request setHTTPBody:convertedFile];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite)
{

}];
[operation start]; 
```

好的，所以我认为某些格式是错误的，但对于要上传的文件，我不需要在我的应用程序中的某处添加我的网络服务器的用户名和密码，这样就可以对上传进行身份验证了吗？

# javascript - 当我清除数组时，数组内的 javascript 对象是否会从内存中删除？

> ID：14226825
> 
> 赞同：3
> 
> 时间：2013-01-09T01:13:45.513
> 
> 标签：javascript, garbage-collection

我从来没有真正考虑过垃圾收集，我不知道在制作小型 javascript 游戏/应用程序时是否有必要考虑。任何建议表示赞赏，但我会在最后问我的具体问题。

很多时候我写这种形式的代码：

```
var foos=new Array();
generateFoos();
function generateFoos()
{
    foos=[];
    for (fooIndex=0;fooIndex<numberOfFoos;fooIndex++)
    {
        foos[fooIndex]=new foo(Math.random(),Math.random());
    }
} 
function foo(bar,bas)
{
   this.bar=bar;
   this.bas=bas;
} 
```

所以我的问题是，当我说`foos=[]`（第 5 行）时，这是否会从内存中删除该数组中的对象，或者它们是否漂浮在某个地方，从而使程序变得更大更慢？如果我想`generateFoos()`多次调用loooot，比如每次用户按下一个键，我应该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T02:11:42.623

**对于一个特定的答案，由于接受的答案实际上并没有直接回答问题，是的， foo = [] 确实取消引用数组中的任何先前值。**

正如 Ales 所说，“当一个对象变得无法访问时，它就有资格进行垃圾收集。” 实际上，这是浏览器从内存中清除此类内容的时候。

重要的一点，**删除 DOES NOT GARBAGE COLLECT**。

你一遍又一遍地看到这一点，甚至在这个问题的评论中。**delete**关键字从对象中**删除一个属性，**与垃圾回收无关。

**我还想就您的代码本身提供一些建议。**

1) 对基本数据类型使用文字，而不是新的

2) 在声明函数之前不要调用函数。是的，它有效，但它很混乱，以后更难阅读。请记住，您花在阅读代码上的时间比编写代码要多得多。方便以后跟进。

3）记住你的功能范围。没有 var 声明的任何变量都是全局的。使用 var，它仍然在包含它的函数的范围内。变量在函数中作用域的另一种方式是当它们作为命名参数传入时。

4）在创建函数时对函数使用 var 。在您的代码中，您的函数是全局函数。

5）使用间距。文字的密度并不比敬虔更重要。你现在可能已经 20 多岁了，视力很好，但你会在短短几年内欣赏白色空间。

6) 用 var 在 for 循环中声明计数器。除非您希望它们是全球性的。而你几乎*永远*不会。

现在让我们重新编写您的代码：

```
var numberOfFoos = 10,
    foos = [];

var generateFoos = function(){

    foos = [];

    for( var fooIndex = 0; fooIndex < numberOfFoos; fooIndex++ ){

        foos[ fooIndex ] = new foo( Math.random(), Math.random() );

    }

},

foo = function( bar, bas ){

   this.bar = bar;
   this.bas = bas;

}

generateFoos();
console.log( foos ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T01:32:16.147

回答您的问题：**当一个对象变得无法访问时，它就有资格进行垃圾收集**。如果您的程序没有持有对该数组中对象的任何其他引用，它们将被垃圾回收。

实际垃圾收集的时间取决于许多方面和选择的垃圾收集算法，但您在编写代码时不应该担心它。

考虑垃圾收集时最好的建议是让**垃圾****收集器去做它的工作**。不要试图指导它或帮助它（例如手动将引用归零）。关注代码的问题和功能方面。

# php - 如何显示来自数据库（MySQL）的数据？

> ID：14226828
> 
> 赞同：-7
> 
> 时间：2013-01-09T01:14:01.520
> 
> 标签：php, mysql

让我弄清楚我想要什么...我有一个页面，我使用以下代码显示存储在数据库中的数据，并且您可以看到页面显示`$row['Email']`...在同一个表中，我还有另外两行名为`Age`and `Name`。 .正如您在下面的代码中看到的那样`$row['Email']`，链接到名为 info.php 的页面..所以当用户点击电子邮件时，他将被重定向到**info.php**并看到年龄和姓名......所以这是我可以解决的问题在**info.php**上显示每个人的年龄和姓名，但我只想显示单个用户信息..就像你在网上买东西时，你点击物品图片或标题，你会看到描述....有没有人知道?

```
id    |  Age  |     Email            | Name
1     |  24   |  someoneAA@yahoo.com | xx1
2     |  34   |  someoneBB@yahoo.com | xx2
3     |  56   |  someoneCC@yahoo.com | xx3
4     |  19   |  someoneDD@yahoo.com | xx4

<?php
$con = mysql_connect("localhost","wht","");
if (!$con) {
die('Could not connect: ' . mysql_error());
}
mysql_select_db("dbase", $con);
$result = mysql_query("SELECT * FROM User ");
while($row = mysql_fetch_array($result)) {
echo "<td><a href='info.php'>". $row['Email']."</a></td>";
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:21:48.993

它会是这样的：

```
echo '<td><a href="info.php?id='.$row['id'].'">'.$row['Email'].'</a></td>'; 
```

您将用户 ID 传递给 info.php 页面。这仅适用`Id`于您的表中调用了 Id 列。或者，您可以使用`Email`而不是`Id`：

```
echo '<td><a href="info.php?email='.$row['Email'].'">'.$row['Email'].'</a></td>'; 
```

现在，在 info.php 上，您可以执行另一个查询，如下所示：

```
$result = mysql_query("SELECT * FROM User WHERE id = " . $_GET['id']);
while($row = mysql_fetch_array($result)){
echo $row['Age'] . ' ' . $row['Name'];
} 
```

如果你使用`Email`而不是`Id`第一行需要看起来像这样：

```
$result = mysql_query("SELECT * FROM User WHERE Email = " . $_GET['email']); 
```

请注意，这只是一个指南。您对 sql 注入持开放态度，您应该考虑使用[PDO](http://php.net/manual/en/book.pdo.php)。

# c# - ip地址/范围的正则表达式

> ID：14226829
> 
> 赞同：0
> 
> 时间：2013-01-09T01:14:21.493
> 
> 标签：c#, regex, winforms, ip

我有一个文本框，它应该采用的唯一输入是单个 IP 地址或以下形式的范围：`10.2.3.4-10`

到目前为止我有这个：

```
string txt = "10.13.11.12-100";

        string re1 = "((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))(?![\\d])";   // IPv4 IP Address 1
        string re2 = ".*?"; // Non-greedy match on filler
        string re3 = @"\b([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])\b";//"([0-255])";   // Integer Number 1

        Regex r = new Regex(re1 + re2 + re3, RegexOptions.IgnoreCase | RegexOptions.Singleline);
        Regex r2 = new Regex(re1, RegexOptions.IgnoreCase | RegexOptions.Singleline);
        Match m = r.Match(txt);
        Match m3 = r2.Match(txt);
        if (m.Success || m3.Success)
        {...} 
```

唯一的问题是，如果我拥有`100.100.11.11-256`它，它仍然会返回 true，因为它与`m3.Success`上面的匹配为 true。

如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T01:18:29.983

对于 IP 范围正则表达式：

```
^10.2.3.(?:[4-9]|10)$ 
```

对于单个 IP 地址：[匹配 DNS 主机名或 IP 地址的正则表达式？](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

# java - Java：CSV文件易读/写

> ID：14226830
> 
> 赞同：7
> 
> 时间：2013-01-09T01:14:21.570
> 
> 标签：java, csv, file-io, line, bufferedwriter

我正在开发一个需要快速访问 CSV 逗号分隔电子表格文件的程序。到目前为止，我已经能够使用 BufferedReader 轻松读取它。但是，现在我希望能够编辑它读取的数据，然后将其导出回 CSV。

电子表格包含姓名、电话号码、电子邮件地址等。该程序列出了每个人的数据，当您单击它们时，它会打开一个包含更多详细信息的页面，这些信息也是从 CSV 中提取的。在该页面上，您可以编辑数据，并且我希望能够单击“保存更改”按钮，然后将数据导出回 CSV 中的相应行 - 或删除旧的，并附加新的。

我对使用 BufferedWriter 或者我应该使用的任何东西都不是很熟悉。

我开始做的是创建一个名为 FileIO 的自定义类。它同时包含一个 BufferedReader 和一个 BufferedWriter。到目前为止，它有一个返回 bufferedReader.readLine() 的方法，称为 read()。现在我想要一个名为 write(String line) 的函数。

```
public static class FileIO {
    BufferedReader read;
    BufferedWriter write;

    public FileIO (String file) throws MalformedURLException, IOException {
        read = new BufferedReader(new InputStreamReader (getUrl(file).openStream()));
        write = new BufferedWriter (new FileWriter (file));
    }

    public static URL getUrl (String file) throws IOException {
        return //new URL (fileServer + file).openStream()));
                FileIO.class.getResource(file);
    }

    public String read () throws IOException {
        return read.readLine();
    }

    public void write (String line) {
        String [] data = line.split("\\|");
        String firstName = data[0];

        // int lineNum = findLineThatStartsWith(firstName);
        // write.writeLine(lineNum, line);
    }
}; 
```

我希望有人知道我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T01:23:11.213

与其重新发明轮子，不如看看支持读取和写入 CSV 文件的[OpenCSV 。](http://opencsv.sourceforge.net/)以下是[阅读和写作的例子](http://opencsv.sourceforge.net/#how-to-read)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-13T07:42:41.100

请考虑[Apache commons csv](https://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/package-summary.html)。为了快速理解api，有四个重要的类：

> CSV 格式

指定 CSV 文件的格式并解析输入。

> CSV解析器

根据指定的格式解析 CSV 文件。

> [CSV打印机](https://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVPrinter.html)

以 CSV 格式打印值。

> CSV 记录

从 CSV 文件解析的 CSV 记录。

代码示例： [![在此处输入图像描述](../Images/67aed34128e3bb0c89f226a7188abdcb.png)](https://i.stack.imgur.com/2pqjf.png)

单元测试代码： [![在此处输入图像描述](../Images/15c3f7d3fb3ba683619cf1b363dc6739.png)](https://i.stack.imgur.com/JMzut.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:37:43.453

> 电子表格包含姓名、电话号码、电子邮件地址等。该程序列出了每个人的数据，当您单击它们时，它会打开一个包含更多详细信息的页面，这些信息也是从 CSV 中提取的。在该页面上，您可以编辑数据，并且我希望能够单击“保存更改”按钮，然后将数据导出回 CSV 中的相应行 - 或删除旧的，并附加新的。

文件的内容是一个字节序列。CSV 是一种基于文本的文件格式，即字节序列被解释为字符序列，其中换行符由特殊换行符分隔。

因此，如果一行的长度增加，则需要移动所有后续行的字符，以便为新字符腾出空间。同样，要删除一行，您必须移动后面的字符以填补空白。也就是说，如果不重写文件中的所有后续行，则无法更新 csv 中的行（至少在更改其长度时不能）。为简单起见，我将重写整个文件。

由于您已经有了编写和读取 CSV 文件的代码，因此调整它应该很简单。但在你这样做之前，可能值得问问自己你是否使用了正确的工具来完成这项工作。如果目标是保留记录列表，并在表单中编辑单个记录，则 Microsoft Access 或任何类似 Open Office 的程序可能更适合。如果您的 UI 需求超出了这些程序所提供的范围，那么使用关系数据库来保存您的数据可能更合适（比 CSV 更高效、更灵活）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-28T07:18:39.123

添加依赖项

```
implementation 'com.opencsv:opencsv:4.6' 
```

在 onCreate() 中添加以下代码

```
InputStreamReader is = null;
        try {
              String path= "storage/emulated/0/Android/media/in.bioenabletech.imageProcessing/MLkit/countries_image_crop.csv";

             CSVReader reader = new CSVReader(new FileReader(path));
             String[] nextLine;
             int lineNumber = 0;
             while ((nextLine = reader.readNext()) != null) {
                lineNumber++;

                //print CSV file according to your column 1 means first column, 2 means 
                  second column
                Log.e(TAG, "onCreate: "+nextLine[2] );
            }
        }
        catch (Exception e)
        {
             Log.e(TAG, "onCreate: "+e );
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-22T18:10:49.353

我用它解决了

```
 <dependency>
        <groupId>com.fasterxml.jackson.dataformat</groupId>
        <artifactId>jackson-dataformat-csv</artifactId>
        <version>2.8.6</version>
    </dependency> 
```

和

```
 private static final CsvMapper mapper = new CsvMapper();
  public static <T> List<T> readCsvFile(MultipartFile file, Class<T> clazz) throws IOException {
    InputStream inputStream = file.getInputStream();
    CsvSchema schema = mapper.schemaFor(clazz).withHeader().withColumnReordering(true);
    ObjectReader reader = mapper.readerFor(clazz).with(schema);
    return reader.<T>readValues(inputStream).readAll();
} 
```

# sql - 如何将混合格式的 varchar 日期字符串显示为另一种格式？

> ID：14226831
> 
> 赞同：0
> 
> 时间：2013-01-09T01:14:30.617
> 
> 标签：sql, sql-server-2008, date

我正在使用 SQL Server 2008 R2。我知道我可以使用具有不同格式代码的 CONVERT 作为第三个参数，首先转换为 DATETIME，然后再次转换为 VARCHAR，使用另一种格式代码来更改显示格式。

现在真正的问题是我在单个列中混合了原始数据。所以我的问题是你如何编写一个 SELECT 语句来显示从混合的 YYYY/MM/DD、DD/MM/YYYY 到 DD/MM/YYYY？

我尝试使用 ISDATE() 但它认为 31/01/2013 不是日期，而 01/01/2013 是日期。现在我只能想到看 YYYY 是在左边还是在右边来确定正确的输入格式，但我不知道如何在单个 SELECT 语句中写出来。

*任何先更改格式然后执行简单 SELECT 的过程都不是一种选择。我不允许更改来源。*

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T01:20:39.527

为什么不直接使用字符串操作？就像是：

```
select (case when substring(d, 5, 1) = '/'  -- YYYY/MM/DD
             then right(d, 2)+'/'+substring(6, 2)+'/'+left(d, 4)
             else d
        end) 
```

顺便说一句，如果您选择以字符串形式表示的日期格式，我强烈推荐 YYYY-MM-DD（或 YYYY/MM/DD），因为比较运算符适用于它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:29:27.680

如果您确定数据中只存在这 2 种格式（yyyy/mm/dd 和 dd/mm/yyyy），那么您可能会使用以下`CASE`语句来逃避：

```
CASE
  WHEN (SUBSTRING(dateColumn, 5, 1) = '/') THEN CONVERT(datetime, dateColumn, 111)
  ELSE CONVERT(datetime, dateColumn, 103)
END 
```

# android - Android链接.so用于命令行可执行文件？

> ID：14226832
> 
> 赞同：1
> 
> 时间：2013-01-09T01:14:46.013
> 
> 标签：android, c, command-line, shared-libraries

我正在开发一个跨平台库，并正在尝试在 Android 上进行测试。我已经用 ndk-build 编译了我的库，并且正在尝试编译和运行我们为该库提供的命令行测试装置。

我曾经将测试夹具和`adb push`.so放入777中。`/data/local/tmp``chmod`

然后我`adb shell`用来运行测试，但得到以下错误

```
shell@android:/data/local/tmp $ ./mytest
./mytest
link_image[1936]:  7289 could not load needed library 'libtconfig.so' for './mytest' (load_library[1091]: Library 'libtconfig.so' not found)CANNOT LINK EXECUTABLE 
```

两者都是`mytest`可执行文件并且`libtconfig.so`在同一个目录中。我会假设它看起来在“。” 目录第一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:57:33.827

我发现我可以添加路径`/data/local/tmp`并且`LD_LIBRARY_PATH`它会起作用，但是`adb shell`在脚本中使用命令时，每个“ `adb shell`”都是一个新实例，因此`LD_LIBRARY_PATH`被重置

# c# - Windows Phone 7 如何让应用程序在安装后执行某些操作

> ID：14226835
> 
> 赞同：0
> 
> 时间：2013-01-09T01:15:08.010
> 
> 标签：c#, windows, silverlight

从 MarketPlace 安装应用程序后，如何让应用程序执行某些操作？

好吧，如果有可能的话，那就是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:15:23.610

在 wp7 中安装后无法让应用程序执行某些操作。

你可以让它在第一次运行应用程序时使用自定义代码做一些事情。基本上将“已经运行”的值缓存到隔离存储中。

# c++ - C++ 11 线程与 clang

> ID：14226840
> 
> 赞同：5
> 
> 时间：2013-01-09T01:15:25.377
> 
> 标签：c++, multithreading, c++11, clang, libc++

我想学习使用 C++11 线程来加速我的语言的编译（是的，我正在构建一个编译器：x）。我尝试的第一个示例使用 clang (3.3 SVN) 引发了几个错误。它在 GCC (4.6.3) 下编译得很好。

我从 llvm.org 的 SVN 下载了 clang 和 libc++。clang 是使用 GCC (4.6.3) 编译的，而 libc++ 是使用 clang 编译的。两个 makefile 都是用 CMake 生成的。

对于铿锵声，我遵循了本指南： http: [//llvm.org/docs/GettingStarted.html#checkout](http://llvm.org/docs/GettingStarted.html#checkout)

对于 libc++，我遵循了本指南： http: [//libcxx.llvm.org/](http://libcxx.llvm.org/)

我要编译的一段代码（`foobar.cpp`）：

```
#include <iostream>
#include <thread>

using namespace std;

int main(void) {
    thread t1([](void)->void {
        cout << "foobar" << endl;
    });
} 
```

它编译得很好，`clang --std=c++0x -stdlib=libc++ -lpthread foobar.cpp`但我得到了很多链接器错误：

```
/tmp/foobar-59W5DR.o: In function `main':
foobar.cpp:(.text+0x21): undefined reference to `std::__1::thread::~thread()'
/tmp/foobar-59W5DR.o: In function `_ZNSt3__16threadC2IZ4mainE3$_0JEvEEOT_DpOT0_':
foobar.cpp:(.text+0x5c): undefined reference to `operator new(unsigned long)'
foobar.cpp:(.text+0x186): undefined reference to `operator delete(void*)'
foobar.cpp:(.text+0x19b): undefined reference to `std::__1::__throw_system_error(int, char const*)'
/tmp/foobar-59W5DR.o: In function `_ZNSt3__114__thread_proxyINS_5tupleIJZ4mainE3$_0EEEEEPvS4_':
foobar.cpp:(.text+0x200): undefined reference to `std::__1::__thread_local_data()'
foobar.cpp:(.text+0x211): undefined reference to `operator new(unsigned long)'
foobar.cpp:(.text+0x23b): undefined reference to `std::__1::__thread_struct::__thread_struct()'
foobar.cpp:(.text+0x31b): undefined reference to `operator delete(void*)'
/tmp/foobar-59W5DR.o: In function `_ZNSt3__110unique_ptrINS_5tupleIJZ4mainE3$_0EEENS_14default_deleteIS3_EEED2Ev':
foobar.cpp:(.text+0x3dd): undefined reference to `operator delete(void*)'
/tmp/foobar-59W5DR.o: In function `main::$_0::operator()() const':
foobar.cpp:(.text+0x3fc): undefined reference to `std::__1::cout'
/tmp/foobar-59W5DR.o: In function `_ZNSt3__110unique_ptrINS_5tupleIJZ4mainE3$_0EEENS_14default_deleteIS3_EEEC2EPS3_':
foobar.cpp:(.text+0x4e9): undefined reference to `std::terminate()'
/tmp/foobar-59W5DR.o: In function `std::__1::__thread_specific_ptr<std::__1::__thread_struct>::reset(std::__1::__thread_struct*)':
foobar.cpp:(.text._ZNSt3__121__thread_specific_ptrINS_15__thread_structEE5resetEPS1_[_ZNSt3__121__thread_specific_ptrINS_15__thread_structEE5resetEPS1_]+0x57): undefined reference to `std::__1::__thread_struct::~__thread_struct()'
foobar.cpp:(.text._ZNSt3__121__thread_specific_ptrINS_15__thread_structEE5resetEPS1_[_ZNSt3__121__thread_specific_ptrINS_15__thread_structEE5resetEPS1_]+0x60): undefined reference to `operator delete(void*)'
/tmp/foobar-59W5DR.o: In function `std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*)':
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x28): undefined reference to `std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::sentry(std::__1::basic_ostream<char, std::__1::char_traits<char> >&)'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x1ec): undefined reference to `std::__1::ios_base::getloc() const'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x1fe): undefined reference to `std::__1::ctype<char>::id'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x206): undefined reference to `std::__1::locale::use_facet(std::__1::locale::id&) const'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x272): undefined reference to `std::__1::locale::~locale()'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x294): undefined reference to `std::__1::locale::~locale()'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x378): undefined reference to `std::__1::ios_base::clear(unsigned int)'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x3d0): undefined reference to `std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::~sentry()'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x3dc): undefined reference to `__cxa_begin_catch'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x3f9): undefined reference to `std::__1::ios_base::__set_badbit_and_consider_rethrow()'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x403): undefined reference to `__cxa_end_catch'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x424): undefined reference to `std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::~sentry()'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x43d): undefined reference to `__cxa_end_catch'
foobar.cpp:(.text._ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc[_ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc]+0x466): undefined reference to `std::terminate()'
/tmp/foobar-59W5DR.o: In function `std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::endl<char, std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&)':
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0x38): undefined reference to `std::__1::ios_base::getloc() const'
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0x49): undefined reference to `std::__1::ctype<char>::id'
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0x55): undefined reference to `std::__1::locale::use_facet(std::__1::locale::id&) const'
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0xac): undefined reference to `std::__1::locale::~locale()'
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0xbe): undefined reference to `std::__1::locale::~locale()'
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0xcd): undefined reference to `std::__1::basic_ostream<char, std::__1::char_traits<char> >::put(char)'
foobar.cpp:(.text._ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_[_ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_]+0xdd): undefined reference to `std::__1::basic_ostream<char, std::__1::char_traits<char> >::flush()'
/tmp/foobar-59W5DR.o: In function `std::__1::ostreambuf_iterator<char, std::__1::char_traits<char> > std::__1::__pad_and_output<char, std::__1::char_traits<char> >(std::__1::ostreambuf_iterator<char, std::__1::char_traits<char> >, char const*, char const*, char const*, std::__1::ios_base&, char)':
foobar.cpp:(.text._ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_[_ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_]+0x215): undefined reference to `std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init(unsigned long, char)'
foobar.cpp:(.text._ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_[_ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_]+0x389): undefined reference to `std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::~basic_string()'
foobar.cpp:(.text._ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_[_ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_]+0x3a4): undefined reference to `std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::~basic_string()'
/tmp/foobar-59W5DR.o:(.eh_frame+0x47): undefined reference to `__gxx_personality_v0'
clang-3: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是两个标准库下的标准搜索目录。由于 'clang -Wp,-v -x c++ - -fsyntax-only' 我得到了这个：

我试过`clang --std=c++11 -stdlib=libc++ -llibc++ -lpthread -o foobar foobar.cpp`但链接器再次失败，它没有找到 libc++。我是否无法链接到 libc++ 还是更困难？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T01:21:35.623

您正在为 C 而不是 C++ 编译 clang。

*   对于 C 使用**clang**
*   对于 C++ 使用**clang++**

~~clang 之所以没有警告您，是因为您明确定义了标准。~~

# c# - 如何使用 C# 查找硬盘型号？

> ID：14226851
> 
> 赞同：5
> 
> 时间：2013-01-09T01:16:17.247
> 
> 标签：c#

在我正在编写的程序的一部分中，我试图提取有关指定本地硬盘驱动器的设备信息。我已经能够使用 DriveInfo 类创建一些值返回方法，如下所示：

```
//Gets drive format
    public string GetDriveFormat(string driveName)
    {
        foreach (DriveInfo drive in DriveInfo.GetDrives())
        {
            if (drive.IsReady && drive.Name == driveName)
            {
                return drive.DriveFormat;
            }
        }
        return "";
    }
//Example of use
   MessageBox.Show(GetDriveFormat("C:\\")); 
```

我现在遇到的问题是 DriveInfo 类似乎没有 Model 属性。我已经查看了所有内容，但无法找到一种方法来构造一个返回值的方法，该方法将返回驱动器的模型，就像在设备管理器中可以看到的一样。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:33:34.977

不幸的是，您无法使用`DriveInfo`该类获取驱动器的制造商和型号。

您将不得不求助于 WMI：

```
WqlObjectQuery q = new WqlObjectQuery("SELECT * FROM Win32_DiskDrive");
ManagementObjectSearcher res = new ManagementObjectSearcher(q);
foreach (ManagementObject o in res.Get()) {
Console.WriteLine("Caption = " + o["Caption"]);
Console.WriteLine("DeviceID = " + o["DeviceID"]);
Console.WriteLine("Decsription = " + o["Description"]);
Console.WriteLine("Manufacturer = " + o["Manufacturer"]);
Console.WriteLine("MediaType = " + o["MediaType"]);
Console.WriteLine("Model = " + o["Model"]);
Console.WriteLine("Name = " + o["Name"]);
// only in Vista, 2008 & etc: //Console.WriteLine("SerialNumber = " + o["SerialNumber"]);
} 
```

不确定您是否还需要考虑已安装的驱动器：

```
foreach(ManagementObject volume in new ManagementObjectSearcher("Select * from Win32_Volume" ).Get())
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:26:27.967

我不完全确定您是否可以在不使用较低级别的 api 的情况下获得该信息。这篇文章应该可以帮助您实现目标。

[http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)

链接的快速摘要：

*   添加对`System.Management`库的引用

然后你可以使用：

```
var disks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
foreach (ManagementObject disk in disks.Get())
{
   Console.WriteLine(disk["Model"].ToString());
   Console.WriteLine("\tSerial: " + disk["SerialNumber"]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T01:34:51.793

您需要使用较低级别的 API 来获取此信息，即使那样它仍然可能不准确。* 硬盘驱动器的内部详细信息在 Win32 API 中公开，您仍然可以通过 WMI 在 C# 中访问它.

*：请注意，这仍然仅限于硬件信息，因为 Windows 能够看到它。在某些情况下，它不会或不能准确（例如，对于 RAID 阵列，Windows 将 N 个驱动器视为单个驱动器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T01:53:03.750

这里有一些也可以为你工作的东西，你可以随意调整它

```
String drive = "c";
ManagementObject disk = new ManagementObject("Win32_LogicalDisk.DeviceID=\"" + drive + ":\"");
disk.Get();
Console.WriteLine(disk["VolumeName"]);
foreach (var props in disk.Properties)
{
    Console.WriteLine(props.Name + " " + props.Value);
}
Console.ReadLine(); 
```

# iphone - UIToolbar 项目消失 - ios6 中的奇怪错误

> ID：14226859
> 
> 赞同：3
> 
> 时间：2013-01-09T01:16:57.483
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

这是当前的设置。

我有带有 5 个按钮的 navigationController 工具栏，点击它们会隐藏工具栏 2 秒钟，然后再次显示工具栏（第 5 个按钮除外 - 它会显示一个带有按钮（操作和取消）的操作表）。

在点击 1-4 按钮时，我做了 a`self.navigationController.toolbarHidden = YES;`并在*2 seconds*之后，我设置了`self.navigationController.toolbarHidden = NO;` ，这会带回工具栏，一切都很好。

在点击第 5 个按钮时，会弹出操作表。

1.  如果我点击 CANCEL actionsheet => actionSheet dismissed => Toolbar 很好。
2.  如果我点击 ACTION 按钮，我会`self.navigationController.toolbarHidden = YES;`在 2 秒后执行一个操作...`self.navigationController.toolbarHidden = NO;` 但现在...工具栏按钮已消失。

进一步调查...

***我可以看到工具栏按钮的alpha***值似乎设置为 0。

我不知道为什么在操作表操作后工具栏项的 alpha 设置为 value = 0。

谁能告诉我这个的根本原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:10:20.430

您是否尝试将工具栏项数组设置为零？我遇到了同样的问题，结果证明在设置工具栏的项目时进行检查似乎有效：

```
if ([self.navigationController.toolbar.items count] > 0) {
   [self.navigationController.toolbar setItems:nil];
}

[self.navigationController.toolbar setItems:toolbarItems]; //toolbarItems is your array of UIBarButtonItems. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:04:25.963

我设法以不同的方式解决了这个问题。当操作表出现时，我隐藏了工具栏，在 之后`buttonAction()`，我基本上再次显示了工具栏。

这解决了toolbarItems消失的问题。

但是为什么工具栏项消失并设置 alpha=0 的原因对我来说仍然是个谜。如果有人找到原因，请告诉我:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:35:50.723

我遇到了同样的问题，并在其中一个样本中重现了它。在 loadView / viewDidLoad 中手动设置工具栏项，然后调用 ActionSheet 时，这似乎是 iOS6 中的一个错误。

下面的代码是一种解决方法 -

```
-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSArray* items = self.toolbarItems;
    [self setToolbarItems:nil];
    [self setToolbarItems:items animated:NO];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T09:11:54.937

我通过将操作代码移动到单独的方法来解决它，然后通过发送消息来调用它，`performSelector:withObject:afterDelay:`延迟为 0.25f 秒

例子：

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        [self performSelector:@selector(logout) withObject:nil afterDelay:0.25f];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-10T15:35:02.953

我不知道是不是这样，我发现消失的项目实际上是在工具栏中，但是放在了视图的底部。也许在某些情况下重置它们可能会导致自动布局问题。

我通过在 viewcontroller 的视图（而不是 navigationControllers'）上调用 setNeedLayout 方法来修复它

```
self.toolbarItems = toolButtons;
[self.view setNeedsLayout]; 
```

# ios - 审核前更新 App Store 提交

> ID：14226861
> 
> 赞同：0
> 
> 时间：2013-01-09T01:17:02.117
> 
> 标签：ios, xcode, app-store, appstore-approval

我上传了错误版本的 iOS 应用以提交到应用商店。反正有没有修改这个，因为它还没有被审查过？我找不到怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:19:24.637

在 iTunes Connect 中找到该`Reject Binary`按钮并单击它。这将重新启用该`Ready to Upload Binary`选项。

登录 itunesconnect.apple.com，点击您的应用，点击相关版本的“查看详细信息”，然后您会在右上角看到该按钮。

# python - 如何在其他 .py 模块中打开 Qdialog

> ID：14226863
> 
> 赞同：1
> 
> 时间：2013-01-09T01:17:20.057
> 
> 标签：python, qt, python-2.7, pyqt

我用 Qt 设计器做了一个 GUI 界面，并将 .ui 文件编译成 .py 文件。在主窗口我有这个类：

```
class Projektdlg(QMainWindow, ui_Projekt.Ui_MainWindow):

    def __init__(self, parent=None):
        super(Projektdlg, self).__init__(parent)
        self.setupUi(self)
        self.connect(self.actionCalibration, SIGNAL("triggered()"), self.CalibrationSettings) 
```

从工具栏单击*校准*​​时，我想`QDialog`从生成的*ui_calibration文件中打开。*怎么做？

 *```
def CalibrationSettings(self):

    Dialog = ui_calibration.Ui_DialogCalibration() 
```

所有模块均已导入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:22:22.787

尝试这样的事情：

```
class myDialog(QtGui.QDialog, Ui_DialogCalibration):
    def __init__(self, parent=None):
        super(myDialog, self).__init__(parent)

        self.setupUi(self) 
```

然后在你的课上：

```
Dialog = myDialog(self) 
```

然后你可以打电话`Dialog.show()`或`Dialog.exec_()`*

# javascript - XHR2 在 Collection 中的访问事件

> ID：14226864
> 
> 赞同：0
> 
> 时间：2013-01-09T01:17:24.383
> 
> 标签：javascript, backbone.js, xmlhttprequest

我有一个使用 XMLHttpRequest 将文件成功发送到服务器的集合。但我无法弄清楚如何将函数附加到 XHR2 事件。

*仅当代码直接位于send()*内部时，它似乎才有效：

```
var Photos = Backbone.Collection.extend({
    url: config.url,

    /**
     * Send file to server.
     * @todo Should Backbone.sync be overwritten instead?
     */
    send: function (file) {
        var data = new FormData(),
            xhr = new XMLHttpRequest();

        // ======> Doesn't work:
        xhr.addEventListener('load', this.onLoad(xhr));

        // ======> Doesn't work either:
        xhr.onload = this.onLoad(xhr);

        // ======> But this works:
        xhr.onload = function () {
            var response = $.parseJSON(xhr.responseText);
            console.log(response); // Works!
        };

        data.append('file', file);

        xhr.open('POST', this.url);
        xhr.send(data);
    },

    /**
     * Respond to XHR2 'onload' event.
     */
    onLoad: function (xhr) {
        var response = $.parseJSON(xhr.responseText);
        console.log(response); // Doesn't work!
    }

}); 
```

为什么会这样，如何将代码移出*send()*并放入单独的函数中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:28:03.117

您正在调用函数`this.onLoad(xhr)`而不是传递函数引用。尝试

```
var self = this;
xhr.onload = function () {
    self.onLoad(xhr);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:18:41.670

因此，感谢[Musa](https://stackoverflow.com/a/14226961/835568)和[Jonathan Lonowski](https://stackoverflow.com/a/7940352/835568)，我现在有了以下工作代码：

```
var Photos = Backbone.Collection.extend({
    url: config.url,

    /**
     * Send file to server.
     * @todo Should Backbone.sync be overwritten instead?
     */
    send: function (file) {
        var data = new FormData(),
            xhr = new XMLHttpRequest();

        xhr.addEventListener('load', this.onLoad);

        data.append('file', file);

        xhr.open('POST', this.url);
        xhr.send(data);
    },

    /**
     * Respond to XHR2 'onload' event.
     *
     * No need to pass in the xhr object, since addEventListener
     * automatically sets 'this' to 'xhr'.
     */
    onLoad: function () {
        var response = $.parseJSON(xhr.responseText);
        console.log(response); // Works now!
    }

}); 
```

# c - 批量更新产品

> ID：14226865
> 
> 赞同：0
> 
> 时间：2013-01-09T01:17:39.057
> 
> 标签：c, pointers, binary-tree

我正在做一个订单程序，我有一个产品的二叉搜索树，项目包含产品名称、库存数量、订单数量和价格。当我创建订单时，所选商品中的订单数量会根据订单增加。

我需要创建一个名为 batchUpdate 的函数，该函数遍历树并将每个项目的订单数量减去库存数量，显然再次将订单数量设置为 0。创建新订单时正在更新订单数量，但由于某种原因没有发生任何事情。这里有几个片段：

```
void BatchUpdate(PTree * pt) //PTree is a typedef, the tree
{
    if (PTreeIsEmpty(pt))
        puts("Nothing to update!");
    else
    {
        puts("test"); //just for debug, it is still being displayed
        TraverseP(pt,MinusStock); //Traverses the tree, and applies function 
                                  //MinusStock to each item in the node
    }
}

void MinusStock(Prdct C) //Prdct is a typedef of struct containing details
{
    C.StockQ = C.StockQ - C.OrderQ;
    C.OrderQ = 0;

}

void TraverseP(const PTree * ptree, void (* pfun)(Prdct item))
{
    if (ptree != NULL)
        InOrderP(ptree->root,pfun);
}

static void InOrderP(const PNode * root, void (* pfun)(Prdct item))
{
    if (root != NULL)
    {
        (*pfun)(root->item);
        InOrderP(root->left, pfun);
        InOrderP(root->right, pfun);
    }
} 
```

没有给出错误，它只是忽略遍历，并显示 puts("test")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:19:58.393

```
void MinusStock(Prdct C) //Prdct is a typedef of struct containing details
{
    C.StockQ = C.StockQ - C.OrderQ;
    C.OrderQ = 0;

} 
```

这就是问题所在，您是**按值计算的**，这意味着任何更改都**不会影响树元素**，因为您正在对**在此函数终止后销毁**的数据**副本**进行操作。

 **这可以通过进行以下更改来解决。

```
void MinusStock(Prdct* C){
                     ^ 
```

这意味着您将产品结构**作为指针**，因此对它的任何更改都是**持久的**。

为此，您还需要更改调用`(*pfun)(&root->item);`方式和访问变量的`C->OrderQ = 0;`方式，以及定义函数指针的方式`void (* pfun)(Prdct* item)`。

感谢@MathewHall 正确指出这是一个 C 问题。

总而言之，**遍历正在发生****，**但它并没有改变树，而是在**对每个元素进行操作之前创建每个元素的副本**，使树保持原样。**

# ruby - Set[1,2,3] 的 Ruby 语言特性

> ID：14226867
> 
> 赞同：4
> 
> 时间：2013-01-09T01:17:45.643
> 
> 标签：ruby, initialization, language-features

在 Ruby 中，可以通过 Set[1,2,3] 初始化集合，数组也可以： Array[1,2,3]

是否可以编写一些代码来对我自己的类做同样的事情？或者它只是少数内置类的语言特性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T01:42:10.737

是的，因为`[]`和`[]=`只是方法，它们可以被覆盖。

你可以尝试这样的事情：

```
class MyArray
  attr_accessor :data

  def self.[](*values)
    obj = MyArray.new
    obj.data = values
    return obj
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T01:44:29.033

在 Ruby 中，`foo[bar, baz]`只是`foo.[](bar, baz)`. 您所需要的只是一个名为`[]`.

顺便说一句：您只需要查看文档，例如[`Set`](http://Ruby-Doc.Org/stdlib-2.0/libdoc/set/rdoc/Set.html#method-c-5B-5D)：

> # `[](*ary)`
> 
> 创建一个包含给定对象的新集合。

那就是那里的文档。

基本上，你只需要

```
class Foo
  def self.[](*args, &block)
    new(*args, &block)
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T01:41:41.327

```
class X
  attr_accessor :contents

  def self.[](*x)
    obj = self.new
    obj.contents = x
    obj
  end
end 
```

# audio - 如何保持音视频（GEM）同步？

> ID：14226869
> 
> 赞同：3
> 
> 时间：2013-01-09T01:17:56.580
> 
> 标签：audio, video, audio-video-sync, puredata

这是设置：

我有一个持续时间相同的视频文件和一个音频文件。视频文件通过 播放，`[pix_film]`音频文件通过播放`[readsf~]`，然后两者都被用户交互触发的几种效果扭曲。

如何保持视频和音频同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:05:24.710

如果您希望用户更改播放速度（因此不使用 [readsf~]，而是使用基于 [vline~] 或 [phasor~] 的采样器），那么您还需要调整播放速度视频。[可以在https://github.com/mxa/AudioVideoPatches](https://github.com/mxa/AudioVideoPatches)找到如何执行此操作以及使用 Pd 实例多次播放以避免音频丢失的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:38:28.707

两者都`[pix_film]`将`[readsf~]`在逻辑时间内起作用，因此它们应该开箱即用地同步。

我能想象的唯一问题是，[pix_film] 正在以错误的帧速率播放电影（在这种情况下，视频和音频仍然是同步的，但与您的预期有所不同）。Gem 的播放帧率固定为渲染帧率。

基本上你必须有可能解决这个问题：

*   将 Gem 的帧速率更改为电影的帧速率（如果您想同时播放具有不同帧速率的多个视频，这显然不起作用）
*   更改 [pix_film] 的“寻帧率”以匹配全局帧率。

第二种解决方案可以通过以下方式实现：

```
[t a b]
|      \   
|       \  [r counter]
|        [f]
|        |   [r incr]
|        [+ 0]
|        |
|        [t f b]
|        |     [s counter]
[pix_film]
     |
     [$3(
     |    [r gemrate]
     [/ 20]
     |
     [s incr] 
```

# ruby-on-rails - 使用 thumbs_up gem 显示为帖子投票的用户

> ID：14226874
> 
> 赞同：1
> 
> 时间：2013-01-09T01:18:28.853
> 
> 标签：ruby-on-rails, controller, gem, undefined

我正在使用 thumbsup gem 来允许用户对微帖子进行投票，现在我正在尝试渲染所有为选定微帖子投票的用户。所有投票功能和路由都可以正常工作，但是我现在从我的 Micropost 控制器收到错误消息：

```
undefined method `voted_for?' 
```

微柱控制器：

```
def into_it  #for the view; displays who likes the post
  @micropost = Micropost.find(params[:id])
  @users = User.voted_for?(@micropost)
  render 'show_users_into_it'
end 
```

微博模型：

```
acts_as_voteable 
```

用户型号：

```
acts_as_voter 
```

架构信息：

```
# Table name: users
#  id                       
#  name            
#  email    

# Table name: microposts
#  id         :integer       
#  comment    :text
#  user_id    :integer    

# Table name: votes
#  id            :integer          not null, primary key
#  vote          :boolean          default(FALSE), not null
#  voteable_id   :integer          not null
#  voteable_type :string(255)      not null
#  voter_id      :integer
#  voter_type    :string(255) 
```

我是否必须进行某种 SQL 查询，而不是没有简单的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:24:31.643

您得到一个未定义的方法`voted_for?`，因为您在 User 类而不是用户的实例上调用它。

我认为您正在寻找的方法是[voters_who_voted](https://github.com/bouchard/thumbs_up/blob/master/lib/acts_as_voteable.rb#L105-L107)，它的用法如下：

```
def into_it  #for the view; displays who likes the post
  @micropost = Micropost.find(params[:id])
  @users = @micropost.voters_who_voted
  render 'show_users_into_it'
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T02:00:29.243

这是因为 @users = User.voted_for?(@micropost) 将返回 true 或 false ，而不是实例对象。尝试查看此链接[http://openrails.blogspot.com/2012/01/thumbs-up-in-rails.html](http://openrails.blogspot.com/2012/01/thumbs-up-in-rails.html)

# ios - 应用从 Facebook AppCenter 中移除

> ID：14226877
> 
> 赞同：1
> 
> 时间：2013-01-09T01:18:32.477
> 
> 标签：ios, facebook

您如何使用 SLRequest 来检测 Facebook 用户是否通过从他的 AppCenter 中删除该应用程序来禁止该应用程序？我有我的应用程序设置允许发布到 Facebook，但是当我测试从 AppCenter 中删除它时，它搞砸了我，并且不会授予任何权限，或者将其添加回我在 Facebook 中的 AppCenter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:44:54.433

当您禁止使用 Facebook 时，您可能使用了错误的编码实践。

让我们继续假设您使用：`[FBSession.activeSession closeAndClearTokenInformation];`当您将用户从 Facebook 注销时。

你需要有这样的东西才能让 Facebook 重新链接到你的应用程序。以这种方式重置应确保您永远不会忘记重新启动会话和令牌信息。

```
- (void)createAndPresentLoginView
{
    if (self.loginViewController == nil) {
        self.loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController"
                                                                           bundle:nil];
        self.navController = [[UINavigationController alloc] initWithRootViewController:self.loginViewController];
        self.window.rootViewController = self.navController;
    }
} 
```

希望这会有所帮助。

# linux - shell脚本if语句麻烦

> ID：14226879
> 
> 赞同：2
> 
> 时间：2013-01-09T01:18:52.647
> 
> 标签：linux, bash, shell

我正在尝试为运行 chrunchbang linux 的笔记本电脑设置一个硬件静音按钮，我的关键事件处理工作正常并指向这样的脚本：

```
curvol=$(amixer get Master | grep 'off')
if ["$curvol" != ""]
then
amixer set Master unmute 
else
amixer set Master mute
fi 
```

按下分配的按钮会发生什么，如果静音，它将取消静音；但如果它尚未静音，它不会静音。

我认为问题出在我检查命令输出的 if 语句中；无论 if 是否返回 true，它似乎总是在取消静音。

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:25:47.220

`[`是命令的名称（有时是内置的 shell）。您需要在它后面留一个空间才能使其工作：

```
if [ "$curvol" != "" ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T01:25:32.883

可以使用 grep 的返回值：

```
amixer get Master | grep 'off' &> /dev/null
if [ $? -eq 0 ] 
then
  amixer set Master unmute 
else
  amixer set Master mute
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T03:12:37.847

似乎只写会简单得多：

```
amixer set Master ${curvol:+un}mute 
```

这相当于：

```
if test -n "$curvol"; then
  amixer set Master unmute
else
  amixer set Master mute
fi 
```

但不那么罗嗦。另外，请注意，通过使用`test`而不是`[`，语法错误变得更加难以产生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T18:07:16.793

你可以在 Python 中做到这一点。我添加了一个 BASH 函数来切换静音状态。把它贴在 ~/.bashrc

我目前正在使用笔记本电脑，所以我没有多个声卡。
我没有做任何错误检查。

有关更多示例代码，请参阅 /usr/share/doc/python-alsaaudio/examples/mixertest.py。

```
# toggle Master mute                                            
function tm(){
python -c "                                                     
import alsaaudio                                                

mixerObj = alsaaudio.Mixer()                                    
currentMute = mixerObj.getmute()[0]                             
newMute = not currentMute                                       
mixerObj.setmute(newMute)                                       
"
} 
```

# c# - 以编程方式将一组图像连接在一起以形成背景

> ID：14226883
> 
> 赞同：2
> 
> 时间：2013-01-09T01:19:14.583
> 
> 标签：c#, .net, wpf, image, background

有谁知道创建重复背景的方法，该背景由一组类似于您在 Zune 播放器中看到的图像形成。这些图像将具有不同的大小，因此必须有一种方法可以将它们缝合在一起。

这是我正在寻找的一个例子，除了我的一些图像可能是矩形而不是正方形。![祖尼背景](../Images/5b0407bbe9092683139fdaf5a109c3d3.png)

背景是 WPF 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:31:41.010

因此，假设您有一个图像存储库。这将是它的思考过程。

1) 创建一个包含宽度、高度、路径和您需要捕获的任何其他信息的类

2) 使用第一个类作为基类创建另一个类，并包含绘制位置的 x 和 y 坐标

3）创建一个列表来保存图像

4）创建一个列表来保存绘制的图像

3）创建一个你想要的大小的位图

4）从列表中抓取图像并将其绘制在位图的 0,0 处，然后从列表中删除（步骤 3）并使用 x 和 y 坐标添加到列表（步骤 2）

5) 抓取另一张图片，然后......在这里你想决定你将如何编写你的算法。

一个例子是

检查图像的尺寸并将其放置在第一个图像下方的 0、image_1、height 处，然后继续向下直到到达位图的末尾。现在它只是一个拼图游戏，通过检查它们的尺寸和你需要的尺寸来适应图像......或者从上到下工作

# mysql - 在 MySQL 如何为 WHERE-IN 子句指定排序规则？

> ID：14226895
> 
> 赞同：2
> 
> 时间：2013-01-09T01:20:44.080
> 
> 标签：mysql, sql, collation, mysql-5.5

在 MySQL 中，如果我有这样的标准 WHERE 子句，我可以指定排序规则：

```
SELECT * FROM myTable WHERE email_address = 'foo@bar.com' COLLATE utf8_general_ci; 
```

但是，如果我在 WHERE-IN 子句中有多个电子邮件地址，则以下操作失败

```
SELECT * FROM myTable WHERE email_address IN ('foo@bar.com', 'test@test.com') COLLATE utf8_general_ci; 
```

我缺少什么让这个工作？mysql 5.5。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:23:59.987

如果您在每个字符串之后指定它怎么办：

```
WHERE email_address IN ('foo@bar.com' COLLATE utf8_general_ci, 'test@test.com' COLLATE utf8_general_ci) 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:26:58.977

试试这个

```
SELECT * 
FROM myTable 
WHERE FIND_IN_SET( email_address, 'foo@bar.com,test@test.com' COLLATE utf8_general_ci ); 
```

# haskell - 在haskell中传递变量的Monads

> ID：14226898
> 
> 赞同：3
> 
> 时间：2013-01-09T01:20:59.247
> 
> 标签：haskell

有没有可能通过使用 Monads 在一行中重写它？

```
input <- getLine
let parsed = reads input :: [(Int,String)] 
```

我无法理解如何传递输入，我的尝试会考虑 lambda 表示法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T01:37:39.460

另一个地方`fmap`！用于`fmap`更改其他内容中的一个或多个值 - 在本例中为 inside `getLine`，但它更广泛有用。

```
parsed <- fmap reads getLine :: IO [(Int,String)] 
```

or with `import Data.Functor`or`import Control.Applicative`你可以把它写成

```
parsed <- reads <$> getLine :: IO [(Int,String)] 
```

编译器很可能能够`Int`从其他地方推断出您的意思，在这种情况下，您可以省略显式类型签名。

`fmap`确实是一个非常有用的功能。[您可以在关于 fmap](https://stackoverflow.com/questions/13134825/how-do-functors-work-in-haskell/13137359#13137359)的其他答案中阅读更多内容，我最终在其中编写了一个迷你教程。

实际上，如果您对编写单行代码的简洁方式感兴趣，那么您应该了解更多关于 Applicative Functors 的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T01:23:30.140

当然，您可以使用[`liftM`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3aliftM)（或者[`fmap`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3afmap)，因为[`IO`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#t%3aIO)也有一个[`Functor`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#t%3aFunctor)实例）将它放在一行上，

```
parsed <- (reads :: ReadS Int) `liftM` getLine 
```

但我认为这很少会增加可读性。

# regex - 正则表达式替换数字之间

> ID：14226899
> 
> 赞同：0
> 
> 时间：2013-01-09T01:21:06.750
> 
> 标签：regex

我有以下时间码，我想对其进行替换：

```
00 04 02 01 -- > 00:04:02:01 
```

如何用冒号替换两个数字之间的空格？我想出了`\d\s\d`，但这显然也包括数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:24:55.457

捕获您的数字，然后在替换时使用它们：

```
(\d)\s(?=\d) 
```

用。。。来代替：

```
$1: 
```

* * *

以下示例使用 JavaScript：

```
var str = '00 04 02 01';
str = str.replace(/(\d)\s(?=\d)/g, '$1:'); 
```

这是小提琴：http: [//jsfiddle.net/7arUa/](http://jsfiddle.net/7arUa/)

# opengl - 从 OpenGL/GLUT 应用程序读取像素

> ID：14226905
> 
> 赞同：8
> 
> 时间：2013-01-09T01:22:02.863
> 
> 标签：opengl, pointers, haskell, pixels

我有一个使用 OpenGL 和 GLUT 在屏幕上显示一些东西的应用程序。我想访问“逐像素”显示的颜色，但我无法理解所提供的方法。

访问此类数据的方法似乎是使用函数： `readPixels :: Position -> Size -> PixelData a -> IO ()` 这绝对不是 Haskelly，因为它使用 C 模式获取目标指针并写入该指针。

第三个参数是重要的部分，它的构造类似于`PixelData PixelFormat DataType (Ptr a)`。 `PixelFormat`并且`DataType`都是枚举，前者取值如，`RGBAInteger, RGBA, CMYK, etc`后者取值如`UnsignedByte, Short, Float, etc.` The selection 让我感到困惑，但这不是真正的问题。我真的在努力使用指针。我不知道要创建什么样的`Storable`数据来`malloc`创建指针，或者如果我选择使用`mallocBytes`.

我有一个我正在搞乱的功能，目前看起来像这样：

```
pixels :: IO ()
pixels = do
    pointer <- mallocBytes 50000
    let pdata = PixelData RGBA Int pointer
    let pos = Position 0 0
    let siz = Size 10 10
    readPixels pos siz pdata
    print pdata
    mypixels <- peek pointer
    -- TODO, what kind of data is mypixels?
    free pointer 
```

它运行良好，我只是不知道如何使用从`Ptr`. 也许我没有完全理解文档，但是如何确定指针处的数据类型以及如何在我的程序中使用它？请注意，我选择的论点是任意的`RGBA`，`Int`它们听起来足够无害。`Color 4`我真正想要的是某种格式（或类似性质）的 RGBA 像素值的列表或多维列表。任何帮助将不胜感激，我似乎不知所措。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T13:16:32.847

您正在使用低级绑定，不要对它们是低级的感到惊讶。`readPixels`直接对应[`glReadPixels`](http://www.opengl.org/sdk/docs/man/xhtml/glReadPixels.xml)（他们使用MathML，所以使用[支持它的浏览器](http://caniuse.com/mathml)查看）。

你得到的是一个 32 位整数数组，每个整数都包含 RGBA 颜色值。你只需要`width * height * 4`字节，你过度分配了很多。

FFI 机器使读取它变得非常容易——它提供了`peekArray`可用于将像素数据提取到 Haskell 列表中的方法。您还需要使用正确类型的指针。`mallocBytes`返回对应于 的特殊类型的指针`void*`。我正在使用`ForeignPtr`，以便运行时负责完成它（`mallocBytes`您需要使用`castPtr`并`bracket`考虑异常）。

```
import Data.Word
import Foreign
import Graphics.Rendering.OpenGL

readPixelArray :: Int -> Int -> Int -> Int -> IO [Word32]
readPixelArray x y w h = do
    let arraySize = w * h
    array <- mallocForeignPtrArray arraySize :: IO (ForeignPtr Word32)
    withForeignPtr array $ \ptr -> do
        -- ptr :: Ptr Word32
        -- fromIntegral is needed because Position and Size store GLints not Ints
        let position = Position (fromIntegral x) (fromIntegral y)
        let size = Size (fromIntegral w) (fromIntegral h)
        readPixels position size $ PixelData RGBA UnsignedInt ptr
        peekArray arraySize ptr 
```

现在你有了一个颜色值的一维数组。我们可以将其拆分为如下类型：

```
import Data.Bits

data Pixel = Pixel {
    red :: Word8, green :: Word8, blue :: Word8, alpha :: Word8
} deriving (Eq, Show)

readPixels' :: Int -> Int -> Int -> Int -> IO [Pixel]
readPixels' x y w h = do
    rawPixels <- readPixelArray x y w h
    return $ map pixelFromWord32 rawPixels

-- pixelFromWord32 0xAABBCCDD = Pixel 0xAA 0xBB 0xCC 0xDD
pixelFromWord32 :: Word32 -> Pixel
pixelFromWord32 colour = Pixel (extract 3) (extract 2) (extract 1) (extract 0)
    where extract idx = fromIntegral $ (colour `shiftR` (idx * 8)) .&. 0xFF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T11:49:46.550

这是一个将图像读入[JuicyPixels](http://hackage.haskell.org/package/JuicyPixels)图像的版本，该图像可以轻松保存到 PNG 文件等中：

```
import Codec.Picture (Image, PixelRGB8(..), withImage)
import Control.Lens.Operators
import qualified Foreign as F
import qualified Graphics.Rendering.OpenGL as GL

takeScreenshot :: IO (Image PixelRGB8)
takeScreenshot =
    do
        (pos, size@(GL.Size wGl hGl)) <- GL.get GL.viewport
        let width = fromIntegral wGl
        let height = fromIntegral hGl
        let pixelSize = 3
        -- glY converts top-origin coordinates to OpenGL's bottom-origin system
        let glY y = height - 1 - y
        let pixelOffset x y = ((glY y) * width + x) * pixelSize
        F.allocaBytes (pixelSize * width * height) $
            \ptr ->
            do
                GL.readPixels pos size (GL.PixelData GL.RGB GL.UnsignedByte ptr)
                let readPixel x y =
                        F.plusPtr ptr (pixelOffset x y)
                        & F.peekArray pixelSize
                        <&> (\[r, g, b] -> PixelRGB8 r g b)
                withImage width height readPixel 
```

# android - Webview 可以在不打开新窗口/浏览器的情况下显示链接吗？

> ID：14226909
> 
> 赞同：-1
> 
> 时间：2013-01-09T01:22:40.913
> 
> 标签：android

> **可能重复：**
> [android webview 点击打开默认浏览器](https://stackoverflow.com/questions/2378800/android-webview-click-opens-default-browser)

我有用于引入站点的 Webview，但是当我单击原始链接以外的链接时，它会打开一个浏览器。有没有办法让这些链接在同一个 webview 中重新打开/加载？是否有此 WebView 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:56:52.340

这很容易。

1.首先，你应该编写自己的WebViewClient，例如：

```
class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return super.shouldOverrideUrlLoading(view, url);
        }
    } 
```

2.现在，你可以在你的Activity中使用它，例如：

```
WebView view = (WebView) findViewById(R.id.webView1);
view.setWebViewClient(new MyWebViewClient());
    view.loadUrl("http://www.baidu.com"); 
```

希望能帮到你！

# iphone - xxx.layer insertSublayer:buttonALayer atIndex:1 在 iPad 上不起作用？

> ID：14226910
> 
> 赞同：0
> 
> 时间：2013-01-09T01:22:44.027
> 
> 标签：iphone, ios, xcode, ipad, cocoa

正如标题所述。我有两个 Storyboard，一个用于 iPhone，一个用于 iPad。iPhone 可以，iPad 不行。我可以访问按钮，例如我可以为 iPad 和 iOS 执行 setTitle，但是当我执行 insertSublayer 时，这只适用于 iPhone。

任何建议可能是什么原因？

多谢你们！

编辑：

```
UIColor *color1 = [UIColor colorWithRed:(228/255.0) green:(91/255.0) blue:(0/255.0) alpha:(1.0)];
UIColor *color2 = [UIColor colorWithRed:(152/255.0) green:(61/255.0) blue:(0/255.0) alpha:(1.0)];
NSNumber *stopOne = [NSNumber numberWithFloat:0.0];
NSNumber *stopTwo = [NSNumber numberWithFloat:1.0];
NSArray *locations = [NSArray arrayWithObjects:stopOne, stopTwo, nil];
CAGradientLayer *buttonALayer = [CAGradientLayer layer];
buttonALayer.frame = startGame.layer.bounds;

float iOSversion = [[UIDevice currentDevice].systemVersion floatValue];
int layerIndex = 1;
if (iOSversion < 5.9)
{
    layerIndex = 0;
}

float cornerRadius = 0.0f;

buttonALayer.colors = colorsA;
buttonALayer.locations = locations;
buttonALayer.cornerRadius = cornerRadius;
[startGame.layer insertSublayer:buttonALayer atIndex:layerIndex]; 
```

<- 此代码适用于 iPhone，但不适用于 iPad。以下代码适用于两种设备（模拟器！）：

```
[startGame setTitle:@"Bullwaste" forState: UIControlStateNormal]; 
```

<- 因为它也适用于 iPad，对我来说，奥特莱斯和参考资料似乎不是原因？

编辑2：

我尝试执行以下操作：

```
startGame.alpha = 0.3;
NSString *justAString = [NSString stringWithFormat: @"%f", startGame.bounds.size.width];
[startGame setTitle:justAString forState: UIControlStateNormal]; 
```

iPhone Sim 中的反应：按钮变为透明，标题为 280.0000 iPad Sim 中的反应：按钮变为透明，标题为 0.00000

我只是不明白这个？startGame.alpha 确实有效 startGame.bounds.size.width 仅适用于 iPhone！？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:45:14.500

大声笑，我无法相信解决方案，但是：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self viewDidLoad];
} 
```

我在 viewDidLoad 中有我的代码，但视图没有完全加载 - 不适用于 iPad。

您如何看待上述解决方案，或者我应该将所有代码都放入 viewDidAppear 中？但是我不认为两次调用 viewDidLoad 是一个问题，我可以相信如果我在“更快”系统上更改按钮颜色，一些用户会看到闪烁或类似的东西！？

# c++ - 朋友类可以在 C++ 中调用私有构造函数吗？（什么是单例）

> ID：14226911
> 
> 赞同：1
> 
> 时间：2013-01-09T01:22:58.407
> 
> 标签：c++, private-constructor, friend-class

考虑 A 类和 B 类。A 类与 B 类友好。B 类有一个私有构造函数。A类可以创建B类实例，还是私有构造函数向编译器指示该类*不能*被实例化，即使是朋友类？
这是一些示例代码：

```
class B;

class A {
    void myFunction() {
        B newBobject;
    }
};

class B {
    private:
        B() {}
    public:
        int someData;
        friend class A;
}; 
```

另外，请注意我使用的是 C++03。如果它在 C++03 中无效，在 C++11 中是否允许？

作为一个附带问题，Singleton 方法是如何相关的？它是否专门处理实例化一个对象的一个​​且仅一个实例，还是其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:26:40.237

您的代码（更像您的想法）实际上在[C++03](http://liveworkspace.org/code/4em8S3%244)和[c++11](http://liveworkspace.org/code/4em8S3%243)上均无错误且有效。

但是，您的代码中有 2 个错误。要创建 B 类型的对象，您需要查看 B 的完整定义，这意味着 B 和 A 的定义需要交换。

其次，您需要`myfunction`公开，或从 A 类中调用它。

回答你的其他问题..大多数单例都是这样实现的..

```
class Singleton{
private:

   Singleton(){}
public:
   static Singleton& GetInstance(){
       static Singleton instance;
       return instance;
   }
}; 
```

这将阻止除 Singleton 类（以及您发现的朋友）之外的任何人创建该类的实例，因此更容易执行 1 对象规则。Singleton 将作为`Singleton::GetInstance()`.

这个和其他可能的实现显示在[Wikipedia](http://en.wikipedia.org/wiki/Singleton_pattern#Example)上。

# pivot - 枢轴中bxml中的汉字支持？

> ID：14226912
> 
> 赞同：0
> 
> 时间：2013-01-09T01:23:02.457
> 
> 标签：pivot

我想让pivot的bxml文件支持汉字，但是在应用程序运行的时候，没有显示汉字。bxml 中的编码是 utf-8。

这是我的例子：

FormTest.java：

```
public class FormTest extends Application.Adapter {
private Frame frame = null;

@Override
public void startup(Display display, Map<String, String> properties)
    throws Exception {
    BXMLSerializer bxmlSerializer = new BXMLSerializer();
    frame = new Frame((Component)bxmlSerializer.readObject(getClass()
    .getResource("form_test.bxml")));
    frame.setTitle("Form Test");
    frame.setPreferredSize(480, 360);
    frame.open(display);
}

@Override
public boolean shutdown(boolean optional) {
    if (frame != null) {
        frame.close();
    }

    return false;
}

public static void main(String[] args) {
    DesktopApplicationContext.main(FormTest.class, args);
}
}                      

form_test.bxml: 
<?xml version="1.0" encoding="UTF-8"?>
<Form styles="{fill:true, padding:0, leftAlignLabels:true}"
xmlns:bxml="http://pivot.apache.org/bxml"
xmlns:effects="org.apache.pivot.wtk.effects"
xmlns="org.apache.pivot.wtk">
<Form.Section heading="Test Section 1">
    <TextArea Form.label="Text Area" styles="{margin:0}"
        text="小人国的大王">
        <decorators>
            <effects:BaselineDecorator/>
        </decorators>
    </TextArea>
</Form.Section>
<Form.Section heading="Test Section 3">
    <Label Form.label="ABCD" text="小人国的巨人"
        styles="{wrapText:true}"/>
</Form.Section>
</Form> 
```

# database - grails的数据库中存在用户名的逻辑

> ID：14226914
> 
> 赞同：0
> 
> 时间：2013-01-09T01:23:12.290
> 
> 标签：database, grails

我在思考逻辑时遇到了一些麻烦，我不知道如何解决这个问题。基本上我要做的是无法使用相同的用户名在其中添加额外的用户。这就是它的完成方式。

```
String select = "select username from user"
def sot = sql.rows(select)

sot.find() {
   def count = it["username"]
   if (params.username != count) {
      String queryname = "insert into user (username, class) values('" + params.username + "','" + params.class1 + "')"
      println(queryname)
      def Query1 = sql.executeInsert(queryname)
      [ Query1: Query1]
      flash.message = "Successfully added user " + params.username
      return true
   }
   else {
      flash.message = "Username exist"
      return true
   }
} 
```

因此，当添加用户时，会发生循环 while stop，与检查相同。但是，如果我将 return false 设置为 else 条件。用户将被重复添加几次，直到循环停止检查。那么有没有人可以解决这个问题？非常感谢你们。

PS这只是一个测试，我稍后会实施SQL注入预防

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:41:31.267

老实说，这是最坏情况数据库编程的教科书案例。`where`当您可以简单地在 SQL 中使用子句时，您将遍历数据库中的每个用户名以查找其中一个。当有 10 个用户时这很好，但是当你有一百万个用户时要考虑性能。

试试这个（作为额外的奖励，我已经修复了你的 SQL 注入）：

```
def row = sql.firstRow(
   'select count(*) from user where username=?',
   [params.username])

if (row[0]) {
   flash.message = "Username exist"
   return true
}

sql.executeUpdate(
   'insert into user (username, class) values(?, ?)',
   [params.username, params.class1])

flash.message = "Successfully added user " + params.username
return true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:13:18.957

如果您有一个用户域对象，那么您可以避免一起使用 SQL，而是使用[动态查找器](http://grails.org/doc/2.1.0/guide/single.html#finders)。

```
if(User.findByUsername(params.username)){
    flash.message = "username exist"
}
else{
    new User(username:params.username).save()
} 
```

# intellij-idea - 配置“Idea”以将 src/main/java 显示为一个文件夹

> ID：14226915
> 
> 赞同：29
> 
> 时间：2013-01-09T01:23:15.403
> 
> 标签：intellij-idea

刚开始迁移到 Intellij Idea 并坚持一些 UI 设置：是否可以配置“Idea”以将 src/main/java 显示为一个文件夹，就像在 eclipse 中一样？只需点击 3 次即可访问您的来源，这真的很烦人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-03T09:01:59.423

您可以配置 'Project Structure -> Modules' 并在 'src/main/' 下的模块集文件夹 'java' 中由 IDE 标识为源文件夹。比 Idea 会将“src/main”折叠为项目导航器中的一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:51:11.740

不确定 Eclipse 中发生了什么，但如果在`src`or下没有其他文件夹`main`，则可以使用该`Compact Empty Middle Packages`选项。

![在此处输入图像描述](../Images/49733ee0c580f3705ee96f780cd84f1a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T05:01:32.447

到目前为止，我发现的最接近的事情是创建一个新范围。

文件 -> 设置 -> 范围

将其称为“Eclipse View”并将 Pattern 设置为

!file: *.iml&&!file:.idea//* &&!file:.settings//*&&!file:.classpath&&!file:.project

然后在 Project 工具窗口中选择新的“Eclipse View”范围。这不是一个完美的匹配，但它非常接近。

# java - Android AudioRecord Overrun 用户：录制的音频文件大小只有 44 字节

> ID：14226920
> 
> 赞同：0
> 
> 时间：2013-01-09T01:23:44.480
> 
> 标签：java, android, audio

我正在使用此处找到的 extAudioRecorder 类（AudioRecord 的包装器）来录制 .wav 文件：http: [//i-liger.com/article/android-wav-audio-recording](http://i-liger.com/article/android-wav-audio-recording)

我发现当我录制时，由于某种原因，我的文件大小只有 44 个字节，并且我在日志中看到了这条消息：

`Overrun user: 14ac, server: 3e04, flowControlFlag 1`

这对我来说很神秘。我不知道为什么它不能正确录制音频。

有任何想法吗？谢谢。

# c# - 线程、复制、错误、SetTextCallback

> ID：14226921
> 
> 赞同：5
> 
> 时间：2013-01-09T01:23:47.303
> 
> 标签：c#, winforms, multithreading

为了尝试在精神上掌握线程，我尝试了 monkey-see-monkey-do，并从MSDN 上的[THIS_PAGE](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28EHINVALIDOPERATION.WINFORMS.ILLEGALCROSSTHREADCALL%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)复制（如读取和键入，而不是剪切和粘贴） 。

当我这样做时，我收到以下错误

> 错误 2 找不到类型或命名空间名称“SetTextCallback”（是否缺少 using 指令或程序集引用？） Form1.cs 385 17 ZYX987
> 
> 错误 3 找不到类型或命名空间名称“SetTextCallback”（是否缺少 using 指令或程序集引用？） Form1.cs 385 41 ZYX987

我在网页上向下滚动，发现很多社区评论表明每个人都有完全相同的问题，因为该示例具有误导性。即，`SetTextCallback`从未声明过。

这是我在盯着 MSDN 页面时输入的山寨版...

```
private void SetText(string text)
{
    // InvokeRequired required compares the thread ID of
    // the calling thread to the thread ID of the 
    // creating thread.  If these threads are different, 
    // it returns true
    if (this.label1.InvokeRequired)                    
    {
        SetTextCallback d = new SetTextCallback(SetText);
        this.Invoke(d, new object[] { text });
    }
    else
    {
        this.label1.Text = text;
    }
} 
```

请有人在这里建议我应该`SetTextCallback`在我的 CopyCatCode 中放置的位置吗？

第二个问题：声明它的语法是什么样的？

第三个问题：如果`SetTextCallback`是一种方法，那么它应该是什么？

我在 Stack Overflow 上搜索了“...SetTextCallback ...”（无引号）并找到了一些参考资料，但不是这个确切的问题。希望这是属于这里的问题。谢谢阅读。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T01:30:14.430

在链接到的 msdn 页面中向下滚动（“[如何：对 Windows 窗体控件进行线程安全调用](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28EHINVALIDOPERATION.WINFORMS.ILLEGALCROSSTHREADCALL%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)”），完整的源代码列在底部。你会在那里找到定义：

```
 // This delegate enables asynchronous calls for setting
    // the text property on a TextBox control.
    delegate void SetTextCallback(string text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T01:30:05.927

SetTextCallback 将只是一个与它委托的方法具有相同签名的委托。

喜欢：

```
public delegate void SetTextCallback(string message); 
```

您也可以从[本教程中受益](http://msdn.microsoft.com/en-us/library/aa288459%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T01:31:55.173

查看完整示例：

```
// This delegate enables asynchronous calls for setting
// the text property on a TextBox control.
delegate void SetTextCallback(string text); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-26T05:47:00.413

我有同样的问题，这是我的解决方案

我正在读取带有 datareceived 的串行端口，只需将收到的文本放入文本框中，我就这样做了：

```
public void puerto_serie_DataReceived(object sender,
                                   System.IO.Ports.SerialDataReceivedEventArgs e)
{
  string a = this.puerto_serie.ReadLine().Trim();
  leer(a);
}
delegate void SetTextCallback(string text);
void leer(String b)
{
  if (valores.InvokeRequired)
  {
    SetTextCallback d = new SetTextCallback(leer);
    this.Invoke(d, new object[] { b });
  }
  else
  {
    valores.Text += this.puerto_serie.ReadLine().Trim()+"\n";
  }
} 
```

# perl - 为什么 Perl 中的“0”为假？

> ID：14226932
> 
> 赞同：8
> 
> 时间：2013-01-09T01:25:05.863
> 
> 标签：perl

首先，我来自 C、Java、Python 背景。`'0'`最近，我开始为我的新工作学习 Perl，我对(0-string) 是否为假感到好奇。

我已经读到这种特殊行为是 Perl 必须使用`<>`操作符来读取文件的原因，所以对我来说，这更像是一个设计缺陷，而不是现在的任何事情。但是，我也知道 Perl 是一种成熟的语言，我猜这种行为有它的用途，否则它早就被修复了。

那么在什么情况下`'0'`= false 会有用呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T01:48:41.240

如果您读到它与 有任何关系`<>`，那么您正在阅读不良来源；我无法想象这种说法会从何而来。

'0' 是假的，因为几乎所有地方 perl 都不区分以数字形式存储的数字和以字符串形式存储的数字；在布尔测试中这样做会违背这个原则。

在 '0' 为真的语言（Python、Javascript？）中，我发现 '' 为假很奇怪；为什么要为一个字符串而不是另一个字符串例外？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-09T01:49:16.090

Perl 没有显式类型，它对类型的解释高度依赖于上下文。例如：

```
$a = "2b";
$b = "3a";
$c = $a + $b;
print $c; 
```

产量 5。

另一方面...

```
$a = "b2";
$b = "3a";
$c = $a + $b;
print $c; 
```

产量 3。

和...

```
$a = "b2";
$b = "3a";
$c = $a.$b;
print $c; 
```

产量 b23a

所以“'0'（字符串）”不是字符串、数字或布尔值，直到你使用它，然后它可以是任何这些东西，由它的用途决定。直到您尝试操作才确定类型。然后 Perl 评估上下文以努力实现您的意图并采取相应的行动。这是一个特性，以及为什么在 Perl 中有很多方法可以做事。它当然会导致大量令人困惑的代码，但非常适合 1-liners、混淆和 Perl 高尔夫。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T01:48:05.360

Perl~~窃取~~了许多其他语言的特性，包括 C、awk、Bourne shell 和许多其他语言。

在 C 中，任何 0 值都是假的，任何非零值都是真。Perl 只是使用相同的语义。

Perl 比 C 有更多可以在标量或布尔上下文中使用的东西，尤其是字符串，这一事实意味着 Perl 有*多个*假值。

使整数为`0`假对 C 程序员来说非常有意义。将空字符串`""`设为 false 也很有意义。由于 Perl 可以将相同的标量视为数字或字符串，因此使字符串`"0"`为假几乎是不可避免的。

例如：

```
$x = 2;
$x -= 2;
print "x = $x\n"; # prints "x = 0"
if ($x) {
    print "A C programmer would be surprised to see this\n";
}

$x = "";
$x .= chr(48);
# Now $x eq "0", a string value that was built without reference to
# the number zero -- but it's nearly the same thing as the number 0.
print "\$x = $x\n"; # pritn "x = 0"
if ($x) {
    print "A C programmer would be equally surprised to see this\n";
} 
```

如果 Perl 是从零开始设计的，没有从其他语言中借用这么多特性，那么它*可能会*在字符串和数字之间做出更强烈的区分，而不是将它们作为标量组合在一起。给定这样一种假设的类 Perl 语言，空字符串和数字很可能`0`为假，但字符串`"0"`为真——您需要显式转换才能将数字转换为`0`字符串`"0"`。

但是 Perl 就是这样。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-09T01:56:53.120

理想情况下，内部存储格式在 Perl 中并不重要。零就是零，不管是存储在IV、UV、NV、PV等中。

事实上，因为它可以，Perl 将改变存储值的格式，这可能会让您感到惊讶。如果字符串`0`为真，以下将打印“真”：

```
$x = 0;
print("$x\n");
if ($x) {
   print("true\n");
} else {
   print("false\n");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T01:51:51.707

Perl 有许多被认为是“假”的值：`undef`、零、字符串`"0"`、空字符串、一个特殊的布尔值，它根据上下文变形为空字符串或空列表，以及为布尔上下文重载的对象。

其中大部分（undef、零、空字符串、特殊值、对象）实际上非常有用。字符串`"0"`为假源于 perl 实现标量和假的方式：标量包含字符串部分和数字部分。为了确定，如果一个值是假的，*首先*查询字符串部分。为什么这是必要的？

```
my $false_ish = 0;  # the scalar contains only a number
'' . $false_ish;    # force stringy context. the scalar now contains stringy portion.
if ($false_ish) { ... } # string portion is consulted first... 
```

没有这个，一旦你在需要字符串的地方使用数字零，它就会失去它的虚假性。另一方面，这允许`"0 but true"`，一个真正的字符串，它是数字零，并且`"0E0"`，它是零的科学记数法，但也计算为真。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T16:06:03.487

0 在 C 中也等同于 false - 它在几种“传统”编程语言中等同于 false，这可能是由于 0 与二进制和电路的内在联系，其中 0 可能表示“不收费”。

无论如何，较新的语言通常会继承以前语言的行为和解释。0 是“不收费”或“有收费是假的”的二进制含义早已从任何高级编程语言中抽象出来，但即使通过最现代的编程语言，语义的花絮仍然存在。

另外 - 据我所知，它与 <> 无关 - 你在哪里读到的？

# regex - 需要帮助来理解 sed 中的这个正则表达式

> ID：14226933
> 
> 赞同：4
> 
> 时间：2013-01-09T01:25:17.573
> 
> 标签：regex, linux, sed

我发布了[这个问题](https://stackoverflow.com/questions/14210497/insert-code-at-the-start-and-end-of-the-outer-nested-code-block-only)，有人回答了这个

`sed '/^void.*{$/!b;:a;/\n}$/bb;$!{N;ba};:b;s/\n/&test1&/;s/\(.*\n\)\(.*\n\)/\1test2\n\2/' file`

我是 sed 和 regex 的新手，无法理解每个部分的功能。

我将尝试解释我所理解的内容，你们可以填补缺失的东西。我会一个字一个字地去

1.  `^void.*{$`-- 这意味着任何`void`以`{`
2.  `/!b;`我不明白这是做什么的。现在`b`是为`branching`。那里在`/`做什么
3.  `:a;`用于制作标签`a`
4.  `/\n`再次不明白`/`那里
5.  `}$`以`}`
6.  `/bb`我不明白
7.  `$!`表示如果不是文件结尾
8.  `{N;`没明白是什么意思，N 表示复制缓冲区中的下一行但确实得到了`{`
9.  `:b`没明白。b 用于分支，但不知道它在那里做什么 10.`s/\n/&test1&/`我认为它用 \n 替换`\ntest1\n`但不确定
10.  `s/\(.*\n\)\(.*\n\)/\1test2\n\2/`也不要得到这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:03:18.610

您可以将多个 sed 表达式与`;`字符链接在一起。这里分别看一下每一个。

第一个表达式 ，在分隔符's`/^void.*{$/!b`之间有一个匹配器表达式。`/`它匹配：

`^`- 行的开头

`void`- 后跟字符“void”

`.*`- 紧随其后

`{`- 后跟左卷曲

`$`- 紧随其后的是行尾

第一个表达式中的修饰符 ,`!b`表示如果匹配器不匹配，则中止 sed 评估。

`:a`表达式是一个标签。它与称为分支的类似 goto 的 sed 功能一起使用。我们将在下一个表达式中看到标签是如何使用的。

表达式`/\n}$/bb`匹配：

`\n`- 换行符

`}`- 紧随其后的是右卷曲

`$`- 紧随其后的是行尾

修饰符`bb`意味着如果找到匹配项，则“分支”到标签 b。标签 b 在后面的表达式中定义为`:b`。

`$!{N;ba}`表达式应该读为一个，即使它的中间有一个`;`。在这种情况下，卷曲代表一系列要一起执行的命令。

`$!`- 如果不是输入结束

`{`- 启动命令组（在这种情况下，有两个）

`N`- 默读另一行

`ba`- 分支以标记 a

`}`- 结束命令组

接下来是 label ，当我们通过表达式`:b`单独匹配一行上的单个时，我们将点击它。`}``/\n}$/bb`

最后有两种替代模式，它们是非常标准的正则表达式。表达式之前的`s`本质意思是`s/find_this/replace_it_with_this/`。在 的情况下`s/\n/&test1&/`，我们有：

`\n`- 找到换行符

`/`- 并将其替换为

`&`- 在第一个表达式中匹配的内容（在本例中为换行符）

`test1`- 单词 test1

`&`- 再次匹配的东西

所以基本上意味着用`s/\n/&test1&/`替换下一个。`\n``\ntest1\n`

最后一个表达式类似，但引入了一个叫做捕获的东西。捕获让您仍然可以匹配所有内容，但保留所有内容以供在表达式的替换部分使用`\(`。`\)`例如`s/a\(b\)c\(d\)e/\1 \2/`，`b d`如果给定输入字符串`abcde`. 在示例中，`\1`和`\2`分别替换为转义括号中捕获的内容，`b`和`d`。

`s`- 这是一个替换模式：

`/`- 寻找

`\(`- 并放入`\1`替换变量

`.`- 任何事物

`*`- 以及任何数量

`\n`- 包括您遇到的第一个换行符

`\)`- （捕获结束`\1`）

`\(`- 并放入`\2`替换变量

`.`- 任何事物

`*`- 以及任何数量

`\n`- 包括您遇到的第一个换行符

`\)`- （捕获结束`\2`）

`/`- 并将其全部替换为

`\1`- 捕获的第一件事，

`test2\n`- 测试2\n,

`\2`- 第二件事被抓住了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:13:24.003

这个词：

```
/^void.*{$/!b 
```

表示匹配`^void.*{$`，斜杠是正则表达式周围的正则表达式分隔符。所以你得到`/^void.*{$/`. 如果感叹号跟在匹配表达式后面，`/regex/!`那么这意味着如果正则表达式匹配，则执行以下命令`not`。以下命令是`b`哪个分支。其中，没有标签名称，在脚本末尾分支。所以总的来说，这个表达式尝试匹配`^void.*{$`（即，以 void 开头并以 结尾的行`{`）并跳过（`b`）脚本的其余部分以防匹配失败（`!`）。

这东西：

```
:a;/\n}$/bb;$!{N;ba}; 
```

开始一个标签`:a;`并尝试匹配`\n}$`（换行符和`}`一行上的一个），它再次包含在`/regex/`. 在匹配时，它会分支 ( `b`) 到标签 b （因此，`/regex/bb`）。如果这不是输入 ( `$!`) 的结尾，则读取一行`N`并跳回标签 a ( `ba`)。此处的卷曲对（即`{commands}`）创建了一个块。如果为真，则此块将作为一个整体执行`$!`，这意味着有更多输入。所以`$!{N;ba}`简单的意思是：

```
If not end of input:
begin
   real line
   jump to label a
end 
```

# distributed-computing - 在发布者上线后播种订阅者数据

> ID：14226934
> 
> 赞同：3
> 
> 时间：2013-01-09T01:25:31.757
> 
> 标签：distributed-computing, messaging, nservicebus, event-sourcing

假设我们有两个业务组件

1.  **用户管理**

这拥有用户。当用户信息发生变化时，该组件会发布消息。例如“NewUserCreated”

1.  **出版物**

处理与用户的通信。电子邮件、推文等。因此，该组件订阅了用户消息，并将该信息的子集存储在其自己的存储中。

### 问题

如果用户管理组件在发布组件之前上线会发生什么？Publications 如何获取现有用户的列表？它不应该知道用户管理组件如何存储其数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:34:05.440

我不确定用户管理和发布是 BC，而是不同的服务或 AC，因为它们提供不同的业务功能，而不是实体的两个子集。

在发布服务中存储用户实体的子集可能是一种服务气味。两个服务之间不应该有任何数据重复，除了关联 ID (userId)。

发布服务不需要所有用户的列表：

如果您谈论的是较短的服务器停机时间，例如维护或版本更新，则从 UserManagement 服务发送的消息将在传出队列（或配置超时后的错误队列）中可用，并且可以重新发送到 Publications 服务。以前的数据应该在 Publications 数据存储中。

让我们考虑另一种情况 - 假设您的系统已经运行了一年，并且您一直在收集用户信息，但没有发布服务中的功能。现在，在您拥有数百万用户之后，您可以添加新的发布服务。

最初，那里不会有数据。当系统的当前用户登录时 - 他可能会看到一个新页面，他应该在其中填写他的发布详细信息（电子邮件、推特、脸书帐户等），这将导致发布服务数据中的新条目（带有相关的用户身份）。新用户将在登录时将数据添加到发布服务数据存储（如果您要求他们这样做）。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:57:52.260

与任何集成项目一样，我只会选择 ETL 程序，以便在新系统启动之前获取所需的相关数据。

这是一次性的事情，所以没有必要使事情复杂化:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:46:16.200

正如 moranlf 所说，用户管理和发布似乎是两种不同的服务。两者之间不应有数据重复。

出版物就像著名的亚马逊类比中的运输服务：它保存有关用户实体（地址）的数据，但只有它自己的/它负责的那个（来自 userId 的 appart，这对它们两者都是通用的）。从用户管理服务发布的任何事件都不会将数据“创建”到订阅服务中。它可能会启动一个策略/传奇，触发一个处理程序，但仅此而已。

这里有两种情况：

*   您已经将订阅存储在数据存储中，并且您正在尝试将职责拆分为两个独立的服务。由于 Publications 服务只保存自己的数据，因此它只是将数据从一个表/持久性存储移动到另一个。无需重播或生成事件。
*   您没有订阅：在这种情况下无事可做，因为它会在用户采取行动时存储其数据。

这有帮助吗？

# php - CakePHP 或 CodeIgniter 用于文件共享 webapp？

> ID：14226938
> 
> 赞同：0
> 
> 时间：2013-01-09T01:25:48.653
> 
> 标签：php, codeigniter, web-applications, amazon-s3, cakephp-2.2

我正在构建一个旨在为用户提供文件共享功能的 Web 应用程序，这是一个安全的应用程序，因为该服务是付费的，并且将使用**Stripe Payment API**

但是我无法决定哪个 php 框架最适合这项任务。我很清楚这两者都可以做到，但我希望框架在服务器上轻量级，而不是像 RAM 和 CPU 这样的服务器资源，因为我现在受到限制，但如果应用程序增长得比资源高会增加。

我查看了 Code Igniter 和 CakePHP。在我看来，CakePHP 似乎比 CodeIngiter 轻得多，但我从来没有使用过任何一个，所以我无法判断。我需要框架做的就是

*   提供针对 XSS、注入的最高安全性

*   能够使用文件系统和amazon s3

*   与 amazon s3 一起玩，并提供简单的上传方法到 s3

*   提供简单的模板方案

*   提供最快的数据库和一般响应时间

*   使用 Stripe 支付 API

*   高效地使用 PHP 5.3.x 和 MySQL 5.3.x

确实如此，如果您可以提供一些专业反馈，说明哪一个会做得最好，或者在 s3 中处理文件共享和处理文件的任务做得很好，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:49:48.163

如果你想要一些小的东西，可以选择 Yii，如果它仍然很小，或者任何其他微框架。问题是它是否为您提供了及时完成它所需的一切并且是可靠的。

Cake 在过去几年中只有两个安全问题 AFAIR，最近的一个（1 年前）[刚刚遇到 ruby​​ on rails](https://groups.google.com/forum/#!topic/rubyonrails-security/61bkgvnSGTQ/discussion)。它是可靠的，并且有数以千计的核心单元测试。

什么是适合您的模板方案？树枝之类的东西？几乎所有模板引擎都有插件。但是模板引擎是一种资源浪费。去普通的 php/html 视图。我知道一些模板引擎支持缓存以提高性能，但这毫无意义，因为 cake 已经提供了缓存技术和整页缓存。所以你可以缓存任何输出。如果您想查看 OOP 视图，请查看 Cake 的[Ctk 插件](https://github.com/jameswatts/cake-toolkit)。

我编写[了一个插件，用于](https://github.com/burzum/FileStorage)在任何类型的存储系统中存储文件。它支持的存储引擎比您列出的少数几个还要多。它正是为您要求的任务而编写的。我先在本地存储文件，然后再将它们移动到 S3。

我不知道是否有任何免费可用的条带 API 插件，我认为你必须自己编写一些代码...... ;) 如果你喜欢蛋糕，你可以[使用这个插件](https://github.com/burzum/Payments)作为基础，并且也许您想让它开源，在这种情况下，我会帮助您。但我确信任何 php 框架都可以使用这个 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:29:55.003

CodeIgniter 并没有太多新的改进。要利用新的 PHP 5.3，我建议您改用 CakePHP。他们正在积极开发将完全支持 5.3 的版本 3。

以下帖子可能会帮助您做出正确的决定。 [http://philsturgeon.co.uk/blog/2012/05/laravel-is-awesome](http://philsturgeon.co.uk/blog/2012/05/laravel-is-awesome)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:45:08.613

我建议使用codeigniter。我已经大量使用了两者，而且我对 Cake 确实有很多问题。蛋糕不是两者中较轻的，我发现蛋糕希望你以蛋糕的方式做事，否则你会很痛苦。这不是一个框架应该如何工作的。另一方面，Codeigniter 是一个支持您的框架，但允许您根据需要全天编写通畅的 php。Cake 非常擅长挡道，而且学习曲线要​​陡峭得多。Codeigniter 会让你做所有你需要的事情，例如，我知道有一些方便的功能，比如`$this->security->xss_clean($your_data);`返回清除 xss 问题的数据。所以它对这样的东西的支持非常方便。模板在 codeigniter 中的健壮性较差，但我喜欢 codeigniter 的原因是它不会妨碍您并让您编写 PHP 代码。这很好，因为你知道如何用 PHP 编码，而当你用 Cake 编码时，你正在编写奇怪的蛋糕代码。如果有更多的人加入团队，这会产生令人讨厌的副作用，使代码难以管理，并且不可能向不了解蛋糕的人寻求蛋糕方面的帮助。蛋糕也不保证向后兼容性，您的安装永远是您的，如果您使用 1.6 版，那么您可能无法在不认真重写的情况下迁移到 2.0（这似乎是他们的短视。）

不过，Cake 将为您提供更多功能，因此，如果您赶时间，它将帮助您完成大部分设置，前提是您始终保持冷静地按照自己的方式行事。如果你不是最擅长数据库的东西，蛋糕就会完全抽象出来。我个人讨厌这样，因为我对 db 微调很认真，而且我想做很多事情来更好地利用 db 蛋糕，只是完全禁止。Codeigniter 的自由，为什么我会选择它。它的文档是很棒的两个。哦，是的，文档。Codeignite 的文档比 cake 好得多，所以这也是选择它的好理由。

# javascript - 检查某个键的部分json值是否与给定输入相同（javascript）

> ID：14226947
> 
> 赞同：0
> 
> 时间：2013-01-09T01:26:42.103
> 
> 标签：javascript, json, key

我有一个非常大的 Json 文件（数据集大于 30 000）。我需要检查某个键的一部分值是否与给定的字符串相同，然后增加一个 int。

这是 Json 的一部分：

```
[
    {
        "geo": null,
        "coordinates": null,
        "in_reply_to_status_id_str": null,
        "contributors": null,
        "in_reply_to_user_id": null,
        "in_reply_to_status_id": null,
        "truncated": false,
        "created_at": "Tue Nov 13 20:17:17 +0000 2012" 
```

我想检查键“created_at”是否有某一天（值）。例如 'Tue' 然后递增：`var tuesday = 0;`

我唯一能想到的就是这个功能：

```
function getValues(obj, key) {
    var objects = [];
    for (var i in obj) {
        if (!obj.hasOwnProperty(i)) continue;
        if (typeof obj[i] == 'object') {
            objects = objects.concat(getValues(obj[i], key));
        } else if (i == key) {
            objects.push(obj[i]);
        }
    }
    return objects;
} 
```

但它只检查键并将值放入数组中。那不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:37:21.890

从您的问题中无法立即清楚数据的结构是什么，但它看起来是一个对象数组，其中 created_at 属性将填充一个日期。如果您需要它是递归的（您提供的代码建议），则需要修改以下代码。但是脱离描述：

> 我想检查键“created_at”是否有某一天（值）。例如'Tue'然后递增：var tuesday = 0;

然后以下将采用数组作为并生成包含一个对象`data`的变量，该对象具有天的映射以及属性以每周 7 天字符串中的每一个开头的项目数。`value``created_at`

```
var valMap = {
  Sun: 'sunday',
  Mon: 'monday',
  Tue: 'tuesday',
  Wed: 'wednesday',
  Thu: 'thursday',
  Fri: 'friday',
  Sat: 'saturday'
}

var value = data.reduce(function(m, i, x){
  for (d in valMap){
    if (i.created_at.indexOf(d) === 0){
      m[valMap[d]]++;
      return m;
    }
  }
  return m;
}, {
  sunday: 0,
  monday: 0,
  tuesday: 0,
  wednesday: 0,
  thursday: 0,
  friday: 0,
  saturday: 0
}); 
```

结果类似于：

```
{
  sunday: 0,
  monday: 1,
  tuesday: 3,
  wednesday: 0,
  thursday: 1,
  friday: 0,
  saturday: 6
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:36:27.833

如果您想查看对象的字段名称中是否存在键，请使用 indexOf

```
 function getValues(obj, key) {
        var objects = [];
        for (var i in obj) {
            if (!obj.hasOwnProperty(i)) continue;
            if (typeof obj[i] == 'object') {
                objects = objects.concat(getValues(obj[i], key));
            } else if (s.indexOf(key) !== -1) {
                objects.push(obj[i]);
            }
        }
        return objects;
    } 
```

# c++ - 使用标准算法将容器分区/批处理/分块成相等大小的块

> ID：14226952
> 
> 赞同：8
> 
> 时间：2013-01-09T01:27:01.853
> 
> 标签：c++, boost, stl, c++11

我遇到了一种情况，我必须将一组记录批量处理到数据库中。我想知道如何使用**标准算法**来实现这一点。

给定 10002 条记录，我想将其划分为 100 条记录的 bin 进行处理，其余为 2 的 bin。

希望下面的代码能更好地说明我要完成的工作。我完全愿意接受涉及迭代器、lambda 的任何现代 C++ 乐趣的解决方案。

```
#include <cassert>
#include <vector>
#include <algorithm>

template< typename T >
std::vector< std::vector< T > > chunk( std::vector<T> const& container, size_t chunk_size )
{
  return std::vector< std::vector< T > >();
}

int main()
{
  int i = 0;
  const size_t test_size = 11;
  std::vector<int> container(test_size);
  std::generate_n( std::begin(container), test_size, [&i](){ return ++i; } );

  auto chunks = chunk( container, 3 );

  assert( chunks.size() == 4 && "should be four chunks" );
  assert( chunks[0].size() == 3 && "first several chunks should have the ideal chunk size" );
  assert( chunks.back().size() == 2 && "last chunk should have the remaining 2 elements" );

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T02:13:35.417

在并行化的上下文中，这种范围的划分很常见，我发现定义*范围*的概念是有用的，即一对（从，到）在各种例程和线程之间传递的最小单元过程。

这比为每个部分复制整个子向量要好，因为它需要的内存空间要少得多。它也比只维护单个结束迭代器更实用，因为每个范围都可以按原样传递给线程——当它是第一个或最后一个部分等时没有特殊情况。

考虑到这一点，以下是我发现运行良好的例程的简化版本，并且都是现代 C++11：

```
#include <cassert>
#include <vector>
#include <utility>
#include <algorithm>
#include <cstdint>

template <typename It>
std::vector<std::pair<It,It>>
  chunk(It range_from, It range_to, const std::ptrdiff_t num)
{
  /* Aliases, to make the rest of the code more readable. */
  using std::vector;
  using std::pair;
  using std::make_pair;
  using std::distance;
  using diff_t = std::ptrdiff_t;

  /* Total item number and portion size. */
  const diff_t total
  { distance(range_from,range_to) };
  const diff_t portion
  { total / num };

  vector<pair<It,It>> chunks(num);

  It portion_end
  { range_from };

  /* Use the 'generate' algorithm to create portions. */    
  std::generate(begin(chunks),end(chunks),[&portion_end,portion]()
        {
          It portion_start
          { portion_end };

          portion_end += portion;
          return make_pair(portion_start,portion_end);
        });

  /* The last portion's end must always be 'range_to'. */    
  chunks.back().second = range_to;

  return chunks;
}

int main()
{
  using std::distance;

  int i = 0;
  const size_t test_size = 11;
  std::vector<int> container(test_size);
  std::generate_n( std::begin(container), test_size, [&i](){ return ++i; } );

  /* This is how it's used: */    
  auto chunks = chunk(begin(container),end(container),3);

  assert( chunks.size() == 3 && "should be three chunks" );
  assert( distance(chunks[0].first,chunks[0].second) == 3 && "first several chunks should have the ideal chunk size" );
  assert( distance(chunks[2].first,chunks[2].second) == 5 && "last chunk should have 5 elements" );

  return 0;
} 
```

它的工作方式与您建议的略有不同：部分大小始终向下舍入，因此在您的示例中您只得到 3 个部分，最后部分比其他部分略大（而不是略小）。这可以很容易地修改（我认为这并不重要，因为通常部分的数量远小于工作项的总数）。

* * *

**评论。**在我自己对范围相关模式的使用中，很快发现实际存储整数（每个表示与 的距离`.begin()`）而不是迭代器通常更好。原因是这些整数和实际迭代器之间的转换是一种快速且无害的操作，无论您需要`iterator`还是`const_iterator`. 然而，当您存储迭代器时，您需要一劳永逸地决定是否使用`iterator`or `const_iterator`，这可能会很痛苦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T18:58:33.810

The problem seems to be a variation on `std::for_each`, where the "each" you want to operate on is an interval of your collection. Thus you would prefer to write a lambda (or function) that takes two iterators defining the start and end of each interval and pass that lambda/function to your algorithm.

Here's what I came up with...

```
// (Headers omitted)

template < typename Iterator >
void for_each_interval(
    Iterator begin
  , Iterator end
  , size_t interval_size
  , std::function<void( Iterator, Iterator )> operation )
{
  auto to = begin;

  while ( to != end )
  {
    auto from = to;

    auto counter = interval_size;
    while ( counter > 0 && to != end )
    {
      ++to;
      --counter;
    }

    operation( from, to );
  }
} 
```

(I wish that `std::advance` would take care of the inner loop that uses `counter` to increment `to`, but unfortunately it blindly steps beyond the end [I'm tempted to write my own `smart_advance` template to encapsulate this]. If that would work, it would reduce the amount of code by about half!)

Now for some code to test it...

```
// (Headers omitted)

int main( int argc, char* argv[] )
{
  // Some test data
  int foo[10] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
  std::vector<int> my_data( foo, foo + 10 );
  size_t const interval = 3;

  typedef decltype( my_data.begin() ) iter_t;
  for_each_interval<iter_t>( my_data.begin(), my_data.end(), interval,
    []( iter_t from, iter_t to )
    {
      std::cout << "Interval:";
      std::for_each( from, to,
        [&]( int val )
        {
          std::cout << " " << val;
        } );
      std::cout << std::endl;
    } );
} 
```

This produces the following output, which I think represents what you want:

```
Interval: 0 1 2
Interval: 3 4 5
Interval: 6 7 8
Interval: 9

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:21:56.960

实现略有不同，但对迭代器使用范围操作。我也在考虑使用 std::partition 函数的实现。

```
#include <iostream>
#include <cassert>
#include <vector>
#include <algorithm>

template< typename Iterator >
void sized_partition( Iterator from, Iterator to, std::ptrdiff_t partition_size, std::function<void(Iterator partition_begin, Iterator partition_end)> range_operation )
{
  auto partition_end = from;
  while( partition_end != to )
  {
    while( partition_end != to && std::distance( from, partition_end ) < partition_size )
      ++partition_end;

    range_operation( from, partition_end );
    from = partition_end;
  }
}

int main()
{
  int i = 0;
  const size_t test_size = 11;
  std::vector<int> container(test_size);
  typedef std::vector<int>::iterator int_iterator;
  std::generate_n( std::begin(container), test_size, [&i](){ return ++i; } );

  sized_partition<int_iterator>( container.begin(), container.end(), 3, []( int_iterator start_partition, int_iterator end_partition )
  {
    std::cout << "Begin: ";
    std::copy( start_partition, end_partition, std::ostream_iterator<int>(std::cout, ", ") );
    std::cout << " End" << std::endl;
  });

  return 0;
} 
```

# javascript - 当对表格进行排序时，会自动选中该复选框

> ID：14226958
> 
> 赞同：1
> 
> 时间：2013-01-09T01:27:42.413
> 
> 标签：javascript, jquery, ruby-on-rails, checkbox

我有这个页面：

![在此处输入图像描述](../Images/398415b463c7abe19dfb1abb96e6f19c.png)

有一个可排序的选项：将项目从下表移动到上表。此刻，我只有两个项目（每张桌子都有一个项目）。

上表包含未完成的工作人员的任务，下表包含工作人员已完成的任务。

这个词：是/否表示任务是否完成。

我正在尝试做下一件事：

当用户将项目从下表移动到上表时，我希望自动选中复选框（因此它总是从“是”移动到“否”）。

这是我的`index.html.erb`（我用于`best_in_place`在值更改时更新数据库）：

```
<html>
<body>

<ul id="sortable1" class="connectedSortable"> 

  <% @tasks_worker_todo.each do |task| %>
        <li class="ui-state-default">
            <%= best_in_place task, :done, :classes => 'highlight_on_success', type: :checkbox, collection: %w[No Yes] %> | 
            <%= task.admin_mail %> | 
            <%= task.task %>
        </li>
  <% end %>
</ul>

<br><br>

<ul id="sortable2" class="connectedSortable">
  <% @tasks_worker_done.each do |task| %>
        <li class="ui-state-highlight">
            <%= best_in_place task, :done,:classes => 'highlight_on_success', type: :checkbox, collection: %w[No Yes] %> | 
            <%= task.admin_mail %> | 
            <%= task.task %>
        </li>
  <% end %>
</ul> 
```

这是我的`application.js`

```
$(document).ready(function(){
 jQuery('#sortable1, #sortable2')
 .sortable(
 {'connectWith':'#sortable1',
 'dropOnEmpty':true,
 'scroll':true,
  items: "li:not(.emptyMessage)",
  receive: function(event, ui) {
         alert('moved');
         //hide empty message on receiver
         $('li.emptyMessage', this).hide();

         //show empty message on sender if applicable
         if($('li:not(.emptyMessage)', ui.sender).length == 0){
             $('li.emptyMessage', ui.sender).show();
             alert('alon');
         } else {
             $('li.emptyMessage', ui.sender).hide();
         }            
     }

  });
}); 
```

任何帮助表示赞赏！

**更新：**

这是 ruby​​ 生成的 HTML：

```
<!DOCTYPE html>
<html>

<head> 
<title>TODOLIST</title> 

<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/admin.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/tasksadmins.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/workers.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.purr.js?body=1" type="text/javascript"></script>
<script src="/assets/best_in_place.js?body=1" type="text/javascript"></script>
<script src="/assets/admin.js?body=1" type="text/javascript"></script>
<script src="/assets/myjquery.js?body=1" type="text/javascript"></script>
<script src="/assets/tasksadmins.js?body=1" type="text/javascript"></script>
<script src="/assets/workers.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
<meta content="authenticity_token" name="csrf-param" />
<meta content="FZho6dNmNWjn82HB+MzhL/MtIm4s6F7JFiLVysPCREY=" name="csrf-token" /> 
</head>

<body>
<div id="right">

    <li><a href="/users/sign_out" data-method="delete" rel="nofollow">Sign out</a></li>

</div>
<p id="notice"></p>
<p id="alert"></p>
<center>
<html>
<body>

 <ul id="sortable1" class="connectedSortable"> 

    <li class="ui-state-default">
        <span class='best_in_place highlight_on_success' id='best_in_place_tasksadmin_1_done' data-url='/tasksadmins/1' data-object='tasksadmin' data-collection='["No","Yes"]' data-attribute='done' data-type='checkbox'>No</span> | 
        admin216@gmail.com | 
        feed the dog
    </li>
</ul>

<br><br>

<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">
        <span class='best_in_place highlight_on_success' id='best_in_place_tasksadmin_2_done' data-url='/tasksadmins/2' data-object='tasksadmin' data-collection='["No","Yes"]' data-attribute='done' data-type='checkbox'>Yes</span> | 
        admin216@gmail.com | 
        feed the fish
    </li>
</ul>

</body>
</html>
</center>

</body>
</html> 
```

ps 我知道我有两个body 和两个html。我明天会订购。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:01:56.010

在处理程序中试试这个`receive`：

被移动的元素是`ui.item`

```
 ui.item.find('span').click(); 
```

# wordpress - 带有下拉选择的 Wordpress 搜索字段

> ID：14226960
> 
> 赞同：1
> 
> 时间：2013-01-09T01:27:56.590
> 
> 标签：wordpress, search, drop-down-menu

我正在尝试放置一个带有两个或三个下拉选择的搜索字段，以便它们可以像：

dropdown1：类别（即城市） dropdown2：子类别（即汽车品牌）搜索字段：任何文本

所以当用户选择纽约，本田，并在搜索字段中输入思域时，它将返回纽约地区所有在售本田思域的结果。

有一个帖子与我的问题非常相似，但一直没有答案，祝我好运！

先感谢您！！！任何帮助将不胜感激 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:37:54.903

好吧，更个性化的解决方案是使用**ajax 调用**后端中的函数来检索您想要的帖子（实际上，您可以在后端同步调用函数，无需使用 ajax，但会更好）。此函数将获取参数并查询数据库（例如使用 WP_query），然后使用模板（可能是 search.php）呈现帖子。

另一种方法是使用**过滤器**，在以下链接中进行了说明。 [https://wordpress.stackexchange.com/questions/11822/how-to-limit-search-to-post-titles](https://wordpress.stackexchange.com/questions/11822/how-to-limit-search-to-post-titles)

祝你好运！

# regex - (^# | ^ *$) ！支持这个正则表达式吗？

> ID：14226965
> 
> 赞同：2
> 
> 时间：2013-01-09T01:29:07.557
> 
> 标签：regex, shell

我使用 *grep '(^#|^ *$)' 文件*来搜索以 '#' 或空行开头的文本中的行。

但它不起作用。

因为当我阅读《sed & awk》这本书时，它说*grep*并没有完全使用正则表达式语法中的所有元字符。

所以我怀疑。表达式 '(^#|^ *$)' 在正则表达式中是非法的吗？或者是因为 grep 不支持这种语法。

* * *

又是疑惑。'\' ：关闭后面字符的特殊含义。有时它是相反的。我知道的相反的是'()''{}'。是'|' 也是对面的吗？还存在一些吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:33:04.757

您需要使用`\|`而不是bare`|`来使这个本来可以的表达式与grep 一起使用。

从手册页：

> 在基本正则表达式中，元字符 ?、+、{、|、( 和 ) 失去了它们的特殊含义；而是使用反斜杠版本\?、+、{、\|、(和)。

所以试试这个表达式：

```
grep '\(^#\|^ *$\)' input 
```

或者：

```
grep '^\(#\| *$\)' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:32:52.417

使用 grep “或”

```
grep -e '^#' -e '^ *$' filename 
```

[**参考**](http://thegeekstuff.com/2011/10/grep-or-and-not-operators)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T01:33:54.360

您可以使用 egrep，它是 grep 的增强版本。或者，将`-E`选项添加到`grep`. 此外，为避免与 shell 中的特殊字符（例如 *、|）发生冲突，您最好将 regexp 用引号括起来。

# xcode - Xcode tableview 的排序问题

> ID：14226970
> 
> 赞同：0
> 
> 时间：2013-01-09T01:29:38.040
> 
> 标签：xcode, uitableview

所以我设置了一个从 mysql 下载数据的 uitableview。我正在尝试让我的应用程序使观看次数最多的电影出现在表格的顶部，但是虽然这种方式将 0 次观看放在底部，但实际上它会翻转那些观看次数最多的电影在底部非 0 查看单元格。显然，xcode 一直告诉我没有降序命令。我该如何解决这样的问题？

```
sortDesc = [[NSSortDescriptor alloc] initWithKey:@"viewers" ascending:NO];
[beaus sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]]; //beaus is a NSMutableArray 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:39:41.467

您没有`NSSortDescriptor`正确实例化。

```
sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"viewers" ascending:YES]; 
```

然后只需将您的设置`sortDescriptor`为`sortDescriptors` `NSArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:22:31.727

```
NSSortDescriptor *sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"viewers" ascending:NO];
[beaus sortUsingDescriptors:@[sortDesc]]; 
```

这假设要比较的值以所需的顺序进行比较，比较表示为`NSString`s 的数字有很多问题，

# django - Django 管理界面在外键上添加过滤器

> ID：14226973
> 
> 赞同：1
> 
> 时间：2013-01-09T01:30:28.987
> 
> 标签：django, key, admin

我正在使用 Django 1.2.3，并尝试在外键上添加列表过滤器。

似乎 '__' 语法在此版本中不起作用。

我能找到的最佳解决方案似乎是实施过滤规范：http: [//djangosnippets.org/snippets/2194/](http://djangosnippets.org/snippets/2194/)

我无法让它工作，甚至基于这个示例模型创建了一个非常简单的应用程序，但无济于事。

除了上面列出的代码，我的 admin.py 还包括：

```
from django.contrib import admin
from data.models import *

class companyAdmin(admin.ModelAdmin):
        list_display = ('name', 'city')
        #list_filter = ('name', 'name')
        #list_filter = ('name', 'Country')
        #list_filter = ('name', 'country')
        list_filter = ('name', 'city__country')
        #list_filter = ('name', 'city.country')
        #list_filter = ('name', 'city.fk_filterspec')
        #list_filter = ('name', 'fk_filterspec')

admin.site.register(Country)
admin.site.register(City)
admin.site.register(Company, companyAdmin) 
```

这是最好的解决方案吗？

关于如何使这个样本工作的任何建议？

我得到的错误是“'companyAdmin.list_filter[1]'指的是模型'Company'中缺少的字段'city__country'”。

任何帮助将不胜感激。

谢谢！

# javascript - 谷歌地图信息窗口内的AngularJS ng-include？

> ID：14226975
> 
> 赞同：14
> 
> 时间：2013-01-09T01:31:44.917
> 
> 标签：javascript, google-maps-api-3, include, angularjs, infowindow

我正在尝试包含一个模板文件`views/infowindow.html`作为我为启动 google maps api 而编写的服务中的 InfoWindow 的内容：

```
for ( var count = locations.length, i = 0; i < count; i++ ) {

  var latLng  = locations[i],
    marker = new google.maps.Marker({
      …
    }),
    infowindow = new google.maps.InfoWindow();

  google.maps.event.addListener(
    marker,
    'click',
    (function( marker , latLng ){
      return function(){
        var content = '<div ng-include src="\'infowindow.html\'"></div>';
        infowindow.setContent( content );
        infowindow.open( Map , marker );
      }//return fn()
    })( marker , latLng )
  );//addListener

}//for 
```

`content`但是，当 Angular插入 InfoWindow 时，它似乎没有处理（当通过开发工具检查代码时，插入的代码是`<div ng-include src="'views/infowindow.html'"></div>`）。

我希望 Angular 在将我的包含插入到 InfoWindow 之前对其进行预处理，但可惜没有。

我正在尝试做的事情可能吗？

我在想，在将模板传递给之前，我必须以某种方式缓存模板`infowindow.setContent()`，但我不知道该怎么做（或者如果这甚至是我*应该*做的）。我宁愿在事件上加载模板，而不是为每个标记缓存和注入它。

**编辑**查看 $templateCache 和[相关的 SO question](https://stackoverflow.com/a/12346901/758177)。

**编辑 2**这是一个尝试使用的[plunk](http://embed.plnkr.co/vfntxf)`$compile`（InfoWindow 的内容仍然是`<div id="infowindow_content" ng-include src="'infowindow.html'"></div>`）

* * *

## 解决方案

其基础来自[马克的回答如下](https://stackoverflow.com/a/14228601/758177)。在他的解决方案中，InfoWindow 的内容在第一次单击（任何标记）时编译，但 InfoWindow 直到再次单击任何标记时才真正打开，可能是因为 GoogleMaps 不耐烦。

移到`$compile`外面，然后把编译好的模板传进去就 `.addListener`解决了这个问题：

```
for ( … ) {
  …
  infowindow = new google.maps.InfoWindow();
  scope.markers …
  var content = '<div id="infowindow_content" ng-include src="\'infowindow.html\'"></div>';
  var compiled = $compile(content)(scope);

  google.maps.event.addListener(
    marker,
    'click',
    (function( marker , scope, compiled , localLatLng ){
      return function(){
        scope.latLng = localLatLng;//to make data available to template
        scope.$apply();//must be inside write new values for each marker
        infowindow.setContent( compiled[0].innerHTML );
        infowindow.open( Map , marker );
      };//return fn()
    })( marker , scope, compiled , scope.markers[i].locations )
  );//addListener

}//for 
```

[更新了 Plunker](http://plnkr.co/edit/vfntxf)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T05:08:00.037

添加`content`到 DOM 后，您需要找到它（可能使用 jQquery 选择器？），然后`$compile`() 并将其应用到适当的范围。这将导致 Angular 解析您的内容并根据它找到的任何指令（如 ng-include）采取行动。

例如，`$compile(foundElement)(scope)`

没有更多的代码，很难给出更准确的答案。但是，您可以查看[类似的问题和答案。](https://stackoverflow.com/a/14046556/215945)

**更新：**好的，我终于让它工作了，我学到了一些东西。

```
google.maps.event.addListener(
      marker,
      'click',
      (function( marker , scope, localLatLng ){
        return function(){
          var content = '<div id="infowindow_content" ng-include src="\'infowindow.html\'"></div>';
          scope.latLng = localLatLng;
          var compiled = $compile(content)(scope);
          scope.$apply();
          infowindow.setContent( compiled[0].innerHTML );
          infowindow.open( Map , marker );
        };//return fn()
      })( marker , scope, scope.markers[i].locations ) 
```

我的印象是只有 DOM 元素可以被 $compiled —— 即，我首先必须将内容添加到 DOM，然后编译它。事实证明这不是真的。`content`上面，我首先针对 进行编译`scope`，然后将其添加到 DOM 中。（我不知道这是否会破坏数据绑定——即由 $compile 设置的 $watch()es。）我必须设置`scope.latLng`，因为包含 ng 的模板需要插入`{{latLng[0]}}`和`{{latLng[1]}}`. 我使用`innerHTML`而不是`outerHTML`只插入 infowindow.html 的内容。

[笨蛋](http://plnkr.co/edit/7yQWY0?p=preview)。

**更新2：** 第一次点击不起作用。似乎直到第二次单击才加载“infowindow.html”（我尝试再次调用 scope.$apply() ......没有帮助）。当我让 plunker 工作时，我在 index.html 中内联了 infowindow.html 的内容：

```
<script type="text/ng-template" id="/test.html">
  <h4>{{latLng[0]}},{{latLng[1]}}</h4>
</script> 
```

我在 addListener() 中使用它：

```
var content = '<div id="infowindow_content" ng-include src="\'/test.html\'"></div>'; 
```

我将 plunker 更改为使用内联模板。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-28T20:18:51.100

上面的答案是可靠的，但是您失去了对以下内容的约束：

```
infowindow.setContent( compiled[0].innerHTML ); 
```

改为这样做：

```
infowindow.setContent( compiled[0] ); 
```

否则，如果您有类似`<div>{{myVar}}</div>`的内容，如果在您的应用程序中更新，它将不会更新`myVar`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:43:06.510

你试过编译功能吗？http://docs.angularjs.org/api/ng.$compile

我还没有过多地研究角度，但我认为这可以工作。

或者，您可以尝试引导这些东西。但我不相信这是正确的方法...... [http://docs.angularjs.org/guide/bootstrap](http://docs.angularjs.org/guide/bootstrap)

# c# - 为 MVC3 应用程序使用现有数据模型

> ID：14226979
> 
> 赞同：1
> 
> 时间：2013-01-09T01:32:13.200
> 
> 标签：c#, asp.net, asp.net-mvc-3

我有一个现有数据访问层（类库）的解决方案，其中包含模型。我有一个 Web 表单应用程序，它调用这个库来使用存储的过程在 db 上执行 crud 操作。如果我想将此 Webform 应用程序转换为 MVC 3 应用程序，那么我的迁移方法应该是什么。我不想使用实体框架，并希望继续将我的数据访问层用于模型和模型上的操作，因为我的 Web 服务项目正在使用同一个库。任何指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:14:01.407

Sure View Models 用于将数据移入/移出视图到您的业务/数据层。如果您已经在数据层中定义了模型，那么您可以让视图模型继承您的数据模型或让视图直接使用它。

我建议在您的视图模型中继承然后使用新属性来设置底层（继承）属性。这样，您可以在设置继承的属性和更新数据库之前将验证属性添加到新属性并在客户端和服务器上强制验证。

例如，如果您的数据层具有：

```
public class Person
{
    public string Name {get; set;}
    public string Email {get; set;}
} 
```

然后在您的视图模型中，您可以使用：

```
public class VPerson : Person
{
    [Required(ErrorMessage = "Name is required.")]
    [StringLength(50, ErrorMessage = "Name cannot be longer than 50 characters.")]
    public string VName { get; set; }

    [Required(ErrorMessage = "Email is required.")]
    [RegularExpression(Settings.EmailRegex, ErrorMessage = "Email Address is not valid.")]
    [StringLength(50, ErrorMessage = "Email cannot be longer than 50 characters.")]
    public string VEmail { get; set; }

    public void SavePerson()
    {
        Name = VName;
        Email = VEmail;
        // update the DB
    }
} 
```

您可以直接使用不需要验证的属性（即下拉列表）。

您实际上不需要继承，只需在 SavePerson 中调用您的数据层。

# java - android中的谷歌驱动器快速入门示例错误

> ID：14226981
> 
> 赞同：0
> 
> 时间：2013-01-09T01:32:30.630
> 
> 标签：java, android, google-drive-api

我刚刚尝试了谷歌驱动器快速入门示例。在视频中，它似乎工作正常，但是当我自己尝试时，我得到了这个：

![在此处输入图像描述](../Images/2726221d0c9f53ca9adcc4280def6ce7.png)

错误是这样的：

```
01-09 01:17:23.719: E/AndroidRuntime(1002): FATAL EXCEPTION: main
01-09 01:17:23.719: E/AndroidRuntime(1002): java.lang.NoSuchMethodError: com.google.android.gms.common.AccountPicker.newChooseAccountIntent
01-09 01:17:23.719: E/AndroidRuntime(1002):     at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.newChooseAccountIntent(GoogleAccountCredential.java:171)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at com.example.mydrivequickstart.MainActivity.onCreate(MainActivity.java:40)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.Activity.performCreate(Activity.java:5104)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.os.Looper.loop(Looper.java:137)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at java.lang.reflect.Method.invoke(Method.java:511)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-09 01:17:23.719: E/AndroidRuntime(1002):     at dalvik.system.NativeStart.main(Native Method) 
```

我完全按照说明进行操作。我下载了 na google 插件并添加了外部 jar，即[ggoogle-play-services.jar](https://code.google.com/p/google-api-java-client/source/browse/calendar-preview-android-sample/libs/google-play-services.jar?repo=samples&r=549a58c4b30b111c5f868b73e877a679be48e897)，在 google 插件中，我添加了 V2 的 google api 驱动器。应用程序名称和包名称都与我的 google api 控制台中的相同。我知道 nosuchmethoderror，因为我在发布这个问题之前在谷歌中搜索它。但是我仍然不知道为什么我会得到这个，因为我按照说明进行操作。我不知道为什么我会收到这个错误。任何的想法？我很感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:00:14.313

我得到了它。我不应该关注视频。他使用的罐子不正确。我从 android sdk 中的 extras 文件夹导入库，并将其用作我的项目中的库。

# business-catalyst - 在 Adob e Business Catalyst 中编辑模板

> ID：14226991
> 
> 赞同：2
> 
> 时间：2013-01-09T01:33:34.023
> 
> 标签：business-catalyst

如何在业务催化剂中编辑模板？我可以从用户界面执行此操作，还是需要 Dreamweaver 或其他产品？我用谷歌搜索过，但找不到答案......

当我登录时，在网站选项卡下，有网站编辑器、网页、博客和安全区。我错过了什么还是我没有权利？？？我被告知我是管理员角色。

什么是 BC 的帮助/如何视频的好来源？

AHIA，拉里...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:26:18.013

是的，您可以从用户界面编辑模板/布局。编辑 CSS 和 HTML 的最简单方法是单击（在顶部的功能区中）文件管理器 (alpha)。在新窗口的左侧，您将看到一个包含所有资产（页面和相关 CSS）的菜单。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:22:19.780

要访问 Business Catalyst 中的模板，请单击左侧的站点管理器部分，然后单击页面模板（如果您没有看到此内容，则表示您没有权限）。在 BC 中编辑模板非常简单，从最基本的意义上来说，您只需要了解 HTML 和 CSS。使用 FTP 管理器，您还可以通过转到 /Template/ 文件夹来访问模板文件。

我不确定您是最终用户还是开发人员，因此如果您不是合作伙伴用户，则“开发”（以前的文件管理器）可能不会显示。

BC Guru 从零到英雄计划有很多免费教程：[http ://bcgurus.com/hero](http://bcgurus.com/hero)

或者您可以在[BC Academe进行培训](http://www.bcacademe.com)

# terminal - Store previous commands only once in Cygwin Terminal

> ID：14226993
> 
> 赞同：0
> 
> 时间：2013-01-09T01:33:38.610
> 
> 标签：terminal, cygwin

When typing commands in the Cygwin Terminal, if I enter the same command twice, it will be stored twice when I press the up arrow.

For example, if I enter `command1` once and `command2` twice, I have to press the up arrow twice to get back to `command1`. I want to configure it so that I only have to press up twice to get back to `command1`. Is this possible with the Cygwin Terminal?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:38:13.797

I assume that you're talking about bash, the shell running the cygwin command line.

As explained [here](http://stefaanlippens.net/bashduplicates)

```
export HISTCONTROL=ignoredups 
```

will achieve the effect you want. Persisting this setting can be done via [.bashrc](http://cs.nyu.edu/~yap/prog/cygwin/FAQs.html#bashrc)

# java - JAVA 和 JUnit 中都存在断言吗？

> ID：14226996
> 
> 赞同：2
> 
> 时间：2013-01-09T01:34:17.167
> 
> 标签：java, selenium, junit, webdriver, assert

我正在查看 x 人很久以前发布的问题之一。

例如：assertEquals(driver.getPageSource().contains("sometext"), true);

(或) assertEquals(boolean , boolean);

如果存在上述方法，我喜欢使用它。我查看了 JUnit API 及其方法，但没有这样的方法。

1）如果存在，有人可以发布相关链接吗？

2) JAVA 默认类中是否存在断言？（我知道他们在 JUNIT 那里）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:35:44.583

为什么不使用`assertTrue(driver.getPageSource().contains("sometext"));`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T01:39:09.520

如果您想在您的主要 Java 代码中进行断言（例如进行完整性检查），您可以使用[`assert`关键字](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html). JUnit 之类的方法[`assertTrue()`和`assertEquals()`](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)来自 JUnit 的方法旨在用于基于 JUnit 的单元测试代码中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T01:42:20.710

assertEquals 方法在 中`JUnit`，特别是在`org.junit.Assert`类中：

您通常使用如下静态导入语句导入它们：

```
import static org.junit.Assert.*; 
```

`assert`它本身是核心 Java 的一部分，它提供了一种添加完整性检查的方法，这些检查在您调试时运行，但在生产代码中会被忽略（因此不会增加任何开销）。

```
assert(something==somethingElse); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T01:43:53.497

最基本的示例是@daniel-kaplan 建议的示例，但如果您可以选择在测试范围内添加额外的库，我建议您使用[Hamcrest matchers](http://code.google.com/p/hamcrest/wiki/Tutorial)。他们添加了超级棒的语法糖。

你的例子是：

```
assertThat(driver.getPageSource(), containsString("someText")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T05:55:45.147

使用 javadoc 生成的 API 文档。[JUnit javadoc 链接](http://kentbeck.github.com/junit/javadoc/latest/)

如果你想用方法来比较 beteewn boolean 和 boolean，也许你可以使用方法 assertTrue(boolean condition) 。

爪哇代码：

```
 assertTrue(driver.getPageSource().contains("sometext")); 
```