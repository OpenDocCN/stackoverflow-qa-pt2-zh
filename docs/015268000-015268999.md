# StackOverflow 问答 15268000-15268999

# android - 在给定 UIView 的 iOS 上计算文本宽度

> ID：15268003
> 
> 赞同：-1
> 
> 时间：2013-03-07T09:54:00.670
> 
> 标签：android, ios, text-rendering

在 Windows 世界中，您可以这样做来获取文本宽度：

```
SIZE size;
GetTextExtentPoint(DC, "hello", strlen("hello"), &size)
printf("x = %i y = %i\n", size.x, size.y);
    // will print x = 30, y = 15 (for instance) 
```

如果我手头有 UIView 句柄，如何在 iOS 上轻松做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:02:28.007

对于 iOS（我会让更熟悉 Android 开发的人回答第二部分），您需要使用[`sizeWithFont:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3a). 根据您是否希望允许多行，您应该查看我链接的文档中解释的各种方法。

我通常发现最有用的一个是[`sizeWithFont:constainedToSize:`](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aconstrainedToSize%3a)我将约束大小设置为视图中可用的有限宽度，并将高度设置为`CGFLOAT_MAX`，这允许标签根据需要使用尽可能多的垂直空间（因为我经常有垂直滚动视图中的标签）。

# mobile - Xamarin - 跨平台移动应用程序入门

> ID：15268004
> 
> 赞同：4
> 
> 时间：2013-03-07T09:54:08.610
> 
> 标签：mobile, xamarin

目标：使用 Xamarin 构建一个至少可以在 iOS 和 Android 上运行的跨平台应用程序。

可用操作系统：Windows 7 和 Mac

问题：

1) Xamarin 有不同的工具，例如 Monotouch、Monodroid、Xamarin Studio，这让我很困惑。我应该使用哪个工具？

2) 我基本上是一名 C# 开发人员，听说我们可以使用 xamarin 在 Visual Studio 2010 中开发移动应用程序。是否可以从中开发跨平台应用程序或一次仅开发一个平台目标？

3) 使用 Mac 或 Windows 为我（问题 2 相关）使用 Xamarin 开发跨平台应用程序是一个不错的选择吗？

4) 使用 Xamarin Studio 开发跨平台应用，我们需要根据目标平台的数量在 Xamarin 解决方案中创建 2-3 个不同的项目，还是只需要在多个平台上运行的单个项目？任何使用 Xamarin 的跨平台开发初学者教程的视频链接将不胜感激。

提前致谢。

问候， 索拉夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T00:16:11.493

1) Xamarin Studio 是一个 IDE，是最近发布的 MonoDevelop 的替代品。MonoTouch 是 iOS 框架的名称，现在称为 Xamarin.iOS；同样，MonoDroid 已成为 Xamarin.Android。

2) 您可以在 VS2010 中开发，但要部署到 iOS，您需要有一个可以与之通信的 Mac 构建代理。

3）如果你只是想支持iOS和Android，最好买Mac，除非你真的需要Resharper。如果您还打算支持 Windows RT，则需要两台机器。

4) 是的，多个项目。如何做到这一点有几个选项。请参阅此处：[http](http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/part_3_-_setting_up_a_xamarin_cross_platform_solution) ://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/part_3_-_setting_up_a_xamarin_cross_platform_solution 。一个示例跨平台应用程序是 PropertyCross：[https](https://github.com/tastejs/PropertyCross) ://github.com/tastejs/PropertyCross 。

# mysql - MySQL刷新查询缓存

> ID：15268005
> 
> 赞同：5
> 
> 时间：2013-03-07T09:54:11.530
> 
> 标签：mysql, performance, query-cache

我有一个慢速数据库查询，第一次运行 18 秒，后续运行 4 秒。我正在尝试优化它的“冷启动”执行时间。但无法连续复制。

`select SQL_NO_CACHE`指令没有帮助。

以下命令均无法使其再次运行 18 秒：

```
FLUSH QUERY CACHE;
RESET QUERY CACHE;
FLUSH TABLES; 
```

即使数据库重新启动也不会使它再次运行很长时间。

还有其他刷新缓存的命令吗？

表引擎是 InnoDB。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-05T06:19:56.193

让我解释一下为什么它没有帮助。

`Your Requirement`：在这里，您尝试再次运行相同的查询，但您希望它仅通过清理缓存来作为第一次运行。

当查询运行时，图片中会出现多种类型的缓存。“查询缓存”是我们谈论的最常见的缓存，然后是 MySQL 缓存（例如 Innodb 缓冲池）、table_cache（在 MySQL 级别和 InnoDB 级别）、OS 缓存、硬件缓存。

`select SQL_NO_CACHE :`这将阻止运行查询以保存任何“查询缓存”，这意味着如果您再次运行没有任何“查询缓存”的相同查询，但图片中将存在其他缓存。

`FLUSH QUERY CACHE :`这只是对“查询缓存”进行碎片整理以更好地利用其内存

`RESET QUERY CACHE :`从“查询缓存”中删除所有查询结果，这不会影响您在之前的所有查询中是否使用了“SQL_NO_CACHE”。

*   除了您正在尝试的内容之外，您还可以尝试避免这些缓存。
*   'MySQL Caches'（Innodb 缓冲池）必须重启 MySQL，没有其他方法。
*   设置全局 key_buffer_size=0；使密钥缓冲区大小为零
*   设置全局查询缓存类型=0；
*   设置全局查询缓存大小=0；
*   操作系统级缓存：[这篇](https://askubuntu.com/questions/155768/how-do-i-clean-or-disable-the-memory-cache)文章可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:58:40.640

我通常在查询中添加一个用户定义的变量，这样它就可以跳过查询缓存。不过，不确定您是否可以以这种方式模拟冷启动。

```
SELECT a.* 
FROM a, (SELECT @a:=NULL) as foo; 
```

# php - 白屏数据库插件 Codeigniter

> ID：15268009
> 
> 赞同：0
> 
> 时间：2013-03-07T09:54:22.663
> 
> 标签：php, mysql, database, codeigniter

目前，我在启动 CodeIgniter 项目时出现白屏并抛出 0 条错误消息。我已将问题缩小到加载数据库驱动程序。专门针对这一行

`$this->conn_id = ($this->pconnect == FALSE) ? $this->db_connect() : $this->db_pconnect();`

在 DB_driver.php（CI 代码的一部分）中。

这是我的 database.php 设置（没什么花哨的，只是测试一下）：

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'CI';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE;
$db['default']['port'] = 3306; 
```

当我从自动加载中删除数据库库时，一切正常（显然，数据库查询除外）。

任何想法这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:21:58.050

好吧，这不仅仅是有点尴尬。

万一有人再次阅读此内容：在 php.ini 中初始化模块后仅使用数据库通常非常聪明。( `extension=php_mysql.dll`)。

现在工作得很好。

# iphone - 如何在应用内购买恢复过程中知道出现 iTunes 登录提醒的确切时间？

> ID：15268011
> 
> 赞同：0
> 
> 时间：2013-03-07T09:54:32.583
> 
> 标签：iphone, xcode, in-app-purchase, restore

我正在我的应用程序中恢复应用程序购买。单击恢复按钮几秒钟后，将显示一个用于 iTunes 登录的警报窗口（如果我尚未登录）。我想知道何时准确显示此警报，因为我想在这几秒钟内显示一个活动指示器。是否有任何方法，例如使用通知来执行此操作？

我正在使用以下代码恢复购买

```
-(IBAction)inAppRestoreButAxn:(id)sender
 {
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:54:26.170

我在 StackOverflow 的另一篇文章中找到了答案。

[检测应用内购买的已取消 iTunes 登录警报](https://stackoverflow.com/questions/14711148/detecting-a-cancelled-itunes-login-alert-for-in-app-purchases)

# joomla2.5 - 无法将产品添加到德德玛特的购物车

> ID：15268012
> 
> 赞同：0
> 
> 时间：2013-03-07T09:54:34.150
> 
> 标签：joomla2.5, virtuemart

我是一个新的 joomla 开发人员。

我在美德玛特遇到问题：

当我向产品添加可库存变体自定义字段时，产品没有添加到购物车！

请问有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:01:41.440

我们真的可以在这方面提供更多信息，因为有几个可能的原因。

只是为了下次，像这样的信息......

*   什么Joomla版本
*   什么 VirtueMart 版本
*   Joomla 模板是什么
*   一个链接，如果可能的话或一些代码来审查

……真的很有用。

但是，当我遇到这种情况时，最常见的原因是 jQuery 冲突。所以也许 jQuery 被多次加载。通常解决方案是将 VirtueMart 设置为不加载 jQuery。

在 VirtueMart 的“配置”屏幕中，在“模板”选项卡下的“激活 Css 样式和 Javascripts”部分中有一个复选框，名为“使用 VirtueMart jQuery”。只需取消选中此框。

VirtueMart 网站上的[General JS-Problems 有一些背景，带有模板和 jQuery](http://dev.virtuemart.net/projects/virtuemart/wiki/General_JS-Problems_with_templates_and_jQuery)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T07:43:46.350

可以确定问题出在 jquery 上。jquery 只需要运行一次。我通过禁用滑块的第三方扩展之一解决了我的问题。我还读到有人通过禁用菜单栏扩展来解决它。所以问题在于运行 jquery 两次。

# windows-8 - windows8如何支持相同分辨率的多种屏幕尺寸

> ID：15268015
> 
> 赞同：0
> 
> 时间：2013-03-07T09:54:40.537
> 
> 标签：windows-8

我为我的 Windows 8 应用程序设计了一个页面，它必须以不同的屏幕尺寸在相同的分辨率上运行。例如，考虑我有 10.6 英寸的平板电脑（1366*768）和 23 英寸的桌面（1366*768），我的应用程序应该支持两种屏幕尺寸。iam 使用 c# 和 xaml 来开发应用程序。有谁能够帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:47:45.490

您可以使用 Visual Studio 模拟器测试各种分辨率和屏幕尺寸。在带有绿色播放按钮的“运行”下拉菜单中，选择“模拟器”（它可能当前设置为“本地机器”）。然后单击运行按钮启动模拟器。当模拟器开始运行您的代码时，选择看起来像监视器的第 8 个按钮。（此按钮的工具提示是“更改分辨率”）。这将为您提供可以测试的多种屏幕尺寸/分辨率。

此外，这里有一些[关于缩放到屏幕的有用指南](http://msdn.microsoft.com/en-US/library/windows/apps/hh465349)。这需要一些编码最佳实践来很好地在不同的分辨率/屏幕尺寸上扩展您的应用程序。具体来说，查看[ViewBox](http://msdn.microsoft.com/en-US/library/windows/apps/br229771)和[ListView](http://msdn.microsoft.com/en-US/library/windows/apps/br211837)控件；它们可以帮助分别缩放固定或自适应布局。[画布](http://msdn.microsoft.com/en-US/library/windows/apps/hh465734)可以很好地缩放图像。

# xml - xslt 转换为 html 编码 UTF-8

> ID：15268020
> 
> 赞同：1
> 
> 时间：2013-03-07T09:54:53.630
> 
> 标签：xml, xslt, encoding, utf-8

这是xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<title>中文字Chinese charactors 1234</title> 
```

这是 xslt：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
    <xsl:value-of select="title"/>
    </xsl:template>
</xsl:stylesheet> 
```

但输出似乎编码错误如下：

```
銝剜��hinese charactors 1234 
```

我确保编码使用的是“Unicode UTF-8”我使用的软件是Altova XMLSpy 为什么会发生这种情况以及如何解决，非常感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:04:08.893

不幸的是，编码错误总是发生在您懒得告诉我们的系统部分，因为您没有意识到它们是相关的。

首先，检查 XSLT 处理器是否正在执行序列化（例如，不是将结果树写入 DOM）并且序列化是到二进制输出目标而不是字符目标。然后检查此二进制目标中的实际字节。消除错误在于您在显示这些字节时解码这些字节的方式的所有可能性，而不是字节本身。

# asp.net - 通过 Ajax Call 或 Http Post 将客户端数据发布到服务器更好？

> ID：15268021
> 
> 赞同：0
> 
> 时间：2013-03-07T09:54:58.390
> 
> 标签：asp.net, ajax, performance, http

我想通过单击按钮将值从几个控件发布到服务器端。在此之后，我不想将我的页面重定向到其他地方。我只想在不重新加载页面的情况下显示“提交成功”消息。如果我必须提交包括图像在内的大量数据，哪一个会更有效？

# javascript - 使用 jquery 阻止特定链接

> ID：15268023
> 
> 赞同：1
> 
> 时间：2013-03-07T09:54:59.990
> 
> 标签：javascript, jquery, html

在画廊中，我想阻止某些缩略图通过灯箱扩展其原始图片。图像没有 ID，只有一个类。所有链接都是从数据库中的表中读取的。

```
$(document).ready(function(){
            if($('.product-image').attr('target', 'blockedpath')) {
                $('.product-image').click(function(e) {
                    e.preventDefault();
                    return false;
                });
            }
        }); 

<li class="product">
            <div class="productInfo">
                <h3>@i.ToString()</h3>
                <a href="@Href("~/Images/2013/" + i.ToString() + ".jpg")" rel="lightbox" class="link">
                    <img class="product-image" src="@Href("~/Images/2013/Thumbnails/" + i.ToString() + ".jpg")" alt="foto" />
                </a>
            </div>
        </li> 
```

如果我使用它，所有缩略图都会被阻止。如何防止仅被阻止的图片并避免阻止缩略图。是否有可能将所有应该被阻止的图像保存在一个数组中并循环遍历该数组以阻止这些缩略图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T09:57:05.997

您首先检查是否存在任何图像`target = blockedpath`，然后阻止**所有**图像。

你可以使用这样的东西：

```
$(document).ready(function(){
    // Select elements with the product-images class, that also 
    // have a target attribute with a value equal to 'blockedpath'
    // Bind a click event to the matched elements
    $('.product-image[target="blockedpath"]').click(function(event) {
        event.preventDefault();
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:58:16.663

```
$('[target=blockedpath]').click(function( e ){
  e.preventDeault();
}); 
```

或相反：

```
$('.product-image').not('[target=blockedpath]').click(function(){
  alert('hi!');
}); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# wso2 - 如何集成 wso2 DSS 服务器和 wso2 ESB

> ID：15268024
> 
> 赞同：1
> 
> 时间：2013-03-07T09:55:01.210
> 
> 标签：wso2, wso2esb, wso2dss

我目前的情况是，我有一个从数据服务公开的 Web 服务，当我给它用户名时，它会返回用户的电子邮件地址。现在我想在 ESB 中使用这个 Web 服务，并在一个属性中从这个 Web 服务获取电子邮件 ID，并使用 LOG 中介器在控制台中显示它。我现在应该怎么做？

抱歉这个愚蠢的问题，但我是 wso2 esb 的最新成员。所以请帮我解决这个问题。

```
Now ihave a response like:
<brs:getRecipientKeyResponse xmlns:brs="http://brs.carbon.wso2.org">
 <brs:MailRecipient xsi:type="ax2338:MailRecipient" xmlns:ax2338="http://email.samples/xsd" xmlns:ax2337="http://email.samples/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ax2337:recipient>kevin</ax2337:recipient>
 </brs:MailRecipient>
</brs:getRecipientKeyResponse>

Ihave to get the recipient element from this response and put this in payload. My complete sequence for this is:
<sequence xmlns="http://ws.apache.org/ns/synapse" name="receiveSeq">
   <log>
      <property name="getRecipient" value="------------Trying to get data Fom BRS Response----------------------------"/>
      <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ax2337="http://email.samples/xsd" name="Recipient" expression="//ax2337:recipient"/>
   </log>
   <payloadFactory>
      <format>
         <p:GetEmailDetails xmlns:p="http://ws.wso2.org/dataservice">
            <xs:name xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:name>
         </p:GetEmailDetails>
      </format>
      <args>
         <arg xmlns:ns="http://org.apache.synapse/xsd" xmlns:ax2337="http://email.samples/xsd" expression="//ax2337:recipient"/>
      </args>
   </payloadFactory>
   <log>
      <property xmlns:ns="http://org.apache.synapse/xsd" name="getName" expression="get-property('Recipient')"/>
   </log>
   <send receive="DBSeq">
      <endpoint key="emailServiceEP"/>
   </send>
</sequence>

<!--this part is not able to get data --->
 <property xmlns:ns="http://org.apache.synapse/xsd" name="getName" expression="get-property('Recipient')"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:48:49.347

你只需使用你的wso2dss tryit服务在那个请求端代码复制到payloadfactory insted的“？”保持$ 1，$ 2 ..这样并按照你上面的订单顺序传递下面的参数对此起着至关重要的作用我认为这对你有帮助

```
<payloadFactory>
            <format>
               <p:insert_emp_operation xmlns:p="http://ws.wso2.org/dataservice">
                  <xs:eno xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:eno>
                  <xs:ename xmlns:xs="http://ws.wso2.org/dataservice">$2</xs:ename>
                  <xs:esal xmlns:xs="http://ws.wso2.org/dataservice">$3</xs:esal>
               </p:insert_emp_operation>
            </format>
            <args>
               <arg expression="get-property('eno')"/>
               <arg expression="get-property('ename')"/>
               <arg expression="get-property('esal')"/>
            </args>
         </payloadFactory>
         <send receive="Error_Seq">
            <endpoint>
               <address uri="http://localhost:9764/services/emp_DataService/" format="soap11"/>
            </endpoint>
         </send> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:43:03.947

既然您已经实现了 Dataservice，请将其作为端点 url 提供给您的代理，该代理可以在 wso2esb 中创建。当您向代理发送请求时，您将收到数据服务的响应。只需使用“level=full”做一个日志，您就会看到完整的响应。使用属性调解器并执行 xpath 来选择您需要的值。样本配置：

```
 <proxy name="StockQuoteProxy">
        <target>
            <endpoint>
                <address uri="DS endpoint"/>
            </endpoint>
            <outSequence>
               <log level="full">
                  <property name="email" expression="xpath from the email attribute in the rseponse"/>
                </log>
                <send/>
            </outSequence>
        </target>

    </proxy> 
```

这是有关如何创建代理的 esb 示例指南；

[http://docs.wso2.org/wiki/display/ESB460/Proxy+Service+Samples](http://docs.wso2.org/wiki/display/ESB460/Proxy+Service+Samples)

# matlab - 如何在 Matlab 中为脉冲响应图上的区域着色？

> ID：15268027
> 
> 赞同：1
> 
> 时间：2013-03-07T09:55:10.790
> 
> 标签：matlab, plot, digital

我使用 impz(b,a) 命令绘制了数字系统的脉冲响应，我想在图上为 (-std,std) 之间的区域着色。我已经添加了显示 -std 和 std 值的行，但我不知道该怎么做。你能帮助我吗？可以图形化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:52:08.060

正如 EitanT 上面所建议的：

```
[h, t] = impz(b, a);
figure()
plot(t,h)
hold on
ind=[find(t==-std):find(t==std)]
fill(t(ind),h(ind)) 
```

# html - 删除段落标签

> ID：15268035
> 
> 赞同：1
> 
> 时间：2013-03-07T09:55:42.533
> 
> 标签：html, cakephp, cakephp-1.3, cakephp-2.0

在我的代码中，我想打印 Ck Editor 的值，但它显示 ptag text ptag 之类的标签我如何删除视图文件中的 ptags

```
echo "<td style='text-align:$sAlignment'>".$this->Html->link($arr_data['answer'], array('plugin' => 'user','controller' => 'user', 'action' => 'action',"id"=>$arr_data["id"],"slug"=>$arr_data['slug'],'admin' => true), array('class' => 'pass-reset-link'), null, null, false)."&nbsp;</td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:40:19.297

最后我明白了，这就是解决方案......

```
echo "<td style='text-align:$sAlignment'>".$this->Html->link(strip_tags($arr_data['answer']), array('plugin' => 'user','controller' => 'user', 'action' => 'action',"id"=>$arr_data["id"],"slug"=>$arr_data['slug'],'admin' => true), array('class' => 'pass-reset-link'), null, null, false)."&nbsp;</td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:08:18.227

将以下行添加到 ckeditor.js 配置文件中：

> n.setRules('p',{indent:false,breakAfterOpen:false});

有关更多信息，请访问以下链接：

[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Output_Formatting](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Output_Formatting)

[http://docs.cksource.com/CKEditor_3.x/Howto/Removing_Files](http://docs.cksource.com/CKEditor_3.x/Howto/Removing_Files)

# entity-framework - EDMX 用于遗留代码 _and_ Code First 用于在一个 MVC 项目中一起进行新开发

> ID：15268036
> 
> 赞同：4
> 
> 时间：2013-03-07T09:55:43.037
> 
> 标签：entity-framework, ef-code-first, edmx

情况如下：

我们有一个大型 MVC 项目，在 EF5.0 上采用数据库优先方法：

ObjectContext 构造函数：

```
namespace xxx.Models
{
    (...)
        public partial class xxxEntities : ObjectContext
        {
            #region Constructors

            /// <summary>
            /// (...)
            /// </summary>
            public xxxEntities() : base("name=xxxEntities", "xxxEntities")
            {
                this.ContextOptions.LazyLoadingEnabled = true;
                OnContextCreated();
            }

    (...) 
```

连接字符串：

```
 <add name="xxxEntities" 
         connectionString="metadata=res://*/Models.xxxModel.csdl|
         res://*/Models.xxxModel.ssdl|res://*/Models.xxxModel.msl;
         provider=System.Data.SqlClient;provider connection string=&quot;
         data source=.;Initial catalog=xxxdb;
         integrated security=True;
         multipleactiveresultsets=True;
         App=EntityFramework&quot;"
         providerName="System.Data.EntityClient" /> 
```

我们选择 Code First 来测试分离命名空间上的新开发。

连接字符串：

```
<add name="xxxCFContext" 
     connectionString="Data Source=.;
     Initial Catalog=xxxdb;
     Integrated Security=True;
     User Instance=False;
     MultipleActiveResultSets=True" 
     providerName="System.Data.SqlClient" /> 
```

DbContext 构造函数：

```
namespace xxx.Models.CodeFirst
{
    public partial class xxxCFContext : DbContext
    {
        static xxxCFContext()
        {
            Database.SetInitializer<xxxCFContext>(new ValidateDatabase<xxxCFContext>());
        }

        public xxxCFContext()
            : base("Name=xxxCFContext")
        {
        }

(...) 
```

我们运行 add-migrations，update-database 没有问题，构建成功完成。但是第一次使用代码优先的数据库访问：

```
xxxCFContext cfdb = new xxxCFContext();

foreach (Xobject xobject in cfdb.Xobjects) 
```

出现错误：

“找不到概念模型类型 'xxx.models.yyyclass'”，但这个 yyyclass 存在于 edmx 中，而不是 codefirst 部分。

卸载EF5.0，安装EF6.0，错误消失。但我需要 EF5.0 而不是 6.0 alfa3 预发行版。

怎么了？我们如何在 EF5.0 中使用 edmx 与 codefirst 混合？

**如果有任何想法，我将不胜感激。**

**编辑**

我知道这种解决方法，但对我没有帮助：

[有没有人将实体框架与代码优先方法与 Edmx 文件混合使用？](https://stackoverflow.com/questions/8396814/have-anyone-used-entity-framework-with-code-first-approach-mixed-with-edmx-file)

[http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/](http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/)

[找不到概念模型类型](https://stackoverflow.com/questions/8974973/could-not-find-the-conceptual-model-type)

[http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/](http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/)

[实体框架（4.3）寻找单数而不是复数（当实体名称以“s”结尾时）](https://stackoverflow.com/questions/9441892/entity-framework-4-3-looking-for-singular-name-instead-of-plural-when-entity)

[使用 Database First 和 Entity Framework 4.1 构建 MVC 3 应用程序](http://msdn.microsoft.com/en-us/data/gg685489.aspx "使用 Database First 和 Entity Framework 4.1 构建 MVC 3 应用程序")

生成（使用 xxxmodel.Context.tt 和 xxxModel.tt）大型现有 edmx 的问题大量利用了 ObjectContext 的优势，因此我们不能简单地从 ObjectContext 更改为 DbContext（在现有 edmx 之后）。

**编辑二**

从 DB First 到 CodeFirst，我们选择以下：

*   从旧的 edmx 文件移至代码生成。使用[EF 5.x DbContext Fluent Generator](http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c)生成了模型对象，因此我们有了模型对象。

（右击 EDMX 编辑器，添加代码生成项。如果没有，请安装：工具菜单、扩展和更新、[EF 5.x DbContext Fluent Generator](http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c)） ![在此处输入图像描述](../Images/efa0a42303892d3c858306f2b01fdd8a.png)

*   模型对象和上下文是从 EDMX 复制的。
*   EDMX 被删除了他手下的任何东西。
*   将 ConnectionString 从困难的 EDMX 样式设置为简单的 codefirst 形式。
*   tadam，在大约 10 分钟内，我们从 Database First 转移到 Code First。在开发过程中，数据库中有 80 个表。

*   在电源管理控制台中运行 Enable-Migrations，然后继续使用 CodeFirst。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:03:16.473

将 EF 的不同“类型”（代码优先、数据库优先等）保存在单独的程序集中可能会有所帮助：EF 的一个限制[是它不可能在具有某些数据库优先属性的程序集中使用代码优先](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/b87815ff-6569-4559-8268-7ae6433b8aa8)- 虽然较新版本的 EF 可能会解决此问题（也许这就是 EF6 alpha 适合您的原因）。

# qt5 - Qt 5.0.1 中 QWidget 中的 GetDC() 函数

> ID：15268041
> 
> 赞同：8
> 
> 时间：2013-03-07T09:56:03.817
> 
> 标签：qt5

我将应用程序从 Qt 4.8 重写为 5.0.1，我遇到了大麻烦。在 Qt 5.0.1 版本中没有`GetDC()`函数（没有参数）。`GetDC(hwnd)`存在，但我没有`hwnd`。我应该怎么办？请帮忙。在谷歌上没有关于它的信息。

# c# - 可以“使用 ;" 指令在 .NET 中更高效？

> ID：15268045
> 
> 赞同：2
> 
> 时间：2013-03-07T09:56:19.523
> 
> 标签：c#, .net, namespaces, using, stylecop

当我在 C# 中创建一个新的类文件时，通常的结构如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace UnitTest
{
    class Class1
    {
    }
} 
```

StyleCop 不喜欢在命名空间之外使用 using 指令，所以理想情况下，我会重构我的代码：

```
namespace UnitTest
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    class Class1
    {
    }
} 
```

从我作为 Java 程序员的日子开始，我就被教导最好只导入必要的引用，而不是像这样导入整个包：

```
import foo.bar.MyObject; 
```

代替

```
import foo.bar.*; 
```

我知道这也可以在 C# 中完成，并具有可以为类型使用别名的附加功能（有时在使用本机代码时很有用）：

```
using StringBuilder = System.Text.StringBuilder; 
```

或使用别名时：

```
using HANDLE = System.IntPtr;
using HDC = System.IntPtr; 
```

所以我的问题是关于使用指令的最佳实践和效率：

1.  在命名空间内继续使用语句更有效，还是这纯粹是一种风格偏好？
2.  与整个命名空间相比，仅包含必要的项目是否更有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T09:58:28.430

1.  有[一些边缘情况](https://stackoverflow.com/questions/125319/should-usings-be-inside-or-outside-the-namespace)会有所不同，但对于大多数情况来说，这只是一种风格偏好。
2.  using 语句只是告诉编译器它可以在哪里找到类型。它对运行时没有影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T09:59:27.453

1.  不; 风格偏好，只要它不引入任何语义变化；它改变含义的情况非常罕见（尽管过去 LINQ-to-SQL 代码生成器存在一个错误，它*确实*关心您将它们放在哪里 - 现在已修复）
2.  不; 不使用未使用的指令，它们不会对编译器产生巨大影响

请注意，指令过多会导致歧义；例如有无数的类叫做`Timer`. 因此，保持整洁是值得的。

# annotations - 字节码注入发生在哪里？

> ID：15268057
> 
> 赞同：4
> 
> 时间：2013-03-07T09:56:56.167
> 
> 标签：annotations, classloader, bytecode, bytecode-manipulation

## 动机

我有一个`SomeObject.java`文件：

```
class SomeObject {
   String name;
} 
```

编译它会创建一个包含字节码的`SomeObject.class`文件。

```
0xCAFEBABE... 
```

如果我们在 JVM 上使用 SomeObject，它会被当前的类加载器加载并且一切正常。

现在让我们假设我想要一些动态代码生成。我可以编写我的自定义注释

```
@Target(ElementType.TYPE)
public @interface Data {
   ...
} 
```

并将其作为修饰符添加到类声明中：

```
@Data
class SomeObject {
   String name;
} 
```

我也可以在运行时保留它`@Retention(RetentionPolicy.RUNTIME)`：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Data {
   ...
} 
```

## 问题

用于字节码注入的注解在哪里？当使用适当的运行时保留注释加载类时，类加载器是否注入字节码，如下图所示：

```
source -(compile)-> bytecode -(classloader bytecode injection)-> injected bytecode -(classloading)-> JVM loaded bytecode 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:22:16.687

是的，可以让您的自定义类加载器加载一个类，并通过[Javassist](http://www.csg.is.titech.ac.jp/~chiba/javassist/)或[ASM](http://asm.ow2.org/)等字节码操作工具执行修改，而不是将类文件中的字节码加载到内存中，而是将修改后的字节码加载到内存中。尽管有更简单（我认为更好）的方法来做到这一点。

# 注释处理器工具 (APT)

从 Java 6 开始，您拥有[APT](http://docs.oracle.com/javase/7/docs/technotes/guides/apt/index.html)，它允许您连接到编译过程（通过`-processor` javac 中的参数）。使用 APT，您可以访问代码的 AST（抽象语法树），并且可以在使用[javax.lang.model](http://docs.oracle.com/javase/7/docs/api/javax/lang/model/package-summary.html)进行编译时直接进行修改。这意味着将生成您的类文件并进行所需的修改。

在这种情况下，链将类似于：

`source -(compile and performs modifications at model level)-> bytecode already modified - regular class loader -> loads class into memory`

# 编译后处理

另一种可以使用的方法是在编译后作为编译后过程执行字节码注入。在这种情况下，您使用字节码修改工具（同样是 javassist、asm 等），它可以在找到所需的注解时执行您需要的修改，并使用注入的字节码生成一个新的类文件。

在这种情况下，您的链条将是：

`source -compile -> bytecode -post-compile-> modified bytecode - regular class loader -> loads class into memory`

# 运行时修改

最后我们到达运行时字节码修改。尽管您的想法是可能的，但在我看来，我会保留类加载器的*魔力*并使用 Javassist 之类的工具，它还允许您拥有可以修改和[重新加载的](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/util/HotSwapper.html)[动态代理](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/util/proxy/package-summary.html)。

在 javassist 特定情况下，链将是

`source -compile -> bytecode -post-compile-> modified bytecode - regular class loader -> loaded into memory - javassist proxy -> modified class - javassist hot swapper -> re-modified class`

代理并不完美（当然没有什么是完美的）。您将受到性能影响，并且您将无法修改类的公共接口（旁注：APT 和后编译过程都允许您修改类公共接口）。我可以继续讨论这个问题，但我认为这已经足够让你深思了。如果您需要更多信息，请随时发表评论。

# mongodb - Mongo 查询子字段

> ID：15268063
> 
> 赞同：3
> 
> 时间：2013-03-07T09:57:17.907
> 
> 标签：mongodb

我有一份文件——

> ```
>  {"_id" : ObjectId("51385d2308d427ce306f0100"),
>   "aid" : "1",
>   "studyId" : "study-1",
>   "mediaType" : "microBlog",
>   "text" : "bla bla",
>   "sentences" : "bla bla",
>   "status" : {
>           "algo1" : "required",
>           "algo2" : "required",
>           "algo3" : "completed",
>           "algo4" : "completed"
>   },
>   "priority" : "u"} 
> ```

状态字段有多个具有不同状态值的子字段。是否可以创建一个查询，使其返回任何状态子字段的值为“必需”的所有文档？

类似这样的东西`db.foo.find({status : "required"})`会给我任何子字段具有“必需”价值的所有文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:51:15.850

另一种更有效的方法是将您的“状态”子文档实现为“类型值”数组，如下所示：

```
 {"_id" : ObjectId("51385d2308d427ce306f0100"),
  "aid" : "1",
  "studyId" : "study-1",
  "mediaType" : "microBlog",
  "text" : "bla bla",
  "sentences" : "bla bla",
  "status" : [
          { type: "algo1", value: "required" },
          { type: "algo2", value: "required" },
          { type: "algo3", value: "completed" },
          { type: "algo4", value: "completed" }
  ],
  "priority" : "u"} 
```

这将允许您使用以下查询查找所有子字段具有“必需”值的所有文档：

```
db.foo.find({"status.value":"required"}) 
```

在这个子字段上定义索引可以加快查询速度：

```
db.foo.ensureIndex({"status.value":1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:09:56.903

您可以通过`db.foo.find({ 'status.algo1' : 'required' })`or进行搜索`db.foo.find({ 'status.algo2' : 'required' })`，但可能无法通过 regex 进行过滤`keys`，另请参阅这篇文章：[https ://stackoverflow.com/a/7290728/654952](https://stackoverflow.com/a/7290728/654952)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:23:48.140

您可以使用[mapReduce()](http://docs.mongodb.org/manual/applications/map-reduce)其中 map() 函数将包含以下内容：

```
// loop all key/value pairs in status without knowing its key
for ( item in this.status ) {
    // if value is required: emit the data and break the loop
    if ( this.status[item] == "required" ) {
        emit( ... )
        break;
    }
} 
```

这有帮助吗？

干杯

罗纳德

# jms - 使用非 Sonic JMS 的 Progress V.10

> ID：15268064
> 
> 赞同：1
> 
> 时间：2013-03-07T09:57:18.890
> 
> 标签：jms, mq, progress-4gl, openedge

是否可以从 Progress V10（特别是：10.2B06）ABL 应用程序发送/接收 JMS 消息，还是*只能*与 Sonic 一起使用？

如果答案是肯定的，将非常感谢您提供指向文档的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:53:13.807

是的，你只需要找到一个支持 STOMP 协议的 JMS（如 RabbitMQ 或 ActiveMQ），然后在纯 ABL 中实现 STOMP 协议。这不是一个非常复杂的协议，所以有几种 ABL 解决方案（我什至在当天[写过一个](https://code.google.com/p/abl2stomp/)），但我认为最受欢迎和维护良好的可能是 Julian Lyndon Smith 的[这个](http://communities.progress.com/pcom/message/159354)，所以如果我是你我会和那个一起去的。

# ios - 符号化没有崩溃日志的 iOS 崩溃堆栈跟踪

> ID：15268071
> 
> 赞同：3
> 
> 时间：2013-03-07T09:58:04.577
> 
> 标签：ios, crash, stack-trace, symbolicate, bugsense

我正在使用 BugSense 来跟踪 iOS 应用程序的崩溃。最近我注意到在实时使用中表示堆栈跟踪的问题。

问题是 Apple 在 iOS 4.3 中引入了地址空间随机化，因此感兴趣的堆栈地址不能单独用于检索导致崩溃的正确方法。

目前我正在尝试通过计算来获得正确的地址

```
symbol address = slide + stack address - load address 
```

我已经有了幻灯片和堆栈地址，但据我了解，加载地址只能在我无法通过 BugSense 获得的崩溃报告中找到。堆栈跟踪看起来像

```
0 CoreFoundation 0x342723e7 + 162
1 libobjc.A.dylib 0x3bf63963 objc_exception_throw + 30
2 CoreFoundation 0x3427229d + 0
3 Foundation 0x34b48fa3 + 90
4 UIKit 0x360b5bd9 + 7640
5 MyApp 0x000c6e99 0xb3000 + 81561
6 UIKit 0x3623c2ff 0x3607e000 + 1827583
7 UIKit 0x361b8737 0x3607e000 + 1287991
8 UIKit 0x361a9869 0x3607e000 + 1226857
9 UIKit 0x361a97ad 0x3607e000 + 1226669
10 CoreFoundation 0x34247941 0x341b0000 + 620865
11 CoreFoundation 0x34245c39 0x341b0000 + 613433
12 CoreFoundation 0x34245f1d 0x341b0000 + 614173
13 CoreFoundation 0x341b923d CFRunLoopRunSpecific + 356
14 CoreFoundation 0x341b90c9 CFRunLoopRunInMode + 104
15 GraphicsServices 0x37d9733b GSEventRunModal + 74
16 UIKit 0x360d52b9 UIApplicationMain + 1120
17 MyApp 0x000b61bf 0xb3000 + 12735
18 MyApp 0x000b4a08 0xb3000 + 6664 
```

有没有另一种方法来象征这个地址或获得各自的加载地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:50:58.220

`load address`是`0xb3000`。_

幸运的是，您已经从应用程序二进制文件中删除了符号，否则这将不可见。

此外，由于抛出异常而发生此崩溃，因此崩溃报告应向您`Last Exception Backtrace`显示实际异常发生的位置和实际异常原因。发布的堆栈跟踪的第 5 行中的调用很可能不会为您提供很多关于此的信息。您获得的崩溃信息看起来非常有限:(

# javascript - 在角度测试/开发模块和生产模块之间切换

> ID：15268074
> 
> 赞同：4
> 
> 时间：2013-03-07T09:58:17.033
> 
> 标签：javascript, angularjs

我正在实施一个 Angular 应用程序。在 e2e 测试中，我想模拟一些对服务器的请求并通过一些，即我想使用[e2e httpBackend](http://docs.angularjs.org/api/ngMockE2E.%24httpBackend)。

这是如何使用 HttpBackend 的 Vijittas 示例。

```
` http://jsfiddle.net/vojtajina/DQHdk/ ` 
```

现在，这是一个难题：当我在测试时，我希望我的应用程序能够使用开发模块进行引导，即

```
<html ng-app="AppDevModule"> 
```

当我运行服务器时，我希望包含生产模块。

```
<html ng-app="AppCoreModule"> 
```

但是每当我想在开发模式和生产模式之间进行更改时，我认为更改 HTML 是不合理的。

[e2e httpBackend 的文档](http://docs.angularjs.org/api/ngMockE2E.%24httpBackend)

提供了包含开发模块的代码片段，但他们没有提到任何有关问题和包含开发应用程序的内容。

我正在使用有角睾丸。我尝试在 e2e 测试中像这样配置它：

```
describe("DHCP Client e2e. ", function () {

    beforeEach(function () {

        var fakeAppModule = angular.module('AppCoreModule', ['AppCoreModule', 'ngMockE2E']);

        fakeAppModule.run(function ($httpBackEnd) {

            var networkInterface = [
                {
                    'secondarySubnets':[
                        {"dhcpOfferOptions":{"dnsServers":["8.8.8.8"], "offerTime":"400", "leaseTime":"600"}, "rangesLimits":[],
                            "network":"192.168.0.0", "slash":"24", "gateway":"192.168.0.1",
                            "isDynamic":"dynamic", "description":"asdsadsa"}
                    ]
                },
                {
                    'secondarySubnets':[
                        {"dhcpOfferOptions":{"dnsServers":["8.8.8.8"], "offerTime":"400", "leaseTime":"600"}, "rangesLimits":[],
                            "network":"192.168.0.0", "slash":"24", "gateway":"192.168.0.1",
                            "isDynamic":"dynamic", "description":"asdsadsa"}
                    ]
                }
            ];

            $httpBackEnd.whenGET('/^\/view\//').respond(200, '<div></div>');
            $httpBackEnd.whenGET('/r/networkInterface').respond(200, networkInterface);
            $httpBackEnd.whenGET('./../main/webapp/r/networkInterface').respond(200, networkInterface);

        });

        fakeAppModule.config(function ($provide) {
            $provide.decorator('$httpBackend', angular.mock.e2e.$httpBackendDecorator);

        });
    }); 
```

但是，事情并没有像我预期的那样发展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:19:25.707

基于以下线程： [https](https://groups.google.com/forum/?fromgroups=#!topic/angular/3Xm7ZOmhNp0) ://groups.google.com/forum/?fromgroups=#!topic/angular/3Xm7ZOmhNp0 看起来**模拟后端在尚未实现真实后端时使用**。在这到位之后，建议使用真正的版本，因为维护两个版本可能会导致测试无法真正证明生产应用程序正常工作。

总而言之，应尽可能避免在测试和生产两个应用程序模块之间切换。

# api - 在自定义 Soundcloud 播放器上更改波形周围的遮罩颜色

> ID：15268079
> 
> 赞同：0
> 
> 时间：2013-03-07T09:58:28.977
> 
> 标签：api, soundcloud

在我开始之前，我不是开发人员，所以提前为任何可能愚蠢的问题道歉。我们的开发人员刚刚为我们的网站[http://www.samplephonics.com/](http://www.samplephonics.com/)集成了一个自定义 soundcloud 播放器（当您将鼠标悬停在前 8 个或最近的样本包上时查看），但我想将波形周围的浅灰色背景颜色更改为白色的。

据我所知，它的配置使浅灰色蒙版将波形的形状显示为一个孔，然后在后面有纯浅灰色、灰色和深灰色图像，以显示空闲、加载和玩州..

有谁知道我们如何将这个面具改成白色，或者有什么想法我可以发送给他？他将此示例用作创建播放器的起点：http: [//static.soundcloud.com/demos/soundcloud-custom-player/examples/sc-player-minimal.html](http://static.soundcloud.com/demos/soundcloud-custom-player/examples/sc-player-minimal.html)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:54:18.580

我以前在这里回答过这个问题——https: [//stackoverflow.com/a/14731623/236135](https://stackoverflow.com/a/14731623/236135)

> 除非您要用于波形自定义的库使用 HTML5 画布，否则您将无法使用更改该 chrome 的颜色（所以不，不可能使用 HTML5 Widget API 或 Custom Player API）

简而言之，您必须使用画布或操作服务器上的图像并从服务器检索它们。

# fancybox - 有多个 Fancybox 时仅关闭特定的 FancyBox

> ID：15268080
> 
> 赞同：1
> 
> 时间：2013-03-07T09:58:30.513
> 
> 标签：fancybox, setinterval, getjson, fancybox-2

在给定页面中，我有多个 Fancybox 项目实例，当单击链接时会显示视频。

除此之外，我还有一个函数每 5 秒运行一次，以从 URL 获取数据并根据返回值显示另一个幻想框。

问题是，由于 setInterval 函数始终运行，即使播放实际视频，它也会在我使用 $.fancybox.close() 时关闭该视频。

我想要的只是关闭 myModal 识别的 fanybox。

这是我使用的 jQuery。

```
$(document).ready(function() {           

    function myplugin() {             
         $.getJSON("get-status.php", function (data) {                        
             $.each(data, function (key, status) {   
                 if(status > 0) {
                    $("#myModal").fancybox().click();
                 }else{
                    $.fancybox.close(); // Works. But closes other open Fancybox if any
                    //$("#myModal").fancybox().close();    // Does not work
                 }
             });       
        });  
    };

    $(function() {
       setInterval(function() { myplugin() }, 5000);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:44:53.873

好吧，我不完全确定我是否理解了您的问题，但是由于很难知道`#myModal`当前是否在 fancybox 中打开（在 fancybox 函数本身之外），我将创建一个***标志***或***开关***，以便在 fancybox 中启用回调**IF** `#myModal`是当前打开的元素。

然后，`myplugin()`我将验证***开关***是否是`true`（`#myModal`是当前元素），如果是，则关闭fancybox。

脚本看起来像这样（未测试，因为我真的不知道做什么`myplugin()`）：

```
// declare a switch to set if #myModal is open in fancybox
var myModal = false;

$(document).ready(function () {
    function myplugin() {
        $.getJSON("get-status.php", function (data) {
            $.each(data, function (key, status) {
                if (status > 0) {
                    $("#myModal").fancybox({
                        // use a callback to set the switch = true
                        afterShow: function () {
                            $(this.element).attr("id") == "myModal" ? myModal = true : myModal = false;
                        }
                    }).click();
                } else {
                    // close fancybox if myModal == true
                    if (myModal) {
                        $.fancybox().close();
                        myModal = false; // reset switch ?
                    }
                }
            });
        });
    };
    // you don't need $(function(){ }); since you have declaread .ready() above
    setInterval(function () {
        myplugin()
    }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:43:30.157

我在下面尝试了这个，它奏效了。

```
$("#myModal").parents("div .fancybox-skin").hide(); 
```

如果有其他更好的方法可以做到这一点，请提出建议。

# asp.net - 我应该如何解析 Request.GetBufferlessInputStream()

> ID：15268085
> 
> 赞同：3
> 
> 时间：2013-03-07T09:58:43.647
> 
> 标签：asp.net, asp.net-mvc

我正在为 ASP.NET 开发一个上传控件，我需要使用 Request.GetBufferlessInputStream()

这将返回原始未处理的请求流。是否有一种内置方法来解析此流的内容，去除标题，例如我在下面复制的示例。

如果不是，解析文件的最佳方法是什么？

```
-----------------------------13166267887793
Content-Disposition: form-data; name="uploadFile"; filename="ABigFile.txt"
Content-Type: text/plain 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:59:36.683

解决方案来自于检查它在 System.Web 中是如何完成的，并适应我的需要。核心功能位于一个名为 HttpMultipartContentTemplateParser 的内部类中。处理输入流的系统写在这里：

[http://blog.appsoftware.com/2014/03/aspnet-file-uploader-with-signalr.html](http://blog.appsoftware.com/2014/03/aspnet-file-uploader-with-signalr.html)

# c - printf 格式浮动带填充

> ID：15268088
> 
> 赞同：38
> 
> 时间：2013-03-07T09:58:53.140
> 
> 标签：c, floating-point, floating-point-conversion

即使我使用了宽度参数，以下测试代码也会产生不希望的输出：

```
int main(int , char* [])
{
    float test = 1234.5f;
    float test2 = 14.5f;

    printf("ABC %5.1f DEF\n", test);
    printf("ABC %5.1f DEF\n", test2);

    return 0;
} 
```

**输出**

```
ABC 1234.5 DEF   
ABC  14.5 DEF 
```

* * *

如何实现这样的输出，使用哪种格式字符串？

```
ABC 1234.5 DEF   
ABC   14.5 DEF 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-07T10:01:02.750

以下应正确排列所有内容：

```
printf("ABC %6.1f DEF\n", test);
printf("ABC %6.1f DEF\n", test2); 
```

当我运行它时，我得到：

```
ABC 1234.5 DEF
ABC   14.5 DEF 
```

问题在于，在 中`%5.1f`，`5`是为整个数字分配的字符数，并且`1234.5`需要超过五个字符。这会导致与 不对齐`14.5`，它确实适合五个字符。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-07T10:01:38.637

You're trying to print something wider than 5 characters, so make your length specifier larger:

```
printf("ABC %6.1f DEF\n", test);
printf("ABC %6.1f DEF\n", test2); 
```

The first value is not "digits before the point", but "total length".

# ruby-on-rails-3 - ruby on rails 中未初始化的常量错误

> ID：15268092
> 
> 赞同：1
> 
> 时间：2013-03-07T09:59:06.963
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在使用 ruby​​ on rails 从远程服务器机器（SQL SERVER）获取现有的数据库表。实际上我不知道该怎么做。我按照这种方式进行操作。请纠正我

我的问题是在捆绑运行时`uninitialized constant TrDeviceDetailsController::TRDeviceDetail`得到。

我在`database.yml`文件中设置了以下内容。

```
development:
   adapter: sqlserver
   mode: odbc
   database: BObd
   dsn: newdb_64
   username: ush
   password: Ushu
   host: ws1a20\SQLEXPRESS 
```

数据库中存在的表`BOdb`是 `TRDeviceDetails`。我使用命令创建了模型和控制器

```
 rails generate model `TRDeviceDetail`
rails generate controller `TRDeviceDetails` 
```

在控制器中我放了以下内容

```
class TrDeviceDetailsController < ApplicationController
  def show
        @devices = TRDeviceDetail.find(:all)
  end
end 
```

模型文件

```
 class TrDeviceDetail < ActiveRecord::Base
      # attr_accessible :title, :body
        attr_accessible :UniqueDeviceID
    end 
```

`UniqueDeviceID`表中的现有列在哪里，`TrDeviceDetails` 并创建了一个 show.html.erb 文件来显示 UniqueDeviceID

```
<h1>TrDeviceDetails#show</h1>
<p>Find me in app/views/tr_device_details/show.html.erb</p>
<%@device.inspect%> 
```

我需要的是，从远程机器获取现有表。怎么可能以及为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:03:54.817

你应该使用

```
@devices = TrDeviceDetail.find(:all) # small 'r' 
```

因为生成的类是

```
class TrDeviceDetail < ActiveRecord::Base 
```

更新：

如果表名不符合约定，则应显式设置 table_name

```
class TrDeviceDetail < ActiveRecord::Base
  set_table_name 'TRDeviceDetails'
end 
```

# php - Composer 无法下载文件

> ID：15268093
> 
> 赞同：16
> 
> 时间：2013-03-07T09:59:07.453
> 
> 标签：php, composer-php

我正在尝试在命令行上使用作曲家：

```
php composer.phar update
php composer.phar install
php composer.phar self-update
php composer.phar selfupdate 
```

无论我做什么，我总是收到相同的错误消息：

> 无法下载文件。无法打开流

**我在代理后面**。如果我使用浏览器并键入与不能使用命令行的 URL 相同的 URL，则没有问题。

我该怎么办？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T10:16:15.503

如果您在 HTTP 代理后面使用 composer，您可以使用标准`http_proxy`或`HTTP_PROXY`环境变量。只需将其设置为代理的 URL。许多操作系统已经为您设置了这个变量。

例如：

```
 HTTP_PROXY="http://my-corp-proxy.mcdonalds" php composer.phar install 
```

如果您在 Linux/OS X 或 Windows 环境设置中将其放入 bashrc 中，则可获得奖励积分。

为了更容易，您可以只导出变量，然后您不必一直键入它。

```
 export HTTP_PROXY="http://my-corp-proxy.mcdonalds"
 php composer.phar install 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-13T06:19:53.677

在代理下在 Windows 上运行 composer 的一种简单方法是打开控制台 (cmd)，转到您的项目位置并运行以下命令：

```
C:\wamp\htdocs\myproject\> SET HTTP_PROXY=http://username:password@proxy.yourdomain.com:8080 && php composer.phar install 
```

PD：您必须将以下参数更改为您的用户名、密码、proxy.yourdomain.com 和 8080

我希望这对你有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-26T18:11:08.913

并且不要设置`https_proxy`（只是`http_proxy`）！

# objective-c - 填充内存泄漏 iPhone

> ID：15268098
> 
> 赞同：0
> 
> 时间：2013-03-07T09:59:28.997
> 
> 标签：objective-c, c, core-graphics, flood-fill

我正在`floodfill`为 iPhone 用 C 语言实现一个函数。

填充工作，虽然我有 2 个问题。

1.  执行以下代码几次后，手机会发出内存警告。很可能是内存泄漏。另请注意，**unsigned char *data** *（图像数据）在填充结束时被释放（）。*

2.  （较小的问题）如果我尝试将**RGB**颜色写入大于大约**(r:200,g:200,b:200,a:200)**的像素，我会发生奇怪的伪影。一种解决方法是简单地限制这些值。

我怀疑这两个问题之间可能存在相关性。

下面的代码描述了我的洪水填充算法，使用堆栈：

**。H：**

```
typedef struct {
    int red;
    int green;
    int blue;
    int alpha;
} GUIColor;

struct pixel_st {
    int x;
    int y;
    struct pixel_st *nextPixel;
};
typedef struct pixel_st pixel; 
```

**米：**

```
 void floodFill(CGPoint location, GUIColor tc, GUIColor rc, size_t width, size_t height, unsigned char *data){
    if (isGUIColorEqual(tc, rc)) return;

    pixel* aPixel = (pixel *) malloc(sizeof (struct pixel_st));
    NSLog(@"sizeof aPixel : %i",(int)sizeof(aPixel));

    (*aPixel).x = location.x;
    (*aPixel).y = location.y;
    (*aPixel).nextPixel = NULL;

    int i = 0;

    NSLog(@"Replacement color A%i, R%i, G%i, B%i",rc.alpha,rc.red,rc.green, rc.blue);

    while (aPixel != NULL){
        pixel *oldPixel_p = aPixel;
        pixel currentPixel = *aPixel;
        aPixel = currentPixel.nextPixel;

        //Now we do some boundary checks
        if (!isOutOfBounds(currentPixel.x, currentPixel.y, width, height)){
            //Grab the current Pixel color
            GUIColor currentColor = getGUIColorFromPixelAtLocation(CGPointMake(currentPixel.x, currentPixel.y), width, height, data);

            if (isGUIColorSimilar(currentColor, tc)){
                //Colors are similar, lets continue the spread
                setGUIColorToPixelAtLocation(CGPointMake(currentPixel.x, currentPixel.y), rc, width,height, data);

                pixel *newPixel;

                if ((newPixel = (pixel*) malloc(sizeof(struct pixel_st))) != NULL) {
                    (*newPixel).x = currentPixel.x;
                    (*newPixel).y = currentPixel.y-1;
                    (*newPixel).nextPixel = aPixel;
                    aPixel = newPixel;

                }
                if ((newPixel = (pixel*) malloc(sizeof(struct pixel_st))) != NULL) {
                    (*newPixel).x = currentPixel.x;
                    (*newPixel).y = currentPixel.y+1;
                    (*newPixel).nextPixel = aPixel;
                    aPixel = newPixel;
                }
                if ((newPixel = (pixel*) malloc(sizeof(struct pixel_st))) != NULL) {
                    (*newPixel).x = currentPixel.x+1;
                    (*newPixel).y = currentPixel.y;
                    (*newPixel).nextPixel = aPixel;
                    aPixel = newPixel;
                }
                if ((newPixel = (pixel*) malloc(sizeof(struct pixel_st))) != NULL) {
                    (*newPixel).x = currentPixel.x-1;
                    (*newPixel).y = currentPixel.y;
                    (*newPixel).nextPixel = aPixel;
                    aPixel = newPixel;
                }
                free(oldPixel_p);
                i ++;
                if (i == width * height * 4 * 5) break;

            }

        }
    }

    free(aPixel);
} 
```

堆栈的此实现基于`ObjFloodFill`此处找到：

[https://github.com/OgreSwamp/ObjFloodFill/blob/master/src/FloodFill.m](https://github.com/OgreSwamp/ObjFloodFill/blob/master/src/FloodFill.m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:20:37.900

首先，`if ((newPixel = (pixel*) malloc(...`循环内部的每个都分配新的内存块，因此，循环内部有**4 个**分配，只有**1 个**释放。

其次，我不明白你为什么不简单地使用堆栈上的对象？你真的需要在**堆上分配***newPixel*、*oldPixel*等吗？查看实现，可能有更简单的方法来实现同样的，而且根本不需要管理内存问题。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:31:18.590

您需要将释放移到块`oldPixel_p` 之外`if`，因为它总是“消耗”的。

此外，final`free`仅释放列表中的第一个元素。该列表可能包含多个元素。您需要遍历列表并释放所有剩余元素。**

# ruby-on-rails - RoR：多级嵌套保存

> ID：15268100
> 
> 赞同：0
> 
> 时间：2013-03-07T09:59:32.423
> 
> 标签：ruby-on-rails, postgresql, foreign-key-relationship, nested-attributes

在 Ruby on rails 中，我尝试将数据保存在具有很多关系的多个表中。

我的模型看起来：

**证据.rb：**

```
class Evid < ActiveRecord::Base
    attr_accessible :kod, :nazov, :okruh_id, :bank_ucets_attributes, :poc_stavs_attributes
    #attr_accessible :ciselny_rads_attributes

    has_many :ciselny_rads
    has_many :bank_ucets, :foreign_key => :evidencia_id
    has_many :poc_stavs, :foreign_key => :evidencia_id

    accepts_nested_attributes_for :poc_stavs, :allow_destroy => true
    accepts_nested_attributes_for :bank_ucets, :allow_destroy => true
    #accepts_nested_attributes_for :ciselny_rads, :allow_destroy => true
end 
```

**bank_ucet.rb**

```
class BankUcet < ActiveRecord::Base
  attr_accessible :ciselny_rad_id, :evidencia_id
  attr_accessible :ciselny_rad_attributes

  belongs_to :ciselny_rad
  belongs_to :evid, :foreign_key => "evidencia_id"

  accepts_nested_attributes_for :ciselny_rad, :allow_destroy => true

end 
```

**ciselny_rad.rb**

```
class CiselnyRad < ActiveRecord::Base
    attr_accessible :evidencia_id, :kod, :nazov, :ciselny_rad_cislos_attributes

    belongs_to :evid, :foreign_key => "evidencia_id"
    has_many :ciselny_rad_cislos, :dependent => :delete_all

    accepts_nested_attributes_for :ciselny_rad_cislos, :allow_destroy => true
end 
```

**poc_stav.rb**

```
class PocStav < ActiveRecord::Base
    attr_accessible :evidencia_id, :hosp_roky_id, :poc_stav

    belongs_to :evid, :foreign_key => :evidencia_id
end 
```

我正在尝试保存数据

```
@bank_ucet = Evid.create(data)

data={
    "kod": "XX",
    "nazov": "XxxXxUxXxxX",
    "okruh_id": 5,
    "bank_ucets_attributes": [
        {
            "cis_banka_id": 1,
            "cislo_uctu": 999999,
            "cis_mena_id": 1,
            "ciselny_rad_attributes": {
                "kod": "XX",
                "nazov": "XxxXxUxXxxX"
            }
        }
    ],
    "poc_stavs_attributes": [
        {
            "hosp_roky_id": null,
            "poc_stav": 1000
        }
    ]
} 
```

一切都很好，但唯一的问题是，表 ciselny_rad 中的 evidencia_id 填充了 null，而不是新创建的 evid。

你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:43:18.230

尝试类似：

```
has_many :bank_ucets, :foreign_key => :evidencia_id, :inverse_of => :evid 
```

在你的`Evid`课堂上，并且：

```
belongs_to :evid, :foreign_key => "evidencia_id", :inverse_of => :bank_ucets 
```

在你的`BankUcet`课上。

（编辑）推理：根据我使用嵌套属性的经验，`inverse_of`在这个地方和周围扔东西通常可以解决任何问题。

# php - 如何使用 PHP 更新静态 HTML 文件

> ID：15268101
> 
> 赞同：1
> 
> 时间：2013-03-07T09:59:37.843
> 
> 标签：php, html

我们在“音乐”文件夹中有 700 个静态 HTML 文件。我们想把分析代码放在 HTML 文件的末尾.. 像以前一样

```
</body> </html> 
```

标签。

请任何人告诉我，PHP代码怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:05:20.237

太容易了。查找所有文件、读取内容、修改内容、保存内容。

```
<?php

// open directory
if($handle = opendir(__DIR__)) {
    // search for
    $search = '</body>';

    // replace with (</body> gets appended later in the script)
    $replace = <<< EOF

<!-- your analytics code here -->

EOF;

    // loop through entries
    while(false !== ($entry = readdir($handle))) {
        if(is_dir($entry)) continue; // ignore entry if it's an directory

        $content = file_get_contents($entry); // open file
        $content = str_replace($search, $replace . '</body>', $content); // modify contents
        file_put_contents($entry, $content); // save file
    }
}

echo 'done';

?> 
```

# php - 从 mysql 显示带有分页的图像

> ID：15268103
> 
> 赞同：1
> 
> 时间：2013-03-07T09:59:45.480
> 
> 标签：php, mysql, pagination

我有一个 php 页面来显示来自 mysql 数据库的图像。它一个接一个地显示在 1 页中上传的所有图像。如何通过分页显示每页 5 或 6 张图像？

这是我的php页面。

```
<?Php

    include("init.php"); 
    include("template/header.php");

    ?>
    <div class="view_albums"><h3> View Albums </h3>;
    <?php

    $album_id = $_GET['album_id'];
    $images = get_images($album_id);

    if (empty($images)) {
        echo 'There are no images ';

    } else {

        foreach ($images as $image) {
            ?> <div class="box">  <?php
            echo '<a href="uploads/', $image['album'], '/', $image['id'], '.', $image['ext'],'"> <img class="box1" src="uploads/thumbs/', $image['album'], '/', $image['id'], '.', $image['ext'], '"  title="Uploaded on ', date('l F j, Y \a\t g:i A',$image['timestamp']),'"></a> [<a href="delete_image.php?image_id=">delete</a>]';
            ?>  <?php

        }
    }
    ?>
    </div>
    </div>
    <?php
    include("template/footer.php");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:06:30.103

尝试使用下面的分页功能

```
function genPagination($total,$currentPage,$baseLink,$nextPrev=true,$limit=10) 
{ 
if(!$total OR !$currentPage OR !$baseLink) 
{ 
    return false; 
} 

//Total Number of pages 
$totalPages = ceil($total/$limit); 

//Text to use after number of pages 
$txtPagesAfter = ($totalPages==1)? " page": " pages"; 

//Start off the list. 
$txtPageList = '<br />'.$totalPages.$txtPagesAfter.' : <br />'; 

//Show only 3 pages before current page(so that we don't have too many pages) 
$min = ($page - 3 < $totalPages && $currentPage-3 > 0) ? $currentPage-3 : 1; 

//Show only 3 pages after current page(so that we don't have too many pages) 
$max = ($page + 3 > $totalPages) ? $totalPages : $currentPage+3; 

//Variable for the actual page links 
$pageLinks = ""; 

//Loop to generate the page links 
for($i=$min;$i<=$max;$i++) 
{ 
    if($currentPage==$i) 
    { 
        //Current Page 
        $pageLinks .= '<b class="selected">'.$i.'</b>'; 
    } 
    else 
    { 
        $pageLinks .= '<a href="'.$baseLink.$i.'" class="page">'.$i.'</a>'; 
    } 
} 

if($nextPrev) 
{ 
    //Next and previous links 
    $next = ($currentPage + 1 > $totalPages) ? false : '<a href="'.$baseLink.($currentPage + 1).'">Next</a>'; 

    $prev = ($currentPage - 1 <= 0 ) ? false : '<a href="'.$baseLink.($currentPage - 1).'">Previous</a>'; 
} 

return $txtPageList.$prev.$pageLinks.$next; 

} 
```

认为它会帮助你

# c++ - 'void' 编译器之前的预期主表达式：TDM-GCC 4.6.1 64 位

> ID：15268105
> 
> 赞同：0
> 
> 时间：2013-03-07T09:59:47.153
> 
> 标签：c++, compiler-errors, void

如何在“无效”编译器之前修复 [错误] 预期的主表达式：此代码上的 TDM-GCC 4.6.1 64 位

```
#include <iostream>
#include <pthread.h>
#include <stdlib.h>

using namespace std;

#define NUM_THREADS     5

int main ()
{
pthread_t threads[NUM_THREADS];
int rc;
int i;
for( i=0; i < NUM_THREADS; i++ ){
  cout << "main() : creating thread, " << i << endl;
 **rc = pthread_create(&threads[i], NULL, void * (*threadid *PrintHello));**
  if (rc){
     cout << "Error:unable to create thread," << rc << endl;
     exit(-1);
  }
 }
pthread_exit(NULL);
}

void *PrintHello(void *threadid)
{
intptr_t tid;
  tid = (intptr_t) threadid;
   cout << "Hello World! Thread ID, " << tid << endl;
  pthread_exit(NULL);

  } 
```

我该如何解决这个错误，欢迎任何帮助提前谢谢！

编辑！这是确切的编译器投诉

```
Compiler: TDM-GCC 4.6.1 64-bit
Executing  g++.exe...
g++.exe "C:\Users\Thomas\Documents\c++\stuff\threads.cpp" -o       "C:\Users\Thomas\Documents\c++\stuff\threads.exe"  -march=pentium2 -mtune=pentium2 -msse2 -   O2 -m32 -std=gnu++98 -pg -g3  -I"C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-   mingw32\include"  -L"C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib" -static-libgcc -m32 -pg -g3
C:\Users\Thomas\Documents\c++\stuff\threads.cpp: In function 'int main()':
C:\Users\Thomas\Documents\c++\stuff\threads.cpp:16:45: error: expected primary-expression before 'void'

Execution terminated

[Error] expected primary-expression before 'void' 
```

再次编辑添加了完整错误，错误在这一行

rc = pthread_create(&threads[i], NULL, void * (*threadid *PrintHello));

```
16 45 C:\Users\Thomas\Documents\c++\stuff\threads.cpp [Error] expected primary-expression before 'void' 
```

编辑 3

感谢 paul R 在进行更改后提供了部分解决方案，我得到了这个

```
Compiler: TDM-GCC 4.6.1 64-bit
Executing  g++.exe...
g++.exe "C:\Users\Thomas\Documents\c++\stuff\threads.cpp" -o "C:\Users\Thomas\Documents\c++\stuff\threads.exe"  -march=pentium2 -mtune=pentium2 -msse2 -O2 -m32 -std=gnu++98 -pg -g3  -I"C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\include"  -L"C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib" -static-libgcc -m32 -pg -g3
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmingw32.a when searching for -lmingw32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmingw32.a when searching for -lmingw32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmoldname.a when searching for -lmoldname
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmoldname.a when searching for -lmoldname
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmingwex.a when searching for -lmingwex
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmingwex.a when searching for -lmingwex
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmsvcrt.a when searching for -lmsvcrt
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmsvcrt.a when searching for -lmsvcrt
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libgmon.a when searching for -lgmon
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libgmon.a when searching for -lgmon
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libadvapi32.a when searching for -ladvapi32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libadvapi32.a when searching for -ladvapi32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libshell32.a when searching for -lshell32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libshell32.a when searching for -lshell32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libuser32.a when searching for -luser32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libuser32.a when searching for -luser32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libkernel32.a when searching for -lkernel32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libkernel32.a when searching for -lkernel32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmingw32.a when searching for -lmingw32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmingw32.a when searching for -lmingw32
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmoldname.a when searching for -lmoldname
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmoldname.a when searching for -lmoldname
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmingwex.a when searching for -lmingwex
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmingwex.a when searching for -lmingwex
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib/libmsvcrt.a when searching for -lmsvcrt
c:/program files (x86)/dev-cpp/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib\libmsvcrt.a when searching for -lmsvcrt
C:\Users\Thomas\AppData\Local\Temp\ccZIOBl3.o: In function `Z10PrintHelloPv':
C:/Users/Thomas/Documents/c++/stuff/threads.cpp:31: undefined reference to `_imp__pthread_exit'
C:\Users\Thomas\AppData\Local\Temp\ccZIOBl3.o: In function `main':
C:/Users/Thomas/Documents/c++/stuff/threads.cpp:17: undefined reference to `_imp__pthread_create'
C:/Users/Thomas/Documents/c++/stuff/threads.cpp:23: undefined reference to `_imp__pthread_exit'
collect2: ld returned 1 exit status

Execution terminated 
```

任何其他想法将不胜感激，再次提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:04:12.297

改变：

```
rc = pthread_create(&threads[i], NULL, void * (*threadid *PrintHello)); 
```

到：

```
rc = pthread_create(&threads[i], NULL, PrintHello, NULL); 
```

您还应该为`PrintHello`之前添加一个原型`main`：

```
void *PrintHello(void *threadid); 
```

# bash - 按排序顺序列出文件名 - ls 命令

> ID：15268108
> 
> 赞同：0
> 
> 时间：2013-03-07T10:00:00.303
> 
> 标签：bash, shell, unix, sorting, ls

我在 UNIX 目录中有一些文件：

```
/opt/apps/testloc $ ls -mn 
test_1.txt
test_2.txt
test_11.txt
test_12.txt
test_3.txt 
```

我想用`ls`命令列出这个，我需要根据文件名末尾的数字按排序顺序输出。说输出应该如下所示。

```
test_1.txt, test_2.txt, test_3.txt, test_11.txt, test_12.txt 
```

我无法如前所述。这些文件名被视为文本，它们的排序如下，

```
test_11.txt, test_12.txt, test_1.txt, test_2.txt, test_3.txt 
```

我的命令`ls –mn`（我需要以逗号分隔的格式输出，所以我使用过`-m`）

我需要这样做以在我的下一个过程中以增量格式处理文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:03:31.463

如果您的版本`sort`可以使用`version sort`，`-V`则：

```
$ ls | sort -V | awk '{str=str$0", "}END{sub(/, $/,"",str);print str}'
test_1.txt, test_2.txt, test_3.txt, test_11.txt, test_12.txt 
```

如果不这样做：

```
$ ls | sort -t_ -nk2,2 | awk '{str=str$0","}END{sub(/,$/,"",str);print str}'
test_1.txt, test_2.txt, test_3.txt, test_11.txt, test_12.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:56:13.963

您要求输出采用特定格式告诉我您[不应该使用 ls](http://mywiki.wooledge.org/ParsingLs)。由于不需要递归结果，因此请使用 glob。

```
# Bash or ksh + GNU or other sort that handles NUL delimiters

function sortFiles {
    [[ -e $1 ]] || return 1
    typeset a x
    for x; do
        printf '%s %s\0' "${x//[^[:digit:]]}" "$x"
    done |
    LC_ALL=C sort -nz - | {
        while IFS= read -rd '' x; do
            a+=("${x#* }")
        done
        typeset IFS=,
        printf '%s\n' "${a[*]}"
    }
}

sortFiles * 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T16:00:20.747

如果所有文件名只包含一个`_`字符，后跟一个数值，这个相对简单的脚本将按数字字段对文件名进行排序，并将它们输出到一个`,[space]`单独的列表中（就像`ls -m`这样）：

```
ls -1 *_* | sort -t_ -n -k2 | sed ':0 N;s/\n/, /;t0' 
```

但是，如果文件名中有多个`_`字符，并且您希望按最后一个数字字段对它们进行排序（在文件名中不一定相同，例如`test_1_3.txt`和`test_2.txt`），则需要更复杂的脚本：

```
ls -1 *_* |
awk -F '_' '
{
  key[gensub(/\..*$/, "", 1, $NF) "a" NR] = NR;
  name[NR] = $0;
}
END {
  len = asorti(key, keysorted, "@ind_num_asc");
  for (i = 1; i < len; i++) {
    printf "%s, ", name[key[keysorted[i] ] ];
  }
  printf "%s\n", name[key[keysorted[len] ] ];
}' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T10:18:47.217

ls -al | sort +4n ：按文件大小的升序列出文件。即按第 5 个字段排序并首先显示最小的文件。

# git - SVN 商店中的 Git 用户，组织我们的存储库

> ID：15268111
> 
> 赞同：9
> 
> 时间：2013-03-04T21:09:04.037
> 
> 标签：git, git-svn

我在一家 SVN 商店工作，但为了在我的工作中注入一点理智，我使用了 git-svn。越来越多的同事也看到了曙光，现在我们希望在某些情况下完全避开 SVN。目前我们每个人都有自己的 git-svn 存储库，但由于哈希值差异很大，除了普通补丁或通过 SVN 之外，我们无法真正共享任何内容。我们应该如何组织我们的存储库以允许直接共享（通过 git-remote）？

我能想出的唯一方法是一个共享的 git-svn 存储库，我们将其用作 SVN 的网关，但这可能会有点麻烦——如果我们都使用它会更好可以直接从我们自己的 git-svn repos 推送到 SVN。

**编辑：**不幸的是，我没有对 SVN 服务器的管理员访问权限，所以像*subgit*这样的解决方案目前用处不大，即使它们很有趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:05:40.313

你可以看看[subgit](http://subgit.com/)：

> SubGit 是一个平滑、无压力的 Svn 到 Git 迁移的工具。在服务器端安装一次，然后根据需要同时使用 Subversion 和 Git。
> 
> SubGit 允许设置双向 Subversion 到 Git 复制（可写镜像）。

和：

> SubGit 是从 Svn 到 Git 的公司范围内迁移的解决方案，它是：
> 
> ```
> Much better than git-svn (see comparison);
> Requires no changes of the infrastructure that is already in place;
> Allows one to use all Git and all Subversion features;
> Provides genuine stress-free migration experience. 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:14:45.207

> 如果我们都可以直接从我们自己的 git-svn 存储库推送到 SVN，那就更好了。

不是什么`git svn dcommit`命令的用途吗？

用于`git svn rebase`将您的 git clone 重新定位到中央 svn 存储库，然后`git svn dcommit`将您的本地提交推送到 svn。

我每天都使用 git svn 和[GCC git 镜像](http://gcc.gnu.org/wiki/GitMirror#Commit_upstream_.28git-svn.29)，它工作得很好。也许那是因为有一个中央只读镜像，它会从 svn 提交中自动更新，所以每个使用 git-svn 的人都会从 git 镜像和相同的提交 ID 中看到相同的历史记录。这允许从只读镜像中获取和合并，然后只是到 git svn rebase 和 git svn dcommit 以将更改推送到 svn repo。然后，这些更改会同步到只读镜像，并由其他所有人以相同的 ID 获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:33:09.247

两个不同版本控制系统之间的双向网关比 git 早了很多年。大约 10 年前，我已经在 CVS 和 Arch 之间进行了手工操作。如果您不想购买 subgit，您可以手动维护网关，甚至尝试编写脚本。工作流程很简单：

*   有两个分支，`trunk`和`master`。`trunk`镜像颠覆，`master`是加上在 git 中开发的更改
*   每当颠覆有新变化时：
    1.  `$ git svn fetch`
    2.  `master$ git merge trunk`
*   每当推送树干时：
    1.  `trunk$ git merge master`
    2.  `trunk$ git svn dcommit`
    3.  `master$ git merge trunk`
*   您应该原子地执行这两个序列，即一次只执行一个操作。
*   您可以考虑设置 git-svn 以便它不会*使用*颠覆修订信息重写提交，以减少 git 中合并提交的数量。
*   它可以为多个分支完成，但我认为在 git 中合并单独的颠覆分支是行不通的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T10:39:18.337

我们处于完全相同的情况。我们所拥有的是（警告，一些伪代码！）：

*   远程 git repo，脚本化（使用 bash 脚本），不能是 --bare
*   一个 pre-receive 钩子检查用户名，然后每个收到的 ref 和所有 SVN 映射的分支：（git -> svn）：

    *   `git checkout -f <branch>`
    *   `git reset HEAD --hard`
    *   `git clean -fdx`
    *   `git merge -n $newrev`
    *   `git svn dcommit`
    *   如果失败，则全部还原，

    *   然后，在所有循环之后 - 更新所有 SVN 分支（使用脚本，见下文）

*   使用最新的 svn 更改（svn -> git）更新 git-svn 分支的 cronjob：

    *   `git checkout --orphan svn-update <random-branch-name>`
    *   `git svn fetch --all`
    *   对于所有 git-svn 分支：`git branch -D <branch> && git branch --track <svn-branch> refs/remotes/<svn-branch>`,
*   用于 git 身份验证的 ssh 密钥

*   用户管理的 SVN 身份验证（基于 git 用户名，这取决于您的设置）

这样，没有人直接使用 SVN，与纯 git 的唯一区别是您无法更改 git-svn 分支历史记录（因为 SVN 不会让您提交）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T16:53:43.193

我处于类似的设置中，这是一个对我和我一起工作的人有用的过程：

1.  `git svn clone`一个人使用和朋友创建了一个 Git 存储库。

2.  其他人使用常规 Git 命令克隆第一个 Git 存储库，然后复制`svn-remote.{name}`第一个存储库的`.git/config`. 在 中的示例中有执行此操作的说明`git help svn`。

现在，每个人都有一个`git-svn`可用于与 Subversion 存储库交互的设置。

更重要的是，每个人都有一个`git-svn`具有相同分支和提交历史的设置，这意味着他们`git svn fetch`和朋友创建的提交将是相同*的，包括哈希值*。此时，除了推送和拉取 Subversion 存储库之外，您还可以在自己之间使用 Git 的所有更高级的分布式功能。

与常规 Git 不同，你需要小心共享配置——如果你的分支结构不同，你的哈希也会不同。有时事情会出错并需要修复（我曾经有两个`git svn fetch`es 同时进行，这以一种微妙的方式破坏了彼此的工作；我不得不回溯我的历史`git svn reset`并重新获取以保持我的哈希与其他人的匹配）。但这是将这两种工具混合在一起的限制。

# sql - 无法在 oracle 表中插入 mail@id

> ID：15268112
> 
> 赞同：0
> 
> 时间：2013-03-07T10:00:16.330
> 
> 标签：sql, oracle, putty

我无法在 oracle 9i 表中插入电子邮件 ID。我正在使用腻子。

`INSERT INTO email(mail_list)values('sundar@abc.com');`

我收到以下错误： SQL> INSERT INTO email(mail_list)values('sundar@abc.com'); `SP2-0042: unknown command "abc.com')" - rest of line ignored.`

腻子不接受`@`符号。

我在其中一个门户网站中阅读了以下内容：

`The problem is common with unix environment with the display terminal keyboard settings. The sqlplus session had trouble interpreting the "@" sign, because it was assigned in the terminal to the "kill" setting.`

如何纠正这个问题？

谢谢

桑达尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:49:47.857

尝试插入而不必使用 @ 字符。找出ascii值：

```
SQL>select ascii('@') from dual;
64 
```

然后使用 CHR 功能编写电子邮件地址。

```
INSERT INTO email(mail_list)values('sundar'||chr(64)||'abc.com'); 
```

（我不了解 Putty，所以我使用了我的 SQL 知识）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-06-10T18:15:51.377

在 SQL Server 中尝试以下语句：

```
INSERT INTO tablename(email) VALUES('xyz@gmail.com') 
```

# mysql - Mysql：没有主键的分区

> ID：15268116
> 
> 赞同：3
> 
> 时间：2013-03-07T10:00:21.430
> 
> 标签：mysql, partitioning

我有下表包含大量数据，这就是我要拆分或分区的原因。问题是我想按一个没有主键的列进行分区：project_id。在我的情况下，将有 MAXIMUM 2 或 3 个不同的项目 ID...

```
- id (PRIMARY KEY, AUTO INCREMENT)
- project_id (INT)
- username (UNIQUE)
- username_md5 (UNIQUE)
(- ... more but irrelevant columns) 
```

如您所见，我需要保证 3 列是唯一的（id、username、username_md5）。现在，我想对 project_id 列进行 RANGE 分区。我想出的唯一解决方案是为所有这些列制作一个丑陋的 4 列 PRIMARY KEY（分区要求分区表达式中的所有列都必须是每个唯一键的一部分）。

现在，我想知道

A) 4 列的主键是否很好并且可用？

B）我的分区有更好的解决方案吗？

C）否则我会通过为我拥有的每个 project_id 创建一个“动态”表来手动完成，这可能是最简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:09:35.150

您可以删除您的**主**键/唯一键，并使其成为一个简单的键，而不是在 project_id 上做一个简单的范围分区，现在它确实需要成为键

您仍然可以快速访问，因为这些字段已编入索引。

您可能仍希望保留唯一性：

*   在应用层做
*   使用带有选择的嵌套插入来执行此操作
*   您可以使用添加了唯一约束的附加表（仅组合），保留对表中组合的引用

# sockets - 高效的服务器套接字编程

> ID：15268117
> 
> 赞同：1
> 
> 时间：2013-03-07T10:00:23.890
> 
> 标签：sockets, serversocket, asyncsocket

我已经使用 IO 完成端口实现了一个高效的 Windows 服务器，现在我需要实现一个新的跨平台服务器 - 可能使用 select

我在 Windows 中的设计基于从 IO 完成端口队列中获取消息的 X 工作线程，其中 X 是一个取决于硬件和项目属性的数字。

然而，在 linux 中，没有 IO 完成端口。我想保留我的设计/使用领导者-从者设计来接受或读取套接字。我环顾四周，似乎选择是唯一的方法。

（如果我理解正确，使用 select 等同于使用 WaitForMultipleObjects）所以我的设计应该是这样的：

*   创建线程池
*   所有线程等待选择函数，所有客户端套接字读取句柄，侦听套接字接受句柄。
*   当一个新的套接字连接时，以某种方式提醒其他线程更新它们的选择函数句柄

打破选择以更新新客户似乎有点肤浅。有没有更好的办法？

有人可以指出一个套接字服务器的高性能实现的例子吗？

# android - 自定义列表视图中的单选按钮 - 一次只应选择一个

> ID：15268120
> 
> 赞同：0
> 
> 时间：2013-03-07T10:00:34.950
> 
> 标签：android, android-listview, radio-button

我陷入了需要获取选中的 Radiobutton 的 ID 的情况。我知道问题出在哪里，但我无法解决，所以请根据我的代码建议我。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {     
    ViewHolder holder=null;

    bean=arrayListCountry.get(position);

    LayoutInflater inflater=(LayoutInflater)context.getSystemService(Service.LAYOUT_INFLATER_SERVICE);
    if(convertView==null)
    {
        convertView=inflater.inflate(R.layout.custom_layout_listview, null);
        holder=new ViewHolder();
        holder.textCountryName=(TextView)convertView.findViewById(R.id.textView1);
        holder.radioCountry=(RadioButton)convertView.findViewById(R.id.radioButton1);
        RelativeLayout relativeLayout=(RelativeLayout)convertView.findViewById(R.id.relativeCustomLayout);
        relativeLayout.addView(convertView);
        convertView.setTag(holder);
        convertView.setTag(R.id.textView1,holder.textCountryName);

    }
    else
        holder=(ViewHolder)convertView.getTag();

    holder.radioCountry.setTag(position);

    holder.textCountryName.setText(bean.getCountryName());
    holder.radioCountry.setChecked(bean.getIsSelected());

    holder.radioCountry.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub

            int pos=(Integer)buttonView.getTag();

            Country_Bean country_Bean=arrayListCountry.get(pos);

            coubean.setIsSelected(buttonView.isChecked());

            //buttonView.setChecked(bean.getIsSelected());

            Toast.makeText(context, "POs:"+pos+"\ncountry:"+bean.getCountryName()+"\ncountry_check:"+bean.getIsSelected()+"\nbuttonCheck:"+buttonView.isChecked(), Toast.LENGTH_SHORT).show();
        }
    });

    return convertView;
} 
```

请告诉我如何获得特定的单选按钮。我也想知道为什么通常使用 getView 以及我们如何手动调用该方法。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:19:32.720

![在此处输入图像描述](../Images/859cdbec958e6fb4444302fd26ad4c1f.png)

我已经完成了，并将完整的源代码发布在我的 Android 博客上以供参考。

[http://amitandroid.blogspot.in/2013/03/android-custon-single-choice-lsitview.html](http://amitandroid.blogspot.in/2013/03/android-custon-single-choice-lsitview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:07:24.883

你试过[RadioGroup](http://developer.android.com/reference/android/widget/RadioGroup.html)吗？它是许多`RadioButton`s的容器。它甚至有一个名为[getCheckedRadioButtonId()](http://developer.android.com/reference/android/widget/RadioGroup.html#getCheckedRadioButtonId%28%29)的方法。

* * *

除此之外，我看到您没有遵循打字约定。对此我非常严格，我为我内心的代码语法纳粹道歉。

如果 bean 是成员变量，则使用 mBean。

```
bean=arrayListCountry.get(position); 
```

将会：

```
mBean=arrayListCountry.get(position); 
```

Country_Bean 不是类的正确名称。

```
Country_Bean 
```

将会：

```
CountryBean 
```

范围变量名 country_Bean 也是错误的。

```
country_Bean 
```

将会：

```
countryBean 
```

此外，如果使用 Eclipse，请尝试使用自动格式，因为它会使代码更漂亮（CTRL + SHIFT + F）。

# android - IsoDep .connect 抛出“e= null”

> ID：15268124
> 
> 赞同：0
> 
> 时间：2013-03-07T10:00:49.087
> 
> 标签：android, exception, connect, nfc

这听起来很奇怪，我知道。

我正在使用 NFC 开发一个 Android 应用程序，该应用程序使用 IsoDep APDU 命令从 samrtcard 读取标签，一切通常都可以工作，但有时它会失败，并且在随后的执行中继续失败，当它失败时，它会在连接标签时发生，标签有它的“mConnectedValue = -1”，这意味着没有技术连接，但后面的代码被执行

```
 card = IsoDep.get(tag);
    card.setTimeout(20000);
    card.connect(); 
```

connect() 抛出异常，异常被这段代码捕获：

```
 } catch (IOException e) {
            ...
        } 
```

如果用eclipse检查“e”显示**e=null**，但是catch里面的代码被执行了，谁能解释一下为什么e=null？上面的代码在一个循环中，随后的执行继续返回那个“异常”e=null。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:45:52.480

修复了，好吧，实际上“e = null”仍然相同，有时它会抛出“IOException e = null”，有时只是“e = null”，在这两种情况下，错误都被相同的代码捕获，它可能是某种的错误。

我也解决了连接问题，是设备的问题，芯片不够强大，无法为智能卡供电，读写都可以，但是当卡进行一些操作时就不行了，只是移动手机一点点向上解决了这个问题。

谢谢！

# c# - C# WCF web.config

> ID：15268131
> 
> 赞同：0
> 
> 时间：2013-03-07T10:01:15.170
> 
> 标签：c#, wcf, web-config

我有一个`web.config`：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authentication mode="Windows"/>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="InstantMessagingBinding" closeTimeout="00:10:00">
          <textMessageEncoding>
            <readerQuotas maxStringContentLength="200000" maxArrayLength="200000" />
          </textMessageEncoding>
          <httpTransport keepAliveEnabled="false" maxReceivedMessageSize="200000" authenticationScheme="Ntlm"/>
        </binding>
      </customBinding>
    </bindings>
    ...
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

我希望我的服务`closeTimeOut`从这个文件中读取。我知道如何阅读该`AppSetting`部分，但我不知道如何在这里阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:11:35.353

请参阅此问题：[使用 ConfigurationManager 加载 System.ServiceModel 配置部分](https://stackoverflow.com/q/19589/429541)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:16:57.520

您可以使用 Session.Timeout 来了解超时值。

查看以下链接，这将帮助您理解

[访问设置](http://msdn.microsoft.com/en-us/library/4c2kcht0.aspx)

或者您可以设置信息应用设置并访问它

# jquery - Check for an invalid session to invoke login popup

> ID：15268136
> 
> 赞同：0
> 
> 时间：2013-03-07T10:01:47.167
> 
> 标签：jquery, asp.net, session, jqxhr

I am working on a method to check for an invalid session variable in my asp.net project. Its a known fact that session variables tend to invalidate un-predictably in big projects.

Though I tried almost everything but with no success. Now I am working on a different way to handle it. Please refer [jQuery form submit](https://stackoverflow.com/questions/3638750/jquery-form-submit). I have a modal popup in the end of the form and then I have added the $("form").submit() event of jQuery to check for invalid session state and then if state is invalid, invoke login modal, which again using XHR sends the user login credentials to the server to recreate the session.(Please note that I am a little new to jQuery)

Here is my code:

```
 $(document).ready(function () {
    $("form").submit(formSubmit);
    function formSubmit() {
        $.get("CheckForSessionTimeOut.aspx", function (data) {

            if (data == "0") // Session is null
            {
                getModal();//Method to invoke the popup 
                return false;
            }
            else if (data == "1") // Session is valid or not null
            {
                //submit the form
            }
        });
    }
}); 
```

But the problem here is the form posts back without the modal with some javascript error. and in case if I use `e.preventDefault();` to prevent from default postback in submit(); method the form does not posts back at all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T19:31:57.733

也许题外话，但我认为你应该在任何情况下提交表单，如果会话无效，返回错误。如果您需要重新创建会话，您可以将用户重定向到登录页面。

# date - date format of javascript calendar

> ID：15268138
> 
> 赞同：0
> 
> 时间：2013-03-07T10:02:03.383
> 
> 标签：date, calendar, datepicker, format

I have to add a javascript calendar in my website..but the date format is mm/dd/yy. I want to change it to yy/mm/dd. I had changed the function `function f_tcalGenerDate()` but i got the error invalid date format..How to change the format using this code??

```
function f_tcalParseDate (s_date) {

    var re_date = /^\s*(\d{1,2})\/(\d{1,2})\/(\d{2,4})\s*$/;
    if (!re_date.exec(s_date))
        return alert ("Invalid date: '" + s_date + "'.\nAccepted format is yyyy/mm/dd.")
    var n_day = Number(RegExp.$2),
        n_month = Number(RegExp.$1),
        n_year = Number(RegExp.$3);

    if (n_year < 100)
        n_year += (n_year < this.a_tpl.centyear ? 2000 : 1900);
    if (n_month < 1 || n_month > 12)

        return alert ("Invalid month value: '" + n_month + "'.\nAllowed range is 01-12.");
    var d_numdays = new Date(n_year, n_month, 0);
    if (n_day > d_numdays.getDate())
        return alert("Invalid day of month value: '" + n_day + "'.\nAllowed range for selected month is 01 - " + d_numdays.getDate() + ".");

    return new Date (n_year, n_month - 1, n_day);
}
// date generating function
function f_tcalGenerDate (d_date) {
    return (
         (d_date.getMonth() < 9 ? '0' : '') + (d_date.getMonth() + 1) + "/"
        + (d_date.getDate() < 10 ? '0' : '') + d_date.getDate() + "/"
        + d_date.getFullYear()
    );
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T10:04:39.527

Put the substring in the format you want and then use the Date function to make it a valid date

```
Date mydate = new Date(mysubstring); 
```

# php - 如何将元素添加到现有数组

> ID：15268139
> 
> 赞同：1
> 
> 时间：2013-03-07T10:02:05.683
> 
> 标签：php, arrays

如何将元素添加到现有数组？

这是我的代码。如您所见，我已经尝试使用这行代码将元素添加到数组中。

```
$samlet[$key]['error'] = 'Dobbelt transaktion'; 
```

但这不起作用。我的数组中已经有一个名为 error 的键，但它的值为空。我想填写

```
foreach($samlet as $key)
{
        $transid=$key['transactionid'];
        $id=$key['cardid'];
        $time=strtotime($key['transactiontime']);
        $price = $key['pricebefordiscount'];
        $cardid = $key['cardid'];

     if ($price > 200000 )
    {
        $samlet[$key]['error'] = 'O/2000,-';
    }
      if ($price < 2500 )
    {
        $samlet[$key]['error'] = 'U/25,-';   
    }
    if(lookForNumbers(substr((string)$price, 0, -2)))
    {
        $samlet[$key]['error'] = '3 ens cifre i beløb';  
    }

  /*   if(isset($samlet[$key]))
        {*/

            foreach($samlet as $k1)
            {

             $time2=strtotime($k1['transactiontime']);

                if($key<$k1)
                {
                    if($k1['cardid']==$id)
                    {
                        if(compare($time,$time2))
                        {     
                            if (empty($k1['transactionid'])|| empty($key['transactionid'])) 
                            {
                                # code...
                            }      
                            else
                            {  
                            $samlet[$key]['error'] = 'Dobbelt transaktion';
                            $samlet[$k1]['error'] = 'Dobbelt transaktion';      
                            } 
                        }
                  /*  }*/
                }
            }
        }

    if ($cardid === '88888888')
    {
        $samlet[$key]['error'] = 'Testscan';
    }

} 
```

希望你能帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:03:18.407

用途：`$samlet[$key]['error'][]`它将向变量添加新元素`$samlet[$key]['error']`

看看该`print_r($samlet[$key]['error']);`值现在包含存储的错误数组。然后，您只需遍历这些元素以记录、显示等。

# regex - 用于匿名电子邮件的正则表达式

> ID：15268147
> 
> 赞同：4
> 
> 时间：2013-03-07T10:02:21.947
> 
> 标签：regex, r

我在 R 中使用正则表达式

```
regexp <- "(^|[^([:alnum:]|.|_)])abc@abc.de($|[^[:alnum:]])" 
```

在特定文本中查找电子邮件地址`abc@abc.de`并将其替换为`anonym-mail-adress`.

```
tmp <- c("aaaaabc@abc.debbbb",        ## <- should not be matched
      "aaaa abc@abc.de bbbb",      ## <- should be matched
      "abc@abc.de",                ## <- should be matched
      "aaa.abc@abc.de",            ## <- should not be matched
      "aaaa_abc@abc.de",           ## <- should not be matched
      "(abc@abc.de)",              ## <- should be matched
      "aaaa (abc@abc.de) bbbb")    ## <- should be matched

replacement <- paste("\\1", "anonym@anonym.de", "\\2", sep="")
gsub(regexp, replacement, tmp, ignore.case=TRUE) 
```

结果我得到

```
> gsub(regexp, replacement, tmp, ignore.case=TRUE)
[1] "aaaaabc@abc.debbbb"         "aaaa anonym@anonym.de bbbb"
[3] "anonym@anonym.de"           "aaa.abc@abc.de"            
[5] "aaaa_abc@abc.de"            "(abc@abc.de)"              
[7] "aaaa (abc.abc.de) bbbb" 
```

不知道为什么数组的最后两个元素不匹配？

感谢你并致以真诚的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:23:22.613

这个怎么样？

```
gsub("^(abc@abc)|(?<=[ (])(abc@abc)", "anonym@anonym", tmp, perl=T) 
```

`|`:之前的模式当然会`^(abc@abc)`检查是否以 开头`abc@abc`。

`|`使用`positive lookbehind`和搜索之后的模式`abc@abc`以`space`or `(`（左括号）开头，如果找到，则替换为`anonym@anonym`.

这就是我得到的：（注意：我`abc.abc`在最后一个字符串中替换为`abc@abc`）

```
[1] "aaaaabc@abc.debbbb"           "aaaa anonym@anonym.de bbbb"  
[3] "anonym@anonym.de"             "aaa.abc@abc.de"              
[5] "aaaa_abc@abc.de"              "(anonym@anonym.de)"          
[7] "aaaa (anonym@anonym.de) bbbb" 
```

**编辑：**要解释您的正则表达式的问题，这似乎是该部分的问题：

```
[^([:alnum:]|.|_)] 
```

我认为否定必须出现在每个`|`陈述中。此外，您应该使用`[.]`而不是`.`后者暗示任何字符。或者，我们可以通过删除所有不必要的字符来压缩这部分，而不是对您正在检查的每个字符使用否定`|`：

```
[^.[:alpha:]_] # not a . or _ or any alphanumeric
# using gsub on it:
gsub("(^|[^.[:alpha:]_])abc@abc", " anonym@anonym", tmp)

# [1] "aaaaabc@abc.debbbb"           "aaaa anonym@anonym.de bbbb"  
# [3] " anonym@anonym.de"            "aaa.abc@abc.de"              
# [5] "aaaa_abc@abc.de"              " anonym@anonym.de)"          
# [7] "aaaa  anonym@anonym.de) bbbb" 
```

你得到每一个`abc@abc`替换。但是，您`abc@abc`每次都会丢失该字符，因为您也在模式中检查它。因此，您必须使用捕获组。也就是说，如果您使用`()`then 包装正则表达式，您可以使用特殊变量（例如`\\1, \\2 etc..`. 在这里，我们已经捕获了`(^|[^.[:alpha:]_])`，即之前的部分`abc@abc`。由于这是第一次捕获，我们将其称为`\\1`使用它来恢复先前结果中丢失的字符：

```
gsub("(^|[^.[:alpha:]_])abc@abc", "\\1anonym@anonym", tmp)

# [1] "aaaaabc@abc.debbbb"           "aaaa anonym@anonym.de bbbb"  
# [3] "anonym@anonym.de"             "aaa.abc@abc.de"              
# [5] "aaaa_abc@abc.de"              "(anonym@anonym.de)"          
# [7] "aaaa (anonym@anonym.de) bbbb" 
```

这是您需要的结果。这与我使用正面后视的最初答案相同。在这种情况下，因为它只是检查它是否前面有一些东西，所以你不必捕获任何特殊的东西。只是`abc@abc`更换了零件。希望这可以帮助。

# servicestack - Funq scope in ServiceStack (Best Practice)

> ID：15268148
> 
> 赞同：2
> 
> 时间：2013-03-07T10:02:26.923
> 
> 标签：servicestack, funq

In my Web application I use a standard mechanism for resolving dependencies into a AppHost.cs

`public virtual void Configure(Container container){ }`

In this method, I register all dependencies.

How can I access Container instance out of controller?

I find an answer: [Funq usage in ServiceStack](https://stackoverflow.com/questions/10837445/funq-usage-in-servicestack)

But Is it the best practice? What about multi-threading? Isn't it(AppHostBase.Instance.Container) a blocking resource?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:42:56.113

是的，我会坚持[在 ServiceStack 中的 Funq 使用中找到的答案](https://stackoverflow.com/questions/10837445/funq-usage-in-servicestack)

如果可以避免，最好避免在 asp.net 应用程序中使用多线程解决方案。通过 funq 解析引用会非常快。[Funq因其出色的性能而](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)被选为ServiceStack。

如果您确实需要使用多线程，那么您应该在实际依赖项中管理您的锁**，**而不是围绕依赖项解析。

# tomcat - How to determine which JVM is attached to the running application?

> ID：15268151
> 
> 赞同：0
> 
> 时间：2013-03-07T10:02:29.210
> 
> 标签：tomcat, jvm, heap-dump, apm

I want to build a workflow in BMC Atrium Orchestrator which takes the heap dump of particular java process. The flow which I have to follow is : 1\. Input the application name. 2\. Find the JVM which is being used by the entered application. 3\. Take heap hump of a process running on that JVM.

Can I get some help with step 2, i.e. how can I determine which JVM is being used by the running application?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:09:35.900

您可以使用随 JDK 一起提供的[jconsole](http://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html)、[jvisualvm](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jvisualvm.html)或[jhat工具来处理您提到的所有事情。](http://download.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:12:09.763

我发现以下与您的问题相关的链接。请参考

[以编程方式设置监控和管理](http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html#gdhkz)

[来自堆栈溢出的本地主机上正在运行的 JVM 列表](https://stackoverflow.com/questions/5200269/list-of-running-jvms-on-the-localhost)

# slick - Slick and leftjoin : wrong type on result tuple

> ID：15268155
> 
> 赞同：2
> 
> 时间：2013-03-07T10:02:32.230
> 
> 标签：slick

I'm trying to do a left join with Slick.

I have two case classes (Book and Author) and 2 tables

If I do this :

```
(for {
       (book, author) <- Books leftJoin Authors on (_.authorId === _.id)
     } yield (book, author.?)
).list 
```

The result is a List[Book, Option[Authors.type]] and I need a List[Book, Option[Author]]

Do you know why I get the wrong type with my query?

Note : my Authors object links well with the Author case class:

```
object Authors extends Table[Author]("author"){...} 
```

Thanks :)

Loïc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:40:09.777

我有一个解决方法，但我不知道这是否是正确的解决方案。

我检索作者可选列，然后在结果中使用 map 函数来创建 (Book, Author) 元组对象。

```
val query = for {
(book, author) <- Books leftJoin Companies on (_.authorId === _.id)
} yield (book, author.id.?, author.name.?)

val result = query.list.map(row => (row._1, row._2.map(value => Author(Option(value), row._3.get)))) 
```

# linux - Dont want to press Ctrl +D to end a file. Any alternative

> ID：15268156
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:02:33.330
> 
> 标签：linux, shell

I want a linux cmd to write the value of a variable into a file. Heres what i have,

```
x=$(cat /home/kate/Documents/Desktop/New-ACE-Deploy/deploy/ace/deploysetup/ConfFiles/online_ace_stable-m4.5.conf)
echo $x
cd /etc/apache2/sites-enabled
cat > online_ace_stable-m4.5.conf
echo "$x" >> "/etc/apache2/sites-enabled/online_ace_stable-m4.5.conf" 
```

But i have to press Ctrl +D to end. I dont want to do it. Any alternatives.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:05:09.357

删除该`cat > online_ace_stable-m4.5.conf`行，您应该可以按 Ctrl+D。如果文件在您运行脚本之前可能已经存在，您还需要`>>`将最后一行的（附加）替换为`>`（覆盖）。

如果您确实需要明确确保文件存在且为空，请使用`echo -n > online_ace_stable-m4.5.conf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:06:23.777

您在第 4 行的[`cat`命令](http://linux.die.net/man/1/cat)不正确。它缺少文件参数。如果没有此参数，则复制`stdin`到`stdout`. 这一直持续到`stdin`关闭，因此您需要使用`CTRL`-`D`

为了解决您的问题，请将其更改为：

```
cat online_ace_stable-m4.5.conf 
```

（注意`>`消失了）

如果要创建一个空（新）文件，请使用[`touch`](http://linux.die.net/man/1/touch)代替`cat`：

```
touch online_ace_stable-m4.5.conf 
```

或直接回显到文件：

```
echo "$x" > "/etc/apache2/sites-enabled/online_ace_stable-m4.5.conf" 
```

因为它不需要先创建它并确保不保留旧内容。（注意 single`>`而不是 double `>>`）

# c# - Can I Implement GetHashCode for my custom Collection

> ID：15268159
> 
> 赞同：0
> 
> 时间：2013-03-07T10:02:50.117
> 
> 标签：c#, .net, collections, gethashcode

I have a custom collection as shown below

```
public class CustomCollection<T>:IEnumerable<T>, IEnumerator<T>
{
    int size = 0;
    int current = 0;
    int position = -1;
    CustomComparer<T> cmp = new CustomComparer<T>();

    T[] collection = null;
    public CustomCollection(int sizeofColl)
    {
        size = sizeofColl;
        collection = new T[size];
    }

    public void Push(T value)
    {
        if (!collection.Contains(value, cmp))
            collection[current++] = value;
    }

    public T Pop()
    {
        return collection[--current];
    }        

    IEnumerator<T> IEnumerable<T>.GetEnumerator()
    {
        return (IEnumerator<T>)this;
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    public T Current
    {
        get { return collection[position]; }
    }

    public void Dispose()
    {

    }

    object System.Collections.IEnumerator.Current
    {
        get { throw new NotImplementedException(); }
    }

    public bool MoveNext()
    {
        position++;
        if (position >= collection.Length)
            return false;
        else
            return true;
    }

    public void Reset()
    {
        throw new NotImplementedException();
    }
} 
```

Now I want to have a collection of Person class which is as below along with the IEqualityComparer

```
 public class Person
{
    public string Name { get; set; }
    public int ID { get; set; }       
}

public class CustomComparer<T>:IEqualityComparer<T>    {

    public bool Equals(T x, T y)
    {
        Person p1 = x as Person;
        Person p2 = y as Person;
        if (p1 == null || p2 == null)
            return false;
        else
            return p1.Name.Equals(p2.Name);
    }

    public int GetHashCode(T obj)
    {
        Person p = obj as Person;
        return p.Name.GetHashCode();
    }
} 
```

Now when I perform the following operation on the collection, why only Equals Method is called and not the GetHashCode() ?

```
 CustomCollection.CustomCollection<Person> custColl = new CustomCollection<Person>(3);
        custColl.Push(new Person() { Name = "per1", ID = 1 });
        custColl.Push(new Person() { Name = "per2", ID = 2 });
        custColl.Push(new Person() { Name = "per1", ID = 1 }); 
```

Or how can I make my code to call GetHashCode ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:09:29.903

这与以下行有关：

```
if (!collection.Contains(value, cmp)) 
```

对向量或序列的测试（因为它看起来像）在调用;`Enumerable.Contains`时没有任何目的。`GetHashCode()`如果数据已被分组到散列桶或其他优化结构中，这很有用，但这里的数据只是一个平面的值序列。如果它需要调用一个方法，它最好调用`Equals`而不是`GetHashCode()`，因为如果哈希相同，它**仍然**需要调用`Equals`（哈希码表示不相等，但不能表示相等）。因此，可以选择每个对象只调用一个方法，而*不是*每个对象*至少*一个方法，每个对象可能有两个方法。第一个显然更可取。

如果数据是 a`Dictionary<Person, ...>`或 a `HashSet<Person>`，那么我希望`GetHashCode()`被使用。

# azure - TFS server build vs. local visual studio build differences

> ID：15268160
> 
> 赞同：2
> 
> 时间：2013-03-07T10:02:51.587
> 
> 标签：azure, tfs, msbuild

Before we used TFS, we were building our packages locally using visual studio. There was a lot of projects organized into solutions. When we wanted to build the package, we simply located the ccproj project, right click on it and hit “package”.

There is couple of specific in our solution:

*   We use web roles with multiple web sites and virtual applications and we have them as project dependencies in VS2012 solution
*   We use config transformations for both web and worker roles. Worker roles transforms was achieved by adding transform target manually to the project file.
*   We have some additional class library projects – their outputs needs to go in a subfolder of the worker role along with correct configuration files, it is kind of plug-in architecture. We used some xcopy commands to include these non-referenced libraries in our worker roles.

Everything worked smoothly when building in VS 2012 locally.

When migrated to TFS we quickly learned that we won’t be able to replicate the same build process on build server

*   It turned out that TFS is not preserving solutions structure, more details here: [http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/9ac815c8-5961-4670-a6d0-660a9b66da9c](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/9ac815c8-5961-4670-a6d0-660a9b66da9c)
*   The project dependency that was solving multiple web sites and virtual applications in a single role did not work on build server, probably because of different output directory. We had to add some hacks in our ccproj and csproj files to get these published and correctly included in the resulting package.
*   xcopy commands failed because of different directory structures on TFS build sever.
*   We had to force run cspack on TFS build server by explicitly adding /t:Publish parameter to msbuild command line.
*   Config transforms for worker roles did not worked, we had to force to occur using another hacks in the ccproj and csporj files.
*   There was more issues but those are too detailed. I would keep it on high level just to illustrate the whole issue. The build somehow works now, but we have now a lot of hacks in place now.

I have two questions:

1.  Is it possible to configure TFS build server to have exact same behavior as the local build in VS2012?
2.  Is there any official solution for building azure packages with multiple web sites and virtual applications in a single web role?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:48:39.710

我还没有在 TFS 构建服务器上尝试过这个，但是在我的博客[http://michaelcollier.wordpress.com/2013/01/14/multiple-sites-in-a-web-role/](http://michaelcollier.wordpress.com/2013/01/14/multiple-sites-in-a-web-role/)中概述的方法有一直运作良好。“技巧”基本上是修改 .ccproj 文件以利用 CoreBuildDependsOn 目标，添加将对辅助站点执行 MSBuild 的逻辑。这也应该允许配置转换工作。

# android - Sending data between activities

> ID：15268161
> 
> 赞同：0
> 
> 时间：2013-03-07T10:02:53.453
> 
> 标签：android, android-activity

How to send data between two activities?I have the following code, but I only get `null` in the receiver activity:

The activity from which I send data:

```
Intent intent = new Intent(SecondScreen.this, ThirdScreen.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//clear previous activities
                intent.putExtra("CLIENT_ID", getUserID);
                intent.putExtra("PASSWORD", getUserPWD);
                startActivity(intent); 
```

The activity where I want to receive data:

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_third_screen);
Bundle b = getIntent().getExtras(); 
    if (b != null)
    {
        CLIENT_ID =  b.getString("CLIENT_ID"); 
        CLIENT_PWD =  b.getString("PASSWORD"); 
    } 
```

So what am I doing wrong?

**UPD** here is LogCat:

```
03-07 12:04:10.340: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, 

error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:10.340: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:10.661: E/Settings:###(16748): onApplyThemeResource...
03-07 12:04:11.021: E/SurfaceTexture(1451): [AtchDlg:com.htc.launcher/com.htc.launcher.Launcher] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:04:11.492: E/SurfaceTexture(1451): [SurfaceView] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:04:11.502: E/SurfaceTexture(1451): [com.htc.launcher/com.htc.launcher.Launcher] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:04:12.753: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:13.744: E/Settings:###(16748): onApplyThemeResource...
03-07 12:04:13.784: E/HtcPreferenceActivity(16748): context.getClassLoader(): dalvik.system.PathClassLoader[/system/app/Settings.apk]
03-07 12:04:13.784: E/HtcPreferenceActivity(16748): context.getPackageName(): com.android.settings
03-07 12:04:13.784: E/HtcPreferenceActivity(16748): context.getPackageCodePath(): /system/app/Settings.apk
03-07 12:04:13.784: E/HtcPreferenceActivity(16748): context.getPackageResourcePath(): /system/app/Settings.apk
03-07 12:04:13.784: E/HtcPreferenceActivity(16748): fragmentName: com.android.settings.DisplaySettings
03-07 12:04:14.194: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:14.244: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:14.494: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:14.504: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:14.565: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.Settings] abandon: SurfaceTexture(0x0x2668c0) has been abandoned!
03-07 12:04:18.699: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SubSettings] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:04:19.870: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SubSettings] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:04:22.382: E/Adreno200-ES20(4154): <process_gl_state_enables:456>: GL_INVALID_ENUM
03-07 12:04:22.592: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.Settings] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:04:26.626: E/Wifi_Pair(17131): Error occured while reading paired Winamp Ids.
03-07 12:04:30.510: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.890: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.910: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.931: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.931: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.941: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.941: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:30.941: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.021: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.031: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.071: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.091: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.131: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.131: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.261: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.541: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.541: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.571: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:31.721: E/ConversionPing(17280): ConversionPing could not reach the url, no conversion sent.
03-07 12:04:32.312: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:32.322: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:32.802: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:04:38.268: E/Settings:###(16748): onApplyThemeResource...
03-07 12:04:38.768: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:38.798: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:38.858: E/SurfaceTexture(1451): [SurfaceView] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:04:38.868: E/SurfaceTexture(1451): [com.htc.launcher/com.htc.launcher.Launcher] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:04:42.922: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:42.932: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:43.032: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SoundSettings] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:04:44.474: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): false
03-07 12:04:44.474: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): true
03-07 12:04:44.474: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): false
03-07 12:04:44.474: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): true
03-07 12:04:44.474: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): false
03-07 12:04:44.484: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): true
03-07 12:04:44.484: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): false
03-07 12:04:44.484: E/AudioService(1593): [AudioHandler] syncSetIndex Call setStreamVolumeIndex isHeadsetPlugged(): true
03-07 12:04:44.704: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:44.724: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SoundSettings] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:04:44.754: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:47.817: E/AudioHardwareMSM7X30(1454): output is hw device
03-07 12:04:50.049: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:50.059: E/SettingsMobileDataEnabler(16748): mSummary is null!!
03-07 12:04:50.229: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SoundSettings] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:04:52.632: E/Adreno200-ES20(4154): <process_gl_state_enables:456>: GL_INVALID_ENUM
03-07 12:04:52.932: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SoundSettings] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:06:23.173: E/SurfaceTexture(1451): [com.htc.clock3dwidget.idlescreen.IdleScreenClockService] abandon: SurfaceTexture(0x0x225988) has been abandoned!
03-07 12:18:19.071: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:18:19.142: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:18:19.262: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:18:19.272: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:21:59.930: E/Adreno200-ES20(4154): <process_gl_state_enables:456>: GL_INVALID_ENUM
03-07 12:22:00.541: E/Wifi_SyncServer(17131): Error occurred while accepting client request.
03-07 12:22:00.541: E/Wifi_SyncServer(17131): java.net.SocketException: Socket closed
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at libcore.io.Posix.accept(Native Method)
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at libcore.io.BlockGuardOs.accept(BlockGuardOs.java:55)
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:98)
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at java.net.ServerSocket.implAccept(ServerSocket.java:202)
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at java.net.ServerSocket.accept(ServerSocket.java:127)
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at com.nullsoft.winamp.wifi.b.run(SourceFile:89)
03-07 12:22:00.541: E/Wifi_SyncServer(17131):   at java.lang.Thread.run(Thread.java:864)
03-07 12:22:03.534: E/mode10(1730): Scene container cannot bind null scene
03-07 12:22:03.784: E/SurfaceTexture(1451): [Keyguard] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:06.617: E/SurfaceTexture(1451): [AtchDlg:com.htc.launcher/com.htc.launcher.Launcher] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:06.667: E/SurfaceTexture(1451): [SurfaceView] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:22:06.697: E/SurfaceTexture(1451): [com.htc.launcher/com.htc.launcher.Launcher] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:08.328: E/Settings:###(16748): onApplyThemeResource...
03-07 12:22:08.348: E/HtcPreferenceActivity(16748): context.getClassLoader(): dalvik.system.PathClassLoader[/system/app/Settings.apk]
03-07 12:22:08.348: E/HtcPreferenceActivity(16748): context.getPackageName(): com.android.settings
03-07 12:22:08.348: E/HtcPreferenceActivity(16748): context.getPackageCodePath(): /system/app/Settings.apk
03-07 12:22:08.348: E/HtcPreferenceActivity(16748): context.getPackageResourcePath(): /system/app/Settings.apk
03-07 12:22:08.348: E/HtcPreferenceActivity(16748): fragmentName: com.android.settings.DevelopmentSettings
03-07 12:22:08.418: E/Cryptfs(1445): not running with encryption, aborting
03-07 12:22:08.759: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.Settings] abandon: SurfaceTexture(0x0x2668c0) has been abandoned!
03-07 12:22:10.881: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SubSettings] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:11.732: E/Adreno200-ES20(4154): <process_gl_state_enables:456>: GL_INVALID_ENUM
03-07 12:22:12.032: E/SurfaceTexture(1451): [com.android.settings/com.android.settings.SubSettings] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:22:14.985: E/wpa_supplicant(17696): Starting wpa_supplicant...
03-07 12:22:17.688: E/wpa_supplicant(17696): ioctl[SIOCSIWPRIV] (cscan): -1
03-07 12:22:17.938: E/WifiConfigStore(1593): Missing id while parsing configuration
03-07 12:22:17.938: E/WifiConfigStore(1593): Missing id while parsing configuration
03-07 12:22:17.938: E/WifiConfigStore(1593): Missing id while parsing configuration
03-07 12:22:18.048: E/wpa_supplicant(17696): ioctl[SIOCSIWPRIV] (cscan): -1
03-07 12:22:27.737: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:31.741: E/SurfaceTexture(1451): [SurfaceView] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:31.831: E/SurfaceTexture(1451): [com.htc.launcher/com.htc.launcher.Launcher] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:32.352: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:32.362: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:37.016: E/SurfaceTexture(1451): [Waiting For Debugger] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:40.149: E/SurfaceTexture(1451): [Starting com.vladimir.expert_suise] abandon: SurfaceTexture(0x0x24b350) has been abandoned!
03-07 12:22:44.323: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:44.334: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:44.334: E/Icing(18131): Not enough disk space. Will not index.
03-07 12:22:45.314: E/SurfaceTexture(1451): [com.vladimir.expert_suise/com.vladimir.expert_suise.FirstScreen] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:45.415: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:46.426: E/AbstractCompatWrapper(1785): Invalid input to AbstructCompatWrapper
03-07 12:22:46.426: E/CompatUtils(1785): Exception in invoke: NullPointerException
03-07 12:22:47.366: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.366: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.386: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.477: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.577: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.597: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.607: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:47.627: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:48.357: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:48.628: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:48.918: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:49.238: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:49.529: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:49.819: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:49.829: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:49.849: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.009: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.019: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.029: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.039: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.049: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.099: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.109: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.379: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:50.379: E/SurfaceTexture(1451): [InputMethod] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:50.620: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.620: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.780: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:50.910: E/AbstractCompatWrapper(1785): Invalid input to AbstructCompatWrapper
03-07 12:22:50.910: E/CompatUtils(1785): Exception in invoke: NullPointerException
03-07 12:22:51.330: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:51.410: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:52.602: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:53.202: E/SurfaceTexture(1451): [PopupWindow:4143a148] abandon: SurfaceTexture(0x0x264140) has been abandoned!
03-07 12:22:53.212: E/SurfaceTexture(1451): [InputMethod] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:22:54.834: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:54.844: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:54.854: E/SqliteDatabaseCpp(3028): native_1x1_string (step): errno = 2, error message = No such file or directory, path = /data/data/com.google.android.gsf/databases , key = cwevragew, handle = 0x1eb6250
03-07 12:22:56.265: E/SurfaceTexture(1451): [PopupWindow:40e0d440] abandon: SurfaceTexture(0x0x250738) has been abandoned!
03-07 12:24:37.604: E/SurfaceTexture(1451): [com.vladimir.expert_suise/com.vladimir.expert_suise.SecondScreen] abandon: SurfaceTexture(0x0x24b350) has been abandoned! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:16:35.073

当前活动

```
Intent intent = new Intent(Current.this, Next.class);
intent.putExtra("user", "admin");
intent.putExtra("pass", "123");
startActivity(intent); 
```

下一个活动

```
Intent intent = getIntent();
String user = intent.getExtras().getString("user");
String option = intent.getExtras().getString("pass"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:34:04.847

假设您在传递到时的字符串中有一个值`putExtra`，请检查下面的代码段，如果您以相同的方式进行操作，那么该死的肯定会给您完美的结果，否则您在其他地方做错了。

MainActivity.java

```
String getUserID="I am new bee";
 String getUserPWD="Let me google it";

 Intent intent = new Intent(MainActivity.this, SecondActivity.class);
         intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//clear previous activities
         intent.putExtra("CLIENT_ID", getUserID);
         intent.putExtra("PASSWORD", getUserPWD);
         startActivity(intent); 
```

SecondActivity.java

```
String CLIENT_ID="";
 String CLIENT_PWD="";

         Bundle b = getIntent().getExtras(); 
            if (b != null)
            {
                CLIENT_ID =  b.getString("CLIENT_ID"); 
                CLIENT_PWD =  b.getString("PASSWORD"); 
            }

            Log.d("^^^^^", "CLIENT_ID="+CLIENT_ID);
            Log.d("^^^^^", "CLIENT_PWD="+CLIENT_PWD); 
```

输出：

```
03-10 10:30:59.946: D/^^^^^(10974): CLIENT_ID=I am new bee
03-10 10:30:59.946: D/^^^^^(10974): CLIENT_PWD=Let me google it 
```

我确定您的 String 在传递时为空，在调用时简单打印出来`Intent`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:25:32.613

你必须在你的第二个活动中做这样的事情：

```
if(getIntent().hasExtras("CLIENT_ID") && getIntent().hasExtras("PASSWORD"))
{
    getIntent().getStringExtra("CLIENT_ID");
    getIntent().getStringExtra("PASSWORD");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:38:37.630

我已经尝试过您的确切代码并且工作正常..

通过在两个活动中插入此行并跟踪日志，确保 CLIENT_ID 和 PASSWORD 首先和第一个活动不是 Null

Log.d("您的数据", >>>>>" + CLIENT_ID + "//" + CLIENT_PWD);

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-07T10:07:51.270

你正在传递一个包，所以你应该在第一个活动中尝试这个：

```
Intent intent = new Intent(SecondScreen.this, ThirdScreen.class);
Bundle bundle = new Bundle();
bundle.putString("CLIENT_ID", getUserID);
bundle.putString("PASSWORD", getUserPWD);
intent.putExtras(bundle);
startActivity(intent); 
```

# iphone - TextView AutoSize

> ID：15268167
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:03:08.450
> 
> 标签：iphone, xcode

I have an fixed sizeTextView And I want to Autosize its Text e.g When I write

"This" The Text Size should be 70

"This is" The Text Size should be 60

"This is Table" The Text Size should be 40

Can Some One help me about This the size will be change depending on its text in Short Text size should be scale to Fit.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:06:10.883

你可以试试这个

```
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

使用上面给出的代码片段，您可以调整 UITextView 的内容大小

享受编程！！

# powershell - Filtering multiple users with get-aduser

> ID：15268168
> 
> 赞同：7
> 
> 时间：2013-03-07T10:03:10.413
> 
> 标签：powershell, active-directory

I'm new to powershell and have to fetch users from AD based on a list with names. Is there any way to filter from AD using something similar to an in-statement in SQL? (select * from users where name in ('Joe','Bill)?

As for now I fetch users in a foreach loop and add them to an arraylist, but I don't know if this is good practice:

```
function GetUsers()
{
$dummydata = @('Bill','Joe','Sam')
$users = New-Object System.Collections.ArrayList($null)

foreach($user in $dummydata)
{
 $aduser = get-aduser -f {GivenName -eq $user} -Properties * | select *
  $users.add($aduser) | Out-Null
}

Return ,$users

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:34:08.080

您可能希望将其放入一个函数中：

```
$dummydata = @('Bill','Joe','Sam')

$filter = 
[scriptblock]::create(($dummydata| foreach {"(GivenName -eq '$_')"}) -join ' -or ')
Get-ADUser -f $filter 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-07T20:14:57.287

[mjolinor 的回答](https://stackoverflow.com/a/15270099/45375)很优雅且有效，但**使用*脚本块*存在问题**，原因有两个：

*   这是*不必要的，因为**脚本*块在传递给`Get-ADUser -Filter`.

*   更重要的是，它延续了**接受****支持*****PowerShell 语法的 PowerShell******脚本块*****的普遍误解，这是*不*正确的`Get-ADUser -Filter`*****；这是一种误解，迟早会导致挫败感；简而言之：将您的**参数****构造为以 开头的*字符串*`-Filter`***，并知道这些过滤器字符串**虽然*类似于*PowerShell 语法，但使用*AD 提供程序特定的*语法**，这不仅受到更多限制，而且即使使用相同的运算符，其行为也会略有不同在 PowerShell 中命名 - 请参阅[此答案](https://stackoverflow.com/a/44184818/45375)以获取完整的故事。****

 **因此，**使用字符串操作来构造您的过滤器**：

```
Get-AdUser -Filter ('Bill', 'Joe', 'Sam' -replace 
                      '^.*', 'GivenName -eq "$&"' -join ' -or ') 
```

^(有关基于正则表达式的`-replace`运算符的信息，请参阅[此答案](https://stackoverflow.com/a/40683667/45375)。)

该`-Filter`参数计算为以下字符串文字，这是 AD 提供者最终看到的：

```
GivenName -eq "Bill" -or GivenName -eq "Joe" -or GivenName -eq "Sam" 
```**

# c# - 如何重新发送“失败”的 WebRequest？

> ID：15268169
> 
> 赞同：1
> 
> 时间：2013-03-07T10:03:10.863
> 
> 标签：c#, mono, webrequest

我发送 POST 和 GET WebRequest 应该支持更长的互联网中断时间。这个想法是将失败（超时）的网络请求排队，并尝试定期重新发送它们，直到互联网再次启动并发送所有排队的网络请求。

但是，我似乎不能只重用旧的 WebRequest。我需要重新设置吗？

```
IAsyncResult result = request.BeginGetResponse (o => {
        callCallback (o);
}, state); 
```

仅使用以下命令设置请求时：

```
var request = HttpWebRequest.Create (String.Format (@"{0}/{1}", baseServiceUrl, path)); 
request.Method = "GET";
request.ContentType = "application/xml; charset=UTF-8";
request.Headers.Add ("Authority", account.Session);
return request; 
```

它工作正常。但是在超时（和`request.Abort ();`）之后，调用`BeginGetResponse()`同一个 webrequest 就会冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:47:15.357

您不能`BeginGetResponse()`在同一个上多次调用`HttpWebRequest`。我不确定 .NET 是否支持，但是 Mono 的实现是不可能的（而且不是很容易改变的东西）。

另请参阅[我可以在不断开与服务器的连接的情况下重用 HttpWebRequest 吗？](https://stackoverflow.com/questions/4933450/can-i-reuse-httpwebrequest-without-disconnecting-from-the-server)- 底层网络连接将被重用。

# asp.net - Sum the total in a column in datatable

> ID：15268170
> 
> 赞同：0
> 
> 时间：2013-03-07T10:03:13.437
> 
> 标签：asp.net

I have a question. I need to sum up the total amount in a single column in datatable. How do i proceed with it?

For example

```
Total
2
3
4
5
9
10 
```

i need to get a grand total of the whole column.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:06:24.557

最灵活的方法是使用[`Enumerable.Sum`](https://www.google.de/search?q=enumerable.sum&aq=f&oq=enumerable.sum&aqs=chrome.0.57j58j0l3.2710&sourceid=chrome&ie=UTF-8)：

```
Int64 sum = table.AsEnumerable().Sum(r => r.Field<int>("total")); 
```

请注意，您需要添加`using System.Linq;`.

你也可以使用[`DataTable.Compute`](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)which 语法不易记忆，且有限制：

```
Int64 sum = (Int64) table.Compute("Sum (total)", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:14:26.143

如果您使用的是 SQl 服务器，您可以让服务器计算它并返回总和..

```
SqlCommand cmd = new SqlCommand("SELECT SUM(Total) FROM MyTable", conn);
int nSum = (int)cmd.ExecuteScalar(); 
```

# php - Unterminated string Literal, Using PHP in Javascript

> ID：15268173
> 
> 赞同：1
> 
> 时间：2013-03-07T10:03:15.717
> 
> 标签：php, javascript

I'm getting this error in Firebug :

SyntaxError: unterminated string literal

Panel_Measurements[i] = "`<br />`

And now all off my functions fail to work... I've tried multiple solutions, but none of them work... this is my code :

```
<script type="text/javascript" language="javascript>
   <?php
      $i = 0;
      while(isset($dbPanel_Name[$i]))
      {
   ?>

          Panel_brand_type[i]   = "<?php echo addslashes($dbPanel_Brand_Type[$i]); ?>";
          Panel_description[i]  = "<?php echo addslashes($dbPanel_Description[$i]); ?>";
          Panel_measurements[i] = "<?php echo addslashes($dbPanel_Measurements[$i]); ?>";
          Panel_warranty[i] = "<?php echo addslashes($dbPanel_Warranty[$i]); ?>";
          i++;
   <?php
         $i++;
       }
    ?>
</script> 
```

If there's any other way to get PHP variables into Javascript, I would love to know! Any type of help is usefull to me.

Sincerly,

Harmen Brinkman

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T10:04:53.647

在 JavaScript 中注入字符串文字（以及几乎所有其他类型的值）的更好方法是[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)：

```
Panel_brand_type[i] = <?php echo json_encode($dbPanel_Brand_Type[$i]); ?>; 
```

请注意，我删除了 PHP 标记周围的双引号，`json_encode`它们自己提供。

此解决方案的唯一潜在问题是您注入的字符串必须是 UTF-8，但您现有的代码`addslashes`也有类似的问题（它盲目地假设您使用的是单字节编码）所以恕我直言，没有回归.

最后，*请确保*在尝试访问 PHP 变量之前实际设置了它们！如果没有这样的变量，PHP 会在需要 JavaScript 代码的地方发出警告：这肯定会毁了你的一天。

# asp.net - XML 到数据表的转换失败

> ID：15268178
> 
> 赞同：0
> 
> 时间：2013-03-07T10:03:19.857
> 
> 标签：asp.net, xml, datatable

我想将 XML 字符串转换为 Datatable.String 是这样的

```
<TextstringArray>
    <values>
        <value>athul</value>
        <value>aks@phases.dk</value>
        <value>1</value>
    </values>
    <values>
        <value>arun</value>
        <value>am@phases.dk</value>
        <value>1</value>
    </values>
    <values>
        <value>ajmal</value>
        <value>am@phases.dk</value>
        <value>1</value>
    </values>
</TextstringArray> 
```

我尝试过这样的事情

```
StringReader theReader = new StringReader(invitations);
DataSet theDataSet = new DataSet();
theDataSet.ReadXml(theReader); 
```

但是数据集出来的数据格式错误。就像所有值元素都在单列中一样。我希望它们在三列中。第一列等等。（Xml 进入表格但不是 xml 结构）

![在此处输入图像描述](../Images/05d393f99d3c62eeee0d98f35d596248.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:26:36.600

为了实现您的目标，XML 应具有以下结构：

```
<TextstringArray>
    <values>
        <value1>athul</value1>
        <value2>aks@phases.dk</value2>
        <value3>1</value3>
    </values>
    <values>
        <value1>arun</value1>
        <value2>am@phases.dk</value2>
        <value3>1</value3>
    </values>
    <values>
        <value1>ajmal</value1>
        <value2>am@phases.dk</value2>
        <value3>1</value3>
    </values>
</TextstringArray> 
```

这将产生一个单一的数据表，其中每个`values`元素将是数据行的源，而它的每个子元素（`value1`等`value2`）将作为一列读取。

一种解决方法是：

```
StringReader theReader = new StringReader(File.ReadAllText(invitations));
DataSet theDataSet = new DataSet();
theDataSet.ReadXml(theReader);

var valueIdsDatatable = theDataSet.Tables[0];
var valueDatatable = theDataSet.Tables[1];

// detect the maximum number of columns
var maxColumns = valueDatatable.AsEnumerable()
    .GroupBy(i => i["values_Id"]).Max(i => i.Count());

// create the result DataTable
var resultDataTable = new DataTable();

// add dynamically the columns
for (int i = 0; i < maxColumns; i++)
{
    resultDataTable.Columns.Add("property" + i);
}

// add the rows
foreach (DataRow valueId in valueIdsDatatable.Rows)
{
    var newRow = resultDataTable.NewRow();
    var currentRows = valueDatatable.Select("values_id = " + valueId[0]);
    for (int i = 0; i < currentRows.Length; i++)
    {
        newRow[i] = currentRows[i][0];
    }
    resultDataTable.Rows.Add(newRow);
}

// TODO: use the resultDataTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:18:20.543

您可以使用一些 LINQy 的优点来分组和投影到新的数据结构中。

请注意，以下代码期望每个组中恰好有 3 个值，并且依赖于输入的一致性。如果不是这种情况，您将需要使其适应您的环境。

```
StringReader theReader = new StringReader(invitations);
DataSet theDataSet = new DataSet();
theDataSet.ReadXml(theReader);

// Get the table we are interested in.
var dt = theDataSet.Tables["value"];

// Group by the "values_Id" field. This is what logically 
// relates each <value>.
// Then, project out a new type, assuming that the first row 
// holds the username, the second holds the email address,
// and the third holds "some thing else".
var rows = dt.Rows.
    Cast<DataRow>().
    GroupBy(dr => dr["values_Id"]).
    Select(row => 
        new 
        {
            RowId = row.Key,
            UserName = row.ElementAt(0)["value_Text"],
            UserEmail = row.ElementAt(1)["value_Text"],
            UserOtherValue = row.ElementAt(2)["value_Text"]
        });

foreach (var row in rows)
{
    Console.WriteLine("Row " + row.RowId);
    Console.WriteLine("    UserName: " + row.UserName);
    Console.WriteLine("    Email: " + row.UserEmail);
    Console.WriteLine("    OtherValue: " + row.UserOtherValue);
} 
```

产生以下输出：

```
Row 0
    UserName: athul
    Email: aks@phases.dk
    OtherValue: 1
Row 1
    UserName: arun
    Email: am@phases.dk
    OtherValue: 1
Row 2
    UserName: ajmal
    Email: am@phases.dk
    OtherValue: 1 
```

# php - MYSQL 更新 DATETIME 数据类型（仅限 h:i:s）

> ID：15268182
> 
> 赞同：1
> 
> 时间：2013-03-07T10:03:25.493
> 
> 标签：php, mysql, datetime, time

例如，我`(2013-06-03 22:00:00)`存储在一个名为`Log`.

我希望更新后的输出类似于 (2013-06-03 07:30:00)，只修改小时、分钟和秒。

我怎样才能只更新时间？

*PHP版本是5.3*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:18:07.643

在 mysql 中：

```
update your_table set your_field=concat(date(your_field),' 07:30:00'); 
```

# html - 是否可以在每个 li 元素上隐藏 ul 背景图像？

> ID：15268188
> 
> 赞同：1
> 
> 时间：2013-03-07T10:03:36.000
> 
> 标签：html, css

为了制作如下的时间线，我创建了一个`ul`带有背景图像的元素，并为每个`li`元素赋予了背景颜色。

![在此处输入图像描述](../Images/e893393490dbb6723e9c700bd26e4df0.png)

**源代码如下：**

```
<style>
body{
    //background: url(http://ut-images.s3.amazonaws.com/wp-content/uploads/2010/02/The-Brightest-of-Stars.jpg)
}
ul {
    background-image: url("http://i.imgur.com/AmIstws.gif");
    background-position: 0 14px;
    background-repeat: repeat-x;
    height: 30px;
    overflow: hidden;
    position: relative;
}
li {
  font-size: 16px;
  height: 30px;
  line-height: 28px;
  text-align: center;
  width: 100px;
  list-style: none outside none;
  float: left;
}
span {
    background-color: white;
}
</style>

<ul>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
    <li><span>20130307</span></li>
</ul> 
```

但是，如果我设置`body`不带`solid background color`，则`ul`背景图像将突破`li`元素，如下所示。

![在此处输入图像描述](../Images/2a4c01dbdd4a7d421545a59bbc6afa54.png)

**源代码如下：**

```
<style>
body{
    background: url(http://ut-images.s3.amazonaws.com/wp-content/uploads/2010/02/The-Brightest-of-Stars.jpg)
}
ul {
    background-image: url("http://i.imgur.com/AmIstws.gif");
    background-position: 0 14px;
    background-repeat: repeat-x;
    height: 30px;
    overflow: hidden;
    position: relative;
}
li {
  font-size: 16px;
  height: 30px;
  line-height: 28px;
  text-align: center;
  width: 100px;
  list-style: none outside none;
  float: left;
}
span {
    background-color: transparent;
}
</style> 
```

我想问是否有可能制作像下面这样的东西？ ![在此处输入图像描述](../Images/5fb6b8a7b3c53972e1a78624e7c4d290.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:32:45.537

回答您最初的问题：不，它不能完成。我要做的是稍微重新排列html：

```
<ul>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
<li><span></span>20130307</li>
</ul> 
```

从 UL 中取出背景图像并将其应用于跨度，类似这样

```
span {
    background-image: url("http://i.imgur.com/AmIstws.gif");
    display: inline-block;
    height:10px;
    width:80px;
    margin:0 3px;
} 
```

您必须弄乱边距等才能使其完美

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:36:18.933

如果你愿意改变 html 结构，你可以试试这个：

[http://jsfiddle.net/MBNZ8/](http://jsfiddle.net/MBNZ8/)

li 的变化：`<li><span></span><div>20130307</div><span></span></li>`

```
body{
    background: url(http://ut-images.s3.amazonaws.com/wp-content/uploads/2010/02/The-Brightest-of-Stars.jpg)
}
ul {

    height: 30px;
    overflow: hidden;
    position: relative;
}
li {
  font-size: 16px;
  height: 30px;
  line-height: 28px;
  text-align: center;
  width: 100px;
  list-style: none outside none;
  float: left;

}
span {
   background-color: transparent;
    background-image: url("http://i.imgur.com/AmIstws.gif");
    background-position: 0 13px;
    background-repeat: repeat-x;

    display: block;
    float: left;
    height: 20px;
    width: 31px;
}
div {
    float:left;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:51:10.943

嗯，这似乎很困难。我会说这是不可能的，但我们当然可以尝试实现一种*幻想*。`<hr>`我的第一个想法是用 :after 和 :before 伪元素摆脱and 玩具。

我会在每个 li 之后添加一条直线

```
li:after{
   background: white;
   content: "";
   width: 30px;
   height: 2px;
   top: 13px;
   right: -16px;
   position: absolute;
} 
```

和第一个之前的一个。

```
 li:first-child:before{
    background: white;
    content: "";
    width: 30px;
    height: 2px;
    top: 13px;
    left: -16px;
    position: absolute; 
} 
```

见[http://jsfiddle.net/gleezer/8SKXy/1/](http://jsfiddle.net/gleezer/8SKXy/1/)

仍然有点黑客，但它工作正常。没有额外的标记（您甚至可以删除所有跨度标签），并且保留了语义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:01:41.037

用 是不可能做到这一点的`background: transparent`。如果某物是透明的，则它下面的所有级别都是可见的，包括`<ul>`.

`fixed`如果您可以使用背景，您可以在不更改 HTML 的情况下实现该效果。您只需为`body`and指定相同的背景`span`，每个都带有[`background-attachment`](https://developer.mozilla.org/en-US/docs/CSS/background-attachment)of `fixed`。使用`fixed`将导致两个背景对齐并且看起来像同一背景的一部分。

```
<style>
body{
    background-image: url("The-Brightest-of-Stars.jpg");
    background-attachment: fixed;
    background-color: #001;
}
ul {
    background-image: url("AmIstws.gif");
    background-position: 0 14px;
    background-repeat: repeat-x;
    height: 30px;
    overflow: hidden;
    position: relative;
}
li {
  font-size: 16px;
  height: 30px;
  line-height: 28px;
  text-align: center;
  width: 100px;
  list-style: none outside none;
  float: left;
}
span {
    background-image: url("The-Brightest-of-Stars.jpg");
    background-attachment: fixed;
    color: #fff;
    text-shadow: 1px 1px 1px #000;
    background-color: #001;
}
</style> 
```

正如我对这个问题的评论，您可能需要稍微更改文本以提高可读性。上面的 CSS 包含一个 text`color`和`text-shadow`一个`background-color` 出于这个原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:24:51.523

这是我的解决方案：制作另一个元素并将该背景设置为此元素背景，将其插入跨度之间和周围。

这是一个简单的技巧并且有效，只需要对 css 进行一些调整。

CSS：`ul li small { background: #CC0000; width: 100px; height: 20px; float: left; } ul li:first-child { width: 200px; } ul li:first-child small { background: #CC0000; width: 200px; } ul li:last-child small { width: 200px; } ul li:last-child small { background: #CC0000; width: 200px; }`

html:`<ul> <li><small></small></li> <li><span>20130307</span></li> <li><small></small></li> <li><span>20130307</span></li> <li><small></small></li> <li><span>20130307</span></li> <li><small></small></li> <li><span>20130307</span></li> <li><small></small></li> </ul>`

看看小提琴：[小提琴](http://jsfiddle.net/nt5nD/)

# jquery - IE 8 jQuery 无法正常工作

> ID：15268189
> 
> 赞同：0
> 
> 时间：2013-03-07T10:03:36.663
> 
> 标签：jquery, ajax, internet-explorer-8, get, request

我在 IE 8 中使用 jQuery 从 get 调用中获得响应时遇到了一些问题。在 IE 9（我认为它也是 IE 7）和其他浏览器中它工作正常。这是我的代码：

```
$(document).ready(function() {
    //Hide the Animation
    $('#wait_generator').hide();
    //If an element is being selected, run the function
    $('#generator').change(function(){
        //Display the animation
        $('#wait_generator').show();
        //GET - Request at get_process.php
        //get_process simply returns a new dropdown window
        $('#result_generator').hide(); //Hide results at first
        $.get("get_process.php", {
            //Variable 'func' set to generator
            func: "generator",
            //Variable selected
            selected: $('#generator').val()
        }, 
        //GET - Response from PHP
        function(response){
            $('#result_generator').fadeOut();
            setTimeout("finishAjax_generator('result_generator', '"+escape(response)+"')", 400);
        })//End of GET Request;
        return false;
    });
});

//Displays the result
function finishAjax_generator(id, response) {
    $('#wait_generator').hide();
    $('#result_software').hide();
    $('#'+id).html(unescape(response));
    $('#'+id).fadeIn();
} 
```

通过调试，我发现 IE 8 在 JSON 表示法之后甚至没有运行“函数”（或整个 get）代码。我尝试使用绝对 url 和其他 jQuery 版本并更改 .php 文件和和...请任何人帮助我找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:08:03.930

尝试改变：

```
setTimeout("finishAjax_generator('result_generator', '"+escape(response)+"')", 400); 
```

到

```
setTimeout(function() {
  finishAjax_generator('result_generator', escape(response));
}, 400); 
```

# yii - 如何使用 Yii 为请求的动态页面设置站点/域控制器

> ID：15268191
> 
> 赞同：1
> 
> 时间：2013-03-07T10:03:47.350
> 
> 标签：yii, frontend, clean-urls, entry-point

我正在开发基于 cms 的 Yii 应用程序。我最近完成了后端的页面，现在可以从数据库中获取页面。

问题始于获取请求的 url 并呈现动态布局。

解决此问题的最佳方法是什么？就像使用起始站点/域控制器一样，我该如何设置它？

使用 CMenu 进行渲染在模板中运行良好。菜单显示在前端。这是我目前使用的菜单链接示例，例如 /home 和 /company/products。它使用干净的网址。

```
<ul id="yw0">

<li class="active"><a href="/home">Home</a></li>
<li><a href="/about_us">About us</a></li>
<li><a href="/company">Company</a></li>

    <ul>
        <li><a href="/company/products">Products</a></li>
        <li><a href="/company/services">Services</a></li>
    </ul>

<li><a href="/contact">Contact</a></li>

</ul> 
```

但这是领先一点。布局需要从后端的特定页面动态加载。每个页面都可以有不同的布局。数据库中有一个用于此的列。因此，例如 url：“ [http://example.com/home](http://example.com/home) ”需要加载“protected/views/layouts/main.php”

目前，像“ [http://example.com/company/products](http://example.com/company/products) ”这样的链接不会去任何地方。这很明显，因为链接不存在并且是动态创建的。

我想我需要做两件事：

*   制作一个 startController，每个请求都会发送到它，它将处理页面和布局的加载。
*   还有两个带有干净网址的设置。？

而已。

我可以想象这不是很多工作。但这让我很头疼。

特别是干净的网址。他们总是让我有点困惑。

index.php?r=site/index 将转到 siteController 和操作索引。

但这不是我想要的。我还尝试设置“urlManager”，但它转到了一个控制器和一个动作。喜欢页面/默认/视图/id/。但是我不想执行操作，而只是启动控制器从数据库加载（下一个）请求的页面（具有不同的布局）。

我是否需要在配置文件 main.php 的某处设置干净的 url

希望很容易理解我想要实现的目标。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:13:48.263

您可以在控制器中设置布局，也可以像这样在单个控制器的每个操作中设置不同的布局。

```
public function actionActionname()
{
    $this->layout = 'front_layout';
    //Do the actions
    $this->render('renderVariable');
} 
```

对于完整的控制器布局，您可以这样设置：

```
class ControllerName extends Controller
{
    public $layout = '//layout path'; 
```

# android - video play and stop in android from xml parser

> ID：15268194
> 
> 赞同：0
> 
> 时间：2013-03-07T10:03:50.543
> 
> 标签：android, android-videoview, android-video-player, audiovideoplayback

I have follows below xml feed:

```
<videourl>
 <iframe src="http://www.youtube.com/embed/cHM0sm6aFtM?fs=0" width="500" height="298" frameborder="0" allowfullscreen="false" ></iframe >
  </videourl> 
```

Here how can i play video ???

i have wrote the below code:

```
 VideoView mVideo = new VideoView(this);
     mVideo.setLayoutParams(videoLayoutParams);
     mVideo.setVideoURI(Uri.parse("http://www.bogotobogo.com/Video/sample.3gp"));
     MediaController mc = new MediaController(this);
     mVideo.setMediaController(mc);
  mVideo.requestFocus();
     mVideo.start(); 
```

Here the video is play well..

But i have add these code

```
 mVideo.setVideoURI(Uri.parse(Appscontent.Sub_arraylistvideosub.get(j))); 
```

after run the app means the app is force closed.

**EDIT:**

Yes i have used SAX parser here:

```
 if (localName.equalsIgnoreCase("videourl")) {
     isVideos = true;
        } 

      if (localName.equalsIgnoreCase("iframe")) {
      if (isVideos)
       {
     String videosurl = attributes.getValue("src");
      sitesList.setVideos(videosurl);
      System.out.println("video value----->"+n+att_ID+"------>>"+videosurl);
      String Sub_arry=n+videosurl;
       Appscontent.Sub_arraylistvideo.add(Sub_arry);
       }} 
```

Now i have to run the app means am getting the force clsoed error.how can i resolve these...please provide me solution for these ???

Which means am getting the app is force closed..why my app is force closed.please give me solution for these ???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:35:46.633

使用[JDOM](http://www.jdom.org/)，您可以从 XML 中取出链接。

```
SAXBuilder saxBuilder = new SAXBuilder();
Document document = saxBuilder.build("url to the xml feed");
Element root = document.getRootElement();
Element iframeElement = root.getChild("iframe");
String youtubeUrl = iframeElement.getAttributeValue("src"); 
```

然后您可以使用 youtubeUrl 显示视频： mVideo.setVideoURI(Uri.parse(youtubeUrl));

# c++ - How to count actual number of operations in running C++ program?

> ID：15268198
> 
> 赞同：1
> 
> 时间：2013-03-07T10:03:54.787
> 
> 标签：c++, profiler, machine-instruction

I am working with a big C++ project on VMware (Ubuntu). It has several processes and a lot of cpp files.

What I want to find out is this: While running my code, how many operations (Additions, multiplications, read, write, shift, etc...) are being performed in each of the cpp files.

I have searched a lot for this and I know that I should be looking for a profiler that gives me the number of instructions in the running code, but I didn't find any profiler yet.

I am a beginner in programming, so I will appreciate any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:05:59.097

Valgrind 可能是您正在寻找的。只需从包管理器安装它，然后通过添加`valgrind --tool=cachegrind`到命令行的开头来运行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:07:41.167

虽然 valgrind 是一个很棒的 linux 工具，但在 Windows 上，最好使用 Visual Studio 中内置的分析器；请注意，您需要完整版而不是免费 Express。

# c++ - 来自回溯的堆栈跟踪未显示在多线程环境下导致崩溃的方法

> ID：15268201
> 
> 赞同：1
> 
> 时间：2013-03-07T10:04:03.537
> 
> 标签：c++, boost-asio, debug-symbols, backtrace, debug-backtrace

我试图准确地捕获哪个方法，或者至少哪个类
在收到 SIGSEGV 信号后从回溯返回的消息中使我的代码崩溃。是因为崩溃的方法正在另一个线程上执行，因此回溯无法这样做（请参阅我的日志的第一行 - 进程 ID 是 7fdae0268700，我在那里添加了代码以使我的应用程序崩溃）？请问对这个问题有什么建议吗？

```
 2013-03-07 17:43:42.863709502 [7fdae0268700] DEBUG data_service - I Crash You! Location
    2013-03-07 17:43:42.863804548 [7fdae7d1c720] INFO  service_runner - Receive signal 11
    2013-03-07 17:43:42.870357301 [7fdae7d1c720] DEBUG service_runner - [bt]: (0) ../Debug/MyAppService : my_app_service_lib::service_runner::handle_crash_stop(boost::system::error_code const&, int)+0x7e [0xcccf54]
    2013-03-07 17:43:42.870369392 [7fdae7d1c720] DEBUG service_runner - [bt]: (1) ../Debug/MyAppService : boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>::operator()(my_app_service_lib::service_runner*, boost::system::error_code const&, int) const+0x74 [0xcd8278]
    2013-03-07 17:43:42.870384611 [7fdae7d1c720] DEBUG service_runner - [bt]: (2) ../Debug/MyAppService : void boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> >::operator()<boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list2<boost::system::error_code const&, int const&> >(boost::_bi::type<void>, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>&, boost::_bi::list2<boost::system::error_code const&, int const&>&, int)+0x7c [0xcd80c6]
    2013-03-07 17:43:42.870395158 [7fdae7d1c720] DEBUG service_runner - [bt]: (3) ../Debug/MyAppService : void boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >::operator()<boost::system::error_code, int>(boost::system::error_code const&, int const&)+0x4c [0xcd7f0e]
    2013-03-07 17:43:42.870405480 [7fdae7d1c720] DEBUG service_runner - [bt]: (4) ../Debug/MyAppService : boost::asio::detail::binder2<boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >, boost::system::error_code, int>::operator()()+0x2b [0xcd7e15]
    2013-03-07 17:43:42.870419010 [7fdae7d1c720] DEBUG service_runner - [bt]: (5) ../Debug/MyAppService : void boost::asio::asio_handler_invoke<boost::asio::detail::binder2<boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >, boost::system::error_code, int> >(boost::asio::detail::binder2<boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >, boost::system::error_code, int>, ...)+0x62 [0xcd7d2e]
    2013-03-07 17:43:42.870436180 [7fdae7d1c720] DEBUG service_runner - [bt]: (6) ../Debug/MyAppService : void boost_asio_handler_invoke_helpers::invoke<boost::asio::detail::binder2<boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >, boost::system::error_code, int>, boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > > >(boost::asio::detail::binder2<boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >, boost::system::error_code, int>&, boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > >&)+0x64 [0xcd7bea]
    2013-03-07 17:43:42.870447863 [7fdae7d1c720] DEBUG service_runner - [bt]: (7) ../Debug/MyAppService : boost::asio::detail::signal_handler<boost::_bi::bind_t<void, boost::_mfi::mf2<void, my_app_service_lib::service_runner, boost::system::error_code const&, int>, boost::_bi::list3<boost::_bi::value<my_app_service_lib::service_runner*>, boost::arg<1>, boost::arg<2> > > >::do_complete(boost::asio::detail::task_io_service*, boost::asio::detail::task_io_service_operation*, boost::system::error_code const&, unsigned long)+0xb9 [0xcd78db]
    2013-03-07 17:43:42.870454915 [7fdae7d1c720] DEBUG service_runner - [bt]: (8) ../Debug/MyAppService : boost::asio::detail::task_io_service_operation::complete(boost::asio::detail::task_io_service&, boost::system::error_code const&, unsigned long)+0x32 [0xcce3ba]
    2013-03-07 17:43:42.870462704 [7fdae7d1c720] DEBUG service_runner - [bt]: (9) ../Debug/MyAppService : boost::asio::detail::task_io_service::do_run_one(boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex>&, boost::asio::detail::task_io_service::thread_info&, boost::system::error_code const&)+0x1a1 [0xcd09b3]
    2013-03-07 17:43:42.870469226 [7fdae7d1c720] DEBUG service_runner - [bt]: (10) ../Debug/MyAppService : boost::asio::detail::task_io_service::run(boost::system::error_code&)+0x137 [0xcd050b]
    2013-03-07 17:43:42.870474974 [7fdae7d1c720] DEBUG service_runner - [bt]: (11) ../Debug/MyAppService : boost::asio::io_service::run()+0x2f [0xcd0d31]
    2013-03-07 17:43:42.870480654 [7fdae7d1c720] DEBUG service_runner - [bt]: (12) ../Debug/MyAppService : my_app_service_lib::service_runner::run()+0x97 [0xcccda9]
    2013-03-07 17:43:42.870486438 [7fdae7d1c720] DEBUG service_runner - [bt]: (13) ../Debug/MyAppService : main+0x4cc [0xcc5838]
    2013-03-07 17:43:42.870491274 [7fdae7d1c720] DEBUG service_runner - [bt]: (14) /lib64/libc.so.6 : __libc_start_main+0xfd [0x3f0f01ecdd]
    2013-03-07 17:43:42.870495884 [7fdae7d1c720] DEBUG service_runner - [bt]: (15) ../Debug/MyAppService() [0xcc5289] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:04:09.963

如果您使用调用的处理程序[`boost::asio::signal_set::async_wait`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/signal_set.html)来调用[`backtrace_symbols(3)`](http://linux.die.net/man/3/backtrace_symbols)this 将不起作用。该类在Linux上`signal_set`使用[signalfd](http://man7.org/linux/man-pages/man2/signalfd.2.html)，其他平台可能使用管道选择中断技巧，我不知道具体。因此，当您的处理程序被调用时，它不会来自导致 SEGV 的线程。

通常不建议在遇到`SEGV`信号时尝试做任何聪明/可爱的事情。您无法[可靠地继续执行](https://stackoverflow.com/questions/6008470/catch-segfault-or-any-other-errors-exceptions-signals-in-c-like-catching-excep/6008551#6008551)。我建议不要处理`SEGV`信号，而是在进程异常终止时将系统配置为核心转储，然后分析核心转储。

# flicker - Android ScrollView ScrollTo 和闪烁

> ID：15268203
> 
> 赞同：0
> 
> 时间：2013-03-07T10:04:15.207
> 
> 标签：flicker, facebook-wall, android-scrollview

我注意到每当调用 scrollTo 时屏幕都会闪烁。我想要实现的是确保 ScrollView 内容保持在屏幕上的相同位置，同时将数据添加到 ScrollView 的顶部/底部。

我的想法是创建一个自定义的 ScrollView，当用户向上或向下滚动时加载额外的数据，这在 Facebook 墙上是类似的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:09:47.927

经过多次试验和错误，我意识到导致闪烁的原因是在 Runnable 中实现的滚动。在屏幕完成渲染之前，最初无法找到 Y 坐标。然后我更改了逻辑以计算添加到 ScrollView 中的项目的高度（因为项目的高度是已知的）并在下一步中调用 scrollTo。这种方法消除了闪烁效应。干杯。

# contextmenu - Windows Right Click Context Menu + Sub Menu

> ID：15268206
> 
> 赞同：2
> 
> 时间：2013-03-07T10:04:21.460
> 
> 标签：contextmenu, submenu

How to create sub menus entries in the Windows Context Menu. I am able to create the Main menu, but I want to associate some sub menus too.

Moreover how to associate an Icon to the menu item.

# python - Python 扁平化我的元组结构

> ID：15268210
> 
> 赞同：0
> 
> 时间：2013-03-07T10:04:30.017
> 
> 标签：python, python-2.7, tuples

我正在尝试使用带有映射的 python 分层数据结构，并且值将是一个元组。在某些情况下，元组的长度为 1。只要元组的长度为 1，Python 就会智能地展平结构。观察下面的示例，该示例可以在 python 解释器中运行。在“another_scenario”中，我预计长度为 1，但它在下面钻了一层并得到了基础步骤。这完全搞砸了我的测试，因为我依赖于它是一个带有命令、function_list、函数列表的元组。

问题 - 为什么会发生这种情况？我如何要求python不要展平它？

```
import os

def run():
    my_scenario = {
            "scenario_name" : 
            (   # Each scenario is a List of (command, function_list, function_list)
                # function_list = one function OR tuple of functions
                (
                    "command1",
                    (
                        os.path,
                        os.path.exists
                    ),
                    None
                ),
                (
                    "command2",
                    (
                        os.path,
                        os.path.exists
                    ),
                    None
                )
            )
        } 
    another_scenario = {
            "scenario_name" : 
            (
                (
                    "command1",
                    (
                        os.path,
                        os.path.exists
                    ),
                    None
                )
            )
    }
    for name in my_scenario:
        print "Full Scenario is %s" % str(my_scenario[name])
        print "Length should be 2 -> %s" % len(my_scenario[name])
    for name in another_scenario:
        print "Full Scenario is %s" % str(another_scenario[name])
        print "Length should be 1 -> %s" % len(another_scenario[name]) #Prints 3 as it drills one level down

if __name__ == "__main__":
    run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:20:37.203

您需要添加一个逗号：

```
another_scenario = {
        "scenario_name": 
        (
            (
                "command1",
                (
                    os.path,
                    os.path.exists
                ),
                None
            ),  # <- Note this comma
        )
} 
```

使它成为一个元组，否则它只是一个表达式。1 元素元组只能通过逗号的存在与表达式区分开来：

```
>>> (1)
1
>>> (1,)
(1,)
>>> type((1))
<type 'int'>
>>> type((1,))
<type 'tuple'> 
```

事实上，定义元组的是*逗号，而不是括号：*

```
>>> 1,
(1,)
>>> 1, 2
(1, 2) 
```

仅当您需要定义*空*元组时才需要括号：

```
>>> ()
() 
```

# javascript - 带边框半径的 knockout.js 数据绑定样式

> ID：15268213
> 
> 赞同：0
> 
> 时间：2013-03-07T10:04:33.687
> 
> 标签：javascript, css, data-binding, knockout.js

我正在尝试使用 knockout.js 数据绑定属性应用边框半径 css 属性：

```
data-bind="style: { width: totalLength() < workDay ? totalLength() + 'px' : workDay + 'px', border-radius: '10px', background: '#a9fd76' }" 
```

但浏览器似乎根本不喜欢它。我从`knockout.js`文件中收到一条错误消息：

> “错误：无法解析绑定。消息：语法错误：缺少：属性 id 之后；绑定值：样式：{ 宽度：totalLength() < workDay ? totalLength() + 'px'：workDay + 'px'，边框半径： '10px'，背景：'#a9fd76' }"

这是否意味着 Knockout.js 绑定不支持 CSS3 属性？

只是提到当我去掉边界半径属性时一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:08:22.010

你需要把它写成：

```
borderRadius 
```

因为border-radius 不是有效的javascript 名称。

[您可以在其文档](http://knockoutjs.com/documentation/style-binding.html)底部看到更多示例。

# php - 使用 reg exp 搜索和替换数据库中存在的电子邮件 ID

> ID：15268218
> 
> 赞同：0
> 
> 时间：2013-03-07T10:04:53.647
> 
> 标签：php, mysql, regex, preg-replace, replace

我想用附加文本的电子邮件 ID 搜索并替换数据库中存在的所有电子邮件 ID。

例如：

```
Before: someone@example.com
After:  someone@examplexyz.com

Before: greatperson@yahoo.co.in
After:  greatperson@yahooxyz.co.in

Before: contactus@boxbe.net
After:  contactus@boxbexyz.net 
```

这里术语“xyz”附加到所有域。

基本上我想以这样一种方式更改电子邮件 ID，以使电子邮件 ID 不会无效，而不是在发送邮件时域不应该无效。我需要这个来使用实时数据库，但不希望将电子邮件发送给真实用户。我当前的代码设置是 LAMP（Linux、Apache、Mysql、Php）。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:11:14.567

如果您想使用正则表达式在您的 php 脚本中更改它们，您可以尝试

```
<?php
    $email = "aburomaissae@domaine.com";
    echo "Before: ".$email ."<br>"; 
    $email = preg_replace("/@([a-zA-Z1-9]+)(\.[a-zA-Z]+)/","@$1xyz$2",$email);
    echo "After: ".$email ."<br>"; 
```

这个脚本将打印

> 之前：aburomaissae@domaine.com
> 
> 之后：aburomaissae@domainexyz.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:13:21.503

在 MySql 中：

```
Update TableName Set Email=Replace(Email,'@','@xyz') 
```

# java - 通过 WID 集成 WCS 和 SSFS

> ID：15268222
> 
> 赞同：0
> 
> 时间：2013-03-07T10:05:04.397
> 
> 标签：java, wcs

将中介模块导入 Websphere Integration Developer 时，它显示一条错误消息，指出“无法解析 XMLDataHandler”。中介模块似乎缺少 com.ibm.wbiserver.datahandler.xml.XMLDataHandler 包。错误信息如下：

> CWSCA8070E: 类 RemoveNamespaceFromXMLDataHandler [in RemoveNamespaceFromXMLDataHandler.java [in com.ibm.commerce.sample.mediation.util [in [in WCToSSFSMediationModule]]]] long serialVersionUID Logger logger
> RemoveNamespaceFromXMLDataHandler() Object transform(Object, Class, Object) void transformInto (Object, Object, Object) void setBindingContext(Map) 数据绑定类型未实现 com.ibm.websphere.sca.jms.data.JMSDataBinding 接口。SSFSAPIsExport.export WCToSSFSMediationModule 第 1 行 SCDL 验证标记
> 
> 导入 com.ibm.wbiserver 无法解析 RemoveNamespaceFromXMLDataHandler.java WCToSSFSMediationModule/com/ibm/commerce/sample/mediation/util 第 47 行 Java 问题
> 
> XMLDataHandler 无法解析为类型 RemoveNamespaceFromXMLDataHandler.java WCToSSFSMediationModule/com/ibm/commerce/sample/mediation/util 第 50 行 Java 问题
> 
> RemoveNamespaceFromXMLDataHandler 类型的方法 transform(Object, Class, Object) 必须覆盖或实现超类型方法 RemoveNamespaceFromXMLDataHandler.java WCToSSFSMediationModule/com/ibm/commerce/sample/mediation/util 第 63 行 Java 问题

由于这个错误，我无法导出项目并将其部署在应用程序服务器中。我无法下载正确的 jar，其中包含所需的 java 包 com.ibm.wbiserver.datahandler.xml.XMLDataHandler”。请帮我解决这个错误，因为我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T09:21:39.527

我知道这个答案已经很晚了，但仍然想发布它。XMLDataHandler 可以在 com.ibm.ws.bpm.redist.commonj.connector.jar 的 lib 中找到，这个 jar 文件位于服务器运行时的 plugins 文件夹中

# c - 使用 getline() 从标准输入读取整行时出现意外输出？

> ID：15268226
> 
> 赞同：2
> 
> 时间：2013-03-07T10:05:10.040
> 
> 标签：c, linux

我正在研究c，以下是我的代码：

```
#define _GNU_SOURCE
#include<stdio.h>
#include<stdlib.h>

int main()
{
        char* str = NULL;
        size_t n;

        printf("Enter the string : \n");
        getline(&str, &n, stdin);
        printf("Initial string is : (%s)\n", str);
        return 0;
} 
```

当我运行上述程序时，它会给出以下输出：

```
Enter the string :
bsalunke
Initial string is : (bsalunke
) 
```

意外字符串存储在`str`指针中的原因可能是什么（即它是一个带有许多空格的字符串）？我在 linux 上使用 gcc 4.1.2 版本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:07:16.847

从 getline 的手册页

> getline() 从流中读取整行，将包含文本的缓冲区的地址存储到 *lineptr 中。缓冲区以空值结尾并包括换行符（如果找到）。

我认为这可以解释。它不是一个有很多空格的字符串，它是一个以换行符结尾的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:13:50.770

该程序不起作用，因为您正在编写您不理解的代码。您不能“将字符串存储在指针中”。你需要学习数组和指针。

您正在尝试将数据存储在随机内存位置，而不为数据分配任何内存。这是完全未定义的行为。

# jquery - 在考虑条件的情况下添加到 prev()

> ID：15268227
> 
> 赞同：1
> 
> 时间：2013-03-07T10:05:13.817
> 
> 标签：jquery, image, joomla

我有一个小问题：

```
<div class="items-row cols-1 row-2">
  <div class="item column-1">
    <h2>
        <a href="/ak/index.php/archwriting/8-2013-02-23-17-31-29">lorem ipsum dolor sit amet</a>
    </h2>
    <dl class="article-info">
        <dt class="article-info-term"></dt>
        <dd class="published">23/02/13</dd>
    </dl>
    <p>lorem ipsum</p>
    <div class="item-separator"></div>
</div>
<span class="row-separator"></span>
</div> 
```

我希望能够检查字符串“archwriting”是否在`href`属性内，如果是，则在标签`<img>`上方添加一个。`<h2>`

我从以下内容开始：

```
$('.item h2 a[href*="archwriting"]').prev().prependTo() 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:08:08.530

`.prev()`横着走，你想使用`.parent()`or向上，如果你在 the和它的封闭`.closest()`之间引入更多的 DOM 层次结构，后者是更可取的。`<a>``<h2>`

jQuery 中的`.prepend()`and函数将新元素添加为元素的*子*元素，而在本例中，您更符合逻辑地添加了*兄弟*元素。`.prependTo()`

 **您可以使用 jQuery 对象之前添加兄弟元素`.before()`

```
$('.item h2 a[href*="archwriting"]').closest('h2').before('<img ...>') 
```**

# ebnf - 元标识符中的 EBNF 空白

> ID：15268229
> 
> 赞同：0
> 
> 时间：2013-03-07T10:05:20.987
> 
> 标签：ebnf

[我在这里](http://www.cl.cam.ac.uk/~mgk25/iso-14977.pdf)查看了 EBNF 的 ISO 规范 pdf （除了在 ISO 网站上，我找不到官方的，它似乎要花钱），我不太了解空格。

有谁知道官方标准是否允许元标识符中有空格？根据标准文档（第 8.1 节）中的元标识符，我会说不，但是如果您看一下同一标准文档中的相同示例，它似乎会说是。

在该文档 8.1 顶部的评论中，似乎是说它正在使用自身定义 EBNF。我对此感到困惑的是这样的行：

```
meta identifier = letter, {letter | decimal digit}
(* A <meta identifier> is the name of a
syntactic element of the language being
defined *); 
```

元标识符本身应该是一个元标识符，但据我所知，它不适合元标识符（字母然后是任何数量的数字或字母）。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:02:43.467

实际上，官方的 ISO EBNF 规范 (ISO/IEC 14977:1996) 可以从[这里](http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html)的 ISO 网站免费下载。这实际上将元标识符定义如下：

```
meta identifier = letter, {meta identifier character};

meta identifier character = letter | decimal digit; 
```

指本定义中的4.14和4.15。那里清楚地表明元标识符字符仅由字母和十进制数字组成。

他们用来指定 EBNF 的 EBNF 确实允许标识符中有空格，这确实很奇怪。我一直相信 EBNF 允许标识符中有空格。这也是维基百科所说的（尽管那里的语法在其他方面不完整）：

```
identifier = letter , { letter | digit | " " } ; 
```

那么也许他们在标准中忽略了这一点？或者我们都错过了一些东西。无论如何，我希望您现在有了官方标准就可以弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T13:33:09.063

该标准的第 6 节提供了您的答案：

从 6.1 开始：

> 6.2 到 6.4 定义了一个非打印字符，如空格或换行符，如果该字符在一个终端字符串或形成单个终端字符的字符对之外，则该字符对语法没有正式影响。

所以本质上，空白被忽略了。

第 8.1 节将语法分为 4 个部分。元标识符在第 3 部分中定义，其前缀为以下注释（我的粗体编辑）：

> 语法的第三部分定义了从形成语法**的无间隙**符号中删除带括号的文本符号。

8.1 的工作方式是该部分的第 1 部分定义了输入第 2 部分的终端字符和间隙，然后删除输入第 3 部分的间隙分隔符，删除输入第 4 部分的注释，从而构建您的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-27T21:35:37.777

ISO/IEC 14977:1996(E) 提供以下意图：

> > 简介，第 viii 页，
> > d)*元标识符*。元标识符（语言中非终结符号的名称）不必是单个单词或括在括号中，因为存在显式连接符号。这也确保了语法的布局（终端符号除外）不会影响正在定义的语言。

适用的定义和规则：

> > 4.14 元标识符
> > 元标识符由一个或多个元标识符字符的有序列表组成，条件是第一个元标识符字符是一个字母。
> > 
> > 4.15 元标识符字符
> > 元标识符字符是字母或十进制数字。
> > 
> > 6.2 终端字符*扩展 BNF*
> > 的终端字符是下列之一： a) 一个字母； b) 一个十进制数字； 等等
> > 
> >  *6.3 无间隙符号
> > 无间隙符号是：
> > a) 既不是第一个引号符号也不是第二个引号符号的终端字符，或
> > b) 终端字符串。
> > 
> > 6.4间隔分隔符
> > 间隔分隔符是非打印字符之一：空格、水平制表、换行符、垂直制表或换页。
> > 一个或多个间隙分隔符可以放置在：
> > a) 句法之前，和
> > b) 句法的任意两个无间隙符号之间，以及
> > c) 句法之后，
> > 而不影响由该句法定义的语言。*

 *A`meta-identifier`不是`gap-free-symbol`(6.3)。但是，组成 的字母和数字`meta-identifier`是（6.2a、6.2b 和 6.3a）。因此，可以插入空格（6.4b）来分隔 that 的单词`meta-identifier`。

删除每个`gap-separator`(6.4) 后，结果`meta-identifier`将由一个字母后跟零个或多个字母和数字组成，从而满足 4.14 和 4.15 的要求。*

# java - 多用户数据库，如何识别，当客户端断开连接

> ID：15268231
> 
> 赞同：1
> 
> 时间：2013-03-07T10:05:24.467
> 
> 标签：java, database, h2

我正在将 H2 数据库用于使用 Java Swing 开发的零售 POS 软件。我有一个问题，在多用户环境中，很少有客户端连接到服务器。

如果客户端系统异常退出并尝试重新连接，服务器如何识别它并重新连接。？有什么方法可以在客户端断开连接后立即识别。

这对我会有很大的帮助。提前致谢。

亲切的问候，

I.Murugesan yuvapos@gmail.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:04:39.997

对于每个数据库，都有一个表`INFORMATION_SCHEMA.SESSIONS`。您可以使用它列出数据库的所有打开会话。

此外，每个 TCP 服务器都有一个内存中的“management_db_”。一个 TCP 服务器可以为多个数据库提供服务。要连接到它，您需要知道`managementPassword`，这是您需要使用`-tcpPassword`设置设置的密码。用户名是一个空字符串。另见[`TcpServer.initManagementDb`和`TcpServer.shutdown`](http://code.google.com/p/h2database/source/browse/trunk/h2/src/main/org/h2/server/TcpServer.java)。您可以获取会话、数据库 URL、用户名和连接时间（表名为`sessions`）。

# wcf - WCF 服务不支持重载方法？

> ID：15268232
> 
> 赞同：10
> 
> 时间：2013-03-07T10:05:25.980
> 
> 标签：wcf, overloading

我有两种方法命名为

```
[OperationContract]
UserAccount GetUser(Int32 id);

[OperationContract]
UserAccount GetUser(string username, string password); 
```

当我尝试构建它们时，他们说您不能在服务中使用相同名称的方法？是吗。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T10:07:46.317

这是 WSDL 的限制。它不支持与 C#/.NET 相同的重载概念，因此服务上的方法名称必须是唯一的。您有两种选择来解决您的问题。

第一个是为您的方法使用不同的名称。另一种是在您的 OperationContracts 之一上设置[Name属性，如下所示](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.name.aspx)

```
[OperationContract(Name="GetUserById")]
UserAccount GetUser(Int32 id);

[OperationContract]
UserAccount GetUser(string username, string password); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T10:10:11.123

WSDL 不支持与 c# 相同的重载概念。您可以在 OperationContract 中使用 Name 来指定您的方法

```
 [OperationContract(Name="GetUserInt")]
 UserAccount GetUser(Int32 id);

 [OperationContract(Name="GetUserString")]
 UserAccount GetUser(string username, string password); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T10:08:46.827

试试这个：

```
- [OperationContract(Name= "GetUserWithID")]
   UserAccount GetUser(Int32 id);

- [OperationContract(Name= "GetUserWithUserName")]
  UserAccount GetUser(string username, string password); 
```

[更多信息](http://jeffbarnes.net/blog/post/2006/09/21/overloading-methods-in-wcf.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-27T00:33:42.810

这是 WCF 的缺点。这背后的原因是，当我们为客户端依赖服务时，不应该有重复，否则客户端会混淆哪个方法在做什么？因此，这里有解决问题的选项。通过使用 Operation Contract 的不同 name 属性。

[OperationContract(Name="GetUserByID")]

UserAccount GetUser(Int32 id);

[OperationContract(Name="GetUserByUName_Password")]

UserAccount GetUser（字符串用户名，字符串密码）；

# jquery - 如何检查输入字段是否为空

> ID：15268236
> 
> 赞同：19
> 
> 时间：2013-03-07T10:05:35.203
> 
> 标签：jquery

我正在制作一个带有输入的表单，如果输入类型为空，则按钮提交被禁用，但是，如果输入字段的长度> 0，则启用提交按钮

```
<input type='text' id='spa' onkeyup='check()'><br>
<input type='text' id='eng' onkeyup='check()'><br>
<input type='button' id='submit' disabled>

function check() {
  if($("#spa").lenght>0 && $("#eng").lenght>0) {
    $("#submit").prop('disabled', false);
  } else {
    $("#submit").prop('disabled', true);
  }
} 
```

它可以工作，但如果我删除例如输入 spa 的内容，按钮提交仍然启用

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-07T10:08:06.397

使用 trim 和 val。

```
var value=$.trim($("#spa").val());

if(value.length>0)
{
 //do some stuffs. 
} 
```

`val()`: 返回输入的值。

`trim()`: 将修剪空白。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-07T10:06:32.373

使用`.val()`，它将返回的值`<input>`

```
$("#spa").val().length > 0 
```

你有一个错字，`length`不是`lenght`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-07T10:12:09.467

由于 javascript 是动态类型的，而不是像上面那样使用 .length 属性，您可以简单地将输入值视为布尔值：

```
var input = $.trim($("#spa").val());

if (input) {
    // Do Stuff
} 
```

您还可以将逻辑提取到函数中，然后通过分配一个类并使用该`each()`方法，代码更加动态，例如，如果将来您想添加另一个输入，您不需要更改任何代码。

因此，与其将函数调用硬编码到输入标记中，不如给输入一个类，在本例中为`test`，并使用：

```
$(".test").each(function () {
    $(this).keyup(function () {
        $("#submit").prop("disabled", CheckInputs());
    });
}); 
```

然后它将调用以下内容并返回一个布尔值以分配给`disabled`属性：

```
function CheckInputs() {
    var valid = false;
    $(".test").each(function () {
        if (valid) { return valid; }
        valid = !$.trim($(this).val());
    });
    return valid;
} 
```

您可以看到我在[此 JSFiddle 中提到的所有内容的工作示例。](http://jsfiddle.net/NAXE2/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-07T10:13:12.603

你为什么不使用：

```
<script>
$('input').keyup(function(){
if(($('#eng').val().length > 0) && ($('#spa').val().length > 0))
    $("#submit").prop('disabled', false);
else
    $("#submit").prop('disabled', true);
});
</script> 
```

然后删除输入上的onkeyup函数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-07T10:08:54.387

试试这个

```
$.trim($("#spa").val()).length > 0 
```

它不会将任何空白视为正确值

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-07T10:11:07.613

如果您`jquery-validate.js`在应用程序中使用，请使用以下表达式。

```
if($("#spa").is(":blank"))
{
  //code
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-07T10:27:38.520

如果您决定展开表单，此代码段将处理两个以上的复选框。

```
$("input[type=text]").keyup(function(){
    var count = 0, attr = "disabled", $sub = $("#submit"), $inputs = $("input[type=text]");  
    $inputs.each(function(){
        count += ($.trim($(this).val())) ? 1:0;
    });
    (count >= $inputs.length ) ? $sub.removeAttr(attr):$sub.attr(attr,attr);       
}); 
```

**工作示例：http:** [//jsfiddle.net/sr4gq/](http://jsfiddle.net/sr4gq/)

# android - Android获取系统键盘状态

> ID：15268239
> 
> 赞同：1
> 
> 时间：2013-03-07T10:05:56.610
> 
> 标签：android, service, input, keyboard, detection

我见过几个类似的问题，但没有一个像我正在寻找的那样。

情况是：

我有自己的设备（所以它是 root 并且我完全可以访问）并且我想控制键盘（软键盘）。我正在尝试查看内核中是否有任何事件，或者 Android 是否有任何系统可以获取它。但现在我想不通。

任何人都有办法做到这一点。所以我将能够知道何时显示键盘以及何时隐藏。

我已经看到有几个权限，例如：

```
 <uses-permission android:name="android.permission.BIND_INPUT_METHOD"/>
<uses-permission android:name="android.permission.BIND_REMOTEVIEWS"/>
<uses-permission android:name="android.permission.BIND_TEXT_SERVICE"/>
<uses-permission android:name="android.permission.INTERNAL_SYSTEM_WINDOW"/>
<uses-permission android:name="android.permission.READ_INPUT_STATE"/> 
```

知道有一些东西控制输入文本或系统视图可能很有用。

我很困惑，但这应该以某种方式成为可能。谢谢你。

# oracle - Oracle 所有数据来自 :new

> ID：15268240
> 
> 赞同：0
> 
> 时间：2013-03-07T10:05:58.183
> 
> 标签：oracle, triggers, insert-update

我想用前触发器在另一个表中记录一个表。

```
CREATE or REPLACE TRIGGER mytrigger BEFORE INSERT OR UPDATE ON mytable FOR EACH ROW
DECLARE
    log_row mytable%rowtype;
BEGIN
    IF INSERTING OR UPDATING THEN
        log_row := :new; --Get all from :new.
        log_row.foo = 1; --I would like to modify one or more values!
        INSERT INTO mytable_log VALUES log_row;
    END IF;
END; 
```

它不起作用。我可以以某种方式将所有数据从 :new 传递给 log_row 吗？

谢谢！

# ocaml - OCaml : cil.cmi 不是编译接口错误

> ID：15268241
> 
> 赞同：1
> 
> 时间：2013-03-07T10:05:58.933
> 
> 标签：ocaml

我正在编译一个用 OCaml 编写的检测框架，并且是解释 OCaml 的新手。运行时收到此错误`scons` ：

```
ocamlc.opt -dtypes -I instrumentor -I ocaml -I ./cbi/cil/cil-1.4.0/obj/x86_LINUX 
-w Ael -warn-error A -o instrumentor/phase.cmi -c instrumentor/phase.mli

File "instrumentor/phase.mli", line 1, characters 0-1:
Error: /u/j/o/joy/Desktop/cbi/cil/cil-1.4.0/obj/x86_LINUX/cil.cmi
is not a compiled interface 
```

Instrumentor/phase.mli 的内容：

```
type phase = string * (Cil.file -> unit) 
```

我正在使用 OCaml 3.11.1。如果您能给出修复此错误的提示，将会很有帮助。

* * *

正如下面提到的@gasche：错误可能是由于使用的编译器之间的版本不匹配。此链接[http://ocaml.org/tutorials/common_error_messages.html](http://ocaml.org/tutorials/common_error_messages.html)包含更多信息和其他常见错误列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:19:01.620

疯狂的猜测，但这可能是：

*   您的构建系统中的一个问题，它将不相关的文件复制到`.cmi`; 您能否查看问题的内容，`cil.cmi`看看它是否显然不是 cmi（例如文本文件）。您还可以`ocamlobjinfo <file>`在文件确实为 OCaml 格式时获取有关文件的信息

*   Cil 的编译文件与您用于项目的编译器版本之间的版本差异（我希望编译器能够识别这是一个具有错误版本号的有效 cmi，并提供更多信息的错误消息，但您永远不会知道）。确保 cil 文件是使用与您当前使用的相同版本的 OCaml 生成的。

# iphone - 键盘不辞职

> ID：15268244
> 
> 赞同：1
> 
> 时间：2013-03-07T10:06:11.747
> 
> 标签：iphone, ios, datepicker, textfield, resignfirstresponder

抱歉在这里问了这么愚蠢的问题。

实际上我有一个文本字段列表，我通过单击下一步按钮移动到下一个文本字段。它工作正常，但在那个文本字段中，一个用于日期字段，为此我使用日期选择器作为输入访问器。

当我直接单击该文本字段时，它的工作正常并且日期选择器出现。但是当我用下一个按钮键盘来到那个文本字段时，我的文本字段被隐藏了。

对于日期选择器显示，我使用 textFieldDidBegin 方法。我尝试过使用 [textfield resignFirstResponder]; 和 [datePicker becomeFirstResponder]; 但没有什么对我有用。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:15:52.717

您应该使用`textField.inputView`属性来显示日期选择器。只有在这种情况下`[textfield resignFirstResponder];`才能正常工作。

```
- (void)viewDidLoad {
  ...
  // Assume that self.datePicker contains configured date picker view
  // With added target on UIControlEventValueChanged action
  textField.inputView = self.datePicker;
  ...
} 
```

PS 你应该只发送 becomeFirstResponder 文本字段视图，而不是日期选择器。日期选择器只是输入视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:25:38.153

几天前我也遇到了同样的问题，我为这种情况编写了以下代码，首先我禁用了用户交互，`dataTextfield`但我已经完成了触摸`UITableCell`。我覆盖了简单`UITouch`的事件方法而不是 textbegin 委托方法。请参阅我的以下代码。

在 tableviewController.h 文件中

```
 #import <UIKit/UIKit.h>
 #import "CustomTableCell.h"
@class CustomTableCell;
@interface PersonalInfoTableViewController : UITableViewController<CustomTableCellDelegate>{
@property(nonatomic, strong) UITextField *previousTextField;
@end

In tableviewController.m file 

 @implementation TableViewController
 @synthesize previousTextField;
//When you create custom table cell set your CustomcellDelegate = self in tableView:cellForRowAtIndexPath method\
 //also assign previousTextField to CustomTableCell textfield

-(void)tableViewTouch{
[previousTextField resignFirstResponder];
}

 in CustomTableCell.h file
#import <UIKit/UIKit.h>
 @protocol CustomTableCellDelegate
 @optional
   -(void)tableViewTouch;
 @end
@interface CustomTableCell : UITableViewCell<UITextFieldDelegate>

@property(nonatomic, unsafe_unretained) id<CustomTableCellDelegate> delegate;
@property(nonatomic, weak) IBOutlet UITextFiled *theCellTextField;
@end

in CustomTableCell.m file
@synthesize theCellTextField, delegate;
  -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
 //Here my other method to show datepicker in popupViewController on tablecell.
  [delegate tableViewTouch];
  } 
```

**这是仅 ARC 的代码**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:35:30.180

为您的 textField 赋予标签值，然后

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if (textField.tag==6) {

        [textField resignFirstResponder];

        //Show your picker
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:38:12.583

**为带有标签 102**`UITextField`的 datePicker 容器文本字段提供每个标签

 **```
-(void)textFieldDidBeginEditing:(UITextField *)sender
{

    if ([sender tag]==102)
    {
        [self.textFieldDatePiker resignFirstResponder];
        [self.alaramTime resignFirstResponder];
         .
         .
         . 
         //Write all textField with resignFirstResponder

        [self showPickerView];
    }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-07T11:02:02.933

**UITextField**的`textFieldDidBegin`方法获取`called`时`textField`成为`first responder`.

所以`textFieldShouldBeginEditing`用`not allow textfield editing`. 也`set tag`为`textfield`你在哪里`need date picker`。

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
 {
     if([textfield tag] == some tag no)
        [self.view endEditing:YES]; // in case if any textfiled is first responder before  date picker to open
        [datePicker becomeFirstResponder]; //open date picker
        return NO; // not edit textfield
     else 
        return YES; // edit textfield here for other case
 } 
```**

# asp.net-mvc-3 - 单元测试模拟 Url.Action

> ID：15268251
> 
> 赞同：2
> 
> 时间：2013-03-07T10:06:26.813
> 
> 标签：asp.net-mvc-3, unit-testing, c#-4.0, moq, url.action

我正在使用 Moq 框架编写单元测试，并且我有一个返回的控制器函数

```
return Json(new
{    
    redirectUrl = Url.Action("Action", "Controller"),
    isredirection = true
}); 
```

我希望能够测试结果，`redirectUrl`但不知道如何设置`Mock`，`Url.Action.`以便我可以指定是否`Url.Action("Action", "Controller")`调用返回这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:08:54.643

你不能。关于模拟的规则很容易记住 -*不能覆盖，不能模拟*¹。如果你是从类派生的`Url`，你能覆盖`Action`方法吗？不可以。Moq、Rhino、FakeItEasy 或任何其他基于 DynamicProxy 的框架也不能。

您的选择范围缩小了以下范围：

*   使用不同的框架，而不是基于 DynamicProxy（这通常意味着基于编译器服务进行高级拦截）——这些工具通常是付费的。
*   用接口/委托包装有问题的调用并将其[注入](http://en.wikipedia.org/wiki/Dependency_injection)测试代码（以便您可以使用免费框架模拟它）

* * *

包装会是什么样子？

```
public interface IUrlWrapper
{
    string Action(string name, object values);
}

// Wrapper Interface
public class TestedClass
{
    private readonly IUrlWrapper url;

    public TestedClass(IUrlWrapper urlWrapper)
    {
        this.url = urlWrapper;
    }

    // ...

    return Json(new
    {
        redirectUrl = this.url.Action("Action", "Controller"),
        isredirection = true
    });

    // ...
} 
```

通过这样的设置，您可以毫无问题地使用起订量。但是，在单个方法调用中，您也可以在`Func`没有任何隔离框架的情况下使用委托：

```
// Func Delegate
public class TestedClass
{
    private readonly Func<string, object, string> urlAction;

    public TestedClass(Func<string, object, string> urlAction)
    {
        this.urlAction = urlAction;
    }

    // ...

    return Json(new
    {
        redirectUrl = this.urlAction("Action", "Controller"),
        isredirection = true
    });

    // ...
} 
```

在您的测试中，您只需动态创建委托。

* * *

¹ *我写了一篇博文，更详细地介绍了这个问题：[How to mock private method with ...](http://jimmykeen.net/articles/25-apr-2012/how-mock-private-method)*

# ruby-on-rails - Mongoid 关系查询语法

> ID：15268253
> 
> 赞同：1
> 
> 时间：2013-03-07T10:06:27.653
> 
> 标签：ruby-on-rails, mongodb, mongoid

我在使用 has_and_belongs_to_many 关系时遇到问题。我有以下内容：

```
class User
  include Mongoid::Document

  has_and_belongs_to_many :subjects
end

class Subject
  include Mongoid::Document
  field :name, :type => String
  attr_accessible :name
  has_and_belongs_to_many :users
end 
```

然后在我的控制器中，我试图找到所有具有特定主题的用户：

```
class UsersController < ApplicationController
    def index
        @users = User.where('subjects.name' => 'Physics')
    end
end 
```

我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:12:21.950

```
def index
    @subjects = Subject.where('name' => 'Physics')
    @subjects.each do |subject|
     @users = subject.users
    end
end 
```

这给每个主题的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:47:40.223

可能只有一个`subject`名为`Physics`. 我认为代码应该是这样的：

```
@subject = Subject.find_by_name('Physics')
@users = @subject.users 
```

这应该是一个嵌套路由，并且可能不在 UsersController 的索引页面中。 [http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

编辑：或者实际上，如果不是嵌套路由，您应该将该代码放在 SubjectsController 中，如下所示：

```
def index
    @subject = Subject.find(params[:id])
    @users = @subject.users
end 
```

或者如果您将名称作为参数传递：

```
def index
    @subject = Subject.find_by_name(params[:name])
    @users = @subject.users
end 
```

EDIT2：根据哈里森詹姆斯在评论中告诉我的内容：

```
Subject.find(:all, :conditions => ["name LIKE ?", "%#{params[:name]}%"]) 
```

# c# - Selenium WebDriver 偶尔抛出超时异常

> ID：15268255
> 
> 赞同：38
> 
> 时间：2013-03-07T10:06:31.680
> 
> 标签：c#, .net, testing, selenium, webdriver

在我们的项目中使用 selenium 进行 ui 测试。我们正在运行最新版本 2.30.0。我们使用 Firefox WebDriver 并运行 Firefox 19.0。

一般来说，当我在 Visual Studio 中运行 ui 测试时，ui 测试在本地甚至服务器端工作。我们的 ui 测试在我们的构建服务器上执行。它在我通过 Visual Studio 手动测试的同一台服务器上使用相同的部署。

但是，当在 buildserver 上执行 ui 测试时，我们偶尔会遇到以下问题：

```
Test(s) failed. OpenQA.Selenium.WebDriverException : The HTTP request to the remote WebDriver server for URL http://localhost:7056/hub/session/bed1d0e7-efdc-46b6-ba07-34903519c44d/element/%7B8717bb19-96c7-44d3-b0ee-d4b989ae652d%7D/click timed out after 60 seconds.
      ----> System.Net.WebException : The operation has timed out
       at OpenQA.Selenium.Remote.HttpCommandExecutor.CreateResponse(WebRequest request)
       at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters)
--WebException
   at System.Net.HttpWebRequest.GetResponse()
   at OpenQA.Selenium.Remote.HttpCommandExecutor.CreateResponse(WebRequest request) 
```

基本上，测试点击了一个上传按钮，其中输入字段之前填充了一个文件。由于文件非常小，这可以在几秒钟内完成。不过有时会达到 60 秒的超时。

任何想法如何隔离潜在问题？或者以前遇到过同样的问题？任何提示表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-24T22:05:08.507

我得到了同样的错误：.NET WebDriver：2.37，FF：25.0.1。我注意到 Firefox 在我退出测试应用程序之前一直处于锁定状态，因此我构建了 Firefox 的调试版本，发现在写入 stderr 时发生了锁定。这给了我更改 webdriver 代码的线索，以便它不再重定向标准输出和错误，这解决了我的问题。似乎 WebDriver 以某种方式阻止了 std 错误。来自 MSDN：

> 同步读取操作在从 StandardError 流读取的调用者和写入该流的子进程之间引入了依赖关系。这些依赖关系可能会导致死锁情况......

更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandarderror%28v=vs.110%29.aspx)。

对于任何想要进行相同调整的人，我都做了：-

1.  获取硒源。然后检查您正在使用的相同代码分支。

2.  在 FireFoxBinary.cs 中：

    一世。无论您在哪里找到`RedirectStandardError = true`，请更改为`RedirectStandardError = false`.

    ii. 无论您在哪里找到`RedirectStandardOutput = true`，请更改为`RedirectStandardOutput = false`. （对于非Windows，Executable.cs中也有一个）

    iii. 在 ConsoleOutput 中，将 'return this.stream.ReadToEnd()' 更改为 'return ""'

3.  用您的构建和替换 WebDriver.dll。

免责声明：这对我有用，但您的问题可能会有所不同。此外，据我所知，除了禁用控制台输出之外，这没有任何不利影响，但可能还有其他我不知道的副作用。

我很想知道其他人是否也有同样的发现。

既然我已经解决了我的问题，我不会再深入挖掘了。如果 Selenium 组成员想要更多信息/日志/调整，我很乐意这样做。

希望这会很快得到解决。

**更新**

目前似乎不支持 Firefox v25。看到[这个评论](https://code.google.com/p/selenium/issues/detail?id=5441#c18)。

**2014 年 2 月 25 日更新**

请参阅[此更新](https://code.google.com/p/selenium/issues/detail?id=3719#c42)：

> 好的，这个问题一般不会在 IE 中表现出来，或者从评论中看起来是这样。我希望人们尝试使用 Firefox 和 Chrome，以及 .NET 绑定 2.40.0（将是撰写本文时的下一个版本）或更高版本，看看这是否仍在发生。
> 
> 自 2.35.0 以来，我在 Chrome 中看到的这种情况发生的报告较少，所以我需要知道这是否仍然是 .NET 绑定和最近的 chromedriver.exe 的问题。
> 
> 2.40.0 可能修复了至少一个在 Firefox 中可能导致此问题的问题。

这为我解决了这个问题。查看更改日志，有一个从 2014 年 1 月 31 日开始的提交以删除控制台日志重定向：

```
"No longer redirecting console output for Firefox in .NET bindings." 
```

这是我在这里使用的解决方法。所以，这一切都说得通。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-23T11:18:30.590

在四种不同的情况下发生在我身上：

1.  原因是我正在查询的窗口句柄已经关闭或处于关闭阶段。如果是这种情况，您最好在查询之前检查该窗口是否仍然存在。如果您想避免 60 秒的长时间超时，您应该更改创建 Firefox 实例的方式以减少 60 秒的延迟：

    new FirefoxDriver("FfBinaryPath", FfProfileInstance, TimeSpan.FromSeconds(5));

2.  原因是 Flash 插件“保护模式”。这种情况仅在 Windows 7 和 8 下发生在我身上，当时他们在 Jenkins 作业下运行，超时并没有偶尔发生。为了修复它，我在禁用 flash 安全模式的情况下运行了我的 Firefox selenium 实例：

    FfProfile.SetPreference("dom.ipc.plugins.flash.disable-protected-mode", true);

3.  在使用 Firefox 45 版时发生了另一个原因，也是非零星的，在 Jenkins 下并与 Flash 相关。为了解决这个问题，我不得不降级到 44 版或卸载 Flash。

4.  浏览器内部原因：有时浏览器需要超过一分钟来响应 Selenium 调用。在这种情况下，将浏览器命令超时设置为 60 秒以上可以解决问题。例如：

    `new FirefoxDriver("FfBinaryPath", FfProfileInstance, TimeSpan.FromMinutes(3));`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-29T00:20:56.277

我在超时时遇到了同样的错误。我使用的是 IEDriverServer（64 位）并且在长的 sendKey 命令上它会超时。

原因是默认超时似乎是 60 秒。

解决我的问题的是，我使用一种方法实例化了驱动程序，该方法使您能够输入 IEDriverServer 的位置、驱动程序的选项和超时值。

文档链接：[http ://seleniumhq.github.io/selenium/docs/api/dotnet/](http://seleniumhq.github.io/selenium/docs/api/dotnet/)

```
public InternetExplorerDriver(
    string internetExplorerDriverServerDirectory,
    InternetExplorerOptions options,
    TimeSpan commandTimeout
) 
```

**参数**

1.  *InternetExplorerDriverServer 目录*：
    *   类型：System.String
    *   包含 IEDriverServer.exe 的目录的完整路径
2.  *选项*
    *   类型：OpenQA.Selenium.IE.InternetExplorerOptions
    *   用于初始化驱动程序的 InternetExplorerOptions
3.  *命令超时*
    *   类型：System.TimeSpan
    *   等待每个命令的最长时间

我的代码

```
InternetExplorerOptions options = new InternetExplorerOptions();
        IWebDriver driver = new InternetExplorerDriver("C:/Users/jeff/AppData/Local/Microsoft/WindowsApps", options, TimeSpan.FromSeconds(120)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-16T13:45:35.263

在我的情况下，页面根本没有完全加载。一些 facebook 插件似乎加载时间过长。我尝试捕获异常并操纵不完整的 dom，但这并没有给我任何结果。:(

约翰

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-22T11:56:36.700

我们在项目中遇到了类似的问题。这个问题与 Selenium 或我们的应用程序无关。超时是因为该项目的构建服务器配置应该在 5 分钟内超时。但是我们所有的测试都没有在 5 分钟内完成，因此构建由于随机超时问题而失败。

我们也遇到了 firefox-19 的问题，测试过去常常随机失败。不知何故，firefox-10 只适用于我们的硒测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-06T11:23:56.677

试试这个代码：

```
 DesiredCapabilities caps = DesiredCapabilities.Firefox();   

 //set the timeout to 120 seconds
 IWebDriver driver = new RemoteWebDriver(new Uri("<app_url>"), caps, TimeSpan.FromSeconds(120)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-17T15:12:52.830

我也有同样的问题，但仅限于 Firefox 驱动程序。事实证明，这可能与您使用驱动程序 Navigate 方法并尝试与页面交互过快有关。在 Navigate 上调用下面的代码为我修复它（我也建议在 FindElement 之前使用它）：

```
public void VerifyPageIsLoaded()
{
    var pageLoaded = false;

    for (var i = 0; i < DefaultTimeout.Timeout.Seconds; i++)
    {
        Thread.Sleep(1000);

        if (WebDriver.ExecuteJavaScript<string>("return document.readyState").Equals("complete"))
        //jQuery.active might cause problems on some browser or browserstack so I commented it out
        //&& WebDriver.ExecuteJavaScript<bool>("return jQuery.active == 0").Equals(true))
        {
            pageLoaded = true;
            break;
        }

        Thread.Sleep(1000);
    }

    if (!pageLoaded)
    {
        throw new Exception("Page was not with complete state)!");
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-03T12:59:30.880

```
public static IWebElement WaitForElementVisible(By selector, uint timeout = Config.DefaultTimeoutSec)
    {
        IWebDriver driver = Browser.Instance.Driver;

        if (timeout > 0)
        {
            WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(timeout));

            wait.Until(ExpectedConditions.ElementIsVisible(selector));
            return driver.FindElement(selector);
        }
        else
        {
            // Search for element without timeout 
            return driver.FindElement(selector);
        }
    } 
```

我们使用它来防止此类 Element not found 失败，它就像一个魅力。

如果元素可以存在，那么还有一个不同的版本，但不必是可见的。

只需使用`ExpectedConditions.ElementExists(selector)`而不是`ExpectedContitions.ElementIsVisible(selector)`

编辑：Browser.Instance.Driver 是一个包含实例化驱动程序的类

# windows-8 - Visual Studio 2012 新的 Windows 商店应用程序在 Windows 8 防火墙错误

> ID：15268257
> 
> 赞同：1
> 
> 时间：2013-03-07T10:06:32.810
> 
> 标签：windows-8, visual-studio-2012, compiler-errors, app-store, windows-store-apps

我用SDK在windows8上安装VS2012

从菜单文件 >> 新项目 >> XAML 应用程序项目

在获得开发人员许可证后，当我想编译它时，这个错误会发生

![应用注册失败](../Images/97b1300dd1a0d555dbd42a83bb36447a.png)

> 错误 1 ​​错误：DEP0700：应用注册失败。错误 0x80073D0A：无法安装包 8eec1bd4-3f98-43a7-ab51-d73e1a3612a0_1.0.0.0_neutral__bcxhannxafppp，因为防火墙服务未运行。确保防火墙服务已启用并启动。(0x80073d0a) 应用程序1

我有另一个自动禁用 Windows 防火墙的第三方防火墙。

谷歌搜索后找到一些这样的[文章](http://social.technet.microsoft.com/Forums/en-US/w8itpronetworking/thread/c9a5bcbe-da7b-4962-bb5c-5fb376051be1/)

> 您好，请尝试以下方法：
> 
> 1.  禁用或删除 WinpkFilter 以查看其工作原理。
>     
>     
> 2.  使用系统还原恢复到之前的工作状态。
>     
>     
> 3.  关于错误信息，请同时查看：错误信息：没有足够的存储空间来完成此操作。 [http://technet.microsoft.com/en-us/library/cc978736.aspx](http://technet.microsoft.com/en-us/library/cc978736.aspx)谢谢。

您是否建议我禁用防火墙或恢复系统？

当我转到控制面板\系统和安全\Windows 防火墙\自定义设置时

![启用防火墙](../Images/6ff11b623aa56e9b645aaa7b240321a4.png)

我可以卸载上次更新而不是系统还原吗？

没有其他方法推荐给我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:43:01.153

我有时会遇到类似的问题，但没有找到正确的方法。以下是一些可能有帮助的结论：

*   如果您从 Visual Studio 重新部署具有相同包 ID 的应用程序（如果该应用程序已由其他用户安装），则通常会发生此错误 - > 解决方案 - 更改包标识（打开清单，转到包选项卡并修改标识）。

*   通过右键单击解决方案来清理和重建您的应用程序

*   删除`bin`解决方案中的文件夹将项目复制到新解决方案并重建它

*   重新启动系统

不知道为什么，但是在我完成上述其中一项操作后，错误通常会消失。我主要在 mdsn 论坛中找到了这个。

禁用第三方防火墙也应该是一个尝试的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:55:03.980

@jan-hommes 说：禁用第三方防火墙应该是一个尝试的选项。

*   我卸载了我的企业防病毒软件（它不允许我打开防火墙）
*   然后转到服务并在更改其设置后自动启动

我的问题解决了。

所以我多次尝试谷歌并使用这篇[文章](http://answers.microsoft.com/en-us/windows/forum/windows_7-security/windows-firewall-cant-change-some-of-your-settings/2679690e-c375-4232-ae45-404374386635)：**当我卸载我的防火墙时，这篇文章很有用。**

> 1.  点击开始
> 2.  在开始搜索框中输入服务
> 3.  右键单击 - 以管理员身份运行 检查下面提到的服务是否具有提到的状态和启动类型。
> 
> windows防火墙开始自动\手动。基本过滤引擎已启动自动\手动。windows 防火墙授权驱动程序已启动自动\手动。还要检查运行 Windows 防火墙服务所需的依赖项服务。要检查该服务，请双击该服务并单击依赖项选项卡。

# ruby-on-rails - rails 持久类变量

> ID：15268260
> 
> 赞同：0
> 
> 时间：2013-03-07T10:06:46.597
> 
> 标签：ruby-on-rails, class, variables, persistent

我是 Rails 新手，遇到以下问题：

对于人类可读的客户 ID，我需要一个持久类变量（我认为）。客户类是单表继承设置中联系人类的子类，因此数据库生成的 ID 没有用处，因为它不是线性上升的。

我想我需要一个类变量或全局变量来实现一种计数器/id（它不是count方法，因为可以删除客户）。我对么？在这种情况下，类变量需要以某种方式保存到数据库中，对吗？

我有点迷失了

1.  如何保存
2.  何时增加它：我必须重写新方法，调用第一个超级？
3.  如果应用程序需要在某个时候重新启动，如何加载该值

.

我是否应该更喜欢 Multible Table Inheritence 设置并使用数据库 ID？这将是一个遗憾，因为两个类中超过 90% 的字段是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:24:43.013

为什么你的 ID 是线性的？为什么它不是线性的？

我认为你在某个地方出错了，但万一我误解了你，你可以添加一个迁移（在你的 Customer 表中添加一个属性 'generatedID'）并编写一个方法，如下所示：

```
def generateID
  if Customer.all.count == 0
   1
  else
    Customer.last.generatedID + 1
  end
end 
```

然后当您保存 Customer 对象时：

```
@customer = Customer.new(params[:user])
@customer.generatedID = generateID
@customer.save! 
```

但这确实是一个糟糕的方法，您总是可以读取对象的 id 并将其显示给用户，我真的不确定它不会是线性的。

# perl - 如何在模板工具包中创建的下拉菜单中显示重音字符

> ID：15268262
> 
> 赞同：0
> 
> 时间：2013-03-07T10:06:51.070
> 
> 标签：perl, template-toolkit

我对为什么在模板工具包的下拉选项下没有正确显示尖锐的口音感到困惑。

```
[% glossary.$language.all_terms %] 
```

在 UI 中显示为“Todos los Términos”。但是当我在下拉菜单中使用它时，它显示的字符不正确。我附上了截图。

![显示错误数据的下拉列表，其中打印的相同变量是正确的](../Images/258684750b43afe7e43c5f0327e642d8.png)

为此，我编写了这样的模板。

```
[% IF terms.size > 1 %]
  <select onchange="this.form.submit();">
  [%-
     IF terms.size > 1;
        terms.unshift( { name => glossary.$language.all_terms, term_id => '0' } );
        terms.unshift( { name => glossary.$language.all_current_terms, term_id => '' } );
     END;

 INCLUDE html/options.tmpl
 options   = terms,
 valuekey  = 'term_id',
 choicekey = 'name',
 selected  = form.term_id
  -%]
</select> 
```

html/options.tmpl 是一个模板，它将在同一个下拉列表中添加额外的动态选项。术语数据结构是从 PERL 模块发送的。我做错了什么。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:08:13.427

我同意 Dave，Template Toolkit 站点中的流行语法是使用 html 实体的单词形式。也许替换`&#233;`为`&eacute;`html/options.tmpl 中的。

除此之外，模板工具包描述了过滤器的使用。出于某种原因，选项项可能会被过滤，也可能不会。也许这可以帮助你[https://metacpan.org/pod/distribution/Template-Toolkit/lib/Template/Manual/Filters.pod#html_entity](https://metacpan.org/pod/distribution/Template-Toolkit/lib/Template/Manual/Filters.pod#html_entity)。

# android - iOS 上的 android.graphics.Bitmap

> ID：15268267
> 
> 赞同：3
> 
> 时间：2013-03-07T10:07:09.307
> 
> 标签：android, ios, bitmap

我正在将 Android 应用程序迁移到 iOS。

在 Android 上，我有一个`android.graphics.Bitmap`对象，但我不知道我可以在 iOS 上使用哪个对象。

我以为我可以使用`CGBitmapContext`or `UIImage`。在《Learn Objective-C for Java Developers》一书中，我没有发现任何有用的东西。

在 Android 上，首先我必须创建一个`size`，我可以使用它`Bitmap`来获取它的 JPEG 版本，或者我可以在其上绘制一些像素。

**你给我推荐什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:32:48.390

如何做到这一点的最佳资源将是 Apple 的绘图和打印指南，特别是[使用位图图形上下文创建新图像](http://developer.apple.com/library/ios/documentation/2ddrawing/conceptual/drawingprintingios/HandlingImages/Images.html#//apple_ref/doc/uid/TP40010156-CH13-SW8)。

完成教程中列出的步骤（并执行[所有必要的绘图](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1)）并获得对 a 的引用后`UIImage`，您将希望使用[`UIImageJPEGRepresentation`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation)将结果保存为 JPEG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:34:20.067

您需要使用的框架称为`Core Graphics`. 该框架与 Android 不同 - 更底层且更强大。

一些有趣的类和函数：
`CGImageRef`- 表示图像
`CGContextRef`- 表示可绘制上下文
`CGBitmapContext`- 使用原始字节数据备份的上下文 - 您可以使用上下文函数在此处绘制或通过访问字节直接设置颜色值。

您可以`CGImageRef`从中获取`UIImage`，也可以绘制或直接绘制`CGImageRef`到上下文 ( )。`CGBitmapContext``UIImage``[UIImage draw...]`

这些类/函数应该足以让您开始使用谷歌搜索/搜索文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:39:04.607

是的，你可以使用 UIImage 或 CGImage...

UIImage 可以认为是 CGImage 的面向对象的包装器……但是由于您来自 java 背景，我建议您使用 UIImage ……

CGBitmapContext 是完全不同的东西。我认为它是画布，你可以在其中进行一些绘图并将你绘制的所有内容保存为图像。

如果你仍然感到困惑......我会要求你把你的问题说清楚......我无法得到你想要达到的目标......

# sqlite - 单声道连接字符串

> ID：15268272
> 
> 赞同：0
> 
> 时间：2013-03-07T10:07:25.007
> 
> 标签：sqlite, mono, connection-string

我正在尝试从我的单声道应用程序连接到 Sqlite 数据库，但在尝试打开连接时我不断收到此错误。

```
System.FormatException: Input string was not in the correct format 
```

这是我的连接字符串：

```
String connString = @"Data Source=C:\Users\pc_user\Desktop\Folder\Database.db;Version=2.2;Password=xxx;"; 
```

**我设法连接到我的数据库（经过无数工时），但现在我无法将记录插入其中。我收到这个模棱两可的错误：**

```
System.ArgumentException: element already exists 
```

帮助，任何人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:16:35.587

根据[Connectionstring.com](http://www.connectionstrings.com/sqlite)（一个无价的资源）：“版本”键对于 SQLite 2.x（默认）可以取值为“2”，对于 SQLite 3.x 可以取值为“3”

你有没有尝试过

```
String connString = @"Data Source=C:\Users\pc_user\Desktop\Folder\Database.db;Version=2.2;Password=xxx;"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:08:35.123

Fishcake 是对的：您应该将 Version 设置为 2 或 3。

您可以尝试将连接字符串更改为：

```
 String connString = @"Data Source=file:C:\Users\pc_user\Desktop\Folder\Database.db;Version=2;Password=xxx;" 
```

（变化是在数据源之后添加“文件：”）。如果它不起作用，你可以尝试

```
 String connString = @"URI=file:C:\Users\pc_user\Desktop\Folder\Database.db;Version=2;Password=xxx;" 
```

而且，您仍然遇到同样的错误，您可以尝试使用无密码数据库（并从连接字符串中删除**Password= ）吗？**

# python - 如何自动缩进 python 代码为什么要检测代码..？

> ID：15268275
> 
> 赞同：0
> 
> 时间：2013-03-07T10:07:33.257
> 
> 标签：python, indentation, auto-indent

我正在对 python 应用程序进行逆向工程。通过它我将通过在应用程序内动态检测代码来观察行为。问题是我需要在正确的缩进级别插入代码。

例如，让我们考虑我将要检测的一段代码：

```
class A:
     def move(self,name):
         name=self.name
         print name
     def move1(self):
         print 'dude' 
```

现在对于上面的示例代码，我将检测进入和退出日志记录，检测代码应该如下所示

```
enter code class A:
     def move(self,name):
         print 'Entry move class='A''
         name=self.name
         print name
         Print'Exit move class='A''
     def move1(self):
         print 'Entry move1 class='A''
         print 'dude'
         print 'Exit move class='A'' 
```

这是我在检测代码时需要的，而不是我得到以下信息：

```
enter code class A:
     def move(self,name):
print 'Entry move class='A''
             name=self.name
             print name
print'Exit move class='A''
         def move1(self):
print 'Entry move1 class='A''
             print 'dude'
print'Exit move1 class='A'' 
```

因为我正在编写一个脚本，它插入下一行并且不知道 python 代码的缩进格式。

无论如何我可以在插入时自动调整缩进，或者我应该需要知道下一行中字符的索引并在字符串中插入空格然后插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:13:15.007

在您的示例中，它实际上相当简单：

*   “entry”消息应该具有与它后面的语句完全相同的缩进。

*   “exit”消息应该与相应的“entry”消息具有完全相同的缩进。

也就是说，您可以通过使用装饰器而不是两个显式`print`语句来大大简化工作。像[这个页面](http://www.itmaybeahack.com/book/python-2.6/html/p03/p03c06_decorators.html#defining-decorators)`@trace`这样的东西比成对插入代码要容易得多。`prints`

更进一步，您可以即时执行检测，而不是修改源文件。

# php - php日期（格式化）函数的奇怪/不正确输出

> ID：15268276
> 
> 赞同：2
> 
> 时间：2013-03-07T10:07:36.467
> 
> 标签：php, datetime

我在尝试将 Unix 时间（取自由 SVN Info 命令生成的 XML 文件）转换为格式化的日期/时间时遇到问题。

`$svnInfoTime`是正确的，并且生成的反映`$unixTime`了这一点，尽管`$formattedDate`似乎有点出局。

我已经看到这种情况发生在许多（但不是全部）案例中。一个例子：

```
<?php 
    $svnInfoTime = "2013-03-06T15:42:00.894378Z";
    $unixTime = strtotime($svnInfoTime);
    $formattedDate = date('d F, Y, h:i A', $unixTime);

    echo "SVN info time : " . $svnInfoTime . "<br>";
    echo "unix time     : " . $unixTime . "<br>";
    echo "formatted date: " . $formattedDate . "<br>";
> 
```

输出：

```
SVN info time : 2013-03-06T15:42:00.894378Z
unix time : 1362584520
formatted date: 06 March, 2013, 04:42 PM 
```

为什么格式化的日期显示为下午 4 点 42 分，而 Unix 时间是下午 3 点 42 分？

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:15:18.560

PHP 的[`date()`](http://php.net/manual/en/function.date.php)函数在输出/格式化日期时会考虑您的时区设置。

检查您所在的时区，或将您的自定义时区设置传递给`date`函数以获取*3:42 PM*的输出。

PS 它在[codepad.viper-7.com上运行良好](http://codepad.viper-7.com/RuYojs)

* * *

## 编辑

在调用之前传递不同的[timezone( `Asia/Kolkata`)](http://codepad.viper-7.com/d4XO9a)`date()`时，会产生输出**9:12 PM**。

```
$svnInfoTime = "2013-03-06T15:42:00.894378Z";
$unixTime = strtotime($svnInfoTime);
date_default_timezone_set('Asia/Kolkata');
$formattedDate = date('d F, Y, h:i A', $unixTime);
echo "SVN info time : " . $svnInfoTime . "<br>";
echo "unix time     : " . $unixTime . "<br>";
echo "formatted date: " . $formattedDate . "<br>"; 
```

给出：

> SVN 信息时间：2013-03-06T15:42:00.894378Z
> unix 时间：1362584520
> 格式化日期：2013 年 3 月 6 日晚上 9:12

# javascript - jQuery - 尚未被锚包围的环绕图像

> ID：15268278
> 
> 赞同：1
> 
> 时间：2013-03-07T10:07:42.353
> 
> 标签：javascript, jquery, html, anchor

我在完成一个包含大量内容的网站时遇到了问题。我们在内容中的所有图像上设置了一个灯箱。不小心在图像上设置了“灯箱”类，并且没有在图像周围创建链接。

所以我想我可以使用 jQuerys wrap() 函数在内容区域中的每个图像周围添加灯箱图像链接。可悲的是，它还包装了已经被锚（例如 PDF-Links）包围的图像并覆盖它们。

我怎么能告诉 jQuery 只包围内容中的图像，这些图像还不是锚标记的一部分？

我现在有以下内容：

```
<script type="text/javascript">
$(document).ready(function($){
$('article img').each(function(){
if ($('article img').hasClass('lightbox')){
$(this).removeAttr('class');
}
$(this).wrap('<a href="'+this.src.replace("http://www.mydomain.com","")+'" class="lightbox" rel="group1"></a>');
});
$('.lightbox').lightbox();
});
</script> 
```

因此，我从图像中删除了灯箱类，并在每个图像周围添加了一个与图像具有相同 src 的锚点（没有缩略图）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:12:56.897

`**[LIVE DEMO](http://jsbin.com/awoxiq/2/edit)**`

```
$('article img').each(function(){
  if( this.parentNode.tagName != 'A' ){
      $(this).removeClass('lightbox')
             .wrap('<a href="'+this.src.replace("http://www.mydomain.com","")+'" class="lightbox" rel="group1"></a>');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:10:27.857

更改您的选择器

```
$('article>img').each(function(){ 
```

# android - Android：不断显示信息

> ID：15268281
> 
> 赞同：0
> 
> 时间：2013-03-07T10:07:54.717
> 
> 标签：android, monitoring

我正在开发一个在同一网络中的许多平板电脑上运行的应用程序。该应用程序包括回答问题。每次用户回答问题时，都会有一个服务器从这些平板电脑接收信息。

我需要做的是在 PC 屏幕上显示来自每个平板电脑的信息（序列号、问题号......），并每 5 秒左右刷新一次此信息。什么是最好的技术或我可以用来监控这项任务的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:27:19.540

如果我理解正确，您在平板电脑上回答问题，您会想要一个电脑屏幕来显示结果吗？我会建议你有一个外部服务器（例如 Amazon EC2），你有一个外部数据库。每次回答问题时，应用程序都会调用服务器，然后在服务器上将记录放入数据库中。然后你只需要构建一个简单的 html 来从数据库中获取数据并显示它。一个可以轻松做到这一点的框架是[Play Framework](http://www.playframework.com/)或[Spring Roo](http://www.springsource.org/spring-roo)，但其中有很多。因为我理解这个问题非常笼统，所以我只能给出一个笼统的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:32:40.603

您可以使用[推送通知](http://elsoufy.blogspot.fr/2012/12/push-notifications-with-parsecom.html)，因为您在本地网络中，您可以例如使用 CometD 或`WebSocket`服务器来管理您的通知。对于[websocket API](http://elsoufy.blogspot.fr/2012/08/html5-websocket-api.html)

# javascript - 内联块推过两行

> ID：15268287
> 
> 赞同：0
> 
> 时间：2013-03-07T10:08:07.330
> 
> 标签：javascript, css, command-line-interface

我想为这个网络应用程序制作一个老式的命令行界面。我似乎无法让命令提示符和输入区域的关键细节正常工作。

它应该在同一行。我怎样才能做到这一点？

我的尝试在提示符和 contenteditable div 上都使用了内联块。

示例在[这里](http://jsfiddle.net/4Aq4A/)，我认为问题可能出在 CSS 中：

```
.ux-command-container {
    clear:both;
    width:100%;
    display:block;
    font-size:0px;
    height:0px;
    margin:auto;
}
.ux-command-line {
    display:inline-block;
    font-size:12px;
    width:90%;
    word-wrap:break-word;
    vertical-align:top;
    padding:0;
    margin:auto;
    padding:0;
    line-height:12px;
    margin:0 auto;
}
.ux-command-line:focus {
    outline:none;
}
.ux-command-prompt {
    vertical-align:top;
    display:inline-block;
    width:20px;
    margin:auto;
    padding:0;
    font-size:12px;
    line-height:12px;
    white-space:normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:20:53.977

你需要删除

```
white-space: pre 
```

来自

```
.ux-panel 
```

宣言

# javascript - 带有javascript的PHP数组字段

> ID：15268296
> 
> 赞同：0
> 
> 时间：2013-03-07T10:08:29.217
> 
> 标签：javascript

我正在使用数组将数据添加到我的数据库中，并使用 JavaScript 根据是和否来显示和隐藏字段。

```
<input type="radio" id="medication1" name="medication[]" value="Yes" />
<input type="radio" id="medication2" name="medication[]" value="No" />

 $("#show").hide();
        $("input[name=medication]").click(function()
        {
            if ($("#medication1").attr('checked'))
                $("#show2").hide();
            if ($("#medication2").attr('checked'))
                $("#show2").show();
        }); 
```

没有数组块引号，它可以完美地工作，但是一旦我添加它们就不行了。有没有办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:10:42.027

您需要转义这些特殊含义 chars: `[]`:

```
$("input[name=medication\\[\\]]").click(function() 
```

[**来源**](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:11:04.083

在您的选择器中尝试此操作，`^=`您告诉选择名称以药物开头的所有输入

```
$("#show").hide();
        $("input[name^=medication]").click(function()
        {
            if ($("#medication1").attr('checked'))
                $("#show2").hide();
            if ($("#medication2").attr('checked'))
                $("#show2").show();
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:12:37.870

改变

```
$("input[name=medication]").click(function() 
```

到

```
$("input[name='medication[]']").click(function() 
```

# android - android中2条路径的真正交集（新路径）

> ID：15268300
> 
> 赞同：2
> 
> 时间：2013-03-07T10:08:39.637
> 
> 标签：android, canvas, drawing

我尝试在 Android 中与 2 条路径相交。这在第一次尝试时效果很好。当我放大绘图（ canvas.scale() ）时，相交的形状不精确且难看。有谁知道如何解决我的问题？

我喜欢将红场与红场内的蓝色矩形相交。 ![在此处输入图像描述](../Images/8d7ecf7bd4396b7e2f46ad2f72653059.png)

使用我的代码，结果是缩放时不精确的绿色交叉点：

![在此处输入图像描述](../Images/77c86544e7e72dcc62015fc12926d876.png)

这是我的代码：

```
protected void onDraw(Canvas canvas) {
super.onDraw(canvas);

canvas.scale(20,20);
Paint paint1 = new Paint();
paint1.setColor(Color.RED); paint1.setAntiAlias(true);
Path path=new Path();
path.moveTo(10, 10); path.lineTo(20, 10); path.lineTo(20, 20); path.lineTo(10, 20); path.close();
//canvas.drawPath(path, paint1);
Path path2=new Path();
path2.moveTo(15, 10); path2.lineTo(20, 10); path2.lineTo(20, 20); path.close();
paint1.setColor(Color.BLUE);
//canvas.drawPath(path2, paint1);

Region clip = new Region();
    clip.set((int)0,(int)0, (int)300,(int)300);
Region region1 = new Region();
region1.setPath(path, clip);
Region region2 = new Region();
region2.setPath(path2, clip);
region1.op(region2, Region.Op.INTERSECT);

Path pnew=region1.getBoundaryPath();
paint1.setColor(Color.GREEN);
canvas.drawPath(pnew, paint1); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:46:30.093

我的解决方案如下。在我与我的路径相交之前，我将它们放大。交叉路口后，我将它们缩小。我不知道这是否是一个好的解决方案，但它对我有用。它也很快。在我的示例中，我将圆形路径与自己创建的图案（条纹）相交。缩放时看起来仍然不错:-)

![在此处输入图像描述](../Images/ff5297a894a928f137894ed88d1e038d.png)

![在此处输入图像描述](../Images/7d5d61ae621e8c06a5c1602c3a5c2977.png)

这是我的代码：

```
 Path mypath=new Path(<desiredpath to fill with a pattern>);
    String sPatternType=cpath.getsPattern();

    Path pathtempforbounds=new Path(cpath.getPath());
    RectF rectF = new RectF();
     if (sPatternType.equals("1")){
         turnPath(pathtempforbounds, -45);
     }
     pathtempforbounds.computeBounds(rectF, true);

     float ftop=rectF.top;
     float fbottom=rectF.bottom;
     float fleft=rectF.left;
     float fright=rectF.right;
     float xlength=fright-fleft;

     Path pathpattern=new Path();

     float ypos=ftop;
     float xpos=fleft;

     float fStreifenbreite=4f;

     while(ypos<fbottom){
         pathpattern.moveTo(xpos,ypos);
         xpos=xpos+xlength;
         pathpattern.lineTo(xpos, ypos);
         ypos=ypos+fStreifenbreite;
         pathpattern.lineTo(xpos, ypos);
         xpos=xpos-xlength;
         pathpattern.lineTo(xpos, ypos);
         ypos=ypos-fStreifenbreite;
         pathpattern.lineTo(xpos, ypos);
         pathpattern.close();
         ypos=ypos+2*fStreifenbreite;

     }

     // Original vergrössern

     scalepath(pathpattern,10);
     scalepath(mypath,10);

     if (sPatternType.equals("1")){
         Matrix mdrehen=new Matrix();
         RectF bounds=new RectF();
         pathpattern.computeBounds(bounds, true);
         mdrehen.postRotate(45, (bounds.right + bounds.left)/2,(bounds.bottom + bounds.top)/2);
         pathpattern.transform(mdrehen);
     }

     RectF rectF2 = new RectF();
     mypath.computeBounds(rectF2, true);

     Region clip = new Region();
     clip.set((int)(rectF2.left-100f),(int)(rectF2.top -100f), (int)(rectF2.right+100f),(int)( rectF2.bottom+100f));
     Region region1 = new Region();
     region1.setPath(pathpattern, clip);

     Region region2 = new Region();
     region2.setPath(mypath, clip);

     region1.op(region2, Region.Op.INTERSECT);

     Path pnew=region1.getBoundaryPath();

     scalepath(pnew, 0.1f);
     cpath.setPathpattern(pnew);

public void turnPath(Path p,int idegree){
     Matrix mdrehen=new Matrix();
     RectF bounds=new RectF();
     p.computeBounds(bounds, true);
     mdrehen.postRotate(idegree, (bounds.right + bounds.left)/2,(bounds.bottom + bounds.top)/2);
     p.transform(mdrehen);
}

public void scalepath(Path p,float fscale){
     Matrix mverkleinern=new Matrix();
     mverkleinern.preScale(fscale,fscale);
     p.transform(mverkleinern);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:37:37.813

不幸的是，区域交集、联合等会产生非抗锯齿路径！

取决于你想用这个做什么，你可以将形状添加到相同的路径，但将路径设置为

```
myPath.setFillType(FillType.EVEN_ODD); 
```

这样，当你绘制它时，你可以在一个形状中创建一个“洞”。

# perl - 如何在 BASH 上下文中扩展 Perl 变量

> ID：15268301
> 
> 赞同：0
> 
> 时间：2013-03-07T10:08:45.697
> 
> 标签：perl, bash

好的，所以问题标题可能有点混乱。我在下面的代码中复制了我的实际问题：

我正在创建具有两个不同 IP 地址作为前缀的文件，然后我想仅列出具有特定 IP 地址前缀的文件：

我正在创建以“10.10.10.10”和“11.11.11.11”为前缀的文件，然后我只想列出带有“10.10.10.10”前缀的文件。

这是我的代码：

```
#!/usr/bin/perl -w
use strict;

my $ipaddr1 = '10.10.10.10';
for ( my $counter = 1; $counter < 10; $counter++)
{
    my $filename = $ipaddr1."_".$counter.".txt";
    open (my $fh, ">", $filename) or die "$! \n";
}

my $ipaddr2 = '11.11.11.11';
for ( my $counter = 1; $counter < 10; $counter++)
{
    my $filename = $ipaddr2."_".$counter.".txt";
    open (my $fh, ">", $filename) or die "$! \n";
}
print "Done with creating hte files. \n";

print "Lets print the files with only 10.10.10.10 prefix \n";

for my $var ( `ls -1 $ipaddr1_*` )  ### <<< this is the probelm
{
    print $var;
} 
```

**输出**：

```
Global symbol "$ipaddr1_" requires explicit package name at test.pl line 21.
Execution of test.pl aborted due to compilation errors. 
```

因此，我完全理解在执行 bash 命令时无法解释 perl 变量的错误。

**问题**：

如何做到这一点？我不想将显式 IP 地址传递给`ls -1`命令，而是想传递包含相应 IP 地址的变量。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:56:33.963

问题是 Perl 将下划线解释`_`为变量名的一部分。最直接的解决方案是添加消除歧义的括号，这样就不会发生这种情况：

```
`ls -1 ${ipaddr1}_*` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T13:05:08.377

`${ipaddr1}_`Ilmari Karonen 给出的语法是正确的解决方案。还有一些其他方面可能会改进：

1.  不要为 Perl 已经可以做的事情开始一个新的过程：

    ```
    for my file (glob "${ipaddr1}_*") {
      print "$file\n";
    } 
    ```

    这也更便携:)

2.  请注意，这`open my $fh, ">", $filename`会破坏文件。如果您只想创建不存在的文件但不想破坏内容，请改用`>>`附加模式。

3.  让您的生活更轻松，代码更短！使用循环和范围：

    ```
    for my $ipaddr ("10.10.10.10", "11.11.11.11") {
      for my $counter (1 .. 9) {
        my $filename = sprintf "%s_%d.txt", $ipaddr, $counter;
        open my $fh, ">", $filename or die "Can't open $filename: $!";
      }
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:19:48.250

**解决了：**

```
my $cmd = "ls -1 ". $ipaddr1."_*.txt";
for my $var ( `$cmd` )
{
    print $var;
} 
```

# video - 无法在 Facebook 墙上看到共享电影

> ID：15268306
> 
> 赞同：0
> 
> 时间：2013-03-07T10:09:01.433
> 
> 标签：video, facebook-opengraph

我正在尝试在 facebook 上分享此视频，但我没有在我的墙上看到缩略图和播放按钮。我认为所有的 og 元标记都在这里并且它曾经工作过。谁能发现问题？

谢谢，

[http://www.kaltura.com/index.php/extwidget/openGraph/wid/0_8km066su#.UThlE42n0M8.facebook](http://www.kaltura.com/index.php/extwidget/openGraph/wid/0_8km066su#.UThlE42n0M8.facebook)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:29:41.827

尝试以下操作：

1.  永远不要让描述为空。

2.  添加`og:url`元属性。

> > 元属性="og:url" 内容="http://www.kaltura.com/index.php/extwidget/openGraph/wid/0_8km066su#.UThlE42n0M8.facebook"

1.  将安全 URL 直接放在`og:image`和`og:video`元属性中，并删除`og:video:secure_url`和`og:image:secure_url`元属性。

> > 元属性="og:video" 内容="https://www.kaltura.com/kwidget/wid/0_8km066su/entry_id/1_d5o9twuk/ui_conf/8700151
> > 
> > 元属性="og:image" 内容="https://cdnbakmi.kaltura.com/p/1281471/sp/128147100/thumbnail/entry_id/1_d5o9twuk/version/100001"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:24:06.687

问题出在图像大小上——看起来 facebook 需要最小 200x200 缩略图——谢谢@alexi

# c++ - 为什么 QT 进度条最大值限制为 99%？

> ID：15268318
> 
> 赞同：1
> 
> 时间：2013-03-07T10:10:19.037
> 
> 标签：c++, qt4

我已经开始学习 QT 编程，我正在练习基本的信号和插槽编程，我编写了以下代码

```
 #include "mainwindow.h"
    #include "ui_mainwindow.h"

    MainWindow::MainWindow(QWidget *parent) :
         QMainWindow(parent),
              ui(new Ui::MainWindow)
      {
        ui->setupUi(this);
        ui->progressBar->setValue(1);
        ui->progressBar->setRange(0,100);
        connect(ui->horizontalSlider,SIGNAL(valueChanged(int)),
                                    ui->progressBar,SLOT(setValue(int)));
      }

     MainWindow::~MainWindow()
          {
          delete ui;
          } 
```

问题是当我将水平滑块移动到最大值时，进度条显示最大值为 99%。不是100%。QT中显示的默认值吗？还是我在代码中犯了一些错误？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:24:11.077

正如 paulm 的评论中提到的，[文档](http://qt-project.org/doc/qt-4.8/qabstractslider.html#QAbstractSlider)声明 QAbstractSlider 默认为 0-99 的范围。使用该滑块您永远不会达到 100。

您可以通过在`MainWindow`构造函数中执行以下操作来设置 QProgressBar 的范围以匹配滑块的范围来确认这一点：（已编辑完整代码）

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    /* naive way */
    //ui->progressBar->setValue(1);
    //ui->progressBar->setRange(0,100);

    /* "correct" way - note that I set the range FIRST */
    ui->progressBar->setRange(ui->horizontalSlider->minimum(),
                              ui->horizontalSlider->maximum());
    ui->progressBar->setValue(ui->horizontalSlider->value());  //initialize the progress bar to slider's initial value

    connect(ui->horizontalSlider,SIGNAL(valueChanged(int)),
            ui->progressBar,SLOT(setValue(int)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:16:19.733

您应该设置与进度条相对应的滑块属性。

我的意思是，在滑块中使用一个井`setMinimum`，`setMaximum`滑块的最大值将进度条设置为 100%

# java - 如何从另一个 java 程序启动一个 java 程序？

> ID：15268320
> 
> 赞同：0
> 
> 时间：2013-03-07T10:10:26.470
> 
> 标签：java, netbeans

我在 netbeans 项目的一个包中有 2 个 java 程序。1个是Run.java，另一个是JdbcSqlServerConnectivity.java。我提到了关于这个主题的早期问题，但似乎没有一个解决方案有效。我收到以下错误

```
javac JdbcSqlServerConnectivity.java stderr: javac: file not found: JdbcSqlServerConnectivity.java
javac JdbcSqlServerConnectivity.java stderr: Usage: javac <options> <source files>
javac JdbcSqlServerConnectivity.java stderr: use -help for a list of possible options
javac JdbcSqlServerConnectivity.java exitValue() 2
java JdbcSqlServerConnectivity stderr: Error: Could not find or load main class JdbcSqlServerConnectivity
java JdbcSqlServerConnectivity exitValue() 1 
```

运行.java代码

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

public class Run {

  private static void printLines(String name, InputStream ins) throws Exception {
    String line;
    BufferedReader in = new BufferedReader(
        new InputStreamReader(ins));
    while ((line = in.readLine()) != null) {
        System.out.println(name + " " + line);
    }
  }

  private static void runProcess(String command) throws Exception {
    Process pro = Runtime.getRuntime().exec("/" + command + "");
    printLines(command + " stdout:", pro.getInputStream());
    printLines(command + " stderr:", pro.getErrorStream());
    pro.waitFor();
    System.out.println(command + " exitValue() " + pro.exitValue());
  }

  public static void main(String[] args) {
    try {
      runProcess("javac JdbcSqlServerConnectivity.java");
      runProcess("java JdbcSqlServerConnectivity");
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:17:22.267

您应该提供 file 的完整系统路径`JdbcSqlServerConnectivity.java`。例如，如果`JdbcSqlServerConnectivity.java`位于`D:\Temp\com\example`目录内，则应指定如下：

```
runProcess("javac D:\\Temp\\com\\example\\JdbcSqlServerConnectivity.java");
runProcess("java D:\\Temp\\com\\example\\JdbcSqlServerConnectivity"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T10:23:00.143

尝试这个：

runProcess("java -cp全*路径 JdbcSqlServerConnectivity.java* ");

# android - 如何在 ACTION_DOWN 中缩放图像而不在 android 中调用 ACTION_MOVE？

> ID：15268321
> 
> 赞同：0
> 
> 时间：2013-03-07T10:10:27.707
> 
> 标签：android, touch-event

我想缩放图像，`ACTION_DOWN`但同时我`ACTION_MOVE`会调用并且我的移动图像逻辑将执行。但我不想在`ACTION_MOVE`之后打电话`ACTION_DOWN`。我想提出一些条件，以防止`MOVE`采取行动，但我不知道是什么以及如何。

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:18:18.323

为什么不只在适当的动作发生时才调用你的逻辑呢？就像是：

```
public boolean onTouch(View v, MotionEvent e){
    switch(e.getAction()){
    case MotionEvent.ACTION_DOWN:
        //scale here
        break;
    case MotionEvent.ACTION_MOVE:
        //move here
        break;
    }
} 
```

# html - 链接处于活动状态时突出显示标题

> ID：15268324
> 
> 赞同：0
> 
> 时间：2013-03-07T10:10:36.900
> 
> 标签：html, css

这只能由css完成吗？当 ID1 链接处于活动状态时，我希望突出显示 H1。

```
<a href=#id1>ID1</a>
<a href=#id1>ID2</a>
<h1 id="id1">This is the header</h1>
<h1 id="id2">This is the header</h1> 
```

因此，如果 ID1 链接处于活动状态，则 ID 为“id1”的 H1 将是蓝色而不是红色，例如。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:26:51.447

你可以用 :target 做到这一点

## 当 URL 中的哈希值和元素的 id 相同时，CSS 中的 :target 伪选择器匹配。

```
<a href=#id1>ID1</a>
<a href=#id2>ID2</a>
<h1 id="id1">This is the header</h1>
<h1 id="id2">This is the header</h1> 
```

和CSS

```
:target{
    color:red;

} 
```

和[结果](http://jsfiddle.net/g5QDp/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:55:20.703

上面的帖子是正确的，还有一个更正，因为它适用于悬停。

单击后使用javascript将CLASS =“活动”添加到元素，可以说

```
h1.active{
   color:red;
   font-weight:bold
} 
```

点击链接后 Html 将有 class="active"

```
<a id=a1 href=#id1 onclick="javascript:getElementById('id1').className='active'">ID1</a>
<a id=a2 href=#id1 onclick="javascript:getElementById('id2').className='active'">ID2</a>
<h1 id="id1" class="">This is the header</h1>
<h1 id="id2" class="">This is the header</h1> 
```

我希望这可能会有所帮助:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T10:14:37.503

您可以将兄弟选择器 ( `~`) 与`:active`状态结合使用。如[this fiddle](http://jsfiddle.net/Wolfy87/5M8vV/)所示。

```
#id1-ref:active ~ #id1 {
    color: #FF0000;
}

#id2-ref:active ~ #id2 {
    color: #0000FF;
} 
```

不过，您确实必须向锚标签添加额外的 ID。

### 编辑

找到了一个很好的方法来做目标。这可能会更好：http: [//jsfiddle.net/Wolfy87/5M8vV/2/](http://jsfiddle.net/Wolfy87/5M8vV/2/)

```
h1:target {
    color: #FF0000;
} 
```

[选择器的信息`:target`。](http://css-tricks.com/on-target/)

# sql - Mybatis 映射 getTimeInMillis

> ID：15268326
> 
> 赞同：0
> 
> 时间：2013-03-07T10:10:41.750
> 
> 标签：sql, mybatis

我想对 getCurrentTimeInMilliseconds 的效果说几句

```
<insert id="insertToMyTable" parameterType="MyStuff">
    insert into my_table ( name, id, amount, modified_time )
    values (
        #{item.bondId}, 
        #{item.clientId}, 
        #{item.amount},
        $$-getCurrentTimeInMilliseconds-$$
     )
</insert> 
```

我目前正在将 getCurrentTimeInMilliseconds 作为 MyStuff 对象上的 java 方法实现，这是一个丑陋的解决方法（它不是 MyStuff 对象数据的一部分，纯粹是作为记录数据库信息的黑客方法）

如果它是用 SQL 编写的，我希望尽可能接近 ANSI-SQL - 即每个供应商的运行方式不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:29:33.997

我没有找到比使用 UNIX_TIMESTAMP() 替代更好的答案 - 这适用于 MySQL。您可以执行与 Ansi SQL 兼容的 0+CURRENT_TIMESTAMP() 但将结果保留为 20130303434332221 样式 int，而不是 13069293487 样式（即毫秒计数）。如果这有意义

# android - 操作栏与 API 级别 8 兼容问题

> ID：15268328
> 
> 赞同：1
> 
> 时间：2013-03-07T10:10:47.543
> 
> 标签：android

我在我的活动中使用了操作栏。当我在具有 android 4.2 版本的模拟器上运行应用程序时，它工作正常。但是当我在具有 android 2.3.5 版本的真实手机上运行应用程序时，当应用程序到达具有操作的那个活动时酒吧它正在崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:15:54.787

如果您想要一个与所有 api 版本的 android 兼容的操作栏，您应该使用 ActionBarSherlock。您还应该使用支持库

查看此以获取有关 ABS 的更多信息[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

它维护得很好，开源并且受到大多数 Android 开发人员的强烈推荐，它甚至在其中一个 Google I/O 研讨会上被提及（不记得是哪一个在我脑海中浮现）

**更新**- 关于导航的 Google I/O 研讨会[https://developers.google.com/live/shows/5698617/](https://developers.google.com/live/shows/5698617/)值得一看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:17:17.157

操作栏在版本 11 之后开始，因此您需要添加支持库才能在旧版本中使用它：

1- 下载这个库（Sharlok Action Bar）

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

2-并在你的类中使用 getSupportActionBar 而不是获取操作栏崩溃

# android - 为什么调用 openContextMenu(...) 后没有显示上下文菜单？

> ID：15268329
> 
> 赞同：0
> 
> 时间：2013-03-07T10:10:48.673
> 
> 标签：android

我编写了一个应用程序，当我单击选项菜单时，它应该在视图中显示一个上下文菜单。我在 onCreate() 方法中注册了一个视图。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    mLatestIntent = getIntent();
    setContentView(R.layout.details_gallery);
    DataManager.getInstance().registerImageUpdateListener(this);
    mGallery = (HomeScreenGallery)findViewById(R.id.details_gallery);
    mGallery.setSingleTapListener(this);
    mAdapter = new
           EventDetailsAdapter(this,DataManager.getInstance().getChannel().getItems());
    mGallery.setAdapter(mAdapter);

    **registerForContextMenu(mGallery);**
    setData();
} 
```

我在 onOptionsItemSelected() 方法中调用了 openContextMenu() 并将注册的视图发送给它

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case Constants.OPTION_MENU_SHARE:
        **this.openContextMenu(mGallery);**
        break;
    }
    return super.onOptionsItemSelected(item);
} 
```

但是当我点击选项菜单时没有任何显示，为什么？

# java - 如何使用 Hector 在 Cassandra 中保留新的客户行？

> ID：15268330
> 
> 赞同：2
> 
> 时间：2013-03-07T10:10:51.477
> 
> 标签：java, jsp, nosql, cassandra, hector

我花了一整天的时间尝试将数据插入到一个简单的 cassandra 数据库中，用于存储用户名、密码、电子邮件和电话。我所做的所有研究都会让我回到[http://hector-client.github.com/hector/build/html/content/getting_started.html#update](http://hector-client.github.com/hector/build/html/content/getting_started.html#update)。我已经按照这些示例进行了操作，但是当我尝试执行我的代码时：

```
 ConfigurableConsistencyLevel ccl = new ConfigurableConsistencyLevel();
    Map<String, HConsistencyLevel> clm = new HashMap<String, HConsistencyLevel>();

    clm.put("customers", HConsistencyLevel.ONE);
    ccl.setReadCfConsistencyLevels(clm);
    ccl.setWriteCfConsistencyLevels(clm);
    Cluster cluster = HFactory.getOrCreateCluster("test-cluster", "localhost:9160");     

    Keyspace ksp = HFactory.createKeyspace("qualebs", cluster);
    ksp.setConsistencyLevelPolicy(ccl);

    ColumnFamilyTemplate<String, String> template = new ThriftColumnFamilyTemplate<String, String>(ksp, "customers", StringSerializer.get(), StringSerializer.get());

    ColumnFamilyUpdater<String, String> updater = template.createUpdater("KeyIsUsername");
    updater.setString("name", "the name");
    updater.setString("email", "email@email.com");
    template.update(updater); 
```

尝试运行我的应用程序时出现以下异常：

```
Caused by: InvalidRequestException(why:Not enough bytes to read value of component 0)
at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:20833)
at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:964)
at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:950)
at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:246)
at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:243)
at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:104)
at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:258)
... 57 more 
```

我需要帮助来了解此错误的原因。

我从 cqlsh 终端创建的架构看起来像

```
 CREATE TABLE customers(username text PRIMARY KEY, name text, email text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:39:11.500

另一种选择可能是尝试 playOrm，它会为您正确转换并为您创建 CF，因此您不必担心创建错误;)。只是一种选择。

[通过PlayOrm](http://buffalosw.com/products/playorm/)主页或[GitHub](https://github.com/deanhiller/playorm)获取框架

# java - 从java读取csv文件的多行单元格

> ID：15268336
> 
> 赞同：0
> 
> 时间：2013-03-07T10:11:03.717
> 
> 标签：java, csv

我有一个我想用 Java 读取的 CSV 文件，问题是我的 CSV 文件包含多行单元格，例如这是我的 CSV 文件的一个条目

```
"[Not Before]
  25-01-2011 05:30:00

[Not After]
  16-03-2014 05:29:59

","Valid","Signature verified","C:\Users\ngoel\Desktop\drivers\x64\aksclass.sys" 
```

这只是我的 CSV 文件的一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-31T15:07:19.167

我遇到了类似的问题，尽管在这种情况下是创建可以处理多行单元格值的 CSV。

我要替换的代码是由另一位开发人员手工制作的，在解析输入字段时还有一些其他奇怪的地方。

我选择使用开源库[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)替换此代码，因为它通过一个相当简单的 API 为我处理了多行和其他常见的解析问题，该 API 具有很好的简单示例和文档。

# android - 位图大小超出旧设备上的 VM 预算

> ID：15268341
> 
> 赞同：2
> 
> 时间：2013-03-07T10:11:13.933
> 
> 标签：android, imageview, android-viewpager, out-of-memory

我在 BitmapFactory 中遇到异常。我已经阅读了其他问题，唯一的解决方案是加载我的图像的缩小版本，但在我的情况下，我需要使用捏缩放系统以全分辨率显示它们（图像是包含文本的传单） . 300ko 的图像只有 466x700px，它们显示如下：

Viewpager 类：

```
@Override
public View instantiateItem(ViewGroup container, int position) {
    ImageView imageView = new ImageView(container.getContext());
    PhotoViewAttacher attacher = new PhotoViewAttacher(imageView);
    try {
        Drawable toRecycle = imageView.getDrawable();
        if (toRecycle != null) {
            ((BitmapDrawable) imageView.getDrawable()).getBitmap().recycle();
        }
        imageView.setImageDrawable(getCat()[position]);
    } catch (IOException e) {
        e.printStackTrace();
    }
    attacher.update();
    container.addView(imageView);
    return imageView;
} 
```

和 getCat() ：

```
public static Drawable[] getTheme_amiante_s_carreleur(Context ctx) throws IOException {
    ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(ctx, 2, 1);
    Drawable[] theme_amiante_s_carreleur = {
        Drawable.createFromStream(expansionFile.getInputStream("amiante_carreleur_s_1.png"), "src"),
        Drawable.createFromStream(expansionFile.getInputStream("amiante_carreleur_s_2.png"), "src"),
        Drawable.createFromStream(expansionFile.getInputStream("amiante_carreleur_s_3.png"), "src"),
        Drawable.createFromStream(expansionFile.getInputStream("amiante_carreleur_s_4.png"), "src"),
        Drawable.createFromStream(expansionFile.getInputStream("amiante_carreleur_s_5.png"), "src"), };
    return theme_amiante_s_carreleur;
} 
```

它在我的 Nexus 4 上运行良好，但在 Galaxy S2 或 LG Optimus Black 上，由于内存不足错误，系统迅速强制关闭：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method) 
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573) 
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:439) 
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697) 
at android.graphics.drawable.Drawable.createFromStream(Drawable.java:657) 
at com.ctai.iris.ListeImages.getTheme_formation_ce_obligatoires(ListeImages.java:1163) 
at com.ctai.iris.ImageViewLow.getCat(ImageViewLow.java:186) 
at com.ctai.iris.ImageViewLow$SamplePagerAdapter.instantiateItem(ImageViewLow.java:77) 
at com.ctai.iris.ImageViewLow$SamplePagerAdapter.instantiateItem(ImageViewLow.java:1) 
at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801) 
at android.support.v4.view.ViewPager.populate(ViewPager.java:992) 
at android.support.v4.view.ViewPager.populate(ViewPager.java:881) 
at android.support.v4.view.ViewPager$3.run(ViewPager.java:237) 
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92) 
at android.os.Looper.loop(Looper.java:130) 
at android.app.ActivityThread.main(ActivityThread.java:3691) 
at java.lang.reflect.Method.invokeNative(Native Method) 
at java.lang.reflect.Method.invoke(Method.java:507) 
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 
at dalvik.system.NativeStart.main(Native Method) 
```

知道如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:15:05.243

不使用时回收位图。压缩位图以减少内存使用。看看这个链接。[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

使用 MAT Analyzer 检查位图使用了多少内存。

检查链接。讨论内存管理以及如何使用 MAT 查找内存泄漏。 [http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。

还要删除 Drawables 的静态。我不确定，但试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:22:19.800

就像我在对@Raghunandan 的评论中所说的那样：当您回收位图时，重要的部分实际上是将所有对它的引用设置为空。[文件](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)说

> 这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

此外，在您的情况下，我建议使用Android 开发者网站的[“缓存位图”部分中描述的技术。](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)它是[“高效显示位图”](http://developer.android.com/training/displaying-bitmaps/index.html)课程的一部分。

# c# - 通过电话搜索联系人出现“无可用来源”异常

> ID：15268343
> 
> 赞同：0
> 
> 时间：2013-03-07T10:11:18.920
> 
> 标签：c#, debugging, windows-phone-7, contacts

[我从msdn](http://msdn.microsoft.com/en-us/library/hh286414%28v=vs.92%29.aspx)下载了这个示例“Windows Phone 的联系人过滤和匹配” ：

当我运行它并选择“电话”选项并单击搜索而不填写电话号码时，它会引发在新选项卡中打开的异常：

```
"No Source Available. No source found. You need to load symbols in order to find the source for the current stack frame". 
```

有人可以帮忙吗？因为我正在尝试在我的项目中构建类似的东西，但我一直遇到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:19:11.823

我在模拟器中添加了联系人：

*   名字多多
*   电话 0600000000

我运行应用程序，在文本框中选择带有 0600000000 的电话。我单击搜索按钮，它在我的模拟器中运行良好。

在示例项目中，如果选择电话，则必须输入整数值。

# vba - 检查大量单元格的最有效技术是否包含错误？

> ID：15268348
> 
> 赞同：6
> 
> 时间：2013-03-07T10:11:31.523
> 
> 标签：vba, excel

我有一个电子表格，其中包含许多请求数据的函数调用。我正在编写一个函数（在 VBA 中）来检查任何单元格是否包含错误值“#VALUE”等。

目前，我正在逐行、逐列地迭代，首先检查单元格是否包含公式，如果包含，则检查 instr 中的“#VALUE”、“#N/A”等。

但是，我想知道是否会更快地模拟在 excel 中单击整个列，然后在 VBA 中单击“ctrl + f”获取值……。

什么是最有效的方法？我正在检查一张 27 列 x 1200 行的表格。

编辑我刚刚意识到有些单元格有“#N/A”，这是因为它们不包含特定的公式。我只需要在包含特定公式的单元格中搜索......这可能吗？

EDIT2 我实际上需要记录一个返回结果的宏，就像“查找全部”一样。我用过“查找”，我可以得到一个布尔值，但“查找所有”不记录任何 VBA 代码....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T10:44:48.013

您可以使用`SpecialCells`仅返回包含错误的单元格。

```
Sub Demo()
    Dim sh As Worksheet
    Dim rng As Range, cl As Range

    For Each sh In ActiveWorkbook.Worksheets
        Set rng = Nothing
        On Error Resume Next
        Set rng = sh.UsedRange.SpecialCells(xlCellTypeFormulas, xlErrors)
        On Error GoTo 0
        If rng Is Nothing Then
            Debug.Print "No Errors"
        Else
            For Each cl In rng
                If cl.Formula Like "*" Then  ' <-- replace * with your criteria
                    Debug.Print cl.Address
                End If
            Next
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:17:16.433

鉴于您想要最有效的方法，您可以尝试这种避免缓慢范围循环的方法

1.  通过公式 chichi 循环`SpecialCells`包含错误（根据其他解决方案）
2.  用于`Find`检测特定公式，而不是通过 (1) 中的每个单元格进行简单循环

此代码使用该`R1C1`方法输入，`Find`因此代码在必要时更改此`Application`设置（然后在最后返回）

我建议您记录您希望找到的公式，然后将其输入。`R1C1`符号的最大优点是它与实际的行和列位置无关。

例如在`A1`符号中的一个公式

*   =SUM(A1:A4) in`A5`需要对`SUM(B1:B4) in`B5进行不同的搜索
*   在`R1C1`这`=SUM(R[-4]C:R[-1]C)`两种情况下

**代码**

```
Sub Demo()
    Dim ws As Worksheet
    Dim rng1 As Range
    Dim rng2 As Range
    Dim rng3 As Range
    Dim strAddress As String
    Dim bRefSTyle

    If Application.ReferenceStyle = xlA1 Then
        Application.ReferenceStyle = xlR1C1
        bRefSTyle = True
    End If

    For Each ws In ActiveWorkbook.Worksheets
        Set rng1 = Nothing
        On Error Resume Next
        Set rng1 = ws.UsedRange.SpecialCells(xlCellTypeFormulas, xlErrors)
        On Error GoTo 0
        If rng1 Is Nothing Then
            Debug.Print ws.Name & ": No Formulae errors"
        Else
            'search errors for particular formula
            'this sample looks for a formula which SUMS the four cells directly above it
            Set rng2 = rng1.Find("=SUM(R[-4]C:R[-1]C)", , xlFormulas, xlWhole)
            If Not rng2 Is Nothing Then
                strAddress = rng2.Address
                Set rng3 = rng2
                Do
                 Set rng2 = rng1.Find("=SUM(R[-4]C:R[-1]C)", rng2, xlFormulas, xlWhole)
                    Set rng3 = Union(rng2, rng3)
                Loop While strAddress <> rng2.Address
                Debug.Print ws.Name & ": " & rng3.Address
            Else
                Debug.Print ws.Name & ": error cells, but no formulae match"
            End If
        End If
    Next
    'restore styles if necessary
    If bRefSTyle Then Application.ReferenceStyle = xlA1
End Sub 
```

# ruby-on-rails - 使用 SSL 的 Rails 和资产主机

> ID：15268351
> 
> 赞同：4
> 
> 时间：2013-03-07T10:12:02.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, admin, asset-pipeline

我正在尝试使用文档中的请求对象在 http 和 https 上创建我的网站：http: [//api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)

我已经尝试了许多配置和许多组合，现在这就是我在 environment/staging.rb 中所拥有的

```
config.action_controller.asset_host = Proc.new { |source, request=nil|
if request && request.ssl?
  "https://staging.foobar.it"
else
  "http://assets#{ ( source.length % 4 ) + 1 }.staging.foobar.it"
end
} 
```

使用此解决方案，请求对象似乎始终设置为零。

我正在使用 Ruby 1.9.3 和 rails 3.2.12，nginx 作为反向代理，unicorn 作为应用服务器，并预编译我的资产

是否有人能够对此进行配置并将 https 网站链接到正确的 https 资产服务器？我究竟做错了什么？

# eclipse-plugin - Sonar for Eclipse：无法运行本地分析

> ID：15268352
> 
> 赞同：1
> 
> 时间：2013-03-07T10:12:05.087
> 
> 标签：eclipse-plugin, sonarqube

我已经成功安装了 eclipse 的声纳插件，但是当我尝试为声纳“运行本地分析”时，eclipse 给出了一个错误消息：

`An internal error occurred during: "Sonar Analysis".
Unable to create markers`

声纳的控制台打印了以下信息：

```
用法：javaw [-options] 类 [args...]
           （执行一个类）
   或 javaw [-jar] [-options] jarfile [args...]
           （执行一个jar文件）

其中选项包括：
    -cp -类路径
              设置应用程序类和资源的搜索路径
    -D=
              设置系统属性
    -verbose[:class|gc|jni]
              启用详细输出
    -version 打印产品版本
    -版本：
        需要指定版本才能运行
    -showversion 打印产品版本并继续
    -jre 限制搜索 | -no-jre-restrict-搜索
              在版本搜索中包含/排除用户私有 JRE
    -agentlib:[=]
              加载本机代理库，例如 -agentlib:hprof
              另请参见 -agentlib:jdwp=help 和 -agentlib:hprof=help
    -代理路径：[=]
              按完整路径名加载本机代理库
    -javaagent:[=]
              加载 Java 编程语言代理，参见 java.lang.instrument
    -？-help 打印此帮助信息
    -X 打印非标准选项的帮助
    -splash：显示带有指定图像的启动画面
    -ea[:...|:]
    -enableassertions[:...|:]
              启用断言
    -da[:...|:]
    -disableassertions[:...|:]
              禁用断言
    -esa | -启用系统断言
              启用系统断言
    -dsa | -禁用系统断言
              禁用系统断言

```

请帮助如何在 Eclipse 中进行本地分析。

**[更新：版本详细信息]**
Eclipse：Indigo (3.7.1)
声纳插件：3.0.0
声纳（服务器）：3.4.1
声纳 Web 服务客户端：3.4.0
Java：1.4.1（“Java EE IDE”属性在 Eclipse 功能中）
本地 Java 安装：1.6

# javascript - 将多个元素链接在一起，以便它们共享相同的内容

> ID：15268361
> 
> 赞同：18
> 
> 时间：2013-03-07T10:12:19.253
> 
> 标签：javascript, jquery, html, css

是否可以让两个元素共享相同的内容：

```
----------
| Line 1 |
| Line 2 |
| Line 3 |
----------
    [SOME OTHETR STUFF HERE]
----------
| Line 4 |
| Line 5 |
| Line 6 |
---------- 
```

或者更复杂的例子，使用[css3 列](https://developer.mozilla.org/en-US/docs/CSS/columns)

```
------------------- --------- --------------------------------
| Line 1 | Line 4 |   OTHER   |    Line 7    |    Line 10    |
| Line 2 | Line 5 |   STUFF   |    Line 8    |    Line 11    |
| Line 3 | Line 6 |   HERE    |    Line 9    |    Line 12    |
------------------- --------- -------------------------------- 
```

希望这有意义吗？

此外，可以使用不同的宽度、高度、列和样式设置不同的 div。

感谢您的反馈意见。

* * *

**试图详细说明：**

如果你们中的任何人都知道像 inDesign 这样的程序，您可以在其中创建两个文本字段并将它们链接在一起，以便文本从第一个文本字段继续到下一个文本字段。再次，您可以将另一个链接到集合，如果文本足够长，它将从文本字段开始到第二个并在最后一个结束：

这些框可以放置在屏幕周围，它们唯一的共同之处是它们共享相同的内容。

```
Box 1
------------------------------
Lorem ipsum dolor sit amet, 
consectetur adipiscing elit. 
Proin rutrum ligula nec quam 
molestie sed rutrum justo 
------------------------------

Box 2 
------------------------------ 
auctor. Quisque pulvinar diam 
nisl. Curabitur porttitor 
vehicula dui. Sed tempus 
venenatis est, non egestas 
------------------------------

Box 3
------------------------------ 
urna consequat a. Morbi diam 
mi, fermentum non lobortis 
eget, rhoncus id arcu. 

------------------------------ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T18:21:55.750

[这是一个解决方案](http://jsbin.com/iretip/18)，它可以根据您的[原始](https://stackoverflow.com/a/15279334/115866).

```
jQuery(function($) {
  var content = $(".c1").html(),
      $elems = $("div").empty(),
      lineHeight = 20,
      offset = 0,
      wholeThing = $("<div />"),
      maxWidth = 0;
  $elems.each(function() { maxWidth = Math.max(maxWidth, $(this).width()); });

  $elems.each(function() { 
    var thisWidth = $(this).width(),
        thisHeight = $(this).height(),
        floatHeight = (thisHeight / lineHeight | 0) * lineHeight;

    wholeThing.append($("<div />").css({
      width: maxWidth - thisWidth,
      height: floatHeight,
      clear: "right",
      float: "right"}));
    if (thisHeight % lineHeight) {
        wholeThing.append($("<div />").css({
          width: maxWidth,
          height: thisHeight - floatHeight,
          clear: "right",
          float: "right"}));
      });
    }

  wholeThing.css("width", maxWidth).append(content);

  $elems.each(function() {

    var $content = wholeThing.clone().appendTo(this);

    $content.css({
      position: "absolute",
      left: 0,
      top: -offset
    });

    offset += $(this).height();
  });
}); 
```

这与您采用的方法相同，但更进一步。您`div`使用全文创建了 s ，将它们定位在目标 div 内，向上移动“链”中所有先前容器的组合高度。

我添加的是这样的：

*   内容`div`（称为`wholeThing`，最终乘以并添加到每个容器的内容）的宽度设置为所有容器的*最高*宽度。

*   在 的右侧`wholeThing`，我们放置`float`ed`divs`以确保文本根据适用的宽度进行换行。在示例中，第一个容器的宽度为 200 像素，最高宽度（因此 的宽度`wholeThing`）为 300 像素。因此，我们在右边缘放置一个宽度为 100 像素且高度与第一个容器相同的`float`ed （向下舍入为行高的整数倍）。`div`这解决了“不同宽度”的问题。

*   之后，假设`div`'s 的高度不是行高的倍数，我们添加一个额外的全角浮动，以确保底部没有半行，解决了行高问题。

[由于此错误](https://code.google.com/p/chromium/issues/detail?id=34985)，“四舍五入到行高的倍数”仅适用于某些 webkit 浏览器。这似乎已在 Chrome 中修复，但我仍然在其他浏览器中看到它（特别是 Safari 5 和 Android 浏览器）。

如果此问题不存在，您可以改为使宽度约束`div`具有容器的全高（而不是向下舍入），并使全宽`div`始终具有高度 1（并在递增时考虑该额外像素`offset`） . 这将具有令人敬畏的优势，即您不需要具有固定的行高。[这是一个例子](http://jsbin.com/iretip/20/)——它适用于 Chrome、Firefox、Opera 和 IE9+，但不适用于上述 webkit 浏览器。它似乎也适用于 IE8，虽然我还没有完全弄清楚*为什么*，因为我的第一个版本（适用于 Safari 的那个）在 IE8 中中断。老实说，我在这里并没有花太多时间在 IE8 上。

因此，顶级版本应该可以在 IE9+ 以及所有其他浏览器中运行，或多或少。

就列而言，我没有看到这种情况发生（除了基本上用 div 重建列）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T18:28:55.780

伙计，我猜你在谈论[CSS Regions](http://html.adobe.com/webstandards/cssregions/)。这是一个非常酷的功能，但[浏览器支持](http://caniuse.com/#search=regions)还不完善：

![来自 caniuse.com 的 CSS 区域支持图表](../Images/84d8bb929c691dc31b522d6679315a3f.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T18:50:35.417

我现在能想到的最好的方法是：http: [//jsbin.com/iretip/3/edit](http://jsbin.com/iretip/3/edit)

这仅在以下情况下有效：

*   [元素高度模数线高等于零](http://jsbin.com/iretip/7/embed?live)，
*   [所有元素共享相同的宽度](http://jsbin.com/iretip/6/embed?live)
*   它[不适用于乘列](http://jsbin.com/iretip/4/embed?live)。

代码贴在下面，[演示位于此处](http://jsbin.com/iretip/3/embed?live)：

```
 <div class="c1 c">
    Line 1<br />Line 2<br />Line 3<br />Line 4<br />Line 5<br />Line 6<br />Line 7<br />Line 8<br />Line 9<br />Line 10<br />Line 11<br />Line 12<br />Line 13<br />Line 14<br />Line 15<br />Line 16<br />Line 17<br />Line 18<br />Line 19<br />Line 20<br />Line 21<br />
  </div>
  <div class="c2 c"></div>
  <div class="c3 c"></div> 
```

CSS：

```
.c {
  position: relative;
  line-height: 20px;
  overflow: hidden;
  width: 160px;
}

.c1 {
  height: 200px;
  background: yellow;
}
.c2 {
  position: absolute;
  top: 300px;
  height: 140px;
  background: blue;
}
.c3 {
  position: absolute;
  top: 300px;
  left: 200px;
  height: 200px;
  background: red;
} 
```

和 JavaScript：

```
jQuery(function($) {
  var content = $(".c1").html(),
      $elems = $("div").empty(),
      lineHeight = 20,
      offset = 0;

  $elems.each(function() {
    var $wrapper = $("<div/>").appendTo(this),
        $content = $("<div/>").html(content).appendTo($wrapper);

    $wrapper.css({
      position: "absolute",
      left: 0,
      top: -offset
    });

    offset += $(this).height();
  });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-13T07:45:20.400

您的第一个布局可能仅使用 CSS 即可实现（没有 JavaScript，没有不受支持的属性）。但是，您可能无法准确设置框的大小，毕竟我们会伪造它，直到浏览器做出来。

**[让我们直接进入小提琴](http://jsfiddle.net/5gZgY/)**- 尝试调整它的大小等以了解它是如何工作的。

基本上我们依赖于`float`行为，这个无处不在的经常被滥用的属性最初是为在图像周围流动的段落文本而构建的。现在，既然我们可以让任何东西浮动，我们将在*这里浮动您的其他一些*内容！CSS 的其余部分纯属诡计——让浮动内容看起来好像它不是容器的一部分。在实践中，您可能更喜欢“人造内容块”方法，这与流行的*人造栏目*不同。

一个问题是缺乏对内容中断位置的控制——分隔符必须直接插入到文本中。但是，如果容器宽度是固定的，您可以在服务器端以足够的准确度插入分隔符（在您想要中断的半行文本内）。

最后，代码如下：

```
.container {
    padding:10px;
    border:1px solid black;
    background: #ccc;
    text-align:justify;
}
.other-stuff {
    float:left;
    height:130px;
    width:100%;
    border-top:1px solid black;
    border-bottom:1px solid black;
    /*left and right margins are so negative to "cover up" .container border*/
    margin:10px -11px;
    /*and now padding to offset left and right negative margins*/
    padding:0 11px;
    /*pretend this is see-through*/
    background:#fff;
} 
```

标记非常简单 -`.other-stuff`在内部`.container`，都填充了虚拟内容以进行很好的衡量。瞧，注意文本是如何很好地换行的：

![说真的，谁不喜欢小猫？](../Images/2c75964d6857a07bdf452ad72ffb99df.png)

尝试用 css3 列伪造它没有运气，除非可能[`column-gap`](https://developer.mozilla.org/en-US/docs/CSS/column-gap)对伪造的背景有用（即将容器分成两列，间隙与分隔符内容一样宽）。

***注意：****请避免使用 JS 进行这种内容布局调整，因为它会导致事先没有样式的内容闪现。但是，如果使用 AJAX 异步检索内容，则使用 JS 是合适的——这样可以在附加到页面之前对其进行处理。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T15:41:59.593

这是一些简单的JS。[http://jsfiddle.net/wesleyhales/vsD3m/](http://jsfiddle.net/wesleyhales/vsD3m/)

HTML：

```
<div id="input">Line 1
Line 2
Line 3
Line 4</div>

<div id="box1">  
</div>
<hr/>
My content... more content.. and more content
<hr/>
<div id="box2">  
</div> 
```

JS：

```
var myinput = document.getElementById('input').innerHTML;
var threshhold = 2;
var totalLines = myinput.split('\n');
for(var i = 0; i < totalLines.length; i++){
    if(i < threshhold){
       document.getElementById('box1').innerHTML += totalLines[i] + '\n'; 
    }else{
       document.getElementById('box2').innerHTML += totalLines[i] + '\n';  
    }    
} 
```

总的来说，你必须有一个源输入，包括所有的行。然后你需要为每个盒子设置一个阈值——你想要多少行？（或框高度的基本阈值或行中的字符等......）。然后，您需要一个目标来分配到满足每个阈值的时间。

如果这在 CSS 中可用，则需要大量的前期设置，但仍然很酷。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-15T21:57:00.587

这与读取缓冲区问题大致相同（即读取一堆文本，通过缓冲区加载进行缓冲区加载，然后将其解析为其他单元（纯文本情况下的行））。数据和显示代码之间的缓冲层会有所帮助。（对不起，我没有任何代码示例。）

# r - R在向前和向后for循环中显示不同的结果

> ID：15268364
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:12:28.390
> 
> 标签：r, for-loop, floating-point, floating-accuracy

如果我使用 for 循环向前或向后搜索，则在搜索数组中的某个元素时会得到不同的答案。

示例：给出正确答案的代码

```
vg   = rep(seq(0.9,1.1,0.01),90)
vals = seq(0.9,1.05,0.01)

for(val in vals){
  idx = c()
  idx = which((vg) %in% (val))
  cat(val,":",length(idx),"\t")
} 
```

此代码提供：0.9：90 0.91：90.92：90 0.93：90 0.94：90 0.95：90 0.96：90 0.95：90 0.98：90 0.97：90.98：90.99：90.98：90.99：90 1：90 1.01：90 1.02：90 1.03：90 1.04：90 1.05 : 90

哪个是对的。但是，如果我使用下面的代码更改上面的 vg 变量的序列：

```
vg   = rep(seq(1.1,0.9,-0.01),90)
vals = seq(0.9,1.05,0.01)

for(val in vals){
  idx = c()
  idx = which((vg) %in% (val))
  cat(val,":",length(idx),"\t")
} 
```

我得到如下所示的答案，在搜索 0.96、0.97 等时显示 0 个元素。

**0.9：0** **0.91：0 0.92：0** 0.93：90 0.94：90.95：90 **0.96：0 0.97：0 0.98：0 0.99：0** 1：90 1.01：90 1.02：90 1.03：90 1.04：90 1.05：90 1.04：90 1.05

为什么会出现这种差异，因为我们在两个代码中搜索完全相同的元素？这是一个R错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:38:24.567

为了扩展 Andrie 的评论，这***是***一个浮点问题。引用这本好书，[The R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)

> 一旦我们越过阿切伦河，我们就到达了第一个圆环，那里是善良的异教徒的家园。这些人生活在对浮点神的无知中。这些异教徒期望：

```
.1 == .3 / 3
[1] FALSE 
```

> 是真实的。善良的异教徒也会期待：

```
seq(0, 1, by=.1) == .3
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE 
```

> 有一个正确的值。

在您的示例中，如果我们改为使用整数而不是浮点数，则它可以工作：

```
vg   = rep(seq(90,110,1),90)
vals = seq(90,105,1)

for(val in vals){
  idx = c()
  idx = which((vg) %in% (val))
  cat(val,":",length(idx),"\t")
}

vg   = rep(seq(110,90,-1),90)
vals = seq(90,105,1)

for(val in vals){
  idx = c()
  idx = which((vg) %in% (val))
  cat(val,":",length(idx),"\t")
}
90 : 90         91 : 90         92 : 90         93 : 90         94 : 90         95 : 90         96 : 90 
```

R inferno 是一本非常有趣且内容丰富的读物。我强烈推荐它。

您还可以通过执行以下操作默认查看 WYSINWYG：

```
options(digits=22)
.3/3
[1] 0.09999999999999999167333 
```

# sql-server-2008 - 异常的 SQL Server 查询结果

> ID：15268366
> 
> 赞同：1
> 
> 时间：2013-03-07T10:12:35.830
> 
> 标签：sql-server-2008, sql-server-2008-r2

我在运行 sql server 查询时遇到了不寻常的查询结果。

需要注意的重要表是**Code_Structure_Type**。它包含列**Code_Structure_Type_Id smallint、Name char(50)**和一些其他未在此处使用的列。

我的查询

```
SELECT DISTINCT A1.A1_Id                    AS Code_Unit_Attribute_Id,
                A1.Name                     AS Code_Unit_Attribute_Name,
                Code_Structure_Type.A1_Name AS Code_Attribute_Type
--, Code_Structure_Type.Code_Structure_Type_Id 
FROM   Defect
       INNER JOIN Defect_Code_Unit
         ON Defect.Defect_Id = Defect_Code_Unit.Defect_Id
       INNER JOIN Code_Unit
         ON Defect_Code_Unit.Code_Unit_Id = Code_Unit.Code_Unit_Id
       INNER JOIN A1
         ON Code_Unit.A1_Id = A1.A1_Id
       INNER JOIN ERA_Module
         ON Defect.ERA_Module_Id = ERA_Module.ERA_Module_Id
       INNER JOIN Code_Unit_Type
         ON Code_Unit.Code_Unit_Type_Id = Code_Unit_Type.Code_Unit_Type_Id
       INNER JOIN Code_Structure_Type
         ON Code_Unit_Type.Code_Structure_Type_Id = Code_Structure_Type.Code_Structure_Type_Id
WHERE  ERA_Module.ERA_Project_Id = 472
       AND ERA_Module.Is_Active = 1
       AND Defect.Is_Closed = 0
       AND Defect_Code_Unit.Is_Active = 1
       AND Code_Structure_Type.Name = 'Pega Rules'
       --AND Code_Structure_Type.Code_Structure_Type_Id = 2 
       AND A1.A1_Id > 0
       AND Code_Unit.Scope_Id = 1 
```

此查询返回给我一个不正确的单行。此查询的预期结果应该是 none，因为我们**没有 'Pega Rules' Code_Structure_Type 的缺陷**。

如果我取消注释这一行

```
--, Code_Structure_Type.Code_Structure_Type_Id 
```

我没有得到正确的结果。

此外，如果我从 Code_Structure_Type_Id 过滤，它是“Pega 规则”而不是 Code_Structure_Type.Name，我也会得到正确的结果，这是没有的。为此，我取消注释此行

```
--AND Code_Structure_Type.Code_Structure_Type_Id = 2 
```

并评论这一行

```
AND Code_Structure_Type.Name = 'Pega Rules' 
```

所以基本上我在做同样的事情，并且在 Code_Structure_Type 表中没有像“Pega Rules”这样的其他名称，甚至没有关闭。该表中只有五行。

我需要了解这里发生了什么。

提前致谢。

### 执行计划的链接

文件，仅在使用“pega 规则”时 -使用“pega 规则”时的[不正确](https://docs.google.com/file/d/0B0oJzRNZe005cmNjckRFTnA5ZFE/edit)[_original.xml](https://docs.google.com/file/d/0B0oJzRNZe005b0ZoMDFNN0VFMTA/edit) + 选择 -使用 id 时的正确_with_added_select.xml -正确的[_with_Id.xml](https://docs.google.com/file/d/0B0oJzRNZe005Q0kyQ0dGU0h6elk/edit)

# hibernate - Grails Hibernate Filters Plugin 似乎正在工作，但没有过滤结果

> ID：15268370
> 
> 赞同：2
> 
> 时间：2013-03-07T10:12:41.767
> 
> 标签：hibernate, grails, grails-orm, hibernate-filters

我是 Groovy 和 Grails 的新手，但我对 Hibernate 非常熟悉。对于我正在处理的项目，我需要实现某些域类的**软删除**。[Hibernate Filters](http://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/filters.html)似乎是一个合适的解决方案，因为它允许我向我的域类添加一个条件，该条件将过滤掉软删除的记录，而无需我们手动为每个查询添加条件。幸运的是，Grails 提供了一个[Hibernate Filter 插件](http://grails.org/plugin/hibernate-filter)，它可以让在 Grails 中使用 Hibernate Filters 变得容易。

不幸的是，正如您可能已经猜到的那样，我无法让它工作。调试时，一切似乎都已正确设置（将过滤器添加到实体，在会话中启用过滤器等），但没有从结果中过滤任何内容。

我已经这样设置了：

**BuildConfig.groovy**

```
grails.project.dependency.resolution = {

    ...

    plugins {

        ...

        compile ":hibernate-filter:0.3.2"
    }
} 
```

**应用程序配置.groovy**

```
import org.grails.plugin.hibernate.filter.HibernateFilterDomainConfiguration

dataSource {

    ...

    configClass = HibernateFilterDomainConfiguration
} 
```

**MyDomainClass.groovy**

```
class MyDomainClass extends MySuperClass {

    ...

    Boolean deleted = false

    static hibernateFilters = {
        deletedFilter(condition:"deleted=0", default:true)
    }

    ...

} 
```

**MyController.groovy**

```
def list() {

    ...

    myDomainInstances = MyDomainClass.list()
    [myDomainInstanceList: myDomainInstances, myDomainInstanceTotal: myDomainInstances.totalCount, ...]
} 
```

即使一切似乎都配置正确，使用上面的代码总是会给我未过滤的结果。在调试应用程序启动时，我看到插件正在初始化，扫描我的域类并从中获取 hibernateFilters 属性。在此之后，它会正确创建 Hibernate 过滤器。当收到一个请求时，我看到 Grails 过滤器启动并且插件启用了当前 Hibernate 会话中的所有默认过滤器（我的过滤器）。一切看起来都如我所料（我看到在 Hibernate 的日志记录中启用了过滤器），除了结果（SQL 日志记录支持我，没有`WHERE`添加任何子句`deleted`）。

我已按照[文档](http://grails.org/plugin/hibernate-filter)页面上的说明进行操作，并尝试了以下操作：

*   [https://stackoverflow.com/a/6143422/236092](https://stackoverflow.com/a/6143422/236092)
*   [http://www.intelligrape.com/blog/2010/07/13/grails-hibernate-filter-plugin-a-life-saver/](http://www.intelligrape.com/blog/2010/07/13/grails-hibernate-filter-plugin-a-life-saver/)
*   [https://stackoverflow.com/a/12467408/236092](https://stackoverflow.com/a/12467408/236092)

我也尝试过以前版本的插件，甚至尝试使用插件功能（`Foo.withHibernateFilters`等）显式启用过滤器。

不过，我仍然卡住了，所以：**谁能帮助我使用 Grails Hibernate Filter 插件获得过滤结果？**

使用的软件版本：

*   圣杯 2.1.3
*   Grails 休眠 2.1.3
*   Grails 休眠过滤器 0.3.2
*   Java 1.7.0_11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:15:25.297

Grails 2.1.3 使用 Hibernate 版本 3.6.10。Hibernate 3 不支持对子类的过滤器（例如联合子类、连接子类）。在上面的示例中在 MySuperClass 上添加过滤器将起作用。Hibernate 4.1.5.SP1 和更新版本将支持子类过滤器。

**MySuperClass.groovy**

```
class MySuperClass {

    ...

    Boolean deleted = false

    static hibernateFilters = {
        deletedFilter(condition:"deleted=0", default:true)
    }

    ...

} 
```

**MyDomainClass.groovy**

```
class MyDomainClass extends MySuperClass {

    ...

} 
```

[不幸的是，关于过滤器的 Hibernate 文档](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/filters.html "第 18 章过滤数据")中没有正确记录上述内容。

更多信息：

*   [HHH-2394 在子类中支持过滤标签](https://hibernate.onjira.com/browse/HHH-2394 "HHH-2394")
*   [HHH-123 子类过滤器](https://hibernate.onjira.com/browse/HHH-123 "HHH-123")
*   [过滤器和子类](https://forum.hibernate.org/viewtopic.php?f=1&t=959184 "过滤器和子类")
*   [HHH-2394 支持子类中的过滤器标签 - 拉取请求](https://github.com/hibernate/hibernate-orm/pull/339 "HHH-2394 支持子类中的过滤器标签 - 拉取请求")

# php - 将变量从 Javascript 传递到 PHP

> ID：15268373
> 
> 赞同：-2
> 
> 时间：2013-03-07T10:12:50.517
> 
> 标签：php, javascript

这是您将 var 从 JS 传递到 PHP 的方式吗？还是有更好的解决方案。请您以最简单，最有效的方式提供帮助。

```
<!DOCTYPE html>
<html>
<body>

<script>

var name="John Doe";

document.write(name + "<br>");

</script>

<?php

$name = <script>document.write(name);</script>

?>

</body>
</html> 
```

我知道这行不通，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:14:04.887

```
<?php

$name = <script>document.write(name);</script>

?> 
```

**你不可以做这个**

由于 php 是服务器端语言和 js 客户端，

首先它在服务器中运行，然后在执行 js 时输出到客户端。所以你不能像上面的代码那样将值从 js 传递给 php。

如果你想这样做，你需要使用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:22:17.483

请试试这个：

```
<?php
echo "<script language=\"javascript\">
     var name=\"John Doe\";
     document.write(name + \"<br>\");
     </script>";
?> 
```

我希望这会有用

# zend-framework - 在控制器/操作下创建多个登录页面的最佳方法是什么？

> ID：15268374
> 
> 赞同：0
> 
> 时间：2013-03-07T10:12:51.147
> 
> 标签：zend-framework

我正在使用 Zend 框架。

目前我有一个这样的结构[http://mysite.com/page/promotion/](http://mysite.com/page/promotion/)

我想在促销下创建几个登陆页面，现在我这样做

```
 $promoId = $this->_getParam("id", false);

    if($promoId) {
        switch ($promoId){
            case 1:
                $this->render('promofirst');
                break;
            case 2:
                $this->render('promosecond');
                break;
            case 3:
                $this->render('promothird');
                break;      
            case 4:
                $this->render('testpromotion');
                break;
            default:
                $this->render('promotion');
                break;
        }
    } 
```

所以我可以像这样进行促销：http: [//mysite.com/page/promotion/id/1](http://mysite.com/page/promotion/id/1)

我认为这不是一个好方法，这样做的惯例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:48:34.093

我能想到的最好的方法是：

```
//get the promo from where ever you have it stored and put it into a model
$model = new My_Promo_Model();
$promoId = $this->_getParam("id", false);

    if (!is_null($promoId)) {
        //structure the data in your model, not in the controller if possible.
        $promo = $model->getPromo($promoId);
        $this->view->promo = $promo;
    } else {
        //do some error stuff
    } 
```

您所有的促销活动在形式和布局上都应该非常相似。只需要不同的信息和艺术来区分它们。一个简单的实体模型应该能够将数据源提供给视图脚本。

如果每个促销都需要完全不同的视图脚本，您可能需要重新考虑页面的结构。

如果您需要为不同风格的促销使用几种不同的布局，可以使用替代布局来完成。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:26:11.180

我不确定是否有任何这样的特定标准方法，根据复杂性，您的方法也可以。我一般是怎么做的

[http://mysite.com/page/promotion/promote/first](http://mysite.com/page/promotion/promote/first)

在我的控制器中，我会这样做，

```
$promote = $this->_getParam("promote", false);

if($promote) {
   $this->render('promo'.$promote);
} else {
   $this->render('promotion');
} 
```

但是你可能不得不以同样的方式命名你的观点。

# loops - LimeJS 动画。序列未完成

> ID：15268375
> 
> 赞同：0
> 
> 时间：2013-03-07T10:12:52.130
> 
> 标签：loops, animation, sequence, limejs

我有一个关于我的动画的问题。Sqeuence。只有第一个序列元素正在执行。第二个被忽略。我希望 Sprite spell_1 移动到英雄（hero_x_exact，hero_y_exact），然后移动到目的地。每个元素都可以正常工作，但不能在序列中工作。

```
goog.require('lime.animation.Sequence');

...

var spellmovement = new lime.animation.Sequence(
    spell_1.runAction(new lime.animation.MoveTo(hero_x_exact,hero_y_exact).setDuration(1).enableOptimizations()),
    spell_1.runAction(new lime.animation.MoveTo(target_coord_x_spell,target_coord_y_spell).setDuration(1).enableOptimizations())
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:34:10.783

更好的方法是在 spritesheet 上使用每个动画的 spritesheet 然后您可以构建一些按名称加载每个动画的东西。Obj_Walk001.png, Obj_Walk002.png

然后在调度管理器中创建一个方法来读取每帧的每个动画。

您可以在limejs/lime/demos/test 中找到此代码的示例。然后转到 run.htm 并单击 Frame4，这将向您展示limejs 的运行情况。

# php - Jquery Easy UI：在数据网格视图中插入文本框

> ID：15268376
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:12:52.273
> 
> 标签：php, jquery, html, jquery-easyui

我正在使用 jquery easy ui 插件。我想在数据网格视图中插入文本框。[想要插入文本框。](http://www.jeasyui.com/demo/main/index.php?plugin=DataGrid&theme=default&dir=ltr&pitem=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:18:44.940

这可能不是最好的方法，但是您可以使用一些 jQuery 来更改 Dom，例如：

```
$('td[field="columnname"').each(function() {
    $(this).html('<input type="text" value="'+$(this).find('div').text()+'"');
}); 
```

我还没有测试它;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:43:33.223

您可以对该列使用格式化程序，

```
<th field="textcolumnid" width="80" formatter="gettextbox" >

function gettextbox(value,row,index)
{
  return "<input type='text'  value='"+value+"' onChange=textboxChecked("+index+",this);>";
} 
```

# arrays - 在 perl 中，如何找到按第一列中的值分组的第二列中的值的总和

> ID：15268377
> 
> 赞同：0
> 
> 时间：2013-03-07T10:12:56.797
> 
> 标签：arrays, perl, hash

我正在编写一个 perl 脚本，并在许多操作后获取值，如下所示：

```
'John', 10, .20
'John', 20, .05
'Paul', 50, .10
'Joe', 70, .03
'Joe', 12, .30 
```

现在，我需要执行以下操作：

1.  总结按第 1 列分组的第 2 列的值。
2.  将第 2 列乘以第 3 列，然后再次找到按第 1 列分组的这些答案的总和。

我想看看这是否只能通过将此数组转换为基于第一列的哈希来完成，或者是否有更好的方法来做到这一点。

请注意，这不是家庭作业。我试图通过屏蔽原始值来简化数据。这些值属于上面给出的类型。

**预期输出：**

```
'John', 30, 0.1
'Paul', 50, 0.1
'Joe',  82, 0.06 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:34:33.737

在尝试“清理”它以在此处发布时找出答案：

我的有效代码：

```
while (<FILE>)
{
    chomp($_);
    my ($name, $count, $percent) = split("\t");
    $hash{$name}{"count"} += $count;
    if ($count != 0)
    {
        $sonar_out_hash{$name}{"value"} += $percent * $count / 100;
    }
} 
```

感谢@KrishnachandraSharma 坚持我发帖。

# cordova - Phonegap 保存图片和纬度/经度

> ID：15268379
> 
> 赞同：0
> 
> 时间：2013-03-07T10:12:57.613
> 
> 标签：cordova

我正在与自己讨论如何在 Phonegap 中保存图片及其纬度/经度。

我希望能够拍照，然后将 JPG 保存为文件，并将纬度/经度保存在 Web SQL 数据库中。

然后我可以循环浏览数据库中的所有图片并将它们显示在地图上 - 当单击图钉时，应该显示图片。

你会如何建议我这样做？最简单的方法是将 base64 编码的图像保存在 Web SQL 数据库中，但它有大小限制。

我应该为此使用 FileWriter 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:04:49.253

只需在用户拍照时从[Geolocation API](http://diveintohtml5.info/geolocation.html)获取值，然后将图片保存在您想要的任何位置 - 但我不建议保存在数据库中 - 然后，使用[google maps api](https://developers.google.com/maps/)，您可以获得图片 lat/ lon 并将其标记在地图上。非常简单！

# google-apps-script - 网络应用程序：共享设置

> ID：15268381
> 
> 赞同：0
> 
> 时间：2013-03-07T10:13:04.927
> 
> 标签：google-apps-script

我有一个应用程序脚本，一个网络应用程序（在谷歌网站内，共享选项：“谁有权访问该应用程序：发布时我的域内的任何人”）使用以下代码制作表单：

```
 var app = UiApp.createApplication();
  var panel = app.createVerticalPanel(); 
```

......

当用户按下提交按钮时，数据将保存在电子表格中。

我必须授予对此电子表格上的用户组的完全访问权限才能使表单正常工作。

问题是我不希望 user1（属于用户组）看到 user2（属于用户组）在此电子表格中保存的内容。

目前，我在没有通知的情况下共享电子表格，但用户可以使用驱动器上的“与我共享”按钮访问电子表格。

问题：是否可以隐藏共享（如 Windows 上的 $ 共享）？

是否可以让脚本特殊授予选项来读取/写入电子表格，而无需在运行时与用户组共享它。

或者实际的谷歌表单（谷歌驱动器提供的，不是我的）如何处理这个问题？

Google API 未在我的域中激活，我有一个 google 教育许可证，我是该域的管理员。

希望它足够清楚。^^

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:34:57.253

如果您使用 Google 表单，则根本不需要共享您的电子表格。您可以分发实时表单的 URL，用户只能从那里输入表单数据。不过，表单是静态的 - 您可以轻松地编辑问题，并根据之前的答案在问题页面之间创建逻辑流程，但您不能动态包含数据。您的布局选项也非常有限。但除此之外，易用性和信息安全性使它们成为一个不错的选择。

使用 Legacy Forms，收集的数据存储在电子表格中。由于引入了新的表格，您需要先创建电子表格，然后选择表格 - 创建旧表格开始。“响应摘要”报告反映了电子表格的表格中的内容。您对工作表所做的任何更改都会影响这一点，例如行删除、添加或信息编辑。

在 2013 年 2 月推出的新表格中，收集的数据附在表格上，而不是电子表格上。您可以选择将其复制到电子表格中，但由于这是一个副本，因此您对其所做的任何编辑都不会反映在“回复摘要”中。您可以从云端硬盘中的“创建”对话框或电子表格中创建新表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:57:37.437

您的电子表格必须以“知道该链接的任何人都可以编辑”的形式共享，只要您不发布此链接，任何人都无法找到它，并且它不会出现在他们的“与我共享”类别中。

但是，您的 web 应用程序将允许每个用户使用表单在电子表格中填写他们的日期。

请参阅显示实际示例的[另一篇文章。](https://stackoverflow.com/questions/12907321/session-getactiveuser-getemail-workaround-for-distributing-grades-from-a-spr)

# java - spring jdbc + PlatformTransactionManager + spring数据+理论

> ID：15268383
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:13:11.670
> 
> 标签：java, spring, jakarta-ee, spring-jdbc

我确实开始学习工具包`spring jdbc`。 在 spring end 他们的模板中阅读一些关于[事务的文档。](http://static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/html/transaction.html#transaction-programmatic)尽管如此，我还不清楚一些常见的事情。

1）**如果我们`Spring Data`总是听说`Spring JDBC`**
Spring 框架有一些项目，比如`Spring MVC`，`Spring Security`等等。
首先我尝试`Spring JDBC`在 Spring 的主页上找到，但没有找到。而不是我找到了`Spring Data`项目。经过一些研究，我发现了子项目中`Spring Data`使用的内容，最后有一些具体的操作对我来说很有趣。我意识到什么没有看到或听到任何使用或看到教程中的参考。真的有什么不好的吗？ `Spring JDBC``JDBC Extensions``oracle``Spring Data`

2）**我应该每次创建 JdbcTemplate 的新实例**
Next 是`JdbcTemplate`有用的模板方法。所有文档都充满了代码示例，例如

```
public class JdbcCorporateEventDao implements CorporateEventDao {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    // JDBC-backed implementations of the methods on the CorporateEventDao follow...
} 
```

他们还写在文档中

> JdbcTemplate 类的实例在配置后是线程安全的

这是误导。`setDataSource`如果他们可以放入`dataSource`已经创建的实例或者我误解了它， 为什么在方法中创建新实例？

3）**我们如何`TransactionTemplate`用于编写复杂的客户端逻辑？**
`TransactionTemplate`另一个模板与`TransactionStatus`. 据我了解，它可以帮助我管理我的交易*，但*有多大帮助？在我们有`execute`方法的开始。在方法的末尾，我们有 line 。因此，我如何理解它，我在方法中放置的所有内容都将在单个事务中执行。但是如何在其他方法中执行具有相同事务的其他 s 呢？它限制了编写具有复杂逻辑的客户端。我的意思是所有逻辑都必须采用一种方法？我想这不可能是真的。 我所说的复杂逻辑是什么意思。例如，我有自己的模板方法。`TransactionTemplate``transactionManager.getTransaction(this)``execute``this.transactionManager.commit(status)``doInTransaction``DAO`

```
/*abstract class definition*/

public final void execute(){
    onPreExec();
    exec();
    onPostExec();
}

abstract void exec(); //client execute few DAOs methods

public void onPreExec(){}

public void onPostExec(){} //commit or rollback transaction in another method

/*other class members*/ 
```

4)**使用“PTM”、“TD”、“TS”是线程安全的吗？**
进一步我开始调查背后的原因`this.transactionManager.commit(status)`。这代表我`PlatformTransactionManager`和`TransactionDefinition`。我怎么理解，~~在我开始写这行文字的那一刻~~，这些课程可以帮助我实现我在问题 3 中的目标。例如我可以这样做：

```
/*abstract class definition*/

protected PlatformTransactionManager ptm;
protected TransactionDefinition td;
protected TransactionStatus ts;//TS with PROPAGATION_REQUIRED, ISOLATION_READ_COMMITTED

public final void execute(){
    onPreExec();
    exec();
    onPostExec();
}

abstract void exec(); //client execute few DAOs methods

public void onPreExec(){//start transaction
    ts=ptm.getTransaction(td);
}

public void onPostExec(){//end transaction
    if (exec.wasCompletedSuccessfully()){
       dao.markJobCompleted(); //do some for fix execution completeness
       ptm.commit(ts);
    } else {ptm.rollback(ts);}

}

/*other class members*/ 
```

至少`transactionTemplate.execute()`在某些情况下，这看起来比方法更方便。虽然只是分成几个部分`transactionTemplate.execute()`的方法。

但仍然不清楚它是线程安全的吗？即我可以使用它并确保所有来自 will 的`JDBC`s`callableStatment.execute()`方法的内部调用`jdbcTemplate`都引用这个并且只引用这个事务。并且在其他线程中看不到另一个事务。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:25:24.333

关于 JdbcTemplate：

jdbc模板由spring提供，用于与数据库交互。您可以使用简单的 JDBC 代码连接数据库并执行操作，但在这种情况下，您必须处理与连接关闭等相关的问题。Spring jdbc 模板处理所有这些问题，最终用户只需要使用这些 api 并执行操作。

关于新的 JDBCTemplate()，我认为这只是一个示例，即您不需要在每个类中创建 jdbc 模板对象。您可以像数据源一样创建它的 bean 或为此创建 BaseDAO 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:29:11.867

还有一件事，请浏览[Spring Data Support](http://javabrains.koushik.org/p/spring-framework.html#data)视频。这些是学习 JDBC 模板基础的非常好的视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:52:03.380

您需要意识到 Spring 已经存在 11 年了。它进化了。有很多项目最初是作为 Spring 的辅助项目，并被纳入其中。自 Rod Johnson 首次编写 Spring JDBC 以来，它就一直存在。Spring Data 是最近的发展。

# java - 使用批量短信网站无法在手机上发送短信

> ID：15268393
> 
> 赞同：0
> 
> 时间：2013-03-07T10:13:25.567
> 
> 标签：java, http-headers, connection, sms-gateway

我正在尝试通过批量短信发送网站在手机上发送短信。我正在尝试使用以下代码通过 java api 发送短信。它没有显示任何错误，但没有发送消息。

```
 String urlParameters="usr=username &pwd=1234 &ph=9015569447 &text=Hello";
 //String request = "http://hapi.smsapi.org/SendSMS.aspx?";
 String request="http://WWW.BULKSMS.FELIXINDIA.COM/send.php?";
try{                        
URL url = new URL(request); 
HttpURLConnection connection = (HttpURLConnection) url.openConnection();           
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setInstanceFollowRedirects(false); 
connection.setRequestMethod("POST"); 

connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
connection.setRequestProperty("charset", "utf-8");
connection.setRequestProperty("Content-Length", "" +         Integer.toString(urlParameters.getBytes().length));
  connection.setUseCaches (false);

DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
wr.writeBytes(urlParameters);

    wr.flush();
wr.close();
connection.disconnect();
}
catch(Exception ex)
{
 System.out.print(ex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:21:57.610

我看到请求参数 URL 之间有一些空格：

```
 String urlParameters="usr=username&pwd=1234&ph=9015569447&text=Hello"; 
```

这可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:22:50.350

您应该在写入流后检查响应代码，以便了解发生了什么：

```
int rc = connection.getResponseCode();
if(rc==200)
{
    //no http response code error
    //read the result from the server
    rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    sb = new StringBuilder();
    //get the returned data too
    returnString=sb.toString();
}
else
{
    System.out.println("http response code error: "+rc+"\n");
} 
```

[（从这里](http://www.java-forums.org/networking/60379-httpurlconnection-post-data.html)粘贴的代码）

也**永远**不要这样做：

```
catch(Exception ex)
{
    System.out.print(ex);
} 
```

这对你的健康有害：下一个调试你的代码的人会用一个又硬又重的物体发现它！

任何一个

```
catch(Exception ex)
{
    ex.printStackTrace();
} 
```

或者

```
catch(Exception ex)
{
    LOG.error("Something went wrong (adequate error message here please)", ex);
} 
```

**必须**完成！！！

# image - EXCEL 添加图片 VBA WEB 动态生成

> ID：15268399
> 
> 赞同：0
> 
> 时间：2013-03-07T10:13:35.120
> 
> 标签：image, excel, vba, dynamic, import

有没有一种可能的方法让 Excel 从 Web 位置将图片导入工作表，其中 Web 位置不是文件的简单 url，而是从 url 中提供的信息生成图片的动态页面？

我目前正在使用 shape.addpicture 方法，但出现错误 1004 - 找不到文件。它适用于：[http ://www.andyross.net/images/heide_hut.jpg](http://www.andyross.net/images/heide_hut.jpg)

但它不适用于： [http ://charts.moneyam.com/Chart.aspx?Provider=EODIntra&Code=RBS&Size=900&Skin=GreenRed&Type=3&Scale=0&Cycle=DAY1&Span=MONTH3&OVER=EMA%2812%29;EMA%2826% 29;SR;AreaBB%2826,2%29&IND=MACD%2826,12,9%29;SlowSTO%2812,3,3%29;ADX%2812%29;VOLMA%2812%29&Layout=2Line;Default;Price; HisDate&XCycle=&XFormat=](http://charts.moneyam.com/Chart.aspx?Provider=EODIntra&Code=RBS&Size=900&Skin=GreenRed&Type=3&Scale=0&Cycle=DAY1&Span=MONTH3&OVER=EMA%2812%29;EMA%2826%29;SR;AreaBB%2826,2%29&IND=MACD%2826,12,9%29;SlowSTO%2812,3,3%29;ADX%2812%29;VOLMA%2812%29&Layout=2Line;Default;Price;HisDate&XCycle=&XFormat=)

如果我把上面的 URL 放在浏览器地址栏中，上面的 URL 就可以工作，并且会为 RBS 生成一个股票图表的 gif 图像。

一开始我以为是长文件名，所以我用 Tinyurl 生成了一个短到可以被 Excel 接受的 url。但是，它仍然不起作用（并且使用 tinyurl 作为简单 url 在 excel 中确实有效）所以我认为它必须是动态内容。

有人对如何使它起作用有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:07:38.537

使用嵌入式网络浏览器控件可能会更好。该视频可以引导您完成设置和使用[http://www.youtube.com/watch?v=GBAHJSfm8Xg](http://www.youtube.com/watch?v=GBAHJSfm8Xg)

# php - eZ Publish 扩展不会覆盖其他扩展模板

> ID：15268401
> 
> 赞同：0
> 
> 时间：2013-03-07T10:13:39.960
> 
> 标签：php, ezpublish

我对 eZ Publish 和模板覆盖有疑问。我有两个扩展名，即**a**和**b**。扩展**b**扩展并需要扩展**a**（它位于扩展**b**的 extensions.xml 中）。在扩展 a 中，我有一个位于*a/design/oscar/templates/article/blocks/header.tpl 的模板文件，*我想在扩展**b**中覆盖它。我已将该文件复制到*b/design/oscar/templates/article/blocks/header.tpl*并进行了适当的更改。当我访问该站点时，它仍然使用扩展名**a**中的“基本模板” 。它们都在 DesignExtensions 中定义。这种行为的根源是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:35:29.797

根据您使用的版本，extension.xml 的使用可能有问题。

如果删除扩展 A 中的模板会发生什么？它是否按预期工作？如果是，请尝试在 settings/override/site.ini.append.php 中重新排序您激活的扩展，看看它是否比基于 extension.xml 的解决方案更好。

另一种解决方法是创建一个名为“oscar2”的设计，在扩展 B 中实现它，并将“oscar2”设置为主 SiteDesign，而“oscar”将是一个 AdditionnalSiteDesign。

# sql - 在 SQL 中通过 int 值确定 DATEPART

> ID：15268410
> 
> 赞同：0
> 
> 时间：2013-03-07T10:14:15.337
> 
> 标签：sql, sql-server-2008, dateadd, datepart

好的，所以我正在做一个软件工具来提醒即将到期的 CRB。到期间隔由程序的用户确定。

我目前正在使用 SQL Server 2008。因此，我正在尝试执行一条 SQL 语句，该语句将检索此到期期限之外的所有记录。以下是我想要实现的概念：

```
Declare @ExpiryType as int -- (0=Days,1=Weeks,2=Months,3=Years)
Declare @ExpiryValue as int -- Interval of expiry
Declare @DateOfIssue as date -- Date of last CRB check

SELECT * FROM tblDBS_Details 
WHERE DATEADD(@ExpiryType, @ExpiryValue, @DateOfIssue) <= GETDATE() 
```

如您所见，该表包含到期间隔类型（天、周、月、年）、间隔值以及我需要添加间隔的日期。

我在 DATEADD 函数的第一个参数中遇到错误，因为它需要 DATEPART 而不是整数。有没有办法根据存储的整数确定使用哪个 DATEPART？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:19:54.367

这可能有点冗长，但显而易见的答案是：

```
SELECT * FROM tblDBS_Details 
WHERE 
    CASE @ExpiryType
    WHEN 0 THEN DATEADD(D, @ExpiryValue, @DateOfIssue)
    WHEN 1 THEN DATEADD(W, @ExpiryValue, @DateOfIssue)
    WHEN 2 THEN DATEADD(M, @ExpiryValue, @DateOfIssue)
    WHEN 3 THEN DATEADD(Y, @ExpiryValue, @DateOfIssue)
    END <= GETDATE() 
```

# c# - ReportViewer WebForms 函数 SetDisplayMode

> ID：15268411
> 
> 赞同：3
> 
> 时间：2013-03-07T10:14:23.833
> 
> 标签：c#, asp.net, reporting-services, reportviewer

我正在使用 ReportViewer.WebForms，需要 ReportViewer.WinForms 中的函数**setdisplaymode 之**类的东西。

来自 WinForms 的示例：

```
ReportViewer1.SetDisplayMode(Microsoft.Reporting.WinForms.DisplayMode.PrintLayout); 
```

任何人都知道如何在 WebForms 中做到这一点？

# android - 为 listFragment 中的项目设置颜色

> ID：15268412
> 
> 赞同：0
> 
> 时间：2013-03-07T10:14:23.913
> 
> 标签：android

我正在使用**简单游标适配器**来填充**sherlockListFragment**中的列表。我已经使用加载器完成了此操作。但是当我尝试为列表中的文本添加颜色时。我得到 Java.lang.Null.pointer**异常**。而我的java代码是

```
 @Override
public void onActivityCreated(Bundle savedInstanceState) {
    Log.i("live", "onActivityCreated");
    super.onActivityCreated(savedInstanceState);

    setEmptyText("Loading...");

      SimpleCursorAdapter.ViewBinder vb=new SimpleCursorAdapter.ViewBinder() {

        @Override
        public boolean setViewValue(View arg0, Cursor arg1, int arg2) {
            Log.i("alls","inside set View Value");
            View inflate=getActivity().getLayoutInflater().inflate(R.layout.live_list_stock,null);
            TextView tv=(TextView)inflate.findViewById(R.id.lpercent);
            tv.setTextColor(Color.RED);
            //String i=tv.getText().toString();
            //Log.i("alls",(i));
            // TODO Auto-generated method stub
            return true;
        }
        };

    liveMyStocksadapter = new SimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.live_list_item, null, new String[] {DBConstants.NAME,DBConstants.YSYMBOL,DBConstants.PRICE,DBConstants.PERCENT,DBConstants.DATE,DBConstants.TIME,DBConstants.OPEN,DBConstants.HIGH,DBConstants.LOW,DBConstants.VOLUME}, new int[] {R.id.lname,R.id.lysymbol, R.id.lprice,R.id.lpercent,R.id.ldate,R.id.ltime,R.id.lopen,R.id.lhigh,R.id.llow,R.id.lvolume},0);
    setListAdapter(liveMyStocksadapter);

    mycontext=this;
    getActivity().registerReceiver(FragmentReceiver1, new IntentFilter("fragmentupdater"));
    getActivity().getSupportLoaderManager().initLoader(0, null, this);
    liveMyStocksadapter.setViewBinder(vb); 
```

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:18:09.987

使用视图绑定器时，您不需要膨胀视图，SimpleCursorAdapter 会为您完成。您所要做的就是设置值（并且仅当它们不是图像、连接字符串等常见值时）。注意：字符串、整数和默认无格式值由默认视图活页夹设置。您只需要正确创建适配器即可。

实现 ViewBinder 时，您作为新 SimpleCursorAdapter 的参数插入的所有视图都将作为视图值 (arg0) 的参数传递给您，以及光标（右行中的 arg1）和列（arg2）。

尝试这样的事情：

```
public boolean setViewValue(View arg0, Cursor arg1, int arg2) {
   switch(arg0.getId()) {
   case R.id.lpercent:
      ((TextView)arg0).setTextColor(Color.RED);
      return false; // so it will set text view with DBConstants.PERCENT
   case ...: // TODO: put here some view you don't want default view binder set and then return true
      ((TextView)arg0).setText("non default value: " + arg1.getString(arg2));
   return true;
   }
} 
```

# cakephp - 在 Cakephp 中重定向到不同的控制器视图

> ID：15268420
> 
> 赞同：0
> 
> 时间：2013-03-07T10:14:41.357
> 
> 标签：cakephp

我必须有 2 个与 ItQuery 和 ItQueryComment 相关的模型。当用户添加 ItQuery 时，其他用户应该能够对其发表评论。我想要实现的是当其他用户在查询上添加评论时，他们应该被重定向到查询的视图而不是 it_query_comments 的索引页面

这是我的评论代码添加视图

```
<?php echo $this->Form->create('ItQueryComment'); ?>
<fieldset>
<legend><?php echo __('Add It Query Comment'); ?></legend>
<?php
echo $this->Form->input('it_query_id');
echo $this->Form->input('comment');
?>
</fieldset>
<?php echo $this->Form->end(__('Submit')); ?> 
```

这是我在控制器中的添加功能

```
public function add() {
if ($this->request->is('post')) {
$this->ItQueryComment->create();
if ($this->ItQueryComment->save($this->request->data)) {
$this->Session->setFlash(__('The it query comment has been saved'));
$this->redirect(array('controller' => 'it_queries','action' => 'view', $itQuery['ItQuery']['id']));
} else {
$this->Session->setFlash(__('The it query comment could not be saved. Please, try again.'));
}
}
$itQueries = $this->ItQueryComment->ItQuery->find('list');
$this->set(compact('itQueries'));
} 
```

如果有人能告诉我如何做到这一点，那就太棒了。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:37:28.243

尝试以下

```
$this->redirect(array(
    'controller' => 'it_queries',
    'action' => 'view', 
    $this->request->data['ItQuery']['id'])
); 
```

# java - JNI 字符串返回值

> ID：15268426
> 
> 赞同：4
> 
> 时间：2013-03-07T10:15:04.040
> 
> 标签：java, c++, string, java-native-interface

我有一个返回字符串的 Java 实例方法，我通过 C++ 中的 JNI 调用此方法。我写了以下代码：

```
const char *DiagLayerContainer_getDESC(JNIEnv *env, jobject diagLayer) {
    jclass diagLayerClass = env->FindClass(PARSER_CLASS);
    jmethodID getDESCDiagLayerMethodID = env->GetMethodID(diagLayerClass, "getDESCDiagLayer", "(Ljava/lang/Object;)Ljava/lang/String;");
    jstring returnString = (jstring) env->CallObjectMethod(diagLayer, getDESCDiagLayerMethodID);
    return env->GetStringUTFChars(returnString, JNI_FALSE);
} 
```

如何获取字符串并将其转换为 const char *？

我的程序在最后一行崩溃，访问冲突为 0x00000000。returnString 不为 NULL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:24:29.360

根据[`GetStringUTFChars`](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp17265)，最后一个参数是一个指向的指针`jboolean`。

改变

```
return env->GetStringUTFChars(returnString, JNI_FALSE); 
```

到

```
return env->GetStringUTFChars(returnString, NULL); 
```

或者更好的是，返回一个`std::string`

```
std::string DiagLayerContainer_getDESC(...) {
    ...
    const char *js = env->GetStringUTFChars(returnString, NULL);
    std::string cs(js);
    env->ReleaseStringUTFChars(returnString, js);
    return cs;
} 
```

我已经构建了一个类似的简单示例，到目前为止，代码看起来还不错。

虽然，有两个可能的错误来源。

第一个是方法签名。尝试`"()Ljava/lang/String;"`代替`"(Ljava/lang/Object;)Ljava/lang/String;"`.

第二个是在 java 源代码本身中。如果 java 方法返回一个空字符串，`CallObjectMethod()`将返回一个 NULL`jstring`并`GetStringUTFChars()`失败。

添加一个

```
if (returnString == NULL)
    return NULL; 
```

之后`CallObjectMethod()`。

因此，查看 java 源代码并查看该方法是否`getDESCDiagLayer()`可能返回空字符串。

# mysql - phpMyAdmin 中的 SQL 语法检查器拒绝好的代码？

> ID：15268428
> 
> 赞同：1
> 
> 时间：2013-03-07T10:15:05.433
> 
> 标签：mysql, sql, phpmyadmin

我正在使用 phpMyAdmin (3.5.7) 中的 SQL 窗口将行插入到 MySql 表中，但是语法检查器出现问题。它在 Windows Server 2003 上运行。

如果我单击“INSERT”按钮生成模板，然后在模板中改写值，就没有问题。但是我因为需要填充大量行，所以我使用 Excel 自动生成了 INSERT 语句，将它们粘贴到文本编辑器中，然后将它们粘贴到同一个 phpMyAdmin SQL 窗口中。结果令人费解……

下面的语句（使用 Excel/文本编辑器/复制和粘贴生成）给出了错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''timeslot' ('slot_no', 'slot_starttime') VALUES (3,'00:30')' 附近使用正确的语法

```
INSERT INTO 'timeslot' ('slot_no', 'slot_starttime') VALUES (2,'00:15') 
```

但是下面的语句很好（它是通过单击 SQL 窗口上的 INSERT 按钮然后在模板中过度键入文本来构建的：

```
INSERT INTO `timeslot`(`slot_no`, `slot_starttime`) VALUES (2,'00:15') 
```

我已直接从 phpMyAdmin 窗口将这两个语句复制并粘贴到这篇文章中。它们对我来说看起来几乎一样，所以我不明白为什么第一个失败了。

？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:21:57.830

如果你按照你说的直接粘贴了结果，就会出现语法错误。

在 MYSQL 中，您不能使用撇号将字段名或表名括起来。相反，您必须使用 BACK-QUOTE （在波浪号键上）

所以以下是错误的：

```
INSERT INTO 'timeslot' ('slot_no', 'slot_starttime') VALUES (2,'00:15') 
```

以下是正确的：

```
INSERT INTO `timeslot` (`slot_no`, `slot_starttime`) VALUES (2,'00:15') 
```

甚至以下是正确的（没有反引号）：

```
INSERT INTO timeslot (slot_no, slot_starttime) VALUES (2,'00:15') 
```

常见的单引号 (') 仅用于 SQL 语句中的 VALUES。

# c# - 如何实现交易？

> ID：15268430
> 
> 赞同：2
> 
> 时间：2013-03-07T10:15:16.547
> 
> 标签：c#, sql

我正在研究 sql，我的查询是我有一些方法可以在其中执行不同的任务。例如：-第一种方法-插入第二种方法-更新第三种方法-删除第4种方法-插入

现在我想一次执行所有这些。但如果以某种方式发生任何错误，那么整个过程都会自行回滚。

代码 ：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
    DialogResult dr = MessageBox.Show("Are you sure you want to submit the information? Click 'Yes' to Submit or 'No' to re-Check.", "eParty - Confirmation", MessageBoxButtons.YesNo, MessageBoxIcon.Information);
    if (dr == DialogResult.Yes)
    {
        this.Cursor = Cursors.WaitCursor;

        INSERT();
        UPDATE();
        DELETE();
        INSERTAGAIN();

        MessageBox.Show("Booked successfully.", "eParty - Done!", MessageBoxButtons.OK, MessageBoxIcon.Information);
        this.Cursor = Cursors.Default;

        this.Cursor = Cursors.WaitCursor;

        this.Close();
    }
    else
    {

    }
} 
```

现在如何在“btnSubmit_Click”方法中实现事务...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:25:24.737

尝试这个：

```
 using(var scope = new TransactionScope())
  {
    INSERT();
    UPDATE();
    DELETE();
    INSERTAGAIN();

    scope.Complete(); //if we make it here - commit the changes, 
                      //if not - everything is rolled back

  } 
```

记得包括`System.Transactions`你的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:21:11.837

这取决于您拥有的数据库访问技术。

如果您使用实体框架，`SaveChanges()`则方法已经具有事务支持。

如果是纯 ADO.NET，请参阅此[https://stackoverflow.com/a/224702/210994](https://stackoverflow.com/a/224702/210994)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:21:33.020

您可以使用 ADO 交易并将您的交易作为参数发送到您的所有方法

```
SqlConnection db = new SqlConnection("connstringhere");
SqlTransaction transaction;
db.Open();
transaction = db.BeginTransaction();
try 
{
     INSERT(transaction);
     UPDATE(transaction);
     DELETE(transaction);
     INSERT(transaction);
     transaction.Commit();
} 
catch (SqlException sqlError) 
{
     transaction.Rollback();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:23:16.573

请参阅本主题：[使用事务范围实现隐式事务](http://msdn.microsoft.com/en-us/library/ee818746.aspx)。

> TransactionScope 类提供了一种将代码块标记为参与事务的简单方法，而无需您与事务本身进行交互。事务范围可以自动选择和管理环境事务。由于其易用性和效率，建议您在开发事务应用程序时使用 TransactionScope 类。此外，**您不需要使用事务显式征用资源**。任何 System.Transactions 资源管理器（例如 SQL Server 2005）都可以检测到由作用域创建的环境事务的存在并自动登记。

我还想建议您阅读这个[问题](https://stackoverflow.com/q/1690892/674700)及其答案。它涉及有关在多个连接上使用事务的有趣主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T10:24:08.560

通常是这样的：

```
void DoStuff(args)
{
    using (var conn = CreateOpenConnection())
    using (var tran = conn.BeginTransaction())
    {
        try
        {
            // various operations here
            ForExample(conn, tran);
            tran.Commit();
        }
        catch
        {
            tran.Rollback();
            throw;
        }
    }
}

void ForExample(DbConnection conn, DbTransaction tran = null)
{
    using (var cmd = conn.CreateCommand())
    {
        cmd.Transaction = tran;
        cmd.CommandText = "For example";
        // cmd.Parameters.Add(...)
        cmd.ExecuteNonQuery();
    }
} 
```

尽管可以使用位于原始 ADO.NET 之上的任何可用工具/库来减少大部分问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T10:24:18.247

您可以使用 .Net 的 TransactionScope 类来实现这一点。 [http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx) 您可以根据需要选择隔离级别。如果您不确定，请使用最一致且性能最低的 Serializable 级别。但是，如果您的 sql 存储过程具有隔离级别，它们将获得优先权。如果这是一个关键设计，请在继续之前阅读有关事务的信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T10:24:45.253

也许您应该创建一个存储过程并基于参数执行您的 CRUD 操作。例如：

```
 BEGIN TRANSACTION

    IF(@PartyID <= 0)
    BEGIN
        //INSERT
    IF @@ERROR <> 0
        BEGIN
            ROLLBACK TRANSACTION
            RETURN
        END
    END
    ELSE
    BEGIN
        //UPDATE
    IF @@ERROR <> 0
        BEGIN
            ROLLBACK TRANSACTION
            RETURN
        END
    END 
```

# documentation - OpenERP7 是否有任何或最好是完整的文档？

> ID：15268433
> 
> 赞同：2
> 
> 时间：2013-03-07T10:15:33.010
> 
> 标签：documentation, openerp

是否有任何或最好是完整的 OpenERP* *7* * 文档以任何格式免费提供？遗憾的是，我只找到了 v6.1 的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-02T04:52:50.480

关于 OpenERP 7 的文档可以在这里找到：http:
[//openerp-server.readthedocs.io/en/latest/](http://openerp-server.readthedocs.io/en/latest/)

有用的信息可以在这里找到：
[https ://www.odoo.com/nl_NL/forum/help-1/question/where-is-openerp-v7-documentation-6817](https://www.odoo.com/nl_NL/forum/help-1/question/where-is-openerp-v7-documentation-6817)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:24:04.213

您可以参考[OpenERP-7 文档](http://doc.openerp.com/trunk/developers/index.html)了解 OpenERP 版本 7。它不是完整的文档，而是主干。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T09:14:53.717

你可以去[http://dipleo.fr](http://dipleo.fr) ！我们尝试将我们找到的所有 OpenERP 文档放在这里并编写教程。

# c# - 某个服务器上的 Directory.GetDirectories 将非英文字符更改为英文字符.. 为什么？

> ID：15268435
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:15:33.647
> 
> 标签：c#

问题出在主题上。`Directory.GetDirectories`将所有波兰语字符更改为英文字符..

例如：ą -> a, ć -> c, ....

如何使它返回正确的字符？

谢谢

**编辑**

```
var list = Directory.GetDirectories(directorySource);
Console.WriteLine(list[0]); 
```

在调试下它返回正确的标志，在服务器 2008 上没有非英文字母......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:18:49.250

对于系统中设置的非 Unicode 程序，这是错误的语言。改成抛光，解决了问题。

# java - 无法使用 Neo4j 1.9.M05

> ID：15268437
> 
> 赞同：0
> 
> 时间：2013-03-07T10:15:38.687
> 
> 标签：java, maven, neo4j

当我将 Neo4j 1.9.M05 添加到我的项目依赖项（使用 maven）中时，我在 eclipse 中收到以下错误：

> ArtifactDescriptorException：无法读取 org.neo4j:neo4j-kernel:jar:tests:1.9.M05 的工件描述符：UnresolvableModelException：无法在[http://m2.neo4j.org中找到 org.neo4j:parent:pom:1.9.M05 /releases](http://m2.neo4j.org/releases)已缓存在本地存储库中，直到 neo4j-release-repository 的更新间隔已过或强制更新后才会重新尝试解析

这似乎是有道理的，因为 URL“ [http://m2.neo4j.org/content/repositories/releases/org/neo4j/parent](http://m2.neo4j.org/content/repositories/releases/org/neo4j/parent) ”不存在。有人已经可以使用 1.9.M05 了吗？是否有另一个公共存储库可以在其中找到此依赖项？

ps：有人知道neo4j-cypher-dsl 模块什么时候更新到1.9.M05 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:47:14.313

现在，您可以通过手动[将此父 pom](https://github.com/neo4j/neo4j/blob/1.9.M05/pom.xml)放置在本地 maven 存储库中来绕过此问题（或将其上传到您的公司 nexus，或...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:53:06.890

如果尚未部署父级，我建议您向作者提交错误报告，因为这不起作用。他们要么必须部署父级，要么派生一个新版本。

# android - 如何使用 rawQuery() 而不是 query() 编写此请求？（里面的代码）

> ID：15268439
> 
> 赞同：0
> 
> 时间：2013-03-07T10:15:44.130
> 
> 标签：android, database, request

我正在尝试使用 .query 而不是 .rawQuery 编写 SQL 数据库请求（我被告知它更有效，尽管并非每个人似乎都同意这一点......）。

如果我必须用 SQL 编写它，大概是这样的：

```
select COL_NAME, COL_COMMENTS, KEY_ROW_ID   
from TABLE   
where COL_CAT1 = myVariable1 or myVariable2 or ... myVariableN  
or COL_CAT2 = myVariable1 or myVariable2 or .... myVariableN  
or COL_CAT3 = myVariable1 or myVariable2 or.... myVariableN 
```

我试过这个：

```
public Cursor findNameInTable(int myVariable1, int myVariable2, int myVariableN) {
    String where = COL_CAT1 + " = ? OR " + COL_CAT2 + "=?";
    String[] whereArgs = new String[] { Integer.toString(myVariable1), Integer.toString(myVariable2), Integer.toString(myVariableN)};
    c = myDatabase
            .query(DATABASE_TABLE, new String[] { KEY_ROWID, COL_NAME , COL_COMMENTS }, 
                    where,
                    whereArgs, null,
                    null, null);
    return c;
} 
```

问题在于系统正在这样做：

```
 select .....
    from .....
    where COL_CAT1 = myVariable1 
    or COL_CAT2 = myVariable2
    or ???? = myVariableN 
```

然后它崩溃了，因为它希望将每个变量与一个新列进行比较，这不是我想要的：我有比列更多的输入变量。

它实际上是“=？” 这似乎不合适，但没有办法找到如何编写这种请求，大部分文档都是关于 rawQuery() 而不是 query()。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:28:56.503

试试这个

```
public Cursor findNameInTable(int myVariable1, int myVariable2, ..., int myVariableN) 
{
    String inInterval = "(?,?,?,...,?)"; // N question mark altogether.
    String where = COL_CAT1 + " IN " + inInterval 
                   + " OR " + COL_CAT2 + " IN " + inInterval
                   + ...........
                   + " OR " + COL_CATM + " IN " + inInterval;
int numberOfColumn = M; // The number of columns you have.
String[] whereArgs = new String[M * N];
for (int i = 0; i < M; i++)
{
     whereArgs[i * N + 0] = Integer.toString(myVariable1);
     whereArgs[i * N + 1] = Integer.toString(myVariable2);
     whereArgs[i * N + 2] = Integer.toString(myVariable3);
        ........................
     whereArgs[i * N + N - 1] = Integer.toString(myVariableN);
}  
Cursor c = myDatabase
        .query(DATABASE_TABLE, new String[] { KEY_ROWID, COL_NAME , COL_COMMENTS }, 
                where,
                whereArgs, null,
                null, null);
    return c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:27:36.477

因为您正在创建一个广泛的查询，您可能需要考虑使用：

[http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html)

这将允许您基本上创建更长的 where 子句。然而; 这在理论上也应该可以通过带有 StringBuilder 的 rawQuery 实现，但在最佳实践中，最好使用包装器方法。

# php - 如何在 extjs 中使用两个字段过滤存储？

> ID：15268444
> 
> 赞同：0
> 
> 时间：2013-03-07T10:16:00.300
> 
> 标签：php, extjs, filter, store

我在 extjs 中创建了 3 个名为章节、主题和标准的商店。在章节存储中，我有字段 subjectid 和 stanrdid 现在我想根据在主题和标准中选择的值过滤我的章节存储。

我可以从任何一个过滤器中过滤章节，但不能从两个 id 中过滤记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:09:53.113

一个基本的过滤器示例如下所示。请参阅[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-filters)。您也可以以类似的方式尝试[Store.filterBy()方法。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-filterBy)

```
filters: [
    function(item) {
        if (item.subject == selectedSubject && item.standard == selectedStandard){
          return true;
        }

        return false;
    }
] 
```

# c# - 将 docx 转换为 pdf - 免费

> ID：15268445
> 
> 赞同：6
> 
> 时间：2013-03-07T10:16:01.713
> 
> 标签：c#, pdf, converter, docx

我已经看到了很多关于此的问题，但仍然找不到我的答案。

我希望能够在不安装 word的情况下将`docx`文件转换为文件。`pdf`那里可能有免费的图书馆吗？我真的不想为此付出代价。我读了一篇关于的帖子`XSL-FO`，发现了一个`XSL-FO`to pdf 转换器库，不确定它是否有效。

所以不使用`Microsoft.Office.Interop.Word`我想转换`docx`为`pdf`

# jquery - 从 jquery easyUi treegrid 中搜索

> ID：15268449
> 
> 赞同：0
> 
> 时间：2013-03-07T10:16:11.937
> 
> 标签：jquery, jquery-ui, jquery-easyui

我正在使用[jquery EasyUi treegird](http://www.jeasyui.com/documentation/treegrid.php)，我想从网格中进行过滤。

任何人从easyui treegrid实现了这样的功能，请给我建议或提供如何使用easyui treegrid进行过滤的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:02:42.653

不确定您是否还在寻找，但这里有一个使用 HTML、Jquery/jeasyui/Ajax 和 Java 的解决方案：

1.  HTML：

    `<html>`
    `<form>`
    `<input id="searchFilter" name="searchFilter" class="required" />`
    `<a href="#" onclick="doSearch()">Search</a>`
    `</form>`
    `<%-- the treegrid (a table) to contain the results --%>`
    `<table id="dgMilestone"></table>`
    `<html>`

2.  杰易/阿贾克斯。这与上面的 HTML 代码放在同一个文件中：

    `<script type="text/javascript">`
    `$('#dgMilestone').treegrid({`
    `url:"yourBean.action?&listAjax",`
    `idField:'id',`
    `refresh:'id',`
    `treeField:'name',`
    `columns:[[`
    `{field:'name',title:'Name',width:250, rowspan:2, sortable:'true'},`
    `]]`

    `});`

    `function doSearch()`{
    `// get the search parameter`
    `var search = $('#searchFilter').val();`
    `// call your backing bean method, passing the search filter`
    `$('#dgMilestone').treegrid({`
    `url:'yourBean.action?&_eventName=searchAjax&searchFilter='+search });`
    `}`
    `</script>`

我没有包含后端的东西，但是，在您的支持 bean 中，您将有一个名为 searchAjax 的方法，该方法获取 searchFilter 参数，然后调用服务层，将参数作为参数传递给搜索方法。

结果（一个集合）从服务层返回到支持 bean，后者将它们转换为 JSON（也未显示），然后 doSearch() 重新绘制树形网格以显示找到的结果

# java - 将字符串日期解析为日期时没有得到正确的日期

> ID：15268455
> 
> 赞同：0
> 
> 时间：2013-03-07T10:16:32.117
> 
> 标签：java

```
DateFormat formatter = new SimpleDateFormat("yy-mm-dd");
formatter.setLenient(false);
String[] dateStr = { "2013-12-27", "2013-01-03"};
for (int i = 0; i <= 1; i++) {
     Date date = formatter.parse(dateStr[i]);
     System.out.println("date is "+date);
} 
```

结果：2013 年 1 月 27 日星期日 00:12:00 IST

2013 年 1 月 3 日星期四 00:01:00 IST

我正在将字符串日期解析为 Date.but 它给了我从 Jan 月份开始的日期，无论我传递给格式化程序构造函数的月份。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:17:15.033

您的日期格式为`yy-MM-dd`. 更新您的格式并检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T10:18:02.183

`mm`每月**分钟** `MM`_ **_**

使用：“yy-MM-dd”

看[这里](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T10:19:53.563

一次愚蠢的错误

```
DateFormat formatter = new SimpleDateFormat("yy-MM-dd"); 
```

在您的代码中格式化这一行

# django - 带有自定义查询集的表单向导

> ID：15268456
> 
> 赞同：4
> 
> 时间：2013-03-07T10:16:34.213
> 
> 标签：django, django-forms, django-formwizard

我对表单向导有疑问。在向导的第 3 步中，我使用了一个过滤查询，该查询取决于第 1 步和第 2 步中的选择。我的向导在前进时工作正常，但是当用户按下上一个或更改第 1 步和第 2 步的选择时，事情就出错了（验证错误或过滤器不起作用）。

这是我的forms.py：

```
class BoekForm3(forms.Form):
    Activiteit = forms.ModelChoiceField(queryset=Activiteit.objects.all(), empty_label="(Nothing)") 
```

如果我在 forms.py 中使用 queryset Activiteit.objects.none() ，向导的第 3 步中的正确字段会正确显示，但第 3 步总是给出验证错误。

如果我在 forms.py 中使用 queryset Activiteit.object.all() ，则正确（过滤的）字段在前进时会在步骤 3 中显示，并且表单会验证。但是，当用户在第 4 步中按上一步时，过滤器消失了，所有选项都可用。

**Edit2：**好的，我发现每次都会读取 get_form （删除了我之前对此的编辑）。我的代码的问题是，当用户从第 4 步返回第 3 步时，get_form 使用的步骤是第 4 步。我试图改变：

“如果步骤 == 'step3'”

进入：

“如果步骤 == 'step3' 或步骤 == 'step4':”

在我看来，但这会导致 Activiteit 出现关键错误

我认为这些字段已更新到第 3 步，但表单没有。我在下面包含了我的views.py。

```
class BoekingWizard(SessionWizardView):
    def get_template_names(self):
        return [TEMPLATES[self.steps.current]]

    def get_context_data(self, form, **kwargs):
        plaatjes = Activiteitsgroepen.objects.all()
        context = super(BoekingWizard, self).get_context_data(form=form, **kwargs)
        if self.steps.current == 'step1':
            context.update({'plaatjes': plaatjes})
        return context

    def get_form(self, step=None, data=None, files=None):
        form = super(BoekingWizard, self).get_form(step, data, files)
        if step == 'step3':
            x = self.get_cleaned_data_for_step('step1') or {}
            filter1 = x['Type_activiteit'].Groep
            y = self.get_cleaned_data_for_step('step2') or {}
            if y['Aantal_personen'] < 76:
                filter2 = 'kleinere groepen'
            elif y['Aantal_personen'] > 76:
                filter2 = 'grotere groepen'
            else:
                filter2 = 'geen selectie'
            reeks = ['1','2','3']
            if y['Dagdeel'] in reeks:
                filter3 = 'Dagdeel'
            elif y['Dagdeel'] == '4':
                filter3 = 'Hele dag'
            elif y['Dagdeel'] == '5':
                filter3 = 'Middag + Avond'
            elif y['Dagdeel'] == '6':
                filter3 = 'Dag + Avond'
            form.fields['Activiteit'].queryset = Activiteit.objects.filter(Soort__Groep = filter1).filter(Grootte__Naam = filter2).filter(Dag__Omschrijving = filter3)
        return form 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:53:11.250

要使用自定义步骤名称，您必须使用步骤名称和表单类的元组列表初始化向导类

```
FORMS = [("step1", myapp.forms.Step1Form),
         ("step2", myapp.forms.Step2Form)] 
```

在 urls.py 中：

```
urlpatterns = patterns('',
    (r'^wizard/$', BoekingWizard.as_view(FORMS)),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:27:06.403

看起来Formwizard越来越不支持我想要的。因此，我开始使用普通表单，并将cleaned_data 存储在会话中。好处是我有更多的控制权，而且我更清楚发生了什么。这里的想法：

```
def BoekingForm(request):
    if request.method == 'POST':
        if request.POST.get('BoekForm2'):
            form1 = BoekForm1(request.POST)
            if form1.is_valid():
                request.session['Data_BoekForm1'] = form1.cleaned_data
                if 'Data_BoekForm2' in request.session:
                    x = request.session['Data_BoekForm2']
                else:
                    x = None
                form2 = BoekForm2(initial = x)
                return render_to_response('boeking/form2', {
                    'form2': form2,
                }, context_instance = RequestContext(request))

        else:
                return render_to_response('boeking/form1', {
                    'form1': form1,
                }, context_instance = RequestContext(request))
        if request.POST.get('BoekForm3'):
            form2 = BoekForm2(request.POST) 
```

除非有人在 Formwizard 中提供解决我的问题的解决方案，否则我将不得不将我自己的答案标记为解决方案。

# asp.net-mvc-3 - 临时 ASP.NET 文件的 MVC 3 错误

> ID：15268457
> 
> 赞同：2
> 
> 时间：2013-03-07T10:16:34.900
> 
> 标签：asp.net-mvc-3, visual-studio-2010, web-config

我从一个没有时间工作的朋友那里接手了一个 ASP.NET MVC 3 项目。我复制了他的所有文件，设置了数据库等，然后在 VS2010 中打开了它。我继续更改 MS-SQL 连接设置，然后在 VS 中以调试模式启动项目。

请注意，我们都使用框架版本 v4.0.30319

它运行良好 100% 没有问题。然后我关闭了项目，关闭了机器，现在需要开始向网站添加一些项目。我再次使用 VS 运行该站点并出现错误，特别是使用 Frameworks web.config 文件，说：

> 错误 77 无法加载类型“System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider”。C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\web.config

查找此内容后，我在[http://forums.asp.net/t/1698282.aspx/1](http://forums.asp.net/t/1698282.aspx/1)找到了解决此问题的方法，他们通过在站点应用程序 web.config 中添加以下行来解决该问题：

```
<add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" /> 
```

现在再次运行该站点会产生两个错误：

> 错误 77 命名空间“ComputechIT.Models”中不存在类型或命名空间名称“ChangePasswordModel”（您是否缺少程序集引用？） c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files \computechit\1111c5a1\826189ca\App_Web_43fo251f.0.cs 184
> 
> 错误 78 命名空间“ComputechIT.Models”中不存在类型或命名空间名称“RegisterModel”（您是否缺少程序集引用？） c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files \computechit\1111c5a1\826189ca\App_Web_43fo251f.2.cs 184

进一步研究，发现有人提到从项目文件夹中删除 obj 目录和内容，我这样做了，但无济于事。

所以我现在有点困惑为什么这个网站在我第一次使用它时运行良好。从那时到我下次打开 PC 并尝试运行该站点时，似乎发生了一些变化。

我没有在这台电脑上进行任何形式的更新。任何帮助，将不胜感激。

# asp.net - CustomValidator - 使用 asp.net ServerValidateEventArgs 对选定的索引进行验证

> ID：15268466
> 
> 赞同：0
> 
> 时间：2013-03-07T10:17:08.047
> 
> 标签：asp.net, vb.net, validation, selectedindex

如果检查下拉列表的选定值是否大于0，我有以下代码可以正常工作。

但是，我需要检查下拉列表的选定索引而不是值。

```
Sub selectValidation(source As Object, args As ServerValidateEventArgs)
   Try
       args.IsValid = args.Value > 0
   Catch ex As Exception
       args.IsValid = False
   End Try
End Sub 
```

将 .Value 更改为 .SelectedIndex 会产生以下错误：

```
BC30456: 'SelectedIndex' is not a member of 'System.Web.UI.WebControls.ServerValidateEventArgs'. 
```

编辑：这是验证器代码...

```
<asp:DropDownList runat="server" ID="Adults" AutoPostBack="true" />

<asp:CustomValidator id="Req_Adults"
     ControlToValidate="Adults"
     ClientValidationFunction="selectValidation"
     OnServerValidate="selectValidation"
     runat="server"
     CssClass="errorAsterisk"
     Text="*" 
     ErrorMessage="Select number of adults" />

<asp:DropDownList runat="server" ID="Children" AutoPostBack="true" />

<asp:CustomValidator id="Req_Children"
     ControlToValidate="Children"
     ClientValidationFunction="selectValidation"
     OnServerValidate="selectValidation"
     runat="server"
     CssClass="errorAsterisk"
     Text="*" 
     ErrorMessage="Select number of children" /> 
```

客户端验证（工作正常）：

```
function selectValidation(source, arguments)
   {
        var selectedValue = $(source).siblings("select").prop("selectedIndex");
        if (selectedValue > 0 ){
            arguments.IsValid = true;
        } else {
            arguments.IsValid = false;
        }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:27:38.027

如果`DropDownList`可以从处理程序直接访问，则此方法有效：

```
Sub selectValidation(source As Object, args As ServerValidateEventArgs)
    args.IsValid = Me.DropDownList1.SelectedIndex <> -1
End Sub 
```

否则你必须告诉我们它在哪里。`source`您无法从或获取参考`args`。

A`CustomValidator`是唯一不需要`ControlToValidate`. 它可以验证多个控件，因此传递控件没有意义。

**更新**

我不喜欢这种方法。但是，如果您真的想使用相同的处理程序，您可以将 a 分配`ValidationGroup`给所有相关`DropDownLists`的并使用这样的查询来查找它们：

```
Dim ddlNumZero = From ddl In Me.Controls.OfType(Of DropDownList)()
           Where ddl.ValidationGroup = "NumberValidation" _
           AndAlso ddl.SelectedIndex <= 0
args.IsValid = Not ddlNumZero.Any() 
```

# jquery - Div 的浮动不准确。如何以正确的方式安排它们？

> ID：15268467
> 
> 赞同：3
> 
> 时间：2013-03-07T10:17:09.340
> 
> 标签：jquery, html, css

正如您在屏幕截图中看到的：![在此处输入图像描述](../Images/c70792965ca1e4fe2f23571c17ec786c.png)

订单不是那么完美。我喜欢安排文章没有任何间隙。像这样的意思：

![在此处输入图像描述](../Images/8b8d0e308a2ffae5139d02e4a48f1692.png)

有什么想法可以通过 CSS/CSS3 或 javascript 进行管理吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:19:12.603

恐怕这就是浮动在 CSS 中的工作方式。您可能想尝试使用[**jQuery Masonry**](http://masonry.desandro.com/)来实现您想要实现的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T10:25:32.787

您可以使用 CSS，但问题是，该属性仅支持 >IE10。然后你可以回退到 jQuery Masonry

[http://jsfiddle.net/4gXCs/](http://jsfiddle.net/4gXCs/)

```
.col {
   -moz-column-count:2; 
   -webkit-column-count:2; 
   column-count:10px;
   -moz-column-gap:10px;
   -webkit-column-gap:10px; 
   column-gap:2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:19:34.007

您可能需要使用`masonry plugin`

**[http://masonry.desandro.com/](http://masonry.desandro.com/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T10:47:22.743

你的意思是这样的吗？

**[工作小提琴](http://jsfiddle.net/4gXCs/2/)**

使用两个垂直 div 完成

```
<div class="one">
    <div class="leftTop"></div>
    <div class="leftBot"></div>
</div>
<div class="two">
    <div class="rightTop"></div>
    <div class="rightBot"></div>
</div> 
```

# php - 保留 hybridauths 用户身份验证会话数据有什么好处？

> ID：15268468
> 
> 赞同：1
> 
> 时间：2013-03-07T10:17:11.637
> 
> 标签：php, session, authentication, login, hybridauth

我目前正在为我的注册/登录系统试验 HybridAuth。用户成功通过身份验证后，我将用户 ID 存储在会话中`$_SESSION['user'] = $user_id`。我还将 HybridAuth 可以为我提供的有关用户的所有其他数据存储在数据库中以供以后使用。

然后当我需要检查用户是否登录时，我可以运行以下命令：

```
if(isset($_SESSION['user_id'])) 
```

然后可能类似于以下内容以确保登录用户可以执行操作（例如删除评论）：

```
if ( $_SESSION['user_id'] == $comment_user ) {
    //User owns the comment, go ahead and delete it.
    ...
} 
```

1.  这样的事情还不够吗？
2.  `$_SESSION`HybridAuth 生成的所有数据有什么意义？
3.  将其全部取消以节省内存会更好吗？
4.  其他人如何使用这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:22:14.800

以这种方式使用 $_SESSION 是可以的，但是 $_SESSION 过期会发生什么？你重新授权吗？

我们将 HybridAuth 授权信息存储在 MySQL 中，稍后使用它来访问社交媒体配置文件、发布到时间线等。

# xml - taglib.xml 中有多个库类

> ID：15268471
> 
> 赞同：2
> 
> 时间：2013-03-07T10:17:15.663
> 
> 标签：xml, jsf, facelets, taglib

有没有一种方法可以让我在 taglib.functions.xml 中使用更多（自定义）库，例如：

```
<?xml version="1.0"?>
<!DOCTYPE facelet-taglib PUBLIC
        "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
        "facelet-taglib_1_0.dtd">
<facelet-taglib>
    <!-- <namespace>http://loxon.hu/jsf/fw/functions</namespace>-->
    <library-class>com.loxon.fw.common.web.util.JsfCommonLibrary</library-class>
    <library-class>com.loxon.fw.rt.web.util.JsfCommonLibrary</library-class>
</facelet-taglib> 
```

不幸的是，这不是一个正确的语法，我不能`<library-class/>`在一个`<facelet-taglib/>`...

或者我应该使用新的 taglib.xml 吗？？？每次我需要一个新图书馆的时候？

一些想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-25T11:09:44.643

`*taglib.xml`每个库一个是正确的选择。

# android - Android：使用 VideoView 和 RtpStream

> ID：15268472
> 
> 赞同：1
> 
> 时间：2013-03-07T10:17:16.283
> 
> 标签：android, streaming, android-videoview, rtp

我正在`VideoView`使用`rtsp`. 我想获取有关它的详细信息，因此我想使用`android.net.rtp.`当我调用任何 RtpStream 类的方法时，例如`getLocalPort()`应用程序不起作用。这是代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mVideoView = (VideoView) findViewById(R.id.surface_view);

    mPath = (EditText) findViewById(R.id.edit_message);
    text= "rtsp://192.168.1.37/sample_300kbit.mp4";
    mPath.setText(text);

    mPlay = (ImageButton) findViewById(R.id.play);
    mPause = (ImageButton) findViewById(R.id.pause);
    mReset = (ImageButton) findViewById(R.id.reset);
    mStop = (ImageButton) findViewById(R.id.stop);

    mPlay.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            reproducirVideo();
        }
    });
    mPause.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                mVideoView.pause();
            }
        }
    });
    mReset.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                mVideoView.seekTo(0);
            }
        }
    });
    mStop.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                current = null;
                mVideoView.stopPlayback();
            }
        }
    });

    runOnUiThread(new Runnable(){
        public void run() {
            reproducirVideo();

        }

    });

}

public void reproducirVideo() {
    try {
        final String path = mPath.getText().toString();
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(MainActivity.this, "Campo URL vacío",
                    Toast.LENGTH_LONG).show();

        } else {
            if (path.equals(current) && mVideoView != null) {
                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;
            mVideoView.setVideoPath(getDataSource(path));
            mVideoView.start();
            mVideoView.requestFocus();      

            TextView texto= (TextView) findViewById(R.id.mensaje);
            InetAddress address = null;
            mRtpStream.associate(InetAddress.getByAddress(new byte[] {(byte)192, (byte)168, (byte)1, (byte)37 }), 1220);
            address=mRtpStream.getRemoteAddress();
            String address_string = address.getHostAddress();
            texto.setText(" La dirección local es "+(address_string)+"   ");

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
}
private String getDataSource(String path) throws IOException {
    if (!URLUtil.isNetworkUrl(path)) {
        return path;
    } else {
        URL url = new URL(path);
        URLConnection cn = url.openConnection();
        cn.connect();
        InputStream stream = cn.getInputStream();
        if (stream == null)
            throw new RuntimeException("stream is null");
        File temp = File.createTempFile("mediaplayertmp", "dat");
        temp.deleteOnExit();
        String tempPath = temp.getAbsolutePath();
        FileOutputStream out = new FileOutputStream(temp);
        byte buf[] = new byte[128];
        do {
            int numread = stream.read(buf);
            if (numread <= 0)
                break;
            out.write(buf, 0, numread);
        } while (true);
        try {
            stream.close();
        } catch (IOException ex) {
            Log.e(TAG, "error: " + ex.getMessage(), ex);
        }
        return tempPath;
    }
} 
```

}

# javascript - 使用 JQuery 动态设置复选框

> ID：15268481
> 
> 赞同：0
> 
> 时间：2013-03-07T10:17:40.607
> 
> 标签：javascript, jquery, jsp

我试图根据用户从下拉列表中选择的内容使用 JQuery 1.5 动态检查复选框。当列表更改时，它会返回此函数：

```
function displaySystemResults(html){
    var v = html.split(",");
    document.getElementById('fUpdateSystemName').value = v[0];
        if (v[1] == "true"){
            alert("true");
            $('#fUpdateActiveFlag').setAttribute('checked','checked');
        }
    } 
```

这是下拉列表：

```
<td valign="top"><form:checkbox path="fUpdateActiveFlag"
name='fUpdateActiveFlag' value="checked" />&nbsp;</td> 
```

我无法让复选框在框中打勾。谁能发现我做错了什么？我知道它击中了 setAttribute 方法，因为它应该设置为 true 时显示警报框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:19:19.343

`$('#fUpdateActiveFlag')`是 ID 选择器。

将其添加到您的复选框

```
<td valign="top"><form:checkbox ID="fUpdateActiveFlag" path="fUpdateActiveFlag"
name='fUpdateActiveFlag' value="checked" />&nbsp;</td> 
```

此外，jQuery 函数不正确。`setAttribute`是 JavaScript 函数，虽然看起来您正在使用 jQuery 选择器，因此您选择的对象是 jQuery 对象，它没有名为 的方法`setAttribute`，而是使用`.attr()`：

```
$('#fUpdateActiveFlag').attr('checked','checked') 
```

请参阅工作示例[http://jsfiddle.net/ruslans/8xp9g/](http://jsfiddle.net/ruslans/8xp9g/)

**编辑**：根据@Dementic 下面的评论，您可以继续使用该`name`属性，但是您必须将选择器更改为：

```
$('[name="fUpdateActiveFlag"]').attr('checked','checked'); 
```

见工作示例：http: [//jsfiddle.net/ruslans/A4D8f/](http://jsfiddle.net/ruslans/A4D8f/)

# kinvey - 如何在 Kinvey 上使用 android 查询日期时间

> ID：15268484
> 
> 赞同：0
> 
> 时间：2013-03-07T10:17:43.967
> 
> 标签：kinvey

我想使用日期查询。

在 API Console 上，它真的很好用。

> /appdata/[keydata]/Updates/?query={"_kmd.lmt":{"$gte": "2013-03-07T09:09:24+0000"}}

但我不知道如何在android上。

```
 RefreshDate = "2013-02-20T10:04:05.511Z";

    Log.d(TAG,"RefreshDate="+RefreshDate);

    MappedAppdata updates = mKinveyClient.mappeddata(UpdateEntity.class, "Updates");
    SimpleQuery query = new SimpleQuery();
    query.orderByAscending("_kmd.lmt");
    query.addCriteria("_kmd.lmt", ">=", RefreshDate); 
```

错误

> java.lang.IllegalStateException：{$gte: 2013-02-20 10:04:05} 字符 19 处的未终止对象

我想知道如何在android上查询。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:26:40.177

免责声明：我在金维工作。

我建议升级到Android 库的[2.0版。](http://devcenter.kinvey.com/android/downloads)它使用不同的（更好的）数据模型，并具有更强大的查询功能。

# xslt-1.0 - 如何在 xslt 1.0 中执行不区分大小写的属性选择器

> ID：15268486
> 
> 赞同：1
> 
> 时间：2013-03-07T10:17:57.797
> 
> 标签：xslt-1.0

是）我有的：

`<xsl:param name="data_value_loadtime" select="substring-before(value[@channel='Loading Time'],' m')" />`

我需要什么：每个输入文档的“加载时间”外观都不同 - 它可能是“加载时间”、“加载时间”或“加载时间”。

我该如何选择？

我试图申请`value[translate(@channel,'abcd...','ABCD...')='loading time'`，但它给我一个 Invalid Token 异常。

请记住，我必须使用 xslt 1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:53:32.523

**在 XSLT 1.0 中，您需要**：

```
<xsl:param name="data_value_loadtime" select=
"substring-before(value[translate(@channel, 'LOADING TIME', 'loading time') 
                       =
                       'loading time'
                       ]
                   ,' m'
                  )" /> 
```

# android - HttpURLConnection urlc

> ID：15268487
> 
> 赞同：0
> 
> 时间：2013-03-07T10:18:01.777
> 
> 标签：android, http, url

在我的应用程序中，当应用程序首次启动时，在我的初始屏幕期间，我正在检查网络连接。如果存在网络连接，我将通过调用以下方法进入 Internet 连接。

但是，我故意手动禁用我的互联网连接（我连接到路由器，但无法在我的浏览器上输入网页），但下面的方法总是返回我 -200 - 这对于互联网连接来说是正确的。

```
public boolean hasActiveInternetConnection()
{
    try
    {
        HttpURLConnection urlc = (HttpURLConnection) (new URL("http://www.google.com").openConnection());
        urlc.setRequestProperty("User-Agent", "Test");
        urlc.setRequestProperty("Connection", "close");
        urlc.setConnectTimeout(3000);
        urlc.setReadTimeout(4000);
        urlc.connect();
        Log.i("Splash", Integer.toString(urlc.getResponseCode()));
        return (urlc.getResponseCode() == 200);
    } catch (IOException e)
    {
        return (false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:15:27.960

尝试在 openConnection() 之前包含此代码

```
if (android.os.Build.VERSION.SDK_INT > 9) {
                    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                    StrictMode.setThreadPolicy(policy);
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:51:31.473

您可以使用此功能检查互联网连接：

```
 public boolean isInternetConnection() {
    ConnectivityManager cn = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo nf = cn.getActiveNetworkInfo();
    if (nf != null && nf.isConnected() == true)
        return true;
    else
        return false;
} 
```

您需要为此添加清单权限：

```
 <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# java - 用java替换String中的最后一个字符

> ID：15268489
> 
> 赞同：37
> 
> 时间：2013-03-07T10:18:03.610
> 
> 标签：java, string

我有一个字符串：

```
String fieldName = "A=2,B=3 and C=3,"; 
```

现在我想`,`用空格替换最后一个。

我用过：

```
if (fieldName.endsWith(",")) {
    fieldName.replace(",", " ");
    fieldName = fieldName.replace((char) (fieldName.length() - 1), 'r');
}

System.out.println("fieldName = " + fieldName); 
```

但我仍然得到相同的旧字符串。我怎样才能得到这个输出呢？

```
fieldName = A=2,B=3 and C=3 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-07T10:21:38.393

您可以简单地使用`substring`：

```
if(fieldName.endsWith(","))
{
  fieldName = fieldName.substring(0,fieldName.length() - 1);
} 
```

确保在执行后重新分配您的字段，`substring`因为[字符串在 java 中是不可变的](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-07T10:20:47.360

> 我想用空格替换最后一个'，'

```
if (fieldName.endsWith(",")) {
    fieldName = fieldName.substring(0, fieldName.length() - 1) + " ";
} 
```

如果要*删除*尾随逗号，只需去掉`+ " "`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-07T10:20:52.993

要获得所需的结果，您可以执行以下操作：

```
fieldName = fieldName.trim();
fieldName = fieldName.substring(0,fieldName.length() - 1); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-07T10:20:04.940

```
fieldName = fieldName.substring(0, string.length()-1) + " "; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-07T10:20:51.577

首先字符串在java中是不可变的，你必须将替换的结果分配给一个变量。

```
fieldName = fieldName.replace("watever",""); 
```

您也可以使用 regex 作为选项，使用`String#replaceAll(regex, str)`;

```
fieldName = fieldName.replaceAll(",$",""); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-04-21T08:27:39.127

尝试这个：

```
s = s.replaceAll("[,]$", ""); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-09T16:18:40.330

```
 if (fieldName.endsWith(",")) {
        fieldName = fieldName.substring(0, fieldName.length()-1) + " ";
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-24T14:58:14.813

[org.apache.commons.lang3.StringUtils.removeEnd()](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#removeEnd-java.lang.String-java.lang.String-)和[org.springframework.util.StringUtils.trimTrailingCharacter()](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/StringUtils.html#trimTrailingCharacter-java.lang.String-char-)是你的朋友：

> ```
> StringUtils.removeEnd(null, *)      = null
> StringUtils.removeEnd("", *)        = ""
> StringUtils.removeEnd(*, null)      = *
> StringUtils.removeEnd("www.domain.com", ".com.")  = "www.domain.com"
> StringUtils.removeEnd("www.domain.com", ".com")   = "www.domain"
> StringUtils.removeEnd("www.domain.com", "domain") = "www.domain.com"
> StringUtils.removeEnd("abc", "")    = "abc" 
> ```

```
 @Test
    public void springStringUtils() {
        String url = "https://some.site/path/";

        String result = org.springframework.util.StringUtils.trimTrailingCharacter(url, '/');

        assertThat(result, equalTo("https://some.site/path"));
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-06-19T03:39:10.670

StringBuilder replace 方法可用于替换最后一个字符。

[`StringBuilder.replace(startPosition, endPosition, newString)`](https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#replace(int,%20int,%20java.lang.String))

```
StringBuilder builder = new StringBuilder(fieldName);
builder.replace(builder.length()-1, builder.length(), "");
builder.toString(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-07-02T18:57:56.847

您可以使用正则表达式来识别最后一个逗号 (,) 并将其替换为“”，如下所示：

```
if(fieldName.endsWith(","))
{                           
fieldName = fieldName.replace(/,([^,]*)$/," ");
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-17T06:38:56.137

您可以简单地使用：

```
if(fieldName.endsWith(","))
{
   StringUtils.chop(fieldName);
} 
```

来自 commons-lang

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-21T09:18:27.980

@Abubakkar Rangara 已经回答了解决问题的简单方法

替代方案是：

```
String[] result = null;
if(fieldName.endsWith(",")) {                           
String[] result = fieldName.split(",");
    for(int i = 1; i < result.length - 1; i++) {
        result[0] = result[0].concat(result[i]);
    }
} 
```

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2013-03-07T10:27:55.207

修改代码为 fieldName = fieldName.replace("," , " ");

# java - VM 在 Android 中使用线程 1174 中止

> ID：15268492
> 
> 赞同：0
> 
> 时间：2013-03-07T10:18:13.553
> 
> 标签：java, android, virtual-machine

这是日志跟踪

```
03-07 15:08:05.084: E/dalvikvm(1174): VM aborting  
03-07 15:08:05.093: A/libc(1174): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 1174 (com.company.gps) 
```

我的应用程序在 API 16 上使用 Emulator 运行良好，但是当我将模拟器设备升级到 API 17 时，我开始收到此错误，但此错误并没有说明问题所在。

谁能告诉我这里的问题。我正在制作一个 GPS 应用程序，它读取用户的当前坐标并显示一些附近的地方。

# javascript - 无法在 iFrame 中打开 .PDF 或 .DOC(X)

> ID：15268495
> 
> 赞同：1
> 
> 时间：2013-03-07T10:18:19.437
> 
> 标签：javascript, html, cordova, iframe

我正在使用 PhoneGap、Xcode、HTML 和 JavaScript 开发一个 iPhone 应用程序。我有一个 iFrame 应该查看已下载的文档（现在我正在使用测试文档而不是允许用户选择 - 稍后会出现）（再次，我选择了文档）。我尝试使用 iPhone 都支持的 .pdf 文件和 .docx 文件，但是单击我编码的按钮会在 Safari 而不是 iFrame 中打开它们。这是查看文档的代码（JavaScript 和 HTML）；

```
 function viewOnline() {
        var site = "file://" + pathToRoot + "/editme.txt"
        $('#myIframe').attr('src', site);
    }

    <button onclick="viewOnline();">View Online</button></li>

    <iframe id="myIframe" style="width: 210; height: 210px;" seamless="seamless" src=""></iframe> 
```

是无法在 iFrame 中查看 .pdf 等文件，还是我的代码有问题？

**`pathToRoot`在应用程序的其他地方进行了编码（并测试为正确） - 所以我不需要硬编码文件路径，当我将它传输到设备而不是模拟器时，它会改变。

**如果您需要我下载文件的代码，那么我可以给您-只需在下面评论

** 我对使用 Xcode 和 PhoneGap 也很陌生，所以如果我需要对它们进行一些更改，如果你能提供尽可能多的细节，那就太好了 - 提前非常感谢

**编辑**

我知道 OpenWhitelistURLsInWebView，并已启用它并允许我从 ExternalHosts 数组中下载的网站 - 但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:25:52.393

这是不可能的。大多数移动浏览器都没有预装 Adob​​e 插件等。它不是你看到的桌面。它是一部手机。因此，除非您创建自己的浏览器并包含 adobe 插件，否则这是不可能的（这意味着您必须编写 pdf 再现逻辑，因为该插件无法在移动设备中运行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:27:20.783

iFrame 很少需要，并且经常出于错误的原因使用。通常，您可以使用普通样式和更简单的标记来实现完全相同的目标。

此外，谷歌搜索 phonegap/cordova iframe 会给出许多说明 iFrame 存在问题的结果。有关它们的官方影响指南，请参阅[iFrame Usage](https://github.com/phonegap/phonegap/wiki/iFrame-Usage)。

在你的情况下，这些是你需要考虑的事情：

> 在 PhoneGap-iOS 上启用 iFrame 需要您将 iframe 域列入白名单并启用“OpenAllWhitelistURLsInWebView”。虽然这听起来不是问题，但许多应用程序希望在 MobileSafari（不是 ChildBrowser）中打开特定站点，当启用“OpenAllWhitelistURLsInWebView”时，这将无法轻松完成。
> 
> 要更改 OpenAllWhitelistURLsInWebView，请在 Xcode 中打开 Cordova.plist 文件。
> 
> 将域列入白名单。将其添加到 Cordova.plist 文件中的 ExternalHosts 数组。只需按 ExternalHosts 标题旁边的 +，当 item0 出现在下面时，将您的域添加到 value 部分（格式为 example.com）。

# jmeter - 如何通过 Jmeter 在运行时处理动态生成的值

> ID：15268496
> 
> 赞同：0
> 
> 时间：2013-03-07T10:18:19.950
> 
> 标签：jmeter, jmeter-plugins

**场景**：我正在录制一个从 CSV 名称和电子邮件中获取值的脚本。我已经使用`${email}`并且`${name}`当时正在注册的候选人。每次候选注册时，都会生成唯一的实例 ID，在此基础上执行进一步的操作。

前任：

> 候选人注册 -> 唯一 ID（例如 12345）-> ST：在网站上开始一些测试 -> 为 12345 保存的一些回复 -> FT：在网站上完成测试

需要对 500 名候选人执行相同的操作。我正在从 csv 获取唯一的电子邮件和名称。
我如何动态存储/处理每个候选人的唯一实例 ID 并执行整个操作？
目前，每个操作都针对相同的唯一实例 ID (12345) 执行，错误率为 0%。

让我知道是否需要任何其他细节。

* * *

**来自评论的更新：**

`UniqueId`每当候选者使用 RegEx 提取器或 XPath 提取器注册时，我都可以使用 say ，我可以在进一步的过程中传递该值。
现在的问题是我必须在 JSON 中传递存储的变量。
对此毫无头绪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:18:25.520

由于您使用任何提取器组件提取了 UniqueId 值，因此它存储在 jmeter 变量中（指向提取器的配置），并且可以称为例如`${uniqueId}`.

要传递到进一步的请求，您可以使用[HTTP 请求](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)，`Post Body`您可以在其中设置您的 JSON 请求代码，并将其`${uniqueId}`插入正确的位置。 [![在此处输入图像描述](../Images/989d8e1026091f9d672f4157aabc9223.png)](https://i.stack.imgur.com/Dc5tQ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T06:31:08.983

您可以在 jmeter 中使用正则表达式提取器来提取所需的变量值并使用变量名存储对其的引用。

稍后它可以通过 ${variablename} 在以后的请求中使用

在正则表达式提取器中，您可以使用 perl5 正则表达式

有关其他信息，请参阅此链接： [http ://www.jmeter4u.com/2013/04/chapter-6-handling-dynamic-server-values.html](http://www.jmeter4u.com/2013/04/chapter-6-handling-dynamic-server-values.html)

# regex - 折叠并捕获单个正则表达式中的重复模式

> ID：15268504
> 
> 赞同：33
> 
> 时间：2013-03-07T10:18:39.647
> 
> 标签：regex, language-agnostic

我不断遇到需要从字符串中捕获多个标记的情况，经过无数次尝试，我找不到简化过程的方法。

所以假设文本是：

> 开始：test-test-lorem-ipsum-sir-doloret-etc-etc-something:end

这个例子里面有 8 个项目，但是说它可能有 3 到 10 个项目。

理想情况下，我喜欢这样的东西：
`start:(?:(\w+)-?){3,10}:end`漂亮而干净，但它只捕捉最后一场比赛。[看这里](http://regex101.com/r/iY4uC8)

我通常在简单的情况下使用这样的东西：

```
start:(\w+)-(\w+)-(\w+)-?(\w+)?-?(\w+)?-?(\w+)?-?(\w+)?-?(\w+)?-?(\w+)?-?(\w+)?:end 
```

由于最多 10 个限制，3 个组是强制性的，另外 7 个是可选的，但这看起来并不“好”，如果最大限制是 100 个并且匹配更复杂，那么编写和跟踪将是一件痛苦的事情。[演示](http://regex101.com/r/eA2eE1)

到目前为止我能做的最好的：

```
start:(\w+)-((?1))-((?1))-?((?1))?-?((?1))?-?((?1))?-?((?1))?-?((?1))?:end 
```

更短，特别是如果匹配很复杂但仍然很长。[演示](http://regex101.com/r/wB6iS2)

任何人都设法使其在**没有编程**的情况下作为 1 个仅正则表达式的解决方案工作？

我最感兴趣的是如何在 PCRE 中做到这一点，但其他口味也可以。

### 更新：

目的是验证匹配并`match 0`仅通过 RegEx 在内部捕获单个令牌，没有任何操作系统/软件/编程语言限制

# 更新 2（赏金）：

在@nhahtdh 的帮助下，我使用以下方法获得了正则表达式`\G`：

```
(?:start:(?=(?:[\w]+(?:-|(?=:end))){3,10}:end)|(?!^)\G-)([\w]+) 
```

[demo](http://regex101.com/r/tA5xK0)更短，但是可以不用重复代码来描述

我也对 ECMA 风格感兴趣，因为它不支持`\G`想知道是否还有其他方法，尤其是不使用`/g`修饰符。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-14T19:54:40.617

## 先读这个！

**这篇文章是为了展示可能性，而不是支持解决问题的“一切正则表达式”方法。作者编写了 3-4 个变体，每个变体都有难以检测的细微错误，在达到当前解决方案之前。**

**对于您的具体示例，还有其他更好的解决方案更易于维护，例如沿分隔符匹配和拆分匹配项。**

**这篇文章处理你的具体例子。我真的怀疑一个完整的概括是可能的，但背后的想法是可重复用于类似的情况。**

## 概括

*   .NET 支持使用[`CaptureCollection`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capturecollection.aspx)类捕获重复模式。
*   对于支持`\G`和look-behind 的语言，我们也许可以构造一个与全局匹配函数一起工作的正则表达式。完全正确地编写它并不容易，编写一个有细微错误的正则表达式也很容易。
*   对于没有`\G`和后向支持的语言：可以通过在单个匹配后对输入字符串进行 chomping来模拟`\G`with 。`^`（此答案未涵盖）。

## 解决方案

此解决方案假定正则表达式引擎支持`\G`匹配边界、前瞻`(?=pattern)`和后视`(?<=pattern)`。Java、Perl、PCRE、.NET、Ruby 正则表达式支持上述所有高级特性。

但是，您可以在 .NET 中使用您的正则表达式。[`CaptureCollection`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capturecollection.aspx)由于 .NET 支持捕获所有与通过类重复的捕获组匹配的实例。

对于您的情况，它可以在一个正则表达式中完成，使用`\G`匹配边界，并提前限制重复次数：

```
(?:start:(?=\w+(?:-\w+){2,9}:end)|(?<=-)\G)(\w+)(?:-|:end) 
```

[**演示**](https://regex101.com/r/hH2cB9/1)。`\w+-`重复构造`\w+:end`。

```
(?:start:(?=\w+(?:-\w+){2,9}:end)|(?!^)\G-)(\w+) 
```

[**演示**](https://regex101.com/r/pP3qR5/1)。构造是`\w+`针对第一个项目，然后`-\w+`重复。（感谢 ka ᵠ 的建议）。这种结构更容易推断其正确性，因为交替较少。

`\G`当您需要进行标记化时，匹配边界特别有用，您需要确保引擎不会向前跳过并匹配本应无效的内容。

## 解释

让我们分解正则表达式：

```
(?:
  start:(?=\w+(?:-\w+){2,9}:end)
    |
  (?<=-)\G
)
(\w+)
(?:-|:end) 
```

最容易识别的部分是`(\w+)`在最后一行中，这是您要捕获的单词。

最后一行也很容易识别：要匹配的单词后面可能跟着`-`or `:end`。

我允许正则表达式*自由地开始匹配字符串中的任何位置*。换句话说，`start:...:end`可以出现在字符串中的任何位置，并且出现任意次数；正则表达式将简单地匹配所有单词。您只需要处理返回的数组以分隔匹配的令牌实际来自何处。

至于解释，正则表达式的开头检查字符串的存在，`start:`下面的前瞻检查单词的数量是否在指定的限制内，并以 . 结尾`:end`。**要么，要么**我们检查上一个匹配之前的字符是 a `-`，然后从上一个匹配继续。

对于其他结构：

```
(?:
  start:(?=\w+(?:-\w+){2,9}:end)
    |
  (?!^)\G-
)
(\w+) 
```

一切都几乎相同，只是我们`start:\w+`先匹配，然后再匹配 form 的重复`-\w+`。与第一个构造相反，我们`start:\w+-`首先匹配，以及重复的实例`\w+-`（或`\w+:end`最后一次重复）。

让这个正则表达式在字符串中间匹配是非常棘手的：

*   我们需要检查和之间的单词数`start:`（`:end`作为原始正则表达式要求的一部分）。

*   `\G`也匹配字符串的开头！`(?!^)`需要防止这种行为。如果不考虑这一点，正则表达式可能会在没有任何`start:`.

    对于第一个构造，后视`(?<=-)`已经阻止了这种情况（`(?!^)`由 暗示`(?<=-)`）。

*   对于第一个构造`(?:start:(?=\w+(?:-\w+){2,9}:end)|(?<=-)\G)(\w+)(?:-|:end)`，我们需要确保我们不匹配之后的任何有趣的东西`:end`。向后看就是为了这个目的：它可以防止`:end`匹配后的任何垃圾。

    第二个构造不会遇到这个问题，因为在匹配完所有标记之后，我们会卡在`:`(of ) 上。`:end`

## 验证版本

如果您想验证输入字符串是否符合格式（前后没有额外的东西），*并*提取数据，您可以像这样添加锚点：

```
(?:^start:(?=\w+(?:-\w+){2,9}:end$)|(?!^)\G-)(\w+)
(?:^start:(?=\w+(?:-\w+){2,9}:end$)|(?!^)\G)(\w+)(?:-|:end) 
```

（也不需要look-behind，但我们仍然需要`(?!^)`防止`\G`匹配字符串的开头）。

## 建造

对于所有要捕获所有重复实例的问题，我认为不存在修改正则表达式的通用方法。转换的“难”（或不可能？）案例的一个示例是，当重复必须回溯一个或多个循环以满足特定条件以匹配时。

当原始正则表达式描述整个输入字符串（验证类型）时，与尝试从字符串中间匹配的正则表达式（匹配类型）相比，它通常更容易转换。但是，您始终可以使用原始正则表达式进行匹配，我们将匹配类型问题转换回验证类型问题。

我们通过以下步骤构建这样的正则表达式：

*   编写一个覆盖重复之前部分的正则表达式（例如`start:`）。让我们将此*前缀称为 regex*。
*   匹配并捕获第一个实例。（例如`(\w+)`）
    *（此时，第一个实例和分隔符应该已经匹配）*
*   添加`\G`作为替代。通常还需要防止它匹配字符串的开头。
*   添加分隔符（如果有）。（例如`-`）
    *（在这一步之后，其余的标记也应该已经匹配，除了最后一个可能）*
*   在重复之后添加覆盖部分的部分（如果需要）（例如`:end`）。让我们在重复*后缀正则表达式*之后调用部分（我们是否将其添加到构造中并不重要）。
*   现在是困难的部分。您需要检查：
    *   除了*前缀 regex*之外，没有其他方法可以开始匹配。注意`\G`分支。
    *   *匹配后缀正则表达式**后*，无法开始任何匹配。注意分支如何开始匹配​​。*`\G`*
    **   对于第一个构造，如果您将后缀正则表达式（例如`:end`）与分隔符（例如`-`）交替混合，请确保您最终不会允许后缀正则表达式作为分隔符。*

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T09:39:50.097

尽管理论上可以编写单个表达式，但首先匹配外部边界然后对内部执行拆分要实用得多。

在 ECMAScript 中，我会这样写：

```
'start:test-test-lorem-ipsum-sir-doloret-etc-etc-something:end'
    .match(/^start:([\w-]+):end$/)[1] // match the inner part
    .split('-') // split inner part (this could be a split regex as well) 
```

在 PHP 中：

```
$txt = 'start:test-test-lorem-ipsum-sir-doloret-etc-etc-something:end';
if (preg_match('/^start:([\w-]+):end$/', $txt, $matches)) {
    print_r(explode('-', $matches[1]));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T23:06:41.463

当然，您可以在这个带引号的字符串中使用正则表达式。

```
"(?<a>\\w+)-(?<b>\\w+)-(?:(?<c>\\w+)" \
"(?:-(?<d>\\w+)(?:-(?<e>\\w+)(?:-(?<f>\\w+)" \
"(?:-(?<g>\\w+)(?:-(?<h>\\w+)(?:-(?<i>\\w+)" \
"(?:-(?<j>\\w+))?" \
")?)?)?" \
")?)?)?" \
")" 
```

这是个好主意吗？不，我不这么认为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T17:35:08.583

不确定您是否可以这样做，但您可以使用全局标志来查找冒号之间的所有单词，请参阅：

[http://regex101.com/r/gK0lX1](http://regex101.com/r/gK0lX1)

不过，您必须自己验证组的数量。如果没有全局标志，您只会得到一个匹配项，而不是所有匹配项 - 更改`{3,10}`为`{1,5}`，您会得到结果“先生”。

```
import re

s = "start:test-test-lorem-ipsum-sir-doloret-etc-etc-something:end"
print re.findall(r"(\b\w+?\b)(?:-|:end)", s) 
```

生产

`['test', 'test', 'lorem', 'ipsum', 'sir', 'doloret', 'etc', 'etc', 'something']`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T21:10:13.947

当你结合：

1.  您的观察：单个捕获组的任何类型的重复都会导致最后一次捕获的覆盖，因此仅返回捕获组的最后一次捕获。
2.  知识：基于部分而不是整体的任何类型的捕获，都无法限制正则表达式引擎重复的次数。限制必须是元数据（不是正则表达式）。
3.  要求答案不能涉及编程（循环），也不能像您在问题中所做的那样简单地复制粘贴捕获组。

可以推导出做不到。

*更新：*有一些正则表达式引擎适用于 p。1不一定是真的。在这种情况下，您指示的正则表达式`start:(?:(\w+)-?){3,10}:end`将完成这项工作（[source](http://www.regular-expressions.info/captureall.html)）。*

# highstock - Highstock 刻度间隔未显示

> ID：15268510
> 
> 赞同：1
> 
> 时间：2013-03-07T10:18:53.460
> 
> 标签：highstock, intervals

我在图表上显示刻度间隔时遇到问题。

请看这个例子：

```
$(function() {
    var usdeur = [[Date.UTC(2003,8,24),0.8],
                  [Date.UTC(2003,8,25),0.8]]
    var chart = new Highcharts.StockChart({

        chart: {
            renderTo: 'container'
        },

        yAxis: {
            tickInterval: 0.01
        },

        rangeSelector: {
            selected: 1
        },

        series: [{
            name: 'USD to EUR',
            data: usdeur
        }]
    });
}); 
```

> [http://jsfiddle.net/adrianCC/QqTgY/7/](http://jsfiddle.net/adrianCC/QqTgY/7/)

如果我有相同的值，我在垂直轴上的图表中没有任何间隔。

可以添加一些间隔吗？

谢谢！

# python - maya python将图像放在飞机上

> ID：15268511
> 
> 赞同：0
> 
> 时间：2013-03-07T10:18:56.457
> 
> 标签：python, image, maya

我想创建一个 nurbsPlane 然后在平面上放置一个图像。我想在 python 中做到这一点，这就是我目前所拥有的：

```
import maya.cmds as cmds

class image(object):
    def __init__(self,name):
        cmds.nurbsPlane(axis=(0,0,0),width = 10)
        cmds.image( image=name )

name='C:\Desert.jpg'
temp = image(name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:38:08.283

```
import maya.cmds as cmds

class image(object):
    def __init__(self,name):
        plane = cmds.nurbsPlane(axis=(0,0,0),width = 10)
        shader = cmds.shadingNode('surfaceShader', asShader=True)
        SG = cmds.sets(empty=True, renderable=True, 
                       noSurfaceShader=True, name=shader+"SG")
        cmds.connectAttr(shader+'.outColor', SG+".surfaceShader",
                         force=True)
        img = cmds.shadingNode('file', asTexture=True)
        cmds.setAttr(img+'.fileTextureName', name, type='string')
        cmds.connectAttr(img+'.outColor', shader+'.outColor',
                         force=True)
        # you should connect to a texture placement node and
        # its numerous connectins here
        cmds.sets(plane[0], edit=True, forceElement=SG)

name=r'C:\Desert.jpg'
temp = image(name) 
```

这假设您已将视口转换为纹理和着色。无论如何，您确实需要将属性连接到放置节点才能正确完成。

**PS：**您可能不想这样做，而是打算使用图像平面节点。

# actionscript-3 - AS3：加载 playerglobal/airglobal.swc 时出错，用于运行时检查/反射？

> ID：15268518
> 
> 赞同：1
> 
> 时间：2013-03-07T10:19:19.057
> 
> 标签：actionscript-3

在编写代码转换器（AS3 到另一种语言）时，有必要从所有自定义类和 AS3 核心访问整个继承链。

转换器本身是用 AIR 编写的，要移植的应用程序将是 Flash Player 或 AIR 应用程序。这让我陷入了困境：我需要为该*特定*应用程序运行时加载 playerglobal 或 airglobal 的不同版本（与为转换器本身加载的版本相比！），以便对其进行反思。当我的转换器尝试加载 library.swf（在 playerglobal.swc 中找到的 SWF）时，我会看到

`VerifyError: Error #1079: Native methods are not allowed in loaded code.`

这是有问题的，因为在我克服这个问题之前，我不能用它`describeType()`来检查 SWF 中的类。（而且我真的宁愿避免从 SWF 中读取 ABC 以获取课程信息。）

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:37:31.803

`playerglobal.swc``airglobal.swc`主要用于代码提示，让编译器知道有哪些本地方法可用。它们包含一些实际的代码块，但大部分是空函数。 *您无法在运行时加载它们，*也无法覆盖本机定义。

我很困惑为什么你需要这样做来进行自省。您应该能够`describeType`在转换器的本机变量实例上使用，并获得与从应用程序内部调用它完全相同的输出。

# asp.net - 文件比较/突出显示asp.net中的差异

> ID：15268521
> 
> 赞同：0
> 
> 时间：2013-03-07T10:19:28.637
> 
> 标签：asp.net, file, svn, merge, comparison

我们需要在我们的应用程序中添加一个功能，允许用户比较两个版本的文件并突出显示差异。此功能必须类似于**SVN**。是否有任何实用程序/API 可用于实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:21:51.450

我们的工具 ECMerge 被多个网站用来生成差异报告（通常通过运行命令行并应用您自己的 XSLT 或直接编写输出脚本，因为 ECMerge 使用 Javascript 第 3 版作为其脚本语言，并且差异列表可用于脚本）。还有一个可以直接从 C# 调用的 ActiveX。

# iphone - 设备引脚控制器类需要哪些权利/权限？

> ID：15268527
> 
> 赞同：1
> 
> 时间：2013-03-07T10:19:38.360
> 
> 标签：iphone, ios, objective-c, jailbreak

我的 iphone 应用程序已越狱，我不在乎我的应用程序是否被应用商店拒绝。

我希望`DevicePINController`在我的程序中使用私有 API。

我最近发现了名为 的私有 API `DevicePINController`，但是它不能正常工作。该应用程序运行，除了它的方法之外，所有其他方法都不执行任何操作。它的`BOOL`方法总是返回 false。设置方法不做任何事情。

有谁知道设备引脚控制器需要哪些权利权限？

**编辑：代码**

```
 id away = [[objc_getClass("DevicePINController") alloc]init];

    NSLog( [away simplePIN] ? @"YES":@"NO" );
    NSLog( [away _isBlocked] ? @"YES":@"NO" );
    NSLog( [away _attemptValidationWithPIN:@"1234"] ? @"YES":@"NO" );

    NSLog(@"%d",[away _unblockTime] );
    NSLog(@"%@",[away blockedStateKey] );
    NSLog(@"%@",[away blockTimeIntervalKey] );
    NSLog(@"%@",[away failedAttemptsKey] );
    NSLog(@"%d",[away pinLength] );
    NSLog(@"%@",[away stringsBundle] );

    NSLog(@"%@",[away stringsTable]); 
```

每个方法调用都返回错误的答案。有些只返回null。布尔总是返回 NO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:47:34.280

所以，第一个问题是你有一个`nil`对象。在 Objective-C 中，向对象发送消息`nil`将什么都不做。如果该方法应该返回 a ，则`BOOL`默认值为，因此如果 away 为 nil，您将返回一堆 NO。`BOOL``NO`

要回答您的后续问题（在您测试您确实有一个`nil`值之后）......您**确实**需要确保您的应用程序打开`DevicePINController`定义的库。否则，它将不知道该类是什么，也无法实例化它。因此，`objc_getClass`将返回您的`nil`对象。

对于该类，它在**Preferences.framework**中定义，位于

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework 
```

（显然，根据您的安装目录和/或 SDK 版本进行调整）

您可以将其添加到 Xcode 中的项目中，方法是转到目标设置 ->**构建阶段**->将**二进制文件与库链接**并添加它。您当然必须导航到上面的目录，因为它是一个私有框架，并且不会显示在初始弹出列表中。

或者，您可以使用代码动态加载库：

```
#import <objc/runtime.h>
#include <dlfcn.h> 
```

和

```
void* libHandle = dlopen("/System/Library/PrivateFrameworks/Preferences.framework/Preferences", RTLD_LAZY);

id away = [[objc_getClass("DevicePINController") alloc] init];
if (away == nil) {
    NSLog(@"object is nil");
} else {
    if ([away respondsToSelector: @selector(simplePIN)]) {
        NSLog(@"object responds to selector!");
    }
}

close(libHandle); 
```

我在 iOS 6.1（越狱）上测试了它，它可以工作。

顺便说一句，请将您的 PIN 更改为`1234`. 我的行李箱上有相同的组合；）

# django - 使用 django-haystack 搜索时遇到错误 - 未定义字段 django_ct

> ID：15268529
> 
> 赞同：0
> 
> 时间：2013-03-07T10:19:52.310
> 
> 标签：django, solr, django-haystack

我对 django haystack 完全陌生，我在开始使用它时遇到了麻烦。

当我搜索时出现错误

```
Failed to query Solr using '*:*': [Reason: Error 400 undefined field django_ct] 
```

当我重建索引时出现此错误

```
WARNING: This will irreparably remove EVERYTHING from your search index in connection 'default'. Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y
Removing all documents from your index because you said so.
All documents removed.
ERROR:root:Error updating votingapp using default
Traceback (most recent call last):
...
...
index_qs = self.index_queryset(using=using)
TypeError: index_queryset() got an unexpected keyword argument 'using' 
```

我已经建立了一个简单的索引类

```
class QuestionsIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    qs = indexes.CharField(model_attr='question')

    def get_model(self):
        return Questions

    def index_queryset(self):
        return self.get_model().objects.all() 
```

在 settings.py 中添加代码

```
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.solr_backend.SolrEngine',
        'URL': 'http://127.0.0.1:8983/solr'
        # ...or for multicore...
        # 'URL': 'http://127.0.0.1:8983/solr/mysite',
    },
} 
```

添加了网址

```
url(r'^search/', include('haystack.urls')), 
```

查看代码

```
def home(request):
    if request.method == "POST":
        print SearchQuerySet().all()
    return render_to_response('search.html',{}) 
```

请告知我在哪里做错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T20:12:53.887

感谢你的提问！面对同样的错误后，我终于找到了问题所在。对我来说，这是 haystack 无法处理的 solr 版本。我 按照以下步骤 [安装了](http://django-haystack.readthedocs.org/en/latest/installing_search_engines.html#solr)[https://archive.apache.org/dist/lucene/solr/3.5.0/apache-solr-3.5.0.tgz：http://django-haystack.readthedocs.org/en/](https://archive.apache.org/dist/lucene/solr/3.5.0/apache-solr-3.5.0.tgz) [latest/installing_search_engines.html#solr](http://django-haystack.readthedocs.org/en/latest/installing_search_engines.html#solr) 和你一样的conf。希望这对你有用。干杯，马克斯

# mysql - 带有 MySQL Alias 查找计数器的 Postfix

> ID：15268533
> 
> 赞同：1
> 
> 时间：2013-03-07T10:19:59.217
> 
> 标签：mysql, postfix-mta

我想计算后缀 smtp 服务器的别名使用情况。别名是通过 MySQL 使用后缀指令 ' `virtual_alias_maps`' in查询的`main.cf`。

```
user = user
password = pwd
hosts = 127.0.0.1
dbname = dbname
query = SELECT destination FROM view_aliases WHERE email='%s' 
```

查找工作顺利，没有什么可抱怨的。我现在需要的是，在 postfix 查找别名的任何时候增加一个计数器（MySQL 表中的列）。我试图像这样链接查询：

```
query = UPDATE view_aliases SET hitcount = hitcount+1 WHERE email='%s'; SELECT destination FROM view_aliases WHERE email='%s' 
```

但这会导致错误消息和后缀查找问题：

```
Mar  7 11:04:01 host postfix/trivial-rewrite[32546]: warning: mysql query failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT destination FROM view_aliases WHERE email='mydomain.com'' at line 1 
```

有没有办法像我需要的那样为后缀别名使用创建一个计数器？

**更新**：根据ethrbunny的提示，我尝试编写以下程序（这次是在测试数据库中）：

```
DELIMITER & 
CREATE PROCEDURE mailbox(IN recipient VARCHAR(255)) 
BEGIN
    SELECT * FROM test WHERE email=recipient; 
    UPDATE test SET value=value+1 WHERE email=recipient; 
END & 
DELIMITER ; 
```

当我调用该过程时，`CALL mailbox('test@test.com')`我从服务器收到一条线程堆栈溢出错误消息......

# android - 适用于 Android 的安全应用内购买

> ID：15268538
> 
> 赞同：1
> 
> 时间：2013-03-07T10:20:13.787
> 
> 标签：android, in-app-purchase

我遵循了一些使用应用内购买的教程，并且我得到了这一切。但是在这个示例案例中是否可以安全地使用它：

> 该应用程序可免费下载，并具有一些聊天功能。它每天可以发送 100 条消息。该应用程序每年可以发送额外的 x 条消息。

这里的问题是：服务器如何知道用户买了东西？是否有 Google 服务可供使用和检查？因为通过允许应用程序向服务器发送消息“嘿，我刚买了这个”似乎是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:42:25.417

作为 IAP 的一部分，您需要一个 BroadcastReceiver 来接收来自 Google 的通知。其中一个通知是 com.android.vending.billing.PURCHASE_STATE_CHANGED。该通知包括一个数据块和一个签名。将两者准确地传输到您的服务器。Google Play 将为您提供一个公钥，然后您可以使用它来验证服务器上数据块的签名（在 php 中，openssl_verify 有效）。一旦您验证了服务器上的数据，您就可以解析数据块 (json) 以获取订单列表，包括他们的产品标识符，这些产品标识符告诉您用户购买了什么。从那里开始，您自己的协议必须包含一个设备/用户/合同标识符来验证服务器。很难在不了解您的计划的情况下就这部分提出建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:47:37.263

在这种方法上，您将获得交易的响应。

```
@Override
    public void onRequestPurchaseResponse(RequestPurchase request,
            ResponseCode responseCode) { 
```

如果 responseCode 为 RESULT_OK 则表示交易成功。

你可以参考[这个链接](https://stackoverflow.com/questions/8735931/android-in-app-billing-tutorial)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T09:38:51.250

从服务接收后，您可以将有关购买的信息转发到您的服务器。

您可以使用`openssl_verify ($data, $signature, $key)`

数据和签名包含在您从服务中获得的结果中。密钥是您可以在开发者控制台中找到的公共 RSA 密钥。

# javascript - “SecurityError：操作不安全。” 在 Firefox 和 Chrome 中的“未捕获的 ReferenceError：openDialog 未定义”

> ID：15268539
> 
> 赞同：1
> 
> 时间：2013-03-07T10:20:15.920
> 
> 标签：javascript, opendialog

我试过

```
openDialog('http://stackoverflow.com'); 
```

和

```
openDialog('http://localhost'); 
```

两者都抛出异常：

```
 SecurityError: The operation is insecure 
```

在火狐和

```
 Uncaught ReferenceError: openDialog is not defined 
```

镀铬

*openDialog()*并非在所有浏览器中都可用？

我正在本地机器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:29:28.320

> [window.openDialog](https://developer.mozilla.org/en-US/docs/DOM/window.openDialog)是 window.open 的[扩展](https://developer.mozilla.org/en-US/docs/DOM/window.open)。它的行为相同，只是它可以选择通过 windowFeatures 获取一个或多个参数，并且 windowFeatures 本身的处理方式略有不同。

因此，如果您不使用附加参数，请使用以下内容：

```
window.open(
   "http://localhost",
   "DescriptiveWindowName",
   "resizable=yes,scrollbars=yes,status=yes"
 ); 
```

或者干脆

```
window.open("http://localhost"); 
```

* * *

> 如果使用 strWindowFeatures 参数，则未列出的功能将被禁用或删除（标题栏和关闭除外，默认情况下为是）。

所以是的，标题栏或关闭按钮不可能。

# android - Action Bar Sherlock 和一些愚蠢的例外

> ID：15268540
> 
> 赞同：1
> 
> 时间：2013-03-07T10:20:21.400
> 
> 标签：android, android-fragments, actionbarsherlock, actionbarsherlock-map

我刚开始使用操作栏和标签导航。应用程序运行良好，但是当手机进入睡眠状态时出现问题，我将其唤醒，然后转到下一个选项卡，我得到了这个异常，我不知道去哪里找。例外是：

```
03-07 11:16:57.026: E/AndroidRuntime(20228): FATAL EXCEPTION: main
03-07 11:16:57.026: E/AndroidRuntime(20228): java.lang.NullPointerException
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.view.View.dispatchRestoreInstanceState(View.java:6326)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.view.View.restoreHierarchyState(View.java:6310)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.actionbarsherlock.internal.view.menu.MenuBuilder.restoreActionViewStates(MenuBuilder.java:361)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:503)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:272)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.actionbarsherlock.app.SherlockFragmentActivity.invalidateOptionsMenu(SherlockFragmentActivity.java:150)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.actionbarsherlock.app.SherlockFragmentActivity.supportInvalidateOptionsMenu(SherlockFragmentActivity.java:156)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1100)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.os.Handler.handleCallback(Handler.java:587)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.os.Looper.loop(Looper.java:130)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at java.lang.reflect.Method.invoke(Method.java:507)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
03-07 11:16:57.026: E/AndroidRuntime(20228):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:56:29.673

这似乎是 ActionBarSherlock 实现中的一个错误。[在此处](https://github.com/JakeWharton/ActionBarSherlock/issues/652)查看有关该错误的讨论。[有人在这里](https://github.com/ChrisSmith/ActionBarSherlock/commit/c5f968c1a136a940a722f2cfc2a8ef0850de4a69)上传了一个补丁。检查这是否适合您。

# php - 使用 jquery 和代码注入按需使用类似移动设备的键盘

> ID：15268541
> 
> 赞同：0
> 
> 时间：2013-03-07T10:20:27.047
> 
> 标签：php, jquery

就像您使用平板电脑时一样，每次您触摸输入文本字段时，浏览器都会触发虚拟键盘。

我试图开发相同的功能，但在我无法控制的网页（第三方网站，如谷歌）上的桌面上，但它们是使用 php 网关加载的，因此我可以在它们上插入代码。

我的一般想法是在 jquery 上使用[这个实现：](http://jsfiddle.net/Mottie/MK947/)

```
var simulateTyping = "Hello World!!1\b";

$('#keyboard').keyboard({
    // *** choose layout & positioning ***
    // choose from 'qwerty', 'alpha', 'international', 'dvorak', 'num' or
    // 'custom' (to use the customLayout below)
    layout: 'qwerty',
    customLayout: {
        'default': [
            'd e f a u l t',
            '{meta1} {meta2} {accept} {cancel}'
            ],
        'meta1': [
            'm y m e t a 1',
            '{meta1} {meta2} {accept} {cancel}'
            ],
        'meta2': [
            'M Y M E T A 2',
            '{meta1} {meta2} {accept} {cancel}'
            ]
    },
    // Used by jQuery UI position utility
    position: {
        of: null, // null = attach to input/textarea; use $(sel) to attach elsewhere
        my: 'center top',
        at: 'center top',
        at2: 'center bottom' // used when "usePreview" is false
    },

    // true: preview added above keyboard; false: original input/textarea used
    usePreview: true,

    // if true, the keyboard will always be visible
    alwaysOpen: false,

    // if true, keyboard will remain open even if the input loses focus.
    stayOpen: false,

    // *** change keyboard language & look ***
    display: {
        'meta1' : '\u2666', // Diamond
        'meta2' : '\u2665', // Heart
        'a'     : '\u2714:Accept (Shift-Enter)', // check mark (accept)
        'accept': 'Accept:Accept (Shift-Enter)',
        'alt'   : 'AltGr:Alternate Graphemes',
        'b'     : '\u2190:Backspace', // Left arrow (same as &larr;)
        'bksp'  : 'Bksp:Backspace',
        'c'     : '\u2716:Cancel (Esc)', // big X, close/cancel
        'cancel': 'Cancel:Cancel (Esc)',
        'clear' : 'C:Clear', // clear num pad
        'combo' : '\u00f6:Toggle Combo Keys',
        'dec'   : '.:Decimal', // num pad decimal '.' (US) & ',' (EU)
        'e'     : '\u21b5:Enter', // down, then left arrow - enter symbol
        'enter' : 'Enter:Enter',
        'lock'  : '\u21ea Lock:Caps Lock', // caps lock
        's'     : '\u21e7:Shift', // thick hollow up arrow
        'shift' : 'Shift:Shift',
        'sign'  : '\u00b1:Change Sign', // +/- sign for num pad
        'space' : ' :Space',
        't'     : '\u21e5:Tab', // right arrow to bar
        'tab'   : '\u21e5 Tab:Tab' // \u21b9 is the true tab symbol
    },

    // Message added to the key title while hovering, if the mousewheel plugin exists
    wheelMessage: 'Use mousewheel to see other keys',

    css : {
        // input & preview
        input          : 'ui-widget-content ui-corner-all',
        // keyboard container
        container      : 'ui-widget-content ui-widget ui-corner-all ui-helper-clearfix', 
        // default state
        buttonDefault  : 'ui-state-default ui-corner-all',
        // hovered button
        buttonHover    : 'ui-state-hover',
        // Action keys (e.g. Accept, Cancel, Tab, etc); this replaces
        // "actionClass" option
        buttonAction   : 'ui-state-active',
        // used when disabling the decimal button {dec} when a decimal exists
        // in the input area
        buttonDisabled : 'ui-state-disabled'
        },

    // *** Useability ***
    // Auto-accept content when clicking outside the keyboard (popup will close)
    autoAccept: false,

    // Prevents direct input in the preview window when true
    lockInput: false,

    // Prevent keys not in the displayed keyboard from being typed in
    restrictInput: false,

    acceptValid  : true,

    tabNavigation: false,

    enterNavigation : false,

    enterMod : 'altKey',

    appendLocally: false,

    stickyShift  : true,

    preventPaste: false,

    maxLength: false,

    repeatDelay  : 500,

    repeatRate   : 20,   

    // resets the keyboard to the default keyset when visible
    resetDefault : false,

    // Event (namespaced) on the input to reveal the keyboard.
    // To disable it, just set it to ''.
    openOn: 'focus',

    // Event (namepaced) for when the character is added to the input
    // (clicking on the keyboard)
    keyBinding: 'mousedown',

    // combos (emulate dead keys)
    // if user inputs `a the script converts it to à, ^o becomes ô, etc.
    useCombos: true,
    // if you add a new combo, you may need to update the regex below
    combos: {
// uncomment out the next line, then read the Combos Regex section below
//        '<': { 3: '\u2665' }, // turn <3 into ♥ - change regex below
        'a': { e: "\u00e6" }, // ae ligature
        'A': { E: "\u00c6" },
        'o': { e: "\u0153" }, // oe ligature
        'O': { E: "\u0152" }
    },

    initialized : function(e, keyboard, el) {},
    visible     : function(e, keyboard, el) {},
    change      : function(e, keyboard, el) {},
    beforeClose : function(e, keyboard, el, accepted) {},
    accepted    : function(e, keyboard, el) {},
    canceled    : function(e, keyboard, el) {},
    hidden      : function(e, keyboard, el) {},

    switchInput : function(keyboard, goToNext, isAccepted) {},

    validate    : function(keyboard, value, isClosing) { return true; }

}) 
    // activate the typing extension
    .addTyping();

$('#keyboard').getkeyboard().regex = /([`\'~\^\"ao])([a-z])/mig;

// Typing Extension
$('#icon').click(function() {
    var kb = $('#keyboard').getkeyboard();
    kb.reveal().typeIn(simulateTyping, 500, function() {
        // do something after text is added
        // kb.accept();
    });
}); 
```

为了完成这项工作，我需要使用以下方法包装文本字段：

```
<div id="wrap">
    <input id="keyboard" type="text">
    <img id="icon" src="http://mottie.github.com/Keyboard/demo/keyboard.png">
</div> 
```

所以理论上我需要在网站的每个输入和文本字段中插入一个 id 和一个包装 div，但我很困惑如何做到这一点以及如何重新利用 jquery 代码使其在所有网站的输入中工作。

顺便说一句，我正在使用[这个](https://github.com/Mottie/Keyboard)jquery lib。另外，我不想跑题，但是如果您认为我可以使用 Windows 上已经可以执行的程序来解决这个问题，该程序在背景上运行并在输入处于焦点时触发并在失去焦点时触发也是可以接受的回答。

**编辑：我使用应用内浏览器，是 AIR 开发平台的扩展。所以我使用 webkit 为 Kiosk 应用程序在我的应用程序中加载网页**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:27:14.810

您是否考虑过开发浏览器扩展程序或 UserScript/Greasemonkey 脚本来包装所有输入元素？涉及的 JS 代码应该很简单，我怀疑它甚至可以证明使用 jQuery。

此解决方案仅在您控制客户端浏览器时才适用，显然任何想要您的键盘功能的人都需要安装扩展程序/脚本。

# wpf - 在 Loaded 事件中出现空引用异常，其中访问子数据网格中 SelectedItems 的计数

> ID：15268543
> 
> 赞同：0
> 
> 时间：2013-03-07T10:20:33.907
> 
> 标签：wpf, datagrid, nullreferenceexception, selecteditem

这是异常堆栈的顶部：

```
 System.NullReferenceException: Object reference not set to an instance of an object.
     at xx.TblQcLotListSelectionChanged(Object sender, SelectionChangedEventArgs e) in ...\InternalEventHandlerQCPage.cs:line 441
     at xx.QCLotListPageLeftLoaded(Object sender, RoutedEventArgs e) in ...\InternalEventHandlerQCPage.cs:line 435 
```

这是 InternalEventHandlerQCPage.cs 中提到的部分：

```
 private void QCLotListPageLeftLoaded(object sender, RoutedEventArgs e)
    {
        this.QCPage.QCShowRangesTblHitTest = true;
        this.QCPage.QCShowRangesTblEnabled = true;
        this.QCPage.LOTListRightTxtNameEnabled = false;
        this.QCPage.LOTListFieldEnabled = false;
        this.QCPage.LOTListNumberDateEnabled = false;

        TblQcLotListSelectionChanged(null, null); //line 435
    }

    private void TblQcLotListSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (this._QCLotListPageLeftXAML.tblLotList.SelectedItems.Count == 0) //line 441
        {
            this.QCPage.LOTListRightBtnUpEnabled = false;
            this.QCPage.LOTListRightBtnDownEnabled = false;

            this.QCPage.QCShowRangesBtnUpEnabled = false;
            this.QCPage.QCShowRangesBtnDownEnabled = false;

            ... 
```

“this”是一个用户控件。_QCLotListPageLeftXAML 也是在 TabControl 内的页面上使用的 UserControl tblLotList 是 WPF DataGrid QCPage 是仅包含绑定的依赖属性的依赖对象

当数据网格有 300 个项目时，我们得到了这个异常，这是我们设置的允许的最大值。数据网格有 4 列，所以它不是那么重......而且该软件之前已经运行了一段时间，所以这在 sw 启动时没有发生。

你知道这里会出现什么问题吗？对于 DataGrid，SelectedItems 可以为空吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:43:17.433

尝试，如果错误仍然发生，当你这样做时：

```
if (this._QCLotListPageLeftXAML.tblLotList.SelectedItems != null &&
    this._QCLotListPageLeftXAML.tblLotList.SelectedItems.Count == 0)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:47:30.180

问题解决了。另一种情况是，已发布的编译应用程序抱怨堆栈中的另一行而不是实际导致异常的行。

# spring - Spring注解是如何工作的？

> ID：15268544
> 
> 赞同：18
> 
> 时间：2013-03-07T10:20:36.323
> 
> 标签：spring, annotations, classloader, spring-ioc

## 动机

作为我之前关于类加载的问题的后续行动

*   [一个类的类加载器是如何选择的？](https://stackoverflow.com/questions/15250656/how-is-the-classloader-for-a-class-chosen)
*   [Classloader 如何确定它可以加载哪些类？](https://stackoverflow.com/questions/15248405/how-classloader-determines-which-classes-it-can-load)
*   [字节码注入发生在哪里？](https://stackoverflow.com/questions/15268057/where-does-bytecode-injection-happen)

我很好奇注释在流行的 Spring 框架中是如何工作的。

## 可能的解决方案

据我了解，可能会使用两种机制：

**1\. 类加载上的字节码注入**

Spring 可以使用自己的类加载器来加载所需的类。在运行时，当类被加载并且 Spring 确定它具有一些适当的注释时，它会注入字节码以向类添加额外的属性或行为。

因此，`@Controller`可能会更改带有注释的控制器以扩展某些控制器基类，并且在使用注释时可能会更改函数以实现路由`@RequestMapping`。

```
@Controller
public class HelloWorldController {

    @RequestMapping("/helloWorld")
    public String helloWorld(Model model) {
        model.addAttribute("message", "Hello World!");
        return "helloWorld";
    }
} 
```

**2\. 用于实例化的反射**

`@Autowired`可以由 BeanFactory 在运行时通过反射读取，以处理实例化顺序并实例化配置的属性。

```
public class Customer 
{
    private Person person;

    @Autowired
    public void setPerson(Person person) {
        this.person = person;
    }
} 
```

## 问题

Spring 注解如何真正起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T12:47:35.033

Spring 是开源的，所以你不需要弄清楚它是如何工作的，看看里面：

*   `RequestMapping`注释由 处理`RequestMappingHandlerMapping`，见`getMappingForMethod`方法。

*   自动装配注释由 处理`AutowiredAnnotationBeanPostProcessor`，请参阅`processInjection`方法。

两者都使用反射来获取注释数据并在第一种情况下构建处理程序映射信息，或者在第二种情况下填充 bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:33:55.170

Spring上下文通过实现bean后处理器接口的一组类来理解注释。所以要处理不同类型的注释，我们需要添加不同的注释 bean 后处理器。

如果添加`<context:annotation-config>`配置 xml，则无需添加任何注释 bean 后处理器。

后处理器提供了对每个 bean 初始化进行预处理和后处理的方法。您可以通过创建一个实现 BeanPostProcessor 接口的 bean 来编写自己的 bean 后处理器来进行自定义处理。

# .htaccess - 如果用户使用 /index.php 输入 URL 而不在 url 中包含 /index.php，我如何重定向用户

> ID：15268550
> 
> 赞同：0
> 
> 时间：2013-03-07T10:20:49.700
> 
> 标签：.htaccess, mod-rewrite, joomla, joomla2.5

我在我的网站中遇到了 URL 重定向的小问题。这是我的 .htaccess 文件：

```
RewriteEngine On 

# Start –301 redirect for "http://" to "http://www"

Options +FollowSymLinks

rewritecond %{http_host} ^example.com [nc]

rewriterule ^(.*)$ http://www.example.com/$1 [r=301,L]

RewriteEngine On 
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /?(.*)/index\.php
RewriteRule ^(.*)$ /%1/ [L,R=301]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

这很好用。所有 URL 都可以完美运行，而无需在其中包含 /index.php。

但我的问题是，当有人将 URL 与`index.php`（例如`https://example.com/index.php/test`）一起放置时。所以它也会起作用。这是一个问题，我希望当用户将 /index.php 与 URL 一起放置时，它会重定向到同一页面而无需`/index.php`在其中。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:37:46.403

尝试将其添加到您已有的规则**之上：**

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /?(.*)/index\.php
RewriteRule ^ /%1/ [L,R=301] 
```

如果您尝试匹配请求 URI，它将导致循环，因为您已经拥有的规则将请求路由到 index.php，将请求 URI 重写*为*index.php，从而导致它在重写引擎循环时匹配。

# c++ - 未处理的异常...位置访问冲突..在 C++ 中运行 kinect 应用程序时

> ID：15268555
> 
> 赞同：0
> 
> 时间：2013-03-07T10:20:55.517
> 
> 标签：c++, multithreading, kinect

在运行我的应用程序时，我收到以下错误：my_app.exe 中 0x0132113D 处的未处理异常：0xC0000005：在 0xCDCDCDCD 读取时访问冲突

问题是：它对我有用一次。代码不是来自我，它在开发代码的开发人员的机器上运行良好。

该应用程序的作用是使用插入 USB 端口的 Kinect 并跟踪您的动作。线程有问题吗？USB端口？我真的不确定它是什么。它正在完美编译。

Stack Trace 是德语的，但您应该能够阅读它。谢谢！

```
my_app.exe!boost::intrusive_ptr::intrusive_ptr(const boost::intrusive_ptr & rhs) Zeile 91 C++
    my_app.exe!boost::thread::get_thread_info() Zeile 419 C++
    my_app.exe!boost::thread::get_id() Zeile 323 C++
    my_app.exe!boost::thread::join() Zeile 746 C++
    my_app.exe!IModality::stop() Zeile 153 C++
    my_app.exe!NUIEventManager::stop() Zeile 167 C++
    my_app.exe!main(int argc, char * * argv) Zeile 84 C++
    my_app.exe!__tmainCRTStartup() Zeile 536 C
    my_app.exe!mainCRTStartup() Zeile 377 C
    kernel32.dll!764f33aa()
    [Unten angegebene Rahmen sind möglicherweise nicht korrekt und/oder fehlen, keine Symbole geladen für kernel32.dll]
    ntdll.dll!771a9ef2()
    ntdll.dll!771a9ec5()

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:26:13.597

> 0xC0000005：在 0xCDCDCDCD 读取时访问冲突

您正在读取未初始化的指针。0xCDCDCDCD 由调试器/编译器（Visual Studio？）填充，以确保您注意到这一事实。有很多[神奇的数字](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)可以被识别。有人忘记初始化指针。您将需要检查代码以找到该错误。“在我的机器上工作”不是对好软件的测试。它始终适用于开发人员的机器。

# mysql - “未加载 QSQLITE 驱动程序” Qsql 数据库错误

> ID：15268558
> 
> 赞同：0
> 
> 时间：2013-03-07T10:21:10.480
> 
> 标签：mysql, database, sqlite

我正面临 QSqlDatabase 的问题。我收到一条错误消息，“未加载 QSqlite 驱动程序”。为了分析它，我们实现了一个示例测试代码。

```
#include <iostream>
#include <QtSql>
#include <QtSql/QtSql>
using namespace std;
#define FC_BT_DB_CONNECTION_NAME "fc_bluetooth_database_connection"

int main() {
   QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE", FC_BT_DB_CONNECTION_NAME );

      if (db.isValid())
                  cout<<"db is valid";
          else
                cout<<"ERROR db is NOT valid";
          return 0;
    } 
```

清单 1\. 测试代码

运行上面的代码：

```
bash-3.2# ./sqltest
QSqlDatabase: QSQLITE driver not loaded
QSqlDatabase: available drivers:
QSqlDatabase: an instance of QCoreApplication is required for loading driver plugins
ERROR db is NOT valid 
```

清单 2\. 控制台上显示的错误

下面列出了 Eclipse 中用于构建测试代码的设置。

![在此处输入图像描述](../Images/aff583b4e5212876824cce7129c8a8c7.png) 图 1\. 在 Eclipse 中设置的构建变量

![在此处输入图像描述](../Images/64a4eb35849865b9ceba2a875136b912.png) 图 2\. 包含 ![在此处输入图像描述](../Images/6f961908dc4150bdd6cf87572c9fa4e2.png) 图 3\. 链接器库

有人有这个问题的解决方案吗？

# ruby - ruby 中的无头浏览器，非测试目的

> ID：15268565
> 
> 赞同：3
> 
> 时间：2013-03-07T10:21:47.233
> 
> 标签：ruby, headless

在 ruby​​ 中使用 Headless 浏览器有哪些选择？已经尝试过 Watir，但它会为每个打开的页面打开一个浏览器窗口，这是不希望出现的副作用。如果有像 Phanthom JS 这样的东西，或者我可以在 ruby​​ 代码中使用 Phanthom JS，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T05:44:08.850

首先，除非您做错了什么，否则 Watir 不会像您描述的那样“为每个页面打开浏览器窗口”。

其次，您可以将 phantomjs 与 Watir 一起使用。卸载 Headless gem，然后做

```
broswer = Watir::Browser.new :phantomjs

browser.goto "some_web_page.com"

browser.close  # When you are done. 
```

我怀疑您正在为每个页面打开一个新的浏览器实例，而不仅仅是使用 goto。如果是这种情况，请尝试使用 .new() 或 .start() 一次，然后再使用 .goto() 。也就是说，只需将上面代码中的 :phantomjs 替换为 :ff 即可。

请记住，如果您使用“无头”，最后我听说它还不能在 OS X 上运行。

# javascript - 在 Javascript 中添加文本

> ID：15268567
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:21:55.393
> 
> 标签：javascript, text

所以我有这个脚本

`search.value = document.getElementById('OptionA').value + " " + document.getElementById('OptionB').value;`

这有助于我在 wordpress 上进行搜索并将搜索 url 更改为如下内容：mysite.com/?s=OptionA+OptionB，但我需要这样的内容：

mysite.com/?s=OptionA+OptionB&post_type=产品。

我试图将脚本更改为：

`search.value = document.getElementById('OptionA').value + " " + document.getElementById('OptionB').value + "&post_type=product";`

但网址是这样的：

mysite.com/?s=OptionA+OptionB%26post_type%3Dproduct。我需要做什么？

这是 product-searchform.php 代码：

```
<script type="text/javascript" charset="utf-8">
    function choose (el) {
        search = document.getElementById('search_done');
        search.value = document.getElementById('OptionA').value + " " + document.getElementById('OptionB').value + "&post_type=product";
    }
</script>

<form role="search" method="get" id="searchform" action="<?php bloginfo('siteurl'); ?>">

<p>Food</p>
<select name='' id='OptionA' onchange="choose(this);">
  <option value=''selected='selected'>----</option>
  <option value="Sandwich">Sandwich</option>
  <option value="Hamburger">Hamburger</option>
</select> 

<p>Beverage</p>
<select name='' id='OptionB' onchange="choose(this);">
  <option value=''selected='selected'>----</option>
  <option value="Soda">Soda</option>
  <option value="Juice">Juice</option>
</select> 
   <input type="hidden" id="search_done" value="" name="s" />
   <input type="submit" id="searchsubmit" value="">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:26:24.860

它看起来像您的脚本在您引用的行之后对搜索值进行编码，从而导致您的额外部分也被 url 编码。寻找一条写着类似`something = encodeURIComponent( search.value )`or的行`something = encodeURI( search.value )`。`something`编码后，您必须将额外的 url 数据附加到变量中。

# jquery - 如何从css中排除特定控件？

> ID：15268571
> 
> 赞同：0
> 
> 时间：2013-03-07T10:22:06.473
> 
> 标签：jquery, asp.net, css, telerik, css-selectors

我有一个[Telerik 树视图](http://demos.telerik.com/aspnet-ajax/treeview/examples/functionality/checkboxes/defaultcs.aspx?#qsf-demo-source)，它以 HTML 格式呈现为`ul`.

当我在我的 aspx 中使用 specific 尝试它时`css`，它没有以正确的方式出现，因为 CSS 文件具有`ul`和`li`selectors 。

来自萤火虫：

![在此处输入图像描述](../Images/3e2ac23deef82f7e493a0527eac70822.png) ![在此处输入图像描述](../Images/8348225c59313dc3c448e9912573e851.png)

* * *

现在我想排除这个控件`(#tabContaier ul ,#tabContaier Li)`

我想要一些通用的解决方案来解决这个问题，尤其是`telerik`控件。

* * *

编辑：

应用级联技术后：

```
<telerik:RadTreeView ID="RadTreeView1" runat="server" CheckBoxes="True" Height="200px"
                                                                TriStateCheckBoxes="true"  CheckChildNodes="true" Skin="rad_rv"  EnableEmbeddedSkins="false" > 
```

![在此处输入图像描述](../Images/60128578f9745705e5aa39ebb957a70f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:32:55.550

# c# - 创建实例后无法获取 Const 变量

> ID：15268573
> 
> 赞同：1
> 
> 时间：2013-03-07T10:22:09.277
> 
> 标签：c#, asp.net, constants

这是我的 C# 类代码

```
 public class ConstReadOnly
{
    public const int cV = 10;
    public readonly int rV = 40;
} 
```

现在，当我尝试创建此类的实例时，我没有得到`const`变量`cV`。可能是什么原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:23:02.443

`const`是隐式静态的，您可以通过类名访问它们，例如：

```
ConstReadOnly.cV 
```

您可能会看到 Jon Skeet 的这篇文章 -[为什么我不能同时使用 static 和 const？](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/why-can-t-i-use-code-static-code-and-code-const-code-together.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:23:17.157

因为常量是隐式静态的。

如果要使用它们，请使用类名作为限定符。

```
 int fromConstInt = ConstReadOnly.cV; 
```

# spring - 这个 Spring bean 是无状态的吗？

> ID：15268575
> 
> 赞同：0
> 
> 时间：2013-03-07T10:22:12.413
> 
> 标签：spring

下面的 bean 是无状态的，因此是线程安全的吗？更具体地说，我担心的是 String 数组的注入值。这会干扰 bean 的状态吗？没有权利？

```
public class ServiceImpl implements Service {

private static final Logger LOG = Logger.getLogger(ServiceImpl.class);

/* Injected values properties file. */
private String[] values;

@Autowired
private DAO dao;

@Transactional
@Override
public void invoke(String submissionId) {

    dosomething....
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:29:37.567

这里要问的主要问题是

> 什么是无状态对象？

答案是，如果它的属性在其生命周期内没有改变，那么你的 Object 就是无状态的。我假设您的 bean 的范围为 a `singleton`，因此，只要该`values`属性在您的 bean 的生命周期内没有更改，它就是无状态的。否则不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:28:32.593

如果你在初始化之后不修改属性（或者你的bean引用的对象的属性），那么bean是有效的无状态的。无论您使用哪种类型。

因此，如果您不修改数组或其项目之一，那么您的 bean 就是有效的无状态/有效的不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:26:58.683

`values`如果对数组没有写访问权限，则它是无状态的。否则，您可能会遇到错误。

# redirect - 在 IIS6 中创建重定向

> ID：15268578
> 
> 赞同：0
> 
> 时间：2013-03-07T10:22:21.700
> 
> 标签：redirect, iis-6

我需要创建从 www.domain.com/page 到不同域中另一个页面的重定向。我需要第一个（引用）url 没有扩展名（意味着没有 .html 或 .asp）。

我知道如何在 Apache 中做到这一点，但不知道如何使用 iis6。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:52:58.833

这是一个简单的解决方案：

为您的网站 www.domain.com 创建一个文件夹，然后为“页面”创建另一个子文件夹。

在 IIS 管理器中为 www.domain.com 创建一个网站 展开该网站，然后右键单击“页面”文件夹，选择属性。

在目录选项卡上，选择选项：重定向到 URL 放置目标位置的完整域。如果符合您的需要，您可能还想检查它下面的复选框。

您可以在 IIS 之外执行的另一个选项是设置您的网站，并利用“默认文档”。如果您将 index.html 文件添加到您的网站[http://www.domain.com/page](http://www.domain.com/page)，默认文档将被自动调用，而无需在您的路径中引用 index.html，您可以执行 javascript 重定向。

```
<script>
window.location='http://www.someothersite.com/page.html'
</script> 
```

在处理大量页面时，这可能会更容易。

# c# - 如何在不从 MVC 3 中的子弹出窗口刷新父页面的情况下刷新父 JQ 网格？

> ID：15268579
> 
> 赞同：0
> 
> 时间：2013-03-07T10:22:26.160
> 
> 标签：c#, javascript, model-view-controller, jqgrid

我正在使用 window.open 在我的 MVC 页面中打开一个子弹出窗口，以便在关闭弹出窗口时我应该刷新我的父 Jquery Grid 而不刷新整个页面是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:01:51.567

您可以使用 reloadGrid 刷新网格，也可以使用 onbeforeunload 事件触发网格刷新，如下面的代码，用您的 ID 和 URL 替换您的网格 ID 和窗口 URL

```
var myWindow = window.open('your_url')
myWindow.onbeforeunload = function(){ 

$("#your_grid_id").trigger("reloadGrid",[{current:true}]);

} 
```

# javafx-2 - 在边框中心缩放组

> ID：15268580
> 
> 赞同：0
> 
> 时间：2013-03-07T10:22:26.703
> 
> 标签：javafx-2

以下场景：

```
BorderPane
  center
    ScrollPane
      List of other nodes 
```

ScrollPane 会调整大小以填充所有空间。

向图片添加组：

```
BorderPane
  center
    Group
      ScrollPane
        List of other nodes 
```

现在该组具有 ScrollPane 中第一个元素的大小，并且在它的右侧，空间是空的。

所有节点都没有设置任何大小属性（prefWidth，...）。既不在 fxml 中，也不在代码中。任何想法，可能有什么问题？

# apache-flex - 如何找到组中的元素偏移量？

> ID：15268581
> 
> 赞同：1
> 
> 时间：2013-03-07T10:22:29.900
> 
> 标签：apache-flex, flex4

我有一个嵌套在两组中的视觉元素。如何从父组中找到该元素的 X 和 Y 偏移量？

这是代码：

```
<group id="rootGroup">
   <group id="parentGroup" x="30" y="50">
      <button id="myButton" x="40" y="20" />
   </group>
</group> 
```

按钮位置可以随时间而变化，以及父组位置。所以我试图使用类似 localToGlobal 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:20:18.617

下面是一个示例应用程序，展示了如何执行此操作。基本思想是将目标对象（按钮）的坐标转换为全局坐标`localToGlobal()`。然后使用`globalToLocal()`将全局坐标转换为所需的坐标空间。

最重要的一步是第一部分。要将按钮的坐标转换为全局坐标，我们实际上使用了按钮的父级——因为按钮“存在”在它的父级坐标空间中。当我这样做时，这总是有点令人困惑:)

运行这个应用程序并使用它。要真正测试它，`BorderContainer`请在“rootGroup”周围再添加一个并将“rootGroup”偏移几个像素，以便根的坐标空间与全局坐标空间不同。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="onCreationComplete()">

    <fx:Script>
        <![CDATA[
            private function onCreationComplete():void
            {
                var p:Point = new Point(childButton.x, childButton.y);
                trace(p); // (x=50, y=50)
                // convert the button's coordinates to Global coordinate space
                // note since the button exists in the parent object's coordinate plane
                // you do this conversion using the parent
                var global:Point = parentGroup.localToGlobal(p);
                trace(global); // (x=151, y=151) <-- 1 extra pixel from border of the BorderContainer

                // now that we have global coordinates, use globalToLocal() to convert
                // these coordinates into the desired coordinate plane
                var rootLocal:Point = rootGroup.globalToLocal(global);
                trace(rootLocal); // (x=151, y=151) 
                var parentLocal:Point = parentGroup.globalToLocal(global);
                trace(parentLocal); // (x=50, y=50)
            }
        ]]>
    </fx:Script>

    <s:BorderContainer id="rootGroup" borderColor="#FF0000">
        <s:BorderContainer id="parentGroup" x="100" y="100" borderColor="#00FF00">
            <s:Button id="childButton" x="50" y="50" label="Click Me"/>
        </s:BorderContainer>
    </s:BorderContainer>
</s:Application> 
```

# jquery - Django REST 框架和 Backbone.js 文件上传问题

> ID：15268584
> 
> 赞同：2
> 
> 时间：2013-03-07T10:22:45.480
> 
> 标签：jquery, file-upload, backbone.js, django-rest-framework

我正在尝试将带有backbone.js 和JQuery 的图像文件上传到由Django REST Framework 制作的API。我从本教程[http://10kblogger.wordpress.com/2012/05/25/a-restful-password-locker-with-django-and-backbone-js/](http://10kblogger.wordpress.com/2012/05/25/a-restful-password-locker-with-django-and-backbone-js/)开始。

当我去提交表格并上传文件时，我收到一个错误的请求，说照片字段是必需的，即使我选择了一个文件。

我得到的错误是：

> > {“照片”：[“此字段为必填项。”]}

并且：

> > 在此服务器上未找到请求的 URL /static/media/C:/fakepath/music notes.png。

我的 HTML：

```
<div id="listingModal" class="modal hide fade">
    <form id="listingForm" enctype="multipart/form-data" method="post">
        <div class="modal-header"><button class="close" data-dismiss="modal">×</button>
            <h3>Listing Details</h3>
        </div>
        <div class="modal-body">{{ form }}</div>
        <div class="modal-footer">
            <a class="btn" href="#" data-dismiss="modal">Cancel</a>
            <input class="btn btn-primary" type="submit" value="Save" />
        </div>
   </form>
</div> 
```

保存功能：

```
handleModal: function(event) 
    {
        event.preventDefault();
        event.stopImmediatePropagation();
        var form = $('#listingForm');

        var listingData = 
        {
            title: $(form).find('#id_title').val(),
            description: $(form).find('#id_description').val(),
            //user: $(form).find('#id_user').val(),
            photo: $(form).find('#id_photo').val(),
            trade_completed: $(form).find('#id_trade_completed').val(),
            date_created: $(form).find('#id_date_created').val(),
            date_completed: $(form).find('#id_date_completed').val(),
        };

        if($('#listingModal').data('client_id'))
        {
            listingData.listing_id = $('#listingModal').data('client_id');
            this.listings.updateListing(listingData);
        }
        else
        {
            this.listings.addNew(listingData);
        }
            //hide the modal
        $('#listingModal').modal('hide');

        return this;

    }, 
```

updateListing 函数：

```
updateListing: function(listingData)
    {
        var listing = this.listings.get({id: listingData.listing_id});
        if(_.isObject(listing))
        {
            //iterate through the data, and add it to the model
            for(var key in listingData)
            {
                //dont copy id, already checked
                if(key != 'listing_id')
                {
                    listing.set(key,listingData[key]);
                }
            }
            listing.save();
            //this.listings.sort();
        }
    }, 
```

我读过一些东西说这可能是因为我必须手动上传文件但不确定如何做到这一点。任何帮助将不胜感激。

编辑：这是我的 settings.py 媒体网址和静态网址证明一切设置正确

```
MEDIA_ROOT = '/opt/bitnami/apps/django/django_projects/Project/Project/static/media/'
MEDIA_URL = '/static/media/'
STATIC_ROOT = '/opt/bitnami/apps/django/django_projects/Project/Project/static'
STATIC_URL = '/static/static_files_dir' 
```

此外，模型中的字段特别称为 photo 和 is 和 Imagefield。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T17:31:27.917

不知道你是否找到了解决方案，因为已经有几个月了，但我想我会做出回应，以防其他人偶然发现这个问题。

将文件上传到 REST API 资源 URI 需要特别小心，因为它比简单地使用一些标准（非文件）表单字段执行 HTTP POST 更复杂。然而，HTML5 使它比以前容易得多。

如果你看你的陈述...

```
photo: $(form).find('#id_photo').val(), 
```

那**没有**得到实际的文件。它抓取浏览器的字段字段实现放置在那里的临时字符串。在您的情况下，它是*C:/fakepath/music notes.png*。

您需要获得对控件上实际文件键的引用。有关与 jQuery 一起使用的一些示例代码，请阅读[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

如果您想手动滚动自己的上传功能，请阅读[http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-formdata](http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-formdata)

# php - 检测插件中的帖子类型

> ID：15268589
> 
> 赞同：0
> 
> 时间：2013-03-07T10:22:52.580
> 
> 标签：php, wordpress

我有一个带有以下代码的插件。

我正在尝试检测正在查看的页面是页面还是帖子。根据值，我将选择是否将用户重定向到另一个页面。

但目前我根本没有任何价值。

```
 global $post;
 $da_post_type = get_post_type( $post->ID );

 echo "<!-- The post type is : $da_post_type -->" ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:26:58.577

只需在您要检查的地方添加代码

```
 global $post;

    if(is_page($post->ID))
      {
        ///write code for the pages
      }
    else
      {
        ///write code for the posts
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:23:28.223

我遇到的问题是代码不在挂钩中，而只是在主插件文件中。

所以 word press 确实知道页面 id 是什么。

我用以下代码解决了这个问题：

```
function da_get_post_id()
{ 
  global $post;
  $da_post_type = get_post_type( $post->ID );

  echo "<!-- The post type is : $da_post_type -->" ;
}
add_action('wp','da_get_post_id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:42:13.277

只需使用`is_page($id)`（[Doc](http://codex.wordpress.org/Function_Reference/is_page)）。如果它不是一个页面，它是一个帖子。

# ios - iPhone应用程序中的通知

> ID：15268593
> 
> 赞同：2
> 
> 时间：2013-03-07T10:22:58.327
> 
> 标签：ios, notifications

我已经阅读了许多通知帖子，但不知何故我在某个地方出错了，所以这就是我发布这个问题的原因。我想在我的应用程序中每天早上 9 点收到通知。我在上午 9 点正确收到它，没有任何问题，但困难在于我在凌晨 2 点也收到相同的通知。我尝试使用以下代码。谁能告诉我哪里出错了。还是ios6的问题。任何形式的帮助将不胜感激。谢谢你。

```
 NSString *day =@"9:00 AM";
    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init]autorelease];
    [dateFormat setDateFormat:@"hh:mm a"];
    //NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    //[dateFormat setTimeZone:gmt];
    NSDate *today=[dateFormat dateFromString:day];
    NSLog(@"string %@ & date %@",day,today);
    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil)
    {
        // delObj.QCouter=delObj.QCouter+1;

        //[[UIApplication sharedApplication] cancelAllLocalNotifications];
        notif = [[cls alloc] init];
        notif.fireDate =today;
        notif.timeZone = [NSTimeZone systemTimeZone];
         NSLog(@"timeZone %@ ",[NSTimeZone systemTimeZone]);
        notif.alertBody = @"You have a new letter ";
        notif.alertAction = NSLocalizedString(@"View", nil);;
        notif.soundName = @"Ding3.wav";
        notif.applicationIconBadgeNumber = 1;
        notif.repeatInterval = NSDayCalendarUnit;
        [[NSUserDefaults standardUserDefaults] setObject:@"1" forKey:@"Status"];
        NSDictionary *userDict = [NSDictionary dictionaryWithObject:@"You have a notifiaction"
                                                                       forKey:kRemindMeNotificationDataKey];
        notif.userInfo = userDict;
        // NSLog(@"userInfo %@",notif.userInfo);
        [[UIApplication sharedApplication] scheduleLocalNotification:notif];
        [notif release];
        [[NSUserDefaults standardUserDefaults] setObject:@"CurrentDay" forKey:@"DayChange"];
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:30:03.760

模拟器还是真机？

模拟器有一个已知错误，它会生成单个通知的两次“触发”。如果发生这种情况，请在物理设备上尝试，看看是否会发生相同的行为。这很烦人，但不是您的应用程序的实际问题。（假设它是模拟器，当然！）

看到这个问题：[iOS – UILocalNotification 为同一个通知触发了两次](https://stackoverflow.com/questions/11430669/ios-uilocalnotification-fired-twice-for-same-notification)

基于“不在模拟器中”进行编辑：

在您安排通知后尝试添加对此的调用，并查看您的代码的其他部分是否滑入您不知道的另一个计划项目中：

```
- (void) _debug_logExistingToConsole
{
    if (LOG) NSLog(@"Notifications set is now: \n");
    UIApplication *Ap = [UIApplication sharedApplication];
    NSArray* arr = [Ap scheduledLocalNotifications];
    if (LOG) NSLog(@"%@", arr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:03:58.833

嗨尝试以下代码： -

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications];
    NSDate *date = [NSDate date];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
    NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: date];
    [components setHour: 9];
    [components setMinute: 0];
    [components setSecond: 0];

    NSDate *today = [gregorian dateFromComponents: components];
    [gregorian release];

    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil)
    {
        notif = [[cls alloc] init];
        notif.fireDate =today;
        notif.alertBody = @"You have a new letter ";
        notif.alertAction = NSLocalizedString(@"View", nil);;
        notif.soundName = @"Ding3.wav";
        notif.applicationIconBadgeNumber = 1;
        notif.repeatInterval = NSDayCalendarUnit;
        [[NSUserDefaults standardUserDefaults] setObject:@"1" forKey:@"Status"];
        NSDictionary *userDict = [NSDictionary dictionaryWithObject:@"You have a notifiaction"
                                                                       forKey:kRemindMeNotificationDataKey];
        notif.userInfo = userDict;
        // NSLog(@"userInfo %@",notif.userInfo);
        [[UIApplication sharedApplication] scheduleLocalNotification:notif];
        [notif release];
        [[NSUserDefaults standardUserDefaults] setObject:@"CurrentDay" forKey:@"DayChange"];
       } 
```

# javascript - 遍历嵌套的 json 对象数组

> ID：15268594
> 
> 赞同：17
> 
> 时间：2013-03-07T10:23:00.150
> 
> 标签：javascript, json

我必须遍历 json 数组对象。

它具有以下结构。

```
var myJSONObject = {
    "abc": {
        "prod_1": [
            {"prod_ver" : "prod 1 ver 1"},
            {"prod_ver" : "prod 1 ver 2"},
        ],
        "prod_2": [
            {"prod_ver" : "prod 2 ver 1"},
            {"prod_ver" : "prod 2 ver 2"},
        ],
        "prod_3": [
            {"prod_ver" : "prod 3 ver 1"},
            {"prod_ver" : "prod 3 ver 2"},
        ]
    }
}; 
```

基本上我正在做的是 prod_1 是产品的名称，并且其中填充了 prod_1 具有的版本列表。

所以现在我想要的是产品的名称以及它的版本。

问题是该产品下可能有许多产品和许多版本。**所以我需要一个适当的javascript**循环结构，它可以通用来处理它。

如果循环将产品名称存储在一个 var 中并将其版本存储在另一个 var 中，那将是最好的，因为我需要对产品名称进行一些检查。

如果 json 结构错误或可以编写更好的 json 结构，请建议一个正确/更好的结构。

请**帮忙**

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T10:27:34.327

由于包含产品列表，因此将属性定义为数组`myJSONObject.abc`会更有意义。`abc`像这样：

```
var myJSONObject = 
{
"abc":
    [
        [
            {"prod_ver" : "prod 1 ver 1"},
            {"prod_ver" : "prod 1 ver 2"},
        ],
        [
            {"prod_ver" : "prod 2 ver 1"},
            {"prod_ver" : "prod 2 ver 2"},
        ],
        [
            {"prod_ver" : "prod 3 ver 1"},
            {"prod_ver" : "prod 3 ver 2"},
        ]
    ]
}; 
```

然后，您可以使用正常循环迭代产品及其版本：

```
for(var i = 0; i < myJSONObject.abc.length; i++)
{
    var product = myJSONObject.abc[i];
    for(var j = 0; j < product.length; j++)
    {
        var version = product[j];
    }
} 
```

您可以更进一步，稍微改变 JSON 对象的结构，使其更易于理解。

```
var catalog = 
{
    "products": [
        {
            "name": "prod 1",
            "versions": [
                "ver 1",
                "ver 2"
            ]
        },
        {
            "name": "prod 2",
            "versions": [
                "ver 1",
                "ver 2"
            ]
        }
    ]
};

for(var i = 0; i < catalog.products.length; i++)
{
    var product = catalog.products[i];
    var productName = product.name;
    for(var j = 0; j < product.versions.length; j++)
    {
        var version = product.versions[j];
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T10:25:11.303

`myJSONObject.abc`是一个带有`prod_1`,`prod_2`等键的对象。您可以使用 . 遍历对象的键`for-in`。所以：

```
var productName;
var productVersionArray;

for (productName in myJSONObject.abc) {
    productVersionArray = myJSONObject.abc[productName];
} 
```

请注意，键的顺序不是由规范定义的，并且会因 JavaScript 引擎而异。如果您想按特定顺序执行它们，则必须获取它们的数组，按照您想要的顺序对其进行排序，然后遍历该数组。（在启用 ES5 的环境中，您可以从 中获取对象的键数组`Object.keys(yourObject)`。但对于旧版浏览器，您需要一个 shim。）

在该循环中，您可以使用标准`for`循环遍历数组：

```
for (versionIndex = 0; versionIndex < productVersionArray.length; ++versionIndex) {
    // Use `productVersionArray[versionIndex].prod_ver` here
} 
```

这是一个将所有内容放在一起的示例：

```
(function() {

  var myJSONObject = 
    {
    "abc":
        {
            "prod_1": 
            [
                {"prod_ver" : "prod 1 ver 1"},
                {"prod_ver" : "prod 1 ver 2"}
            ],

            "prod_2": 
            [
                {"prod_ver" : "prod 2 ver 1"},
                {"prod_ver" : "prod 2 ver 2"}
            ],
            "prod_3": 
            [
                {"prod_ver" : "prod 3 ver 1"},
                {"prod_ver" : "prod 3 ver 2"}
            ]
        }
    };

  var productName;
  var productVersionArray;
  var versionIndex;

  for (productName in myJSONObject.abc) {
      productVersionArray = myJSONObject.abc[productName];
      display(productName + " has " + productVersionArray.length + " versions listed");
      for (versionIndex = 0; versionIndex < productVersionArray.length; ++versionIndex) {
        display("* " + productVersionArray[versionIndex].prod_ver);
      }
  }

  function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = String(msg);
    document.body.appendChild(p);
  }

})(); 
```

[实时复制](http://jsbin.com/uyagoc/1)| [资源](http://jsbin.com/uyagoc/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-21T19:11:42.103

用 ES6 更新

```
 var { products } =
    {
        "products": [
            {
                "name": "prod 1",
                "versions": [
                    "ver 1",
                    "ver 2"
                ]
            },
            {
                "name": "prod 2",
                "versions": [
                    "ver 1",
                    "ver 2"
                ]
            },
            {
                "name": "prod 3",
                "versions": [
                    "ver 1",
                    "ver 2"
                ]
            }
        ]
    };

    let inventory = products.reduce((accumulator, currentValue) => {
        let { name, versions } = currentValue;
        accumulator[name] = versions
        return accumulator
    }, []);

    Object.entries(inventory).forEach((prod) => {
        let prodName = prod[0];
        let prodVers = prod[1].join(", ");
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-07T18:30:39.700

```
function z() {
  for (let key in myJSONObject.abc) {
    let value = myJSONObject.abc[key];
    for (let i = 0; i <= value.length; i++) {
      console.log(value[[i]]);
    }
  }
} 
```

# python - pymunk space.remove 方法出错

> ID：15268599
> 
> 赞同：1
> 
> 时间：2013-03-07T10:23:10.807
> 
> 标签：python, pygame, pymunk

我有一个球生成器，它“生成”并将球（圆圈）添加到模拟中。

当球击中 list 中的静态 poly 时，球将被移除`s_boxes`。
这是由碰撞处理程序完成的`ball_wall_collision`。

**错误：**
以下弹出窗口按其名称显示，它弹出
![**弹出窗口**](../Images/21b00fe9347b6071d42e8ff625e45cb4.png)

**我的代码：**
球发生器

```
class BallGenerator:
    def __init__(self, min_y, max_y, x):
        self.min = min_y
        self.max = max_y
        self.x = x

        self.counter = 0

    def bowl(self, balls):
        global ball_bowled
        y = random.randint(self.min, self.max)
        pos = to_pymunk((self.x,y))
        r = 10
        m = 15
        i = pm.moment_for_circle(m, 0, r)
        b = pm.Body(m,i)
        b.position = pos
        f_x = random.randint(-600000,-400000)
        b.apply_force( (f_x,0.0),(0,0) )

        ball = pm.Circle(b, r)
        ball.elasticity = 0.75
        ball.friction = 0.95
        balls.append(ball)
        space.add(ball,b)
        print 'bowled'

        ball_bowled += 1

    def handle(self, balls):
        if self.counter == FPS:
            self.bowl(balls)
            self.counter = 0
        self.counter += 1 
```

碰撞处理程序

```
def ball_wall_collision(space, arb, balls, s_boxes):
    shapes = arb.shapes
    boxes = [box[0] for box in s_boxes] # Get walls
    ball = None
    wall = None
    for ba in balls:
        if ba in shapes:
            ball = ba
            break
    for box in boxes:
        if box in shapes:
            wall = box
            break
    if wall and ball:
        print 'removing'
        space.remove(ball, ball.body) # Where the runtime problem happens
        balls.remove(ball)
        print 'removed'

        return False
    else:
        return True
space.add_collision_handler(0,0,begin=ball_wall_collision,
                            balls=balls,s_boxes=s_boxes) # Other args to function 
```

我在碰撞处理中做错了什么？

*   我在通话中遗漏了什么`space.remove`吗？
*   该功能没有按我的意愿工作吗？或者是其他地方的错误（我认为不是）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:38:38.127

看起来问题是您在模拟步骤期间尝试从碰撞处理程序中的空间中删除对象。

相反，您可以尝试手动将所有球收集到一个列表中，然后在步骤之后调用 remove，或者使用 post step 回调将删除排队，如下所示：

```
space.add_post_step_callback(space.remove, ball)
space.add_post_step_callback(space.remove, ball.body) 
```

（未经测试的代码）

我可能应该尝试在 API 文档中使这一点更加明显。我想知道自动安排删除直到步骤结束是否是一个好主意，或者侵入性较小的选项，在 python 中触发一个断言，这样你就不会得到c++ 错误。

# pdf - 将 pandoc 设置为小于 10pt 的 PDF 字体大小

> ID：15268600
> 
> 赞同：3
> 
> 时间：2013-03-07T10:23:16.467
> 
> 标签：pdf, font-size, pandoc

有谁知道如何将 pandoc 中使用的字体大小更改为小于 10pt 的 pdf？[文档](http://johnmacfarlane.net/pandoc/README.html)似乎暗示 10pt 是最小的，但我认为由于它调用的是 LateX 引擎，因此必须有可能获得更小的字体。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:32:17.080

好的，事实证明这是一个乳胶问题。

Pandoc 到 PDF 使用 Latex 配置文件（请参阅[this](https://stackoverflow.com/questions/14883525/set-double-spacing-and-line-numbers-when-converting-from-markdown-to-pdf-with-pa?rq=1)）。要设置小于 10pt 的字体，您需要指定一个包（[参见这篇文章](https://tex.stackexchange.com/questions/5339/how-to-specify-font-size-less-than-10pt-or-more-than-12pt)）。

# grails - 从过滤器访问流状态名称

> ID：15268603
> 
> 赞同：1
> 
> 时间：2013-03-07T10:23:18.757
> 
> 标签：grails, spring-webflow

我正在处理一个大型 Grails 1.3.7 项目，我想从过滤器访问流状态名称以进行日志记录。我一直在谷歌上搜索，我能找到的最接近的答案是：[Grails WebFlow State Name](https://stackoverflow.com/questions/4763511/grails-webflow-state-name/6920564)，但它只能在流程本身内工作。

有没有办法从流（过滤器）外部获取当前会话中正在执行的流的状态名称？

提前致谢，

吉列尔莫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:16:59.750

经过大量的谷歌搜索和调试后，我设法生成了以下代码。它适用于一个简单的应用程序。当我从假期回来时，我会将它与主应用程序集成，然后我会更新这个问题。

```
package org.glalejos

import org.springframework.context.ApplicationContext
import org.springframework.webflow.context.ExternalContext
import org.springframework.webflow.context.ExternalContextHolder
import org.springframework.webflow.context.servlet.ServletExternalContext
import org.springframework.webflow.execution.FlowExecution
import org.springframework.webflow.execution.FlowExecutionKey
import org.springframework.webflow.execution.repository.FlowExecutionRepository

class LoggingFilters {

    def grailsApplication

    String getFlowStateName(def grailsApplication, def servletContext, def request, def response) {
        String stateName

        if (grailsApplication && servletContext && request && request.queryString && response) {
            try {
                String strKey = null
                String[] keys = request.queryString.split("&")
                keys.each{ if (it.startsWith("execution=")) strKey = it.substring(10)}

                if (strKey != null) {
                    ApplicationContext ctx = grailsApplication.mainContext
                    FlowExecutionRepository fer = ctx.getBean("flowExecutionRepository")

                    FlowExecutionKey fek = fer.parseFlowExecutionKey(strKey)

                    ExternalContext previousContext = ExternalContextHolder.getExternalContext()

                    try {
                        // You have to set an external context before invoking "fer.getFlowExecution()" or it'll throw a NPE 
                        ExternalContextHolder.setExternalContext(new ServletExternalContext(servletContext, request, response));
                        FlowExecution fe = fer.getFlowExecution(fek)

                        stateName = fe.getActiveSession().getState().getId()
                    } finally {
                        ExternalContextHolder.setExternalContext(previousContext);
                    }
                } else {
                    stateName = null
                }
            } catch(Exception e) {
                stateName = null
            }
        } else {
            stateName = null
        }

        return stateName
    }

    def filters = {
        logData(controller:"*", action:"*") {
            before = {
                println("Incoming request. Current flow state name is: ${getFlowStateName(grailsApplication, servletContext, request, response)}")
            }

            after = {
                println("Dispatched request. Current flow state name is: ${getFlowStateName(grailsApplication, servletContext, request, response)}")
            }
        }
    }
} 
```

**编辑**：上面的代码可以确定给定时间点的当前流状态的名称，但随着流执行的发展，它不会更新日志框架的映射诊断上下文。为此，有必要实现 a`org.springframework.webflow.execution.FlowExecutionListener`并将其注册在`conf/spring/resources.groovy`：

```
beans = {
    myLoggingFlowExecutionListener(org.example.MyLoggingFlowExecutionListener)
} 
```

您必须在 bean 中注册此侦听器 bean 和`hibernateConversationListener`bean `executionListenerLoader`，但是，出于某种原因，Spring DSL 在这种情况下不起作用（请参阅下面的 EDIT2）。因此，`resources.xml`您可以将其放置在同一文件夹中`resources.groovy`，以便正确声明您的资源：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

  <bean id="executionListenerLoader" class="org.springframework.webflow.execution.factory.StaticFlowExecutionListenerLoader">
    <constructor-arg>
      <list>
        <ref bean="hibernateConversationListener" />
        <ref bean="myLoggingFlowExecutionListener" />
      </list>
    </constructor-arg> 
  </bean>
</beans> 
```

每个`FlowExecutionListener`方法都接收到许多可用于记录目的的上下文信息（为了清楚起见，我省略了此类的实现）。

**EDIT2**：在流的生命周期中操作域对象时，未能将`hibernateConversationListener`bean 添加到`executionListenerLoader`Hibernate 异常的结果中。但是，Spring DSL 在这种特定情况下不起作用，因此我必须使用 XML 格式声明所需的 bean。请参阅[http://grails.1312388.n4.nabble.com/Registering-custom-flow-execution-listener-td2279764.html](http://grails.1312388.n4.nabble.com/Registering-custom-flow-execution-listener-td2279764.html)。我已将上面的代码更新为最终的工作版本。

# html - HTML5 曲目标题未显示

> ID：15268604
> 
> 赞同：11
> 
> 时间：2013-03-07T10:23:19.527
> 
> 标签：html, html5-video, closed-captions

我正在尝试制作世界上最简单的 html5 视频播放器：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>ST Media Player</title>
    </head>
    <body>
        <video id="player" src="http://video-js.zencoder.com/oceans-clip.mp4" controls>
            <track kind="captions" src="_tracks/test.vtt" default>
        </video>
    </body>
</html> 
```

完毕！

现在为什么播放器识别出有字幕，但没有显示出来？我现在尝试了不同的视频和字幕文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T10:35:16.657

当您的内容在 Web 服务器上提供时，跟踪标签正在工作。另外不要忘记添加将 mime 类型设置为 vtt 文件的配置。这是我在 IIS 上工作的示例：

```
<video>
   <source src="video.mp4" type="video/mp4" />
   <track src="video.en.vtt" kind="subtitles" 
         label="English Subtitles" srclang="en" />
</video> 
```

对于 IIS Web.Config 文件：

```
<configuration>
    <system.webServer>
      <staticContent>
        <remove fileExtension=".vtt" />
        <mimeMap fileExtension=".vtt" mimeType="text/vtt" />
      </staticContent>
    </system.webServer>
</configuration> 
```

对于 Tomcat 服务器 WEB-INF/web.xml 文件：

```
<web-app>
  <mime-mapping>
    <extension>vtt</extension>
    <mime-type>text/vtt</mime-type>
  </mime-mapping>
</web-app> 
```

对于 Apache 服务器，将**.htaccess**文件添加到您的 Web 目录，并写入该行以添加字幕 mime 类型：

```
AddType text/vtt .vtt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-13T17:52:10.927

您需要将`mode`对象设置`textTracks`为“显示”：

```
var video = document.querySelector('YOUR_VIDEO_SELECTOR');

video.addEventListener('load', function() {
    var tracks = video.textTracks[0];
    tracks.mode = 'showing';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-08T00:44:11.813

确保您的文件保存为 UTF-8 以确保特殊字符能够正确显示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-17T20:31:13.420

Canavar 有正确的答案，但对我有用的一件事就是将 .vtt 文件更改为 .txt 文件，然后您不必担心文件服务器配置。它在 Chrome 中处理隐藏式字幕对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-10T19:28:21.887

我对此没有答案，但得出的结论是这是服务器设置问题。使用 IE 作为客户端查看时，IE 上的字幕在 IIS 上工作正常，但在 Nginx 服务器上却不行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-17T18:26:02.297

vtt 文件和视频文件的源必须位于服务器内的同一文件夹中。

因此，链接必须具有相同的路径。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-18T09:35:25.177

好吧，如果您使用的是 chrome，很可能您需要从终端启动它，然后键入 --disable-web-security, for linux, ... 更多内容请参阅[禁用 Chrome 中的同源策略](https://stackoverflow.com/questions/3102819/disable-same-origin-policy-in-chrome)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-03T18:22:24.167

尝试

```
<video id="player" controls>
  <source src="http://video-js.zencoder.com/oceans-clip.mp4">
  <track kind="captions" src="_tracks/test.vtt" default>
</video> 
```

如果源标签不存在，大多数浏览器会忽略视频标签内的其余内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-11T13:09:11.943

我遇到了同样的问题。我没有使用任何服务器，而是将应用程序托管在 AWS 上。事实证明，您将不得不更改 AWS 中的配置。转到您在 AWS 上的目录中的字幕文件。右键单击然后选择属性，然后定义一个名为“type/vtt”的元数据。这应该可以解决问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-20T10:15:40.003

继续@canavar 的第一个回答，可以直接在 IIS 中添加 mimetype。请参阅所附图片。

[![在此处输入图像描述](../Images/019efaae32fa27052e923846aa9692e8.png)](https://i.stack.imgur.com/HKnyv.jpg)

[![在此处输入图像描述](../Images/b41c0245ac6e9e19c6ee0d00567c1541.png)](https://i.stack.imgur.com/MnLex.jpg)

# java - 差异。b/w 2 获取连接管理器实例的方法

> ID：15268605
> 
> 赞同：1
> 
> 时间：2013-03-07T10:23:21.523
> 
> 标签：java, android

这两种说法有什么区别：-

1)

```
ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemServic(context.CONNECTIVITY_SERVICE); 
```

2)

```
Class  connectivityClass = Class.forName(connectivityManager.getClass().getName()); 
```

因为，我可以解释两者都给了我 ConnectivityManager 类的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:35:04.470

在第二种方法中，您使用反射来创建 ConnectivityManager 类的对象，该对象具有性能开销。因此，如果可以，特别建议避免反射，因为从第一种方法开始，您可以在没有反射的情况下创建 ConnectivityManager 的对象。

由于安全性，某些 JVM 甚至可能不允许您通过反射创建对象。此外，使用通过反射创建的对象也会使您的生活更加困难

有关反射的更多详细信息，请查看： [http ://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

# database - 数据库设计：每个实体类型的一组表或所有实体类型的通用集

> ID：15268608
> 
> 赞同：1
> 
> 时间：2013-03-07T10:23:25.440
> 
> 标签：database, entity

我公司每年都会组织美食节。节日期间举办了许多活动。我的任务是使用 CMS（内容管理系统）设计节日网站。

有 3 种主要类型的实体 - 事件、机构、人员。一个活动有许多参与机构（赞助商、餐厅、酒店）和人员（厨师、酒厂代表、调酒师）。

每个实体可以有许多类别、许多文档、照片库并链接到其他类型的实体。哪个更好 - 案例 1 或案例 2（见下文）？

**[案例 1]** - 每种实体类型的一组表：

事件表：event、eventCategory、eventDocument、eventGallery、event_establishment、event_person

建立表：建立，建立类别，建立画廊，建立_人

人员表：person、personCategory、personDocument、personGallery

personDocument 表的示例列：docId、docFilename

请注意，对于 eventDocument 和establishDocument，上述列将完全相同。

**[CASE 2]** - 每个实体类型的表、类型表和一组通用表：

表：事件、机构、人员、实体类型、实体类别、实体文档、实体画廊、实体实体

entityDocument 的示例列：docId、entityTypeId、docFilename

感谢任何建议 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:33:29.713

这只是我的意见，但我已经这样做了一段时间。

**根据我的经验，案例 1**是迄今为止最容易维护和最推荐的。您可以管理您的实体，并且根据您用于编写网站的语言，您可以谈论一些 ORM 框架的优势，这些框架将使您的生活再次变得更加轻松。

**案例 2**，在 SQL 数据库中执行此操作会导致很多问题。你最终会编写很多不必要的代码来尝试检测类型，确保你正在做正确的连接。这将是一场噩梦！我真的想不出这样做有什么好处。

您可能有 No-SQL 数据存储的**案例 3**。像 MongoDB 或 RavenDB。无需担心结构。你输入的就是你输出的，没有任何翻译。（至少使用 RavenDB）。No-SQLData Stores 对于大型应用程序来说要快得多，但它们确实需要一段时间才能让您正确使用它们。

我建议你去**案例1**

# php - 使用 PHP 脚本备份 ACCESS 数据库

> ID：15268611
> 
> 赞同：0
> 
> 时间：2013-03-07T10:23:40.010
> 
> 标签：php, ms-access, database-backups

是否可以备份一个`access database`？我已经研究了如何通过 php 备份访问数据库，但我无法得到一个好的答案。大部分出来的结果都是关于备份的`MySQL database`。任何人都可以帮助我:) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:41:09.027

**re：实际执行备份**

备份本机 Access 数据库只需复制整个数据库文件（Access_2003 及更早版本为 .mdb，Access_2007 及更高版本为 .accdb）。您*可以*为此使用 PHP，但任何脚本语言都可以使用，即使是执行类似操作的简单 Windows 批处理文件

```
copy /Y d:\apps\databases\mydatabase.accdb z:\backups\databases\*.* 
```

如果您真的开始使用 PHP，那么您最终可能会使用[copy()](http://www.php.net/manual/en/function.copy.php)函数。

**re: 自动调度备份**

Windows 中的任务计划程序可以为您解决这个问题。创建脚本来复制数据库文件后，您可以创建计划任务来定期运行它。有关详细信息，请参阅 MSDN 文章[使用任务计划程序 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384006%28v=vs.85%29.aspx)。

# visual-studio-2010 - 致命错误 lnk1104：无法打开 LNKn.tmp

> ID：15268612
> 
> 赞同：4
> 
> 时间：2013-03-07T10:23:40.260
> 
> 标签：visual-studio-2010, linker-errors, bamboo

当我尝试使用 Bamboo 的 Visual-Studio 任务构建我的 MSVC2010 项目时，我收到以下错误：

```
LINK : fatal error LNK1181: File "C:\Windows\system32\config\systemprofile\AppData\Local\Temp\lnk7A64.tmp" could not be opened. 
```

[msdn](http://msdn.microsoft.com/en-us/library/ts7eyw4s(v=vs.71).aspx)不得不这样说：

> 如果给定的文件名为 LNKn，这是链接器为临时文件生成的文件名，则 TMP 环境变量中指定的目录可能不存在，或者为 TMP 环境变量指定了多个目录。（只应为 TMP 环境变量指定一个目录路径。）

所以我检查了我的 TMP 变量，它只有一个目录，确实存在。实际上甚至生成了一个文件，只是不正确。例如，我开始构建，创建了 lnk7A64.tmp，但链接器查找 lnk7A64.tmp

我只收到 Bamboo 的这个错误。它适用于 Visual Studio。
关于为什么会发生这种情况以及如何解决它的任何想法？

* * *

**更新：**

我开始认为这可能是因为 Bamboo 找不到创建正确文件所需的可执行文件（可能是资源编译器）。我以前[在这里](https://stackoverflow.com/questions/15244325/system-cant-find-paths-when-building-sln-with-bamboo)描述过。我以为我可以解决这个问题，但似乎它也导致了这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T15:01:19.743

I had the same issue (which brought me to your question!). I figured out that by default, the bamboo agent service runs as "SYSTEM" and this did not jive with my build. Follow this guide from Atlassian to change the user that your bamboo agent runs as. I did this and it works now. [https://confluence.atlassian.com/display/BAMBOO/Running+Bamboo+service+on+Windows+as+the+local+user](https://confluence.atlassian.com/display/BAMBOO/Running+Bamboo+service+on+Windows+as+the+local+user)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T22:11:49.813

我遇到了一个非常相似的问题：

```
C:\WINDOWS\system32\config\systemprofile\AppData\Local\Temp\lnk{A20CED18-5FC6-4AB0-84C2-B922E8CD543B}.tmp(1): error RC2135: file not found: C:\WINDOWS\system32\config\systemprofile\AppData\Local\Temp\lnk{E2128AA4-9E0E-48D0-814E-22F9FDD938F9}.tmp [C:\bamboo_home\xml-data\build-dir\Sources\VS2017\Core\Core.vcxproj] 
```

原来构建服务器使用的是 x86 版本的 MSBuild

```
C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\MSBuild\15.0\Bin\MSBuild.exe 
```

而不是 x64 版本

```
C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\MSBuild\15.0\Bin\amd64\MSBuild.exe 
```

啊!

# visual-studio-2010 - Wix 和 Visual Studio 安装程序之间的区别

> ID：15268613
> 
> 赞同：13
> 
> 时间：2013-03-07T10:23:43.003
> 
> 标签：visual-studio-2010, visual-studio, installation, wix

我正在使用 WPF 开发 Visual Studio 应用程序，但现在是我必须选择安装程序的时刻。

我需要我的项目能够在 GAC 和注册表上进行编写，但我不确定是否应该使用 Visual Studio 安装程序或 Wix...我在 Google 上找不到确切说明两者之间差异的信息他们。

我发现 Wix 更完整，但我找不到任何文章说明两者之间的真正区别......

谁能帮我找到更具体的信息或在两者之间进行选择？

编辑：对不起，我指定：

我正在使用 Visual Studio 2010 专业版。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T11:25:14.163

最终产品是相同的，Windows 安装程序 msi。

只是你到达那里的方式不同。据我所知，使用旧的 vdproj 除了设置要复制的文件和注册表项外，别无其他。如果您是 .net 开发人员，那么您必须在 C++ 或 VBS 中创建自定义操作，这不是一项特别容易的任务。

然而，随着 Wix 的出现，有更多的内置自定义操作使您能够创建丰富的安装体验，如果您需要创建自己的自定义操作，您可以使用 .net。此外，创建一个引导程序要容易得多，它可以安装依赖项以及您的 msi 以及能够在 WPF 中创建前端。

正如@nvoigt 所说，旧的 vdproj 类型在 VS2012 中不受支持，并且如果不进行一些讨厌的设置（您必须安装 VS），它也无法由构建服务器构建。

总而言之，真的不应该使用什么，Wix 是前进的方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T14:06:19.983

Caveman_Dick 写道：

> “其他任何事情，您都必须创建自定义操作”。

简而言之，这就是区别。Visual Studio 部署项目将您从底层的 Windows 安装程序中大量抽象出来，并密封了它的大量功能。这与 Windows Installer 的设计背道而驰，Windows Installer 应该是一种声明性的、事务性的编程模型。

以安装 Windows 服务为例？Windows 安装程序具有 ServiceInstall 表。VDPROJ 未能公开这一点，因此您无需编写脆弱的自定义操作，从而导致安装程序不那么优雅和不那么健壮。

另一方面，WiX 是一个非常薄的抽象。这完全是关于表示底层 Windows Installer 表数据的 XML XSD 元素和属性。构建过程只是将 XML 转换为 SQL 表。如果 MSI 可以做到，那么 WiX 可以 (99%) 做到。

VDPROJ 是一个可怕的错误，微软终于承认并杀死了它。现在 WiX 没有 UI 设计器（不过我在 CodePlex 上写过一个），所以您可能还想考虑 InstallShield Limited Edition (FREE)。

结合使用 ISLE 和 WiX，我可以两全其美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:33:26.260

由于当前版本的 Visual Studio 不再附带安装项目，您可能希望使用 Wix。否则，一旦切换到 Visual Studio 的当前版本，就必须重新编写它。

# php - 简单的 PHP 日历

> ID：15268614
> 
> 赞同：0
> 
> 时间：2013-03-07T10:23:50.037
> 
> 标签：php, html

我想制作简单的 PHP 日历。例如：[blog.tiger.com.pl/wp-content/uploads/2012/03/gcalendar.png](http://blog.tiger.com.pl/wp-content/uploads/2012/03/gcalendar.png) 但仅限一天，对于这个例子：6/26。

我有：

```
$hours = range(1, 24); 
```

和：

用 html 表显示这个时间：

```
<table>
<?php foreach($hours as $hour){ ?>
  <tr><td><?php echo $hour ?> </td></tr> 
<?php } ?>
</table> 
```

我有：

```
$reservations = array(array('name' => 'first reservation for user Paul', 'from' => 6, 'to' => 8),
                     array('name' => 'second reservation for my group', 'from' => 11, 'to' => 14)  ); 
```

但我不知道如何添加`$reservations`到我的 foreach 中`$hours`。如果是预订，我希望在 6 到 8 小时和 11 到 14 小时以及 6 到 8 小时之间显示索引名称中的文本，以及 11 到 14 小时之间显示索引名称中的文本的红色背景。最好的方法是对该文本使用行跨度，但是如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:37:48.950

我会尝试设置一系列“忙碌时间”，如下所示：

（编辑以包含文本）

```
<?php 
$busyhours = array;
foreach ( $reservations as $reservation ) {
    $hours = $reservation['to'] - $reservation['from'];
    while ($hours) {
        $busyhours[] = $reservation['to'] + $hours;
        $hours--;
    }
    $busyhours[$reservation['to']] = $reservation['name']; //made the busy hour the key.
}
?>

<table>
    <?php foreach($hours as $hour){ ?>
        <tr><!-- changed in_array() to array_key_exists b/c of above change -->
            <td <?php if ( array_key_exists($hour, $busyhours) ) { echo "class='red-bg'"; } ?> >
                <?php 
                    echo $hour; 
                    echo "<p>" . $busyhours[$hour] . "</p>";
                ?> 
            </td>
        </tr> 
    <?php } ?>
</table> 
```

# jquery - IE8 在 Knockout 中给出 jquery 问题 - 找不到样式

> ID：15268617
> 
> 赞同：0
> 
> 时间：2013-03-07T10:23:59.530
> 
> 标签：jquery, internet-explorer, knockout.js

再会

我在我的网页上使用淘汰赛。现在我有一个删除/暂停卡片功能，用户可以删除一个条目，然后弹出一个敲除弹出窗口并要求用户确认删除他的条目/卡片。

问题在于 IE8，当单击“删除”时，弹出窗口显示，但位置不正确，IE 给出调试错误：这是错误的详细信息：

```
self.options.theme.style.apply(self); (line in code with the issue)

SCRIPT1010: Expected identifier 
default.js, line 3 character 16
LOG: test4 
LOG: 68 
SCRIPT5007: Unable to get value of the property 'style': object is null or undefined 
jquery.noty.js, line 88 character 4
SCRIPT5007: Unable to get value of the property 'style': object is null or undefined 
jquery.noty.js, line 88 character 4 
```

我该如何补救？

这是我网页上的淘汰赛代码：

```
<script type="text/javascript">
        var w = $('#cardsAdded table').innerWidth();
        $('#totalCost').css('width', w);

        function DisplayConfirmNoty(message, buttons) {
            var n = noty({
                text: message,
                type: 'confirm',
                dismissQueue: true,
                layout: 'center',
                theme: 'default',
                buttons: buttons
            });
        }

        var vm = {
            Data: ko.observable(),
            BankAccount: ko.observable(),

            //bankactive: ko.observable(false),

            Suspend: function (card) {
                console.log(card.CardId());

                var d = {
                    cardId: card.CardId()
                }

                DisplayConfirmNoty("Please note this action is irreversible trough Card Vault and you will have to contact card vendors personally to reactivate suspended cards", [
                    {
                        addClass: 'btn btn-primary', text: 'Cancel', onClick: function ($noty) {
                            $noty.close();
                        }
                    },
                    {
                        addClass: 'btn btn-danger', text: 'Suspend', onClick: function ($noty) {
                            var options =
                        {
                            url: "SuspendCards.aspx/SuspendCard",
                            type: "POST",
                            contentType: "application/json",
                            data: JSON.stringify(d),

                            success: function (response) {
                                window.location = "ConfirmedSuspension.aspx";
                            }
                        }

                            $.ajax(options);
                            $noty.close();
                        }
                    }
                ]);

            },

            SuspendAll: function () {

                DisplayConfirmNoty("Please note this action is irreversible trough Card Vault and you will have to contact card vendors personally to reactivate suspended cards", [

                    {
                        addClass: 'btn btn-primary', text: 'Cancel', onClick: function ($noty) {
                            $noty.close();
                        }
                    },
                    {
                    addClass: 'btn btn-danger', text: 'Suspend All', onClick: function ($noty) {
                        var options =
               {
                   url: "MyAccount.aspx/SuspendAllCards",
                   type: "POST",
                   contentType: "application/json",

                   success: function (response) {
                       window.location = "ConfirmedSuspension.aspx";
                   }
               }

                        $.ajax(options);
                        $noty.close();
                    }
                },

                ]);

            },

            Remove: function (card) {
                console.log(card.CardId());

                var d = {
                    cardId: card.CardId()
                }

                DisplayConfirmNoty("Are you sure you want to remove this card?", [
                    {
                        addClass: 'btn btn-primary', text: 'Cancel', onClick: function ($noty) {
                            $noty.close();
                        }
                    },
                    {
                    addClass: 'btn btn-danger', text: 'Remove', onClick: function ($noty) {

                       var options =
                       {
                           url: "MyAccount.aspx/DeleteCard",
                           type: "POST",
                           contentType: "application/json",
                           data: JSON.stringify(d),

                           success: function (response) {
                               window.location = window.location;
                           }
                       }

                       $.ajax(options);
                       $noty.close();
                   }
               }
                ]);

            }

        }

        var cardsBound = false;
            var accountBound = false;

        $(document).ready(function () {
            LoadAccount();
            LoadCards();
           // $("#")
        });

        function LoadCards() {
            var options =
            {
                url: "MyAccount.aspx/GetCardTypes",
                type: "POST",
                contentType: "application/json",

                success: function (response) {

                    vm.Data(ko.utils.unwrapObservable(ko.mapping.fromJS(response.d)));

                    if (!cardsBound)
                            ko.applyBindings(vm, document.getElementById("cardsAdded"));
                    cardsBound = true;
                }
            }
            $.ajax(options);
        }

        function LoadAccount() {
            var options =
            {
                url: "MyAccount.aspx/GetAccount",
                type: "POST",
                contentType: "application/json",

                success: function (response) {

                    vm.BankAccount(ko.utils.unwrapObservable(ko.mapping.fromJS(response.d)));

                    if (!accountBound)
                        ko.applyBindings(vm, document.getElementById("vmBankAccount"));
                    accountBound = true;

                    console.log(vm.BankAccount()[0].AccountName());
                    //if (vm.BankAccount.length > 0)
                    //    vm.bankactive(true);
                }
            }
            $.ajax(options);
        }

    </script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:31:33.060

尝试这个：

```
options.theme.style 
```

以下是一些可以帮助您的网址：

1.  [https://github.com/needim/noty/pull/](https://github.com/needim/noty/pull/)
2.  [https://github.com/needim/noty/pull/61](https://github.com/needim/noty/pull/61)

# php - modx重定向无限循环

> ID：15268621
> 
> 赞同：0
> 
> 时间：2013-03-07T10:24:10.750
> 
> 标签：php, modx, modx-revolution

我正在使用 Modx 革命最新版本。我想创建一个插件，它将检查当前页面的 url。在某些情况下，当当前 url 匹配给定模式时，我想重定向到新 url。

我的第一个查询是：如果我去**www.mydomain.com/wrong-uri**并且 wrong-uri 不存在，它会去**www.mydomain.com**。在这种情况下，如果我当前的 url 是**www.mydomain.com/wrong-uri**那么资源ID是什么？？？

我的第二个查询是：我已经这样做了：

```
if ($modx->event->name == 'OnWebPagePrerender'){
$id = $modx->resource->get('id');
$curUrl = $modx->runSnippet('getCurrentPage',array('id' =>$id)); 
$output = &$modx->resource->_output;
$redUrl ="http://".$_SERVER['HTTP_HOST'].'/custom/';             
if(($curUrl !=$redUrl)&&  $curUrl == ("http://".$_SERVER['HTTP_HOST']."/")){

$modx->sendRedirect($redUrl);               
}
return ;
} 
```

浏览器说这是无限重定向循环。为什么？

这个插件被多次调用了吗？？那么这个插件的合适事件是什么？提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:04:00.717

是的，我一整天都明白了....！！！对于 www.mydomain.com/wrong-uri，我的 $curUrl 是 www.mydomain.com/。所以总是如果变得真实并且我处于无限循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:53:43.087

如果我去**www.mydomain.com/wrong-uri**并且 wrong-uri 不存在，它会转到系统设置中指定 id 的页面`error_page`。也许[http://rtfm.modx.com/display/revolution20/Plugins#Plugins-PageNotFoundRedirector%3A](http://rtfm.modx.com/display/revolution20/Plugins#Plugins-PageNotFoundRedirector%3A)会有所帮助。

# zend-framework - Zend_Db 魔术方法特定单元格选择

> ID：15268622
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:24:13.390
> 
> 标签：zend-framework, relationship, zend-db-select

目前，我正在进行一些与模型相关的改进，并研究我编写的特定查询。

```
$queryGetPages = $this->fetchAll($this->select()
                        ->where('page_active = ?', (int) $active)
                        ->order('page_rank ASC'));

if($queryGetPages) {
     $queryGetPages = $queryGetPages->toArray();

     foreach($queryGetPages as $key => $value) {
         $queryGetPagePrint = $this->find($value['pageid'])
         ->current()
         ->findModule_Model_ModulePagesPrintsViaModule_Model_ModulePagesFuses(
                                                            $this->select()
                                                            ->from('module_pages_prints', array('print_title'))                             
                                                            ->where('fuse_locale = ?', $this->_toolbox['editor']['translation']) )
    }                                                       
} 
```

问题出在从相关表请求数据的魔术方法中。我只需要每行的“标题”单元格，但由于某种原因它不会让我这样做。即使使用此查询，它也会返回该行中的所有单元格。我做错了什么，但不知道是什么！

如果有人能指出我正确的方向，我将非常感激。

此致 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:02:03.263

在您的情况下隐式调用的函数是`findManyToManyRowset()`（Zend/Db/Table/Row/Abstract.php 中的代码，第 1001-1108 行（从 ZF 1.12.1 开始）。看看第 1070-1072 行：

```
$select->from(array('i' => $interName), array(), $interSchema)
    ->joinInner(array('m' => $matchName), $joinCond, Zend_Db_Select::SQL_WILDCARD, $matchSchema)
    ->setIntegrityCheck(false); 
```

简而言之：被调用的函数将覆盖您的`from()`调用并从依赖表 ( `module_pages_fuses`) 中选择所有行。这就是它的设计工作方式。

相反，我建议您以“愚蠢”的方式编写您实际需要的查询，例如

```
$queryGetPagePrint = $this->select()
    ->from(array('p' => 'module_pages_prints'), array('print_title'))
    ->join(array('f' => 'module_pages_fuses'),'p.pageid = f.pageid',array())
    ->where('f.fuse_locale = ?', $this->_toolbox['editor']['translation'])
    ->where('p.pageid = ?', $value['pageid']); 
```

# zend-framework - 在 OSX 上配置 Zend Server CE

> ID：15268623
> 
> 赞同：1
> 
> 时间：2013-03-07T10:24:13.660
> 
> 标签：zend-framework, terminal

我已经在运行 OSX 的计算机上安装了 Zend Server CE，但是当我需要配置时，我的文件不会显示在终端中。当我打开终端并输入`sudo nano /usr/local/zend/bin/zendct1.sh`nano 文本编辑器打开，我应该能够编辑各种字段，但没有显示，当我尝试退出 nano 编辑器时，没有任何反应。终端接受我的输入，但似乎没有处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T17:45:30.517

认为命令应该结束 'zendctl.sh' 而不是 'zendct1.sh' 那是点之前的字母而不是数字

# drupal - 无法登录，似乎是服务器端的 cookie 相关问题

> ID：15268626
> 
> 赞同：1
> 
> 时间：2013-03-07T10:24:27.483
> 
> 标签：drupal, nginx, php

这是通过 drush 全新安装的 Drupal 7。

使用firebug，我可以看到cookie在我尝试登录后被发送回响应头。页面被重定向到主页（/节点）。会话记录也保存在会话表中。没有错误。服务器错误日志上也没有错误。

同一台服务器正在托管具有登录功能的其他站点。相同的浏览器可以毫无问题地登录其他站点。以 Wordpress 为例。Cookie 肯定是启用的。

服务器运行 Nginx, PHP-fpm

附件是我网站的 nginx 设置。我不确定它是否与干净的网址有关。从浏览器中，我确实看到了干净的 url。我可以进入 /user、/user/register、/user/password 页面。

```
server
{
  listen       80;
  server_name  www.testd720.com;
  index        index.php index.html index.htm;
  root         /opt/www/drushtest/web1;
  #error_page 404 = @drupal;

  #location / {
  #          # This is cool because no php is touched for static content
  #          try_files $uri $uri/ @rewrite;
  #          expires max;
  #}

  #location @drupal {
  #   rewrite ^(.*)$ /index.php?q=$1 last;
  #}

  location / {
      if (!-e $request_filename) {
          rewrite  ^/(.*)$   /index.php?q=$1  last;
          break;
      }
  }

  location ~ .*\.(php|php5)?$
  {
    #fastcgi_pass unix:/tmp/php-cgi.sock;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    include       fastcgi.conf;
  }
  access_log logs/testd720.log main;
} 
```

标题：

```
Cache-Control   no-cache, must-revalidate, post-check=0, pre-check=0
Connection  keep-alive
Content-Language    en
Content-Type    text/html; charset=utf-8
Date    Thu, 07 Mar 2013 09:47:37 GMT
Etag    "1362649657"
Expires Sun, 19 Nov 1978 05:00:00 GMT
Last-Modified   Thu, 07 Mar 2013 09:47:37 +0000
Location    http://www.testd720.com/node
Server  nginx/1.2.0
Set-Cookie  SESS26bc541d314e909277ae077251e81e7a=qu7a2apzFE9ALHnLWc04N-t_JoHhh2UCR2MkmKROVG0; expires=Sat, 30-Mar-2013 13:20:57 GMT; path=/tmp; domain=.testd720.com; HttpOnly
Transfer-Encoding   chunked
X-Powered-By    PHP/5.4.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:51:44.527

问题出在cookie路径设置上：

```
Set-Cookie  SESS26bc541d314e909277ae077251e81e7a=qu7a2apzFE9ALHnLWc04N-t_JoHhh2UCR2MkmKROVG0;
   expires=Sat, 30-Mar-2013 13:20:57 GMT;
   path=/tmp;
   domain=.example.com;
   HttpOnly 
```

您在此处向浏览器指定此 cookie 仅应用于以 /tmp 开头的站点上的**url 。**

您肯定会将 cookie 路径参数（即用于限制应用此 cookie 的网站上的 pth 的路径）与您服务器上的*cookie 存储路径*错误 - 实际上不存在，cookie 不存储在服务器上 - - （在 php 中，如果您的会话是通过 web 服务器上的文件管理的，这是由 session.save_path 设置管理的，这是默认配置，会话存储在服务器上，它们的名称是 cookie 名称）。

# linux - linux Apache Web Server 的限制以及它与 Processor 和 Ram 的关系

> ID：15268627
> 
> 赞同：0
> 
> 时间：2013-03-07T10:24:27.417
> 
> 标签：linux, apache2

如何计算 Linux Apache Web 服务器的最大容量，即）并行处理最大请求。

或者

要并行执行“N”个请求，需要什么配置？

我需要优化我的 Web 服务器，以便它需要并行响应 1500 个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:27:53.600

这个问题不是那么容易回答的。这取决于您的 RAM 大小、您的连接、CPU、每个请求消耗的内存量、服务器端脚本（php/ruby 等）消耗的内存量以及 apache 模式（mpm_worker、prefork、itk 等）并且脚本执行（cgi、mod_php、fcgi、suphp 等）在其中运行。它还取决于每个模块的配置，至少部分是这样。最后但同样重要的是，如果使用得当，像 varnish 这样的缓存系统可以承担 90% 或更多的负载。

基本上尝试从另一个（或 2、3、4 个）Web 服务器运行测试，看看您的系统是否会在可接受的时间内提供这些页面。

# solr - solr 数据导入处理程序无法索引数据

> ID：15268629
> 
> 赞同：1
> 
> 时间：2013-03-07T10:24:35.127
> 
> 标签：solr

数据config.xml如下

```
<dataConfig>  
<dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/solrdata" user="root" password="root"  />  
    <document name="cars">  

        <entity name="car" query="SELECT color FROM solrdata.car ">  

          <field column="color" name="color" />  

        </entity>  

    </document>  
</dataConfig> 
```

schema.xml 如下所示

```
field name="color" type="string"  indexed="true" stored="true" /> 
```

我在调试模式下检查了它正在获取数据但无法处理它

调试模式的输出如下：

```
{
  "responseHeader": {
    "status": 0,
    "QTime": 312
  },
  "initArgs": [
    "defaults",
    [
      "config",
      "data-config.xml"
    ]
  ],
  "command": "full-import",
  "mode": "debug",
  "documents": [
    {
      "COLOR": [
        "red"
      ]
    },
    {
      "COLOR": [
        "silver"
      ]
    },
    {
      "COLOR": [
        "oii"
      ]
    }
  ],
  "verbose-output": [],
  "status": "idle",
  "importResponse": "",
  "statusMessages": {
    "Total Requests made to DataSource": "1",
    "Total Rows Fetched": "3",
    "Total Documents Skipped": "0",
    "Full Dump Started": "2013-03-07 15:49:14",
    "Total Documents Processed": "0",
    "Total Documents Failed": "3",
    "Time taken": "0:0:0.281"
  },
  "WARNING": "This response format is experimental.  It is likely to change in the future."
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:53:18.397

每个文档都有一个**uniqueKey**来唯一标识它（可以认为类似于数据库中的**PrimaryKey**）。

修改 data-config.xml 中的实体，如下所示：

```
<entity name="car" query="SELECT color,id FROM solrdata.car ">  

  <field column="id" name="id" />  
  <field column="color" name="color" />  

</entity> 
```

**注意：**字段 id 是您的表 car**的主键。**

在您的 schema.xml 文件中，添加以下行，

```
<field name="id" type="string" indexed="true" stored="true" required="true" /> 
```

另外，请确保以下文本，

```
<uniqueKey>id</uniqueKey> 
```

在您的 schema.xml 中没有注释掉。

现在，重新启动 Solr Web 应用程序并执行完全导入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:28:12.767

我可以从导入处理程序响应中读取：

```
"Total Documents Failed": "3" 
```

在我看来，您的查询似乎有问题，或者加载的模式与 DIH 输出不“匹配”。`<uniqueKey>`尽管强烈推荐，但不需要字段。但是缺少唯一键声明应该会导致该错误。

查看管理控制台上的“日志记录”页面。如果数据导入处理程序的查询有问题，那么您会在那里找到一个日志条目。

如果您在 solr 实例运行时应用了任何更改，请不要忘记刷新架构和 DIH 配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T07:27:21.103

某些特定字段，包括*version*，不应出现在您的字段列表中。（fl="*" 这是包含所有字段）使用相应的 id 单独尝试每个字段

fl="id,颜色"

# android - android 支持包修订版 12 中的操作栏支持

> ID：15268633
> 
> 赞同：2
> 
> 时间：2013-03-07T10:24:40.313
> 
> 标签：android, popupmenu, android-support-library

我正在使用 Target SDK 版本 14 和 minSdk 版本 10 开发 Android 应用程序。在 SDK 版本中，我们支持操作栏，而在 API 10 中，我们不支持操作栏。

android 支持库最新版本（android-support-v4 rev 12）是否支持操作栏和弹出菜单？

正如我在 API 14 上编写了我们的应用程序，现在我们也想支持 API 10，我们是否有另一种方法来支持 API 10 中的操作栏和弹出菜单？

谢谢， 瓦姆西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T16:45:18.957

好消息。Google 在第 18 版的支持库中添加了操作栏。 [http://developer.android.com/tools/support-library/index.html](http://developer.android.com/tools/support-library/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:30:26.413

Android 在早期版本（蜂窝之前）上不支持 ActionBar，但是您可以使用一个很棒的库。查看[ActionBarSherlock](http://actionbarsherlock.com/)。即使是谷歌内部的人也鼓励开发人员使用它。

如果您想为在旧版 Android 上运行的应用获取 HOLO 主题，请查看[HoloEverwhere](https://github.com/ChristopheVersieux/HoloEverywhere)。

弹出菜单是什么[意思？](https://stackoverflow.com/questions/3059155/android-quick-actions-ui-pattern)那么你也可以这样做。

# java - 在 WS-SecurityPolicy 中的两个不同策略之间自动选择

> ID：15268639
> 
> 赞同：2
> 
> 时间：2013-03-07T10:24:55.663
> 
> 标签：java, web-services, ws-security

我想使用 WS-SecurityPolicy 规范为 Web 服务编写一个可选策略，例如，如果客户端有证书，它可以签署 Soap Header，但如果没有，它总是可以使用带有签名的 Web 服务。

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:48:23.450

为此目的制定了备选政策。您可以在策略中指定两种不同的替代方案，然后客户端可以选择它想要使用的策略。这是一个例子：

```
<wsp:Policy ...>
  <wsp:ExactlyOne>
    <wsp:All> 
      <!-- SecurityPolicy assertions for signing go here, e.g.: -->
      <sp:SignedParts ...>
         <sp:Header ... />
      </sp:SignedParts>
    </wsp:All> 
    <wsp:All>
      <!-- Policy alternatives may also be empty -->
   </wsp:All>
  </wsp:ExactlyOne>
</wsp:Policy> 
```

客户端可以选择 . 封装的两种替代方案之一`<wsp:All />`。所以在这种情况下，它可以签署标题，但它不是必须的。有关更多信息，请参阅[关于策略替代的 WS-Policy 规范](http://www.w3.org/Submission/WS-Policy/#Policy_Alternative)。

# c# - 如何将列表框选定项分配给源属性

> ID：15268643
> 
> 赞同：2
> 
> 时间：2013-03-07T10:25:12.240
> 
> 标签：c#, wpf, data-binding, mvvm, xaml-binding

我希望当用户选择我的源属性得到更新的一个或多个项目时。我尝试过使用绑定模式 OneWayToSource 但这没有帮助。下面是 XAML 和 ViewModel 代码：

```
<ListBox  x:Name="ItemsListBox" SelectionMode="Multiple" Height="300" 
          ItemsSource="{Binding ResultSet}"
          SelectedItem="{Binding SelectedItems,Mode=OneWayToSource}">

private List<string> _selectedItems;
public List<string> SelectedItems
{
    get
    {
        return _selectedItems;
    }
    set
    {
        _selectedModeItems = value;
        NotifyPropertyChanged("SelectedItems");
    }
} 
```

我已经通过使用附加行为采取了这种方法并且它有效，但是有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:07:52.727

你的问题应该是这样的。

> 如何使用 MVVM 从 WPF 中的 ListBox 中获取多个选定项？

好吧，您可以从以下 stackoverflow 线程中得到答案。

[链接 1](https://stackoverflow.com/questions/803216/managing-multiple-selections-with-mvvm)

[链接 2](https://stackoverflow.com/questions/451748/wpf-m-v-vm-get-selected-items-from-a-listcollectionview)

您只需`IsSelected`在 ResultSet 视图模型中定义属性即可。然后，如果您想在任何时候获取选定的项目，只需从 ResultSet 中获取“IsSelected”属性设置为 true 的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:04:37.160

你也可以
在这里创建一个附加行为是一个如何做的[例子](http://blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:38:24.057

WPF ListBox 有两个与当前选定项相关的属性：

*   **SelectedItem**可用于绑定，绑定到第一个选定项。
*   **SelectedItems**（末尾带有“s”）不可用于绑定。

启用多选后，您希望访问 SelectedItems 但不幸的是您无法绑定到它

您可以使用后面的代码解决此限制。创建一个名为 SelectedItems 的属性，该属性将包含所选内容，然后订阅 SelectionChanged 事件：

```
<ListBox  x:Name="ItemsListBox" SelectionMode="Multiple" Height="300" 
                          ItemsSource="{Binding ResultSet}" 
        SelectionChanged="ListBox_SelectionChanged">

private void ListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    foreach (string item in e.RemovedItems)
    {
        SelectedItems.Remove(item);
    }

    foreach (string item in e.AddedItems)
    {
        SelectedItems.Add(item);
    }
} 
```

# java - 改进循环赛以在不同的桌子上玩

> ID：15268644
> 
> 赞同：0
> 
> 时间：2013-03-07T10:25:17.137
> 
> 标签：java, algorithm

我遵循这个例子：[循环锦标赛的调度算法？](https://stackoverflow.com/questions/6648512/scheduling-algorithm-for-a-round-robin-tournament)创建循环赛。但是我有一个问题。假设我们有乒乓球锦标赛，我想通过改变他们的位置来改进这个算法。玩家 1 仍然在我不想要的表 1 上玩。所有玩家都应该尽可能地更换他们的桌子，不要在同一张桌子上玩 2 多轮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:27:25.547

一旦你决定了在给定回合中谁与谁对战，就将这对玩家随机分配到桌子上。

每轮一次[随机洗牌就可以了。](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

这样一来，没有人会通过重复在同一张桌子上玩来获得任何系统优势。

# javascript - 在安装时将用户登录名/密码输入存储在 Greasemonkey 脚本中

> ID：15268645
> 
> 赞同：12
> 
> 时间：2013-03-07T10:25:18.123
> 
> 标签：javascript, greasemonkey, tampermonkey

我正在做一个 Greasemonkey 脚本，它通过 REST API 与 Redmine 票务管理器进行通信。由于用户需要登录才能从 Redmine 获取数据，我需要一种方法来在脚本安装时询问用户他的凭据并将它们保存到脚本中。

这可以在不要求用户直接在脚本本身中编辑值的情况下实现吗？

编辑：
由于这个问题已经有了答案，我将验证下面给出的答案，因为它是一个非常好的框架。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T10:57:17.857

这是一个获取和存储登录凭据的框架。^† 脚本在第一次运行时提示输入信息，并使用`GM_setValue()`.

它还在 Greasemonkey 上下文菜单中添加了两个项目，以允许更改用户名或密码。

```
// ==UserScript==
// @name     _Autologin, sensitive info framework
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  http://crypto.stanford.edu/sjcl/sjcl.js
// @grant    GM_getValue
// @grant    GM_setValue
// @grant    GM_registerMenuCommand
// ==/UserScript==

var encKey  = GM_getValue ("encKey",  "");
var usr     = GM_getValue ("lognUsr", "");
var pword   = GM_getValue ("lognPwd", "");

if ( ! encKey) {
    encKey  = prompt (
        'Script key not set for ' + location.hostname + '. Please enter a random string:',
        ''
    );
    GM_setValue ("encKey", encKey);

    usr     = pword = "";   // New key makes prev stored values (if any) unable to decode.
}
usr         = decodeOrPrompt (usr,   "U-name", "lognUsr");
pword       = decodeOrPrompt (pword, "P-word", "lognPwd");

function decodeOrPrompt (targVar, userPrompt, setValVarName) {
    if (targVar) {
        targVar     = unStoreAndDecrypt (targVar);
    }
    else {
        targVar     = prompt (
            userPrompt + ' not set for ' + location.hostname + '. Please enter it now:',
            ''
        );
        GM_setValue (setValVarName, encryptAndStore (targVar) );
    }
    return targVar;
}

function encryptAndStore (clearText) {
    return  JSON.stringify (sjcl.encrypt (encKey, clearText) );
}

function unStoreAndDecrypt (jsonObj) {
    return  sjcl.decrypt (encKey, JSON.parse (jsonObj) );
}

//-- Add menu commands that will allow U and P to be changed.
GM_registerMenuCommand ("Change Username", changeUsername);
GM_registerMenuCommand ("Change Password", changePassword);

function changeUsername () {
    promptAndChangeStoredValue (usr,   "U-name", "lognUsr");
}

function changePassword () {
    promptAndChangeStoredValue (pword, "P-word", "lognPwd");
}

function promptAndChangeStoredValue (targVar, userPrompt, setValVarName) {
    targVar     = prompt (
        'Change ' + userPrompt + ' for ' + location.hostname + ':',
        targVar
    );
    GM_setValue (setValVarName, encryptAndStore (targVar) );
}

// ADD YOUR CODE TO SET THE USERNAME AND PASSWORD ON THE LOGIN PAGE, HERE. 
```

* * *

^†重要：

1.  **使用用户脚本登录总是存在风险。**
2.  这个框架大大降低了这种风险，但是 Greasemonkey 和 Tampermonkey 可用的存储机制并不安全，并且浏览器供应商[CYA 反对存储机密信息](https://developer.chrome.com/extensions/storage#using-sync)。如果坏人同时获得*了*您的用户脚本*和*浏览器数据，那么他可以对您的密码进行逆向工程。当然，如果他有这个，他很可能无论如何都拥有了你的一台机器。
3.  明智的**做法是使用***LastPass*、*KeePass*等密码管理器。
4.  绝对**最糟糕的事情**是将凭据存储在用户脚本本身中。即使是客人也可以看到它们，你会被“黑”，保证。

# javascript - 去掉 Javascript 中的纪元日期

> ID：15268653
> 
> 赞同：0
> 
> 时间：2013-03-07T10:25:38.727
> 
> 标签：javascript, string

我有一个数据表返回收到的一些日期 - 它们以以下格式返回（将始终采用这种格式）：

```
/Date(1362045881257)/ 
```

我怎样才能轻松地将其剥离为纪元数字，以便我可以将其转换为可读的日期。

到目前为止，我已经尝试了以下方法，但它没有按预期工作。所以我试图删除的第一件事就是 ( ) - 然后我打算做另一个 .replace 来删除 // 然后删除 Date ，这会让我只剩下数字。

```
 success: function (msg) {

                for (var i = 0; i < msg.aaData.length; i++) {

                    var date = msg.aaData[i].DateReceived;
                    date.replace(/\(|\)/g, '');
                    alert(date);
                }

                fnCallback(msg);
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:36:20.823

```
 success: function (msg) {

            for (var i = 0; i < msg.aaData.length; i++) {
                // toString() below might be redundant!
                var date = msg.aaData[i].DateReceived.toString();
                var reg = /[^0-9]/g;
                var epoch = date.replace(reg, ''));
                alert(epoch);
            }

            fnCallback(msg);
        }, 
```

# javascript - $.ajax 缓存真实持续时间

> ID：15268658
> 
> 赞同：2
> 
> 时间：2013-03-07T10:25:51.117
> 
> 标签：javascript, ajax, caching, twitter

`$.ajax`我正在尝试使用推特的搜索功能获取推文列表（在本例中为 25 条带有特定主题标签） 。

有两件事对我来说有点不清楚：

1.  持续`cache: true`多长时间（直到它发送新请求而不是使用缓存需要多长时间）？目前似乎每隔几秒钟，但我想知道精确的持续时间以及是否/如何改变它。

2.  大约 2000-3000 人会在随机时刻从 twitter 中检索信息，但不久之后可能不会由同一个人完成。twitter 将如何响应这个（可能因为请求太多而阻止 IP 地址）？这就是为什么我想将信息缓存大约 1-5 分钟，以减少请求量。

**TL;DR：**我对 twitter 搜索功能提出了很多请求，如何减轻负载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:35:42.570

的缓存时间`$.ajax`很可能取决于浏览器，因此您不应依赖它来平衡 Twitter API 的负载。`{ cache: false }`可以通过传入设置参数来关闭此缓存。相反，您应该实现自己的缓存系统。

Twitter 有一个页面描述了这一点：[https](https://dev.twitter.com/docs/rate-limiting) ://dev.twitter.com/docs/rate-limiting 。

它说它会发送一些标头来告诉您在特定时间跨度内还剩下多少请求。你需要做的只是缓存足够长的时间，这样你就不会超过 Twitter 对你施加的限制。你应该做一些测试，看看你的服务上的不同负载将如何影响对 Twitter API 的调用总数，并相应地设计你的缓存系统。这里的最佳解决方案可能是从 a 到 b'o-clock 我需要缓存 c 分钟，从 d 到 e'o-clock 我需要缓存 f 分钟。另一种解决方案可能是实施一个系统来跟踪正在发生的负载并实时确定缓存时间。如果这两种解决方案都令人望而生畏，您可能只需选择足够长的缓存时间就可以逃脱，这样您就永远不会超过限制。

# mysql - Visual Basic 需要从 MySQL 更改为 MSSQL

> ID：15268660
> 
> 赞同：0
> 
> 时间：2013-03-07T10:25:56.497
> 
> 标签：mysql, sql-server, vb.net

我有一个现有的应用程序，简单的单表数据查找是为连接到 MySQL 而编写的，我需要将其更改为 MSSQL。连接字符串看起来很直接，但我不知道如何更改它们以指向已转换的 MSSQL 表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:17:13.777

查看以下网站，为您的 sql server 安装生成正确的连接字符串：

[http://www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)

# javascript - 用于动态创建元素的 jQuery“on create”事件

> ID：15268661
> 
> 赞同：86
> 
> 时间：2013-03-07T10:25:57.503
> 
> 标签：javascript, jquery, combobox

我需要能够动态创建`<select>`元素并将其转换为 jQuery `.combobox()`。这应该是元素创建事件，而不是一些“点击”事件，在这种情况下我可以只使用 jQuery `.on()`。

那么这样的事情存在吗？

```
$(document).on("create", "select", function() {
    $(this).combobox();
} 
```

我不愿意使用 livequery，因为它已经过时了。

**更新**提到的选择/组合框是通过 ajax 加载到 jQuery 颜色框（模态窗口）中的，因此问题 - 我只能使用 colorbox 启动组合框`onComplete`，但是在更改一个组合框时，必须动态创建另一个选择/组合框，因此我需要一个检测元素创建的更通用的方法（`select`在这种情况下）。

**UPDATE2**为了尝试进一步解释问题 - 我有`select/combobox`递归创建的元素，里面也有很多启动代码`.combobox()`，因此如果我使用经典方法，比如[@bipen 的答案](https://stackoverflow.com/a/15268861/82548)，我的代码会膨胀到疯狂的水平。希望这能更好地解释问题。

**UPDATE3**谢谢大家，我现在明白了，由于`DOMNodeInserted`DOM 突变中存在空白，因此无法解决这个问题。我只需要重新考虑我的申请。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-07T10:38:23.053

您可以[`on`](http://api.jquery.com/on/)通过`DOMNodeInserted`事件获取事件被您的代码添加到文档时的事件。

```
$('body').on('DOMNodeInserted', 'select', function () {
      //$(this).combobox();
});

$('<select>').appendTo('body');
$('<select>').appendTo('body'); 
```

在这里摆弄：http: [//jsfiddle.net/Codesleuth/qLAB2/3/](http://jsfiddle.net/Codesleuth/qLAB2/3/)

编辑：阅读后我只需要仔细检查`DOMNodeInserted`不会导致跨浏览器出现问题。[这个](https://stackoverflow.com/questions/2143929/domnodeinserted-equivalent-in-ie)2010 年的问题表明 IE 不支持该事件，所以如果可以的话测试一下。

见这里：[[链接]](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted) *警告！DOMNodeInserted 事件类型在本规范中定义以供参考和完整性，但本规范[不推荐](http://www.w3.org/TR/DOM-Level-3-Events/#glossary-deprecated)使用此事件类型。*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-02-28T06:30:09.500

正如其他几个答案中提到的，[突变事件](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events)已被弃用，因此您应该改用[MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)。由于没有人提供任何详细信息，所以这里......

## 基本 JavaScript API

MutationObserver 的 API 相当简单。它不像突变事件那么简单，但它仍然可以。

```
function callback(records) {
  records.forEach(function (record) {
    var list = record.addedNodes;
    var i = list.length - 1;

	for ( ; i > -1; i-- ) {
	  if (list[i].nodeName === 'SELECT') {
	    // Insert code here...
	    console.log(list[i]);
	  }
	}
  });
}

var observer = new MutationObserver(callback);

var targetNode = document.body;

observer.observe(targetNode, { childList: true, subtree: true });
```

```
<script>
  // For testing
  setTimeout(function() {
    var $el = document.createElement('select');
    document.body.appendChild($el);
  }, 500);
</script>
```

让我们分解一下。

```
var observer = new MutationObserver(callback); 
```

这创建了观察者。观察者还没有看任何东西；这正是事件监听器被附加的地方。

```
observer.observe(targetNode, { childList: true, subtree: true }); 
```

这使观察者启动。第一个参数是观察者将观察变化的节点。第二个参数是[观察什么的选项](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserverInit)。

*   `childList`表示我想观察添加或删除的子元素。
*   `subtree`是一个修饰符，可*扩展* `childList`以监视此元素子树中任何位置的更改（否则，它只会直接查看 内部的更改`targetNode`）。

除此以外的其他两个主要选项`childList`是`attributes`和`characterData`，这意味着它们听起来像什么。您必须使用这三个之一。

```
function callback(records) {
  records.forEach(function (record) { 
```

回调内部的事情变得有点棘手。[回调接收一个MutationRecord](https://developer.mozilla.org/en-US/docs/Web/API/MutationRecord)数组。每个 MutationRecord 可以描述一种类型（ 、 或 ）的`childList`多个`attributes`变化`characterData`。由于我只告诉观察者注意`childList`，我不会费心检查类型。

```
var list = record.addedNodes; 
```

在这里，我抓取了所有添加的子节点的 NodeList。对于所有未添加节点的记录，这将为空（并且可能有很多这样的记录）。

从那里开始，我遍历添加的节点并找到任何`<select>`元素。

这里没有什么复杂的。

## jQuery

...但是您要求使用 jQuery。美好的。

```
(function($) {

  var observers = [];

  $.event.special.domNodeInserted = {

    setup: function setup(data, namespaces) {
      var observer = new MutationObserver(checkObservers);

      observers.push([this, observer, []]);
    },

    teardown: function teardown(namespaces) {
      var obs = getObserverData(this);

      obs[1].disconnect();

      observers = $.grep(observers, function(item) {
        return item !== obs;
      });
    },

    remove: function remove(handleObj) {
      var obs = getObserverData(this);

      obs[2] = obs[2].filter(function(event) {
        return event[0] !== handleObj.selector && event[1] !== handleObj.handler;
      });
    },

    add: function add(handleObj) {
      var obs = getObserverData(this);

      var opts = $.extend({}, {
        childList: true,
        subtree: true
      }, handleObj.data);

      obs[1].observe(this, opts);

      obs[2].push([handleObj.selector, handleObj.handler]);
    }
  };

  function getObserverData(element) {
    var $el = $(element);

    return $.grep(observers, function(item) {
      return $el.is(item[0]);
    })[0];
  }

  function checkObservers(records, observer) {
    var obs = $.grep(observers, function(item) {
      return item[1] === observer;
    })[0];

    var triggers = obs[2];

    var changes = [];

    records.forEach(function(record) {
      if (record.type === 'attributes') {
        if (changes.indexOf(record.target) === -1) {
          changes.push(record.target);
        }

        return;
      }

      $(record.addedNodes).toArray().forEach(function(el) {
        if (changes.indexOf(el) === -1) {
          changes.push(el);
        }
      })
    });

    triggers.forEach(function checkTrigger(item) {
      changes.forEach(function(el) {
        var $el = $(el);

        if ($el.is(item[0])) {
          $el.trigger('domNodeInserted');
        }
      });
    });
  }

})(jQuery); 
```

`domNodeInserted`这将使用[jQuery 特殊事件 API](http://benalman.com/news/2010/03/jquery-special-events/)创建一个名为 的新事件。你可以像这样使用它：

```
$(document).on("domNodeInserted", "select", function () {
  $(this).combobox();
}); 
```

*我个人建议寻找一个类，因为一些库会创建`select`用于测试目的的元素。*

当然，您也可以`.off("domNodeInserted", ...)`通过传入如下数据来使用或微调观看：

```
$(document.body).on("domNodeInserted", "select.test", {
  attributes: true,
  subtree: false
}, function () {
  $(this).combobox();
}); 
```

`select.test`每当直接在正文内的元素的属性发生更改时，这将触发对元素外观的检查。

你可以在下面或[jsFiddle](https://jsfiddle.net/sb2n60dq/)上看到它。

```
(function($) {
  $(document).on("domNodeInserted", "select", function() {
    console.log(this);
    //$(this).combobox();
  });
})(jQuery);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script>
  // For testing
  setTimeout(function() {
    var $el = document.createElement('select');
    document.body.appendChild($el);
  }, 500);
</script>

<script>
  (function($) {

    var observers = [];

    $.event.special.domNodeInserted = {

      setup: function setup(data, namespaces) {
        var observer = new MutationObserver(checkObservers);

        observers.push([this, observer, []]);
      },

      teardown: function teardown(namespaces) {
        var obs = getObserverData(this);

        obs[1].disconnect();

        observers = $.grep(observers, function(item) {
          return item !== obs;
        });
      },

      remove: function remove(handleObj) {
        var obs = getObserverData(this);

        obs[2] = obs[2].filter(function(event) {
          return event[0] !== handleObj.selector && event[1] !== handleObj.handler;
        });
      },

      add: function add(handleObj) {
        var obs = getObserverData(this);

        var opts = $.extend({}, {
          childList: true,
          subtree: true
        }, handleObj.data);

        obs[1].observe(this, opts);

        obs[2].push([handleObj.selector, handleObj.handler]);
      }
    };

    function getObserverData(element) {
      var $el = $(element);

      return $.grep(observers, function(item) {
        return $el.is(item[0]);
      })[0];
    }

    function checkObservers(records, observer) {
      var obs = $.grep(observers, function(item) {
        return item[1] === observer;
      })[0];

      var triggers = obs[2];

      var changes = [];

      records.forEach(function(record) {
        if (record.type === 'attributes') {
          if (changes.indexOf(record.target) === -1) {
            changes.push(record.target);
          }

          return;
        }

        $(record.addedNodes).toArray().forEach(function(el) {
          if (changes.indexOf(el) === -1) {
            changes.push(el);
          }
        })
      });

      triggers.forEach(function checkTrigger(item) {
        changes.forEach(function(el) {
          var $el = $(el);

          if ($el.is(item[0])) {
            $el.trigger('domNodeInserted');
          }
        });
      });
    }

  })(jQuery);
</script>
```

* * *

### 笔记

这个 jQuery 代码是一个相当基本的实现。如果其他地方的修改使您的选择器有效，它不会触发。

例如，假设您的选择器是`.test select`并且文档已经有一个`<select>`. 添加类将使选择器有效，但因为我只检查`test`and ，所以事件不会触发。更改必须发生在您希望自己选择的元素上。`<body>``record.target``record.addedNodes`

这可以通过在发生突变时查询选择器来避免。我选择不这样做是为了避免对已经处理过的元素造成重复事件。正确处理[相邻](https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_selectors)的或[一般的兄弟组合](https://developer.mozilla.org/en-US/docs/Web/CSS/General_sibling_selectors)器会使事情变得更加棘手。

如需更全面的解决方案，请参阅[https://github.com/pie6k/jquery.initialize](https://github.com/pie6k/jquery.initialize)，如[Damien Ó Ceallaigh](/users/1350377/damien-%c3%93-ceallaigh)的[回答](/a/39339340/5764553)中所述。但是，该库的作者已宣布该库已过时，并建议您不要为此使用 jQuery。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-07T11:23:16.777

~~您可以使用`DOMNodeInserted`突变事件（无需委托）：~~

 ~~```
$('body').on('DOMNodeInserted', function(e) {
    var target = e.target; //inserted element;
}); 
```~~  ~~编辑：不**推荐**使用[突变事件](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events)，请改用[突变观察者](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

 *** * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-04-08T12:16:07.370

刚刚提出了这个解决方案，似乎可以解决我所有的 ajax 问题。

对于准备好的事件，我现在使用这个：

```
function loaded(selector, callback){
    //trigger after page load.
    $(function () {
        callback($(selector));
    });
    //trigger after page update eg ajax event or jquery insert.
    $(document).on('DOMNodeInserted', selector, function () {
        callback($(this));
    });
}

loaded('.foo', function(el){
    //some action
    el.css('background', 'black');
}); 
```

对于正常的触发事件，我现在使用这个：

```
$(document).on('click', '.foo', function () {
    //some action
    $(this).css('background', 'pink');
}); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-09-06T01:14:03.283

有一个插件，[adampietrasiak/jquery.initialize](https://github.com/adampietrasiak/jquery.initialize)，它基于**`MutationObserver`**它简单地实现了这一点。

```
$.initialize(".some-element", function() {
    $(this).css("color", "blue");
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-22T00:46:16.013

对我来说，绑定到身体是行不通的。使用 jQuery.bind() 绑定到文档。

```
$(document).bind('DOMNodeInserted',function(e){
             var target = e.target;
         }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-07T12:14:36.793

一种*看似*可靠的方法（尽管仅在 Firefox 和 Chrome 中测试过）是使用 JavaScript 来侦听`animationend`（或其 camelCased 和前缀的兄弟`animationEnd`）事件，并应用一个短暂的（在演示 0.01 秒中）动画到您计划添加的元素类型。当然，这不是一个`onCreate`事件，而是近似（在*兼容*的浏览器中）一种`onInsertion`类型的事件；以下是概念验证：

```
$(document).on('webkitAnimationEnd animationend MSAnimationEnd oanimationend', function(e){
    var eTarget = e.target;
    console.log(eTarget.tagName.toLowerCase() + ' added to ' + eTarget.parentNode.tagName.toLowerCase());
    $(eTarget).draggable(); // or whatever other method you'd prefer
}); 
```

使用以下 HTML：

```
<div class="wrapper">
    <button class="add">add a div element</button>
</div> 
```

和（缩写，prefixed-versions-removed 虽然出现在下面的小提琴中）CSS：

```
/* vendor-prefixed alternatives removed for brevity */
@keyframes added {
    0% {
        color: #fff;
    }
}

div {
    color: #000;
    /* vendor-prefixed properties removed for brevity */
    animation: added 0.01s linear;
    animation-iteration-count: 1;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/v2TRR/2/)。

显然，可以调整 CSS 以适应相关元素的位置，以及 jQuery 中使用的选择器（它应该尽可能靠近插入点）。

事件名称的文档：

```
Mozilla   |  animationend
Microsoft |  MSAnimationEnd
Opera     |  oanimationend
Webkit    |  webkitAnimationEnd
W3C       |  animationend 
```

参考：

*   [caniuse.com 对 CSS 动画兼容性的总结](http://caniuse.com/#feat=css-animation)。
*   [CSS 动画事件接口 (W3C)](http://dev.w3.org/csswg/css3-animations/#AnimationEvent-interface)。
*   [JavaScript`animationend`供应商支持](http://www.sitepoint.com/css3-animation-javascript-event-handlers/)。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-07T11:26:12.647

这可以通过[`DOM4 MutationObservers`](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)但仅适用于 Firefox 14+/Chrome 18+（目前）。

然而，有一个“[史诗黑客](http://www.backalleycoder.com/2012/04/25/i-want-a-damnodeinserted/)”（作者的话不是我的话！）适用于所有支持 CSS3 动画的浏览器，这些浏览器包括：IE10、Firefox 5+、Chrome 3+、Opera 12、Android 2.0+、Safari 4+。请参阅博客中的[**演示**](http://jsfiddle.net/Zzw2M/33/light/)。hack 是使用具有给定名称的 CSS3 动画事件，该事件在 JavaScript 中被观察和执行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-10T15:15:24.530

我认为值得一提的是，在某些情况下，这会起作用：

```
$( document ).ajaxComplete(function() {
// Do Stuff
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-28T10:27:33.400

代替...

```
$(".class").click( function() {
    // do something
}); 
```

你可以写...

```
$('body').on('click', '.class', function() {
    // do something
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-07T10:35:49.167

创建一个`<select>`id ，将其附加到文档..并调用`.combobox`

```
 var dynamicScript='<select id="selectid"><option value="1">...</option>.....</select>'
  $('body').append(dynamicScript); //append this to the place your wanted.
  $('#selectid').combobox();  //get the id and add .combobox(); 
```

这应该可以解决问题..您可以根据需要隐藏选择，然后`.combobox`显示它..或者使用查找..

```
 $(document).find('select').combobox() //though this is not good performancewise 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-08-05T09:10:45.703

如果您使用的是 angularjs，您可以编写自己的指令。我在使用 bootstrapSwitch 时遇到了同样的问题。我必须调用 `$("[name='my-checkbox']").bootstrapSwitch();` javascript，但当时没有创建我的 html 输入对象。所以我编写了一个自己的指令并创建了输入元素 `<input type="checkbox" checkbox-switch>`

在指令中，我编译元素以通过 javascript 访问并执行 jquery 命令（如您的`.combobox()`命令）。很重要的是去掉属性。否则，该指令将调用自身，并且您已经构建了一个循环

```
app.directive("checkboxSwitch", function($compile) {
return {
    link: function($scope, element) {
        var input = element[0];
        input.removeAttribute("checkbox-switch");
        var inputCompiled = $compile(input)($scope.$parent);
        inputCompiled.bootstrapSwitch();
    }
}
}); 
```**~~

# c# - 字典中的值会变成指针吗？

> ID：15268664
> 
> 赞同：1
> 
> 时间：2013-03-07T10:26:05.670
> 
> 标签：c#, dictionary

如果我将一个对象放入字典中，它是否会变成一个指针？

我有以下字典：

```
public Dictionary<string, Class1> Dic{ get; set; } 
```

在以下功能中，我更新/添加到字典

```
 private void Update(string Name)
    {
        if (Name== null || Name=="")
            return;
        if (Dic.ContainsKey(Name))
        {
            Dic[Name] = MyClass;
        }
        else
        {
            Dic.Add(Name, MyClass);
        }
    } 
```

MyClass 是一个与字典位于同一类的变量

```
public Class1 MyClass { get; set; } 
```

当我更改调用更新函数的类时，我看到所有字典都包含相同的值：当前 MyClass ，为什么？

**我怎样才能防止这种情况？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:30:08.443

您针对字典中的多个键添加相同的类对象，但它们都指向同一个对象，这就是为什么当您更改一个对象时，您会看到整个字典的更改。您需要复制您的类对象，然后将其添加到字典中。

您可能会看到以下讨论：[How do you do a deep copy an object in .Net (C# 特别是)？](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)在 Stackoverflow 上。

除此之外，您可以摆脱对密钥的检查，因为您正在检查密钥是否不存在添加，否则更新。你可以简单地做：

```
private void Update(string Name)
    {
        if (Name== null || Name=="")
            return;
        Dic[Name] = MyClass;
    } 
```

哪个会做同样的事情*（如果不存在则添加，如果存在则更新）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:28:02.313

因为你输入的类是*引用的*，所以当你在某个地方改变它时，它也在那里“改变”（它并没有真正改变*，*它只是在一个地方改变，但我们都在看同一件事， 可以这么说）。所以，这与字典无关，而是.NET 的机制。

如果您将值类型（例如整数）放入其中，然后更改变量值，您将不会看到此类更改。如果适合您的情况，您可以定义结构，它们是值类型，并且您可以“重用”该类型而无需“级联更改”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:28:42.087

不。而且是的。您*永远不会*“将对象放入字典中”-实际上您将对对象的*引用*放入字典中。引用指向原始对象：该对象未被克隆。

如果`Class1`是 a `struct`，那么当您访问或插入它时，它确实会被复制。

用人类的话来说：参考是房子的书面地址，比如说。很多人都可以拥有该地址的副本。如果有人去房子里把门涂成红色，那么**每个**看到那个地址的人都会看到。

（我想我从乔恩那里偷了这个比喻；对不起乔恩）

*听起来*你正在做类似的事情：

```
MyClass obj = new MyClass();
foreach(var name in names) {
    obj.Update(name);
} 
```

当你应该做的时候：

```
foreach(var name in names) {
    MyClass obj = new MyClass();
    obj.Update(name);
} 
```

这里的区别是我们有多少对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:28:41.537

因为 class 是一个[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)。这意味着该类型的每个变量都是指向该类型的*指针*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T10:30:42.613

您的类是引用类型，因此 Dictionary 包含它的内存链接。实际上，您可以在[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)和[值类型中查看更多信息](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)

# scala - Scala relfection，查找子类型的类型参数

> ID：15268667
> 
> 赞同：1
> 
> 时间：2013-03-07T10:26:12.893
> 
> 标签：scala, reflection, type-parameter

现在从[通过 Scala 2.10 中的反射查找类型参数？](https://stackoverflow.com/questions/12842729/finding-type-parameters-via-reflection-in-scala-2-10)，我可以看到如何获取类型参数，但是我想从子类参数类型中获取它们。例如我有

```
trait ICommand
trait IHandle[T <: ICommand] {
  def handle(t:T):Unit
}

case class MyCommand(i:Int) extends ICommand
trait MyHandler extends IHandle[MyCommand] 
```

所以我想找到MyHandler的ICommand参数。到目前为止我可以得到

```
val t = typeOf[MyHandler]
val s = tt.typeSymbol.typeSignature 
```

其中 s.toString 将给出 IHandle[MyCommand]，但是我想将 MyCommand 作为符号拉出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:12:44.307

可能有更短的方法，但这有效。

```
scala> typeOf[MyHandler].baseType(typeOf[IHandle[_]].typeSymbol) match { case TypeRef(_, _, List(tpe)) => tpe.typeSymbol }
res8: reflect.runtime.universe.Symbol = class MyCommand 
```

# android - 如何通过修改图像的尺寸和角度来进行 3d 轮播

> ID：15268674
> 
> 赞同：3
> 
> 时间：2013-03-07T10:26:37.560
> 
> 标签：android, 3d, carousel

我需要对一组图像进行圆形轮播效果。我为此使用下面的示例项目。

[http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

我想在图像移动到背景时减小图像大小并以某个角度旋转图像。最后输出应该如下。

![最后它应该如下所示。](../Images/8cacff45c704a812dd3ad877dd7edc80.png)

在这方面需要帮助。提前致谢。

# iphone - 位置服务权限未保存 iOS

> ID：15268675
> 
> 赞同：2
> 
> 时间：2013-03-07T10:26:41.970
> 
> 标签：iphone, ios, objective-c

我对核心位置服务中的本地化 API 有疑问。我收到请求位置服务许可的提示。如果我单击允许并转到设置，我可以看到我的应用程序没有权限。

这是我在 GeoUtility 类中的代码：

```
CLGeocoder *reverseGeocoder = [[CLGeocoder alloc] init];

CLLocationManager *lm = [[CLLocationManager alloc] init];

[lm setPurpose:@"Need to verify your region"];
[lm startUpdatingLocation]; 
```

它由 viewDidAppear 中的 viewController 触发

我还在`location-services`我的 plist 文件中的所需设备功能下添加了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:51:29.963

**添加 CoreLocation.framework 和 MapKit.framework**

**和**

**在.h**

*`#import <MapKit/MapKit.h>`*

```
CLLocationManager *locationManager;
CLGeocoder *geocoder; 
```

**鉴于确实加载**

```
- (void)viewDidLoad
{
    locationManager = [[CLLocationManager alloc] init];
        geocoder = [[CLGeocoder alloc] init];
        locationManager.delegate = self;
        locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        [locationManager startUpdatingLocation];
} 
```

**然后**

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    CLLocation *currentLocation = newLocation;
    if (currentLocation != nil) {
        LongitudeLbl.text = [NSString stringWithFormat:@"%.8f",currentLocation.coordinate.longitude];
        LatitudeLbl.text = [NSString stringWithFormat:@"%.8f",currentLocation.coordinate.latitude];
    }

[geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            NSString *addresstemp2 = [[NSString alloc] init];
            NSString *subThoroughfare2 = [NSString stringWithFormat:@"%@",placemark.subThoroughfare];

            NSString *thoroughfare2 = [NSString stringWithFormat:@"%@",placemark.thoroughfare];
            NSString *postalCode2 = [NSString stringWithFormat:@"%@",placemark.postalCode];
            NSString *locality2 = [NSString stringWithFormat:@"%@",placemark.locality];
            NSString *administrativeArea2 = [NSString stringWithFormat:@"%@",placemark.administrativeArea];
            NSString *country2 = [NSString stringWithFormat:@"%@",placemark.country];

            if (![subThoroughfare2 isEqualToString:@"(null)"]) {
                addresstemp2 = [NSString stringWithFormat:@"%@",subThoroughfare2];
            }
            if (![thoroughfare2 isEqualToString:@"(null)"]) {
                addresstemp2 = [NSString stringWithFormat:@"%@ %@ \n",addresstemp2,thoroughfare2];
            }
            if (![postalCode2 isEqualToString:@"(null)"]) {
                addresstemp2 = [NSString stringWithFormat:@"%@ %@",addresstemp2,postalCode2];
            }
            if (![locality2 isEqualToString:@"(null)"]) {
                addresstemp2 = [NSString stringWithFormat:@"%@ %@ \n",addresstemp2,locality2];
            }
            if (![administrativeArea2 isEqualToString:@"(null)"]) {
                addresstemp2 = [NSString stringWithFormat:@"%@ %@ \n",addresstemp2,administrativeArea2];
            } 
            if (![country2 isEqualToString:@"(null)"]) {
                addresstemp2 = [NSString stringWithFormat:@"%@ %@",addresstemp2,country2];
            }
            AddressLbl.text = [[NSString alloc] initWithString:addresstemp2];
            [AddressLbl sizeToFit];

            [locationManager stopUpdatingLocation];
} else {
        }
    } ];
} 
```

**您还可以更改模拟器中的设置转到设置并选择位置服务将其更改为打开。see down 是您的应用程序名称，如果它关闭然后更改为 ON**

# ios - 将自定义对象插入 NSMutableArray

> ID：15268683
> 
> 赞同：1
> 
> 时间：2013-03-07T10:27:13.073
> 
> 标签：ios, nsmutablearray

我正在尝试将我的自定义对象插入`BalanceData`，`NSMutableArray`但出现错误：

```
No known class method for selector 'balnce' 
```

我的代码：

```
- (void)insertNewObject:(id)sender
{
    if (!_balances) {
        _balances = [[NSMutableArray alloc] init];
    }
    [_balances insertObject:[BalanceData balance] atIndex:0]; // error occures here
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

`MasterViewController.m`最佳：

```
#import "MasterViewController.h"
#import "DetailViewController.h"
#import "BalanceData.h"

@interface MasterViewController () {
    NSMutableArray *_balances;
}
@end

@implementation MasterViewController

@synthesize balances = _balances; 
```

我怎样才能以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:38:04.223

您的 BalanceData 类没有实现 balance 方法。以这种方式调用：

```
[BalanceData balance] 
```

你正在调用一个类方法：

```
@implementation BalanceData
+ (id)balance
{ //implementation} 
```

将此类方法添加到 BalanceData 类中，它将起作用。您还应该在集合类中覆盖`isEqual:`并`hash`使用您的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:36:06.780

根据您提供的代码和错误消息，这似乎与 NSMutableArray 没有任何关系...

运行时抱怨类`BalanceData`没有响应某个消息。

那么：您是否调用了错误的方法？或者您打算调用实例方法，而是将其作为类方法调用？或者您是否试图故意调用 Class 方法，但没有将它放在您的 .h 文件中以便其他外部代码能够看到？

单独试试这个：

```
[BalanceData balance]; 
```

我敢打赌，运行时不会更好，这表明您的问题出在此处，而不是与数组交互有关。

# android - 从 sqlite 触发器调用 Java 方法 (android)

> ID：15268684
> 
> 赞同：2
> 
> 时间：2013-03-07T10:27:14.427
> 
> 标签：android, sqlite, triggers, callback

例如，我想使用 sqlite 触发器注册回调方法，

```
public void printLog(){
 Log.i("TAG","1 row added");
} 
```

在 sqlite 中插入任何行后调用此方法。

可能吗？

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:45:12.450

SQLite 提供[数据更改通知回调](http://www.sqlite.org/c3ref/update_hook.html)。我认为 Android 不会直接公开它们，但它确实有例如 CursorAdapter 提供一些更改通知。

您也可以使用[getContentResolver().registerContentObserver](http://developer.android.com/reference/android/content/ContentResolver.html#registerContentObserver%28android.net.Uri,%20boolean,%20android.database.ContentObserver%29)，但遗憾的是它不会告诉您进行了何种更改，它可能是删除、插入或更新。

如果您控制与 DB 接口的 ContentProvider，那么您可以触发 Intent 或使用[getContentResolver().notifyChange](http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver%29)发送一个特殊的 Uri 通知，该通知标识表和操作。您可以通知的示例 Uri 可能是： content://my-authority/change/table-name/insert

但即便如此，您也不确切知道更改影响了哪些行。

似乎写入更改日志表的触发器将保证您听到所有更改，无论它们来自何处，并且您可以知道发生的确切 ID 和操作。不幸的是，这意味着插入/更新/删除速度较慢，这意味着您可能需要某种服务来处理和删除更改。

我很想知道这些是否是更好的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:44:05.110

您可以设置内容观察者此链接将帮助接收回调以更改内容[http://developer.android.com/reference/android/database/ContentObserver.html](http://developer.android.com/reference/android/database/ContentObserver.html)

# ruby-on-rails - twitter bootstrap AND rails 3 Jumbotron 标头

> ID：15268690
> 
> 赞同：0
> 
> 时间：2013-03-07T10:27:23.127
> 
> 标签：ruby-on-rails, twitter-bootstrap

我已经安装了 twitter bootstrap rails gem 并运行了所有命令。

我已经看到了一些基本的风格变化，这让我有了一些信心。但是，我使用以下课程

```
 <div class="jumbotron masthead">
      <h1>Test Heading</h1>
      <p>Find me in app/views/pages/home.html.erb</p>
   </div> 
```

它不做任何事情。根据 twitter bootstrap 主页和检查，这应该可以工作。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:32:42.177

您确定 bootstrap gem 使用最新版本的 Bootstrap 吗？我总是手动包含 CSS 和 JS 文件，以便始终拥有最新版本。我没有使用刊头，但它包含在 Bootstrap CSS 文件中。[https://github.com/twitter/bootstrap/blob/master/docs/assets/css/docs.css#L58](https://github.com/twitter/bootstrap/blob/master/docs/assets/css/docs.css#L58)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:37:37.637

jumbotron 标头是 Bootstrap GitHub 文档页面上的额外添加，不包含在 Bootstrap 的“正确”版本中。

没有什么可以阻止你从[这里](https://github.com/twitter/bootstrap/blob/master/docs/assets/css/docs.css#L58)捏代码并将它自己添加到你的 Rails 项目中！

# mercurial - 为什么我的姓名和电子邮件没有出现在补丁中？

> ID：15268695
> 
> 赞同：1
> 
> 时间：2013-03-07T10:27:39.800
> 
> 标签：mercurial, diff, patch

我在本地计算机上克隆了一个远程仓库。

对文件进行更改后，我提交，然后执行此操作以创建补丁：

`hg diff -U 8 -p -r PREVIOUS_REVISION_NUMBER file_name > patch_file`

我将其发送以`patch_file`供审核。

但是我没有看到我的名字或电子邮件出现在补丁的任何地方。

我的`hgrc`样子是这样的：

```
[ui]
username = My Name <myemail@domain.com>

[extensions]
mq =

[diff]
git = 1
unified = 8 
```

1.  我不应该看到我的姓名和电子邮件出现在补丁中吗？如果确实被推送，我希望远程 repo 的进一步变更集有我的名字用于此提交。

2.  考虑到我的工作流程，有没有更好的方法来创建补丁？（进行更改、提交、创建补丁）

**编辑**：我问是因为我在其他人的补丁中看到了：

```
# HG changeset patch
# Parent some_long_code
# User name <email>
# Date .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:23:03.540

不要`hg diff`用来生成补丁。使用`hg export`它将在文件顶部添加您期望的信息作为标题，包括用户和提交消息。

使用`hg help export`以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:38:41.710

> 我不应该看到我的姓名和电子邮件出现在补丁中吗？

我不明白为什么。补丁是描述两个文件之间差异的文档。您的个人身份与该差异无关。

# c# - MVVM 符合 WPF 应用程序中的本地化

> ID：15268699
> 
> 赞同：11
> 
> 时间：2013-03-07T10:27:58.790
> 
> 标签：c#, wpf, mvvm, localization, mvvm-light

如何使用 MVVM 模式本地化 WPF 应用程序？我真的很想以“正确”的方式来做。

我目前的方法是使用 .resx 资源文件来本地化我的应用程序。

![解决方案资源管理器 VS 2012](../Images/03fa9727234ee0aa580b9ad37c73b6fa.png)

我将它们包含在我的 xaml 代码中

```
xmlns:localization="clr-namespace:ClientLibTestTool.ViewLanguages" 
```

并像这样访问它们：

```
 <Button x:Name="BtnGenerate" 
                Content="{x:Static localization:localization.ButtonGenerate}"/> 
```

我的问题：

1.  **有更好的方法吗？**
2.  我如何测试不同的语言（加载具有不同语言设置的应用程序）？
3.  是否可以在运行时更改语言？

答案：

问题一：

问题2：（谢谢你，stijn）

```
public MainWindow()
{
    // Debug Settings
    localization.Culture = CultureInfo.GetCultureInfo("en-US");
    // localization.Culture = CultureInfo.GetCultureInfo("de-DE");
    this.InitializeComponent();
} 
```

问题3：（谢谢你，stijn）

不是真的，有必要重绘整个窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:58:34.143

就我而言，这是适当的方法。要切换语言，请更改本地化类使用的文化：

```
localization.Culture = CultureInfo.GetCultureInfo( "de-DE" ); 
```

由于所有字符串都是在运行时获取的（生成的 Designer.cs 文件中的所有调用看起来像`ResourceManager.GetString( "SomeString", resourceCulture );`并且`resourceCulture`是上面调用设置的内容，这会影响您在运行时获得的内容。但是假设您在 xaml 中使用菜单项等中的值，您必须重建整个菜单才能生效。

# c++ - 获取用户计算机上的文件和文件夹列表，文件名由文本行过滤

> ID：15268700
> 
> 赞同：0
> 
> 时间：2013-03-07T10:27:59.293
> 
> 标签：c++, windows, file, indexing

目前我正在开发一个应该在 Windows 上执行上述操作的项目。我的想法是递归地遍历所有用户的驱动器并收集所有信息，但这似乎非常耗时。那么有没有更好的方法来做这样的事情（也许使用操作系统的索引文件或 NTFS MFT）？

我使用 C++/Qt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:35:54.410

您可以为此搜索许多代码示例中的任何一个并使用一个。

您使用[FindFirstFile](http://msdn.microsoft.com/en-us/library/aa914391.aspx)和[FindNextFile](http://msdn.microsoft.com/en-us/library/aa914380.aspx)的库函数已经过优化，并将直接转到 FAT。它们是由微软编码的，我怀疑是否有更快的方法。

顺便说一句，“按文本行过滤”是什么意思？您的意思是您只想要与特定模式匹配的文件名（使用上面的 teh）或包含字符串的文件？

# ios - 在后台IOS实现长时间运行的任务

> ID：15268702
> 
> 赞同：10
> 
> 时间：2013-03-07T10:28:02.593
> 
> 标签：ios, avfoundation

我一直在开发一个应用程序，用户可以在其中录制视频`AVFoundation`并发送到服务器，视频的最大大小为 15M，具体取决于互联网速度和类型，将视频传输到服务器大约需要 1 到 5 分钟. 我正在后台线程中将录制的视频传输到服务器，以便用户可以在将视频上传到服务器时继续应用程序上的其他内容。

在阅读 Apple Docs 以在后台[实现长时间运行的任务时](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，我看到只有少数几种应用程序被允许在后台执行。
例如

> 音频——应用程序在后台向用户播放可听内容。（此内容包括使用 AirPlay 的流式音频或视频内容。）

它是否也使我的应用程序有资格在后台运行任务？或者我需要在主线程上传输视频？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T10:36:19.203

`NSOperationQueue`是执行多线程任务以避免阻塞主线程的推荐方式。后台线程用于您希望在应用程序处于非活动状态时执行的任务，例如 GPS 指示或音频流。

如果您的应用程序在前台运行，则根本不需要后台线程。

对于简单的任务，您可以使用块向队列添加操作：

```
NSOperationQueue* operationQueue = [[NSOperationQueue alloc] init];
[operationQueue addOperationWithBlock:^{
    // Perform long-running tasks without blocking main thread
}]; 
```

[有关NSOperationQueue](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)以及[如何使用它的](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)更多信息。

上传过程将在后台继续，但您的应用程序将有资格被暂停，因此上传可能会取消。为避免这种情况，您可以在应用程序委托中添加以下代码，以告知操作系统应用程序何时准备好挂起：

```
- (void)applicationWillResignActive:(UIApplication *)application {
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{

      // Wait until the pending operations finish
      [operationQueue waitUntilAllOperationsAreFinished];

      [application endBackgroundTask: bgTask];
      bgTask = UIBackgroundTaskInvalid;
    }]; 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T11:49:50.410

根据您对 Dwayne 的回复，您不需要能够在后台模式下下载。相反，您需要在主线程旁边的另一个线程（后台线程）中进行下载。GCD 是这样的：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
//        Do you download here...
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T10:42:59.043

您的要求有资格在后台运行。您不需要注册 info plist 中支持的任何后台模式。您需要做的就是，当应用程序即将进入后台时，使用后台任务处理程序请求额外的时间并在该块中执行您的任务。确保在 10 分钟之前停止处理程序，以免操作系统强制终止。

您可以使用 Apple 提供的以下代码。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
    // Clean up any unfinished task business by marking where you
    // stopped or ending the task outright.
    [application endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

// Start the long-running task and return immediately.
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // Do the work associated with the task, preferably in chunks.

    [application endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
});} 
```

# ios - 在 C++ 中将指针（是函数参数）复制到另一个指针（全局变量）

> ID：15268704
> 
> 赞同：0
> 
> 时间：2013-03-07T10:28:15.573
> 
> 标签：ios, objective-c

我正在使用最新的 SDK 开发一个 iOS 应用程序。

在这个项目中，我使用了一些`Objective-C++`与代码混合的`C++`代码。

我知道这是基本的，但我不知道如何将作为方法参数传递的指针复制到类中的指针。

我给你看我的代码：

```
@interface MyClass ()
{
    ...

    int* _lastDetectionClasses;
}

@end

@implementation MyClass

...

- (int)doSomething:(uint8_t *)aPointer
    detection:(int*)detectionClasses
{
    [ ... ]

    _lastDetectionClasses = detectionClasses;

    return -1;
}

    [ ... ]
} 
```

**这条线`_lastDetectionClasses = detectionClasses;`正确吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:30:48.927

这取决于你想要什么。

如果你**真的**想要你在标题中描述的内容和你写的内容，那么它是正确的 - 你正在复制一个指向声明为相同类型指针的实例变量的指针。

但是，如果您想复制指针指向的内存内容，则需要分配一些内存并使用`memcpy()`.

# jquery - FadeOut 回调不会等待完成

> ID：15268706
> 
> 赞同：0
> 
> 时间：2013-03-07T10:28:17.733
> 
> 标签：jquery, fadeout

我有两个一起工作的功能。一个到`fadeOut()`可见的文章，一个到`fadeIn()`一个新的在前一篇完成褪色之后。不知何故，第二个函数不会等待第一个函数完成。我的代码如下：

```
itemFadeTo: function( item ) {

    $( '#item_container article:visible' )
    .stop(true, true)
    .fadeOut( 750, $().itemFadeIn( item ) );

},

itemFadeIn: function( item) {

    $( item )
    .css({ opacity: 0 })
    .show()
    .stop(true, true)
    .animate({ opacity: 1}, 750);

} 
```

调用如下：

```
var new_item= $( 'article#new_item' );

$().itemFadeTo( new_item); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:32:19.337

问题是`.fadeOut()`期望一个函数作为它的第二个参数，但你没有传递一个函数，你正在*调用*一个函数并将其结果作为第二个参数传递：

```
.fadeOut( 750, $().itemFadeIn( item ) ); 
```

所以这意味着这`$().itemFadeIn( item)`部分发生*在*调用`.fadeOut()`.

试试这个：

```
.fadeOut( 750, function() { $().itemFadeIn( item ); }); 
```

# php - 排除某些唯一 ID，然后对剩余 ID 进行分组

> ID：15268707
> 
> 赞同：0
> 
> 时间：2013-03-07T10:28:22.440
> 
> 标签：php, mysql

所以我正在建立一个汽车预订网站。还有一个汽车表是这样的：

汽车

*   车牌
*   汽车模型
*   汽车制造商
*   登记

还有这样的预订表：

预订：

*   预订编号
*   车牌
*   开始日期
*   结束日期

因此，当用户输入他们想要预订汽车的日期时，我会查询我的预订表：

如果日期已经在预订表中，我想获取该汽车 ID，然后从显示用户的列表中排除该汽车，因此他们无法预订。

我的问题是我在数据库中有多辆汽车，它们的模式和制造方式相同，但 CarID 和注册不同。

我还按型号对汽车进行分组，以便只向用户显示某种类型的汽车。

```
$carstring = mysql_query("SELECT * FROM cars {$statement} AND deleted = 'no'" GROUP BY CarModel);

$getcars = $carstring;
while($searchcars = mysql_fetch_array($getcars)) {

   $checkreservations = mysql_query("SELECT * FROM reservations WHERE startDate = '".$sqlcoldate."' and carID = '".$searchcars['carID']."'");
   $thiscar_num_rows = mysql_num_rows($checkreservations); 
```

因此，正如您现在所看到的，我可以分辨出预订表中使用了哪些汽车，并且可以从预订表中回显真假`num_rows`

但是我认为这是错误的方法，因为我想做的是找出哪些汽车`CarID`已经被占用，然后将它们从`$getcars`向用户显示所有汽车的查询循环中排除，然后按模型分组。

谁能告诉我这样做的方法，甚至是更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:56:07.057

排除保留的汽车的一种简单方法是使用子查询获取所有保留的汽车，而不是在主查询中声明不允许使用 CarID NOT IN 构造的汽车

```
<?php 

    // select all cars that are not reserved at sqlcoldate
    $sql = "SELECT * 
    FROM Cars
    WHERE CarID NOT IN (
        SELECT CarID
        FROM Reservations
        WHERE StartDate > '".$sqlcoldate."' and EndDate < '".$sqlcoldate."'
    )
    GROUP BY CarModel";

    // execute that query
    $result = mysql_query($sql);

    // if there are no results print a message
    if (mysql_num_rows($result) == 0) {
        echo "No cars found";
        exit; // Exit the function, because there is nothing to do
    }

    // else print all available cars
    while ($row = mysql_fetch_assoc($result)) {
        echo "Model available car is :" . $row["CarModel"] . " </br>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:00:08.120

实际没有测试。但它应该工作

```
SELECT c.* FROM cars c
LEFT JOIN reservations r
ON c.carID=r.carID AND
selected_date BETWEEN r.startDate AND r.endDate
WHERE r.carID is null 
```

# ios - 动画帧后子类化的 UIView 无法正确显示

> ID：15268719
> 
> 赞同：0
> 
> 时间：2013-03-07T10:28:55.960
> 
> 标签：ios, objective-c, cocoa-touch, uiview, animated

我已经进行了子类化`UIView`，基本上包含 a`UIPickerView`和 a `UIToolbar`。

当用户在选择器中选择特定行时，我将在选择器上添加一个`UIImageView`。但是，当我动画我`UIView`向上滑动屏幕时，此图像不可见。如果我不制作动画，`UIView`那么它将正确显示。

我正在显示`UIImageView`这样的内容（在 中`UIView`）：

```
- (void)showMailSetupPopover {

    if (self.popoverMailSetupImageView == nil) {

        UIImageView *popoverMailSetupImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"popover-mail-setup-addreminder"]];
        popoverMailSetupImageView.alpha = 0.0;
        popoverMailSetupImageView.frame = CGRectMake(8, self.frame.origin.y + 65, popoverMailSetupImageView.bounds.size.width, popoverMailSetupImageView.bounds.size.height);
        self.popoverMailSetupImageView = popoverMailSetupImageView;
    }

    [self addSubview:self.popoverMailSetupImageView];

    [UIView animateWithDuration:0.5 animations:^{

        self.popoverMailSetupImageView.alpha = 1.0;

    } completion:^(BOOL finished) {}];
} 
```

这就是我添加`UIView`到的方式`self.view`：

```
RMMessageTypePickerView *messageTypePickerView = [[RMMessageTypePickerView alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height, 320, 260) reminderMessageType:RMReminderMessageTypeText delegate:self];

self.messageTypePickerView = messageTypePickerView;

[self.view addSubview:self.messageTypePickerView];

[UIView animateWithDuration:0.2 animations:^{

    self.messageTypePickerView.frame = messageTypePickerViewTargetFrame;
    self.addReminderTableView.frame = addReminderTableViewTargetFrame;

} completion:^(BOOL finished) {

    if (firstShow) {

        [self processSelectedMessageTypeRow:RMReminderMessageTypeText];
    }
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:14:36.540

发现问题，

更换

`popoverMailSetupImageView.frame = CGRectMake(8, self.frame.origin.y + 65, popoverMailSetupImageView.bounds.size.width, popoverMailSetupImageView.bounds.size.height);`

和

`popoverMailSetupImageView.frame = CGRectMake(8, 65, popoverMailSetupImageView.bounds.size.width, popoverMailSetupImageView.bounds.size.height);`

`self.frame.origin.y`不需要。

# shell - shell脚本中密码区域附近的授予命令语法错误

> ID：15268720
> 
> 赞同：1
> 
> 时间：2013-03-07T10:28:56.807
> 
> 标签：shell

我已经创建了一个这样的 shell 脚本。但是在授权命令中出现语法错误，我认为在密码区域附近。如果有人可以，请帮助我。

```
ssh -t qbadmin@10.3.2.0 '
 su root -c "
   echo \"Give db name :\";
   read db_name;
   echo \"Give password :\";
   read db_pass;
   host=localhost;
   sql1=\"create database \$db_name;\";
   sql2=\"grant all on \${db_name}.* to \${db_name}@\${host} identified by \"\${db_pass}\";\";
   sql3=\"\${sql1}\${sql2}\";
   mysql -u root -p -e \"\${sql3}\";
 ";
' 
```

数据库在远程机器上创建成功，但是grant命令返回错误..！我的猜测是错误可能是因为在授权命令中 ${db_pass} 前后使用了 \" 字符。请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:20:32.200

嵌套引用总是很棘手。你为什么不直接`ssh`把远程主机当成`root`？

```
ssh -t root@10.3.2.0 '
  echo "Give db name :"
  read db_name;
  echo "Give password :"
  read db_pass
  host=localhost
  sql1="create database \$db_name;"
  sql2="grant all on ${db_name}.* to ${db_name}@${host} identified by ${db_pass};"
  sql3="${sql1}${sql2}"
  mysql -p -e "${sql3}"
' 
```

# ios - 退还之前购买的非续订订阅，而不是当前订阅。可能的？

> ID：15268721
> 
> 赞同：6
> 
> 时间：2013-03-07T10:29:00.527
> 
> 标签：ios, in-app-purchase, receipt, auto-renewing

我正在实现一个具有非续订订阅的 iOS 应用程序。网上没有太多相关信息；所以我寻求你的指导。

最让我担心的一个用例是用户购买了一次订阅，然后在再次购买后立即再次购买以延长服务期限（请参阅[此处](https://stackoverflow.com/questions/12068073/can-a-user-purchase-multiple-non-renewing-apple-subscriptions-to-extend-their-ex)的此类场景）。如果该用户要退还第一次购买，而第二次则完好无损怎么办？这在实践中是否可行，还是我太偏执了？

假设上述情况是可能的，我的应用程序会遇到问题，因为据我所知，`verifyReceipt`它只返回最新的、良好的收据（`Managing Subscriptions with In-App Purchase`在 WWDC'12 中观看）。

我发现 Apple 没有提供有关退款政策的相关信息。

（自动续订订阅似乎排除了这种情况，因为 iTunes 会自动执行续订操作，并且在 iTunes 允许之前似乎无法延长此类订阅。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:54:09.633

`verifyReceipt`不仅会返回最新的良好收据，还会告诉您您提交验证的收据是否良好。因此，如果您担心用户可能已取消*交易，请提交您所质疑的每张收据。

*但是“取消”第一次购买是什么意思？你的意思是当他们点击“取消”而不是“购买”时？那么交易将无法通过，您甚至不会收到收据。

或者你的意思是当他们要求退款时？我不知道他们可以取消购买的任何其他方式。

**编辑：**
如果您指的是退款，则开发人员无法判断[用户是否已收到退款](https://stackoverflow.com/a/6484331/241138)。假设是 Apple 希望您继续向该用户提供服务，无论他们是否收到退款。无论退款状态如何，您的收据都可能全部验证正确。

# dom - CKEDITOR - 设置插入符号结束

> ID：15268722
> 
> 赞同：2
> 
> 时间：2013-03-07T10:29:01.657
> 
> 标签：dom, ckeditor, range, selection

我在 CKEDITOR 中进行了很多定位工作。但我仍然无法弄清楚为什么以下代码有时不起作用？

```
 var range = new CKEDITOR.dom.range(editor.document);
    range.moveToElementEditablePosition(element, setToEnd);
    editor.getSelection().selectRanges([range]); 
```

我认为这与我提供的元素输入有关。但我不确定。

有谁知道 moveToElementEditbalePosition 工作的要求是什么？我最后一次检查我的输入是一个 SPAN 元素。

[http://docs.ckeditor.com/#!/api/CKEDITOR.dom.range-method-moveToElementEditablePosition](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.range-method-moveToElementEditablePosition)

还是有更安全的（跨浏览器）解决方案？

==== 编辑 ====

我发现了一个错误，它来自新的 CKEDITOR.dom.range

类型错误：b 未定义

这意味着 editor.document 是空的，但是当我查看 editor.document 时它已被填充？

当我在错误后第二次尝试设置范围时，它还显示以下错误：未捕获的异常：DOMException：INVALID_STATE_ERR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:02:49.257

试试这个 HTML：

```
<p><span id="test">Text</span></p> 
```

而这个JS：

```
var e = CKEDITOR.instances.editor1;
var span = e.document.getById( 'test' );
var range = e.createRange();

range.moveToElementEditablePosition( span, 1 );
range.select();
e.insertText( 'FOO' );

range.moveToElementEditablePosition( span );
range.select();
e.insertText( 'BAR' ); 
```

结果似乎是正确的：

```
<p><span>BARTextFOO</span></p> 
```

你还有其他情况吗？

# python - 在python中划分数组

> ID：15268735
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:29:50.603
> 
> 标签：python, arrays, numpy

我以这种方式在python中定义一个函数：

```
def calculate(y1,y2,y):
    l=np.log(3)
    ya=np.array(y1)/(np.array(y)*np.array(l))
    yb=np.array(y2)/(np.array(y)*np.array(l))
    return (ya,yb) 
```

但是当我运行我的脚本时（即使一切正常），我收到以下错误：

```
RuntimeWarning: invalid value encountered in divide
ya = np.array(y1)/((np.array(y))*(l))
RuntimeWarning: invalid value encountered in divide
yb = np.array(y2)/((np.array(y))*(l)) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:37:44.630

您收到该错误是因为分母数组中有一个`0`或一个`np.inf`值。

`y`除了在它到达之前清理之外，你无能为力`calculcate`

```
def calculate(y1, y2, y):
    if not isinstance(y, np.ndarray):
        y = np.array(y)

    if not np.isfinite(y):
        print 'bad y array values'
        return

    elif np.sum(y == 0) > 0:
        print 'zero values in y'
        return

    # the rest of your code 
```

请注意，这将停止`RunTimeWarning`但不会返回任何内容，因此调用的函数`calculate`必须处理它。

# jenkins - 错误：发布者 org.jenkinsci.plugins.discardbuild.DiscardBuildPublisher 由于异常 java.lang.UnsupportedOperationException 而中止

> ID：15268736
> 
> 赞同：1
> 
> 时间：2013-03-07T10:29:51.393
> 
> 标签：jenkins, jenkins-plugins

长话短说 - Jenkins 1.406 给了我一个“磁盘空间不足”的错误。我发现构建正在堆积，最终填满了磁盘空间。我搜索了一个比手动删除旧版本更智能的解决方案，我偶然发现了“丢弃旧版本”插件。它给了我标题中的错误。

我尝试降级插件并将 Jenkins 升级到 1.504。似乎没有任何效果，这很奇怪，因为[https://issues.jenkins-ci.org/browse/JENKINS-16979](https://issues.jenkins-ci.org/browse/JENKINS-16979)表示问题已解决。

任何帮助将不胜感激。

# c# - 如何使用带有 MVC3 的 ASP.NET 连接到不同的数据库

> ID：15268738
> 
> 赞同：0
> 
> 时间：2013-03-07T10:30:00.533
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我是 ASP.NET 的新手，但在 Qt 平台上开发了系统。我想从不同的数据库中获取数据并在我的应用程序中使用它并将其保存到我的数据库中。我通过 MVC3 方法使用 ASP.NET 和 C#。

我试过了：

在 web.config 文件中具有到不同数据库的连接字符串，如下所示。

```
<add name="DBSContext"
    connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\DBS_Example_DB.mdf;Integrated Security=True"
    providerName="System.Data.SqlClient"/>

<add name="VIPSContext"
    connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\VIPS.mdf;Integrated Security=True"
    providerName="System.Data.SqlClient"/> 
```

连接到控制器中的这两个数据库如下

```
private DBSContext db = new DBSContext();
private VIPSContext vipsdb = new VIPSContext(); 
```

将数据从控制器传递到视图[成功]并通过get和post方法将其保存到DB[不成功]

```
// GET: /Create
public ActionResult Create()
{ 
    //dropdown
    ViewBag.CollectorID =new SelectList(db.Collectors, "CollectorID", "FirstName");
    //dropdown
    ViewBag.TaxpayerID =new SelectList(vipsdb.Taxpayers, "TaxpayerID", "FirstName");

    return View();
} 

// POST: /Create
public ActionResult Create(Debt_Case debt_case)
{
    if (ModelState.IsValid)
    {
         db.Debt_Cases.Add(debt_case);
         db.SaveChanges(); //this is where the error is
         return RedirectToAction("Index");
    }
    return View(debt_case);
} 
```

当我将更改保存到数据库时出现错误。

我的模型如下：

```
public class Debt_Case
{
   public string Debt_CaseID { get; set; }

      public string TaxpayerID { get; set; }
      public string CollectorID { get; set; }
      public string TotalPayment { get; set; }

      public virtual Collector Collectors { get; set; }
      public virtual Taxpayer Taxpayers { get; set; }
   }
} 
```

**注意：**导航属性，即 Collectors 和 Taxpayers 为空。

我收到此错误：

> 更新条目时出错。有关详细信息，请参阅内部异常。

任何人都可以帮助解决此错误。

# python - 需要来自 Unix shell -> Python -> & back 的控制

> ID：15268745
> 
> 赞同：1
> 
> 时间：2013-03-07T10:30:12.433
> 
> 标签：python, unix, wlst

有一个 weblogic 脚本 test.sh，其中包含以下代码。

```
echo "Starting   ...."
java weblogic.WLST helloworld.py
echo "Ending ..."The output after printing "Starting ...." 
```

第二行代码提示输入以下消息

> 如果创建密钥文件后未将其保存在安全位置，则创建密钥文件会降低系统的安全性。是否要创建密钥文件？是或否

然后我必须手动按下我希望自动化为“y”的 y 或 n。

这是我的例外，不需要用户干预。

我需要以某种方式自动传递'y'，以便脚本继续流动，而不是停止用户输入。

以下是 helloworld.py 脚本的内容

```
connect(user1,p@ss,'t3://myhost:9999')
storeUserConfig(userConfigFile='userconfig.secure',userKeyFile='userkey.secure') 
disconnect() 
exit() 
```

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:38:11.733

您可以`java weblogic.WLST helloworld.py`在 python 中将命令作为子进程执行。然后您可以解析上述问题的输出并通过 输入“y” `stdin.write('y\n')`。

# python - 带有国家字符的名称的正则表达式

> ID：15268747
> 
> 赞同：0
> 
> 时间：2013-03-07T10:30:23.770
> 
> 标签：python, regex

我正在寻找一个正则表达式来验证名称（使用 Python 标准模块 re）。

该表达式应适用于具有标准拉丁字符 (az)、空格、破折号、带有西欧字符（æøåüöä 等）的名称，但也适用于中文、泰语、阿拉伯等。

所有这些都可以被认为是“字母”——它们都可以，但是特殊字符，如 !@#$%&*() 和引号等应该会失败。

我还没有真正找到可以做到这一点的东西 - 任何知道如何做到这一点的人？

PS：有成千上万个符合条件的字符 - 简单地列出它们是不现实的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:34:13.947

那么问题真的是你需要这个做什么？也许相反的方法可能对您更好，即指定不允许使用哪些字符*：*例如`[^ \t]`等。

您还应该查看[手册](http://docs.python.org/2/library/re.html#regular-expression-syntax)中的`\s`,`\w`和其他内容，并结合设置`LOCALE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:44:44.547

您可以创建一个字符类，它将匹配您要匹配的所有语言：例如

```
[\p{Cyrillic}\p{Latin}] 
```

将匹配所有西里尔字母和拉丁字母。不确定这是否是最好的解决方案，但它确实有效。

[这](http://www.regular-expressions.info/unicode.html)是完整的参考

# hibernate - 休眠 selectBeforeUpdate 属性 @org.hibernate.Entity

> ID：15268755
> 
> 赞同：3
> 
> 时间：2013-03-07T10:30:59.463
> 
> 标签：hibernate, hibernate-annotations

当我们设置 selectBeforeUpdate=true 时，在进行更新之前，Hibernate 会运行 Select 查询检查当前对象是否与 DB 中的相同，然后决定是否触发更新查询。

我的问题是休眠如何决定两个对象是否相同。是通过调用equals()还是比较对象的各个字段，不管equals()的实现是什么？

# reporting-services - 布尔的报表生成器 3.0 级联参数

> ID：15268759
> 
> 赞同：0
> 
> 时间：2013-03-07T10:31:11.593
> 
> 标签：reporting-services, ssrs-2008, reportbuilder3.0

我正在 SSRS 2008 R2 Report Builder 3.0 中构建报告。在此报告中，我有一个名为 @CustomerID 的参数，它是下拉列表中的客户列表。然后我有一些布尔参数，例如。@UseFirstName 和 @UseLastName 基于各自的设置。@UseFirstName 和 @UseLastName 的数量对于我选择的第一个客户来说工作正常，但是当我选择一个新客户时，值不会更新。显然，人口第一次是针对数据集工作的，但之后当我在下拉列表中选择客户时，它会停止更新。有任何想法吗？

我已经在我的所有参数上设置了“始终更新”。

获取参数数据的代码：

```
SELECT * FROM pen.CustomerReportSettings
WHERE (CustomerID = @CustomerID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:58:49.477

我认为 bool 参数无线电组不会按照您想要的方式工作。我能想到的唯一能让您接近的是将布尔参数强制为文本数据类型并将默认值设置为“从查询中获取值”，其中值字段是与参数相关的字段。您还需要将可用值指定为“从查询中获取值”以在 @CustomerID 更改时强制重新加载参数。这应该会产生一个带有一个可选选项的下拉框，并且下拉框的值设置为该选项。

# c# - 使用 C# 将文件上传到 FTP

> ID：15268760
> 
> 赞同：126
> 
> 时间：2013-03-07T10:31:13.543
> 
> 标签：c#, .net, file-upload, ftp

我尝试使用 C# 将文件上传到 FTP 服务器。文件已上传，但字节数为零。

```
private void button2_Click(object sender, EventArgs e)
{
    var dirPath = @"C:/Documents and Settings/sander.GD/Bureaublad/test/";

    ftp ftpClient = new ftp("ftp://example.com/", "username", "password");

    string[] files = Directory.GetFiles(dirPath,"*.*");

    var uploadPath = "/httpdocs/album";

    foreach (string file in files)
    {
        ftpClient.createDirectory("/test");

        ftpClient.upload(uploadPath + "/" + Path.GetFileName(file), file);
    }

    if (string.IsNullOrEmpty(txtnaam.Text))
    {
        MessageBox.Show("Gelieve uw naam in te geven !");
    }
} 
```

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2014-10-14T16:23:09.560

现有的答案是有效的，但是为什么在已经巧妙地实现 FTP 上传的[`WebRequest`](https://msdn.microsoft.com/en-us/library/system.net.webrequest "MSDN 网络请求")同时重新发明轮子并使用较低级别的类型：[`WebClient`](https://msdn.microsoft.com/en-us/library/system.net.webclient "MSDN 网络客户端")

```
using (var client = new WebClient())
{
    client.Credentials = new NetworkCredential(ftpUsername, ftpPassword);
    client.UploadFile("ftp://host/path.zip", WebRequestMethods.Ftp.UploadFile, localFile);
} 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2017-08-16T05:42:38.850

## 最简单的方法

使用 .NET 框架将文件上传到 FTP 服务器的最简单的方法是使用[`WebClient.UploadFile`方法](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.uploadfile)：

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("username", "password");
client.UploadFile(
    "ftp://ftp.example.com/remote/path/file.zip", @"C:\local\path\file.zip"); 
```

* * *

## 高级选项

如果您需要更大的控制，`WebClient`但不提供（如[TLS/SSL 加密](https://stackoverflow.com/q/4331665/850848#56888555)、ascii/文本传输模式、主动模式、传输恢复、进度监控等），请使用[`FtpWebRequest`](https://docs.microsoft.com/en-us/dotnet/api/system.net.ftpwebrequest). 简单的方法是`FileStream`使用以下命令将 a 复制到 FTP 流[`Stream.CopyTo`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto)：

```
FtpWebRequest request =
    (FtpWebRequest)WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip");
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Ftp.UploadFile;  

using (Stream fileStream = File.OpenRead(@"C:\local\path\file.zip"))
using (Stream ftpStream = request.GetRequestStream())
{
    fileStream.CopyTo(ftpStream);
} 
```

* * *

## 进度监控

如果您需要监控上传进度，您必须自己按块复制内容：

```
FtpWebRequest request =
    (FtpWebRequest)WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip");
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Ftp.UploadFile;  

using (Stream fileStream = File.OpenRead(@"C:\local\path\file.zip"))
using (Stream ftpStream = request.GetRequestStream())
{
    byte[] buffer = new byte[10240];
    int read;
    while ((read = fileStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        ftpStream.Write(buffer, 0, read);
        Console.WriteLine("Uploaded {0} bytes", fileStream.Position);
    } 
} 
```

有关 GUI 进度 (WinForms `ProgressBar`)，请参阅 C# 示例：
[我们如何显示进度条以使用 FtpWebRequest 进行上传](https://stackoverflow.com/q/6341024/850848#45931971)

* * *

## 上传文件夹

如果要从文件夹上传所有文件，请参阅
[使用 WebClient 将文件目录上传到 FTP 服务器](https://stackoverflow.com/q/44012637/850848)。

有关递归上传，请参阅
[C# 中的递归上传到 FTP 服务器](https://stackoverflow.com/q/60925131/850848)

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-03-07T11:54:47.763

**.NET 5** [指南](https://docs.microsoft.com/en-us/dotnet/api/system.net.ftpwebrequest?view=net-5.0)

```
async Task<FtpStatusCode> FtpFileUploadAsync(string ftpUrl, string userName, string password, string filePath)
{
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpUrl);
    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.Credentials = new NetworkCredential(userName, password);

    using (FileStream fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read))
    using (Stream requestStream = request.GetRequestStream())
    {
        await fileStream.CopyToAsync(requestStream);
    }

    using (FtpWebResponse response = (FtpWebResponse)await request.GetResponseAsync())
    {
        return response.StatusCode;
    }
} 
```

**.NET 框架**

```
public void UploadFtpFile(string folderName, string fileName)
{

    FtpWebRequest request;

    string folderName; 
    string fileName;
    string absoluteFileName = Path.GetFileName(fileName);

    request = WebRequest.Create(new Uri(string.Format(@"ftp://{0}/{1}/{2}", "127.0.0.1", folderName, absoluteFileName))) as FtpWebRequest;
    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.UseBinary = 1;
    request.UsePassive = 1;
    request.KeepAlive = 1;
    request.Credentials =  new NetworkCredential(user, pass);
    request.ConnectionGroupName = "group"; 

    using (FileStream fs = File.OpenRead(fileName))
    {
        byte[] buffer = new byte[fs.Length];
        fs.Read(buffer, 0, buffer.Length);
        fs.Close();
        Stream requestStream = request.GetRequestStream();
        requestStream.Write(buffer, 0, buffer.Length);
        requestStream.Flush();
        requestStream.Close();
    }
} 
```

如何使用

```
UploadFtpFile("testFolder", "E:\\filesToUpload\\test.img"); 
```

在你的 foreach 中使用它

你只需要创建一次文件夹

创建一个文件夹

```
request = WebRequest.Create(new Uri(string.Format(@"ftp://{0}/{1}/", "127.0.0.1", "testFolder"))) as FtpWebRequest;
request.Method = WebRequestMethods.Ftp.MakeDirectory;
FtpWebResponse ftpResponse = (FtpWebResponse)request.GetResponse(); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-07T10:37:39.347

以下对我有用：

```
public virtual void Send(string fileName, byte[] file)
{
    ByteArrayToFile(fileName, file);

    var request = (FtpWebRequest) WebRequest.Create(new Uri(ServerUrl + fileName));

    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.UsePassive = false;
    request.Credentials = new NetworkCredential(UserName, Password);
    request.ContentLength = file.Length;

    var requestStream = request.GetRequestStream();
    requestStream.Write(file, 0, file.Length);
    requestStream.Close();

    var response = (FtpWebResponse) request.GetResponse();

    if (response != null)
        response.Close();
} 
```

您无法读取代码中的发送文件参数，因为它只是文件名。

使用以下内容：

```
byte[] bytes = File.ReadAllBytes(dir + file); 
```

获取文件，以便您可以将其传递给`Send`方法。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-11T15:59:15.307

```
public static void UploadFileToFtp(string url, string filePath, string username, string password)
{
    var fileName = Path.GetFileName(filePath);
    var request = (FtpWebRequest)WebRequest.Create(url + fileName);

    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.Credentials = new NetworkCredential(username, password);
    request.UsePassive = true;
    request.UseBinary = true;
    request.KeepAlive = false;

    using (var fileStream = File.OpenRead(filePath))
    {
        using (var requestStream = request.GetRequestStream())
        {
            fileStream.CopyTo(requestStream);
            requestStream.Close();
        }
    }

    var response = (FtpWebResponse)request.GetResponse();
    Console.WriteLine("Upload done: {0}", response.StatusDescription);
    response.Close();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-28T07:43:42.320

在第一个示例中，必须将其更改为：

```
requestStream.Flush();
requestStream.Close(); 
```

首先冲洗，然后关闭。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-21T10:02:53.143

这对我有用，这种方法会将文件 SFTP 到您网络中的某个位置。它使用 SSH.NET.2013.4.7 库。可以免费下载。

```
 //Secure FTP
    public void SecureFTPUploadFile(string destinationHost,int port,string username,string password,string source,string destination)

    {
        ConnectionInfo ConnNfo = new ConnectionInfo(destinationHost, port, username, new PasswordAuthenticationMethod(username, password));

        var temp = destination.Split('/');
        string destinationFileName = temp[temp.Count() - 1];
        string parentDirectory = destination.Remove(destination.Length - (destinationFileName.Length + 1), destinationFileName.Length + 1);

        using (var sshclient = new SshClient(ConnNfo))
        {
            sshclient.Connect();
            using (var cmd = sshclient.CreateCommand("mkdir -p " + parentDirectory + " && chmod +rw " + parentDirectory))
            {
                cmd.Execute();
            }
            sshclient.Disconnect();
        }

        using (var sftp = new SftpClient(ConnNfo))
        {
            sftp.Connect();
            sftp.ChangeDirectory(parentDirectory);
            using (var uplfileStream = System.IO.File.OpenRead(source))
            {
                sftp.UploadFile(uplfileStream, destinationFileName, true);
            }
            sftp.Disconnect();
        }
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-25T10:37:40.870

发布日期：06/26/2018

[https://docs.microsoft.com/en-us/dotnet/framework/network-programming/how-to-upload-files-with-ftp](https://docs.microsoft.com/en-us/dotnet/framework/network-programming/how-to-upload-files-with-ftp)

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
    public static void Main ()
    {
        // Get the object used to communicate with the server.
        FtpWebRequest request = 
(FtpWebRequest)WebRequest.Create("ftp://www.contoso.com/test.htm");
        request.Method = WebRequestMethods.Ftp.UploadFile;

        // This example assumes the FTP site uses anonymous logon.
        request.Credentials = new NetworkCredential("anonymous", 
"janeDoe@contoso.com");

        // Copy the contents of the file to the request stream.
        byte[] fileContents;
        using (StreamReader sourceStream = new StreamReader("testfile.txt"))
        {
            fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
        }

        request.ContentLength = fileContents.Length;

        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(fileContents, 0, fileContents.Length);
        }

        using (FtpWebResponse response = (FtpWebResponse)request.GetResponse())
        {
            Console.WriteLine($"Upload File Complete, status 
{response.StatusDescription}");
        }
    }
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-31T18:48:36.313

我观察到——

1.  缺少 FtpwebRequest。
2.  由于目标是 FTP，因此需要 NetworkCredential。

我准备了一个像这样工作的方法，您可以将变量 ftpurl 的值替换为参数 TargetDestinationPath。我在 winforms 应用程序上测试过这个方法：

```
private void UploadProfileImage(string TargetFileName, string TargetDestinationPath, string FiletoUpload)
        {
            //Get the Image Destination path
            string imageName = TargetFileName; //you can comment this
            string imgPath = TargetDestinationPath; 

            string ftpurl = "ftp://downloads.abc.com/downloads.abc.com/MobileApps/SystemImages/ProfileImages/" + imgPath;
            string ftpusername = krayknot_DAL.clsGlobal.FTPUsername;
            string ftppassword = krayknot_DAL.clsGlobal.FTPPassword;
            string fileurl = FiletoUpload;

            FtpWebRequest ftpClient = (FtpWebRequest)FtpWebRequest.Create(ftpurl);
            ftpClient.Credentials = new System.Net.NetworkCredential(ftpusername, ftppassword);
            ftpClient.Method = System.Net.WebRequestMethods.Ftp.UploadFile;
            ftpClient.UseBinary = true;
            ftpClient.KeepAlive = true;
            System.IO.FileInfo fi = new System.IO.FileInfo(fileurl);
            ftpClient.ContentLength = fi.Length;
            byte[] buffer = new byte[4097];
            int bytes = 0;
            int total_bytes = (int)fi.Length;
            System.IO.FileStream fs = fi.OpenRead();
            System.IO.Stream rs = ftpClient.GetRequestStream();
            while (total_bytes > 0)
            {
                bytes = fs.Read(buffer, 0, buffer.Length);
                rs.Write(buffer, 0, bytes);
                total_bytes = total_bytes - bytes;
            }
            //fs.Flush();
            fs.Close();
            rs.Close();
            FtpWebResponse uploadResponse = (FtpWebResponse)ftpClient.GetResponse();
            string value = uploadResponse.StatusDescription;
            uploadResponse.Close();
        } 
```

如果有任何问题，请告诉我，或者这里还有一个可以帮助您的链接：

[https://msdn.microsoft.com/en-us/library/ms229715(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms229715(v=vs.110).aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-31T17:44:26.297

我找到的最好方法是 FluentFtp 你可以在这里找到 repo： [https](https://github.com/robinrodricks/FluentFTP) ://github.com/robinrodricks/FluentFTP 和快速入门示例： [https ://github.com/robinrodricks/FluentFTP/wiki/Quick-Start-例子](https://github.com/robinrodricks/FluentFTP/wiki/Quick-Start-Example)。

实际上这里一些人推荐的 WebRequest 类，微软不再推荐了，看看这个页面： [https ://docs.microsoft.com/en-us/dotnet/api/system.net.webrequest?view=净5.0](https://docs.microsoft.com/en-us/dotnet/api/system.net.webrequest?view=net-5.0)

```
// create an FTP client and specify the host, username and password
// (delete the credentials to use the "anonymous" account)
FtpClient client = new FtpClient("123.123.123.123", "david", "pass123");

// connect to the server and automatically detect working FTP settings
client.AutoConnect();

// upload a file and retry 3 times before giving up
client.RetryAttempts = 3;
client.UploadFile(@"C:\MyVideo.mp4", "/htdocs/big.txt", 
    FtpRemoteExists.Overwrite, false, FtpVerify.Retry);

// disconnect! good bye!
client.Disconnect(); 
```

# iphone - 用 linearGradient 填充的 SVG 文本在具有视网膜显示（Safari、Chrome）的 iPhone 上变得模糊

> ID：15268761
> 
> 赞同：3
> 
> 时间：2013-03-07T10:31:13.523
> 
> 标签：iphone, svg, retina-display, linear-gradients

我正在使用 SVG 在 HTML 页面上呈现带有渐变填充的文本。带有视网膜显示屏的 iPhone 设备存在问题：带有渐变的文本最初是模糊的，并且在缩放页面时不会重绘。具有实心填充的文本已正确缩放并且看起来很清晰。这是测试 HTML 页面的屏幕截图的链接，在 iOS (6.1.2) 上的 Chrome (25.0.1364.86) 中呈现：

[https://khttqq.dm1.livefilestore.com/y1pKFYPUS7WWQbPeMRk8akuOuxfWa7i8pTtzvJA40WgC78RLnlybUKDBbt5KVaWnORUgHISDawbCZb85UXMmF2KeDVqLsdbaVVx](https://khttqq.dm1.livefilestore.com/y1pKFYPUS7WWQbPeMRk8akuOuxfWa7i8pTtzvJA40WgC78RLnlybUKDBbt5KVaWnORUgHISDawbCZb85UXMmF2KeDVqLsdbaVVx)

这是一个代码：

```
<svg style="width: 0; height: 0;">
    <defs>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0" style="stop-color: rgb(255,255,255); stop-opacity: 1;"/>
          <stop offset="100" style="stop-color: rgb(60,60,60); stop-opacity: 1;"/>
        </linearGradient>
    </defs>
</svg>

<svg style="position: absolute; top: 0; left: 0; width: 300px; height: 150px;">
    <text x="0" y="110" font-family="Arial" font-size="110" fill="url(#gradient)">
        TEST
    </text>
</svg>

<svg style="position: absolute; top: 100; left: 0; width: 300px; height: 150px;">
    <text x="0" y="110" font-family="Arial" font-size="110" fill="red">
        TEST
    </text>
</svg> 
```

我正在寻找一种在提到的平台上获得带有渐变填充的清晰文本的方法。非常感谢任何有助于澄清这个问题的回复。

# android - 如何在 Eclipse Android 项目中更改 minSDK 版本（保存时重复出现错误）

> ID：15268766
> 
> 赞同：0
> 
> 时间：2013-03-07T10:31:19.353
> 
> 标签：android, eclipse

我正在制作蓝牙聊天 Android 示例以与另一个蓝牙设备进行通信。我可以编译，构建和运行修改后的项目，但是每次我保存项目时，都会出现很多错误

> 调用需要 API 级别 11（当前最小值为 1）：android.app.ActionBar#setSubtitle

我想我明白我应该在 android Manifest 中更改 minSDK，但是当我更改时

```
<uses-sdk minSdkVersion="6" /> 
```

到

```
<uses-sdk minSdkVersion="11" /> 
```

它不会改变任何东西，当我保存时，同样的消息再次出现。如何更改我的项目的 minSDK？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:35:00.283

正确的[语法](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)是

```
<uses-sdk android:minSdkVersion="integer"
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

你错过了这个`android:`部分。确保您的清单有效并且其中没有任何错误会妨碍正确读取 minSdkVersion。

该错误告诉您当前使用的是 API 级别 1，因此无法正确读取整个内容。

# java - getMethods() 返回实现泛型接口时未定义的方法

> ID：15268767
> 
> 赞同：10
> 
> 时间：2013-03-07T10:31:21.683
> 
> 标签：java, reflection, interface

一个简单的界面：

```
interface Foo {
    void myMethod(String arg);
}

class FooImpl implements Foo {
    void myMethod(String arg){}

    public static void main(String[] args) {
    Class cls = FooImpl.class;
    try {
        for (Method method : cls.getMethods()) {
        System.out.print(method.getName() + "\t");
        for(Class paramCls : method.getParameterTypes()){
            System.out.print(paramCls.getName() + ",");
        }
        System.out.println();
        }
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
    }
    }
} 
```

输出将是：

```
myMethod java.lang.String,
...//Other Method 
```

只打印一个 myMethod。

但是，如果我将接口更改为通用接口：

```
interface Foo<T> {
    void myMethod(T arg);    
}   

class FooImpl implements Foo<String> {
    void myMethod(String arg){}
} 
```

然后奇怪的是输出将是：

```
myMethod java.lang.Object,
myMethod java.lang.String,
...//Other Method 
```

为什么将接口更改为泛型后会导致多了一个参数类型为 Object 的 Method？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T10:43:40.753

第一种方法是由编译器创建的[桥接方法。](http://stas-blogspot.blogspot.be/2010/03/java-bridge-methods-explained.html)如果您针对“ [isBridge()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#isBridge%28%29) ”测试您的方法，则可以过滤掉“错误”的方法（也过滤掉一些您可以通过协方差返回获得的奇怪结果）。

以下代码不会打印`myMethod java.lang.Object`：

```
import java.lang.reflect.Method;

public class FooImpl implements Foo<String> {
    public void myMethod(String arg) {
    }

    public static void main(String[] args) throws Exception {
        Class cls = FooImpl.class;
        for (Method method : cls.getMethods()) {
            if (!method.isBridge()) {
                System.out.print(method.getName() + "\t");

                for (Class paramCls : method.getParameterTypes()) {

                    System.out.print(paramCls.getName() + ",");

                }
            }
            System.out.println();
        }
    }
}

interface Foo<T> {
    public void myMethod(T arg);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:45:37.823

```
try {
        for (Method method : cls.getMethods()) {
    //these methods are called bridge methods       
            if(!method.isBridge()){
                System.out.print(method.getName() + "\t");
                for(Class paramCls : method.getParameterTypes()){
                    System.out.print(paramCls.getName() + ",");
                }
                System.out.println();
            }
        }
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
    } 
```

**更新：** [桥接方法](http://stas-blogspot.blogspot.in/2010/03/java-bridge-methods-explained.html)

引用博客：

> Java 中的桥接方法是合成方法，它是实现某些 Java 语言特性所必需的。最著名的示例是协变返回类型和泛型中的一种情况，即擦除基本方法的参数与调用的实际方法不同。

**从上面的博客**更新代码：****

 **```
public class SampleTwo {
    public static class A<T> {
        public T getT(T args) {
            return args;
        }
    }

    public static class B extends A<String> {
        public String getT(String args) {
            return args;
        }
    }
} 
```

编译代码将如下所示：

```
public SampleThree$B();
...
public java.lang.String getT(java.lang.String);
Code:
0:   aload_1
1:   areturn

public java.lang.Object getT(java.lang.Object);
Code:
0:   aload_0
1:   aload_1
2:   checkcast       #2; //class java/lang/String
5:   invokevirtual   #3; //Method getT:(Ljava/lang/String;)Ljava/lang/String;
8:   areturn
} 
```

> 桥方法，它覆盖基类“A”中的方法，不仅调用带有字符串参数的方法（#3），还执行类型转换为“java.lang.String”（#2）。这意味着，如果您执行以下代码，忽略编译器的“未检查”警告，结果将是从桥方法抛出的 ClassCastException：

```
A a = new B();
a.getT(new Object())); 
```**

# android - 如何以编程方式设置按钮位置？

> ID：15268768
> 
> 赞同：0
> 
> 时间：2013-03-07T10:31:28.067
> 
> 标签：android

在我的代码中，我以编程方式创建按钮 2 如何以编程方式将位置设置为屏幕中心？这是我的屏幕图像[https://imgur.com/7wdyVc6](https://imgur.com/7wdyVc6) 提交按钮（button2）是在 forloop 按钮下方创建的 如何将位置设置为屏幕中心？

```
 ScrollView scroll = new ScrollView(MainActivity1.this);
    scroll.setLayoutParams(new  
      LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,  
        LayoutParams.WRAP_CONTENT));         

    btnLO = new LinearLayout(MainActivity1.this);   
    LinearLayout.LayoutParams paramsLO = new  
      LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    // button margins
    paramsLO.setMargins(0, 0, 0, 0);
    // button height/width *pixels*
    paramsLO.height = 75;
    paramsLO.width = 75;

    btnLO.setOrientation(LinearLayout.VERTICAL);
    btnLO.setBackgroundColor(5); // not working correctly

    //buttons
    for (i = 0;i < reqdata.length;i++)
    {
        LinearLayout li=new LinearLayout(this);
        li.setOrientation(LinearLayout.HORIZONTAL);
        final Button b1 = new Button(MainActivity1.this);
        final ImageView imageView = new ImageView(MainActivity1.this);

        li.addView(b1, paramsLO);        
        li.addView(imageView, paramsLO);
        btnLO.addView(li);

        b1.setText(reqdata[i].getSpinnerText());

        b1.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v) 
            {
                imageView1 = imageView;
                Intent pictureActionIntent = new
                  Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

                pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new  
                File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

                startActivityForResult(pictureActionIntent,CAMERA_PICTURE);
                b1.setClickable(false);
            }   
        });
    }

    final Button b2 = new Button(MainActivity1.this);
    b2.setText("Submit");
    b2.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
            long visitID = dbConnector.saveVisit();

            for (i =0;i <reqdata.length;i++)
            {
                dbConnector.saveVisitDetail(listByte.get(i),visitID,Long.valueOf(reqdata[i]
                  .getValue()).longValue());
            }
        }
    }); 
    btnLO.addView(b2, paramsLO);
    btnLO.setGravity(Gravity.LEFT | Gravity.CENTER_HORIZONTAL);
    scroll.addView(btnLO);

    this.addContentView(scroll, new LayoutParams());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:11:27.360

一种可能的方法是将用作基本布局，并使用用于设置布局参数`RelativeLayout`的类将所有其他子视图添加到此布局。`RelativeLayout.LayoutParams`

`RelativeLayout.Layoutparams.left`和属性可以是基础视图上的`RelativeLayout.Layoutparams.top`(x,y) 坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:10:20.997

在您的活动 xml 中，将以下内容复制粘贴到所需的按钮组件中：

```
android:layout_marginBottom="147dp"
android:layout_marginTop="50dp"
android:layout_marginleft="50dp"
android:layout_marginRight="47dp" 
```

只玩数字，我相信你会掌握它的:)

# c# - 折叠时不加载自定义控件

> ID：15268773
> 
> 赞同：0
> 
> 时间：2013-03-07T10:32:02.993
> 
> 标签：c#, xaml, custom-controls, windows-phone-8

我正在写 Windows Phone 8 应用程序，它必须加载一个 EPG 列表。为此，我使用了一个列表框和一个数据模板。

```
<DataTemplate x:Key="FooDataTemplate">
    <Button Margin="0,10,0,0" Style="{Binding Source={StaticResource ButtonNoMarginStyle}}" BorderThickness="0" Width="375" Height="105" Command="{Binding ElementName=pageRoot,Path=ViewModel.NavigateToDetailsCommand}" CommandParameter="{Binding Id}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="195"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="25"/>
                </Grid.RowDefinitions>
                <controls:ImageControl ImageUri="{Binding Image}" Grid.RowSpan="2"  Grid.Column="0" />
                <Image Grid.RowSpan="2" Source="{StaticResource SecondCaptionImage}" Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Right" Stretch="None"/>
                <Grid Grid.Row="1" Visibility="{Binding IsCurrentEpg, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="10"/>
                    </Grid.ColumnDefinitions>
                    <Rectangle Fill="#cc3e567b" Grid.ColumnSpan="4"/>
                    <TextBlock Text="DIRECT" FontSize="12" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding Duration}" FontSize="12" Grid.Column="2" VerticalAlignment="Center"/>
                </Grid>
            </Grid>

            <Grid Grid.Column="1" VerticalAlignment="Top" Margin="10,-8,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <!--Title-->
                    <RowDefinition Height="auto"/>
                    <!--SubTitle-->
                    <RowDefinition Height="auto"/>
                    <!--Hours-->
                    <RowDefinition Height="auto"/>
                    <!--Progress bar if needed-->
                </Grid.RowDefinitions>
                <TextBlock TextTrimming="WordEllipsis" Text="{Binding Title, Converter={StaticResource CaseStringConverter}, ConverterParameter=Upper}"/>
                <TextBlock Grid.Row="1" TextTrimming="WordEllipsis" Text="{Binding Subtitle, Converter={StaticResource CaseStringConverter}, ConverterParameter=Upper}"/>
                <TextBlock Grid.Row="2" Text="{Binding DurationTitle}"/>
                <Grid Margin="-4,0,0,0" Grid.Row="3" Visibility="{Binding IsCurrentEpg, Converter={StaticResource BooleanToVisibilityConverter}}" >
                    <controls:EpgProgressBar Visibility="{Binding IsCurrentEpg, Converter={StaticResource BooleanToVisibilityConverter}}"  Loaded="SecondProgressBarLoaded" IsEnabled="{Binding IsCurrentEpg}"  CurrentEpg="{Binding}"  Width="375" HorizontalAlignment="Left" />
                </Grid>

            </Grid>
        </Grid>
    </Button>
</DataTemplate> 
```

如您所见，我使用了一个 EpgProgressBar，并且仅当它是当前 epg 时才显示它。视图设置正确，我只得到当前 epg 的进度条。但是，我可以在输出中看到每个按钮都有一个进度条。

如果该控件被折叠或隐藏，有没有办法不加载自定义控件（在我的情况下是进度条）？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:45:15.673

IIRC，无论其状态如何，都将创建/加载实际放置在视图上的控件。所以，直接，不，没有办法。

但是，您可以通过定位不是“可见性”而是“将其放置在视图上”本身来实现效果。

不要在启动时初始化和预先放置所有内容，也不要根据各种状态更改来更改 Visibility。这给你留下了大量的 ui 元素，其中大部分是隐藏的。

相反，留下漏洞。将那些通常隐藏的元素替换为占位符，即 ContentControl 或 ContentPresenter，然后为这些占位符准备样式/模板：至少一个具有您想要的适当内容（即进度条）和可选的第二个（带有按钮“clickme”）。您不需要一个“空的”来使占位符为空。最后，任何时候你想切换内容的“可见性”——切换占位符的`Content`属性来激活 viewtemplate#1 或 viewtemplate#2，或者`null`将占位符留空。

我有时喜欢称它们为微视图，以区别于构建整个应用程序的“大”视图，但实际上，这几乎是相同的机制，实际上是 WPF 内容显示的核心。

净效应至少是：

*   如果不需要（content=null），则不加载任何内容（轻量级占位符除外）
*   需要时（content=myprogressbardata），显示正确的内容（mytemplate_with_progressbar）
*   您可以使用新的内容类型轻松扩展视图结构（只需设置不同的内容类型 -> 让不同的微视图类型可见）
*   样式和模板可以通过多种方式打开和关闭；它们可以绑定到数据类型，可以通过触发器设置，可以从上层样式继承，(...)

缺点：

*   实际的微视图是模板的形式。这使得数据/事件/命令绑定更难，但仍然可能，仍然通过 XAML 手段

# fabricjs - 因为您只能更改加载图像的一部分？

> ID：15268785
> 
> 赞同：0
> 
> 时间：2013-03-07T10:32:53.600
> 
> 标签：fabricjs

因为您只能更改加载图像的一部分？变换、移动或删除...

# node.js - Node.js - 使用 mocha 测试 express 应用程序时出现“错误：连接 ECONNREFUSED”

> ID：15268788
> 
> 赞同：9
> 
> 时间：2013-03-07T10:32:59.237
> 
> 标签：node.js, testing, express, mocha.js

首先，我没有监听 80 或 8080 端口。我正在监听 1337 端口。

我使用 express 创建了一个简单的 HTTP 服务器。这是启动服务器的*app.js*脚本。

```
require('./lib/server').listen(1337) 
```

服务器脚本位于`lib/server.js`文件中，因为相同的脚本也将用于测试脚本。

```
var http = require('http')
,   express = require('express')
,   app = express()

app.get('/john', function(req, res){
    res.send('Hello John!')
})

app.get('/sam', function(req, res){
    res.send('Hello Sam!')
})

module.exports = http.createServer(app) 
```

最后是`test/test.js`：

```
var server = require('../lib/server')
,   http = require('http')
,   assert = require('assert')

describe('Hello world', function(){

    before(function(done){
        server.listen(1337).on('listening', done)
    })

    after(function(){
        server.close()
    })

    it('Status code of /john should be 200', function(done){
        http.get('/john', function(res){
            assert(200, res.statusCode)
            done()
        })
    })

    it('Status code of /sam should be 200', function(done){
        http.get('/sam', function(res){
            assert(200, res.statusCode)
            done()
        })
    })

    it('/xxx should not exists', function(done){
        http.get('/xxx', function(res){
            assert(404, res.statusCode)
            done()
        })
    })

}) 
```

但我得到一个 3/3 的错误：

```
Hello world
1) Status code of /john should be 200
2) Status code of /sam should be 200
3) /xxx should not exists

✖ 3 of 3 tests failed:

1) Hello world Status code of /john should be 200:
 Error: connect ECONNREFUSED
  at errnoException (net.js:770:11)
  at Object.afterConnect [as oncomplete] (net.js:761:19)

2) Hello world Status code of /sam should be 200:
 Error: connect ECONNREFUSED
  at errnoException (net.js:770:11)
  at Object.afterConnect [as oncomplete] (net.js:761:19)

3) Hello world /xxx should not exists:
 Error: connect ECONNREFUSED
  at errnoException (net.js:770:11)
  at Object.afterConnect [as oncomplete] (net.js:761:19) 
```

我真的不明白为什么会这样，因为我的测试脚本看起来很合乎逻辑。我运行服务器并`node app.js`手动测试，效果很好！`localhost:1337/john``localhost:1337/sam`

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T10:59:59.587

为了`http.get()`工作，您需要将资源的完整路径分配为第一个参数：

```
http.get('http://localhost:1337/john', function(res){
    assert(200, res.statusCode)
    done()
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T10:50:17.917

```
http.get({path: '/john', port: 1337}, function(res){
    //...
}); 
```

应该管用。如果未指定其他内容，http.get 假定端口为 80。

# php - PHP 如何使用 SELECT 和 POST

> ID：15268789
> 
> 赞同：1
> 
> 时间：2013-03-07T10:33:02.043
> 
> 标签：php, html, select, post

```
<form action="seach_simple.php" method="POST" >
      <h4>
      <table width="800" border="1" >
          <tr>
            <th scope="col">Наименование</th>
            <th scope="col">Отношение</th>
            <th scope="col" style="width:160px;">Величина</th>
          </tr>

          <tr><p><td><i>Номер чертежа</i></td> 

            <td>
                 <select id="ratio_NC" name="ratio_NC">
                        <option value="=" selected="selected">=</option>
                        <option value="!=">!=</option> 
                        <option value="<">&lt;</option>
                        <option value=">">&gt;</option>
                        <option value="<=">&lt;=</option>
                        <option value=">=">&gt;=</option>
                     </select>
                     <td><input type="text" name="NC"  /></td>
                 </p>
                  </tr></td>
      </table></h4>
      <p><input type="submit" value="Generate SQL" /></p>
    </form> 
```

和 PHP

```
$code_NC = $_POST['NC'];
$ratio_NC = $_POST['ratio_NC'];
echo "$code_NC";
echo "$ratio_NC"; 
```

问题是我从“INPUT”中得到了值，而“SELECT”中什么也没得到，不知道该怎么做。会很高兴得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:34:32.177

您还需要对值字段中的值进行 HTML 编码。

`>`变成`&gt;`，`<`变成`&lt;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:43:24.220

对我来说工作得很好。我已经在 Mozilla FireFox 上测试过这是我尝试过的代码。请试试这个

```
<?php
$code_NC = $_POST['NC'];
$ratio_NC = $_POST['ratio_NC'];
echo $code_NC;
echo $ratio_NC;
?>
<html>
    <head>
    <title></title>
    </head>
    <body>
<form action="" method="POST" >
      <h4>
      <table width="800" border="1" >
          <tr>
            <th scope="col">Наименование</th>
            <th scope="col">Отношение</th>
            <th scope="col" style="width:160px;">Величина</th>
          </tr>

          <tr><p><td><i>Номер чертежа</i></td> 

            <td>
                 <select id="ratio_NC" name="ratio_NC">
                        <option value="=" selected="selected">=</option>
                        <option value="!=">!=</option> 
                        <option value="<">&lt;</option>
                        <option value=">">&gt;</option>
                        <option value="<=">&lt;=</option>
                        <option value=">=">&gt;=</option>
                     </select>
                     </td>
                     <td><input type="text" name="NC"  /></td>
                 </p>
                  </tr>
      </table></h4>
      <p><input type="submit" value="Generate SQL" /></p>
    </form>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:37:12.857

用这个：

```
$ratio_NC = htmlentities($_POST['ratio_NC']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:38:41.030

用户 htmlentities 像

```
$ratio_NC = htmlentities($_POST['ratio_NC']); 
```

因为我认为您使用的 html 实体在发布时是矛盾的，我认为它不是 utf-8 数据之类的问题

# iphone - UIView 中同一视图上同时显示两个动画

> ID：15268790
> 
> 赞同：0
> 
> 时间：2013-03-07T10:33:02.870
> 
> 标签：iphone, animation, uiview

我有一个`UIImageView`，我想对其应用**两个不同的动画**，并同时运行它们。第一个动画将**不透明度**从 0 设置为 1，第二个动画**将**UIView 从一个点移动到另一个点。当 UIView 确实加载时，两个动画一起开始。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:38:06.563

试试这个

```
CGPoint movePoint = Your end animation point;
yourView.opaque = 0.0f;
[UIView animateWithDuration:2.0
        animations:^{ 
            yourView.center = movePoint;
           yourview.opaque = 1.0

        } 
        completion:^(BOOL finished){

           //Animation completed

        }]; 
```

# java - 如何更新集合中另一个集合中的元素？

> ID：15268792
> 
> 赞同：1
> 
> 时间：2013-03-07T10:33:06.907
> 
> 标签：java

我有两个类如下：

```
public class State {
    private static long count = 0;
    private long StateNo;
    private Set<Arc> arcs;
}

public class Arc {
    private char charecter;
    private State destState;
    private Set<String> letters;
} 
```

现在 Class Lexicon 有一组状态，每个状态又都有一组弧。我的问题是如何更新集合状态中特定状态的弧集中的特定弧？（更新意味着我需要在该弧中的字母集中添加一个字母。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:37:31.437

您有一组可变对象。

需要注意的一个问题是，如果更改`Arc.letters`会影响 的结果`Arc.equals()`，则在使用 时必须小心`Set<Arc>`。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)中：

> 注意：如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自身作为元素。

特别是，这意味着您必须从 中删除元素`State.arcs`，对其进行修改，然后将其重新插入`State.arcs`。

从您的问题来看，您最好制作`arcs`a`Map`而不是 a `Set`。一方面，您可以通过键查找内容，这是您目前无法做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:35:27.813

`Set`不是直接访问集合。

我认为你最好使用`HashMap`而不是那些`set`你可以直接按键获取对象的s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:50:29.393

你的意思是这样的吗？

```
public class Lexicon {
    class State {
        public long count = 0;
        public long stateNo;
        public Set<Arc> arcs;
    }

    class Arc {
        public char character;
        public State destState;
        public Set<String> letters;
    }

    Set<State> states = new HashSet<State>();

    public void update(long stateNo, char character, String letter) {
        for (State state : states) {
            if(state.stateNo == stateNo) {
                for (Arc arc : state.arcs) {
                    if (arc.character == character) {
                        arc.letters.add(letter);
                        break;
                    }
                }
                break;
            }
        }
    }
} 
```

如果是这样，您最好使用地图集合重写它：

```
public class Lexicon {
    class State {
        public long count = 0;
        public long stateNo;
        public Map<Character, Arc> arcs;

        public void updateArc(char character, String letter) {
            Arc arc = arcs.get(character);
            if (arc != null) {
                arc.letters.add(letter);
            }
        }
    }

    class Arc {
        public char character;
        public State destState;
        public Set<String> letters;
    }

    Map<Long, State> states = new HashMap<Long, State>();

    public void update(long stateNo, char character, String letter) {
        State state = states.get(stateNo);
        if (state != null) {
            state.updateArc(character, letter);
        }
    }
} 
```

Of course this is draft only and you heave to initialize all collections. Also all fields are declared as public only for clarity of example.

# joomla - Joomla 1.0 到 2.5 升级，可以吗？

> ID：15268795
> 
> 赞同：0
> 
> 时间：2013-03-07T10:33:18.077
> 
> 标签：joomla, joomla2.5

Joomla 1.0 到 2.5 升级，可以吗？我需要将我非常旧版本的 Joomla 站点更新到较新版本，但我没有找到任何与此问题相关的文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:34:00.817

您必须先迁移到 1.5，然后再迁移到 2.5

首先按照[Migrating_from_1.0.x_to_1.5_Stable](http://docs.joomla.org/Migrating_from_1.0.x_to_1.5_Stable)中的步骤升级到 1.5 版本，然后按照[Migrating_from_Joomla_1.5_to_Joomla_2.5中的步骤进行](http://docs.joomla.org/Migrating_from_Joomla_1.5_to_Joomla_2.5)

过程不简单，有失败的可能，在这种情况下，你必须手动排除发生了什么，所以**不要**在现场测试，而是在副本上进行测试，并**始终备份**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T06:55:03.517

根据站点的大小和复杂性，在 2.5 中简单地重建站点很可能会更容易。您不太可能将您在 1.0.x 中使用的扩展升级到 1.5，更不用说 2.5，而且模板肯定也必须彻底检修。除非该站点有数百个页面，否则只需在全新安装时重新构建它，就可以省去头疼的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T06:20:06.753

是的，可以迁移到 joomla 2.5，但这不仅仅是一键升级过程。这真是一项复杂的任务。由于 1.0 平台不是为无缝集成到后续平台而构建的，因此需要执行额外的步骤和流程。其中一些步骤（例如备份现有数据和弥合功能差距）可能很困难。

# emacs - 如何在 Emacs 中跳转到标记

> ID：15268796
> 
> 赞同：8
> 
> 时间：2013-03-07T10:33:25.310
> 
> 标签：emacs, elisp

我需要使用什么变量或函数来跳转到使用的标记集的`set-mark-command` `C-SPC`位置`goto-char`？

```
(defun jump-to-mark ()
  (interactive)
  (goto-char <WHAT PUT HERE>)) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T13:39:15.327

命令（`exchange-point-and-mark`绑定到`C-x``C-x`）跳转到标记，并将当前位置（*即*在跳转之前）放在标记环的顶部。

副作用是该区域被激活。您可以传递前缀参数（即 press `C-u``C-x``C-x`）来避免这种情况。

* * *

如其他答案所述，在标记环中导航的另一种方法是使用`C-u``C-SPC`，它跳转到标记并将其从标记环中删除。因此，重复该命令可让您按时间倒序浏览所有连续的标记位置。但是，以这种方式访问​​的标记位置会丢失。

`C-u``C-SPC`is的兄弟`C-x``C-SPC`，它非常相似，但作用于*全局*标记环，它将连续标记存储*在所有缓冲区*中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T10:34:55.463

我刚刚发现`mark-marker`我的跳转功能应该是：

```
(defun jump-to-mark ()
  (interactive)
  (goto-char (mark-marker))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T12:43:21.140

我想你正在寻找的是

> pop-global-mark 是 `simple.el' 中的一个交互式编译 Lisp 函数。
> 
> 它绑定到 Cx C-@、Cx C-SPC。
> 
> (pop-global-mark)
> 
> 弹出全局标记环并跳到顶部位置。

另一个选项是运行命令的 Cx Cx `exchange-point-and-mark`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T16:21:02.537

要与您的原始代码保持一致，您可以只放`(mark)`WHAT PUT HERE 而不是放在这里，它会起作用。这是因为`(mark)`返回标记的位置（就像`(point)`返回点的位置整数一样）。

```
(defun jump-to-mark ()
  (interactive)
  (goto-char (mark))) 
```

# c# - 匿名方法会消耗内存吗？

> ID：15268798
> 
> 赞同：1
> 
> 时间：2013-03-07T10:33:26.343
> 
> 标签：c#, delegates, anonymous-methods

[Anonymous Methods](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)、[Delegates](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)、[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)、[Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx)等是否在您的计算机上分配/消耗/吃内存？

如果是这样，他们是否在捕获的代码块上的每个变量上分配相同的内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:40:10.283

当然可以，就像任何其他正常功能一样。如果它们不被“存储”在内存中的某个地方，它们如何在运行时执行？

但是，如果您问他们是否在每次调用时消耗更多内存（如分配动态内存），那么不，他们不会自己这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:34:39.697

每件事都需要某种内存中的后备存储，是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:22:07.383

定义一个委托定义一个新类。所以这需要内存来存储关于类的信息（也在运行时）。

定义一个`Func`或`Action`具有特定泛型类型会在运行时定义（对您隐藏）一个新类。所以这也需要内存。

匿名方法被编译器制作成带有乱码名称的普通方法，并放入私有类中。然后，就像任何其他方法一样，它将在运行时需要内存来存储必须执行的代码。和其他类一样，该类将需要一些内存。

# c - C中未初始化的变量

> ID：15268799
> 
> 赞同：4
> 
> 时间：2013-03-07T10:33:27.147
> 
> 标签：c, variables, initialization, undefined-behavior

我有点困惑。据我所知，如果您在 C 中声明一个 int 而不初始化它，例如：`int x;`

所以它的价值是不确定的。因此，如果我们尝试使用它或应该有未定义的行为。

因此，如果我在 VS2010 中运行以下代码，它会使程序崩溃。

```
int main(){
    int a;
    printf("%d\n",a);
    return 0;
} 
```

现在让我们看看下一个代码，它没有提供任何警告并且**没有崩溃**（为什么？）

```
void foo(int *var_handle){
    // do nothing
}

int main(){
    int a;
    foo(&a);
    printf("%d\n",a); // works, prints some big value
    return 0;
} 
```

你能解释一下这种行为吗？我们只添加了对一个什么都不做的函数的调用，但现在程序不会崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T10:36:04.960

~~读取未初始化变量的值会导致未定义的行为。~~未定义的行为意味着它**可能会**崩溃。这并不意味着它**会**或它**必须**崩溃。

未初始化的变量具有未指定的值——只是不知道它的值是什么。所以在实践中，任何合理的实现，这种代码可能永远不会崩溃。有一个有效的内存地址支持变量，它有一些垃圾内容，`printf()`没有问题地读取它，将它解释为整数并打印它，仅此而已。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T12:27:10.150

使用未初始化的值不会直接导致未定义的行为。

根据 C 2011（n1570 草案）6.7.9 10，具有自动存储持续时间的未初始化对象具有不确定的值。根据 3.19.2 1，不确定值是未指定的值或陷阱表示。类似的文字出现在 C 1999 中。

如果对象具有陷阱表示，则可能会发生未定义的行为。但是，如果对象具有未指定的值，则程序必须在对象具有某个确定值的情况下执行；它只是没有指定对象具有哪个值。程序不允许仅仅因为未指定值而崩溃。

令人惊讶的是，您在 Visual Studio 2010 中报告了显示崩溃的简单程序，因为我不希望该`int`类型在 Visual Studio 2010 中具有任何陷阱表示。可能是某些与您预期不同的源文件被编译并崩溃或您已在 Visual Studio 2010 中启用了尝试跟踪未初始化对象的特殊调试功能（但在您使用的第二种情况下失败`foo`）。

我建议您从头开始重复测试，将您在此问题中显示的代码粘贴到一个新文件中，并使用默认选项编译该新文件。

当然，Visual Studio 2010 不符合 C 标准，甚至不符合 1999 年的旧标准，因此不必遵守上述条款。实际上，关于 Visual Studio 2010 的一切都是关于 C 标准的未定义行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:35:25.307

这是**未定义的行为**，这意味着**任何事情都可能发生。**从字面上看任何东西。只是没有定义行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T12:10:51.233

你可以试试这个。我不知道它是否是严格未定义的行为，但我想不出一种方法让编译器以未定义的方式实际运行并且仍然符合 C 标准，至少如果`foo`在不同的编译单元中（~源文件），因为那时编译器不知道它会被允许产生未定义的行为；）。

```
void foo(int *var_handle){
    // do something to var_handle, or maybe nothing, who knows
}

int main(){
    int a[1];
    foo(a);
    printf("%d\n", a[0]);
    return 0;
} 
```

编辑：进一步的想法：

我相当确定使用函数来初始化未初始化的局部变量是可以的，方法是向函数提供指向局部变量的非常量指针。因此，就编译器而言，仅获取局部变量的地址就使其具有未定义值的定义变量。编译器无法知道函数是否实际设置了值（函数可能在库中）。

但这只是解释了为什么它避免了崩溃。仍然可能是，如果允许内联函数并且什么都不做，则允许优化器删除调用，然后还删除未初始化局部变量的获取地址，从而使其仍处于“未定义行为”状态。您可以通过打开优化并从程序集输出进行验证来*为您的编译器*`foo`测试这一点，该调用被内联（不产生代码），然后查看 printf 是否崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T10:36:14.030

无法保证使用未初始化的变量会导致程序崩溃——这取决于为变量分配的内存位置中碰巧有哪些垃圾数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-12T20:46:29.897

On an x86 or x86-64, premature optimization prevent the load of value from the variable:

```
int b;
b -= b; // b = eax - b, not 0

int c;
c ^= c; // c = eax - c, not 0

// eax, whatever happens to be the value in the eax register.
// rax for 64-bit, eax for 32-bit and less using bit mask,
// ax for int is 16 bit compilers. 
```

Undefined behavior could mean anything. For uninitialized variable, it would behave as its type, but the value is unknown and cannot be verified. An uninitialized variable automatically take the value in the "accumulator" (integral: eax, rax; floating point/simd: xmm0, ymm0, zmm0, etc.) and not load it from random access memory (or cache) unless it is volatile. You can initialize the variable by assigning a value to it, given the non-lvalue does not use an uninitialized variable.

# php - 迁移后无法访问wordpress登录页面

> ID：15268801
> 
> 赞同：1
> 
> 时间：2013-03-07T10:33:34.483
> 
> 标签：php, mysql, wordpress

我刚刚将一个 wordpress 网站从本地主机移动到我的在线服务器。我更改了主页 url 和站点 url 以及所有内容。该网站运行良好。我可以看到帖子，页面所有内容。我也可以看到图像。

管理面板只有一个问题。当我进入登录页面 url： [http](http://www.mysiteurl.com/wp/wp-login.php) ://www.mysiteurl.com/wp/wp-login.php时，它会将我重定向到 [http://www.mysiteurl.com/wp/login/?redirect=http:/ /www.mysiteurl.com](http://www.mysiteurl.com/wp/login/?redirect=http://www.mysiteurl.com)

这现在也发生在我的本地主机上。我已经登录到我的本地主机，所以我可以访问管理面板，但我也无法注销。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:38:20.203

也许尝试检查项目根目录中的 .htaccess 文件。

您还可以打开数据库导出（sql 文件）并搜索 URL 以找到有问题的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T12:04:51.557

请在 .sql 文件中更改您的网址

1.  将您的数据库导出为 .sql 格式。
2.  打开您的数据库文件记事本并搜索您的旧网址并替换为新网址。
3.  将此数据库导入您的新数据库。

    **另一种方式**

请将您的 .htaccess 文件重命名为 .htaccess_old

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T17:57:12.247

我遇到了同样的问题，首先将其放在 wp-config 文件的底部以强制 url 位置：

`define('WP_HOME','yourSiteUrlHere'); define('WP_SITEURL','yourSiteUrlHere');`

唯一对我有用的是使用“emergency.php”脚本。它迫使 W​​P 让您进入。请访问此处了解有关制作脚本的更多信息： [http ://codex.wordpress.org/User:MichaelH/Orphaned_Plugins_needing_Adoption/Emergency](http://codex.wordpress.org/User:MichaelH/Orphaned_Plugins_needing_Adoption/Emergency)

# java - 使用 Java 的笔记本电脑之间基于 MAC 的通信

> ID：15268804
> 
> 赞同：1
> 
> 时间：2013-03-07T10:33:42.510
> 
> 标签：java, networking, network-protocols

问候各位程序员，

这将是一个很长的问题，所以请耐心等待。

我在大学做一个项目，我的部分主要集中在笔记本电脑之间通过无线局域网的通信。我使用的语言是 Java。这种通信不应要求任何笔记本电脑直接连接另一台笔记本电脑。因此，假设我在一台计算机上创建了一个访问点，其他人不应直接连接到它并获取 IP 地址，然后只需通过 IP 套接字进行连接。

因此，剩下的选择是通过 MAC 地址进行连接。到目前为止，我想到的是通过 wlan 适配器中继，例如，我的 MAC 地址、IP 地址。从我以前的网络课程中，我想到将这些信息发送到 MAC 地址的广播通道，以便任何打开 wlan 的笔记本电脑都能得到它。然后，如果我将这些信息保存在数据库中，每当我需要时，我可以从数据库中提取 MAC 地址和 IP 地址，将我想要发送的信息中继到特定的 MAC 地址而不是广播地址（因此只有特定的 MAC 地址可以得到它并且覆盖区域内的其他机器无法得到它）。

我认为，这种在计算机之间进行通信的方式将被证明是非常有用的，我们根本不需要任何套接字编程。顺便说一句，在程序中，安全性不是问题，因此 MAC 地址、IP 地址等的直接中继不被视为问题。在过去的两周里，我对这个概念进行了很多研究，但我一点也不成功。到目前为止，我所读到的是，Java 无法在网络中的第 3 层以下工作。但是，到目前为止，有一些外部库可以帮助 Java 与第 2 层一起工作，但我无法以某种方式使它们在我的计算机中工作。我的老师建议我创建自己的小协议，但到目前为止我不知道如何命令 wlan 适配器发送广播消息。

我的问题是，

（1）实际上有没有一种方法可以命令 wlan 适配器将特定消息发送到 Java 中的特定 MAC 地址，例如 ARP。

(2) 是否有任何有用的 Java 库可以帮助解决这些问题？例如，创建自定义 ARP 数据包（包含我想在其中发送的信息）或类似的东西，这可能会给我在第 2 层网络中的优势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:18:10.370

直接使用 2 级网络没有任何好处，人们为使 IP 工作得非常好付出了很多努力。使用第 2 层的一些缺点是您需要是 root 并且它是不可移植的。在 Java 中也不能直接实现，您需要编写/使用用 C 编写的扩展。

如果要向单台机器发送消息，请将 UDP 数据包发送到其 IP 地址。如果您想向多台机器（全部或某些子组）发送消息，则将 UDP 数据包发送到多播组并让接收机器加入该组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:05:20.240

我不完全明白你在做什么。默认情况下启用 ARP（您可以使用 ifconfig 命令禁用它），您可以使用像 SIOCGARP 之类的 ioctl 读取和写入内核的 ARP 表来读取 ARP 表并在必要时发送 ARP，以及 SIOCSARP 设置 ARP 表条目（当然，Java 不能直接使用它，您需要 JNI 或更简单的本地库，如 JNA 或 Bridj）。

如果您确实需要创建自己的以太网/IP/ARP/其他低级网络数据包，请查看[https://code.google.com/p/netutils/](https://code.google.com/p/netutils/)

# javascript - 使用 HTML5 功能实现“最近打开的文件”功能

> ID：15268808
> 
> 赞同：0
> 
> 时间：2013-03-07T10:33:58.327
> 
> 标签：javascript, html, local-storage, indexeddb, fileapi

我计划在我的 web 应用程序中实现“最近打开的文件”功能，并且我正在尝试决定使用哪些 HTML5 技术。这里最重要的是一个事实，我不能只将文件路径保存到文件然后重新打开它。由于安全原因，读取文件必须由用户操作（从输入中选择文件或拖放文件）启动。所以唯一的选择是将整个文件保存在缓存中。这是我的选择：

**A. 本地存储**

1.  像这样存储 JSON 对象：

    ```
    {
        "recent": [
            {}, {},..., {}
        ]
    } 
    ```

    其中每个`{}`都是一个 JSON 文件描述符，如下所示：

    ```
    {
        "filename": "blah",
        "type" : "txt",
        "chunks": ['"3bce4931-6c75-41ab-afe0-2ec108a30860"',...]
    } 
    ```

    其中每个块是本地存储中 lzw 编码数据块的键。每个块都是来自 blobfile 的数据，在读取文件时获得。

    *我知道*，localstorage 只能存储字符串，不能存储 JSON，但序列化很容易。这种方法的问题是本地存储和同步 API 的大小有限，这会在从文件中读取大量数据时减慢整个应用程序的速度。

**B. 索引数据库**

我刚开始阅读有关此 HTML5 功能的信息，但显然它具有异步 API 并且能够存储整个 fileBlob 对象。我不知道尺寸限制。不幸的是，浏览器支持非常有限，API 似乎很糟糕。

**问题是：**

我找不到使用任何一种技术的 Rcenty Opened Files 的任何实现。你有？任何建议，已知的陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:42:10.807

我认为您的 JSON/LocalStorage 方法是一个很好的解决方案。您可以轻松地将数据用作临时 JS 对象并在每次修改时覆盖本地存储条目（我在移动应用程序中经常使用它）。

您还可以查看 JS MVC 框架以优化您的工作 [http://backbonejs.org/docs/backbone-localstorage.html](http://backbonejs.org/docs/backbone-localstorage.html)

提示：不要使用 webSQL (lite) DB，因为 W3C 不再支持它。

# c# - WM6.5 锁屏关闭 GPS 服务

> ID：15268811
> 
> 赞同：0
> 
> 时间：2013-03-07T10:34:00.213
> 
> 标签：c#, gps, locking, windows-mobile, background-process

我正在为 WM6.5 开发一个 GPS 跟踪器，它可以接收 GPS 坐标并将其发送到。一切正常，但是当屏幕锁定时我有一个问题：数据包正在发送但 GPS 不起作用（它显示相同的位置）但是当我唤醒手机时，GPS 又开始工作了。

如何在屏幕锁定时保持 GPS 服务运行？我正在使用 HTC Touch 2 进行测试，我的解决方案是用 C# 编写的。对于 GPS，我使用的是**Microsoft.WindowsMo** ​​bile.Samples.Location 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:11:11.073

这可能是因为设备将要休眠。如果它保持清醒状态，电池将很快耗尽。移动设备被设计为几乎立即进入类似休眠状态，以便它们在充电时持续更长时间。

如果电池寿命无关紧要，您可以进入电源设置并告诉它永远不要关闭。但是，如果您的电池耗尽，您可能会遇到设备损坏的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:01:15.893

Windows Mobile 设备知道不同的电源状态。请参阅 HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Power...

应用程序可以使用 SetPowerRequirement API 调用请求特定的最低电源状态：http: [//msdn.microsoft.com/en-us/library/ms920689.aspx](http://msdn.microsoft.com/en-us/library/ms920689.aspx)。除了指定哪个设备不应低于电源要求之外，您还可以指定应用程序的一般要求：[http ://www.hjgode.de/wp/2009/07/14/howto-run-an-application-定期/#more-193](http://www.hjgode.de/wp/2009/07/14/howto-run-an-application-periodically/#more-193)使用 SetPowerRequirement 和 SetSystemPowerState。

如果您想避免设备进入休眠模式，我建议使用 SetSystemPowerState。如果您知道 GPS 端口和 GUID，还可以将 SetPowerRequirement 与设备名称一起使用。

我没有更改 Control\Power 分支以更改设备在命名电源状态下的行为的经验。

您可以尝试 SetSystemPowerState 和 Power_State_Unattended 或让用户选择“保持设备开启”。

# objective-c - 尝试使用 CGPathRef 时需要桥接，警告不一致

> ID：15268815
> 
> 赞同：5
> 
> 时间：2013-03-07T10:34:07.853
> 
> 标签：objective-c, automatic-ref-counting

我只是`CABasicAnimation`为 shadowPath 配置了一个属性，这让我很好奇：

```
shadowAnimation.toValue = (id)newShadowPath.CGPath; 
```

*[注：shadowAnimation 是一个`CABasicAnimation`对象，`newShadowPath`是一个`UIBezierPath`对象]*

这行得通，并且在 Xcode 中看不到任何错误/警告。但是，如果我这样写：

```
CGPathRef test = newShadowPath.CGPath;
shadowAnimation.toValue = (id)test; 
```

这不会编译，抛出这个警告信息：

```
Cast of C pointer type 'CGPathRef' (aka 'const struct CGPath *') to Objective-C pointer type 'id' requires a bridged cast 
```

所以它需要我这样输入：

```
shadowAnimation.toValue = (__bridge id)test; 
```

为什么会这样？**当我仅使用(id)newShadowPath.CGPath**时，为什么在初始示例中没有出现相同的错误；? `__bridge`不管 Xcode 没有检测到任何问题，将 cast 也放在那里是否正确？还是我错过了这里的区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:06:28.693

这是由 ARC 引起的，以及它在分配发生时的魔力。

当您创建一个临时变量`CGPathRef test`并将其分配给它时，ARC 会看到您正在使用一个 CoreBlank 实例，该实例不遵循标准内存范例并且不保留它或做任何花哨的事情。

后来，当你尝试将这个非托管实例分配给一个保留类型的`id`属性时，LLVM 会吓坏，因为它认为它不必为那个实例管理内存，但现在它应该开始（这是`__bridge`关键字的意图）。

在第一个代码片段中，它起作用的原因是因为 ARC 总是知道它应该将该实例视为 ARC 管理的，并且永远不存在对它的引用而不是 ARC 管理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:12:32.053

造成差异的原因在于 clang 3.1 中引入的新的（并且有点复杂的）转换规则。

首先，让我们把它归结为：

```
@@interface Foo : NSObject
+ (CGPathRef)bar;
@end

CGPathRef foo();

void test()
{
    // works without bridged cast:
    id a = (id)[Foo bar];

    // needs bridged cast
    id b = (__bridge id)foo();
} 
```

因此，当转换消息的结果时，我们可以省略 brdge 转换，而普通函数调用需要它。这似乎很奇怪。

差异的原因在于 ARC 如何解释函数和方法名称，并得出关于所谓的[C 可保留指针类型](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#arc-misc-c-retainable)（核心基础对象）的保留计数的假设。

在ARC 指南的[第 3.3.2 节](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#conversion-to-retainable-object-pointer-type-of-expressions-with-known-semantics)（“转换为具有已知语义的表达式的可保留对象指针类型”）中，您会找到差异的原因：

> 如果表达式是C 可**保留**指针类型的右值并且它是 [...] 消息发送 [...]

和

> 如果**已知转换操作数未保留**[...]，则转换被视为 __bridge 转换

同一部分描述了为什么这不适用于 C 函数以及如何修饰它们以使 clang 能够做出类似的假设。所以我们可以修改上面的例子来去掉 C 函数调用的桥接：

```
CGPathRef foo() __attribute__((cf_returns_not_retained)); 
```

回答您的最后一个问题：在两个地方都使用桥架是安全的。它甚至确保 ARC 选择正确的`__bridge`演员表（它可以`__bridge_transfer`根据方法的名称来选择演员表。在这种情况下，它会使用`__bridge`，不过）。

# facebook - 如何使用带有图形 api 的 facebook 登录来获取用户的电子邮件和 fd id

> ID：15268817
> 
> 赞同：5
> 
> 时间：2013-03-07T10:34:11.517
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我第一次使用 facebook API。从那里的文档中我发现我们可以获取如下的名称 console.log(response.name); 但是我怎样才能获取电子邮件和 fbid 呢？

谢谢， 埃纳穆尔

```
<?php ?>
<div id="fb-root"></div>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'f', // App ID
      channelUrl : '//localhost/practices/phpTest/fblogin/login.php/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // connected
    } else if (response.status === 'not_authorized') {
        // not_authorized
      login();
    } else {
        // not_logged_in
      login();
    }
    });

    // Additional init code here

  };

  function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
          testAPI();
        } else {
            // cancelled
        }
    });
    }

  function testAPI() {

    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {

        console.log('Good to see you, ' + response.name + '.');
    });
  }

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<?php ?> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-03-09T19:16:00.637

除了在按钮中添加 scope="email" 之外，您还需要指定要返回的字段。

```
<fb:login-button scope="public_profile, email" onlogin="checkLoginState();" data-auto-logout-link="true" data-size="large"> 
```

```
function testAPI() {
    FB.api('/me', {fields: 'name, email'}, function(response) {
        console.log( response );
        console.log( response.email );
    });
} 
```

有关完整的代码结构，请查看[facebook 文档](https://developers.facebook.com/docs/facebook-login/web)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T11:39:54.063

访问名称的方式相同。IE

`response.email`和`response.id`

但要获取电子邮件地址，您必须有权访问它。

添加`scope="email"`到您的 FB 登录按钮。

[编辑]

```
function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
        testAPI();
        } else {
            // cancelled
        }
    }, { scope: 'email' });
    }

function testAPI() {

    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {

        console.log('Good to see you, ' + response.name + '.' + ' Email: ' + response.email + ' Facebook ID: ' + response.id);
    });
} 
```

这是一个适合初学者的好教程：[http ://www.loginworks.com/technical-blogs/404-working-with-facebook-javascript-sdk](http://www.loginworks.com/technical-blogs/404-working-with-facebook-javascript-sdk)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-02T09:40:27.247

如果其他人在检索用户电子邮件时遇到问题，请注意，当您的应用仍被列为“开发中”时，Facebook 将不允许您访问用户的电子邮件。在 Facebook 开发者仪表板中切换到“生产中”后，电子邮件应该可用。希望这对那里的人有所帮助，因为我今晚浪费了很多时间来努力检索用户的电子邮件。

电子邮件：“并非所有用户都可以使用，因为您的应用尚未上线”

[![在此处输入图像描述](../Images/d4c206ceabe6adc73404af64391c3259.png)](https://i.stack.imgur.com/oQOlf.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-27T07:38:04.133

将代码更改为以下

```
FB.api('/me', function(response) {
  console.log('Good to see you, ' + response.name + '.');
});

FB.api('/me?fields=name,email', function(response) {
  console.log('Good to see you, '+response.name + '---'+response.email);
}); 
```

# ajax - 使用 AJAX 按类别动态加载自定义帖子

> ID：15268821
> 
> 赞同：1
> 
> 时间：2013-03-07T10:34:18.087
> 
> 标签：ajax, wordpress, categories, custom-post-type

我正在这个网站上工作：

[http://www.bajo.co.uk/2012/](http://www.bajo.co.uk/2012/)

...在主页上显示玩具组合。玩具有不同的类别：婴儿、车辆、教育等。当用户单击侧边栏菜单“婴儿”时，所有“婴儿”类别的玩具的缩略图将列在右侧。

我目前通过使用以下自定义循环为每个类别使用不同的页面模板来进行此设置：

```
<!-- loop to show products list -->
<?php
    $args = array(
    'post_type' => 'products',
    'orderby' => 'title',
    'order' => 'DES',
    'posts_per_page' => 8,
    'paged' => get_query_var ('page'),
    'post_parent' => $parent,
    'category_name' => 'educational'
    ); 
?>

<?php query_posts($args); ?>

<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<li>
    <a href="<?php the_permalink() ?>" class="product_image">
        <?php echo get_post_meta($post->ID, 'ProductImage', true);?>
        <span class="overlay"></span>
    </a>
    <h3 class="product_tit"><a href="<?php the_permalink() ?>"><?php the_title();?></a></h3>                                
</li>   

<?php endwhile; ?>

<?php else :?>

<p>There are no products to display</p>

<?php endif; ?> 
```

尽管这可以正常工作，但每次用户从菜单中选择一个类别时，页面都会刷新。

我想用 AJAX 实现这一点，这样页面就不会刷新，并且产品（它们是自定义帖子类型）在保持分页的同时动态加载。

任何关于从哪里开始的指示都非常感谢。

我在用着：

*   WordPress 3.5.1
*   自定义帖子类型 UI 插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:17:36.170

我仍然没有评论的权利，所以我把我的评论放在这里作为答案，也许它会有所帮助。

对于这种情况，我的方法是创建一个 php 文件 file.php，我将通过像这个 file.php?p=infant 这样的参数来处理它（例如）

```
<?php

$p=$_GET['p']; 

require('../../../wp-load.php');

?>

                            <?php

                            $my_query = new WP_Query();
                            $my_query->query(array( 'post__in' => array($p)));

                            if ($my_query->have_posts()) : while ($my_query->have_posts()) : $my_query->the_post(); 

                               ?>
    <li>
    <a href="<?php the_permalink() ?>" class="product_image">
        <?php echo get_post_meta($post->ID, 'ProductImage', true);?>
        <span class="overlay"></span>
    </a>
    <h3 class="product_tit"><a href="<?php the_permalink() ?>"><?php the_title();?></a></h3>                                
</li>  
                                <?php
                            endwhile;
                            endif;

?> 
```

我将另外创建一个 javascript 函数来管理 ajax 调用，如下所示：

```
function f(str)
{

$.ajax({  
cache: true,  
   type: "GET",  
   timeout: 5000,   
   url: 'url/to/file.php?p='+str,  
   success: function(msg)  
    {  

                $('#the_div_containing_li').html(msg);

    },  
    error: function(msg)  
    {  

       alert("Your browser broke!");
            return false;
    }  
});

} 
```

请注意，您应该将您的 li（以及动态加载的内容放在一个 div 中，我称之为 the_div_ contains_li）。并单击您的锚点，调用 javascript 函数 f（此锚点的 id）。您当然可以通过 wordpress 循环为每个锚分配一个 id。

# sql - 将数据从 SQL 数据库检索到 VB.NET

> ID：15268826
> 
> 赞同：2
> 
> 时间：2013-03-07T10:34:31.227
> 
> 标签：sql, vb.net

谁能告诉我我在这里做错了什么？非常基本的 Visual Basic 经验水平。

我试图从提供的数据库中检索 ORDERID、ORDERDATE 和 CUSTOMERID 并在 dataGridView 中显示它们？

```
Dim con1 As New OleDbConnection
con1.ConnectionString = _
"Provider=msdaora;Data Source=orabis;User Id=112221800;Password=112221800;"

'Dim con1 As New SqlConnection("Provider=msdaora;Data Source=orabis;User Id=112221800;Password=112221800;")
con1.Open()
Dim cmd1 As New SqlCommand("select ORDERID, ORDERDATE AND CUSTOMERID from CUSORDER", con1)

Dim ada1 As New SqlDataAdapter(cmd1)
Dim ds1 As New DataSet
ada1.Fill(ds1)
ViewDeliverys.DataGridView1.DataSource = ds1.Tables(0)

con1.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:39:49.977

您不能使用 a `OleDbConnection`whith a `SqlCommand`(SQL-Server)。您使用的是哪个 rdbms？

这适用于 SQL-Server：

```
Using con = New SqlConnection(connectionString)
    Using da = New SqlDataAdapter("SELECT ORDERID, ORDERDATE AND CUSTOMERID from CUSORDER", con)
        Dim table = New DataTable()
        da.Fill(table)
        ViewDeliverys.DataGridView1.DataSource = table
    End Using
End Using 
```

编辑：这是`OleDb`版本：

```
Using con = New OleDbConnection(connectionString)
    Using da = New OleDbDataAdapter("SELECT ORDERID, ORDERDATE AND CUSTOMERID from CUSORDER", con)
        Dim table = New DataTable()
        da.Fill(table)
        ViewDeliverys.DataGridView1.DataSource = table
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:40:07.840

您使用 SQL Sever 或 MS Access 什么数据库？如果您使用 SQL Server，请使用 SQL Connection，然后在 MS Access 上使用 OleDBConnection。

对于正确的连接字符串，请检查：

[http://www.connectionstrings.com](http://www.connectionstrings.com)

还可以从以下位置查看本教程：

[http://vb.net-informations.com/ado.net-dataproviders/ado.net-sqldataadapter](http://vb.net-informations.com/ado.net-dataproviders/ado.net-sqldataadapter.htm)

并且还从以下位置替换您的查询：

```
Dim cmd1 As New SqlCommand("select ORDERID, ORDERDATE AND CUSTOMERID from CUSORDER", con1) 
```

哪里`ORDERDATE AND CUSTOMERID`会给你一个错误

将其更改为：

```
Dim cmd1 As New SqlCommand("select ORDERID, ORDERDATE,CUSTOMERID from CUSORDER", con1) 
```

# php - 从脚本中激活 URL

> ID：15268830
> 
> 赞同：1
> 
> 时间：2013-03-07T10:34:39.743
> 
> 标签：php

我需要能够从 PHP 文件中“激活”/“触发”一个 URL。

通常，单击链接后，底层脚本会清除一些会话。由于存在问题的系统，我无法自己清除这些会话，因此我需要能够从我的 PHP 脚本中访问该 URL。

这可能吗？

我在想也许是 cURL 或 HTTP 请求？但即便如此，我也不确定到底是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:42:33.507

这取决于您需要什么方法：

得到：

```
file_get_contents('http://some.url?params=val'); 
```

发布：
[https ://stackoverflow.com/a/871445/1285871](https://stackoverflow.com/a/871445/1285871)

# opengl-es - OpenGL中的不变性和多边形偏移有什么区别

> ID：15268836
> 
> 赞同：0
> 
> 时间：2013-03-07T10:34:57.553
> 
> 标签：opengl-es

OpenGL中的不变性和多边形偏移有什么区别。我对两者都感到困惑。因为两者都与低进动问题有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:44:54.190

从 GLES 2.0 规范：

> [...] 方差是指从不同着色器中的相同表达式获得不同值的可能性。例如，假设两个顶点着色器各自在两个着色器中使用相同的表达式设置 gl_Position，并且当两个着色器运行时，该表达式的输入值相同。
> 
> 由于两个着色器的独立编译，有可能在两个着色器运行时分配给 gl_Position 的值并不完全相同。在此示例中，这可能会导致多通道算法中的几何对齐问题。一般来说，着色器之间的这种差异是允许的。为了防止变化，可以将变量单独或使用全局设置声明为不变的。

换句话说，invariant是gles为你（程序员）提供的一种机制，告诉实现，当某个shader代码被编译时，**每次**生成的gpu代码必须是相同的。

多边形偏移，嗯，完全不相关。我建议您参考官方常见问题解答[https://www.opengl.org/archives/resources/faq/technical/polygonoffset.htm](https://www.opengl.org/archives/resources/faq/technical/polygonoffset.htm)

# editor - Redmine 2.2.3 Wiki 编辑器不显示标记语言

> ID：15268839
> 
> 赞同：1
> 
> 时间：2013-03-07T10:35:05.073
> 
> 标签：editor, wysiwyg, wiki, redmine, markup

我在 2 年前使用了 Redmine，并且喜欢使用标记编辑器来编写 wiki 文章。现在我们在新环境中安装了 Redmine 2.2.3。但是编辑器改变了，现在有一个所见即所得的编辑器。

有没有办法让旧的标记编辑器恢复原状？

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:33:50.263

将文本格式（管理 > 设置 > 常规 > 文本格式）更改为“纺织”。

# iphone - 我做的对不对？当我在 NSData 中向服务器发送音频文件时

> ID：15268840
> 
> 赞同：0
> 
> 时间：2013-03-07T10:35:05.987
> 
> 标签：iphone, ios, objective-c, avaudioplayer, audio-recording

我正在以某种`.wav`格式录制音频并将`.wav1`文件转换为`NSData`并发送到服务器。

记录的路径是：

> 文件：//localhost/var/mobile/Applications/8F81BA4C-7C6F-4496-BDA7-30C45478D758/Documents/sound.wav

我正在使用以下方式发送到服务器：

```
audioURL=@"file://localhost/var/mobile/Applications/8F81BA4C-7C6F-4496-BDA7-30C45478D758/Documents/sound.wav";

NSURL *url=[NSURL URLWithString:urlString];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url];
    [request setHTTPMethod: @"POST"];
    [request setValue: @"multipart/form-data" forHTTPHeaderField: @"Content-Type"];
NSData *audiodata = [NSData dataWithContentsOfURL:audioURL];
NSMutableData *highScoreData = [NSMutableData data];
[highScoreData appendData:audiodata];
[request setHTTPBody:highScoreData];
 nsurlConnection = [[NSURLConnection alloc] initWithRequest: request
                                                  delegate: self]; 
```

当我播放它时，它会给我正确的录制声音。但是，当我从服务器播放相同的录制语音时，它会显示“引用”而不是实际录制的语音。

[可以在此处找到](http://pastie.org/6410731)有关如何录制音频以及如何发送音频的完整代码。

请告诉我我这样做的方式（即发送到服务器）是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:35:58.597

多部分请求不是这样工作的。您需要边界来区分不同数据。请检查：[http ://www.w3.org/Protocols/rfc1341/7_2_Multipart.html](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)

对于解决方案，我使用 AFNetworking ( [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking) )。AFHTTPClient 可以为您创建多部分请求。检查：[http](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/multipartFormRequestWithMethod:path:parameters:constructingBodyWithBlock) ://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/multipartFormRequestWithMethod:path:parameters:constructingBodyWithBlock ：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:09:37.933

这是我用来上传的代码。标头部分取决于您的服务器如何处理它。AsiFormdata 在这里更合适。

NSString* 文件字符串；

```
fileString = [[self documentsPath]
              stringByAppendingPathComponent:@"testcombine.m4a"];

NSData* songData=[NSData dataWithContentsOfFile:fileString];

NSURL *url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"http://%@/UsingWebServer2/UploadServlet",RemoteEndpoint]];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

 [request setData:songData withFileName:@"upload_test.m4a" andContentType:@"audio/m4a" forKey:@"file"];

//[request appendPostData:[Jstring  dataUsingEncoding:NSUTF8StringEncoding]]; 
[request startSynchronous]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T13:12:57.453

如果您想通过 multipart/form-data 发送数据，请使用`ASIFormDataRequest`. [在此处](http://allseeing-i.com/ASIHTTPRequest/)查找文档以获取更多参考。

# android - RelativeLayout 的背景保持跳跃和鸭子

> ID：15268844
> 
> 赞同：1
> 
> 时间：2013-03-07T10:35:17.460
> 
> 标签：android, android-relativelayout, android-drawable

这正是发生的事情，第一个屏幕截图应该是这样，但大多数时候当我开始活动时，它就像第二个屏幕截图一样开始。

只有在我上下滚动或聚焦/聚焦到某些字段后才会正常。

有人可以指出或解决这个问题吗？

**注意：**标志在里面，里面`@drawable/background`是全屏的jpg文件

> **第一的：**

![普通的](../Images/6c15869c70d21ada16e97be2c53c183b.png)

> **第二：**

![闪避](../Images/f6ea4eb2dbce2071b101306bf25590e1.png)

> **XML 布局代码：**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/sc"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tv_un"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="25dip"
            android:layout_marginRight="9dip"
            android:layout_marginTop="150dip"
            android:text="Mobile #:"
            android:textColor="@color/newGrey"
            android:textSize="13dp" />

        <EditText
            android:id="@+id/et_un"
            android:layout_width="200dip"
            android:layout_height="40dp"
            android:layout_alignLeft="@+id/tv_un"
            android:layout_alignRight="@+id/et_pw"
            android:layout_below="@id/tv_un"
            android:background="@drawable/username_area"
            android:inputType="phone"
            android:lines="1"
            android:maxLength="11"
            android:maxLines="1"
            android:singleLine="true"
            android:text=""
            android:textColor="@color/newGrey" />

        <TextView
            android:id="@+id/tv_pw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/tv_un"
            android:layout_below="@id/et_un"
            android:layout_marginRight="9dip"
            android:layout_marginTop="15dip"
            android:text="Password:"
            android:textColor="@color/newGrey"
            android:textSize="13dp" />

        <EditText
            android:id="@+id/et_pw"
            android:layout_width="270dip"
            android:layout_height="40dp"
            android:layout_alignLeft="@+id/tv_pw"
            android:layout_below="@id/tv_pw"
            android:background="@drawable/username_area"
             android:maxLength="30"
            android:lines="1"
            android:maxLines="1"
            android:password="true"
            android:singleLine="true"
            android:text=""
            android:textColor="@color/newGrey" />

        <TextView
            android:id="@+id/tv_already"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/tv_un"
            android:layout_alignLeft="@+id/tv_un"
            android:layout_marginBottom="41dp"
            android:text="Account Login:"
            android:textColor="@color/newGrey"
            android:textSize="18dp" />

        <TextView
            android:id="@+id/tv_forgot"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/et_pw"
            android:layout_centerHorizontal="true"
            android:text="Forgot Password? Click Here"
            android:textColor="@color/redish"
            android:visibility="invisible" />

        <Button
            android:id="@+id/btn_LOGIN_in"
            android:layout_width="150dp"
            android:layout_height="55dp"
            android:layout_below="@+id/tv_forgot"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="16dp"
            android:background="@drawable/button"
            android:enabled="false"
            android:text="Login"
            android:textColor="@color/grey"
            android:textSize="20dp" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btn_LOGIN_in"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="17dp"
            android:text="Don&apos;t have an account?"
            android:textColor="@color/newGrey"
            android:textSize="18dp" />

        <Button
            android:id="@+id/btn_login"
            android:layout_width="150dp"
            android:layout_height="55dp"
            android:layout_alignLeft="@+id/btn_LOGIN_in"
            android:layout_below="@+id/textView1"
            android:layout_marginTop="31dp"
            android:background="@drawable/button"
            android:text="Sign up now"
            android:textColor="@color/newGrey"
            android:textSize="20dp" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="31dp"
            android:enabled="false"
            android:text="Forgot Password? Click Here"
            android:textColor="@color/redish"
            android:visibility="invisible" />
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:06:15.760

我以前从未听说过这个，但请尝试一下。

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <View
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:background="@drawable/background" >
    </View>

    <TextView
        android:id="@+id/tv_un"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="25dip"
        android:layout_marginRight="9dip"
        android:layout_marginTop="150dip"
        android:text="Mobile #:"
        android:textColor="@color/newGrey"
        android:textSize="13dp" />

    <EditText
        android:id="@+id/et_un"
        android:layout_width="200dip"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/tv_un"
        android:layout_alignRight="@+id/et_pw"
        android:layout_below="@id/tv_un"
        android:background="@drawable/username_area"
        android:inputType="phone"
        android:lines="1"
        android:maxLength="11"
        android:maxLines="1"
        android:singleLine="true"
        android:text=""
        android:textColor="@color/newGrey" />

    <TextView
        android:id="@+id/tv_pw"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tv_un"
        android:layout_below="@id/et_un"
        android:layout_marginRight="9dip"
        android:layout_marginTop="15dip"
        android:text="Password:"
        android:textColor="@color/newGrey"
        android:textSize="13dp" />

    <EditText
        android:id="@+id/et_pw"
        android:layout_width="270dip"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/tv_pw"
        android:layout_below="@id/tv_pw"
        android:background="@drawable/username_area"
         android:maxLength="30"
        android:lines="1"
        android:maxLines="1"
        android:password="true"
        android:singleLine="true"
        android:text=""
        android:textColor="@color/newGrey" />

    <TextView
        android:id="@+id/tv_already"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/tv_un"
        android:layout_alignLeft="@+id/tv_un"
        android:layout_marginBottom="41dp"
        android:text="Account Login:"
        android:textColor="@color/newGrey"
        android:textSize="18dp" />

    <TextView
        android:id="@+id/tv_forgot"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/et_pw"
        android:layout_centerHorizontal="true"
        android:text="Forgot Password? Click Here"
        android:textColor="@color/redish"
        android:visibility="invisible" />

    <Button
        android:id="@+id/btn_LOGIN_in"
        android:layout_width="150dp"
        android:layout_height="55dp"
        android:layout_below="@+id/tv_forgot"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="16dp"
        android:background="@drawable/button"
        android:enabled="false"
        android:text="Login"
        android:textColor="@color/grey"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btn_LOGIN_in"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="17dp"
        android:text="Don&apos;t have an account?"
        android:textColor="@color/newGrey"
        android:textSize="18dp" />

    <Button
        android:id="@+id/btn_login"
        android:layout_width="150dp"
        android:layout_height="55dp"
        android:layout_alignLeft="@+id/btn_LOGIN_in"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="31dp"
        android:background="@drawable/button"
        android:text="Sign up now"
        android:textColor="@color/newGrey"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="31dp"
        android:enabled="false"
        android:text="Forgot Password? Click Here"
        android:textColor="@color/redish"
        android:visibility="invisible" />
</RelativeLayout> 
```

或者你可以试试这个。

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background" >

        <ScrollView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/sc"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/tv_un"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginLeft="25dip"
                    android:layout_marginRight="9dip"
                    android:layout_marginTop="150dip"
                    android:text="Mobile #:"
                    android:textColor="@color/newGrey"
                    android:textSize="13dp" />

                <EditText
                    android:id="@+id/et_un"
                    android:layout_width="200dip"
                    android:layout_height="40dp"
                    android:layout_alignLeft="@+id/tv_un"
                    android:layout_alignRight="@+id/et_pw"
                    android:layout_below="@id/tv_un"
                    android:background="@drawable/username_area"
                    android:inputType="phone"
                    android:lines="1"
                    android:maxLength="11"
                    android:maxLines="1"
                    android:singleLine="true"
                    android:text=""
                    android:textColor="@color/newGrey" />

                <TextView
                    android:id="@+id/tv_pw"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/tv_un"
                    android:layout_below="@id/et_un"
                    android:layout_marginRight="9dip"
                    android:layout_marginTop="15dip"
                    android:text="Password:"
                    android:textColor="@color/newGrey"
                    android:textSize="13dp" />

                <EditText
                    android:id="@+id/et_pw"
                    android:layout_width="270dip"
                    android:layout_height="40dp"
                    android:layout_alignLeft="@+id/tv_pw"
                    android:layout_below="@id/tv_pw"
                    android:background="@drawable/username_area"
                    android:lines="1"
                    android:maxLength="30"
                    android:maxLines="1"
                    android:password="true"
                    android:singleLine="true"
                    android:text=""
                    android:textColor="@color/newGrey" />

                <TextView
                    android:id="@+id/tv_already"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/tv_un"
                    android:layout_alignLeft="@+id/tv_un"
                    android:layout_marginBottom="41dp"
                    android:text="Account Login:"
                    android:textColor="@color/newGrey"
                    android:textSize="18dp" />

                <TextView
                    android:id="@+id/tv_forgot"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/et_pw"
                    android:layout_centerHorizontal="true"
                    android:text="Forgot Password? Click Here"
                    android:textColor="@color/redish"
                    android:visibility="invisible" />

                <Button
                    android:id="@+id/btn_LOGIN_in"
                    android:layout_width="150dp"
                    android:layout_height="55dp"
                    android:layout_below="@+id/tv_forgot"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="16dp"
                    android:background="@drawable/button"
                    android:enabled="false"
                    android:text="Login"
                    android:textColor="@color/grey"
                    android:textSize="20dp" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/btn_LOGIN_in"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="17dp"
                    android:text="Don&apos;t have an account?"
                    android:textColor="@color/newGrey"
                    android:textSize="18dp" />

                <Button
                    android:id="@+id/btn_login"
                    android:layout_width="150dp"
                    android:layout_height="55dp"
                    android:layout_alignLeft="@+id/btn_LOGIN_in"
                    android:layout_below="@+id/textView1"
                    android:layout_marginTop="31dp"
                    android:background="@drawable/button"
                    android:text="Sign up now"
                    android:textColor="@color/newGrey"
                    android:textSize="20dp" />

                <TextView
                    android:id="@+id/TextView01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="31dp"
                    android:enabled="false"
                    android:text="Forgot Password? Click Here"
                    android:textColor="@color/redish"
                    android:visibility="invisible" />
            </RelativeLayout>
        </ScrollView>
    </RelativeLayout> 
```

# javascript - jQuery 用户界面。在阻止 UI 加载后执行一个功能

> ID：15268845
> 
> 赞同：1
> 
> 时间：2013-03-07T10:35:18.847
> 
> 标签：javascript, jquery

我使用 jQuery BlockUI 插件。

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

我想在 jQuery BlockUI 完成加载后发出警报。

这是代码；

```
$('#trigger').click(function() {
    $.blockUI({
        message: $('#mymessage'),
    });
    alert("hi");
}); 
```

但是警报第一次发生，UIBlock 第二次加载。我怎样才能解决这个问题？

这是现场演示[http://jsfiddle.net/yHCjF/](http://jsfiddle.net/yHCjF/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:39:30.860

你应该使用`setTimeout()`.

```
$('#trigger').click(function() {
    $.blockUI({
        message: $('#mymessage'),
    });
    setTimeout(function(){ alert(); }, delay);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:40:09.327

你试过`onBlock`回调吗？

```
$.blockUI({
    message: $('#mymessage'),
    onBlock: function() {
        alert('loaded');
    },
}); 
```

[http://jsfiddle.net/yHCjF/1/](http://jsfiddle.net/yHCjF/1/)

# android - 安卓自定义视图

> ID：15268847
> 
> 赞同：1
> 
> 时间：2013-03-07T10:35:24.720
> 
> 标签：android, listview, android-listview

我在解析 web 服务响应后获得了一个列表。我已经使用`BaseAdapter`. 我面临的问题是*我无法`ListView`*使用我创建的自定义视图将数据绑定到。这是我的自定义视图：

```
public class ItemListBaseAdapter extends BaseAdapter {

    int layoutResourceId;  

    private static List<Item> itemDetailsarrayList;

    private LayoutInflater l_Inflater;

    public ItemListBaseAdapter(Context context, List<Item> results) {
        itemDetailsarrayList = results;
        l_Inflater = LayoutInflater.from(context);
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder;
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.row_layout, null);
            holder = new ViewHolder();
            holder.txtTitle = (TextView) convertView.findViewById(R.id.textView1);         
        convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txtTitle.setText(itemDetailsarrayList.get(position).getCity_name());
        return convertView;
     }

     static class ViewHolder {   
        TextView txtTitle;
     }
} 
```

这就是我试图绑定的方式：

```
llstCities = Objparsecities.parse();
ItemListBaseAdapter adapter = new ItemListBaseAdapter(this, lstCities);
lstcities = (ListView)findViewById(R.id.listView1);
lstcities.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:39:23.200

用下面的代码替换你的代码：看看魔法......

```
public class ItemListBaseAdapter extends BaseAdapter {

     int layoutResourceId;  

    private static List<Item> itemDetailsarrayList;

    private LayoutInflater l_Inflater;

     public ItemListBaseAdapter(Context context, List<Item> results) {
      itemDetailsarrayList = results;
      l_Inflater = LayoutInflater.from(context);
     }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return itemDetailsarrayList.size();

    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
         ViewHolder holder;
          if (convertView == null) {
           convertView = l_Inflater.inflate(R.layout.row_layout, null);
           holder = new ViewHolder();
           holder.txtTitle = (TextView) convertView.findViewById(R.id.textView1);          
           convertView.setTag(holder);
          } else {
           holder = (ViewHolder) convertView.getTag();
          }

          holder.txtTitle.setText(itemDetailsarrayList.get(position).getCity_name());
          return convertView;
     }

     static class ViewHolder {

         TextView txtTitle;

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:02:02.757

看看 getCount() 方法：

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return itemDetailsarrayList.size();

} 
```

解决方案是返回适配器包含的完整项目的计数。你应该知道你必须实现的任何方法！不仅让eclipse生成方法。他们只是存根。如果您不知道在这些方法中做什么，开发者文档会为您提供更好的视角。

# javascript - getElementById() 用于元素的子元素

> ID：15268854
> 
> 赞同：5
> 
> 时间：2013-03-07T10:35:35.737
> 
> 标签：javascript

`getElementById()`在`document`物体上。

如果我已经有一个元素引用，我如何找到具有给定 ID 的孩子（或孩子的孩子等）？

```
var parent = document.getElementById(parentId),
    child = parent.getElementById(childId); 
```

此代码失败，因为页面上的普通元素没有`getElementById`方法。

（我处于维护模式，ID 不一定是唯一的，不能使用 jQuery）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T10:39:55.787

你可以使用[`querySelector()`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelector)：

```
child = parent.querySelector("#" + childId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:39:40.363

您可以自己循环所有子节点吗？

可能是这样的：

```
GetChildElementByID = function (rootElement, id){
    var children = GetAllNodes(rootElement);
    for(var i in children){
        var element = children[i];
        if(element.id == id){
            return element;
        } 
    }
    return null;
}

GetAllNodes = function (rootElement) {
    var nodes = [];
    var childNodes = rootElement.childNodes;
    for (var i in childNodes) {
        var node = childNodes[i];
        if (node.nodeType) {
            nodes.push(node);
        }
        nodes.push.apply(nodes, GetAllNodes(node));
    }
    return nodes;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-21T16:25:30.120

查询选择器可以找到父母的孩子。

`document.querySelector("#parentID > #childID");`

# python - Python有一个简单的字符串解析器吗？

> ID：15268858
> 
> 赞同：1
> 
> 时间：2013-03-07T10:35:43.457
> 
> 标签：python, string, parsing

我有一个这样的字符串：`'aaa(cc(kkk)c)ddd[lll]{m(aa)mm}'`. 从该字符串中，我想获得以下结构：`['aaa', '(cc(kkk)c)', 'ddd', '[lll]', '{m(aa)mm}']`. 换句话说，我想分隔不同类型括号中的子字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:49:07.887

您需要使用堆栈方法来跟踪嵌套级别：

```
pairs = {'{': '}', '[': ']', '(': ')'}

def parse_groups(string):
    stack = []
    last = 0
    for i, c in enumerate(string):
        if c in pairs:
            # push onto the stack when we find an opener
            if not stack and last < i:
                # yield anything *not* grouped
                yield string[last:i]
            stack.append((c, i))
        elif c in pairs:
            if stack and pairs[stack[-1][0]] == c:
                # Found a closing bracket, pop the stack
                start = stack.pop()[1]
                if not stack:
                    # Group fully closed, yield
                    yield string[start:i + 1]
                    last = i + 1
            else:
                raise ValueError('Missing opening parethesis')

    if stack:
        raise ValueError('Missing closing parethesis')

    if last < len(string):
        # yield the tail
        yield string[last:] 
```

这将生成组，如果需要，将其转换为列表：

```
>>> list(parse_groups('aaa(cc(kkk)c)ddd[lll]{m(aa)mm}'))
['aaa', '(cc(kkk)c)', 'ddd', '[lll]', '{m(aa)mm}'] 
```

如果括号/括号不平衡，则会引发异常：

```
>>> list(parse_groups('aa(bb'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 19, in parse_groups
ValueError: Missing closing parethesis
>>> list(parse_groups('aa[{bb}}'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 20, in parse_groups
ValueError: Missing opening parethesis
>>> list(parse_groups('aa)bb'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 20, in parse_groups
ValueError: Missing opening parethesis 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:51:06.730

你也可以看看[pyparsing](http://pyparsing.wikispaces.com/Documentation)。有趣的是，这可以实现为堆栈，您可以在找到 {[( 并在找到 )]} 时推送字符串片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:44:55.820

我认为您可以尝试[**自定义字符串解析器**](https://github.com/dotpot/Custom-String-Parser)库（我是它的作者）。它旨在处理具有任何逻辑结构的数据，因此您可以按照自己的方式对其进行自定义；）

# c++ - 如何在 C++ 中比较两个 NAN 值

> ID：15268864
> 
> 赞同：13
> 
> 时间：2013-03-07T10:35:51.033
> 
> 标签：c++, compare, nan

我有一个代码区域产生 NAN 值的应用程序。我必须比较相等的值并在此基础上执行其余代码。如何比较 C++ 中的两个 NAN 值是否相等？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T10:39:32.050

假设 IEEE 754 浮点表示，您不能比较两个 NaN 值是否相等。NaN 不等于任何值，包括它自己。[`std::isnan`](http://en.cppreference.com/w/cpp/numeric/math/isnan)但是，您可以从`<cmath>`标题中测试它们是否都是 NaN ：

```
if (std::isnan(x) && std::isnan(y)) {
  // ...
} 
```

但是，这仅在 C++11 中可用。在 C++11 之前，[Boost Math Toolkit](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/index.html)提供了一些[浮点分类器](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/utils/fpclass.html)。或者，您可以通过将其与自身进行比较来检查值是否为 NaN：

```
if (x != x && y != y) {
  // ...
} 
```

因为 NaN 是唯一不等于自身的值。过去，某些编译器把它搞砸了，但我目前不确定状态（它似乎与 GCC 一起正常工作）。

MSVC 提供了一个[_isnan](http://msdn.microsoft.com/en-us/library/tzthab44.aspx)函数。

最后一种选择是假设您知道表示是 IEEE 754 并进行一些位检查。显然这不是最便携的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T10:50:47.567

关于 C++11 之前的版本，[这也有所提升](http://www.boost.org/doc/libs/1_52_0/libs/math/doc/sf_and_dist/html/math_toolkit/utils/fpclass.html)。

```
#include <boost/math/special_functions/fpclassify.hpp>

template <class T>
bool isnan(T t); // NaN. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:38:53.663

任何给定的 NaN 都不等于任何东西，它永远不会等于任何其他 NaN，因此将它们相互比较是徒劳的。

来自 GNU 文档：

> NaN 是无序的：它不等于、大于或小于任何东西，包括它自己。 `x == x`如果 x 的值为 NaN，则为 false。[来源](http://www.gnu.org/software/libc/manual/html_node/Infinity-and-NaN.html)

# c# - 表示空格后 跟句点的正则表达式？

> ID：15268868
> 
> 赞同：0
> 
> 时间：2013-03-07T10:36:04.520
> 
> 标签：c#, .net, regex

我有以下陈述：

`Regex.IsMatch("a .e", "\.")``true`按预期返回。在它应该
`Regex.IsMatch("a .e", "\b\.")`返回时返回。`false``true`

尝试了其他一些实例，发现`"\b\."`并没有按预期工作。这里有什么问题？你能告诉我如何创建一个代表空格后跟句点的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:38:46.903

空格后跟句号：

```
" \\." 
```

请注意，您需要转义用于转义“.”的“\”。

或者，

```
@" \." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:39:33.993

您忘记了正则表达式的模式是字符串.. c# 中的字符串具有需要转义的特殊字符.. 斜杠就是其中之一.. 尝试..

`Regex.IsMatch("a .e", "\\b\\.")`

# sql - 根据表2中列的值计算表1中的列值

> ID：15268872
> 
> 赞同：0
> 
> 时间：2013-03-07T10:36:12.650
> 
> 标签：sql

嗨，我被困在计算列中。我厌倦了在谷歌上搜索类似的问题并且没有运气。

请看下表。

**配置表**

```
-------------------------------
|KeyName        | KeyValue    |
-------------------------------
|MinimumMargin  | .50         |
|MaximumMargin  | 2           |
------------------------------- 
```

**价格表**

```
-------------------------------
|SKU  |Price   | Shipping     |
-------------------------------
|001  | 23    | 1.5         |
|002  | 20    | 1.5         |
------------------------------- 
```

我想得到如下结果：

```
SELECT SKU, SUM(PRICE+SHIPPING) + 'ConfigTable.MinMargin' as CalcPrice FROM PRICE 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:43:03.483

您可以使用子查询来获取`sum`每个的价格和运费`sku`，然后使用 a`CROSS JOIN`加入`configTable`来添加`keyValue`：

```
select p.sku,
  p.CalcPrice + (c.KeyValue) CalcPrice
from
(
  select p.sku,
    sum(p.price + p.shipping) CalcPrice
  from priceTable p
  group by p.sku
) p
cross join configTable c
where c.keyname = 'MinimumMargin' 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/b99ec/8)。

如果`KeyValue`是 varchar，那么您需要将其转换，以便将其添加到`CalcPrice`：

```
select p.sku,
  p.CalcPrice + convert(c.KeyValue, decimal(10, 2)) CalcPrice
from
(
  select p.sku,
    sum(p.price + p.shipping) CalcPrice
  from priceTable p
  group by p.sku
) p
cross join configTable c
where c.keyname = 'MinimumMargin'; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/27ba1/8)

# ios - NSMergeConflict（两个线程） - 设置合并策略并不能解决

> ID：15268881
> 
> 赞同：8
> 
> 时间：2013-03-07T10:36:29.043
> 
> 标签：ios, multithreading, cocoa-touch, core-data, conflict

好吧，这让我发疯了。

我有两个使用 UImanageddocument 的线程，一个在用户进行选择的主上下文中，具有自己的 moc 的后台线程根据时间戳将数据与服务器同步。

一切似乎都运行良好，但是当我： 1\. 在主上下文中添加一个对象 2\. 在后台同步 3\. 从后台保存 4\. 尝试再次更改同一个对象，现在从主上下文 - 主线程

我得到一个 NSMergeConflict

我将包含我的一些代码，不包括很多不相关的代码，向您展示我如何初始化上下文，希望有人能启发我。我知道核心数据在这些领域很棘手。

在主线程上（在 applicationdidfinishloadingwithoptions 中）：

```
 NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSLibraryDirectory inDomains:NSUserDomainMask] lastObject]; //get the default user documents folder
    url = [url URLByAppendingPathComponent:DATABASENAME];
    UIManagedDocument *doc = [[UIManagedDocument alloc] initWithFileURL:url];
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
    doc.persistentStoreOptions = options;
    [doc.managedObjectContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
    self.database=doc;
    self.mainManagedObjectContext=self.database.managedObjectContext;
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleDataModelChange:) name:NSManagedObjectContextObjectsDidChangeNotification object:self.database.managedObjectContext]; 
```

然后：

```
- (void)handleDataModelChange:(NSNotification *)note
{
    [self save];
}

-(void) save
{
        [self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
            batch_save=!success;
            NSLog(@"save success %d",success);
        }];
} 
```

在后台线程上：

```
dispatch_queue_t fetchQ = dispatch_queue_create("syncing list", NULL);
dispatch_async(fetchQ, ^   // ***********  BACKGROUND THREAD ***********
{
    AppDelegate *delegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
    NSManagedObjectContext *backgroundMOC2;
    backgroundMOC2=[[NSManagedObjectContext alloc] init];
    [backgroundMOC2 setPersistentStoreCoordinator:delegate.mainManagedObjectContext.persistentStoreCoordinator];
    [backgroundMOC2 setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
    [delegate.mainManagedObjectContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
    [[NSNotificationCenter defaultCenter] addObserver:delegate.mainManagedObjectContext selector:@selector(mergeChangesFromContextDidSaveNotification:) name:NSManagedObjectContextDidSaveNotification object:backgroundMOC2];

    ** pseudo-code: 
       perform fetch request from CD
       submit data to server with POST request (synchronously)
       retrieve JSON reply from server
       update what's needed in CD objects
    ** end of pseudo code

   [backgroundMOC2 save:nil];
   [[NSNotificationCenter defaultCenter] removeObserver:delegate.mainManagedObjectContext name:NSManagedObjectContextDidSaveNotification object:backgroundMOC2];
    });
dispatch_release(fetchQ); 
```

我尝试了所有类型的合并策略常量都无济于事。

我得到了这个，并且文件没有保存：

> 冲突列表 = ("NSManagedObject (0x119aea80) 的 NSMergeConflict (0x1a9ee1e0)，objectID 为 '0x9dcec90'，oldVersion = 10 和 newVersion = 11，旧对象快照 = {\n displayName = \"\";\n machineName = KIYGRDRTTDVLTQB;\n note = \"\";\n 产品 = \"0x11967ab0 \";\n 公开 = 1;\n 发布 = 1;\n 数量 = 3;\n 注册地址 = \"\";\n 注册地址 = \"\ ";\n registeredToNote = \"\";\n status = \"ON REGISTRY\";\n upDate = \"2013-03-07 10:22:01 +0000\";\n wishList = \"\ ";\n} 和新缓存行 = {\n displayName = \"\";\n machineName = KIYGRDRTTDVLTQB;\n note = \"\";\n product = \"0x1a9ee3d0 \";\n public = 1 ;\n 已发布 = 1;\n 数量 = 3；\n registeredTo = \"\";\n registeredToEmail = \"\";\n registeredToNote = \"\";\n status = \"ON REGISTRY\";\n upDate = \" 2013-03-07 10:22:03 +0000\";\n wishList = \"\";\n}" ); }

顺便说一句，我在新旧对象之间看到的唯一区别是指向“产品”的指针。这可能是我的问题吗？

另一个可能的线索是，这仅在添加新对象时发生，并且仅在后台同步发生之后发生。如果我停止应用程序并重新加载它（重新加载持久存储），我现在可以毫无问题地编辑该现有对象，并根据我的喜好多次同步它而没有问题。

多谢你们

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T11:07:24.803

好的朋友们，

一个月后，我对此心烦意乱-**有一个解决方案**，我什么都猜不到。实际上，我向 Apple 发起了一个支持事件，他们解决了这个问题。

所以这里是：

在为主托管对象上下文设置合并策略时，有一个名为 parentContext 的属性。我仍然不太清楚这个属性是什么，因为这方面的文档很少。然而，这绝对解决了我的问题。请考虑到在我的工作流程中，我创建了一个 NSManagedDocument 并从中提取上下文。我认为大多数人都是反过来做的（大多数人不使用托管文档）。

代替

```
 [self.mainManagedObjectContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy]; 
```

我现在使用：

```
 NSManagedObjectContext *parentContext = delegate.mainManagedObjectContext.parentContext;
    [parentContext performBlockAndWait:^{
        [parentContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
    }]; 
```

阻塞是一种预防措施，以确保在正确的线程中执行此操作，重要的是将合并策略设置为所需上下文的 parentContext。

就个人而言，我必须添加两个大嘘声： 1\. 对我来说嘘声，因为使用 NSManagedDocument 虽然有点过时，只是因为我找到了使用它的好例子。2\. 苹果在该领域非常缺乏文档。我花了数周时间阅读有关 ManagedObjectContexts 的内容，今天是我第一次了解 parentContext 属性。

# python - 使用 Tkinter 在 while 循环中录制语音

> ID：15268882
> 
> 赞同：2
> 
> 时间：2013-03-07T10:36:31.613
> 
> 标签：python, while-loop, tkinter, audio-recording

我正在编写一个录音应用程序，我想在用户按下 Tkinter 中的按钮时开始录音，并在用户释放按钮时停止录音。

```
import Tkinter

def record():
    while True
          Recordning runtines...
          if <button is released>
             stop audio steam...
             break

main = Tkinter.Tk()

b = Tkinter.Button(main, text='rec', command=record)
b.place(x="10", y="10")

main.mainloop() 
```

如何实现“如果按钮被释放”？我需要使用线程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:19:37.770

如果您不想在录制时冻结 GUI，我建议您使用多线程。可以通过事件[`<Button-1>`和`<ButtonRelease-1>`](http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm#events)来完成按钮的单击和释放。我已将代码包装到一个类中，因此它还包含用于完成工作线程的标志。

```
import Tkinter as tk
import threading

class App():
    def __init__(self, master):
        self.isrecording = False
        self.button = tk.Button(main, text='rec')
        self.button.bind("<Button-1>", self.startrecording)
        self.button.bind("<ButtonRelease-1>", self.stoprecording)
        self.button.pack()

    def startrecording(self, event):
        self.isrecording = True
        t = threading.Thread(target=self._record)
        t.start()

    def stoprecording(self, event):
        self.isrecording = False

    def _record(self):
        while self.isrecording:
            print "Recording"

main = tk.Tk()
app = App(main)
main.mainloop() 
```

# java - 为什么我的 pbkdf2 实现这么慢（与 SQLCipher 相比）？

> ID：15268890
> 
> 赞同：7
> 
> 时间：2013-03-07T10:02:39.057
> 
> 标签：java, android, pbkdf2

我在我的 Xoom 平板电脑上编写了一个简单的 Android 应用程序，它只是将一些字符串注释存储在 SQLCipher 数据库中。

系统会提示用户输入密码短语，SQLCipher 库将使用该密码短语。到目前为止，这工作正常并且非常顺利。

现在我还实现了一个用于身份验证的小型 PBKDF2 算法（事实上，我想在将来加密一些其他文件，这些文件不能存储在数据库中）。但就目前而言，我只是来检查我的 pbkdf2 算法是否正确。我只使用了 javax.crypto 和 java.security 库。

代码片段如下：

```
int derivedKeyLength = 128;
int iterations = 500;
KeySpec spec = new PBEKeySpec(passphrase.toCharArray(), salt, iterations, derivedKeyLength);
SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
byte[] derivedKey = f.generateSecret(spec).getEncoded(); 
```

salt 是一个 16 字节的随机数，由 SecureRandom 生成。

所以我硬编码了密钥和盐，并比较了派生密钥进行身份验证（只是一个测试用例！）

我现在的问题是，在我的 Xoom 上，它持续大约 5 秒，直到派生函数完成，尽管迭代只设置为 500。

AFAIK SQLCipher 默认使用 4000 的迭代次数，如果密钥错误或正确，它会立即响应。（如果我将迭代设置为 4000，则至少需要 15 秒）

问题是，我是否实现了效率低下或者是因为 SQLCipher 的性能非常好（本机 NDK 函数等）？

提前谢谢你 ps：对不起，我的英语还不是很好！

**编辑：**

对不起，我不够清楚:-)

我知道 PBKDF2 应该很慢（特别是迭代量，以减慢蛮力攻击），这正是我要问的原因！我想将迭代次数设置为 5000（这是不可接受的，超过 15 秒）

我只是想知道，因为，就像我说的，SQLCipher 还使用 PBKDF2（迭代 = 4k，而我使用的是**500**）从给定密码派生密钥。最后我不是在谈论使用 AES 加密，它只是关于派生密钥的区别。

当然，SQLCipher 似乎比自制的密钥导出函数要快得多，但我不认为会有这么大的不同，因为 SCLCipher 的 PBKDF2 真的可以即时工作！

问候！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T10:42:53.187

好的，这（见下文）不完全是您的问题，PBKDF2 很慢，但应该*没有*硬件上的这些参数描述的那么慢。这里有一些关于 Android PBE/KDF 性能的统计数据（和提示）：http: [//nelenkov.blogspot.com/2012/04/using-password-based-encryption-on.html](http://nelenkov.blogspot.com/2012/04/using-password-based-encryption-on.html)。`SecretKeyFactory`性能问题不是未知数：[使用 LVL 和 AESObfuscator 可以解决糟糕的 SecretKeyFactory 性能问题吗？](https://stackoverflow.com/questions/3814972/any-way-around-awful-secretkeyfactory-performance-with-lvl-and-aesobfuscator).

`SecretKeyFactory`很可能使用纯 Java 实现。*SQLCipher*有两个相关的特性：

*   它使用 OpenSSL，编译的本机代码（在我的*桌面上*， OpenSSL 的 PBKDF2 在 2000 次迭代中比 JVM6`SecretKeyFactory`版本快近 100 倍，不包括 JVM 启动时间。我没有比较 AES 速度，看来其他人在 Android 上也觉得它很慢）
*   4000 次迭代 PBKDF2 仅在数据库打开时完成，之后页面 HMAC 机密最多有 2 次迭代（假设默认配置，如文档所述）

您的代码似乎是正确的，当您增加迭代时，不应该有如此大的（线性？）性能下降。*Xoom*应该是用JIT 运行一个非古代的 JVM，你能用[其他代码](https://stackoverflow.com/questions/2860943/suggestions-for-library-to-hash-passwords-in-java)验证性能问题吗？

* * *

由于*_* _ [_](https://security.stackexchange.com/questions/7689/clarification-needed-for-nists-whitepaper-recommendation-for-password-based-ke) _意[键拉伸](http://en.wikipedia.org/wiki/Key_stretching)操作。迭代计数器可让您以速度换取安全性。

AES 始终[旨在快速](http://cryptome.org/jya/aescomm.htm)且快速（[速度比较 PDF](http://csrc.nist.gov/archive/aes/round1/conf2/Schneier.pdf)，所选择的 AES 候选者在该论文中以其原始名称*Rijndael*引用）。

我假设您正在将 PBKDF2 计算时间直接与在 SQLCipher 数据库上执行 SQL 操作所花费的时间进行比较，这几乎肯定会被设计得很快。

您正在有效地比较具有不同要求的两种不同操作，因此速度差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:09:20.130

好的，我弄清楚了问题所在。

如果我**断开**设备与 PC 的连接，它会立即工作。另外，如果我在那之后重新连接它。

现在即使迭代量5000以上，求导函数也只需要不到一秒！！这很棒，因为我的 Xoom 不是所有设备中最新的！

可能是因为调试模式还是什么，我真的不知道！

无论如何，感谢 mr.spuratic。希望这对将来的某人有所帮助:-)

# google-drive-api - 使用服务帐户在 Google Drive 中插入文档时出现错误 500

> ID：15268891
> 
> 赞同：1
> 
> 时间：2013-03-07T10:37:02.657
> 
> 标签：google-drive-api

我需要使用 Google Drive API 从我的 Java 应用程序中插入和读取 Google Drive 中的文件。我使用服务帐户。

我在我的 Google API 控制台中创建了一个项目，启用了“Drive API”服务，创建了一个新的服务帐户，并在我的应用程序中使用了下载的私钥：

```
GoogleCredential credential = new GoogleCredential.Builder()
            .setTransport(HTTP_TRANSPORT)
            .setJsonFactory(JSON_FACTORY)
            .setServiceAccountId(this.serviceEmail)
            .setServiceAccountScopes(DriveScopes.DRIVE)
            .setServiceAccountPrivateKeyFromP12File(new java.io.File(this.privateKeyFilePath))
            .build(); 
```

然后我的 Drive 服务被实例化：

```
Drive driveService = new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, null)
            .setHttpRequestInitializer(credential)
            .build(); 
```

这很好用，我可以在 Google Drive 中插入、共享、读取文件。

我的问题是我在我的 Google API 控制台中创建了第二个项目，执行了相同的步骤，但无法使其工作。我的 2 个项目看起来相同，但是对于第二个项目，当我尝试插入新文档时总是有错误响应：

```
com.google.api.client.http.HttpResponseException: 500 Internal Server Error
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "internalError",
    "message": "Internal Error"
   }
  ],
  "code": 500,
  "message": "Internal Error"
 }
}

at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:978)
at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:237)
at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

第一个项目是在 6 个月前创建的，而第二个（没有工作）是最近创建的。

如何获取有关此错误的更多详细信息？什么会导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:49:19.680

此问题可能是由错误的文件格式引起的。尝试直接在 Google Drive 中上传文件并获得更详细的消息。我收到以下消息：“上传的文件格式规范错误 - 例如，您可能正在尝试将 CSV 文件上传为 XLS 文件。”

但是，我不知道如何通过 API 获取有关错误的更多详细信息。如果有人知道，请告诉我！

# python - 如何将代理添加到 Spynner

> ID：15268892
> 
> 赞同：1
> 
> 时间：2013-03-07T10:37:03.807
> 
> 标签：python, proxy, spynner

此代码不会更改浏览器 ip。2ip.ru 显示我的真实 IP。

```
import spynner

def main():
    b = spynner.Browser(user_agent='Opera/9.80 (Windows NT 6.1; U; ru) Presto/2.8.131 Version/11.10')
    b.set_proxy("91.208.__.__:8080")

    b.load('http://2ip.ru')
    b.browse()

if __name__ == '__main__':
    main() 
```

# .net - StringBuilder 到 XMLNode

> ID：15268893
> 
> 赞同：0
> 
> 时间：2013-03-07T10:37:10.013
> 
> 标签：.net, xslt

我有一个`XslCompiledTransform`用于转换 XML 片段的对象。转换工作正常并将新内容输出到`StringBuilder`对象。

`XmlNode`用内容创建新内容的最佳方式是什么`StringBuilder`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:06:16.400

```
XmlDocument doc = new XmlDocument(); <-- This is an XmlNode
doc.LoadXml(sb.ToString()); 
```

应该这样做。

# php - 数组中的随机颜色应用于页面上的元素

> ID：15268897
> 
> 赞同：0
> 
> 时间：2013-03-07T10:37:14.417
> 
> 标签：php, javascript, jquery, colors

我有一个元素列表，它们都需要从一组颜色中应用随机背景颜色。

我的 HTML 结构很简单：

```
<ul class="moreorless-list">
  <li><span>Word</span></li>
  <li><span>Word</span></li>
  <li><span>Word</span></li>
  <li><span>Word</span></li>
  <li><span>Word</span></li>
  <li><span>Word</span></li>
</ul> 
```

例如，一组颜色可以是：#ffffff、#111111、#222222、#333333 等。

我需要从数组中获取颜色并将它们随机应用到列表中；这当然意味着某些颜色重复两次就可以了。

有什么想法我能做到这一点吗？首选 PHP 或 JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:45:43.277

```
$('li').each(function () {
    $(this).css('background-color', random());
});

function random() {
    colors = ['red', 'white', 'blue', 'green']
    return colors[Math.floor(Math.random() * colors.length)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:49:54.643

我倾向于建议：

```
var options = ['#ffffff', '#111111', '#222222', '#333333'];

function randomColour(el, colours){
    return colours[Math.floor(Math.random()*colours.length)];
}

var spans = document.getElementsByTagName('span');
for (var i = 0, len = spans.length; i<len; i++){
    spans[i].style.backgroundColor = randomColour(this,options);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CFGPe/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:43:24.543

如果您有颜色集，请使用：

```
$colors = array("#FFFFFF", "#000000", "#333333");
$rand_keys = array_rand($colors); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:44:12.157

尝试这个：

```
function getRandomColor(colorArray)
{
   return colorArray[Math.floor(Math.random()*colorArray.length)];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T10:38:44.577

尝试这个：

```
function get_random_color() {
    function c() {
        return rand_num(256).toString(16);
      }
      return "#"+c()+c()+c();
      } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T10:57:32.300

基本上，您需要从数组中获取随机值。在 PHP 中，您可以使用`array_rand`( [http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php) ) 来实现这一点。一种方法可能看起来像这样：

```
<?php
    function randomColor() {
        $colorArray = array('#ffffff', '#111111', '#222222', '#333333', ...);
        return $colorArray[array_rand($colorArray)]; // array_rand() only returns the key
    }
?>

<ul class="moreorless-list">
    <li style="background-color:<?php echo randomColor(); ?>"><span>Word</span></li>
    <li style="background-color:<?php echo randomColor(); ?>"><span>Word</span></li>
    <li style="background-color:<?php echo randomColor(); ?>"><span>Word</span></li>
    <li style="background-color:<?php echo randomColor(); ?>"><span>Word</span></li>
    <!-- ... -->
</ul> 
```

# javascript - 由函数构造的 Javascript 渲染部分

> ID：15268909
> 
> 赞同：0
> 
> 时间：2013-03-07T10:37:46.220
> 
> 标签：javascript, jquery, ruby, ruby-on-rails-3, partial-views

所以这是我的情况

我有 2 个文件夹，1 个是项目，1 个是部分文件夹项目：

```
-items
 -index.js.erb 
```

文件夹部分：

```
-partials
 -lists
  - _items.erb 
```

在我的 items 文件夹下的 index.js.erb 中，我想做 javascript

```
$('#item').html("<%= escape_javascript(render partial: 'partials/lists/items') %>"); 
```

所以，我有一个错误，即 Partial name (partial: `&#x27;partials/lists/items&#x27;`) is not a valid Ruby identifier，类似这样的错误。

所以，实际上这种情况是由于`partials/lists/_items.erb , _items.erb`不是_items.html.erb，但我所做的是我在application_helper中创建了一个函数来呈现我的对象列表。所以，每个不同的模型我都可以渲染相同的布局。

我的问题是，我的 index.js.erb 如何能够正确呈现部分。我尝试将其更改为 _items.html.erb ，但对我来说出现了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:11:44.677

尝试将其嵌入为字符串，如下所示：

```
$('#item').html("#{escape_javascript(render :partial => '/partials/lists/items')}"); 
```

# html - wrapper-div 中跨度的非空边距

> ID：15268917
> 
> 赞同：0
> 
> 时间：2013-03-07T10:38:09.580
> 
> 标签：html, css

我对这个例子有疑问：http: [//jsfiddle.net/JYkUS/](http://jsfiddle.net/JYkUS/)

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>FSou1::Верстка макета</title>
        <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>
    <body>
        <div class="logo-wrapper">
            <div class="logo">
                <a href="#">
                    <img src="images/logo.png" alt="Logo" width="90" height="90" />
                </a>
            </div>
            <div class="logo-text">
                <span>Happy Nanny</span>
            </div>
            <div class="menu">
                <ul>
                    <li class="first"><a href="#">HOME</a></li>
                    <li><a href="#">SERVICES</a></li>
                    <li><a href="#">NEWS & PRESS</a></li>
                    <li><a href="#">FIND JOB</a></li>
                    <li><a href="#">CONTACTS</a></li>
                </ul>
            </div>
            <div class="clear"></div>
        </div>

        <div class="header">
            <div class="header-text">
                <span class="easy-way">THE EASY WAY</span>
                <span class="find-the-best">TO FIND THE BEST</span>

                <div class="clear"></div>

                <p>babysitters, childminders, nannies or private tutors</p>
            </div>
        </div>  
    </body>
</html> 
```

跨度与文本

```
<span class="easy-way">THE EASY WAY</span> 
```

默认有margin-left，但我不知道为什么。我真的不想为左边距设置一个负值。是否可以将此跨度与左边框对齐，为什么它现在具有这样的值的边距？

PS 在谷歌浏览器中观看（firefox 没有这个边距）

![在此处输入图像描述](../Images/32c4b62a0d75e76b4a940b5d43653d08.png)

**编辑：**

就当我删除这种风格：

```
.logo-wrapper .logo, .logo-wrapper .logo-text {
float: left;
} 
```

我的跨度到左边界 =\ 但为什么会这样？

**EDIT2：**其他方式，`<div class="clear"></div>`从'logo-wrapper'容器移动到根级别

```
<div class="logo-wrapper">
            <div class="logo"></div>
            <div class="logo-text"></div>
            <div class="menu"></div>
            <!-- FROM HERE -->
        </div>

        <div class="clear"></div> <!-- MOVE HERE -->

        <div class="header">
            <div class="header-text">
                <span class="easy-way">THE EASY WAY</span>
                <span class="find-the-best">TO FIND THE BEST</span>

                <div class="clear"></div>

                <p>babysitters, childminders, nannies or private tutors</p>
            </div>
        </div> 
```

但是还是不明白，为什么inner clear:both div后浮动仍然有效

**EDIT3：**是因为浮动：右菜单甚至比带有clear：both的div更“正确”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:41:16.727

边距实际上应用于 body 标签。您可以使用以下方法将其删除：

```
body {
    background: none repeat scroll 0 0 #F8F7E5;
    font-family: Arial;
    font-size: 100%;
    margin-left: 0;
    margin-top: 40px;
} 
```

**工作示例：http:** [//jsfiddle.net/JYkUS/2/](http://jsfiddle.net/JYkUS/2/)

这通常使用`reset.css`从页面中删除所有浏览器特定样式的文件来处理，因此您可以在创建跨浏览器兼容网页时从单个基点开始。我建议将这种策略应用于该站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:43:28.823

那是因为你没有设置`margin`身体`0`

做了`margin:40px 0 0 0`

```
body {
    margin: 40px 0 0 0;
    font-size: 100%;
    font-family: Arial;
    background: #f8f7e5;
} 
```

**[演示](http://jsfiddle.net/JYkUS/3/)**

# r - 生成独特的数字模式（例如 1221 被认为与 2112 相同）

> ID：15268921
> 
> 赞同：8
> 
> 时间：2013-03-07T10:38:17.433
> 
> 标签：r

我有一个包含 7 种不同稀释度的数据框，我想以所有可能的组合将它们分配到 3 个不同的箱中，以供以后在`lpSolve`. 我可以使用以下方法生成所有 2187 种可能的组合：

```
expand.grid(1:3, 1:3, 1:3, 1:3, 1:3, 1:3, 1:3) 
```

但是，由于实际的*bin 编号*并不重要（但位置很重要），因此在这种情况下，以下条目都被认为是相同的：

```
c(1, 1, 2, 2, 2, 3, 3)
c(2, 2, 3, 3, 3, 1, 1)
c(3, 3, 1, 1, 1, 2, 2)
c(3, 3, 2, 2, 2, 1, 1)
c(1, 1, 3, 3, 3, 2, 2)
... 
```

如何通过过滤`expand.grid`输出或使用另一个（自定义）函数仅生成唯一的“模式”。例如，上述`rle`所有向量的输出长度为`2 3 2`，但这也是`c(1, 1, 2, 2, 2, 1, 1)`不应被视为与上述相同的情况。

有什么快速的方法吗？我不需要超过 5 个容器和 8 个稀释度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:30:23.860

这？

```
data <- expand.grid(1:3, 1:3, 1:3, 1:3, 1:3, 1:3, 1:3)
len <- apply(data,1,function(x) c(rle(x)$lengths[1:7], nchar(paste(unique(sort(rle(x)$value)), collapse=''))))
data <- data[!(duplicated(t(len))), ] 
```

或者，正如@Arun 指出的那样：

```
data <- expand.grid(1:3, 1:3, 1:3, 1:3, 1:3, 1:3, 1:3)
len <- apply(data,1,function(x) c(rle(x)$lengths[1:7], length(unique(x))))
data <- data[!(duplicated(t(len))), ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:46:53.223

这是一个答案：

```
mat <- expand.grid(1:3, 1:3, 1:3, 1:3, 1:3, 1:3, 1:3)

mat <- t(apply(mat, 1, 
               function(x){
                 un <- unique(x)
                 map <- setNames(1:length(un), un)
                 map[as.character(x)]
               }))

mat <- mat[!duplicated(mat), ]
nrow(mat)
# [1] 365 
```

逻辑如下：让我们`c(3,3,1,2,1,2,3)`将其转换为`c(1,1,2,3,2,3,1)`，因为`3`是从一开始的第一个**唯一**数字，`1`是第二个，`2`是第三个。通过这种方式，我将所有行转换为相同的格式，它允许我使用`duplicated`. `setNames`在这里很有用，它创建了一个从一组整数到另一组整数的**映射：**

```
setNames(1:3,3:1)
3 2 1 
1 2 3 
setNames(1:3,3:1)[c("2","1")]
2 1 
2 3 
```

最后，证明：

![在此处输入图像描述](../Images/418ef632c7aa8ee328d9a96caa4f54fd.png)

其中考虑了使用一个、两个或三个不同数字的情况。特别是：[（一个数字占据所有 7 个位置）] + [（为一个数字选择 1 个位置，其余为另一个）+（为一个数字选择 2 个位置，其余为另一个）+（选择3 个位置，其余的都是另一个）] + [（第一个数字选择 1 个位置，第二个选择 1 个位置，其余的都是第三个数字。现在第 1 和第 2 被认为是相同的，并且它们都出现一次，所以我们必须将这个术语除以二）+ ...（与以前相同的逻辑）...]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:51:34.897

这是IMO的组合问题。

我认为对于 7 个元素，您要先选择 2 个，然后从剩余的 5 个中选择 2 个，这样总共有 210 个组合。

感谢 Arun，他指出组合 11 22 333 与 22 11 333 相同，我们可以推断，由于前 2 个元素是可以互换的，我们所需的组合数应该是 210 的一半，即 105

```
library(gtools)

# Let's create all possible permutations of 7 elements which will be equal to 7!
p <- permutations(7, 7, 1:7)

head(p)
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
## [1,]    1    2    3    4    5    6    7
## [2,]    1    2    3    4    5    7    6
## [3,]    1    2    3    4    6    5    7
## [4,]    1    2    3    4    6    7    5
## [5,]    1    2    3    4    7    5    6
## [6,]    1    2    3    4    7    6    5

# bin, sort and combine according to our binning vector c(1,1,2,2,3,3,3)
rp <- t(apply(p, 1, FUN = function(x) as.numeric(sapply(split(x, c(1, 1, 2, 2, 3, 3, 3)), FUN = function(x) paste0(x[order(x)], collapse = "")))))

head(rp)
##      [,1] [,2] [,3]
## [1,]   12   34  567
## [2,]   12   34  567
## [3,]   12   34  567
## [4,]   12   34  567
## [5,]   12   34  567
## [6,]   12   34  567

# sort individual combinations before removing duplicates
srp <- t(apply(rp, 1, function(x) x[order(x)]))

head(srp)
##      [,1] [,2] [,3]
## [1,]   12   34  567
## [2,]   12   34  567
## [3,]   12   34  567
## [4,]   12   34  567
## [5,]   12   34  567
## [6,]   12   34  567

# remove duplicates
srp[!duplicated(srp), ]
##        [,1] [,2] [,3]
##   [1,]   12   34  567
##   [2,]   12   35  467
##   [3,]   12   36  457
##   [4,]   12   37  456
##   [5,]   12   45  367
##   [6,]   12   46  357
##   [7,]   12   47  356
##   [8,]   12   56  347
##   [9,]   12   57  346
##  [10,]   12   67  345
##  [11,]   13   24  567
##  [12,]   13   25  467
##  [13,]   13   26  457
##  [14,]   13   27  456
##  [15,]   13   45  267
##  [16,]   13   46  257
##  [17,]   13   47  256
##  [18,]   13   56  247
##  [19,]   13   57  246
##  [20,]   13   67  245
##  [21,]   14   23  567
##  [22,]   14   25  367
##  [23,]   14   26  357
##  [24,]   14   27  356
##  [25,]   14   35  267
##  [26,]   14   36  257
##  [27,]   14   37  256
##  [28,]   14   56  237
##  [29,]   14   57  236
##  [30,]   14   67  235
##  [31,]   15   23  467
##  [32,]   15   24  367
##  [33,]   15   26  347
##  [34,]   15   27  346
##  [35,]   15   34  267
##  [36,]   15   36  247
##  [37,]   15   37  246
##  [38,]   15   46  237
##  [39,]   15   47  236
##  [40,]   15   67  234
##  [41,]   16   23  457
##  [42,]   16   24  357
##  [43,]   16   25  347
##  [44,]   16   27  345
##  [45,]   16   34  257
##  [46,]   16   35  247
##  [47,]   16   37  245
##  [48,]   16   45  237
##  [49,]   16   47  235
##  [50,]   16   57  234
##  [51,]   17   23  456
##  [52,]   17   24  356
##  [53,]   17   25  346
##  [54,]   17   26  345
##  [55,]   17   34  256
##  [56,]   17   35  246
##  [57,]   17   36  245
##  [58,]   17   45  236
##  [59,]   17   46  235
##  [60,]   17   56  234
##  [61,]   23   45  167
##  [62,]   23   46  157
##  [63,]   23   47  156
##  [64,]   23   56  147
##  [65,]   23   57  146
##  [66,]   23   67  145
##  [67,]   24   35  167
##  [68,]   24   36  157
##  [69,]   24   37  156
##  [70,]   24   56  137
##  [71,]   24   57  136
##  [72,]   24   67  135
##  [73,]   25   34  167
##  [74,]   25   36  147
##  [75,]   25   37  146
##  [76,]   25   46  137
##  [77,]   25   47  136
##  [78,]   25   67  134
##  [79,]   26   34  157
##  [80,]   26   35  147
##  [81,]   26   37  145
##  [82,]   26   45  137
##  [83,]   26   47  135
##  [84,]   26   57  134
##  [85,]   27   34  156
##  [86,]   27   35  146
##  [87,]   27   36  145
##  [88,]   27   45  136
##  [89,]   27   46  135
##  [90,]   27   56  134
##  [91,]   34   56  127
##  [92,]   34   57  126
##  [93,]   34   67  125
##  [94,]   35   46  127
##  [95,]   35   47  126
##  [96,]   35   67  124
##  [97,]   36   45  127
##  [98,]   36   47  125
##  [99,]   36   57  124
## [100,]   37   45  126
## [101,]   37   46  125
## [102,]   37   56  124
## [103,]   45   67  123
## [104,]   46   57  123
## [105,]   47   56  123 
```

# mysql - 从 TomCat 网络服务访问 MySQL - 找不到合适的驱动程序

> ID：15268927
> 
> 赞同：0
> 
> 时间：2013-03-07T10:38:24.710
> 
> 标签：mysql, tomcat, jdbc, tomcat7

我得到了一个工作 web 服务的 WAR 文件，它通过托管在 TomCat 7 中的 JDBC 访问 MySQL。

代码：

```
 private static final String db_jdbc_connection = "jdbc:mysql://localhost:3306/jsea";
 Class.forName("com.mysql.jdbc.Driver");
 con = DriverManager.getConnection(db_jdbc_connection, "root, "secret"); 
```

但是，这会导致以下错误：

```
No suitable driver found for jdbc:mysql://localhost:3306/jsea
  [ERROR] Exception occurred while trying to invoke service method clientSignUp
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

在 web 服务的 web-inf/LIB 文件夹中，存在以下 JAR 文件：

> mysql-connector-java-5.1.23-bin.jar

还尝试将此文件复制到 tomcat/lib 文件夹。

MySQL 配置了数据库 jsea，并且连接中提供的用户具有权限。

在 MySQL 日志中，我根本看不到任何条目。

我已经用谷歌搜索了几个小时，我真的不知道。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:08:04.177

没有合适的驱动程序”通常意味着您提供的用于连接的 JDBC URL 语法不正确，或者根本没有加载驱动程序。

当调用 getConnection 方法时，`DriverManager`将尝试从初始化时加载的驱动程序和使用与当前小程序或应用程序相同的类加载器显式加载的驱动程序中找到合适的驱动程序。（使用`Class.forName()`）

我建议放置`mysql-connector-java-5.1.23-bin.jar`在`/WEB-INF/lib`您的项目目录中并重新启动 Tomcat。此外，检查 Tomcat**日志**，您应该会发现一些异常情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:05:33.293

我真的不知道是什么导致了这个问题。我已经收到了webservice的源代码，清理了项目，重新构建，它突然工作了......

# android - 为什么我的应用程序缓存即使在删除后也不返回 null？

> ID：15268928
> 
> 赞同：1
> 
> 时间：2013-03-07T10:38:32.067
> 
> 标签：android, caching, android-networking

我正在开发一个使用 android 的 web 视图呈现移动网站的应用程序。我的应用程序能够在缓存的帮助下以离线模式显示网站。到这里一切都很好。现在我已经引入了一个清晰的缓存机制并得到了问题..

要了解该问题，请仔细查看通过登录屏幕上的登录按钮执行的登录步骤（我这里有两个按钮**1.**登录**2.**清除缓存）：

**步骤 1.**如果网络已*连接*，让用户进入应用程序内部并显示在线内容（缓存模式关闭）---> 工作正常...

**步骤 2.** else if 网络*断开*|| *暂停*|| *未知*，如果存在缓存，则显示缓存的内容。---工作正常。

问题来了：

让我们假设如果没有网络并且用户清除/已经清除，缓存然后登录然后根据我的逻辑他们应该无法登录但我的代码失败并且它登录用户看到这个[链接](http://pastebin.com/y3qZ28U5)

为了清除缓存，我做了类似这篇[文章的事情](https://stackoverflow.com/questions/9110096/android-clean-application-data)

让我知道是否有人需要进一步澄清。

任何帮助将不胜感激。

# api - 为什么 Opc.Ua.UserIdentity 不能将密码干净地发送到 OPC 服务器？

> ID：15268929
> 
> 赞同：1
> 
> 时间：2013-03-07T10:38:35.933
> 
> 标签：api, opc-ua

我对 UserIdentity(user, password) 构造函数有疑问。我的密码是 4 个字符长。当密码到达服务器时，它的长度为 36 个字符。前 4 个字符是我的密码 - 其余的是随机垃圾。

Opc.Ua.Client.dll 和 Opc.Ua.Core.dll 的版本为 1.0.238.1。

是什么原因造成的，我该怎么做才能正确发送密码？

**更新**

```
ApplicationConfiguration configuration = Helpers.CreateClientConfiguration();
X509Certificate2 clientCertificate = configuration.SecurityConfiguration.ApplicationCertificate.Find();
configuration.CertificateValidator.CertificateValidation += new CertificateValidationEventHandler(CertificateValidator_CertificateValidation);
EndpointDescription endpointDescription = Helpers.CreateEndpointDescription(Url);
EndpointConfiguration endpointConfiguration = EndpointConfiguration.Create(configuration);
endpointConfiguration.OperationTimeout = 300000;
endpointConfiguration.UseBinaryEncoding = true;
ConfiguredEndpoint endpoint = new ConfiguredEndpoint(null, endpointDescription, endpointConfiguration);
BindingFactory bindingFactory = BindingFactory.Create(configuration);

if (endpoint.UpdateBeforeConnect)
{
    endpoint.UpdateFromServer(bindingFactory); 
    endpointDescription = endpoint.Description;
    endpointConfiguration = endpoint.Configuration;
}

SessionChannel channel = SessionChannel.Create(
    configuration,
    endpointDescription,
    endpointConfiguration,
    bindingFactory,
    clientCertificate,
    null);

m_Session = new Session(channel, configuration, endpoint);
m_Session.ReturnDiagnostics = DiagnosticsMasks.All;

m_Session.KeepAlive += new KeepAliveEventHandler(Session_KeepAlive);
m_Session.Notification += new NotificationEventHandler(m_Session_Notification);

UserIdentity identity;
if (userName == null || userName.Length == 0)
{
    identity = new UserIdentity();
}
else
{
    identity = new UserIdentity(userName, password);
}

m_Session.Open("ATF UA client", identity);
log.Debug("Connect ok"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:55:59.537

其余的根本不是垃圾。它应该与您在 CreateSessionResponse 中发送到 OPC UA 客户端的 ServerNonce 相同。

根据 OPC UA 规范，UserIdentityToken 加密格式为：

*   长度 - 字节[4] => 密码长度
*   TokenData - Byte[*] => 你的密码
*   ServerNonce - 字节[*]

密码为 36 字节长，因为 OPC UA 服务器主要使用 32 字节的 ServerNonce，而您的密码为 4 字节长...

您还应该验证与该 UserIdentityToken 一起发送的 ServerNonce 是否与您在 CreateSessionResponse 中提供的相同。

# c# - 增加一个包含字母和数字的字符串

> ID：15268931
> 
> 赞同：11
> 
> 时间：2013-03-07T10:38:40.587
> 
> 标签：c#, .net

我有一个字符串，我需要增加 1 该字符串既有字符又有数值。

我的字符串布局如下“MD00494”

我如何将其增加到“MD00496”和“MD00497”等

如果它是带有数字的普通字符串，我会将其解析为 int。

我试过以下

```
 int i = int.Parse(sdesptchNo);
 i++;
 txtDispatchNo.Text = i.ToString(); 
```

任何人都知道我将如何解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T10:40:02.600

您首先应该弄清楚字符串之间的任何共性。如果最后总是有一个字母前缀后跟数字（具有固定宽度），那么您可以删除字母，解析其余字母，递增，然后再次将它们粘在一起。

例如，在您的情况下，您可以使用以下内容：

```
var prefix = Regex.Match(sdesptchNo, "^\\D+").Value;
var number = Regex.Replace(sdesptchNo, "^\\D+", "");
var i = int.Parse(number) + 1;
var newString = prefix + i.ToString(new string('0', number.Length)); 
```

另一个可能更强大的选项可能是

```
var newString = Regex.Replace(x, "\\d+",
    m => (int.Parse(m.Value) + 1).ToString(new string('0', m.Value.Length))); 
```

这将用相同宽度的递增数字替换字符串中的任何数字——但使每个非数字完全相同且位于相同的位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T10:44:57.993

这是一种非正则表达式方式：P

```
string str = "MD00494";
string digits = new string(str.Where(char.IsDigit).ToArray());
string letters = new string(str.Where(char.IsLetter).ToArray());

int number;
if (!int.TryParse(digits, out number)) //int.Parse would do the job since only digits are selected
{
    Console.WriteLine("Something weired happened");
}

string newStr = letters + (++number).ToString("D5"); 
```

输出将是：

```
newStr = "MD00495" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T10:42:49.513

假设您只需要增加字符串的数字部分，并且字符串的结构始终是 - 一堆非数字字符后跟一堆数字，您可以使用正则表达式将字符串分解为这些两个组件，将数字部分转换为整数，递增然后连接回来。

```
var match = Regex.Match("MD123", @"^([^0-9]+)([0-9]+)$");
var num = int.Parse(match.Groups[2].Value);

var after = match.Groups[1].Value + (num + 1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T10:41:46.563

您需要找到字符串中第一个数字的位置。然后将字符串拆分为 2 个字段。

0 1 2 3 4 5 6

MD 0 0 4 9 4

第一个字段将是非数字部分“MD”第二个字段将是数字部分“00494”

将仅数字部分增加到“00495”

您将丢失前导零，因此您需要在增加后用相同数量的零填充新数字。

然后加入 2 个字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T10:43:01.873

您可以使用正则表达式：

```
int kod = int.Parse(Regex.Replace(sdesptchNo, "[^0-9]", "")) + 1;

string zeroStr=Regex.Replace(sdesptchNo, "[^0-9]", "");
string newZeroStr="";
for (int x=0;x<zeroStr.length;x++)
     if (zeroStr[x]=='0') newZeroStr=newZeroStr+"0"; 
     else break;

string newVal=Regex.Replace(sdesptchNo, "[0-9]", "") + newZeroStr + kod; 
```

更新：这将保存您的零

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T11:02:40.703

这是我的解决方案：

```
string str = Console.ReadLine();
string digits = new string(str.Where(char.IsDigit).ToArray());
string letters = new string(str.Where(char.IsLetter).ToArray());
string newStr;
int number;

if (!int.TryParse(digits, out number)) 
{
  Console.WriteLine("Something weird happened");
}
if (digits.StartsWith("0"))
{
  newStr = letters + (++number).ToString("D5");
}
else
{
  newStr = letters + (++number).ToString();
} 
```

尝试一下！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T11:13:28.333

```
string sDispatchNo = "MS00914";
var pattern = @"^[a-zA-Z]+";
var strPart = Regex.Match(sDispatchNo, pattern).Value;
var noPart = Regex.Replace(sDispatchNo, pattern, "");
var no = int.Parse(noPart);
var length = noPart.Length;
length = (no + 1)/(Math.Pow(10,length)) == 1 ? length + 1 : length; 
var output = strPart + (no + 1).ToString("D" + length); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-16T14:56:39.183

我用它来增加/减少条形码

```
/// <summary>
/// Gets the number portion of the string and adds 1 to it
/// </summary>
public static string IncrementNumbers(this string numString)
{
  if (numString.IsEmpty())
    return numString;
  else if (!numString.Where(Char.IsDigit).Any())
    return numString;
  else
  {
    string prefix = Regex.Match(numString, "^\\D+").Value;
    string number = Regex.Replace(numString, "^\\D+", "");
    int i = int.Parse(number) + 1;
    return prefix + i.ToString($"D{numString.Length - prefix.Length}");
  }
}

/// <summary>
/// Gets the number portion of the string and subtracts 1 from it
/// </summary>
public static string DecrementNumbers(this string numString)
{
  if (numString.IsEmpty())
    return numString;
  else if (!numString.Where(Char.IsDigit).Any())
    return numString;
  else
  {
    string prefix = Regex.Match(numString, "^\\D+").Value;
    string number = Regex.Replace(numString, "^\\D+", "");
    int i = int.Parse(number) - 1;
    return prefix + i.ToString($"D{numString.Length - prefix.Length}");
  }
}

/// <summary>
/// Shortented IsNullOrWhiteSpace 
/// </summary>
public static bool IsEmpty(this string str)
{
  if (str.TrimFix() == null)
    return true;

  return false;
}

/// <summary>
/// Trims the String and returns Null if it's empty space
/// </summary>
public static string TrimFix(this string rawString)
{
  if (!string.IsNullOrWhiteSpace(rawString))
  {
    return rawString.Trim();
  }
  return null;
} 
```

# objective-c - 变换uibutton改变高度

> ID：15268937
> 
> 赞同：2
> 
> 时间：2013-03-07T10:38:47.227
> 
> 标签：objective-c, transform, frame

转换后 uibutton 更改高度和 setFrame 不起作用。在这之后。帮我。我的代码在这里：

```
NSLog(@"BEFORE_Frame_height = %f", nameBgBtn.frame.size.height);
NSLog(@"BEFORE_Bound_height = %f", nameBgBtn.bounds.size.height);
nameBgBtn.transform = CGAffineTransformMakeRotation(degreesToRadian(rndValue));
CGRect newFrame = CGRectMake(nameBgBtn.frame.origin.x,nameBgBtn.frame.origin.y, nameBgBtn.bounds.size.width, nameBgBtn.bounds.size.height);

[nameBgBtn setFrame: newFrame];
[nameBgBtn setBounds:newFrame];
NSLog(@"After_Frame_height = %f", nameBgBtn.frame.size.height);
NSLog(@"After_Bount_height = %f", nameBgBtn.bounds.size.height); 
```

我的记录器：

```
2013-03-07 15:30:23.887   BEFORE_Frame_height =  46.000000
2013-03-07 15:30:23.888   BEFORE_Bound_height =  46.000000
2013-03-07 15:30:23.888   After_Frame_height  =  49.887489
2013-03-07 15:30:23.888   After_Bound_height  =  46.000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:07:16.040

`frame`和之间是有区别的`bounds`，尤其是当您更改`transform`. 在您的代码中，您将两者混合在一起，结果不是您所期望的。

1.  您通过设置应用一些旋转`transform`。

2.  `origin`您使用**新框架**和大小创建矩形`bounds`。`bounds`没有改变使用`transform`.

3.  您将此矩形设置为`frame`. 视图不会移动（相同`origin`），但会按比例缩小，因为您正在更改外部尺寸。

4.  您将相同的 rect 设置为`bounds`. 我不确定如果您设置`bounds.origin`为非零值会发生什么，但按钮的内容可能会被翻译。它还会放大按钮，因为`bounds.size`设置为与以前相同。

要清楚：

*   `bounds`**=内部坐标系**中的矩形，通常`origin`为零（滚动视图除外）并具有所需的大小。
*   `frame`= rect in **superview (outer) coordinate system** , with any`origin`和 the`size` **可能与`bounds.size`**. `frame`是`center`,`bounds`和的计算`transform`。
*   `transform`= 如何`bounds`转换为 make `frame`。内部坐标到外部坐标的映射。

如果您有带尺寸的按钮`{50, 80}`并应用 90° 旋转，`bounds.size`则将是**相同的** `{50, 80}`，也`center`不会改变，但会`frame`反映新的转换后的尺寸`{80, 50}`。

我希望现在很清楚。

* * *

**更新：**`frame`这是一张显示和之间差异的图像`bounds`。
![框架与边界](../Images/58870c79c761c79e1c73c3ff096ac4a1.png)
暗方是`bounds`，浅方是`frame`。在第一张图片上，它们具有相同的大小。在第二张图片上，视图已旋转`transform`。

# javascript - Zepto 的 clone() 函数无法正常工作或无法将 clone() 与 find() 结合使用？

> ID：15268948
> 
> 赞同：0
> 
> 时间：2013-03-07T10:39:27.110
> 
> 标签：javascript, clone, zepto

我有一个简单的图像滑块，html 如下所示：

```
<ul id="gallery-slider">
    <li class="slide-li" >
        <img src="img1.png" width="1024" height="590" alt="img1">
    </li>
    <li class="slide-li" >
        <img src="img2.png" width="1024" height="590" alt="img2">
    </li>
    <li class="slide-li" >
        <img src="img3.png" width="1024" height="590" alt="img3">
    </li>
    ...
</ul> 
```

现在我想给它添加一些大拇指来概览图像。我想从幻灯片中的图像创建拇指。我正在使用 Zepto 并尝试了以下方法来获取图像并创建新图像：

```
//imageSlider is the image slider instance in use

for (var i = 1; i <= imageSlider.length; i++) {
    //find the image in li
    var img = $('#gallery-slider li').eq(i-1).find('img').clone().attr({'width': 268, 'height': 172});
        //view cloned element in console
        console.log(img);
    ...
    //here the img var will get pushed into an array
} 
```

现在，当您在控制台中吐出 img var 时，它会显示空对象。我认为问题在于 find() 函数，因为当我这样做时：

```
var img = $('#gallery-slider li').eq(i-1).clone(); 
```

img var 不为空——控制台输出显示克隆的 li 元素。这是一个错误还是我不能将 clone() 函数与 find() 结合使用？

**编辑：**

我也试过这个：

```
var img = $('#gallery-slider li').eq(i-1).find('img'),
    thumb = img.clone(); 
```

——同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:38:46.870

正如之前的讨论，在 chrome 和 firefox 中它可以正常工作，请参见[此处](http://jsfiddle.net/HWY5u/)。

然后我在 safari 中尝试了它。`console.log(img)`确实印空了。但后来我试了一下`console.log(img.length)`，它打印出来了`1`。

所以我认为**safari 的调试工具中可能存在一些错误**。

然后我忽略了结果`console.log()`并尝试使用克隆的元素和以下代码：

```
$('#gallery-slider').after(img); 
```

看看它是否真的是空的。

结果证明了我的看法。它工作得很好。

见[这里](http://jsfiddle.net/HWY5u/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:45:51.363

~~Zepto 没有克隆功能。作为参考，您可以使用[此图表](http://jsrun.it/21f/mrCH)。~~

您可以使用以下内容轻松实现克隆：

```
 $.fn.clone = function(){
          var ret = $();
          this.each(function(){
               ret.push(this.cloneNode(true))
          });
        return ret;
    }; 
```

从[这里](https://github.com/madrobby/zepto/issues/247)。

# python - 如何从 GitHub 安装 Python 包？

> ID：15268953
> 
> 赞同：293
> 
> 时间：2013-03-07T10:39:33.680
> 
> 标签：python, pip

我想使用 httpie 的一个新功能。此功能在 github repo [https://github.com/jkbr/httpie](https://github.com/jkbr/httpie)中，但不在 python 包索引[https://pypi.python.org/pypi/httpie上的发布中](https://pypi.python.org/pypi/httpie)

如何从 github repo 安装 httpie 包？我试过了

```
pip install https://github.com/jkbr/httpie 
```

但我收到一个错误“无法解包”

* * *

在 Nodejs 中，我可以像这样从 github 安装包

```
npm install git+https://github.com/substack/node-optimist.git 
```

* * *

## 回答 #1

> 赞同：472
> 
> 时间：2013-03-07T10:41:00.207

您需要使用正确的 git URL：

```
pip install git+https://github.com/jkbr/httpie.git#egg=httpie 
```

另请参阅 pip 文档的[*VCS 支持*部分](https://pip.pypa.io/en/stable/topics/vcs-support/)。

不要忘记包含[明确命名项目](https://pip.pypa.io/en/stable/cli/pip_install/#working-out-the-name-and-version)`egg=<projectname>`的部分；这样 pip 可以跟踪它的元数据，而无需运行 setup.py 脚本。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-03-07T10:46:44.247

要从 github 安装 Python 包，您需要克隆该存储库。

```
git clone https://github.com/jkbr/httpie.git 
```

然后从该目录运行 setup.py 文件，

```
sudo python setup.py install 
```

# grails - grails webflow中的sendResponse

> ID：15268958
> 
> 赞同：0
> 
> 时间：2013-03-07T10:39:37.603
> 
> 标签：grails

我想通过检查参数是否有效来检查是否允许用户启动流程。如果不是，我将发送错误 404。但在 webflow 中，不会发送错误响应。

webflow 总是返回状态 200。

有人有解决这个问题的方法吗？

```
def shortShopFlow = {
        onStart {
                log.info("starting a new shoppingCart traject")
                Boolean isValidShop = shopService.isValidShop(params.code as String, params.token as String)
                sessionFactory.currentSession.clear()

                if (!params.code || !isValidShop) {
                    response.sendError(404)
                    return
                }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:42:13.953

你可以做一些事情：

```
MyController{        
  def shortShopFlow = {
    onStart {
            log.info("starting a new shoppingCart traject")
            Boolean isValidShop = shopService.isValidShop(params.code as String, params.token as String)  
            sessionFactory.currentSession.clear()  

            if (!params.code || !isValidShop) {  
                return 404();
            }
           on('404').to ('pageNotFound');
    }
    pageNotFound{
        redirect(action: 'fourZeroFour');
    }
    def fourZeroFour = {
      response.sendError(404);
    }
} 
```

希望这可以帮助。

明哈吉

# c# - 从 C# 代码后面的邮件中导出和发送 excel 文件

> ID：15268960
> 
> 赞同：0
> 
> 时间：2013-03-07T10:39:47.210
> 
> 标签：c#, asp.net, email, export

我有一个链接，可以使用 rdlc（以 excel 格式）导出文件。但是现在当点击发送邮件时，会打开一个弹出窗口，文件应该被导出并添加为超链接中的附件，当点击发送邮件时，它也应该与邮件一起作为附件。我怎样才能在 C# 中这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:27:01.897

这对我有用。
只需与您的财产价值交换即可。

```
public void SendMail(string package, string mailTo, string subject, string body) {
    MailMessage mail = new MailMessage();
    mail.From = new MailAddress(mailAddr, alias);
    mail.Sender = new MailAddress(mailAddr, alias);
    mail.ReplyTo = new MailAddress(mailAddr, alias);
    string[] to = mailTo.Split(new char[] { ',', ';', '|', ' ' }, StringSplitOptions.RemoveEmptyEntries);
    for (int i = 0; i < to.Length; i++) mail.To.Add(to[i]);
    mail.Subject = subject;
    mail.Body = body;

    SmtpClient smtp = new SmtpClient(server, 25);
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = new System.Net.NetworkCredential("", "", "");
    smtp.EnableSsl = false;
    smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
    smtp.Send(mail);    
} 
```

# highcharts - 更改 HighChart 中的 zIndex

> ID：15268963
> 
> 赞同：2
> 
> 时间：2013-03-07T10:39:52.330
> 
> 标签：highcharts

使用 Highchart，我们如何根据其状态或从**点击**事件动态更改线条的**zIndex ？**

 **我试过了 ：

```
plotOptions: {
        series: {
               states: {
                     select: {

                            lineWidth: 2,
                            zIndex:10
                     }
               }, 
```

with :`this.setState(this.state === 'select' ? '' : 'select');`在**Click**事件中，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:31:08.310

好吧，它肯定不漂亮，但我找不到实际设置 zIndex 的方法，所以我不得不做一些操作来伪造它，并按照一定的顺序将每个系列放在前面。这是要包括的代码段：

```
Highcharts.Series.prototype.setState = (function (func) {
        return function () {
            if (arguments.length>0){
                if (arguments[0] !== ''){
                    if (typeof this.options.states[arguments[0]]['zIndex'] !== 'undefined'){
                        this.options.oldZIndex = this.group.zIndex;
                        this.group.zIndex = this.options.states[arguments[0]]['zIndex'];
                    }
                }else{
                    if (typeof this.options['oldZIndex'] !== "undefined"){
                        this.group.zIndex = this.options['oldZIndex'];
                    }
                }
                var order = [], i = 0;
                $.each(this.chart.series, function(){
                    order.push({id:i,zIndex:this.group.zIndex,me:this});
                    i++;
                });
                order.sort(function(a,b){return (a.zIndex>b.zIndex) ? 1 : -1;});
                $.each(order, function(){
                    this.me.group.toFront();
                });
                func.apply(this, arguments);
            }
        };
    } (Highcharts.Series.prototype.setState)); 
```

这是 JSFiddle 演示：

[http://jsfiddle.net/G9d9H/9/](http://jsfiddle.net/G9d9H/9/)

让我知道这是否是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T15:30:36.567

我认为更好的解决方案是在点击时设置 series.group.toFront() 方法（我更喜欢在鼠标悬停时使用它）

```
plotOptions: {
        series: {
            events: {
                click: function () {
                    this.group.toFront();//bring series to front when hovered over
                }
            }
        }
    } 
```**

# python - (domain.zzz domain.zz.zz domain.zz) 和 /something/ 的正则表达式

> ID：15268967
> 
> 赞同：0
> 
> 时间：2013-03-07T10:39:57.187
> 
> 标签：python, regex

尝试获取 domain.zz 或 domain.zzz 或 domain.zz.zz 或 /something。

```
import re
the_string = """lalalla?url=http2F%2Fdomain.zz%slgkfgs0s"""
the_string = """lalalla?url=http2F%2Fdomain.zz.zz/something%slgkfgs0sf"""
the_string = """lalalla?url=randomh564domain.zzz/something%slgkfgs0sf"""
the_string = """lalalla?url=randomeefsdlk876%domain.zz/something%slgkfgs0sf"""
the_string = """p%3A%2F%2Fdummy_test.com/ratata%2F&amp"""
the_string = """p%3A%2F%2Fdum2test.co.uk/something%2F&-kj""" 
```

这就是我现在拥有的：

```
>>> print( re.findall('(?:www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4})(?:/[a-z0-9]+)',the_string))
domain.zzz/something
domain.zz/something
domain.zz.zz/something

>>> print( re.findall('www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}',the_string))
domain.zzz
domain.zz
domain.zz.zz 
```

我想让这两组人回答一个问题。

编辑：这个几乎是完美的：'([a-z0-9.-]+[.][az]{2,4})|(?:/[a-z0-9]+)' 但它抓住了字符串开头的一些垃圾。

该字符串比本例中的随机得多：我关注的是这 3 种情况：

```
domain.co.uk/something
      ^  ^  ^
domain.com/something
      ^   ^
domain.com
      ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:24:50.627

试试这个，我不知道这是否完全符合你的要求，但也许你可以澄清问题，如果有问题，可以进一步模式......

```
print re.findall('=(?:[^@%/.]*(?:@|%(?:2F)?))?(?:www.)?(?P<domain>[^%@/]*)(?:/(?P<folder>[^%]*))?(?:[%@/].*)?$',the_string,re.MULTILINE) 
```

如果您愿意，您可以使用`match.group('domain')`和`match.group('folder')`

输出：

```
[('domain.zz', ''), ('domain.zz.zz', 'something'), ('randomh564domain.zzz', 'something'), ('domain.zz', 'something'), ('domain.zz.zz', 'something'), ('domain.zzz', 'something')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:04:38.710

这个怎么样：

```
import re
the_string = """lalalla?url=http@domain.zz%slgkfgs0sf"""
the_string = """lalalla?url=http@domain.zz.zz/something%slgkfgs0sf"""
#the_string = """lalalla?url=http@domain.zzz/something%slgkfgs0sf"""
#the_string = """lalalla?url=ht%domain.zz/something%slgkfgs0sf"""
#the_string = """lalalla?url=httpsd%domain.zz.zz/something%slgkfgs0sf"""
#the_string = """lalalla?url=www.domain.zzz/something%slgkfgs0sf"""

test = re.compile('(?P<base>[a-zA-Z0-9_\-\.]*?[a-zA-Z0-9_\-]+\.[z\.]+)(?P<extra>/[a-zA-Z0-9_\-]+)')

for match in test.finditer(the_string):
    print(match.group('base'))
    print(match.group('extra')) 
```

输出：

```
domain.zz.zz
/something 
```

这样，您将拥有“base”和“extra”中的两个数据......将它们组合起来以再次获得完整的字符串。

编辑：更新了模式以获得更好的域匹配并更改了 python 3 语法的打印

# java - 从 java 组件创建 rts

> ID：15268969
> 
> 赞同：2
> 
> 时间：2013-03-07T10:40:02.057
> 
> 标签：java, swing, rtsp, ip-camera

我正在尝试将我在`JPanel`（或其他摇摆容器）中显示的内容也显示为使用 rtsp 的视频。

我有一个从无人机到我的计算机的视频，我想将视频重定向到监控服务器。服务器只能添加ipcamera，无人机不能作为ipcamera。

我的想法是从无人机上获取视频并将我的计算机添加为“假”网络摄像机来流式传输无人机的视频。
有人可以帮我一些提示吗？

# github - 如何从 github 下载拉取请求中的文件？

> ID：15268971
> 
> 赞同：2
> 
> 时间：2013-03-07T10:40:07.823
> 
> 标签：github, ubuntu-12.04, pull-request

我正在尝试下载拉取请求中的这些文件：[https ://github.com/scikit-learn/scikit-learn/pull/1653](https://github.com/scikit-learn/scikit-learn/pull/1653)

这可以通过使用 git clone 的 linux 终端实现吗？

谢谢！

# android - Horizo ntalScrollView 没有在 android 中给出确切的滚动 X

> ID：15268975
> 
> 赞同：0
> 
> 时间：2013-03-07T10:40:14.493
> 
> 标签：android

我`HorizontalScrollView`在其中放置了一个宽度为 5000 像素的图像，基本上是一个比例。我已经覆盖了获取滚动 x 距离的`onScroll()`方法。`HorizontalScrollView`

当滚动到视图的末尾时，我在 distanceX 参数中得到的距离`onScroll()`不等于图像实际滚动的确切像素数。为什么不？

我正在使用 API 级别 9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:06:32.680

如果您的意思是您`GestureDetector.SimpleOnGestureListener`用于检测滚动并且您对 distanceX 感兴趣以获得开始滚动时保存 x 位置所需的总滚动距离，然后根据所有 onScroll 事件调整该位置。文档指出 distanceX 呈现：

distanceX 自上次调用 onScroll 以来沿 X 轴滚动的距离。这不是 e1 和 e2 之间的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T05:14:42.653

我希望这能帮到您

```
int scrollPos = (int) (horizontalScrollview.getScrollX()); 
```

# windows-phone-7 - Phonegap 构建 windows phone 7 应用程序磁贴标题

> ID：15268976
> 
> 赞同：1
> 
> 时间：2013-03-07T10:40:15.533
> 
> 标签：windows-phone-7, phonegap-build

当我将我的 pgb wp7 项目固定到开始屏幕时，磁贴标题是 cordova_1.5.0etc

我该如何改变它？

有没有办法在配置 .xml 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:54:33.420

在 WP7 项目的 WMManifest.xml 文件中，更改 Title 标签的值

```
<Tokens>
      <PrimaryToken TokenID="_7versionappToken" TaskName="_default">
        <TemplateType5>
          <BackgroundImageURI IsRelative="true" IsResource="false">Background.png</BackgroundImageURI>
          <Count>0</Count>
          **<Title>MyTileID</Title>**
        </TemplateType5>
      </PrimaryToken>
    </Tokens> 
```

# php - php输入值

> ID：15268979
> 
> 赞同：1
> 
> 时间：2013-03-07T10:40:26.213
> 
> 标签：php

我试图`<?=$value;?>`在 php 中理解这种语法，**例如：**

```
<input type="text" name="user" value="<?=$_POST["user"];?>" id="user"> 
```

据我了解，这不是一些 xml 语法，因为该文件必须是**.php**文件，此外：

```
<? ?> // short opening tags in the <?=$_POST["user"];?> syntax 
```

即使我设置了**short_open_tag = Off**也能正常工作，如果有人可以帮助我理解这个语法以及它是如何与**short_open_tag = Off**一起工作的，谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:44:17.130

尝试

```
<input type="text" name="user" value="<?=$_POST['user'];?>" id="user" /> 
```

你忘了`"`。

并且`<?=$_POST['user'];?>`是简单而简短的形式`<?php echo $_POST['user']; ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:48:10.837

是 .的`<?=$value;?>`简写语法`<?php echo $value; ?>`。

至于为什么即使`short_open_tags`关闭它也能工作；你在用`PHP >=5.4.0`吗？如果是这样，那是意料之中的；它总是可用的。见[这里](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:42:40.483

```
<input type="text" name="user" value=<?=$_POST["user"];?> id="user">

value=<?=$_POST["user"];?> 
```

表示您在名为“用户”的输入字段中输入并提交的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T10:46:14.960

`<? ?>`是一样的`<?php ?>`。由于他们将 php 值`$_POST["user"]`插入到他们正在使用的表单中`<? ?>`

# c# - 如果外键为空，则在 linq 查询中使用导航属性会引发错误

> ID：15268980
> 
> 赞同：0
> 
> 时间：2013-03-07T10:40:26.667
> 
> 标签：c#, linq, linq-to-entities

```
 var devSum = repository.Devices
            .Where(dev => dev.Id == deviceId)
            .SingleOrDefault();
        vmDeviceSummary result = new vmDeviceSummary
        {
          DeviceId = deviceId,

          DeviceName = devSum.Name,
          MacAddress = devSum.MacAddress,
          DeviceType = devSum.DeviceType.Name,
          Enabled = devSum.Enabled.ToString(),
          ConfigurationLoaded = devSum.ConfigurationLoaded.ToString(),
          AllowReload = devSum.AllowDataReload.ToString(),
          DataGroup = devSum.DataGroup.Name,
          ManagementGroup = devSum.ManagementGroup.Name,
        }; 
```

我认为这应该可以工作，但是如果指向 datagoups 或 managementGroup 实体的链接中的外键中有空值，则会引发错误。

我该如何解决这个问题，使它像一个外部连接并返回 null？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:43:22.070

它可能会有点难看，但你可以使用三元运算符来做到这一点：

```
DeviceType = devSum.DeviceType != null ? devSum.DeviceType.Name : null, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:55:51.903

用这个改变上面的代码

```
var devSum = repository.Devices .Where(dev => dev.Id == deviceId) .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:01:07.340

你可能需要做一个`Include`

```
var devSum = repository.Devices
            .Include("DeviceType")
            .Include("ManagementGroup")
            .Where(dev => dev.Id == deviceId)
            .SingleOrDefault(); 
```

# regex - 基于 Bash 的正则表达式域名验证

> ID：15268987
> 
> 赞同：2
> 
> 时间：2013-03-07T10:40:51.580
> 
> 标签：regex, bash, dns

我想创建一个脚本，将新域添加到我们的 DNS 服务器。我发现[完全限定域名验证](https://stackoverflow.com/questions/11809631/fully-qualified-domain-name-validation?answertab=active#tab-top)REGEX。但是，当我将它与 sed 一起使用时，它并没有像我预期的那样工作：

```
echo test | sed  '/(?=^.{5,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+(:[a-zA-Z]{2,})$)/p'  
--------
Output is: 
test
echo test.com | sed  '/(?=^.{5,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+(:[a-zA-Z]{2,})$)/p'  
--------
Output is: 
test.com 
```

我希望第一个命令的输出应该是一个空行。我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-11-10T18:02:57.180

我发现这是一个更全面的正则表达式：

`(?=^.{4,253}$)(^(?:[a-zA-Z0-9](?:(?:[a-zA-Z0-9\-]){0,61}[a-zA-Z0-9])?\.)+([a-zA-Z]{2,}|xn--[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])$)`

*   [RFC 1034§3：](https://www.rfc-editor.org/rfc/rfc1034#section-3 "RFC 1034")允许长度为 4-25 **3**，我所知道的最短操作域“t.co”仍然匹配其他答案不匹配的地方。255 字节是最大长度，减去每个标签（TLD 和“主”子域）的长度字节为 253：`(?=^.{4,253}$)`
    *   [RFC 3696§2](https://www.rfc-editor.org/rfc/rfc3696#section-2 "RFC 3696")：单字母 TLD*在*技术上是允许的，这意味着最小长度为 3，但由于目前没有单字母 TLD，最小长度为 4 是可行的。
*   [RFC 1034§3](https://www.rfc-editor.org/rfc/rfc1034#section-3 "RFC 1034")：允许子域中的数字，而 Conor Clafferty 显然不允许（通过不区分其他子域与“主要”子域 - 即您注册的域 - DNS 规范没有）
*   [RFC 1034§3](https://www.rfc-editor.org/rfc/rfc1034#section-3 "RFC 1034")：将单个标签限制为 63 个字符，允许在中间使用连字符，同时将开头和结尾限制为字母数字`(?:[a-zA-Z0-9](?:(?:[a-zA-Z0-9\-]){,61}[a-zA-Z0-9])?\.)`
*   需要两个字母或更大的 TLD，但可能是[punycoded](https://en.wikipedia.org/wiki/Punycode#Internationalized_domain_names) `([a-zA-Z]{2,}|xn--[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])`
    *   [RFC 3696§2](https://www.rfc-editor.org/rfc/rfc3696#section-2 "RFC 3696")：DNS 规范在技术上允许 TLD 中的数字以及单字母 TLD；但是，目前没有单字母 TLD 或带数字的 TLD，并且不允许使用全数字 TLD，因此这部分正则表达式已简化为`[a-zA-Z]{2,}`.

        - 或者 -

    *   [RFC 3490§5](https://www.rfc-editor.org/rfc/rfc3490#section-5)：国际化域名 ccTLD (IDN c​​cTLD) 可能是 punycoded，如“xn--”前缀所示，其后可能包含字母、数字或连字符。这近似于`xn--[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]`

        请注意，此模式不会*验证*punycode TLD！将容忍无效的 punycode，例如“xn--qqqq”，因为尝试根据适当的编码机制验证 punycode 超出了正则表达式的范围。虽然 punycode 本身在技术上允许以连字符结尾的编码字符串，但[RFC 3492§5](https://www.rfc-editor.org/rfc/rfc3492#section-5)遵守并尊重标签不能以连字符结尾的 IDNA 限制。

编辑 02/2021：向[user2241415 致敬](https://stackoverflow.com/users/2241415/)，指出 IDN c​​cTLD 与先前指定的正则表达式不匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:20:46.780

You are missing a question mark in your regex :

`(?=^.{5,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+(`**?**`:[a-zA-Z]{2,})$)`

You can test your regex [here](http://rubular.com/r/QmX59URV8D)

You can do what you want with grep :

```
$ echo test.com | grep -P '(?=^.{5,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+(?:[a-zA-Z]{2,})$)'
test.com
$ echo test | grep -P '(?=^.{5,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+(?:[a-zA-Z]{2,})$)'
$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-17T12:50:48.103

`sed`我知道没有实现支持您在该正则表达式中使用的各种 Perl 扩展。尝试使用 Perl 或`grep -P`or `pcregrep`，或将正则表达式简化为`sed`可以处理的东西。这是一个快速而肮脏的改编，它将正则表达式拆分为三个不同正则表达式的脚本，并在某些内容无法匹配（或匹配，在最中间的情况下）时拒绝。

```
echo 'test' | sed -r '/^.{5,254}$/!d
    /^([^.]*\.)*[0-9]+\./d   # Seems incorrect; 112.com is valid
    /^([a-zA-Z0-9_\-]{1,63}\.?)+([a-zA-Z]{2,})$/!d'  # should disallow underscore
    # also, what's with the question mark after the literal dot? 
```

这也完全无法接受 IDNA 域（其中可以包含 TLD 中的破折号和数字等）所以我绝对不推荐这个，但希望它向您展示如何适应这样的东西，`sed`如果您愿意的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T13:21:29.720

Pierre-Louis 的回答对我不太适用。例如，“小猫”被视为域名。我添加了一个细微的调整，以确保域中至少有一个点。

```
(?=^.{5,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+\.(?:[a-z]{2,})$) 
```

`\.`在它读取域的最后一部分之前有一个额外的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T17:17:05.847

我`grep -P`用来做这个。

```
echo test | grep -P "^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$" 
--------
Output is: 

echo www.test.com | grep -P "^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$"
--------
Output is: www.test.com 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-02-05T22:19:51.077

如果域必须存在，您可以尝试：

```
$ cat test.sh
#!/bin/bash

for h in "bert" "ernie" "www.google.com"
do
    host $h 2>&1 > /dev/null
    if [ $? -eq 0 ]
    then
        echo "$h is a FQDN"
    else
        echo "$h is not a FQDN"
    fi
done

jalderman@mba:/tmp$ ./test.sh 
bert is not a FQDN
ernie is not a FQDN
www.google.com is a FQDN 
```

# biztalk - Biztalk 编排查询

> ID：15268991
> 
> 赞同：2
> 
> 时间：2013-03-07T10:41:11.940
> 
> 标签：biztalk

我们可以将两个不同的 WCF-BasicHttp 发送端口绑定到同一个编排中指向不同的 Web 服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:48:14.307

如果您想在合同级别拥有两种不同的服务（不同的操作/消息类型），则必须在编排中指定两个逻辑端口。如果您想调用相同的 Web 服务（在合同级别），您有三个选项。按照我个人的喜好： - 直接绑定逻辑端口 - 角色链接（使用角色链接）并根据您的内部逻辑定义一方 - 创建两个相同端口类型的不同端口并将您的消息发送到正确的端口，根据你的逻辑

干杯

# linux - 用于执行以下程序的 awk 或 shell 脚本

> ID：15268996
> 
> 赞同：1
> 
> 时间：2013-03-07T10:41:32.917
> 
> 标签：linux, shell, unix, awk, grep

```
mansa, amit, janani ,[rakesh]
aruna,mahesh,,prathiksha 
```

这是我的输入。我需要一个 shell 脚本或 awk 命令，它以下列方式为我提供输出

```
mansa
amit
janani 
rakesh
aruna
mahesh
prathiksha 
```

该脚本应删除所有 , 的括号。

我试过这个

```
awk -F "\[\][,]+" '{for(i=1;i<=NF;i++){print $i}}' 
```

但它在每条记录后多打印一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:47:15.060

更容易`grep`：

```
$ grep -o '[a-z]\+' file
mansa
amit
janani
rakesh
aruna
mahesh
prathiksha 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:25:42.827

另一种选择可能是`tr`：

```
tr -cs '[:alpha:]' '[\n*]' < file 
```

* * *

尽管如果有前导空格，它会创建空行，然后可以将其过滤掉：

```
tr -cs '[:alpha:]' '[\n*]' < file | awk NF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:12:10.947

假设您只想删除方括号并从逗号分隔符中拆分项目，您可以使用以下内容：

```
perl -pe 's/,+/,/g ; s/[\[\]]//g ; s/\s*,\s*/\n/g' foo.txt 
```

我推荐这种方法的原因是如果您的命名值中有数字或您可能想要保留的其他非字母字符。

上面的 perl 表达式包含 3 个正则表达式。第一部分将多个逗号减少为一个（以避免逗号之间出现空值。第二部分删除方括号。第三部分通过用换行符替换逗号（左侧或右侧有空格）来拆分值。

输出如下：

```
mansa
amit
janani
rakesh
aruna
mahesh
prathiksha 
```

# python - 在 Python.SocketServer.TCPServer 中有很长的 request_queue_size 是否危险？

> ID：15268997
> 
> 赞同：4
> 
> 时间：2013-03-07T10:41:41.833
> 
> 标签：python

我将运行一个小型服务器，继承自`Python.SocketServer.TCPServer`. 如果代码太慢，我可以让它线程化或者只是扩大队列大小，运行时间会更长。将 request_queue_size 设置为较大的值（比如几千）是否有任何危险？在我的程序中唯一非常重要的是我不会丢失任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:53:42.140

根据您的操作系统，最大值`request_queue_size`将为 128（至少这是 Linux 和 Mac OS X 上的*默认最大大小）。*较高的值不会给出错误，但只会默默地受到限制。

我认为更高的值不一定是一个问题，尽管我会认真考虑使用某种形式的线程（或者，如果合适的话，使用异步解决方案`gevent`或类似的东西）。该`SocketServer`模块提供了用于创建线程或分叉套接字服务器的 mixin。