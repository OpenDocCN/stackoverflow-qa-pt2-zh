# StackOverflow 问答 14246000-14246999

# ruby-on-rails - 表单中相同模型的多个实例 - 解析参数哈希

> ID：14246000
> 
> 赞同：2
> 
> 时间：2013-01-09T20:36:57.297
> 
> 标签：ruby-on-rails

在大多数情况下，我无疑是一个真正的新手，包括形成和解析参数哈希。我正在尝试从投票应用程序的表单中获取相同模型实例的哈希值。用户可以根据排名为任意数量的候选人投票。

My`votes#new`确实使用和正确设置创建`Candidate.count`了 Vote 实例。我知道这一点，因为表格正在为每个候选人正确地迭代。`user_id``rank``@user.votes`

这是呈现形式的片段：

```
<input id="vote_rank" name="vote[rank]" type="hidden" value="1" />
<label for="vote_Candidate">Candidate</label>
<select id="vote_candidate_id" name="vote[candidate_id]"><option value=""></option>
<option value="1">Smithers</option>
<option value="2">Mr. Burns</option>
<option value="3">Bart</option>
<option value="4">Lionel Hutz</option>
<option value="5">Jimbo</option>
<option value="6">Troy McClure</option>
<option value="7">Duffman</option>
<option value="8">Maggie</option>
<option value="9">Moe</option>
<option value="10">Principal Skinner</option>
<option value="11">Apu Nahasapeemapetilan</option></select> 
```

我不知道如何将集合从表单恢复到我的`votes#create`. 我能够使用一组`candidate_id`和`rank`值（最后一个）获得一个参数哈希，但并不是我一开始就卡在其中的所有 11 个实例。表单*想要*放弃正确的数据。

`@user.votes.create(vote_params)`in`votes#create`抛出此错误：`undefined method `stringify_keys' for "rank":String`

这是我的控制器方法和表单。

```
def new
  @user = current_user
  @votes = Candidate.count.times { |i| @user.votes.build(:rank => i + 1) }
end

def create
  @user = current_user
  #params[:user][:votes].each do |vote_params|
  #@user.votes.create(vote_params)
  params[:vote].each do |vote_params|
    @user.votes.create(vote_params)
  end
  respond_to do |format|
    if @user.valid?
      format.html { redirect_to @user, notice: 'votes were successfully created.' }
    else
      format.html { render action: "new" }
    end
  end
end

<%= form_for :votes, :url => votes_path do |f| %>
  <% @user.votes.each do |v| %>
    <%= fields_for v do |vote_fields| %>
      <%= vote_fields.hidden_field :rank %>
      <%= vote_fields.label "Candidate" %>
      <%= vote_fields.collection_select :candidate_id, Candidate.all, :id, :name, :include_blank => true %>
    <% end %>
  <% end %>
  <p><%= f.submit :class => 'medium radius button' %></p>
<% end %> 
```

这是相关的HTML

只有一组值被传递：

```
{"utf8"=>"✓", "authenticity_token"=>"bVLXCQtOffEtu5xBNI0e94o9j9mJ8alHhuBhDkkfaRA=", "vote"=>{"rank"=>"11", "candidate_id"=>""}, "commit"=>"Save Votes", "action"=>"create", "controller"=>"votes"} 
```

尽管表单试图放弃正确的值：

```
vote[rank]:1
vote[candidate_id]:2
vote[rank]:2
vote[candidate_id]:4
vote[rank]:3
vote[candidate_id]:2
vote[rank]:4
vote[candidate_id]:9
etc. (up to 11!) 
```

任何帮助表示赞赏。

**更新：**

解决了它。我提出这个以防万一它对某人有帮助，因为我没有直接找到任何东西，而且我花了很长时间才解决这个问题。

我的表单正在创建名称相同的对象，这些对象只是被覆盖了。解释了为什么我只能将最后一组值输入数据库。

我的表单现在遍历传递的对象，`votes#new`并在名称中包含投票的排名。

```
<%= form_for :vote, :url => votes_path do |f| %>
  <% @user.votes.each do |v| %>
    <% if v.errors.any? %>
      <h1>errors</h1>
    <% end %>
  <%= f.fields_for "#{v.rank}" do |builder| %>
    <%= builder.hidden_field :rank, :value => v.rank %>
      <div class="row">
        <div class="one columns"><%= builder.label "Rank #{v.rank}", :class => "left inline" %></div>
      <div class="eleven columns"><%= builder.collection_select :candidate_id, Candidate.all, :id, :name, {:include_blank => true}, :class => "two" %></div>
      </div>
    <% end %>
  <% end %>
  <%= f.submit "Submit", :confirm => "Please review your ballot and confirm that your votes are correct before submitting. This message will appear as a reminder each time you press 'Submit', even if you've edited your ballot.", :class => "small round button" %>
<% end %> 
```

这会产生一个`params[:vote]`唯一命名的哈希值，例如

```
{"1"=>{"rank"=>"1", "candidate_id"=>"5"}, "2"=>{"rank"=>"2", "candidate_id"=>"2"}, "3"=>{"rank"=>"3", "candidate_id"=>"7"}, "4"=>{"rank"=>"4", "candidate_id"=>"4"}, "5"=>{"rank"=>"5", "candidate_id"=>"10"}, "6"=>{"rank"=>"6", "candidate_id"=>""}, "7"=>{"rank"=>"7", "candidate_id"=>""}, "8"=>{"rank"=>"8", "candidate_id"=>""}, "9"=>{"rank"=>"9", "candidate_id"=>""}, "10"=>{"rank"=>"10", "candidate_id"=>""}, "11"=>{"rank"=>"11", "candidate_id"=>""}} 
```

我的`votes#create`方法将由参数散列中的键/值对组成的数组转储到`@user.votes.create(my_array)`

```
def create
  @user = current_user
  @user.votes.create(sanitize_and_compress_vote_array params[:vote])
    redirect_to thankyou_path
end 
```

然后下一个挑战是让验证错误消息正常工作。这超出了我的想象，因为我要验证的是一个键值对数组，在任何值进入数据库之前，其`candidate_id`作用域的唯一性。`user_id`看起来 Rails 并没有让这变得容易。

```
validates :candidate_id, :presence => true, :uniqueness => {:scope => :user_id, :message => "You may only vote for a candidate once."} 
```

验证可以很好地拒绝重复值，但它没有用，因为那些已经通过的值显然已经在数据库中了。我还没有发现如何在保存之前验证集合成员对自己的验证，我觉得我在自言自语:-(

# jakarta-ee - JBoss：未找到受信任的证书

> ID：14246001
> 
> 赞同：0
> 
> 时间：2013-01-09T20:36:58.320
> 
> 标签：jakarta-ee, jboss, ssl-certificate

我们的外部供应商 WS 使用“自签名证书”，我完全按照以下线程中给出的说明在信任库中下载并导入了证书：

[数字证书：如何使用将 .cer 文件导入 .truststore 文件？](https://stackoverflow.com/questions/373295/digital-certificate-how-to-import-cer-file-in-to-truststore-file-using)

我还通过运行以下命令验证了证书是否已正确添加：

```
keytool -list -v -keystore keystore.jks 
```

我在我的 run.config (JBoss) 文件中添加了以下条目：

```
if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS="-Xms1024m -Xmx2048m -XX:MaxPermSize=256m -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djavax.net.ssl.trustStore=/jboss/jdk1.6.0_25/jre/lib/security/cacerts -Djavax.net.ssl.trustStorePassworld=changeit"
fi 
```

重新启动服务，仍然得到以下执行：

```
ERROR [org.jboss.ws.core.CommonClient] Exception caught while (preparing for) performing the invocation: 
java.io.IOException: Could not transmit message 

....
....
....

Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: No trusted certificate found 
```

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:53:46.500

您是否使用相同的 JVM（您在属性 javax.net.ssl.trustsotre 中指向的那个）来运行您部署应用程序的 JBoss 实例？

如果是这样，并且假设您似乎已经在 J​​VM-JRE cacerts 文件中安装了可信证书，则您不需要指定这些属性（trustStore 和 trustStorePassword），因为默认情况下 JVM 在 $JAVA_HOME/ 中查找可信证书jre/lib/security/cacerts（仅当您想使用另一个密钥库时才需要定义这些属性）

啊，请注意，要验证证书是否正确安装在 cacerts 中，您应该使用您指定的相同命令，但将 -keystore 参数指向 $JAVA_HOME/jre/lib/security/cacerts（不是 keystore.jks）。

# regex - 使用 Perl，将目录中的文件列表推送到数组中，除了一些基于文件名的选择文件

> ID：14246008
> 
> 赞同：0
> 
> 时间：2013-01-09T20:37:21.890
> 
> 标签：regex, perl, archive-tar

我正在通过网页上传 tarball，将其放入 /tmp/ 然后询问此脚本（将通过 crontab 调用）：

1.）提取它

2.）构建目录中所有文件的列表（仅文件和递归）

3.）在每个文件中搜索一个字符串并将该文件名和匹配字符串的行打印到文件中。

一切都在我想在（提取的 tarball）目录中构建文件列表的部分工作。如果我*不放*“！” 在我的代码中第 6 行的正则表达式前面（仅匹配 .bak、.conf、.cfg 的文件），然后我在 @filelist 中只得到十几个文件（正如我所料，由在线代码打印13）。

但是，如果我放一个“！” 在第 6 行的正则表达式前面（旨在匹配*除*这些文件之外的所有内容），第 13 行将打印所有文件名，包括具有 .bak、.conf 和 .cfg 扩展名的文件。

除了我不关心的那些之外，如何在（提取的 tarball）目录中获取文件名的集合？

这是我的代码，大致（精简，未经测试）。我是一个 perl 新手，所以我为我在这里的丑陋道歉，但它就是这样。

```
 1    sub loadFiles {
 2        my $dir=shift;
 3        find(\&recurDir,"$dir");
 4    }
 5    sub recurDir {
 6        if ( $File::Find::name =~ /(\.bak|\.conf|\.cfg)$/i ) {
 7            push @filelist, $File::Find::name;
 8        }
 9        print "$File::Find::name\n";
10    }
11    sub searcher {
12        my $file=$_;
13        print "Searching $file\n";
14    }
15    my $tarball = '/tmp/mytarball.tar.gz';
16    my $ae = Archive::Extract->new( archive=>$tarball ) || die ("$!");
17    $ae->extract( to=>$UPLOAD_DIR ) || die ("$ae->error");
18    my $dir_loc = File::Spec->catfile( $UPLOAD_DIR, $ae->files->[0]);
19    loadFiles("$dir_loc");
20    find(\&searcher, @filelist); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:58:01.570

在第 7 行添加一个目录`@filelist`，然后在第 13 行打印该目录及其子目录中的所有文件。

第 6 行应该是：

```
if ( -f $File::Find::name && $File::Find::name !~ /\.(?:bak|conf|cfg)\z/i ) { 
```

第 13 行应该是：

```
searcher($_) for @filelist; 
```

`searcher`应该：

```
sub searcher {
   my ($file) = @_;
   print "Searching $file\n";
} 
```

* * *

避免全局变量，整体看起来像：

```
sub loadFiles {
    my $dir=shift;

    my @filelist;
    my $wanted = sub {
        return if $File::Find::name =~ /\.(?:bak|conf|cfg)\z/i;
        return if !-f $File::Find::name;
        push @filelist, $File::Find::name;
    };

    find($wanted, $dir);
    return @filelist;
}

sub searcher {
    my $file=shift;
    print "Searching $file\n";
}

searcher($_) for loadFiles($dir_loc); 
```

（从技术上讲，您可以`searcher($File::Find::name);`直接执行此操作，而不是将`push`其写入数组，然后再循环遍历该数组。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:02:56.497

```
my $tarball = '/tmp/mytarball.tar.gz';
my $ae = Archive::Extract->new( archive=>$tarball ) || die ("$!");
my @files;
$ae->extract( to=>$UPLOAD_DIR ) || die ("$ae->error");
for my $file (@{$ae->files}) {
  push @files, $file if $file =~ /(\.bak|\.conf|\.cfg)$/i );
} 
```

# java - 哪个更适合静态数据 - final char 或 enum？

> ID：14246010
> 
> 赞同：2
> 
> 时间：2013-01-09T20:37:26.400
> 
> 标签：java, enums, char, int, poker

关于我的扑克 Java 程序，选择枚举而不是字符和整数是一个明智的决定吗？

据我所知，将单独的整数值分配给 char 具有在比较卡片值以确定获胜者时易于应用数学运算符的好处。但是，如果是这样，我不知道枚举可能会这样做。

请有人可以向我解释每个的 adv/disadv 吗？

我声明卡等级的第一个选择是枚举：

```
public enum Rank { 
     DEUCE (1), 
     THREE (2), 
     FOUR (3), 
     FIVE (4), 
     SIX (5),     
     SEVEN (6), 
     EIGHT (7), 
     NINE (8), 
     TEN (9), 
     JACK (10), 
     QUEEN (11), 
     KING (12), 
     ACE (13)
}

public enum Suit { 
     CLUBS (1), 
     DIAMONDS (2), 
     HEARTS (3), 
     SPADES (4) 
} 
```

我的第二个选项是作为静态最终字符分配 int 值，如下所示：

```
 public static final char ACE =   'A';
       public static final char TWO =   '2';
       public static final char THREE = '3';
       public static final char FOUR =  '4';
       public static final char FIVE =  '5';
       public static final char SIX =   '6';
       public static final char SEVEN = '7';
       public static final char EIGHT = '8';
       public static final char NINE =  '9';
       public static final char TEN =   'T';
       public static final char JACK =  'J';
       public static final char QUEEN = 'Q';
       public static final char KING =  'K';

         public Rank (char c)
         {
             switch (c)
             {
             case TWO:
                 _val = 0;
                 break;
             case THREE:
                 _val = 1;
                 break;
             case FOUR: 
                 _val = 2;
                 break;
             case FIVE: 
                 _val = 3;
                 break;
             case SIX:
                 _val = 4;
                 break;
             case SEVEN:
                 _val = 5;
                 break;
             case EIGHT:
                 _val = 6;
                 break;
             case NINE: 
                 _val = 7;
                 break;
             case 'T':
                 _val = 8;
                 break;
             case 'J':  
                 _val = 9;
                 break;
             case 'Q':
                 _val = 10;
                 break;
             case 'K': 
                 _val = 11;
                 break;
             case 'A':
                 _val = 12;
                 break;
             default:
                 _val = -1;
             }
         } 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:39:31.843

我宁愿`Enum`. 代码看起来更简洁，IDE 可以帮助您避免在`switch`语句中遗漏大小写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T20:42:54.543

我建议你阅读Joshua Bloch 的 Effective Java 中的[Item 30: Use enums instead of int constants](http://my.safaribooksonline.com/book/programming/java/9780137150021/enums-and-annotations/ch06lev1sec1)。它解释了使用枚举而不是 int 常量的许多优点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T20:48:24.813

使用枚举。因为：

*   风格 - 它们看起来更好更干净
*   IDE 集成 - IDE 可以提示您进行有效输入
*   方法可以传递枚举，这些枚举会自动进行范围检查（见下文）
*   枚举可以具有返回值和/或进行计算的方法
*   您正在处理的数据具有永远不会改变的明确值范围，因此为每个值定义一个枚举实例是有意义的

考虑这种方法：

```
public static char addCards(char a, char b); 
```

我可以用无效输入调用它

```
addCards('x', '$'); 
```

没有内置的范围检查`char`。但是使用枚举，它是免费的。

至于你的排名问题，使用枚举你可以简单地做到这一点

```
Rank r1, r2;
boolean r1RankedHigherThanR2 = r1.ordinal() > r2.ordinal(); 
```

您定义枚举实例的顺序足以传达排名顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:42:32.067

枚举有一个序数（从 0 开始）。因此，您可以使用它对它们进行排名，并且您可能不应该重复它。例如 KING.ordinal()。

另外，顺便说一句，扑克套装没有等级 - 你的套装按桥牌顺序排列。

# mysql - 哪个更快： COUNT(DISTINCT Column) vs. COUNT(*) ... GROUP BY Column

> ID：14246012
> 
> 赞同：4
> 
> 时间：2013-01-09T20:37:32.810
> 
> 标签：mysql, count, distinct

我正在使用 MySQL，并且我已经阅读了几次`COUNT(*)`通常比`COUNT(Column)`.

但是，我需要获得`COUNT`不同**的**行。据我了解，我可以通过两种不同的方式做到这一点：

`a) SELECT COUNT(DISTINCT Column) ...`

或者

`b) SELECT COUNT(*) ... GROUP BY Column`

一般来说，哪个**更快**？如果它*取决于*，那么它取决于*什么*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:17:51.640

`SELECT COUNT(*) FROM table GROUP BY column`返回按列分组的每个值的行数，而不是组数。

`SELECT COUNT(DISTINCT column) FROM table`返回组的数量（尽管您也可以使用`GROUP BY`查询中的行数来获得它）。

# r - 将标题作为 R 中的列表添加到绘图函数

> ID：14246013
> 
> 赞同：1
> 
> 时间：2013-01-09T20:37:40.693
> 
> 标签：r, list, function, plot, title

我正在使用此代码在单个页面中绘制变量列表：

```
plot30 <- list(HMn25_30,HMn28_30,HMn29_30,HMn31_30,HMn32_30)

par(mfrow=c(2,3))
for (i in plot30)  {
  plot(i, type = "o", pch = 16, lty = 2, col = "Black", xlab = "Hour  2007/09/30" , ylab = "Ambient Tempreture")
} 
```

此代码的结果： ![在此处输入图像描述](../Images/6bc81f89b69c78db423301d7eb490ecc.png)

我想在图中添加诸如 {Node 25,Node 28,Node 29,Node 31,Node 32} 之类的标题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:50:31.290

尝试在你的 for 循环中添加以下内容

```
plot30 <- list(HMn25_30,HMn28_30,HMn29_30,HMn31_30,HMn32_30)
Main <- c('Node 25','Node 28','Node 29','Node 31','Node 32')

par(mfrow=c(2,3))
for (i in seq_along(plot30))  {
  plot(plot30[[i]], type = "o", pch = 16, lty = 2, col = "Black", xlab = "Hour  2007/09/30" , ylab = "Ambient Tempreture", main=Main[i])
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:49:20.493

这是您应该扩展的结构：

```
plot30 <- list(myplot)
names(plot30)<- c('myplot1') 
for (i in seq_along(plot30) )  {pname <- names(plot30)[i]
  plot(plot30[i],  main=pname)
} 
```

# html - 为什么我的 DIV 孩子的身高与父母的身高不同

> ID：14246020
> 
> 赞同：0
> 
> 时间：2013-01-09T20:38:08.717
> 
> 标签：html, css

我已经为此苦苦挣扎了一段时间，似乎找不到任何解决方案。我有一个**框架**、一个**顶盒**、一个**左盒**和一个**右盒**以及一个包含最后两个的**中间盒。**

我希望这些是**框架**的高度减去**机顶盒**的高度。这将导致框架被填充，仅此而已，什么也没有。

我当前的代码有什么问题，什么是实现这一目标的正确方法？

这是代码：

```
<html>
    <head>
        <style type="text/css">
            #frame {
                width: 800px;
                min-height: 500px;
                border: 1px solid black;
            }

            #top {
                width: 800px;
                height: 80px;
                float: left;
                background-color: #666;
            }

            #middle {
                width: 800px;
                height: 100%;
                float: left;
            }

            #left {
                width: 200px;
                height: 100%;
                float: left;
                background-color: #B3B4BD;
            }

            #right {
                width: 600px;
                height: 100%;
                float: left;
                background-color: #99BC99;
            }
        </style>
    </head>
    <body>
        <div id="frame">
            <div id="top">Top</div>

            <div id="middle">
                <div id="left">Left</div>
                <div id="right">Right</div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:01:05.170

除非您明确设置父级的高度，否则您不能指定 100% 的高度。原因是父级通常会扩展高度以适应其子级，您需要指定一个准确的高度，以便父级及时知道它的高度是多少，以便其子级需要它。

也就是说，有很多方法可以达到类似的效果。例如，如果一个 div 通常比另一个高，那么您可以使用绝对定位将第二个 div 拉伸到相同的高度。或者，如果你真的很绝望，那么你可以使用一张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:55:52.993

尝试使用比例而不是精确像素。

```
 #frame {
         width: 80%;
         min-height: 500px;
         border: 1px solid black;
         margin-right:auto;
         margin-left:auto;

        }

        #top {
            width: 100%;
            height: 80px;
            float: left;
            background-color: #666;
        }

        #middle {
            width: 100%;
            height: 100%;
            float: left;
        }

        #left {
            width: 33%;
            height: 100%;
            float: left;
            background-color: #B3B4BD;
        }

        #right {
            width: 66%;
            height: 100%;
            float: left;
            background-color: #99BC99;
        } 
```

[jsFiddle](http://jsfiddle.net/LPwAs/)

这是带有更新的 CSS 的演示的屏幕截图： ![带有更新 CSS 的演示屏幕截图](../Images/e227c1fcd57109798410102e42224bd6.png)

# c# - 在构造函数c#中设置程序集标题

> ID：14246023
> 
> 赞同：1
> 
> 时间：2013-01-09T20:38:28.220
> 
> 标签：c#, .net

基本上我想在我的构造函数中设置 AssemblyTitle，这样做的原因是因为我有几个版本的程序并且它们都共享相同的 AssemblyInfo.cs

我正在寻找类似的东西

```
AssemblyTitleAttribute title = "Full Version"; 
```

但这一个不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:49:23.270

该属性是一个编译时间常数，因此它不能是“在构造函数中”，您有两个选择：

1.  完整版独有的类具有`[assembly: AssemblyTitle("Sandbox Console")]`（在声明命名空间之前放置）
2.  使用`#if`AssemblyInfo.cs 中的 a 来选择名称并设置构建环境以在`Conditional Compilation Symbols`Properties`Build`选项卡中定义指令。

```
// 组装信息.cs

//（截图）

[程序集：AssemblyCopyright("Copyright © 2011")]
[组装：组装商标（“”）]
[组装：组装文化（“”）]
#if 完整版本
    [程序集：AssemblyTitle("XYZ App (完整版)")]
＃别的
    [程序集：AssemblyTitle("XYZ App (试用版)")]
＃万一

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:41:56.807

您可以在 AssemblyInfo.cs 文件中进行设置。我认为您无法在其他地方更改它。无论如何，您无法在运行时动态设置它，因此不妨将其设置在自定义类中。

您需要重新编译程序集才能更改名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:50:07.293

该属性附加到已编译的程序集，不能在运行时修改。除非您更改它并编写一个新的程序集文件（根据 MSDN 示例：http: [//msdn.microsoft.com/en-us/library/system.reflection.assemblytitleattribute.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assemblytitleattribute.aspx)）。

如果您需要动态应用程序标题，请使用其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:55:11.767

Visual Studio 项目模板默认生成“AssemblyInfo.cs”，但这只是一个默认位置。事实上，您可以将属性放在您想要的任何文件中。唯一的限制是您必须放置在“程序集范围”内，因此以下代码将**不起作用**：

```
namespace MySpace
{
    [assembly: System.Reflection.AssemblyVersion("1.0.0.0")]
} 
```

这同样适用于类和所有其他块（两者都不起作用）。

```
class MyPlace
{
    [assembly: System.Reflection.AssemblyVersion("1.0.0.0")]
} 
```

源代码中指定的程序集信息在编译过程中嵌入到输出程序集中，因此无法使用代码“动态”更改值（因为代码仅在稍后执行，在运行时）。

我个人非常喜欢在所有本地工作期间坚持使用默认版本。然后，我的程序集的正确版本由构建服务器（Teamcity 或 Team Foundation Server）触发的某种构建脚本设置。

如果您以后真的想更改程序集的任何属性，您可能想看看[http://www.mono-project.com/Cecil](http://www.mono-project.com/Cecil)

# javascript - 使用 jQuery data() vs native javascript getAttribute vs input hidden

> ID：14246027
> 
> 赞同：3
> 
> 时间：2013-01-09T20:38:53.583
> 
> 标签：javascript, jquery, html

我需要使用 javascript 从我的网站访问一般信息。到目前为止，我有以下选择：

*   使用 html 元素：`<input type="hidden" value="MyValue"/>`

*   在现有 html 元素中使用自定义属性：`<div id="HtmlElement" myattr="MyValue"></div>`然后使用`document.getElementById("HtmlElement").getAttribute("myattr")`

*   在现有 html 元素中使用 data 属性：`<div id="HtmlElement" data-myattr="MyValue"></div>`然后使用`jQuery("#HtmlElement").data("myattr")`

我想知道使用任一选项有什么好处。

我不喜欢使用隐藏输入，因为我不喜欢包含信息的松散 html 元素的想法。但是由于我需要它来显示一般信息，而不是与页面中现有 html 元素相关的信息，所以它看起来还不错。

另一方面，我不喜欢滥用外部库，但在我的情况下，我已经在我的站点中加载了 jQuery，所以我并不是为了这个而加载整个库。

最后，即使是面团性能也是一个问题，在我的情况下，如果它是最快的解决方案，它不会有太大的不同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T20:43:12.623

我会选择数据属性，因为这就是它们的用途，现代浏览器有一个用于访问它们的本机 api，同时仍然允许非现代浏览器作为自定义属性访问它们。

给定这个html：

```
<div data-foo="bar"></div> 
```

* * *

```
// modern browser:
foo = document.getElementByID("myelementid").dataset.foo;

// older browser:
foo = document.getElementByID("myelementid").getAttribute("data-foo");

// jQuery (all browsers)
foo = $("#myelementid").data("foo"); 
```

**请注意**，如果您的数据属性是`data-foo-bar`，则输入`dataset`和`.data`将是`fooBar`

正如 sdespont 所提到的，数据应该与您存储它的元素相关。

**更新：**
同样重要的是要注意，您还可以使用 .attr 方法获取数据属性的值，但是两者之间有一个非常重要的区别。使用 .data 获取数据属性的值将尝试将属性的值解析为正确的 javascript*类型*，例如，如果可以将其转换为 int，则会将其转换为 int。如果它可以转换为对象或数组，它将被转换为对象或数组。如果您改为使用`.attr()`，则可以确定您将始终拥有一个字符串。

* * *

可能还值得一提的是，`.attr()`应该优先使用 using ，`.data()`除非您特别需要 by 给出的功能，`.data()`因为通过 using `.data()`，将为该元素及其数据创建数据缓存，除非您实际打算使用，否则不需要`.data()`多次或需要提供的额外功能`.data()`

# sql - 如何使 SQL JOIN 只返回最近状态码的一行？

> ID：14246028
> 
> 赞同：3
> 
> 时间：2013-01-09T20:38:54.623
> 
> 标签：sql, sqlite

以下 SQL 语句：

```
SELECT f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN dpod_site_historyItems AS h ON f.id = h.itemId 
WHERE f.id = 216 
  AND historyIdCode = 'statusChanged' 
ORDER BY h.whenCreated 
```

给我以下输出。**如何更改它以使其仅返回具有最新 statusChangedIdCode 的一行？**

![在此处输入图像描述](../Images/afa453b8cb30f1aecd5d5ebcd93a913e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T20:48:39.997

```
SELECT f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN dpod_site_historyItems AS h ON f.id = h.itemId 
WHERE f.id = 216 
  AND h.historyIdCode = 'statusChanged' 
  AND h.whenCreated = (select max(whenCreated)
                       from dpod_site_historyItems h2
                       where h2.itemId = h.itemId
                         and h2.historyIdCode = 'statusChanged')
ORDER BY h.whenCreated 
```

或者，如果您有支持窗口功能的现代 DBMS：

```
SELECT f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN (
     select itemid, 
            historyIdCode,
            whenCreated,
            statusChangedIdCode,
            row_number() over (partition by itemid order by whenCreated desc) as rn 
     from dpod_site_historyItems 
     where historyIdCode = 'statusChanged' 
   ) h ON f.id = h.itemId AND h.rn = 1
WHERE f.id = 216 
ORDER BY h.whenCreated 
```

当您选择多个行时，这两种情况也适用`dpod_site_flashcards.id`，而 LIMIT 解决方案不会这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:40:43.870

试过这个？

```
SELECT f.id, f.front, f.back, h.statusChangedIdCode, MAX(h.whenCreated), h.historyIdCode 
FROM dpod_site_flashcards AS f 
JOIN dpod_site_historyItems AS h ON f.id=h.itemId 
WHERE f.id = 216 AND historyIdCode='statusChanged' 
GROUP BY f.id, f.front, f.back, h.statusChangedIdCode, h.historyIdCode 
```

-编辑

糟糕，感谢[@Gordon](https://stackoverflow.com/users/1144035/gordon-linoff)，没有足够仔细地阅读要求。这是一些应该完成这项工作的[SQLFiddle 。](http://sqlfiddle.com/#!3/9d46a/3)

这是正确代码的片段——将其包含在您的 WHERE 子句中：

```
h.whenCreated = (select max(whenCreated)
   from dpod_site_historyItems h2
   where h2.itemId = h.itemId) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T20:40:59.770

如果你使用 MySQL，将 end 更改为：`ORDER BY h.whenCreated DESC LIMIT 1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T21:05:21.793

这是基于@itchy 的回答。最佳答案取决于数据库。

一些数据库支持`limit`，所以答案是：

```
SELECT f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN dpod_site_historyItems AS h ON f.id = h.itemId 
WHERE f.id = 216 
  AND historyIdCode = 'statusChanged' 
ORDER BY h.whenCreated
limit 1 
```

SQL Server 和 Sybase 支持`top`，导致：

```
SELECT top 1 f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN dpod_site_historyItems AS h ON f.id = h.itemId 
WHERE f.id = 216 
  AND historyIdCode = 'statusChanged' 
ORDER BY h.whenCreated 
```

Oracle 使用 rownum，但您需要一个子查询：

```
select * from (SELECT f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN dpod_site_historyItems AS h ON f.id = h.itemId 
WHERE f.id = 216 
  AND historyIdCode = 'statusChanged' 
ORDER BY h.whenCreated
) t
where rownum = 1 
```

DB2 使用 fetch_first：

```
SELECT f.id, 
       f.front, 
       f.back, 
       h.statusChangedIdCode, 
       h.whenCreated,
       h.historyIdCode 
FROM dpod_site_flashcards AS f 
   JOIN dpod_site_historyItems AS h ON f.id = h.itemId 
WHERE f.id = 216 
  AND historyIdCode = 'statusChanged' 
ORDER BY h.whenCreated
fetch first 1 row only 
```

# linq - 为什么以及何时使用 Linq 接口

> ID：14246029
> 
> 赞同：0
> 
> 时间：2013-01-09T20:38:57.737
> 
> 标签：linq, interface, data-access-layer

假设您有三层（*业务*、*数据*和*UI*）。我的数据层将有一个`linq to sql`文件，其中添加了所有表。

我已经看到了一些示例，其中在业务层中创建了一个接口，然后在另一个类中实现*（类型为 IQueryable/IEnumerable）*，而其他类则使用普通`Linq syntax`来*获取/保存/删除/更新数据*。

为什么以及何时使用具有`IQueryable/IEnumerable`类型的接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:59:20.553

您可能希望这样做的两种最常见的情况是：

1.  您想保护自己免受系统该部分的更改。
2.  你希望能够编写好的单元测试。

例如，您有一个直接与 LINQ to SQL 对话的业务层。将来您可能需要使用 nHibernate 或实体框架。进行此更改会影响您的业务层，这可能并不好。

相反，如果你已经编写了一个接口（比如 IDataRepository），你应该能够在不必改变你的业务层的情况下换入和换出具体的实现，比如 LINQtoSQLRepository 或 HibernateRepository - 它只关心它可以调用，比如 Add()， Update()、Get()、Delete() 等 - 但不关心这些操作是如何实际完成的。

对接口进行编程对于单元测试也非常有用。由于速度和可靠性等多种原因，您不想针对数据库服务器运行测试。因此，您可以传入测试替身、伪造或模拟实现来测试您的数据层。例如，您有一些实现 IDataRepository 的测试数据，它允许您在没有数据库连接的情况下从业务层测试 add()、delete() 等。

这些要点通常是应用程序各个方面的良好实践。我建议阅读存储库模式、SOLID 原则，甚至可能是测试驱动开发。这是一个很大而且有时很复杂的领域，很难给出一个详细的答案，说明该做什么以及何时需要适合您的场景。

我希望这可以帮助您入门。

# azure - 在 Azure 上安装 DotNetNuke 6.1.1 向导后出现 NullReferenceException

> ID：14246031
> 
> 赞同：1
> 
> 时间：2013-01-09T20:39:23.167
> 
> 标签：azure, dotnetnuke, azure-sql-database, dotnetnuke-6, dotnetnuke-settings

我正在尝试将现有的 6.01.01 站点迁移到 Windows Azure 网页以测试一些新功能。我在做这件事时遇到了很多麻烦，所以我决定重新开始，只从社区安装中获得在 Azure 上运行的 6.1.1 版本。现在我在完成 InstallWizard 时遇到了错误。日志中的异常如下：

```
DotNetNuke.Services.Exceptions.PageLoadException: Object reference not set to an instance of an object. 
---&gt; System.NullReferenceException: Object reference not set to an instance of an  object.
at DotNetNuke.Framework.DefaultPage.InitializePage()
at DotNetNuke.Framework.DefaultPage.OnInit(EventArgs e)
at System.Web.UI.Control.InitRecursive(Control namingContainer)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
--- End of inner exception stack trace --- 
```

有没有人知道可能是什么原因，甚至如何调试它？我对 Azure 和 DNN 非常陌生。

注意：为了让 InstallWizard 工作，我必须对 web.config 文件进行一些更改。它们如下：

*   用我们的 SQL azure 字符串替换默认的 db 字符串
*   放入长请求超时
*   注释掉 url 重写模块

# java - MOXy 反序列化异常：在项目中未找到具有默认根元素的描述符

> ID：14246033
> 
> 赞同：7
> 
> 时间：2013-01-09T20:39:29.017
> 
> 标签：java, json, moxy

这是我的课程：

```
@XmlRootElement(name="Zoo")
class Zoo {
    //@XmlElementRef
    public Collection<? extends Animal> animals;
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlSeeAlso({Bird.class, Cat.class, Dog.class})
@XmlDiscriminatorNode("@type")
abstract class Animal {
    @XmlElement
    public String name; 
}

@XmlDiscriminatorValue("Bird")
@XmlRootElement(name="Bird")
class Bird extends Animal {
    @XmlElement
    public String wingSpan;
    @XmlElement
    public String preferredFood;
}

@XmlDiscriminatorValue("Cat")
@XmlRootElement(name="Cat")
class Cat extends Animal {
    @XmlElement
    public String favoriteToy;
}

@XmlDiscriminatorValue("Dog")
@XmlRootElement(name="Dog")
class Dog extends Animal {
    @XmlElement
    public String breed;
    @XmlElement
    public String leashColor;
} 
```

这是序列化的 JSON：

```
 {
        "animals": [
            {
                "type": "Bird",
                "name": "bird-1",
                "wingSpan": "6 feets",
                "preferredFood": "food-1"
            },
            {
                "type": "Cat",
                "name": "cat-1",
                "favoriteToy": "toy-1"
            },
            {
                "type": "Dog",
                "name": "dog-1",
                "breed": "bread-1",
                "leashColor": "black"
            }
        ]
    } 
```

这是反序列化程序代码：

```
public static <T> T Deserialize_Moxy(String jsonStr, Class<?>[] cl) throws JAXBException {
    InputStream is = new ByteArrayInputStream(jsonStr.getBytes());
    JAXBContext jc = JAXBContext.newInstance(cl);         
    Unmarshaller unmarshaller = jc.createUnmarshaller();

    // Marshal to JSON
    unmarshaller.setProperty(MarshallerProperties.MEDIA_TYPE, "application/json");
    unmarshaller.setProperty(MarshallerProperties.JSON_INCLUDE_ROOT, false);
    @SuppressWarnings("unchecked")
    T obj = (T)unmarshaller.unmarshal(is);
    return obj;
} 
```

这是一个例外：

```
Exception in thread "main" javax.xml.bind.UnmarshalException
 - with linked exception:
[Exception [EclipseLink-25008] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: A descriptor with default root element  was not found in the project]
    at org.eclipse.persistence.jaxb.JAXBUnmarshaller.handleXMLMarshalException(JAXBUnmarshaller.java:1014)
    at org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:147)
    at com.bp.samples.json.generics.Foo.Deserialize_Moxy(Foo.java:271)
    at com.bp.samples.json.generics.Foo.main(Foo.java:111)
Caused by: Exception [EclipseLink-25008] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: A descriptor with default root element  was not found in the project
    at org.eclipse.persistence.exceptions.XMLMarshalException.noDescriptorWithMatchingRootElement(XMLMarshalException.java:143)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshallerHandler.startElement(SAXUnmarshallerHandler.java:222)
    at org.eclipse.persistence.internal.oxm.record.json.JSONReader.parseRoot(JSONReader.java:161)
    at org.eclipse.persistence.internal.oxm.record.json.JSONReader.parse(JSONReader.java:118)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:827)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:350)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:334)
    at org.eclipse.persistence.oxm.XMLUnmarshaller.unmarshal(XMLUnmarshaller.java:407)
    at org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:133)
    ... 2 more 
```

还有一个关于序列化 JSON 的问题：有没有办法让 JSON 序列化程序发布“@type”而不是“type”。目前，它看起来像具有“类型”属性的对象。如果我们可以用“@”来装饰它，那么它更像是一个类型信息而不是一个属性会更明显。

谢谢，贝扎德

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T21:05:49.987

下面是我对你的两个问题的回答：

**问题 #1 - 例外**

当您使用该`MarshallerProperties.JSON_INCLUDE_ROOT`属性关闭根元素时，您需要使用其中一种方法，该`unmarshal`方法需要一个`Class`参数来告诉 MOXy 您希望解组的对象类型。

```
StreamSource json = new StreamSource("src/forum14246033/input.json");
Zoo zoo = unmarshaller.unmarshal(json, Zoo.class).getValue(); 
```

**问题2**

> 还有一个关于序列化 JSON 的问题：有没有办法让 JSON 序列化程序发布“@type”而不是“type”。目前，它看起来像具有“类型”属性的对象。如果我们可以用“@”来装饰它，那么它更像是一个类型信息而不是一个属性会更明显。

`@`前缀表示字段/属性映射到 XML 属性。您可以使用该`JAXBContextProperties.JSON_ATTRIBUTE_PREFIX`属性指定前缀来限定映射到 XML 属性的数据。

```
properties.put(JAXBContextProperties.JSON_ATTRIBUTE_PREFIX, "@"); 
```

* * *

**完整示例**

**演示**

```
package forum14246033;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        properties.put(JAXBContextProperties.JSON_ATTRIBUTE_PREFIX, "@");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Zoo.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum14246033/input.json");
        Zoo zoo = unmarshaller.unmarshal(json, Zoo.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(zoo, System.out);
    }

} 
```

**输入.json/输出**

```
{
   "animals" : [ {
      "@type" : "Bird",
      "name" : "bird-1",
      "wingSpan" : "6 feets",
      "preferredFood" : "food-1"
   }, {
      "@type" : "Cat",
      "name" : "cat-1",
      "favoriteToy" : "toy-1"
   }, {
      "@type" : "Dog",
      "name" : "dog-1",
      "breed" : "bread-1",
      "leashColor" : "black"
   } ]
} 
```

**领域模型**

我不建议在您的域模型中使用公共字段，但如果您这样做，您可以将元数据减少到以下内容：

**动物园**

```
import java.util.Collection;

class Zoo {
    public Collection<? extends Animal> animals;
} 
```

**动物**

```
import javax.xml.bind.annotation.XmlSeeAlso;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorNode;

@XmlSeeAlso({Bird.class, Cat.class, Dog.class})
@XmlDiscriminatorNode("@type")
abstract class Animal {

    public String name; 

} 
```

**鸟**

```
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorValue;

@XmlDiscriminatorValue("Bird")
class Bird extends Animal {
    public String wingSpan;
    public String preferredFood;
} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB (JSR-222) 提供程序，您需要包含一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

# java - Java算术运算'--'运算符

> ID：14246036
> 
> 赞同：2
> 
> 时间：2013-01-09T20:39:36.383
> 
> 标签：java, eclipse

我试图了解两者之间的区别`index = index--;`，`index=--index;`我检查了`index = index--;`以下代码块中的赋值输出（第一个示例）：

```
public static void main(String[] args) {
    int index = 10;
    for (int i = 0; i < 10; i++) {
        index = index--;
        System.out.println("Index:" + index);
    }//end of for loop
}// end of main method 
```

输出：

```
Index:10
Index:10
Index:10
Index:10
Index:10
Index:10
Index:10
Index:10
Index:10
Index:10 
```

当我使用`index=--index;`作业时（第二个例子）

```
public static void main(String[] args) {
        int index = 10;
        for (int i = 0; i < 10; i++) {
            index = --index;
            System.out.println("Index:" + index);
        }
    }// end of main method 
```

输出：

```
Index:9
Index:8
Index:7
Index:6
Index:5
Index:4
Index:3
Index:2
Index:1
Index:0 
```

我有两个问题。在第二个例子中，Eclipse 抛出一个警告： assignment `index = --index;`(The assignment to variable index has no effect) 但实际上它确实对变量有影响。它的值减 1。为什么 Eclipse 会给出这样的警告信息？

在第一个示例中，变量不受操作影响（Eclipse 没有给出警告）。我想知道为什么Eclipse没有消息，我不明白为什么这个赋值对变量索引没有影响`index = index--;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:42:20.373

问题是评估分配的方式。当你做`index = index--`右边的作业时，首先评估。意义：

1.  `index`右侧的返回值
2.  降低价值`index`
3.  将 value of 设置`index`为右侧的值（这是原始值 of`index`因为它是最先返回的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T20:44:42.397

`=`和改变`--`的值`index`。在 Java 的情况下，`--`保证在 之前发生`=`，所以在`index = index--;`返回值的情况下`--`是旧值`index`并覆盖的减量，`index`而在`index = --index;`返回值的情况下`--`已经是的新值`index`所以分配没有效果并`index`保持递减。

请注意，在 C 语言中，该语句`index = index--;`具有未定义的行为，并且允许编译器减少索引、忽略它或编写重新格式化硬盘的代码（尽管后一种情况极不可能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T20:41:11.887

```
index = index--; 
```

首先将值分配给左侧的索引，然后执行`--`并将结果分配给任何变量（留在内存中）。

例如：

```
 index =10;

   index = index--; 
```

首先将值 10 分配给变量索引，它变成

```
 `10--;` 
```

观察没有指向上述语句的变量。现在 10-- 将导致 9 并留在内存中，但索引变量仍将指向在 step1 中分配的 10。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T20:42:44.877

1)`index--`是后缀操作。这意味着，您的分配`index = index--`会将先前的值赋给`index`同一个`index`变量。即`index`值不会改变。

2)`--index`是前缀操作。这意味着，首先`index`将减少，然后将其分配给相同的`index`变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T20:43:52.130

后修复运算符 ( `--`) 发生在您所做的任何事情之后。所以：

`index = index--;`

1.  获取 index 的值并将其放入临时变量（寄存器）中
2.  将该寄存器值分配给索引
3.  递减临时寄存器（然后将其丢弃，因为没有对其进行任何处理。）

`index =-- index;`

1.  获取索引的值并将其放入临时寄存器
2.  减少寄存器
3.  将该寄存器值分配给索引

请注意，这些是等效的：

`index =-- index;` `index = --index;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T20:42:53.477

指数=指数--；

~~转换为：~~

 ~~```
int temp = index;
index = temp;
temp = temp - 1; 
```~~  ~~啊，我知道我错了。正确翻译如下：

```
int temp = index; 
index = index - 1; 
index = temp; 
```

信用：[https ://stackoverflow.com/users/1810525/mel-nicholson](https://stackoverflow.com/users/1810525/mel-nicholson)~~

# python - 如何找到没有属性的 xml 节点

> ID：14246042
> 
> 赞同：4
> 
> 时间：2013-01-09T20:39:45.897
> 
> 标签：python, xml-parsing

我正在使用 python 2.7 并尝试解析下面的 XML - 我想要做的是创建一个包含所有类型的 python 数组，其中包含一个语言属性以及一个没有语言属性的数组。

我正在使用 python 模块`import xml.etree.cElementTree as ET`

我知道我可以通过语法找到语言属性为“fr”语言的 XML 部分：

```
树=ET.ElementTree（文件='popups.xml'）
根 = 树.getroot()
对于 x in root.findall('alt[@{http://www.w3.org/XML/1998/namespace}lang="fr"]/alt'):
   打印 x.text

```

我真的不明白为什么我不能使用`xml:lang`而不是`{http://www.w3.org/XML/1998/namespace}lang`，但以上似乎适用于 Ubuntu 12.04

我试图找出的是“非”语法——XML 部分没有任何语言属性

有人对如何实现这一目标有任何想法吗？

```
<genre>
  <alt>
        <alt genre="easy listening">lounge</alt>
        <alt genre="alternative">ska</alt>
  </alt>

  <alt xml:lang="fr">
        <alt genre="gospel">catholique</alt>
  </alt>
</genre> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T23:02:55.473

您需要在 xpath 中使用完整的 QName，因为 stdlib ElementTree 没有注册前缀的方法。我通常使用辅助函数来创建 QName：

```
def qname(prefix, element, map={'xml':'http://www.w3.org/XML/1998/namespace'}):
    return "{{{}}}{}".format(map[prefix], element) 
```

标准库中的`ElementTree`实现不支持足够的 XPath 来轻松地做你想做的事。但是，[规范`xml:lang`](http://www.w3.org/TR/REC-xml/#sec-lang-tag)指定此属性的值由包含它的所有内容继承，类似于`xml:base`或`xmlns`命名空间声明。因此，作为替代方案，我们可以在所有元素上显式设置语言：

```
xml_lang = qname('xml', 'lang')

def set_xml_lang(root, defaultlang=''):
    xml_lang = qname('xml', 'lang')
    for item in root:
        try:
            lang = item.attrib[xml_lang]
        except KeyError, err:
            item.set(xml_lang, defaultlang)
            lang = defaultlang
        set_xml_lang(item, lang)

set_xml_lang(root)

namespaces = {'xml':'http://www.w3.org/XML/1998/namespace'}
# Every element in root now has an xml:lang attribute
# so XPath is easy now:
alts_with_no_lang = root.findall('alt[@{{{xml}}}lang=""]'.format(**namespaces)) 
```

如果您愿意使用[`lxml`](http://lxml.de)，那么您对“lang”的使用会更加健壮，因为它遵循完整的 XPath 1.0 规范。特别是，您可以使用以下`lang()`功能：

```
import lxml.etree as ET

root = ET.fromstring(xml)

print root.xpath('//alt[lang("fr")]') 
```

作为奖励，它将具有适当的`lang()`语义，例如不区分大小写和对语言区域很聪明（例如，`lang('en')`这也是如此`xml:lang="en-US"`）。

不幸的是，您不能`lang()`用来确定节点的语言。您需要找到第一个`xml:lang`祖先并使用它：

```
mylang = node.xpath('(ancestor-or-self::*/@xml:lang)[1]') 
```

*将它们放在一起*，以匹配没有语言的节点：

```
tree.xpath('//alt[not((ancestor-or-self::*/@xml:lang)[1])]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:44:42.150

> 我真的不明白为什么我不能使用 xml:lang 而不是 {http://www.w3.org/XML/1998/namespace}lang，但以上似乎适用于 Ubuntu 12.04

`xpath`使用该方法（在 中*不可*用）您尝试做的事情会更容易`cElementTree`，除其他外，该方法将从文档的根元素中读取名称空间标签，因此您可以这样问：

```
import lxml.etree as et

root = et.parse(open('mydoc.xml')).getroot()

for x in root.xpath('alt[not(@xml:lang)]/alt'):
    print x.text 
```

`not(@attr)`我以前不熟悉的语法，但是 Google 搜索“没有属性的 xpath 查找元素”非常有用。

# php - Doctrine 2 Create Schema 是否有事件侦听器？

> ID：14246045
> 
> 赞同：1
> 
> 时间：2013-01-09T20:39:54.193
> 
> 标签：php, symfony, doctrine, doctrine-orm

我想在 Doctrine Create Schema 事件中将一些记录插入数据库（一些用于外键约束的默认数据）。

这个函数通过命令行（在 Symfony2 中）通过触发来调用：

```
php app/console doctrine:schema:update --force 
```

运行此命令时，Doctrine2 为数据库生成模式。

有没有办法对此做出反应并将数据插入数据库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:52:03.667

创建一个新的[控制台命令](http://symfony.com/doc/2.0/cookbook/console/console_command.html)将完成您所寻找的。

**命令代码**

MyCool/Bundle/Command/GenerateSchemaUpdateCommand.php

```
<?php
namespace MyCool\Bundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;

class GenerateSchemaUpdateCommand extends ContainerAwareCommand
{
    /**
     * Configure command, set parameters definition and help.
     */
    protected function configure()
    {
        $this
            ->setName('mycoolbundle:schema:update')
            ->setDescription('Perform my custom schema update.')
            ->setHelp(sprintf(
            'Performs the doctrine:schema:update plus adds our custom records. \n' .
                PHP_EOL
        ));
    }

    /**
     * Execution Code
     * @param \Symfony\Component\Console\Input\InputInterface $input
     * @param \Symfony\Component\Console\Output\OutputInterface $output
     */
    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $output = system('php -f app/console doctrine:schema:update --force');
        // do your custom things here.
        echo $output;
    }
} 
```

**执行你的命令**

```
php -f app/console mycoolbundle:schema:update 
```

**添加参数**

您可以使用以下方法向命令添加参数：

```
addArgument('var_name', InputArgument::OPTIONAL, 'Help message...')
// InputArgument::REQUIRED is also available here 
```

**笔记**

这样做可以让您在控制台命令中添加很多功能，此外，如果您选择需要它们，您将可以直接访问您的模型和实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:01:51.080

看看[DoctrineFixtureBundle](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html)！

它将帮助您加载初始数据。

# asp.net - 获取 Telerik RadGrid 中已编辑项目的值

> ID：14246046
> 
> 赞同：2
> 
> 时间：2013-01-09T20:39:58.937
> 
> 标签：asp.net, telerik, radgrid

ASPX：

```
<telerik:RadGrid ID="ctlItemsGrid" runat="server" DataKeyNames="Id" AllowPaging="true" AllowSorting="true" GridLines="None" Skin="Windows7" EnableViewState="true">
    <MasterTableView AutoGenerateColumns="false" AllowPaging="true" DataKeyNames="Id,WorkflowStatus" NoMasterRecordsText="No items exist in the database." EnableViewState="true">
        <SortExpressions>
            <telerik:GridSortExpression FieldName="Id" SortOrder="Descending" />
        </SortExpressions>
        <PagerStyle Mode="NextPrevAndNumeric" />
        <Columns>            
            <telerik:GridNumericColumn ColumnEditorID="ctlColumnId" HeaderText="ID" DataField="Id" DecimalDigits="0" DataType="System.Int32" NumericType="Number" ReadOnly="true"></telerik:GridNumericColumn>
            <telerik:GridDropDownColumn UniqueName="ctlColumnGridWorkflow" ColumnEditorID="ctlColumnWorkflow" HeaderText="Workflow" DataField="WorkflowStatus" DropDownControlType="DropDownList"></telerik:GridDropDownColumn>
            <telerik:GridEditCommandColumn UniqueName="ctlColumnGridEdit" CancelText="Cancel" EditText="Edit"></telerik:GridEditCommandColumn>
            <telerik:GridButtonColumn UniqueName="ctlColumnGridDelete" CommandName="Delete" CommandArgument="" Text="Remove"></telerik:GridButtonColumn>
        </Columns>
    </MasterTableView>
</telerik:RadGrid> 
```

C＃：

```
public partial class administration_modules_item_Default : ViewPageBase<IItemAdminPresenter, IItemAdminView>, IItemAdminView
{
    private IEnumerable<WorkflowStatus> _workflowStatuses;
    private IEnumerable<IItemDbItem> _items;

    protected override void PreloadView()
    {
        this.ctlItemsGrid.ItemDataBound += new Telerik.Web.UI.GridItemEventHandler(ctlItemsGrid_ItemDataBound);
        this.ctlItemsGrid.ItemCommand += new GridCommandEventHandler(ctlItemsGrid_ItemCommand);
        //this.ctlItemsGrid.ItemUpdated += new GridUpdatedEventHandler(ctlItemsGrid_ItemUpdated);
        this.ctlItemsGrid.UpdateCommand += new GridCommandEventHandler(ctlItemsGrid_UpdateCommand);
    }

    protected override void PostLoadView()
    {
        // Doesn't work, values are all empty strings
        //foreach (GridEditableItem editItem in ctlItemsGrid.EditItems)
        //{
        //    Dictionary<string, string> newValues = new Dictionary<string, string>();
        //    ctlItemsGrid.MasterTableView.ExtractValuesFromItem(newValues, editItem);
        //    IItemDbItem w = (IItemDbItem)editItem.DataItem;
        //    if (!string.IsNullOrWhiteSpace(newValues["WorkflowStatus"]))
        //    {
        //        w.WorkflowStatus = (WorkflowStatus)Enum.Parse(typeof(WorkflowStatus), newValues["WorkflowStatus"]);
        //        this.Presenter.Update(w.Id, w.WorkflowStatus);
        //    }
        //}

        ctlItemsGrid.DataSource = _items;
        ctlItemsGrid.DataBind();

        base.PostLoadView();
    }

    void ctlItemsGrid_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
    {
        if (e.Item is GridEditableItem && (e.Item as GridEditableItem).IsInEditMode)
        {
            GridEditableItem editedItem = e.Item as GridEditableItem;
            GridEditManager editMan = editedItem.EditManager;
            IItemDbItem w = (IItemDbItem)e.Item.DataItem;

            // This doesn't work either, values are all null or empty:
            //if (editedItem.CanExtractValues)
            //{
            //    Dictionary<string, string> newValues = new Dictionary<string,string>();
            //    editedItem.ExtractValues(newValues);
            //    if (newValues["WorkflowStatus"] != null)
            //    {
            //        w.WorkflowStatus = (WorkflowStatus)Enum.Parse(typeof(WorkflowStatus), newValues["WorkflowStatus"]);
            //        this.Presenter.Update(w.Id, w.WorkflowStatus);
            //    }
            //}

            GridDropDownListColumnEditor ctlColumnWorkflow = editMan.GetColumnEditor("ctlColumnGridWorkflow") as GridDropDownListColumnEditor;
            ctlColumnWorkflow.DataSource = _workflowStatuses;
            ctlColumnWorkflow.DataBind();
            ctlColumnWorkflow.SelectedValue = w.WorkflowStatus.ToString();

        }
        else if (e.Item is GridDataItem)
        {
            GridDataItem dataItem = e.Item as GridDataItem;

            IItemDbItem w = (IItemDbItem)e.Item.DataItem;

            dataItem["ctlColumnGridWorkflow"].Text = w.WorkflowStatus.ToString();
        }
    }

    void ctlItemsGrid_ItemCommand(object sender, GridCommandEventArgs e)
    {
        string cmdName = e.CommandName;
        IItemDbItem w = (IItemDbItem)e.Item.DataItem;

        switch (cmdName)
        {
            case "Delete":
                this.Presenter.Delete(w.Id);
                this.Presenter.LoadView();
                break;
            case "Update":
                // This doesn't work either: 
                //GridEditableItem editedItem = e.Item as GridEditableItem;
                //GridEditManager editMan = editedItem.EditManager;
                //DropDownList editWorkflow = (DropDownList)editedItem["ctlColumnGridWorkflow"].Controls[0];
                //DropDownList editEvent = (DropDownList)editedItem["ctlColumnGridEvent"].Controls[0];
                //this.Presenter.Update(w.Id, (WorkflowStatus)Enum.Parse(typeof(WorkflowStatus));
                break;
        }

        //this.Presenter.LoadView();
    }

    // Doesn't work: 
    //void ctlItemsGrid_ItemUpdated(object sender, GridUpdatedEventArgs e)
    //{
    //    GridEditableItem editedItem = e.Item as GridEditableItem;
    //    GridEditManager editMan = editedItem.EditManager;
    //    DropDownList editWorkflow = editedItem["ctlColumnGridWorkflow"].Controls[0] as DropDownList;
    //    IItemDbItem w = (IItemDbItem)e.Item.DataItem;
    //    this.Presenter.Update(w.Id, (WorkflowStatus)Enum.Parse(typeof(WorkflowStatus), editWorkflow.SelectedValue));
    //}

    // Doesn't work: 
    void ctlItemsGrid_UpdateCommand(object sender, GridCommandEventArgs e)
    {
        GridEditableItem editedItem = e.Item as GridEditableItem;
        GridEditManager editMan = editedItem.EditManager;
        DropDownList editWorkflow = editedItem["ctlColumnGridWorkflow"].Controls[0] as DropDownList;
        IItemDbItem w = (IItemDbItem)e.Item.DataItem;

        this.Presenter.Update(w.Id, (WorkflowStatus)Enum.Parse(typeof(WorkflowStatus), editWorkflow.SelectedValue));
    }

    public IEnumerable<WorkflowStatus> WorkflowStatuses
    {
        set
        {
            _workflowStatuses = value;
        }
    }

    public IEnumerable<IItemDbItem> Items
    {
        get
        {
            return _items;
        }
        set
        {
            _items = value;
        }
    }

} 
```

我有一个单独的表单来添加项目（未显示），效果很好。删除按钮也可以正常工作。尝试更新保存的项目时，我可以从 GridDropDownColumn 获取的所有值都是空值、空值或默认值，而不是编辑后的值。在 Visual Studio 的即时窗口中单步执行和测试内容时，我能够使用这个荒谬的语句找到正确的值：

```
((DropDownList)ctlItemsGrid.MasterTableView.GetItems(GridItemType.EditFormItem)[0].Controls[1].Controls[0].Controls[0].Controls[1].Controls[0].Controls[0].Controls[1].Controls[1].Controls[0]).SelectedValue 
```

但必须有一个更简单的方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:13:31.597

奇怪的是，最初的实现没有奏效 - 我最终制作了一个快速示例项目并设法从 e.Item.DataItem 获取所有信息（尽管只有 Id 列，因为我们稍后绑定到 DropDownList ） .

从 ItemDataBound 事件中获取这个是否有严格的要求？更好的事件是 UpdateCommand。您可以使用一些快速代码轻松获取该项目：

```
protected void ctlItemsGrid_UpdateCommand(object sender, GridCommandEventArgs e)
{
    if (e.Item is GridEditableItem && e.Item.IsInEditMode)
    {
        GridEditableItem item = e.Item as GridEditableItem;
        string Employee = (item["ctlColumnGridWorkflow"].Controls[0] as DropDownList).SelectedItem.Text;
    }
} 
```

[然后，您可以使用本文档文章](http://www.telerik.com/help/aspnet-ajax/grid-updating-inplace-and-editforms.html)中讨论的技术提取所需的值。

如果您仍然想像在第一次尝试中那样处理它，则可能需要一个独立的示例项目，以便确切了解发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:34:55.247

我不确定这是否是修复它的正确方法，但这对我有用：

```
public partial class administration_modules_item_Default : ViewPageBase<IItemAdminPresenter, IItemAdminView>, IItemAdminView
{
    private IEnumerable<WorkflowStatus> _workflowStatuses;
    private IEnumerable<IItemDbItem> _items;

    protected override void PreloadView()
    {
        this.ctlItemsGrid.ItemDataBound += new Telerik.Web.UI.GridItemEventHandler(ctlItemsGrid_ItemDataBound);
        this.ctlItemsGrid.ItemCommand += new GridCommandEventHandler(ctlItemsGrid_ItemCommand);
        this.ctlItemsGrid.NeedDataSource += new GridNeedDataSourceEventHandler(ctlItemsGrid_NeedDataSource);
    }

    void ctlItemsGrid_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
    {
        ctlItemsGrid.DataSource = _items;
    }

    protected override void PostLoadView()
    {
        if (!IsPostBack)
        {
            ctlItemWorkflow.DataSource = _workflowStatuses;
            ctlItemWorkflow.DataBind();
        }

        base.PostLoadView();
    }

    protected override void OnLoadComplete(EventArgs e)
    {
        base.OnLoadComplete(e);
        ctlItemsGrid.Rebind();
    }

    void ctlItemsGrid_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
    {
        if (e.Item is GridEditableItem && (e.Item as GridEditableItem).IsInEditMode)
        {
            GridEditableItem editedItem = e.Item as GridEditableItem;
            GridEditManager editMan = editedItem.EditManager;
            IItemDbItem w = (IItemDbItem)e.Item.DataItem;

            GridDropDownListColumnEditor ctlColumnWorkflow = editMan.GetColumnEditor("ctlColumnGridWorkflow") as GridDropDownListColumnEditor;
            ctlColumnWorkflow.DataSource = _workflowStatuses;
            ctlColumnWorkflow.DataBind();
            ctlColumnWorkflow.SelectedValue = w.WorkflowStatus.ToString();
        }
        else if (e.Item is GridDataItem)
        {
            GridDataItem dataItem = e.Item as GridDataItem;

            IItemDbItem w = (IItemDbItem)e.Item.DataItem;

            dataItem["ctlColumnGridWorkflow"].Text = w.WorkflowStatus.ToString();
        }
    }

    void ctlItemsGrid_ItemCommand(object sender, GridCommandEventArgs e)
    {
        string cmdName = e.CommandName;
        IItemDbItem w = (IItemDbItem)e.Item.DataItem;

        switch (cmdName)
        {
            case "Delete":
                GridDataItem item = e.Item as GridDataItem;
                int id = Convert.ToInt32(item.GetDataKeyValue("Id"));
                this.Presenter.Delete(id);
                this.Presenter.LoadView();
                break;
            case "Update":
                GridEditableItem editedItem = e.Item as GridEditableItem;
                GridEditManager editMan = editedItem.EditManager;
                DropDownList editWorkflow = (DropDownList)editedItem["ctlColumnGridWorkflow"].Controls[0];

                int wid = Convert.ToInt32(editedItem.GetDataKeyValue("Id"));

                this.Presenter.Update(wid, (WorkflowStatus)Enum.Parse(typeof(WorkflowStatus), editWorkflow.SelectedValue));
                this.Presenter.LoadView();
                break;
        }
    }

    public IEnumerable<WorkflowStatus> WorkflowStatuses
    {
        set
        {
            _workflowStatuses = value;
        }
    }

    public IEnumerable<IItemDbItem> Items
    {
        get
        {
            return _items;
        }
        set
        {
            _items = value;
        }
    }

} 
```

使用`NeedDataSource`and`Rebind`似乎让`ItemCommand`开始按预期运行。

# scripting - 如何使用 ( - ) 和 ( + ) 按键切换案例？

> ID：14246050
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:40:30.880
> 
> 标签：scripting, autohotkey

我正在使用 AutoHotKey。我知道我也标记了 C，我认为具有足够 C 编程知识的人也可以在这里提供帮助。

下面的代码对我有用。它将读取用户的两个键盘输入，并根据用户按下的内容运行该案例的代码。

```
1::
Input Key, L1

if Key=1
    {
        ;your code
}
if Key=2
    {
        ;your code
}   
2::
Input Key, L1

if Key=1
    {
        ;your code
}
if Key=2
    {
        ;your code
} 
```

我想知道如果用户按下 + 或 - 键是否可以添加循环或其他内容，它将一次执行一个案例，

例如，如果用户第一次按下 +，
如果用户再次按下 +，它将执行 1 1
如果用户按下它将执行1 2 - 它会执行
1 1
等等。

我不确定这是否可行。

我是编程新手。请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:06:16.730

您可以使用全局变量。全局变量可以在程序中的任何地方访问，与只存在于函数内部的普通变量不同。

例子：

```
#NoEnv
#Persistent
SetBatchLines, -1

global myVar = 0

h::
    myVar := myVar + 1
    execute()
return

g::
    myVar := myVar - 1
    execute()
return

execute()
{
    if(myVar == 1)
    {
        ;do stuff
        tooltip, myVar: %myVar%
    }
    else if (myVar == 2)
    {
        ;do stuff
        tooltip, myVar: %myVar%
    }
    else if (myVar == 3)
    {
        ;do stuff
        tooltip, myVar: %myVar%
    }
    else if (myVar == 4)
    {
        ;do stuff
        tooltip, myVar: %myVar%
    }
    else if (myVar == 5)
    {
        ;do stuff
        tooltip, myVar: %myVar%
    }   
    else
    {
        ; nothing
        tooltip,
    }

return
} 
```

我希望这是您要问的，我从这个问题中不太确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:43:14.207

```
+::
keywait, +, u
{
    If var =
        var = 11
    Else
        var++
}
Return
-::
keywait, -, u
{
    If var =
        var = 11
    Else
        var--
}
Return 
```

“var”应该与代码中具有两位或一位数字的变量具有相同的名称。

你也可以用这个

```
NumpadAdd::
keywait, NumpadAdd, u
{
    If var =
        var = 11
    Else
        var++
}
Return
NumpadSub::
keywait, NumpadSub, u
{
    If var =
        var = 11
    Else
        var--
}
Return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T02:13:23.787

; 其中一些是所谓的伪代码。（不确定你是否熟悉）。它使您需要将其转换为实际代码...

; 写给AHK...

当前编号 = 1

（加号键）:: CurrentNumber += 1 发送 %CurrentNumber% 返回

(减号):: CurrentNumber -= 1 发送 %CurrentNumber% 返回

; 不确定这是否是您要寻找的东西..如果您想要一个循环，它会有所不同。; 不管怎样，祝你好运，我出去了。。

# macos - 修改已签名的应用程序

> ID：14246053
> 
> 赞同：0
> 
> 时间：2013-01-09T20:40:39.017
> 
> 标签：macos, security, sandbox

我试图更好地理解 OSX 代码签名以及它在保护我的软件方面为我提供的优势。有人可以为我澄清某些问题吗？

给定一个经过代码签名但**没有**沙盒化的应用程序：

如果黑客更改了应用程序的二进制文件，则该应用程序不再被视为已签名。但是，它是否仍能正常运行（Lion 会警告用户应用程序未经过代码签名的警告）？

给定一个代码签名**和**沙盒的应用程序：

如果黑客在这种情况下更改代码，不会发生什么？他/她是否可以简单地删除权利文件以创建不再具有任何沙盒限制的未签名版本的应用程序？

给定一个包含签名和沙盒 XPC 服务助手的签名但未**沙**盒的应用程序，我可以做些什么来保证黑客无法创建任何部分的未签名（和修改）版本。在我看来，就目前而言，黑客可以执行以下操作：

*   创建帮助程序的二进制修改版本。因此，这个新版本将是非沙盒和非签名的。

*   创建主应用程序的二进制修改版本。因此，这个新版本也将是非沙盒和非签名的，并且能够启动新版本的帮助程序。

我错了吗？如果是这样，为什么？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:47:19.227

你基本上是对的。您正在寻找的是复制保护，这是没有人知道如何去做的事情（好吧），这不是代码签名或沙盒尝试做的事情。*如果您的程序在运行时*被接管并被迫做不应该做的事情，沙盒的作用就是限制损害。代码签名的作用是防止其他人将*他们的*程序当作*您*的程序。

我故意使用了“*他们的计划”这个词。*您必须意识到，一旦“您的程序”在其他人的计算机上并且他们开始弄乱它，它就不再是您的了；这是他们的，他们可以用它做几乎任何他们想做的事情。他们可以取出部分（沙盒等）添加部分（恶意代码等），改变事物，......他们甚至可以编写一个“全新”的程序，恰好包含您的程序的部分（或全部）。

你可以做一些事情来让你的代码难以修改/重用，但没有人想出如何让它变得不可能。苹果没有尝试；他们的安全措施针对其他目标。

# c# - 带有 List 对象属性条件的 foreach 循环

> ID：14246054
> 
> 赞同：1
> 
> 时间：2013-01-09T20:40:41.517
> 
> 标签：c#, linq, entity-framework, foreach, conditional-statements

我有一个 foreach 循环，仅当“有效”属性设置为 true 时才需要迭代。不幸的是，如果列表中第一项的“有效”设置为 false，它将退出整个循环。

有谁知道在 foreach 循环中使用条件的最佳方法？以下是我现在所拥有的。

```
foreach (var course in agentNewTraining.AllCoursesTaken.TakeWhile(c => c.Valid)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T20:41:28.400

您可以使用该`Where`方法。

```
foreach (var course in agentNewTraining.AllCoursesTaken.Where(c => c.Valid)) 
```

您的代码现在所做的是获取元素，直到找到与条件不匹配的元素。例如，如果列表的第一个元素与谓词不匹配，您将得到一个空集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:48:32.480

Eve 上面的回答是正确的。

我只想指出，如果您以更易读的方式编写代码，您可以通过单步执行代码来轻松解决这个问题。

```
var collectionToIterate = agentNewTraining.AllCoursesTaken.TakeWhile(c => c.Valid);
foreach (var course in collectionToIterate)
{
  //...
} 
```

您会立即看到 collectionToIterate 不是您所期望的。您没有“退出整个循环”，您根本没有要迭代的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T20:48:41.247

您可以`Where`改用：

```
foreach (var course in agentNewTraining.AllCoursesTaken.Where(c => c.Valid)) 
```

或者使用`if`语句检查条件：

```
foreach (var course in agentNewTraining.AllCoursesTaken) {
  if (course.Valid) {
    ...
  }
} 
```

# android - 从 Mysql 中检索数据并将其发送到 sqlite

> ID：14246058
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:40:50.833
> 
> 标签：android

我通过 php 和 jason 从 mysql 数据库中获取所有记录，并将这些记录插入 Sqlite。但是每次创建该活动时，它都会在 Sqlite 中插入重复的条目。我想检查该值是否已经存在于 sqlite 表中然后值不应插入 Sqlite

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:56:48.860

您应该查看记录是否不存在，然后将其插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:44:07.817

您必须使 Sqlite 数据库的条目独一无二。我遇到了同样的问题，但我已经解决了。如果您将您正在创建表的 sqlite 代码发送给我。我会确切地告诉您这将解决您的问题

# sql - 我可以基于多列聚合数据库数据吗？

> ID：14246064
> 
> 赞同：3
> 
> 时间：2013-01-09T20:41:13.517
> 
> 标签：sql, sql-server, aggregate-functions

我想在一行中查找根据多个列的属性聚合的数据。这可能听起来像是一堆乱码，所以我给你举个例子……这是一个包含三列的数据库表：

```
GroupingId     Type           Date
1              NULL           1/1/11
1              NULL           2/2/22
2              NULL           1/1/11
2              A              2/2/22
3              A              1/1/11
3              B              2/2/22
4              A              1/1/11
4              NULL           2/2/22 
```

我想做一个 SELECT，然后按 GroupingId 分组。这很容易。

但是对于其他两列，我想要一些真正依赖于这两列的东西。如果我只想要任何给定组的 MAX 日期，那将很简单。我真正想要的是 Type 更喜欢 NOT NULL，而 Date 应该是 MAX ......但我希望它们总是来自同一行（Type 值是 NOT NULL 优先）。

所以我的结果应该是这样的

```
1       NULL      2/2/22       // both Types are null, so last date chosen
2       A         2/2/22       // one Type not null, so that date chosen
3       B         2/2/22       // both Types not null, so last date chosen
4       A         1/1/11       // one Type not null, so that date chosen (and it is not the most recent date) 
```

如果我在 Date 上做一个 MAX，那是不对的。如果我对 Type 执行 COALESCE，我将在 NULL 上得到一个非空值……但不一定是最近的。

有没有一种干净的方法可以做到这一点？我想我知道如何使用系列选择、表变量和 UNION 来做到这一点，这就是我将尝试前进的方式，但如果有一个干净的 SQL 解决方案，有人甚至可以点头，那将是受欢迎的。

我在 SQL Server 中，但我猜如果有一种干净的 SQL 方法可以做到这一点，它可能与数据库无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:00:41.597

像这样？

```
;WITH CTESample (GroupingId, Type, Date) AS
(
    SELECT 1, NULL, '1/1/11'    UNION ALL
    SELECT 1, NULL, '2/2/22'    UNION ALL
    SELECT 2, NULL, '1/1/11'    UNION ALL
    SELECT 2, 'A', '2/2/22'     UNION ALL
    SELECT 3, 'A', '1/1/11'     UNION ALL
    SELECT 3, 'B', '2/2/22'     UNION ALL
    SELECT 4, 'A', '1/1/11'     UNION ALL
    SELECT 4, NULL, '2/2/22'    
)
,Partitioned AS
(
    SELECT *
            ,rNum = ROW_NUMBER() OVER (PARTITION BY GroupingID ORDER BY Type DESC, Date DESC)
    FROM CTESample
)
SELECT *
FROM Partitioned
WHERE rNum = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:46:51.087

这是使用`Rank()`.

所以，我实在是太慢了……别告诉我的老板。

无论如何，一个例子：

```
SELECT
  [sub].[GroupingID],
  [sub].[Type],
  [sub].[Date]
FROM
(
  SELECT 
    [GroupingID],
    [Type],
    [Date],
    Rank() OVER(PARTITION BY [GroupingID] ORDER BY (CASE WHEN [Type] IS NULL THEN 0 ELSE 1 END) DESC, [Date] DESC, [Type] ASC) AS [Rank]
  FROM [Data]
) AS [sub]
WHERE [sub].[Rank] = 1
ORDER BY [GroupingID] ASC 
```

# scheme - 使用大写和小写 Scheme 符号，需要说明

> ID：14246066
> 
> 赞同：1
> 
> 时间：2013-01-09T20:41:21.153
> 
> 标签：scheme

为什么要求 Scheme 解释大小写混合的符号值时，只返回小写版本？

```
#;> 'HelloWorld
helloworld

#;> 'helloworld
helloworld 
```

对于上面的例子，我使用的是[sisc](http://sisc-scheme.org)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:52:14.017

R5RS 声明所有符号都不区分大小写，并且可能会更改它们的大小写。

`(eq? 'a 'A)`请注意，某些实现对此的处理方式不同.. return不是必需的（但很常见，如在 SISC 中）`#t`，但如果您定义了一个`a`可以使用`(A)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:51:33.927

在某些 Scheme 解释器中，符号不区分大小写，在 SISC 中似乎就是这种情况。这是依赖于实现的，并且在不同的实现中并不一致。例如，这些是 Racket 中的不同符号：

```
(equal? 'HelloWorld 'helloworld)
=> #f 
```

根据此[常见问题解答](http://community.schemewiki.org/?scheme-faq-language)：

> R5RS 声明通过 Scheme 阅读器（即在阅读 Scheme 程序时）读取的标识符和符号不区分大小写，并且可能会改变它们的大小写。因此和 返回`(eq? 'a 'A)`相同。请注意，编写依赖于此的程序被认为是不好的风格，例如通过定义一个函数然后使用or调用它。`(EQ? 'a 'A)``#t``foo``(Foo)``(FOO)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:52:13.423

Scheme 的大多数版本，就像它的母语 Lisp 一样，是不区分大小写的，所以符号可以以任何实现想要的方式被嵌入；大多数版本的 Scheme 和 Lisp 都使用大写符号，但也可以使用小写，就像用户输入的任何大小写一样。自 R6RS 以来，大多数 Scheme 系统都区分大小写，并且将完全按照输入的符号进行转换。

# sql - 在未创建该表的过程中更新该表

> ID：14246067
> 
> 赞同：1
> 
> 时间：2013-01-09T20:41:22.510
> 
> 标签：sql, procedure

这可能吗？我在一个过程中创建了一个表，我知道它存在。现在我想从另一个程序更新这个表。当我尝试这样做时，我收到“无效的对象名称”错误。如果我将相同的更新代码放入创建表的过程中，它就可以正常工作。如何从不同的过程更新此表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:45:52.060

除了临时表之外，在存储过程中创建表不是一个好习惯。

如果另一个 proc 无法识别它，我可以看到两种可能性。首先，您创建了一个临时表，它超出了新 proc 的范围。

其次，您没有授予执行第二个过程的用户对该表的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:56:21.613

如果它是一个临时表或表变量，它将在原始存储过程完成执行后被处理掉。

根据 RDBMS 平台（假设这里是 MS），您可以创建一个全局临时表（例如`##MyTable`），然后将其名称作为输入传递给第二个存储过程以进行进一步处理。

如果您希望 sproc 的每次运行都创建自己的表，则可以考虑生成一个唯一的特定于日期时间的表名：

```
DECLARE @Now datetime, @TableName varchar(50)

SET @TableName = 'TheTable_' + CAST(YEAR(@Now) AS varchar(4)) + CAST(MONTH(@Now) AS varchar(2)) + CAST(DAY(@Now) AS varchar(2)) + CAST(DATEPART(HOUR, @Now) AS varchar(2)) + CAST(DATEPART(MINUTE, @Now) AS varchar(2)) + CAST(DATEPART(SECOND, @Now) AS varchar(2)) 
```

相反，如果您想保留同一个表并重用它，您可以检查它是否存在并采取相应措施：

```
IF EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'TheTable_xxxx')
BEGIN

    ... do stuff to the existing table here, like truncate it or mark any
    ... existing records as processed somehow or whatever.

END 
```

# ios - dispatch_async 和 peformSelectorInBackground 的区别

> ID：14246069
> 
> 赞同：5
> 
> 时间：2013-01-09T20:41:26.777
> 
> 标签：ios, objective-c, asynchronous

当我`ViewController`用 a推动 a`MapView`时，我需要画一条路线。这需要 2 秒，所以我想在另一个线程中进行此操作，因为我不想阻止 UI。

我用了：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0) ... 
```

如果我在这里画图，大约需要 10 到 15 秒。

如果我使用该`performSelectorInBackground`方法，路线会在约 1 或 2 秒后出现。

为什么？不`PRIORITY_HIGH`应该快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:30:23.397

你不应该在后台更新 UI，真的任何事情都可能发生。您是否使用`dispatch_async`或`performSelectorInBackground:`应该花费大约相同的时间来处理您的数据。您遇到的时间差异是 GUI 需要多长时间才能注意到后台发生了变化。我无法解释为什么这两种方法不同，这是一个未记录的实现细节。

处理这个问题的正确方法是在后台处理完数据后回调主线程来更新你的 UI。使用 GCD，这可能看起来像这样：

```
dispatch_queue_t queue = dispatch_get_global_queue( 0, 0 );
dispatch_async( queue, ^{
   id result = [self doExpensiveCalculation];
   dispatch_async( dispatch_get_main_queue(), ^{
        [self updateUIWithResult: result];
   } );
} ); 
```

尝试使用 GCD 和`performSelector...`方法实现一次此模式，您应该注意到时间没有差异。

# javascript - 初始加载期间无法设置表格高度

> ID：14246072
> 
> 赞同：0
> 
> 时间：2013-01-09T20:41:43.940
> 
> 标签：javascript, jquery, kendo-ui, kendo-treeview

我正在使用 Kendo tabstrip 并加载树视图（在表格内）。

我正在根据窗口大小设置包含树的表格的高度，调整窗口大小时一切正常，**但**由于某种原因，我无法在应用程序的初始加载期间设置表格的高度。我正在调用准备好调整窗口大小时调用的相同函数，

```
 $(document).ready(function()

setTimeout(function() { update_size(); }, 250);
..... 
```

但即便如此，表格在初始加载期间也没有正确调整大小（尤其是在某些屏幕分辨率下 - 例如：1280 * 1024），但是当我调整屏幕大小时，表格大小正确......

```
 var update_size = function() {
        var height = $(this).height() - ($("#vertical").height()+30);
        $('#dictionaryTree').height(height-120);
        $('#groupTree').height(height-120);

    }
    $(window).resize(function() {
        clearTimeout(window.refresh_size);
        window.refresh_size = setTimeout(function() { update_size(); }, 250);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:34:05.377

这经常发生，因为当您尝试设置元素的大小时，元素仍未呈现，然后 KendoUI 进入以显示元素并重新计算大小。

当您调整窗口大小时，元素已经渲染，然后就没有问题了。

在加载页面内容并调用 KendoUI 小部件初始化后（例如，在[dataBound](http://docs.kendoui.com/api/web/treeview#databound)事件中）尝试调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:40:16.137

使用剑道树的数据绑定事件。

如果您只依赖于一个神奇的设置超时功能，您永远无法 100% 确定页面中存在树视图。

# linux - 在 Linux 32 位 x86 程序集中显示文本文件的内容

> ID：14246074
> 
> 赞同：0
> 
> 时间：2013-01-09T20:41:53.813
> 
> 标签：linux, assembly, x86, nasm

如何在 Linux 32 位 x86 程序集（NASM 语法）中显示文本文件的内容？

提前致谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T20:54:52.473

我还没有测试过这个（它不一定是 NASM 语法），但是这些方面的东西应该可以在 x86 Linux 机器上工作：

```
; Open file 
mov ecx,0 ; FILEMODE_R
mov ebx,filePath
mov edx,01FFh
mov eax,5  ;__NR_open
int 80h  ; syscall
mov fileHandle,eax

...

; Read file data
mov ebx,fileHandle
mov ecx,buffer
mov edx,numBytesToRead
mov eax,3  ; __NR_read
int 80h

; Write to STDOUT
mov edx,numCharsToWrite
mov ecx,buffer
mov ebx,1  ; STDOUT
mov eax,4 ; __NR_write
int 80h

; Repeat as many times as necessary

; Close file
mov ebx,fileHandle
mov eax,6 ; __NR_close
int 80h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:51:38.590

在终端中使用它，例如*./[program name] > destination.txt < source.txt*， source 是要从中复制的任何文件....这将逐字节复制..如果您不指定目标文件该程序会将你的文件内容显示到终端，*即[程序名称] < source.txt* ...

```
 SECTION .bss
        fileBuf: resb 1
    SECTION .data
    SECTION .text
        global _start
    _start:

        nop

      read: mov eax, 3 ; sys_read
            mov ebx, 0 ; standard input
            mov ecx, fileBuf
            mov edx, 1
            int 80h
            cmp eax, 0 ; ensure havn't read eof
            je exit

      write:mov eax, 4 ; sys_write
            mov ebx, 1 ; standard output
            mov ecx, fileBuf
            mov edx, 1
            int 80h
            jmp read

     exit: mov eax, 1 ; wrap it up
           mov ebx, 0
           int 80h 
```

# php - 为sql查询插入变量的正确方法是什么

> ID：14246079
> 
> 赞同：0
> 
> 时间：2013-01-09T20:42:20.880
> 
> 标签：php, mysql, sql

我这里有一段 php，我用来在用户提供的两个日期之间提取某些日期

```
if($start_date!="" && $end_date!=""){
$query[]="submit_time BETWEEN '$start_date' and '$end_date'";
} 
```

为什么在处理字符串之后，它起作用了。然而，威德利例外的做法似乎是：

```
if($start_date!="" && $end_date!=""){
$query[]="submit_time BETWEEN '".$start_date."' and '".$end_date."'";
} 
```

任何人都可以详细说明为什么两种方式都有效，哪一种是最好的？我今天被告知我应该以第一种方式进行，但我总是将变量与字符串分开。有任何想法吗？

或者也许是一个更好的例子：

```
$sql="SELECT * FROM $tbl_name WHERE submit_time BETWEEN 
'$start_date' and '$end_date'"; 
```

VS

```
$sql="SELECT * FROM $tbl_name WHERE submit_time BETWEEN 
'".$start_date."' and '".$end_date."'"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:45:15.070

Neighter 是最正确的方法。如果这是您进行的唯一检查，那么您将进行 sql 注入。

您应该使用准备好的语句：

[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

如果您只是在谈论一般的字符串插值，我更喜欢[`sprintf`](http://php.net/manual/en/function.sprintf.php)它，因为我认为它更具可读性并且它可以进行类型转换：

```
$name = 'John Doe';
sprintf("Hello %s - How are you today", $name); 
```

请在任何情况下都不要在您的 sql 中使用用户提供的开始和结束日期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:48:23.777

实际上......这些版本都不是最好的解决方案。如果您使用准备好的语句并提供开始和结束日期作为此查询的参数，那会好很多。如果你使用 PDO，它看起来像这样：

```
$stmt = $db->prepare('SELECT * FROM somewhere WHERE submit_time BETWEEN :startdate AND :enddate');
$stmt->bindParam(':startdate', $start_date);
$stmt->bindParam(':enddate', $end_date);
$stmt->execute(); 
```

通过这种方式，您可以确保不会弄乱您的查询，并且执行速度也会更快，因为查询解析器不必评估您的变量是否包含任何 SQL 语法。

回答您的其余问题：这是编写干净代码的问题。在字符串中嵌入变量看起来有点混乱，因为您可以在任何提供语法突出显示的编辑器中轻松分辨。如果你有数组元素要添加到你的字符串中，它会变得特别混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:44:56.543

我一直使用第一种方法，我认为这只是一个选择问题，而不是与你的编码有任何关系。但是，这只是我的意见.. 让我们拭目以待

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:48:52.167

它们之间实际上没有区别，只是个人喜好。您确实应该使用准备好的语句（PDO），但至少将变量包装在 mysql_real_escape_string() 中以使其更安全。PDO 是要走的路。

```
$start_date = mysql_real_escape_string($start_date);
$end_date = mysql_real_escape_string($end_date);

$sql="SELECT * FROM $tbl_name WHERE submit_time BETWEEN 
'$start_date' and '$end_date'"; 
```

# perl - Perl DBI：结果值被截断

> ID：14246080
> 
> 赞同：0
> 
> 时间：2013-01-09T20:42:24.423
> 
> 标签：perl, dbi

我目前遇到一个问题，即使用下面的选择从数据库中获取的长字符串被截断。在下面的语句中，当我在 while 循环中将 val1 打印出来时，val1 在 115 个字符后被切断，但在表中，字符串是 300 个字符。

我需要调整任何 Perl 模块配置参数吗？

谢谢！

```
my $sql = "SELECT val1 FROM TABLE";
my $sth = $dbh->prepare($sql)
    or die "Can't prepare statement: $DBI::errstr";
$sth->execute() or die "Cannot execute: " . $sth->errstr();
$sth->{'LongTruncOk'} = 1;
$sth->{'LongReadLen'} = 20000;
while(my @row = $sth->fetchrow_array()) {
  ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:01:22.347

根据[DBI 文档](https://metacpan.org/module/DBI#ATTRIBUTES-COMMON-TO-ALL-HANDLES)，您必须在准备之前设置 LongReadLen（并且可能是 LongTruncOk）。

> 在“准备”之后更改语句句柄的“LongReadLen”值通常不会产生任何效果，因此通常在调用“准备”之前在 $dbh 上设置“LongReadLen”。

# python - 'RuntimeError：使用列表时超出 cmp 的最大递归深度'

> ID：14246081
> 
> 赞同：4
> 
> 时间：2013-01-09T20:42:24.637
> 
> 标签：python, list

我在`RuntimeError: maximum recursion depth exceeded in cmp`使用列表时遇到了错误。更准确地说，列表上`p0 in points`的`points.index(p0)`方法调用和`points.remove(p0)`方法调用`points`一直在我的列表`p0`的特定索引处引发特定字典的错误。`points`该`points`列表在发生错误时包含 4700 个字典，从 12000 个对象的列表中将一个字典减少了一个，直到引发错误。字典包含对列表中另一个字典的引用，该`p0`字典返回包含对`p0`对象的引用。`p0`字典以及它包含引用的字典在三个方法调用中的任何一个引发错误之前在列表中出现两次`points`。

这个错误来自哪里？

**编辑**：这是引发错误的代码。

```
for roadType in roadTypes:
    points = roadPoints[roadType][:]

    while len(roadTails[roadType]) > 0:
        p0 = roadTails[roadType].pop()

        p1 = p0['next']
        points.remove(p0) # Where the error occurs
        points.remove(p1)

        while True:
            p2 = find(p1, points, 0.01)

            if p2:
                points.remove(p2)

                p3 = p2['next']
                points.remove(p3)

                if p3 in roadTails[roadType]:
                    roadTails[roadType].remove(p3)
                    break
                else:
                    p0, p1 = p2, p3
                    continue

            else: break 
```

这是 的定义`find`，其中`dist`计算两点之间的距离。

```
def find(p1, points, tolerance = 0.01):
    for p2 in points:
        if dist(p2['coords'], p1['coords']) <= tolerance:
            return p2
    return False 
```

这是错误的完整回溯：

```
Traceback (most recent call last):
  File "app.py", line 314, in <module>
    points.remove(p0) # Where the error occurs
RuntimeError: maximum recursion depth exceeded in cmp 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T21:09:22.137

可能您有一个循环结构，其中一个 dicts 通过`'next'`s 链引用自己，如下所示：

```
>>> a = {}
>>> b = {}
>>> a['next'] = b
>>> b['next'] = a
>>> a == b
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: maximum recursion depth exceeded in cmp 
```

如果您打印出字典，循环引用将显示为`...`：

```
>>> a
{'next': {'next': {...}}} 
```

也许这可以帮助找到字典的有问题的部分。

# java - 3个不重复的随机数

> ID：14246082
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:42:27.110
> 
> 标签：java, android, random

> **可能重复：**
> [使用随机数生成器对整数进行随机排列](https://stackoverflow.com/questions/10872132/random-permutation-of-integers-using-a-random-number-generator)
> [如何生成随机数，但它不会产生相同的数字](https://stackoverflow.com/questions/14174296/how-to-make-a-random-number-but-it-doesnt-produce-the-same-number)

我创建了 3 个随机数我希望这 3 个数字不重复

例如，如果第一个随机数 = 到 3，我不想要第二个数字或第三个数字 = 到 3
并获取最小数并在 3 个按钮上随机数 10 在按钮中设置这些数字

```
package com.math4kids;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class MinNumber extends Activity {
public Button result1, result2, result3;
public Random random = new Random();
int[] array1 = new int[3] ;
int minimum = array1[0]; //sets the first to be the smallest
int num1,num2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.minnumber);

    result1 = (Button)findViewById(R.id.result1);
    result2= (Button)findViewById(R.id.result2);
    result3= (Button)findViewById(R.id.result3);

    array1[0] = random.nextInt(10) + 1;
    array1[1] = random.nextInt(10) + 1;;
    array1[2] = random.nextInt(10) + 1;;

    for (int i = 0; i < array1.length; i++) //goes through your array
    {
         if (array1[i] < array1[0]) //checks and replaces if necessary
         {
            minimum = array1[i];   

         }
         if(array1[0]==minimum){
             num1=array1[1];
             num2=array1[2];
         }
         if(array1[1]==minimum){
             num1=array1[0];
             num2=array1[2];
         }
         if(array1[2]==minimum){
             num1=array1[1];
             num2=array1[0];
         }
            switch (random.nextInt(3)) {
            case 0:
                result1.setText(String.valueOf(minimum));
                result2.setText(String.valueOf(num1 ));
                result3.setText(String.valueOf(num2 ));
                break;
            case 1:
                result2.setText(String.valueOf(minimum));
                result1.setText(String.valueOf(num1));
                result3.setText(String.valueOf(num2));
                break;
            case 2:
                result3.setText(String.valueOf(minimum));
                result2.setText(String.valueOf(num1));
                result1.setText(String.valueOf(num2));
                break;
            }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:51:09.090

它可以通过创建`HashSet`以保留已经生成的值来解决。例如：

```
Set<Integer> used = new HashSet<Integer>();

// wrap this code-block in some method...
Integer num;
do {
   num = random.nextInt(10);
   if (!used.contains(num)) {
      used.add(num);
      break;
   }
} while(used.size() < 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:51:34.520

我会做类似的事情：

```
num1 = random.nextInt(10) ;
num2  =( num1 + random.nextInt(10-1)+1) % 10 ;
num3 = random.nextInt(10) ;
while(num3==num1 || num3==num2)
    num3 = random.nextInt(10) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:49:45.317

这是给你的伪代码：

```
int numbers[total_numbers]=-1;

for (j=0:total_numbers)
{
  flag=false;
  while (flag=false)
  {
     temp=random();
     flag=true;
     for (i=0:total_numbers) check if temp == numbers[i] then flag=false;
  }
  numbers[j]=temp;
} 
```

# android - 在 Google 地图上搜索时出现 NullPointer 或 InflateException

> ID：14246085
> 
> 赞同：0
> 
> 时间：2013-01-09T20:42:33.823
> 
> 标签：android, nullpointerexception, google-maps-android-api-2, inflate-exception

我是初学者，目前正在尝试使用 Google Maps Api V2+fragments+actionbar 进行实验，但我想我在这里碰壁了。这个应用程序的目的非常简单，您可以从片段上的编辑文本或操作栏的编辑文本中键入位置，然后当您点击搜索时，应用程序会在所需位置上显示带有标记的地图。如果我输入搜索并点击按钮，我会收到以下错误：

```
 01-10 17:29:06.560: E/AndroidRuntime(17425): FATAL EXCEPTION: main
01-10 17:29:06.560: E/AndroidRuntime(17425): java.lang.NullPointerException
01-10 17:29:06.560: E/AndroidRuntime(17425):    at alan.android.testMapas.FragOne$1.onClick(FragOne.java:32)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at android.view.View.performClick(View.java:3574)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at android.view.View$PerformClick.run(View.java:14293)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at android.os.Handler.handleCallback(Handler.java:605)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at android.os.Looper.loop(Looper.java:137)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at android.app.ActivityThread.main(ActivityThread.java:4441)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at java.lang.reflect.Method.invokeNative(Native Method)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at java.lang.reflect.Method.invoke(Method.java:511)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-10 17:29:06.560: E/AndroidRuntime(17425):    at dalvik.system.NativeStart.main(Native Method) 
```

它仅在地图已经显示时才有效，但如果我更改选项卡并返回或再次搜索，我会得到一个 inflate 异常：

```
01-10 17:32:26.080: E/AndroidRuntime(17681): FATAL EXCEPTION: main
01-10 17:32:26.080: E/AndroidRuntime(17681): android.view.InflateException: Binary XML file line #2: Error inflating class fragment
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at alan.android.testMapas.FragSearch.onCreateView(FragSearch.java:35)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.os.Handler.handleCallback(Handler.java:605)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.os.Looper.loop(Looper.java:137)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.app.ActivityThread.main(ActivityThread.java:4441)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at java.lang.reflect.Method.invokeNative(Native Method)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at java.lang.reflect.Method.invoke(Method.java:511)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at dalvik.system.NativeStart.main(Native Method)
01-10 17:32:26.080: E/AndroidRuntime(17681): Caused by: java.lang.IllegalArgumentException: Binary XML file line #2: Duplicate id 0x7f040036, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
01-10 17:32:26.080: E/AndroidRuntime(17681):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
01-10 17:32:26.080: E/AndroidRuntime(17681):    ... 18 more 
```

以下是主要活动：

```
public class MainActivity extends SherlockFragmentActivity {

    public ActionBar bar;
    private EditText txtsearch;

    // private

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        bar = getSupportActionBar();
        //mTabSeeker=new TabSeeker(bar);
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayShowTitleEnabled(false);

        Tab tab0 = bar
                .newTab()
                .setText("1")
                .setTabListener(
                        new SherlockTabListener<FragOne>(this, "One",
                                FragOne.class));
        bar.addTab(tab0);

        Tab tab1 = bar
                .newTab()
                .setText("2")
                .setTabListener(
                        new SherlockTabListener<FragSearch>(this, "Search",
                                FragSearch.class));
        bar.addTab(tab1);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_main, (Menu)menu);

        View v = (View)menu.findItem(R.id.searchoption).getActionView();

        txtsearch = (EditText)v.findViewById(R.id.txt_search);

        txtsearch.setOnEditorActionListener(new EditText.OnEditorActionListener() {

            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                // TODO Auto-generated method stub
                FragSearch fs;
                bar.setSelectedNavigationItem(1);

                fs = (FragSearch) getSupportFragmentManager().findFragmentByTag("Search");
                fs.locateSearch(txtsearch.getText().toString());

                return false;
            }
        });

        return super.onCreateOptionsMenu(menu);
    } 
```

搜索片段

```
public class FragSearch extends SherlockFragment{

    private CameraUpdate camUpd1;
    private GoogleMap map;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        View view = inflater.inflate(R.layout.fragsearch,container,false);
        map = ((SupportMapFragment)getSherlockActivity().getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

        map.setMapType(GoogleMap.MAP_TYPE_NORMAL);

        return view;
    }

    public void locateSearch(String text){
        Geocoder geocoder = new Geocoder(getActivity(),Locale.getDefault());
        try {
            List<Address>list= geocoder.getFromLocationName(text, 1);
            if(list!=null){
            Double lat=(Double) list.get(0).getLatitude();
            Double lng=(Double)list.get(0).getLongitude();
            LatLng ubicacion = new LatLng(lat,lng);
            CameraPosition camUpd1=new CameraPosition.Builder().target(ubicacion).zoom(16).build();
            CameraUpdate camUpd3 = CameraUpdateFactory.newCameraPosition(camUpd1);
            map.clear();

            map.addMarker(new MarkerOptions().position(new LatLng(lat,lng)).title(text));

            map.animateCamera(camUpd3);
            }else{

            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            Toast.makeText(getSherlockActivity(), "Search Error", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }
    }
} 
```

FragOne.java

```
 public class FragOne extends SherlockFragment {
    private EditText et;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        View view = inflater.inflate(R.layout.fragone, container, false);

        et = (EditText) view.findViewById(R.id.editText1);
        Button bt = (Button) view.findViewById(R.id.button1);

        bt.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                FragSearch fb;
                String text;
                text = et.getText().toString();
                fb = (FragSearch) getSherlockActivity()
                        .getSupportFragmentManager()
                        .findFragmentByTag("Search");
                fb.locateSearch(text);
            }
        });

        return view;
    }

} 
```

碎片搜索.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
```

和 search.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <EditText
        style="@style/Theme.Sherlock.Light.Dialog"
        android:id="@+id/txt_search"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.67"

        android:inputType="text" />

</LinearLayout> 
```

谢谢大家！如果需要我发布项目中的任何内容，请告诉我。

**编辑：**我已经更新了两个日志，我认为给出了 nullpointer，因为它必须在访问 locateSearch 方法之前被实例化，所以我认为我必须找到一种方法将文本作为参数传递并定位它有已实例化，但至于 InflateExceptioin 看起来我将不得不找到另一种方法来扩展该片段的视图，因为 TabListener 是我在其他应用程序上使用的，没有关于常规片段的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:14:40.397

```
java.lang.NullPointerException
    at alan.android.testMapas.FragOne$1.onClick(FragOne.java:32) 
```

**对于您的第一组错误，**您的 Button 的 OnClickListener 中有一个空值。我猜是`fb`因为我看不到你在哪里给任何 Fragment 标签`"Prestamo"`。但从第 32 行开始，如 LogCat 所述。

```
Caused by: java.lang.IllegalArgumentException: Binary XML file line #2: Duplicate id 0x7f040036, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment 
```

**第二组错误**发生是因为每次单击选项卡时都会创建现有片段的新副本。（因此出现重复的 id 错误。）您的 TabListener 应该重新加载已经存在的片段。这是一个简单的[教程](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)来帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:08:33.567

最后我把 IllegalArgumentException 排除在外。在做了一些研究之后，我最终改变了我的 OnCreateView() 并扩展了 SupportMapFragment 而不是 SherlockFragment。这是代码：

```
public class FragSearch extends SupportMapFragment {

    private GoogleMap map;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = super.onCreateView(inflater, container, savedInstanceState);
        map = getMap();
        map.setMapType(GoogleMap.MAP_TYPE_NORMAL);

        return view;
    }

    public void locateSearch(String text) {
        Geocoder geocoder = new Geocoder(getActivity(), Locale.getDefault());
        try {
            List<Address> list = geocoder.getFromLocationName(text, 1);
            if (list != null) {
                Double lat = (Double) list.get(0).getLatitude();
                Double lng = (Double) list.get(0).getLongitude();
                LatLng ubicacion = new LatLng(lat, lng);
                CameraPosition camUpd1 = new CameraPosition.Builder()
                        .target(ubicacion).zoom(16).build();
                CameraUpdate camUpd3 = CameraUpdateFactory
                        .newCameraPosition(camUpd1);
                map.clear();

                map.addMarker(new MarkerOptions()
                        .position(new LatLng(lat, lng)).title(text));

                map.animateCamera(camUpd3);
            } else {

            }
        } catch (Exception e) {
            Toast.makeText(getActivity(), "Search Error", Toast.LENGTH_SHORT)
                    .show();
            e.printStackTrace();
        }
    }
} 
```

至于 NPE，似乎它抛出了那个异常，因为我试图在实例化该对象之前访问方法，所以看来我必须尝试找到解决方法。

# c++ - C++ std::map 和 std::vector 的优点？

> ID：14246087
> 
> 赞同：0
> 
> 时间：2013-01-09T20:42:42.193
> 
> 标签：c++, performance, dictionary, vector, std

周末我将参加一个编程比赛，我想知道我应该使用std::vector还是std::map？我会简单地将它们用作数组，但我很困惑哪个更好（主要是基本操作的速度）？

我在stackoverflow上看到了这张照片，我不知道这些之间的主要区别是什么......

![](../Images/19c8a03c9c86af1ba6f238bbc04c6466.png)

图片表明矢量更快......我真的不知道该怎么办请帮助我！我只需要像数组一样使用它们，但具有动态大小......在此先感谢，

**编辑** 我可能会得到一个整数的二维数组（例如城市或迷宫的地图，我会遇到一些可以用图形算法或动态编程解决的问题），所以我需要的是：写，读“表”的特定单元格，搜索特定值，我想就是这样。我听说 std::map 不会在内存中找到完整的 N*M 大小的表，但我会按值进行计算……那么它可能使用更少的内存是真的吗？

**对不起**，我太傻了，但我从来没有真正的老师，我学到了我所知道的一切。我刚开始学习数据结构（2-3棵树、红黑树、二项式堆等等……）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T20:47:54.533

> 我想知道我应该使用`std::vector`还是`std::map`？

**这完全取决于您想要/需要做什么。**如果您需要输入来自用户的 2 个数字，将它们相加并显示结果，那么使用矢量或地图是没有意义的。

但是，如果您需要存储对象（或基元）数组，`std::vector`通常是要走的路。如果您需要存储键和值，那么这就是`std::map`发明的目的。你问的问题太宽泛了，所以实际上很难回答，但你可能还是明白了。

此外，您还可以获得一些关于您不应该尝试在[此处](http://www.infiltec.com/j-h-wrld.htm)复制的代码的灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:45:29.033

std::map 不是数组，而是红黑二叉树。因此，作为基本的阵列存储，它不是一个好的选择。

std::vector 可以用作数组，并且可能会提供与数组相似的访问速度（虽然它可能取决于实现，但如果不是全部，大多数将被实现为数组）。std::vector 的优势不是速度，而是它为您管理内存。

此外，您可能想了解不同的数据结构。这将有助于扩展您的编程技能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:48:13.367

您是指字符数组的 C 意义上的数组还是数学意义上的数组？你的数组是多维的吗？

如果您指的是数学类型，您可能会发现将数组存储在堆中分配的空间中，并通过执行一个新的、更大的 malloc 后跟一个 memcopy 和一个空闲的旧分配区域来调整大小可能比使用 std:containers 更快。

不要被 std: 构造函数所迷惑，它们听起来像是在按空间分配你需要的东西。他们在构造函数时分配了太多空间，所以如果他们没有这个，他们就不必像他们可能的那样经常增长。当它们确实必须增长时，它们会再次出于完全相同的原因再次要求额外的空间。当您确实必须扩展空间时，请记住使用最大的数据项移动数据。假设您有一个 64 位总线并且字符一次移动一个，并且您的编译器不够聪明，无法为您优化它，那么 1/64 的 long 移动速度比 N 字节快。

# asp.net - 从日期获取月份名称到下拉列表中

> ID：14246089
> 
> 赞同：1
> 
> 时间：2013-01-09T20:42:44.683
> 
> 标签：asp.net, sql, ms-access

我有一个 Access 数据库表，其中包含一行 DateTime 格式的日期。我需要做的是将可用日期的所有不同月份名称放入我的 asp.net 页面。例如，如果我有以下日期：

```
03-JAN-13 
04-JAN-13
09-FEB-13 
```

sql 查询会给我以下月份的名称：JAN 和 FEB。在网上搜索后，我发现以下 sql 查询应该可以满足我的需求：

```
OleDbCommand cmd5 = new OleDbCommand("SELECT distinct DATENAME( 'mm', date_time) as MonthName from temperature ", cn); 
```

但是当我运行我的 asp.net 网站时，我得到以下异常：

```
Exception Details: System.Data.OleDb.OleDbException: Undefined function 'DATENAME' in expression. 
```

PS：之后我会将这些字符串值放在一个下拉列表中（这一步没问题）。那么有人可以告诉我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:48:35.063

对于 Access，语法应该是：

```
SELECT DISTINCT MonthName(Month ( date_column )) as MonthName from temperature 
```

因为该`MonthName`函数需要一个 Integer 并且该`Month`函数返回 Month 的 Integer 值。

有关完整的详细信息，请参见[此处](http://www.techonthenet.com/access/functions/date/month.php)和[此处](http://www.techonthenet.com/access/functions/date/monthname.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:48:09.290

您可以使用该`Month()`函数获取给定日期的月份数，然后将其提供给该`MonthName()`函数。

```
SELECT distinct MonthName(Month(date_time)) as [MonthName]
from temperature 
```

别名*MonthName*是保留字，因此我将别名括在方括号中。

获得您想要的东西的另一种方法是使用该`Format()`功能。

```
SELECT distinct Format(date_time, 'mmmm') as [MonthName]
from temperature 
```

我不确定哪个会更快；你可以两个都试试。

# asp.net - 可以在 global.asax 或 web.config 中阻止验证摘要消息框的内容

> ID：14246090
> 
> 赞同：3
> 
> 时间：2013-01-09T20:42:44.177
> 
> 标签：asp.net, validation, web-config, global-asax, validationsummary

我在使用带有属性的验证摘要的 Web 应用程序时遇到问题`"ShowMessageBox" = true`。问题是消息框没有显示，代码很简单：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">

  <div>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:CompareValidator ID="CompareValidator1" ValidationGroup="Group1" ControlToValidate="TextBox1" Type="Integer" Operator="DataTypeCheck" runat="server" ErrorMessage="CompareValidator"></asp:CompareValidator>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ValidationGroup="Group1" ControlToValidate="TextBox1" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
        <asp:Button ID="Button1" ValidationGroup="Group1" runat="server" Text="Button" />
        <asp:ValidationSummary ID="ValidationSummary1" runat="server" ValidationGroup="Group1" ShowMessageBox="true" ShowSummary="false" EnableClientScript="true" />
    </div>
    </form>
</body>
</html> 
```

我还在一个测试项目中尝试了完全相同的代码，它可以工作。

我想知道 或 中是否有东西`global.asax`可以`web.config`阻止此弹出窗口显示。

顺便说一句：我正在更新一个使用 .net 3.5 的旧应用程序。所以我不知道到底是什么，`web.config`这`global.asax`就是我问的原因。

更新：我试图在测试应用程序中复制应用程序的 web.config 并且它不起作用所以 web.config 中有一些东西阻止消息框显示......我只需要知道它现在可以是什么...... .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:38:54.810

我不知道您使用的是什么浏览器，但我确实找到了这篇文章：

[http://aspadvice.com/blogs/rbirkby/archive/2006/11/01/Client_2D00_side-validation-in-Firefox.aspx](http://aspadvice.com/blogs/rbirkby/archive/2006/11/01/Client_2D00_side-validation-in-Firefox.aspx)

显然在 Firefox 中使用这一行`web.config`可以禁用客户端验证，或者至少在某些版本的 Firefox 中：

```
<xhtmlConformance mode="Legacy"/> 
```

# c++ - C++ 声音创建/操作库？

> ID：14246095
> 
> 赞同：3
> 
> 时间：2013-01-09T20:42:54.637
> 
> 标签：c++, audio

我不太确定我要找的东西叫什么（声音引擎）？基本上我正在创建一个应用程序来帮助进行音乐耳朵训练，所以我需要一个库来生成可以找到的各种音高（即a、a#、b、c、c#、d、d#、e.. ..)。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:47:09.680

我最喜欢的两个 C++ 音频库是[bass](http://www.un4seen.com/)和[FMOD](http://www.fmod.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:50:21.437

尝试其中之一：

低音：[http ://www.un4seen.com/](http://www.un4seen.com/)

OpenAL：[http ://connect.creativelabs.com/openal/default.aspx](http://connect.creativelabs.com/openal/default.aspx)

FMOD：[http ://www.fmod.org/](http://www.fmod.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:21:11.897

我也想看看

[http://puredata.info/](http://puredata.info/) [http://libpd.cc/](http://libpd.cc/)

libpd 基于纯数据，但可以在没有纯数据用户界面的应用程序中实现。所以首先你用纯数据构建一个图形补丁，然后使用 libpd 在你的应用程序中实现它。可以用 C 或 C++ 为纯数据编写扩展。

# regex - 不包含某些模式的字符串上的正则表达式模式匹配

> ID：14246102
> 
> 赞同：0
> 
> 时间：2013-01-09T20:43:26.807
> 
> 标签：regex

我有以下形式的字符串：`...format=<format_type>...`其中 legal `format_type`s 可以是其中之一

`image/{png,jpeg,tiff}`或者`{kmz,kml}`

我想匹配任何具有非法格式类型的字符串。例如

`foo&bar&format=image/png`和`foo&bar&format=kml&baz`

不应该匹配，但是

`foo&bar&format=image/svg`和`foo&bar&format=application/pdf&baz`

应该。

我试过`.*format=(image\/)?.*(?!=(kml|kmz|png|jpeg|tiff)).*`了，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:32:52.217

毫无疑问，有一个匹配任何非法格式的正则表达式，但编写一个匹配的格式看起来更容易。因此，一个快速的解决方法可能是查找与合法模式不匹配的任何字符串，而不是查找与非法模式匹配的字符串。

所以而不是

```
if (str =~ m/ ...illegal pattern... /) { ... } 
```

你可以使用

```
if not (str =~ m/ ...legal pattern... /) { ... }
unless (str =~ m/ ...legal pattern... /) { ... } 
```

所以你得到：

```
if not (str =~ m/^.*format=(image\/(png|jpeg|tiff))|kmz|kml).*$/) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:23:24.887

我手边没有 PERL 解释器，但这似乎在 Java 中有效：

```
^.*format=(?!(?:image/)?(?:kml|kmz|png|jpeg|tiff)).*$ 
```

这是测试它的代码段：

```
private static final Pattern REGEX = 
   Pattern.compile("^.*format=(?!(?:image/)?(?:kml|kmz|png|jpeg|tiff)).*$");

public static void main(String[] args) {
    for (String format : Arrays.asList("foo&bar&format=image/png", 
            "foo&bar&format=kml&baz", "foo&bar&format=image/svg", 
            "foo&bar&format=application/pdf&baz")) {
        System.out.printf("%s %s%n", format, 
            REGEX.matcher(format).matches() ? "matches" : "does not match");
    }
} 
```

印刷：

```
foo&bar&format=image/png does not match
foo&bar&format=kml&baz does not match
foo&bar&format=image/svg matches
foo&bar&format=application/pdf&baz matches 
```

# java - 使用来自会话的信息呈现 JSF 页面

> ID：14246103
> 
> 赞同：0
> 
> 时间：2013-01-09T20:43:29.130
> 
> 标签：java, servlets, jsf-2, javabeans, facelets

我有以下 JSF 页面：

```
<h:head>
    <title>Admin Page</title>        
</h:head>
<h:body>

    <h1>Users List</h1>

    <h:dataTable value="#{adminBean.linkArr}" var="o" >

        <h:column>
            <f:facet name="header">User name</f:facet>
            #{o.username}
        </h:column>

    </h:dataTable>        

</h:body> 
```

像这样的托管bean：

```
@ManagedBean(name="adminBean")
@SessionScoped
public class AdminBean {

private static UserLink[] linkArr;

public AdminBean() {
    FacesContext context = FacesContext.getCurrentInstance();  
    HttpServletRequest request = (HttpServletRequest)context.getExternalContext().getRequest();  
    HttpSession session = request.getSession();

    String values[] = (String[])request.getSession().getAttribute("userList");

    int userNos = values.length;
    linkArr = new UserLink[userNos];

    for(int i = 0; i < userNos; ++i) {
        String tmp = values[i];
        linkArr[i] = new UserLink(tmp);
    }                
}
public UserLink[] getLinkArr() {
    return linkArr;
}

public static class UserLink {

    public String username;

    public UserLink(String username) {
        this.username = username;
    }

    public String getUsername() {
        return username;
    }
}
} 
```

我实际上想要做的是：

通过创建会话来保存以前调用的 servlet 中的一些数据。假设托管会话 bean 仅在调用其关联的 XHTML 文件时创建，我从会话对象中获取属性，然后使用它来填充 JSF 表。

但是，我得到的不是 JSF 表，而是以下输出：

```
Users List

User name #{o.username} 
```

我是否假设托管会话 bean 的生命周期错误，或者我的 JSF 页面中存在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:47:33.133

那么，EL根本不被评估？这只能意味着当前请求 URL（如您在浏览器地址栏中看到的）与webapp`<url-pattern>`中`FacesServlet`配置的`web.xml`. 它负责将 XHTML 文件解析为 JSF 组件树，并让它评估所有 EL 表达式并生成有效的 HTML 代码。如果您在 webbrowser 中完成了右键单击，*查看源代码*，您还应该注意到：所有 JSF 标记都未解析，而不是生成了它们的 HTML 表示。

因此，要解决此问题，您需要确保当前请求 URL 与 faces servlet 的 URL 模式匹配。因此，如果您已将其映射到`*.jsf`，那么您应该打开页面`page.jsf`而不是 by `page.xhtml`。或者，您也可以将 faces servlet 的 URL 模式更改`web.xml`为`*.xhtml`，这样您就不必担心虚拟 URL。

请注意，此问题与会话管理**无关。**考虑到奇怪的设计，您可能迟早会遇到与此相关的问题，但这是一个不同的问题。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why)

# c++ - 创建 .lib 文件 - 第一次

> ID：14246105
> 
> 赞同：2
> 
> 时间：2013-01-09T20:43:31.390
> 
> 标签：c++, c, windows, static-libraries

这是我第一次创建 .lib 文件，我有以下 C++ .exe 项目：

```
#include<stdio.h>

#pragma comment(lib, "mylib.lib")

int myFunction(void);

void main()
{
    myFunction(); 

} 
```

和另一个 C 项目（.lib 项目）

```
 int __cdecl myFunction(void)
   {
   } 
```

我正在成功编译 .lib 文件“mylib.lib”并将其放入我的 exe 文件的编译目录中，但我收到“错误 LNK2019：未解析的外部符号”错误，我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:59:40.660

通常，您为您的库提供一个标头，并将其包含在库和用户中。

首先，您应该`extern`在函数声明中使用关键字。而且因为您已经指定了调用约定，所以`__cdecl`您应该保持一致：

**mylib.h**

```
extern int __cdecl myFunction(void); 
```

**mylib.cpp**

```
#include "mylib.h"

int __cdecl myFunction(void)
{
    return 42;
} 
```

**库用户.cpp**

```
#include <stdio.h>
#include "mylib.h"

#pragma comment(lib, "mylib.lib")

int main(void)
{
    printf( "The answer to the question is %d\n", myFunction() ); 
    return 0;
} 
```

* * *

**编辑**——名称修改...

我刚刚看到您对 C 和 C++ 项目的评论。在这种情况下，您必须帮助编译器处理发生的符号修改。在您的标题中，您执行以下操作：

```
#ifdef __cplusplus
extern "C" {
#endif

extern int __cdecl myFunction(void);

#ifdef __cplusplus
}
#endif 
```

# eclipse - 为 Juno 构建产品确实会在“首选项”中生成空的主题列表

> ID：14246109
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:43:34.190
> 
> 标签：eclipse, eclipse-plugin, tycho

在为 4.2“主题”构建我的产品（使用 Tycho）时，“首选项”中的列表为空 - [http://i.imgur.com/kLYzU.png](http://i.imgur.com/kLYzU.png)。但是，当我在 Eclipse 4.2 IDE 列表中查看时，并且所有复选框都存在。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:44:20.380

缺少有助于主题的捆绑包。找出它们是哪些并将它们添加到您的产品中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:38:07.930

至少有些主题是特定于操作系统的。因此，这可能取决于Tycho 构建中指定的[环境。](http://wiki.eclipse.org/Tycho/Reference_Card#Target_runtime_environment)

# git - 确定可以安全删除哪些远程分支

> ID：14246110
> 
> 赞同：0
> 
> 时间：2013-01-09T20:43:44.160
> 
> 标签：git

我有一堆远程 git 分支：

`remotes/origin/<branchname>`ETC...

我知道他们中的大多数可能会被删除。

1.  查看哪些已完全合并到 master 中的最佳方法是什么？这些我想先删除。
2.  查看其余分支的未合并提交的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:15:05.143

做`git branch -r --merged master`你想做的事吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:10:25.347

获取此信息的一种方法是：

```
git branch -vv 
```

这将列出每个分支是最新的、领先的还是落后的，但它是为人类阅读而设计的，因此不容易解析以进行进一步的脚本编写。如果你需要走那条路，可能有更好的方法。

查看其中一个 GUI 可以直观地告诉您哪些分支未合并，但取决于您拥有的分支数量，这可能很乏味。

编辑：另一种选择是：

```
git show-branch --independent | xargs git name-rev 
```

这基本上显示了哪些分支无法从任何其他分支访问，但也可能包含`master`在列表中，因此您可能需要稍微修剪一下输出......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:16:07.363

这个`git log`命令是我用来查看分支如何相互关联的命令。

> 日志 --oneline --decorate=short --graph --all --simplify-by-decoration

并将未修饰的提交添加到上面只需删除`--simplify-by-decoration`

> 日志 --oneline --decorate=short --graph --all

此外，不是直接回答您的问题，而是与查看需要注意的提交有关，此版本仅显示尚未推送的具有远程跟踪的分支上的提交。

> 日志 --oneline --decorate=short --graph --all --branches --not --remotes

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:16:54.277

我的第一选择是尝试使用`git branch -d`（小写 d）删除它。如果分支尚未完全合并，那将失败。

# iphone - IOS - 如何使用局部视图

> ID：14246116
> 
> 赞同：1
> 
> 时间：2013-01-09T20:43:59.243
> 
> 标签：iphone, ios

我现在有点困惑。我想在我的许多视图中使用部分视图（= 整个视图的一个区域），而且我想通过情节提要来做到这一点。

这些局部视图通常具有功能（它们必须将某种输入传递给“主”视图控制器）。

所以我的问题是：我如何（如果可能）正确重用这些部分视图，而无需将它们添加到我的代码中的超级视图（我知道我可能必须将“主”视图控制器设置为编码）？

我认为这可能通过容器视图实现。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:42:28.977

您可以将它们放在 UIContainer 中。并有一个具有容器框架大小等的 UIContainer 类，然后创建一个标准视图类以加载到该容器中。如果你想使用故事板，那对我来说是最好的解决方案。

# python - 级联库依赖

> ID：14246117
> 
> 赞同：2
> 
> 时间：2013-01-09T20:44:01.237
> 
> 标签：python, c, cuda, shared-libraries, undefined-symbol

由于此处无法解释的原因，我需要在“C”中创建一个可在 Python 中调用的共享库（称为 libA）。这个共享库需要调用另一个自定义共享库（我们将其命名为 libCuda）。此外，libA 还调用了许多其他外部共享库，例如 MySQL 等。

在包含 libCuda 之前，在 Python 中调用的所有 C 函数都可以正常工作，MySQL 子调用也可以正常工作，等等。但是，一旦将 libCuda 添加到 libA，Python 就会抱怨：

```
caughtError c process - [directory]/libA.so: undefined symbol: cudaFunction1 
```

libCuda，正如您可能已经猜到的那样，是使用 nvcc 编译的 nVidia Cuda 代码并设置为可 C 链接（即在函数原型中导出“C”）我已经使用独立测试台测试了这个共享库（libCuda）（编写在 C) 中，一切都按预期工作。这是用于编译 Cuda 库的指令：

```
nvcc -arch=sm_30 -shared -o libCuda.so *.cu -Xcompiler -fPIC 
```

如果我使用：

```
$ ldd libA 
```

我没有看到任何信息表明 libA 需要加载 libCuda（或 MySQL）

用于编译 libA 的命令如下（libCuda 位于本地目录中）：

```
gcc *.c -c -L. -lCuda -lmysqlclient [many other shared libraries] -fPIC
gcc -shared -Wl,-soname,libA.so -lCuda -lmysqlclient [many other shared libraries] -o libA.so *.o 
```

我尝试将两个库文件都放在 /usr/lib 中并显式导出 LD_LIBRARY_PATH。没运气。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:07:03.547

当您链接 libA.so 时，您使用的共享库应指定为依赖项 ( `-L$somedirectory -lCuda`)。然后依赖项变得可见`ldd ./libA.so`，正如它们应该的那样，然后`LD_LIBRARY_PATH`会有所帮助。

共享库中允许使用未定义的符号，因此在构建时提供足够的依赖关系取决于您。如果 没有发生同样的事情`libmysqlclient`，那可能是因为`libmysqlclient`由于某些其他依赖项而被加载（或动态地使用`RTLD_GLOBAL`和*之前* `libA.so`）。那么它可能不是你想要的，即使问题不是立即可见的。

附言

1.  您可能想阅读有关*sonames*的内容（从`man ld`? 开始），以确定您是否真的要链接反对`libCuda.so`（而不是`libCuda.so.N`我希望的反对）。
2.  对于快速而肮脏的解决方法（如果你还在这个地方和我在一起:)，请尝试`LD_PRELOAD=/full/path/to/libCuda.so your-program`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:27:32.747

好的，所以没有赢，但我能够改变规则。

[以此为参考](https://devtalk.nvidia.com/default/topic/495294/cuda-programming-and-performance/nvcc-linking-and-soname-compiling-a-c-project-that-uses-the-soname-option/)，我首先用 nvcc 编译了 CUDA 代码，从而创建了几个对象 ( *.o ) 文件。然后在创建库 libA 时将这些目标文件添加到由 gcc 链接的目标文件列表中。此外，以下链接器参数已添加到 gcc 命令“-L/usr/local/cuda/lib64 -lcudart”中（我使用的是 x64 机器）。

指出您必须将任何库依赖项放在需要它的目标文件之后，这一点非常重要。如果你不这样做，gcc 会抱怨未定义的引用。一个好的经验法则是将所有库放在 gcc 行的末尾。详情见下文。

简而言之，这是有效的：

CUDA：

```
nvcc -arch=sm_30 -c *.cu -Xcompiler -fPIC 
```

C：

```
gcc *.c -c -fPIC -L/usr/local/cuda/lib64 -lcudart -lmysqlclient [many other shared libraries]
gcc -shared -Wl,-soname,libA.so -o libA.so *.o [cuda_obj_file_dir]/*.o -L/usr/local/cuda/lib64 -lcudart -lmysqlclient [many other shared libraries] 
```

非常感谢 Anton Kovalenko 的建议。不幸的是，我无法解决我的最终目标，但也许这将作为其他人的中间体，就像现在对我一样。

# python - 如何重定向单元测试的输出？明显的解决方案不起作用

> ID：14246119
> 
> 赞同：8
> 
> 时间：2013-01-09T20:44:13.790
> 
> 标签：python, unit-testing, stdout

这是我的代码：

```
import unittest
import sys
import os

class DemoTest(unittest.TestCase):
    def test_one(self):
        print "test one"
        self.assertTrue(True)

    def test_two(self):
        print "test two"
        self.assertTrue(False)

if __name__ == '__main__':
    dirpath = os.path.dirname(os.path.abspath(__file__))
    sys.stdout = open(dirpath+'/test_logs/demo_test.stdout.log', 'w')
    sys.stderr = open(dirpath+'/test_logs/demo_test.stderr.log', 'w')
    test_program = unittest.main(verbosity=0, exit=False) 
```

当我运行它时，内容`demo_test.stdout.log`仅为：

```
test one
test two 
```

在屏幕上，我仍然可以看到 unittest 的输出：

```
======================================================================
FAIL: test_two (__main__.DemoTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "demotest.py", line 12, in test_two
    self.assertTrue(False)
AssertionError: False is not true

----------------------------------------------------------------------
Ran 2 tests in 0.000s

FAILED (failures=1) 
```

我希望屏幕上没有输出并且要记录所有内容。（我将测试作为 cron 作业运行，因此到 stdout 或 stderr 的任何输出都会导致发送电子邮件，因此我希望能够准确指定何时发生这种情况，这意味着我需要能够在此控制 unittest看待。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T20:47:50.417

重定向标准错误，例如：

```
python my_unit_test_launcher.py 2> log.txt 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-28T10:28:52.177

要在您的测试代码中解决它，您还可以执行以下操作：

```
import sys
import unittest

class DemoTest(unittest.TestCase):
    def test_one(self):
        print "test one"
        self.assertTrue(True)

    def test_two(self):
        print "test two"
        self.assertTrue(False)

if __name__ == "__main__":
    demo_test = unittest.TestLoader().loadTestsFromTestCase(DemoTest)
    unittest.TextTestRunner(stream=sys.stdout).run(demo_test) 
```

# java - 在具有一定容错性的文本正文中定位 ASCII 艺术图像

> ID：14246120
> 
> 赞同：8
> 
> 时间：2013-01-09T20:44:15.177
> 
> 标签：java, algorithm, search, ascii-art

是否有任何算法可以找到以下 ASCII 艺术图像？

```
 +
    +
   +++
 +++++++
 ++   ++
++  +  ++
++ +++ ++
++  +  ++
 ++   ++
 +++++++
   +++ 
```

在以下正文中？

[complete_file_here](https://dl.dropbox.com/u/28167627/TestData.txt)

```
 + +    +              ++           +       +++    +     +
 +  ++     +   + ++++    + +       +         +          +  +   +++     +++ +
     +            + +   ++      ++  ++    + ++       +     +      +  +   +
+   ++      +  ++       +          + +       ++        ++  +           +
 ++++++ + +    +   ++  +  +   +   +  ++      +         +                     +
  + +   +      +               +      ++     +  ++            +   +    + +
+++   + ++   +  +            +  +++       + +       ++                     +
  +++++  +      +                            +  + +            +   +  +
 +   +   +              +    +      +            +  +   +      +    +     +
 ++    +              +     +       ++   +          +       +           ++ 
```

我必须用黄色突出显示对应于完整形状的 ASCII 艺术图像。见附图：

![在此处输入图像描述](../Images/2ac0899ac3416455bf67de132af21848.png)

我必须搜索包含粗略形状的文件，但不完全，`+`可能会丢失一些）。形状缺失的公差`+`应手动设置。

现在，我有两个二维数组数据数组：[100][100] 和 SlimeTorpedo 数组：[13][11]。

如@kjartan（3-4 项目符号）所述，如何进行检测的代码：

```
int match = 0;
for (int i = 0; i < 100; i++) {
    for (int j = 0; j < 100; j++) {
        //Compare DataArr[i][j] with SlimeTorpedoArr[i][j]
        //Look for "checked" position in the picture ("+"), 
        //which corresponds to a checked position in the 
        //slime torpedo array.
        //match++;
    }
} 
```

如何解决这个问题的一般指导是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:52:56.580

假设宽度和高度参数（就字符数而言）对于您的第一个形状是已知的。让他们成为`width`和`height`。

*   将您的输入编码为二维位数组（或 + 符号）。所以你有 `int[][] inputBits = new int[height][width];`并且你应该正确地填充它。（这是你的任务，伙计。）
*   然后对较大的形状应用一个简单的搜索（假设它也被编码到另一个二维数组中）。每次将枢轴区域向右移动一次（枢轴区域相当于第一个形状的区域）并检查枢轴区域（二维数组）是否所有元素都等于第一个形状。这是一个蛮力算法=）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T21:30:20.353

使用匹配分数尝试蛮力：

*   在你的“史莱姆鱼雷”周围定义一个“正方形”；这是一个 2D 阵列，其宽度和高度比您的鱼雷略宽和略高。
*   在该二维数组中，根据需要将单元格标记为选中或未选中，以创建所需的图像。
*   现在循环遍历完整图像中的每个字符（我们称之为“索引”位置），并将每个字符附近的位置与 2D 数组中相应字符的位置进行比较。
*   在图片中查找“已选中”（或未选中）的位置，该位置对应于 slime 鱼雷阵列中已选中（或未选中）的位置（例如，图片中当前索引位置上方的字符 X 和左侧的 Y，即匹配粘液鱼雷阵列中心点上方的状态 X 和左侧的 Y）。对于每个这样的“匹配”，在图片中的该索引位置添加一个“点”。

**现在的诀窍是**：为了更有效，只检查粘液鱼雷中的一些位置 - 例如，每 10 个位置甚至更少。粗略地说，这应该将运行时间减少 10 倍。

这意味着您必须为整个图片中的每个字符检查`(1/10)`* 。`the number of characters in the 2D array`

现在**跟踪**全图中得分最高的位置。得分最高的位置应该是最佳匹配。

如果你愿意，你可以多次运行这个，不同程度的细节，例如第一次只检查 1/20 的位置，然后是 1/2，下一次，但这次只关注例如最高的 20 （或 50？100？）第一轮的得分位置。

（或者，您可以对得分高于某个阈值 S 的所有位置进行更详细的扫描）。

希望你能让我们知道无论你决定如何，有趣的问题！:)

***针对以下评论进行更新：***

也许我的解释有点不清楚。简而言之/伪代码，您需要执行以下操作来查找每个单元格的分数：

```
foreach(DataArraRow dataRow in dataArray){
    foreach(IndexCell index in dataRow){        

        // initialy, no score for this cell in the data array:
        indexCell.score = 0;

        // Now iterate through all SlimeTorpedo cells, and compare the 
        // symbol in it to the corresponding symbol in te data array:
        foreach(SlimeArrayRow slimeRow in slimeTorpedoArray){
            foreach(SlimeTorpedoCell slimeCell in slimeRow){
                if(IsMatchingSymbol(slimeCell.xPosition, 
                                    slimeCell.yPosition, 
                                    slimeCell.symbol, 
                                    indexCell){
                    indexCell.score += 1;
                }else{
                    indexCell.score -= 1;
                }
            }              
        }

    }
}

Function IsMatchingSymbol(x, y, slimeSymbol, indexCell){
   // Find the cell in the data array corresponding to the 
   // "slimeCell" currently being checked:
   var cellToCheck = getCell(indexCell.xPosition + x, 
                             indexCell.yPosition + y);

   if(cellToCheck.symbol == slimeSymbol){
       return true;
   }else{
       return false;
   }

} 
```

这显然有点混乱，我不确定所有细节，但我希望它展示了一个应该可行的一般想法。当您完成迭代后，再次迭代所有单元格，并选择得分最高的单元格（或者在此过程中建立一个单独的高分列表 - 这可能会更快）。

您将不得不做一些更改，例如用`ForEach`常规`For(int i=0; i < someArrayLength; i = i + levelOfDetail){ ... }`或类似的东西替换循环，其中`levelOfDetail`是一个整数，您可以使用它来调整细节级别（即要检查 SlimeTorpedoArray 中的多少个单元格）。我相信你可以解决它... ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T15:54:46.187

对于那些感兴趣的人，我使用 Java 中的 XOR 映射解决了这个问题：

[https://bitbucket.org/bluegod1/blifoscope-java/](https://bitbucket.org/bluegod1/blifoscope-java/)

它还考虑到可能存在误报或重复，它可以选择指定良好匹配的最小阈值，添加自定义数据图像文件等......

# php - 检查会话，保持 PHP 连接处于活动状态

> ID：14246123
> 
> 赞同：1
> 
> 时间：2013-01-09T20:44:26.517
> 
> 标签：php, connection

我们有一个流媒体网站，它有一个基于 PHP 会话的登录系统。用户启动流后，如果另一个人正在使用同一帐户连接，我需要终止第一个会话并终止页面。我能想到的唯一方法是使用 Ajax，但我不确定这有多安全。有没有办法在 php 中输出页面，在页面提供给用户之后，然后脚本继续检查另一个用户是否使用相同的帐户登录并终止页面？尝试使用输出缓冲和睡眠，到目前为止没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:50:39.757

首先，您需要跟踪数据库或其他存储系统中的会话。这些数据应该对用户有参考。并定期清理。

如果您终止现有会话，则该会话中的用户不会被推出，直到下一个服务器请求。所以在后台，你想'ping'服务器，只需发出一个ajax请求，直到它失败。失败时，将用户重定向回登录页面。

现在这不是万无一失的。客户端可能会干扰、阻止或重定向 ping 请求。但是，如果他们要访问您系统中的另一个页面，他们将被迫再次登录。

# java - 你究竟是如何在java中存根方法或变量的？

> ID：14246125
> 
> 赞同：0
> 
> 时间：2013-01-09T20:44:32.953
> 
> 标签：java, android, unit-testing, junit, testng

例如，假设我有一个像这样的基本 POJO。

```
public class Stuff {

   private OtherStuff otherStuff;

   ...

   public void RunOtherStuff() {
       otherStuff.run();
   }

} 
```

您将如何测试 RunOtherStuff 调用 otherStuff.run？

我现在使用 TestNG 作为我的基础测试框架，并且对任何允许我进行测试的 Java 框架完全开放，类似于在 Rails 和 Ruby 中使用 rspec 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:47:34.453

你会创建一个 setter`otherStuff`并且在你打电话之前`RunOtherStuff()`你会打电话`setOtherStuff(myFake)`

```
public class Stuff {

   private OtherStuff otherStuff;

   public void setOtherStuff(OtherStuff otherStuff) {
       this.otherStuff = otherStuff;
   }

   ...

   public void RunOtherStuff() {
       otherStuff.run();
   }

} 
```

那么你的测试可以这样写：

```
private Stuff stuff;
private boolean runWasCalled;

public void setUp() {
    stuff = new Stuff();
    stuff.setOtherStuff(new OtherStuff() {
        public void run() {
            runWasCalled = true;
        }
    });
}

public void testThatOtherStuffRunMethodIsCalled() {
    stuff.RunOtherStuff();

    assertTrue(runWasCalled);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:56:12.170

编写一个`MockOtherStuff`基本上是 OtherStuff 的子类。覆盖`run()`方法并说喜欢`System.out.println('Run is called');`

`OtherStuff`现在，在课堂上有一个二传手`Stuff`并通过你的嘲笑者。

**编辑：**

要断言，您可能有一个布尔变量 runWasCalled（默认为 false）并将其设置为 true`MocOtherStuff.run()`

# php - 如何在我的独立 iOS Web 应用程序中保持登录会话处于活动状态？

> ID：14246134
> 
> 赞同：1
> 
> 时间：2013-01-09T20:45:07.693
> 
> 标签：php, javascript, ajax

我的网络应用程序需要登录，它指向一个页面，然后使用 ajax 调用进行填充。我为活动会话设置了 12 小时的超时时间……这在浏览器中效果很好。现在我已经将它配置为“独立”，但是，它要求用户每次离开应用程序时都要登录......这显然是一个痛苦。

我以为我用 Cache Manifest 找到了答案，但似乎无法让它工作。还有另一种方法，还是我缺少的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:53:12.273

我没有这方面的专业知识，但是如何重用会话 ID，将它们保存到数据库中，如果用户回来，会话将重新启动并从数据库中提取数据？

您应该在会话中使用 https 并考虑在一段时间后更新会话 ID 以保护用户，但这应该有效。

# c# - 控件内带有按钮的 CausesValidation 层次结构

> ID：14246135
> 
> 赞同：0
> 
> 时间：2013-01-09T20:45:13.690
> 
> 标签：c#, winforms, validation

我会看看我是否可以很好地解释这一点，以便有人回答或让我走上正确的道路。

开始：

我已经建立了几个自定义控件；表单、文本框、复选框等。其中一个控件是导航栏，其中包含以下按钮：顶部、下一步、查找、添加、删除等。

在我的表单上是导航栏和其他几个自定义文本框、复选框、组合框等。这些控件中的每一个在`OnValidating`方法中都有自定义代码。

似乎`CausesValidation`导航按钮容器的属性优先`CausesValidation`于栏中按钮的属性。

所以我真正想做的是关闭`CausesValidation`容器并让表单上的控件尊重`CausesValidation`每个按钮的属性值。

当我构建导航栏时，它的基类是`UserControl`. 我已经尝试了大多数容器控件，并且我得到了类似的行为。

所以我不确定是否应该`OnValidating`为每个控件选择不同的方法（除了），或者是否有其他方法可以在容器时进行验证`CasuesValidation = False`，但是`CausesValidation`在`button = true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:16:39.147

我解决了这个问题。

事实证明，无论它是否有焦点，它都会开火。我不知道为什么，也找不到任何理由。我删除了方法中的代码并将其放入并解决了我的问题。*`Checkbox`* `OnValidating``OnValidating``OnClick``CheckChanged`

然后我能够将背面的`CausesValidation`属性更改为.*`Container`*`Navigation Bar`*`false`*

# c# - 程序挂在并行性上，Parallel.ForEach

> ID：14246138
> 
> 赞同：0
> 
> 时间：2013-01-09T20:45:27.063
> 
> 标签：c#, winforms, parallel-processing, task-parallel-library, parallel.foreach

我正在尝试制作一个程序，该程序使用 parallel.foreach 在特定目录及其子目录的文件中查找特定字符串，它在大约 90% 的迭代中工作正常，但之后程序挂起，并且不做任何事物。

```
private void searchParallel()
{
    directories.Clear();
    lbResults.Items.Clear();
    if (cbDirectory.Text.Length != 0)
    {
        getAllDirectories(cbDirectory.Text);

        pbSearchProgress.Maximum = directories.Count;
        pbSearchProgress.Minimum = 0;
        pbSearchProgress.Value = 0;
        //foreach (String dir in directories)
        ParallelOptions options = new ParallelOptions();
        options.MaxDegreeOfParallelism = 10;
        Parallel.ForEach(directories,options, (dir) =>
        {
            try
            {
                //MessageBox.Show(dir.ToString());
                String[] files = Directory.GetFiles(dir);

                foreach (String file in files)
                {
                    //MessageBox.Show(file.ToString());

                    if (checkFilePermission(file))
                    {
                        StreamReader reader = new StreamReader(file);
                        //MessageBox.Show(file);
                        int lineCount = 0;
                        while (reader.Peek() != -1)
                        {
                            Application.DoEvents();
                            String line = reader.ReadLine();
                            lineCount++;
                            if (line.ToLower().Contains(txtSearch.Text.ToLower()))
                            {
                                updateList(file, lineCount);
                            }
                            if (isSearching == false)
                            {

                            }
                        }
                    }
                    //if (isSearching == false)
                    //{
                    //    break;
                    //}
                }
                pbMakeProgress();
                //if (isSearching == false)
                //{
                //    loopState.Stop();
                //}
                //MessageBox.Show("Search Completed.");
            }
            catch (Exception e)
            {
                MessageBox.Show(e.ToString());
            }

        });
    }
}
private void updateList(String file, int lineCount)
{
    if (lbResults.InvokeRequired)
    {
        listDelegate lstDelegate = new listDelegate(updateList);
        lbResults.Invoke(lstDelegate, new object[] { file, lineCount });

    }
    else
    {
        lbResults.Items.Add("Found in " + file + " at line: " + lineCount);
    }

}

private void pbMakeProgress()
{
    if (pbSearchProgress.InvokeRequired)
    {
        pbSearchProgress.Invoke(new MethodInvoker(pbMakeProgress));
    }
    else
    {
        pbSearchProgress.Value++;
    }
} 
```

pbMakeProgress 更新进度条的值，updateList 更新列表框，getAllDirectories 获取子目录，directories 是包含要遍历的所有文件夹名称的列表。

# osgi - OSGI Pax Exam 简单测试在 maven 上运行，但不在 IDE 上

> ID：14246139
> 
> 赞同：0
> 
> 时间：2013-01-09T20:45:27.157
> 
> 标签：osgi, integration-testing, pax-exam

我正在做一个非常简单的 Pax Exam 测试。

使用 maven "mvn verify" 运行它时，它是成功的。使用我的 IDE 运行它时，出现以下错误。

任何人都知道我是缺少一个罐子还是这是一个错误？

谢谢，

```
java.lang.Exception: No tests found matching Method checkBundles(test.TestPaxExam) from org.junit.internal.requests.ClassRequest@1a19012
at org.junit.internal.requests.FilterRequest.getRunner(FilterRequest.java:37)
at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:43)
at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

这是我的测试课：

```
package test;

import static org.junit.Assert.*;
import static org.ops4j.pax.exam.CoreOptions.*;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.ops4j.pax.exam.Option;
import org.ops4j.pax.exam.junit.Configuration;
import org.ops4j.pax.exam.junit.JUnit4TestRunner;
import org.osgi.framework.BundleContext;

import javax.inject.Inject;

@RunWith(JUnit4TestRunner.class)
public class TestPaxExam {

@Inject
public BundleContext bc;

@Configuration
public Option[] config() {

    return options(
            junitBundles()
    );
}

@Test
public void checkBundles() {
    assertNotNull(bc);
}
} 
```

这是我的 pom.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>TestPaxExam</groupId>
<artifactId>TestPaxExam</artifactId>
<version>1.0</version>

<properties>
    <exam.version>2.5.0</exam.version>
    <url.version>1.4.0</url.version>
</properties>

<dependencies>

    <dependency>
        <groupId>org.ops4j.pax.exam</groupId>
        <artifactId>pax-exam-container-native</artifactId>
        <version>${exam.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.ops4j.pax.exam</groupId>
        <artifactId>pax-exam-junit4</artifactId>
        <version>${exam.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.ops4j.pax.exam</groupId>
        <artifactId>pax-exam-link-mvn</artifactId>
        <version>${exam.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.ops4j.pax.url</groupId>
        <artifactId>pax-url-aether</artifactId>
        <version>${url.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.apache.felix.framework</artifactId>
        <version>3.2.2</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-core</artifactId>
        <version>0.9.20</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>0.9.20</version>
        <scope>test</scope>
    </dependency>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build>

</dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:53:09.970

我在您的测试或 POM 中没有看到任何可疑之处。`checkBundles(test.TestPaxExam)`看起来像一个 IntelliJ 问题 -您的测试类中不存在带有签名的方法，因此 JUnit 抱怨是正确的。

# machine-learning - 电影类型聚类

> ID：14246143
> 
> 赞同：0
> 
> 时间：2013-01-09T20:45:45.093
> 
> 标签：machine-learning, cluster-analysis, k-means, movie, hierarchical-clustering

我是数据挖掘领域的初学者，想对我的电影数据集进行聚类以查找流派组。我的数据集中有 86 部电影的 26 种不同类型。我想使用聚类将我的电影分成几个类型而不是 26 个。因此，例如在运行一些聚类算法之后，我将剩下 4 个聚类或任何最适合我的数据集的小数量。我已经将我的数据集定义如下 M1 { G1,G2,.....G26} M2{G1,G2,.....G26} 其中每个流派 G1,....,G26 都可以保存值0 或 1，0 表示不存在，1 表示存在。现在我的下一步是在上面运行 k-means 集群，我想使用一个好的距离函数，例如 Pearson Correlation Coefficient。

我正在使用 MATLAB 进行实验。我尝试使用 k=3,4,5,6 做 k-Means 我还运行了层次聚类。

我不确定如何确定哪些聚类结果更好。如何检查？由于我是初学者，我不知道如何在 MATLAB 中为二进制特征绘制集群。此外，我不知道如何使用皮尔逊相关系数作为 k-Means 中的距离度量。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:47:15.253

如果您没有基本事实，那么就没有特定的方法来衡量您的聚类有多成功。

因此，假设您没有基本事实，您可以使用集群内相似性；这是您测量每个集群内节点的相似性的时候。我会看一下平均移位聚类，因为您不需要指定聚类的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:45:19.563

评估是聚类中最难的部分。

如果您知道要查找的内容，则无需运行聚类分析。

因此，集群不存在客观的“真相”。您对集群的看法在很大程度上取决于您的个人需求，除非您将它们编码为自定义算法，否则集群算法可能会计算完全不同的东西。

例如，k-means 最小化方差。方差是否与您对集群的想法一致！

对于您的用例，最好的健全性检查是每个现有的流派分配应该主要在一个集群内。如果它到处都是，则聚类不会按照您的流派概念进行聚类。

# wpf - ClickOnce WPF 应用程序未在 Windows 7 64 位上运行

> ID：14246144
> 
> 赞同：1
> 
> 时间：2013-01-09T20:45:46.670
> 
> 标签：wpf, windows-7, clickonce, .net-4.5

我有一个[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)（C#、WPF、.NET 4.5）应用程序，它在 32 位 Windows 7 下运行并正常工作。它被编译为*Any CPU*。

在 Windows 7 64 位下，我看到 ClickOnce 开始屏幕，然后什么也没有发生（没有错误，没有什么明显的）。

为了调试，我已将 EXE 文件和所有相关的 DLL 文件复制到一个目录中。我从那里开始：同样的情况，它在 Windows 7 32 位下运行，但在 Windows 7 64 位下没有任何反应。我已经用“干净的”Windows 7 32 位进行了交叉检查，那里也很好。

.NET 4.5 安装在我测试过的任何机器上。

如何克服/调试应用程序？我需要做什么才能让它在 64 位下运行？

APPLICATIONS 下的事件日志显示：

```
Faulting application name: MyApp.exe, version: 0.8.1.13, time stamp: 0x50e807c5
Faulting module name: KERNELBASE.dll, version: 6.1.7601.18015, time stamp: 0x50b8479b
Exception code: 0xe0434352
Fault offset: 0x0000000000009e5d
Faulting process id: 0x1138
Faulting application start time: 0x01cdeeab375b90da
Faulting application path: B:\Debug\MyApp.exe
Faulting module path: C:\Windows\system32\KERNELBASE.dll
Report Id: 761e9cba-5a9e-11e2-a573-406186f45b4a 
```

根据[这里](http://davidstechtips.com/2010/06/force-net-application-to-run-in-32-bit-process-on-64-bit-windows/)，我可以强制构建为[Win32](http://en.wikipedia.org/wiki/Windows_API)应用程序，但这是正确的方法吗？该应用程序非常简单，所以我怀疑这应该是必需的。

跟进，关于远程调试：*[Visual Studio 2012：我可以在远程调试器中启动 .NET 4.5 应用程序（而不仅仅是附加）吗？](https://stackoverflow.com/questions/14247537)*

我做的第一件事是将两个外部（Syncfusion）DLL 文件更新到最新版本。它仍然在崩溃，但现在我在事件查看器中获得了一个额外的 .NET 事件。我认为它可能与“Syncfusion”相关，但整个跟踪没有显示任何 Syncfusion 库。

```
Application: MyApp.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.TypeInitializationException
Stack:
   at System.Windows.Automation.Peers.AutomationPeer.ListenerExists(System.Windows.Automation.Peers.AutomationEvents)
   at System.Windows.Controls.TabControl.OnSelectionChanged(System.Windows.Controls.SelectionChangedEventArgs)
   at System.Windows.Controls.Primitives.Selector+SelectionChanger.End()
   at System.Windows.Controls.Primitives.Selector+SelectionChanger.SelectJustThisItem(ItemInfo, Boolean)
   at System.Windows.Controls.Primitives.Selector.OnSelectedIndexChanged 
```

接下来，在 Visual Studio 2012 构建中，我检查了*Prefer 32-bit*，**这个编译的 exe**在 Windows 7 64 位上运行。所以它在一定程度上是成功的。

![首选 32 位](../Images/f6f073657571c050c14472cd649d148f.png)

# java - Java java.net.ConnectException：连接被拒绝

> ID：14246151
> 
> 赞同：0
> 
> 时间：2013-01-09T20:46:17.470
> 
> 标签：java, ioexception

将我的应用程序复制到服务器时遇到问题。该程序在我的测试机器（Mac OS X）上运行良好，但是当我将它部署在我的服务器（Windows Server 2008）上时，我收到以下错误：

> java.net.ConnectException：连接被拒绝

我确定我已经为出站连接正确打开了端口。就80端口吧？

如果有帮助，这是一个代码片段

```
try {
    doc = Jsoup.connect("http://google.com").get();
} catch (IOException e) {
    e.printStackTrace();
    return;
} 
```

Java 不是我的主要语言，所以如果您还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:56:34.903

由于以下两个原因之一，几乎总是出现此问题：
1）服务器未在正确的端口上侦听
2）您有阻止流量的防火墙

尝试暂时停止防火墙，看看发生了什么。

# android - 自定义 DialogPreference 不会触发 PreferenceActivity 中的 OnPreferenceChanged

> ID：14246153
> 
> 赞同：1
> 
> 时间：2013-01-09T20:46:18.887
> 
> 标签：android, android-preferences

当对话框关闭时，从 PreferenceActivity 调用的自定义 DialogPreference 不会调用 OnPreferenceChange()。

我认为 persistXXXX() 是触发器：

```
@Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);
    if(positiveResult) {
        persistString(s);
    }
} 
```

但 onPreferenceChanged() 不会被调用。

所有其他标准首选项类型都有效（例如 EditTextPreference、ListPreference 等）。

所以问题是：是什么触发了这种偏好类型的 OnPreferenceChange() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:23:38.047

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);
        SharedPreferences sp = PreferenceManager
                .getDefaultSharedPreferences(this);
        sp.registerOnSharedPreferenceChangeListener(this);
    } 
```

我认为，您缺少 registerOnSharedPreferenceChangeListener

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-10T07:45:28.953

接受的答案对我不起作用。也可能是由于我的设置，因为我使用 a`PreferenceFragmentCompat`而不是`PreferenceActivity`等。挖掘`Preference`导致的源代码，得到一个非常简单的解决方案：

```
@Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);
    if(positiveResult) {
        persistString(s);
        callChangeListener(s);  // the solution!
    }
} 
```

或者在我的情况下（按钮点击，Kotlin）：

```
val button = holder?.findViewById(R.id.my_button)
button?.setOnClickListener {
    persistString(s)
    callChangeListener(s)  // the solution!
} 
```

# spring-mvc - 在 spring protlet 应用程序中在哪里定义用户角色？

> ID：14246161
> 
> 赞同：0
> 
> 时间：2013-01-09T20:46:53.333
> 
> 标签：spring-mvc, spring-security, websphere-portal, user-roles

在我的 Spring portlet 控制器中，我有一个这样注释的方法：

```
@PreAuthorize("hasRole('ROLE_BankUser') 
```

现在，当用户登录到门户并尝试访问 portlet 时，该方法从哪里知道用户是否具有“ROLE_BankUser”角色？是否将在用户拥有所有其他凭据（如登录名和密码）的 LDAP 中定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:26:06.963

检查您的 SpringSecurity 配置。您使用哪个**AuthenticationProvider**实现？在 LDAP 的情况下，它可能是**LdapAuthenticationProvider**。如果是真的，那么您可以检查 LdapAuthenticationProvider.authenticate(Authentication authentication) 方法是如何实现的。它将通过一些 LdapAuthoritiesPopulator 实现从 LDAP 加载角色（取决于您的配置）

# java - 提交期间的Spring Form绑定问题

> ID：14246168
> 
> 赞同：0
> 
> 时间：2013-01-09T20:47:18.683
> 
> 标签：java, spring, spring-mvc

`Request`Spring Form 在调用中填充时无法成功提交 [给出绑定问题] `loadForm`，但在`setupFormObject`使用`@ModelAttribute`注释标记填充方法时工作正常。我可以在 github 中提供一个简单的示例来测试是否需要:)

我花了几天时间搜索甚至使用 AutoPopulatingList 但无济于事

下面的例子

```
@ModelAttribute("showForm")
public ShowForm setupFormObject() {
    //Instantiate showForm with data
    return showForm;
}

@RequestMapping(method = RequestMethod.GET)
public ModelAndView loadForm(@RequestParam("id") String id, HttpSession session) {    
    ModelAndView modelAndView = new ModelAndView(nextPage);
    //Instantiate showForm with data
    //modelAndView.addObject("showForm", showForm);
    return modelAndView;
}

@RequestMapping(method = RequestMethod.POST)
public String post(@ModelAttribute("showForm") ShowForm showForm, BindingResult result, final RedirectAttributes redirectAttrs) {
     //I see changed data here in showForm when populated using @setupFormObject
     //See an exception in JSP with binding error if populated in loadForm
     return "";
 } 
```

非常感谢您的帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:52:21.147

添加到传递给方法`@ModelAttribute`的名为`showForm`type的参数。`ShowForm``loadForm`

```
@RequestMapping(method = RequestMethod.GET)
public ModelAndView loadForm(@RequestParam("id") String id, 
               @ModelAttribute("showForm") ShowForm showForm, HttpSession session) {    
    ModelAndView modelAndView = new ModelAndView(nextPage);
    //Instantiate showForm with data
    //modelAndView.addObject("showForm", showForm);
    return modelAndView;
} 
```

还要确保您实际上正在执行 GET 请求，我怀疑这可能是一个帖子，这将需要：

```
@RequestMapping(method = RequestMethod.POST)
public ModelAndView loadForm(@RequestParam("id") String id, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:21:56.327

问题出在构造函数上。它是一个私有的或缺少的公共构造函数。通过添加公共构造函数，Spring 能够重新创建对象

```
public UserEntity(){
   //
} 
```

[在此处](https://stackoverflow.com/questions/14234527/spring-binding-exception-when-a-form-is-submitted#comment19782508_14234527)链接到解决方案

# emacs - Emacs，将点移动到第一个可见字符

> ID：14246170
> 
> 赞同：2
> 
> 时间：2013-01-09T20:47:27.390
> 
> 标签：emacs, move

有没有办法将点移动到缓冲区中的第一个**当前可见字符？**我想找到这一点，因为对于一个函数，从“第一个可见字符”而不是“缓冲区的开头”查看确实会更快。

编辑：实际上，获取位置的值也可以，而不是将点实际移动到那里。PageUp 和 PageDown 似乎对大段文本有一些奇怪的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:07:51.597

如果您想要当前窗口滚动到的点：

```
(window-start) 
```

如果要跳过被文本属性隐藏的文本，请使用`invisible-p`跳过它们：

```
(let ((pos (window-start)))
  (while (and (invisible-p pos) (< pos (point-max)))
    (setq pos (1+ pos)))
  pos) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:11:16.170

nschum 给出了通过以下方式获得位置值的答案：`(window-start)`

要将点移动到该值，请使用：

根据[nschum](https://stackoverflow.com/a/14247380/1575066)的回答：

```
(defun goto-window-start ()
 (interactive)
 (let ((pos (window-start)))
  (while (and (invisible-p pos) (< pos (point-max) )
   (setq pos (1+ pos)))
 (goto-char pos))
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:02:50.337

更新：处理空缓冲区。

```
(defun goto-first-visible ()
  (interactive)
  (goto-char (point-min))
  (save-match-data 
    (let ((pos (search-forward-regexp (rx graphic) nil t))) 
      (when pos 
        (goto-char (- pos 1)))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:11:23.790

这是一个高效的版本，可能更适合大块的不可见文本。这里的技巧是利用不可见文本由文本属性控制的事实，并且 emacs 具有用于确定文本属性更改位置的内置工具：

```
 (defun goto-first-visible ()
      (interactive)
      (goto-char (point-min))
      (while (and (not (eobp)) (invisible-p (point)))
        (goto-char (next-char-property-change (point))))) 
```

# c++ - 当其父窗口被破坏时，是否有必要显式恢复控件字体？

> ID：14246173
> 
> 赞同：1
> 
> 时间：2013-01-09T20:47:48.323
> 
> 标签：c++, winapi, mfc

我在我的 Windows 创建方法中使用以下代码

```
HANDLE hFont = ::GetStockObject(DEFAULT_GUI_FONT);
m_InfoTab.SendMessage(WM_SETFONT, (WPARAM)hFont); 
```

m_InfoTab 是标准的 Windows/MFC 选项卡控件。父窗口销毁时是否需要保存原字体并恢复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:00:49.997

不需要恢复原始字体。然而，您有责任自己管理字体对象，即在不再使用时将其删除。的文档在[`WM_SETFONT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632642.aspx "WM_SETFONT 消息")这里相当明确：

> 当不再需要字体时，应用程序应调用 DeleteObject 函数将其删除；例如，在它破坏了控件之后。

在这种特殊情况下，您不会遇到任何问题，因为您通过调用[`GetStockObject()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144925.aspx "GetStockObject 函数"). 这些对象由系统控制，不需要对它们调用 DeleteObject（尽管它也无害）。

使用任务管理器可以轻松验证您的应用程序是否泄漏 GDI 句柄。转到*Processes*选项卡，选择*View* -> *Select Columns...*并勾选*GDI Objects*。监控到位后，更改您的代码并使用[`SetTimer()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906.aspx "设置定时器功能")with `uElapsed = 1000`（每秒一次）安装计时器。使用以下代码添加`OnTimer`处理程序：

```
void CMyDialog::OnTimer(UINT_PTR nIDEvent)
{
    // Retrieve the system font
    HFONT hFontSystem = (HFONT)GetStockObject( DEFAULT_GUI_FONT );
    LOGFONT lfSystem = { 0 };
    GetObject( hFontSystem, sizeof( lfSystem ), &lfSystem );
    // And construct and identical font object
    HFONT hFontNew = CreateFontIndirect( &lfSystem );
    // This will leak the font object
    m_InfoTab.SendMessage( WM_SETFONT, (WPARAM)hFontNew );

    __super::OnTimer(nIDEvent);
} 
```

现在打开任务管理器，启动应用程序并观察 GDI 对象计数每秒增加 1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T21:20:43.670

不，有问题的窗口 (m_infoTab) 负责管理其字体，并在必要时释放旧字体。

# vba - 检查是否可以使用程序无错误地打开文件

> ID：14246180
> 
> 赞同：0
> 
> 时间：2013-01-09T20:48:03.223
> 
> 标签：vba, ms-word

我正在尝试制作一个程序，在给它文件扩展名后用word打开文件。但显然不是所有的文件都可以用word打开。所以我想知道如果 word 无法打开文件，是否有办法获得某种异常。任何想法都会有所帮助。但我正在使用VB。

```
try {
    $a = ./test.docx #pdf file changed to .docx
}
catch {
Write-Error "Error!" Exit
} Write-Host "No Error!" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:31:33.250

根据您上面的评论，我建议您查找 ShellExecute WinAPI 调用。

如果您将文件（完整路径、名称、扩展名）传递给 ShellExecute，Windows 会确定注册了哪个应用程序来打开文件并为您调用它。换句话说，如果您在 c:\some_dir\myfile.docx 上调用 ShellExecute，它将在 Word 中打开该文件或返回一个指示存在错误的值。

*在我的 PPT FAQ 网站上有一个示例，以及指向 Randy Birch一流*网站上更多信息的链接：

[http://www.pptfaq.com/FAQ00479_ShellExecute_Example.htm](http://www.pptfaq.com/FAQ00479_ShellExecute_Example.htm)

# android - 这个片段会导致无限循环吗？

> ID：14246183
> 
> 赞同：0
> 
> 时间：2013-01-09T20:48:19.000
> 
> 标签：android

我不确定。我创建了仅在 < 2.3.x 的设备上崩溃的代码。这段代码会导致循环吗？

```
SharedPreferences prefs3 = PreferenceManager.getDefaultSharedPreferences(this);
      listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
          public void onSharedPreferenceChanged(SharedPreferences prefs, String listpref) {       
                preferenze();

              }   };

private void preferenze() {

        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        CheckboxPreference = prefs.getBoolean("checkboxPref", true);
        ListPreference = prefs.getString("listpref", "");
        numeronotifiche = prefs.getString("notify", "");
        Sound = prefs.getString("sound", "");
        barranotifiche = prefs.getBoolean("keep", false); 
```

# java - 使用 Google maps api v2 执行时应用程序崩溃

> ID：14246184
> 
> 赞同：4
> 
> 时间：2013-01-09T20:48:17.720
> 
> 标签：java, android, android-emulator, google-maps-android-api-2

我正在尝试使用 Google maps api v2 加载地图，以便我可以开始处理更复杂的应用程序。我的问题是我遵循了以下所有说明： [https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/) 为使用 Google play lib 的 google map api v2 设置新设置。一切都设置得很好，但是当我运行应用程序时它崩溃了（myapp 停止工作）选择生成签名的 apk。我在 Google 控制台中创建了一个名为 MapTest 的新项目来获取 api 密钥并将其放置在指定的清单中。现在我知道模拟器通常缺少一些工作人员，例如 openGL ES，所以我在手机（Galaxy s2）上安装了应用程序，但应用程序仍然崩溃。ps 添加了 google play lib 模拟器是 google api 15，所有内容都更新到最新版本。非常感谢任何帮助或输入。

贝娄我包括我的 xml 文件，所以你可以看看是否有任何问题。

主xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.MapFragment"/>
</LinearLayout> 
```

AndroidManifest xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.MapTest"
      android:versionCode="1"
      android:versionName="1.0">
<uses-sdk android:targetSdkVersion="15" android:minSdkVersion="8"/>
<application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
    <uses-library android:name="com.google.android.maps"/>
    <activity android:name="MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my api key goes here"/>

</application>
<permission
        android:name="com.example.MapTest.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
<uses-permission android:name="com.example.MapTest.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission             android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
</manifest> 
```

MyActivity 类并没有真正改变，以防万一

```
package com.example.MapTest;

import android.app.Activity;
import android.os.Bundle;
import com.google.android.gms.maps.MapFragment;
public class MyActivity extends Activity {
   /**
    * Called when the activity is first created.
    */
   @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
    }
} 
```

模拟器的日志

```
01-09 22:16:54.269: DEBUG/AndroidRuntime(1779): >>>>>> AndroidRuntime START     com.android.internal.os.RuntimeInit <<<<<<
01-09 22:16:54.269: DEBUG/AndroidRuntime(1779): CheckJNI is ON
01-09 22:16:55.766: DEBUG/AndroidRuntime(1779): Calling main entry   com.android.commands.pm.Pm
01-09 22:16:56.059: DEBUG/dalvikvm(1031): GC_EXPLICIT freed 416K, 15% free 11721K/13703K, paused 9ms+19ms
01-09 22:16:56.099: WARN/ActivityManager(1031): No content provider found for permission revoke: file:///data/local/tmp/com.example.MapTest
01-09 22:16:56.139: WARN/ActivityManager(1031): No content provider found for permission revoke: file:///data/local/tmp/com.example.MapTest
01-09 22:16:56.379: INFO/PackageManager(1031): Removing non-system package:com.example.MapTest
01-09 22:16:56.379: INFO/ActivityManager(1031): Force stopping package com.example.MapTest uid=10044
01-09 22:16:56.529: INFO/PackageManager(1031): Package com.example.MapTest codePath changed from /data/app/com.example.MapTest-2.apk to /data/app/com.example.MapTest-1.apk; Retaining data and using new
01-09 22:16:56.529: INFO/PackageManager(1031): Running dexopt on: com.example.MapTest
01-09 22:16:57.781: DEBUG/dalvikvm(1790): DexOpt: load 230ms, verify+opt 493ms
01-09 22:16:57.809: WARN/PackageManager(1031): Code path for pkg : com.example.MapTest changing from /data/app/com.example.MapTest-2.apk to /data/app/com.example.MapTest-1.apk
01-09 22:16:57.809: WARN/PackageManager(1031): Resource path for pkg : com.example.MapTest changing from /data/app/com.example.MapTest-2.apk to /data/app/com.example.MapTest-1.apk
01-09 22:16:57.829: INFO/ActivityManager(1031): Force stopping package com.example.MapTest uid=10044
01-09 22:16:57.939: DEBUG/PackageManager(1031): New package installed in /data/app/com.example.MapTest-1.apk
01-09 22:16:57.949: WARN/PackageManager(1031): Unknown permission android.permission.ADD_SYSTEM_SERVICE in package com.android.phone
01-09 22:16:57.949: WARN/PackageManager(1031): Unknown permission com.android.smspush.WAPPUSH_MANAGER_BIND in package com.android.phone
01-09 22:16:57.959: WARN/PackageManager(1031): Unknown permission com.android.vending.billing.BILLING_ACCOUNT_SERVICE in package com.google.android.gsf.login
01-09 22:16:57.959: WARN/PackageManager(1031): Unknown permission com.android.vending.billing.ADD_CREDIT_CARD in package com.google.android.gsf.login
01-09 22:16:57.959: WARN/PackageManager(1031): Unknown permission com.android.vending.billing.IBillingAccountService.BIND2 in package com.google.android.gsf.login
01-09 22:16:57.959: WARN/PackageManager(1031): Not granting permission   android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS to package com.android.browser   (protectionLevel=2 flags=0x9be45)
01-09 22:16:57.959: WARN/PackageManager(1031): Not granting permission android.permission.BIND_APPWIDGET to package com.android.widgetpreview (protectionLevel=3 flags=0x28be44)
01-09 22:16:57.989: WARN/PackageManager(1031): Unknown permission com.android.providers.im.permission.READ_ONLY in package com.google.android.apps.maps
01-09 22:16:57.989: WARN/PackageManager(1031): Not granting permission android.permission.DEVICE_POWER to package com.android.deskclock (protectionLevel=2 flags=0x8be45)
01-09 22:16:58.299: DEBUG/dalvikvm(1031): GC_CONCURRENT freed 544K, 15% free   11758K/13703K, paused 9ms+12ms
01-09 22:16:58.489: INFO/ActivityManager(1031): Force stopping package com.example.MapTest uid=10044
01-09 22:16:58.639: DEBUG/dalvikvm(1126): GC_EXPLICIT freed 250K, 7% free 11414K/12231K, paused 5ms+7ms
01-09 22:16:58.869: DEBUG/dalvikvm(1166): GC_EXPLICIT freed 172K, 4% free 9398K/9735K, paused 10ms+9ms
01-09 22:16:59.159: DEBUG/dalvikvm(1031): GC_EXPLICIT freed 191K, 15% free 11704K/13703K, paused 7ms+14ms
01-09 22:16:59.259: DEBUG/PackageManager(1031): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
01-09 22:16:59.409: DEBUG/PackageManager(1031): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
01-09 22:16:59.431: DEBUG/BackupManagerService(1031): Received broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:com.example.MapTest flg=0x10000010 (has extras) }
01-09 22:16:59.459: DEBUG/PackageManager(1031): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
01-09 22:16:59.479: DEBUG/PackageManager(1031): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
01-09 22:16:59.599: DEBUG/BackupManagerService(1031): Received broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.example.MapTest flg=0x10000010 (has extras) }
01-09 22:16:59.629: VERBOSE/BackupManagerService(1031): updatePackageParticipantsLocked: #1
01-09 22:17:00.642: WARN/RecognitionManagerService(1031): no available voice recognition services found
01-09 22:17:00.889: DEBUG/BackupManagerService(1031): Received broadcast Intent { act=android.intent.action.PACKAGE_REPLACED dat=package:com.example.MapTest flg=0x10000010 (has extras) }
01-09 22:17:00.889: VERBOSE/BackupManagerService(1031): updatePackageParticipantsLocked: #1
01-09 22:17:01.519: DEBUG/dalvikvm(1031): GC_EXPLICIT freed 528K, 14% free 11847K/13703K, paused 7ms+17ms
01-09 22:17:02.069: DEBUG/AndroidRuntime(1779): Shutting down VM
01-09 22:17:02.089: INFO/AndroidRuntime(1779): NOTE: attach of thread 'Binder Thread #3' failed
01-09 22:17:02.089: DEBUG/dalvikvm(1779): GC_CONCURRENT freed 101K, 78% free 456K/2048K, paused 2ms+4ms
01-09 22:17:02.099: DEBUG/jdwp(1779): Got wake-up signal, bailing out of select
01-09 22:17:02.099: DEBUG/dalvikvm(1779): Debugger has detached; object registry had 1 entries
01-09 22:17:02.789: DEBUG/AndroidRuntime(1795): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
01-09 22:17:02.789: DEBUG/AndroidRuntime(1795): CheckJNI is ON
01-09 22:17:03.949: DEBUG/AndroidRuntime(1795): Calling main entry com.android.commands.am.Am
01-09 22:17:03.989: INFO/ActivityManager(1031): START {flg=0x10000000 cmp=com.example.MapTest/.MyActivity} from pid 1795
01-09 22:17:04.029: WARN/WindowManager(1031): Failure taking screenshot for (180x300) to layer 21005
01-09 22:17:04.111: DEBUG/AndroidRuntime(1795): Shutting down VM
01-09 22:17:04.139: DEBUG/dalvikvm(1806): Not late-enabling CheckJNI (already on)
01-09 22:17:04.139: INFO/AndroidRuntime(1795): NOTE: attach of thread 'Binder Thread #3' failed
01-09 22:17:04.159: DEBUG/dalvikvm(1795): GC_CONCURRENT freed 101K, 77% free 486K/2048K, paused 1ms+5ms
01-09 22:17:04.159: DEBUG/jdwp(1795): Got wake-up signal, bailing out of select
01-09 22:17:04.159: DEBUG/dalvikvm(1795): Debugger has detached; object registry had 1 entries
01-09 22:17:04.209: INFO/ActivityManager(1031): Start proc com.example.MapTest for activity com.example.MapTest/.MyActivity: pid=1806 uid=10044 gids={3003, 1015}
01-09 22:17:04.649: WARN/NetworkManagementSocketTagger(1031): setKernelCountSet(10044, 1) failed with errno -2
01-09 22:17:05.269: INFO/Process(1031): Sending signal. PID: 1806 SIG: 3
01-09 22:17:05.309: INFO/dalvikvm(1806): threadid=3: reacting to signal 3
01-09 22:17:05.429: INFO/dalvikvm(1806): Wrote stack traces to '/data/anr/traces.txt'
01-09 22:17:05.599: WARN/dalvikvm(1806): VFY: unable to resolve static field 40 (MapAttrs) in Lcom/google/android/gms/R$styleable;
01-09 22:17:05.599: DEBUG/dalvikvm(1806): VFY: replacing opcode 0x62 at 0x000e
01-09 22:17:05.609: DEBUG/AndroidRuntime(1806): Shutting down VM
01-09 22:17:05.609: WARN/dalvikvm(1806): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
01-09 22:17:05.629: ERROR/AndroidRuntime(1806): FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
    at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
    at android.app.Activity.onCreateView(Activity.java:4242)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
    at android.app.Activity.setContentView(Activity.java:1835)
    at com.example.MapTest.MyActivity.onCreate(MyActivity.java:13)
    at android.app.Activity.performCreate(Activity.java:4465)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
    01-09 22:17:05.649: WARN/ActivityManager(1031): Force finishing activity     com.example.MapTest/.MyActivity
    01-09 22:17:05.659: WARN/WindowManager(1031): Failure taking screenshot for (180x300) to layer 21010
    01-09 22:17:05.680: INFO/Process(1031): Sending signal. PID: 1806 SIG: 3
    01-09 22:17:05.680: INFO/dalvikvm(1806): threadid=3: reacting to signal 3
    01-09 22:17:05.699: INFO/dalvikvm(1806): Wrote stack traces to '/data/anr/traces.txt'
    01-09 22:17:06.169: WARN/ActivityManager(1031): Activity pause timeout for     ActivityRecord{4146dc60 com.example.MapTest/.MyActivity}
    01-09 22:17:06.209: INFO/Process(1031): Sending signal. PID: 1806 SIG: 3
    01-09 22:17:06.209: INFO/dalvikvm(1806): threadid=3: reacting to signal 3
    01-09 22:17:06.229: INFO/dalvikvm(1806): Wrote stack traces to '/data/anr/traces.txt'
    01-09 22:17:06.589: WARN/NetworkManagementSocketTagger(1031): setKernelCountSet(10044, 0) failed with errno -2
    01-09 22:17:07.899: INFO/Process(1806): Sending signal. PID: 1806 SIG: 9
    01-09 22:17:07.919: INFO/ActivityManager(1031): Process com.example.MapTest (pid 1806) has died.
    01-09 22:17:08.109: WARN/InputManagerService(1031): Window already focused,    ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@414b9608 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:57:19.373

目前无法在模拟器上运行 Google Android Maps v2（请参阅[此处](https://plus.google.com/+AndroidDevelopers/posts/Tyz491d96Ci)Android 开发人员的回复）。您应该改用真实设备。

[但是，您可以在此线程](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar/13734937#13734937)中查找更新- 看起来有人设法创建了支持 Google Android Maps v2 的模拟器

编辑：我可以在您的代码中看到一些问题：您应该扩展`android.support.v4.app.FragmentActivity`，但不是常规`Activity`类。

还要确保您添加了 GooglePlayServices 项目（实际上是导入了整个项目），而不仅仅是一个 jar 文件。如果您使用的是 Eclipse，请将库项目导入您的工作区。单击 File > Import，选择 Android > Existing Android Code into Workspace，然后浏览到库项目的副本以将其导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:00:41.863

我终于解决了这个问题。谷歌有一个非常糟糕的教程。首先感谢 Pavel Dudka 的大力帮助。我将 google play lib 作为模块导入，然后将 google play lib 作为 jar 添加，然后我还添加了其他 jar 文件 android.suport.v4.jar 可以找到，因为名称是 exmaple android\suppor\v4 经过这些修改和建议地图不起作用，所以我在下面添加了修改后的片段，而不是使用谷歌提供的那个，地图就像一个魅力。

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
   android:name="com.google.android.gms.maps.SupportMapFragment"
   android:layout_width="wrap_content"
   android:layout_height="match_parent" /> 
```

# clang - 铿锵声查找操作尽快时间

> ID：14246195
> 
> 赞同：1
> 
> 时间：2013-01-09T20:48:59.263
> 
> 标签：clang

我需要阅读程序的 DFG 并在 clang 中找到操作的 ASAP 调度值。我已经编写了解析主文件并构建 AST 的预处理器。

但是，从这里开始，我不知道如何进行。有没有我可以使用的内置类？如果是这样，我如何使用它们来获取 ASAP 值？如果不是，我该怎么做才能手动获取它们？

# python - Python 相当于 Data::Dumper - 转储原始数据结构以供检查？

> ID：14246196
> 
> 赞同：3
> 
> 时间：2013-01-09T20:48:59.810
> 
> 标签：python, debugging

刚接触 Python，我很震惊地发现似乎没有一种明显的方法可以正确检查数据结构，就像使用 Perl 的 Data::Dumper 模块一样。

例如，`pprint`将显示一个对象的 __repr__ 返回值，而不是告诉我该值是一个对象以及它是什么类型的对象。

Data::Dumper 会*准确地*告诉你数据结构包含什么，而不是默默地将对象转换为字符串，这对于数据检查目的绝对没有用处。

有没有办法在 Python 中打印数据结构的*原始*转储？我想我可以自己创建一些东西，基本上它需要做的就是遍历一个数据结构，`print(type(v), v)`但是必须有一些东西可以很好地做到这一点？

编辑：解决的是 __repr__ `pprint`，而不是我最初所说的 __str__ ，至少..通常？

所以，我认为我真正需要的是忽略 __repr__ 定义的 pprint 。那存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:53:41.280

[打印](http://docs.python.org/2/library/pprint.html)

```
from pprint import pprint
pprint(someVar) 
```

好的。我没有更好的答案。我总是使用“pprint”或“pformat”。您可以从字符串输出中推断出类型。我认为磨练从输出中知道类型的技能是要走的路。

或者如你所说，你自己的`print(type(v), v)`.

使用 python，哲学似乎是这样的：“不要过多地依赖类型。只需获取一个对象并使用它，让运行时（测试）告诉用户他们是否搞砸了”：[http://en。 wikipedia.org/wiki/Duck_typing#In_Python](http://en.wikipedia.org/wiki/Duck_typing#In_Python)

* * *

**看完评论。**

为什么不给你想看到的类打补丁来打印一些有用的东西：

```
class Person(object):
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __repr__(self):
        return "Muahaha"

def main():
    s = Person("Santa", 1500)
    from pprint import pprint
    pprint(s)

    print
    print ".. Go MONKEYS ..."
    print

    # Monkey patch the Person class so it prints nice info from now on
    Person.__repr__ = lambda p: "<%s name='%s' age=%s>" % (p.__class__.__name__, p.name, p.age)
    pprint(s)

if __name__ == '__main__':
    main() 
```

- 输出 -

```
matthew@speedy:~/tmp$ python monkey.py
Muahaha

.. Go MONKEYS ...

<Person name='Santa' age=1500> 
```

# javascript - 使用 JavaScript 获取通过 HTML 文件选择器按钮选择的文件的绝对路径

> ID：14246197
> 
> 赞同：2
> 
> 时间：2013-01-09T20:49:00.577
> 
> 标签：javascript, html

我正在使用 Javafx（带有 WebView 组件）开发一个带有 Web 界面的小型 Java 应用程序。我想知道如何使用 JavaScript 知道使用 HTML 中的文件选择器选择的文件的绝对路径，以便我可以将该路径传递给我的 Java 应用程序。

使用 JQuery，我尝试了这个：

```
var completeFileName = $('#button_id').val(); 
```

但这仅返回文件的名称，而不是其完整路径。

如果这是不可能的，我将不得不在 javafx 阶段添加一个 Java 文件选择器，但这将是一个遗憾，因为我的应用程序的所有界面组件都是在 html 中，我想保持这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:53:48.057

在 html 4 中它不会发生，即使在 HTML 5 中，我认为您可以获得有关客户端文件系统的详细信息。

关于这个的随机谷歌结果：http: [//www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# joomla - 需要更改我的 Joomla 网站的数据库密码

> ID：14246198
> 
> 赞同：0
> 
> 时间：2013-01-09T20:49:03.050
> 
> 标签：joomla, joomla1.5

不幸的是，今天我的 Joomla 1.5 站点被黑了—— index.php 已被覆盖，我还发现了一个 php 脚本，它对 config.php 文件做了一些讨厌的事情。
我已经更改了 FTP 密码，但是由于 config.php 文件还包含数据库用户/密码，所以我也想更改它。改变它的正确位置是什么？我应该在 config.php 或其他地方更改它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:02:29.567

更改数据库密码必须通过您的托管 cPanel 完成，然后在 config.php 中完成。

完成此操作后，我建议升级到 Joomla 2.5，因为它更安全且具有更多功能。您还应该考虑安装一些安全扩展。我回答了一个关于安全的问题，您可以在下面的链接中找到：

[Joomla！2.5.4 被黑：诊断有问题](https://stackoverflow.com/questions/11036763/joomla-2-5-4-hacked-having-trouble-with-diagnosis/11037642#11037642)

这也是我添加的另一条信息，说明为什么让您的 Joomla 版本保持最新是一个好主意，如果您还没有：

[为什么我应该保持我的 Joomla 版本是最新的？](https://stackoverflow.com/questions/12247985/why-should-i-keep-my-joomla-version-up-to-date/12247989#12247989)

希望这可以帮助

# jquery - 从 jquery 生成表单

> ID：14246199
> 
> 赞同：0
> 
> 时间：2013-01-09T20:49:05.333
> 
> 标签：jquery, html, css

我是 jquery 和 HTML 的新手。我正在尝试使用 Jquery 制作表单。我想制作一个按钮，它将在 html 页面中添加输入字段。（最多 10 个）。这是我尝试过的东西。

文件

```
<!doctype html>
<html>
  <head>
    <title>TakeMeHome</title>
    <link rel="stylesheet" type="text/css" href="css/design.css"/>
    <script type="text/javascript" src="/js/app.js"></script>
  </head>
  <body>
    <center><form id="details">
      Your Place:<input id="source" type="text"><br><br>
      Friend1:<input id="friend1" type="text"><br><br>
      <div class="friends"></div>
      <div id="button">Add!</div><br><br>

      <input type="submit" id="submit" value="submit">
    </form>
  </body>
</html> 
```

JS文件

```
var j=2;

$(document).ready(function(){
    $('#button').click(function(){
        $('#friends').append("friend"+j+"<input type='text' id='friend"+j+"' " );   
    });

}); 
```

css 文件

```
#button
{
display: inline-block;
height: 20px;
width: 40px;
background-color: red;
font-family: arial;
border-radius: 5px;
text-align: center; 
color:white;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:00:05.033

```
$(document).ready(function(){
    $('#button').click(function(){
        if( $("#friends input[type=text]").length <= 10 ){
            var i = $("#friends input[type=text]").length
            $('#friends').append("<label for='friend "+i+"'><input type='text' id='friend"+ i +"'/></label>");
        }else{
            alert("Max Friends Reached")
            return;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:51:55.563

代码将如下所示：

```
var j=2;
$('#button').click(function(){
    $('#friends').append("<input type='text' id='friend"+ j +"'/>");   
}); 
```

如果你需要更困难的东西。多描述情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:58:52.423

根据您对 timofeiMih 和他的代码的评论

```
$('#button').click(function(){
   var j= $("#friends input").length;
   $('#friends').append("<input type='text' id='friend"+ j +"'/>");   
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:14:24.837

[这](http://jsfiddle.net/2PZnm/)是你的代码。我还在标记中修改了一些东西，如果我是你，我会怎么做。首先我修改了你`<div id="button">Add!</div>`的`<a href="#">` 然后我删除了所有`<br>`标签。为什么在使用 css 时需要它们？也不要忘记捕获所有包含标签的输入，当然， a `<label>`;

对于所有“朋友”输入，您可以将其名称写为数组： `name="friend[]"`因此，当您将它们放入 php 中时，您将得到类似的返回

```
Array (
  [friend] =>
    Array (
      [0] => a
      [1] => b
      [2] => c
      [3] => d
    )
) 
```

# c# - 便携式类库 WebResponse StatusCode 缺失

> ID：14246201
> 
> 赞同：1
> 
> 时间：2013-01-09T20:49:10.323
> 
> 标签：c#, .net-4.5, portable-class-library

我们正在将我们的解决方案之一移植到 PCL，但在 NET 框架基类库的支持类和属性方面面临许多问题。为了使相同的功能在不同的平台上工作，我们实现了 WebClient，但我们在 WebRespornce 类中看不到状态代码属性。

在发布代码示例之前，让我强调一下我们目前的目标平台。

框架版本是 4.5，我们的目标平台是；Windows Phone 8 Windows 8 (RT) Windows 7/8 和 WPF 应用程序。

这是我们正在使用的代码，但云在 WebResponce 中找不到 StatusCode 属性

```
 private static byte[] ReadStreamFromResponce(WebResponse result)
    {
        using (var responseStream = result.GetResponseStream())
        using (var ms = new MemoryStream())
        {
            if (responseStream != null) responseStream.CopyTo(ms);
            return ms.ToArray();
        }
    }

    private static Task<byte[]> MakeAsyncRequest(string requestString)
    {
        var request = (HttpWebRequest)WebRequest.Create(requestString);
        Task<WebResponse> requestTask = Task.Factory.FromAsync(
            request.BeginGetResponse,
            asyncResult => request.EndGetResponse(asyncResult),
            null);
        return requestTask.ContinueWith(t => ReadStreamFromResponce(t.Result));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:57:22.727

该属性在[`HttpWebResponse`类](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)中（派生自`WebResponse`），而不是在基类中。

您需要将结果转换为适当的派生类以访问状态代码。

# php - PHP的rand函数真的那么差吗？

> ID：14246206
> 
> 赞同：11
> 
> 时间：2013-01-09T20:49:25.343
> 
> 标签：php, prng

我知道鼓励使用`mt_rand()`over，`rand()`因为它使用 Mersenne Twister 而不是 PRNG`rand()`使用的任何东西，但这里似乎从未考虑过：用户活动。

事实上，用户的行为可以被认为是非常随机的。例如，在任何给定时刻，用户可能有 4% 的机会触发`rand()`一个功能调用，一个用户触发三个`rand()`调用的概率为 8% `shuffle()`，一个用户触发两个调用的概率为 20% `rand()`，并且每个用户加载页面时，PRNG 会前进 1。

毕竟，NPC 运动难道不是让神奇宝贝游戏中的 RNG 滥用如此令人沮丧的原因吗？

那么，请记住，虽然`rand()`确实有其模式，但用户活动的随机性和用途的多样性`rand()`足以使`rand()`' 的缺点无关紧要吗？在绝对意义上，`mt_rand()`是“更随机”。但这与人类元素的熵相比如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:33:55.300

If you assume calls to rand() are generated by human users at random times then i guess your logic is correct.

However imagine a bot that sends same requests each X seconds (at night hours not interrupted by human calls) or a simple script that runs for a given amount of time and runs rand() one by one. Then you can not fully depend on randomness.

comment from php.net :

> Note that the automatic seeding seems to be done with the current number of seconds which means you can get the same results for several runs on a fast server. Either call srand() yourself with a more frequently changing seed or use mt_rand() which doesn't appear to suffer from the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:49:23.280

> 但这与人类元素的熵相比如何？

我想象这种情况：

*   拥有数千名用户的游戏。
*   出于某种原因，每 X 分钟，您应该为每个用户设置一个随机值（每次都以相同的顺序给出）

由于一个伪随机函数，更有可能与用户 XXX 和用户 YYY 始终保持相同的距离。因为伪随机的问题之一是，在足够数量的循环之后，一个区域可以“更”可预测。

# c# - 为什么在泛型方法中不调用显式运算符

> ID：14246211
> 
> 赞同：5
> 
> 时间：2013-01-09T20:49:48.183
> 
> 标签：c#, generics

我已经将这个问题提炼成我能想到的最简单的代码示例。为什么不从泛型方法调用显式运算符？

```
class Program
{
    static void Main(string[] args)
    {
        A a = new A();
        B b = (B)a; // works as expected
        b = Cast<B>(a);
    }

    static TResult Cast<TResult>(object o)
    {
        return (TResult)o; // throws Invalid Cast Exception
    }
}

class A
{
}

class B
{
    public static explicit operator B(A a)
    {
        return new B();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T20:53:04.203

因为泛型方法有**一**组 IL，基于`TResult`. 它不会对每个调用者执行不同的 IL。并且泛型`TResult` **没有**任何运算符。

另外：这里的运算符需要介于`object`and之间`TResult`，并且您**不能定义**涉及 . 的运算符`object`。

例如：`Cast<int>`and `Cast<string>`and`Cast<Guid>`都具有完全相同的 IL。

你可以作弊`dynamic`：

```
return (TResult)(dynamic)o; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:19:45.533

归结为`implicit`and`explicit`运算符不是*真正的*转换运算符。它们完全是编译时语法糖。编译代码后，不会保留任何有关转换运算符的信息。

当编译器看到：

```
B b = (B) new A(); 
```

`A`它说，“是否存在从 a到 a 的任何本机转换（隐式或显式）`B`？” `A`（例如，如果是扩展的，就会出现这种情况`B`），或者是为数不多的特殊语言转换之一，例如`double`to `int`(implicit) 或`int`to `double`(explicit)。）

如果不是，则查找用户定义的转换运算符（例如，它只查找 and 的定义，`A`而不`B`查找from和 to`C`的隐式转换）。如果它找到一个，那么它将该运算符作为静态方法调用注入，因此代码最终看起来像：`A``B`

```
B b = B.SomeAutogneratedName(new A()); 
```

这样，当你进入运行时，它只是在执行另一个方法，运行时知道该怎么做。唯一允许的实际*运行时*转换运算符是语言中的少数几个（即从任何基本类型到父类型，以及某些原始类型之间）。

# node.js - Heroku Node JS 应用程序错误 - 说找不到我的主模块

> ID：14246212
> 
> 赞同：1
> 
> 时间：2013-01-09T20:49:49.513
> 
> 标签：node.js, heroku

我有一个在 heroku 上运行的小型 node.js 应用程序。直到今天一切都很好。

我对我的一个 .jade 文件进行了微小的更改并重新部署。现在我在我的heroku日志中得到了这个：

```
2013-01-09T20:44:40+00:00 heroku[slugc]: Slug compilation started
2013-01-09T20:44:53+00:00 heroku[api]: Release v36 created by steve@donie.us
2013-01-09T20:44:53+00:00 heroku[api]: Deploy c299759 by steve@donie.us
`013-01-09T20:44:55+00:00 heroku[web.1]: Starting process with command `node ./doniewebapp.js
2013-01-09T20:44:56+00:00 app[web.1]:     at Function.Module._resolveFilename (module.js:338:15)
2013-01-09T20:44:56+00:00 app[web.1]:     throw err;
2013-01-09T20:44:56+00:00 app[web.1]:     at Function.Module._load (module.js:280:25)
'013-01-09T20:44:56+00:00 app[web.1]: Error: Cannot find module '/app/doniewebapp.js
2013-01-09T20:44:56+00:00 app[web.1]:     at process.startup.processNextTick.process._tickCallback (node.js:244:9)
2013-01-09T20:44:56+00:00 app[web.1]:
2013-01-09T20:44:56+00:00 app[web.1]: module.js:340
2013-01-09T20:44:56+00:00 app[web.1]:           ^
2013-01-09T20:44:56+00:00 app[web.1]:     at Module.runMain (module.js:492:10)
2013-01-09T20:44:57+00:00 heroku[web.1]: Process exited with status 1
2013-01-09T20:44:54+00:00 heroku[slugc]: Slug compilation finished
2013-01-09T20:44:53+00:00 heroku[web.1]: State changed from crashed to starting
2013-01-09T20:44:57+00:00 heroku[web.1]: State changed from starting to crashed 
```

我已经确认 doniewebapp.js 文件仍然存在，如果我使用，我什至可以运行该应用程序

```
heroku run node doniewebapp.js 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:41:19.533

我有同样的麻烦。

> 使用命令 `node ./doniewebapp.js <-- 反引号启动进程。

```
$ vi Procfile
:set fileformat=unix
:w 
```

我已经解决了这个问题。

# c# - 将文本框中的数据写入文本文件

> ID：14246216
> 
> 赞同：1
> 
> 时间：2013-01-09T20:50:21.307
> 
> 标签：c#, streamreader, streamwriter

这是我用来写入和读取文本文件的代码。

```
StreamWriter sw1 = new StreamWriter("DataNames.txt");
sw1.WriteLine(textBox1.Text);
sw1.Close();
StreamWriter sw2 = new StreamWriter("DataNumbers.txt");
sw2.WriteLine(textBox2.Text);
sw2.Close();
FileInfo file1 = new FileInfo("DataNames.txt");
StreamReader sr1 = file1.OpenText();
while (!sr1.EndOfStream)
{
    listBox1.Items.Add(sr1.ReadLine());
}
FileInfo file2 = new FileInfo("DataNumbers.txt");
StreamReader sr2 = file2.OpenText();
while (!sr2.EndOfStream)
{
    listBox2.Items.Add(sr2.ReadLine());
} 
```

问题是，当我单击按钮将文本框中的数据保存到文本文件时，会出现一个错误，提示“进程无法访问文件 'C:\xxxx\xxxxxx\xxxxx\xxxx\xxxxx\xxxxx.txt'，因为它正被另一个进程使用。”

谁能告诉我为什么我有这个错误，也许可以帮我解决它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:57:44.187

尝试`using`在您的流周围添加一个语句以确保它们是，`Disposed`否则文件仍被锁定到流

例子：

```
 //Write
    using (StreamWriter sw1 = new StreamWriter("DataNames.txt"))
    {
        sw1.WriteLine(textBox1.Text);
    }

    using (StreamWriter sw2 = new StreamWriter("DataNumbers.txt"))
    {
        sw2.WriteLine(textBox2.Text);
    }

    // Read
    foreach (var line in File.ReadAllLines("DataNames.txt"))
    {
        listBox1.Items.Add(line);
    }

    foreach (var line in File.ReadAllLines("DataNumbers.txt"))
    {
        listBox2.Items.Add(line);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:54:21.860

看来您在阅读文件后并未关闭该文件。调用[FileInfo.OpenText](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.opentext.aspx)后，您会得到一个`StreamReader`必须通过[Close](http://msdn.microsoft.com/en-us/library/system.io.streamreader.close.aspx)方法关闭的，或者更好的是，使用`using`语句。

但是已经有一些方法可以为您完成所有这些工作，请查看[File.WriteAllText](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)、 [File.AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356.aspx)和[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:00:55.450

出现您的问题，因为您没有关闭流阅读器。

使用外部资源（本例中的文件）的一种更安全的方法是将它们的使用嵌入到`using`语句中。该`using`语句会在语句块的末尾自动关闭资源，或者如果语句块以另一种方式离开，则该资源会自动关闭。例如，这可能是一个`return`声明或例外。保证资源将被关闭，即使发生异常。

您可以将`using`语句应用于实现该`IDisposable`接口的任何对象。

```
// Writing to the files
using (var sw1 = new StreamWriter("DataNames.txt")) {
    sw1.WriteLine(textBox1.Text);
}
using(var sw2 = new StreamWriter("DataNumbers.txt")) {
    sw2.WriteLine(textBox2.Text);
}

// Reading from the files
FileInfo file1 = new FileInfo("DataNames.txt");
using (StreamReader sr1 = file1.OpenText()) {
    while (!sr1.EndOfStream) {
        listBox1.Items.Add(sr1.ReadLine());
    }
}
FileInfo file2 = new FileInfo("DataNumbers.txt");
using (StreamReader sr2 = file2.OpenText()) {
    while (!sr2.EndOfStream)
    {
        listBox2.Items.Add(sr2.ReadLine());
    }
} 
```

但是，您可以像这样简化阅读部分

```
// Reading from the files
listBox1.Items.AddRange(File.ReadAllLines("DataNames.txt"));
listBox2.Items.AddRange(File.ReadAllLines("DataNumbers.txt")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T20:53:56.543

一旦不再需要 StreamReader 对象，就需要[关闭它。](http://msdn.microsoft.com/en-us/library/system.io.streamreader.close.aspx)这应该可以解决此问题。IE

```
StreamReader sr1 = file1.OpenText();
try {
            while (!sr1.EndOfStream)
            {
                listBox1.Items.Add(sr1.ReadLine());
            }
}
finally { 
  sr1.Close();
}
            FileInfo file2 = new FileInfo("DataNumbers.txt");
            StreamReader sr2 = file2.OpenText();
try {
            while (!sr2.EndOfStream)
            {
                listBox2.Items.Add(sr2.ReadLine());
            }
}
finally {
  sr2.Close();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T20:54:04.267

您已打开文件但未关闭。

```
StreamReader sr1 = file1.OpenText();
StreamReader sr2 = file2.OpenText(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T20:55:00.030

我以前见过这种行为 - 通常有另一个打开的进程阻止文件访问。您的任务栏中是否打开了多个开发服务器？（奇怪，是的，但我已经看到它发生了）

# itextsharp - iTextSharp ColumnText.SetSimpleColumn Addtext 导致 Adob e Reader X 10.1.5 中的错误

> ID：14246221
> 
> 赞同：2
> 
> 时间：2013-01-09T20:50:40.033
> 
> 标签：itextsharp, adobe-reader

下面的代码说明了我在使用 iTextSharp 时遇到的问题。一切都很完美。pdf 文件已创建并在屏幕上显示正确。当我从 Adob​​e Reader X 打印 pdf 时，它看起来完全正确，但 Adob​​e 报告“此页面存在错误。Acrobat 可能无法正确显示该页面。请联系创建 PDF 文档的人以更正问题。”

不幸的是，该文件必须附加到电子邮件中并发送给客户。错误消息看起来不太好，我想修复它。它发生在我尝试过的所有版本的 Reader 中，包括今天安装的 10.1.15。

我在 Windows 7 Pro SP1 下有 iTextSharp 5.3.4.0

```
 private void writeTestDoc()
    {
        string fname = "test.pdf";
        float textWidth = 500;
        float leftMgn = 60;
        float rubricTop = 720;
        float leftPad = 5;
        float topPad = 12;
        float leading = 0;
        BaseFont baseCalibri = BaseFont.CreateFont("c:/windows/fonts/calibri.ttf", BaseFont.WINANSI, true);
        Font plainFont = new Font(baseCalibri, 11, Font.NORMAL);
        Document document = new Document();
        try
        {
            PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(fname, FileMode.Create));
            document.Open();
            PdfContentByte cb = writer.DirectContent;
            cb.BeginText();
            ColumnText ct = new ColumnText(cb);
            float boxTop = rubricTop;
            ct.SetSimpleColumn(leftMgn + leftPad, boxTop - topPad, leftMgn + textWidth, boxTop, leading, Element.ALIGN_CENTER);
            ct.AddText(new Phrase("A test message", plainFont));
            ct.Go();
            cb.EndText();
            document.Close();
        }
        catch (Exception ex)
        {
            writeFile("ERROR in writeTestDoc " + ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:13:09.997

删除`cb.BeginText();`和`cb.EndText();`。嵌套`BT`/文本对象是非法的。`ET`报告您找到告诉您使用`BeginText()`/`EndText`与 结合使用的文档的位置`ColumnText`，以便我们可以要求作者从他或她的文档中更正它。

# grails - 使用 grailsLinkGenerator 在 bootstrap.groovy 中生成图像链接

> ID：14246222
> 
> 赞同：3
> 
> 时间：2013-01-09T20:50:39.793
> 
> 标签：grails

我正在尝试使用 Grails 2.0.3 中记录不足的 grailsLinkGenerator 类在我的引导文件中创建指向图像资源的链接

我已经使用成功注入了服务

```
...
LinkGenerator grailsLinkGenerator 
... 
```

但是下面代码生成的url不正确

```
grailsLinkGenerator.resource(dir:'images', file:'1.jpg') 
```

没有错误，生成的路径看起来几乎是正确的，除了它在 url 中缺少“静态”。我用错了吗？是否有其他方法可以在引导程序中访问您的静态资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:31:55.810

查看`ApplicationTagLib`源代码，您可以看到仅在未安装资源插件时`g:resource`使用。`linkGenerator`

```
Closure resource = { attrs ->
    if (!attrs.pluginContextPath && pageScope.pluginContextPath) {
        attrs.pluginContextPath = pageScope.pluginContextPath
    }
    // Use resources plugin if present, but only if file is specified - resources require files
    // But users often need to link to a folder just using dir
    return ((hasResourceProcessor && attrs.file) ? r.resource(attrs) : linkGenerator.resource(attrs))
} 
```

所以这可能是您的链接没有静态路径的原因。

我认为这不是将完整链接存储到数据库中的缩略图的好选择。如果您更改结构中的某些内容，则需要更新所有链接。您可以存储缩略图的名称（或使用约定），并让链接生成在`TagLib`负责显示它们的 a 中。

在 TagLib 中，您可以使用`g:resource`它来创建正确的 url。

# asp.net - 从我的网页将图像文件上传到我的服务器时，如果上传超时 VB.net 代码后面，我想显示消息

> ID：14246223
> 
> 赞同：1
> 
> 时间：2013-01-09T20:50:39.693
> 
> 标签：asp.net, vb.net, visual-studio-2008, file-upload, timeout

我已经检查了文件大小和文件扩展名。但是我仍然需要检查上传过程是否超时。如果确实如此，我想向用户显示上传超时的消息，他们可以稍后再试。任何帮助将不胜感激！:)

```
 Dim success As Boolean = False
    Response.Write("*EIL*")
    Try
        If Not Context.Request.Files Is Nothing Then
            Dim fileCount As Int32 = Context.Request.Files.Count
            For fileLoop As Integer = 0 To fileCount - 1
                Dim file As HttpPostedFile = Context.Request.Files(fileLoop)
                Dim fileName As String
                If file.ContentLength > 20971520 Then
                    Response.Write("The upload failed because the file size is too large - 20MB is the limit.")
                Else
                    fileName = HttpUtility.UrlDecode(file.FileName)
                    Dim ext As String = fileName.Substring(fileName.Length - 4, 4).ToLower
                    If ext = ".jpg" Or ext = ".gif" Or ext = ".png" Or ext = ".bmp" Or ext = ".psd" Or ext = ".tif" Then
                        If InStr(fileName, "\") > 0 Then
                            Dim arr() As String = Split(fileName, "\")
                            fileName = arr(arr.Length - 1)
                        End If

                        file.SaveAs(String.Format(ConfigurationManager.AppSettings("ArtworkUploadPath"), fileName))

                        success = True
                    Else
                        Response.Write("The upload failed because the file was the wrong type.  Only files with the following extensions are allowed: .jpg, .gif, .png, .bmp, .psd, .tif")
                    End If
                End If
            Next
            If success Then Response.Write("Success")
        End If
    Catch ex As Exception

    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:41:52.827

**简短的回答：**你不能。

**更长的答案：**当上传超时时，这是因为服务器决定您的代码花费太长时间，杀死您的进程，然后抛出异常。因此，当超时发生时您的代码不再运行，因此无法向用户显示消息。

您可以根据需要记录超时，如[类似问题](https://stackoverflow.com/a/13769163/)中所述。

理想情况下，您无论如何都不想赶上超时，您想修复您的页面，使其不会超时。您可以通过以下几种方式做到这一点：

*   更改`maxRequestLength`您的值`system.web`以限制允许的文件大小，并在用户上传超过该值时向用户[显示错误页面。](https://stackoverflow.com/a/824298/)

*   通过增加`executionTimeout`in your的值来延长超时期限`system.web`，如在[此处找到的答案所示](https://stackoverflow.com/a/230916/)。

# clojurescript - clojurescript 动态脚本加载

> ID：14246224
> 
> 赞同：3
> 
> 时间：2013-01-09T20:50:42.070
> 
> 标签：clojurescript

我对 Clojurescript 比较陌生，并且遇到了一些我不太确定问题所在的问题。我的 clojurescript 中有一个函数，它向文档中添加了一个新的脚本元素，用于加载脚本从未尝试加载的 FB API。该资源没有活动。我已经用javascript重写了这个例子，它可以工作。我查看了生成的 clojurescript 代码，它看起来与我编写的 javascript 代码基本相同。我已经尝试了一些东西，但最终没有什么能让浏览器通过使用 ClojureScript 加载动态脚本。

我的代码是

```
(ns wearthisorthat.client.fblogin
  (:require  [goog.net.XhrIo :as xhr]
             [cljs.reader :as cljrdr]
             [clojure.browser.repl :as repl]
             [domina.events :as ev]
             [domina :as d]
             [domina.css :as css]))

(defn load-fb-sdk [debug?]
  (let [ id "facebook-jssdk"
        debug-str (if debug? "/debug" "")
        ref (d/by-id "fb-script")
        _ (.log js/console "ref = " ref)
        parent (.-parent ref)
        el-id (d/by-id id)
        element (d/string-to-dom (str "<script id=" id " async"
                                      " src=//connect.facebook.net/en_US/all"
                                      debug-str ".js></script>"))
        _ (.log js/console element)]
    (when-not el-id (d/insert-before! ref element))))

(defn ^:export fbcb []
  (let [data {:appId "<myappid>",
              :channelUrl "<my-channel>",
              :status true,
              :cookie true,
              :xfbml true}]
    (.log js/console "RRRRRRRRRRR")
    (js/FB.init (clj->js data))))

;; Load the SDK's source Asynchronously
(.log js/console "RIGHT HERE")
(aset js/window "fbAsyncInit" fbcb)

(load-fb-sdk true) 
```

我的 index.html （在我上面的 cljs 更新之前）

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <div id="fb-root"></div>
  <script id="fb-script"></script>
  <script type="text/javascript" src="js/wtot.js"></script>
</body>
</html> 
```

在我的 cljs 运行后，我的文档看起来像这样......

```
<!DOCTYPE html>
<!-- saved from url=(0037)http://localhost:3000/wtot/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
  <div id="fb-root"></div>
  <script id="facebook-jssdk" async src="//connect.facebook.net/en_US/all/debug.js"></script>
  <script id="fb-script"></script>
  <script type="text/javascript" src="./index_files/wtot.js"></script>

</body>
</html> 
```

Google 网络流量仅显示正在加载的 index.html 和 wtot.js，而不是 debug.js（没有错误，但日志中没有尝试加载 debug.js 的引用）。如果我通过将上面的动态元素复制并粘贴到我的 index.html 中来使动态脚本元素成为静态元素，那么代码将按预期工作。如前所述，如果我在 javascript 中完成这一切，包括动态添加脚本元素，那么一切正常。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:22:07.900

只是一个想法：我看过[一些关于动态添加脚本的](http://unixpapa.com/js/dyna.html) [页面](http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS)，它们都创建了一个新脚本并将其附加为 的子级`<HEAD>`，而不是`<BODY>`:

```
 var head= document.getElementsByTagName('head')[0];
  var script= document.createElement('script');
  script.type= 'text/javascript';
  script.src= 'helper.js';
  head.appendChild(script); 
```

# php - Magento 上的 appEmulation 是否会为普通观察者调度正常事件？

> ID：14246227
> 
> 赞同：1
> 
> 时间：2013-01-09T20:50:58.137
> 
> 标签：php, magento, dispatcher

例如，`Mage_Sales_Model_Order`您有一个名为`sendNewOrderEmail()`运行此 appEmulation 的方法，并生成要嵌入到电子邮件中的 paymentBlocks。有人告诉我这样做是为了模拟前端存储并准确地生成所述块......

但是在该 appEmulation 下调用的方法是否也会触发我的自定义模块上的观察者？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:47:53.350

简而言之，没有。`app->loadArea([AREA])`通过在动作控制器超类中的调用启用特定区域的事件`preDispatch()`；见[`Mage_Core_Controller_Varien_Action::preDispatch()`（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L513)。这些区域由子类`Mage_Core_Controller_Front_Action`和`Mage_Adminhtml_Controller_Action`.

如果在脚本执行期间评估调度代码（例如调用`Mage::dispatchEvent()`），则调度事件。但是，如果观察者被配置为特定区域（例如`frontend`和`adminhtml`），那么除非加载该区域，否则这些事件将不会调度。

对于最后一点参考，请参阅`Mage_Core_Model_App_Emulation::startEnvironmentEmulation()`并注意它不调用区域的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:27:14.913

我刚刚通过铃声试图找出你问的完全相同的问题。我试图建立一个外部 SSO 登录。我注意到在 Mage_Customer 模块等中没有触发任何控制器事件。相同的方法应该适用于您，只需确定要模拟的控制器并确保在代码中调度相同的事件。

我已经在这里发布了我所有研究的结果......

[如何从外部脚本触发 config.xml 中 <frontend> 中的 <controller_action_predispatch> 的无控制器核心 Magento 模块](https://stackoverflow.com/questions/14201677/how-can-i-trigger-controllerless-core-magento-modules-that-watch-controller-act)

回想起来，你*可能*已经用类似的方法用这个'core/app_emulation'解决了我的问题。我将不得不更多地研究它。

# objective-c - 在方法中，指针或实际对象是否作为参数传递？

> ID：14246229
> 
> 赞同：0
> 
> 时间：2013-01-09T20:50:58.633
> 
> 标签：objective-c, cocoa, pointers, methods

我一直在搞乱一些代码来尝试了解objective-c中的指针和内存管理。但是，我似乎无法理解的是使用此代码：

```
hello *myHello = [[hello alloc] init];

NSString *string = @"Hello";

myHello.property = string; 
```

NSString 实例 (@"Hello") 是作为参数传递给 setter 方法还是发送指针。例如，如果我将“string”更改为指向不同的对象，然后得到变量，它仍然是“Hello”还是更改为“string”指向的新对象？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:17:27.880

吉姆有一个很好的答案，但我想添加一个视觉效果，因为它可能对人们有所帮助。

说 *string = @"test"

字符串指向存储@“test”的内存位置

基本上，它看起来像这样：

```
 @"test"
        ^
string / 
```

当你这样做时：

`myHello.property = string;`

您只是将属性设置为与字符串相同的位置，如下所示；

```
 @"test"
        ^
string /  \ property 
```

然后，如果您稍后将字符串更改为 @"hello" 您在内存中创建另一个位置，并保留另一个。现在是这样的。

```
 @"hello"  @"test"
        ^         ^
string /           \ property 
```

唯一可以篡改属性的方法是你弄乱了指针。由于这可能永远不会发生，因此您无需担心。

一些新手认为这会导致内存问题，但事实并非如此。ARC 可以判断您何时完成了属性，并且它会删除内存本身。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:59:51.440

当你这样做时：

```
myHello.property = string; 
```

如果**property**没有定义**copy**，它被设置为指向**string**指向的同一个地方。

如果**property使用****copy**定义，则将其设置为指向原始字符串的新副本。

在任何一种情况下，如果您随后将**字符串**更改为指向不同的字符串（例如@"Goodbye"），**属性**仍将指向@"Hello"。

# ios - 在不使用导航控制器的情况下将不同的视图链接到 tableview/viewcontroller

> ID：14246231
> 
> 赞同：1
> 
> 时间：2013-01-09T20:51:03.537
> 
> 标签：ios, uitableview, uiviewcontroller, storyboard, uitoolbar

对于无法有效地描述我的问题陈述，我提前道歉。但是，我将包含一个指向图像的链接，以更好地描述我正在寻找的内容。基本上，我有一个 Viewcontroller，里面有一个 TableView，顶部有一个工具栏，上面有三个栏按钮项。现在，我想要的是能够拥有一种功能，用户可以点击这些按钮中的任何一个，然后我们会转到不同的视图。现在，我想要一个设计，如果可能的话，我会留在同一个屏幕上，并根据按下的按钮在下面的表格视图中呈现信息。从视觉上看，我正在尝试一种效果，其中按下的按钮显示为被按下并呈现信息，并且在按下不同的按钮时呈现不同的视图。我' 我熟悉将不同的视图控制器附加到所有按钮，然后进入这些查看器。但是，我想知道是否有一种方法可以让我留在同一个视图控制器上并只使用子视图。如果有，我怎样才能从情节提要中做到这一点？再次，我为冗长而道歉，我的照片应该能够告诉你我想要做什么。

我想要实现的链接：http: [//imgur.com/GM5eH](http://imgur.com/GM5eH)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:55:47.143

好吧，一个基本的解决方案就是在控制器中添加这些其他视图。现在该子视图在 viewDidLoad: 上设置为隐藏。然后只需创建一个动作，并显示子视图。您可以根据需要调整该视图的大小，也可以使用其他视图。

现在，可能有更好的方法来做到这一点，但我就是这样做的。

编辑 - 关于 Apple 在日历上的方法

现在，我从来没有尝试过这样的事情，所以这都是理论。

首先，您创建三个类。每个都有自己的自定义视图。这个视图应该是你在另一个（主视图）上需要的大小。您可以在 Interface Builder 中将大小设置为自由形式。

完成后，您将前往主视图。该视图将具有三个按钮。`IBAction`为每个创建每个视图的实例并将其放置在屏幕上的每个设置一个。（我不知道如何做到这一点，但我确信有办法。看看这里：[Objective-c 在我的控制器中添加子视图](https://stackoverflow.com/questions/5501611/objective-c-adding-subviews-in-my-controller)

在您前往另一个视图之后，您应该`dealloc`每个视图以及内存管理。

# javascript - 从 $scope 中的数组中删除并更新页面上的 html

> ID：14246235
> 
> 赞同：0
> 
> 时间：2013-01-09T20:51:12.353
> 
> 标签：javascript, angularjs

所以，我遇到的问题是我的控制器 $scope 中有一个数组，`$scope.calls`我可以很好地推入该数组并在页面上更新它。简单的东西。我想要做的是能够删除`$scope.calls`并让它反映在这样的页面上。如果您查看`$scope.deleteCall()`，它会从数组中删除它，但不会从页面中删除元素。删除数据时是否可以清除这些元素？

[http://jsfiddle.net/kyct/6tcW8/75/](http://jsfiddle.net/kyct/6tcW8/75/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:03:53.207

问题是您并没有真正从数组中删除该项目。正确的方法是：

```
$scope.deleteCall = function (callIndex) {
    $scope.calls.splice(callIndex, 1);
} 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/UAPhn/](http://jsfiddle.net/UAPhn/)

# ios - 设置 UICollectionViewLayout 以匹配列拆分 UITableView 类似结果

> ID：14246236
> 
> 赞同：0
> 
> 时间：2013-01-09T20:51:13.583
> 
> 标签：ios, uitableview, ios6, uicollectionview, uicollectionviewlayout

我是 iOS 6 中 UICollectionView 的新手，到目前为止，它看起来很像 UITableView 但是我正在尝试找出一种方法来使 UISCrollview 的 pagingEnabled 感觉与我显示为的一组单元格一起工作如果它们是 UITableView （实际上它们不是）

这就是我想要实现的目标

![在此处输入图像描述](../Images/fe39469ceec62b7bffe6b2adae7d89cb.png)

我的问题是如何以这种形式布局单元格，我知道我必须继承 UICollectionViewLayout 但完全不明白如何实现这一点，以及如何同时启用分页，如果它必须由 UICollectionViewLayout 启用或应该我自己这样做。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:17:58.813

您必须覆盖其中一种`UICollectionViewLayout`方法，`layoutAttributesForItemAtIndexPath:`例如。

在此方法中，您将进行一些数学计算以确定您的单元格位置。对于您的情况，索引 0 处的单元格将位于 (0,0)，索引 1 位于 (0, 10)，[...] 索引 11 位于 (100, 0) 等。您的计算将取决于一些变量，例如一列有多少个单元格，列之间的空间，...

一旦你这样做了，返回一个`UICollectionViewLayoutAttributes`具有适当属性的类（`frame`,`size`等）

# java - 在构造函数中调用另一个构造函数和父构造函数

> ID：14246246
> 
> 赞同：0
> 
> 时间：2013-01-09T20:51:43.537
> 
> 标签：java, oop, inheritance

考虑以下类：

```
class MyPanel extends JPanel {

   public MyPanel() {
      super();

      // Do stuff
   }

   public MyPanel(LayoutManager manager) {
      super(manager);

      // Do same stuff as the first constructor, this() can't be used
   }

} 
```

当试图避免重复代码时，问题出现在第二个构造函数中。这是因为我不能在同一个构造函数中同时调用`super()`两者`this()`。

我可以将通用代码提取到一个单独的方法中，但我确定这个问题必须有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:53:59.423

一种经常使用的模式是

```
class MyPanel extends Panel {
  MyPanel() {
    this(null);
  }

  MyPanel(LayoutManager manager)
    super(manager);
    // common code
  }
} 
```

但这仅在`Panel()`并且`Panel(null)`等效时才有效。

否则，通用方法似乎是最好的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T20:57:15.717

虽然您不能调用多个构造函数，但您可以执行以下操作：

```
class MyPanel extends JPanel {

  public MyPanel() {
     this(null);
  }

  public MyPanel(LayoutManager manager) {
     super(manager);
     // Do all the stuff
  }

} 
```

但你最终可能会得到更混乱的东西。正如您所说，初始化方法可以是另一种方法：

```
class MyPanel extends JPanel {

  public MyPanel() {
     super();
     this.initialize();
  }

  public MyPanel(LayoutManager manager) {
     super(manager);
     this.initialize();
     // Do the rest of the stuff
  }

  protected void initialize() {
     // Do common initialization
  }

} 
```

# jquery - 为什么在将 jquery carousel 应用于代码时无法单击我的锚点？

> ID：14246250
> 
> 赞同：0
> 
> 时间：2013-01-09T20:52:06.797
> 
> 标签：jquery

我正在尝试在页面顶部创建幻灯片，我正在使用此插件：[https ://github.com/thomaslanciaux/jquery-carousel/blob/master/src/jquery.carousel.js](https://github.com/thomaslanciaux/jquery-carousel/blob/master/src/jquery.carousel.js)

这是迄今为止的结果：[http](http://robert.aurelslab.co.uk/) ://robert.aurelslab.co.uk/ ，如您所见，我无法点击阅读更多链接。我注意到如果我删除上面的轮播脚本，我可以让链接正常工作。对如何解决这个问题有任何想法吗？

我尝试添加一个 z-index:-100; 到所有相关的包装 div，但它并没有帮助这种情况。我可以做些什么来使“阅读更多”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:04:24.860

这是因为#slider 的 z-index 为负。你应该添加这个CSS：

```
#slider{
  z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:09:20.687

使用最新的稳定版 Chrome，加载页面时`div`with`class="carousel-wrap"`有一个`style=""`height 为**136px**的属性。这太小了。当我单击图像滑块上的下一个或上一个按钮时，它会突然扩展到**272px**，它足够高，可以正常工作，然后可以单击阅读更多按钮。您的 CSS 中某处有一个冲突的 height: 属性，或者某些 javascript 正在应用该 height: 属性，并且您在一个地方更改了它但错过了另一个地方。

检查你所有的身高。

# mysql - MySql ERROR 1064 - 恢复数据库

> ID：14246251
> 
> 赞同：0
> 
> 时间：2013-01-09T20:52:09.557
> 
> 标签：mysql

帮助。我不确定如何解决此错误。我正在尝试恢复给我的 MySql 数据库。但我收到以下错误消息。

第 29 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 'TYPE=MyISAM' 附近使用正确的语法

```
`-- MySQL Administrator dump 1.4
--
-- ------------------------------------------------------
-- Server version   4.0.27-nt

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

--
-- Create schema aircraftmanager
--

CREATE DATABASE IF NOT EXISTS aircraftmanager;
USE aircraftmanager;

--
-- Definition of table `addump`
--

DROP TABLE IF EXISTS `addump`;
CREATE TABLE `addump` (
  `ADID` int(11) NOT NULL auto_increment,
  `ADNO` varchar(175) default NULL,
  `AIRCRAFTID` int(11) default NULL,
  PRIMARY KEY  (`ADID`)
) TYPE=MyISAM;
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:09:05.573

查看 5.1 SQL 的创建表语法，我看不到有效的 TYPE 值。鉴于这表明要使用的存储引擎，那么您应该使用

```
DROP TABLE IF EXISTS `addump`;
CREATE TABLE `addump` (
  `ADID` int(11) NOT NULL auto_increment,
  `ADNO` varchar(175) default NULL,
  `AIRCRAFTID` int(11) default NULL,
  PRIMARY KEY  (`ADID`)
) ENGINE=MyISAM; 
```

[http://dev.mysql.com/doc/refman/5.1/en/storage-engine-setting.html](http://dev.mysql.com/doc/refman/5.1/en/storage-engine-setting.html) - 对于引擎部分 [http://dev.mysql.com/doc/refman/5.1/en/create-table .html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html) - 用于语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:03:15.070

```
CREATE DATABASE IF NOT EXISTS aircraftmanager;
USE aircraftmanager;

DROP TABLE IF EXISTS addump;
CREATE TABLE addump (
  ADID int(11) NOT NULL auto_increment,
  ADNO varchar(175) default NULL,
  AIRCRAFTID int(11) default NULL,
  PRIMARY KEY  (ADID)
) ENGINE=MyISAM; 
```

这应该工作

# wcf - System.ServiceModel.Security.MessageSecurityException “传出消息的身份检查失败。”

> ID：14246257
> 
> 赞同：0
> 
> 时间：2013-01-09T20:52:22.097
> 
> 标签：wcf

我得到的错误是：

```
Identity check failed for outgoing message. The expected DNS identity of the remote endpoint was 'MYSERVER' but the remote endpoint provided DNS claim 'myserver.mycompany.com'. If this is a legitimate remote endpoint, you can fix the problem by explicitly specifying DNS identity 'myserver.mycompany.com' as the Identity property of EndpointAddress when creating channel proxy. 
```

我用谷歌搜索并发现了很多问题，但没有一个解决方案对我有用。

我的问题 1）“预期的 DNS 身份”究竟来自哪里，以及 2）DNS 声明来自哪里？

据我所知，问题 #2 的答案是 with the element。

与我看到的其他帖子不同的一件事是，这仅在我们的一台服务器上损坏，因此我认为这可能是该特定服务器的 DNS 问题。

# mysql - 如何使用 MySQL 在外部查询中指定一个虚拟列？

> ID：14246261
> 
> 赞同：0
> 
> 时间：2013-01-09T20:52:53.217
> 
> 标签：mysql, dummy-data, inner-query

我需要执行以下查询：

```
SELECT ID FROM tbl_a WHERE (fld_merchID, 'something') IN
(SELECT MerchID, MAX(Priority) FROM tbl_b WHERE Name LIKE 'AAA.com') 
```

如您所见，tbl_a 中没有“优先级”字段。（我需要选择优先级值较高的 MerchID）。

该查询返回空，它不应该。

我不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:56:12.353

试试这个 ，

```
 SELECT ID FROM tbl_a WHERE fld_merchID IN
(SELECT MerchID, MAX(Priority) FROM tbl_b  WHERE Name LIKE 'AAA.com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:06:44.140

如果您想要具有最高优先级的那个，那么您需要显着更改您的子查询以选择具有最高优先级的 MerchID：

```
SELECT ID FROM tbl_a WHERE fld_merchID IN (
  SELECT DISTINCT MerchID
  FROM tbl_b
  INNER JOIN (
    SELECT Name, MAX(Priority) as Priority
    FROM tbl_b 
    WHERE Name LIKE 'AAA.com'
    GROUP BY Name
  ) mx ON mx.Name = tbl_b.Name AND mx.Priority = tbl_b.Priority
) 
```

# sql-server - 将 VARCHAR 转换或强制转换为 INT；更新栏

> ID：14246263
> 
> 赞同：3
> 
> 时间：2013-01-09T20:52:57.250
> 
> 标签：sql-server, tsql, casting, sql-update

**免责声明：** 我仍在学习 SQL，所以如果我的问题是业余的，或者是一个非常简单的答案，我深表歉意。我没有受过正规培训。我在自学。

标题可能有点混乱，因为我不完全确定如何用这个来形容标题。

基本上，我想将当前表中的列转换`VARCHAR`为`INT`. 该列仅包含格式如下的数字：

```
00001
00005
02150 
```

这些本质上是*ID*，将附加到`Name column`稍后用于其他目的。如果有必要这样做，我还想知道如何将最终结果转换`INT`为`VARCHAR`附加部分。

这是我现在拥有的：

> 选择转换（INT，LocNo）

它返回我期望的结果，但我认为我需要以某种方式更新现有的`LocNo column`或以其他方式将其放入新列中以供前向使用。

我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T21:04:08.020

试试这个

```
UPDATE TableName
SET LocNo =  CONVERT(INT, LocNo) 
```

如果您想要新列，请将新列添加到表中，然后进行更新

```
ALTER TABLE TableName
ADD NewCol Int Null

UPDATE TableName
SET NewCol =  CONVERT(INT, LocNo) 
```

选择并附加到 varchar 时，您可以执行

```
SELECT CAST(LocNO As VARCHAR) + Name as NameAppended From TableName 
```

如果你想`0's`回来`LocNo/newCol`

```
 SELECT right('00000' + CAST(LocNO As VARCHAR),0) + Name as NameAppended 
 From TableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:55:48.897

```
UPDATE YourTable
SET LocNo =  CONVERT(INT, LocNo) 
```

# android - 无法运行 AVD（模拟器）

> ID：14246267
> 
> 赞同：4
> 
> 时间：2013-01-09T20:53:07.220
> 
> 标签：android, android-emulator, avd

当我在 AVD 管理器中创建并启动模拟器时。我收到以下错误：

```
Starting emulator for AVD 'test_AVD'
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB 
```

请不要将此帖子标记为`duplicate`. 我已经检查了所有类似的帖子。他们每个人都提出了完全不同的解决方案。但他们都没有为我工作。谁能帮我解决这个问题？

我正在使用：Win7

我从这里下载了 ADT Bundle：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

## 编辑：

这是我的 AVD 设置：

![在此处输入图像描述](../Images/98afe861b987314d24419ecfedef2bc5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:59:13.443

我曾经在我的模拟器上遇到问题，我做的最好的事情就是在一个工具包中重新安装 eclipse 的捆绑包......

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

我建议你只下载（我认为不需要安装）这个捆绑包 - 它有你需要的一切（模拟器，sdk，...）

祝你好运先生:)

这些是我在 AVDmanager 中的属性。 ![在此处输入图像描述](../Images/1b395591c3f553f91cd5a27dca59f037.png)

![在此处输入图像描述](../Images/71db289d1958f394eaa4400c33f19035.png)

希望这会有所帮助。让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T09:56:25.427

只需在打开您的 android studio 之前手动打开您的模拟器。我建议你使用 nox android 模拟器或 genymotion。

# ios - Facebook Graph API 今天更改了 /posts 的结果？

> ID：14246271
> 
> 赞同：2
> 
> 时间：2013-01-09T20:53:12.263
> 
> 标签：ios, facebook-graph-api

我有一个 iOS 应用程序，几个月来一直在使用“/me/posts”获取用户的 Facebook 状态更新和位置检查。在今天的“重大更改”更新之后，“/me/posts”只返回最近的“赞”。看起来“/me/statuses”和“/me/checkins”是检查这些东西的新位置。我想这是有道理的，但我在任何地方都没有看到任何描述这些变化或说它们会在今天发生的文档。有关从图形 API 专门返回的内容的原始文档似乎也很精简。

所以我的问题是：这是对 API 的官方更改吗？它是在哪里指定的？我应该往哪里看，这样我才能掌握这些事情，而不会让数百名用户的应用中断？

也许更重要的是：“/me/statuses”和“/me/checkins”是获取这些信息的新方法吗？或者还有别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:57:32.447

始终保持（敏锐）关注[开发者路线图](http://developers.facebook.com/roadmap/)是一件好事。这些类型的更改经常发生，但 FB*通常*会很好地提前调用它们。你已经回答了你自己的问题，它是否是“官方”的变化——你在野外看到它——就 Facebook 的运作方式而言，它是官方的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:29:53.337

更新：我发现了一些问题所在。在 Facebook 的应用配置文件中，选择“编辑设置”，然后转到“高级”，您将看到一个名为“迁移”的部分。这主要是用于显示对各种“重大更改”更新的兼容性的开关，但它还包括“包含带有状态的签入”的选项。

现在我知道在哪里看，事情变得更有意义了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:33:50.540

尝试使用 Graph API Explorer。这可能是访问令牌问题。

仅供参考：我在我的应用程序中看到了类似的问题，只有当我使用 Graph API Explorer 和从那里获得的令牌时，我才能检索帖子。

# javascript - 当子控制器修改父范围变量时，它们不会在视图中更新

> ID：14246274
> 
> 赞同：0
> 
> 时间：2013-01-09T20:53:25.747
> 
> 标签：javascript, angularjs

这个问题的 jsFiddle 可以在这里找到：http: [//jsfiddle.net/Hsw9F/1/](http://jsfiddle.net/Hsw9F/1/)

*JavaScript*（[jsFiddle](http://jsfiddle.net/Hsw9F/1/)`console.log`中提供的调试信息）

```
var app = angular.module('StackOverflow',[]);

function ParentController($scope) {
 $scope.parentCounter = 5;
}

function ChildController($scope) {
  $scope.childCounter = $scope.parentCounter;
  $scope.increaseCounters = function() {
    ++$scope.parentCounter;
    ++$scope.childCounter;
  };
} 
```

在上面的示例中，我在父控制器和子控制器中有一个计数器，分别命名为`parentCounter`and `childCounter`。我还在名为的子控制器中提供了一个函数，`increaseCounters()`它将两个计数器都加一。

这两个计数器都显示在页面上：

```
<div ng-app="StackOverflow">
  <div ng-controller="ParentController">

    Parent Counter: {{parentCounter}}<br />

    <div ng-controller="ChildController">
      Child Counter: {{childCounter}}<br />
      <a href="javascript:void(0)"
         ng-click="increaseCounters()">Increase Counters</a>
    </div><!-- END ChildController -->

  </div><!-- END ParentController -->
</div><!-- END StackOverflow app --> 
```

问题是 AngularJS 似乎没有更新`{{parentCounter}}`页面上的，并且只在`{{childCounter}}`调用增加计数器函数时更新。有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:04:08.930

`++$scope.parentCounter;`创建一个子范围属性，其名称`parentCounter`隐藏/隐藏同名的父范围属性。

添加`console.log($scope);`到您的 increaseCounters() 函数以查看它。

一种解决方法：`++$scope.$parent.parentCounter;`

您遇到的问题与 JavaScript 原型继承的工作方式有关。我建议阅读[AngularJS中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)-- 它有一些很好的图片来解释在子作用域中创建原语时会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:15:37.537

因为子控制器获得了父计数器值的副本。如果要增加父控制器的计数器值，需要在父控制器上执行一个函数：

```
function ParentController($scope) {
 $scope.parentCounter = 5;

  $scope.increaseParent = function() {
     ++$scope.parentCounter;
  };
}

function ChildController($scope) {
  $scope.childCounter = $scope.parentCounter;
  $scope.increaseCounters = function() {
    console.log('-------------------------------------');
    console.log('parent before: ' + $scope.parentCounter);
    console.log('child before: ' + $scope.childCounter);
    $scope.increaseParent();
    ++$scope.childCounter;
    console.log('parent after: ' + $scope.parentCounter);
    console.log('child after: ' + $scope.childCounter);
  };
} 
```

# php - WHMCS 插件模块管理部分模板

> ID：14246279
> 
> 赞同：4
> 
> 时间：2013-01-09T20:53:56.633
> 
> 标签：php, smarty, whmcs

我在开发人员文档中的任何地方都找不到它，但它确实暗示了在管理插件模块的 _output 函数中我可以调用模板文件的事实。

我该怎么做呢？我想调用一个模板文件以从模块目录中进行最终输出，以在其中显示我的内容。

顺便说一句，WHMCS v5.1.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:37:16.810

如果我们`get_defined_constants()`在我们的插件模块中使用，我们会看到，例如：

```
[SMARTY_DIR] => /var/www/vhosts/domain.com/httpdocs/whmcs/includes/smarty/
[SMARTY_CORE_DIR] => /var/www/vhosts/domain.com/httpdocs/whmcs/includes/smarty/internals/
[SMARTY_PHP_PASSTHRU] => 0
[SMARTY_PHP_QUOTE] => 1
[SMARTY_PHP_REMOVE] => 2
[SMARTY_PHP_ALLOW] => 3 
```

这意味着 Smarty 已经在管理区域初始化。剩下的就是创建我们的模板文件并包含它们（`templates`如果你想保持一个聪明的标准，在你的插件文件夹的子目录中）。

`_output`为您的函数修改以下内容：

```
$smarty = new Smarty();
$smarty->assign('myvar', 'World');
$smarty->caching = false;
$smarty->compile_dir = $GLOBALS['templates_compiledir'];
$smarty->display(dirname(__FILE__) . '/templates/mytemplate.tpl'); 
```

剩下的就是你的模板文件的内容`mytemplate.tpl`，但你已经知道这部分了......

```
<p>Hello {$myvar}!</p> 
```

# jquery - 使用内联 RowAdd 或 RowSave 上的 MVC 重新加载数据和 afterSubmit、aftersavefunc 函数在 jqGrid 中不起作用

> ID：14246280
> 
> 赞同：1
> 
> 时间：2013-01-09T20:53:56.997
> 
> 标签：jquery, asp.net-mvc-3, jqgrid, inline-editing

我正在使用 jqGrid 并进行内联编辑和行添加。我正在使用 Javascript 和 MVC 在客户端设置所有内容，使用 C# 作为服务器端代码。一切似乎都工作正常，除非内联保存和添加行函数从服务器返回。如果保存失败或出错，客户端似乎仍然不知道响应。我设置了一些基本函数来处理 afterSubmit、afterSave 等，但它工作的唯一实例是刷新操作。每当我编辑或添加一行时，响应似乎没有回来，网格也没有刷新。

我在此找到的所有内容都是处理此问题的网格的基本设置，但我担心我可能没有返回正确的响应，或者我的某些功能设置不正确。我已经阅读了 wiki 文档和 Trirand 论坛中的几篇帖子，但信息中的空白让我遇到了同样的问题。

只是为了清楚编辑和添加工作正常，手动刷新等也是如此。唯一的问题是从服务器返回响应并在编辑完成后重新加载网格中的数据。

这是我与网格和功能相关的客户端代码：

我的后续功能：

```
var actionAfterSubmit = function (response, postdata) {
    var res = response.responseText;
    alert('In actionAfterSubmit');
    return [true, ''];
};

var actionbeforeSubmit = function (response, postdata) {
    //var res = response.responseText;
    alert('In beforeSubmit');
    return true;
};

var actionAfterSave = function (rowid, response) {
    alert('In actionAfterSave');
};

var actionErrorFunc = function (rowid, response) {
    alert('In actionErrorFunc');
};

var actionSuccessFunc = function (response) {
    alert('In actionSuccessFunc');
    return true;

}; 
```

我的网格：

```
jQuery("#list").jqGrid({
        url: ServiceURL + '/Controller/GetDataAction', //URL that loads data including search functionality
        datatype: 'json',
        mtype: 'GET',
        postData: { tableName: t_Name },
        editData: { tableName: t_Name },
        colModel: col_model, //col_model is passed as parameter
        pager: jQuery('#pager'), //sets pager name
        rowNum: 20, //default number of rows
        rowList: [10, 20, 50, 100], //number of row options
        sortname: 'id', //sorting columns
        sortorder: "asc", //sorting order
        viewrecords: true,
        altRows: true, //enables different styling for alternate rows
        altclass: 'myAltRowClass', //Alternate row styling
        width: "100%",
        height: "100%",
        caption: '',
        navigator: true, //enables navigator toolbar
        multipleSearch: true, //enables multiple search features
        multipleGroup: true, //enables grouping in multiple search
        editurl: ServiceURL + '/Controller/GridSaveAction' //URL that handles edit (insert & update) }); var editOptions = {
        width: 400,
        height: 'auto',
        addCaption: "Add Record",
        editCaption: "Edit Record",
        bSubmit: "Submit",
        bCancel: "Cancel",
        bClose: "Close",
        saveData: "Data has been changed!",
        bYes: "Yes",
        bNo: "No",
        bExit: "Cancel",
        recreateForm: true,
        url: ServiceURL + '/ICMP/MapTable/GridSave/',
        reloadAfterSubmit: true,
        closeOnEscape: true,
        closeAfterEdit: true,
        viewPagerButtons: false,
        afterSubmit: actionAfterSubmit,
        afetrsavefunc: actionAfterSave,
        reloadAfterSubmit: true,
        datatype: 'json'

    }; 
```

我的参数和其他网格设置：

```
var addOptions = {
        afterSubmit: actionAfterSubmit,
        aftersavefunc: actionAfterSave,
        errorfunc: actionErrorFunc,
        successfunc: actionSuccessFunc,
        afterComplete: refreshTableAfterAddOrEdit,
        reloadAfterSubmit: true

    };  

var addParameters = {
        useFormatter: true,
        defaultValue: "",
        useDefValues: true,
        initdata: { tableName: t_Name },
        addRowParams: editOptions,
        reloadAfterSubmit: true  };      

var inlineParameters = {
        edit: false,
        editicon: "ui-icon-pencil",
        save: false,
        saveicon: "ui-icon-disk",
        cancel: false,
        cancelicon: "ui-icon-cancel",
        add: true,
        addicon: "ui-icon-plus",
        addParams: addParameters,
        editParams: editOptions,
        reloadAfterSubmit: true,
        restoreAfterSelect: false            
    };

jQuery("#list").jqGrid('navGrid', '#pager', { view: true, edit: true, add: false, del: false, refresh: true, search: true }, editOptions, addParameters, {}, searchOptions, viewOptions);

jQuery("#list").jqGrid('inlineNav', '#pager', inlineParameters);

jQuery("#list").jqGrid('filterToolbar', {
        stringResult: true, searchOnEnter: false, defaultSearch: "cn",
        beforeSearch: function() {
            $("#list").setGridParam({ postData: { _search: true, tableName: t_Name } });
        }    
    });

jQuery("#list").jqGrid('addRow', {
        useFormatter: true,
        useDefValues: true,
        initdata: { tableName: t_Name },
        addRowParams: addParameters
    }); 
```

这是我的控制器

```
public JsonResult GridSaveAction(string id, jqGridMapTableModel MapRecord, string tableName, FormCollection formCollection, string someVal)
    {
        //Does some things
        try
        {                
          //Sets up update 
          success = DataAccessObject.Update(Query, myParameters); //Runs the update and returns true if success or false if it failed

        }
        catch (Exception ex) {
             return Json(ex.Message);    
        } 
        return Json(success ? "Operation succesful." : "Operation failed.");
    } 
```

我一直在尝试我能找到的一切，但没有任何效果，而且我认为我的代码的某些部分是错误的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:11:08.323

Finally figured out the missing piece of the puzzle!! When using inline editing and the Action buttons column, the **onSuccesss**, **onError** and **afterSave** functions MUST be hard coded into the column model for the grid.

In my case I was using the "Actions" column in the grid to house the edit functionality with a button. This is the button with the pencil icon that enables the inline edit.

This column uses the `formatter = "actions"` and has its `EditActionIconsColumn = true`. I had to define the

```
formatoptions ={
afterSave: function (rowid) { $("#grid").trigger("reloadGrid"); }, 
...
} 
```

all of this is defined in the column model for my "Actions" column only.

The jQGrid script uses only these methods when doing the inline editing through these buttons and ignores any other places where you may have set up this functionality.

That's it. No other complicated code, no manual coding of the inline save functionality. Any other code may be implemented here as well as any of the other functionality like onError or onSuccess.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:45:47.263

当您处理返回 Json 消息的异常时，您的“actionErrorFunc”不会被调用。尝试抛出异常并查看是否会触发该函数。

这是一个示例：

```
private ActionResult ReturnJson(String msg)
{
    Response.StatusCode = (Int32)HttpStatusCode.BadRequest;
    return Content(msg, MediaTypeNames.Text.Plain);
}

public ActionResult Delete(Int32 id)
{
    string success = "ok";
    try
    {
        //code to delete         
    }
    catch (Exception ex)
    {
        return ReturnJson(ex.Message);
    }
    return Json(success);
} 
```

# objective-c - 带有阴影的 NSTextView

> ID：14246289
> 
> 赞同：0
> 
> 时间：2013-01-09T20:54:40.417
> 
> 标签：objective-c, cocoa, nstextview, foundation

我正在尝试为`NSTextViews`字符串添加一个漂亮的阴影，到目前为止我有这个代码：

```
NSShadow *textShadow = [[NSShadow alloc] init];
textShadow.shadowColor = [[NSColor blackColor]
                              colorWithAlphaComponent:0.3];
textShadow.shadowOffset = NSMakeSize(5.0, -5.0);
textShadow.shadowBlurRadius = 3;

NSDictionary *d = @{NSShadowAttributeName : textShadow,
                          NSFontAttributeName : [NSFont fontWithName:@"Arial Black" size:36.0],
                   NSStrokeWidthAttributeName : [NSNumber numberWithFloat:-3.0],
                   NSStrokeColorAttributeName : [NSColor whiteColor]};
[tv setTypingAttributes:d]; 
```

总而言之，这会在字符串的右侧和底部产生一个漂亮的阴影，`NSTextView`但是因为 textview 的内部绘图机制似乎首先绘制字符的“填充”，然后在它周围绘制笔划，阴影位于字符左上角的文本填充上方，如您[在此处](http://miradorn.draco.uberspace.de/Test.jpeg)看到的那样看起来非常糟糕（将发布图像但现在没有足够的声誉 8-/）

有没有更好的方法来添加阴影或“提高”字符串的填充颜色，使其位于阴影之上，或者这种类型的基础框架中的错误？

谢谢和问候，亚历克斯。

# python - Python subprocess.call 阻塞

> ID：14246292
> 
> 赞同：7
> 
> 时间：2013-01-09T20:54:49.177
> 
> 标签：python

我正在尝试使用 subprocess.call 在 Python 中运行外部应用程序。从我读到的内容来看，除非您调用 Popen.wait，否则 subprocess.call 不应该阻塞，但对我来说，它会阻塞直到外部应用程序退出。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:56:56.363

您正在阅读错误的文档。根据他们：

```
subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False) 
```

运行 args 描述的命令。等待命令完成，然后返回 returncode 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:01:53.457

里面的代码`subprocess`实际上非常简单易读。只需查看[3.3](http://hg.python.org/cpython/file/3.3/Lib/subprocess.py)或[2.7](http://hg.python.org/cpython/file/2.7/Lib/subprocess.py)版本（视情况而定），您就可以知道它在做什么。

例如，`call`看起来像这样：

```
def call(*popenargs, timeout=None, **kwargs):
    """Run command with arguments.  Wait for command to complete or
    timeout, then return the returncode attribute.

    The arguments are the same as for the Popen constructor.  Example:

    retcode = call(["ls", "-l"])
    """
    with Popen(*popenargs, **kwargs) as p:
        try:
            return p.wait(timeout=timeout)
        except:
            p.kill()
            p.wait()
            raise 
```

您可以在不调用`wait`. 创建一个`Popen`，不要调用`wait`它，这正是你想要的。

# php - 你如何验证日期格式？

> ID：14246293
> 
> 赞同：0
> 
> 时间：2013-01-09T20:54:49.610
> 
> 标签：php, date

我希望我的用户能够将日期格式更改为他们喜欢的任何格式：

```
$dateformat = $_POST['format'];
$datestamp = date($dateformat,$timestamp); 
```

如何检查是否`$dateformat`是正确有效的日期格式字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:02:43.457

```
if( strtotime($_POST['format']) !== FALSE)
{
    echo 'valid date';
}
else
{
   echo 'invalid date';
} 
```

但不适用于当前 PHP 中未定义的年份 > 2048 的日期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:02:58.410

[如果您决定坚持使用某种格式， checkdate()](http://php.net/manual/en/function.checkdate.php)将告诉您是否可以解析日期：

[strtotime()](http://php.net/manual/en/function.strtotime.php)将让您知道是否可以解析日期字符串 - 您可以将任何字符串传递给它。如果无法解析日期，则该函数返回 false。

作为旁注：我不会让用户选择如何输入日期。显然，这会让您变得非常复杂 - 但作为用户，我也会问自己应该如何输入日期，因为大多数用户将习惯于有关日期的说明。为什么不为他们提供一个简单的年、月和日期下拉菜单，然后将这三个参数与 checkdate() 一起使用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:59:25.123

[我建议您为您的用户提供各种日期](http://php.net/manual/en/function.date.php)格式的选择下拉菜单，然后将其存储在数据库中。然后，您可以提取他们选择的格式并将其插入`date()`函数的第一个参数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:11:54.443

这是一个正则表达式实现：

```
$input = 'M d Y';
if(preg_match('#(dd|DD|m|M|mm|MM|y|yy|YY|-|\s)+#', $input)) {
    $valid = true;
    print date($input);
} else {
    print "invalid date format";
} 
```

它假定允许使用空格字符和短划线字符。

它指定此处列出的标志：http: [//php.net/manual/en/datetime.formats.date.php](http://php.net/manual/en/datetime.formats.date.php)

更多信息：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T21:02:40.243

查看 Zend_Date，但不知道将 06-03-2012 解释为 3 月 6 日或 6 月 3 日，这是不可能的。

你知道？12/12/12 是日期，欧洲人和美国人可以毫无误解地谈论这一天；-)

# vb.net - 尽管我的 oracle 服务器的时间戳在不同客户端上的格式不同，但存在问题

> ID：14246300
> 
> 赞同：0
> 
> 时间：2013-01-09T20:55:13.183
> 
> 标签：vb.net, oracle, datetime, timestamp, driver

vb.net 客户端以不同方式解释来自我的 oracle 11g 服务器的时间戳存在问题。我在客户端机器上使用 VS2010、VB.NET、11.2.0.30 驱动程序、Win XP。

两台机器上的软件相同，用户在服务器上的权限相同。

当我使用每个用户凭据通过 toad 登录并执行 SELECT SYSDATE FROM DUAL 时；我得到 YYYY-MM-DD HH24:MI:SS 格式。

当我从 DUAL 中执行 SELECT SYSDATE 时，通过我的应用程序；PC1: DD/MM/YYYY HH24:MI:SS PC2: YYYY-MM-DD HH24:MI:SS

我确实更改了我的服务器端设置以使用 YYYY-MM-DD 24HH:MI:SS 格式 为什么该设置仅在某些电脑上被否决？我怎样才能让所有客户都保持一致？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:16:49.830

每个客户端都有自己的[`NLS_DATE_FORMAT`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006817)设置，这些设置可能设置在某个可见的地方（例如在 Toad 中），或者可能由平台或驱动程序默认设置，并且可能通过语言环境设置间接继承。`NLS_TIMESTAMP_FORMAT`我认为默认情况下被覆盖的情况不太常见，但我不确定您指的是 Oracle`TIMESTAMP`还是`DATE`，它也有一个时间组件。

客户端设置总是覆盖服务器设置，因此更改服务器不太可能有帮助，并且您可能只有一些客户端已经设置了匹配的格式。在会话级别使用`alter session`命令连接后，客户端设置本身可以被显式覆盖，或者在 SQL 语句中单独覆盖。优先级显示在[全球化支持指南](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1005949)中。

一般来说，您永远不应该依赖隐式数据转换。除了简单的即席查询之外，通常使用明确的[日期格式](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#autoId2)掩码选择日期进行显示，例如`select to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') from dual`. 如果您的应用程序希望以特定格式返回日期（作为字符串），那么这样做会更安全……尽管通常您会`DATE`退回并让客户端进行格式化。

可以说，在通过调用从字符串中插入数据时始终指定格式掩码更为重要`to_date()`，但您的客户端通常会再次处理该问题并传递`DATE`.

# google-app-engine - 在 Google App Engine 的目录中设置带有类的 Python 脚本模块

> ID：14246301
> 
> 赞同：0
> 
> 时间：2013-01-09T20:55:14.007
> 
> 标签：google-app-engine, python-2.7

我的问题类似于[google app engine app.yaml url handlers](https://stackoverflow.com/questions/8147062/google-app-engine-app-yaml-url-handlers/9408925#comment19767116_9408925)。但不知何故，我的问题包括课程。

我最近才`customers.py`调到`resources/customers.py`. `customers.py`包含一个名为`CustomersResources`. 这是 app.yaml 配置：

```
- url: /resources/customers
  script: resources.CustomersResources.app 
```

我收到以下错误：

```
ImportError('%s has no attribute %s' % (handler, name)) 
ImportError: <module 'resources' from 'C:\xampp\htdocs\pawnsoftware\trunk\pawnsoftware-0.0.1\resources.pyc'> has no attribute CustomersResources 
```

**编辑：**

由于我与`resources`目录和`resources.py`. 我决定`resources.py`从根目录中删除该文件。现在，我有以下错误。

```
ImportError: No module named resources 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:14:49.480

您的班级名称是`resources.customers.CustomersResources`，并且您的应用程序是在`resources.customers`模块中定义的，因此它将是`resources.customers.app`.

编辑以反映相关更改：您似乎同时拥有资源文件夹和`resources.py`文件。他们不能共存。在您的资源文件夹中，您需要一个`__init__.py`文件。

# android - Android缓存文件与下载

> ID：14246302
> 
> 赞同：1
> 
> 时间：2013-01-09T20:55:21.127
> 
> 标签：android, caching, file-management

在我的旅行应用程序中，它依赖于很多图像。我已经实现了一个延迟加载器和图像缓存。所有目的地的图像总共接近 20mb。如果用户想要下载所有图像以便他仍然可以离线访问应用程序。我如何确保文件的缓存适用于下载的图像文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:02:17.237

您的应用程序有两种可能性，具体取决于您想要做什么。请随时在[Android Docs](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)阅读更多相关信息。

**内部存储器**

此目录会持续存在，并且对您的应用程序是私有的。它的空间可能有限，尤其是对于旧设备。

**SD卡**

这将有更多空间，但用户和其他应用程序可以访问。您可以将信息存储在您的私人存储中以验证此数据的完整性。您需要获得写入卡的权限。

我建议您选择这两者之一，并将您的数据存储在那里。这应该从一个运行到另一个运行。也许您甚至可以包含一个将所有文件“预缓存”到适当文件夹的功能。20 Mb 并没有那么大的空间，你甚至可以将它包含在你的应用程序本身中。全取决于你。

# spotify - libspotify：注销或释放会话导致崩溃

> ID：14246304
> 
> 赞同：3
> 
> 时间：2013-01-09T20:55:29.030
> 
> 标签：spotify

这是对 dan (dan^spotify on IRC) 提议查看我的测试用例的回应，但我将其发布在这里，以防有人遇到类似问题。

我遇到了 libspotify 的问题，在这两种情况下应用程序崩溃（内存访问冲突）：

*   在调用 sp_session_logout() 函数后调用的第一个 sp_session_process_events（由通知主线程回调触发）使应用程序崩溃
*   跳过注销并调用 sp_session_release() 会使应用程序崩溃

我已经从会话回调中应用了足够的同步，否则我在单个线程上操作。

我制作了一个小测试用例，它执行以下操作：

*   创建会话
*   登录
*   等待 10 秒
*   尝试注销，然后崩溃（调用 sp_session_process_events() 时）
*   如果它成功注销（它不是），将调用 sp_session_release()

我为测试用例做了一个要点。可以在这里找到：[https ://gist.github.com/4496396](https://gist.github.com/4496396)

测试用例是使用 Qt 制作的（这是我在项目中使用的），所以你需要 Qt 5 来​​编译它。我也只考虑 Windows 和 Linux 编写它（没有 Mac）。假设您安装了 Qt 5 和 Qt Creator，说明如下：

*   下载要点
*   将 libspotify 文件夹复制到与 .pro 文件相同的文件夹中
*   将您的 appkey.c 文件复制到同一文件夹中
*   编辑 main.cpp 以使用您的用户名和密码登录
*   编辑 sessiontest.cpp 中的第 38-39 行，并根据自己的喜好设置缓存和设置路径
*   打开 .pro 文件并从 Qt Creator 运行

如果有人能告诉我我做错了什么，我将不胜感激，因为我花了很多时间尝试任何我能想到的事情或只是盯着它看，我担心我对自己的错误视而不见目前为止。

我已经在 Windows 7 和 Linux Ubuntu 12.10 上对其进行了测试，我发现了一些行为差异：

*   在 Windows 上，无论设置和缓存路径如何，测试用例都会崩溃。
*   在 Linux 上，如果将设置和缓存设置为“”（空字符串），则注销并释放会话可以正常工作。
*   在 Linux 上，如果路径是其他任何内容，则第一次运行（当文件夹不存在时）注销并按应有的方式释放会话，但在下一次运行时（当文件夹已经存在时），它会以完全相同的方式崩溃在 Windows 上可以。

另外，我可以报告 sp_session_flush_caches() 不会*导致*崩溃。

编辑：另外，IRC 上的 hugo___ 很友好地为我在 OSX 上进行了测试。尽管连续多次运行该应用程序，但他没有报告任何崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T07:25:54.863

我注意到，如果您在调用 sp_session_release 时正在播放曲目，则会在 sp_session_release 上崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:08:18.300

虽然您很可能正在查看 libspotify 中的错误，但我想指出一个可能多余的调用`sp_session_process_events()`，来自我从查看您的代码中收集的内容。

```
void SessionTest::processSpotifyEvents()
{
  if (m_session == 0)
  {
    qDebug() << "Process: No session.";
    return;
  }
  int interval = 0;
  sp_session_process_events(m_session, &interval);
  qDebug() << interval;
  m_timerId = startTimer(interval);
} 
```

似乎这段代码将获取该`interval`值并在其上启动一个计时器以触发对`event()`. 但是，这段代码也会`startTimer`在间隔为 0 时调用，这完全没有必要，或者更确切地说，意味着应用程序可以继续做其他事情，直到它得到`notify_main_thread`回调。上的文档`startTimer`说“如果间隔为0，则每次没有更多窗口系统事件要处理时，计时器事件就会发生一次。”。我不确定这到底是什么意思，但它似乎可以产生至少一个对`sp_session_process_events()`.

[http://qt-project.org/doc/qt-4.8/qobject.html#startTimer](http://qt-project.org/doc/qt-4.8/qobject.html#startTimer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-30T11:05:02.977

在您的“登录”libspotify 回调中添加以下调用似乎可以修复此崩溃[，如此 SO 帖子中](https://stackoverflow.com/a/14673535/1534401)所述：

`sp_session_playlistcontainer(session);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T06:41:29.930

我今天一直在追这个问题。登录/注销在 Mac 上工作得很好，但正如你在 Windows 上描述的那样，这个问题是 100% 可重复的。

`offline_status_updated`通过为and注册空回调`credentials_blob_updated`，崩溃消失了。这是一个非常不令人满意的修复，我想知道是否有任何**libspotify**开发人员想对此发表评论。

在我的应用中注册的回调是：

*   `logged_in`
*   `logged_out`
*   `notify_main_thread`
*   `log_message`
*   `offline_status_updated`
*   `credentials_blob_updated`

我应该明确指出，我没有*在*您提供的代码上尝试此操作。知道添加这两个额外的回调是否适合您会很有趣。请注意，我提供的功能完全没有任何作用。当您创建会话时，他们只需要在那里并进行注册。

# encryption - 在不同编程语言之间传递加密数据的最佳实践

> ID：14246307
> 
> 赞同：3
> 
> 时间：2013-01-09T20:55:50.163
> 
> 标签：encryption, language-agnostic

我已经读过，如果您想使用一种编程语言加密字符串并使用另一种编程语言解密该字符串，那么为了确保兼容性，最好在进行加密之前进行一些转换。我已经读过加密字符串的字节数组而不是字符串本身是最佳实践。另外，我读过某些加密算法期望每个加密数据包的大小是固定的。如果要加密的最后一个数据包不是所需的大小，则加密将失败。因此，对首先转换为固定长度（例如十六进制）的数据进行加密似乎是个好主意。

无论使用何种加密算法，我都试图找出通常有用的最佳实践。为了在跨不同语言和平台加密和解密数据时最大限度地提高兼容性，我想对以下步骤作为一个过程进行批评：

**加密：**

*   以纯文本字符串开头
*   将纯文本字符串转换为字节数组
*   将字节数组转换为十六进制
*   将十六进制加密为加密字符串
*   以加密字符串结尾

**解密：**

*   以加密字符串开头
*   将加密字符串解密为十六进制
*   将十六进制转换为字节数组
*   将字节数组转换为纯文本字符串
*   以纯文本字符串结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:13:53.757

你的前提是正确的，但在某些方面它比这更容易一些。现代加密算法旨在与语言无关，如果您有*相同*的输入和*相同*的密钥，您应该得到*相同*的结果。

确实，对于大多数密码和[某些模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)，数据需要是固定长度的。转换为十六进制不会这样做，因为数据需要在固定边界上结束。以 AES 为例，如果要加密 4 个字节，则需要将其填充到 16 个字节，而十六进制表示则无法做到这一点。幸运的是，这很可能发生在您最终使用的加密 API 中，其中一种是标准[填充方案](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)。由于您没有标记语言，因此[这里列出](http://msdn.microsoft.com/en-us/library/system.security.cryptography.paddingmode.aspx)了 .NET 中的 AesManaged 类支持的填充模式。

另一方面，正确加密数据需要的不仅仅是字节编码。您需要选择正确的操作模式（首选 CBC 或 CTR），然后提供某种类型的[消息完整性](http://en.wikipedia.org/wiki/Message_authentication_code)。单独的加密并不能防止数据被篡改。如果你想稍微简化一下，那么看看像[GCM](http://en.wikipedia.org/wiki/Galois/Counter_Mode)这样的模式，它同时处理机密性和完整性。

您的方案应如下所示：

*   将纯文本转换为字符串到字节数组。有关字符编码的重要说明，请参阅@rossum 的评论。
*   生成随机对称密钥或使用[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)将密码转换为密钥
*   生成用于 GCM 的随机 IV/nonce
*   加密字节数组并将其与身份验证标签一起存储
*   您可能希望将字节数组存储为[Base64 字符串](http://msdn.microsoft.com/en-us/library/system.convert.tobase64string.aspx)。

对于解密：

*   如果您将字节数组存储为 Base64 字符串，请[转换回](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)字节数组。
*   将加密的字节数组解密为明文
*   验证生成的身份验证标签与存储的身份验证标签匹配
*   将字节数组转换为纯文本字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:16:33.250

实际上，加密的最佳实践是使用高级加密框架，使用原语可能会做很多错误的事情。如果您不使用高级加密框架，mfanto 可以很好地提及您需要知道的重要事项。我猜如果你想最大化跨编程语言的兼容性，那是因为你需要其他开发人员与加密进行互操作，然后他们也需要学习使用加密的低级细节。

所以我对高级框架的建议是使用 Google [Keyczar](http://keyczar.org)框架，因为它为您处理算法、密钥管理、填充、iv、身份验证标签、有线格式的所有细节。它存在于许多不同的编程[Java、Python、C++](http://code.google.com/p/keyczar/)、[C#](http://jbtule.github.com/keyczar-dotnet/)和[Go](http://github.com/dgryski/dkeyczar/)中。一探究竟。

我编写了 C# 版本，所以我可以告诉你它在幕后使用的原语在大多数其他编程语言中也广泛使用，并且它使用 json 等标准进行密钥管理和存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-12T16:42:21.630

我为此目的使用[HashIds 。](https://hashids.org/)它很简单并且支持广泛的编程语言。每当我们需要解密目标中的数据时，我们都会使用它在我们的 PHP、Node.js 和 Golang 微服务之间传递加密数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:10:38.397

> 我已经读过加密字符串的字节数组而不是字符串本身是最佳实践。

加密算法通常适用于字节数组或字节流，所以是的。您不直接加密对象（字符串），而是加密它们的字节表示。

> 另外，我读过某些加密算法期望每个加密数据包的大小是固定的。如果要加密的最后一个数据包不是所需的大小，则加密将失败。

这是您选择的特定加密算法的实现细节。这实际上取决于算法的 API 接口是什么。

一般来说，是的，加密算法会将输入分解为固定大小的块。如果最后一个块未满，那么他们可能会用任意字节填充末尾以获得完整块。为了区分填充数据和恰好在末尾具有看起来像填充字节的数据，它们会将纯文本的长度预先或附加到字节流中。

这是不应该留给用户的那种细节，一个好的加密库会为你处理这些细节。理想情况下，您只想输入纯文本字节并在另一端获取加密字节。

> 因此，对首先转换为固定长度（例如十六进制）的数据进行加密似乎是个好主意。

将字节转换为十六进制不会使其长度固定。它的大小加倍，但这不是固定的。它使它成为 ASCII 安全的，因此它可以很容易地嵌入到文本文件和电子邮件中，但这与这里无关。（而且 Base64 是比十六进制更好的二进制→ASCII 编码。）

> 为了确定确保与跨不同语言和平台加密和解密数据的兼容性的最佳实践，我想对以下步骤作为一个过程进行批评：
> 
> **加密：**
> 
> *   纯文本字符串
> *   将纯文本字符串转换为字节数组
> *   ~~将字节数组转换为十六进制~~
> ~~*   将十六进制加密为加密字符串~~
> *   ~~加密字符串~~
> *   纯文本字节数组到加密字节数组
> 
> **解密：**
> 
> *   ~~加密字符串~~
> ~~*   将加密字符串解密为十六进制~~
> *   ~~将十六进制转换为字节数组~~
> *   加密字节数组
> *   将加密字节数组解密为纯文本字节数组
> *   将字节数组转换为纯文本字符串
> *   纯文本字符串

要加密，请将纯文本字符串转换为其字节表示，然后加密这些字节。结果将是一个加密的字节数组。

以您选择的方式将字节数组传输到其他程序。

要解密，请将加密的字节数组解密为纯文本字节数组。从这个字节数组构造你的字符串。完毕。

# database - Redis - Pub/Sub 内部结构

> ID：14246308
> 
> 赞同：0
> 
> 时间：2013-01-09T20:55:52.547
> 
> 标签：database, node.js, redis, socket.io

我编写了一个小型 Socket.IO 服务器，它工作正常，我可以连接到它，我可以发送/接收消息，所以一切正常。此处仅提供代码的相关部分：

```
var RedisStore = require('socket.io/lib/stores/redis');
const pub = redis.createClient('127.0.0.1', 6379);
const sub = redis.createClient('127.0.0.1', 6379);
const store = redis.createClient('127.0.0.1', 6379); 

io.configure(function() {
  io.set('store', new RedisStore({
    redisPub    : pub, 
    redisSub    : sub, 
    redisClient : store
  }));
});

io.sockets.on('connection', function(socket) {
 socket.on('message', function(msg) {
    pub.publish("lobby", msg);
  });

  /*
   * Subscribe to the lobby and receive messages.
   */
  var sub = redis.createClient('127.0.0.1', 6379);
  sub.subscribe("lobby");
  sub.on('message', function(channel, msg) {
    socket.send(msg);
  });
}); 
```

在这里，我对某个客户端订阅不同房间的问题感兴趣，这就是为什么我也在每个套接字连接中使用 sub Redis 变量：因为每个客户端都可以订阅不同的房间并且可以接收消息从那里。我不完全确定上面的代码是否正常，所以请让我知道除了在 Socket.IO 连接中定义子 Redis 连接之外是否需要做任何其他事情：这也意味着为每个生成一个新的 Redis 连接客户端连接从订阅的房间提供他的消息？我想这是一个相当大的开销，所以我想无论如何都想解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:59:11.447

node.js 和 redis 都非常擅长处理大量连接（数千个没问题），所以你做的很好。

附带说明一下，如果您确实打算支持数千个连接，则需要考虑提高文件描述符限制。

# php - 使用 preg_match_all 的嵌套模式匹配（正则表达式和 PHP）

> ID：14246310
> 
> 赞同：0
> 
> 时间：2013-01-09T20:55:59.263
> 
> 标签：php, regex

我正在处理包含“{X}”或“{XX}”形式的特殊标志的文本数据，其中 X 可以是任何字母数字字符。当它们相邻或分开时，这些标志被赋予特殊含义。我需要一个正则表达式，它将匹配相邻的标志并分隔组中的每个标志。

例如，给定以下输入：

```
{B}{R}: Target player loses 1 life.
{W}{G}{U}: Target player gains 5 life. 
```

输出应该是近似的：

```
("{B}{R}",
 "{W}{G}{U}")

("{B}",
 "{R}")

("{W}",
 "{G}",
 "{U}") 
```

我的 PHP 代码正确返回了相邻数组，但拆分数组仅包含每组中的最后一个匹配标志：

```
$input = '{B}{R}: Target player loses 1 life.
{W}{G}{U}: Target player gains 5 life.';
$pattern = '#((\{[a-zA-Z0-9]{1,2}})+)#';
preg_match_all($pattern, $input, $results);
print_r($results); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => {B}{R}
            [1] => {W}{G}{U}
        )

    [1] => Array
        (
            [0] => {B}{R}
            [1] => {W}{G}{U}
        )

    [2] => Array
        (
            [0] => {R}
            [1] => {U}
        )

) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:54:06.283

```
unset($results[1]);
foreach($results[0] AS $match){
    preg_match_all('/\{[a-zA-Z0-9]{1,2}}/', $match, $r);
    $results[] = $r[0];
} 
```

这是我所知道的创建所需数据结构的唯一方法。不过， preg_split 也可以：

```
unset($results[1]);
foreach($results[0] AS $match)
    $results[] = preg_split('/(?<=})(?=\{)/', $match); 
```

# c++ - 使用 UDP（WinSock 和 C++）发送和接收结构？

> ID：14246311
> 
> 赞同：0
> 
> 时间：2013-01-09T20:56:02.400
> 
> 标签：c++, struct, udp, winsock

我有两个程序。我需要其中一个来发送数据，另一个来接收该数据。

我有一些代码*希望*通过网络发送一个结构。

但是，我什至不知道它是否工作正常，因为我不知道如何编写接收程序来接收结构并将它接收到的数据传递到本地结构中进行操作。

这是我用来发送的代码，如果它有帮助的话

```
gamePacket.PplayerX = userSprite.x;
gamePacket.PplayerY = userSprite.y;
gamePacket.Plives = lives;
gamePacket.Pstate = state;
for(int z=0;z<8;z++)
{
    gamePacket.PenemyX[z] = enemySprite[z].x;
    gamePacket.PenemyY[z] = enemySprite[z].y;
}   

char Buffer[sizeof(gamePacket)];

UDPSocket.Send(Buffer); 
```

该结构称为 Packet，gamePacket 是它的一个实例。我坚持的是：

1.  我发布的代码甚至发送了结构吗
2.  如何在接收程序中接收结构，以便可以使用其中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:06:16.483

1.  它不发送，您只声明一个缓冲区。要发送它，您需要填写它。此外，您使用 sizeof 的方式是错误的，它可能不会返回所有字段的正确大小，您应该将它们计算在内。

2.  当你收到你做相反的一切时，你分配一个结构并使用偏移量填充它

如果您需要示例，请询问。但是学习就是做研究，所以我认为朝着正确的方向前进就足够了。（有上千个例子。）

Ps：你可以使用指针+偏移量，因为结构的内存是彼此相邻的。它是内存块，就像数组一样。

编辑; 此链接是您需要的：[通过 C 中的套接字传递结构](https://stackoverflow.com/questions/1577161/passing-a-structure-through-sockets-in-c) 编辑：使用指针的示例：编辑：这是 C# 还是 C/C++？对不起，如果是这样，请将示例更改为 C/C++ ;) '

```
struct StructExample
{
    int x;
    int y;
};

int GetBytes(struct* Struct, void* buf)
{

        //Access the memory location and store
        *(int*)(buf + 0) = Struct->x;
        *(int*)(buf + sizeof(int)) = Struct->y;
    return sizeof(Struct->x) + sizeof(Struct->y)
} 
```

Ps：我是用我的手机输入的，我不是 100% 确定它可以编译/工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T19:36:13.057

在 c 和 c++ 中，可以使用以下代码：

```
struct StructExample
{
    int x;
    int y;
};
struct StructExample a;
a->x = 1;
a->y = 2;
send(FSocket, &a, sizeof(a), 0); 
```

# c++ - glfw openGL c++ 窗口背景和标题

> ID：14246315
> 
> 赞同：0
> 
> 时间：2013-01-09T20:56:15.713
> 
> 标签：c++, opengl, glew, glfw

这是我正在查看的有关 opengl 3+ 的一系列教程的源代码。

```
//#include <stdio.h>
//#include <stdlib.h>

#include <GL/glew.h>
#include <GL/glfw.h>
#include <glm/glm.hpp>
using namespace glm;

#include <iostream>
using namespace std;

int main()
{

    if( !glfwInit() )
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }

    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4); // 4x antialiasing
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3); // We want OpenGL 3.3
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); //We don't want the old OpenGL

    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
        fprintf( stderr, "Failed to open GLFW window\n" );
        glfwTerminate();
        return -1;
    }
    else
    {
        glfwSetWindowTitle( "Tutorial 01" );
    }

    // Initialize GLEW
    glewExperimental=true; // Needed in core profile
    if (glewInit() != GLEW_OK) {
        fprintf(stderr, "Failed to initialize GLEW\n");
        return -1;
    }

    glfwEnable( GLFW_STICKY_KEYS );

    do{
        // Draw nothing, see you in tutorial 2 !

        // Swap buffers
        glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
    glfwGetWindowParam( GLFW_OPENED ) );

    return 0;
} 
```

一切都很好，除了当窗口初始化时，它的背景颜色为白色，标题为“GLFW WINDOW”，但在 1-2 秒后，标题更改为 Tutorial 01，因为它应该放在首位，背景变为黑色，也应该如此。

在我几年前做过的关于opengl（2.x）与过剩的研究中，我没有遇到这样的问题，有人可以解释这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:00:50.137

我在 ATI FirePro V5700 上得到了相同的行为（甚至在 IDE 之外运行发布 exe）。如果实在不放心，[下载GLFW源码](http://www.glfw.org/download.html)，修改carbon_window.c的第764行，win32_window.c的第1210行，x11_window.c的第962行。

.\lib\carbon\carbon_window.c

```
(void)SetWindowTitleWithCFString( _glfwWin.window, CFSTR( "GLFW Window" ) ); 
```

.\lib\win32\win32_window.c

```
_glfwWin.window = CreateWindowEx( _glfwWin.dwExStyle,    // Extended style
                                  _GLFW_WNDCLASSNAME,    // Class name
                                  "GLFW Window",         // Window title
                                  _glfwWin.dwStyle,      // Defined window style
                                  wa.left, wa.top,       // Window position
                                  fullWidth,             // Decorated window width
                                  fullHeight,            // Decorated window height
                                  NULL,                  // No parent window
                                  NULL,                  // No menu
                                  _glfwLibrary.instance, // Instance
                                  NULL );                // Nothing to WM_CREATE 
```

.\lib\x11\x11_window.c

```
_glfwPlatformSetWindowTitle( "GLFW Window" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:19:30.493

我没有遇到你描述的任何问题。我复制并粘贴，编译，然后在您发布代码时运行您的代码（注释掉对 GLM 的引用，因为我没有安装该库）。对我来说，标题会立即改变——我什至从未看到标题为“GLFW WINDOW”的窗口，并且图形区域的颜色立即变为黑色。可能是您的计算机根本不是很快吗？

如果您执行以下操作会发生什么？

```
do{
    // Draw nothing, see you in tutorial 2 !
    glClear(GL_COLOR_BUFFER_BIT);
    // Swap buffers
    glfwSwapBuffers();
    glfwSleep(0.016);
} // Check if the ESC key was pressed or the window was closed
while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS && glfwGetWindowParam( GLFW_OPENED ) ); 
```

*编辑：*我的 GPU 是 Nvidia GTX 580（至少支持 OpenGL 4.3）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:07:40.353

窗口的背景颜色通过调用 openGL 函数[glClearColor()](http://www.opengl.org/sdk/docs/man/xhtml/glClearColor.xml)配置并使用[glClear()](http://www.opengl.org/sdk/docs/man/xhtml/glClear.xml)函数刷新。

窗口标题更改的延迟可能与创建 openGL 3.x 需要创建标准 OpenGL 上下文（版本 1.x 或 2.x）然后获取您的应用程序选择加入使用 OpenGL 3.x 上下文。1-2 秒的延迟虽然看起来很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:47:20.743

好吧，它似乎与 IDE 有关，如果您运行实际的 .exe，它会按预期工作并且完全没有延迟。

# actionscript-3 - Flash 多播的错误 NetStatusEvent

> ID：14246320
> 
> 赞同：2
> 
> 时间：2013-01-09T20:56:29.430
> 
> 标签：actionscript-3, multicast, flash-media-server

我使用 actinscript 3 创建了一个简单的多播播放器，它工作正常并且可以很好地播放多播流。虽然什么时候流应该失败。或者即使我停止 Flash Media 服务器，它也会返回成功代码：“NetConnection.Connect.Success”、“NetStream.Connect.Success”和“NetStream.Play.Start”。当 Flash 播放器中的多播流失败时，我无法检测到它。如果多播失败并且由于状态错误而无法检测到失败，我需要切换到单播流。

为什么我的状态错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:40:39.920

[我终于能够从这个链接http://forums.adobe.com/message/4999537#4999537](http://forums.adobe.com/message/4999537#4999537)中弄清楚这一点。我现在使用 NetStream.MulticastStream.Reset 以及 10 秒的超时。

# postgresql - 向所有用户授予权限，当前和未来

> ID：14246322
> 
> 赞同：6
> 
> 时间：2013-01-09T20:56:43.650
> 
> 标签：postgresql, database-design, privileges

我有一个多模式、多用户的 Postgres 数据库。有一张表，我希望所有用户，无论是当前的还是未来的，都能够从中进行选择。

我可以 GRANT SELECT 给所有当前用户...但是如何创建一个允许任何未来用户选择的表？有没有办法设置表*权限*，而不是授予用户*权限*？

文件系统类比将`chmod`用于使文件可供公众阅读。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T21:03:44.813

```
grant select on the_table to public; 
```

[从手册](http://www.postgresql.org/docs/current/static/sql-grant.html)：

> *关键字 PUBLIC 表示权限将授予所有角色，包括以后可能创建的角色。PUBLIC 可以被认为是一个隐含定义的组，它始终包含所有角色*

# .net - 实体框架模型中的共享实体

> ID：14246327
> 
> 赞同：2
> 
> 时间：2013-01-09T20:57:03.933
> 
> 标签：.net, entity-framework, project, edmx

我有 3 个*（将来可能更多）*彼此完全不同的大型项目，但是它们共有大约15个以上的*表**（用户、角色、用户首选项、用户日志等）*。这些公用表上的任何更改以及实体上的更改始终适用于所有项目。

截至目前，每个项目都有一个单独的`EDMX`为每个项目*复制*这些实体。对这些公共实体或表的任何更改都需要将相同的更改复制 3 次。

有没有办法在单独的项目中定义这些实体，然后`reuse`在每个项目中定义它们？

请记住，这些共享实体与每个项目中的其他实体有关系*（这是特定于每个项目的信息）*。

我想做的是`EDMX`引用一个对象*（来自另一个 EDMX）*，而不是仅仅引用一个对象（`tables/views/sps` *据我所知这是不可能的）*。

**注意：** 我在 ADO.NET 上找到了一些较旧的博客，但到目前为止我还没有找到任何真正的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:00:26.810

我会为共享资源建立一个 API，每个需要这些资源的项目都可以使用该 API。共享资源将拥有自己的项目和这些实体的 1 个 edmx。这样，您总是对这些共享资源进行一次更改，并且所有三个都得到更新。缺点是您不能像现在这样一次引入这些更改，但是我非常赞成易于维护和减少重复代码！

我现在使用 OData 进行了类似的设置，效果很好！当然那是在 MS 推出新的 Web API 架构之前。这是一个快速教程（[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:27:40.277

您不能在不同 EF 模型的对象之间进行引用。原因是 EF 将尝试在 SQL 连接时解析关联，因此它需要所有涉及的类的映射信息。

做梦我可以想象应该可以合并模型并定义它们的类之间的关联，但是是的....

因此，在使用 edmx 时，您可以做的最好的事情是在您的项目中分别使用这两个模型，并在适用的情况下使用内存中（linq 到对象）连接。恐怕不是最高效的解决方案。

如果您可以切换到**代码优先**，您可以在一个单独的类库中拥有公共类，完成现成的`EntityTypeConfiguration`类并在您的项目中使用它们。然后就是引用通用类库，将类型配置的实例添加到`DbContext`本地项目的类中。您甚至可以将关联映射到公共类，只要外键是本地模型的一部分。（当然，您将无法将外键字段添加到共享类）。

# powershell - 无法确定工作区

> ID：14246332
> 
> 赞同：3
> 
> 时间：2013-01-09T20:57:31.580
> 
> 标签：powershell, tfs, tfs-power-tools

当我运行时在powershell中

`Get-TfsItemHistory . -Recurse -Version C13855~C14103`

我收到错误`Unable to determine the source control server.`

如果我正在运行 tfpt.exe，我可以简单地执行`tf workspaces /s:serverUrl`.

我怎样才能克服这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:21:21.603

在 PS 中运行这 4 个命令修复了问题

```
 Add-PSSnapin Microsoft.TeamFoundation.PowerShell
 $tfsServerString = "http://server:8080/tfs/optionalName"
 $tfs = get-tfsserver $tfsServerString
 Get-TfsItemHistory $/TeamProjectName -Recurse -Version C13855~C14103 -Server $tfs | fl Comment,ChangesetId,CreationDate,Committer 
```

此问题特定于 x64 窗口。

# php - 是否可以跟踪我网站上的查看者是否喜欢它？

> ID：14246334
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:57:34.913
> 
> 标签：php, javascript, facebook, web-deployment

我的目的是制作类似“用推文付款”之类的东西，但传播方式是，您只需要在获得优惠券之前喜欢该网站即可。

欢迎任何有关技术实施的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:05:34.687

订阅正确的事件，触发 AJAX 请求。

[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

类似在浏览器中运行，所以你没有机会 - 无需重新加载以检查用户是否喜欢它。

使用 PHP SDK 也是一种选择。重新加载页面（使用 JS SDK）并检查 PHP SDK 是否喜欢该页面。

用这些信息做任何你想做的事

# node.js - Socket.IO 超出最大调用堆栈大小

> ID：14246337
> 
> 赞同：2
> 
> 时间：2013-01-09T20:57:50.553
> 
> 标签：node.js, webserver, socket.io, benchmarking

我编写了一个小型 Socket.IO 服务器，它工作正常，我可以连接到它，我可以发送/接收消息，所以一切正常。此处仅提供代码的相关部分：

```
var RedisStore = require('socket.io/lib/stores/redis');
const pub = redis.createClient('127.0.0.1', 6379);
const sub = redis.createClient('127.0.0.1', 6379);
const store = redis.createClient('127.0.0.1', 6379); 

io.configure(function() {
  io.set('store', new RedisStore({
    redisPub    : pub, 
    redisSub    : sub, 
    redisClient : store
  }));
});

io.sockets.on('connection', function(socket) {
 socket.on('message', function(msg) {
    pub.publish("lobby", msg);
  });

  /*
   * Subscribe to the lobby and receive messages.
   */
  var sub = redis.createClient('127.0.0.1', 6379);
  sub.subscribe("lobby");
  sub.on('message', function(channel, msg) {
    socket.send(msg);
  });
}); 
```

我还编写了一个脚本，它连接到服务器并在 setInterval 函数中产生连接，该函数每 10 毫秒产生一个新连接，因此它产生了相当多的连接。

```
#!/usr/bin/env node

var io = require('socket.io-client');
var reconn = {'force new connection': true};
var sockets = [];

var num = 1000;

function startSocket(i) {
  sockets[i] = io.connect("http://127.0.0.1:8080", reconn);
  sockets[i].on('connect', function() {
    console.log("Socket["+i+"] connected.");
  });
  sockets[i].on('message', function(msg) {
    console.log("Socket["+i+"] Message received: "+msg);
  });
}

/*
 * Start number of sockets.
 */
for(var i=0; i<num; i++) {
  startSocket(i);
}

/*
 * Send messages forever.
 */
setInterval(function() {
    for(var i=0; i<num; i++) {
      sockets[i].send("Hello from socket "+i+".");
    }
}, 10); 
```

该脚本是一个基准测试工具，可产生 1000 个与服务器的连接，但在运行几分钟后，服务器会因以下错误消息而死机：

> node.js:0 // 版权所有 Joyent, Inc. 和其他 Node 贡献者。^ RangeError: 超出最大调用堆栈大小

我知道没有足够的可用堆栈空间，因此发生异常并终止进程，但即使我使用 --stack-size 变量扩大堆栈，这实际上并不能解决问题，因为我总是可以产生更多连接，这最终会杀死服务器。

我的问题是：我怎样才能防止这种情况发生。这是一个有效的 DoS 场景，任何人都可以破解这个小脚本并强制节点服务器终止，但我想防止这种情况发生。我希望节点服务器永远不会终止，只是慢慢地处理消息。

如果可以防止这种情况的任何想法。我不确定我是否要阻止IP，因为我也希望手机登录系统，其中许多使用相同的IP，因此节点服务器可能会错误地认为DoS正在到位移动网络操作并阻止其IP。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:41:14.927

如果您希望您的节点服务器永远运行，无论如何，请使用[https://github.com/nodejitsu/forever](https://github.com/nodejitsu/forever)

至于异常 - 我的直觉是`var sub = redis.createClient('127.0.0.1', 6379);`每次建立连接时可能会在堆栈中分配一个变量。

我会首先尝试放入`var subs = []`全局范围和 `subs[socket.id] = redis.createClient('127.0.0.1', 6379);`

或者像`socket.sub = redis.createClient('127.0.0.1', 6379);`捎带现有的，希望是基于堆的，socket.io 数据结构。

如果不起作用，请尝试通过删除 Redis 的使用来隔离问题...

# oracle-apex - APEX - 从 PL/SQL 返回带有日期的 SQL 查询时出错

> ID：14246340
> 
> 赞同：0
> 
> 时间：2013-01-09T20:58:02.010
> 
> 标签：oracle-apex

我是使用 APEX PL/SQL 的新手，如果我的问题已经被涵盖，请提前道歉。我相信已经详尽地寻找答案。

我有一个标准查询，它作为一个区域的源完全可以工作，但需要转换为 PL/SQL，以便我可以处理从我要添加的航天飞机返回的 LOV。

这是工作查询的关键部分：

```
select METRIC_DEFINITION_ID,
      METRIC_NAME,
      sum(decode(START_DATE, '01-JUN-12', VALUE)) as "Jun 2012"

from ... (a substantial query that works) 
```

当我尝试从 PL/SQL 块返回它时：

```
BEGIN
return 'select METRIC_DEFINITION_ID,
      METRIC_NAME,
      sum(decode(START_DATE, ' '01-JUN-12' ', VALUE)) as "Jun 2012"

      from ... (a substantial query that works)';
END; 
```

我收到错误消息：

```
(ORA-06550: line 9, column 33: PLS-00103: Encountered the symbol "01-JUN-12" 
when expecting one of the following: * & = - + ; < ... 
```

好像编译器需要一个运算符。

我试过了

```
...TO_DATE(' '01-JUN-12' ')... 
```

没有成功。将字符串传递给变量并返回也没有区别。

我读过的所有文档都表明我的原件应该可以工作。

有谁知道在这种情况下“解码”是否有不同的语法（一个地区的 APEX 源），还是我在这里遗漏了一些明显的东西？

所有建议表示赞赏。

干杯，杰森

===========

根据要求添加完整的查询。注意线

```
and METRIC_COLLECTION.METRIC_COLLECTION_ID IN :P44_COLLECTION_SELECTOR) 
```

目前仅在名为 P44_COLLECTION_SELECTOR 的穿梭中选择单个项目时才有效，因此需要学习 PL/SQL。

从长远来看，日期将基于输入 - 这是一个 POC。

```
select
METRIC_DEFINITION_ID,
   METRIC_NAME,
   sum(decode(START_DATE, '01-JUN-12', VALUE)) as "Jun 2012",
   sum(decode(START_DATE, '01-JUL-12', VALUE)) as "Jul 2012",
   sum(decode(START_DATE, '01-AUG-12', VALUE)) as "Aug 2012",
   sum(decode(START_DATE, '01-SEP-12', VALUE)) as "Sep 2012",
   sum(decode(START_DATE, '01-OCT-12', VALUE)) as "Oct 2012",
   sum(decode(START_DATE, '01-NOV-12', VALUE)) as "Nov 2012"

from

(select  
METRIC_DEFINITION.METRIC_DEFINITION_ID as METRIC_DEFINITION_ID,
 METRIC_DEFINITION.METRIC_NAME as METRIC_NAME,
 METRIC_VALUE.START_DATE as START_DATE,
 METRIC_VALUE.VALUE as VALUE 
from     
METRIC_VALUE METRIC_VALUE,
 METRIC_DEFINITION METRIC_DEFINITION 
where   
METRIC_DEFINITION.METRIC_DEFINITION_ID=METRIC_VALUE.METRIC_DEFINITION_ID) 

where METRIC_DEFINITION_ID IN 

(select  
METRIC_COLLECTION_MAP.METRIC_DEFINITION_ID as METRIC_DEFINITION_ID 
from     METRIC_COLLECTION_MAP METRIC_COLLECTION_MAP,
 METRIC_COLLECTION METRIC_COLLECTION 
where
METRIC_COLLECTION.METRIC_COLLECTION_ID=METRIC_COLLECTION_MAP.METRIC_COLLECTION_ID 

and 
METRIC_COLLECTION.METRIC_COLLECTION_ID IN :P44_COLLECTION_SELECTOR)

group by METRIC_DEFINITION_ID, METRIC_NAME 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:09:43.837

为什么在引号之间加空格？

尝试改变：

```
sum(decode(START_DATE, ' '01-JUN-12' ', VALUE)) 
```

到：

```
sum(decode(START_DATE, ''01-JUN-12'', VALUE)) 
```

我认为这是因为：

```
execute immediate 'select to_date(' '01-JUN-12' ') from dual'; 
```

返回相同的错误。

# r - 在 R 中调用 ggplot 函数

> ID：14246342
> 
> 赞同：0
> 
> 时间：2013-01-09T20:58:23.477
> 
> 标签：r, function, plot, ggplot2

> **可能重复：**
> [从 R 函数中生成多个图形](https://stackoverflow.com/questions/2547306/generate-multiple-graphics-from-within-an-r-function)

我正在使用此 ggplot 函数通过列表绘制多个变量：

```
plotTimeSeries <- list(n25_30,n28_30,n29_30,n31_30,n32_30)

for (i in plotTimeSeries) {
  i$dt <- strptime(i$dt, "%Y-%m-%d %H:%M:%S")
  ggplot(i, aes(dt, ambtemp)) + geom_line() +
    scale_x_datetime(breaks = date_breaks("2 hour"),
                     labels=date_format("%H:%M")) + 
    labs(x="Time 00.00 ~ 24:00 (2007-09-30)",y="Ambient Temperature",
         title = (paste("Node",i)))
} 
```

数据样本：

```
 ambtemp                  dt
1     -1.64 2007-09-29 00:01:09
2     -1.76 2007-09-29 00:03:09
3     -1.83 2007-09-29 00:05:09
4     -1.86 2007-09-29 00:07:09
5     -1.94 2007-09-29 00:09:09
6     -1.87 2007-09-29 00:11:09
7     -1.87 2007-09-29 00:13:09
8     -1.80 2007-09-29 00:15:09
9     -1.64 2007-09-29 00:17:09
10    -1.60 2007-09-29 00:19:09
11    -1.90 2007-09-29 00:21:09 
```

我不知道我应该如何调用 r 中的函数。实际上，代码没有发生错误。另一方面，破坏此代码没有出现任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:14:48.020

当您使用 for 循环时，您“有点”在函数中。我说“有点”是因为分配将发生在全局环境中（假设循环是从控制台启动的），但`ggplot`除非`lattice`包裹在`print`或等效的`plot`. 所以这样做（并阅读常见问题解答）：

```
for (i in plotTimeSeries) {
  i$dt <- strptime(i$dt, "%Y-%m-%d %H:%M:%S")
  print(
  ggplot(i, aes(dt, ambtemp)) + geom_line() +
    scale_x_datetime(breaks = date_breaks("2 hour"),
                     labels=date_format("%H:%M")) + 
    labs(x="Time 00.00 ~ 24:00 (2007-09-30)",y="Ambient Temperature",
         title = (paste("Node",i)))
        )  # append most recent plot
    } 
```

我冒着复制早期帖子的风险，但认为扩展正在发生的事情可能仍然有用。*当您在控制台输入时，会在提交kbd-return 后*立即执行一个隐式的“read-eval-print”循环。当您在循环中运行代码时，该过程的“打印”部分不是自动的，并且在两个网格绘图范例的情况下，它们会默默地返回它们的值。如果没有明确打印或分配，将不会有可以恢复的结果或将其推送到图形设备。如果已经分配了一个名称，则可以打印或进一步修改这些图：

```
plotlist <- list()
for (i in plotTimeSeries) {
  i$dt <- strptime(i$dt, "%Y-%m-%d %H:%M:%S")
  plotlist <- c(plotlist, 
  ggplot(i, aes(dt, ambtemp)) + geom_line() +
    scale_x_datetime(breaks = date_breaks("2 hour"),
                     labels=date_format("%H:%M")) + 
    labs(x="Time 00.00 ~ 24:00 (2007-09-30)",y="Ambient Temperature",
         title = (paste("Node",i)))
        )
               )
    }

lapply(plotlist, print) 
```

# php - 为 PHP 设置路径包括在 localhost

> ID：14246343
> 
> 赞同：1
> 
> 时间：2013-01-09T20:58:32.830
> 
> 标签：php, path, include

我的新 ecom 项目位于我的 mac 上的 ecom 文件夹中：“Applications/MAMP/htdocs/ecom”

我通过键入 localhost/ecom 在浏览器中访问它

问题：当我想包含一个文件时，我的脚本失败，如下所示： require('/includes/header.html');

当我这样写时它可以工作： require('/Applications/MAMP/htdocs/ecom/includes/header.html');

是否有一个 PHP 函数可以用来更改设置以使顶级版本正常工作？请记住，我还有其他项目，localhost/wiki，localhost/social 应该以类似的方式工作。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:02:56.383

> 要求('/includes/header.html');

这是一条绝对路径。如果您想包含一个相对于当前文件的路径的 PHP 文件，并且您不知道或不关心完整路径，请使用*不*以`/`.

假设您的 PHP 文件位于`/Applications/MAMP/htdocs/ecom`并且 header.html 位于，`/Applications/MAMP/htdocs/ecom/includes`那么您需要以下代码：

```
 require('includes/header.html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T11:02:34.133

这是在 Joomla / Wordpress / Cakephp 和其他开源中使用的简单想法。

利用：

要求（目录名（__文件__）。'/includes/header.php'）；

让我知道这个是否奏效。

谢谢， 蒙贾尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:07:26.920

你应该是相对路径。

`/`表示旁边的目录`/Application`

`includes/header.html`（没有 startin /）表示相对于我当前位置的文件夹。通常在旁边`index.php`

# perl - 通过 Perl 在 Outlook HTML 电子邮件中包含嵌入图像

> ID：14246345
> 
> 赞同：0
> 
> 时间：2013-01-09T20:58:33.473
> 
> 标签：perl, outlook-2007

我需要生成嵌入横幅图像的 HTML 电子邮件。它必须通过 Outlook2007 邮件客户端。我尝试对图像进行 base64 编码并将其内联（*看起来*不错），但 Outlook 不会发送电子邮件。我已经挑选了许多不同的文章（使用各种编程语言），这些文章让我走到了这一步，但它仍然不起作用。此代码创建电子邮件并附加图像，但不显示图像。

```
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Outlook';

my $oMailer = new Win32::OLE('Outlook.Application') or
  die "Unable to start an Outlook instance: $!\n";
my $oEmail = $oMailer->CreateItem(0) or
  die "Unable to create mail item: $!\n";

$oEmail->{'To'} = 'me@here.org';
$oEmail->{'Subject'} = "Embedded image test";
$oEmail->{'BodyFormat'} = olFormatHTML;
$oEmail->{'HTMLBody'}   = "<html><body><img src=\"cid:banner.jpg\"></body></html>";

my $attachments = $oEmail->Attachments();
my $bannerAttachment = $attachments->Add('C:/test/banner.jpg', olEmbeddeditem);
$bannerAttachment->PropertyAccessor->SetProperty(
    "http://schemas.microsoft.com/mapi/proptag/0x3712001E", "banner.jpg");

$oEmail->save(); 
```

（顺便说一句，我在发布之前删除了所有`Win32::OLE->LastError()`支票，因为它们都没有失败。）

添加附件时，不设置附件Type为olEmbeddeditem(5)；不知道这是否与问题有关。

SetProperty 也不设置值。这应该设置在 HTML 中的 img src 中引用的内容 ID (cid)。我将以下代码用于 GetProperty，它返回一个空字符串。

```
my $CIDvalue = $bannerAttachment->PropertyAccessor->GetProperty(
    "http://schemas.microsoft.com/mapi/proptag/0x3712001E");
print ">>>CIDvalue = $CIDvalue\n"; 
```

这么近，我可以尝到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:27:09.450

仔细阅读[WIN32::OLE](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm)的 Perl 文档发现了一个显然被调用的 SetProperty 方法，而不是我认为我正在调用的 M$ 方法。将代码更改为：

```
$bannerAttachment->PropertyAccessor->Invoke('SetProperty', "http://schemas.microsoft.com/mapi/proptag/0x3712001E", "banner.jpg"); 
```

让它发挥作用，非常高兴:)

# google-drive-api - 来自 oauth2client 的“AccessTokenRefreshError：无效响应 403”

> ID：14246347
> 
> 赞同：2
> 
> 时间：2013-01-09T20:58:35.710
> 
> 标签：google-drive-api, google-api-python-client, service-accounts

我正在创建一个脚本，该脚本将使用模拟该用户的服务帐户为特定的 Google Apps 用户下载所有文件（使用[此处](https://developers.google.com/drive/delegation)提供的 Python 模板代码（请参阅下面的代码块）。

```
def createDriveService(user_email):
  """Build and returns a Drive service object authorized with the service accounts
  that act on behalf of the given user.

  Args:
    user_email: The email of the user.
  Returns:
    Drive service object.
  """
f = file(SERVICE_ACCOUNT_PKCS12_FILE_PATH, 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(SERVICE_ACCOUNT_EMAIL, key,
  scope='https://www.googleapis.com/auth/drive', prn=user_email)
http = httplib2.Http()
http = credentials.authorize(http)

return build('drive', 'v2', http=http) 
```

我已经能够使用此功能成功验证，并且可以执行下载、文件列表请求等。但是，如果我尝试在短时间内执行四个以上的下载，则会收到以下错误：

```
Traceback (most recent call last):
   // snip //
  File "C:\***\changeScan2.py", line 48, in createDriveService
    return build('drive', 'v2', http=http)
  File "build\bdist.win32\egg\oauth2client\util.py", line 120, in positional_wrapper
  File "build\bdist.win32\egg\apiclient\discovery.py", line 193, in build
  File "build\bdist.win32\egg\oauth2client\util.py", line 120, in positional_wrapper
  File "build\bdist.win32\egg\oauth2client\client.py", line 405, in new_request
  File "build\bdist.win32\egg\oauth2client\client.py", line 573, in _refresh
  File "build\bdist.win32\egg\oauth2client\client.py", line 629, in _do_refresh_request
oauth2client.client.AccessTokenRefreshError: Invalid response 403 
```

该程序成功获取要下载的文件列表（files.list），下载四个文件（每次都进行身份验证），然后在第五次下载时提供上述错误。整个过程需要5-10秒。在使用不同文件的多次运行中，程序在下载第五个文件的过程中返回错误。

我将应用程序精简到最基本的部分，尝试下载不同的文件，并收到相同的错误。我尝试为我的 createDriveService 函数捕获异常并实现指数退避，但错误似乎在 Google API 客户端文件中，所以我无法缓解它。[这是](http://google-api-python-client.googlecode.com/hg/docs/epy/oauth2client.client-pysrc.html)查看 oauth2client\client.py 代码的链接，这似乎给我带来了问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:16:53.860

在您获得 SignedJwtAssertionCredentials 私钥的 API 控制台中，该页面底部还有一个 API 密钥。将该 API 密钥作为 developerKey 参数传递给 discovery.build() 函数：

[http://google-api-python-client.googlecode.com/hg/docs/epy/apiclient.discovery-module.html#build](http://google-api-python-client.googlecode.com/hg/docs/epy/apiclient.discovery-module.html#build)

当您达到配额限制（每日总限制或短期限制）时，将返回 403 响应。由于 Drive 的每日免费配额限制为每天 500,000 个请求，我认为您没有达到该限制，但您可能需要添加该 API 密钥才能真正获得完整的配额。

我最近对客户端库进行了更改，以便更好地处理 403 错误，这还没有在发布的版本中，但是如果你从头开始，你实际上会看到 403 是一个异常，应该会完整的信息关于为什么通话失败。

# object - 如何将方法添加到 Force.com APEX 中的自定义对象？

> ID：14246353
> 
> 赞同：0
> 
> 时间：2013-01-09T20:59:09.777
> 
> 标签：object, orm, apex-code, force.com

我的印象是 Force.com 消除了对象关系映射的必要性。

我无法创建一个扩展自定义对象的对象，如下所示：

```
class Program extends Program__C() { public Program() { super(); } } 
```

因此，要“向 Program__c() 对象添加方法”，我一直在这样做：

```
class Program { 
    Program__c program; 
    public Program() { 
        program = new Program__c(); 
    }
} 
```

但这导致了同样的 ERM 问题，我认为 Force 应该通过 APEX 和 DB 之间的交互来消除这些问题。

有没有办法在 APEX 中扩展自定义对象，或者至少向自定义对象添加方法？开发人员不必做 ORM 我是不正确的吗？

谢谢，

——马修·莫西恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:34:56.523

据我所知（而且我很确定），没有办法以您希望的方式扩展自定义对象。

您正在做的似乎是解决问题的合理方法。

您不必执行 ORM，因为您在数据库中拥有的任何对象和字段都可以在您的代码中轻松访问，而无需额外的努力。但是，您不能做太多（如果有的话）以在代码中以编程方式影响您的架构。你有点坚持下去了。

希望这可以帮助！

# javascript - Backbone：将模型属性传递给视图返回未定义

> ID：14246356
> 
> 赞同：1
> 
> 时间：2013-01-09T20:59:14.873
> 
> 标签：javascript, backbone.js

```
var ShapeSizePoolView = Backbone.View.extend({
    el : $('#agpb_shape_size_body'),    
    tmpl : $('#tmpl_agpb_shape_size').html(),
    initialize : function() {
        this.render();
    },
    render : function() {
        var compiled_template = _.template( this.tmpl, this.model.toJSON() ),
            sizes = this.model.get('sizes');
        $(this.el).append( compiled_template );

        // this is used for our pool sizes
        for(var i = 0; i < sizes.length; i++) {
            console.log(sizes[i]);
            new ShapeSizePoolButtonView(
            { 
                size : sizes[i],
                el : $(this.el).find('.agpb_size_list')
            });
        }
    }
});

var ShapeSizePoolButtonView = Backbone.View.extend({
    tmpl : $('.tmpl_agpb_shape_size_button').html(),
    initialize : function() {
        // this.render();
        console.log( this.size );
        },
        render : function() {
            var compiled_template = _.template( this.tmpl, this.sizes );
            $(this.el).append( compiled_template );
        }
}); 
```

this.model.get('sizes') 返回一个对象数组。如果我 console.log 在 ShapeSizePoolView 中的一个对象我得到：

```
{
    id: "6", 
    dimensions: "12'",
    price: "649.99", 
    sort_order: "1"
} 
```

我将此对象传递给一个新视图，但是如果我从 ShapeSizePoolButtonView 中 console.log this.size 我得到：

```
undefined 
```

有谁知道我哪里出错了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:16:37.927

从[骨干文档](http://backbonejs.org/#View-constructor)：

> 创建新视图时，您传递的选项（在合并到视图上已存在的任何默认选项后）将作为 this.options 附加到视图以供将来参考。有几个特殊选项，如果通过，将直接附加到视图：模型、集合、el、id、className、tagName 和属性。

因此，您可以使用以下方法访问此自定义选项`this.options`：

```
var ShapeSizePoolButtonView = Backbone.View.extend({
    tmpl : $('.tmpl_agpb_shape_size_button').html(),
    initialize : function() {
        // this.render();
        console.log( this.options.size ); // Not this.size
    },
    ....
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:12:58.797

您正在传递`size`给`View`构造函数，但它不会被`this`自动复制到。您需要添加如下代码：

```
var ShapeSizePoolButtonView = Backbone.View.extend({
  initialize : function(options) {
    this.size = options.size;
    // this.render();
    console.log( this.size );
  }, 
```

此外，您错误地使用`this.sizes`而不是`this.size`在您的渲染调用中。

# birt - 如何计算 BIRT 中的子组

> ID：14246360
> 
> 赞同：1
> 
> 时间：2013-01-09T20:59:29.163
> 
> 标签：birt

我正在使用 BIRT 3.7 进行报告，并且我有一个按客户和发票查询的订单，其中有一个客户组和发票子组。所以我需要的是每个客户，它有多少张发票。我正在尝试使用聚合中与发票子组相关的函数计数，但是当我运行报告时，聚合变量显示最后一张发票的详细信息总数。欢迎任何评论！

谢谢。

# javascript - 使用 JS.call 时出现奇怪的错误消息？

> ID：14246366
> 
> 赞同：2
> 
> 时间：2013-01-09T20:59:42.843
> 
> 标签：javascript

在调试时，我对自己的错误感到困惑。我正在使用火狐+萤火虫

执行此代码[演示](http://jsfiddle.net/59PPv/1/)时出现错误

```
TypeError: myranges.call(...) is undefined 
```

代码：

```
var myranges = function(d){
  //return [5,8];
  return d.undefmember;
};

myranges.call(this, 1, 2).slice(); 
```

这让我很困惑。当我进行正确的返回值[演示](http://jsfiddle.net/59PPv/)时，我对该行没有任何问题（什么！？！）。

好的，所以它返回未定义。那么我不应该得到这个更好的错误信息吗？

```
TypeError: undefined has no properties 
```

在这个[演示中发生了什么](http://jsfiddle.net/59PPv/4/)

我对为什么收到该消息或它的真正含义感到困惑。我认为调用函数有问题，或者 myranges 不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T20:03:49.647

这很可能是 firebug 的问题，因为[demo](http://jsfiddle.net/59PPv/6/)`TypeError: Cannot read property 'slice' of undefined`直接来自 JS

# c# - 将项目相关变量绑定到 longlistselector (WP8) 中的 listheader

> ID：14246368
> 
> 赞同：1
> 
> 时间：2013-01-09T20:59:45.167
> 
> 标签：c#, list, windows-phone-7, xaml, header

我是 Windows Phone 开发的新手，目前在 WP8 中使用 LongListSelector 时遇到问题，我不知道如何继续实现我想要的结果。

我像往常一样使用它来显示项目列表。使用的类包含 5 项，其中一项是浮点值。我想在列表标题中显示列表中包含的所有正浮点值的总和，但我不知道如何执行此操作。

除了原始绑定之外，我尝试将另一个变量（总和的结果）专门绑定到 listheader，或者在包含总和结果的类中添加另一个项目（因此在每个列表项中的整个列表中重复），但它没有不行。

我想这是一个非常基本的功能（例如计算和显示列表元素的数量），但我不知道如何做到这一点。

编辑：我认为显示我的代码无济于事，但就是这样。（我去掉了不相关的格式）

XAML

```
<phone:LongListSelector x:Name="ListeSolde" LayoutMode="List">
    <phone:LongListSelector.ListHeaderTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding SommeTotale}" />
        </DataTemplate>
    </phone:LongListSelector.ListHeaderTemplate>
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Nom}" />
            <TextBlock Text="{Binding DerniereConnexion}" />
            <TextBlock Text="{Binding Depuis}" />                                        
            <TextBlock Text="{Binding Solde}"  />
       </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
 </phone:LongListSelector> 
```

类定义

```
public class resume
{
    public string Nom { get; set; }
    public double Solde { get; set; }
    public string Depuis { get; set; }
    public string DerniereConnexion { get; set; }

    public resume(string nom, double solde, string depuis, string derniereconnexion)
    {
        this.Nom = nom;
        this.Solde = solde;
        this.Depuis = depuis;
        this.DerniereConnexion = derniereconnexion;
    }
}
public class total
{
    public double Total { get; set; }

    public double calculTotal(List<resume> soldes)
    {
        double total = new double();
        foreach (resume solde in soldes)
        {
            if (solde.Solde > 0)
                total += solde.Solde;
        }

        return total;
    }

    public total(double Dtotal)
    {
        this.Total = Dtotal;
    }
} 
```

和后面的代码

```
public MainPage()
    {
        InitializeComponent();

        List<resume> soldes = new List<resume>();

        Donnees MainData = new Donnees();
        soldes = MainData.RefreshResume(soldes); // A method that basically add items to the list

        total SommeTotale = new total(1);
        SommeTotale.Total = SommeTotale.calculTotal(soldes);

        ListeSolde.ItemsSource = soldes;
    } 
```

这当然不起作用（就列表标题而言），这就是我的做法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T15:23:36.317

这就是我设法将其他数据从我的 ViewModel 绑定到 LongListSelector.ListHeader 的标题的方法。

```
<phone:LongListSelector.ListHeaderTemplate>
    <DataTemplate>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <TextBlock Grid.Row="2" Foreground="DarkViolet"
                       Text="{Binding ElementName=LayoutRoot, Path=DataContext.AddressBookList.Count}" />
        </Grid>
    </DataTemplate>
</phone:LongListSelector.ListHeaderTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T07:33:31.510

ListHeader 属性直接绑定到 LongListSelector 的 DataContext。这与 LongListSelector 中包含的项目不同。其中包含的项目绑定到 ItemSource 中的每个项目。让 ListHeader 显示的最佳方法之一是创建一个包含 LongListSelector 数据的对象

```
public class ResumeContainer
{
    public double SommeTotale { get { return Resumes.Sum(r => r.Value); } }
    public IEnumerable<Resume> Resumes { get; set; }
} 
```

您可以将 LongListSelector 的 DataContext 设置为 ResumeContainer 的一个实例。这最好是您的 ViewModel 的属性。您需要将您的 xaml 更改为

```
<phone:LongListSelector x:Name="ListeSolde" ItemsSource="{Binding Resumes}"> 
```

您的代码隐藏然后更改为

```
List<resume> soldes = new List<resume>();

Donnees MainData = new Donnees();
soldes = MainData.RefreshResume(soldes);
ListeSolde.DataContext = new ResumeContainer { Resumes = soldes }; 
```

# java - 通过 JMX 确定 Java 版本

> ID：14246375
> 
> 赞同：1
> 
> 时间：2013-01-09T21:00:15.250
> 
> 标签：java, jmx

我希望通过 JMX**远程**确定特定进程正在运行的 Java 版本。具体来说，我想要像“1.6.0_26”这样的东西，它`System.getProperty("java.version")`会返回。

通过 RunTime MBean，我可以检查 VmName 和 VmVersion 属性，它们分别给出“Java HotSpot(TM) 64-Bit Server VM”和“20.1-b02”。我不确定“20.1-b02”来自哪里；有没有办法将它与“1.6.0_26”版本相匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:08:55.520

`java.lang.Runtime`bean的一些提示：

*   规格版本
*   LibraryPath/BootClassPath（最有可能在文件夹名称中）
*   系统属性->`java.runtime.version`

**编辑**

`java.lang.management.RuntimeMXBean.getSystemProperties()`正如@Kent在代码中指出的那样，与 JConsole 等 JMX 客户端中的`SystemProperties`->相同。`java.runtime.version`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T18:45:14.140

事实证明，旧版本的 JVM / JMX 为 specVersion 返回了错误的东西，因此使用@Kent 提供的技术效果更好：

```
 getLogger().finest("Checking JVM version");
    String specVersion = ManagementFactory.getRuntimeMXBean().getSpecVersion();
    getLogger().log(Level.FINEST, "Specification Version from JMX = ''{0}''", specVersion);

    // Because of bug in the above call, earlier versions of JMX reported the version of
    // JMX and not Java (so 1.6 reports 1.0 - replacing with the call below fixes this problem
    // and consistently returns the specification of the JVM that is being used.
    String javaVersion = ManagementFactory.getRuntimeMXBean().getSystemProperties().get("java.specification.version");
    getLogger().log(Level.FINEST, "java.specification.version found ''{0}''", javaVersion); 
```

# c# - c# User.IsInRole 命名空间

> ID：14246376
> 
> 赞同：5
> 
> 时间：2013-01-09T21:00:25.373
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-membership

注意，我使用的是 c# MVC 3，我试图在一个类中使用它，而不是在控制器中。

我的程序顶部有以下内容

```
 using System.Web.Security; 
```

我尝试执行以下操作，但收到消息：

*当前上下文中不存在名称“用户”。*

这是我的部分代码：

```
 using System.Web.Security;
     ....
     ....

     if (User.IsInRole("Admin"))  
     {

     } 
```

我认为这与命名空间有关，但查看文档，我只需要 System.Web.Security。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T21:08:53.513

**首先尝试：**在执行视图时，在控制器中检查以下内容`HttpContext.Current.User.IsInRole("Admin")` - 此行检查您的值。

`bool`如果您加载了当前的 HttpContext ，它应该返回一个值。

**解决方案#2：** 查看默认的 mvc3 项目：

```
Context.User.IsInRole("Admin") 
```

而不是`Page.User.IsInRole("Admin")`.

**另外**：您可以查看这篇关于如何在[不使用 Membership 的情况下设置角色使用的帖子 - User.IsInRole(" ")](https://stackoverflow.com/q/2282260/1437962)。

**在** `ASP.NET MVC Membership`classes中查找以下用法：

*   [ASP.Net MVC 3 Razor 中的成员资格和授权](http://www.c-sharpcorner.com/uploadfile/b19d5a/membership-and-authorization-in-Asp-Net-mvc-3-razor/)
*   [SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)
*   [Asp.net 成员资格 - 如何以编程方式确定用户是否在角色中](https://stackoverflow.com/q/1213964/1437962)
*   [ASP.NET MVC 成员角色](https://stackoverflow.com/q/9016091/1437962)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T21:05:43.540

添加`using System.Web.Mvc;` 应该这样做

因此，根据您的评论，我将假设您在一个不是控制器的类中工作，而是在您的 MVC 项目中。所以你应该能够像这样做你正在尝试的事情

```
if(HttpContext.Current.User.IsInRole("Admin"))
    {
      //...         
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-20T14:34:30.463

采用`System.Web.HttpContext.Current.User.IsInRole("yourRole")`

希望它会有所帮助:)

# plone - Plone.org 上导航 Portlet 的名称？

> ID：14246378
> 
> 赞同：1
> 
> 时间：2013-01-09T21:00:34.640
> 
> 标签：plone

[Plone.org](http://www.plone.org)上的折叠导航 Portlet 的名称是什么（Get Plone - Learn Plone - Get Involved）？我在 Portlets 下载部分找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:06:27.637

[它不是一个 portlet，而是使用jQueryUI Accordion](http://jqueryui.com/accordion/)小部件的定制 Plone.org 主页视图的一部分。

请参阅[Plone.org 头版源代码](https://github.com/plone/Products.PloneOrg/blob/master/src/Products/PloneOrg/skins/ploneorg/frontpage.pt)。

```
<div id="accordion">
    <h2 class="current">Get Plone</h2>

    <div class="pane" style="display:block">
        <a id="download-link" href="/download">DOWNLOAD NOW<br />
            Plone 
            <span tal:content="python: here.products.getFeaturedProjectRelease().getId()">3.2.0</span>
            &middot; 
            <span tal:content="python: here.products.getFeaturedProjectRelease().effective_date.strftime('%h ' + u'\u2019' + '%y')">Feb 2009</span></a>
        <dl>
            <dt><a href="/products/plone/features/">What’s new in Plone 4</a></dt>
            <dd>An overview of the new features.</dd>

            <dt><a href="http://plone.org/roadmap">Roadmap</a></dt>
            <dd>Our plans for the future.</dd>

            <dt><a href="/products/plone/releases">Older releases</a></dt>
            <dd>Looking for a previous version?</dd>

            <dt><a href="/products">Add-on Products</a></dt>
            <dd>Adapt Plone to your needs.</dd>

            <dt><a href="/products/plone/security/advisories">Security Advisories</a></dt>
        </dl>
    </div>  

    <h2>Learn Plone</h2>
    <div class="pane">
        <dl>
            <dt><a href="/documentation">Documentation</a></dt>
            <dd>Plone has a great collection of online documentation.</dd>

            <dt><a href="/documentation/books">Buy Books</a></dt>
            <dd>For those of you who think better in bed with a book.</dd>

            <dt><a href="/support">Forums &amp; Chat Rooms</a></dt>
            <dd>People are always ready to help you with your Plone questions.</dd>

            <dt><a href="/events/training">Find Plone Training</a></dt>
            <dd>Let one of the Plone experts guide you through getting productive.</dd>

            <dt><a href="http://plone.net">Commercial Support</a></dt>
            <dd>Over 300 companies around the world offer Plone services.</dd>
        </dl>
    </div>

    <h2>Get Involved</h2>
    <div class="pane">
        <dl>
            <dt><a href="http://plone.org/documentation/faq/suggest-a-feature-for-plone">Suggest New Features</a></dt>
            <dd>Have an awesome idea about a new feature for Plone?</dd>

            <dt><a href="http://dev.plone.org/plone">Report Bugs</a></dt>
            <dd>Plone has no bugs. If you found one anyway, report it here.</dd>

            <dt><a href="http://dev.plone.org/plone">Write Code</a></dt>
            <dd>If you’re proficient in Python, HTML, CSS or JS, join us!</dd>

            <dt><a href="http://dev.plone.org/plone">Translate, Write Docs, Help Test</a></dt>
            <dd>There are lots of things you can do to make Plone better.</dd>

            <dt><a href="http://planet.plone.org">Read Blogs, Publish Yours</a></dt>
            <dd>Stay up to date on Plone</dd>

            <dt><a href="/foundation">Support the Plone Foundation</a></dt>
            <dd>If all else fails, give cold, hard cash.</dd>
        </dl>
    </div>

</div> <!-- End accordion --> 
```

# xcode - 使用 perl 从文件中删除 #ifdef/#endif 的出现

> ID：14246381
> 
> 赞同：1
> 
> 时间：2013-01-09T21:00:41.193
> 
> 标签：xcode, perl, xcode4, xcode4.5

我有一个代码文件，其中包含一些我想在构建库后在头文件中删除的#ifdefs。我的第一个想法是将其作为 XCode 可以运行的 perl 脚本来执行。虽然我当然可以打开头文件并将其所有内容读入 perl 中的字符串，但我很好奇执行以下操作的最佳方法

1.  查找任何出现的 #ifdef 示例

2.  删除它以及以下 #endif 之间的任何内容

所以例子是：

```
int i;
NSString *someString;
#ifdef EXAMPLE
NSString *exampleString;
#endif
bool done; 
```

输出将是：

```
int i;
NSString *someString;
bool done; 
```

我正在考虑的选项：

*   查找每个 #ifdef 示例的索引并通过子字符串将其删除，下一个找到的 #endif
*   编写一个可以以某种方式消除这些事件的正则表达式。

考虑到我之前没有写过 Perl（Objective-C 是我的主要语言），我很好奇是否有任何 XCode 或 Perl 开发人员对最好的方法有什么建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:13:19.123

我不知道你为什么要去掉 ifdefs，你可能可以使用 C 预处理器来做到这一点，但这是你在 Perl 中的做法，因为这意味着我可以使用触发器运算符.

首先是制作一个足够的正则表达式来匹配 ifdef。IIRC 它们可以缩进，`#`并且单词和单词之间可以缩进。

```
#ifdef
#    ifdef
    #ifdef 
```

不确定最后一个是否有效，但无论如何我都会接受它。

```
my $ifdef_re = qr{^\s*#\s*ifdef\b};
my $endif_re = qr{^\s*#\s*endif\b}; 
```

如果只是删除 and 之间的文本`#ifdef`，`#endif`Perl 有很少使用的[触发器标量`..`运算符](http://perldoc.perl.org/perlop.html#Range-Operators)。

```
#!/usr/bin/env perl

use strict;
use warnings;

my $ifdef_re = qr{^\s*#\s*ifdef\b};
my $endif_re = qr{^\s*#\s*endif\b};

while(<DATA>) {
    my $in_ifdef = /$ifdef_re/ .. /$endif_re/;

    print if !$in_ifdef;
}

__DATA__
int i;
NSString *someString;
#ifdef EXAMPLE
NSString *exampleString;
#endif
bool done; 
```

但是由于我们需要担心嵌套的 ifdef，它是不够的。深度计数器可以解决这个问题。

```
#!/usr/bin/env perl

use strict;
use warnings;

my $ifdef_re = qr{^\s*#\s*ifdef\b};
my $endif_re = qr{^\s*#\s*endif\b};

my $ifdef_count = 0;
while(<DATA>) {
    $ifdef_count++ if /$ifdef_re/;

    print if $ifdef_count <= 0;

    $ifdef_count-- if /$endif_re/;
}

__DATA__
int i;
NSString *someString;
#ifdef EXAMPLE
NSString *exampleString;
#    ifdef FOO
this should not appear
#    endif
nor should this
#endif
bool done; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:20:40.267

我喜欢正则表达式，但是对于这个问题，我不会使用正则表达式，我只是逐行阅读，跟踪我是否在 ifdef 中：

```
my $nesting = 0;
while (<STDIN>)
   {
   $nesting += 1 if /^#ifdef/;
   print $_ unless $nesting;
   $nesting -= 1 if /^#endif/;
   } 
```

如果您真的想使用正则表达式，并将整个文件读入变量`$source`，我认为这会起作用，如果您不需要担心嵌套：

```
$source =~ s/^#ifdef.*?^#endif.*?$//gms; 
```

字符将表达式的`^`这些部分锚定到行首。`$`使得匹配的最后部分只发生在一行的末尾。

的`.*?`行为几乎像`.*`，它匹配零个或多个字符，除了它进行最小匹配。所以不是一直匹配到最后一个`#endif`，而是匹配第一个。

最后`/gms`使它：

1.  替换每一个出现，而不仅仅是一个（那是 g）
2.  使 ^ 和 $ 在行边界匹配，而不仅仅是字符串边界（m）
3.  制作 。匹配换行符（s）

您可能希望跟随 every`#ifdef`和`#endif`with `\s`，仅在该字符串后面有空格时才匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T10:09:37.180

我只是用[`unifdef`](http://dotat.at/prog/unifdef/). XCode 默认安装这个：

```
-U will remove #ifdef and matching #else/#endif as if <constant> is undefined.
-D will remove #ifdef and matching #else/#endif as if <constant> is defined. 
```

这是一个例子：

```
$ cat test.h
#ifdef TEST

#ifdef DEBUG
# define AWESOME_DEBUG_LEVEL 1
#else
# define AWESOME_DEBUG_LEVEL 0
#endif

#endif

$ unifdef -U DEBUG test.h
#ifdef TEST

# define AWESOME_DEBUG_LEVEL 0

#endif

$ unifdef -U DEBUG -D TEST test.h

# define AWESOME_DEBUG_LEVEL 0 
```

# android - LinearLayout 在 Android 的其他视图之上添加一个视图

> ID：14246382
> 
> 赞同：3
> 
> 时间：2013-01-09T21:00:47.137
> 
> 标签：android, android-layout

我想在线性布局的顶部添加一个视图。以下代码将我的视图添加到应用程序布局的末尾。

```
LinearLayout layout = (LinearLayout)findViewById(R.id.root);
layout.addView(adView); 
```

如何更新此代码以使我的 adView 位于我的应用程序的顶部？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T21:10:03.633

您可以指定您想要的索引`addView`。

```
layout.addView(child, index); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:11:07.990

您可以使用以下方法之一：1）`LinearLayout`在要显示广告的位置添加一个空白，然后添加`adView`到它们。2）添加`adView`xml布局（如果可能）并在需要时使用`setVisible()`方法隐藏/显示它们。

您也可以`RelativeLayout`改用`LinearLayout`，但更难动态地将 View 添加到它们。

# excel - 下拉列表中相邻单元格的 Excel 条件格式

> ID：14246390
> 
> 赞同：0
> 
> 时间：2013-01-09T21:01:16.187
> 
> 标签：excel, validation, formatting, conditional

我一直在这里搜索，但找不到与我所追求的完全一样的东西。

在 excel 中，我有一列包含十几个不同首字母的下拉列表，这些单元格上有条件格式。我还想根据这些首字母格式化另一列，但不想在每个单元格上一个一个地设置十几个规则。如果我使用正确的规则设置顶部单元格，我将无法填写格式，因为公式不是逐行更新的，而是整个范围的更新。

我对 VBA 或宏没有真正的经验，有没有办法比蛮力更优雅地做到这一点？

非常感谢您提前。这个论坛一直是一个很大的帮助，希望你也可以帮助这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:35:56.580

我希望我没有误解你的问题。如果您已将格式设置为公式，则可以将格式复制到其他列。例如，如果 A 是您的带有首字母的列，并且您在 B2 中有一个数据单元格，那么您可以将 B2 中的公式设置为 A2="ER"，例如，使用您想要的格式，并对您在 A2 上的其余比赛。然后，您可以使用“粘贴特殊格式”将格式复制到 B 列（未过滤）。只要确保条件格式规则中的格式锚定在 A 列上（即 $A2="ER"），您就可以复制条件格式。

# kernel - Minix 从 /kernel/system 写入文件

> ID：14246393
> 
> 赞同：3
> 
> 时间：2013-01-09T21:01:28.447
> 
> 标签：kernel, minix

`/home/log.txt`我需要从`kernel/system/do_kill.c`（Minix）将一些信息写入我的特殊日志文件（例如， ）。

我已经尝试过：

```
int filedesc;
filedesc=open("/home/log.txt", O_CREAT | O_RDWR);
write(filedesc, "Test message\n", 13);
close(filedesc); 
```

但文件没有出现。（但`printf()`在控制台中显示文本）。

编译时使用`fprintf()`会导致错误（`make clean all`from `/usr/src/tools`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:17:47.003

查看现有源代码以了解内核如何进行日志记录

我很确定它使用 logging.c ：`log_init`和`event_log`

# flash - 如何在 AS2 中居中 SWF

> ID：14246395
> 
> 赞同：-1
> 
> 时间：2013-01-09T21:01:51.030
> 
> 标签：flash, actionscript-2

我做了一些可以从另一个站点加载 SWF 的东西。该脚本位于 AS2 中，我想知道如何将其居中。[http://cpcheatsdojo.info/SWFViewer/FD.swf?id=1](http://cpcheatsdojo.info/SWFViewer/FD.swf?id=1)这就是现在的样子，我怎样才能让它居中。代码是：

```
var id = 1;
createEmptyMovieClip("i",100);
i.loadMovie("http://media1.clubpenguin.com/play/v2/content/global/furniture/icons/" + id + ".swf"); 
```

那么我可以添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:47:04.457

将 X 和 Y 值设置为您需要的位置（您可以通过计算舞台宽度和高度并除以 2 以及 swf 的宽度和高度来计算此位置。）

```
i._x = 50; //change these numbers
i._y = 50; //change these numbers 
```

# dom - 我们可以在 AutoHotKey 中做 getElementByID 吗？

> ID：14246398
> 
> 赞同：3
> 
> 时间：2013-01-09T21:01:58.740
> 
> 标签：dom, vbscript, autohotkey, porting

我有这个 VBS 代码，它就像一个魅力，但由于 Chrome 不支持 VB 脚本。

我需要找到自动热键的替代方法。

如果不只是其中的一部分，有人可以帮我将这段代码转换为 AutoHotKey。

`Here is part of code`我需要在 AutoHotKey 中做

```
 With IE.Document
    .getElementByID("login_username").value = "myuser"
    .getElementByID("login_password").value = "mypass"
    .getElementByID("frmLogin").submit
  End With 
```

**这是完整代码**

```
WScript.Quit Main

Function Main
  Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
  IE.Visible = True
  IE.Navigate "http://desistream.tv/en/index.shtml"
  Wait IE
  With IE.Document
    .getElementByID("login_username").value = "myuser"
    .getElementByID("login_password").value = "mypass"
    .getElementByID("frmLogin").submit
  End With
End Function

Sub Wait(IE)
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
End Sub

Sub IE_OnQuit
  On Error Resume Next
  WScript.StdErr.WriteLine "IE closed before script finished."
  WScript.Quit
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T22:28:15.197

```
#SingleInstance, force
#NoEnv
OnExit, ExitSub

IE := ComObjCreate("InternetExplorer.Application")
IE.Visible := true
IE.Navigate("http://desistream.tv/en/index.shtml")

Wait(IE)

pDoc := IE.document

pDoc.getElementByID("username").value := "myuser"
pDoc.getElementByID("pass").value := "mypass"
pDoc.all.frmLogin.submit()

return

+Esc::  ;shift + esc
ExitSub:
try
        IE.Quit
        IE := ""
Exitapp

Wait(IE) {
while IE.readyState!=4 || IE.document.readyState != "complete" || IE.busy
 sleep 10
} 
```

我想就是这样

希望能帮助到你

# svn - 使用钩子脚本调用 svnsync

> ID：14246404
> 
> 赞同：1
> 
> 时间：2013-01-09T21:02:19.400
> 
> 标签：svn, hook, svnsync, subversion-edge

我有一个在 Windows 上运行的三服务器颠覆边缘环境。我已经使用 apache httpd.conf 中的直写代理配置配置了 1 个主服务器和两个从属服务器。我需要使用 svnsync 将存储库的复制配置回从属服务器，但我一直坚持如何修改挂钩脚本来完成此操作。有没有人有一个类似于我的环境愿意分享修改了哪些脚本以允许复制？

# mysql - 无法更新/更改数据库中的字段值

> ID：14246405
> 
> 赞同：0
> 
> 时间：2013-01-09T21:02:20.070
> 
> 标签：mysql, database, sql-update

从理论上讲，我会向您展示有效的代码，我的意思是，这很有意义，但我无法在表格中得到任何更改！：\

所以，这里是代码：

```
else if ($mode == 'password') {
    $generated_password = substr(md5(rand(999,999999)), 0, 8);
    change_password($user_data['user_id'],$generated_password);         
    update_user($user_data['user_id'], array('password_recover' => '1'));
    email($email, 'Your new password', "Hi," . $user_data['nome'] . " \n\nYour new password is: " . $generated_password . "");
} 
```

功能：

```
function update_user($user_id,$update_data){
    $update = array();     
    array_walk($update_data, 'array_sanitize'); 
    foreach($update_data as $field => $data) {
            $update[]='`' .$field. '`=\'' .$data . '\'';
    }
    mysql_query("UPDATE users SET " . implode(', ',$update) . "WHERE user_id = '$user_id'");
}

function change_password($user_id,$password) {
    $user_id = (int) $user_id;
    $password = md5($password);

    mysql_query("UPDATE users SET password = '$password' WHERE user_id = $user_id");
} 
```

我什至没有编写电子邮件功能，因为它有效。提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:09:03.407

您应该在代码中添加某种错误处理。至少`or die('Error: '.mysql_error())`在每个之后添加`mysql_query()`以至少了解执行查询时出了什么问题。

如果您只是从某个地方获取代码并且并不真正理解它的作用，请不要感到惊讶，如果它没有按照您的意愿执行。

# cloud-foundry - 与 cloudfoundry 的 JMX 连接

> ID：14246409
> 
> 赞同：3
> 
> 时间：2013-01-09T21:02:39.143
> 
> 标签：cloud-foundry

我有一个部署到 Cloudfoundry 的应用程序，我为我们的日志记录级别公开了 JMX MBeans 接口。我想用 jconsole 连接到 cloudfoundry 实例。这可能吗？我该如何做到这一点？如果我运行 1 个以上的 Tomcat 实例怎么办，如何连接到特定实例？还是有关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:31:04.533

在平台中，我们使用与 Login 和 UAA 组件一起部署的应用程序 ( [https://github.com/cloudfoundry/identity-tools/tree/master/varz](https://github.com/cloudfoundry/identity-tools/tree/master/varz) )。它通过类似 CF 的 REST 接口提供对选定 MBean 的只读访问权限。对于要公开的最重要的 MBean，它固执己见，并且可能会破坏复杂的对象图，但是您可以根据需要对其进行调整。您可以拆下控制器并在您的应用程序中使用它，或者像我们在平台上使用独立应用程序一样执行相同的操作，将您自己的 war 和 varz 部署在同一个容器中。

另请参阅[Jolokia](https://github.com/rhuss/jolokia)，了解通用 JMX REST 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:22:09.690

目前无法通过主 Cloud Foundry 路由器连接到应用程序的某个特定实例或除​​ http 端口之外的任何端口。

# javascript - 无法在 IE9 中更改 iframe 加载监听器

> ID：14246424
> 
> 赞同：0
> 
> 时间：2013-01-09T21:03:26.390
> 
> 标签：javascript, jquery, html, iframe, onload

我在外部 javascript 文件中有以下代码。

```
jQuery(function ($) {

    //////////////////////UPCOMING EVENTS JSON SERVER START///////////////////////////

    var eventList = $("#eventList"); //cache the element
    $.getJSON("/JsonControl/Events.json", function (jsonObj) {
        val = "";
        for (var i = 0; i < jsonObj.events.length; ++i) {
            val += "<p>" + jsonObj.events[i].dateMonth + "/" + jsonObj.events[i].dateNumber +
                "/" + jsonObj.events[i].dateYear + " - <span id='EL" + i + "' class='link' " + 
                "onclick=plotEvent(" + i +")>" + jsonObj.events[i].title + "</span></p>";
        }
        eventList.html(val);
    });

    //////////////////////UPCOMING EVENTS JSON SERVER END/////////////////////////////

});

function plotEvent(index)
{
    $.ajax({
        url: "/JsonControl/Events.json",
        dataType: 'json',
        async: false,
        success: function (jsonObj) 
        {
            var eventBox = window.frameElement;
            alert("This alert fires in all browsers, including IE9")
            eventBox.onload = function () 
            {
                alert("This alert doesn't fire in IE9.")
                window.frameElement.onload = null; // unset it so it only fires once
                eventBox = eventBox.contentDocument || eventBox.contentWindow.document;
                eventBox.getElementById("title").innerHTML = (jsonObj.events[index].title);
                eventBox.getElementById("content").innerHTML = (jsonObj.events[index].explanation);
                eventBox.getElementById("dateHolder").innerHTML = (jsonObj.events[index].dateMonth + "-" + jsonObj.events[index].dateNumber + "-" + jsonObj.events[index].dateYear);
            };
            eventBox.src="/Event htms/Event.htm";
        }
    });
} 
```

加载此脚本的页面位于 iframe 本身中。一个非常相似的函数在不同的外部 js 文件中调用，从 iframe 外部的主页（用于不同但相似的目的）在所有浏览器中都可以正常工作。唯一的区别是，使用此代码，我必须从 iframe 中定位 iframe 的加载，而不是仅通过 id 抓取 iframe。然后，我尝试更改所述 iframe 的 onload，以用于下一个内部 iframe 页面（这就是为什么我需要在动态编写第一个 iframe 页面的 innerHTML 时保留 json 数组索引 [i] 的原因。

抱歉，如果这有点罗嗦和/或令人困惑，但只要说使用上面粘贴的代码，我就没有问题......除了 IE（在 IE9 中尝试过）。我已经尝试了几十个示例和假设的解决方案，但没有任何效果。使用 IE9。

当我说“它在 IE9 中不起作用”时，这就是我的意思：

plotEvent() 中的这部分代码不会触发：

```
eventBox.onload = function () 
        {
            alert("This alert doesn't fire in IE9.")
            window.frameElement.onload = null; // unset it so it only fires once
            eventBox = eventBox.contentDocument || eventBox.contentWindow.document;
            eventBox.getElementById("title").innerHTML = (jsonObj.events[index].title);
            eventBox.getElementById("content").innerHTML = (jsonObj.events[index].explanation);
            eventBox.getElementById("dateHolder").innerHTML = (jsonObj.events[index].dateMonth + "-" + jsonObj.events[index].dateNumber + "-" + jsonObj.events[index].dateYear);
        }; 
```

这个问题有什么解决方案吗，或者这种事情为什么不经常使用 iframe（也就是说，IE 不完全支持它们）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:14:40.233

尝试`eventBox.contentWindow.onload`或也许`$(eventBox).load(function)`

# xml - 在记事本++中打开文件的脚本/方式，重新格式化并保存

> ID：14246425
> 
> 赞同：0
> 
> 时间：2013-01-09T21:03:26.637
> 
> 标签：xml, xml-formatting

我有这个 xml 文件。根据我打开它的方式（写字板、记事本、记事本++），它的打开方式不同。例如，如果我使用写字板打开它，它会以一长行打开。如果我用记事本打开它，它是多行但格式不正确。如果我用记事本++打开，它是多行的，但格式仍然不是很好，除非我使用 xml 插件。

例如，我要查看这种格式的文件，

```
<?xml version="1.0"?>
<note>
<to>Tove</to>
<from>Jani</from>
<heading>Reminder</heading>
<body>Don't forget me this weekend!</body>
</note> 
```

而不是像这样排长队。

```
<?xml version="1.0"?><note><to>Tove</to><from>Jani</from><heading>Reminder</heading>  
<body>Don't forget me this weekend!</body></note> 
```

所以我的问题是，有没有人有更好的想法，

1.  如何打开这个文件，在 xml 文件中很好地重新格式化，保存并关闭它？或者
2.  如何编写某种脚本，使用notepad++打开这个文件，使用那个xml插件，保存并关闭它？正如我之前提到的，我曾在一个文件上手动尝试过一次，并且成功地将其格式化为 xml 格式。

任何帮助都会很好，如果您有任何问题，请告诉我。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:32:28.323

我想到了两个选项——或者使用适当的 XML 编辑器（取决于您的平台），或者首先通过 XML 漂亮打印机传递它（无论您的平台如何，xmllint 都应该可用）。

# entity-framework - 为什么 EF5 代码在将可为空的日期时间插入数据库时 首先使用 datetime2？

> ID：14246426
> 
> 赞同：7
> 
> 时间：2013-01-09T21:03:27.293
> 
> 标签：entity-framework, datetime, ef-code-first, datetime2

我将 Cart 对象保存到具有可为空日期时间的数据库中。这是我得到的错误：

> 将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。

有很多 stackoverflow 帖子记录了对这个问题的修复。但是，当代码首先创建数据库时，它会将字段创建为 DateTime（允许空值）。但由于某种原因，代码首先尝试使用 DateTime2 字段进行插入。

我想知道为什么 EF 以一种方式创建字段，但对同一字段使用不同的类型进行插入。

这是域对象：

```
using System;
using System.Collections.Generic;

namespace Core.Domain.Cart
{
    public partial class Cart : BaseEntity, ILocalizedEntity
    {
        private ICollection<Catalog> _catalogs;

        /// <summary>
        /// Gets or sets the name
        /// </summary>
        public virtual string Name { get; set; }

        /// <summary>
        /// Gets or sets the zone identifier
        /// </summary>
        public virtual int ZoneId { get; set; }

        /// <summary>
        /// Gets or sets the brand identifier
        /// </summary>
        public virtual int BrandId { get; set; }

        /// <summary>
        /// Gets or sets the customer type identifier
        /// </summary>
        public virtual int CustomerTypeId { get; set; }

        /// <summary>
        /// Gets or sets the date and time of the opening of a cart
        /// </summary>
        public virtual DateTime? OpeningDateUtc { get; set; }

        /// <summary>
        /// Gets or sets the date and time of the closing of a cart
        /// </summary>
        public virtual DateTime? ClosingDateUtc { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether the entity is online or not
        /// </summary>
        public virtual bool IsOnline { get; set; }

        /* Truncated for relevance */
    }    
} 
```

该模型：

```
using FluentValidation.Attributes;
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;
using Telerik.Web.Mvc;

namespace Admin.Models.Cart
{
        [Validator(typeof(CartValidator))]
        public partial class CartModel : BaseNopEntityModel, ILocalizedModel<CartLocalizedModel>
        {            
            public CartModel()
            {
                Locales = new List<CartLocalizedModel>();
                Catalogs = new List<CatalogModel>();
                UnassociatedCatalogs = new List<CatalogModel>();
            }
            [NopResourceDisplayName("Admin.Carts.Fields.Name")]
            [AllowHtml]
            public string Name { get; set; }

            //Zone dropdown
            [NopResourceDisplayName("Admin.Carts.Fields.ZoneList")]
            public SelectList ZoneList { get; set; }        //The dropdown with zones
            public int ZoneId { get; set; }                 //The selected value of the dropdown once the form is submitted
            public string ZoneName { get; set; }            //The name of the zone to display in data-grid List view.

            //Brand dropdown
            [NopResourceDisplayName("Admin.Carts.Fields.BrandList")]
            public SelectList BrandList { get; set; }       //The dropdown with brands
            public int BrandId { get; set; }                //The selected value of the dropdown once the form is submitted
            public string BrandName { get; set; }           //The name of the brand to display in the data-grid List view. 

            //Customer type dropdown
            [NopResourceDisplayName("Admin.Carts.Fields.CustomerTypeList")]
            public SelectList CustomerTypeList { get; set; }//The dropdown with CustomerType
            public int CustomerTypeId { get; set; }         //The selected value of the dropdown once the form is submitted
            public string CustomerTypeName { get; set; }    //The name of the CustomerType to display in the data-grid List view. 

            [NopResourceDisplayName("Admin.Carts.Fields.OpeningDateUtc")]
            [UIHint("DateNullable")]
            public DateTime? OpeningDateUtc { get; set; }

            [NopResourceDisplayName("Admin.Carts.Fields.ClosingDateUtc")]
            [UIHint("DateNullable")]
            public DateTime? ClosingDateUtc { get; set; }

            [NopResourceDisplayName("Admin.Carts.Fields.IsOnline")]
            public bool IsOnline { get; set; }

            /* Truncated for relevance */
        }

} 
```

所以 the`OpeningDateUtc`和 the`ClosingDateUtc`都是 DateTime? 类型。

这是 EF 代码首先生成数据库的方式： ![EF 生成表](../Images/91c34cb3d3e1bb4ac2f14ad87fb2dc0f.png)

和`OpeningDateUtc`被`ClosingDateUtc`创建为可为空的 DateTime 字段。

那么为什么当我使用 保存时`IDBContext.SaveChanges()`，为查询生成的 SQL 是：

```
exec sp_executesql N'update [dbo].[Cart]
set [Name] = @0, [ZoneId] = @1, [BrandId] = @2, [CustomerTypeId] = @3, [OpeningDateUtc] = @4, [ClosingDateUtc] = @5, [IsOnline] = @6, [IsReadonly] = @7, [IsPreviewMode] = @8, [CreatedOnUtc] = @9
where ([Id] = @10)
',N'@0 nvarchar(100),@1 int,@2 int,@3 int,@4 datetime2(7),@5 datetime2(7),@6 bit,@7 bit,@8 bit,@9 datetime2(7),@10 int',@0=N'Cart1',@1=7,@2=4,@3=5,@4='2013-01-09 00:00:00',@5='2013-01-18 00:00:00',@6=0,@7=0,@8=1,@9='0001-01-01 00:00:00',@10=1 
```

有趣的部分是`@4 datetime2(7),@5 datetime2(7)`。

我知道我可以通过将 a 添加`.HasColumnType("datetime2")`到购物车地图来解决此问题，但它没有回答为什么 EF5（可能还有旧版本）将它们设置为可为空的日期时间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T21:17:08.380

.NET 中的类型具有与SQL Server 中`DateTime`相同的范围和精度。`datetime2`当 EF 在 SQL Server 中插入或更新`datetime`or列时，它会将模型属性转换为可以容纳.NET 中`datetime2`整个范围的类型，即. 如果属性不在SQL Server的范围内，则转换为将失败。`DateTime``datetime2``datetime``DateTime``datetime`

顺便说一句，导致异常的问题不是两个可为空的`OpeningDateUtc`列`ClosingDateUtc`，而是SQL 片段中的`CreatedOnUtc`值，即显然没有在模型实体中初始化。SQL Server 中可以存储的最早日期是 1750 年，因此 0001 年不适合该类型（但它适合）。`'0001-01-01 00:00:00'``CreatedOnUtc``datetime``datetime2`

因此，解决方案是设置`CreatedOnUtc`为有效值`datetime`，或者 - 如您所知 - 定义`datetime2`映射中的类型。

但我同意，如果 EF`DateTime`默认将属性映射到`datetime2`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T23:05:42.190

EF 团队实际上在其中一次设计会议上讨论了这个特定项目。决定是保持当前行为不变。以下是可以为您提供更多背景信息的[会议记录。](http://entityframework.codeplex.com/wikipage?title=Design%20Meeting%20Notes%20-%20October%2025,%202012)

# d - D 中线性代数包的固定维特化

> ID：14246430
> 
> 赞同：1
> 
> 时间：2013-01-09T21:03:40.773
> 
> 标签：d, linear-algebra

D 可以将函数专门用于常量参数（在编译时已知），通常用于`pow(base, exponent)`if`exponent`是一个常量整数。由于 C++ 缺乏此功能，因此它不得不求助于模板专业化黑客，这会掩盖 API，例如`pow`Boost.Units 中的函数模板。

但是，不能在线性代数包中使用常量参数专门化来专门化矩阵运算，例如针对固定维度情况的矩阵向量乘法，例如 2-D/3-D 中常用的 2x2、3x3、3x3、4x3 和 4x4图形。这些重载通常是使用 SIMD 指令（内在函数）实现的，如果这些实现可以由这样的库自动选择用于合适的固定大小的矩阵和向量，那就太棒了。

我相信这将是 D 的真正杀手级应用，尤其是在科学可视化方面。这是因为更高/动态维度线性代数和固定维度 2-D/3-D 之间的桥梁对于使用实现这些想法的包的开发人员来说是完全透明的。

已经有几个不错的用于 D 的 2-、3-和 4-D 线性代数包，例如 gl3n。我很乐意看到它被扩展以提供包含在 C++ 库中的函数，例如 Eigen 和 Armadillo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:41:56.440

> 但是，不能在线性代数包中使用常量参数专门化来专门化矩阵运算，例如针对固定维度情况的矩阵向量乘法，例如 2d/3d 图形中常用的 2x2、3x3、3x3、4x3 和 4x4。

是的，这是完全可能的，而且非常容易。有几种方法可以做到：

*   使用模板专业化。
*   使用模板函数约束。
*   使用`static if`.

`static if`这是一个用于向量加法的示例。

```
Vec!N add(int N)(Vec!N a, Vec!N b)
{
    static if (N == 4)
    {
        // Use vector ops
    }
    else
    {
        // Use generic routine
    }
} 
```

是在编译时评估的`static if`，因此在运行时没有分支成本。

# c# - 查找并替换字符串中的特定单词

> ID：14246433
> 
> 赞同：-3
> 
> 时间：2013-01-09T21:03:45.843
> 
> 标签：c#

我希望编写一些 c# 代码，在其中找到字符串中的特定单词并将其从字符串中删除而不删除整个字符串。

我试过了，但它不起作用：

```
if (openFile.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    // Read the files
    for (int i = 0; i < openFile.FileNames.Count(); i++ )
    {
        if (openFile.FileNames[i].Contains("Unknown Album"))
        {
            openFile.FileNames[i] = 
                openFile.FileNames[i].Replace("Unknown Album", string.Empty);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T21:08:18.103

类的`.FileNames`属性`OpenFileDialog`是**readonly**。您必须将值存储在临时字符串中。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filenames.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filenames.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:09:05.543

```
if (openFile.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    // Read the files
    for (int i = 0; i < openFile.FileNames.Count; i++ )
    {
        var file = openFile.FileNames[i];
        if (file.Contains("Unknown Album") && file  != "Unknown Album")
        {
            openFile.FileNames[i] = file.Replace("Unknown Album", string.Empty);
        }
    }
} 
```

# android - 从一页切换到另一页

> ID：14246440
> 
> 赞同：0
> 
> 时间：2013-01-09T21:04:17.547
> 
> 标签：android, android-layout

我是 Android 编程新手，我正在开发我的第一个应用程序“FunFacts”，其中应该有 100 多个很酷的东西可以了解自然、科学等。我的问题是：我如何使用从一个页面切换到另一个页面“左”和“右”两个按钮？我应该使用哪种方法？我不认为水平滚动视图是解决方案。

因此，如果我有 2 种不同的布局，第一页和第二页，我如何在我的应用程序中从一种切换到另一种？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:20:48.500

听起来你可能想要一个`ViewPager`. 下面是安卓教程的链接。这会创建一个幻灯片类型的效果，听起来就像您想要的那样。你说你会有不同的布局，这将使用一种布局，但你可以自定义内容，我认为你会想要一个，所以它看起来都相对相同

[文档](http://developer.android.com/training/animation/screen-slide.html)

**更新**

不，您不必创建 100 个布局或活动。各有一个。以下将是一个帖子的链接，可以更好地解释它。那篇文章解释了它是如何像列表视图一样的，因为您将不同的页面添加到视图适配器中，就像使用列表一样。您可以对所有人使用相同的布局，只需向其中添加新数据（如列表）。可能将它们存储在 ArrayList 或数据库中，如果您有这么多并且希望将大量数据附加到它们。我希望这是有道理的，并有所帮助。我建议从几页开始，看看它是如何工作的，遵循这些示例，如果你遇到困难，然后发布一个更具体的问题，说明你无法开始工作。

[关联](https://stackoverflow.com/questions/8392520/using-viewpager-in-my-application)

# angularjs - angularjs - 承诺永远不会在控制器中解决

> ID：14246442
> 
> 赞同：8
> 
> 时间：2013-01-09T21:04:27.873
> 
> 标签：angularjs

在我的控制器中，我得到了另一项服务的承诺。我在其中添加了一个“then”子句，但从未调用过“then”。

看到这个 plunker：[http](http://plnkr.co/edit/dX0Oz1?p=preview) ://plnkr.co/edit/dX0Oz1?p=preview （[javascript 版本](http://plnkr.co/edit/tB1W6gND68GVlCNKV8H4)）

'fakeLongRunningPromise' 创建一个承诺，在 2 秒后自行解决。

在控制器本身中，一旦承诺得到解决，我就会向控制台发送一条注释。

我可以说承诺正在解决，因为它输出到控制台的“正在解决的承诺”。为什么它不输出“承诺已解决”？

认为由于控制器返回，承诺可能会“超出范围”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T21:32:52.880

AngularJS 的 promise 解析结果在 $digest 循环内异步传播。因此，注册的回调`then`只有在进入 $digest 循环时才会被调用。在“AngularJS 世界之外”`setTimeout`执行，因此不会触发回调。

解决方案是使用`Scope.$apply`或`$timeout`服务。这是带有 $apply 的版本：

```
 window.setTimeout(function() {
        console.log("Resolving promise");
        $scope.$apply(function(){
          deffered.resolve("worked");
        });
      }, 2000); 
```

这是一个固定的 plunk (JavaScript)：[http ://plnkr.co/edit/g5AnUK6oq2OBz7q2MEh7?p=preview](http://plnkr.co/edit/g5AnUK6oq2OBz7q2MEh7?p=preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:37:31.060

我已经使用`$timeout`而不是`setTimeout`它的工作原理：

```
 # Resolve the promise after 2 seconds
  $timeout( ()->
    console.log "Resolving promise"
    deffered.resolve ("worked")
  , 2000) 
```

# algorithm - 如何在矩阵区域中找到最小或最大元素？

> ID：14246443
> 
> 赞同：1
> 
> 时间：2013-01-09T21:04:33.173
> 
> 标签：algorithm

对于具有整数值的 NxM 矩阵，找到区域 (x1,y1) (x2,y2) 的最小元素的最有效方法是什么，其中 0 <= x1<=x2 < M 和 0 <= y1 <= y2 < N

我们可以假设我们将多次查询不同的区域。

我想知道我们是否可以将范围最小查询方法扩展到这个问题。 [http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor)

非常简单的解决方案可以是使用 RMQ（[段树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestorb)）最有效的解决方案，然后逐行或逐列地应用它。

最坏情况的复杂度是 min(N,M)*log(max(N,M))

但我仍然相信我们可以做得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:09:16.637

鉴于没有关于矩阵内容或存储方式的其他信息，除了扫描给定区域中的每个条目之外，不可能提出任何建议。那是**O((x2-x1) * (y2-y1))**。你的问题太模糊了，不能说别的。

如果您对矩阵有所了解，例如，如果您知道元素可能以某种方式排序，您可能会做得更好（概率上，在平均情况下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:59:02.413

这取决于您所说的“最有效的方式”是什么意思。可以最大限度地减少查询时间本身、预处理时间或内存需求。

如果只应该最小化查询时间，“最有效的方法”是预先计算所有可能的区域。然后通过返回一些预先计算的值来处理每个查询。查询时间为 O(1)。内存和预处理时间都很大：O((NM) ² )。

更实用的是使用OP 中提到的页面中的[稀疏表算法](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Sparse_Table_%28ST%29_algorithm)。该算法准备了一个包含所有二次幂长度区间的表，并使用一对这些区间来处理任何范围最小查询。查询时间为 O(1)。内存和预处理时间为 O(N log N)。并且该算法可以很容易地扩展到二维情况。

![2D 中的稀疏表算法](../Images/ade8c80a6f09fb7704a22c79dd906de8.png)

只需准备一个包含所有长度为 2 的幂和高度为 2 的幂的矩形的表，并使用其中四个矩形来处理任何范围最小查询。结果是每个矩形至少有四个最小值。查询时间为 O(1)。内存和预处理时间为 O(NM*log(N)*log(M))。

这篇论文：[Amihood Amir、Johannes Fischer 和 Moshe Lewenstein 的“二维范围最小查询”](http://www-ab.informatik.uni-tuebingen.de/people/fischer/amir07two.pdf)提出了如何将该算法的内存需求和预处理时间减少到几乎 O(MN)。

这篇论文：[Hao Yuan 和 Mikhail J. Atallah 的“Data Structures for Range Minimum Queries in Multidimensional Arrays”](http://www.yuanresearch.com/rmq_highdim.pdf)给出了具有 O(1) 查询时间和 O(NM) 内存和预处理时间的不同算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:08:59.350

伪代码：

```
function getMax(M, x1, x2, y1, y2)
    max = M[x1,y1]
    for x = x1 to x2 do
        for y = y1 to y2 do
            if M[x,y] > max then max = M[x, y]
    return max 
```

这是输入大小中的 O(n)，只能合理地解释为矩阵区域 (x2 - x1) * (y2 - y1) 的大小。如果您想要最小值，请将 max 更改为 min 并将 > 更改为 <。您不能做得比 O(n) 更好，即检查每个可能的元素。假设你有一个比 O(n) 更快的算法。然后它不会检查所有元素。要获得算法的失败案例，请取出它不检查的元素之一，并将其​​替换为 (max + 1)，然后重新运行算法。

# scala-2.10 - 获取具有更多层次深度的调用函数

> ID：14246444
> 
> 赞同：1
> 
> 时间：2013-01-09T21:04:35.153
> 
> 标签：scala-2.10, scala-macros

以下代码获取调用函数（如 C _ _ FUNC _ _）：

```
def __func__(c: Context) = {
    import c.universe._
    c.enclosingMethod match {
        case DefDef(mods, name, tparams, vparamss, tpt, rhs) =>
            c.universe.reify(println(
                "\n  mods "+c.literal(mods.toString).splice
                +"\n  name "+c.literal(name.toString).splice
                +"\n  tparams "+c.literal(tparams.toString).splice
                +"\n  vparamss "+c.literal(vparamss.toString).splice
                +"\n  tpt "+c.literal(tpt.toString).splice
                +"\n  rhs "+c.literal(rhs.toString).splice
            ))
        case _ => c.abort(c.enclosingPosition, "NoEnclosingMethod")
    }
} 
```

但是如何获得更多的深度，即获取调用宏的函数的函数的名称？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:01:16.587

您可以尝试检查`c.enclosingUnit`或更简单的东西，例如`c.enclosingClass`or `c.enclosingMethod`。获得外壳后，您可以遍历它并尝试检测您的`c.macroApplication`.

然而，这种方法可能不是很健壮，因为类型检查器可以显着地重新散列被类型检查的树，因此您将无法`c.macroApplication`在预类型器封闭树中找到后类型器。我记得有人遇到过这些问题，但我自己没有尝试过这种方法。

# javascript - 在页面长度更改时保持页面位置

> ID：14246445
> 
> 赞同：5
> 
> 时间：2013-01-09T21:04:35.373
> 
> 标签：javascript, jquery

假设我有这样的情况：

*   页面长 4000 像素。
*   用户向下滚动页面，因此 1000 像素的内容隐藏在视口上方。

然后，用户单击一个按钮，任意长度的内容通过页面顶部的 AJAX 加载，按下视口下方的按钮（以及用户正在查看的内容）。

我尝试编写一个 Javascript 回调来向下滚动到用户在单击按钮之前正在查看的内容，但体验并不是无缝的（插入新内容时“向上”滚动，然后向后滚动“向下” ”）。

有没有办法让视口固定在用户正在查看的内容上？

这是一个简化的例子，但应该明白这一点。

```
<div style="height: 1000px; width:1000px;" id="top-div">some content above the fold</div>
<button id="button">Click Me</button>
<img src="img.jpg" alt="Some image the user was looking at when they clicked the button." />

<script>
$("button").click(function() {
    $.get('/new/content', function(response) {
        $("#top-div").before(response);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:00:27.957

**延迟显示新内容**

想到的最接近优雅的解决方案是延迟显示新内容，直到它在视口之内或之下。换句话说，不要改变视口上方的任何主要布局元素的高度；当它们在视口内或视口下方时更改它们，当它不会造成任何伤害时。*在安全的情况下显示它们。*

例如，用户滚动到一个非常高的页面的底部三分之一。当它们在那里时，一些新的或不同大小的 Ajax 内容会在页面顶部附近加载，但尚未显示。用户向上滚动页面，一旦所有受影响的布局区域滚动到视图中，就会显示新内容，就好像它刚刚加载一样。

基本上，当加载 Ajax 内容时，检索布局元素的滚动位置，然后根据页面的当前滚动位置显示内容或将其添加到队列中。每当用户滚动页面或单击锚标记（或更改页面滚动位置的任何操作）时，检查队列以查看是否仍有任何内容需要显示，并确定现在是否可以安全显示。

**使内容可折叠**

另一种选择是让 Ajax 内容以可折叠的格式显示。它最初可以以不影响页面布局的小尺寸显示（如果布局元素位于视口上方）。然后，用户可以单击内容在折叠格式和完整版本之间切换，或者，在以前的想法中，它可以在布局元素滚动到视图中时自动展开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:27:01.413

看看这个小提琴：http: [//jsfiddle.net/FYEYB/](http://jsfiddle.net/FYEYB/)

这是重要的代码：

```
$("button").click(function() {
  //cache the org height
  var orgHeight = $("#content").height();
  //run your ajax request.
  mockAjax(function() {
    //in the callback ajust the height
    $(window).scrollTop($(window).scrollTop() + $("#content").height() - orgHeight);
  });
}); 
```

基本上在您的 ajax 请求的回调中，将容器高度的差异添加到之前的高度。您可能需要添加检查以确保确实在视口上方添加了新内容，但我会让您自己弄清楚。

# php - 当 PHP 中达到一个突破时，它突破了多少个级别？

> ID：14246447
> 
> 赞同：0
> 
> 时间：2013-01-09T21:04:41.857
> 
> 标签：php

好的，这可能是一个基本问题，但我想要一个明智的答案，而且我似乎无法通过谷歌获得正确的关键字来获得答案。如果这是重复的，请关闭它并指出正确的方向。

所以这就是问题所在。在下面的代码中，当所指向的 break 被执行时，它也在哪里发生了？

```
case 'changeEmployeeInfo':
    $con = db_connect(DBNAME, DBUSERNAME, DBPASSWORD , DBHOST);
    $query = 'UPDATE USERS SET firstname = ?, lastname = ?, email = ? where idusers = ?';
    $updateValues = array($firstName,$lastName,$email,$employeeID);
    $newID = db_change($query,$updateValues,$con);
    if($_SESSION['role']==1||$_SESSION['role']==3||$_SESSION['role']==4){
        if($_POST['status']== true){
            $status = 1;
        }elseif($_POST['status']==false){
            $status = 0;
        }
        else{
            break;//<--THIS IS THE BREAK I'M TALKING ABOUT
        }
        $query = 'UPDATE USERS SET status = ? where idusers = ?';
        $updateValues = array($status, $employeeID);
        $newID = db_change($query,$updateValues,$con);
    }
    db_disconnect($con);
    break; 
```

我的直觉告诉我该`db_disconnect`函数仍将被执行，但`UPDATE USERS`查询及其相关行将不会被执行。我这样想对吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:06:54.347

`break`在 PHP 中恰好打破了一个级别，在您的情况下是`case`. 要打破更多关卡，请使用`break n`：

从[文档](http://php.net/manual/en/control-structures.break.php)中：

```
$i = 0;
while (++$i) {
    switch ($i) {
    case 5:
        echo "At 5<br />\n";
        break 1;  /* Exit only the switch. */
    case 10:
        echo "At 10; quitting<br />\n";
        break 2;  /* Exit the switch and the while. */
    default:
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:05:59.187

> 当 PHP 中达到一个突破时，它突破了多少个级别？

1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:08:01.853

In your example, break will move out to the `switch` level, leaving your `case` statement. `db_disconnect` will not be run.

# mysql - MySql：根据排名增加从表中选择

> ID：14246448
> 
> 赞同：1
> 
> 时间：2013-01-09T21:04:43.333
> 
> 标签：mysql

例如我有以下数据：

```
rank         value
___________________
1            "A"
2            "B"
5            "C"
3            "D"
4            "E"
6            "F" 
```

我只想在排名增加时选择值，所以我应该只得到

```
"A", "B", "C", "F". 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:53:09.240

假设有数字 id 列，那么您可以使用此查询：

```
SELECT 
    value
FROM
    tbl AS t1       
WHERE
    (SELECT IFNULL(MAX(rank), 0) FROM tbl AS t2 WHERE t2.id < t1.id) < t1.rank 
```

由于第一行，IFNULL 在那里。

# commit - 为什么有时在 TortoiseHg 中提交时它没有显示任何变化？

> ID：14246449
> 
> 赞同：0
> 
> 时间：2013-01-09T21:04:46.380
> 
> 标签：commit, tortoisehg, bitbucket

有时当我在本地更改项目并出于某种奇怪的原因想要提交它时，提交窗口显示没有应用任何更改。

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T10:49:41.610

`.hgignore`可能在文件中被忽略了。

# android - 如何将值从活动传递到服务

> ID：14246451
> 
> 赞同：0
> 
> 时间：2013-01-09T21:04:50.617
> 
> 标签：android, service

我试图通过一个意图传递我的价值，如果它是从 Activity 到另一个 Activity，它工作得很好。但这次是从一个Activity到一个Service。我认为这是正确的方法？但我收到一个错误服务类

我的活动

```
@Override
    protected void onPause() {
        // TODO Auto-generated method stub
        myLocation.disableCompass();
        super.onPause();
        locationManager.removeUpdates(this);

    Intent intent = new Intent(this, LocationLoggerService.class);
    intent.putExtra("midllat", midllat);
    intent.putExtra("midlongi", midlongi);
    startActivity(intent);

} 
```

我的服务等级

```
@Override
public void onCreate() {
    // Find my current location
    locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            2000, 0, this);
    Criteria crit = new Criteria();
    towers = locationManager.getBestProvider(crit, false);
    Location location = locationManager.getLastKnownLocation(towers);
    Toast.makeText(this, "The app is know running in the background",
            Toast.LENGTH_LONG).show();
    gm = new GoogleMaps(); 
```

我在 getIntent() 中遇到错误它找不到方法，是因为在服务类中吗？该怎么办？

```
 Intent intent = getIntent();
    String test1 = intent.getStringExtra("midllat");
    String test2 = intent.getStringExtra("midlongi");

    midllat = Double.parseDouble(test1);
    midlongi = Double.parseDouble(test2);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:14:13.500

一个问题当然是这样的：

```
startActivity(intent); 
```

如果您尝试启动 a `Service`，则不应调用`startActivity`. 试试[`startService`](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)吧。

假设您只是忘记在问题中更改它，那么您指出的另一个问题是`getIntent`. A`Service`没有那个方法。那是一种`Activity`方法。服务通常与许多意图相关联，通常是同时发生的，因此一种`getIntent`方法实际上没有意义。通读文档`Service`，尤其是[生命周期部分](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)。

您可能希望将您的`Intent`相关代码放入[`onStartCommand`](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29).

# objective-c - 带有 NavigationController 和 TabController 的情节提要

> ID：14246454
> 
> 赞同：3
> 
> 时间：2013-01-09T21:05:01.813
> 
> 标签：objective-c, xcode, uinavigationcontroller, uitabbarcontroller, storyboard

看起来这应该很容易弄清楚，但是今天下午我没有运气。我把我的问题的这个快速、简化的故事板模型拼凑在一起。

基本上，我希望下面的表格视图控制器也位于标签栏控制器中（除了已经存在的导航控制器）。选项卡将在两个表视图控制器之间切换。

现在，带有按钮的视图控制器充当一种菜单。每个按钮都指向一个表格视图控制器。理想情况下，此视图控制器*不会*显示标签栏，并且只能从表格视图控制器的导航栏上的后退按钮访问。

我尝试了几种不同的嵌入到 tabbarcontrollers 的方法，但它们都没有产生预期的结果：

-我尝试选择两个表视图控制器并将它们嵌入选项卡视图控制器中。标签栏没有出现在模拟器中，并且出现“无法到达的场景”警告。

-我尝试将初始导航控制器嵌入到 tabbarcontroller 中。这将为第一个“菜单”页面创建一个选项卡条目。一旦我将表格视图连接到选项卡视图，它也会导致推送问题。

我会很好地在故事板之上实现一些编程选项，我只是为这个项目选择了故事板，因为它是一个相对简单的数据表示。

解决这个问题的正确方法是什么？谢谢！

![故事板截图](../Images/484c4094659902b4d4f0f60fdb6cc00f.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T23:38:01.083

标签栏控制器需要成为视图层次结构的根视图控制器。将标签栏控制器放在任何其他类型的容器控制器内，这违反了 HIG 和 Apple 的标准。

来自苹果文档：

> 部署选项卡栏界面时，您必须将此视图安装为窗口的根目录。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。

所以，这里的底线是你需要重新考虑你的设计。一种选择是将 s 设置`UITabBarController`为窗口的根视图，然后将每个`UITableViewController`s 放在 a 中，a`UINavigationController`放在`UITabBarController`. 通过这种方式，您仍然可以获得导航栏，并遵守 Apple 的设计指南（您也不会收到那些讨厌的警告，如果您尝试将 a 安装`UITabBarController`为根视图以外的任何内容，Apple 现在甚至可能会抛出异常窗口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T08:56:10.993

我接受 JMStone 的回答，但我们可能会遇到需要将标签栏控制器放在其他控制器中的情况，尤其是表视图控制器。

请参考[Storyboard 导航控制器和标签栏控制器](https://stackoverflow.com/questions/23548088/storyboard-navigation-controller-and-tab-bar-controller)

还有 Matthjin 的好例子：http: [//cl.ly/VQLa](http://cl.ly/VQLa)

希望它能帮助一些想要将标签栏控制器放在表格视图控制器中并想要正确导航的人。

# javascript - 如何在不移动元素的情况下计算元素的位置？

> ID：14246455
> 
> 赞同：0
> 
> 时间：2013-01-09T21:05:02.150
> 
> 标签：javascript, jquery, positioning

我需要更改元素的水平位置。为此，我将其`left`属性更改为`.css('left', value)`. 如果没有`left`定义值，这将使元素相对于它应该在的位置移动。

现在我需要重新计算将元素移动到其他位置的位置，为此，如果我没有更改它的`left`属性，我需要元素应该在的位置。

我可以删除该`left`值并询问其位置，但随后元素也会移动并希望避免这种情况，因为我可能会使元素在位置之间跳转。

我怎样才能得到元素所在的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:08:21.763

一种方法是在 DOM-ready 上读取元素的默认左值，并将其作为元素的`data-*`属性添加到元素中——我们称之为`data-default-left`或类似的名称。然后，当您需要进一步使用默认值时，您可以始终引用该值。

使用 jQuery的方法`data-*`很容易使用[`.data()`](http://api.jquery.com/data/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:10:04.810

`left`如果多次更改样式，元素不会在位置之间跳转。只要您的函数正在运行，浏览器中就没有更新。您可以安全地重置`left`样式，获取位置，然后设置新`left`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:10:25.347

将 left 设置为 0、重新计算并将 left 设置为新位置将是您的情况下最简单的更改。根据我的经验，浏览器不会在 css 更新之间重新绘制。

其他一些选项：

1.  使用绝对定位而不是相对定位。那么你的出身是一致的。

2.  使用[jQuery UI 位置插件](http://jqueryui.com/position/)。它允许您设置一个元素相对于另一个元素的位置。很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:10:26.373

`.data()`在开始移动之前使用它来存储这些信息怎么样？然后你每次需要时把它收集回来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T21:13:50.827

简单的。将初始剩余量存储在 dom 加载的变量中，然后在稍后进行其他计算时引用它：

```
$(function () { 

    var $element = $("#ME_ELEMENT_ID");

    var initialLeft = $element.offset().left;

    // Change your left here

    $element.css('left', '200px');

    // initialLeft still contains the old value

}); 
```

# vba - 试图让 VBA 处理显示的任何形式的事件

> ID：14246456
> 
> 赞同：0
> 
> 时间：2013-01-09T21:05:08.267
> 
> 标签：vba, excel, userform

因此，我试图在工作簿中显示任何用户表单时启动一个事件。他们都会做同样的事情，但我不想为每个`UserFormX.Show`.

我已经阅读`UserForm_Activate()`并`UserForm_Initialize()`了解它们类似于以下内容。

```
Private Sub UserForm_Activate()
    ''Do some stuff
End Sub 
```

我也明白`UserForm`应该是表单本身的名称。任何激活/显示的用户表单有没有办法让这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:28:26.870

不完全是你所追求的，但它可能是你能得到的最接近的。

添加对的引用`Microsoft Forms 2.0 Object Library`

在标准模块中创建一个`Sub`来处理常见操作

```
Sub FormInitialize(frm As MSForms.UserForm)
    With frm

        ' do stuff

    End With
End Sub 
```

在每个表单模块中创建一个标准`Initialize event`

```
Private Sub UserForm_Initialize()
    FormInitialize Me
End Sub 
```

仍然必须`Sub`为每个表单创建一个，但至少它总是相同的，并且只有一个实际初始化逻辑的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:29:59.857

您可以从每个表单的 Initialize 事件中调用主线代码中的例程吗？

```
Private Sub UserForm_Initialize()
   Call MainCode_FormHandler(.Me)
End Sub 
```

在主代码中：

```
Public Sub MainCode_FormHandler(oForm as Form)
   With oForm
      ' Set form's properties here
   End With
End With 
```

如果您需要确定哪个表单已通过，您可以包含测试 oForm.Tag 的逻辑。在表单的“属性”对话框中设置表单的标签。

# ios - 使用 bitmapdata.draw() AS3 时出现错误

> ID：14246460
> 
> 赞同：2
> 
> 时间：2013-01-09T21:05:22.067
> 
> 标签：ios, actionscript-3, screenshot, bitmapdata

我搜索并尝试了很多方法来修复这个错误。我有以下适用于 iOS 的代码。

```
import flash.media.CameraRoll;
//import flash.events.MediaEvent;
import flash.events.Event;  
import flash.events.ErrorEvent;
stop();
var IMAGE_URL:String = new String(backgroundd);
var ldr:Loader = new Loader();
var bitmap1:Bitmap;
var bitmap2:Bitmap;
var bitmap3:Bitmap;
var bitmap4:Bitmap;
var bitmap5:Bitmap;
var image = new images();
ldr.contentLoaderInfo.addEventListener(Event.COMPLETE, addSides);
ldr.load(new URLRequest(IMAGE_URL));

function addSides(evt:Event):void {
      var bmp:Bitmap = ldr.content as Bitmap;

      bitmap1 = new Bitmap(bmp.bitmapData);

       bitmap1.rotationX = 90;
       addChild(bitmap1);

       bitmap2 = new Bitmap(bmp.bitmapData);
       bitmap2.z = 400;
       bitmap2.rotationY = 90;
       addChild(bitmap2);

       bitmap3 = new Bitmap(bmp.bitmapData);
       bitmap3.z = 400 ;     
       addChild(bitmap3);
       bitmap5 = new Bitmap(bmp.bitmapData);
       bitmap5.y = 400;
       bitmap5.z = 400;
       bitmap5.rotationX = 270;
       addChild(bitmap5);
       middle()
    }

    function middle(): void {
        image.width = 230;
        image.height = 175;
        image.x = 209;
        image.y = 227;
        addChild(image);
    }
    if (CameraRoll.supportsAddBitmapData) 
    { 
        var cameraRoll:CameraRoll = new CameraRoll(); 
        cameraRoll.addEventListener(ErrorEvent.ERROR, onCrError); 
        cameraRoll.addEventListener(Event.COMPLETE, onCrComplete); 
        drawit()
    } 
    else 
    { 
        trace("not supported."); 
    } 

    function onCrError(event:ErrorEvent):void 
    { 
    } 

    function onCrComplete(event:Event):void 
    { 
        gotoAndStop(1,null);
    }

    function drawit(){
        var bitmapData:BitmapData = new BitmapData(stage.stageWidth, stage.stageHeight); 
        bitmapData.draw(stage); 
        cameraRoll.addBitmapData(bitmapData); 
    } 
```

它只保存背景，但不保存位图和图像。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:30:23.040

假设 ldr.content 是您的背景图片。
你的角度不对。
在任何一个轴上旋转 90 度或 270 度将导致图像不可见。

# .net - devexpress gridcontrol 刷新数据源

> ID：14246465
> 
> 赞同：0
> 
> 时间：2013-01-09T21:05:43.820
> 
> 标签：.net, devexpress, datasource, gridcontrol

使用此代码，我填充了一个 devexpress 网格控件，一切正常：

```
Private Sub tbccegek_SelectedPageChanged(ByVal sender As Object, ByVal e As DevExpress.XtraTab.TabPageChangedEventArgs) Handles tbccegek.SelectedPageChanged
    If tbccegek.SelectedTabPageIndex = 3 Then

        'gcCegek.DataSource = Nothing
        ConnectToDb(fbconn, "public")
        fbcommand.Connection = fbconn
        fbcommand.CommandText = "select cegazon, rovidnev, irsz||' '||varos||' '||utca||' '||hazszam as cim, adoszam, konyvpnem, osszktg_forg from cegek order by cegazon"
        fbadapter.SelectCommand = fbcommand

        fbadapter.Fill(fbdataset)
        fbdataset.Tables(0).TableName = "cegek"
        gcCegek.DataMember = "cegek"
        gcCegek.DataSource = fbdataset

        For i = 0 To fbdataset.Tables(0).Rows.Count - 1
            If fbdataset.Tables(0).Rows(i).Item(5) = "1" Then
                fbdataset.Tables(0).Rows(i).Item(5) = "Összköltség"
            ElseIf fbdataset.Tables(0).Rows(i).Item(5) = "0" Then
                fbdataset.Tables(0).Rows(i).Item(5) = "Forgalmi ktg."
            End If
        Next

        gcCegek.MainView.PopulateColumns()

        columnview = gcCegek.MainView
        columnview.Columns(0).Caption = "Cégazonosító"
        columnview.Columns(1).Caption = "Cégnév (rövid)"
        columnview.Columns(2).Caption = "Cím"
        columnview.Columns(3).Caption = "Adószám"
        columnview.Columns(4).Caption = "K.pnem"
        columnview.Columns(5).Caption = "Ktg.elsz"
        GridView1.BestFitColumns()

        fbconn.Close()
    End If
End Sub 
```

但是，如果我在应用程序中修改一条记录，然后通过更新 sql 将其保存到数据库中，然后再次单击选项卡上的 gridcontrol，我看到，gridcontrol 中的值没有改变。但是在数据库中，存在修改后的值。

如您所见，在标签页更改事件中，我从一开始就填充了网格，我认为也应该有修改后的值。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:08:30.083

解决这个问题的方法是重新从 DB 中重新获取数据到网格所连接的 DataSource。在这种情况下，网格将知道数据已更改并刷新其内容。

另外，我建议您在发布的事件处理程序中设置断点，并确保从数据库中获取实际修改的数据。

此外，使用以下代码更正确：

```
if not e.Page Is Nothing andalso e.Page.SelectedTabPageIndex = 3 Then
... 
```

# php - 获取 url 并解析出其中的一部分

> ID：14246469
> 
> 赞同：-2
> 
> 时间：2013-01-09T21:05:51.253
> 
> 标签：php

> **可能重复：**
> [获取没有 TLD 的域名](https://stackoverflow.com/questions/7760797/getting-domain-name-without-tld)

所以我有一个我正在努力工作的网站。在 URL 中有信息，我想解析它并使用它对 mysql 进行 db 调用：

[http://www.relevant-info.org/home.html](http://www.relevant-info.org/home.html)

我想把 Url 放到一个字符串中。

然后我只想从网址中获取“相关信息”。

```
$webaddress = $_SERVER["SERVER_NAME"];
$parts = parse_url($webaddress);
$url = substr($Parts, 4, -4); 
```

^ 我正在使用它，并且我在一个正在测试它的 VM 上获得了 IP 地址（它是一个 centos 5.8 灯），所以简而言之，到目前为止这个接缝工作得很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:15:15.713

**无情**的学分

 **您可以使用 PHP parse-url 函数轻松找到它：[parse_url](http://php.net/manual/en/function.parse-url.php)

用法示例：如果您想获取“相关信息”，**PHP 5.4**有效代码可能如下所示：

```
$Url = substr(parse_url("http://www.relevant-info.org/home.html")[1], 4, -4); 
```

输出

> 相关信息

**对于 PHP 5.3 及更低版本**

```
$Parts = parse_url("http://www.relevant-info.org/home.html");
$Url = substr($Parts, 4, -4); 
```

在未来的情况下，如果您没有像 parse-url 这样的花哨功能，您可以使用**Regex**或使用 str_split

请记住 str_split 需要较少的资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:54:43.740

我还有一个好主意！

爆炸呢？

```
var_dump(explode('.', 'http://www.relevant-info.org/home.html'));
array(4) {
  [0]=>
  string(10) "http://www"
  [1]=>
  string(13) "relevant-info"
  [2]=>
  string(8) "org/home"
  [3]=>
  string(4) "html"
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T21:14:35.397

parse_url 无济于事，因为它不会拆分域。

我会建议一个正则表达式。根据您是否仅使用 www 子域，例如：

`preg_match(#http(s)?://(www.)?(.+?)\..*#, $subject, $matches)`

`$matches[3]`应包含 TLD 的子域**

# iphone - 应用内购买免费订阅提示用户分享信息

> ID：14246470
> 
> 赞同：2
> 
> 时间：2013-01-09T21:05:58.603
> 
> 标签：iphone, ios, in-app-purchase, newsstand-kit

我正在开发 NewsStand 应用程序，用户可以通过 iOS SDK 的 StoreKit API 获得免费订阅。

在我的 iOS 设备上的沙盒中对此进行测试时，同意购买后会在警报中显示以下消息：

> 分享您的信息？[此处的应用名称] 的发布者希望您的姓名、电子邮件和邮政编码根据他们的隐私政策使用。
> 
> 带有“不允许”和“允许”按钮

我知道如何关闭自动续订订阅。该选项将出现在添加持续时间和定价“提供营销选择加入激励？”中。但我不知道如何禁用免费订阅的这个提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:05:35.267

我不确定您是否正确通过切换“提供营销选择加入激励？”来关闭自动更新订阅。

据我所知，没有办法避免这个选项（从营销角度来看，这是一个功能）。任何一个用户都信任你，他/她会允许，或者他/她不会。对此没有什么太严肃或挑剔的，他们已经完成了订阅部分并拥有您的杂志/报纸。唯一可能的问题是，如果有人想阅读您的隐私政策，那么您应该确保它可以访问和更新。（但完全同意，如果您不想要此信息，则无需将其提供给用户！）

这里有类似的东西，但你看到 1 说有可能 1 说不。

[自动更新内容的应用内购买提示用户共享信息](https://stackoverflow.com/questions/7578115/in-app-purchase-for-auto-renewable-content-prompts-user-to-share-information)

编辑：好吧，似乎可以按照您在自动续订订阅中所说的去做，但与此同时，这里有一条评论：

> 似乎对于免费订阅，没有办法删除选择加入消息：developer.apple.com/library/ios/documentation/...“请注意，免费订阅不能提供营销选择加入激励（因为订阅已经免费），但仍会询问用户是否愿意选择分享他们的信息。”

——古斯塔沃·安布罗齐奥

同样的问题在这里 [https://stackoverflow.com/questions/13595779/in-app-purchase-disabling-marketing-opt-in-incentive](https://stackoverflow.com/questions/13595779/in-app-purchase-disabling-marketing-opt-in-incentive)

# ruby-on-rails - 在 Ruby 中将散列数组转换为 ONE 散列

> ID：14246476
> 
> 赞同：7
> 
> 时间：2013-01-09T21:06:22.533
> 
> 标签：ruby-on-rails, ruby

我有一个哈希数组，其中的数组看起来像这样：

```
result = [
  {"id_t"=>["1"], "transcript_t"=>["I am a transcript ONE"]},
  {"id_t"=>["2"], "transcript_t"=>["I am a transcript TWO"]},
  {"id_t"=>["3"], "transcript_t"=>["I am a transcript THREE"]}
] 
```

如果可能的话，我想做的是将它转换为一个哈希，其中每个键=>值对都取自每个哈希的值。我不认为我解释得很好，所以这就是我的意思：

```
end_result = {
  "1"=>"I am a transcript ONE",
  "2"=>"I am a transcript TWO",
  "3"=>"I am a transcript THREE"
} 
```

我一直在搜索 Stack Overflow 和 Google 的各种方法，但在这个过程中我让自己感到困惑。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T21:11:58.297

我认为解决方案的关键是`Hash[]`，它将基于键/值数组创建一个哈希，即

```
Hash[[["key1", "value1"], ["key2", "value2"]]]
#=> {"key1" => "value1", "key2" => "value2"} 
```

只需添加一组`map`，您就有了解决方案！

```
result = [
  {"id_t"=>["1"], "transcript_t"=>["I am a transcript ONE"]},
  {"id_t"=>["2"], "transcript_t"=>["I am a transcript TWO"]},
  {"id_t"=>["3"], "transcript_t"=>["I am a transcript THREE"]}
]
Hash[result.map(&:values).map(&:flatten)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T13:59:55.997

试试这个

```
result.inject({}){|acc, hash| acc[hash.values[0][0]] = hash.values[1][0]; acc }

=> { "1"=>"I am a transcript ONE", 
     "2"=>"I am a transcript TWO",
     "3"=>"I am a transcript THREE" } 
```

# cakephp - cakePHP: / 重定向到 /index 但发送 get 而不是 post 请求

> ID：14246477
> 
> 赞同：0
> 
> 时间：2013-01-09T21:06:26.307
> 
> 标签：cakephp, post, request, requesthandler

我现在完全糊涂了，因为我想建立一个 api，但是 cake 有一些奇怪的行为：

如果我想发送一个 POST 请求让我们说“/controller”，它会被重定向到“/controller/index”（“controller”的“index”方法），这正是我所期望的。但是，我收到的不是 POST 请求，而是 GET 请求。

（比如我输出$this->request->method()，打印出请求的方法）

以前有人遇到过吗？我尝试在“Config”下的 routes.php 中将“/controller”路由到“/controller/index”，但效果不佳。

非常感谢，

法比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:33:17.400

你所描述的不是蛋糕的工作原理。`/foo`任何核心代码都不会将Post 请求重定向到`/foo/index`。此外，默认情况下，这两个 url 都映射到相同的控制器操作：index.html。

## 发现问题

*您可以通过暂时*将其放入您的应用控制器中轻松识别重定向问题::

```
function redirect($url) {
    debug($url);
    debug(Debugger::trace());
    die;
} 
```

这将转储一个堆栈跟踪，指示代码在调用时如何到达重定向方法。一旦您知道是什么导致重定向`/controller`到`/controller/index`，您就可以将注意力集中在真正的问题上。

请注意，显然任何类型的重定向都会将您的 post 请求“转换”为 get 请求 - 因为您不能同时从 php.ini 发出重定向和提交 post 数据。

# xml - 如何在 XStream 中相互引用两个列表？

> ID：14246482
> 
> 赞同：0
> 
> 时间：2013-01-09T21:06:36.793
> 
> 标签：xml, list, reference, xstream

我必须在两个列表的元素之间进行引用。我尝试过使用 XStream。以下是 XML 的示例：

```
<bookshop>
    <authors>
        <author id="a1">
            <name>Stanisław</name>
        </author>
    </authors>
    <books>
        <book id="b1">
            <author>a1</author>
            <title>Ubik</title>
            <price currency="PLN">29.0</price>
        </book>
    </books>
</bookshop> 
```

以及我的 Java 类的一些划痕：

```
public class Bookshop {
    private ArrayList<Author> authors;
    private ArrayList<Book> boooks;
}

public class Book {
    @XStreamAsAttribute
    private String id;
    private Author author;
    private String title;
    private Price price;
}

@XStreamConverter(value=ToAttributedValueConverter.class, strings={"value"})
public class Price {
    private double value;
    @XStreamAsAttribute
    private String currency;
}

public class Author {
    @XStreamAsAttribute
    private String id;
    private String name;
    private String surname;
} 
```

每次当我试图将 xml 放入类时，我都会在 Author autor 字段中得到空值。也许我需要更多注释，但我在 Xstream 文档中没有找到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:36:14.320

你`XML`错了。`XStream`如果您尝试序列化 的实例，以下是给出的结果`Bookshop`：

```
<bookshop>
  <authors>
    <author>
      <id>a1</id>
      <name>Yuri</name>
      <surname>Stanislaw</surname>
    </author>
    <author>
      <id>a2</id>
      <name>Bill</name>
      <surname>Gates</surname>
    </author>
  </authors>
  <books>
    <book>
      <id>b1</id>
      <author reference="/bookshop/authors/author[2]"/>
      <title>Programming basics</title>
      <price>
        <currency>USD</currency>
        <value>100.0</value>
      </price>
    </book>
  </books>
</bookshop> 
```

`XML`以上是使用以下设置序列化的：

```
xstream.setMode(XStream.XPATH_ABSOLUTE_REFERENCES);
xstream.alias("bookshop", Bookshop.class);
xstream.alias("author", Author.class);
xstream.alias("book", Book.class); 
```

我用于测试的完整源代码可以在[这里找到](http://www.nomorepasting.com/getpaste.php?pasteid=39026)

如果这不是参考问题的充分解决方案，我建议您自己编写`Converter`以与 XStream 一起使用，可以在[此处找到简短教程](http://xstream.codehaus.org/converter-tutorial.html)

# .net - 如何将鼠标滚轮事件传输到 WindowsFormsHost？

> ID：14246483
> 
> 赞同：3
> 
> 时间：2013-01-09T21:06:37.387
> 
> 标签：.net, wpf, mousewheel, windowsformshost

我在 WPF 应用程序中有一个 WinForms 控件。幸运的是，在 WPF 中，鼠标滚轮事件通常由鼠标光标下的控件处理......但如果它是 WinForms 控件，我必须先单击该控件以使其获得键盘焦点。当 WinForms 控件没有焦点时，如何绕过此行为并将鼠标滚轮事件发送到它？

（注意：`MouseWhee`l 和`PreviewMouseWheel`events 似乎不适用于 WindowsFormsHost。如果`PreviewMouseWheel`在 WindowsFormsHost 的父级中添加处理程序，则当鼠标位于非 WPF 控件顶部时不会调用它。显然，WinForms 控件也没有得到`MouseWheel`事件；事件似乎完全消失了。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T23:11:43.550

一种可能的解决方案是手动处理所有`WM_MOUSEWHEEL`消息并引发`MouseWheel`未聚焦控件的事件。我的附加行为实现了这个想法：

```
public static class CaptureMouseWheelWhenUnfocusedBehavior
{
    private static readonly HashSet<WindowsFormsHost> TrackedHosts =
        new HashSet<WindowsFormsHost>();

    private static readonly System.Windows.Forms.IMessageFilter MessageFilter =
        new MouseWheelMessageFilter();

    private sealed class MouseWheelMessageFilter : System.Windows.Forms.IMessageFilter
    {
        [DllImport("User32.dll"), SuppressUnmanagedCodeSecurity]
        private static extern IntPtr WindowFromPoint(System.Drawing.Point point);

        private static System.Drawing.Point LocationFromLParam(IntPtr lParam)
        {
            int x = (int)((((long)lParam) >> 0) & 0xffff);
            int y = (int)((((long)lParam) >> 16) & 0xffff);
            return new System.Drawing.Point(x, y);
        }

        private static bool ConsiderRedirect(WindowsFormsHost host)
        {
            var control = host.Child;
            return control != null &&
                  !control.IsDisposed &&
                   control.IsHandleCreated &&
                   control.Visible &&
                  !control.Focused;
        }

        private static int DeltaFromWParam(IntPtr wParam)
        {
            return (short)((((long)wParam) >> 16) & 0xffff);
        }

        private static System.Windows.Forms.MouseButtons MouseButtonsFromWParam(IntPtr wParam)
        {
            const int MK_LBUTTON = 0x0001;
            const int MK_MBUTTON = 0x0010;
            const int MK_RBUTTON = 0x0002;
            const int MK_XBUTTON1 = 0x0020;
            const int MK_XBUTTON2 = 0x0040;
            int buttonFlags = (int)((((long)wParam) >> 0) & 0xffff);
            var buttons = System.Windows.Forms.MouseButtons.None;
            if(buttonFlags != 0)
            {
                if((buttonFlags & MK_LBUTTON) == MK_LBUTTON)
                {
                    buttons |= System.Windows.Forms.MouseButtons.Left;
                }
                if((buttonFlags & MK_MBUTTON) == MK_MBUTTON)
                {
                    buttons |= System.Windows.Forms.MouseButtons.Middle;
                }
                if((buttonFlags & MK_RBUTTON) == MK_RBUTTON)
                {
                    buttons |= System.Windows.Forms.MouseButtons.Right;
                }
                if((buttonFlags & MK_XBUTTON1) == MK_XBUTTON1)
                {
                    buttons |= System.Windows.Forms.MouseButtons.XButton1;
                }
                if((buttonFlags & MK_XBUTTON2) == MK_XBUTTON2)
                {
                    buttons |= System.Windows.Forms.MouseButtons.XButton2;
                }
            }
            return buttons;
        }

        public bool PreFilterMessage(ref System.Windows.Forms.Message m)
        {
            const int WM_MOUSEWHEEL = 0x020A;
            if(m.Msg == WM_MOUSEWHEEL)
            {
                var location = LocationFromLParam(m.LParam);
                var hwnd = WindowFromPoint(location);
                foreach(var host in TrackedHosts)
                {
                    if(!ConsiderRedirect(host)) continue;
                    if(hwnd == host.Child.Handle)
                    {
                        var delta = DeltaFromWParam(m.WParam);
                        {
                            // raise event for WPF control
                            var mouse = InputManager.Current.PrimaryMouseDevice;
                            var args = new MouseWheelEventArgs(mouse, Environment.TickCount, delta);
                            args.RoutedEvent = WindowsFormsHost.MouseWheelEvent;
                            host.RaiseEvent(args);
                        }
                        {
                            // raise event for winforms control
                            var buttons = MouseButtonsFromWParam(m.WParam);
                            var args = new System.Windows.Forms.MouseEventArgs(
                                buttons, 0, location.X, location.Y, delta);
                            var method = typeof(System.Windows.Forms.Control).GetMethod(
                                "OnMouseWheel",
                                System.Reflection.BindingFlags.Instance |
                                System.Reflection.BindingFlags.NonPublic);
                            method.Invoke(host.Child, new object[] { args });
                        }
                        return true;

                    }
                }
            }
            return false;
        }
    }

    public static bool GetIsEnabled(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsEnabledProperty);
    }

    public static void SetIsEnabled(DependencyObject obj, bool value)
    {
        obj.SetValue(IsEnabledProperty, value);
    }

    public static readonly DependencyProperty IsEnabledProperty =
        DependencyProperty.RegisterAttached(
            "IsEnabled",
            typeof(bool),
            typeof(CaptureMouseWheelWhenUnfocusedBehavior),
            new PropertyMetadata(false, OnIsEnabledChanged));

    private static void OnIsEnabledChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        var wfh = o as WindowsFormsHost;
        if(wfh == null) return;

        if((bool)e.NewValue)
        {
            wfh.Loaded += OnHostLoaded;
            wfh.Unloaded += OnHostUnloaded;
            if(wfh.IsLoaded && TrackedHosts.Add(wfh))
            {
                if(TrackedHosts.Count == 1)
                {
                    System.Windows.Forms.Application.AddMessageFilter(MessageFilter);
                }
            }
        }
        else
        {
            wfh.Loaded -= OnHostLoaded;
            wfh.Unloaded -= OnHostUnloaded;
            if(TrackedHosts.Remove(wfh))
            {
                if(TrackedHosts.Count == 0)
                {
                    System.Windows.Forms.Application.RemoveMessageFilter(MessageFilter);
                }
            }
        }
    }

    private static void OnHostLoaded(object sender, EventArgs e)
    {
        var wfh = (WindowsFormsHost)sender;
        if(TrackedHosts.Add(wfh))
        {
            if(TrackedHosts.Count == 1)
            {
                System.Windows.Forms.Application.AddMessageFilter(MessageFilter);
            }
        }
    }

    private static void OnHostUnloaded(object sender, EventArgs e)
    {
        var wfh = (WindowsFormsHost)sender;
        if(TrackedHosts.Remove(wfh))
        {
            if(TrackedHosts.Count == 0)
            {
                System.Windows.Forms.Application.RemoveMessageFilter(MessageFilter);
            }
        }
    }
} 
```

它可以在 XAML 中使用：

```
<WindowsFormsHost namespace:CaptureMouseWheelWhenUnfocusedBehavior.IsEnabled="True" /> 
```

和后面的代码：

```
CaptureMouseWheelWhenUnfocusedBehavior.SetIsEnabled(host, true); 
```

**更新**：添加代码以引发 WinForms 控件的事件

# google-maps - OpenStreetMap 自由文本搜索不佳的解决方案

> ID：14246486
> 
> 赞同：1
> 
> 时间：2013-01-09T21:06:47.277
> 
> 标签：google-maps, geolocation, openstreetmap, street-address

我已经为我的城市（魁北克）建立了一个网站，使用所有的小路面板来快速查看可以停车或不能停车的地方（马路对面）。

唯一的问题是我们需要输入一个非常具体的地址格式才能让它找到这个地方。

例如，“123 rue st jean”有效，但不适用于“Subway”、“Cineplex-odeon”或几乎任何其他市场/餐厅的名称。

一种解决方案是将我们的地图从 OSM (OpenStreetMap) 更改为 Google-map，但它是：

1- 一份长期的工作（因为我不知道该怎么做）

2- 不是免费的（因为我们没有任何方式从网站上赚钱，但它会很烦人）

该网站是[parkmoi.com](http://www.parkmoi.com)，如果您想尝试，请使用 123 rue st jean。

那么......有没有人有办法改进地址研究或解释更改为谷歌地图？

# encryption - 是什么导致 XOR 加密返回“空白”？

> ID：14246487
> 
> 赞同：1
> 
> 时间：2013-01-09T20:57:06.973
> 
> 标签：encryption, c

使用 XOR 加密时某些字符为空的原因是什么？此外，解密时如何补偿？

例如：

```
....
void basic_encrypt(char *to_encrypt) {
    char c;
    while (*to_encrypt) {
        *to_encrypt = *to_encrypt ^ 20;
        to_encrypt++;
    }
} 
```

将为角色返回“无” `k`。显然，字符衰减对于解密是有问题的。

我认为这是由位运算符引起的，但我对二进制不是很好，所以我想知道是否有人可以解释。

在这种情况下，它是否将元素转换`k`为一些无空格的 ASCII 字符？这可以通过选择一些 y < x < z 运算符来补偿，其中 x 是运算符？

最后，如果没有得到补偿，除了猜测和检查之外，还有没有现实的填空解密策略呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T21:12:29.213

`'k'`具有 ASCII 值`107 = 0x6B`。`20`是`0x14`，所以

```
'k' ^ 20 == 0x7F == 127 
```

如果您的字符集与 ASCII 兼容。`127`是`\DEL`ASCII码，是不可打印的字符，打印出来就不会显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T21:23:07.900

You will have to know the difference between bytes and characters to understand which is happening. On the one hand you have the C `char` type, which is simply a presentation of a byte, not a character.

In the old days each character was mapped to one byte or octet value in a character encoding table, or code page. Nowadays we have encodings that take more bytes for certain characters, e.g. UTF-8, or even encodings that always take more than one byte such as UTF-16\. The last two are unicode encodings, which means that each character has a certain number value and the encoding is used to encode this number into bytes.

Many computers will interpret bytes in ISO/IEC 8859-1 or Latin-1, sometimes extended by Windows-1252\. These code pages have holes for control characters, or byte values that are simply not used. Now it depends on the runtime system how these values are handled. Java by default substitutes an `?` character in place of the missing character. Other runtimes will simply drop the value or - of course - execute the control code. Some terminals may use the ESC control code to set the color or to switch to another code page (making a mess of the screen).

This is why ciphertext should be converted to another encoding, such as hexadecimals or Base64\. These encodings should make sure that the result is readable text. This takes care of the cipher text. You will have to choose a character set for your plain text too, e.g. simply perform ASCII or UTF-8 encoding before encryption.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:11:49.000

从加密中获得零值并不重要，因为一旦您使用相同的异或密钥重新异或，您就会获得原始值。

```
value == value
value XOR value == 0 [encryption]
( value XOR value ) XOR value == value [decryption] 
```

如果您使用的是零终止字符串机制，那么您有两种主要策略来防止“字符退化”

*   在加密之前存储字符串的长度，并确保在解密时至少解密该数量的字符
*   解码字符*后*检查零字符

# google-apps-script - 在应用脚本容器中调用 getOwners()

> ID：14246488
> 
> 赞同：2
> 
> 时间：2013-01-09T21:06:51.803
> 
> 标签：google-apps-script, google-sites

我正在开发一个非常简单的工具，当访问者在网站上进行有趣的行为（特别是发布留言簿评论，因此代码在留言簿应用程序中）时，它可以 ping 网站所有者。

无论如何，感兴趣的代码如下所示：

```
var siteOwners = SitesApp.getActivePage().getOwners();
for (var i = 0; i < siteOwners.length; i++) {
    GmailApp.sendEmail(siteOwners[i].getEmail(), "Comment added to your site", "ping");
} 
```

当然，问题在于 SitesApp.getActivePage() 和 SitesApp.getActiveSite() 在这种情况下都返回 null。

可能这一切都发生了，因为我没有使用较新的伪 GUI 应用程序容器，而是在使用 HTMLService 作为用户界面的 doPost(e) 方法中完成这一切，因为 UiService 和 GUIBuilder 都太慢了可用（在呈现基本页面和呈现留言簿界面之间大约 10 秒）。

任何建议或想法都会有所帮助，特别是如果它涉及“去这里阅读本白皮书以了解 appscript 的应用程序环境”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:29:19.657

类的`getOwners()`方法`page[]`不存在。查看[页面类文档](https://developers.google.com/apps-script/class_page#getAuthors)

该`getAuthors()`方法确实存在，也许您可​​以将其用作解决方案。

```
function doGet(e) {
var app = UiApp.createApplication().setTitle("site owner");
var siteOwners = SitesApp.getActivePage().getAuthors();
 app.add( app.createLabel(siteOwners.length))
 for (var i = 0; i < siteOwners.length; i++) {
   app.add(app.createLabel( siteOwners[i]));
 }
return app.close();
} 
```

这在没有邮件的情况下为我完成了工作。

[工作示例](https://sites.google.com/a/lagaroo.com.br/dev-test/home/dev-test-siteowner)

# php - 使用 PHP 解析 html 并循环遍历表的行和列？

> ID：14246490
> 
> 赞同：4
> 
> 时间：2013-01-09T21:06:56.000
> 
> 标签：php, html-parsing, domdocument

我正在尝试从 loadHTML 解析 HTML，但遇到了麻烦，我设法遍历`<tr>`了文档中的所有 s，但我不知道如何遍历`<td>`每行上的 s。

这是我到目前为止所做的：

```
$DOM->loadHTML($url);
$rows= $DOM->getElementsByTagName('tr');

for ($i = 0; $i < $rows->length; $i++) { // loop through rows
    // loop through columns
    ...
} 
```

如何循环遍历每一行中的列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T21:20:23.750

[`DOMElement`](http://php.net/manual/en/class.domelement.php)还支持[`getElementsByTagName`](http://php.net/manual/en/domelement.getelementsbytagname.php)：

```
$DOM = new DOMDocument();
$DOM->loadHTMLFile("file path or url");
$rows = $DOM->getElementsByTagName("tr");
for ($i = 0; $i < $rows->length; $i++) {
    $cols = $rows->item($i)->getElementsbyTagName("td");
    for ($j = 0; $j < $cols->length; $j++) {
        echo $cols->item($j)->nodeValue, "\t";
        // you can also use DOMElement::textContent
        // echo $cols->item($j)->textContent, "\t";
    }
    echo "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:16:43.433

用于[`DOMXPath`](http://php.net/DOMXPath)通过相对 xpath 查询查询出子列节点，如下所示：

```
$xpath = new DOMXPath( $DOM);
$rows= $xpath->query('//table/tr');

foreach( $rows as $row) {
    $cols = $xpath->query( 'td', $row); // Get the <td> elements that are children of this <tr>
    foreach( $cols as $col) {
        echo $col->textContent;
    }
} 
```

**编辑：**要从特定行开始并停止，请通过更改迭代的方式在行上保留自己的索引[`DOMNodeList`](http://php.net/DOMNodeList)：

```
$xpath = new DOMXPath( $DOM);
$rows= $xpath->query('//table/tr');

for( $i = 3, $max = $rows->length - 2; $i < $max, $i++) {
    $row = $rows->item( $i);
    $cols = $xpath->query( 'td', $row);
    foreach( $cols as $col) {
        echo $col->textContent;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:11:22.943

重新循环会起作用吗？

```
$DOM->loadHTML($url);
$rows= $DOM->getElementsByTagName('tr');
$tds= $DOM->getElementsByTagName('td');

for ($i = 0; $i < $rows->length; $i++) {
// loop through columns
     for ($i = 0; $i < $tds->length; $i++) {
     // loop through rows

     } 
```

}

**编辑** 您还必须检查`parent node`以确保`rows`父母是`tr`您目前所在的人。像

```
if ($rows == tds->parent_node){
// do whatever
} 
```

在语法上可能不是 100% 正确，但这个概念是合理的。

# assembly - MZ（DOS，16 位）.EXE 标头中页数和最后一页大小的重要性

> ID：14246493
> 
> 赞同：6
> 
> 时间：2013-01-09T21:07:08.337
> 
> 标签：assembly, dos, 16-bit

我正在尝试学习如何使用程序集（NASM）创建 Dos .EXE 文件，手动构建标头并将文件组装为二进制文件。我的页面选项有问题（总页数和最后一页的字节数）。无论我设置的初始值有多小，程序都可以工作。

作为一种极端情况，即使设置 1 页 1 字节，以下程序也会起作用：

```
;
; the smallest possible "Hello, World!" .EXE (DOS MZ) file
; assemble with:
; nasm -f bin -w+all -O0 smallest_hello_exe.asm -o ASM.EXE
;

bits 16
cpu 8086

;
; by setting cs:ip=-10h:100h instead of 0h:0h inside the .EXE header
; (identical assignments), we achieve the following two advantages:
; 1) ds==cs, so no "push cs pop ds" is needed in order for ds:dx
; to point to the message string
; 2) we can exit by int 20h instead of int 21h, thus omitting the
; ah=4ch assignment
; (int 20h requires that cs points to the PSP segment)
;

;
; we do not the address calculations to take the .EXE header into account
; so we must subtract its length (20h) by an "org -20h"
; but, since ip will be 100h, we must also issue an "org 100h"
; and, since 0x100-0x20=0xE0...

org 0xE0        ; 100h for ip value - 20h for header

section .text align=1
;
; the MZ .EXE header structure
; 28 bytes long
; 1 pararaph equals 16 bytes
; 1 page equals 512 bytes
; suggested reading: int 21h,ah=4bh procedure
;
host_exe_header:
.signature: dw 'MZ'     ; the 'MZ' characters
.last_page_size: dw 1   ; number of used bytes in the final file page, 0 for all
.page_count: dw 1       ; number of file pages including any last partial page
.reloc: dw 0            ; number of relocation entries after the header
.paragraphs: dw 2       ; size of header + relocation table, in paragraphs
.minalloc: dw 0         ; minimum required additional memory, in paragraphs
.maxalloc: dw 0xFFFF    ; maximum memory to be allocated, in paragraphs
.in_ss: dw 0            ; initial relative value of the stack segment
.in_sp: dw 0xF000       ; initial sp value
.checksum: dw 0         ; checksum: 1's complement of sum of all words
.in_ip: dw 100h         ; initial ip value
.in_cs: dw -10h         ; initial relative value of the text segment
.offset: dw 0           ; offset of the relocation table from start of header
.overlay: dw 0          ; overlay value (0h = main program)

; pad header (its size in bytes must be a multiple of 16)
times (32-$+$$) db 0

mov dx,message
mov ah,09h              ; write string ds:dx to stdout
int 21h
int 20h

section .data align=1
message: db 'Hello, World!$'

section .bss align=1 
```

尝试不同的程序大小，我得出的结论是 Dos 将每个页面的所有 512 字节都加载到内存中。如果是这样，最后一页中字节数的目的是什么？

它会干扰 .bss、堆栈数据和/或动态内存分配吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:08:53.573

绝对不会忽略总页数，甚至不希望最初加载所有文件的程序也会使用它。他们稍后会自己阅读必要的片段。该`bytes in the last page`字段可能会或可能不会被忽略，具体取决于操作系统版本。它也可以四舍五入到段落或磁盘扇区边界。您不应该依赖特定的行为并正确填写。

您的测试代码之所以有效，是因为它很小，并且您的特定操作系统已选择将足够多的代码加载到内存中。如果您使您的程序大于单个页面但仍在字段中指定`1`，则`page count`您的代码可能不会完全加载并且无法工作。我试过：

```
times (32-$+$$) db 0
times (512) nop
mov dx,message
mov ah,09h              ; write string ds:dx to stdout
int 21h
int 20h 
```

如果`page count`为 1，则失败，但如果`page count`为 2（用于`dosbox`测试）则有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:22:02.807

页计数字段由 DOS 使用，而不是由 Windows NT 使用。

NT 使用的 IMAGE_DOS_HEADER 仅有的两个字段是 e_magic（必须是 IMAGE_DOS_SIGNATURE）和 e_lfanew，它是从 IMAGE_DOS_HEADER 开始到包含 NT 加载器的所有信息的 IMAGE_NT_HEADERS 结构的小于 4MB 的偏移量。

# javascript - Phonegap Icecast 播放器！无法自动播放

> ID：14246494
> 
> 赞同：0
> 
> 时间：2013-01-09T21:07:17.640
> 
> 标签：javascript, cordova, shoutcast, icecast

大家好，我的phonegap应用程序有一个小问题，一切正常，但除非我点击播放，否则我无法让我的应用程序自动播放或流式传输音频文件！如何使以下代码自动播放音频文件？

```
 <head>
<script type="text/javascript" charset="utf-8" src="js/phonegap-1.0.0.js"></script>

<script type="text/javascript" charset="utf-8">

        // Wait for PhoneGap to load
        //
        document.addEventListener("deviceready", onDeviceReady, true);

        // PhoneGap is ready
        //
        function onDeviceReady() {
            playAudio("http://myradiostation.com:8000/live.mp3");
        }

        // Audio player
        //
        var my_media = null;
        var mediaTimer = null;

        // Play audio
        //
        function playAudio(src) {
            if (my_media == null) {
                // Create Media object from src
                my_media = new Media(src, onSuccess, onError);
            } // else play current audio
            // Play audio
            my_media.play();

            // Update my_media position every second
            if (mediaTimer == null) {
                mediaTimer = setInterval(function() {
                    // get my_media position
                    my_media.getCurrentPosition(
                        // success callback
                        function(position) {
                            if (position > -1) {
                                setAudioPosition((position) + " sec");
                            }
                        },
                        // error callback
                        function(e) {
                            console.log("Error getting pos=" + e);
                            setAudioPosition("Error: " + e);
                        }
                    );
                }, 1000);
            }
        }

        // Pause audio
        // 
        function pauseAudio() {
            if (my_media) {
                my_media.pause();
            }
        }

        // Stop audio
        // 
        function stopAudio() {
            if (my_media) {
                my_media.stop();
            }
            clearInterval(mediaTimer);
            mediaTimer = null;
        }

        // onSuccess Callback
        //
        function onSuccess() {
            console.log("playAudio():Audio Success");
        }

        // onError Callback 
        //
        function onError(error) {
            alert('code: '    + error.code    + '\n' + 
                  'message: ' + error.message + '\n');
        }

        // Set audio position
        // 
        function setAudioPosition(position) {
            document.getElementById('audio_position').innerHTML = position;
        }

        </script>

<style type="text/css">
#player {
    position: absolute;
    width: 200px;
    height: 33px;
    z-index: 1;
    left: 7px;
    top: 123px;
}
</style>
</head>
      <body>
      <div id="player"> <a href="#" class="btn large" onclick="playAudio('http://myradiostation.com:8000/live.mp3');"><img src="images/play.png"></a>
          <a href="#" class="btn large" onclick="pauseAudio();"><img src="images/pause.png"></a>
          <a href="#" class="btn large" onclick="stopAudio();"><img src="images/stop.png"></a></div>
</body> 
```

# xml - XSL 消除元素

> ID：14246497
> 
> 赞同：1
> 
> 时间：2013-01-09T21:07:23.750
> 
> 标签：xml, xslt

我有这个 xml 文档：

```
<tags>
<w lemme="déclaration" pos="NOM">Déclaration</w>
<w lemme="du" pos="PRP:det">des</w>
<w lemme="droit" pos="NOM">droits</w>
<w lemme="de" pos="PRP">de</w>
<w lemme="le" pos="DET:ART">l'</w>
<w lemme="homme" pos="NOM">homme</w>
<w lemme="et" pos="KON">et</w>
<w lemme="," pos="PUN">,</w>
...
</tags> 
```

我正在尝试使用 xsl 过滤掉文章和标点符号。像这里 <w lemme=","pos="PUN" >,</w> 和 <w lemme="de" pos="PRP" >de</w> <w lemme="le" pos="DET :ART">l'</w>。因此，我制作了以下样式表，该样式表有效，但将我的所有条件推广到所有标签，包括标签 <标签>。

```
<xsl:template match="*">
<xsl:choose>
<xsl:when test="contains(@pos,'PUN')"></xsl:when>
<xsl:when test="contains(@pos,'PRP')"></xsl:when>
<xsl:when test="contains(@pos,'DET')"></xsl:when>
<xsl:otherwise>
<xsl:copy>
<xsl:attribute name="lemme">
<xsl:value-of select="@lemme"/>
</xsl:attribute>
<xsl:attribute name="pos">
<xsl:value-of select="@pos"/>
</xsl:attribute>
<xsl:apply-templates/>
</xsl:copy>
</xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

我有这个结果：

```
<tags lemme="" pos="">
<w lemme="déclaration" pos="NOM">Déclaration</w>
<w lemme="droit" pos="NOM">droits</w>
<w lemme="homme" pos="NOM">homme</w>
<w lemme="et" pos="KON">et</w>
<w lemme="citoyen" pos="NOM">citoyen</w> 
```

所以它可以工作并且只显示我感兴趣的行，只是我不希望它也在第一行的 < tags > 标签中添加 lemme="" pos="" 。我应该在 xsl 中进行什么更改以使其仅使用 < w > 标签。我尝试了 < xsl:template match="w" > 但它没有生成有效的 xml。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:20:43.637

您应该使用标准身份转换，即此模板：

```
<xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template> 
```

您始终可以使用它来将所有内容从源复制到输出。异常由额外的模板处理，如下所示：

```
<xsl:template match="w[contains(@pos,'PUN')]
                    |w[contains(@pos,'PRP')]
                    |w[contains(@pos,'DET')]"/> 
```

什么都不做。它只是匹配不需要的元素并防止身份转换模板匹配和复制它们。完整的样式表如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="w[contains(@pos,'PUN')]
                      |w[contains(@pos,'PRP')]
                      |w[contains(@pos,'DET')]"/>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:26:24.547

有几种方法可以解决这个问题，但增加已有内容的一种方法是让一个规则匹配并输出标签元素，然后应用仅匹配 w 元素的第二个模板

首先，将此模板添加到您拥有的模板之前：

```
<xsl:template match="/tags">
<xsl:copy>
<xsl:apply-templates select="w"/>
</xsl:copy>
</xsl:template> 
```

对于第二位，将您当前的模板更改为：

```
<xsl:template match="w"> 
```

为清楚起见，这里是完整的样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="utf-8" indent="yes"/>

    <xsl:template match="/tags">
        <xsl:copy>
            <xsl:apply-templates select="w"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="w">
        <xsl:choose>
            <xsl:when test="contains(@pos,'PUN')"></xsl:when>
            <xsl:when test="contains(@pos,'PRP')"></xsl:when>
            <xsl:when test="contains(@pos,'DET')"></xsl:when>
            <xsl:otherwise>
                <xsl:copy>
                    <xsl:attribute name="lemme">
                        <xsl:value-of select="@lemme"/>
                    </xsl:attribute>
                    <xsl:attribute name="pos">
                        <xsl:value-of select="@pos"/>
                    </xsl:attribute>
                    <xsl:apply-templates/>
                </xsl:copy>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

这产生了预期的结果：

```
<?xml version="1.0" encoding="utf-8"?>
<tags>
    <w lemme="déclaration" pos="NOM">Déclaration</w>
    <w lemme="droit" pos="NOM">droits</w>
    <w lemme="homme" pos="NOM">homme</w>
    <w lemme="et" pos="KON">et</w>
</tags> 
```

希望这可以帮助。

# android - 旧 API 级别的 GradientDrawable setColors

> ID：14246499
> 
> 赞同：3
> 
> 时间：2013-01-09T21:07:35.393
> 
> 标签：android

是否可以在比 API 16 (JellyBean) 更低的 API 级别上设置渐变的颜色数组？

我目前正在使用：

```
GradientDrawable gd = (GradientDrawable)this.getBackground();
int[] colors = {0xFFFF0000, 0xFFCC0099};
gd.setColors(colors); 
```

效果很好，但我希望支持 API Level 8 (Froyo) 或 10 (Gingerbread v2)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T21:25:08.370

~~我认为没有一种简单的方法可以做到这一点，所以我的建议是：[`GradientDrawable`](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)根据旧参数的参数创建一个新的（对于 16 以下的 API）。~~感谢[@StephenNiedzielski](https://stackoverflow.com/users/970346/stephen-niedzielski)指出了这里的缺陷——<code>getOrientation() 在 API 16 下不可用。

没有反射就没有办法做到这一点，因为您需要可绘制对象的方向才能重新创建它。如果你已经*有了*方向，你可以这样做：

```
GradientDrawable gd = (GradientDrawable) getBackground();
int[] colors = {0xFFFF0000, 0xFFCC0099};
if (android.os.Build.VERSION.SDK_INT >= 16) {
    gd = gd.mutate(); // For safe resource handling
    gd.setColors(colors);
} else {
    // Fallback for APIs under 16.
    GradientDrawable ngd = new GradientDrawable(/* Orientation variable */, colors);
    // You may have to set other qualities of `ngd` here to make it match.
    setBackgroundDrawable(ngd);
} 
```

因此，如果没有这些信息，您将不得不在低于 16 的 API 上使用反射。虽然它很老套，但它相当安全，因为这些 API 的实现*不应该*改变（因为它们不再被更新）。

如果它适合您的喜好，您可以使用[反射来访问`GradientState`内部类](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html)。基本上，您需要模拟该方法执行的调用`gd.mGradientState.mOrientation`（如评论中所述） 。`getOrientation()`由于这两个都是私有的，因此您必须[使用 Reflection](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html)。

# javascript - Javascript 中的动态类名 - 使用 jsfiddle

> ID：14246504
> 
> 赞同：1
> 
> 时间：2013-01-09T21:07:58.240
> 
> 标签：javascript

我正在尝试使用 JQuery CSS 方法使用脚本中的局部变量连续获得 2 个连续的项目（饼图）以旋转到不同的角度。下面的名称“a2”和“a3”必须在循环中动态生成。(JST EJS) 这是 Javascript：

```
var selector1 = ".thermometer .pieSlice1.hold .pie" + " .a2";
var s1 = 'rotate(130deg)';
$(selector1).css({'background-color': 'cyan'});
$(selector1).css({'-webkit-transform': s1});
$(selector1).css({'-moz-transform': s1});
$(selector1).css({'-o-transform': s1});
$(selector1).css({'transform': s1});
var selector2 = ".thermometer .pieSlice1.hold .pie" + " .a3";
var s2 = 'rotate(65deg)';
$(selector2).css({'background-color': 'cyan'});
$(selector2).css({'-webkit-transform': s1});
$(selector2).css({'-moz-transform': s1});
$(selector2).css({'-o-transform': s1});
$(selector2).css({'transform': s1}); 
```

在 HTML 中，我有这个：

```
<div class="thermometer">
  <div class="circle green">
    <div class="pieSlice1 hold">
      <div class="pie">
        <div class="a2">
        </div>
      </div>
    </div>
  </div>
</div>
<div class="thermometer">
  <div class="circle blue">
    <div class="pieSlice1 hold">
      <div class="pie">
        <div class="a3">
        </div>
      </div>
    </div>
  </div>
</div> 
```

为什么匹配失败？我发现 Javascript 选择器与任何一个 HTML 实体都不匹配。为什么不？Jsfiddle 是[http://jsfiddle.net/sploiber/VJHcH/53/](http://jsfiddle.net/sploiber/VJHcH/53/)

编辑 - 只是添加一些信息。如果我删除“a2”和“a3”，旋转 CSS 元素可以正常工作。我愿意接受更好的方法来标记两个馅饼之间的差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:18:52.140

您的选择器似乎工作正常。

您看不到 .a3 div，因为某些父 div 具有 ' `clip`' 或 ' `overflow: hidden`' 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:21:02.560

这里有一些代码可以满足你的需求（[demo](http://jsfiddle.net/FSkmr/4/)）：

```
function rotate(slice, degree) {
  slice.css({
   '-webkit-transform': 'rotate(' + degree + 'deg)',
   '-moz-transform': 'rotate(' + degree + 'deg)',
   '-ms-transform': 'rotate(' + degree + 'deg)',
   '-o-transform': 'rotate(' + degree + 'deg)',
   'transform': 'rotate(' + degree + 'deg)'
  });
}

var selector1 = ".thermometer .pieSlice1.hold .pie" + " .a2";
rotate($(selector1).parent(), 130);

var selector2 = ".thermometer .pieSlice1.hold .pie" + " .a3";
rotate($(selector2).parent(), 65); 
```

因此，对于这里发生的事情有一些解释。首先，选择正在工作，但您要实际旋转的元素是`.parent()`and `<div class="a2">`' `<div class="a3">`。另一种方法是使用图表的颜色来选择这个切片。我还结合了对的调用`.css()`并将其概括为更简洁的函数。就问题而言，这一切都归结为旋转错误的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:21:20.883

匹配成功就好了，但是你在没有内容的 a2 和 a3 div 上进行匹配，因此 CSS 转换它没有区别。尝试`parent()`改用：

[**JS 小提琴演示**](http://jsfiddle.net/VJHcH/64/)

我还更新了您的 javascript 以使用循环：

```
var selectors = {
    a2: {
        backgroundColor: 'cyan',
        rotation: 130
    },
    a3: {
        backgroundColor: 'cyan',
        rotation: 65
    }
}

var transformCSS;
for (var elementKey in selectors) {
    transformCSS = 'rotate(' + selectors[elementKey].rotation + 'deg)';
    $(".thermometer .pieSlice1.hold .pie ." + elementKey).parent().css({
        'background-color': selectors[elementKey].backgroundColor,
        '-webkit-transform': transformCSS,
        '-moz-transform': transformCSS,
        '-ms-transform': transformCSS,
        '-o-transform': transformCSS,
        'transform': transformCSS
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:27:50.323

我认为您应该在`.pie`-element 上而不是在`.a2`or上进行转换`.a3`。

将您的选择器更改为：

```
var selector1 = ".thermometer .pieSlice1.hold .pie" + ":has(.a2)"; 
```

# powershell - 如果 PowerShell 脚本出现任何错误，请发送电子邮件并终止脚本

> ID：14246512
> 
> 赞同：8
> 
> 时间：2013-01-09T21:08:39.163
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我最近一直在思考的一些事情，我想从 Stack Overflow 的好人那里得到一些意见。

我在不同的计划上运行了大量的 PowerShell 脚本（使用任务计划程序）。这些脚本通常为我收集数据并将其存储在 SQL 表中。我会说我目前正在运行 40-50 个左右的脚本，也许更多。

我最近认真考虑的一件事是最好的方法：

1.  确保如果发生任何错误，脚本将退出而不进行进一步处理。
2.  该脚本还应该向我发送一封关于失败的电子邮件，其中包含异常详细信息，向我展示它已经走了多远。
3.  成绩单/进度已记录，因此我可以查看任何错误并尝试在脚本中更好地处理它们。

这将是一项相当大的工作，所以我想从一开始就采用正确的方法。

我能看到实现这样的目标的唯一方法是执行以下操作：

**将 $ErrorActionPreference 设置为“停止”**

这应该会导致任何异常触发 Try/Catch 块。

**在 Try/Catch/Finally 块中运行整个脚本。**

finally 块当然是可选的。像这样的东西：

```
$ErrorActionPreference = "Stop"

Try
{
    $Content = gc "C:\Temp\NonExistentFile.txt"
    foreach ($Line in $Content)
    {
        Write-Host $Line
    }
}
Catch
{
    Write-Host $_ -ForegroundColor "Red" -BackgroundColor "Black"
    break
} 
```

**将“成绩单”数据记录到 HTML 中，并在失败时通过电子邮件发送内容。**

我尝试了几种记录方式，对我来说关键之一是我想要的东西是：

1.  通过提供文本和日志文件位置轻松登录。
2.  在日志文件每行的开头包括日期/时间。

我开始将文本写入 .txt 文件，但这需要做一些工作。

Start-Transcript 没问题，但没有包括每一行的日期/时间。

我在使用 Start-Transcript 的自定义函数方面取得了一些成功，并将我发送到其中的任何文本写入 Write-Host，日期/时间位于每行的开头。

但最终我认为我需要做的是登录一个 .html 文档，然后在发生错误时通过电子邮件发送此内容。像这样的例子：

```
Function Send-ErrorEmail
{
    Write-Host "Would Send Email Here" -ForegroundColor "Magenta"
}

Function Write-Html
{
    [CmdletBinding()]
    param
    (
        [Parameter(ValueFromPipeline=$True)]$Text,
        $HTMLTag
    )

    [string]$CurrentDateTime = (Get-Date).ToString("yyyy-MM-dd HH:mm:ss - ")

    switch ($HTMLTag)
    {
        "h1" {$ReturnText =  ("<h1>" + $Text + "</h1>")}
        "h2" {$ReturnText =  ("<h2>" + $Text + "</h2>")}
        default {$ReturnText = ("<p>" + $CurrentDateTime + $Text + "</p>")}
    }

    Write-Host -ForegroundColor "Yellow" ($CurrentDateTime + $Text)
    return $ReturnText
}

$ErrorActionPreference = "Stop"

Try
{
    #Stores the HTML File
    $LogfilePath = "C:\Temp\LogFile.html"

    #Begin HTML
    $HTML = @()
    $HTML += "<html><head></head><body>"
    $HTML += "Begin Script" | Write-Html

    #Loop through Computers
    $Computers = "LocalHost", "DoesNotExist", "127.0.0.1"
    foreach ($Computer in $Computers)
    {
        #Get Services
        $HTML += "Computer: $Computer" | Write-Html -HTMLTag "h1"
        $Services = Get-Service -Computer $Computer
        $HTML += $Services | ConvertTo-Html -Fragment
    }

    #Complete HTML
    $HTML += "Script End" | Write-Html
    $HTML += "</body></html>"
    $HTML | Out-File $LogfilePath
}
Catch
{
    #Add Exception to HTML
    $HTML += $_ | Out-String | Write-Html

    #Complete HTML
    $HTML += "</body></html>"
    $HTML | Out-File $LogfilePath

    #Send EMail
    Send-ErrorEmail

    #Exit Script
    exit
} 
```

有什么想法吗？你认为我能做出哪些改进？显然，没有 CSS 格式的 HTML 文档很难看，发送邮件功能也没有做任何事情，但这似乎是做我想做的最简单的方法。

我当然可以在我的所有脚本中点源任何函数，以便于更改通知电子邮件地址或类似地址。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T23:20:37.283

对于全局错误处理，我更喜欢使用陷阱语句。

```
function ErrorHandler($error) 
{
    ... write out error info
    ... send email message with error info
    ... etc
}

trap { ErrorHandler $_; break }

... rest of script code 
```

如果你想避免任何错误，那么是的，设置`$ErrorActionPreference`为`Stop`.

# php - 检测文件的修改

> ID：14246514
> 
> 赞同：1
> 
> 时间：2013-01-09T21:08:49.913
> 
> 标签：php, apache

是否可以检测 PHP 中文件的修改？

特别是我正在寻找文件何时更新，但创建/保存/等会很好。

最终，我希望在我的服务器上触发某种操作，以便在文件更新时发送电子邮件警报或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:11:08.203

[`filemtime`](http://us3.php.net/filemtime)应该做你想做的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:37:07.793

对于无 cron-job 的方法，您可以查看[`ext/inotify`](http://php.net/book.inotify). 在那里您注册一个回调并将整个过程放入一个读取循环中，如果发生事件（例如`IN_CLOSE_WRITE`），则该循环始终会触发回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:10:17.487

见[`filemtime`](http://php.net/manual/en/function.filemtime.php)。有类似的功能可以检查创建时间等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:17:58.330

如果要检查文件是否被更改，可以记录文件的 md5 哈希：

[http://php.net/manual/en/function.md5-file.php](http://php.net/manual/en/function.md5-file.php)

这是同样的问题：[PHP folder watch on windows](https://stackoverflow.com/questions/9271104/php-folder-watching-on-windows)

使用 ruby​​、python 或其他语言，您可以在文件系统上注册一个观察者，这样您就可以推送而没有信息拉取。但是 afaik 用 PHP 是不可能的。

# ios - 为什么我不能在 viewWillAppear 中以编程方式移动 UIView？我应该什么时候设置定位？

> ID：14246519
> 
> 赞同：0
> 
> 时间：2013-01-09T21:08:59.407
> 
> 标签：ios, uiview, positioning, center

我有一些定位不正确的观点。在我的项目中，我将定位链接到一个滑块，以尝试确保它正在发生，并且在我拖动滑块时它会不断地在视觉上来回捕捉。我已经剥离了所有内容并制作了一个测试项目来尝试解决这个问题，虽然它不会来回切换，但在调用 viewWillAppear 时它似乎不起作用，只有在通过拖动滑块之后才起作用。附上截图和项目。

![初始定位反映在 IB 中的位置](../Images/ea9a7f40555af6ee947b8bae91042bc5.png)

![我想在拖动滑块时显示的开始时以编程方式设置的定位](../Images/5166c02145c09e0f399cc551350bc5c0.png)

示例代码：[http ://www.hyperfileshare.com/d/b7e4b088](http://www.hyperfileshare.com/d/b7e4b088)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T22:37:14.587

您正在使用自动布局，这是 iOS 6 的一项新功能，它不是通过硬编码坐标而是通过称为“布局约束”的规则集合来控制控件的放置。有关更多信息，请参阅[Cocoa 自动布局指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-SW1)。底线，使用自动布局，您不能仅通过更改框架坐标来移动项目。

要查看您的“自动布局”设置，请打开故事板并在右侧面板中打开“文件检查器”（例如按`option`+ `command`+ `1`）并查看“使用自动布局”设置。

如果您想使用自动布局，您可以通过更改视图约束来移动视图上的项目，而不是通过更改框架。请参阅[Autolayout 在以编程方式更改视图尺寸时似乎不起作用](https://stackoverflow.com/questions/14215641/autolayout-seems-not-working-when-changing-view-dimensions-programmatically/14216008#14216008)。

# javascript - 如何使用 jquery 模拟鼠标悬停事件？

> ID：14246524
> 
> 赞同：2
> 
> 时间：2013-01-09T21:09:11.667
> 
> 标签：javascript, jquery

我有一个这样定义的星级评分系统：

```
<span class="rating_container"> 
    <span class="star_container">  
        <a rel="nofollow" href="" class="star star_1" >1<span class="rating">Terrible</span></a>   
        <a rel="nofollow" href="" class="star star_2" >2<span class="rating">Bad</span></a>
        <a rel="nofollow" href="" class="star star_3" >3<span class="rating">Bad</span></a>
        <a rel="nofollow" href="" class="star star_4" >4<span class="rating">OK</span></a>   
        <a rel="nofollow" href="" class="star star_5" >5<span class="rating">OK</span></a>   
        <a rel="nofollow" href="" class="star star_6" >6<span class="rating">OK</span></a>   
        <a rel="nofollow" href="" class="star star_7" >7<span class="rating">Good</span></a>   
        <a rel="nofollow" href="" class="star star_8" >8<span class="rating">Good</span></a>   
        <a rel="nofollow" href="" class="star star_9" >9<span class="rating">Excellent</span></a>   
        <a rel="nofollow" href="" class="star star_10" >10<span class="rating">Excellent</span></a>  
    </span> 
</span> 
```

当鼠标悬停时，每个单独的星都被着色。如何用 jquery 模拟这个？例如，我想将鼠标悬停在星号 5 上。这就是我尝试过的：

```
 $('.star.star_5').addClass('active'); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:12:06.853

尝试 ：

```
$(".star_5").trigger('mouseover'); 
```

这将触发鼠标悬停动作，而不是模拟它，提供一种针对鼠标悬停处理程序更改的未来证明措施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:10:27.947

我想你需要的是

```
$('.star.star_5').addClass('active'); 
```

**注意**`.star`and`.star_5`和`_`in之间没有空格`star_5`。（感谢[@wirey](https://stackoverflow.com/questions/14246524/how-can-i-simulate-a-mouseover-event-with-jquery/14246552#comment19768194_14246552)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:13:15.427

在 CSS（这是 jQuery 选择器所基于的）中，`.class1 .class2`表示“具有 class2 的元素，其祖先具有 class1”。这不是你想要的。你想要`.class1.class2`这意味着“一个同时具有 class1 和 class2 的元素”：

```
$('.star.star_5').addClass('active'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:13:48.417

如果您真的想模拟一个事件：您可以使用相应 jQuery 函数的无参数形式触发 JavaScript 事件。例如：

```
$('.star.star_5').mouseover(); 
```

# c - 为什么使用不同的指针类型？

> ID：14246526
> 
> 赞同：0
> 
> 时间：2013-01-09T21:09:17.863
> 
> 标签：c, pointers, kernel

在许多标准的开源代码中，我看到在不同的地方使用了不同的指针类型，例如：

```
uint32 fooHash (uint8 *str, uint32 len) 
```

我没有得到以下内容： - 为什么要将 int 声明为 uint32、uint8？所有这些都将在用户空间本身中运行，那么为什么不直接保留为 uint 本身呢？以后便携性不是问题吗？

*   另外，如果你想在 32 位系统上运行开源代码，为什么要有一个指针为 uint8 *ptr？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:11:58.820

指针的类型是指它包含的数据类型，而不是指针本身的大小。实际上所有指针的大小都是一样的。（[*] 但请参阅下面的评论）

如果您有，则指针指向值`uint8*`数组。`uint8`这与 不同`uint32*`，后者指的是`uint32`值数组。

回答你问题的另一面......这些类型被明确表示的原因是因为并非所有编译器都同意`int`. 这是一个便携的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T22:19:20.267

> 另外，如果你想在 32 位系统上运行开源代码，为什么要有一个指针为 uint8 *ptr？

`uint8_t`是指针*指向*的东西的大小，而不是指针本身的大小；*表达式* 的类型`*ptr`是`uint8_t`。*对象* 的类型`ptr`是`uint8_t *`，它与系统需要的一样大（32 位、64 位等）。

在计算指针算术时，基本类型很重要。给定一个指针声明

```
T *p; 
```

该表达式的`p + i`计算结果为`i`'类型after的第*一个元素*的地址。如果是，则给我们后面的第' 个整数的地址。如果是，则给我们以下第 'th 巨大结构的地址。例如：`T``p``T``int``p + i``i``p``T``struct humongous``p + i``i``p`

```
#include <stdio.h>
#include <stdint.h>

int main(void)
{
  uint8_t  *p0 = (uint8_t *)  0x00004000;
  uint32_t *p1 = (uint32_t *) 0x00004000;

  printf("p0 = %p, (p0 + 1) = %p\n", (void *) p0, (void *)(p0 + 1));
  printf("p1 = %p, (p1 + 1) = %p\n", (void *) p1, (void *)(p1 + 1));

  return 0;
} 
```

产生输出

```
p0 = 0x4000, (p0 + 1) = 0x4001
p1 = 0x4000, (p1 + 1) = 0x4004

```

指针不必都具有相同的大小或具有相同的表示。例如，在哈佛架构中，指令和数据存储在不同的内存区域中，并且可能具有不同大小的总线，因此对象指针 ( `int *`, `char *`, `float *`) 可能是一种大小（比如 8 位），而函数指针 ( `int (*foo)(void)`) 可能是不同的大小（比如 16 位）。类似地，在字寻址架构上，a`char *`可能比其他指针类型宽几位，以指定字的偏移量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T21:12:26.977

并非所有数据都应存储为`signed int`. A`uint8*`可用于多种用途：字符串、二进制数据（例如网络数据包或文件的一部分）。

有时您只需要 uint8 因为您要存储的值的范围位于`[0,256[`.

不要忘记我们不是在讨论*指针*的类型，而是在*讨论指向的数据*的类型。指针是一个指针（根据体系结构将具有正确的大小），无论它指向什么类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:24:36.417

这完全取决于您使用的硬件和编译器。

如果你只使用一个 int 你可以得到不同的大小。您还可以在 unix 和 windows 上获得不同的尺寸。

编译器所需的全部来自 C99 标准

```
sizeof(short) <= sizeof(int) <= sizeof(long) < sizeof(long long) 
```

以下是 Windows 平台的 int 类型大小（位）：

```
Type           C99 Minimum     Windows 32bit
char           8               8
short          16              16
int            16              32
long           32              32
long long      64              64 
```

你应该看看

以下保证是它们命名的大小

```
int8_t
int16_t
int32_t
int64_t
int8_t 
```

# javascript - 将基于非模型的内容添加到主干.js 中的集合视图输出

> ID：14246530
> 
> 赞同：2
> 
> 时间：2013-01-09T21:09:29.997
> 
> 标签：javascript, jquery, backbone.js

是否有适当或最佳的方法将非模型内容添加到主干集合视图？例如，假设我有一个登录表单，其中用户名和密码字段都代表集合中的模型。为了显示这些，我所要做的就是遍历每个模型的视图，看起来像这样：

`addAll: function(){ this.collection.forEach(this.addElementToEl, this); },`

但是，将其他元素添加到 DOM 的正确方法是什么，例如容器 div、图标或父表单元素，这些元素没有使用模型正确存储？我应该在渲染之前将额外的 html 附加到集合视图中吗？显然，我可以使用初始请求在服务器端执行此操作，但我想尽可能避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:05:44.537

这不是一个好办法。当你需要渲染一个非平凡的视图时，有两件事要记住。首先，更喜欢模板（例如 underscore 提供了一个简单的模板引擎）而不是手动构建 DOM，因为模板更具可读性和可维护性。其次，更喜欢层次结构而不是单层结构。例如，不要遍历模板中的集合。每个视图只负责渲染自己的内容，其子视图递归处理它们的内容。这将使您的代码更简单，更易于维护。这种分层结构的另一个好处是它导致更精细的视图粒度和更小的 AJAX 刷新区域。其实这也是Backbone的原理之一。

我建议您阅读这篇出色的[文章](http://jonathanotto.com/blog/backbone_js_for_the_everyman.html)。

# sql - 基于全词的sql搜索和更新

> ID：14246532
> 
> 赞同：1
> 
> 时间：2013-01-09T21:09:32.370
> 
> 标签：sql, sql-server, sql-server-2005, search

我想在我的一个专栏中找到一个单词并将其替换为一些自定义文本。我有下表：

```
DECLARE @Table TABLE ( [Names] VARCHAR(100) )

INSERT INTO @Table
SELECT 'This is test module for testing' UNION
SELECT 'This is test module for to fork' UNION
SELECT 'This is test module for testing mod' UNION
SELECT 'This is testing' UNION
SELECT 'This is module' 
```

我在下面解释我到底需要什么：

当用户搜索文本“test”并希望将其替换为“customtext”时，应选择以下行：

```
This is test module for testing
This is test module for to fork
This is test module for testing mod 
```

并用“customtext”替换“test”（全字）后，更新的记录应该是：

```
This is customtext module for testing
This is customtext module for to fork
This is customtext module for testing mod 
```

正如您可能已经注意到的那样，在上面包含部分文本“test”的情况下，**我需要对完整的单词而不是像“testing”这样的部分文本进行搜索。**

另一个解释相同要求的例子：

当用户搜索“mod”并希望将其替换为“customtext”时，应选择以下行：

```
This is test module for testing mod 
```

用“customtext”替换后，更新的记录应该是：

```
This is test module for testing customtext 
```

由于“mod”是完整的单词，它是被替换的单词，而不是包含部分文本“mod”的单词“module”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:29:28.680

using `like`: 与我自己的样本数据的一些模式。首先，您可以为要**替换**的单词和要**搜索的单词添加两个****变量**。

 ****## * [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/ba60d/1)

样本数据表：

```
VNAME
smp tests farms
hellocoles
hell testing str
Anvil test NSW 
```

询问：

```
select vname from 
vendor 
where '.' + vname + '.' 
LIKE '%[^a-z]test[^a-z]%'
; 
```

结果：

```
VNAME
Anvil test NSW 
```

这是更新查询：

```
update vendor
set vname = replace(vname,'test','newword')
from vendor 
where '.' + vname + '.' 
LIKE '%[^a-z]test[^a-z]%'
; 
```

## *[更新前后查询DEMO](http://sqlfiddle.com/#!3/fd85e/1)

*   [更新后的结果](http://sqlfiddle.com/#!3/fd85e/2)

    VNAME smp 测试农场 hellocoles 地狱测试 str Anvil newword NSW

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:52:05.463

```
UPDATE TABLE_NAME
SET Column_NameA = replace(Column_NameA, 'test', 'customtext')
WHERE  (Column_NameA LIKE ('%' + ' ' + 'test' + ' ' + '%')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:30:44.537

我的解决方案；

```
DECLARE @Find VARCHAR(50) = 'test',
        @Replace VARCHAR(50) = 'customtext'
DECLARE @Table TABLE ( [Names] VARCHAR(100) )

INSERT INTO @Table
SELECT 'This is test module for testing' UNION
SELECT 'This is test module for to fork' UNION
SELECT 'This is test module for testing mod' UNION
SELECT 'This is testing' UNION
SELECT 'This is module'

SELECT *
    ,REPLACE(' ' + Names + ' ', ' ' + @Find + ' ', ' ' + @Replace + ' ')

FROM @Table 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-09T21:26:36.443

你可以使用简单的正则表达式，如 (^|\s)text($|\s)，还是我不理解这个问题？****

# jquery - 如何检查jquery中的链接按钮是否可见

> ID：14246533
> 
> 赞同：-2
> 
> 时间：2013-01-09T21:09:34.613
> 
> 标签：jquery, asp.net

如何检查 jquery 中可见的链接按钮。下面的代码不起作用？

```
 if ($('id*="LnkBtn"').is(':visible')) { // check visibility
                    if (!Validatechecked("SrvRgnMDD")) {
                        $('#<%=Valid.ClientID%>').html("*");
                        passtest = false;
                    }

 <asp:LinkButton ID="LnkBtn" runat="server" Text="Show Details" AutoPostBack="true"
                                        CausesValidation="False" OnClick="MktallocLnkBtn_Click" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:24:47.287

尝试修复您的选择器 - 我假设您想使用属性选择器

```
 if ($('id*="LnkBtn"') 
```

到

```
 if ($('[id*="LnkBtn]"') // <-- notice the brackets 
```

虽然如果您尝试仅针对一个元素.. 只需使用 ID 选择器

```
$('#LnkBtn') 
```

您可以在此处阅读不同的选择器[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:27:47.897

[`id`](http://api.jquery.com/id-selector/)在 jQuery 中检查一个

```
if ($('#LnkBtn').is(':visible')) {
...
} 
```

# node.js - 我如何让连接资产在更改时重新编译我的咖啡文件？

> ID：14246535
> 
> 赞同：2
> 
> 时间：2013-01-09T21:09:43.133
> 
> 标签：node.js, coffeescript, node.js-connect, connect-assets

相关，但希望得到更低摩擦的答案：[如何将 Node 和 Express 与咖啡脚本和 requirejs 一起使用？](https://stackoverflow.com/questions/13545022/how-do-i-use-node-and-express-with-coffeescript-and-requirejs)

我已经设置了连接资产，这样我就可以在我的 /assets/js 文件夹中并排放置 .js 和 .coffee 文件。唯一的问题：每当这些文件发生变化时，我都必须重新获取包含任何已编译咖啡文件的页面。我猜是小问题，但作为故障排除的一部分，我一直在对文件本身进行大量 CURL——对咖啡 js 文件本身进行 CURL 不会导致它被重新编译。

连接资产是否具有任何“监视”功能？[在文档](https://github.com/TrevorBurnham/connect-assets)中找不到。我必须`coffee -bcw *.coffee`在该目录中运行吗？

编辑：最后我只是使用 grunt 重新编译更改。这比连接资产好得多。我将把这个问题留在这里，因为它有一些观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T17:40:06.693

我不确定我是否 100% 理解您的要求，但您是否考虑过使用类似[node-supervisor 的](https://github.com/isaacs/node-supervisor)东西？这可以监视 CoffeeScript 文件（和其他资源）并在它们被修改时重新启动您的节点进程。我已经成功地将它与连接资产一起使用。

# css - 在表格结构中对齐图像下方的文本

> ID：14246536
> 
> 赞同：3
> 
> 时间：2013-01-09T21:09:44.840
> 
> 标签：css, image, html-table

我正在尝试用 HTML 和 CSS 制作媒体库模板，我可以在其中将图像添加到表格中。我希望直接在图像下方添加标题。

但我的输出目前是错误的。我得到：

![在此处输入图像描述](../Images/ff3064efb286a49dfeac24c063e4d946.png)

文本对齐错误，我找不到将文本直接放在图像下方并居中的方法。

这是我的代码模板：

```
<div align="center" class="tile_div">
<table class="tile_table">
<tr>
    <td>
        <img class="tile_image" height="60px" width="60px" src="default.jpg"/> 
        <p class="tile_p">Sound</p>
    </td>
</tr>
    <td>
        <img class="tile_image" height="60px" width="60px" src="default.jpg"/> 
        <p class="tile_p">Sound</p>
    </td>
</tr>
    <td>
        <img class="tile_image" height="60px" width="60px" src="default.jpg"/> 
        <p class="tile_p">Sound</p>
    </td>
</tr>
    <td>
        <img class="tile_image" height="60px" width="60px" src="default.jpg"/> 
        <p class="tile_p">Sound</p>
    </td>
</tr>
</tr>
</table> 
```

我的 CSS 是：

```
.tile_div{
    text-align: center;
    width: 100%;
}

.tile_table{
    border-collapse:collapse;
}

.tile_table tr, td{
}

.tile_image{
    padding: 5px 5px 5px 5px;
    margin: 5px 5px 5px 5px;
}

.tile_p{
    display: inline;
} 
```

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:21:10.917

所有功劳归功于 Zoltan Toth 提供的答案，删除

```
.tile_p{
    display: inline;
} 
```

我把你的代码变成了[小提琴](http://jsfiddle.net/jC3BR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:19:55.240

[给你](http://jsfiddle.net/bGtsX/)。

# html

```
<table class='tile_table'>
  <tr>
    <td>
      <img class="tile_image" height="60px" width="60px" src="default.jpg"/>
      <p class="tile_p">Sound</p>
    </td>
    <td>
      <img class="tile_image" height="60px" width="60px" src="default.jpg"/>
      <p class="tile_p">Sound</p>
    </td>
    <td>
      <img class="tile_image" height="60px" width="60px" src="default.jpg"/>
      <p class="tile_p">Sound</p>
    </td>
    <td>
      <img class="tile_image" height="60px" width="60px" src="default.jpg"/>
      <p class="tile_p">Sound</p>
    </td>
  </tr>
</table> 
```

# css

```
.tile_table{
  border-collapse:collapse;
}

.tile_table td {
  text-align: center;
}

.tile_image{
  padding: 5px 5px 5px 5px;
  margin: 5px 5px 5px 5px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T18:28:29.470

只是为了澄清，问题是关闭@ZoltanToth 在主要评论中提到的 div 标签。

这是有效并创建我想要的输出的代码：

**HTML：**

```
 <div align="center" class="tile_div">
            <table class="tile_table">
                <tr>
                    <td>
                        <img class="tile_image" height="100px" width="100px" src="default.jpg"/> 
                        <p class="tile_p">Sound</p>
                    </td>
                    <td>
                        <img class="tile_image" height="100px" width="100px" src="default.jpg"/> 
                        <p class="tile_p">Sound</p>
                    </td>
                    <td>
                        <img class="tile_image" height="100px" width="100px" src="default.jpg"/> 
                        <p class="tile_p">Sound</p>
                    </td>
                </tr>
            </table>
        </div> 
```

**CSS**：

```
.tile_div{
    text-align: center;
    width: 100%;
}

.tile_table{
    border-collapse:collapse;
}

.tile_table tr, td{
  text-align: center;
}

.tile_image{
    padding: 3px 5px 0px 3px;
    margin: 5px 5px 0px 5px;
}

.tile_p{
    line-height: 0px;
} 
```

感谢您的输入。谢谢 C。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:20:50.200

```
<?php
echo '<div align="center" class="tile_div">';
echo '<table class="tile_table">';
echo "<tr>";
for($i=0;$i<4;$i++){
echo "<td><table><tr><td>";
echo '<img class="tile_image" height="60px" width="60px" src="default.jpg"/></td></tr>'; 
echo '<tr><td><p class="tile_p">Sound</p></td></tr></table>';
echo "</td>";
 }
echo "</tr>";
echo '</table>';
echo '</div>';
?> 
```

表内表。

# cocoa - KVO 无限循环/循环

> ID：14246537
> 
> 赞同：5
> 
> 时间：2013-01-09T21:09:48.897
> 
> 标签：cocoa, core-data, key-value-observing

我希望能够更改具有 startDate 和 endDate 的（日历）事件。还有一个持续时间。

1.  当用户更改 endDate 时，持续时间会更新。
2.  当用户更改 startDate 时，endDate 会根据持续时间而更改。
3.  当用户更改持续时间时，endDate 会更改。

这最后一个动作将触发第一个动作，这将触发第三个动作，这将触发第一个动作，*无限期*（或当堆栈填满时）。

像下面这样的行，为了改变值，会导致这个循环：

```
 [self setValue:[NSNumber numberWithLong:(interval%60)] forKeyPath:@"durationMinutes"];
        [self setValue:ed forKeyPath:@"endDate"]; 
```

简单地停止观察并在更改后重新启动是没有吸引力的，因为 GUI 中的值不会得到更新。那么，问题是：**如何安全（优雅地）更新两个相互依赖的属性之一？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T23:09:58.817

您可以在必要时使用 绕过 KVO 通知`setPrimitiveValue:forKey:`。这会设置值但不会触发任何通知。它还绕过了您可能拥有的属性的任何自定义设置器。这应该会打破通话周期。

使用此方法时，您通常希望调用“将更改”和“已更改”方法以确保维持核心数据状态。也就是说，类似：

```
[self willChangeValueForKey:@"endDate"];
[self setPrimitiveValue:ed forKey:@"endDate"];
[self didChangeValueForKey:@"endDate"]; 
```

这避免了对标志的需要——你只是说，嘿，设置值，不要乱来，好吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T18:03:24.363

最好的方法是编写自定义设置器，以便它们仅在值发生更改时更新值：

例如：

```
- (void)setDurationMinutes:(NSNumber *)minutes
{
    if (![minutes isEqual:self.durationMinutes])
    {
        _durationMinutes = minutes;
        self.endDate = [self.startDate dateByAddingTimeInterval:minutes * 60]; 
    }
}

- (void)setEndDate:(NSDate *)date
{
    if (![_endDate isEqualToDate:date])
    {
        _endDate = date;
        self.durationMinutes = [date timeIntervalSinceDate:self.startDate] / 60;
    }
} 
```

所以现在，当您将分钟设置为不同的值时，它将更新并设置结束日期。结束日期会有所不同，因此它将更新并设置持续时间。但是，这一次持续时间将是相同的（因为之前已设置），并且不会尝试再次设置自己或结束日期。

它还可以使您的代码保持整洁，并清楚地了解哪些更改以及何时更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:02:23.830

将这三种方法合二为一。

```
- (void)updateEndDate:(NSDate *)end
            startDate:(NSDate *)start
             duration:(NSNumber *)duration
{
  ... insert your update logic here
  [self willChangeValueForKey:@"startDate"];
  [self willChangeValueForKey:@"endDate"];
  [self willChangeValueForKey:@"duration"];
  _endDate = end;
  _startDate = start;
  _duration = duration;
  [self didChangeValueForKey:@"duration"];
  [self didChangeValueForKey:@"endDate"];
  [self didChangeValueForKey:@"startDate"];
} 
```

在你的设置器中调用该方法

```
-(void)setStartDate:(NSDate *)start
{
   [self updateEndDate:self.endDate startDate:start duration:self.duration];
} 
```

KVO 合规性要求您指定手动发送属性通知

```
+ (BOOL)automaticallyNotifiesObserversForKey:(NSString *)theKey
{

    BOOL automatic = NO;
    NSArray * manualKeys = @[@"endDate", @"startDate", @"duration"];
    if ([manualKeys containsObject:theKey])
    {
        automatic = NO;
    }
    else
    {
        automatic = [super automaticallyNotifiesObserversForKey:theKey];
    }
    return automatic;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T17:07:19.460

最后，事实证明我是在与系统作斗争。我现在即时计算持续时间值，并使用 IBActions 对更改采取行动。

```
- (IBAction)changedEndDate:(id)sender
    if ( [_occurrence.endDate timeIntervalSinceDate:_occurrence.startDate] < 0 )
            _occurrence.startDate = _occurrence.endDate;

    long duration = ( [_occurrence.endDate timeIntervalSinceDate:_occurrence.startDate] ) / 60;
    [self.durationHoursTextField setStringValue:[NSString stringWithFormat:@"%ld",duration/60]];
    [self.durationMinutesTextField setStringValue:[NSString stringWithFormat:@"%ld",duration%60]];
}
- (IBAction)changedDurationOrStartDate:(id)sender
{
    long durH = [self.durationHoursTextField integerValue];
    long durM = [self.durationMinutesTextField integerValue];
    if ( durH < 0 )
    {
        durH = 0;
        [self.durationHoursTextField setStringValue:@"0"];
    }
    if ( durM < 0 )
    {
        durM = 0;
        [self.durationMinutesTextField setStringValue:@"0"];
    }
    long duration = durH * 3600 + durM * 60;
    _occurrence.endDate = [_occurrence.startDate dateByAddingTimeInterval:duration];
 } 
```

# vba - VBA如果最后两个字符等于“XX”然后删除整行

> ID：14246538
> 
> 赞同：3
> 
> 时间：2013-01-09T21:09:57.790
> 
> 标签：vba, excel, excel-2007

我正在尝试运行一个宏，它查看一个字符串并确定最后两个字符是否等于“XX”，然后删除整行。

我收到一个对象错误哦，下面突出显示。

```
Sub Oval2_Click()

Last = Cells(Rows.Count, "E").End(xlUp).Row

For i = Last To 1 Step -1

`If (Right(Cells(i, "E"), 2).Value) = "TZ" Then`

    Cells(i, "E").EntireRow.Delete

End If
Next i

End Sub 
```

请帮忙！谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:18:31.217

`.Value`从中删除`Right(Cells(i, "E"), 2).Value`。它在抱怨，因为**函数**`.Value`上不存在 **`Right`**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T02:45:45.537

虽然你已经有了答案，但我不建议循环来实现这一点。如果您有大量行，循环会很慢。这是一个相对非常快的替代方案。我还对代码进行了注释，以便您理解它不会有问题......

**逻辑**：

1.  使用自动过滤器过滤以“XX”结尾的数据
2.  删除过滤数据

**代码**：

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long

    '~~> Change this to the respective sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Get last row of Col A
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Use autofilter to identify the cells which end in "XX"
        With .Range("A1:A" & lRow)
            .AutoFilter Field:=1, Criteria1:="=*XX"
            '~~> Offset to exclude the header and delete them
            .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With
End Sub 
```

**截图**：

![在此处输入图像描述](../Images/59deb2ca49b5cb88e57fafdd34f43352.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T21:12:48.493

这个

```
If (Right(Cells(i, "E"), 2).Value) = "TZ" Then 
```

应该是

```
If Right(Cells(i, "E").Value, 2) = "TZ" Then 
```

这也应该有效：

```
If Right(Cells(i, "E"), 2) = "TZ" Then 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-10T07:27:51.067

正如评论中提到的，我建议你把循环转过来（在相反的方向）：

```
For counter = To Rng.Rows.Count To 1 Step -1
  If (Right(Rng.Cells(counter),2)) = "XX" Then
      Rng.Cells(counter).EntireRow.Delete
  End If
Next counter 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-09T09:33:32.920

我测试过。这行得通，而且是最快的，因为我也用它`Range`来加速代码。

```
Sub Oval2_Click()

    Dim Rng As Range 
    Dim i As Integer, counter As Integer
    'Please Set Your Range
    Set Rng = Range("E2:E300000")
    i = 1
    For counter =1 To Rng.Rows.Count

    If (Right(Rng.Cells(i),2)) = "XX" Then
        Rng.Cells(i).EntireRow.Delete
    Else 
       i = i + 1
    End If

    Next 

End Sub 
```**

# visual-studio-2010 - 使用 Visual C++ (2010) 在 64 位版本中生成 CMPXCHG（无 LOCK）

> ID：14246539
> 
> 赞同：0
> 
> 时间：2013-01-09T21:09:58.577
> 
> 标签：visual-studio-2010, assembly, 64-bit, compare-and-swap

我需要在同一 CPU 上运行的多个线程的上下文中使用 CAS 函数（假设所有线程都静态地粘合到选定的 CPU，通过`SetThreadAffinityMask`）。

`InterlockedCompareExchange`生成LOCK CMPXCHG。LOCK 部分会带来一些副作用，例如缓存未命中、总线锁定以及与其他 CPU 争用的可能性，所有这些都很好，但考虑到这种情况，感觉就像是一种奢侈的过度。由于竞争线程在同一个 CPU 上运行，我假设可以删除 LOCK，并且我进一步假设它应该会提高性能。

所以这是我的第一个问题——我假设正确吗？

--

我知道如何使用 32 位版本的内联汇编生成 CMPXCHG。此外，根据[这个 SO 线程](https://stackoverflow.com/a/5810351/1877011)，我也知道如何处理 64 位版本，*但*作为函数调用。

我不明白，这是我的第二个问题，是如何生成它的*内联*版本。

--

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:18:28.417

不是要回答我自己的问题，而是要描述一种解决方法。

对于*布尔*变量上的 CAS，可以回退到[`_bittestandset`](http://msdn.microsoft.com/en-us/library/z56sc6y4%28v=vs.80%29.aspx)，这比 CMPXCHG 慢，但在 VS2010 中具有内在形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:02:42.763

这真的更像是一个评论，但空间有点太有限了......

我怀疑*您会`CMPXCHG`在不使用汇编的情况下自行获得说明。如果该区域如此关键，请使用 Interlocked 内在函数，反汇编输出，删除`LOCK`覆盖前缀并将其链接（我会为 32 位和 64 位变体执行此操作，因为内联 ASM[在 MSVC 中不是最优的](http://msdn.microsoft.com/en-us/library/5hd5ywk0%28v=vs.80%29.aspx)，因为它总是被视为不安全，导致插入额外的保护，这可能比调用外部版本更糟糕。从好的方面来说，它也会给你一个更统一的代码布局）。

我还建议您对这两种解决方案进行概要分析`LOCK`，[不](http://download.intel.com/products/processor/manual/325462.pdf)带总线锁定的确切效果）。

*我所说的“怀疑”是指：它不作为显式内在存在，并且使用编译器强制技巧**非常**脆弱，并不是说我知道任何用于强制发射`XCHG`or `CMPXCHG`（除了`XCHG (E)AX,(E)AX`，用作对齐 NO -OP）。

# android - Android：从第二个活动返回时刷新第一个活动中的 ListView

> ID：14246544
> 
> 赞同：3
> 
> 时间：2013-01-09T21:10:10.480
> 
> 标签：android, android-listview, refresh, android-activity, onresume

当用户关闭一个活动并返回到上一个活动时，我遇到了列表刷新问题。我看到这个问题很常见，但我无法解决。

我重写了 onResume 方法：

```
@Override
public void onResume() {
    super.onResume();
    populateList();
} 
```

populateList() 是我用字符串列表填充 listView 的方法：

```
arrayAdapter = new CustomArrayAdapter(this, R.layout.symbol_item,list);
listView.setAdapter(arrayAdapter); 
```

问题是，当第二个活动关闭时，新项目只是在 ListView 中再次添加，所以我将每个项目加倍。就像没有刷新一样。

如果我将 notifyDataSetChanged() 放在 onResume() 中，它会抛出 nullPointerException，因为当第一次启动活动时，第一次启动活动时没有初始化适配器。

我不知道如何处理这个。

```
public class testActivity extends Activity {

    private int id=1;
    private ListView listView;
    private CustomArrayAdapter arrayAdapter;
    private ArrayList<String> list = new ArrayList<String>();
    ArrayList<Item> objectList = new ArrayList<Item>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test);

    }

    @Override
    public void onResume() {
        super.onResume();
        populateList();
    }

    private void populateList() {
        try {
            objectList = new GetAsyncTask(id).execute();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (TimeoutException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        int size = objectList.size();
        String name;

        for (int i = 0; i < size; i++) {
            name = objectList.get(i).getName();
            list.add(name);
        }

        arrayAdapter = new CustomArrayAdapter(this, R.layout.symbol_item,
                list);
        listView.setAdapter(arrayAdapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:20:28.830

马上就可以了，您可以使用一个简单的条件语句轻松解决这个问题，该语句仅在适配器不是时才执行命令`null`：

```
 if (adapter != null) {
        adapter.notifyDataSetChanged();
    } 
```

但这在我看来，在更深层次上，您的代码可以在某种程度上进行重构以提高效率，但不一定更具功能性。

* * *

像这样做：

```
private int id = 1;
private ListView listView;
private CustomArrayAdapter arrayAdapter;
private ArrayList<String> list = new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);
}

@Override
public void onResume() {
    super.onResume();
    populateList();
}

private void populateList() {

    ArrayList<Item> objectList;
    try {
        objectList = new GetAsyncTask(id).execute();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } catch (TimeoutException e) {
        e.printStackTrace();
    }

    list.clear();
    for (int i = 0; i <objectList.size(); i++) {
        String name = objectList.get(i).getName();
        list.add(name);
    }
    if (arrayAdapter == null) {
        arrayAdapter = new CustomArrayAdapter(this, R.layout.symbol_item, list);
        listView.setAdapter(arrayAdapter);
    } else {
        arrayAdapter.notifyDataSetChanged();            
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:34:50.853

> 我从设备中捕获 list_of_files 并将其放入 populateList() 中的列表中。然后我应用适配器。返回时，设备上的列表已更改，因此它再次执行相同操作并将其放入列表中。问题是在 ListView 中仍然有旧项目，而新项目只是在最后添加。所以它是重复的。

一种基本方法是`list.clear()`在添加新数据之前调用。这应该会删除旧数据并防止重复。（但如果没有看到有问题的代码，很难提供准确的答案......）

* * *

**添加**
您应该将此代码添加到您的`onPostExecute()`方法中`GetAsyncTask`：

```
int size = objectList.size();
String name;

list.clear(); // or list = new ArrayList<String>();
for (int i = 0; i < size; i++) {
    name = objectList.get(i).getName();
    list.add(name);
}

arrayAdapter = new CustomArrayAdapter(this, R.layout.symbol_item, list);
listView.setAdapter(arrayAdapter); 
```

除非`GetAsyncTask`嵌套在您的 Activity 中，否则您需要移动一些变量才能`GetAsyncTask`使用它。但是这种方法更好，因为它不会强制 Activity*等待*结果（这可能会导致“Application Not Responding”错误。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:29:15.337

您只显示了应用程序代码的一部分，所以我可能在这里偏离了基础，但我猜您正在使用 Cursor 来返回`list`变量并用于`list`创建 ArrayAdapter ...

如果您希望数据是“新鲜的”，为什么不将 CursorLoader 与 LoaderManager 一起使用？LoaderManager 有几个好处（比如将查询从 UI 线程中移出），并且在监视数据库的更改时，LoaderManager 为您完成了一些繁重的工作。

有一篇博文我觉得很有帮助 - [http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html](http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html)

这一切都假设您从数据库中提取数据......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T20:10:49.373

问题是您在没有先清除列表的情况下调用函数 populateList()。这种方式填充列表只是添加到以前的内容。

这将是一个正确的方法：

```
public void onResume() {
super.onResume();
list = new ArrayList<String>();
populateList();  } 
```

我也不确定你为什么在函数中设置了适配器`populateList()`

你应该试试这个。

```
 private ArrayList<String> list = new ArrayList<String>();

    private ArrayList<String> populateList() {
            try {
                objectList = new GetAsyncTask(id).execute();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (TimeoutException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            int size = objectList.size();
            String name;

            for (int i = 0; i < size; i++) {
                name = objectList.get(i).getName();
                list.add(name);
            }
 return list;
        }
     arrayAdapter = new CustomArrayAdapter(this, R.layout.symbol_item,
                    populateList());
            listView.setAdapter(arrayAdapter); 
```

这样，通过取出适配器，您可以简单地在 onResume() 函数中使用它

```
public void onResume() {
    super.onResume();
    list = new ArrayList<String>();
    } 
```

# c# - 隐藏和显示框架集中框架的按钮

> ID：14246546
> 
> 赞同：0
> 
> 时间：2013-01-09T21:10:17.830
> 
> 标签：c#, javascript, jquery, asp.net

我正在制作一个项目，在页面每一侧的框架集中有两个框架。左边的框架称为“左”，右边的框架称为“右”。我正在尝试为左框架分配一个“隐藏/显示”按钮；该按钮将分配在左框架上，它将隐藏左框架，从而使右框架更宽。我尝试搜索，但没有解决方案。

我是这个网页设计的新手，所以，如果有人向我伸出援助之手，那将是一种荣幸。我希望我没有让事情变得太复杂。

谢谢，期待您的热心回复…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:01:00.803

正如其他人提到的那样，框架可能会给您带来麻烦。最简单的方法可能是将两列包装在 div 中。标签上的一个类`<body>`决定了两者的宽度和可见性。“隐藏”和“显示”最左侧列的过程只是使用javascript切换body标签上的哪个类。

这是一个简单的例子。

```
<body class="two-col">
  <div class="sidebar">
    <a id="hide-sidebar">Hide</a>
    Left
  </div>
  <div class="main">
    Right
  </div>
</body>

body.two-col .sidebar {
  width: 25%;
  position: absolute;
  top: 0;
  left: 0;
}

body.two-col .main {
  width: 75%;
  margin-left: 25%;
}

body.one-col .sidebar {
  display: none;
}

$('#hide-sidebar').click(function() {
  body = $('body');
  if (body.hasClass('one-col')) {
    body.addClass('two-col').removeClass('one-col');
  } else {
    body.addClass('one-col').removeClass('two-col');
  }
}); 
```

# node.js - 基本 HTTP 服务器

> ID：14246547
> 
> 赞同：-2
> 
> 时间：2013-01-09T21:10:20.217
> 
> 标签：node.js, express

我想创建一个简单且安全的 HTTP Web 服务器。

[我使用了在“NodeJS 中的基本静态文件服务器](https://stackoverflow.com/questions/7268033/basic-status-file-server-in-nodejs)”这个问题上找到的示例，并在这里和那里更新/更改了一些部分。

这是代码：

```
var http = require('http'),
    url = require('url'),
    fs = require('fs');

function error404(res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.write('404 Not Found\n');
    res.end();
}

http.createServer(function(req, res) {
    var path = url.parse(req.url).pathname.toLowerCase().split('/');
    var file = path[path.length - 1]
    var filename = file.split('.');
    var extension = filename[filename.length - 1];
    if(extension === 'html') {
        fs.exists('./client/' + file, function(exists) {
            if(!exists) { error404(res); }
            else {
                res.writeHead(200, {'Content-Type': 'text/html'});
                var fileStream = fs.createReadStream('./client/' + file);
                fileStream.pipe(res);
                return;
            }
        });
    }
    else if(extension === 'js') {
        fs.exists('./client/js/' + file, function(exists) {
            if(!exists) { error404(res); }
            else {
                res.writeHead(200, {'Content-Type': 'text/javascript'});
                var fileStream = fs.createReadStream('./client/js/' + file);
                fileStream.pipe(res);
                return;
            }
        });
    }
    else if(extension === 'css') {
        fs.exists('./client/css/' + file, function(exists) {
            if(!exists) { error404(res); }
            else {
                res.writeHead(200, {'Content-Type': 'text/css'});
                var fileStream = fs.createReadStream('./client/css/' + file);
                fileStream.pipe(res);
                return;
            }
        });
    }
    else { error404(res); }
}).listen(8080); 
```

现在我有三个问题：

*   1）这段代码会创建一个安全且可靠的服务器吗？
*   2）有什么可以改进的？
*   3）与结合“连接”相比，使用 Express.js 有什么优势？

非常感谢您！

（信息：我指望稍后将此代码与“Handlebars”、“Socket.io”和“Mongoose / MongoDB”结合使用。）

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-09T21:34:09.943

你绝对应该只使用快递。

否则，您将浪费大量时间重新发明轮子。

# java - HttpURLConnection 将我的 POST 请求重定向到 GET

> ID：14246557
> 
> 赞同：6
> 
> 时间：2013-01-09T21:11:03.693
> 
> 标签：java, http, playframework, httpurlconnection, playframework-1.x

我正在发送一个`HttpURLConnection`with `setInstanceFollowRedirects(true)`and `POST`，得到一个如下所示的重定向响应：

```
HTTP/1.1 302 Found
Server: nginx
Date: Wed, 09 Jan 2013 20:47:56 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Status: 302 Found
Status: 301 Moved Permanently
Location: http://foo.bar/... 
```

JVM 发送的下一个请求是一个`GET`请求（到正确的重定向 URL）。它似乎还删除了我添加到原始请求中的 HTTP 标头之一。

仅供参考，我不是`HttpURLConnection`直接使用，而是通过 Play Framework 的 WS 包装器使用。

我的问题是 - 这是 Java（Sun JVM 1.7.0）的一个已知问题吗？还是可能是 Play Framework 中的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T10:47:04.373

这是 Java 的默认行为。您可以通过设置系统属性 http.strictPostRedirect=true 来更改它。

[有关详细信息，请参阅 Java 源HttpURLConnection implementation source](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/net/www/protocol/http/HttpURLConnection.java.html)中的此引用：

```
 /* The HTTP/1.1 spec says that a redirect from a POST 
     * *should not* be immediately turned into a GET, and
     * that some HTTP/1.0 clients incorrectly did this.
     * Correct behavior redirects a POST to another POST.
     * Unfortunately, since most browsers have this incorrect
     * behavior, the web works this way now.  Typical usage
     * seems to be:
     *   POST a login code or passwd to a web page.
     *   after validation, the server redirects to another
     *     (welcome) page
     *   The second request is (erroneously) expected to be GET
     * 
     * We will do the incorrect thing (POST-->GET) by default.
     * We will provide the capability to do the "right" thing
     * (POST-->POST) by a system property, "http.strictPostRedirect=true"
     */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:13:06.237

另一种选择，假设您控制服务器：使用状态码 307。

# ruby-on-rails - 如何更改迁移中字段的大小？

> ID：14246558
> 
> 赞同：1
> 
> 时间：2013-01-09T21:11:03.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个定义如下的表：

```
def self.up
 create_table "equipes", :primary_key => "equipe_id", :force => true do |t|
  t.string   "equipe_nom",                   :limit => 30,   :null => false
  t.string   "equipe_nom_pseudo",    :limit => 8,    :null => false
  t.string   "equipe_manager",       :limit => 40
  t.string   "equipe_telephone_1",   :limit => 22
  t.string   "equipe_adresse_email", :limit => 50
  t.string   "equipe_responsable",   :limit => 50

  t.timestamps
end 
```

我想将字段“equipe_nom”的限制从 30 更改为 150。

最好的方法是什么？

我可以使用 RAKE G 迁移 .... 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:24:05.000

首先：不要将`rake`命令与`rails`命令混淆。`Rake`是一个比 make 命令运行更高级的任务的命令。`rails`是 rails 框架提供的命令，例如，创建应用程序、生成迁移等。您只需在终端中`rails`输入不带参数的命令即可获得所有命令及其效果的列表。将为您生成迁移。[在此 Rails 指南中](http://guides.rubyonrails.org/migrations.html)阅读有关迁移的更多信息。`rails``rails g migration migrationname`

有了这个，有两种可能性可以解决您的问题：

*   如果您之前已经运行过此迁移并且这是您的最后一次迁移，则需要运行`rake db:rollback`，然后更改上面显示的迁移文件中的值，保存它，然后`rake db:migrate`再次运行。这将首先反转最后一次迁移（在这种情况下，删除表“equipes”），然后使用您的更改再次运行它。
*   如果这是一个较旧的迁移，您可以通过执行创建一个新迁移`rails g migration change_equipe_nom_to_limit_150`。查看它创建的文件。内`def up`写：`change_column :equipes, :equipe_nom, :string, :limit => 150`。保存文件，运行`rake db:migrate`

如果您不确定哪种情况适用，请执行第二种情况。它会一直有效。

# silverlight - 使用 PhoneTextBox 功能改进 AutoCompleteBox

> ID：14246562
> 
> 赞同：0
> 
> 时间：2013-01-09T21:11:08.820
> 
> 标签：silverlight, windows-phone-7, autocompletebox

有没有办法用 PhoneTextBox 将默认 TextBox 替换为 AutoCompleteBox 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:58:48.127

从 Silverlight 工具包中获取 AutoCompeteBox 的源代码，然后发疯。用 PhoneTextBox 查找并替换 TextBox 。

源代码可以在这里找到 [http://phone.codeplex.com/SourceControl/BrowseLatest](http://phone.codeplex.com/SourceControl/BrowseLatest)

导航到 Microsoft.Phone.Controls.Toolkit / AutoCompleteBox 以获取代码和 Microsoft.Phone.Controls.Toolkit.WP7 / Themes / Generic.xaml 以获取 xaml

# sql - Postgres -> [22007] 错误：类型时间戳的无效输入语法：“”

> ID：14246567
> 
> 赞同：11
> 
> 时间：2013-01-09T21:11:25.183
> 
> 标签：sql, postgresql, subquery

我有一个将许多数据类型存储为字符串的表。有时该值是表示时间戳的字符串。以下查询旨在在字段名（在 RetsProvider 中指定）上连接 RetsEntry 和 RetsProvider 表，然后过滤掉条目时间戳介于两次之间的“systemid”列值。

```
SELECT
  *
FROM (
       SELECT
         systemid,
         cast(value AS TIMESTAMP) AS valueTS
       FROM cabarets.retsentry, cabarets.retsprovider
       WHERE cabarets.retsentry.providername = cabarets.retsprovider.name
             AND cabarets.retsentry.systemname = cabarets.retsprovider.lastupdatefield) AS foo
WHERE foo.valueTS <= now(); 
```

但是，当我运行它时，我收到错误消息。

> [2013-01-09 14:04:30] [22007] 错误：时间戳类型的输入语法无效：“”

当我自己运行子查询时，我得到这样的数据......

```
SELECT
  systemid,
  cast(value AS TIMESTAMP) AS valueTS
FROM cabarets.retsentry, cabarets.retsprovider
WHERE cabarets.retsentry.providername = cabarets.retsprovider.name
      AND cabarets.retsentry.systemname = cabarets.retsprovider.lastupdatefield 
```

这给出了这样的输出......

```
systemid    valuets
'4705683'   '2012-11-08 01:37:45'
'259534632' '2012-11-15 20:40:52'
'259536713' '2012-10-16 10:57:40'
'65815875'  '2012-10-28 22:36:00'
'259540896' '2012-10-16 09:59:22'
'4707500'   '2012-11-10 01:44:58' 
```

postgres 不允许您基于作为强制转换字符串列的别名的列添加 where 子句的问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T21:18:13.623

您是否尝试过强制转换您的`WHERE`条款：

```
WHERE cast(foo.valueTS AS TIMESTAMP) <= now(); 
```

您是否也尝试过使用`CURRENT_TIMESTAMP` 而不是`now()`？

除非有其他数据问题，否则不确定它可能是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:38:58.293

您的问题是您的数据无效。这是使用适当数据类型的一个重要原因，这样您就可以在输入时捕获错误，而不是稍后再进行整理。您可以执行以下操作来更正：

```
UPDATE the_table
   SET value_ts = '1900-01-01 00:00:00'
 WHERE value_ts ~ '[ ]+'; 
```

我担心，如果这是问题，你会发现更多。

# android - Android：使用具有不同圆弧大小且中心相同的drawArc（）

> ID：14246570
> 
> 赞同：2
> 
> 时间：2013-01-09T21:11:44.330
> 
> 标签：android

我试图以与传统方式略有不同的方式绘制饼图。无论如何，馅饼都有相同的块，但是每个块的半径是不同的。所以所有的弧仍然以一个点为中心，但具有不同的半径。

这是它的简化代码。

```
rect1 = new RectF(0,0,8,8)
rect2 = new RectF(0,0,6,6)
rect3 = new RectF(0,0,4,4)
rect4 = new RectF(0,0,2,2)

canvas.drawArc(rect1,0,90,true, paint)
canvas.drawArc(rect2,90,90,true, paint)
canvas.drawArc(rect3,180,90,true, paint)
canvas.drawArc(rect4,270,90,true, paint) 
```

这将创建所有正确的弧，但所有弧的点不在同一位置居中。我知道这是因为 RectF 类的工作方式。

所以我的问题是，我可以在画布的中心排列这些不同的弧吗？在某处我可以使用弧偏移来执行此操作吗？

我用油漆尝试[了这个解决方案](https://stackoverflow.com/questions/3874424/android-looking-for-a-drawarc-method-with-inner-outer-radius)，但没有成功。任何的意见都将会有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:37:06.260

它并不是真正基于“RectF 类的工作方式”，而是基于您放置这些矩形的方式。不是将所有这些矩形的左上角对齐，而是`(0, 0)`对齐中心。一点基本的数学知识会让你明白这一点。假设一个中心点`(centerX, centerY)`和一个半径`radius`，左边是`centerX - radius`，顶部是`centerY - radius`右边`centerX + radius`，底部是`centerY + radius`。对每个具有相同中心点和不同半径的矩形执行此操作，不出所料，您最终会得到具有相同中心的弧。

# join - 一对多还是多对多？

> ID：14246572
> 
> 赞同：1
> 
> 时间：2013-01-09T21:11:48.580
> 
> 标签：join, symfony, orm, doctrine, relationship

我正在创建一个包含多个页面和多个图像的网站。关系是许多页面可以有许多图像。因此，我通常会创建一个名为 page_images 的连接表，其中包含 page_id 和 image_id。我还需要连接表中的位置字段，以便可以订购每个页面的图像。

我今天一直在看 Doctrine 并使用 Symfony2 实体来创建数据库。我尝试使用元数据使用多对多关系，但这为我创建了仅包含 page_id 和 image_id 的连接表。我不确定如何添加位置字段或任何其他字段，这可能吗？

我假设的替代方法是创建从页表到 page_images 表以及从图像表到 page_images 表的一对多关系，这意味着我还需要一个 PageImage 实体类。

有人可以建议这种情况下的最佳做法是什么？我一直在查看[http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html)但文档没有提到您是否可以向连接表添加其他字段。

更多信息：

```
class Image {

/**
 *
 * @ORM\OneToMany(targetEntity="PageImage", mappedBy="image")
 */
private $page_images;

}

class Page {

/**
 *
 * @ORM\OneToMany(targetEntity="PageImage", mappedBy="page")
 */
private $page_images;

}

class PageImage {

/**
 * @var integer
 *
 * @ORM\ManyToOne(targetEntity="Page", inversedBy="page_images")
 * @ORM\JoinColumn(name="page_id", referencedColumnName="id")
 */
private $page;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:23:16.667

您已经得到了响应：您需要从 PageImage 实体中获得 2 个 ManyToOne 关系。然后，您将能够在此实体中添加额外的字段。

# java - 如何使 jpg 内联网格布局

> ID：14246577
> 
> 赞同：0
> 
> 时间：2013-01-09T21:11:57.543
> 
> 标签：java, swing, io, jpanel, jpeg

我相信这很简单，也许我只是以不同的方式看待它，我有一个普通战舰布局的 jpg，我也有一个用 Jpanel 完成的实际网格，为了让我的游戏更花哨，我希望拥有 jpanel网格覆盖 jpeg 使其看起来更逼真。当我导入 jpeg 时，它将图像放置在每个网格中。这是可以理解的，我创建了一个网格类的新实例。6乘6

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.*;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.LineBorder;
public class Grid extends JPanel {
private int row;
private int column;
BufferedImage img;

private BattleShipsClient parent;
public Grid(int row , int column, BattleShipsClient gui)
{
    this.row = row;
    this.column = column;
    this.parent = gui;

    setBorder(new LineBorder(Color.black,1));
    addMouseListener(new ClickListener());
    /*
     try {
           img = ImageIO.read(new File("Battleships.jpg"));
       } catch (IOException e) {
       }*/  
}
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);
    //g.drawImage(img, 0, 0, null);
}
private class ClickListener extends MouseAdapter
{

}

} 
```

这是我的网格类，导入图像的代码已被注释掉，因为它在这个地方不起作用

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.IOException;
import java.net.*;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.*;

public class BattleShipsClient implements Runnable, BattleShipConstants{
//6 rows and 6 collunms
private Grid [][] grid = new Grid[6][6];

private DataInputStream fromServer;
private DataOutputStream toServer;
BufferedImage img;
JFrame j = new JFrame();

public BattleShipsClient()
{
    JPanel p = new JPanel();
    p.setLayout(new GridLayout(6,6,0,0));
    for (int i=0;i<6;i++)
        for(int j=0;j<6;j++)
            p.add(grid[i][j] = new Grid(i,j,this));

    p.setBorder(new LineBorder(Color.black,1));

    j.add(p,BorderLayout.CENTER);
    j.setSize(320,320);
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    j.setVisible(true);

}
public void run(){
    Thread thread = new Thread(this);
    thread.start();
}
public static void main(String [] args){
    BattleShipsClient bs = new BattleShipsClient(); 
}

} 
```

我意识到它为什么不工作，但似乎无法弄清楚我将如何让它工作，因此它与网格内联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:47:04.960

您可能知道它不起作用的原因（内联图像）是您添加了 6 x 6 (36) `Grid` `JPanels`，每个都在绘制战舰的单独图像。您需要绘制单个图像并将单个单元格覆盖在顶部。

一种方法是创建另一个`JPanel`只绘制图像的自定义，然后将`Grid`面板添加到其中：

```
class ImagePanel extends JPanel {
   private final BufferedImage img;

   public ImagePanel() throws IOException {
     setLayout(new GridLayout(6, 6));
     img = ImageIO.read(new File("Battleships.jpg"));
   }

   @Override
   protected void paintComponent(Graphics g) {
     super.paintComponent(g);
     g.drawImage(img, 0, 0, getWidth(), getHeight(), null);
   }
} 
```

*最后一个重要提示：*别忘了打电话

```
setOpaque(false); 
```

在每个`Grid`面板中使每个单元格透明。这将允许显示父容器中的图像。

# ios - 加载新的细节视图

> ID：14246580
> 
> 赞同：1
> 
> 时间：2013-01-09T21:11:58.753
> 
> 标签：ios, uitableview, uisplitviewcontroller

我从 xcode 4.5 创建了一个新的拆分视图。我已将主视图表更改为静态表（3 行）。单击每一行进入详细区域时，如何加载不同的视图？

我认为需要在这里完成：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //load new view here
} 
```

但我不确定语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:21:07.540

```
UIViewController *vc = [[UIViewController alloc] initWithNibName:@"nameOfYourFile.xib"];
[self presentViewController:vc animated:YES completion:nil]; 
```

有很多方法可以做到这一点，但这里有一种方法可以在您的 didSelectRowAtIndexPath 中显示模态视图控制器。

如果您使用的是导航控制器，您可能会使用：

```
UIViewController *vc = [[UIViewController alloc] initWithNibName:@"nameOfYourFile.xib"];
[self pushViewController:vc animated:YES]; 
```

编辑：我可能误解了你的问题，现在我重新阅读了它。详细区域是什么意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:59:13.913

这里有一个可下载的示例项目：

[http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=1546](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=1546)

# python - 使用 BASH 脚本更改目录不起作用

> ID：14246582
> 
> 赞同：1
> 
> 时间：2013-01-09T21:12:18.477
> 
> 标签：python, unix, batch-file, directory

我有一个脚本文件（“测试”没有文件名），其中包含：

```
cd /userdata/waf/Template
iaprod -python myscript.py>Outputlog
echo "hello" 
```

当我进入命令窗口时，我输入以下内容并获得以下输出：

```
-bash-3.00$ chmod 775 testing
-bash-3.00$ ./testing
: No such file or directorydata/acct/waf/Template
<<Starting on sim1>>
hello 
```

所以由于某种原因，第一行中的更改目录命令不起作用。但是，最后两行中的 python 脚本和 echo 工作正常。唯一的问题是我需要在正确的目录中运行 python 脚本。

任何想法为什么 cd 不能解决所有问题？如果我将代码直接逐字输入命令行，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:19:57.597

`cd`检查命令行末尾是否有杂散的回车符（ASCII 代码点 13） 。乱码错误消息表明存在一个。

shell 脚本中的行（以及除了 Internet 协议中的文本之外的几乎所有其他内容）必须以 ASCII LF（代码点 10）结尾，而不是 CR+LF。

# mysql - MySQL 数据加载只加载了我表中大约一半的行

> ID：14246588
> 
> 赞同：1
> 
> 时间：2013-01-09T21:12:56.657
> 
> 标签：mysql, file-io, load, line

我正在加载超过 500k 行的表。它以前工作过多次，但现在似乎停止工作了。代码如下：

```
将数据本地 infile 'C:\\Users\\Michael\\Dropbox\\Coursework and Work\\Project Longevity\\NHPD DB\\Arrests Working Files\\ARRESTS_REDO2.csv' 加载到表 all_arrests
以“，”结尾的字段
用 '\"' 括起来
以 '\n' 结尾的行
忽略 1 行
（object_id、id_key、c​​ase_num、seq_no、逮捕日期、逮捕时间、逮捕小时、逮捕周、逮捕月 1、逮捕月 2、逮捕类型​​、逮捕类型​​信息、
Charge_seq、法规、计数、逮捕官员、逮捕官员2、perp_name、perp_sex、perp_sex_info、perp_race、perp_race_info、perp_ethnicity、perp_ethnicity_info、
red_num，perp_dob，perp_age，节拍，区，arrestee_community，street_number，street_direction，street_name，street_suffix，street_direction2，street_name2，
street_suffix2, street_apt, street_city, v_community, v_street_num, v_street_direction, v_street_name, v_street_suffix, v_street_direction2,
v_street_name2, v_street_suffix2, v_street_apt, v_city, h_street_number, h_street_direction, h_street_name, h_street_suffix, h_street_apt, h_city, h_state,
h_zip, cv_dayofweek, cv_address, cv_date, cv_dow, cv_time, status, score, side)
;
```

我尝试将每个其他线程的行结束参数更改为 \r 和 \t，但没有骰子。它加载了，那里的数据很好，但它只加载了应该是 512271 的 256218 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:19:35.270

您可能需要检查：

*   如果您使用 MySQL Testbench 之类的客户端，则超时小于查询所消耗的时间
*   您的文件有一行带有特殊字符或不匹配导致读取中断

# ruby - 是否有任何软件包可以使用 Ruby 驱动 excel 应用程序？

> ID：14246590
> 
> 赞同：0
> 
> 时间：2013-01-09T21:12:59.573
> 
> 标签：ruby, ruby-1.9.3

除了使用 Ruby来驱动**excel、CSV**`win32ole`操作之外还有其他软件包吗？

 **谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:17:35.633

[http://rubygems.org/search?utf8=%E2%9C%93&query=excel](http://rubygems.org/search?utf8=%E2%9C%93&query=excel)

选择你喜欢的。如果您指定要做什么，也许我们可以为您提供更多帮助。在此之前，请查看此列表中的宝石，它们应该对您有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:18:10.737

我无法保证，但[roo](http://roo.rubyforge.org/)存在。不过它已经很旧了。

[writeexcel](https://github.com/cxn03651/writeexcel)较新，但我认为它只能写入电子表格，不能读取。

**编辑**

[根据文档，电子表格](http://rubygems.org/gems/spreadsheet)似乎也是最新的，但它只与 MS excel 兼容。**

# cuda - 使用 CUDA 中的复杂算法来合并内存访问和全局内存加载/存储效率

> ID：14246592
> 
> 赞同：0
> 
> 时间：2013-01-09T21:13:08.210
> 
> 标签：cuda

我正在分析以下 CUDA 内核

```
__global__ void fftshift_2D(double2 *data, int N1, int N2)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    int j = threadIdx.y + blockDim.y * blockIdx.y;

    if (i < N1 && j < N2) {
        double a = pow(-1.0, (i+j)&1);

        data[j*blockDim.x*gridDim.x+i].x *= a;
        data[j*blockDim.x*gridDim.x+i].y *= a;
    }
 } 
```

它基本上将二维双精度复数数据矩阵乘以标量双精度变量。

可以看出，我正在执行合并的全局内存访问，我想通过 NVIDIA Visual Profiler 通过检查全局内存负载和存储效率来验证这一点。令人惊讶的是，这样的效率都恰好是 50%，与合并内存访问的预期 100% 相去甚远。这与复数实部和虚部的交错存储有关吗？如果是这样，我可以利用任何技巧来恢复 100% 的效率吗？

先感谢您。

**附加信息**

```
BLOCK_SIZE_x=16
BLOCK_SIZE_y=16

dim3 dimBlock2(BLOCK_SIZE_x,BLOCK_SIZE_y);
dim3 dimGrid2(N2/BLOCK_SIZE_x + (N2%BLOCK_SIZE_x == 0 ? 0:1),N1/BLOCK_SIZE_y + (N1%BLOCK_SIZE_y == 0 ? 0:1)); 
```

N1 和 N2 可以是任意偶数。

该卡是 NVIDIA GT 540M。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:36:00.237

看看[这篇关于各种内存访问模式效率的 NVIDIA 博客文章](http://developer.nvidia.com/node/582497)。您遇到了跨步内存访问问题。

由于每个组件都是独立使用的，因此您可以将`double2`数组视为普通的普通`double`数组（就像[Robert Crovella 建议的那样](https://stackoverflow.com/a/14247543/56875%29)）。

```
__global__ void fftshift_2D(double *data, int N1, int N2)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    int j = threadIdx.y + blockDim.y * blockIdx.y;

    if (i < N1 * 2 && j < N2) {
        double a = pow(-1.0, (i / 2 + j)&1);
        data[j*blockDim.x*gridDim.x+i] *= a;
    }
} 
```

但是，如果您需要在单个线程中同时访问 x 和 y 组件，您可以尝试：

使用 2 个单独的数组。一个带有 x 分量 一个带有 y 分量。像那样：

```
__global__ void fftshift_2D(double *dataX, double *dataY, int N1, int N2)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    int j = threadIdx.y + blockDim.y * blockIdx.y;

    if (i < N1 && j < N2) {
        double a = pow(-1.0, (i+j)&1);

        dataX[j*blockDim.x*gridDim.x+i] *= a;
        dataY[j*blockDim.x*gridDim.x+i] *= a;
    }
} 
```

或者保持数据布局不变，但将其加载到共享内存中并从共享内存中重新洗牌。那看起来或多或少是这样的：

```
__global__ void fftshift_2D(double2 *data, int N1, int N2)
{
    __shared__ double buff[BLOCK_SIZE*2];
    double2 *buff2 = (double2 *) buff;
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    int j = threadIdx.y + blockDim.y * blockIdx.y;
    double ptr = (double *) &data[j*blockDim.x*gridDim.x + blockDim.x * blockIdx.x];

    // TODO add guarding with N1 & N2
    buff[threadIdx.x] = ptr[threadIdx.x];
    buff[blockDim.x + threadIdx.x] = ptr[blockDim.x + threadIdx.x];
    __syncthreads();

    double a = pow(-1.0, (i+j)&1);
    buff2[threadIdx.x].x *= a 
    buff2[threadIdx.x].y *= a 

    __syncthreads();
    ptr[threadIdx.x] = buff[threadIdx.x];
    ptr[blockDim.x + threadIdx.x] = buff[blockDim.x + threadIdx.x];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:18:52.727

是的，因为您有一个结构数据存储格式的数组，并且您仅使用以下行引用所有其他元素：

```
 data[j*blockDim.x*gridDim.x+i].x *= a; 
```

那么作为结果发生的全局加载和全局存储将各自只有 50% 的利用率。请注意，我认为缓存在这里应该有所帮助，因为您在下一行引用了备用元素。但是加载/存储效率仍然是 50%。

我相信你可以使用某种方法来解决这个问题（对于这个特定的例子）`*data`：

```
double *mydata = (double *)data;
...
mydata[2*(j*blockDim.x*gridDim.x)+i] *= a; 
```

请注意，我并不是想确切地展示如何获得相同的覆盖范围，只是说明这个想法。上面的代码大致是需要的，但您需要调整代码以确保正确处理要相乘的所有元素。

# javascript - 带有vars的javascript闭包函数？

> ID：14246596
> 
> 赞同：3
> 
> 时间：2013-01-09T21:13:25.630
> 
> 标签：javascript, closures

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

是否有任何适用的理由可以使用`var`s 声明函数而不仅仅是常规函数定义，尤其是在处理闭包时。

显然，在我演示之前，这可能没有多大意义，所以我会！

*注意：我使用 require.js 来说明这一点*

示例 A：我通常如何做事

```
define(function() {

    function foo(x) {
        return x + 42;
    }

    function bar(y) {
        return y + foo(y);
    }

    var MyObject = function(config) {
        // some sweet stuff
    }

    MyObject.prototype = {
        myFun: function(x) {
            return bar(x)
        }
    }

    return MyObject;
}) 
```

示例 B：我的看法

```
define(function() {

    var foo = function(x) {
        return x + 42;
    }

    var bar = function(y) {
        return y + foo(y);
    }

    var MyObject = function(config) {
        // some sweet stuff
    }

    MyObject.prototype = {
        myFun: function(x) {
            return bar(x)
        }
    }

    return MyObject;
}) 
```

我认为两者之间一定有一些区别，也许...... :)

感谢您的时间和精力！

* * *

编辑：试图以更明智的方式提出问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:16:06.413

没有真正的收获。`var`您在示例 A 中的函数声明将更改为函数表达式并提升到闭包的顶部，因此一旦示例 B 中的声明被提升，它们看起来与您在第一个示例中定义的相同。

您拥有的两种形式是*函数表达式*的显式分配和*函数声明。*函数声明被更改为函数表达式，并且声明本身被拉到函数的顶部（提升）。

在这里阅读更多：http: [//elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting/](http://elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting/)

# php - JQuery JSON 到 MySql 插入

> ID：14246598
> 
> 赞同：0
> 
> 时间：2013-01-09T21:13:46.743
> 
> 标签：php, jquery, mysql, json

我有一个没有 LMS 的 Captivate 培训，但我想从培训中发送数据。我已经编写了 javascript 来建立变量并发布到 php 页面，但我无法通过 post 获取请求。想法？？

Javascript：

```
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();

var myMovie = CaptivateController("Captivate");
//Retrieves the author's name, if available
var cpInfoCourseName = myMovie.query("cpInfoCourseName");
var currentDate = year + "-" + month + "/" + day;
var cpQuizInfoPassFail = myMovie.query("cpQuizInfoPassFail"); //1 = pass; 0 = fail
var cpQuizInfoPointsscored = myMovie.query("cpQuizInfoPointsscored");
var cpQuizInfoQuizPassPercent = myMovie.query("cpQuizInfoQuizPassPercent");
var cpQuizInfoTotalCorrectAnswers = myMovie.query("cpQuizInfoTotalCorrectAnswers");

var jsonData = "{'cpInfoCourseName': cpInfoCourseName, 'currentDate': currentDate, 'cpQuizInfoPassFail': cpQuizInfoPassFail, 'cpQuizInfoPointsscored': cpQuizInfoPointsscored,'cpQuizInfoTotalCorrectAnswers':cpQuizInfoTotalCorrectAnswers}";

$.ajax({
  type: "POST",
  url: "../../trainingReporting.php",
  dataType:"application/json",
  data: jsonData,
  success: function() {
        //alert("Your training results were saved and sent to your regional office.");
        //location.href = 'http://www.occ-connect.org/seconnect/occTrainings.php';           
    },
  error: function() {
                alert("Your data was not submitted");
    }
}); 
```

PHP：

```
 if(isset($_POST['data'])){
    $jsonData = $_POST['data'];

    //get region, email and ministry position of user
    $userInfo = mysql_query("SELECT profilevalue_8,profilevalue_9 FROM se_profilevalues WHERE profilevalue_user_id = '".$user->user_info['user_id']."'");

    while($r = mysql_fetch_array($userInfo))
    {
        $region = $r['profilevalue_9'];
        $ministry_position = $r['profilevalue_8'];
    }

    $user_id = $user->user_info['user_id'];
    $user_email = $user->user_info['user_email'];

    mysql_query("INSERT INTO trainingReporting (json,user_email,user_id,region,ministry_position) VALUES ('$jsonData','$user_email','$user_id','$region','$ministry_position')") or die('INSERT FAILED: '. mysql_error());
    echo "success!";

} else {
    echo "error";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:16:21.513

尝试添加`contentType`到您的 ajax 调用。

```
$.ajax({
  type: "POST",
  url: "../../trainingReporting.php",
  dataType:"application/json",
  data: jsonData,
  contentType: "application/json",
  success: function() {... 
```

默认情况下，jQuery 使用`application/x-www-form-urlencoded; charset=UTF-8`格式并且您希望它是 json。

`dataType`是指定服务器返回的数据的格式。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:16:40.487

使用 jquery，数据属性被转换为发布数据。所以你不会`$_POST['data']`在 php 中使用，而是在你的 jsonData var 下使用列名。所以 $_POST['cpInfoCourseName']...等等。或者，如果您希望所有内容都`$_POST['data']`在 javascript 中，您可以执行以下操作：`data:{'data':jsonData},`并将 js var jsonData 包装在`data`键下的对象文字中。

您还可以运行 print_r($_POST) 以显示 $_POST 中的所有数据。

# opengl - 进行子像素平移时，2D 纹理会失真

> ID：14246604
> 
> 赞同：3
> 
> 时间：2013-01-09T21:14:05.867
> 
> 标签：opengl, opengl-es-2.0, textures, texture-mapping

我想知道为什么这甚至可能的**理论推理**：几何的平移与纹理映射有何关系。

*   我只能在进行子像素平移时注意到这种效果，如果按整个像素平移，纹理看起来很好。
*   我正在使用正交投影，，，`GL_CLAMP_TO_EDGE`片段`GL_NEAREST`着色器是`highp`。
*   纹理坐标是图集的一个子区域，但即使映射了整个图集，我也可以看到失真。
*   使用 OpenGL ES（Android 和 iOS），但请在重新标记之前，任何人都可以解释这在 OpenGL 中不是问题。

我尝试过的事情：

*   [纹素的目标中心](https://stackoverflow.com/questions/5879403/opengl-texture-coordinates-in-pixel-space)，
*   [调整 0.5/宽度，0.5/高度](https://stackoverflow.com/questions/6023400/opengl-es-texture-coordinates-slightly-off)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T08:25:00.170

移动亚像素量总是会改变纹理采样。您使用最近的采样会影响纹理的采样方式，但不会影响它首先在哪个坐标上采样。该坐标是 tex 坐标（在多边形上插值）和顶点的函数，它决定了如何将多边形光栅化为屏幕像素。

请记住，为了获得完美的纹理采样，当在像素中心进行评估时，插值的 tex 坐标必须准确地位于 texel 中心。

将多边形移动一小部分像素会改变纹理的采样位置，因为像素中心现在位于多边形内略有不同的点。

现在，通过最近的采样，得到的坐标将有效地四舍五入到最近的纹素，所以如果你的坐标离中心不远，它可能会起作用。但是，当您的坐标移动了大约半个纹素时，它们正好位于两个纹素几乎等距的点上，那么计算精度上的微小误差就会以一种方式微移一些像素，而另一种微移一些像素。

这是一个图表。我选择显示一个三角形，用检查图案映射，但它同样适用于精灵或其他任何东西。

在图表的顶部，我只是展示了三角形是如何映射到纹理的。如果您在非常高分辨率的屏幕（或非常大的尺寸）上渲染此三角形，您会期望看到完全复制的检查模式。

但是，如果您以更接近的比例（例如 1:1）进行映射，则采样至关重要。在图表的底部，我展示了这种情况。

要看的关键是屏幕像素中心的位置，因为这决定了绘制哪些像素，以及纹理采样的位置。在这种情况下，我展示了以正确大小映射的多边形，但偏移了半个像素。这将像素中心精确地对齐在相邻的纹素之间，并且采样会非常抽搐。

![显示纹理采样的图表](../Images/74af7bac9688c263c79f7a6531fb9805.png)

# entity-framework-5 - 一个 vs 多个“DbContext”？

> ID：14246606
> 
> 赞同：0
> 
> 时间：2013-01-09T21:14:30.973
> 
> 标签：entity-framework-5

`DbContext`为每个事务创建一个新的有什么区别：

```
using (var context = new MyDbContext()) { /* transaction */ } 
```

并在整个应用程序中使用一个

```
var context = MyDbContext.Singleton;
*/ transaction */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:18:15.167

一个（第一个）是正确的方法。

另一个是不正确的方法。

实体框架旨在具有短暂的上下文。它在运行时不进行内存管理或清理，并且它存在的时间越长，它就会继续增长和使用内存。它被设计为在每次使用后丢弃。如果您以第二种方式使用它，您的代码将被破坏。

如果你正在开发一个网络应用程序，那就更糟了。第二种方法可能会导致数据损坏，因为上下文在所有用户之间共享，并且状态将被多个用户同时尝试对其进行破坏。

# mfc - 如何将“屏幕图像”获取到 CImage 以保存它？

> ID：14246614
> 
> 赞同：0
> 
> 时间：2013-01-09T21:14:48.867
> 
> 标签：mfc, visual-c++-2005

如何从 CPaintDC 图像（屏幕）到 Cimage？

```
CPaintDC dc(this);

dc.FillSolidRect( 20-1, 200+1, 200*3, 400+2, (COLORREF) 0x0 );

dc.SelectObject(pen1);

dc.MoveTo(20,400);
for(int i = 0;i<200;i++)
{
     dc.LineTo(20 + x[i], 600 - y1[i]);
     dc.FillSolidRect( 20 + x[i]-1,600- y1[i]-1, 3, 3, (COLORREF) 0xff00 );
} 
```

* * *

（下面会输出一条警告消息，说明它触发了关于“dbgrptt.c - 调试 CRT 报告功能”的断点？？？所以我一定是错过了或做错了什么？

```
CImage myimage;

    myimage.GetDC();
    myimage.Save("C:\\Projects_example\\sweep.jpg");
    myimage.ReleaseDC(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:33:08.080

```
CRect rc;
GetClientRect(rc);
CImage myimage;
myimage.Create(rc.Width(), rc.Height(), 24);
CDC memdc;
memdc.CreateCompatibleDC(&dc);
CBitmap * pOldBitmap = memdc.SelectObject(CBitmap::FromHandle((HBITMAP)myimage));
memdc.BitBlt(0, 0, rc.Width(), rc.Height(), &dc, 0, 0, SRCCOPY);
memdc.SelectObject(pOldBitmap); 
```

此时，您的`myimage`对象应该具有在`dc`.

# django - Elastic Beanstalk 未能更新本地 Git 配置

> ID：14246615
> 
> 赞同：1
> 
> 时间：2013-01-09T21:14:49.960
> 
> 标签：django, linux, git, amazon-web-services, amazon-elastic-beanstalk

这是我得到的错误：

> 无法更新本地 Git 配置。按照“http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/command-reference-get-started.html`”中的说明设置您的 Git 存储库，然后重试。

我已按照该网站上的指示写信，但无济于事。

EB 存在于我的路径上，它在整个过程中大部分时间都完成了，但最后却遇到了这个问题。它甚至成功启动了一个 EB 实例。我已经修改了我的 .git 文件夹以进行写访问，以及其中的配置文件，但似乎没有什么能摆脱这个错误。我不能执行“git aws.push”，因为 git 没有被配置为运行此命令。

我在 Mac OSX 10.8 (Mountain Lion) 上。该文件夹位于`/var/django/mysite`. 我的文件夹如下所示：

```
drwxr-xr-x   3 robertferguson  staff   102 Jan  6 20:05 .ebextensions
drwxr-xr-x   4 root            staff   136 Jan  9 11:50 .elasticbeanstalk
drwxrwxr-x  10 robertferguson  staff   340 Jan  9 11:37 .git
-rw-r--r--   1 root            staff    18 Jan  9 11:37 .gitignore
-rw-r--r--@  1 robertferguson  staff   152 Jan  6 17:43 README.txt
... (all the django/site specific files) 
```

这似乎与权限问题有关；我不认为 django 是相关的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:23:22.807

你是什​​么意思“git没有被配置为运行这个命令。” 你能在命令行输入'git'，还是根本没有配置git？如果是后者，您可以`PATH`按照以下说明将 git 添加到您的变量中：

[http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/](http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/)

这应该允许您在命令提示符下使用 git - 只需键入`git`.

完成后，您可以通过从此处下载 AWSDevTools 来设置它们：

[http://aws.amazon.com/developertools/AWS-Elastic-Beanstalk/6752709412171743](http://aws.amazon.com/developertools/AWS-Elastic-Beanstalk/6752709412171743)

您已经有了 .elasticbeanstalk 文件夹，所以您可能已经安装了这些？您的 .elasticbeanstalk 文件夹中有什么？（不要发布文件的内容，因为它可能是您的 AWS 密钥，只要让我们知道是否是。）如果是，请跳到最后一条说明。如果不是您的钥匙，请跳到该`git aws.config`行。

然后 cd 进入您的存储库并运行 Repo 设置：

`~/Downloads/elasticbeanstalk-cli/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh`

然后`git aws.config`，输入您的访问密钥和 EB 的应用程序/环境。

然后你可以`git add .`,`git commit -m "commit message"`和`git aws.push`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:12:29.510

我使用他们的说明遇到了一些相同的问题，然后 AWS 的一位技术人员在亚马逊论坛上询问后回复我说自从从 Java/Ruby 切换到 python shell 后他们遇到了一些问题混合工具。

那部分的指令说要运行：

```
sh {path}/AWSDevTools-RepositorySetup.sh 
```

但我发现如果你使用 bash vs sh 它会起作用，然后一切都从那里开始

```
bash {path}/AWSDevTools-RepositorySetup.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T01:29:27.447

* * *

## 请参阅下面 Josh Davis 的评论。

# python - Python：__slots__ 及其描述符的使用

> ID：14246616
> 
> 赞同：3
> 
> 时间：2013-01-09T21:14:53.563
> 
> 标签：python, python-2.7, cpython, python-3.2, slots

```
class Foo(object):
    __slots__ = ('a',)

class Bar(Foo):
    @property
    def a(self):
        return super(Bar, self).a

 super(Bar, Bar()).a = 4 
```

如果我使用此代码，这不起作用：

```
>>> super(Bar, Bar()).a = 4
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'super' object has no attribute 'a' 
```

为什么？

根据[python 文档](http://docs.python.org/2/reference/datamodel.html?highlight=__slots__#__slots__)，`__slots__`实现：

> `__slots__`通过为每个变量名创建描述符（实现描述符）在类级别实现。因此，类属性不能用于设置由`__slots__`;定义的实例变量的默认值。否则，类属性将覆盖描述符分配。

但是描述符可以处理继承（至少如果用纯 python 编写的话）。

有谁知道，为什么这不起作用`__slots__`？

**编辑**：似乎描述符通常不适用于`super()`，如果您正在尝试编写（虽然可以阅读）。所以我的问题宁愿是：为什么描述符是只读的，如果用 调用`super()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:16:34.353

`super()`不返回描述符，它返回*获取*描述符的*结果*。它也不返回函数，它返回绑定方法；函数也充当描述符，它们的方法返回一个方法。*`.__get__()`*

 **因为实例*上没有`a`定义，所以没有值，描述符引发 AttributeError。*`.__get__()`*

 *如果您`a`在以下实例上定义，则一切正常`Foo`：

```
class Foo(object):
    __slots__ = ('a',)
    def __init__(self):
        self.a = 'spam' 
```

因此，访问`__slots__`没有值的描述符会引发`AttributeError`：

```
>>> class Foo(object):
...     __slots__ = ('a',)
... 
>>> Foo.a
<member 'a' of 'Foo' objects>
>>> Foo().a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: a
>>> Foo.a.__get__(Foo(), Foo)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: a 
```

但是给实例一个值，然后`AttributeError`消失：

```
>>> class Foo(object):
...     __slots__ = ('a',)
...     def __init__(self):
...         self.a = 'spam'
... 
>>> Foo.a.__get__(Foo(), Foo)
'spam' 
```

现在`super()`可以找到描述符的结果就好了（使用不同的属性名称演示而不是 clobber `self.a`）：

```
>>> class Bar(Foo):
...     __slots__ = ('b',)
...     @property
...     def b(self):
...         return super(Bar, self).a
... 
>>> Bar().a
'spam' 
```**

# c++ - 在 C++ 中测试一些类

> ID：14246617
> 
> 赞同：-1
> 
> 时间：2013-01-09T21:14:59.863
> 
> 标签：c++, class, expression, public, void

我只想在 C++ 程序中测试一些类，但在 Xcode 中出现“预期表达式”错误。

实际上这是我写的代码：

```
#include <iostream>

using namespace std;

class A {
    public :
    virtual void M1 () { cout << " A::M1"; }
    void M2 () { cout << " A::M2"; }
    virtual void M3 () { cout << " A::M3"; }
};

class B : public A {
    public :
    void M1 () { cout << " B::M1"; }
    virtual void M2 () { cout << " B::M2"; }
    void M3 () { cout << " B::M3"; }
};

class C : public B {
    public :
    void M1 () { cout << " C::M1"; }
    void M2 () { cout << " C::M2"; }
    void M3 () { cout << " C::M3"; }
};

class D {
    public :
    D (A v, A& r, B& s) : va (v), ra (r), rb (s) { }
    void M1 () { cout << " D::M1 -->"; va.M1 (); ra.M1 (); rb.M1 (); cout << ’\n’; }
    void M2 () { cout << " D::M2 -->"; va.M2 (); ra.M2 (); rb.M2 (); cout << ’\n’; }
    void M3 () { cout << " D::M3 -->"; va.M3 (); ra.M3 (); rb.M3 (); cout << ’\n’; }
    protected :
    A va; A& ra; B& rb;
};

int main(int argc, const char * argv[])
{

A a; B b; C c; D d1 (a, a, b); D d2 (a, b, c); D d3 (a, c, b); D d4 (b, c, c);
cout << "avec d1 :\n"; d1.M1 (); d1.M2 (); d1.M3 ();
cout << "avec d2 :\n"; d2.M1 (); d2.M2 (); d2.M3 ();
cout << "avec d3 :\n"; d3.M1 (); d3.M2 (); d3.M3 ();
cout << "avec d4 :\n"; d4.M1 (); d4.M2 (); d4.M3 ();

return 0; 
```

}

我真的不知道那个错误是从哪里来的。

有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:22:13.157

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:30:10.423

# iphone - 缺少跟踪信息的主函数中的 EXC_BAD_ACCESS

> ID：14246618
> 
> 赞同：0
> 
> 时间：2013-01-09T21:15:04.837
> 
> 标签：iphone, ios, xcode, exc-bad-access

*   我在 iOS 模拟器上运行代码。游戏总是在弹出苹果购买窗口（比如在应用程序中购买东西）时崩溃，并在主函数中显示“EXC_BAD_ACCESS”。

*   然后我用 Instruments 运行代码，比如 Zombie，游戏崩溃了，但 Zombie 不报告错误也不显示堆栈跟踪。

*   Xcode 控制台都没有为我提供足够的信息。

我希望有人能解释在这种情况下我应该怎么做。有什么方法可以获得更多堆栈跟踪信息？

# matlab - MATLAB 读取 3gp 音频文件，因此我可以进行 FFT

> ID：14246620
> 
> 赞同：1
> 
> 时间：2013-01-09T21:15:10.447
> 
> 标签：matlab, audio

在我的 MATLAB 脚本中，我一直在做类似以下的事情来读取 .wav 文件；

```
[ref_data1,fs1,nbits1] = wavread('sample1.wav'); 
```

从那里我已经能够很好地将 ref_data1 与其他功能一起使用，例如`fft()`.

`sample1`如果我有3gp 文件，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:14:18.393

从[Matlab 文档](http://www.mathworks.com/help/matlab/import_export/supported-file-formats.html)中，如果您在 Mac 上安装了 Matlab，则可以使用[`VideoReader`](http://www.mathworks.com/help/matlab/ref/videoreaderclass.html)它支持 QuickTime 支持的文件格式，包括 .3gp。

否则，我将转换为`.wav`外部 matlab。

# c++ - 在 xcode 4.5.2 中使用 C++11 支持编译混合目标 C/C++ 项目时出现链接错误

> ID：14246622
> 
> 赞同：1
> 
> 时间：2013-01-09T21:15:15.963
> 
> 标签：c++, xcode, c++11, linker, c++-standard-library

我正在尝试编译具有 C++11 支持的 3 个项目的工作区。这组项目已使用 LLVM 编译器默认值成功编译和链接。此外，c++ 代码之前已经在许多编译器上编译过，包括 g++、llvm、msvc、sun、irix 等，因此它是非常干净的代码。

在工作区构建设置的 c++ 语言方言部分下，有 3 行项目：

c语言方言
c++语言方言
c++标准库

使用设置：

c语言方言：编译器默认
c++语言方言：编译器默认
c++标准库：libc++（支持c++11的LLVM c++标准库）

我可以成功编译但得到很多链接错误。有些来自我们自己的函数，有些来自标准函数。以下是标准函数的链接错误示例：

(null): "std::string::find_last_of(char const*, unsigned long) const"，引用自： (null): "std::string::size() const"，引用自：

很明显我链接到了错误的标准库，所以我调查了更改上面的各种选项。将方言更改为 -std=c++11 甚至破坏了我的编译。我找不到适合我的组合。

你能建议什么可能是错的吗？

编辑：我这样做的动机是我想在与objective-c接口的c++代码中使用std::thread（并且让c++代码仍然是可移植的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:54:08.083

XCode 4.5.2 / OSX 10.8.2

我一直在得到这些

```
(null): "std::string::find_last_of(char const*, unsigned long) const", 
 referenced from: (null):    "std::string::size() const", referenced from: 
```

不同版本的openCV库。似乎问题在于对 C++ 标准库的访问。在这种情况下，工作设置如下：

较旧的库版本：

```
C Language Dialect GNU99[-std=gnu99]
C++ Language Dialect GNU++11[-std=gnu++11]
C++ Standard Library libstdc++ (GNU C++ standard library) 
```

最近的库版本：

```
C Language Dialect GNU99[-std=gnu99]
C++ Language Dialect GNU++11[-std=gnu++11]
C++ Standard Library libc++ (LLVM C++ standard library with C++11 support) 
```

将标准库规范切换到任一版本都会产生这些错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:17:45.057

我终于将问题追溯到两件事

1) 尽管我在工作区级别设置了编译器选项，但这些选项并未传播到组成项目。*需要注意的事情！*所以实际上不同的项目是用不同的编译器库和方言集编译的——所以出现链接错误也就不足为奇了。对我有用的选项组合是：

**C 语言方言**编译器默认
**C++ 语言方言** -std=c++11
**C++ 标准库**libc++（支持 C++11 的 LLVM C++ 标准库）

2) 在 c++11 编译下，我的一个项目无法编译。修复语法错误后，它使用上述选项编译并链接良好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T06:39:55.037

在使用 Code 5 时，我遇到了类似的问题

```
Undefined symbols for architecture armv7:
"std::string::clear()", referenced from:
FormatLog(unsigned int, int, char const*, std::string&) in libMO.a(AppLog.o) 
```

将“部署目标”从 7.0 更改为 6.0 对我有帮助。

对于 XCode 4.5，它似乎必须使用`LLVM C++ with C++11 support`编译器而不是`GNU C++`C++ 标准库的编译器。

# php - 使用 ajax 和 php 的登录表单

> ID：14246623
> 
> 赞同：0
> 
> 时间：2013-01-09T21:15:21.293
> 
> 标签：php, javascript, html, ajax

我正在更改我网站上的登录表单以使用 ajax。它只是基本上检查用户名和密码是否正确。但它根本不起作用它刷新并且没有任何反应，任何人都可以看到我在代码中出错的地方吗？

```
<html>
  <body>
    <div id="content">
      <h1>Login Form</h1>
        <form id="form1" name="form1" action="testform.php" method="post">
           <p><label for="username">Username: </label>
           <input type="text" name="username" id="username" /></p>
           <p><label for="password">Password: </label>
           <input type="password" name="password" id="password" /></p>
           <p><input type="submit" id="login" name="login" /></p>
        </form>
  <div id="message"></div>
  </div>
</body>
</html>

<script type="text/javascript">
<script type="text/javascript"
src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>   
$(document).ready(function() {

   $("#login").click(function() {

   var action = $("#form1").attr('action');
   var form_data = {
       username: $("#username").val(),
       password: $("#password").val(),
       is_ajax:
   };

   $.ajax({
           type: "POST",
           url: action,
           data: form_data,
           success: function(response)
           {
              if(response == 'success')
                  $("#form1").slideUp('slow', function() {
                     $("#message").html("<p class='success'>logged in!</p>");
                  });
         else
           $( "#message").html("<p class='error'>Invalid username and/orpassword</p>");
           }
      });
      return false;
   });
});
</script>

<?php
   $is_ajax = $_REQUEST['is_ajax'];

  if(isset($is_ajax) && $is_ajax)
 {
     $username = $_REQUEST['username'];
     $password = $_REQUEST['password'];

    if($username == 'to_difine' && $password == 'to_difine')
  {
     echo "success";
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:00:25.233

**问题：**

1.  Ajax 请求正在返回整个 html 页面。
2.  标签有问题（无效的 html）。

**更正：**

1.  将 PHP 代码移动到文件的顶部。
2.  添加`exit;`到 php 里面`if is_ajax`，这样 html 的其余部分就不会返回了。
3.  移到jquery`<script type="text/javascript">`脚本下方。

工作[示例](http://playground.zaplabs.com/sandbox/qa/stackexchange/stackoverflow/14246623/testform.php)和[来源](http://playground.zaplabs.com/sandbox/qa/stackexchange/stackoverflow/14246623/testform.php.source)。

# gitolite - 为什么在安装 GitLab 4.0 时出现“FATAL: parse 'gl-conf' failed: Permission denied”？

> ID：14246624
> 
> 赞同：2
> 
> 时间：2013-01-09T21:15:22.410
> 
> 标签：gitolite, gitlab

我正在尝试将 GitLab 4.0 的全新实例安装到 Ubuntu 12.04 服务器上。

我一直遵循[https://github.com/gitlabhq/gitlabhq/blob/4-0-stable/doc/install/installation.md](https://github.com/gitlabhq/gitlabhq/blob/4-0-stable/doc/install/installation.md)上的指南，直到第 4 步结束。

当我尝试克隆 gitolite-admin 存储库时，它会失败，如下所示：

```
root@ws-prod-git-01:/home/git# sudo -u gitlab -H git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin
Cloning into '/tmp/gitolite-admin'...
Warning: Permanently added 'localhost' (ECDSA) to the list of known hosts.
FATAL: parse 'gl-conf' failed: Permission denied
fatal: The remote end hung up unexpectedly 
```

我尝试使用 git 用户进行 ssh 登录，但这就是我得到的：

```
root@ws-prod-git-01:/home/git# ssh -i /home/gitlab/.ssh/id_rsa git@localhost
Warning: Permanently added 'localhost' (ECDSA) to the list of known hosts.
PTY allocation request failed on channel 0
hello gitlab, this is git@ws-prod-git-01 running gitolite3 v3.2-gitlab-patched-0-g2d29cf7 on git 1.7.9.5

FATAL: parse 'gl-conf' failed: Permission denied
Connection to localhost closed. 
```

这是第二次运行设置过程。我第一次遇到同样的错误，所以重置并再次尝试。

权限被拒绝错误让我认为我的权限设置错误，但我复制并粘贴了安装指南告诉我的内容：

```
# Make sure the repositories dir is owned by git and it stays that way
sudo chmod -R ug+rwXs,o-rwx /home/git/repositories/
sudo chown -R git:git /home/git/repositories/ 
```

那么，我现在应该尝试什么？

编辑：

由于各种原因，我从 NFS 共享挂载了我的 /home。万一发生了什么事，我制作了一个根本不从 NFS 挂载的 VM。使用它，我没有得到 gl-conf 错误。

然后我用 NFS 共享重新创建了 VM，错误再次出现。

请注意，我有一个旧的 Gitlab v2.something 正在运行，它可以很好地与 NFS 共享一起使用。

关于 NFS 将如何影响这一点的任何想法？

# mysql - 更新操作后应删除行的触发器无法正常工作

> ID：14246626
> 
> 赞同：0
> 
> 时间：2013-01-09T21:15:35.997
> 
> 标签：mysql, database, triggers

嗨，我正在尝试学习 mysql，但是，在我定义了一个触发器后，该触发器应该在对表中的列进行更新操作后工作，它不能正常工作。每当我更新此列时，它应该立即删除一行。（此列的类型是 DATE 并且它在开头声明为 NULL）。这是我的表结构

```
Create Table Projects (

    pro_ID INT NOT NULL,
    pro_Name VARCHAR(150) NOT NULL,
    comp_date_info DATE DEFAULT NULL,

    PRIMARY KEY(pro_ID)
); 
```

我尝试添加一个带有存储过程的元组

```
DELIMITER //
CREATE PROCEDURE insert_into_Projects ( IN projectID INT, IN projectName VARCHAR(50) )
BEGIN

INSERT INTO homework.Projects values (projectID, projectName,NULL);

END //
DELIMITER ; 
```

这是在 Projects Table 中添加新元组的调用语句

```
call insert_into_Projects(111,'Project Mayhem'); 
```

到目前为止，你可以意识到我有一个像

```
 pro_ID   pro_Name         comp_date_info

1) 111      Project Mayhem   NULL 
```

这是触发器的实现

```
DELIMITER //
CREATE TRIGGER after_Projects_update
AFTER UPDATE ON homework.Projects
FOR EACH ROW
BEGIN

delete from homework.Projects
where comp_date_info != NULL;

END //
DELIMITER ; 
```

最后，每当我将此元组的 comp_date_info 更新为适当的日期值触发器时，我都希望将其删除。

```
update homework.Projects
set comp_date_info = '1989-04-05'
where pro_ID = 113; 
```

但我面临一个错误，上面写着

```
Error Code: 1442\. Can't update table 'Projects' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

如果您能提供帮助，我将不胜感激，顺便感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:27:23.630

您不能删除已调用触发器的行（显然）。

相反，将列定义为`NOT NULL`，这会强制应用程序代码处理这种情况，在这种情况下删除行而不是用列中的空值更新它。

另一种选择是将所有逻辑捆绑到您传入新值的存储过程中，并且存储过程可以根据输入进行更新或删除。

# excel - 比较 Excel 工作表之间的数据

> ID：14246630
> 
> 赞同：1
> 
> 时间：2013-01-09T21:15:46.920
> 
> 标签：excel, match, vlookup

我从同一个数据源中提取了 2 个提取物，都导入到了 excel 中。我需要比较数据以查看是否有任何不同，并突出显示/显示那些不同的数据。我不知道是否可以使用 vLookup，因为这似乎仅限于您正在查找的最左侧列。

前两列创建了一个虚拟复合键，因此我可以识别一个匹配项，然后使用 match 函数显示每个行组合是否匹配。

现在我需要说是否存在匹配，然后比较此匹配的工作表之间的所有其他数据。我需要交叉检查大约 15 列左右的其他数据，这就是我遇到的问题。我以为我可以只使用简单的 IF 语句，IF=match 然后检查 D 列 = D 列，但我认为我仍然需要索引引用或匹配值的引用来与其他值进行比较。

什么可能是最好的解决方案。如果需要，我愿意重写整个事情，如果这有助于使整个事情更容易/更清洁地实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:47:21.280

我同意这些评论 - 一些示例数据将有助于更准确地指定您希望如何标记行以进行检查。

但一般来说，如果每个 excel 工作表的布局相同，我建议比较 excel 数据

1.  将每个工作表中的数据堆叠在一起
2.  添加新列“源”以标识数据的工作表源，并为每条记录添加一个等于 1 的 CNT 列。
3.  在新数据上使用数据透视表并排比较
    *   在数据透视表中使用“来源”作为“列标签”
    *   使用“键”作为枢轴中的第一个“行标签”
    *   将您要比较的任何其他值添加到“行标签”部分
    *   使用 CNT 作为“价值”
4.  数据透视表中总 CNT 不为 2 的任何行都表示两个表之间存在差异。

这将允许您识别任何差异，以及仅出现在单个工作表中的那些行，简单的 VLOOKUP 会错过这些行。在这里查看一个[示例](https://dl.dropbox.com/u/10791482/Sample_Compare.xlsx)。Example1 是一个基本案例，Example2 展示了一个更具扩展性的解决方案，可以处理任意数量的不同源表和列。

这是一些示例数据，在您的情况下，KEY 将是标识您的记录的两列的串联：

```
- - - Worksheet MyOldData - - - - - - - 
Key      Name        Income
A        Aunders     111111
B        Blake       222222
C        Conan       333333
D        Ders        444444

- - - Worksheet MyNewData - - - - - - - 
Key      Name        Income
A        Anders      111111 <-- Diff Name
B        Blake       200000 <-- Diff Income
C        Conan       333333 
```

会导致 -->

```
- - -Worksheet ReadyToCompare - - - - - - - 
Key      Name        Income  Source  Cnt
A        Anders      111111  New     1
B        Blake       200000  New     1
C        Conan       333333  New     1
A        Aunders     111111  Old     1
B        Blake       222222  Old     1
C        Conan       333333  Old     1
D        Ders        333333  Old     1 
```

新的、可爱的、数据友好的“ReadyToCompare”表可以用作数据透视表的来源。

# bash - $@ 和 $* 有什么区别？

> ID：14246631
> 
> 赞同：1
> 
> 时间：2013-01-09T21:15:59.643
> 
> 标签：bash, shell

`$@`和有什么区别`$*`？为什么它们具有相同的值但当我设置`"$@"`为时却不同？`"$*"``IFS``|`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:17:30.300

`$@`和之间的区别`$*`：不带引号（不要这样做！），根本没有：两者相等`$1 $2`.... 使用双引号，`$@`将每个元素扩展为参数：`$1` `$2`...，同时`$*`扩展为合并为一个参数的所有元素：`$1c$2c...`（其中 c 是 IFS 的第一个字符）。你几乎总是想要`$@`. 数组也是如此：`${myarray[@]}`

# c# - 现在使用最新的工具创建一个常规的 EXE 文件？

> ID：14246635
> 
> 赞同：3
> 
> 时间：2013-01-09T21:16:07.570
> 
> 标签：c#, windows

如何使用现代开发工具和语言（如 C#，避免使用 C/C++）生成本机、非托管 Windows 可执行文件？具体来说，可执行文件不应具有 .NET 框架依赖项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:26:13.823

如果您喜欢 C#，它无疑是一种现代且伟大的编程语言，您可能会喜欢[D 编程语言](http://dlang.org/)，它在许多方面类似于 C#，其目标是作为 C++ 的现代替代品。

是的，dmd 编译器创建本地 Windows 可执行文件，并且该语言甚至具有用于自动内存管理的垃圾收集器。

如果您正在寻找 D 的 IDE，这个问题：[https](https://stackoverflow.com/questions/50179/an-ide-for-d) ://stackoverflow.com/questions/50179/an-ide-for-d将为您提供一些选择。

# php - 如何使用 spl_autoload_register

> ID：14246636
> 
> 赞同：0
> 
> 时间：2013-01-09T21:16:13.563
> 
> 标签：php, autoload, spl

我只是在学习如何使用 spl_autoload_register

我有一个看起来像这样的文件夹结构：

```
lib/projectname/home/homepage.php 
```

所以如果我包含这样的文件，它可以工作：

```
include("lib/projectname/home/homepage.php");
$home = new homepage(); 
```

我添加了一个如下所示的 autoload.php 文件：

```
function myclass($class_name) {
   $class_name = str_replace('_', DIRECTORY_SEPARATOR, $class_name) . '.php';
   require_once($class_name);
 }

spl_autoload_register('myclass'); 
```

现在，如果我尝试使用该类，我将像这样引用它：

```
require_once("autoload.php");

$home = new lib_projectname_home_homepage; 
```

当我这样做时，我收到以下错误：

```
Fatal error: Class 'lib_projectname_home_homepage' not found 
```

所以看起来好像类文件的加载正在工作，但它没有在文件中找到类？

实际的 homepage.php 文件如下所示：

```
class homepage {

    function __construct(){

        echo "homepage";
    }

} 
```

为了使其正常工作，我需要进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:18:54.943

改变

```
class homepage {
    function __construct(){
        echo "homepage";
    }
} 
```

至

```
class lib_projectname_home_homepage {
    function __construct(){
        echo "homepage";
    }
} 
```

或更改：

```
require_once($class_name); 
```

至

```
require_once('lib/projectname/home/' . $class_name); 
```

接着：

```
$home = new homepage(); 
```

自动加载器的概念只是查找具有给定名称的类。它不会即时更改类名。

# sql - 执行 sql 表达式 ASP 时出错

> ID：14246639
> 
> 赞同：1
> 
> 时间：2013-01-09T21:16:20.100
> 
> 标签：sql, asp-classic, ado

我正在尝试对 SQL 语句中的列字段使用变量，但是它向我返回以下错误：

用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误“80040e14”

[Microsoft][ODBC 文本驱动程序] 查询表达式 '= 'Yes'' 中的语法错误（缺少运算符）。

/junk/dbresults.htm，第 31 行

编码：

```
<%
    Dim connectString, connect, conDB, con
    connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
          src_abn = Request.QueryString("abn")
          src_cat = Request.QueryString("cat")
    set connect = Server.CreateObject("ADODB.connection")
    connect.open connectString

    if src_abn = "all" then
    conDB = "SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes'"  
    else
    conDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+src_abn+"%')"   
    end if

    set con = connect.execute(conDB)
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:21:07.283

看起来 的值`src_cat`包含创建无效查询的空格或其他字符。尝试将该行更改为此（带括号）：

```
conDB = "SELECT * FROM cont.csv WHERE [" & src_cat & "] = 'Yes'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:27:41.873

修复它，变量没有被删除。

# xamarin.android - 如何将通用对象列表绑定到 MonoDroid GridView

> ID：14246643
> 
> 赞同：0
> 
> 时间：2013-01-09T21:16:22.623
> 
> 标签：xamarin.android

我想将具有 5 个属性（列）和 10 行数据的列表绑定到 GridView。我发现的例子都有一个 ImageAdapter。

如何将列表中的对象属性绑定到 GridView？我需要什么样的适配器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:19:50.293

我不知道这是否对您有帮助，但是当我需要自定义控件时，我会设置所有信息来填充自定义 axml，如果您习惯于 WindowsPhone 或 Windows 8 应用程序，它就像一个用户控件

```
 LinearLayout linearImages = FindViewById<LinearLayout>(Resource.Id.LinearLayoutImages);

        LayoutInflater layoutInflater = (LayoutInflater)LayoutInflater.Context.GetSystemService(Context.LayoutInflaterService);

        foreach (Image image in images)
        {
            var view = layoutInflater.Inflate(Resource.Layout.ImageControl, null);

            TextView txtView = view.FindViewById<TextView>(Resource.Id.textView);
            txtView.Text = image.Title;

            ...

            linearImages.AddView(view);
       } 
```

# android - 如何在 Android 中扫描可用的广播电台？

> ID：14246650
> 
> 赞同：0
> 
> 时间：2013-01-09T21:16:37.770
> 
> 标签：android

我们希望访问 Android 设备附近可用的所有无线电频率。是否有任何可用的 API？鉴于某些收音机在没有耳机（用作天线）的情况下无法启动，我们可以在不连接耳机的情况下扫描频率吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:47:41.277

> 我们想访问 android 设备附近可用的所有无线电频率。是否有任何可用的 API。

不在标准 Android 中。

> 由于我们在设备中内置了无线电，因此必须有一些 API 可用于扫描电台

我敢冒险，只有不到 1% 的 Android 设备有任何类型的“收音机”，它有“电台”。如果您碰巧有一台带有 AM、FM、短波或类似“收音机”的设备，欢迎您联系该设备的制造商，看看他们是否有某种方法可以让您控制它。

# php - 尝试仅解析 RSS 提要中的图像

> ID：14246656
> 
> 赞同：1
> 
> 时间：2013-01-09T21:16:51.797
> 
> 标签：php, parsing, rss, simplexml, feed

首先，我是一个php新手。我在**[这里](https://stackoverflow.com/questions/4609380/only-show-images-from-an-rss-feed-with-php)**查看了问题和解决方案。然而，对于我的需要，对各种文章的解析还不够深入。

我的 RSS 提要的一小部分内容如下：

```
 <channel>
 <atom:link href="http://mywebsite.com/rss" rel="self" type="application/rss+xml" />
 <title>My Web Site</title>
 <description>My Feed</description>
 <link>http://mywebsite.com/</link>

 <image>
 <url>http://mywebsite.com/views/images/banner.jpg</url>
 <title>My Title</title>
 <link>http://mywebsite.com/</link>
 <description>Visit My Site</description>
 </image>

 <item>
 <title>Article One</title>
 <guid isPermaLink="true">http://mywebsite.com/details/e8c5106</guid>
 <link>http://mywebsite.com/geturl/e8c5106</link>
 <comments>http://mywebsite.com/details/e8c5106#comments</comments>     
 <pubDate>Wed, 09 Jan 2013 02:59:45 -0500</pubDate> 
 <category>Category 1</category>    
 <description>
      <![CDATA[<div>
      <img src="http://mywebsite.com/myimages/1521197-main.jpg" width="120" border="0"  />  
      <ul><li>Poster: someone's name;</li>
      <li>PostDate: Tue, 08 Jan 2013 21:49:35 -0500</li>
      <li>Rating: 5</li>
      <li>Summary:Lorem ipsum dolor </li></ul></div><div style="clear:both;">]]>
      </description>
 </item> 
 <item>.. 
```

我要解析的图像链接是每个**项目**>**描述中的方式**

我的 php 文件中的代码如下：

```
 <?php
 $xml = simplexml_load_file('http://mywebsite.com/rss?t=2040&dl=1&i=1&r=ceddfb43483437b1ed08ab8a72cbc3d5');
 $imgs = $xml->xpath('/item/description/img');
 foreach($imgs as $image) {
      echo $image->src;
 }
 ?> 
```

有人可以帮我弄清楚如何配置上面的php代码吗？

也是一个非常新手的问题......一旦我得到结果图像网址，如何在我的 html 上连续显示图像？

非常感谢！！！

埃尔南多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:06:36.247

RSS 提要中的`<img>`标签实际上并不是 XML 文档的元素，这与本网站上突出显示的语法相反 - 它们只是`<description>`元素内的文本，恰好包含字符`<`和`>`.

该字符串`<![CDATA[`告诉 XML 解析器，从那里到遇到的所有内容都`]]>`将被视为原始字符串，而不管它包含什么。这对于在 XML 中嵌入 HTML 很有用，因为 HTML 标记不一定是有效的 XML。这相当于转义整个 HTML（例如，使用`htmlspecialchars`），使`<img>`标签看起来像`&lt;img&gt;`. （我[在另一个答案中介绍了更多技术细节](https://stackoverflow.com/questions/13979582/php-simplexml-decoding-entities-in-cdata/13981917#13981917)。）

因此，从 RSS 中提取图像需要两个步骤：首先，获取每个 的文本`<description>`，其次，找到`<img>`该文本中的所有标签。

```
$xml = simplexml_load_file('http://mywebsite.com/rss?t=2040&dl=1&i=1&r=ceddfb43483437b1ed08ab8a72cbc3d5');

$descriptions = $xml->xpath('//item/description');
foreach ( $descriptions as $description_node ) {
    // The description may not be valid XML, so use a more forgiving HTML parser mode
    $description_dom = new DOMDocument();
    $description_dom->loadHTML( (string)$description_node );

    // Switch back to SimpleXML for readability
    $description_sxml = simplexml_import_dom( $description_dom );

    // Find all images, and extract their 'src' param
    $imgs = $description_sxml->xpath('//img');
    foreach($imgs as $image) {
        echo (string)$image['src'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:37:00.990

我对 xPath 没有太多经验，但您可以尝试以下方法：

```
$imgs = $xml->xpath('item//img'); 
```

这将选择所有在 -elements`img`内的`item`-elements，无论其间是否有其他元素。删除前导斜杠将搜索`item`文档中的任何位置，而不仅仅是从根。否则，您将需要类似`/rss/channel/item...`.

至于显示图像：只需输出`<img>`-tags 后跟换行符，如下所示：

```
foreach($imgs as $image) {
    echo '<img src="' . $image->src . '" /><br />';
} 
```

首选方法是使用 CSS 而不是`<br>`-tags，但我认为它们一开始更简单。

# css - 在没有 JavaScript 的情况下重新启动 CSS3 动画？

> ID：14246659
> 
> 赞同：3
> 
> 时间：2013-01-09T21:17:01.030
> 
> 标签：css, css-animations

有没有办法在不使用 JavaScript 的情况下单击时重新启动 CSS3 动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:51:07.203

有一个[css-trick](http://css-tricks.com/restart-css-animation/)总结了一些这样做的方法。您可以尝试`:target`伪类而不是复选框黑客。

**编辑**：使用[伪](http://jsfiddle.net/VGLAc/)`:target`类对示例进行了修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:23:13.687

You could do it with the [Checkbox Hack](http://css-tricks.com/the-checkbox-hack/) though it generally isn't encouraged.

Might be worth looking into however. It is an intriguing use of html and css.

**EDIT**

After a bit of play, I came up with [this](http://jsbin.com/ilexek/1/edit) example. The hardest part is actually just resetting the animation without javascript, not registering the click event. To get around it I duplicated the animation to a second css rule that begins when the checkbox is hit.

There may be a better way to do it, but this would theoretically work, aside from being a bit unconventional :)

# r - 使用 dbWriteTable 在 SQLite 数据库中保存 R 数据表时避免达到内存限制的想法

> ID：14246683
> 
> 赞同：4
> 
> 时间：2013-01-09T21:18:39.287
> 
> 标签：r, sqlite, sqldf

一个小到可以加载到 R 中的数据帧，`dbWriteTable`如果它接近最大可用 RAM 量，在调用期间仍然偶尔会达到内存限制上限。我想知道是否有比像下面的代码那样将表格分块读入 RAM 更好的解决方案？

我正在尝试编写可在旧计算机上运行的代码，因此我正在使用 Windows 32 位版本的 R 来重新创建这些内存错误。

```
# this example will only work on a computer with at least 3GB of RAM
# because it intentionally maxes out the 32-bit limit

# create a data frame that's barely fits inside 32-bit R's memory capacity
x <- mtcars[ rep( seq( nrow( mtcars ) ) , 400000 ) , ]

# check how many records this table contains..
nrow( x )

# create a connection to a SQLite database
# not stored in memory
library( RSQLite )
tf <- tempfile()
db <- dbConnect( SQLite() , tf )

# storing `x` in the database with dbWriteTable breaks.
# this line causes a memory error
# dbWriteTable( db , 'x' , x )

# but storing it in chunks works!
chunks <- 100

starts.stops <- floor( seq( 1 , nrow( x ) , length.out = chunks ) )

for ( i in 2:( length( starts.stops ) )  ){

    if ( i == 2 ){
        rows.to.add <- ( starts.stops[ i - 1 ] ):( starts.stops[ i ] )
    } else {
        rows.to.add <- ( starts.stops[ i - 1 ] + 1 ):( starts.stops[ i ] )
    }

    # storing `x` in the database with dbWriteTable in chunks works.
    dbWriteTable( db , 'x' , x[ rows.to.add , ] , append = TRUE )
}

# and it's the correct number of lines.
dbGetQuery( db , "select count(*) from x" ) 
```

# file - 在 Azure 中创建和提供临时 HTML 文件

> ID：14246684
> 
> 赞同：1
> 
> 时间：2013-01-09T21:18:47.040
> 
> 标签：file, azure, roles, instances, temp

我们有一个应用程序希望迁移到 Azure 以进行扩展。然而，在开始之前有一个地方让我担心：

我们有一个用户被定向到的网页。页面上的代码输出到数据库并生成 HTML 报告。新的 HTML 文档与一堆图表和其他图像一起放置在一个临时文件中。然后用户被重定向到这个新页面。

在 Azure 中，我们永远无法确定用户是否会被定向到同一台机器，原因有多种：Azure 负载均衡器可能会根据容量将用户推送到另一台机器，或者由于问题，或者什么。

因为这些只是**非常**频繁地创建和删除的临时文件，所以我最好将我的应用程序的临时目录指向某种共享驱动器，所有 Web 角色都具有读/写访问权限，然后能够映射一个 URL到此共享云端硬盘。那可能吗？还是这会比我想要的更复杂？

我仍然可以让每个实例都写入它自己的本地临时目录。喂它们只需要一两秒钟，所以我可以冒险在那个微秒内该实例是否发生故障。这方面的问题是对临时 HTML 文件的重定向是否将使用 http 1.1 并保持与该特定实例的连接。

谢谢，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:45:17.930

您可能需要查看 2 件事：

*   使用支持某种分布式文件系统（基于 blob 存储）的 Windows Azure 网站。因此，您在 Windows Azure 网站中“本地”存储的文件将从托管该网站的每台服务器上可用（如果您使用多个实例）。
*   提供来自 Blob 存储的文件。因此，无需在每个实例上本地保存 HTML 文件（或试图让用户坚持使用特定实例），只需将它们存储在 Blob 存储中并在那里重定向您的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:25:27.243

我认为 azure blob 是存储可以被多个实例访问的 html 文件的最佳位置。您可以将用户重定向到该 blob 内容，也可以编写自定义页面以呈现 blob 中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:36:21.170

来自@Sandrino 的好东西。还有一些想法：

*   将生成的 html 存储在角色内缓存中（可以并置在您的 Web 角色实例中），并从缓存中提供 html（在所有实例中共享）
*   充分利用 CDN。您可以将“CDN”文件夹映射到实际的边缘缓存。因此，您在代码中生成一次 html，然后将其缓存到 TTL 到期，此时您必须再次生成内容。

# excel - 使用宏打开xls文件时如何获得写权限

> ID：14246690
> 
> 赞同：0
> 
> 时间：2013-01-09T21:18:56.897
> 
> 标签：excel, csv, vba

```
Sub test()
Dim objXL
Set objXL = CreateObject("Excel.Application")
Dim FileName As Variant
Dim UpdateLinks As Variant
Dim ReadOnly As Variant
With objXL
    .Workbooks.Open(FileName:= "test.xls",UpdateLinks:=0,ReadOnly:=False)
    .Visible = True
End With
Set objXL = Nothing
End Sub 
```

这是我用来在宏中打开 Excel 文件的代码，但它在第 8 行使用 Workbooks.Open() 函数报告了语法错误。我尝试过，但无法弄清楚我错在哪里。关于 Workbooks.Open() 函数的更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/office/ff194819 (v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/ff194819(v=office.15).aspx)

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:35:15.137

您不需要`()`in 方法调用（除非您正在分配结果）。利用

```
.Workbooks.Open(FileName:= "test.xls",UpdateLinks:=0,ReadOnly:=False) 
```

也就是说，你为什么要创建一个应用程序对象？*如果这是在Excel*中编码的，则有效

```
Dim wb As Workbook
Set wb = Workbooks.Open(FileName:="test.xls", UpdateLinks:=0, ReadOnly:=False) 
```

要不就

```
Workbooks.Open FileName:="test.xls", UpdateLinks:=0, ReadOnly:=False 
```

尽管最好指定文件的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:30:43.327

`.Workbooks.Open FileName:="test.xls", UpdateLinks:=0, ReadOnly:=False`

# c - 我将如何在程序上“生成”或实例化多个生物？

> ID：14246693
> 
> 赞同：2
> 
> 时间：2013-01-09T21:19:16.717
> 
> 标签：c, oop, instantiation, procedural-programming

当我决定自学编程时，我从 Java 开始。虽然我熟悉编写简单的过程软件（主要是用 PHP），但我最近开始意识到，对于更复杂的操作，我*依赖*于对象。

我的第一个 Java 游戏通过实例化对象以随机速度在随机位置生成对手。我对在 C 中以程序方式实现这一概念感到困惑（我对此知之甚少），但我只能想到为每个对手中的变量创建不同的数组并将数组索引用作伪对象引用“变量” '。

```
int size[50]; // opponent size
for (i = 0; i < 100; i++) {
    size[i] = random_number();
} 
```

我的面向对象思维是否忽略了一个简单的解决方案？或者某些问题是否真的适用于面向对象的概念，以至于您必须编造假对象（或至少使用类似的模型）？我一直在 C 代码中看到结构，我知道它们在概念上类似于类，但我只知道这些。所以我想知道这样的事情是否可以完全非面向对象的心态。实例化没有真正的替代品，是吗？这一切都只是内存分配，所以在我看来，某些 C 程序别无选择，只能使用某种我认为是对象的形式来编写。

请告诉我我忽略了一些东西，否则我不能尊重那些谴责面向对象范式的 C 纯粹主义者。（我绝不是一个 OO 疯子；不过，我的大脑已经非常习惯这个想法，而且很难通过不提供您习惯的不同视角来看待事物。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:36:14.877

作为一个也开始作为 OO 程序员的人，我也花了一些时间来适应过程式编程。对我来说最重要的是习惯于使用指针，并记住函数不是由对象管理的，而是作用于你给它们的“对象”。无论如何，我认为这样的东西可能是您正在寻找的东西，以帮助您获得您正在尝试做的事情的程序图像。

```
struct creature {
    int speed;
    int size;
};

void init_creature(struct creature *c) {
    c->speed = random_number();
    c->size = random_number();
}

int main() {
    struct creature creatures[10];

    for (int i = 0; i < (sizeof(creatures)/sizeof(struct creature)); i++) {
        struct creature c = creatures[i];
        init_creature(&c);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:27:30.243

如果我们忽略所有高级的面向对象编程概念，如类型参数的继承或多态性，一切都归结为同一件事。

在 C++ 中，您有对象并调用附加到它们的方法，在 C 中，您有结构，并且通过通过参数传递这些函数来调用全局函数。

我的意思是，基本的 oop 范式在概念上是具有能够通过其方法执行事物的对象。现在在 C 中，您可以获得相同的行为，但您拥有未附加到任何对象的函数。

所以基本上在 C++ 或 Java 中你会有：

```
class Point {
  private:
    int x, y;
  public:
    Point(int x, int y) : x(x), y(y) { }
    void draw() { ... }
}; 
```

在纯 C 中，您将拥有：

```
struct Point {
  int x, y;
}

struct Point makePoint(int x int y) {
  struct Point p = {.x = x, .y = y};
  return p;
}

void drawPoint(struct Point p) {
  ..
} 
```

但是两种表示的语义能力本质上是相同的，尽管语法不同（甚至其背后的概念）。当然，如果我们开始考虑更强大的 oop 功能，一切都会改变。

在许多情况下，您不需要所有这些能力来表示对象，并非一切都意味着 oop 也不是所有问题都最好用 oop 方法解决。如果用 C 为游戏编写一个复杂的引擎同时用 Java 编写与系统一起运行的低级函数将是过大的杀伤力，同时也是过大的杀伤力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:32:31.023

A`struct`可能是您在这里寻找的。

A`struct`可以包含任意数量的命名变量（例如类上的属性），但不能包含方法（理论上您可以通过函数指针将方法放入其中，但这不会真正按照您想要的方式工作）。

所以用 C 表示你的生物，你可能有一个这样的结构：

```
struct creature {
  int x_pos;
  int y_pos;
  int speed;
}; 
```

要声明一个生物“对象”并设置一些属性，您可以这样做：

```
 void main() {
      struct creature mycreature;
      mycreature.x_pos = 1;
      mycreature.y_pos = 2;      
   } 
```

`struct creature mycreature`语法有点笨拙，所以人们经常使用`typedef`结构，所以他们不必说`struct creature mycreature`，而是可以说`creature mycreature`：

```
typedef struct _creature {
  int x_pos;
  int y_pos;
  int speed;
} creature; 
```

一个结构可以包含其他结构，因此您也可以创建一个`point`结构并将其用于位置变量：

```
typedef struct _point {
  int x;
  int y;
} point;

typedef struct _creature {
  point location;
  int speed;
} creature;

void main() {
    creature mycreature;
    mycreature.location.x = 1;
    mycreature.location.y = 2;      
} 
```

现在希望事情开始看起来有点熟悉......

# php - 如何对依赖于 for() 循环的 mysql 查询进行分页

> ID：14246695
> 
> 赞同：0
> 
> 时间：2013-01-09T21:19:27.497
> 
> 标签：php, html, mysql

我需要对下面显示的 php 代码的结果进行分页。我尝试了几种可能性，但无济于事。为了不篡改主脚本，我创建了几个测试代码，其中最接近我想要的结果的唯一代码是：

```
<?php
include( "conectiondetails.inc" );
mysql_select_db( $database, $cxn );
$query1 = "SELECT * from table";
$result1 = mysql_query( $query1, $cxn ) or die ( "Couldn't execute query." . mysql_error() );
$row1 = mysql_fetch_array( $result1 );
$category = 'tools';
for( $i = 1; $i <= 3; $i++ ) {
    if( $row1[ 'Category' . "$i" ] == "$category" ) {
        $cat = 'Category' . "$i";
        $ad = 'Placement' . "$i";
        $query2 = "SELECT Email, $ad, $cat FROM table WHERE $cat='$category'";
        $result2 = mysql_query( $query2, $cxn ) or die ( "Couldn't execute query." . mysql_error() );
        $nr = mysql_num_rows( $result2 ); // Get total of Num rows from the database query
        if( isset( $_GET[ 'pn' ] ) ) { // Get pn from URL vars if it is present
            $pn = preg_replace( '#[^0-9]#i', '', $_GET[ 'pn' ] ); // filter everything but numbers for security(new)
            //$pn = ereg_replace("[^0-9]", "", $_GET['pn']); // filter everything but numbers for security(deprecated)
        } else { // If the pn URL variable is not present force it to be value of page number 1
            $pn = 1;
        }
//This is where we set how many database items to show on each page
        $itemsPerPage = 3;
// Get the value of the last page in the pagination result set
        $lastPage = ceil( $nr / $itemsPerPage );
// Be sure URL variable $pn(page number) is no lower than page 1 and no higher than $lastpage
        if( $pn < 1 ) { // If it is less than 1
            $pn = 1; // force if to be 1
        } else {
            if( $pn > $lastPage ) { // if it is greater than $lastpage
                $pn = $lastPage; // force it to be $lastpage's value
            }
        }
// This creates the numbers to click in between the next and back buttons
// This section is explained well in the video that accompanies this script
        $centerPages = "";
        $sub1 = $pn - 1;
        $sub2 = $pn - 2;
        $add1 = $pn + 1;
        $add2 = $pn + 2;
        if( $pn == 1 ) {
            $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
            $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
        } else {
            if( $pn == $lastPage ) {
                $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
                $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
            } else {
                if( $pn > 2 && $pn < ( $lastPage - 1 ) ) {
                    $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $sub2 . '">' . $sub2 . '</a> &nbsp;';
                    $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
                    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
                    $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
                    $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $add2 . '">' . $add2 . '</a> &nbsp;';
                } else {
                    if( $pn > 1 && $pn < $lastPage ) {
                        $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
                        $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
                        $centerPages .= '&nbsp; <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
                    }
                }
            }
        }
// This line sets the "LIMIT" range... the 2 values we place to choose a range of rows from database in our query
        $limit = 'LIMIT ' . ( $pn - 1 ) * $itemsPerPage . ',' . $itemsPerPage;
// Now we are going to run the same query as above but this time add $limit onto the end of the SQL syntax
// $sql2 is what we will use to fuel our while loop statement below
        $query3 = "SELECT Email, $ad, $cat FROM table WHERE $cat='$category' $limit";
        $result3 = mysql_query( $query3, $cxn ) or die ( "Couldn't execute query." . mysql_error() );
        $paginationDisplay = ""; // Initialize the pagination output variable
// This code runs only if the last page variable is ot equal to 1, if it is only 1 page we require no paginated links to display
        if( $lastPage != "1" ) {
            // This shows the user what page they are on, and the total number of pages
            $paginationDisplay .= 'Page <strong>' . $pn . '</strong> of ' . $lastPage . '&nbsp;  &nbsp;  &nbsp; ';
            // If we are not on page 1 we can place the Back button
            if( $pn != 1 ) {
                $previous = $pn - 1;
                $paginationDisplay .= '&nbsp;  <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $previous . '"> Back</a> ';
            }
            // Lay in the clickable numbers display here between the Back and Next links
            $paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>';
            // If we are not on the very last page we can place the Next button
            if( $pn != $lastPage ) {
                $nextPage = $pn + 1;
                $paginationDisplay .= '&nbsp;  <a href="' . $_SERVER[ 'PHP_SELF' ] . '?pn=' . $nextPage . '"> Next</a> ';
            }
        }
// Build the Output Section Here
        $outputList = '';
        while( $row = mysql_fetch_array( $result3 ) ) {

            $Email = $row[ "Email" ];
            $Placement1 = $row[ 'Placement' . "$i" ];
            $Category1 = $row[ 'Category' . "$i" ];

            $outputList .= '<h1>' . $Placement1 . '</h1><h2>' . $Category1 . ' </h2><hr />';

        }
    }
}// close while loop
?>

<html>
<head>
    <title>My Pagination</title>
    <style type="text/css">
        <!--
        .pagNumActive {
            color: #000;
            border: #060 1px solid;
            background-color: #D2FFD2;
            padding-left: 3px;
            padding-right: 3px;
        }

        .paginationNumbers a:link {
            color: #000;
            text-decoration: none;
            border: #999 1px solid;
            background-color: #F0F0F0;
            padding-left: 3px;
            padding-right: 3px;
        }

        .paginationNumbers a:visited {
            color: #000;
            text-decoration: none;
            border: #999 1px solid;
            background-color: #F0F0F0;
            padding-left: 3px;
            padding-right: 3px;
        }

        .paginationNumbers a:hover {
            color: #000;
            text-decoration: none;
            border: #060 1px solid;
            background-color: #D2FFD2;
            padding-left: 3px;
            padding-right: 3px;
        }

        .paginationNumbers a:active {
            color: #000;
            text-decoration: none;
            border: #999 1px solid;
            background-color: #F0F0F0;
            padding-left: 3px;
            padding-right: 3px;
        }

        -->
    </style>
</head>
<body>
<div style="margin-left:64px; margin-right:64px;">
    <h2>Total Items: <?php echo $nr; ?></h2>
</div>
<div style="margin-left:58px; margin-right:58px; padding:6px; background-color:#FFF; border:#999 1px solid;"><?php echo $paginationDisplay; ?></div>
<div style="margin-left:64px; margin-right:64px;"><?php print "$outputList"; ?></div>
<div style="margin-left:58px; margin-right:58px; padding:6px; background-color:#FFF; border:#999 1px solid;"><?php echo $paginationDisplay; ?></div>
</body>
</html> 
```

此代码应该检查我的数据库，其中包含 Category1、Category2、Category3、Placement1、Placement2 和 Placement3 作为其列的一部分，选择 Category==tools 的电子邮件、Placement 和 Category。但是，上面的代码仅显示条件为真的第一列并丢弃其余列（在这种情况下，它仅显示 Placement1、Category1 及其对应的电子邮件）。我不知道还能做些什么来让这段代码按照我需要的方式运行。帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:56:10.937

进行 2 次查询，其中 1 次用于[计算您的数据总数](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)，第二次用于[限制您显示的记录](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)检查两个链接以了解如何以这种简单的方式执行此操作。

# python - 除了变量 Python 之外的任何东西

> ID：14246701
> 
> 赞同：0
> 
> 时间：2013-01-09T21:19:50.233
> 
> 标签：python

我对 Python 非常陌生，基本上想要 d 或 o 以外的任何东西来重新运行这个问题？有什么帮助吗？

```
Myfile = raw_input( '''Specify filename (o) or use default chain (d)? ''')

if Myfile == 'd':
    print 'default choosen '
    Myfile = 'M:/test/testchains_a.csv'

if Myfile == 'o':
    print 'own file choosen '
    Myfile = raw_input('Enter absolute path to the .csv file:')

else:
    print 'successful' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:22:05.153

您可以使用`while`循环来检查输入是否为“o”或“d”：

```
MyFile = None
while MyFile != 'o' and MyFile != 'd':
  Myfile = raw_input( '''Specify filename (o) or use default chain (d)? ''') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:24:33.270

您可以按照`squiguy`建议的方式执行此操作，但将整个内容放入循环中可能更具可读性，因此您不必重复相同的检查两次：

```
while True:
    Myfile = raw_input( '''Specify filename (o) or use default chain (d)? ''')

   if Myfile == 'd':
        print 'default choosen '
        Myfile = 'M:/test/testchains_a.csv'
        break

    elif Myfile == 'o':
        print 'own file choosen '
        Myfile = raw_input('Enter absolute path to the .csv file:')
        break 
```

这将永远循环，直到它遇到一个`break`- 换句话说，直到他们选择`'d'`or `'o'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:28:36.310

您可以使用循环：

```
wrong = True
while(wrong):
    file = raw_input("My awesome prompt")
    if file == "d":
        file = '/some/path'
        wrong = False
    if file == "o":
        file = raw_input("Where?")
        wrong  = False

# Continue your program... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:29:56.267

我认为你的实际问题是糟糕的 UI 设计。第一个问题是多余的，很容易消除：

```
myfile = raw_input('Enter absolute path to the .csv file (leave blank to use the default):')
myfile = myfile or 'M:/test/testchains_a.csv' 
```

这种“按回车键使用默认值”的方法在对话程序中很常见。

要回答所*问*的问题，我建议使用这样的函数：

```
def prompt(message, choices):
    while True:
        s = raw_input(message)
        if s in choices:
            return s 
```

并在您的主要代码中：

```
option = prompt('Specify filename (o) or use default chain (d)? ', 'od')
if option == 'd':
    ...
elif option == 'o':
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-23T16:09:38.440

使用 elif (elseif) 和 else

```
file = input("enter (d) to use the default file or enter (c) to specify a custom path: ")
if file.lower() == "d":
    print("some code")
elif file.lower() == "c":
    print("some code")
else:
    print("invalid answer!")
    input() 
```

# javascript - 在 JQuery Mobile 中使可折叠集合的功能具有响应性

> ID：14246703
> 
> 赞同：1
> 
> 时间：2013-01-09T21:19:55.010
> 
> 标签：javascript, jquery, jquery-mobile, responsive-design

我正在设计一个适用于台式机、平板电脑和手机的应用程序。

我有一些可折叠的内容，我想在桌面浏览器和 ipad 横向中插入，但不想在平板电脑纵向和手机上插入。

我有其他响应式元素正常工作，但以下 html 和 CSS 无法正常工作：

HTML

```
<div id="storagePage" data-role="page" data-theme="a">
   <div data-role="collapsible" data-collapsed="false" data-theme="b" data-content-theme="c" class="storage_devices" data-inset="true">
       <h2>Header 1</h2>
       <p>Content here</p>
   </div>
</div> 
```

CSS

```
@media all{
.storage_devices {data-inset: "true";}
}

@media (max-device-width: 520px) and (orientation:portrait) {
    .storage_devices {data-inset: "false";}
} 
```

我假设 JQuery Mobile 库正在标记 html，因此该类没有正确识别 div。我也尝试过使用id，但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:00:58.503

我用过

```
@media all and (max-width: 650px) {
   .storage_devices {data-inset: "false"}
} 
```

您可以更改宽度，然后添加方向以满足您的需要。

# html - 元标记 itemprop

> ID：14246710
> 
> 赞同：25
> 
> 时间：2013-01-09T21:20:21.183
> 
> 标签：html, meta-tags, microdata

我正在尝试在我的网页中包含提取的结构化数据。

我包括这个来描述：

```
<meta itemprop="description" content="my description" /> 
```

但是我意识到页面上已经有一个正常的元描述：

```
<meta name="description" content="my description" /> 
```

是否可以将它们都留下，或者真的有必要将它们合并在一起，例如：

```
<meta itemprop="description" name="description" content="" /> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-10T01:39:09.190

你*应该*离开他们两个。微[数据规范](http://www.w3.org/TR/microdata/#content-models)说：

> 如果元元素具有 itemprop 属性，则必须省略 name、http-equiv 和 charset 属性，并且必须存在 content 属性。

所以合并它们是无效的。

# python - 哪种语言可用于接收单独的击键？以及如何将结果导入python？

> ID：14246717
> 
> 赞同：0
> 
> 时间：2013-01-09T21:20:37.783
> 
> 标签：python, python-2.7, low-level

> **可能重复：**
> [Python 从用户读取单个字符](https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user)

我正在执行在我的电脑上用 python 构建一个 8 位 CPU 的疯狂任务。我已经启动并运行了 CPU，但希望 CPU 能够自行处理用户输入。为此，我已经指定了一个用作 I/O 的内存地址，并且已经确定了如何将击键转换为它们的等效数字并馈送到 CPU，CPU 可以通过编程来处理输入。我想知道是否有一个操作系统通用解决方案可以让程序接收单独的击键，而用户无需在输入之间按回车键。我在学校的导师告诉我，在 python 中不太可能有操作系统通用的方法来执行此操作，但我可能能够找到另一种可以处理这部分代码的功能的语言。

所以我的问题是，哪些语言将允许此功能，以及从那里，我将如何将该功能导入我的 python 脚本？

提前致谢。

# spring - 使用postgis和Spring休眠空间：无法取回空间数据

> ID：14246729
> 
> 赞同：1
> 
> 时间：2013-01-09T21:21:11.693
> 
> 标签：spring, hibernate, postgresql, postgis

我有这个问题：我可以写入带有地理类型列的 Postgis 表，并且数据输入正确。当我尝试取回它时，我得到一个 java.lang.IllegalArgumentException: Can't convert object of type org.postgresql.util.PGobject

我正在使用 Hibernate Spatial 4.0M1、Postgis 2.0.2、Postgresql 9.1.7 和 Spring 3.2、Postgis-jdbc 2.0.2，我还尝试了 1.5.2 和 Postgresql-jdbc 9.1-901。

这是我班的相关部分

```
public class Poi {
@Id
@GeneratedValue(generator="t_pois_poisid_seq")
private long poisid;
@Column(name="name")
private String name;
@Column(name="userid")
private int owner;
//@Column(columnDefinition = "Geometry", name="location")
@Type(type="org.hibernate.spatial.GeometryType")
private Point location;

public Poi(){}

public Poi(String name, int owner, String wktPoint){
    this.name = name;
    this.owner = owner;
    WKTReader fromText = new WKTReader();
    Geometry geom = null;
    try{
        geom = fromText.read(wktPoint);
    }catch(ParseException e){
        throw new RuntimeException("Not a WKT string:" + wktPoint);
    }
    if (!geom.getGeometryType().equals("Point")) {
        throw new RuntimeException("Geometry must be a point. Got a " +  geom.getGeometryType());
    }
    //geom.setSRID(4326);
    this.location = (Point) geom;

} 
```

}

这是我得到的错误

> java.lang.IllegalArgumentException：无法转换 org.postgresql.util.PGobject org.hibernate.spatial.dialect.postgis.PGGeometryValueExtractor.toJTS(PGGeometryValueExtractor.java:99) org.hibernate.spatial.dialect.AbstractJTSGeometryValueExtractor 类型的对象。 extract(AbstractJTSGeometryValueExtractor.java:42) org.hibernate.spatial.dialect.AbstractJTSGeometryValueExtractor.extract(AbstractJTSGeometryValueExtractor.java:37) org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:269) org.hibernate.type.Abstract nullSafeGet(AbstractStandardBasicType.java:265) org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:238) org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:357) org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2807) org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1545) org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1477) org. hibernate.loader.Loader.getRow(Loader.java:1377) org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:644) org.hibernate.loader.Loader.doQuery(Loader.java:854) org.hibernate。 loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293) org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263) org.hibernate.loader.Loader.loadEntity(Loader.java:1977) org.hibernate.loader。 entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82) org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72) org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3821) org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:458) org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java: 427）org.hibernate.event.internal.DefaultLoadEventListener.load（DefaultLoadEventListener.java:204）org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad（DefaultLoadEventListener.java:260）org.hibernate.event.internal.DefaultLoadEventListener.onLoad（ DefaultLoadEventListener.java:148) org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1075) org.hibernate.internal.SessionImpl.access$2000(SessionImpl.java:175) org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.load (SessionImpl.java:第2421章 ） .reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) java.lang.reflect.Method.invoke(Method.java:601) org.springframework.aop.support .AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317) org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) org.springframework .transaction.interceptor。TransactionInterceptor.invoke(TransactionInterceptor.java:110) org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204) $Proxy24.findOne (未知来源) com.prismio.pois.api.controller.PoiController.getUser(PoiController.java:40) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) sun .reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) java.lang.reflect.Method.invoke(Method.java:601) org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219) org .springframework.web.method.support。InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132) org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter。 invokeHandleMethod(RequestMappingHandlerAdapter.java:746) org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687) org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter. java:80) org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925) org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856) org.springframework.web.servlet。FrameworkServlet.processRequest(FrameworkServlet.java:915) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) org.springframework.web。 servlet.FrameworkServlet.service(FrameworkServlet.java:796) javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:29:19.907

如果有人感兴趣：问题是 PostGIS`PGObject`从列类型返回 a`Geography`而不是`PGGeometry`，因此`PGgeometry`无法转换为。我使用 jdbcTemplate（而不是 Hibernate）找到的解决方案是将结果集中的字段转换为`PGObject`然后创建一个`PGGeometry`这样的：

```
PGgeometry geo = new PGgeometry(myPGObject.getValue()); 
```

这样做会以我想要`geo.getValue()`的形式返回一个字符串。`SRID=4326;POINT(40.70686417491799 -74.01572942733765)`我可以使用查询进行查询，`ST_AsText`但它会丢失精度。我不太了解 Hibernate，无法为此提出解决方案，但这对于我的用例来说已经足够了。

# c# - 查找我的项目C#中是否使用了接口

> ID：14246735
> 
> 赞同：0
> 
> 时间：2013-01-09T21:21:32.657
> 
> 标签：c#, .net

我需要查找项目中是否使用了特定的接口，我刚刚找到了类似的东西

```
Type IType = Type.GetType("iInterfaceName"); // I want to look in whole project, not in one file
if (IType == null)
{  
   Text = "Interface Not Exist";
}
else
{
    Text = "Interface Exist";
} 
```

我不确定这是否正确，但这是我发现的最新东西并且不起作用，非常感谢任何帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:23:43.677

`Assembly.Load`在你去之前使用`GetType`如下：

```
Assembly.Load("YourProjectName")
        .GetType("iInterfaceName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:26:03.037

假设你有如下界面：

```
public interface IFoo
{
} 
```

您可以找出是否有任何类型以这种方式实现它：

```
var isImplemented = Assembly.GetExecutingAssembly().
                             GetTypes().
                             Any(t => t.IsAssignableFrom(typeof (IFoo))); 
```

要使用上述内容，请添加到您的 using 指令：

```
using System.Linq; 
```

对于 .NET 2.0：

```
var isImplemented = false;
foreach (var t in Assembly.GetExecutingAssembly().GetTypes())
{
    if (!t.IsAssignableFrom(typeof (IFoo))) continue;
    isImplemented = true;
    break;
}
//Operate 
```

# sql - 验证相互依赖的字段

> ID：14246737
> 
> 赞同：0
> 
> 时间：2013-01-09T21:21:35.037
> 
> 标签：sql, ruby-on-rails, postgresql

在我的 Rails 应用程序中，我有相互依赖的类，`ParkingSpace`并且`Parking Lot`.

A`ParkingLot`有很多`ParkingSpaces`并且`ParkingSpace`属于 a `ParkingLot`。

我想确保`ParkingSpace`不能`ParkingLot`再次插入相同的内容。

通常，我会使用唯一性验证来确保 ParkingSpace 不能重复停车位具有非常通用的名称

`ParkingLot`id:1 上可以有`ParkingSpaces`1、2 和 3。

`ParkingLot`id:2 上也可以有`ParkingSpaces`1、2 和 3。

但是上面的停车场应该不能有两个同名的车位。

如何在 Rails 中验证这一点？如何在数据库级别验证这一点？

我正在考虑以一种独特的方式将这两个领域结合在一起，然后称之为独特。这是一种有效的方法吗？（不完全确定如何在数据库级别执行此操作，但我的所有验证都需要存在。）

（使用 Postgres）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:53:05.543

假设您的停车位和标识符（如名称），您将在 ParkingSpace 类中执行以下操作：

```
class ParkingSpace < ActiveRecord::Base

  belongs_to :parking_lot

  validates_uniqueness_of :name, :scope => :parking_lot_id

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:29:19.183

好吧，因为停车场#属于停车场。您将向停车场模型添加唯一性验证，以验证 :parkingspace_id 的唯一性

您正在创建一个具有唯一 id 的停车位对象，因此停车位 #1 将是 id = 1。如果您验证 id 的唯一性，那么您将确保另一个停车场可以添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:09:40.693

看起来像这颗宝石：“性感的 PG 约束更接近答案。”\

[https://github.com/maxim/sexy_pg_constraints](https://github.com/maxim/sexy_pg_constraints)

Feel free to add to it, or explain anything from it.

From the documentation

> Multi-column constraints
> 
> Say you have the same table “books” only now you want to tell your Postgres to make sure that you should never have the same title + author_id combination. It means that you want to apply uniqueness to two columns, not just one. There is a special syntax for working with multicolumn constraints.

```
class AddConstraintsToBooks < ActiveRecord::Migration
  def self.up
    constrain :books do |t|
      t[:title, :author_id].all :unique => true # Notice how multiple columns are listed in brackets.
    end
  end

  def self.down
    deconstrain :books do |t|
      t[:title, :author_id].all :unique
    end
  end
end 
```

> It’s important to note that you shouldn’t mix multicolumn constraints with regular ones in one line. This may cause unexpected behavior.

# sql-server - 设置间隔的 SQL Server 作业失败通知

> ID：14246738
> 
> 赞同：1
> 
> 时间：2013-01-09T21:21:35.470
> 
> 标签：sql-server, tsql

我有一个 SQL Server 作业，每次失败时都会发出通知。我每 5 分钟运行一次这项工作。如果某项工作需要在晚上 10:00 更改其状态，并且直到第二天早上才发现问题，那么将发送超过 100 封电子邮件，其中包含相同的失败通知。

无论如何，您是否可以限制发送的电子邮件数量？例如，如果一小时内 12 次计划运行中的任何一个失败，我希望 SQL Server 在该小时内发送一封电子邮件通知，但不应发送超过一封电子邮件（即使有多次失败） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:26:00.967

您可以创建一个简单的表，其中包含作业名称和`bit`指示电子邮件是否已成功发送的列，然后检查该列作为警报的一部分。

```
DECLARE Notifications TABLE
(
    ID int IDENTITY (1, 1) PRIMARY KEY NOT NULL,
    JobName varchar(50),
    MailSent bit DEFAULT 0
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T16:54:56.917

在 SSMS 中选择管理下的数据库邮件，右键单击并配置数据库邮件。完成后，使用新配置文件发送测试邮件以确认其有效。

接下来，打开 SQL Server 代理的属性。在警报系统页面上启用邮件配置文件。重新启动 SQL Server 代理以使更改生效。

在 SQL Server 代理下创建要向其发送消息的操作员。

最后，在您的作业中选择通知并将操作员设置为在作业完成时发送。

# python - python拖放初始化问题

> ID：14246739
> 
> 赞同：0
> 
> 时间：2013-01-09T21:21:39.630
> 
> 标签：python, cocoa, pyobjc

我对如何为窗口实现拖放功能然后让 url 出现在文本框中感到困惑。

我已经更新了我卡在的地方

```
class controller(NSWindow):

#File to encode or decode
form_file = IBOutlet()
mainWindow = IBOutlet()

#drag and drop ability
def awakeFromNib(self):
    self.registerForDraggedTypes_([NSFilenamesPboardType, None])
    print 'registerd drag type'

def draggingEntered_(self, sender):
    print 'dragging entered doctor who'
    pboard = sender.draggingPasteboard()
    types = pboard.types()
    opType = NSDragOperationNone
    if NSFilenamesPboardType in types:
        opType = NSDragOperationCopy
    return opType

def performDragOperation_(self,sender):
    print 'preform drag operation'
    pboard = sender.draggingPasteboard()
    successful = False
    if NSFilenamesPboardType in pboard.types():
        print 'my actions finally working'
        fileAStr = pboard.propertyListForType_(NSFilenamesPboardType)[0]
        print type(fileAStr.encode('utf-8'))
        successful = True
    print self.form_file
    return successful 
```

我可以删除文件，但我无法`form_file`从`performDragOperation`函数内部引用插座。如您所见，我正在尝试打印它，但它返回`NoneType`错误。

> （原因 '<type 'exceptions.TypeError'>: 'NoneType' object is not callable'）在拖动会话期间引发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:39:38.343

我相信您的问题是[响应者链](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html#//apple_ref/doc/uid/10000060i-CH3-SW2)中较早的东西正在处理`-[draggingEntered:]`和拒绝拖动，然后您的窗口才能到达它。

对于一个典型的 AppKit 应用程序，在到达窗口之前，一条操作消息会从 NIB 发送给 First Responder，任何挂在它后面的东西，然后是最里面的视图及其委托，然后是它的所有祖先视图及其委托. 因此，例如，如果您有一个处理拖动消息的文本编辑视图，并且您在该视图上拖动，则窗口将看不到它。

无论如何，有很多方法可以调试它，但最简单的方法是让每个方法从、ing （或ging 或ging ）结果迭代`nextResponder()`链。然后你可以看到你在阻止谁。`self``print``logging.log``NSLog`

由于我们在评论中讨论了许多其他问题，我不确定这是否是真正解决您问题的问题。但特别要提出一件事：

我不认为 PyObjC 是这里问题的一部分。当 Cocoa 运行时向 PyObjC 对象发送 ObjC 消息`-[draggingEntered:]`时，PyObjC 运行时通过查找`draggingEntered_`方法并神奇地转换它来处理它。（好吧，我说的是魔法，但它是简单的科学。另外，因为它是声波的，所以它不会做木头。）`@IBAction`在相同的地方你需要一个 ObjC 程序需要`(IBAction)`，这些在 Cocoa 文档中有很好的记录。

同时，PyObjC 代码（或几乎任何其他基于事件循环或其他非线性代码）的通用调试技巧。当您收到这样的错误时：

```
(reason '<type 'exceptions.TypeError'>: 'NoneType' object is not callable') was raised     during a dragging session 
```

很难弄清楚到底出了什么问题。但是您可以在引发的函数内部处理异常，并获取所需的所有信息。您可以在每一行周围包裹一个`try`/`except`以确定哪一行被提出，您可以`print`整个回溯，而不仅仅是摘要，等等。

# salesforce - Salesforce SOQL - 带有用户信息的 DefaultDivision

> ID：14246742
> 
> 赞同：1
> 
> 时间：2013-01-09T21:21:49.060
> 
> 标签：salesforce, soql

我正在尝试编写一个 SOQL 查询，该查询将用户信息与 DefaultDivision 的名称一起拉回。执行以下操作时：

```
Select u.Email, u.FirstName, u.LastName, u.DefaultDivision from User u 
```

“DefaultDivision”的值是一个 ID（如 02d3498202020222）而不是友好名称（如北美）。我知道 DefaultDivision 映射到 Division 对象的 Id，但是如何获取名称？

我试过这样的事情：

```
select u.Email, (select Name from Division where Id = u.DefaultDivision) from User u 
```

但这不起作用，因为没有直接关系（然而，有......！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:08:14.000

与 SQL 不同，SOQL 不支持您在此处给出的类型的子查询。

在大多数定义了显式关系的 SOQL 情况下，您可以直接从该显式关系查询数据，例如

```
select u.Email, u.DefaultDivision.Name from User u where Id=blahblahblah 
```

但是，在某些情况下，没有明确定义这种关系，我相信 DefaultDivision 就是其中之一（所以实际上我上面的查询可能不起作用）。在这种情况下，没有单一查询方式来获取您想要的信息 - 您必须首先查询部门及其 ID，然后使用 DefaultDivision 查询用户，然后使用 ID 从 ID 解析部门名称第一次查询的结果。

幸运的是，这种情况不再经常发生，但在使用 Divisions 时，您会稍微深入 Salesforce.com 的深度，因此您可能会在那里发现一些不寻常的东西。

# c# - 返回标识值时的 ExecuteScalar 与 ExecuteNonQuery

> ID：14246744
> 
> 赞同：26
> 
> 时间：2013-01-09T21:21:52.610
> 
> 标签：c#, sql-server, executenonquery, executescalar

试图弄清楚它是否最好使用`ExecuteScalar`，或者`ExecuteNonQuery`我是否想返回新插入行的标识列。我已经阅读[了这个问题](https://stackoverflow.com/questions/2974154/what-is-the-difference-between-execute-scalar-execute-reader-and-executenonque)并且我理解那里的差异，但是当查看我几周前编写的一些代码时（同时从这个网站大量借用）我发现在我的插入中我使用的是`ExecuteScalar`，如下所示：

```
public static int SaveTest(Test newTest)
{
    var conn = DbConnect.Connection();
    const string sqlString = "INSERT INTO dbo.Tests ( Tester , Premise ) " +
                             "               VALUES ( @tester , @premise ) " +
                             "SET @newId = SCOPE_IDENTITY(); ";
    using (conn)
    {
        using (var cmd = new SqlCommand(sqlString, conn))
        {
            cmd.Parameters.AddWithValue("@tester", newTest.tester);
            cmd.Parameters.AddWithValue("@premise", newTest.premise);
            cmd.Parameters.Add("@newId", SqlDbType.Int).Direction = ParameterDirection.Output;

            cmd.CommandType = CommandType.Text;
            conn.Open();
            cmd.ExecuteScalar();

            return (int) cmd.Parameters["@newId"].Value;
        }
    }
} 
```

这可以满足我的需要，所以我想知道

1.  我是否应该在`ExecuteNonQuery`这里使用，因为它“更适合”进行插入？
2.  由于我使用的是输出参数，因此检索标识值是否相同？
3.  是否存在与一种或另一种方式相关的性能影响？
4.  总体上是否有更好的方法来做到这一点？

我正在使用 Visual Studio 2010、.NET 4.0 和 SQL Server 2008r2，以防万一。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-11T22:51:42.013

正如 Aaron 所建议的，存储过程会使其更快，因为它节省了 Sql Server 编译 SQL 批处理的工作。但是，您仍然可以采用任何一种方法：`ExecuteScalar`或`ExecuteNonQuery`. 恕我直言，它们之间的性能差异是如此之小，以至于任何一种方法都是“正确的”。

`ExecuteScalar`话虽如此，如果您从输出参数中获取标识值，我看不出使用的意义。在这种情况下，返回的值`ExecuteScalar`变得无用。

我喜欢的一种方法，因为它需要更少的代码，`ExecuteScalar`不使用输出参数：

```
public static int SaveTest(Test newTest)
{
    var conn = DbConnect.Connection();
    const string sqlString = "INSERT INTO dbo.Tests ( Tester , Premise ) " +
                             "               VALUES ( @tester , @premise ) " +
                             "SELECT SCOPE_IDENTITY()";
    using (conn)
    {
        using (var cmd = new SqlCommand(sqlString, conn))
        {
            cmd.Parameters.AddWithValue("@tester", newTest.tester);
            cmd.Parameters.AddWithValue("@premise", newTest.premise);

            cmd.CommandType = CommandType.Text;
            conn.Open();
            return (int) (decimal) cmd.ExecuteScalar();

        }
    }
} 
```

快乐编程！

**编辑**：请注意，我们需要转换两次：从 object 到`decimal`，然后到`int`（感谢 techturtle 注意到这一点）。

# c# - 泛型方法约束？

> ID：14246745
> 
> 赞同：0
> 
> 时间：2013-01-09T21:21:54.033
> 
> 标签：c#, generics

我有 2 个类，其中包含将填充单独网格的数据。网格非常相似，但差异足以需要使用 2 个类。两个网格都包含一个名为“GetDuplicates”的函数，在我实现这些类的地方，我有一个方法来检查该类是否有重复项并返回一条消息来表明这一点。

```
private bool HasDuplicates(FirstGridList firstList)
{
    var duplicates = firstList.FindDuplicates();
    if (duplicates.Count > 0)
    {
        // Do Something
        return true;
    }
    return false;
} 
```

我希望能够同时使用 FirstGridList 和 SecondGridList 调用该方法。我只是不知道如何正确实现泛型约束，然后将泛型输入参数转换为正确的类型。如同：

```
private bool HasDuplicates<T>(T gridList)
{
    // Somehow cast the gridList to the specific type
    // either FirstGridList or SecondGridList

    // Both FirstGridList and SecondGridList have a method FindDuplicates
    // that both return a List<string>
    var duplicates = gridList.FindDuplicates();
    if (duplicates.Count > 0)
    {
        // Do Something
        return true;
    }
    return false;
} 
```

如您所见，该方法执行相同的操作。因此我不想创建两次。我觉得这是可能的，但我想错了。我对泛型还没有完全的经验。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T21:25:38.063

您可以让两个网格都实现一个通用接口，例如：

```
public interface IGridList
{
    public IList<string> FindDuplicates();
} 
```

然后基于此接口定义您的通用约束：

```
private bool HasDuplicates<T>(T gridList) where T: IGridList
{
    // Both FirstGridList and SecondGridList have a method FindDuplicates
    // that both return a List<string>
    var duplicates = gridList.FindDuplicates();
    if (duplicates.Count > 0)
    {
        // Do Something
        return true;
    }
    return false;
} 
```

显然你`FirstGridList`和`SecondGridList`应该实现`IGridList`接口和`FindDuplicates`方法。

或者你甚至可以在这个阶段摆脱泛型：

```
private bool HasDuplicates(IGridList gridList)
{
    // Both FirstGridList and SecondGridList have a method FindDuplicates
    // that both return a List<string>
    var duplicates = gridList.FindDuplicates();
    if (duplicates.Count > 0)
    {
        // Do Something
        return true;
    }
    return false;
} 
```

顺便说一句，在这个阶段您甚至可以摆脱该`HasDuplicates`方法，因为它不会为您的应用程序带来太多价值。我的意思是面向对象编程早在泛型或 LINQ 之类的东西之前就存在了，所以为什么不使用它：

```
IGridList gridList = ... get whatever implementation you like
bool hasDuplicates = gridList.FindDuplicates().Count > 0; 
```

对于任何具有基本 C# 文化的开发人员来说，这似乎是合理且可读的。当然，它可以为您节省几行代码。请记住，您编写的代码越多，出错的可能性就越高。

# html - 删除 div 表的底部边框

> ID：14246748
> 
> 赞同：0
> 
> 时间：2013-01-09T21:22:04.457
> 
> 标签：html, internet-explorer-8, border, css-tables

我正在尝试在 div 表中显示一些图像，但我一直在每个图像的底部获得边框。大约2-5像素。

我会发送图像，但我是新用户。

我想删除这个边框。

图像正好是 52 x 10。

我只为这个应用程序在 IE8 中。

*编辑*：我正在做一个更大的布局 - 我只是将代码归结为我遇到的一个问题，即表格底部的边框。

```
/*tables*/
.WorkFlowTableStyleA
{
    display: table;
    width: 10px; 
    border-collapse:collapse;
    border-style: none;  
}

/*rows*/
.WorkflowRowStyleA
{
    display: table-row;
    height: 52px;

}

/*arrow containers*/
.WorkflowCellArrowHolderA
{
    display: table-cell;
    width: 10px ;
}

<div class="WorkFlowTableStyleA">   
<div class="WorkflowRowStyleA">
<div class="WorkflowCellArrowHolderA" style="background-color: Black;">
<img src="../../Images/Flowchart/spacerTestTenByFiftyTwo.png" />

</div>
</div>
</div>

<div class="WorkFlowTableStyleA">   
<div class="WorkflowRowStyleA">
<div class="WorkflowCellArrowHolderA" style="background-color: Black;">
<img src="../../Images/Flowchart/spacerTestTenByFiftyTwo.png" />

</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:05:49.330

MadHenchbot 对“边界”的来源很感兴趣。这不是边框，而是您的 div 中未填充的空间。（更改为 style="background-color: Red"）以验证这一点。

好消息是，因为听起来图像已经是你想要的大小了，我认为有一个快速修复：

```
/*tables*/
.WorkFlowTableStyleA
{
    display: table;
    /* get rid of width: 10px; */
    border-collapse:collapse;
    border-style: none;   
}

/*rows*/
.WorkflowRowStyleA
{
    /* get rid of display: table-row; */
    height: 52px;
}

/*arrow containers*/
.WorkflowCellArrowHolderA
{
    /* get rid of display: table-cell; */
    /* get rid of width: 10px; */
    height: 52px;                             <--- Add this to set the div height.
} 
```

这对我有用。您可能必须重新设置宽度，但我猜这是不必要的。另外，除非您正在构建布局，否则我不确定您为什么需要所有 table/div 的东西......看起来它只是让事情复杂化？

# crash - Cocos2D 2 OSX EXC_BAD_ACCESS (SIGSEGV)

> ID：14246750
> 
> 赞同：0
> 
> 时间：2013-01-09T21:22:06.150
> 
> 标签：crash, cocos2d-iphone, osx-mountain-lion

我正在更新我为 Mac 拥有的游戏，并且在通过 XCode 运行时更新工作正常。

我尝试通过开发人员 ID 签名的应用程序进行分发，这样我就可以让朋友测试它，当我运行应用程序并向他们提供应用程序时，它会在主菜单之后崩溃。我是不是导出错了？为什么它会通过 XCode 运行良好，然后我尝试导出它并且每次都崩溃？

这是我的错误日志：

```
 Crashed Thread:  6  CVDisplayLink 

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000121028021

VM Regions Near 0x121028021:
CG shared images       000000011f294000-000000011f29c000 [   32K] r--/r-- SM=SHM  
--> 
CG shared images       00000001c0001000-00000001c0009000 [   32K] rw-/rw- SM=SHM  

Thread 0:: Dispatch queue: com.apple.main-thread
    0   libsystem_kernel.dylib          0x00007fff91ef6686 mach_msg_trap + 10
    1   libsystem_kernel.dylib          0x00007fff91ef5c42 mach_msg + 70
    2   com.apple.CoreFoundation        0x00007fff8bf01803 __CFRunLoopServiceMachPort + 195
    3   com.apple.CoreFoundation        0x00007fff8bf06ee6 __CFRunLoopRun + 1078
    4   com.apple.CoreFoundation        0x00007fff8bf066b2 CFRunLoopRunSpecific + 290
    5   com.apple.HIToolbox             0x00007fff943620a4 RunCurrentEventLoopInMode + 209
    6   com.apple.HIToolbox             0x00007fff94361e42 ReceiveNextEventCommon + 356
    7   com.apple.HIToolbox             0x00007fff94361cd3 BlockUntilNextEventMatchingListInMode + 62
    8   com.apple.AppKit                0x00007fff961c8613 _DPSNextEvent + 685
    9   com.apple.AppKit                0x00007fff961c7ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    10  com.apple.AppKit                0x00007fff961bf283 -[NSApplication run] + 517
    11  com.apple.AppKit                0x00007fff96163cb6 NSApplicationMain + 869
    12  libdyld.dylib                   0x00007fff916837e1 start + 1

    Thread 1:
    0   libsystem_kernel.dylib          0x00007fff91ef86d6 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8ce15eec _pthread_workq_return + 25
    2   libsystem_c.dylib               0x00007fff8ce15cb3 _pthread_wqthread + 412
    3   libsystem_c.dylib               0x00007fff8ce00171 start_wqthread + 13

    Thread 2:: Dispatch queue: com.apple.libdispatch-manager
    0   libsystem_kernel.dylib          0x00007fff91ef8d16 kevent + 10
    1   libdispatch.dylib               0x00007fff91fbfdea _dispatch_mgr_invoke + 883
    2   libdispatch.dylib               0x00007fff91fbf9ee _dispatch_mgr_thread + 54

    Thread 3:
    0   libsystem_kernel.dylib          0x00007fff91ef86d6 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8ce15eec _pthread_workq_return + 25
    2   libsystem_c.dylib               0x00007fff8ce15cb3 _pthread_wqthread + 412
    3   libsystem_c.dylib               0x00007fff8ce00171 start_wqthread + 13

    Thread 4:
    0   libsystem_kernel.dylib          0x00007fff91ef86d6 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8ce15eec _pthread_workq_return + 25
    2   libsystem_c.dylib               0x00007fff8ce15cb3 _pthread_wqthread + 412
    3   libsystem_c.dylib               0x00007fff8ce00171 start_wqthread + 13

    Thread 5:
    0   libsystem_kernel.dylib          0x00007fff91ef86d6 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8ce15eec _pthread_workq_return + 25
    2   libsystem_c.dylib               0x00007fff8ce15cb3 _pthread_wqthread + 412
    3   libsystem_c.dylib               0x00007fff8ce00171 start_wqthread + 13

    Thread 6 Crashed:: CVDisplayLink
    0   com.lasthaven.wordshufflemac    0x000000010bacc52a -[GameScene scrambleWord:] + 158 (GameScene.m:322)
    1   com.lasthaven.wordshufflemac    0x000000010baced36 -[GameScene setupNewWord] + 373 (GameScene.m:878)
    2   com.lasthaven.wordshufflemac    0x000000010bacb6c1 -[GameScene initializeGame] + 941 (GameScene.m:112)
    3   com.lasthaven.wordshufflemac    0x000000010bacb2fc -[GameScene init] + 428 (GameScene.m:56)
    4   com.lasthaven.wordshufflemac    0x000000010baf30c1 +[CCNode node] + 33
    5   com.lasthaven.wordshufflemac    0x000000010bacb11b +[GameScene scene] + 62 (GameScene.m:32)
    6   com.lasthaven.wordshufflemac    0x000000010bac9f90 -[MenuScene playGame:] + 363 (MenuScene.m:301)
    7   com.lasthaven.wordshufflemac    0x000000010baee7e3 -[CCMenu ccMouseUp:] + 112
    8   com.lasthaven.wordshufflemac    0x000000010bb177fb -[CCEventDispatcher mouseUp:] + 101
    9   com.apple.Foundation            0x00007fff97fa5220 -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:modes:] + 212
    10  com.apple.Foundation            0x00007fff97fdf8b9 -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:] + 122
    11  com.lasthaven.wordshufflemac    0x000000010bb17f25 -[CCEventDispatcher dispatchEvent:] + 140
    12  com.apple.Foundation            0x00007fff97fab677 __NSThreadPerformPerform + 225
    13  com.apple.CoreFoundation        0x00007fff8bee4101 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
    14  com.apple.CoreFoundation        0x00007fff8bee3a25 __CFRunLoopDoSources0 + 245
    15  com.apple.CoreFoundation        0x00007fff8bf06dc5 __CFRunLoopRun + 789
    16  com.apple.CoreFoundation        0x00007fff8bf066b2 CFRunLoopRunSpecific + 290
    17  com.apple.Foundation            0x00007fff97fb389e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 268
    18  com.lasthaven.wordshufflemac    0x000000010bb16888 -[CCDirectorDisplayLink getFrameForTime:] + 162
    19  com.apple.CoreVideo             0x00007fff8c0c603d CVDisplayLink::performIO(CVTimeStamp*) + 203
    20  com.apple.CoreVideo             0x00007fff8c0c52a4 CVDisplayLink::runIOThread() + 632
    21  com.apple.CoreVideo             0x00007fff8c0c5013 startIOThread(void*) + 148
    22  libsystem_c.dylib               0x00007fff8ce13742 _pthread_start + 327
    23  libsystem_c.dylib               0x00007fff8ce00181 thread_start + 13 
``` 
            回答 #1

赞同：1

时间：2013-01-09T22:03:17.510

从头开始。

盯着这条线几个小时后：

```
0   com.lasthaven.wordshufflemac    0x000000010bacc52a -[GameScene scrambleWord:] + 158 (GameScene.m:322) 
```

我意识到代码由一个 for 循环组成，我无法弄清楚它有什么问题！所以最后我忘了在 for 循环的开头初始化 int i 。

```
 for(int i = 0; i < [word length]; i++ {

  } 
```

因此，对于如此简单的事情，它会在 XCode 之外导致崩溃，但不会在其中导致崩溃，这让我发疯了！

谢谢阅读！

```

# html - 可以使用表单元素来保留搜索过滤器吗？

> ID：14246754
> 
> 赞同：0
> 
> 时间：2013-01-09T21:22:15.330
> 
> 标签：html, forms, conventions

我有一个带有搜索过滤器的网页来缩小结果范围。您可以单击结果转到其详细信息页面，但如果您使用浏览器的“返回”按钮返回搜索结果，过滤器将全部消失。将过滤器选项包装在“FORM”元素中以便它们持续存在是不好的做法吗？

前：

```
<div class="sort-results classes">
        <select id="select-classes" name="sort-classes">
            <option selected="selected" value="">Sort by</option>
            <option value="price-ascending" data-order="asc" data-sort="class-price">Price: Lowest</option>
            <option value="price-descending" data-order="desc" data-sort="class-price">Price: Highest</option>
            ...
        </select>
        </div> 
```

后：

```
<div class="sort-results classes">
     <form>
        <select id="select-classes" name="sort-classes">
            <option selected="selected" value="">Sort by</option>
            <option value="price-ascending" data-order="asc" data-sort="class-price">Price: Lowest</option>
            <option value="price-descending" data-order="desc" data-sort="class-price">Price: Highest</option>
            ...
        </select>
      </form>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:33:00.750

这没有任何问题（将表单元素包装在表单中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:37:33.480

该`select`元素是一个表单元素。因此，实际上您*应该*将它们包装在一个表格中。此外，由于您的用户正在提交数据，这也是它出现在表单中的另一个原因。

# java - Hibernate: Native SQL query repeating column results

> ID：14246758
> 
> 赞同：2
> 
> 时间：2013-01-09T21:23:00.370
> 
> 标签：java, mysql, sql, hibernate

I'm experiencing some strange issues when executing the following native SQL query within a Hibernate environment:

```
public List<Object[]> getExcelResults(Integer idSurvey)
{
    StringBuffer queryString = new StringBuffer();

    //build query string
    queryString.append("select s.idSection, s.description as sectionDescription, ");
    queryString.append("q.idQuestion, q.description as questionDescription, q.type, ");
    queryString.append("a.idAnswer, a.description, ");
    queryString.append("sum(sa.checked), avg(sa.value), count(sl.idSurveyLog) ");
    queryString.append("from surveylog sl ");
    queryString.append("inner join surveyanswerlog sa ");
    queryString.append("on sl.idSurveyLog = sa.idSurveyLog ");
    queryString.append("inner join answer a ");
    queryString.append("on sa.idAnswer = a.idAnswer ");
    queryString.append("inner join question q ");
    queryString.append("on a.idQuestion = q.idQuestion ");
    queryString.append("inner join section s ");
    queryString.append("on q.idSection = s.idSection ");
    queryString.append("where sl.idSurvey = :idSurvey ");
    queryString.append("group by s.idSection, q.idQuestion, a.idAnswer ");
    queryString.append("order by s.idSection, q.idQuestion, a.idAnswer asc; ");

    //create query
    Query query = this.sessionFactory.getCurrentSession().createSQLQuery(queryString.toString());
    query.setInteger("idSurvey", idSurvey);

    return query.list();
} 
```

If you look at the properties that are being returned, you'll notice that there are three `description` fields from three different tables. The problem that I'm having is that the value of the column `a.description` is being duplicated in the array positions that should correspond to `s.description` and `q.description`.

For example, if I had a result row such as:

`[1, "Section A", 1, "Question A", 1, 1, "Answer A", 2, 2, 2]`

Hibernate would return an incorrect `Object[]` for that row such as:

`[1, "Answer A", 1, "Answer A", 1, 1, "Answer A", 2, 2, 2]`

At first I thought that I needed to use aliases since all of those columns have the same names, but as you can see from the code above, `a.description` doesn't have an alias. The reason for this is that, if I add an alias to all three columns, I get a sqlexception which reads *Column "description" not found*. I'm completely stumped, it is as if the code were mocking me.

Even weirder, if I take the generated SQL query from the console and run on it on MySQL it works fine. I suspect that I might have some sort of typo, but I've been looking at this code for so long that I no longer see anything.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:35:50.980

您应该`addScalar`对所有查询投影使用该方法。例如，

```
 Query query = sessionFactory.getCurrentSession().createSQLQuery(queryString.toString())
    .addScalar("sectionDescription", StandardBasicTypes.STRING)
    .addScalar("questionDescription", StandardBasicTypes.STRING)
    .setInteger("idSurvey", idSurvey); 
```

# scala - 仅替换全局蛋糕模式应用程序上的存储库

> ID：14246767
> 
> 赞同：0
> 
> 时间：2013-01-09T21:23:32.937
> 
> 标签：scala, mixins, cake-pattern

我第一次尝试使用蛋糕图案。

我有点理解它是如何工作的，但想知道是否可以混合已经混合的特征或类似的东西。

我想要的是用蛋糕模式构建一个全球应用程序。而且我想要该应用程序的另一个版本，除了存储库级别之外，它是相同的。

是否可以执行以下操作：

```
 trait application extends DefaultUserServiceComponent with MongoUserRepositoryComponent

  object realApplication extends application
  object fakeApplication extends FakeUserRepositoryComponent with application 
```

我的意思是：在使用假存储库构建假应用程序时重用已经构建的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:43:42.940

简短的回答：不。您将继承冲突的成员。请参阅以下代码片段：

```
trait Repository {def authenticate(username: String, password: String): String}

trait UserServiceComponent {self: UserRepositoryComponent =>
  val userService: UserService = new UserService
  class UserService {
    def authenticate(username: String, password: String): String =
      repository.authenticate(username, password)
  }
}

trait UserRepositoryComponent {
  def repository: Repository
}

trait MongoUserRepositoryComponent extends UserRepositoryComponent {
  val repository: Repository =
    new Repository {def authenticate(username: String, password: String) = "MongoAuthed"}
}

trait MockUserRepositoryComponent extends UserRepositoryComponent {
  val repository: Repository =
    new Repository {def authenticate(username: String, password: String) = "MockAuthed"}
}

trait Application extends UserServiceComponent with MongoUserRepositoryComponent

object RealApplication extends Application
// The following will be an error: "object FakeApplication inherits conflicting members:"
object FakeApplication extends Application with MockUserRepositoryComponent 
```

相反，要获得所需的行为，请将 Application 定义为：

```
trait Application extends UserServiceComponent {self: UserRepositoryComponent =>}
object RealApplication extends Application with MongoUserRepositoryComponent
object FakeApplication extends Application with MockUserRepositoryComponent 
```

为了保持 OP 中给出的层次结构，您需要修改代码，如下所示：

```
trait MongoUserRepositoryComponent extends UserRepositoryComponent {
  private val _repository = new Repository {def authenticate(username: String, password: String) = "MongoAuthed"}
  def repository: Repository = _repository
}

trait MockUserRepositoryComponent extends UserRepositoryComponent {
  private val _repository = new Repository {def authenticate(username: String, password: String) = "MockAuthed"}
  def repository: Repository = _repository
}

trait Application extends UserServiceComponent with MongoUserRepositoryComponent

object RealApplication extends Application
object FakeApplication extends Application with MockUserRepositoryComponent {
  override val repository: Repository = super[MockUserRepositoryComponent].repository
} 
```

额外`private val _repository`的 's 是必要的，以便我们可以定义`repository`为一个函数，以便它可以用作`FakeApplication`. （使用`super[type]`覆盖仅适用于功能）。

**编辑**：最后，蛋糕模式的目的是开发一个不需要像我提供的最后一个代码片段那样覆盖的层次结构。实际上，该特征`Application`根本不应该存在，只有`RealApplication`和`FakeApplication`。（在第二个代码片段中，我基本上只是重命名`UserServiceComponent`为`Application`）。

# scroll - d3js如何滚动或补间属性

> ID：14246768
> 
> 赞同：3
> 
> 时间：2013-01-09T21:23:36.010
> 
> 标签：scroll, d3.js, tween

我有一个带有滚动条的 div #scrollable，我想滚动到最后。我可以通过将 div 的“scrollTop”属性设置为 div 的“scrollHeight”属性的值来做到这一点：

```
var scrollable = d3.select("#scrollable");
scrollable.property("scrollTop", scrollable.property("scrollHeight")); 
```

但我不知道如何，如果有的话，我可以补间它。

```
var scrollheight = scrollable.property("scrollHeight");
d3.select("#scrollable").transition().property("scrollTop", scrollheight); 
```

不起作用。

感谢您的任何想法。问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-03T07:35:52.737

您可以使用自定义[d3 补间](https://github.com/mbostock/d3/wiki/Transitions#wiki-tween)来转换任意属性，例如`scrollTop`.

mbostock 的[平滑滚动](http://bl.ocks.org/mbostock/1649463)示例演示了使用自定义补间来滚动整个文档。

这是适应您的上下文的示例（也可以在 bl.ocks.org 上以[交互方式查看）：](http://bl.ocks.org/humbletim/5507619)

```
var scrollable = d3.select("#scrollable"); 

d3.select("#down").on('click', function() { 
    var scrollheight = scrollable.property("scrollHeight"); 
    d3.select("#scrollable").transition().duration(3000) 
        .tween("uniquetweenname", scrollTopTween(scrollheight)); 
}); 

function scrollTopTween(scrollTop) { 
    return function() { 
        var i = d3.interpolateNumber(this.scrollTop, scrollTop); 
        return function(t) { this.scrollTop = i(t); }; 
    }; 
} 
```

# c# - 从 ptable 中选择 max(pid) 并显示到文本框中

> ID：14246772
> 
> 赞同：-4
> 
> 时间：2013-01-09T21:24:05.823
> 
> 标签：c#, mysql, sql

我有一个数据库，其中包含一个名为`pid`. 我想选择`max(pid)`值并将其显示在文本框中。我尝试了以下方法：

```
 string query="select max(pid) from table";
 textbox.text=query; 
```

但是这段代码对我不起作用。它只是在文本框中打印“从表中选择 max(pid)”，而不是该查询的结果。我该如何纠正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:32:27.477

这是一些示例代码，展示了如何做到这一点。简而言之，您需要创建一个 MySqlConnection 来连接到您的数据库服务器，打开它，然后执行发布的 SQL 查询。然后，您可以将编辑器的 Text 属性设置为结果值。

```
string conString = "SERVER=localhost;" +"DATABASE=mydatabase;" 
        "UID=aUser;" +"PASSWORD=aPassword;";
    MySqlConnection conn = new MySqlConnection(conString);
    conn.Open();
    try {
        MySqlCommand command = new MySqlCommand("select max(pid) from table", conn);
        textBox1.Text = command.ExecuteScalar().ToString();
    }
    finally {
        conn.Close();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:30:04.083

所有这些代码要做的就是在文本框中显示您的查询文本。您需要连接到数据库以运行查询并获取结果，然后在文本框中显示结果。

.NET 的本机数据库框架是[**ADO.NET**](http://msdn.microsoft.com/en-us/library/aa286484.aspx)。你应该从那里开始。

# java - JAVA，Eclipse 不启动应用程序，错误：Can't load IA 32-bit .dll on a AMD 64-bit platform

> ID：14246775
> 
> 赞同：1
> 
> 时间：2013-01-09T21:24:14.280
> 
> 标签：java, eclipse, 64-bit

当我尝试作为 JAVA 应用程序运行时出现此错误：

> “线程“主”java.lang.UnsatisfiedLinkError 中的异常：C:\Users\Mindaugas\GCMDLN.DLL：无法在 AMD 64 位平台上加载 IA 32 位 .dll”

我可以运行与 JAVA 小程序相同的代码 - 没问题。

这是源代码：

```
import acm.graphics.*;
import acm.program.*;

public class GraphicsTry extends GraphicsProgram {
    public void run() {
        GRect brick = new GRect(5,5,5,6);
        add(brick);
    }// run
}// GraphicsTry 
```

我读过一些帖子，因为这个问题也出现在其他人身上。似乎只有两种解决方案：(i) 重新编译 GCMDLN.DLL 以运行 64 位操作系统或 (ii) 安装 32 位 JVM。

问： 1、如何重新编译GCMDLN.DLL文件？2\. 为什么其他更复杂的图形程序使用相同的库、相同的方法和对象（GRect）运行，而这个没有？3\. 为什么JAVA小程序和应用程序有这么大的区别？不是 GCMDLN.DLL 被两者使用吗？4\. 还有其他可能的解决方案吗？

# ipad - 在视图控制器之间导航时，我想将文本保存在 uitextfields 中

> ID：14246782
> 
> 赞同：1
> 
> 时间：2013-01-09T21:24:51.677
> 
> 标签：ipad, uiviewcontroller, uinavigationcontroller, ios6, xcode4.5

我有一个 ipad 应用程序，它有一系列视图控制器，每个视图控制器都有一组 uitextfields。基本上我想要做的是在浏览不同的视图控制器时，我希望文本保留在每个已编辑的 uitextfield 中。现在发生的事情是当我离开某个视图控制器并回到它时，每个 uitextfield 都是空的。要解决这个问题，我会调用 viewWillDisappear 或 viewDidDisappear 方法吗？如果是这样，我将如何让它在每个文本字段中保存信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:56:34.610

你只是在做模态序列吗？当你想返回上一个视图时，只需使用`[self dismissViewControllerAnimated:YES completion:nil]`，之前填写的所有内容都将保留。只有当您回到最初的视图时，文本将不再存在。但是，如果您出于某种原因需要返回初始视图，您可以将文本保存到 NSUserDefaults，然后使用保存在 viewWillAppear 上的值填充该字段。最好总是关闭 viewControllers 而不是做循环 segues。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:36:44.380

您可以滥用该`shouldChangeCharactersInRange`方法并将到目前为止键入的字符保存到一个额外的字符串中，并在切换视图控制器后恢复它。

**更新**

对于视图中的每个文本字段，您需要设置一个 saveString 并将其关联，也许将标记值作为数组索引，然后您可以这样做：

添加`<UITextFieldDelegate>`类的接口定义

将每个文本字段的委托设置为`self`

添加这个方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSString *s = [textField replaceCharactersInRange:range withString:string];
    NSLog(@"current textfield value '%@'", s);
    // save s somwhere, e.g. to userdefaults or a DB table
    return YES;
} 
```

现在，在您切换回以前的视图后，您可以恢复每个文本字段以前的内容。我已经放入了 NSLog() 以便您可以看到何时调用此方法。

# flash - 闪光 CS6 | CS5格式下如何设置默认保存？

> ID：14246784
> 
> 赞同：0
> 
> 时间：2013-01-09T21:25:04.957
> 
> 标签：flash, save, flash-cs5

**闪光 CS6**

如果第一个保存对话框选择 *.fla(CS5)，然后使用`Ctrl`+ `S`，它仍然会保持 CS6 格式。

`Ctrl`按+`S`然后“Flash Cs6”保存到 CS5时如何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:05:39.590

很遗憾，您无法更改此默认设置。您只需要保存为 CS6 文件格式，每次您真的想要 CS5 格式时，只需单击“另存为 -> CS5 文件类型”。

![在此处输入图像描述](../Images/d6a188bfd13cb40abe6ab35adcba4446.png)

# java - 为什么 clone() 方法不能正常工作？

> ID：14246791
> 
> 赞同：1
> 
> 时间：2013-01-09T21:25:55.520
> 
> 标签：java, clone

我有一个名为“link_occur_nodup”的二维向量，其中包含 [[5, 2, 1, 1], [2, 1, 1]] 的数据。现在，如果我尝试做

```
Vector<Vector<Integer>> temp=(Vector<Vector<Integer>>) link_occur_nodup.clone();
    temp.elementAt(0).set(1, 50);
    System.out.println(temp+" "+link_occur_nodup); 
```

输出是： [[5, 50, 1, 1], [2, 1, 1]] [[5, 50, 1, 1], [2, 1, 1]] 我想知道为什么值会改变在两个向量中？相反，它只能在“temp”向量中。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T21:27:12.797

`clone`只做一个浅拷贝：所以你得到一个新`Vector`的，它引用了与原始对象相同的对象。这是预期的行为。

如果您想要不同的行为，您需要自己手动复制内部`Vector`s。（这是不建议使用 的众多原因之一`clone`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T21:27:05.463

您已经克隆了*外部*向量。

您的克隆向量包含与原始向量相同的内部向量。

# asp.net - asp.net 应用程序的最佳缓存框架

> ID：14246808
> 
> 赞同：2
> 
> 时间：2013-01-09T21:26:47.460
> 
> 标签：asp.net, .net, iis, webforms

我有一个在 asp.net 4 web 表单上开发的订单系统。我需要将用户的订单详细信息（订单对象）存储在缓存中以便管理它，直到我将其保存在数据库中。我想至少将我的站点安装在两台服务器上，并且可以选择在未来进行更多扩展。如您所知，两台服务器位于负载均衡器后面，因此我需要在两台服务器上共享缓存的订单对象。

我听说过 App Fabric。任何推荐一个好的框架来做到这一点，希望将是简单且易于维护的一个。提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:29:21.987

> 我需要将用户的订单详细信息（订单对象）存储在缓存中以便管理它，直到我将其保存在数据库中。

如果您的数据没有持久化，[基于 SQL Server 的会话](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)状态将在每个用户的基础上跨机器工作，并且可以轻松配置。

但是，我建议定期将订单保存到您的应用程序数据库（不仅仅是 Session 数据库），这样用户就不会丢失它。这是电子商务网站上相当标准的做法。除非订购过程很短，否则用户不可避免地会想要暂停并返回，或者不小心关闭浏览器，将咖啡洒到他们的计算机中等。

无论哪种方式，数据库都为这些数据提供了一个很好的中间和/或永久位置。

# php - 不从表中提取所有结果

> ID：14246814
> 
> 赞同：0
> 
> 时间：2013-01-09T21:27:10.657
> 
> 标签：php, mysql, ajax, pdo

当您滚动到页面底部时，我尝试使用 AJAX 从我的数据库中提取结果，但是我的前 4 个结果被复制并放置在页面底部，然后由于某些未知原因实际上没有出现另外 4 个结果： / 有人能看出我的查询有什么问题吗？

```
 // If county isnt set, show all data
    $sth = $conn->prepare("SELECT * FROM directory WHERE user_active != ''ORDER BY Date DESC LIMIT 12");
    $sth->execute(array(':county' => $county));

    $c = 1;
    while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        echo '<div class="entry';
             if (($c % 4) == 1) echo ' alpha ';
             echo ' span3"><span class="name">' . $row['First_Name'] . ' ' . $row['Surname'] . "</span>";
             echo MORE STUFF HERE IS OUTPUT 
        $c++;
    } 
```

我注意到如果我删除查询限制，所有结果都正确显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:46:28.213

听起来您正在尝试进行基于 AJAX 的分页。我想这里的问题是您没有在`LIMIT`子句中指定偏移量。按照您现在的操作方式，您将始终从查询中获得相同的 12 个结果（当然假设表数据没有更改）。您可能需要做的是这样指定您的`LIMIT`：

```
LIMIT <offset>, <number of records> 
```

因此，如果您想获得前 12 条记录，它将是：

```
LIMIT 0, 12 
```

接下来的 12 个将是：

```
LIMIT 12, 12 
```

等等...

# python - python pandas自定义agg函数

> ID：14246817
> 
> 赞同：11
> 
> 时间：2013-01-09T21:27:11.447
> 
> 标签：python, numpy, pandas

```
Dataframe:
  one two
a  1  x
b  1  y
c  2  y
d  2  z
e  3  z

grp = DataFrame.groupby('one')
grp.agg(lambda x: ???) #or equivalent function 
```

grp.agg 的所需输出：

```
one two
1   x|y
2   y|z
3   z 
```

在集成数据框之前我的 agg 函数是`"|".join(sorted(set(x)))`. 理想情况下，我希望组中有任意数量的列，并且 agg 返回`"|".join(sorted(set())`每个列项目的列，如上面两个。我也试过了`np.char.join()`。

爱熊猫，它把我从一个 800 线的复杂程序带到了一个 400 线的放大公园散步。谢谢 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T21:42:50.420

你是如此接近：

```
In [1]: df.groupby('one').agg(lambda x: "|".join(x.tolist()))
Out[1]:
     two
one
1    x|y
2    y|z
3      z 
```

处理排序的扩展答案并仅采用集合：

```
In [1]: df = DataFrame({'one':[1,1,2,2,3], 'two':list('xyyzz'), 'three':list('eecba')}, index=list('abcde'), columns=['one','two','three'])

In [2]: df
Out[2]:
   one two three
a    1   x     e
b    1   y     e
c    2   y     c
d    2   z     b
e    3   z     a

In [3]: df.groupby('one').agg(lambda x: "|".join(x.order().unique().tolist()))
Out[3]:
     two three
one
1    x|y     e
2    y|z   b|c
3      z     a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-15T11:57:09.397

[在 pandas文档](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.cat.html)中有更好的连接字符串的方法。
所以我更喜欢这种方式：

```
In [1]: df.groupby('one').agg(lambda x: x.str.cat(sep='|'))
Out[1]:
     two
one
1    x|y
2    y|z
3      z 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-09T21:50:12.530

只是对已接受答案的详细说明：

```
df.groupby('one').agg(lambda x: "|".join(x.tolist())) 
```

请注意，类型`df.groupby('one')`是`SeriesGroupBy`。`agg`以及在这个类型上定义的函数。如果你查看这个函数的文档，它会说它的输入是一个在 Series 上工作的函数。这意味着`x`上述 lambda 中的类型是 Series。

另一个注意事项是不需要将 agg 函数定义为 lambda。如果聚合函数很复杂，可以像下面这样单独定义为常规函数。唯一的限制是 x 类型应该是 Series （或与其兼容）：

```
def myfun1(x):
    return "|".join(x.tolist()) 
```

进而：

```
df.groupby('one').agg(myfun1) 
```

# scala - 获取调用类

> ID：14246823
> 
> 赞同：4
> 
> 时间：2013-01-09T21:27:31.050
> 
> 标签：scala, scala-2.10, scala-macros

我想获取宏的调用类，但我的代码不起作用：

```
def __CLASS__(c: Context) = {
    import c.universe._
    c.enclosingClass match {
    case ClassDef(mods, name, tparams, impl) =>
    c.universe.reify(println(
            "\n  mods "+c.literal(mods.toString).splice
            +"\n  name "+c.literal(name.toString).splice
            +"\n  tparams "+c.literal(tparams.toString).splice
            +"\n  impl "+c.literal(impl.toString).splice
            ))
    case _ => c.abort(c.enclosingPosition, "NoEnclosingClass")
    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:37:57.143

当从类的普通实例内部调用时，这将按原样工作，因此我假设您是从对象内部尝试它，在这种情况下，您需要匹配[`ModuleDef`](http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Trees$ModuleDefExtractor)以及`ClassDef`：

```
case ModuleDef(mods, name, impl) => c.universe.reify(
  printf(
    "\n  mods %s\n  name %s\n  impl %s\n",
    c.literal(mods.toString).splice,
    c.literal(name.toString).splice,
    c.literal(impl.toString).splice
  )
) 
```

请注意，调试这样的事情的一种简单方法是打印出你得到的任何意想不到的东西的原始表示：

```
case x => c.abort(c.enclosingPosition, "NoEnclosingClass: " + showRaw(x)) 
```

当在单例对象中调用时，这将打印以下内容：

```
<console>:7: error: NoEnclosingClass: ModuleDef(Modifiers(), ... 
```

这让我们很好地了解了我们需要从哪里开始。

# sql - 如何在不添加索引的情况下显着提高查询性能？

> ID：14246827
> 
> 赞同：0
> 
> 时间：2013-01-09T21:27:48.610
> 
> 标签：sql, oracle

我有以下某人写的伪查询：

```
SELECT custId, orderId, col1, col2
FROM (SELECT c.id AS custId, o.id AS orderId,
      ROW_NUMBER() OVER(PARTITION BY c.id, o.id
                        ORDER BY d.col1, d.col2) AS RANK
      FROM customers c
      INNER JOIN orders o ON c.id = o.custId
      INNER JOIN orderDetails d ON o.id = d.orderId
      WHERE d.col3 IS NULL)
WHERE RANK = 1 
```

*   c.id (custId) 和 o.id (orderId) 是唯一的索引字段。
*   客户表有大约 200 万条记录
*   订单表有约 3700 万条记录
*   orderDetails 表有约 6.2 亿条记录

不幸的是，这个查询花费了未知的时间（> 2 小时），我的任务是解决这个问题。到目前为止，我已经提出了一个运行速度相当快的替代方案（但恕我直言，这仍然是完全不可接受的）：

```
SELECT custId, orderId, col1, col2
FROM (SELECT custId, orderId, col1, col2,
             ROW_NUMBER() OVER(PARTITION BY custId, orderId
                               ORDER BY col1, col2) AS RANK
      FROM (SELECT c.id AS custId, o.id AS orderId, d.col1, d.col2, d.col3
            FROM customers c
            INNER JOIN orders o ON c.id = o.custId
            INNER JOIN orderDetails d ON o.id = d.orderId)
      WHERE col3 IS NULL
WHERE RANK = 1 
```

唉，我无法添加任何索引或查看基于这些表的查询的执行计划，所以我有点茫然不知如何重写/构造它以显着更快地运行 =/。希望你们中的一个专家有一个更好的主意......我不是因为这个特定的查询而专门询问，而是因为我们有很多这样的查询需要像这样重写，我正在努力了解主要问题是什么这些是/我如何最好地解决它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:25:41.447

在没有看到原始查询的解释计划的情况下，我现在只能考虑以下查询（可能需要更正语法，但总体思路将保持不变）：-

```
with d as 
(select orderid, col1, col2
from (select orderid, col1, col2,
row_number() over (partition by orderID order by col1,col2) as RANK
from orderDetails
where col3 is null)
where RANK=1)
select c.id as custID, o.id as orderID, d.col1, d.col2
from customers c inner join orders o on c.id=o.custID
inner join d on o.id=d.orderid; 
```

您可能需要调整客户、订单和临时表“d”的连接顺序，以获得正确的组合（以便首先连接记录数较少的表）。

在您的查询中，您将加入这些表，然后您将获取每个 c.id 和 o.id 组合具有最小值 col1 和 col2 组的那些记录。根据您的查询，我认为按 c.id 进行分区是安全的，因为 col1 和 col2 依赖于 orderID 而不是 customerID。因此，具有相同 orderID 的多个 customerID 将具有相同的 col1 和 col2 值。

因此，上述查询首先获取每个 orderID 的 col1 和 col2 组的最小值，然后将它们与剩余的表连接起来。

# capybara - 从 Capybara 1.1.2 中最后一个匹配的选择菜单中选择

> ID：14246828
> 
> 赞同：1
> 
> 时间：2013-01-09T21:27:49.460
> 
> 标签：capybara, hobo

我正在使用`input_many`标签来处理表单上的多对多关系的 Hobo 应用程序。这会在页面上放置 + 和 - 按钮，并且 + 添加一个新`select`标签，用于选择关系另一侧的模型。这意味着可以有任意数量的`select`具有非常相似特征的菜单，仅通过数组索引进行区分，如下所示：

```
<select class="input belongs_to data_set_graph" name="graph_pane[data_set_graphs][0][data_set_id]">
[...options...]
</select>
<select class="input belongs_to data_set_graph" name="graph_pane[data_set_graphs][1][data_set_id]">
[...options...]
</select> 
```

注意 GraphPanes 和 DataSets 的连接是多态的（GraphPanes 有很多种），因此实际的 CSS 类名称根据窗格的类型而有所不同 - 它可能是`data_set_a_graph_pane_data_set`或`data_set_b_graph_pane_data_set`.

我们一直在使用 Capybara 1.1.2 进行测试。只要我们只将一个 DataSet 与一个 GraphPane 相关联，我们就可以使用如下步骤定义来选择它们：

```
included_defs.each do |data_set_name|
  click_button "+"
  select_node = find(:css, '.input-many-item select') # There may be more than one of these?
  select_node.find(:xpath, XPath::HTML.option(data_set_name), :message => "cannot select option with text '#{data_set_name}'").select_option
end 
```

但是，现在我们需要将两个 DataSet 与一个 GraphPane 关联起来，而`find(:css, '.input-many-item select')`失败是因为有两个匹配的节点。

在我看来，如果我总是能选择最后一个，这会起作用，但我不知道如何使用 Capybara 的选择器来做到这一点。（我认为部分问题在于我不清楚，在我发现的大多数示例中，它们是指 1.x DSL 还是 2.x 系列。）

欢迎提出优雅地解决这个问题的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:02:23.290

答案原来是使用 Capybara 中的“全部”查找器：

```
included_defs.each do |data_set_name|
  click_button "+"
  select_node = all(:css, '.input-many-item select').last # There may be more than one of these
  select_node.find(:xpath, XPath::HTML.option(data_set_name), :message => "cannot select option with text '#{data_set_name}'").select_option
end 
```

`all`就像`find`，但它返回一个匹配节点的数组，所以我可以使用`.last`并且总是得到最后一个。

# gpgpu - 为什么 GPU 库不支持自动函数组合？

> ID：14246831
> 
> 赞同：0
> 
> 时间：2013-01-09T21:28:06.980
> 
> 标签：gpgpu

英特尔的[集成性能基元 (IPP)](http://software.intel.com/en-us/intel-ipp)库具有称为[延迟模式图像处理 (DMIP)](http://software.intel.com/en-us/forums/topic/294955)的功能。它允许您指定函数序列，组合函数，并通过缓存友好的平铺处理将组合函数应用于数组。这比天真地为每个函数遍历整个数组提供了更好的性能。

似乎这种技术也有利于在 GPU 上运行的代码。有许多 GPU 库可用，例如[NVIDIA Performance Primitives (NPP)](https://developer.nvidia.com/npp)，但似乎没有一个具有像 DMIP 这样的功能。我错过了什么吗？或者 GPU 库是否有理由从自动化函数组合中受益？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:19:53.233

GPU 编程与 CPU 上的 DMIP 函数组合具有相似的概念。虽然在 GPU 上实现“自动化”并不容易（一些 3rd 方库可能能够做到），但手动完成它比 CPU 编程更容易（参见下面的 Thrust 示例）。

DMIP的两个主要特点：

1.  由图像片段处理，以便数据可以放入缓存；
2.  并行处理不同的片段或执行图的不同独立分支。

在大图像上应用一系列基本操作时，功能 1 省略了基本操作之间的 RAM 读/写。所有的读/写都在缓存中完成，特性 2 可以利用多核 CPU。

与 GPGPU 的 DMIP 特征 1 类似的概念是内核融合。无需将基本操作的多个内核应用于图像数据，可以将基本操作组合在一个内核中，以避免多个 GPU 全局内存读/写。

可以在[本幻灯片](http://www.bu.edu/pasi/files/2011/07/Lecture6.pdf)的第 26 页中找到使用[Thrust](https://developer.nvidia.com/thrust)的手动内核融合示例。

看来[ArrayFire](http://www.accelereyes.com/products/arrayfire)库在自动内核融合方面做出了显着的努力。

GPGPU 的 DMIP 功能 2 的类似概念是并发内核执行。此功能扩大了带宽需求，但大多数 GPGPU 程序已经受到带宽限制。所以并发内核执行不太可能经常使用。

### CPU 缓存与 GPGPU 共享内存/缓存

CPU 缓存忽略了 DMIP 中的 RAM 读/写，而对于 GPGPU 的融合内核，寄存器做同样的事情。由于 DMIP 中的 CPU 线程处理一个小图像片段，但 GPGPU 的一个线程通常只处理一个像素。一些寄存器足够大，可以缓冲 GPU 线程的数据。

对于图像处理，当结果像素依赖于周围像素时，通常使用 GPGPU 共享内存/缓存。图像平滑/过滤是需要 GPGPU 共享内存/缓存的典型示例。

# c# - 在构造函数与定义中设置变量

> ID：14246832
> 
> 赞同：2
> 
> 时间：2013-01-09T21:28:10.217
> 
> 标签：c#, class, declaration

观察以下...

```
//pattern 1
public class Cheesesteak
{
    public string bread {get; private set}
    public string cheese {get; private set}

    public Cheesesteak()
    {
        bread = "Amoroso"; 
        cheese = "Cheez Whiz";
    }
}

//pattern 2
public class Cheesesteak
{
    public string bread 
    {
        get {return bread;}
        set 
        {
            bread = "Amoroso";
        }
    }
    public string cheese 
    {
        get {return cheese;}
        set
        {
            cheese = "Cheez Whiz";
        }
    }
    public Cheesesteak() {}
} 
```

这是一个好奇的问题。在“集合”的定义中设置变量而不是在构造函数中声明它们是否有任何优势或特殊原因？我最初的猜测是模式 1 更短，但在编译期间效率更低。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T21:30:05.693

> 在“集合”的定义中设置变量而不是在构造函数中声明它们是否有任何优势或特殊原因？

不，事实上，这可能根本不是你想要的。这将无法设置“break”或“cheese”，因为任何调用，例如`bread = "rye";`，都会将其设置为“Amoroso”（如果它有效，但会导致 a `StackOverflowException`）。另请注意，尝试在代码中检索值将导致 a `StackOverflowException`，并且属性 getter 返回*属性*而不是支持字段值。

你可能会想到这个：

```
public class Cheesesteak
{
    private string bread = "Amoroso";
    public string Bread 
    {
        get {return bread;}
        set 
        {
            bread = value;
        }
    }

    // ... 
```

此处唯一的优点是您在定义字段的位置设置“默认”值，这在某些情况下有助于提高可维护性或可读性，甚至可能消除对已定义构造函数的需求，这可能会减少代码的总长度.

> 我最初的猜测是模式 1 更短，但在编译期间效率更低。

通常，将字段设置为内联与将它们设置在构造函数中并不会降低效率。编译器将导致类型的实际构造函数首先设置字段，然后运行构造函数代码，因此两个版本最终（出于实际目的）在编译的 IL 方面相同。这不是效率问题，而是代码可读性和可维护性的问题。

请注意，如果您希望该属性始终是一个常量（即：`Bread`应该**始终**返回`"Amoroso"`），您可以让该属性有一个 getter 而没有 setter：

```
public string Bread { get { return "Amoroso"; } } 
```

我怀疑情况并非如此，但我想我会提到它作为一个选项，以防万一它是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:30:59.290

好吧，第二个选项将导致`StackOverflowException`每当用户尝试分配**或**访问属性时，而第一个选项将只允许对它们进行私有访问。

你的意思可能是这样的：

```
private string bread = "Amaroso";
public string Bread
{
    get { return bread; }
    private set
    {
        bread = value;
    }
} 
```

这将使用“Amaroso”初始化属性，但不允许公开设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:31:10.160

不，它们完全不同。`get`and`set`块实际上是在读取或写入属性时执行的方法。它们都与初始化有关*。*

```
var x = thing.Property; // Property's "get" accessor method is executed
thing.Property = x; // Property's "set" accessor method is executed 
```

在您的第二个示例中，两个属性访问器都将对其自身进行无限递归，您将获得 StackOverflowException。

# mysql - 选择联合 SQL 语句的问题

> ID：14246838
> 
> 赞同：1
> 
> 时间：2013-01-09T21:28:40.990
> 
> 标签：mysql, sql, union, create-table

我想从一些表中获得一些列。我对用户有问题。可以是 0 ，`userId`但我想让它返回为`null`. 当我使用这个简单的 union 语句执行此操作时，结果如下所示：

```
SELECT 
      a.appointmentId, 
      u.prename AS user_prename, 
      u.lastname AS user_lastname, 
      a.start AS START , 
      a.end AS END , 
      w.workerId AS workerid 
FROM ios_appointments a 
     JOIN ios_user u
     JOIN ios_worker w 
     JOIN ios_partners p 
WHERE a.workerid_fk = w.workerid 
     AND w.partnerid_fk = p.partnerid 
     AND a.userid_fk = u.userid 
     AND p.code =  'DEMO6003' 
union 
select 
     a.appointmentId, 
     null, 
     null, 
     a.start AS START , 
     a.end AS END , 
     w.workerId AS workerid 
from ios_appointments a 
    JOIN ios_user u 
    JOIN ios_worker w 
    JOIN ios_partners p 
where 
    a.userid_fk = 0; 
```

预期结果：

```
43  NULL    NULL    2013-01-10 02:00:00 2013-01-10 02:30:00 3 
```

实际结果：

```
43  NULL    NULL    2013-01-10 02:00:00 2013-01-10 02:30:00 1
43  NULL    NULL    2013-01-10 02:00:00 2013-01-10 02:30:00 2
43  NULL    NULL    2013-01-10 02:00:00 2013-01-10 02:30:00 3 
```

问题：该语句为在数据库中注册的每个工作人员返回一行。我该如何解决？

表架构：

```
CREATE TABLE `ios_workinghours` (
  `workingHourId` int(11) NOT NULL AUTO_INCREMENT,
  `start` time DEFAULT NULL,
  `end` time DEFAULT NULL,
  `workerid_fk` int(11) NOT NULL,
  PRIMARY KEY (`workingHourId`),
  KEY `workerid_fk` (`workerid_fk`)
)

create table ios_worker (
    workerid int not null auto_increment,
    prename varchar(255),
    lastname varchar(255),
    avatar varchar(255),
    lineup varchar(255),
    languages varchar(255),
    partnerid_fk int not null,
    primary key(workerid),
    foreign key(partnerid_fk) references ios_partners(partnerid)
)

create table ios_user (
    userid int not null auto_increment,
    prename varchar(255),
    lastname varchar(255),
    phone varchar(255),
    email varchar(255),
    password varchar(255),
    primary key (userid)
)

create table ios_partners (
    partnerid int not null auto_increment,
    code varchar(255),
    partnerName varchar(255),
    street varchar(255),
    zipCode varchar(255),
    city varchar(255),
    languages varchar(255),
    workers varchar(255),
    lineup varchar(255),
    primary key(partnerid)
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:33:11.227

您的第二个查询仍然需要应用连接条件：

```
FROM ios_appointments a 
     JOIN ios_user u
     JOIN ios_worker w 
     JOIN ios_partners p 
WHERE a.workerid_fk = w.workerid 
     AND w.partnerid_fk = p.partnerid 
     AND a.userid_fk = u.userid 
     AND a.userid_fk = 0 
```

# java - Java停止线程从类运行的所有线程

> ID：14246841
> 
> 赞同：7
> 
> 时间：2013-01-09T21:29:02.910
> 
> 标签：java

我需要做的是能够停止从一个实现可运行的线程类运行的所有线程。这就是我的意思：这是我的“线程”类的开始：

```
public class HTTP extends Thread
{   
    int threadNumber;
    String host;
    int port;
    int timeLeft;
    private BufferedReader LocalBufferedReader;

    public HTTP(int threadNumber, String host, int port, int timeLeft)
    {
        this.threadNumber = threadNumber;
        this.host= host;
        this.port = port;
        this.timeLeft = (timeLeft * 1000);
    }

  public void run()
  { 
```

这就是我创建多个线程来执行此操作的方式：

```
 for (int n = 1; n <= m; n++) {
      new HTTP(n + 1, str, j, k).start();
    } 
```

m 是要创建的线程数。这可以是50-1000之间的任何地方。现在我需要做的就是立即停止所有这些。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T21:31:51.670

首先存储所有线程：

```
ArrayList<Thread> threads = new ArrayList<Thread>();
for (int n = 1; n <= m; n++) {
    Thread t = new HTTP(n + 1, str, j, k);
    threads.add(t);
    t.start();
 } 
```

现在对于`stop`方法，只需循环所有线程并对其调用中断：

```
for(Thread thread : threads)
{
    thread.interrupt();
} 
```

确保检查`isIntruppted()`您的 HTTP 线程。所以你会做这样的事情：

```
public class InterruptTest {

    static class TThread extends Thread {
        public void run() {
            while(!isInterrupted()) {
                System.out.println("Do Work!!!");
                try {
                    sleep(1000);
                } catch (InterruptedException e) {
                    return;
                }
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {
        Thread t = new TThread();
        t.start();

        Thread.sleep(4000);
        System.out.println("Sending interrupt!!");
        t.interrupt();
        Thread.sleep(4000);
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T21:32:45.110

在 Java 中停止线程是一个通过中断实现的协作过程。您可以存储线程并一一中断它们：

```
List<Thread> threads = new ArrayList<> ();

for (int n = 1; n <= m; n++) {
  Thread t = new HTTP(n + 1, str, j, k);
  threads.add(t);
  t.start();
}

//later on

for (Thread t : threads) {
    t.interrupt();
} 
```

但是，有几点值得注意：

*   this will only work if your `run` method reacts to interruption by stopping what it is doing
*   you could do the same thing more easily with a thread pool, for example by using one of the [ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html) returned by the various factory methods provided by the [Executors](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html) class. They would indeed handle the lifecycle of threads for you.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T21:33:43.810

Firstly, starting 1000 threads is practically pointless as few of them will be scheduled to actually run concurrently.

Secondly, you can't "stop" threads. All you can do is ask them nicely via cooperative code to stop.

The easiest way to do what you want is to shutdown the JVM.

# php - 显示图像的文件名，不带扩展名作为标题

> ID：14246844
> 
> 赞同：0
> 
> 时间：2013-01-09T21:29:09.933
> 
> 标签：php, html, image, title

首先，我是 PHP 的菜鸟。我正在努力实现这样的目标。

我有一张名为“Test Image.jpg”的照片。然后，图像标签内的一些其他 php 函数。有没有一种方法可以显示不带扩展名的文件名（在本例中为测试图像），作为该图像的标题？

这是我的代码：

```
<? foreach($dy_matmirat as $key => $image) : ?>
    <td valign="top"><img src="images/<?=$image->filename?>" width="70" /></td>
<td valign="top">Mesatarja: <?=$image->wins-$image->losses?></td>
    <? endforeach ?> 
```

我希望有人能帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:32:03.813

使用[basename()](http://php.net/manual/en/function.basename.php)函数。

```
<?=basename($image->filename, '.jpg')?> 
```

这将从您的文件名中删除扩展名。

编辑：忘记了第二个参数。

如果您提前知道要删除的扩展名，则此解决方案有效。

您还可以使用[pathinfo()](http://php.net/manual/en/function.pathinfo.php)：

```
$fileparts = pathinfo("Test Image.jpg");
echo $fileparts['filename']; // prints Test Image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:33:34.237

```
$name = $image->filename;
$name = substr($name,0,strripos($name,"."));

echo $name; 
```

# ios - MKMapView 在放大时更改引脚

> ID：14246845
> 
> 赞同：1
> 
> 时间：2013-01-09T21:29:12.473
> 
> 标签：ios, cocoa, mkmapview

对于我正在开发的应用程序，我想在世界视图中启动 mapView，并在我在这些区域中的兴趣点数量内有圆圈（或标记区域）。

例如，我在美国有 100 个 poi，其中：

加利福尼亚州 25 人 亚利桑那州 25 人 犹他州 25 人 内华达州 25 人

当用户放大加利福尼亚时，加利福尼亚上方的圆圈内有 25，成为我所拥有的城市上的其他圆圈。IE

洛杉矶 10 家 旧金山 10 家 萨克拉门托 5 家

当用户在洛杉矶再次放大时，内部 10 的圆圈变为坐标上方的正常针点。

或多或少像这样：

![在此处输入图像描述](../Images/f15c828ce1ff316887d2d39c8febe71f.png)

任何建议如何做到这一点？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:33:34.027

你可以看看

[http://revolver.be/blog/mapkit-clustering-with-ios/](http://revolver.be/blog/mapkit-clustering-with-ios/)

或者

[http://getsuperpin.com](http://getsuperpin.com)

或在网上搜索“集群 ios 地图”

# c++ - 使用 OpenCV 和 Qt 显示图像的奇怪行为

> ID：14246852
> 
> 赞同：4
> 
> 时间：2013-01-09T21:29:21.520
> 
> 标签：c++, c, qt, sockets, opencv

我正在使用 OpenCV C API 从凸轮捕获图像并使用 TCP 套接字发送它们。

服务器正在运行 C++ (QT) 并接收帧。

该过程运行良好，我可以在服务器上看到图像。

奇怪的问题是，当我关闭这两个程序并重新运行客户端和服务器时，我可以再次看到我在之前的测试中看到的前一帧。

如果我再次关闭这两个程序并重新运行它们，我可以看到一个新框架而不是第二个框架，并且该过程继续进行。

**为了更清楚：**

> 捕获1，关闭，cap1，关闭，cap3，关闭，cap3，关闭，cap5 ......等

我以前没见过这样的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:52:47.897

我以前也有同样的问题。

帧大小非常大，并且您以随机方式从缓冲区中读取（只是猜测），您必须在相机和 OpenCV 之间设置一个计时器或确认。

只需尝试控制相机捕获帧的方式即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T05:30:39.877

我不太了解 TCP/IP 编程或客户端/服务器……但我只能建议初始化图像，通常在相机/客户端/服务器类的构造函数中，

```
 Mat Frame = Mat::zeros(rows,cols,CV_8UC3); 
```

这样每次客户端/服务器初始化或在您准备好交换图像之前...启动图像是一个空白图像...

您必须使用`cvCreatImage()`.. 进行初始化，因此您可以执行以下操作...

```
IplImage *m = cvCreateImage(cvSize(200,200),8,3);// say its 200 x 200
cvZero(m);
cvShowImage("BLANK",m);
cvvWaitKey(); 
```

这显示了每个像素为零的黑色图像...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:07:45.993

当然，这个问题来自相机。似乎一旦抓取一帧，相机就必须接收任何确认。您可以尝试的一件事是转到发送图像的代码行并将图像保存在磁盘中，以检查是否发送了两次 cap1。

# lua - _ENV 和 Lua 中的类不兼容

> ID：14246855
> 
> 赞同：0
> 
> 时间：2013-01-09T21:29:29.743
> 
> 标签：lua, env

`_ENV`目前讨厌使用类。我正在尝试创建一种拉丁类型的 Lua，有些东西不能精确地制作，`_ENV`但它的效率要高得多。`setfenv`也很不合作。
后续代码不断返回旧`attempt to call a nil value`错误。它指定了第 20 行，其中正在检查 loadstring()，第 23 行，它在主块中调用该`__latin()`函数。

```
function __latin(code)
    __predecessor = [===[
    function typographia(value)
        print(value); 
    end

    chorda = {};
    chorda.__index = chorda; 

    function chorda.sub(chorda, cChorda, fChorda)
        return string.sub(chorda, cChorda, fChorda); 
    end
    function chorda:sub(chorda, cChorda, fChorda)
        return string.sub(chorda, cChorda, fChorda);
    end

    --[[ define values --]]
    _ENV = {salve="Salve, munde!",typographia=typographia,print=print,chorda=chorda,chorda.sub=chorda.sub};  ]===]; 
    __finalizer = __predecessor .. " " .. code; 
    local status, err = pcall(loadstring(__finalizer));
    print(err); 
    if (err == nil) then loadstring(__finalizer)(); end 
end
__latin('typographia(salve); chorda.sub(salve, 1, 3);'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:04:32.777

你得到*“尝试调用一个 nil 值”*，因为`loadstring`返回`nil`（所以你`pcall`用调用`nil`）。 `loadstring`返回 nil 因为您正在编译的代码 ( `__predecessor`) 包含无效的 Lua：

```
_ENV = {
    chorda.sub = chorda.sub -- can't do this
} 
```

* * *

仅供参考： loadstring/pcall 的东西与你的问题无关。如果您[在发布之前将其剥离](http://www.catb.org/esr/faqs/smart-questions.html#volume)，您自己会发现此错误。

# python-sphinx - 如何在 reStructuredText / Sphinx 中键入大括号

> ID：14246858
> 
> 赞同：0
> 
> 时间：2013-01-09T21:29:43.830
> 
> 标签：python-sphinx, restructuredtext

如何在 reStructuredText / Sphinx 中键入大括号？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:34:05.950

您可以使用使用 LaTeX 语法的[数学模式](http://sphinx-doc.org/ext/math.html)来渲染大括号并控制它们的大小：

```
.. math::

    \{ \big\{ \Big\{ \bigg\{ \Bigg\{

    (  \big(  \Big(  \bigg(  \Bigg( 
```

会给你这样的东西：

![各种尺寸的大括号和支架](../Images/95aa3fcfb9f62d4408cdf2338a0495c6.png)

尽管要注意[基本数学模式的局限性](https://stackoverflow.com/questions/13017397/sphinx-latex-markup-limitations/13070475)：这些符号需要`extensions = ['sphinx.ext.pngmath']`在您`conf.py`的工作中使用。

# qt - Qt 中的信号是如何传输的？

> ID：14246871
> 
> 赞同：-1
> 
> 时间：2013-01-09T21:30:29.040
> 
> 标签：qt, signals

我对 Qt 信号有一些令人困惑的问题。

(1) 假设 A 是 B 的父母。B 发出信号。信号会去A吗？使用一些代码来解释我的问题。

```
connect(B, SIGNAL(B_signal()), C, SLOT(C_slot())); 
connect(A, SIGNAL(B_signal()), C, SLOT(C_slot())); 
```

第二行有效吗？

(2) 如果 A 从 B 导出，A 是否有 B 的信号？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:44:01.277

这是我对这个主题的理解：

(1) 不，第二行无效。子父关系用于定义对象的层次结构-它允许检索对象的所有子对象/对象的父对象，这允许对层次结构树的分支自动执行一些操作-例如在对象被删除时删除对象的所有子对象被删除等等。但是，信号和槽属于每个特定对象。当信号被发出时，它正在被对象所在线程的事件循环处理。

(2) 是的，在这种情况下，A 拥有 B 的所有信号、槽、方法和成员变量，在继承的情况下，您可以将其视为 B 是 A 的一部分。

# bing - 计算结果的数量，哪个搜索更好？Google 自定义搜索 API 还是 Bing API？

> ID：14246877
> 
> 赞同：1
> 
> 时间：2013-01-09T21:30:43.920
> 
> 标签：bing, bing-api

我想计算发布查询时获得的结果数。哪个搜索 API 更适合这个？我发现 google 自定义搜索 API 关于它返回的计数非常不可靠，它每天只允许 100 个免费查询，另一方面，Bing API 允许每月 5000 个查询并返回与 bing.com 上显示的相同计数。但是，如果您对 google.com 和 bing.com 进行相同的查询，那么它们给出的结果 cout 就会有很大不同，而 google 在这方面更可靠。我很困惑，有人可以帮忙吗？

# mysql - mysql 根据另一个连接表的结果查询连接表

> ID：14246878
> 
> 赞同：-1
> 
> 时间：2013-01-09T21:30:52.207
> 
> 标签：mysql

我有五张桌子。标签，流，streams_tags，帖子，posts_tags。stream_tags 和 posts_tags 只是标签、流和帖子的连接表。

我想从包含通过 streams_tags 表关联到流的所有标签的帖子表中选择所有帖子。例如，如果流具有关联标签“cat, dog”，则应返回所有带有关联标签“cat, dog”的帖子。只要帖子包含“猫，狗”标签，帖子是否有除“猫，狗”以外的更多标签都没关系。

标签： 身份证 | 姓名

流：ID | 姓名

流标签：id | stream_id | tag_id

帖子：ID | 姓名

帖子标签：id | post_id | tag_id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:12:42.663

[SQL Fiddle 演示在这里](http://sqlfiddle.com/#!2/bd7fe/1)

* * *

此查询应返回指定的结果集：

```
SELECT p.id
     , p.name
  FROM posts p
 WHERE NOT EXISTS
       ( SELECT 1
           FROM streams_tags st
          WHERE st.stream_id = 201   /* <-- specified stream_id value */
            AND NOT EXISTS
                ( SELECT 1
                    FROM posts_tags pt
                   WHERE pt.tag_id = st.tag_id
                     AND pt.post_id = p.id
                 )
        ) 
```

*   对于每一行`posts`
*   查询`streams_tags`表以查找指定 stream_id 的所有标签
*   排除我们`tag_id`从表中发现“缺失”的任何帖子`posts_tags`（为此`post`）

注意：使用此查询，不存在的流或没有任何标签的流（即`streams_tags`给定的没有行`stream_id`）将匹配每个帖子。（如果不希望出现这种行为，可以修改查询以添加谓词，以便必须至少有一个匹配的标签。）

为了理解这个查询在做什么，省略最外层的查询是有帮助的，只看一下内部的查询。（以下示例中的 id 值参考了 SQL Fiddle 演示中加载的值。）

这是内部查询。我们删除了对 p.post_id 列的引用，并将其替换为文字。此查询正在检查 posts.id = 67 是否是 stream.id = 201 的“匹配”（就匹配所有标签而言）。

```
 SELECT st.tag_id
    FROM streams_tags st
   WHERE st.stream_id = 201    /* <- specified stream_id */
     AND NOT EXISTS
        ( SELECT 1
            FROM posts_tags pt
           WHERE pt.tag_id = st.tag_id
             AND pt.post_id = 67    /* <- post we want to check for a match */
        ) 
```

当我们运行该查询来检查 posts.id = 67 时，我们没有返回任何行。这意味着posts.id 67 匹配指定stream_id 的所有标签。

当我们再次运行它，指定posts.id = 68，我们得到一行。我们返回的行`streams_tag.tag_id`是`post_tags`.

因此，如果我们为每个 post_id 运行此查询，并检查此查询是否返回行，我们可以知道哪些帖子与指定 stream_id 的“所有”streams_tags.tag_id 匹配。这就是最外面的查询基本上在做的事情......为每个 post_id 运行这个查询。

* * *

一种完全不同的方法是获取帖子上匹配标签的“计数”，并将其与流中的标签计数进行比较。

```
SELECT p.id
     , p.name
     , sc.st_count AS st_count
  FROM ( SELECT stc.stream_id
              , COUNT(DISTINCT stc.tag_id) AS st_count
           FROM streams_tags stc
          WHERE stc.stream_id = 201
          GROUP BY stc.stream_id
       ) sc
 CROSS
  JOIN posts p
  LEFT
  JOIN posts_tags pt
    ON pt.post_id = p.id
  LEFT
  JOIN streams_tags st
    ON st.tag_id = pt.tag_id
   AND st.stream_id = sc.stream_id
 GROUP
    BY p.id
     , p.name
HAVING COUNT(DISTINCT st.tag_id) >= sc.st_count 
```

注意：要获得可以在 HAVING 子句中使用的 streams_tags（对于特定 stream_id）的标签计数，有必要将其包含在查询的 SELECT 列表中。（另一种选择是将该子查询移至 HAVING 子句，然后在查询中重复指定的 stream_id 值两次......

```
SELECT p.id
     , p.name
  FROM posts p
  LEFT
  JOIN posts_tags pt
    ON pt.post_id = p.id
  LEFT
  JOIN streams_tags st
    ON st.tag_id = pt.tag_id
   AND st.stream_id = 201  /* <- specified stream_id */
 GROUP
    BY p.id
     , p.name
HAVING COUNT(DISTINCT st.tag_id) >=
       ( SELECT COUNT(DISTINCT stc.tag_id) AS st_count
           FROM streams_tags stc
          WHERE stc.stream_id = 201 /* <- specified stream_id */ 
       ) 
```

# mvvm - PropertyChanged.Fody 迁移 notifypropertychanged

> ID：14246881
> 
> 赞同：1
> 
> 时间：2013-01-09T21:31:00.640
> 
> 标签：mvvm, inotifypropertychanged, compile-time-weaving, fody, fody-propertychanged

我一直在使用 NotifyProperyWeaver，并注意到它在使用 PropertyChanged.Fody 的 Fody 的最新版本中已被弃用。

我让 NotifyProperyWeaver 只编织我有属性的属性，并且所有其他通知都被禁用。

有没有办法配置 PropertyChanged.Fody 使得只有 [attributed] 属性被编织？而不是相反。我在上面的文档页面中没有看到任何信息，FodyWeavers.xml 中是否有隐藏属性

```
<?xml version="1.0" encoding="utf-8"?>
<Weavers>
  <PropertyChanged />
</Weavers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:56:47.803

这个问题也被问到这里[https://github.com/Fody/PropertyChanged/issues/5](https://github.com/Fody/PropertyChanged/issues/5)并从那个问题......

> PropertyChanged.Fody 假设如果您实现 INotifyPropertyChanged，那么您很可能希望通知大多数（如果不是全部）属性。如果您希望排除它们，这应该是例外而不是规则，那么您可以将 [DoNotNotifyAttribute] 添加到类或属性中。有关更多详细信息，请参见此处[https://github.com/Fody/PropertyChanged/wiki/Attributes](https://github.com/Fody/PropertyChanged/wiki/Attributes)

# .net - 英国谷歌地图邮政编码边界叠加

> ID：14246887
> 
> 赞同：0
> 
> 时间：2013-01-09T21:31:28.117
> 
> 标签：.net, maps, overlay, postal-code

我想做一些地理可视化作为 .net 网络应用程序的一部分。我对非 Google 解决方案持开放态度。我想展示客户的集中度。有很多客户，所以我不想使用别针。我在考虑颜色编码的邮政编码区域。任何人都可以提出任何合法且最好是免费的方式来做到这一点。边界不需要是邮政编码，但我认为这是最合适的。

干杯，克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T21:15:42.533

如果大头针的数量是问题，那么您可以在将客户数据传递到谷歌地图之前对其进行分组。您可以从多个来源获取每个邮政编码区域/部门/地区的纬度/经度质心，但这里有一个示例：

[http://postcodepal.com/?page=database-generator](http://postcodepal.com/?page=database-generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T17:56:43.253

www.boundaries-io.com

非常简单的 REST API ......包括邮政部门、地区和病房......所有结果都在 GeoJson 中！

# java - 使用 android 传感器测量墙平面和地板之间的角度

> ID：14246894
> 
> 赞同：1
> 
> 时间：2013-01-09T21:32:08.447
> 
> 标签：java, android, accelerometer, sensors

我想使用手机的传感器来测量地平面和墙平面之间的角度。所以首先，我将手机直接放在地板上，按下按钮进行校准（存储地板的角度作为参考方向），然后将手机靠在墙上，看看角度差是多少。（并显示与标准90度差比较的结果）

测量这个角度的最佳方法是什么？我迷失在加速度传感器、重力传感器、线性加速度、getRotationMatrix 等选项中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:10:33.797

使用加速度计或线性加速度 x、y、z 读数并计算两个位置**相对于重力矢量**的任何分量角度。差异将为您提供所需的角度

# ssl - Kaazing 无法使用 SSL 设置

> ID：14246895
> 
> 赞同：0
> 
> 时间：2013-01-09T21:32:09.713
> 
> 标签：ssl, kaazing

我有一个用于 stomp 的基本 kaazing 设置，它在我的网页上运行良好，该网页使用 http 提供。现在我想使用 SSL (HTTPS) 进行连接，并且我已经更改了我的 Web 服务器上的所有设置。既然我这样做了，浏览器就不乐意与 Kaazing 建立 HTTP（不安全）连接（如果有办法让 kaazing 在没有 https 的情况下也能正常工作，我很好），现在我正在尝试为 Kaazing 设置 ssl也是。我只是在所有内容上附加了一个“s”并将 tcp: 更改为 ssl:。另外，使用我的服务器名生成了一个密钥库文件。仍然在我可以访问的浏览器中

```
https://servername:8000/jms/;e/ct?.kn=6433810530520803 
```

这是 Kaazing 库尝试访问的第一个文件，对此的响应是

```
https://servername:8000/jms/;e/ut/qJA49SDjQEHLINJVoWe5fHGZqpUYqe6e?.kn=6433810530520803
https://servername:8000/jms/;e/dt/qJA49SDjQEHLINJVoWe5fHGZqpUYqe6e?.kn=6433810530520803 
```

我假设还有 2 个 javascript 文件。但是这些文件不可访问，得到 404

我知道这个问题有点含糊，如果您需要，请随时询问更多细节。但是，如果有人知道发生了什么以及出了什么问题，请告诉我。我非常感谢您的帮助。

不知道如何调试这个 Kazzing 的东西或 Websocket 连接。也不是我试图根据[这个](https://kaazing.com/doc/5.0/security/u_tls_works/)文档设置一个内部 ip-hop。

[这](http://db.tt/LNGWboXd)是我完整的 gateway-config.xml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:07:41.097

阿南德，

你有配置问题。让我在这里解释一下：

```
<service>
    <accept>wss://servername:8000/jms</accept>
    <type>stomp.jms</type>
    <properties>
        <connect>tcp://localhost:61613</connect>
        <connection.factory.name>ConnectionFactory</connection.factory.name>
        <context.lookup.topic.format>dynamicTopics/%s</context.lookup.topic.format>
        <context.lookup.queue.format>dynamicQueues/%s</context.lookup.queue.format>
        <env.java.naming.factory.initial>org.apache.activemq.jndi.ActiveMQInitialContextFactory</env.java.naming.factory.initial>
    </properties>
    <accept-options>
        <wss.bind>10.171.131.100:8000</wss.bind>
    </accept-options>
    <cross-site-constraint>
        <allow-origin>https://23.23.23.23:80</allow-origin>
    </cross-site-constraint>
    <cross-site-constraint>
        <allow-origin>https://servername:80</allow-origin>
    </cross-site-constraint>
</service> 
```

注意最后一个跨站点约束，它是`https://servername:80`. 这行不通。它应该是`http:servername:80`或`https://servername:443`（如果您正确配置了 ssl）。这解释了“我假设还有 2 个 javascript 文件。但这些文件无法访问，得到 404”。

或者，您可以通过放置以下内容来放松跨站点约束：

```
 <cross-site-constraint>
    <allow-origin>*</allow-origin>
  </cross-site-constraint> 
```

一旦你让它工作并且你的部署方案是可靠的，通过设置更严格的跨站点约束来限制访问。

希望有帮助。试一试并更新此线程。

# jquery - jQuery插件开发

> ID：14246896
> 
> 赞同：0
> 
> 时间：2013-01-09T21:32:25.703
> 
> 标签：jquery, templates, plugins

所以今天我在看到以下示例和模板后决定阅读[一些关于 jquery 插件开发的内容：](http://docs.jquery.com/Plugins/Authoring)

[CSS-Tricks.com 插件模板](http://css-tricks.com/snippets/jquery/jquery-plugin-template/) [Longpress.js](http://toki-woki.net/lab/long-press/)

现在，我有以下问题：

@Css 技巧：

*   为什么他有一个名为的参数`el`，那个东西在哪里初始化？
*   他为什么要添加对 DOM 对象的反向引用？
*   为什么他不使用`var methods = {//...}`jQuery 文档假定的系统？

@长按

*   另外，他为什么不使用 jquery 官方的模式？
*   为什么不是他，即他的`mousewheel()`方法绑定到插件命名空间？
*   这只是不好的做法还是更好的方法？

先感谢您

**编辑：**

楼下有人说这个可能太具体了。所以我尝试以其他方式制定它；插件开发的官方文档中是否存在应该以其他方式处理的问题或不好的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:19:43.670

我会尽力回答尽可能多的问题。

“官方” jQuery 模式只是一个建议。它说明了最佳实践，但不是确定的。就是说，太好了，我什么都没用。“主管”部分（就在代码的末尾）非常聪明。

## CSS 技巧

这种模式最糟糕的方面是它把成员都放在`$`了命名空间和`$.fn`命名空间中。前者可以避免，例如使用 jQuery“官方”模式。

`el`是传递给`$.yourPluginName()`from的形式变量`$.fn.yourPluginName()`，并且依次表示调用插件的 jQuery 选择中的每个元素。

我不太明白作者如何满足插件的公共方法。

## 长按

这是一个更好的模式。它将一个成员放入`$.fn`命名空间。其他一切都是“私人的”（保存在最外面的封闭中）。

不需要也不需要提供公共方法。

该`mousewheel`代码不是这样的插件。它可能更好地归类为“插件”。将`mousewheel`事件类型添加到 jQuery，因此元素可以`mousewheel`附加处理程序/命名空间/触发等，与“单击”、“鼠标悬停”、“鼠标输出”等方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:11:57.510

> 为什么他有一个名为 el 的参数，那个东西在哪里初始化？

`el`是一个参数，不需要初始化。使用插件时传入。例如，将使用未附加到 DOM 的空 div 来`$.yourpluginname($("<div />")[0])`初始化插件。`el`

> 他为什么要添加对 DOM 对象的反向引用？

反向引用只是将当前实例存储在元素上，以便将来使用该元素调用插件可以引用现有实例而不是创建新实例。

> 为什么他不使用`var methods = {//...}`jQuery 文档假定的系统？

因为我们作为第三方开发人员可以使用我们想要的任何结构自由开发插件。

> 另外，他为什么不使用 jquery 官方的模式？

见上一个答案

> 为什么他，即他的 mousewheel() 方法不绑定到插件命名空间？

可能是不好的做法，但最终由插件开发人员决定是否有必要。

> 这只是不好的做法还是更好的方法？

两者都不是，这只是证明我们作为开发人员可以使用我们想要的任何结构来开发 jQuery 插件。

我更喜欢在 jQuery UI 小部件系统下开发，或者使用可以轻松扩展/修改的结构，这样我就不会得到 n 个不同版本的 plugin.js。*（jquery 文档中内容的修改版本）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:51:39.740

我真的建议将此作为起点。

*   [http://jqueryui.com/widget/](http://jqueryui.com/widget/)
*   [http://api.jqueryui.com/jQuery.widget/](http://api.jqueryui.com/jQuery.widget/)

# html - HTML 文本在某些地方变得无法选择

> ID：14246898
> 
> 赞同：2
> 
> 时间：2013-01-09T21:32:26.793
> 
> 标签：html, css, text

您好，我正在建立一个网站，在我的几个页面的某些区域中，文本变得无法选择，我不知道为什么。一个是在表格之后，另一个是在图像之后。我想也许我没有关闭标签或其他东西，但我没有找到任何东西......在编码方面仍然是半新的，所以要温柔:)

```
<div id="content_container"><div id="about1"><h1 id="About Us">About Us...</h1><p>We promote good business practices, balanced healthy lifestyles, mental and physical fitness. Originating in the Pacific Northwest and transitioning to the East Coast, our styles are rooted in the mountains and expanding to the ocean shorelines.</p><h1 id="Ordering">Ordering...</h1><p>We do our best to get your orders out as quickly as possible. Almost all of our products are hand made and stitched in America. Our usual lead time is 3 business days from the date of your order. We accept major credit cards: VISA, MasterCard, AMEX. We also accept Paypal payments. Our site is secured with a 256-bit SSL encryption to keep your information safe and secure.</p><h1 id="Shipping">Shipping...</h1><p><img src="images/Free-Shipping.png" alt="Free Shipping"/>We use USPS Priority Mail for standard ground shipments. Transit time takes 5-7 business days for shipments to the contiguous US and 7-14 business days internationally. Limited tracking is provided with this service however, it is not step-by-step tracking information. If step-by-step tracking is important to you or if expedited shipping is required, FedEx shipping is available.</p><h1 id="Returns">Returns...</h1><p>We want you to be happy with your purchase. If you have a problem with your order, please contact us immediately to resolve the issue. If needed, we will issue a Returned Merchandise Authorization (RMA). We accept returns within 15 days of purchase (including weekends and holidays). Products must be unused, unwashed, as well as not modified in order to be eligible for return. Any products that are returned without a RMA, risks getting lost and may not be refunded. Due to this, we encourage using a traceable courier with a tracking number for any returns. Refunds will be issued upon receipt of the parcel, minus the cost of shipping.</p><h1 id="Privacy">Privacy Policy</h1><p>We only collect information you elect to offer us on this site. Any information you provide us is ONLY used to benefit you and our other customers. One goal in collecting personal information from you is to provide an efficient, meaningful, and customized experience. For example, we can use your personal information to: Help make the Site easier for you to use by not having to enter information more than once. Help you quickly find information, products, and services. Help us create content that is most relevant to you. Alert you to new information, products, and services that we offer.</p>

                            </div>
</div>

<div id="footer_container"><div class="footer1"><h3>Store</h3><ul><li>Jiu Jitsu Kimonos</li><li>T-Shirts</li><li>Hoodies</li><li>Bags</li><li>Accessories</li></div>
                           <div class="footer1"><h3>Terms & Conditions</h3><ul><li>FAQ</li><li>Shipping Policy</li><li>Return Policy</li><li>Privacy Policy</li><li>Payment Methods</li></div>
                           <div class="footer1"><h3>About Us</h3><ul><li><a href="about.html#About Us">Company Bio</a></li><li>Tesla Athletes</li><li><a href="about.html#Ordering">How to Order</a></li><li><a href="about.html#Returns">Return Policy</a></li><li><a href="about.html#Privacy">Privacy Policy</a></li></div>
                           <div class="footer1"><h3><img src="images/Payment-Methods.jpg"></h3><ul><li>Tesla Apparel<br>12345 W Broad St<br>Richmond, VA 23220<br><br></li></div>
</div> 
```

和CSS：

```
#about1 {
position: absolute;
left: 25.4%;
top: 25%;
width: 50%;
height:50%;
}

#about1 h1 {
font-family: 'Dancing Script', cursive;
font-weight: bold;
font-size: 36px;
text-shadow: 1px 1px 1px gray;
border-bottom: 1px gray solid;
width:300px;

}

#about1 p {
font-family: 'bonvenocflight';
font-weight: 500;
font-size: 15px;

}

.brand {
   font-family:'Sansation';
   font-variant:small-caps;
   font-size:18px;
   font-weight:bold;
   text-shadow: 1px 1px 1px gray; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:34:58.767

一个常见的问题是，您可能有一个重叠的元素（可能是具有透明区域的图像），它在 z 顺序中高于您的文本。您可以看到文本，但单击和拖动实际上是在图像本身上执行该操作。

如果是这种情况，选择页面上的所有内容可能会通过高亮显示。或者：右键单击要开始选择文本的位置，然后从上下文菜单中选择“检查元素”。如果突出显示的元素不是包含您的文本的元素，那就是问题所在。

[*将来，请在您的问题中包含测试代码或 URL，以便我们可以做的不仅仅是在黑暗中猜测来帮助您。*]

# silex - 如何在 Silex 中链接到 PDF 文件？

> ID：14246901
> 
> 赞同：2
> 
> 时间：2013-01-09T21:32:31.500
> 
> 标签：silex

我环顾四周，似乎无法弄清楚如何在使用 Silex 时链接到静态文件。我见过一些关于 Symfony 的类似问题/答案，但它们涉及 YML 路由文件，我不使用 Silex。

**我的情况**

我在 /docs 文件夹中有一些文件。登录用户可以上传新的 pdf 文件（所以，我不提前知道所有文件名是什么；它们在不断变化）。

**我的意图**

我需要能够链接到这些 PDF 文件，以便单击某处的链接将打开 www.myurl.com/docs/myfile.pdf。

**问题**

由于 silex 中的路由系统，它将 url 视为路由（显然）并抛出 Page Not Found 错误。

提前感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:02:49.897

您需要以不将现有文件转发到前端控制器的方式配置您的 Web 服务器。silex 文档的[Web 服务器](http://silex.sensiolabs.org/doc/web_servers.html)部分提供了最流行的 Web 服务器的此类配置示例。

至于链接本身，只需直接链接到文件，大致如下：

```
<a href="/docs/{{ filename|url_encode }}">{{ filename }}</a> 
```

# javascript - 使用 proto.io 使开/关开关在 IE8 中工作

> ID：14246902
> 
> 赞同：3
> 
> 时间：2013-01-09T21:32:34.243
> 
> 标签：javascript, css, internet-explorer-8

Proto.io 为使用 CSS 的开/关按钮提供了一个非常好的解决方案。但是，它在 IE8 中不起作用。 [http://proto.io/freebies/onoff/](http://proto.io/freebies/onoff/)

有谁知道怎么用js解决？或者是否有任何其他可以在 IE8 中使用的开/关按钮解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-08T13:54:17.617

感谢您使用我们的[Proto.io 翻转开关](http://proto.io/freebies/onoff/):)

下面介绍如何使用 javascript 启用对 IE8 的支持。

您需要做的是添加 css，它将根据“onoffswitch-checked”类更改翻转开关的状态，然后在单击翻转开关时使用 javascript 切换该类。

首先在css中添加这两个声明：

```
.onoffswitch-checked .onoffswitch-inner {
    margin-left: 0;
}

.onoffswitch-checked .onoffswitch-switch {
    right: 0px; 
} 
```

然后，根据复选框是否被选中，使用 javascript 来切换“onoffswitch-checked”类：

```
$(document).ready(function(){
    $('.onoffswitch-label').click(function(){
        $(this).parent().toggleClass('onoffswitch-checked');
    });
}); 
```

此外，如果您选择了“默认开启”选项，请确保将“onoffswitch-checked”类添加到您的 html 中：

```
<div class="onoffswitch onoffswitch-checked"> 
```

**笔记：**

有一种更简洁的方法可以使用复选框上的 change() 事件而不是标签上的 click() 事件来实现这一点，但不幸的是，当单击标签而不是复选框时，IE8 不会触发 change() 事件。

最好在复选框上而不是在父级上触发选中的类，但是 IE8 在更改类时不会刷新相邻的兄弟 CSS ( + ) :(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:59:49.033

Proto.io 页面提到“...IE8 不支持 CSS :checked 选择器”因此不受支持。这意味着你可以通过为 IE 添加一个 polyfill 来解决这个问题，例如[selectivizr](http://selectivizr.com/)。

编辑：Proto.io 页面还提到（通过浏览器图标列表上的 IE 工具提示）可以通过一些添加的 Javascript 支持 IE8。此代码已在此开关的实际作者*anna.mi的答案中提供。*

# javascript - JQuery悬停状态计时器？

> ID：14246909
> 
> 赞同：0
> 
> 时间：2013-01-09T21:33:00.857
> 
> 标签：javascript, jquery

我想知道 jQuery 是否可以在开始页面激活 a:hover 2 秒然后关闭。我对javascript很陌生，不确定这是否超出了javascript的用途？

希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:43:12.987

您必须在 CSS 选择器中添加一个类，然后使用 jQuery 添加/删除该类：

**CSS：**

```
#element:hover, #element.mock-hover {
    /* styles go here... */
} 
```

**JS：**

```
$(document).ready(function () {
    var $el = $('#element');

    $el.addClass('mock-hover');

    setTimeout(function () {
        $el.removeClass('mock-hover');
    }, 2000);
}); 
```

这是小提琴：http: [//jsfiddle.net/5rg4B/](http://jsfiddle.net/5rg4B/)

# javascript - 当用作语句时，“条件&& func（）”的目的是什么？

> ID：14246917
> 
> 赞同：3
> 
> 时间：2013-01-09T21:33:17.760
> 
> 标签：javascript, syntax, operators

我最近遇到了以下 [有效] 句法结构：

```
d <= f && func3(); 
```

实际构造的形式为：

```
d > f ? a > b ? func1() : func2() : d <= f && func3(); 
```

**这个构造的目的是什么？**

我最好的猜测是，由于运算符中的短路评估，只有在返回错误`func3`时才会执行，但我认为这是没有意义的，因为实际函数中的逻辑将防止在该点永远为假代码，从**正在执行****的 DOM-watching 中可以清楚地看到**。`d <= f``&&``d <= f`**`func3`**

如果您想查看整个代码，我在[http://cdn.sstatic.net/js/full.js?v=9358063bfb40](http://cdn.sstatic.net/js/full.js?v=9358063bfb40)中找到了它，由函数中的[https://stackoverflow.com/faq](https://stackoverflow.com/faq)引用`moveScroller`（完整功能下面，它在`d <= f && j.css({...})`必须重置回相对位置的行中）。

```
function moveScroller() {
    var g = $("#scroller").width(),
        d = function () {
            var d = $(window).scrollTop(),
                f = $("#scroller-anchor").offset().top,
                j = $("#scroller");
            d > f ? j.height() > $(window).height() ? j.css({
                position: "fixed",
                top: "",
                bottom: "0px",
                width: g
            }) : j.css({
                position: "fixed",
                top: "0px",
                bottom: "",
                width: g
            }) : d <= f && j.css({
                position: "relative",
                top: "",
                bottom: ""
            })
        };
    $(window).scroll(d).resize(d);
    d()
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:34:58.490

正如您所猜测的，它的含义几乎与

```
if (var1 <= var2) someFunction(); 
```

这并不意味着*完全相同*。该`if`语句是一个语句，而该`&&`构造只是一个表达式（因此可能是更大表达式的一部分）。

*编辑*-我现在同意，因为该代码位于`?:`运算符的“else”翼中，因此“d”必须小于或等于“f”。也许它是为了澄清事情而写的，但我觉得该代码的作者对清晰性不太感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:46:41.527

它基本上是在破解布尔 && 运算符。人们有时使用`&&`和`||`运算符作为条件的快捷方式。这是可能的，因为这些运算符的行为：

*   && 将仅在第一个操作数为真时检查第二个操作数，例如`true && thisWillAlwaysBeExecuted()`和`false && thisWillNeverBeExecuted`
*   || 运算符仅在第一个操作数为假时检查第二个操作数，例如`true || thisWillNeverBeExecuted()`和`false || thisWillAlwaysBeExecuted()`

我认为这是一种不好的做法，因为它隐藏了意图。该表达式的意思是：“比较这两个操作数”，意图是“如果满足某些条件 - 执行此任务”。我真的怀疑性能是否有任何提升，并且当第一个 IDE 被发明时，“它的字符更少”的论点停止了工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:40:24.233

```
d > f ? a > b ? func1() : func2() : d <= f && func3(); 
```

是`d`超过`f`？如果是真的那么

```
a > b ? func1() : func2() 
```

是`a > b`吗？如果为真，则运行`func1()`。如果不是真的，那么运行`func2()`。

如果`d`不超过`f`，那么

```
d <= f && func3(); 
```

如果`d`小于或等于`f`，运行`func3()`

*编辑*

至于使用`&&`它的目的，通常是在您想要避免执行条件语句的后面部分时完成，并且如果之前的条件`&&`为假，则基本上会中断。通常这些用于确保不存在的属性不会通过测试它或保证其存在的特性来访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:08:50.193

如果其中一个`d`或`f`是非数字（`NaN`，非数字字符串等），则两者都测试`d > f`并且`d <= f`可以返回`false`。

所以在代码中

```
d > f ? a > b ? func1() : func2() : d <= f && func3(); 
```

乍一看，它看起来`d <= f`是多余的，但它会缩短`func3`if`d`或非`f`数字的执行。

丑陋的代码！

# sql - SQL：SUM 不适用于 COUNT，但单独使用效果很好

> ID：14246919
> 
> 赞同：0
> 
> 时间：2013-01-09T21:33:22.043
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试在 SQL Server 2008 中执行以下 SQL 查询

```
String query = "SELECT SUM(r.rate),COUNT(q.best_answer_id) " +
                            "FROM questions_rating r,questions q " +
                            "WHERE r.question_id IN (SELECT question_id FROM questions WHERE user_id = 1) "+
                            "AND q.best_answer_id IN (SELECT answer_id FROM answers WHERE user_id = 1)"; 
```

这些是表格

**问题_评分**

```
id---------question_id-----------user_id--------rate
1               1                    1            1
2               1                    2            1
3               1                    3           -1
4               2                    1           -1 
```

**比率**只能是 1 或 -1 。

**问题**

```
question_id------question-------user_id-------best_answer_id
1                   lala            1             3
2                   lala            2             5 
```

**答案**

```
answer_id---------answer--------user_id------question_id
1                   lala            4             1
2                   kaka            5             1
3                   dada            6             1
4                   fafa            7             2
5                   tata            8             2 
```

查询返回这些结果

```
SUM------COUNT
NULL       0 
```

虽然它应该返回......

```
SUM------COUNT
1          0 
```

请注意，以下查询返回正确的结果 (1)

```
String query = "SELECT SUM(r.rate) " +
                            "FROM questions_rating r " +
                            "WHERE r.question_id IN (SELECT question_id FROM questions WHERE user_id = 1) "; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:46:41.353

我认为您应该考虑重写查询以使用`JOINS`而不是子查询：

```
SELECT 
  SUM(r.rate) SumOfRate, 
  COUNT(a.answer_id) CountOfBest
FROM questions_rating r
INNER JOIN questions q
  ON r.question_id = q.question_id
  AND r.user_id = q.user_id
LEFT JOIN answers a
  ON q.best_answer_id = a.answer_id
  AND a.user_id = 1
WHERE r.user_id = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/33188/16)

返回结果：

```
| SUMOFRATE | COUNTOFBEST |
---------------------------
|         1 |           0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:39:28.930

最可能的解释是您的查询没有返回任何行。

我建议您删除聚合，并检查结果，例如：

```
SELECT r.rate
     , q.best_answer_id
  FROM questions_rating r
 CROSS
  JOIN questions q
 WHERE r.question_id IN
       (SELECT question_id FROM questions WHERE user_id = 1)
   AND q.best_answer_id IN
       (SELECT answer_id FROM answers WHERE user_id = 1) 
```

相信你会发现没有返回任何行。在这种情况下，`COUNT()`聚合将合理地返回 0，而`SUM()`聚合将返回 NULL。

修改查询以用零替换 NULL 值相当容易，但在这种情况下，我认为这不是您的问题。（完全不清楚为什么您需要`questions`和`questions_rating`表的笛卡尔积。）

我认为您的第一步需要是返回您需要返回的行，然后着手应用聚合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:38:32.330

当您加入表时，您将获得 r.rate 的 NULL 值。尝试使用该`ISNULL`函数检查 NULL 值，如下所示：

```
String query = "SELECT SUM(ISNULL(r.rate,0)),COUNT(ISNULL(q.best_answer_id),0)) " +
                            "FROM questions_rating r,questions q " +
                            "WHERE r.question_id IN (SELECT question_id FROM questions WHERE user_id = 1) "+
                            "AND q.best_answer_id IN (SELECT answer_id FROM answers WHERE user_id = 1)"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T21:38:57.550

```
AND q.best_answer_id IN (SELECT answer_id FROM answers WHERE user_id = 1) 
```

您`user_id = 1`在答案表中没有任何条目，因此此子查询将不返回任何 answer_ids。您已使用此过滤器有效地排除了所有行，并且您的聚合正在正确计算它们。

返回结果的查询没有将此行作为 WHERE 过滤器的一部分。

# ios - iOs 应用程序终止，因为它无法使用 Core Data 找到具有给定名称的实体

> ID：14246922
> 
> 赞同：1
> 
> 时间：2013-01-09T21:33:34.123
> 
> 标签：ios, core-data

我正在尝试构建我的第一个 Core Data 应用程序，但是当应用程序崩溃并出现以下错误时，我在启动时遇到了问题：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an entity named 'Launchpad' in this model.'
*** First throw call stack:
(0x15b7012 0x13dce7e 0x6f4c5 0x3e0f 0x3c64 0xee05c8 0xe4802a 0xe15d23 0xe15a34 0xea2301 0x21ba53f 0x21cc014 0x21bc7d5 0x155daf5 0x155cf44 0x155ce1b 0x24037e3 0x2403668 0x32465c 0x2abd 0x29e5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

我一直在研究这个错误，我收集了通常是因为我没有正确配置`managedObjectModel`错误，但我不确定如何在我自己的代码中发现这样的错误。

我的 中有以下三个功能`AppDelegate`：

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Orbiter" withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Orbiter.sqlite"];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
} 
```

在我未经训练的眼睛看来，我的核心数据对象似乎已正确配置。

我在我的`xcdatamodeld`文件中添加了一个名为 Launchpad 的实体，并将其连接到对应的类，该类`Launchpad`派生自`NSManagedObject`.

导致崩溃的代码片段是

```
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSManagedObject *launchpad = [NSEntityDescription insertNewObjectForEntityForName:@"Launchpad" inManagedObjectContext:context]; 
```

最后一行是事情偏离轨道的地方。

我环顾四周，我发现的所有帮助都表明我添加了我已经拥有的功能`AppDelegate`，所以我真的不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:50:39.130

每当您更改数据模型时，这总是会成为一个问题，一种简单的方法是更改​​您的代码以自动迁移数据，而无需您总是重新安装应用程序并丢失您已经填充的数据。

在您创建持久存储的地方，您可以执行类似的操作，它会自动为您移动新模型的数据，并确保您不会丢失所有旧数据。如果您想将旧模型显式映射到新模型，可以阅读托管对象映射。

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                         [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) 
```

# sharepoint-2010 - 覆盖 Sharepoint 2010 授权 - 声明身份验证

> ID：14246923
> 
> 赞同：1
> 
> 时间：2013-01-09T21:33:41.640
> 
> 标签：sharepoint-2010, authorization, claims-based-identity

• 我们如何覆盖SP 2010（声明身份验证方案）中的授权机制来执行hos 自定义逻辑而不是使用OOB SP 逻辑。当我说覆盖时，这意味着我应该能够通过我的逻辑允许/拒绝访问任何请求资源，而不管 SP 权限如何。• 通过其他讨论，我了解到我们无法覆盖 SP 2010 中的授权机制，但我可以接受任何程度的自定义（如模块等）。• 我已经知道我们可以在SP 完成授权“之前”插入自定义逻辑，并转换/添加/删除经过身份验证的用户的声明。但是我们的需求无法通过自定义声明提供者来解决，因为我们不会知道请求中访问的资源（被访问的 URL 除外）。换句话说，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:13:40.750

您可以在[SPSessionAuthenticationModule](http://msdn.microsoft.com/en-us/library/ee545517.aspx)中处理事件，并在那里执行自定义逻辑。特别是，您可以覆盖 SessionSecurityTokenReceived 事件以检查令牌内容并根据其内容执行自定义操作。您还可以检查 HttpContext.Current，以获取 URL、请求内容等。

检查此示例代码，它可以添加到 SharePoint 应用程序 Global.asax 文件中。

```
<script runat="server">
public override void Init()
{
    FederatedAuthentication.SessionAuthenticationModule.SessionSecurityTokenReceived += new EventHandler<SessionSecurityTokenReceivedEventArgs>(SessionAuthenticationModule_SessionSecurityTokenReceived);

    base.Init();
}

void SessionAuthenticationModule_SessionSecurityTokenReceived(object sender, SessionSecurityTokenReceivedEventArgs e)
{
    DateTime validFrom = e.SessionToken.ValidFrom;
    DateTime validTo = e.SessionToken.ValidTo;
    ...

}
</script> 
```

# ruby-on-rails - Rails: BCrypt::Errors::InvalidSalt: invalid salt

> ID：14246926
> 
> 赞同：1
> 
> 时间：2013-01-09T21:33:47.187
> 
> 标签：ruby-on-rails, salt, bcrypt, bcrypt-ruby

Loosely following Ryan Bates's [How I Test](http://railscasts.com/episodes/275-how-i-test?view=asciicast) Railscast to implement sending an email confirmation token to users when they sign up.

```
class User < ActiveRecord::Base
  has_secure_password
  strip_attributes except: [:password, :password_confirmation]
  ...

  def send_email_confirmation
    generate_token(:email_token)
    self.email_token_sent_at = Time.zone.now
    save!
    UserMailer.email_confirmation(self).deliver
  end

  private
    def generate_token(column)
      begin
        self[column] = SecureRandom.urlsafe_base64
      end while User.exists?(column => self[column])
    end
end 
```

This is failing (in feature specs and when manually clicking through sign-up process) with:

```
Failures:

  1) UserPages sign up with valid information should create a user
     Failure/Error: expect { click_button submit }.to change(User, :count).by(1)
     BCrypt::Errors::InvalidSalt:
       invalid salt
     # ./app/models/user.rb:70:in `send_email_confirmation'
     # ./app/controllers/users_controller.rb:27:in `create'
     # ./spec/features/user_pages_spec.rb:165:in `block (5 levels) in <top (required)>'
     # ./spec/features/user_pages_spec.rb:165:in `block (4 levels) in <top (required)>' 
```

I've tried reinstalling bcrypt gem (as suggested [elsewhere](https://stackoverflow.com/questions/11579696/bcrypterrorsinvalidsalt-invalid-salt-devise) even though it was Devise related and I'm not using Devise): `gem uninstall bcrypt-ruby` and then `gem install bcrypt-ruby` but to no avail. ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-29T07:40:34.643

Gem**`strip_attributes`**应对此类行为负责。

### 解决方案

从剥离中排除`:password_digest`属性，如下所示：

```
strip_attributes except: [:password_digest] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-27T18:16:33.277

我们遇到了这个错误，这是因为**我们试图在一个只有数据库*读取*权限的 k8s pod 中执行*写入****操作。*

 *我确定这不是原始问题的答案，但是当我们试图找出导致我们这个错误的原因时，我遇到了这个问题，所以我想分享一下。*

# php - 如何找到方法和属性的用法？

> ID：14246932
> 
> 赞同：4
> 
> 时间：2013-01-09T21:34:34.413
> 
> 标签：php, aptana3

我正在使用 Aptana Studio 3，并且正在尝试在我的项目中查找方法和/或属性的用法。我似乎记得在 Zend Studio 中能够做到这一点，我想知道是否有一个我只是没有找到的等效或插件。我四处寻找这个，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T19:41:45.097

你可以试试：

```
Ctrl+Alt+G 
```

它只是对选定的术语进行一般搜索，但总比没有好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:05:57.277

你的意思是“大纲”功能吗？

看`Window > Show View > Other... > General > Outline`

# javascript - Backbone.js：在视图中的点击事件上应用带有jQuery的类？

> ID：14246938
> 
> 赞同：0
> 
> 时间：2013-01-09T21:35:09.647
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我有一个非常基本的 Backbone 问题。我想在单击元素时应用一个类（使用 jQuery）。不幸的是，我不知道如何使用 Backbone 视图执行此操作 - 我可以捕获单击事件，但我不知道如何以 jQuery 可以理解的方式获取元素。

我的 HTML 如下所示：

```
<div id="options">
<ul>
<li>red</li>
<li class="selected">blue</li>
<li>green</li>
</ul>
</div> 
```

*更新 - 对不起，我应该给出一个较少编辑的例子，真正的 HTML 实际上是这样的：*

```
<li><img src="red.jpg"><h3>red</h3></li> 
<li class="selected"><img src="blue.jpg"><h3>blue</h3></li> 
<li><img src="green.jpg"><h3>green</h3></li> 
```

我的 Backbone 代码如下所示：

```
var SearchFormView = Backbone.View.extend({
el: $('#options'),
events: {
  "click li": "updateResults"
},
updateResults: function(e) {
  console.log('updateResults');
  $(this).toggleClass("selected");
} 
```

});

它没有按原样工作 -`updateResults`正在记录到控制台，但没有应用该类。我认为这是因为我没有`this`正确使用。感谢任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T21:36:55.530

Sup 在使用主干事件时，`this`设置为视图。尝试使用`e.target`而不是`this`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:02:33.107

根据 hajpoj 回答的评论，您可能需要以下 jQuery 函数之一，并与 $(e.target) 的 'li' 元素一起应用（如果没有确切的 html，很难分辨）：

1.  [.parents('李')](http://api.jquery.com/parents/)
2.  [.closest('li')](http://api.jquery.com/closest/)

# ios - 在 opengles 中渲染三角形

> ID：14246941
> 
> 赞同：1
> 
> 时间：2013-01-09T21:35:25.337
> 
> 标签：ios, objective-c, opengl-es

我发现从 opengles 开始真的很难。我在网上到处找教程。找到一本 Philips Rideout 的免费书，尝试了几章，但由于缺乏良好的 C++ 技能，我把它放在了中间。然后尝试了 Ray Wenderlich 的教程，但被着色器卡住了，无法制作一个非常简单的教程。现在，我在 Jeff Lamarche 的旧博客上徘徊。我知道有一个相当不错的面向对象框架，叫做 COCOS2D，它几乎可以完成 2D 游戏和图形所需的一切，但我想在实际尝试 COCOS2D 之前打好基础。但是，似乎我永远也达不到那里。我一个接一个地遇到麻烦，我没有办法找到解决办法。所以，我一次又一次地来堆栈溢出来澄清我的误解。

我对 OpenGLES 中一个非常简单的三角形有疑问。此示例使用 OpenGLES 1.0。在我看来渲染图形的代码是这样的，

```
struct Vertex3D{
    GLfloat x;
    GLfloat y;
    GLfloat z;

};

struct Triangle3D{
    Vertex3D v1;
    Vertex3D v2;
    Vertex3D v3;

};

static inline Triangle3D Triangle3DMake(Vertex3D vertex1, Vertex3D vertex2, Vertex3D vertex3){
    Triangle3D triangle;
    triangle.v1 = vertex1;
    triangle.v2 = vertex2;
    triangle.v3 = vertex3;
    return triangle;
};

static inline Vertex3D vertex3DMake(GLfloat x, GLfloat y, GLfloat z){
    Vertex3D vertex;
    vertex.x = x;
    vertex.y = y;
    vertex.z = z;
    return vertex;
}

static inline GLfloat Vertex3DCalculateDistanceBetweemVertices(Vertex3D first, Vertex3D second){
    GLfloat deltaX = second.x - first.x;
    GLfloat deltaY = second.y - first.y;
    GLfloat deltaZ = second.z - first.z;
    return sqrtf(powf(deltaX, 2) + powf(deltaY, 2) + powf(deltaZ, 2));
}

@implementation GLView{
    GLuint renderbuffer;
    GLuint framebuffer;
    EAGLContext *_context;
    CAEAGLLayer *layer;
    GLuint depthbuffer;
}

+(Class)layerClass{
    return [CAEAGLLayer class];
}

-(void)setUpLayer{
    layer = (CAEAGLLayer*)super.layer;
}

-(void)setUpContext{
    EAGLRenderingAPI api = kEAGLRenderingAPIOpenGLES1;
    _context = [[EAGLContext alloc] initWithAPI:api];
    if(!_context){
        NSLog(@"Could not create context");
        abort();
    }

    if(![EAGLContext setCurrentContext:_context]){
        NSLog(@"Could not set current context");
        abort();
    }
}

-(void)setUpRenderBuffer{
    glGenRenderbuffersOES(1, &renderbuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, renderbuffer);

    glGenRenderbuffers(1, &depthbuffer);
    glBindRenderbufferOES(GL_DEPTH_COMPONENT16_OES, depthbuffer);
    [_context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:layer];
    [_context renderbufferStorage:GL_DEPTH_COMPONENT16_OES fromDrawable:layer];
}

-(void)setUpFrameBuffer{
    glGenFramebuffersOES(1, &framebuffer);
    glBindFramebufferOES(GL_FRAMEBUFFER_OES, framebuffer);
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, renderbuffer);
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_DEPTH_COMPONENT16_OES, depthbuffer);
}

-(void)render{
    Vertex3D    vertex1 = vertex3DMake(0,1,0);
    Vertex3D    vertex2 = vertex3DMake(1.0, 0.0, 0);
    Vertex3D    vertex3 = vertex3DMake(-1.0, 0.0, 0.);
    Triangle3D  triangle = Triangle3DMake(vertex1, vertex2, vertex3);
    glViewport(0, 0, self.bounds.size.width, self.bounds.size.height);
    glClearColor(0.7, 0.7, 0.7, 1.0);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glEnableClientState(GL_VERTEX_ARRAY);
    glColor4f(1.0, 0.0, 0.0, 1.0);
    glVertexPointer(3, GL_FLOAT, 0, &triangle);
    glDrawArrays(GL_TRIANGLES, 0, 9);
    [_context presentRenderbuffer:GL_RENDERBUFFER_OES];
    glDisableClientState(GL_VERTEX_ARRAY);

}
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setUpLayer];
        [self setUpContext];
        [self setUpRenderBuffer];
        [self setUpFrameBuffer];

        [self render];
    }
    return self;
} 
```

此代码产生的图形如下图所示；

![在此处输入图像描述](../Images/f22ee9853c1e038bb7aaa2ee63a82f0d.png)

因为，我使用的是（1,0），（-1,0），（1,0）的二维坐标，所以我假设它应该给我这样的数字；

![在此处输入图像描述](../Images/d5de78f29f6246769fc37ce4fc1b3e45.png)

我确信我做错了一些非常小的事情。如果有人能指出我，这对我来说将是一个很大的帮助。再次感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:57:14.527

看起来您只是渲染了太多顶点，而 OpenGL 正在将顶点数组的末尾读取到未初始化的内存中。线

```
glDrawArrays(GL_TRIANGLES, 0, 9); 
```

应该是

```
glDrawArrays(GL_TRIANGLES, 0, 3); 
```

如果你只想画一个三角形。第三个参数是要渲染的顶点总数。

# clojure - Clojure：列出在命名空间内实现某些协议的所有定义类型

> ID：14246945
> 
> 赞同：10
> 
> 时间：2013-01-09T21:35:39.247
> 
> 标签：clojure, protocols

我有一个协议和几个在一个工作区中实现它的定义类型。如何列出实现以下协议的所有定义类型？

我已经找到了从（ns-public）过滤数据的解决方案，但我不喜欢它，因为它使用一些“魔法”来完成工作，因为我还没有找到实现目标的正确方法满足*？*并*扩展？*.

有任何想法吗？

```
(defprotocol Protocol
  (foo[this] "just an interface method"))

(deftype Dummy [] Protocol
  (foo[this] "bar"))

(defn implements? [protocol atype] "fn from clojure sources"
  (and atype (.isAssignableFrom ^Class (:on-interface protocol) atype)))

(defn list-types-implementing[protocol]
  (filter (fn[x] (let [[a b] x]
            (when (.startsWith (str a) "->") ; dark magic        
              (implements? protocol 
               (resolve (symbol 
                (.replace (str a) "->" "")))))
            )) 
         (ns-publics *ns*)))

(list-types-implementing Protocol) ; => ([->Dummy #'user/->Dummy])

(let [[a b] (first(list-types-implementing Protocol))]
    (foo (b)) ; => "bar"
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:55:00.633

一般来说，这将是一个需要解决的棘手问题，因为一个类型可以通过两种不同的方式满足协议。`extend-type`您可以使用and函数将任何现有 Java 类扩展为协议`extend-protocol`（这是一个非常强大的功能，因为它允许您扩展代码以使用内置 Java 或 Clojure 类型，或您不使用的其他第三方类型。 t 控制）。`deftype`或者，您可以将协议实现直接指定为或中类型定义的一部分`defrecord`。这两种机制的实现方式不同。

第一种情况（通过`extend-type`or扩展`extend-protocol`）将更容易解决，因为被扩展的类型将附加到协议本身（协议本质上相当于生成的 Java 接口加上带有关于协议的元数据的 Clojure 映射）。`:impls`您可以通过查看协议映射中的键找到扩展协议的类型：

```
user=> (defprotocol MyProtocol (foo [this] "Protocol function"))
user=> (deftype MyType [])
user=> (extend-type MyType MyProtocol (foo [_] "hello foo!"))
user=> (keys (:impls MyProtocol))
(user.MyType) 
```

第二种情况（通过`deftype`or直接实现协议`defrecord`）比较困难，因为为类型或记录生成的 Java 类将直接实现协议定义的 Java 接口（您可以在`deftype`or中实现任何 Java 接口`defrecord`，而不仅仅是协议）。任何找到以这种方式扩展协议的类型的方法都需要一些扫描和反射。基本上你要问的是，“我怎样才能找到实现给定接口的所有 Java 类？”

在典型的 Java 应用程序中，您可能会按照扫描类路径的目录以查找 .class 文件并对其进行自省的方式执行某些操作，但这在 Clojure 中不起作用，因为您的类型很可能没有 .class 文件（字节码是动态生成的）。如果您对自己的实现不满意，您可以查看此问题中的答案，看看它是否更符合您的喜好：

[查找实现接口的 Java 类](https://stackoverflow.com/questions/435890/find-java-classes-implementing-an-interface)

# asp.net - 确定哪个控件在列表视图中触发事件

> ID：14246947
> 
> 赞同：2
> 
> 时间：2013-01-09T21:35:50.880
> 
> 标签：asp.net, .net, telerik, telerik-ajax

我在 Telerik 论坛上问过这个问题，但有时那里的反应可能很慢。我想知道这里是否有人知道该怎么做。

我处于用户将拥有可变数量的项目并且在每个项目旁边我想要一个 RadNumericTextBox 的情况。我正在考虑使用 RadListView 并将模板设置为项目名称和与之关联的 RadNumericTextBox。我想忽略 RadListView 的编辑、创建和更高级的功能。我只想要一个带有输入框的项目列表，当用户更改值时会自动回发。

我面临的问题是当用户更改文本框中的数字时，我怎么知道这是哪个文本框？我正在查看 RadNumericTextBox 上是否有一个属性可以保存任意值，例如我的项目键，这样我就知道它们更改了哪个数字。但是，我没有看到这样的属性。

当我自动回发时，有什么方法可以确定他们编辑了哪个文本框？

万一有人问，我不想强​​迫我的用户单击一个按钮使该行进入编辑模式，更改数字，然后单击一个按钮来保存该行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:31:48.083

您可以使用`Repeater`控件来执行此操作。

在转发器的项目模板中包含一个`RadNumericTextBox`，然后为它编写一个服务器端事件处理程序。文本框的客户端 ID 可以通过事件处理程序的`sender`对象访问，但如果这些信息还不够，您可以依靠转发器的数据源将您需要的任何数据与每个文本框关联起来。

最简单的方法可能是使用`Label`文本框的属性。这是一个例子：

ASPX：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:Repeater ID="Repeater1" runat="server">    
    <ItemTemplate>
        <br />
        <telerik:RadNumericTextBox ID="radNTB" runat="server" AutoPostBack="true" OnTextChanged="radNTB_TextChanged" ClientIDMode="Predictable"></telerik:RadNumericTextBox>
    </ItemTemplate>
</asp:Repeater> 
```

VB：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then

        Dim dt As New DataTable
        dt.Columns.Add("Column1", GetType(String))

        For i As Integer = 1 To 5
            Dim row = dt.NewRow
            row.Item("Column1") = "TextBox" & i.ToString
            dt.Rows.Add(row)
            dt.AcceptChanges()
        Next

        Repeater1.DataSource = dt
        Repeater1.DataBind()

    End If
End Sub

Private Sub Repeater1_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles Repeater1.ItemDataBound
    If (e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem) Then

        Dim tb As RadNumericTextBox = e.Item.FindControl("radNTB")
        tb.Label = DataBinder.Eval(e.Item.DataItem, "Column1").ToString()

    End If
End Sub

Public Sub radNTB_TextChanged(sender As Object, e As EventArgs)
    Dim ntb As RadNumericTextBox = sender
    Response.Write(ntb.Label)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T08:19:29.817

您可以做的是通过将列表视图与数据源绑定的项目，使 RadNumericTextBox 的 id 等于您要传递的项目键。在 RadNumericTextBox TextChanged 事件中，将发送者对象转换为 RadNumericTextBox 类型。在这种情况下，您将获得您正在寻找的唯一项目密钥。例子 ：

```
<asp:FormView ID="frmViewPicture" runat="server">
  <EditItemTemplate>
    <telerik:RadNumericTextBox ID='Eval("ItemKey")' 
          OnTextChanged="radTxtNewPrice_TextChanged" AutoPostBack="true">
    </telerik:RadNumericTextBox>                                   
   </EditItemTemplate>
</asp:FormView> 
```

确保项目键是唯一的并且在您的数据源中可用，否则您将获得异常。

```
protected void radTxtNewPrice_TextChanged(object sender, EventArgs e)
{
   Telerik.Web.UI.RadNumericTextBox txtRadNumericTextBox= (Telerik.Web.UI.RadNumericTextBox)sender;
   var itemKey = txtRadNumericTextBox.ID;
   // Do Your Logic Here 

} 
```

希望这会有所帮助。

# c# - System.IO 相对路径

> ID：14246949
> 
> 赞同：3
> 
> 时间：2013-01-09T21:36:07.103
> 
> 标签：c#, path, .net

我正在尝试从我的解决方案中读取文件。我想知道如何使用相对路径定位文件。我的解决方案包含*3 个项目*。我要读取的文件位于*项目 A*中，但正在读取它的代码位于*项目 B*中。如果我使用`..\file.txt`它将带我到*Project B*而不是*Project A*。如果我使用`Application.StartPath` 我得到

*`C:\\Users\\Linda\\AppData\\Local\\Microsoft\\VisualStudio\\10.0\\Extensions\\tangible\\t4 editor\\2.1.1`*

而我需要找到我开发代码的目录`C:\Sp_CodeGenerator\...`

我也尝试过使用

```
Environment.GetFolderPath

Directory.GetCurrentDirectory();
System.IO.Path.GetDirectoryName(System.IO.Path.GetDirectoryName(Application.ExecutablePath))'`
System.AppDomain.CurrentDomain.BaseDirectory.ToString(); 
```

但这些都产生相同的结果，并将我带到 Visual Studio 程序文件，而不是在硬盘上创建解决方案的位置。

还有什么我应该尝试的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T03:08:26.300

在我看来，您正在从 t4 模板中执行与路径相关的代码？这实际上会影响答案，因为处理路径的所有正常方法都将在 Visual Studio 和您正在使用的 t4 编辑器插件的上下文中。

您需要访问 ITextTemplatingEngineHost 以正确解析您的路径。

将特定于主机的导演添加到您的模板

```
<#@template language="c#" hostspecific="true" #> 
```

然后你可以通过

```
this.Host.ResolvePath(path);

//also available (Gets the path and file name of the text template that is being processed.)
//this.Host.TemplateFile 
```

请参阅[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.itexttemplatingenginehost(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.itexttemplatingenginehost(v=vs.110).aspx)

# c# - c# RegistryKey 双循环？

> ID：14246953
> 
> 赞同：0
> 
> 时间：2013-01-09T21:36:21.673
> 
> 标签：c#, registry, registrykey

如果我运行下面的代码，我会得到：

```
 PG_ID_N_1_NA_ID_1,
 PG_ID_N_2_NA_ID_1,
 PG_ID_N_3_NA_ID_1,
 PG_ID_N_4_NA_ID_1 
```

![在此处输入图像描述](../Images/8940cc347b4dc0a9cf40d32d6372b6f6.png)

但是，我想做的是获取`FriendlyName REG_SZ`每个键下的值。

```
RegistryKey r = Registry.LocalMachine;
r = r.OpenSubKey(@"SYSTEM\CurrentControlSet\Enum\{C641C770-FAAC-44ED-9C73-48D1B5E59200}\NDIS&VEN_1924&DEV_0803&SUBSYS_62271924", false);
foreach (string s in r.GetSubKeyNames())
{
    Console.WriteLine(s);
}
r.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:08:32.110

关于什么：

```
RegistryKey r = Registry.LocalMachine;
r = r.OpenSubKey(@"SYSTEM\CurrentControlSet\Enum\{C641C770-FAAC-44ED-9C73-48D1B5E59200}\NDIS&VEN_1924&DEV_0803&SUBSYS_62271924", false);  
foreach (string s in r.GetSubKeyNames())
{
    using (RegistryKey subKey = r.OpenSubKey(s))
    {
        Console.WriteLine(subKey.GetValue("FriendlyName"));
    }
}
r.Close(); 
```

我在这台计算机上没有编译器，所以上面的代码可能是废话。

# c# - 从模型中获得函数和常数的解释

> ID：14246955
> 
> 赞同：1
> 
> 时间：2013-01-09T21:36:32.953
> 
> 标签：c#, z3

我正在编写一个通用函数来使用[Z3 的 .NET API](http://research.microsoft.com/en-us/um/redmond/projects/z3/class_microsoft_1_1_z3_1_1_context.html)从模型中获取对[FuncDecl](http://research.microsoft.com/en-us/um/redmond/projects/z3/class_microsoft_1_1_z3_1_1_func_decl.html)的解释。

这是一个简化的代码片段：

```
Model m = s.Model;
foreach (FuncDecl d in m.Decls)
    if (d.DomainSize == 0 && d.Arity == 0)
       Console.WriteLine(d.Name + " -> " + m.ConstInterp(d));
    else 
       Console.WriteLine(d.Name + " -> " + m.FuncInterp(d)); 
```

但是，当代码尝试调用`ConstInterp`.

> Microsoft.Z3.Z3Exception：非零元函数和数组将 FunctionInterpretations 作为模型。使用 FuncInterp。

我检查了[Model](http://research.microsoft.com/en-us/um/redmond/projects/z3/class_microsoft_1_1_z3_1_1_model.html)上的所有属性，但似乎没有任何属性有助于在数组声明上创建正确的条件。

我怎样才能解决这个问题？我是否也错过了任何其他类型的声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:21:28.317

数组常量在 Z3 中是一个例外，因为它们具有作为模型的函数解释。这就是为什么 ConstInterp 不适用并因此引发异常的原因。恐怕目前最好的解决方案只是检查 funcdecl 的范围，直到我们得到更好的解决方案。

例如，更换

```
if (d.DomainSize == 0 && d.Arity == 0) 
```

和

```
if (d.DomainSize == 0 && d.Arity == 0 && d.Range.SortKind != Z3_ARRAY_SORT) 
```

# encoding - Notepad++可以识别编码吗？

> ID：14246956
> 
> 赞同：16
> 
> 时间：2013-01-09T21:36:37.060
> 
> 标签：encoding, text-files, notepad++

我创建了带有 UTF-8 编码内容的文件（使用 PHP fputcsv）。

当我在 Notepad++ 中打开此文件时 - 字符错误（Notepad++ 以 ANSI 编码开头）。

当我从菜单中设置 Format->"Encode in UTF-8" 时 - 一切都很好。

我担心，记事本++可以以某种方式识别编码，也许我的文件有问题`fputcsv`？第一个字节还是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T21:50:52.553

自动检测编码不是可以准确完成的事情。明确指定编码非常重要。在某些情况下可以猜到，但即便如此也不是 100% 确定的。

本文档 ( [Encoding](http://web.archive.org/web/20130530172906/http://npp-community.tuxfamily.org/documentation/notepad-user-manual/document-properties/encoding) ) 解释了与 Notepad++ 相关的情况。他们还指出，特别是如果文件没有使用字节顺序标记 (BOM) 保存，就会出现困难。

鉴于您手动设置编码后文件显示正确，我会说您生成和保存文件的方式没有任何问题。您唯一可以检查的是是否正在保存 BOM，这可能会提高 Notepad++ 能够自动检测编码的机会。

值得注意的是，虽然它可以帮助 Notepad++ 等编辑器更准确地识别编码，但根据 The Unicode Standard 文档，不推荐使用 BOM。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-09T21:45:03.517

您必须检查 Notepad++ GUI 的右下角才能看到正在使用的实际编码。问题不是 Notepad++ 特有的，因为猜测正确的编码是一个大问题，没有任何真正的解决方案，所以最好让用户决定在每种情况下最合适的编码是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-12T15:34:29.060

当你想在Java程序中体现文本文件的编码时，你必须考虑两个方面：编码和字符集。打开文本文件时，您会在“编码”菜单下看到编码。另外查看字符集菜单点。在“东欧”下，您将找到“ISO 8859-2”，在中欧“Windows-1250”下。查表时可以在Java程序中设置相应的编码： [https](https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html) : //docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html 例如对于Central European字符集“Windows-1250”表建议Java编码“Cp1250”。设置编码，您将正确看到程序中的字符。

# hadoop - Hadoop任务跟踪器问题

> ID：14246957
> 
> 赞同：2
> 
> 时间：2013-01-09T21:36:39.293
> 
> 标签：hadoop

这是一个奇怪的问题。当我的笔记本断电并自行关机时，我正在运行 MR 作业（单节点）。由于 ubuntu 10.04 中缺少“无电池”警告

当我再次启动并尝试启动hadoop（单节点）时，一切顺利，当我从命令行发出“jps”时，列出了所有主从进程。我还尝试发出“netstat -plten | grep java”。

命令行输出：

```
hduser@fox:~$ jps
10476 数据节点
1819
10696 工作跟踪器
10813 任务跟踪器
11741 日元
10605 次要名称节点
10360 名称节点

hduser@fox:~$ sudo netstat -plten | grep java
tcp 0 0 0.0.0.0:55376 0.0.0.0:* 听 1000 141925 10476/java      
tcp 0 0 0.0.0.0:42352 0.0.0.0:* 听 1000 141790 10360/java      
tcp 0 0 0.0.0.0:50070 0.0.0.0:* 听 1000 142727 10360/java      
tcp 0 0 0.0.0.0:50010 0.0.0.0:* 听 1000 142818 10476/java      
tcp 0 0 0.0.0.0:50075 0.0.0.0:* 听 1000 143308 10476/java      
tcp 0 0 0.0.0.0:50020 0.0.0.0:* 听 1000 146358 10476/java      
tcp 0 0 127.0.0.1:38533 0.0.0.0:* 听 1000 143217 10813/java      
tcp 0 0 102.173.156.27:54310 0.0.0.0:* 听 1000 141913 10360/java      
tcp 0 0 102.173.156.27:54311 0.0.0.0:* 听 1000 142359 10696/java      
tcp 0 0 0.0.0.0:50090 0.0.0.0:* 听 1000 142827 10605/java      
tcp 0 0 0.0.0.0:56779 0.0.0.0:* 听 1000 142191 10605/java      
tcp 0 0 0.0.0.0:55373 0.0.0.0:* 听 1000 142251 10696/java      
tcp 0 0 0.0.0.0:50030 0.0.0.0:* 听 1000 142921 10696/java

```

我检查了作业跟踪器日志文件：

```
2013-01-09 16:40:52,286 警告 org.apache.hadoop.hdfs.DFSClient：块空错误数据节点 [0] 节点的错误恢复 == null
2013-01-09 16:40:52,286 警告 org.apache.hadoop.hdfs.DFSClient：无法获取块位置。源文件“/home/hduser/hadoop/tmpnew/mapred/system/jobtracker.info” - 中止...
2013-01-09 16:40:52,286 警告 org.apache.hadoop.mapred.JobTracker：写入文件 hdfs://master:54310/home/hduser/hadoop/tmpnew/mapred/system/jobtracker.info 失败！
2013-01-09 16:40:52,287 警告 org.apache.hadoop.mapred.JobTracker：文件系统尚未准备好！
2013-01-09 16:40:52,290 警告 org.apache.hadoop.mapred.JobTracker：无法初始化恢复管理器。
org.apache.hadoop.ipc.RemoteException: java.io.IOException: 文件 /home/hduser/hadoop/tmpnew/mapred/system/jobtracker.info 只能复制到 0 个节点，而不是 1 个
    在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    在 org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 javax.security.auth.Subject.doAs(Subject.java:396)
    在
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)
    在 org.apache.hadoop.ipc.Client.call(Client.java:1070)
    在 org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    在 $Proxy5.addBlock（未知来源）
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    在 org.apache.hadoop.io.retry.RetryInvocationHandler.invoke（RetryInvocationHandler.java:59）
    在 $Proxy5.addBlock（未知来源）
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3510)
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3373)
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2600(DFSClient.java:2589)
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2829)
2013-01-09 16:41:02,291 警告 org.apache.hadoop.mapred.JobTracker：重试...
2013-01-09 16:41:02,331 警告 org.apache.hadoop.hdfs.DFSClient：DataStreamer 异常：org.apache.hadoop.ipc.RemoteException：java.io.IOException：文件/home/hduser/hadoop/tmpnew/ mapred/system/jobtracker.info 只能复制到 0 个节点，而不是 1 个
    在 org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    在 org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    在 org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 javax.security.auth.Subject.doAs(Subject.java:396)
    在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    在 org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

    在 org.apache.hadoop.ipc.Client.call(Client.java:1070)
    在 org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    在 $Proxy5.addBlock（未知来源）
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    在 org.apache.hadoop.io.retry.RetryInvocationHandler.invoke（RetryInvocationHandler.java:59）
    在 $Proxy5.addBlock（未知来源）
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3510)
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3373)
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2600(DFSClient.java:2589)
    在 org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2829)
```

我无法使用 URL 看到 tasktracker - master:50060

因此我感觉tasktracker没有正确启动。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:21:03.017

确保您的 HDFS 已退出安全模式。如果没有，请使用“bin/hadoop dfsadmin -safemode leave”来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:47:33.463

名称节点格式仍然存在错误。必须使用全新安装设置不同的用户帐户。问题解决了。

# git - EGit 垃圾邮件带有类型更改的 git 存储库

> ID：14246962
> 
> 赞同：2
> 
> 时间：2013-01-09T21:36:55.890
> 
> 标签：git, eclipse-plugin, egit, git-clone, git-revert

我在带有 git 版本 1.8.0.1 的 Suse 11.0 上使用 Eclipse Egit。埃吉特：2.1.0

当我在 Egit 中从 gerrit 克隆存储库时，我在 />git status
...
typechange: src/TestPorts/TELNET/XXX.xxx
...

并使用 less 命令查看文件内容：

../../../TestPorts/TELNET/XXX.xxx ~
~
~
~
~
~
~

因此，当我使用 git reset --hard 恢复这些更改时，我会在 Egit 中获得未分阶段的更改。未暂存的文件与 git status 中的文件相同。当我用 Eclipse 恢复这些文件时，问题又在 git 中开始了。

有这方面的经验吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:32:21.023

这将是 JGit 错误，因为我意识到这些文件实际上是 symlincs。不知何故，JGit 无法正确解决它们，请参阅：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=354367](https://bugs.eclipse.org/bugs/show_bug.cgi?id=354367)

# javascript - gmaps4rails gem，总是使用集群图标而不是标记图标

> ID：14246963
> 
> 赞同：0
> 
> 时间：2013-01-09T21:36:55.410
> 
> 标签：javascript, google-maps, google-maps-markers, gmaps4rails

使用 Google-Maps-for-Rails gem。有用的宝石！

出于隐私原因，我们正在对标记进行聚类。但是，当只有一个标记时，会出现标记图标而不是集群图标。

当只有一个标记而不是单个标记图标时，我们希望集群图标出现一个“1”。这可能吗？如果有怎么办？

目前，集群已开启。

```
<%= gmaps("markers" =>
             {
               "data" => @fundings_for_map,
               "options" => {"clusterer_gridSize" => 50,
                             "do_clustering" => true,
                             "clusterer_maxZoom" => 100}
             }, etc... 
```

尝试使用 maxZoom，但单个标记仍显示为标记而不是集群。

如果可以仅显示群集图标，任何人都有任何想法，如果可以，该怎么做？

谢谢！

# c++ - 堆栈对象被插入到容器中？

> ID：14246972
> 
> 赞同：1
> 
> 时间：2013-01-09T21:37:32.913
> 
> 标签：c++, vector

在 C++ 中，如果您在堆栈上（在函数内）创建一个对象并将其插入到堆分配的容器中（该容器已被传递到函数中/在函数完成后存在），会发生什么？

堆栈对象具有本地范围，但它已插入其中的容器位于堆上，并且可以在函数（进行插入的位置）返回后持续存在。函数返回后，堆栈对象是否仍可从容器中检索？

```
void Test( std::vector<MyClass>& myvec )
{
    MyClass m;
    myvec.push_back(m);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:40:15.320

在这种特殊情况下，`m`将被复制构造为 的新实例`MyClass`，该实例将归向量所有。所以可以从向量中检索一个*不同但等效*的实例，是的。`MyClass`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:41:02.570

```
Is the stack object still retrievable from the container after the function returns? 
```

是的，您`myvec.push_back(m);`制作了 m 的副本，并且新副本由矢量管理。

但是，在您的函数返回后`myvec`没有`m`内部，因为您按值传递`myvec`给 Test 函数，`Test`函数会制作一个临时副本`myvec`并复制`m`到其中，在函数返回后`myvec`释放临时副本。所以你的意思是通过引用传递`myvec`给函数，如下所示：`Test`

```
public void Test(Vector<MyClass>& myvec){
    MyClass m;
    myvec.push_back(m);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T21:42:42.277

基本假设：当您使用 时`Vector`，您的真正意思是`std::vector`。答案*可能*会随着设计足够不同的容器而改变。

只要你喜欢你通常应该的，并且在容器中存储对象（而不是指针），你就可以了，因为存储在容器中的通常是你传递的对象的副本。

在适当的情况下，容器中的对象可以从您传递的内容中移动构造，但效果基本相同 - 您最终会得到一个对象，其生命周期会一直持续到它从容器中移除（或容器被销毁， ETC。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:41:51.433

正如其他答案所指出的，`m`被复制到向量中。也就是说，您的函数也按值接收向量（UPD：原始代码是这样，此后进行了编辑），这显然不是您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T22:02:25.013

问题中的代码*将*在. 当方法退出时，原始将被破坏。`MyClass``std::vector``m``Test`

如果我们改变向量来存储指向我们的指针，`MyClass`我们有两个可能的选择。

```
void Test( std::vector<MyClass*>& myvec )
{
    // Allocates a new MyClass on the heap.
    MyClass* pM = new MyClass();
    myvec.push_back(pM);

    // This variable will be allocated on the stack and cleaned up on method exit
    MyClass dontDoThis;
    myvec.push_back(&dontDoThis);
} 
```

这个方法的最后`myvec`有两个元素，`myvec[0]`和`myvec[1]`。

当存储指针容器时，*必须*分配对象，以便它在指针在容器中的时间长度内有效。在上面的示例中，`pM`指针将在`Test`方法退出后有效。这意味着`myvec[0]`在方法退出后它将是一个有效的指针。

最初，一个指向`dontDoThis`变量的有效指针将被添加到向量中，但是当方法退出时，`dontDoThis`将调用析构函数，并且内存可能会用于存储其他数据。中的指针`myvec`看起来不错，但任何实际使用它的尝试都会导致未定义的行为。在方法退出时，指针`myvec[1]`可能看起来有效，但实际上它指向垃圾。

请注意，稍后，当`myvec[0]`被更改或删除时，调用：

```
delete myvec[0] 
```

以确保正确清理对象。否则会发生内存泄漏。

在解释了裸指针会发生什么之后，我强烈建议您使用智能指针，例如[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)和[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T22:23:26.083

函数返回后，堆栈对象是否仍可从容器中检索？

仅当 MyClass 具有“gut”复制构造函数时。（深拷贝或共享其他资源的所有权等）

我的意思是，它可以被恢复，但它可能处于损坏状态

# c++ - C ++如何强制预取数据进行缓存？（数组循环）

> ID：14246976
> 
> 赞同：8
> 
> 时间：2013-01-09T21:37:47.193
> 
> 标签：c++, cpu-cache, prefetch

我有这样的循环

```
start = __rdtsc();
unsigned long long count = 0;
for(int i = 0; i < N; i++)
    for(int j = 0; j < M; j++)
        count += tab[i][j];
stop = __rdtsc();
time = (stop - start) * 1/3; 
```

需要检查预取数据如何影响效率。如何在计算之前强制将某些值从内存中预取到缓存中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T21:53:09.617

仅适用于 GCC：

```
__builtin_prefetch((const void*)(prefetch_address),0,0); 
```

`prefetch_address`可以无效，不会有段错误。如果与当前位置之间的差异太小`prefetch_address`，则可能没有效果甚至减速。尝试将其设置为至少提前 1k。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T01:07:08.133

首先，我假设这`tab`是一个大型二维数组，例如静态数组（例如，`int tab[1024*1024][1024*1024]`）或动态分配的数组（例如，`int** tab`和后面`malloc`的 s）。在这里，您希望从`tab`缓存中预取一些数据以减少执行时间。

简单地说，我认为您不需要手动将任何预取插入到您的代码中，其中对 2D 数组执行简单的缩减。如果必要且有利可图，现代 CPU 将进行自动预取。

* * *

对于这个问题，你应该知道两个事实：

(1) 您已经在利用`tab`最内层循环内部的空间局部性。一旦`tab[i][0]`被读取（在缓存未命中或页面错误之后），来自`tab[i][0]`to的数据`tab[i][15]`将在您的 CPU 缓存中，假设缓存行大小为 64 字节。

(2) 但是，当代码在行中遍历时，即`tab[i][M-1]`到`tab[i+1][0]`，极有可能发生冷缓存未命中，特别是当`tab`是动态分配的数组时，其中每一行都可以以分段的方式分配。但是，如果数组是静态分配的，则每一行将在内存中连续定位。

* * *

`j + CACHE_LINE_SIZE/sizeof(tab[0][0])`因此，仅当您读取 (1) 下一行的第一项和 (2)提前时，预取才有意义。

您可以通过`__builtin_prefetch`在上层循环中插入预取操作（例如 ）来实现。然而，现代编译器可能并不总是发出这样的预取指令。如果你真的想这样做，你应该检查生成的二进制代码。

但是，正如我所说，我*不*建议您这样做，因为现代 CPU 大多会自动进行预取，而自动预取在很大程度上会胜过您的手动代码。例如，像 Ivy Bridge 处理器这样的 Intel CPU，有多个数据预取器，例如预取到 L1、L2 或 L3 缓存。（我不认为移动处理器有一个花哨的数据预取器）。一些预取器将加载相邻的缓存行。

* * *

如果您在大型 2D 数组上进行更昂贵的计算，则有许多对缓存更友好的替代算法。一个值得注意的例子是**blocked(titled) matrix multiply**。一个简单的矩阵乘法会遭受很多缓存未命中，但阻塞算法通过计算适合缓存的小子集显着减少缓存未命中。[请参阅类似的](http://www.cs.utah.edu/personnel/mb/cs6230mb/week6/matmult2010.pdf)一些参考资料。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T21:56:50.517

最简单/最便携的方法是简单地读取一些数据，每个缓存行字节分开。假设 tab 是一个合适的二维数组，你可以：

```
char *tptr = (char *)&tab[0][0];
tptr += 64;
char temp;
volatile char keep_temp_alive;
for(int i = 0; i < N; i++)
{
    temp += *tptr;
    tptr += 64;
    for(j = 0; j < M; j++)
        count += tab[i][j];
}
keep_temp_alive = temp; 
```

类似的东西。但是，它确实取决于： 1\. 您最终不会在分配的内存之外读取 [太多]。2\. J 循环并不比 64 字节大多少。如果是，您可能希望`temp += *tptr; tptr += 64;`在循环的开头添加更多步骤。

after 循环对于`keep_temp_alive`防止编译器完全删除 temp 作为不必要的负载至关重要。

不幸的是，我编写通用代码的速度太慢，无法建议内置指令，这点归功于 Leonid。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-18T06:50:09.017

该`__builtin_prefetch`指令非常有用，但特定于 clang/gcc。如果您要编译到多个编译器目标，我很幸运地使用了 x86 内在函数`_mm_prefetch`以及 clang 和 MSVC。

[https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_prefetch](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_prefetch)

# javascript - 一个包中有多个 package.json 文件

> ID：14246977
> 
> 赞同：40
> 
> 时间：2013-01-09T21:38:15.230
> 
> 标签：javascript, node.js, dependencies, npm

我有一个在 php 上运行的站点，它使用 Node 来完成一些开发任务。目前，我们的团队依靠 puppet 来安装我们用于这些开发任务的节点模块，但是，我正在考虑转而使用站点根目录中的 package.json 文件。

我的问题是这样的：

我的 php 应用程序实际上是 3 个独立的站点，我们将它们混合为一个（1 个面向公众的站点、1 个内部站点、1 个面向客户端的站点），并且它的某些应用程序安装可能依赖于不同的节点包（或不同版本的相同的包装）。虽然我知道将这些应用程序分开并让每个应用程序管理自己的依赖项会很好，但除此之外，是否有某种方法可以在一个站点中拥有多个 package.json 文件？

换句话说：

```
/package.json
/site1/package.json
/site2/package.json
/site3/package.json 
```

或者，有没有办法让一个 package.json 处理多个应用程序的依赖关系？

我不知道这是否有意义，让我知道我是否只是在这里的左外野。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T07:14:46.847

据我所见，package.json 处理单个目录的依赖项（和 node_modules 的单个实例）。

最好的办法是将应用程序拆分到单独的目录中。

除此之外，您可以将所有依赖项添加到单个 package.json 文件中。它将安装到 node_modules 文件夹中，并且该目录中的任何应用程序都可以访问所有已安装的模块。

# .net - VB Linq 双分组错误

> ID：14246979
> 
> 赞同：0
> 
> 时间：2013-01-09T21:38:17.303
> 
> 标签：.net, vb.net, linq

我的 VB 代码中有一个数据表，我想将它分成两个级别（换句话说，在另一个组中分组），但我在做这件事时遇到了问题。

为了便于说明，假设我的数据`MyTable`表 , 具有如下列：

```
Name1     Name2    Start_Date    End_Date   Var1    Var2 
```

因此，假设我只想将其分组，例如`Name1`，我可以按以下方式进行：

```
Dim Query1 = From dr as DataRow in MyTable
             Group dr by Name1 = dr.Item("Name1") into Group 
```

然后我可以遍历该组中的所有记录，执行以下操作：

```
For Each Grp in Query1
   For Each dr as DataRow in Grp.Rows
      ... do whatever ...
   Next
Next 
```

现在，我想创建一个双组 - 例如，假设我想创建一个内存查询，首先分组，然后在该`Start_Date`组内`End_Date`，第二个分组，`Name1`这样我就可以编写一个循环：

```
For Each MainGrp in BiggerQuery
   For Each SubGrp in MainGrp
        For Each dr as DataRow in SubGrp .Rows
            ... do whatever ...
        Next
   Next
Next 
```

这个双分组 Linq 查询在 VB 中的外观如何？- 我的第一个问题是，VB 似乎要求您命名您的 group `Group`，这不允许双重分组，其次，我似乎无法弄清楚整个查询。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:45:20.660

```
Dim query = From dr1 As DataRow In MyTable
            Group dr1 By New With { .StartDate = dr1.StartDate, .EndDate = dr1.EndDate } Into g1 = Group
            Select newGroup = (From dr2 As DataRow In g1
                    Group dr2 By dr2.Name1 Into g2 = Group
                    Select g2) 
```

我认为它应该可以工作，但现在无法测试。

**编辑**

MSDN 上有一个很好的嵌套分组示例：http: [//msdn.microsoft.com/en-us/vstudio/bb737908#grpbynest](http://msdn.microsoft.com/en-us/vstudio/bb737908#grpbynest)

**编辑2**

```
From dr1 As DataRow In myTable
Group dr1 By gi1 = New With {.StartDate = dr1.Item("StartDate"), .EndDate = dr1.Item("EndDate")} Into g1 = Group
Select newGroup = (From dr2 As DataRow In g1
                   Group dr2 By gi2 = dr2.Item("Name1") Into g2 = Group
                   Select g2) 
```

# performance - Perl 二维数组比较问题

> ID：14246980
> 
> 赞同：3
> 
> 时间：2013-01-09T21:38:23.200
> 
> 标签：performance, perl, multidimensional-array

我正在编写一个 perl 脚本，它审核一个库并将已安装软件的列表与另一台机器的列表进行比较，以确保它们使用相同的东西。我已经获取了原始数据并将其放入两个大小为二维的数组中，`Nx4`其中 N 是软件标题的数量。例如：

```
[Fileset1], [1.0.2.3], [COMMITTED], [Description of file]
[Fileset2], [2.4.2.2], [COMMITTED], [Description of a different file]
.... 
```

我现在需要比较这两个列表以找出差异，它们是否缺少级别差异的文件。还不是 perl 专业人士，我能想到的唯一方法是将第一个数组的每个元素与另一个数组的每个元素进行比较，以首先查找具有不同级别的匹配文件集或根本没有匹配的文件集。我必须用另一个列表重复这个过程，以确保我找到了所有可能的差异。显然，通过这个程序，我正在寻找大于 n^2 的效率。我想知道在比较超过 20,000 个条目的库时，是否有一些`grep`我可以使用的应用程序或类似的东西来避免这种情况。

简而言之，我需要比较两个二维数组并跟踪每个列表的差异，而不是仅仅找到两者的交集。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:13:24.083

输出有点笨拙，但我喜欢这样[`Data::Diff`](http://search.cpan.org/perldoc?Data%3a%3aDiff)的任务：

```
use Data::Diff 'Diff';
use Data::Dumper;

@a = ( ["Fileset1", "1.0.2.3", "COMMITTED", "Description of file" ],
       ["Fileset2", "2.4.2.2", "COMMITTED", "Description of a different file" ],
       ["Fileset3", "1.2.3.4", "COMMITTED", "Description of a different file" ] );

@b = ( ["Fileset1", "1.0.2.3", "COMMITTED", "Description of file" ],
       ["Fileset2", "2.4.2.99", "COMMITTED", "Description of a different file" ] );    

$out = Diff(\@a,\@b);    
print Dumper($out); 
```

结果：

```
$VAR1 = {
  'diff' => [
    {
      'uniq_a' => [
        '2.4.2.2'
      ],
      'same' => [
        {
          'same' => 'COMMITTED',
          'type' => ''
        },
        {
          'same' => 'Description of a different file',
          'type' => ''
        },
        {
          'same' => 'Fileset2',
          'type' => ''
        }
      ],
      'type' => 'ARRAY',
      'uniq_b' => [
        '2.4.2.99'
      ]
    }
  ],
  'uniq_a' => [
    [
      'Fileset3',
      '1.2.3.4',
      'COMMITTED',
      'Description of a different file'
    ]
  ],
  'same' => [
    {
      'same' => [
        {
          'same' => '1.0.2.3',
          'type' => ''
        },
        {
          'same' => 'COMMITTED',
          'type' => ''
        },
        {
          'same' => 'Description of file',
          'type' => ''
        },
        {
          'same' => 'Fileset1',
          'type' => ''
        }
      ],
      'type' => 'ARRAY'
    }
  ],
  'type' => 'ARRAY'
}; 
```

# javascript - 如何将容器包裹在其 css 转换的内容周围？

> ID：14246982
> 
> 赞同：3
> 
> 时间：2013-01-09T21:38:32.607
> 
> 标签：javascript, html, css, webkit, css-transforms

当我使用`scale`or`rotate`时，父元素将换行到元素的预翻译尺寸的大小。

[JSFiddle 示例](http://jsfiddle.net/hughes/hztmv/)

![转换后的图像](../Images/0d1d3c59b1bc500d26bd77aee3216110.png)

有没有办法用 CSS 将父容器包裹在转换元素的边界框周围，还是我需要使用数学来手动定位东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:50:08.693

[基于这个早先的问题](https://stackoverflow.com/questions/7565542/width-height-after-transform)，听起来您需要使用一些数学和javascript来更改包装器。

通过使用答案中的函数，您可以根据刚刚计算的尺寸设置包装器尺寸。

# python - 在 unittest 中比较（断言相等）两个包含 numpy 数组的复杂数据结构

> ID：14246983
> 
> 赞同：27
> 
> 时间：2013-01-09T21:38:40.147
> 
> 标签：python, unit-testing, numpy

我使用 Python 的`unittest`模块，想检查两个复杂的数据结构是否相等。对象可以是具有各种值的字典列表：数字、字符串、Python 容器（列表/元组/字典）和`numpy`数组。后者是问这个问题的原因，因为我不能只是做

```
self.assertEqual(big_struct1, big_struct2) 
```

因为它产生一个

```
ValueError: The truth value of an array with more than one element is ambiguous.
Use a.any() or a.all() 
```

我想我需要为此编写自己的平等测试。它应该适用于任意结构。我目前的想法是一个递归函数：

*   尝试将当前“节点”`arg1`与 的相应节点进行直接比较`arg2`；
*   如果没有引发异常，则继续（“终端”节点/叶子也在此处处理）；
*   如果`ValueError`被捕获，则继续深入，直到找到一个`numpy.array`;
*   比较数组（例如[像这样](https://stackoverflow.com/a/10580782/1258041)）。

跟踪两个结构的“对应”节点似乎有点问题，但也许`zip`我在这里只需要。

**问题是：这种方法是否有更好（更简单）的替代方案？**也许`numpy`为此提供一些工具？如果没有建议替代方案，我将实施这个想法（除非我有更好的想法）并作为答案发布。

PS我有一种模糊的感觉，我可能已经看到了一个解决这个问题的问题，但我现在找不到它。

PPS 另一种方法是遍历结构并将所有`numpy.array`s 转换为列表的函数，但这更容易实现吗？对我来说似乎一样。

* * *

**编辑：**子类`numpy.ndarray`化听起来很有希望，但显然我没有将比较的双方硬编码到测试中。但是，其中一个确实是硬编码的，所以我可以：

*   `numpy.array`用;的自定义子类填充它
*   更改`isinstance(other, SaneEqualityArray)`为[**jterrace**](https://stackoverflow.com/a/14249234/1258041)`isinstance(other, np.ndarray)`的[答案](https://stackoverflow.com/a/14249234/1258041)；[](https://stackoverflow.com/a/14249234/1258041)
***   在比较中始终将其用作 LHS。**

 **我在这方面的问题是：

1.  它会起作用吗（我的意思是，这对我来说听起来不错，但可能无法正确处理一些棘手的边缘情况）？如我所料，我的自定义对象在递归相等检查中总是以 LHS 结尾吗？
2.  同样，有没有更好的方法（假设我得到了至少一个带有真实`numpy`数组的结构）。

* * *

**编辑2**：我试过了，[这个答案](https://stackoverflow.com/a/14276901/1258041)中显示了（看似）工作的实现。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T02:02:22.667

本来可以评论的，但是太长了...

有趣的事实是，你不能用它`==`来测试数组是否相同，我建议你[`np.testing.assert_array_equal`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.testing.assert_array_equal.html)改用它。

1.  检查 dtype、shape 等，
2.  这不会因为`(float('nan') == float('nan')) == False`（正常的 python 序列*有时会*`==`以一种更有趣的方式忽略它）而失败，因为它使用which 进行（对于 NaN 不正确的）快速检查（用于测试当然是完美的）.. .*`PyObject_RichCompareBool``is`*
**   还有一个原因是，如果您进行实际计算并且您通常想要*几乎*`assert_allclose`相同的值，浮点相等可能会变得非常棘手，因为这些值可能取决于硬件或可能是随机的，具体取决于您对它们的处理方式。*

 **如果您想要这种疯狂嵌套的东西，我几乎建议您尝试使用 pickle 对其进行序列化，但这过于严格（然后第 3 点当然完全被破坏了），例如，您的数组的内存布局无关紧要，但对它很重要序列化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T01:07:28.040

该`assertEqual`函数将调用`__eq__`对象的方法，该方法应针对复杂数据类型进行递归。例外是 numpy，它没有健全的`__eq__`方法。使用[此问题中的 numpy 子类](https://stackoverflow.com/a/6065203/624900)，您可以恢复平等行为的理智：

```
import copy
import numpy
import unittest

class SaneEqualityArray(numpy.ndarray):
    def __eq__(self, other):
        return (isinstance(other, SaneEqualityArray) and
                self.shape == other.shape and
                numpy.ndarray.__eq__(self, other).all())

class TestAsserts(unittest.TestCase):

    def testAssert(self):
        tests = [
            [1, 2],
            {'foo': 2},
            [2, 'foo', {'d': 4}],
            SaneEqualityArray([1, 2]),
            {'foo': {'hey': SaneEqualityArray([2, 3])}},
            [{'foo': SaneEqualityArray([3, 4]), 'd': {'doo': 3}},
             SaneEqualityArray([5, 6]), 34]
        ]
        for t in tests:
            self.assertEqual(t, copy.deepcopy(t))

if __name__ == '__main__':
    unittest.main() 
```

该测试通过。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-11T11:09:38.110

所以[jterrace](https://stackoverflow.com/a/14249234/1258041)说明的想法似乎对我有用，只需稍作修改：

```
class SaneEqualityArray(np.ndarray):
    def __eq__(self, other):
        return (isinstance(other, np.ndarray) and self.shape == other.shape and 
            np.allclose(self, other)) 
```

就像我说的，包含这些对象的容器应该在相等检查的左侧。我从现有的 s 创建`SaneEqualityArray`对象，`numpy.ndarray`如下所示：

```
SaneEqualityArray(my_array.shape, my_array.dtype, my_array) 
```

按照`ndarray`构造函数签名：

```
ndarray(shape, dtype=float, buffer=None, offset=0,
        strides=None, order=None) 
```

此类在测试套件中定义，仅用于测试目的。相等检查的 RHS 是被测试函数返回的一个实际对象，包含真实`numpy.ndarray`对象。

PS 感谢迄今为止发布的两个答案的作者，他们都非常有帮助。如果有人发现这种方法有任何问题，我会很感激您的反馈。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T01:13:39.003

我将定义我自己的 assertNumpyArraysEqual() 方法，该方法明确地进行您想要使用的比较。这样，您的生产代码不会改变，但您仍然可以在单元测试中做出合理的断言。确保在包含的模块中定义它，`__unittest = True`以便它不会包含在堆栈跟踪中：

```
import numpy
__unittest = True

def assertNumpyArraysEqual(self, other):
    if self.shape != other.shape:
        raise AssertionError("Shapes don't match")
    if not numpy.allclose(self, other)
        raise AssertionError("Elements don't match!") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-19T10:53:07.210

检查`numpy.testing.assert_almost_equal`哪个[“如果两个项目不等于所需的精度，则引发 AssertionError”](http://docs.scipy.org/doc/numpy/reference/generated/numpy.testing.assert_almost_equal.html)，例如：

```
 import numpy.testing as npt
 npt.assert_almost_equal(np.array([1.0,2.3333333333333]),
                         np.array([1.0,2.33333334]), decimal=9) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-01T08:23:57.200

我遇到了同样的问题，并开发了一个函数来基于为对象创建一个固定的哈希来比较相等性。这具有额外的优势，您可以通过将对象的哈希值与代码中支持的固定值进行比较来测试对象是否符合预期。

代码（一个独立的 python 文件，[在这里](https://github.com/QUVA-Lab/artemis/blob/master/artemis/general/hashing.py)）。有两个函数：`fixed_hash_eq`，它可以解决您的问题，以及`compute_fixed_hash`，它从结构中生成哈希。 [测试在这里](https://github.com/QUVA-Lab/artemis/blob/master/artemis/general/test_hashing.py)

这是一个测试：

```
obj1 = [1, 'd', {'a': 4, 'b': np.arange(10)}, (7, [1, 2, 3, 4, 5])]
obj2 = [1, 'd', {'a': 4, 'b': np.arange(10)}, (7, [1, 2, 3, 4, 5])]
obj3 = [1, 'd', {'a': 4, 'b': np.arange(10)}, (7, [1, 2, 3, 4, 5])]
obj3[2]['b'][4] = 0
assert fixed_hash_eq(obj1, obj2)
assert not fixed_hash_eq(obj1, obj3) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-30T21:55:02.120

在@dbw 的基础上（感谢），插入到测试用例子类中的以下方法对我来说效果很好：

```
 def assertNumpyArraysEqual(self,this,that,msg=''):
    '''
    modified from http://stackoverflow.com/a/15399475/5459638
    '''
    if this.shape != that.shape:
        raise AssertionError("Shapes don't match")
    if not np.allclose(this,that):
        raise AssertionError("Elements don't match!") 
```

我`self.assertNumpyArraysEqual(this,that)`在我的测试用例方法中调用了它，并且像一个魅力一样工作。****

# google-places-api - Google Places API：基于类别的全国搜索

> ID：14246984
> 
> 赞同：2
> 
> 时间：2013-01-09T21:38:44.273
> 
> 标签：google-places-api

我想为整个国家（比如印度）而不是附近的地方建立一个特定类别（比如电影剧院）的位置坐标数据库。假设有 5000 个这样的地方。这是我打算使用的：

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=movie+theatre+near+india&sensor=false&key=My_key](https://maps.googleapis.com/maps/api/place/textsearch/json?query=movie+theatre+near+india&sensor=false&key=My_key)

有更好的方法吗？我也不能使用雷达搜索，因为它被限制在 50 公里的半径内。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T02:33:34.127

在电影院的特定情况下，由于它们位于人们定居的地方，因此在人口居住的地区进行搜索更有意义；即城市、城镇和村庄。

为此，您需要从国家人口普查局获取大量城市、城镇和村庄列表（如果是印度，请参见[此处](http://censusindia.gov.in/2011-prov-results/paper2/data_files/India2/Table_3_PR_UA_Citiees_1Lakh_and_Above.pdf)和[此处](http://www.censusindia.gov.in/2011census/Listofvillagesandtowns.aspx)），然后对每个进行搜索。

另外，请参阅此[答案](https://stackoverflow.com/questions/14026759/how-to-get-all-places-or-specific-type-of-place-such-as-a-restaurant-in-a-city?rq=1)。

# jsf - WebSeal JSF 上下文路径剥离连接名称

> ID：14246990
> 
> 赞同：0
> 
> 时间：2013-01-09T21:39:24.467
> 
> 标签：jsf, contextpath, junction, webseal

我们使用 WAS 和 IHS 作为服务器，使用 WebSEAL 作为反向代理。应用程序是使用 JSF 2.0 开发的，并使用 .xhtml 页面进行查看。

问题：`${facesContext.externalContext.requestContextPath}`用于生成 JavaScript 和 CSS 文件的上下文。当通过 WebSEAL 访问应用程序时，获取 JavaScript 文件的正确上下文，但 CSS 上下文缺少 webSEAL 联结名称。

在源代码中： **JS 包含为：**

```
<script src="${facesContext.externalContext.requestContextPath}/js/jquery/jquery-1.6.1.min.js" type="text/javascript"></script> 
```

**CSS 包含为：**

```
var cssElement = document.createElement("link");
cssElement.setAttribute("rel", "stylesheet");
cssElement.setAttribute("type", "text/css");
cssElement.setAttribute("href", "${facesContext.externalContext.requestContextPath}/css/stylecontent.css"); 
```

**在浏览器上呈现的链接：** 对于 JavaScript（它具有上下文名称）：

```
<script src="/junction/appcontext/js/jquery/jquery-1.6.1.min.js" type="text/javascript"></script> 
```

对于 CSS：

```
<link href="/appcontext/css/stylecontent.css" rel="stylesheet" type="text/css"/> 
```

因此，CSS 文件不会加载到页面上。

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:35:56.393

Just incase some one is stuck with the same problem: It got resolved by making some configuration at the WebSEAL junction level. by default, WebSEAL looks for static resources on the the server itself, hence it strips the junction off. Settings need to be applied to "look for resources under the junction"

# codeigniter - Chrome 上的 codeigniter 会话问题

> ID：14246991
> 
> 赞同：0
> 
> 时间：2013-01-09T21:39:27.837
> 
> 标签：codeigniter, session

我在 Chrome 上使用数据库的 codeigniter 会话存在严重问题：当我使用 chrome 开发人员工具并刷新页面时，会话被破坏。

这是我的会话配置：

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE; 
$config['sess_table_name']      = 'cisessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T00:49:47.967

你确定会话被破坏了吗？我认为它只是没有按预期更新，它会在每个页面请求上创建一个新的。（常见的 Codeigniter 的设置问题）

**这是我的建议：**

仔细检查您的 Application/Config/config.php 文件，以确保如果您将站点托管在主目录上，则会话域的部分看起来像这样：

```
$config['cookie_prefix']    = "";
$config['cookie_domain']    = "yourdomain.com";
$config['cookie_path']  = "var/sessions/";
$config['cookie_secure']    = FALSE; 
```

如果您将站点托管在子目录中，就像这样：

```
$config['cookie_prefix']    = "";
$config['cookie_domain']    = "yourdomain.com";
$config['cookie_path']  = "siteSubDirectory/var/sessions/";
$config['cookie_secure']    = FALSE; 
```

并且通过将它们的权限固定为755左右来确保这2个目录是可写的，我强烈建议您启用数据库会话，它更安全，并且可以通过检查会话表来帮助您找出真正的问题。祝你好运 ：）

# ajax - yii 控制器动作不会从表单触发

> ID：14246997
> 
> 赞同：0
> 
> 时间：2013-01-09T21:39:38.047
> 
> 标签：ajax, yii

我正在尝试使用 yii 进行简单的 ajax 调用，而不是使用本机 yii 方式。我的目标是使用创建操作中的数据库查找来填充来自邮政编码字段的输入的州和城市字段。我有一个单独的 javascript 文件，

 `````
 $('#Accounts_zip').bind('focusout',function(){     
    $.ajax({
        type: 'POST',
          url:'/gatesadmin/index.php?r=Accounts/Ziplookup',
          data: {zip:$('#Accounts_zip').val()},
          success:  function(datain, textStatus, jqXHR) {alert(datain.statecode);} ,
          error: function(jqxhr, textStatus, errorthrown){alert(errorthrown);},
          dataType:JSON
       });
    alert($('#Accounts_zip').val());
    }); 
```

and in my AccountsController I have:

 ````
public function actionZiplookup()
{
    $z = new ZipDao();
    $row = $z->GetCityStateByZip($_REQUEST['data']);
    header('Content-Type: application/json; charset="UTF-8"');
    echo CJSON::encode(array('output'=>$row));
} 
```

and my form is out of the box generated CRUD:` 

```
...
    <div class="row">
    <?php echo $form->labelEx($model,'zip'); ?>
    <?php echo $form->textField($model,'zip',array('size'=>10,'maxlength'=>10)); ?>
    <?php echo $form->error($model,'zip'); ?>
</div>
... 
```

我知道 javascript 正在工作，因为我收到了警报，如果我直接调用 URL，yii 会触发 actionZiplookup 事件，因为我得到了返回的 json。我似乎无法让表单成功调用 ajax，因为我在 jquery ajax 失败事件中收到外部服务器错误。我已经梳理了网络和最接近的示例，我可以找到将 javascript 嵌入表单本身并使用 Yii::app()-createUrl() 方法来定义 url，但必须有一种方法来获取控制器将 javascript 代码保存在单独的文件中时触发的操作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:59:51.547

原来我所缺少的可以在这里找到： [How to get response as json format(application/json) in yii?](https://stackoverflow.com/questions/2824805/how-to-get-response-as-json-formatapplication-json-in-yii) 这一切都与告诉控制器忽略布局等有关。``

# excel - 从格式化时间中减去 5 分钟并用秒重新格式化答案

> ID：14246999
> 
> 赞同：0
> 
> 时间：2013-01-09T21:39:58.117
> 
> 标签：excel, vba

> **可能重复：**
> [VBA Excel：一次加一秒](https://stackoverflow.com/questions/8875567/vba-excel-add-one-second-to-a-time)

我有一个 Excel 电子表格，其时间值格式为自定义 00"00"。我想从这个值中减去 5 分钟，并使用 Excel VBA 将答案格式化为 hh:mm:ss。我已经看遍了，但没有找到答案。我尝试使用各种时间函数，但运气不佳。我是一个新的 Excel VBA 程序员。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:47:30.830

如果 Cell 拥有一个*真实的*日期时间值，你可以使用这样的东西：

```
Cells(r, c).Value = DateAdd("n", -5, Cells(r, c).Value)
Cells(r, c).NumberFormat = "hh:mm:ss" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:46:28.757

我不知道自定义格式`00"00"`应该做什么，但既然你说你有“......带有时间值的电子表格......”我假设基础数据是日期/时间序列号。

如果是这样的话

```
Dim cl as Range
Set cl = Range("YourCellAddress")
cl = cl - 5# / 1440# ' subtract 5 minutes
cl.NumberFormat = "hh:mm:ss" ' format 
```