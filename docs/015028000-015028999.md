# StackOverflow 问答 15028000-15028999

# c# - 优先订阅调用

> ID：15028003
> 
> 赞同：2
> 
> 时间：2013-02-22T15:51:10.777
> 
> 标签：c#, .net, system.reactive

我有一个可观察的消息序列。有一组订阅者可以处理这些消息。每个订阅者都有一个执行优先级。每条消息必须由从当前订阅的订阅者列表中选择的最高优先级订阅者处理一次。订阅者不断地订阅/取消订阅序列，因此我们在构建序列时不知道订阅者的数量和优先级。使用 rx 是一种可能/可行的解决方案吗？

为了显示：

```
public class Message
{
    public string Value { get; set; }
    public bool IsConsumed { get; set; }
}

var subject = new Subject<Message>();
var sequence = subject.Publish().RefCount();

Action<Message, int> subscriber = (m, priority) =>
{
    if (!m.IsConsumed)
    {
        m.IsConsumed = true;
        Trace.WriteLine(priority);
    }
};

var s2 = sequence.Priority(2).Subscribe(m => subscriber(m, 2));
var s1 = sequence.Priority(1).Subscribe(m => subscriber(m, 1));

subject.OnNext(new Message()); // output: 1

s1.Dispose();
subject.OnNext(new Message()); // output: 2 
```

使该解决方案起作用的缺失部分是 Rx 库中不存在的 Priority 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:46:08.697

这是一个非常有趣的问题......

所以，首先：我不知道有任何内在的 Rx 运算符可以实现类似于您在此`Priority`扩展中想要的“路由”效果。

也就是说，我今天午餐时在 LINQPad 上玩耍，并想出了一个（非常）hacky 的概念证明，它似乎有效：

一、你的消息类

```
public class Message
{
    public string Value { get; set; }
    public bool IsConsumed { get; set; }
} 
```

接下来，扩展方法wrapper-class：

```
public static class Ext
{    
    public static PrioritizedObservable<T> Prioritize<T>(this IObservable<T> source)
    {
        return new PrioritizedObservable<T>(source);
    }
} 
```

这是什么`PrioritizedObservable<T>`？

```
public class PrioritizedObservable<T> 
   : IObservable<T>, IObserver<T>, IDisposable
{
    private IObservable<T> _source;
    private ISubject<T,T> _intermediary;
    private IList<Tuple<int, Subject<T>>> _router;

    public PrioritizedObservable(IObservable<T> source)
    {
        // Make sure we don't accidentally duplicate subscriptions
        // to the underlying source
        _source = source.Publish().RefCount();

        // A proxy from the source to our internal router
        _intermediary = Subject.Create(this, _source);
        _source.Subscribe(_intermediary);        

        // Holds per-priority subjects
        _router = new List<Tuple<int, Subject<T>>>();
    }

    public void Dispose()
    {
        _intermediary = null;
        foreach(var entry in _router)
        {
            entry.Item2.Dispose();
        }
        _router.Clear();
    }

    private ISubject<T,T> GetFirstListener()
    {
        // Fetch the first subject in our router
        // ordered by priority 
        return _router.OrderBy(tup => tup.Item1)
            .Select(tup => tup.Item2)
            .FirstOrDefault();
    }

    void IObserver<T>.OnNext(T value)
    {
        // pass along value to first in line
        var nextListener = GetFirstListener();
        if(nextListener != null)
            nextListener.OnNext(value);
    }

    void IObserver<T>.OnError(Exception error)
    {
        // pass along error to first in line
        var nextListener = GetFirstListener();
        if(nextListener != null)
            nextListener.OnError(error);
    }

    void IObserver<T>.OnCompleted()
    {
        var nextListener = GetFirstListener();
        if(nextListener != null)
            nextListener.OnCompleted();
    }

    public IDisposable Subscribe(IObserver<T> obs)
    {
        return PrioritySubscribe(1, obs);
    }

    public IDisposable PrioritySubscribe(int priority, IObserver<T> obs)
    {
        var sub = new Subject<T>();
        var subscriber = sub.Subscribe(obs);
        var entry = Tuple.Create(priority, sub);
        _router.Add(entry);
        _intermediary.Subscribe(sub);
        return Disposable.Create(() => 
        {
            subscriber.Dispose();
            _router.Remove(entry);
        });
    }
} 
```

和一个测试工具：

```
void Main()
{
    var subject = new Subject<Message>();
    var sequence = subject.Publish().RefCount().Prioritize();

    Action<Message, int> subscriber = (m, priority) =>
    {
        if (!m.IsConsumed)
        {
            m.IsConsumed = true;
            Console.WriteLine(priority);
        }
    };

    var s3 = sequence.PrioritySubscribe(3, Observer.Create<Message>(m => subscriber(m, 3)));
    var s2 = sequence.PrioritySubscribe(2, Observer.Create<Message>(m => subscriber(m, 2)));
    var s1 = sequence.PrioritySubscribe(1, Observer.Create<Message>(m => subscriber(m, 1)));
    var s11 = sequence.PrioritySubscribe(1, Observer.Create<Message>(m => subscriber(m, 1)));

    subject.OnNext(new Message()); // output: 1

    s1.Dispose();
    subject.OnNext(new Message()); // output: 1
    s11.Dispose();

    subject.OnNext(new Message()); // output: 2
    s2.Dispose();
    subject.OnNext(new Message()); // output: 3

    sequence.Dispose();

} 
```

# c# - 如何通过另一个下拉列表中的操作填充下拉列表？

> ID：15028007
> 
> 赞同：0
> 
> 时间：2013-02-22T15:51:38.107
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我正在使用 MVC 4.0，我需要一个包含 3 个下拉列表和一个表格的页面。

当从 DDL1（例如用户）中选择一个项目时，会填充 DDL2（例如帐户）。当从 DDL2（帐户）中选择一个项目时，会填充 DDL3（例如卡）。当从 DDL3 中选择一个项目时，表格必须显示一个对象列表，例如交易（包括金额等）。

所以我创建了一个 TransactionManagementController 并创建了一个 Index Action 来加载用户并最初显示它们。

```
 public ActionResult Index()
        {
            var vm = new VmTransactionManagement
                {
                    Users = db.Users.ToList()
                };

            return View(vm);
        }

<th>User:</th>
        <td>@Html.DropDownListFor(m => m.SelectedUser,
                                  Model.UsersSelectList,
                                  "-- Select One --")</td> 
```

另外，我为这个控制器创建了一个视图模型：VmTransactionManagement，其中包含一些其他需要的对象。

那么，现在我将如何编码以便在选择 DDL1 时（传递 userId），然后填充 DDL2？

我应该创建一个新的动作/视图并通过 Ajax 调用它吗？

如果我创建一个新动作，那么我将不得不创建一个新视图来更改先前选择的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:58:47.633

当我需要级联下拉列表时，我将使用 jQuery`$.load`并渲染 PartialView。使用技术的示例位于[https://stackoverflow.com/a/1721623/1015010](https://stackoverflow.com/a/1721623/1015010)

# servicestack - ServiceStack POST 空体的招摇

> ID：15028012
> 
> 赞同：2
> 
> 时间：2013-02-22T15:52:03.580
> 
> 标签：servicestack, swagger

我[对 ServiceStack 的 Swagger 插件](http://nuget.org/packages/ServiceStack.Api.Swagger/)有一些问题。我已经为我的服务配置了路由描述，但生成的 POST 不包含正文。

我的服务如下所示：

```
/// <summary>
/// Define your ServiceStack web service request (i.e. Request DTO).
/// </summary>
/// <remarks>The route is defined here rather than in the AppHost.</remarks>
[Api("GET or DELETE a single movie by Id. Use POST to create a new Movie and PUT to update it")]
[Route("/movie", "POST", Summary = @"POST a new movie", Notes = "Send a movie here")]
[Route("/movie/{Id}", "GET,PUT,DELETE", Summary = @"GET, PUT, or DELETE a movie", Notes = "GET a specific movie by Id, or PUT a thing, or delete a movie")]
public class Movie
{
    /// <summary>
    /// Initializes a new instance of the movie.
    /// </summary>
    public Movie()
    {
        this.Genres = new List<string>();
    }

    /// <summary>
    /// Gets or sets the id of the movie. The id will be automatically incremented when added.
    /// </summary>
    //[AutoIncrement]
    [ApiMember(Name = "Id", Description = "The Id of this movie", ParameterType = "body", DataType = "string", IsRequired = false)]
    public string Id { get; set; }

    [ApiMember(Name = "ImdbId", Description = "The ImdbId of this movie", ParameterType = "body", DataType = "string", IsRequired = false)]
    public string ImdbId { get; set; }

    [ApiMember(Name = "Title", Description = "The Title of this movie", ParameterType = "body", DataType = "string", IsRequired = false)]
    public string Title { get; set; }

    [ApiMember(Name = "Rating", Description = "The Rating of this movie", ParameterType = "body", DataType = "decimal", IsRequired = false)]
    public decimal Rating { get; set; }

    [ApiMember(Name = "Director", Description = "The Director of this movie", ParameterType = "string", DataType = "string", IsRequired = false)]
    public string Director { get; set; }

    [ApiMember(Name = "ReleaseDate", Description = "The ReleaseDate of this movie", ParameterType = "string", DataType = "Date", IsRequired = false)]
    public DateTime ReleaseDate { get; set; }

    [ApiMember(Name = "TagLine", Description = "The TagLine of this movie", ParameterType = "string", DataType = "string", IsRequired = false)]
    public string TagLine { get; set; }

    [ApiMember(Name = "Genres", Description = "The Genres of this movie", ParameterType = "string", DataType = "string", IsRequired = false)]
    public List<string> Genres { get; set; }
}

/// <summary>
/// Define your ServiceStack web service response (i.e. Response DTO).
/// </summary>
public class MovieResponse
{
    /// <summary>
    /// Gets or sets the movie.
    /// </summary>
    public Movie Movie { get; set; }
}

/// <summary>
/// Create your ServiceStack restful web service implementation. 
/// </summary>
public class MovieService : Service
{
    public IMovieRepository MovieRepository { get; set; }

    /// <summary>
    /// GET /movies/{Id} 
    /// </summary>
    public MovieResponse Get(Movie movie)
    {
        var item = MovieRepository.FindOne(new ObjectId(movie.Id));

        return new MovieResponse
        {
            Movie = item,
        };
    }

    /// <summary>
    /// POST /movies
    /// 
    /// returns HTTP Response => 
    ///     201 Created
    ///     Location: http://localhost/ServiceStack.MovieRest/movies/{newMovieId}
    ///     
    ///     {newMovie DTO in [xml|json|jsv|etc]}
    /// 
    /// </summary>
    public object Post(Movie movie)
    {
        MovieRepository.Save(movie);
        var newMovieId = movie.Id;

        var newMovie = new MovieResponse
        {
            Movie = MovieRepository.FindOne(new ObjectId(movie.Id))
        };

        return new HttpResult(newMovie)
        {
            StatusCode = HttpStatusCode.Created,
            Headers = {
                { HttpHeaders.Location, base.Request.AbsoluteUri.CombineWith(newMovieId) }
            }
        };
    }

    /// <summary>
    /// PUT /movies/{id}
    /// </summary>
    public object Put(Movie movie)
    {
        MovieRepository.Save(movie);

        return new HttpResult
        {
            StatusCode = HttpStatusCode.NoContent,
            Headers = {
                { HttpHeaders.Location, this.RequestContext.AbsoluteUri.CombineWith(movie.Id) }
            }
        };
    }

    /// <summary>
    /// DELETE /movies/{Id}
    /// </summary>
    public object Delete(Movie request)
    {
        MovieRepository.Remove(new ObjectId(request.Id));

        return new HttpResult
        {
            StatusCode = HttpStatusCode.NoContent,
            Headers = {
                { HttpHeaders.Location, this.RequestContext.AbsoluteUri.CombineWith(request.Id) }
            }
        };
    }
}

/// <summary>
/// Define your ServiceStack web service request (i.e. Request DTO).
/// </summary>
/// <remarks>The route is defined here rather than in the AppHost.</remarks>
[Api("Find movies by genre, or all movies if no genre is provided")]
[Route("/movies", "GET, OPTIONS")]
[Route("/movies/genres/{Genre}")]
public class Movies
{
    public string Genre { get; set; }
}

/// <summary>
/// Define your ServiceStack web service response (i.e. Response DTO).
/// </summary>    
public class MoviesResponse
{
    /// <summary>
    /// Gets or sets the list of movies.
    /// </summary>

    public List<Movie> Movies { get; set; }
}

/// <summary>
/// Create your ServiceStack RESTful web service implementation. 
/// </summary>
public class MoviesService : Service
{
    public IMovieRepository MovieRepository { get; set; }

    /// <summary>
    /// GET /movies 
    /// GET /movies/genres/{Genre}
    /// </summary>
    public object Get(Movies request)
    {
        return new MoviesResponse
        {
            Movies = MovieRepository.FindAll().ToList()
        };
    }
} 
```

Swagger 界面似乎已正确拾取元素：

![在此处输入图像描述](../Images/5836858f5b4656f0f8ad89778d1f771f.png)

结果是 500 错误：

```
POST http://localhost:57853/movie HTTP/1.1
Host: localhost:57853
Connection: keep-alive
Content-Length: 0
Accept: application/json, text/javascript, */*; q=0.01
Origin: http://localhost:57853
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
Content-Type: application/json
Referer: http://localhost:57853/swagger-ui/index.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en;q=0.8,en-US;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

Swagger 不附加 POST 正文。内容长度：0。结果是一个空的请求对象，这会导致 NullReferenceException。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T04:38:55.517

我看到的几个问题...

*   我认为您正在尝试使用 Swagger-UI 模仿表单帖子。这个功能刚刚在上个月被添加到 swagger ( [https://github.com/wordnik/swagger-core/issues/69](https://github.com/wordnik/swagger-core/issues/69) ) 中，所以我认为它在 Nuget 下载中不可用。

*   您看到的是一个空正文，因为您的 ParameterType 是 DTO 上每个属性的“正文”。Swagger 想要一个包含整个请求正文内容的“正文”值。它不会循环遍历您的每个“正文”属性来组成正文内容。如果您填充 Rating 文本框，您应该会在请求中看到它的值（Rating 是您的最后一个带有 'body' ParameterType 的属性）。

请参阅此处的示例[http://petstore.swagger.wordnik.com/#!/pet/addPet_post_1](http://petstore.swagger.wordnik.com/#!/pet/addPet_post_1)

使用 Chrome 或 Firebug，您可以在 swagger-ui.js 中的第 1182 行周围设置断点，以查看它如何构建请求正文内容（bodyParam 变量）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T12:42:45.113

请注意，最新版本的 ServiceStack.Api.Swagger 对 Swagger 中的请求正文文档的支持有了很大改进。要遵循当前的最佳实践，请确保从 NuGet 更新 ServiceStack.Api.Swagger（以及所有其他 ServiceStack 包）。确保在 Api.Swagger 更新中合并 HTML/JS/CSS 文件。将所有`ApiMember`属性替换为简单`Description`属性 (System.ComponentModel.DescriptionAttribute)。您不再需要 ApiMember 属性中的 Name 或 DataType 属性，因为 Swagger 代码将通过对您的请求 DTO 进行反射来自动检测到这一点。

请注意，使用最新的代码，您根本不需要任何`ApiMember`属性`ParameterType = "body"`。如果您没有此类属性，它将自动生成具有正确数据类型和文档的 Swagger 请求正文文本区域。

您可能需要为该`ApiMember`属性重新添加一个属性`Id`，`ParameterType = "path"`并`Verb = "PUT"`正确记录您的 PUT 请求。

# html - 根据不同的媒体查询改变内容

> ID：15028024
> 
> 赞同：0
> 
> 时间：2013-02-22T15:52:35.277
> 
> 标签：html, css, media-queries

这是这个问题的第二次尝试，因为自从我上次问以来我一直在研究这个问题，所以希望这次我会更有意义。

我正在为即将推出的页面创建响应式布局。主体标题根据浏览器和设备的大小而变化。

```
 <h1><span class="main__header--changer">COMING SOON</span></h1> 
```

...和CSS

```
 @media (max-width: 75em) {
      h1:before {
           content: "HOLD ONTO YOUR HATS";
      }
      .main__header--changer {
           display: none;
      }
 }

 @media (max-width: 64em) {
      h1:before {
           content: "NOT LONG TO GO";
      }
      .main__header--charger {
           display: none;
      }
 } 
```

... 以此类推，即将到来的不同变体包含的字母随着大小的减小而减少，一直到“nigh”。

我这样做的唯一方式意味着屏幕阅读器不会因为显示而阅读标题：无。是否有其他方法可以隐藏标题，但不是从屏幕阅读器中显示，而是从 CSS 中显示内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:32:29.080

您可以通过使用边距或 text-indent 属性将内容凸出到屏幕显示区域之外来创建隐藏效果。这些方法并不是我所说的 100% 干净的，但它们至少可以让您的 HTML 标记保持整洁。

查看这个[有用的线程](https://stackoverflow.com/questions/1755656/displaynone-vs-visibilityhidden-vs-text-indent9999-how-screen-reader-behave-w)，它解释了屏幕阅读器与 CSS 隐藏元素的交互。

我还假设在您的 CSS 中的第二个引用中您的意思是`--changer`not `--charger`。

附带说明一下，如果语句：`.main__header--changer {display: none;}`在所有媒体查询中都相同，您应该考虑在任何查询之外只编写一次，这样它就可以普遍适用，而不会在您的代码中重复。

希望这对您有所帮助！

# perl - 解释 Perl 中的 Jaro-Winkler 分数——Stata 中是否有替代方案？

> ID：15028028
> 
> 赞同：1
> 
> 时间：2013-02-22T15:52:45.013
> 
> 标签：perl, statistics, stata, jaro-winkler

Jaro-Winkler 分数应该有多大才能说这两个字符串可能相似，是否有行业标准？

我有一个字符串列表，我想看看它们中的任何一个是否是詹姆斯这个名字的合理印刷错误。我使用了用 C 编写的 perl 模块，反过来，我从 stata 中的数据集中收到了它的字符串。（所以如果有一个Stata模块，我会全神贯注！）

这是到目前为止我在 perl 中编写的用于与字符串 James 进行比较的代码。

```
 #!/usr/bin/perl

   use 5.10.0;
   use Text::JaroWinkler qw( strcmp95 );
   use List::Util qw(min max);

   open( my $l,  '<', 'Strings.txt' )          or die "Can't open locations: $!";
   open( my $o,  '>', 'JW.txt' )          or die "Can't open locations: $!";

   while ( my $line = <$l> ) {
    chomp($line);
    my $length = min(length($line),length('James'));
    my $jarow = strcmp95($line, 'JAMES', $length);
    print "$line,'JAMES',$jarow,\n" ;
    print( $o ("$line,'JAMES',$jarow"),"\n" );

  }
close $o; 
```

我也不确定我是否正确或有效地解释了 Jaro-Winkler 函数的第三个参数。也许我应该做 length('JAMES') ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:39:55.880

尝试从 SSC 用户编写的使用[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)`strgroup`进行匹配。它带有另一个命令，您可以使用它来执行此操作。一些玩具代码给你一个想法：`levenshtein`

```
ssc install strgroup

input str8 names
Bob
James
Jim
Jameson
end

gen james = "James"

levenshtein names james, gen(LD) 
```

然后，您可以按 LD 进行排序，以了解在您的情况下什么可能有效。

另一种方法是这样做，它为您创建组：

```
strgroup names , gen(group) threshold(0.5) 
```

玩弄门槛。

我认为不存在标准，这些程序仍然需要大量的手工工作。

# javascript - Internet Explorer 9 为隐藏元素返回 Null

> ID：15028030
> 
> 赞同：0
> 
> 时间：2013-02-22T15:52:46.657
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9

我有一个 javascript 块，可以在提交表单之前使用。它在 Internet Explorer 8 上运行良好。这是我的代码：

```
if(document.getElementById("Element1")){
      document.getElementById("Element2").value = document.getElementById("Element1").value;
} 
```

和元素：

```
<input type="hidden" name ="Element2"/> 
```

Internet Explorer 8 返回一个对象`document.getElementById("Element2")`，它显示`document.getElementById("Element2").value`为“”。但是 IE 9 返回`null`方法`getElementById`，所以我无法访问该值。

我看到IE9在获取元素方面做了一些改变，我该如何解决这个问题？该页面包含`Element2`所以我正在等待通过`getElementById`方法访问它的值。IE9 有什么新功能？

# hibernate - JAXB，休眠，延迟加载

> ID：15028031
> 
> 赞同：1
> 
> 时间：2013-02-22T15:52:46.883
> 
> 标签：hibernate, jaxb, resteasy

我在下面粘贴了一个简单的 Hibernate POJO（为简洁起见，删除了构造函数和设置器）。我的问题出在“用户”关系上。Hibernate 延迟加载关系就好了，但是当我的 CRUD webservice 调用（也在下面）编组这个对象的一个​​实例时，它调用关系的“get”方法，从而在 Hibernate 中抛出“No transaction”异常，因为 JAXB 没有访问会话或事务内部的关系。

POJO：

```
@Entity
@Table(name = "ldapservers", uniqueConstraints = @UniqueConstraint(columnNames = "hostname"))
@XmlRootElement(name = "ldap-server")
@SuppressWarnings("unused")
public class LdapServer implements Serializable
{
    private int ldapServerId;
    private String hostname;
    private int port;
    private Date createDate;
    private String createUser;
    private Set<User> users = new HashSet<User>(0);
    @Id 
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = "ldapServerID", unique = true, nullable = false)
    @XmlAttribute(name="id")
    public int getLdapServerId()
    {
        return this.ldapServerId;
    }
    @Column(name = "hostname", unique = true, nullable = false)
    @XmlElement
    public String getHostname()
    {
        return this.hostname;
    }
    @Column(name = "port", nullable = false)
    @XmlElement
    public int getPort()
    {
        return this.port;
    }
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "createDate", nullable = false, length = 19)
    @XmlAttribute(name="create-date")
    public Date getCreateDate()
    {
        return this.createDate;
    }
    @Column(name = "createUser", nullable = false)
    @XmlAttribute(name="create-user")
    public String getCreateUser()
    {
        return this.createUser;
    }
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "ldapServer")
    public Set<User> getUsers()
    {
        return this.users;
    }
} 
```

网络服务调用：

```
 @GET
@Path("/fetch/{id}")
@Produces("application/xml")
public LdapServer getLdapServer(@PathParam("id") int ldapServerID)
{
    logger.debug("Fetching LdapServer ID "+ldapServerID);
    LdapServer ls = this.home.findById(ldapServerID);

    if (ls!=null)
    {
        logger.debug("Found LdapServer ID "+ldapServerID);
    }
    else
    {
        logger.debug("LdapServer ID "+ldapServerID+" not found.");
    }

    return ls;
} 
```

我没有包含 DAO/EJB 代码，因为错误发生在 Resteasy 内部和此调用之外，表明问题发生在编组期间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:59:59.547

不久前我也遇到了同样的问题。我假设您在 resteasy 方法开始时打开了一个休眠会话和事务，并且您在方法结束时将其关闭。问题是延迟加载会向用户返回一个代理对象。您可以单步调试它并运行 ls.getUsers()。类型是代理。只有在您访问该代理中的某些内容时，它才会获取实际对象。在您的情况下，这发生在编组期间，但到那时，您的会话/事务已经关闭，因此您的错误出现了。如果您要在 resteasy 方法中访问类似 ls.getUsers.size() 的东西，那么代理现在将是您期望的实际对象，并且编组将起作用，但必须这样做似乎很麻烦。当我遇到问题时，我只是决定急切地避免这种混乱。然而现在，[https://hibernate.onjira.com/browse/HHH-7457](https://hibernate.onjira.com/browse/HHH-7457)

# php - 跨命名空间对象方向？

> ID：15028033
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:52:50.193
> 
> 标签：php, namespaces

在开发具有超级对象的面向对象的 HMVC 时，在应用程序过程中的某个时刻，它需要使用命名空间。在这里，命名空间将充当“版本化”不同代码的方法，这些代码可以以相同的方式访问。在下面的缩小示例中，`Foo`如果`qux`我在 version`A`或`B`. 我知道如果我使用`self::`而不是`$this`问题会消失，但是，我希望避免这种情况。目前，我收到以下 PHP 错误：

`Fatal error: Using $this when not in object context`

所以我的问题是，我如何`$this`在这种特定情况下使用？

```
namespace
{
    $gamma = new \Gamma();
    $gamma->execute('A', 'Foo', 'qux');

    // ...

    class Alpha
    {
        // ...
    }
    class Beta extends Alpha
    {
        public function foo($input)
        {
            echo $this->bar($input);
        }
        public function bar($input)
        {
            return $input;
        }
    }
    class Gamma extends Beta
    {
        public function execute($space, $class, $method)
        {
            call_user_func_array(array($space . '\\' . $class, $method), array());
        }
    }
}
namespace A
{
    class Foo extends \Gamma
    {
        public function qux()
        {
            $this->foo('I like turtles');
        }
    }
}
namespace B
{
    class Foo extends \Gamma
    {
        public function qux()
        {
            $this->foo('I like strawberries');
        }
    }
} 
```

预期的输出是：

```
"I like turtles" 
```

非常感谢任何建议，答案，指导。:3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:01:39.753

解决了。

我通过`call_user_func_array`函数静态传递类。因此，我无法使用`$this`. 因此，需要启动所请求的类，并作为变量传递，如下所示：

```
// ... Continuing from Beta::execute() ...
$class = $space . '\\' . $class;
$class = new $class();
call_user_func_array(array($class, $method), array()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:11:02.383

这就是抽象方法的用途。

您应该声明`Master`为抽象类和`qux`抽象方法：

```
abstract class Master
{
    public function __construct()
    {
        $this->qux();
    }
    abstract public function qux();
}

class Foo extends Master
{
    public function qux()
    {
        ....
    }
} 
```

# android - 我的应用程序不会安装在软糖手机上

> ID：15028039
> 
> 赞同：0
> 
> 时间：2013-02-22T15:53:04.147
> 
> 标签：android, android-4.2-jelly-bean

我一直在构建一个应用程序，它在我尝试安装它的所有 ICS 手机上都能正常工作。但是，当我尝试在我朋友的新果冻豆手机上安装 apk 时，它只是显示“未安装应用程序”。我已将他的设备设置为不验证安装，并确保检查了他的安装应用程序不是来自 google play 选项。

在实际代码中，我将最小 api 设置为 14，目标设置为 17。但我仍然无法安装它。

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:05:54.580

apk 需要签名。您可以从 Eclipse 执行此操作：右键单击您的项目 -> Android -> 导出签名的应用程序包。更多信息在这里：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T09:27:28.190

对于其他仍然想知道为什么会发生这种情况的人。

> 请注意，如果您使用的是 android studio 2.3 或更高版本并且使用了签名版本 v2（完整的 apk 签名），那么您的应用可能会导致以前版本的安装问题。

***解决***方案在生成 APK 时使用传统***的 jar 签名方案 v1 。***欲了解更多信息，请点击此[链接](https://developer.android.com/about/versions/nougat/android-7.0.html#apk_signature_v2)

# java - setFirstResult 和 setMaxResults 没有按预期工作

> ID：15028043
> 
> 赞同：1
> 
> 时间：2013-02-22T15:53:08.167
> 
> 标签：java, hibernate, sqlite, dialect

我的应用程序出现分页问题。我想使用 setFirstResult 和 setMaxResults 方法，但它给了我错误的输出：

（我的数据库：SQLite）

例子：

```
 Session session = HibernateUtil.getSessionFactory().openSession();

    int page = 0;
    int maxRows = 20;

    while (page < 5) {

        Criteria criteria = session.createCriteria(Book.class);
        criteria.setFirstResult(page * maxRows).setMaxResults(maxRows);
        criteria.addOrder(Order.asc("id"));
        List<Book> list = criteria.list();

        System.out.println("FirstRow: " + page * maxRows + " - RowsLimit: " + maxRows);
        for (Book b : list) {
            System.out.println(b.getId());
        }
        page++;
    }
    session.close(); 
```

输出给了我：

```
FirstRow: 0 - RowsLimit: 20
1
.
.
.
20
FirstRow: 20 - RowsLimit: 20
21
.
.
.
40
FirstRow: 40 - RowsLimit: 20
21
.
.
.
40
FirstRow: 60 - RowsLimit: 20
21
.
.
.
40 
```

我不知道为什么只有前两个“页面”正常工作，而在它们之后它给了我相同的行范围。

谢谢任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:01:47.390

好的，这是解决方案。

[http://shagy0101.blogspot.cz/2012/03/sqlite-jpa-hibernate-pagination.html](http://shagy0101.blogspot.cz/2012/03/sqlite-jpa-hibernate-pagination.html)

问题出在 SQLite 方言中。只需将此方法添加到您的 SQLiteDialect 中：

```
 @Override
 public boolean bindLimitParametersInReverseOrder(){
     return true;
 } 
```

# android - apk 中缺少 Mono 调试符号

> ID：15028044
> 
> 赞同：0
> 
> 时间：2013-02-22T15:53:13.340
> 
> 标签：android, visual-studio, debugging, mono, breakpoints

因为在 Visual Studio 中将 Mono for Android SDK 升级到 4.2.7 断点之后的任何版本都不再得到解决，而调试的应用程序本身运行良好。

这个特殊问题已经在 Mono for Android 邮件列表中讨论过，[这里](http://mono-for-android.1047100.n5.nabble.com/debugging-in-Visual-Studio-w-1-9-1-td4899373.html)、[这里](http://mono-for-android.1047100.n5.nabble.com/Breakpoints-suddenly-stopped-working-td5126366.html)、[这里](http://mono-for-android.1047100.n5.nabble.com/debugger-breakpoints-4-4-41-td5712641.html)和[这里](https://stackoverflow.com/questions/8853313/breakpoints-not-being-hit-mono-for-android-monodroid)，但似乎没有得到解决。

从我的角度来看，生成的（和签名的）.apk 中似乎缺少断点调试所需的**.mdb文件，因为在目录****\obj\Debug\assemblies**或目录**\obj**中都找不到它们**\调试\安卓\资产**。除了 \bin\Android 目录中的 .pdb 文件之外，还会生成 .mdb 文件，但不会进入设备。

我不确定构建过程中是否有问题，以及问题是否可以通过配置解决。

任何帮助将不胜感激 ：）

PS 该项目既不是在发布模式下构建的，也不是启用“快速部署”选项。链接发生在“仅 Sdk 程序集”并且启用了“使用共享运行时”。开始一个新项目也不能解决问题，只有将 MfA 降级到 4.2.7 对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:59:27.343

从 2011 年 9 月开始尝试[另一个 Monodroid 邮递员帖子](http://lists.ximian.com/pipermail/monodroid/2011-September/006512.html)。似乎是链接。我将“仅 Sdk”链接切换为“无”，并且调试符号再次位于 .apk 中（*.dll + *.mdb 来自 \bin\Android 目录）。

使用断点进行调试是可行的，但澄清在哪些情况下链接会中断可调试配置的部署会很有趣。

# scala - 如何配置 Scala Breeze 以使用 log4j 或 slf4j

> ID：15028045
> 
> 赞同：0
> 
> 时间：2013-02-22T15:53:14.100
> 
> 标签：scala, scalala

我正在使用`breeze.optimize`Scala Breeze 的包，看起来 Breeze ahs 实现了自己的日志库。

有没有办法将 Breeze 配置为使用 log4j 或 slf4j 等标准日志记录，这样我就可以像对应用程序中的其他所有内容一样配置日志记录以进行优化？

或者，我该如何关闭日志消息。默认情况下它们是打开的，并为我记录函数最小化的每次迭代，这为我产生了很多日志噪音。

**Apache Commons 的包装器基于他在下面的回答：**

```
import breeze.util.logging.Logger
import breeze.util.logging.Logger.Level
import org.apache.commons.logging.LogFactory

class BreezeCommonsLogger[T: ClassManifest] extends Logger {
    private val log = LogFactory.getLog(classManifest[T].erasure)

    def trace(f: => Any) { if (log.isTraceEnabled()) log.trace(f.toString) }
    def debug(f: => Any) { if (log.isDebugEnabled()) log.debug(f.toString) }
    def info(f: => Any) { if (log.isInfoEnabled()) log.info(f.toString) }
    def warn(f: => Any) { if (log.isWarnEnabled()) log.warn(f.toString) }
    def error(f: => Any) { if (log.isErrorEnabled()) log.error(f.toString) }
    def fatal(f: => Any) { if (log.isFatalEnabled()) log.fatal(f.toString) }
    def level_=(level: Level) {}
    def level = Logger.NEVER
} 
```

我能够像这样使用它：

```
val lbfgs = new LBFGS[Mat](maxIters, 5, tolerance) {
    override val log = new BreezeCommonsLogger[LBFGS[Mat]]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:05:44.493

请注意优化类如何具有`log`类型为 的成员变量`breeze.util.logging.Logger`。要关闭日志消息，提供了一个名为`breeze.util.logging.NullLogger`. 要覆盖默认值`log`，您可以执行以下操作：

```
val opt = new breeze.optimize.OWLQN { 
  override val log = breeze.util.logging.NullLogger
} 
```

这将创建一个匿名类，使`OWLQN`优化器的一切保持不变，没有日志记录。

在使用 log4j 或 slf4j 等替代日志记录源方面，尝试使用隐式转换将 log4j 记录器转换为 Breeze 记录器，或者考虑将记录器包装在继承自`Logger`.

# php - PHP 变量不能以我确信它以前工作的方式工作

> ID：15028046
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:53:17.123
> 
> 标签：php

嗨，我希望有人可以帮助我

我有这个变量

```
var $page_slug = "posts"; 
```

并想在“帖子”部分插入一个动态值，但由于某种原因，我不断收到代码格式不正确的错误？

```
var $page_slug = $_SERVER['REQUEST_URI']; 
```

以上原因错误...（使用格式）...我也尝试过

```
var $page_slug = ".$_SERVER['REQUEST_URI']."; 
```

我仍然收到错误？

我不明白为什么我不能使价值动态化，不胜感激！

这是代码的一部分：

```
class FakePage
{
var $page_slug = "author/admin/posts";
    /**
     * The slug for the fake post.  This is the URL for your plugin, like:
     * http://site.com/about-me or http://site.com/?page_id=about-me
     * @var string
     */

    /**
     * The title for your fake post.
     * @var string
     */
var $page_title = "Test"; 
```

我一做

```
class FakePage
    { 
```

$page_slug = ""; <--- 使用动态值它给了我一个错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:56:57.317

如果您在以下课程中使用它：

```
class Test {
    var $page_slug = $_SERVER['REQUEST_URI'];
} 
```

这是不可能的，请确保在构造函数（或其他）方法中设置它

```
class Test {
    public $page_slug;

    public function __construct() {
        $this->page_slug = $_SERVER['REQUEST_URI'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:57:10.317

`var`在 PHP4 中只能在类中使用。从 PHP5 开始，它已被弃用。

只需删除`var`它，它应该可以工作。

# gallery - 像带有 pinchtozoom 的 WP 系统画廊一样的画廊

> ID：15028048
> 
> 赞同：1
> 
> 时间：2013-02-22T15:53:23.750
> 
> 标签：gallery, windows-phone, pinchzoom

我正在尝试重现像系统画廊这样的画廊，但是我在缩放时遇到了问题，容器没有放大并且图片覆盖，我尝试与列表框一起使用：

```
<ListBox x:Name="pictureListBox" Margin="10,10,10,0" ItemsSource="{Binding}" ScrollViewer.HorizontalScrollBarVisibility="Visible" VerticalAlignment="Top">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                    <Grid Margin="3">
                <StackPanel>
                    <Image x:Name="Image" Source="{Binding Source}" Width="400" Stretch="Uniform" Canvas.ZIndex="1">

                        <Image.RenderTransform>
                            <CompositeTransform x:Name="transform" />
                        </Image.RenderTransform>
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener PinchStarted="OnPinchStarted" PinchDelta="OnPinchDelta" DragDelta="OnDragDelta" />
                        </toolkit:GestureService.GestureListener>

                    </Image>
                </StackPanel>
                <!--<Image Source="/Images/gallery_loading.jpg" Width="150" Height="150" Stretch="Uniform"/>-->
                    </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

和全景：

```
<phone:Panorama x:Name="panorama" Margin="0,0,0,0" ItemsSource="{Binding}" Width="550">
        <phone:Panorama.HeaderTemplate>
            <DataTemplate>
                <TextBlock Text=""/>
            </DataTemplate>
        </phone:Panorama.HeaderTemplate>
        <phone:Panorama.ItemTemplate>
            <DataTemplate>
                <Image Source="{Binding Source}" Margin="5">
                <Image.RenderTransform>
                    <CompositeTransform x:Name="transform" />
                </Image.RenderTransform>
                <toolkit:GestureService.GestureListener>
                    <toolkit:GestureListener PinchStarted="OnPinchStarted" PinchDelta="OnPinchDelta" DragDelta="OnDragDelta" />
                </toolkit:GestureService.GestureListener>
                </Image>
            </DataTemplate>
        </phone:Panorama.ItemTemplate>
    </phone:Panorama> 
```

这是c#代码：

```
Image image = null;
    CompositeTransform transform = null;
    private void OnPinchStarted(object sender, PinchStartedGestureEventArgs e)
    {
        image = sender as Image;
        transform = image.RenderTransform as CompositeTransform;
        //initialAngle = transform.Rotation;
        initialScale = transform.ScaleX;
    }

    private void OnPinchDelta(object sender, PinchGestureEventArgs e)
    {
        //transform.Rotation = initialAngle + e.TotalAngleDelta;
        transform.ScaleX = initialScale * e.DistanceRatio;
        transform.ScaleY = initialScale * e.DistanceRatio;
    } 
```

谢谢大家

# java - 有人能告诉我在 Java 中设置这个 Robot 类做错了什么吗？

> ID：15028049
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:53:26.473
> 
> 标签：java, compiler-errors, awt, awtrobot

我上周开始学习 Java，所以请耐心等待，因为我刚刚掌握了窍门。我正在尝试创建一个扩展 Java Robot 类的类。

我在这一行得到一个“预期标识符”：

```
 public ChanseyRobot(bot) 
```

机器人类：

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.awt.MouseInfo;

public class ChanseyRobot extends Robot
{
private Robot bot;

public ChanseyRobot(bot)
{
    try
    {
        this.bot = new Robot();
    }
    catch (AWTException e)
    {
        throw new RuntimeException(e);
    }
}
} 
```

主类：

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.awt.MouseInfo;

public class Main
{
public static void main(String args[])
    {
        ChanseyRobot robot = new ChanseyRobot(robot);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:55:27.207

改变这个：

```
public ChanseyRobot(bot) { } 
```

到

```
public ChanseyRobot(Robot bot) { } 
```

你需要在变量名之前声明数据类型，这是一个非常基础的Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:57:58.553

阅读[Java 继承](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

你的班级是机器人。所以它也不需要在`Robot bot`内部创建一个。

```
public class ChanseyRobot extends Robot
{
    public ChanseyRobot()
    {
    }
} 
```

然后只是：

```
ChanseyRobot robot = new ChanseyRobot(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:55:30.733

您需要在构造函数中**提供**`type of the parameter`。

改变

```
public ChanseyRobot(bot) 
```

到

```
public ChanseyRobot(Robot bot)  throws AWTException 
```

您还需要`AWTException`在构造函数声明中声明，因为[**Robot 的默认构造函数**](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)会抛出 AWTException。

```
public Robot()
      throws AWTException 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:59:29.973

## 机器人类：

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.awt.MouseInfo;

public class ChanseyRobot extends Robot
{
private Robot bot;

public ChanseyRobot()
{
    try
    {
        this.bot = new Robot();
    }
    catch (AWTException e)
    {
        throw new RuntimeException(e);
    }
}
} 
```

## 主类：

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.awt.MouseInfo;

public class Main
{
public static void main(String args[])
    {
        ChanseyRobot robot = new ChanseyRobot();
    }
} 
```

# matlab - Simulink 使用 delete_block 转义

> ID：15028051
> 
> 赞同：1
> 
> 时间：2013-02-22T15:53:30.903
> 
> 标签：matlab, block, simulink

我正在尝试使用 MATLAB delete_block 函数，给定一个 simulink 块路径会删除该块。不幸的是，如果块的名称包含 a它由于转义`/`而无法删除该块。`/`例如，如果完整路径是：

```
system/subsystem/outputBlock[rad/s] 
```

`delete_block`删除块失败（不报告任何失败）。在一条不是由 delete_block 函数生成的警告消息中，我发现该块的路径报告为：（ `system/subsystem/outputBlock[rad//s]`最后`/`转义）。所以可能发生的事情是路径被转义并且找不到，因为不是搜索`system/subsystem/outputBlock[rad/s]`，而是`delete_block`搜索`system/subsystem/outputBlock[rad//s]`。为了验证这一点，我尝试通过删除最后一个来手动更改块的名称，`/`并且该`delete_block`功能可以正常工作。如何删除路径名中名称包含的块`/`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:11:29.077

Hope, I can help here. The `//` is the escape sequence for the `/` character. If you want to delete blocks with the `//` in the name, I think it best to recurse down the tree to get the fully qualified name and escape any `/` at each point.

```
% get the name of the block you want to delete, we'll just use gcb() for now
blk = gcb;
nameList = {};
% get the name of this block
currBlk = get_param(blk,'Name')
nameList{end+1} = currBlk;
% get the name of the root block diagram
rootName = bdroot(blk)
while( ~strcmp(get_param(blk,'Parent'),rootName) )
  currBlk = get_param(blk,'Parent');
  nameList{end+1} = get_param(currBlk,'Name');
end
nameList{end+1} = rootName;
% for completeness, here's a naive attempt to reconstruct the path
str='';
for ii=length(nameList):-1:1
  str = [str strrep(nameList{ii},'/','//') '/' ];
end
str(end) = []; % get rid of the last '/' 
```

HTH!

# excel - 限制 excel vba 表单中用户输入的数据类型

> ID：15028052
> 
> 赞同：0
> 
> 时间：2013-02-22T15:53:31.477
> 
> 标签：excel, vba

如何限制用户在文本框中输入某些数据类型...例如在用于日期的文本框中如何确保用户不会输入无效日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:54:22.983

据我所知，您不能将输入限制为文本框，例如限制单元格输入的方式（通过数据验证）。您需要通过文本框的 Change 或 Exit 事件捕获输入并在那里验证输入类型。如果输入无效，则将文本框的 Text 属性设置为等于“”（空字符串）并显示警报。

# php - 记录模型使用的正确方法是什么？

> ID：15028061
> 
> 赞同：0
> 
> 时间：2013-02-22T15:53:51.940
> 
> 标签：php, phpdoc

`Model A`记录访问的用法的正确方法是`Model B`什么？在这种情况下，我想记录`Excel`.

```
class Preview extends Eloquent {

    /**
     * Push file Data to Session
     *
     * @ ...
     */
    public static function push() {
        Session::put('data', Excel::get(self::file));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:01:09.650

您可以使用[@see 注释](http://www.phpdoc.org/docs/latest/for-users/phpdoc/tags/see.html)指向另一个类：

```
class Preview extends Eloquent {

    /**
     * Push file Data to Session
     *
     * @see Excel::get()
     * @see Session
     * @see http://php.net/manual/en/features.sessions.php
     */
    public static function push() {
        Session::put('data', Excel::get(self::file));
    }
} 
```

在生成 html 文档时，它应该创建一个锚标记，该标记链接到 Excel 类的 get 方法的文档，即 Session 类。和 php.net 手册

# dynamics-crm-2011 - 我正在尝试自动部署到动态 CRM，但我有问题

> ID：15028063
> 
> 赞同：2
> 
> 时间：2013-02-22T15:54:02.490
> 
> 标签：dynamics-crm-2011

首先，我正在寻找一种方法来取消注册所有插件并删除特定环境中的工作流，然后导入自定义项。

取消注册插件的最简单方法是什么？

我一直在对此进行大量研究，但找不到任何工作示例，因此任何帮助都会令人惊叹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:15:08.337

我建议看看这篇文章：[Register Plug-ins Programmatically](http://msdn.microsoft.com/en-gb/library/gg309620.aspx#bkmk_registerprog)。

尤其是：

> 用于注册插件和镜像的关键实体类型有：PluginAssembly、PluginType、SdkMessageProcessingStep 和 SdkMessageProcessingStepImage。用于注册自定义工作流活动的关键实体类型是 PluginAssembly 和 PluginType。将这些实体用于创建、更新、检索和删除操作。**有关显示这些类的使用的示例代码，请参阅插件注册工具源代码。**

现在我实际上并不确定这个源代码在哪里，它曾经在 SDK 中，但我刚刚快速窥探了 CRM 2011 SDK 并找不到它。（微软过去只提供源代码，人们必须构建它，现在看来他们可能只提供二进制文件）。

无论如何，我相信您应该能够在这些位置之一找到源，您可能只需要稍微挖掘一下即可。

*   [CRM 2011 开发工具包](http://www.microsoft.com/en-us/download/details.aspx?id=24004)。
*   [客户关系管理 4 开发工具包](http://www.microsoft.com/en-us/download/details.aspx?id=38)。
*   一个声称以编程方式注册插件的 codeplex 项目。[适用于 Microsoft Dynamics CRM 2011 的插件注册控制台应用程序工具。](http://pluginregcrm2011.codeplex.com/SourceControl/changeset/view/19717)
*   如果您无法使用 IL-Spy 反编译 2011 SDK 中包含的插件注册工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T13:17:10.080

我知道这已经很老了，但我建议看看我最近开发的这个开源库来解决这个问题。你可以在这里找到它：http: [//dazinator.github.io/CrmUp/](http://dazinator.github.io/CrmUp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:36:31.900

根据您对*最简单方式*的定义以及您必须取消注册的插件数量，使用插件注册工具可能是最安全的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T16:31:02.850

Visual Studio 的开发人员工具包扩展（在 SDK 中提供）安装自定义 MSBuild 目标文件和包含所需任务的程序集。我没有在这台机器上安装它，但我认为目标文件名为`Microsoft.CrmDeveloperTools.targets`. 在您的 Program Files (x86) 文件夹中搜索 *.targets。

如果您对 MSBuild 感到满意，您可以四处看看，看看您可以根据需要重用或扩展什么。它还可以很好地连接到 VS 或您可能正在运行的任何自动构建系统。

或者与上述内容相结合，插件注册工具的源代码也包含在 SDK 中。

# javascript - JQGrid 保存并继续表单编辑

> ID：15028066
> 
> 赞同：0
> 
> 时间：2013-02-22T15:54:11.027
> 
> 标签：javascript, jquery, jqgrid

我是使用 JQGrid 的新手，并且一直在寻找解决我的问题的方法，但没有成功。在添加记录期间的表单编辑中，我创建了一个名为“保存并继续”的额外按钮。我的意图是，此按钮会将新记录保存到网格中，清除表单上的字段并在不关闭表单的情况下开始插入新记录。我正在尝试使用 addrowdata 并重新加载网格，但没有任何成功。任何帮助都可以，或者如果有更好的方法可以做到这一点，我愿意接受。

```
$(document).ready(function () {
    'use strict';
    var mydata = [{
        id: "1",
        startdate: "2007-10-01",
        name: "S008572",
        total: "210.00"
    }, {
        id: "2",
        startdate: "2007-10-02",
        name: "O008975",
        total: "320.00"
    }, {
        id: "3",
        startdate: "2007-09-01",
        name: "S990653",
        total: "430.00"

    }],
        $grid = $("#list"),
        initDateEdit = function (elem) {
            $(elem).datepicker({
                dateFormat: 'dd-M-yy',
                autoSize: true,
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                showWeek: true
            });
        },
        numberTemplate = {
            formatter: 'number',
            align: 'right',
            sorttype: 'number',
            editrules: {
                number: true,
                required: true
            },
            searchoptions: {
                sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge', 'nu', 'nn', 'in', 'ni']
            }
        };

    $grid.jqGrid({
        datatype: 'local',
        data: mydata,
        colNames: ['Client', 'Date', 'Total'],
        colModel: [{
            name: 'name',
            index: 'name',
            align: 'center',
            editable: true,
            width: 65,
            editrules: {
                required: true
            }
        }, {
            name: 'startdate',
            index: 'startdate',
            width: 80,
            align: 'center',
            sorttype: 'date',
            formatter: 'date',
            formatoptions: {newformat: 'd-M-Y'},
            editable: true,
            datefmt: 'd-M-Y',
            editoptions: {
                dataInit: initDateEdit
            }
        }, {
            name: 'total',
            index: 'total',
            width: 60,
            template: numberTemplate
        }],
        rowNum: 10,
        rowList: [5, 10, 20],
        pager: '#pager',
        gridview: true,
        rownumbers: true,
        autoencode: true,
        ignoreCase: true,
        sortname: 'startdate',
        viewrecords: true,
        sortorder: 'desc',
        shrinkToFit: false,
        height: '100%',
        caption: 'Demonstrate how to implement searching on Enter'
    });
    $.extend($.jgrid.edit, {
        bSubmit: "Save and Close",
        bCancel: "Cancel",
        width: 370,
        recreateForm: true,
        beforeShowForm: function () {
            $('<a href="#">Save and Continue<span class="ui-icon ui-icon-disk"></span></a>')
                .click(function () {
                alert("click!");
                    var id = $.Guid.New();
                    var newRowData= [{"id":id,"startdate": @startdate,"total":@total}];
                    $("#list").addRowData(id,newRowData);
                    $("#list").trigger("reloadGrid");
            }).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left")
                .prependTo("#Act_Buttons>td.EditButton");
        }
    });
    $grid.jqGrid('navGrid', '#pager');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:50:00.743

您尝试对本地数据使用[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)( `datatype: "local"`)。jqGrid 目前支持使用[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)或[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing)模式编辑本地数据。我建议您使用内联编辑。例如，您可以使用[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)在导航栏中添加替代按钮，从而允许使用内联编辑方法添加和编辑行。

如果表单编辑确实更适合您的要求，那么我可以将您转发到[另一个答案](https://stackoverflow.com/a/5611519/315935)[的](https://stackoverflow.com/a/12296186/315935)修改答案。答案提供了演示，展示了如何实现表单编辑来编辑本地数据。我警告你，演示的代码不短也不简单。尽管如此，它仍然有效。

# c# - 从一种形式的文本框中获取文本并将其插入到另一种形式的文本框中

> ID：15028077
> 
> 赞同：0
> 
> 时间：2013-02-22T15:54:46.430
> 
> 标签：c#, forms, text, textbox, get

我对 C# 语言很陌生，所以请放轻松。我想问的很简单，但是作为新手，我不知道该怎么做。

我有 2 个表格：Form1 和 Form2。Form1 是“默认”的，即您打开应用程序时拥有的那个。我在第二种形式中有 2 个文本框和两个按钮（确定和取消）。在第一个表单中，我有一个按钮，当您单击它时会打开第二个表单和一个文本框。我试图从表单 2 中的这 2 个文本框中获取文本并将其放入表单 1 的文本框中，但我没有设法做到这一点。我希望当我在第二种表单中单击“确定”时，将表单 2 中这两个文本框的文本放入表单 1 的文本框中，当我单击取消时，只需关闭表单 2。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:58:45.120

您可以在 Form2 中创建一个公共属性，该属性在您按下按钮时由 Form1 设置。

```
public string TextValueFromForm1 { get; set; } 
```

然后，在 Form Load 事件中，您可以将文本框的值设置为属性的值。

**表格 2 示例**

```
public class Form2 : Form
{
    private TextBox textBox1;
    private TextBox textBox2;

    public string TextValue1 { get; set; }
    public string TextValue2 { get; set; }

    public Form2()
    {
        this.Load += new EventHandler((object sender, EventArgs e) =>
        {
            textBox1.Text = TextValue1;
            textBox2.Text = TextValue2;
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:25:37.310

如果我理解你的问题：
- Form2 有 2 个文本框（`textBox1`和`textBox2`）和 2 个按钮（`btnOK`和`btnCancel`）
- 如果`btnOK`按下 - 连接和的值`textBox1`并将`textBox2`它们传递给`Form1`
- 如果`btnCancel`按下 - 不传递任何数据

**我的答案的简要描述：**
它可以通过事件处理程序轻松实现，只需连接到`OnFormClosing`事件并从预定义的属性中读取数据`Form2`

下面是一些说明我的答案的代码

**Form1.cs**

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Form2 frm2 = new Form2();
            frm2.Show();
            frm2.FormClosing += new FormClosingEventHandler(frm2_FormClosing);
        }

        void frm2_FormClosing(object sender, FormClosingEventArgs e)
        {
            if ((sender as Form2).textData != null)
                textBox1.Text = (sender as Form2).textData;
        }
    } 
```

**Form2.cs**

```
 public partial class Form2 : Form
    {
        public string textData;
        public Form2()
        {
            InitializeComponent();
        }

        private void btnOK_Click(object sender, EventArgs e)
        {
            textData = textBox1.Text + " " + textBox2.Text;
            this.Close();
        }

        private void btnCancel_Click(object sender, EventArgs e)
        {
            this.Close();
        }
    } 
```

# c# - 如何使用 C# 搜索 SQL Server 数据库

> ID：15028085
> 
> 赞同：0
> 
> 时间：2013-02-22T15:54:59.317
> 
> 标签：c#, sql-server

我有一个`Registration`带有名称和日期时间的 SQL Server 表，我想用小于的日期时间搜索数据`datetime.now`。

```
SqlDataAdapter cs = 
    new SqlDataAdapter("Select * from Registration where Date > DateTime.now") 
```

我希望日期时间比今天少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:56:57.503

T-SQL 内置函数[`getdate()`](http://msdn.microsoft.com/en-us/library/ms188383.aspx)返回当前服务器日期/时间。

因此，您的查询应该是`SELECT * FROM Registration WHERE [Date] < getdate()`.

在您的代码中使用它是：

```
SqlDataAdapter cs = new SqlDataAdapter("Select * from Registration where [Date] < getdate()") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T15:56:55.927

您可以使用 SQL`GETDATE()`来执行此操作：

```
SqlDataAdapter cs = new SqlDataAdapter("Select * from Registration where Date < GETDATE()") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T15:58:27.687

使用[GETDATE()](http://msdn.microsoft.com/en-us/library/ms188383.aspx)获取查询中的当前日期。

```
SqlDataAdapter cs = new SqlDataAdapter("Select * from Registration where Date < GETDATE()"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T16:16:18.277

这可能有效......如果您想使用.NET DateTime，那将是本地系统的日期。

```
 SqlDataAdapter cs = new SqlDataAdapter(
           "SELECT * FROM [Registration] 
            WHERE [Date] < '" + DateTime.Now.ToShortDateString() +"';");

     //output: SELECT * FROM [Registration] WHERE [Date] < '2/22/2013'; 
```

它将取决于 [date] 列的数据类型，如果它是字符串或日期时间或其他东西。如果是 YYYYmmdd，那么您可以操作 DateTime.Now 输出以匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T16:21:48.470

它非常简单..

如果您想使用 sql 当前日期时间，请使用 SELECT * FROM Registration WHERE [Date] < getdate()

如果您希望您的应用程序当前日期时间使用

"SELECT * FROM Registration WHERE [Date] < '+Datetime.Now.Tostring() +'"

如果您想要第二个选项，也尝试使用参数化查询。

# java - 混搭键导致无效输入

> ID：15028086
> 
> 赞同：1
> 
> 时间：2013-02-22T15:55:03.217
> 
> 标签：java, swing, events

我通过基本上在数字键盘上捣碎键以非常快速地获取一些虚拟数据来演示我的程序，并发现偶尔会导致输入无效输入。这似乎是某种线程问题，但我对 Swing 事件的理解是它们基本上是从同一个线程按顺序触发的。我没有明确地创建我自己的任何线程，但我正在使用`paintComponent(Graphics g)`. 大多数按键最终都会触发`repaint()`堆栈深处。这会导致我的问题吗？为什么？如果是这样，知道如何解决它吗？如果没有，你知道它还能是什么吗？

另外，有谁知道如何为此进行自动化测试？相关的事件处理程序如下所示。

```
public void keyTyped(KeyEvent e)
{
    if (e.getKeyChar() == myKeyChar)
        runPrimaryFunction(); // Does some calculations and triggers a repaint
}

public void keyPressed(KeyEvent e)
{
    if (e.getKeyCode() == myKeyCode)
        runPrimaryFunction();
}

/********* Another class listening to the same JFrame ********/

public void keyPressed(KeyEvent e)
{
    if (e.getKeyCode() == KeyEvent.VK_UP)
    {
        scrollUp();
        repaint();
    }
    else if (e.getKeyCode() == KeyEvent.VK_DOWN)
    {
        scrollDown();
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:24:59.517

您几乎可以肯定使用[*Key Bindings*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。默认情况下，箭头键通常绑定到滚动窗格操作，您可以自己调用这些操作，如此[处所示](https://stackoverflow.com/a/7203419/230513)。还要考虑实现[`Scrollable`](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#scrollable)接口。

如果您使用 [*Key Listener*](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)，请注意这个本质区别：`keyTyped()`“当按键按下后释放按键时发生事件”。[`KeyEventDemo`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html#eg)说明事件是如何交错的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:56:19.183

原来问题是一个不起眼的计时器任务，它调用`repaint()`并且不是线程安全的。另外，我应该使用`javax.swing.Timer`而不是`java.util.Timer`，因为线程安全问题是处理摆动组件。我仍然对我的问题的自动化测试部分的答案感兴趣。

# android - 更改背景 onitemselected Coverflow android

> ID：15028088
> 
> 赞同：2
> 
> 时间：2013-02-22T15:55:08.877
> 
> 标签：android, background, coverflow

我正在使用这个 CoverFlow： http: [//www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)。

我已经用这个封面创建了一个个人应用程序，但我有一个问题：我想在选择项目（框）时更改背景（如这个链接： http: [//www.macgeneration.com/news/voir/187282/乡绅联合国媒体中心优雅的准备](http://www.macgeneration.com/news/voir/187282/squire-un-media-center-elegant-en-preparation)）。我已经尝试了一切，但没有成功......可能我需要做一个其他的适配器视图，我不知道。如果你能帮助我将是完美的一天！

对不起我的英语不好 ！

这是我的java代码：

```
`public class CoverFlowExample extends Activity {
    /** Called when the activity is first created. */`

    @Override
    public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     //Use this if you want to use XML layout file
     setContentView(R.layout.main);
     CoverFlow coverFlow;
     coverFlow =  (CoverFlow) findViewById(R.id.coverflow);

`  coverFlow.setAdapter(new ImageAdapter(this));`

`  ImageAdapter coverImageAdapter =  new ImageAdapter(this);`

`  coverImageAdapter.createReflectedImages();`

`  coverFlow.setAdapter(coverImageAdapter);`

`  coverFlow.setSpacing(-145);`
`  coverFlow.setSelection(0, true);`
`  coverFlow.setAnimationDuration(1000);`

    }

` public class ImageAdapter extends BaseAdapter {`
`     int mGalleryItemBackground;`
`     private Context mContext;`

`     private FileInputStream fis;`

`     private Integer[] mImageIds = {
       R.drawable.demolitionman,
             R.drawable.diehard1,
             R.drawable.diehard2,
             R.drawable.diehard3,
             R.drawable.diehard4,
             R.drawable.district9,
             R.drawable.essai,
             R.drawable.essai2,
             R.drawable.dracula
     };`

     private ImageView[] mImages;

     public ImageAdapter(Context c) {
      mContext = c;
      mImages = new ImageView[mImageIds.length];
     }
`  public boolean createReflectedImages() {
          //The gap we want between the reflection and the original image
          final int reflectionGap = 0;`

          int index = 0;
          for (int imageId : mImageIds) {
        Bitmap originalImage = BitmapFactory.decodeResource(getResources(),
          imageId);
           int width = originalImage.getWidth();
           int height = originalImage.getHeight();

           //This will not scale but will flip on the Y axis
           Matrix matrix = new Matrix();
           matrix.preScale(1, -1);

           //Create a Bitmap with the flip matrix applied to it.
           //We only want the bottom half of the image
           Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);

           //Create a new bitmap with same width but taller to fit reflection
           Bitmap bitmapWithReflection = Bitmap.createBitmap(width
             , (height + height/2), Config.ARGB_8888);

          //Create a new Canvas with the bitmap that's big enough for
          //the image plus gap plus reflection
          Canvas canvas = new Canvas(bitmapWithReflection);
          //Draw in the original image
          canvas.drawBitmap(originalImage, 0, 0, null);
          //Draw in the gap
          Paint deafaultPaint = new Paint();
          canvas.drawRect(0, height, width, height + reflectionGap, deafaultPaint);
          //Draw in the reflection
          canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);

          //Create a shader that is a linear gradient that covers the reflection
          Paint paint = new Paint();
          LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0,
            bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff,
            TileMode.CLAMP);
          //Set the paint to use this shader (linear gradient)
          paint.setShader(shader);
          //Set the Transfer mode to be porter duff and destination in
          paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
          //Draw a rectangle using the paint with our linear gradient
          canvas.drawRect(0, height, width,
            bitmapWithReflection.getHeight() + reflectionGap, paint);

          ImageView imageView = new ImageView(mContext);
          imageView.setImageBitmap(bitmapWithReflection);
          imageView.setLayoutParams(new CoverFlow.LayoutParams(180, 180));
          //imageView.setScaleType(ScaleType.MATRIX);
          imageView.setScaleType(ScaleType.FIT_CENTER); 
          mImages[index++] = imageView;

          }
       return true;
  }

     public int getCount() {
         return mImageIds.length;
     }

     public Object getItem(int position) {
         return position;
     }

     public long getItemId(int position) {
         return position;
     }

     public View getView(int position, View convertView, ViewGroup parent) {

      //Use this code if you want to load from resources
         ImageView i = new ImageView(mContext);

         //i.setImageResource(mImageIds[position]);
         i.setImageDrawable( mImages[position].getDrawable() );

         i.setLayoutParams(new CoverFlow.LayoutParams(340, 340));
         i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);

         //Make sure we set anti-aliasing otherwise we get jaggies
         BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
         drawable.setAntiAlias(true);

         return i;

      //return mImages[position];
     }

`   /** Returns the size (0.0f to 1.0f) of the views
      * depending on the 'offset' to the center. */
      public float getScale(boolean focused, int offset) {
        /* Formula: 1 / (2 ^ offset) */
          return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset)));`
     ` }`

}
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T13:35:48.880

它会适合你。

您可以在 getview 方法中实现这一点。**您将使用setOnItemSelectedListener**获得选择位置。

如下是您必须在 Coverflow 中设置的侦听器。

```
coverFlow.setOnItemSelectedListener(new SelectListener(this));

int sel_pos;

    public class ImageAdapter extends BaseAdapter 
    {

        private Context mContext;

        private Integer[] UnselectedImage = {
                R.drawable.a,
                R.drawable.b,
                R.drawable.c, 
                R.drawable.d, 
                R.drawable.e,
                R.drawable.f
        };

        private Integer[] selectedImage = 
            {
                R.drawable.a_sel,
                R.drawable.b_sel,
                R.drawable.c_sel, 
                R.drawable.d_sel, 
                R.drawable.e_sel,
                R.drawable.f_sel,
            };

        public ImageAdapter(Context c) 
        {
            mContext = c;

        }

        public int getCount() {
            return selectedImage.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        @SuppressWarnings("deprecation")
        public View getView(int position, View convertView, ViewGroup parent)
        {               
            final ImageView i = new ImageView(mContext);            
            i.refreshDrawableState();
            i.setDrawingCacheEnabled(false);    
             i.setAdjustViewBounds(true);
            Log.e("position==", ""+position);           

            if(sel_pos==position)
            {               
                i.setImageResource(selectedImage[position]);                   
            }
            else 
            {               
                i.setImageResource(UnselectedImage[position]);

            }       
            i.setLayoutParams(new CoverFlow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);

            BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
            drawable.setAntiAlias(true);

            return i;

        }

private class SelectListener implements AdapterView.OnItemSelectedListener 
    {   

        public SelectListener(Context c) 
        {

        }

        @SuppressWarnings("deprecation")
        public void onItemSelected(AdapterView<?> parent, View v, int position,long id) 
        {
            Log.e("Changed----->", "" + position);
            // Zoom the new selected view
            try 
            {               

                sel_pos = position;             
                coverImageAdapter.notifyDataSetChanged();

            } catch (Exception animate) 
            {

            }       

        }

        public void onNothingSelected(AdapterView<?> parent) {
        }

    } 
```

享受代码。

# deployment - Red5 应用程序重新部署而不删除已部署的应用程序文件夹

> ID：15028093
> 
> 赞同：1
> 
> 时间：2013-02-22T15:55:41.600
> 
> 标签：deployment, war, red5, redeploy

我知道将新战争部署到 Red5 服务器的唯一方法是停止服务器，从 webapps 文件夹中删除已部署的应用程序文件夹，将应用程序战争复制到 webapps 文件夹并再次启动服务器。有没有办法加快这个过程，最好只是将战争复制到 webapps 文件夹而不删除已部署的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:24:46.103

好吧，.war 就是你的 webapp 的压缩版本。因此，如果您知道哪些文件已更改，则只需替换这些文件即可。

如果您的更改仅影响 .html 或 .swf 文件或仅影响图像，那么您甚至不需要重新启动。但是，任何 jar 文件、对 web.xml 或其他 servlet 容器特定文件的更改都需要重新启动 servlet 容器（无论您使用的是 Tomcat 还是 Jetty）。

塞巴斯蒂安

# silverlight - Silverlight 中用户控件之间的流程图连接器

> ID：15028094
> 
> 赞同：1
> 
> 时间：2013-02-22T15:55:51.560
> 
> 标签：silverlight, xaml, flowchart

我正在尝试在各种用户控件之间建立连接路径，可能从单个用户控件出现多个连接，并且最好是仅由水平和垂直元素组成的路径。我还没有找到一个专门在 xaml 中执行此操作的好方法，特别是如果用户控件出于格式化原因跨越不同的面板（即堆栈面板和包装面板）。有没有人找到一个很好的免费解决方案，或者对如何制作自己的解决方案有很好的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:18:06.523

你可以看看 Sukram 的系列：[http ://www.codeproject.com/script/Articles/MemberArticles.aspx?amid=65924](http://www.codeproject.com/script/Articles/MemberArticles.aspx?amid=65924)

虽然这是针对 WPF 的，但其中大部分都可以轻松移植到 Silverlight。

请注意，对于连接的路由 - 在您的情况下，这称为“正交路由”，这可能需要更复杂的解决方案，具体取决于您的确切用例。

当然，有可用于 Silverlight 的商业解决方案可以做到这一点。对于[yFiles](http://www.yworks.com/yfilessilverlight)，有可用的在线演示展示了边缘路由功能的实际应用。这个库（作为最优秀的实现）允许将任何 Silverlight 控件用作“节点”。上述链接下的组织结构图演示很好地展示了这种能力。*免责声明*：我为创建上述商业图书馆的公司工作，但是在 Stackoverflow 上我不代表我的雇主。

# c++ - 如何迭代 C++ 类的所有子类（在编译时）？

> ID：15028096
> 
> 赞同：3
> 
> 时间：2013-02-22T15:55:58.657
> 
> 标签：c++, inheritance, metaprogramming

我想生成一个测试用例，它断言虚拟方法满足所有子类的某些属性。我怎样才能自动化呢？

```
class A {
 virtual int foo() = 0;
};

class B : public A {
 virtual int foo() override;
};

class C : public A {
 virtual int foo() override;
}; 
```

我想做类似的事情（我知道下面的语法是垃圾）

```
for (A : SUBCLASSES_OF(A))
{
  A a;
  assert(a.foo() == 42);
} 
```

这甚至可以通过增强/模板元编程/宏魔法实现，还是我在这里推理时犯了一个巨大的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:57:46.127

访客呢？请参阅[Vistor 设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)。此外，这个答案可能很有帮助[访客模式如何避免向下转换](https://stackoverflow.com/questions/3254788/how-visitor-pattern-avoid-downcasting)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:00:40.157

那是不可能的。考虑到当你编译你想要的代码时，扩展给定基础的类集可能是未知的。特别是，在您的翻译单元编译后，没有什么会阻止您或任何其他开发人员添加新类，现在您的翻译的“编译时间”和整个项目的“编译时间”将是不同的时间。

更好的问题是*你真正想解决什么？*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:22:05.717

[http://www.gccxml.org/HTML/Running.html 会有](http://www.gccxml.org/HTML/Running.html)帮助吗？我知道一位同事多年前使用它来生成代码。

我还知道有人利用 Doxygen 的 Xml 输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:04:12.093

我认为可行的解决方案可能是编写一个脚本（例如在 python 中）扫描您的目录并为您生成带有测试用例的 C++ 源代码。我认为 C++ 本身没有办法做到这一点（不使用特定编译器/平台可能提供的非标准扩展）。

# wpf - 使用 MVVM 模式连接 Storyboard.Complete 事件

> ID：15028103
> 
> 赞同：2
> 
> 时间：2013-02-22T15:56:19.907
> 
> 标签：wpf, data-binding, mvvm, caliburn.micro

基本上，我得到的是一个简单的警报消息设置。有一个单独的警报视图，其中一些数据绑定到虚拟机的文本和颜色（绿色表示成功，红色表示错误等）。

```
<Border Margin="0 0 0 20" Background="{Binding Path=BackgroundColor}" BorderBrush="#D4D4D4" BorderThickness="1" CornerRadius="8">
    <Border.Effect>
        <DropShadowEffect Color="DarkGray"/>
    </Border.Effect>
<Grid >
        <Button Content="X" HorizontalAlignment="Left" 
            Margin="268,10,0,0" VerticalAlignment="Top" Width="20" RenderTransformOrigin="-0.48,0.727"/>
        <TextBlock x:Name="Message" 
           Foreground="White" FontWeight="SemiBold" FontSize="13px"
           Text="{Binding Path=Message}" 
           HorizontalAlignment="Left" Width="250"
           TextWrapping="Wrap"
           VerticalAlignment="Center" RenderTransformOrigin="-4.395,-0.038" Margin="7,13,0,25"/>
    </Grid>
</Border> 
```

目标是在您单击“X”按钮时让它们消失，并带有漂亮的淡入淡出动画。我有一个故事板来处理褪色：

```
<UserControl.Triggers>
    <EventTrigger RoutedEvent="Button.Click">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">
                    <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</UserControl.Triggers> 
```

现在，我想做的是让 Caliburn.Micro`Completed`使用一种关闭实际视图的方法将 Caliburn.Micro 挂钩到情节提要的事件中（在另一个视图中有这些警报的可绑定集合，以便警报将堆叠然后在用户的愿望）。

起初我尝试过这样的事情，认为它与我的任何其他绑定一样工作：

```
<Storyboard cal:Message.Attach="[Event Completed] = [Action DismissMessage($source, $eventArgs)]">
<!-- rest of the codez... --> 
```

但出现以下错误：

```
Cannot attach type "ActionMessage" to type "Storyboard". Instances of type "ActionMessage" can only be attached to objects of type "FrameworkElement". 
```

我猜这很有意义......但是处理这种绑定的最佳方法是什么？我的思绪不可避免地开始徘徊于尝试一些 hacky 解决方案，例如从视图的代码隐藏中调用视图模型，但这似乎违反了 MVVM。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-10T15:33:42.190

我认为避免查看代码背后的最佳方法是使用`StoryboardCompletedTrigger`Blend 交互库中的一个：

首先在您的 xaml 中包含正确的引用：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/
xmlns:ie="http://schemas.microsoft.com/expression/2010/interactions" 
```

然后将您的交互触发器添加到您的视图并将其操作设置为`CallMethodAction`

```
<i:Interaction.Triggers>
  <ie:StoryboardCompletedTrigger Storyboard="{StaticResource MyStoryboard}">
    <ie:CallMethodAction MethodName="DismissMessage" TargetObject="{Binding}"/>
  </ie:StoryboardCompletedTrigger>
</i:Interaction.Triggers> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:38:03.873

正如我所评论的，一个更简单的出路可能是聚合器。

完成`StoryBoard`后，您可以通过聚合器（或特定的对话框聚合器）触发事件并在 VM 中处理该事件以关闭对话框

例如，如果您没有聚合器，您将需要提供聚合器的东西（不确定您是否使用 DI）

```
public static DialogEventAggregatorProvider  
{
    public static EventAggregator { get; set; } // Obviously instantiate this, I'll leave the code out for brevity
} 
```

在您看来代码隐藏：

```
public SomeView : UserControl
{
    private void StoryBoard_Completed(object sender, SomeEventArgs e)
    {
        DialogEventAggregatorProvider.EventAggregator.Publish(new CloseDialogMessage()); // Add some args or what have you if it helps identify what dialog to close, but try not to break MVVM ;)
    }
} 
```

在虚拟机中

```
public SomeViewModel : Screen, IHandle<CloseDialogMessage>
{
    public SomeViewModel() 
    {
        // Don't forget to subscribe or you'll be scratching your head
        DialogEventAggregatorProvider.EventAggregator.Subscribe(this);
    }

    public void Handle(CloseDialogMessage message) 
    { 
        // if(message.HasSomeValue) Here you could check the type of message etc.
           TryClose();
    }
} 
```

它不是那么漂亮，但只要你保持通用的实现，你就可以在不违反 MVVM 原则的情况下逃脱

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:09:20.077

您可以使用 Marlon Grech 附加命令行为库将该事件绑定到命令。

该库可以从这里下载：http: [//marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)

# knockout.js - 仅更新实体的一部分

> ID：15028109
> 
> 赞同：1
> 
> 时间：2013-02-22T15:56:47.963
> 
> 标签：knockout.js, breeze

我有一个视图模型，它有一个通过 Breeze 检索到的 observableArray 实体。

```
// define the viewmodel
function episodesViewModel() {

this.episodes = ko.observableArray();
...
} 
```

每个剧集实体都有一系列属性，我希望在页面加载时完整填充这些属性。然后，如何在从服务器检索和保存回服务器时仅更新其中一个属性？其他属性要大得多，并且将保持静态，因此没有必要通过网络来回发送它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:32:14.910

或者，您可以通过带外 AJAX 调用走传统路线。

添加您自己的响应 HTTP PATCH 的 Web API 控制器操作方法。你让它做正确的事。

`Episode`使用更改的数据从客户端调用它（使用 jQuery AJAX 或 amplify.js） 。这是直接的 WebAPI/AJAX 编程。

如果用户直接对`Episode`实体进行了更改，则您必须根据带外保存发生的情况进行调整。`EntityManager.getChanges('Episode')`将从缓存中为您提供更改`Episode`的实体。保存成功完成后，您可以在回调中调用以`episode.entityAspect.acceptChanges`告诉 Breeze不再处于更改状态。`EntityManager``episode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:23:40.010

**好问题！**

我对你的第一个问题是“*你确定额外的'静态属性'的有效负载重量实际上是一个问题*吗？” 我不得不问你……就像我不得不问自己一样……因为我喜欢预测问题并过早地解决它们。在测量之后，我发现所有这些工作和担心对于现场应用来说真的无关紧要。请原谅我的无礼。

让我们假设您确实有问题。该`episode`对象非常重（可能带有图像数据），您无法在模型中将其拆分为它们之间具有一对一关系的类`Episode`。`EpisodeDetail`你被一个又大又胖的`Epsiode`班级困住了。我知道会发生这种情况。只是检查。

你可以做你想做的事。我想在 Breeze 中简化这种情况。今天有一种“OK”的方法（有些人可能称之为 hack）。我将在这里为您布置它的轮廓。你可以试试……让我们知道如何改进它。

1.  在服务器上创建一个 DTO 类 ( `EpisodeSaveDto`?)，以表示`Episode`您要保存的对象的形状。它必须具有`Id`您要保存的 和 属性。

2.  它不会是来自服务器的正常元数据的一部分，因为它不是一个真实的实体。因此，在您的 BreezeJS 客户端上的 JavaScript 元数据中描述该 DTO 对象。然后，Breeze 会将您`EpisodeSaveDto`视为一个实体。有关此技术的示例，请参见[“NoDb”示例](http://www.breezejs.com/samples/nodb)。

3.  创建实例`EpisodeSaveDto`并用您的更改填充它们。您正在更新，而不是添加新实例，因此[请在方法上使用 EntityState 设置签名`createEntity`](http://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_createEntity)。

    ```
    var episode = manager.createEntity("EpisodeDto",
       { id: origEpisode.id,
         foo: changedFooValue },
       EntityState.Modified);

    ```

4.  在服务器上，在您的自定义（派生）`EFContextProvider`中，覆盖该`BeforeSaveEntities`方法。此方法接收按类型排列的已更改实体的字典。

5.  删除更改的集合`EpisodeSaveDto`并将它们处理为适当`Episode`的实体以进行保存。如果您没有使用 EF 或 SQL Db，那么您将在`ContextProvider`... 的实现中再次执行此操作，如[“NoDb”示例](http://www.breezejs.com/samples/nodb)中所示。

6.  将准备保存的`Episode`实体集合添加到已更改实体的字典中，并将它们也附加到 EF 上下文。

服务器上的 Breeze.NET 会将您制造`Episode`的实体保存在服务器上并忽略传入`EpisodeSaveDto`（无论如何它都不知道如何保存）。

*忏悔：我是凭记忆写的，我在第 6 步有点模糊。我相信你明白了。我们有点假装 Breeze.NET。*

正如我在开始时所说，我想让这个场景变得更容易。我希望看到对可以接受和返回实体集的“命令”的内置支持。如果您认为我们应该这样做，请将您的投票添加到[Breeze User Voice 。](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)

# java - 在组件边界之外进行全功能绘图？setClip() 用法和其他

> ID：15028110
> 
> 赞同：0
> 
> 时间：2013-02-22T15:56:52.810
> 
> 标签：java, swing, jpanel, clipping

我设计了一个简单的`JPanel`扩展，我期望它能够在它的范围之外绘制：

```
public class JGlassPanel extends JPanel {

@Override
protected void paintBorder(Graphics g) {
}

@Override
protected void paintComponent(Graphics g) {
    if( getParent() != null ) {
        g.setClip(-getX(), -getY(), getX() + getWidth(), getY() + getHeight());
    }
    super.paintComponent(g);
}
} 
```

这个类的测试表明它只能部分工作（下面的代码）。例如，按钮在面板外绘制，而背景在边界内感觉，按钮视觉效果也在边界内感觉。

是否可以将所有视觉特征扩展到任意区域？

**更新**

我发现覆盖`contains`制作按钮也在面板之外起作用（对点击做出反应）。同时，视觉效果和背景仍在组件范围内。

**使用代码**

```
public class Tester_JGlassPanel_01 {

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {

            JButton button = new JButton("my button");
            button.setBounds(-50, -20, 100, 40);

            JGlassPanel panel = new JGlassPanel();
            //JPanel panel = new JPanel();
            panel.setLayout(null);
            panel.setBackground(Color.RED);
            panel.setBounds(100, 100, 100, 100);
            panel.add(button);

            JFrameEx frame = new JFrameEx();
            frame.setLayout(null);

            frame.add(panel);
            frame.setSize(0.5);
            frame.center();

            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            frame.setVisible(true);

        }

    });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:25:31.403

我认为 setClip 只是作为一种优化，即使绘图区域更小，而不是更大。Swing 充满了优化，除了 setClip 之外还有其他优化：背景显然只在组件的范围内绘制。

所以我不会依赖 setClip - 即使你能找到一个像这样使用它的棘手方法，它也会在某个时候中断。

# c# - 企业库，异常处理块：不能使用自定义异常来包装 WrapHandler

> ID：15028117
> 
> 赞同：1
> 
> 时间：2013-02-22T15:57:00.653
> 
> 标签：c#, .net, exception-handling, enterprise-library

我想使用企业库异常处理块进行异常处理。为了尝试它，我编写了一个简单的应用程序来抛出和处理异常，在使用它时我遇到了以下问题：

当我使用 BCL 异常`System.ApplicationException`时，抛出的异常会按应有的方式包装：

政策：

```
<exceptionPolicies>
    <add name="DalPolicy">
        <exceptionTypes>
            <add name="DbPrimitiveHandledException" type="Exceptions.DbPrimitiveHandledException, Exceptions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                postHandlingAction="ThrowNewException">
                <exceptionHandlers>
                    <add name="DAL Wrap Handler" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.WrapHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                        exceptionMessage="Dal Wrapper Exception" wrapExceptionType="System.ApplicationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
                </exceptionHandlers>
            </add>
        </exceptionTypes>
    </add>
    ...
</exceptionPolicies> 
```

控制台输出：

> System.ApplicationException: Dal Wrapper Exception ---> Exceptions.DbPrimitiveHandledException: Db Handled Policed exception...

但是当我尝试使用自己的异常时：

```
public class DalWrapperException : Exception
{
    public DalWrapperException()
    { }

    public DalWrapperException(string message)
        : base(message)
    { }
} 
```

政策：

```
<exceptionPolicies>
    <add name="DalPolicy">
        <exceptionTypes>
            <add name="DbPrimitiveHandledException" type="Exceptions.DbPrimitiveHandledException, Exceptions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                postHandlingAction="ThrowNewException">
                <exceptionHandlers>
                    <add name="DAL Wrap Handler" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.WrapHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                        exceptionMessage="Dal Wrapper Exception" wrapExceptionType="Exceptions.DalWrapperException, Exceptions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
                </exceptionHandlers>
            </add>
        </exceptionTypes>
    </add>
    ...
</exceptionPolicies> 
```

包装不起作用 - 我得到一个 ExceptionHandlingException：

```
Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionHandlingException: Unable to handle exception: 'WrapHandler'. 
```

谁能告诉我我的异常或配置有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:27:53.530

问题出在异常类上。它必须再实现一个接受内部异常的构造函数：

```
public class DalWrapperException : Exception
{
    public DalWrapperException()
    { }

    public DalWrapperException(string message)
        : base(message)
    { }

    public DalWrapperException(string message, Exception innerException)
        : base(message, innerException)
    { }
} 
```

# html5-video - 嵌入/使用 mediaelement.js 的正确方法

> ID：15028118
> 
> 赞同：3
> 
> 时间：2013-02-22T15:57:08.330
> 
> 标签：html5-video, mediaelement.js, flash-video

我正在寻找嵌入 mediaelement.js 播放器的正确方法。

我必须动态添加播放器，因为我一开始不知道视频的 URL。视频将始终是 MP4 视频。如何确保每个浏览器都使用正确的播放器/插件来显示视频？例如，当前版本的 Firefox 可以播放 HTML5 视频，但它不支持 MP4 - 在这种情况下，具有 Flash 后备功能的 HTML5 视频可以工作，但 silverlight 呢？我想确保我以正确的方式执行此操作（仅 JS 或基于 jQuery 无关紧要）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T16:04:34.933

MediaElement（以及所有其他 html5 视频包装器）旨在消除所有这些担忧。如果客户端浏览器支持 html5 视频但本机不支持`mp4`（除了 IE9+ 和 Safari 之外的所有浏览器都是这种情况），那么它将尝试`mp4`使用 flash 播放器播放。

您可能希望将您的视频编码为其他格式，例如`ogv`或`webm`使其他浏览器能够使用其原生 html5 功能。

该文档可以在[mediaelement github](https://github.com/mediaelement/mediaelement)站点上找到。

# php - html/css 输入的表单安全性

> ID：15028120
> 
> 赞同：0
> 
> 时间：2013-02-22T15:57:10.673
> 
> 标签：php, forms, security

我正在用 PHP 构建一个模板工具，我希望允许用户将 html/css 内容输入到表单 textareas 中。目前我正在运行：

Strip_Tags（只允许基本的 html 和样式标签）
然后：
htmlentities
然后：
htmlspecialchars_decode（`&lt;br&gt;`例如从允许的标签转换回来）

我的表单操作使用该`htmlentities($_SERVER['PHP_SELF'])`方法。

关于保护此工具以进行在线消费还需要什么建议？我是否需要验证，如果需要，用什么过滤器？是否有某些恶意代码我也应该删除？

根据所需的输入（仅限 html/css），是否有最佳实践？我（目前）不使用数据库，但如果我需要扩大规模，我会喜欢一个伞式解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:59:56.583

第一道保护线应该是转义你的字符串，`mysqli`例如有一个方法`real_escape_string()`可以防止任何可能被解释为 SQL 的代码被执行，这个方法主要用于数据库安全。

您应该确保用户不能通过转义斜杠在您的服务器上执行恶意代码，这样做的方法是使用该[`addslashes()`](http://php.net/manual/en/function.addslashes.php)功能。

除此之外，从基本的安全角度来看，您应该很好。

# asp.net-mvc - HTTP 错误 500.21

> ID：15028121
> 
> 赞同：0
> 
> 时间：2013-02-22T15:57:16.670
> 
> 标签：asp.net-mvc, iis

我正在新的实时服务器上设置 MVC 站点。在其他非实时服务器上它工作但在实时我收到此错误

```
HTTP Error 500.21 - Internal Server Error

Handler "ExtensionlessUrlHandler-ISAPI-4.0_64bit" has a bad module "ManagedPipelineHandler" in its module list 
```

我已经安装了 MVC 3 和 MVC 4，但仍然出现此错误。我在 IIS 中重新启动站点并重新启动服务器，但没有任何效果。我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:12:32.897

您需要更改应用程序池以使用集成模式而不是经典模式。（或者是相反的方式？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T18:44:42.290

也可能是您缺少服务器上安装的正确版本的 .NET。

跑

%windir%\Microsoft.NET\Framework\v4.0.21006\aspnet_regiis.exe -i

这应该对您有所帮助，只需记住以管理员身份运行命令提示符即可。

# ios - 如何配置我的 (POSIX) 套接字以在 iOS 上使用 VoIP？

> ID：15028122
> 
> 赞同：0
> 
> 时间：2013-02-22T15:57:23.270
> 
> 标签：ios, sockets, voip

在“开发 VoIP 应用程序的技巧”下的苹果“iOS 应用程序编程指南”中，它说明了如何为 NSInputStream、NSURLRequest 和 CFReadStreamRef “配置 VoIP 使用的套接字”。但是我的套接字是使用我使用的库中的标准“sys/socket.h”创建的。我该如何配置？

谢谢

# php - SQL 查询：行到列转入 PHP 数组/HTML 输出

> ID：15028124
> 
> 赞同：0
> 
> 时间：2013-02-22T15:57:26.380
> 
> 标签：php, mysql, sql, pivot

感谢您提前提供的所有帮助。

我在 MySQL PHPmyAdmin 中有一个名为“数据”的表，如下所示；

```
Primary | Date| User | Response
   1      Mon   Tom      Yes
   2      Mon   Terry    No
   3      Mon   Lucas    Yes
   4      Tue   Tom      No
   5      Tue   Terry    No
   6      Tue   Lucas    Yes
   7      Wed   Tom      Yes
   8      Wed   Terry    Yes
   9      Wed   Lucas    No 
```

我如何通过最可能的 SQL 查询或 Pivot / php 数组输出到表中，以便为 HTML 表输出做好准备；

```
Date | Tom | Terry | Lucas
Mon    Yes   No      Yes
Tue    No    No      Yes
Wed    Yes   Yes     No 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:59:21.923

```
SELECT  Date,
        MAX(CASE WHEN user = 'Tom' THEN Response ELSE NULL END) Tom,
        MAX(CASE WHEN user = 'Terry' THEN Response ELSE NULL END) Terry ,
        MAX(CASE WHEN user = 'Lucas' THEN Response ELSE NULL END) Lucas
FROM    tableName
GROUP   BY Date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e5321/1)

如果您有未知数量的`days`，则更优选动态 sql，

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when user = ''',
      user,
      ''' then Response end) AS ',
      user
    )
  ) INTO @sql
FROM tableName;

SET @sql = CONCAT('SELECT  Date, ', @sql, ' 
                  FROM    tableName
                  GROUP   BY Date');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e5321/4)

# c - C中的地址加法和乘法

> ID：15028125
> 
> 赞同：0
> 
> 时间：2013-02-22T15:57:29.593
> 
> 标签：c, memory-management

有没有办法在 C 中添加两个内存地址或将内存地址与数字相乘？

如果是这样，怎么做？例如，假设我有地址：

```
void * p = (void *) 0x80000000; 
```

我想乘以 2 或添加另一个地址，以更改变量的当前地址！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:00:24.713

该值`0x28ff44`不是“变量的地址” `p`，它仅仅是变量的值。由于变量是指针，因此值是地址。您当然可以通过转换为整数来修改该值*，就好像*它是一个整数一样，但是您为什么要这样做呢？

这是一个将指针值加倍的愚蠢函数：

```
void * double_address(void *p)
{
   const intptr_t pi = (intptr_t) p;

   return (void *) 2 * pi;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:00:42.267

您不能*有意义地*^*在 C 中将两个地址相加，或者将一个地址乘以一个数字或另一个地址。允许的两个操作是减去指向连续内存块的地址，以及将正整数或负整数添加到地址。将两个地址相乘或相加没有意义，因为结果不会产生有意义的地址。

* * *

^*这样想：因为地址只是数字，而且因为数学可以让你自由地乘法和加法，并不意味着数学运算的结果会产生任何有意义的东西。例如，您当然可以将机场跑道的长度（以英寸为单位）与飞机油箱的容量（以加仑为单位）相加。由于这种奇怪的计算，你会得到一个数字，但它仍然只是一个数字序列，在物理世界中没有任何意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:00:57.400

我知道你唯一能做的就是向指针添加一个整数值，这将导致指针在内存中移动`sizeof(pointertype)`。

例子：

```
int* ptr;
int arr[2];
//put some values in arr;
ptr = &arr[0];
ptr = ptr + 1; // will cause the pointer to move along in the array by `sizeof(int)` 
```

以我从未听说过或见过的任何其他方式添加或增加地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:03:08.727

你能解释一下你想做什么吗？

您可以将变量复制到另一个指针，然后设置为设置第一个变量。

```
// Creates new pointer with new address (why ?)
void* new_var_ptr = malloc( <size_of_p> );

// Copy content of "p" address to "new_var_ptr" address
memcpy( new_var_ptr, p, <size_of_p> );

// Set "p" content to NULL (optional)
memset( p, 0, <size_of_p> );

// Set "p" to NULL (optional)
p = NULL 
```

那么“new_var_ptr”会指向p之前的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:14:32.390

在 C 中添加两个地址是无效的，而且很可能永远不会做任何您想做的事情。您可能希望从一个指针到另一个指针添加一个偏移量，例如：

```
 char *ptr1 = ...;
 char *ptr2 = ...;   
 ptrdiff_t d = ptr1 - ptr2;
 char *ptr3 = ptr2 + d; 
```

`ptr1`[请注意，以上仅在和指向“相同对象”时才正式有效`ptr2`- 即相同的分配或相同的数组或类似的]

将一个指针乘以另一个指针将更加没有意义[请原谅双关语！]。由于指针往往是相当大的数字，因此两个指针相乘的结果也很可能溢出结果，使其更加无用。

# python - Python 3：在 Python 脚本中启动 Bash 脚本

> ID：15028137
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:57:54.517
> 
> 标签：python, linux, macos, python-3.x, subprocess

我创建了一个 TCP 客户端/服务器，用于确定软件是否是最新的，如果不是，它会调用 bash 脚本来执行软件升级。我已经使用以下代码在 Windows 上成功运行并从 Cygwin 启动客户端

```
subprocess.call("windowsUpgrade.sh", shell=True) 
```

但是，当我尝试从基于 Linux 或 Mac 的客户端使用它时，我得到了错误

```
/bin/sh: linuxUpgrade.sh: not found 
```

和

```
/bin/sh: macUpgrade.sh: command not found 
```

关于导致此问题的原因以及如何解决的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:00:09.143

当前目录默认不在 PATH 变量中，在该变量中搜索可执行文件，请尝试：

```
subprocess.call("./linuxUpgrade.sh", shell=True) 
```

另外，请确保您的脚本被标记为可执行

```
chmod u+x linuxUpgrade.sh 
```

# java - @RequestBody 带有通用/基本请求参数

> ID：15028139
> 
> 赞同：1
> 
> 时间：2013-02-22T15:57:58.513
> 
> 标签：java, spring, spring-mvc

我有几个控制器扩展了解决横切关注点的 BaseController。

我现在计划在 BaseController 中添加一个新方法，该方法可以为所有控制器提供通用功能。

但问题是我有不同的 Request 和 Response 对象，直到运行时我才知道 @RequestBody 参数将是什么。我怎样才能使它通用，以便我可以处理任何类型的请求对象？

附带说明一下，我所有的请求和响应对象都扩展了一个通用的 BaseRequest 和 BaseResponse 对象。

我正在使用 Spring Web 3.1.2 版本。

有什么建议吗？

# php - php上传和信箱

> ID：15028143
> 
> 赞同：0
> 
> 时间：2013-02-22T15:58:11.657
> 
> 标签：php, image, resize, gdlib

我需要上传一个图像文件，然后创建一个更宽的图像，并在其中调整原始大小。看互联网，我发现了一些可以做到这一点的东西：

```
 function resize_image($source_image, $destination_width, $destination_height, $type = 2) {
    // $type (1=crop to fit, 2=letterbox)
    $source_width = imagesx($source_image);
    $source_height = imagesy($source_image);
    $source_ratio = $source_width / $source_height;
    $destination_ratio = $destination_width / $destination_height;
    if ($type == 1) {
        // crop to fit
        if ($source_ratio > $destination_ratio) {
            // source has a wider ratio
            $temp_width = (int)($source_height * $destination_ratio);
            $temp_height = $source_height;
            $source_x = (int)(($source_width - $temp_width) / 2);
            $source_y = 0;
        } else {
            // source has a taller ratio
            $temp_width = $source_width;
            $temp_height = (int)($source_width / $destination_ratio);
            $source_x = 0;
            $source_y = (int)(($source_height - $temp_height) / 2);
        }
        $destination_x = 0;
        $destination_y = 0;
        $source_width = $temp_width;
        $source_height = $temp_height;
        $new_destination_width = $destination_width;
        $new_destination_height = $destination_height;
    } else {
        // letterbox
        if ($source_ratio < $destination_ratio) {
            // source has a taller ratio
            $temp_width = (int)($destination_height * $source_ratio);
            $temp_height = $destination_height;
            $destination_x = (int)(($destination_width - $temp_width) / 2);
            $destination_y = 0;
        } else {
            // source has a wider ratio
            $temp_width = $destination_width;
            $temp_height = (int)($destination_width / $source_ratio);
            $destination_x = 0;
            $destination_y = (int)(($destination_height - $temp_height) / 2);
        }
        $source_x = 0;
        $source_y = 0;
        $new_destination_width = $temp_width;
        $new_destination_height = $temp_height;
    }
    $destination_image = imagecreatetruecolor($destination_width, $destination_height);
    if ($type > 1) {
        imagefill($destination_image, 0, 0, imagecolorallocate ($destination_image, 255, 255, 255));
    }
    imagecopyresampled($destination_image, $source_image, $destination_x, $destination_y, $source_x, $source_y, $new_destination_width, $new_destination_height, $source_width, $source_height);
    return $destination_image;
} 
```

我上传图片后调用这个函数

```
/// Set the working path
$destination_path = getcwd().DIRECTORY_SEPARATOR;
// 
$result = 0;

/// Upload File   
    $target_path = $destination_path . 'img'.DIRECTORY_SEPARATOR . basename( $_FILES['myFile']['name']);

if(move_uploaded_file($_FILES['myFile']['tmp_name'], $target_path)) {

// If it's all ok I set the destination path for the wider image
// 
$pathDestinazione = $destination_path . $_POST['pathRidimensionata'] . basename($_FILES['myFile']['name']);

// collect some infos about the source file
list($width, $height, $type, $attr) = getimagesize($target_path);

// Set the desidered dimension 
$desideredWidth = $_POST['width'];
$desideredHeight = $_POST['height'];

//I begin to create the new image 

$thumb = resize_image($target_path,$desideredWidth,$desideredHeight,2);   
imagejpeg($thumb, $pathDestinazione, 60);

//if everything it's ok
$result = 1;
}else{
    $result = $_FILES['myFile']['error'];
    } 
```

但结果总是一个白色的图像......我不明白是错误的，但我真的是 php 新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:05:18.487

您的函数有参数 $source_image - 这是图像句柄类型。这应该是函数 imagecreatefromjpeg 或其他（gif、png）的结果。但是你调用函数并作为字符串传递给文件名。

您应该从上传的文件创建图像，然后调用函数。

# c# - C#如何总是向下舍入到最接近的50

> ID：15028144
> 
> 赞同：19
> 
> 时间：2013-02-22T15:58:12.803
> 
> 标签：c#, function, math, decimal, rounding

我已经对 C# 舍入进行了搜索，但无法找到当前问题的答案。

我想要做的总是向下舍入到最接近的 50。我要向下舍入的所有值都是十进制的。

所以 635.25 将是 600。

298.42 将是 250。

149.56 将是 100。

我看过 math.round 但我将如何使用它，所以它总是向下舍入到最接近的 50 并且从不向上？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-22T16:00:41.627

将该值除以 50，向下舍入到最接近的整数，然后再次乘以 50：

```
double n = Math.Floor(n / 50.0) * 50.0; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T16:00:35.353

Guffa 的另一种方式：

```
(((int) value) / 50) * 50 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-19T15:53:53.017

使用模数：

```
var roundedDownToClosestFifty = value - (value % 50); 
```

# c# - ASP.NET Web App 创建以从 SQL 检索和显示

> ID：15028147
> 
> 赞同：-3
> 
> 时间：2013-02-22T15:58:15.883
> 
> 标签：c#, asp.net, web-applications, telerik

我正在尝试在 ASP.NET C# 中创建一个非常简单的 Web 类型应用程序，该应用程序将允许用户在一个框中输入 3 位 ID，然后它将在一个单独的框中返回名称，该名称与存储在 SQL 中的数据不同。

完成此步骤后，像他们一样输入他们工作的开始时间和结束时间，然后进行自动计算并向他们显示以小时和分钟为单位花费的时间。

最后，在他们勾选了一个框，说如果他们在那里工作了 30 分钟的午休时间，他们会输入一个工作编号，然后它会通过存储过程将其写回 sql 数据库。

我到底要从哪里开始？

我尝试了一些 Telerik 控件和绑定到数据源的基本 ASP.NET 框，但无法在屏幕上返回任何内容（尽管通过测试连接向导运行到 SQL 时返回结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:09:09.310

我会开始听到

[http://www.w3schools.com/aspnet/default.asp](http://www.w3schools.com/aspnet/default.asp)

然后也许继续

[http://msdn.microsoft.com/en-us/vstudio/hh341490.aspx](http://msdn.microsoft.com/en-us/vstudio/hh341490.aspx)

和

[http://msdn.microsoft.com/en-us/library/ee532866(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee532866(v=vs.100).aspx)

当你有更好的理解时，

# sql-server - 如何使用 sp_send_dbmail 在电子邮件正文中包含查询参数的值

> ID：15028149
> 
> 赞同：0
> 
> 时间：2013-02-22T15:58:25.510
> 
> 标签：sql-server

我正在调用 sp_send_dbmail 并设置查询参数。生成的电子邮件包含查询结果。我希望将实际查询（查询参数的值）附加到电子邮件中，以便电子邮件将包含结果，然后在最后包含查询本身。

这将有助于调试。

# asp.net-mvc - 如何使用 ViewModel 定义 DataAnnotations？

> ID：15028152
> 
> 赞同：0
> 
> 时间：2013-02-22T15:58:27.353
> 
> 标签：asp.net-mvc, entity-framework, viewmodel, data-annotations

我用“ADO.NET Entity Data Model”创建我的模型类，所以如果我改变我的数据库，我的模型类就会改变..

我的第一堂课来自“ADO.NET 实体数据模型”；

```
public partial class TableA
    {
        public TableA()
        {
            this.TableBs = new HashSet<TableB>();
        }

        public int TableAID { get; set; }
        public string TableAName { get; set; }

        public virtual ICollection<TableB> TableBs { get; set; }
    } 
```

我的第二堂课来自“ADO.NET Entity Data Model”；

```
 public partial class TableB
    {
        public TableB()
        {
            this.TableAs = new HashSet<TableA>();
        }

        public int TableBID { get; set; }
        public string TableBName { get; set; }
        public int TableCID { get; set; }

        public virtual TableC TableC { get; set; }
        public virtual ICollection<TableA> TableAs { get; set; }
    } 
```

我的第三堂课来自“ADO.NET Entity Data Model”；

```
 public partial class TableC
    {
        public TableC()
        {
            this.TableBs = new HashSet<TableB>();
        }

        public int TableCID { get; set; }
        public string TableCName { get; set; }

        public virtual ICollection<TableB> TableBs { get; set; }
    } 
```

还有我的 ViewModel；

```
public class MyViewModel
{
    public TableA tableA { get; set; }
    public IEnumerable<TableB> tableBs { get; set; }
    public IEnumerable<TableC> tableCs { get; set; }
} 
```

我想在我的 ViewModel 中这样做；

```
 [Required]
    [Display(Name = "TableA Name")]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    public string TableAName { get; set; } 
```

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:15:15.200

ViewModel 不应**使用**您生成的域类 (TableA)。

TableA 的ViewModel*示例*将是以下类：

```
public class TableAViewModel {

  [Required]
  public int Id { get; set }

  [Required]
  [Display(Name = "TableA Name")]
  [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
  public string Name { get; set; }

  IEnumerable<TableBViewModel> TableBViewModels { get; set; }
} 
```

在控制器中，您将按类将检索到的属性从数据库移动`TableA`到`TableAViewModel`类中。在从视图回发时，您会将这些属性移回`TableA`.

您可以使用[AutoMapper](http://automapper.codeplex.com/)来执行此操作（对于对象和对象列表）

在您的视图模型`TableAViewModel`中，您可以像我的示例中那样添加数据注释（取自您的课程）。它是您要使用的类，它们不会被任何东西自动重新生成，并且在您的视图中使用视图模型而不是域（数据库）类是一种很好的做法。

希望这可以帮助。

# javascript - 接受一个参数并返回一个返回该参数的函数的函数

> ID：15028154
> 
> 赞同：1
> 
> 时间：2013-02-22T15:58:39.910
> 
> 标签：javascript, scope

我试图围绕`something`等于返回的匿名函数值的值的事实来思考。我认为通过范围界定它无法访问函数变量。

那么跟注如何`something`给你 3 的值呢？

```
 function somefun (x){
     return function(){
         return x;
     }
 }

 var something = somefun (3);
 something();
 //3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:03:35.287

在 JavaScript 中，函数只是对象，就像其他任何东西一样。函数可以分配给变量。

所以`somefun`返回一个分配给 的函数`something`。因此，`something`是一个函数。

因此，当`something()`运行时，它会返回一个值，因为它是一个函数。

该函数称为“闭包”。它保留对`x`值的引用，这就是它返回给您的原因。

# java - 内部类中的非最终变量

> ID：15028156
> 
> 赞同：4
> 
> 时间：2013-02-22T15:58:47.163
> 
> 标签：java, android

我尝试动态创建一个 ImageView 并且我想将此 imageView 作为参数传递给侦听器的方法。

```
 ImageView imageView1 = new ImageView(LookActivity.this);

            imageView1.setOnTouchListener(new OnTouchListener() {

                    @Override
                    public boolean onTouch(View arg0, MotionEvent arg1) {
                        detectLocationAndShowPopUp(imageView1);
                        return true;
                    }
                }) 
```

但是我遇到了以下错误：
Cannot reference an non-final variable imageView1 inside an internal class defined in a different method。

我不想将 imageView 声明为最终的。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T16:01:15.687

您可以制作 imageView1 的副本，然后在侦听器中使用该副本：

```
ImageView imageView1 = new ImageView(LookActivity.this);
final ImageView imageView2 = imageView1;

imageView1.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        detectLocationAndShowPopUp(imageView2);
        return true;
    }
}); 
```

在 Sam 发表评论后，我将代码更改为：

```
ImageView imageView1 = new ImageView(LookActivity.this);

imageView1.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        detectLocationAndShowPopUp((ImageView) view);
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T16:02:08.503

由于这是 Android，`arg0`当您触摸它时将成为您的图像。利用：

```
detectLocationAndShowPopUp((ImageView) arg0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:01:09.020

创建`ImageView imageView1`为全局类变量。

并在函数内部初始化它，而无需再次声明它。

就像是

```
MyClass extends ...
{
....
ImageView imageView1;
.
.
.
.
.
myFucntion()
{
imageView1 = new ImageView(LookActivity.this);
}

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T16:01:29.407

不要`ImageView`在方法中定义。使其成为在您的类定义下声明的成员变量

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T16:04:35.167

您使用的是匿名类而不是内部类（如标题所示）。在匿名类中，您只能引用`final`“变量”。

如果您不想添加并且`final`不想`imageView`使用另一个最终变量，您可以使用内部类：

```
public class YourActivity extends ... {
  public void yourMethod() {
    ImageView imageView1 = new ImageView(LookActivity.this);
    imageView1.setOnTouchListener(new MyListener(imageView1));
  }

  private class MyListener extends OnTouchListener {
    private ImageView imageView;

    public MyListener(ImageView iv) {
      this.imageView = iv;
    }

    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
     detectLocationAndShowPopUp(imageView);
     return true;
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T16:04:56.383

**想法一**：使用另一个最终变量。

```
ImageView imageView1 = new ImageView(LookActivity.this);
final ImageView finalImageView = imageView1;
imageView1.setOnTouchListener(new OnTouchListener() {
  @Override
  public boolean onTouch(View arg0, MotionEvent arg1) {
    detectLocationAndShowPopUp(finalImageView);
    return true;
  }
}) 
```

**思路二**：使用ImageView的匿名子类，然后使用`ImageView.this`引用。

```
ImageView imageView1 = new ImageView(LookActivity.this) {{
  setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
      detectLocationAndShowPopUp(ImageView.this);
      return true;
    }
}}; 
```

# magento - Magento“刷新缓存存储”

> ID：15028159
> 
> 赞同：8
> 
> 时间：2013-02-22T15:58:56.590
> 
> 标签：magento, caching, cron, storage, flush

我了解 Magento 中“Flush Magento Cache”和“Flush Cache Storage”之间的区别（[示例](https://stackoverflow.com/questions/5955365/what-is-the-difference-between-flush-magento-cache-and-flush-cache-storage-i)）。我正在尝试执行一项会不时刷新缓存存储的 cron 作业。

我假设这个按钮不只是删除 var/cache/ 的内容，但我找不到一个可靠的资源来说明它的作用。我正在使用 APC 以及所有内置的 Magento 缓存功能。

是否可以从脚本中运行相当于“Fluch Cache Storage”按钮的功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T16:24:53.920

在 中`app/code/core/Mage/Adminhtml/controllers/CacheController.php`，您可以看到`flushAllAction()`（单击时调用的操作`Flush Cache Storage`）被调用。

该函数包含以下内容：

```
/**
 * Flush cache storage
 */
public function flushAllAction()
{
    Mage::dispatchEvent('adminhtml_cache_flush_all');
    Mage::app()->getCacheInstance()->flush();
    $this->_getSession()->addSuccess(Mage::helper('adminhtml')->__("The cache storage has been flushed."));
    $this->_redirect('*/*');
} 
```

要在您自己的文件中调用它，您可以执行以下操作。

```
require_once('app/Mage.php');
Mage::app()->getCacheInstance()->flush(); 
```

现在，您可以使用 cronjob 运行您的 php 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:56:15.833

[在这里](http://blog.nexcess.net/2011/05/21/clearing-the-cache-in-magento/)你可以找到关于“刷新缓存存储”和“刷新 Magento 缓存”之间区别的很好的解释。

我同意您应该使用以下方法创建 CRON TASK（如果确实需要清理缓存）（[如何](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)）：

```
public function flushAllAction()
{
    // Additional code if necessary
    Mage::app()->getCacheInstance()->flush();
    // Additional code if necessary
} 
```

如果您需要进一步的帮助，请不要犹豫。

# cordova - 使用自定义图像进行离线映射：如何使图像居中并填满屏幕

> ID：15028161
> 
> 赞同：0
> 
> 时间：2013-02-22T15:59:02.377
> 
> 标签：cordova, map, openlayers, offline

我想制作一个应用程序，您可以在其中全屏平移和缩放图像。标记将显示有关图像该部分的信息。这很像一张地图。所以我开始使用 Phonegap 和 OpenLayers 离线映射。现在我成功实现了这一点，但我似乎没有抓住坐标系。当我在 Android 上运行我的应用程序时，它会显示一个空白屏幕，直到我触摸缩放控件。然后突然之间图像是可见的，你可以拖动它并探索它。我认为它与坐标系有关。

这是我的初始化函数，它基本上具有显示地图并使其工作的所有内容：我正在寻找一种方法来使我的图像居中并在运行此应用程序时使其填满整个屏幕。

```
var init = function () {
// create map
map = new OpenLayers.Map({
    div: "map",
    theme: null,

    // komt van http://trac.osgeo.org/openlayers/wiki/UsingCustomTiles
    maxExtent: new OpenLayers.Bounds(  0.0, -3433.0, 3433.0, 0.0 ),
    maxResolution: 16.000000,
    numZoomLevels: 7,
    // end

    controls: [
        new OpenLayers.Control.Attribution(),
        new OpenLayers.Control.TouchNavigation({
            dragPanOptions: {
                enableKinetic: true
            }
        }),
        new OpenLayers.Control.Zoom()
    ],
    layers: [
        new OpenLayers.Layer.TMS( "TMS Layer","",
                {  url: '', serviceVersion: '.', layername: '.', alpha: false,
                    type: 'jpg', getURL: overlay_getTileURL,
                    transitionEffect: 'resize'
                })
    ],
    center: new OpenLayers.LonLat(1000, 1000),
    zoom: 3
});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:19:31.130

It's very common problem - you need `map.zoomToMaxExtent();` in the end of your init function.

# c# - 这可以在 C# 中完成吗？

> ID：15028163
> 
> 赞同：1
> 
> 时间：2013-02-22T15:59:10.003
> 
> 标签：c#, winforms, picturebox

我不知道该怎么称呼它，所以我无法搜索谷歌或任何东西。

我的问题是：

我怎样才能在 C# 中制作这样的东西？

![你怎么能做到这一点？](../Images/6bb6ff30b97cafea497193ab7ecdc7e3.png)

或者这在 C# 中是不可能的？

就像不使用 a`Form`而只是`PictureBox`在程序启动时执行类似 a 的操作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:00:30.253

它被称为闪屏，在 C# 中很有可能。

它可能只是一个带有图像和占位符标签的透明表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:04:35.943

您可以使用表单上的图像和透明背景来完成此操作，这足以满足典型的初始屏幕。

但是，如果您需要制作一个不规则的表单，您可以在其中与表单的边界矩形后面的内容进行交互，[您需要获得更多的创意](http://www.vcskicks.com/custom_shape_form_region.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:03:11.153

有一篇关于创建者的博文以及他用于启动画面的内容，您可以参考以下内容：

[http://blogs.msdn.com/b/visualstudio/archive/2009/11/11/behind-the-scenes-splash-screen.aspx](http://blogs.msdn.com/b/visualstudio/archive/2009/11/11/behind-the-scenes-splash-screen.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:07:17.267

**`VS2010`**作为**`WPF`**应用程序运行。WPF 支持完整的 Alpha 通道透明度，因此使用 WPF 时非矩形启动画面总是比使用 winforms 时更好看

试试这个[http://www.vcskicks.com/splash-screen.php](http://www.vcskicks.com/splash-screen.php)，您可以在其中创建自定义启动画面。

# python - 用于检索专利数据库的 Python 模块，即 USPTO 或 EPO

> ID：15028166
> 
> 赞同：9
> 
> 时间：2013-02-22T15:59:14.167
> 
> 标签：python, python-2.7, search

对于我的工作，我必须在生物医学研究和工业领域寻找潜在客户。

我使用模块 biopython 编写了一些非常方便的程序，它有一个很好的界面来搜索 NCBI。我还使用了clinical_trials 模块来搜索clinicaltrials.gov。

我现在想搜索专利数据库，如 EPO 或 USPTO，但我什至找不到任何 python 模块的踪迹。但也许我错过了一些明显的东西？

由于谷歌有专利搜索选项，我想知道是否可能有一个用于搜索谷歌的 python 模块，它可以适应只搜索专利？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-21T23:15:31.693

您至少可以使用任何 XML 解析工具（例如 lxml python 模块）解析 USPTO。

Gabe Fierro 有一篇关于这样做的好论文，可在此处获得：[从 USPTO XML 提取和格式化专利数据](http://funginstitute.berkeley.edu/wp-content/uploads/2013/06/Extracting_and_Formatting.pdf)（无付费墙）

[Gabe 还在这个 google 小组](https://groups.google.com/forum/#!msg/disambiguation/hm5vsUqhiFo/wh2sdOyaNswJ)中参与了一些关于这样做的有用讨论。

最后，如果您知道要查找的内容并且有足够的磁盘空间，您还可以获取本地存储的大量数据以进行处理。[美国专利商标局在此处](http://www.google.com/googlebooks/uspto-patents-grants-text.html)批量下载。

有更具体的问题请告诉我！我以前曾涉足过这个领域:)

此外，Google 专利搜索 API 已被弃用，但您现在可以使用 URL 标签通过主要的 Google 搜索 API 进行相同的搜索（我手边没有它们，但您可以通过 Google 专利搜索找到它们，这将得到响应由 google.com）。

更新：现在在家中，您想使用谷歌自定义搜索 API 进行专利搜索的标志是 &tbm=pts - 请注意，谷歌自定义搜索引擎并获取相同的代码对于专利搜索非常有益，因为提供的 JSON 具有具有专利特定字段的漂亮数据结构。

示例代码：

```
import requests
import urllib
import time
import json

access_token = <get yours by signing up for google custom search engine api>
cse_id = <get yours by signing up for google custom search engine api>

# Build url
start=1
search_text = "+(inassignee:\"Altera\" | \"Owner name: Altera\") site:www.google.com/patents/"
# &tbm=pts sets you on the patent search
url = 'https://www.googleapis.com/customsearch/v1?key='+access_token+'&cx='+cse_id+'&start='+str(start)+'&num=10&tbm=pts&q='+ urllib.quote(search_text)

response = requests.get(url)

response.json()
f = open('Sample_patent_data'+str(int(time.time()))+'.txt', 'w')
f.write(json.dumps(response.json(), indent=4))
f.close() 
```

这将（一旦您添加免费的 API 访问信息）获取 Altera 拥有的前十项专利（作为示例）并将生成的 JSON 保存到文本文件中。调出您最喜欢的 Web JSON 编辑器并查看 JSON 文件。特别是我建议查看 ['items'][] 和子 ['pagemap']。只需解析这个 JSON，您就可以获得标题、缩略图、片段、标题、链接，甚至引用（如果相关）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T09:38:23.757

我不知道现成的 python 模块，但你可以构建自己的。USPTO 和 EPO 都有 API，可在[http://www.epo.org/searching/free/ops.html](http://www.epo.org/searching/free/ops.html)和[http://tsdr.uspto.gov/](http://tsdr.uspto.gov/)找到。

我不知道使用这些文档有多么容易，但您可以尝试制作一个简单的查询器来检索和解析结果。当然，您所追求的数据越广泛，编写模块的工作量就越多。

# php - CodeIgniter 中的 PHPExcel 错误“无法加载请求的类：iofactory”

> ID：15028175
> 
> 赞同：2
> 
> 时间：2013-02-22T15:59:39.403
> 
> 标签：php, codeigniter, phpexcel

我正在尝试使用 PHPExcel 1.7.8 + CodeIgniter 2.1.3 导出 XLS 文件

我已按照[PHPExcel的所有说明进行操作](https://github.com/EllisLab/CodeIgniter/wiki/PHPExcel)

但我收到此错误：

> > 无法加载请求的类：`iofactory`

这是我的控制器代码：

```
 //expoxt to excel all admin data
function export_excel_admin()
{
    //$data['resultsadmin'] = $this->admin_model->get_all_data_admin();
    //var_dump($data['resultsadmin']);
    //$this->load->view('administrator/export_excel/export_excel_admin', $data);
    $query = $this->db->get('tbl_admin');

    if(!$query)
        return false;

    // Starting the PHPExcel library
    $this->load->library('excel');
    $this->load->library('PHPexcel/IOFactory');

    $objPHPExcel = new PHPExcel();
    $objPHPExcel->getProperties()->setTitle("export")->setDescription("none");

    $objPHPExcel->setActiveSheetIndex(0);

    // Field names in the first row
    $fields = $query->list_fields();
    $col = 0;
    foreach ($fields as $field)
    {
        $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, 1, $field);
        $col++;
    }

    // Fetching the table data
    $row = 2;
    foreach($query->result() as $data)
    {
        $col = 0;
        foreach ($fields as $field)
        {
            $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $data->$field);
            $col++;
        }

        $row++;
    }

    $objPHPExcel->setActiveSheetIndex(0);

    $objWriter = IOFactory::createWriter($objPHPExcel, 'Excel5');

    // Sending headers to force the user to download the file
    header('Content-Type: application/vnd.ms-excel');
    header('Content-Disposition: attachment;filename="Products_'.date('dMy').'.xls"');
    header('Cache-Control: max-age=0');

    $objWriter->save('php://output');

} 
```

啊，我也删除了 IOFactory.php 文件中的“PHPExcel_”部分，这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T17:21:19.950

我之前已经成功使用 PHPExcel 和 CodeIgniter。

我所做的只是将 phpexcel 文件夹放入 application/third-party 并创建以下包装库：

```
<?php

class Excel {

    private $excel;

    public function __construct() {
        // initialise the reference to the codeigniter instance
        require_once APPPATH.'third_party/phpexcel/PHPExcel.php';
        $this->excel = new PHPExcel();    
    }

    public function load($path) {
        $objReader = PHPExcel_IOFactory::createReader('Excel5');
        $this->excel = $objReader->load($path);
    }

    public function save($path) {
        // Write out as the new file
        $objWriter = PHPExcel_IOFactory::createWriter($this->excel, 'Excel5');
        $objWriter->save($path);
    }

    public function stream($filename) {       
        header('Content-type: application/ms-excel');
        header("Content-Disposition: attachment; filename=\"".$filename."\""); 
        header("Cache-control: private");        
        $objWriter = PHPExcel_IOFactory::createWriter($this->excel, 'Excel5');
        $objWriter->save('php://output');    
    }

    public function  __call($name, $arguments) {  
        // make sure our child object has this method  
        if(method_exists($this->excel, $name)) {  
            // forward the call to our child object  
            return call_user_func_array(array($this->excel, $name), $arguments);  
        }  
        return null;  
    }  
}

?> 
```

然后我可以在我的控制器中执行以下操作：

```
$this->load->library("excel");
$this->excel->load("/path/to/input.xls");
$this->excel->setActiveSheetIndex(0);
$this->excel->getActiveSheet()->SetCellValue('B2', "whatever");
$this->excel->save("/path/to/output.xls"); 
```

希望这可以帮助你？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-05T04:36:51.417

也许这个评论为时已晚。但也许对其他人有用。

更改以下零件代码：

```
// Starting the PHPExcel library
$this->load->library('excel');
$this->load->library('PHPexcel/IOFactory'); 
```

到：

```
// Starting the PHPExcel library
$this->load->library('excel');
//$this->load->library('PHPexcel/IOFactory'); 
```

然后也更改此部分代码：

```
 $objWriter = IOFactory::createWriter($objPHPExcel, 'Excel5'); 
```

到：

```
 $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:56:06.597

所有你需要的是

```
//afrer this you can use any of PHPExcel classes and methods
$this->load->file(APPPATH.'libraries/PHPExcel.php'); //full path to 

$objReader = new PHPExcel_Reader_Excel2007();//change by filetype
try {
    $objPHPExcel = $objReader->load($inputFileName); //you file name
} catch (Exception $e) {
    show_error($e->getMessage());
} 
```

在 CI 2.1.3 && PHPExcel 1.7.8 上测试

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-06T17:03:09.667

我按照这些说明进行 CodeIgniter 和 PHPExcel 之间的集成。

在 CI 中创建一个新的 PHP 文件`application/libraries/`并将其命名为 Excel.php。

```
require_once APPPATH."/third_party/PHPExcel.php";
class Excel extends PHPExcel {
 public function __construct(){
  parent::__construct(); 
 } 
} 
```

要遵循完整的说明，请访问[轻松将 Phpexcel 集成到 Codeigniter 框架](http://www.ahowto.net/php/easily-integrateload-phpexcel-into-codeigniter-framework/)中。

# php - 将 Store View 设置为操作

> ID：15028178
> 
> 赞同：0
> 
> 时间：2013-02-22T15:59:48.693
> 
> 标签：php, magento, magento-1.6

您将如何确保您的代码在一个 Store View 上始终如一地更改属性（或执行任何其他操作）？

我有“所有商店视图”、“默认商店视图”和“批发商店视图”。

是否有一些 Magento PHP 代码可以做到这一点？就像是：

```
->setCurrentStoreView("WHOLESALE_STORE_VIEW"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:22:30.423

是的：`->setCurrentStore('YOUR_STORE_ID');`

`YOUR_STORE_ID`将是您的商店查看代码。您可以在 php 中的任何位置更改它`Mage::app()->setCurrentStore('YOUR_STORE_ID');`

# asp.net - 会话超时.NET

> ID：15028184
> 
> 赞同：5
> 
> 时间：2013-02-22T16:00:06.467
> 
> 标签：asp.net, .net, session, timeout

我搜索了但我没有找到这个问题的任何具体答案。在会话到期之前，我如何在服务器中获得价值？我的会话设置：

//超时，例如 10 分钟。

```
<authentication mode="Forms"> <forms name=".ASPXAUTH_External" loginUrl="Authentication/Unauthorized.aspx" protection="All" timeout="10" path="/" slidingExpiration="true" defaultUrl="~/Pages/home.aspx" cookieless="UseDeviceProfile" enableCrossAppRedirects="false"/>
</authentication>
<sessionState mode="InProc" timeout="10">
</sessionState> 
```

我得到初始值（它将得到 10*60 = 600 秒）：

```
SessionStateSection sessionSection = (SessionStateSection)WebConfigurationManager.GetSection("system.web/sessionState");
countdown.Text = sessionSection.Timeout.TotalSeconds.ToString(); 
```

但是当会话时间剩下不到一半并且用户执行一些操作时。我得到初始值 600，但它与剩余会话时间不相等，因为“slidingExpiration”会**增加一些时间**（我不知道多少），但不会将会话剩余时间重置为开始 10 分钟点。

**如何获得到期前的剩余会话时间？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:27:08.473

我发现会话到期的时间我可以这样：

```
DateTime dateNow = DateTime.Now;
if (HttpContext.Current.User.Identity is FormsIdentity)
{
    HttpCookie authCookie = this.Context.Request.Cookies[FormsAuthentication.FormsCookieName];
    FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
    double leftSeconds = (authTicket.Expiration - dateNow).TotalSeconds;
    // Control in MasterPage, where I setting value ant then taking for JavaSript to CountDown message
    countdown.Text = leftSeconds > 0 ? leftSeconds.ToString() : "0";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T20:31:42.087

遵循 Drasius 方法，我编写了一个 VB 解决方案，如下所示。

在 Session_Start 上的 global.asa 中，我有——

```
 Session("sessStart") = DateTime.Now
    Session("TO") = Session.Timeout 
```

在页面主文件中我有 -

```
 Dim timemsg As String = ""
    Dim sstrt As DateTime = Session("sessStart")
    timemsg = "Strt=" & sstrt.ToShortTimeString() & " TO=" & Session("TO") & "<br />"
    Dim datenow = DateTime.Now
    Dim cusrn = HttpContext.Current.User.Identity.Name
    If cusrn <> "" Then
        Dim authcookie As System.Web.HttpCookie
        authcookie = HttpContext.Current.Request.Cookies(FormsAuthentication.FormsCookieName)
        Dim authTicket As System.Web.Security.FormsAuthenticationTicket
        authTicket = FormsAuthentication.Decrypt(authcookie.Value)
        Dim leftminutes = (authTicket.Expiration - datenow).TotalMinutes
        timemsg &= "Remain: "
        If leftminutes > 0 Then
            timemsg &= leftminutes.ToString("F1") & " mins"
        Else
            timemsg &= "0 mins"
        End If
    End If
    lblShowTime.Text = timemsg 
```

这很有效——当我刷新页面时，我会减少超时时间。但是，剩余的初始时间总是显示 30 分钟，即使我的 web.config 设置如下：

```
<sessionState mode="InProc" timeout="20" /> 
```

所以我不太确定这种方法是否给出了一个与实际会话超时真正同步的超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:06:26.390

如果你是服务器端，它会被重置（在任何回发时），所以如果你有 10 分钟，那就是 10 分钟。客户端您可以在最后一次访问服务器后设置一个计时器，例如，您可以设置一个 8 分钟的计时器，然后警告会话将在 2 分钟后到期...当然您希望显示剩余的实际时间，而不是静态的信息。

查看 setTimeout 方法。 [此链接](http://www.w3schools.com/js/js_timing.asp)包含有关您可能使用的一些 javascript 计时方法的信息。

# node.js - 当我调用方法时，查询返回未定义

> ID：15028190
> 
> 赞同：0
> 
> 时间：2013-02-22T16:00:19.813
> 
> 标签：node.js, node-mysql

节点mysql`query`返回`undefined`。

这是我的代码：

```
Hash.prototype.GetHash = function()
    {
        var test;
        var connection = this.config.CreateConnection();
        connection.connect(function(err){
           if (err)
               throw err;
           else
           {
               var query = "SELECT hash FROM test WHERE id = 1";
               connection.query(query, function(err, rows, result){
                  if (err)
                      throw err;
                  else
                  {
                      test = rows[0].hash;
                      console.log(test);
                  }
               });
               connection.end(function(err){
                   if (err)
                       throw err;
               });
           }
        });
        return test;
    } 
```

console.log 会给我正确的结果`1a2b3c4d`。所以。当我将此方法调用到 main 方法时：

```
 var h = hash.GetHash();
    console.log(h); 
```

控制台给我结果`undefined`。

所以我尝试从字符串类转换、重新输入、创建一个新对象：这个对象`test` 像：

```
var test = '';
var test = new String;
var test = new String(rows[0].hash); 
```

没有成功：\有人可以帮我解决这个问题吗？非常感谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:24:35.190

Node.js 是异步的，您的代码`Hash.prototype.GetHash = function() {}`不会工作，因为它在调用时会立即返回值，但尚未执行它。因此，当您打印测试时，它会给出未定义的。

要使用您`test`的函数计算并尝试返回的函数，您必须在函数完成后使用带有测试的回调作为其参数才能使用它。您将不得不对您的功能进行一些更改。

```
Hash.prototype.GetHash = function(callback){
//pass callback in arguments if you want it to be provided when calling
...  //compute test
//return test; Dont do return, do callback
callback(test);
}

//Your definition of callback should be
callback = function(h){
console.log(h);
} 
```

请参阅教程以了解更多信息：

1.  [http://docs.nodejitsu.com/articles/getting-started/control-flow/how-to-write-asynchronous-code](http://docs.nodejitsu.com/articles/getting-started/control-flow/how-to-write-asynchronous-code)
2.  [http://howtonode.org/control-flow](http://howtonode.org/control-flow)
3.  [http://howtonode.org/control-flow-part-ii](http://howtonode.org/control-flow-part-ii)

# javascript - var 语句应该放在函数的顶部吗？

> ID：15028191
> 
> 赞同：0
> 
> 时间：2013-02-22T16:00:24.690
> 
> 标签：javascript, backbone.js, jslint

如果您遵循 jslint.com 指南，它会让您将它们放在函数的顶部，并像这样合并多个语句。

```
function(){
    var foo,
        moo,
        hoo; 
```

但是，在学习 underscore.js 和 andbone.js 的过程中，我发现并没有遵循这个约定，而是根据需要使用它们。例如。例如在 _.each()

```
 for (var key in obj) { 
```

一种方式更具可读性吗？一种方式更快吗？

我知道 javascript 没有块范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:08:59.900

“哪种方式最快”很容易回答：无论哪种方式都可以让您快速编写和维护代码。这是关于源代码质量，而不是执行——解释器可以做到这一点。

较旧的编程语言，包括早期版本的 C，仅支持在函数开头声明变量。这样做可以让您在一个地方立即概览函数中使用的变量：代码具有可预测的结构。随处声明变量的功能是后来添加的，因为很多人发现它很方便而且是个好主意：它允许您在变量使用的地方附近声明变量，因此可以一起检查和管理声明和使用：代码具有更多的模块化结构。

由于这是关于人为因素，哪个“更好”是一个完全开放的问题。风格指南是另一回事：风格约定是一种合理的做事方式，不一定是唯一的好方法。但是遵循约定会给您带来一致性的好处，并且代码的读者知道会发生什么。如果您在具有传统风格的上下文中编写代码，请遵循它。你在清晰和一致性方面获得的东西比你*可能*因为不遵循其他风格而放弃的东西更有价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:03:43.637

这只是编程风格的问题，因为脚本的工作方式相同。

当变量被提升时，即在函数中的代码开始之前声明，在代码的开头声明它们是有意义的，因为这更接近于正在发生的事情。

无论您在哪里声明变量，性能都是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:07:58.030

没有更好的方法，两种方法之间没有速度差异。两者完全相同，因为声明是“提升的”并且在整个函数中可用。（尽管它们在分配之前没有任何价值。）

也就是说，我注意到人们倾向于在循环`var`内部使用`for`循环变量，即使他们将其余声明放在顶部。造成这种情况的原因可能是因为他们想向代码阅读器发出信号，表明这个 var 没有在函数的其余部分中使用，并且是一个一次性循环 var（就好像它只与这个块有关。）

随着 Javascript 1.7 的广泛采用，这些使用`var`可能会被取代。`let`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:06:05.227

通常会制定约定来帮助您阅读代码，从而使维护更便宜/更快，尽管我认为没有必要，但这种特定的约定可能会有所帮助。

但是，您给出的示例是声明仅用于循环的增量变量，该变量不应在循环之外使用（极少数情况除外），因此声明它非常有意义，使用它，一旦循环完成就忘记它（或清理它，尽管这很少需要）。

# xcode - 使用dismissViewControllerAnimated：完成：

> ID：15028204
> 
> 赞同：2
> 
> 时间：2013-02-22T16:00:57.570
> 
> 标签：xcode, objective-c-blocks

我正在使用的一些代码使用不推荐使用的方法`dismissModalViewControllerAnimated`。文档说`dismissViewControllerAnimated:completion:`现在使用。我不确定这`completion:`部分。就我而言，完成应该是`nil`还是`NULL`什么？

原始代码如下。

```
- (void)didFinishWithCamera
{
    [self dismissModalViewControllerAnimated:YES];

    if ([self.capturedImages count] > 0)
    {
        if ([self.capturedImages count] == 1)
        {
            // we took a single shot
            [self.imageView setImage:[self.capturedImages objectAtIndex:0]];
        }
        else
        {
            // we took multiple shots, use the list of images for animation
            self.imageView.animationImages = self.capturedImages;

            if (self.capturedImages.count > 0)
                // we are done with the image list until next time
                [self.capturedImages removeAllObjects];

            self.imageView.animationDuration = 5.0;    // show each captured photo for 5 seconds
            self.imageView.animationRepeatCount = 0;   // animate forever (show all photos)
            [self.imageView startAnimating];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:03:54.730

如果您不关心完成，请提供一个空块：

```
[self dismissModalViewControllerAnimated:YES
                              completion:^(void){}]; 
```

# php - 更改 yii 中的默认页面

> ID：15028206
> 
> 赞同：6
> 
> 时间：2013-02-22T16:01:01.207
> 
> 标签：php, yii

我对 yii 很陌生，想知道如何更改默认页面 pra，而不是转到索引，而是定向到我即将拥有的页面。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:03:42.503

你可以用它自己的视图创建一个新的控制器：comingsoon（见[http://www.yiiframework.com/doc/guide/1.1/en/topics.gii](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii)）。

将其添加到： **protected\config\main.php**

```
'defaultController' => 'comingsoon', 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:39:21.163

方法一：更改 SiteController.php 的 index 动作中呈现的视图页面：

```
public function actionIndex() {
    $this->render('index'); // change to "comingsoon"
} 
```

方法2：让404错误页面显示即将到来的消息。

方法 3：使用 main.php 中的 URL 管理器规则重定向到错误页面：

```
'urlManager' => array(
    'rules' => array(
        'index'=>'site/index', // change "site/index" to "site/comingsoon"
        ... 
```

方法四：`.htaccess`重写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-20T09:51:53.730

您可以指定默认的控制器和操作。将此添加到 main.php

```
'defaultController'=>'site/index', // controller/action 
```

无需在控制器上编辑任何内容:)

如果有任何问题，我认为您还需要编辑**.htaccess** (For Friendly Url) 干杯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:02:11.440

在您的控制器中，只需将视图更改为即将到来的视图的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T05:16:15.027

最好的方法是将[defaultIndex](http://www.yiiframework.com/doc/api/1.1/CController#defaultAction-detail)指定为控制器中的类变量：

```
class SiteController extends Controller {
    public $defaultIndex = 'comingSoon';

    public function actionComingSoon() {

        $this->renderPartial( ... etc .... );

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-30T20:02:55.247

最好的方法是您可以通过将默认页面表示为空字符来更改这样的 urlmanager 选项

```
'urlManager' => [
    'enablePrettyUrl' => true,
    'showScriptName' => false,
    'enableStrictParsing' => false,
    'rules' => [
        'admin' => 'admin/index',
        ''=>'admin/index' 
```

# grinder - Grinder：控制台看不到代理

> ID：15028207
> 
> 赞同：0
> 
> 时间：2013-02-22T16:01:01.157
> 
> 标签：grinder

我设置了 The Grinder 并启动了控制台：

```
 $ java net.grinder.Console
2013-02-21 16:23:29,718 INFO  org.eclipse.jetty.server.Server: jetty-7.6.1.v20120215
2013-02-21 16:23:29,775 INFO  org.eclipse.jetty.server.AbstractConnector: Started SelectChannelConnector@:6373 
```

然后我启动了一个声称连接到控制台的代理：

```
 $ java net.grinder.Grinder
2013-02-21 16:23:38,488 INFO  agent: The Grinder 3.11
2013-02-21 16:23:38,557 INFO  agent: connected to console at localhost/127.0.0.1:6372
2013-02-21 16:23:38,557 INFO  agent: waiting for console signal 
```

当我查看控制台时，我看不到任何代理/进程。无论我是否在控制台和grinder.properties 文件中指定主机名，上述情况都保持不变。即使没有在 props 文件中指定它，代理也认为它已连接，但控制台不会“看到”它。有任何想法吗？

# ruby-on-rails - Rails：如何让现有的工作页面/网址停止工作并转到 404？

> ID：15028214
> 
> 赞同：0
> 
> 时间：2013-02-22T16:01:16.427
> 
> 标签：ruby-on-rails

我有一个可用的现有页面。但是我现在想删除它，这样当人们访问 URL 时，它会呈现 404。我删除了视图并注释掉了控制器中的操作，这将我发送到开发中的 404，但是当我将其部署到生产中时并转到它给了我一个 501 Not Implemented 的 URL。有没有让它工作的公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:13:21.533

您是否从 routes.rb 中删除了路由？

# django - 可以对 GenericForeignKey 对象使用 Django 模板“_set.all”吗？

> ID：15028216
> 
> 赞同：0
> 
> 时间：2013-02-22T16:01:21.310
> 
> 标签：django, django-models, django-templates, generic-foreign-key

我有一堆模型 A 的对象（这真的不重要..），我有一个模型 B，位于另一个应用程序中。

模型 B 指的是其他对象：

```
content_object  = generic.GenericForeignKey('content_type', 'object_id') 
```

我只对包含对模型 A 类型的引用的对象感兴趣。是否可以（以某种方式）使用模板“向后”功能来检索它们？

我试过了：

```
 {% for a in objectA.objectB_set.all %}
 and so on.. 
```

但它似乎不适用于“泛型”..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:11:02.520

这不是真正的关系，因此 objectA 对 B 对象一无所知。您需要将 a 定义[`GenericRelation`](https://docs.djangoproject.com/en/1.4/ref/contrib/contenttypes/#reverse-generic-relations)到 ModelA 以指向 B。

# ruby - 在 vim 中为 ruby 自动生成原始代码块

> ID：15028218
> 
> 赞同：1
> 
> 时间：2013-02-22T16:01:30.617
> 
> 标签：ruby, vim

当查看像“销毁所有软件”或“railscast”这样的屏幕投射时，作者似乎正在使用某种工具来自动生成代码块，例如 if 语句、for 循环等等。有人知道这种工具的名称或名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T03:09:52.130

我不使用片段，只有一个键映射来插入一些特殊的东西（插入模式下的 Cl 插入“=>”；见[我的 vimrc](https://github.com/garybernhardt/dotfiles/blob/master/.vimrc#L116)）。我已将选项卡[映射](https://github.com/garybernhardt/dotfiles/blob/master/.vimrc#L126)到有条件地完成（Vim 默认将其映射到 Cp）。在 Destroy All Software 中，您看到的所有内容都会在我讲话时实时记录下来，除了 Cl 异常和内置的 Vim 标识符补全之外，所有这些都是一次输入一个字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T16:21:19.023

这些被称为*片段*；它们就像内置的`:abbreviate`类固醇，通常在其中包含参数插入、镜像和多个停止。第一个非常著名（并且仍然被广泛使用）的是[snipMate](http://www.vim.org/scripts/script.php?script_id=2540)，一个受 TextMate 启发的插件；不幸的是，它不再维护了。一个更现代的变体（虽然需要 Python）是[UltiSnips](http://www.vim.org/scripts/script.php?script_id=2715)。还有更多，请参阅[Vim Tips Wiki 上的此列表](http://vim.wikia.com/wiki/Category%3aAutomated_Text_Insertion)。

有两点需要评估：第一，片段引擎本身的功能，第二，作者或其他人提供的片段的质量和广度。

# c# - Modelstate 验证不需要的字段

> ID：15028220
> 
> 赞同：1
> 
> 时间：2013-02-22T16:01:34.603
> 
> 标签：c#, asp.net-mvc, hidden-field

我有这个问题，我需要验证一个带有 ID 的模型，但我不想显示 ID，我试图把它放在一个隐藏字段中。

这是我的模型：

```
namespace MyApp.Models
{
    public class ObjInfo
    {
        /// <summary>
        /// Variable declaration.
        /// </summary>

        public int m_Id { get; set; }

        [Required(ErrorMessage = "Obj Name is required.")]
        [MaxLength(75)]
        [Display(Name = "Obj Name")]
        public string m_Name { get; set; }

        [Display(Name = "Obj Symbol")]
        public string m_SymbolText { get; set; } 
```

(...) } }

我只放了有问题的字段和另一个字段。我的模型中还有其他不相关的数据。

现在这是我的这个模型的“创建”视图：

```
@model MyApp.Models.ObjInfo

@{
    ViewBag.Title = "Create";
}

<h2>Create New Obj</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>OBJ</legend>

        @Html.HiddenFor(model => model.m_Id)

        <div class="editor-label">
            @Html.LabelFor(model => model.m_Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_Name)
            @Html.ValidationMessageFor(model => model.m_Name)
        </div>

        (...)

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to obj list", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

因此，当我确认创建此 obj 时，ModelState 由于提供的 ID 始终返回 false，但我不能向用户显示此 ID，我需要它来解决管理问题。

简单地说，我认为我的隐藏字段中没有数据。但这无关紧要，因为我的 BD 无论如何都会给该对象一个正确的 ID。我该如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:48:11.660

试试这个公共int？m_Id { 得到；放; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:07:04.630

当您在操作中检索模型时，请使用 Bind 排除`m_Id`：

```
public ActionResult Example([Bind(Exclude = "m_Id")] ObjInfo objInfo)
{ 
    ...
} 
```

# javascript - CSS !important IE8 not recognized

> ID：15028222
> 
> 赞同：0
> 
> 时间：2013-02-22T16:01:37.787
> 
> 标签：javascript, jquery, css, class, background-color

***Mistyped code. Fix found***

*.tblmain td overrides an tr affects due to the DOM level. .tblmain tr should be used instead. If anyone wants to submit as an answer, I will accept. Thank you!*

I am using the `!important` identifier in my CSS to be certain the background color of a `tr` is changed on hover.

The CSS for the `tr` is

```
.tblmain td {
    background-color: white;
} 
```

then through a `onmouseover` event I use javascript as below

```
onmouseover='$(this).addClass("hover")' 
```

the hover css is below

```
.hover {
    cursor: pointer;
    background-color: #15b6b8 !important;
} 
```

The background is still white on hover, but when the `tr` class is remove, the hover works as expected. I know `!important` is considered hacky in situations like these, so I am open to any suggestions including but not limited to using `!important` to make the predominant color the hover class.

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:04:46.380

So you're adding a class, but not removing it? Use `toggleClass` instead.

Further, using `onmouseover` is poor separation of code. Try this:

```
$('.tblmain').on('mouseover mouseout', 'tr', function(e) {
    $(this).toggleClass('hover');
}); 
```

You might need to toggle the background-color of the `td` children instead, though. If there is a background-color applied to those, it can and will override the styles for the `tr`.

```
$('.tblmain').on('mouseover mouseout', 'tr', function(e) {
    $(this).find('td').toggleClass('hover');
}); 
```

# jquery - 使用 jQuery Validator 验证复选框状态

> ID：15028224
> 
> 赞同：1
> 
> 时间：2013-02-22T16:01:44.080
> 
> 标签：jquery, checkbox, jquery-validate

我正在使用 jQuery 表单验证器插件。该表单有 5 个复选框。其中第一个（主），如果选中，则检查剩余的 4 个并使用户无法更改它们。如果 master 未选中，则其余 4 个框将返回到可由用户切换。此功能工作正常。现在，我想做的是，如果所有复选框都未**选中**，则使表单无效。我还想要一个特定区域（checkBoxErrorHolder）来存放复选框的验证错误消息。其他错误消息应由其输入显示在其默认位置。这是我到目前为止所拥有的：

```
<script language="javascript">
$(function() {
    $.validator.addMethod("validateCheckBoxes",
                          function (value, element, params)   {

                              var master=false, 
                                  slave1=false, 
                                  slave2=false,
                                  slave3=false,
                                  slave4=false;

                              if ($("#master").attr("checked"))
                                  master = true;
                              if ($("#slave1").attr("checked"))
                                  slave1 = true;
                              if ($("#slave2").attr("checked"))
                                  slave2 = true;
                              if ($("#slave3").attr("checked"))
                                  slave3 = true;
                              if ($("#slave4").attr("checked"))
                                  slave4 = true;

                              return (master || (slave1&&slave2&&slave3&&slave4));
                          }, 
                          "One or more check boxes must be checked");

    $("#theForm").validate({
        rules: { 
                   first: required,
                   last:  required,
                   email: {required: true, email: true},
                   master: { required: true, 
                             validateCheckBoxes: true},
                             errorPlacement: function(error, element) {
                                                 $("#checkBoxErrorHolder").html(error);
                                             }
                           }
                   slave1: { required: true, 
                             validateCheckBoxes: true},
                             errorPlacement: function(error, element) {
                                                 $("#checkBoxErrorHolder").html(error);
                                             }
                           }
                   slave2: { required: true,
                             validateCheckBoxes: true},
                             errorPlacement: function(error, element) {
                                                 $("#checkBoxErrorHolder").html(error);
                                             }
                           }
                   slave3: { required: true, 
                             validateCheckBoxes: true},
                             errorPlacement: function(error, element) {
                                                 $("#checkBoxErrorHolder").html(error);
                                             }
                           }
                   slave4: { required: true, 
                             validateCheckBoxes: true,
                             errorPlacement: function(error, element) {
                                                 $("#checkBoxErrorHolder").html(error);
                                             }
                           }
               },
        messages: {
            first: "required",
            last: "required",
            email: {
                       required: "Email address required",
                       email: "Please supply a valid email address"
                   }
        }
    });
});
</script>

<form id="theForm" ...>
<input type="text" name="first" value="" />
<input type="text" name="last" value="" />
<input type="text" name="email" value="" />
<input type="checkbox" id="master" value="master" class="validateCheckBoxes"/>
<input type="checkbox" id="slave1" value="slave1" class="validateCheckBoxes"/>
<input type="checkbox" id="slave2" value="slave2" class="validateCheckBoxes"/>
<input type="checkbox" id="slave3" value="slave3" class="validateCheckBoxes"/>
<input type="checkbox" id="slave4" value="slave4" class="validateCheckBoxes"/>
<input type="submit" />
</form>
<div id="checkBoxErrorHolder"></div> 
```

不用说，我没有得到我预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:54:12.313

**你的代码：**

```
rules: { 
               first: required,
               last:  required,
               email: {required: true, email: true},
               master: { required: true, 
                         validateCheckBoxes: true},
                         errorPlacement: function(error, element) {
                                             $("#checkBoxErrorHolder").html(error);
                                         }
                       } // <-- missing comma
               slave1: { required: true, 
                         validateCheckBoxes: true},
                         errorPlacement: function(error, element) {
                                             $("#checkBoxErrorHolder").html(error);
                                         }
                       } // <-- missing comma 
```

**基本上，您通过各种语法和格式错误破坏了插件......**

* * *

**1)** `errorPlacement`不是您与其他**规则**一起应用的规则。 [这是一个*回调函数*，您可以与其他选项一起应用*一次*](http://docs.jquery.com/Plugins/Validation/validate#toptions)...

```
$(document).ready(function () {

    $("#theForm").validate({
        rules: {
            // your rules
        },
        messages: {
            // your messages
        },
        errorPlacement: function (error, element) {
            $("#checkBoxErrorHolder ").html(error);
        },
        // other options and callback functions,
    });

}); 
```

* * *

**2）** 您的`checkbox`元素缺少`name`属性。除了提交按钮之外，每个输入、选择、单选、复选框等都**必须**具有`name`属性才能使此插件正常运行。

* * *

**3)** 每当您使用类似规则的简写时`required`，它必须用引号引起来。这是一个正确显示两种方式的示例...

```
rules: {
    first: "required",
    last: {
        required: true
    },
}, 
```

* * *

**4)** 我开始为此构建一个 jsFiddle，~~但我停止了，因为语法错误太多，我不想修复~~。 ~~请通过 jsFiddle 的 jsHint 函数运行您的 JavaScript 以查看所有内容。~~ 我已经完成了您的基本验证，~~所以现在您可以对自定义`validateCheckBoxes`方法~~进行故障排除了。

这是您的基本形式的工作 jsFiddle 演示：http: **[//jsfiddle.net/gHKyb/](http://jsfiddle.net/gHKyb/)**

* * *

**5) 编辑：** 我再次查看了您的自定义`validateCheckBoxes`方法并清理了最后一个语法错误。但它仍然没有工作，因为您不小心`required`在每个复选框上定义了一个规则，这仅仅意味着该复选框*始终是必需的，尽管有其他任何东西*。

我`required`从所有复选框中删除了规则，现在一切似乎都按照您的规范工作。我还压缩了你的代码。（必须选中第一个框或必须选中最后四个框）

```
$.validator.addMethod("validateCheckBoxes", function (value, element, params) {
    var master,
        slave = [];
    if ($("#master").attr("checked")) {
        master = true;
    }
    $("[id^='slave']").each(function(i) {
        if ($(this).attr("checked")) {
            slave[i+1] = true;
        }
    });
    return (master || (slave[1] && slave[2] && slave[3] && slave[4]));
}, "One or more check boxes must be checked"); 
```

* * *

**6）**最后，为了修复错误标签的位置，我简单地修改了`errorPlacement`回调函数，如下所示：

```
errorPlacement: function (error, element) {
    if ($(element).attr("type") === "checkbox") {
        $("#checkBoxErrorHolder").html(error); // just for checkboxes
    } else {
        error.insertAfter(element); // default placement
    }
},
success: function() { // need "success" to dynamically clear any checkbox errors
    $("#checkBoxErrorHolder").html();
}, 
```

**工作演示：http: [//jsfiddle.net/AKgmH/](http://jsfiddle.net/AKgmH/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:10:19.523

似乎每次“检查”后都缺少“

```
if ($("#master").attr("checked"))
  master = true;
if ($("#slave1").attr("checked"))
  slave1 = true;
if ($("#slave2").attr("checked"))
  slave2 = true;
if ($("#slave3").attr("checked"))
  slave3 = true;
if ($("#slave4").attr("checked"))
  slave4 = true; 
```

我不知道它是否能解决你的问题，但它可以帮助:)

# java - 无法生成输出（for 循环）

> ID：15028227
> 
> 赞同：1
> 
> 时间：2013-02-22T16:01:49.860
> 
> 标签：java

我正在尝试打印

```
****1
***22
**333
*4444
55555 
```

因为我是java的初学者。我只是打印

```
11111
22222
33333
44444
55555 
```

我的解决方案：

```
for (int i = 1 ; i <= 5 ; i++){
    for(int j = 1 ; j <= 5 ; j++){
        System.out.print(i);
    }
    System.out.println();
} 
```

和

```
****
***
**
* 
```

我的解决方案：

```
 for(int i=1;i<=4;i++){
     for(int j=1;j<=5-i;j++){
         System.out.print("*");
     }
     System.out.println();
 } 
```

我尝试将它们合并在一起，但我不知道该怎么做。我知道我很接近但我被困在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:07:01.357

在尝试解决问题之前，您必须了解问题。在你的情况下，

*   有两个循环，因为你有列和行
*   生成列的循环：
    *   必须在生成线条的那个里面
    *   必须知道是否打印星号或数字
*   生成线条的循环
    *   必须知道应该在该行上打印哪个数字
    *   必须知道该行应该打印多少颗星

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:24:05.953

这是一个简单的方法来做到这一点。

```
for (int i = 1; i <= 5; i++) {
    for (int j = i; j < 5; j++)
        System.out.print("*");
    for (int k = 0; k < i; k++)
        System.out.print(i);
    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T16:06:56.367

```
 int k = 4;
        for (int i = 1 ; i <= 5 ; i++){
            System.out.println(); 
            for(int j = 1 ; j <= 5 ; j++){
               if(j<=k){
                  System.out.print("*"); 
               }else{
                  System.out.print(i);
                  k--;
               }
            }
        } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-22T16:12:59.887

你应该明白i,j变量代表什么。找到规律，你就很容易解决这个问题。

```
for(int i=1;i<=5;i++){
    for(int j=1;j<=5-i;j++){
        System.out.print("*");
    }
    for (int j=5-i+1;j<=5;j++){
        System.out.print(j);
    }
    System.out.println();
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-22T16:20:13.527

```
 int k = 4;

        for (int i = 1 ; i <= 5 ; i++){
            System.out.println(); 
            for(int j = 0 ; j <= 4 ; j++){
               if(j<k){
                  System.out.print("*"); 
               }else{
                  System.out.print(i);
                  if(j==4){
                      k--;
                  }
               }

            }
        } 
```

# java - 如何在 JButton 单击时关闭 GUI

> ID：15028234
> 
> 赞同：0
> 
> 时间：2013-02-22T16:02:16.600
> 
> 标签：java, swing, jbutton, exit, actionevent

我编写了一些代码，它有一个带有输入按钮的 GUI，单击该按钮时会打开我创建的工具，但我还希望 jbutton 做的是关闭第一个 GUI 并打开我的工具已经创建，我尝试更改`setVisible(true/false);`语句，但它们只是隐藏 GUI 并且它不运行。

总而言之，我希望我`JButton`有两个功能，一个是关闭当前的 GUI，一个是打开我创建的工具。

我认为`enterButton`关闭GUI与此编码有关：

```
public void actionPerformed(ActionEvent e){ 
    if(e.getSource() == enterButton){
        // coding to make the GUI exit???
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:04:54.997

你可以`System.exit(0)`这样使用：

```
public void actionPerformed(ActionEvent e){ 
    if(e.getSource() == enterButton){

        //coding to make the GUI exit???

        System.exit(0); 
    }
} 
```

或使用`dispose()`

```
public void actionPerformed(ActionEvent e){ 
    if(e.getSource() == enterButton){
        //coding to make the GUI exit???

        this.dispose();
    }
} 
```

# django - django-storages 不会从 S3 中删除

> ID：15028237
> 
> 赞同：4
> 
> 时间：2013-02-22T16:02:20.253
> 
> 标签：django

当我删除一个对象时使用[django-storages 包](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)S3 它不会从我的 S3 文件存储中删除图像。据我所知，没有其他对象使用相同的图像。

有人知道这里发生了什么吗？有一个我不知道的默认值吗？

**模型.py**

```
 class Product(models.Model):
        title = models.CharField(max_length=60,)
        description = models.TextField(max_length=300,)
        price = models.DecimalField(max_digits=8, decimal_places=2,)
        qr_url = models.URLField(blank=True, verbose_name="QR Code URL", help_text="Read only generated automatically.")
        qr_image = models.ImageField(
            upload_to="qr-codes",
            height_field="qr_image_height",
            width_field="qr_image_width",
            null=True,
            blank=True,
            editable=True,
            verbose_name="QR Code Image"
        )
        qr_image_height = models.PositiveIntegerField(null=True, blank=True, editable=False)
        qr_image_width = models.PositiveIntegerField(null=True, blank=True, editable=False)

        #FK
        category = models.ManyToManyField(ProductCategory)

def product_pre_save(sender, instance, **kwargs):
    if not instance.pk:
        instance._QRCODE = True
    else:
        if hasattr(instance, '_QRCODE'):
            instance._QRCODE = False
        else:
            instance._QRCODE = True

models.signals.pre_save.connect(product_pre_save, sender=Product)   

def product_post_save(sender, instance, **kwargs):
    if hasattr(instance, '_already_saving'):
        del instance._already_saving
        return
    if instance._QRCODE:
        instance._QRCODE = False
    if instance.qr_image:
        instance.qr_image.delete()
        # Create url
    instance.qr_url = instance.create_QR_URL()
    qr = QRCode(4, QRErrorCorrectLevel.L)
    qr.addData(instance.qr_url)
    qr.make()
    image = qr.makeImage()

    #Save image to string buffer
    image_buffer = StringIO()
    image.save(image_buffer, format='JPEG')
    image_buffer.seek(0)

    #Here we use django file storage system to save the image.
    file_name = 'UrlQR_%s.jpg' % instance.id
    file_object = File(image_buffer, file_name)
    content_file = ContentFile(file_object.read())
    instance._already_saving = True
    instance.qr_image.save(file_name, content_file, save=True)

models.signals.post_save.connect(product_post_save, sender=Product) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:29:34.893

在您的 post_save 操作中，您有：

```
...
if instance.qr_image:
        instance.qr_image.delete()
... 
```

这不起作用，因为您试图删除一个字段，而不是实例，这就是 Boto 不会删除文件的原因。

有关如何使用 Boto 删除单个文件的示例，[请参阅此答案。](https://stackoverflow.com/questions/3140779/how-to-delete-files-from-amazon-s3-bucket)

# java - 如何创建具有两个元素的嵌套 xml 结构？

> ID：15028239
> 
> 赞同：1
> 
> 时间：2013-02-22T16:02:26.443
> 
> 标签：java, xml, dom

我正在尝试创建一个 xml 结构，例如：

```
<OuterMostElement>
  <NestedSet>
      <Element></Element>
      <Element></Element>
  </NestedSet>
</OuterMostElement> 
```

我`createNestedSet`连续两次调用一个方法来创建这个结构，并将其传递给`<OuterMostElement>`文档片段。

```
 <OuterMostElement>
      <NestedSet>
          <Element></Element>
      </NestedSet>
      <NestedSet>
          <Element></Element>
      </NestedSet>
    </OuterMostElement> 
```

方法是：

```
 public static void createNestedSet(DocumentFragment df) {
        if (oTargetLineProperties.isRendered()) {
            Document doc = df.getOwnerDocument();
            Element newParentElem = null;
            newParentElem = createTagIfAbsent(doc, "somenamespace", "NestedSet");
            Element newElem = null;
            newElem = doc.createElementNS("someNameSpace",
                                        "Element");

            newParentElem.appendChild(newElem);
            ((XMLElement)df.getFirstChild()).appendChild(newParentElem);
        }
    } 
```

辅助方法 `createTagIfAbsent`如下：

```
 private static Element createTagIfAbsent(Document doc, String nameSpace, String tagName) {
        Element newParentElem;
        NodeList nodes = doc.getElementsByTagName(tagName);
        //Already contains tag . So just return the existing one
        if(nodes!=null && nodes.getLength() > 0){
            newParentElem = (Element)nodes.item(0) ;
        }else{
            newParentElem = doc.createElementNS(nameSpace,tagName);  
        }

        return newParentElem;
    } 
```

`NestedSet`为什么只有在标签不存在时才创建标签的想法不能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:08:09.433

如果我没记错的话，你需要使用 getElementsByTagNameNS

[http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html#getElementsByTagNameNS%28java.lang.String,%20java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html#getElementsByTagNameNS%28java.lang.String,%20java.lang.String%29)

要获取您想要获取的元素，请传递正确的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:08:36.283

使用[xStream](http://xstream.codehaus.org/)编组此类的一个实例：

```
public class OuterMostElement {
   private final Set<Element> nestedSet = new HashSet<Element>();

   public void add(Element element) {
     nestedSet.add(element);
   }

   public static void main(String[] args) {
     XStream xstream = new XStream();

     OuterMostElement ome = new OuterMostElement();
     ome.add(new Element(1));
     ome.add(new Element(2));

     String result = xstream.toXml(ome);
     System.out.println(result);
} 
```

# node.js - 树莓派、Arduino、Node.js 和串口

> ID：15028240
> 
> 赞同：10
> 
> 时间：2013-02-22T16:02:28.893
> 
> 标签：node.js, serial-port, usb, debian, raspberry-pi

我试图从 node.js 服务器脚本与我的 arduino 交谈。

这是我的代码：

```
var app = require('express')()
, server = require('http').createServer(app)
, io = require('socket.io').listen(server)
, SerialPort  = require('serialport').SerialPort;

//SERIAL
var portName = '/dev/ttyACM0';
var sp = new SerialPort(); // instantiate the serial port.
sp.open(portName, { // portName is instatiated to be COM3, replace as necessary
   baudRate: 115200, // this is synced to what was set for the Arduino Code
   dataBits: 8, // this is the default for Arduino serial communication
   parity: 'none', // this is the default for Arduino serial communication
   stopBits: 1, // this is the default for Arduino serial communication
   flowControl: false // this is the default for Arduino serial communication
});

//SERVER
server.listen(80, '127.0.0.5');

app.get('/', function (req, res){
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket){
  socket.emit('test', { test: 'Its Working' });
  socket.on('value', function (data){
    console.log(data);
    });
}); 
```

我很确定我的设备在 /dev/ttyACM0 上，因为：

```
pi@raspberrypi ~/Programming/node $ dmesg|tail
[91569.773042] cdc_acm 1-1.2:1.0: ttyACM0: USB ACM device
[91569.776338] usbcore: registered new interface driver cdc_acm
[91569.776369] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters
[92601.131298] usb 1-1.2: USB disconnect, device number 7
[92609.044999] usb 1-1.2: new full-speed USB device number 8 using dwc_otg
[92609.149759] usb 1-1.2: New USB device found, idVendor=2341, idProduct=0043
[92609.149789] usb 1-1.2: New USB device strings: Mfr=1, Product=2, SerialNumber=220
[92609.149806] usb 1-1.2: Manufacturer: Arduino (www.arduino.cc)
[92609.149820] usb 1-1.2: SerialNumber: 74132343430351705051
[92609.156743] cdc_acm 1-1.2:1.0: ttyACM0: USB ACM device
pi@raspberrypi ~/Programming/node $ 
```

当我尝试运行我的服务器脚本时，出现错误：

```
pi@raspberrypi ~/Programming/node $ node server.js
   info  - socket.io started

/home/pi/node_modules/serialport/serialport.js:72
    throw new Error('Invalid port specified: ' + path);
          ^
Error: Invalid port specified: undefined
    at new SerialPort (/home/pi/node_modules/serialport/serialport.js:72:11)
    at Object.<anonymous> (/home/pi/Programming/node/server.js:8:10)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我确定我只是错过了一些简单的东西，但我对 Linux 或 Node 的了解还不够，不知道它是什么。我需要为驱动程序安装 arduino IDE 吗？是不是因为我正在连接我的树莓派，我知道这使用串行端口，但我想通过 USB 进行通信。这是可能的还是我只有 1 个串口，不管它是 USB 还是串口？

编辑我已经安装了 IDE，我可以通过 IDE 与 arduino 对话。所以这不是驱动程序或缺乏端口。

谢谢你的帮助。

乔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T17:46:43.233

我认为这是因为`SerialPort`您稍后在 open 中指定的空参数

```
var sp = new SerialPort(); // instantiate the serial port.
//then you open
sp.open(portName, { // portName is instatiated to be COM3, replace as necessary 
```

从[SerialPort](https://npmjs.org/package/serialport) npm 项目页面

```
var SerialPort = require("serialport").SerialPort
var serialPort = new SerialPort("/dev/tty-usbserial1");

When opening a serial port, you can specify (in this order).
 1\. Path to Serial Port - required.
 2\. Options - optional and described below. 
```

所以你应该在 SerialPort 中指定所有参数而不是 open

```
var portName = '/dev/ttyACM0';
var sp = new SerialPort(portName, {
   baudRate: 115200,
   dataBits: 8,
   parity: 'none',
   stopBits: 1,
   flowControl: false
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T21:10:16.293

我有一个工作的 nodeJS / arduino / Serialport 机器人。

我用过（你需要把你的串口改成你自己的）

```
 var serialport = require("serialport");
  var SerialPort = serialport.SerialPort; // localize object constructor

  var sp = new SerialPort(comPort, {
     parser: serialport.parsers.readline("\r"),
     baudrate: 9600
  });

  sp.on("open", function () {
     sp.write(0x80);
     sp.write('123456\r');
     console.log ("comm port ready");
  }); 
```

**请记住**，当您写信给您的 Arduino 以“耗尽”输出时。我告诉机器人朝特定方向前进的工作代码。

```
 robotData.setLastCommand(direction);
    sp.write(direction , function(err, results) {
        **sp.drain(function(err, result){**
                //console.log ("drain");
                    //console.log(err, result);
        });
        //console.log ("results -> " + results);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-14T15:09:02.897

也许这段代码可以帮助某人。我在 Raspberry PI Zero W 上运行它。

它使用解析器获取固定长度的字节（本例中为 16）并检查第一个字符是否为列：

```
var SerialPort = require('serialport');
var port = new SerialPort('/dev/ttyAMA0', {
   baudRate: 57600,
   dataBits: 8,
   parity: 'none',
   stopBits: 1,
   flowControl: false
});

var ByteLength = require('@serialport/parser-byte-length');
var parser = port.pipe(new ByteLength({length: 16}));

parser.on('data', function (data) {
    var dataUTF8 = data.toString('utf-8');
    if (dataUTF8.substring(0, 1) === ":") {
        console.log('Data: ' + data);
    }
}); 
```

注意：此[页面](https://spellfoundry.com/2016/05/29/configuring-gpio-serial-port-raspbian-jessie-including-pi-3/)对像我这样在 RPI 串行上遇到过一些麻烦的人很有用

# javascript - Rails & Haml - 将数据传递给 javascript

> ID：15028243
> 
> 赞同：1
> 
> 时间：2013-02-22T16:02:32.593
> 
> 标签：javascript, ruby-on-rails, haml

我正在尝试将数据从我的 haml 视图传递到 javascript。在我的欢迎控制器中，我有 index 方法。在我的 index.html.haml 视图文件中，我有以下内容：

```
:javascript
  window.putalert = "#{ "Data" }"; 
```

在我的welcome.js.coffee 我有：

```
jQuery ->
        alert putalert 
```

但是，上述方法不起作用。我收到 Uncaught ReferenceError: putalert is not defined。

关于如何解决这个问题的任何建议？

chrome调试中的错误信息是

```
(function() {

  jQuery(function() {
    return alert(putalert);
Uncaught ReferenceError: putalert is not defined
  });

}).call(this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:04:22.980

您可以使用 :javascript haml 标签注入 javascript。您可以使用 #{} 插入 Ruby。尝试这样的事情：

```
:javascript
  window.putalert = "#{ "Data" }"; 
```

如果你愿意，你甚至可以在你的视图中插入咖啡脚本（你必须为此使用[倾斜](https://github.com/rtomayko/tilt)）：

```
:coffee
  @putalert = "#{ "Data" }" 
```

[这里是haml过滤器的参考： http](http://haml.info/docs/yardoc/file.REFERENCE.html) ://haml.info/docs/yardoc/file.REFERENCE.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:16:03.043

一般来说，为 JavaScript 处理数据的一种非常好的方法是使用 HTML 标记上的数据属性。然后使用 jQuery 之类的东西，您可以提取该信息。比注入js要干净一点。

更多信息：[http ://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

# c++ - OpenCv 将 cv::waitKey 限制为只有一个等待一个特定的键？

> ID：15028244
> 
> 赞同：5
> 
> 时间：2013-02-22T16:02:33.403
> 
> 标签：c++, opencv

有没有办法限制 cv::WaitKey() 只等待一个按键？即esc按钮？我希望能够按除此目标键之外的任何键并使窗口保持打开状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-20T21:54:47.110

我只是偶然发现了这个问题，我很确定会有更多的人在寻找相同的答案。事实上，有一种非常简单的方法可以做到这一点。cv::waitKey() 返回一个与按下的键的键码相对应的整数。通过将 waitKey 调用放在一个循环中，将返回值与您正在寻找的键码进行比较，您可以等待特定的键。

但是这里有一个很大的陷阱：在某些平台上，最高有效位设置在返回值中，这意味着如果您将它们与普通键码进行比较，循环将永远不会中断。通过对除最重要的位之外的所有内容使用按位与来解决此问题：

```
while((cv::waitKey() & 0xEFFFFF) != 27); //27 is the keycode for ESC 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-22T16:05:26.340

你可以这样做：

```
// Loop until escape is pressed
while (cvWaitKey(1) != '\33') {

} 
```

# git - 我怎样才能找出谁在 git 中强制推送？

> ID：15028246
> 
> 赞同：40
> 
> 时间：2013-02-22T16:02:37.243
> 
> 标签：git

有人使用过`git push --force`，但我无法从日志中分辨出是谁做的。有没有办法确定罪魁祸首？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-22T18:02:38.557

2018 年 11 月更新：如果您要推送到 GitHub 等集中式 Git 存储库托管服务，*那么*您将能够看到谁强制推送了您的分支。但这仅仅是因为 GitHub 选择在其 GUI 中显示该事件。

[![https://pbs.twimg.com/media/DsJIVxtU4AAreMW.jpg:large](../Images/869dde179ca98df441024b51fddc6c3a.png)](https://i.stack.imgur.com/jlocN.jpg)

更多信息请参见“[在 GitHub 上查找强制推送的提交者](https://stackoverflow.com/a/53343686/6309)”。

* * *

2013年的原始答案：

[正如我在“分布式版本控制系统和企业 - 一个很好的组合？](https://stackoverflow.com/questions/5683253/distributed-version-control-systems-and-the-enterprise-a-good-mix/5685757#5685757) ”中提到的，仅使用 Git 没有授权或身份验证。

您需要像[Gitolite这样的](https://github.com/sitaramc/gitolite)[授权层](http://sitaramc.github.com/gitolite/auth.html)来跟踪谁做了什么。（Gitolite 自带审计跟踪机制）。

但是，如果您的 repo 可以通过[文件（或本地）协议](http://git-scm.com/book/ch4-1.html#Local-Protocol)访问，那么您将无法知道是谁强制推送的。

![测谎器](../Images/00c47dc8b2ce2cc61abc7defcbbe5725.png) ^(（来自[motivealgenerator.com](http://motivationalgenerator.com/unmoderated-motivational-posters/share/158846)和[维基百科](http://en.wikipedia.org/wiki/Polygraph)）)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-05T09:03:01.427

如果您**有幸**使用[GitHub](http://github.com)或[GitHub for Enterprise](https://enterprise.github.com/home)，您可以查看[事件](https://developer.github.com/v3/activity/events/#list-repository-events)REST API 并检查谁/何时**推送/删除**到远程引用，例如 log4j：

> [https://api.github.com/repos/apache/log4j/events](https://api.github.com/repos/apache/log4j/events)

# php - dompdf 加载失败

> ID：15028250
> 
> 赞同：28
> 
> 时间：2013-02-22T16:02:50.810
> 
> 标签：php, pdf, include, dompdf

我正在尝试让 dompdf 在内部服务器上运行。使用默认的 config.inc.php 设置，我在运行相当于演示“Hello Wolrd”脚本时得到以下信息：

```
Warning: require_once(/var/www/dompdf-master/lib/php-font-lib/classes/font.cls.php): failed to open stream: No such file or directory in /var/www/dompdf-master/dompdf_config.inc.php on line 335
Fatal error: require_once(): Failed opening required '/var/www/dompdf-master/lib/php-font-lib/classes/font.cls.php' (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/dompdf-master/dompdf_config.inc.php on line 335 
```

当我关闭时`DOMPDF_ENABLE_AUTOLOAD`，我不再收到此警告，但代码失败并显示以下内容：

```
Fatal error: Class 'DOMPDF' not found in /var/www/rfq/test.php on line 115 
```

以下是代码：

```
require_once("/var/www/dompdf-master/dompdf_config.inc.php");

$dompdf = new DOMPDF(); // this is the line that fails
$dompdf->load_html($quotehtml);
$dompdf->render();
$dompdf->stream("rfq".$_REQUEST['quoteid'].".pdf"); 
```

这是 Ubuntu 12.04，最新的补丁，具有默认的 Apache 设置。

非常感谢。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-07-01T08:42:47.217

*   转到[https://github.com/PhenX/php-font-lib](https://github.com/PhenX/php-font-lib)并下载库。
*   创建`dompdf/lib/php-font-lib/classes/`目录。
*   在 zip 文件中，获取`src/FontLib/`文件夹的内容并将其粘贴到新创建的目录中。

这似乎对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-22T10:57:15.127

这是 DOMPDF 项目迁移到 Github 后的临时问题。[请参阅此问题](https://stackoverflow.com/questions/13431905/php-font-lib-must-either-be-installed-via-composer-or-copied-to-lib-php-font-lib)的答案。获得完整包的最简单解决方案是[从 Google Code 下载 DOMPDF 0.6 beta 3](http://code.google.com/p/dompdf/downloads/list)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-29T15:37:48.450

我们将在 codeigniter 中使用 dompdf，但是我从 GitHub 下载的文件没有我们需要的所有文件。缺少 php-font-lib 的所有文件。所以我们必须下载它并上传到相应的文件夹。因此，要让 dompdf 在 codeigniter 中工作，您可能需要下载它。

见这里 [http://www.digitalwhores.net/codeigniter/codeigniter-dompdf-master-and-php-font-lib/](http://www.digitalwhores.net/codeigniter/codeigniter-dompdf-master-and-php-font-lib/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T15:34:03.407

如果你使用 composer 安装 dompdf，你需要放入`define("DOMPDF_ENABLE_AUTOLOAD", false);`dompdf_config.custom.inc.php。这将允许作曲家自动加载已经安装的 php-font-lib。（见本期：[https](https://github.com/dompdf/dompdf/issues/636) ://github.com/dompdf/dompdf/issues/636 ）

如果您不使用作曲家，请参阅 Mikepote 的回答。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-31T19:37:04.067

如果在执行其他答案建议后未更正错误：

```
In dompdf_config.inc.php, change line 332 to point to the actual location of your Font.php  file.
mine was /php-font-lib/src/FontLib 
```

那里没有提到 CLASSES 文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T08:57:43.897

我遇到了几乎完全相同的问题。我的代码在我的本地开发机器上运行 - 一个 Windows 机器 - 但后来在我们的生产服务器上失败了 - 一个 Linux 机器

问题是“classes”目录是小写的（\app\Vendor\dompdf\lib\php-font-lib\classes），windows 并不介意——但 Linux 区分大小写却做到了！

只需在 dompdf_config.inc.php 中编辑以下行即可解决问题：

```
require_once(DOMPDF_LIB_DIR . "/php-font-lib/Classes/Font.php"); 
```

为了保持一致性，我在 Windows 框中使用大写的“C”重命名了目录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-03T21:59:53.947

新版本的 dompdf 不适用于“composer install”或“c​​omposer update”。它需要特殊版本的字体库，这些字体库可能并不总是最新版本，因此将来可能会改变。但是您可以通过 dompdf 的文档找到如何安装它。**不知道为什么作者没有在 composer.json 中硬编码这些字体版本，但无论如何这里是如何做到的。**

目前使用该库最简单和最好的方法是通过 git（取自官方文档）

```
git clone https://github.com/dompdf/dompdf.git
cd dompdf

git clone https://github.com/PhenX/php-font-lib.git lib/php-font-lib
cd lib/php-font-lib
git checkout 0.4
cd ..

git clone https://github.com/PhenX/php-svg-lib.git php-svg-lib
cd php-svg-lib
git checkout v0.1 
```

然后你可以做

```
use Dompdf\Dompdf;
$dompdf = new Dompdf();
$dompdf->loadHtml('hello world');
$dompdf->setPaper('A4', 'landscape');
$dompdf->render();
$dompdf->stream( "/path-to-save-pdf-file/sample.pdf"); 
```

# php - 如何将会话到期绑定到 cookie 到期？

> ID：15028251
> 
> 赞同：0
> 
> 时间：2013-02-22T16:02:51.840
> 
> 标签：php, apache, session-cookies

在 PHP 中，我怎样才能制作一个在会话存在时持续存在的 cookie？

场景：一个网站由页面组成，有些是执行的 PHP 脚本，例如`login`和`view cart`. 有些是 Apache 从缓存中读取的静态 html 文件，并且在这些页面上不会调用 PHP。

在任何运行 PHP 的页面上都会生成和维护 sessionID。无论用户是否实际登录，会话都存在。会话存储用户是否登录。浏览器只有一个 sessionID cookie。

根据用户是否登录，缓存页面应该显示一个`log in`或一个按钮。`log out`PHP 不会在缓存页面上调用，因此无法在此处读取会话值。必须使用一个小的 JavaScript 函数来检查 IsLoggedIn cookie。

问题：如果用户登录，PHP 可以设置 JavaScript 读取的 cookie。好的。如果用户使用注销按钮明确注销，则 cookie 可能会过期。好的。

但是-如果用户离开计算机，他的会话在他与 PHP 支持的页面的最后一次交互后 x 秒过期，而他的 cookie 在创建后 y 秒过期。这可能导致一个超时。

有没有办法让两者同步，让它们总是一起过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:03:04.153

您可以将会话存储在数据库中，以便对它们进行更多控制，并在时间间隔上使用使用 ajax 集进行检查。这会让事情变得更容易，现在你不需要 cookie。虽然如果您想要“记住我”功能，您可以使用存储在 cookie 中的唯一标识符，并且`setcookie("nameofcookie", "unuiq md5 value maybe", time()*3600));`

但是，如果您在数据库中控制会话，您还可以控制会话长度，并且您的所有逻辑都可以在 php.ini 中。

您也可以执行此[PHP 会话超时](https://stackoverflow.com/questions/3068744/php-session-timeout)

我就是这样做的。

# android - 无法调用注册 Intent GCM Android

> ID：15028252
> 
> 赞同：1
> 
> 时间：2013-02-22T16:03:01.140
> 
> 标签：android, google-cloud-messaging

我正在尝试在 Android 上制作一个消息传递应用程序，我想要 GCM。但我无法获得registrationId。这是我的代码

```
public static void register(Context context) {
    //Log.v(TAG,"register");
    System.out.println("-----------------------------Authentication Register-----------------------");
    Intent registrationIntent = new Intent(
            "com.google.android.c2dm.intent.REGISTER");
    // sets the app name in the intent
    registrationIntent.putExtra("app",
            PendingIntent.getBroadcast(context, 0, new Intent(), 0));
    registrationIntent.putExtra("sender", SENDER_ID);
    context.startService(registrationIntent);
}

public static void unregister(Context context) {
    Intent unregIntent = new Intent(
            "com.google.android.c2dm.intent.UNREGISTER");
    unregIntent.putExtra("app",
            PendingIntent.getBroadcast(context, 0, new Intent(), 0));
    context.startService(unregIntent);
}
  } 
```

我的广播接收器类

```
 @Override
public final void onReceive(Context context, Intent intent) {
    System.out.println("------------------------------------BroadCastReceiver---------------------------------");
    MyIntentService.runIntentInService(context, intent);
    setResult(Activity.RESULT_OK, null, null);
} 
```

MyIntentService 类

```
 static void runIntentInService(Context context, Intent intent) {
    System.out.println("--------------------------------Intent---------------------------------");
    synchronized (LOCK) {
        contextC = context;
        if (sWakeLock == null) {
            PowerManager pm = (PowerManager) context
                    .getSystemService(Context.POWER_SERVICE);
            sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                    "my_wakelock");
        }
    }
    sWakeLock.acquire();
    intent.setClassName(context, MyIntentService.class.getName());
    context.startService(intent);
}

@Override
public final void onHandleIntent(Intent intent) {
    try {
        System.out.println("---------------------------------Register-------------------------------------------");
        String action = intent.getAction();
        Log.v("Intent", "RegisterIntent");
        if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
            Log.v("Intent", "RegisterIntent1");
            handleRegistration(intent);
        } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {
            handleMessage(intent);
        } else if (action.equals("com.example.gcm.intent.RETRY")) {
            String token = intent.getStringExtra("token");
            // make sure intent was generated by this class, not by a
            // malicious app
            if (TOKEN.equals(token)) {
                SharedPreferences settings = getSharedPreferences(
                        PREFS_NAME, 0);
                String registrationId = settings.getString(
                        "registrationId", null);// get from shared
                                                // properties
                if (registrationId != null) {
                    // last operation was attempt to unregister; send
                    // UNREGISTER intent again
                    Authentication.unregister(this);
                } else {
                    // last operation was attempt to register; send REGISTER
                    // intent again
                    Authentication.register(this);
                }
            }
        }
    } finally {
        synchronized (LOCK) {
            sWakeLock.release();
        }
    }
}

private void handleRegistration(Intent intent) {
    String registrationId = intent.getStringExtra("registration_id");
    //Log.v("RegistrationId", registrationId);
    String error = intent.getStringExtra("error");
    String unregistered = intent.getStringExtra("unregistered");
    // registration succeeded
    if (registrationId != null) {
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("registrationId", registrationId);
        editor.commit();
        //Log.v("Hello", "Registration Idaiudhaodhafhsofahsfs");
        // store registration ID on shared preferences
        // notify 3rd-party server about the registered ID
    }

    // unregistration succeeded
    if (unregistered != null) {
        // get old registration ID from shared preferences
        // notify 3rd-party server about the unregistered ID
    }

    // last operation (registration or unregistration) returned an error;
    if (error != null) {
        if ("SERVICE_NOT_AVAILABLE".equals(error)) {
            if ("SERVICE_NOT_AVAILABLE".equals(error)) {
                long backoffTimeMs = 12;// get back-off time from shared
                                        // preferences
                long nextAttempt = SystemClock.elapsedRealtime()
                        + backoffTimeMs;
                Intent retryIntent = new Intent(
                        "com.example.gcm.intent.RETRY");
                retryIntent.putExtra("token", TOKEN);
                PendingIntent retryPendingIntent = PendingIntent
                        .getBroadcast(contextC, 0, retryIntent, 0);
                AlarmManager am = (AlarmManager) contextC
                        .getSystemService(Context.ALARM_SERVICE);
                am.set(AlarmManager.ELAPSED_REALTIME, nextAttempt,
                        retryPendingIntent);
                backoffTimeMs *= 2; // Next retry should wait longer.
                // update back-off time on shared preferences
            } else {
                // Unrecoverable error, log it
                //Log.i(TAG, "Received error: " + error);
            }
            // optionally retry using exponential back-off
            // (see Advanced Topics)
        } else {
            // Unrecoverable error, log it
            Log.i(TAG, "Received error: " + error);
        }
    }
}

private void handleMessage(final Intent intent) {
    // final String ridesJSON=intent.getStringExtra("rides");
    // System.out.print(ridesJSON);
    Handler h = new Handler(Looper.getMainLooper());
    //Log.v("Message Chat", intent.getStringExtra("message"));

    h.post(new Runnable(){

        @Override
        public void run() {
            // TODO Auto-generated method stub
            Toast.makeText(contextC, intent.getStringExtra("message"), Toast.LENGTH_SHORT).show();
        }

    });
    /*
     * h.post(new Runnable(){
     * 
     * @Override public void run() { // TODO Auto-generated method stub
     */
    // }

    // });
    // server sent 2 key-value pairs, score and time
    // String score = intent.getStringExtra("score");
    // String time = intent.getStringExtra("time");
    // generates a system notification to display the score and time
} 
```

我的活动课

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_user_detail);
    email = (TextView) findViewById(R.id.textEmail);
    Authentication.register(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_user_detail, menu);
    return true;
}

public void butSubmitClick(View view) {
    userDetail = new UserDetail();
    userDetail.setId(1);
    userDetail.setName("Nilesh");
    userDetail.setEmail(email.getText() + "");
    settings = getSharedPreferences(PREFS_NAME, 0);
    registrationId = settings.getString("registrationId", null);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("email", email.getText() + "");
    editor.commit();
    Log.v("UserDetail ID", registrationId);
    userDetail.setRegistrationId(registrationId);
    Intent intent = new Intent(UserDetailActivity.this, MainActivity.class);
    UserDetailActivity.this.startActivity(intent);
    new SendUserDetail().execute(userDetail);
} 
```

但我总是将注册 ID 设为空。我什至认为注册可能需要一些时间。但等待 id 并没有帮助我

拜托，有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:10:03.340

在 mainActivity() 调用以下代码：

```
GCMRegistrar.register(this, SENDER_ID); 
```

此行实际上要求您的 GCM 将您的设备注册到 GCM。注册成功后，会调用 GCMIntentService 的以下方法。

```
@Override protected void onRegistered(Context context, String registrationId) {
    // here you will get registrationId.
    // Use this registration id save it safely
    // as you need to use it after for your message passing.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:17:58.250

也许我遗漏了一些东西，但我看不到您实际调用 GCMRegistrar 类的位置？像这样的东西：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

另外，我创建了一个小型开源项目，可以帮助您处理注册 ID。可能会很有趣，请访问：[https ://code.google.com/p/gcmutils/](https://code.google.com/p/gcmutils/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:46:51.353

我在文档中使用了[此处提出的模式。](http://developer.android.com/google/gcm/gs.html#android-app)谷歌图书馆做了很多事情，它对我来说就像开箱即用一样。它可能对你有帮助。

# performance - 同一页面上有多个网格查询大表的性能问题

> ID：15028253
> 
> 赞同：0
> 
> 时间：2013-02-22T16:03:01.500
> 
> 标签：performance, gridview, multiple-instances, page-load-time

我需要一些设计建议。我有一个大表，它存储 4 种不同状态的记录（例如 A、B、C 和 D）。要求在 UI 中，这些记录需要根据状态显示在 4 个不同的网格中。

所以我编写了一个存储过程，它将状态作为输入并返回一个数据集。并在页面加载时调用此 SP 以不同状态调用 4 次，然后将结果绑定到 gridview。一切正常。

问题是，由于表格是一个巨大的表格，加载页面需要大量时间。

注意：要求是显示所有 4 个网格，以便用户可以比较这些网格中的数据。

我已经在这个表中添加了索引，但仍然没有用。

实现这一目标的最佳设计是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:12:47.350

更改 SP 以返回 4 个结果集而不是 1 个。

调用新的 SP 一次。

在每个结果集中返回较少的结果，而是引入分页。

# android - 使用 AndEngine 和 Box2D 渲染 1 像素细线

> ID：15028254
> 
> 赞同：1
> 
> 时间：2013-02-22T16:03:02.407
> 
> 标签：android, box2d, andengine

我以下列方式创建一个 PhysicsWorld：

```
this.mPhysicsWorld = new FixedStepPhysicsWorld(30, new Vector2(0, 0), false, 8, 1); 
```

我以以下方式创建一条线：

```
final Line line = new Line(object.getX(), object.getY(),object.getX()+object.getWidth(), object.getY()+object.getHeight());
final FixtureDef lineFixtureDef = PhysicsFactory.createFixtureDef(0, 0, 1f);
PhysicsFactory.createLineBody(this.mPhysicsWorld, line, lineFixtureDef);
line.setVisible(true);
mScene.attachChild(line); 
```

这应该允许在一个像素条上发生碰撞，但不会产生预期的效果。条形下方至少有几个像素，左边有几个像素，高度和右侧都很好。

我还用一个矩形对此进行了测试，并且遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:32:33.723

如果您有这些问题，请检查以下内容，

检查您的图像，它是否可以访问边缘周围的 alpha 像素？

如果它是一个动画精灵，精灵表上的精灵列和行之间有多少间隙？- 如果图像“分割”时存在过多的这些 alpha 间隙，则可以包括在内。

另外，如果您使用的是箱体，那么精灵本身是什么？如果它是一个球，请使用圆形体，或者如果它的形状不规则，并且您想要更准确的碰撞，请使用多边形体。

乐意效劳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:54:40.920

听起来你说的是线条在错误的位置渲染。您正在从 Object 的位置获取线路位置。我的猜测是，您希望这条线从“对象”的中心渲染，而是从对象的左上角渲染。这是 AndEngine 中预期和期望的行为。如果你想让它从中心渲染，你需要计算对象的中心位置，而不是只取 X & Y。

相关地，您可能不应该考虑像素，而应该考虑场景坐标。我假设当您说“像素”时，您将其用作场景坐标的简写，但如果不是，请注意它们不是同一回事。

# c# - 我如何提供模型来查看？

> ID：15028258
> 
> 赞同：1
> 
> 时间：2013-02-22T16:03:16.117
> 
> 标签：c#, asp.net, asp.net-mvc

这是我的代码：

```
 [HttpGet]
        public FileContentResult GetCalenderView()
        {
            StringWriter sw = new StringWriter();
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(this.ControllerContext, "GetCalenderView");
            ViewContext viewContext = new ViewContext(this.ControllerContext, viewResult.View, this.ViewData, this.TempData, sw);
            viewResult.View.Render(viewContext, sw);

            var stringResult = sw.GetStringBuilder().ToString();

            byte[] byteArray = Encoding.ASCII.GetBytes(stringResult);

            return File(byteArray, "application/octet-stream", "Month.xls");
        } 
```

我在网上找到了这个。它的作用是给我字符串格式的视图，然后我将其作为 excel 文件发送。这是一个强类型视图。

我的问题是，我如何为这个视图提供模型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T16:08:01.707

设置`Model`您传入的 ViewData 的属性。

```
 [HttpGet]
    public FileContentResult GetCalenderView()
    {
        var viewData = ViewData; // Ideally copy this or make a fake of it
        viewData.Model = new object(); // Make this the model you want to pass in

        StringWriter sw = new StringWriter();
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(this.ControllerContext, "GetCalenderView");
        // Note that we're passing in viewData instead of ViewData
        ViewContext viewContext = new ViewContext(this.ControllerContext, viewResult.View, viewData, this.TempData, sw);
        viewResult.View.Render(viewContext, sw);

        var stringResult = sw.GetStringBuilder().ToString();

        byte[] byteArray = Encoding.ASCII.GetBytes(stringResult);

        return File(byteArray, "application/octet-stream", "Month.xls");
    } 
```

# tsql - T-SQL 中连接的区别

> ID：15028260
> 
> 赞同：0
> 
> 时间：2013-02-22T16:03:25.543
> 
> 标签：tsql, left-join, inner-join

这是我在一次采访中得到的一个问题。他们让我描述以下 3 个场景的差异。

查询 #1：

```
SELECT p.name, c.email
FROM PersonalDetails as p
JOIN ContactDetails c
ON p.id = c.id
WHERE p.region = 'UK' 
```

查询 #2

```
SELECT p.name, c.email
FROM PersonalDetails as p
LEFT JOIN ContactDetails c
ON p.id = c.id
WHERE p.region = 'UK' 
```

查询 #3：

```
SELECT p.name, c.email
FROM PersonalDetails as p
LEFT JOIN ContactDetails c
ON p.id = c.id AND p.region = 'USA' 
```

我的答案-第一个是内连接，第二个是左连接。因此，第一个查询将只返回两个表中的匹配记录，第二个查询将返回两个表中的匹配记录以及左表中的所有记录。

他们的答案 - 前 2 个查询将返回相同的结果。第三个查询将作为内部连接执行

谁能解释这是怎么发生的……？？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:22:48.420

让我们分解一下：

*   查询 1 是内连接；`JOIN`本身与`INNER JOIN`. 为面试官敲击 1。

*   查询 2 和 3 都是外连接。即使`WHERE`#2 中有一个子句，而#3 中有一个额外的`JOIN`子句，它也是针对父表的，并且不会从子表中过滤掉任何内容。为面试官敲击 2 和 3。

要么他们在测试你，看你是否会为你的答案辩护，要么他们不懂 SQL，要么你记错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:10:31.953

如果您要问面试官怎么会错得如此之大，而不是问您是否正确，那么这可能更适合 SE 中的 The Workplace。

我也遇到过类似的情况，面试的招聘经理不是技术人员，而是向技术人员咨询了要问 RE：RDBMS 和其他主题的问题类型。结果，经理对技术概念的掌握并不出色。

我也听过很多面试的故事，面试官会故意引诱申请人，提供错误的答案，或者多次问同一个问题，只是为了看看申请人会如何处理这种情况。

# php - Yii 复合键和 URL 参数

> ID：15028264
> 
> 赞同：0
> 
> 时间：2013-02-22T16:03:34.777
> 
> 标签：php, yii

我最近被一个包含很多复合主键（以及相关的外键朋友 XD）的数据库惊呆了。我正在使用 Yii 框架开发应用程序，我已经创建了我需要的所有模型和 crud，但我发现传递复合 pk 以创建自动 url 存在问题。

```
--- view ---
// this generate a php warning
Yii::app()->createUrl('controller/dosomething', array('id' => $model->primaryKey));

--- controller --
public function actionDoSomething(array $id) { ... } 
```

此解决方案会生成警告，因为 createUrl 在内部使用 urlencode 并且它只是声称第二个参数不应该是数组。当然，即使 $model->primaryKey 返回一个数组而不是一个标量，禁用 PHP 警告也会让它工作得很好。但我想要一个“干净”的解决方案来解决这个问题！！！有任何想法吗？我正在考虑序列化/反序列化或加密/解密参数以使用单个字符串，但老实说不认为是最佳选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:19:40.263

通常控制器方法不接收任何参数，因为它们是由`$_GET['field']`. 此外，Yii 提供了方法[`getActionParams`](http://www.yiiframework.com/doc/api/1.1/CController#getActionParams-detail)，它几乎和你想要的一样：

**看法：**

```
Yii::app()->createUrl('controller/dosomething', $model->primaryKey); 
```

**控制器：**

```
public function actionDoSomething() {
    $id = $this->getActionParams();
    // ...
} 
```

* * *

## 编辑

要仅获取包含所需值的子数组，您可以过滤参数：

```
public function actionDoSomething() {
    $keys = array_flip(array("pk1", "pk2"));
    $id = array_intersect_key($this->getActionParams(), $keys));
    // ...
} 
```

或者甚至更好，不要使用任何棘手的解决方案并保持明确：

**看法：**

```
Yii::app()->createUrl('controller/dosomething', array('pk1'=>$model->pk1,'pk2'=>$model->pk2)); 
```

**控制器：**

```
public function actionDoSomething(array $id) {
    // ...
} 
```

但请记住不要信任用户的输入并对其进行过滤，发送到控制器的参数也不例外。

# .net - Wix 合并模块表达对 .Net 2.0 的依赖

> ID：15028270
> 
> 赞同：0
> 
> 时间：2013-02-22T16:03:51.947
> 
> 标签：.net, wix, windows-installer, installation, wix3.5

我已经构建了一个 WIX 合并模块 (.wxs)，将多个组件传递到目标机器，并且正在努力了解是什么/谁/如何负责传递/安装这些组件的依赖项。

每个组件都是一个 .NET 2.0 程序集，因此我的合并模块需要在客户端计算机上安装 .NET 2.0。

如何在我的合并模块中表达/实现这一点？1\. 我是否以某种方式表达了对 .NET 2.0 的依赖，并且我的合并模块的消费者必须发布并安装所需的框架？2\. 我是否在 .NET 2.0 合并模块上添加要求并让我的合并模块安装 .NET 2.0 合并模块。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:17:38.513

正确编写和编译的 .NET 2.0 程序集可能确实依赖于 .NET 2.0、3.0 或 3.5 (CLR 2.0) 或 .NET 4.0 / 4.5 (CLR 4.0)。因此，说您需要 .NET 2.0 或更高版本可能更准确。

也就是说，合并模块只是其中的一部分。你如何选择设计这个表达式取决于你，这是我考虑的一种方式。

安装 .NET 不是合并模块的工作。事实上，它不可能是由于 Windows 安装程序互斥锁强制每台机器执行一个执行序列。这意味着这也不是 MSI 的工作。这就是引导程序和链接程序的用武之地。

MSI可以做的是仔细检查chainer是否完成了它的工作。此表达式可以在 MSI 或合并模块中编写。

您首先编写一个 AppSearch / Reglocator 来检测 .NET。WiX NetFx 扩展有一些内置属性，您可以参考这些属性来简化此操作。

现在您创作了 LaunchCondition。但是，对于 WiX，合并模块中不存在 Condition 元素。这是因为 MSDN 说 MergeModules 不应该使用 LaunchCondition 表。相反，您创作了一个 Type 19 错误自定义操作并在表中对其进行排序。

现在您可能希望在此检查上设置一个条件，以允许 MSI 覆盖该检查。（不是 DOTNETFRAME20FOUND 也不是 IGNOREDOTNETFRAME20）。事实上，您可能希望将所有这些放在一个合并模块（ REQUIRESDOTNETFRAME20.msm ）中，并由多个共享相同依赖项的合并模块引用它（不要重复自己）。

在我的上一份工作中，我们进行了产品线开发，这意味着数千个合并模块以不同的组合组合在一起以创建数十种产品。我们在独特的模块中表达了所有这些，并且通常在产品层而不是服务系列/组件层创建关联。有时，如果这是一个不寻常的依赖关系，我们会这样做。

# assembly - 将端口用于输入和输出

> ID：15028272
> 
> 赞同：0
> 
> 时间：2013-02-22T16:03:53.447
> 
> 标签：assembly, intel, 8051

我已经开始学习`Intel's 8051`汇编编程。我写了一个测试计算器程序。我只使用四个端口中的三个。我想知道我是否可以在同一个程序中使用一个端口作为输入和输出。

例如，在这个程序中，端口 3 用于将标志位作为输入并显示输出。

这是一些代码：

```
 JB P3.4, DisplayResult

 DisplayResult:

 MOV P3, #00H
 MOV P3, R0

 Here:

 SJMP Here 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:21:58.910

是的。你可以。

试着理解为什么`MOV P3, #00H`要写。如果您希望 P3 的引脚 0 为 O，而 P3 的引脚 1 为 I，那么您将写入`MOV P3, # 00000010B`，依此类推。

# iphone - 如何确定设置是否存储在 iOS 应用程序上？

> ID：15028275
> 
> 赞同：1
> 
> 时间：2013-02-22T16:03:54.803
> 
> 标签：iphone, ios, ipad, settings

我们可以使用以下代码来获取应用程序的设置：

```
[[NSUserDefaults standardUserDefaults] integerForKey:@"settingName"] 
```

但是如何确定是否存储了此设置？

PS 我不能为此使用特殊的 BOOL 设置，因为我需要知道是否从应用程序的先前版本存储了确切的设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:08:47.693

使用`objectForKey`：

```
NSNumber *integerSetting = [[NSUserDefaults standardUserDefaults] objectForKey:@"settingName"];
if (integerSetting) {
    NSInteger value = [integerSetting integerValue];
    // use value
} else {
    // setting not there
} 
```

如果这样做的目的是设置一些默认值，那么您最好设置一个默认值。在应用程序开始时执行此操作：

```
NSDictionary *defaults = @{ @"settingName" : @42 }; // set some default value
[[NSUserDefaults standardUserDefaults] registerDefaults:defaults]; 
```

请注意，注册默认值实际上不会更改任何值。如果您尝试获取尚无显式值的值，则会检索注册的默认值。

现在您的代码可以简单地是：

```
NSInteger value = [[NSUserDefaults standardUserDefaults] integerForKey:@"settingName"]; 
```

# javascript - 在静态（词法）范围内，何时绑定变量/声明标识符？

> ID：15028276
> 
> 赞同：1
> 
> 时间：2013-02-22T16:03:56.120
> 
> 标签：javascript, compiler-construction, environment-variables, scope

在[静态作用域中，](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping)标识符可以通过分析/解析源代码来确定（与动态作用域相比，动态作用域或多或少需要知道调用者环境）。

我的问题是这个，因为静态作用域只需要解析源代码以了解作用域和标识符绑定，是在编译时进行的作用域环境/标识符绑定，还是在访问每个函数（或新作用域）时确定这些绑定.

JavaScript 示例：

```
var globalVar;
function fooFunc() {
  var fooVar;
  function barFunc() {
    var barVar;
  }
} 
```

在这个简单的 JavaScript 示例中，我可以通过检查程序直观地确定 barFunc 环境将具有 barVar 变量，并且具有具有 fooVar 和 barFunc 函数的父环境，并且具有全局的父环境具有 globalVar 的范围。我很好奇编译器/解释器是否将源代码作为一个整体读取并进行绑定，或者这些确定是否是在逐个函数（或逐个作用域）的基础上做出的。

如果我不清楚，请告诉我。

谢谢你，

**编辑**：虽然我的示例是用 JavaScript 编写的（我对此特别好奇），但我也很好奇这在语言之间是否有所不同（即 JavaScript、C/C++、C#/VB 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:13:53.067

在 JavaScript 中，只有在调用函数时才会创建作用域。因此，尽管您的示例在全局范围内声明的函数中有一个函数，但只有全局范围存在。

`fooFunc`作用域和作用域在被调用之前`barFunc`不存在。由于它们从未被称为全局范围，因此它是程序中唯一的范围。哦，甚至不存在，因为从未被调用过。`fooFunc``barFunc``barFunc``fooFunc`

当你在 JavaScript 中调用一个函数时，会为它创建一个新的执行上下文。可以将执行上下文视为函数的范围。有关更多详细信息，请参阅此答案：[https ://stackoverflow.com/a/9384894/783743](https://stackoverflow.com/a/9384894/783743)

顺便说一句，您也可以在 JavaScript 中模拟动态范围：[是否可以在 JavaScript 中实现动态范围而不使用 eval？](https://stackoverflow.com/q/10060857/783743)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:14:02.700

我相信 Javascript 没有编译器，我不想引发讨论。

谈到您的问题，当 Javascript 下载到浏览器时，函数的主体永远不会执行。它需要被显式调用。因此，除非调用该函数，否则无法进行变量绑定。

# c# - 将 WPF 视图分解为组件并维护数据绑定

> ID：15028278
> 
> 赞同：0
> 
> 时间：2013-02-22T16:04:00.310
> 
> 标签：c#, data-binding, mvvm, wpf-controls

我正在开发 WPF/MVVM 中的标准数据输入应用程序。我有一个名为 LabSetupView.xaml 的文件，其中包含三个控件：

1.  用于显示可用实验室的组合框
2.  用于显示技术人员的组合框
3.  用于测试的 ListView

这些控件旨在协同工作 - 当用户选择技术人员时，仅显示该技术人员 ID 的测试。这是通过 Technician to Tests 上的导航属性完成的。

我正在考虑将这些控件移动到各自的 .xaml 文件中`<UserControl>`，然后将它们嵌套在其中，`<Window>`因为 LabSetupView.xaml 的 DataContext 只能设置一次。所以，我想如果我将控件组件化，我可以为每个控件拥有 ViewModel（即 LabView.xaml/LabViewModel.xaml 等），并且每个都继承自一个实现必要的 ViewModelBase `INotifyPropertyChanged`。

我的问题是：拥有一个本身没有数据上下文而是包含单独的用户控件的基板 .xaml 文件是一种常见的做法还是正常的做法，每个用户控件都有自己的数据上下文？

我问这个是因为我担心如果我尝试这样的事情，那么数据绑定和 INotifyProperChanged 将无法一起工作，因为这些视图是组件化的。换句话说，我上面的用例（获取技术人员的测试）不会绑定或更新属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:16:16.320

您当然可以让您的主视图（基板 .xaml 文件，如您在上面描述的那样）没有`DataContext`然后分配`DataContext`特定子控件，无论它们是否`UserControls`。

但是，根据您的描述，您可能需要考虑将 Composition 与您的 ViewModel 一起使用。在这种情况下，您将拥有一个 MainViewModel，它具有表示 ChildViewModel（技术人员和测试）的属性。这些子 ViewModel 可以通过 MainViewModel 进行通信，也可以不通过 MainViewModel 进行通信，具体取决于您想要如何组合。然后，`DataContext`主视图的 将是 MainViewModel，而`UserControls`将只是`DataBind`该视图模型的属性。

它可能看起来像这样：

```
public class MainViewModel : BaseViewModel
{
    public TechnicianViewModel Technician { get { return _technician; } }
    public TestViewModel Test { get { return _test; } }
    ...
} 
```

XAML 的缩写示例如下所示（假设 MainViewModel 已设置为 Window 的 DataContext）：

```
<Window x:Class="MainView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

      <StackPanel>
           <local:TechnicianView DataContext="{Binding Technician}"/>
           <local:TestView DataContext="{Binding Test}"/>
      </StackPanel>

</Window> 
```

这就是我解决上述场景类型的方法，并且效果很好。当您可以使用 IoC/DI 通过 IoC 容器注入子视图模型时，它工作得很好。

**已编辑**

根据您在下面的评论/问题，一些额外的细节。您询问如何在选定的技术人员和该技术人员可用的测试之间建立关系。处理此问题的一种方法是让 TestsViewModel 成为 TechnicanViewModel 的子项。因此，例如，您可以拥有以下内容：

```
public class MainViewModel : BaseViewModel
{
    public IEnumerable<TechnicianViewModel> AvailableTechnicians { get { return _technicians; } }
    public TechnicianViewModel SelectedTechnician 
    { 
        get { return _selected; } 
        set 
        { 
            _selected = value; 
            RaiseNotifyPropertyChanged("SelectedTechnician");
        } 
    }
    ...
}

public class TechnicianViewModel : BaseViewModel
{
    public IEnumerable<TestViewModel> Tests { get { return _tests; } }
} 
```

然后在您的 XAML 中：

```
<StackPanel>
     <ListBox ItemsSource="{Binding AvailableTechnicians}" SelectedItem="{Binding SelectedTechnician, Mode=TwoWay}"/>
     <ListBox ItemsSource="{Binding SelectedTechnician.Tests}"/>
</StackPanel> 
```

这将使测试`ListBox`与技术人员中选定的技术人员同步`ListBox`。这只是一个示例（在文本编辑器中编写，如果我有任何错误，则不是 VS），而是处理您正在讨论的那种关系的一种方法。

# java - 在 Swing 窗口中强制固定宽高比

> ID：15028279
> 
> 赞同：2
> 
> 时间：2013-02-22T16:04:01.480
> 
> 标签：java, swing, resize, window

我已经搜索了这个问题，但并没有真正找到一个明确、有用的答案。我正在构建我的第一个 Java UI 应用程序¹（使用 Swing），我想知道一件事：如何强制调整窗口大小以进行缩放？这对我即将到来的项目在美学上很重要。谁能帮我解决这个问题？谢谢！伙计们，我不是在要求“给我一个解决方案”，我知道你们讨厌这样，我只需要有人帮助我实现它！

1.  这是一个小博格游戏。我有一个带有`JButton`实例的网格来模拟 Boggle 的骰子（需要单击这些骰子来形成单词），当我调整窗口大小时，我希望骰子保持方形，它们变成矩形，这并不是它应该的样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:44:39.220

您也许可以调整 中所示的方法，在[这里](https://stackoverflow.com/a/4151403/230513)`JDigit`看到，它重新采样一个大的以填充组件；调整框架大小以查看效果。您可以通过将和设置为相同的值来强制执行 1:1 纵横比： 。[此处](https://stackoverflow.com/a/3538279/230513)显示了一个相关示例。`BufferedImage``width``height``Math.min(width, height)`

![图片](../Images/07869045045390c74d36db7494aa579c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:09:08.657

您可以在窗口上侦听组件调整大小的事件，并在宽度更改时设置所需的缩放高度。

```
addComponentListener(new ComponentAdapter() {
  public void componentResized(ComponentEvent e) {
    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        // TODO: calculate new size and set it
      }
    });
  }
}); 
```

但是，您必须对此进行调整，以避免闪烁。

# html - GIF 图像不在 Chrome/FF 中显示但在 IE 中

> ID：15028291
> 
> 赞同：1
> 
> 时间：2013-02-22T16:04:40.953
> 
> 标签：html, animated-gif

我收到了一组 GIF 图像，可以作为可下载的横幅放在网站上。GIF 是在 Photoshop CS4 中制作并保存在网络上的。还尝试在 CS6 中保存。

*   在一个简单的 .html 文件中，GIF 会显示在所有浏览器中
*   在我的本地 Apache 服务器和远程，在 Firefox 中，GIF 在 Firebug 中灰显（不显示），并且添加了一个神秘的类（启用或不启用 JS）`class="ohpzmoxfjlujhttypwqv"`
*   在 Chrome 上，图像也不会显示。Chrome 将以下内容添加到 GIF 中：`style="display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 0px 0px;" width="0" height="0"`
*   有或没有将尺寸指定为属性或样式。
*   我在 PS 中使用不同 Save-For-Web 模式测试的 GIF 是一个简单的两帧 GIF，每帧暂停 4 秒
*   我尝试在 Apache 中手动指定 MIME 类型，这不是 MIME 问题。
*   **我从互联网上尝试过的 GIF 中有 3/4 有效。一个有同样的问题。**
*   **所有的 GIF 都在 IE 中工作**

有没有人经历过这种巫术并且知道发生了什么？

谢谢

这是一个不起作用的（但在这个站点上起作用！）。让我觉得这是一些奇怪的 Apache 配置。 ![在此处输入图像描述](../Images/0dded19ca9a0206db21c57689562ed44.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-08T11:49:34.247

它的 AdBlock plus 或其他广告拦截器...

暂时停用它并重试...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:24:58.127

因为您没有提到区分大小写的检查，所以我要求确定：

在编写您的 html 时，您是否检查了文件名？

例如你有 AnimatedGif.gif

```
<img src="animatedgif.gif" /> 
```

将在不区分大小写的操作系统（如 Windows）上的浏览器中向您显示图像，但在 Linux 上您会遇到麻烦。

```
<img src="AnimatedGif.gif" /> 
```

可以在两个系统上工作。

# php - Wordpress 功能 - 将插件添加到新分类法中

> ID：15028295
> 
> 赞同：0
> 
> 时间：2013-02-22T16:04:54.977
> 
> 标签：php, wordpress, wordpress-theming

我有一个 wordpress 网站，在仪表板中，我添加了一个新菜单项 - 属性，其中包含位置、价格等元字段列表。

但同样，我想向它添加附件插件，因此每个新的单个属性都可以为我设置的图片库添加附件。我该怎么做呢？

作为更多信息，我在我的functions.php中定义了这个：

```
$property->add_meta_box( 
    'Property Info', 
    array(
        array(
            'name'          => 'price',
            'label'         => 'Price',
            'description'   => 'Leave Blank for TBC',
            'type'          => 'text'
        ),
        array(
              'name'        => 'bedrooms',
              'label'       => 'Bedrooms',
              'type'        => 'text'
        ),
        array(
              'name'        => 'location',
              'label'       => 'Location',
              'type'        => 'select',
              'options'     => get_array_of_locations(),
        ),
        array(
              'name'        => 'property_type',
              'label'       => 'Type',
              'type'        => 'select',
              'options'     => get_array_of_property_types(),
        ),
        array(
              'name'        => 'postcode',
              'label'       => 'Postcode',
              'type'        => 'text',
        ),
    )
); 
```

但我不知道如何将[http://wordpress.org/extend/plugins/attachments/installation/](http://wordpress.org/extend/plugins/attachments/installation/)添加到我的新 $property

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:01:08.970

放

```
define( 'ATTACHMENTS_LEGACY', true ); // force the legacy version of Attachments 
```

在配置文件的顶部而不是底部，它起作用了。

# ios - 核心数据多级父-子上下文

> ID：15028301
> 
> 赞同：6
> 
> 时间：2013-02-22T16:05:13.153
> 
> 标签：ios, objective-c, core-data, nsmanagedobjectcontext

在我的应用程序中，我有`UITableViewController`显示事件列表。此控制器使用 ManagedObjectContext Say `ParentContext`。现在，如果选择了任何事件，则会显示一个详细的视图控制器，用户可以在其中编辑事件的详细信息。所以我创建了一个子上下文说，

`ChildContext with type "NSPrivateQueueConcurrencyType"`

`ChildContext whose parent Context is "ParentContext".`

我的代码是：

```
 NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
  childContext.parentContext = self.context ; 
```

现在又有一些领域和关系需要再次深入研究。所以我为新的视图控制器创建了另一个 ChildContext 说，

`GrandChildContext with type "NSPrivateQueueConcurrencyType"`

`GrandChildContext whose parent context is "ChildContext"`

此过程进行到另一个级别（从父级（tableView）到子级总共 4 个级别）

```
self.context - Parent Context
  |
  |
ChildContext
  |
  |
GrandChildContext
  |
  |
GrandGrandChildContext 
```

* * *

我的实体看起来像这样

```
EntityA           -- ( Edit View Controller  - uses ChildContext )
 |
 |- Field1
 |
 |- Field2
 |
 |- RelationShip (1 to Many ) - ( Relationship Add / Edit View Controller - uses GrandChildContext )
     |
     |- Field1
     |    .
     |    .
     |- Field3
     |
     |- Relationship ( 1 to Many ) - ( Relationship Add / Edit View Controller - uses GrandGrandChildContext )
            |
            |- Field1
            |
            |- Field2 
```

这是使用父子上下文的正确方法吗？因为在某个时候我会喜欢`1 NSMainQueueConcurrencyType MOC and 3 NSPrivateQueueConcurrencyType MOC`。

如果不是？还有其他方法吗？

太多的子上下文会影响应用程序的性能吗？

最初我使用 Properties 和 NSArrays 来管理用户输入的数据，当用户点击完成按钮时，我将更新/创建托管对象。但这是一项乏味的工作，它让我的视图控制器变脏了。所以我切换到父子上下文，这很容易保存/丢弃更新。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T01:53:54.680

您可能对多个子上下文有些过分，但只是一点点，而且您的一般方法是合理的。MOC（托管对象上下文）是一个相当轻量级的对象。

我喜欢你在每个视图控制器/场景中对适用于该场景的 MOC 有一个不同的引用的方法。

有时将 MOC 视为会话或暂存器会很有帮助。匹配不是在 MOC 和实体之间，而是在 MOC 和逻辑工作单元之间。

如果您的其中一个向下钻取标记了用户可能想要放弃/取消的某些编辑任务的开始，那么这是剥离子 MOC 并将其传递到新视图的好时机。如果需要，您可以回滚：甚至在您放松回到起点时放弃 MOC。

另一方面，如果您只是为静态信息编写一个查看器，则只使用一个 MOC。在这种情况下，没有必要或受益于使用更多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T17:37:37.753

也许对于嵌套托管对象上下文的最佳用例存在一些混淆。对于您的情况，我建议仅使用一个上下文。

从数组等迁移到 Core Data 是一个非常好的主意。现在释放对象图的真正力量和简单性。尽量保持简单。

为了向下钻取，只需将上下文传递给子视图控制器。您的子视图控制器获取结果控制器可以使用与父视图控制器相同的上下文。许多 Apple 代码示例正是使用这种模式。

您需要上下文的唯一时间是您确实需要并发性。这似乎根本不是这种情况。检索到数据后，将显示子视图控制器的新界面。如果这需要太长时间（例如，因为数据来自 Web 服务），您会显示某种“请稍候”界面，并在数据检索完成后显示完整的界面。这很可能不是您的情况。

# .htaccess - CodeIgniter 中的 htaccess 问题

> ID：15028302
> 
> 赞同：0
> 
> 时间：2013-02-22T16:05:15.493
> 
> 标签：.htaccess, codeigniter

如何删除 index.php 以便利用 CI 的 URL 技巧？当我删除“index.php”时，即使控制器上存在必要的类，它也会出现 404 错误或 403。

这是目前我在根目录上的 .htaccess：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

config.php 上的其他 CI 规范：

```
$config['index_page'] = '';

$config['uri_protocol'] = 'AUTO'; 
```

rewrite_module 已启用。

在 httpd.conf 上：

```
<Directory />
Options FollowSymLinks
AllowOverride None
Order Allow,Deny
Allow from all
</Directory> 
```

**编辑**：明确地说，我可以访问我的应用程序的“主页”（`http://localhost/projectfolder`）。但是，当我访问特定的控制器 ( `http://localhost/projectfolder/admin`) 时，它将不起作用。但是当 index.php 在主机和控制器 ( `http://localhost/projectfolder/index.php/admin`) 之间时，它可以工作。我正在寻找解决中间的'index.php'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:41:30.027

看了几遍你的问题，终于明白了。我相信您需要添加一个 RewriteBase 如下所示：

```
RewriteEngine on
RewriteBase /projectfolder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T05:42:26.503

如果您使用 localhost，那么您的 $_SERVER['DOCUMENT_ROOT'] 将取决于您的 wamp 或 xampp 文件夹。它不会包含您的项目文件夹名称。

因此，如果您的项目文件夹名称是“test”，那么您必须如下编写您的 htaccess。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /test/index.php/$1 [L] 
```

您必须在最后一行添加“test/”，并且不需要在 URL 中添加 index.php。我希望这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:54:47.143

扩展永联的评论：

您不会实际删除 index.php 文件。您收到 403 因为目录列表被拒绝（并且 index.php 不存在），并且控制器/方法 url 上的 404 因为它们实际上不存在。

把 CodeIgniter index.php 放回它所属的地方，你应该没问题。这一行：

```
$config['index_page'] = ''; 
```

是“删除”index.php 的重要部分。有了这个空白，CodeIgniter 的 url/uri 辅助函数将不会放入`index.php`url。

有关更多信息，请参阅我的正确[答案。](https://stackoverflow.com/questions/11792268/how-to-set-proper-codeigniter-base-url/11801195#11801195)`base_url`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:14:10.383

请确保 mod_rewrite 已启用。也请像这样尝试 httpd.conf

```
<Directory /youdirectory path>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
</Directory> 
```

[另请检查此处](http://ellislab.com/codeigniter/user-guide/general/urls.html)设置的 CodeIgniter URL

# ios - 为什么 applicationState 被返回为零？

> ID：15028304
> 
> 赞同：2
> 
> 时间：2013-02-22T16:05:22.520
> 
> 标签：ios, objective-c, application-state

我正在尝试检查我的 iOS 应用程序的应用程序状态，但是当我检查

```
[UIApplication sharedApplication].applicationState 
```

我越来越零了。我检查了 [UIApplication sharedApplication] 不为零。我基本上只是检查屏幕是否打开，所以我只是检查以下结果：

```
[UIApplication sharedApplication].applicationState == UIApplicationStateActive 
```

知道为什么我会得到零回报吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:11:54.217

OK your code is incorrect (I'm surprised it compiled):

```
UIApplicationState *applicationState = [UIApplication sharedApplication].applicationState; 
```

Should be:

```
UIApplicationState applicationState = [UIApplication sharedApplication].applicationState; 
```

(it's an `enum` not an object).

# magento - Magento PDF 发票内容布局问题

> ID：15028306
> 
> 赞同：4
> 
> 时间：2013-02-22T16:05:26.490
> 
> 标签：magento

我一点也不擅长PDF。我在下面添加了两个部分，它们被称为“发票评论和订单评论”。我遇到的麻烦是我不能把这两个部分放在一个好的单元格中。当我尝试诸如此类的事情时`$pdf->Cell`，我只会得到可怕的白屏。由于某种原因，它似乎只`drawText`适用于渲染文本。此外，评论从 PDF 页面延伸出来。我试图输入换行符但没有成功。我猜它的 b/c 评论是数组。任何帮助都会很棒。

```
class Inchoo_Invoice_Model_Order_Pdf_Invoice extends Mage_Sales_Model_Order_Pdf_Invoice
{
    protected function insertImage($image, $x1, $y1, $x2, $y2, $width, $height, &$page)
    {
        if (!is_null($image)) {
            try{
                $width = (int) $width;
                $height = (int) $height;

                //Get product image and resize it
                $imagePath = Mage::helper('catalog/image')->init($image, 'image')
                    ->keepAspectRatio(true)
                    ->keepFrame(false)
                    ->resize($width, $height)
                    ->__toString();

                $imageLocation = substr($imagePath,strlen(Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB)));
                $image = Zend_Pdf_Image::imageWithPath($imageLocation);
                //Draw image to PDF
                $page->drawImage($image, $x1, $y1, $x2, $y2);
            }
            catch (Exception $e) {
                return false;
            }
        }
    }

    public function getPdf($invoices = array())
    {
        $width = 1000;
        $height = 1000;
        $this->_beforeGetPdf();
        $this->_initRenderer('invoice');

        $pdf = new Zend_Pdf();
        $this->_setPdf($pdf);
        $style = new Zend_Pdf_Style();
        $this->_setFontBold($style, 10);

        foreach ($invoices as $invoice) {
            if ($invoice->getStoreId()) {
                Mage::app()->getLocale()->emulate($invoice->getStoreId());
            }
            $page = $pdf->newPage(Zend_Pdf_Page::SIZE_A4);
            $pdf->pages[] = $page;

            $order = $invoice->getOrder();

            /* Add image */
            $this->insertLogo($page, $invoice->getStore());

            /* Add address */
            $this->insertAddress($page, $invoice->getStore());

            /* Add head */
                        $page->drawText(Mage::helper('sales')->__('Invoice # ') . $invoice->getIncrementId(), 487, 780, 'UTF-8');
            $this->insertOrder($page, $order, Mage::getStoreConfigFlag(self::XML_PATH_SALES_PDF_INVOICE_PUT_ORDER_ID, $order->getStoreId()));

            $page->setFillColor(new Zend_Pdf_Color_GrayScale(1));
            $this->_setFontRegular($page);

            /* Add table */
            $page->setFillColor(new Zend_Pdf_Color_RGB(0.93, 0.92, 0.92));
            $page->setLineColor(new Zend_Pdf_Color_GrayScale(0.5));
            $page->setLineWidth(0.5);

            $page->drawRectangle(25, $this->y, 570, $this->y -15);
            $this->y -=10;

            /* Add table head */
            $page->setFillColor(new Zend_Pdf_Color_RGB(0.4, 0.4, 0.4));
            $page->drawText(Mage::helper('sales')->__('Products'), 35, $this->y, 'UTF-8');
            //Added for product image
            $page->drawText(Mage::helper('sales')->__('Product Image'), 279, $this->y, 'UTF-8');
            $page->drawText(Mage::helper('sales')->__('SKU'), 125, $this->y, 'UTF-8');
            $page->drawText(Mage::helper('sales')->__('Price'), 380, $this->y, 'UTF-8');
            $page->drawText(Mage::helper('sales')->__('Qty'), 430, $this->y, 'UTF-8');
            $page->drawText(Mage::helper('sales')->__('Tax'), 480, $this->y, 'UTF-8');
            $page->drawText(Mage::helper('sales')->__('Subtotal'), 535, $this->y, 'UTF-8');

            $this->y -=15;

            $page->setFillColor(new Zend_Pdf_Color_GrayScale(0));

            /* Add body */
            foreach ($invoice->getAllItems() as $item){
                if ($item->getOrderItem()->getParentItem()) {
                    continue;
                }

                if ($this->y < 15) {
                    $page = $this->newPage(array('table_header' => true));
                }

                /* Draw item */
                $page = $this->_drawItem($item, $page, $order);

                /* Draw product image */
                $productId = $item->getOrderItem()->getProductId();
                $image = Mage::getModel('catalog/product')->load($productId);
                $this->insertImage($image, 345, (int)($this->y + 0), 275, (int)($this->y+65), $width, $height, $page);
            }

            /* Add totals */
            $page = $this->insertTotals($page, $invoice);

/*************************** This Is The Invoice Comments ***********************************/
$_tempY = $this->y;
$this->y += 10;

$commentsCollection = $invoice->getCommentsCollection(true);

$internalcomments = "Internal Invoice Comments";    
$page->drawText($internalcomments, 35, $this->y, 'UTF-8'); 

            foreach($commentsCollection as $comm)
            {
                $page->drawText($comm->getData('comment'), 235, $this->y, 'UTF-8');
                $this->y -= 10;

            } 

/*************************** End Invoice Comments ***********************************/

            if ($invoice->getStoreId()) {
                Mage::app()->getLocale()->revert();
            }
        }

/************************* This Is The Order Comments *******************************/

$_tempY = $this->y;
$this->y -= 80;

$statusHistoryCollection = $order->getStatusHistoryCollection();
$customersection = "Order Customer Comments";
   $page->drawText($customersection, 35, $this->y, 'UTF-8'); 
foreach ($statusHistoryCollection as $statushistory) {  
   $page->drawText($statushistory->getComment(), 35, $this->y, 'UTF-8');
   $this->y -= 10;
}

$this->y = $_tempY;

/************************* End Order Comments *******************************/

        $this->_afterGetPdf();

        return $pdf;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:30:12.687

我已经为您完成了发票评论部分，因此您可以将相同的技术应用于订单评论。我在我的沙箱上对此进行了测试，它确实有效。您可以将`120`行中的值更改为`$textChunk = wordwrap($comm->getData('comment'), 120, "\n");`最适合您的发票的值。我在其中添加了一个表头，`Internal Invoice Comments`但如果需要，您可以将其删除。

```
/*************************** This Is The Invoice Comments ***********************************/

    $this->_setFontRegular($page, 10);

    // Begin table header
    $page->setFillColor(new Zend_Pdf_Color_RGB(0.93, 0.92, 0.92));
    $page->setLineColor(new Zend_Pdf_Color_GrayScale(0.5));
    $page->setLineWidth(0.5);
    $page->drawRectangle(25, $this->y, 570, $this->y -15);
    $this->y -= 10;
    $page->setFillColor(new Zend_Pdf_Color_RGB(0, 0, 0));
    // end table header

    $_tempY = $this->y;

    $commentsCollection = $invoice->getCommentsCollection(true);

    $internalcomments = "Internal Invoice Comments";
    $page->drawText($internalcomments, 35, $this->y, 'UTF-8');

    $this->y -= 15;

    foreach($commentsCollection as $comm)
    {
            $textChunk = wordwrap($comm->getData('comment'), 120, "\n");
            foreach(explode("\n", $textChunk) as $textLine){
                    if ($textLine!=='') {
                            $page->drawText(strip_tags(ltrim($textLine)), 35, $this->y, 'UTF-8');
                            $this->y -= 15;
                    }
            }

     }

/*************************** End Invoice Comments ***********************************/ 
```

PS Magento PDF 例程中的新行部分改编自[PHP + PDF Line Break](https://stackoverflow.com/questions/4950654/php-pdf-line-break/4950852#4950852)。谢谢@shaune！

# linux - sed - 修改第一列中的单个字符而不触及其他字符

> ID：15028307
> 
> 赞同：0
> 
> 时间：2013-02-22T16:05:26.630
> 
> 标签：linux, bash

我有一个需要修改原始文件的接口列表， `.`以便`:`我可以将它们输入到 ifconfig 脚本中。

它看起来基本上是这样的：

```
eth0.1 192.168.0.1 255.255.255.0

eth0.2 192.168.1.1 255.255.255.0

eth0.3 192.168.2.1 255.255.255.0 
```

使用我的基本 sed 知识，我可以执行以下操作：

```
sed -i 's/\./\:/g' <test_file> 
```

这变成`.`了`:`.

```
eth0:1 192:168:0:1 255:255:255:0 
```

现在，如果我不修改原始文件，我知道我可以，`awk '{print $1}'`但是我不知道在使用`sed -i`.

我应该提一下，还有某些行不是子接口，例如：

```
eth1 10.10.10.1 255.255.255.0 
```

`g`不幸的是，删除`sed`（我确信这是正确的方向）将这些行的第一个八位组修改为：

```
eth1 10:10.10.1... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:14:53.440

试试这个 ：

```
sed -i -r 's/^(eth[0-9]+)\./\1:/' file.txt 
```

输出 ：

```
eth0:1 192.168.0.1 255.255.255.0
eth0:2 192.168.1.1 255.255.255.0
eth0:3 192.168.2.1 255.255.255.0 
```

# ios - 有没有人有使用 encodeBytes:length:forKey: 的示例代码？

> ID：15028310
> 
> 赞同：0
> 
> 时间：2013-02-22T16:05:37.090
> 
> 标签：ios, objective-c

我的 NSCoder 类显然需要它，如果我能看到一个真实的例子及其相应的方法，那将会很有用。

我觉得我需要它的原因是当我的方法尝试为 NSString* 编码对象时，它抱怨说：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -encodeBytes:length:forKey: 仅为抽象类定义。定义 -[JSONEncoder encodeBytes:length:forKey:]!'

谢谢。

JSONEncoder 中的方法：（[https://github.com/ontometrics/JSONCoding](https://github.com/ontometrics/JSONCoding)）我无法让静态库工作，所以我试图直接使用代码。

```
- (void)encodeObject:(id)object {
    [self push:object];
    [object encodeWithCoder:self];

    finalJSONObject = [NSDictionary dictionaryWithObject:[self topObject] forKey:[[[object class] description] camelcaseString]];

    [self pop];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:51:17.860

我认为这`JSONEncoder`主要是为了对来自自定义类的对象（必须实现`NSCoding`协议）进行编码。例如，如果您定义一个`Person`具有字符串属性的类：

```
@interface Person : NSObject <NSCoding>
@property(strong, nonatomic) NSString *name;
@end

@implementation Person
- (id)initWithCoder:(NSCoder *)coder {
    if ((self = [super init])) {
        self.name = [coder decodeObjectForKey:@"name"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)coder {
    [coder encodeObject:self.name forKey:@"name"];
}
@end 
```

那么您可以使用以下方法对此类的对象进行编码而不会出现问题`JSONEncoder`：

```
JSONEncoder *encoder = [JSONEncoder encoder];
Person *obj = [[Person alloc] init];
obj.name = @"John";
[encoder encodeObject:obj];
NSString *json = [encoder json];
NSLog(@"%@", json);
// Output: {"person":{"name":"John"}} 
```

它也适用于一些“普通”的 Foundation 类型，例如 with `NSNumber`，但输出不是很“好”，我不确定是否`JSONEncoder`打算这样使用：

```
JSONEncoder *encoder = [JSONEncoder encoder];
NSNumber *obj = @1234;
[encoder encodeObject:obj];
NSString *json = [encoder json];
NSLog(@"%@", json);
// Output: {"__NSCFNumber":{"NS.intval":1234}} 
```

在这种情况下，`encodeInt64:forKey:`方法`JSONEncoder`是在内部调用。

但是，正如您所注意到的，它不适用于`NSString`：

```
JSONEncoder *encoder = [JSONEncoder encoder];
NSString *obj = @"Hello world";
[encoder encodeObject:obj];
// Exception: *** -encodeBytes:length:forKey: only defined for abstract class.  Define -[JSONEncoder encodeBytes:length:forKey:]! 
```

异常的原因`NSString`是`NSCoding`合规的，但是它使用`-encodeBytes:length:forKey:`了编码器的，并且`JSONEncoder` *没有实现这个方法*。

实现该方法并不太困难，这是一个快速而肮脏的尝试：

```
- (void)encodeBytes:(const uint8_t *)bytesp length:(NSUInteger)lenv forKey:(NSString *)key
{
    NSString *s = [[NSString alloc] initWithBytes:bytesp length:lenv encoding:NSUTF8StringEncoding];
    [self setObject:s forKey:key];
} 
```

如果将此代码添加到“JSONEncoder.m”，那么您可以编码纯文本`NSString`而不会出现异常，结果如下所示：

```
{"__NSCFConstantString":{"NS.bytes":"Hello world"}} 
```

但同样，我不确定是否`JSONEncoder`要这样使用。

# php - 如何使用 MySQL/PHP 检查是否有价值

> ID：15028320
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:06:17.763
> 
> 标签：php, mysql

那么这里是脚本：

```
<?php
session_start();
$con = mysql_connect("localhost","***","***");
mysql_query("SET NAMES UTF8");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("**8", $con);
$sql = mysql_query("TRUNCATE TABLE headset");
$qry= "INSERT INTO `headset` (`WebTitle`) VALUES ('". $_POST[webtitle] ."')";
$sql = mysql_query("TRUNCATE TABLE headset2");
$qry= "INSERT INTO `headset2` (`WebSlogan`) VALUES ('". $_POST[webslogan] ."')";

if (!mysql_query($qry,$con))
  {
  die('Error: ' . mysql_error());
  }
header("location: ../generalsettings.php");
exit();

mysql_close($con);
?> 
```

这仅适用于一个值：我有一个带有 2 个框的表单，我想实现以下目标：如果只有一个框被填充，我想截断并仅插入填充的值，并且不执行任何操作其他未填写的框。我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:18:45.180

不要使用 mysql_query 函数！！！更好地使用 pdo 类

[http://php.net/manual/de/book.pdo.php](http://php.net/manual/de/book.pdo.php)

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');

if (isset($_POST['webtitle']) && $_POST['webtitle'] != '') {
   try {
      $db->query('TRUNCATE TABLE headset');
      $stmt = $db->prepare("INSERT INTO headset (WebTitle) VALUES (?)");
      $stmt->bindParam(1, $_POST[webtitle]);
      $stmt->execute();
   } catch(PDOException $ex) {
      echo "An Error occured!"; //user friendly message
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:17:05.603

检查数据库中是否有值执行此操作

```
 $myquery= mysql_query(" select * from headset ");
   if(mysql_fetch_row($myquery)==0){ --//there is no data in your database
                                   }
    else {  --//there is data do what you like 
         } 
```

*   *请使用 mysqli 或 PDO 代替 mysql

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:09:09.580

```
if (isset($_POST['webtitle']) && $_POST['webtitle'] != '') {
    // $_POST['webtitle'] code here
}
if (isset($_POST['webslogan']) && $_POST['webslogan'] != '') {
    // $_POST['webslogan'] code here
} 
```

另一个也一样

# python - 如何将列表拆分为单独的行？

> ID：15028322
> 
> 赞同：0
> 
> 时间：2013-02-22T16:06:26.940
> 
> 标签：python

我有一个由以下代码组成的列表：

```
[ self.directory + "/" + file for file in os.listdir(self.directory) ] 
```

当我打印此列表时，它出现在以逗号分隔的一行上。

如何拆分此列表，以便在打印时每个列出的项目都出现在自己的行上？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:08:19.733

好吧，如果您希望列表中的项目在单独的行中，您可以这样做

```
your_list = [ self.directory + "/" + file for file in os.listdir(self.directory) ]

for e in your_list:
    print e 
```

或使用`str.split`

```
print '\n'.join(your_list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:08:38.657

```
>>> print ('\n'.join(['1','2','3','4']))
1
2
3
4 
```

# c# - 使用c#使光标的热点变大

> ID：15028324
> 
> 赞同：1
> 
> 时间：2013-02-22T16:06:29.603
> 
> 标签：c#

我需要扩大热点光标的范围。

例如，将光标更改为 100x100 的正方形，正方形内的所有内容都可以点击，而不仅仅是 1 个像素。

可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:19:21.233

使用默认的 windows shell（即桌面），没有。Windows 光标需要一个像素作为热点，这样操作系统就可以很容易地知道*点击*了什么。您可以沿着实现自己的桌面和光标系统的路线走下去，但这太过分了，您仍然会遇到弄清楚在 100x100 正方形内点击了什么的问题。文本框和按钮之间的距离在 100 像素以内是很容易的

# c++ - 将参数传递给方法 C++

> ID：15028332
> 
> 赞同：0
> 
> 时间：2013-02-22T16:06:54.657
> 
> 标签：c++, methods, parameters

我有java经验，我决定看看C++。为此，我想我会浏览一些我之前做过的早期（基本）Java 示例，并将它们转换为 C++。基本上我有两个类，“主要”和“转换”

转换会将英制测量单位转换为公斤。

main 获取用户输入。我正在尝试做的是将 2 个双精度值和两个字符串从 main 传递给转换中的方法，`convert`但我得到了错误

`missing ';' before ','`对于下面的方法调用（ unit1 和 unit 2 是双变量），然后其他两个是字符串

```
 Conversion.convert(unit1, unit2, sUnit1, sUnit2); 
```

这应该在转换中将 4 个参数发送到此方法。

```
void convert(double unit1, double unit2, std::string sUnit1, std::string sUnit2)
{
    double result1 = calculate(unit1, sUnit1);
    double result2 = calculate(unit2, sUnit2);
    print(result1+result2);
} 
```

任何想法为什么会引发错误？还说如果你需要更多代码，我相信这真的很明显，但也许你可以从我的代码中看到我更习惯于 Java。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T16:11:15.940

你不能在这样的类上调用方法。要么`convert`是一个静态方法，在这种情况下，你可以这样称呼它：

```
Conversion::convert(unit1, unit2, sUnit1, sUnit2); 
```

或者它是一个成员函数，在这种情况下，您需要在以下实例上调用它`Conversion`：

```
Conversion c;
c.convert(unit1, unit2, sUnit1, sUnit2); 
```

请注意，与 Java 不同，在 C++ 中您可以拥有“免费”函数，即您不必将它们放在类中。这些情况下的常见做法是将函数放在命名空间中：

```
namespace Conversions
{
   void convert(double d1, double d2, std::string s1, std::string s2) { ... }
} 
```

然后，您可以类似于静态方法案例来调用它：

```
Conversions::convert(unit1, unit2, sUnit1, sUnit2); 
```

另请注意，除非您要复制`std::strings`要传递给函数的 ，否则最好通过 const 引用传递以避免不必要的复制：

```
void convert(double d1, double d2, const std::string& s1, const std::string& s2); 
```

这同样适用于双打，您可以通过 const 引用传递它们，但考虑到可能复制双打的成本，这几乎不值得。

最后，[`main`](http://en.wikipedia.org/wiki/Main_function)是 C++ 和 C 中一个非常特殊的函数的名称，所以你应该避免使用它作为类名。它不是关键字，但它可能会令人困惑。

# restkit - RestKit：在不使用响应描述符的情况下设置预期状态代码

> ID：15028335
> 
> 赞同：0
> 
> 时间：2013-02-22T16:06:59.313
> 
> 标签：restkit

我需要 PUT/POST 数据到服务。成功后，服务器返回 201/Created（无正文）。这些参数（必然）是一个 NSDictionary，因此不需要任何一方的对象绑定。RKObjectManager.requestWithObject 可以正常工作，但会引发一个错误，它预期为 204 而不是 201。据我所知，更改预期状态代码的唯一位置是在匹配的 RKResponseDescriptor 中。对于没有正文的响应，RKResponseDescriptors 似乎有点过头了，我不确定如何构建一个没有正文的响应。我如何告诉 RestKit 这个 POST 可以使用 201？

**更新** 我最终放弃了尝试不涉及任何类型绑定的请求（即，发布字典并接收 201 响应），而只是下降到 NSURLConnection 的东西 - 这还不错）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:09:20.077

在您的 RKObjectRequestOperation 上：

```
operation.HTTPRequestOperation.acceptableStatusCodes = [NSIndexSet indexSetWithIndex:201]; 
```

# java - API 服务每隔一个请求就工作一次

> ID：15028337
> 
> 赞同：1
> 
> 时间：2013-02-22T16:07:04.333
> 
> 标签：java, android, mysql, hibernate

我对 jax-rs REST 服务有疑问。

服务无法正常运行。每秒请求服务都会抛出异常：

```
HTTP Status 500 - could not execute query

type Exception report

message could not execute query

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.hibernate.exception.JDBCConnectionException: could not execute query
    org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    org.hibernate.loader.Loader.doList(Loader.java:2147)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2028)
    org.hibernate.loader.Loader.list(Loader.java:2023)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:95)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    com.fit.utilities.BaseDAO.getAll_fetchEager(BaseDAO.java:62)
    com.fit.utilities.BaseDAO.getAll(BaseDAO.java:37)
    com.fit.servis.Korisnik_servis.PronadjiPrijatelje(Korisnik_servis.java:174)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed by the driver.
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    java.lang.reflect.Constructor.newInstance(Unknown Source)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    com.mysql.jdbc.Util.getInstance(Util.java:384)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1015)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
    com.mysql.jdbc.ConnectionImpl.throwConnectionClosedException(ConnectionImpl.java:1204)
    com.mysql.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:1191)
    com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4276)
    com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4242)
    org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:497)
    org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:415)
    org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
    org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1560)
    org.hibernate.loader.Loader.doQuery(Loader.java:661)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
    org.hibernate.loader.Loader.doList(Loader.java:2144)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2028)
    org.hibernate.loader.Loader.list(Loader.java:2023)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:95)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    com.fit.utilities.BaseDAO.getAll_fetchEager(BaseDAO.java:62)
    com.fit.utilities.BaseDAO.getAll(BaseDAO.java:37)
    com.fit.servis.Korisnik_servis.PronadjiPrijatelje(Korisnik_servis.java:174)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 22.477.953 milliseconds ago.  The last packet sent successfully to the server was 22.478.000 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    java.lang.reflect.Constructor.newInstance(Unknown Source)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1122)
    com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3317)
    com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1941)
    com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2114)
    com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2696)
    com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2105)
    com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2264)
    org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    org.hibernate.loader.Loader.getResultSet(Loader.java:1668)
    org.hibernate.loader.Loader.doQuery(Loader.java:662)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
    org.hibernate.loader.Loader.doList(Loader.java:2144)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2028)
    org.hibernate.loader.Loader.list(Loader.java:2023)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:95)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    com.fit.utilities.BaseDAO.getAll_fetchEager(BaseDAO.java:62)
    com.fit.utilities.BaseDAO.getAll(BaseDAO.java:37)
    com.fit.servis.Korisnik_servis.Login(Korisnik_servis.java:32)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.net.SocketException: Software caused connection abort: socket write error
    java.net.SocketOutputStream.socketWrite0(Native Method)
    java.net.SocketOutputStream.socketWrite(Unknown Source)
    java.net.SocketOutputStream.write(Unknown Source)
    java.io.BufferedOutputStream.flushBuffer(Unknown Source)
    java.io.BufferedOutputStream.flush(Unknown Source)
    com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3298)
    com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1941)
    com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2114)
    com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2696)
    com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2105)
    com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2264)
    org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    org.hibernate.loader.Loader.getResultSet(Loader.java:1668)
    org.hibernate.loader.Loader.doQuery(Loader.java:662)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
    org.hibernate.loader.Loader.doList(Loader.java:2144)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2028)
    org.hibernate.loader.Loader.list(Loader.java:2023)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:95)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    com.fit.utilities.BaseDAO.getAll_fetchEager(BaseDAO.java:62)
    com.fit.utilities.BaseDAO.getAll(BaseDAO.java:37)
    com.fit.servis.Korisnik_servis.Login(Korisnik_servis.java:32)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.32 logs.

Apache Tomcat/7.0.32 
```

服务检索 JSON ..我认为问题是由于大小字节字符串。

**成功响应示例：**

```
[{
    "id": 2,
    "name": "haris",
    "surname": null,
    "gender": null,
    "age": null,
    "birthdate": null,
    "password": "1234",
    "username": "haris",
    "isOnline": null,
    "picture": "YORp0a9HAkEbrPYu2RcNwB4ExIMdvoD5/3uBgoz1"
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:10:15.230

问题出在您的 mysql 数据源配置中。尝试将这两个参数添加到数据源定义中：

```
 testOnBorrow="true" validationQuery="select 1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:11:20.400

我想这是服务器端的问题。它清楚地显示您的类**BaseDAO**在此方法中执行方法**getAll_fetchEager**您正在进行一些标准查询，但由于某种原因而失败。我相信如果您更正您的标准查询问题将会解决。尝试找出连接属性已正确设置并且您能够连接数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:13:08.183

我认为答案在堆栈跟踪中。

> 从服务器成功接收到的最后一个数据包是 22.477.953 毫秒前。最后一个成功发送到服务器的数据包是 22.478.000 毫秒前。比服务器配置的“wait_timeout”值长。您应该考虑在应用程序中使用之前使连接有效性过期和/或测试，增加客户端超时的服务器配置值，或使用连接器/J 连接属性“autoReconnect=true”来避免此问题。

与您的连接`mysql`没有保持打开状态，也没有设置为自动重新连接。

# joomla - Joomla/Jomsocial 中有趣角色的奇怪问题

> ID：15028339
> 
> 赞同：0
> 
> 时间：2013-02-22T16:07:05.443
> 
> 标签：joomla, character, jomsocial

我希望有人可以帮助我解决这个问题。几个月来（自去年 8 月以来），我的网站一直存在一个问题，奇怪的字符出现在各处 - 特别是在用户生成的内容中。

我已经搜索并搜索了答案，但似乎没有任何效果，尽管最紧迫的（在博客组件中）已通过设置 JCE 来验证 HTML 得到解决——这在博客组件（[EasyBlog](http://extensions.joomla.org/extensions/authoring-a-content/blog/12630)）中很好，但在任何地方都没有其他（它不那么重要但仍然是一个问题）。

这是我到目前为止所做的：

1.  从多台机器、多个浏览器检查该站点 - 没有区别。
2.  检查了 MySQL 数据库和表排序规则——它们是`utf8_general_ci`
3.  将 .php添加`AddDefaultCharset UTF-8`到.htaccess 文件中。`AddCharset UTF-8`我玩了很多年，这两个似乎是唯一没有使网站崩溃的组合。
4.  已检查 HTML 标头，它们肯定具有正确的内容编码类型（设置为`UTF-8`）
5.  我尝试了不同的 WSIWIG 编辑器无济于事。此外，通常在代码输出中出现字符 - 通常是 A 旁边的 »

我尝试了一种黑客来强制连接脚本，`UTF-8`但这会导致网站崩溃。

如果有人对我还能做什么有任何想法......我全神贯注（请）

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:40:03.257

如果您的服务器运行的是 PHP 5.4+，我建议您尝试[JCE 论坛中描述的以下解决方案](http://www.joomlacontenteditor.net/forum/jce-editor/haunted-by-a-weird-character-a/layout/default)：

> 在编辑器全局配置中，将“ `Entity Encoding`”设置为“ `UTF-8`”
> 
> 在“自定义配置变量”字段中，添加：
> 
> `keep_nbsp:0`

请留意将解决此问题的 JCE 2.3.2 版本。

注意事项：

1.  任何出现虚假 â 或 Â 的地方都必须进行编辑以删除字符（一旦将上述更改应用于 JCE）。
2.  问题是Joomla！2.5.x 的使用[`get_html_translation_table()`](http://php.net/manual/en/function.get-html-translation-table.php)依赖于默认值，PHP 5.4 将默认`encoding`参数更改为`UTF-8`. 以前它默认为`ISO-8859-1`

3.  对于您可以尝试修改的核心`_decode()`，`/libraries/joomla/filter/input.php`请查找以下行（*大约 644*）：

    `$trans_tbl = get_html_translation_table(HTML_ENTITIES);`

并将其更改为：

```
$trans_tbl = get_html_translation_table(HTML_ENTITIES, ENT_COMPAT, 'ISO-8859-1'); 
```

# python - 用于 CGH 分析的 python 模块

> ID：15028340
> 
> 赞同：0
> 
> 时间：2013-02-22T16:07:12.510
> 
> 标签：python, bioinformatics

我正在寻找用于生物信息学 CGH 分析的 python 模块。我找到了一些工具，但它们是基于网络的，我没有在 python 中找到任何处理 CGH 分析的模块也处理所有图表。
我想要python中的命令行模块。

如果有人知道同样的事情，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:15:54.610

我怀疑你会找到一个。如果您正在做阵列工作并且想通过命令行驱动它，请学习一些 R 并选择众多软件包中的一个进行 CGH 分析。我敢肯定有一些 python/R 绑定可以帮助你。

[http://www.bioconductor.org/packages/2.12/bioc/html/CGHcall.html](http://www.bioconductor.org/packages/2.12/bioc/html/CGHcall.html)

[http://www.bioconductor.org/packages/2.11/bioc/html/CGHnormaliter.html](http://www.bioconductor.org/packages/2.11/bioc/html/CGHnormaliter.html)

[http://www.hindawi.com/journals/cfg/2009/201325/](http://www.hindawi.com/journals/cfg/2009/201325/)

# objective-c - 加载 NSArray 作为 NSString 保存到文件，因为我有 NSNull 值

> ID：15028344
> 
> 赞同：1
> 
> 时间：2013-02-22T16:07:33.007
> 
> 标签：objective-c, nsarray

所以我有一个 NSMutableArray 需要保存到文件的对象。用方法保存它`writeToFile`不起作用，因为我有 NSNull 值，这些值在此方法生成的 .plist 格式中是不允许的。

所以我通过将文件保存为 NSString 来将文件保存到磁盘：

```
NSString *content = [NSString stringWithFormat:@"%@",orders];
[content writeToFile:ordersFilePath atomically:NO]; 
```

这会生成一个像这样的文件：

```
(
        {
        ZBILLINGADDRESS1 = "";
        ZBILLINGADDRESS2 = "";
        ZBILLINGCITY = "";
        ZBILLINGCOUNTRY = "";
        ZBILLINGSTATE = "";
        ZBILLINGZIP = "";
        ZCANCELDATE = "<null>";
        ZCATALOGCODE = "";
        ZCATALOGNAME = "";
        ZCONTACTEMAIL = "";
        ZCONTACTFAX = "";
        ZCONTACTNAME = " ";
        ZCONTACTPHONE = "";
        ZCONTAINERCUBES = 0;
        ZCONTAINERNAME = "";
        ZCURRENCYCODE = "<null>";
        ZCUSTOMERID = 0;
        ZCUSTOMERNAME = "Dupe offline Test";
        ZCUSTOMERNUMBER = 1297145;
        ZDISCOUNT = 0;
        ZDONOTSHIPBEFORE = "<null>";
        ZEXPORTDATE = "-63113886238";
        ZEXPORTED = 1;
        ZFOB = "";
        ZFREIGHTTERM = "";
        ZISCONTAINER = 0;
        ZISDEFAULT = 0;
        ZISDELETED = 0;
        ZISPLACED = 0;
        ZMANUFACTURERID = 18;
        ZMARKETNAME = "";
        ZNOTES = "last second note";
        ZORDERDATE = 372571200;
        ZORDERGUID = "5650d30a-9316-436a-87e9-1e0ead3af8d7";
        ZORDERID = 84340;
        ZORDERSTATUS = Accept;
        ZORDERTOTAL = 200;
        ZORDERTYPE = "";
        ZORIGIN = "";
        ZPONUMBER = 3;
        ZPRICELEVEL = 2;
        ZREPNUMBER = 1;
        ZSALESREPID = 235;
        ZSHIPDATE = 373176000;
        ZSHIPPINGTOTAL = 0;
        ZSHIPTOADDRESS1 = "";
        ZSHIPTOADDRESS2 = "";
        ZSHIPTOCITY = "";
        ZSHIPTOCOMPANYNAME = "";
        ZSHIPTOCONTACTEMAIL = "";
        ZSHIPTOCONTACTNAME = "";
        ZSHIPTOCONTACTPHONE = "";
        ZSHIPTOCOUNTRY = "";
        ZSHIPTOFAX = "";
        ZSHIPTOSTATE = "";
        ZSHIPTOZIP = "";
        ZSHIPVIA = "";
        ZSOURCE = ipad;
        ZSUBTOTAL = 200;
        ZTAXRATE = 0;
        ZTAXTOTAL = 0;
        ZTERMS = "";
        ZWRITTENBYNAME = "";
        ZWRITTENFORNAME = "";
        ZWRITTENFORREPNUMBER = "";
        ZWRITTENFORREPNUMBER1 = "<null>";
        "Z_ENT" = 17;
        "Z_OPT" = 5;
        "Z_PK" = 450;
    }
) 
```

问题是当我尝试将其重新加载为 NSArray 时，我得到一个空值：

```
NSString *str = [NSString stringWithContentsOfFile:ordersFilePath encoding:NSUTF8StringEncoding error:NULL];
    NSArray *loadedOrders = [[NSArray alloc] initWithContentsOfFile:str]; 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:54:57.547

```
NSArray *loadedOrders = [[NSArray alloc] initWithContentsOfFile:str]; 
```

initWithContentsOfFile 将路径作为字符串。在您的情况下，它不是路径而是内容本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:20:38.417

我看到的是您的字符串实际上是`CoreData's` `NSManagedObject`（订单数组）的描述。因此，您可以将字符串保存到文件中，但不能从该文件重新创建相同的对象。这只是`-description`你的方法的结果`NSManagedObject`。如果这是您想要实现的，您必须实现保存对象数据的自定义逻辑（否则，不是您的`CoreData's`持久存储，以及将加载该数据的逻辑，通过将其插入 a `NSManagedObjectContext`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:06:48.987

`[NSString stringWithFormat:@"%@",orders]`只是给你调用 [orders description] 的结果，这只是为了调试而不是存档。

您可以只调用 writeToFile:atomically: 在您的`orders`数组上，然后将`[[NSArray alloc] initWithContentsOfFile:filePath]`其读回，有一个警告：

> 如果数组的内容都是属性列表对象（NSString, NSData, NSArray, 或 NSDictionary 对象），这个方法写入的文件可以通过类方法arrayWithContentsOfFile: 或者实例方法initWithContentsOfFile: 来初始化一个新数组。此方法在写出文件之前递归地验证所有包含的对象都是属性列表对象，如果所有对象都不是属性列表对象，则返回 NO，因为结果文件不是有效的属性列表。

所以数组中的对象都必须是 NSString、NSData、NSArray 或 NSDictionary 类才能正常工作。

# php - 将 NULL 传递给旨在在 PHP 中构建 MySQL 查询的函数

> ID：15028345
> 
> 赞同：0
> 
> 时间：2013-02-22T16:07:37.177
> 
> 标签：php, mysql

语言：PHP 和 MySQL

我在数据库中有一些行具有值为 NULL 的列。我有一个函数可以在收到 $params 数组时构建查询。这是该函数中的相关代码（用于构建 WHERE 子句）：

```
 if (isset($params['where'])) {
        $query .= "WHERE ";
        $count = count($params['where']);
        foreach ($params['where'] as $key => $value) {
            $count--;
            if ($count) {
                $query .= "`$key` ".$value['sign']." '".$value['text']."' AND ";
            } else {
               $query .= "`$key` ".$value['sign']." '".$value['text']."' ";
            }
        }
    } 
```

问题是当我将 $value['text'] 设置为 null 时，结果如下：

```
SELECT * FROM `db_profiles` WHERE `committed` IS '' LIMIT 100 
```

如果我将它设置为 $value['text'] = 'NULL'，那么我会得到以下信息：

```
SELECT * FROM `db_profiles` WHERE `committed` IS 'NULL' LIMIT 100 
```

这当然不会产生任何结果。有任何想法吗？

# 回答

```
 if (isset($params['where'])) {
        $where_segment = array ();
        foreach ($params['where'] as $key => $value) {
            if (is_null($value['text'])) {
                $where_segment[] = "`".$key."`"." IS NULL";
            } else {
                $where_segment[] = "`$key` ".$value['sign']." '".$value['text']."' ";
            }
        }
        $query .= " WHERE ".implode('AND', $where_segment);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:11:17.937

```
 $string_array = array();

    foreach($params['where'] as $field => $value) {

        if(is_null($value)) {
            $string_array[] = "`$field` IS NULL";
        }
        else {
            $string_array[] = "`$field`='$value'";
        }

    }

 $where_string = "WHERE ".implode(" AND ", $string_array);

 $sql = "SELECT * FROM `db_profiles` $where_string"; 
```

请注意，如果 $value 为 NULL，我会省略 NULL 短语周围的 '' 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:10:57.250

请使用此查询。

SELECT * FROM `db_profiles`WHERE `committed`IS NULL LIMIT 100。

删除单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:11:05.593

这应该可以帮助你没有单引号

```
 SELECT * FROM `db_profiles` WHERE `committed` IS NULL LIMIT 100 
```

你可以将你的变量设置为 null

```
 $value['text'] = NULL; 
```

然后在您的查询中

```
 SELECT * FROM `db_profiles` WHERE `committed` IS $value['text'] LIMIT 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:11:22.500

将值填充到查询中时，您需要明确检查以下内容：

```
if(is_null($value)) {
    $query . ' WHERE something IS NULL';
} else {
    $query . ' WHERE something \'' . $value . '\'';
} 
```

请注意，当您不熟悉 MySQL 和 PHP 时，您应该尽快开始使用准备好的语句。它们对 SQL 注入漏洞最安全且易于使用。您可以从[这里](http://php.net/manual/de/pdo.prepared-statements.php)开始学习使用它们。

# java - HTTP 请求中缺少元素 - Null 还是 Empty？

> ID：15028349
> 
> 赞同：6
> 
> 时间：2013-02-22T16:08:00.763
> 
> 标签：java, servlets, jax-rs

我有一个 HTTP 请求`javax.servlet.http.HttpServletRequest`，它传入一个值，该值将在使用 JAX-RS 的 Java Web 服务中处理的某些代码中使用。Java 中的 POST 函数正在消耗`application/json`. 有两个可能的值被传递到请求中，调用一个`X`和另一个`Y`，假设两者都是字符串。该请求需要两个可能值中的**至少**一个被视为“有效”。

当请求进入时，如果`X`提供并`Y`完全被排除在请求之外，那么检查是否`Y`存在的正确方法是什么？你会检查是否`Y.isEmpty()`或`Y == null`？提供`X`并不能保证`Y`存在，反之亦然。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T16:15:59.260

如果根本没有像这样指定参数，

```
http://example.com/context/servlet?x=foo 
```

然后它将返回`null`：

```
String x = request.getParameter("x"); // "foo"
String y = request.getParameter("y"); // null 
```

如果指定了一个参数，但没有这样的值，

```
http://example.com/context/servlet?x=foo&y 
```

然后它将返回一个空字符串：

```
String x = request.getParameter("x"); // "foo"
String y = request.getParameter("y"); // "" 
```

有道理，对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:13:36.870

测试请求中是否存在参数

```
httpServletRequest.getParameter( "Y" ) == null 
```

以下代码测试参数的值（如果存在）

```
if ( httpServletRequest.getParameter( "Y" ) != null )
{
    String value = httpServletRequest.getParameter( "Y" );

    // Put your test code here.  Include a empty value check
} 
```

# javascript - jQuery 添加/删除类

> ID：15028351
> 
> 赞同：3
> 
> 时间：2013-02-22T16:08:04.187
> 
> 标签：javascript, jquery, addclass

我有一个两难境地。我刚刚学习了如何在 jQuery 中使用添加和删除类函数，但是当你添加一个类时，它不会自动删除现有的类。我的问题是这个。我有一个按钮，上面有一个包含背景颜色的类。当我悬停该按钮时，我希望 NEW 类优先于旧类，所以本质上，我必须删除旧类。我只是不知道从哪里开始。如果我尝试删除、添加、删除、添加，悬停似乎无法在一次调用中全部处理。有人可以给我一些想法吗？

我有两个类，一个叫做'.ul.nav a'，另一个是'.work。

```
$('ul.nav a').hover(
  function () {     
    $(this).addClass('work');
  },
  function () {
    $(this).removeClass('work');
  }
); 
```

这是当前的课程：

```
ul.nav a {
  display: block;
  background-color:#B2B2D9;
  margin-right:2%;
  margin-bottom:5%;
  margin-left:1%;
  text-decoration:none;
  border:3px #e6e6e6 ridge;
  padding: 2%;
  border-radius: 15px;
} 
```

我想改成

```
.work {
  color:white;
  background-color:red;
  position:absolute;
  top:100px;
  left 230px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:14:21.160

更改您的 CSS`.work`以`ul.nav a.work`使其[更具体](http://css-tricks.com/specifics-on-css-specificity/)。然后它将覆盖旧样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:14:36.233

我会重新考虑您使用 CSS ':hover' 选择器而不是 JS 的方法。就像是

```
ul.nav a {
    background-color: blue;
}
ul.nav a:hover {
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:13:56.867

这是您的[CSS 优先级](http://css-tricks.com/specifics-on-css-specificity/)的问题。将您的 CSS 更改为：

```
ul.nav a.work {
    color:white;
    background-color:red;
    position:absolute;
    top:100px;
    left 230px;
} 
```

或者，这只是为了悬停，您可以删除您的 javascript 并将您的 CSS 更改为：

```
ul.nav a:hover {
    color:white;
    background-color:red;
    position:absolute;
    top:100px;
    left 230px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T16:14:27.523

正如@Blazemonger 在他的评论中暗示的那样，特异性和 CSS 级联正在阻止`.work`该类生效：更改`.work`CSS 中的选择器`ul.nav a.work`以确保它优先。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T16:16:56.930

最佳实践：尽可能让 CSS 处理您的样式。而不是`.work`使用这个：

```
ul.nav a:hover {
    color: white;
    background-color: red;
    position: absolute;
    top: 100px;
    left: 230px;
} 
```

并且不需要javascript代码。

# ruby - ruby 方法不会返回 false

> ID：15028355
> 
> 赞同：0
> 
> 时间：2013-02-22T16:08:23.220
> 
> 标签：ruby, return

我有一个方法，它返回一个数组（如果它包含任何元素），如果它是 nil，则返回 false：

```
def check_for_four
    @four = []
    check_values.each do |key, value|  ###check_values return hash with key and values as numbers
        @four << key if value == 4
    end

    if @four == nil
        return false
    else
        return @four
    end     
end 
```

但后来，如果我调用一个方法

```
if some_object.check_for_four
    puts "true"
else
    puts "false"
end 
```

它总是返回 true，即使 @four 数组为空。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:12:08.650

您正在检查数组是否为 nil（即 的单例实例`NilClass`），这与检查数组是否为空非常不同。

要检查数组在哪里是空的，你可以调用`empty?`或者如果你真的想检查它是否不为空，你也可以使用`any?`.

你当然也可以做一些事情，比如检查长度/大小是否为零，但对我来说，询问你感兴趣的具体东西感觉更红。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:11:38.697

在 Ruby 中，空数组是“真实的”。例如：

```
puts "foo" if [] 
```

将输出“foo”但是

```
puts "foo" if nil 
```

不会输出任何东西。

# javascript - 调整 joomla 移动页面上所有图像的大小

> ID：15028356
> 
> 赞同：0
> 
> 时间：2013-02-22T16:08:25.597
> 
> 标签：javascript, resize, image, getelementsbytagname

如果移动，我正在尝试使所有图像宽度为 50%。检查现在是否是移动设备不是问题。

我试过了：

```
document.getElementsByTagName('img').style.width="50%"; 
```

它不工作。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:12:14.887

```
document.getElementsByTagName('img') 
```

将返回一个 NodeList，而不是单个元素。

为了使您的代码正常工作，您需要首先将该 NodeList 分配给一个变量，然后循环遍历并将您的更改分别应用于每个变量：

```
var imgs = document.getElementsByTagName('img');

for(var i = 0, l = imgs.length; i < l; ++i){
  imgs[i].style.width = '50%';
} 
```

# batch-file - 批量删除路径中带有通配符的文件夹中的所有文件

> ID：15028358
> 
> 赞同：1
> 
> 时间：2013-02-22T16:08:29.607
> 
> 标签：batch-file, wildcard, delete-file

所以我要做的是进入以下目录中的每个文件夹

```
"C:\Documents and Settings\" 
```

对于其中的每个文件夹，无论名称如何，检查此路径是否存在

```
"C:\Documents and Settings\*\Local Settings\Application Data\CSMRpt\" 
```

如果存在，则删除该目录中的所有 txt 文件，如果路径不存在，则不执行任何操作并转到“C:\Documents and Settings\”中的下一个文件夹

到目前为止，这是我想出的：

```
set PATH = "\Local Settings\Application Data\CSMRpt\"
set FILETYPE = "*.txt"
for /d %%g in ("C:\Documents and Settings\*") do if exist %%g%PATH% goto pathexists
:pathexists
del %%g%PATH%%FILETYPE% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:05:06.350

试试这个。

```
@echo off
setlocal
set cwd=%CD%
set p=Local Settings\Application Data\CSMRpt
cd /d "c:\Documents and Settings\"
for /d %%I in (*) do (
    if exist "%%I\%p%\" (
        pushd "%%I\%p%\"
        del /q *.txt
        popd
    )
)
:: (change back to original directory)
cd /d "%cwd%" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:28:57.520

这里有一些错误，您不能`=`在 set 命令中使用空格，使用`goto`不会传递变量（但是您可以使用 call 并将其作为参数传递）您不需要在每个变量周围加上引号，`%PATH%`虽然你可以重置它，但你不应该这样做，因为它是一个环境变量。

更正的代码：

```
set THEPATH=\Local Settings\Application Data\CSMRpt\
set FILETYPE=*.txt
for /d %%g in ("C:\Documents and Settings\*") do if exist "%%g%THEPATH%." del "%%g%THEPATH%%FILETYPE%" 
```

如果您*真的*不希望`for`循环成为一行，您也可以这样做

```
set THEPATH=\Local Settings\Application Data\CSMRpt\
set FILETYPE=*.txt
for /d %%g in ("C:\Documents and Settings\*") do if exist "%%g%THEPATH%." call :deltxtfiles "%%~g"

exit /B

:deltxtfiles
del "%~1%THEPATH%%FILETYPE%"
goto:eof 
```

# python - 展开链接到 bit.ly 的 t.co 链接

> ID：15028360
> 
> 赞同：0
> 
> 时间：2013-02-22T16:08:32.833
> 
> 标签：python, twitter, python-3.x

我正在尝试获取已经被 bit.ly 和 twitter 缩短的 URL。我已经尝试过：

```
import urllib.request
r = urllib.request.urlopen(url)
r.url 
```

也可以使用[requests](http://docs.python-requests.org/en/latest/)和[httplib2](http://code.google.com/p/httplib2/)等库。

如果我想要 t.co 链接的最终目的地，所有这些解决方案都可以工作，但是，我确实需要中间缩短器，现在我可以通过 HEAD 请求获得它，但我无法让 Python 3 http.client 在其中工作为了获得位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:15:58.237

```
>>> c = http.client.HTTPConnection('t.co')
>>> c.request('GET', '/7fGoazTYpc')          # or HEAD, but body is empty anyway
>>> r = c.getresponse()
>>> r.getheader('Location')
'http://bit.ly/900913' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:14:17.010

`requests`自动跟随重定向，但它允许您通过`history`属性访问所有 URL。

```
>>> r = requests.get('http://bit.ly/UG4ECS')
>>> r.url
u'http://www.fontsquirrel.com/fonts/exo'
>>> r.history
(<Response [301]>,)
>>> r.history[0].url
u'http://bit.ly/UG4ECS'
>>> 
```

# jquery - 如果图像是 li 元素的背景图像，如何执行点击？

> ID：15028365
> 
> 赞同：0
> 
> 时间：2013-02-22T16:08:45.477
> 
> 标签：jquery, html

我有这样的html：

```
<li id="lielement">
<span>Descriptions</span>
</li> 
```

和这样的CSS：

```
#divBtnList li {
    background-color: #BEBDBE;
    background-image: url("../Images/RemoveButton.ico");
    background-position: 100% 25%;
    background-repeat: no-repeat;
    border: medium none;
    border-radius: 5px 5px 5px 5px;
    box-shadow: 2px 2px 3px #000000;
    color: #7F7F7F;
    cursor: pointer;
    font-family: 'Helvetica Neue',HelveticaNeue,Helvetica,Arial,sans-serif;
    font-size: 1.2em;
    line-height: 25px;
    margin: 3px;
    padding-left: 2px;
    text-align: left;
    text-shadow: 0 1px 1px;
} 
```

我遇到了一个问题，我需要单击`Removebutton`并单击`Descriptions` 如何编写 jquery 事件？

html 在这里：http: [//jsfiddle.net/BLYg3/](http://jsfiddle.net/BLYg3/)

```
1 - i want to click  event for Descriptions
2-  i want to click event for background image 
```

请问你能帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:13:48.443

首先，假设您使用的是最新的 jQuery，您不应该`live`使用`on`. `live`现在从 1.7 开始已弃用，您需要从 jQuery 中包含一个优雅的更新文件才能从 1.9 开始使用此功能。

```
 $("#someelement").on("click", 'li', function (e) { 
```

一旦您提供了有关标记的更多信息，我将编辑我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:15:52.333

为了可读性和可维护性，为正确的目标使用正确的元素，在这种情况下，您应该使用 <a> 元素或 <button> 元素。

此外，不推荐使用 live，请使用

```
// Feel free to replace document with a "closer" parent selector
$(document).on("click", ".ClassName span", function (e) {
  // ...
}); 
```

最后，只要您的事件处理程序都没有“return false”或“stopPropagation”，那么事件应该冒泡并且两个处理程序都应该被触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:02:39.783

你想要的一个例子：

```
 $(document).ready(function(){
        $("#description").click(function(){
            alert("Description Clicked");
        });

        $("#remove").click(function(){
            alert("Remove Button Clicked");
        });
    });

<a href="#" id="description">Description</a>
<a href="#" id="remove">Remove</a> 
```

[http://jsfiddle.net/kwgtf/](http://jsfiddle.net/kwgtf/)

# java - 使用 c:import 将 Spring MVC 视图加载到 div 中

> ID：15028379
> 
> 赞同：1
> 
> 时间：2013-02-22T16:09:09.903
> 
> 标签：java, jakarta-ee, spring-mvc

我正在尝试将一个页面嵌入另一个页面，`<c:import>`但遇到了困难。

如果我使用`<c:import url="http://www.google.com" />`的东西很好。

我正在尝试加载本地路线：

`@RequestMapping(value="/modules/some_module/{customerId}/bill", method=RequestMethod.GET)`

使用：

`<c:import url="/modules/some_module/SOME_CUSTOMER_ID/bill" />`

我什么也没得到。`jsp`使用相对路径加载简单文件没有任何问题。

我怀疑，您不能使用相对路径加载路由吗？在这种情况下，是否有一种简单的方法来检索和附加协议/域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:40:02.520

如果您的实际要求是动态获取 webapp 上下文，您能否尝试一下：

```
<c:import url="${pageContext.request.contextPath}/modules/some_module/SOME_CUSTOMER_ID/bill" /> 
```

# java - 泽西 request.getInputStream()

> ID：15028386
> 
> 赞同：1
> 
> 时间：2013-02-22T16:09:23.570
> 
> 标签：java, servlets, jersey

```
@POST
@Path("/getphotos")
@Produces(MediaType.TEXT_HTML)
public String getPhotos() throws IOException{
    BufferedReader rd = new BufferedReader(new InputStreamReader(request.getInputStream(),"UTF-8"));
    String line;
    while ((line = rd.readLine()) != null) {
        System.out.println(line);
    }
    return "ok";        
} 
```

上面的代码适用于我的服务器。但是在这段代码中，字符串“行”没有任何价值。（总是）代码有什么问题吗？

* * *

客户端代码

```
 String message = "message";
    URL url = new URL(targetURL);
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

    urlConnection.setDoInput(true);
    urlConnection.setDoOutput(true);
    OutputStreamWriter wr = new OutputStreamWriter(urlConnection.getOutputStream());
    wr.write(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:56:54.940

您***可以***在 Jersey 中手动使用请求的数据，只要您对实际的`HttpServletRequest`. 顺便提一下，请记住，您只能使用***一次***请求正文：

```
@Context
private HttpServletRequest request;

@POST
@Path("/")
public Response consumeRequest() {
    try {
        final BufferedReader rd = new BufferedReader(new InputStreamReader(
                request.getInputStream(), "UTF-8"));

        String line = null;
        final StringBuffer buffer = new StringBuffer(2048);

        while ((line = rd.readLine()) != null) {
            buffer.append(line);
        }
        final String data = buffer.toString();
        return Response.ok().entity(data).build();
    } catch (final Exception e) {
        return Response.status(Status.BAD_REQUEST)
                .entity("No data supplied").build();
    }
} 
```

*旁注：像 Apache Commons IO 这样的库为读取 IO 数据提供了强大的功能*

# r - 基于定时器的 Emacs 自动化功能：用户干扰

> ID：15028387
> 
> 赞同：3
> 
> 时间：2013-02-22T16:09:24.727
> 
> 标签：r, emacs, elisp, gnus

我正在为 Emacs 寻找一种通用的方法来做一些检查，以及 (bing) 当某事是真或假时。

我目前有2个例子。有一个拍卖网站，我认为 Emacs 最好检查一下是否有更新。我使用`R`（Emacs-ESS）来加载网站的源代码。然后我在 Emacs 中使用自制函数来：

切换缓冲区，重新加载 URL 信息，将信息发送到屏幕，`(sleep-for )`稍等片刻。搜索“今天”。然后它必须检查这个字符串后面的值，如果它高于 0，那么这意味着我有一些新的感兴趣的东西，它 PINGS。

这是一个很长的介绍，但我真的很喜欢它。

我现在对 做同样的事情`Gnus`，我有一个计时器，它运行一个每 10 秒打开一次 Gnus 的函数，搜索“收件箱”，检查值，如果它高于 0，那么它会通知我（否则它只是切换缓冲区背部）。唯一的问题是这大约需要 0.5 秒，您可以在其中看到点移动到另一个缓冲区并切换回来。

有没有一种通用的方法来完成这些自动化的事情，而不会打扰用户？

**编辑：** Emacs 执行检查以查看 Stackoverflow 上是否有带有我们最喜欢的标签的新帖子不是很好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:01:56.263

Emacs 是单线程的，所以我们被搞砸了——根本没有办法做到这一点而不打扰用户。

诀窍是在支票的频率和成本之间选择一个很好的平衡点，以便用户可以承受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:46:49.653

这是我曾经使用过的代码：

```
(defvar sds-new-mail-line nil "cache")
(defun sds-new-mail-line (&optional arg)
  "add or remove the mode-line new-mail marker"
  (or sds-new-mail-line (error "sds-new-mail-line has not been initialized"))
  (let* ((mlf (default-value 'mode-line-format))
         (already-have (eq sds-new-mail-line (car mlf))))
    (if (or (eq arg nil) (< arg 0))
        (when already-have
          (setq-default mode-line-format (cdr mlf)))
        (unless already-have
          (setq-default mode-line-format (cons sds-new-mail-line mlf))))))
(defun sds-gnus-scan-mail ()
  "check for new mail, notify if there is some"
  (when (gnus-alive-p)
    (with-current-buffer gnus-group-buffer
      (gnus-group-get-new-news 3)
      (gnus-group-get-new-news 2)
      (goto-char (point-min))
      ;; look for new messages in groups of level 1 and 2
      (cond ((search-forward-regexp "^ *s[12] *[1-9][0-9]*n" nil t)
             (message "you have new mail! (%s)" (user-time-format))
             (sds-new-mail-line 1)
             (ding))
            (t (sds-new-mail-line -1)
               (message "no new mail (%s)" (user-time-format))))
      (goto-char (point-min)))))

(defun sds-gnus-load-hook ()
  (unless sds-new-mail-line     ; init
    (let ((str "mail") (map (make-sparse-keymap)))
      (define-key map [mode-line down-mouse-1] 'ignore)
      (define-key map [mode-line mouse-1] read-mail-command)
      (add-text-properties 0 (length str)
                           (list 'display gnus-mode-line-image-cache
                                 'help-echo "you have new mail - read it!"
                                 'local-map map)
                           str)
      (setq sds-new-mail-line str))
    (gnus-demon-add-handler 'sds-gnus-scan-mail 3 t))
  (add-hook 'gnus-summary-prepared-hook 'gnus-summary-first-unread-subject)
  (add-hook 'gnus-summary-prepare-exit-hook 'gnus-summary-catchup))

;; cannot use gnus-load-hook here!
(eval-after-load "gnus-start" '(sds-gnus-load-hook)) 
```

我相信您可以根据自己的需要进行调整。

# r - 返回 r 中每个因子水平的图

> ID：15028392
> 
> 赞同：1
> 
> 时间：2013-02-22T16:09:32.417
> 
> 标签：r, plot, sapply

我想为数据框“轨迹”中的每个单独 ID 生成一个 X、Y 图：

```
**trajectories**

X    Y    ID
2    4     1
1    6     1
2    4     1
1    8     2
3    7     2
1    5     2
1    4     3
1    6     3
7    4     3 
```

我使用代码：

```
sapply(unique(trajectories$ID),(plot(log(abs(trajectories$X)+0.01),log((trajectories$Y)+0.01)))) 
```

但这似乎不起作用，因为错误：

```
Error in match.fun(FUN) : 
c("'(plot(log(abs(trajectories$X)+0.01),log((trajectories$Y)' is not a function,      character or symbol", "'    0.01)))' is not a function, character or symbol") 
```

有没有办法重写这段代码，以便我为每个 ID 获得一个单独的图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:11:53.173

你可以`ggplot2`很好地使用这个包：

```
library(ggplot2)
trajectories <- structure(list(X = c(2L, 1L, 2L, 1L, 3L, 1L, 1L, 1L, 7L), Y = c(4L, 6L, 4L, 8L, 7L, 5L, 4L, 6L, 4L), ID = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L)), .Names = c("X", "Y", "ID"), class = "data.frame", row.names = c(NA, -9L))

ggplot(trajectories, aes(x=log(abs(X) + 0.01), y=log(Y))) + 
  geom_point() + 
  facet_wrap( ~ ID) 
```

对于它的价值，你的鳕鱼失败的原因正是错误所说的。to 的第二个参数必须`sapply`是一个函数。如果您将绘图代码定义为函数：

```
myfun <- function(DF) {
  plot(log(abs(DF$X) + 0.01), log(DF$Y))
} 
```

但这不会将您的数据拆分到`ID`. 您也可以使用`plyr`or`data.table`包来执行此拆分和绘图，但您需要将绘图写入文件，否则它们将在创建每个新绘图时关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:28:54.407

该`lattice`软件包在这里很有用。

```
library(lattice)
# Make the data frame
X <- c(2,1,2,1,3,1,1,1,7) 
Y <- c(4,6,4,8,7,5,4,6,4)   
ID <- c(1,1,1,2,2,2,3,3,3)
trajectories <- data.frame(X=X, Y=Y, ID=ID)

# Plot the graphs as a scatter ploy by ID
xyplot(Y~X | ID,data=trajectories)

# Another useful solution is to treat ID as a factor
# Now, the individual plots are labeled
xyplot(Y~X | factor(ID),data=trajectories) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T14:15:41.303

即使使用基本的R，这也是可能的。使用 iris 数据集：

```
coplot(Sepal.Length ~ Sepal.Width | Species, data = iris) 
```

# wcf - Extending WorkflowServiceHost with custom endpoints

> ID：15028396
> 
> 赞同：1
> 
> 时间：2013-02-22T16:09:50.340
> 
> 标签：wcf, workflow-foundation, workflowservice

Is it possible to extend the **WorkflowServiceHost** with custom endpoints in the same way endpoints are added to the **ServiceHost** class? For instance, an endpoint implementing the interface *ICustomTracking* with *BasicHttpBinding*.

I'm looking for a solution using code, not the config file.

Any idea?

# php - 创建图像时PHP输出html

> ID：15028401
> 
> 赞同：1
> 
> 时间：2013-02-22T16:09:58.753
> 
> 标签：php, html, image, header, output

我正在尝试制作一个生成器来从我的游戏网站输出用户数据，但我从来没有真正研究过 PHP 中到图像的转换，但是我已经设法从本网站上的其他问题中获得了它的基础知识和在其他地方，无论如何我想知道是否可以让我的 PHP 文件生成图像，在其输出中解析 HTML 标签？这是我的脚本：

```
<?php
$username = $_GET['username'];
$guild = $_GET['guild'];
$create = "Username: " . $username . " Guild: " . $guild . "";

$im = imagecreate(300, 30);
$bg = imagecolorallocate($im, 255, 255, 255);
$textcolor = imagecolorallocate($im, 0, 0, 255);

imagestring($im, 5, 0, 0, $create, $textcolor);
header('Content-type: image/png');

imagepng($im);
imagedestroy($im);
?> 
```

在我的 $create 变量中，我希望使用 HTML 标签，但它们不会被解析为 html，它会以纯文本形式输出标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:15:50.637

您的浏览器解析 HTML，而 php 对它不做任何事情。你必须在你的字符串中使用像 \n 这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:23:32.373

抱歉，PHP 无法在将 HTML 呈现在图像上之前对其进行解析。但是，它确实包含更改字体和对文本应用过滤器的各种功能。请参阅[http://php.net/manual/en/ref.image.php](http://php.net/manual/en/ref.image.php)。

是否有特定原因需要将信息作为图像输出？为什么不简单地使用 HTML 输出信息呢？

# javascript - Error "Data provided to an operation does not meet requirements" when adding objects in indexedDB

> ID：15028403
> 
> 赞同：3
> 
> 时间：2013-02-22T16:10:01.527
> 
> 标签：javascript, indexeddb

When i try to add the object to the objectStore with .add, the console shows this error: *DataError: Data provided to an operation does not meet requirements.* If someone can tell where this error came from it will really help me. This is the code:

```
var request = objStore.add({tarea: todo, clase: "pendiente"});

var db;

function create_to_do(){
  var todo = document.querySelector('#the-do').value;
  var transaction = db.transaction("to_do", "readwrite");
  transaction.oncomplete = function(eve){
    console.log("all done¡")
  }

  transaction.onerror= function(eve){
    console.log("something went wrong: "+ eve.target.errorCode);
  }; 

  var objStore = transaction.objectStore("to_do");
  var request = objStore.add({tarea: todo, clase: "pendiente"});
  request.onsuccess = function(eve){
    console.log("all done¡");
    console.log(eve.target.result);
  };
}

function indexDB(){
  var request = indexedDB.open('todos', 1);
    request.onsuccess = function (evt) {     
    db = this.result;
    console.log("Database Opened");
  };

  request.onerror = function (evt){
    console.log("OpenDB error: " + evt.target.errorCode);
  };

  request.onupgradeneeded = function(evt){
    store = evt.currentTarget.result.createObjectStore("to_do", 
              {keyPath: 'id', autoIncrement: true});
    store.createIndex('clase', 'clase', {unique: false});
    console.log("index created");
  };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:39:51.327

尝试`keyPath: 'keyPath'`或`autoIncrement: false`一旦您提供“主键”，您必须将 autoIncrement 设置为 false[在这里查看](http://www.kristofdegrave.be/search?q=autoIncrement)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:57:11.280

您正在尝试保存 DOM 对象。根据其中的内容，您将能够或不能保存数据。尝试将 tarea 属性保留在对象之外并保存。让我知道 tarrea 财产中有什么

```
var todo = document.querySelector('#the-do').value;
var request = objStore.add({tarea: todo, clase: "pendiente"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:36:06.507

这是一个简单的错字。该`createObjectStore()`方法的自动增量选项必须拼写`autoIncrement`（大写 I），而不是`autoincrement`.

发生的情况是您的对象存储是在没有密钥生成器的情况下创建的，因此在添加对象时，它会`id`根据您的密钥路径查找属性。因为该属性不存在，所以您得到`DataError`.

# c# - Layout with Bootstrap to hold calendars?

> ID：15028405
> 
> 赞同：1
> 
> 时间：2013-02-22T16:10:04.783
> 
> 标签：c#, asp.net, twitter-bootstrap

I am using Twitter Bootstrap.

I need to show 12 calendars.

I want it to show 6 per row at most, and if the browser is too small, I want it to just move the excess down.

Is this possible with boostrap?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:32:33.323

我相信您可以通过使用[Grid System 中内置的 Boostraps](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)和它的一些默认 css 类来达到预期的效果。

我创建了一个包含 12 个`<asp:Calendar>`对象的测试页面。我将这些日历中的每一个都放在`<div class="row">`一个`<div class="span12">`容器中。

现在所有日历都在 div 中分组，并且通过引导网格系统将 div 设置为流动的，容器将随着浏览器调整大小。现在我们要做的就是让日历在容器调整大小时开始向下移动。

为了做到这一点，我将内置添加到我的`class="pull-left"`每个`<asp:calendar>`对象中。

结果对我来说非常有效，可能会根据您的喜好工作。

这是我的测试代码。

```
<div class="row">
<div class="span12">
    <asp:Calendar ID="Calendar1" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar2" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar3" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar4" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar5" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar6" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar7" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar8" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar9" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar10" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar11" runat="server" CssClass="pull-left"></asp:Calendar>
    <asp:Calendar ID="Calendar12" runat="server" CssClass="pull-left"></asp:Calendar>
</div> 
```

即使您不使用这些`<asp:Calendar>`对象，`class="pull-left"`也应该适用于您使用的任何日历。

要在日历之间添加一些间距，您可以创建自己的 css 类：

```
<style type="text/css">
    .CalendarMargin {
    margin-right:10px;
    margin-bottom:10px;
    }
</style> 
```

然后将新类添加到`<asp:Calendar>`标签中，如下所示：

```
<asp:Calendar ID="Calendar1" runat="server" CssClass="pull-left CalendarMargin"></asp:Calendar> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:27:41.853

是的，这是可能的。twitter boostrap 是基于 12 列的，它会随着屏幕大小的变化而自动向下折叠。只需将每个日历包装在`<div span2>`(12/6=2) 中，框架将为您处理其余的事情。

这些东西的引导文档非常好。请参阅[脚手架系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)以更好地了解网格系统的工作原理。

编辑：刚刚意识到我为帮助您而包含的 html/css 没有显示，因为我忘记用代码标签包装它。`<div span2>`是你需要的

# autosys - 用于 Windows 上特定文件名的 Autosys 文件观察程序

> ID：15028406
> 
> 赞同：0
> 
> 时间：2013-02-22T16:10:07.283
> 
> 标签：autosys

我正在尝试在**autosys**中编写一个文件观察器作业，以监视特定文件。文件名格式为 filename_ddmmyyyy。

要求是文件在每天早上 7.15 出现，文件观察器作业在早上 6.50 开始运行，一直运行到早上 8 点。如果此时收到文件，则作业成功，否则会发出警报。

现在我要做的是在特定的一天留意文件**filename_ddmmyyyy 。**例如，如果今天是 2013 年 2 月 22 日，文件名将是**filename_22022013**，这就是我要查找的文件。如果我使用像 filename_* 这样的通配符，它​​会查找我不想要的所有可能的文件。

我不确定如何在**Windows**中执行此操作。

任何帮助将非常感激。

如有问题请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:17:18.853

当作业开始时，您将需要使用`profile`作业属性来初始化变量。其中一个变量需要是您正在寻找的日期模式（您需要另一个动态输出的过程）。然后，一旦将其设置为配置文件脚本中的变量，您就可以从`watch_file`属性中引用该变量名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T08:53:37.287

使用 date 和我们创建全局变量作为变量：

```
example:filename_$${GV_DATE}
GV_DATE: ddmmyyyy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T03:06:48.010

很晚才回答，但这是一个不使用全局变量的答案。您可以在文件名中使用格式化的系统日期变量。

```
File_to_watch: filename_%date:~10,4%%date:~4,2%%date:~7,2% 
```

# iphone - 保存 UI 颜色

> ID：15028407
> 
> 赞同：1
> 
> 时间：2013-02-22T16:10:07.653
> 
> 标签：iphone, ios, nsuserdefaults, uicolor

我的应用程序中有一个功能，允许用户更改应用程序顶部和底部栏的颜色。但我不知道如何保存这种颜色变化，以便它保持变化。我尝试使用`NSUserDefaults`但没有用。我正在使用这种方法来设置颜色：

```
-(IBAction)uiColorGreen:(id)sender{
topBar.tintColor = [UIColor greenColor];
bottomBar.tintColor = [UIColor greenColor]; 
```

我将如何保存`topBar`和`bottomBar`颜色属性，以便在启动应用程序时应用所选颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:42:20.200

正如其他人所说，您可以使用 NSUserDefaults 保存为数据，如下所示：

```
NSData *colorData = [NSKeyedArchiver archivedDataWithRootObject:color];
[[NSUserDefaults standardUserDefaults] setObject:colorData forKey:@"color1"]; 
```

并得到它：

```
NSData *colorData = [[NSUserDefaults standardUserDefaults] objectForKey:@"myColor"];
UIColor *color = [NSKeyedUnarchiver unarchiveObjectWithData:colorData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:15:29.333

好吧，我不确定您如何尝试保存到 UserDefaults，但是将您的 UIColor 转换为 NSData 然后存储在 UserDefaults 中是可行的。您可以看到这篇标记为整个源代码实现的答案：[将 UIColor 保存到并从 NSUserDefaults 加载](https://stackoverflow.com/questions/1275662/saving-uicolor-to-and-loading-from-nsuserdefaults)。

# javascript - C# MVC Facebook application does not work in iPad Facebook application

> ID：15028408
> 
> 赞同：2
> 
> 时间：2013-02-22T16:10:11.173
> 
> 标签：javascript, ios, facebook, ipad, asp.net-mvc-4

I've written a Facebook application using Microsoft's ASP.NET MVC template. Works great from the browser on IE, Android's browser and will even work in Safari. Inside the Android Facebook application clicking on the link to my application bounces you out to the web browser and everything is good to go. On an iPhone or iPad going to my application works fine from inside Safari. But if you run the iPhone or iPad Facebook application you get an error. Across the top it says 'Error' and the details say "An error occurred. Please try again later."

I've search the SDK docs and googled around but I've not found anything that tells me what to do. Did I miss a setting for my application? Is there some special cookie I need? Do I need to go leave my wallet at Steve Job's grave?
Any help would be appreciated.

# mongodb - 服务器端 mongo-dart DB 的程序和下载

> ID：15028414
> 
> 赞同：2
> 
> 时间：2013-02-22T16:10:19.857
> 
> 标签：mongodb, download, dart

我已经用 dart 编程了一段时间，在尝试了 LocalStorage 之后，我想从一个服务器端的 mongo-dart 应用程序开始。所以我的问题是：除了 Darteditor 和 Chromium 之外，我还需要什么程序和下载？我会很高兴得到答案。提前致谢！卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:03:15.097

MongoDB 站点[http://docs.mongodb.org/ecosystem/drivers/](http://docs.mongodb.org/ecosystem/drivers/)上没有提到 Dart 语言的官方 MongoDB 驱动程序。

但是你可以通过 vadimtsushko 在 GitHub 上找到驱动程序： [https ://github.com/vadimtsushko/mongo_dart](https://github.com/vadimtsushko/mongo_dart)

他还写了教程[http://blog.dartwatch.com/2012/03/building-client-server-dart-app-part-2.html](http://blog.dartwatch.com/2012/03/building-client-server-dart-app-part-2.html)

希望它能给你一些开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:27:25.543

这是我不久前写的一篇博客文章，它使用 mongodb 和 dart [http://financecoding.github.com/blog/2013/01/16/darting-a-full-stack/做了一个完整的堆栈示例](http://financecoding.github.com/blog/2013/01/16/darting-a-full-stack/)

服务器端仍然很轻，我建议从 rikulo 试验流[http://rikulo.org/projects/stream](http://rikulo.org/projects/stream)可能是一个更清洁的解决方案，然后滚动您自己的 Web 服务器。

玩得开心！

# asp.net - 具有 Wcf 服务的网站

> ID：15028415
> 
> 赞同：0
> 
> 时间：2013-02-22T16:10:22.413
> 
> 标签：asp.net, asp.net-mvc-3, wcf, web-services, web

我是网络服务的新手。我正在开发一个项目，其中包括一个用于介绍信息的网站（后台），并且该信息将被发送到移动设备。

我的问题是，最好创建一个连接到数据库以插入和更新信息的网站，然后仅为移动设备创建一个 Web 服务以获取该信息，还是创建一个可以完成所有工作的 Web 服务？（网站和移动设备连接到网络服务）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:14:26.747

如果您有一个在移动设备上运行的客户端应用程序，那么您需要一个 Web 服务。我推荐使用 JSON 的 RESTful。如果您想从计算机浏览器访问此功能，您需要一个网站 - 可以从移动设备上的浏览器访问。

权衡是客户端应用程序的可访问性与质量。网站可能在计算机浏览器上运行良好，但可能不适合移动访问。该网站将是一个单一的解决方案。如果您使用 Web 服务，则需要一个移动应用程序来使用它（可能适用于多个平台），再加上一个桌面应用程序来使用该 Web 服务或一个网站来在浏览器中运行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:15:01.140

在我看来。您应该使用基于服务的架构。您可以在 MS Stack 上使用 WCF /Asp.net Webapi。使用基于 SOAP 或 REST 的服务可以为消费者提供更多的灵活性和一定程度的可扩展性来使用您的服务。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:43:26.410

有许多解决方案，您选择哪一种取决于您的应用程序的使用方式。

在任何情况下，拥有可重用的代码总是好的，并且拥有同时面向 Web 和移动应用程序的单一服务将是好的。

如果您的应用程序是写密集型的，用户和网站之间传递的数据很关键，并且必须保持数据完整性，那么您应该选择在后台运行的单一服务，负责完整性并提供数据检索和修改方法给客户（网络/移动/桌面应用程序）。

如果您的应用程序是读取密集型的，将被大规模部署，具有数万或数十万个客户端，那么您应该选择每个直接连接到数据库的 Web 应用程序。在这种情况下，您需要牺牲数据一致性，因为在 Web 应用程序的一个节点上进行的写入不会立即在其他节点上可见。使用这种方法，当您需要扩展时，您可以添加复制的数据库节点以及连接到它们的新 Web 应用程序节点。

# ms-access-2010 - Move the new record entry row in Access table to the beginning row

> ID：15028416
> 
> 赞同：0
> 
> 时间：2013-02-22T16:10:24.850
> 
> 标签：ms-access-2010, record

Is it possible to move the "New Record Row" in an Access table to the beginning of the table?

For example, say you have 200 items entered into your table, you would have to scroll the whole way down to the bottom of the table to enter a new record.

Instead, your entry row would be in the first row of your table.

Can this be done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:21:55.557

使用表单或数据表并以添加模式而不是编辑模式打开它。

```
 DoCmd.OpenForm "Form1", , , , acFormAdd 
```

-- [http://msdn.microsoft.com/en-us/library/office/ff820845.aspx](http://msdn.microsoft.com/en-us/library/office/ff820845.aspx)

# mysql - Heroku Node.js Remote Mysql Database IP Address

> ID：15028417
> 
> 赞同：1
> 
> 时间：2013-02-22T16:10:26.233
> 
> 标签：mysql, node.js, heroku

I have a remote Mysql database that I am connecting to through Node.js on Heroku. My MySql host (bluehost) wants me to input IP Adresses of all remote MySql connections.

Heroku doesn't have a dedicated IP for my app, so how can I connect to it? Bluehost mentions something about a Class C IP on its page, but I'm not sure Heroku has one...

Also, I believe I already have all of the heroku environment variables set up correctly:

(`heroku config:add EXTERNAL_DATABASE_URL=...`)

Thanks :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:07:51.763

以下是蓝色主机关于动态 IP 地址的说明：

### 动态 IP 地址

> 拥有动态 IP 地址意味着连接的 IP 地址可以根据 Internet 服务提供商 (ISP) 定期更改。每次更改时，您都必须更新远程 MySQL 中的连接 IP。

来自[https://my.bluehost.com/cgi/help/89](https://my.bluehost.com/cgi/help/89)。

因此，至少每次重新部署应用程序时，您都有机会获得不同的 IP 地址。所以这似乎非常不切实际。为什么不使用 Heroku 的 MySQL 产品？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T23:22:02.987

您可以通过该静态 ip 使用“静态 ip”插件和代理连接之一 - 请参阅[此讨论](https://github.com/felixge/node-mysql/issues/725)

# c# - ReturnUrl generation after FormsAuthentication.SignOut()

> ID：15028420
> 
> 赞同：0
> 
> 时间：2013-02-22T16:10:42.327
> 
> 标签：c#, asp.net-mvc

Which part of asp.net mvc is reponsible for the generation of the ReturnUrl. At the moment I am getting this:

```
?ReturnUrl=%2f 
```

after:

```
FormsAuthentication.SignOut(); 
```

This takes place in a model which is invoked like this:

```
[HttpGet]
public ActionResult LogOff()
{
    _xModel.LogOff();
    return Redirect("/");
} 
```

changing this to:

```
[HttpGet]
public ActionResult LogOff()
{
    _xModel.LogOff();
    return RedirectToAction("Index", "Home");
} 
```

does not work.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:12:24.357

> asp.net mvc 的哪一部分负责 ReturnUrl 的生成

没有任何。这根本不是 ASP.NET MVC 的一部分。它是 FormsAuthenticationModule 的一部分，它会为您激活表单身份验证的每个 ASP.NET 应用程序自动注册。为避免这种情况发生，您应该始终在退出用户后重定向：

```
FormsAuthentication.SignOut();
return RedirectToAction("Index", "Home"); 
```

# add-in - MAF: Add-in crashes host even when run in seperate process

> ID：15028423
> 
> 赞同：0
> 
> 时间：2013-02-22T16:10:47.763
> 
> 标签：add-in, maf

I am using MAF for my Addin development. All seems to be working fine, but one issue needs be sorted...

I activate the plugin in their own process, i,e, using

var process = new AddInProcess(); myAddinToken.Activate(process,AddInSecurityLevel.FullTrust);

When an unhandled exception occurs in the add-in, my host crashes! Since i am running the addin in a seperate process, why i am i still seeing my host app crash because of an unhandled exception in the ad-in?

Is it not supposed to simply crash the add-in specific dedicated process, and leave the host process as-is live?

Any ideas how to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:34:18.423

使您的应用程序崩溃的异常是什么？

您是否有来自 AddIn 的 UI 元素？

使用 UI，我必须正确关闭/处理主机端的 UI 元素并捕获 RemotingException

也许这对您有所帮助：

```
AddInToken grailAddInToken = addInTokens[0];
AddInProcess addInProcess = new AddInProcess();
addInProcess.Start();
Process process = Process.GetProcessById(addInProcess.ProcessId);
process.EnableRaisingEvents = true;
process.Exited += (s, e) => synchronizationService.Invoke(() =>
{
     window.Close();
}); 
```

# asp.net - Multiple external files for url rewrite under web.config

> ID：15028434
> 
> 赞同：8
> 
> 时间：2013-02-22T16:11:17.450
> 
> 标签：asp.net, mod-rewrite, url-rewriting, web-config, configsource

Earlier I wanted to keep the redirects out of web.config, because I have many rewrite rules. I was successfull in doing that by using

```
<rewrite>      
      <rules configSource="RewriteRules.config" />
</rewrite> 
```

Now the problem is this file is already having many rules, and I am going to use another set of large amount of rules for another domain pointed to same base code. So I want to keep rules for both files on different files like:-

```
<rewrite>      
          <rules configSource="RewriteRules_a.config" />
          <rules configSource="RewriteRules_b.config" />
</rewrite> 
```

**which is not allowed**, can anyone suggest how can i fix this situation?? Please note both domains will have different rules and domain addition can be more too in this project.

Any suggestions will be appreciated ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:41:36.637

您可以使用创建多个文件（仅用于开发）并创建将它们全部连接到单个 rewrite.config 文件中的构建后规则吗？

这样，您可以将它们拆分为多个文件并在开发过程中对其进行版本控制，并且后期构建会将它们聚合到一个文件中以用于生产目的。

第二个域是否指向 IIS 中的同一个应用程序？如果它们是不同的应用程序，您可以使用 VS 的配置转换功能为每个域创建一个文件，并且只在每个应用程序上部署您需要的文件： [http ://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

# google-app-engine - How to initialize a Ref field in objectify to a dummy value

> ID：15028436
> 
> 赞同：0
> 
> 时间：2013-02-22T16:11:20.323
> 
> 标签：google-app-engine, objectify

I have a collection(arraylist) of Ref `s ,the objectify documentation says that I need to initialize collections for them to be persisted and hence modified in the future.....

Now , Ref points to an object but when I launch my app for the first time I dont have any objects in the data store...so whats the best way for me to initialize a dummy value...... Is my assumption that a Ref<> needs to point to a real object in the data store?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:46:11.053

两件事情：

1.  您应该只初始化一个空集合。你不需要添加任何东西。例如，`field = new ArrayList<Ref<Thing>>();`
2.  实际上甚至不需要初始化集合。这只是一个好主意，原因会在您使用该系统一段时间后变得显而易见。

# css - 背景图像不起作用

> ID：15028445
> 
> 赞同：0
> 
> 时间：2013-02-22T16:11:39.130
> 
> 标签：css, background-image

在过去的几天里，我一直在尝试解决这个非常烦人的问题。我什至已经阅读了 Stackoverflow 上所有可能的解决方案，但没有任何效果！

我的 HTML 中有这段代码：

```
<div id="picture">
   <div class="picture-1"></div>
   <div class="picture-2"></div>
   <div class="picture-3"></div>
</div> 
```

我的CSS中的这段代码：

```
#picture {
height: 250px;
border-top: 1px solid #ffefaf;
border-bottom: 2px solid #ffffff;
clear: both;
}

.picture-1 {
background: transparent url('images/view.png') left top no-repeat;
}

.picture-2 {
background: transparent url('images/plant.png') left top no-repeat;
}

.picture-3 {
background: transparent url('images/view.png') left top no-repeat;
} 
```

图片在正确的文件夹中，名称正确，但它们不起作用。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:18:14.243

您的图片`DIV`没有尺寸。它们不会像`IMG`标签那样自动将其大小设置为图像。您需要在 CSS 中使用`width:`和进行设置`height:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:25:10.187

我认为问题在于您的内部 div 没有大小，因此他们尝试将以下几行添加到您的 css：

```
#picture  > div {
    width: 200px;
    height: 200px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T19:24:46.810

添加`#picture div{height: 250px;}`

Js小提琴为您解答-> [http://jsfiddle.net/niteshp27/xkLd7/](http://jsfiddle.net/niteshp27/xkLd7/)

# asp.net-mvc - ServiceStack Razor - Html.RenderAction 等效

> ID：15028447
> 
> 赞同：2
> 
> 时间：2013-02-22T16:11:48.757
> 
> 标签：asp.net-mvc, razor, servicestack

我需要像在 ASP.NET MVC 中一样使用 Html.RenderAction。

例如，我有一个主页，上面有新闻和产品。

例如，我想做

```
@Html.RenderAction("/api/products/featured") 
```

这将启动一个新的服务调用并将模板输出到 html 流。

使用 ServiceStack Razor 是否可行，如果可以，我该如何完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-09T01:01:25.940

[PartialExamples.cshtml](https://github.com/ServiceStack/ServiceStack/blob/master/tests/RazorRockstars.Console.Files/Pages/PartialExamples.cshtml)测试页面显示了在页面内呈现剃刀视图的不同示例，例如：

使用允许您执行服务的新`RenderToAction()`方法并使用路由和 QueryString 呈现部分视图，例如：

```
@Html.RenderAction("/products/1") 
```

如果您想要与默认视图不同的视图，这也采用可选视图名称：

```
@Html.RenderAction("/products/1", "CustomProductView") 
```

还`Html.Partial()`可以指定要在页面中呈现的视图和模型，例如：

```
@Html.Partial("GetProduct", 
    base.ExecuteService<ProductService>(s => s.Any(new GetProduct { Id = 1 }))) 
```

`ExecuteService`只是`ResolveService`using 语句中等价物的包装，即：

```
@{
   Response response = null;
   using (var service = base.ResolveService<ProductService>())
   {
       response = service.Any(new GetProduct { Id = 1 });
   }
}
@Html.Partial("GetProduct", response) 
```

Razor Views 中的新`RenderToAction()`方法是在**v4.0.34+**中添加的，现在[可以在 MyGet 上使用](https://github.com/ServiceStack/ServiceStack/wiki/MyGet)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:59:51.673

*我可能会重复我的答案，或者我以某种方式丢失了它

查看 ServiceStack.Razor.ViewPage 类，有一个 ServiceStack.Html.HtmlHelper 类型的 Html 属性。我没有将“RenderAction”视为此类的方法（或扩展方法），因此它似乎不可用。有一个“部分”方法采用 ViewName 和一个采用 ViewName 和一个对象的重载。根据您的上述评论，这似乎不是一个有用的解决方案。

如果我对上述内容是正确的，我认为您需要您的“精选视图模板”来提取数据。可以添加类似的东西

```
 { FeaturedResponse products = new JsonServiceClient("http://localhost").Get<FeaturedResponse>("/api/products/featured"); } 
```

到您的模板。这将允许您像模型一样使用 products 变量。

或者，使用 JavaScript 将数据拉入模板。但是，您必须使用 JavaScript 将数据放入 HTML 元素中。

然后，您可以使用 @Html.Partial('Featured') 呈现模板

希望这可以帮助。

# eclipse - Subclipse Lock Automatically

> ID：15028448
> 
> 赞同：0
> 
> 时间：2013-02-22T16:11:49.523
> 
> 标签：eclipse, svn, subclipse

I'm currently using subclipse with eclipse to connect my project to SVN. Due to management decisions we must use the lock-modify-unlock model instead of the standard SVN model. We are accomplishing this by adding the auto prop need-lock. Subclipse recognizes this and asks us to lock whenever we edit a file, which works but it rather annoying. Is there any configuration settings we can use to make it automatically take the lock for the file as long as it is not already locked (at that point it can pop up and bother us)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:27:58.460

不，没有绕过对话框的设置。

# wpf - 当文本在 TextBlock 内换行时，ActualHeight 不正确

> ID：15028455
> 
> 赞同：2
> 
> 时间：2013-02-22T16:12:15.330
> 
> 标签：wpf, textblock, actualheight

我在它周围有一个`TextBlock`a ，它在我用来作为自定义控件的一部分对其进行动画处理的 a 的内部。块从屏幕底部滑入图像顶部。我正在尝试使用来确定将其移动到页面上的距离，但是当文本太多以至于它换成两行时，返回的大小就好像只有一行一样。`Border``Canvas``ActualHeight``TextBlock``ActualHeight`

文本块：

```
<DataTemplate DataType="{x:Type contentTypes:BusinessAdText}" x:Key="BusinessAdTextTemplate">
    <Border Background="#a9a9a975"
        Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type Canvas}}, Path=ActualWidth}">
        <TextBlock Margin="20" Text="{Binding Text}"
            TextWrapping="Wrap">
        </TextBlock>
        </Border>
</DataTemplate> 
```

应用此样式，其中包含画布：

```
<Style TargetType="local:BusinessAd">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:BusinessAd">
                <Border Background="Transparent">

                    <Canvas ClipToBounds="True">
                        <ContentPresenter x:Name="PART_Content"                                                  
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center" />
                    </Canvas>

                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

BusinessAd.cs 背后的代码有：

```
public override void OnApplyTemplate()
{
    base.OnApplyTemplate();
    _contentPart = GetTemplateChild("PART_Content") as FrameworkElement;                        
} 
```

然后只使用一个简单的 DoubleAnimation 我将它移动到屏幕上：

```
if (_contentPart != null && _isLoaded)
{
    _storyboard.Stop();

    vAnimation.From = ActualHeight;
    vAnimation.To = ActualHeight - _contentPart.ActualHeight;
    //_contentPart.ActualHeight returns 46.something no matter how much text is there

    vAnimation.Duration = new Duration(TimeSpan.FromSeconds(Duration));

    if (_storyboard.Children.Count == 0)
    {
        _storyboard.Children.Add(vAnimation);

        Storyboard.SetTargetProperty(vAnimation, new PropertyPath("(Canvas.Top)"));
        Storyboard.SetTarget(vAnimation, _contentPart);                                                           
    }

    _storyboard.Begin();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T06:37:10.240

`UpdateLayout()`您必须在检查之前致电`ActualHeight`：

```
if (_contentPart != null && _isLoaded)
{
    _storyboard.Stop();
    UpdateLayout();

    vAnimation.From = ActualHeight;
    vAnimation.To = ActualHeight - _contentPart.ActualHeight;
    //_contentPart.ActualHeight returns 46.something no matter how much text is there

    vAnimation.Duration = new Duration(TimeSpan.FromSeconds(Duration));

    if (_storyboard.Children.Count == 0)
    {
        _storyboard.Children.Add(vAnimation);

        Storyboard.SetTargetProperty(vAnimation, new PropertyPath("(Canvas.Top)"));
        Storyboard.SetTarget(vAnimation, _contentPart);                                                           
    }

    _storyboard.Begin();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T23:16:59.740

我不确定这是否适用于您，但对我来说，`Windows.UI.Xaml.Controls`需要在文本块前面加上：

```
myTextBlock.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity)); 
```

之前，当我有 时`myTextBlock.Measure(new Size());`，它在没有任何文本换行但有换行`ActualWidth`并`ActualHeight`返回单词/字母的尺寸时起作用，具体取决于 WrapWholeWords 或 Wrap

# grails - Grails 日期约束

> ID：15028458
> 
> 赞同：1
> 
> 时间：2013-02-22T16:12:20.823
> 
> 标签：grails, groovy, constraints

我试图向用户提交的文本字段添加约束，该字段是出生日期。我需要用户至少 18 岁，但不能超过 113 岁。

```
final static Date MIN_DATE = new Date(Calendar.YEAR-18)
final static Date MAX_DATE = new Date(Calendar.YEAR-100)

static constraints = {
    dob(nullabe: false, min: MIN_DATE, max: MAX_DATE
} 
```

当我，

```
System.out.println('Year Max Date: ' + person.MAX_DATE) 
```

它给了我，

```
Year Max Date: Wed Dec 31 17:59:59 CST 1969 
```

最小日期也是如此。

我试着做

```
final static Date MIN_DATE = new Date().getAt(Calendar.YEAR)-18 
```

但这根本不起作用。我也尝试在没有的情况下这样做，`-18`并得到了正确的答案，但已经休息了 7 个小时。当我尝试从本地重新启动应用程序时，它崩溃了。从那以后我就无法重新创建它。

我了解到，它给出的日期是“纪元”日期或 Unix 启动之前的日期。我只是不知道如何解决它。

对此问题有任何想法/建议/疑虑/经验吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:17:31.497

我不同意这些限制，首先因为它们看起来很随意（为什么有人不应该超过 100 岁？为什么我 16 岁就不能撒谎？）

其次，如果网络服务器运行了几年，这些静态日期会慢慢漂移

但无论如何（抛开这些担忧），我相信你想要的是：

```
final static Date MIN_DATE = Calendar.instance.with { add( YEAR, -18 ) ; it }.time
final static Date MAX_DATE = Calendar.instance.with { add( YEAR, -100 ) ; it }.time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:16:02.320

问题是`Date`构造函数需要一个表示自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数的参数。因为`Calendar.YEAR`是一个常数，用于表示`Calendar`结构中的年份字段并且等于 1，所以您将获得上述值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:16:47.737

您需要使用 SimpleDateFormat 将用户提交的文本字段（字符串）转换为 Date 对象。然后使用 Date 对象创建一个 Calendar 并检查 Year 字段。

或者，您可以自己解析文本字段（字符串）并选择年份，转换为 int 并进行检查。

# php - 查找文件中所有出现的字符串

> ID：15028462
> 
> 赞同：0
> 
> 时间：2013-02-22T16:12:29.387
> 
> 标签：php, string, file, loops

请记住，我打开的文件可以是 10mb 到 125mb。我研究了各种打开文件的方法，但仍然不确定哪种方法最好。请指教！

我正在打开一个大文件并尝试在每次第一次出现时提取两个字符串之间的文本。我可以找到第一个字符串并将文本提取到第二个字符串，但是，我的循环给了我 12 次结果（这个文件中出现字符串的次数。我可以看到我在循环中做错了什么，基本上找到了第一次出现并重复其输出 12 次。如何遍历文件并获取第 2-12 次出现之间的文本？

此外，有关正确打开大文件和处理内存限制的任何提示都会很棒。

如果将其放入数组中，我会丢失空格吗？我正在使用 PRE 正确显示它。最终，我想将找到的每个字符串解析为数组或数据库中的较小元素。我不想超越自己，因此如有必要，请忽略数组注释。

```
<?php
ini_set('memory_limit', '-1');

/*
Functions
*/

function get_string_between($string, $start, $end){ 
    $string = " ".$string; 
    $ini = strpos($string,$start); 
    if ($ini == 0) return ""; 
    $ini += strlen($start); 
    $len = strpos($string,$end,$ini) - $ini; 
    return substr($string,$ini,$len); 
} 

/*
Pre Loop
*/

$string1 = "String 1";
$string2 = "String 2";

$report = file_get_contents('report.rpt','r');

$cbcount = substr_count($report,$string1);

echo $cbcount;

/*
Loop
*/

for ($i=0; $i<$cbcount; $i++){

$output = get_string_between($report, $string1, $string2); 

echo "<pre>".$output."</pre>";

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:23:16.097

你从来没有真正推进任何类型的指针，所以它无法知道它已经找到了第一个匹配项。

现在，根据您的输入，您可以只使用正则表达式：

```
preg_match_all("(".preg_quote($string1).".*?".preg_quote($string2).")s",$report,$matches); 
```

（用这个替换整个循环）

然后你可以`var_dump($matches[0])`看到你的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:24:56.667

```
$startfrom = 0;
while (($start = strpos($string1, $report, $startfrom)) !== false) {
    $end = strpos($string2, $report, $start);
    echo "<pre>".substr($report, $start, $end-$start)."</pre>";
    $startfrom = $end + 1;
} 
```

关于处理大文件，你可以使用`fopen()`and`fgets()`逐行读取，而不是将整个内容读入内存。当您找到包含 的行时，`$string1`您开始在变量中累积行，直到找到包含 的行`$string2`。这仅在匹配字符串不能包含换行符时才有效。

# javascript - Javascript 函数在 IE 中不起作用，但在 Firefox 中起作用

> ID：15028466
> 
> 赞同：0
> 
> 时间：2013-02-22T16:12:42.147
> 
> 标签：javascript, jquery, internet-explorer

```
<script type="text/javascript">
$(document).ready(function () {
    showHome();
}); 

function findTemplate() {
var selectedIndustry = $("#industrySelected option:selected").text();
var selectedTemplate =$("#templateCode").val();
$.ajax({
    type: "post",
    url: "/_layouts/TBSharePointProject/SharePointTestService.asmx/redirectUserToAppropriateTemplate",
    contentType: "application/x-www-form-urlencoded",
    dataType: "xml",
    data: { industry: selectedIndustry, templateCode: selectedTemplate, checkList: "" },
    success: function (result) {
        xmlStr = xmlToString(result);
        xml = removeFirstAndLastLine(xmlStr)
        myJsonObject = xml2json.parser(xml);
        //alert(myJsonObject.eccn[0].eccnno);

        $("#surveyScreen").empty();
        for(var i = 0; i <= myJsonObject.eccn.length; i++) {

            $("#surveyScreen").append("<p><input id='" + myJsonObject.eccn[i].guid + "' type='checkbox' checked ='checked'>" + myJsonObject.eccn[i].eccnno + ": " + myJsonObject.eccn[i].title + "</input></p>");

        }
        $("#surveyScreen").append("<br/><input type='button' id='goHome' value='Back'     onclick =\"javascript: showHome();\"/>");
    },
    error: function (result) {
        alert('error occured');
    },
    async: true
});

}
//Converst xmlString to String
function xmlToString(xmlObj) {
if (navigator.appName == "Netscape") {
    return (new XMLSerializer()).serializeToString(xmlObj);
}
if (navigator.appName == "Microsoft Internet Explorer") {
    return xmlObj.xml;
}
}

function removeFirstAndLastLine(xmlStr) {
// break the textblock into an array of lines
var lines = xmlStr.split('\n');
// remove one line, starting at the first position
lines.splice(0, 2);
// join the array back into a single string
var newtext = lines.join('\n');
//Removes the last line
if (newtext.lastIndexOf("\n") > 0) {
    return newtext.substring(0, newtext.lastIndexOf("\n"));
} else {
    return newtext;
}
}

function showHome() {

$("#surveyScreen").empty();
$("#surveyScreen").append("<p>Do you have a saved checklist?</p>");
$("#surveyScreen").append("<p>Submission Code:<input type='text' id='checkListCode'/>    </p>");
$("#surveyScreen").append("<p><input type='button' id='getCheckList' value='Get Saved     Checklist' onclick =\"javascript: findTemplate();\"/></p><br/><br/>");
$("#surveyScreen").append("<p>Industry</p>");
$("#surveyScreen").append("<select id='industrySelected'>"+
                            "<option>Computer & Networking</option>"+
                            "<option>Biotechnology</option>"+
                            "Industry</select>");
$("#surveyScreen").append("<br/>Or");
$("#surveyScreen").append("<p>Template Code:<input type='text' id='templateCode'/>    </p>");
$("#surveyScreen").append("<p><input type='button' id='getTemplate' value='Next'     onclick =\"javascript: findTemplate();\"/></p><br/><br/>");

}

</script>
<body>
<div id="surveyScreen">
</div>
</body> 
```

有人可以向我解释为什么这个函数调用在 Firefox 中有效，但在 IE 中无效，以及需要做什么才能在 IE 中工作。

所以我更新了帖子以显示更多我的代码..有些部分被遗漏了......而其他一些则不重要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:19:29.807

IE 在重复 id 方面更加挑剔。ids（当然）应该是唯一的，但 Firefox 只是抓住第一个并继续。IE 会忽略访问欺骗 ID 的尝试。

您不会发布您的 HTML，但这是我首先要看的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:25:44.653

确保在调用这行代码之前没有遗漏分号。我发现缺少分号（或任何其他错误）会导致 IE 在错误点停止工作，但它仍然可以在 FF 中工作。

您的代码在 IE 9 [http://jsfiddle.net/eL2nU/中运行良好](http://jsfiddle.net/eL2nU/)

```
$("#surveyScreen").append("<p><input type='button' id='getTemplate' value='Next' onclick=\"javascript: findTemplate();\"/></p><br/><br/>"); 
```

# wordpress - 隐藏早于当前日期的旧活动帖子

> ID：15028469
> 
> 赞同：0
> 
> 时间：2013-02-22T16:12:49.323
> 
> 标签：wordpress, while-loop

我当前的循环显示了 5 个即将发生的事件，但是当事件发生当天过去时，我无法让这些事件帖子不显示。这是我的代码...

```
<?

wp_reset_query();
query_posts(array('post_type' => 'events',
                  'showposts' => 5,
                  'meta_key'=>'event_date',  
                  'orderby' => 'meta_value', 
                  'order' => ASC));

while (have_posts()) : the_post(); 

?>

<li>
<?php $eventDate = DateTime::createFromFormat('Ymd', get_field('event_date')); ?>
<h4><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h4>
<span class="date"><strong>Event Date:</strong> <? echo $eventDate->format('d/m/Y'); ?></span>
</li>

<?php endwhile;?> 
```

...非常感激任何的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T23:57:12.647

由于您的帖子有自定义字段，您可以执行以下操作：

```
<?php

 // Get the current date
 $current_date = date('M d, Y');
 $current_date = strtotime( $current_date );

 query_posts(array('post_type' => 'events',
              'showposts' => 5,
              'meta_key'=>'event_date',  
              'orderby' => 'meta_value', 
              'order' => ASC));

 while (have_posts()) : the_post(); 

   // Get the custom field
   $post_date = get('date');
   $post_date = strtotime( $post_date );

   // If older than current date, don't show it
   if( $post_date > $current_date ):

?>

  <li>
   <?php $eventDate = DateTime::createFromFormat('Ymd', get_field('event_date')); ?>
   <h4><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h4>
   <span class="date"><strong>Event Date:</strong> <? echo $eventDate->format('d/m/Y'); ?></span>
  </li>

<?php
     endif;
 endwhile;
?> 
```

希望这可以帮助。

# html - URL 意外随机更改

> ID：15028471
> 
> 赞同：2
> 
> 时间：2013-02-22T16:12:59.130
> 
> 标签：html, url, session-state

这就是我的 URL 的样子（以前的样子）：

```
http://website.gov/Publication/NewPub.aspx 
```

但是发生了一些事情，现在看起来像这样：

```
http://website.gov/%28S%28osxbddfuz00gzs4525gjzd55%29%29/Publication/NewPub.aspx 
```

`%28S%28osxbddfuz00gzs4525gjzd55%29%29`每次重新加载页面时都会更改。这发生在我网站上的每个页面上。这发生在本地和生产中。

任何想法可能会发生什么？

# sql - 在不使用子查询的情况下添加 where 子句来计数而不是整个查询

> ID：15028472
> 
> 赞同：0
> 
> 时间：2013-02-22T16:12:59.287
> 
> 标签：sql, sql-server

以下查询有效，但 where 子句的“o.opendate 不为 null 且 o.orderdate 不为 null 且 o.closedate 为 null 且 o.canceldate 为 null”部分只需要应用于 orderID 计数 (orderCount)。现在它适用于整个结果集，这不是我想要的。如何更改查询以执行此操作？这些表也非常大，所以我非常依赖索引并且出于性能原因尽量不使用子查询。任何帮助，将不胜感激

```
select s.ZipCode, count(o.[OrderID]) orderCount, b.Longitude, b.Latitude, b.ordering 
from ZipCodeServiceAvailability s  
left join pdx_orders_view o on s.ZipCode = left(o.[ZipCode], 5)  
left join ZipCodeBoundaries b on s.ZipCode = b.ZipCode  
Where s.state = 'TX' and Ordering % 10 = 0 and 
     o.opendate is not null and o.orderdate is not null and o.closedate is null and o.canceldate is null  
Group By s.ZipCode, IsServiced, b.Longitude, b.Latitude, b.Ordering  
Order by s.ZipCode, b.Ordering 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:14:04.917

您需要一个带有*SUM*的 case 语句：

```
select sum(case when o.opendate is not null and o.orderdate is not null and o.closedate is null and o.canceldate is null
             then 1 else 0
        end) as OrderCount 
```

然后，您应该从`where`子句中删除条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:29:39.583

你可以用having子句做你想做的事。

```
select s.ZipCode, count(o.[OrderID]) orderCount, b.Longitude, b.Latitude, b.ordering 
from ZipCodeServiceAvailability s  
left join pdx_orders_view o on s.ZipCode = left(o.[ZipCode], 5)  
left join ZipCodeBoundaries b on s.ZipCode = b.ZipCode  
Where s.state = 'TX' and Ordering % 10 = 0 and 
     o.opendate is not null 
Group By s.ZipCode, IsServiced, b.Longitude, b.Latitude, b.Ordering  
Having count(o.[OrderID]) is not null
Order by s.ZipCode, b.Ordering 
```

# javascript - 在 Facebook 公共页面的时间轴上发布网站 URL

> ID：15028476
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:13:02.707
> 
> 标签：javascript, facebook-graph-api

我想在我的网站上创建按钮，点击它时应该在我的 Facebook 公共页面的时间线上分享我的网站 URL？这可能吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:16:56.643

在您的网站中添加 facebook like 按钮。见（[https://developers.facebook.com/docs/plugins/](https://developers.facebook.com/docs/plugins/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:55:42.197

在您`Request`确保设置您的请求参数之一以将“status_type”包含为“链接”。还包括您的 URL 作为参数包中的“链接”键。

# asp.net-mvc - MVC 3 HiddenField 不呈现 base 64 数据

> ID：15028480
> 
> 赞同：0
> 
> 时间：2013-02-22T16:13:17.030
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在为我的 Web 应用程序使用 MVC 3 (RAZOR)。

我有一个简单的“编辑”视图来处理员工记录（例如名字、姓氏、出生日期等），但有些数据是敏感和加密的。敏感数据被加密并转换为 base 64 字符串。敏感数据在编辑视图中不可编辑，但被传递到隐藏字段以“保留它”，以便在需要编辑员工记录上的其他字段时不会在回发中丢失。

我认为因为这个数据是基于 64 位的，所以它不会在隐藏字段中呈现 - 也许这是 MVC 3 安全问题。我还应该提到，这个属性在我的模型上被标记为必需。所以它必须重新填充才能回发。

我需要在这个属性上添加一个特殊属性来告诉 MVC 可以在隐藏字段中使用吗？还有其他想法吗？

在 RAZOR 中，我的隐藏字段声明如下所示：

```
@Html.HiddenFor(model => model.SomeBase64String) 
```

在 HTML 中，它被渲染为：

```
<input style="margin-right: 5px;" id="SomeBase64String" name="SomeBase64String" value="" type="hidden" data-val="true" data-val-required="SomeBase64String is required."> 
```

base 64 字符串的示例可能是：

```
OW0iSdFXUqaUT82qjqaG5w== 
```

在 Edit (GET) 控制器操作中，我有以下内容：

```
 public ActionResult Edit(int id)
        {
            Employee employee;

            if (id == 0)
            {
                employee = Employee.CreateNew();
            }
            else
            {
                employee = _employeeDatabaseAccess.GetEmployeeById(id);

                //employee.SomeBase64String is already set. it's stored in the db...
            }

            return View(employee);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:16:15.037

在渲染视图之前，请确保您已在控制器操作内的视图模型上设置了相应的属性：

```
model.SomeBase64String = ...
return View(model); 
```

但我建议您不要为任何加密而烦恼。处理此问题的正确方法是，如果用户不应该编辑它，则根本不将此信息传递给视图。然后在您的 POST 控制器操作中，只需使用记录的 id 从您最初读取它的任何位置读取此信息（我猜您正在使用一些数据存储或其他东西）。

您应该只将用户应该查看和编辑的信息传递给视图。传递敏感信息就像自找麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:18:37.703

好吧，我按照 Darin 的建议创建了一个示例 MVC 项目，并验证了 Base 64 字符串可以在隐藏字段中呈现。没问题。我的申请肯定有问题。

# python - 获取我使用的 python 库中的所有入口点？（静态分析）

> ID：15028483
> 
> 赞同：0
> 
> 时间：2013-02-22T16:13:27.540
> 
> 标签：python, static-analysis

我想检查我的一个 python 项目，了解它使用另一个模块的所有“api”。

准确地说：我正在使用 mercurial python 代码的内部结构，并且我想获得一个列表，其中列出了在更新使用的 mercurial 版本时需要检查哪些代码点。

我想我需要某种形式的静态分析。没有什么可以证明恶意代码，但比 grep 更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:18:03.230

如果您的项目有一个测试套件，您可以在探查器下运行这些测试，它会为您收集所有函数调用的方便列表，然后您可以根据它们所在的模块进行排序/过滤（例如，如果它们在 mercurial ）。例如，要通过包含在大多数 Python 版本中的 cProfile 运行您的程序，只需调用

`$ python -m cProfile -o myprog.prof path/to/myprog.py [program arguments]`

您可以通过 cProfile 运行测试，或者如果您没有测试，您可以通过一些功能测试手动运行它，以获取在正常使用期间实际使用的 mercurial API 调用。

这不会像静态分析那样彻底，但它也可以让您更清楚地了解实际调用了哪些函数。然后，您可以使用[pstats 模块](http://docs.python.org/2/library/profile.html#module-pstats)来分析结果，或者使用[RunSnakeRun](http://www.vrplumber.com/programming/runsnakerun/)或（无耻插件）[SnakeViz](http://jiffyclub.github.com/snakeviz/)等图形配置文件查看器。

# java - 如我的代码示例所示，将应用程序保持不变是正确的方法吗？

> ID：15028484
> 
> 赞同：1
> 
> 时间：2013-02-22T16:13:27.200
> 
> 标签：java, enums, constants

```
public enum AppConst{
    WIDTH (1280),
    HEIGHT (800);

    private final int value;

    AppConst(int value) {
        this.value = value;
    }
    private int get() { return value; }
} 
```

**VS。**

```
public class AppConst{
    public static final int WIDTH = 1280;
    public static final int HEIGHT = 800;
} 
```

我读到它`enums`更适合用于存储常量值。像我展示的那样存储它们是一种好方法还是我误解了什么？

**编辑**。我认为将所有这些值放在一个地方可能会更好，因为如果需要，我们可以轻松地修改它们。我错了吗？

**编辑2。** AppConst 旨在成为一个我将存储所有值的地方，这些值不应该是“幻数”。例如windows坐标等。我计划可能有一些字段，例如DAYS_IN_WEEK = 7, MAX_smth = ..., ... , ...。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:20:48.100

使用`Enums`代替`static final`变量的主要好处是在处理出于安全需要的方法参数的限制时。这是一个例子：

```
public void myMethod(int width, int height){} 
```

VS

```
public void myMethod(AppConst width, AppConst height){} 
```

第二个限制可接受的`int`值，在您的情况下：800 和 1280。

因此，根据您的需要，枚举可以比静态常量更安全。

此外，由于您没有将行为带入枚举，因此您可以简短地编写：

```
public enum AppConst{
    WIDTH (1280),
    HEIGHT (800);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:21:30.690

枚举旨在表示枚举类型；也就是说，一种仅由一组有限的已知值组成的数据。如果要添加多个“位”信息，则向枚举添加数据很有趣：

公共枚举性别 MALE（“男性”，“男性”，“先生”），女性（“女性”，“女性”，“女士”）；

```
 private String genderName;
  private String genderPerson;
  private String genderTitle;

  .... 
```

}

通常，有一个变量代表一个对象，并打开它的值。

我认为在你的情况下，你只是想要两个众所周知的整数值，所以我会选择静态最终 int。

请注意，正如@PremGenEditor 所指出的，您可能会遇到 WIDTH 和 HEIGHT 发生变化的情况，因此它们最终可能只是某个对象的另一个属性；他们自然会是一个整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:24:11.060

通常枚举用于包含相同类型实体的一组值。虽然这可能仍然适合您的情况，只有 WIDTH 和 HEIGHT，但如果您需要为背景颜色添加新的应用程序常量，则不再适用。

AppConst 类的名称让我想到了一些通用的东西。我在这里看到两个案例：

1.  如果您将来确实打算将其用于其他与维度无关的附加常量，我肯定会选择静态选项。
2.  如果您打算仅将它用于这两个常量，那么我将使用与 AppConst 不同的名称，这给出了我们正在谈论维度的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T16:23:12.133

对于真正的*价值*- 常数就像你的一样，这有点矫枉过正。将枚举用于*枚举*类型，例如状态或其他内容。

过去，你可能做过这样的事情：

```
public static final int STATUS_OKAY = 0;
public static final int STATUS_ERROR = 1;
public static final int STATUS_WARNING = 3;

public static final int SOMETHINGELSE = 0;

// ...

if (getStatus() == STATUS_OKAY){
    // Do something...
}
if (getStatus() == 4) // This is NEVER true! Still it's allowed 
```

但这不是类型保存。您还可以将它与一个甚至不存在的值进行比较（比如说`4`）。使用枚举，您没有它，并且您的代码更具可读性：

```
public enum Status{
    OKAY, WARNING, ERROR
}

if (getStatus() == Status.OKAY){
    // Do Something
}
if (getStatus() == Status.DOESNTEXIST) // Compile-time error. 
```

*意图变得更加清晰，您获得了更好的代码，并且您对枚举*的-constants具有编译时安全性。

* * *

在您的示例中，`WIDTH`并且`HEIGHT`只是常*量值*，您可以将它们存储为常量字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T17:10:47.100

Java 中的枚举是类型安全的，并且有自己的命名空间。这意味着您的枚举将在下面的示例中具有例如“AppConst”的类型，并且您不能分配除枚举常量中指定的任何值。

```
public enum AppConst { WIDTH (1280), HEIGHT (800);}
AppConst height = AppConst.HEIGHT;
height = 1; /*compilation error*/ 
```

Java 中的 Enum 是类或接口等引用类型，您可以在 java Enum 中定义构造函数、方法和变量，这使其比 C 和 C++ 语言中的 Enum 更强大。

Java 中的枚举可以用作 switch 语句的参数，并且可以使用“case:”，如 int 或 char 原始类型。java enum 的这一特性使它们对开关操作非常有用。

由于 Java 中 Enum 中定义的常量是最终的，因此您可以使用“==”等式运算符安全地比较它们，如下所示：

```
AppConst height = AppConst.HEIGHT;
if (height == AppConst.HEIGHT){
  System.out.println("Hello World!");
} 
```

但不推荐使用 == 运算符比较对象，始终使用 equals() 方法或 compareTo() 方法来比较对象。

Java 中的 Enum 可以像普通类一样实现接口并覆盖任何方法。另外值得注意的是，Java 中的 Enum 隐式实现了 Serializable 和 Comparable 接口。

您可以在 Java 中的 Enum 内部定义抽象方法，也可以为 Java 中的不同枚举实例提供不同的实现。

枚举有自己的命名空间。在 Java 中的 Enum 上添加新常量很容易，您可以在不破坏现有代码的情况下添加新常量。

# html - 在某些行的表格右侧放置一个 img # 版本 2

> ID：15028487
> 
> 赞同：0
> 
> 时间：2013-02-22T16:13:52.007
> 
> 标签：html, image, html-table

我想要一张桌子右边有一张图片的桌子。

这是我想要的（在油漆上做的）：

![在此处输入图像描述](../Images/e5250e5b5ab40f58ee116ff9bf934f8b.png)

这是我的 html ：（不要关心“jsp”中的“if”）。例如最后一行代码（在“if”之后）：`<td class="noborder"><img src="img/refresh.png" class="refreshButton" alt="Refresh" id="sameRightsAsRefresh" href="Javascript:void;"></img></td>`

这是CSS：

```
table td,table th 
{
    border: 1px ridge black;
    padding: 3px;
}

td.noborder {
    border:0
} 
```

我想让我的按钮在 SameRightsAs、用户名和姓氏的右侧刷新。

完整代码：

```
<!-- FIRST TABLE : REQUESTOR -->
            <form id="form" method="post" action="mainServlet?command=FillBlanks&amp;">
                <p class="tableHead">Request For:</p>
                <table class="requestor">

                    <tr>
                        <td class="reqCellLabel">Username:</td>
                        <td class="reqCellAnswer" id="oracleUsername"><input id="oracleUsernameText" class="reqCellAnswer" onchange="fillBlanks(this.id,this.value)"
                            type="text" name="Requestor" <%if( Integer.parseInt(request.getParameter("isCreation")) == 1){%> readonly <%}%>></input></td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Oracle Employee #:</td>
                        <td class="reqCellAnswer" id="oracleEmployeeNumber"><input id="oracleEmployeeNumberText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Last name:</td>
                        <td class="reqCellAnswer" id="lastName"><input id="lastNameText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                    </tr>

                    <tr>
                        <td class="reqCellLabel">First name:</td>
                        <td class="reqCellAnswer" id="firstName"><input id="firstNameText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                    </tr>

                    <tr>
                        <td class="reqCellLabel">Timezone:</td>
                        <td class="reqCellAnswer" id="timeZone"><input id="timeZoneText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                    </tr>

                    <tr>
                        <td class="reqCellLabel">Default Printer:</td>
                        <td class="reqCellAnswer" id="defaultPrinter"><input id="defaultPrinterText" class="reqCellAnswer"
                            type="text" name="Requestor"  value=""></input></td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Employee is a buyer ?</td>
                        <td class="reqCellAnswer" id="employeeIsBuyer"><input id="employeeIsBuyerText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Same rights as :</td>
                        <td class="reqCellAnswer" id="sameRightsAs"><input id="sameRightsAsText" name="sameRightsAsText" class="reqCellAnswer" onchange="sameRightsAs(this.id,this.value)"
                            type="text" name="Requestor" <%if( Integer.parseInt(request.getParameter("isCreation")) == 0){%> disabled <%}%>></input></td>
                        <%if( Integer.parseInt(request.getParameter("isCreation")) == 1){%> <td class="noborder"><img src="img/refresh.png" class="refreshButton" alt="Refresh" id="sameRightsAsRefresh" href="Javascript:void;"></img></td><%}%>
                    </tr>
                </table>

            </form>
</body 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:28:20.440

像这样的东西？请注意，您所有的文本字段都具有相同的名称，当您提交表单时，最后一个将是可接受的值，但也许是一个例子，我希望 :)

```
<table class="requestor">

                    <tr>
                        <td class="reqCellLabel">Username:</td>
                        <td class="reqCellAnswer" id="oracleUsername"><input id="oracleUsernameText" class="reqCellAnswer" onchange="fillBlanks(this.id,this.value)"
                            type="text" name="Requestor"></input></td>
                        <td class="noborder" id="oracleUsername"><img src="refresh.jpg" width="16" height="16" /></td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Oracle Employee #:</td>
                        <td class="reqCellAnswer" id="oracleEmployeeNumber"><input id="oracleEmployeeNumberText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                        <td class="noborder" id="oracleEmployeeNumber">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Last name:</td>
                        <td class="reqCellAnswer" id="lastName"><input id="lastNameText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                        <td class="noborder" id="lastName">&nbsp;</td>
                    </tr>

                    <tr>
                        <td class="reqCellLabel">First name:</td>
                        <td class="reqCellAnswer" id="firstName"><input id="firstNameText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                        <td class="noborder" id="firstName">&nbsp;</td>
                    </tr>

                    <tr>
                        <td class="reqCellLabel">Timezone:</td>
                        <td class="reqCellAnswer" id="timeZone"><input id="timeZoneText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                        <td class="noborder" id="timeZone">&nbsp;</td>
                    </tr>

                    <tr>
                        <td class="reqCellLabel">Default Printer:</td>
                        <td class="reqCellAnswer" id="defaultPrinter"><input id="defaultPrinterText" class="reqCellAnswer"
                            type="text" name="Requestor"  value=""></input></td>
                        <td class="noborder" id="defaultPrinter">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Employee is a buyer ?</td>
                        <td class="reqCellAnswer" id="employeeIsBuyer"><input id="employeeIsBuyerText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                        <td class="noborder" id="employeeIsBuyer">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="reqCellLabel">Same rights as :</td>
                        <td class="reqCellAnswer" id="sameRightsAs"><input id="employeeIsBuyerText" class="reqCellAnswer"
                            type="text" name="Requestor" ></input></td>
                        <td class="noborder" id="sameRightsAs"><img src="refresh.jpg" alt="" width="16" height="16" /></td>

                    </tr>
                </table> 
```

# c++ - 将 QGLPixelBuffer 保存到文件会给出空白图像

> ID：15028489
> 
> 赞同：0
> 
> 时间：2013-02-22T16:13:55.923
> 
> 标签：c++, qt, opengl

我有一个 Qt 控制台程序，它应该从多个视点渲染场景并将每个渲染保存到文件中。它运行如下：

```
for(int k = 0; k < numberOfViewpoints; ++k)
{
    RenderToQGLPixelBuffer(k);
    QString fname = GetFileName(k);
    QImage im = pixBuffer->toImage();
    im.save(fname);
} 
```

如果我这样做，所有图像最终都是空白的。但是，如果我在保存图像后让程序休眠一秒钟：

```
for(int k = 0; k < numberOfViewpoints; ++k)
{
    RenderToQGLPixelBuffer(k);
    QString fname = GetFileName(k);
    QImage im = pixBuffer->toImage();
    im.save(fname);
    Sleep(1000);
} 
```

然后它按预期工作并且图像很好。然而，这显然大大增加了处理时间。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:13:46.803

你可以在调用 RenderToGLPixelBuffer(k) 之后尝试 qApp->processEvents()。

另一个可能的问题是，当您读回像素缓冲区时，它仍在绘制。绘制完成后尝试调用 glFinish()。

# sql - SQL 创建连接字符串

> ID：15028490
> 
> 赞同：0
> 
> 时间：2013-02-22T16:13:56.200
> 
> 标签：sql, sql-server

我有一个名为服务条目的表，我试图创建一个连接字符串。

```
ID  ServiceEntryID  PartID  Comment  ServiceTypeIDs  PartDescription
1        2           54      xyz      1               hellothere
2        2           22                               howdy
3        33          54      uhu      1               xyz 
```

**所需的字符串格式**

PartID~PartDescription~ServiceTypeIDs~评论

**所需的字符串值**

因此对于值为 2 的服务条目 ID 列：

54~你好~1~xyz | 22~你好~空~|

对于值为 33 的服务条目 ID 列：

33~xyz~1~uhu

如果条目没有注释，那么我不会为其添加 null，而如果 servicetypeids 为空，那么我将添加 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:24:20.263

```
SELECT
     ServiceEntryID,
     STUFF(
         (SELECT '|' + CAST(PartID AS VARCHAR(5)) + '~' +
                       PartDescription  + '~' +
                       COALESCE(CAST(ServiceTypeIDs AS VARCHAR(5)), 'NULL')  + '~' +
                       COALESCE(Comment, 'NULL')
          FROM TableName
          WHERE ServiceEntryID = a.ServiceEntryID
          FOR XML PATH (''))
          , 1, 1, '')  AS ResultList
FROM TableName AS a
WHERE ServiceEntryID = 2
GROUP BY ServiceEntryID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/cfc69/10)
*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/cfc69/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:24:10.340

```
Select   coalesce(partID,'NULL') +'~'+ 
coalesce(PartDescription,'NULL') +'~'+ 
 coalesce(ServiceTypeIDs,'NULL') +'~'+
 coalesce(Comment,'NULL') as DesiredStringFormat
FROM yourTableName 
```

当任何字段为 NULL 时，上述内容将替换单词“NULL”。

[http://msdn.microsoft.com/en-us/library/ms190349.aspx](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

# javascript - CSS：在 ie7 之后，jquery 模式

> ID：15028498
> 
> 赞同：2
> 
> 时间：2013-02-22T16:14:14.827
> 
> 标签：javascript, jquery, html, css

我试图解决这个问题：

我的菜单上有一个***:after***类，它显示了一个图像，并且在我使用这种方法后它运行良好：

[:after 和 :before IE 7 的 css 伪元素破解](https://stackoverflow.com/questions/4181884/after-and-before-css-pseudo-elements-hack-for-ie-7)

我添加了那里提到的 jquery：

[http://jquery.lukelutman.com/plugins/pseudo/](http://jquery.lukelutman.com/plugins/pseudo/)

在本地运行良好，但是当我在我的服务器中添加它时，它在主页（IE7）url-homepage/images/image.jpg 上运行良好。

...但是当我转到另一个页面时，伪路径是这样的：url-homepage/about/images/image.jpg ...我怎样才能防止这种情况..我假设它是 js 上的模式..

```
 var patterns = {
    text: /^['"]?(.+?)["']?$/,
    url: /url\(["']?(.+?)['"]?\)$/
};

function clean(content) {
    if(content && content.length) {
        var text = content.match(patterns.text)[1],
            url = text.match(patterns.url);
        return url ? '<img src="' + url[1] + '" />': text;
    }
} 
```

任何人都知道如何让它只去一个路径（/路径/图像/）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:25:48.407

看到你的 CSS 会很有趣，但如果没有，我猜你的内容应该是：

```
url(/images/image.jpg) 
```

*以斜杠*开头，以便路径从服务器的根目录开始（而不是相对于当前文件夹）。

编辑：所以，总而言之，我建议采用以下风格：

```
#yourElementId, #yourElementId:after {
    after: url(/images/image.jpg);      /* IE7 polyfill */
    content: url(/images/image.jpg);    /* css for other browsers */
} 
```

# wpf - DataTemplate.Triggers 与 Style.Triggers

> ID：15028500
> 
> 赞同：2
> 
> 时间：2013-02-22T16:14:21.470
> 
> 标签：wpf, data-binding

为了根据条件更改 ListBoxItem 前景，我可以通过 DataTemplate.Triggers 进行：

```
<ListBox.ItemTemplate>
<DataTemplate>
    ...
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Name}" Value="Item1">
            <Setter Property="ListBoxItem.Foreground" Value="Blue" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate>
</ListBox.ItemTemplate> 
```

或者，我可以在 Style.Triggers 里面做：

```
<ListBox.ItemContainerStyle>
<Style TargetType="{x:Type ListBoxItem}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Name}" Value="Item1">
            <Setter Property="Background" Value="Blue" />
        </DataTrigger>
    </Style.Triggers>
</Style>
</ListBox.ItemContainerStyle> 
```

问题：

我想知道这两种方法有什么区别？

有什么场景我应该使用一个而不是另一个？

每个最适合什么？

如果我同时应用它们，哪个触发器首先发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:28:02.800

在您的示例中，样式触发器将应用于所有列表框项目，而数据模板触发器将应用于使用数据模板的列表框项目。

WPF 的优点是有多种方法可以实现一个目标。对于您遇到的大多数问题，您将不得不使用触发器来获得答案。

通常，样式触发器用于更改样式，并且“通常”不会与数据交互（但是，我在 stackoverflow 中看到了两种方式都使用的代码）。如果我是你，因为你正在修改背景 - 我会使用带键的样式。

# ios - 打开大量的 NSURLConnections

> ID：15028520
> 
> 赞同：1
> 
> 时间：2013-02-22T16:15:18.337
> 
> 标签：ios, nsurlconnection, nsurlrequest

我正在制作的应用程序必须从许多不同的 url 中获取大量数据。比方说，大约 200 个 url，每个都有 50kb-300kb 的数据（图像）。

现在，我基本上是一次打开所有这些 url 连接，并让它们在完成时完成。

但是......我不太确定 NSURLConnection 在幕后到底在做什么。设置一个允许说.... 5 个连接的 NSURLConnection 队列会更好吗，当一个连接完成后，另一个连接会开始？

换句话说，将大量 NSURLConnections 排队，在旧连接完成时开始新连接，而不是同时进行所有连接，是否有优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:17:54.743

基本上一次打开它们会破坏线程调度程序，它最终会比批量执行要慢，并设置一次可以打开多少个限制。最好的方法是创建一个网络管理器来管理这个连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:21:04.243

根据我的一点经验，以及我在自己的应用程序中观察到的情况，我会说排队是最好的方式。看看 NSOperationQueue（[这里](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)有一个非常棒的教程）它将帮助您在专用队列中管理多个异步连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:25:54.430

这是一个普遍的问题，而不是 iOS，对于任何在线项目（例如网站）都是如此。如果您想听取他们的建议，大多数下载管理器将允许您同时下载 5-10 个下载并将其他人排队。

我建议使用`NSOperationQueue`并让 iOS 为您进行优化。并且不要忘记为您的请求设置超时，这样被阻止的请求就不会占用您的同时配额。

# scala - 要求类型是可实例化的，即不是特征/抽象

> ID：15028521
> 
> 赞同：3
> 
> 时间：2013-02-22T16:15:18.693
> 
> 标签：scala, mixins

说我有：

```
trait A

class B extends A

class C extends A 
```

有没有办法配置类型参数，例如：

```
class Foo[AType <: A with canCreateInstance]
    def newAType : AType = new AType 
```

这个想法是 Foo 只能采用实现 A 的类，如 B 或 C，但不能采用 A 本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:56:30.160

创建给定类型实例的最常见方法是使用工厂样式，如注释中提到的@bluenote10。

为此，我们首先创建一个工厂定义

```
// factory definition
trait CanCreateInstance[T] {
  def create: T
} 
```

然后，在我们的课程中，我们要求一个给定类型的工厂

```
class Foo[T <: A](implicit factory: CanCreateInstance[T]) {
  def newT: T = factory.create
} 
```

我们可以在伴生对象中添加一些默认工厂`CanCreateInstance`

```
object CanCreateInstance {
  // define default availble instance creators
  implicit def bFactory = new CanCreateInstance[B] {
    def create = new B
  }
} 
```

然后我们可以简单的像这样使用它

```
val fooB = new Foo[B]
val newB = fooB.newT 
```

如果我们需要`Foo`能够创建另一种类型的实例，我们可以简单地提供一个工厂。

```
implicit val cFactory = new CanCreateInstance[C] {
  def create = new C
}

val fooC = new Foo[C]
val newC = fooC.newT 
```

`Foo`如果默认工厂不可用，此构造允许任何用户提供工厂。例如，您也可以为工厂`A`提供

```
implicit val aFactory = new CanCreateInstance[A] {
  def create = new A {}
} 
```

如果您需要在运行时从未知类型创建实例而不创建工厂，则需要深入研究`TypeTag`. 相关信息可以在这里找到：[Scala：什么是 TypeTag 以及如何使用它？](https://stackoverflow.com/questions/12218641/scala-2-10-what-is-a-typetag-and-how-do-i-use-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:58:53.670

尝试给 trait 一个伴生对象。伴生对象将是返回 的实例的对象`AType`。

对于伴随对象的使用：

```
trait Queue[T]{
    def head:T
    def tail:Queue[T]
    def enqueue(x:T):Queue[T]
}

object Queue{
    def apply[T](xs: T*): Queue[T] = 
        new QueueImpl[T](xs.toList)

    private class QueueImpl[T](
        private val leading:List[T],
        private val trailing:List[T]=Nil
    ) extends Queue[T]
    {
       // methods in here
    }
} 
```

也许这更简单：

```
object A{

  def aType(...):A = new B(...)

  def aType(...):A = new C(...)

  /* classes */

  private class C(...) extends A

  private class B(...) extends A{
    // blah blah
  }

} 
```

# c# - 在 Asp.Net MVC 中使用 jQuery Ajax 绑定基于另一个列表框选择的列表框

> ID：15028522
> 
> 赞同：0
> 
> 时间：2013-02-22T16:15:19.087
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, visual-studio

我有这样的数据库结构； ![在此处输入图像描述](../Images/ec013b8f04a4a92d8c7b09d768f072af.png)

在我看来，我已经这样向他们展示了； ![在此处输入图像描述](../Images/cd06a4016edb22faef41d7d86004dcb3.png)

现在，我想要的是，如果有人选择类别，我应该调用 ajax 请求并发送到控制器，然后返回相关的即子类别（传入的 categoryId）并将它们显示在另一个列表框中。
注意：这是我的要求。我不需要使用下拉列表。我需要使用 ajax 调用来做到这一点。一点描述性的答案会很明显

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:50:50.857

一般流程 1\. 获取更改事件 2\. 调用控制器 - 我使用剃刀示例 3\. 获取数据 4\. 使用数据

```
$("#category").bind('change', function () {                  
                    if ($('#category').val().length != 0) {
                        //Send Value
                         $.ajax({                       
                        url: '@Url.Action("Action", "Controller")',
                        type: 'POST',
                        data: { category: $('#category').val()},   
            sucess : function(data) {
                //add the data to your sub category
            }                    
                        }),                           
                }); 
```

注意：只是一个示例代码，您需要更改以满足您的要求，如 Brian 提到的，请同时发布您已经完成的代码。

谢谢

# regex - 如何在指定数字后插入一个字符

> ID：15028526
> 
> 赞同：0
> 
> 时间：2013-02-22T16:15:38.990
> 
> 标签：regex, sed, awk

我想插入一个 | 在每行指定数量的字符之后，然后删除尾随空格。例如...

插入 | 在每行的第 11、15、27 和 46 个字符上。然后在每个 | 之前删除尾随空格

```
1234567890 123 blahblahblah              blahblahblah 
```

进入

```
1234567890|123|blahblahblah|blahblahblah 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:20:07.283

您真的想计算字符数，还是只想：

```
awk '{$1=$1}1' OFS=\| 
```

# android - 有没有办法从堆栈顶部获取片段？

> ID：15028527
> 
> 赞同：44
> 
> 时间：2013-02-22T16:15:39.007
> 
> 标签：android, android-fragments

我的 MainActivity 中有一个 ListFragment。这是我设置片段对象的方式。

```
FragmentManager fragmentManager = activity.getSupportFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
Fragment newFragment = new MyFragment();
fragmentTransaction.replace(R.id.framecontainer, newFragment, "tag");
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit(); 
```

问题是当用户按下后退按钮时，我至少必须通过调用来更改操作栏和菜单

```
getActionBar().setTitle(title);
getActionBar().setDisplayHomeAsUpEnabled(isEnabled);
invalidateOptionsMenu(); 
```

我必须知道当前正在显示什么样的片段，以便我知道如何设置操作栏。我将设置选项存储在片段中作为参数。

```
String title = fragment.getArguments().getString("KEY_TITLE");
boolean isEnabled = fragment.getArguments().getBoolean("KEY_ISENABLED"); 
```

我确实搜索了相关问题，我意识到我可以通过调用来获取片段

```
MyFragment fragment = (MyFragment) getSupportFragmentManager()
        .findFragmentByTag("tag"); 
```

但是，我必须将所有标签存储在自定义堆栈中，并在每次用户按下后退按钮时调用**pop()**`onBackPressed()`。

所以，我的问题是我***有没有办法直接从堆栈中获取当前可见的片段？***

注意：请记住，片段类型不同，而不仅仅是 MyFragment。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-22T16:31:32.157

这样的事情应该可以帮助您的活动在后台解决这个问题：

```
private Fragment getCurrentFragment(){
    FragmentManager fragmentManager = getSupportFragmentManager();
    String fragmentTag = fragmentManager.getBackStackEntryAt(fragmentManager.getBackStackEntryCount() - 1).getName();
    Fragment currentFragment = fragmentManager.findFragmentByTag(fragmentTag);
    return currentFragment;
}

@Override
public void onBackPressed() {
    Fragment fragmentBeforeBackPress = getCurrentFragment();
    // Perform the usual back action
    super.onBackPressed();
    Fragment fragmentAfterBackPress = getCurrentFragment();
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-04-05T13:05:16.620

```
FragmentManager.findFragmentById(fragmentsContainerId) 
```

[函数](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentById%28int%29)返回返回堆栈顶部`Fragment`的链接。使用示例：

```
 fragmentManager.addOnBackStackChangedListener(new OnBackStackChangedListener() {
        @Override
        public void onBackStackChanged() {
            Fragment fr = fragmentManager.findFragmentById(R.id.fragmentsContainer);
            if(fr!=null){
                Log.e("fragment=", f.getClass().getSimpleName());
            }
        }
    }); 
```

**编辑：**现在在 2018 年有[getFragments](https://developer.android.com/reference/android/app/FragmentManager#getFragments())方法，`FragmentManager`其中 return `List<Fragment>`。来自文档：`The order of the fragments in the list is the order in which they were added or attached`. 所以看起来我们可以从该列表中取出最后一个片段：

```
 List<Fragment> list = fragmentManager.getFragments();
     //get last one 
     Fragment topFragment = list.get(list.size() - 1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-10T16:20:46.137

看起来有些事情已经变得更好了，因为下面的代码对我来说非常适合，但我没有在已经提供的答案中找到它，也没有在相邻的问题中找到它。

科特林：

```
supportFragmentManager.fragments[supportFragmentManager.fragments.size - 1] 
```

爪哇：

```
getSupportFragmentManager().getFragments()
.get(getSupportFragmentManager().getFragments().size() - 1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-28T11:32:35.630

已经有一个标记为正确的答案，我的附加信息与此没有什么不同。但是，我在使用接收器时遇到了麻烦，试图弄清楚接收器所在的片段是否是堆栈上的当前顶部片段。你可以很容易地在很多 NPE 和 Index 中跑出界。因此我写了这个，也许它可以帮助某人。

```
private boolean isFragmentOnTop(Activity parentActivity, final String fragmentName){
        FragmentManager fmManager = parentActivity.getFragmentManager();
        if(fmManager.getBackStackEntryCount() == 0){
            LOG.i("BackStack entry count is 0: " + this);
            return false;
        }
        String fragmentNameOnStackTop = "";
        final FragmentManager.BackStackEntry topEntry = fmManager.getBackStackEntryAt(fmManager.getBackStackEntryCount() -1);
        if(topEntry != null) {
            fragmentNameOnStackTop = topEntry.getName();
        }
        LOG.d("Got fragments name: " + fragmentNameOnStackTop);
        return fragmentNameOnStackTop != null ? fragmentNameOnStackTop.equals(fragmentName) : false;
    } 
```

请注意，这适用于具有一些片段的活动。请注意，如果您使用 ViewPager 和 childfragmentmanager。

并且不要忘记将 fragmentName 设置为`FragmentTransaction.addToBackStack(fragmentName)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-17T07:06:38.760

这个辅助方法从栈顶获取片段：

```
public Fragment getTopFragment() {
    if (getSupportFragmentManager().getBackStackEntryCount() == 0) {
        return null;
    }
    String fragmentTag = getSupportFragmentManager().getBackStackEntryAt(getSupportFragmentManager().getBackStackEntryCount() - 1).getName();
    return getSupportFragmentManager().findFragmentByTag(fragmentTag);
} 
```

# c++ - 将 std::vector 划分为 N 对迭代器的最佳方法，范围为 `Y`

> ID：15028528
> 
> 赞同：1
> 
> 时间：2013-02-22T16:15:41.030
> 
> 标签：c++, iterator, stdvector

我有一个*巨大*的向量，我需要在不同的线程中处理，所以我没有使用相同的数据创建 N 个不同的向量，而是考虑使用迭代器。我已经设法编写代码，但在我看来它可以缩短或改进。

```
 Iterator begin = vec.begin();
        Iterator end;
        Iterator endOfVector = vec.end(); 

        while(end != endOfVector){
            end = begin;

            advance(end, elementsPerThread);
            if (end > endOfVector){
                end = endOfVector;
            }

            iteratorPairs.push_back( std::make_pair(begin, end) );

            begin = end;
        } 
```

我已经习惯了 C++/Qt 编程，但是说到 std:: 我觉得我还有很多东西要学。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:06:15.843

我想我会做一些不同的事情。不是每次都检查我们是否已经通过了向量的末尾，我可能会从计算将要适合的对数开始。只要我们能做到这一点，我们不妨尽可能地适应它们——例如，假设我们每个线程最多有 100 个元素，总共有 550 个元素。按照您的操作方式，我们最终会得到 5 个范围，每个范围 100 个元素，以及一个范围 50 个元素。

如果我们总共有 6 个范围，我们通常宁愿在这 6 个范围上尽可能均匀地分配工作负载，所以我们在每个范围内执行 550/6 = 91 或 92 个元素（以及一个具有奇数大小的范围弥补差额）。

```
typedef std::vector<int>::iterator it;   
typedef std::pair<it, it> p;

std::vector<p> split(std::vector<int> const &v, size_t elementsPerThread) {
    std::vector<p> ranges;

    size_t range_count = (v.size()+1) / elementsPerThread+1;
    size_t ePT = v.size() / range_count;

    size_t i;

    it b = v.begin();

    for (i=0; i<v.size()-ePT; i+=ePT)
        ranges.push_back(std::make_pair(b+i, b+i+ePT));

    ranges.push_back(std::make_pair(b+i, v.end()));
    return ranges;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:02:19.417

你遇到的问题是

```
advance(end, elementsPerThread); 
```

原因是 Advance 会超出向量的末尾，从而导致未定义的行为。我会替换

```
 advance(end, elementsPerThread);
        if (end > endOfVector){
            end = endOfVector;
        } 
```

和

```
advance(end,std::min(elementsPerThread,endOfVector - end)); 
```

然后Advance不会超过向量的末尾

# c++ - 在 C 中填充 2D 动态分配的数组

> ID：15028529
> 
> 赞同：0
> 
> 时间：2013-02-22T16:15:42.520
> 
> 标签：c++, c, arrays, matrix, 2d

有谁知道如何在 C 中填充二维（动态）数组？我有这个：

```
double** A;
A = ( double** )malloc( 2*sizeof( double* ));
for (int i = 0; i < 2; i++ ) A[i] = ( double* )malloc( 3 );
A[0][0] = 1;
A[0][1] = 2;
A[0][2] = 3;
A[1][0] = 4;
A[1][1] = 5;
A[1][2] = 6;       
printf("%d", A[1][1]); 
```

但它只打印零……：/

有人帮忙吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:17:21.367

那

```
for (int i = 0; i < 2; i++ ) A[i] = ( double* )malloc( 3 ); 
```

分配三个*字节*给`A[i]`. 你需要

```
for (int i = 0; i < 2; i++ ) A[i] = ( double* )malloc( 3 * sizeof(double) ); 
```

由于您分配的空间不足，因此数组的填充会写入分配的内存之外，并且会调用未定义的行为。

和

```
printf("%d", A[1][1]); 
```

尝试`double`使用 a 的转换格式打印 a `int`，这也会调用未定义的行为。您需要使用（或，或其他）转换打印`double`s ，`%f``%g``%e`

```
printf("%f", A[1][1]); 
```

是你（可能）想要的。

在这种情况下会发生两件常见的事情是

*   在`double`浮点寄存器中传递，但`printf`读取通用寄存器（x86_64 上常见）
*   `printf`读取组成的部分字节`double`并将它们解释为`int`（在 32 位 x86 上常见），因为`double`您存储的值是整数，有效数字有许多零位，然后在小端系统上，`printf`读取的位是全部为零。

# objective-c - OS X 如何在日期更改时更新相对日期显示？

> ID：15028532
> 
> 赞同：1
> 
> 时间：2013-02-22T16:15:48.610
> 
> 标签：objective-c, macos, nsdateformatter

我的应用程序使用默认系统存储上次数据更新的日期和时间。

我的窗口有一个绑定到该值的文本框。此文本框还附加了一个日期格式化程序。全部通过界面生成器完成。日期格式设置为使用相对日期。

数据仅在白天更新，每次有新数据到达时，文本字段都会完美更新。所以我得到类似的东西：

今天 09:30 今天 09:35 今天 09:40 … 今天 17:40

17:40 将是当天的最后一次数据更新。

问题是，一旦到了午夜，它仍然会显示 Today, 17:40，而应该显示 Yesterday, 17:40。

如果我退出并重新打开应用程序，它会显示昨天，17:40。

我想我需要告诉一些东西来刷新，但我不确定是什么，我找不到一个例子。

1) 显然你可以发送假的 willChangeValueForKey 和 didChangeValueForKey 通知，但很多人说这是不正确的。

2）我尝试在午夜后将用户默认值设置为自身，但这并没有触发更改。

3）我尝试将用户默认值设置为 nil 然后在午夜后返回，但这也不起作用。

我确信有一种正确而简单的方法可以做到这一点，但我找不到它。

我需要触发什么？我需要触发哪个对象？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:21:57.770

> 1) 显然你可以发送假的 willChangeValueForKey 和 didChangeValueForKey 通知，但很多人说这是不正确的。

我会说你可以使用这种方式。这种方式没什么不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:23:23.843

您需要使用计时器更新该显示...执行以下操作：

（在你的 viewDidLoad 中，可能）

```
[NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(refreshDisplay) userInfo:nil repeats:YES]; 
```

...然后您只需构建一个新方法来刷新您的时间字段

```
- (void)refreshDisplay {
    // do something to refresh your text label based on relative date
} 
```

# ruby - Marshal 加载 Hash 子类的 marshal 转储实例

> ID：15028534
> 
> 赞同：0
> 
> 时间：2013-02-22T16:15:50.893
> 
> 标签：ruby, serialization, marshalling

我无法管理哈希子类`Marshal.load`的`Marshal.dump`ed 实例：

```
class MarshalDumpableHash < Hash

  def initialize(constructor = {})
    if constructor.is_a?(Hash)
      super()
      update(constructor)
    else
      super(constructor)
    end
  end

  def marshal_dump
    p self
    self
  end

  def marshal_load(hash)
    p hash
    update(hash)
  end

end

h = { asd: 'ciao' }

p MarshalDumpableHash.new(h) #=> {:asd=>"ciao"}
p Marshal.dump(MarshalDumpableHash.new(h)) #=> "\x04\bU:\x18MarshalDumpableHash@\x00"

p Marshal.load(Marshal.dump(MarshalDumpableHash.new(h))) #=> {} WHY? 
```

方法内部打印，而方法`p self`内部打印的对我来说听起来很奇怪`marshal_dump``{:asd=>"ciao"}``marshal_load``{}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:32:33.307

`marshal_dump`返回的方法`self`不是使用`marshal_dump`and的用例`marshal_load`，因为内置的转储和加载可以做到这一点。所以如果你只是想编组`self`，你不必编写任何自定义`marshal_dump`或`marshal_load`。

```
class Subclassed < Hash
end

s = Subclassed.new
s[:foo] = :bar
Marshal.load(Marshal.dump(s)).class #=> Subclassed 
```

这些方法适用于当您在加载转储对象时确实有关于不想重新加载的对象的多余信息的用例。这是为了节省空间。例如：

```
class Subclassed < Hash

  attr_reader :surplus_info

  def initialize(surplus_info)
    @surplus_info = surplus_info
  end

  def marshal_dump
    Hash.new.merge(self)
  end

  def marshal_load other
    update(other)
  end
end 
```

如果没有`marshal_dump`和`marshal_load`，则生成的编组字符串将是：

```
"\004\bIC:\017Subclassed{\006:\bfoo:\bbar\006:\022@surplus_info\"\bfoo" 
```

其中有多余的信息。使用编组加载和转储，您将能够减少编组字符串：

```
"\004\bIU:\017Subclassed{\006:\bfoo:\bbar\000" 
```

这就是这些方法的目的。此外，[红宝石文档](http://www.ruby-doc.org/core-1.9.3/Marshal.html#method-c-load)指出：

> marshal_dump 可能会导致更小的 Marshal 字符串。

此外，该文档对使用有点模糊`marshal_dump`：

> 转储对象时，将调用 marshal_dump 方法。marshal_dump 必须返回包含 marshal_load 重构对象所需信息的结果。结果可以是任何对象。

它可能应该是“结果可以是除`self`”之外的任何对象。我不知道红宝石在返回时显示的行为`self`是否`marshal_dump`真的是故意的（至少一个错误会很好），或者它是否只是被遗忘了，因为它不是真正的用例。

# oracle - 使用 select 语句重命名表的 PL/SQL 脚本

> ID：15028542
> 
> 赞同：2
> 
> 时间：2013-02-22T16:16:13.150
> 
> 标签：oracle, plsql, alter-table

嘿，我的任务是编写一个脚本来重命名表。尽管这听起来很容易，但还有一些其他的事情需要记住。有一个表包含需要更改名称的所有其他表。表中的某些内容由 3 列组成，第一列是未分区的nm，第二列是 originalnm，第三列是已分区的tablenm。有人告诉我使用 select 语句来选择两个表，然后使用这些表来更改名称。这是我到目前为止所拥有的：

```
declare
begin
  execute immediate 'select unpartitiontablenm "table1", originaltablenm "table2"
                     from tabletransformation                     
                     alter table table1
                     rename to table2';
end; 
```

现在我尝试向他发送其他方法来执行此操作，例如重命名参数和一个简单的脚本来接受他想要重命名的两个表，但所有他不想要的表。也许我只是不明白为什么这种方式更好，但是哦，好吧，当你需要薪水时你能做什么。无论如何，我需要一些帮助来准确了解他希望我做什么以及我离它有多远。提前致谢。

*我理解上面的代码是错误的，但它可能会让你更好地理解他是如何向我描述的。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:29:46.277

听起来你想要类似的东西

```
DECLARE
  l_sql_stmt VARCHAR2(4000);
BEGIN
  FOR i IN (SELECT unpartitiontablenm, originaltablenm 
              FROM tableTransformation)
  LOOP
    l_sql_stmt := 'ALTER TABLE ' || i.unpartitiontablenm|| 
                  ' RENAME TO ' || i.originaltablenm ;
    EXECUTE IMMEDIATE l_sql_stmt;
  END LOOP;
END; 
```

# windows - 用于从 IIS 访问证书存储的 Windows 2008 R2 权限

> ID：15028545
> 
> 赞同：0
> 
> 时间：2013-02-22T16:16:16.960
> 
> 标签：windows, iis, certificate, storage

我正在创建需要客户端证书进行身份验证的 Web 应用程序。之后，用户必须用他的私钥签署一些文本并将其发送到服务器。收到数据后，我需要使用用户打开的密钥对其进行解密，该密钥已经存储在“其他人”证书存储的服务器上。我还需要检查此用户的证书是否在“不受信任的商店”中。这是我的 C# 代码。

```
X509Store store = new X509Store(StoreName.My);
store.Open(OpenFlags.ReadOnly);
int Count = store.Certificates.Count;
foreach (X509Certificate2 mCert in store.Certificates)
{
    ClientName2 = mCert.Subject;
}

        store.Close(); 
```

但是在我运行它之后，在个人商店中找不到任何证书。但我在 certmgr.msc 看到 tham 其他商店也有类似的情况——有些证书可以访问，有些则不能。我认为 ApplicationPoolIdentity 的 Windows 2008 r2 服务器权限不允许获取公共用户的证书。但我可能是错的......你能告诉我如何检查来自 iis 的存储访问权限吗？或者也许我需要使用其他方法？

2013 年 2 月 24 日（编辑）：是的，这个问题似乎是由 IIS 权限引起的。如果我使用相同的代码运行控制台应用程序，一切正常。每个人都知道如何在 windows 2008 r2 上设置证书存储的读取权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:37:36.130

这是我在发布此问题后几天发现的解决方案。我的代码中有几个问题，但对于这个问题，我需要注意添加证书的位置。

我在 certmgr.msc 和 IE 中添加了证书。它们被自动添加到**用户证书存储中，但 IIS 在****计算机证书存储**中查找证书！因此，当我从当前用户应用程序运行控制台应用程序时，请查看用户证书。而 IIS 则看其他地方。如果您希望您的证书在 IIS 上可见，请通过 mmc 控制台将它们添加到本地计算机存储中。

# c# - 写入后何时将 CPU 缓存行刷新到内存？

> ID：15028547
> 
> 赞同：6
> 
> 时间：2013-02-22T16:16:20.517
> 
> 标签：c#, caching, cpu-cache

我正在使用 C# 并希望尽可能避免`unsafe`使用代码。如果我有一个大小可以填充缓存行的对象或数组，并且我想写入对象的每个字段或数组的索引，CPU 是否会在刷新写入行之前等待所有写入发生或当只有一个或几个写入发生时，它会提前刷新吗？

如果我只想在对行的所有写入发生后才进行刷新，我是否应该在例程结束时快速连续地执行所有写入？我知道 CPU 和缓存一致性协议可能对此有所不同，我正在寻找一个普遍正确的经验法则答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:13:02.103

> CPU会在刷新写入行之前等待所有写入发生还是会在仅发生一个或几个写入时提前刷新？

CPU 可能会提前刷新该行，但前提是该集合受到属于高速缓存的其他访问的高压。这不太可能。缓存的结构有助于避免过早刷新最近访问的数据。

> 我应该在例程结束时快速连续地完成所有写入吗？

一般来说是的。 *时间局部性*很重要，这意味着当访问按时间紧密分组时，缓存性能最佳。其他技巧也可能适用。例如，您可以尝试通过在所需写入之前对您的结构进行虚拟写入来“加热”高速缓存行。这允许一些内存级别的并行性，其中核心在执行干预代码的同时加载缓存行。当您执行真正的写入时，缓存行在 L1 中准备就绪的机会会更好。

**通常，对代码中的不自然行为要非常谨慎，以提高缓存性能。** 缓存做得很好，只是留给自己。您应该*始终*在任何更改之前和之后衡量性能。你认为可能是一种改进实际上可能会受到伤害。如果您的程序是多线程的，那么另一个大罐蠕虫会与内核之间的缓存争用有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:52:51.550

自然，CPU 会尝试尽可能少地访问内存，但这并不一定意味着“您的”内存块将保留在缓存中，只要您愿意。

通常，内存块将被读取一次并写入一次，但不能保证这一点。可能会发生某些事情会中断您的代码，并且系统可能会决定刷新该缓存行以为其他内容腾出空间。整个内存区域甚至可以完全从内存中删除并刷新到磁盘，这样当您的代码继续运行时，它会导致页面错误，从而再次加载内存。

让您的写入时间更近当然会使内存更有可能在该操作期间保留在缓存中。

# java - Spring Task Executor 在前一个任务完成之前不会触发

> ID：15028548
> 
> 赞同：2
> 
> 时间：2013-02-22T16:16:23.987
> 
> 标签：java, spring, scheduled-tasks, task, spring-annotations

我在具有@Scheduled 注释的类中有一个方法

```
@Scheduled(cron = "* * * * * *")
public void doSomething() {

} 
```

这应该每秒执行一次（假设 cron 语句是正确的）。

我将 sping 配置设置为

```
<task:scheduler id="taskScheduler" pool-size="2" />
<task:executor id="taskExecutor" pool-size="2" />
<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler" /> 
```

问题是该方法在最后一次执行完成之前不会再次触发。我期待看到它触发两次（并且可能开始在某个地方填满工作队列）。

如何消除方法调用之间的依赖关系，但仍确保一次只运行 2 个进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:41:11.200

It seems an idea would be to past the actual work to the taskExecutor

```
@Scheduled(cron = "* * * * * *")
 public void doSomething() {
   this.executor.execute(new Runnable() {...}
 } 
```

then add a rejection policy as *CALLER_RUNS*

```
<task:scheduler id="taskScheduler" pool-size="1" />
<task:executor id="taskExecutor" pool-size="1"
    queue-capacity="1" rejection-policy="CALLER_RUNS" />
<task:annotation-driven executor="taskExecutor"
    scheduler="taskScheduler" /> 
```

So with above, the work is always done by one thread pool.

not sure if this is the best way thou.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T20:42:43.723

由于调度程序线程正忙于运行您的任务，因此不会触发新的执行。

为了实现您要求的行为是将任务委托给执行线程。最简单的方法是简单地使用 @Async 注释该方法。

```
@Scheduled(cron = "* * * * * *")
@Async
public void doSomething() {
   ...
} 
```

但请记住，您必须将任务执行器池大小调整到所需的容量，以便容纳足够的并行运行的执行器线程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T10:17:19.443

您可以尝试使用[`@Scheduled`](http://static.springsource.org/autorepo/docs/spring/3.2.0.M1/api/org/springframework/scheduling/annotation/Scheduled.html)with `fixedRate`-value 而不是`cron`or `fixedDelay`：

> **fixedRate** 在调用之间以固定的时间间隔执行带注释的方法。
> 
> **fixedDelay** 在最后一次调用结束和下一次调用开始之间的固定时间段内执行带注释的方法。

使用**fixedRate ，该方法的另一次执行被安排在最后一次任务***开始*之后的一定时间发生。

使用**fixedDelay时，下一次调用会在最后一次任务***结束*之后的一定时间发生。

自然，您的线程池必须有另一个空闲线程才能按时运行任务（如果前一个仍在执行）。

# javascript - 从 getCurrentPosition 返回“位置”数据。Phonegap，HTML5，Javascript

> ID：15028550
> 
> 赞同：1
> 
> 时间：2013-02-22T16:16:26.667
> 
> 标签：javascript, html, jquery-mobile, geolocation

好吧，对不起所有的日志记录我一直试图弄清楚如何返回整个对象的位置。所以我可以稍后在调用 getCurrentPosition 的函数中访问其中的项目。这是我正在尝试做的模拟。谢谢你的帮助！

```
 function aFunctionName(){   
    pos = navigator.geolocation.getCurrentPosition(onGeoSuccess, geoFail);
    cameraLat = pos.coords.latitude;
     \\cannot read property coords
     console.log(cameraLat);
    cameraLong = pos.coords.longitude;
     \\cannot read property coords
     console.log(cameraLong);
    cameraTimestamp = pos.timestamp;
     console.log(cameraTimestamp)
     \\Cant read property timestamp
}

function onGeoSuccess(position) {
    cameraLati = position.coords.latitude;
     console.log(cameraLati);
     \\works fine and displays the lat
    cameraLongi = position.coords.longitude;
     console.log(cameraLongi);
     \\works fine and displays the long
    cameraTimestampi = position.timestamp;
     console.log(cameraTimestampi);
     \\works fine and displays the timestamp
   return position;
}
function onGeofail() {
  console.log("error");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:34:53.323

**对getCurrentLocation**的调用不是同步操作，因此您将无法执行您正在尝试的操作。但是，您传入了一个**onGeoSuccess**函数，并且可能获得了一个有效的位置。您不能在该功能中执行您需要执行的操作吗（事实上，正如您正在做的那样）？

**[根据新信息更新]** 好的，所以如果您需要在成功函数中添加一些额外变量，请尝试以下操作：

```
function saveDataWithPosition(data1, data2, data3, etc.){
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            function (position) {   
                // Insert data
                // Here you'll have access to your data params
                // and the position obj
            }, function (error) {               
                // Handle the error how you wish
            }, {
                enableHighAccuracy: true
            }
        );
    }
} 
```

我希望这会有所帮助，更重要的是，我希望它有效。

# jsf-2 - 确定调用 bean 方法的 p:autoComplete 组件

> ID：15028553
> 
> 赞同：1
> 
> 时间：2013-02-22T16:16:38.873
> 
> 标签：jsf-2, primefaces, managed-bean

我`<p:autoComplete>`在一个方面有两个 PrimeFaces 组件，每个组件都由一个`id`属性标识，并且它们的`completeMethod`方法绑定到同一个托管 bean 方法。我无法更改这 2 个方法绑定。

我想知道是否可以检索调用托管 bean 方法`id`的`<p:autoComplete>`组件以进行不同的处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:31:13.123

您可以使用[`UIComponent#getCurrentComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getCurrentComponent%28javax.faces.context.FacesContext%29)从 EL 范围中获取当前正在处理的组件。

```
UIComponent component = UIComponent.getCurrentComponent(FacesContext.getCurrentInstance());
// ... 
```

它允许您使用例如[`UIComponent#getId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getId%28%29)来确定组件 ID。

# jquery - 鼠标悬停显示链接的适当 div

> ID：15028562
> 
> 赞同：0
> 
> 时间：2013-02-22T16:17:02.973
> 
> 标签：jquery, html, hidden

我需要让每个 div 链接使适当的 div 文本出现在页面底部。我已经部分设置了它，但我想知道是否有更好的方法来流线此代码。

```
 <script type="text/javascript">
    $(function () {
        $('#item1').hover(
        function () {
            $('#Tile1').fadeIn( 'fast' );
        }, 
        function () {
            $('#Tile1').fadeOut( 'fast' );
        });
    });

    $(function () {
        $('#item2').hover(
        function () {
            $('#Tile2').fadeIn( 'fast' );
        },
        function () {
            $('#Tile2').fadeOut( 'fast' );
        });
    });
</script>
 <div class="four columns alpha">
     <a href="solutions/mobile.php" id="item1">
     <img src="images/1.png" alt="" class="tiles" /></a>
 </div>
 <div id="Tile1" class=" sixteen columns" style="display: none;">
     <h3 class="center">GIS / Mapping</h3>
     <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas id justo 
     </p>
</div> 
```

Div 没有嵌套，因为无论您将鼠标悬停在哪个链接上，我都希望文本始终出现在页面底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:24:15.977

`$(function(){ ... }`不需要对每个函数重复，可以使用诸如减少`fadeToggle()`代码量的函数：

```
$(function () {
    $("div[id^='item']").hover(function(){
        var selector = '#Tile' + $(this).attr('id').replace('item', '');
        $(selector).fadeToggle('fast');
    });
}); 
```

这假设您的 ID 始终采用以下格式：`item(N)`映射到`Title(N)`.

第二行选择 ID 以开头的所有元素，随后`item`的行选择 ID 之后`item`并使用它来选择适当的`<div>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:27:33.563

如果我理解正确的话。您想在div`<div>`旁边显示内容。`<a>`你可以试试。

```
$(function () {
    $('[id^=item]').hover(function(){
        $(this).parent().next().fadeToggle();
    });
}); 
```

# arrays - 获取 Bash 数组中某个值的索引

> ID：15028567
> 
> 赞同：75
> 
> 时间：2013-02-22T16:17:13.547
> 
> 标签：arrays, bash, indexing

我有类似的`bash`东西

```
myArray=('red' 'orange' 'green') 
```

我想做类似的事情

```
echo ${myArray['green']} 
```

在这种情况下会输出`2`. 这是可以实现的吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-22T16:30:09.900

这将做到：

```
#!/bin/bash

my_array=(red orange green)
value='green'

for i in "${!my_array[@]}"; do
   if [[ "${my_array[$i]}" = "${value}" ]]; then
       echo "${i}";
   fi
done 
```

显然，如果你把它变成一个函数（例如 get_index() ） - 你可以让它通用

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-22T16:32:01.657

您必须在使用前声明您的数组

```
declare -A myArray
myArray=([red]=1 [orange]=2 [green]=3)
echo ${myArray['orange']} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-22T16:28:14.557

不可以。您只能用 in 中的整数索引一个简单数组`bash`。关联数组（在`bash`4 中介绍）可以通过字符串进行索引。但是，如果没有专门构造的关联数组，它们不会提供您要求的反向查找类型。

```
$ declare -A myArray
$ myArray=([red]=0 [orange]=1 [green]=2)
$ echo ${myArray[green]}
2 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-06-17T15:00:09.263

还有一种棘手的方法：

```
echo ${myArray[@]/green//} | cut -d/ -f1 | wc -w | tr -d ' ' 
```

你得到 2 [这里是参考](https://superuser.com/a/778840/342613)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-23T06:39:20.427

A little more concise and works in Bash 3.x:

```
my_array=(red orange green)
value='green'

for i in "${!my_array[@]}"; do
   [[ "${my_array[$i]}" = "${value}" ]] && break
done

echo $i 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-01-03T08:48:45.617

另一个棘手的单线：

```
index=$((-1 + 10#0$(IFS=$'\n' echo "${my_array[*]}" | grep --line-number --fixed-strings -- "$value" | cut -f1 -d:))) 
```

特征：

*   支持带空格的元素
*   `-1`找不到时返回

警告：

*   要求`value`为非空
*   难以阅读

* * *

通过按执行顺序分解来解释：

```
IFS=$'\n' echo "${my_array[*]}" 
```

将数组扩展分隔符 ( `IFS`) 设置为新行字符并扩展数组

```
grep --line-number --fixed-strings -- "$value" 
```

grep 匹配：

*   显示行号（`--line-number`或`-n`）
*   使用固定字符串（`--fixed-strings`或`-F`；禁用正则表达式）
*   `-`允许以( `--`)开头的元素

    剪切-f1 -d：

仅提取行号（格式为`<line_num>:<matched line>`）

```
$((-1 + 10#0$(...))) 
```

减 1，因为行号是 1 索引的，数组是 0 索引的

*   如果`$(...)`不匹配：

    *   不返回任何内容并`0`使用默认值 ( `10#0`)
*   如果`$(...)`匹配：
    *   行号存在 & 以`10#0`;为前缀 即`10#02`, `10#09`,`10#014`等
    *   `10#`前缀强制使用base-10/十进制数字而不是八进制

* * *

* * *

使用`awk`代替`grep`, `cut`& bash 算术：

```
IFS=$'\n'; awk "\$0 == \"${value//\"/\\\"}\" {print NR-1}" <<< "${my_array[*]}" 
```

特征：

*   支持带空格的元素
*   支持空元素
*   在子 shell 中打开的命令更少

警告：

*   `找不到时返回`

 `* * *

通过按执行顺序分解来解释：

```
IFS=$'\n' [...] <<< "${my_array[*]}" 
```

将数组扩展分隔符 ( `IFS`) 设置为新行字符并扩展数组

```
awk "\$0 == \"${value//\"/\\\"}\" {print NR-1}" 
```

匹配整行并打印以 0 为索引的行号

*   `${value//\"/\\\"}``$value`用转义版本替换双引号
*   因为我们需要变量替换，所以这个段的转义比想要的多

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-12T11:28:47.500

这可能只适用于数组，

```
my_array=(red orange green)
echo "$(printf "%s\n" "${my_array[@]}")" | grep -n '^orange$' | sed 's/:orange//' 
```

输出：

```
2 
```

如果要在 tsv 文件中查找标头索引，

```
head -n 1 tsv_filename | sed 's/\t/\n/g' | grep -n '^header_name$' | sed 's/:header_name//g' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-13T18:08:54.477

我喜欢那个解决方案：

```
let "n=(`echo ${myArray[@]} | tr -s " " "\n" | grep -n "green" | cut -d":" -f 1`)-1" 
```

变量 n 将包含结果！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-15T20:01:49.153

正如 chepner 所示，这只是另一种初始化关联数组的方法。不要忘记您需要显式`declare`或键入具有`-A`属性的关联数组。

```
i=0; declare -A myArray=( [red]=$((i++)) [orange]=$((i++)) [green]=$((i++)) )
echo ${myArray[green]}
2 
```

这消除了对值进行硬编码的需要，并使您不太可能最终得到重复值。

如果您有很多值要添加，则将它们放在单独的行上可能会有所帮助。

```
i=0; declare -A myArray; 
myArray+=( [red]=$((i++)) )
myArray+=( [orange]=$((i++)) )
myArray+=( [green]=$((i++)) )
echo ${myArray[green]}
2 
```

假设您想要一组数字和小写字母（例如：用于菜单选择），您也可以这样做。

```
declare -a mKeys_1=( {{0..9},{a..z}} );
i=0; declare -A mKeys_1_Lookup; eval mKeys_1_Lookup[{{0..9},{a..z}}]="$((i++))"; 
```

如果你然后运行

```
echo "${mKeys_1[15]}"
f
echo "${mKeys_1_Lookup[f]}"
15 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-22T00:50:35.907

```
myArray=('red' 'orange' 'green')
echo ${myArray[@]}
arrayElementToBeRemoved='orange'
echo "removing element: $arrayElementToBeRemoved"
# Find index of the array element (to be kept or preserved)
let "index=(`echo ${myArray[@]} | tr -s " " "\n" | grep -n "$arrayElementToBeRemoved" | cut -d":" -f 1`)-1"
unset "myArray[$index]"
echo ${myArray[@]} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-18T04:02:16.833

在 zsh 你可以做

```
xs=( foo bar qux )
echo ${xs[(ie)bar]} 
```

请参阅 zshparam(1) 小节下标标志

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-03T01:22:00.120

这显示了一些返回数组成员索引的方法。该数组对第一个和最后一个索引使用不适用的值，以提供从 1 开始的索引并提供限制。

while 循环是一种有趣的迭代方法，带有截止，目的是为数组值生成索引，循环体只包含一个用于空操作的冒号。重要的部分是 i 的迭代，直到匹配或超过可能的匹配。

函数 indexof() 会将文本值转换为索引。如果一个值不匹配，该函数将返回一个错误代码，该代码可用于测试以执行错误处理。与数组不匹配的输入值将超出范围限制`(-gt, -lt)`测试。

有一个循环好/坏值的测试（主代码），前 3 行被注释掉，但尝试一些变化来查看有趣的结果（`lines 1,3 or 2,3 or 4`）。我包含了一些考虑错误条件的代码，因为它很有用。

最后一行代码调用具有已知良好值“green”的函数 indexof，它将回显索引值。

```
indexof(){
  local s i;

  #   0    1   2     3    4
  s=( @@@ red green blue @o@ )

  while [ ${s[i++]} != $1 ] && [ $i -lt ${#s[@]} ]; do :; done

  [ $i -gt 1 ] && [ $i -lt ${#s[@]} ] || return

  let i--

  echo $i
};# end function indexof

# --- main code ---
echo -e \\033c
echo 'Testing good and bad variables:'
for x in @@@ red pot green blue frog bob @o@;
do
  #v=$(indexof $x) || break
  #v=$(indexof $x) || continue
  #echo $v
  v=$(indexof $x) && echo -e "$x:\t ok" || echo -e "$x:\t unmatched"
done 

echo -e '\nShow the index of array member green:'
indexof green 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-11T19:04:08.527

我想要类似的东西并避免循环，想出了......

```
myArray=('red' 'orange' 'green')
declare -p myArray | sed -n "s,.*\[\([^]]*\)\]=\"green\".*,\1,p" 
```

...如果找不到该元素，则 stdout 不会受到污染...

```
$ myArray=('red' 'orange' 'green')
$ declare -p myArray | sed -n "s,.*\[\([^]]*\)\]=\"green\".*,\1,p"
2

$ declare -p myArray | sed -n "s,.*\[\([^]]*\)\]=\"gren\".*,\1,p"
$ 
```

之后我用谷歌搜索，发现了这个问题并认为我会分享；）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-09T22:26:29.397

这个输出字符“Molly”的基于 1 的 NEUROMANCER 索引；）

```
get_index() {

  declare -n dummy_array="$1"
  # alternative: split read -ra array <<< "${dummy_array[@]}"
  local array=( "${dummy_array[@]}" )
  # alternative: local value; value="$( for dummy_value; do true; done; echo "$dummy_value" )"
  local value=$2
  local length="${#array[@]}"
  local i=0

  while (( i < length ))
  do
    if [ "${array[$i]}" = "$value" ]
    then echo $(( i + 1 )); return 0
    fi; (( i++ ))
  done

  echo "$2 not found beneath $1"
  exit 1

}

NEUROMANCER=(Case Molly Riviera)
get_index NEUROMANCER Molly
get_index NEUROMANCER 'John Doe' 
```

如果你然后运行：

```
$ bash script.sh
2
John Doe not found beneath NEUROMANCER 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-20T21:34:23.003

```
function array_indexof() {
  [ $# -lt 2 ] && return 1
  local a=("$@")
  local v="${a[-1]}"
  unset a[-1]
  local i
  for i in ${!a[@]}; do
    if [ "${a[$i]}" = "$v" ]; then
      echo $i
      return 0 # stop after first match
    fi
  done
  return 1
}

a=(a b c d)
i=$(array_indexof "${a[@]}" d)
echo $i # 3 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-15T12:16:10.317

这将输出查询的从 0 开始的数组索引（此处为“橙色”）。

```
echo $(( $(printf "%s\n" "${myArray[@]}" | sed -n '/^orange$/{=;q}') - 1 )) 
```

如果查询未出现在数组中，则上述输出`-1`。

如果查询在数组中出现多次，则上面输出查询第一次出现的索引。

由于这个解决方案调用了 sed，我怀疑它能否在效率上与这个线程中的一些纯 bash 解决方案竞争。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2019-03-02T10:20:41.550

简单的解决方案：

```
my_array=(red orange green)
echo ${my_array[*]} | tr ' ' '\n' | awk '/green/ {print NR-1}' 
````

# java - 为什么要为 Spring 控制器使用服务层而不是辅助类？

> ID：15028568
> 
> 赞同：3
> 
> 时间：2013-02-22T16:17:16.680
> 
> 标签：java, spring, model-view-controller

以我的经验，这就是我看到使用弹簧控制器的方式：定义一个弹簧控制器，它将某种类型的值返回到表示层。控制器请求映射方法调用服务层。服务层本身由接口和实现组成。服务接口始终只包含一种方法，因此它并不是真正的多态，因为它始终保持“一种形式”。服务实现可以访问某种类型的数据，可能来自 DAO 并将其返回给控制器。控制器可以在将其返回到表示层之前稍微修改此数据。

在这种情况下有一个接口有什么意义？我从来没有遇到过从多个控制器调用的 spring 服务实现，那么为什么是接口呢？

使用执行服务实现操作的辅助控制器类不是更有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:24:51.727

使用服务层是有益的，因为它允许将业务逻辑与控制器任务进行良好的逻辑分离。在 Service 类中，您可以封装与某些方面相关的业务逻辑，例如`PaymentService`. 在 PaymentService 中，您可以实现各种方法，例如`cardPayment(), paypalPayment(), refund()`. 不同的控制器将使用一个单一的服务。而且，服务层也便于代码复用。

如果您稍后决定使用一些 AOP 功能，在控制器和服务之间添加一些逻辑（例如日志记录）而不更改其代码，则使用接口很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:26:10.453

你是对的 - 服务接口往往是特定于用例的，但是仍然有一些很好的理由来创建接口：

*   它只是很好的做法。例如，它允许在服务的新实现中进行交换。通过 IDE 提取接口确实没有成本或负面影响。
*   允许将[DynamicProxies](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html)用于事务管理、安全问题等。动态代理比 cglib 代理更快，并且它们不需要默认构造函数。. . 此外，在过去，具体对象上的代理有时可能会不稳定，但 DynamicProxies 非常简单，几乎没有出错的余地。
*   正如 Luke Taylor 提到的，它简化了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:24:08.270

使用接口的一个很好的理由是用于测试。如果你想单独测试你的控制器，那么使用接口对模拟或存根最有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T01:47:10.627

我认为接口是一个好主意，因为它可以让您将业务逻辑保留在实现中，而不必担心如何远程公开它。您可以使接口成为 REST 或 SOAP 服务、EJB 或任何您想要的。输入和输出数据不会改变业务逻辑。它使它与控制器完全分开。您可以在 Web 层之外使用该服务。

# scipy - 安装后 Scipy 测试失败。不好吗？

> ID：15028571
> 
> 赞同：1
> 
> 时间：2013-02-22T16:17:25.523
> 
> 标签：scipy

```
======================================================================
FAIL: test_io.test_imread
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/lib/python2.7/dist-packages/numpy/testing/decorators.py", line 146, in skipper_func
    return f(*args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/scipy/ndimage/tests/test_io.py", line 16, in test_imread
    assert_array_equal(img.shape, (300, 420, 3))
  File "/usr/lib/python2.7/dist-packages/numpy/testing/utils.py", line 707, in assert_array_equal
    verbose=verbose, header='Arrays are not equal')
  File "/usr/lib/python2.7/dist-packages/numpy/testing/utils.py", line 600, in assert_array_compare
    raise AssertionError(msg)
AssertionError: 
Arrays are not equal

(shapes (2,), (3,) mismatch)
 x: array([300, 420])
 y: array([300, 420,   3])

----------------------------------------------------------------------
Ran 4272 tests in 28.037s

FAILED (KNOWNFAIL=12, SKIP=20, failures=1) 
```

# ios - 像扇子一样旋转的彩条

> ID：15028574
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:17:31.033
> 
> 标签：ios, quartz-core

我想创建像 [这个](https://itunes.apple.com/in/app/mypantone/id329515634?mt=8)应用程序一样的旋转彩色风扇（即在屏幕截图中看到最后一张图片有彩色条纹）。任何人都可以告诉我什么应该是我的良好起点。我已经在谷歌上搜索过，但没有找到类似的东西，可能是我遗漏了一些东西，所以任何人都可以向我指出如何实现这件事的好教程或示例代码或步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:21:22.337

把你所有的观点放在一起。将视图的锚点设置为视图的同一较低点。锚点是在对视图应用仿射变换（缩放、旋转等）时用作原点的点。它是一个 CGPoint，其中字段值的范围在 [0,1] 之间。默认值为 [0.5, 0.5] 视图的中心点。所以你将它设置为类似

`view.layer.anchorPoint = CGPointMake(0.5, 0.9);`//您显示的图像不会在完全相同的点旋转，因此您应该在 0.8 和 1.0 之间稍微改变高度值。

请注意设置 anchorPoint 会翻译您的视图，因此请务必查看以下问题：

[更改我的 CALayer 的锚点会移动视图](https://stackoverflow.com/questions/1968017/changing-my-calayers-anchorpoint-moves-the-view)

然后为旋转设置仿射变换，并按递增顺序将其应用于 for/while 循环中的所有视图：

`view.transform = CGAffineTransformMakeRotation(M_PI / 12 * i);`// i 是循环变量。您的视图将分别旋转 15、30、45 ... 度

# git - filter-branch --index-filter 总是以“致命：坏源”失败

> ID：15028580
> 
> 赞同：10
> 
> 时间：2013-02-22T16:17:56.933
> 
> 标签：git

因此，我尝试使用 重命名我的存储库中的文件夹`git filter-branch --index-filter`，但我总是以“致命：错误源”错误告终。

使用文件而不是文件夹很容易在测试存储库上演示该问题。

准备：

```
$ git init
$ echo whatever >> my_file.txt
$ git add .
$ git commit -m "initial"
$ echo whatever2 >> my_file2.txt
$ git add .
$ git commit -m "second" 
```

现在，我正在尝试更改`my_file.txt`为`your_file.txt`：

```
$ git filter-branch --index-filter 'git mv my_file.txt your_file.txt' HEAD 
```

但它不起作用：

```
Rewrite dac9a2023bdf9dd0159fab46213d9e1342ae9f75 (1/2)fatal: bad source, source=my_file.txt, destination=your_file.txt
index filter failed: git mv my_file.txt your_file.txt 
```

但是，执行的相同`git mv`命令通常可以正常工作：

```
$ git mv my_file.txt your_file.txt
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       renamed:    my_file.txt -> your_file.txt
# 
```

我敢肯定，我在这里遗漏了一些重要的东西 - 但它是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T17:14:25.880

正如 twalberg 在他的回答中指出的那样， git mv 不仅访问索引，它还访问磁盘。这可能是它不起作用的原因。

我不想使用慢速`--tree-filter`，因此我尝试更改`git filter-branch`手册页中的示例，该手册显示了如何将完整的存储库移动到子文件夹中。

结果就是这样 - 它确实有效;-)

```
git filter-branch --index-filter '
git ls-files -s | \
sed "s-\(\t\"*\)my_file.txt-\1your_file.txt-" | \
GIT_INDEX_FILE=$GIT_INDEX_FILE.new git update-index --index-info && \
mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"
' HEAD 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T17:17:21.037

`git mv``--index-filter`在子句中并不真正合适。由于`--index-filter`不检查每个提交，它重写到工作目录，并`git mv`在工作目录上操作（除了索引），使用`git mv`in`--index-filter`不会完成预期的工作。改用 a `--tree-filter`。（可能仍然可以`--index-filter`通过使用来完成此操作`git update-index`，但我没有想到它可用）。

# php - 使用 PHP 和 Apache 防止输出缓冲

> ID：15028587
> 
> 赞同：7
> 
> 时间：2013-02-22T16:18:24.167
> 
> 标签：php, apache, output-buffering

我有一个发送大量记录的 PHP 脚本，我想在每条记录可用时立即刷新它：客户端能够在每条记录到达时对其进行处理，它不需要等待整个响应。我意识到整个传输需要更长的时间，因为它需要以多个数据包的形式发送，但它仍然允许客户端更快地开始工作。

我已经尝试了所有不同的`flush()`功能`ob_flush()`，但似乎没有什么能帮助在页面完成之前通过线路实际发送数据。我已经确认它不是网络浏览器，因为我已经使用 telnet 对其进行了测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:18:24.167

对我有用的唯一解决方案是将`output_buffering`php.ini 中的指令设置为“关闭”。我不想为整个服务器执行此操作，只是针对这一特定资源。通常您可以`ini_set`从 PHP 脚本中使用，但无论出于何种原因 php 都不允许`output_buffering`以这种方式设置（请参阅[php 手册](http://www.php.net/manual/en/configuration.changes.modes.php)）。

事实证明，如果您使用的是 Apache，您可以`output_buffering`从您的服务器配置中设置一些 php ini 指令（包括 .htaccess 文件）。因此，我在 .htaccess 文件中使用了以下内容来仅为该文件禁用 output_buffering：

```
<Files "q.php">
    php_value output_buffering Off
</Files> 
```

然后在我的静态服务器配置中，我只需要`AllowOverride Options=php_value`（或更大的锤子，如`AllowOverride All`）以便在 .htaccess 文件中允许这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-21T20:28:31.443

你没有提到你正在使用什么网络服务器，但我会在这里冒险并猜测 Apache2。我击中了您描述的几乎相同的东西。我试图让我的 cgi 脚本在它准备好时传回信息，而不是缓冲整个事情。在 curl 等中快速工作，但在浏览器（几乎所有浏览器）中缓冲，这至少令人抓狂。我经历了你描述的确切步骤。在我的情况下，解决方案是修改`sites-enabled/terrifico.com`Apache2 中的配置文件（有问题的行以

> SetEnvIfNoCase

（您可以忽略该行上方和下方的内容，我只是将其显示为我放置位置的参考。）

```
<VirtualHost *:80>
ServerAdmin webmaster@localhost
ServerName test.terrifico.com
ServerAlias test.terrifico.com

SetEnvIfNoCase Request_URI \.cgi$ no-gzip dont-vary

DocumentRoot /var/www/test.terrifico.com 
```

从盯着来回的网络流量看，我终于意识到浏览器正在宣传它接受任何东西（即文本）的通货紧缩。例如，这就是浏览器和 curl 之间的区别。突出的一点是

> 接受编码：gzip、deflate、sdch

有一点关于`chunking`，但这并没有影响这个特定的问题。因此，浏览器请求`mod_deflate`启动，这使我在 cgi 脚本中小心地吐出字节时失败了。您可以在浏览器中更改它，但在服务器上更改一次似乎更明智。

也许这会有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-22T17:27:10.423

要在 PHP 运行时关闭输出缓冲而不更改`php.ini`或拥有`.htaccess`文件，只需在脚本开头使用`ob_end_flush()`或。`ob_end_clean()`例如：

这应该在没有缓冲的情况下输出：

```
<?php
ob_end_clean();

for ($i = 0; $i < 5; $i++)
{
    echo "$i\n";
    flush();
    usleep(0.5e6);
} 
```

如果`output_buffering`打开，无论`flush()`调用如何，都会输出缓冲（一次全部）：

```
<?php

for ($i = 0; $i < 5; $i++)
{
    echo "$i\n";
    flush();
    usleep(0.5e6);
} 
```

尽管它的名字，`ob_implicit_flush`调用`flush()`，而不是`ob_flush()`，在每个输出后隐含。在开始关闭输出缓冲区后，这在这种情况下会很方便：

```
<?php
ob_end_clean(); // disable output buffer
ob_implicit_flush(); // call flush() automatically after every output

for ($i = 0; $i < 5; $i++)
{
    echo "$i\n";
    usleep(0.5e6);
} 
```

这修复了 PHP 方面。可能还有其他事情发生`mod_deflate`或类似情况（请参阅 Ted Collins 的回答），我观察到 Firefox 至少需要 1024 字节才能开始输出任何内容。

# css - 使用经典 ASP 的动态 CSS 页面

> ID：15028590
> 
> 赞同：2
> 
> 时间：2013-02-22T16:18:38.193
> 
> 标签：css, variables, asp-classic

我一直在试图弄清楚如何使用经典的 asp 引入动态 CSS 样式表。我已经阅读了很多关于这个主题的教程，但我似乎无法正确地理解它。他们中的许多人似乎暗示只需更改为 styles.asp 或 .aspx 并使用标准样式表链接引用它就可以了，但我没有得到那个结果。

[http://www.4guysfromrolla.com/webtech/tips/t071201-1.shtml](http://www.4guysfromrolla.com/webtech/tips/t071201-1.shtml)

我想要实现的是能够将工作中的 CMS 中的服务器端变量提取到我的样式表中。我意识到 SASS 和 LESS 存在并且可能能够适应，但我只是想找到一种简单的方法来使用 asp 变量并将它们拉到我的样式表中。我不是非常精通 ASP，所以您可以提供的任何帮助都会有所帮助。

**编辑：**我更新了下面的代码以反映工作代码。

HTML

```
<link rel="stylesheet" href="<% = TemplatePath %>css/styles.asp" type="text/css" /> 
```

ASP CSS 页面

```
<%
   dark_color = "navy" 
%>

<% Response.ContentType = "text/css" %>
<style type="text/css">
   h2 { color: <%= dark_color %> }
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:47:42.143

这里缺少的成分是内容类型。默认情况下提供经典 ASP 页面`text/HTML`，这会使期望样式表为`text/css`.

更改内容类型如下：

```
Response.ContentType = "text/css" 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms525208.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T16:23:37.427

```
 you could use global variables like Application and session which are accessible across overall application.

    here are the codes for your reference -

    my asp page named asp_1.asp

    <!DOCTYPE html>
    <html>
    <head>

         <link rel="stylesheet" type="text/css" href="dynastyle.asp">
    </head>
    <body>
    <%
    Set MyBrow=Server.CreateObject("MSWC.BrowserType")

    Application("myfontcolor") = "#ff0000"

    %>

    <table border="0" width="100%">
    <tr>
    <th>Client OS</th><th><%=MyBrow.platform%></th>
    </tr><tr>
    <td >Web Browser</td><td ><%=MyBrow.browser%></td>
    </tr><tr>
    <td>Browser version</td><td><%=MyBrow.version%></td>
    </tr><tr>
    <td>Frame support?</td><td><%=MyBrow.frames%></td>
    </tr><tr>
    <td>Table support?</td><td><%=MyBrow.tables%></td>
    </tr><tr>
    <td>Sound support?</td><td><%=MyBrow.backgroundsounds%></td>
    </tr><tr>
    <td>Cookies support?</td><td><%=MyBrow.cookies%></td>
    </tr><tr>
    <td>VBScript support?</td><td><%=MyBrow.vbscript%></td>
    </tr><tr>
    <td>JavaScript support?</td><td><%=MyBrow.javascript%></td>
    </tr>
    </table>

    </body>
    </html> 

    here i displayed simple HTML table to display browsers capability. you could use any element as per your requirement.

another steps towards the solution is to create asp page with dynamic css named dynastyle.asp. here is the code for same -

<% Response.ContentType = "text/css" %>
<%
DIM fontColor
**fontColor =Application("myfontcolor")**
%>

    table

{
    background-color: <%= fontColor %>;
} 
```

# android - 如何在 listView 中实现这种软键盘效果

> ID：15028592
> 
> 赞同：0
> 
> 时间：2013-02-22T16:18:46.433
> 
> 标签：android, android-softkeyboard

我想了解有关该功能的更多信息，以便在每个项目的列表视图中实现它。

那么，当取景器在按键上移动而不像下面的 GIF 那样不触碰它时，如何调用负责在软键盘中显示弹出窗口的事件？

![在此处输入图像描述](../Images/1630ddaaed7030ca3c539c251f362e9e.png)

假设键 A、S 和 D 是垂直方向的列表视图项，我可以用什么来实现这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:51:57.977

您可以使用 QuickAction 或 QuickAction 3D。搜索谷歌“QuickAction Android”

# c++ - 从套接字流中分离并显示位图

> ID：15028596
> 
> 赞同：0
> 
> 时间：2013-02-22T16:18:51.600
> 
> 标签：c++

如何从多个图像的连续套接字流中分离和显示位图图像？当只收到一个 bmp 时，下面的代码将保存并显示单个图像。当套接字流包含多个位图图像（例如 BM .... BM .... BM...）时，如何分离和显示图像？

```
DWORD WINAPI CServerDlg::ThreadSocket( LPVOID lpParam )
{
    CServerDlg *pThis = (CServerDlg *)lpParam;

    SOCKET server;

    WSADATA wsaData;
    int wsaret = WSAStartup( MAKEWORD(2,2), &wsaData );
    if( wsaret != 0 )
    {
        return 0;
    }

    sockaddr_in local;
    local.sin_family = AF_INET; //Address family
    local.sin_addr.s_addr = INADDR_ANY; //Wild card IP address
    local.sin_port = htons((u_short)8888); //port to use

    server = socket( AF_INET, SOCK_STREAM, 0 );
    if( server == INVALID_SOCKET )
    {
        return 0;
    }

    if( bind( server, (sockaddr*)&local, sizeof(local) ) != 0 )
    {
        return 0;
    }
    if( listen( server, 10 ) != 0 )
    {
        return 0;
    }

    SOCKET_STREAM_FILE_INFO     StreamFileInfo;
    memset( &StreamFileInfo, 0, sizeof(SOCKET_STREAM_FILE_INFO) );
    SOCKET client;
    sockaddr_in from;
    int fromlen = sizeof( from );
    while( pThis->m_bListen )
    {
        char temp[1024];
        memset( temp, 0, 1024 );
        client = accept( server, (struct sockaddr*)&from, &fromlen );
        int iLen = recv( client, temp, sizeof(SOCKET_STREAM_FILE_INFO), 0 );
        if( iLen == sizeof(StreamFileInfo) )
        {
            memcpy( &StreamFileInfo, temp, sizeof(StreamFileInfo) );
            CFile destFile( StreamFileInfo.szFileTitle, CFile::modeCreate | CFile::modeWrite | CFile::typeBinary);
            UINT dwRead = 0;
            while( dwRead < StreamFileInfo.nFileSizeLow )
            {
                memset(temp,0,1024);
                UINT dw = recv( client, temp, 1024, 0 );
                destFile.Write(temp, dw);
                dwRead += dw;
            }
            destFile.Close();

            pThis->LoadPicture( StreamFileInfo.szFileTitle );   // Display image in a dialog box
        }
        closesocket(client);
    }
    closesocket(server);
    WSACleanup();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:26:06.610

此处描述的位图格式

[http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)

在标题中包含文件大小字段。您可以为每个位图读取它，并知道当前位图的结尾在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:22:08.967

您需要设计一个区分不同图像的协议。

一个简单的发送一个标头（包含图像的大小（以字节为单位），可能还有图像类型），然后是实际的图像数据就足够了。

# jquery - 为隐藏的 Div 设置动画但保留 asp 水印扩展器

> ID：15028599
> 
> 赞同：0
> 
> 时间：2013-02-22T16:19:00.850
> 
> 标签：jquery, asp.net, textbox, jquery-animate, watermark

我有一个需要隐藏然后通过 jQuery 显示的 div。

在该 div 中有一个 asp 文本框，并为其分配了一个 asp 文本框水印扩展器。

如果我让 div 显示一切正常。但是，当我隐藏 div 时，水印扩展器在您单击进出文本框之前不会显示。

我尝试通过以下方式显示/隐藏 div：

*   显示：无；然后通过 .fadeIn('slow'); 显示
*   高度：0；然后通过 .animate({ 'height': '200px' }, "slow");

在每种情况下，当 div 出现时，水印都不会显示。

有没有人遇到过这个问题。jQuery 中是否还有其他方法可以显示/隐藏 div 以解决此问题。

```
<asp:ImageButton ID="btnFilter" runat="server" ImageUrl="mmmmmmmmmmmmm" OnClientClick="AnimateDivHeight('divFilter', 150)" />
<div id="divFilter" style="height: 0px; overflow: hidden;">
            <asp:Panel ID="pnlListsFilters" ClientIDMode="Static" runat="server">                                        

                                <asp:TextBox ID="txtListsFilterSearch" runat="server" CssClass="formfield" Width="220" AutoPostBack="true" />
                                <asp:TextBoxWatermarkExtender id="tbweListsFilterSearch" runat="server" WatermarkCssClass="formfield-watermarked" WatermarkText="e.g. created by, tags, title" TargetControlID="txtListsFilterSearch" />&nbsp;&nbsp;

            </asp:Panel>
        </div>

function AnimateDivHeight(div, height) {
if ($('#' + div).height() == 0) {
    $("#" + div).animate({ 'height': height + 'px' }, "slow");
}
else {
    $("#" + div).animate({ 'height': '0px' }, "slow");
} 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:32:12.640

您是否尝试过使用 hover() 功能？ [http://api.jquery.com/hover/](http://api.jquery.com/hover/)

我只是通过隐藏第二个 div 并在悬停时显示它来制作一个子菜单。如果您试图让它在没有悬停的情况下出现，也许是 onLoad 事件？

如果有帮助，这就是我对子菜单所做的...

```
$(document).ready(function () {             /* Function to create Sub Menus */

    var speed = 600;                                      //The Variable 'speed' is in milliseconds 
    $('li').hover(function () {               //Hover Function
                                  //Show its submenu            
   $(this).children('.nav2').stop().slideDown(speed);     
        },
        function () {
   $(this).children('.nav2').stop().hide(speed);
   }); 
```

# java - ServletRegistration url 映射与 Spring DispatcherServlet 冲突

> ID：15028600
> 
> 赞同：1
> 
> 时间：2013-02-22T16:19:01.780
> 
> 标签：java, servlets, spring-mvc, servlet-3.0

我按照[这个例子](http://rockhoppertech.com/blog/spring-mvc-configuration-without-xml/)通过 java 配置我的 DispatcherServlet 和 Spring 的`WebApplicationInitializer`--> `javax.servlet.ServletContainerInitializer`：

```
@Override
public void onStartup(ServletContext servletContext) throws ServletException {
    AnnotationConfigWebApplicationContext mvcContext = new AnnotationConfigWebApplicationContext();
    mvcContext.register(MyConfiguration.class);

    ServletRegistration.Dynamic appServlet = servletContext.addServlet("appServlet", new DispatcherServlet(mvcContext));
    appServlet.setLoadOnStartup(1);

    Set<String> mappingConflicts = appServlet.addMapping("/");
    if (!mappingConflicts.isEmpty()) {
        for (String s : mappingConflicts) {
            LOGGER.error("Servlet URL mapping conflict: {}", s);
        }
        throw new IllegalStateException("'appServlet' cannot be mapped to '/'");
    }
} 
```

当我启动 Tomcat 时，我得到了上述信息，`IllegalStateException`因为[显然已经有一个 Servlet](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRegistration.html#addMapping%28java.lang.String...%29)映射到`/`，我只能假设这是 Tomcat 的默认 Servlet。如果我忽略mappingConflicts，我`DispatcherServlet`的不会映射到任何东西。

有什么方法可以用我自己的方法覆盖这个默认的 servlet 映射，还是我卡住了我的`DispatcherServlet`映射`/*`？

[这个答案](https://stackoverflow.com/questions/14223150/mapping-a-specific-servlet-to-be-the-default-servlet-in-tomcat)通过更改您的应用程序在 Catalina webapps 文件夹中的部署位置提供了一个解决方案，但我希望能够减少干扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:44:15.110

事实证明，您可以通过 Java 映射`DispatcherServlet`或任何其他 Servlet `/`（与您始终可以执行此操作的 xml 不同），但仅在 Tomcat 版本 > 7.0.14 上，我在 7.0.12 上。

请参阅[此 Bugzilla 问题](https://issues.apache.org/bugzilla/show_bug.cgi?id=51278)进行讨论。

# css - 字体真棒图标在某些浏览器中不起作用

> ID：15028602
> 
> 赞同：21
> 
> 时间：2013-02-22T16:19:09.510
> 
> 标签：css, blackberry, twitter-bootstrap, font-awesome, opera-mobile

我正在使用 Bootstrap + Font Awesome，大多数桌面和移动浏览器都可以，但是 Font Awesome 图标不适用于某些浏览器，例如 Opera Mobile、Opera Mini 和某些版本的 Android 浏览器。只显示一个空白矩形。

有谁知道这个问题？并且，有解决方案吗？

谢谢

**[编辑 2013-03-06 ！重要]** 我找不到任何明显的问题，所以我尝试了闻所未闻的解决方案。我尝试了两个在线字体转换工具。首先，我使用[http://www.freefontconverter.com/](http://www.freefontconverter.com/)将原始 FontAwesome svg 转换为 ttf。然后我使用[http://www.font2web.com/](http://www.font2web.com/)将该 .ttf 转换为 .eot、.woof 和 .otf。

**结果：opera mobile 现在可以正确显示图标。**（我不知道有什么变化，但有效）

现在的问题是**黑莓6**。我用 BB Curve 9300、Modernizr 和 Google 字体测试了@font-face，一切正常。但是FontAwesome仍然不起作用......

* * *

[EDIT 2013-03-01] Opera mobile 10+ 支持@font-face，所以问题可能是另一个问题。我尝试使用带有@font-face 的另一种服务器字体并且工作正常，但是使用 FontAwesome 我无法正确显示图标。

![在此处输入图像描述](../Images/eda4ac9d7d0ffea7ec804fe044100f53.png)

[编辑 2013-03-03] 问题不仅在于我的网站，Font Awesome 网站示例和测试都不起作用......

![在此处输入图像描述](../Images/6af5c28fa03336fb9c4f909c3af6cebc.png)

**[编辑 2013-03-4]** 我尝试使用 Modernizr “font-face” 功能检测进行后备，但Opera Mobile 和 BlackBerry 6 返回 true，因为它们支持该功能。 **如何检测是否加载了 FontAwesome 字体？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T05:41:36.430

There are a couple different issues I would look into that I hope help you fix it.

If you mention what font worked we could probably help out better. I would compare the font that you said worked with FontAwesome to see what the differences are. I would bet the glyphs are mapped to a different unicode area and maybe the browser doesn't read from there?

You could use a tool like Font Forge to check differences from other fonts. I noticed when trying to re-generate the FontAwesome font from Font Forge I got validation errors with the em spacing and the glyphs had errors (self-intersecting, wrong direction, missing points at extrema). I've seen this before in icon fonts and never had an issue but I haven't tested on Opera before either. If you compare trying to generate a font with something that works you could probably narrow the issue down.

Other Stuff I'm sure you covered but double checking:

I read here that having a local version of the font installed might conflict with the font embed. [https://github.com/FortAwesome/Font-Awesome/issues/247](https://github.com/FortAwesome/Font-Awesome/issues/247)

If you took the icon-font and then added your own glyphs to it then used something like font squirrel to generate all the web safe formats make sure you told the generator to add the unicode range of the glyphs you created. Once I forgot to do this and the app only added the glyphs in the a-z range. An easy way to check is to look at the gyphs tab in the demo html page and make sure all the icons are included.

You're using the proper CSS3 font-face rule and embedding eot, ttf, woff, and svg and you've waited a little bit. I noticed on some old iphones the font takes forever to display.

Using a tool like modernizr font-face feature detect might make some of the support between browsers a little easier.

I'm curious to see what the issue is.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T00:59:22.037

Opera Mini 不支持 font-face，正如官网[http://www.opera.com/docs/specs/productspecs/中提到的那样](http://www.opera.com/docs/specs/productspecs/)

我能想到的一个“肮脏”的小技巧是将你的字体转换为 SVG 并在你的 CSS 中使用它，*因为它是部分支持的*（因为它也写在他们的网站上）。

就像是

```
.icon{

 background-image: url(icon.svg);
 -o-background-size: 100% 100%;
 -webkit-background-size: 100% 100%;
} 
```

也看看上面的链接 [http://www.w3.org/TR/SVGTiny12/fonts.html](http://www.w3.org/TR/SVGTiny12/fonts.html)

**更新**

Opera mini 在 IOS 6.1 中不支持 FontAwesome ![ios中的字体真棒错误](../Images/845690393866eb39a20fcaf89b3c9edc.png)

其他字体示例都不起作用（[http://codepen.io/bennettfeely/full/ErFGv](http://codepen.io/bennettfeely/full/ErFGv)） ![在此处输入图像描述](../Images/5a66003df1c1613b74f50701acd8404b.png)

但是使用 SVG 似乎是一个很好的解决方案，证明了这个概念原始来源：[http](http://dbushell.com/demos/css-sprites/) ://dbushell.com/demos/css-sprites/ 以上演示的更多信息：http: [//coding.smashingmagazine.com/2012/01/ 16/分辨率独立与svg/](http://coding.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/)

![在此处输入图像描述](../Images/104776fcfaec9ff47fb063e63d017742.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T19:15:13.970

Opera MOBILE 解决方案（无 Opera Mini）

我尝试了两个在线字体转换工具。首先，我使用[http://www.freefontconverter.com/](http://www.freefontconverter.com/)将原始 FontAwesome svg 转换为 ttf。然后我使用[http://www.font2web.com/](http://www.font2web.com/)将该 .ttf 转换为 .eot、.woof 和 .otf。

最后，我替换了原始文件，现在 Opera mobile 可以正确显示图标。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-29T14:15:14.563

1.  访问[http://icomoon.io/app/](http://icomoon.io/app/)

2.  按钮图标库

3.  添加库字体真棒

4.  选择你想要的图标

5.  按钮字体（将图标导出为 css 字体真棒）

6.  用新的 Fonts Awesome 替换 Fonts Awesome (ttf, svg. etc...)

CSS

```
 @font-face{
font-family:"FontAwesome";
src:url('../fonts/awesome/fontawesome.eot');
src:url('../fonts/awesome/fontawesome.eot?#iefix') format('embedded-opentype'),
url('../fonts/awesome/fontawesome.woff') format('woff'),    url('../fonts/awesome/fontawesome.ttf') format('truetype'),
        url('../fonts/awesome/fontawesome.svg#fontawesomeregular') format('svg');
font-weight:normal;font-style:normal;}.flag:before,.mobile:before{font-family:"FontAwesome";font-style: normal;font-weight: normal;font-variant: normal;text-transform: none;line-height: 1;-webkit-font-smoothing: antialiased;display: inline-block; text-decoration: inherit;}.flag:before{content:"\f024";}.mobile:before{content:"\f10b";} 
```

我试试这个，然后 Awesome Fonts 在 Opera Mobile 中工作:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-28T18:10:22.867

为此，我知道 Opera Mini 中支持 @font-face，而 Andoroid 从 2.2 到 3.0 中只有部分 @font-face 支持（早期的 Android 版本根本没有 @font-face 支持）。见：[http ://caniuse.com/fontface](http://caniuse.com/fontface)

我知道的部分支持意味着它们不支持受 DRM 保护的字体，并且某些语法（例如“笑脸”语法）对它们不起作用。

因此，如果您想在 Opera Mini 和 Android 2.1 上显示图标，您需要回退到图像图标。如果您在使用 Android 2.2-3.0 时遇到问题，您可以通过更改语法来解决它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-03T12:17:40.523

FortAwesome 报告了此类错误：

1.  [https://github.com/FortAwesome/Font-Awesome/issues/246](https://github.com/FortAwesome/Font-Awesome/issues/246)
2.  [https://github.com/FortAwesome/Font-Awesome/issues/791](https://github.com/FortAwesome/Font-Awesome/issues/791)

它们尚未修复，他们已联系 Opera 开发人员关系以找出导致此问题的原因。除了等待他们修复它之外，您别无选择。跟踪错误以了解更多信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-28T22:13:34.047

也许这与字符集有关？您是否在文档和样式表中声明了 UTF-8？

```
<meta charset="UTF-8"> 
```

或者

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

在样式表中（注意，必须是第一行，第一列）：

```
@charset "utf-8"; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-07T04:43:36.033

作为参考，我遇到了这个问题，问题是域。某些浏览器，Firefox 尤其拒绝从另一个域加载字体（称为相同域策略）。标头

```
Access-Control-Allow-Origin "*" 
```

例如，在 nginx 中，它的配置如下：

```
location ~* \.(eot|ttf|woff)$ {
    add_header Access-Control-Allow-Origin *;
} 
```

必须设置，还要记住字体的内容类型必须是

```
application/x-font-ttf                ttf;
font/opentype                         otf;
application/vnd.ms-fontobject         eot;
font/x-woff                           woff; 
```

错误的内容类型可能会导致字体无法加载，因此您会丢失图标。有这个信息作为参考很好:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-10T13:03:47.053

use icomoon app [http://icomoon.io/app/](http://icomoon.io/app/) to change the svg font to web fonts and replace the old font for Font Awesome . it works for me in opera mobile

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-01T11:50:24.567

我也是，在黑莓中显示 SVG 字体时遇到问题。问题是 svg 的名称（在文档中）和字体系列的名称必须相同。我在这里找到了这个答案，在最后一个答案的评论中：

[黑莓操作系统 7 上的 @fontface](https://stackoverflow.com/questions/12780686/fontface-on-blackberry-os-7)

# thrift - Apache Thrift 数据类型泛化

> ID：15028603
> 
> 赞同：2
> 
> 时间：2013-02-22T16:19:10.937
> 
> 标签：thrift

对于以下代码

```
struct UserProfile {
    1: i32 uid,
    2: string name,
    3: string blurb
}

service UserStorage {
    void store(1: UserProfile user),
    UserProfile retrieve(1: i32 uid)
} 
```

`Apache Thrift`生成在服务器端也引用`UserProfile`对象的代码。我怎样才能让它与 any 一起工作`custom object`？

这样我就可以继续实施服务器并让客户开发自己的语言客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T07:14:38.587

生成的 Thrift 文件将有一个文件，该文件具有服务 UserStorage 的接口，其中包含 void store(UserProfile user) 和 UserProfile retrieve(int uid) 方法。您必须在服务器端实现的接口内实现这些方法才能使您的代码正常工作。

**struct UserProfile**也类似于 Java 中的POJO**类**。您还必须将此 UserProfile 结构的属性与服务器端实现属性进行映射，以使代码正常工作。

请参阅 Thrift 站点示例以获得更多说明。 [http://thrift.apache.org/](http://thrift.apache.org/)

# c#-4.0 - wcf 与 common.logging 问题

> ID：15028604
> 
> 赞同：1
> 
> 时间：2013-02-22T16:19:11.997
> 
> 标签：c#-4.0, iis-7, log4net, common.logging

我正在尝试解决的有趣问题。所以这里我们在 iis7 上运行了简单的 wcf 服务。与 common.logging 相关的代码如下所示：

```
using Common.Logging;

private static readonly ILog log = LogManager.GetCurrentClassLogger();

log.Error("Opened Sagas Monitoring Service: {0}", ex); 
```

web.config 配置：

```
<configSections>
<sectionGroup name="commonLogging">
  <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
</sectionGroup> 
```

```
<commonLogging>
<logging>
  <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
    <arg key="configType" value="FILE-WATCH" />
    <arg key="configFile" value="~/log4net.config" />
  </factoryAdapter>
</logging> 
```

log4net.config 与 web.config 位于同一部署文件夹中，其中包含我们需要的所有程序集。

所以问题是下一个。在我们调用服务后，它不会创建记录器。并且没有例外。但是，当我们的服务开启并且我们无论如何更改部署文件夹中的 web.config 文件时，它会立即获取记录器。问题似乎出在 FactoryAdapter 上。有任何想法吗？

# php - 使用 ajax 在具有时间间隔的循环中提交表单

> ID：15028605
> 
> 赞同：0
> 
> 时间：2013-02-22T16:19:12.153
> 
> 标签：php, javascript, jquery, ajax, forms

好的，我有这部分代码

```
<script type="text/javascript" src="ajaxsbmt.js"></script>
<?php
for ($i=0; $i <=20; $i++) {
    if ($i == 0) {
        $valor = "";
        $desde= "";
        $inicio = "0";
         }
         else {
        $valor = ($i*50)+1;
        $desde = "_Desde_";
              }
    $analisar = $_POST['string']."".$desde."".$valor;
             // echo $valor;
    ?>
<div style="float:left;">
<form id="formproduto<?php echo $valor; ?>" name="form<?php echo $valor; ?>" action="#produto" method="post" onsubmit="xmlhttpPost('analisar.php', 'formproduto<?php echo $valor; ?>', 'produto', '&lt;img src=\'ajax-loader.gif\'&gt;'); return false;"><input type="hidden" value="<?=$analisar?>" name="analisar" />
<input type="submit" value="<?php if ($i == 0) { echo $inicio; } else { echo $valor; } ?>" />
</form>
</div>
<?php } ?>

<div id="produto"></div> 
```

我需要提交循环（使用我已经存在的 ajaxsbmt.js 例程（获取表单值并显示到 div“produto”

但是我希望这个脚本自动运行，例如在 5 秒后相互延迟

所以它会是这样的，当我按下提交（或“0”按钮例如）时，javascript（或其他东西）提交该表单等待结果，然后等待 N 秒直到循环的下一步。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:12:21.077

另一种方法是使用`setInterval`如下函数：

创建间隔

```
var ResInterval = window.setInterval('myAjaxCall()', 60000); // 60 seconds

var myAjaxCall = function() {
$.ajax({
    type: "GET",
    url: options.feedUrl,
    dataType: "xml",
    async:options.sync,
    success: function(xml) {
        // todo
    }
}; 
```

停止

```
window.clearInterval(resInterval); 
```

代码取自以下链接：

[如何在 jquery 中每 10 秒更新一次 Ajax？](https://stackoverflow.com/questions/4928523/how-do-i-make-ajax-update-every-10-seconds-in-jquery)

# python - 基本 Numpy 数组赋值

> ID：15028606
> 
> 赞同：7
> 
> 时间：2013-02-22T16:19:17.047
> 
> 标签：python, arrays, numpy, variable-assignment, operation

作为一个小练习，在我开始使用 python 中的数字代码之前，我正在尝试制作一个 LDLT 算法。只是为了“弄湿脚”。

但是，我似乎对 numpy 数组缺乏基本的了解。请参见以下示例：

```
def ldlt(Matrix):
    import numpy

    (NRow, NCol) = Matrix.shape

    for col in range(NCol):
        Tmp = 1/Matrix[col,col]
        for D in range(col+1, NCol):
            Matrix[col,D] = Matrix[D,col]*Tmp  

if __name__ == '__main__':
    import numpy
    A = numpy.array([[2,-1,0],[-1,2,-1],[0,-1,2]])
    ldlt(A) 
```

该示例不是我正在处理的完整代码。但是，尝试运行它，并在 Matrix[col,D] = ... 处设置断点

我对第一次评估的期望是第 0 行第 1 列（起始值 -1）设置为等于 = -1*(1/2) = -0.5。

但是，在运行代码时，它似乎设置为 0。为什么？一定有一些基本的东西我还没有真正理解？

在此先感谢大家帮助我。

# 编辑1：

Python Ver.：3.3 Tmp.：变为 0.5（正如我的调试器所报告的那样）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:29:34.787

以下可能显示正在发生的事情：

```
>>> A = np.array([[2,-1,0],[-1,2,-1],[0,-1,2]])
>>> A.dtype
dtype('int32')
>>> A[0, 1]
-1
>>> A[0, 1] * 0.5
-0.5
>>> A[0, 1] *= 0.5
>>> A[0, 1]
0
>>> int(-0.5)
0 
```

您的数组只能保存 32 位整数，因此您尝试分配给它的任何浮点值都将被强制转换（即截断）为 int32。

* * *

以同样的价格，这是一种更 numpythonic 的方式来做你所追求的事情：通常要避免 for 循环，因为它们破坏了 numpy 的全部目的：

```
def ldlt_np(arr) :
    rows, cols = arr.shape
    tmp = 1 / np.diag(arr) # this is a float array
    mask = np.tril_indices(cols)
    ret = arr * tmp[:, None] # this will also be a float array
    ret[mask] = arr[mask]

    return ret

>>> A = np.array([[2,-1,0],[-1,2,-1],[0,-1,2]])
>>> ldlt_np(A)
array([[ 2\. , -0.5,  0\. ],
       [-1\. ,  2\. , -0.5],
       [ 0\. , -1\. ,  2\. ]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:22:02.297

`numpy`数组具有固定类型。以后不能将`int`数组更改为浮点数。将数组初始化为浮点数组：

```
A = numpy.array([[2, -1, 0], [-1, 2, -1], [0, -1, 2]], numpy.float) 
```

# c# - 从 app.config 移入构造函数时绑定失败

> ID：15028607
> 
> 赞同：0
> 
> 时间：2013-02-22T16:19:19.557
> 
> 标签：c#, wcf, .net-4.0, nettcpbinding

我试图摆脱 WCF 项目的 app.config 文件，我需要将设置硬编码到我正在生成的 DLL 中。

我创建了我的代理类，`svcUtil`并且客户端在我使用时工作正常`App.config`

```
<system.serviceModel>
  <bindings>
    <netTcpBinding>
      <binding name="ManagementEndpoint">
        <security mode="None" />
      </binding>
    </netTcpBinding>
  </bindings>
  <client>
    <endpoint address="net.tcp://example.com/MyApp/DomainManagement"
        binding="netTcpBinding" bindingConfiguration="ManagementEndpoint"
        contract="MyApp.DomainManagementProxy.IDomainManagement"
        name="DomainManagementEndpoint" />
  </client>
</system.serviceModel> 
```

但是，如果我删除我的`App.config`并用以下内容替换默认构造函数

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
public partial class DomainManagementClient : System.ServiceModel.ClientBase<MyApp.DomainManagementProxy.IDomainManagement>, MyApp.DomainManagementProxy.IDomainManagement
{

    public DomainManagementClient() 
        : base(new NetTcpBinding(SecurityMode.None, false), 
               new EndpointAddress("net.tcp://example.com/MyApp/DatabaseManagement"))
    {
    }

    //(Snip) 
```

一旦我在客户端调用第一个方法，它就会给我以下错误

> 由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action ' [http://example.com/MyApp/DomainManagement/IDomainManagement/GetServerSetup '的消息。](http://example.com/MyApp/DomainManagement/IDomainManagement/GetServerSetup)这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

我需要更改/放入我的构造函数以使绑定正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:44:32.410

配置有 'net.tcp://example.com/MyApp/DomainManagement' 作为 URL。但是您的代码具有“net.tcp://example.com/MyApp/DatabaseManagement”。那可能是不匹配。

修改生成的代理不是一个好主意。但是，由于您决定对 URL 和绑定进行硬编码，因此您可以在应用程序代码中执行以下操作。

```
DomainManagementClient client = new DomainManagementClient(new NetTcpBinding(SecurityMode.None), new EndpointAddress("net.tcp://example.com/MyApp/DatabaseManagement")); 
```

生成的服务代理应该自动让这个重载接受绑定和指向的地址。

# c++ - 使用模板进行事件处理

> ID：15028609
> 
> 赞同：1
> 
> 时间：2013-02-22T16:19:22.113
> 
> 标签：c++, templates, c++11, event-handling, variadic-templates

我最近一直在玩新的 C++11 标准，并决定创建一个基本的事件处理系统。下面的代码提供了我当前实现的一个小例子。

```
#include <functional>
#include <vector>
#include <iostream>

template <typename Event>
class EventBroadcaster
{
public:
    typedef std::function<void(const Event&)> Connection;

    void connect(Connection&& connection)
    {
        connections.push_back(std::move(connection));
    }

    void signal(const Event& event)
    {
        for (const auto& connection : connections)
        {
            connection(event);
        }
    }
private:
    std::vector<Connection> connections;
};

struct MouseMotion
{
    int x = 0;
    int y = 0;
};

class Input : public EventBroadcaster<MouseMotion>
{
public:
    void process()
    {
        MouseMotion mouseMotion;
        mouseMotion.x = 10;
        mouseMotion.y = 20;
        signal(mouseMotion);
    }
};

int main()
{
    int x = 0;
    int y = 0;

    Input input;

    input.connect([&](const MouseMotion& e){
        x += e.x;
        y += e.y;
    });

    input.process();

    std::cout << x << "," << y << std::endl; // Output: 10,20

    return 0;
} 
```

`Input`如果该类只广播单个事件，上述解决方案确实可以很好地工作。然而，可能存在`Input`类希望能够发送`KeyPress`事件而不仅仅是`MouseMotion`事件的情况。

我考虑过使用多重继承。同时`Input`继承`EventBroadcaster<MouseMotion>`和`EventBroadcaster<KeyPress>`。这会导致编译器错误警告不明确的函数。以下答案[多重继承模板类](https://stackoverflow.com/a/3360909/1175300)中提供的解决方案确实适用于受保护的`signal`函数，但不适用于在类外调用的公共`connect`函数`Input`。

除了多重继承，我想知道可变参数模板是否可以帮助我解决问题。我已经查看了（部分）模板专业化和解包可变参数模板。但是一直无法提供（优雅的）解决方案。

支持多种事件类型的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:43:18.920

我会做`EventBroadcaster<T>`一个实现细节，而不是公开`EventBroadcasters<Ts...>`.

`EventBroadcasters<Ts...>`拥有`EventBroadcaster<Ts>...`模板方法`connect<U>`和`signal<U>`，并将这些转发给`EventBroadcaster<U>`. 如果`U`不在`Ts...`.

所以现在你`signal(mouseMotion)`，它解析为`signal<MouseMotion>(mouseMotion)`，它连接到正确的广播公司。

当你`connect`倾听时，同样只要你使用正确的`std::function`东西就可以了。如果没有，您可以传入`Event`您正在收听的类型。

有一些方法可以让它变得更加神奇，并启用你想要的完全正确的重载解决方案，但这真的很棘手。即，您检测`connect`到执行 SFINAE 并手动将传入的 lambda（通过检查其`operator()`）分派到正确的`std::function`覆盖。不过，单纯的能说`connect<MouseMotion>([&](MouseMotion m){...})`应该是一种进步。

（SFINAE 技术包括检查`std::function`列表中的哪种类型可以从您传入的 中构造`U`，如果有一个唯一的，使用那个。另外，检查是否`U`是这样的`std::function`（或此类的 cv 变体）。它不是很难，但看起来很凌乱，根据我的经验，大多数人不喜欢打字，更喜欢只指定`<MouseMotion>`。）

**更新：**

以下代码块提供了此答案的实现。

```
#include <functional>
#include <vector>
#include <iostream>

namespace detail
{
    template <typename Event>
    class EventBroadcaster
    {
    public:
        typedef std::function<void(const Event&)> Connection;

        void connect(Connection&& connection)
        {
            connections.push_back(std::move(connection));
        }

        void signal(const Event& event)
        {
            for (const auto& connection : connections)
            {
                connection(event);
            }
        }
    private:
        std::vector<Connection> connections;
    };

   template <typename T> struct traits
       : public traits<decltype(&T::operator())> {};

   template <typename C, typename R, typename A>
   struct traits<R(C::*)(const A&) const>
   {
       typedef A type;
   };
}

template <typename... Events>
class EventBroadcaster
   : detail::EventBroadcaster<Events>...
{
public:
    template <typename Connection>
    void connect(Connection&& connection)
    {
        typedef typename detail::traits<Connection>::type Event;
        detail::EventBroadcaster<Event>& impl = *this;
        impl.connect(std::move(connection));
    }

    template <typename Event>
    void signal(const Event& event)
    {
        detail::EventBroadcaster<Event>& impl = *this;
        impl.signal(event);
    }

    virtual void processEvents() = 0;
};

struct MouseMotion
{
    int x = 0;
    int y = 0;
};

struct KeyPress
{
    char c;
};

class Input
    : public EventBroadcaster<MouseMotion, KeyPress>
{
public:
    void processEvents()
    {
        MouseMotion mouseMotion;
        mouseMotion.x = 10;
        mouseMotion.y = 20;
        signal(mouseMotion);

        KeyPress keyPress;
        keyPress.c = 'a';
        signal(keyPress);
    }
};

int main()
{
    int x = 0;
    int y = 0;
    char c = '~';

    Input input;

    input.connect([&](const MouseMotion& e){
        x += e.x;
        y += e.y;
    });

    input.connect([&](const KeyPress& e){
        c = e.c;
    });

    input.processEvents();

    std::cout << c << " " << x << "," << y << std::endl; // Output: a 10,20

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:32:05.290

如果这对您来说可以，您可以通过在您的类中添加`using`指令并将您的 lambda 存储在一个对象中而不是使用来解决这个问题：`KeyPress``Input``std::function<>``auto`

```
class Input :
    public EventBroadcaster<MouseMotion>,
    public EventBroadcaster<KeyPress>
{
public:
    using EventBroadcaster<MouseMotion>::signal;
    using EventBroadcaster<MouseMotion>::connect;

    // ADD THESE!
    using EventBroadcaster<KeyPress>::signal;
    using EventBroadcaster<KeyPress>::connect;

    Input() {}
    virtual ~Input() {}
    void process()
    {
        MouseMotion mouseMotion;
        mouseMotion.x = 10;
        mouseMotion.y = 20;
        signal(mouseMotion);
    }
};

int main()
{
    Input input;

    int myX = 0;
    int myY = 0;

    // STORE THE LAMBDA IN A function<> OBJECT:
    std::function<void(const MouseMotion&)> onMouseMotion = [&](const MouseMotion& e){
        myX += e.x;
        myY += e.y;
    };

    // THIS WILL NOT BE AMBIGUOUS:
    input.connect(onMouseMotion);

    input.process();
    std::cout << myX << "," << myY << std::endl; // Output: 10,20

    return 0;
} 
```

**更新：**

接下来是对上述解决方案的改进，它不需要将 lambda 处理程序包装在`std::function`对象中。如下更改`connect`方法的定义就足够了，让 SFINAE 负责排除不适当的重载：

```
template<typename F>
void connect(F connection, decltype(std::declval<F>()(std::declval<Event>()))* = nullptr)
{
    connections.push_back(connection);
} 
```

现在可以这样调用`connect()`：

```
input.connect([&](const MouseMotion& e){
    myX += e.x;
    myY += e.y;
    });

input.connect([&](const KeyPress& e){
    std::cout << e.c;
    }); 
```

# text - 谷歌应用脚 本从网页抓取数据

> ID：15028614
> 
> 赞同：3
> 
> 时间：2013-02-22T16:19:41.313
> 
> 标签：text, google-apps-script, spreadsheet, pull

在制作这个脚本之前，我曾帮助我将玩家人数从网站上拉下来，并将其记录到带有日期和时间戳的电子表格中，这是：

```
function pullRuneScape() {
  var page = UrlFetchApp.fetch('http://runescape.com/title.ws').getContentText();
  var number = page.match(/PlayerCount.*>([0-9,]+)</)[1];
  SpreadsheetApp.getActive().getSheetByName('RuneScape').appendRow([new Date(), number]);
} 
```

基本上在网页中，他们列出了玩家的数量，我想每 5 分钟左右记录一次，但他们还有另一个网站，我也想从中获取号码，我需要一些帮助。

在[http://oldschool.runescape.com/slu](http://oldschool.runescape.com/slu)

我想在该网站的顶部获取玩家数量，并像我在这里一样记录它：[https ://docs.google.com/spreadsheet/ccc?key=0AjrAPynUEUl9dGtIZFY0TlRFUllVcWFyZDZ2c2o5Tnc#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AjrAPynUEUl9dGtIZFY0TlRFUllVcWFyZDZ2c2o5Tnc#gid=0)

其中A列是日期和时间，B只是人数，所以输出就像`1/1/2013 0:00:48 77,439`

如果你能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:21:28.753

阅读如何使用正则表达式。这将帮助你弄清楚这段代码在做什么。请不要只复制我在下面发布的代码。在 Stack Overflow，我们不会为您编写代码；如果出现问题，我们会帮助您。

```
var page = UrlFetchApp.fetch('http://oldschool.runescape.com/slu').getContentText();
var number = page.match(/There are currently ([0-9,]+)/)[1]; 
```

# knockout.js - 具有可写计算属性的 Knockout.js 绑定

> ID：15028618
> 
> 赞同：0
> 
> 时间：2013-02-22T16:20:02.350
> 
> 标签：knockout.js

html：（生成我的knockoutmvc）

```
<select class="span12" data-bind="options : VehicleManufacturers,optionsText : function(item) { return item.Name; },optionsCaption : 'Select Manufacturer...',value : VehicleManufacturer"
id="VehicleManufacturer">
    <option value="">Select Manufacturer...</option>
    <option value="">AUDI</option>
</select>
<span data-bind="with: VehicleManufacturer">
    <span data-bind="text: Name"></span>
</span> 
```

脚本：

```
var viewModelJs = {
     "VehicleManufacturers": [{
         "Id": 5,
         "Name": "AUDI"
     }],
     "VehicleManufacturer": null
 };
 var viewModel = ko.mapping.fromJS(viewModelJs);
 ko.applyBindings(viewModel);

viewModel.VehicleManufacturer = ko.computed({
    read: function () {
        return viewModel.VehicleManufacturer;
    },
    write: function (manufacturer) {
        // Populate Model list routine
    },
    owner: viewModel
}); 
```

JsFiddle：http: [//jsfiddle.net/ryDjs/2/](http://jsfiddle.net/ryDjs/2/)

我可能不太正确地进行绑定，我想要实现的是根据[本文](http://marcofranssen.azurewebsites.net/knockout-that-cascading-dropdown/)的下拉级联，它与上面的代码一起使用，除了`"with: VehicleManufacturer"`绑定，即未显示所选制造商的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:42:25.693

我*认为*a`computed`在这里使用是错误的（您链接到的文章已关闭）。`computed`当您要计算取决于*其他*可观察属性的值时，通常使用A。您计算的`read`函数只返回计算本身。

我将对其进行修改以使用普通的可观察对象并手动订阅该可观察对象的更改：

```
var viewModelJs = {
    "VehicleManufacturers": [{
        "Id": 5,
        "Name": "AUDI"
     }],
     "VehicleManufacturer": null
};
var viewModel = ko.mapping.fromJS(viewModelJs);
ko.applyBindings(viewModel);

viewModel.VehicleManufacturer.subscribe(function (manufacturer) {
    alert('dfdf'); 
}); 
```

**示例：http:** [//jsfiddle.net/ryDjs/7/](http://jsfiddle.net/ryDjs/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:05:27.390

这[是你想要完成的](http://jsfiddle.net/LBbk3/)吗？小提琴坏了，因为你没有参考`ko.mapping`.

### 更新：

安德鲁是对的，你不应该使用`computed`s 来写值。`Computed`s 应该是只读的。当您想从其他值派生一个值时使用它们。

我[这里有另一个小提琴](http://jsfiddle.net/3GUuR/)可以解决你的问题。它使用 a `computed`，但您也可以使用 a 来执行此操作`subscribe`。

# google-maps-api-3 - 使用 onclick javascript google maps 关闭信息窗口

> ID：15028619
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:20:02.360
> 
> 标签：google-maps-api-3, infowindow

我正在尝试做一些非常简单的事情，但是搜索结果是空的，由于某种原因我无法解决这个问题（我是 JS 初学者）。我正在尝试使用标签中的 onclick 关闭信息窗口。我知道您可以通过单击“x”来关闭它，但这样做的目的更深。

我的代码：

```
function placeMarker(location) {
    marker = new google.maps.Marker({
    position: location,
    map: map,
  });
  var infowindow = new google.maps.InfoWindow({
    content: "<a href='#' id='link' onclick='infowindow.close()'>Close</a>"
  });
  infowindow.open(map,marker);
} 
```

这样的事情可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:40:43.463

assuming you may have multiple infoWindow-instances(with your current code this will happen when you call the function multiple times):

You'll need to use a Node instead of a string as `content`. When you do so, you'll be able to use a reference to the infowindow from within the function(a closure) and assign the click-function using `addDomListener`:

```
function placeMarker(location) {
    var marker = new google.maps.Marker({
               position: location,
               map: map,
             }),
        infowindow = new google.maps.InfoWindow(),
        content    = document.createElement('a');

    content.setAttribute('href','#');
    content.appendChild(document.createTextNode('close'));
    google.maps.event.addDomListener(content,'click',
                                     function(){infowindow.close();})
    infowindow.setContent(content);
    infowindow.open(map,marker);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:51:22.690

是的，您的实现将按照您列出的方式工作，假设：

1.  您使用单个通用信息窗口
2.  该`infowindow`变量是全局的（在任何函数之外定义）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:39:04.437

您不需要像您所拥有的那样的紧密链接`onclick='infowindow.close()`。InfoWindow 对象已经有一个“关闭”图标。**X**

为确保在任何给定时间只打开一个 InfoWindow，请将其设为单个全局对象并使用关联的标记作为参数打开：

```
//Global
var infowindow = new google.maps.InfoWindow({}); 
```

接着...

```
function placeMarker(location) {
    marker = new google.maps.Marker({
    position: location,
    map: map,
  });
  infowindow = new google.maps.InfoWindow({
    position: location,
    content: "Hello from this marker"
  });
  infowindow.open(map,marker);
 } 
```

# facebook - 从 facebook 链接到我的 facebook 页面，如框插件不显示帖子

> ID：15028620
> 
> 赞同：0
> 
> 时间：2013-02-22T16:20:02.250
> 
> 标签：facebook, plugins

我该怎么做才能使我的 facebook 帐户的链接显示 facebook like 框？

[我刚刚从https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)复制并粘贴了 html 代码

首先，当我将该示例代码复制并粘贴到我的测试页面时，插件确实可以工作。

参见：net-gal.com/fbTest2.html

所以它与我的 facebook 页面的链接是隔离的。

```
<div class="fb-like-box" data-href="http://www.facebook.com/ginger.lindbergh" data-width="292" data-show-faces="true" data-stream="true" data-header="true"></div> 
```

参见：net-gal.com/fbTest.html

我还尝试使用我的数字 facebook id：

```
<div class="fb-like-box" data-href="http://www.facebook.com/1520846863" data-width="292" data-show-faces="true" data-stream="true" data-header="true"></div> 
```

参见：net-gal.com/fbTest3.html

上面都没有拉在类似的盒子里。

我的 facebook 安全设置允许插件访问。虽然我今天在我的 fb 页面上只有 1 个测试帖子，但它仍然应该把它拉起来。

facebook like box 能否在一个简单的 Facebook 页面上正常工作，还是必须是粉丝页面或特殊的东西？有谁知道为什么它不显示我的喜欢框但显示示例？

***抱歉，我太新了，无法在此页面上发布超过 2 个链接。

顺便说一句，我在这里和通过谷歌搜索搜索了很多很多帖子，但没有找到适合我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:11:12.967

# android - 在 Android/SQLite 中获取未使用的 rowid 的有效方法？

> ID：15028621
> 
> 赞同：1
> 
> 时间：2013-02-22T16:20:03.717
> 
> 标签：android, sqlite

假设您不想为下面的表 myTable 回收 rowid。

为此，您定义：

```
CREATE TABLE myTable
(
  id INTEGER PRIMARY KEY AUTOINCREMENT ,
  <Other columns>
) 
```

然后你想在 android/SQLite 环境中获取下一个未使用的 rowid。

你将如何有效地做到这一点？

也许我们需要对象 android.database.sqlite.SQLiteDatabase 和也许（？）对象 android.database.sqlite.SQLiteStatement

但是完成这项任务的最有效方法是什么？

注意：我不想在 myTable 中创建行。但当然，如果这是完成这项工作的最佳方式，您可以创建行并将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:23:29.487

[您可以从sqlite_sequence 表](http://www.sqlite.org/fileformat2.html#seqtab)中读取该序列的当前值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:24:57.263

正如您所确定的，创建一行并删除它是一种有效的方法。另一种方法是运行

```
SELECT id FROM myTable ORDER BY id DESC 
```

然后查看返回的第一行的 id 并将其加一。不过要小心并发。如果在检查未使用的行后立即插入某些内容，则可能会出现一些意外行为。

**编辑：**查看 CL. 的答案。它更实用。另外，您可以手动更新增加该表的序列号，以保证您的行不会被使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T08:09:42.127

在`SQLiteOpenHelper`你使用的内部，开始一个事务。插入一些数据，然后回滚。

这样，您将能够获得下一行 id，如下所示：

```
public long nextId() {
    long rowId = -1;

    SQLiteDatabase db = getWritableDatabase();
    db.beginTransaction();
    try {
        ContentValues values = new ContentValues();
        // fill values ...

        // insert a valid row into your table
        rowId = db.insert(TABLE_NAME, null, values);

        // NOTE: we don't call  db.setTransactionSuccessful()
        // so as to rollback and cancel the last changes
    } finally {
        db.endTransaction();
    }
    return rowId;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T17:30:05.113

所以答案是这样的：

```
db.execSQL("UPDATE sqlite_sequence set seq=seq+1 WHERE name='myTable'");

SQLiteStatement st = db.compileStatement("SELECT seq from sqlite_sequence WHERE name='myTable'");
long v = st.simpleQueryForLong();
st.close(); 
```

现在 v 是未使用的 rowid ，其他任何人都不会得到。也许这些语句必须在同一个事务中。

对于简单且相当常见的任务来说不是那么简单吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:32:20.863

我从来不明白为什么有人需要这样做，但可以做到：

[SQLite 文档](http://www.sqlite.org/autoinc.html)提到 auto_increment 值存储在一个`sqlite_sequence`表中，当您使用 auto_increments 时，该表会在您的数据库中自动创建。

[这个 SO 答案](https://stackoverflow.com/questions/107005/predict-next-auto-inserted-row-id-sqlite#answer-5301923)解释了一种查询`sqlite_sequence`表以查找当前最大 ID 的方法，然后您可以向它添加 1，并且 99.9% 的时间这将是下一个发布的 ID。

# javascript - 在元素上引发 mousemove 事件

> ID：15028626
> 
> 赞同：0
> 
> 时间：2013-02-22T16:20:15.493
> 
> 标签：javascript, events

所以我有一个元素`var element = document.getElementById("myele")`，我想`onmousemove`手动调用它的事件处理程序。

我尝试了以下方法，但得到一个错误，它不是一个函数：

```
element.onmousemove() 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:24:26.240

……

`mousemove`要在元素上调用事件，请移除`on`

```
element.mousemove() 
```

# android - 在 tabwidget 中设置选项卡的固定宽度

> ID：15028627
> 
> 赞同：1
> 
> 时间：2013-02-22T16:20:15.653
> 
> 标签：android, tabwidget

搜索了很多，但无法找到满意的答案。我的应用程序正在使用选项卡小部件，我想让每个选项卡的宽度相等。我的主要活动广告中有大约 6-8 个标签，我还添加了一个水平滚动视图。我希望它看起来有点像 android 的内置任务管理器或管理应用程序设置布局。当前选项卡的大小等于选项卡标题的长度。可以做什么？谢谢你。

# oracle - 外部表的 ORACLE 目录权限

> ID：15028628
> 
> 赞同：1
> 
> 时间：2013-02-22T16:20:22.060
> 
> 标签：oracle, permissions, directory, external

我有一个 oracle 外部表。为使用外部表读取输入 CSV 文件创建了一个 oracle 目录。外部表的 DISCARD、LOG 和 BAD 文件将在同一目录中创建。

当 unix 上相应目录的权限为“1770”时，外部表无法从该目录读取或写入。当该目录的权限更改为“1777”时，外部表能够对该目录进行读写。

当该目录的权限为 1770 时，我无法弄清楚问题出在哪里。请向我提供有关此奇怪行为的任何提示。

请注意，oracle 模式用户对该目录具有 READ 和 WRITE 授权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:26:53.353

哪个用户和组拥有操作系统目录？什么操作系统用户运行 Oracle 数据库？运行 Oracle 的操作系统用户属于哪个组？

从您的描述中听起来，运行 Oracle 的操作系统用户不拥有操作系统目录，也不属于拥有该目录的组。在 Unix 中，目录的权限被授予用户（前 7 个）、组（第二个 7）和公众（第三个数字，在您的示例中为 7 或 0）。如果更改与公众相关的权限正在改变行为，这意味着 Oracle 操作系统用户仅具有授予该目录上的公众的权限。

# c# - 我如何在标签中显示日期时间

> ID：15028630
> 
> 赞同：1
> 
> 时间：2013-02-22T16:20:26.073
> 
> 标签：c#

我有 a `label`， a`textbox`和`button`a `form`。我想在当前日期/时间中添加天数。天数与 相关，`textbox`并且`datetime`显示在 上`label`。

```
Double ce = Convert.ToDouble(textBox1.Text)
DateTime cs = DateTime.Now.AddDays(ce) 
```

但它会引发输入错误的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:25:49.557

如果您使用[TryParse](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)，您可以检查字符串中的值是否可以转换。如果不是，您可以通知用户出现问题。

```
Double days = 0;
DateTime cs= DateTime.Now;
bool daysOk = Double.TryParse(textbox1.Text, out days);
if (daysOk) 
{
   cs = cs.AddDays(days);
}
else
{
   textbox1.Text = "invalid days";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:26:20.213

编辑* 添加 Parse 而不是 Tryparse 以显示错误而不是添加 0 天

```
 try
        {
            double days = double.Parse(textBox1.Text);
            label1.Text = DateTime.Now.AddDays(days).ToLongDateString();
        }
        catch (Exception ex) { MessageBox.Show(ex.Message, "error"); } 
```

# java - Java 程序中的方法不会获取用户输入

> ID：15028631
> 
> 赞同：0
> 
> 时间：2013-02-22T16:20:26.993
> 
> 标签：java, methods, variable-assignment, user-input

我正在编写的程序是确定一年是否是闰年。这是一个作业，所以我需要使用我在程序中编写的四个方法。程序编译并运行，它在适当的地方要求用户输入，但它不接受输入到程序中。也就是说这一年是闰年，无论输入什么都循环。我很困惑哪里有错误，因为这个程序似乎与我们给出的例子相匹配。

```
import java.util.Scanner;

public class LeapYear {
    public static void main(String[] args) {
        boolean repeat;
        String computeanother, yes="yes";
        Scanner kb=new Scanner(System.in);
        int year = -1;
        boolean leap;

        do
        { 
            displayInstructions();
            getYear(year);
            leap = isLeap(year);
            displayResults(year, leap);
            System.out.println("Would you like to compute another year?");
            computeanother = kb.nextLine();

            if(computeanother.equals(yes))
                repeat=true;
            else 
                repeat=false;
        } while(repeat=true);
    }

    public static void displayInstructions()
    {
        System.out.println("This program is designed to predict whether or not a year is a leap year.");
        System.out.println("When prompted please enter a positive number for the year.");
        System.out.println("Once the program has run completely, it will state the year and whether it is a leap year.");
    }

    public static void getYear(int year)
    {
        Scanner kb = new Scanner(System.in);
        do {
            System.out.println("Please enter the year.");
            year=kb.nextInt();
        } while (year < 0);   
    }

    public static boolean isLeap(int year)
    {
        boolean leap;
        if ((year%4==0 && year%100 != 0) || year%400==0){
            leap = true;
            return true;
        } else {
            leap = false;   
            return false;
        }
    }

    public static void displayResults(int year, boolean leap)
    {
        if (leap = true) {
            System.out.println("The year " +year); 
            System.out.println("is a leap year.");
        } else {
            System.out.println("The year " +year); 
            System.out.println("is not a leap year.");
        }
    }

} 
```

感谢大家的帮助！编辑后的代码如下所示：

```
import java.util.Scanner;

public class LeapYear{
public static void main(String[] args){
boolean repeat;
String computeanother, yes="yes";
Scanner kb=new Scanner(System.in);
int year = -1;
boolean leap;
do
{ 
displayInstructions();
getYear(year);
leap = isLeap(year);
displayResults(year, leap);
System.out.println("Would you like to compute another year?");
computeanother = kb.nextLine();
repeat = computeanother.equals(yes);
}while(repeat);
 }  
public static void displayInstructions()
{
System.out.println("This program is designed to predict whether or not a year is a leap year.");
    System.out.println("When prompted please enter a positive number for the year.");
System.out.println("Once the program has run completely, it will state the year and whether it is a leap year.");
}

public static int getYear(int year)
{
    Scanner kb = new Scanner(System.in);
    do{
        System.out.println("Please enter the year.");
        year=kb.nextInt();
    }while (year < 0);
    return year; 
}

public static boolean isLeap(int year)
{
boolean leap;
year = getYear(year);
if ((year%4==0 && year%100 != 0) || year%400==0){
    leap = true;
    return true;}
else{
    leap = false;   
    return false;}
}

public static int displayResults(int year, boolean leap)
{
year = getYear(year);
if (leap == true){
   System.out.println("The year " +year); 
    System.out.println("is a leap year.");}
else{
   System.out.println("The year " +year); 
    System.out.println("is not a leap year.");}
return year;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:24:36.247

```
while(repeat=true); 
```

在while循环中应该是：

```
while(repeat == true); 
```

或者

```
while(repeat); 
```

除了每个人都注意到这一点之外，还可以注意到你犯了两次这个错误：

```
 if (leap = true) { 
```

应该：

```
if (leap == true) { 
```

或者

```
if (leap) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:31:01.660

您还可以缩短代码：

```
 do{ 
        displayInstructions();
        getYear(year);
        leap = isLeap(year);
        displayResults(year, leap);
        System.out.println("Would you like to compute another year?");
        computeanother = kb.nextLine();
        repeat = computeanother.equals(yes)  //this line makes code shorter 
    } while(repeat); 
```

事实上，总是避免像这个著名的模式这样的代码冗余：

```
if(expression) return true; else return false; 
```

那变成：`return expression;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:24:48.690

改变这个：

```
while(repeat=true); 
```

至

```
while(repeat==true); 
```

或者

```
while(repeat); 
```

在这里`while(repeat=true);`，您正在分配一个值，而不是比较。`while(repeat==true);`或者`while(repeat);`这将比较值。像这样测试`while(repeat);`而不是明显的测试总是更好`while(repeat==true);`。我希望它有所帮助。

而且您没有获得`year`as -1 的价值，因为您正在从此方法返回`getYear(year);`但忽略了该价值。将其更改为：

`year = getYear(year);`

这应该有效。

# python - Pickle 作为性能基准，或者更快的遏制检查

> ID：15028632
> 
> 赞同：0
> 
> 时间：2013-02-22T16:20:30.770
> 
> 标签：python

我正在从 CSV 加载数据结构。最终的结构是由项目对象组成的几个集合类，每个对象都有一个或两个属性，这些属性指向其他集合中的子级或父级。

这不是很多数据。CSV 为 800KB。目前从 CSV 加载数据结构大约需要**3.5 秒**。最初，我有一些`O(n^2)`代码被完全执行的包含查找破坏了`n^2`，但我添加了一些索引并真正减少了它。

现在我的弱点仍然是包含查找，但是是线性的。当您的程序中最耗时的组件是重复执行以下代码时，这是令人沮丧的：

```
def add_thing(thing):
    if thing not in things:
        things.append(thing) 
```

我可能遗漏了一些东西（我希望我是！），但似乎我无能为力来加快这些速度。我不希望`things`集合`thing`多次包含相同的内容。为此，我必须检查已经存在的每一个项目。也许有更快`list`的方法可以为我做到这一点？基于 C 的、无重复的`list`?

无论如何，我想我会腌制得到的数据结构，看看它需要多长时间`load`。诚然，我不知道 unpickling 会发生什么，但我的想法是 unpickling 必须更接近原始 I/O，因为数据结构本身已经在 pickle 中布局。我惊讶地发现`pickle.load`这个数据结构需要**2.4 秒**。只比我的 CSV slop 快 30%。**cPickle 在0.4 seconds 内**完成了同样的工作，但我正试图尽可能地做到这一点，但我意识到我可能已经失败了。但我希望你能看到我的思路，批评它的弱点。

那么，如果有的话，我应该从练习中收集什么？

*   性能`pickle.load`和我的 CSV 加载代码彼此无关，我不应该比较它们吗？
*   像这样的事情需要很长时间？
*   我可以进一步优化我的收容查找吗？
*   我都搞错了？

（注意我正在使用 cProfile 进行分析）

# titanium-mobile - 如何测试 Titanium 应用程序的性能

> ID：15028634
> 
> 赞同：0
> 
> 时间：2013-02-22T16:20:45.967
> 
> 标签：titanium-mobile, appcelerator-mobile

许多开发人员现在正在开发 iphone 应用程序 ..in 钛平台。如何检查应用程序的性能以及如何找到内存泄漏和其他限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:20:45.967

我们可以检查钛应用程序的性能和内存泄漏。使用简单的步骤

我们的应用程序已构建。转到构建文件夹和侧面，您将在其中找到 iphone，您可以看到 xcode 项目...在 Xcode 中打开它现在您可以测试应用程序

请仔细阅读下面给出的文档：

[https://wiki.appcelerator.org/display/guides/Managing+Memory+and+Finding+Leaks](https://wiki.appcelerator.org/display/guides/Managing+Memory+and+Finding+Leaks)

# jquery - IE7 xml .attr 不起作用

> ID：15028640
> 
> 赞同：1
> 
> 时间：2013-02-22T16:20:57.423
> 
> 标签：jquery, xml, ajax, internet-explorer-7

嗨，我想知道有人可以帮忙，我正在做一个项目，它在 IE8 及更高版本、firefox、chrome 等中运行良好，但 IE7 导致了重大问题。下面的代码尤其有问题。

```
$(xml).find('Data').each(function () {
      //alert($(this).attr('Passret').val());

        if ($(this).attr('Passret') === 'yespass') {

//do something
} 
```

IE7 没有识别 if 语句，因为 .attr 似乎未定义。有什么建议么？

这是一个xml的例子

```
<Data Passret="yespass" Custref="32"><Query>0.0020s</Query></Data> 
```

亲切的问候雷切尔

# python - 在我的 Mac 上以 root 身份运行 pip 时出现“权限被拒绝”

> ID：15028648
> 
> 赞同：126
> 
> 时间：2013-02-22T16:21:22.327
> 
> 标签：python, macos, pip, sudo

我已经开始使用我的 Mac 来安装 Python 包，就像在工作中使用我的 Windows PC 一样；但是，在我的 Mac 上，我在写入日志文件或站点包时经常遇到*权限被拒绝错误。*

因此，我考虑过在下运行`pip install <package>`，`sudo`但考虑到我只是希望将它安装在我当前的用户帐户下，这是安全/可接受的使用 sudo 吗？

来自日志文件 I/O 错误的示例回溯：

```
Command /usr/bin/python -c "import setuptools;__file__='/Users/markwalker/build/pycrypto/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/tq/hy1fz_4j27v6rstzzw4vymnr0000gp/T/pip-k6f2FU-record/install-record.txt failed with error code 1 in /Users/markwalker/build/pycrypto
Storing complete log in /Users/markwalker/Library/Logs/pip.log
Traceback (most recent call last):
  File "/usr/local/bin/pip", line 8, in <module>
    load_entry_point('pip==1.1', 'console_scripts', 'pip')()
  File "/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg/pip/__init__.py", line 116, in main
    return command.main(args[1:], options)
  File "/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 141, in main
    log_fp = open_logfile(log_fn, 'w')
  File "/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 168, in open_logfile
    log_fp = open(filename, mode)
IOError: [Errno 13] Permission denied: '/Users/markwalker/Library/Logs/pip.log' 
```

**更新** 这可能归结为权限，但是最好的方法是为您的 python 项目使用虚拟环境。`sudo pip`除非绝对必要，否则应避免跑步。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-22T16:25:43.153

使用[虚拟环境](http://www.virtualenv.org)：

```
$ virtualenv myenv
.. some output ..
$ source myenv/bin/activate
(myenv) $ pip install what-i-want 
```

`sudo`当你想为全局、系统范围的 Python 安装安装东西时，你只使用或提升权限。

最好使用为您隔离包的虚拟环境。这样你就可以在不污染全局 python 安装的情况下玩耍。

作为奖励，virtualenv 不需要提升权限。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-05-08T21:22:13.080

> `pip install`在下面运行是否可以接受和安全`sudo`？

它不安全，而且不受欢迎——请参阅[运行 'sudo pip' 的风险是什么？](https://stackoverflow.com/q/21055859/95735) 要在您的主目录中安装 Python 包，您不需要 root 权限。请参阅pip 选项的[说明](https://pip.pypa.io/en/stable/user_guide/#user-installs)。`--user`

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-07-10T23:19:31.543

您最初的问题是 pip 无法将日志写入文件夹。

```
IOError: [Errno 13] Permission denied: '/Users/markwalker/Library/Logs/pip.log' 
```

您需要 cd 进入一个文件夹，在该文件夹中调用的进程可以像`/tmp`这样写，`cd /tmp`然后重新调用该命令可能会起作用，但不是您想要的。

**但**实际上对于这种特殊情况（您不想`sudo`用于安装 python 包）并且不需要全局包安装，您可以使用这样的`--user`标志：

```
pip install --user <packagename> 
```

它会工作得很好。

我假设您有一个用户 python python 安装并且不想费心阅读有关[virtualenv](https://virtualenv.pypa.io/en/stable/)（这不是非常用户友好）或[pipenv](https://github.com/pypa/pipenv)。

正如评论部分的一些人指出的那样，除非您不知道该怎么做并陷入困境，否则下一种方法不是一个好主意：

**全局包**的另一种方法，例如在您的情况下您想要执行以下操作：

```
chown -R $USER /Library/Python/2.7/site-packages/ 
```

或更一般地说

```
chown -R $USER <path to your global pip packages> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-10-14T16:40:36.940

因为我遇到了同样的问题，所以我想强调一下，实际上[Brian Cain](https://stackoverflow.com/users/489590/brian-cain)的第一条评论是“IOError：[Errno 13]”问题的解决方案：

如果在临时目录 ( `cd /tmp`) 中执行，如果我运行 IOError 将不再发生`sudo pip install foo`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-22T16:25:43.337

看起来你的权限被搞砸了。输入`chown -R markwalker ~`终端，然后再试`pip`一次？让我知道你是否排序。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-02-26T02:05:43.187

`virtualenvwrapper`安装成功后出现问题`virtualenv`。

执行此操作后，我的终端抱怨：

```
pip install virtualenvwrapper 
```

所以，我没有成功尝试这个~~（不推荐）~~：

```
sudo pip install virtualenvwrapper 
```

然后，我***成功地***安装了它：

```
pip install --user virtualenvwrapper 
```

# java - 抓取字符串中的单词和字符数

> ID：15028652
> 
> 赞同：0
> 
> 时间：2013-02-22T16:21:42.670
> 
> 标签：java, regex, string, tokenize, text-analysis

我正在尝试编写一个**超高效的**方法，它在两种“模式”（`WORD`和`CHARACTER`）下运行，它接受一个字符串并告诉我其中的单词数（由 1+ 个空格分隔）或字符（非空格字符）：

```
public int getCount(String toExamine, boolean wordMode) {
    int count = 0;

    if(wordMode) {
        // Return the number of words.
    }
    else {
        // Return the number of characers.
    }

    return count;
} 
```

我*知道*我可以`WORD`使用以下方式完成模式版本`StringTokenizer`：

```
StringTokenizer tokenizer = new StringTokenizer(" "); 
```

但我完全不知道该`CHARACTER`模式使用什么（非空白字符的数量）。我敢肯定我可以使用一些粗略的东西，例如：

```
for(int i = 0; i < toExamine.length; i++)
    if(Character.isSpace(toExamine.charAt(i)))
        count++; 
```

但这有点难看，可能不是最有效的方法（这`StringTokenizer`件作品也是如此）。是否可以在这里使用正则表达式，或者其他一些 Java 字符串/字符的疯狂，可以让我以超高效的方式获得我需要的东西？我在这里处理数以千万计的字符串。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:28:38.437

隐蔽到 char 数组并使用 for 循环进行迭代

```
int charCount =0;
for(int i=0; i<sentence.length(); i++) {
    if(!Character.isWhitespace(sentence.charAt(i))) {
        charCount++;
    }
} 
```

以其他方式替换所有空格并用下面的代码计算长度

```
int charcount = 0;
String newSentence =sentence.replaceAll("\\s+", "");
charcount = newSentence.length(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:32:41.967

这并不比`for`循环快，但是如果您需要使用正则表达式，您可以尝试以下操作：

```
int noSpaces=toExamine.split("\\s+").length-1; 
```

数字 pf 字符将是：

```
int noChar=toExamine.length-noSpaces; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T20:07:49.103

下面的测试程序产生以下结果。程序会输出 5 组这样的结果，但我这里只显示一组。带有的行`//`是我的注释，而不是程序的输出。

```
// 非空间占空间的百分比约为 0.857
// 生成的完整字符串的长度为 1 075 662
0.857 1075662
// Name_of_method (Result): 15_Runs_In_Microseconds | Average_In_Microseconds
countWords_1 (131489): 20465 20240 21045 20193 20000 19972 20551 39489 19859 19971 19889 19877 20049 19900 19949 | 21429
countWords_2 (131489)：255500 258723 254543 255956 253606 263549 254096 254402 254191 254296 253752 261501 260788 261574 254178 | 256710
countWords_3 (131489)：26225 25022 24830 24829 24545 24819 25459 24625 25628 24700 24936 24794 24794 24849 25026 | 25005
countWords_4 (131489)：24537 24169 25283 24862 23863 23902 24068 23906 51472 23731 23889 23844 23832 24275 23896 | 25968
countWords_5 (131489)：81087 112095 80008 81290 81472 80581 80717 80460 79870 80557 80694 80923 145686 80564 80849 | 87123
countWords_6 (131489): 114391 114146 111946 111873 112331 167207 134117 118217 112843 112804 113533 111834 112830 112392 118181 | 118576
countChars_1 (922546): 150507 109102 150453 111352 149753 108099 153842 109034 150817 117258 149219 108194 152839 110340 149524 | 132022
countChars_2 (922546): 28779 29473 52499 27182 26519 27743 26717 27161 26451 27060 26307 27309 26350 62824 33134 | 31700
countChars_3 (922546): 25408 25127 24980 24832 24624 24671 24848 24712 24634 24622 24607 24613 24661 24765 24883 | 24799
countChars_4 (922546): 81489 82246 80906 80718 80803 81147 81113 81798 81030 81024 108508 80768 80780 80671 80753 | 82916
countChars_5 (922546)：26086 25546 24846 43734 25016 25083 24894 25530 25031 25041 25114 24935 25358 24895 43498 | 27640
countChars_6 (922546): 102559 102257 101381 101589 103432 101739 102794 129472 101305 101834 103124 101486 101254 102874 101481 | 103905

```

`countWords_2`和`countWords_6`是涉及正则表达式和技巧的单线方法，`replaceAll`与其他方法相比非常慢。`countWords_5`使用预编译`Pattern`进行匹配，比使用 的单行代码更快`replaceAll`，但与其他代码相比仍然较慢。

`countWords_3`并且`countWords_4`是简单的循环，但有一些细微的差别。时间没有显示出决定性的差异。（我看时序是大还是小的一致性，时序上的差异应该至少在5ms左右）。

`countWords_1``StringTokenizer` **与不包括 Unicode 字符的默认分隔符一起**使用。因此，这里没有很好的比较，因为语义完全不同。

对于计算单词的数量（定义为非空白字符序列），简单循环比我能想到的正则表达式方法更快。

`countChars_1`并且`countChars_6`是涉及使用正则表达式和`replaceAll`. 同样，它比`countChars_4`使用预编译的`Pattern`. 同样，所有正则表达式解决方案都比简单循环慢。

`countChars_2`，`countChars_3`并且`countChars_5`是简单循环的一些变体。我观察到的许多运行的差异不是很一致，因此不是结论`countChars_3`性`countChars_5` *的*。但`countChars2`通常会稍微慢一些，可能是由于必须为函数`char[]`返回的分配新内存。`toCharArray`

*我不保证我在这里使用的方法是最快的，但它显示了一些关于循环与正则表达式解决方案相比的简单程度的想法。*

* * *

您可以运行此测试程序并自行决定。我已经编写了测试，以便您可以自由地：

*   更改生成的测试字符串的长度以及空格字符出现的频率。

    目前，测试字符串的长度在 700 000 到 1 300 000 个字符之间是随机的，非空格与空格字符的比例在 4:1 到 9:1 之间变化（我猜测一般文本）。您可以将 设置`FLUCTUATION`为 0，以便长度或比率是固定的 - 当您想要测试边缘情况时非常有用。

*   替换测试字符串的生成方式（真实数据而不是随机生成的字符串）。

    目前，使用了 ASCII 字符的一个子集：一些 64 个非空格字符；空格、换行符、制表符和回车符用作空白字符。有 Unicode 空白字符，但未包含在当前测试中。

*   添加新方法进行测试，用`@Test`注释标记。

* * *

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

import java.util.Arrays;
import java.util.ArrayList;
import java.util.Random;
import java.util.StringTokenizer;

import java.lang.reflect.Method;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import java.lang.annotation.ElementType;

class TestStringProcessing_15028652 {

  @Retention(RetentionPolicy.RUNTIME)
  @Target(ElementType.METHOD)
  private @interface Test {};

  // From 0.80 - 0.90 (4:1 to 9:1 non-space:space characters ratio)
  private static final double NON_SPACE_RATIO = 0.85;
  private static final double NON_SPACE_RATIO_FLUCTUATION = 0.05;

  // With the way the test is written, it is not going to work well with small input (1000 is NOT enough)
  // Currently set to 700 000 - 1 300 000 characters
  private static final int NUM_CHARS = 1000000;
  private static final int NUM_CHARS_FLUCTUATION = 300000;

  // Some whitespace characters
  private static final char WHITESPACES[] = {' ', '\t', '\r', '\n'};

  // Number of times to run all methods
  private static final int NUM_OUTER = 5;
  // Number of times to run each method
  private static final int NUM_REPEAT = 15;

  static {
    for (int i = 0; i < WHITESPACES.length; i++) {
      assert(Character.isWhitespace(WHITESPACES[i]));
    }
  }

  private static Random random = new Random();

  private static String generateInput() {

    double nonSpaceRatio = NON_SPACE_RATIO + random.nextDouble() * 2 * NON_SPACE_RATIO_FLUCTUATION - NON_SPACE_RATIO_FLUCTUATION;
    int numChars = NUM_CHARS + random.nextInt(2 * NUM_CHARS_FLUCTUATION) - NUM_CHARS_FLUCTUATION;

    System.out.printf("%.3f %d\n", nonSpaceRatio, numChars);

    StringBuffer output = new StringBuffer();

    for (int i = 0; i < numChars; i++) {
      if (random.nextDouble() < nonSpaceRatio) {
        output.append((char) (random.nextInt(64) + '0'));
      } else {
        output.append(WHITESPACES[random.nextInt(WHITESPACES.length)]);
      }
    }

    return output.toString();
  }

  private static ArrayList<Method> getTestMethods() {
    Class<?> klass = null;
    try {
      klass = Class.forName(Thread.currentThread().getStackTrace()[1].getClassName());
    } catch (Exception e) {
      e.printStackTrace();
      System.err.println("Something really bad happened. Bailling out...");
      System.exit(1);
    }
    Method[] methods = klass.getMethods();
    // System.out.println(klass);
    // System.out.println(Arrays.toString(methods));

    ArrayList<Method> testMethods = new ArrayList<Method>();

    for (Method method: methods) {
        if (method.isAnnotationPresent(Test.class)) {
          testMethods.add(method);
        }
    }

    return testMethods;
  }

  public static void runTestReflection() {
    ArrayList<Method> methods = getTestMethods();

    for (int t = 0; t < NUM_OUTER; t++) {
      String input = generateInput();

      for (Method method: methods) {

        try {
          System.out.print(method.getName() + " (" + method.invoke(null, input) + "): ");
        } catch (Exception e) {
          e.printStackTrace();
        }

        long sum = 0;
        for (int i = 0; i < NUM_REPEAT; i++) {
          long start, end;
          Object result;

          try {
            start = System.nanoTime();
            result = method.invoke(null, input);
            end = System.nanoTime();

            System.out.print((end - start) / 1000 + " ");
            sum += (end - start) / 1000;
          } catch (Exception e) {
            e.printStackTrace();
          }
        }

        System.out.println("| " + sum / NUM_REPEAT);
      }

      System.out.println();
    }
  }

  public static void main(String args[]) {
    runTestReflection();
  }

  @Test
  public static int countWords_1(String input) {
    // WARNING: This is NOT the same as isWhitespace, since isWhitespace
    // also consider Unicode characters.
    return new StringTokenizer(input).countTokens();
  }

  @Test
  public static int countWords_2(String input) {
    return input.replaceAll("\\S+", "$0 ").length() - input.length();
  }

  @Test
  public static int countWords_3(String input) {
    int count = 0;
    boolean in = false;

    for (int i = 0; i < input.length(); i++) {
      if (!Character.isWhitespace(input.charAt(i))) {
        if (!in) {
          in = true;
          count++;
        }
      } else {
        in = false;
      }
    }

    return count;
  }

  @Test
  public static int countWords_4(String input) {
    int count = 0;

    for (int i = 0; i < input.length(); i++) {
      if (!Character.isWhitespace(input.charAt(i))) {
        do {
          i++;
        } while (i < input.length() && !Character.isWhitespace(input.charAt(i)));
        count++;
      }
    }

    return count;
  }

  @Test
  public static int countWords_5(String input) {
    int count = 0;
    Matcher m = p.matcher(input);

    while (m.find()) {
      count++;
    }

    return count;
  }

  @Test
  public static int countWords_6(String input) {
    return input.replaceAll("\\s*+\\S++\\s*+", " ").length();
  }

  @Test
  public static int countChars_1(String input) {
    return input.replaceAll("\\s+", "").length();
  }

  @Test
  public static int countChars_2(String input) {
    int count = 0;
    for (char c: input.toCharArray()) {
      if (!Character.isWhitespace(c)) {
        count++;
      }
    }

    return count;
  }

  @Test
  public static int countChars_3(String input) {
    int count = 0;
    for (int i = 0; i < input.length(); i++) {
      if (!Character.isWhitespace(input.charAt(i))) {
        count++;
      }
    }

    return count;
  }

  private static Pattern p = Pattern.compile("\\S+");

  @Test
  public static int countChars_4(String input) {
    Matcher m = p.matcher(input);
    int count = 0;

    while (m.find()) {
      count += m.end() - m.start();
    }

    return count;
  }

  @Test
  public static int countChars_5(String input) {
    int count = input.length();
    for (int i = 0; i < input.length(); i++) {
      if (Character.isWhitespace(input.charAt(i))) {
        count--;
      }
    }

    return count;
  }

  @Test
  public static int countChars_6(String input) {
    return input.length() - input.replaceAll("\\S+", "").length();
  }
} 
```

# c - 线程循环中的 C 数组分配

> ID：15028654
> 
> 赞同：2
> 
> 时间：2013-02-22T16:21:49.653
> 
> 标签：c, arrays, optimization, compiler-construction

# 动机

我试图通过保存各种环境，`setjmp`以便稍后跳回它们并调用函数并确保堆栈帧彼此运行。例如：

环境 [0] 堆栈：

```
----------
|  text  |
----------
|  data  |
----------
|        |
|        |
|        |
|        |
|        |
|        |
|        |
|  ~~~~  |
---------- 
```

其中波浪线代表 main 等的堆栈帧。

环境 [1] 堆栈：

```
----------
|  text  |
----------
|  data  |
----------
|        |
|        |
|        |
|  ****  |
|  ****  |
|  ****  |
|  ****  |
|  ~~~~  |
---------- 
```

星星代表我分配的一个大数组。

这个想法是，如果我`longjmp`开始`env[0]`运行一些方法，然后`longjmp`开始`env[1]`运行一些方法，堆栈帧`env[0]`将开始填充该数组中的空白空间，堆栈帧`env[1]`将位于该数组的顶部，并且不覆盖`env[0]`. 基本线程。

我还想要不止两个线程，事实上，我想要 MAXTHREADS。直观地说，它是这样工作的：

```
for(int i = 0; i < MAXTHREADS; i++) {
    char c[STACKSIZE];
    if( setjmp(env[i]) != 0 ) {
        /* Stuff that thread i will do goes here */
    }
} 
```

## 测试 1

但是，正如您在下面的测试程序中可以清楚地看到的那样，每个 c 数组都从堆栈上的同一位置开始，违背了目的。

```
for(int i = 0; i < 10; i++) {
    char c[10];
    printf("On Iteration %d array starts at %x and goes to %x\n",i,c,c+10);
} 
```

输出：

```
On Iteration 0 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 1 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 2 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 3 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 4 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 5 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 6 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 7 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 8 array starts at ffbfef02 and goes to ffbfef0c
On Iteration 9 array starts at ffbfef02 and goes to ffbfef0c 
```

出于多种原因，这是有道理的，范围表明 c 数组在循环结束时不再存在，另外编译器可能会将其移出循环，因为大小是静态的。

**测试 1 给了我想要的大小，但不是我想要的分配**

## 测试 2

所以我的下一个想法是分配一个 STACKSIZE * i 的数组，这样即使每个数组都从同一个位置开始，它们每次都会更大，并且在切换到那个环境时将我的堆栈指针推得足够远. 这是测试：

```
for(int i = 0; i < 10; i++) {
    char c[10 * i];
    printf("On Iteration %d array starts at %u and goes to %u\n",i,c,c+(10*i));
    //note: switched from %x to %u to make comparison mentally simpler
} 
```

然而，这输出

```
On Iteration 0 array starts at 4290768760 and goes to 4290768760
On Iteration 1 array starts at 4290768744 and goes to 4290768754
On Iteration 2 array starts at 4290768720 and goes to 4290768740
On Iteration 3 array starts at 4290768688 and goes to 4290768718
On Iteration 4 array starts at 4290768648 and goes to 4290768688
On Iteration 5 array starts at 4290768592 and goes to 4290768642
On Iteration 6 array starts at 4290768528 and goes to 4290768588
On Iteration 7 array starts at 4290768456 and goes to 4290768526
On Iteration 8 array starts at 4290768376 and goes to 4290768456
On Iteration 9 array starts at 4290768280 and goes to 4290768370 
```

一开始有点难看，但由于数字很大，你可以只关注最后三位数字。

第一个数组从*760*到*760——*很好，它是 i = 0

第二个数组从*744*到*754——*很好，我们移动了一点，但它是一个大小为 10 的数组，处于我们想要的一般位置

第三个数组从*720*到*740* —— 呃，哦，这个数组的起始点与其他数组不同，它的大小是原来的两倍。

为了说明堆栈上的模式，每个 * 代表一个数组中的 10 个字符，星块之间的间隙是数组之间的间隙：

```
*
*
*

*
*

*
~ 
```

波浪号是主要的，等等。

模式还在继续。这可能与机器有关，但我的机器是按顺序分配数组，而不是像固定大小的数组那样每次都回到底部。

**测试 2 给了我想要的分配，但大小比我想要的要大。**

## 测试 3

现在了解到我的机器将分配数组，如果它们的大小相同，则它们会相互覆盖，但如果它们的大小不同，则它们会堆叠在一起，我想也许我可以分配`STACKSIZE + i`而不是`STACKSIZE * i`每个。我进行了这个实验：

```
for(int i = 0; i < 10; i++) {
    char c[10+i];
    printf("On Iteration %d array starts at %u and goes to %u\n",i,c,c+10+i);
} 
```

哪个输出：

```
On Iteration 0 array starts at 4290768808 and goes to 4290768818
On Iteration 1 array starts at 4290768792 and goes to 4290768803
On Iteration 2 array starts at 4290768776 and goes to 4290768788
On Iteration 3 array starts at 4290768760 and goes to 4290768773
On Iteration 4 array starts at 4290768744 and goes to 4290768758
On Iteration 5 array starts at 4290768728 and goes to 4290768743
On Iteration 6 array starts at 4290768712 and goes to 4290768728
On Iteration 7 array starts at 4290768688 and goes to 4290768705
On Iteration 8 array starts at 4290768664 and goes to 4290768682
On Iteration 9 array starts at 4290768640 and goes to 4290768659 
```

经过分析，它使用了我预期的相同分配行为。

**测试 3 给了我想要的分配，尺寸接近我想要的，但仍然不完美**

# 问题

所以测试 3 的策略可以在我的原始代码中运行，分配 STACKSIZE + i 的 MAXTHREADS 数组，在每个数组之间保存 env，但它似乎不是最理想的。我在每个数组中分配额外的空间只是为了欺骗我的编译器。

有一个更好的方法吗？让编译器每次都分配新的 STACKSIZE 数组的其他技巧？

**如何使用测试 1 的大小分配测试 2 和 3？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:26:27.793

你必须做这样的事情：

```
jmp_buf states[NUMTHREADS]
char stacks[NUMTHREADS][STACKSIZE];
// your scheduler starts *after* this!
for(;;) {
    // setjmp to remember the current thread's state
    // longjmp to thread i+1 and use stacks[i+1][top]
} 
```

# list - 使用列表获取结果

> ID：15028659
> 
> 赞同：1
> 
> 时间：2013-02-22T16:22:04.393
> 
> 标签：list, scheme

### ;如何得到'b'中'a'的值？

*;不想在'b'中分配字母'a'想要'a'中包含的值*

```
(define a 5)
(define c '(a c))
(define b (car c))
(display b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:37:59.370

```
(define a 5)
(define c (list a 'c))
(define b (car c))
(display b) 
```

`'`相当于`quote`程序。所以`'(a c)`=>`(list 'a 'c)`

见：[http ://www.gnu.org/software/mit-scheme/documentation/mit-scheme-ref/Quoting.html#Quoting](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-ref/Quoting.html#Quoting)

或者，使用您的原始代码，您是在问您会怎么做`(eval b (the-environment))`？

# c# - 与asp.net中的隐藏字段相关的问题

> ID：15028661
> 
> 赞同：1
> 
> 时间：2013-02-22T16:22:09.010
> 
> 标签：c#, asp.net

我有一个 asp.net 应用程序。我在母版页上添加了隐藏字段..

```
<asp:HiddenField runat="server" ID="hiddenCriteria" Value="abcd"/> 
```

当我尝试从 Javascript 获取 Hidden 字段的值时：

```
alert(document.getElementById("ct100_hiddenCriteria").value); 
```

我得到以下值：

![在此处输入图像描述](../Images/3bcb52ab09c679d90b92d04523973b5d.png)

如何获得真正的储值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:25:44.373

```
var labelID  = '<%= hiddenCriteria.ClientID %>';
alert(labelID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:25:52.200

尝试设置`ClientIDMode`为`Static`，它会将控件的 ID 输出为*hiddenCriteria*

使其对 JavaScript 更友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:28:19.780

您可以在 javascript 函数中使用客户端 ID，如下所示

```
 alert(document.getElementById('<%= hiddenCriteria.ClientID %>').value); 
```

或者您可以将 ClientIDode 的好处变为静态，如下所示

```
 <asp:HiddenField runat="server" ClientIDMode="Static" ID="hiddenCriteria" 
        Value="abcd"/> 
```

简单地说

```
alert(document.getElementById("hiddenCriteria").value); 
```

进一步阅读

[http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature](http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature)

# upload - 如何预加载现有文件并将它们显示在 blueimp 上传表中？

> ID：15028664
> 
> 赞同：13
> 
> 时间：2013-02-22T16:22:11.550
> 
> 标签：upload, blueimp

我正在使用 Blueimp 上传的 jquery-ui 版本，我喜欢如何格式化表格并显示刚刚上传的文件。但我也想将它用作文件管理器，所以我想预加载现有文件并显示，而不是像它们刚刚上传一样。我怎样才能做到这一点？指向其他人已解决此问题的示例链接就足够了。顺便说一句，我正在上传几种不同的文件类型，而不仅仅是图像。

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-12T12:49:10.310

或者没有 ajax 调用：

1.  准备包含现有文件详细信息的数组，例如：

    ```
    var files = [
        {
            "name":"fileName.jpg",
            "size":775702,
            "type":"image/jpeg",
            "url":"http://mydomain.com/files/fileName.jpg",
            "deleteUrl":"http://mydomain.com/files/fileName.jpg",
            "deleteType":"DELETE"
        },
        {
            "name":"file2.jpg",
            "size":68222,
            "type":"image/jpeg",
            "url":"http://mydomain.com/files/file2.jpg",
            "deleteUrl":"http://mydomain.com/files/file2.jpg",
            "deleteType":"DELETE"
        }
    ]; 
    ```

2.  调用完成回调

    ```
    var $form = $('#fileupload');        

    // Init fileuploader if not initialized
    // $form.fileupload();

    $form.fileupload('option', 'done').call($form, $.Event('done'), {result: {files: files}}); 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T17:33:20.403

在主 js 文件中找到代码......它是如何工作的并不明显。让它工作得很好。

```
// Load existing files:
$.ajax({
    url: $('#fileupload').fileupload('option', 'url'),
    dataType: 'json',
    context: $('#fileupload')[0]
}).done(function (result) {
    $(this).fileupload('option', 'done').call(this, null, {result: result});
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T15:08:48.623

我也有同样的问题。它的工作原理并不神奇。我建议检查 UploadHandler.php 文件。然后您将能够根据您的需要修改此插件。

您第二篇文章中的上述代码只是对上传器脚本的 ajax 调用（默认情况下 index.php 在 server/php/ 文件夹中）。$.ajax 对象中的调用方法默认设置为“get”。

打开 UploadHandler.php 文件并转到类方法“initialize(...)”。您将看到如何处理带有“get”的调用。UploadHandler 调用类方法 this->get(.:.) 来准备和发送现有文件的列表。如果您使用其他上传目录，则需要将参数传递给 UploadHänder。只需更改 $.ajax 对象中的 url 属性，例如：

```
url: $('#fileupload').fileupload('option', 'url')+'?otherDir='+myDir, 
```

那么你应该在创建一个新的 UploadHandler 对象之前初始化 UploadHandler 的 option 属性，如下所示：

```
$otherDir = trim($_REQUEST['otherDir']);
$otherDir_url = [anyURL] .'/'.$otherDir;//so that the files can be downloaded by clicking on the link

$options = array(
'upload_dir'=> $otherDir,
'upload_url'=> $otherDir_url,
);

$upload_handler = new UploadHandler($options); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-11T14:05:21.093

如果你们中的任何人看到这个是在 .NET 中做的，找到这个：（对我来说它在 application.js

对于一个相当新的版本，有一个功能

```
 // Load existing files:
$.getJSON($('#fileupload form').prop('action'), function(files) {

files = somethingelse;

    var fu = $('#fileupload').data('fileupload');
    fu._adjustMaxNumberOfFiles(-files.length);
    fu._renderDownload(files)
        .appendTo($('#fileupload .files'))

        .fadeIn(function() {
            // Fix for IE7 and lower:
            $(this).show();
        });
}); 
```

在 application.js 内部，我正在为 .NET 做这件事，实际上需要这个。

然后根据您要显示的内容将您的其他内容设置为您的文件或“”。如果删除行 files = somethingelse 那么它将预加载文件夹中的所有文件。

# php - Zend Framework：是否可以合并两个 pdf 文件？

> ID：15028666
> 
> 赞同：0
> 
> 时间：2013-02-22T16:22:18.973
> 
> 标签：php, zend-framework, pdf

我有两页（A4）。它是从 doc 转换而来的，每个文档占据 A4 页面的一半。

所以我需要将这些页面合并成一个pdf页面。

同时我需要它是文本而不是图像。

可以使用 Zend_Pdf 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:33:22.233

你应该使用 Zend__Pdf__Resource__Extractor。

看看这个教程->

[http://theblog.enova-tech.net/2011/03/merge-two-or-more-pdf-files-in-zend-framework/](http://theblog.enova-tech.net/2011/03/merge-two-or-more-pdf-files-in-zend-framework/)

**编辑

在 Stackoverflow 上找到了同样的问题，也许它也会对您有所帮助： [Merging 2 pdf with Zend Framework](https://stackoverflow.com/questions/4254218/merging-2-pdf-with-zend-framework)

# c++ - 编写powerset代码的问题

> ID：15028670
> 
> 赞同：3
> 
> 时间：2013-02-22T16:22:34.560
> 
> 标签：c++, powerset

我正在尝试生成一组的幂集，并且我编写了这段代码。问题是，当用户输入两个相似的集合成员时，它不能正常工作。我能做些什么？这是我的代码：

```
#include <iostream>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
using namespace std;

char obtain(char *p,int n)
{
    int i;
    for(i=0;i<n;i++)
    {
        cout<<"enter member"<<(i+1)<<"\n";
        cin>>*(p+i);
    }
    return *p;
}

void set_display(char *p,int n)
{
    cout<<"{";
    for(int i=0;i<n;i++)
    {
        cout<<*(p+i)<<",";
    }
    cout<<"}";
}

void powset(char *p,int n)
{
    unsigned int m = (double)pow((double)2, n);
    int i, j;
    for(i = 0; i < m; i++)
    {
        cout<<"{";
        for(j = 0; j < n; j++)
        {
            if(i& (1<<j))
                cout<<*(p+j);
        }
        cout<<"}\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:51:13.643

好的，我无法在您丢失的地方调试您的代码。但是自从你发布你的问题后，我用 pure 编写了一个代码`C`。可能你觉得它有帮助。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<math.h>
int main(int argc, char* argv[]){
    int N;
    char y[20]={0};
    int i,j;
    y[0] = 'a';
    y[1] = 'b';
    y[2] = 'c'; 
    N = 3;
    int powerSet;
    powerSet=pow(2,N);
    for(i = 0; i<(powerSet);i++){
        for(j=0;j<N;j++){
            if((i & (1<<j))){
                printf("%c ",y[j]);
            }
        }
        printf("\n");
    }           
    printf("\n");
    return EXIT_SUCCESS;
} 
```

及其工作：

```
:~$ gcc x.c -lm -Wall
:~$ ./a.out 

a 
b 
a b 
c 
a c 
b c 
a b c 
```

**[回答]**

您的错误情况：当两个符号相同时。

```
y[0] = 'a';
y[1] = 'a';
y[2] = 'c'; 

:~$ ./a.out 

a 
a 
a a 
c 
a c 
a c 
a a c 
```

但是根据集合论这是错误的。因为**在 Set 中我们不能有两次相同的元素**（超过一个）。但也输入错误：`(a, a, c)`不是集合。所以代码是可用的。

# php - jomsocial - 限制对用户类型 com_user 的访问

> ID：15028674
> 
> 赞同：0
> 
> 时间：2013-02-22T16:22:52.530
> 
> 标签：php, joomla, joomla2.5, joomla1.7, jomsocial

我有两个不同的登录名。一种用于简单用户（com_user） 一种用于社交网络用户（包括 JomSocial）

我有 joomla 2.5.7 版本和 JomSocial 2.6.1 版本

如何防止用户轻松访问社交网络？

我试过这个，但它不起作用。

```
$userattr = JFactory::getUser();
$condition = $userattr->get('usertype');
if ($condition == 'Registered') { 
  redirect user to login page
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:54:44.153

Jomsocial 访问取决于 jomsocial 菜单中菜单项的访问级别。

所以只需为 jomsocial 用户创建一个新组（即 jomsocialregistered）并分配 jomsocial 菜单项。这将留给您将 jomsocial 用户正确分配到这个新创建的组的任务，但我不知道您打算如何实现这一点。

# java - 为什么我在下面的程序中得到 UnsatisfiedLinkError？

> ID：15028679
> 
> 赞同：2
> 
> 时间：2013-02-22T16:23:17.780
> 
> 标签：java, jpcap, unsatisfiedlinkerror

```
Error is :Exception in thread "main" java.lang.UnsatisfiedLinkError: 
  jpcap.JpcapCaptor.getDeviceList()[Ljpcap/NetworkInterface;  at  
  jpcap.JpcapCaptor.getDeviceList(Native Method)  at 
  jcap.network.main(network.java:63) 
```

* * *

```
import jpcap.*;
import jpcap.packet.*;
import java.io.*;
import jpcap.packet.TCPPacket.*;
import java.io.*;
import jpcap.JpcapCaptor.*;

class Network implements PacketReceiver {
    System.out.println(System.getProperty("java.library.path"));
    String sp=null;
    String dp=null;
    String window=null;
    String sequence=null;
    String acknowledge=null;
    FileWriter ff=null;
    String da=null;

    public void receivePacket(Packet pt) {
        try {
            if(pt instanceof TCPPacket) {
                TCPPacket tp=(TCPPacket)pt;
                ff=new FileWriter("da.txt",true);
                sp=new Integer(tp.src_port).toString();
                dp=new Integer(tp.dst_port).toString();
                window=new Integer(tp.window).toString();
                sequence=new Long(tp.sequence).toString();
                acknowledge=new Long(tp.ack_num).toString();
                byte[]dat=tp.data;
                da=new String(dat);
                ff.write("\r\n Source port is :-"+sp);    
                ff.write("\r\n Desination port is:-"+dp);
                ff.write("\r\n Sequence no is:-"+sequence);
                ff.write("\r\n Acknowledgement no  is:-"+acknowledge);
                ff.write("\r\n Status of rsv1 flag is:-"+tp.rsv1);
                ff.write("\r\n Status of rsv2 flag is:-"+tp.rsv2);
                ff.write("\r\n Status of Syn flag is:-"+tp.syn);
                ff.write("\r\n Status of Urg flag is:-"+tp.urg);
                ff.write("\r\n Status of Fin flag is:-"+tp.fin);
                ff.write("\r\n Data :-"+da);
                ff.write("\r\n");
                ff.write("\r\n");
                ff.close();
            }                 
        } catch(Exception e) {
            System.out.println(e.getMessage());
        }
   }  

   public static void main(String args[])throws IOException {
        int i;        
        try {
            NetworkInterface[] devices = JpcapCaptor.getDeviceList();

            //for each network interface
            for (i = 0; i < devices.length; i++) {
                //print out its name and description
                System.out.println(i+": "+devices[i].name + "(" +    
                        devices[i].description+")"+devices[i].loopback);
                //print out its datalink name and description
                System.out.println(" datalink: "+devices[i].datalink_name + "(" 
                        + devices[i].datalink_description+")");

                //print out its MAC address
                System.out.print(" MAC address:");
                for (byte b : devices[i].mac_address)
                    System.out.print(Integer.toHexString(b&0xff) + ":");
                System.out.println();

                //print out its IP address, subnet mask and broadcast address
                for (NetworkInterfaceAddress a : devices[i].addresses)
                    System.out.println(" address:"+a.address + " " + a.subnet + " "+ 
                            a.broadcast);
            }
            JpcapCaptor captor=JpcapCaptor.openDevice(devices[0], 65535, true, 20);
            captor.loopPacket(-1,new Network());
            captor.close();
        }
        catch(Exception e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:29:21.893

UnsatisfiedLinkError 表示“JpcapCaptor”本机库尚未加载，

```
static{
      System.loadLibrary("JpcapCaptor.dll");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:28:19.497

[UnsatisfiedLinkError](http://docs.oracle.com/javase/6/docs/api/java/lang/UnsatisfiedLinkError.html)的 javadocs非常简单。您缺少 jcap 所需的一些库。

将来，当您遇到不理解的异常时，javadocs 是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T13:05:47.760

在您的机器上安装 jpcap，然后尝试运行您的代码。您可以从这里下载 jpcap.exe 文件[http://jpcap.software.informer.com/0.7/](http://jpcap.software.informer.com/0.7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T14:58:04.273

在完全编译和链接 Jpcap（在 Mac OS X 计算机上使用 eclipse）后，我遇到了同样的问题。原来有两个版本的 Jpcap：[https](https://github.com/jpcap/jpcap) ://github.com/jpcap/jpcap （没有 JpCaptor）和一个带有 JpCaptor 的版本：[https](https://github.com/mgodave/Jpcap) ://github.com/mgodave/Jpcap 。也许这有帮助。

# xml - HTML5 Canvas 能否像 Actionscript 一样接收和使用 XML 数据？

> ID：15028683
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:23:25.883
> 
> 标签：xml, html, canvas

我已经四处搜索，我不知道我是否看错了地方，但我找不到明确的答案。我希望重现一个在画布中接收 XML 数据的 Flash/Actionscript 程序，并且首先想知道这有多大可能，其次是否有任何可靠的资源可供阅读。

更具体...

读取数值并简单地在屏幕上显示它们的程序，例如橄榄球比分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:40:46.470

你的问题很模糊。HTML5 Canvas 只是一个 API。您将使用 JavaScript 检索 XML（使用 XMLHttpRequest），对其进行解析，然后将其显示到屏幕上。可以通过在画布上绘图或向网页添加文本节点来处理显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:59:33.967

是的，可以读取 XML 数据。也可以在画布上绘制。您可以编写一个程序，将这两种可能性结合到一个解决方案中。如果您的问题被解释为：“Javascript 是否工作并提供与 ActionScript 相当的 API”，那么答案是肯定的。

资源非常广泛。只需学习 Javascript。

# android - 如何在运行 2.1 Google api level 7 的 AVD android 模拟器中注册我的 Google 帐户？

> ID：15028692
> 
> 赞同：0
> 
> 时间：2013-02-22T16:23:57.763
> 
> 标签：android, gmail, emulation, avd

我正在使用图像“Google APIS (Google Inc)”（Android 2.1）。使用 Android SDK 和 AVD 管理器，我用这个图像创建了一个新的虚拟机。当我转到设置 --> 帐户时，无法创建广告交换帐户，但我需要一个 Google 帐户。

任何的想法？:-O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:42:04.887

正如 CommonsWare 所说：

> 我不相信 Android 2.1 支持。请注意，截至 2013 年 2 月的仪表板，Android 2.1 仅适用于 2.2% 的 Android 设备

# c# - 操作字符串

> ID：15028698
> 
> 赞同：1
> 
> 时间：2013-02-22T16:24:13.313
> 
> 标签：c#

我正在尝试从字符串中删除一些特殊字符。我有以下字符串

```
[_fesd][009] Statement 
```

我想摆脱所有 '_' '[' 和 ']' 我设法用 TrimStart 删除了第一个字符，我得到了 fesd][009] 声明

我应该如何从字符串中间删除特殊字符？

目前我使用以下代码

```
string newStr = str.Trim(new Char[] { '[', ']', '_' }); 
```

其中 str 是应操作的字符串，结果应存储在 newStr

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T16:26:11.840

```
string newStr = str.Replace("[", "").Replace("]", "").Replace("_", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:38:19.083

```
var newStr = Regex.Replace("[_fesd][009] Statement", "(\\[)|(\\])|(_)", string.Empty); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:27:27.493

使用 string.Replace 和 string.Empty 作为要替换的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:31:09.067

你可以使用`Linq`它：

```
static void Main(string[] args)
{
    var s = @"[_fesd][009] Statement";
    var unwanted = @"_[]";

    var sanitizedS = s
        .Where(i => !unwanted.Contains(i))
        .Aggregate<char, string>("", (a, b) => a + b);

    Console.WriteLine(sanitizedS);
    // output: fesd009 Statement
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:33:27.943

```
var chars = new Char[] { '[', ']', '_' };
var newValue = new String(str.Where(x => !chars.Contains(x)).ToArray()); 
```

# java - Listview 使用 Endless 适配器

> ID：15028700
> 
> 赞同：1
> 
> 时间：2013-02-22T16:24:16.933
> 
> 标签：java, android

我有 10,000 行的数据库表，我想在列表视图中显示。我想显示前 20 个，当用户向下滚动到最后一个项目时，应该加载下一个 20（依此类推）。加载列表视图中的所有数据确实需要很多时间，所以这就是为什么我希望它首先加载 20 个数据..

在 onCreate() 方法里面的代码是：

```
 dbHelper = new WordDbAdapter(this);
    dbHelper.open();

    //Generate ListView from SQLite Database
    displayListView(); 
```

然后在 displayListView() 方法上的代码是这样的：

```
 @SuppressWarnings("deprecation")
private void displayListView() {

  final Cursor cursor = dbHelper.fetchAllWords();

  // The desired columns to be bound
  String[] columns = new String[] {
          WordDbAdapter.KEY_WORD,
          WordDbAdapter.KEY_ROWID,

  };

  // the XML defined views which the data will be bound to
  int[] to = new int[] {

    R.id.Word,
    R.id.imgStar,

  };

  // create the adapter using the cursor pointing to the desired data
  //as well as the layout information
  dataAdapter = new SimpleCursorAdapter(
    this, R.layout.word_info,
    cursor,
    columns,
    to
    );

  ListView listView = (ListView) findViewById(R.id.Diclist);
  // Assign adapter to ListView
  listView.setAdapter(dataAdapter);
listView.setOnScrollListener(new OnScrollListener(){
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        int lastInScreen = firstVisibleItem + visibleItemCount;
        if(cursor != null){

            if(lastInScreen == totalItemCount && isLoadingMore == false){
                isLoadingMore = true;

                loadedPage ++;
                new LoadWords().execute();
            }
        }
    }
    public void onScrollStateChanged(AbsListView view, int scrollState) {}
});

  listView.setOnItemClickListener(new OnItemClickListener() {
   @Override
   public void onItemClick(AdapterView<?> listView, View view,
     int position, long id) {
   // Get the cursor, positioned to the corresponding row in the result set
   Cursor cursor = (Cursor) listView.getItemAtPosition(position);

   // Get the word name from this row in the database.
       String wordSelected =
               cursor.getString(cursor.getColumnIndexOrThrow("word"));
       String wordSyllabication =
               cursor.getString(cursor.getColumnIndexOrThrow("syllabication"));
       String wordPartofSpeech =
               cursor.getString(cursor.getColumnIndexOrThrow("partofspeech"));
       String wordMeaning =
               cursor.getString(cursor.getColumnIndexOrThrow("meaning"));
       String wordSpeak =
               cursor.getString(cursor.getColumnIndexOrThrow("speakword"));

       EditText TextDic = (EditText) findViewById(R.id.TextDic);
       TextDic.setText(wordSelected);
       speakMeaning = wordMeaning;
       speakSyllabication = wordSyllabication;
       speakPartOfSpeech = wordPartofSpeech;
       speakWord = wordSpeak;
       speakGetWord = wordSelected;

       //Toast.makeText(getApplicationContext(),
             //  wordSyllabication + "\n" + wordPartofSpeech + "\n" + wordMeaning , Toast.LENGTH_SHORT).show();

       }
      });

  EditText TextDic = (EditText) findViewById(R.id.TextDic);
  TextDic.addTextChangedListener(new TextWatcher() {

   public void afterTextChanged(Editable s) {
     speakWord = "";
     speakMeaning = "";

   }

   public void beforeTextChanged(CharSequence s, int start,
     int count, int after) {
   }

   public void onTextChanged(CharSequence s, int start,
     int before, int count) {
   dataAdapter.getFilter().filter(s.toString());
   }
  });

   dataAdapter.setFilterQueryProvider(new FilterQueryProvider() {
         public Cursor runQuery(CharSequence constraint) {
         return dbHelper.fetchWordsByWord(constraint.toString());
         }
     });

     } 
```

那么我的 AsyncTask 是这样的：

```
private class LoadWords extends AsyncTask<String, Void, Void> {
    private final ProgressDialog dialog = new ProgressDialog(DictionaryActivity.this);

    Cursor cursor = dbHelper.fetchAllWords();

    @Override
    protected void onPreExecute() {
       this.dialog.setMessage("Loading books...");
       this.dialog.show();
    }

    public void execute() {
        // TODO Auto-generated method stub

    }

    @Override
    protected Void doInBackground(String... arg0) {
        try{
            cursor = dbHelper.fetchAllWords();
        }catch(Exception e){
            e.printStackTrace();
        }
        return null;
    }
    @SuppressWarnings("deprecation")
    @Override
    protected void onPostExecute(final Void unused){
        if(cursor != null){
            if(dataAdapter == null){
                startManagingCursor(cursor);
                String[] columns = new String[] {
                          WordDbAdapter.KEY_WORD,
                          WordDbAdapter.KEY_ROWID,

                  };
                int[] to = new int[] {

                        R.id.Word,
                        R.id.imgStar,

                      };  
                getListView().setTranscriptMode(ListView.TRANSCRIPT_MODE_NORMAL);
                dataAdapter = new SimpleCursorAdapter(DictionaryActivity.this, R.layout.word_info, cursor, columns, to);
                ListView listView = (ListView) findViewById(R.id.Diclist);
                  // Assign adapter to ListView
                listView.setAdapter(dataAdapter);

            }else{
                dataAdapter.notifyDataSetChanged();
            }
        }
        if(dialog != null && dialog.isShowing()){
            dialog.dismiss();
        }
        isLoadingMore = false;
    }

    private AbsListView getListView() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:35:51.213

适配器不会一次加载所有内容，这不应该是您看到性能不佳的原因。ListView 和 SimpleCursorAdapter 完全能够滚动只有 10,000 个项目的列表。适配器仅在用户滚动列表时加载项目。从您发布的代码中，我会说您的性能问题来自

```
dbHelper.deleteAllWords();
dbHelper.insertSomeWords(); 
```

如果您发布这些方法的代码`dbHelper.fetchAllWords()`，也许我们可以提供更多帮助。此外，您可以通过在后台线程上执行这些长时间运行的任务（查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)）并使用[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)通知用户正在发生的事情来解决用户界面问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:49:38.230

看看伟大的马克墨菲的[无尽适配器](https://github.com/commonsguy/cwac-endless)。这真的很容易。您将拥有仅包含您正在显示的项目的数据集。然后，在适配器中，您可以告诉它从数据库中获取下一组并将其添加到数据集中。

# android - 带有两个片段的活动导致错误

> ID：15028701
> 
> 赞同：0
> 
> 时间：2013-02-22T16:24:17.933
> 
> 标签：android, menu, fragment, adapter

我在一项活动中遇到了两个片段的问题。左边的片段是一个列表片段，右边的是一个普通的片段。我得到了一个 laoyut.xml 来组合片段，每个片段一个 layout.xml 和一个 listfragment 中每一行的 elayout.xml。此外，我得到一个类来启动包含两个片段布局的活动，一个类用于 listfragment，一个类用于普通 fragmetn 和一个适配器。而且我不知道如何解决这个问题。我认为发布我的代码和错误日志更容易，我会标记错误的位置。首先，我将向您展示用于组合片段的 layout.xml。它被称为“manu_pane.xml”

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/menu_item_fragment"
    android:name="wak.iage.layout.MenuItemFragment"
    android:layout_width="279dp"
    android:layout_height="match_parent"
/>

<fragment
    android:id="@+id/menu_content_fragment"
    android:name="wak.iage.layout.MenuContentFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" 
/> 
```

现在 listfragment 的 layout.xml ("menu_item_fragment.xml")

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/right_hand_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tv_status"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/tutorial_headline_bg"
    android:paddingBottom="20dp"
    android:paddingTop="20dp"
    android:text="@string/status_headline"
    android:textColor="@color/tutorial_headline_font"
    android:gravity="center"
    android:textSize="@dimen/fontsize_slogan_titlescreen" />

<ListView
    android:id="@+id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

现在“内容”的layout.xml（“menu_content_main.xml”）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/titlescreen_bg"
android:orientation="vertical"
android:paddingTop="60dp"
tools:context=".MainActivity" >

    <TextView
        android:id="@+id/tv_headline"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingBottom="60dp"
        android:paddingTop="60dp"
        android:text="@string/slogan"
        android:textSize="@dimen/fontsize_slogan_titlescreen" />
    <TextView
        android:id="@+id/tv_content"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingBottom="60dp"
        android:paddingTop="60dp"
        android:text="@string/slogan"
        android:textSize="@dimen/fontsize_slogan_titlescreen" /> 
```

最后是每个列表项的 layout.xml ("menu_list_item")

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal" 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp">

 <TextView android:id="@+id/menuListItemTitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:textStyle="bold"
    android:textSize="22dp"
    android:textColor="#000000"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" 
 /> 
```

现在我向你展示我用两个片段启动 Activity 的方法

```
 @Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    Intent intent = new Intent(this, MenuActivity.class);
    startActivity(intent);
    return super.onOptionsItemSelected(item);
} 
```

MenuActivity.class 如下所示：

```
package wak.iage.layout;

import wak.iage.storage.DataManager;
import wak.iage.storage.DataManager.DataManagerException;
import wak.iage.R;
import android.app.Activity;
import android.os.Bundle;

public class MenuActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu_pane);
    bootstrap(); // load all less-data
}

private void bootstrap() {
    DataManager dataManager = new DataManager(this);

    try {
        dataManager.loadStaticData();
    } catch (DataManagerException e) {
        e.printStackTrace();
    }   
}

} 
```

MenuContentFragment.class 包含“menu_content_main.xml”，如下所示：

```
package wak.iage.layout;

import wak.iage.R;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MenuContentFragment extends Fragment {

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.menu_content_main, container);
    return v;
}

public void changeText(String title, String content) {
    TextView head = (TextView) getActivity().findViewById(R.id.tv_headline);
    TextView body = (TextView) getActivity().findViewById(R.id.tv_content);

    body.setText(content);
    head.setTag(title);
}
} 
```

“MenuItemFragment.class”包含“menu_list_item.xml”，如下所示：

```
 package wak.iage.layout;

import java.util.ArrayList;
import wak.iage.R;
import wak.iage.tutorial.MenuItem;
import android.app.ListFragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

public class MenuItemFragment extends ListFragment 
{
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    MenuAdapter adapter = (MenuAdapter) this.getListAdapter();
    MenuContentFragment fragment = (MenuContentFragment)    getFragmentManager().findFragmentById(R.id.menu_content_fragment);
    fragment.changeText(adapter.getItem(position).getTitle(), adapter.getItem(position).getContent());
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
        ArrayList<MenuItem> values = new ArrayList<MenuItem>();
        values.add(new MenuItem("Impressum", "hier steht das impressum"));
        values.add(new MenuItem("Hilfe", "hier steht die Hilfe"));
        values.add(new MenuItem("Kontakt", "hier steht der Kontakt"));
        values.add(new MenuItem("Andere Kram", "hier steht krims krams"));

        MenuAdapter adapter = new MenuAdapter(getActivity(), values);
        setListAdapter(adapter);
    }

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater
            .inflate(R.layout.menu_item_fragment, container, false);
    return view;
}
} 
```

最后是“MenuAdapter.class”：

```
 package wak.iage.layout;

import java.util.ArrayList;

import wak.iage.R;
import wak.iage.tutorial.MenuItem;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class MenuAdapter extends ArrayAdapter<MenuItem> {

public ArrayList<MenuItem> values = null;
private static StatusRowContainer menuItem = null;

public MenuAdapter(Context context, ArrayList<MenuItem> values) {
    super(context, R.layout.menu_list_item);
    this.values = values;
    this.addAll(values);
}

public ArrayList<MenuItem> getMenuItems(){
    return values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        LayoutInflater inflater = ((Activity) getContext()) .getLayoutInflater();
        convertView = inflater.inflate(R.layout.menu_list_item, parent, false);

        menuItem = new StatusRowContainer();
//Here is the error!!!
        menuItem.text = (TextView) convertView.findViewById(R.id.tv_headline);
        menuItem.content = (TextView) convertView.findViewById(R.id.tv_content);
        convertView.setTag(menuItem);
    } else {
        menuItem = (StatusRowContainer) convertView.getTag();
    }

    MenuItem menu = values.get(position);
    menuItem.text.setText(menu.getTitle());
    menuItem.content.setText(menu.getContent());

    return convertView;
}

private class StatusRowContainer {
    public TextView content;
    public TextView text;
}
} 
```

最后是错误日志：

> 02-22 16:53:41.838: E/AndroidRuntime(20746): 致命异常: main 02-22 16:53:41.838: E/AndroidRuntime(20746): java.lang.NullPointerException 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 wak.iage.layout.MenuAdapter.getView(MenuAdapter.java:47) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.AbsListView.obtainView(AbsListView .java:2218) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.ListView.measureHeightOfChildren(ListView.java:1244) 02-22 16:53:41.838: E/AndroidRuntime(20746 ): 在 android.widget.ListView.onMeasure(ListView.java:1155) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.View.measure(View.java:12929) 02- 22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703) 02-22 16:53:41.838: E/AndroidRuntime(20746):在 android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.LinearLayout.measureVertical(LinearLayout.java:670) 02-22 16 :53:41.838: E/AndroidRuntime(20746): 在 android.widget.LinearLayout.onMeasure(LinearLayout.java:563) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.View。测量（View.java:12929）02-22 16:53:41.838：E/AndroidRuntime（20746）：在 android.view.ViewGroup.measureChildWithMargins（ViewGroup.java:4703）02-22 16:53:41.838：E/ AndroidRuntime(20746): 在 android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.LinearLayout.measureHorizo​​ntal(LinearLayout.java:1027 ) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget。LinearLayout.onMeasure(LinearLayout.java:565) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.View.measure(View.java:12929) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java :293) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.View.measure(View.java:12929) 02-22 16:53:41.838: E/AndroidRuntime(20746):在 android.widget.LinearLayout.measureVertical(LinearLayout.java:822) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.LinearLayout.onMeasure(LinearLayout.java:563) 02-22 16 :53:41.838: E/AndroidRuntime(20746): 在 android.view.View.measure(View.java:12929) 02-22 16:53:41.838: E/AndroidRuntime(20746):在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 02-22 16 :53:41.838: E/AndroidRuntime(20746): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2257) 02-22 16:53:41.838: E/AndroidRuntime(20746) : 在 android.view.View.measure(View.java:12929) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1240) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.os.Handler .dispatchMessage(Handler.java:99) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.os.Looper.loop(Looper.java:137) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 android.app.ActivityThread.main(ActivityThread.java:4511) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在java.lang.reflect.Method.invokeNative(Native Method) 02-22 16:53:41.838: E/AndroidRuntime(20746): at java.lang.reflect.Method.invoke(Method.java:511) 02-22 16 :53:41.838: E/AndroidRuntime(20746): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747) 02-22 16:53:41.838: E/AndroidRuntime(20746): at dalvik.system.NativeStart.main(Native Method)invokeNative（本机方法）02-22 16:53:41.838：E/AndroidRuntime（20746）：在 java.lang.reflect.Method.invoke（Method.java:511）02-22 16:53:41.838：E/AndroidRuntime (20746): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:747) 02-22 16:53:41.838: E/AndroidRuntime(20746): at dalvik.system.NativeStart.main(Native Method)invokeNative（本机方法）02-22 16:53:41.838：E/AndroidRuntime（20746）：在 java.lang.reflect.Method.invoke（Method.java:511）02-22 16:53:41.838：E/AndroidRuntime (20746): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980) 02-22 16:53:41.838: E/AndroidRuntime(20746): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:747) 02-22 16:53:41.838: E/AndroidRuntime(20746): at dalvik.system.NativeStart.main(Native Method)747) 02-22 16:53:41.838: E/AndroidRuntime(20746): at dalvik.system.NativeStart.main(Native Method)747) 02-22 16:53:41.838: E/AndroidRuntime(20746): at dalvik.system.NativeStart.main(Native Method)

错误在第 47 行的“MenuAdapter”中（我在代码行中写了注释）。我希望你能帮助我。我不明白。

感谢您的帮助和建议！！亲切的问候 j0chn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:37:51.563

我认为您的意思是膨胀 menu_content_main 而不是 menu_list_item，因为 menu_list_item 没有 id 为 tv_headline 的 textview。

尝试改变

```
convertView = inflater.inflate(R.layout.menu_list_item, parent, false); 
```

到

```
convertView = inflater.inflate(R.layout.menu_content_main, parent, false); 
```

# html - 重置引导 CSS 属性的最简单方法？

> ID：15028702
> 
> 赞同：0
> 
> 时间：2013-02-22T16:24:19.583
> 
> 标签：html, css, twitter-bootstrap

我有一个使用 Twitter Bootstrap 创建的导航栏：

```
<div class="navbar-inner navlinks">
    <ul class="nav">
        <li><a class="brand" href="#"><img src="img/logo.png" /></a></li>
        <li><a href="#">Accueil</a></li>
        <li><a href="#">Ouvrez</a></li>
        <li><a href="#">Decouvrir</a></li>
    </ul>
</div> 
```

通过更改班级中的属性，我可以轻松地覆盖字体颜色、填充等`navlink`。然而，像这样的导航栏列表中的链接在 Twitter Bootstrap 中默认具有大量的文本阴影/渐变属性。是覆盖这些以将每个属性设置为某个默认级别的唯一方法，还是 CSS 中有一些东西可以让我一举恢复“常规”设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T03:42:11.280

您可以通过以下方式执行此操作：

创建一个`new css file`并将其放在 bootstrap.css 文件之后，以便它可以覆盖您不想使用的任何默认属性。如下例所示：-

```
 <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
   <link href="/css/style.css" rel="stylesheet"> 
```

现在要删除导航栏上的任何`background` `box-shadow`或`border property`和`border-radius`，您可以执行以下操作：

```
.navbar-inner{
 background:none;
 filter:none;
 box-shadow:none;
 border-radius:0px;
 border:none;
} 
```

要自定义`navbar links`，您可以执行以下操作（在此处设置任何值或此处的任何新属性将覆盖默认值）：

```
.navbar .nav > li > a{

    padding:5px;
text-shadow:none;
  } 
```

要自定义`hover`和`focus`样式：

```
.navbar .nav > li > a:focus,
.navbar .nav > li > a:hover {
     color: #333333;
     text-decoration: none;
     background-color: transparent;
 } 
```

自定义`active`链接类：

```
.navbar .nav .active > a{
color:#ccc;
background:none;
box-shadow:none;
   }

 .navbar .nav .active > a:hover{
background:none;
box-shadow:none;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:28:20.547

有一个关于这个的视频（几天前我刚刚发现了 Bootstrap），他们解释说不要改变提供的 css，而是覆盖你自己的样式表中的 css。他们还提到此样式表必须在调用引导样式表之后才能使覆盖工作，并且您当然会在覆盖中调用相同的名称。视频在 Pluralsight 上。

PS我最终改变了主css中导航栏的css，因为我处于“播放”阶段。此外，bootstrap 有它自己的 css，它适用于整个页面的图像，所以要注意这一点。

# node.js - 浏览器 websocket 回退和支持

> ID：15028706
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:24:31.497
> 
> 标签：node.js, websocket, socket.io

简单的问题：我在 socket.io 的网站上看到了 websockets 的几个后备（[http://socket.io/#browser-support](http://socket.io/#browser-support)）

但我找不到（即使经过长时间的谷歌会话）哪些浏览器使用哪个后备。我问的原因是我想避免长时间轮询后备，所以我需要知道哪些浏览器和版本会使用它。

**[编辑]看到这被否决了，我需要自我介绍：**

我需要知道哪些浏览器/版本最终会退回到长轮询。我不能简单地假设在我的情况下使用长轮询，因为长轮询会出现问题。希望这能让它更清楚，为什么我不能那么容易找到它..

**[编辑 2] 很抱歉这么不清楚：**

我现在有点明白我基本上询问了哪些浏览器使用后备。但这不是我要问的，因为我已经知道了。我的意思是问如何检测或知道将使用哪个后备。对于我的应用程序来说，flash 没有问题，但是长轮询可能会出现问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:27:42.693

如果您想提前知道哪些浏览器可以使用，那么[Can I Use](http://caniuse.com/)是一个很好的参考。

如果您想在应用程序运行时检测它的支持，那么您可以测试`WebSocket`对象是否存在：

```
if (WebSocket) {
    // Use websockets
} else {
    // Fallback will be used
} 
```

（此代码应在客户端、浏览器中运行 - 而不是在您的 node.js 应用程序本身中）

**编辑：**

如果您需要*确切*知道正在使用什么回退，请创建一个套接字，然后检查该`socket.transport.name`属性。（因此，如果您的套接字称为“套接字”，您将检查`socket.socket.transport.name`）。它可以是以下之一：

*   网络套接字
*   html文件
*   xhr-轮询
*   jsonp-轮询

# javascript - Backbone.js 为什么 el 未定义

> ID：15028709
> 
> 赞同：1
> 
> 时间：2013-02-22T16:24:38.940
> 
> 标签：javascript, backbone.js

为什么我会收到错误 el is underfined -- 谢谢

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

<script type ="text/javascript">
    var SimpleView = Backbone.View.extend({
        tagName: 'li',
        id: 'todo-id',
        className: 'todo-class',
        render: function() {
            var htmls = '<h3>jhjljlkjkljkljkljkljkjkjj</h3>';
            //this.$el.html(htmls);
            $(this.el).html(htmls);
        }

    });
    var simpleView = new SimpleView();
    simpleView.render();
    //console.log(simpleView.el);

    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:43:21.093

您的代码有效。

[http://jsfiddle.net/GYGF7/](http://jsfiddle.net/GYGF7/)

```
var SimpleView = Backbone.View.extend({
    tagName: 'li',
    id: 'todo-id',
    className: 'todo-class',
    render: function() {
        var htmls = '<h3>jhjljlkjkljkljkljkljkjkjj</h3>';
        //this.$el.html(htmls);
        $(this.el).html(htmls);
    }

});
var simpleView = new SimpleView();
simpleView.render();
console.log(simpleView.el); 
```

您的问题是您指向的是一个非常旧版本的骨干网（0.3.3）。

更新您的依赖链接以加载最新版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:26:49.567

您需要定义什么`el`是：

```
 var SimpleView = Backbone.View.extend({
        el: $("YourElement"),
        tagName: 'li',
        id: 'todo-id',
        className: 'todo-class',
        render: function() {
            var htmls = '<h3>jhjljlkjkljkljkljkljkjkjj</h3>';
            //this.$el.html(htmls);
            $(this.el).html(htmls);
        }
    }); 
```

**编辑**

看来我可能错了：

> 如果指定。如果不是，el 是一个空的 div。（来自[http://backbonejs.org/#View-el](http://backbonejs.org/#View-el)）

# java - 使用Java从XML文件中提取值

> ID：15028711
> 
> 赞同：2
> 
> 时间：2013-02-22T16:24:48.070
> 
> 标签：java, xml-parsing

我采用以下格式：

```
<Results>
   <Value type="range"> 45-50 </Value>
   <Value type="range"> 65-58 </Value>
   <Value type="range"> 76-80 </Value>
   <Value type="range"> 48-60 </Value>
</Results> 
```

我想提取获取范围和数字的类型值。

这是我的java代码片段，

```
NodeList mNode = doc.getElementsByTagName("Value");
String elementAttr = nElement.getAttribute("type"); // here i get the attribute to be "range" 
```

但我不确定如何提取实际范围“45-50”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:27:44.747

尝试

```
nElement.getTextContent().trim(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:33:13.397

这就是我使用的

```
public static String attributeText(Node node, String namedItem) {
        String retValue = null;
        Node attribute = node.getAttributes().getNamedItem(namedItem);
        if (attribute != null) {
            retValue = attribute.getNodeValue();
        }
        return retValue;
    } 
```

# android - 为什么某些字体无法在某些 android 股票浏览器上呈现？

> ID：15028715
> 
> 赞同：0
> 
> 时间：2013-02-22T16:24:53.473
> 
> 标签：android, css, fonts

为什么某些字体会在某些现有的 android 浏览器上呈现，而不是在其他现有的 android 浏览器上呈现？例如，我从 myfonts.com 购买了 Have a Nice Day 字体并在此处解压缩包：

[http://jl.evermight.com/myfont/StartHere.html](http://jl.evermight.com/myfont/StartHere.html)

该字体在我朋友的 S3 上显示良好，但在我的 Galaxy Note（版本 1）上显示为 Arial。我将 Galaxy Note 操作系统升级到 4.0.4。所以它没有那么老。

我可以对我的 css、网络服务器或 html 代码等做些什么来强制字体在所有现代 android 股票浏览器上正确呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:32:08.210

问题已解决。显然 myfonts.com 上有一个错误损坏了我的字体文件。我联系了 myfonts.com，他们立即纠正了这个问题。然后将字体文件重新发送给我。现在一切正常。

myfonts.com 的人很棒。非常好的客户+技术支持服务。

# jms - 从大型机发送 JMS 消息

> ID：15028718
> 
> 赞同：0
> 
> 时间：2013-02-22T16:24:57.107
> 
> 标签：jms, cobol, mainframe

我想知道是否可以从运行 COBOL 和/或 JCL 的大型机应用程序发送 JMS 消息。我看到有 .Net 和其他技术的适配器，例如 JNBridge [http://www.jnbridge.com/](http://www.jnbridge.com/)，但是有什么东西可以让大型机应用程序发送消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:23:44.250

这很容易做到。这取决于您的 JMS 提供程序。如果使用 WebsphereMQ，则有直接调用的模块来发送消息—— CSQCPUT 和 CSQCPUT1、IIRC。

您的提供商应该有一些关于如何发送消息的文档。

# javascript - 无法为表单中的隐藏字段设置值

> ID：15028732
> 
> 赞同：0
> 
> 时间：2013-02-22T16:25:34.310
> 
> 标签：javascript, ruby-on-rails-3

我正在尝试在 Rails 3 中为表单中的隐藏字段设置值。

但是当我将表单提交到我的数据库时，没有为这些字段编写任何内容。

有我的JS：

```
function getGeocode() {
geocoder = new google.maps.Geocoder();
var street = $("#player_street").val()
var postalcode = $("#player_postalcode").val()
var city = $("#player_city").val()
var address = street + ", " + postalcode + ", " + city
var lat
var lng
//console.log(address)

geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    lat = results[0].geometry.location.hb
    lng = results[0].geometry.location.ib
    $("#player_lat").val(lat)
    $("#player_lng").val(lng)
    return true
  } else {
    return false
    alert("Dein Player konnte nicht eingetragen werden, bitte probiere es noch einmal.");
  }
})
} 
```

当我将 getGeocode() 的返回值设置为 false 时，隐藏字段的值被设置。但是当我将返回值设置为 true 时，数据库中没有条目。

字段在模型中设置和工作，并且通过 form_for 助手的 onsubmit 方法访问该函数。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:45:03.463

由于您使用 jQuery 使用`:hidden`jQuery 选择器。

`var street = $("#player_street:hidden").val()`

[http://api.jquery.com/hidden-selector/](http://api.jquery.com/hidden-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:49:02.067

```
geocoder.geocode( ... 
```

是异步函数。因此，它会在一段时间后接收响应并为字段设置值，而`getGeocode()`函数的其余代码会继续运行。

如果`true`在函数中返回，则在地理编码器返回结果之前提交表单。如果您返回`false`，则取消提交并设置值。

所以你需要在回调中提交数据，比如：

```
$(#the_form_id).submit( function() {

  geocoder = new google.maps.Geocoder();
  var street = $("#player_street").val()
  var postalcode = $("#player_postalcode").val()
  var city = $("#player_city").val()
  var address = street + ", " + postalcode + ", " + city
  var lat
  var lng

  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      lat = results[0].geometry.location.hb
      lng = results[0].geometry.location.ib
      $("#player_lat").val(lat)
      $("#player_lng").val(lng)
      $(#the_form_id).unbind('submit').submit();
    } else {
      return false
      alert("Dein Player konnte nicht eingetragen werden, bitte probiere es noch einmal.");
    }
  });
  return false;
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:12:41.480

为了防止该方法提交，我添加了 ev.preventDefault() 并在使用 $("#new_player").unbind('submit').submit() 设置值后恢复了该方法

```
$("#new_player").submit( function(ev) {

    ev.preventDefault();

    geocoder = new google.maps.Geocoder();
    var street = $("#player_street").val()
    var postalcode = $("#player_postalcode").val()
    var city = $("#player_city").val()
    var address = street + ", " + postalcode + ", " + city
    var lat
    var lng

    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        lat = results[0].geometry.location.hb
        lng = results[0].geometry.location.ib
        $("#player_lat:hidden").val(lat)
        $("#player_lng:hidden").val(lng)

        $("#new_player").unbind('submit').submit()

      } else {
        alert("Dein Player konnte nicht eingetragen werden, bitte probiere es noch einmal.")
        return false
      }
    })
}) 
```

# javascript - 加载资源失败（Javascript image.src）

> ID：15028733
> 
> 赞同：0
> 
> 时间：2013-02-22T16:25:36.577
> 
> 标签：javascript, loadimage

我想问你我下面的代码有什么问题：

```
var myCanvas = document.getElementById('myCanvas');
var ctx = myCanvas.getContext('2d');

var image = new Image();
image.onload = onLoad;
image.src = './PS_Countdown.jpeg';
ctx.drawImage(image, 25, 25);

function onLoad() {
    console.log('Image loaded');
} 
```

# jquery - [0] 在 jQuery 选择器中做了什么？

> ID：15028741
> 
> 赞同：1
> 
> 时间：2013-02-22T16:25:51.560
> 
> 标签：jquery

```
var example = $("#myElement")[0]; 
```

相对

```
var example = $("#myElement"); 
```

有什么不同？这里发生了什么？每次选择后示例变量包含什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:27:03.723

jQuery 对象（从`$`函数返回的值）是 DOM 元素的集合（“类数组”对象）。 `$("#myElement")[0]`从该数组中获取第一个元素，一个原生 DOM 元素。

你也可以这样做`$("#myElement").get(0)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:40:49.153

`$("#myElement")[0]`选择选择器返回的第一个项目

`$("#myElement")`为您提供选择器返回的每个项目。

您在示例中使用了 id，因此您应该只拥有 1 个具有任何给定 id 的项目

但是，例如，如果您这样做

`$('.test').hide()`，它会用一类测试隐藏每个元素。

而`$('.test')[0].hide()`只会隐藏第一项

# solr - SOLR - 在架构中使用单个文本字段进行全文搜索

> ID：15028745
> 
> 赞同：3
> 
> 时间：2013-02-22T16:25:56.997
> 
> 标签：solr, full-text-search, schema

我越来越熟悉 SOLR。

我想使用 SOLR 对多种实体进行全文搜索。我不想为每种不同类型的实体创建一个文档。我不希望能够搜索特定字段。我只对指定字符串是否在任何项目中的任何位置感兴趣。

例如，在数据库术语中，我有一个表 News 和一个表 Employee，我想搜索单词“apple”，我不介意它在哪个字段中，我只想从记录中取回数据库 ID包含它。

这可能是一个解决方案，我使用这样的 SOLR 模式：

```
<fields>
   <field name="id" type="string" indexed="true" stored="true"/> 
   <field name="content" type="text" indexed="true" stored="false"/>
</fields> 
```

所以，我只需要一个 ID 和内容。我将希望能够在其中搜索的所有数据放入一个“内容”字段中。当我搜索一些单词时，它会在 'id' 和 int 'content' 中查找它。

这是一个好主意吗？任何性能或设计问题？

谢谢， 塔马斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:23:02.847

请参阅[https://wiki.apache.org/solr/SchemaXml#Copy_Fields](https://wiki.apache.org/solr/SchemaXml#Copy_Fields)。它说：

一个常见的要求是将所有输入字段复制或合并到单个 solr 字段中。这可以按如下方式完成：-

```
<copyField source="*" dest="text"/> 
```

这通常是在多个字段中搜索所要做的。

但是，如果您甚至不需要原始字段，只需将所有字段连接成一个大字段`content`并在 Solr 中建立索引。应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:19:01.807

您可以将字段复制到文本（参见分发中的示例）并将其设置为默认字段（用于选择处理程序的 solrconfig.xml 中的“df”参数）。

或者，如果您预计会有更复杂的需求和/或非文本搜索，我建议[您使用 qf 参数查看 eDismax，](http://wiki.apache.org/solr/ExtendedDisMax#qf_.28Query_Fields.29)它会自行处理所有这些字段的搜索。

# php - 在 `echo("");` comman 中执行 php 命令

> ID：15028747
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:26:02.440
> 
> 标签：php, forms

我想知道是否可以让一个 php 命令回显一个全新的 php 集。

```
<?php
$phpcmd=$_POST["phpcmd"];
echo "<?".$phpcmd."?>";
?>

<form action="" method="post">
<input type="text" value="<?echo($phpcmd)?>" name="phpcmd">
<input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:30:08.867

你可以这样做：

```
eval($phpcmd); 
```

# 但...

我强烈建议您不要考虑这样的安全风险，恶意用户可能会使用这样的脚本造成巨大的损害。

正如[PHP 文档](http://php.net/manual/en/function.eval.php)所述：

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

查看[这篇文章](http://clifgriffin.com/2008/12/28/how-to-execute-php-code-in-a-php-string/)`eval()`以获取有关该功能的更多信息。

# jquery - 更新隐藏 div 的宽度

> ID：15028752
> 
> 赞同：0
> 
> 时间：2013-02-22T16:26:18.990
> 
> 标签：jquery, html, twitter-bootstrap, responsive-design, carousel

我在我的响应式网站上使用 twitter bootstrap。我有一个图像轮播，每个图像上都有一些文字。我正在检测是否`p`高于转盘并在必要时增加宽度。

```
if ( $(item).find('.carousel-caption')[0].scrollHeight >  $(item).height() && count <= 100) {
    $(item).find('.carousel-caption').css('width', $(item).find('.carousel-caption').width() + 10);
    count++;
    setWidth(item);
} 
```

这是为轮播中的每个项目运行的。这对可见（活动）项目非常有效，但对于隐藏项目则完全无效。我查看了控制台，它是具有`display: none`.

有没有办法使这项工作？它是`$(item).find('.carousel-caption')[0].scrollHeight`为隐藏项目重新调整 0 的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:57:31.587

元素`display:none`完全从显示的 DOM 中删除，因此您不能对它们执行很多测量。尝试将它们从`display:none`改为`visibility:hidden`改为，这样它们仍然会占用空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:29:42.750

尝试

```
$(item).find('.carousel-caption:hidden')[0].scrollHeight 
```

# coldfusion - ColdFusion - 使用具有多个字段和多个提交按钮的 cfloop

> ID：15028753
> 
> 赞同：2
> 
> 时间：2013-02-22T16:26:19.653
> 
> 标签：coldfusion, submit, cfform, cfpdfform, cfloop

我正在寻找`cfform`使用`cfpdfform`. 这是我的小测试页面，它遍历 50 条记录以提取名字和姓氏。我正在尝试将它们拉入pdf字段。目前，它将所有 50 个名字放入 firstname 字段，并将所有姓氏放入 pdf 的 lastname 字段。我没有与提交按钮结婚，但有什么更好的选择？

在我的最后一次迭代中，我将引入大约 100 个字段。

- 形式 -

```
<cfform name="autopdf" method="POST" action="automated_pdf_submit.cfm" enctype="multipart/form-data">
        <h1>Select a state to insert into a PDF form</h1>
        <div class="center">
            <select name="pdfselect" id="pdfselect">
                <option value="" selected>--Select State--</option>                 
                <option value="FROI_NY.pdf">New York</option>
                <option value="FROI_PA.pdf">Pennsylvania</option>
            </select>
            <cfinput type="hidden" name="statevalidate" onValidate="yourFunction" 
                     message="YOU MUST SELECT A STATE TO CONTINUE!">
        </div>
        <table align="center" style="width:400px">
            <tr>
                <th></th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Export to PDF</th>
            </tr>
            <cfoutput>
            <cfloop query="#qryPersons#" startrow="1" endrow="50" >
                <tr class="#IIf(CurrentRow Mod 2, DE('rowOdd'), DE('rowEven'))#" onmouseover="this.className='rowHighlight'" 
                    <cfif CurrentRow Mod 2>onmouseout="this.className='rowOdd'"
                    <cfelse>onmouseout="this.className='rowEven'"</cfif>>
                        <td>#qryPersons.CurrentRow#</td>
                        <td>#qryPersons.LastName#</td>
                        <input type="hidden" name="FirstName" value="#qryPersons.LastName#">
                        <td>#qryPersons.FirstName#</td>
                        <input type="hidden" name="LastName" value="#qryPersons.FirstName#">
                        <td style="width:50px"><input type="submit" value="Create PDF"</td>
                </tr>
            </cfloop>   
            </cfoutput>
        </table>
</cfform> 
```

- 行动 -

```
<cfpdfform action="populate" source="forms\#form.pdfselect#">
    <cfpdfformparam name="FirstName" value="#form.FirstName#">
    <cfpdfformparam name="LastName" value="#form.LastName#">
</cfpdfform> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:36:56.493

您的表单字段都已命名`FirstName`，`LastName`您需要使这些字段独一无二

```
<cfloop query="#qryPersons#" startrow="1" endrow="50" >
 <tr class="#IIf(CurrentRow Mod 2, DE('rowOdd'), DE('rowEven'))#" onmouseover="this.className='rowHighlight'" 
  <cfif CurrentRow Mod 2>onmouseout="this.className='rowOdd'"
  <cfelse>onmouseout="this.className='rowEven'"</cfif>>
  <td>#qryPersons.CurrentRow#</td>
  <td>#qryPersons.LastName#</td>
  <input type="hidden" name="FirstName#qryPersons.currentrow#" value="#qryPersons.LastName#">
  <td>#qryPersons.FirstName#</td>
  <input type="hidden" name="LastName#qryPersons.currentrow#" value="#qryPersons.FirstName#">
  <td style="width:50px"><input type="submit" value="Create PDF"</td>
  </tr>
</cfloop> 
```

我以前从未使用过 cfpdfform，但这种语法应该可以工作。您可能还需要动态命名`name`下面的属性

```
<cfpdfform action="populate" source="forms\#form.pdfselect#">
 <cfloop from="1" to="50" index="i">
    <cfpdfformparam name="FirstName" value="#form['FirstName'&i]#">
    <cfpdfformparam name="LastName" value="#form['LastName'&i]#">
 </cfloop>
</cfpdfform> 
```

# tfs - TFS - 集成平台。将 system.created 和 changed 日期迁移到自定义字段

> ID：15028755
> 
> 赞同：1
> 
> 时间：2013-02-22T16:26:20.217
> 
> 标签：tfs, migration, integration, platform

我们正在尝试将工作项从 TFS 2010 导入到 2012。我们在所有工作项类型的字段中定义了 2 个自定义字段，称为“旧版创建日期”和“旧版更改日期”。我们必须为创建日期和更改日期创建这两个字段的原因是因为迁移后，创建日期和更改日期更改为迁移时间，并且旧的创建/更改日期丢失。我们还在迁移 xml 中包含了这两个字段，如下所示：

所有工作项类型都包含上述 2 个语句。无论我们尝试什么，这两个字段在迁移后都是空的。

我们确认 2 个自定义文件在工作项类型模板中可用 [通过使用 TFS 电动工具并从服务器打开 WIT]

有什么帮助吗？谢谢！

**********更新 - 整个映射 XML* ***** *******

 **```
<SettingXml>
<WITSessionCustomSetting>
  <Settings />
  <WorkItemTypes>
    <WorkItemType LeftWorkItemTypeName="User Story" RightWorkItemTypeName="Product Backlog Item" fieldMap="UserStoryToProductBacklogItemFieldMap" />
  </WorkItemTypes>
  <FieldMaps>
    <FieldMap name="UserStoryToProductBacklogItemFieldMap">
      <MappedFields>
        <MappedField MapFromSide="Left" LeftName="System.CreatedDate" RightName="Contoso.Field.LegacyCreatedDate" />
        <MappedField MapFromSide="Left" LeftName="System.ChangedDate" RightName="Contoso.Field.LegacyChangedDate" />
        <MappedField MapFromSide="Left" LeftName="System.AreaPath" RightName="System.AreaPath" />
        <MappedField MapFromSide="Left" LeftName="System.AssignedTo" RightName="System.AssignedTo" />
        <MappedField MapFromSide="Left" LeftName="System.AttachedFileCount" RightName="System.AttachedFileCount" />
        <MappedField MapFromSide="Left" LeftName="System.AuthorizedAs" RightName="System.AuthorizedAs" />
        <MappedField MapFromSide="Left" LeftName="System.ChangedBy" RightName="System.ChangedBy" />
        <MappedField MapFromSide="Left" LeftName="Microsoft.VSTS.Common.ClosedDate" RightName="Microsoft.VSTS.Common.ClosedDate" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.Contact" RightName="Contoso.Field.Contact" />
        <MappedField MapFromSide="Left" LeftName="System.CreatedBy" RightName="System.CreatedBy" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.CustomerName" RightName="Contoso.Field.CustomerName" />
        <MappedField MapFromSide="Left" LeftName="System.Description" RightName="System.Description" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.DocSourceUpdateRequired" RightName="Contoso.Field.DocSourceUpdateRequired" />
        <MappedField MapFromSide="Left" LeftName="System.ExternalLinkCount" RightName="System.ExternalLinkCount" />
        <MappedField MapFromSide="Left" LeftName="System.History" RightName="System.History" />
        <MappedField MapFromSide="Left" LeftName="System.HyperLinkCount" RightName="System.HyperLinkCount" />
        <MappedField MapFromSide="Left" LeftName="Microsoft.VSTS.Build.IntegrationBuild" RightName="Microsoft.VSTS.Build.IntegrationBuild" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.InternalProduct" RightName="Contoso.Field.InternalProduct" />
        <MappedField MapFromSide="Left" LeftName="System.IterationId" RightName="System.IterationId" />
        <MappedField MapFromSide="Left" LeftName="System.IterationPath" RightName="System.IterationPath" />
        <MappedField MapFromSide="Left" LeftName="System.NodeName" RightName="System.NodeName" />
        <MappedField MapFromSide="Left" LeftName="System.Reason" RightName="System.Reason" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.Regulatory" RightName="Contoso.Field.Regulatory" />
        <MappedField MapFromSide="Left" LeftName="System.RelatedLinkCount" RightName="System.RelatedLinkCount" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.ReleaseNoteRequired" RightName="Contoso.Field.ReleaseNoteRequired" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.ResolutionDetails" RightName="Contoso.Field.ResolutionDetails" />
        <MappedField MapFromSide="Left" LeftName="System.Rev" RightName="System.Rev" />
        <MappedField MapFromSide="Left" LeftName="System.RevisedDate" RightName="System.RevisedDate" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.SFDCCaseID" RightName="Contoso.Field.SFDCCaseID" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.SFDCCaseNumber" RightName="Contoso.Field.SFDCCaseNumber" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.SFDCOrganizationID" RightName="Contoso.Field.SFDCOrganizationID" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.SFDCSyncResult" RightName="Contoso.Field.SFDCSyncResult" />
        <MappedField MapFromSide="Left" LeftName="System.State" RightName="System.State" valueMap="userstory_ValueMap" />
        <MappedField MapFromSide="Left" LeftName="System.TeamProject" RightName="System.TeamProject" />
        <MappedField MapFromSide="Left" LeftName="System.Title" RightName="System.Title" />
        <MappedField MapFromSide="Left" LeftName="System.WorkItemType" RightName="System.WorkItemType" />
        <MappedField MapFromSide="Left" LeftName="Microsoft.VSTS.Common.Priority" RightName="Microsoft.VSTS.Common.BacklogPriority" />
        <MappedField MapFromSide="Left" LeftName="Contoso.Field.TestNote" RightName="Microsoft.VSTS.Common.AcceptanceCriteria" />
        <MappedField MapFromSide="Left" LeftName="Microsoft.VSTS.CMMI.Blocked" RightName="Microsoft.VSTS.CMMI.Blocked" />
        <MappedField MapFromSide="Left" LeftName="System.ID" RightName="Contoso.Field.ExternalId" />
      </MappedFields>
    </FieldMap>
  </FieldMaps>
  <ValueMaps>
    <ValueMap name="userstory_ValueMap">
      <Value LeftValue="Unconfirmed" RightValue="New" />
      <Value LeftValue="Need Info" RightValue="New" />
      <Value LeftValue="Info Provided" RightValue="New" />
      <Value LeftValue="Confirmed" RightValue="Approved" />
      <Value LeftValue="Construction" RightValue="Committed" />
      <Value LeftValue="Resolved" RightValue="Committed - Developed" />
      <Value LeftValue="Built" RightValue="Committed - Developed" />
      <Value LeftValue="In Test" RightValue="Committed - Developed" />
      <Value LeftValue="Verified" RightValue="Committed - Tested" />
      <Value LeftValue="Closed" RightValue="Done" />
    </ValueMap>
  </ValueMaps>
</WITSessionCustomSetting> 
```

***********更新 - 部分成功 [不是通过集成平台] 我放弃了在集成平台上尝试同步创建日期和更改日期的修订。我现在的工作重点是直接查询 TFS_defaultcollection 数据库并获取日期。这是 sql.. select * from WorkItemswere where id = order by rev 这将给出给定 ID 的所有修订。我们可以编写一个迁移后脚本来循环遍历所有工作项并更新“创建日期”[WorkItemsWere 中的 CreatedDate 列将给出该日期]，修改日期和更改日期列将包含您需要的所有日期。但是，挑战在于更新“更改日期”[我正在通过 TFS API 更新创建日期。星光熠熠。只需以“服务帐户”TFS 用户身份运行控制台应用程序，“打开”工作项，修改创建日期并“保存”它]。我正在查询源系统 WorkItemsWere 表，按每个“Rev”获取 Changed 和 Revision 日期并更新目标系统“WorkItemsWere”[锁定源系统和目标系统非常重要，因此在此脚本期间不会发生更新]。脚本运行后，我在 taregt 系统上选择了一个工作项并检查了它的历史记录。所有的历史都消失了！！..所以，直接更新数据库中的更改/修订日期是个坏主意。但是，我找到了一种解决方法。如果您只是更新“修订日期”而不是“更改日期”，它会显示历史记录。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。按每个“Rev”获取 Changed 和 Revision 日期并更新目标系统“WorkItemsWere”[锁定源系统和目标系统非常重要，因此在此脚本期间不会发生更新]。脚本运行后，我在 taregt 系统上选择了一个工作项并检查了它的历史记录。所有的历史都消失了！！..所以，直接更新数据库中的更改/修订日期是个坏主意。但是，我找到了一种解决方法。如果您只是更新“修订日期”而不是“更改日期”，它会显示历史记录。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。按每个“Rev”获取 Changed 和 Revision 日期并更新目标系统“WorkItemsWere”[锁定源系统和目标系统非常重要，因此在此脚本期间不会发生更新]。脚本运行后，我在 taregt 系统上选择了一个工作项并检查了它的历史记录。所有的历史都消失了！！..所以，直接更新数据库中的更改/修订日期是个坏主意。但是，我找到了一种解决方法。如果您只是更新“修订日期”而不是“更改日期”，它会显示历史记录。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。锁定源系统和目标系统非常重要，因此在此脚本期间不会发生更新]。脚本运行后，我在 taregt 系统上选择了一个工作项并检查了它的历史记录。所有的历史都消失了！！..所以，直接更新数据库中的更改/修订日期是个坏主意。但是，我找到了一种解决方法。如果您只是更新“修订日期”而不是“更改日期”，它会显示历史记录。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。锁定源系统和目标系统非常重要，因此在此脚本期间不会发生更新]。脚本运行后，我在 taregt 系统上选择了一个工作项并检查了它的历史记录。所有的历史都消失了！！..所以，直接更新数据库中的更改/修订日期是个坏主意。但是，我找到了一种解决方法。如果您只是更新“修订日期”而不是“更改日期”，它会显示历史记录。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。它确实显示了历史。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。它确实显示了历史。[没有'Rev #"]。这对我们来说是一个好的解决方法。会让每个人都知道。**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:04:20.983

我能够通过直接更新 TFS 中的表 WorkItemsWere 和 WorkItemsLongtext 来解决它。具体来说，WorkItemsWere 中的列修订日期和更改日期以及 workitemslongtext 中的更改日期。我刚刚编写了一个循环遍历所有工作项并从旧 TFS 实例获取所有修订的脚本。从 WorkItemsWeere 表中获取修改日期/更改日期并更新目标系统中的日期。奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:42:18.433

经过一番挖掘，看起来 TFS 集成平台对这两个字段进行了特殊处理，我所说的特殊是指当用户尝试将它们映射到配置文件中时它们会忽略它们。这是一个论坛帖子的链接，其中专门概述了这一点： http: [//social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/e310e35b-e1b7-4f60-a2bf-15ad5016e736/](http://social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/e310e35b-e1b7-4f60-a2bf-15ad5016e736/)。同样，这并不意味着这些值会消失，它们应该保存在目标 TFS 环境中新工作项的历史注释中（如我的注释中所述）。****

# php - 如何检查 mysqli_connect 是否成功？

> ID：15028757
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:26:28.560
> 
> 标签：php, mysqli

我正在编写一个安装程序脚本，我需要检查用户是否输入了正确的数据库信息，因此需要检查 mysqli_connect 是否成功。一个简单的 if-else 就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-05T17:44:53.343

那这个呢：

```
<?php
$con = mysqli_connect("localhost","my_user","my_password","my_db");

// Check connection
if (mysqli_connect_errno())
    {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:33:11.443

像这样：

```
if( ! $db = mysqli_connect(...) ) {
    die('No connection: ' . mysqli_connect_error());
} 
```

# css - 如何删除 PrimeFaces 对话框中的滚动条？

> ID：15028761
> 
> 赞同：5
> 
> 时间：2013-02-22T16:26:40.527
> 
> 标签：css, primefaces

我的 webapp 中有 ajax 加载模式对话框：

```
<p:dialog widgetVar="statusDialog" modal="true" draggable="false" minimizable="false" appendToBody="true"
    closable="false" header="Processing..." resizable="false" maximizable="false" style="overflow:hidden !important; overflow-x: hidden !important; width:auto;">  
     <p:graphicImage library="assets" name="ajax-loader.gif" style="overflow:hidden !important; overflow-x: hidden !important;"></p:graphicImage> 
</p:dialog>
<p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/> 
```

不管是什么 CSS 样式（我尝试了各种溢出/溢出-x 等组合）我使用它仍然显示水平（垂直隐藏，没有问题）滚动条。我也玩过 appendToBody 属性。

我需要禁用水平滚动条。

编辑：这是 PrimeFaces 呈现的 HTML

```
<div id="j_idt18" class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-shadow ui-overlay-hidden" style="overflow: hidden; width: auto; height: auto; left: 832px; top: 210px; visibility: hidden; z-index: 1003; display: block;" role="dialog" aria-labelledby="j_idt18_title" aria-hidden="true" aria-live="off">
<div class="ui-dialog-titlebar ui-widget-header ui-helper-clearfix ui-corner-top">
<span id="j_idt18_title" class="ui-dialog-title">Processing...</span>
</div>
<div class="ui-dialog-content ui-widget-content" style="height: auto;"><img id="j_idt19" src="/webapp/do/javax.faces.resource/ajax-loader.gif?ln=assets" alt="">
</div>
</div> 
```

我已经能够通过在我自己的样式表中覆盖默认对话框 CSS 来摆脱滚动条：

```
.ui-dialog-content {
    overflow: hidden !important;
} 
```

但是，这会影响所有对话框，而不仅仅是 ajax 加载一个。我希望能够在每个对话框的基础上覆盖该样式。我怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T13:07:33.057

在您的`statusDialog`对话框中添加`styleClass="disable-scroll"`.

此外，为此创建 CSS 规则：

```
.disable-scroll .ui-dialog-content {
  overflow: hidden !important;
} 
```

这会将 CSS 应用于具有此自定义类的所有对话框。

# java - 在 akka 中创建太多演员不好吗？

> ID：15028770
> 
> 赞同：3
> 
> 时间：2013-02-22T16:27:28.233
> 
> 标签：java, akka

我有一个图数据结构，我在图中有顶点。顶点的数量约为 20K。现在我想为每个节点创建一个单独的演员。这是因为我想跨节点执行一些聚合。

有一个主工作人员读取并向顶点的工作人员发送消息。这个工作人员执行一些复杂的任务。点击数据库和其他东西。

可以造这么多演员吗？

如果是的话，一个 4 GB 内存的盒子可以支持多少个演员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:46:10.587

一个 Akka Actor 占用大约 400-500 字节，所以理论上你应该能够在 4GB 的堆上容纳大约 850 万个，但是总是有其他东西占用堆，你肯定要确保你有可用的内存来存储消息而不必让 GC 一直运行。

我的建议是您只创建 1 个顶级演员 (system.actorOf)，理想情况下您将孩子分散开，这样树就不是超级平坦的（1 个父母和 20k 个孩子非常平坦），但您可以从它开始。

干杯，√</p>

# java - 启动本地可执行文件 Javascript

> ID：15028771
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:27:28.570
> 
> 标签：java, javascript, firefox-addon, mozilla, executable-jar

全部，

我编写了一个桌面 java 程序，它将捕获用户音频，并希望在 Mozilla 的插件中使用它。我不太熟悉 JavaScript 或为 Mozilla 创建广告，但我知道插件需要主要使用 JavaScript 创建。

我对 JavaScript 的有限使用所知道的是，您无法访问用户本地文件。

**有什么方法可以使用 JavaScript 和 Mozilla Add On Builder 来发出命令，就像我在 -jar 文件路径参数的系统控制台中所做的那样，它会启动 jar 文件？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:27:28.747

我的想法是找到`java.exe`文件并使用一些参数运行它，如本[例](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess#See_also)所示。
您可以使用[Addon Sdk Docs](https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/modules/sdk/system/environment.html)中的示例来检查`PATH`或`JAVA_HOME`变量并尝试在`java.exe`那里找到。

我不知道它是否会起作用，但这只是我的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T21:04:47.147

[https://github.com/mozilla/addon-sdk/wiki/Community-develop-modules](https://github.com/mozilla/addon-sdk/wiki/Community-developed-modules)

此页面指向 AddonSDK 的“子进程”模块，它将帮助您启动外部进程。

# c - 在 C 中更改结构中矩阵的内容

> ID：15028772
> 
> 赞同：0
> 
> 时间：2013-02-22T16:27:29.043
> 
> 标签：c, pointers, matrix

我目前正在为学校做作业，目前我被困住了。在我看来，我想要实现的目标相当简单。我已经定义了一个结构。在这个结构中，我制作了一个矩阵。我要做的下一件事是仅通过使用指向该结构的指针来向该矩阵添加信息。

所以这是我的结构：

```
typedef struct maze{
    char mazeMatrix[6][10];
}; 
```

以及我指向该结构的指针：

```
typedef struct maze* mazePointer; 
```

然后我在另一个函数中初始化它。我一直在许多网站上寻找所需的语法，但找不到所需的语法。如何更改矩阵的内容，例如我想`mazeMatrix[0][0]`用“H”更改第一个条目（第一行，第一列）。实现这一点的语法是什么？

我还给出了一个需要更新结构的函数的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:37:03.577

鉴于：

```
mazePointer mp = ...;

mp->mazeMatrix[0][0] = 'H'; 
```

就个人而言，我宁愿不在 typedef 中隐藏指针，所以我会使用：

```
typedef struct Maze { char mazeMatrix[6][10]; } Maze;

Maze *mp = ...;
mp->mazeMatrix[0][0] = 'H'; 
```

结束线是一样的。请注意，您`typedef struct maze { ...};`没有为类型定义名称；关键字`typedef`是多余的，应该删除（好的编译器会警告你）。我可能也会简单地使用这个词`matrix`而不是`mazeMatrix`; 它的结构是一个迷宫，它里面的矩阵就是迷宫的矩阵，不需要前缀。

* * *

调用上下文：

```
Maze m;

maze_modifier(&m); 
```

称为上下文：

```
void maze_modifier(Maze *mp)
{
    mp->mazeMatrix[0][0] = 'H';
    ...
} 
```

* * *

> 我的下一个问题是从指针打印这个矩阵。我在用：
> 
> ```
> printf("%c", mazePointer->matrix[counter][counterA]); 
> ```
> 
> 计数器只是来自 2 个嵌套 for 循环的 2 个变量。有什么建议么？

那应该行得通。所以应该这样：

```
void maze_printer(Maze *mp)
{
    for (int i = 0; i < 6; i++)
    {
        for (int j = 0; j < 10; j++)
            putchar(mp->mazeMatrix[i][j]);
        putchar('\n');
    }
} 
```

# c# - 选择 ComboBox 值后如何加载 ListBox？

> ID：15028778
> 
> 赞同：0
> 
> 时间：2013-02-22T16:27:44.730
> 
> 标签：c#, sql-server, winforms, combobox, listbox

使用 VS 2012、WinForms、C#...

我有一个列表框，我想根据在组合框中选择的值来填充。我已经测试了我的 SQL 查询并且它可以工作，但是我遇到了一个奇怪的问题，当我运行我的例程时，我的 ComboBox 和我的 ListBox 都是空的。当我在例程中注释掉代码时`cb_Session_SelectedValueChanged`，我的 CB 和 LB 加载得很好，但是当它没有被注释掉时，我的 LB 和 CB 最终变为空白。

这就是我所拥有的：

```
private void cb_Session_SelectedValueChanged(object sender, EventArgs e)
{
    listbox_Sessions.Visible = true;
    LoadSessionListbox();
}

private void LoadSessionListbox()
{
    int tempID = Convert.ToInt32(cb_Session.SelectedValue);
    // Code here to load listbox, which works without above routine.
} 
```

我错过了什么吗？为什么我的 CB 和 LB 添加了第一个例程后是空白的？

[编辑]：

我将 SelectedValueChanged 中的例程放在 MouseClick 事件中，它可以工作，但不是在我想要的时候...您必须单击几次才能使用正确的 ID 重新加载它。我觉得我越来越近了，但仍然不是正确的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:57:13.083

试试这个：

```
private void cb_Session_SelectedValueChanged(object sender, EventArgs e)
{
  if(cb_Session.SelectedValue>-1)
   {
    listbox_Sessions.Visible = true;
    LoadSessionListbox();
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:03:27.190

弄清楚了！！

我最终在我的 SelectedValueChanged 例程中添加了一个简单的 if 语句，它修复了所有问题！

```
private void cb_Sessions_SelectedValueChanged(object sender, EventArgs e)
{
    listBox_Sessions.Visible = true;

    if (cb_Sessions.SelectedValue != null)
        LoadSessionListbox();
} 
```

现在完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T04:54:26.397

尝试`SelectedIndexChanged Event`并关注

```
private void cb_Session_SelectedIndexChanged(object sender, EventArgs e)
{
    if (cb_Session.SelectedValue == null) return;
    if (cb_Session.SelectedIndex == -1) return;
    listbox_Sessions.Visible = true;
    LoadSessionListbox((int)cb_Session.SelectedValue);
}

private void LoadSessionListbox(int selectedValue)
{
   //TODO: Do stuff
} 
```

# python - 在python中生成没有闭包的函数

> ID：15028782
> 
> 赞同：6
> 
> 时间：2013-02-22T16:27:56.123
> 
> 标签：python, function, closures, pickle

现在我正在使用闭包来生成像这个简化示例中的函数：

```
def constant_function(constant):
    def dummyfunction(t):
        return constant
    return dummyfunction 
```

然后将这些生成的函数传递给自定义类的 init 方法，该类将它们存储为实例属性。缺点是这使得类实例不可腌制。所以我想知道是否有一种方法可以创建避免闭包的函数生成器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:31:21.377

您可以使用可调用类：

```
class ConstantFunction(object):
    def __init__(self, constant):
        self.constant = constant
    def __call__(self, t):
        return self.constant

def constant_function(constant):
    return ConstantFunction(constant) 
```

然后将函数的关闭状态转移到实例属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T18:32:29.807

并不是说我建议将其用于一般用途……但是有另一种编译和编写`exec`代码的方法。它正在生成一个没有闭包的函数。

```
>>> def doit(constant): 
...   constant = "def constant(t):\n  return %s" % constant
...   return compile(constant, '<string>', 'exec')
... 
>>> exec doit(1)
>>> constant(4)
1
>>> constant 
```

请注意，要在封闭的函数或类中（即不在全局命名空间中）执行此操作，您还必须将适当的命名空间传递给`exec`. 请参阅：[https ://docs.python.org/2/reference/simple_stmts.html#the-exec-statement](https://docs.python.org/2/reference/simple_stmts.html#the-exec-statement)

还有双重`lambda`方法，这并不是*真正*的闭包，嗯，有点……

```
>>> f = lambda x: lambda y:x
>>> g = f(1)
>>> g(4)
1
>>> import dill
>>> _g = dill.dumps(g)
>>> g_ = dill.loads(_g) 
>>> g_(5)
1 
```

您似乎担心腌制类似闭包的对象的能力，所以如果您使用`dill`. 对于类实例也是如此。

# fft - 如何使用 MATLAB 计算傅立叶系数

> ID：15028793
> 
> 赞同：3
> 
> 时间：2013-02-22T16:28:28.230
> 
> 标签：fft, matlab

我正在尝试使用 MATLAB 计算波形的傅立叶系数。可以使用以下公式计算系数：

![在此处输入图像描述](../Images/0987f33cde397bb9dee1664a70074c95.png)

![在此处输入图像描述](../Images/4de7a4fcca2f726b18a2205ca0c54659.png)

T 被选为 1，这使得 omega = 2pi。

但是我在执行积分时遇到问题。`sawtooth(t,0.5)`函数是三角波（如果我没记错的话可以使用）和方波。

我尝试过使用以下代码（对于三角波）：

```
 function [ a0,am,bm ] = test( numTerms )
            b_m = zeros(1,numTerms);
            w=2*pi;
            for i = 1:numTerms
                    f1 = @(t) sawtooth(t,0.5).*cos(i*w*t);
                    f2 = @(t) sawtooth(t,0.5).*sin(i*w*t);
                    am(i) = 2*quad(f1,0,1);
                    bm(i) = 2*quad(f2,0,1);
            end
    end 
```

但是，它并没有接近我需要的值。b_m 系数是针对三角波给出的，当 m 从正项开始为奇数时，应该为 1/m^2 和 -1/m^2。

对我来说主要问题是我不太了解积分在 MATLAB 中的工作原理，而且我不确定我选择的方法是否有效。

编辑：为了澄清，这是我希望在确定系数时编写函数的形式：

![在此处输入图像描述](../Images/d115f4aff3fbbe2386556bead5595f55.png)

这是使用 fft 的尝试：

```
 function [ a0,am,bm ] = test( numTerms )
            T=2*pi;
            w=1;
            t = [0:0.1:2];
            f = fft(sawtooth(t,0.5));
            am = real(f);
            bm = imag(f);
            func = num2str(f(1));
            for i = 1:numTerms
                    func = strcat(func,'+',num2str(am(i)),'*cos(',num2str(i*w),'*t)','+',num2str(bm(i)),'*sin(',num2str(i*w),'*t)');
            end
            y = inline(func);
            plot(t,y(t));
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:07:15.363

在我看来，您的问题是`sawtooth`返回[mathworks 文档](http://www.mathworks.com/help/signal/ref/sawtooth.html)的原因：

> sawtooth(t,width) 生成修改后的三角波，其中宽度是 0 到 1 之间的标量参数，决定了 0 到 2π 之间出现最大值的点。该函数在 0 到 2π 宽度的区间上从 -1 增加到 1 *，然后在 2π 宽度到 2π 的区间上从 1 到 -1 线性减小*。因此，参数 0.5 指定标准三角波，关于时间瞬间 π 对称，峰峰值幅度为 1。锯齿波 (t,1) 等效于锯齿波 (t)。

所以我猜这是你问题的*一部分*。

在你回复之后，我又看了看。在我看来这是`quad`功能；不是很准确！我重铸了这样的问题：

```
 function [ a0,am,bm ] = sotest( t, numTerms )
      bm = zeros(1,numTerms);
      am = zeros(1,numTerms);
      % 2L = 1
      L = 0.5;
      for ii = 1:numTerms
        am(ii) = (1/L)*quadl(@(x) aCos(x,ii,L),0,2*L);
        bm(ii) = (1/L)*quadl(@(x) aSin(x,ii,L),0,2*L);
      end
      ii = 0;
      a0 = (1/L)*trapz( t, t.*cos((ii*pi*t)/L) );  
      % now let's test it
      y = ones(size(t))*(a0/2);
      for ii=1:numTerms
        y = y + am(ii)*cos(ii*2*pi*t);
        y = y + bm(ii)*sin(ii*2*pi*t);
      end
      figure; plot( t, y);
    end

    function a = aCos(t,n,L)
      a = t.*cos((n*pi*t)/L);
    end

    function b = aSin(t,n,L)
      b = t.*sin((n*pi*t)/L);
    end 
```

然后我这样称呼它：

```
[ a0,am,bm ] = sotest( t, 100 ); 
```

我得到了：

![傅里叶级数](../Images/8f1402a7e537194ac7d2ac2051e61c41.png)

甜蜜！！！

我真正改变的只是从`quad`到`quadl.` 我发现通过使用`trapz`which 效果很好，直到我使用的时间向量没有足够的分辨率，这让我相信这是一个数字问题而不是基本问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:37:43.160

为了对您的代码进行故障排除，我将绘制您正在使用的函数并进行调查，quad 函数如何对它们进行采样。您可能对它们进行了欠采样，因此请确保您的最小步长比函数的周期至少小 10 倍。

我建议使用 Matlab 内置的 FFT。FFT 不仅是计算频谱的最有效方法（它 n*log(n) 取决于数组的长度 n，而 n^2 中的积分取决于），它还会自动为您提供频点您的（等间隔的）时间数据支持的。如果您自己计算积分（如果数据点的间距不相等，则可能需要），您可能会计算未解析的频率数据（间距小于 1/时间间距，即超出“傅立叶限制”）。

# robotics - 哪种语言最适合机器人技术

> ID：15028794
> 
> 赞同：10
> 
> 时间：2013-02-22T16:28:32.330
> 
> 标签：robotics

我是一名机器人工程师，我刚刚完成了我的理学硕士学位。我看到许多开发机器人解决方案和自动化的公司对他们要求雇用的工程师的要求越来越高，以便能够编程。但是除了 Matlab 之外，很明显什么是学习的好编程语言？

我所说的“好”是指一种在工业编程中大量使用的语言。（工业机器人、汽车和航空电子设备、焊接和喷漆机器人，主要是自动化）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:37:46.653

Plain ol' C 在嵌入式系统中被大量使用（这是我在 90 年代后期使用基于 Z-80 的工业控制器时使用的）。C++ 和 Java（令人震惊，我知道）也是如此。Ada 用于一些利基领域（航空电子设备、空间系统）。如果您不熟悉任何编程语言，C 可能是一个不错的起点，并且可以让学习其他一些语言（如 C++ 和 Java）更容易一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:36:03.450

根据我的经验，C 和 C++ 广泛用于研究和工业领域。它们速度很快，并且有很好的库可用于从计算机视觉到线性代数的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:37:40.943

工业机器人是低级的，你看的是 C。虽然它是一个相当大的暴跌。也许考虑先在 Python 上停下来。

# ssrs-2008 - SSRS 中的多数据集下拉列表

> ID：15028799
> 
> 赞同：0
> 
> 时间：2013-02-22T16:28:52.687
> 
> 标签：ssrs-2008

是否可以为多个数据集创建一个下拉列表并根据从下拉列表中选择的参数进行查询。

例如，如果我有两个数据集，

**Dataset_1 值：**

*   Person_ID
*   姓名
*   地址

**Dataset_2 值：**

*   产品_ID
*   产品名称
*   价格

现在我要做的是将两个数据集的 ID 添加到下拉列表中。当我选择`Person_ID`时，报告应该只显示 dataset_1 的值，反之亦然。

# c - 尝试制作链表，出现段错误

> ID：15028801
> 
> 赞同：0
> 
> 时间：2013-02-22T16:29:00.367
> 
> 标签：c, data-structures, linked-list, segmentation-fault

C 新手，但我正在尝试编写此链接列表程序，但我不断收到分段错误：11\. 我认为我已经将其缩小到仅在链接列表创建中的问题 - 我将其标记为问题区。当我将此部分注释掉时，不会发生段错误。

我一直在讨论纸上发生的事情，但我不明白为什么它不起作用。也许我只是误解了指针或 malloc 的使用，因为我没有经验。

该程序应使用的示例文本文件：

```
>984932:39284 mus musculus okodvcxvmkw2e2p \n
ATCTCAATCGCACTATCTAGCATGTCGTATGCTTGCATGTCGTAGTCGT\n
ATGCTATGCTTACTCTATTTACGGCGCATCGTGATCGTAGGAGCGAGCT\n

>984932:39284 mus huumoros okodvcxvmkw2e2p \n
ATCTCAATCGCACTATCTAGCATGTCGTATGCTTGCATGTCGTAGTCGT\n
ATGCTATGCTTACTCTATTTACGGCGCATCGTGATCGTAGGAGCGAGCT\n

>984932:39284 mus pisces okodvcxvmkw2e2p \n
ATCTCAATCGCACTATCTAGCATGTCGTATGCTTGCATGTCGTAGTCGT\n
ATGCTATGCTTACTCTATTTACGGCGCATCGTGATCGTAGGAGCGAGCT\n 
```

我正在尝试做的事情：创建一个链表，其中每个节点都是上面文本的一个块。也就是说，每个节点都包含以'>'开头的头部，以及作为所有ACTG的序列数据。在上面的示例文本文件中，除了列表中的头/尾节点之外，还有 3 个节点。

我是如何尝试的（问题部分）： Char 被扫描。如果 char 是 '>'，那么我们知道我们在头部，并且我们将所有后续字符读入新节点的头部字段，直到我们到达换行符。此时，我们知道我们将读取序列数据。继续这样做，直到我们到达另一个“>”，当我们这样做时，重复。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int list_header_size = 200;
int list_data_size = 2000;

struct list{
    char *header;
    char *data;
    struct list *next;
    struct list *prev;
};

//append char onto a string
void append(char *s, char c){
    int len = strlen(s);
    s[len] = c;
    s[len + 1] = '\0';
}

int create_list(char *filename){

    FILE *fp = fopen(filename, "r");

    if(fp == NULL){
        printf("File could not be opened. Exiting..");
        exit(1);
    }

    //setup head - doesn't hold a char
    struct list *head = malloc(sizeof(struct list));
    head->next = NULL;
    head->header = NULL;
    head->data = NULL;
    head->prev = NULL;

    //setup tail - doesn't hold a char
    struct list *tail = malloc(sizeof(struct list));
    tail->next = NULL;
    tail->header = NULL;
    tail->data = NULL;
    tail->prev = NULL;

    /***scan the .fasta file, populate list***/

    //char holder
    char c;
    int list_size = 0;
    int i = 1;

    //pull single char from file until end of file is reached
    do{

        c = getc(fp);

        //******PROBLEM IS IN THIS SECTION********//

        //if header text is found
        if(c == '>'){

            //create a node
            struct list *temp = malloc(sizeof(struct list));

            //first case to setup head
            if(i == 1){
                head->next = temp;
                temp->prev = head;
                i = 0;
            }

            tail->next = temp;
            tail->prev = temp;

            //create space for header/sequence data in the new node
            temp->header = (char*) malloc(sizeof(list_header_size));
            temp->data = (char*) malloc(sizeof(list_sequence_size));

            //add current char to header
            append(temp->header, c);

            c = getc(fp);

            //put file's header data into node's header data
            while(c != '\n'){
                append(temp->header, c);

                c = getc(fp);
            }

            //put file's sequence data into node's sequence data
            while(c != '>' && c != EOF){
                append(temp->data, c);
            }
        }

        //*******END OF PROBLEM SECTION********//

    }while(c != EOF);

    /***end of scanning .fasta file and creating linked list***/

    return 1;
}

int main(int argc, char * argv[]){

    char *filename = (char*) malloc(80);

    //check options
    int i;
    for(i = 1; i < argc; i++){

        if(argv[i][0] == '-'){

            switch(argv[i][1]){     
                default:;
            }

        }else{
            //arg is filename
            filename = argv[i];
        }

    }

    create_list(filename);

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:32:37.100

最直接的事情是这样的：

```
 //create space for header/sequence data in the new node
  temp->header = (char*) malloc(sizeof(list_header_size));
  temp->data = (char*) malloc(sizeof(list_sequence_size)); 
```

我认为应该是这样的：

```
 //create space for header/sequence data in the new node
  temp->header = malloc(list_header_size);
  temp->data = malloc(list_sequence_size); 
```

如果你是 C 的超级新手，这里可能还有其他东西，但是 malloc 和它们的大小总是我检查的第一件事，而这个是不对的。

**编辑**另一个问题：

您的缓冲区现在已分配，但您的 append() 函数希望它们从一开始就为零终止。他们不是。添加这个：

```
 temp->header = malloc(list_header_size);
  temp->data = malloc(list_sequence_size);
  temp->header[0] = temp->data[0] = 0; // <=== this 
```

* * *

老实说，由于这些大小是固定的，我宁愿您像这样声明实际的节点结构：

```
struct list{
    char header[200];
    char data[2000];
    struct list *next;
    struct list *prev;
}; 
```

并完全避免所有额外的分配，只分配节点而不是它们的字段。如果字段大小变得动态，则需要更改，但在那之前，请保持简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:42:14.240

我会看看你的`append(...)`函数，以及你输入它的数据。您对该函数的第一次调用是

```
append(temp->header, c); 
```

并且`temp->header`不保证归零。它可以指向任何东西，尽管大多数编译器会将它归零（或尝试这样做）。使用`calloc`而不是`malloc`.

# c++ - 如何从 C 调用 Java 方法（无需先从 Java 调用 C）

> ID：15028803
> 
> 赞同：0
> 
> 时间：2013-02-22T16:29:05.167
> 
> 标签：c++, java-native-interface

因此，如果您想从 Java 调用 C，我了解生成 C 标头的通常过程，但是如果我没有要提供的“jobject”，我不明白应该使用什么函数调用。就像这里，我试图打电话`doSomething()`

```
public class Test {

   public void doSomething(ByteBuffer buf) { 
         System.out.println("Hi"); 
   };
} 
```

我读了这个，但我不明白： [http ://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp16656](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp16656)

```
jobject buf = env->NewDirectByteBuffer(b, len);

jclass testClass;
jmethodID doSomethingMethod;

testClass = env->FindClass("test/Test");
doSomethingMethod = env->GetMethodID(testClass, "doSomething", "(Ljava/nio/ByteBuffer;)V");
env->CallVoidMethod(buf, doSomethingMethod); 
```

“CallVoidMethod()”的第一个参数应该是什么？它总是工作，但什么？当我运行它时，它只是在 Eclipse 中告诉我“UnsupportedOperationException”，它不打印任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:32:26.850

of 的第一个参数`CallVoidMethod`应该是`jobject`对所讨论类的实例的引用。您实际上是在传递一个字节缓冲区，这是完全不同的事情。

您查找类和类中的方法，但您没有在任何地方创建（或获取）该类的实际对象。那是你缺少的一步。

Java 方法的字节缓冲区参数应该在对象和方法参数*之后传递。*就像是：

```
env->CallVoidMethod(testObj, doSomethingMethod, buf); 
```

你需要找到一种方法来设置`testObj`一些有意义的东西。

* * *

如果您实际上不想实例化一个对象，那么您必须更改 Java 代码以将其`doSomething()`转换为`static`方法。

```
public class Test {
   public static void doSomething(ByteBuffer buf) { 
         System.out.println("Hi"); 
   };
} 
```

然后更新您的 C++ 代码以使用`GetStaticMethodID`代替`GetMethodID`，而`CallStaticVoidMethod`不是`CallVoidMethod`. 然后你可以完全省略第一个`jobject`参数。

```
env->CallStaticVoidMethod(doSomethingMethod, buf); 
```

# azure - 服务总线继电器和 SignalR

> ID：15028804
> 
> 赞同：1
> 
> 时间：2013-02-22T16:29:08.023
> 
> 标签：azure, signalr

我们计划将**SignalR**与**Windows Azure 服务总线**一起用于需要实时客户端更新（浏览器）的云应用程序。我们可能有大约***200 个***客户端连接到我们的解决方案。如果我们将应用程序部署在 4 个实例的云服务上，我知道我应该使用“ *GlobalHost.DependencyResolver.UseWindowsAzureServiceBus(connectionString, 1);* ”选项通过服务总线连接它们。

**我的问题是：**它会使用服务总线继电器吗？或主题？每个实例上有多少个集线器？使用 SignalR 连接的每个客户端（200 个客户端）一个中继？[我只是想知道他们会向我收取](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)多少费用以了解是否值得。事实上，这里最重要的是要知道 SignalR 是使用主题/订阅还是中继？

非常感谢你的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:56:50.350

SignalR Azure 服务总线横向扩展提供程序将仅对每个角色实例使用一个订阅。如果您有 4 个云服务实例，您实际上需要：

```
GlobalHost.DependencyResolver.UseWindowsAzureServiceBus(connectionString, 4); 
```

第二个参数是您的实例计数。

这会将您的所有 SignalR 消息放在一个主题上。如果您想在更多主题之间分发消息，可以指定 a`topicCount`作为第三个参数，`UseWindowsAzureServiceBus`如下所示：

```
GlobalHost.DependencyResolver.UseWindowsAzureServiceBus(connectionString,
                                                        instanceCount: 4,
                                                        topicCount: 2); 
```

注意：以上参数仅为清晰起见命名。

# javascript - Mobiscroll datepicker 被 jQuery Mobile 模态隐藏

> ID：15028808
> 
> 赞同：3
> 
> 时间：2013-02-22T16:29:18.037
> 
> 标签：javascript, jquery, css, jquery-mobile, mobiscroll

我有一个带有一些日期输入的 jQuery Mobile 站点，我正在使用[Mobiscroll 日期选择器](http://demo.mobiscroll.com/datetime/date#)（在模式模式下）。它在标准 jQM 页面上运行良好，但是当我在 jQM 模式上输入日期时会出现问题。

问题是日期选择器模式显示在 jQM 模式下，因此用户看不到它，我希望日期选择器显示在 jQM 模式的顶部。如果我使用 Firebug 隐藏 jQM 模态，我还可以看到 datepicker 在 jQM“dark”过滤器下 - 它使除 jQM 模态之外的所有内容都变暗。

我用来设置 Mobiscroll 日期选择器的代码是：

```
$('#mydate').scroller('destroy').scroller($.extend(
{
    preset : 'date',
    dateFormat: 'dd/mm/yyyy'
},
{
    display: 'modal',
    mode: 'scroller',
    theme: 'default',
    lang: 'en'
})); 
```

我尝试修改 Firebug 中的元素以查看是否有一些 CSS 可以修复它，我尝试将 datepicker 设置为 high `z-index`，将 jQM modal 设置为 lower `z-index`，还尝试强制使用它，`!important`但这并没有改变任何东西。其他 Mobiscroll 显示选项：顶部、底部、气泡也有同样的问题。

如何让日期选择器显示在 jQM 模式之上？

jQM 版本：1.2.0（最新），带有 jQ​​uery 1.8.2
Mobiscroll 版本：2.4.4（最新）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T07:51:41.843

尝试这个：

```
.dw-persp, .dwo {z-index:1051;}
.dw {z-index:1051;} 
```

你最好把它放在最后一个css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T19:07:58.300

我碰巧遇到了同样的问题，这是我的解决方法：检查模态的 css（jquery 移动模态的默认 z-index 是 1050）。然后转到 mobicroller css 并将 z-index 更改为高于它的任何值。只要 mobiscroller 有一个铰链 z-index，它就应该毫无问题地显示在顶部模态中。

# visual-studio-2010 - VB.NET 系统信息，如何获取发布位置或发布文件夹位置？

> ID：15028814
> 
> 赞同：0
> 
> 时间：2013-02-22T09:12:37.463
> 
> 标签：visual-studio-2010, vb.net

我知道

```
Application.ExecutablePath 
```

可以得到安装文件夹。

但是我怎样才能获得我在项目的“PUBLISH”选项卡中放置的发布文件夹的位置？说..（当然这行不通）

```
Application.PublishingPath 
```

提前感谢您的回复.. =)

PS我只想通过msgbox知道发布文件夹的文件夹路径。

# php - Joomla getUser() 不显示更新的用户数据

> ID：15028816
> 
> 赞同：4
> 
> 时间：2013-02-22T16:29:41.157
> 
> 标签：php, session, joomla, joomla2.5, joomla3.0

下面的代码允许我在用户的 Joomla 个人资料的个人资料页面中显示用户名。鉴于我已经覆盖了模板以获得我想要的外观。

```
$user =& JFactory::getUser();

if (!$user->guest) {
  echo 'You are logged in as:<br />';
  echo 'Real name: ' . $user->name . '';
} 
```

我的问题是我允许用户更新他或她的个人资料。在他更新他的姓名后，数据库会正确更新，但不会在个人资料页面中显示更新后的姓名。

当我浏览 Joomla 文档时，我发现用户数据存储在会话中（JFactory::getUser()）。如果我`print_r($_SESSION)`可以看到用户数据对象。此外，如果我注销然后再次登录，则更新后的名称会显示在个人资料页面上。

数据更新后，如何在个人资料页面中显示更新详情？有没有办法在 Joomla 会话中更新会话数据而不是手动进行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:41:52.727

您应该使用 JSession 为用户的当前会话设置新数据

```
 $user = JFactory::getUser();
        $session = JFactory::getSession();
        $session->set('user', new JUser($user->id));
        //new data for your user after the update
        $user = JFactory::getUser();
        print_r($user); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:07:10.693

我知道在最新的 Joomla 2.5.9 中这仍然是一个问题，临时解决方案是在成功保存用户记录后添加到 components/com_users/controllers/profile.php 编辑功能中。

```
// Get session user object
$session = JFactory::getSession();
$tmpUser = $session->get('user');

// Update necessary fields
$tmpUser->name  = $data['name'];
$tmpUser->email = $data['email1'];

// Update the session user object
$session->set('user', $tmpUser); 
```

你不能简单地使用之前推荐的 set('user', new JUser($user->id)); 解决方案，因为您没有存储在 Joomla 会话用户对象（访问权限）中找到的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:11:40.887

它实际上比看起来更难，基本上你需要让它们重新认证。这是因为 JUser 和 JSession 交互的方式混乱。

# php - 自定义喜欢功能 - 我需要用户登录吗？

> ID：15028822
> 
> 赞同：0
> 
> 时间：2013-02-22T16:30:13.560
> 
> 标签：php

我最近为我的漫画网站实现了一个有效的自定义喜欢/不喜欢功能。

但我觉得这促使我为所有用户实施登录系统……我真的不想这样做（为了我和我的粉丝）

目前，该功能通过以下方式工作：

> 1) 通过 Jquery 将按钮值 (id = 'like' 或 id = 'dislike') 传递给 php 脚本
> 
> 2）脚本将首先根据给定的漫画ID检查数据库中是否存在IP......如果不存在，它将插入用户的IP和当前漫画ID并增加给定漫画ID的总喜欢......如果它已经存在，它将删除该用户的信息并减少总喜欢。

问题是，如果多个粉丝“喜欢”或“不喜欢”来自同一个 IP（网吧等）的漫画，或者同一个用户去喜欢另一台电脑的漫画，会发生什么……所以我在想解决的方法这将为用户的会话生成一个唯一值并将其存储在他们的 IP 上。

但是，如果该用户想要在他们的唯一会话 ID 过期后稍后再回来并将他们的喜欢更改为不喜欢怎么办……计算机怎么知道是他们？或者如果同一个用户以某种方式过期了他们的会话 ID（注销然后重新登录、关闭浏览器等）并且现在可以多次投票，会发生什么？

在这种情况下，我是否必须创建一个登录系统？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:39:18.203

由于 IP 地址对于普通用户来说可以非常动态地更改，因此如果不创建登录系统就很难实现这一点。我认为你不需要太技术化。用户数据库可能只有 user_id、username、salt 和散列密码，然后您的喜欢/不喜欢数据库将使用 user_id 而不是 IP。然后用户可以从任何地方登录并且一切正常。

要让他们登录，只需生成一个使用他们的用户名创建会话的表单就足够了。可能需要一段时间，但如果一开始做得对，它可以让您在不付出太多努力的情况下进行扩展。

# javascript - 无法验证未选中的单选按钮

> ID：15028823
> 
> 赞同：0
> 
> 时间：2013-02-22T16:30:25.713
> 
> 标签：javascript, jquery

如果它是“必需的 EQ true”，我想强制用户给出答案。这是我的表格。

```
<p><span class="badge <cfif attributes.required EQ 1>badge-important</cfif>">#attributes.step#</span> <b>#attributes.question#</b></p>
    <fieldset> 
    <div>
        <!--- <span class="span1"></span> --->
    <cfif attributes.yesno>
        <label class="radio">
            <input type="radio" name="#attributes.type#_#attributes.id#"  id="question_#attributes.id#_yes" value="1">Yes
        </label>
        <label class="radio">
            <input type="radio" name="#attributes.type#_#attributes.id#"  id="question_#attributes.id#_no" value="0">No
        </label> 
```

我已经尝试过了，但似乎没有用。谁能帮我吗？

```
<script type="text/javascript">
          if($('radio').not(':checked')) {
            alert("you must answer this questions");
          }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:37:43.673

你的 JQuery 选择器是错误的，让它像

```
if($('input[type=radio]').not(':checked')) {
    alert("you must answer this questions");
} 
```

# android - 如何在webview中本地存储html文件上播放本地存储视频

> ID：15028824
> 
> 赞同：1
> 
> 时间：2013-02-22T16:30:27.617
> 
> 标签：android, html, android-layout, android-webview

我想在网站中播放视频（显示在 android webview 中）。我已在本地将所有 html 页面和视频存储到 android 项目的 assets 文件夹中，并且我正在将该 assets 文件夹中的网站显示到 web 视图中。

问题是，在网站上有一些视频，它没有在 android web 视图中播放（它只是显示我加载圈）。我尝试了 setpluging，javascript on，我尝试了 HTML 中的 iframe 和 html 中的视频和视频 src TAG但没有运气在本地播放视频文件。

任何朋友请帮我播放加载在android webview上的网页上的视频文件谢谢

```
oncreate(){
 setContentView(R.layout.activity_main);
 WebView webView= (WebView)findViewById(R.id.webView);
 webView.getSettings().setSupportZoom(true);
 webView.getSettings().setBuiltInZoomControls(true);
 webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
 webView.setScrollbarFadingEnabled(true);
 webView.getSettings().setLoadsImagesAutomatically(true);
 webView.setWebChromeClient(new WebChromeClient());
 webView.setWebViewClient(new WebViewClient());  
 WebSettings webSettings = webView.getSettings();
 webSettings.setJavaScriptEnabled(true);
 webSettings.setPluginState(WebSettings.PluginState.ON);
   webView.loadUrl("file:///android_asset/index.html"); 
```

}

```
<video width="320" height="240" controls="controls" name="media">
              <source src="twitter.mp4" type="video/mp4">// i tried src="file:///android_asset/twitter.mp4" but no luck 
                </video> 
```

# jquery - Jquery-vsdoc 无法使用 MVC4 捆绑？并且@Scripts.Render 在 _Layout.cshtml 中包含在上面时不起作用？

> ID：15028827
> 
> 赞同：1
> 
> 时间：2013-02-22T16:30:33.300
> 
> 标签：jquery, asp.net-mvc, razor, asp.net-mvc-4

下面是我添加到 BundleConfig 的 vsdoc 包，并在 _Layout.cshtml 中呈现了脚本。然而，我无法让 jquery intellisense 处理视图。到目前为止，我让它工作的唯一方法是粘贴对我使用 Jquery 的视图的引用。`</body>`另一件事是，如果我在 _Layout.cshtml上方呈现脚本，即使是警告框也不起作用。但是，如果我在`<head>`标签中呈现它，它会起作用。为什么 ？任何帮助将不胜感激 - 谢谢

```
**BundlesConfig**

            bundles.Add(new ScriptBundle("~/bundles/jqueryIntellisense").Include(
            "~/Scripts/jquery-{version}-vsdoc.js"));
**Layout**
</footer>
      @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryIntellisense")
    @Scripts.Render("~/bundles/modernizr")
    @RenderSection("scripts", required: false)
</body>
</html>
     **View**
<h2>Jquery Test</h2>

<script>
    $(document).ready(function () { alert("hello"); });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:38:51.147

VS doc 仅供 Visual Studio 使用。您无需将其包含在捆绑包中。在网页上呈现它可能会破坏您的代码，导致`alert`底部不触发。

要在脚本文件中获取智能感知，请在脚本文件中添加对它的引用：

```
/// <reference path="path/from/this/script/to/jquery-1.8.2.js" /> 
```

有一个捷径可以做到这一点。打开要获取 jQuery 智能感知的脚本文件。然后，在解决方案资源管理器中，找到您的`jquery-1.{whateverversion}.js`文件。单击该文件并将其从解决方案资源管理器拖动到您的脚本文件，它将自动创建一个`/// <reference`具有正确路径的文件。

要在您的视图中获得智能感知，请确保您的 _references.js 文件具有对 jQuery 的引用：

```
/// <reference path="path/from/_references.js/to/jquery-1.8.2.js" /> 
```

# c++ - 如何更快地扫描数据 CD？

> ID：15028828
> 
> 赞同：2
> 
> 时间：2013-02-22T16:30:38.260
> 
> 标签：c++, unix, file-io, cd

我想为目录和文件使用结构和 std::vector 在内存中创建 CD 内容树。我不会详细扫描文件，我只对目录或常规文件感兴趣。

最好和最快的方法是什么？递归扫描会使 CD 单元的磁头在驱动器周围跳来跳去寻找文件/文件夹吗？

我想减少 CD 单元的头部跳跃并使其尽可能快。顺便说一句：我正在使用 UNIX 和 C/C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:46:50.710

根据 ISO 9660 规范：

> 包含在主卷描述符中的是描述连续根目录位置的根目录记录。（与在 UNIX 中一样，目录显示为操作系统的特殊用途的文件）。**目录条目依次存储在该区域内**。ISO 9660 文件名的评估在此位置开始。根目录存储为一个范围或一系列连续扇区，其中包含出现在根目录中的每个目录条目

鉴于这些信息，我认为头部跳跃是相当不可避免的。您将从这个顶级目录开始，比如 Track X Sector Y，扫描以找到要遍历的第一个目录，然后在磁盘上向下移动。因此，无论您如何“潜水”，只要您进一步潜入树中，头部就会跳动。如果有一种方法可以根据磁道然后在扇区上扫描磁盘，那将带来好处，但我不确定如何做到这一点，以及它是否值得实施。

您的决定对 CDFS 性能的影响并不大，而是您的进程开销。递归会产生分配给堆栈的开销，并且那里存在内存影响。但就 CDFS 而言，它似乎不受您的控制。

我会说递归，因为它对树遍历具有逻辑意义

# list - 如何将元素附加到 Prolog 中的列表中？

> ID：15028831
> 
> 赞同：24
> 
> 时间：2013-02-22T16:30:58.727
> 
> 标签：list, prolog, append, in-place, difference-lists

如果我在 Prolog 中有一个列表，例如 X = [1, 2, 3, 4]，如何将元素 5 添加到列表的末尾以使 X = [1, 2, 3, 4, 5]？

append 函数需要两个列表，即 append(A,B,C) 将 A 和 B 连接到列表 C。

我可以使用临时列表 Y = [1, 2, 3, 4] 和 Z = [5] 来执行此操作，然后执行附加（Y，Z，X），但我不喜欢临时列表。

通常的免责声明在这里适用——这不是家庭作业，我只是在学习 Prolog。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-13T19:37:21.607

正如其他人指出的那样，您将陷入性能问题。
但是作为一个练习，我决定尝试创建一个谓词，它可以将一个元素附加到列表的末尾，而不使用`append`.

```
% add_tail(+List,+Element,-List)
% Add the given element to the end of the list, without using the "append" predicate.
add_tail([],X,[X]).
add_tail([H|T],X,[H|L]):-add_tail(T,X,L). 
```

我建议您只需使用该`append`功能，作为内置功能，它可能比任何手动制作的功能都要快。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-23T06:29:08.467

Prolog 中的变量只能赋值一次。只要 X 具有值 [1,2,3,4]，它就永远不会有另一个值。就像您提到的那样，临时变量和 append/3 是这样做的方法。

话虽如此，您可以做一个可能不推荐的技巧。如果 X = [1,2,3,4,Y] 那么你可以做 Y=5 并且 X 现在有你想要的值。我相信这种技术被称为差异列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-13T21:14:21.863

一种声明性解决方案是使用差异列表（正如丹尼尔在其回答中建议的那样）。差异列表的名称通常表示为两个列表之间的差异：列表及其尾部。例如，一个空列表可以表示为`T-T`。包含元素 1、2 和 3 的列表可以表示为`[1,2,3| T]-T`（注意这`(-)/2`是标准的内置中缀运算符）。这种表示的优点是您可以通过使用`append/3`谓词的单个事实定义在恒定时间内将元素附加到列表中：

```
append(L1-T1, T1-T2, L1-T2). 
```

一个使用示例：

```
?- append([1,2,3,4| T1]-T1, [5| T2]-T2, Result).
T1 = [5|T2],
Result = [1, 2, 3, 4, 5|T2]-T2. 
```

如有必要，在“正常”列表和差异列表之间进行转换并不难。我把它作为练习留给你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-06T03:28:03.283

你不能在 Prolog 中修改列表，但是你可以创建一个未指定长度的列表：

```
main :-
    A = [1,2,3,4|_]. 
```

[`nth0/3`](http://www.swi-prolog.org/pldoc/man?predicate=nth0/3)然后，您可以在 SWI-Prolog 中使用插入元素：

```
:- initialization(main).

main :-
    A = [1,2,3,4|_],
    nth0(4,A,5),
    writeln(A). 
```

插入此元素后，`A = [1,2,3,4,5|_]`.

您还可以定义一个将项目就地附加到列表末尾的函数，然后像这样使用它：

```
:- initialization(main).

append_to_list(List,Item) :-
    List = [Start|[To_add|Rest]],
    nonvar(Start),
    (var(To_add),To_add=Item;append_to_list([To_add|Rest],Item)).

main :-
    A = [1,2,3|_],
    append_to_list(A,4),
    append_to_list(A,4),
    writeln(A). 
```

在本例中，`A = [1,2,3,4,4|_]`在这两个项目之后附加。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-12T13:16:31.730

由于 Prolog 有 append 只接受列表，我们为什么不使用它来将我们的元素插入其中一个列表。IE

```
% E = element, L = list, R = result
% e.g. add_elem_in_list ([1,2,3,4], 5, R).
add_elem_in_list(L, E, R) :- append(L, [E], R). 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-22T16:45:23.427

你担心问题的错误结局。结构共享只能通过将一个元素放在列表的开头来实现。该方法具有您想要的性能特征。由于列表的定义方式，当您附加两个列表时，将复制整个第一个列表。在这种情况下，这将是整个列表。单项列表产生的垃圾显然会比这小得多。

如果您确实必须追加，请考虑向后构建列表，然后在末尾反转一次，这样会便宜得多，或者使用差异列表，这样可以有效地追加到末尾。

# c++ - 模板二元运算符重载决议

> ID：15028835
> 
> 赞同：4
> 
> 时间：2013-02-22T16:31:13.030
> 
> 标签：c++, templates

我在使用 Apple LLVM 编译器（XCode 4.5.2 附带）时遇到了一个问题，同时使用 GCC 正确运行。比关于编译器问题的辩论更重要（尽管我认为 GCC 是正确的），这引发了关于重载运算符时模板专业化的解析顺序的问题 [1]。

考虑一个简单的矩阵类`template <class T> class matrix_t`，其特征定义了乘法的结果类型（使用标量、矩阵或向量）。这将类似于以下代码：

```
template <class T, class U, class Enable = void>
struct matrix_multiplication_traits {
  //typedef typename boost::numeric::conversion_traits<T,U>::supertype type;
  typedef double type;
};

template <class T, int N>
struct vectorN {
  std::vector<T> vect;
  vectorN() : vect(N) { for(int i = 0; i < N; i++) vect[i] = i; }
};

template <class T>
class matrix_t {
  std::vector<T> vec;
public:
  matrix_t<T> operator*(matrix_t<T> const& r) const {
    std::cout << "this_type operator*(this_type const& r) const" << std::endl;
    return r;
  }

  template <class U>
  matrix_t<typename matrix_multiplication_traits<T, U>::type>
  operator*(U const &u) const {
    std::cout << "different_type operator*(U const &u) const" << std::endl;
    return matrix_t<typename matrix_multiplication_traits<T, U>::type>();
  }

}; 
```

`operator*`还可以考虑for 的专业化`vectorN`：

```
template <class T, class U, int N>
//vectorN<typename matrix_multiplication_traits<T,U>::type, N>
vectorN<double, N>
operator*(matrix_t<T> const&m, vectorN<U, N> const&v)
{
  std::cout << "vectorN operator*(matrix, vectorN)" << std::endl;
  //return vectorN<typename matrix_multiplication_traits<T,U>::type, N>();
  return vectorN<double, N>();
} 
```

并考虑一个简单的测试程序：

```
int main(int argc, const char * argv[])
{
  matrix_t<double> test;
  vectorN<double, 10> my_vector;
  test * my_vector; // problematic line
  return 0;
} 
```

“问题线”运行`operator*(matrix_t<T> const&, vectorN<U, N> const&)`在 GCC 和`template <class U> matrix_t<T>::operator*(U const&) const`LLVM 上的全局定义。所以就像`matrix_t<T>::operator*(U const&)`捕获所有模板专业化查找一样。一个简单的“修复”是将全局移动`operator*`到矩阵类中。

我首先认为这是特征类中的问题，这可能太复杂或错误（SFINAE）。但即使简化特征或完全禁用它（如粘贴代码）也会产生错误。然后我认为这是一个顺序问题（就像在 Herb Shutter 的文章中一样），但是在声明和定义`operator*`之间移动全局`matrix_t`并不会改变事情。

# 这是问题

当然，真正的问题是这`template <class U> matrix_t::operator*(U const&) const`太笼统了，但是：

*   这种问题是标准涵盖的吗？
*   类中定义的运算符重载是否优先于全局定义的运算符重载？
*   （更像是一个词汇问题）什么是资格`operator*(matrix_t<T> const&, vectorN<U, N> const&)`？模板重载运算符特化？这更像是模板特化还是重载函数？它的基本定义是什么？由于它本质上是一个重载的运算符，我有点迷茫。

[1] 我已阅读有关模板专业化顺序的 Herb Shutter 建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:53:02.273

> 类中定义的运算符重载是否优先于全局定义的运算符重载？

**没有**。根据 C++11 标准的第 13.3.1/2 段：

> **候选函数集可以包含要针对同一个参数列表解析的成员函数和非成员函数**。为了使实参和形参列表在这个异构集合中具有可比性，成员函数被认为有一个额外的形参，称为隐式对象形参，它表示已为其调用成员函数的对象。出于重载决议的目的，静态和非静态成员函数都具有隐式对象参数，但构造函数没有。

此外，在标准中没有提到成员函数优于非成员函数，反之亦然。

> 这种问题是标准涵盖的吗？

是的。之所以选择全局运算符（*应该是！*）是因为它是一个比你的类中定义的函数模板*更专业*`vectorN<U, N> const&`的模板：在模板参数推导之后，两者和`matrix_t<T> const&`都可以匹配`matrix_t<T> const& r`，但前者比后者，因此，它是首选。

根据第 13.3.3/1 段：

> 鉴于这些定义，如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2 更好的函数，然后：
> 
> [...]
> 
> — **F1 和 F2 是函数模板特化，根据 14.5.6.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更特化。**

所以：

> 所以就像 matrix_t::operator*(U const&) 正在捕获所有模板专业化查找

这种行为被称为**错误**。但是，请注意，这些不是*特化*，而是*重载*。

最后：

> 什么资格`operator * (matrix_t<T> const&, vectorN<U, N> const&)`？

我想你可以说它是一个（全局）运算符重载模板。它*不是*特化，因为模板函数特化具有不同的语法。因此，它没有专门的主要模板。它只是一个函数模板，一旦实例化，就会生成乘法运算符的*重载*。

# asp.net - Firebug 错误地报告 cookie 的状态

> ID：15028839
> 
> 赞同：1
> 
> 时间：2013-02-22T16:31:23.077
> 
> 标签：asp.net, cookies, firebug

我拥有的 ASP.net 4.0 站点需要始终在 SSL 下运行。我们已将 .Net 配置为返回 SSL cookie，如下所示：

```
<authentication mode="Forms">
  <forms cookieless="UseCookies" requireSSL="true" />
</authentication> 
```

和

```
<httpCookies httpOnlyCookies="true" requireSSL="true" /> 
```

当我在 Chrome 中查看 cookie 信息时，它说 cookie 是安全的。当我在 Firefox 的 Web Developer 工具栏中查看它时，它说它是安全的。还尝试了名为“View Cookies”的 FireFox 插件，该插件再次显示 Secure。

但是，如果我通过转到 Firebug > Net > HTML > Cookies 查看 Firebug 中的 cookie，它会说没有任何 cookie 是安全的（安全列是空的）。非常奇怪的是，如果我转到 Firebug > Cookies，它会说 cookie 是安全的。

我是否误读了 Firebug 中的 Net Tab 告诉我的内容？它不应该与 Cookies 选项卡说同样的话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:34:40.977

这是我最近[修复的 Firebug中的一个错误。](http://code.google.com/p/fbug/issues/detail?id=6368)该修复程序将包含在[Firebug 1.12a5](https://getfirebug.com/releases/firebug/1.12)中。

塞巴斯蒂安

# ruby-on-rails - Rails：CSV 导入

> ID：15028840
> 
> 赞同：0
> 
> 时间：2013-02-22T16:31:25.070
> 
> 标签：ruby-on-rails, import

我用列 id、task、description、created_at、updated_at 生成了一个 csv

```
 create_table "tasks", :force => true do |t|
t.string   "task"
t.string   "description"
t.datetime "created_at",   :null => false
t.datetime "updated_at",   :null => false 
```

我打开了 sqlite Konsole

```
 rails db
   .separator ','
   .C:/User/jkl/Desktop/tasks.csv 
```

我得到错误数据类型不匹配。我没有填写 created_at 和 updated_at，但这是从 rails 到 null => false。

你是怎么导入的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:16:59.107

我通常通过 ruby​​ 脚本来完成：

```
require 'csv'

def import
  CSV.foreach('path/to/file.csv', :col_sep => ';', :headers => true) do |row|
    Task.create!(row.to_hash)
  end
end 
```

假设您的 CSV 标题与您的列名匹配，则此方法有效，如下所示：

```
task;description
"Task 1";"Paint the fence" 
```

希望有帮助！

# ruby-on-rails - 通过 Rails 中的单一资源创建三个不同的模型？

> ID：15028841
> 
> 赞同：0
> 
> 时间：2013-02-22T16:31:27.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, mongoid

我的 rails 3.2 应用程序中有 4 个资源，如下所示。

*   车库管理员
*   超级管理员
*   车库
*   注册车库

现在我的应用程序的一部分必须像这样工作，

*   SuperAdmin 可以通过资源 RegisterGarage 创建 GarageAdmin。
*   GarageAdmin has_one Garage 和 Garage belongs_to GarageAdmin。
*   RegisterGarage 存储一些其他信息供管理员使用。

    现在我想要完成的是，当 SuperAdmin 创建一个 GarageAdmin 时，与该 GarageAdmin 对应的 Garage 也将仅通过该 RegisterGarage 资源同时创建。

我在 RegisterGarage 资源中调用了两个回调：

*   `before_create :pass`. 这将为 GarageAdmin 生成一个随机密码
*   `before_save :garage`. 这将为刚刚创建的 GarageAdmin 创建一个新的 Garage 并为其分配一个名称。

到现在为止，如果我删除`before_save :garage`. 但是在 RegisterGarage 中`SystemStackError: stack level too deep`使用时出现错误。`before_save :garage`

如果我以正确的方式做事，任何人都可以指导我，并指导我如何实施。

我正在使用mongoid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:34:32.057

关联名称是`garage`，并且您的回调也被命名为`garage`。这意味着（假设回调在关联之后在您的模型中列出）每次您尝试引用`garage`关联时，您实际上是在调用回调方法 - 这可能是错误的原因。

尝试将您的回调更改为不同的（并且更具描述性），例如`init_password`, `init_garage`。此外，如果只应在首次创建 GarageAdmin 时创建新车库，则它应该是`before_create`回调，而不是`before_save`. 否则，每次更新 GarageAdmin 时都会创建一个新的 Garage。

# java - 如何通过套接字传递 FTP 服务器的目录结构并使用 JTree 在客户端的 GUI 中显示它

> ID：15028844
> 
> 赞同：0
> 
> 时间：2013-02-22T16:31:32.907
> 
> 标签：java, swing, sockets, network-programming, jtree

我正在用 JAVA 创建一个 FTP 应用程序，用于在服务器和客户端之间传输文件。我为客户端创建了一个 GUI，它应该在左侧显示客户端目录结构，在右侧显示服务器，但我无法弄清楚如何传递服务器的目录结构并将其显示在客户端的 GUI 上。我尝试将它作为对象从服务器传递并在客户端读取它，但无法弄清楚如何将它传递给服务器的 JTree。但是我能够在 GUI 上显示客户端目录结构。我曾尝试四处寻找解决方案，但找不到任何对我有帮助的解决方案。任何帮助将不胜感激。

以下是我正在使用的课程。我现在只使用一个简单的客户端和服务器类，它们在建立连接时相互发送消息：

这是我的服务器类：

```
public class SimpleServer {

    public FileSystemModel systemModel;

    public static void main(String[] args) throws IOException {
        SimpleServer s = new SimpleServer();
        s.run();
    }

    public void run() throws IOException{
        ServerSocket serverSoc = new ServerSocket(150);
        System.out.println("Server up and running on port 150");
        Socket soc = serverSoc.accept();

        PrintStream ps = new PrintStream(soc.getOutputStream());
        ps.println("Welcome");

        InputStreamReader is = new InputStreamReader(soc.getInputStream());
        BufferedReader br = new BufferedReader(is);

        String message = br.readLine();
        System.out.println(message);

        //Not sure if this works
        ObjectOutputStream oOut = new ObjectOutputStream(soc.getOutputStream());
        String dir = "C:/Users/David/Desktop/Server/";
        systemModel = new FileSystemModel(new File(dir));
        oOut.writeObject(systemModel);

        /*if (message != null){
            PrintStream ps = new PrintStream(soc.getOutputStream());
            ps.println("Message Received");
        }*/
    }
} 
```

这是我的客户类：

```
public class SimpleClient {

    Socket soc;

    public void run() throws UnknownHostException, IOException {

        soc = new Socket("localhost", 150);

        InputStreamReader is = new InputStreamReader(soc.getInputStream());
        BufferedReader br = new BufferedReader(is);

        String message = br.readLine();
        System.out.println(message);

        if (message != null) {
            PrintStream ps = new PrintStream(soc.getOutputStream());
            ps.println("Message Received");
        }
    }

    //Not sure if this method is working
    public Object getObject() throws Exception {
        ObjectInputStream oIn = new ObjectInputStream(soc.getInputStream());
        Object model = oIn.readObject();
        return model;
    }
} 
```

这个类在我的 GUI 中用于显示 JTree 中的目录结构。目前只能显示客户端的目录结构。

```
class FileSystemModel implements TreeModel, Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private File root;

    private Vector<TreeModelListener> listeners = new Vector<TreeModelListener>();

    public FileSystemModel(File rootDirectory) {
        root = rootDirectory;
    }

     //All the other implemented methods from TreeModel goes here

    private void fireTreeNodesChanged(TreePath parentPath, int[] indices,
            Object[] children) {
        TreeModelEvent event = new TreeModelEvent(this, parentPath, indices,
                children);
        Iterator<TreeModelListener> iterator = listeners.iterator();
        TreeModelListener listener = null;
        while (iterator.hasNext()) {
            listener = iterator.next();
            listener.treeNodesChanged(event);
        }
    }

    private class TreeFile extends File {
        /**
     * 
     */
        private static final long serialVersionUID = -5775093232151119831L;

        public TreeFile(File parent, String child) {
            super(parent, child);
        }

        @Override
        public String toString() {
            return getName();
        }
    }
} 
```

最后，这是我的 GUI 类，它显示了两个 JTree。左侧是客户端的目录结构，右侧是服务器的目录结构，我在显示时遇到问题：

```
public class GUI extends JFrame {

    private JPanel contentPane;
    private FileSystemModel systemModel;
    private SimpleClient c;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    GUI frame = new GUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     * @throws Exception 
     */
    public GUI() throws Exception {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);

        JMenuBar menuBar = new JMenuBar();
        setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        //Connect Button
        JMenuItem mntmConnect = new JMenuItem("Connect");
        mntmConnect.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                c = new SimpleClient();
                try {
                    c.run();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }   
            }
        });

        mnFile.add(mntmConnect);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JSplitPane splitPane = new JSplitPane();
        contentPane.add(splitPane, BorderLayout.CENTER);

        String dir = "C:/Users/David/Desktop/Client/";

        systemModel = new FileSystemModel(new File(dir));

        final JTree treeClient = new JTree(systemModel);
        treeClient.addTreeSelectionListener(new TreeSelectionListener() {
            public void valueChanged(TreeSelectionEvent arg0) {
                File file = (File) treeClient.getLastSelectedPathComponent();
                //fileDetailsTextArea.setText(getFileDetails(file));
                System.out.println(getFileDetails(file));
            }
        });
        splitPane.setLeftComponent(treeClient);

        //This is where I want to pass the server's directory structure
        JTree treeServer = new JTree();
        splitPane.setRightComponent(treeServer);    
    }

    private String getFileDetails(File file) {
        // returns details of the file clicked
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:55:19.373

一种方法是在本地挂载远程文件系统，如此处针对[Mac](https://superuser.com/questions/149385/map-ftp-server-as-a-local-drive-in-finder)或[Windows](https://serverfault.com/questions/6079/how-can-i-mount-an-ftp-to-a-drive-letter-in-windows)所建议的那样。然后你可以创建一个`TreeModel`using `File`，如下[所示](https://stackoverflow.com/a/14837208/230513)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:48:30.323

您可以通过序列化将对象从一个套接字发送到另一个套接字。只需将您的树模型发送过来。注意 DefaultMutableTreeNode 实现了 Serializable。

我不会发送文件对象（尽管这也是可序列化的），只有字符串。也不需要发送 TreeModel 实例，发送 DefaultMutableTreeNode 就足够了，您可以在接收端构建您的 TreeModel。只需确保您的对象图仅包含可序列化对象。

# facebook - 当页面删除或隐藏 Facebook 应用程序选项卡时是否可以收到通知？

> ID：15028845
> 
> 赞同：0
> 
> 时间：2013-02-22T16:31:41.767
> 
> 标签：facebook

是否可以检测应用程序卸载或者如果它被隐藏在页面上而不轮询 facebook？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T13:03:25.430

这是不可能的。您需要轮询该页面以查看它是否仍然安装并手动跟踪它。

# tridion - UGC 用户以 Null 身份返回

> ID：15028847
> 
> 赞同：3
> 
> 时间：2013-02-22T16:31:50.223
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, ugc

我正在使用 UGC Web 服务返回 UGC 内容，但我遇到的问题是用户被返回为 null。正在将用户输入 UGC 数据库 - 我可以在 UGC_USERS 表和 UGC_ITEMS 表中看到用户，但是在使用 odata.svc 检索评论时，用户返回为空。

```
WebServiceClient ugcCall2 = new WebServiceClient();
Uri uri = new Uri("http://new.ugc.service/odata.svc");
CDS.ContentDeliveryService cds = new CDS.ContentDeliveryService(uri);
var comments = client.Comments; 
```

有谁知道为什么会这样？此时尚未启用 Audience Manager。我们只是添加来自域用户的评论 - 用户名出现在 UGC 数据库中，但是当我们从 odata 检索评论时，用户返回为 null。

谢谢

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:53:33.587

约翰，

确保您在调用中使用 Expand 方法：

```
client.Comments.Expand("User") 
```

这将确保完整的用户数据也是结果的一部分。

直接查询Odata就可以看得很清楚：

```
odata.svc/Comments?$expand=User 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:44:56.090

这似乎是一个 mis(-un)configured 的情况`Ambient Data Framework (ADF)`。确保在您的网站上配置了 ADF，即您从中调用 OData 服务的服务器。

ADF 负责将您的客户端信息（例如用户 ID、cookie、会话 ID 等）从一台机器发送到另一台机器。在您的情况下，与 OData 的通信似乎是在没有此信息的情况下完成的。这表明 ADF 配置不正确。再次查看 UGC 的文档以了解如何配置它。

BTW，你的示例代码不是很清楚，是什么`client`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:57:38.343

正如 Mihai 所说，确保在 UGC CD Web 服务上将 UGC 环境磁带配置为（登台或实时）网站。如果不这样做，用户将注册为 ID 为空。

安装 UGC 时更常见的问题也可以查看我的博客：

[http://80000ft.blogspot.nl/2012/08/common-issues-while-installing-ugc.html](http://80000ft.blogspot.nl/2012/08/common-issues-while-installing-ugc.html)

# mysql - MySQL | 如何只选择每个类别的一个记录？

> ID：15028852
> 
> 赞同：2
> 
> 时间：2013-02-22T16:32:00.250
> 
> 标签：mysql, sql, greatest-n-per-group

我有一个包含数据记录的表，每条记录都属于一个类别。假设我有以下表格：

```
ID | Category | Title    | Date
--------------------------------------
1  | Cat 1    | Ttl 1    | 2013-02-18
2  | Cat 2    | Ttl 2    | 2013-02-18
3  | Cat 1    | Ttl 3    | 2013-02-20 
```

我喜欢做的是，每个类别只获取一篇文章，并且我将获取的必须是表中最新的一篇。

更深入地说，结果必须如下所示：

```
ID | Category | Title    | Date
--------------------------------------
2  | Cat 2    | Ttl 2    | 2013-02-18
3  | Cat 1    | Ttl 3    | 2013-02-20 
```

如您所见，每个类别我只有一个记录（Cat 1 一个，Cat 2 一个），并且在 Cat 1 的记录中我有最新的。

如何在 MySQL 查询中翻译它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T16:33:11.557

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT Category, MAX(date) max_date
            FROM    tableName
            GROUP BY Category
        ) b ON a.category = b.category AND
                a.date = b.max_date 
```

为了获得更好的性能，请`INDEX`在列上添加一个化合物`Category, date`

或者

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT Category, MAX(ID) max_ID
            FROM    tableName
            GROUP BY Category
        ) b ON a.category = b.category AND
                a.ID = b.max_ID 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!2/a6ede/5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:35:53.910

您可以使用`WHERE`子句来过滤数据：

```
select *
from yourtable t1
where (category, date) in (select category, max(date)
                           from yourtable t2
                           group by category) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/1f974/3)

# ios - CCParticleSnow 不循环/重复。

> ID：15028855
> 
> 赞同：0
> 
> 时间：2013-02-22T16:32:05.133
> 
> 标签：ios, cocos2d-iphone, ccparticlesystem

我写了这段代码。

```
 CCSpriteFrame *starParticleFrame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:spriteName];
            CCParticleSnow *emitter = [[CCParticleSnow alloc] initWithTotalParticles:8];

            [emitter setTexture:[starParticleFrame texture] withRect:[starParticleFrame rect]];
            emitter.position = ADJUST_XY(theScreenSize.width/2, 3*theScreenSize.height/4);
            emitter.scale = HD_PIXELS(1.5);

            emitter.speed = 20 + arc4random() %20;
            [emitter setDuration:kCCParticleDurationInfinity];

            //[emitter setGravity:CGPointMake(0, -150)];
            [self addChild: emitter z:-1]; 
```

有用。但问题是它只点燃一次雪，而不是连续的。（在这种情况下，只有 8 个粒子出来了，就是这样）。

但是，如果我将第二行代码交换为

```
CCParticleSnow *emitter = [CCParticleSnow node]; 
```

然后粒子系统能够连续循环。我阅读了文档并在谷歌上搜索了这一点，但无济于事。最后一次尝试是将该持续时间设置为 kCCParticleDurationInfinity。但仍然无法正常工作。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:19:31.707

您将发射器限制为 8 个粒子。它只会在最初的 8 个粒子消失后生成新粒子。

# php - d/m/y 到 Ymd php stringtotime 无法正常工作

> ID：15028858
> 
> 赞同：2
> 
> 时间：2013-02-22T16:32:14.027
> 
> 标签：php, date, explode

我有一个格式的日期字符串，`d/m/y`例如`22/02/13`

我想回显这个字符串，`Y-m-d`但使用以下代码，它不起作用。

```
$d = '22/02/13';
echo date('Y-m-d', strtotime($d)); 
```

输出：`1970-01-01`

我究竟做错了什么？我是否必须将`/`其分解为分隔符并手动执行，还是有更简单/更优雅的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:34:12.010

使用日期时间：

```
$datetime = DateTime::createFromFormat('d/m/y', '22/02/13');
echo $datetime->format('Y-m-d'); 
```

[看到它在行动](http://codepad.viper-7.com/KjGLlj)

**参考**

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T16:34:36.123

从[手册](http://www.php.net/manual/en/function.strtotime.php)：

> 笔记：
> 
> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat()。

**tl;dr：**如果你使用斜线，它将把它当作 am/d/y 疯狂的美式日期。

最简单的解决方法是使用[DateTime 类](http://www.php.net/manual/en/datetime.createfromformat.php)来创建您自己的格式：

```
$date= DateTime::createFromFormat('d/m/y', '21/11/13');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T16:35:50.953

Using`/`使 PHP 认为您使用的是美式格式的日期 ( `mm/dd/yy`)，因此将它们替换为破折号以获得所需的输出：

```
$d = str_replace('/', '-', '22/02/13');
echo date('Y-m-d', strtotime($d)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:35:32.953

看着

```
DateTime::createFromFormat(...) 
```

这将创建一个正确的 DateTime 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:39:17.320

更简单的方法：

```
$d = '22.02.13';
echo date('Y-m-d', strtotime($d)); 
```

萨卢多斯 ;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-30T17:41:03.507

```
echo implode("-", array_reverse(explode('/', $val))); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-07T19:30:06.123

为了这

*"注意：m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，然后假定欧洲 dmy 格式。为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat() 。”*

[http://php.net/strtotime](http://php.net/strtotime)

# node.js - Forever.js：为多个用户使用一个实例

> ID：15028859
> 
> 赞同：0
> 
> 时间：2013-02-22T16:32:14.637
> 
> 标签：node.js, config, forever

我已经运行了 Forever.js，但我现在正在尝试让多个用户使用同一个 Forever.js 实例。

如果我现在使用 Forever.js 启动一个文件，我无法看到/停止/重新启动另一个用户。如果我在`Forever.js list`那里做，它表明没有任何东西在运行。

我尝试了一些不同方式设置配置值的方法，例如： `forever set root '/tools/node/forever'`and get back `Forever config saved: /tools/node/forever/config.json`，但是当我运行时`forever config`，文件被重置回原来的样子。

我可以将两个用户的配置设置到同一个文件夹，然后它会共享同一个 Forever.js 实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:55:25.193

Forever 将当前进程存储在用户主目录中，因此您不能与多个用户共享同一个进程。最简单的方法是设置服务用户并在您需要停止/重新启动进程时切换到该用户（不应该太频繁）。

或者，您可以按照本指南中的说明设置 init.d 脚本：[使用 Forever 将 Node.js 服务器作为服务运行](http://www.exratione.com/2011/07/running-a-nodejs-server-as-a-service-using-forever/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T01:18:44.030

Another possibility would be to kill the forever process after `ps -aux | grep forever`

# java - 从beanclass重定向liferay

> ID：15028863
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:32:24.307
> 
> 标签：java, jsf, jsf-2, liferay, liferay-6

如何使用 Liferay 从一个页面重定向到另一个页面？

这是代码：

```
LiferayFacesContext portletFacesContext = LiferayFacesContext.getInstance();
portletFacesContext.getExternalContext().redirect("NewFile"); 
```

执行此代码时，会显示一条消息“找不到页面”。这两个文件都存在于 JSF portlet 的 liferay 项目的 View 文件夹中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-23T16:32:57.617

您的代码片段显示您正在混合使用 PortletFacesContext 和 LiferayFacesContext。请确保您使用的是 Liferay Faces jar（例如 liferay-faces-portal.jar 和 liferay-faces-bridge-impl.jar），而不是 portletfaces.org 中的旧 jar

我建议你只使用 LiferayFacesContext。话虽如此，您是否尝试在同一门户页面上的同一 portlet 中重定向到不同的 JSF 视图？或者您是否尝试重定向到不同的门户页面？

# html - form(method='get') 适用于 node.js，但状态：在开发工具中挂起

> ID：15028865
> 
> 赞同：2
> 
> 时间：2013-02-22T16:32:30.360
> 
> 标签：html, node.js, pug

我正在制作一个网页，该网页使用表单将用户投票提交给使用节点的 mongo 数据库。虽然下面的代码成功地修改了数据库，但它会在 chrome dev-tools 中导致挂起状态操作。这会阻止所有 js 运行，并且几分钟后浏览器会重定向到（不存在的）/v/foo。当使用 'post' 而不是 'get' 作为方法时，也会出现此问题。

**index.jade:**

```
form(method= 'get', action= '/v/foo')
  button.vote(type= 'submit') 
```

**应用程序.js：** `app.get('/v/:postID', home.vote);`

**主页.js：**

```
exports.vote = function(req, res){
  // gets postID from the URL
  postID = req.params.postID;
  // gets logged-in user
  user = req.session.username;
  // sends postID, retrieves a post with ID postID
  postdb.findPost(postID, function(post){
  // readPost(postID, function(post){
    // increments the 'votes' property of the comment by 1
    titles.update({postID: postID}, {$inc: {ups: 1}}, function(err){
      if (err) throw err;
    });

    // code that calculates current post level and progress goes here (works fine)

    // updates level and level progress
    titles.update({postID: postID}, {$set: {level: level, lvlProg: lvlProg}}, function(err){
      if (err) throw err;
    });

    accounts.update({username: user}, {$push: {votedPosts: postID}}, function(err){
      if (err) throw err;
      console.log('recorded')
    });

  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:48:40.697

您的代码没有发送响应，因此浏览器会感到困惑。;)

`res.send(200);`如果一切顺利，请尝试。

HTTP 表单仍然希望它的请求被干净地关闭，如果你不`end`使用`res.send()`.

# jsf-2 - 如果命令按钮中的 update="dlg"，Primefaces p:dialog 并不总是显示

> ID：15028868
> 
> 赞同：5
> 
> 时间：2013-02-22T16:32:40.190
> 
> 标签：jsf-2, primefaces

我有一个这样的 jsf facelet 页面（非常简化的版本）：

```
 <h:form id="frmAnagPersonName">
        <p:commandButton value="Edit" icon="ui-icon-gear" 
                         update="@form :frmEdit"
                         onsuccess="_dlgEdit.show()"/>
        ...
        <p:dataTable etc...
        ...

    </h:form>

    <p:dialog id="dlgEdit" widgetVar="_dlgEdit" dynamic="true" modal="true" closable="true"
              header="Person Identity">  
        <h:form id="frmEdit" >
            <p:panelGrid id="pnlEdit" columns="2">
                <p:outputLabel id="lblName" for="eName" value="Name"/>
                <p:inputText id="eName" value="#myBean.personName}"
            </p:panelGrid>
        </h:form>
    </p:dialog> 
```

它工作正常，直到我在对话框中放置一个动态标题：

```
<p:dialog ... header="#{myBean.header}" ...  > 
```

此时我必须更改以下`update`属性`p:commandButton`：

```
update="@form :dlgEdit" 
```

但在这种情况下，对话框只会在第一次单击按钮时出现。它不会出现第二次，然后再次出现......
为什么？如何让对话框始终显示？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T17:01:08.320

使用`oncomplete`属性而不是`onsuccess`属性。

```
<p:commandButton ... update="@form :dlgEdit" oncomplete="_dlgEdit.show()" /> 
```

`onsuccess`当 ajax 响应成功到达但在基于 ajax 响应执行 ajax 更新很久之前直接调用该属性。当 ajax 更新成功完成时调用该`oncomplete`属性。另请参阅[的标签文档`<p:commandButton>`](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandButton.html)。

基本上，这是事件调用顺序：

*   `onclick`处理程序被调用
*   ajax 请求是根据表单数据准备的`process`
*   `onbegin`处理程序被调用
*   发送ajax请求
*   成功获取 ajax 响应（HTTP 状态码为 200）
*   `onsuccess`处理程序被调用
*   ajax 更新在 HTML DOM 中基于`update`
*   `oncomplete`处理程序被调用

# windows - 如何创建一个为 Google Drive 创建公共链接的简单程序，如 Dropbox？

> ID：15028870
> 
> 赞同：1
> 
> 时间：2013-02-22T16:32:42.933
> 
> 标签：windows, operating-system, google-drive-api

我的问题/愿景是在我的 Google Drive 文件夹中右键单击创建一个“公共链接”，就像使用 Dropbox 一样。我们更接近于实现这一目标，因为 Google Drive 现在有网站发布功能。有关详细信息，请参阅此帖子：http: **[//googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html](http://googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html)**

这意味着我们可以在 Google Drive 中创建一个公用文件夹，例如：**https://googledrive.com/host/[public-folder-random-string]/[filename]**

我想知道是否有一种方法可以添加一个 Windows 右键单击​​选项，该选项会在我的计算机上的公共文件夹中自动显示，并允许我通过自动填写 URL、随机字符串来创建公共链接，然后在公用文件夹 URL 之后添加子文件夹/文件名，然后使其“可粘贴”。

以下是这样的 Dropbox 功能如何工作的示例：**[http ://www.youtube.com/watch?v=fxclGfUBJqg](http://www.youtube.com/watch?v=fxclGfUBJqg)**

我不是计算机程序员，也不知道如何创建这样的东西，只是想知道这个社区是否可以实现这一点或帮助我找到可以做到的人。

我期待收到大家的来信。

**编辑：**这与 C++ 或与该性质相关的编程有关吗？

# java - 任意嵌套子资源中的 Jersey @Ref（声明性超链接）

> ID：15028871
> 
> 赞同：5
> 
> 时间：2013-02-22T16:32:46.163
> 
> 标签：java, rest, jersey

我已经搜索了很多，并试图深入研究[Jersey 源代码](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-server-linking/1.17/com/sun/jersey/server/linking/impl/RefProcessor.java?av=f)，但据我所知，Jersey 不支持任意深度嵌套子资源以及`@Ref`注释。

这是我的设置：

**成员资源.java**

```
@Component // Spring managed
@Scope("prototype")
@Validated
@Path("/member")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public class MemberResource extends BaseResource {

    @Autowired // Spring is injecting this sub resource
    private MemberFriendResource memberFriendResource;

    @Path("/{memberId}/friend/")
    public MemberFriendResource getMemberFriendResource() {
        return memberFriendResource;
    }

} 
```

**MemberFriendResource.java**

```
@Component // Spring managed
@Scope("prototype")
@Validated
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public class MemberFriendResource extends BaseResource {

    @GET
    public JResponse<FriendListRepresentation> getAllFriends() {
        // Code
    }

    @GET
    @Path("/recent")
    public JResponse<FriendListRepresentation> getRecentFriends() {
        // Code
    }
} 
```

**MemberRepresentation.java**

```
public class MemberRepresentation {
    @Ref(resource=MemberResource.class, method="getMemberFriendResource", bindings = {
    @Binding(name="memberId", value="${instance.id}")
    })
    public URI allFriendsURI;

    @Ref(resource=MemberResource.class, method="??????????", bindings = {
    @Binding(name="memberId", value="${instance.id}")
    })
    public URI recentFriendsURI;
} 
```

我希望`recentFriendsURI`动态生成就像`allFriendsURI`（它本身确实有效，只是为了清楚）。我意识到我可以手动输入路径，沿线`@Ref(value="/member/{memberId}/friend/recent", etc)`，但我强烈，*强烈*不希望在需要链接的每个随机表示中硬编码我的路径字符串。

**泽西岛是否可以使用资源/方法范例正确绑定变量的子资源方法的 URI，而不是输入字符串路径？**

我相信[这个问题](https://stackoverflow.com/questions/14885383/is-it-correct-that-jersey-does-not-support-declarative-hyperlinking-in-nested-re)试图达到类似但略有不同的结果。
[我认为，另一个问题](https://stackoverflow.com/q/9617107/1449525)是我的问题的更具体形式。我正在寻找一种不会对路径进行硬编码并且可以任意深度的解决方案。

# sql-server - SQL Server 根据字段的值触发插入和/或更新的记录

> ID：15028883
> 
> 赞同：1
> 
> 时间：2013-02-22T16:33:41.640
> 
> 标签：sql-server, tsql, triggers

我有一个我认为非常简单的要求，但是因为我是新手，所以我不能让它正常工作。

我有一个充满客户数据的表，其 pk 为`cust_no`. 当插入新客户行并且电子邮件地址字段不为空时，我想将同一行中的日期字段设置为`getdate()`.

如果客户记录用新的电子邮件地址更新，我也想做同样的事情，但同样，只有当电子邮件地址字段不为空，并且实际上用新的电子邮件地址更新时。

这样做的目的是运行在特定时间范围内收集的新电子邮件地址的报告。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:18:46.160

需要记住的重要一点是很多人都犯了错误：SQL Server 中的触发器在**每条语句中调用一次，**而不是每行调用一次。

因此，如果您碰巧有一个`INSERT`or`UPDATE`语句一次插入或更新 50 行 - 您的触发器将被调用**一次**`Inserted`，并且伪表（`Deleted`在 UPDATE 情况下）将包含 50 行。在编写触发器时，您需要考虑到这一点。

INSERT 案例更简单 - 所以这里是：

```
-- CREATE after INSERT trigger
CREATE TRIGGER trgCustomerInsert
ON dbo.Customer AFTER INSERT
AS
    -- update your "Customer" table
    UPDATE dbo.Customer
    SET SomeDateColumn = GETDATE()  -- set date column to GETDATE()
    FROM dbo.Customer c
    INNER JOIN Inserted i ON c.cust_no = i.cust_no  -- on all those rows inserted
    WHERE c.Email IS NOT NULL   -- where the e-mail address is NOT NULL 
```

您基本上只需将`Inserted`伪表（包含刚刚插入的所有行 - 及其所有列值）与“真实”客户表相结合，然后更新刚刚插入的所有客户行，以及电子邮件列不在的位置空值。

更新有点棘手 - 因为您只想更新电子邮件列之前为 NULL 的那些行，并且在更新之后现在不为 NULL。因此，您需要加入`Deleted`伪表，其中包含“旧”值（在 UPDATE 之前）。

所有那些已更新的行，其中电子邮件的旧值为`Deleted`NULL，而 Customer 表中的当前值不是 NULL - 这些是您要为其更新日期列的行。

```
-- CREATE after UPDATE trigger
CREATE TRIGGER trgCustomerUpdate
ON dbo.Customer AFTER UPDATE
AS
    -- update your "Customer" table
    UPDATE dbo.Customer
    SET SomeDateColumn = GETDATE()  -- set date column to GETDATE()
    FROM dbo.Customer c
    INNER JOIN Deleted d ON c.cust_no = d.cust_no   
    WHERE 
       -- where new value of e-mail is NOT NULL
       -- and the old value (in "Deleted") was in fact NULL
       c.Email IS NOT NULL AND d.EMail IS NULL 
```

# css - h2中的按钮太高

> ID：15028887
> 
> 赞同：0
> 
> 时间：2013-02-22T16:34:00.513
> 
> 标签：css, twitter-bootstrap

这是我的代码（请在[此处](http://jsfiddle.net/deZet/)查看小提琴）：

```
<h2>Icecream<a href='#' class='btn pull-right'><i class='icon-star'></i> Follow</a></h2> 
```

问题（如红色背景所示）是`pull-right`按钮太高。我怎样才能让按钮与按钮的高度相同`h2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:39:19.730

我不完全确定你的意思，但我将它添加到 css 块中，如果有帮助，它会将按钮向下推到 H1 的中心：

```
.pull-right {
    margin-top: 5px;
} 
```

我建议将你的 h1 和你的按钮分开放在一个 div 中。最好尽可能保持元素的对齐方式分开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T16:44:28.143

```
.btn.pull-right {
    position:relative;
    top:5px;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-22T17:57:21.670

如果您处于无法修改标记的情况，flexbox 可以做到这一点。我已经为所有应该能够执行此操作的浏览器添加了前缀（遵循 2009 规范的 FF 版本无法执行此操作，因为它们不会在文本周围插入匿名弹性项目框）。你可以自由地为那些不能做 flexbox 的浏览器保留浮动。

[http://jsfiddle.net/deZet/31/](http://jsfiddle.net/deZet/31/)

```
h2 {
  background-color: red;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

h2 a.btn.pull-right {
  -webkit-flex: 0 0 auto;
  -ms-flex: 0 0 auto;
  flex: 0 0 auto;
} 
```

[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

如果您愿意修改标记，使用 table/table-cell 也可以，但您需要摆脱浮动。

[http://jsfiddle.net/deZet/34/](http://jsfiddle.net/deZet/34/)

```
h2 {
    background-color: red;
    display: table;
    width: 100%;
}

h2 .cell {
    display: table-cell;
    vertical-align: middle;
}

h2 .cell:last-child {
    text-align: right;
    line-height: 1;
}

<h2><span class="cell">Icecream</span> <span class="cell"><a href='#' class='btn'><i class='icon-star'></i> Follow</a></span></h2> 
```

# jquery - asp.net 使用日历

> ID：15028891
> 
> 赞同：0
> 
> 时间：2013-02-22T16:34:22.813
> 
> 标签：jquery, asp.net, calendar, datepicker

我希望在屏幕上显示日历，我需要将日期列表传递给日历。每个日期将在日历上以粗体突出显示，以显示已存储的日期。

我正在考虑使用 JQuery 日期选择器，但我认为 asp:calendar 可能会更好。有没有人有任何建议或知道我应该从哪里开始？

* * *

编辑：所以对于测试运行，我使用 datepicker 使用：

```
<meta charset="utf-8" />
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />

        <script>
            $(function () {
            $("#datepicker").datepicker();
            });
        </script>

   <p>Date: <input type="text" id="datepicker" /></p> 
```

现在我有一个存储在cs页面中的日期列表。

```
 DateTime start = new DateTime(2013, 02, 20);
        DateTime end = new DateTime(2013, 01, 11);

        var dates = new List<DateTime>();

        for (var dt = start; dt <= end; dt = dt.AddDays(1))
        {
            dates.Add(dt);
        } 
```

有谁知道如何将列表传递给日历，以便日历突出显示列表中的日期。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:38:29.480

我建议您使用[JQuery 日历](http://jqueryui.com/datepicker/)，因为您有各种主题选项，而 asp.net ajax 控件则没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:37:42.317

我会考虑尽可能通过 ASP 或 Ajax Toolkit 控件使用 JQuery 插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:42:59.370

我看不出没有理由不为此目的使用常规的 ASP.NET 日历。看看下面的教程：

[突出显示日历中的重要日期](http://www.codeproject.com/Articles/7929/Highlighting-Important-Dates-in-Calendar)

# css - 响应页面 - 溢出问题

> ID：15028898
> 
> 赞同：0
> 
> 时间：2013-02-22T16:34:50.823
> 
> 标签：css, responsive-design, overflow, media-queries

我正在尝试确定是什么原因导致水平滚动条出现在[此页面上](http://www.tuilifestyle.com/realtor-referral-program/)。它仅在我重新调整页面大小以继承以下媒体查询时出现...

```
@media (max-width: 979px) and (min-width: 768px) 
```

奇怪的是，当我在 iPad 上从纵向切换到横向，或者我来回调整浏览器大小时，就会发生这种情况。当我第一次在 iPad 或计算机上以这种大小加载页面时，它没有水平滚动条。

使用消除过程，我能够确定它是底部联系表格中的东西，但我无法确定它是什么 DIV，以便我可以修复它。我什至打算使用溢出-x：隐藏，但是当我在 iPad 上来回切换方向时，这并不能解决问题。

这是一个小问题，我希望我遗漏了一些明显的东西。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:39:25.403

我刚刚检查了你的页面。只需检查您是否从其父元素中为任何子元素提供了更多宽度（ summing: box-width+border_margin ）值。如果您确定我所说的内容，请使用溢出：隐藏。希望你能明白。

# sql - Excel 2010 和 SQL Server 存储过程

> ID：15028900
> 
> 赞同：1
> 
> 时间：2013-02-22T16:34:59.450
> 
> 标签：sql, sql-server, excel, vba, stored-procedures

我需要一个宏，它为列中的每个单元格执行一个 SQL Server 存储过程，该过程为不同列（但在同一行）中的不同单元格获取参数。

即用从 A 列获取参数的存储过程的结果填充 B 列。

例子：

*   B2 是使用 A2 值作为输入的存储过程的结果
*   B3 是使用 A3 值作为输入的存储过程的结果
*   B4 是使用 A4 值作为输入的存储过程的结果
*   B5 是使用 A5 值作为输入的存储过程的结果

没有VBA有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:40:34.627

是的，您应该可以在没有 VBA 的情况下执行此操作，方法是定义与 SQL Server 数据库的连接并将数据以这种方式导入电子表格。您可以使用[数据连接向导](http://office.microsoft.com/en-us/excel-help/create-edit-and-manage-connections-to-external-data-HA010342379.aspx)创建与数据库中的表或视图的连接，或者输入您自己的 SQL 语句来查询数据库，并将该数据添加到新工作表中。

然后，在原始工作表中，您可以使用查找功能`VLOOKUP`来查找匹配项。

```
=VLOOKUP(A2, Table_Named_Range, Column_of_Result, 0) 
```

如果您需要更详细的解释，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T11:50:22.303

我最终将表格放入工作表中，然后使用 LOOKUP 函数发送多个单元格值以获取表格中的特定值

[查看此处了解如何使用 LOOKUP 功能](http://blogs.office.com/b/microsoft-excel/archive/2012/04/26/using-multiple-criteria-in-excel-lookup-formulas.aspx)

# c# - 解释 c# lambda 语法

> ID：15028902
> 
> 赞同：4
> 
> 时间：2013-02-22T16:35:09.063
> 
> 标签：c#, lambda, expression

我对 Lambda 表达式有一个大致的了解，但不确定`() =>`语法的含义。此代码似乎返回任务项列表，但我不确定它如何执行或如何解释它的含义。

有人可以告诉我：

1.  是什么`() =>`意思？
2.  似乎每个`new Task`块都是按顺序执行的？

```
 private DateTime? _myTime = null;
 private DateTime? _theirTime = null;
 private bool _okToProcess = true;

 List<Task> myTasks = new List<Task>
            {
                   new Task( () => 
                    {
                        _myTime = GetMyTime();
                    }),

                     new Task( () => 
                    {
                        _theirTime = GetTheirTime(); 
                        _okToProcess = _myTime > _theirTime;                                         
                    }),

                new Task(() => 
                    {
                        if (_okToProcess)
                        {
                           WriteToMyLogStep("We are processing");
                        }
                        else
                        {
                           WriteToMyLogStep("We are NOT processing");
                        }
                     });
            }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:36:36.440

`()`- 表示匿名方法所取的参数，

`=>`- 通常读取**并**指向使用这些参数的匿名方法主体（如果提供的话）。

在您的情况下， lamda 表达式与以下内容相同：

```
 delegate() {  _myTime = GetMyTime(); } 
```

至于任务，它们只是添加到列表中，没有执行。它们将如何执行取决于您将来要如何执行它们。（可能在同一个线程的循环中，也可能在不同的线程中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T16:37:38.457

`() =>`语法只是意味着 lambda 没有命名输入。这就像调用一个不带参数的方法。

至于代码，任务刚刚创建但从未真正启动，因此它们不会在显示的代码中运行。我假设列表是枚举的，并且任务从其他地方开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:38:58.333

您可能习惯于看到 lambda 函数，例如`x => DoSomething(x)`. 这实际上是简写`(x) => DoSomething(x)`- 初始`(x)`代表函数的参数，与`(x)`in相同`DoSomething(x)`。做。

在这种情况下，没有参数，因此它使用`()`，与常规函数相同`DoSomething()`。

至于`Task`s，一旦启动，它们就会并行运行，除非您明确等到每个都完成后再开始下一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:38:04.867

() 将类似于函数所采用的参数，并且我相信任务是异步执行的 => 指向函数的主体

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:38:51.363

1.  要执行的匿名 Action；
2.  任务只是定义，而不是执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T16:39:02.713

`()=>`是`Action`- 一个没有参数的表达式。

这些任务尚未开始，因此（目前）永远不会完成......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T16:39:19.660

1.  `()`是您的参数列表，在您的情况下为空或无，它被传递到`=>`运算符之后的匿名函数中。它的`=>`名字来自 Lambda 演算。

2.  这取决于您如何调用列表中的任务。这只是其中的一个`List<Task>`任务。为了执行您的任务，您需要执行以下操作：

    ```
    foreach (Task t in myTasks) {
        t.RunSynchronously();  // in this case the tasks would run synchronously
    } 
    ```

# java - 纹理得到黑色和白线添加到它

> ID：15028905
> 
> 赞同：0
> 
> 时间：2013-02-22T16:35:29.123
> 
> 标签：java, opengl, textures, lwjgl

我尝试将纹理添加到我的 OpenGL 显示中。像正常一样渲染纹理。

**获取纹理：**

```
try {
        mainTexture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream(texturePath));
        width = mainTexture.getTextureWidth();
        height = mainTexture.getTextureHeight();
    } catch(IOException e) {
        e.printStackTrace();
    } 
```

**渲染纹理：**

```
mainTexture.bind();
    glColor3f(1.0f,1.0f,1.0f);

    glBegin(GL_QUADS);
        glTexCoord2f(0,0);
        glVertex2f(x,y);
        glTexCoord2f(1,0);
        glVertex2f(x + width,y);
        glTexCoord2f(1,1);
        glVertex2f(x + width,y + height);
        glTexCoord2f(0,1);
        glVertex2f(x,y + height);
    glEnd(); 
```

**在初始化代码中使用它：**

```
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); 
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

**这是代码的结果：**

纹理/图像是 50x50 像素，位于蓝色框内，但纹理被渲染到白线，黑色就在线条之前。找不到这样做的原因。它应该只渲染 50x50 像素，这是图像/纹理的宽度和高度。

![在此处输入图像描述](../Images/7d3c43765f0060d5e5455cb1f0f24cb9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:39:08.743

我认为图像大小/尺寸不是两个的幂存在一些问题...阅读此： http: [//factor-language.blogspot.com/2009/04/opengl-textures-and-power-of-two -size.html](http://factor-language.blogspot.com/2009/04/opengl-textures-and-power-of-two-size.html)

# mongodb - 如何在本机 node-mongo-native 驱动程序中执行 MongoDB 查询？

> ID：15028907
> 
> 赞同：2
> 
> 时间：2013-02-22T16:35:31.467
> 
> 标签：mongodb, node-mongodb-native, mongo-c-driver

有什么方法可以将 MongoDB 查询`db.things.find()`直接传递给*Mongo C 驱动程序*或 Javascript 驱动程序*node-mongo-native*进行查询？

我想知道本机驱动程序能够评估查询并返回结果。

怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:44:11.907

[*mongo.h*](http://api.mongodb.org/c/current/api/mongo_8h.html)中的方法 mongo_simple_str_command(...)似乎是您正在搜索的内容。

```
mongo_simple_str_command(conn, db, "$eval", "db.foo.find()", out); 
```

我在这里找到了一个使用示例：[https ://github.com/mongodb/mongo-c-driver/blob/master/test/platform/linux/timeouts.c](https://github.com/mongodb/mongo-c-driver/blob/master/test/platform/linux/timeouts.c)

# google-provisioning-api - Google Reseller API 在插入客户时返回“资源已存在”

> ID：15028910
> 
> 赞同：0
> 
> 时间：2013-02-22T16:35:38.653
> 
> 标签：google-provisioning-api, google-reseller-api

**尊敬的 Google 工程师，**

我一直在尝试插入客户并收到以下回复：

```
 [error] => Array
        (
            [errors] => Array
                (
                    [0] => Array
                        (
                            [domain] => global
                            [reason] => duplicate
                            [message] => Resource already exists
                        )
                )
            [code] => 409
            [message] => Resource already exists
        ) 
```

然后，我开始尝试通过未能找到资源的`GET`请求检索假定存在的客户资源：`https://www.googleapis.com/apps/reseller/v1/customers/{customerId}`

```
 [error] => Array
        (
            [errors] => Array
                (
                    [0] => Array
                        (
                            [domain] => global
                            [reason] => notFound
                            [message] => Not Found
                        )
                )
            [code] => 404
            [message] => Not Found
        ) 
```

要么我发现了一个错误*，要么*来自的错误响应`POST https://www.googleapis.com/apps/reseller/v1/customers/`不够详细，我无法诊断。

我已经尝试了具有随机值（addressLine1、alternateEmail、phoneNumber）的必填字段的变体。我还登录了 Reseller CPanel，并且该域不存在匹配的客户。

如果 Google 工程师愿意在内部尝试和诊断，那么有问题的 customerId 是`ruby-stagingpop.co`. 如有必要，您可以给我发电子邮件以查找我的经销商帐户。我的个人资料中的信息。

# text - 如何默认启用 Rubymine 5 的电子表格功能？

> ID：15028911
> 
> 赞同：1
> 
> 时间：2013-02-22T16:35:39.557
> 
> 标签：text, csv, rubymine

在 Rubymine 中打开客户端的 .txt 文件（虽然几乎是一个多行 CSV 文件）时，底部出现了两个选项卡，文本和数据。数据选项卡将数据加载到电子表格中，并冻结顶行以进行滚动。很酷，但我不知道如何复制它。我有一堆类似的客户端文件（标记为 .txt 但是 CSV），其中只有一些执行电子表格视图。与我看到的其他文件相比，这些文件没有什么明显不同。我在 JetBrain 的网站上找不到任何关于此功能的信息……或任何其他网站。帮助部分或首选项中没有任何内容。有人遇到过这种情况吗？

# mysql - 在 phpmyadmin 中仅设置几个值作为域枚举

> ID：15028912
> 
> 赞同：9
> 
> 时间：2013-02-22T16:35:44.373
> 
> 标签：mysql, sql, enums, phpmyadmin

如何在 phpmyadmin 中设置枚举值。我想使用“枚举”类型在 phpmyadmin 中为我的字段设置值“0”**或“1”。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:49:37.370

或在您的 phpmyadmin 下

*   选择枚举

*   在`Length/Values`列放在那里：`'0' ,'1'`

你完成了

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-12T05:31:12.390

```
ALTER TABLE `table_name` CHANGE `old_column_name` `new_column_name` ENUM('0','1') DEFAULT NULL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:43:51.023

```
CREATE TABLE tableName
(
  enumColumn ENUM('0','1')
); 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3d1f6/1)
*   [MySQL ENUM 数据类型](https://dev.mysql.com/doc/refman/5.5/en/enum.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-08T02:32:06.807

这个答案的时间很长，对于提出这个问题的人来说可能没有用，但对于那些不熟悉 phpmyadmin 的人来说可能有用。要为 Enum 设置默认值，我有以下示例。 **类型**= ENUM，**长度/值**只需将值放在单引号内，例如“男性”、“女性”，然后**默认**选择*按定义：*在下面的框中只需键入不带引号的男性。希望这有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-14T12:14:48.433

将长度/值原样用于 0 和 1 '0' ,'1'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-06T08:30:49.680

通过在类型中选择 ENUM 来使用 phpmyadmin => 的 GUI，然后设置值。

# less - twitter-recess --compress 问题（yui-compressor）

> ID：15028916
> 
> 赞同：0
> 
> 时间：2013-02-22T16:35:53.277
> 
> 标签：less, yui-compressor, twitter-recess

我正在使用recess来编译和压缩我的LESS文件，但是我在使用特定的Firefox css将Img转换为灰度时遇到了一些麻烦，这是LESS代码的片段

```
.colorgray {
        filter : url("data:svg+xml;utf8,<svg  id='sometest'>mores-tuff-here</svg>");
} 
```

我运行**凹槽 --compress test.less > test.min.css** 并且 cat test.min.css 的输出是

```
.colorgray{filter:url("data:svg+xml;utf8,<svgid='sometest'>mores-tuff-here</svg>")} 
```

你可能会注意到，svg id="sometest" 被渲染为 svgid="sometest"，如果我只尝试使用 --compile 标志，我会得到我期望的结果：

```
.colorgray {
  filter: url("data:svg+xml;utf8,<svg  id='sometest'>mores-tuff-here</svg>");
} 
```

任何人都知道我做错了什么，或者是否有办法告诉休会缩小器忽略那条线？

编辑：yui-compressor 似乎有问题，它会删除数据上的每个空格，有没有办法关闭该选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:03:36.980

我必须创建一个新文件（filters.svg）并将内容放在那里（mores-tuff-here）

并结束使用：

```
.colorgray {
        filter : url(filter.svg);
} 
```

# javascript - 从 BHO 注入的 JavaScript 到 localhost 的跨域请求（在 IE 中）

> ID：15028918
> 
> 赞同：4
> 
> 时间：2013-02-22T16:35:54.857
> 
> 标签：javascript, internet-explorer, cross-domain, bho

我有一个 BHO（带有 COM 互操作的简单 C#）的工作原型，它将 JavaScript 注入到由 IE 加载的任何页面。简单的脚本就像 console.log(..) 等一样工作。

我的目标是从注入的 javascript 向 localhost 发出 AJAX 请求。我知道这是一个 X 域请求，但不知道如何实现它。

我仔细阅读了有关 XMLHttpRequest 和 XDomainRequest （两者都给我拒绝访问）顺便说一句我想发送/接收 JSON 和 XDomainRequest 只允许纯/文本（为什么？，当然不是启用纯/文本但不允许 json 的安全问题......）我也读过 XDomainRequest 不允许本地主机。

我知道响应标头应该允许带有“Access-Control-Allow-Origin：*”的 X 域（这是我要注入的页面的响应吗？）

也许我可以修改/修补响应标头以允许来自我的 BHO 的 X 域？这可能吗？

作为最后的手段，我考虑在我的 C# BHO 中提出请求。然而，这意味着从 javascript 调用到 C#（也许它正在工作），但这个调用的主要问题是同步调用。即使我在 C# 的完成处理程序中以异步方式发出请求，我也必须回调一个 javascript 完成处理程序。这听起来像可怕的过度工程调用从 javascript 到 C# 然后从 C# 回调到 javascript 而不是谈论健壮性和性能损失。

有任何想法吗？

提前谢谢

# php - 我在哪里抛出异常？

> ID：15028919
> 
> 赞同：0
> 
> 时间：2013-02-22T16:35:59.997
> 
> 标签：php, arrays, exception, loops, foreach

我有以下 php 函数，它根据路径数组呈现模板数组。换句话说，如果您提供一组数组，例如：

```
$array_template = array(
    'carousel' => 'carousel', //type=>name (with out extension).
    'mini' => 'mini_feed'
)

$array_paths = array(
    'path_one' => 'path/to/one/',
    'path_two' => 'path/to/two/'
) 
```

到这个函数：

```
protected function _render_templates_array($templates, array $template_name){
    foreach($template_name as $type=>$name){
        foreach($templates as $template=>$path){
            if(file_exists($path . $name . '.phtml')){
                require_once($path . $name . '.phtml');
            }
        }
    }

    return;
} 
```

它应该找到并渲染每个文件，检查该文件的每个路径。

我遇到的问题是，我想出了如何让它在找到所有文件后停止搜索，但是，我是否将 else 附加到 if 并抛出我的错误？或者还有其他地方我应该抛出我的错误吗？

基本上我需要：

1.  渲染所有模板，确保查看这些模板的所有路径。
2.  如果在任何路径中都找不到模板，则抛出错误。
3.  加载所有文件后停止处理。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:39:20.210

在两`foreach`行之间，添加`$found = false;`. 里面`if`，添加`$found = true;`两个“end foreach”之间，根据需要`}`添加。`if(!$found) throw.....;`

```
protected function _render_templates_array($templates, array $template_name){
    foreach($template_name as $type=>$name){
        $found = false;
        foreach($templates as $template=>$path){
            if(file_exists($path . $name . '.phtml')){
                require_once($path . $name . '.phtml');
                $found = true;
            }
        }
        if( !$found) throw new .......;
    }

    return;
} 
```

# ruby-on-rails - RoR - 学习资源

> ID：15028922
> 
> 赞同：0
> 
> 时间：2013-02-22T16:36:21.360
> 
> 标签：ruby-on-rails, ruby

我遇到了以下问题：我有很多表，其中一些是嵌套的，而另一些则不是。我将我的应用程序划分为我认为正确的一些领域。一个区域应该同时操作一些表，在同一个动作中，就像我说的：一些模型是嵌套的，而另一些则不是。Rails 世界中最好的解决方案是什么？我应该读什么才能明白这一点？

我试着用

```
 accepts_nested_attributes_for 
```

我尝试构建对象以与 fields_for 以相同的形式使用。但这将是一个复杂的形式，因为某些对象包含外键，不幸的是我无法获得超过 2 个对象的正确构建。

我会继续努力的。

谢谢！

- - 编辑 - - -

```
 Class Country < ActiveRecord::Base
      has_many :states
      attr_accessible :nome
      # i tried # accepts_nested_attributes_for :state
    end

    Class State < ActiveRecord::Base
      belongs_to :country
      has_many :cities
      attr_accessible :nome, :country_id
      # i tried # accepts_nested_attributes_for :city
      # i tried # accepts_nested_attributes_for :country # too
    end 
```

模型继续，直到我们得到地址模型：

```
 Class Adress < ActiveRecord::Base

      has_many :bairros_logradouros # we name streets, avenues, parks as logradouros
                                    # here in Brasil, the others models are translated
                                    # to EN here
      has_many :logradouros, :trough => :bairros_logradouros # many-to-many

      attr_accessible :number, :complement, :other, :another 

      # i tried # accepts_nested_attributes_for :logradouro
    end 
```

设置：国家 -> 州 -> 城市 -> 区（bairro，这里） -> :Logradouro <-> 地址。我试图在两个方向上构建链，但我只得到 2 个对象，第三个给构建方法带来了 nil 问题。

这些表是关于地址的，我应该操纵用户模型 tha has_one Person，最后有一个地址，我想将地址指向 Person 内部的 :addres_id。

所有这些都必须在自定义数据控制器上进行操作，这里的所有 CRUD。

我无法构建整个链条：

```
 @addres = @addres.new
    @other = @addres.logradouros.build
    @another = @other.build_district
    @even_more = @another.build_city
    .... 
```

我学会了使用 objects.build 和 build_object，但我不能构建超过 2 个嵌套对象。

我是新手。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:27:28.143

如果您在 Rails 3.1+（直到但不包括 Rails 4）中使用批量分配白名单，那么如果您使用，则`accepts_nested_attributes_for :logradouros`需要拥有`attr_accessible :logradouros_attributes`（注意名称中的复数 logradouros 和 _attributes）。但是，您可能会遇到更多问题。[这](https://stackoverflow.com/questions/5197761/accept-nested-attributes-for-has-many-relationship)是一个相关的问题。

开始时的一个很好的参考是阅读[Rails 指南](http://guides.rubyonrails.org/)中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:59:28.690

这是一个很好的起点：

[http://www.tutorialspoint.com/ruby-on-rails/index.htm](http://www.tutorialspoint.com/ruby-on-rails/index.htm)

# android - 为 android requestSingleUpdate 设置超时

> ID：15028923
> 
> 赞同：20
> 
> 时间：2013-02-22T16:36:24.663
> 
> 标签：android, android-location

我正在使用带有[LocationListener的 android](http://developer.android.com/reference/android/location/LocationListener.html) [LocationManager](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)库的例程 requestSingleUpdate() 重例程。我试图实现的功能是用户可以按下一个按钮，应用程序将获取他们的当前位置并执行反向地理编码以获取大致地址。

我的问题是，根据设备的网络情况，获取位置修复可能需要很长时间。我怎样才能实现一个超时，这将导致我的“requestSingleUpdate()”放弃并告诉用户找出他们自己的血腥地址？

我的代码：

```
LocationManager locationManager = (LocationManager)  getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setPowerRequirement(Criteria.POWER_HIGH);

locationManager.requestSingleUpdate(criteria, new LocationListener(){

        @Override
        public void onLocationChanged(Location location) {
            // reverse geo-code location

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // TODO Auto-generated method stub

        }

    }, null); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-08T23:02:37.400

`LocationManager`似乎没有超时机制。但是`LocationManager`确实有一个名为的方法[`removeUpdates(LocationListener listener)`](http://developer.android.com/reference/android/location/LocationManager.html#removeUpdates(android.location.LocationListener))，您可以使用它来取消指定的任何回调`LocationListener`。

因此，您可以使用以下伪代码实现自己的超时：

```
 final LocationManager locationManager
        = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    // ...

    final LocationListener myListener = new LocationListener() {
         //... your LocationListener's methods, as above
    }

    Looper myLooper = Looper.myLooper();
    locationManager.requestSingleUpdate(criteria, myListener, myLooper);
    final Handler myHandler = new Handler(myLooper);
    myHandler.postDelayed(new Runnable() {
         public void run() {
             locationManager.removeUpdates(myListener);
         }
    }, MY_TIMEOUT_IN_MS); 
```

我不确定如果您在获得位置`locationManager.removeUpdates(myListener)` **后打电话会发生什么。**你可能想在打电话之前检查一下`removeUpdates`。或者，您可以在回调中的方法中添加类似这样的内容`onLocationChanged`（也可能添加到其他方法中）：

```
 myHandler.removeCallbacks(myRunnable); // where myRunnable == the above Runnable 
```

# php - 带有 javascript 重定向的 php file_get_contents

> ID：15028924
> 
> 赞同：-1
> 
> 时间：2013-02-22T16:36:29.253
> 
> 标签：php

网址 = [http://www.homegate.ch/mieten/immobilie-suchen](http://www.homegate.ch/mieten/immobilie-suchen)

有人可以向我解释以下内容：当我在浏览器中请求 url 时，没有问题（一切正常）。但是如果我用 PHP 的 file_get_contents 请求 url，就会有一个重定向循环：

```
echo file_get_contents('http://www.homegate.ch/mieten/immobilie-suchen'); 
```

我发现这个循环是由 JS 完成的，但我不知道如何用 PHP 解决这个问题。我应该改用 curl 吗？但是我怎样才能遵循这个由 javascript 完成的重定向呢？

希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:41:08.273

而不是`file_get_contents()`用来[`curl`](http://www.php.net/manual/en/curl.examples.php)获取数据：

它将数据表示为客户端，

> 它允许您使用许多不同类型的协议连接和通信到许多不同类型的服务器。libcurl 目前支持 http、https、ftp、gopher、telnet、dict、file 和 ldap 协议`

```
function get_data ($uri) {
    if (!function_exists('curl_init')){ 
    die('Curl is not installed!');
    }

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $uri);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
} 
```

如果没有解决这个问题，这是因为 Javascript 不允许 curl 重定向站点：[follow redirects with curl in php](https://stackoverflow.com/questions/4454605/follow-redirects-with-curl-in-php)

# objective-c - 使用可可沙箱获取库文件夹中的文件列表

> ID：15028927
> 
> 赞同：2
> 
> 时间：2013-02-22T16:36:42.100
> 
> 标签：objective-c, xcode, cocoa, appstore-sandbox

我正在尝试获取可可库文件夹中的文件列表，我使用此代码和 NSHomeDrirectory() 函数而没有沙箱并且运行良好。

```
TempArray = [[NSFileManager defaultManager] directoryContentsAtPath:FolderURL] 
```

但是当我检查沙箱代码不起作用时，我应该添加任何权利吗？或者什么代码可以代替？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:12:26.467

我没有尝试过这是否会获取所有文件，但应该可以，因为您可以从库中保存和读取文件。

```
NSString *libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSArray *libraryContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:libraryPath error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T06:34:52.297

如果您添加以下权利，您可以访问 ~/Library 或 /Library 文件夹

```
 com.apple.security.temporary-exception.files.home-relative-path.read-write: /Library/ 
```

但在此之后你会得到苹果的回复是

2.31：未适当沙盒的应用程序可能会被拒绝我没有得到这个答案。如果有人知道请在这里发帖。

# ajax - 我应该从 ajax 调用的服务器端方法返回什么？

> ID：15028928
> 
> 赞同：0
> 
> 时间：2013-02-22T16:36:42.867
> 
> 标签：ajax, jquery, spring-mvc

我有以下 jQuery 脚本：

```
$(document).ready(function() {
    $("#resendActivationEmailLink").bind("click", function(event) {
        $.get($(this).attr("href"), function() {
            $("#emailNotActivated").html("<span>not yet activated. email sent!</span>");
        }, "html");
        event.preventDefault();
    });
}); 
```

基本上，当用户单击链接时，会调用以下服务器端方法：

```
@RequestMapping(value = "/resendActivationEmail/{token}", method = RequestMethod.GET, produces = "application/json")
    public @ResponseBody
    String resendActivationEmail(@PathVariable("token") String token) {
        preferencesService.resendActivationEmail(token);
        return "dummy";
} 
```

并且一些业务逻辑在服务器上执行，但是**除了 ajax 成功或 ajax 失败之外，服务器没有真正的结果可以在客户端/浏览器端使用**。

现在**我真的不确定我的服务器端方法应该返回什么！**

目前它只返回字符串`dummy`，但当然这只是暂时的。我应该选择无返回类型（`void`）还是`null`其他？

*请注意，我可以更改 jQuery get 方法的**数据类型**参数。*

**编辑：**

我改变了我的服务器端方法如下：

```
@RequestMapping(value = "/resendActivationEmail/{token}", method = RequestMethod.GET)
    public @ResponseBody void resendActivationEmail(@PathVariable("token") String token) {
        preferencesService.resendActivationEmail(token);
    } 
```

`@ResponseBody`是必需的，因为这是一个 ajax 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:32:46.537

在这种情况下，返回一个虚拟值是没有意义的。如果你没有对返回值做任何事情，那么你可以这样做：

```
@RequestMapping(value="/resendActivationEmail/{token}", method=RequestMethod.GET)
@ResponseStatus(org.springframework.http.HttpStatus.NO_CONTENT) 
public void resendActivationEmail(@PathVariable String token) {
  preferencesService.resendActivationEmail(token);
} 
```

会有一个`204`响应代码而不是 a`200`但这应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:51:34.007

我假设您从服务器返回 JSON（从您的服务器代码：produces = "application/json"）。

由于您不关心返回什么，即您没有在回调函数中处理返回值，在 $.get 之后，那么您可以只返回“{}”，或者如果您想处理响应，您可以去有类似的东西：

```
{ "success": true }
// or
{ "error": "Error messages here" } 
```

# jquery - NuGet jQuery 更新 - 找不到“Microsoft.ScriptManager.jQuery”的版本

> ID：15028931
> 
> 赞同：0
> 
> 时间：2013-02-22T16:37:01.253
> 
> 标签：jquery, asp.net, visual-studio, visual-studio-2012, nuget

我正在尝试使用 NuGet 更新 jQuery。我收到以下消息。

```
Successfully installed 'jQuery 1.9.1'.
Install failed. Rolling back...
Updating 'jQuery 1.6.2' to 'jQuery 1.9.1' failed. Unable to find a version of 'Microsoft.ScriptManager.jQuery' that is compatible with 'jQuery 1.9.1'. 
```

我想知道如何解决这个问题。

![在此处输入图像描述](../Images/e6b85384d5bafdf794703dc3c3bfed37.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:48:52.303

查看 nuget 包，看起来 Microsoft.ScriptManager.jQuery [http://nuget.org/packages/Microsoft.ScriptManager.jQuery/](http://nuget.org/packages/Microsoft.ScriptManager.jQuery/)已被 AspNet.ScriptManager.jQuery [http://nuget.org/packages/AspNet 取代。 ScriptManager.jQuery/](http://nuget.org/packages/AspNet.ScriptManager.jQuery/)。我尝试备份您的项目，卸载（而不是更新）jQuery，然后安装新版本的 jQuery 和 ASPNet 版本的 scriptmanager。

# autohotkey - 从字符串中去除多余的填充

> ID：15028932
> 
> 赞同：1
> 
> 时间：2013-02-22T16:37:02.107
> 
> 标签：autohotkey

我今天早些时候问了一个问题，并从 llbrink 得到了非常快速的回答。在我花了几个小时试图找到答案之前，我真的应该问这个问题。

所以 - 这是另一个我从未找到答案的问题（尽管我已经创建了一个看起来非常笨拙的解决方法）。

我的 AHK 程序要求用户输入登录名。然后程序将登录名与文件中现有的名称列表进行比较。

文件中的登录名可能包含空格，但名称的开头不能有空格。当用户输入名称时，他可能会在开头包含空格。这意味着当我的程序将名称与文件中的名称进行比较时，它找不到匹配项（因为多余的空格）。

我想找到一种从输入开头剥离空格的方法。

我的工作是将输入字符串拆分为一个数组（忽略前导空格），然后使用数组的第一个元素。这是我的代码：

```
name := DoStrip(name)

DoStrip(xyz) ; strip leading and trailing spaces from string
{
  StringSplit, out, xyz, `,, %A_Space%
  Return out1
} 
```

这似乎是一种非常费力的方法——有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:38:59.210

如果它适用于所有情况，我认为您的示例没有问题。

有一个更简单的方法；只需使用像这样工作的[Autotrim 。](http://www.autohotkey.com/docs/commands/AutoTrim.htm)

```
AutoTrim, On ; not required it is on by default
my_variable = %my_variable% 
```

还有[许多](http://www.autohotkey.com/docs/commands/RegExMatch.htm)其他[不同的](http://www.autohotkey.com/docs/commands/RegExReplace.htm) [方法可以在 autohotkey](http://www.autohotkey.com/docs/commands/StringTrimLeft.htm) [中修剪](http://www.autohotkey.com/docs/commands/StringGetPos.htm)字符串，您可以将它们组合成有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:52:40.810

您还可以使用`#LTrim`and`#RTrim`删除字符串开头和结尾的空格。

# math - 从循环操作中导出值

> ID：15028934
> 
> 赞同：0
> 
> 时间：2013-02-22T16:37:18.013
> 
> 标签：math, loops, set

这与语言无关，但我对成功答案的问题解决过程感兴趣。我有以下三列：

```
3   0   1
3   1   2
3   2   3

2   0   2
2   1   3

1   0   3 
```

什么常见的操作总是从前两列派生第三列？如果它有帮助，这个问题来自一个循环。我有需要以 4 个一组的数据进行分组，如果一组有 4 个，则无需填写。如果集合的第一列少于 4，我需要循环遍历，在第 2 列中进行迭代，并填写集合，将第 3 列的 col#s 分配给项目的类。同样，对过程更感兴趣，而不仅仅是答案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:43:01.280

看起来答案是`4 - a + b`：

```
a  b  4-a+b
_  _  _
3  0  1
3  1  2
3  2  3
2  0  2
2  1  3
1  0  3 
```

在任何支持二维数组的语言中，您都不需要经过思考和计算数学：不值得幻想一个简单的查找表可以完成这项工作：

```
int[][] lookup = new int[][] {
    new int[0]
,   new int[] { 3 }
,   new int[] { 2, 3 }
,   new int[] { 1, 2, 3 }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:42:54.387

像往常一样，我猜想把它写出来有帮助。原来是：

```
col3 = 4-(col1-col2) 
```

# javascript - Javascript 删除 HTML 标签列表到

> ID：15028938
> 
> 赞同：-2
> 
> 时间：2013-02-22T16:37:35.507
> 
> 标签：javascript, regex

如何在javascript中替换html标签列表

```
var value1 = " <ul>
             <li>Text1</li>
             <li>Text1</li>
             </ul> " 
```

进入

```
value1 = " <br/> text1 <br/> text2 " 
```

用正则表达式替换东西？

更新 ：

我试试这个作品，但太长的脚本。

```
value1 = value1.replace(/<li>/g, "<p>");
value1 = value1.replace(/<\/li>/g, "</p>");
value1 = value1.replace(/<\/ul>/g, "</p>");
value1= value1.replace(/<ul>/g, "<p>");
value1 = value1.replace(/<\/ol>/g, "</p>");
value1 = value1.replace(/<ol>/g, "<p>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:09:33.397

试试下面...也许它会帮助你...

小提琴 1：http: [//jsfiddle.net/RYh7U/105/](http://jsfiddle.net/RYh7U/105/)

小提琴 2：http: [//jsfiddle.net/RYh7U/107/](http://jsfiddle.net/RYh7U/107/)

```
var regex = /(<([^>]+)>)/ig;
var result = value1.replace(/<li>/ig," ").replace(regex, "").replace(/ +/g,"<br/>");
alert(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:58:29.970

像这样的事情会做你所要求的工作：

> ```
> value1.replace(/<li>/ig, '<br>').replace(/<\/li>/ig, '').replace(/<\/?ul>/ig, '') 
> ```

但我建议将元素放入数组并正确返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:58:53.797

```
var $els = $(value1);
$("<li>", $els).unWrap().replaceWith(function() { return "<br/>"+$(this).text(); }); 
```

# javascript - 这是 JS 中 OOP 的一个很好的示例方法吗？

> ID：15028947
> 
> 赞同：0
> 
> 时间：2013-02-22T16:37:44.280
> 
> 标签：javascript, oop, class

我有这个基于 THREE.JS 的 OOP 方案，我需要知道我在未来的工作中是否会遇到问题。

```
var TESTOOP = TESTOOP || { VERSION: '0.1.1' };

//______________________________________________________________________
//OBJECT ROOT CLASS
//______________________________________________________________________
TESTOOP.Object = function(miId){

    //VARS________________________________
    //PRIVATE
    var enable = false;

    //PUBLIC
    this.miId = miId;

    //GETTERS & SETTERS __________________
    this.get_enable = function() {
        return enable;
    };
    this.set_enable = function(val) {
        enable = val;
    };
    this.get_miId = function() {
        return this.miId;
    };
    this.set_miId = function(val) {
        this.miId = val;
    };
};

//METHODS
TESTOOP.Object.prototype = Object.create( TESTOOP.Object.prototype );
TESTOOP.Object.prototype.testNoOverwrite = function (val) {
    console.log("Object.testNoOverwrite (val *4): " + val*4);
};
TESTOOP.Object.prototype.testOverwrite = function () {
    console.log("Object.testOverwrite ID: " + this.miId);
};
TESTOOP.Object.prototype.testOverwriteArgs = function (val) {
    console.log("Object.testOverwriteArgs (val*2): " + val*2);
};

//______________________________________________________________________
//OBJECT CLASS EXTEND & OVERWRITE METHODS
//______________________________________________________________________
TESTOOP.ObjInstance =  function (miId) {
    TESTOOP.Object.call(this, miId);
};
TESTOOP.ObjInstance.prototype = Object.create(TESTOOP.Object.prototype);

//REWRITE METHODS
TESTOOP.ObjInstance.prototype.testOverwrite = function () {
    //SUPER
    TESTOOP.Object.prototype.testOverwrite.call(this);
    console.log("TESTOOP.ObjInstance.testOverwrite ID:" + this.miId);
};
TESTOOP.ObjInstance.prototype.testOverwriteArgs = function (val) {
    //SUPER
    TESTOOP.Object.prototype.testOverwriteArgs.call(this,val);
    console.log("TESTOOP.ObjInstance.testOverwriteArgs (val*3): " + val*3);
};

//______________________________________________________________________
//INTANCE TEST
//______________________________________________________________________
var ObjInstance = new TESTOOP.ObjInstance(0.1);
ObjInstance.set_enable(true);
ObjInstance.testOverwrite();
ObjInstance.set_miId(0.2);
console.log("TESTOOP.ObjInstance, is enable: " + ObjInstance.get_enable());
ObjInstance.testOverwrite();
ObjInstance.testOverwriteArgs(1);
ObjInstance.testNoOverwrite(1); 
```

你可以在 JSbin 中玩这个：http: [//jsbin.com/apoped/1/edit](http://jsbin.com/apoped/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:18:58.223

从您的示例使用来看，您似乎可以使用标准的 JavaScript 对象模型：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)

这是一本有趣的读物，特别是如果您正在学习在 JavaScript 中使用 OOP。

因此，如果您打算在 JavaScript 中使用 OOP，我建议您首先使用标准模型，使用上面的链接作为指南，以及[Douglas Crockford](http://javascript.crockford.com/)关于该主题的文章。

如果您是理论爱好者，您还可以阅读一些关于基于原型的 OOP 的经典文章（想到[Henry Lieberman和 David Ungar 的](http://web.media.mit.edu/~lieber/Lieberary/OOP/Delegation/Delegation.html)[无类组织程序](http://cs.au.dk/~hosc/local/LaSC-4-3-pp223-242.pdf)）。

总而言之，用 Douglas Crockford 自己的话来说：

> 我写 JavaScript 已经 8 年了，我从来没有发现需要使用 uber 函数。超级想法在经典模式中相当重要，但在原型和功能模式中似乎是不必要的。我现在认为我早期在 JavaScript 中支持经典模型的尝试是错误的。

如果您真的必须使用基于类的 OOP，我建议您阅读 John Resig 的非常好的文章，[简单的“类”实例化](http://ejohn.org/blog/simple-class-instantiation/)，它对这个主题给出了很好的微妙之处。

然后，您可能想要使用经过验证的基于类的库，而不是编写自己的库。

干杯!

# ajax - AJAX 调用在 Mac 上出现缓存约 2 分钟

> ID：15028951
> 
> 赞同：1
> 
> 时间：2013-02-22T16:37:53.727
> 
> 标签：ajax, macos

我有一个 Ajax 小部件，它监视网页上的连接状态，并在无法再访问服务器时提醒用户。它适用于 Windows 7，但在 Mac OSX 10.5.8（Safari 和 Firefox）上失败。

关键代码在这里：

```
 (function(e){

        e.fn.checknet=function(config){
            function checkConnection(config){
                e.ajax({
                    url:config.checkURL,
                    cache:false,
                    success:function(){
                        window.checknet.conIsActive=true
                    },
                    error:function(){
                        window.checknet.conIsActive=false
                    },
                    complete:function(){
                        if(window.checknet.conIsActive){
                            connectionExtablished()
                        }
                        else{
                            connectionLost()
                        }
                    }
                })
                setTimeout(
                    function(){checkConnection(config)},
                    config.checkInterval
                )
            }
        }
    })(jQuery); 
```

我每五秒钟就调用一次。当我关闭服务器时，Windows 浏览器确实会在五秒钟内注意到。但是，我 Mac 上的浏览​​器需要大约两分半钟。

从[其他](https://stackoverflow.com/questions/9948545/how-to-disable-ajax-caching-in-safari-browser) [问题](https://stackoverflow.com/questions/367786/prevent-caching-of-ajax-call)来看，我认为缓存可能是一个问题。但是，我尝试`parameters:"defeatcache=" + new Date().getTime()`在 Ajax 调用`$.ajaxSetup({ cache: false });`之前插入 Ajax 调用；两者都不起作用。

有人对我如何让我的 Mac 浏览器更快地注意到断开的连接有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:10:09.610

如评论和此处[如何在 Safari 浏览器中禁用 Ajax 缓存中所述？](https://stackoverflow.com/questions/9948545/how-to-disable-ajax-caching-in-safari-browser)，您需要将参数附加到 URL，我不确定这个位在做什么，`parameters:"defeatcache="`但我一直使用它的方式是在 url 上：

```
url = url + '&nocache=' + new Date().getTime(); 
```

要修改您的示例，`checkURL`应该在哪里未编辑纯 url

```
url:config.checkURL + '&nocache=' + new Date().getTime(), 
```

如果上述方法仍然不起作用，您希望将无缓存标头添加到您尝试访问的 URL - 例如，如果您正在访问的 url 称为“status.php”，那么您可以尝试将无缓存标头添加到status.php 页面本身：

```
header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
header('Pragma: no-cache'); // HTTP 1.0. 
```

显然，上面的代码（对于 PHP）会根据您的服务器端语言而有所不同（取自此处其他服务器端语言的更多示例：[einternals](http://www.einternals.com/blog/web-development/ios6-0-caching-ajax-post-requests)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:44:22.197

我曾经在响应的标头中禁用缓存。因此，在提供响应的服务中，考虑设置各种字段以从调用结束时禁用缓存。对不起，我没有任何现成的例子！！希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:37:56.127

当您进行 .ajax() 调用时，请使用选项**cache: false**

```
.ajax(
     {url: 'http://...',
     cache: false }); 
```

或者

在您的 ajax 调用之前使用**ajaxSetup**

```
 $.ajaxSetup({ cache: false }); 
```

# linux - 通过蓝牙/RFCOMM/SPP 发送二进制数据将 0x0A 转换为 0x0D 0x0A

> ID：15028953
> 
> 赞同：9
> 
> 时间：2013-02-22T16:37:55.797
> 
> 标签：linux, bluetooth, serial-port, newline

我通过以下命令在 Linux 上运行了蓝牙 RFCOMM 服务：

```
sdptool add --channel 1 SP
rfcomm watch hci0 1 "$COMMAND" {}
# ^ here 
```

将`$COMMAND`二进制数据写入作为参数传递的文件。我已经通过执行以下操作测试了它的行为是否正确：

```
FIFO=$(tempfile)
mkfifo "$FIFO"
"$COMMAND" "$FIFO" &
cat "$FIFO" | hexdump -C # <- output is correct 
```

但是，当通过 SPP/RFCOMM 发现 (UUID) 从不同设备连接到服务时`00001101-0000-1000-8000-00805F9B34FB`，我看到 () 的每个实例都被流中的( `0x0A`)`LF`替换。问题不在接收端，因为我尝试连接到也发送二进制数据的硬件串行设备，但没有发生转换。它必须是执行替换的第一个片段（行上方）中的命令。`0x0D` `0x0A``CR` `LF``# ^ here`

为什么该`rfcomm`工具会进行此替换，我该如何禁用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:24:49.470

看起来您正被 TTY 的线路规则所困扰（请记住，`rfcomm`它不会创建 fifo，而是 tty）。

您可以尝试将 TTY 更改为*raw mode*，即不使用任何魔法。最简单的方法是使用`stty --file <tty> raw`. 我不知道是否`rfcomm`会在其命令行中接受多个命令，但您可以使用脚本轻松完成：

### command_raw

```
#!/bin/bash
stty --file "$1" raw
"$COMMAND" "$1" 
```

然后运行：

```
sdptool add --channel 1 SP
rfcomm watch hci0 1 ./command_raw {} 
```

如果您有要运行的命令的源代码，您也可以在 C 中轻松更改它：

```
 #include <termios.h>
 #include <unistd.h>

 //WARNING: error checking left as an exercise to the reader!
 void make_raw(int fd)
 {
     struct termios ios;

     //Not a TTY: nothing to do
     if (!isatty(fd))
         return; 

     tcgetattr(fd, &ios);
     cfmakeraw(&ios);
     tcsetattr(fd, TCSANOW, &ios);
 } 
```

# ruby - aws-sdk 1.8.3 gem 是否支持 AWS Elastic Transcoder

> ID：15028955
> 
> 赞同：1
> 
> 时间：2013-02-22T16:38:01.377
> 
> 标签：ruby, amazon-web-services, aws-sdk, amazon-elastic-transcoder

aws-sdk `1.8.3`gem 是否支持 AWS Elastic Transcoder API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:54:50.260

它似乎在[25 天前](https://github.com/aws/aws-sdk-ruby/tree/master/lib/aws/elastic_transcoder)被添加为占位符。目前似乎没有任何支持，但看起来他们打算这样做。

我会定期检查[文档](http://docs.aws.amazon.com/AWSRubySDK/latest/)或 github。我想他们很快就会收到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:00:53.080

适用于 Ruby 的 AWS 开发工具包在 gem 的 1.8.1 版本中添加了对 Amazon Elastic Transcoder 的支持。有关更多详细信息，请参阅[发行说明](http://aws.amazon.com/releasenotes/Ruby/6228115877364431)和[文档](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/ElasticTranscoder/Client.html)。

# ruby-on-rails - 用户名到个人资料的路线#show

> ID：15028956
> 
> 赞同：0
> 
> 时间：2013-02-22T16:38:04.533
> 
> 标签：ruby-on-rails, routing

我有一个 User 模型，其中用户有一个用户名，并且 User has_one :profile

我想制定一条路线，这样如果一个人去“ [http://www.website.com/username](http://www.website.com/username) ”，它就会去profile#show。

在我的路线的底部，我有：

```
match ":username" => "profiles#show" 
```

但是，它没有找到我所期望的配置文件的 ID。

```
ActiveRecord::RecordNotFound in ProfilesController#show
Couldn't find Profile without an ID 
```

我只是不确定如何正确制作路线，所以我从 :username 获取用户的 ID

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:41:27.687

你进来`:username`了`params`。您需要`Profile`根据关联`User`模型的`:username`. 在你的行动中：

```
@profile = User.find_by_username(params[:username]).profile 
```

# python - 如何在 django 管理列表顶部添加链接

> ID：15028960
> 
> 赞同：1
> 
> 时间：2013-02-22T16:38:13.503
> 
> 标签：python, django

我想做以下事情：

我想在模型的 django 管理页面顶部添加一个“刷新”链接。我怎样才能做到这一点？我希望当人们单击刷新时，他们会转到另一个从 Google 分析 API 获取数据的页面。

如何在模型的管理页面顶部添加链接？谢谢！

我尝试了什么：我尝试覆盖 django 管理员的 change_list 模板，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:42:50.960

覆盖 change_list 模板确实是您唯一的选择。你有错误吗？还是您的内容没有显示？模板目录的层次结构与 Django 查找模板的方式/位置直接相关。

仔细检查有关覆盖管理模板的文档。您可能犯了一个简单的错误：[https ://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates)

# json - 长查询字符串被拆分

> ID：15028962
> 
> 赞同：0
> 
> 时间：2013-02-22T16:38:26.190
> 
> 标签：json, windows-phone-7, navigation, query-string, windows-phone

我正在使用查询字符串在两个 PhoneApplicationPages 之间传递数据，但目标页面将数据作为多个参数而不是一个大字符串接收。这是一个问题，因为我将数据作为 JSON 传递，如果它在中间流中被截断，则无法反序列化。

我传递的数据是：

```
NavigationService.Navigate("/MainPage.xaml?view=recipes&searchargs={"Author":null,"AuthorFilterType":2,"Categories":["1 Point","100-200 Calorie","1-3 grams Fat","3 Point","Baked Snack","Bakery & Baked Products","Banana","Beer","Boutique Wines","Bread","Breakfast","Breakfast Drinks","Cake","Cakes","Cocktails","Collectible Wines","Cookie","Cookie Dessert","Dairy","Dessert","Desserts","Diabetic","Drinks & Beverages","Fruit","Fruit Dessert","Fruit Drinks","Fruits","Gluten Free","High Fiber","Main Course","Main dish","Pasta","Pork","Raw Foods","Salads","Sandwiches","Shake & Smoothie","Side dish","Snack","Strawberry","Sweet Snack","Under 1 gram Fat","Under 100 Calorie","Vegetarian","Weight Watchers Points","Yogurt"],"Countries":[],"GlobalSearch":"","Ingredients":[],"MaxIngredients":0,"MinIngredients":0,"Name":null,"NameFilterType":2,"Rating":0,"Types":[]}"); 
```

但查询字符串包含以下内容：

![拆分查询字符串](../Images/d9f22a3355c085530ffaa0118c10f82f.png)

这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:55:55.943

你需要逃避 json 使用的 " 试试这个

```
NavigationService.Navigate("/MainPage.xaml?view=recipes&searchargs={\"Author\":null,\"AuthorFilterType\":2,\"Categories\":[\"1 Point\",\"100-200 Calorie\",\"1-3 grams Fat\",\"3 Point\",\"Baked Snack\",\"Bakery & Baked Products\",\"Banana\",\"Beer\",\"Boutique Wines\",\"Bread\",\"Breakfast\",\"Breakfast Drinks\",\"Cake\",\"Cakes\",\"Cocktails\",\"Collectible Wines\",\"Cookie\",\"Cookie Dessert\",\"Dairy\",\"Dessert\",\"Desserts\",\"Diabetic\",\"Drinks & Beverages\",\"Fruit\",\"Fruit Dessert\",\"Fruit Drinks\",\"Fruits\",\"Gluten Free\",\"High Fiber\",\"Main Course\",\"Main dish\",\"Pasta\",\"Pork\",\"Raw Foods\",\"Salads\",\"Sandwiches\",\"Shake & Smoothie\",\"Side dish\",\"Snack\",\"Strawberry\",\"Sweet Snack\",\"Under 1 gram Fat\",\"Under 100 Calorie\",\"Vegetarian\",\"Weight Watchers Points\",\"Yogurt\"],\"Countries\":[],\"GlobalSearch\":\"\",\"Ingredients\":[],\"MaxIngredients\":0,\"MinIngredients\":0,\"Name\":null,\"NameFilterType\":2,\"Rating\":0,\"Types\":[]}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:04:29.343

谢谢@Hermit 戴夫。作为参考，方法是`Uri.EscapeDataString()`和`Uri.UnescapeDataString()`。

# php - for 循环一直超时，但看起来不错

> ID：15028964
> 
> 赞同：0
> 
> 时间：2013-02-22T16:38:29.490
> 
> 标签：php, for-loop

早上，我有一个脚本，它正在调用数据库中的条目，实际上是它们的历史记录，然后在表格中显示条目，现在为了创建表格，我使用一个非常大的 for 循环进行比较并将结果添加到. 但是由于某种原因，它在 30 秒后超时（循环不会产生那么多循环）我已经确定原因是第一个内部循环的问题，因为其中的 echo 语句只是重复循环的持续时间，它永远不会离开。有任何想法吗？

```
for($i = 1; $i <= $FirstCount; $i++)
    {

    $HistoryTable .= "<tr>";
        if($i = 1)
        {
            for($j = 0; $j < $ThirdCount; $j++)
            {
                if($EntryTwo[0][$j+1] == $EntryOne[$j])
                {
                    $HistoryTable .= "<td></td>";
                }       
                else
                {
                    $HistoryTable .= "<td>".$EntryTwo[0][$j+1]."</td>";
                }
            echo    $EntryTwo[0][$j+1].' == '.$EntryOne[$j];
            }
        }
        else
        {
            $first = 0;
            $second = 1;
            for($k = 1; $k <= $SecondCount; $k++)
            { 
                if($EntryTwo[$first][$k] == $EntryTwo[$second][$k])
                {
                    $HistoryTable .= "<td>".$EntryTwo[$second][$k]."</td>";
                }
                else
                {
                    $HistoryTable .= "<td></td>";
                }
            $first++;
            $second++;
            }
        unset($k);
        unset($first);
        unset($second); 
        }
    $HistoryTable .= "</tr>";
    } 
```

变量：

```
$FirstCount = 4;
$SecondCount = 18
$ThirdCount = 17 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:40:21.553

`if($i = 1)``$i`每次都设置为1，所以它是一个无限循环。

你想要的是`if ($i == 1)`.

# jquery - jQuery自动完成发布请求仅一次

> ID：15028965
> 
> 赞同：2
> 
> 时间：2013-02-22T16:38:30.547
> 
> 标签：jquery, autocomplete

我正在使用 jquery 自动完成。我对下面的代码不满意，因为必须有更好的方法来做到这一点。（代码有效）

1.  我希望用户在搜索框中输入 3 个字母
2.  自动完成发布参数和服务器响应
3.  **在我们获得来自服务器的数据后，没有理由再次发布。** 注意：每次用户添加新字母时，自动完成都会保留 postind 数据
4.  因为我有数据，我想用这个数据作为自动完成的来源

下面的代码有一个小问题。在选择一个时，它会显示在框中。当我使用**退格键时，它不会刷新/填充建议**。

**问题**：如何使用自动完成功能只发布一次并重复使用响应和自动完成的来源？

如果有人可以建议或指出我可以阅读的任何文件。

谢谢

```
jquery-1.9.1.min.js
jquery-ui-1.10.0/jquery-ui.js

     $("#birds").autocomplete
    ({
    来源：功能（请求，响应）{
    $.ajax(
    {
    网址：“page.aspx”，
    数据： {
    段：request.term，
    组ID：11，
    rGUI: 'd9',
    rURL: 'domain.com/',
    任务：'得到东西'
    },
    类型：“发布”，  
    数据类型：“json”，  
    成功：函数（数据）{

    //响应：函数（项目）{
    var arr = $.map（数据，函数（项目）{
    返回 {
    标签：item.LN60，
    值：item.LN60，
    NDC：项目.NDC
    }
    });

    $("#birds").autocomplete({
    来源：arr，
    最小长度：1
    });

    $("#birds").autocomplete({
    关闭：函数（事件，用户界面）{
    建议药物请求（）；
    }
    });

    }
    });
    },
    最小长度：2，
    选择：函数（事件，用户界面）{
    log(ui.item ? "选择：" + ui.item.value +
    " aka " + ui.item.NDC : "没有选择，输入是 "
     + this.value);
    }
    });

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:43:06.587

您应该做的不是将 ajax 调用添加到自动完成的源属性，而是将自动完成功能添加到 ajax 调用的回调中：

```
$.ajax({
//all your other call settings
 success: function(data){
  //init autocomplete
  $('#birds').autocomplete({
       source: data,
       //all your other autocomplete settings
  });
 }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:42:54.643

发出 $.ajax 请求并在函数内部绑定您的自动完成（进行 .autocomplete 函数调用）`success: function(data) {`。

然后将自动完成设置`source`为`data`返回的（现在显然是静态的）

# php - PHP DOM：如何将元素移动到默认命名空间？

> ID：15028966
> 
> 赞同：5
> 
> 时间：2013-02-22T16:38:36.747
> 
> 标签：php, xml, domdocument, xml-namespaces

我尝试了什么，什么不起作用：

*   输入：

    ```
    $d = new DOMDocument();
    $d->formatOutput = true;

    // Out of my control:
    $someEl = $d->createElementNS('http://example.com/a', 'a:some');

    // Under my control:
    $envelopeEl = $d->createElementNS('http://example.com/default',
                                      'envelope');
    $d->appendChild($envelopeEl);
    $envelopeEl->appendChild($someEl);

    echo $d->saveXML();

    $someEl->prefix = null;
    echo $d->saveXML(); 
    ```

*   替换后的输出是无效的 XML：

    ```
    <?xml version="1.0"?>
    <envelope xmlns="http://example.com/default">
      <a:some xmlns:a="http://example.com/a"/>
    </envelope>
    <?xml version="1.0"?>
    <envelope xmlns="http://example.com/default">
      <:some xmlns:a="http://example.com/a" xmlns:="http://example.com/a"/>
    </envelope> 
    ```

注意`<a:some>`可能有孩子。一种解决方案是创建一个新的`<some>`，并将所有子级从 复制`<a:some>`到`<some>`。这是要走的路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:17:13.553

这真是一个有趣的问题。我的第一个意图是克隆`<a:some>`节点，删除`xmlns:a`属性，删除`<a:some>`并插入克隆 - `<a>`。但这不起作用，因为 PHP 不允许像任何常规属性一样删除 xmlns:a 属性。

在对 PHP 的 DOM 方法进行了一番挣扎之后，我开始用谷歌搜索这个问题。我在有关此的 PHP 文档中找到[了此](http://www.php.net/manual/de/domnode.clonenode.php#90559)评论。用户建议编写一个在没有命名空间的情况下手动克隆节点的函数：

```
<?php

/**
 * This function is based on a comment to the PHP documentation.
 * See: http://www.php.net/manual/de/domnode.clonenode.php#90559
 */
function cloneNode($node, $doc){
  $unprefixedName = preg_replace('/.*:/', '', $node->nodeName);
  $nd = $doc->createElement($unprefixedName);

  foreach ($node->attributes as $value)
    $nd->setAttribute($value->nodeName, $value->value);

  if (!$node->childNodes)
    return $nd;

  foreach($node->childNodes as $child) {
    if($child->nodeName == "#text")
      $nd->appendChild($doc->createTextNode($child->nodeValue));
    else
      $nd->appendChild(cloneNode($child, $doc));
  }

  return $nd;
} 
```

使用它会导致这样的代码：

```
$xml = '<?xml version="1.0"?>
<envelope xmlns="http://example.com/default">
  <a:some xmlns:a="http://example.com/a"/>
</envelope>';

$doc = new DOMDocument();
$doc->loadXML($xml);

$elements = $doc->getElementsByTagNameNS('http://example.com/a', 'some');
$original = $elements->item(0);

$clone = cloneNode($original, $doc);
$doc->documentElement->replaceChild($clone, $original);

$doc->formatOutput = TRUE;
echo $doc->saveXML(); 
```

# excel - Excel 数据操作/转换

> ID：15028968
> 
> 赞同：0
> 
> 时间：2013-02-22T16:38:38.450
> 
> 标签：excel, vba

希望有人对此有解决方案。我有一个这种格式的 CSV（下面的小数据样本）：

```
name    | sku |       configurable  | type
dress     001         clothing        normal 
shirt     012         clothing        normal 
socks     897         clothing        normal 
clothing  clothing                    configurable_item 
```

所以你会看到我可以在数据之间使用一个通用的关系键。我需要根据公共密钥将“可配置”列与具有相关匹配 sku 的每个 sku 匹配。我需要进行匹配，以便匹配数据并获得以下结果：

```
name    | sku |       configurable  | type
dress     001         clothing        normal 
shirt     012         clothing        normal 
socks     897         clothing        normal 
clothing  clothing    001,012,897     configurable_item 
```

您将看到“configurable_item”行需要查找并根据“服装”的 sku 在逗号分隔的列表中列出“正常”项目 sku。

有谁知道可以帮助我的查找函数或 VBA 吗？- CSV 总共超过 1000 行！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T19:30:50.900

如果`name`在 A1 中，则在 E1 中并复制到适合：

> =IF(COUNTIF($C:$C,$B5)>COLUMN()-5,IF(MATCH($B5,$C:$C,0)>0,INDIRECT("$B"&COLUMN()-3 ),""),"")

应将`clothing`SKU 转置到`configurable_item`行上。一旦这些公式到位，就可以用它们的值和公式替换它们，例如：

> =E5&","&F5&","&G5&","&H5&","&I5

（扩展/缩写以适应）放入备用列（例如 Z）的第 5 行并复制到其他`configurable_item`行，同时过滤 ColumnC 的空白值。

可以使用查找/替换和单个尾随逗号删除逗号对：

> =IF(RIGHT(Z5,1)=",",LEFT(Z5,LEN(Z5)-1),Z5)

在 C5 中（复制下来以适应）。

# solr - 如何在 Solr 的 Schema.xml 中定义数字多值字段？

> ID：15028971
> 
> 赞同：0
> 
> 时间：2013-02-22T16:38:52.613
> 
> 标签：solr, schema, numeric

我有十进制值，例如 100.11、200.22。该数据库的字段定义为 100.11 200.22。我在数据库字段中使用 double 作为标签。我尝试在架构中将该字段定义为 type="double" ，但是当我尝试创建索引时它失败了。如果我将它定义为 type="text" 那么它可以工作，但是我不能像寻找一系列数字一样对它进行 solr 查询。它在我的 solr 查询中被视为文本。

在我的 schema.xml 我有：

```
<field name="ProviderCompensation" type="double" indexed="true" multiValued="true" stored="true" required="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:56:31.190

我认为您缺少的是“告诉 Solr 当类型命名为 double 时使用哪个类”。有关提供的字段类型的详细信息，请`Solr`查看[此处](http://docs.lucidworks.com/display/solr/Field+Types+Included+with+Solr)

您需要在`types`部分中定义类，例如 -

```
<fieldtype name="double"  class="DoubleField"/> 
```

您还可以根据您的要求定义[此处提到的字段](http://docs.lucidworks.com/display/solr/Defining+Fields)

# image - 如何在 Google 代码 wiki 上添加图片标题

> ID：15028977
> 
> 赞同：0
> 
> 时间：2013-02-22T16:39:06.247
> 
> 标签：image, wiki, caption

我正在使用 Google 代码 wiki 页面获取文档。我在文章中添加图片的方式是插入图片链接，例如将此链接放入我想要放置图片的位置。

[http://code.google.com/images/code_sm.png](http://code.google.com/images/code_sm.png)

问题是我想在图片下添加标题，还想编辑这张图片的大小。我怎样才能做到这一点？我在他们的支持页面上没有找到语法：

[http://code.google.com/p/support/wiki/WikiSyntax](http://code.google.com/p/support/wiki/WikiSyntax)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:26:49.067

我已经找到了解决方法。Google 代码 wiki 页面支持 html。所以图片的大小可以使用标签“img”和属性“title”“width”和“height”来编辑。

```

img title="二楼地图" src="http://kth-hvac.googlecode.com/..." width="700px" height="300px"

```

链接是 [http://code.google.com/p/support/wiki/WikiSyntax#HTML_support](http://code.google.com/p/support/wiki/WikiSyntax#HTML_support)

# c++ - 链接基于 Dcmtk 的 C++ 程序的库？

> ID：15028989
> 
> 赞同：2
> 
> 时间：2013-02-22T16:39:34.530
> 
> 标签：c++, visual-studio, dcmtk

我试图了解如何基于 Dcmtk 库进行编程。我对 C++ 编程非常陌生和天真（我已经学习了 C++ 的基础知识并理解了它们）所以这对你们来说可能只是一个简单的问题。我找到了以下代码，我了解它在做什么，但是我无法链接此代码成功编译所需的所有库。请指导我如何理解如何链接所有源和库，以便在 C++ 中制作 Dcmtk 程序。我正在尝试在 Visual Studio 中运行这个程序，它是 dcmtk 3.6.0。

```
#include "dcmtk/config/osconfig.h"
#include "dcmtk/dcmimgle/dcmimage.h"

int main(int argc, char *argv[])
{
    OFLog::configure(OFLogger::INFO_LOG_LEVEL);

    DicomImage *image = new DicomImage("mf_image.dcm", CIF_UsePartialAccessToPixelData, 0, 10 /* fcount */); 

    if (image->getStatus() == EIS_Normal)
    {
        do {
            DCMIMGLE_INFO("processing frame " << image->getFirstFrame() + 1 << " to "
                                              << image->getFirstFrame() + image->getFrameCount());
        } while (image->processNextFrames());
    }

    delete image;

    return 0;
} 
```

包括目录（我只是猜到了）：

```
D:\dcmtk-3.6.0\dcmdata\include;D:\dcmtk-3.6.0\ofstd\include;D:\dcmtk-3.6.0\oflog\include;D:\dcmtk-3.6.0\dcmimgle\include;D:\dcmtk-3.6.0\build\include;$(IncludePath) 
```

图书馆目录（我只是猜到了）

```
D:\dcmtk-3.6.0\build\dcmimgle\libsrc\Debug;D:\dcmtk-3.6.0\build\dcmdata\libsrc\Debug;D:\dcmtk-3.6.0\build\ofstd\libsrc\Debug;D:\dcmtk-3.6.0\build\oflog\libsrc\Debug;D:\dcmtk-3.6.0\build\dcmimage\libsrc\Debug;$(LibraryPath) 
```

源目录：（我只是猜到了）

```
D:\dcmtk-3.6.0\dcmdata\libsrc;D:\dcmtk-3.6.0\dcmimage\libsrc;D:\dcmtk-3.6.0\dcmimgle\libsrc;D:\dcmtk-3.6.0\ofstd\libsrc;$(SourcePath) 
```

链接器中的输入如下：

```
dcmimage.lib;dcmimgle.lib;dcmdata.lib;oflog.lib;ofstd.lib;netapi32.lib;wsock32.lib;advapi32.lib 
```

排除的库：msvcrt.lib

错误（这些错误发生在我没有在 Visual Studio 的链接器的输入中添加任何附加依赖项时。当我添加一些附加依赖项时，如 dcmdata.lib、oflog.lib、ofstd.lib 有很多错误，所以由于空间不足，我无法在此处发布它们。）：

```
 Error   34  error LNK2005: "public: void __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Osfx(void)" (?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   23  error LNK2005: "public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   20  error LNK2005: "public: void __thiscall std::_Container_base12::_Orphan_all(void)" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   6   error LNK2005: "public: virtual __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::~basic_streambuf<char,struct std::char_traits<char> >(void)" (??1?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   3   error LNK2005: "public: virtual __thiscall std::basic_ostream<char,struct std::char_traits<char> >::~basic_ostream<char,struct std::char_traits<char> >(void)" (??1?$basic_ostream@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   2   error LNK2005: "public: virtual __thiscall std::basic_ios<char,struct std::char_traits<char> >::~basic_ios<char,struct std::char_traits<char> >(void)" (??1?$basic_ios@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   37  error LNK2005: "public: static void __cdecl std::ios_base::_Addstd(class std::ios_base *)" (?_Addstd@ios_base@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(ios.obj)
Error   42  error LNK2005: "public: static void __cdecl std::_Locinfo::_Locinfo_dtor(class std::_Locinfo *)" (?_Locinfo_dtor@_Locinfo@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(locale0.obj)
Error   41  error LNK2005: "public: static void __cdecl std::_Locinfo::_Locinfo_ctor(class std::_Locinfo *,char const *)" (?_Locinfo_ctor@_Locinfo@std@@SAXPAV12@PBD@Z) already defined in msvcprtd.lib(MSVCP100D.dll)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(locale0.obj)
Error   29  error LNK2005: "public: int __thiscall std::ios_base::flags(void)const " (?flags@ios_base@std@@QBEHXZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   26  error LNK2005: "public: int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputc(char)" (?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   35  error LNK2005: "public: class std::locale::facet * __thiscall std::locale::facet::_Decref(void)" (?_Decref@facet@locale@std@@QAEPAV123@XZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   27  error LNK2005: "public: class std::basic_streambuf<char,struct std::char_traits<char> > * __thiscall std::basic_ios<char,struct std::char_traits<char> >::rdbuf(void)const " (?rdbuf@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_streambuf@DU?$char_traits@D@std@@@2@XZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   32  error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > * __thiscall std::basic_ios<char,struct std::char_traits<char> >::tie(void)const " (?tie@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_ostream@DU?$char_traits@D@std@@@2@XZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   1   error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(unsigned long)" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@K@Z) already defined in dcmimage.lib(dicoimg.obj)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   31  error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::flush(void)" (?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   28  error LNK2005: "public: char __thiscall std::basic_ios<char,struct std::char_traits<char> >::fill(void)const " (?fill@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEDXZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   33  error LNK2005: "public: bool __thiscall std::ios_base::good(void)const " (?good@ios_base@std@@QBE_NXZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   4   error LNK2005: "public: __thiscall std::basic_ostream<char,struct std::char_traits<char> >::basic_ostream<char,struct std::char_traits<char> >(class std::basic_streambuf<char,struct std::char_traits<char> > *,bool)" (??0?$basic_ostream@DU?$char_traits@D@std@@@std@@QAE@PAV?$basic_streambuf@DU?$char_traits@D@std@@@1@_N@Z) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   44  error LNK2005: "public: __thiscall std::_Lockit::~_Lockit(void)" (??1_Lockit@std@@QAE@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(xlock.obj)
Error   43  error LNK2005: "public: __thiscall std::_Lockit::_Lockit(int)" (??0_Lockit@std@@QAE@H@Z) already defined in msvcprtd.lib(MSVCP100D.dll) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(xlock.obj)
Error   19  error LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   22  error LNK2005: "public: __thiscall std::_Container_base12::_Container_base12(void)" (??0_Container_base12@std@@QAE@XZ) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   30  error LNK2005: "public: __int64 __thiscall std::ios_base::width(void)const " (?width@ios_base@std@@QBE_JXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   24  error LNK2005: "public: __int64 __thiscall std::ios_base::width(__int64)" (?width@ios_base@std@@QAE_J_J@Z) already defined in dcmimage.lib(diyp2img.obj)    C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   25  error LNK2005: "public: __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputn(char const *,__int64)" (?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   12  error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setp(char *,char *,char *)" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in dcmimage.lib(diyp2img.obj)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   9   error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setp(char *,char *)" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD0@Z) already defined in dcmimage.lib(diyp2img.obj)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   8   error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setg(char *,char *,char *)" (?setg@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in dcmimage.lib(diyp2img.obj)  C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   18  error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::pbump(int)" (?pbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   16  error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::gbump(int)" (?gbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   15  error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::pptr(void)const " (?pptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   13  error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::pbase(void)const " (?pbase@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   7   error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::gptr(void)const " (?gptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   14  error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::epptr(void)const " (?epptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   17  error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::egptr(void)const " (?egptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   10  error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::eback(void)const " (?eback@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   11  error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::_Pninc(void)" (?_Pninc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEPADXZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   21  error LNK2005: "protected: __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::basic_streambuf<char,struct std::char_traits<char> >(void)" (??0?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in dcmimage.lib(diyp2img.obj)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   5   error LNK2005: "protected: __thiscall std::basic_ios<char,struct std::char_traits<char> >::basic_ios<char,struct std::char_traits<char> >(void)" (??0?$basic_ios@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in dcmimage.lib(diyp2img.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\msvcprtd.lib(MSVCP100D.dll)
Error   38  error LNK2005: "private: static void __cdecl std::locale::facet::_Facet_Register(class std::locale::facet *)" (?_Facet_Register@facet@locale@std@@CAXPAV123@@Z) already defined in msvcprtd.lib(locale0_implib.obj) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(locale0.obj)
Error   36  error LNK2005: "private: static void __cdecl std::ios_base::_Ios_base_dtor(class std::ios_base *)" (?_Ios_base_dtor@ios_base@std@@CAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(ios.obj)
Error   40  error LNK2005: "private: static class std::locale::_Locimp * __cdecl std::locale::_Init(void)" (?_Init@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(locale0.obj)
Error   39  error LNK2005: "private: static class std::locale::_Locimp * __cdecl std::locale::_Getgloballocale(void)" (?_Getgloballocale@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll) C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\AccessMultipleFile\libcpmtd.lib(locale0.obj)
Error   50  error LNK1169: one or more multiply defined symbols found   C:\Users\fibne-mozher\Documents\Visual Studio 2010\Projects\AccessMultipleFile\Debug\AccessMultipleFile.exe 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:29:00.083

在 Visual Studio 中，您可以在项目的属性 - 配置属性 - 链接器 - 输入 - 附加依赖项下指定要链接的其他库。

[此 DCMTK 常见问题解答](http://forum.dcmtk.org/viewtopic.php?t=36)详细说明了应链接的库，包括它们的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:11:52.840

我认为您没有链接库。尝试将此添加到源文件的顶部

```
#pragma comment(lib, "dcmdata.lib") 

#pragma comment(lib, "oflog.lib") 

#pragma comment(lib, "ofstd.lib") 
```

# optimization - GCC 热属性的语义

> ID：15028990
> 
> 赞同：21
> 
> 时间：2013-02-22T16:39:44.347
> 
> 标签：optimization, gcc

假设我有一个由三个函数 A、B 和 C 组成的编译单元。A 从编译单元外部的函数调用一次（例如，它是一个入口点或回调）；B 被 A 多次调用（例如，它在一个紧密的循环中被调用）；每次调用 B 都会调用一次 C（例如，它是一个库函数）。

通过 A 的整个路径（通过 B 和 C）是性能关键的，尽管 A 本身的性能是非关键的（因为大部分时间都花在 B 和 C 上）。

`__attribute__ ((hot))`为了更积极地优化这条路径，应该注释的最小函数集是什么？假设我们不能使用`-fprofile-generate`.

等效地：`__attribute__ ((hot))`是指“优化此函数的主体”、“优化对此函数的调用”、“优化此函数进行的所有后代调用”，还是它们的某种组合？

GCC 信息页面没有明确解决这些问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-22T23:05:35.130

[官方文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)：

> `hot` 函数的热点属性用于通知编译器该函数是编译程序的热点。该功能进行了更积极的优化，并且在许多目标上它被放置在文本部分的特殊小节中，因此所有热门功能看起来都非常接近，从而提高了局部性。当配置文件反馈可用时，通过 -fprofile-use 会自动检测热功能并忽略此属性。
> 
> 函数的 hot 属性在 4.3 之前的 GCC 版本中没有实现。
> 
> 标签上的 hot 属性用于通知编译器标签后面的路径比没有注释的路径更有可能。此属性用于无法使用 __builtin_expect 的情况，例如使用计算的 goto 或 asm goto。
> 
> 标签上的 hot 属性在 4.8 之前的 GCC 版本中没有实现。

[2007 年](http://axon.cs.byu.edu/~adam/gatheredinfo/tips/tips_gcc.php)：

```
 __attribute__((hot)) 
```

> 提示标记的函数是“热”的，应该更积极地优化和/或放置在其他“热”函数附近（用于缓存局部性）。

[吉拉德·本-优素福](http://benyossef.com/helping-the-compiler-help-you/)：

> 顾名思义，这些函数属性用于提示编译器相应的函数在您的代码中经常被调用（热）或很少被调用（冷）。
> 
> 然后编译器可以在分支中对代码进行排序，例如 if 语句，以支持调用这些热函数的分支和不支持冷函数的分支，假设将采用的分支更有可能调用热函数并且不太可能打电话给感冒。
> 
> 此外，编译器可以选择在生成的二进制文件的特殊部分中将标记为热的函数组合在一起，前提是由于数据和指令缓存基于局部性，或者相关代码和数据的相对距离，将所有的经常一起调用的函数会为整个应用程序更好地缓存它们的代码。
> 
> hot 属性的良好候选者是在您的代码库中经常调用的核心函数。冷属性的良好候选者是内部错误处理函数，仅在出现错误时调用。

因此，根据这些消息来源，`__attribute__ ((hot))`意味着：

*   优化对该函数的调用
*   优化这个函数的主体
*   将此函数的主体放入`.hot`部分（将所有热代码分组到一个位置）

经过源代码分析，我们可以说“热”属性是用`(lookup_attribute ("hot", DECL_ATTRIBUTES (current_function_decl))`;检查的。当它为真时，函数`node->frequency`设置为 `NODE_FREQUENCY_HOT`（[predict.c，compute_function_frequency()](http://code.metager.de/source/xref/gcc/gcc/predict.c#2786)）。

如果函数的频率为`NODE_FREQUENCY_HOT`，

*   如果没有配置文件信息并且没有`likely/unlikely`分支，[`maybe_hot_frequency_p`](http://code.metager.de/source/xref/gcc/gcc/predict.c#111) 则函数将返回 true（== "...频率 FREQ 被认为是热的。"）。这会将函数中[`maybe_hot_bb_p`](http://code.metager.de/source/xref/gcc/gcc/predict.c#157)的所有基本块 (BB) 的值转换为 true（“BB 可能是 CPU 密集型的，应该针对最大性能进行优化。”）并且[`maybe_hot_edge_p`](http://code.metager.de/source/xref/gcc/gcc/predict.c#200)对于函数中的所有边都为 true。反过来，在非`-Os`模式下，这些 BB 和边缘以及循环将针对速度而不是大小进行优化。

*   对于来自此函数的所有出站呼叫边缘，[`cgraph_maybe_hot_edge_p`](http://code.metager.de/source/xref/gcc/gcc/predict.c#168)将返回 true（“如果呼叫可能是热的，则返回 true。”）。此标志用于 IPA（ipa-inline.c、ipa-cp.c、ipa-inline-analysis.c）并影响内联和克隆决策

# ruby-on-rails - 地理编码器使用 Rails 控制台对数据库中的记录强制地理编码

> ID：15028991
> 
> 赞同：1
> 
> 时间：2013-02-22T16:39:52.633
> 
> 标签：ruby-on-rails, rails-activerecord, rails-geocoder

我的数据库中有一个地址表已经有一段时间了，最​​近遇到了 Geocoder gem（甜蜜的 gem）。无论如何，我已经编辑了我的模型以包含纬度和经度列，并指定每条记录应该是什么`geocoded_by`，所以现在我想简单地对表中当前具有零纬度的所有地址进行地理编码和经度。

我以为我已经用 rails 控制台解决了这个问题，只需运行以下命令：

```
 Address.all.each{ |address| address.geocode } 
```

这将返回每个条目并带有一个填充的纬度和经度列，但是在随后检查各个元素时 - 它们仍然具有零纬度和经度（即实际上并未更新记录）。我认为也许`address.geocode!`会起作用，但那返回了一个`NoMethodError`.

这必须是一个简单的，但似乎我只是没有足够的经验，不知道它是什么...... aaaand稍微修补一下我想通了：

**解决方案**

```
 Address.all.each{ |address| address.update_attributes(latitude: address.geocode[0], longitude: address.geocode[1]) } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:39:52.633

简单的表演

```
 Address.all.each{ |address| address.geocode } 
```

实际上并不改变数据库中的记录。

**解决方案**

需要使用`update_attributes`：

```
 Address.all.each{ |address| address.update_attributes(latitude: address.geocode[0], longitude: address.geocode[1]) } 
```

Geocoder 中可能嵌入了更快的解决方案，但这是解决问题的快速解决方案，希望对其他人有所帮助！

# jquery - 将类添加到 select2 元素

> ID：15028995
> 
> 赞同：34
> 
> 时间：2013-02-22T16:40:01.317
> 
> 标签：jquery, jquery-select2

文档要么很糟糕，要么我遗漏了一些东西。我正在尝试将错误类添加到 select2 框中以进行表单验证。它只是一个 1px 的红色边框。

我`containerCssClass`在文档中找到了该方法，但我不确定如何应用它。

我试过以下没有运气：

```
$("#myBox").select2().containerCssClass('error'); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-22T16:43:14.790

jQuery 使用 JSON 对象进行初始化，所以我猜这个也是：\

```
$("#myBox").select2({ containerCssClass : "error" }); 
```

如果您想添加/删除一个类，您可以在初始化后执行此操作

```
$($("#myBox").select2("container")).addClass("error");
$($("#myBox").select2("container")).removeClass("error"); 
```

上述函数获取 select2 主容器的 DOM 节点 例如：`$("#myBox").select2("container")`

**重要**
您将需要使用容器方法来获取容器，因为您不会直接编辑 SELECT，但 select2 会生成其他 HTML 来模拟可设置样式的 SELECT。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-09-07T13:51:32.303

对于已经初始化的 select2 元素，我尝试了@Niels 解决方案，但它导致了错误：`Uncaught TypeError: Cannot read property 'apply' of undefined`

进入源代码，这一直在起作用：

```
$($('#myBox').data('select2').$container).addClass('error')
$($('#myBox').data('select2').$container).removeClass('error') 
```

使用select2 v4.0.3 full

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-22T16:54:34.370

根据[文档](http://ivaynberg.github.com/select2/#documentation)，`containerCssClass`只是一个构造函数属性。您可能会做的最好的事情是在通过以下方式收到错误时重新初始化它：

```
$("#myBox").select2({
    containerCssClass: "error" 
}); 
```

**注释中的注释**：如果你得到`Uncaught Error: No select2/compat/containerCss(…)`，你需要包含[select2.full.js](https://select2.org/getting-started/builds-and-modules)版本而不是基本版本

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-10-17T18:47:21.990

对于那些从谷歌浏览到这里的人来说，该属性`containerCssClass`有一个误导性的名称，因为它实际上并没有向容器元素添加任何类，而是向选择元素添加任何类。当您检查生成的 html 时，您可以看到这一点。

[我在这里](https://github.com/select2/select2/issues/285#issuecomment-420277740)遇到了一个不错的小技巧，它允许您通过将 css 类添加到`theme`属性来将其应用于容器，如下所示：

```
$('#my-select').select2({
    theme: "bootstrap myCssClass",
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-13T06:43:49.257

使用主题选项。

```
 $(".select").select2({
        placeholder: "",
        allowClear: false,
        theme: "custom-option-select"
    }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-28T21:59:01.160

最简单的方法：

创建一个父类，如

```
<div class="select-error">
    <select id="select2" name="select2" data-required class="form-control">
        <option value="" selected>No selected</option>
        <option value="1">First</option>
        <option value="2">Second</option>
    </select>
</div> 
```

当您使用 jquery 或 php 验证它时，只需将样式或 css 添加到 .select-error 类，如

```
style="border:1px solid red; border-radius: 4px" 
```

jQuery 示例：

```
$('[data-required]').each(function() {
  if (!$(this).val()) {
    if ($(this).data('select2')) {
      $('.select-error').css({
        'border': '1px solid red',
        'border-radius': '4px'
      });
    }
  }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-28T04:10:27.143

您可以使用 dropdownCssClass 选项

```
$("#myBox").select2({
    containerCssClass: "error" 
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-15T11:18:04.000

每次单击跨度标记时，select2 都会在正文末尾创建一个带有 select2-container 类的另一个跨度，并且带有选项的下拉列表变得可见，因此您可以使用单击事件并触发添加自定义的函数类到正文末尾的下拉容器以及没有显示下拉列表时的跨度。这完全对我有用。

```
$($(id).data('select2').$container).addClass("your-custom-class")
$($(id).data('select2').$container).click(() => $.each($("span.select2-container"), (index, value) => {
    if (index === $("span.select2-container").length - 1) {
        $(value).addClass("your-custom-class")
    }
})) 
```