# StackOverflow 问答 12583000-12583999

# php - JSON.stringify - 如何在 Symfony2 中使用它

> ID：12583000
> 
> 赞同：0
> 
> 时间：2012-09-25T12:30:53.590
> 
> 标签：php, javascript, json, symfony, twig

抱歉这个愚蠢的问题，但我对 JavaScript 一无所知。我正在尝试使用 JSON.stringify 使数组看起来漂亮且易于阅读。

我在控制器中试过这个：

```
 $metadata = '{"hello":"world", "Test":["hello"]}';
    $data = json_encode($metadata);

    return $this->render('AcmeQuotesBundle:Home:metadata.html.twig', array('data' => $data)); 
```

这在模板中：

```
 <script>
        var obj = {{ data }}

        document.body.innerHTML = "";
        document.body.appendChild(document.createTextNode(JSON.stringify(obj, null, 4)));
    </script> 
```

但我得到一个白屏。

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:34:29.240

试试下面

```
var obj = {{ data|raw }}; 
```

# php - 在自定义处理程序中保护 PHP 会话 ID

> ID：12583002
> 
> 赞同：1
> 
> 时间：2012-09-25T12:31:00.897
> 
> 标签：php, security, session

我编写了一个简单的自定义会话处理程序（在 MySQL 中，但这不相关），它只是将序列化的会话数据、会话 ID 和当前时间保存到表中。

虽然会话存在，但会话 id 对攻击者来说就像密码一样有价值，这让我相信我应该以某种方式对其进行加密。

是否值得在将会话 ID 存储到数据库之前对其进行哈希处理，以迫使攻击者暴力破解会话 ID 以伪造 cookie？

我的站点已经对所有连接使用 HTTPS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:41:36.313

因此，您要防止的是，如果攻击者从您的数据库中访问会话 id 的转储，他可以冒充任意用户，因为他可以按原样使用会话 id。为此，以与哈希密码相同的方式对 id 进行哈希处理实际上是一个非常好的主意，因此可以进行单向查找，但哈希值本身已变得无用。由于会话 ID 通常也会很快过期，因此暴力破解几乎没有用处。

另一方面，由于会话 ID 通常会很快过期，因此一开始可能没有太多意义。攻击者的机会之窗非常小。攻击者能够从您的数据库中获取会话 id 转储这一事实的重量要重得多，而且是更严重的破坏，因为这意味着攻击者可能已经可以访问其他数据。

它仍然是一个有价值的防御，几乎没有缺点（轻微的计算开销，会话 id 的调试稍微复杂一些）。

# ios - 从 sqlite 数据库加载大量数据时不显示活动指示器

> ID：12583005
> 
> 赞同：1
> 
> 时间：2012-09-25T12:31:02.197
> 
> 标签：ios, sqlite, uiactivityindicatorview

在我的应用程序中，我从数据库中获取数据。我从数据库中获得的数据非常大，比如 20000 条记录。所以，我想显示一个活动指示器来指示数据正在加载。但是当我运行应用程序时没有显示活动指示器。

我正在为此发送代码。请帮帮我。

```
activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

activityIndicator.frame = CGRectMake(100,100, 20, 20);
[self.view addSubview:activityIndicator];

[activityIndicator startAnimating];

// Code to get data from database

[activityIndicator stopAnimating]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:33:55.217

首先，您不需要为activiyIndi​​cator 设置框架。你可以设置中心...

```
activityIndicator.center = self.view.center; (or soemthing like this). 
```

其次，您如何检索数据？你是在主线程上做的吗？或者你是异步做的？

：：编辑：：

啊，看来你正在这样做......

```
[actInd startAnimating];
[self getData];  //this is asynchronous
[actInd stopAnimating]; 
```

如果是这种情况，那么 stopAnimating 几乎会立即被调用。

你需要的是这样的东西......

```
[actInd startAnimating];
[self getData];  //this is asynchronous 
```

然后在getData...

```
- (void)getData
{
    //get all your data and process it....

    [actInd stopAnimating];
} 
```

这样，只有在完成所有数据工作后才会调用停止动画。

如果这不起作用，请尝试完全删除 stopAnimating 以首先检查它实际上是动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:38:06.000

做这个：

```
activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
activityIndicator.center = self.view.center; 
[self.view addSubview:activityIndicator];
[NSThread detachNewThreadSelector:@selector(startActivityIndicator) toTarget:self withObject:nil]; 
```

添加这个方法：

```
-(void)startActivityIndicator
{
  NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
  [activityIndicator startAnimating];
  [pool release];
} 
```

做改变：

```
- (void)getData
{
  //get all your data from database.
  [activityIndicator stopAnimating];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:42:32.920

@Fogmeister 是关于设置 activityIndi​​cator 框架的。

为了显示activityIndi​​cator，只需创建问题中显示的代码的一个函数并使用`performSelector:withObject:afterDelay:`延迟为0.001 调用它，activityIndi​​cator 将显示

快乐编码:)

# windows - 一个exe的清单？

> ID：12583006
> 
> 赞同：1
> 
> 时间：2012-09-25T12:31:08.433
> 
> 标签：windows, winapi, manifest, uac

我有一个可执行文件 A.exe，它可以找到操作系统的体系结构并取决于它调用 A64.exe 或 A86.exe 的体系结构。在这种情况下，我是否想要所有 exe 的清单（ A.exe、A64.exe、A86.exe ）？现在我只有 A.exe 的清单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:34:22.180

是的，每个模块都需要自己的清单。

在您的情况下，如果您`A64.exe`从开始`A.exe`，并且`A64.exe`没有清单，那么`A64`将运行虚拟化，它将无法访问 comctl32 v6 等等。进程不会从创建它的进程继承其清单，每个进程必须提供自己的清单。

# python - 如何在 TestCase 子类中隐藏我的堆栈帧？

> ID：12583015
> 
> 赞同：9
> 
> 时间：2012-09-25T12:31:42.207
> 
> 标签：python, unit-testing, testing, subclass, stack-trace

我想向`TestCase`子类添加自定义断言方法。我试图从`unittest`模块中复制我的实现，以便它`TestCase`尽可能地匹配常规的行为。（我宁愿只委托给`self.assertEqual()`，但这会导致更多的回溯噪音，见下文。）`unittest`当报告失败的断言时，该模块似乎会自动隐藏其实现的一些内部细节。

```
import unittest

class MyTestCase(unittest.TestCase):
    def assertLengthIsOne(self, sequence, msg=None):
        if len(sequence) != 1:
            msg = self._formatMessage(msg, "length is not one")
            raise self.failureException(msg)

class TestFoo(MyTestCase):
    seq = (1, 2, 3, 4, 5)

    def test_stock_unittest_assertion(self):
        self.assertEqual(len(self.seq), 1)

    def test_custom_assertion(self):
        self.assertLengthIsOne(self.seq)

unittest.main() 
```

它的输出是这样的：

```
amoe@vuurvlieg $ python unittest-demo.py
FF
======================================================================
FAIL: test_custom_assertion (__main__.TestFoo)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "unittest-demo.py", line 16, in test_custom_assertion
    self.assertLengthIsOne(self.seq)
  File "unittest-demo.py", line 7, in assertLengthIsOne
    raise self.failureException(msg)
AssertionError: length is not one

======================================================================
FAIL: test_stock_unittest_assertion (__main__.TestFoo)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "unittest-demo.py", line 13, in test_stock_unittest_assertion
    self.assertEqual(len(self.seq), 1)
AssertionError: 5 != 1

----------------------------------------------------------------------
Ran 2 tests in 0.000s

FAILED (failures=2) 
```

请注意，自定义 assert 方法会导致堆栈跟踪有两帧，一帧在方法本身内部，而 stock`unittest`方法只有一帧，即用户代码中的相关行。如何将此框架隐藏行为应用于我自己的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T13:17:44.967

[Peter Otten 在 comp.lang.python 上](http://mail.python.org/pipermail/python-list/2012-October/632388.html)回答了这个问题。

将 MyTestCase 移动到一个单独的模块中并定义一个全局变量`__unittest = True`。

```
$ cat mytestcase.py 
import unittest

__unittest = True

class MyTestCase(unittest.TestCase):
    def assertLengthIsOne(self, sequence, msg=None):
        if len(sequence) != 1:
            msg = self._formatMessage(msg, "length is not one")
            raise self.failureException(msg)

$ cat mytestcase_demo.py 
import unittest
from mytestcase import MyTestCase

class TestFoo(MyTestCase):
    seq = (1, 2, 3, 4, 5)

    def test_stock_unittest_assertion(self):
        self.assertEqual(len(self.seq), 1)

    def test_custom_assertion(self):
        self.assertLengthIsOne(self.seq)

if __name__ == "__main__":
    unittest.main()

$ python mytestcase_demo.py 
FF
======================================================================
FAIL: test_custom_assertion (__main__.TestFoo)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "mytestcase_demo.py", line 11, in test_custom_assertion
    self.assertLengthIsOne(self.seq)
AssertionError: length is not one

======================================================================
FAIL: test_stock_unittest_assertion (__main__.TestFoo)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "mytestcase_demo.py", line 8, in test_stock_unittest_assertion
    self.assertEqual(len(self.seq), 1)
AssertionError: 5 != 1

----------------------------------------------------------------------
Ran 2 tests in 0.000s

FAILED (failures=2)
$ 
```

# objective-c - NSCache 一直给我（null）

> ID：12583019
> 
> 赞同：1
> 
> 时间：2012-09-25T12:32:14.090
> 
> 标签：objective-c, nscache

我将 NSString 保存到 NSCache，但在 NSLog 处给了我（null）。

在 ViewDidLoad 初始化后，我将这段代码保存在 NSCache

```
cache=[[NSCache alloc]init]; 
```

然后我有一个被调用并保存对象的函数

```
 NSIndexPath *indexPath = [NSIndexPath indexPathForRow:1 inSection:1];
 NSString *res = [cache objectForKey:indexPath];
 if (!res) {                      
     res=@"1";
     [cache setObject:res forKey:indexPath];
 } 
```

然后我像这样检查：

```
NSString *res = [cache objectForKey:indexPath];
if (!res) {    
    res=@"1";
    [cache setObject:res forKey:indexPath];
} 
```

很遗憾...

```
NSLog("%@",res); //always it gives me (null) 
```

以前有人遇到过这个问题吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:37:25.823

保存对象后检查如下：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:1 inSection:1];
NSLog(@"%@",[cache objectForKey:indexPath]); 
```

# active-directory - ldap 嵌套组成员资格

> ID：12583021
> 
> 赞同：0
> 
> 时间：2012-09-25T12:32:28.493
> 
> 标签：active-directory, ldap

我的用户是“SPR”，它位于 dc=aaaldap,dc=com 下

现在我要发送的过滤器是（IDEA：提取用户 SPR 所属的所有组）过滤器：

```
(&(objectclass=*)(memberof:1.2.840.113556.1.4.1941:=cn=SPR,dc=aaaldap,dc=com)) 
```

作为此搜索结果的一部分，我从 AD 服务器获得了 ldapsearchresref 的响应（据我了解，这是来自 ldap 服务器的指示，它无法在其服务器中找到条目，因此提供了对另一台服务器的 URL 的引用这可能有助于解决条目）。

我的疑问是为什么它无法找到我确定条目确实存在的任何条目？

此外，其次，我在某处读到 LDAP 搜索过滤器不适用于逗号。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:19:02.797

要喜欢用户所属的所有组，包括嵌套组，您需要在组中搜索成员属性：

```
(member:1.2.840.113556.1.4.1941:=(cn=SPR,dc=aaaldap,dc=com)) 
```

-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:22:39.353

如果您需要查找该用户所属的所有组，您可以使用**PrincipalContext**。

让我告诉你怎么做

```
PrincipalContext pr = new PrincipalContext(ContextType.Domain, "aaaldap.com", "dc=aaaldap,dc=com", username, password);
List<string> lst = new List<string>();
UserPrincipal user = UserPrincipal.FindByIdentity(pr, DomainId);
if (user != null)
  {
    PrincipalSearchResult<Principal> results = user.GetGroups();

   foreach (Principal p in results)
    {
      lst.Add(p.ToString());
    }
  lst.OrderBy(item => item.ToString());
    }
  pr.Dispose();
 return lst; 
```

我想这就是你要找的。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:44:31.240

使用 LDAP 和查询时，您有时可以获得一个引用 URL，这意味着该帐户是已知的，但在不同的域中。当我查询我们的全局目录时会发生这种情况，所以我不再这样做了。:)

这适用于我们的域here。注意我的过滤器中有逗号。

```
 private static void showMemberships()
    {
                        // instantiate the DirectoryEntry instance with the FQDN of the domain to connect to
            DirectoryEntry directoryObject = new DirectoryEntry("LDAP://CHILD.DOMAIN.ORG");

            // create a DirectorySearcher object and pass the DirectoryEntry instance
            DirectorySearcher ds = new DirectorySearcher(directoryObject);

            // set search filter using LDAP query format
            // this example fetches members for a group limiting to users only (not groups) 
            // and where the users are not in the stale objects ou
            ds.Filter = "(&(objectCategory=User)(!ou=Stale Objects)(memberOf=CN=GROUPNAME,CN=Users,DC=CHILD,DC=DOMAIN,DC=ORG))";

            // perform the search using the filter and store in a SearchResultsCollection
            SearchResultCollection results = ds.FindAll();

            // iterate through the results and do something with the info
            foreach (SearchResult current in results)
            {
                string userId = current.Properties["cn"][0].ToString().Trim().ToUpper();
                string userDn = current.Properties["distinguishedName"][0].ToString().Trim().ToUpper();

                Console.Write(userId + " (" + userDn + ")\n");
            }

            // set the resource instances as released
            directoryObject.Close();
            directoryObject.Dispose();
    } 
```

# postgresql - PostgreSQL 的事务超时解决方法

> ID：12583027
> 
> 赞同：6
> 
> 时间：2012-09-25T12:32:50.760
> 
> 标签：postgresql, transactions, timeout

AFAIK，PostgreSQL 8.3 不支持事务超时。我已经阅读了有关将来支持此功能的信息，并且对此进行了一些讨论。但是，出于特定原因，我需要解决此问题。所以我所做的是一个定期运行的脚本：

1）基于锁和活动，查询以检索耗时过长的事务的 processID，并保留最旧的（*trxTimeOut.sql*）：

```
SELECT procpid
FROM
(
    SELECT DISTINCT age(now(), query_start) AS age, procpid
    FROM pg_stat_activity, pg_locks
    WHERE pg_locks.pid = pg_stat_activity.procpid
) AS foo
WHERE age > '30 seconds'
ORDER BY age DESC
LIMIT 1 
```

2）基于此查询，杀死相应的进程（*trxTimeOut.sh*）：

```
psql -h localhost -U postgres -t -d test_database -f trxTimeOut.sql | xargs kill 
```

尽管我已经对其进行了测试并且似乎可以正常工作，但我想知道这是否是一种可以接受的方法，还是应该考虑另一种方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T11:17:17.293

PostgreSQL 从 9.6 版开始提供[idle_in_transaction_session_timeout](https://www.postgresql.org/docs/current/runtime-config-client.html)，自动终止空闲时间过长的事务。

也可以设置一个命令可以花费多长时间的限制，通过`statement_timeout`，独立于它所在的事务的持续时间，或者它为什么被卡住（忙查询或等待锁定）。

要自动中止专门等待锁定的事务，请参阅`lock_timeout`。

这些设置可以使用如下`SET`所示的命令在 SQL 级别设置，或者可以使用 设置为数据库的默认值，或者使用 设置为`ALTER DATABASE`用户`ALTER USER`，或者使用 设置为整个实例`postgresql.conf`。

```
SET statement_timeout=10000;   -- time out after 10 seconds 
```

# c# - 接收方可以解密的非对称加密 - 但必须完全无法加密数据

> ID：12583028
> 
> 赞同：0
> 
> 时间：2012-09-25T12:32:52.280
> 
> 标签：c#, encryption, encryption-asymmetric

我拥有的是客户端服务器场景和有效负载（x）。

*   服务器生成 x 并对其进行加密：enc(x)
*   enc(x) 被发送到客户端
*   客户端解密数据得到x

但是，我必须执行的限制是：

*   加密密钥和解密密钥必须不同
*   客户端*不能*有加密密钥

所以直接 RSA 是不可能的，因为你需要公钥和私钥来解密，而公钥可以让你加密它。

所以目标是双重的：让客户端能够解密一段数据，确保它来自已知的来源——但是让客户端无法生成自己的原始有效负载的加密版本。

理想情况下是 C#，但我可以接受类似的语言答案。

编辑：我被告知只需要私钥来解密而不是两个密钥 - 但是似乎没有办法让 .Net 中的 RSACryptoServiceProvider 做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:59:22.190

1.  使用 AES 之类的东西来加密数据
2.  使用 RSA 对加密数据进行签名
3.  将加密+签名的数据发送给您的客户
4.  由于 AES 使用共享密钥，因此客户端可以解密数据
5.  客户端可以使用公共 RSA 密钥验证签名

缺点是：

1.  客户端可以复制加密消息，但不会签名（因为只有您拥有私钥）。
2.  客户端可以用自己的密钥对替换自己的公钥来签名/验证消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:37:11.920

只需使用两个密钥对，一个用于加密，一个用于签名。RSA 对此很好。

# c# - 使用 FileStream 读取文件

> ID：12583030
> 
> 赞同：0
> 
> 时间：2012-09-25T12:32:56.373
> 
> 标签：c#, filestream

嗨，我正在使用，

```
 FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read); 
```

从我在调试目录中定义但没有成功的临时文件夹中读取文件。使用此代码，我可以仅从 Debug-Folder 读取文件。谁能帮忙！

这是我的代码

```
private void button_click(object sender, RoutedEventArgs e)
    {
        string activeDirectory = System.Windows.Forms.Application.StartupPath + "\\Temp\\";

        string[] files = Directory.GetFiles(activeDirectory);
        try
        {
            foreach (string fileName in files.Select(f => f.Substring(activeDirectory.Length)))
            {
                FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read);
            }
        }
        catch()
        {}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:48:14.847

如果您正在运行调试版本，那么 `System.Windows.Forms.Application.StartupPath`将返回调试文件夹的路径，因为您的 exe 存在于该文件夹中。

# iphone - 实例变量未在内存中分配

> ID：12583036
> 
> 赞同：1
> 
> 时间：2012-09-25T12:33:18.460
> 
> 标签：iphone, objective-c, ios, xcode, memory-management

我有一个 NSObject 类，其中定义了一个 init 方法，如下所示，

```
- (id)initWithPlistName:(NSString *)plistFileName{
    if (self = [super init]) {
        plistName = plistFileName;
        plistContent = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] 
                                                                pathForResource:plistName ofType:@"plist"]]; // this plistContent array is not allocating in memory
    }
    return self;
} 
```

我在我的应用程序**AppDelegate**类**didFinishLaunchingWithOptions**方法中调用此方法，**plistContent**是我的**NSArray**类型的**iVar** ，但每当控制权进入 plistContent alloc init 行并返回 self 时，没有为我的数组分配内存。这里可能发生了什么问题，提前感谢任何帮助。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:49:00.710

检查文件是否存在：

```
NSString *path = [[NSBundle mainBundle] pathForResource:plistName ofType:@"plist"];
if(path)
{
   plistContent = [[NSArray alloc] initWithContentsOfFile:path]; 
}
else
{
  NSLog(@"File Not exists");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:52:45.360

我想您还没有将 plist fly 中 plist 根键的数据类型从字典更改为数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:41:16.623

试试这个

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"plistName" ofType:@"plist"];
NSDictionary *myDict = [[NSDictionary alloc] initWithContentsOfFile:filePath];
NSArray *array = [NSArray arrayWithArray:[myDict objectForKey:@"Root"]]; 
```**

# jquery - Jquery 1.8.1 - 无法使用“in”运算符在 JScrollpane 中搜索“使用”错误

> ID：12583039
> 
> 赞同：0
> 
> 时间：2012-09-25T12:33:36.430
> 
> 标签：jquery, jquery-plugins, error-handling, jscrollpane

我使用带有插件 JSrollpane 的 jquery 1.6.1，然后我插入了最新的 1.8.1 版本的 jquery。它给出了一个错误：Cannot use 'in' operator to search 'using' in false

也许有人知道，这是什么意思？我该怎么办？

提前致谢

# tsql - T-SQL 使用函数更新表列

> ID：12583043
> 
> 赞同：5
> 
> 时间：2012-09-25T12:33:52.767
> 
> 标签：tsql, function, loops, updates

我有下表：

```
RecordID 
Name
Col1
Col2
....
ColN 
```

`RecordID`is`BIGINT PRIMARY KEY CLUSTERED IDENTITY(1,1)`和被`RecordID`初始化`Name`。其他列是 NULL。

我有一个函数，它返回有关其他列的信息`Name`。

要初始化我的表，我使用以下算法：

1.  创建一个循环
2.  获取一行，选择它的`Name`值
3.  使用选定的名称执行函数，并将其结果存储在临时变量中
4.  在表中插入临时变量
5.  移动到下一条记录

有没有办法在不循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:13:07.247

Cross apply 基本上就是为此而建的

```
SELECT D.deptid, D.deptname, D.deptmgrid
    ,ST.empid, ST.empname, ST.mgrid
FROM Departments AS D
    CROSS APPLY fn_getsubtree(D.deptmgrid) AS ST; 
```

[使用应用](http://msdn.microsoft.com/en-us/library/ms175156%28v=SQL.105%29.aspx)

```
UPDATE some_table
SET some_row = another_row,
    some_row2 = another_row/2
FROM some_table st
  CROSS APPLY
    (SELECT TOP 1 another_row FROM another_table at WHERE at.shared_id=st.shared_id)
WHERE ... 
```

[在更新语句中使用交叉应用](https://stackoverflow.com/questions/7492797/using-cross-apply-in-update-statement)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:48:19.713

如果表中已有记录，则可以简单地说以下内容。

```
UPDATE MyTable
SET 
    col1 = dbo.col1Method(Name),
    col2 = dbo.col2Method(Name),
    ... 
```

在插入新记录时，假设 RecordID 是自动生成的，你可以说

```
INSERT INTO MyTable(Name, Col1, Col2, ...)
VALUES(@Name, dbo.col1Method(@Name), dbo.col2Method(@name), ...) 
```

其中@Name 包含名称列的值。

# php - PHP/CSS - 防止显示 div

> ID：12583046
> 
> 赞同：0
> 
> 时间：2012-09-25T12:33:58.337
> 
> 标签：php, css, html

我几乎完成了一个新的 WordPress 主题，这是我的第一个主题。有一些自定义代码，不幸的是我对 PHP 还很陌生。

[http://www.designated.net.au/testbed/wordpress/](http://www.designated.net.au/testbed/wordpress/)

如您所见，粘性帖子有一个“聚光灯”区域。但是目前没有粘性帖子，每个帖子都在那里显示。当帖子被置顶时，它会自行显示在那里。

我想做的是，如果没有粘性帖子，则不会显示整个聚光灯区域。我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:41:06.260

好吧，你可以使用`visible: hidden`div 的 CSS 属性来隐藏它，或者`display:none`. 您只需要检查是否有任何粘性帖子要显示。

```
<?php
    query_posts(array('post__in'=>get_option('sticky_posts')));
    // $nbrStickyPost = something 
    $stickyPost = ""

    if($nbrStickyPost === 0) {
        $stickyPost = " style=\"display:none;\""
    }

    echo "<div id=\"spotlight-feature\"", $stickyPost, ">";
?>

<div id="spotlight-feature-top">
<!-- [...] -->

<?php while (have_posts()) : the_post(); ?>
<!-- [...] --> 
```

如果 nbrStickyPost var 为 0，此代码会将 display:none CSS 属性添加到您的 div。我需要查看一些 query_posts() 和 have_posts() 函数才能真正确定 nbrStickyPost。

# sql - SQL 数学语法困难与除法

> ID：12583048
> 
> 赞同：0
> 
> 时间：2012-09-25T12:34:00.143
> 
> 标签：sql, sql-server

不明白为什么我不能得到正确的答案。我正在尝试计算净利润百分比，但除法部分被忽略了。希望真的很简单吗？

```
SUM(
    (dbo.K3_TradeTeam_Sales2.TotalSales - dbo.K3_TradeTeam_SalesReturn3.TotalCredits)
    ISNULL(dbo.K3_TradeTeam_Purch1.TotalPurchases, 0) / 
           dbo.K3_TradeTeam_Sales2.TotalSales
   ) AS NetMargin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:40:32.200

sql逻辑应该可以工作。您确定 TotalPurchases 不为空吗？因为这使它看起来像是忽略了 devide，但 devide 只返回 0。所以我正在做负零！

例子：

```
select SUM((200 - 100) - ISNULL(100, 0) / 10) AS NetMargin --returns 90
select SUM((200 - 100) - ISNULL(null, 0) / 10) AS NetMargin --return 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:29:02.127

要获得净利润，您可能需要这样的表达式，

```
(
    SUM(
            dbo.K3_TradeTeam_Sales2.TotalSales
        - 
            COALESCE(dbo.K3_TradeTeam_SalesReturn3.TotalCredits, 0.0)
        -
            COALESCE(dbo.K3_TradeTeam_Purch1.TotalPurchases, 0.0)
       )
/ 
    SUM(
            dbo.K3_TradeTeam_Sales2.TotalSales
       )
) AS NetMargin 
```

但是，在不知道您的架构的情况下，我不能肯定地说。`0.0`当您有总销售额时，这也将失败。

* * *

我假设您想要每个房地产的净利润总和除以每个关系的总收入总和。这将为您提供所有关系的累积利润率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:45:29.447

当我无法使用数学公式时，我会临时更改选择以简单地查看每个字段的值以及计算。然后我可以手动进行计算，看看我如何得到我得到的结果，这几乎总是指向我的问题。

```
select 
    dbo.K3_TradeTeam_Sales2.TotalSales, 
    dbo.K3_TradeTeam_SalesReturn3.TotalCredits,
    ISNULL(dbo.K3_TradeTeam_Purch1.TotalPurchases, 0), 
    dbo.K3_TradeTeam_Sales2.TotalSales 
From... 
```

我也从来没有在没有case语句的情况下进行除数来处理除数为0的问题。即使我认为它永远不会发生，我也经常看到它让人们不考虑某些事情（包括错误的数据输入）可能会在未来发生这种情况。

# ruby-on-rails - 将 RABL 模板与服务器端把手一起使用

> ID：12583053
> 
> 赞同：1
> 
> 时间：2012-09-25T12:34:21.360
> 
> 标签：ruby-on-rails, handlebars.js, rabl

我们在 Rails 项目中使用把手（带有 sht_rails）用于客户端和服务器端模板。为了提供客户端模板，我们使用提供 JSON 数据的 RABL 模板。我们希望在服务器端使用具有相同数据的相同模板，但服务器端模板需要散列而不是 JSON 字符串。

作为一种临时解决方案，我们使用`render_to_string`生成 JSON 数据然后`JSON.parse`获取哈希，但它似乎很难看......有没有更好的方法来使用 RABL 模板呈现哈希？

我已经尝试过[github 上描述的解决方案](https://github.com/nesquena/rabl/issues/321)，但没有成功。我们使用`object false`in out 模板，所以我不知道要传递给`Rabl::Renderer#new`. 此外，我们使用了一些特定于 RoR 的方法（如`root_url`），但它们似乎失败了。

# vba - 磁盘上的数据不会直接使用我的记录集上的“更新”功能进行更新

> ID：12583054
> 
> 赞同：0
> 
> 时间：2012-09-25T12:34:26.560
> 
> 标签：vba, adodb

我正在研究一些 VBA 宏。我还使用 ADODB.Recordset 来访问我的 Access 数据库中的数据。

现在，我需要遍历我的表中的记录，并且在这个循环中，还需要在另一个函数中更新同一个表。

这是代码（为便于阅读而清理）。

```
Dim strSql As String
Dim rstCycles As adodb.Recordset

strSql = "SELECT * FROM tblCycles WHERE DatePlanning = #" & dteCurrentDate & "#"
Set rstCycles = SelectQuery(strSql)

 While Not rstCycles.EOF

    if ... then
       rstCycles("NoCycle1") = ...
       rstCycles.Update
    end if

    RefreshPlanning (*)

    rstCycles.MoveNext
 Wend 
```

(*) 在此函数中，我对 tblCycles 表执行选择。

问题是在 rstCycles.Update 之后，数据不会立即记录在磁盘上，因此对 RefreshPlanning 的调用不会读取更新的数据。如果我在更新后设置“1 秒暂停”，一切正常。我不想在我的循环中使用一种暂停。还有其他解决方案吗？

更新 - - - - - - - -

RefreshPlanning 是一个简单的函数，用于根据我的 tblCycles 表刷新我的 excel 表。

```
Sub RefreshPlanning(DatePlanning As Date, CodeEquipement As String)

   Dim strSql As String
   Dim rstCycles As adodb.Recordset

   strSql = "SELECT * FROM tblCycles WHERE DatePlanning = #" & DatePlanning & "# AND CodeEquipement = '" & CodeEquipement & "'"
   Set rstCycles = SelectQuery(strSql)

   While Not rstCycles.EOF
      ' Some code here to update my excel sheet
      ' ...
      rstCycles.MoveNext
   Wend

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:40:32.103

DAO 比使用 MS Access 的 ADO 快很多倍：

```
Dim strSql As String
Dim rstCycles As DAO.Recordset
Dim db As Database

Set db = OpenDatabase("z:\docs\test.accdb")

strSql = "SELECT * FROM tblCycles WHERE DatePlanning = #" & dteCurrentDate & "#"
Set rstCycles = db.OpenRecordset(strSql)

 While Not rstCycles.EOF

    if ... then
       rstCycles.Edit
       rstCycles("NoCycle1") = ...
       rstCycles.Update
    end if

    ''Need more information here
    RefreshPlanning (*)

    rstCycles.MoveNext
 Wend 
```

如果 dteCurrentDate 与今天相同，您可以说：

```
"SELECT * FROM tblCycles WHERE DatePlanning = Date()" 
```

# android - 为什么 viewpager 滑动缓慢？

> ID：12583057
> 
> 赞同：0
> 
> 时间：2012-09-25T12:34:30.237
> 
> 标签：android, android-layout, android-viewpager

我有一个`ViewPager`和`layouts`。布局有大约30张图片，左右滑动是正常的，但从最后一页滑动到第一页很慢。

很慢；

```
if (position == 0){
  ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setCurrentItem(pageCount-2,false); 
} else if (position == pageCount-1){ 
  ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setCurrentItem(1,false); 
} 
```

非常感谢，

我的页面适配器；

```
package com.example.pictures;

import android.content.Context;
import android.media.AudioManager;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MyPagerAdapter extends  PagerAdapter{

public int getCount() {
    return 30;
}

public Object instantiateItem(View collection, int position) {

    View view=null;

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.picture1;
        view = inflater.inflate(resId, null);         
        break;
    case 1:
        resId = R.layout.picture2;   
        view = inflater.inflate(resId, null);
        break;
    case 2:
        resId = R.layout.picture3;
        view = inflater.inflate(resId, null);
        break;
    case 3:
        resId = R.layout.picture4;
        view = inflater.inflate(resId, null);
        break;
    case 4:
        resId = R.layout.picture5;
        view = inflater.inflate(resId, null);   
        break;
    case 5:
        resId = R.layout.picture6;
        view = inflater.inflate(resId, null);
        break;
    .....
    .....

    }

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@SuppressWarnings("unused")
private Context getApplicationContext() {
    // TODO Auto-generated method stub
    return null;
}

private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("unused")
private Context getBaseContext() {
    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings("unused")
private PagerAdapter findViewById(int myfivepanelpager) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

public static Integer getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

OnPageChangeListener;

```
package com.example.pictures;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class Pictures extends Activity implements OnPageChangeListener{
SoundManager snd; 
int sound1,sound2,sound3;
View view=null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturespage);

 MyPagerAdapter adapter = new MyPagerAdapter();
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(15); 
 myPager.setOnPageChangeListener(this);
snd = new SoundManager(this);
 sound1 = snd.load(R.raw.sound1);
 sound2 = snd.load(R.raw.sound2);
 sound3 = snd.load(R.raw.sound3);

}
public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {
    // TODO Auto-generated method stub
      int pageCount = getCount(); 
        if (position == 0){ 
      ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
            myPager.setCurrentItem(pageCount-2,false); 
        } else if (position == pageCount-1){
       ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager); 
            myPager.setCurrentItem(1,false); 
        } 

    switch (position) {
    case 0:

        break;
    case 1:
        snd.play(sound1);
        break;
    case 2:
      snd.play(sound2);
        break;
    case 3:
      snd.play(sound3);
        break;
    case 4:
       Toast.makeText(this, "4", Toast.LENGTH_SHORT).show();
        break;
    case 5:
        Toast.makeText(this, "5", Toast.LENGTH_SHORT).show();
        break;
    ....
    ....
    }
}

public int getCount() { 
return count; 
} 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:41:17.863

不需要每次在 onPageSelected 中调用 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager)，只需要在 onCreate 中。使 ViewPager myPager 成为类字段，并在所有活动方法中使用相同的对象。

# multithreading - 使用 OpenCV 2.2 在不同线程中编写数百个 AVI 文件

> ID：12583058
> 
> 赞同：0
> 
> 时间：2012-09-25T12:34:32.767
> 
> 标签：multithreading, visual-c++, avi

我在 VC++ 下使用 OpenCV 2.2 编写了一个应用程序。我从不同的网络流中获取视频，并在单独的线程中逐帧写入 AVI 文件。视频流有数百个，我的应用程序将数百个文件写入磁盘，这非常重，有人可以告诉我优化的方法吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:08:21.397

哦亲爱的。我希望你有足够的内存。

编写多个文件真的很痛苦。您可以做的最好的事情是通过始终尽可能合理地写入尽可能大的 AVI 帧（最好是扇区大小的倍数）来减轻写入搜索。也许：

1) 一个“FrameBuf”帧缓冲类。在启动时创建一个 *FrameBuf 的垃圾负载并将它们汇集到生产者-消费者队列中。

2) 用于多个 *FrameBuf 实例的“FrameVec”容器类。您可能还需要汇集这些。

3) 用于将 *FrameVec 的内容写入磁盘系统的线程池。这将包含很少的线程，可能只有一个，以获得最佳的磁盘写入性能和很少的寻道。最好使线程数在运行时可配置/可更改，以优化整体吞吐量。最好让它全部可配置 - *FrameBuf 池的深度，每个 *FrameVec 中的 *FrameBuf 数量 - 一切。

如果可能，请使用 SSD。如果系统有任何“安静”时间，它可以将累积的 avi 移动到一个大的旋转器或网络磁盘，以便为下一个“忙碌”时间释放 SSD。

在移动各种实例时，请记住以下咒语：

“堆栈对象、复制 ctors、任何没有 * 坏的模板类”和“指针、池、指针容器好”。

祝你好运..

# windows-8 - 更新后清空 ProductLicenses 和 ProductListings 应用内购买

> ID：12583059
> 
> 赞同：2
> 
> 时间：2012-09-25T12:34:33.187
> 
> 标签：windows-8, in-app-purchase, windows-runtime

在我更新已发布的应用程序后，CurrentApp.LoadListingInformationAsync() 的结果不再返回应用内购买项目。

但是我可以看到返回对象的名称、CurrentMarket、AgeRating 和 FormattedPrice 已填充。

但是 ProductListings 中没有数据，CurrentApp.LicenseInformation.ProductLicenses 中也没有数据。在更新（第 1 版）之前，两个 Dictionary 对象都有项目。

有人有同样的问题还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T09:56:43.920

我有同样的问题，ProductListings 是空的。我已经应用了一个-希望是临时的-解决方法：

```
if (productListings.Count > 0)
{ //list your iap products normally
  //...
}
else
{//strange scenario we are dealing with
 //thankfully ProductLicenses is not empty

 var productLicenses = CurrentApp.LicenseInformation.ProductLicenses;
 foreach(ProductLicense pl in productLicenses.Values)
 {
    string key = pl.ProductId;
    bool isActive = pl.IsActive;
    //use the two above for your list
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:35:45.190

这个问题是暂时的。**它自己解决了**。

显然，这家商店还不是很稳定。

# sql - 如何有条件地加入表？

> ID：12583063
> 
> 赞同：1
> 
> 时间：2012-09-25T12:34:39.877
> 
> 标签：sql, sql-server-2005

我正在使用设计糟糕的数据库，但遇到了一些问题。

我有两个表需要加入“非唯一 ID”。如果出现错误，当前与数据库一起使用的软件会在 id 中设置一个“0 值”。这意味着如果我尝试加入它们，则会在 0 值上加入大量记录。

在两个表及其不唯一的 id 字段的示例下方，我想加入它们

```
tbl1    tbl2
-----------       
2        2
3        6
4        5
0        3
0        4
6        0
5        0
---------- 
```

我想要实现的是这个

```
tbl1    tbl2
-----------         
2        2
3        3
4        4
0        * (no join)
0        * (no join)
6        6
5        5
---------- 
```

换句话说，我不希望 tbl1 中的“0 值”与 tbl2 中的所有其他“0 值”连接。不过，我仍然希望在没有加入的情况下拥有记录 tbl1。

这可能在 1 个查询中吗？

额外信息：SQL SERVER 2005 并且没有使 ID 唯一的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:37:07.537

您没有向我们展示表格的完整结构，因此我需要编写一些列，但基本上是这样的：

```
select *
from tbl1
   join tbl2 
     on tbl1.id = tbl2.t1_id 
    and tbl1.that_flag <> 0 
```

请注意作为`and`条件一部分的`join`条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:42:19.463

```
SELECT tbl1.id, tbl2.id
FROM dbo.tbl1 
LEFT OUTER JOIN dbo.tbl2
ON tbl1.id = NULLIF(tbl2.id, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:44:05.463

这应该可以解决问题

```
SELECT * FROM tbl1
LEFT JOIN tbl2 ON tbl1.value = tbl2.value and tbl2.value <> 0 
```

这将为您输入的两个提供空值 *

# sonarqube - 无法通过网络访问声纳

> ID：12583065
> 
> 赞同：0
> 
> 时间：2012-09-25T12:34:46.497
> 
> 标签：sonarqube

我已经在 rhel 6.3 64 位机器上安装了声纳，但是当尝试使用“http://10.217.14.40:13385/sonar”通过 Web 访问应用程序时，我收到 HTTP 错误 503 服务不可用

以下是日志的最后 100 行

```
[root@RHEL-6 logs]# tail -100 sonar.log
INFO   | jvm 1    | 2012/09/25 07:58:21 | 07:58:21,136 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - ROOT level set to INFO
INFO   | jvm 1    | 2012/09/25 07:58:21 | 07:58:21,136 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [SONAR_FILE] to Logger[ROOT]
INFO   | jvm 1    | 2012/09/25 07:58:21 | 07:58:21,136 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@77435978 - Registering current configuration as safe fallback point
INFO   | jvm 1    | 2012/09/25 07:58:21 |
2012.09.25 07:58:21 INFO  o.s.s.p.ServerImpl  Sonar Server / 3.2 / d9303b2d9d4c1e75f8536e4144028f1999f727f4
2012.09.25 07:58:21 INFO  o.s.s.d.EmbeddedDatabase  Starting embedded database on port 9092 with url jdbc:h2:tcp://10.217.14.40:13384/sonar
2012.09.25 07:58:21 ERROR o.s.s.p.Platform  Unable to start database
org.sonar.api.utils.SonarException: Unable to start database
        at org.sonar.server.database.EmbeddedDatabase.start(EmbeddedDatabase.java:75) ~[classes/:na]
        at org.sonar.server.database.EmbeddedDatabaseFactory.start(EmbeddedDatabaseFactory.java:41) ~[classes/:na]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_07]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_07]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_07]
        at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_07]
        at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.behaviors.Stored.start(Stored.java:110) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002) ~[picocontainer-2.14.1.jar:na]
        at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760) ~[picocontainer-2.14.1.jar:na]
        at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:70) ~[sonar-plugin-api-3.2.jar:na]
        at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:166) ~[classes/:na]
        at org.sonar.server.platform.Platform.init(Platform.java:114) ~[classes/:na]
        at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33) [classes/:na]
        at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.jetty.Server.doStart(Server.java:224) [jetty-6.1.25.jar:6.1.25]
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
        at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:72) [sonar-application-3.2.jar:na]
        at org.sonar.application.StartServer.main(StartServer.java:48) [sonar-application-3.2.jar:na]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_07]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_07]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_07]
        at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_07]
        at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240) [wrapper-3.2.3.jar:3.2.3]
        at java.lang.Thread.run(Thread.java:722) [na:1.7.0_07]
Caused by: org.h2.jdbc.JdbcSQLException: Exception opening port "9092" (port may be in use), cause: "java.net.BindException: Address already in use" [90061-167]
        at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2-1.3.167.jar:1.3.167]
        at org.h2.message.DbException.get(DbException.java:158) ~[h2-1.3.167.jar:1.3.167]
        at org.h2.util.NetUtils.createServerSocketTry(NetUtils.java:190) ~[h2-1.3.167.jar:1.3.167]
        at org.h2.util.NetUtils.createServerSocket(NetUtils.java:156) ~[h2-1.3.167.jar:1.3.167]
        at org.h2.server.TcpServer.start(TcpServer.java:222) ~[h2-1.3.167.jar:1.3.167]
        at org.h2.tools.Server.start(Server.java:455) ~[h2-1.3.167.jar:1.3.167]
        at org.sonar.server.database.EmbeddedDatabase.start(EmbeddedDatabase.java:71) ~[classes/:na]
        ... 35 common frames omitted
Caused by: java.net.BindException: Address already in use
        at java.net.PlainSocketImpl.socketBind(Native Method) ~[na:1.7.0_07]
        at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376) ~[na:1.7.0_07]
        at java.net.ServerSocket.bind(ServerSocket.java:376) ~[na:1.7.0_07]
        at java.net.ServerSocket.<init>(ServerSocket.java:237) ~[na:1.7.0_07]
        at java.net.ServerSocket.<init>(ServerSocket.java:128) ~[na:1.7.0_07]
        at org.h2.util.NetUtils.createServerSocketTry(NetUtils.java:186) ~[h2-1.3.167.jar:1.3.167]
        ... 39 common frames omitted
INFO   | jvm 1    | 2012/09/25 07:58:21 | 2012-09-25 07:58:21.716:WARN::Failed startup of context org.mortbay.jetty.webapp.WebAppContext@1778db3{/,file:/home/BuildTools/sonar-3.2/war/sonar-server}
INFO   | jvm 1    | 2012/09/25 07:58:21 | org.sonar.api.utils.SonarException: Unable to start database
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.server.database.EmbeddedDatabase.start(EmbeddedDatabase.java:75)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.server.database.EmbeddedDatabaseFactory.start(EmbeddedDatabaseFactory.java:41)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at java.lang.reflect.Method.invoke(Method.java:601)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.behaviors.Stored.start(Stored.java:110)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:70)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:166)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.server.platform.Platform.init(Platform.java:114)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.jetty.Server.doStart(Server.java:224)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:72)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.sonar.application.StartServer.main(StartServer.java:48)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at java.lang.reflect.Method.invoke(Method.java:601)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
INFO   | jvm 1    | 2012/09/25 07:58:21 |       at java.lang.Thread.run(Thread.java:722)
INFO   | jvm 1    | 2012/09/25 07:58:21 | 2012-09-25 07:58:21.737:INFO::Started SelectChannelConnector@10.217.14.40:13385 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:20:25.630

正如您在日志中看到的，Sonar 无法启动，因为 H2 数据库无法启动。无法启动，因为 9092 端口已被使用：

```
Exception opening port "9092" (port may be in use), cause: "java.net.BindException: Address already in use" 
```

这意味着您已经有另一个使用此端口的进程 - 可能是另一个已经启动的 Sonar 实例......

# jquery - jquery toggle 仅适用于部分 div

> ID：12583068
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:34:52.007
> 
> 标签：jquery, html, css

我有一个关于 jquery 切换的问题。

好像不包括技能。

```
<section class="ResumeItem">
      <header class="ResumeContentTitle" id="ResumeKnowledgeHeader">
          <p>Professional Knowledge</p>
      </header>
      <section class="skills">
           <header>
               <h3>Strong Skills</h3>
           </header>
           <ul>
               <li>PHP</li>
               <li>jQuery</li>
               <li>SQL</li>
               <li>Ajax</li>
               <li>HTML</li>
               <li>CSS</li>
            </ul>
      </section>

      <section id="ResumeKnowledge" class="ResumeContentText">
            <ul>
               <li>PHP – Expert Strong level. Worked with this technology for over a year.</li>
            </ul>
      </section>
</section> 
```

JavaScript：

```
$(function(){
   $('.ResumeContentTitle').click(function(){
      var id = $(this).attr('id').split('Header');
      $('#'+id[0]).toggle("slow");
   });
}); 
```

这是一个例子：http: [//jsfiddle.net/ohadpartuck/R2cEd/](http://jsfiddle.net/ohadpartuck/R2cEd/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:37:52.210

技能没有被选择，因为你没有包括他们只是包括他们

工作小提琴[http://jsfiddle.net/swamimayank/ghQxp/](http://jsfiddle.net/swamimayank/ghQxp/) 或[http://jsfiddle.net/swamimayank/hNKpq/](http://jsfiddle.net/swamimayank/hNKpq/)

```
$(function(){
   $('.ResumeContentTitle').click(function(){

      $(".skills ,.ResumeContentText").toggle("slow");

   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:02:27.617

我认为您的代码旨在用于其他盒子，其他答案不会真正帮助您。

我所做的是在技能部分添加了一个 ID，并将其添加到 javascript 到 ID 的第一部分将取自您所做的单击的 div，但我已将单词技能添加到末尾所以它也会隐藏它。

HTML

```
<section class="ResumeItem">
                    <header class="ResumeContentTitle" id="ResumeKnowledgeHeader">
                        <p>Professional Knowledge</p>
                    </header>
                    <section class="skills" id="ResumeKnowledgeSkills">
                        <header>
                            <h3>Strong Skills</h3>
                        </header>
                        <ul>
                            <li>PHP</li>
                            <li>jQuery</li>
                            <li>SQL</li>
                            <li>Ajax</li>
                            <li>HTML</li>
                            <li>CSS</li>
                        </ul>
                    </section>

                    <section id="ResumeKnowledge" class="ResumeContentText">

                        <ul>
                            <li>PHP – Expert Strong level. Worked with this technology for over a year.</li>

                        </ul>
                    </section>
                </section>​ 
```

JavaScript

```
$(function(){
   $('.ResumeContentTitle').click(function(){
      var id = $(this).attr('id').split('Header');
      $('#'+id[0]).toggle("slow"); 
      $('#'+id[0]+'Skills').toggle("slow"); 
   });

});​ 
```

jsFiddle [http://jsfiddle.net/R2cEd/10/](http://jsfiddle.net/R2cEd/10/)

# asp.net - 在iphone应用程序中登录aspx

> ID：12583071
> 
> 赞同：0
> 
> 时间：2012-09-25T12:35:03.013
> 
> 标签：asp.net, ios, xcode, login, forms-authentication

我在 php 和 html 方面有一些经验，但在 ASP.net 方面没有经验。

这是我经过 6 个月的学习后构建的第一个应用程序`objective-c/x-code`。我想解析来自网站的数据，但首先我需要登录才能查看数据。

*   登录部分是我卡在的第一件事，我不知道如何登录。

如果我检查网站来源，这就是我得到的。有人有线索吗？

```
<fieldset id="popupLoginForm" class="wnSignIn">
    <div>
        <h3>Login</h3>
        <a id="lnkForgotPassword" class="wnForgotPassword wnPopupTrigger" href="/Popups/ForgotPasswordPopup.aspx?parentSecure=false&amp;parentUrl=/wwf.aspx">Forgot password ?</a>
    </div>
    <div>
        <input name="txtLoginPopup" type="text" id="txtLoginPopup" title="RegNr" class="wnTextField autoTextInit">
    </div>
    <div>
        <span id="rfvLogin" class="validation" style="color:Red;display:none;">Fill in the regNR</span>
        <span id="revLogin" class="validation" style="color:Red;display:none;">Reg NR not correct.</span>
    </div>
    <div>
        <input name="txtPasswordPopup" type="password" id="txtPasswordPopup" title="Pass" class="wnTextField autoTextInitPassword" style="display: none; ">
        <input style="" value="Pass" class="wnTextField autoTextInitPasswordLabel">
        <span id="revPassword" class="validation" style="color:Red;display:none;">Fill in password</span>
    </div>
    <div id="divbtnPopupLogin">
        <a id="btnPopupLogin" class="wnButton">
            <span>Login</span>
        </a>
    </div>      
</fieldset> 
```

# java - 在 Spring webapp 中运行 JUnit 测试时指定 Maven 配置文件

> ID：12583073
> 
> 赞同：1
> 
> 时间：2012-09-25T12:35:08.693
> 
> 标签：java, spring, unit-testing, maven, junit

**背景**

/pom.xml

```
...
<properties>
    ...
    <jdbc.driver>com.mysql.jdbc.Driver</jdbc.driver>
    <jdbc.url>jdbc:mysql://${database.host}/${database.name}</jdbc.url>
    <jdbc.user>${database.user}</jdbc.user>
    <jdbc.password>${database.password}</jdbc.password>
    ...
</properties>
...
<profiles>
    <profile>
        <id>dev</id>
        <properties>
            ...
            <database.name>database</database.name>
            <database.host>localhost</database.host>
            <database.user>root</database.user>
            <database.password></database.password>
            ...
        </properties>
    </profile>
</profiles>
... 
```

/src/main/resources/database.properties

```
...
jdbc.driver=${jdbc.driver}
jdbc.url=${jdbc.url}
jdbc.user=${jdbc.user}
jdbc.password=${jdbc.password}
... 
```

/src/main/resources/spring/applicationContext.xml

```
<beans ... xmlns:p="http://www.springframework.org/schema/p" ...>
    ...
    <bean
        id="dataSource"
        ...
        p:driverClassName="${jdbc.driver}"
        p:url="${jdbc.url}"
        p:username="${jdbc.user}"
        p:password="${jdbc.password}"
        ... />
    ...
</beans> 
```

/src/ **test** /java/com/company/project/service/MyItemServiceImplTest.java

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "/spring/applicationContext.xml" })
public class MyItemServiceImplTest {

    @Resource
    private MyItemService myItemService;

    @Test
    public void testSave() {
        MyItem myItem = new MyItem();
        myItemService.save(myItem);
        ...
    }

} 
```

**问题**

运行测试时，它会引发异常：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
...
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [spring/applicationContext.xml]: Could not resolve placeholder 'database.password'
... 
```

我想这是因为我需要在指定`dev`配置文件的同时运行测试，就像我在启动 webapp 时所做的那样（使用`-P dev`）。但我不能让它工作。甚至可能吗？

**附言**

过滤后的 applicationContext.xml 文件（即 /target/classes/spring/applicationContext.xml 中的那个）与 /src/* 中的相同，但过滤后的 database.properties 文件（即 /target/classes/database.properties ） 好像

```
jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://${database.host}/${database.name}
jdbc.user=${database.user}
jdbc.password=${database.password} 
```

这意味着从 pom.xml 文件到 .properties 文件，属性已被很好地过滤，但在 pom.xml 本身中，依赖于所选配置文件的属性不会被过滤。可能是因为我想在启动测试时在任何地方指定我需要的配置文件。但正如我之前所说，`-P dev`似乎不适用于 JUnit ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:14:46.067

在[`process-resources`](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)阶段执行资源过滤。因此，如果您声明`mvn test -Pdev`您将通过该阶段并且所有过滤都已完成。对于 JUnit，您正在运行什么配置文件并不重要，因为您在该`dev`配置文件中没有做任何其他不同的事情。

# wcf - 什么是好的 ASP & WCF 主机？

> ID：12583079
> 
> 赞同：1
> 
> 时间：2012-09-25T12:35:34.623
> 
> 标签：wcf, asp.net-mvc-2, hosting

目前我是 ASP 和 WCF 的新手，但我真的很喜欢它，我想购买一些在线托管来让自己开始。

有谁知道一个价格不高且支持 WCF 和 ASP .NET MVC 的好主机？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:34:48.093

如果您只是在学习：Azure 托管是一个不错的选择。它需要您了解一些有关 Azure 和云计算的知识。但是文档很好，它支持您所要求的一切，并且您的前 10 个“小型”网站是免费的。

[Azure 免费试用](http://www.windowsazure.com/en-us/pricing/free-trial/)

# c++ - 使用 boost 库的 C++ 库

> ID：12583080
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:35:41.630
> 
> 标签：c++, boost, header

我写了一个test.cpp：

```
 #include <iostream>
      #include <stack>
      #include <boost/lexical_cast.hpp>
      #include <boost/config/warning_disable.hpp>
      #include <boost/spirit/include/qi.hpp>
      #include <boost/spirit/include/phoenix.hpp>

      using namespace std;
      namespace phoenix = boost::phoenix;
      namespace qi = boost::spirit::qi;
      namespace ascii = boost::spirit::ascii;

     struct calculator
     {
      bool interpret(const string& s);
      void do_neg();
      void do_add();
       void do_sub();
      void do_mul();
        void do_div();
        void do_number(const char* first, const char* last);
          int val() const;
      private:
      stack<int> values_;
      int *pn1_, n2_;
      void pop_1();
      void pop_2();
      };
     ......................
     .................... 
```

但是当我使用 g++ test.cpp -o test 时，会出现类似的错误`boost/lexical_cast.hpp: No such file or directory`，但是我已经将 boost 中的所有文件（从 boost.org 下载）复制到 test.cpp 文件夹，如何让 g++ 知道标头路径？谢谢

我用了`g++ test.cpp -o test`

使用`" "`是不可能的，我有很多头文件的依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:46:18.507

您必须确保将包含修改为 g++ 的命令。从手册页阅读（这是你最好的朋友）：

```
Add the directory dir to the list of directories to be searched for
header files.  Directories named by -I are searched before the
standard system include directories.  If the directory dir is a
standard system include directory, the option is ignored to ensure
that the default search order for system directories and the
special treatment of system headers are not defeated .  If dir
begins with "=", then the "=" will be replaced by the sysroot
prefix; see --sysroot and -isysroot. 
```

对您而言，命令应如下所示：

```
g++ -I path/to/boost test.cpp 
```

# http - HTTP 发布、获取和变量

> ID：12583082
> 
> 赞同：0
> 
> 时间：2012-09-25T12:35:47.023
> 
> 标签：http, post, get

如何准确监控浏览器使用 GET 和/或 POST 方法向网页发送的信息？我的意思不仅是参数的名称，还有值。

```
F.eks.: http://somesite.com/?user=name&password=pass 
```

当我使用用户名和密码表单登录网站时，我想知道表单 post/get 操作发送到的 URL，以及变量的名称（上图：用户、密码）以及值（上图：姓名、通行证）。

这个最简单的怎么实现？使用像 WireShark 这样的包嗅探器？使用本地代理服务器？

非常感谢所有建议，以及具体的应用程序和有关如何获取准确信息的快速介绍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:37:09.050

那么最简单的方法是使用开发人员工具。

Chrome 和 IE 中的 F12 和 Firefox 中的 Firebug。

如果您想要更深入的东西，请尝试[提琴手](http://www.fiddler2.com/fiddler2/)

# grails - 根据用户角色隐藏内容？

> ID：12583083
> 
> 赞同：4
> 
> 时间：2012-09-25T12:35:47.510
> 
> 标签：grails, spring-security

我目前正在 Grails 中开发一个 Web 应用程序，我正在寻找一种方法来隐藏基于当前用户登录到解决方案的菜单。

为了给你一些背景知识，这是我设置的

1.  具有映射的用户模型和角色模型的 Web 应用程序
2.  根据用户访问限制某些控制器的登录功能。
3.  我有显示在每个页面上的菜单。

我知道如何将控制器限制为仅允许有权查看它的用户，但我现在想限制如下所示的菜单，除非正确的用户已登录，否则我该怎么做？它与从控制器渲染该元素有关吗？

```
<div class="nav">
  <ul class"nav">
    <li>
      <g:link class="Tester" controller="Testing" action="test">
        <g:message code="Tester" args"[entityName]" />
      </g:link>
    </li>
    <li>
      <g:link class="Tester2" controller="Testing" action="test2">
        <g:message code="Tester2" args"[entityName]" />
      </g:link>
    </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T12:42:30.103

spring-security-core 插件提供了一个[taglib](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.1%20SecurityTagLib)可以帮助你

```
<sec:ifAnyGranted roles="ROLE_TESTER">
  <div class="nav">
    ...
  </div>
</sec:ifAnyGranted> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T03:51:24.637

伊恩很好地回答了您的问题，但我们应该在此处添加以保护服务器端控制器/操作，例如：

```
// At the controller level
@Secured(["hasRole('User')"])
class Testing

  // action specific
  @Secured(["hasAnyRole('SuperUser', 'Support', 'InternalUser')"])
  def test() {
      ...
  } 
```

否则，链接只是隐藏在视图之外，但仍然可以由任何人执行。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:49:10.900

如果您不使用 spring-security-core 插件，则可以实现以下

```
<g:if test="${userHaveRightRole}">
 <div class="nav">
    ...
  </div>
</g:if> 
```

# datagridview - 过滤非 SQL DataGridView

> ID：12583084
> 
> 赞同：0
> 
> 时间：2012-09-25T12:35:49.367
> 
> 标签：datagridview, filtering

你好 StackOverFlow 伙计们，

我已经看到了几种使用从 SQL 查询中检索到的信息来过滤 DataGridView 的方法。但是我被困在过滤非 SQL DataGridView 中。

我实际上有以下DataGridView：

程序 | 项目 | 问题 | 风险

我想只显示问题高于 0 的行。

有人有想法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:18:40.447

好吧，我仍然找不到以这种方式解决的方法，但是我找到了一个合理的解决方法。

我只是没有添加问题= 0的寄存器......

它可能不是开箱即用或最佳实践，但对我来说效果很好。

# c++ - 我可以为包含向量的 C++ 结构进行单个二进制写入吗

> ID：12583085
> 
> 赞同：1
> 
> 时间：2012-09-25T12:35:50.050
> 
> 标签：c++, struct, stdvector

我正在尝试构建和编写一个二进制请求并有一个“这可能”类型的问题。对我来说重要的是要提到请求的接收者不知道我在下面包含的数据结构，它只是期望一个字节序列，但是使用结构似乎是准备请求片段的一种方便方法，然后轻松地编写它们。

编写页眉和页脚很好，因为它们是固定大小的，但是由于矢量，我遇到了结构“详细信息”的问题。现在我正在写入一个文件，所以我可以检查请求是否符合规范，但目的是最终使用 boost asio 串行端口写入 PLC

我可以使用这样的语法来编写一个结构，但是当它到达向量时会写入指针地址而不是值

```
myFile.write((char*) &myDataRequest, drSize); 
```

我可以使用此语法自行编写向量，但我必须在 0 处包含索引器才能写入值

```
myFile.write((char*) &myVector[0], vectorSize); 
```

有没有一种优雅的方法来二进制编写一个包含向量（或其他合适的集合）的结构，一次完成？例如，如果我以不同的方式声明了向量，或者我是否愿意为结构内的内容进行多次写入。如果我用数组替换向量，我可以一次性发送结构（不需要包含任何索引器），但直到运行时我才知道所需的大小，所以我认为它不合适。

我的结构

```
 struct Header
    {   ...     };

    struct Details
    {
           std::vector<DataRequest> DRList;
    };

    struct DataRequest
    {
           short numAddresses;          // Number of operands to be read   Bytes 0-1
           unsigned char operandType;   //                                  Byte 2
           unsigned char Reserved1;     //Should be 0xFF                    Byte 3
           std::vector<short> addressList;  // either, starting address (for sequence), or a list of addresses (for non-sequential) 
    };

    struct Footer
    {   ...     }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:42:41.313

这是不可能的，因为该`std::vector`对象实际上并不包含一个数组，而是一个指向内存块的指针。但是，我很想声称能够编写这样的原始结构是不可取的：

1.  我相信通过将结构视为一块内存，您最终可能会发送填充字节，我认为这是不可取的。

2.  根据您写入的内容，您可能会发现写入无论如何都会被缓冲，因此多次写入调用实际上并没有降低效率。

3.  您可能想对发送过来的字段做*一些事情。*特别是，对于您发送的数值。这需要强制执行传输双方都同意的字节顺序。为了便于移植，您应该明确转换字节顺序以确保您的软件是可移植的（如果需要的话）。

长话短说：我怀疑一个一个地写出每个字段的效率并没有降低，它也更正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:42:12.157

这不是一个真正的好策略，因为即使您可以这样做，您也会将内存内容直接复制到文件中。如果您更改架构/处理器，您的客户将获得不同的数据。如果您编写一个采用结构和文件名的方法，该方法单独写入结构值并遍历向量写出其内容，您将完全控制客户端期望的二进制格式，并且不依赖于编译器当前内存表示。

如果你想方便编组/解组，你应该看看[boost::serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)库。他们确实提供了二进制存档（除了文本和 xml），但它有自己的格式（例如，它有一个版本号，用于转储数据的序列化库）所以它可能不是您的客户想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:51:43.320

另一端预期的格式到底是什么？你必须写那个，期间。你不能只写任何随机字节。只写一个你正在做的事情的概率`std::vector`大约是你能得到的接近于 0 的概率。`struct`但是只写一个 with会起作用的概率 `int`仍然低于 50%。如果对方期望一个特定的字节序列，那么您必须逐字节地编写该序列。例如，要编写一个`int`，您仍然必须编写四个（或任何协议要求的）字节，例如：

```
byte[0] = (value >> 24) & 0xFF;
byte[1] = (value >> 16) & 0xFF;
byte[2] = (value >>  8) & 0xFF;
byte[3] = (value      ) & 0xFF; 
```

（即使在这里，我假设您对负数的内部表示对应于协议的表示。通常是这种情况，但并非总是如此。）

当然，通常情况下，您在 a 中构建缓冲区`std::vector<char>`，然后写入`&buffer[0], buffer.size()`. （你需要一个缓冲区指针的事实 `reinterpret_cast`应该表明你的方法是错误的。）

# html - 使用模板将从数据库（记录集）读取的数据转换为 HTML 的最佳方法是什么

> ID：12583086
> 
> 赞同：1
> 
> 时间：2012-09-25T12:35:49.347
> 
> 标签：html, xml, xslt, transformation

我在数据库中有一些数据需要用来生成 HTML 文件。HTML 文件的格式总是相同的，即它总是看起来像这样

```
 -----------------------------------------
                                        |
[Header]                                |
- Advertising banner                    |
                                        |
[Body]                                  |
                                        |
----------------------------------      |
Content column  | content column |      |
Content column  | content column |      |
Content column  | content column |      |
----------------------------------      |
Content column  | content column |      |   
Content column  | content column |      |
----------------------------------      |
                                        |
[Footer]                                |   
                                        |
- Copyright information etc             |
                                        |
----------------------------------------- 
```

我将从数据库表中读取的数据将使用 JDBC 读取。我知道我可以通过使用标签手动编码 HTML 源代码来生成 HTML 文件，但我确信这不是正确的做法。

是否有某种模板机制，其中我有一个 HTML 文件的模板，它可能有内容部分的占位符，然后我可以在从数据库中读取内容后在运行时更新。

我认为 XSLT 是专门为此目的而创建的，但在 Google 看来，XSLT 似乎是用于将 XML 转换为其他格式，这不是我想要的。我可能可以将从数据库中读取的数据转换为 XML 并使用 XSLT，但这似乎是一个额外的不必要的处理层。

解决此类问题的通常/常见方法是什么？

我更喜欢使用 Spring/Maven，但对其他建议持开放态度。

谢谢

## 编辑

另外，请注意生成的 HTML 文件不用于在浏览器/网络上显示。它显示在电子邮件中。每天都会生成一个新的 HTML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:55:10.340

我的建议是使用 XSLT - 许多 DB 已经可以将结果生成为 XML，或者您可以轻松编写代码以将 SQL 查询结果转换为简单的 XML：

```
<table>
  <row>
     <firstColumn>...</firstColumn>
     <secondColumn>...</secondColumn>
     . . . 
  <row>
  . .  .
</table> 
```

一旦您使用 XSLT 获得了这个 XML，您就可以以一种标准的、得到良好支持且非常灵活的方式生成任何 HTML（或许多其他格式）。

# c# - 动态添加表单字段，然后将它们保存起来

> ID：12583087
> 
> 赞同：1
> 
> 时间：2012-09-25T12:36:01.193
> 
> 标签：c#, jquery, asp.net, ajax, forms

我有一个用于捕获特定任务数据的 asp.net 表单页面，任务项将以表格方式显示。此任务中可能包含许多项目，我希望为此动态添加适当的表单字段。然后我需要从表单中“保存”数据。

我想知道解决这个问题的最简单方法是什么。

我计划生成一个“起始”行，然后根据需要使用 jQuery 克隆它（同时稍微重命名输入）。唯一的问题是，根据任务项的类型，表单字段会略有不同。这意味着要从一个非常复杂的“启动器”行开始，并且在 js 中包含相当多的代码以及克隆 - 或者我猜想持有每种“类型”的启动器行，隐藏在页面上的某个位置并将它们克隆到生活中有必要的

或者可能为每个使用 append(...html...) 的任务类型提供一个 js 函数

我试图避免使用更新面板——在其中我可以在后面的代码中生成所有新字段，但也许这样会更简单？

但除此之外，当我真的想保存数据时，假设唯一的方法是使用 Request.Form 集合？

对你们如何处理这件事很感兴趣，因为尽量不要让自己很难受。

谢谢

纳特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:50:21.867

如果您使用 JQuery 构建 UI，为什么不通过由 JQuery $.ajax 命令调用的 Web 服务将最终结果发送回服务器？这样，您就不需要在每次回发后从客户端代码重建 UI，这将是在客户端构建内容但从每个响应回发的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:59:03.417

看起来您的表单本质上是非常动态的。在服务器端创建所有这些动态控件可能会变得非常混乱，尤其是因为您必须在服务器和客户端上都使用它。

另一种方法是在客户端完成所有与 html 相关的操作，只将数据处理留给服务器，使用 json 作为数据格式。

我刚开始使用[Angular](http://angularjs.org)，我印象非常深刻。

# asp.net - 产生了错误的 URL 地址？

> ID：12583090
> 
> 赞同：0
> 
> 时间：2012-09-25T12:36:15.637
> 
> 标签：asp.net, html

我在`<a>`标签中使用了真实的 URL 地址，但是在运行我的项目时产生了错误的 URL 地址！为什么？
这是代码：

```
<ul id="accordion">
 <li>
     <div> صفحه اصلی</div>
     <ul>
         <li><a href="Default.aspx">بازگشت به صفحه اصلی</a></li>
     </ul>
 </li>
 <li>
     <div>عملیات مربوط به واحدها</div>
     <ul>
         <li><a href="Units/Reports/SelledUnitReport.aspx">گزارش واحدهای فروخته شده</a></li>
         <li><a href="Units/Reports/BlockedUnitReport.aspx">گزارش واحدهای بلوکه شده</a></li>
         <li><a href="Units/Reports/ReservedUnitReport.aspx">گزارش واحدهای رزرو شده</a></li>
         <li><a href="Units/Reports/FreeUnitReport.aspx">گزارش واحدهای قابل فروش</a></li>
         <li><a href="Units/UnitStateForm.aspx">تعیین وضعیت یک واحد</a></li>
     </ul> 
... 
```

当运行该页面时，我看到了一个神奇的 URL！
![在此处输入图像描述](../Images/df7701446b3c0ddcde68ea189e56ec6e.png)

你能告诉我为什么会出现这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:38:57.337

这是因为你试图通过链接打开的页面和你的 default.aspx 页面在同一个目录（reports 目录），所以给文件夹名称是错误的，只需给页面名称为

```
 <ul>
     <li><a href="SelledUnitReport.aspx">گزارش واحدهای فروخته شده</a></li>
     <li><a href="BlockedUnitReport.aspx">گزارش واحدهای بلوکه شده</a></li>
     <li><a href="ReservedUnitReport.aspx">گزارش واحدهای رزرو شده</a></li>
     <li><a href="FreeUnitReport.aspx">گزارش واحدهای قابل فروش</a></li>
     <li><a href="UnitStateForm.aspx">تعیین وضعیت یک واحد</a></li>
 </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:37:59.363

您正在使用相对 URL，浏览器会*相*对于当前页面 URL 解析该相对 URL。

您想使用以 . 开头的绝对 URL `/`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:40:09.823

您已经在文件夹单元/报告中并尝试再次转到子文件夹。

它是一个相对 URL。

也许只是删除子文件夹的名称？或者使用绝对 URL。

# xml - xml 文档的查询节点 - Visual Basic

> ID：12583094
> 
> 赞同：0
> 
> 时间：2012-09-25T12:36:45.200
> 
> 标签：xml, vb.net

我有一个我试图阅读的 XML 文档，但我的查询一直没有返回任何结果。我使用的查询是...

```
Dim products = From product In doc.Descendants("DeviceInstance") _
    Select product.Attribute("ProductRefId").Value

For Each result In products
    MessageBox.Show(result.ToString())
Next 
```

我哪里错了？？

xml见下文

```
<?xml version="1.0"?>
<KNX xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://knx.org/xml/project/10" CreatedBy="knxconv" ToolVersion="4.0.1004.62808">
  <Project Id="P-0225">
    <Installations>
      <Installation Name="" InstallationId="0">
        <Topology>
          <Area Id="P-0225-0_A-734" Name="East" Address="1" Description="">
            <Line Id="P-0225-0_L-736" Name="Ground" Address="1" MediumTypeRefId="MT-0" Comment="" Description="">
              <DeviceInstance Name="" Id="P-0225-0_DI-761" ProductRefId="M-0064_H-MTN647893-1-O000C_P-MTN647893" Hardware2ProgramRefId="M-0064_H-MTN647893-1-O000C_HP-480B-21-4CB2-O000C" Address="5" Comment="" LastModified="2012-07-04T19:27:44" LastDownload="2012-08-22T11:27:40" InstallationHints="" IndividualAddressLoaded="true" ApplicationProgramLoaded="true" ParametersLoaded="true" CommunicationPartLoaded="true" MediumConfigLoaded="true" Description="SWA1101" IsCommunicationObjectVisibilityCalculated="true">
                <ParameterInstanceRefs>
                  <ParameterInstanceRef RefId="M-0064_A-480B-21-4CB2-O000C_P-1_R-1" Value="0"/>
                  <ParameterInstanceRef RefId="M-0064_A-480B-21-4CB2-O000C_P-2834_R-2834" Value="0"/>
                  <ParameterInstanceRef RefId="M-0064_A-480B-21-4CB2-O000C_P-2835_R-2835" Value="0"/>
                </ParameterInstanceRefs>
                <ComObjectInstanceRefs>
                  <ComObjectInstanceRef RefId="M-0064_A-480B-21-4CB2-O000C_O-31_R-243" IsActive="true">
                  </ComObjectInstanceRef>
                  <Connectors>
                    <Send GroupAddressRefId="P-0225-0_GA-128"/>
                  </Connectors>
                </ComObjectInstanceRefs>
              </DeviceInstance>
            </Line>
          </Area>
        </Topology>
      </Installation>
    </Installations>
  </Project>
</KNX> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:42:54.930

Almost equivalent to @Sean Bright's answer (except slightly less general):

```
Imports <xmlns="http://knx.org/xml/project/10">

...

Dim products = doc...<DeviceInstance>.Select( _
                   Function(product) product.@ProductRefId) 
```

The LINQ only solution is also possible (effectively combining my solution with Sean's):

```
Imports <xmlns="http://knx.org/xml/project/10">

...

Dim products = From product In doc...<DeviceInstance> _
                   Select product.@ProductRefId 
```

(This is untested.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:11:28.803

尝试这个：

```
Dim ns = doc.Root.GetDefaultNamespace()

Dim products = From product In doc.Descendants(ns + "DeviceInstance") _
    Select product.Attribute("ProductRefId").Value 
```

# axis2 - wso2 esb 不支持的媒体类型

> ID：12583097
> 
> 赞同：2
> 
> 时间：2012-09-25T12:37:05.823
> 
> 标签：axis2, wso2, esb, wso2esb

我希望我的公司使用 Wso2ESB，但是我只剩下两天时间说服他们，并且创建 Proxy 不起作用！

我迫切需要真正的帮助来解决我的问题：我创建的每个代理似乎都会产生

```
HTTPSender Unable to sendViaPost to... 
```

（为什么无法发送？）

```
Transport error: 415 Error: Unsupported Media Type 
```

（是无法发送的结果吗？还是配置有问题？）

我全新安装的 WSO2 ESB 4.5 不适用于我尝试过的任何 Web 服务：JAXWS 和 C#。我总是有以下消息LOG：

```
[2012-05-09 08:42:19,381]  INFO - LogMediator To: /services/NET.NETHttpSoap12Endpoint, WSAction: http://tempuri.org/Iuser/CheckUserExistsSimple, SOAPAction: http://tempuri.org/Iuser/CheckUserExistsSimple, MessageID: urn:uuid:6e46c985-3646-4441-ba8d-0c366c063c4b, Direction: request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><p:CheckUserExistsSimple xmlns:p="http://tempuri.org/"><!--0 to 1 occurrence--><p:User>-</p:User></p:CheckUserExistsSimple></soapenv:Body></soapenv:Envelope>
[2012-05-09 08:42:19,437]  INFO - HTTPSender Unable to sendViaPost to url[http://192.168.10.177:8280/services/NET.NETHttpSoap12Endpoint]
org.apache.axis2.AxisFault: Transport error: 415 Error: Unsupported Media Type
        at org.apache.axis2.transport.http.HTTPSender.handleResponse(HTTPSender.java:308)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:194)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:450)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:277)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
        at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
        at org.apache.jsp.admin.jsp.WSRequestXSSproxy_005fajaxprocessor_jsp._jspService(WSRequestXSSproxy_005fajaxprocessor_jsp.java:272)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
        at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:58)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:179)
        at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:49)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Unsupported Media Type[2012-05-09 08:44:32,644]  WARN - ClientHandler I/O error : Connection reset by peer For : 192.168.10.71:80 
```

这是代理定义：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="NET" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="useOriginalwsdl" value="true" scope="default" type="STRING"/>
         <log level="full"/>
      </inSequence>
      <outSequence>
         <send/>
      </outSequence>
      <endpoint>
         <address uri="omitted"/>
      </endpoint>
   </target>
   <publishWSDL uri="omitted?wsdl"/>
   <description></description>
</proxy> 
```

当我尝试使用 soapUI 调用代理服务时，我收到以下消息：

`Error loading [NET?xsd=...?xsd=xsd0]: java.io.IOException: Attempted read from closed`溪流

但是如果我直接在 Glassfish/IIS 上调用真正的服务，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:51:45.427

这是因为您在请求中发送了不受支持的消息类型，并且它与 ESB 的任何消息类型都不兼容。

您能否将 TCPmon 放置在您的客户端和 ESB 之间并捕获整个消息并检查您实际发送到 ESB 的内容？

您的 wsdl 是否导入任何模式？..如果您使用发布 wsdl 选项，您应该提供所有模式..

首先最好不要使用发布 wsld 选项，首先尝试将消息发送到代理并查看服务是否正在接收

# java - 当变量为整数时如何打印变量的类型 - 错误

> ID：12583103
> 
> 赞同：0
> 
> 时间：2012-09-25T12:37:20.983
> 
> 标签：java

我目前正在使用 Objectdb 和我使用 NetBeans 进行项目。我想要一个可以出现此消息的 myString 方法：变量类型是 int。当我从另一个主类调用对象驱动程序时[

```
 import javax.persistence.*;
 import java.util.*;
 //import javax.jdo.*;
 import java.sql.*;

 public class Main { 

public static void Element(Object obj){
    System.out.println(obj);
}//end method Element

 public static void main(String[] args) {

 Element(Driver);

}//end main 
```

] 当然，我不想准确地输入这个东西，所以我可以打印它，但是我想要一个方法，如果它是一个整数，它可以返回 int，如果它是 String 等，它可以返回 String 等。 **当涉及到一个 String 变量时，它是行。但是当我有一个整数时，它会显示消息“int cannot be dereferenced”，因此编译器不会通过它。** 这是一种正确解决问题的方法吗？这很重要，所以提前感谢。

```
import javax.persistence.*;
import java.util.*;

@Entity
public class Driver{    

@Id 
    private int Driverid;

    public void setDriverid(int Driverid) {
        this.Driverid= Driverid;
    }

    public int getDriverid() {
        return Driverid;
    }

public Driver(int getDriverid){
        this.Driverid=Driverid; 
}

public String toString() {
        return  "Variable type is " + Driverid.getClass.getSimpleName() + "." ;
}//end toString

}//end class Driver 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:40:24.403

我不确定你为什么要在运行时确定编译时已知的东西，但你可以使用反射。

```
public String toString() {
    return "Variable type is " + getDeclaredFields()[0].getType().getSimpleName() + "." ;
} 
```

toString() 打印

```
Variable type is int. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:38:36.307

尝试使用`Integer`类而不是`int`. int 是原始类型， Integer 不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:39:58.600

您可以检查实例类型：

```
if(object instanceof Integer){...}
else if(object instanceof String){...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:40:33.243

当然你不能调用`getClass()`任何`Primitive Type`......你可以声明你的`DriverId`as `Integer`，并让它工作..

# javascript - 如何在另一个函数中使用 $(this) 引用？

> ID：12583105
> 
> 赞同：0
> 
> 时间：2012-09-25T12:37:34.520
> 
> 标签：javascript, jquery, jquery-selectors, this

我有一个这样的案例-

```
$('<first-selector>').each(function(){
    $(this).click(function(){
        $('<second-selector>').click(function(){
           /* Here I want to use the top $(this) reference to do some business. 
              I don't want to use like var thisObj = $(this) and refer it inside          
              the click function*/
        });
    });
}); 
```

如何`$(this)`在另一个对象中使用引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:47:52.600

使用[$.proxy](http://api.jquery.com/jQuery.proxy/)

```
$('div').each(function(){
    $(this).click(function(){
        $('p').click($.proxy(function(){
           console.log($(this)); // returns <div>
           /* Here I want to use the top $(this) reference to do some business. 
              I don't want to use like var thisObj = $(this) and refer it inside          
              the click function*/
        }, this));
    });
}); 
```

演示：http: [//jsfiddle.net/TRw4X/](http://jsfiddle.net/TRw4X/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:44:28.330

所以你想在第二个函数中使用第一个函数中的 $(this) 并将其称为 $(this)？这是不可能的，因为 jQuery 维护了 this-context。你必须用这样的东西运行：

```
$('<first-selector>').each(function()
{
    var first = $(this);

    first.click(function()
    {
        $('<second-selector>').click(function()
        {
            var second = $(this);
            // do something with first and second.
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:44:39.047

虽然这不是最好的解决方案（因为您应该像其他解决方案建议的那样通过变量引用它）......如果第二个选择器是第一个选择器的孩子，您始终可以使用 parent() 方法。

```
$('<first-selector>').each(function(){
    $(this).click(function(){
        $('<second-selector>').click(function(){
          /*$(this) is now referencing <second-selector> and by adding parent() it will go up the elements until it find the requested selector*/
          $(this).parents('<first-selector>').doSomething();
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:45:55.220

您可以在 jQuery 事件中传递对象的引用。

```
$('<first-selector>').each(function(){
    $(this).click($(this),function(){
        $('<second-selector>').click(function(e){
           var $elem = e.data.
           /* Here I want to use the top $(this) reference to do some business. 
              I don't want to use like var thisObj = $(this) and refer it inside          
              the click function*/
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T12:46:09.260

“解决”您的问题的唯一方法是不使用 jQuery。

然而，你用 jQuery 标记你的问题。

你到底想在这里做什么，为什么你忽略了简单的（以及使用闭包的常见 javascript 习惯用法）？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T12:51:49.123

在这种情况下，在 DOM 就绪的情况下，所有第一个选择器都与 click 事件处理程序绑定。单击第一个选择器时，第二个选择器绑定到单击事件。要使用代表第一选择器的 $(this)，您必须将代码编写为

```
$('<first-selector>').each(function(){
$(this).click(function(){
    var oldthis = $(this);
    $('<second-selector>').click(function(){
       alert(oldthis.val());
    });
}); 
```

});

确保第一选择器标签与第二选择器标签不同。试试这个形式

```
jQuery(document).ready(function(){
    jQuery('input[type=text]').each(function(){
        jQuery(this).click(function(){
            var oldthis = jQuery(this);
            jQuery('input.hello').click(function(){
                alert(oldthis.val());
            });
        });
    });
}); 
```

首先单击输入文本字段。当单击带有 hello 类的按钮时，它将提醒输入 TEXT 字段的值。

# android - PhoneStateListener 和服务

> ID：12583106
> 
> 赞同：1
> 
> 时间：2012-09-25T12:37:46.303
> 
> 标签：android

我有一个phonestatelistener：我怎样才能在这里开始服务？我试过了：

```
startService(new Intent(this, TTS.class)); 
```

它怎么对我有用

```
private PhoneStateListener mPhoneListener = new PhoneStateListener() {

          @SuppressLint("SdCardPath")
        public void onCallStateChanged(int state, String incomingNumber) {

           try {
            switch (state) {
            case TelephonyManager.CALL_STATE_RINGING:
                //i want to start service
                startService(new Intent(this, TTS.class)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:00:35.787

你打电话时

```
startService(new Intent(this, TTS.class)); 
```

的第一个参数`new Intent()`必须是 a `Context`。通常你从 a`Service`或从 an调用它`Activity`，两者都是 extend `Context`。

在您的情况下，您的`this`参数是`PhoneStateListener`不扩展的类`Context`。我假设这是一个私有内部类。您需要像这样指定外部类：

```
startService(new Intent(MyActivity.this, TTS.class)); 
```

如果你的外部类是一个活动，那么`MyActivity`应该是活动的名称。如果外部类是服务，那么`MyActivity`应该是服务的名称。

# jakarta-ee - 客户和用户有什么区别？

> ID：12583112
> 
> 赞同：1
> 
> 时间：2012-09-25T12:37:58.867
> 
> 标签：jakarta-ee

我有 EJB 方法。我尝试从用户界面调用 EJB 方法，它可能是 JSF 或 JSP。我不知道用户和客户端之间的确切区别。谁能帮助我。我面试时问的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T12:31:01.207

客户端可以是任何 Web 浏览器之类的工具，也可以是任何桌面应用程序。用户是将登录到客户端并使用或使用服务器公开的远程功能的人。每次用户想要访问任何功能时，客户端都会调用服务器，解析后会在客户端显示从服务器接收到的响应。多个用户可以登录到一个客户端。每个用户都将拥有单独的登录凭据。

# c# - 空域问题：WindowsFormsHost 上的弹出内容将不会更新

> ID：12583117
> 
> 赞同：1
> 
> 时间：2012-09-25T12:38:13.157
> 
> 标签：c#, wpf

我被空域问题困住了。我的 WPF 应用程序托管了一个 winform 组件。我想在组件加载和长时间活动期间显示一个带有一些“等待”文本的弹出窗口。在这里我得到了我的问题：弹出窗口正确显示，但是当我处理组件的繁忙事件时，我无法更新弹出窗口内容。这里有一些代码 XAML：

```
<WindowsFormsHost Name="wfh" Grid.Row="1" Grid.Column="0" ></WindowsFormsHost>
<Popup x:Name="Overlay" AllowsTransparency="True" Placement="Center" 
       StaysOpen="True"
       IsOpen="True" 
       PlacementTarget="{Binding RelativeSource={RelativeSource FindAncestor,   AncestorType=Grid, AncestorLevel=1}}">
    <TextBlock Name="tbWait"  Foreground="Red" />
</Popup> 
```

和 c#:

```
myWinformComponent.Event => (s, e) => 
{ 
   tbWait.Text = e.IsBusy ?  "Loading..." : string.Empty;
} 
```

我知道 WinForm 和 WPF 的空域问题是什么，但我应该让弹出窗口始终打开，让我在 windowformshost 上显示任何内容。

编辑：我在后面的代码中放置了一些断点，我看到 Text 属性更改正确。此更改不会显示在 UI 中。

您有任何解决方法或解决方案吗？谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:30:04.090

根据@HansPassant 评论，我可以用这些行强制重绘：

```
DispatcherFrame frame = new DispatcherFrame();
Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Background, new DispatcherOperationCallback(delegate(object parameter) {
        frame.Continue = false;
        return null;
    }), null);
Dispatcher.PushFrame(frame); 
```

也许这不是最优雅的解决方案，但它是解决我问题的有效补丁。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T12:49:15.270

不幸的是，您不能在 WindowsFormsHost 上显示任何 WPF 内容。我自己花了很长时间与这个怪癖作斗争，直到我最终放弃并重新调整 UI 以使覆盖层不必位于 WinForms 组件之上。

# php - 为未使用 php 登录的用户添加值

> ID：12583123
> 
> 赞同：1
> 
> 时间：2012-09-25T12:38:42.370
> 
> 标签：php, reference

我有一个包含各种用户的表（用户）。如果您推荐某人注册，它会在与您的个人资料中的 (id) 类似的字段 (refcode) 中创建一个推荐 id。现在，当他/她登录时，我想为推荐人的个人资料增加价值。

所以基本上我需要为未登录的用户增加价值。

这是我的代码。

* * *

```
$sql="SELECT * FROM users";

$val=(2);
$result=mysql_query($sql,$bd);

$data=mysql_fetch_assoc($result);

while ($array = mysql_fetch_array($result)) {
 // equate the value to a variable to use outside
 // this while loop
 $acc_balance = $array['com_balance'];
 $comm = $array {$_SESSION['refcode']};
 $commision = $array['id'];
 }

 $remainder = $acc_balance + $val;

 $update_query = mysql_query("UPDATE users SET com_balance = '".      mysql_real_escape_string($remainder) ."'
 WHERE id=refcode");

if ($update_query) {
print "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:47:21.350

首先，改变：

```
$sql="SELECT * FROM users"; 
```

因为您不需要*遍历*整个表来获取登录用户的详细信息。这样的事情应该可以解决问题：

```
$yourID=3;// Assume this is sanitized data from a cookie or a login script.
$sql="SELECT * FROM users where userID=$yourID"; 
```

其次，当您验证推荐下一个用户的用户的登录时，只需添加如下查询：

```
$update_query = mysql_query("
    UPDATE users SET 
        com_balance = (select * from (
            select com_balance from users where id=$yourID))"); 
```

这将使用来自推荐用户的余额更新新用户（这似乎是您想要的）。您将需要使用双子查询来克服烦人的 mysql 错误/功能，除非您将其封装在第二个子查询中，否则它无法从同一表上的子查询更新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:14:40.843

一堆变化，用数字标记：

```
 $sql="SELECT * FROM users where userID='$_SESSION['refcode']'"; //#1

   $val = 2; //#2 : Why do u need the ()?
   $result = mysql_query($sql,$bd);

   $data=mysql_fetch_assoc($result);

   while ($array = mysql_fetch_array($result)) {
  // equate the value to a variable to use outside
  // this while loop
   $acc_balance = $array['com_balance'];
   $comm = $array{$_SESSION['refcode']}; //#3: I am not sure what you're doing here? 
   $commision = $array['id'];
   }

   $remainder = $acc_balance + $val;       

   $update_query = mysql_query("UPDATE users SET com_balance = '".              mysql_real_escape_string($remainder) ."'
   WHERE id=refcode"); // #4: where are you defining refcode? if variable, the query needs to be WHERE id='$refcode'");

   if ($update_query) {
     print "Update successful"; 
```

# java - 查找点是否在三角形内（2D）

> ID：12583127
> 
> 赞同：1
> 
> 时间：2012-09-25T12:38:53.323
> 
> 标签：java, geometry, computational-geometry, convex-hull

我正在编写 Quick Hull 算法，其中包括检查一个点是否位于三角形内。为此，我创建了以下两个函数，如果点在内部，则返回 true，否则返回 false。

但是，从某种意义上说，结果是出乎意料的，有些点被正确分类，有些则没有，我无法弄清楚问题所在。有人可以帮我验证我写的代码是否正确。方法是我使用向量来确定一个点是否与三角形每条边的顶点位于同一侧。代码是：

```
public boolean ptInside(Point first, Point last, Point mx, Point cur) {
        boolean b1 = pointInside(first, last, mx, cur);
        boolean b2 = pointInside(last, mx, first, cur);
        boolean b3 = pointInside(first, mx, last, cur);
        return b1 && b2 && b3;

    }

    public boolean pointInside(Point first, Point last, Point mx, Point cur) {
        int x1 = last.xCo - first.xCo;
        int y1 = last.yCo - first.yCo;
        int x2 = mx.xCo - first.xCo;
        int y2 = mx.yCo - first.yCo;
        int x3 = cur.xCo - first.xCo;
        int y3 = cur.yCo - first.yCo;
        int cross1 = x1 * y2 - x2 * y1;
        int cross2 = x1 * y3 - x3 * y1;
        if (cross1 * cross2 > 0)
            return true;
        else
            return false;

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:44:25.907

我会简单地创建一个多边形，并使用它的[contains(Point)](http://docs.oracle.com/javase/6/docs/api/java/awt/Polygon.html#contains%28java.awt.Point%29)方法。为什么要重新发明轮子？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:26:48.200

您计算 b3 的点数排序不正确。您需要保持 (first, last, mx) 的循环顺序。否则，您已经颠倒了计算的意义。

# java - 如何以编程方式获取java中任何文件的最后访问日期和时间？

> ID：12583128
> 
> 赞同：1
> 
> 时间：2012-09-25T12:38:55.370
> 
> 标签：java

> **可能重复：**
> [在 Java 中获取文件的最后访问时间](https://stackoverflow.com/questions/920259/getting-the-last-access-time-for-a-file-in-java)

我正在使用 JDK 1.6 并尝试了多次来获取上次访问文件的日期和时间。

但找不到确切的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:41:25.643

[文件](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)有`lastModified()`方法，你可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:43:09.843

`java.io.File#lastModified()`返回文件最后一次修改的日期，即自 1970 年 1 月 1 日以来的毫秒数。您可以将其设置为 a`java.util.Date`或`java.util.Calendar`以获取人类可读的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:46:01.293

正如人们所说，在 1.6 中，您可以获得最后修改日期。虽然不是上次访问日期。

如果您可以访问 java 7，那么有[BasicFileAttibutes](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributes.html)接口可以为您提供此信息。例如

```
Path file = ...
BasicFileAttributes attrs = Files.readAttributes(file, BasicFileAttributes.class);
attrs.lastAccessTime(); 
```

# android - 在 Android 中以编程方式更改应用程序中的语言

> ID：12583131
> 
> 赞同：4
> 
> 时间：2012-09-25T12:39:07.270
> 
> 标签：android, android-activity, locale

> **可能重复：**
> [在 Android 中以编程方式更改应用程序语言](https://stackoverflow.com/questions/2900023/change-language-programmatically-in-android)

我想立即更改`SettingsActivity.java`所有活动中的语言。
并保存此选择（即使我退出应用程序或重新启动手机），无论系统区域设置如何。
我怎样才能做到这一点？

```
public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent,
        View view, int pos, long id) { 
        switch (pos) {
        case 0:
            Locale locale = new Locale("en");
            Locale.setDefault(locale);
            Configuration config = new Configuration();
            config.locale = locale;
            getBaseContext().getResources().updateConfiguration(config, getBaseContext()
                    .getResources().getDisplayMetrics());
            break;

        case 1: 
            Locale locale2 = new Locale("de");
            Locale.setDefault(locale2);
            Configuration config2 = new Configuration();
            config2.locale = locale2;
            getBaseContext().getResources().updateConfiguration(config2, getBaseContext()
                    .getResources().getDisplayMetrics()); 
            break;          
        }       
    }

    public void onNothingSelected(AdapterView<?> parent) {
      // Do nothing.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:48:06.740

1）在退出应用程序和重新启动之间，您可以像这样保存选择：创建应用程序类

```
public class MutawaApplication extends Application { 
```

(http://developer.android.com/reference/android/app/Application.html) 在AndroidManifest.xml中注册

```
android:name=".MyApplication" 
```

在这个类中 onCreate 从 SharedPreferences 中读取语言。当您在应用程序中更改语言时，将其保存到 SharedPreferences。

2）在您的活动中检查 onResume 上的语言环境，如果需要，请制作`replaceContentView()`

# emacs - clojurescript中浏览器Repl、浏览器、http服务器之间的交互

> ID：12583132
> 
> 赞同：3
> 
> 时间：2012-09-25T12:39:07.320
> 
> 标签：emacs, clojure, clojurescript

我一直在玩 clojurescriptone - 整洁的项目 - 试图了解 clojurescript 的工作原理。我不清楚浏览器、浏览器 repl 和 http 服务器这三个组件是如何交互的。

我在我的开发环境中使用 emacs

为了更好地理解 ClojureScript(CS)，我决定尝试移植 clojurescriptone(CS1) 以使用 lein2 并使用 nrepl 作为我的 repl。该端口确实有效，我能够让 CS1 环境运行并与浏览器交互。我更喜欢 - 现在 - 不要启动一个劣质的 lisp 进程来使用 CS repl，而是在 clojure repl 中运行 CS repl。唯一的缺点是 CS repl 从标准输入获取输入，而 emacs 提示我使用标准输入。为了解决这个问题，我试图替换 CS1 中的一些代码，以便它从 Chas Emerick 编写的 piggieback 库中启动 repl。

在这样做的过程中，我已经达到了我对这些组件如何交互的理解的极限。显然，从我可以收集到的浏览器 repl 是一个侦听某个端口的“服务器”；虽然一直以来我都认为是某种客户端向 http 服务器发送请求并在评估结果后将输出重定向到浏览器（如何？？）。现在我不确定情况是否如此。

这些组件如何交互？

抱歉解释太长了！！！

席德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:10:06.707

浏览器 REPL 有一个服务器端和一个客户端。服务器端在您的 Clojure 主进程中运行；ClojureScript REPL 它自己实际上是在 bREPL*服务器*中运行的。

bREPL*客户端*在浏览器中的 ClojureScript 中运行，并保持与服务器的长轮询 AJAX 连接。每当您在服务器上的 REPL 中输入内容时，它都会被编译为 JavaScript 并通过长轮询机制发送到客户端，在客户端中对其进行评估并发送回响应。

服务器的 ClojureScript REPL 在您的普通 Clojure REPL 的“内部”运行——其工作原理的确切机制取决于您使用的 REPL。nREPL 本身运行在客户端-服务器架构上，因此很容易看出事情是如何变得混乱的。

这些帮助有用？

# c++ - 当类中的所有方法都是静态的时如何调用构造函数？

> ID：12583134
> 
> 赞同：3
> 
> 时间：2012-09-25T12:39:12.470
> 
> 标签：c++, static, constructor

[https://stackoverflow.com/a/8839647/462608](https://stackoverflow.com/a/8839647/462608)

> 使用静态初始化器：
> 
> ```
> public class MyClass
> {
>     static {
>     //init
>     }
> } 
> ```

可以在 C++ 中完成类似的操作吗？
实际上，我需要初始化一些变量，但我不想创建一个对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:42:06.620

如果变量是`static`成员，您不仅可以初始化它们，而且还**必须**初始化它们。

Java 初始化器列表没有直接等价物，但可以通过调用函数来初始化静态成员来完成类似的操作：

```
class X
{
    static bool x;
}

bool foo()
{
    //initialization code here
}

bool X::x = foo(); 
```

这适用于具有强烈逻辑的情况。如果您只想初始化`static`成员，只需执行类似于`X::x`.

> 实际上，我需要初始化一些变量，但我不想创建一个对象。

如果变量在类之外，直接初始化它们（不需要为此调用代码）。

如果变量是`static`类的成员，请使用上述方法之一。

如果变量是非`static`成员，那么没有对象它们就根本不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:46:08.917

类的静态变量在 .cpp 文件中初始化：

**我的类.h**

```
class MyClass {
public:
   static void f1();
   static void f2();
private:
   static int a1;
   static int a2;
   static int a3;
}; 
```

**我的类.cpp**

```
 int MyClass::a1 = 7;
   int MyClass::a2 = 8;
   int MyClass::a3 = MyClass::a1 + MyClass::a2;

   void MyClass::f1()
   {
      a1 = 7;
   }
   void MyClass::f2()
   {
      cout << a2 << endl;
   } 
```

* * *

如果您想要静态成员变量的非平凡初始化 - 使用构造函数将它们分组在内部类中：

**我的类.h**

```
class MyClass {
public:
   static void f1();
   static void f2();
private:
   struct Data {
      Data();
      int a1;
      int a2;
      int a3;
   };
   static Data data;
}; 
```

**我的类.cpp**

```
 MyClass::Data MyClass::data;
   MyClass::Data::Data() : a1(0), a2(0), a3(0)
   {
      // it is just an example ;)
      for (int i = 0; i < 7; ++i)
      {
         a1 += 2;
         s2 += 3;
         a3 += a1 + a2;
      }
   }

   void MyClass::f1()
   {
      data.a1 = 7;
   }
   void MyClass::f2()
   {
      cout << data.a2 << endl;
   } 
```

# perl - 如何将函数传递给构造函数

> ID：12583138
> 
> 赞同：3
> 
> 时间：2012-09-25T12:39:29.080
> 
> 标签：perl

如何将函数传递给构造函数，以便类可以在内部使用它？

**测试.pl**

```
use Class;
use Loger;

my $loger = Loger->new();
$loger->log('I have logger now, I can log messages!');

my $class = Class->new(\&{ $loger->log }); # here we pass the function (the method of other class) to contructor of a new  Class

$class->do_something();  # class uses loger->log internally to report errors 
```

**Class.pm** 包类；

```
sub new {

    my $self = {};
    $self->{log} = shift; # we got logger->log function, save it for future use

    return bless $self;
}

sub do_something {
     my $self = shift;

     open_file or $self->{log}->('Cant open file'); # we can use gotten logger in class 
}

1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:44:04.877

你快到了。

While`$loger->log`是一个函数调用，您可以使用它`\&Loger::log`来引用该函数。

`\&{ref($loger)."::log"}`可能也有效。

结合@simbabques 点，您应该在传递函数之前对函数进行*curry*，即预先提供第一个参数。您可以通过调用构造函数来做到这一点

```
sub {$loger->log(@_)} 
```

或者

```
sub {unshift @_, $loger; goto \&Loger::log} # more efficient 
```

作为论据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:44:23.570

您正在尝试传递一个方法，而不是一个函数（或子）。单独调用它是行不通的。如果您想要一个对象的方法，请传递该对象并在该对象上调用该方法。

```
my $loger = Loger->new();
$loger->log('I have logger now, I can log messages!');

my $class = Class->new(logger => $loger); # pass the Loger object 
```

并在`Class.pm`：

```
package Class;

sub new
{
  my ($class, %args) = @_;
  my $self = {};
  $self->{log} = $args{'logger'}; # store it inside your Class object
  return bless $self;
}

sub do_something
{
   my $self = shift;
   open_file or $self->{log}->log->('Cant open file'); # call its log-method
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:16:32.717

`\`引用运算符仅适用于命名符号。

您的线路：

`my $class = Class->new(\&{ $loger->log });`

实际上是尝试传递*匿名*子例程。它还缺少将参数传递给 $loger->log() 的方法。

您可以将其更改为：

`my $class = Class->new(sub { $loger->log(@_) });`

# r - R从循环中的多个数据帧中提取变量

> ID：12583140
> 
> 赞同：1
> 
> 时间：2012-09-25T12:39:38.843
> 
> 标签：r, for-loop, import, lapply

我有很多参数研究的结果要分析。幸运的是，有一个保存输出文件的输出文件。我需要保存文件名。我使用了这个程序：

```
IndexJobs<-read.csv("C:/Users/.../File versione7.1/
  "IndexJobs.csv",sep=",",header=TRUE,stringsAsFactors=FALSE)

dir<-IndexJobs$WORKDIR
Dir<-gsub("\\\\","/",dir)
Dir1<-gsub(" C","C",Dir) 
```

现在我使用 e 来读取 CSV 并创建不同的数据框

```
for(i in Dir1){
  filepath <- file.path(paste(i,"eplusout.csv",sep=""))
  dat<-NULL
  dat<-read.table(filepath,header=TRUE,sep=",")
  filenames <- substr(filepath,117,150)
  names <-substr(filenames,1,21)
  assign(names, dat)
  } 
```

现在我想从每个数据库中提取选定的变量，并将每个数据库的每个变量放在单独的数据库中。我还将变量和单个数据库的名称联合起来，以便有一个清晰的数据库进行一些分析。我试着做点什么，但结果很糟糕。我试图插入其他行：

```
 for(i in Dir1){
  filepath <- file.path(paste(i,"eplusout.csv",sep=""))
  dat<-NULL
  dat<-read.table(filepath,header=TRUE,sep=",")
  filenames <- substr(filepath,117,150)
  names <-substr(filenames,1,21)
  assign(names, dat)
  datTest<-dat$X5EC132.Surface.Outside.Face.Temperature..C..TimeStep.
  nameTest<-paste(names,"_Test",sep="")
  assign(nameTest,datTest)
  DFtest=c[,nameTest]
} 
```

但是对于每个 i 都会覆盖 DFtest，并且只保留最后一个数据库列。

一些建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:53:23.177

`DFtest=c[,nameTest]`如果您替换为，它可能会起作用

```
DFtest[nameTest] <- get(nameTest) 
```

或者，或者，

```
DFtest[nameTest] <- datTest 
```

此过程假定对象`DFtest`在您运行循环之前已存在。

* * *

另一种方法是在运行循环之前创建一个空列表：

```
DFtest <- list() 
```

在循环中，您可以使用以下命令：

```
DFtest[[nameTest]] <- datTest 
```

在循环之后，列表中的所有值`DFtest`都可以使用

```
do.call("cbind", DFtest) 
```

请注意，这仅在列表`DFtest`中的所有向量具有相同长度时才有效。

# android - 无法重新开始录制 (MediaRecorder)

> ID：12583142
> 
> 赞同：0
> 
> 时间：2012-09-25T12:39:48.383
> 
> 标签：android, android-mediarecorder

停止录制后，我似乎无法在我的应用程序中再次开始录制。

基本上，我似乎没有正确处理 MediaRecorder 的停止过程，因此一旦我再次点击“捕获按钮”，它就可以重新开始。

我知道有很多代码要复制/粘贴，但我想知道我的有什么问题。

这是我的代码：

```
 public class MainActivity extends Activity implements SurfaceHolder.Callback {

    private MediaRecorder mediaRecorder = null;
    private MediaPlayer mediaPlayer = null;
    private String fileName = null;
    private boolean recording = false;
    private String auxDate;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        SurfaceView surface = (SurfaceView) findViewById(R.id.cam_surface);
        SurfaceHolder holder = surface.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        final Button btnCapture = (Button)findViewById(R.id.button_capture);
        final Button btnStop = (Button)findViewById(R.id.button_stop);
        btnCapture.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                try{
                Time now = new Time();  
                now.setToNow();
                int auxforDate = 0;
                auxforDate = now.year;
                auxDate = Integer.toString(auxforDate);
                auxforDate = now.month + 1;
                auxDate = auxDate + "_" + Integer.toString(auxforDate);
                auxforDate = now.monthDay;
                auxDate = auxDate + "_" + Integer.toString(auxforDate);
                auxforDate = now.hour;
                auxDate = auxDate + "_" + Integer.toString(auxforDate);
                auxforDate = now.minute;
                auxDate = auxDate + "_" + Integer.toString(auxforDate);
                auxforDate = now.second;
                auxDate = auxDate + "_" + Integer.toString(auxforDate);
                } catch (Exception e){ e.printStackTrace();
                try {
                    throw e;
                } catch (Exception e1) {
                    e1.printStackTrace();
                }}
                fileName = Environment.getExternalStorageDirectory() + "/MobiNanny/" + auxDate + ".mp4";
                btnCapture.setEnabled(false);
                btnStop.setEnabled(true);
                prepareRecorder();
                mediaRecorder.setOutputFile(fileName);
                try {
                    mediaRecorder.prepare();
                } catch (IllegalStateException e) {
                } catch (IOException e) {
                } mediaRecorder.start();
                recording = true;
            }
        });

        btnStop.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(recording == true){
                    mediaRecorder.stop();
                    mediaRecorder.reset();
                    btnCapture.setEnabled(true);
                    btnStop.setEnabled(false);
                    recording = false;
                } else {
                    //Agregar pop-up (Dialog) que diga "The device is not recording."
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    public void surfaceCreated(SurfaceHolder holder) {

        if (mediaRecorder == null) {
            mediaRecorder = new MediaRecorder();
            mediaRecorder.setPreviewDisplay(holder.getSurface());
        }
        if (mediaPlayer == null) {
            mediaPlayer = new MediaPlayer();
            mediaPlayer.setDisplay(holder);
        }

    }

    public void surfaceDestroyed(SurfaceHolder holder) {

        mediaRecorder.release();
        mediaPlayer.release();      
    }

    public void prepareRecorder(){

        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        mediaRecorder.setVideoFrameRate(5);
        mediaRecorder.setVideoSize(320, 240);
        }
} 
```

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T11:21:24.257

您必须重新设置预览显示。移动此代码

```
mediaRecorder.setPreviewDisplay(holder.getSurface()); 
```

这里：

```
mediaRecorder.setOutputFile(fileName);
mediaRecorder.setPreviewDisplay(holder.getSurface());
try {
    mediaRecorder.prepare();
} catch (IllegalStateException e) {
} catch (IOException e) {
} 
```

这应该适合你。

# xpages - 在 XPages 中，我无法让文件上传控件在移动控件中工作

> ID：12583144
> 
> 赞同：0
> 
> 时间：2012-09-25T12:40:08.997
> 
> 标签：xpages

现在 iOS 设备可以从他们的图片库或相机上传，我正在尝试使用文件上传控件通过 xpage 获取这些图片。如果它是一个普通的 XPage，它工作正常 - 但如果我尝试将它包装在扩展库中的移动控件中，我无法保存图片。其他值保存到文档但不保存图片。文件上传控件绑定到富文本字段。

任何想法，将不胜感激！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:46:40.017

将文件上传放在 iframe 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:39:26.310

有趣的。你是说你可以让文件上传控件在 iOS 设备上与 XPage 一起工作吗？我的清晰印象是您无法从网络应用程序访问相机。在这种情况下，您需要将您的网络应用程序包装到一个可以访问物理层的层中（例如 Apache Cordova aka PhoneGap）......？

我知道其中一些功能正在 html5 中实现，但是，到目前为止，这些功能非常不可靠（经常让手机崩溃）。

/约翰

# expressionengine - 在表达式引擎中从其他语言中删除搜索结果

> ID：12583146
> 
> 赞同：0
> 
> 时间：2012-09-25T12:40:11.330
> 
> 标签：expressionengine

我想删除不指向当前语言代码的搜索结果。

我有表达式引擎 2.5.3 并使用多语言 2.0 模块和内置搜索引擎。

这将删除这些结果，但会弄乱分页。（一些页面有 1 个结果，另一个有 10 个结果......）

```
{exp:search:search_results}
    <?php if(get_langcode_from_url('{page_uri}') == "{country_code}"){?>
        <div>{title}</div>
    <?php } ?>
{/exp:search:search_results} 
```

有没有更好的解决方案？如果没有必要，我宁愿不购买任何模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:16:49.763

希望有人对此有更好的答案，但由于没有人回答...

我会考虑的解决方案的方法：

1.  滚动您自己的分页。

2.  以某种方式将您的结果限制在更高的级别，以便本地分页可以工作。[该模块的支持论坛](http://devot-ee.com/add-ons/support/multi-language-module/viewthread/2769)中有一个关于此的主题。

3.  通过稍微不同的加载方式来掩饰分页问题。也许像[无限卷轴](http://devot-ee.com/add-ons/infinite-scroll)这样的东西可以提供帮助？不是免费的，但也不是太贵。

如果您现在已经找到了自己的解决方案，我很想听听。多语言支持是我们要做的下一件大事。

# java - Proguard：找不到引用的类

> ID：12583148
> 
> 赞同：11
> 
> 时间：2012-09-25T12:40:19.190
> 
> 标签：java, android, eclipse, proguard

周围有一些问题，但没有适合我的解决方案。我认为它应该很容易使用。我只是得到一个控制台`can't find referenced class`

这是我的 proguard-project.txt

```
-injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar
-libraryjars C:/Users/ME/android-sdks/platforms/android-10/android.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

和 project.properties

```
#Proguard enabled
proguard.config=C:/Users/ME/android-sdks/tools/proguard/proguard-android.txt:proguard-project.txt 
```

一些带有警告的类是：

```
org.apache.avalon.framework.logger.Logger
org.apache.log4j.Category
org.apache.log4j.Priority
org.apache.log4j.Logger
...
javax.servlet.ServletContextListener
javax.servlet.ServletContextEvent
org.w3c.dom.html.HTMLAnchorElement
org.w3c.dom.html.HTMLObjectElement
org.w3c.dom.html.HTMLTableSectionElement
org.w3c.dom.html.HTMLFrameSetElement
...
org.w3c.dom.events.DocumentEvent
org.w3c.dom.traversal.NodeFilter
...
org.w3c.dom.ranges.Range
org.w3c.dom.ranges.RangeException
...
org.w3c.dom.html.HTMLDocument 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T12:57:54.590

添加到您的配置中：

```
-libraryjars org.apache.jar // name of your jars.
-libraryjars org.w3c.jar 
```

如果它没有帮助添加：

```
-dontwarn org.apache.** tag 
```

或者只是忽略警告（非常不推荐，因为它可能导致您的应用程序在运行时因不满足的依赖关系而崩溃）：

```
-ignorewarnings 
```

该文档将为您提供帮助：http: [//proguard.sourceforge.net/manual/troubleshooting.html](http://proguard.sourceforge.net/manual/troubleshooting.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-24T07:51:12.987

如果您有错误，例如：

```
Warning: com.package...: can't find referenced class com.secondpackage....Classname 
```

只需添加到您的文件 proguard-android.txt：

```
#if it is class:
-keep class com.package.*{ *; }
#or if it is interface:
-keep interface com.package.*{ *; }
#or if it is a class that extends from any other
-keep class * extends com.example.Model
#or if you know only and of className
-keep class **Starter { *; }
#or if you want to keep only fields of classes
-keepclassmembers class com.package.** {
   *;
} 
```

此外，如果您不想查看日志使用中的所有注释：

```
-dontnote com.package.** 
```

这个文件名写在 build Gradle

```
buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-android.txt'
        }
    } 
```

或者，如果您想添加许多文件，例如使用[以下 repo](https://github.com/krschultz/android-proguard-snippets/tree/master/libraries) 并添加所有文件：

```
 buildTypes {
        release {
            minifyEnabled true

            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
            proguardFiles fileTree(include: ['*.pro'], dir: '../libraries').asList().toArray()
        } 
```

`libraries`文件夹应该在`D:\workspace\MyProject\libraries`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:54:45.097

据我所知，这意味着您以错误的方式引用了 Jar 文件。

此外，如果您的用户名 (ME) 包含空格`C:/Users/ME/android-sdks/tools/proguard/proguard-android.txt:proguard-project.txt`，Proguard 将以“有趣”的方式中断。将 android-sdk 移至`C:\android-sdk`并省去您的头痛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T01:57:21.140

如果您正在使用库项目，那么您应该将 -libraryjars 添加到您的库 proguard 配置中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-02T12:43:52.167

在我的情况下，Android Studio 在发布版本中执行 ProGuard 时冻结了。我杀了它。重新启动后，我开始看到“找不到引用的类”警告。

解决方案：**我关闭了 Android Studio，从我的项目文件夹中删除了 .gradle 文件夹，然后删除了 gradle 全局缓存（%USER_HOME%.gradle/caches）。**重新打开项目后，缓存被重建，一切都重新开始工作。

# java - iTextPdf JTextArea Unicode

> ID：12583149
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:40:22.070
> 
> 标签：java, swing, unicode, itextpdf

我能够将 JTextArea unicode (devanagari) 内容加载/保存到文件中。我想将内容打印到 pdf 文件，所以我使用 iTextPDF api。我的代码片段如下，它打印空文件而不是内容。

```
package i18n;

import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.TextArea;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Locale;
import java.util.ResourceBundle;

import javax.swing.Box;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

import com.itextpdf.awt.PdfGraphics2D;
import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.pdf.PdfContentByte;
import com.itextpdf.text.pdf.PdfWriter;

public class MyNumbers extends JFrame {
    private ResourceBundle rb;
    private Font devanagariFont;

    public MyNumbers (String language, String fontFile) {
        loadResourceBundle(language);
        loadFont(fontFile);
        display();
    }

    TextArea txtArea;

    private void display() {
        String unicode = null;

        JPanel labels = new JPanel(new GridLayout(0,2));
        JLabel uni = null;
        for(int i=0; i<=10; i++) {
            unicode = rb.getString("" +i);
            labels.add(new JLabel("" + i));
            labels.add(uni = new JLabel(unicode));
            //uni.setFont(devanagariFont);
        }
        labels.add(new JLabel("Time"));
        labels.add(new ClockLabel());
        getContentPane().setLayout(new FlowLayout());
        Box b = Box.createVerticalBox();
        b.add(labels);
        b.add(txtArea = new TextArea(10, 40));
        getContentPane().add(b);
        addWindowListener(new WindowAdapter() {

            @Override
            public void windowOpened(WindowEvent e) {
                // TODO Auto-generated method stub
                try {
                    getInputContext().selectInputMethod(new Locale("hi", "IN"));
                    read();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }

            @Override
            public void windowClosing(WindowEvent e) {
                // TODO Auto-generated method stub
                try {
                    System.out.println(getInputContext().getLocale());
                    save();
                    print();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                System.exit(0);

            }

        });
        //setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);

    }

    String fileName = "MyNumbers.txt";
    private void save() throws IOException {
        File f = new File(fileName);
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(f), "UTF-16"));
        String txt = txtArea.getText();
        writer.write(txt);
        writer.flush();
        writer.close();
    }

    private void read() throws IOException {
        File f = new File(fileName);
        if(f.exists() == false) return;
        BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(f), "UTF-16"));
        String line = null;
        while((line = reader.readLine()) != null) {
            txtArea.append(line + "\n");
        }
        reader.close();
    }

    private void loadFont(String fontFile) {
        try {
            InputStream input = getClass().getResourceAsStream(fontFile);
            Font b = Font.createFont(Font.TRUETYPE_FONT, input);
            devanagariFont = b.deriveFont(Font.PLAIN, 11);

        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    private void loadResourceBundle(String language) {
        String base = getClass().getName() + "rb";
        rb = ResourceBundle.getBundle(base, new Locale(language));

    }

    static class ClockLabel extends JLabel implements ActionListener {

        private ClockLabel() {
            new Timer(1000, this).start();
        }

        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");

        public void actionPerformed(ActionEvent e) {
            Calendar cal = Calendar.getInstance();
            setText(sdf.format(cal.getTime()));

        }
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new MyNumbers("hi", "Devnew.ttf");      
            }
        });

    }

    String pdfFileName = "MyNumbers.pdf";
    private void print() {
        System.out.println("Printing PDF file ..");
        try { 
            Document document = new Document(PageSize.A4);  
            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(pdfFileName));
            document.open();
            PdfContentByte cb = writer.getDirectContent( );
            PdfGraphics2D g2d = new PdfGraphics2D(cb, PageSize.A4.getWidth(), PageSize.A4.getHeight());
            System.out.println(txtArea.getSize());
            txtArea.print(g2d);
            g2d.dispose();
            document.close ();
        }
        catch(DocumentException de) {
            System.err.println(de.getMessage());
        }
        catch(IOException ioe) {
            System.err.println(ioe.getMessage());
        }
    }

} 
```

**输出到控制台：**

```
hi_IN
Printing PDF file ..
java.awt.Dimension[width=300,height=170] 
```

请让我知道修复。假设摇摆 JTextArea 应该能够处理它，我没有为图形设置任何字体。使用 indicim.jar 输入法框架添加了 unicode 支持。根据 Dimension 上方的输出，显示文本区域的大小不为零。

为了进行上述测试，您需要 2 个文件：

[indicim.jar](http://cogtool.hcii.cs.cmu.edu/trac/export/3764/trunk/jre/lib/im/indicim.jar)并将其放在 jre/lib/ext

**MyNumbers.txt** - 梵文中的 unicode 内容文件，如下所示，您可以自己在文本区域中键入它，并在关机/启动时保存/加载程序。你把它保存在eclipse的项目目录中。

```
अम२ जवान
अम२ जवान
अम२ जवान
अम२ जवान
अम२ जवान
अम२ जवान
अम२ जवान
अम२ जवान
अम२ जवान
ऊँ 
```

将在 Eclipse 项目目录中创建一个 pdf 文件，但现在它是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:16:07.230

问题是你不打电话：

`writer.close()`

在您的 PdfWriter 上。在方法的末尾添加该行`print()`应该可以解决问题。

编辑：

这是一个适用于我的[SSCCE](http://sscce.org)（您仍然需要将 iText lib 4.2.0 版添加到您的依赖项中）：

```
import java.awt.Desktop;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.TextArea;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Locale;

import javax.swing.Box;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

import com.lowagie.text.Document;
import com.lowagie.text.DocumentException;
import com.lowagie.text.PageSize;
import com.lowagie.text.pdf.PdfContentByte;
import com.lowagie.text.pdf.PdfWriter;

public class MyNumbers extends JFrame {
    private Font devanagariFont;

    public MyNumbers(String language, String fontFile) {
        loadResourceBundle(language);
        loadFont(fontFile);
        display();
    }

    TextArea txtArea;

    private void display() {
        String unicode = null;

        JPanel labels = new JPanel(new GridLayout(0, 2));
        JLabel uni = null;
        for (int i = 0; i <= 10; i++) {
            unicode = String.valueOf(i);
            labels.add(new JLabel("" + i));
            labels.add(uni = new JLabel(unicode));
            // uni.setFont(devanagariFont);
        }
        labels.add(new JLabel("Time"));
        labels.add(new ClockLabel());
        getContentPane().setLayout(new FlowLayout());
        Box b = Box.createVerticalBox();
        b.add(labels);
        b.add(txtArea = new TextArea(10, 40));
        getContentPane().add(b);
        addWindowListener(new WindowAdapter() {

            @Override
            public void windowOpened(WindowEvent e) {
                // TODO Auto-generated method stub
                try {
                    getInputContext().selectInputMethod(new Locale("hi", "IN"));
                    read();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }

            @Override
            public void windowClosing(WindowEvent e) {
                // TODO Auto-generated method stub
                try {
                    System.out.println(getInputContext().getLocale());
                    save();
                    print();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                System.exit(0);

            }

        });
        // setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);

    }

    String fileName = "MyNumbers.txt";

    private void save() throws IOException {
        File f = new File(fileName);
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(f), "UTF-16"));
        String txt = txtArea.getText();
        writer.write(txt);
        writer.flush();
        writer.close();
    }

    private void read() throws IOException {
        File f = new File(fileName);
        if (f.exists() == false) {
            return;
        }
        BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(f), "UTF-16"));
        String line = null;
        while ((line = reader.readLine()) != null) {
            txtArea.append(line + "\n");
        }
        reader.close();
    }

    private void loadFont(String fontFile) {
        try {
            InputStream input = getClass().getResourceAsStream(fontFile);
            Font b = Font.createFont(Font.TRUETYPE_FONT, input);
            devanagariFont = b.deriveFont(Font.PLAIN, 11);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void loadResourceBundle(String language) {
        String base = getClass().getName() + "rb";

    }

    static class ClockLabel extends JLabel implements ActionListener {

        private ClockLabel() {
            new Timer(1000, this).start();
        }

        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");

        @Override
        public void actionPerformed(ActionEvent e) {
            Calendar cal = Calendar.getInstance();
            setText(sdf.format(cal.getTime()));

        }
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MyNumbers("hi", "Devnew.ttf");
            }
        });

    }

    String pdfFileName = "MyNumbers.pdf";

    private void print() {
        System.out.println("Printing PDF file ..");
        try {
            File pdf = new File(pdfFileName);
            Document document = new Document(PageSize.A4);
            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(pdf));
            document.open();
            PdfContentByte cb = writer.getDirectContent();
            Graphics2D g2d = cb.createGraphics(PageSize.A4.getWidth(), PageSize.A4.getHeight());
            System.out.println(txtArea.getSize());
            txtArea.printAll(g2d);
            g2d.dispose();
            document.close();
            writer.flush();
            writer.close();
            Desktop.getDesktop().open(pdf);
        } catch (DocumentException de) {
            System.err.println(de.getMessage());
        } catch (IOException ioe) {
            System.err.println(ioe.getMessage());
        }
    }

} 
```

# windows - 如何使用 Get-Service 命令拉取 Windows 服务的物理路径

> ID：12583155
> 
> 赞同：12
> 
> 时间：2012-09-25T12:40:33.353
> 
> 标签：windows, powershell, windows-services, powershell-2.0

我需要在 Win 2k8 上运行的一组服务器上提取所有 Windows 服务的物理执行路径。由于此操作系统附带的 powershell 版本是 2.0，我想使用 Get-service 命令而不是 Get-WmiObject。我知道我可以使用下面给出的命令拉出物理路径

```
$QueryApp = "Select * from Win32_Service Where Name='AxInstSV'"
$Path = (Get-WmiObject -ComputerName MyServer -Query $QueryApp).PathName 
```

我不希望此命令拉动物理路径，但想使用 PS 版本 2.0 附带的 Get-Service 命令。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T17:35:30.567

即使使用 PowerShell 3，我也看不到使用 Get-Service 获取它的方法。

这个 1-liner 将为您提供路径名，尽管会少一些首选的“向左过滤”行为：

```
gwmi win32_service|?{$_.name -eq "AxInstSV"}|select pathname 
```

或者，如果您只想要字符串本身：

```
(gwmi win32_service|?{$_.name -eq "AxInstSV"}).pathname 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-21T05:36:53.777

我想做类似的事情，但是基于搜索/匹配服务下运行的进程的路径，所以我使用了经典的 WMI Query 语法，然后通过 format-table 传递结果：

```
$pathWildSearch = "orton";
gwmi -Query "select * from win32_service where pathname like '%$pathWildSearch%' and state='Running'" | Format-Table -Property Name, State, PathName -AutoSize -Wrap 
```

欢迎您通过跳过定义和传递 $pathWildSearch 将其变成单行，或者您可以只返回 gwmi 语句以在分号后继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-28T14:37:48.380

@alroc 做得很好，但没有理由过滤所有服务。查询 WMI 就像查询数据库一样，您可以只要求 WMI 为您进行过滤：

```
(Get-CimInstance Win32_Service -Filter 'Name = "AxInstSV"').PathName 
```

要探索可用于该服务的所有元数据：

```
Get-CimInstance Win32_Service -Filter 'Name = "AxInstSV"' | Select-Object * 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-02T12:47:50.763

也许少一点冗长，

```
wmic service where "name='AxInstSV'" get PathName 
```

这也应该在命令提示符下工作，而不仅仅是 powershell。

* * *

或者，如果您有进程名称本身，您可以这样做：

```
wmic process where "name='AxInstSV.exe'" get ExecutablePath 
```

要读取进程路径，您需要许可，所以大多数情况下我对服务名称的运气更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-01T12:46:15.623

我永远无法通过 Get-Service 命令执行此操作，但如果您的服务作为自己的进程运行，那么您可以通过以下代码使用 Get-Process 命令：

```
(Get-Process -Name AxInstSV).path 
```

来源： [https ://blogs.technet.microsoft.com/heyscriptingguy/2014/09/15/powertip-use-powershell-to-find-path-for-processes/](https://blogs.technet.microsoft.com/heyscriptingguy/2014/09/15/powertip-use-powershell-to-find-path-for-processes/)

# mysql - 如何在mysql中设置最大字符长度

> ID：12583157
> 
> 赞同：1
> 
> 时间：2012-09-25T12:40:49.670
> 
> 标签：mysql

我正在使用 mysql 数据库，我想无限制地使用 varchar 字段。即我想对任意数量的字符使用 varchar 字段，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:43:28.350

使用`text`类型。它实际上是无限的。例如

```
create table mytable (
    mycol text
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:45:21.987

如果您可以将数据容纳在 255 个字符内，则该`varchar`字段并不意味着无限长度，否则您可以使用该`text`字段。

[从这个问题](https://stackoverflow.com/questions/1203710/which-datatype-is-better-to-use-text-or-varchar)中了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:45:45.540

使用文本而不是 Varchar。[在这里检查](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

# ios - 如何以编程方式检测存储在文档目录中的音频文件是否可播放 Xcode iPhone

> ID：12583158
> 
> 赞同：0
> 
> 时间：2012-09-25T12:40:49.833
> 
> 标签：ios, objective-c, audio, playback, detect

我正在使用 AVAudioPlayer 播放存储在文档目录中的音频文件。音频存在于目录中，大小为 82 字节。

我想检测此音频是否可播放。

```
/*save the Audio file in Document Directory */

NSFileManager *fileManager=[NSFileManager defaultManager];

/*Get the Path  to Application Documents Directory*/
NSArray *docDir=[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

/*append the neccessary file extension */
NSLog(@"%d",bt.tag);
int a=bt.tag-10000;
NSString *filepathStr=[NSString stringWithFormat:@"/%@/%@.mp3",docDir,[NSString stringWithFormat:@"%d",a]];

/*Check if my crrent file exists in the Documents Directory*/

if([fileManager fileExistsAtPath:filepathStr])
{

    NSData *dat = [fileManager contentsAtPath:filepathStr];
    NSLog(@"data is %d",[dat length]);
    if(player)
    {
        [player stop];
        [player release];
        player=nil;
    }

    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:[NSURL URLWithString:filepathStr] options:nil];

   /* You can then check its playable property:*/

    if (asset.playable) 
    {
        player = [[AVAudioPlayer alloc] initWithData:dat error:nil];
        player.delegate = self;
        [player play];  

        //Do Something
    } 
```

我还有其他可播放的音频也存储在 Document 目录中，它们可以正常播放。
我使用了 AVURLAsset 并尝试检查其属性“可播放”但由于未形成 AVURLAsset 对象而无法成功。

此音频文件的大小为 82 字节，但即使在 iTunes 中也无法播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:23:49.813

我刚刚找到了解决方案，我们可以使用以下代码检测音频是否可播放

```
 NSURL *url=[[NSURL alloc] initFileURLWithPath:filepathStr]; 
     AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:url options:nil];
  /* You can then check its playable property:*/

        if (asset.playable) 
        {

       player = [[AVAudioPlayer alloc] initWithData:dat error:nil];
            player.delegate = self;
            [player play];  
 } 
```

# java - DefaultMessageListenerContainer 不缩放

> ID：12583161
> 
> 赞同：7
> 
> 时间：2012-09-25T12:41:03.883
> 
> 标签：java, spring, jms, scalability, spring-jms

我有一个 DefaultMessageListenerContainer，它（在我看来）没有扩大。Container 被定义为侦听一个队列，其中有 100 条消息。

我希望 Container 可以达到任何长度，消息将尽可能快地被消耗（通过观察 maxConcurrentConsumers 配置）。所以我假设有 7 个并发消费者。（从容器启动时的 2 个并发消费者开始）一些日志信息：

```
activeConsumerCount: 5
concurrentConsumers: 2
scheduledConsumerCount: 5
idleConsumerLimit: 1
idleTaskExecLimit: 1
maxConcurrentConsumers: 7 
```

**我的 Spring-config（它的一部分）：**

```
<bean id="abstractMessageListenerContainer" class="my.package.structure.LoggingListenerContainer" abstract="true">
    <property name="connectionFactory" ref="jmscfCee" />
    <property name="maxConcurrentConsumers" value="7"/>
    <property name="receiveTimeout" value="100000" />
    <property name="concurrentConsumers" value="2" />
</bean>

<bean class="my.package.structure.LoggingListenerContainer" parent="abstractMessageListenerContainer">
    <property name="destinationName" value="MY.QUEUE" />
    <property name="messageListener" ref="myMessageListener" />
</bean>

<bean id="myMessageListener" class="my.package.structure.ListenerClass"></bean> 
```

**我的日志容器**

```
public class LoggingListenerContainer extends DefaultMessageListenerContainer{

private static final Logger logger = Logger
        .getLogger(LoggingListenerContainer.class);
@Override
protected void doInvokeListener(MessageListener listener, Message message)
        throws JMSException {

    logger.info("activeConsumerCount: " + this.getActiveConsumerCount());
    logger.info("concurrentConsumers: " +  this.getConcurrentConsumers());
    logger.info("scheduledConsumerCount: " + this.getScheduledConsumerCount());
    logger.info("idleConsumerLimit: " + this.getIdleConsumerLimit());
    logger.info("idleTaskExecLimit: " + this.getIdleTaskExecutionLimit());
    logger.info("maxConcurrentConsumers: " + this.getMaxConcurrentConsumers());
    super.doInvokeListener(listener, message);
} 
```

**我的听众班：**

```
public class ListenerClass implements MessageListener {

    public void onMessage(Message msg) {
           //Do some business function
    }

} 
```

有人可以纠正我的配置或给我一些关于我的配置的提示或向我解释容器的方法吗？（如果我误解了什么）

我正在使用 ActiveMQ 进行本地测试（使用 WebSphere MQ 进行生产）——如果它与可伸缩性主题相关。

**编辑：**

```
<bean id="jmscfCee" class="org.apache.activemq.spring.ActiveMQConnectionFactory">
        <property name="brokerURL">
            <value>${jmscfCee.hostName}</value>
        </property>
</bean>

<bean id="jmscfCeeCachingConnectionFactory"
    class="org.springframework.jms.connection.CachingConnectionFactory ">
    <constructor-arg ref="jmscfCee" />
    <property name="sessionCacheSize" value="10" />
</bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:52:25.007

这取决于。几年前我在 ActiveMQ 上遇到过类似的问题，它的默认行为针对大量（数千条）小消息进行了大量优化。默认情况下，每个消费者将分批预取 1000 条消息，因此，如果您有少量消息，您可能会发现它们都最终在一个消费者的预取缓冲区中，而其他消费者则处于空闲状态。

[您可以在连接 URI 或 Spring 配置中使用预取策略](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)调整此行为，如果这是您构建连接工厂的方式。

```
<amq:connectionFactory id="connectionFactory" brokerURL="vm://localhost">
  <property name="prefetchPolicy">
    <amq:prefetchPolicy all="1" />
  </property>
</amq:connectionFactory> 
```

我当时使用的 ActiveMQ 版本不支持预取限制为 0（即不预取，每次都去代理）但文档表明现在允许这样做。

# php - 使用隐藏的 iframe 执行文件上传后防止 iframe 弹出？

> ID：12583172
> 
> 赞同：0
> 
> 时间：2012-09-25T12:41:33.473
> 
> 标签：php, javascript, html, iframe, internet-explorer-8

有人可以在这里帮助我吗，我混合使用了下面这两个教程来克服 IE 的限制并通过 iframe 创建“异步上传”。现在这一切正常，除了在 IE8 中似乎发生的问题，其中 .php 文件的返回返回到 iframe 并打开一个新窗口以显示输出。我能做些什么来阻止这个弹出窗口的发生?

[IE8 异步文件上传](https://stackoverflow.com/questions/9514352/ie8-async-file-upload)

[http://hungred.com/how-to/tutorial-easyest-asynchronous-upload-file-ajax-upload/](http://hungred.com/how-to/tutorial-easiest-asynchronous-upload-file-ajax-upload/)

谢谢大家，

灰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:48:39.607

请参阅[此](http://jquery.malsup.com/form/#file-upload)链接。

重要笔记：

> 需要注意的是，即使 dataType 选项设置为 'script'，并且服务器实际上使用一些 javascript 响应多部分表单提交，响应的 Content-Type 标头也应该强制为 text/html，否则 Internet Explorer将提示用户下载“文件”。

根据上面的文字 - 您必须强制您的服务器端代码返回 Content-Type 标头设置为 text/html。

和

> 为了解决使用 iframe 模式时脚本和 JSON 响应的挑战，Form Plugin 允许将这些响应嵌入到 textarea 元素中，建议您在与文件上传和旧版本结合使用时对这些响应类型这样做浏览器。

这些是 jquery 插件的注释，它允许做你需要的事情。但是第一个报价也对您有用。仅当您返回 JSON 或脚本时，第二个才是重要的。

# java - 如何从 xml 或以编程方式从 Preference 中意图子屏幕（PreferenceScreen）

> ID：12583174
> 
> 赞同：2
> 
> 时间：2012-09-25T12:41:43.680
> 
> 标签：java, android, android-layout, android-intent, android-preferences

我正在使用以前解决方案中的自定义 IconPreferenceScreen [How to add icons to Preference](https://stackoverflow.com/questions/5765186/how-to-add-icons-to-preference) 以获取首选项中的图标，但现在我想在该元素中设置一个子屏幕，例如，来自preferences.xml

```
<PreferenceScreen>

<org.mypackage.IconPreferenceScreen 
            android:title="IconPreferenceScreen Title"
            android:summary="IconPreferenceScreen Summary"
            android:key="key1"

   <intent>
      <PreferenceScreen
         android:key="sub1"
         android:title="sub"
         android:persistent="false"/>
    <intent />

  />

 </PreferenceScreen> 
```

我知道在上面的意图中必须有一些动作，我只想显示我想要的意图，无论是来自 xml 还是以编程方式。请注意，我既不想拥有单独的 PreferenceActivity 类，也不想拥有preferences.xml

# c++ - C++中的异步函数调用

> ID：12583175
> 
> 赞同：0
> 
> 时间：2012-09-25T12:41:50.463
> 
> 标签：c++, asynchronous

这是我在 Java 中用于在 Java 中进行异步函数调用的一些代码：

```
 public class AsyncLogger
    {
        public static asyncLog = null;
        public static ExecutorService executorService = Executors.newSingleThreadExecutor();

        public static AsyncLogger GetAsyncClass()
        {
            if(asyncLog == null)
            {
                asyncLog= new AsyncLogger();
            }
            return asyncLog;
        }

        public void WriteLog(String logMesg)
        {
            executorService.execute(new Runnable()
            {
                public void run()
                {
                    WriteLogDB(logMesg);
                }
            });
                }

                public void ShutDownAsync()
                {
                    executorService.shutdown();
        }
    } 
```

这是一个带有静态 ExecutorService 的 Singleton 类，WriteLogDB 将作为异步函数调用。所以我可以在不影响主流程的情况下异步处理 WriteLogDB 中的代码。

我能得到这样的 C++ 等价物吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:44:04.290

您可以使用C++11中的[std::async进行异步函数调用。](http://en.cppreference.com/w/cpp/thread/async)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T12:50:18.620

```
std::thread([](){WriteLogDB(logMesg);}).detach(); 
```

或者如果您需要等待结果：

```
auto result = std::async(std::launch::async, [](){WriteLogDB(logMesg);});
// do stuff while that's happening
result.get(); 
```

如果您被 2011 年之前的编译器困住，那么就没有标准的线程工具；您需要使用第三方库，例如[Boost](http://www.boost.org/doc/libs/release/doc/html/thread.html)，或者滚动您自己的、特定于平台的线程代码。Boost 有一个类似于新标准类的线程类：

```
boost::thread(boost::bind(WriteLogDB, logMesg)).detach(); 
```

# php - Symfony2 Twig 无限子深度

> ID：12583177
> 
> 赞同：4
> 
> 时间：2012-09-25T12:41:59.167
> 
> 标签：php, symfony, twig

我有一个自联接表，其中每个文件夹都有一个父级，并且其深度是无限的。一个文件夹可以有另一个文件夹作为父文件夹，深度没有限制。

今天我的代码看起来像这样，我正在寻找一种无需对每一步都进行硬编码的情况下尽可能深入挖掘的方法，是否有一种方法可以定义一个带有循环的 twig 函数，该函数在每一轮调用自身在循环？

```
<select id='parent' name='container'>
    <option value='none'>No parent</option>
        {% for folder in folders %}
            <option value='{{ folder.id }}'>{{ folder.name }}</option>
                {% for folder in folder.children %}
                    <option value='{{ folder.id }}'>&nbsp;&nbsp;&nbsp;{{ folder.name }}</option>    
                {% endfor %}
        {% endfor %}
</select> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T13:22:03.313

您需要一个单独的文件渲染选项，它递归地包含自身：

```
<select>
    <option value="none">No parent</option>
    {% include 'options.html.twig' with {'folders': folders, 'level': 0} %}
</select> 
```

`options.html.twig`：

```
{% for folder in folders %}
    <option value="{{ folder.id }}">
        {% for i in range(0, level) %}&nbsp;{% endfor %}
        {{ folder.name }}
    </option>

    {% include 'options.html.twig' with {'folders': folder.children, 'level': level + 1} %}
{% endfor %} 
```

我在这里写了这段代码，所以不要指望它是正确的，但它应该足以给你这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:17:41.793

这必须使用**递归**来完成。我从来没有用树枝测试过它，但你可以开发一种机制，你可以递归地包含一个模板。

因此，您当前的模板会将自身包含在循环中，直到达到特定条件。因此，您的内部循环中需要某种 if 子句。

祝你好运 ;）

# java - 从 Android HTTP Post 检索数据

> ID：12583178
> 
> 赞同：0
> 
> 时间：2012-09-25T12:41:59.863
> 
> 标签：java, android, servlets

我一直在查看其他几篇文章，我想做的是通过设置的 Android 请求检索对象。

我正在使用谷歌 gcm 应用程序。

***我的 Android 代码是***：

```
DefaultHttpClient hc=new DefaultHttpClient();
ResponseHandler <String> res=new BasicResponseHandler();
HttpPost postMethod=new HttpPost("http://192.168.1.111:8080/abc/d");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("My_Value", "My_Value_entered"));  
postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));  
String response=hc.execute(postMethod,res); 
```

我想在我的应用程序（在 servlet 端）中获取值 My_value 。

编辑：如果我的 android 代码需要任何更改或修改以从 Android Post 获取对象值，请随时回复。

任何想法.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:45:00.007

你可以试试`jsoup`哪个更容易使用。您可以在[jsoup.org上查看](http://jsoup.org)

编辑：

像这样：

```
Document document = Jsoup.connect("http://www......com/....php")
                .data("user","user","password","12345","email","info@tutorialswindow.com")
                .method(Method.POST)
                .execute()
                .parse(); 
```

# php - 什么比 PHP Glob 更好？

> ID：12583179
> 
> 赞同：0
> 
> 时间：2012-09-25T12:42:01.117
> 
> 标签：php

有没有比 glob 更快地通过读取目录来显示文件列表的方法？这对一些文件很有用，但是当目录中有很多文件时显示速度很慢？

```
<ul>
        <?php
            foreach (glob("directory/sub-directory/*.pdf") as $filename) {
            $shortname = basename($filename);
            echo "<LI><span class=file><a href=http://www.mysite.com/directory/sub-directory/viewer.php?doc=$shortname>$shortname</a></span></li>\n";
            }
        ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:47:48.147

我猜 opendir() 会快一点。您认为有多少文件很重要？您可能想考虑仅获取目录中的文件块，每当用户滚动到底部时加载下一个块等。

# asp.net-mvc-3 - MVC 3 向局部视图添加动态链接

> ID：12583180
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:42:02.193
> 
> 标签：asp.net-mvc-3, partial-views, dynamic-loading

我们正在使用 MVC 3 构建一个具有动态菜单选项的网站，以便用户只能看到菜单选项（操作链接），这些选项是基于组和个人权限允许他们看到的。

我们如何在运行时添加动态菜单选项（部分视图的链接）？我们是否对所有部分视图的所有链接进行硬编码，并使用可见性选项打开不需要的链接？我们可以从数据库中动态添加链接吗？

让我澄清一下。我们的管理员可以访问所有菜单选项，例如管理用户、管理组、管理供应商、管理产品和管理订单。我们有固定的销售人员，他们只需要管理供应商和管理订单。因此，基于此，我们只需要显示说 Manage Orders 和 Manage Supplier 的链接。因此，它们是我试图建立的链接的动态性质。我们在数据库中设置了权限。

贾瓦哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:50:15.367

当您说“部分视图的链接”时，我不确定我是否完全理解您的意思。您永远不会真正拥有指向局部视图的超链接。我能想到的两种可能性是您想知道如何有条件地嵌入局部视图，或者您希望拥有指向返回局部视图的控制器操作的超链接。

在第一种情况下，您可以将 @Html.RenderPartial 调用放在 @if (myCondition == true) 块内。这样，只有在条件通过时才会显示局部视图。

在第二种情况下，您始终可以调用控制器操作。在您的控制器中，仅当您的条件匹配时才返回 PartialView。否则，返回空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:21:58.423

我找到了一种使用带有 IPrincipal 的方法扩展来执行此操作的方法

```
public static bool IsAllowed(this IPrincipal p, string menuid) { 
if (p.Identity.IsAuthenticated) { 
         //Code here to verify privillegs against Database
     } 
     return false; 
} 

This would keep it fairly neat in you Layout.cshtml. 

@if (User.IsAllowed("menuchoice1")) { 
        <a href="@Url.Action(...)">...</a> 
} 
@if (User.IsAllowed("menuchoice2")) { 
      <a href="@Url.Action(...)>...</a> 
} 
```

希望这可以帮助其他寻找类似选择的人

# java - 简单的多线程java

> ID：12583181
> 
> 赞同：0
> 
> 时间：2012-09-25T12:42:03.993
> 
> 标签：java, multithreading

我有一个内部类在我的类中进行一些异步处理并在父类上设置值。前任 ：

```
class Myclass{
   String test;

   public getTestValueFromMyClass(){
      //this starts asynchronous processing on my inner class
   }

   //inner class
   class InnerClass extends TimerTask{
      //doing something asynchronously, when this process is done
      test = "somevalue";
   }
} 
```

现在这是 Runner 类的问题：

```
class Runner{
    public static void main(String[] args){
       Myclass instance = new Myclass();

       //This is always null because runner class doesn't wait for Inner class to
       //complete asynchronous processing and to set test value
       System.out.println(instance.getTestValueFromMyClass());
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:54:43.847

显然，您必须`getTestValueFromMyClass`等待`InnerClass`执行。这可以通过一些同步工具（Semaphore、CountdownLatch、BlockingQueue...）来完成。但最直接的方法是使用`java.util.concurrent.ScheduledThreadPoolExecutor`而不是`java.util.Timer`. 它的方法`schedule(Callable<V> callable, long delay, TimeUnit unit)`返回Future，`Future.get()`等待并返回计算值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:07:19.133

一种非常简单的机制是使用 a`BlockingQueue`在您的线程之间进行通信。在这里，我在线程类中创建队列，但它可以很容易地在调用者中创建并传递给线程。

```
public class Runner {
  static class MyClass implements Runnable {
    // Thread will post to this queue when it completes.
    BlockingQueue q = new ArrayBlockingQueue(1);

    // Call to wait for the post.
    public void waitForFinish() throws InterruptedException {
      // Just take! This will wait until something gets posted.
      q.take();
    }

    @Override
    public void run() {
      try {
        // Just wait ten seconds.
        Thread.sleep(10000);
      } catch (InterruptedException ex) {
        // Just exit when interrupted.
      } finally {
        try {
          // Signal finished.
          q.put("Done");
        } catch (InterruptedException ex) {
          // Just exit when interrupted.
        }
      }
    }
  }

  public static void main(String[] args) throws InterruptedException {
    // Make my instance.
    MyClass instance = new MyClass();
    // Fire it off.
    new Thread(instance).start();
    // Wait for it to finish.
    instance.waitForFinish();
    // All done.
    System.out.println("Finished");
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T19:44:56.930

其他人提出了类似的想法，但我会使用带有`Callable`.

您正在执行异步处理的类应该实现`Callable`将返回计算值。在此示例中，它返回 a`String`但它也可以返回您自己的包含更多信息的对象。

```
public class MyClass implements Callable<String> {
   public String call() {
      //doing something asynchronously, when this process is done
      return "somevalue";
   }
} 
```

然后你的`Runner`类将创建一个线程池，在后台启动异步任务，然后等待它完成。`Callable`当您向线程池提交作业时，您会`Future`返回一个类，该类可用于等待异步作业完成并获取其返回值。

```
public class Runner{
    public static void main(String[] args) {
       // you can use newFixedThreadPool(...) if you need to submit multiple
       ExecutorService threadPool = Executors.newSingleThreadExecutor();
       // you could store this future in a collection if you have multiple
       Future<String> future = threadPool.submit(new MyClass());
       // after submitting the final job, we _must_ shutdown the pool
       threadPool.shutdown();

       // do other stuff in the "foreground" while MyClass runs in the background

       // wait for the background task to complete and gets its return value
       // this can throw an exception if the call() method threw
       String value = future.get();
       System.out.println(value);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:44:05.107

您可以使用处理程序并在处理完成后发布消息！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T12:54:35.000

```
class Myclass{
   // pre initialize thread pool
   private static ExecutorService executor = Executors.newFixedThreadPool( 5 );

   private String test;

   public String getTestValueFromMyClass() throws Exception {
      // start asynchronous calculations
      Future<String> resultHandler = 
           executor.submit( new Callable<String>() {
                    @Override
                    public String call() throws Exception {
                        return "Asynchronously calculated result";
                    }
                } );
      // do something in current thread
      // ...
      // wait until asynchronous task ends, get result 
      // and assign it to instance variable
      this.test = resultHandler.get();

      return test; // returns string "Asynchronously calculated result"
   }
} 
```

# javascript - SVG动画跳跃

> ID：12583182
> 
> 赞同：1
> 
> 时间：2012-09-25T12:42:05.783
> 
> 标签：javascript, svg

我刚开始学习一些 SVG（和 javascript，我想），我很难理解为什么这不顺畅。0 移动了少量（大概是在 x 轴上水平移动的“1”），但开始大幅度跳跃。这是因为我使用的浏览器（Chrome）刷新/重绘的速度要长得多吗？任何投入将不胜感激。

```
 <svg width="100%" height="100%"
    xmlns="http://www.w3.org/2000/svg" version="1.1" 
    xmlns:xlink="http://www.w3.org/1999/xlink"
    onload="startup(evt)">
<script>
function startup(evt){
    svgDoc=evt.target.ownerDocument;
    setInterval(function(){
    e=svgDoc.getElementById("zero");
    var x = e.getAttribute("x");
    e.setAttribute("x",x+1);
    },1000);
}
</script>   
<defs>
    <text id="zero">0</text>
</defs>
<use x="40" y="20" xlink:href="#zero"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:45:18.957

您必须确保您使用的是数字而不是字符串：

```
var x = +(e.getAttribute("x"));
e.setAttribute("x",x+1); 
```

JavaScript*更喜欢*字符串“addition”而不是数字，所以当“x”是一个字符串时，`x+1`意味着“将字符 '1' 添加到字符串 x 的末尾”。通过一元“+”运算符将返回值从数字强制`.getAttribute()`为数字，您可以避免该问题。

（有多种方法可以强制将字符串转换为数字。选择你最喜欢的:-)

# java - BroadcastReceiver中Intent的内容

> ID：12583186
> 
> 赞同：0
> 
> 时间：2012-09-25T12:42:19.160
> 
> 标签：java, android

我正在学习如何在android中发送短信，已经看到了如下代码：

```
public class SMSReceiver extends BroadcastReceiver
{
   @Override
   public void onReceive(Context context, Intent intent)
   {
   //---get the SMS message passed in---
   Bundle bundle = intent.getExtras();
   SmsMessage[] msgs = null;
   String str = “”;
   if (bundle != null)
   {
      //---retrieve the SMS message received---
      Object[] pdus = (Object[]) bundle.get(“pdus”);
      msgs = new SmsMessage[pdus.length];
      for (int i=0; i<msgs.length; i++){
         msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
         str += “SMS from “ + msgs[i].getOriginatingAddress();
         str += “ :”;
         str += msgs[i].getMessageBody().toString();
         str += “\n”;
   }
    //---display the new SMS message---
   Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
  }
  }
} 
```

现在我的问题是我怎么知道传递给 onReceive 函数的 Intent 对象的内容是什么？如下：

```
Object[] pdus = (Object[]) bundle.get(“pdus”); 
```

我怎么知道捆绑对象中有一个“pdus”键？我在 API 文档中找不到任何线索，有人知道相关信息在哪里吗？

我不仅想知道 SMS Intent 传递给 onReceive 函数是什么，还想知道其他系统相关的 Intent，但我在 API doc 中找不到任何相关信息。我想知道这些信息真的存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:48:49.280

您可以检查捆绑包是否包含带有键的键值对，`pdus`如果 有则`bundle.containsKey("pdus")`返回（PDU 在您的情况下是 SMS）。`true``Protocol Data Units`

因此，处理 PDU 的检查应该是`if (bundle != null && bundle.containsKey("pdus"))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:49:03.530

我从这个页面刷了这个代码：http: [//davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/](http://davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/)

```
SmsMessage[] messages = Telephony.Sms.Intents.getMessagesFromIntent(intent); 
```

看起来 Android 可能已经有一种机制来获取您的消息。这是你想要的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:41:17.857

```
public void onClick(View v)
{
   //sendSMS(“5556”, “Hello my friends!”);
   Intent i = new
   Intent(android.content.Intent.ACTION_VIEW);
   i.putExtra(“address”, “5556; 5558; 5560”);
   i.putExtra(“sms_body”, “Hello my friends!”);
   i.setType(“vnd.android-dir/mms-sms”);
   startActivity(i);
} 
```

当我们想要传递到上面调用 SMS 应用程序的意图时，我们如何检查所有可能的密钥？我希望它们被记录在某个地方。

# google-apps-script - Google电子表格脚本检查编辑的单元格是否在特定范围内

> ID：12583187
> 
> 赞同：18
> 
> 时间：2012-09-25T12:42:24.777
> 
> 标签：google-apps-script, google-sheets

我需要检测是否在某个数据范围内对电子表格进行了更改，如果是，请设置当前更新时间。

问题是，我有一个电子表格，我在上面编辑标题和文本，我不希望在电子表格上更新特定单元格中的更新时间，但是当我编辑一系列单元格中的数据时，我确实想要更新时间变了。

这是我要更新的时间。

```
function onEdit(e) 
{
  var ss = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();

  ss.getRange("G10").setValue(new Date());
} ​ 
```

如果我编辑某些单元格（在“B4：J6”范围内），我只想设置 G10 中的日期

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-07-16T18:31:07.183

有一个[事件](https://developers.google.com/apps-script/understanding_events)作为`onEdit()`函数的参数提供，它包含有关编辑内容的必要信息。如果您想知道那`(e)`是怎么回事，就是这样。

由于*每次*`onEdit()`编辑都会调用一个函数，因此您应该在确定是否应该*退出*时投入尽可能少的处理。通过使用传入的事件，您将需要更少的服务调用，因此效率更高。如果您需要灵活，Rasmus 的答案将 A1 表示法转换为列号和行号的方式很好，但如果编辑范围是固定的，您可以简单地使用常量值进行比较 - 再次减少所需的处理时间。

 **```
function onEdit(e) 
{
  var editRange = { // B4:J6
    top : 4,
    bottom : 6,
    left : 2,
    right : 10
  };

  // Exit if we're out of range
  var thisRow = e.range.getRow();
  if (thisRow < editRange.top || thisRow > editRange.bottom) return;

  var thisCol = e.range.getColumn();
  if (thisCol < editRange.left || thisCol > editRange.right) return;

  // We're in range; timestamp the edit
  var ss = e.range.getSheet();
  ss.getRange(thisRow,7)   // "G" is column 7
    .setValue(new Date()); // Set time of edit in "G"
} ​ 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-04-13T05:33:28.617

# 最简单的方法是命名您的触发范围

通过命名您的“触发”范围，一旦您在脚本中设置了范围名称，您就不必弄乱脚本。通过简单地在标准 google 表格界面中编辑命名范围的范围，即使您扩大或缩小范围的大小，脚本仍然可以工作。

## 第 1 步：命名您的范围

如果您按照此处的说明编辑范围内的任何单元格，请将您感兴趣的单元格范围命名为脚本的触发器：https: [//support.google.com/docs/answer/63175](https://support.google.com/docs/answer/63175)

我将我的范围命名为“triggerRange”。

## 第 2 步：将您的范围名称编辑到以下脚本中：

```
function onEdit(e) {
      var myRange = SpreadsheetApp.getActiveSheet().getRange('triggerRange'); //<<< Change Your Named Ranged Name Here inside the getRange() function.
      //SpreadsheetApp.getUi().alert("myRange in A1 Notation is: " + myRange.getA1Notation()); //If you're having problems, uncomment this to make sure your named range is properly defined

      //Let's get the row & column indexes of the active cell
      var row = e.range.getRow();
      var col = e.range.getColumn();
      //SpreadsheetApp.getUi().alert('The Active Cell Row is ' + row + ' and the Column is ' + col); //uncomment this out to do testing

      //Check that your active cell is within your named range
      if (col >= myRange.getColumn() && col <= myRange.getLastColumn() && row >= myRange.getRow() && row <= myRange.getLastRow()) { //As defined by your Named Range
        SpreadsheetApp.getUi().alert('You Edited a Cell INSIDE the Range!');//Repalace Your Custom Code Here
      } else {
        SpreadsheetApp.getUi().alert('You Edited a Cell OUTSIDE the Range!');//Comment this out or insert code if you want to do something if the edited cells AREN'T inside your named range
        return;
      }
    } 
```

PS：感谢其他发帖者为这个基本脚本提供了基本框架。我显然已经对脚本进行了大量评论，因此您可以轻松地对其进行测试。删除我在脚本中创建的警报以获得更清晰的外观......或者只是复制并粘贴它：

```
function onEdit(e) {
  var myRange = SpreadsheetApp.getActiveSheet().getRange('triggerRange'); //<<< Change Your Named Ranged Name Here

  //Let's get the row & column indexes of the active cell
  var row = e.range.getRow();
  var col = e.range.getColumn();

  //Check that your active cell is within your named range
  if (col >= myRange.getColumn() && col <= myRange.getLastColumn() && row >= myRange.getRow() && row <= myRange.getLastRow()) { //As defined by your Named Range
    SpreadsheetApp.getUi().alert('You Edited a Cell INSIDE the Range!');//Repalace Your Custom Code Here
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T09:32:52.323

您可以简单地检查编辑事件是否在范围内发生。

```
function onEdit(e)
{
  var sheet = SpreadsheetApp.getActiveSheet();
  var editRange = sheet.getActiveRange();
  var editRow = editRange.getRow();
  var editCol = editRange.getColumn();
  var range = sheet.getRange("B4:J6");
  var rangeRowStart = range.getRow();
  var rangeRowEnd = rangeRowStart + range.getHeight();
  var rangeColStart = range.getColumn();
  var rangeColEnd = rangeColStart + range.getWidth();
  if (editRow >= rangeRowStart && editRow <= rangeRowEnd 
      && editCol >= rangeColStart && editCol <= rangeColEnd)
  {
    // Do your magic here
  }
} 
```

我承认这非常冗长，但我仍然没有在 range ala range.contains(range) 上找到一个简单的方法

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-22T16:26:57.633

只是对 Rasmus 先前答案的可能问题的快速修复：

线上：

```
var rangeRowEnd = rangeRowStart + range.getHeight();
var rangeColEnd = rangeColStart + range.getWidth(); 
```

它正在添加（实际上它没有减去初始行和列。这导致范围比 1 行和 1 个整列的预期范围更大。只需在同一行中减去 1：

```
var rangeRowEnd = rangeRowStart + range.getHeight()-1;
var rangeColEnd = rangeColStart + range.getWidth()-1; 
```

Rasmus Fuglsnag 的代码和更正应如下所示：

```
function onEdit(e)
{
  var sheet = SpreadsheetApp.getActiveSheet();
  var editRange = sheet.getActiveRange();
  var editRow = editRange.getRow();
  var editCol = editRange.getColumn();
  var range = sheet.getRange("B4:J6");
  var rangeRowStart = range.getRow();
  var rangeRowEnd = rangeRowStart + range.getHeight()-1;
  var rangeColStart = range.getColumn();
  var rangeColEnd = rangeColStart + range.getWidth()-1;
  if (editRow >= rangeRowStart && editRow <= rangeRowEnd 
      && editCol >= rangeColStart && editCol <= rangeColEnd)
  {
    // Do your magic here
  }
} 
```

感谢**Rasmus Fuglsnag**提供了最简单的方法。我不敢相信有更好更简单的方法可以通过代码来做到这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-13T04:51:25.537

如果你想要很少的代码行，你可以使用：

```
function onEdit(){
  var cell = SpreadsheetApp.getActive().getActiveCell();
  var row = cell.getRow();
  var col = cell.getColumn();

  //if col > A && col < K ...
  if(col > 1 && col < 11 && row > 3 && row < 7){ //B4:J6
    //do something
  } 
```

但是，更改范围可能需要比其他方法更长的时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-24T20:29:59.167

为了保持舒适的代码，您可以使用调度程序（受[Doomd](https://stackoverflow.com/a/49809937/3225970)答案的启发）。

```
/** 
 if the changed cell is in the good sheet and range:
 @returns {Range} : the changed cell range
 else
 @returns {boolean} : false
*/
function onEdit_inRange(e,sheetName,sheetRange){
    var sh=e.range.getSheet();
    if(sh.getName()===sheetName){
        var range = SpreadsheetApp.getActiveSheet().getRange(sheetRange);
        var xy=[e.range.getColumn(),e.range.getRow()];
        if (xy[0]>=range.getColumn() && xy[0]<=range.getLastColumn() && xy[1]>=range.getRow() && xy[1]<=range.getLastRow()) {
            return e.range;
        }
    }
    return false;
} 
```

如何使用 ：

```
function onEdit(e){
    var range=0;
    if((range=onEdit_inRange(e,'Stats','Q47:Z47'))){
        _handle_stats(range);
    }else if ((range=onEdit_inRange(e,'Calendar','A5:B29'))) {
        _handle_calendar(range);
    }// etc ...
} 
```**

# asp.net - 无法在 webconfig 中设置 httpRuntime requestValidationMode="2.0"

> ID：12583188
> 
> 赞同：0
> 
> 时间：2012-09-25T12:42:26.243
> 
> 标签：asp.net, .net, .net-4.0

我已经将 Web 应用程序从 2.0 切换到 4.0。

我对 validateRequest="false" 有疑问，我需要从 aspx 页面读取 xml 文件（该页面由另一个网站调用，用户看不到）。它在 2.0 中运行良好。现在另一个网站返回错误 500。我在 google 上发现在 webconfig system.web 中，我必须设置但属性 requestValidationMode 无效（并且 intellisense 在 VS 中没有向我显示）...

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:46:00.700

您添加此代码

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestValidationMode="2.0" />
</system.web>

Nota : On IIS :  Right click on WebSite 
                 - Select> Properties > ASP.NET > Version > 
                 - Select 4.0.21006 not 2.0 
```

# pdf - 无法理解 PDF 函数（类型 4）流语法

> ID：12583190
> 
> 赞同：1
> 
> 时间：2012-09-25T12:42:29.417
> 
> 标签：pdf

```
stream
{ 360 mul sin
2 div
exch 360 mul sin
2 div
add
}
endstream 
```

有人可以向我解释一下这个语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:47:08.247

这在我看来不像 PDF：

*   `stream`并且`endstream`是PDF关键字，是的。

*   但其余的看起来更像 PostScript。

因此`stream`，`endstream`也可以是 PostScript 变量或函数，在同一代码的其他地方（之前）定义...

* * *

作为 PostScript，代码意味着：

*   `{`并且`}`只是将代码构造成块的分隔符
*   `360 mul sin`：乘以 360（*乘以什么？* => 栈顶的值），计算结果的正弦值，并将其作为栈顶的值。
*   `2 div`: 将栈顶的值除以 2。
*   `exch 360 mul sin`：交换堆栈上最顶层的 2 个项目，将现在最顶层的项目乘以 360，计算它的正弦值并将其放回堆栈上。
*   `2 div`: 将栈顶的值除以 2。
*   `add`：在堆栈上添加 2 个最顶层的值。

* * *

**更新：**

哎哟!

我完全忘记了 PDF 规范允许在 PDF 文档中使用的（非常有限的）PostScript*函数对象的细节。*这些代表自包含和静态的数值转换。

所以我上面对作为计算器函数的 PostScript 代码的解释仍然有效，在我看来，它就像描述半色调屏幕的“点函数”。（但是，`stream`在这种情况下，当然要保留它们作为 PDF 关键字的原始含义，并且*需要*`endstream`大括号`{`和`}`来包含函数定义。）

 *由于这些 PostScript 函数对象的 PDF 规范不允许使用*数组*、*变量*、*名称*或*字符串*，而只允许使用*整数*、*实数*和*布尔值*作为值，因此这些代码段的处理不需要完全成熟的 PostScript 解释器，并且规范中的此声明：

> *“PDF 不是编程语言，PDF 文件也不是程序。”*

仍然适用，并且仍然使 PDF 语言与 PostScript（一种*编程*语言，PS 文件*是*程序）有很大不同。

请记住，PostScript 是一种基于堆栈的语言，通过考虑使用[*“逆波兰表示法”*](http://en.wikipedia.org/wiki/Reverse_Polish_notation)约定的袖珍计算器来理解其代码将有助于您围绕这个主题展开思考......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:41:35.190

它是一个后记程序，它在原始数据上执行以提供最终值。您将需要一个 Postscript 解析器来处理它*

# c# - asp.net mvc中复杂类型的复选框列表

> ID：12583198
> 
> 赞同：0
> 
> 时间：2012-09-25T12:42:49.510
> 
> 标签：c#, asp.net-mvc, checkbox

我有以下课程：

```
public class ControllerSecurityModel
{
    public string ControlleName { get; set; }
    public string DisplayName { get; set; }
    public List<ActionSecurityModel> actions { get; set; }
}
public class ActionSecurityModel
{
    public string ActionName { get; set; }
    public string DisplayName { get; set; }
    public bool IsChecked { get; set; }
} 
```

和一个模型：

```
public class PageRoleModel
{
    public List<ControllerSecurityModel> AllPages { get; set; }

    public List<ControllerSecurityModel> SelectedPage { get; set; }
} 
```

我想为每个“ActionSecurityModel”设置复选框，我写在下面的视图：

```
<% using (Html.BeginForm())
   {%>
<% foreach (var cont in Model.AllPages)
   {%>
<fieldset>
    <legend>
        <%= cont.DisplayName  %></legend>
    <% foreach (var act in cont.actions)
       {%>
    <%: Html.CheckBoxFor(x => act.IsChecked) %>
    <%: Html.Label(act.DisplayName) %>
    <% } %>
</fieldset>
<% } %>
<input type="submit" value="save"/>
<% } %> 
```

这是我的控制器动作：

```
 public ActionResult SetRole()
    {
        PageRoleModel model = new PageRoleModel();

        return View(model);
    }

    [HttpPost]
    public ActionResult SetRole(PageRoleModel model)
    {
        return View(model);
    } 
```

但是当我提交表单时，模型为空？如何提交复选框并保存它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:49:35.887

像这样：

```
<% using (Html.BeginForm()) { %>
    <% for (var i = 0; i < Model.AllPages.Count; i++) { %>
    <fieldset>
        <legend>
            <%= Model.AllPages[i].DisplayName %>
        </legend>
        <% for (var j = 0; j < Model.AllPages[i].actions.Count; j++ ) { %>
            <%= Html.CheckBoxFor(x => x.AllPages[i].actions[j].IsChecked) %>
            <%= Html.Label(Model.AllPages[i].actions[j].DisplayName) %>
        }
    </fieldset>
    <% } %>
    <input type="submit" value="save"/>
<% } %> 
```

要了解为什么我的解决方案有效而您的解决方案无效，请阅读默认模型绑定器用于集合的预期[线路格式。](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)然后通过浏览生成的 HTML 源代码来查看生成的表单输入字段的名称——你会很快看到`name`复选框属性的根本区别。

也不要期望在 POST 操作中绑定整个模型。您的表单中只有一个输入字段 - 一个复选框。所以这是唯一要发送到服务器并绑定到模型的值。如果您还需要其他值，则可以将它们包含为隐藏字段：

```
<!-- in the outer loop: -->
<% =Html.HiddenFor(x => x.AllPages[i].DisplayName) %>
...
<!-- and then in the inner loop -->
<%= Html.HiddenFor(x => x.AllPages[i].actions[j].ActionName) %>
<%= Html.HiddenFor(x => x.AllPages[i].actions[j].DisplayName) %>
... and so on ... 
```

此外，我强烈建议您使用编辑器模板，而不是在视图中编写这些循环。他们会自动为您的输入字段生成正确的名称，这样您就不必担心。关于这个话题，我有无数的答案。只需谷歌我的名字并添加`editor templates asp.net mvc`到您的搜索中，您应该会得到很多结果。

# eclipse - Eclipse 多个文本选择，如 sublime text 2

> ID：12583201
> 
> 赞同：46
> 
> 时间：2012-09-25T12:42:52.910
> 
> 标签：eclipse

是否有 Eclipse 的选项或插件可以在同一个编辑器中启用多个同时选择。

在崇高的文本中，选择一些文本然后按 Ctrl+d 将尽可能将相同文本的下一个实例添加到选择中。选择所需的实例后，编辑器有多个 carrets（不一定在相同或相邻的列和行上）。在这种模式下，可以同时向前或向后移动所有光标并同时编辑所有文本实例。

我发现这个功能非常有用，并且在 Eclipse 中非常想念它。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-03T15:35:07.023

此 Eclipse 插件尝试提供此功能：[https](https://github.com/caspark/eclipse-multicursor) ://github.com/caspark/eclipse-multicursor 。从自述文件：

> # 这是什么？
> 
> 为 Eclipse IDE 中的文本编辑器提供类似 Sublime-Text 的多光标支持的工作正在进行中。
> 
> # 什么有效？
> 
> *   可以使用 Eclipse 链接模式编辑同时编辑多个相同的行（类似于现有的“在文件中重命名”功能）
> 
> # 下一步
> 
> *   “选择下一个”功能 + 使用 Eclipse 链接模式的关联编辑
>     
>     
> *   “查找下一个”+ 相关编辑
>     
>     
> *   编辑不相同的文本/不使用链接模式进行编辑
>     
>     
> *   将选择拆分为行
>     
>     
> *   正则表达式支持查找下一个

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-31T23:08:23.727

此功能在[LiClipse](http://www.liclipse.com/)中可用。

[看看它的实际效果](http://www.liclipse.com/multi_edition_video.html)（更多接近视频的结尾）。

它支持用`Ctrl`+链接，用+ +`K`取消链接，+ +鼠标双击选择单词或+ +鼠标选择一个区域（或只是结束行）。`Shift``Alt``K``Ctrl``Alt``Ctrl``Alt`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T04:08:20.670

Preferences>General>keys>Rename - refactoring 我将绑定更改为 command + shift + R when > Editing Text。抱歉提出一个老问题，在谷歌搜索问题后偶然发现

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-11T14:15:26.237

`Alt`++ ，然后您可以按住 shift 并在多行中使用光标`Shift`。`A`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T16:44:26.687

喜欢`Ctrl`+`D`我找不到，但喜欢崇高的`Alt`+ `F3`（多选所有匹配项），你可以按`Alt`+ `Shift`+`R`或`select text > right click > refactor > rename`.

*必须说这不适用于任何类型的文本。它适用于变量、函数、类等的名称。*

在 Eclipse 3.8.1 上测试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-07T02:38:31.923

`ALT`++`SHIFT`为`F`我工作。

![在此处输入图像描述](../Images/0e0ec03a13890c78985fb2c9f8cbd8ea.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-14T13:34:54.980

您可以在此处查看所有人的快捷方式：

**转到 -> Window -> Preferences -> General -> Keys**并搜索**replace然后您将看到****Find and replace**的绑定。在该窗口的底部，您可以将密钥添加到**绑定**文本框。在那里，您可以添加或编辑任何键作为快捷方式。

如果要替换选定单词的匹配单词或查找选定单词，请使用以下键，因为您不需要在 eclipse 中选择所有单词：

`Ctrl`+`F`给我查找/替换对话框。

或者你可以，

第一个`Alt`+`A`

下一个`Alt`+`F`

然后根据您的需要按下**替换**或**搜索**按钮。

# php - 在 oscommerce 的类别下显示子类别

> ID：12583203
> 
> 赞同：0
> 
> 时间：2012-09-25T12:42:57.867
> 
> 标签：php, mysql, list, categories

这是我到目前为止的标记：

```
<?php

$categories_query = tep_db_query("select c.categories_id, cd.categories_name, c.categories_image, c.parent_id, c.sort_order, c.date_added, c.last_modified from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd where c.categories_id = cd.categories_id order by c.sort_order ASC");
while ($categories = tep_db_fetch_array($categories_query)){

echo '<tr class="dataTableRow">
<td class="dataTableContent">' . $categories ['categories_name'] . '</td>';
?>

<td class="dataTableContent"></td>

<?php
echo '</tr>';
}
?> 
```

这会在页面上显示所有类别和子类别，但没有顺序，我需要的是子类别显示在主类别下。我有一些关于我将如何做的线索，`sort_order`字段和`parent_id`字段之间的链接。主分类使用该`sort_order`字段作为id，subccat的使用该`parent_id`字段对所属的分类进行排序。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:40:43.923

我不确定如何使用单个 MySQL 查询来显示类别树，所以我建议使用递归 PHP 函数：

```
<?php
    function showChildCategories($parent) {
       $parent = intval($parent);

       // Select only categories with parent_id = $parent
       $categories_query = tep_db_query("select 
               cd.categories_name,
               c.categories_id
           from " . TABLE_CATEGORIES . " c, " . 
               TABLE_CATEGORIES_DESCRIPTION . " cd 
           where c.categories_id = cd.categories_id 
                 and c.parent_id = $parent
           order by c.sort_order ASC");

       // Go through all query result rows
       while ($categories = tep_db_fetch_array($categories_query)){
           // Show category name
           echo '<tr class="dataTableRow"><td class="dataTableContent">' . 
               $categories ['categories_name'] . '</td></tr>';

           // Show child categories for current row
           showChildCategories($categories ['categories_id']);
       } // while
    } // function showChildCategories

    // Show top-level categories and all their children recursively
    showChildCategories(0);
?> 
```

# php - Cani 我在 xml 文件中使用 php 循环吗？

> ID：12583205
> 
> 赞同：0
> 
> 时间：2012-09-25T12:43:04.717
> 
> 标签：php, xml

我可以在 xml 文件中使用 php 循环来列出数字递增文件名的列表，例如文件 1.jpg file2.jpg file3.jpg 等，以节省我手动输入的麻烦。如果是这样，我该怎么做以及xml文件需要什么文档类型等才能使其显示循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:56:35.453

您的问题有点含糊，如果您尝试读取或写入 XML 文件，我无法确定。

假设您要读取一个 XML 文件，并假设您的 XML 看起来有点像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<rootnode>
  <images>
    <image>file_1.jpg</image>
    <image>file_2.jpg</image>
    <image>file_3.jpg</image>
  </images>
</rootnode> 
```

您可以使用 SimpleXML 加载 XML 文件或将 XML 作为字符串加载，然后返回一个对象进行循环。 [http://php.net/manual/en/ref.simplexml.php](http://php.net/manual/en/ref.simplexml.php)

你的 PHP 可能看起来像这样：

```
if (file_exists('test.xml')) {
    $xml = simplexml_load_file('test.xml');

    foreach($xml->images AS $image) {
        echo $image;
    }
} else {
    exit('Failed to open test.xml.');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:57:07.677

我要做的是指向一个输出 XML 的 .php 文件。您需要做的就是发送一个 header("Content-Type: text/xml"); 并确保在输出顶部添加。

这是一个例子：

```
 <?php

    header("Content-Type: text/xml");

    print "<?xml version=\"1.0\"?>";

    print "<rootNode>";

    for(your loop stuff here) {
        print "<node>" . $yourDataHere . "</node>";
    }

    print "</rootNode>";

    ?> 
```

# c# - 自定义工作流程步骤 - 从实体中检索字段

> ID：12583208
> 
> 赞同：1
> 
> 时间：2012-09-25T12:43:24.870
> 
> 标签：c#, dynamics-crm-2011, workflow-activity

我有一个工作流活动，用于定期向供应商发送电子邮件，并在没有回复时安排后续电话等。但是我的问题是我需要在发送消息之前以某种方式检索每个供应商的电子邮件。

如何从 CRM 2011 中的特定实体中检索特定字段中的值？

这是伪代码：

```
For each supplier entity in the system {

     if (sendSalesRequest) {

          Send Initial E-mail
          - wait 21 days
          if (noReply) {
              Send Follow up e-mail
              - wait 7 days
              if (noFollowupReply) {
                 schedule phone call activity everyday until reply
              }
          }
      }
} 
```

但是，我需要一种从供应商实体中检索电子邮件地址的方法。

我不是在寻找一个可行的解决方案（尽管我不会拒绝它！），只是关于如何完成这项任务的指南，因为我是 CRM 开发的新手。

谢谢，

泰辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:43:52.373

如果您是 2011 年的新手，我建议您阅读有关[SDK](http://msdn.microsoft.com/en-us/library/hh547453.aspx)的信息。特别是您需要查看[自定义工作流活动](http://msdn.microsoft.com/en-us/library/gg309745.aspx)开发。它有一些样本应该可以帮助你。

我建议有：

1.  主工作流，只需一个步骤即可调用处理供应商的自定义工作流活动。每当您想要处理所有供应商时，您都可以启动此工作流程。
2.  发送初始电子邮件的按需工作流
3.  发送后续电子邮件的按需工作流
4.  安排电话呼叫的按需工作流

我建议这样做的原因是，这意味着您将数据的创建保留在更易于管理和处理的工作流中。例如，您可以在不重新编译您的自定义工作流活动的情况下更改电子邮件消息。

因此，您的主自定义工作流活动的第一步是查询 Crm，我建议从[QueryExpression](http://msdn.microsoft.com/en-us/library/gg328300.aspx)开始。这样你就可以得到数据来建立你的逻辑。

然后，您需要一些代码来针对记录启动工作流，发送电子邮件和电话。这里有一个例子[。](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.executeworkflowrequest.aspx)

然后你的代码看起来有点像这样：

```
 QueryExpression query = new QueryExpression("supplier");
    query.ColumnSet = new ColumnSet("sendsalesrequest", "noreply", "nofollowupreply");

    EntityCollection entities = service.RetrieveMultiple(query);
    entities.Entities.ToList().ForEach(entity => 
        {
            if(entity["sendsalesrequest"] == "Yes")
            {
                StartWorkflow(entity.Id, "Send Initial E Mail Workflow Name");
            }
            //etc
        } 
```

这是相当高的水平，但希望能让你朝着正确的方向前进。

# maven - jenkins maven 存储库配置

> ID：12583212
> 
> 赞同：5
> 
> 时间：2012-09-25T12:43:34.190
> 
> 标签：maven, repository, jenkins

我是 maven 和 Jenkins 的新手，我正在尝试构建一个 maven 3 项目。我在 c 驱动器中有 maven，并且我将存储库移动到了 d 驱动器。但是当我在 Jenkins 中配置构建时，它正在创建自己的存储库（我认为是这样） 现在如何配置 jenkis，以便它可以使用我在 D 驱动器中的存储库。

希望我说得通。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:18:35.743

您需要调整 settings.xml 以指出要使用的存储库。

C:.m2\m2 存储库。

此外，您应该确保 maven 正在使用哪个 settings.xml，如果您没有任何特定的用户 settings.xml，maven 将开始使用 maven 配置目录中的 settings.xml，即 /conf/settings.xml . settings.xml 的层次结构是用户 .m2 目录，如果找不到，它将尝试在 maven home/conf/settings.xml 中找到该目录。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T03:45:44.597

您可能需要检查下的 settings.xml 文件

1.  ..\maven-xx\conf\settings.xml 文件
2.  C:\Users\Username.m2\settings.xml 文件

您可能需要按提到的顺序记住优先级。如果您需要指向私有 Maven 存储库，请考虑检查这两个文件，如果它未指向预期位置，则相应地更新设置文件。

# sql - 如何使用 Oracle 11g / DBMS_XMLGEN 创建嵌套 XML 文件？

> ID：12583215
> 
> 赞同：2
> 
> 时间：2012-09-25T12:43:38.180
> 
> 标签：sql, xml, plsql

我正在使用 Oracle 11g ( 11.1.0.7.0 )，我必须创建一个查询的 XML 文件。我在 Forms 6 中使用这个文件，正是用户希望能够在按下表单中的按钮时创建 XML 文件，所以我有一个 PL/SQL 包，它创建一个带有 XML 数据的 CLOB 文件服务器和 Forms 6i 我逐行读取此文件行（ UTL_FILE.FOPEN 读取它， UTL_FILE.GET_LINE 读取行）并使用 TEXT_IO.PUT_LINE 在客户端计算机上写入文件。这很好用，但我对 XML 文件有疑问。现在它看起来像这样（值是示例！）：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<ShoeShop>
  <Article>
    <Artnumber>12345</Artnumber>
    <Artdesc>Black Shoes</Artdesc>
  </Article>
  <Article>
    <Artnumber>12346</Artnumber>
    <Artdesc>White Shoes</Artdesc>
  </Article>
</ShoeShop> 
```

好的。我想创建一个如下所示的 XML 文件，但我不知道怎么做！我是 SQL/PLSQL 的新手，我学习到 2 个月，在此之前我使用过 Progress 4GL。所以在进行中，我把我想做的事情称为“嵌套”，但我不知道如何用 SQL/PLSQL 来实现它。XML 文件的示例我想如何获取它：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<ShoeShop>
  <Article="12345">
    <Artdesc>Black Shoes</Artdesc>
  </Article="12345">
  <Article="12346">
    <Artdesc>White Shoes</Artdesc>
  </Article="12346">
</ShoeShop> 
```

创建 XML 文件的代码片段与第一个示例类似：

```
PROCEDURE XML_TO_CLOB( pi_Query      IN VARCHAR2,
                       pi_ParentNode IN VARCHAR2,
                       pi_ChildNode  IN VARCHAR2 ) IS
  qryCtx DBMS_XMLGEN.ctxHandle;
  cResult CLOB;
BEGIN
-- Create new Context for the Query
  qryCtx := DBMS_XMLGEN.newContext( pi_Query );

-- Set Parent and Child Node
  DBMS_XMLGEN.setRowSetTag( qryCtx, pi_ParentNode );
  DBMS_XMLGEN.SetRowTag( qryCtx, pi_ChildNode );

-- setNullHandling to show Tag also when the value is NULL
  DBMS_XMLGEN.setNullHandling( qryCtx, DBMS_XMLGEN.EMPTY_TAG );

-- getXML in CLOB
  cResult := DBMS_XMLGEN.getXML( qryCtx );

-- Put encoding to the "Header"
  cResult := REPLACE( cResult, '<?xml version="1.0"?>', '<?xml version="1.0" encoding="ISO-8859-1" ?>' );

-- Close Context
  DBMS_XMLGEN.closeContext( qryCtx );

-- Write the CLOB to a file on the server to work with the data in Forms 6i
  DBMS_XMSLPROCESSOR.CLOB2FILE( cResult, 'ExampleDir', 'Example.xml' );
END; 
```

非常感谢，

莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:52:23.240

There are some examples of using DBMS_XMLGEN to generate nested documents in the documentation. [Check out example 17-27](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb13gen.htm#i1025386).

The Oracle solution involves using user-defined types to specify the shape of the document, including columns which will be included as attributes rather than elements. This might be more infrastructure than you were expecting.

# google-app-engine - Google Cloud Storage 文件的密钥（通过 GAE 中的 create_gs_key() 创建）最终会过期吗？

> ID：12583224
> 
> 赞同：1
> 
> 时间：2012-09-25T12:44:16.127
> 
> 标签：google-app-engine, google-cloud-storage

...例如，将一些文件放入数据存储并在几个月后使用它们进行访问是否安全，即使其他文件后来被添加到它们所在的存储桶中？

...或者它们是否更像是会话密钥，应该在您需要它们时从路径中重新创建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:04:36.820

是的，您可以无限期地保留这些密钥。

当您使用密钥时，我们会按需获取访问令牌。

[注意：create_gs_key() 的初始实现确实过期了，所以可能有一些文档说你不能持久化密钥——这不再准确。]

# google-app-engine - 编写 NDB 属性子类

> ID：12583233
> 
> 赞同：1
> 
> 时间：2012-09-25T12:44:52.663
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

我正在编写 ImgProperty，我想在其中为用户提供一种定义默认高度和宽度的方法，如下所示：

```
class MyModel(ndb.Model):
  img = ImgProperty(height=32, width=32) 
```

进而：

```
m = MyModel(img='https://example.com/my-photo') 
```

然后图像将保存到调整大小为给定高度、宽度值的数据库中。ImgProperty 本身是 BlobProperty 的子类。我可以将这两个属性添加到 Property._attributes 并使其工作吗？还是最好不要惹它？我看到的另一种方法是创建一个具有字段高度和宽度的中间模型，并将`__init__`方法添加到 ImgProperty。像这样的东西：

```
class ImgModel(ndb.Model):
  height = ndb.IntegerProperty()
  width = ndb.IntegerProperty()

class ImgProperty(ndb.BlobProperty):
  def __init__(self, **kwds):
        super(ImgProperty, self).__init__(ImgModel, **kwds) 
```

我不确定这种方式是否允许像`img = ImgProperty(height=32, width=32)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:05:14.940

我可以回答你关于构造函数签名的问题。您应该可以按以下方式执行此操作：

```
class ImgProperty(ndb.BlobProperty):
  def __init__(self, height=32, width=32, **kwds):
    self.height = height
    self.width = width
    super(ImgProperty, self).__init__(**kwds) 
```

对于其余部分，我想您正在关注文档：[https ://developers.google.com/appengine/docs/python/ndb/subclassprop](https://developers.google.com/appengine/docs/python/ndb/subclassprop)

我真的无法帮助您调整大小（使用图像 api）；但是我想知道您是否最好在将数据存储到属性值之前手动进行调整大小调用，以避免对图像 api 进行不必要的额外调整大小调用；自动属性转换非常强大，但有时可能会进行冗余调用。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T23:46:24.657

您还可以保存包含大小的 get_serving_url。通过这种方式，您可以使用 Google 提供图像的 Google 高性能图像服务 API。

来自文档：此 URL 格式允许动态调整大小和裁剪，因此您无需在服务器上存储不同的图像大小。图像通过高度优化的无 cookie 基础架构以低延迟提供。

这是一个例子：[https ://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70](https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70)

有关详细信息，请参阅此博客文章：http: [//googleappengine.blogspot.nl/2010/08/multi-tenancy-support-high-performance_17.html](http://googleappengine.blogspot.nl/2010/08/multi-tenancy-support-high-performance_17.html)

# c# - 如何在 TabPages/TabControl 中滚动

> ID：12583235
> 
> 赞同：2
> 
> 时间：2012-09-25T12:44:55.317
> 
> 标签：c#, winforms

我有 3 页的 tabcontrol。在标签页中放置了列表视图。列表视图可以比标签页本身更大。

我想在标签页上添加滚动条

我试图用以下来源解决这个问题：

```
 lvwAlbums.Parent = pctlDatabeheer.TabPages[1];
            lvwAlbums.Left = 0;
            lvwAlbums.Top = 0;
            lvwAlbums.Width = pctlDatabeheer.TabPages[1].Width - 35;
            lvwAlbums.Height = 1000;// pctlDatabeheer.TabPages[1].Height;
            lvwAlbums.SmallImageList = iltListView;
            lvwAlbums.FullRowSelect = true;
            lvwAlbums.Anchor = AnchorStyles.Bottom | AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top;

 foreach (TabPage _Page in pctlDatabeheer.TabPages)
            {
                _Page.AutoScroll = true;
                _Page.AutoScrollMargin = new System.Drawing.Size(20, 20);
                _Page.AutoScrollMinSize = new System.Drawing.Size(_Page.Width, _Page.Height);
            } 
```

但没有显示卷轴。我错了什么？

有谁能够帮助我？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:35:09.273

我创建了一个新的 Visual Studio WinForms 项目。保持表单设计器完全为空并使用您的代码：

```
public Form1()
{
    InitializeComponent();

    // Make TabControl
    TabControl tabControl1 = new TabControl();
    tabControl1.TabPages.Add(new TabPage());
    tabControl1.TabPages.Add(new TabPage());
    tabControl1.Dock = DockStyle.Fill;
    this.Controls.Add(tabControl1);

    // Make long ListView and add to first tab
    ListView listView1 = new ListView();
    listView1.Location = new Point(0, 0);
    listView1.Height = 1000;
    tabControl1.TabPages[0].Controls.Add(listView1);

    // Your code
    foreach (TabPage _Page in tabControl1.TabPages)
    {
        _Page.AutoScroll = true;
        _Page.AutoScrollMargin = new System.Drawing.Size(20, 20);
        _Page.AutoScrollMinSize = new System.Drawing.Size(_Page.Width, _Page.Height);
    }
} 
```

工作得很好。我怀疑您还有其他问题，但是如果没有看到您的代码，我就看不到它或对其进行故障排除。

**编辑：现在您发布了更多代码，您的问题在于您的列表框：**

```
lvwAlbums.Parent = pctlDatabeheer.TabPages[1];
lvwAlbums.Left = 0;
lvwAlbums.Top = 0;
lvwAlbums.Width = pctlDatabeheer.TabPages[1].Width - 35;
lvwAlbums.Height = 1000;
lvwAlbums.SmallImageList = iltListView;
lvwAlbums.FullRowSelect = true;
// Here is the issue!
// Do not anchor to the bottom or scrolling won't work
lvwAlbums.Anchor = AnchorStyles.Bottom | AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top; 
```

不要将控件锚定到底部。这就是你的问题。您不能锚定到底部然后滚动。其他锚都很好。

# asp.net - 页面加载系列事件应该加载什么样的数据:)

> ID：12583237
> 
> 赞同：0
> 
> 时间：2012-09-25T12:45:04.827
> 
> 标签：asp.net

嗨，任何人都可以帮助我在以下事件期间加载什么样的数据来提高网站的性能我没有有效地使用以下方法

*   预初始化
*   在里面
*   初始化完成
*   预载
*   OnPreRender:java脚本可以绑定
*   使成为
*   卸下

    在上述活动期间，这将对我的发展有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:21:26.300

1.  PreInit : 动态控制，母版页等可以在这里设置
2.  Init ：设置控件/属性的初始/默认值。不能使用视图状态。
3.  InitComplete ：设置视图状态数据。
4.  PreLoad：设置控件的属性。
5.  OnPreRender：再次，设置控件属性的最后机会。
6.  渲染：放置一些 HTML 逻辑，类似于动态创建 HTML。
7.  卸载：开发人员在这里应该/可以做的事情不多。

# php - PHP 未定义变量

> ID：12583238
> 
> 赞同：0
> 
> 时间：2012-09-25T12:45:07.200
> 
> 标签：php, function, variables, encryption

我从 Internet 获得了一段代码来使用 TripleDES 加密我的数据。

```
$key = "ThisIsTheKey"; // 24 bit Key
$iv = "fYfhHeDm"; // 8 bit IV
$bit_check = 8; // bit amount for diff algor.

//function to encrypt
function encrypt($text) {
    global $key,$iv,$bit_check;
    $text_num = str_split($text, $bit_check);
    $text_num = $bit_check - strlen($text_num[count($text_num) - 1]);
    for ($i = 0; $i < $text_num; $i++) {
        $text = $text . chr($text_num);
    }
    $cipher = mcrypt_module_open(MCRYPT_TRIPLEDES, '', 'cbc', '');
    mcrypt_generic_init($cipher, $key, $iv);
    $decrypted = mcrypt_generic($cipher, $text);
    mcrypt_generic_deinit($cipher);
    return base64_encode($decrypted);
} 
```

问题是即使我将变量称为全局变量，在顶部（我声明变量的地方）显示变量未使用。以及当我尝试运行它时，它给出了一个错误。但是，当我在函数内部声明相同的变量集时，它会起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T12:47:27.467

作为一般说明，强烈不建议使用全局变量。当我查看您的函数时，我发现它只需要`$text`，但是，它实际上需要`$text`、`$key`、`$iv`和`$bit_check`。

让我们尝试不使用全局变量：

```
$key = "ThisIsTheKey"; // 24 bit Key
$iv = "fYfhHeDm"; // 8 bit IV
$bit_check = 8; // bit amount for diff algor.

//function to encrypt
function encrypt($text, $key, $iv, $bit_check) {
    $text_num = str_split($text, $bit_check);
    $text_num = $bit_check - strlen($text_num[count($text_num) - 1]);
    for ($i = 0; $i < $text_num; $i++) {
        $text = $text . chr($text_num);
    }
    $cipher = mcrypt_module_open(MCRYPT_TRIPLEDES, '', 'cbc', '');
    mcrypt_generic_init($cipher, $key, $iv);
    $decrypted = mcrypt_generic($cipher, $text);
    mcrypt_generic_deinit($cipher);
    return base64_encode($decrypted);
} 
```

并使用它调用它

```
encrypt("Hello World!", $key, $iv, $bit_check); 
```

* * *

另一种解决方案涉及使用 CONSTANTS，假设 key、iv 和 bit_check**在整个执行时间内永远不会改变，**您可以将它们定义为常量，并且它们将在整个应用程序中全局可用，并且**无法更改**。

像这样：

```
const KEY = "ThisIsTheKey"; // 24 bit Key
const IV = "fYfhHeDm"; // 8 bit IV
const BIT_CHECK = 8; // bit amount for diff algor.

//function to encrypt
function encrypt($text) {
    $text_num = str_split($text, BIT_CHECK);
    $text_num = BIT_CHECK - strlen($text_num[count($text_num) - 1]);
    for ($i = 0; $i < $text_num; $i++) {
        $text = $text . chr($text_num);
    }
    $cipher = mcrypt_module_open(MCRYPT_TRIPLEDES, '', 'cbc', '');
    mcrypt_generic_init($cipher, KEY, IV);
    $decrypted = mcrypt_generic($cipher, $text);
    mcrypt_generic_deinit($cipher);
    return base64_encode($decrypted);
} 
```

# google-app-engine - 我们可以在 Jboss 服务器上托管 GAE 应用程序吗？

> ID：12583241
> 
> 赞同：1
> 
> 时间：2012-09-25T12:45:27.553
> 
> 标签：google-app-engine, jboss6.x

我可以在 Jboss 服务器上托管 GAE 应用程序（例如，“hello world”）吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:48:04.050

是的，我认为这就是您要寻找的 - [http://www.jboss.org/capedwarf](http://www.jboss.org/capedwarf)

# android - Appcelerator UrbanAirship 和 android（启动应用程序）

> ID：12583242
> 
> 赞同：1
> 
> 时间：2012-09-25T12:45:28.230
> 
> 标签：android, coffeescript, push-notification, appcelerator, urbanairship.com

我在我的 Appcelerator 项目中使用 UrbanAirship 模块来接收推送通知。我正在接收推送通知，但是当用户在其 Android 设备上单击通知中心的通知时，应用程序不会启动。虽然它在 iPhone 上。任何想法如何解决这一问题？

谢谢。

**更新**

下面是用于在 android 上订阅推送通知的代码

```
UrbanAirship = require("ti.urbanairship")

Ti.API.log "UrbanAirship.pushEnabled " + UrbanAirship.pushEnabled
Ti.API.log "UrbanAirship.pushId " + UrbanAirship.pushId

UrbanAirship.options =
  PRODUCTION_APP_KEY: "XXXX"
  PRODUCTION_APP_SECRET: "XXXX"
  DEVELOPMENT_APP_KEY: "XXXX"
  DEVELOPMENT_APP_SECRET: "XXXX"
  LOGGING_ENABLED: true

UrbanAirship.addEventListener UrbanAirship.EVENT_URBAN_AIRSHIP_CALLBACK, (e) ->
  Ti.API.info "UrbanAirship: Received message " + e.message
  alert e.message

UrbanAirship.addEventListener UrbanAirship.EVENT_URBAN_AIRSHIP_SUCCESS, (e) ->
  token = e.deviceToken
  Ti.App.Properties.setString "device_token", token
  Ti.API.info "UrbanAirship: Received device token " + token

UrbanAirship.addEventListener UrbanAirship.EVENT_URBAN_AIRSHIP_ERROR, (e) ->
  Ti.API.info "UrbanAirship: Error " + e.error

UrbanAirship.pushEnabled = true 
```

在服务器端：

```
notification = {"android" => {"alert" => message}, "apids" => android_device_tokens}
Urbanairship.push(notification) 
```

这是tiapp.xml中的android相关代码

```
<property name="ti.android.debug" type="bool">true</property>
<android xmlns:android="http://schemas.android.com/apk/res/android">
    <manifest android:installLocation="preferExternal"
        android:versionCode="10" android:versionName="1.0.6"/>
    <manifest>
        <supports-screens android:anyDensity="false"/>
        <application>
            <activity
                android:configChanges="keyboardHidden|orientation"
                android:name="org.appcelerator.titanium.TiActivity" android:screenOrientation="portrait"/>
        </application>
    </manifest>
</android> 
```

下面是airshipconfig.properties

```
developmentAppKey = xxx
developmentAppSecret = xxx
productionAppKey = xxx
productionAppSecret = xxx

transport = c2dm

c2dmSender = xxxx@gmail.com
inProduction = true

iapEnabled = false 
```

这是自动生成的 AndroidManifest.xml

```
<?xml version="1.0" ?>
<manifest android:installLocation="preferExternal" android:versionCode="10" android:versionName="1.0.6" package="com.batmanadventure" xmlns:android="http://schemas.android.com/apk/res/android">
  <supports-screens android:anyDensity="false"/>
  <uses-sdk android:minSdkVersion="8"/>
  <permission android:name="com.batmanadventure.permission.C2D_MESSAGE" android:protectionLevel="signature"/>
  <application android:debuggable="false" android:icon="@drawable/appicon" android:label="BatmanAdventure" android:name="BatmanadventureApplication">
    <activity android:configChanges="keyboardHidden|orientation" android:name="org.appcelerator.titanium.TiActivity" android:screenOrientation="portrait"/>
    <receiver android:name="com.urbanairship.CoreReceiver">
      <!-- REQUIRED IntentFilter - For Helium and Hybrid -->
      <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
        <action android:name="android.intent.action.ACTION_SHUTDOWN"/>
      </intent-filter>
    </receiver>
    <receiver android:name="com.urbanairship.push.c2dm.C2DMPushReceiver" android:permission="com.google.android.c2dm.permission.SEND">
      <!-- Receive the actuggal message -->
      <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
        <category android:name="com.batmanadventure"/>
      </intent-filter>
      <!-- Receive the registration id -->
      <intent-filter>
        <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
        <category android:name="com.batmanadventure"/>
      </intent-filter>
    </receiver>
    <service android:name="com.urbanairship.push.PushService"/>
    <receiver android:name="ti.modules.titanium.urbanairship.IntentReceiver"/>
    <activity android:configChanges="keyboardHidden|orientation" android:label="BatmanAdventure" android:name=".BatmanadventureActivity" android:theme="@style/Theme.Titanium">
      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
      </intent-filter>
    </activity>
    <activity android:configChanges="keyboardHidden|orientation" android:name="org.appcelerator.titanium.TiTranslucentActivity" android:theme="@android:style/Theme.Translucent"/>
    <activity android:configChanges="keyboardHidden|orientation" android:name="org.appcelerator.titanium.TiModalActivity" android:theme="@android:style/Theme.Translucent"/>
    <activity android:configChanges="keyboardHidden|orientation" android:name="ti.modules.titanium.ui.TiTabActivity"/>
    <activity android:name="ti.modules.titanium.ui.android.TiPreferencesActivity"/>
    <service android:exported="false" android:name="org.appcelerator.titanium.analytics.TiAnalyticsService"/>
  </application>
  <uses-permission android:name="android.permission.VIBRATE"/>
  <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>
  <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
  <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="com.batmanadventure.permission.C2D_MESSAGE"/>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:10:43.507

首先，这肯定不是urbanairship图书馆的问题。因为 urbanairship 不会错过这种基本的东西。检查[推送事件的自定义处理](https://docs.urbanairship.com/display/DOCS/Client%3A+Android%3A+Push#ClientAndroidPush-CustomHandlingofPushEvents)

在这里，通过检查`PushManager.ACTION_NOTIFICATION_OPENED`然后调用来处理活动的启动略有不同`UAirship.shared().getApplicationContext().startActivity(launch);`

在你的`ti.modules.titanium.urbanairship.IntentReceiver`

```
public class IntentReceiver extends BroadcastReceiver {
    private static final String logTag = "PushSample";

    @Override
    public void onReceive(Context context, Intent intent) {
      String action = intent.getAction();
      if (action.equals(PushManager.ACTION_NOTIFICATION_OPENED)) {
          Log.i(logTag, "User clicked notification. Message: " + intent.getStringExtra(PushManager.EXTRA_ALERT));

          logPushExtras(intent);

          Intent launch = new Intent(Intent.ACTION_MAIN);
          launch.setClass(UAirship.shared().getApplicationContext(), MainActivity.class);
          launch.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
          UAirship.shared().getApplicationContext().startActivity(launch);
    }
} 
```

**您可以在MainActivity.class**中设置要启动的活动`launch.setClass(UAirship.shared().getApplicationContext(),`**`);`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:17:10.537

这可能是urbanairship图书馆的问题。如果他们没有在通知中添加 PendingIntent，它将不会打开您的应用程序。

我只是看了urbanairship.com，但似乎他们没有提供Android的源代码，只有jar。**

# c++builder - TFastLineSeries 中的 TeeChart 快速绘制

> ID：12583243
> 
> 赞同：4
> 
> 时间：2012-09-25T12:45:30.340
> 
> 标签：c++builder, vcl, teechart

我在 Embarcadero C++Builder XE 中使用 TeeChart VCL v2012 的评估版。在我的程序中，我每秒获得大约一千个点并将它们放入 FastLineSeries。要将点放入序列中，我使用 AddXY 方法。当我运行我的应用程序时，它在 3 系列上花费了大约 20% 的处理器时间。我想知道您能否给我一些建议如何提高添加和绘制系列的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:05:58.717

我建议您尝试尽可能多地实施[此处](http://www.teechart.net/reference/articles/index.php)*实时图表*文章中解释的技巧。恢复：

*   禁用/隐藏一些图表元素
*   用数据填充系列。使用数组并删除不需要的点。请参阅“所有功能\Welcome !\Speed\Fast Dynamic Arrays”的功能演示中的示例

其他提示：

*   如果您一次添加多个点，请尝试`AutoRepaint=false`在添加之前设置，然后再返回`AutoRepaint=true`。
*   使用`TFastLineSeries`'`DrawAllPoints`属性。*在"All features\Welcome !\Speed\Fast Line Speed DrawAll"*中查看功能演示中的示例。
*   使用该`TDownSampling`功能。*在"All features\Welcome !\Functions\Extended\Reducing number of points"*中查看功能演示中的示例。

还可以查看*"All features\Welcome !\Speed"*下功能演示中的其他示例。

注意：功能演示是安装时附带的应用程序，它显示了组件支持的大部分功能。

# c# - 无法从视图模型中设置用户控件中的属性

> ID：12583244
> 
> 赞同：2
> 
> 时间：2012-09-25T12:45:32.460
> 
> 标签：c#, wpf, user-controls, mvvm-light, dependency-properties

我正在尝试从视图模型的用户控件中设置一个属性，该控件旨在捕获和显示用户签名。我在从视图模型中设置用户控件中的属性时遇到问题。将来自用户控件的签名接收到视图模型中可以正常工作。

任何有关如何解决此问题的想法将不胜感激。

我的测试代码如下。

**用户控制 XAML：**

```
 <UserControl x:Class="mvvmSignature.ucSignature"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="212" d:DesignWidth="300" Background="#FFEFFCEF">
    <Grid Height="210">
        <InkCanvas MinHeight="73" HorizontalAlignment="Left" Margin="10,27,0,0" Name="inkCanvas1" VerticalAlignment="Top" MinWidth="278" LostMouseCapture="inkCanvas1_LostMouseCapture" />
        <Button Content="Clear" Height="23" HorizontalAlignment="Left" Margin="33,142,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="buttonClear_Click" />
        <Button Content="Load on user control" Height="23" Margin="143,143,36,45" Click="ButtonLoad_Click" />
    </Grid>
</UserControl> 
```

**用户控制代码隐藏：**

```
using System.IO;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Ink;
using System.Windows.Input;
namespace mvvmSignature
{
    public partial class ucSignature : UserControl
    {
        public ucSignature()
        {
            InitializeComponent();
        }
        private void inkCanvas1_LostMouseCapture(object sender, MouseEventArgs e)
        {
            SetSignature();
        }
        private void SetSignature()
        {
            var sb = new StringBuilder();
            using (var ms = new MemoryStream())
            {
                inkCanvas1.Strokes.Save(ms);
                foreach (var item in ms.ToArray())
                {
                    sb.AppendFormat("{0},",
                                        item);
                }
                ms.Close();
            }
            var local = sb.ToString().Trim() + "¬¬¬";
            local = local.Replace(",¬¬¬", string.Empty);
            Signature = local;
        }
        private void LoadSignature(string signatureIn)
        {
            if (string.IsNullOrEmpty(signatureIn) || !signatureIn.Contains(",")) return;
            var x = signatureIn.Split(',').Select(byte.Parse).ToArray();
            if (!x.Any()) return;
            using (var ms = new MemoryStream(x))
            {
                inkCanvas1.Strokes = new StrokeCollection(ms);
                ms.Close();
            }
        }
        public static DependencyProperty SignatureProperty =
        DependencyProperty.Register("Signature", typeof(string),
                                    typeof(ucSignature));
        public string Signature
        {
            get { return (string) GetValue(SignatureProperty); }
            set
            {
                SetValue(SignatureProperty, value);
                LoadSignature(value);
            }
        }
        private void ButtonLoad_Click(object sender, RoutedEventArgs e)
        {
            Signature = "0,136,3,3,6,72,16,69,53,70,53,17,0,0,128,63,31,9,17,0,0,0,0,0,0,240,63,10,237,2,186,1,135,240,12,39,128,97,109,28,4,156,51,90,235,138,135,131,227,95,107,253,119,193,35,104,195,186,246,103,1,195,179,59,78,134,195,179,92,167,188,180,76,206,211,192,77,175,108,211,28,53,136,32,51,41,156,210,3,148,109,22,188,163,105,195,188,11,92,11,184,122,101,188,166,182,124,53,106,153,90,44,217,71,15,64,102,115,59,52,205,105,1,53,128,76,166,179,73,156,202,107,0,195,248,122,106,153,64,22,185,164,210,3,51,154,64,102,51,8,5,174,105,52,128,204,102,19,57,156,215,41,90,69,162,103,1,128,76,128,19,40,4,6,1,102,153,205,96,22,105,156,206,101,53,180,89,230,83,88,4,202,107,0,179,38,120,122,215,52,195,248,120,179,101,25,158,80,195,179,41,156,210,107,50,180,205,38,144,25,156,214,105,52,153,97,249,165,166,101,52,180,205,32,48,0,135,231,164,231,113,153,131,40,225,168,4,6,1,1,128,89,160,22,105,164,214,207,135,32,56,110,3,52,153,192,96,19,80,0,11,68,6,1,105,11,76,2,215,135,50,142,28,77,48,253,160,180,225,232,12,2,107,52,128,205,38,115,91,68,214,105,51,153,77,112,238,30,77,102,80,9,148,214,1,1,154,76,230,64,38,80,8,12,2,101,50,180,205,11,70,29,128,225,236,63,0,153,77,96,19,9,141,154,207,102,153,204,230,19,24,12,209,105,154,64,96,19,89,148,204,0,76,166,118,121,132,204,77,38,179,56,13,170,3,51,128,64,109,24,126,104,154,32,54,121,148,202,103,52,153,77,96,9,144";
        }
        private void buttonClear_Click(object sender, RoutedEventArgs e)
        {
            inkCanvas1.Strokes.Clear();
            SetSignature();
        }
    }
} 
```

**主窗口 XAML：**

```
<Window xmlns:my="clr-namespace:mvvmSignature"  x:Class="mvvmSignature.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ignore="http://www.ignore.com"
    mc:Ignorable="d ignore"
    Height="490"
    Width="327"        
    DataContext="{Binding Main, Source={StaticResource Locator}}">   
<StackPanel>
    <my:ucSignature  Signature ="{Binding Signature,Mode=TwoWay}"  />
    <Button Width ="140" Height ="30" Content ="Load On Main Page" Command="{Binding LoadOnMainPageCommand}" />
    <TextBox FontSize="8"
               Foreground="Purple"
               Text="{Binding Signature,Mode=TwoWay}"
               VerticalAlignment="Center"
               HorizontalAlignment="Center"
               TextWrapping="Wrap" Height="210" />
</StackPanel> 
```

**主视图模型：**

```
using System.Windows.Input;
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
namespace mvvmSignature.ViewModel
{
    public class MainViewModel : ViewModelBase
    {
        public ICommand LoadOnMainPageCommand { get; set; }
        public const string WelcomeTitlePropertyName = "Signature";
        private string _signature = string.Empty;
        public string Signature 
        {
            get
            {
                return _signature;
            }
            set
            {
                if (_signature == value)
                {
                    return;
                }
                _signature = value;
                RaisePropertyChanged(WelcomeTitlePropertyName);
            }
        }

        public MainViewModel()
        {
            LoadOnMainPageCommand = new RelayCommand(LoadSignature);
        }

        private void LoadSignature()
        {
            Signature ="0,136,3,3,6,72,16,69,53,70,53,17,0,0,128,63,31,9,17,0,0,0,0,0,0,240,63,10,237,2,186,1,135,240,12,39,128,97,109,28,4,156,51,90,235,138,135,131,227,95,107,253,119,193,35,104,195,186,246,103,1,195,179,59,78,134,195,179,92,167,188,180,76,206,211,192,77,175,108,211,28,53,136,32,51,41,156,210,3,148,109,22,188,163,105,195,188,11,92,11,184,122,101,188,166,182,124,53,106,153,90,44,217,71,15,64,102,115,59,52,205,105,1,53,128,76,166,179,73,156,202,107,0,195,248,122,106,153,64,22,185,164,210,3,51,154,64,102,51,8,5,174,105,52,128,204,102,19,57,156,215,41,90,69,162,103,1,128,76,128,19,40,4,6,1,102,153,205,96,22,105,156,206,101,53,180,89,230,83,88,4,202,107,0,179,38,120,122,215,52,195,248,120,179,101,25,158,80,195,179,41,156,210,107,50,180,205,38,144,25,156,214,105,52,153,97,249,165,166,101,52,180,205,32,48,0,135,231,164,231,113,153,131,40,225,168,4,6,1,1,128,89,160,22,105,164,214,207,135,32,56,110,3,52,153,192,96,19,80,0,11,68,6,1,105,11,76,2,215,135,50,142,28,77,48,253,160,180,225,232,12,2,107,52,128,205,38,115,91,68,214,105,51,153,77,112,238,30,77,102,80,9,148,214,1,1,154,76,230,64,38,80,8,12,2,101,50,180,205,11,70,29,128,225,236,63,0,153,77,96,19,9,141,154,207,102,153,204,230,19,24,12,209,105,154,64,96,19,89,148,204,0,76,166,118,121,132,204,77,38,179,56,13,170,3,51,128,64,109,24,126,104,154,32,54,121,148,202,103,52,153,77,96,9,144";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:58.017

我重写了您的 ucSignature 类的部分内容，以便在您的代码中正确声明和使用 Signature 属性。改用这个类定义，让我知道它是否工作得更好。

```
public partial class ucSignature : UserControl
{
    public ucSignature()
    {
        InitializeComponent();
    }

    private void inkCanvas1_LostMouseCapture(object sender, MouseEventArgs e)
    {
        var sb = new StringBuilder();
        using (var ms = new MemoryStream())
        {
            inkCanvas1.Strokes.Save(ms);
            foreach (var item in ms.ToArray())
            {
                sb.AppendFormat("{0},", item);
            }
            ms.Close();
        }
        var local = sb.ToString().Trim() + "¬¬¬";
        local = local.Replace(",¬¬¬", string.Empty);

        this.SetValue(SignatureProperty, local);
    }

    private void LoadSignature(string signatureIn)
    {
        if (string.IsNullOrEmpty(signatureIn) || !signatureIn.Contains(",")) return;
        var x = signatureIn.Split(',').Select(byte.Parse).ToArray();
        if (!x.Any()) return;
        using (var ms = new MemoryStream(x))
        {
            inkCanvas1.Strokes = new StrokeCollection(ms);
            ms.Close();
        }
    }

    public static DependencyProperty SignatureProperty = DependencyProperty.Register(
        "Signature",
        typeof(string),
        typeof(ucSignature),
        new UIPropertyMetadata(OnSignaturePropertyChanged));

    public static string GetSignature(ucSignature signature)
    {
        return (string)signature.GetValue(SignatureProperty);
    }

    public static void SetSignature(ucSignature signature, string value)
    {
        signature.SetValue(SignatureProperty, value);
    }

    private static void OnSignaturePropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        var signature = obj as ucSignature;

        if (signature != null)
        {
            LoadSignature(args.NewValue.ToString());
        }
    }

    private void ButtonLoad_Click(object sender, RoutedEventArgs e)
    {
        this.SetValue(SignatureProperty, "0,136,3,3,6,72,16,69,53,70,53,17,0,0,128,63,31,9,17,0,0,0,0,0,0,240,63,10,237,2,186,1,135,240,12,39,128,97,109,28,4,156,51,90,235,138,135,131,227,95,107,253,119,193,35,104,195,186,246,103,1,195,179,59,78,134,195,179,92,167,188,180,76,206,211,192,77,175,108,211,28,53,136,32,51,41,156,210,3,148,109,22,188,163,105,195,188,11,92,11,184,122,101,188,166,182,124,53,106,153,90,44,217,71,15,64,102,115,59,52,205,105,1,53,128,76,166,179,73,156,202,107,0,195,248,122,106,153,64,22,185,164,210,3,51,154,64,102,51,8,5,174,105,52,128,204,102,19,57,156,215,41,90,69,162,103,1,128,76,128,19,40,4,6,1,102,153,205,96,22,105,156,206,101,53,180,89,230,83,88,4,202,107,0,179,38,120,122,215,52,195,248,120,179,101,25,158,80,195,179,41,156,210,107,50,180,205,38,144,25,156,214,105,52,153,97,249,165,166,101,52,180,205,32,48,0,135,231,164,231,113,153,131,40,225,168,4,6,1,1,128,89,160,22,105,164,214,207,135,32,56,110,3,52,153,192,96,19,80,0,11,68,6,1,105,11,76,2,215,135,50,142,28,77,48,253,160,180,225,232,12,2,107,52,128,205,38,115,91,68,214,105,51,153,77,112,238,30,77,102,80,9,148,214,1,1,154,76,230,64,38,80,8,12,2,101,50,180,205,11,70,29,128,225,236,63,0,153,77,96,19,9,141,154,207,102,153,204,230,19,24,12,209,105,154,64,96,19,89,148,204,0,76,166,118,121,132,204,77,38,179,56,13,170,3,51,128,64,109,24,126,104,154,32,54,121,148,202,103,52,153,77,96,9,144");
    }
    private void buttonClear_Click(object sender, RoutedEventArgs e)
    {
        inkCanvas1.Strokes.Clear();
        this.SetValue(SignatureProperty, string.Empty);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:05:02.433

您需要将 MainViewModel 设置为`DataContext`MainWindow 以便绑定工作。除非您在构造函数中设置它，否则我看不到它在任何地方设置。你可以尝试这样的事情：

```
<Application.Resources>         
<local:MainViewModel x:Key="MainViewModel" />     
</Application.Resources>

DataContext="{StaticResource MainViewModel}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:06:07.200

我将假设它是您尝试设置的 Signature 属性，主要是因为这就是您的用户控件的全部内容，并且这就是我看到问题的地方。

设置 Signature 属性后，调用`RaisePropertyChanged`另一个属性：WelcomeTitlePropertyName 属性。您应该调用`RaisePropertyChanged`您设置的相同属性，否则您的 UI（即您的用户控件）将不知道它。

例如，在 MainWindow XAML 中，您放置了一个 ucSignature 元素，如下所示：

```
<my:ucSignature Signature ="{Binding Signature,Mode=TwoWay}"  /> 
```

那部分很好，但是在您的 ViewModel 中，该属性应该像这样定义：

```
private string _signature = string.Empty;
public string Signature 
    {
        get { return _signature; }
        set
        {
            if (_signature == value)
                return;

            _signature = value;
            RaisePropertyChanged(Signature);
        }
    } 
```

# mysql - 将mysql查询转换为hibernate hql

> ID：12583245
> 
> 赞同：0
> 
> 时间：2012-09-25T12:45:34.490
> 
> 标签：mysql, hibernate

例如，当我尝试自动递增字母数字 ID（或数字系列）时出现问题

## 在 Mysql "Sample" 表 'RefNo' 列中（Varchar 类型）

AB7 AB10 AB9 AB8

上面我有四个条目，现在我想检索最大值（或最大值）。

为此，我尝试查询 as = SELECT MAX(RefNo) FROM sample; 但这给出的结果为“AB9”，这是错误的，它应该返回“AB10”作为结果。

为了在 Mysql 中得到这个，我修改了 Query as = SELECT MAX(CONVERT(SUBSTRING_INDEX(RefNo,'B',-1),UNSIGNED INTEGER)) from sample where RefNo like 'AB%'

这项工作在 mysql 中很好，但在 hibernate (hql) 查询中不受支持。

我希望您了解情况，并请帮助我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:57:29.137

您应该能够使用[`substring`和`cast`](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-expressions)获取字符串的数字部分并将其转换为数字。类似的东西（未测试）：

```
select max(cast(substring(sample.refNo, 3) as INTEGER)) from Sample sample ... 
```

# gwt - GWT 开发模式 - 推荐的 Linux 浏览器（和版本）

> ID：12583246
> 
> 赞同：1
> 
> 时间：2012-09-25T12:45:34.590
> 
> 标签：gwt, plugins, browser

我正在使用 Ubuntu 10.04 进行 GWT 开发，我注意到在开发模式下，代码在 Firefox 上运行得更快（与 Chrome 相比），但我认为即使是 Firefox，也必须有一个运行得更快、更好的版本GWT 开发模式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:04:05.793

DevMode 一半在 Java 中运行（在浏览器之外），一半在 JavaScript 中（在浏览器中），中间有一些本地代码（DevMode 插件）。

Chrome 比 Firefox 慢的原因是 DevMode 插件在沙盒中运行，因此调用和数据必须跨越沙盒边界。

现在，虽然最新版本的浏览器总是比以前的版本更好，但它不应该改变 DevMode 性能方面的太多东西。成本最高的是跨越 Java/JavaScript 边界，这需要通过网络聊天（即使它通常是 localhost）。

为获得最佳性能，请尝试使用[SuperDevMode](https://developers.google.com/web-toolkit/articles/superdevmode)，在浏览器中一切都在 JavaScript 中运行：没有插件，没有 Java/JavaScript 桥接网络，只有普通的旧 JavaScript。

# cross-platform - 解压所有平台的可执行文件

> ID：12583254
> 
> 赞同：0
> 
> 时间：2012-09-25T12:46:02.750
> 
> 标签：cross-platform, unzip, platform

我需要为所有可能的平台下载可执行的解压缩文件。

```
 echo "1 = windows_intelx86 (Microsoft Windows (98 or later) running on an Intel x86-compatible CPU)"
    echo "2 = windows_x86_64 (Microsoft Windows running on an AMD x86_64 or Intel EM64T CPU)"
    echo "3 = i686-pc-linux-gnu (Linux running on an Intel x86-compatible CPU)"
    echo "4 = x86_64-pc-linux-gnu (Linux running on an AMD x86_64 or Intel EM64T CPU)"
    echo "5 = powerpc-linux-gnu (Linux running on a 32-bit PowerPC processor)"
    echo "6 = ppc64-linux-gnu (Linux running on a 64-bit PowerPC processor)"
    echo "7 = alpha-hp-linux-gnu (Linux running on Alpha)"
    echo "8 = ia64-linux-gnu (Linux running on IA64 (Itanium))"
    echo "9 = sparc-sun-linux-gnu (Linux running on SPARC)"
    echo "10= sparc64-sun-linux-gnu (Linux running on SPARC 64-bit)"
    echo "11= powerpc-apple-darwin (Mac OS X 10.3 or later running on Motorola PowerPC)"
    echo "12= i686-apple-darwin (Mac OS 10.4+ running on an Intel CPU)"
    echo "13= x86_64-apple-darwin (Mac OS 10.5+ running on an Intel 64-bit CPU)"
    echo "14= sparc-sun-solaris2.7 (Solaris 2.7 running on a SPARC-compatible CPU)"
    echo "15= sparc-sun-solaris (Solaris 2.8+ running on a SPARC-compatible CPU)"
    echo "16= sparc64-sun-solaris (Solaris 2.8+ running on a SPARC 64-bit CPU)"
    echo "17= hppa-hp-hpux (HPUX running on 32-bit HPPA)"
    echo "18= hppa64-hp-hpux (HPUX running on 64-bit HPPA)"
    echo "19= alpha-hp-tru64 (Tru64 Unix running on Alpha)"
    echo "20= ia64-hp-hpux (HPUX running on IA64)"
    echo "21= powerpc-ibm-aix (AIX running on PowerPC)"
    echo "22= i686-pc-freebsd (FreeBSD on x86)"
    echo "23= x86_64-pc-freebsd (FreeBSD on Intel-compatible 64-bit)"
    echo "24= i686-pc-openbsd (OpenBSD on x86)"
    echo "25= x86_64-pc-openbsd (OpenBSD on Intel-compatible 64-bit)"
    echo "26= i686-pc-solaris (Solaris 2.8+ on an Intel x86-compatible CPU)"
    echo "27= x86_64-pc-solaris (Solaris 2.8+ on an AMD x86_64 or Intel EM64T CPU)"
    echo "28= i586-pc-haiku (Haiku on an Intel x86-compatible CPU)"
    echo "29= powerpc64-ps3-linux-gnu (Sony Playstation 3 (Cell processor) running Linux)"
    echo "30= arm-android-linux-gnu (Android running on ARM)" 
```

我找到了这个网站，但没有我需要的可执行文件。 [http://www.info-zip.org/pub/infozip/UnZip.html#Downloads](http://www.info-zip.org/pub/infozip/UnZip.html#Downloads)

有谁知道我在哪里可以找到这些文件下载？

谢谢费利佩

# javascript - 在不传递事件输入的情况下点击获取 x,y 坐标

> ID：12583259
> 
> 赞同：0
> 
> 时间：2012-09-25T12:46:19.287
> 
> 标签：javascript, jquery, jquery-events, overwrite, confirm

好吧，我有一个问题：如何在不传递事件输入的情况下获得点击坐标？我想不出一种在 Firefox 中有效的方法，因为我想在使用修改后的`window.confirm`函数触发确认操作时获取坐标。例子 ：

```
window.confirm = function() {
    if ( arguments[0] )
    {
        text_confirm = arguments[0];
        x_pos = window.event.clientX;
        y_pos = window.event.clientY;
    }
} 
```

这是在以下时间触发的：

```
<a onclick="if (confirm('Are you sure?')) document.location='....'; return false;" href="javascript:void(1);"></a> 
```

这段代码在 Chrome 中有效，但显然在 Firefox 中我必须使用类似`onClick="getCoords(event);"`. 而且我无法在 window.confirm 的覆盖范围内发送事件输入。

另一种方法也受到赞赏，但知道这一点：

！！我无法更改`onClick`按钮上的操作，它必须只有`window.confirm()`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:54:33.240

您可以简单地将坐标保存在变量中，然后在函数中使用它们：

```
var coords = getCoords(event); if (confirm('Are you sure?')) { // use stored coords and stuff ... } 
```

如果您无法使用此节点访问 html，则可以在代码中重新定义侦听器：

```
$('#element').click(function(event) {
  if (!confirm('are you sure?'))
    return false;

  getCoords(event);
  // ...

  return false;
}); 
```

# node.js - 使用 NPM & gruntjs 构建系统

> ID：12583260
> 
> 赞同：1
> 
> 时间：2012-09-25T12:46:25.597
> 
> 标签：node.js, npm

我是 Node.js 回显系统的新手，正在尝试为 JavaScript 应用程序开发设置构建系统。我有一些问题我找不到答案。

从[这篇博](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)文中可以清楚地看出，您应该在本地安装所有项目特定的节点模块。

`grunt`现在，我在我的项目目录中本地安装整个模块。我得到以下目录结构......

```
my_project/

  lib/
    utils/
      underscore.js

  ... other project files ...

  node_modules/
    .bin/
      grunt -> ../grunt/bin/grunt*
    grunt/
      node_modules/
      bin/
      dev/
      docs/
      lib/
      test/
      tasks/
      grunt.js
      package.json
      ... others ... 
```

请注意，有两个`node_modules`目录。一个在我的项目中，另一个在`grunt`模块中。

**Q** : 为什么有多个`node_modules`不同级别的目录？有人可以解释一下目录结构是如何工作的吗？

**问**：如果我安装另一个模块，它也会有自己的`node_modules`目录吗？

**问**：如果我进入`my_project/lib/utils`然后运行命令`npm install <some_module>`，该模块将只安装该目录还是整个项目？如果是后者，那么 NPM/Node 是如何找出项目根目录的呢？

请解释我在这里可能遗漏的任何其他内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T21:45:04.203

npm 注册表中的每个项目都可以被认为是一个自包含的模块（特别是 CommonJS 模块），该模块`package.json`在该项目的根目录中的文件中定义了源代码和项目元数据。

当您在包含文件的目录中键入`npm install`（或仅`npm i`）时`package.json`，npm 会读取项目根目录中`dependencies`定义的集合并将这些包安装在目录中。`package.json``node_modules`

那么嵌套`node_modules`目录是怎么回事呢？`npm install`是递归的。如果项目 A 需要 B 而 B 需要 C，您会看到以下目录结构：

```
A/
A/node_modules
A/node_modules/B
A/node_modules/B/node_modules
A/node_modules/B/node_modules/C 
```

在您的情况下，当您在文件中添加`grunt`to时，该依赖项将被添加到其自己的目录中：. 但是有很多依赖关系，而那些依赖关系有依赖关系。所以你会看到很多嵌套的目录。`dependencies``my_project/package.json``my_project/node_modules/grunt``grunt``node_modules`

对于您的第三个问题，请参阅`algorithm`此页面上的部分：[https](https://npmjs.org/doc/install.html) ://npmjs.org/doc/install.html - 它描述了如何`npm install`搜索依赖项。

[这里](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)还有一些关于 npm 中全局与本地依赖关系的更多信息。

# php - 如何在 PHP 页面中添加相对链接（网络中远程计算机上的文件名）

> ID：12583261
> 
> 赞同：0
> 
> 时间：2012-09-25T12:46:36.740
> 
> 标签：php, apache, urlencode

有三台机器 - 1\. 服务器 - 部署应用程序的地方。称之为 Machine1。2\. 存储一些文件的第二台机器。称它为ABC机器。3\. 我从中访问部署在 Machine1 上的应用程序的机器。

可以说，[http ://testapplication.com:8080/pagedirectory/viewCart.php](http://testapplication.com:8080/pagedirectory/viewCart.php)

在 viewCart.php 上显示了一些链接，例如`\\ABC\Folder1\file.xml`. 如果我通过键入或复制到浏览器直接访问此路径，它可以工作并且我可以看到文件。但是如果我点击网页，它不会打开并给出错误 -`The requested URL /pagedirectory/\\ABC\Folder1\file.xml was not found on this server.`

如果我将鼠标移到此链接上，在浏览器底部的状态栏中，我会看到

`http://testapplication.com:8080/pagedirectory/\\ABC\Folder1\file.xml`

因此，它似乎将调用页面的基本目录添加到所有链接，因此引发错误。

`Found %2f (encoded '/') in URI (decoded = '/somepath')...returning 404 referer`当我尝试从我的机​​器单击页面上显示的上述链接时，日志在 apache 日志中显示。如果我在其托管的机器上访问应用程序，它就可以完美运行而不会出现问题。那么我做错了什么？我在一些帖子中看到了使用`AllowEncodedSlashes On`但不确定将它们放在哪里并且我没有使用任何虚拟主机。

请帮忙 ！！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:29:25.097

一些想法：

1.  您需要将那些“\”转为您的 URL
2.  如果它添加基本目录，那么你可能有相对 url——如果你的 href="something" 它将转到 /base/directory/something。但是，如果您使用绝对 url href="/something" 那么它将转到 /something
3.  如果它不是相对 URL，请检查您的 apache conf 并确保您没有一些时髦的重写规则。

# javascript - 选择上一个输入 jQuery

> ID：12583266
> 
> 赞同：0
> 
> 时间：2012-09-25T12:47:04.977
> 
> 标签：javascript, jquery

我有一个包含许多输入 = 文本的表单，并且我有两个图像（-，+）我想增加或减少以前的输入文本。我不想在输入文本中添加一个 id，因为我可以有很多带有输入文本和减号或加号的行。使用我的代码，减号按钮可以工作，但加号按钮不是为什么？

我的 jQuery 代码

```
$('.minus').click(function(){
        var intRegex = /^\d+$/;
        var floatRegex = /^((\d+(\.\d *)?)|((\d*\.)?\d+))$/;

        var num = $(this).prev('input').val();
        if(intRegex.test(num) || floatRegex.test(num)) {
            if (num>0){
                $(this).prev('input').val(num-1);
            }
        }
        else{
            //non è un numero
        }

    });

    $('.plus').click(function(){
        var intRegex = /^\d+$/;
        var floatRegex = /^((\d+(\.\d *)?)|((\d*\.)?\d+))$/;

        var num = $(this).prev.prev('input').val();
        if(intRegex.test(num) || floatRegex.test(num)) {
                $(this).prev.prev('input').val(num+1);
        }
        else{
            //non è un numero
        }

    }); 
```

HTML：

```
<input type="text" name="qta" id="qta" style="width:50px;"/>
                            <img src="img/shop/meno.jpg" alt="" class="minus" style="cursor:pointer"/>
                            <img src="img/shop/piu.png" alt="" class="plus" style="cursor:pointer"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:47:49.980

```
var num = $(this).prev().prev('input').val(); 
```

和

```
$(this).prev().prev('input').val(num+1); 
```

你错过了`()`两次

无论如何，我会将每个输入和图像包装在他们自己的包装器中，我会找到输入`$(this).parent().find('input')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:48:27.263

用这个去上一个

```
 var num = $(this).prev().prev('input').val(); 
```

如果你想下次使用这个

```
 var num = $(this).next().next('input').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:51:54.583

如果您只有一个输入，则可以使用该输入的 ID

```
$('#qta').val(num+1) 
```

和

```
$('#qta').val(num-1) 
```

# ipad - iOS6 - 删除了 iPad 的控制台日志 - 如何在 Windows 上使用 Web 检查器？

> ID：12583275
> 
> 赞同：34
> 
> 时间：2012-09-25T12:47:29.663
> 
> 标签：ipad, debugging, ios6

所以iOS6出来了，哎呀。现在，苹果似乎已经删除了曾经存在于 Safari 中的“开发者控制台”。太好了，我听到很多人说 - 它是有限的。

但是，它可以**在**设备上运行 - 现在显然您必须将设备连接到 Mac 才能获得网络检查器？

这是用控制台调试的唯一方法吗？有没有办法用windows、safari进行调试？请注意，我的意思不仅仅是更改用户代理，您可以在 Safari Windows 上执行此操作 - 不会注册触摸事件 - 只需单击即可。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T06:35:57.320

如果您没有 Mac OSX，您可以使用此脚本作为控制台替换：

[https://github.com/robotnic/waterbug](https://github.com/robotnic/waterbug)

它显示错误消息，可以记录各种变量，您必须将 iPhone 或 iPad 向右旋转 90° 才能打开控制台。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-26T18:24:05.677

一个可怜的人调试控制台：

```
 try {
        var test = document.do.something();
    }
    catch (exc) {
        alert(exc);
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T05:56:57.580

**可以使用小书签在**设备上进行调试（尤其是在 Mobile Safari 中）。

如果错误仅在设备上实时显示，而在其他任何地方都没有，则在设备上进行调试可能非常重要。有多种书签供开发人员使用，因此请选择您喜欢的工具（例如 Firebug Lite），将其添加到您的书签中，并在您需要的地方使用它。这可能不是开发者控制台，但它是一种调试更准确和面向工作的方法。

我在我的博客上写了一篇关于如何使用书签的博文（还有其他常用测试工具和更多书签的列表）：

*   [http://hofmannsven.com/2013/laboratory/ios-bookmarklets/](http://hofmannsven.com/2013/laboratory/ios-bookmarklets/)

更新：Chrome 发布了它的 Mobile DevTools，这将使调试（在 Google Chome Mobile 内，**仅限 Android 设备**）变得更加容易。这不会修复 Safari 中缺少的 DevTools 问题，但它可能有助于定位设备**上**的错误：

*   [https://developer.chrome.com/devtools/docs/remote-debugging](https://developer.chrome.com/devtools/docs/remote-debugging)
*   [http://www.html5rocks.com/en/tutorials/developertools/mobile/](http://www.html5rocks.com/en/tutorials/developertools/mobile/)

UPDATE2：Mozilla 发布了一个 Firefox 插件，以支持跨浏览器和设备的 Web 开发：http://youtu.be/kEFbQwB81RE?t= [1m58s](http://youtu.be/kEFbQwB81RE?t=1m58s)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T15:26:27.250

来看看文莱。它允许您使用类似 Chrome 的网络检查器从另一台计算机检查在 Safari 中运行的页面

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-26T20:22:40.880

您可以[`window.onerror`](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror)在没有控制台的情况下使用调试错误。只需将此代码添加到您自己的`<script>`标记中的 HTML 文档中，然后再添加任何其他 Javascript 代码：

```
<script type="text/javascript">
    window.onerror = function(e){
        alert(e);
    };
</script> 
```

这样一来，每当出现错误时，错误消息都会显示在一个`alert`对话框中，该对话框在 iOS Safari 中可见。上面的代码在您尝试调试的错误之前运行很重要，如果您正在调试语法错误，那么它在单独的`<script>`标记中也很重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-01T13:16:22.427

除了 Windows 上的 Safari，您还可以使用 Telerik 开发的名为 AppBuilder 的应用程序。我在[这个博客](http://blog.falafel.com/Blogs/josh-eastburn/2014/03/04/ios-web-inspector-on-windows-with-telerik-appbuilder "带有 Telerik AppBuilder 的 Windows 上的 iOS Web Inspector")上找到了说明。不过，您需要获得一个帐户才能使用 Telerik 平台。

这将为您提供类似于 Safari 中的开发工具。我已经在 Win7 64 位上使用了它，并在带有 iOS 7.1 的 iPad 上运行了常规 Web 应用程序和 Phonegap 应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-08T22:17:17.177

就像 neno 建议的那样，Telerik AppBuilder 是一个很棒的应用程序。实际上，我在 Linux 上的虚拟机中运行 Windows XP 只是为了调试我的 iPhone。Windows XP，因为在我的情况下，Windows 7 确实识别了 iPhone，但 iTunes 和 Telerik AppBuilder 没有。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-12T13:16:42.627

看起来内置控制台不见了。我尝试插入 Windows 7 并打开 Safari，但找不到开发者控制台。然后我读[了这篇文章](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)，证实了这一点。

如果您需要能够在两个方向上测试您的站点，那么 waterbug 不是一个好的选择，因为它会用完其控制台视图的横向方向。

一种不错的选择是使用[Adob​​e Edge Inspect](http://html.adobe.com/edge/inspect/)。您在 Chrome 上打开您的网站并在您的设备上打开该应用程序，您的设备将镜像您在桌面上打开的任何页面。然后，您可以使用 Chrome 开发工具来调试您的内容。

# wolfram-mathematica - 如何在 Mathematica 中保存最大化的结果？

> ID：12583276
> 
> 赞同：0
> 
> 时间：2012-09-25T12:47:35.260
> 
> 标签：wolfram-mathematica, maximize

我的目标是计算和保存具有两个参数和一个外生参数的函数的最大化结果，当最大值不能通过最大化（以封闭形式）得出时。例如，让

```
f[x_,y_,a_]=Max[0,Min[a-y,1-x-y] 
```

为正的目标函数`a`。最大化将发生`[0,1]^2`，因此我设置

```
m[a_]=Maximize[{f[x, y, a], 0 <= x <= 1 && 0 <= y <= 1 && 0 <= a}, {x,y}] 
```

显然`m`可以在任何点进行评估，`a`因此可以`x`通过采用

```
Plot[x /. m[a][[2]], {a, 0.01, 1}] 
```

由于我需要做几个包含最佳解决方案`x`和`y`（当然是 的函数`a`）的绘图和进一步推导，我想保留/保存优化的结果以供进一步使用。有没有一种优雅的方法可以做到这一点，还是我必须编写某种循环来自己提取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:25:23.593

既然我已经看到了您对我的原始评论的评论全文，我怀疑您确实理解`Set`和`SetDelayed`足够好之间的区别。我认为您可能正在寻找的是记忆，有时会像这样实现；

```
f[x_,y_] := f[x,y] = Max[0,Min[a-y,1-x-y]] 
```

例如，当您`f[3,4]`第一次评估时，它将评估 . 右侧的整个表达式`:=`。rhs 是作业`f[3,4] = Max[0,Min[a-y,1-x-y]]`。下次您评估`f[3,4]`Mathematica 时，它已经有了一个值，所以不需要重新计算它，它只是回忆它。在这个例子中，存储的值`Max[0,Min[a-4,-6]]`当然是。

我仍然不确定您要做什么，所以这个答案可能对您根本没有任何用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:26:59.137

简单的方法

```
results = Table[{x, y, a} /. m[a][[2]], {a, 0.01, 1, .01}]
ListPlot[{#[[3]], #[[1]]} & /@ results, Joined -> True] 
```

（只要没有预先定义“a”，Set = 在这里就可以了）

如果您想利用 Plot[] 的自动评估，请查看 Reap[]/Sow[]

```
{p, data} = Reap[Plot[x /. Sow[m[a]][[2]], {a, 0.01, 1}]];
Show[p] 
```

（这需要几分钟，因为函数输出是一团糟......）。

嗯，再试一次：假设你想要 x,y,a 和最小值：

```
{p, data} = Reap[Plot[x /. Sow[{a, m[a]}][[2, 2]], {a, 0.01, .1}]];
Show[p]
results = {#[[1]], x /. #[[2, 2]], y /. #[[2, 2]], #[[2, 1]]} & /@  data[[1]] 
```

顺便说一句，您的函数似乎在某些范围内与 x 无关，这就是为什么情节一团糟的原因。

# php - 克隆的基于 PHP / Apache 的网站上的奇怪缓存行为

> ID：12583282
> 
> 赞同：0
> 
> 时间：2012-09-25T12:47:59.120
> 
> 标签：php, apache, caching, browser-cache

我刚刚创建了一个 Web 系统的克隆，以便制作一个开发版本。克隆在同一台服务器上，我已经复制了所有文件、数据库结构等。 vhost.conf 和 httpd.include 是相同的（显然是域名）。

服务器正在运行带有 Apache 的 CentOS linux。

除了仅在新克隆上发生的奇怪行为外，一切正常。

我有一个页面（我们称之为 page1），它运行服务器端 PHP 函数并在加载时取消设置会话变量。从此页面链接到设置该会话变量的页面 (page2)。

如果我使用浏览器的后退按钮从 page2 单击返回 page1，则该页面（显然）正在从缓存中加载，因此不运行任何服务器端功能，包括取消设置会话变量的功能。如果我单击刷新/重新加载，则页面按预期运行，服务器端功能运行并且会话变量未设置。

尽管它是相同的，但在原件上不会发生此行为。

当然肯定有*什么*不同，但我想不出任何东西。它必须是服务器端的东西，因为所有文件都是相同的。

任何人都可以建议我还没有尝试过的东西吗？

**编辑：** 现在，更奇怪的是，它似乎工作正常。也许这是 Firefox 的一个亮点。不过看起来很奇怪，担心会发生类似的事情。我想我需要更多的故障保险。

# java - Inspektr 及其用法

> ID：12583288
> 
> 赞同：0
> 
> 时间：2012-09-25T12:48:20.873
> 
> 标签：java, cas

我正在查看[CAS](http://www.jasig.org/cas)项目的详细信息，发现它使用了一个名为`inspektr`. 我用谷歌搜索了一段时间，并试图找到有关其使用的更多详细信息。但我没有得到任何信息。

谁能提供有关它及其用法的更多详细信息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T00:44:50.050

Inspektr 可在此处找到：[https](https://github.com/dima767/inspektr) ://github.com/dima767/inspektr 此处使用详细信息：[https ://github.com/dima767/inspektr/wiki/Inspektr-Auditing](https://github.com/dima767/inspektr/wiki/Inspektr-Auditing)

据我了解该项目，它从您的 Web 流中收集信息，并允许您通过使用提供的 @Audit 注释来保存所述数据。如果从您链接的那个 CAS 项目复制配置，则几乎所有内容都配置为记录到文件中。记录的示例数据将是客户端的 IP、远程 IP、正在执行的操作（通过 Spring 和 @Audit 注释配置）以及各种其他内容。

如果您熟悉 Spring Aspects，那么查看 Inspektr 源代码以查找其他用途应该是轻而易举的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T17:29:21.957

Inspektr 是一个框架，它允许我们利用框架提供的 Aspect 从注释驱动审计记录。这仅适用于 Spring Managed Beans！这里是github项目网站：

[https://github.com/dima767/inspektr/wiki/Inspektr-Auditing](https://github.com/dima767/inspektr/wiki/Inspektr-Auditing)

一个很好的配置实用参考：[https ://wiki.jasig.org/display/CASUM/Auditing+and+Statistics+Via+Inspektr](https://wiki.jasig.org/display/CASUM/Auditing+and+Statistics+Via+Inspektr)

这里的基本原则是 Inspektr 允许将这些审计框架记录到控制台、数据库、应用程序服务器日志中，如果需要，我们甚至可以定义自己的管理器来记录到不同的介质。

# objective-c - 新 NSObject 的最佳实践是什么 - alloc / init 或更改现有？

> ID：12583290
> 
> 赞同：4
> 
> 时间：2012-09-25T12:48:27.827
> 
> 标签：objective-c, ios5, automatic-ref-counting, nsobject, alloc

我想就 iOS5 及更高版本（启用 ARC）的最佳实践获得一些意见。例如，我有一个包含汽车的数据库——图像、名称、最大速度等信息。在应用程序中，我必须显示带有信息的汽车，然后，在用户交互之后 - 下一辆车，然后是下一辆车……而不是移动到上一辆。

如果我有一辆汽车，那么哪个是更好的解决方案，为什么？

解决方案 1：第一次使用 alloc 和 init 创建 Car 实例，然后每次我必须显示下一个实例时 - 只需通过更改现有值（速度从 250 到 180 来更新此实例） ，颜色从黑色到红色等）

解决方案 2：每次都使用 alloc 和 init，让 ARC 释放之前占用的内存，而忘记之前分配的对象。

解决方案3：可能还有其他解决方案，如何解决这个问题 - 我很想听听他们。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:52:09.557

如果你的类真的是 Car 类，它应该代表数据库中的一辆汽车，而不是某种处理程序对象来显示数据库条目。如果你想这样做，你至少应该让它成为一个正确命名和配置的类来完成这种工作。

为您从数据库中读取的每辆汽车创建一个 Car 实例并没有错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:56:41.693

将图像从磁盘加载到内存可能需要的时间最长。因此，我认为您的解决方案之间的速度不会有任何显着差异。

内存使用量也大致相同。在您的第一种方法中，图像和所有其他实例变量将在您设置新值时被释放。在第二种方法中，整个 Car 实例将被释放，从而释放它的所有实例变量。

从软件设计的角度来看，我建议使用第二种解决方案。一个 Car 实例应该准确地代表它，一个汽车的实例。只有一个实例然后一直更改它的值会产生误导。如果您想做类似的事情，我建议您将您的类重命名为 CarManager 之类的名称，并使用单例对象或使用类方法。

# java - Jar 文件中的 Java RMI 注册表

> ID：12583291
> 
> 赞同：2
> 
> 时间：2012-09-25T12:48:27.920
> 
> 标签：java, jar, registry, rmi

我在分布式处理工具的范围内遇到了一个涉及 RMI 注册表创建和获取的问题。首先，我将简要描述一下我的环境：

**环境**
我需要一个后台 Java 进程来永久执行。我的软件实例（在同一台物理机器中）需要与该进程通信才能执行某些操作。几个月前我发现在同一台物理机器上通信不同 JVM 的解决方案是 Java RMI。因此，我启动后台进程并从中创建一个注册表：

```
 CAEATServiceManagerInterface smi = (CAEATServiceManagerInterface)UnicastRemoteObject.exportObject(csm, 0);
    Registry registry = LocateRegistry.createRegistry(8090);            
    registry.rebind("ServiceManager", smi); 
```

注意：*csm*是要导出的远程对象。安全策略已正确安装（所有人的 AllPermission），RMISecurityManager 也已正确安装。

现在，我的主程序的实例能够在任何给定时刻查找注册表并获取远程对象：

```
 Registry registry = LocateRegistry.getRegistry(8090);
    smi = (CAEATServiceManagerInterface)registry.lookup("ServiceManager"); 
```

**问题**
当我的程序（获取注册表的主程序和创建它的后台程序）从 jar 文件中执行时，就会出现问题。如果它们是从 Eclipse 执行的，则一切正常。如果它们直接从命令行执行，也可以。但是当它们被打包成一个自动执行的 jar 文件进行分发时，后台进程似乎可以很好地创建注册表，但是当主程序尝试查找它时，会发生这种情况：

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is:
    java.io.EOFException
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at sener.caeat.autoejecutable.PublicadorStandalone.getServiceManagerInterface(PublicadorStandalone.java:170)
    at sener.caeat.autoejecutable.PublicadorStandalone.publicarEsquema(PublicadorStandalone.java:319)    
    at sener.caeat.autoejecutable.CargadorStandalone.mostrarDialogoOpcionesPublicacion(CargadorStandalone.java:415)
    at sener.caeat.autoejecutable.ExtractorJars.main(ExtractorJars.java:32)
Caused by: java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2553)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1296)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at sun.rmi.server.MarshalInputStream.readLocation(MarshalInputStream.java:285)
    at sun.rmi.server.MarshalInputStream.resolveProxyClass(MarshalInputStream.java:228)
    at java.io.ObjectInputStream.readProxyDesc(ObjectInputStream.java:1530)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1492)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    ... 5 more 
```

忘记我的课程，我不明白的是 EOFException ...为什么它只在程序从 jar 中执行时才启动？

*附加数据*：如果后台程序是从jar文件中启动的，但是查找注册表的主程序是从Eclipse启动的，问题仍然存在。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:01:17.193

最后我找到了解决方案。它与 RMI 没有直接关系，但与我的程序被打包到一个可自动执行的 jar 文件中的方式有​​关。

我的子流程的特点之一是它使用自定义 RMI 类加载器来处理与自定义远程类解析相关的一些内容。这是通过以下语句实现的：

```
System.setProperty("java.rmi.server.RMIClassLoaderSpi","<My_custom_RMI_ClassLoader>"); 
```

请记住：这是从 jar 文件中执行的。“My_c​​ustom_RMI_ClassLoader”类在 jar 中，这就是抛出的异常不是 ClassNotFoundException 的原因。但是，我的错误来了，这个类里面有一个内部类（其中一个名字以 $innerClass.class 结尾）。并且那个 .class 文件没有被打包在 JAR 文件中。我想这就是解析代理类时出现 EOFException 的原因。

非常感谢，但问题比我想象的要微妙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:05:19.060

这通常是由与另一端的 SocketPermissions 相关的 SecurityExceptions 引起的，导致传入的连接过早关闭。看看它的日志。

# php - jquery ui sortable 获取表 tr 分组

> ID：12583294
> 
> 赞同：1
> 
> 时间：2012-09-25T12:48:37.670
> 
> 标签：php, jquery, jquery-ui-sortable

我的桌子有些问题我有这张桌子用于 egs

```
<tr style="">
        <td>1</td>
        <td>item 1</td>
   </tr>

   <tr style="">
        <td>1.1</td>
        <td>item 1.1</td>
   </tr>

   <tr style="">
        <td>1.2</td>
        <td>item 1.2</td>
   </tr>

   <tr style="">
        <td>1.1.1</td>
        <td>item 1.1.1</td>
   </tr> 
```

我使用 jquery ui 可排序但问题是如果我想移动项目 1 项目 1.2 和项目 1.1.1 也将跟随像一个组

小提琴链接[http://jsfiddle.net/kN2XL/](http://jsfiddle.net/kN2XL/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:14:13.937

你应该看看[nestedSortable](https://github.com/mjsarfatti/nestedSortable)来实现这种功能。[例子](http://mjsarfatti.com/sandbox/nestedSortable/)

不幸的是，您需要将 html 从表格更改为层次结构，例如`<ul>` `<li>`等。

# android - 如何以编程方式将呼叫转发到android中的语音邮件

> ID：12583297
> 
> 赞同：10
> 
> 时间：2012-09-25T12:48:42.003
> 
> 标签：android, phone-call, voicemail

我不知道如何在 android 中以编程方式将呼叫转发到语音邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-04T20:59:03.233

仅当您希望将实现限制为 Android 公共 SDK 时，所选答案才是正确的。

可以在 Android 上以编程方式向语音邮件发送呼叫。

电话响铃时，结束通话。呼叫将通过网络转移到语音邮件。在 GSM/WCDMA 中，这是一个称为用户确定的用户忙或 UDUB 的功能，它也适用于 CDMA 设备。

关于如何在 Android 上结束通话有很多关于 SO 的答案：

使用 Java 反射和 iTelephony 接口：

[以编程方式结束android中的通话](https://stackoverflow.com/questions/18065144/end-call-in-android-programmatically) 或 以编程方式[结束来电](https://stackoverflow.com/questions/20965702/end-incoming-call-programmatically)

== 2020 年更新 ==

由于 Android P 可以使用 Android SDK 挂断呼叫 - 因此转发到语音邮件现在是 Android 支持的功能。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
    TelecomManager tcm = context.getSystemService(TelecomManager.class);
    if(tcm != null)
        tcm.endCall();
} 
```

添加必要的权限`AndroidManifest.xml`

```
 <uses-permission android:name="android.permission. ANSWER_PHONE_CALLS" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T23:01:25.297

你不能。

呼叫转移是由您的运营商而不是您的手机完成的，当呼叫到达您的手机时为时已晚，无法转发。

# mysql - 使用连接数据更新 Mysql

> ID：12583302
> 
> 赞同：0
> 
> 时间：2012-09-25T12:49:00.523
> 
> 标签：mysql

我有这个简单的更新查询：

```
UPDATE
    erif_notify e
SET
    e.current_amount = '0.00'
    ,e._date = now()
WHERE
    id IN ( SELECT
                en.id
            FROM
                u_contracts uc
            JOIN
                erif_notify en
            ON
                en.contract_id = uc.id
            WHERE
                uc._status = 7
          ) 
```

但它给了我这样的错误：

```
You can't specify target table 'e' for update in FROM clause 
```

为什么给我这个？

我知道我可以通过两个单独的查询来完成，但是可以一次完成吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:52:54.483

我认为您需要对此进行双重子查询，

```
UPDATE
    erif_notify e
SET
    e.current_amount = '0.00' ,
    e._date = now()
WHERE
    id IN ( SELECT x.ID FROM 
              (
                 SELECT  en.id
                 FROM u_contracts uc
                      JOIN  erif_notify en
                         ON en.contract_id = uc.id
                 WHERE uc._status = 7
              ) x
          ) 
```

“`FROM`子句中的嵌套子查询创建了一个隐式临时表，因此它不会算作您正在更新的同一个表。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:53:24.263

在这里我们开始......这个答案已经过测试并且有效：

**[样本](http://sqlfiddle.com/#!2/321e6/1)**

```
UPDATE
    erif_notify e
    INNER JOIN u_contracts uc
        ON e.contract_id = uc.id
        AND uc._status = 7
SET
    e.current_amount = '0.00',
    e._date = NOW(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:50:45.967

像这样编辑并尝试

```
UPDATE
erif_notify as e
SET
e.current_amount = '0.00'
,e._date = now()
WHERE
id IN ( SELECT
            en.id
        FROM
            erif_notify en                
        JOIN
            u_contracts uc
        ON
            en.contract_id = uc.id
        WHERE
            uc._status = 7
      ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:08:01.463

我读了几次你的查询，并且......
它不等同于

```
UPDATE
    erif_notify e
SET
    e.current_amount = '0.00'
    ,e._date = now()
WHERE
    e.contract_id IN ( SELECT
                uc.id
            FROM
                u_contracts uc
            WHERE
                uc._status = 7
          ) 
```

# jquery - 带有上一个和下一个按钮的分页代码。使用 jquery ajax

> ID：12583309
> 
> 赞同：1
> 
> 时间：2012-09-25T12:49:23.550
> 
> 标签：jquery, ajax, pagination

我正在使用 jquery ajax 分页代码，我需要一些更改。

```
<?php
$per_page = 4;
$sql = "select * from portfolio  ";
$rsd = mysql_query($sql);
$count = mysql_num_rows($rsd);
$pages = ceil($count/$per_page)
?> 
```

上面的代码然后计算页数

```
 <?php
    //Show page links
    for($i=1; $i<=$pages; $i++)
    {
        echo '<li  class="pagenum" id="'.$i.'">'.$i.'</li>';
    }
?> 
```

此代码显示分页按钮，基本上是

`<li class="pagenum" id="'.$i.'">'.$i.'</li>`

所有的问题都在这里 $i 。

如果 $per_page=4 则出现 7 个分页按钮。

分页发生在

```
id="'.$i.'" 
```

这边走

```
$("#paging_button li").click(function(){
        //show the loading bar
        showLoader();

        $("#paging_button li").css({'background-color' : ''});
        $(this).css({'background-color' : '#ccc'});

        $("#contentt").load("data.php?page=" + this.id, hideLoader);
    }); 
```

我想要的是只显示下一个和上一个按钮。而不是七个分页按钮。

需要更改为逻辑/代码。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:55:15.037

```
 var pager = $('<div id="pager" class="pagination"></div>');
    // adds the controls of pagination
    pager.pagination(maxentries, {
        items_per_page : limit,
        next_text : '>',
        prev_text : '<',
        num_display_entries : 5,
        load_first_page : false,
        callback : callback
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:24:20.697

`;`你在这一行的末尾错过了一个`$pages = ceil($count/$per_page)`。所以它需要是`$pages = ceil($count/$per_page);`

# batch-file - 列出根文件夹的批处理脚本，然后列出其中大于指定大小的所有文件

> ID：12583313
> 
> 赞同：2
> 
> 时间：2012-09-25T12:49:37.550
> 
> 标签：batch-file

我正在尝试编写一个脚本，其中我必须使用以下逻辑列出文件夹内的所有文件夹：

假设文件夹 A、B、C 在文件夹 F 和 A、B 和 C 内包含子文件夹和文件。

我必须编写一个脚本，将文件夹 A、B、C 显示为标题，然后列出其中指定大小以上的文件（包括子文件夹）......如果可能的话，还有它们的修改日期。

我准备了一个骨架。

> @echo off & setLocal EnableDelayedExpansion pushd C:\F
> 
> for /f "tokens=* delims=" %%a in ('dir/b/a:d') 做 (

```
echo %%a >>C:\F\list.txt
echo "-----------------------------------------------">>C:\F\list.txt
pushd %%a 
for /f "tokens=* delims= " %%i in ('dir/b/s') do (
    echo %%i >>C:\F\list.txt
    if %%~Za gtr 10000 echo %%i is %%~Za >>C:\F\list.txt
    )) 
```

所需的输出是：

## 目录 A

文件 1 大小 1 日期 1

文件 2 大小 2 日期 2

## 目录 B

文件 3 大小 3 日期 3

文件 4 大小 4 日期 4

## 目录 C

文件 5 大小 5 日期 5

文件 6 大小 6 日期 6

--- 日期字段不是强制性的，但如果包含则更好。

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:02:42.933

这是代码的总体思路。它基本上搜索每个目录和子目录，并找到指定类型的所有文件。然后程序找到每个唯一的文件目录并搜索大于指定大小的文件以您请求的格式输出。注意：代码中包含许多“额外”内容，用于故障排除。随意删除不必要的文本文件。=]

```
@echo off & setLocal EnableDelayedExpansion pushd C:\F

::sets size limit
SET sizelimit=10000

::searches for all files in directories and subdirectories and outputs to files.txt
dir /b/s >> files.txt

::finds all .zip files in files.txt
type files.txt | findstr /E .zip > myfile1.txt

::finds all .zip file locations and unique file locations
FOR /F "tokens=* delims=\" %%a in (myfile1.txt) do @echo %%~dpa >>filelocations.txt
FOR /F "delims==" %%L in (filelocations.txt) do find "%%L" unique.txt>nul || echo %%L>>unique.txt

::Loops through each unique location, finds all the .zip files and checks if they are larger
:: than the specified file size, then outputs the results to output.txt
FOR /F "tokens=* delims= " %%a in (unique.txt) do (
echo %%a >>output.txt
findstr "%%a" myfile1.txt >temp.txt
FOR /F "tokens=* delims=" %%a in (temp.txt) do (
if %%~za gtr %sizelimit% echo %%~nxa %%~za %%~ta >>output.txt
)
)

end local

::Cleans up extra files (which are generated for troubleshooting purposes)
del files.txt myfile1.txt filelocations.txt unique.txt temp.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:53:30.083

在这里回答[你的问题](https://stackoverflow.com/questions/12583313/batch-script-to-list-the-root-folder-and-then-all-files-inside-it-greater-than-a/12592546#comment17097074_12592546)。

好吧，您可以将输出通过管道传输到`sort`，但这至少存在三个问题。

第一个问题是，当您将其添加到末尾时，它一次只能排序一行。这意味着它根本没有排序。要解决这个问题，您可以将整个`for`命令放在一个块`()`中，然后将块的输出通过管道传输到`sort`，这会导致其他问题，尽管我相信可以解决这些问题。

第二个问题是它按字母顺序排列日期，从月份开始。这意味着所有的 1 月`1/dd/yyyy`都会先出现，然后`10/dd/yyyy`是所有的 10 月，这意味着您将所有年份混合在一起，并且它是按 1 月、10 月、11 月、12 月、2 月、3 月等排序的。

`sort`您可以使用'命令按大小排序`/+col`，但您将比较`size[tab]filename`含义`2[tab]hello`AFTER `1000[tab]hello`。（键入`sort /?``ENTER`以了解有关排序的更多信息。）

我建议使用 use`dir`的排序功能，如下所示：

```
:: Sort by name
FOR /F "tokens=* delims= " %%a in ('dir /b /o:n ') do @if %%~za gtr %sizelimit% echo %%~ta%tab%%%~za%tab%%%~nxa

:: Sort by size
FOR /F "tokens=* delims= " %%a in ('dir /b /o:s ') do @if %%~za gtr %sizelimit% echo %%~ta%tab%%%~za%tab%%%~nxa

:: Sort by date
FOR /F "tokens=* delims= " %%a in ('dir /b /o:d ') do @if %%~za gtr %sizelimit% echo %%~ta%tab%%%~za%tab%%%~nxa 
```

`/o:`order 命令还有其他选项。`dir /?``ENTER`在命令提示符下键入以获取有关其工作原理的更多信息`dir`。

# c# - 使用 XmlDocument 时内存不足

> ID：12583315
> 
> 赞同：0
> 
> 时间：2012-09-25T12:49:45.873
> 
> 标签：c#, asp.net, xmldocument

我有一个函数将生成一个数据集并从中创建一个 xml 文件。该功能运行良好。问题是多次运行报告后会出现“内存不足”错误。当我测试报告时，我发现当它到达这个 XmlDocument 命令时，内存使用量会增加很多。我用了GC但没用，有什么建议吗？

```
if (ddlDir.SelectedItem != null && ddlSec.SelectedItem != null)
{
    using (DataSet dsClosedKPICalls = GetReportData())
    {
        dsClosedKPICalls.DataSetName = "ClosedKPICalls";
        foreach (DataTable table in dsClosedKPICalls.Tables)
        {
            table.TableName = "ServiceInfo";
        }
        XmlContent = dsClosedKPICalls.GetXml();
    }

    XmlDocument XML_Data = new XmlDocument();           // contains the resultant XML data

    XML_Data.LoadXml(XmlContent);
    XmlNodeList TablesList = XML_Data.SelectNodes("ClosedKPICalls/ServiceInfo");

    for (int i = 0; i < TablesList.Count; i++)
    {
        XmlDocument innerXML = new XmlDocument();

        using (DataSet dsTaskDetails = getSplitupRecords(TablesList.Item(i).SelectSingleNode("ServiceNo").InnerText))
        {
            dsTaskDetails.DataSetName = "TaskDetails";
            foreach (DataTable tbl in dsTaskDetails.Tables)
            {
                tbl.TableName = "RequestInfo";
            }

            innerXML.LoadXml(dsTaskDetails.GetXml());

            TablesList.Item(i).AppendChild(XML_Data.ImportNode(innerXML.SelectSingleNode("TaskDetails"), true));

            innerXML = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:46:09.433

您的 XML 文档有多大？具体来说，它们是否大于约 85K？

.Net 框架使用称为[大对象堆 (LOH)](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)的东西，它将用于大于 ~85K 的分配。如果您的 XML 文档比这大，那么*东西*（如字符串）可能会在 LOH 中分配。LOH 的问题在于它没有被压缩，因此它容易受到内存碎片的影响，这反过来可能导致`OutOfMemoryExceptions`即使进程通常应该能够分配该内存也被抛出。这**可能**是您的问题的原因。

对于解决方案，您可以尝试

*   通过尝试将对象的大小保持在 85K 以下来减少 LOH 的使用。根据您的应用程序，这可能很难实现，但是可以（例如）将大型 XML 文档拆分为许多较小的文档。
*   尝试以 .Net framework v4.5 为目标，看看是否有帮助。.Net 框架 v4.5 包括[对 LOH 的改进，](http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx)这可能在这种情况下有所帮助。

`GC.Collect`顺便说一句，您对and的调用`GC.WaitForPendingFinalizers`是一个坏主意，因为这可以人为地将低代对象提升为高代对象，并且通常会“与垃圾收集器混淆”。在这种情况下，这些调用几乎肯定也无济于事。作为一般规则，您应该避免手动调用垃圾收集，除非您**确切**知道自己在做什么。

# c++ - ActiveX 控件的全屏模式

> ID：12583319
> 
> 赞同：0
> 
> 时间：2012-09-25T12:50:04.317
> 
> 标签：c++, windows, winapi, activex, fullscreen

我尝试为 ActiveX 控件实现切换到全屏模式。这目前通过删除和隐藏父窗口并更改我的控件的放置和位置来工作。

但是，当控件处于全屏模式时，我在应用程序之间切换时遇到问题。如果我切换到另一个应用程序然后单击我的窗口区域（不在任务栏中），它似乎没有被激活。您可以在任务栏中看到，另一个应用程序仍然具有突出显示，在主屏幕上，我的窗口部分隐藏在任务栏后面，除非它具有焦点。

我处理`WM_LBUTTONDOWN`窗口消息以检测是否单击了我的窗口。我已经尝试调用以下 WINAPI 函数：

```
::ShowWindow(m_hWnd, SW_RESTORE);
::SwitchToThisWindow(m_hWnd, FALSE);
::SetForegroundWindow(m_hWnd);
::SetActiveWindow(m_hWnd);
::SetFocus(m_hWnd);
::BringWindowToTop(m_hWnd);
::SetWindowPos(m_hWnd, HWND_TOP, m_monitorInfo.rcMonitor.left, m_monitorInfo.rcMonitor.top, m_monitorInfo.rcMonitor.right, m_monitorInfo.rcMonitor.bottom, SWP_NOSIZE | SWP_NOMOVE | SWP_SHOWWINDOW); // SWP_NOACTIVATE, SWP_NOOWNERZORDER 
```

我还尝试使用`::SetWindowLongW(m_hWnd, GWL_STYLE, WS_VISIBLE);`它，这令人惊讶地让我的窗口重新获得焦点。但是当再次尝试从全屏模式切换回来时，它突然消失了。

我不知道为什么有这么多不同的功能，对我来说似乎都做的大致相同。但这没关系，因为它们都没有工作。

正确执行我的控制的/一种正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:33:37.157

Windows 可能会有点混乱，因为您正在使用子窗口填充屏幕，但您希望它的行为类似于顶级（重叠）窗口。主机应用程序可能没有被激活，因为您隐藏了它的窗口。

您最好为全屏模式创建一个新的顶级全屏窗口。如果它由（最终）托管您的控件的顶级窗口拥有，那么您的新窗口将始终位于其上方，因此您无需隐藏现有窗口。激活应该可以正常工作。简而言之，您希望您的窗口表现得像一个弹出模式对话框。

Adobe 的 Flash 播放器似乎做了类似的事情。全屏播放是在一个窗口类中`ShockwaveFlashFullScreen`。

# opencl - 多个设备之间的原子操作

> ID：12583320
> 
> 赞同：3
> 
> 时间：2012-09-25T12:50:11.913
> 
> 标签：opencl, atomic, integrity

我正在使用 OpenCL 在具有 CPU 和 GPU（实际上是 AMD APU）的异构系统中开发一些东西。由于我将使用原子操作来保证数据的完整性，并且数据在 CPU 设备和 GPU 设备之间共享，每个设备上都有一个内核运行在共享数据上。我的问题是：这两个设备之间的原子操作仍然有效吗？希望任何人都可以帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:15:51.890

[OpenCL 规范](http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf)的附录 A涵盖了不同设备之间内存对象的同步。不能保证两个设备都会访问同一物理位置的内存对象：其中一个设备可以在缓冲区的副本上工作，只有附录 A 中描述的同步才能确保其他设备获得它的副本。

您在 AMD APU 上的实现可能允许 CPU 和 GPU 共享相同的地址空间，并且可能不需要设备间同步。我建议检查 AMD 文档并进行实验。

# c#-4.0 - 如何在 c# 中使用代理从 FTP 中删除文件

> ID：12583326
> 
> 赞同：0
> 
> 时间：2012-09-25T12:50:29.610
> 
> 标签：c#-4.0, ftp, http-proxy

我的项目有一些问题。我想使用代理从 ftp 中删除我的文件。

我的代码是：

```
 FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://" + FtpServerName + FtpFilePath);
                request.Method = WebRequestMethods.Ftp.DeleteFile;

                request.Proxy = new WebProxy(ProxyAddress);
                request.Proxy.Credentials = new NetworkCredential(ProxyUserName,     ProxyPassword);

                request.Credentials = new NetworkCredential(FTPUserName, FTPPassword);
                FtpWebResponse response = (FtpWebResponse)request.GetResponse(); 
```

在此我收到错误消息：使用 http 代理时不支持请求的 FTP 命令

谁能帮帮我吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:45:56.183

来自[http://blogs.msdn.com/b/adarshk/archive/2004/09/13/229069.aspx](http://blogs.msdn.com/b/adarshk/archive/2004/09/13/229069.aspx)：

> 关于在 FTPWebRequest 上使用 Http 代理的注意事项：Http 代理仅支持有限数量的 ftp 方法（主要仅用于下载文件），因此如果您的机器上有代理的 IE 设置，您需要显式设置 FtpWebRequest 以不使用代理，如下所示
> 
> request.Proxy = GlobalProxySelection.GetEmptyWebProxy();

如果您想通过代理执行其他 FTP 操作，则必须找到另一个支持它的 FTP 组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T15:36:53.940

代替`request.Proxy = GlobalProxySelection.GetEmptyWebProxy();`

尝试`request.Proxy = WebRequest.DefaultWebProxy;`

遵循对我来说效果很好的演示代码：

```
var request = (FtpWebRequest)WebRequest.Create(new Uri("ftp://99.999.99.99/TextFile1.txt"));
request.Method = WebRequestMethods.Ftp.UploadFile;
request.Credentials = new NetworkCredential("ftp_user", "ftp_pass"); // it's FTP credentials, not proxy
request.Proxy = WebRequest.DefaultWebProxy;

var sourceStream = new StreamReader("TextFile1.txt");
byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
sourceStream.Close();
request.ContentLength = fileContents.Length;

Stream requestStream = request.GetRequestStream();
requestStream.Write(fileContents, 0, fileContents.Length);
requestStream.Close();

var response = (FtpWebResponse)request.GetResponse();
Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);
response.Close(); 
```

# php - 启用缓存会影响动态内容吗？

> ID：12583327
> 
> 赞同：4
> 
> 时间：2012-09-25T12:50:36.770
> 
> 标签：php, html, caching, header, settings

启用缓存会影响动态内容吗？

例如，在我的一个 PHP 站点上，缓存标头设置为：

```
Cache-Control: public, max-age=21600 
```

这也会影响动态内容吗？

如果是这样，那么缓存动态 PHP 站点的标准方法是什么？据推测，您将缓存静态内容（例如图像），而不是动态内容（例如 html、文本等）。你将如何以及在哪里实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:04:53.293

是的。答案是肯定的。这控制浏览器和一些 ISP 缓存。它将在您在许多位置指定的时间缓存动态内容。不是全部。并非所有浏览器都会遵守规则，并非所有 ISP 都会遵守规则。众所周知，AOL 过去常常无视人们的缓存规则，并将所有内容缓存到奇怪的时期，从而导致早期网络上的页面损坏。

在未缓存的动态页面上，您可以使用此值将更改相对不频繁的页面设置为缓存 10 分钟到一个小时。对于图像、css、js 文件和更长时间的东西。缓存 8 小时可能太多了，因为它比 1 小时长得多，但只会将内容的总点击次数减少 7。

## 其他缓存

还有其他可能更可靠的缓存内容的方法。您可以查看查询缓存、文件缓存、memcached。所有这些选项也可用于缓存内容以外的内容。它们都将帮助您加快重复操作。

### 查询缓存

许多数据库，MySQL 是事实上的标准，都提供查询缓存。这将缓存自上次运行查询以来尚未更新的表上的查询结果。非常适合标准化的查找表。非常适合在蓝月亮中仅更新一次的表格。适用于大约每小时更新一次甚至每 10 分钟更新一次的表格。对于更频繁地更改的表格，它们将产生有限的节省时间的结果。

### 文件缓存和 Memcached

这些可用于缓存信息的键/值对。它们可以是 page_url/page_content 或 page_list/array_of_pages_in_site 或您需要的任何其他键/值对。这就是现在大多数人将页面缓存 10-60 分钟的方式。它们是可靠的，在服务器上受控，并且可以在需要时立即刷新。它们不需要基于时间，如果您的逻辑编写正确，您可以将它们视为查询缓存。只有当信息更新时，您才会从缓存中刷新该键，然后页面会立即更新，否则会位于缓存中。

### 标头缓存

这让我们回到了标头缓存。即使在其他缓存到位的情况下，在这里缓存大约 10 分钟仍然是明智的。其他缓存仍然需要服务器的请求，这可能会减慢它的速度。虽然这不会大大减少这种压力，但它会减少它。而且安装起来也不费力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:01:23.077

这个想法是您的网站由*资源*[页面、图像、脚本甚至]组成，并且您为每个人提供过期限制，或者使您修改的元素的缓存无效[例如，您在主页上添加了新帖子，或者您编辑条目]。

一个常见的解决方案是使用像[Varnish这样的](https://www.varnish-cache.org/)**反向代理**，它会非常快速地向客户端提供缓存的内容，并且如果缓存标头在您的内容中发生更改，它将寻找更新的版本。

缓存头生成器过程由您决定 -[您可以在此处找到一些想法](http://symfony.com/doc/current/book/http_cache.html)。

# javascript - 如何使用 jquery 在文本框中设置值 - asp.net？

> ID：12583329
> 
> 赞同：3
> 
> 时间：2012-09-25T12:50:46.717
> 
> 标签：javascript, jquery, asp.net, html, css

我有一个 id 为“tbl”的表格，其中包含带有 id 的文本框控件，如下所示

```
<table id="tbl">

txt1Text1
txt1Text2

txt2Text1
txt2Text2

txt3Text1
txt3Text2
.................
................. 
```

我想在以**id 结尾**的文本框中设置特定值，`Text1` 我想使用 jquery/javascript 来完成。

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T12:52:58.257

您可以使用`Attribute Ends With`选择器。

```
$('#tbl input[type=text][id$=Text1]').val('new value') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:07:47.697

您应该添加一个假的 css 类，它允许您“标记”文本框，然后使用 jQuery 使用 css 类选择器找到这些文本框。

```
<asp:TextBox runat="Server" CssClass="existingClass FakeClass" id="txt1" />
<asp:TextBox runat="Server" CssClass="existingClass FakeClass" id="txt2" />
<asp:TextBox runat="Server" CssClass="existingClass FakeClass" id="txt3" />

<script type="text/javascript">
    $(function(){
        $(".FakeClass").val("42");
    });
</script> 
```

这里重要的是，“FakeClass”不必存在。它只是一个标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:53:15.877

```
$("input[id $= Text1]").val('your value'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:53:25.747

试试这个

```
$('#tbl input[id$="Text1"]').val('my value'); 
```

[属性以选择器结尾](http://api.jquery.com/attribute-ends-with-selector/)

> 选择具有指定属性且值恰好以给定字符串结尾的元素。比较区分大小写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:02:35.267

```
$('input[type=text][id$=Text1]').val('value'); 
```

# portability - 当一段代码被称为可移植时是什么意思？

> ID：12583330
> 
> 赞同：12
> 
> 时间：2012-09-25T12:50:50.937
> 
> 标签：portability

我在许多文档中看到一段代码是**可移植**的。

任何人都可以向我解释将一段代码称为可移植的*确切含义吗？*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T12:56:11.723

可移植代码是与特定平台不紧密耦合的代码，或者与特定平台 API 尽可能松散耦合的代码。它是“便携的”，因为将其从一个平台移动到另一个平台所需的工作量很低。

当您打算在各种平台上编写供大量受众使用的代码时，可移植代码是可取的。

可移植性主要是编译语言的一个问题，因为解释语言通常依赖解释器在运行时提供统一的接口。`backticks`通过依赖类似或`exec`用于在本地环境中执行命令的功能，而不是通过可能具有不同平台特定实现的库访问相同的功能，仍然很有可能用解释语言编写过度特定于平台的代码。

库通常非常关心可移植性，因为它们的主要目的是提供跨平台的一致 API。

编写可移植代码涉及最大限度地减少代码必须“向下”并触及标准 API 之外的底层操作系统的位置。通常，您会封装此类访问，以便在您的代码库中有一个位置，必须从一个平台移植到另一个平台，而批量保持不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:53:10.180

**便携性是什么意思？**

这意味着以某种方式对程序进行编码，以便相同的代码在不同的环境中工作；例如不同的处理器、不同的操作系统、不同版本的库等。

如果您的代码是可移植的，您应该能够在任何新系统上重新编译它，并且它应该可以毫无问题地运行。

**它为什么如此重要？**

它如此重要的原因是因为不可移植的代码会导致许多维护方面的问题——管理多个版本、代码的可读性/可理解性差等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:51:42.293

可移植代码很容易迁移到其他平台——无论是其他编译器还是其他操作系统，只需进行最少的更改即可促进迁移。

理想情况下，这仅通过使用标准（系统提供的头文件中定义的类型、函数、定义，在另一个系统上，编译器/操作系统供应商可能修改这些头文件以适合该系统）来实现。

有时使用标准是不够的，需要在整个代码中使用（通常很难看）#ifdef。

我的陈述假设一种类似 C/C++ 的语言。许多其他语言本质上更具可移植性。

# javascript - 颜色框调整大小不起作用，返回“TypeError: $.fn.colorbox is undefined”

> ID：12583333
> 
> 赞同：0
> 
> 时间：2012-09-25T12:51:09.573
> 
> 标签：javascript, jquery, colorbox

我正在使用 colorbox 1.3 版并使用以下代码调用 colorbox

```
 $(".extractImages").colorbox({
    ajax:true,
    speed:100,
    initialWidth:'110px', 
    initialHeight:'85px',
    rel:'popup',
    fixed:true,
    arrowKey:false,
    href:function(){ 
        return $(this).attr('popup'); 
    },
    onLoad: function() {
        $('#cboxClose').html('');
        $('#cboxCurrent').remove();
        $('#cboxNext').remove();
        $('#cboxPrevious').remove();
        $('#cboxTitle').remove();
    },  
    onComplete : function() {
        $('#cboxClose').html('<img class="popupClose" src="/public/images/close.png"/>');
        $.fn.colorbox.resize();             
    }
  }); 
```

如您所见，我已在完成时调用了 resize 方法，但它给了我以下错误

```
TypeError: $.fn.colorbox is undefined
[Break On This Error]   

$.fn.colorbox.resize(); 
```

我还尝试了以下方法：

```
TypeError: $(".extractImages").colorbox is undefined
[Break On This Error]   

$('.extractImages').colorbox.resize(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:55:50.150

[文档](http://www.jacklmoore.com/colorbox%20%22Colorbox)在“公共方法”下说： $.colorbox.resize() 。我会试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:56:25.733

你有没有尝试过

```
onComplete : function() { 
$(this).colorbox.resize(); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:14:36.420

你确定`colorbox`已经加载了？看起来你没有包含`jquery.colorbox.js`在页面上。这`$.colorbox`必须显示`function()`在控制台中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-08T17:29:43.417

```
$(window).resize(function(){
        $.colorbox.resize({
            maxWidth:"auto",
            width:95+'%',
        });
}); 
```

# javascript - 无法识别的帧操作码：5 并且 Web 套接字关闭

> ID：12583338
> 
> 赞同：2
> 
> 时间：2012-09-25T12:51:23.557
> 
> 标签：javascript, browser, websocket

我在我的 Web 套接字应用程序中经常收到此错误，并且 Web 套接字立即关闭。我在浏览器控制台中看到的唯一错误消息是“无法识别的帧操作码：5”。谁能给我一个想法，为什么以及在什么情况下会发生此错误。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:08:32.303

[WebSocket RFC 6455](https://www.rfc-editor.org/rfc/rfc6455#section-11.8)的最终草案定义了操作码 0、1、8、9 和 10。旧版本（例如[版本 6](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-06)）已将操作码 5 定义为二进制帧。现在已经过时了，该操作码不再存在。

您的服务器已过时，仅支持旧版本的 WebSocket 协议。许多 WebSocket 服务器支持多个版本，并且能够在它们之间切换。您应该使用执行此操作的服务器。

# java - 如何从使用 Java 应用程序的网站复制数据表

> ID：12583341
> 
> 赞同：0
> 
> 时间：2012-09-25T12:51:34.953
> 
> 标签：java, applet, automation

情况：我目前使用我的用户名和密码登录一个网站。然后我打开一个 Java 应用程序并单击显示我希望复制的信息行的页面。屏幕左上角是一个下拉框，选择此框中的每个选项会生成一个新的结果表。

任务：我正在尝试找到一种方法来自动化复制过程，而不是手动选择每个选项并复制它。

谁能指出我正确的方向？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:09:29.293

我不确定我是否理解您的意思，即您是要编写一个小程序/扩展一个现有的小程序（正如您放置标签所建议的那样），还是您只是想在您的计算机上自动执行一项任务以跟随一组指令。

对于第一种情况，我相信您需要提供更多关于您正在尝试实现的目标，甚至是到目前为止您尝试了什么的更多信息。

如果您想创建宏，我强烈建议您查看[AutoIt 之类的工具](http://www.autoitscript.com/site/autoit/)

* * *

如果我理解正确，您想申请从网站上为您复制表格。好吧，这似乎是一件简单的事情，但由于您对 Java 不太熟悉，它可能会变得一团糟。

基本上我可以提供的是采用最直接的方法，即：

*   从您需要的网站检索源代码 (DOM)
*   然后使用 Excel 的某些 API 将 XML（只是为了确保您不会感到困惑，网站 DOM 实际上是 HTML，在某种意义上是 XML）解析为 XLS。

更准确地说，这里有一些简单的代码可以用作起点：

```
try {
    URL url = new URL("http://someurl.org");

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();

    Document doc = dBuilder.parse(url.openStream());
} catch (Exception e) {
    e.printStackTrace();
} 
```

如果我没有遗漏任何东西，您应该可以通过这种方式获取网站的 DOM，然后只需使用一些 XLS api 将其转换为 XLS 文件（不要忘记您只需要在跳过时解析表格其余内容）。您可以尝试[Java Excel API](http://jexcelapi.sourceforge.net/)，尽管我从未尝试过，所以不要认为我的话是理所当然的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T15:22:38.097

我想你正在寻找[这个](https://blogs.oracle.com/kyle/entry/copy_and_paste_in_java)技巧，它对我来说很好用。

只需在位于 Java\jre6\lib\security 的文件 java.policy 的注释行下方添加以下行。

> // 任何人都可以读取的“标准”属性
> 
> java.awt.AWTPermission "accessClipboard";

# windows - 打开“配置高级用户配置文件属性”的命令（Windows 7）

> ID：12583349
> 
> 赞同：7
> 
> 时间：2012-09-25T12:51:56.503
> 
> 标签：windows, cmd

我试图弄清楚如何通过命令行打开“配置高级用户配置文件属性”控制面板窗口，以便我可以在我的应用程序中提供指向它的链接。

通过在开始->搜索框中键入“userprofile”，无需通过控制面板即可打开它。所以我假设它必须有一个有效的命令才能直接打开它，但我似乎无法弄清楚该命令是什么。

我发现“控制 nusrmgr.cpl”打开了“用户帐户”的控制面板，其中包含“配置高级用户配置文件属性”的链接，但我想提供一个直接链接。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T17:02:44.167

的实际命令行`Configure advanced user profile properties`是：
`rundll32.exe sysdm.cpl,EditUserProfiles`. 您只需将其复制并粘贴到 cmd 窗口中即可运行。

**进一步阅读：** [进入`run`ss64.com](https://archive.is/EMb0j#selection-1805.20-1805.59)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-08T23:02:52.897

对于在这里找到自己的其他人：@wmz 提供的答案仍然适用于我，Windows 10 企业版，64 位，21H1。这个页面是我在谷歌上搜索这个问题/解决方案时的第一个结果。

从标准命令提示符运行此程序将生成此小程序的非升级版本（仅列出您当前的配置文件）。从管理员命令提示符运行将生成提升版本（列出所有配置文件）。此外，对我来说，加载需要几秒钟，并不表示它正在加载，但仍然加载。

> 配置高级用户配置文件属性的实际命令行是：rundll32.exe sysdm.cpl,EditUserProfiles。您只需将其复制并粘贴到 cmd 窗口中即可运行。
> 
> 进一步阅读：在 ss64.com 上运行的条目

# php - PHP递归数组搜索

> ID：12583353
> 
> 赞同：2
> 
> 时间：2012-09-25T12:52:18.090
> 
> 标签：php, recursion, multidimensional-array

我正在使用以下函数递归搜索数组：

```
function search2($array, $key){
    if( array_key_exists($key, $array) ){
        print("<br> ----------------- FOUND <u>{$key}</u> with value: {$array[$key]}");

        return array( $key => $array[$key] );

    }else if( !array_key_exists($key, $array) ){
        foreach ($array as $index   =>  $subarray){
                if( is_array($subarray) ){
                    print("<br> ************* <u>{$index}</u> is an ARRAY");
                    print("<br> ************* RE-SEACHING <u>{$index}</u> FOR : <u>{$key}</u>");
                    search2($subarray, $key);
                }
        }
    }
} 
```

因此，使用以下数组结构：

```
Array
(
    [personal] => Array
        (
            [title] => 
            [forename] => 
            [surname] => 
            [post_code] => 
            [date_of_birth] => Array
                (
                    [month] => 
                    [day] => 
                    [year] => 
                )

            [email_address] => email1@test.org
            [confirm_email_address] => 
            [mobile_telephone] => 
            [home_telephone] => 
            [work_telephone] => 
            [are_you_entering_fundraising_in_a_team] => Array
                (
                    [yes] => 0
                )

            [how_many_places_would_you_like] => 
            [team_name] => 
            [names_of_team_members] => 
            [how_did_you_hear_about_this_event] => 
            [please_tell_us_] => 
            [would_you_be_happy_for_publicity] => 
            [is_this_the_first_time_you_have_taken_part_in_or_attended_this_event] => Array
                (
                    [yes] => 0
                )

            [do_you_have_a_special_reason_for_taking_part_in_or_attending_this_event] => 
            [what_are_your_plans_for_raising_the_minimum_sponsorship_amount___please_be_as_detailed_as_possible] => 
            [number_of_tickets_required] => 1
        )
) 
```

我的函数将继续调用自身，直到找到我正在搜索的索引。如果我正在搜索**email_address**，如果该数组键存在，则 if 语句的第一部分应返回该索引的值，否则它将在代码的第二部分进入递归模式。

问题是代码似乎可以工作，因为我得到了我的“找到”打印输出语句，如下所示：

```
print("<br> ----------------- FOUND <u>{$key}</u> with value: {$array[$key]}"); 
```

但是，我希望 return 语句能做它应该做的事情，但在我的函数调用点我没有得到任何输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:54:08.590

在数组函数中使用递归：

```
function in_array_r ( $needle, $haystack, $strict = true )
    {
        foreach ( $haystack as $value )
        {
            if (( $strict ? $value === $needle : $value == $needle ) || ( is_array ( $value ) && in_array_r ( $needle, $value, $strict )))
            {
                return true;
            }
        }

        return false;
    } 
```

此函数将继续循环，直到找到您要查找的密钥。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T12:55:40.993

您也可以使用带有回调的内置函数[array_walk_recursive 。](http://php.net/manual/en/function.array-walk-recursive.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T12:53:50.883

你必须返回你找到的值，所以改变：

```
search2($subarray, $key); 
```

到：

```
return search2($subarray, $key); 
```

# javascript - “在...中打开”-带有 Trigger.io 的 PDF 链接

> ID：12583360
> 
> 赞同：3
> 
> 时间：2012-09-25T12:52:36.910
> 
> 标签：javascript, trigger.io, forge

我仍在与 PDF 文档和 Trigger.io / Forge 作斗争。

是否可以像 WebView / Safari 一样在 Trigger.io 应用程序的外部应用程序中打开 PDF 文档？如果是，我该如何管理？

![Safari 中的示例](../Images/201c8418c46f72f82693f2202b1b30c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:54:34.377

在 iOS 上，您可以使用我们的模态视图来显示 PDF - 我在这里整理了一个小演示应用程序来展示：[https ://github.com/goodgravy/forge-spikes/tree/master/pdf-reader](https://github.com/goodgravy/forge-spikes/tree/master/pdf-reader)

请注意，这在 Android 上不起作用，因为 webview 不包含 PDF 阅读器。

# vb6 - 如何解决 VB6 中的 MSFlexGrid 错误 30006

> ID：12583361
> 
> 赞同：0
> 
> 时间：2012-09-25T12:52:42.677
> 
> 标签：vb6, error-handling, msflexgrid

每次达到约 350,000 个单元格时，MSFlexGrid 都会给出此 30006 错误。

错误定义：

> 运行时错误“30006”：
> 
> 无法为 FlexGrid 分配内存

我的代码示例：

```
Do While Not rs.EOF
    With MSFlexGrid1
        .Rows = .Rows + 1
        .TextMatrix(i, 1) = rs.Fields("1")    's1
        .TextMatrix(i, 2) = rs.Fields("2")    's2
        .TextMatrix(i, 3) = rs.Fields("3")    'f1
        .TextMatrix(i, 4) = rs.Fields("4")    'gr1
        .TextMatrix(i, 5) = rs.Fields("5")    'gr2
        .TextMatrix(i, 6) = rs.Fields("6")    'gr3
        .TextMatrix(i, 7) = rs.Fields("7")    'gr4
        .TextMatrix(i, 8) = rs.Fields("8")    'gr5
        .TextMatrix(i, 9) = rs.Fields("9")    'gr6
        .TextMatrix(i, 10) = rs.Fields("10")  'gr7
        .TextMatrix(i, 11) = rs.Fields("11")  'gr8
        .TextMatrix(i, 12) = rs.Fields("12")  'c1
        .TextMatrix(i, 13) = rs.Fields("13")  'g1
        .TextMatrix(i, 14) = rs.Fields("14")  's3
        .TextMatrix(i, 15) = rs.Fields("15")  'f2
        .CellAlignment = 4
        .TopRow = .Rows - 1
        .Refresh
    End With
    i = i + 1
    rs.MoveNext
Loop 
```

我需要在 MSFlexGrid 中使用至少 600,000 个单元格，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:45:18.470

```
'I got 15 columns so this makes 21874row * 15column = 328110 cells
'it blows at 21875th row so 328125th cell is not reachable
'for that reason i reset the grid so it keeps 
Do While Not rs.EOF
    With MSFlexGrid1
        If .Rows >= 21874 Then
            .Rows = 2
            .Clear
            i = 1
        End If
        .Rows = .Rows + 1
        .TextMatrix(i, 1) = rs.Fields("1")    's1
        .TextMatrix(i, 2) = rs.Fields("2")    's2
        .TextMatrix(i, 3) = rs.Fields("3")    'f1
        .TextMatrix(i, 4) = rs.Fields("4")    'gr1
        .TextMatrix(i, 5) = rs.Fields("5")    'gr2
        .TextMatrix(i, 6) = rs.Fields("6")    'gr3
        .TextMatrix(i, 7) = rs.Fields("7")    'gr4
        .TextMatrix(i, 8) = rs.Fields("8")    'gr5
        .TextMatrix(i, 9) = rs.Fields("9")    'gr6
        .TextMatrix(i, 10) = rs.Fields("10")  'gr7
        .TextMatrix(i, 11) = rs.Fields("11")  'gr8
        .TextMatrix(i, 12) = rs.Fields("12")  'c1
        .TextMatrix(i, 13) = rs.Fields("13")  'g1
        .TextMatrix(i, 14) = rs.Fields("14")  's3
        .TextMatrix(i, 15) = rs.Fields("15")  'f2
        .CellAlignment = 4
        .TopRow = .Rows - 1
        .Refresh
    End With
    i = i + 1
    rs.MoveNext
Loop 
```

# safari - 内容脚本注入的多个白名单/黑名单？

> ID：12583367
> 
> 赞同：2
> 
> 时间：2012-09-25T12:52:55.237
> 
> 标签：safari, safari-extension

我正在使用两个不同的内容脚本构建一个 Safari 扩展。需要将一个脚本注入所有 http 页面（但不是 https 页面）。不管方案如何，另一个只会注入到 google.com 页面中。

为了实现这一点，我已设置`Extension Website Access`为：

![扩展网站访问](../Images/e0ed3de4a916e610b9ccdbf5e324ca5f.png)

这应该意味着在高层次上，我的扩展中的内容脚本应该能够访问所有页面。

为了获得更细粒度的控制，我以编程方式将内容脚本注入到与我的模式匹配的 URL 中。

```
App = {
  content: {
    // Inject into unsecure pages.
    whitelist: ['http://*/*'],
    // But not into secure pages.
    blackList: ['https://*/*'],
    loc: safari.extension.baseURI + 'data/content.js'
  },
  results: {
    // Inject this script into all google.com pages
    whiteList: ['http://*.google.com/*', 'https://*.google.com/*'],
    // Surely I don't need a blacklist if I specify a whitelist?
    blacklist: undefined,
    loc: safari.extension.baseURI + 'data/results.js',
  }
};

// Inject the first content script.
safari.extension.addContentScriptFromURL(App.content.loc, 
  App.content.whitelist, App.content.blacklist, false);

// Inject the second content script.
safari.extension.addContentStyleSheetFromURL(App.results.cssLoc, 
  App.results.whitelist, App.results.blacklist, false); 
```

问题是这两个脚本都被注入到所有页面中。好像我的白名单和黑名单什么都不做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:52:08.923

我在顶部的 whilelist/blacklist 定义中使用了大写字母：

```
App = {
  content: {
    blackList: ['https://*/*'],
  },
  results: {
    whiteList: ['http://*.google.com/*', 'https://*.google.com/*']
  }
}; 
```

但是当我将列表传递给脚本注入函数时，使用变量的非大写版本。

```
safari.extension.addContentScriptFromURL(App.content.loc, App.content.whitelist, App.content.blacklist, false); 
```

这显然意味着`undefined`被传递到注入函数而不是实际的白名单/黑名单。

# c# - 空字符串加倍 C#

> ID：12583371
> 
> 赞同：5
> 
> 时间：2012-09-25T12:52:57.783
> 
> 标签：c#, double

此时我正试图从这样的文本框中获取双重值：

```
String.IsNullOrEmpty(textBox1.Text) ? 0.0 : Double.Parse(textBox1.Text) 
```

但是有一个问题，我无法解析空文本框？

例如，如果用空文本框的 OleDb 和 Excel 尝试此代码，我们将得到错误

System.FormatException：输入字符串的格式不正确。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T12:55:50.290

```
double val;
if(!double.TryParse(textBox.Text,out val))
    val = 0.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:54:46.113

你试过了[`Double.TryParse(String, NumberStyles, IFormatProvider, Double%)`](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)吗？

这可以帮助解决各种数字格式的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:54:59.900

```
double result;
Double.TryParse("",out result); 
```

如果 TryParse 为真，则结果将具有双精度值此外，您可以使用 if 条件，

```
result = Double.TryParse("",out result) ? result : 0.00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T12:55:25.957

如果`Double.TryParse`无法解析字符串，则返回 false 并将 out 参数设置为 0。

```
double d;
if(double.TryParse(textBox1.Text, out d)
{
  // valid number
}
else
{
  // not a valid number and d = 0;
} 
```

或者

```
double d;
double.TryParse(textBox1.Text, out d)
// do something with d. 
```

另请注意，您可以在同一 if 语句中的其他逻辑中使用 out 参数：

```
double d;
if(double.TryParse(textBox1.Text, out d) && d > 500 && d < 1000)
{
  // valid number and the number is between 501 and 9999
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T12:55:07.690

你为什么不直接使用不会抛出异常的 Double.TryParse 呢？

# java - 如何更改 log4j 中的 htmllayout

> ID：12583374
> 
> 赞同：8
> 
> 时间：2012-09-25T12:53:08.730
> 
> 标签：java, html, layout, log4j

我想在 Java 中更改 log4j 的 htmllayout（第 5 列 - 时间、线程、级别、类别、消息）。

我的 log4j.properties 是：

```
log4j.rootLogger=DEBUG, Console, File

log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.File=org.apache.log4j.FileAppender
log4j.appender.File.File =${logfilename}

log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n

log4j.appender.File.layout=org.apache.log4j.PatternLayout
log4j.appender.File.layout=org.apache.log4j.HTMLLayout
log4j.appender.FILE.layout.Title=HTML Layout Example
log4j.appender.File.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n
#[%d{MMM dd HH:mm:ss}] %-5p (%F:%L) - %m%n 

log4j.appender.File.Threshold=INFO
log4j.appender.Console.Threshold=DEBUG 
```

我想更改“时间”列的名称并在那里显示当前时间。谁能帮我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:52:52.040

I found a solution, which works.

```
package com.mypackage;  

import java.text.SimpleDateFormat;  
import java.util.Date;  
import java.util.regex.Matcher;  
import java.util.regex.Pattern;  

import org.apache.log4j.spi.LoggingEvent;  

/** 
 * This HTML Log Formatter is a simple replacement for the standard Log4J HTMLLayout formatter and 
 * replaces the default timestamp (milliseconds, relative to the start of the log) with a more readable 
 * timestamp (an example of the default format is 2008-11-21-18:35:21.472-0800). 
 * */  

public class   MyLayout  
       extends org.apache.log4j.HTMLLayout  

{  
// RegEx pattern looks for <tr> <td> nnn...nnn </td> (all whitespace ignored)  

private static final String rxTimestamp = "\\s*<\\s*tr\\s*>\\s*<\\s*td\\s*>\\s*(\\d*)\\s*<\\s*/td\\s*>";  

//* The timestamp format. The format can be overriden by including the following   
  * property in the Log4J configuration file:  
  *  
  * log4j.appender.<category>.layout.TimestampFormat  
  *  
  * using the same format string as would be specified with SimpleDateFormat.  
  *  
  */  

private String timestampFormat = "yyyy-MM-dd-HH:mm:ss.SZ"; // Default format. Example: 2008-11-21-18:35:21.472-0800  

private SimpleDateFormat sdf = new SimpleDateFormat(timestampFormat);  

public MyLayout()  
{  
super();  
}  

/** Override HTMLLayout's format() method */  

public String format(LoggingEvent event)  
{  
String record = super.format(event); // Get the log record in the default HTMLLayout format.  

Pattern pattern = Pattern.compile(rxTimestamp);  // RegEx to find the default timestamp  
Matcher matcher = pattern.matcher(record);  

if (!matcher.find()) // If default timestamp cannot be found,  
{  
return record; // Just return the unmodified log record.  
}  

StringBuffer buffer = new StringBuffer(record);   

buffer.replace(matcher.start(1), // Replace the default timestamp with one formatted as desired.  
       matcher.end(1),  
       sdf.format(new Date(event.timeStamp)));  

return buffer.toString(); // Return the log record with the desired timestamp format.  
}  

/** Setter for timestamp format. Called if log4j.appender.<category>.layout.TimestampFormat property is specfied */  

public void setTimestampFormat(String format)   
{  
    this.timestampFormat = format;  
this.sdf = new SimpleDateFormat(format); // Use the format specified by the TimestampFormat property  
}  

/** Getter for timestamp format being used. */  

public String getTimestampFormat()  
{  
return this.timestampFormat;  
}  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:36:34.877

创建扩展`org.apache.log4j.HTMLLayout`类并覆盖`format`方法的自定义布局。

您可以查看[HTMLLayout 的代码](http://grepcode.com/file/repo1.maven.org/maven2/log4j/log4j/1.2.17/org/apache/log4j/HTMLLayout.java)如何格式化，并构建适合您需求的自己的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T17:09:15.020

该解决方案似乎缺少的部分是如何配置新扩展的`HTMLLayout`类，以便在通过电子邮件发送异常时获取并使用它。

我们的工作正常，我们只需要将这一行添加到我们的`log4j.properties`文件中。

```
log4j.appender.email.layout=com.<yourPackage>.utils.CustomizedHTMLLayout 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:59:31.330

在以下配置中配置您的布局

```
Log4j.rootLogger=DEBUG

log4j.appender.FileAppender =org.apache.log4j.FileAppender
log4j.appender.FileAppender.File= C:\test.html
log4j.appender.FileAppender.layout=org.apache.log4j.HTMLLayout

log4j.logger.<your packge>=FileAppender 
```

# jquery-mobile - jquery css 不适用于 angularjs 路由

> ID：12583379
> 
> 赞同：2
> 
> 时间：2012-09-25T12:53:20.973
> 
> 标签：jquery-mobile, routing, routes, angularjs

我希望用 jquery mobile 实现 angularjs，除了未应用 jquery mobile css 外，一切正常。

当我不在 angularjs 中使用路由但使用路由时，它可以工作，css 停止工作。

我该怎么办？我还包括`jquery-mobile-angular-adapter`仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:34:41.203

“如果您生成新的标记客户端或通过 Ajax 加载内容并将其注入页面，您可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。” - [http://jquerymobile.com/demos/1.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.0/docs/pages/page-scripting.html)

要解决这个问题，您必须告诉 JQuery 在 Angular 加载内容后初始化所有插件，您可以在控制器中执行此操作。

```
$scope.$on('$viewContentLoaded', function() {
    $(document).trigger('create'); //$(document) or just the part that was loaded with ajax
}); 
```

我不知道 jquery-mobile-angular-adapter，所以我无能为力。

# javascript - JQGrid for JQuery 只是给出一个空白页

> ID：12583383
> 
> 赞同：1
> 
> 时间：2012-09-25T12:53:24.593
> 
> 标签：javascript, jquery, jqgrid

我希望有人能提供帮助，因为我整个早上都在绞尽脑汁（我敢肯定这是我做过的愚蠢的事情）。

无论如何，我希望我们的一个系统中的数据显示在 JQGrid 中，我希望数据从一页加载，所以我使用 StringXML 功能，但是我遇到的问题是页面上没有显示任何内容，如果我包括这会显示一个警报，但即使所有文件都加载正常并且错误控制台中没有错误，网格也不会显示。

我已经粘贴了下面的代码，有什么明显的错误吗？

```
<HTML><HEAD>
<script type='text/javascript' src='includes/jquery/jquery-1.7.2.min.js'></script>
<script type='text/javascript' src='includes/jquery/jquery-ui-1.8.22.custom.min.js'></script>
<link rel="stylesheet" type="text/css" media="screen" href="includes/jquery/jquery-ui-1.8.22.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="includes/grid/ui.jqgrid.css" />
<script src="includes/grid/js/il8n/grid.locale-en.js" type="text/javascript"></script>
<script src="includes/grid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
</HEAD><BODY>
<SCRIPT>var liststr = "<?xml version='1.0' encoding='utf-8'?><GRIDDATA><ROWS>
<ROW><CELL>Fri 24 Aug 2012 17:19</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Fri 24 Aug 2012 18:20</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Fri 24 Aug 2012 19:21</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Fri 24 Aug 2012 20:22</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Fri 24 Aug 2012 21:23</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Fri 24 Aug 2012 22:24</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Fri 24 Aug 2012 23:25</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Sat 25 Aug 2012 00:26</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Sat 25 Aug 2012 01:27</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Sat 25 Aug 2012 02:28</CELL><CELL>5</CELL></ROW>
<ROW><CELL>Sat 25 Aug 2012 03:29</CELL><CELL>5</CELL></ROW>
</ROWS></GRIDDATA>";

jQuery(document).ready(function() {
            jQuery("#gridview").jqGrid({ 
            datatype: 'xmlstring', datastr: 'liststr', height: 250, 
            colNames:['Date', 'Lic1'], 
            colModel:[    
                {name:'date',index:'date', width:90, sorttype:'date'}, {name:'30300', index:'30300', width: 200, sorttype:'int'}],
            multiselect: true,
            caption: "Licenses in Use"
            })
        ;}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:10:40.553

第一个：你应该有一个`<div id="gridview"></div>`和第二个：在：

```
jQuery(document).ready(function() {
            jQuery("#gridview").jqGrid({ 
            datatype: 'xmlstring', datastr: 'liststr', height: 250, 
            colNames:['Date', 'Lic1'], 
            colModel:[    
                {name:'date',index:'date', width:90, sorttype:'date'}, {name:'30300', index:'30300', width: 200, sorttype:'int'}],
            multiselect: true,
            caption: "Licenses in Use"
            })
        ;} 
```

您错过了“jQuery(document).ready(”的最新括号，因此，您的代码应如下所示：

```
jQuery(document).ready(function() {
            jQuery("#gridview").jqGrid({ 
            datatype: 'xmlstring', datastr: 'liststr', height: 250, 
            colNames:['Date', 'Lic1'], 
            colModel:[    
                {name:'date',index:'date', width:90, sorttype:'date'}, {name:'30300', index:'30300', width: 200, sorttype:'int'}],
            multiselect: true,
            caption: "Licenses in Use"
            });
        }); 
```

# ruby-on-rails - rails 应用程序给出错误“无法从 {ru.yml 路径} 加载翻译预期它返回一个哈希，但没有”

> ID：12583388
> 
> 赞同：9
> 
> 时间：2012-09-25T12:53:34.383
> 
> 标签：ruby-on-rails, internationalization, centos, yaml, centos6

我的应用程序在本地运行良好，但是当我将其安装到生产服务器时，运行`rails server`和请求页面时出现以下错误：

```
ActionView::Template::Error (can not load translations from {app}/config/locales/ru.yml, expected it to return a hash, but does not). 
```

我有 YAML 翻译 ru.yml：

```
ru:
  clients:
    index: 
      title: Список клиентов 
```

调用时发生错误，例如：

```
%h1=t '.title' 
```

我的开发机器正在运行 Mac OS X ML

生产服务器是安装了 rvm 和 libyaml 的 CentOS 6。

两台服务器都在 Ruby 1.9.2p320 和 Rails 3.2.8 上

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:56:54.103

操作`YAML.load(File.open('config/locales/ru.yml'))`给了我其中一条线的错误。

我添加了引号：`default: '%d.%m.%Y %H:%M'`并得到了一个哈希值。问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:54:38.310

问题在于使用`psych`YAML 引擎无法解析带有 % 符号的字符串并生成 SyntaxError 异常。

改用`syck`引擎。将以下代码添加到`config/boot.rb`文件末尾

```
YAML::ENGINE.yamler = 'syck' 
```

提示：syck 需要 Ruby 版本 >= 2.0.0。

# c# - Window Service - 等待存储过程得到结果

> ID：12583395
> 
> 赞同：3
> 
> 时间：2012-09-25T12:54:15.420
> 
> 标签：c#, sql-server-2008, sql-server-2005, c#-4.0, windows-services

我正在从`C#`Window Service 运行存储过程。存储过程是一个非常繁重的查询，需要很长时间。

我想等到存储的过程完成并返回值。

有什么方法可以确定存储过程是否完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:46:59.600

使用`Threading.Tasks`. 以下代码将使您的线程等待任务完成。

```
public void CallStoredProcMethod()
{
    var task1 = System.Threading.Tasks.Task.Factory.StartNew(() => RunStoredPro());

    // thread will wait there till the operation finish
    task1.Wait();
}

public void RunStoredPro()
{
    using (var connection = new SqlConnection(sqlConnString))
    {
        // your database call
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:58:17.603

[System.Data.Common.DbCommand](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.aspx)具有[CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.commandtimeout.aspx)属性。

> 获取或设置在终止尝试执行命令并生成错误之前的等待时间。等待命令执行的时间（以秒为单位）。请注意实施者，建议 0 表示没有超时。

请注意，SqlCommand 的默认值为 30 秒。如果您将 CommandTimeout 属性设置为 0，您的调用将花费存储过程执行所需的时间。[SqlCommand 上的ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)实现的 msdn 页面具有以下示例，稍作修改以设置[CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)：

```
static public int AddProductCategory(string newName, string connString)
{
    Int32 newProdID = 0;
    string sql =
        "INSERT INTO Production.ProductCategory (Name) VALUES (@Name); "
        + "SELECT CAST(scope_identity() AS int)";
    using (SqlConnection conn = new SqlConnection(connString))
    {
        SqlCommand cmd = new SqlCommand(sql, conn);

        // this will cause the command to wait until the sproc is finished
        cmd.CommandTimeout = 0; 

        cmd.Parameters.Add("@Name", SqlDbType.VarChar);
        cmd.Parameters["@name"].Value = newName;
        try
        {
            conn.Open();
            newProdID = (Int32)cmd.ExecuteScalar();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
    return (int)newProdID;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:10:38.680

> 在存储过程中使用 return 语句并获取值

例如作为存储过程

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
go

ALTER PROCEDURE [dbo].[Validate]
@inputdata varchar(50),
@outputdata varchar(50) output

AS
SET @outputdata = (
SELECT TOP 1 Password FROM dbo.tblUser WHERE Login = @a)

RETURN @outputdata
GO 
```

我这里简单解释一下C#中的核心代码

```
 string returnValue = string.Empty;
         ...............
        SqlConn.Open();
        sqlcomm.CommandType = CommandType.StoredProcedure;
        SqlParameter param = new SqlParameter("@inputdata", SqlDbType.VarChar);
        param.Direction = ParameterDirection.Input;
        param.Value = Username;
        sqlcomm.Parameters.Add(param);

        SqlParameter retval = sqlcomm.Parameters.Add("@outputdata", SqlDbType.VarChar);
        retval.Direction = ParameterDirection.Output;
        string retunvalue = (string)sqlcomm.Parameters["@outputdata"].Value;
         ......................
         ......... 
```

# css - 在使用 CDN 的情况下，有没有办法为 .scss 中引用的图像的 url 添加前缀？

> ID：12583396
> 
> 赞同：1
> 
> 时间：2012-09-25T12:54:17.090
> 
> 标签：css, sass, compass-sass

目前在我的`.scss`文件中，我有

```
.grid_pic {
    width : $width-grid;
    background : transparent url('/img/exemple_bg.png') 0 0 repeat;
} 
```

**有没有办法删除`/img/`and 来定义一个变量，或者一个配置文件，告诉所有图像的前缀是我想要的值？**

所以在我们决定通过 CDN 提供图片的那一天，我们只需将 1 个配置行从 更改为`/img/`，`http://cdn.example.com/`而不是更改所有图片的 Url ？

你将如何做到这一点？（一个变量还是已经有一个配置？）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:58:45.730

尝试[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)语法和变量：

```
background: url(#{$path_variable_name}/site/background.jpg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:12:40.373

您是否尝试过使用 image-url 功能？

[http://compass-style.org/reference/compass/helpers/urls/#image-url](http://compass-style.org/reference/compass/helpers/urls/#image-url)

# c - 静态声明遵循非静态

> ID：12583397
> 
> 赞同：3
> 
> 时间：2012-09-25T12:54:17.903
> 
> 标签：c, gcc, avr

在我的 avrstudio4 项目中，我遇到了这个错误：

```
../Indication.c:95:15: error: static declaration of 'menu_boot' follows non-static declaration 
```

在**main.c**我输入**#include "indication.h"**

**指示.h**是指示.c 的头文件**，**函数在其中定义如下：

```
unsigned char menu_boot(unsigned char index, unsigned char *menu1) 
__attribute__((section(".core"))); 
```

在**indication.c**我有

```
#include "indication.h"
...
unsigned char menu_boot(unsigned char index, unsigned char *menu1) 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:41:44.580

从表面上看，错误消息意味着在文件的第 95 行`../Indication.c`（可能与您讨论的文件名称相同，也可能不同`indication.c`），有一个静态声明，`menu_boot`例如：

```
static unsigned char menu_boot(unsigned char index, unsigned char *menu1); 
```

或它的静态定义，例如：

```
static unsigned char menu_boot(unsigned char index, unsigned char *menu1)
{
    ...
} 
```

* * *

考虑文件中的以下代码`xx.c`：

```
extern unsigned char function(int abc);

static unsigned char function(int abc);

static unsigned char function(int abc)
{
    return abc & 0xFF;
} 
```

使用 GCC 4.1.2（在 RHEL 5 上）编译时，编译器会说：

```
$ gcc -c xx.c
xx.c:3: error: static declaration of ‘function’ follows non-static declaration
xx.c:1: error: previous declaration of ‘function’ was here
$ 
```

如果我注释掉第三行，那么编译器会说：

```
$ gcc -c xx.c
xx.c:6: error: static declaration of ‘function’ follows non-static declaration
xx.c:1: error: previous declaration of ‘function’ was here
$ 
```

该消息是相同的，但包含有关先前声明所在位置的信息。在这种情况下，它在同一个源文件中；如果声明位于翻译单元中包含的不同源文件（通常是标题）中，则它将标识该其他文件。

# javascript - Javascript - 嵌套 for 循环索引的范围

> ID：12583400
> 
> 赞同：7
> 
> 时间：2012-09-25T12:54:29.257
> 
> 标签：javascript, nested-loops

我记得变量是 Javascript 中的函数范围。但是，如果我在循环中重新定义局部变量，行为会怎样。一种常见的用例是嵌套循环。在下面的代码中，如果我将 j 更改为 i，则外部 for 循环在一次迭代后终止，因为外部范围内 i 的值与内部 for 循环相同。由于我使用 var，我期待（类似于其他语言）它在内部 fo 循环中重新定义。这是否意味着在 JS 中，无法在函数范围内重新声明和使用局部变量。

```
for (var i = 0, len = x.length; i < len; i++) {
            ...
            for (var j = 0, len = y.length; j < len; j++) {
                ...
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T12:57:29.847

正如您所说，JavaScript 只有函数范围。变量声明被提升到声明它们的范围的顶部。您的示例解释如下：

```
var i, j, len; //Declarations are hoisted...
for (i = 0, len = x.length; i < len; i++) { //Assignments happen in place
    for (j = 0, len = y.length; j < len; j++) {

    }
} 
```

至于这部分：

> 如果我将 j 更改为 i，则外部 for 循环在一次迭代后终止

如果替换`j`为`i`，则在内循环的第一次迭代后，`i`将是，而外循环将继续或停止，具体取决于和`y.length - 1`之间的差异。`x.length``y.length`

如果您对内部工作的真正解释感兴趣，[ECMAScript 规范（声明绑定实例化）](http://es5.github.com/#x10.4)详细介绍了它。总而言之，每次控制进入一个新的执行上下文时，都会发生以下情况（比这发生的要多得多，但这是其中的一部分）：

> *对于代码*中的每个*VariableDeclaration*和*VariableDeclarationNoIn d*，按源文本顺序执行
> 
>  **   令*dn*为*d*中的*标识符*。
> **   让*varAlreadyDeclared*成为调用*env 的*HasBinding 具体方法并传递*dn*作为参数的结果。*   如果*varAlreadyDeclared*为假，则
>     *   调用*env 的*CreateMutableBinding 具体方法，传递*dn*和 *configureBindings*作为参数。
>     *   调用*env 的*SetMutableBinding 具体方法，传递*dn*、 undefined 和*strict*作为参数。**

 **这意味着如果您在每个执行上下文中多次声明一个变量，它将被有效地忽略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T12:57:05.930

每个`var`声明都将放在当前范围的顶部，因此您的代码与以下内容相同：

```
 var i, j, len;
   for (i = 0, len = x.length; i < len; i++) {
        ...
        for (j = 0, len = y.length; j < len; j++) {
            ...
        }
    } 
```

检查这个：[JavaScript范围和提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:46:54.523

JS 中没有块级范围。

但是，如果最有必要在您的代码中拥有/重新声明相同的变量名，您可以这样做：

```
function loopIt(arr, fn, scope) {
    for (var i = 0, len = arr.length; i < len; i++) {
        fn.call(scope || this, arr[i], i, arr);
    }
} 
```

并像这样使用它：

```
var firstArr = ["a", "b"];
var secondArr = ["c", "d"];

loopIt(firstArr, function(item, i) {
    var msg = "Hey it's '" + item + "'";
    console.log(msg);

    // if you want access to the parent scope's var
    var scopedItem = item;

    loopIt(secondArr, function(item, i) {
        var msg = "Hello it's '" + item + "' in '" scopedItem + "'";
        console.log(msg);
    });
}); 
```

这将为我们提供以下结果：

```
Hey it's 'a'
Hello it's 'c' in 'a'
Hello it's 'd' in 'a'
Hey it's 'b'
Hello it's 'c' in 'b'
Hello it's 'd' in 'b' 
```**

# html - 如何在 VBA/VBScript 中执行 onclick 事件

> ID：12583405
> 
> 赞同：0
> 
> 时间：2012-09-25T12:54:37.030
> 
> 标签：html, vba, vbscript

```
<td class="highlightTab" id="tabnew" style="background-color: red; color: yellow;" onmouseover="setBgColor('tabnew')" onmouseout="setHighOrgBgColor('tabnew','highlightTab')">
<a class="highlightTabLabel" onclick="parent.MainFrame.request('ref_back','')" href="Javascript:void(0)"> 
```

我仍在尝试通过网页学习 excel 自动化。我正在尝试使用 FireEvent 强制 onclick（同时使用 click 和 fireevent，但两者都不起作用），我无法弄清楚：

```
.getElementById("tabnew").Click
.getElementById("tabnew").FireEvent ("onclick") 
```

有没有人有任何想法？我真的希望有更多关于用于 VBScript/VBA 的 html 对象库的文档:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T18:11:27.567

这是您要查找的内容：

document.getElementById("tabnew").attachEvent "onclick",getref("onclick")

第一个参数是事件（“onclick”，“onmouseover”......见：[http](http://www.tutorialspoint.com/vbscript/vbscript_events.htm) ://www.tutorialspoint.com/vbscript/vbscript_events.htm（事件列表页面的最底部））第二个参数是getref您的子名称。

# c++ - sprintf() 输出乱码

> ID：12583415
> 
> 赞同：4
> 
> 时间：2012-09-25T12:55:11.867
> 
> 标签：c++, printf

我有以下代码：

```
char buf[255];
int ID = 0;
double val = 1.234;
sprintf(buf, "%d@%.3lf", ID, val);
printf("%s", buf); 
```

`printf()`正确打印`ID`值，但`val`值只是一些垃圾。你知道是什么导致了这个问题吗？我在 Win7 32 位上使用 MSVC 9。更奇怪的是，上面的代码可以在 64 位机器上正常工作。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:14:50.583

在此评论之后：

是的，还有一些额外的代码。这段代码被编译成一个 DLL 库，实际上我在三个地方调用了我的问题中发布的代码，并且只在输出垃圾中的一个地方，如所述。

这可能是由于代码中其他地方的一些问题。您可能在某处损坏了堆栈/堆并无意中覆盖了您的变量。使用内存检查器检查您的代码（valgrind (unix)、CMemLeak(everything)）

# android - 在 ListView 上实现无限滚动

> ID：12583419
> 
> 赞同：31
> 
> 时间：2012-09-25T12:55:28.653
> 
> 标签：android, listview

我想在一个 android ListView 组件上实现无限滚动，当滚动到列表中的最后一个元素时，它会将新项目添加到列表视图的底部。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-25T12:57:16.707

实现 onscrolllistener()

```
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    this.currentFirstVisibleItem = firstVisibleItem;
    this.currentVisibleItemCount = visibleItemCount;
}

public void onScrollStateChanged(AbsListView view, int scrollState) {
    this.currentScrollState = scrollState;
    this.isScrollCompleted();
 }

private void isScrollCompleted() {
    if (this.currentVisibleItemCount > 0 && this.currentScrollState == SCROLL_STATE_IDLE) {
        /*** In this way I detect if there's been a scroll which has completed ***/
        /*** do the work for load more date! ***/
        if(!isLoading){
             isLoading = true;
             loadMoreDAta();
        }
    }
} 
```

当您实现并将此侦听器添加到您的列表视图时，这将检测到列表视图的末尾，因为滚动位置位于列表末尾只是获取更多数据。在加载数据期间，您需要一个标志来在滚动位置结束时立即加载数据。因此，如果数据正在加载并且在此期间您向上滚动然后向下滚动，那么它将不会获得更多数据进行复制。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T14:22:21.780

尝试使用[OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)只需将项目添加到您`ListView`的

```
public void onScroll(AbsListView view,
    int firstVisible, int visibleCount, int totalCount) {

    // Add the items

    }
} 
```

并且，设置您`adapter.notifyDataSetChanged()`将在您的此处显示添加的项目`ListView`我给您一些示例，说明如何`onScrollListener`与您的 ListView集成

1.  [Android 无尽列表](https://stackoverflow.com/q/1080811/940096)

2.  [无限滚动列表视图](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)

3.  [无尽的列表视图](http://andytsui.wordpress.com/2012/04/27/tutorial-infinite-scroll-endless-list-view-with-android-binding/)

# macos - 无法在 Mac 上的 Panel 的 CreationComplete 事件中获取系统字体

> ID：12583422
> 
> 赞同：0
> 
> 时间：2012-09-25T12:55:35.657
> 
> 标签：macos, apache-flex

我正在开发一个 Flex 面板，它有两个组合框。其中一个组合框将显示系统字体，另一个组合框将显示相应的样式。例如，第一个组合框将显示“Arial”，然后另一个组合框将显示以下列表：Regular Bold Italic 等

我在面板创建完成时编写了代码“Photoshop.app.fonts”。这在 Windows 中使用时效果很好，但是当我在 Mac 上使用相同的代码时，此代码不起作用。

我看到当我在Mac上完成Panel的创建跟踪“Photoshop.app.fonts.length”时，返回的值为0，而如果我在单击按钮时使用相同的代码，即基本上在面板完全创建后我得到正确值，即 394。

有人可以指导我为什么会这样吗？以及在 Panel 的 Mac 的创建完成事件中获取系统字体的替代解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:43:42.787

我已经通过使用 PSMacDom 解决了这个问题，它递归地调用我的面板的创建完成函数，然后检索所有系统字体。

谢谢。

# android - 如何将指针事件从活动发送到它后面的窗口？

> ID：12583424
> 
> 赞同：0
> 
> 时间：2012-09-25T12:55:44.160
> 
> 标签：android

我正在尝试创建类似 PointerLocation 的程序的实现。

**问题是：**
如何将指针事件从活动发送到它后面的窗口？

例如：
我有一个布局不可见的活动，所以我可以看到我设备的主菜单（等），我想将我的活动的所有屏幕触摸事件发送到后台（主菜单等）。也许有人对此有任何想法或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:41:40.980

有 BroadcastReceiver / BroadcastManager，它允许在应用程序之间发送和接收消息。您可以将其限制在应用程序内。我敢肯定还有其他方法。

你真的需要一个单独的、不可见的布局来实现这一点吗？有很多听众喜欢 onTouch()

# jquery - Mootools 相当于之前的 jQuery

> ID：12583432
> 
> 赞同：1
> 
> 时间：2012-09-25T12:56:02.530
> 
> 标签：jquery, mootools

mootools 有相当于 jQuery 的`before`吗？或者如果没有，我如何在 mootools 中执行类似的功能？

例如，我从 ajax 得到结果，我想在某个元素之前插入结果的 HTML 代码。

```
<div class="elements">
  <div class="element"></div>
  <div class="element"></div>
  <div class="element"></div>

  </div class="loader"></div>
</div> 
```

我想在`.loader`. 在这个问题中，我不能使用 JSON 或类似 HTML 的对象。

我有将 HTML 插入 div 的功能：

```
function appendHTML(elem, html){
    if ($type(html) != 'string') return false;
    var temp = new Element('div');
    temp.set('html', html);
    elem.adopt(temp.childNodes);
    return this;
} 
```

但我想在 div 之前插入 HTML 代码，而不是插入。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:58:08.510

当你将元素[注入](http://mootools.net/docs/core/Element/Element#Element%3ainject)DOM 时，你可以传入第二个参数来说明元素应该去哪里。默认值为`bottom`.

```
new Element('div', {
    "class": 'className',
    html: 'Some html'
}).inject(existingEl, 'before'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:57:48.463

有[`inject()`](http://mootools.net/docs/core/Element/Element#Element%3ainject)方法：

```
myElement.inject(el[, where]); 
```

以下是插入`myFirstElement`before的示例`mySecondElement`：

```
myFirstElement.inject(mySecondElement, 'before'); 
```

# android - Android 将 DatePicker 侦听器附加到选项菜单按钮

> ID：12583440
> 
> 赞同：0
> 
> 时间：2012-09-25T12:56:26.533
> 
> 标签：android, datepicker

我有一个活动，我已经覆盖了 optionsMenu。它有 3 个按钮，一个用于获取上一个列表，一个用于获取下一个列表，选项菜单上的第三个按钮应显示一个数据选择器，用户可以在其中选择他们想要查看的列表日期。如何将 DatePicker 侦听器附加到选项菜单中的“今天”按钮？

```
public void setCurrentDateOnView() {

        dpResult = (DatePicker) findViewById(R.id.datepicker1);

        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

        // set current date into datepicker
        // dpResult.init(year, month, day, null);

    }

    public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.menurotadetails, menu);
            return true;
        }

        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case R.id.previous:
                DateTime now2 = nfcscannerapplication.getDate();
                Log.e(TAG, "now2 = " + now2);
                DateTime dateTimePlusOne2 = now2.minusDays(1);
                Log.e(TAG, "now2 after -1 = " + dateTimePlusOne2);
                nfcscannerapplication.setDate(dateTimePlusOne2);
                DateTimeFormatter fmt2 = DateTimeFormat.forPattern("d-MMM-Y");
                String nextDay2 = fmt2.print(dateTimePlusOne2);

                Intent i2 = new Intent(this, NfcscannerActivity.class);
                i2.putExtra("nextRota", nextDay2);
                i2.setAction("NEXT_ROTA");
                startActivity(i2);
                return true;

            case R.id.next:

                DateTime now = nfcscannerapplication.getDate();
                Log.e(TAG, "now = " + now);
                DateTime dateTimePlusOne = now.plusDays(1);
                Log.e(TAG, "now after +1 = " + dateTimePlusOne);
                nfcscannerapplication.setDate(dateTimePlusOne);
                DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
                String nextDay = fmt.print(dateTimePlusOne);

                Intent i = new Intent(this, NfcscannerActivity.class);
                i.putExtra("nextRota", nextDay);
                i.setAction("NEXT_ROTA");
                startActivity(i);
                return true;

            case R.id.today:
                setCurrentDateOnView();
                return true;

            default:

                return super.onOptionsItemSelected(item);
            }
        }

        public void addListenerOnButton() {

            ??????.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    showDialog(DATE_DIALOG_ID);

                }

            });

        }

        @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case DATE_DIALOG_ID:
                // set date picker as current date
                return new DatePickerDialog(this, datePickerListener, year, month,
                        day);
            }
            return null;
        }

        private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

            // when dialog box is closed, below method will be called.
            public void onDateSet(DatePicker view, int selectedYear,
                    int selectedMonth, int selectedDay) {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;

                // set selected date into datepicker also
                dpResult.init(year, month, day, null);

            }
        }; 
```

. [更新]对不起，我没有想清楚，我只是做了以下

```
case R.id.today:
            setCurrentDateOnView();
            showDialog(DATE_DIALOG_ID);
            return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:10:58.210

试试这个

```
public void setCurrentDateOnView() {
                // your code
                showDialog(DATE_DIALOG_ID);

        }); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:55:26.633

```
case R.id.today:
            setCurrentDateOnView();
            showDialog(DATE_DIALOG_ID);
            return true; 
```

# c++ - C++ 用户的 Visual Studio 2010 与 2012 编译时性能和稳定性比较

> ID：12583443
> 
> 赞同：5
> 
> 时间：2012-09-25T12:56:30.833
> 
> 标签：c++, visual-studio

作为 VS 2010 SP1 的 C++ 用户，我经常因编译速度慢（在 QC 机器上）和臭名昭著的“等待内部操作......”而感到恼火：）长时间（有时很长，又名无限：（）冻结。
所以我想知道：

1.  VS 10 vs VS11的编译速度是多少（我主要对Debug编译速度感兴趣）
2.  编译器在 VS11 中更稳定吗？

编辑：我更喜欢 1) 的真实数据，而不是“感觉好多了”或“看起来一样”......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T13:15:02.990

Visual C++ 团队有一篇关于该主题的博文。

阅读：http: [//blogs.msdn.com/b/vcblog/archive/2012/05/24/10309971.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/05/24/10309971.aspx)

根据他们的图表，在许多情况下它有点慢。

# java - 将 JButton 文本绑定到属性

> ID：12583448
> 
> 赞同：0
> 
> 时间：2012-09-25T12:56:37.943
> 
> 标签：java, swing, jbutton

我是摇摆新手。我使用 JTree、JCheckBox、JList 和 JButton 制作了一个小应用程序。我正在使用关联的模型类来存储表示状态。工作正常，除了 JButton。我想根据我的模型的属性更新按钮的文本。基本上，它会从登录/注销用户当前是否登录。不幸的是，我在 ButtonModel 界面中找不到 setText 方法。谁能告诉我该怎么做？

谢谢。私服。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:09:47.480

对于 a`JButton`你可以使用 an`Action`作为你的模型。该`Action`接口定义了用于从`JButton`中检索其状态的键`Action`，包括用于文本的键：`Action.NAME`

如果您查看源代码，带有`Action`（或简称为`setAction`方法）的构造函数使用更多信息，`Action`然后可以从`ButtonModel`. 其他构造函数也一样，例如

```
public JButton(String text, Icon icon) {
    // Create the model
    setModel(new DefaultButtonModel());

    // initialize
    init(text, icon);
} 
```

因此，您的评估似乎是正确的，即`ButtonModel`不包含用于可视化典型的所有信息`JButton`

# c++ - WinAPI 设备通知 - 未进入消息循环

> ID：12583449
> 
> 赞同：2
> 
> 时间：2012-09-25T12:56:39.040
> 
> 标签：c++, winapi

我正在尝试检测何时插入 USB 驱动器。现在，我正在创建一个虚拟窗口并`RegisterDeviceNotification`对其进行编译。但是，我认为我的方法不正确，因为窗口似乎没有收到消息。

```
#include <iostream>
#define WINVER 0x501
#include <windows.h>
#include <dbt.h>
#include "devicehandler.h"
#include "remover.h"

DeviceHandler::DeviceHandler(Remover* remover)
{
    this->remover = remover;
    this->hWnd = this->createHandleWindow();
    this->registerDeviceHandler();
    this->messageLoop(this->hWnd);
}

DeviceHandler::~DeviceHandler()
{
    this->unregisterDeviceHandler();
}

void DeviceHandler::messageLoop(HWND hWnd)
{
    std::cerr << "Entering message loop." << std::endl; // Gets here!

    MSG msg;
    while (GetMessage(&msg, this->hWnd, 0, 0)) {
        std::cerr << "Loop!" << std::endl; // Does not get here!
        switch (msg.message) {
            case WM_DEVICECHANGE:
                {
                    PDEV_BROADCAST_HDR pHdr = (PDEV_BROADCAST_HDR) msg.lParam;
                    switch(msg.wParam) {
                        case DBT_DEVICEARRIVAL:
                            std::cerr << "Device added!" << std::endl;
                            break;
                        default:
                            std::cerr << "Other device event." << std::endl;
                            break;
                    }
                    break;
                }
            default:
                break;
        }
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}

HWND DeviceHandler::createHandleWindow()
{
    std::cerr << "Creating handle window... ";

    HWND hWnd = CreateWindow(NULL, NULL, WS_ICONIC, 0, 0, CW_USEDEFAULT, 0,
                             NULL, NULL, GetModuleHandle(NULL), NULL);
    ShowWindow(hWnd, SW_HIDE);

    std::cerr << "done!" << std::endl;
    return hWnd;
}

void DeviceHandler::registerDeviceHandler()
{
    std::cerr << "Device notification handling... ";
    // GUID guid = { 0xa5dcbf10, 0x6530, 0x11d2, { 0x90, 0x1f, 0x00, 0xc0, 0x4f, 0xb9, 0x51, 0xed } };
    GUID guid = { 0x25dbce51, 0x6c8f, 0x4a72, { 0x8a, 0x6d, 0xb5, 0x4c, 0x2b, 0x4f, 0xc8, 0x35 } };
    DEV_BROADCAST_DEVICEINTERFACE notificationFilter;
    ZeroMemory(&notificationFilter, sizeof(notificationFilter));
    notificationFilter.dbcc_size       = sizeof(DEV_BROADCAST_DEVICEINTERFACE);
    notificationFilter.dbcc_devicetype = DBT_DEVTYP_DEVICEINTERFACE;
    notificationFilter.dbcc_classguid  = guid;

    this->deviceNotifier = RegisterDeviceNotification(this->hWnd,
                                                      &notificationFilter,
                                                      DEVICE_NOTIFY_WINDOW_HANDLE);
    std::cerr << "done!" << std::endl;
}

void DeviceHandler::unregisterDeviceHandler()
{
    UnregisterDeviceNotification(this->deviceNotifier);
} 
```

我猜这不是放置消息循环的正确位置，但我对 WinAPI 不是很好。如何让我的程序进入消息循环？（并且最好注册设备通知。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:12:27.107

您应该只创建一条[消息 Window](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599%28v=vs.85%29.aspx#message_only)。它可以接收它注册的消息，如设备通知和电源事件，但它永远不会显示。

仅消息[窗口必须使用 RegisterClassEx 注册](https://stackoverflow.com/questions/4081334/using-createwindowex-to-make-a-message-only-window)。

注册窗口类后，您可以将窗口类名称与 HWND_MESSAGE 作为父级一起传递给 CreateWindowEx。您的 CreateWindow 应该使用[`CreateWindowEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)如下所示：

```
HWND hWnd = CreateWindowEx(0, myClassName, _T("This is not the class name"), 
                0, 0, 0, 0, 0, HWND_MESSAGE, 0, 0, this); 
```

您仍将使用 GetMessage 以及[TranslateMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644955%28v=vs.85%29.aspx)和[DispathMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934%28v=vs.85%29.aspx)，它们会像回调一样调用您的 WNDPROC。这没有错，但是您在 Windows 过程中丢失了指向您的 DeviceHandler 类的指针。

这就是为什么您`this`作为`CreateWindowEx`. 您可以在收到消息时检索它，并使用和`WM_CREATE`将其设置为您的 windows 类用户数据。之后的每个调用都将检索指针并将其转换为 DeviceHandler 对象。[`SetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx)`GWLP_USERDATA`[`GetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633585%28v=vs.85%29.aspx)

这是[该技术的一个很好的例子](http://www.gamedev.net/topic/303854-pointer-to-wndproc-in-a-class/)。

要[遵守规则](http://blogs.msdn.com/b/oldnewthing/archive/2005/03/03/384285.aspx)，您应该注册自己的窗口类来使用`GWLP_USERDATA`，尽管它仍然可以使用`STATIC`窗口类。

最后一点：一定要为你不处理的消息调用[DefWindowProc 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633572%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:33:45.607

看起来问题是您的窗口没有创建，因为您没有指定有效的类名。`HWND`在这种情况下返回的是`NULL`并且设备无法注册它并向其发送消息。

正如其他答案中所建议的那样，您可以使用[Message-Only Window](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599%28v=vs.85%29.aspx#message_only)来接收设备通知。但想提一下，在这种情况下不需要注册窗口类，您可以使用预定义的类名，例如`STATIC`（因为您实际上不需要指定自己的窗口过程）：

```
HWND hwnd = CreateWindowEx(0, "STATIC", 0, 0, 0, 0, 0, 0, HWND_MESSAGE, 0, 0, 0); 
```

# c# - 关于表单的 C# 帮助

> ID：12583461
> 
> 赞同：1
> 
> 时间：2012-09-25T12:57:27.667
> 
> 标签：c#

我想制作一个程序，如果我们点击一​​个位置，例如：-2, 0，就会完成一个功能。

PS：点击事件在表单上。那么，我应该使用计时器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:58:37.197

不，只需将处理程序附加到`OnClick`表单上的事件。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:04:00.140

正如 Jakub 所说，使用表单点击事件。你可以在这里找到这个：

![点击事件](../Images/29ac801d04490163c80444a0c3ee3d2b.png)

当您单击表单上的任意位置时，您会在事件 args 中以 X 和 Y 坐标的形式获得单击的位置，以及单击了哪个鼠标按钮，如下所示：

![事件参数](../Images/d92070a5ea29193b22f8ba6a8a86c677.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:03:51.837

单击鼠标将为您提供鼠标位置。

```
this.MouseClick += new System.Windows.Forms.MouseEventHandler(Form1_MouseClick);
void Form1_MouseClick(object sender, System.Windows.Forms.MouseEventArgs e)
{
    if (e.X == -2 && e.Y == 0)
        ; // Do function.
} 
```

# c# - IDM 和 Flashget,... 是如何工作的？（最大下载速度）

> ID：12583465
> 
> 赞同：-1
> 
> 时间：2012-09-25T12:57:38.480
> 
> 标签：c#, sockets, download

我需要在 C# 中以最大可用下载速度下载。

FlashGet、IDM 和其他下载管理器似乎都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:01:46.907

没什么特别的，他们只是打开多个下载连接到同一个文件并使用分段下载，因此每个连接从文件中提取不同范围的字节。

有关更多信息，请参见例如 - [http://www.ehow.com/how-does_4615524_download-accelerator-work.html](http://www.ehow.com/how-does_4615524_download-accelerator-work.html)

对于 C# 方面，您可能希望查看现有的 .NET 项目，例如 - [http://www.codeproject.com/Articles/21053/MyDownloader-A-Multi-thread-C-Segmented-Download-M](http://www.codeproject.com/Articles/21053/MyDownloader-A-Multi-thread-C-Segmented-Download-M)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:09:30.060

神奇之处在于**多重连接**和 http**`Range`标头**。

假设文件大小为 100MB。您计划打开 10 个连接。因此，对于每个连接，您将下载 10Mb。现在打开一个 http 连接并开始下载相同的文件，但 10 个连接将分配给 10 个不同的段。

连接 1 发送`Range: bytes=0-1048575`

连接 2 发送`Range: bytes=1048576-2097151`

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T05:20:39.477

您必须在 TCP 协议中设置窗口大小。但是.net 不支持这个未来

# locking - 杀死informix中的删除会话

> ID：12583466
> 
> 赞同：1
> 
> 时间：2012-09-25T12:57:40.683
> 
> 标签：locking, informix

错误地，我在informix 中使用dbaccess session 执行了这个查询。

```
Delete from table #without where condition 
```

意识到我应该使用的错误，我`TRUNCATE`又犯了一个愚蠢的错误。
我杀死了`dbaccess`会话。但是该表被完全锁定，我无法对该表执行任何操作。

我可以采取哪些步骤来移除锁和`truncate`桌子。

```
1) Restart Informix server
2) onmode -z <sessionid>  # Does not work. 
                            I see hell lot of sessions created for the delete query 
```

有没有其他简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:23:09.950

假设您没有使用 Informix SE...

是否记录了数据库？如果是这样，您是否在显式（BEGIN WORK）事务中运行了该语句？

### 分析

如果您有一个未记录的数据库，那么服务器删除的每一行都会消失。如果您停止 DELETE，它不会撤消部分完成的更改。使用未记录的数据库意味着您不希望有保证的语句级恢复。

如果您有一个定期记录的数据库并且没有显式事务，那么在 DB-Access 会话终止后，该语句可能仍在运行。因为它作为单例语句运行，所以它将完成并提交。在它这样做之前，如果你强行关闭服务器，那么快速恢复将回滚语句（事务）。鉴于我看到“5 小时前”，我担心您现在及时关闭服务器的机会是有限的。

如果你有一个带有显式事务的日志数据库，或者一个 MODE ANSI 数据库（你总是在一个事务中），那么当 DELETE 语句完成时，服务器将等待 COMMIT，意识到会话连接是终止，并将回滚未提交的工作。

* * *

### 恢复

如果您有一个未记录的数据库，则只能恢复到上一个​​存档。因为它是未记录的，所以您无法从逻辑日志中恢复它（但同一实例中记录的其他数据库可以恢复到最后一个逻辑日志）。

如果您有一个已记录的数据库，并且您可以在 DELETE 语句完成之前关闭服务器——最好是在控制之下，但如果有必要会使其崩溃，那么快速恢复将解决这个问题。

如果 DELETE 已完成并提交，并且您有良好的备份，则可以考虑对数据库进行时间点还原。在您执行此操作时它会使其脱机（但如果表中的数据全部丢失，则您的数据库将暂时无法正常工作）。

如果这些情况都不适用，那么您应该联系 IBM 技术支持，他们可能能够执行一些小（而且不是那么小）的奇迹。

但是，您可能已经注意到，很大程度上取决于数据库的类型（未记录、记录、MODE ANSI）以及运行语句时是否存在有效的显式事务。

* * *

DBMS 的问题在于它们信任生物。如果您被授权进行手术，他们会假设您打算做您说您想做的事情，他们会继续并尽其所能做到这一点。当你不要求它做你打算要求的事情时，生活就会变得棘手；DBMS 仍然信任您并执行您实际要求它执行的操作。

# django - Django 说它必须是一个模型实例

> ID：12583468
> 
> 赞同：2
> 
> 时间：2012-09-25T12:57:45.820
> 
> 标签：django, django-models, django-forms, django-views

我正在使用 Django 1.3 和 South 这些应该是有用的信息。我的问题是，在保存表单时它说：

```
ValueError at /reportforms/c13
Cannot assign "u'3'": "c13.job" must be a "joblist" instance.
Request Method: POST
Request URL:    http://localhost:9000/reportforms/c13
Django Version: 1.3
Exception Type: ValueError
Exception Value: Cannot assign "u'3'": "c13.job" must be a "joblist" instance.
Exception Location: /media/Django/path_env/local/lib/python2.7/site-packages/django/db/models/fields/related.py in __set__, line 331
Python Version: 2.7.3 
```

知道这有什么问题吗？

**模型.py**

```
class joblist(models.Model):
    job_english                     = models.CharField(_('Job name in english'), max_length=255, default="")
    job_hungarian                   = models.CharField(_('Job name in hungarian'), max_length=255, default="")

class c13(models.Model):
    job                             = models.ForeignKey(joblist, verbose_name=_('Job')) 
```

**表格.py**

```
class C13Form(ModelForm):
    job =   forms.ChoiceField(choices=[(item.pk, item.job_english) for item in joblist.objects.all()])
    class Meta:
        model = c13
        exclude = ('added_by') 
```

**视图.py**

```
 form = C13Form(request.POST)
    if form.is_valid():
        new_c13 = c13.objects.create(
            job                             = joblist.objects.get(pk=form.cleaned_data['job']),
            year                            = form.cleaned_data['year'],
            needlestick_injuries            = form.cleaned_data['needlestick_injuries'],
            staff_beginning                 = form.cleaned_data['staff_beginning'],
            staff_end                       = form.cleaned_data['staff_end'],
            working_hours_beginning         = form.cleaned_data['working_hours_beginning'],
            working_hours_end               = form.cleaned_data['working_hours_end'],
            added_by                        = request.user,
        )
        new_c13.save()
        return render_to_response('filled_out.html', {}, context_instance=RequestContext(request))
    else:
        form = C13Form(request.POST)
        return render(request, 'c13.html', { 'form': form }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:52:30.780

也许您必须使用 ModelChoiceField，请参阅[https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField)

```
job = forms.ModelChoiceField(queryset=joblist.objects.all()) 
```

# graph - d3.js 树布局 - 交叉链接

> ID：12583471
> 
> 赞同：1
> 
> 时间：2012-09-25T12:57:48.190
> 
> 标签：graph, d3.js, tree, visualization, force-layout

我用 d3 创建了一个由相关对象组成的交互式力导向树。节点和链接是使用 d3 树布局创建的。

数据结构如下：

```
{
  "name": "node name",
  "id": 1,
  "children": [
    {
      "name": "child node name",
      "id": 2
    },
    {
      "name": "child node name",
      "id": 3
    },
    ...
  ]
},
... 
```

节点/链接按以下方式创建：

```
var nodes = flatten(rootNode);
var links = d3.layout.tree().links(nodes); 
```

为了启用树的双向遍历，我从每个新创建的节点递归地沿着树向下走，并为所有节点添加父引用。

可以通过单击叶节点来扩展树。然后通过 AJAX 加载数据并更新树。

这样做的问题是具有相同 ID/名称的对象可能会在树中多次出现。有没有办法从 JavaScript 代码中干净地合并所有重复节点（由于交叉链接，这会将树转换为图形）？

**编辑：**也许这样做的唯一方法是走下整个树并重新链接指向副本的所有链接......虽然我认为这可能会大大减慢脚本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:39:54.003

我明白了......保留一个包含所有可用树节点的附加列表怎么样？这样您就不必递归地遍历层次结构。

# jquery-mobile - 如何更改动态页面的标题？

> ID：12583472
> 
> 赞同：0
> 
> 时间：2012-09-25T12:57:50.303
> 
> 标签：jquery-mobile, dynamic-pages

我有一个 jQuery Mobile 应用程序，就像 jQuery Mobile 文档[http://jquerymobile.com/test/docs/pages/dynamic-samples/sample-reuse-page.html](http://jquerymobile.com/test/docs/pages/dynamic-samples/sample-reuse-page.html)中的动态页面示例一样。

一切正常，但就像在示例中一样，我无法让页面标题相应地更改为请求的页面。以示例为基础：点击Categories部分的Colors类别时，新页面的标题是Colors，但是当你返回再选择Vehicles时，页面标题仍然是Colors。我怎样才能解决这个问题？

我尝试`$page.attr('data-title', category.name)`了该`showCategory`功能，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:10:14.843

你也可以使用这样的东西 -

```
$("title").html(category.name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:01:53.470

我没有看到您在示例中描述的行为。但是，更改标题不会起作用吗？

```
document.title = category.name; 
```

# primefaces - Primefaces Facesmessage在隐藏对话框后消失

> ID：12583473
> 
> 赞同：0
> 
> 时间：2012-09-25T12:57:51.593
> 
> 标签：primefaces

我有一个带有如下对话框的页面。如果信息已经存在于同一个对话框中，我想向用户显示一条错误消息。这部分工作正常。

但是，如果一切顺利，对话框应该关闭并且“成功”消息应该显示在调用页面上（例如在 JSF 模板 p:messages 中）。我无法让它工作，消息消失了。我尝试了几个选项，包括远程命令。

```
<p:dialog id="dialogNewMailingList" header="New Mailing List"
        modal="true" resizable="false" widgetVar="dialogList">

        <h:form id="newMailingListForm">

            <p:messages id="listMessages" />
            <h:panelGrid columns="2">
                <h:outputLabel value="Name :" for="listName"
                    style="font-weight: bold;" />
                <p:inputText id="listName"
                    value="#{mailingListsEditController.newMailingList.name}"
                    required="true" requiredMessage="Please fill in a Name" size="50" />
                <h:outputLabel value="Description :" for="description"
                    style="font-weight: bold;" />
                <p:inputText id="description"
                    value="#{mailingListsEditController.newMailingList.description}"
                    required="true" requiredMessage="Please fill in a Description"
                    size="50" maxlength="100" />
            </h:panelGrid>
            <br />
            <p:remoteCommand name="updateMessages" update=":messages" />

            <p:commandButton
                action="#{mailingListsEditController.saveMailingList}"
                update="@form,:mailinglists:selectMailingList"
                oncomplete="listSaveRequest(xhr, status, args); updateMessages()"
                value="Save" icon="ui-icon-disk" />
            <p:commandButton onclick="dialogList.hide()" value="Cancel"
                immediate="true" icon="ui-icon-cancel" />

        </h:form>
    </p:dialog>

    <script type="text/javascript">  
    function listSaveRequest(xhr, status, args) {  
        if(args.validationFailed) {  
            jQuery('#dialogNewMailingList').effect("shake", { times:3 }, 100);  
        } else {
            //alert('List created successfully.')
            dialogList.hide(); 
        }  
    }  
    </script> 
```

bean 方法 save()

```
public void saveMailingList() {

    log.debug("Saving new MailingList :" + newMailingList.getName());

    emailService.save(newMailingList);

    // show message to the user
    FacesContext.getCurrentInstance().addMessage("Save Mailing List",
            new FacesMessage("Mailing List successfully created."));
} 
```

我觉得我接近解决方案:)

感谢您的帮助，科恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:41:56.290

该`p:messages`元素应放置在`p:dialog`. 通过关闭对话框，所有子元素都会被隐藏，包括消息。

# sql - 存储函数执行问题

> ID：12583477
> 
> 赞同：1
> 
> 时间：2012-09-25T12:58:11.523
> 
> 标签：sql, oracle, stored-procedures, plsql, sqlplus

我有一个表，我想从中获得下一个最低优先级的 DVDid，把它作为输出给我，然后从表中删除它。我通过创建一个包来做到这一点......代码被编译但是当我执行它时给我错误。有什么建议吗？

```
table:
RENTALQUEUE (MEMBERID, DVDID, DATEADDEDINQUEUE, PRIORITY) 
```

这是包：

```
create or replace
PACKAGE  pk_GET_TITLEID AS
procedure sp_GET_TITLEID(memberid_arg IN NUMBER,
titleid_arg out number) ;
end pk_GET_TITLEID;

create or replace
package body pk_GET_TITLEID as 
procedure sp_GET_TITLEID 
(memberid_arg IN NUMBER,
titleid_arg out number)

IS 
v_priority number;
begin

SELECT  MIN(PRIORITY)into v_priority
FROM RENTALQUEUE 
WHERE memberid = memberid_arg;

DBMS_OUTPUT.PUT_LINE (titleid_arg);

DELETE FROM RENTALQUEUE 
WHERE MEMBERID=memberid_arg AND dvdid=titleid_arg;

END sp_GET_TITLEID;
END PK_GET_TITLEID; 
```

我是这样称呼它的：

```
execute pk_get_titleid.sp_get_titleid('1'); 
```

这是错误：

```
Error:
    Error starting at line 403 in command:
    execute pk_get_titleid.sp_get_titleid('1')
    Error report:
    ORA-06550: line 1, column 7:
    PLS-00306: wrong number or types of arguments in call to 'SP_GET_TITLEID'
    ORA-06550: line 1, column 7:
    PL/SQL: Statement ignored
    06550\. 00000 -  "line %s, column %s:\n%s"
    *Cause:    Usually a PL/SQL compilation error. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:02:50.930

错误是：

```
PLS-00306: wrong number or types of arguments in call to 'SP_GET_TITLEID' 
```

您的过程在其签名中有多少个参数？

```
procedure sp_GET_TITLEID 
    (memberid_arg IN NUMBER
    ,   titleid_arg out number) 
```

二。你传递了多少参数？

执行 pk_get_titleid.sp_get_titleid('1')

一。

out 参数仍然是参数。您需要将其包含在通话中。具体来说，您需要调用环境中的一个变量，该变量可以接收来自被调用过程的答案。您的代码实际上并未填充`titleid_arg`参数这一事实不会影响这一点。

* * *

参数的非填充`titleid_arg`只是突出了代码中的混乱。也许它应该是一个 IN 参数？也许您需要从另一个表中选择它？有什么意义`v_priority`？

# asp.net-mvc - 添加控制器时出错

> ID：12583478
> 
> 赞同：0
> 
> 时间：2012-09-25T12:58:15.077
> 
> 标签：asp.net-mvc, entity-framework-4

我正在开发 MVC 3 应用程序并使用剃须刀语法。（EF 4.0）

我正在尝试将控制器添加到我的应用程序。但是每当我尝试添加控制器时，我都会收到以下错误。

我正在尝试在测试副本中添加控制器以及 sourcesafe 副本...

![在此处输入图像描述](../Images/94dd900b8d0ffd3a97258130d4c56c9b.png)

错误是....

![在此处输入图像描述](../Images/2fb91b902314057e5f0afdb5cb77f439.png)

当我尝试在同一应用程序的 SourceSafe 副本中添加控制器时，出现以下错误...

![在此处输入图像描述](../Images/c1091dd148e3437bad8e9fd32a31311f.png)

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:04:03.240

看看这篇文章，你的解决方案很可能在那里。

**编辑**

请查看这篇在控制器脚手架期间专门处理“[不支持的上下文类型”的文章：控制器向导中不支持的上下文类型。](http://forums.asp.net/t/1675477.aspx) 希望你能从那里得到想法和解决方案......

希望这可以帮助

# c++ - Windows 7/64 中的串行异步 I/O

> ID：12583482
> 
> 赞同：2
> 
> 时间：2012-09-25T12:58:34.530
> 
> 标签：c++, winapi, windows-7, asynchronous, serial-port

我有一个多线程 Windows 程序，它通过“原始”Win API 调用执行串行端口异步 I/O。它在除 Windows 7/64 之外的任何 Windows 版本上都可以正常工作。

问题是程序可以很好地找到并设置 COM 端口，但它无法发送或接收任何数据。无论我在 Win XP 或 7 中编译二进制文件，我都无法在 Win 7/64 上发送/接收。兼容模式，以管理员身份运行等无济于事。

我设法将问题缩小到 FileIOCompletionRoutine 回调。每次调用时，dwErrorCode 始终为 0，dwNumberOfBytesTransfered 始终为 0。函数内部的 GetOverlappedResult() 始终返回 TRUE（一切正常）。似乎正确设置了 lp​​NumberOfBytesTransferred。但是 lpOverlapped 参数已损坏，它是一个指向垃圾值的垃圾指针。

我可以通过在调试器中检查正确的 OVERLAPPED 结构分配的地址或通过设置临时值来看到它已损坏。指向它的全局变量。

我的问题是：为什么会发生这种情况，为什么它只发生在 Windows 7/64 上？调用约定是否存在一些我不知道的问题？还是以某种方式对重叠结构进行了不同的处理？

* * *

在下面发布代码的相关部分：

```
class ThreadedComport : public Comport
{
  private:

    typedef struct
    {
      OVERLAPPED       overlapped;
      ThreadedComport* caller;                   /* add user data to struct */
    } OVERLAPPED_overlap;

    OVERLAPPED_overlap _send_overlapped;
    OVERLAPPED_overlap _rec_overlapped;

  ...

static void WINAPI  _send_callback     (DWORD dwErrorCode,
                                        DWORD dwNumberOfBytesTransfered,
                                        LPOVERLAPPED lpOverlapped);
static void WINAPI  _receive_callback  (DWORD dwErrorCode,
                                        DWORD dwNumberOfBytesTransfered,
                                        LPOVERLAPPED lpOverlapped);

  ...
}; 
```

打开/关闭在没有实现多线程和异步 I/O 的基类中完成：

```
void Comport::open (void)
{
  char          port[20];
  DCB           dcbCommPort;
  COMMTIMEOUTS  ctmo_new      = {0};

  if(_is_open)
  {
    close();
  }

  sprintf(port, "\\\\.\\COM%d", TEXT(_port_number));

  _hcom = CreateFile(port,
                     GENERIC_READ | GENERIC_WRITE,
                     0,
                     0,
                     OPEN_EXISTING,
                     0,
                     0);

  if(_hcom == INVALID_HANDLE_VALUE)
  {
   // error handling
  }

  GetCommTimeouts(_hcom, &_ctmo_old);
  ctmo_new.ReadTotalTimeoutConstant    = 10;
  ctmo_new.ReadTotalTimeoutMultiplier  = 0;
  ctmo_new.WriteTotalTimeoutMultiplier = 0;
  ctmo_new.WriteTotalTimeoutConstant   = 0;

  if(SetCommTimeouts(_hcom, &ctmo_new) == FALSE)
  {
    // error handling
  }

  dcbCommPort.DCBlength = sizeof(DCB);
  if(GetCommState(_hcom, &(DCB)dcbCommPort) == FALSE)
  {
    // error handling
  }

  // setup DCB, this seems to work fine

  dcbCommPort.DCBlength = sizeof(DCB);
  dcbCommPort.BaudRate = baudrate_int;

  if(_parity == PAR_NONE)
  {
    dcbCommPort.fParity = 0;                     /* disable parity */
  }
  else
  {
    dcbCommPort.fParity = 1;                     /* enable parity */
  }
  dcbCommPort.Parity  = (uint8)_parity;
  dcbCommPort.ByteSize = _databits;
  dcbCommPort.StopBits = _stopbits;

  SetCommState(_hcom, &(DCB)dcbCommPort);
}

void Comport::close (void)
{
  if(_hcom != NULL)
  {
    SetCommTimeouts(_hcom, &_ctmo_old);
    CloseHandle(_hcom);
    _hcom = NULL;
  }
  _is_open = false;
} 
```

整个多线程和事件处理机制比较复杂，相关部分有：

发送

```
result = WriteFileEx (_hcom,              // handle to output file
                      (void*)_write_data, // pointer to input buffer
                      send_buf_size,      // number of bytes to write
                      (LPOVERLAPPED)&_send_overlapped, // pointer to async. i/o data
                      (LPOVERLAPPED_COMPLETION_ROUTINE )&_send_callback); 
```

收到

```
 result = ReadFileEx (_hcom,                  // handle to output file
                       (void*)_read_data,      // pointer to input buffer
                       _MAX_MESSAGE_LENGTH,    // number of bytes to read
                       (OVERLAPPED*)&_rec_overlapped, // pointer to async. i/o data
                       (LPOVERLAPPED_COMPLETION_ROUTINE )&_receive_callback); 
```

回调函数

```
void WINAPI ThreadedComport::_send_callback (DWORD dwErrorCode,
                                             DWORD dwNumberOfBytesTransfered,
                                             LPOVERLAPPED lpOverlapped)
{
  ThreadedComport* _this = ((OVERLAPPED_overlap*)lpOverlapped)->caller;

  if(dwErrorCode == 0)                           // no errors
  {
    if(dwNumberOfBytesTransfered > 0)
    {
      _this->_data_sent = dwNumberOfBytesTransfered;
    }
  }

  SetEvent(lpOverlapped->hEvent);
}

void WINAPI ThreadedComport::_receive_callback (DWORD dwErrorCode,
                                                DWORD dwNumberOfBytesTransfered,
                                                LPOVERLAPPED lpOverlapped)
{
  if(dwErrorCode == 0)                           // no errors
  {
    if(dwNumberOfBytesTransfered > 0)
    {
      ThreadedComport* _this = ((OVERLAPPED_overlap*)lpOverlapped)->caller;
      _this->_bytes_read = dwNumberOfBytesTransfered;
    }
  }

  SetEvent(lpOverlapped->hEvent);
} 
```

**编辑**

更新：我花了大部分时间研究 OVERLAPPED 变量在执行回调之前超出范围的理论。我已经验证这永远不会发生，我什至尝试将 OVERLAPPED 结构声明为静态，同样的问题仍然存在。如果 OVERLAPPED 结构超出范围，我希望回调指向之前分配结构的内存位置，但它没有，它指向其他地方，在一个完全不熟悉的内存位置。为什么会这样，我不知道。

也许 Windows 7/64 制作了 OVERLAPPED 结构的内部硬拷贝？我可以看到这将如何导致这种行为，因为我依赖于在结构末尾潜入的附加参数（这对我来说似乎是一个 hack，但显然我从官方 MSDN 示例中得到了那个“hack”）。

我也尝试过更改调用约定，但这根本不起作用，如果我更改它，程序就会崩溃。（标准调用约定会导致它崩溃，无论标准是什么，cdecl？__fastcall 也会导致崩溃。）有效的调用约定是 __stdcall、WINAPI 和 CALLBACK。我认为这些都是 __stdcall 的相同名称，我在某处读到 Win 64 无论如何都会忽略该调用约定。

执行回调似乎是因为 Win 7/64 中的一些“虚假干扰”生成带有损坏或不相关参数的错误回调调用。

多线程竞争条件是另一种理论，但在我运行重现错误的场景中，只有一个线程，我可以确认调用 ReadFileEx 的线程与执行回调的线程相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:29:11.843

我发现了问题，结果很简单。

在 CreateFile() 中，我没有指定 FILE_FLAG_OVERLAPPED。由于未知的原因，这在 32 位 Windows 上是不必要的。但是，如果您在 64 位 Windows 上忘记了它，它显然仍会使用 FileIOCompletionRoutine 生成回调，但它们的参数已损坏。

I haven't found any documentation of this change of behavior anywhere; perhaps it was just an internal bug fix in Windows, since the older documentation also specifies that you must have FILE_FLAG_OVERLAPPED set.

As for my specific case, the bug appeared because I had a base class that assumed synchronous I/O, which has then been inherited by a class using asynchronous I/O.

# java - 部署期间的 NoSuchMethodException

> ID：12583486
> 
> 赞同：0
> 
> 时间：2012-09-25T12:58:39.433
> 
> 标签：java, exception, deployment, glassfish, nosuchmethod

我正在使用 glassfish 3.1.2.2 服务器和 idea 终极版 11（在 Ubuntu 12.04 上）。当我部署我的耳朵项目时，有一个例外，首先是空指针，然后是 nosuchmethod。在 glassfish 3.0.1 上它可以工作，但在 3.1.2 中不能。

服务器日志：

```
[#|2012-09-25T15:54:14.356+0300|WARNING|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=45;_ThreadName=Thread-2;|DPL8027: Ignore WEB-INF/sun-web.xml in archive /home/kelevra/glassfish3/glassfish/domains/domain1/applications/MO-1.0.1-alpha1-SNAPSHOT/ViewController-1.0.1-alpha1-SNAPSHOT_war/, as GlassFish counterpart runtime xml WEB-INF/glassfish-web.xml is present in the same archive.|#]

[#|2012-09-25T15:54:14.565+0300|WARNING|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util|_ThreadID=45;_ThreadName=Thread-2;|RAR8068: Using default datasource : __ds_jdbc_ra for pool : eFarmer-Pool|#]

[#|2012-09-25T15:54:14.591+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=78;_ThreadName=Thread-2;|Exception while visiting com/sun/gjc/util/SQLTraceTimerTask.class of size 570
java.lang.NullPointerException
    at org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)
    at org.glassfish.hk2.classmodel.reflect.impl.ModelClassVisitor.visit(ModelClassVisitor.java:119)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:363)
    at org.glassfish.hk2.classmodel.reflect.util.JarArchive.onSelectedEntries(JarArchive.java:125)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-09-25T15:54:14.965+0300|WARNING|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util|_ThreadID=45;_ThreadName=Thread-2;|RAR8068: Using default datasource : __ds_jdbc_ra for pool : eFarmer-Pool|#]

[#|2012-09-25T15:54:17.224+0300|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/kelevra/glassfish3/glassfish/domains/domain1/applications/MO-1.0.1-alpha1-SNAPSHOT/DataModel-1.0.1-alpha1-SNAPSHOT_jar/_eFarmer.weaver|_ThreadID=45;_ThreadName=Thread-2;|Weaver encountered an exception while trying to weave class com/km/orgfrm/datamodel/entity/AbstractEntity.  The exception was: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.km.orgfrm.datamodel.entity.AbstractEntity not found by org.eclipse.persistence.asm [232]|#]

java.lang.NoSuchMethodError: com.km.orgfrm.datamodel.entity.AbstractEntity.<init>(Lorg/eclipse/persistence/internal/descriptors/PersistenceObject;)V
    at com.km.efarmer.datamodel.entity.order.operation.OperationTrackGeometryEntity.<init>(OperationTrackGeometryEntity.java)
    at com.km.efarmer.datamodel.entity.order.operation.OperationTrackGeometryEntity._persistence_new(OperationTrackGeometryEntity.java)
    at org.eclipse.persistence.internal.descriptors.PersistenceObjectInstantiationPolicy.buildNewInstance(PersistenceObjectInstantiationPolicy.java:30)
    at org.eclipse.persistence.descriptors.ClassDescriptor.selfValidationAfterInitialization(ClassDescriptor.java:3870)
    at org.eclipse.persistence.descriptors.ClassDescriptor.validateAfterInitialization(ClassDescriptor.java:5688)
    at org.eclipse.persistence.descriptors.ClassDescriptor.postInitialize(ClassDescriptor.java:3547)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:526)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:476)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:435)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:676)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:634)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:208)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:211)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-09-25T15:54:18.366+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=45;_ThreadName=Thread-2;|Exception while preparing the app : com.km.orgfrm.datamodel.entity.AbstractEntity.<init>(Lorg/eclipse/persistence/internal/descriptors/PersistenceObject;)V|#] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:03:37.347

这种类型的错误通常是由于类路径中有同一个库的两个不同版本。

请检查新版本的 glassfish 是否没有包含您的应用程序正在使用和部署的库之一的标准版本。作为犯罪现场的第一人 :)，应用程序服务器将加载第一个类（标准类），这与您的应用程序想要使用的不同。

强制使用不同的类加载器可以解决这类问题。但是，我没有使用 Glassfish 的经验，但在 Weblogic 上遇到过类似的问题。

# c# - 执行多个 catch 块

> ID：12583487
> 
> 赞同：6
> 
> 时间：2012-09-25T12:58:39.523
> 
> 标签：c#

> **可能重复：**
> [执行多个 catch 块](https://stackoverflow.com/questions/4035477/executing-multiple-catch-blocks)

一个try语句可以执行多个catch块吗？我们如何处理catch块？我们可以创建没有catch块的try吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T13:46:56.490

可以有多个 catch 块（如其他答案中所述），但只执行第一个匹配异常类型的块。这意味着您需要正确订购 catch 块。例如：

```
try
{
}
catch (Exception exp1)
{
    // Block 1
}
catch (IOException exp2)
{
    // Block 2
} 
```

块 2 永远不会被执行，因为块 1 捕获每个异常（所有异常类都派生自`Exception`）。

```
try
{
}
catch (IOException exp1)
{
    // Block 1
}

catch (Exception exp2)
{
    // Block 2
} 
```

`IOException`在此示例中，仅当异常不是 a或派生自时，才会执行块 2 `IOException`。如果`IOException`抛出 an，则只有块 1 会执行，块 2 不会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T12:59:43.837

*   您可以有多个与 try 块关联的 catch 块，但只有一个 catch 块可以处理您的异常。
*   是的，你可以有一个没有 catch 的 try 块，但必须有一个 finally 块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:03:01.440

从技术上讲，您只能击中一次，但您说：

> 可以为单个 try 语句执行多个 catch 块吗

正在执行的关键字。所以，你可以试试：

```
catch (Exception ex)            
{                
    if (ex is MyException1||
        ex is MyException2)
    {
       //do stuff
    }
    else
    {
       throw;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:01:38.550

只有一个`catch`块将执行，它将与抛出`catch`的类型密切匹配。`Exception`你不能靠它`try`自己。你需要一个`try catch (one or more catch block)`或一个`try finally`或一个`try catch finally`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:00:36.760

1 是`it's possible to have multiple catch`的，一个特定异常的一个捕获

样本

```
try
{
    ...
}
catch (FormatException)
{
    ....
}
catch (OverflowException)
{
    ...
} 
```

2 你可以有`try`指令没有`catch`

```
try
{
 ...
}
Finally
{
  .....
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T13:01:17.003

至于你问题的第二部分，你可以做

```
try
{
    stuff...
}
catch(Exception ex){} 
```

或者

```
try
{
    stuff...
}
finally{} 
```

，但你不能自己尝试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T13:00:33.037

是的，您可以使用 try 语句拥有多个 catch 块。您从捕获特定异常开始，然后在最后一个块中您可能会捕获 base `Exception`。只有一个 catch 块将处理您的异常。

您可以在没有 catch 块的情况下使用 try 块。尝试/最终会做。

```
 try
        {
            Console.Write("test");
        }
        catch (IOException ex)
        {
        }
        catch (ArithmeticException ex)
        {
        }
        catch (Exception ex)
        {
        } 
```

试一试

```
 try
        {
        }
        finally
        {
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-25T13:10:57.400

`catch`单个 try..catch 语句可以有任意数量的块。

但请记住一件事，你的

```
catch (Exception ex)
{
    ...
} 
```

应该是最后一个 catch 块，因为所有异常都继承了 Exception 类。

# android - 是否存在 AppWidget id 可能更改的情况？

> ID：12583489
> 
> 赞同：2
> 
> 时间：2012-09-25T12:58:48.587
> 
> 标签：android, android-appwidget

我创建了一个备忘录 AppWidget。我将备忘录的内容保存到基于 AppWidget 的 appWidgetId 的共享首选项中。

这行得通，但我担心如果我使用多个 AppWidget，id 可能会在将来的某个时候发生变化，因为这会导致我的应用程序崩溃。

appWidget id 是否有可能在未来发生变化（如重新启动、重新安装应用程序等）？

# c++ - CIN 和 COUT 替代 QT

> ID：12583490
> 
> 赞同：-3
> 
> 时间：2012-09-25T12:58:52.647
> 
> 标签：c++, qt, qt4, console-application

我是 QT 开发和标准库的新手。

此时我正在尝试创建一个简单的控制台应用程序，虽然它很简单，但它必须是跨平台的。它必须适用于 Linux、Windows 和 android。

虽然我非常习惯使用 std::cout 和 std::cin 来读取和写入控制台。我试图用 QT 库来解决同样的问题。

有没有使用 QT 库与用户交互的方式？我不能使用 std::cout 和 std::cin。

我在堆栈溢出时搜索了答案，但我发现的一切都是人们告诉使用 qDebug，但这不是我需要的，我需要与用户进行交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:57:24.340

Qt 主要用于 GUI，但您可以连接一些 Qt 类来充当标准输入和标准输出。

我至少会阅读这三个，如果你真的不想使用 std::cin 和 std::cout，我会以同样的方式使用 QTextStream 对象。

[QDebug](http://qt-project.org/doc/qt-4.8/qdebug.html)

[QIO设备](http://qt-project.org/doc/qt-4.8/qiodevice.html)

[QTextStream](http://qt-project.org/doc/qt-4.8/qtextstream.html#details)

以下是详细文档中的一段代码：

```
QTextStream stream(stdin);
QString line;
do {
    line = stream.readLine();
} while (!line.isNull()); 
```

[QFile](http://qt-project.org/doc/qt-4.8/qfile.html)在其文档中也有一些很好的信息。

使用 QTextStream 而不是 std 库函数，我看到的唯一真正优势是稍后将其连接到您自己的 GUI（稍后）而不是操作系统控制台中的内置控制台。

我从用户那里获取设置和设置信息的另一种方法是使用[QSettings并将默认格式设置为 INI 并使用](http://qt-project.org/doc/qt-4.8/qsettings.html)[QDesktopServices::openUrl()](http://qt-project.org/doc/qt-4.8/qdesktopservices.html#openUrl)打开 INI 文件。

# image - 跨浏览器和系统的图像边界半径不一致？

> ID：12583492
> 
> 赞同：0
> 
> 时间：2012-09-25T12:58:54.807
> 
> 标签：image, css

我在浏览器边界半径实现中发现了一些奇怪的行为。获取此代码： http: [//jsfiddle.net/pm7FZ/1/](http://jsfiddle.net/pm7FZ/1/)在 Windows 上，每个浏览器摘录 Chrome 会舍入内部图像：http: [//imgur.com/54In8](http://imgur.com/54In8) Chrome 不会，并且图像保持方形。

我没有 OS X，但我的朋友给我发了这个：[https](https://img.skitch.com/20120925-eypjk593tdest3ud9hcji1sauf.png) ://img.skitch.com/20120925-eypjk593tdest3ud9hcji1sauf.png似乎它的行为不同。虽然另一位朋友说，如果你在 OS X 上将边框半径设置为 20px，它会在 OS X 版本的 Firefox 上圆角图像。

问题 - 这里发生了什么？为什么前后矛盾这么多。

显然很容易“修复”，只是好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:43:15.180

我只能推测，但这就是我怀疑正在发生的事情。如果您查看基本盒子模型的 W3C 规范 ( [http://www.w3.org/TR/2007/WD-css3-box-20070809/](http://www.w3.org/TR/2007/WD-css3-box-20070809/) )，您将看到一个演示元素如何布局的图形。每个元素都有一个内容区域、内边距、边框和边距区域。我相信浏览器将这些区域中的每一个都渲染为一个层，而 FF 将在内容层之上渲染“边框层”，Chrome 将在所有其他层之上渲染“内容层”。在您的示例中，如果您要从您的`img`标记您会看到图像确实变圆了，但不受边框本身的影响。我还没有找到关于浏览器应该如何处理这个问题的任何规范，但我很确定 Chrome 开发人员选择这种方法是为了提高性能。

# jquery - 表格没有列 可视化位置错误：条形图

> ID：12583495
> 
> 赞同：0
> 
> 时间：2012-09-25T12:59:07.810
> 
> 标签：jquery, google-visualization

我正在使用 Ajax 调用加载数据。

```
function drawChart() {

        var jsonData = $.ajax({
            url: '/PrimeRx/GetIsAliveChart',
            type: 'post',
            dataType: "json",
            data: null,
            beforeSend: function () {
            },
            async: false,
            success: function (response) {
                chartData = response;
                alert(chartData);
            },
            failure: function (error) { alert(error); }
        });

        var data = new google.visualization.DataTable(eval(jsonData));

        var options = {            
            vAxis: { title: 'AliveDate', titleTextStyle: { color: 'red'} }
        };

        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    } 
```

我正在获取我需要显示的警报（chartData）的正确数据。

我从 Json 返回 StringBuilder 对象。谁能分析一下这个问题。警报中的数据如下所示。

```
[['LastAliveDate','System','Site','Server'],
['10/8/2012 12:00:00 AM','Site1','Server1'],
['10/8/2012 12:00:00 AM','Site1','Server1']
] 
```

# git - Git - 启用“您的分支领先于 X 次提交”

> ID：12583496
> 
> 赞同：0
> 
> 时间：2012-09-25T12:59:09.210
> 
> 标签：git, config

我有小问题。我必须格式化我的硬盘和我的 git 确认。现在，当我克隆 git 存储库、提交和检查 git 状态时，我有：

```
$ git status
# On branch master
nothing to commit (working directory clean) 
```

但我不知道我在 master 之前提交了多少次提交。有人可以告诉我如何启用此选项吗？我记得我应该修改我的配置，但我找不到我应该改变什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:05:26.017

我认为这是没有选择的。

当您在本地 PC 上向本地存储库提交某些内容时，您是远程分支的一个提交。因此，首先，当您将提交推送到主服务器时，您将拥有相同的状态。

我认为当你没有推送你的提交并格式化你的硬盘时，你的更改就会丢失。

[Git 没有显示我在原点之前有多少次提交，我希望它](https://stackoverflow.com/questions/5341077/git-doesnt-show-how-many-commits-ahead-of-origin-i-am-and-i-want-it-to)

当您复制了整个 .git 目录时，这可能是另一种解决方案。

# javascript - Javascript 到 ClojureScript 的转换

> ID：12583497
> 
> 赞同：3
> 
> 时间：2012-09-25T12:59:10.867
> 
> 标签：javascript, clojurescript

我正在尝试将以下行转换为 Cljs，

```
var watchID = navigator.geolocation.watchPosition(onSuccess, onError, { enableHighAccuracy:  true }); 
```

对应的地图是什么，

```
{ enableHighAccuracy:  true } 
```

在 ClojureScript 中？enableHighAccuracy 是一个符号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:26:29.760

如果您正在使用与库的互操作（例如地理定位，在您的情况下），并且它需要一个 JavaScript 对象，您需要向它传递一个标准的 JavaScript 对象，而不是 Clojure 映射。

`js-obj`您可以使用不带参数的函数在 ClojureScript 中构造其中之一。这将返回一个没有字段的空 JavaScript；然后，您可以使用该`aset`功能添加字段。

所以你的代码会是这样的：

```
(let [arg (js-obj)]
  (aset arg "enableHighAccuracy" true)
  (.watchPosition (.geolocation navigator) on-success on-error arg)) 
```

如果这是您发现自己经常做的事情，那么很容易编写一个实用函数来使用您喜欢的任何默认值将 ClojureScript 映射转换为 JavaScript 对象；可以在此要点中找到此类功能的示例；[https://gist.github.com/1658431](https://gist.github.com/1658431)

# eclipse - 为什么eclipse在添加到依赖部分后不解析maven插件依赖？

> ID：12583504
> 
> 赞同：2
> 
> 时间：2012-09-25T12:59:41.313
> 
> 标签：eclipse, maven, maven-eclipse-plugin

我刚刚安装了 maven eclipse 插件，一切都很好。我已经尝试过创建我的第一个 mojo。设置完成后，它已经下载了所有必需的依赖项。

现在困扰我的是 Eclipse 无法解析这些`org.apache.maven.plugins`类。

我的 pom.xml ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.blah.dalm.mojo</groupId>
  <artifactId>assembly-mojo</artifactId>
  <packaging>maven-plugin</packaging>
  <name>Assembly Mojo</name>
  <version>0.0.1-SNAPSHOT</version>

  <build>       
    <sourceDirectory>${basedir}</sourceDirectory>
    <!-- Plugin Configurations -->
    <plugins>
        <!-- Compiler plugin to use 1.6 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <executions>
                <execution>
                </execution>
            </executions>
            <configuration>
              <source>1.6</source>
              <target>1.6</target>
            </configuration>

        </plugin>
    </plugins>
  </build>
  <!--  Dependencies  -->  
  <dependencies>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-plugin-api</artifactId>
        <version>2.0</version>
    </dependency>
  </dependencies>
</project> 
```

我的 mojo 文件 AssemblyMojo.java：

```
package com.blah.dalm.mojo;

import java.util.List;
import org.apache.maven.plugin.MojoExecutionException; // <-- This is where it says it cannot resolve the class or package.

/**
 * "Assemble Goal"
 * @goal assemble-goal
 * @author Husain Khambaty
 *
 */
public class AssemblyMojo { 
    /**
     * @parameter expression="${assembly.sourcePath}"
     * @required
     */
    private String sourcePath;

    /**
     * @parameter expression="${assembly.outputPath}"
     * @required
     */
    private String outputFilePath;

    /**
     * @parameter
     */

    private List<String> excludeList;
    /**
     * @parameter
     */

    private String filterRule;

    public void execute() throws MojoExecutionException { // <-- And here

    }
} 
```

它无法解析 MojoExectionException 类（因此我相信它无法找到所需的 jar，我猜它应该在 Eclipse-Maven 集成后自动获取）。

当我构建它时，它构建得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:18:16.807

**解决方案 ：**

感谢@yorkw - 他的回答让我找到了解决方案。

安装 Maven-Eclipse 插件并在 pom.xml 中添加依赖项后，它会自动从 maven 存储库中找到这些 jar，并将它们添加到“Maven 依赖项”部分。当我这样做时并没有发生这种情况（可能做错了什么）。

在@yorkw 回答之后，我添加了 jar 并且它起作用了。就在那时我想我已经启用了依赖项。所以只是为了它，我禁用它们并再次启用它们，突然出现“Maven Dependenices”的地方。呸。

（注意：我确实尝试过截屏——但我是 StackOverflow 上的新手，它还不允许我发布图片。我会及时编辑这篇文章并为其他人放上截图）。

# cordova - 带有黑莓操作系统 10 的 PhoneGap

> ID：12583507
> 
> 赞同：3
> 
> 时间：2012-09-25T12:59:47.923
> 
> 标签：cordova, phonegap-plugins, blackberry-webworks, blackberry-playbook, blackberry-10

我想知道PhoneGap sdk是否支持Blackberry OS 10 build？我认为它是 .bar 文件，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:00:31.017

PhoneGap 2.1.0 完全支持 Blackberry 10（和 Blackberry PlayBook）设备。它于 9 月 21 日发布。发行说明位于[此处](http://phonegap.com/blog/2012/09/21/phonegap-210/)。在 build.properties 文件中，它支持 playbook 和 qnx (BB10) 部署。它有模拟器和物理设备的条目。

此外，RIM 的新 HTML5 UI Toolkit [BBUI.js](https://github.com/blackberry/bbui.js)支持在 playbook 设备上部署 BB10 风格的应用程序。

由于 Cascades 和新的 UI/UX 指南，RIM 正在推动所有使用 HTML5 的人使用支持 Cascade 主题的移动 API 框架。目前[Sencha Touch](http://devblog.blackberry.com/2011/03/sencha-touch/)、[BBUI.js](https://github.com/blackberry/bbui.js)和[Jquery Mobile](https://github.com/blackberry/jQueryMobile-BB10-Theme)是截至 2012 年 10 月唯一存在的。这并不是说你不能使用 Bootstrap、KendoUI 或其他的过多，只是你的应用程序不符合新的 BB10 UI/UX 指南.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:44:18.447

** 更新 ** 在给出这个原始答案时，PhoneGap 不支持 BB10，但是发生了很多变化，您现在可以成功构建针对 BlackBerry 10 的 PhoneGap 应用程序。

我重新编写了 PhoneGap 入门指南（[http://docs.phonegap.com/en/2.6.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20BlackBerry](http://docs.phonegap.com/en/2.6.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20BlackBerry)）

以及 BlackBerry 论坛上的知识库文章 ( [http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Porting-your-existing-PhoneGap-application-to-BlackBerry-10/ta-p/ 2070503](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Porting-your-existing-PhoneGap-application-to-BlackBerry-10/ta-p/2070503) )

~~Phonegap 还不支持 BlackBerry 10。~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T18:20:02.080

PhoneGap 确实支持 BB10，但 PhoneGap 构建还不支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T01:49:23.107

在 Build Phonegap 赶上之前，您可能想尝试使用[https://bdsc.webapps.blackberry.com/android/bpaa](https://bdsc.webapps.blackberry.com/android/bpaa)

您需要将 Android SDK 安装到您的计算机上。

然后从 Phonegap build 下载 APK 并按照 webapps.blackberry 中所述的过程进行操作。

*** 如果这是您第一次获得 BB 签名密钥，则该过程可能需要 2 小时才能收到（处理后会通过电子邮件发送给您）***

如果你有一个有效的 APK（如果你在 Build.Phonegap 上成功构建了它，你应该这样做），该过程会引导你完成类似的步骤，例如 Build.phonegap 和密钥库、P12 证书等。

最终结果应该是一个可下载的 BAR（黑莓存档）文件。

我只做过一次......这不是一次糟糕的经历。

很高兴看到这个 bdsc 站点集成到 Build.phonegap 仪表板中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-22T01:25:10.253

它的支持，在 git [https://github.com/blackberry/Cordova-Samples](https://github.com/blackberry/Cordova-Samples)中，您可以找到示例以及如何使用 BlackBerry 10 和 phonegap

# sql - 将 SQL 数据拆分为月份

> ID：12583508
> 
> 赞同：3
> 
> 时间：2012-09-25T12:59:48.497
> 
> 标签：sql, sql-server-2008, tsql

我有一个今年有几百行的数据表。(MS SqlServer 2k8)

我想将此数据集拆分为客户查询/月。

到目前为止我所拥有的是；

```
Select count(id) As Customers, DatePart(month, enquiryDate) as MonthTotal, productCode From customerEnquiries
where enquiryDate > '2012-01-01 00:00:00'
group by productCode, enquiryDate 
```

但这会为每个数据项生成一行。（而我希望每个数据项每个月都有一行。）

那么我该如何改变上面的查询，而不是得到

```
1 1 10
1 1 10
1 1 11
1 2 10
1 2 10 
```

...

我明白了

```
2 1 10    <-- 2 enquiries for product code 10 in month 1
1 1 11    <-- 1 enquiries for product code 11 in month 1
2 2 10    <-- 2 enquiries for product code 10 in month 2
etc 
```

作为一个额外的问题，是否有一种简单的方法来命名每个月，所以输出是 Jan、Feb、March 而不是月份列中的 1、2、3？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:02:53.833

尝试这个

```
Select count(id) As Customers, DatePart(month, enquiryDate) as MonthTotal, productCode From customerEnquiries
where enquiryDate > '2012-01-01 00:00:00'
group by productCode, DatePart(month, enquiryDate) 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:05:24.473

对于奖金，`DATENAME(MONTH, enquiryDate)`将为您提供月份的名称。

# mysql - 限制 MySQL 使用的核心数

> ID：12583513
> 
> 赞同：0
> 
> 时间：2012-09-25T13:00:07.560
> 
> 标签：mysql, linux, setthreadaffinitymask

在 Linux 上，你能确保 MySQL 留出一个内核吗？

（我们有一个小型 Python 服务器，当在同一个机器上运行的 MySQL 处于负载状态时，它可能会变得无响应。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:32:22.357

我能想到的3种方法...

*   使用命令***任务集***。
    此命令会将特定核心（或核心列表）“修复”到特定进程。
    参考[***手册页***](http://linuxcommand.org/man_pages/taskset1.html)如何使用它
*   在您的“小”服务器上创建**虚拟机**并在该 VM 上运行 mysql。
    这将为这两种服务提供更高的稳定性
*   使用“ ***nice*** ”值确保 python 优先级高于 mysql 优先级。
    （这个解决方案是所有三个中最不推荐的，但在某些情况下它可能是有效的）

# c# - C# 代码是否编译为本机二进制文件？

> ID：12583514
> 
> 赞同：17
> 
> 时间：2012-09-25T13:00:13.077
> 
> 标签：c#, compilation, bytecode

我知道 Java 代码被编译成字节码，由 JVM 执行。

C# 是什么情况？我注意到用 C# 编写的应用程序具有`.exe`表明它们是本机机器指令的扩展名。但真的是这样吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-25T13:01:10.103

不。

与 Java 一样，C# 被编译为一种中间语言（称为 MSIL 或 CIL）。

与 Java 不同，IL 存储在 EXE 文件中，这些文件有足够的实际 EXE 代码来显示一个对话框，要求用户安装 .Net。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T13:12:00.427

C# 编译分两步完成：

```
1\. Conversion from C# to CIL by the C# compiler

2\. Conversion from CIL to instructions that the processor can execute. 
```

一个组件（及时）在运行时执行从 CIL 到机器代码的编译

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-25T13:12:10.867

.exe 应该告诉您的是该文件是可执行的。C# 被编译成字节码，就像 java 一样，但 .NET 将它包装在 CLR 可执行文件中。

在这里查看更深入地了解 CLR 可执行文件[http://etutorials.org/Programming/.NET+Framework+Essentials/Chapter+2.+The+Common+Language+Runtime/2.2+CLR+Executables/](http://etutorials.org/Programming/.NET+Framework+Essentials/Chapter+2.+The+Common+Language+Runtime/2.2+CLR+Executables/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-25T13:02:56.333

c# 代码编译为 MSIL。它喜欢java字节码。msil 将在运行时转换为机器指令。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-25T13:05:09.187

C# 代码编译为 MSIL，MSIL 由 .NET CLR 处理

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-13T08:18:32.933

还有一个项目允许将 C# 编译为独立的二进制可执行文件：[CoreRT](https://github.com/dotnet/corert)

# exception-handling - Restler 框架异常处理

> ID：12583518
> 
> 赞同：1
> 
> 时间：2012-09-25T13:00:28.470
> 
> 标签：exception-handling, restler

如何在我的应用程序中编写异常处理。我正在使用restler框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:14:31.280

RestException 由 Restler 框架处理以向 api 用户发送错误响应。除了restler中的异常处理是通常的PHP方式

处理异常的最佳方法是[`try` `catch`](http://php.net/manual/en/language.exceptions.php)在您期望的地方使用块

您可以检测未处理的异常并使用[`set_exception_handler()`](http://php.net/manual/en/function.set-exception-handler.php). 理想情况下，您可以在 index.php （网关）上执行此操作

# android - 无法使用 Android 上的 asp.net 页面连接到本地服务器

> ID：12583525
> 
> 赞同：1
> 
> 时间：2012-09-25T13:00:41.133
> 
> 标签：android, local, network-protocols, httpurlconnection

我是新来的，我希望我不会做任何事情：）

我正在开发一些 android 应用程序并一直坚持连接到我安装了 ASP.net 页面的其他计算机。由于连接到主机的问题，我无法模拟它。

我正在使用的代码：

```
public class SPCChartViewerActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String strData = urlData("http://[server]/SPCOnline/SQLQuery.aspx?query=SELECT%20NAME%20FROM%20SPC_CHARTS");
    TextView tv = (TextView) findViewById(R.id.textView1);
    tv.setText(strData);
}

private String urlData(String urlString){
    URLConnection urlConnection = null;
    URL url = null;
    String string = null;

    try {
        url = new URL(urlString);
        urlConnection = url.openConnection();

        InputStream inputStream = urlConnection.getInputStream();
        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
        BufferedReader reader = new BufferedReader(inputStreamReader);
        StringBuffer stringBuffer = new StringBuffer();
        while((string = reader.readLine()) != null){
            stringBuffer.append(string + "\n");
        }
        inputStream.close(); 
        string = stringBuffer.toString();
    } 
    catch (MalformedURLException e) {
        e.printStackTrace();
    } 
    catch (IOException e) {
        e.printStackTrace();
    }
    return string;
} 
```

}

在标签 [server] 我放了：

*   该计算机的名称：`http://miltstx155srv01/SPCOnline/SQLQuery.aspx?query=SELECT%20NAME%20FROM%20SPC_CHARTS` 在这种情况下，我收到 java.net:UnknownHostException

*   那台计算机的 IP：`http://10.72.152.163/SPCOnline/SQLQuery.aspx?query=SELECT%20NAME%20FROM%20SPC_CHARTS` 在这种情况下，我收到 java.net:FileNotFoundException

*   如果我省略“http://”，我会收到 java.net:Protocol Not Found

好的，也许与我公司的 DNS 有关。所以我把这个页面放在我的电脑上，它也在运行 AVD 模拟器。所以现在的网址是：`http://10.0.2.2/SPCOnline/SQLQuery.aspx?query=SELECT%20NAME%20FROM%20SPC_CHARTS`- 但仍然是 java.net:UnknownHostException。

当然子句**uses-permission android:name="android.permission.INTERNET"**被添加到清单中。

尽管如此，上面编写的每个示例都可以在 webbrowser 上正常工作（当然除了 10.0.2.2 - 但将其更改为 localhost 可以正常工作）。

不知道，我花了一整天的时间测试它。任何人都可以帮忙吗？

# javascript - 将 three.js 容器定位为 html div

> ID：12583528
> 
> 赞同：2
> 
> 时间：2012-09-25T13:00:51.540
> 
> 标签：javascript, css, html, three.js

我有一个`article`容器，里面有三个`aside`标签。第三个`aside`元素`id='menuPuzzleType'`包含一个`Three.js`脚本，该脚本制作两个立方体网格，并在 Canvas 渲染器中渲染它们。

```
<article id="popup">

    <aside id='close'><img src="img/close.png" onClick="aFunction()" /></aside>
    <aside id='msgPuzzleType'>Please choose the puzzle type you want to play</aside>
    <aside id='menuPuzzleType'>
        <script>
        function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function render() {
            cube.rotation.y -= 0.03;
            cube2.rotation.y -=0.03;
            renderer2.render(scene2, camera2);
        }
        var container2 = document.getElementById('menuPuzzleType');

        //renderer
        var renderer2 = new THREE.CanvasRenderer();
        renderer2.setSize(400,400);//Was 100,100
        container2.appendChild(renderer2.domElement);

        //Scene
        var scene2 = new THREE.Scene();

        //Camera
        var camera2 = new THREE.PerspectiveCamera(50,50/50,1,1000);
        camera2.position.z = 240;//normal value is 100
        camera2.position.y=60;
        scene2.add(camera2);

        //Axes
        var axes2= new THREE.AxisHelper();

        //Add texture for the cube
        //Use image as texture
        var img2 = new THREE.MeshBasicMaterial({ //CHANGED to MeshBasicMaterial
            map:THREE.ImageUtils.loadTexture('img/2d.png') 
        });
        img2.map.needsUpdate = true; //ADDED

        //Add Cube
        var cube = new THREE.Mesh(new THREE.CubeGeometry(40,40,40),img2);
        cube.position.x =- 60;
        scene2.add(cube);

        var img3 = new THREE.MeshBasicMaterial({ //CHANGED to MeshBasicMaterial
            map:THREE.ImageUtils.loadTexture('img/3d.png') 
        });

        img3.map.needsUpdate = true; //ADDED

        var cube2 = new THREE.Mesh(new THREE.CubeGeometry(40,40,40),img3);
        cube2.position.x = 70; cube.position.y = 60; cube2.position.y=60;
        scene2.add(cube2);
        renderer2.render(scene2,camera2);

        animate();
        </script>
    </aside>
</article> 
```

我需要将两个立方体放入`article`容器标签中。

这是我的CSS代码：

```
body{ overflow:hidden; }

article {
    border:solid 1px #00CC33;
    width:420px;
    height:200px;
    font-family: baskerville; 
    font-size: 16px; 
    margin-top: 50px;

    /*For IE9 compatibility*/
    behavior: url(border-radius.htc);
    border-radius: 8px;
    position:relative;
}

#popup {
    bottom:50%;
    position:relative;
    margin: 0px; 
    left:30%;
}

#msgPuzzleType{ margin-left:60px; }

img{
    behavior: url(border-radius.htc);
    border-radius: 8px;
    position:relative;
}

#menuPuzzleType{
    background-color:#999999;
    border:solid 1px #3300CC;
    height:200px;
} 
```

如何将两个立方体移动到`article`容器标签中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:01:48.930

您的问题的“Three.js”解决方案是这样做：

```
renderer2.setSize( 400, 150 ); 
```

您还硬连线了 的纵横比`PerspectiveCamera`，因此您需要使其与画布尺寸相匹配。

```
var camera2 = new THREE.PerspectiveCamera( 50, 400/150, 1, 1000 ); 
```

这将使画布更小，以便适合。然后，您可以将相机移近一些，以便您的对象具有您想要的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:47:02.467

使用您提供的链接，我更改了以下内容以将多维数据集放入文章中：

```
canvas {
    position: absolute;
    top: -80px;
} 
```

![在此处输入图像描述](../Images/01fb9b1b5b367efbeb8295fd0fdc7bff.png)

# c++ - c++ 编译错误：重载 '<function_name>(char*&)' 的调用不明确</function_name>

> ID：12583544
> 
> 赞同：-5
> 
> 时间：2012-09-25T13:01:26.777
> 
> 标签：c++, ambiguous

我正在尝试将 C 语言中的代码转换为 C++ 语言，但出现错误，但我不知道问题的根源是什么。

这是源代码： http: [//pastebin.com/PnKvgNsR](http://pastebin.com/PnKvgNsR)

错误信息是：

```
call of overloaded ‘dateTimeToMinutes(char*&)’ is ambiguous 
```

使用 g++4.7.1（包括 c++11 标准）编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:17:15.397

在您的 cpp 文件中，在 dateTimeXXX 函数的定义中指定命名空间 RabQavSystem。

```
int RabQavSystem::dateTimeDifference(DateTime datetime1, DateTime datetime2) 
{
    ...
}

int RabQavSystem::dateTimeToMinutes(DateTime datetime)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:27:33.670

在您的标头中，您在命名空间中声明了两个函数`RabQavSystem`：

```
namespace RabQavSystem {
    int dateTimeToMinutes(DateTime datetime);
    int dateTimeDifference(DateTime datetime1, DateTime datetime2);
} 
```

在您的源文件中，您在全局命名空间中声明和定义新函数；这些不是头文件中声明的函数的定义，而是不同命名空间中的不同函数的定义：

```
int dateTimeDifference(DateTime datetime1, DateTime datetime2) {
    // ....
}

int dateTimeToMinutes(DateTime datetime) {
    // ....
} 
```

然后`using namespace RabQavSystem;`将其他函数名称拉入全局命名空间，导致歧义。

要修复它，您需要在命名空间中定义函数，而不是全局命名空间：

```
int RabQavSystem::dateTimeDifference(DateTime datetime1, DateTime datetime2) {
    ^^^^^^^^^^^^^^
}

int RabQavSystem::dateTimeToMinutes(DateTime datetime) {
    ^^^^^^^^^^^^^^
} 
```

# google-chrome-extension - 调试新的 Chrome 打包应用

> ID：12583545
> 
> 赞同：19
> 
> 时间：2012-09-25T13:01:29.820
> 
> 标签：google-chrome-extension, google-chrome-app

我正在使用 Chrome 24 中的新型打包应用程序，但我看不到任何方法可以调出开发人员工具来进行调试。

推荐的调试策略是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-11T02:54:14.223

去这里

```
chrome://inspect/ 
```

找到你想要的页面

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-03T17:50:54.797

从 Chrome 24 开始，您可以右键单击并检查您的页面或检查背景页面。

![在 Chrome 24 中右键单击 Chrome 打包应用程序](../Images/88902f7b5bad871aa8bf01cf359e0275.png)

如果您的应用没有任何可右键单击的打开窗口，您可以转到 chrome://extensions 并使用 Inspect Views 链接，您可以从中打开任何应用页面的开发者工具，包括后台页面。

在 Chrome 24 之前，唯一的区别是只能使用 chrome://extensions 链接检查背景页面，右键菜单中没有“检查背景页面”。

更新：如果您想调试从 Chrome 网上应用店安装的应用程序，您需要在 chrome:flags 页面中启用“启用打包应用程序调试”标志：

![在此处输入图像描述](../Images/994a501157c5a5b04ba25d157a1ddafc.png)

之后，右键单击将适用于任何应用程序。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-25T15:30:26.457

我已经能够右键单击内容区域并检查一个元素以启动开发工具。

# c - 64 位系统差异上的数据填充

> ID：12583555
> 
> 赞同：0
> 
> 时间：2012-09-25T13:02:01.140
> 
> 标签：c, struct, sizeof

该程序使用指针（8 个字节）和 3 个整数（每个 4 个字节）创建和测量一个结构，并显示有 4 个字节的数据填充。

我不明白为什么有 4 个字节的数据填充，或者 CPU 一次处理 8 个字节，应该还有另外 8 个字节的填充，或者它一次处理 4 个字节，应该没有对吗？

还是将 2 个 4 字节的值粘贴在 8 字节的内存部分中，并让 CPU 在运行时将其拆分？（这可以解释差异，但对我来说似乎有点低效）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct test {
    char *name;
    int age;
    int height;
    int weight;
};

struct test *create(char *name, int age, int height, int weight)
{
    struct test *thing = malloc(sizeof(struct test));

    thing->name = strdup(name);
    thing->age = age;
    thing->height = height;
    thing->weight = weight;

    return thing;
}

void destroy(struct test *thing)
{
    free(thing->name);
    free(thing);
}

int main(int argc, char *argv[])
{
    struct test * t1 = create("bleh",1,2,3);

    printf("Sizeof struct: %lu\n",sizeof(struct test));
    printf("Sizeof pointer (On 64bit system): %lu\n",sizeof(char *));
    printf("Sizeof int: %lu\n",sizeof(int));

    destroy(t1);

    return 0;
} 
```

输出：

```
Sizeof struct: 24
Sizeof pointer (On 64bit system): 8
Sizeof int: 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:08:20.947

出于对齐的原因，整个结构可能在最后被填充。这是必需的，因为您可能希望拥有此结构的数组。

您提到的填充使结构始终以可被 8 整除的地址结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:09:14.973

指针大概需要在 8 个字节上对齐。想想当你形成一个类数组时会发生什么，`test a[10]`. 确保`a[i].name`在 8 个字节上对齐的唯一方法是将类填充为 8 个字节的倍数。

# python - Python if 语句错误处理

> ID：12583558
> 
> 赞同：9
> 
> 时间：2012-09-25T13:02:16.117
> 
> 标签：python, python-3.x

> **可能重复：**
> [如何使用 Python 检查文件是否存在？](https://stackoverflow.com/questions/82831/how-do-i-check-if-a-file-exists-using-python)

我是一个学习python的初学者，但是如果有人输入了不存在的无效路径，例如Z：\而不是C：\，我想以某种方式处理这段代码，我希望它提高某种错误，现在我知道该怎么做，我只是不知道如何检查它是否无效？就像我如何让我的代码在创建路径之前检查该驱动器或路径是否存在于这台 PC 上，有没有办法在 python 中做到这一点？

```
website_path = input("\nEnter the absolute path for your website: ") 
```

任何建议都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:05:17.357

处理此问题的 Pythonic 方式是“请求宽恕，而不是许可”：只需尝试在您获得的路径上执行您将要执行的任何操作（例如打开文件），并让您调用的函数为您引发适当的异常. 然后使用[异常处理](http://docs.python.org/tutorial/errors.html)使错误消息对用户更友好。

这样，您将及时完成所有检查。事先检查是不可靠的；如果您在其他进程删除文件之前检查文件是否存在怎么办？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:20:07.423

我猜你正在寻找这样的东西。您可以使用 try 和 except 来测试事情是否可行。您还可以在 except 块下处理特定的异常。（我确信 urlopen 在失败时会返回一个）

```
from urllib import urlopen
website_path = raw_input("\nEnter the absolute path for your website: ")
try:
    content = urlopen(website_path).read()
    print "Success, I was able to open: ", website_path 
except:
    print "Error, Unable to open: " , website_path 
```

# email - 如何使用 PeopleSoft SendMail() 强制 text/html mime 类型

> ID：12583563
> 
> 赞同：1
> 
> 时间：2012-09-25T13:02:30.713
> 
> 标签：email, mime-types, sendmail, peoplesoft

我正在尝试使用 PeopleCode 中的 SendMail() 发送 html 格式的电子邮件。我正在尝试做的是非常基本的 html 电子邮件（例如粗体文本、href 标记等）。

我们最近升级到 PeopleTools 8.52

当我使用 PeopleBooks 中的默认 SendMail() 示例时，电子邮件以纯文本形式发送，而不管我将内容类型指定为“text/html”。

```
Local string &MAIL_CC, &MAIL_TO, &MAIL_BCC, &MAIL_SUBJECT, &MAIL_TITLES, &MAIL_TEXT, &MAIL_FILES, &MAIL_FROM, &REPLYTO, &SENDER;
Local number &MAIL_FLAGS;
&MAIL_FLAGS = 0;
&MAIL_TO = "laurie_thomas@peoplesoft.com";
&MAIL_CC = "";
&MAIL_BCC = "";
&MAIL_SUBJECT = "Testing SendMail - Are you receiving Attachment?";
&MAIL_TEXT = "This is a test for SendMail function";
&MAIL_FILES = "/data9/ps/e841g2bp/lat/attach.txt";
&MAIL_TITLES = "";
&MAIL_FROM = "peoplesoft@peoplesoft.com";
&MAIL_SEP = ";";
&CONTTYPE = "Content-type: text/html; charset=utf8";
&REPLYTO = "lthomas@peoplesoft.com";
&SENDER = "00972@peoplesoft.com";
&RET = SendMail(&MAIL_FLAGS, &MAIL_TO, &MAIL_CC, &MAIL_BCC, &MAIL_SUBJECT, &MAIL_TEXT, &MAIL_FILES, &MAIL_TITLES, &MAIL_FROM, &MAIL_SEP, &CONTTYPE, &REPLYTO,&SENDER);
If &RET <> 0 Then
MessageBox(0, "", 0, 0, "Return code from SendMail=" | &RET);
End-If; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:50:14.403

事实证明，这是 Oracle 观察到的记录错误（错误：13714374）。从 PeopleTools 8.51 升级到 8.52 时会发生这种情况（这就是发生在我们身上的原因）。

Oracle 的解决方案：

> 此错误已在 PT 8.52.08 补丁中修复，该补丁于 2012 年 5 月 24 日可用

# java - 抛出 Android 的 IndexOutOfBound 异常

> ID：12583566
> 
> 赞同：0
> 
> 时间：2012-09-25T13:02:44.080
> 
> 标签：java, android, exception

我已经制作了一个 android 应用程序，因为数据来自服务器，所以这是一个耗时的过程，所以我创建了一个进度对话框..

下面是我的代码

```
 @Override
protected void onResume() {
    super.onResume();
    if (placesListItems != null)
        placesListItems.clear();
    new LoadPlaces().execute();
}

@Override
public void onPause() {
    super.onPause();
    if (pDialog != null)
        pDialog.dismiss();
}

  class LoadPlaces extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage(Html.fromHtml("<b>Search</b><br/>Loading Places..."));
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

  protected String doInBackground(String... args) {

        GooglePlaces googlePlaces = new GooglePlaces();

        try {
            double radius = 1000; // 10000 meters

            // get nearest places
            if (query != null) {
                nearPlaces = googlePlaces.search(lat, lon, radius, query);
                if (nearPlaces != null) {

                    for (Place p : nearPlaces.results) {
                        reference = p.reference;
                        lat = p.geometry.location.lat;
                        lon = p.geometry.location.lng;
                        break;
                    }
                }
            }

            String types = "bar|restaurant|night_club|gym|health|food|shopping_mall|hospital";

            if (reference != null) {
                PlaceDetails placeDetails = googlePlaces.getPlaceDetails(reference);
                if (placeDetails != null) {
                    String status = placeDetails.status;

                    // check place deatils status
                    // Check for all possible status
                    if (status.equals("OK")) {
                        if (placeDetails.result != null) {
                            lat = placeDetails.result.geometry.location.lat;
                            lon = placeDetails.result.geometry.location.lng;
                            nearDeals = googlePlaces.search(lat, lon, radius, types); 
```

在下面的代码中，如果我在从服务器获取数据期间按下主页按钮或屏幕消失（您可以说进度对话框正在运行），如果我回到我的应用程序，我得到一个错误 ARRAY INDEX OUT OF BOUND

```
 // int total = ;
                            for (int i = nearDeals.results.size() - 1; i >= 0; i--) {
                                // Log.i("WHAT THE HELL",nearPlaces.results.get(i).name);
                                if (getResult(nearDeals.results.get(i).name, nearDeals.results.get(i).geometry.location.lat,
                                        nearDeals.results.get(i).geometry.location.lng) == 0) {
                                    // nearDeals.results.add(nearPlaces.results.get(i));
                                    nearDeals.results.remove(i);

                                }
                            }
                        }
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    } 
```

下面是logcat

```
 09-25 18:23:13.429: W/System.err(4375): java.lang.IndexOutOfBoundsException: Invalid index 15, size is 15
  09-25 18:23:13.429: W/System.err(4375):   at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
  09-25 18:23:13.429: W/System.err(4375):   at java.util.ArrayList.get(ArrayList.java:311)
  09-25 18:23:13.429: W/System.err(4375):   at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:204)
  09-25 18:23:13.429: W/System.err(4375):   at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1)
  09-25 18:23:13.429: W/System.err(4375):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
  09-25 18:23:13.439: W/System.err(4375):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
  09-25 18:23:13.439: W/System.err(4375):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
  09-25 18:23:13.439: W/System.err(4375):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
  09-25 18:23:13.439: W/System.err(4375):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
  09-25 18:23:13.439: W/System.err(4375):   at java.lang.Thread.run(Thread.java:1019) 
```

如果我不按主页键，或者在进度对话框运行期间屏幕不熄灭，那么一切正常

//从你们所有人那里得到解决方案后，我已经按照所有人的建议进行了打击，但我遇到了另一个错误，比如打击

```
 LoadPlaces ob;

    protected void onResume() {
    super.onResume();
    if (placesListItems != null)
        placesListItems.clear();
    ob.execute();
}

@Override
public void onPause() {
    super.onPause();
    if(ob!=null)
    if(ob.getStatus() == AsyncTask.Status.RUNNING){
       ob.cancel(true);
    }

    if (pDialog != null)
        pDialog.dismiss();
} 
```

然后我得到如下错误

```
 09-25 18:53:30.609: E/AndroidRuntime(4674): java.lang.RuntimeException: Unable to resume activity {com.eheuristics.android.diegodeals/com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity}: java.lang.IllegalStateException: Cannot execute task: the task is already running.
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2241)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2256)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.os.Handler.dispatchMessage(Handler.java:99)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.os.Looper.loop(Looper.java:130)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.app.ActivityThread.main(ActivityThread.java:3835)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at java.lang.reflect.Method.invokeNative(Native Method)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at java.lang.reflect.Method.invoke(Method.java:507)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at dalvik.system.NativeStart.main(Native Method)
  09-25 18:53:30.609: E/AndroidRuntime(4674): Caused by: java.lang.IllegalStateException: Cannot execute task: the task is already running.
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.os.AsyncTask.execute(AsyncTask.java:380)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at com.eheuristics.android.diegodeals.googleplacesandmaps.MainActivity.onResume(MainActivity.java:137)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
  09-25  18:53:30.609: E/AndroidRuntime(4674):  at android.app.Activity.performResume(Activity.java:3832)
  09-25  18:53:30.609: E/AndroidRuntime(4674):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2231)
  09-25 18:53:30.609: E/AndroidRuntime(4674):   ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:08:38.780

每次显示活动时，您都在启动 asynctask。因此，您应该在退出时取消任务（AsyncTask.cancel(true)），或者在 onResume 方法中检查它是否仍在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:19:54.273

在您收到错误 onResume() 的情况下，将再次调用，启动一个新的 AsyncTask。现在您有多个 AsyncTask 同时访问和更改 nearDeals.results 的大小（您在其上调用 remove）。当一个 asyncTask 从列表中删除一个项目时，第二个 asyncTask 可能会遇到 ArrayIndexOutOfBounds，因为列表大小已更改。

编辑：这实际上不是删除项目，而是您在 googlePlaces.search 中设置了列表的新实例，并且该列表的大小可能与旧 asynctask 使用的大小不同。

解决方案：在 onPause 中（或在开始新任务之前在 onResume 中）对正在运行的异步任务调用取消

# r - 如何计算行的平均值，同时从数据框中的行中排除零值

> ID：12583569
> 
> 赞同：13
> 
> 时间：2012-09-25T13:02:53.270
> 
> 标签：r

我正在尝试计算数据框中每一行的平均值。每行都有零，我想从计算中排除这些。我不想删除整行，只删除零并计算每行中剩余值的平均值。如果行的值全为零，则结果应为零。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-25T13:05:38.310

怎么样

```
nzmean <- function(x) {
    if (all(x==0)) 0 else mean(x[x!=0])
}
apply(mydata,1,nzmean) 
```

?

在我看来，它可能会*稍微*快一点

```
nzmean <- function(x) {
    zvals <- x==0
    if (all(zvals)) 0 else mean(x[!zvals])
} 
```

即尽量避免`x`与零进行两次比较。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-25T13:16:21.217

或者您可以做的是分配`NA`为零，这实际上是您想要做的。一些样本数据：

```
spam = matrix(runif(100), 10, 10)
spam[1,2] = 0
spam[4,3] = 0
spam[10,] = 0
spam[spam == 0] <- NA 
```

并使用`rowMeans`, `ifelse`is 检查完全是`NA`. 这个`na.rm`论点在这里很重要：

```
mean_values = rowMeans(spam, na.rm = TRUE)
mean_values = ifelse(is.na(mean_values), 0, mean_values) 
```

# iphone - 使用 UIAppearance 分别自定义 UIBarButtonItem“完成”样式和“普通”样式

> ID：12583574
> 
> 赞同：16
> 
> 时间：2012-09-25T13:03:11.460
> 
> 标签：iphone, ios, customization, uibarbuttonitem, uiappearance

我知道如何自定义`UIBarButtonItem`使用`-setBackgroundImage: forState: barMetrics:`，但我想为`UIBarButtonItemStyleDone`和使用不同的图像`UIBarButtonItemStylePlain`。

有没有办法使用`UIAppearance`协议来实现这一点？还是每次我想要“完成”样式按钮时都必须设置图像？

（我试着弄乱如下代码：

`[[UIBarButtonItem appearance] setBackgroundImage:image forState:UIControlStateNormal barMetrics:UIBarButtonItemStyleDone];`

但这只是将每个条形按钮设置为“完成”图像。）

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T10:49:02.270

在**iOS 6**中，您可以使用 UIBarButtonItem 类的新方法：

```
- (void)setBackgroundImage:(UIImage *)backgroundImage
                  forState:(UIControlState)state
                     style:(UIBarButtonItemStyle)style
                barMetrics:(UIBarMetrics)barMetrics 
```

它为指定的状态、样式和指标设置背景图像。[Apple 文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/setBackgroundImage:forState:style:barMetrics:)中提供了更多详细信息

因此，要更改所有 UIBarButtonItems 的外观，您可以使用以下内容：

```
UIImage *doneBackgroundImage = [[UIImage imageNamed:@"button_done.png"]
   resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 4)];

[[UIBarButtonItem appearance] setBackgroundImage:doneBackgroundImage
                                            forState:UIControlStateNormal
                                               style:UIBarButtonItemStyleDone
                                          barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T12:17:46.393

**IOS5***

我发现的唯一方法是使用 UIBarButtonItem 类别：

UIBarButtonItem+外观.h

```
#import <Foundation/Foundation.h>

@interface UIBarButtonItem (Appearance)

+ (void) setupAppearance;

@end 
```

UIBarButtonItem+外观.m

```
#import "UIBarButtonItem+Appearance.h"
#import <objc/runtime.h>

@implementation UIBarButtonItem (Appearance)

+ (void) setupAppearance {
    [[UIBarButtonItem appearance]  setBackgroundImage: [[UIImage imageNamed:@"customButton"]
                                                                  resizableImageWithCapInsets: UIEdgeInsetsMake(8, 8, 8, 8)]
                                                       forState: UIControlStateNormal
                                                     barMetrics: UIBarMetricsDefault];

    [[UIBarButtonItem appearance]  setBackgroundImage: [[UIImage imageNamed:@"customButtonHiglhighted"]
                                                                  resizableImageWithCapInsets: UIEdgeInsetsMake(8, 8, 8, 8)]
                                                       forState: UIControlStateHighlighted
                                                     barMetrics: UIBarMetricsDefault];

    Class klass = objc_getClass("UIBarButtonItem");
    Method targetMethod = class_getInstanceMethod(klass, @selector(setStyle:));
    Method newMethod = class_getInstanceMethod(klass, @selector(__setStyle:));
    method_exchangeImplementations(targetMethod, newMethod);
}

- (void) __setStyle:(UIBarButtonItemStyle)style {
    [self __setStyle:style];

    if(style == UIBarButtonItemStyleDone) {
        [self setBackgroundImage:[[UIImage imageNamed:@"customDoneButton"] resizableImageWithCapInsets: UIEdgeInsetsMake(8, 8, 8, 8)]
                        forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
        [self setBackgroundImage:[UIImage imageNamed:@"customDoneButtonClicked"]
                        forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
    } else {
        [self setBackgroundImage:[[UIImage imageNamed:@"customButton"] resizableImageWithCapInsets: UIEdgeInsetsMake(8, 8, 8, 8)]
                        forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
        [self setBackgroundImage:[UIImage imageNamed:@"customButtonHighlighted"]
                        forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
    }
}

@end 
```

希望这是您正在寻找的。此解决方案的功劳归于[https://gist.github.com/2633081](https://gist.github.com/2633081)

# html - 溢出和滚动在 HTML 页面上无法正常工作

> ID：12583575
> 
> 赞同：0
> 
> 时间：2012-09-25T13:03:21.853
> 
> 标签：html, css, wordpress, themes

当我遇到问题时，我正在[这个网站上工作。](http://www.entunc.nl)似乎如果当您在左侧的白色侧边栏上滚动时，整个页面都会滚动一些。

我怎样才能阻止这个？我认为这个问题与溢出有关，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:09:57.533

您在导致滚动的页脚上有一个 wpstats 图像。

将以下内容添加到您的 CSS

```
#wpstats {
display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:10:18.187

您网页的宽度是硬编码的，在这种情况下大于浏览器宽度。您可以将其添加到您的 CSS 文件中：

```
body {
  overflow-y: hidden;
} 
```

这基本上只会隐藏屏幕外的任何内容。

所以真的需要让CSS突出显示......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:15:57.377

如果您注意到，您会看到除了底部大约 5px 的部分外，页面的其余部分都是流畅的，即随着浏览器窗口大小的调整而动态调整大小。

这个烦人的空间是由放置不当的图像引起的。负责的确切代码是：

```
<img id="wpstats" src="..." alt=""> 
```

要解决此问题，只需将此代码添加到您的 CSS 文件中：

```
#wpstats {
  display: none;
} 
```

或者像这样内联添加它：

```
<img id="wpstats" src="..." alt="" style="display:none;" /> 
```

# java - widgetsets GWT 模块描述文件并在 vaadin 中重新编译您的 widgetset 错误

> ID：12583577
> 
> 赞同：0
> 
> 时间：2012-09-25T13:03:27.693
> 
> 标签：java, vaadin

我正在尝试在 vaadin 中创建一个带有 invient 图表的图表。我添加了相关的 jar 并创建了另一个指向 jquery highchart 和模块文件的应用程序 servlet，并修改了 web.xml 文件。当我添加我的饼图代码时；我从浏览器中得到以下信息；

`Widgetset does not contain implementation for com.invient.vaadin.charts.InvientCharts. Check its @ClientWidget mapping, widgetsets GWT module description file and re-compile your widgetset. In case you have downloaded a vaadin add-on package, you might want to refer to add-on instructions. Unrendered UIDL: -Unrendered UIDL -com.invient.vaadin.charts.InvientCharts(NO CLIENT IMPLEMENTATION FOUND) id=PID5 height=400px width=100.0% isRetrieveSVG=false isPrint=false reloadChartSeries=false -options -title text=Distribution of positive negative tweets -subtitle -credit -position -legend -tooltip -chart type=pie zoomType= clientZoom=true -seriesOptionsPerSeriesType -pie allowPointSelect=true cursor=pointer showInLegend=true -dataLabel enabled=false -state -xAxes -yAxes -labels -chartData -series name=Status xAxis=0 yAxis=0 -pie -points -point name=Positive x=0 y=10 isShift=false -point name=Negative x=1 y=20 isShift=false -events -chartEvents -seriesEvents -series -pointEvents -line -pointEvents -spline -pointEvents -scatter -pointEvents -area -pointEvents -areaspline -pointEvents -bar -pointEvents -column -pointEvents -pie -pointEvents -chartDataUpdates -seriesDataUpdate seriesName=Status operation=Add isReloadPoints=false -pointsAdded -pointsRemoved`

当我按下 compile vaadin widgets 按钮时，我得到了；

`select a widgetset file(..widgetset.gwt.xml) or a vaadin project to compile.`

这里似乎有什么问题？在我的其他项目中，这个 widgetset.gwt.xml 是由 eclipse 创建的。

由于我是一个 vaadin-invient 图表新手，我不会在这里放什么，比如日志等，所以如果你让我知道，我会提供这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:03:23.963

为了解决这个问题，我在我的项目中手动添加了一个 gwt.xml 文件，并将我其他项目的 gwt.xml 内容复制到我新创建的 gwt.xml 中，然后在项目的 web 中添加了对新创建的 gwt.xml 的引用.xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:54:28.773

只是为了澄清你的答案：

> 当我按下 compile vaadin widgets 按钮时，我得到：
> 
> 选择要编译的小部件集文件 (..widgetset.gwt.xml) 或 vaadin 项目。

我认为这是因为您的应用程序中有多个 .gtw.xml 文件，而 vaadin 插件无法知道哪个是您的默认 wigetset。您需要手动选择默认的小部件集（即在 .widgetset 包中）并再次按下按钮。

如果在您的应用程序中没有任何其他 .gwt.xml 文件，那么向应用程序添加新插件的过程在此处进行了很好的描述[https://vaadin.com/directory/help/using-vaadin-add-昂斯](https://vaadin.com/directory/help/using-vaadin-add-ons)

# sql - 按范围分组

> ID：12583580
> 
> 赞同：0
> 
> 时间：2012-09-25T13:03:46.747
> 
> 标签：sql, sql-server, sql-server-2008

我有一张表，上面有员工姓名和他们的供应商经验。我必须用以下数据创建一个表

给我的数据就像

```
empname vendor experience
a        1
b        2
c        10
d        11
e        20
f        12
g        21
h        22 
```

我想生成一个 SQL 查询来显示这样的数据

```
vendor_experience(months)   count
0-6                          2
0-12                         5
0-18                         5
more                         8 
```

请帮我查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:07:25.533

您可以使用[case 语句](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)来获取排他范围的计数：

```
select case when [vendor experience] <= 6 then '0-6'
            when [vendor experience] <= 12 then '0-12'
            when [vendor experience] <= 18 then '0-18'
            else 'more'
        end [vendor_experience(months)],
       count (*) [count]
  from experiences
 group by
       case when [vendor experience] <= 6 then '0-6'
            when [vendor experience] <= 12 then '0-12'
            when [vendor experience] <= 18 then '0-18'
            else 'more'
        end 
```

这会产生与您相同的结果（包括范围）：

```
; with ranges as 
  (
    select 6 as val, 0 as count_all
    union all
    select 12, 0
    union all
    select 18, 0
    union all
    select 0, 1
  )
select case when ranges.count_all = 1
            then 'more'
            else '0-' + convert (varchar(10), ranges.val) 
        end [vendor_experience(months)],
       sum (case when ranges.count_all = 1 
                   or experiences.[vendor experience] <= ranges.val 
                 then 1 end) [count]
  from experiences
 cross join ranges
 group by ranges.val, ranges.count_all 
```

`count_all`设置为 1 以标记开放式结束范围。

[Sql Fiddle 在这里](http://sqlfiddle.com/#!3/ec65c/10)。

**更新：**尝试解释。

以右括号开头`with`和结尾的第一部分称为[CTE](http://msdn.microsoft.com/en-us/library/ms175972%28v=sql.105%29.aspx)。有时它被称为是`inline view`因为它可以在同一个查询中多次使用，并且在某些情况下是可更新的。在这里，它用于为范围准备数据，并适当地命名为`ranges`. 此名称用于主查询。`Val`是范围的最大值，`count_all`如果范围没有上限（18+，更多，或者您希望调用它），则为 1。数据行通过[union all](http://msdn.microsoft.com/en-us/library/ms180026%28v=sql.105%29.aspx)进行组合。您可以仅在括号之间复制/粘贴部分并运行它以查看结果。

主体使用[交叉连接](http://msdn.microsoft.com/en-us/library/ms190690%28v=sql.105%29.aspx)`experiences`将表与范围连接起来。这将创建来自和的所有行的组合。对于行，将有 4 行，`experiences``ranges``d 11`

```
empname vendor experience val count_all
d       11                  6 0
d       11                 12 0
d       11                 18 0
d       11                  0 1 
```

选择列表中的第一个 case 语句通过检查 count_all 来生成标题 - 如果它是一个，则输出`more`，否则使用上限值构造标题。第二个 case 语句使用 sum(1) 计数。由于聚合函数忽略空值，并且如果没有找到匹配项，则没有 else 的情况评估为空，因此检查 count_all 是否为真（意味着经验中的这一行在此范围内计数）或是否`vendor experience`小于或等于上限就足够了当前量程的量程值。在上面的示例中，第一个范围不计入 11，但将计入所有其余范围。

然后按 val 和 count_all 对结果进行分组。为了更好地了解它是如何工作的，您可以删除 group by 和 sum() 并在聚合之前查看数字。按 empname 排序，val 将有助于查看 [count] 的值如何根据每个员工的不同 val 而变化。

注意：我已尽我最大的努力以我目前的英语水平。如果您需要一个（或两个，或任意数量），请随时要求澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:14:22.690

试试这个：

```
 INSERT INTO ResultTable ([vendor_experience(months)], count)
    Select *FROM
    (
    (SELECT  '0-6', Count(*) From TableA WHERE [vendor experience] <= 6
    UNION ALL
    SELECT  '0-12', Count(*) From TableA  WHERE [vendor experience] <= 12
    UNION ALL
    SELECT  '0-18', Count(*) From TableA  WHERE [vendor experience] <= 18
     UNION ALL
    SELECT  'more', Count(*) From TableA) as Temp
    ) 
```

**如果不需要重复计数，请尝试以下操作：**

```
select t.[vendor_experience(months)], count(*) as count
from (
  select case  
    when [vendor experience] between 0 and 6 then ' 0-6'
    when [vendor experience] between 7 and 12 then '0-12'
    when [vendor experience] between 13 and 18 then '0-18'
    when [vendor experience] >= 19 then 'more'
    else 'other' end as [vendor_experience(months)]
  from TableA) t
group by t.[vendor_experience(months)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:19:14.100

更动态一点，为分组实现一个表：

```
create table #t (name varchar(10),e int)

insert into #t values ('a',0)
insert into #t values ('b',4)
insert into #t values ('c',3)
insert into #t values ('d',13)
insert into #t values ('e',25)
insert into #t values ('f',4)
insert into #t values ('g',19)
insert into #t values ('h',15)
insert into #t values ('i',7)

create table #g (t int, n varchar(10))

insert into #g values (6, '0-6') 
insert into #g values (12, '0-12')
insert into #g values (18, '0-18')
insert into #g values (99999, 'more')

select #g.n
,COUNT(*) 
from #g
inner join #t on #t.e <= #g.t
group by #g.n 
```

例如，您可能想使用值 99999。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:35:15.997

这是一种获取累积值的方法：

```
select sum(mon0_6) as mon0_6, sum(mon0_12) as mon0_12, sum(mon0_18) as mon0_18,
       sum(more) as more
from (select e.*,
             (case when [vendor experience] <= 6 then 1 else 0 end) as mon0_6,
             (case when [vendor experience] <= 12 then 1 else 0 end) as mon0_12,
             (case when [vendor experience] <= 18 then 1 else 0 end) as mon0_18,
             1 as more
     ) e 
```

这会将它们放在单独的列中。然后，您可以使用`unpivot`将它们放在单独的行中。

但是，您可能会考虑在应用程序层进行累积和。我经常在 Excel 中做这种事情。

在 SQL Server 2008 中进行累积求和需要显式或通过相关子查询进行自联接。SQL Server 2012 支持更简单的累积和语法（该`over`子句按参数排序）。

# javascript - 显示和隐藏名称列表，带有两个带有单选按钮 jquery 的类

> ID：12583583
> 
> 赞同：-2
> 
> 时间：2012-09-25T13:03:54.960
> 
> 标签：javascript, jquery, toggle

我有一个男性和女性班级的名字列表。我在此页面上添加了男性/女性单选按钮。当我单击男性单选按钮时，将显示所有带有 class=male 的名称，反之亦然。你能为此建议一个好的jquery方法吗？

```
<input id="male" value="Male" type="radio" checked="checked">
<input id="female" value="Female" type="radio"> 

<div class="Male">male name</div>
<div class="female">female name</div>
<div class="Male">male name</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:08:34.843

为此，您不需要 JavaScript。刚设置

```
.male, .female { display: none }
#male:checked ~ .male, #female:checked ~ .female { display: block } 
```

# [演示](http://dabblet.com/gist/3781735)

还要为两个单选按钮（在这种情况下）添加一个`name`具有相同值的属性，`name="gender"`以确保它们的行为类似于单选按钮并且不能一次检查。

```
<input id="male" value="Male" name="gender" type="radio" checked>
<input id="female" value="Female" name="gender" type="radio"> 
```

请注意，为了使其工作，具有名称的 div 必须遵循 HTML 中的单选输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:08:28.120

```
<input id="male" value="Male" type="radio" onclick="doaction('Male,female')" checked>

    <input id="female" value="Female"  onclick="doaction('female,Male')"  type="radio"> 

    <div class="Male">male name</div>
    <div class="female">female name</div>
    <div class="Male">male name</div>

    <script>

    function doaction(z,z2)
    {
    $("." + z2).hide();
    $("." + z).show();

    }

</script> 
```

# ibm-doors - 如何找出 DOORS 模块使用的更改模板？

> ID：12583584
> 
> 赞同：0
> 
> 时间：2012-09-25T13:03:55.140
> 
> 标签：ibm-doors

我需要使用 DXL 来遍历我们数据库中的所有模块，并找出每个模块正在使用哪个 Rational Change Template，并可能将其切换到不同的模板。找不到任何有关 DOORS 更改 API 的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:19:25.147

我不得不直接联系 IBM 以获取此信息。但是，如果其他人需要这样做，那就是在这里。

```
Skip cfgData = createString
string current_template = ""

getModuleConfigurationData(m, cfgData)
find(cfgData, CSINT_CONFIG_USE_TEMPLATE, current_template)
delete cfgData 
```

此时`current_template`具有为其配置的模板的文件名。这可用于与现有模板进行比较并验证其设置是否正确。

此外，如果需要更新，以下功能会将跳过列表保存回配置。

```
put(cfgData, CSINT_CONFIG_USE_TEMPLATE, new_template)
cmSaveModuleConfigurationData(m, cfgData) 
```

# ios6 - 关闭 modalView

> ID：12583587
> 
> 赞同：0
> 
> 时间：2012-09-25T13:04:03.947
> 
> 标签：ios6

我遇到了dismissmodalview的问题。它显然在 ios 6 中贬值了。任何人都可以提出修复建议。我尝试了这段代码，但仍然出现警告。

```
if ([[self parentViewController] respondsToSelector:@selector(dismissModalViewControllerAnimated:)]){

    [[self parentViewController] dismissModalViewControllerAnimated:YES];

} else {

    [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];
} 
```

任何人都可以提出任何建议。基本上我试图关闭我在视图控制器中使用的模态视图。

阿德里安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:43:57.317

你有没有尝试过？我在我的一个项目中成功使用了它。

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:33:53.813

您收到警告，因为选择器在 iOS 6 中已弃用并且您使用它。如果您的目标是 iOS 5 及更高版本，则不应使用`dismissModalViewControllerAnimated:`.

如果你真的需要使用它，你可以`performSelector:`这样调用：

```
if ([[self parentViewController] respondsToSelector:@selector(dismissModalViewControllerAnimated:)]){  
    [[self parentViewController] performSelector:@selector(dismissModalViewControllerAnimated:) withObject:@YES];
} 
```

一句忠告：视图自行关闭并不被认为是好的做法。您应该为您的模态视图控制器创建一个委托协议，并通过模态的委托来呈现视图控制器。

# android - 带有 OpenCV 的 Qt Android 项目 - tbb 编译错误

> ID：12583590
> 
> 赞同：4
> 
> 时间：2012-09-25T13:04:16.100
> 
> 标签：android, qt, opencv, tbb

我想用 OpenCV 创建一个 Qt Android 应用程序。我在 Ubuntu 12.04（64 位）上使用 Necessitas Qt Creator 和 OpenCV 2.4.0 Android 二进制包。目前我只是创建了一个 OpenCV Mat 对象。

但是当我编译项目时，我得到了一些 tbb 函数的“未定义引用”错误：

```
> /home/kolbe/src/android-sdk-linux/OpenCV-2.4.0/libs/armeabi-v7a/libopencv_core.a(stat.cpp.o):-1: In function tbb::interface6::internal::start_for<tbb::blocked_range<int>, cv::BatchDistInvoker, tbb::auto_partitioner>::execute():
stat.cpp:-1: error: undefined reference to tbb::internal::allocate_continuation_proxy::allocate(unsigned int) const
stat.cpp:-1: error: undefined reference to tbb::internal::allocate_continuation_proxy::allocate(unsigned int) const
... 
```

我在我的 *.pro / qmake 文件中包含了 OpenCV 库（也是 libtbb.a）：

```
ANDROID_OPENCV = /home/kolbe/src/android-sdk-linux/OpenCV-2.4.0
LIBS += \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_calib3d.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_flann.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_objdetect.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_contrib.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_video.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_ml.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_legacy.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_highgui.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibjpeg.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibpng.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibtiff.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibjasper.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/libtbb.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_ts.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_imgproc.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_core.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_androidcamera.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_features2d.a

INCLUDEPATH += $$ANDROID_OPENCV/include/opencv/
INCLUDEPATH += $$ANDROID_OPENCV/include/opencv2/
INCLUDEPATH += $$ANDROID_OPENCV/include/

CONFIG+=link_pkgconfig PKGCONFIG+=opencv 
```

为什么 OpenCV 找不到 tbb 函数？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T22:36:06.263

库的顺序对于链接很重要。尝试通过以下方式重新排序行：

```
LIBS += \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_contrib.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_legacy.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_ml.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_objdetect.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_calib3d.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_video.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_features2d.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_highgui.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_androidcamera.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_flann.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_imgproc.a \
$$ANDROID_OPENCV/libs/armeabi-v7a/libopencv_core.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibjpeg.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibpng.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibtiff.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/liblibjasper.a \
$$ANDROID_OPENCV/share/OpenCV/3rdparty/libs/armeabi-v7a/libtbb.a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T11:58:04.973

您可以尝试以下方法...它对我有用

将 libopencv_java.so 复制到 QT_INSTALLDIR/5.1.1/android_armv7/lib 然后将以下内容添加到 .pro LIBS += -lopencv_java

# oracle - Oracle 服务总线调用错误

> ID：12583592
> 
> 赞同：0
> 
> 时间：2012-09-25T13:04:26.057
> 
> 标签：oracle, soa, osb

每当我尝试在 OSB 中调用代理服务时，都会出现错误。这是我看到的错误：

```
com.bea.wli.sb.transports.TransportException: 
The invocation resulted in an error:
Unknown error while processing message for service ProxyService {Proxy service path} 
```

返回 HTTP 500。

在消息流中，我可以看到一个请求被返回，因为它说“没有调用任何服务”。在日志中，我可以看到“放置路由器信息时出错”。

关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:44:59.200

HTTP 500 本质上是“内部服务器错误”。检查 OSB 服务器日志以获取完整堆栈跟踪。问题在于已部署代理服务的区域。

# ado - Inno 设置：使用 ADO 将参数（用户输入）传递给 sql

> ID：12583593
> 
> 赞同：1
> 
> 时间：2012-09-25T13:04:27.063
> 
> 标签：ado, inno-setup

我在我的 inno 设置中使用 ADO[连接到 SQL 服务器](https://stackoverflow.com/questions/12260493/connect-to-sql-2008-using-inno-setup)，它工作正常。我还在执行一些脚本来创建数据库、用户、模式等。我从用户那里获取数据库名称，我希望脚本根据用户输入创建数据库，因此在脚本中我使用 $(DBNAME ) 以获取该值作为参数。我尝试使用 CreateParameter，但它不能正常工作，[我不确定我是否正确使用它] 是否有任何其他选项可以实现这一目标？

我的inno代码：

```
if LoadStringFromFile(ExpandConstant('{app}')+ '\SQLScripts\SCRIPT-1_CREATE_DB.sql', SQLQuery) then
      begin
      ADOCommand.CommandText := SQLQuery;
      ADOParameter := ADOCommand.CreateParameter('DBNAME', adChar,adparaminput,30);
      ADOParameter.Value := 'Dynadbnew';
      ADOCommand.Parameters.Append (ADOParameter);
      ADOCommand.Execute(NULL, NULL, adCmdText or adExecuteNoRecords);
     end; 
```

下面是我的示例 .sql 脚本

```
USE [master]

CREATE DATABASE $(DBNAME) ON  PRIMARY 
( NAME = N'WMSFBASEDB_Data', FILENAME = N'C:\MDF\$(DBNAME).MDF' , SIZE = 420352KB , MAXSIZE = UNLIMITED, FILEGROWTH = 10%)
 LOG ON 
( NAME = N'WMSFBASEDB_Log', FILENAME = N'C:\MDF\$(DBNAME)_1.LDF' , SIZE = 16824KB , MAXSIZE = UNLIMITED, FILEGROWTH = 10%)

ALTER DATABASE $(DBNAME) ADD FILEGROUP [FG_HIS1]

ALTER DATABASE $(DBNAME) ADD FILEGROUP [FG_HIS2]

ALTER DATABASE $(DBNAME) SET COMPATIBILITY_LEVEL = 100 
```

提前致谢

# c# - 在 BackgroundWorker 中加载图像

> ID：12583594
> 
> 赞同：6
> 
> 时间：2012-09-25T13:04:27.843
> 
> 标签：c#, wpf, backgroundworker, bitmapimage, wrappanel

在过去的几天里，我一直在处理 backgroundWorker 的问题。我一直在浏览 MSDN 上的论坛和文档，但仍然没有找到答案，所以现在我想请教各位聪明人。

长话短说，我有一个自定义用户控件，由 ScrollViewer 中的 WrapPanel 组成。WrapPanel 包含一些在滚动到视图中时收到通知的元素。然后元素应该加载并显示图像，这就是问题所在。为了不锁定 gui 线程，我将图像加载到 BackgroundWorker 中，但 GUI 仍然停止。这是表示 WrapPanel 中包含的元素的类的代码：

```
class PictureThumbnail : INotifyingWrapPanelElement
{
    private string path;
    private Grid grid = null;

    private BackgroundWorker thumbnailBackgroundCreator = new BackgroundWorker();
    private delegate void GUIDelegate();
    private Image thumbnailImage = null;

    public PictureThumbnail(String path)
    {
        this.path = path;
        visible = false;
        thumbnailBackgroundCreator.DoWork += new DoWorkEventHandler(thumbnailBackgroundCreator_DoWork);

    }

    void thumbnailBackgroundCreator_DoWork(object sender, DoWorkEventArgs e)
    {
        BitmapImage bi = LoadThumbnail();
        bi.Freeze(); //If i dont freeze bi then i wont be able to access 

        GUIDelegate UpdateProgressBar = delegate
        {
            //If this line is commented out the GUI does not stall. So it is not the actual loading of the BitmapImage that makes the GUI stall.
            thumbnailImage.Source = bi;
        };
        grid.Dispatcher.BeginInvoke(UpdateProgressBar);
    }

    public void OnVisibilityGained(Dispatcher dispatcher)
    {
        visible = true;
        thumbnailImage = new Image();
        thumbnailImage.Width = 75;
        thumbnailImage.Height = 75;

        //I tried setting the thumbnailImage.Source to some static BitmapImage here, and that does not make the GUI stall. So it is only when it is done through the GUIDelegate for some reason.
        grid.Children.Add(thumbnailImage);
        thumbnailBackgroundCreator.RunWorkerAsync();
    }

    private BitmapImage LoadThumbnail()
    {
        BitmapImage bitmapImage = new BitmapImage();

        // BitmapImage.UriSource must be in a BeginInit/EndInit block
        bitmapImage.BeginInit();
        bitmapImage.UriSource = new Uri(path);
        bitmapImage.DecodePixelWidth = 75;
        bitmapImage.DecodePixelHeight = 75;
        bitmapImage.EndInit();

        return bitmapImage;
    }
} 
```

我在代码中添加了一些注释，解释了我尝试过的一些东西以及我有什么线索。但我会在这里再写一遍。如果我只是在 backgroundWorker 中加载 BitmapImage，但不将其应用为 thumbnailImage 的源，则 GUI 不会停止（但没有明显显示图像）。此外，如果我在 OnVisibilityGained 方法中将 thumbnailImage 的源设置为一些预加载的静态 BitmapImage（所以在 GUI 线程中），那么 GUI 不会停止，所以不是 Image.Source 的实际设置是罪魁祸首。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T06:02:31.307

您应该利用后台工作人员的报告功能，它可以让您直接访问表单的控件而无需调用。

# python - 我试图写入 txt.file 的函数有什么问题？

> ID：12583595
> 
> 赞同：1
> 
> 时间：2012-09-25T13:04:29.490
> 
> 标签：python, python-2.7

我是一个新手，我很难过。我问了另一个[问题](https://stackoverflow.com/questions/12582907/how-can-i-write-this-function-that-mostly-prints-to-a-file)，我尝试了解决方案，但我遇到了另一个错误。在这个问题中，我将尽可能具体地包含我的整个代码。我很想把这个`character_sheet()`函数打印到 .txt 文件中。提前致谢！

```
##########################################################
# Cyberpanky N.O.W Python Character Generator by Ray Weiss
#
# Created 9/24/2012
#
# Much thanks to Connor Daliposon 
# Mho made a very readable D&D Character Generator  
# That a Python newbie like me could understand                                                                                                                                                                                                                                 
##########################################################

# Imports
import random
from pprint import pprint

# Hey there
print """
Hello world & welcome to the CYBERPANKY N.O.W. character generator.
Programmed by Ray Weiss. 
To quit at anytime, press CNTRL-C.
"""

print "Lets figure out your stats first. Press enter to continue."
raw_input()

# Stat Roller
# Rolls 3D6 and adds the sum together and prints

def roll_stats():
    a = random.randint(1, 6)
    b = random.randint(1, 6) 
    c = random.randint(1, 6)
    d = random.randint(1, 6)
    list = [a, b, c, d]
    list.sort()
    add = sum(list[1:4])
    return add

# Modifiers

def pow_mod():
    a = "|+1 to hit on mele attack rolls| "
    b = "|+1 damage on mele attack rolls|"

    if pow >= 15 and pow < 17:
        return a
    if pow >= 17:
        return a + b
    else: 
        return " ~no modifiers~"

def iq_mod():   
    a = "|-500$ to invest in cyberspace| "
    b = "|Reroll Street Doc abilities|"

    if iq >= 15 and iq < 17:
        return a
    if iq >= 17:
        return a + b
    else: 
        return " ~no modifiers~"

def agi_mod():
    a = "|+1 to hit with ranged weapons| "
    b = "|-1 to hit with ranged weapons|"

    if agi >= 12:
        return a
    if agi <= 9:
        return b
    else: 
        return " ~no modifiers~"

def con_mod():
    a = "|+1 hit point per hit dice|"
    b = "|-1 hit point per hit dice|"

    if con >= 15:
        return a
    elif con <= 6: 
        return b
    else: 
        return " ~no modifiers~"

def cyn_mod():
    a = "|Add 10% to earned experience|"
    b = "|Add 5% to earned experience|"
    c = "|Subtract 10% from earned experience|"
    d = "|Subtract 20% from earned experience|"

    if cyn >= 15:
        return a
    elif cyn > 12 and cyn < 15:
        return b
    elif cyn > 6 and cyn < 9:
        return c
    elif cyn <= 6:
        return d
    else: 
        return " ~no modifiers~"

def cha_mod():
    a = "|+1 to reaction rolls|"
    b = "|-1 to reaction rolls|"

    if cha >= 15:
        return a 
    if cha <= 8:
        return b
    else: 
        return " ~no modifiers~"

# Prints stats + modifiers.
pow = roll_stats()
print "Power:", pow, pow_mod()
iq = roll_stats()
print "Intelligence:", iq, iq_mod()
agi = roll_stats()
print "Agility:", agi, agi_mod()
con = roll_stats()
print "Constitution:", con, con_mod()
cyn = roll_stats()
print "Cynicism:", cyn, cyn_mod()
cha = roll_stats()
print "Charisma:", cha, cha_mod()

print "\nIf you dont like your stats, tough shit. This is Cyberpanky N.O.W."
print "\nPress enter to continue."
raw_input()

# Choose Class

print """In Cyberpanky N.O.W. there are only 3 character classes. 

1\. Samurai: Badass mercenaries. Can make multiple attacks.  
------------------------------------------------------------------------------
2\. Street Docs: Hackers / Doctors. Can heal & hack. 
------------------------------------------------------------------------------
3\. Shaman: Magical prophets that follow spirit animals and cast miracles 
------------------------------------------------------------------------------
"""
type = int(raw_input("Please type a 1, 2, or 3 > "))

if type == 1:
    character_class = "Samurai"
    class_power = """* Attack multiple times for a -2 to hit penalty.
* Uses a D10 for Physical hit box.
* Has a + 1 to hit bonus that levels up to level 5\. 
"""
    name = raw_input("Alright {}, tell me your name >".format(character_class))

elif type == 2:
    character_class = "Street Doc"
    class_power = """* Roll IQ to mess with electronics
* Can heal party members after combat for 1D4 Hit Points
* Can perform cyberwear installation or surgery with proper tools.
"""
    name = raw_input("Alright {}, tell me your name >".format(character_class))

elif type == 3:
    character_class = "Shaman"
    class_power = """* Can cast Miracles.
* Can call for a saving grace if they are on their last Cool Hit Box
* Can do favors for their god for more miracles, or pay a tithe.
"""
    name = raw_input("Alright {}, tell me your name >".format(character_class))

# Alignment

print"""\nAlright {}, pick an alignment, it's not that important;

1\. Narcissist: Cocky bastard, you think you are the best.
------------------------------------------------------------------------------
2\. Neutral: Pretty self explanatory dipshit. 
------------------------------------------------------------------------------
3\. Nihilist: You care about nothing Lebowski, You'll cut off their Johnson. 
""".format(name)

x = int(raw_input("Please type a 1, 2, or 3 > "))

if x == 1:
    alignment = "Narcissist"

elif x == 2:
    alignment = "Neutral"

elif x == 3:
    alignment = "Nihilist"

print "\nOk you chose {} for an alignment, press enter to continue.".format(
                                                                alignment)
raw_input()

# Functions for ID generation

def gen_id():
    global gender_id
    one = "1\. Straight male"
    two = "2\. Gay male"
    three = "3\. Transgender male pre-op"
    four = "4\. Transgender male post-op"
    five = "5\. Bisexual male"
    six = "6\. Straight female"
    seven = "7\. Gay female"
    eight = "8\. Transgender female pre-op"
    nine = "9\. Transgender female post-op"
    ten = "10\. Bisexual female"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "\nPlease hit enter to roll 1D10"
    raw_input()
    gender_id = random.choice(list)
    print "You rolled {}, press enter to continue.".format(gender_id)
    raw_input()

# Ethnic Profile
def eth_pr():
    global ethnic_pr
    one = "1\. Native American"
    two = "2\. West European"
    three = "3\. East European"
    four = "4\. North Asian"
    five = "5\. South Asian"
    six = "6\. Pacific"
    seven = "7\. North African"
    eight = "8\. South African"
    nine = "9\. Slavic / Caucuses"
    ten = "10\. Hispanic"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "\nPlease hit enter to roll 1D10"
    raw_input()
    ethnic_pr = random.choice(list)
    print "You rolled {}, press enter to continue.".format(ethnic_pr)
    raw_input()

# Family Class Distinction
def fam_cls():
    global fcd
    one = "1\. Homeless"
    two = "2\. Impoverished"
    three = "3\. Lower Class"
    four = "4\. Lower Middle Class"
    five = "5\. Middle Class"
    six = "6\. Comfortable"
    seven = "7\. Upper Middle Class"
    eight = "8\. Upper Class"
    nine = "9\. Job Creators"
    ten = "10\. Warren Buffett"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    fcd = random.choice(list)
    print "You rolled {}, press enter to continue.".format(fcd)
    raw_input()

# Whats Good With Your Folks
def wha_goo():
    global wg, one_x, two_x
    one_x = "1\. Things Are Good With Your Folks; Go to Current Family Affairs"
    two_x = "2\. Your folks are fucked; go to Your Folks Got Fucked"
    list = [one_x, two_x]
    pprint(list)
    print "Please hit enter to roll 1D2"
    raw_input()
    wg = random.choice(list)
    print "You rolled {}, press enter to continue.".format(wg)
    raw_input()

# Your Folks Got Fucked
def yo_fo():
    global fogo_fuck
    one = "1\. Your parents were mugged and murdered, just like Batman"
    two = "2\. Your parents were both convicted of murder"
    three = "3\. Parents decapitated by a truck"
    four = "4\. Parents addicted to coke, put you in an orphanage"
    five = "5\. Parents were corporate spies and assinated in front of you"
    six = "6\. Parents abandonded you at a young age and joined a cult"
    seven = "7\. Your parents died from STDs contracted from aldultery"
    eight = "8\. Parents owed mob a bunch of money, sleeping with fishies"
    nine = "9\. Nuclear explosion incinerated parents, their shadow remains"
    ten = "10\. Parents shot themselves immediately after you were born."
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    fogo_fuck = random.choice(list)
    print "You rolled {}, press enter to continue.".format(fogo_fuck)
    raw_input()

# Current Family Affairs
def cu_fa():
    global cur_fam, one_y, two_y
    one_y = "1\. Things are ok with family, go to Nature Or Nurture"
    two_y = "2\. Your family is fucked, go to Your Family Is Fucked"
    list = [one_y, two_y]
    pprint(list)
    print "Please hit enter to roll 1D2"
    raw_input()
    cur_fam = random.choice(list)
    print "You rolled {}, press enter to continue.".format(cur_fam)
    raw_input()

# Your Family Got Fucked
def fa_fu():
    global fam_fuk
    one = "1\. Market tanked with president Paul, dead broke family."
    two = "2\. Home invaders raped and murded the women in your family"
    three = "3\. Racial Supremisicist drove your family from their home"
    four = "4\. Whole family was abducted by aliens, never seen again"
    five = "5\. Radiation leak hospitalized your whole family."
    six = "6\. Family was accidentally napalmed by the UN, all dead."
    seven = "7\. Family came down with malaria"
    eight = "8\. Family has some obvious dealings with Illuminati"
    nine = "9\. Family eaten alive by cannibals"
    ten = "10\. Make it up dipshit"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    raw_input()
    fam_fuk = random.choice(list)
    print "You rolled {}, press enter to continue.".format(fam_fuk)
    raw_input()

# Nature Or Nurture
def na_nu():
    global nat_nur
    one = "1\. Your childhood was very boring & average" 
    two = "2\. Your childhood was spent moving from city to city"
    three = "3\. Your childhood was depraved; hungry and lonely"
    four = "4\. Your childhood was rewarding, social & fun."
    five = "5\. You were a sick child, spent a lot of time in bed"
    six = "6\. You were sent to a preppy boarding school as a kid"
    seven = "7\. You got addicted to drugs; it screwed you up."
    eight = "8\. You killed another kid, spent time in a hospital"
    nine = "9\. You were a child genius, but had few friends"
    ten = "10\. Make it up dipshit"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    nat_nur = random.choice(list)
    print "You rolled {}, press enter to continue.".format(nat_nur)
    raw_input()

# General Disposition
def ge_di():
    global gen_dis
    one = "1\. Friendly"
    two = "2\. Unfriendly"
    three = "3\. Shy"
    four = "4\. Outgoing"
    five = "5\. Unpretentious"
    six = "6\. Pretentious"
    seven = "7\. Hyperactive"
    eight = "8\. Depressed"
    nine = "9\. Wonderful Human Being"
    ten = "10\. Scumbag"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    gen_dis = random.choice(list)
    print "You rolled {}, press enter to continue.".format(gen_dis)
    raw_input()

# Whats the most important thing in the world
def wh_wo():
    global wha_wor
    one = "1\. Money"
    two = "2\. Kicking ass"
    three = "3\. Getting fucked up"
    four = "4\. Family & friends"
    five = "5\. Business"
    six = "6\. The internet" 
    seven = "7\. Faith"
    eight = "8\. Style"
    nine = "9\. Anarchy"
    ten = "10\. Selfishness"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    wha_wor = random.choice(list)
    print "You rolled {}, press enter to continue.".format(wha_wor)
    raw_input()

# Who is to blame for the worlds problems?
def wh_pr():
    global who_pro
    one = "1\. Corporations"
    two = "2\. Leftists"
    three = "3\. Fate"
    four = "4\. Religion"
    five = "5\. The Illuminatus"
    six = "6\. The News Media"
    seven = "7\. The UN"
    eight = "8\. Your Neighbors"
    nine = "9\. Aliens"
    ten = "10\. President Ron Paul"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    who_pro = random.choice(list)
    print "You rolled {}, press enter to continue.".format(who_pro)
    raw_input()

# How do you solve the worlds problems
def ho_pr():
    global how_pro
    one = "1\. Kill them all"
    two = "2\. But them out"
    three = "3\. Intimidation"
    four = "4\. Diplomacy"
    five = "5\. Free trade"
    six = "6\. Seduction"
    seven = "7\. New-Age spirituality"
    eight = "8\. Religious fanaticism"
    nine = "9\. Federal power"
    ten = "10\. Who gives a shit"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    how_pro = random.choice(list)
    print "You rolled {}, press enter to continue.".format(how_pro)
    raw_input()

# ID Generation

print ("Alright {}, now we need to figure out your personality & life story."
                                                               .format(name))
print "\n\t\t1\. Ethnics, Genes, & Looks"
print "\nTo figure out your age, we add 15 to 1D10.\n"
age = random.randint(1, 10) + 15
print "Press enter to continue dipshit."
raw_input()
print "Age:", age
print "\t\tGender Identity\n"
gen_id()
print"""
------------------------------------------------------------------------------
"""
print "\t\tEthnic Profile\n"
eth_pr()
print"""
------------------------------------------------------------------------------
"""
print "\t\t2\. Ballz Of Our Fathers"
print "\n"
print "\t\tFamily Class Distinction"
fam_cls()
print"""
------------------------------------------------------------------------------
"""
print "\t\tWhat's Good With Your Folks"
wha_goo()
print"""
------------------------------------------------------------------------------
"""
if wg == one_x:
    fogo_fuck = "none"
    print "\t\tCurrent Family Affairs"
    cu_fa()
    print"""
------------------------------------------------------------------------------
"""
    if cur_fam == one_y:
        fam_fuk = "none"
        print "\t\tNature Or Nurture?"
        na_nu()
        print"""
------------------------------------------------------------------------------
"""
    if cur_fam == two_y:
        print "\t\t Your Family Is Fucked"
        fa_fu()
        print"""
------------------------------------------------------------------------------
"""
        print "\t\tNature Or Nurture?"
        na_nu()
        print"""
------------------------------------------------------------------------------
"""
if wg == two_x:
    print "\t\tYour Folks Got Fucked"
    yo_fo()
    print"""
------------------------------------------------------------------------------
"""
    print "\t\tCurrent Family Affairs"
    cu_fa()
    print"""
------------------------------------------------------------------------------
"""
    fam_fuck = "none"
    print "\t\tNature Or Nurture?"
    na_nu()
    print"""
------------------------------------------------------------------------------
"""
    if cur_fam == one_y:
        fam_fuck = "none"
        print "\t\tNature Or Nurture?"
        na_nu()
        print"""
------------------------------------------------------------------------------
"""
    if cur_fam == two_y:
        print "\t\t Your Family Is Fucked"
        fa_fu()
        print"""
------------------------------------------------------------------------------
"""
print "\t\t3\. What Makes you tick"
print "\n"
print "\t\tGeneral Disposition"
ge_di()
print"""
------------------------------------------------------------------------------
"""
print "\t\tWhat's The Most Important Thing In The World?"
wh_wo()
print"""
------------------------------------------------------------------------------
"""
print "\t\tWho Is To Blame For The World's Problems?"
wh_pr()
print"""
------------------------------------------------------------------------------
"""
print "\t\tHow Do You Solve Your / The Worlds Problem"
ho_pr()
print"""
------------------------------------------------------------------------------
"""

#Starting Money
gold = roll_stats() * 100

print "Ok so lets sum that up, please hit enter to continue"
raw_input()

print"""
------------------------------------------------------------------------------
"""

# Print Character Sheet Function.
def char_shee():
    print "Name:", name
    print "Class:", character_class
    print "Class Powers:", class_power
    print "Alignment:", alignment
    print "Power:", pow, pow_mod()
    print "Intelligence:", iq, iq_mod()
    print "Agility:", agi, agi_mod()
    print "Constitution:", con, con_mod()
    print "Cynicism:", cyn, cyn_mod()
    print "Charisma:", cha, cha_mod()
    print "Money:", gold
    print "All Characters Start With 3 Hit Dice"
    print"""
\t\t{0}'s History
\t\t------------------
\t\tAge:{1}
\t\t{2}
\t\t{3}
\t\t{4}
\t\t{5}
\t\t{6}
\t\t{7}
\t\t{8}
\t\t{9}
\t\tGeneral Disposition: {10}
\t\tMost important thing is: {11}
\t\tWho is to blame for worlds problems: {12}
\t\tHow to solve the worlds problems: {13}
""".format(name, age, gender_id, ethnic_pr, fcd, wg, fogo_fuck, cur_fam,fam_fuk, nat_nur, gen_dis, wha_wor, who_pro, how_pro)

char_shee()
print "Press enter to continue"
raw_input()

# Export to text file? 

#character sheet function for writing
def character_sheet():
    sheet = []
    sheet.append("Name: " + name)
    sheet.append("Class: " + character_class)
    sheet.append("Class Powers :" + class_power)
    sheet.append("Alignment: " + alignment)
    sheet.append("Power: ", pow, pow_mod())
    sheet.append("Intelligence: ", iq, iq_mod())
    sheet.append("Agility: ", agi, agi_mod())
    sheet.append("Constitution: ", con, con_mod())
    sheet.append("Cynicism", cyn, cyn_mod())
    sheet.append("Charisma: ", cha, cha_mod())
    sheet.append("Money: " + gold)
    sheet.append("All Characters Start With 3 Hit Dice")
    sheet.append("""
\t\t{0}'s History
\t\t------------------
\t\tAge:{1}
\t\t{2}
\t\t{3}
\t\t{4}
\t\t{5}
\t\t{6}
\t\t{7}
\t\t{8}
\t\t{9}
\t\tGeneral Disposition: {10}
\t\tMost important thing is: {11}
\t\tWho is to blame for worlds problems: {12}
\t\tHow to solve the worlds problems: {13}
""".format(name, age, gender_id, ethnic_pr, fcd, wg, fogo_fuck, cur_fam,fam_fuk, nat_nur, gen_dis, wha_wor, who_pro, how_pro))

    # Return the string with newlines
    return '\n'.join(sheet)

print """Just because I like you, let me know if you want this character
saved to a text file. Please remember if you save your character not to 
name it after something important, or you might lose it. 
"""
text_file = raw_input("Please type 'y' or 'n', if you want a .txt file > ")
if text_file == "y":
    filename = raw_input("\nWhat are we calling your file, include .txt > ")
    target = open(filename, 'w')
    target.write(character_sheet())
    target.close()
    print "\nOk I created your file."
    print """
Thanks so much for using the Cyberpanky N.O.W Character Generator
By Ray Weiss
Goodbye
"""
else:
    print """
Thanks so much for using the Cyberpanky N.O.W Character Generator
By Ray Weiss
Goodbye
""" 
```

这是错误输出

```
> File "cncg.py", line 634, in <module>
>     target.write(character_sheet())   File "cncg.py", line 596, in character_sheet
>     sheet.append("Power: ", pow, pow_mod()) TypeError: append() takes exactly one argument (3 given) Raymond-Weisss-MacBook-Pro:mystuff
> Raylug$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:06:15.613

您需要将旧`print "Power:", pow, pow_mod()`行转换为要附加的字符串：

```
sheet.append("Power: " + str(pow) + ' ' + pow_mod()) 
```

或使用格式化程序：

```
sheet.append("Power: {0} {1}".format(pow, pow_mod())) 
```

因为`.append()`一次只拿一件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:09:25.467

`append`正如错误所说，您在方法中使用了多个参数：

```
TypeError: append() takes exactly one argument (3 given) 
```

您必须连接字符串中的变量和函数结果，因为您不能将字符串与其他类型连接，您必须在连接之前将所有内容转换为字符串。

```
sheet.append("Power: " + str(pow) + " " + str(pow_mod())) 
```

# xcode - UITableView 不再使用 xCode 4.5 滚动，部署在 5.x 或 6.0

> ID：12583598
> 
> 赞同：1
> 
> 时间：2012-09-25T13:04:44.677
> 
> 标签：xcode, uitableview, ios5, ios6, xcode4.5

使用 UITableView 部署项目以显示图像。升级到 xCode 4.5，突然我的 UITableView 不再滚动。

这发生在 iOS 5.0 -> 6.0 的设备和模拟器上

此外，我发现我无法再以编程方式设置 PanGestureRecognizer 的最小触摸次数。 [其他 StackOverflow 票](https://stackoverflow.com/questions/12569560/getting-exc-bad-access-when-trying-to-call-uitableview-pangesturerecognizer) 事实上，一个 Zombie 分析显示识别器已经发布。这绝对可以解释上述行为。我设置识别器的尝试如下并崩溃。

```
UIPanGestureRecognizer* pgr = [imageTableView panGestureRecognizer];
[pgr setMinimumNumberOfTouches:2];
[pgr setMaximumNumberOfTouches:2]; 
```

还有其他人看到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:10:32.943

我在迁移到 iOS6/XCode 4.5 时遇到了类似的问题。似乎 UIPanGestureRecognizer 现在从底层 UIScrollViews 或 UITableViews 窃取触摸。

我在下面的帖子中找到了解决此问题的方法。这不是最高评价的答案，所以我也会重新粘贴下面的内容：

[iphone - UIGestureRecognizer 阻止 UITableView 在 Xcode 4.5 中滚动](https://stackoverflow.com/questions/12423253/iphone-uigesturerecognizer-prevents-uitableview-from-scrolling-in-xcode-4-5)

我遇到了同样的问题：我曾经将 TabGestureRecognizer 直接拖到情节提要上，而不是通过代码创建它们。在 iOS6 中，这似乎打破了滚动。

我更喜欢将视图、手势等直接添加到故事板上，而不是通过代码。

您仍然可以执行此操作，但需要进行两项更改：

1) 引用 Outlet Collections 右键单击​​在场景 Dock 中对您可见的 GestureRecognizer。清除参考插座集合部分

2）通过代码将GestureRecognizer附加到相关视图

为您的 GestureRecognizer 创建一个出口 在 vi​​ewDidLoad 方法中添加以下行：

[self.tableView addGestureRecognizer:_tabGesture];

# join - 在 WQL/SCCM 中连接两个表

> ID：12583601
> 
> 赞同：2
> 
> 时间：2012-09-25T13:04:49.873
> 
> 标签：join, vbscript, wmi, wql, sccm

我想我在这里真的很愚蠢。

我正在使用 vbscript。我已连接到 SCCM 服务器

```
Set locator = CreateObject("WbemScripting.SWbemLocator")
Set connection  = locator.ConnectServer("SERVERNAME", "Root\SMS\SITENAME") 
```

然后我有一个 WMI WQL 查询：

```
Set Collections = connection.ExecQuery("SELECT LastStatusTime,AdvertisementID,
  LastStateName,AdvertisementName 
  FROM SMS_ClientAdvertisementStatus 
  INNER JOIN SMS_Advertisement 
  ON SMS_Advertisement.AdvertisementID = SMS_ClientAdvertisementStatus.AdvertisementID 
  WHERE  LastStateName = 'Succeeded' 
  AND LastStatusTime > '2012-09-25'")

FOR each Collection in Collections 

        Collection.LastStatusTime 
        Collection.AdvertisementID

Next 
```

我认为我对 WQL 的理解存在差距。我似乎能够在此查询中加入这两个 WQL“表”，但我只能从 SMS_ClientAdvertisementStatus 返回值。

如果我尝试从我加入的表 SMS_Advertisement 返回任何内容，我只会收到错误消息。

你能加入 WQL 中的“表格”吗？即使它们是表格？还是我必须有一个嵌套查询？还是有另一种从两个表返回数据的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:12:54.443

WQL 不支持 JOIN，但您可以使用 MOF 定义包含来自多个类的数据的 WMI 类。看这里：

[从旧属性创建新实例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389754%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:19:10.610

该[`WQL`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394606%28v=vs.85%29.aspx)语言只是 SQL 的一个子集，不支持 JOIN 语句，但[`ASSOCIATORS OF`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384793%28v=vs.85%29.aspx)在某些情况下您可以使用 JOIN 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T06:58:02.107

WQL 确实支持连接。这是一个示例工作查询，它​​列出了与集合名称匹配的设备名称。在 SCCM 2012 工作。

```
select SMS_R_SYSTEM.Name from SMS_R_System inner join SMS_Collection as Systems on Systems.Name = SMS_R_System.Name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-05T22:43:13.617

在我的 PowerShell SCCM / ConfigManager 查询中尝试使用 JOIN 语句时，我遇到了类似的问题，发现这是一个很好的解决方案：

[https://gallery.technet.microsoft.com/scriptcenter/SCCM-2012-WMI-query-with-0daea30c#content](https://gallery.technet.microsoft.com/scriptcenter/SCCM-2012-WMI-query-with-0daea30c#content)

我相信这些方法也可以翻译成其他语言。

# android - 在 onitemclick 之后用不同的数据重新加载 gridview

> ID：12583605
> 
> 赞同：2
> 
> 时间：2012-09-25T13:05:19.083
> 
> 标签：android, android-activity, android-gridview

我有一个带有网格视图的活动。我可以填充此布局并为网格的每个项目设置一个侦听器。现在，单击一项后，我将使用不同的数据重新加载相同的 gridview。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:43:38.567

您可以将侦听器设置为 GridView，一旦发生 lick 更改您的数据，然后刷新 Grid。

看看这个：

```
final GridView grid = new GridView(this); // Could be findViewById(R.id.grid) 
        grid.setAdapter(new ArrayAdapter<String>(this, android.R.id.text1)); // Use your own Adapter with real data
        grid.setOnItemClickListener(new OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
            {
                //Do something - change the data of the List/Array/etc

                // Now you can try this:
                ((ArrayAdapter<String>)grid.getAdapter()).notifyDataSetChanged();

                // Or this:
                grid.setAdapter(new ArrayAdapter<String>(MyActivity.this, android.R.id.text1));

            }
        }); 
```

# python - 如何获取整个目录的文件名和内容？

> ID：12583609
> 
> 赞同：1
> 
> 时间：2012-09-25T13:05:35.857
> 
> 标签：python, file, file-io

我有一个名为的目录`main`，其中包含两个文件：一个名为的文本文件，其内容`alex.txt`只有一个，`100`另一个文件名为.`mark.txt``400`

我想创建一个将进入目录的函数，并获取每个文件名和该文件的内容并将它们存储（到字典中？）。所以最终结果看起来像这样：

```
({'alex.txt', '100'}, {'mark.txt', '400'}) 
```

对大量文件执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T13:08:22.540

这看起来是一份不错的工作`os.walk`

```
d = {}
for path,dirs,fnames in os.walk(top):
    for fname in fnames:
        visit = os.path.join(path,fname)
        with open(visit) as f:
             d[visit] = f.read() 
```

如果存在子目录，此解决方案还将递归到子目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:08:11.453

使用字典看起来像是要走的路。

您可以使用[`os.listdir`](http://docs.python.org/library/os.html)来获取`directory`. 然后，迭代文件，打开每个文件，读取其输入并将它们存储在字典中。

如果您的`main`目录有一些子目录，您可能希望使用该`os.walk`函数以递归方式处理它们。坚持`os.listdir`否则。

请注意， 的项目`os.listdir`是相对于 的`main`。您可能希望`main`在打开文件之前添加路径。在这种情况下，使用`os.path.join(path_to_main, f)`where `f`is an item of `os.listdir`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:11:31.143

```
import os
bar = {}
[bar.update({i: open(i, 'r').read()}) for i in os.listdir('.')] 
```

或（通过 mgilson）

```
bar = dict( (i,open(i).read()) for i in os.listdir('.') ) 
```

# perl - Perl 函数：接受散列、数组或标量作为参数

> ID：12583612
> 
> 赞同：1
> 
> 时间：2012-09-25T13:05:48.123
> 
> 标签：perl, reference, parameter-passing

我有以下子程序。

```
 sub Function{
   my $ref = \($_[0]);
   if(ref($ref) eq 'SCALAR'){
   . . .
   }
} 
```

我试图让它工作，以便将列表、标量或散列传递给它，它将其转换为引用，并取决于该引用是类型`ARRAY`，`SCALAR`还是`HASH`执行不同的操作。

它可以称为

```
Function(%a)
Function($a)
Function(@a) 
```

我怎样才能`$ref`引用传递给的任何内容`Function`？我目前的方法不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:09:30.420

```
Function(%a)
Function($a)
Function(@a) 
```

你不能做你所要求的。内部`Function`无法确定是否传递了数组或散列，因为实际上，您一开始就无法将数组或散列传递给子。你只能传递一个列表；哈希和数组在上面的子调用中转换为列表。

您应该首先传递对函数的引用：

```
Function(\%a)
Function($a)
Function(\@a) 
```

然后您可以轻松检查它是什么：

```
sub Function {
  my $param = shift;
  if (not ref $param) {
     ...
  } elsif (ref $param eq 'HASH') {
     ...
  } elsif (ref $param eq 'ARRAY') {
     ...
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:12:16.590

您可以使用原型函数。尽管 Perl 5 原型一团糟，但在这种情况下它们可以很好地使用。据我了解他们的原型

```
sub Function (\[$@%]) {...} 
```

应该可以解决您的问题，并且参考在`$_[0]`.

最大的缺点是您传递的变量*必须*`$`以,`@`或`%` *字符*开头，因此您不能`Function`直接使用常量参数调用：

```
 Function(1) 
```

失败，但是

```
 my $temp = 1;
 Function($temp) 
```

作品。

* * *

您的方法失败了，因为`@_` *它是*一个列表，并且所有元素都是标量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:19:00.947

为什么不检查传入的参数是否是引用并采取相应的行动呢？

```
sub gimme_a_ref
{
  my $arg=shift;

  if(ref $arg ne ref "")
  {
    return $arg;
  }
  else
  {
    return \$arg;
  }
} 
```

# grails - Grails Controller 类中的响应标头大小

> ID：12583613
> 
> 赞同：0
> 
> 时间：2012-09-25T13:05:54.323
> 
> 标签：grails, response, httpresponse

是否可以在 Grails Controller groovy 类中找出响应头的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:10:12.367

现在无法测试它，但这样的东西应该可以工作：

```
def headers = response.getHeaderNames()

def size
headers.each { header ->
    def headerValue = response.getHeader(header)
    // get the size of headerValue in whatever unit you're looking for and add it to
    // the size variable
} 
```

请记住，这是免费的，因为我现在没有设置来测试它，但 grails 响应对象只是[HttpServletResponse](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html)的实例，所以它应该非常简单。

# c++ - 将内容从 C FILE 传输到 C++ 流

> ID：12583615
> 
> 赞同：0
> 
> 时间：2012-09-25T13:05:59.067
> 
> 标签：c++, file-io, ostream

假设我有一个用 C 语法打开的文件

```
FILE* fp = fopen("whatever.txt", "w");
// Library function needs FILE* to work on
libray_function(fp);

// Now I'd like to copy the contents of file to std::cout
// How???

fclose(fp); 
```

我希望能够在 C++ ostream 中复制该文件的内容（例如 a`stringstream`或什至`std::cout`）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:17:30.450

您可以使用[`ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)and [`rdbuf()`](http://en.cppreference.com/w/cpp/io/basic_ios/rdbuf)：

```
#include <fstream>
#include <sstream>

std::ifstream in("whatever.txt");
std::ostringstream s;
s << in.rdbuf(); 
```

或者：

```
std::ifstream in("whatever.txt");
std::cout << in.rdbuf(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:08:59.853

您已打开文件进行写入。无论如何，您都需要关闭它并重新打开它，您也可以随意打开它（如果您愿意，可以作为 istream）。然后，这仅取决于您对性能的关心程度。如果您真的关心，您应该分块阅读它（一次至少 512 个字节）。如果您不关心性能，您可以读取一个字节，吐出一个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:14:13.830

先关闭它。

```
fclose(fp); 
```

然后再次打开

```
string line;
ifstream myfile ("whatever.txt");
if (myfile.is_open())
{
    while ( myfile.good() )
    {
        getline (myfile,line);
        cout << line << endl;
    }
    myfile.close();
} 
```

# c# - 如何在 Windows8 中使用 MediaElement 更改视频的位置？

> ID：12583616
> 
> 赞同：2
> 
> 时间：2012-09-25T13:06:00.190
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, mediaelement

目前我正在我的代码中执行此操作，

```
 playbackElement1.AutoPlay = true;
 playbackElement1.SetSource(stream, this.m_recordStorageFile.FileType);
 playbackElement1.Position = new TimeSpan(0, 0, 0, 0, 5000);
 playbackElement1.Play(); 
```

它不起作用，检查超过 5 秒的视频。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T14:03:43.843

有两个问题。首先，[MediaElement](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement)只能在媒体加载后设置位置，通过处理[MediaOpened](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement.mediaopened.aspx)事件来确定。其次，并非所有媒体都是可搜索的。通过调用[CanSeek](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement.canseek.aspx)进行检查。使用类似的东西：

```
playbackElement1.AutoPlay = true;
// Will fire after the media has loaded
playbackElement1.MediaOpened += (source, args) =>
{
    MediaElement player = (MediaElement) source;
    if (player.CanSeek)
    {
        player.Position = new TimeSpan(0, 0, 0, 0, 5000);   
    }
}                     
playbackElement1.SetSource(stream, this.m_recordStorageFile.FileType); 
```

加载后，使用[NaturalDuration](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement.naturalduration.aspx)属性查看媒体的长度，如果需要，使用[HasTimeSpan](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.duration.hastimespan.aspx)和[TimeSpan](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.duration.timespan.aspx)属性将其转换为 TimeSpan。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T04:34:45.393

简而言之，您需要在 MediaElement 下方添加一个 Slider，就像在任何视频播放器中一样... - Slider 将更新播放器当前位置 - Timer 将每 300 毫秒更新一次滑块与当前播放器位置

代码：

```
<Slider x:Name="videoSlider" Thumb.DragStarted="videoSlider_DragStarted" Thumb.DragCompleted="videoSlider_DragCompleted" Margin="10,0,10,30" Height="18" VerticalAlignment="Bottom"/>

<MediaElement x:Name="videoPlayer" Margin="4,59,152,53" Volume=".5" MediaOpened="videoPlayer_MediaOpened"> 
```

[这是带有滑块的媒体元素的图片][1]

现在我们有了一个媒体元素和一个滑块……下一步：C# 代码 :)

```
 public partial class MainWindow : Window
         {  
               bool isSeekingMedia = false;
               DispatcherTimer seeker;   // the timer to update the Slider
               public MainWindow()
               {
                    InitializeComponent();
                    player = new MediaPLayer();
                    IsPlaying(false);
                    seeker = new DispatcherTimer();
                    seeker.Interval = TimeSpan.FromMilliseconds(200);
                    seeker.Tick += Seeker_Tick;
        }
    ///Seeker_Tick will update the Slider position while the video is playing
                private void Seeker_Tick(object sender, EventArgs e)
                {
                    try
                    {
                        MediatimeCounter.Content = String.Format("{0:hh}:{0:mm}:{0:ss}/{1:hh}:{1:mm}:{1:ss}", videoPlayer.Position, videoPlayer.NaturalDuration.TimeSpan);
                        if (!isSeekingMedia)
                        {
                            videoSlider.Value = videoPlayer.Position.TotalSeconds;
                        }
                    }
                    catch (Exception ex) { }
                }

//This code is going to set Seeking to true to avoid playing the video if the user is changing the slider position... it kinda causes a performance issue.. so it's better to update the video position once the slider dragging event is completed.
private void videoSlider_DragStarted(object sender, RoutedEventArgs e)
    {
        isSeekingMedia = true;
    }

//and this code is to update the video position based on the slider value.
private void videoSlider_DragCompleted(object sender, RoutedEventArgs e)
    {
        if (videoPlayer.Source != null)
        {
            isSeekingMedia = false;
            this.videoPlayer = player.SeekVideo(videoPlayer, videoSlider.Value);
        }
    } 
```

![在此处输入图像描述](../Images/744a0bd301f863d91f5d4ca80aa9fbfa.png)

# android - 当我的地理位置改变时如何做任何事情？

> ID：12583619
> 
> 赞同：0
> 
> 时间：2012-09-25T13:06:13.613
> 
> 标签：android, google-maps, android-location

我想做一些动作，即每当我的地理位置发生变化时，都会显示带有文本“我在这里”的对话框。

我正在使用 MyLocationOverlay 在 Google 地图的地图视图上的位置上绘制一个点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:44:43.317

下面是位置监听器类 -

```
private MyOverLay draw = new MyOverLay();

 class MyLocationListener_gps implements LocationListener {
                public void onLocationChanged(Location location) {

                    clat = location.getLatitude();
                    clon = location.getLongitude();
                                GeoPoint geoPoint = new GeoPoint((int) (clat * 1E6),
                                        (int) (clon * 1E6));
                                    mapView.getController().animateTo(geoPoint);

                                    draw = new MyOverLay(geoPoint);
                                    mapView.getOverlays().add(draw);
        }
                } 
```

这是代码覆盖类-

```
class MyOverLay extends Overlay {
        private GeoPoint gp1;
        private int mRadius = 3;

        public MyOverLay() {

        }

        public MyOverLay(GeoPoint gp1) {
            this.gp1 = gp1;
        }

        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                long when) {

            Projection projection = mapView.getProjection();
            if (shadow == false) {

                Paint paint = new Paint();
                paint.setAntiAlias(true);

                Point point = new Point();
                projection.toPixels(gp1, point);
                paint.setColor(Color.BLUE);

                RectF oval = new RectF(point.x - mRadius, point.y - mRadius,
                        point.x + mRadius, point.y + mRadius);

                canvas.drawOval(oval, paint);
            }

            return super.draw(canvas, mapView, shadow, when);
        }

    } 
```

当你移动和你的坐标改变时，它会画一个蓝点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:15:37.893

覆盖 onLocationChanged 方法：

```
// Create an overlay to show current location
mMyLocationOverlay = new MyLocationOverlay(this, mMapView) {
  @Override
  public void onLocationChanged(android.location.Location location) {
    String text = "New coordinates: " + location.getLatitude() + ", " + location.getLatitude();
    Toast toast = Toast.makeText(getApplicationContext(), text, Toast.LENGTH_SHORT);
    toast.show();
    super.onLocationChanged(location);
  }

};
mMyLocationOverlay.runOnFirstFix(new Runnable() { public void run() {
  mMapView.getController().animateTo(mMyLocationOverlay.getMyLocation());
}});

mMapView.getOverlays().add(mMyLocationOverlay); 
```

# loops - 蛮力循环？

> ID：12583622
> 
> 赞同：0
> 
> 时间：2012-09-25T13:06:26.170
> 
> 标签：loops, knapsack-problem

一位农民想购买 100 只动物。他有100美元。价格如下：猪 = 10 美元。母鸡 = 3 美元。鸽子 = 0.5 美元。他必须为每只动物至少买一只。我的任务是展示这个问题是否有多种解决方案，并在找到一个时停止程序。

我猜这与使用“蛮力”方法有关。我尝试过为每个动物声明变量并使用带有 if 语句的 while 循环，但这不起作用。

# java - Eclipse Java 内存错误：堆。使用 Phonegap 在 Android 中进行开发。

> ID：12583625
> 
> 赞同：0
> 
> 时间：2012-09-25T13:06:39.480
> 
> 标签：java, android, eclipse, memory, cordova

我有一个我开发的 Android 应用程序，它是从一个成功的 ios 应用程序创建的，该应用程序已发布并且运行良好。在一台设备上它可以正常工作，没有错误并且不会崩溃。然而，在另一台设备（更新、更新版本的 Android、更快的处理器）上它会崩溃。这是崩溃时的内存错误。

![在此处输入图像描述](../Images/a0851194fbe8a56cb6d6ae0819c40a89.png)

该应用程序旨在拍摄一张照片，然后将该照片用作画布的背景，然后拍摄屏幕截图。我可以完成这个过程一次，但是如果我重复这个过程并拍摄另一张照片，应用程序会在相机 API 退出时第二次崩溃。并显示这些错误。该应用程序是在 Eclipse 中使用 Phonegap 和 Jquery mobile 开发的。我不确定我应该发布我的代码的哪些部分来解决这个问题，但请随时询问您是否觉得其中一些可能相关。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:12:10.800

好的，如果您查看我关于 PhoneGap Android 应用程序内存不足的帖子：

[http://simonmacdonald.blogspot.ca/2012/07/change-to-camera-code-in-phonegap-190.html](http://simonmacdonald.blogspot.ca/2012/07/change-to-camera-code-in-phonegap-190.html)

使用 camera.getPicture() 命令时，您可能会发现一些提示。除此之外，我目前正在通过将所有东西都放在内部而不是触发相机意图来解决其中的一些相机问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:16:59.997

你可以做这样的伎俩......将图片设置为背景使用......

```
 public void setbg(){
 String pathName = Environment.getExternalStorageState() + "scm_pic.jpg";
 Resources res = getResources();
 Bitmap bitmap = BitmapFactory.decodeFile(pathName);
 BitmapDrawable bd = new BitmapDrawable(res, bitmap);
 View view = findViewById(R.id.container);
 view.setBackgroundDrawable(bd);
} 
```

然后当您不需要这张图片或想要@Override onPause 方法或切换另一个活动时使用......

```
private void unbindDrawables(View view) {
 if (view.getBackground() != null) {
 view.getBackground().setCallback(null);
 }
 if (view instanceof ViewGroup) {
     for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
     unbindDrawables(((ViewGroup) view).getChildAt(i));
     }
 ((ViewGroup) view).removeAllViews();
  }
} 
```

要在@Override 中使用它，例如...

```
unbindDrawables(findViewById(R.id.container));
System.gc(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T07:20:51.217

如果你使用相机意味着目的地类型必须在 FILE_URL 在android中。因为 DATA_URI 给出了 base64 字符串，所以它有时会给出内存不足的错误。首先，您从相机获取 URL，然后使用文件系统概念转换 base64 格式...

# ios - 富UITextView中的文本与CoreText对齐段落？

> ID：12583634
> 
> 赞同：1
> 
> 时间：2012-09-25T13:07:05.717
> 
> 标签：ios, uitextview, core-text, nsattributedstring, text-alignment

在 iOS 6 应用程序中，我将 UITextView 设置为接受属性字符串。

如何更改段落的文本对齐方式（左 - 右 - 中心 - 对齐）？

以下代码：

```
NSMutableAttributedString *mutableAttributeString = [textView.attributedText mutableCopy];

CTTextAlignment alignment = kCTCenterTextAlignment;

CTParagraphStyleSetting settings[] = {kCTParagraphStyleSpecifierAlignment, sizeof(alignment), &alignment};
CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(settings, sizeof(settings) / sizeof(settings[0]));
CFAttributedStringSetAttribute((CFMutableAttributedStringRef)mutableAttributeString, CFRangeMake(0, CFAttributedStringGetLength((CFMutableAttributedStringRef)mutableAttributeString)), kCTParagraphStyleAttributeName, paragraphStyle);
CFRelease(paragraphStyle);

textView.attributedText = mutableAttributeString; 
```

在最后一行崩溃：-[__NSCFType headIndent]: unrecognized selector sent to instance 0x1559b2d0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:53:09.433

尝试创建和使用 NSParagraphStyle 代替。（相应地，您也应该使用`NSParagraphStyleAttributeName`属性名称，尽管行为表明名称是相同的。）

NSParagraphStyle 是 iOS 6 中的新功能。我不知道对针对旧版本的开发人员有什么建议。

# java - 何时使用 @JsonProperty 属性以及它的用途是什么？

> ID：12583638
> 
> 赞同：243
> 
> 时间：2012-09-25T13:07:20.587
> 
> 标签：java, ajax, jackson

这个 bean 的“状态”：

```
public class State {

    private boolean isSet;

    @JsonProperty("isSet")
    public boolean isSet() {
        return isSet;
    }

    @JsonProperty("isSet")
    public void setSet(boolean isSet) {
        this.isSet = isSet;
    }

} 
```

使用 ajax 'success' 回调通过网络发送：

```
 success : function(response) {  
            if(response.State.isSet){   
                alert('success called successfully)
            } 
```

这里需要注解@JsonProperty 吗？使用它有什么好处？我想我可以删除这个注释而不会造成任何副作用。

[在https://github.com/FasterXML/jackson-annotations/wiki/Jackson-Annotations](https://github.com/FasterXML/jackson-annotations/wiki/Jackson-Annotations)上阅读此注释我不知道何时需要使用此注释？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-09-25T13:15:08.197

这是一个很好的例子。我使用它来重命名变量，因为 JSON 来自`.Net`属性以大写字母开头的环境。

```
public class Parameter {
  @JsonProperty("Name")
  public String name;
  @JsonProperty("Value")
  public String value; 
} 
```

这正确地解析到/从 JSON：

```
"Parameter":{
  "Name":"Parameter-Name",
  "Value":"Parameter-Value"
} 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-10-17T17:20:08.213

我认为 OldCurmudgeon 和 StaxMan 都是正确的，但这里有一个简单的例子回答你。

@JsonProperty(name)，告诉 Jackson ObjectMapper 将 JSON 属性名称映射到带注释的 Java 字段的名称。

```
//example of json that is submitted 
"Car":{
  "Type":"Ferrari",
}

//where it gets mapped 
public static class Car {
  @JsonProperty("Type")
  public String type;
 } 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-11-05T20:43:46.083

好吧，现在它的价值...除了通常的序列化和反序列化之外，JsonProperty 还用于指定变量的 getter 和 setter 方法。例如，假设您有这样的有效负载：

```
{
  "check": true
} 
```

和一个反序列化器类：

```
public class Check {

  @JsonProperty("check")    // It is needed else Jackson will look got getCheck method and will fail
  private Boolean check;

  public Boolean isCheck() {
     return check;
  }
} 
```

然后在这种情况下需要 JsonProperty 注释。但是，如果您在类中也有一个方法

```
public class Check {

  //@JsonProperty("check")    Not needed anymore
  private Boolean check;

  public Boolean getCheck() {
     return check;
  }
} 
```

也看看这个文档：http: [//fasterxml.github.io/jackson-annotations/javadoc/2.3.0/com/fasterxml/jackson/annotation/JsonProperty.html](http://fasterxml.github.io/jackson-annotations/javadoc/2.3.0/com/fasterxml/jackson/annotation/JsonProperty.html)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-09-26T02:53:18.400

如果没有注释，推断的属性名称（从 JSON 匹配）将是“set”，而不是 - 似乎是意图 - “isSet”。这是因为根据 Java Beans 规范，采用“isXxx”和“setXxx”形式的方法意味着有逻辑属性“xxx”要管理。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-07-01T12:59:49.117

如您所知，这完全是关于序列化和淡化对象。假设有一个对象：

```
public class Parameter {
  public String _name;
  public String _value; 
} 
```

这个对象的序列化是：

```
{
  "_name": "...",
  "_value": "..."
} 
```

变量名直接用于序列化数据。如果您要从系统实现中删除系统 api，在某些情况下，您必须在序列化/反序列化中重命名变量。@JsonProperty 是一个元数据，用于告诉序列化器如何序列化对象。它用于：

*   变量的名称
*   访问（读、写）
*   默认值
*   必需/可选

例如：

```
public class Parameter {
  @JsonProperty(
        value="Name",
        required=true,
        defaultValue="No name",
        access= Access.READ_WRITE)
  public String _name;
  @JsonProperty(
        value="Value",
        required=true,
        defaultValue="Empty",
        access= Access.READ_WRITE)
  public String _value; 
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-04-25T10:14:20.180

添加 JsonProperty 还可以确保安全，以防有人决定要更改其中一个属性名称而没有意识到所讨论的类将被序列化为 Json 对象。如果他们更改属性名称，JsonProperty 确保它将在 Json 对象中使用，而不是属性名称。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-05-29T19:55:11.677

除了上面的所有答案，不要忘记文档中说的部分

> 标记注释，可用于将非静态方法定义为逻辑属性的“setter”或“getter”（取决于其签名），或用作逻辑属性的非静态对象字段（序列化、反序列化）财产。

如果您`non-static`的类中有一个不是常规的方法，那么您可以通过在其上使用注释使其`getter or setter`像 a 一样。`getter and setter`请参阅下面的示例

```
public class Testing {
    private Integer id;
    private String username;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getIdAndUsername() {
        return id + "." + username; 
    }

    public String concatenateIdAndUsername() {
        return id + "." + username; 
    }
} 
```

当上述对象被序列化时，响应将包含

*   用户名来自`getUsername()`
*   来自`getId()`
*   idAndUsername 来自`getIdAndUsername`*

由于该方法`getIdAndUsername`以`get`then 开头，因此它被视为普通 getter，为什么你可以用`@JsonIgnore`.

如果您注意到`concatenateIdAndUsername`没有返回，那是因为它的名称没有以开头，`get`并且如果您希望该方法的结果包含在响应中，那么您可以使用`@JsonProperty("...")`它，它将被视为正常`getter/setter`，如上面突出显示的文档中所述.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-02-08T18:31:39.683

作为其他答案的补充，如果您在没有无参数构造函数的类中`@JsonProperty`使用注释，则注释非常重要。`@JsonCreator`

```
public class ClassToSerialize {

    public enum MyEnum {
        FIRST,SECOND,THIRD
    }

    public String stringValue = "ABCD";
    public MyEnum myEnum;

    @JsonCreator
    public ClassToSerialize(MyEnum myEnum) {
        this.myEnum = myEnum;
    }

    public static void main(String[] args) throws IOException {
        ObjectMapper mapper = new ObjectMapper();

        ClassToSerialize classToSerialize = new ClassToSerialize(MyEnum.FIRST);
        String jsonString = mapper.writeValueAsString(classToSerialize);
        System.out.println(jsonString);
        ClassToSerialize deserialized = mapper.readValue(jsonString, ClassToSerialize.class);
        System.out.println("StringValue: " + deserialized.stringValue);
        System.out.println("MyEnum: " + deserialized.myEnum);
    }
} 
```

在这个例子中，唯一的构造函数被标记为`@JsonCreator`，因此 Jackson 将使用这个构造函数来创建实例。但输出是这样的：

> 序列化：{"stringValue":"ABCD","myEnum":"FIRST"}
> 
> 线程“主”com.fasterxml.jackson.databind.exc.InvalidFormatException 中的异常：无法 **从字符串值“stringValue”构造 ClassToSerialize$MyEnum 的实例：值不是声明的枚举实例名称之一：[FIRST，SECOND，THIRD]**

但是在`@JsonProperty`构造函数中添加注解之后：

```
@JsonCreator
public ClassToSerialize(@JsonProperty("myEnum") MyEnum myEnum) {
    this.myEnum = myEnum;
} 
```

反序列化成功：

> 序列化：{"myEnum":"FIRST","stringValue":"ABCD"}
> 
> 字符串值：ABCD
> 
> 我的枚举：第一

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-08T15:50:12.760

来自 JsonProperty javadoc，

> 定义逻辑属性的名称，即用于属性的 JSON 对象字段名称。如果值为空字符串（这是默认值），将尝试使用被注释的字段的名称。

# ios - notnoop Java-apns 套接字已关闭

> ID：12583639
> 
> 赞同：1
> 
> 时间：2012-09-25T13:07:21.063
> 
> 标签：ios, push, apple-push-notifications

我开发了一个与开发人员资料配合得很好的应用程序。但是，我现在正在生产中，PUSH 通知不再起作用。

我正在使用来自 notnoop的**java-apns**

该证书是正确的（正如我在本地笔记本电脑上尝试过的那样）。

但是，它在我的服务器中不起作用。我收到以下错误：

```
com.notnoop.exceptions.NetworkIOException: java.net.SocketException: Socket closed 
```

我正在使用的代码如下：

```
 try{
         //Abrimos el servicio con el certificado
         ApnsService service =APNS.newService()
        .withCert("cert.p12", "password")
                .withProductionDestination()
        .build();
    String payload="";

    payload = APNS.newPayload().sound("default").badge(1).localizedKey("ShoutPushStringWithData").localizedArguments(pUserName, pMessage).build();
    String token = pPushURI;            
    service.push(token, payload);
    } catch(RuntimeIOException | InvalidSSLConfig | NetworkIOException e){
        WebServiceLogger.getInstance().log(Level.INFO, "[ERROR PUSH]: "+ e);
    } 
```

我究竟做错了什么？我该如何解决？

谢谢，伊拜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-26T12:36:58.093

我遇到了同样的问题和消息，最后发现问题是我使用了证书？为沙盒生成，我的代码将 APNS 服务创建为 .withProductionDestination().build() 我将代码更改为 .withSandboxDestination().build() 并且现在可以使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:26:59.123

终于解决了。使用 java-apns 完成这项工作是不可能的，我不知道为什么。

我已决定使用 javapns，尽管它并不容易，但它已得到修复。

重要的一点是，Certificate.p12 必须只是从 Apple 生产 iOS 推送服务导出的一个，而不是我在其他帖子中读到的从分发和生产 iOS 推送服务导出的那个。

祝你好运！

# unicode - Solr.NET 和汉字

> ID：12583641
> 
> 赞同：1
> 
> 时间：2012-09-25T13:07:27.667
> 
> 标签：unicode, solr, cjk, solrnet

我有一个处理英文和中文内容的搜索索引。所有文档都由 Solr.NET 导入 SOLR

当我从浏览器（localhost:8389/solr/...）搜索中文内容时，一切正常，但是当我使用 Solr.NET 执行搜索时，我得到 0 hit :(

我试图设置一个[记录器](http://wiki.apache.org/solr/LoggingInDefaultJettySetup)来查看浏览器搜索和 Solr.NET 搜索之间的区别，但我得到的是问号 (??????) 而不是中文字符。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:53:26.957

使用您的浏览器而不是 Notepad++ 打开 solr0.log，以确保这是一个真正的问题，并找出文件保存为哪种编码 - 如果它不是 Unicode，则 Solr.NET 可能无法搜索它。

众所周知，Notepad++ 会出现中文问题，这可能是因为编码（Notepad++ 不支持典型的中文编码，如 gb 或 big5），也可能是因为默认字体可能支持也可能不支持中文字符。浏览器更宽容，为了正确显示文件会做任何事情。实际上，要将非unicode亚洲编码转换为unicode，我经常在浏览器中打开一个文件，它会检测到正确的编码并显示原始内容，然后CTRL+A CTRL+C CTRL+V 一切进入编辑器，保存作为UTF-8，完成。

# jquery - jquery：出现逗号时如何在文本中添加新行

> ID：12583646
> 
> 赞同：1
> 
> 时间：2012-09-25T13:07:48.250
> 
> 标签：jquery, html

我有一个文本框，可以从用户那里获取多个电子邮件 ID。并在工具提示中显示它，但我需要在新行上显示每封电子邮件（用逗号分隔）。
为此，需要检测逗号并为其添加换行符。

HTML 是

```
 <input type="text" id="email"> <div id="ttip"></div> 
```

用于工具提示的 jquery

```
$("#email").keyup(showTooltip);

var showTooltip = function(e) {
    var tooltip = $(this).val();
    if (tooltip == '') {
        hideTooltip();
    } else if (e.which == 188) {
        tooltip += "<br>";
        $("#ttip").fadeIn().html(tooltip);
    } else {
        $("#ttip").fadeIn().html(tooltip);
    }
}​ 
```

因此，当我的工具提示在 div 中显示时，它没有检测到`<br>`并且显示在同一行。
我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:14:24.650

尝试：

```
$("#email").keyup(showTooltip);

            var showTooltip=function(e){
            var tooltip=$(this).val();
                    if(tooltip ==''){
                            hideTooltip();
                    }else if(e.which == 188){
                           tooltip = tooltip.replace(/,/g,"<br />");
                            $("#ttip").fadeIn().html(tooltip);
                    }else{              
                            $("#ttip").fadeIn().html(tooltip);
                    }   
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:23:00.243

您每次都在撤消先前的更改。在替换值之前不要检查是否输入了逗号。

```
var showTooltip = function(e) {
    var tooltip = $(this).val();
    if (tooltip == '') {
        hideTooltip();
    } else {
        tooltip = tooltip.replace(/,/g, '<br />');
        $("#ttip").fadeIn().html(tooltip);
    }
}
$("#email").keyup(showTooltip);​ 
```

在这里查看：http: [//jsfiddle.net/lnrb0b/NK65G/](http://jsfiddle.net/lnrb0b/NK65G/) （我已经注释掉了，`hideTooltip()`因为我没有这个功能）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:26:10.843

所以这有效：http: [//jsfiddle.net/ZgmFw/4/](http://jsfiddle.net/ZgmFw/4/)

```
var showTooltip = function(e) {
    var tooltip = $(this).val();
    if (tooltip == '') {
        hideTooltip();
    } else {
        $("#ttip").html(tooltip.replace(/,/g, "<br />")).fadeIn();
    }
}

$("#email").keyup(showTooltip);​ 
```

# vba - 删除打开的书

> ID：12583650
> 
> 赞同：1
> 
> 时间：2012-09-25T13:08:17.093
> 
> 标签：vba, excel, excel-2003

我想创建一个新的工作簿，在其中添加一个列表，然后保存这本书。如果存在，我需要删除以前的变体，然后保存当前。这是我的代码：

```
Private Sub GenerateReport_Click()

    Dim wb As Workbook
    Dim FilePath As String

    FilePath = ThisWorkbook.Path + "\CommonReport.xls"
    Set wb = Workbooks.Add
    ActiveCell.FormulaR1C1 = "a1"
    wb.ActiveSheet.Range("B1").Select
    ActiveCell.FormulaR1C1 = "b1b"
    wb.ActiveSheet.Range("C1").Select
    ActiveCell.FormulaR1C1 = "3"
    wb.ActiveSheet.Range("D1").Select
    ActiveCell.FormulaR1C1 = "4"
    wb.ActiveSheet.Range("E1").Select
    ActiveCell.FormulaR1C1 = "5"
    wb.ActiveSheet.Range("F1").Select
    ActiveCell.FormulaR1C1 = "6"
    wb.ActiveSheet.Range("G1").Select
    ActiveCell.FormulaR1C1 = "7"
    wb.ActiveSheet.Range("A1:G1").Select
    wb.ActiveSheet.ListObjects.Add(xlSrcRange, wb.ActiveSheet.Range("$A$1:$G$1"), , xlYes).Name = "Ñïèñîê1"
    wb.ActiveSheet.Range("A1:G2").Select

    Application.DisplayAlerts = False

        If Dir(FilePath) = vbNullString Then
           wb.SaveAs Filename:=FilePath
        Else
        SetAttr FilePath, vbNormal
           Kill FilePath
        End If

End Sub 
```

书籍打开时是否可以删除。当我想删除已打开的书时，如何处理错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:21:26.883

我认为没有必要删除工作簿，只需覆盖它即可。如果已打开，请先将其关闭。例子：

```
Option Explicit

Private Const NEW_BOOK_NAME As String = "CommonReport"

Public Sub Test()
    Dim newWorkbook As Workbook

    Set newWorkbook = Workbooks.Add
    With newWorkbook.ActiveSheet
        [a1] = "a1"
        [b1] = "b1"
        [c1] = "c1"
    End With

    Dim filePath As String
    filePath = ThisWorkbook.Path & "\" & NEW_BOOK_NAME

    On Error Resume Next
    Workbooks(NEW_BOOK_NAME).Close

    On Error GoTo 0
    Application.DisplayAlerts = False
    newWorkbook.SaveAs filePath
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:15:43.027

Olle Sjögren Idea 应该有效。

但简单地使用 worksheet.usedrange.clear 方法清空现有工作表可能更容易。然后你可以插入你的新数据。这应该比删除方法快很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:08:19.070

您不能删除打开的工作簿。

检查是否使用以下内容打开了同名文件：[http ://www.exceltip.com/st/Determine_if_a_workbook_is_already_open_using_VBA_in_Microsoft_Excel/472.html](http://www.exceltip.com/st/Determine_if_a_workbook_is_already_open_using_VBA_in_Microsoft_Excel/472.html)

`FilePath`如果此类文件已打开，请通过与打开的工作簿（例如）比较来检查它是否与要删除的文件具有相同的路径，`Workbooks("CommonReport.xls").FullName`如果是，请使用 close 命令将其关闭：

```
Workbooks("CommonReport.xls").Close SaveChanges:=False 
```

# eclipse - 此插件中不存在包

> ID：12583658
> 
> 赞同：3
> 
> 时间：2012-09-25T13:08:38.103
> 
> 标签：eclipse, pde

我尝试在我的工作区中将插件作为源项目导入。现在我在 Manifest.mf 文件中收到此插件错误中不存在的包。但是这些包确实存在于同一插件的源文件夹中。可能是什么问题？我尝试使用谷歌搜索，但当包来自不同的 Eclipse 项目时，我只能找到这类错误。请给我一些启示

![显示我的包结构的图像](../Images/3957be10aed26c6d4019d07556cc6c5c.png)

[http://i.stack.imgur.com/g2lrE.png](https://i.stack.imgur.com/g2lrE.png)

```
 Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: xyz Plug-in 2.1.0
Bundle-SymbolicName: com.abc.xyz
Bundle-Version: 2.1.0
Bundle-ClassPath: xyz.jar
Bundle-Activator: com.abc.xyz.xyzPlugin
Bundle-Vendor: FHG
Bundle-Localization: plugin
Export-Package: xyz.common,
 xyz.common.pattern,
 xyz.cursor,
 xyz.dm.common,
 xyz.dom,
 xyz.dom.bootModel,
 xyz.dom.exception,
 xyz.dom.x,
 xyz.errmsg,
 xyz.eventHandling,
 xyz.mof,
 xyz.mof.exception,
 xyz.mof.x,
 xyz.versioning.extent,
 xyz.versioning.versionstore,
 com.CH_co.cryptx,
 com.CH_co.util,
 com.abc.xyz,
 com.abc.xyz.uuid,
 com.tools,
 config,
 mdd.delta.model,
 mdd.diffmerge,
 mdd.diffmerge.event,
 mdd.model,
 transactionHandling,
 uuidGenerator
Eclipse-AutoStart: true
Require-Bundle: org.eclipse.core.runtime,
 com.abc.mdd.common 
```

这是 manifest.mf 文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T08:46:13.227

我找到的答案有点奇怪，我找不到它背后的逻辑。我删除了“问题”视图中的错误，并以干净模式重新启动了 Eclipse。它开始工作了。请让我知道这背后的原因是什么

# python - 为什么在 Python 中使用 super() 时必须提供类名

> ID：12583660
> 
> 赞同：8
> 
> 时间：2012-09-25T13:08:39.067
> 
> 标签：python, python-2.7

> **可能重复：**
> [为什么在使用 super() 时必须指定自己的类，有没有办法绕过它？](https://stackoverflow.com/questions/466611/why-do-i-have-to-specify-my-own-class-when-using-super-and-is-there-a-way-to)

我正在读这本书 - `"Core Python Programming"`，我真的觉得它非常好，我想说。但是在研究继承主题时，我有一段时间感到困惑。

某处的书说-我们可以使用`super()`调用`super class method`它将为我们找到基类方法，而且我们不需要`self`显式传递，就像我们没有 super..

这是示例代码： -

```
# Invoking super class method without super() .. Need to pass `self` as argument
class Child(Parent):
    def foo(self):
        Parent.foo(self)

# Invoking with super().
# No need to pass `self` as argument to foo()
class Child(Parent1, Parent2):
    def foo(self):
        super(Child, self).foo()
        print 'Hi, I am Child-foo()' 
```

我的问题是 - 为什么我们必须传递`classname`to`super()`调用.. 因为类名可以从调用 super 的类中推断出来..

所以，由于 super() 是从 调用的 `class Child`，类名应该是隐式的。那么为什么我们需要它呢？

*编辑：-`Child`作为参数提供给 super() 没有意义，因为它没有提供任何信息..我们可以使用`super(self)`..并且该方法将按照它们的顺序在超类中搜索括号内给出..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:46:21.963

通过提供类名作为第一个参数，您可以提供冗余信息。是的。这有点愚蠢*，这就是`super`Python 3 中改变行为的原因。

*我的回答实际上与约翰卡特的回答相矛盾。当然，只有我们中的一个人是对的。我不想冒犯他和其他人，我很高兴看到一个有意义的例子，`super(C, self).method(arg)`它实际上并没有在课堂上使用`C`:-)。

# objective-c - 将 wcf 框架用于 Web 服务时出现 xml 解析错误

> ID：12583667
> 
> 赞同：0
> 
> 时间：2012-09-25T13:09:04.027
> 
> 标签：objective-c, ios, xml, wcf

这是我第一次在为 iOS 应用程序开发 wcf soap 服务时，尝试使用 post 方法将 xml 发送到服务器时遇到问题，我的 iOS 端代码看起来像这样

```
NSString *soapMessage = [NSString stringWithFormat:@"<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"><SOAP-ENV:Body><SaveAllRecords33><xmlData></xmlData></SaveAllRecords33></SOAP-ENV:Body></SOAP-ENV:Envelope>"];

NSURL *url = [NSURL URLWithString:@"http://webservice.net2survey.com/servicejson.svc/SaveAllRecord33"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];                        
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];             

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"urn:ServiceJSON/SaveAllRecords33" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];    
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

在 .net 方面是这样的

```
[WebInvoke(Method = "POST", 
           BodyStyle = WebMessageBodyStyle.WrappedRequest, 
           ResponseFormat = WebMessageFormat.Json)] 
[OperationContract] 
public string SaveAllRecords33(string xmlData) 
{ 
    //DataContractSerializer
    dataContract = new DataContractSerializer(typeof(string)); 
    XmlDocument xmlDoc = new XmlDocument(); 
    xmlDoc.LoadXml(xmlData);

    JavaScriptSerializer objSerialiver = new JavaScriptSerializer();
    return "{\"Answer\":" + objSerialiver.Serialize(xmlDoc.InnerXml) + "}"; 
} 
```

当目标要点击此网址时，它会显示一些错误，如下所示

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><s:Fault><faultcode xmlns:a="http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher">a:InternalServiceFault</faultcode><faultstring xml:lang="en-US">Root element is missing.</faultstring><detail><ExceptionDetail xmlns="http://schemas.datacontract.org/2004/07/System.ServiceModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><HelpLink i:nil="true"/><InnerException i:nil="true"/><Message>Root element is missing.</Message><StackTrace>   at System.Xml.XmlTextReaderImpl.ThrowWithoutLineInfo(String res)&#xD;
   at System.Xml.XmlTextReaderImpl.ParseDocumentContent()&#xD;
   at System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)&#xD;
   at System.Xml.XmlDocument.Load(XmlReader reader)&#xD;
   at System.Xml.XmlDocument.LoadXml(String xml)&#xD;
   at WcfService.ServiceJSON.SaveAllRecords33(String xmlData)&#xD;
   at SyncInvokeSaveAllRecords33(Object , Object[] , Object[] )&#xD;
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)&#xD;
   at System.S
2012-09-25 17:50:00.846 Net2Survey_demo[1576:b903] str: erviceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)&#xD;
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)&#xD;
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)&#xD;
   at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)</StackTrace><Type>System.Xml.XmlException</Type></ExceptionDetail></detail></s:Fault></s:Body></s:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:32:42.693

我把这种类型的 WCF web 服务称为这种尝试调用可能对你有帮助..）

```
 -(void)ViewWillAppear
 {

 NSString *soapMsg = [NSString stringWithFormat:@"<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope\">"
                                 "<ToPostalCode>%@</ToPostalCode>"
                                 "<FromPostalCode>%@</FromPostalCode>"
                                 "<Weight>%@</Weight>"
                                 "<DeliveryServiceName></DeliveryServiceName>"
                                 "</SingaporePostalInfoDetailsRequest>",txtToPostalCode.text,txtFrmPostalCode.text,txtWeight.text];

            NSURL *url = [NSURL URLWithString: @http://webservice.net2survey.com/servicejson.svc/basic"];
            NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

            NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];
            [req addValue:@"application/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
            [req addValue:@"http://webservice.net2survey.com/servicejson.svc/basic" forHTTPHeaderField:@"SOAPAction"];
            [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];
            [req setHTTPMethod:@"POST"];
            [req setHTTPBody: [soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

            conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
            if (conn) {
                webData = [[NSMutableData data] retain];
            }

            objAppDelegate.arrGlbPostageSing = [[NSMutableArray alloc]init];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:55:38.057

服务本身有效，问题不在 WCF 中。如果您在堆栈跟踪中滚动到最右侧，您会看到它说`Root element is missing.`并且在您的服务中创建 XmlDocument 时它失败了。

您只是向它发送了一个无效的 Xml 字符串并且它无法解析。

# android - 使用 EditText.setSelection() 时的意外行为

> ID：12583668
> 
> 赞同：1
> 
> 时间：2012-09-25T13:09:08.433
> 
> 标签：android

我正在做一个程序，用户可以使用正则表达式在文本中搜索，我想让匹配的文本被选中。所以我使用这段代码：

```
 public void onClick(View v) {
        try {
            switch (v.getId()) {
                case R.id.btn_search:
                    Matcher m = Pattern.compile(reg.getText().toString()).matcher(txt.getText());
                    int start = txt.getSelectionStart();
                    if (start != txt.getSelectionEnd()) {
                        start++;
                    }
                    if (start < 0 || start >= txt.length()) {
                        start = 0;
                    }
                    while (true) {
                        try {
                            m.find(start);
                            txt.setSelection(m.start(), m.end());
                            txt.requestFocus();
                            break;
                        } catch (IllegalStateException ex) {
                            if (start == 0) {
                                err_notfound.show();
                                break;
                            }
                            start = 0;
                        }
                    }
                    break;
            }
        } catch (PatternSyntaxException ex) {
            err_syntax.show();
        } catch (Throwable ex) {
            showException("onClick", ex);
        }
    } 
```

但是代码没有按预期运行。当我手动将光标放在某个位置，然后按搜索按钮时，有时程序会将光标设置为 m.start() 但不会将选择扩展为 m.end()。我已经测试了程序，m.start() 和 m.end() 是不同的值。如果有人知道导致问题的原因，请告诉我。我会很感激的。

编辑：感谢您的帮助！我找到了这个问题的答案。它与用于移动光标和选择文本的图钉有关（我不知道它叫什么……）。如果它显示在文本字段中，并且调用了 setSelection()，则 EditText 将不会正确显示选择。但是，如果您随后使用 getSelectionStart() 和 getSelectionEnd()，您会发现它们与 m.getStart() 和 m.getEnd() 的值完全相同。这可能是一个错误。所以我的解决方案是先调用 clearFocus() 。修改后的代码是这样的：

```
 txt.clearFocus();
                    while (true) {
                        try {
                            m.find(start);
                            txt.setSelection(m.start(), m.end());
                            txt.requestFocus();
                            break;
                        } catch (IllegalStateException ex) {
                            if (start == 0) {
                                err_notfound.show();
                                break;
                            }
                            start = 0;
                        }
                    } 
```

它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:16:08.220

I tested your code and put in one modiication.

```
 Matcher m = Pattern.compile("1*", Pattern.CASE_INSENSITIVE).matcher(txt.getText()); 
```

I then made sure that my EditText had only 1's and it highlighted the entire thing.

You many need to confirm that your Regular Expressions are written correctly. You could see more on regualr expressions [here](http://introcs.cs.princeton.edu/java/72regular/)(same site I just used).

# php - 如何检测 MySQL 查询是否来自缓存？

> ID：12583671
> 
> 赞同：13
> 
> 时间：2012-09-25T13:09:18.010
> 
> 标签：php, mysql

有什么方法可以确定是否从 MySQL 查询缓存中检索到执行的查询？

当然......有很多方法可以在一般级别（`SHOW STATUS LIKE '%qcache%'`等）上计算缓存查询的数量，但我想具体了解当前执行的查询是否从 MySQL 缓存中加载。

例如，在 PHP 中，该函数`mysql_insert_id();`在单独的查询中返回最后插入的 ID。

`mysql_is_query_from_cache($previous_query);`在那个方向上，调用元数据函数来验证之前的查询结果是否实际上是从 MySQL 查询缓存中检索到的，这将是一种美

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T13:32:03.823

对于 MySQL 5.0 及更高版本，您可以使用 SHOW PROFILES 获取最近查询 ID 的列表，然后使用 SHOW PROFILE FOR QUERY %id_here% 查看是否有对缓存数据的引用。

[这在http://www.dbasquare.com/2012/04/03/was-a-query-served-from-mysql-query-cache/](http://www.dbasquare.com/2012/04/03/was-a-query-served-from-mysql-query-cache/)以及其他一些方法中有更详细的解释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T14:52:36.890

谢谢@yuriy，我已经用你的“SHOW PFOFILE”建议做了一个代码示例，它就像一个魅力！'SHOW PROFILE FOR QUERY 2' 命令通过“将缓存结果发送到客户端”给出了非常漂亮的结果，这正是我正在寻找的触发器！:)

`/* enable profiling */`
`$result = mysql_query('SET profiling = 1');`

`/* is profiling ON for this session? */`
`$result = mysql_query("SHOW VARIABLES LIKE '%profiling%'");`

`/* execute main query */`
`$result = mysql_query('SELECT COUNT(*) FROM orders');`

`/* show overview of current profiles */`
`$result = mysql_query('SHOW PROFILES');`

`/* show profiling stats for main query */`
`$result = mysql_query('SHOW PROFILE FOR QUERY 2');`

[http://dbm.home.xs4all.nl/mysqlshowprofile2.jpg](http://dbm.home.xs4all.nl/mysqlshowprofile2.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-30T05:35:22.363

您可以执行两次相同的查询并检查他们的个人资料，例如

```
set global query_cache_size = 16777216;
set profiling = 1; 
```

两次执行您的查询

```
select * from sbtest.sbtest1 limit 100;
select * from sbtest.sbtest1 limit 100; 
```

然后检查配置文件，您将看到第二个查询比第一个查询花费更少的时间

```
mysql> show profiles;
+----------+------------+----------------------------------------+
| Query_ID | Duration   | Query                                  |
+----------+------------+----------------------------------------+
|        7 | 0.20415325 | set global query_cache_size = 16777216 |
|        8 | 0.26780725 | select * from sbtest.sbtest2 limit 100 |
|        9 | 0.00007350 | select * from sbtest.sbtest2 limit 100 |
+----------+------------+----------------------------------------+ 
```

使用“显示查询 ID 的配置文件”与 query_ID=8（第一个查询）和 query_ID=9（第二个查询）进行比较

```
mysql> show profile for query 8;
+--------------------------------+----------+
| Status                         | Duration |
+--------------------------------+----------+
| starting                       | 0.000023 |
| Waiting for query cache lock   | 0.000004 |
| checking query cache for query | 0.032402 |
| checking permissions           | 0.000088 |
| Opening tables                 | 0.000035 |
| System lock                    | 0.000014 |
| Waiting for query cache lock   | 0.049689 |
| init                           | 0.075707 |
| optimizing                     | 0.000015 |
| statistics                     | 0.000021 |
| preparing                      | 0.000012 |
| executing                      | 0.000004 |
| Sending data                   | 0.108332 |
| Waiting for query cache lock   | 0.000013 |
| Sending data                   | 0.000581 |
| end                            | 0.000012 |
| query end                      | 0.000062 |
| closing tables                 | 0.000020 |
| freeing items                  | 0.000013 |
| Waiting for query cache lock   | 0.000003 |
| freeing items                  | 0.000741 |
| Waiting for query cache lock   | 0.000006 |
| freeing items                  | 0.000002 |
| storing result in query cache  | 0.000005 |
| logging slow query             | 0.000003 |
| cleaning up                    | 0.000004 |
+--------------------------------+----------+
26 rows in set (0.49 sec) 
```

可以看到开表、关表等一长串，说明这个查询需要从硬盘查询数据，第二个是

```
mysql> show profile for query 9;
+--------------------------------+----------+
| Status                         | Duration |
+--------------------------------+----------+
| starting                       | 0.000023 |
| Waiting for query cache lock   | 0.000004 |
| checking query cache for query | 0.000008 |
| checking privileges on cached  | 0.000003 |
| checking permissions           | 0.000010 |
| sending cached result to clien | 0.000019 |
| logging slow query             | 0.000003 |
| cleaning up                    | 0.000003 |
+--------------------------------+----------+
8 rows in set (0.00 sec) 
```

证明查询被缓存

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T14:45:10.633

小心这个。

```
SELECT * FROM orders; 
```

不是来自缓存（查询 id = qId1）

```
SELECT * FROM orders; 
```

来自缓存（查询 id 更改！，查询 id=qId2）

```
DELETE FROM orders; 
```

id=qId2 的查询来自缓存，但实际上不是！（表数据更改）。您需要再执行一次查询。但是有必要在执行之前知道查询是否来自缓存。这就是为什么 Yuriy 的方法行不通的原因。

# wicket - 使用 oauth 2.0 和 wicket 实现身份验证

> ID：12583672
> 
> 赞同：0
> 
> 时间：2012-09-25T13:09:18.587
> 
> 标签：wicket, oauth-2.0, oauth-provider

我尝试使用 oauth 2.0 与我们的客户建立安全通信。首先，我必须承认我对 oauth 完全陌生。使用的技术如下：wicket，spring，我采取了以下步骤。

1.  在 pom.xml 中添加依赖

    <dependency>
    <groupId>org.springframework.security.oauth</groupId>
    <artifactId>spring-security-oauth</artifactId>
    <version>1.0.0.M3</version>
    </dependency>

2.  然后我在 WEB-INF/web.xml 中添加了以下内容

    <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
    <filter-name>springSecurityFilterChain </filter-name>
    <url-pattern>/*</url-pattern>
    </filter-mapping>

3.  最后我将这些行添加到 META-INF/spring-context/application.xml

    <beans:bean id="tokenServices" class="org.springframework.security.oauth2.provider.token.InMemoryOAuth2ProviderTokenServices">
    <beans:property name="supportRefreshToken" value="true" />
    </beans:bean>
    < oauth:provider client-details-service-ref="clientDetails" token-services-ref="tokenServices">
    <oauth:verification-code user-approval-page="/oauth/confirm_access" />
    </oauth:provider>
    <oauth:client-details-service id="clientDetails">
    <oauth:client clientId="foo" authorizedGrantTypes="authorization_code" />
    </oauth:client-details-service>

但我得到了这个错误：

```
25 09 12 14:48:11:921:ERROR: [ContextLoader] Context initialization failed
java.lang.NoClassDefFoundError: org/springframework/core/env/ConfigurableEnvironment
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.getDeclaredConstructor(Class.java:2002)
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:19:00.510

我认为你需要在你的 Maven 依赖项中使用 spring-core。特别是 3.1 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:50:08.180

通常是这样的，当我们添加一个依赖时，它本身就包含了必要的依赖。不是吗？因为我得到了这么多的错误，直到现在我添加了许多依赖项，但仍然面临一些新的依赖项？这是合乎逻辑的......在我可以运行项目之前添加依赖项。我仍然没有代码......只是尝试添加OAUTH依赖！

# php - 未调用 SessionHandlerInterface 写入方法

> ID：12583679
> 
> 赞同：5
> 
> 时间：2012-09-25T13:09:30.710
> 
> 标签：php

所以我创建了一个实现 SessionhandlerInterface 的类并将其设置为会话处理程序：

```
$sessionHandler = new SessionHandler();
session_set_save_handler($sessionHandler);
session_start(); 
```

问题是，永远不会调用 write 函数。

如果我使用 session_set_save_handler 的第二个参数并将其设置为 false：

```
session_set_save_handler($sessionHandler, false); 
```

然后它可以正常工作。有人可以向我解释这种行为吗？我正在使用 PHP 5.4.6。

在文档中写道：

> 当使用对象作为会话保存处理程序时，向 PHP 注册关闭函数非常重要，以避免 PHP 在关闭时内部销毁对象的方式产生意外的副作用，并可能阻止调用 write 和 close。通常，您应该使用 register_shutdown_function() 函数注册“session_write_close”。

从 PHP 5.4.0 开始，您可以使用 session_register_shutdown() 或在使用 OOP 方法调用 session_set_save_handler() 并传递实现 SessionHandlerInterface 的实例时简单地使用“注册关闭”标志。

但我并不完全理解这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:11:43.323

该[文档](http://sg.php.net/manual/en/function.session-set-save-handler.php#refsect1-function.session-set-save-handler-parameters)指出以下内容：

> 直到输出流关闭后才会执行“write”处理程序。因此，“write”处理程序中调试语句的输出将永远不会在浏览器中看到。如果需要调试输出，建议将调试输出写入文件。

这可能就是为什么如果您使用简单的`echo`.

# android - Android - 如何以编程方式设置联系人铃声？

> ID：12583683
> 
> 赞同：2
> 
> 时间：2012-09-25T13:09:47.407
> 
> 标签：android, sqlite, contacts, ringtone

> **可能重复：**
> [如何在 Android 上为单个联系人设置铃声？](https://stackoverflow.com/questions/2437922/how-can-i-set-a-ringtone-for-an-individual-contact-on-android)

我正在开发关于联系人的示例应用程序，我可以在我的 android 应用程序中添加联系人，并且我可以随时将联系人同步到 android 本机联系人（通讯录）。我现在可以将联系人插入本地联系人。唯一的问题是我无法设置联系人铃声。所有联系人的联系人铃声都保存在我的数据库中。但我正在努力为个人联系设置铃声。我怎样才能做到这一点。下面是保存联系人的代码。目前我正在对所有内容进行硬编码。

```
 String DisplayName = "XYZ";
    String MobileNumber = "0000000000";
    String HomeNumber = "1111";
    String WorkNumber = "2222";
    String emailID = "email@nomail.com";
    String company = "xxxx";
    String jobTitle = "abcd";
    String Ringtonepath= "content://media/internal/audio/media/43";
    Uri Ringtone1 = Uri.parse(Ringtonepath);   
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

        ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
                .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
                .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
                .build()
        );

        //------------------------------------------------------ Names
        if(DisplayName != null)
        {          
            ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).
                    withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0).
                    withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE).
                    withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,DisplayName)
                    .build());
        }

        //------------------------------------------------------ Mobile Number                     
        if(MobileNumber != null)
        {
            ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, MobileNumber)
                    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
                    .build()
            );
        }

        //------------------------------------------------------ Home Numbers
        if(HomeNumber != null)
        {
            ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, HomeNumber)
                    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,ContactsContract.CommonDataKinds.Phone.TYPE_HOME)
                    .build());
        }

        //------------------------------------------------------ Work Numbers
        if(WorkNumber != null)
        {
            ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, WorkNumber)
                    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,ContactsContract.CommonDataKinds.Phone.TYPE_WORK)
                    .build());
        }

        //------------------------------------------------------ Email
        if(emailID != null)
        {
            ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Email.DATA, emailID)
                    .withValue(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                    .build());
        }

        //------------------------------------------------------ Organization
        if(!company.equals("") && !jobTitle.equals(""))
        {
            ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Organization.COMPANY, company)
                    .withValue(ContactsContract.CommonDataKinds.Organization.TYPE, ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                    .withValue(ContactsContract.CommonDataKinds.Organization.TITLE, jobTitle)
                    .withValue(ContactsContract.CommonDataKinds.Organization.TYPE, ContactsContract.CommonDataKinds.Organization.TYPE_WORK)

                    .build());
        }

        // Asking the Contact provider to create a new contact                 
        try
        {
            getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);

        }
        catch (Exception e)
        {              
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), "Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();

        } 

    }
} 
```

如何以编程方式设置铃声。

# entity-framework - EF5 附加实体验证

> ID：12583688
> 
> 赞同：1
> 
> 时间：2012-09-25T13:10:09.357
> 
> 标签：entity-framework

EF5 和架构中的非空字符串出现了一些谜团。例如，假设我们有这个简单的用户表：

```
CREATE TABLE Users
(
   UserID INT PRIMARY KEY NOT NULL IDENTITY(1,1),
   UserName VARCHAR(50) NOT NULL,
   UserFirst VARCHAR(50) NULL,
   UserLast VARCHAR(50) NULL
) 
```

...我创建了一个 POCO 类来表示它。这一切都很好。我可以检索和创建数据，但是更新造成了一些严重的痛苦。假设我想更新给定用户的名字：

```
User user = new User { UserID = 12345 };
context.Users.Attach(user);
user.FirstName = "SomethingElse";
context.SaveChanges(); 
```

这应该有效。附加后，不可为空`UserName`的为空。哪个应该没问题 - 我不想更改它，并且更改检测表明该值未更改。但是，当我调用 时`SaveChanges`，会抛出一个 DB 验证异常，说明它`UserName`是无效的。

所以，从这里，有两个问题：

1.  我做错了什么？我完全愿意相信我对实体框架的理解是有缺陷的。
2.  为什么在保存时不使用按*属性更改状态？*我知道`context.Configuration.ValidateOnSaveEnabled`，但我不认为简单地关闭验证是一个有效的答案。我可以依靠另一个类似的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:22:07.377

您说您要更新用户，但您的示例代码正在创建一个新用户，其 ID 为 12345，然后附加它。您的代码正在做的是创建一个全新的实体，将不可为空的字段留空，并尝试保存到数据库，这会引发错误。

您是否打算检索 ID 为 12345 的现有用户？然后，您应该从数据库中获取该实体，然后更新属性，而不是创建新实体。

```
User user = context.Users.First(u => u.UserID == 12345);
user.FirstName = "SomethingElse";
context.SaveChanges(); 
```

**编辑**

发生的情况是，当您在附加后修改 FirstName 属性时，EF 将整个实体标记为脏，因此它会尝试更新所有内容。

如果您只想更新 FirstName，您需要更改您的代码（来自[相关的 SO 帖子，如何更新单个列](https://stackoverflow.com/questions/3642371/how-to-update-only-one-field-using-entity-framework)）：

```
 var user = new User { UserID = 12345, FirstName = "SomethingElse" };
  using (var db = new MyEfContextName())
  {
    context.Users.Attach(user);
    context.Entry(user).Property(x => x.FirstName).IsModified = true;
    context.SaveChanges();
  } 
```

# spring - 队列消费者的Spring JMS配置

> ID：12583691
> 
> 赞同：1
> 
> 时间：2012-09-25T13:10:24.860
> 
> 标签：spring, jms, activemq, spring-jms

我正在尝试运行一个非常基本的应用程序来学习 Spring JMS + ActiveMQ。我看到我的 Producer 创建了消息 (sysout)，但我的 Consumer 中没有显示任何内容，也没有引发异常。我想我在这里遗漏了一些简单的东西；非常感谢任何帮助。

[已编辑，以下代码有效]

制片人：

```
@Component
public class JmsMessageProducer
{
    @Autowired
    private JmsTemplate template;

    public void generateMessages() throws JMSException
    {
        template.send(new MessageCreator()
        {
            public Message createMessage(Session session) throws JMSException
            {
                System.out.println("sending..");
                TextMessage message = session.createTextMessage("this is a Producer created message!");
                return message;
            }
        });
    }
} 
```

消费者：

```
@Component
public class JmsMessageConsumer implements MessageListener {
    @Override
    public void onMessage(Message message) {
        if (message instanceof TextMessage) {
            TextMessage tm = (TextMessage) message;
            try {
                System.out.println("CONSUMER - received ["+tm.getText()+"]");
            }
            catch (Throwable th) {
                th.printStackTrace();
            }
        }
    }
} 
```

生产者配置：

```
<context:component-scan base-package="mrpomario.springcore.jms"/> <!-- finds the JmsMessageProducer -->

<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="tcp://localhost:8082"/>
</bean>

<bean id="pomarioQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="mrpomario.springcore.jms.queue"/>
</bean>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory"/>
    <property name="defaultDestination" ref="pomarioQueue"/>
</bean> 
```

消费者配置：

```
<jms:listener-container>
    <jms:listener ref="jmsMessageConsumer" method="onMessage" destination="mrpomario.springcore.jms.queue"/>
</jms:listener-container>

<bean id="pomarioQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="mrpomario.springcore.jms.queue"/>
</bean>

<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="tcp://localhost:8082"/>
</bean>

<amq:broker id="broker" useJmx="false" persistent="false">
    <amq:transportConnectors>
        <amq:transportConnector uri="tcp://localhost:8082" />
    </amq:transportConnectors>
</amq:broker> 
```

测试用例：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:mrpomario/springcore/jms/jms-config.xml")
public class JmsTest
{
    @Autowired
    JmsMessageProducer jmsMessageProducer;

    @Test
    public void test_Single_Queue_Producer_and_Consumer_Unidirectional() throws JMSException
    {
        try
        {
            jmsMessageProducer.generateMessages();
            assertTrue(true);
        }
        catch (Throwable th)
        {
            System.out.println("\n\nJmsTest: remote invocation failed. Ensure the web server is running.\n\n");
        }
    }
} 
```

我在 Java EE 容器 (mvn jetty:run) 中运行生产者，Spring MVC 应用程序也在该容器中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:57:20.107

我认为您最终会向两个完全不同的代理（以及随后不同的队列）发送和消费：

只在一个地方定义你的代理，比如你的生产者配置：

```
<amq:broker id="broker" useJmx="false" persistent="false">
    <amq:transportConnectors>
        <amq:transportConnector uri="tcp://localhost:8082" />
        <amq:transportConnector uri="vm://localhost" />
    </amq:transportConnectors>
</amq:broker>

<amq:connectionFactory id="jmsFactory" brokerURL="vm://localhost" /> 
```

从您的消费者配置中删除代理配置，并且只有 connectionFactory: Either（如果您在同一个 VM 中）：

```
<amq:connectionFactory id="jmsFactory" brokerURL="vm://localhost" /> 
```

或者（如果远程）：

```
<amq:connectionFactory id="jmsFactory" brokerURL="tcp://localhost:8082" /> 
```

# java - 将 Tomcat 线程专用于 servlet

> ID：12583692
> 
> 赞同：11
> 
> 时间：2012-09-25T13:10:25.607
> 
> 标签：java, multithreading, tomcat, servlets

无论如何配置tomcat以将线程保留给特定的servlet或webservice？我知道这可能可以在 servlet 过滤器中以编程方式完成。

所以假设我使用 250 个服务线程的默认配置，但我希望为特定的 servlet/webservice 保留其中的 20 个？

也许这显然是不可能的——如果可以的话，有人可以解释一下原因吗？

我正在使用tomcat 6。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T13:16:24.600

根据 servlet 规范，这是不可能的。但是在 Tomcat 中，您可以定义在不同端口上运行的多个连接器。每个连接器都有一个单独的线程池：

```
<Connector port="8081" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="10443" /> 
```

您将在 Tomcat的`server.xml`文件下找到如何配置线程池的示例。`/conf`

现在您可以使用 8080（默认）和 8081（上面配置）访问您的 Web 应用程序。通过 8081 的请求将使用不同的线程池。您现在所要做的就是将所有 servlet 路由到 8080，并将您的特定线程路由到 8081（使用完全独立的线程池）。

如果您不希望有人滥用此功能，请添加一个 servlet 过滤器以根据请求的 URI 检查是否使用了正确的端口。

* * *

但是阅读您的理由：

> 我有一个特定的同步服务，它锁定了很多服务线程

您最好启动和管理自己的线程池（请参阅[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)）并使用异步 servlet。更简单和便携。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-09-25T13:12:43.030

你为什么要这样做？

Tomcat 可以很好地处理线程，如果达到最大值，则无论如何都需要增加最大值。那么保留一些有什么好处呢？保留一些只是意味着您可以更快地达到最大值，并且在不需要时不会有效地使用它们。

简而言之，不要这样做。

# java - 如何在 Android 中设置 SwitchPreference 的默认值？

> ID：12583695
> 
> 赞同：7
> 
> 时间：2012-09-25T13:10:32.970
> 
> 标签：java, android, android-preferences

有没有人使用`SwitchPreference`过 Android 的类并且知道如何设置默认值？我以编程方式实现了它：

```
SwitchPreference switch = new SwitchPreference(this);
switch.setKey("preference_my_key");
switch.setTitle(R.string.preference_title_my_title);
switch.setSummary(R.string.preference_summary_my_summary);
Boolean isChecked = Manager.myMethodIsChecked(MyActivity.this);
switch.setChecked( isChecked ); 

switch.setOnPreferenceChangeListener(new OnPreferenceChangeListener()  {                
    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
    try {
            boolean selected =   Boolean.parseBoolean(newValue.toString());      
        if ( !selected ) {
            //do something
        }
    } catch (Throwable e) {
       e.printStackTrace();
    }               
   return true;
   }
});         
category.addPreference(switch); 
```

首选项将所有值保存到其 XML 文件中：`app_package_name_preferences.xml`. 第一次加载应用程序时，开关具有默认的“ **false** ”值。但有时我需要将默认值设为“ **true** ”。我尝试了几种方法，但没有任何效果。

```
switch.setChecked( true );  
switch.setDefaultValue(true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:49:33.310

正如我所说，我以编程方式编写首选项：

```
PreferenceScreen root = getPreferenceManager().createPreferenceScreen(this);
PreferenceCategory catView = new PreferenceCategory(this);
catView.setTitle(R.string.preference_category_view);
root.addPreference(catView);

final SwitchPreference switchSplash= new SwitchPreference(this);
switchSplash.setKey(PreferenceKeys.SPLASH); 

//-----the above code----
switchSplash.setChecked(false);       // LINE 1
catView.addPreference(switchSplash);  // LINE 2 
```

在调试时我发现`true`值是在*LINE 1*中设置的，但是当我添加`switchSplash`到时`catView`，值`switchSplash`被重置为`false`，因为`catView`从preferences.xml 设置值。
这就是为什么我将所有需要的值更改为 XML

```
SharedPreferences.Editor editor = root.getPreferenceManager().getSharedPreferences().edit();
editor.putBoolean(PreferenceKeys.SPLASH, true);  
editor.commit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-11T11:03:07.063

您可以使用您的 XML 属性`android:defaultValue="true"`将`<SwitchPreference />`默认值设置为 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:35:13.937

如果您试图从 newValue 中取出布尔值

```
 boolean selected =   Boolean.parseBoolean(newValue.toString()); 
```

你以一种奇怪的方式去做这件事，我猜是不正确的。如果 newValue 是一个布尔值，（使用 instanceof 检查）那么只需将 newValue 转换为一个布尔值。

```
 boolean selected =   (Boolean) newValue; 
```

这就是你想要达到的目标吗？

# microsoft-metro - 如何使用 JavaScript 在 Metro 应用程序中显示相机预览

> ID：12583699
> 
> 赞同：0
> 
> 时间：2012-09-25T13:10:41.380
> 
> 标签：microsoft-metro

我有 [**StartPreviewAsync**](http://msdn.microsoft.com/en-US/library/windows/apps/windows.media.capture.mediacapture.startpreviewasync) api 在 C# 屏幕上显示相机预览

但在 javascript 中不可用，那么如何在 javascript 模板中获得相同的预览（输出）？

或者有什么方法可以在 javascript 上部署 xaml 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:47:44.563

WinJS 似乎有一个不同的 API 来处理相机预览。我将在 MSDN 上查看[此示例以获取更多详细信息。](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)即，在 BasicCapture.js 中，我们看到以下函数 startPreview：

```
function startPreview() { 
    displayStatus("Starting preview"); 
    id("btnStartPreview" + scenarioId).disabled = true; 
    var video = id("previewVideo" + scenarioId); 
    video.src = URL.createObjectURL(mediaCaptureMgr, { oneTimeOnly: true }); 
    video.play(); 
    displayStatus("Preview started"); 
    getCameraSettings(); 
    // Initialize sliders. 
    for (var i = 0; i < cameraControlSliders.length; i++) { 
        cameraControlSliders[i].slider.disabled = false; 
        initSlider(cameraControlSliders[i]); 
    } 
} 
```

要回答您的第二个问题，将 Javascript 加载到 XAML 应用程序的唯一方法是通过 WebView 控件，即使这样也不允许直接控制 XAML UI 的不同控件。如果你想做 XAML，你必须坚持使用 C#、VB 或 C++。

# python - 45个十六进制数字或48个十六进制数字的模式的正则表达式 - Python

> ID：12583702
> 
> 赞同：4
> 
> 时间：2012-09-25T13:10:51.303
> 
> 标签：python, regex

我的文件包含 45 个十六进制数字，由空格分隔或 48 个十六进制数字，由空格分隔。我需要所有这些数字单独而不是整体。我目前正在使用蛮力方法来获得 45 个数字。

```
pattern = re.compile("([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s([0-9a-f]{2})\s") 
```

但是，即使这样，我仍然无法弄清楚如何在 48 十六进制数字实例中提取剩余的三个数字。你能帮我简化这个问题吗？

我会避免像下面这样的解决方案（如果它有效则没有尝试过），因为我稍后将不得不为每个实例拆分字符串，即考虑到它可以提供正确的输出！

```
(((?:[0-9a-f]{2})\s){48})|(((?:[0-9a-f]{2})\s){45}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:31:19.067

编写长 RE 时，请考虑使用[`re.VERBOSE`](http://docs.python.org/howto/regex.html#using-re-verbose)使它们更具可读性。

```
pattern = re.compile(r"""
 ^( [0-9a-fA-F]{2} (?: \s [0-9a-fA-F]{2} ){44}
                (?:(?: \s [0-9a-fA-F]{2} ){3} )? )$ 
""", re.VERBOSE) 
```

读作：两个十六进制数字，后跟 44 次（空格后跟两个十六进制数字），可选地后跟 3 次（空格后跟两个十六进制数字）。

测试：

```
>>> pattern.match(" ".join(["0f"] * 44))
>>> pattern.match(" ".join(["0f"] * 45))
<_sre.SRE_Match object at 0x7fd8f27e0738>
>>> pattern.match(" ".join(["0f"] * 46))
>>> pattern.match(" ".join(["0f"] * 47))
>>> pattern.match(" ".join(["0f"] * 48))
<_sre.SRE_Match object at 0x7fd8f27e0990>
>>> pattern.match(" ".join(["0f"] * 49)) 
```

最后，要检索单个数字，请`.group(0).split()`在匹配结果上执行。这比编写一个将所有数字分成不同组的 RE 要容易得多。

**编辑**：好的，这是解决原始问题的方法。只需动态构建 RE。

```
chunk = r"""([0-9a-fA-F]{2}\s)"""
pattern = re.compile(chunk * 45 + "(?:" + chunk * 3 + ")?") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T13:21:24.180

使用两种模式不是更容易吗？这样您就不需要复杂的逻辑来处理子组。

```
pattern1 = re.compile("([0-9a-f]{2}\s){45}")
pattern2 = re.compile("([0-9a-f]{2}\s){48}") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T13:40:31.237

我相信您可能正在寻找的是[re.findall](http://docs.python.org/library/re.html)

取决于该字符串的其余部分的外观..这对我有用，可以让我获得每个十六进制的字符串列表

```
import re
reg = re.compile("[0-9a-f]{2}\s")
hexes = "ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12 ab 12"
hexList = re.findall(reg, hexes) 
```

这将为您提供所有 2 个字符十六进制的**列表**。从那里将其拆分为 45/48 是微不足道的，具体取决于您从中获取的字符串中的其他类型的数据。

但是，如果字符串中有大量数据，这将不起作用。

或者，虽然你说你不想这样做，但做这样的事情确实很简单：

```
reg = re.compile("([0-9a-f]{2}\s){45,48}") #Edit: Missed an open paren
match = reg.search(hexes)
if match:
    splitList = match.group().split() 
```

然后你有一个所有数字的列表，很好地分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:10:22.677

我喜欢你的硬连线方法（即满足你的特定需求），但我会通过乘法生成模式字符串。我的示例需要 3 人一组和 5 人一组（只是为了更容易测试）：

```
pattern = re.compile(r'(?:' +
  r'\s+'.join([ r'([a-f0-9]{2})' ] * 5) +
  r')|(?:' +
  r'\s+'.join([ r'([a-f0-9]{2})' ] * 3) +
  r')')
m1 = pattern.match('ab cd ef')
m2 = pattern.match('ab cd ef 34 56') 
```

结果`m.groups()`将类似于`(None, None, None, None, None, 'ab', 'cd', 'ef')`3`('ab', 'cd', 'ef', '34', '56', None, None, None)`组和 5 组。因此您可以检查是否`m.groups()[0]`为 None 以找到您获得的版本（45 或 48），然后使用 groups()[:48] 或组（）[48：]。

确保在较小的数字 (45) 之前有较大的数字 (48)。

如果您有办法知道一个十六进制数组的结束位置和下一个组的开始位置，则此模式当然可以与`findall`、`search`、或类似方法一起使用。`finditer`在这个例子中，十六进制数之间的空格必须是空格或制表符，其他东西（如换行符）将十六进制数组彼此分开：

```
pattern = re.compile(r'(?:' +
  r'[ \t]+'.join([ r'([a-f0-9]{2})' ] * 5) +  # replaced \s by [ \t]
  r')|(?:' +
  r'[ \t]+'.join([ r'([a-f0-9]{2})' ] * 3) +
  r')')
print [ i.groups() for i in pattern.finditer(
    'ab cd ef 34 56\nab cd ef 34 56\nab cd ef\nab cd ef\n') ] 
```

→</p>

```
[ ('ab', 'cd', 'ef', '34', '56', None, None, None),
  ('ab', 'cd', 'ef', '34', '56', None, None, None),
  (None, None, None, None, None, 'ab', 'cd', 'ef'),
  (None, None, None, None, None, 'ab', 'cd', 'ef') ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:17:12.213

可以考虑使用`re.findall`吗？

```
>>> import re
>>> pat = r'([0-9A-Fa-f]+)'
>>> s= '45f 567B 45C67'
>>> for i in re.findall(pat, s):
    print i

45
567B
45C67 
```

使用此方法，无论您的文件中有多少个数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T13:31:08.993

如果您知道该文件包含十六进制数据，只需将整个文件读入一个字符串，然后将其拆分为空格。这适用于 45、48 或任何其他数字。

```
import re
splitter = re.compile('\s+')
data = splitter.split(file(filename,'r').read()) 
```

# c++ - SwitchDesktop 暂时工作，但片刻后切换回来

> ID：12583708
> 
> 赞同：5
> 
> 时间：2012-09-25T13:11:02.043
> 
> 标签：c++, windows, winapi

我有一些代码可以创建一个新桌面并在该桌面中启动一个进程。

一些选择 Windows XP 机器，当这段代码运行时，我可以看到它切换到新桌面并启动该过程，但几乎立即，桌面切换回正常桌面。

这段代码在大约 98% 的机器上运行良好，我似乎无法找出任何原因导致它在其他机器上不起作用。

应该`SwitchDesktop`靠谱吗？我可以挂钩`SwitchDesktop`可能从另一个应用程序调用的调用吗？

我的代码：

```
int DLL_EXP_IMP WINAPI Process_Desktop(char *szDesktopName, char *szPath)
{
    HDESK   hOriginalThread;
    HDESK   hOriginalInput;
    HDESK   hNewDesktop;
    int procSuccess;
    // Save original ...
    hOriginalThread = GetThreadDesktop(GetCurrentThreadId());
    hOriginalInput = OpenInputDesktop(0, FALSE, DESKTOP_SWITCHDESKTOP);

    // Create a new Desktop and switch to it
    hNewDesktop = CreateDesktop(szDesktopName, NULL, NULL, DF_ALLOWOTHERACCOUNTHOOK, GENERIC_ALL, NULL);
    SetThreadDesktop(hNewDesktop);
    SwitchDesktop(hNewDesktop);

    // This call blocks until the process exits, and is confirmed to work on the affected machines
    procSuccess = StartProcess(szDesktopName, szPath);

    // Restore original ...
    SwitchDesktop(hOriginalInput);
    SetThreadDesktop(hOriginalThread);

    // Close the Desktop
    CloseDesktop(hNewDesktop);

    if (procSuccess != 0)
    {
        return procSuccess;
    }
    else
    {
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T16:45:09.973

SwitchDesktop 失败（大部分时间是访问被拒绝，或者由于另一个桌面中的现有句柄而出现错误 170），或者有另一个程序切换回默认桌面。

我知道雅虎工具栏做到了这一点（版本 5-6-7，也许他们现在已修复）；KABE4.exe（我不知道这是什么）、Acronis 程序（备份调度程序、AFAIK）等等。所有这些都在没有任何用户干预的情况下调用 SwitchDesktop（一个很大的禁忌）。

我为雅虎工具栏证明了这一点；通过将另一个 dll 注入 yt.dll（由 IE 加载）并从挂钩调用返回 FALSE 来挂钩 SwitchDesktop 解决*了我的*问题。

大约 2 年前发送给雅虎的概念证明至今仍未得到答复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T16:11:19.793

我的猜测是 SetThreadDesktop() 失败。

来自 MSDN：“如果调用线程在其当前桌面上有任何窗口或挂钩，则 SetThreadDesktop 函数将失败（除非 hDesktop 参数是当前桌面的句柄）。”

您提到 StartProcess() 会阻塞，直到进程终止。因此，没有人引用新桌面，因此桌面将消失。

您可能需要考虑在 C++ 中包装易出错的系统调用——在它们失败时抛出异常。当然，CreateDesktop/CloseDesktop 对属于 C++ 资源包装器。这是2013年！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T19:25:57.453

在您发布的代码中，有那部分：

```
// Create a new Desktop and switch to it
    hNewDesktop = CreateDesktop(szDesktopName, NULL, NULL, DF_ALLOWOTHERACCOUNTHOOK, GENERIC_ALL, NULL);
    SetThreadDesktop(hNewDesktop);
    SwitchDesktop(hNewDesktop);

    // This call blocks until the process exits, and is confirmed to work on the affected machines
    procSuccess = StartProcess(szDesktopName, szPath);

    // Restore original ...
    SwitchDesktop(hOriginalInput);
    SetThreadDesktop(hOriginalThread); 
```

您对 StartProcess 函数的调用介于对 SwitchDesktop 的两次调用之间。此代码中没有函数停止（暂停）或延迟正在运行的代码、线程或进程，因此当您切换到 hNewDesktop 时，您会立即切换回 hOriginalInput。您应该在调用 StartProcess 之后和第二次调用 SwitchDesktop 之前添加一个带有结束条件的 while 循环。我不知道 while 循环的结束条件是什么，但你知道，你会选择，毕竟这是你的程序。

例如，您可以使用 GetKeyState 或 GetAsyncKeyState 函数来检查键盘上按下了哪个键，并将其作为 while 循环的结束条件，因此当您按下该键时，您将立即返回原来的桌面！

# symfony - Symfony2 - 编码 url 参数，如斜线、点和加号

> ID：12583709
> 
> 赞同：1
> 
> 时间：2012-09-25T13:11:03.127
> 
> 标签：symfony, routing, special-characters, urlencode

我对 symfony2(2.0.16) 路由有问题。

我尝试运行 2 条路线，例如

```
route1:
  host/my/route/{param}
    requirements: 
      param: ".*[^/]$"
route2:
  host/my/route/category/{param}
    requirements: 
      param: ".*[^/]$" 
```

可以想象，无论如何都不会调用第二条路线。

我真正想做的是搜索和专门搜索，因此我还需要允许点、加号和斜杠..

我尝试对斜杠进行编码（urlencode 为 %2F 或 %252F），以便我可以更改要求，但 symfony 总是在路由之前对其进行解码，所以如果我删除要求，我会收到路由错误。

我考虑过使用base64编码，但这不能解决我的问题..

编辑：我也不能依赖路线的顺序，因为我从许多不同的包中导入路线..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:15:01.247

```
#This one before the other to be considered !
route2:
  host/my/route/category/{param}
    requirements: 
      param: ".+"

route1:
  host/my/route/{param}
    requirements: 
      param: ".+" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T21:50:22.233

您的第一条路线的参数不能是`category`否则它将匹配它而不是忽略它。您可以更改正则表达式以忽略此值：

```
route1:
  host/my/route/{param}
    requirements: 
      param: "(?!category/).*[^/]$"
route2:
  host/my/route/category/{param}
    requirements: 
      param: ".*[^/]$" 
```

现在，一个`category`后跟斜线的参数将被忽略，并且模式将不匹配，除了第二条路线。

# mkmapview - ios6 MapKit 的新功能 mkmapview

> ID：12583711
> 
> 赞同：-3
> 
> 时间：2012-09-25T13:11:15.697
> 
> 标签：mkmapview, ios6

iOS 6 中的 MapKit api 有什么新功能？

任何地方的链接/教程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:33:41.750

你在 Apple 的开发者网站上看了多远？

[https://developer.apple.com/library/ios/#releasenotes/General/iOS60APIDiffs/index.html#//apple_ref/doc/uid/TP40011959](https://developer.apple.com/library/ios/#releasenotes/General/iOS60APIDiffs/index.html#//apple_ref/doc/uid/TP40011959)

# java - 在junit4中找不到测试

> ID：12583717
> 
> 赞同：1
> 
> 时间：2012-09-25T13:11:31.427
> 
> 标签：java, junit, junit4

我正在尝试使用 Junit4 i 使用以下类

```
public class Example extends TestCase {

    public Example(String name) {
        super(name);
    }
    @Test
    public void exampletest() {
        //TO DO
    }
}

@RunWith(Suite.class)
@SuiteClasses({ Example.class })
public class Tests {
    TestSuite tests = new TestSuite();
        tests.addTest(new Example("exampletest"));  
} 
```

它给了我没有在 junit4 异常中找到测试有人可以告诉我为什么我得到这个异常或者举一个例子怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:07:30.863

在 JUnit4 中，您不会让您的测试用例扩展*TestCase*。但是如果你这样做了，那么你的*@Test*注释将被忽略，你必须在 test 前面加上测试方法*名称*。试试这个代码：

例子.java：

```
import org.junit.Test;
public class Example {
    @Test
    public void exampletest() {
        //TO DO
    }
} 
```

测试.java：

```
@RunWith(Suite.class)
@SuiteClasses({ Example.class })
public class Tests {
} 
```

# jquery - 标签旋转在 IE 中有效，但在使用 jquery 旋转的 chrome 中无效

> ID：12583721
> 
> 赞同：0
> 
> 时间：2012-09-25T13:11:48.243
> 
> 标签：jquery, rotation

我正在使用插件[http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate3.js](http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate3.js)来旋转我项目中的任何对象。这在 IE 中适用于标签旋转，但在 chrome 中同样不起作用。？请对任何解决方案发表任何评论。我已经尝试在 div 和旋转 div 中添加标签，但是这样我在旋转后没有得到正确的高度/宽度。

检查这个 - [http://jsfiddle.net/73pXD/2909/](http://jsfiddle.net/73pXD/2909/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:22:14.630

添加`display:inline-block;`到您的`#LogoText1`CSS。看起来 chrome 不能应用于`transform:rotate(...)`内联元素。

```
#LogoText1{
  margin:100px 100px;
  display:inline-block;
} 
```

[更新了 JSFiddle](http://jsfiddle.net/73pXD/2913/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:27:05.280

知道 jQueryRotate3 处于实验阶段，并且以前的版本`img`仅用于标签，以后可能会添加对标签的支持。

同时，内联标签不会轻易旋转。我找到并使用的唯一解决方案是稍微更改标签的样式。尝试`display:block;position:absolute`在旋转之前添加标签样式。

由于您在谈论不正确的高度和宽度，请在制作标签之前使用`outerWidth()`和定义标签的大小。并且可能添加一个缓冲区以通过添加一个与您检索的相同大小来继续占用它所占用的空间。`outerHeight()``block``span``display inline-block`

# iphone - Xcode 4.5 意外退出

> ID：12583725
> 
> 赞同：6
> 
> 时间：2012-09-25T13:12:05.523
> 
> 标签：iphone, xcode

退出并重新启动，退出并重新启动，...，多次。我得到了如下所示的日志：

```
Process:         Xcode [1156]
Path:            /Users/USER/Desktop/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5 (1839)
Build Info:      IDEApplication-1839000000000000~3
Code Type:       X86-64 (Native)
Parent Process:  launchd [150]
User ID:         502

Date/Time:       2012-09-25 21:02:15.533 +0800
OS Version:      Mac OS X 10.8 (12A269)
Report Version:  10

Interval Since Last Report:          1620650 sec
Crashes Since Last Report:           66
Per-App Interval Since Last Report:  209706 sec
Per-App Crashes Since Last Report:   62
Anonymous UUID:                      410E9490-9BA7-4C02-8213-2D855F72E50B

Crashed Thread:  1  Dispatch queue: com.apple.root.default-priority

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G182
ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-1877/Framework/Classes/Model/SourceControl/IDESourceControlWorkspaceMonitor.m:1054
Details:  Attempted to add repository (IDESourceControlRepository) Name:xuexi@192.168.0,     Type:Subversion,
 Location:svn://xuexi@192.168.0.109 when (IDESourceControlRepository)   Name:xuexi@192.168.0, 
Type:Subversion, 
Location:svn://xuexi@192.168.0.109 already existed.
Object:   <IDESourceControlWorkspaceMonitor: 0x408e59140>
Method:   -_findWorkingTreesForFilePath:
Thread:   <NSThread: 0x40937d480>{name = (null), num = 11}
Hints:   None
Backtrace:
  0  0x00000001075167ef -[IDEAssertionHandler   handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x00000001067e02a5 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x0000000107073cfd __block_global_5 (in IDEFoundation)
  3  0x00007fff93f9acac -[NSBlockOperation main] (in Foundation)
  4  0x00007fff93f70bb6 -[__NSOperationInternal start] (in Foundation)
  5  0x00007fff93f783d1 __block_global_6 (in Foundation)
  6  0x00007fff8c07bf3d _dispatch_call_block_and_release (in libdispatch.dylib)
  7  0x00007fff8c0780fa _dispatch_client_callout (in libdispatch.dylib)
  8  0x00007fff8c07923e _dispatch_worker_thread2 (in libdispatch.dylib)
  9  0x00007fff942f6ceb _pthread_wqthread (in libsystem_c.dylib)
 10  0x00007fff942e11b1 start_wqthread (in libsystem_c.dylib)

objc[1156]: garbage collection is ON
abort() called 
```

真的需要帮助！

# c# - 发布用户名并在网站（travian）中自动传递并登录

> ID：12583734
> 
> 赞同：0
> 
> 时间：2012-09-25T13:12:35.037
> 
> 标签：c#, login

这是登录页面：[http ://ts14.travian.com.sa/nachrichten.php](http://ts14.travian.com.sa/nachrichten.php)

我希望程序从文本框和我简单的浏览器中发布用户名和密码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate(textBox1.Text);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            webBrowser1.Navigate("http://ts14.travian.com.sa");
            textBox1.Text = "متصفح خاص بترافيان";
        }

        private void button5_Click(object sender, EventArgs e)
        {
            webBrowser1.GoBack();
        }

        private void button4_Click(object sender, EventArgs e)
        {
            webBrowser1.GoForward();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate(label1.Text);
        }

        private void button2_Click(object sender, EventArgs e)
        {
            webBrowser1.Refresh();
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void button6_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate("http://ts14.travian.com.sa/logout.php");
        }

        private void button7_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate(textBox2.Text);

        }

        private void closeToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void tabPage2_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

我需要做什么才能让浏览器登录游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:18:05.703

您需要向[http://ts14.travian.com.sa/dorf1.php](http://ts14.travian.com.sa/dorf1.php)发出 POST HTTP 请求，传递所需的表单变量。您需要了解他们如何处理登录请求。你可以尝试这样的事情：

```
 StreamWriter Sw = null;
            StreamReader Sr = null;
            string sUsername = "aUsername";
            string sPassword = "aValidPass";

            string data = string.Format("name={0}&password={1}", sUsername, sPassword);

            HttpWebRequest Req = (HttpWebRequest)WebRequest.Create("http://ts14.travian.com.sa/dorf1.php");
            Req.Method = "POST";
            Req.KeepAlive = true;

            ASCIIEncoding encoding = new ASCIIEncoding();
            byte[] byte1 = encoding.GetBytes(data);
            Req.ContentType = "application/x-www-form-urlencoded";
            Req.ContentLength = byte1.Length;
            Stream newStream = Req.GetRequestStream();
            newStream.Write(byte1, 0, byte1.Length);
            newStream.Close();

            Sr = new StreamReader(((HttpWebResponse)Req.GetResponse()).GetResponseStream());
            sResponse = Sr.ReadToEnd();
            int cookieCount = cookieJar.Count;
            Sr.Close();
            Sw = null; 
```

一旦您成功登录（解析变量 sResponse），您就可以重定向到该页面。

但请记住……您的会话将仅存在于运行应用程序的机器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:39:00.337

thx man，我找到了一种方法，通过检测 HtmlelementId 然后像这样更改它的值

{

```
 HtmlElement ele = webBrowser1.Document.GetElementById("usernameID"); if (ele != null)
            ele.InnerText = "username"; 

        ele = webBrowser1.Document.GetElementById("passwordID"); if (ele != null)
            ele.InnerText = "password";

        ele = webBrowser1.Document.GetElementById("goButtonID"); if (ele != null)
            ele.InvokeMember("click"); 
```

它工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T10:33:25.913

您需要向[http://www.weedi.net/vb/f-127/29251/](http://www.weedi.net/vb/f-127/29251/)发出 POST HTTP 请求，传递所需的表单变量。您需要了解他们如何处理登录请求。你可以尝试这样的事情：

```
 StreamWriter Sw = null;
        StreamReader Sr = null;
        string sUsername = "aUsername";
        string sPassword = "aValidPass";

        string data = string.Format("name={0}&password={1}", sUsername, sPassword);

        HttpWebRequest Req = (HttpWebRequest)WebRequest.Create("http://ts14.travian.com.sa/dorf1.php");
        Req.Method = "POST";
        Req.KeepAlive = true;

                                                                    . 
```

# linux - 在linux中，如何确保代码序列在没有任何中断的情况下执行

> ID：12583737
> 
> 赞同：5
> 
> 时间：2012-09-25T13:12:42.760
> 
> 标签：linux, linux-kernel, linux-device-driver

我有一个程序可以切换 GPIO 引脚高/低，并在高低之间有延迟（使用`udelay`），然后在一段时间内对 GPIO 状态进行采样。我需要确保这部分代码的执行不会被调度程序或任何可能的中断抢占。我在双核 ARM 系统上运行代码，所以它应该是 SMP。对于这样的目的是否`Spin_Lock_IrqSave()`足够安全？我有一种感觉，我的代码仍然偶尔会被打断，但还没有证据。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:31:19.067

如果要禁用抢占，请使用`preempt_disable()`和`preempt_enable()`。如果要禁用中断，请使用`local_irq_disable()`和`local_irq_enable()`

`spin_lock_irqsave` 通常会同时执行这两项操作，尽管某些“实时”增强功能有时允许自旋锁进行调度，因此最好说出您的意思。

# qt - 如何将两个 QColor 对象与 alpha 通道结合起来？

> ID：12583738
> 
> 赞同：2
> 
> 时间：2012-09-25T13:12:55.513
> 
> 标签：qt, alpha

我有已经确定边框颜色的对象。

现在我希望用户至少能够设置填充图案的不透明度。例如，边框是蓝色的。用户将不透明度设置为 128，因此填充图案也以蓝色绘制，但半透明。

下一步是允许用户稍微调整图案的颜色。例如：“使用边框颜色，但使其半透明（alpha=128）和一点点黄色。”。

有没有一种（有用的）方法可以组合两种颜色，其中一种颜色没有设置 alpha 值？或者在原始颜色上设置一个 alpha 值并将其与也设置了 alpha 值的“叠加颜色”结合起来是否更有意义？

是否有一个函数（或者其他人可以给出一个简短的代码片段）来组合两个 QColor 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:30:14.780

我会查看现有的颜色选择器（Gimp、Photoshop、Paint、[wwWidgets](http://www.wysota.eu.org/wwwidgets/#gallery)）。他们中的大多数处理几种不同的颜色选择方法：

饱和度、色调、值、亮度、对比度、RGB、CMYK、HSV、Alpha/不透明度。

Qt 开箱即用地处理了这些：

[QColor](http://qt-project.org/doc/qt-4.8/QColor.html#details)

为了组合两种颜色，我可能会将它们的不同成分平均在一起：

```
// Rough pseudocode

Color1 RGBA, Color 2 RGBA, Color 3 = combination

Color3.R = (Color1.R + Color2.R)/2
Color3.G = (Color1.G + Color2.G)/2
Color3.B = (Color1.B + Color2.B)/2
Color3.A = (Color1.A + Color2.A)/2 
```

我希望这会有所帮助。

PS：了解[色彩空间](http://en.wikipedia.org/wiki/Color_space)也很有帮助。

# objective-c - 使用Objective C将大字节数组转换为数字字符串

> ID：12583739
> 
> 赞同：3
> 
> 时间：2012-09-25T13:13:05.077
> 
> 标签：objective-c, biginteger

我面临一个问题，我需要将大小在 20 - 28 字节范围内的字节数组转换为可打印的数字字符串。在 Java 中，我可以使用 BigInteger 类轻松完成。在 Objective C 中，最大的类型是 Long Long Int，它只有 64 位。请指导我解决问题的方法。我不擅长 C 语言，但一些例子会很有帮助。我必须承认，如果 Java 中也不存在 BigInteger 类，我在 Java 中也会遇到同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:40:02.500

检查此来源： [http ://www.santsys.com/code/display?folder=Objective-C&file=BigInt.h](http://www.santsys.com/code/display?folder=Objective-C&file=BigInt.h)

**编辑：**

检查[BitInt类](http://www.santsys.com/code/display?folder=Objective-C&file=BigInt.h)，Objective-C中的一个大整数实现，所以你不需要使用C来解决你的问题，它的方法类似于Java。

# c# - 使用带内连接的存储过程计算数据库中的数据

> ID：12583742
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:13:08.863
> 
> 标签：c#, asp.net

我在计算带有内部连接的数据时遇到问题。

我想计算有多少小屋可用，这是我的表格：

![在此处输入图像描述](../Images/8df1bd866c95781f7d73714b9cc1f3a4.png)

![在此处输入图像描述](../Images/f395300815f22f67de2404d297b50ad2.png)

这是我在课堂上获取小屋号码的代码。

```
public void CheckCottages()
 {
     con.Close();
     SqlCommand comUmbrella = new SqlCommand("CountCottages", con);
     comUmbrella.CommandType = CommandType.StoredProcedure;
     comUmbrella.Parameters.Add("@CottageType", SqlDbType.NVarChar).Value = "Umbrella";
     comUmbrella.Parameters.Add("@ReservedDate", SqlDbType.DateTime).Value = this.ARRIVAL;
     con.Open();
     comUmbrella.ExecuteNonQuery();
     drUmbrella = comUmbrella.ExecuteReader();
     if (drUmbrella.Read())
     {
         this.UMBRELLA = drUmbrella.GetInt32(drUmbrella.GetOrdinal("Rows"));
     }
     con.Close();
     SqlCommand comNativeKubo = new SqlCommand("CountCottages", con);
     comNativeKubo.CommandType = CommandType.StoredProcedure;
     comNativeKubo.Parameters.Add("@CottageType", SqlDbType.NVarChar).Value = "Native Kubo";
     comNativeKubo.Parameters.Add("@ReservedDate", SqlDbType.DateTime).Value = this.ARRIVAL;
     con.Open();
     comNativeKubo.ExecuteNonQuery();
     drKubo = comNativeKubo.ExecuteReader();
     if (drKubo.Read())
     {
         this.NATIVEKUBO = drKubo.GetInt32(drKubo.GetOrdinal("Rows"));
     }
     con.Close();
     SqlCommand comTreeHouse = new SqlCommand("CountCottages", con);
     comTreeHouse.CommandType = CommandType.StoredProcedure;
     comTreeHouse.Parameters.Add("@CottageType", SqlDbType.NVarChar).Value = "Tree house";
     comTreeHouse.Parameters.Add("@ReservedDate", SqlDbType.DateTime).Value = this.ARRIVAL;
     con.Open();
     comTreeHouse.ExecuteNonQuery();
     drTree = comTreeHouse.ExecuteReader();
     if (drTree.Read())
     {
         this.TREEHOUSE = drTree.GetInt32(drTree.GetOrdinal("Rows"));
     }
     con.Close();
     SqlCommand comPavillion = new SqlCommand("CountCottages", con);
     comPavillion.CommandType = CommandType.StoredProcedure;
     comPavillion.Parameters.Add("@CottageType", SqlDbType.NVarChar).Value = "Pavillion";
     comPavillion.Parameters.Add("@ReservedDate", SqlDbType.DateTime).Value = this.ARRIVAL;
     con.Open();
     comPavillion.ExecuteNonQuery();
     drPavillion = comPavillion.ExecuteReader();
     if (drPavillion.Read())
     {
         this.PAVILLION = drPavillion.GetInt32(drPavillion.GetOrdinal("Rows"));
     }
 } 
```

这是我的存储过程：

```
ALTER PROCEDURE dbo.CountCottages
(
    @CottageType nvarchar(50),
    @ReservedDate datetime
)

AS
SELECT count(dbo.Cottages.CottageName)
FROM dbo.Cottages INNER JOIN
dbo.ResortTransactions ON dbo.Cottages.CottageID = dbo.ResortTransactions.CottageID
where dbo.Cottages.CottageType=@CottageType and dbo.ResortTransactions.Status != 'Cancelled' and dbo.ResortTransactions.ReservedDate != @ReservedDate

RETURN 
```

我的代码有什么问题？我希望有一个人可以帮助我 ：）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:23:51.827

由于没有太多关于*如何*使用您的数据的信息，这里是一个猜测。我假设您想要一个有交易的小屋计数，其中 1) 状态未取消，2) 日期等于预订日期。如果是这样，这是查询：

```
SELECT count(dbo.Cottages.CottageName)
    FROM dbo.Cottages 
    WERE CottageType=@CottageType 
        AND CottageID NOT IN
        (SELECT CottageID FROM dbo.ResortTransactions
         WHERE Status != 'Cancelled' 
         AND ReservedDate = @ReservedDate) 
```

此外，您正在执行存储过程两次 - 一次使用`ExecuteNonQuery`和一次使用`ExecuteReader`您应该*返回*一个值并使用`ExecuteNonQuery`，创建一个参数来存储返回值，或者使用`ExecuteScalar`快速从数据集中提取第一个结果。

我建议阅读更多关于基本 SQL 以及如何使用 .NET 执行查询的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:23:36.573

您不返回`COUNT`.

声明一个变量，用结果初始化它并从过程中返回它：

```
ALTER PROCEDURE dbo.CountCottages
(
    @CottageType nvarchar(50),
    @ReservedDate datetime
)
AS
BEGIN

DECLARE @NumCottages int
SELECT @NumCottages = count(dbo.Cottages.CottageName)
FROM dbo.Cottages INNER JOIN
dbo.ResortTransactions ON dbo.Cottages.CottageID = dbo.ResortTransactions.CottageID
where dbo.Cottages.CottageType=@CottageType and dbo.ResortTransactions.Status != 'Cancelled' and dbo.ResortTransactions.ReservedDate != @ReservedDate

RETURN @NumCottages

END 
```

然后使用[`SqlCommand.ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)代替`ExecuteNonQuery`来获取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:23:44.177

`Cmd.ExeceuteNonQuery()`通常用于执行过程而不期望返回结果。但是在这里你正在寻找一个标量值。所以将它更改为`cmd.ExecuteScalar()`。同时从过程中返回计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:36:48.593

我会做一些假设——只是一个小技巧，在玩这个的时候我会在 SQL 查询中创建一个“便签本”并使用表变量进行测试，如下所示：

```
DECLARE @Cottages AS TABLE
    (
      Cottage_PK INT IDENTITY(1, 1) ,
      CottageName VARCHAR(100) ,
      CottageType VARCHAR(100)
    )
DECLARE @Reservations AS TABLE
    (
      Reservation_PK INT IDENTITY(1, 1) ,
      Cottage_FK INT ,
      CheckinDate DATETIME ,
      DepatureDate DATETIME ,
      IsCanceled BIT
    )
DECLARE @DateToCheck AS DATETIME ,
    @CottageType AS VARCHAR(100)
SET @DateToCheck = '2012-09-15'
SET @CottageType = 'Some Type'
INSERT  INTO @Cottages
        ( CottageName, CottageType )
VALUES  ( 'CottageA', 'Some Type' )
INSERT  INTO @Reservations
        ( Cottage_FK ,
          CheckinDate ,
          DepatureDate ,
          [Status]
        )
VALUES  ( 1 , -- Cottage_FK - int
          '2012-09-16' , -- CheckinDate - datetime
          '2012-09-24' ,  -- DepatureDate - datetime
          ''
        ) 
```

现在我假设如果您想检查某个日期可用的小屋，您需要根据入住日期和出发日期进行检查，这会导致使用`between`声明。

```
SELECT  COUNT(c.CottageName) AS 'Cottages availible'
FROM    @Cottages c
        INNER JOIN @Reservations r ON c.Cottage_PK = r.Cottage_FK
WHERE   NOT @DateToCheck BETWEEN r.CheckinDate
                         AND     r.DepatureDate
        AND c.[status] != 'Cancelled'
        AND c.CottageType = @CottageType 
```

使用它进行测试 - 我在它返回 0 的范围内传递了一个日期，并且它返回了 1。一旦你很高兴将它移动到你的存储过程。

```
CREATE PROCEDURE dbo.CountCottages
    @DateToCheck DATETIME ,
    @CottageType VARCHAR(100)
AS 
    SELECT  COUNT(c.CottageName) AS 'Cottages availible'
    FROM    Cottages c
            INNER JOIN ResortTransactions r ON c.Cottage_PK = r.Cottage_FK
    WHERE   NOT @DateToCheck BETWEEN r.CheckinDate
                             AND     r.DepatureDate
            AND c.[status] != 'Cancelled'
            AND c.CottageType = @CottageType 
```

# azure - 云上 VDI 的加密算法

> ID：12583745
> 
> 赞同：0
> 
> 时间：2012-09-25T13:13:11.880
> 
> 标签：azure, amazon-ec2, cloud, cloud-hosting, openstack

我不需要解释这个问题，但我很想知道当前可用于 Open Stack 或 Amazon 等云上的 VDI（虚拟磁盘映像）的加密算法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:14:37.153

OpenStack 和 EC2 都没有对 EC2 术语中的 VDI 或 AMI 进行任何加密。它是关于如何捆绑图像的。为了节省空间，其中一些使用稀疏选项集进行了 tar 压缩。

# http - 使用 Akka 处理 SOAP 消息

> ID：12583746
> 
> 赞同：1
> 
> 时间：2012-09-25T13:13:14.237
> 
> 标签：http, scala, servlets, akka

我正在为我的雇主构建一个小工具，并尝试使用 Akka 2 + Scala 来实现它。

我正在与之交互的系统之一有一个 SOAP api，它有一个有趣的实现：

- - 要求 - - - -

客户端----请求---->服务器

客户端<---请求确认-----服务器

- - 回复 - - -

客户端<---响应----服务器

Client ----Resp Ack---->Server

跟踪请求是通过 req-ack 发送的任务 ID 完成的。

我的问题是 SO 社区，任何有 akka 经验的人都如下：

*   对于这种特定场景，使用 akka 处理 http 消息的理想方法是什么？我已经看到了 Akka-Mist 的示例，看起来它已经停止支持 play-mini，然后是 akka-camel，我似乎无法找到作为 akka 2.0.3 一部分的库分布，所以我有点困惑我应该采取什么方法。是否有推荐的方法将 servlet 的行为封装在 akka actor 中？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:59:43.437

您的问题非常开放，因此我将对您的要求做出一些假设。

请求假设：某个事件会产生很多请求。

创建一个包含包装 async-http-client (https://github.com/sonatype/async-http-client) 的参与者的路由器。一旦 async-http-client 完成一个请求，它就会向协调参与者发送一条消息，该消息的 ID 包含在 Req Ack 中。协调参与者将聚合 ID。

以下大部分是伪代码，但它与真正的 API 足够接近，您应该能够找出缺失的部分。

```
case class Request(url:String)
case class IDReceived(id:String)

case class RequestingActor extends Actor {

    override def receive = {
        case Request(url) => {
            //set up the async client and run the request
            //since it's async the client will not block and this actor can continue making generating more requests
        }
    }
}

class AsyncHttpClientResponseHandler(aggregationActor:ActorRef) extends SomeAsyncClientHandler {

    //Override the necessary Handler methods.

    override def onComplete = {
        aggregationActor ! IDReceived(//get the id from the response)
    }
}

class SomeEventHandlerClass { 

    val requestRouter = actorSystem.actorOf(Props[RequestingActor].withRouter(FromConfig(//maybe you've configured a round-robin router)), requestRouterName)

    def onEvent(url:String) {
        requestRouter ! Request(url)
    }

}

case class AggregationActor extends Actor {

    val idStorage = //some form of storage, maybe a Map if other information about the task ID needs to be stored as well.  Map(id -> other information)

    override def receive = {
        case IDReceived(id) => //add the ID to idStorage
    }
} 
```

响应假设：您需要对响应中包含的数据做一些事情，然后将 ID 标记为完整。HTTP 前端只需要处理这一组消息。

不要试图找到一个与 Akka 集成的框架，只需使用一个简单的 HTTP 前端，它将消息发送到您创建的 Akka 网络。我无法想象使用 play-mini 获得的任何优势，而且我认为它会掩盖一些描绘工作分离和控制的界限。情况并非总是如此，但鉴于您的问题缺乏要求，我没有其他可依据的意见。

```
case class ResponseHandlingActor extends Actor {

    val aggregationActor = actorSystem.actorFor(//the name of the aggregation router within the Actor System)

    override def receive = {
        case Response(data) => {
            //do something with the data.  If the data manipulation is blocking or long running it may warrant its own network of actors.
            aggregationActor ! ResponseReceived(//get the id from the response)
        }
    }
}

class ScalatraFrontEnd() extends ScalatraServlet {

    val responseRouter = actorSystem.actorOf(Props[RequestingActor].withRouter(FromConfig(//maybe you've configured a round-robin router)), requestRouterName)

    post("/response") {
        responseRouter ! Response(//data from the response)
    }

} 
```

创建一个与此类似的系统可以很好地分离关注点，可以很容易地推断处理发生在哪里，并有足够的空间来扩展或扩展系统。

# django - 如何在 Django 中创建“填空”表单

> ID：12583748
> 
> 赞同：6
> 
> 时间：2012-09-25T13:13:15.527
> 
> 标签：django, forms

我想在 Django 中创建一个“填空”类型的测验。

示例问题是“将您的答案放在 __ 和 __。”

所以基本上，我想要一个用输入字段替换“__”字段的输出。

另外，我希望输入字段具有相同的“名称”。例子：

```
<input id="id_1" type="text" name="blank[]" />
<input id="id_2" type="text" name="blank[]" /> 
```

空白字段的数量（可能）是无限的。如何使用 django.forms 进行处理？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:56:21.810

据我了解，您有一个需要进行测验的字段列表。所以列表看起来像这样：

```
questions = (
  ('Place your 1 answers %s and %s.', ('field_1_1', 'field_2_2')),
  ('Place your 2 answers %s and %s.', ('field_2_1', 'field_2_2')),
) 
```

您可以像这样为每个字段创建表单：

```
class QuizzForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(QuizzForm, self).__init__(*args, **kwargs)
        for question in questions:
            for field in question[1]:
                self.fields[field] = forms.ChoiceField() 
```

并在与此类似的帖子后访问字段：

```
if form.is_valid():
    for question in questions:
        for field in question[1]:
            answer = form.cleanded_data.get(field) 
```

# cloudbees - 没有图标的詹金斯

> ID：12583749
> 
> 赞同：0
> 
> 时间：2012-09-25T13:13:17.180
> 
> 标签：cloudbees

我的实例工作正常，但图标工作已经有一段时间了。你可以[在这里](https://xinco.ci.cloudbees.com/)看到它。我尝试多次重新启动实例，但没有任何运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:21:42.073

您安装了绿球插件“1.12-h-1”插件。这个插件是为 eclipse hudson 3.0 设计的，与 jenkins 不兼容。我们（cloudbees）已经注意到了这个问题，并同时从我们的更新中心删除了它。

# asp.net - asp.net webservice跨域调用json，

> ID：12583750
> 
> 赞同：0
> 
> 时间：2012-09-25T13:13:31.097
> 
> 标签：asp.net, json, web-services

一个小但非常烦人的问题。我正在尝试将 jQuery JSON 调用与 asp.net Web 服务一起使用。如果我在没有任何参数的情况下调用 Web 服务，那么下面的 HttpModule 一切正常。一旦我尝试从客户端发送一个值，Module 就会被执行，但该过程不会传递给实际的 webservice 方法并返回服务器端 500 错误。如果我们从中间移除模块，那么该方法可以通过参数完美执行，但是响应以 XML 格式而不是 JSON 格式返回，因此我们无法使用模块。

------------ Jquery 调用 ---------

```
 var dd = { 'name': 'pakistan' };

    $(document).ready(function () {
        $.getJSON("http://localhost:59271/Testing/shows-app.asmx/HelloWorld?callback=?",
        dd,                    
        function (data) {
            val = JSON.parse(data.d)
            $("#content").html(val.response);
        });
    }); 
```

------------ HttpModule -------------

```
 private const string JSON_CONTENT_TYPE = "application/json; charset=utf-8";

    public void Dispose()
    {
    }
    public void Init(HttpApplication app)
    {
        app.BeginRequest += OnBeginRequest;
        app.EndRequest += new EventHandler(OnEndRequest);
    }
    public void OnBeginRequest(object sender, EventArgs e)
    {
        HttpApplication app = (HttpApplication)sender;
        HttpRequest request = app.Request;
        //Make sure we only apply to our Web Service
        if (request.Url.AbsolutePath.ToLower().Contains("-app."))
        {
            var method = app.Context.Request.Headers["REQUEST_METHOD"];

            if (string.IsNullOrEmpty(app.Context.Request.ContentType))
            {
                app.Context.Request.ContentType = JSON_CONTENT_TYPE;                    
            }

            app.Context.Response.Write(app.Context.Request.Params["callback"] + "(");

            var method2 = app.Context.Request.Headers["REQUEST_METHOD"];

        }
    }
    void OnEndRequest(object sender, EventArgs e)
    {
        HttpApplication app = (HttpApplication)sender;
        HttpRequest request = app.Request;
        if (request.Url.AbsolutePath.ToLower().Contains("-app."))
        {
            app.Context.Response.Write(")");
            app.Context.Response.ContentType = "application/json";
        }
    } 
```

- - - - - - 网络服务 - - - - - - - - - - -

```
[WebMethod]
[System.Web.Script.Services.ScriptMethod(UseHttpGet = true, ResponseFormat = System.Web.Script.Services.ResponseFormat.Json)]
public string HelloWorld(string name)
{
    var json = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(new
    {
        response = "Pakistan " + " Zindabad"
    });

    return json;

    //string jsoncallback = HttpContext.Current.Request["callback"];
    //return string.Format("{0}({1})", jsoncallback, json);
} 
```

请记住，如果我们从中间删除模块，那么该方法会通过参数很好地执行，但是响应会以 XML 格式而不是 JSON 格式返回，因此我们无法使用模块。

提前感谢一堆。

# mysql - MYSQL查询优化，多查询还是一大查询

> ID：12583751
> 
> 赞同：5
> 
> 时间：2012-09-25T13:13:39.657
> 
> 标签：mysql, performance, optimization, select, query-optimization

我有一个查询，其中有一些子查询（内部选择），我正在尝试找出哪个对性能更好，一个更大的查询或许多较小的查询，我发现很难尝试并在变化时计算差异一直在我的服务器上。

我使用下面的查询一次返回 10 个结果以显示在我的网站上，使用分页（偏移量和限制）。

```
SELECT adverts.*, breed.breed, breed.type, sellers.profile_name, sellers.logo, users.user_level , 
round( sqrt( ( ( (adverts.latitude - '51.558430') * (adverts.latitude - '51.558430') ) * 69.1 * 69.1 ) + ( (adverts.longitude - '-0.0069345') * (adverts.longitude - '-0.0069345') * 53 * 53 ) ), 1 ) as distance, 
( SELECT advert_images.image_name FROM advert_images WHERE advert_images.advert_id = adverts.advert_id AND advert_images.main = 1 LIMIT 1) as imagename, 
( SELECT count(advert_images.advert_id) from advert_images WHERE advert_images.advert_id = adverts.advert_id ) AS num_photos 
FROM adverts 
LEFT JOIN breed ON adverts.breed_id = breed.breed_id 
LEFT JOIN sellers ON (adverts.user_id = sellers.user_id) 
LEFT JOIN users ON (adverts.user_id = users.user_id) 
WHERE (adverts.status = 1) AND (adverts.approved = 1) 
AND (adverts.latitude BETWEEN 51.2692837281 AND 51.8475762719) AND (adverts.longitude BETWEEN -0.472015213613 AND 0.458146213613) 
having (distance <= '20') 
ORDER BY distance ASC 
LIMIT 0,10 
```

从主查询中删除下面的 2 个内部选择，然后在我的 php 循环中，调用 2 个选择 10 次，循环中的每条记录一次，会更好吗？

```
( SELECT advert_images.image_name FROM advert_images WHERE advert_images.advert_id = adverts.advert_id AND advert_images.main = 1 LIMIT 1) as imagename, 
( SELECT count(advert_images.advert_id) from advert_images WHERE advert_images.advert_id = adverts.advert_id ) AS num_photos 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:41:42.690

# 避免子查询

据我了解您的内部选择，它们有两个目的：查找关联图像的*任何*名称，并*计算*关联图像的数量。您可能会使用左连接而不是内部选择来实现这两者：

```
SELECT …,
      advert_images.image_name AS imagename,
      COUNT(advert_images.advert_id) AS num_photos,
      …
FROM …
     LEFT JOIN advert_images ON advert_images.advert_id = adverts.advert_id
…
GROUP BY adverts.advert_id
…
LIMIT 0,10 
```

我还没有尝试过，但也许 MySQL 引擎足够聪明，只能对您实际返回的行执行查询的那一部分。

请注意，对于给定的一组图像，此查询将返回*哪个*图像名称根本无法保证。如果你想要可重现的结果，你应该在那里使用一些聚合函数，例如`MIN(advert_images.image_name)`选择字典顺序的第一个图像。

# 单独选择但没有循环

如果上述方法不起作用，即查询仍将检查计算结果的*所有*`advert_images`行的表，那么执行第二个查询可能会更好。但是，您可以尝试避免循环，而是在单个查询中获取所有这些行：*`for`*

 *```
SELECT advert_images.image_name AS imagename,
       COUNT(advert_images.advert_id) AS num_photos
FROM advert_images
WHERE advert_images.advert_id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
GROUP BY advert_images.advert_id 
```

此查询中的十个参数对应于您当前生成的十行结果。请注意，*没有*相关照片的广告根本不会包含在该结果中。因此，请确保在您的代码中默认`num_photos`为零。`imagename``NULL`

# 临时表

实现您尝试做的另一种方法是使用显式临时内存表：首先选择您感兴趣的结果，然后检索所有相关信息。

```
CREATE TEMPORARY TABLE tmp
SELECT adverts.advert_id, round(…) as distance
FROM adverts
WHERE (adverts.status = 1) AND (adverts.approved = 1)
  AND (adverts.latitude BETWEEN 51.2692837281 AND 51.8475762719)
  AND (adverts.longitude BETWEEN -0.472015213613 AND 0.458146213613)
HAVING (distance <= 20)
ORDER BY distance ASC
LIMIT 0,10;

SELECT tmp.distance, adverts.*, …
       advert_images.image_name AS imagename,
       COUNT(advert_images.advert_id) AS num_photos,
       …
FROM tmp
     INNER JOIN adverts ON tmp.advert_id = adverts.advert_id
     LEFT JOIN breed ON adverts.breed_id = breed.breed_id
     LEFT JOIN sellers ON adverts.user_id = sellers.user_id
     LEFT JOIN users ON adverts.user_id = users.user_id
     LEFT JOIN advert_images ON advert_images.advert_id = adverts.advert_id
GROUP BY adverts.advert_id
ORDER BY tmp.distance ASC;

DROP TABLE tmp; 
```

这将确保仅针对您当前正在处理的结果查询所有其他表。毕竟，`advert_images`除了您可能想要其中的多行之外，该表几乎没有什么魔力。

# 子查询作为连接因子

基于上一段中的方法，您甚至可以避免管理临时表，而使用子查询来代替：

```
SELECT sub.distance, adverts.*, …
       advert_images.image_name AS imagename,
       COUNT(advert_images.advert_id) AS num_photos,
       …
FROM ( SELECT adverts.advert_id, round(…) as distance
        FROM adverts
        WHERE (adverts.status = 1) AND (adverts.approved = 1)
          AND (adverts.latitude BETWEEN 51.2692837281 AND 51.8475762719)
          AND (adverts.longitude BETWEEN -0.472015213613 AND 0.458146213613)
        HAVING (distance <= 20)
        ORDER BY distance ASC
        LIMIT 0,10;
     ) AS sub
     INNER JOIN adverts ON sub.advert_id = adverts.advert_id
     LEFT JOIN breed ON adverts.breed_id = breed.breed_id 
     LEFT JOIN sellers ON (adverts.user_id = sellers.user_id) 
     LEFT JOIN users ON (adverts.user_id = users.user_id) 
     LEFT JOIN advert_images ON advert_images.advert_id = adverts.advert_id
GROUP BY adverts.advert_id
ORDER BY sub.distance ASC 
```

同样，您仅使用表中的数据来确定相关行`adverts`，并仅连接其他表中所需的行。最有可能的是，该中间结果将在内部存储在一个临时表中，但这取决于 SQL 服务器来决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:16:00.007

我认为 MySQL 使用文件排序 + 临时表来执行您的查询。这就是为什么在大桌子上你的建议会产生更好的结果。一般来说，您最好执行较小的查询然后 1 大。*

# java - JSONObject 和 JSONArray - 需要获取保存在数组中的值

> ID：12583754
> 
> 赞同：2
> 
> 时间：2012-09-25T13:14:07.317
> 
> 标签：java, json, arrays

我有以下 JSON 数据结构：

```
{
    "myRequest": {
    "item1": "value1",
    "itme2": "value2",
    "item3Holder": {
        "id": [
        "ID001",
        "ID002",
        "ID003",
        "ID004"
        ]
    }
    }
} 
```

我需要能够从 id [] 数组中获取 id 值。

我可以获得 item1-3 的值，但无法分离出 id [] 数组值。

```
JSONObject requestObj = new JSONObject(data.trim()).getJSONObject("myRequest");

// Retrieve items from JSONObject
String item1 = requestObj.getString("item1");
String item2 = requestObj.getString("item2");
String item3 = requestObj.getString("item3");

// Retrieve all id's
JSONArray ids = requestSubObj.getJSONArray("item3Holder");

for (int i = 0; i < ids.length(); i++) {
    String id = ids.toString();
    logger.info("id : " + id);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:19:28.467

我认为你应该得到这样的对象：

```
JSONObject item3Holder = requestObj.getJSONObject("item3Holder");
JSONArray ids = item3Holder.getJSONArray("id"); 
```

您还需要调用`.getString(i)`对象`ids`

```
for (int i = 0; i < ids.length(); i++) {
    String id = ids.getString(i).toString();
    logger.info("id : " + id);
} 
```

# alignment - 使用多行命令在顶部对齐文本

> ID：12583760
> 
> 赞同：2
> 
> 时间：2012-09-25T13:14:27.730
> 
> 标签：alignment, latex, multirow

我对以下代码有疑问：

```
\begin{table}[!h]
  \centering
  \caption{Titel}
  \resizebox{.95\columnwidth}{!}{%
    \begin{tabular}{p{4.5cm}p{10cm}p{3.5cm}}
        \hline
        Name & \multicolumn{2}{p{\textwidth-3\tabcolsep-\widthof{test}-2\fboxrule}}
            {long_title which goes over two coloums}\\
        \hline
        Explanation & \multicolumn{2}{p{\textwidth-3\tabcolsep-\widthof{test}-2\fboxrule}}
            {Explanation which goes over two coloums}\\
        \hline
        \multirow{3}{*}{Targets} 
            & Target 1 is long text with two lines & not reached\\
        \cline{2-3}
        & Target 2 & reached\\
        \cline{2-3}
        & Target 3 & reached\\
        \hline

    \end{tabular}%
    }
  \label{tab:test}%
\end{table}% 
```

我希望这张照片有助于理解我的问题：

![问题示例](../Images/218b9de00a9c705ae1288b5c254b1db1.png)

我想对齐单元格顶部的文本“目标”，就像第二个表格一样。我确信这一定很简单，但我似乎无法解决。请帮助我进行这种对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:26:49.913

不要显式地指定列的宽度，而是使用说明`l`符（这可能需要数组包）。其用法示例如下

```
\begin{center}
     \begin{tabular}{ | l | l | l | p{5cm} |}
     \hline
     Day & Min Temp & Max Temp & Summary \\ \hline
     Monday & 11C & 22C & A clear day with lots of sunshine.  
     However, the strong breeze will bring down the temperatures. \\ \hline
     Tuesday & 9C & 19C & Cloudy with rain, across many northern regions. Clear spells
     across most of Scotland and Northern Ireland,
     but rain reaching the far northwest. \\ \hline
     Wednesday & 10C & 21C & Rain will still linger for the morning.
     Conditions will improve by early afternoon and continue
     throughout the evening. \\
     \hline
     \end{tabular}
\end{center} 
```

这将提供这样的输出

![例子](../Images/6ff9f314eeacffd03d3fcc0149c188cc.png)

注意所有列的顶部对齐。

我希望这有帮助。

# c# - 如何从任何代码位置捕获 Ctrl+鼠标滚轮？

> ID：12583761
> 
> 赞同：0
> 
> 时间：2012-09-25T13:14:30.373
> 
> 标签：c#, events

在 ViewDoc 控件上放置了一个 RawViewControl（我无权访问它的代码） - ViewDoc 是它的容器。我正在尝试处理鼠标滚轮事件，但 RawViewControl 没有此类事件，如果我处理 ViewDoc 的鼠标滚轮事件，它不会触发（这是正确的 - 焦点在 RawViewControl 上）。如何从 ViewDoc 类中捕获此事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:36:20.567

我不确定我是否正确理解了您的问题，但我处理任何`ctrl + something`动作的一种方法是，`OnKeyDown`我检查是否`ctrl`已单击该键。如果有，我将全局变量设置为`g_IsCtrlDownTrue = true`. `OnKeyUp`将其设置回 false。然后，在您的鼠标滚动上检查是否`ctrl`已关闭，以及是否正在执行您的`ctrl + mouse`移动。

# iphone - 想要使用 Zbar Sdk 从 iphone 库中获取图像以获取 QR 码

> ID：12583766
> 
> 赞同：0
> 
> 时间：2012-09-25T13:14:46.490
> 
> 标签：iphone, qr-code, zbar-sdk

我正在将 ZbarSdk 用于 QR 码，但它正在从相机中获取图像，我希望它从库中获取图像，以便我可以在模拟器上对其进行测试，但不知道在哪里为它实现代码。我知道如何从库而不是相机中获取，但不知道在哪里以及如何实现该代码。任何人都可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:35:57.113

通过 Zbar sdk 是不可能的，因为它不允许。

# jsp - 如何合并2个jsp页面

> ID：12583768
> 
> 赞同：2
> 
> 时间：2012-09-25T13:15:00.213
> 
> 标签：jsp

我有两个jsp页面。结果.jsp，x.jsp。x.jsp 是一个菜单视图页面，它有一些链接，我们可以通过这些链接过滤我们的 result.jsp。我想合并这两个页面。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:37:36.790

您可以使用

1.  静态包含`<%@include file="x.jsp" %>`（编译时包含）
2.  或动态包含`<jsp:include page="x.jsp" />`（在呈现输出时包含）

在您的内部`results.jsp`或相反的情况下，即包括`results.jsp`在`x.jsp`.

欲了解更多信息：

1.  [包含另一个 JSP 文件](https://stackoverflow.com/a/9110412/468763 "回答包含问题")
2.  [两者的区别包括](https://stackoverflow.com/q/7879906/468763 "<jsp:include page = ... > 和 <%@ include file = ... > 有什么区别？")
3.  `<%@include %>`是一个[指令](http://www.tutorialspoint.com/jsp/jsp_directives.htm "JSP 指令教程")并且`<js:include />`是一个[标准动作](http://www.tutorialspoint.com/jsp/jsp_actions.htm "JSP 标准动作教程")。

希望这可以帮助。

# java - 从 java 中的 Map 列表中删除值

> ID：12583770
> 
> 赞同：0
> 
> 时间：2012-09-25T13:15:02.557
> 
> 标签：java, list, map

从包含地图的java列表中删除值

我有这种形式的清单：

```
List: [{id=1,c_id=3,value=5},{id=1,c_id=2,value=5},{id=1,c_id=3,value=5},{id=2,c_id=1,value=5},       
        {id=2,c_id=null,value=5}}]; 
```

结果我试图得到

```
List: [{id=1,c_id=3,value=5},,{id=1,c_id=2,value=5},{id=2,c_id=1,value=5}}] 
```

`id`如果相同`c_id`，则应将其删除，`c_id`如果相同，则应将`null`其删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:19:16.737

你可以做

```
for(Iterator<Map<String, Object>> iter = list.iterator(); iter.hasNext(); ) {
    Map<String, Object> map = iter.next();
    Object c_id = map.get("c_id");
    if (c_id == null || c_id.equals(matching_c_id))
        iter.remove();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:23:02.830

[番石榴解决方案](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#removeIf%28java.lang.Iterable,%20com.google.common.base.Predicate%29)：

```
Iterables.removeIf(list, new Predicate<Element>(){
    @Override public boolean apply(Element e) {
        return e.c_id == null || e.c_id.equals(matching_c_id);
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:35:52.487

我认为一个解决方案可能是以下一个，我认为它是可读的。

首先，为您的对象类型构造一个集合元素代理：

```
public class MyTypeProxy {

     private MyType obj;

     public MyTypeProxy(MyType obj) {

         this.obj = obj;

     }

     public MyType getObj() { return this.obj; }

     public int hashcode() {

         return obj.getC_id() ^ obj.getId();

     }

     public boolean equals(Object ref) {

         if (ref.getClass() != MyTypeProxy.class) {
             return false;
         }
         return 
              ((MyTypeProxy)ref).obj.getC_id() == this.obj.getC_id() &&
              ((MyTypeProxy)ref).obj.getId() == this.obj.getC_id();
     }
} 
```

然后，在您的代码中，您可以构造一个 HashSet。

```
HashSet<MyTypeProxy> set = new HashSet<MyTypeProxy>();

for (MyType mt : list) {
    if (mt.getC_id() != null){
        set.add(new MyTypeProxy(myList));
    }
} 
```

下面做两件事。首先，它排除具有空 c_id 字段的对象，其次，它过滤掉具有相同 id 和 c_id 组合的对象。您可能要考虑保留第一个是否可以（这就是上面的代码所做的）。

该套装现在包含您所需要的。

# c - 构成整数的二进制表示

> ID：12583771
> 
> 赞同：3
> 
> 时间：2012-09-25T13:15:05.110
> 
> 标签：c, binary

事情就是这样，`1024 = 0x400`我假设它的二进制表示（小端序）是`\\x00\\x4\\x00\\x00`. 我试着做这样的事情，

```
int main()
{
    const char *str = "\\x00\\x4\\x00\\x00";
    const int *p = (const int *)str;
    printf("%d\n", *p);
} 
```

但是为什么上面的代码不能给我`1024`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T13:17:28.127

因为你逃了`\`。摆脱它们：

```
const char *str = "\x00\x4\x00\x00"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T13:18:01.557

字符串中的反斜杠太多。

试试这个：

```
#include <stdio.h>
int main(void)
{
    const char *str = "\x00\x4\x00\x00";
    const int *p = (const int *)str;
    printf("%d\n", *p);
    return 0;
} 
```

[ideone](http://ideone.com/Rd9SL)的输出：

```
1024 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:25:40.897

你知道当你在任何 printf 语句的末尾输入一个换行符时会发生什么，即**\n**，**“\”**部分被称为转义斜杠。这就是为什么**\n**没有被打印出来。同样，如果你给**"\\x00\\x4\\x00\\x00"**，这意味着**\x00\x4\x00\x00**将被存储，这显然没有任何意义。所以，你必须摆脱那些**\ （这些斜线）**。因此，

```
const char *str = "\x00\x4\x00\x00"; 
```

会很乐意做你的工作。:-)

# mysql - Mysql 5.6 时间戳分区（以微秒计）

> ID：12583773
> 
> 赞同：2
> 
> 时间：2012-09-25T13:15:17.510
> 
> 标签：mysql, database-partitioning

我正在玩mysql 5.6。我对这种可能性特别感兴趣：DATETIME 或 TIMESTAMP 值可以包括一个尾随小数秒部分，精度高达微秒（6 位）。

我想要的是使用这样的时间戳对表进行分区。

例子：

```
CREATE TABLE `VALUE_BIS` (
  `TSTAMP` timestamp(3) NOT NULL,
  `ATTRIBUTE_ID` int(11) NOT NULL,
  `VAL` int(11) unsigned NOT NULL,
  PRIMARY KEY (`ATTRIBUTE_ID`,`TSTAMP`)
)  PARTITION BY RANGE (UNIX_TIMESTAMP(TSTAMP))
     (PARTITION p_s18 VALUES LESS THAN (UNIX_TIMESTAMP('2012-09-18 00:00:00')),
     PARTITION p_s19 VALUES LESS THAN (UNIX_TIMESTAMP('2012-09-19 00:00:00')),
     PARTITION p_Max VALUES LESS THAN (UNIX_TIMESTAMP('2020-09-26 00:00:00' ))); 
```

==>ERROR 1491 (HY000): PARTITION 函数返回错误的类型

*我认为这是正常的，因为它返回 unixtimestamp_seconds.microseconds 这不是整数*

如果添加毫秒

```
PARTITION p_s18 VALUES LESS THAN (UNIX_TIMESTAMP('2012-09-18 00:00:00.000') 
```

==> 错误 1697 (HY000): 分区 'p_s18' 的 VALUES 值必须具有 INT 类型

*OK 和以前一样的故事*

如果我更改我的 tstamp 列的定义并且不使用毫秒

```
`TSTAMP` timestamp 
```

==> 它工作得很好，但我不会存储我的毫秒数，这不是我想要的。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:46:34.183

MySQL 在使用时间戳对表进行分区时仍然存在一些问题，[比如这个，这可能会导致 InnoDB 崩溃](http://bugs.mysql.com/bug.php?id=42849)。他们在过去[以小数秒为单位对时间戳](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)的行为进行了一些更改。

我的第一个猜测是分形秒的存储和使用方式与[unix_timestamp](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_unix-timestamp)冲突。因此无法正确创建分区（因为类型错误）......因此会生成您遇到的错误消息。

一种解决方法是添加第二个字段，该字段仅包含没有分形秒的时间戳，并将其用作您的范围标识符。

无论哪种方式，您都应该报告该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:15:08.960

正如 Bjoern 所建议的，我向 mysql 跟踪器 (http://bugs.mysql.com/bug.php?id=66958) 提交了一个错误。这是他们的答案（对他们来说这不是错误）

不支持时间戳（N），如记录： [http ://dev.mysql.com/doc/refman/5.5/en/upgrading-from-previous-series.html](http://dev.mysql.com/doc/refman/5.5/en/upgrading-from-previous-series.html)

" 不兼容的更改：在非常旧的 MySQL 版本（4.1 之前）中，TIMESTAMP 数据类型支持显示宽度，从 MySQL 4.1 开始被忽略。这在 MySQL 5.1 中已弃用，并在 MySQL 5.5 中完全删除。这些更改在尝试将 TIMESTAMP(N) 列与 MySQL 5.5 或更高版本的服务器一起使用时，行为可能会导致两个问题场景：

将在 MySQL 5.0 或更早版本的服务器中创建的转储文件（例如，使用 mysqldump 创建的文件）导入到较新版本系列的服务器中时，包含 TIMESTAMP(N) 的 CREATE TABLE 或 ALTER TABLE 语句会导致导入失败并显示语法错误。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T11:08:42.370

*MySQL 8 和 MariaDB 10 仍然存在这个问题。*

上面的帖子关于 MySQL 无法对分数进行分区是正确的。但是你不必改变你的表，你可能不需要使分区那么细化。可以通过设置时间戳来实现，这是一种快速操作，适用于任何时间戳（N）

例子：

```
CREATE TABLE quarterly_report_status (
    report_id INT NOT NULL,
    report_status VARCHAR(20) NOT NULL,
    report_updated TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
)
PARTITION BY RANGE ( FLOOR(UNIX_TIMESTAMP(report_updated)) ) (
    PARTITION p0 VALUES LESS THAN ( UNIX_TIMESTAMP('2008-01-01 00:00:00') ),
    PARTITION p1 VALUES LESS THAN ( UNIX_TIMESTAMP('2008-04-01 00:00:00') ),
    PARTITION p3 VALUES LESS THAN (MAXVALUE)
); 
```

# asp.net-mvc-3 - 呈现 Web 服务器控件

> ID：12583776
> 
> 赞同：0
> 
> 时间：2012-09-25T13:15:27.187
> 
> 标签：asp.net-mvc-3, render, webforms, asp.net-webcontrol

* * *

有没有办法在运行时找出我的 Web 服务器控件正在运行的上下文？我需要在运行时知道 Web 服务器控件是否在 mvc 上下文或 Web 表单上下文中运行。

# .net - Autofac + SignalR

> ID：12583778
> 
> 赞同：4
> 
> 时间：2012-09-25T13:15:33.570
> 
> 标签：.net, asp.net-mvc, dependency-injection, autofac, signalr

我对 autofac 和 singalR 库都是全新的，所以请放轻松！我在引导程序中有以下代码，它可以在没有signalR的情况下自行工作。

```
var builder = new ContainerBuilder();
builder.RegisterControllers(Assembly.GetExecutingAssembly());
builder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly()).AsImplementedInterfaces();

builder.RegisterType<DatabaseFactory>().As<IDatabaseFactory>().InstancePerHttpRequest();
builder.RegisterType<UnitOfWork>().As<IUnitOfWork>().InstancePerHttpRequest();

builder.RegisterAssemblyTypes(typeof(adminRepository).Assembly).Where(t => t.Name.EndsWith("Repository")).AsImplementedInterfaces().InstancePerHttpRequest();

builder.RegisterAssemblyTypes(typeof(adminService).Assembly).Where(t => t.Name.EndsWith("Service")).AsImplementedInterfaces().InstancePerHttpRequest();

builder.RegisterFilterProvider();
IContainer container = builder.Build();

DependencyResolver.SetResolver(new Autofac.Integration.Mvc.AutofacDependencyResolver(container)); 
```

上面的代码工作得很好，但是在用下面的代码注册我的集线器之后，它就不起作用了。

```
builder.RegisterType<Chat>().InstancePerLifetimeScope();

builder.RegisterFilterProvider();
IContainer container = builder.Build();

DependencyResolver.SetResolver(new Autofac.Integration.Mvc.AutofacDependencyResolver(container));

SignalR.IDependencyResolver resolver = new SignalR.Autofac.AutofacDependencyResolver(container);
GlobalHost.DependencyResolver = resolver;
RouteTable.Routes.MapHubs(resolver); 
```

我正在使用 SignalR 依赖解析器从这个（https://github.com/pszmyd/SignalR.Autofac）绑定到 Autofac。

我有一个像这样的简单集线器，

```
public class Chat : Hub
{
    private readonly IadminService adminService;
    public Chat(IadminService adminService)
    {
        this.adminService = adminService;
    }

    public void Send(string message)
    {
        Clients.addMessage(message);
    }
} 
```

这是我尝试使用 DI 连接集线器时遇到的错误。

“从请求实例的范围内看不到标签匹配‘httpRequest’的范围。”

无论我做什么，我似乎都无法让它工作，如果有人能告诉我上面的代码有什么问题，我将不胜感激。

非常感谢狮子座

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T15:24:18.500

对于托管在 IIS 中的 ASP.NET 应用程序，请将其添加到 Application_Start：

```
var container = AutofacConfig.BuildContainer();
DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
var signalRDependencyResolver = new SignalRAutofacDependencyResolver(container);
// old SignalR 1.0 way - routes.MapHubs(signalRDependencyResolver);
RouteTable.Routes.MapHubs(new HubConfiguration { Resolver = signalRDependencyResolver }); 
```

[您可以在此处](https://github.com/pszmyd/SignalR.Autofac)找到 SignalRAutofacDependencyResolver 。

注入 ISecurity 服务的示例集线器：

```
public class ExampleHub : Hub
{
    private static int _count = 0;

    private readonly ISecurity _security;
    public ExampleHub(ISecurity security)
    {
        _security = security;
    }

    public void GetCount()
    {
        _count++;
        Clients.All.SetCount(_count);         
    }
} 
```

这也适用于 SignalR [self host release](http://www.asp.net/signalr/overview/getting-started/tutorial-signalr-self-host)。只需使用这样的启动类：

```
// These are static variables in Program.cs - Probably a better way to do this
_container = AutofacConfig.BuildContainer();
_webServer = WebApp.Start<WebServerStartup>("http://localhost:8080");

public class WebServerStartup
{
    private readonly SignalRAutofacDependencyResolver _signalRDependencyResolver;

    public WebServerStartup()
    {
        _signalRDependencyResolver = new SignalRAutofacDependencyResolver(_container); 
    }

    public void Configuration(IAppBuilder app)
    {
        app.MapSignalR(new HubConfiguration { Resolver = _signalRDependencyResolver });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:31:12.983

设置 DependencyResolver 后，您是否仍需要将其传递给 MapHubs，那就试试这个：

```
GlobalHost.DependencyResolver = resolver;

RouteTable.Routes.MapHubs(); 
```

我知道 SignalR 但从未使用过 Autofac 但可能值得查看这些答案以了解有关可能的 Autofac 问题的详细信息：

[如何解决 Autofac InstancePerHttpRequest](https://stackoverflow.com/questions/10027330/how-to-resolve-autofac-instanceperhttprequest)

[Autofac、ASP.NET MVC 3 httpRequest 范围和 AutoMapper：没有标签匹配“httpRequest”的范围可见](https://stackoverflow.com/questions/8243135/autofac-asp-net-mvc-3-httprequest-scope-and-automapper-no-scope-with-a-tag-mat)

# git - 为什么文件在 git reset --hard 之后有修改日期？这是正常的吗？

> ID：12583782
> 
> 赞同：1
> 
> 时间：2012-09-25T13:15:46.270
> 
> 标签：git

我在`master`树枝上。

我错误地做了一些更改。

我保存了这些更改（我`cp`的文件在这个 git 存储库之外）

我`git reset --hard HEAD`

现在我明白了：

```
...
-rw-rw-r--  1 durrantm  1415 Sep 24 10:32 regular_pair_filter_spec.rb
-rw-rw-r--  1 durrantm   474 Sep 24 10:32 ranking_spec.rb
drwxrwxr-x 10 durrantm  4096 Sep 24 10:32 ../
-rw-rw-r--  1 durrantm  7242 Sep 25 08:58 student_spreadsheet_spec.rb
-rw-rw-r--  1 durrantm  5400 Sep 25 08:58 iep_service_spreadsheet_spec.rb
-rw-rw-r--  1 durrantm 52487 Sep 25 08:58 schedule_spec.rb
drwxrwxr-x  2 durrantm  4096 Sep 25 08:58 ./ 
```

这些文件看起来没问题（更改已经消失），但它们有今天的更新戳记。
这可以/正常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:23:45.903

Git 的[常见问题解答](https://git.wiki.kernel.org/index.php/GitFaq#Why_isn.27t_Git_preserving_modification_time_on_files.3F)对此有解释。

> Git 将当前时间设置为它修改的每个文件的时间戳，但仅限于那些文件。其他文件保持不变，这意味着构建工具将能够依赖于修改时间并正确重建。如果构建规则发生变化，无论如何都会导致失败，但这比意外不重建要少得多。

# spotify - 获取播放列表的 xml - 自定义 spotify 播放列表

> ID：12583786
> 
> 赞同：1
> 
> 时间：2012-09-25T13:15:57.950
> 
> 标签：spotify

我希望创建一个自定义的 spotify 播放列表，而不是通过网站使用生成器。我需要一种获取此 xml 的方法，就像 webAPI 提供的查找和搜索工具一样。我尝试使用带有查找功能的播放列表 spotifyURI，但它似乎不起作用。

例如

[http://ws.spotify.com/lookup/1/?uri=spotify:user:XXX:playlist:YYY](http://ws.spotify.com/lookup/1/?uri=spotify:user:XXX:playlist:YYY)

但是，使用它只会给我以下错误：

“您已达到速率限制，请等待 10 秒再试一次”

我不认为我真的达到了命中率，我只尝试了几次。

如果这不是要走的路，还有什么其他选择？库Spotify？这似乎是一个更大的解决方案，只需为播放列表获取一些 xml。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:56:31.503

Web API 根本不支持播放列表查找。如果要查找播放列表数据，则必须使用 libspotify。

# wpf - 来自两个控件的 Dialog 上的一个属性的数据绑定

> ID：12583791
> 
> 赞同：0
> 
> 时间：2012-09-25T13:16:06.333
> 
> 标签：wpf, data-binding, multibinding

我有一个使用 ShowDialog 显示的窗口。我试图从用户那里获得的值之一是以 GB 或 TB 为单位的大小。所以我有两个控件，一个来自[WPF 扩展工具包](http://wpftoolkit.codeplex.com/)的 IntegerUpDown和一个 ComboBox：

```
<xctk:IntegerUpDown Name="SizeN" Minimum="1" Maximum="1023" Increment="1" Value="100"/>
<ComboBox Name="SizeS" SelectedIndex="0">
    <ComboBoxItem>GB</ComboBoxItem>
    <ComboBoxItem>TB</ComboBoxItem>
</ComboBox> 
```

我将对话框的 DataContext 设置为自身。我已经定义了容量属性：

```
public ulong Capacity { get; set; }

public CustomWindow()
{
    InitializeComponent();
    DataContext = this;
} 
```

我已经创建了一个 IMultiValueConverter，PowerConverter，它接受一个 int 和一个字符串并返回 ulong。我认为正确的 MultiBinding 是：

```
<Window.Resources>
    <local:PowerConverter x:Key="CapacityConverter" />
</Window.Resources>

<MultiBinding Converter="{StaticResource CapacityConverter}">
    <Binding ElementName="SizeN" Path="Value" />
    <Binding ElementName="SizeS" Path="SelectedValue" />
</MultiBinding> 
```

我不知道如何将此绑定分配给对话框上的容量属性。我希望 WPF 自动为我设置容量属性。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:12:26.843

我必须在 CustomWindow 上将 Capacity 转换为 DependencyProperty，在 ComboBox 上设置 SelectedValuePath 属性，并在样式中将绑定分配给 Capacity。

XAML：

```
<Window xmlns:="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="clr-namespace:Xceed.Wpf.Toolkit;assembly=WPFToolkit.Extended"
        xmlns:local="clr-namespace:MyProject"
        x:Class="MyProject.CustomWindow" Title="CustomWindow"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Window.Resources>
        <local:PowerConverter x:Key="CapacityConverter" />
    </Window.Resources>
    <Window.Style>
        <Style TargetType="{x:Type local:CustomWindow}">
            <Setter Property="Capacity">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource CapacityConverter}"
                                  Mode="TwoWay">
                        <Binding  ElementName="SizeNumber" Path="Value"
                                  Mode="TwoWay" />
                        <Binding  ElementName="SizeSuffix" Path="SelectedValue"
                                  Mode="TwoWay" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Style>
    <StackPanel>
        <xctk:IntegerUpDown Name="SizeNumber" Minimum="1" Maximum="1023" Increment="1"
                            Value="100"/>                        
        <ComboBox Name="SizeSuffix" SelectedIndex="0" SelectedValuePath="Content">
            <ComboBoxItem>GB</ComboBoxItem>                        
            <ComboBoxItem>TB</ComboBoxItem>                        
        </ComboBox>
    </StackPanel>
</Window> 
```

后面的代码：

```
public partial class CustomWindow : Window
{
    public CustomWindow()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty CapacityProperty =
        DependencyProperty.Register("Capacity", typeof(ulong), typeof(CustomWindow));

    public ulong Capacity
    {
        get
        {
            return (ulong)GetValue(CapacityProperty);
        }
        set
        {
            SetValue(CapacityProperty, value);
        }
    }
} 
```

# android - “预黄油” Android 中的“黄油”片段动画

> ID：12583792
> 
> 赞同：2
> 
> 时间：2012-09-25T13:16:18.913
> 
> 标签：android, performance, animation, android-fragments

我正在使用 Google 的兼容库在我的应用程序（Target SDK 16，Min SDK 8）中为在 2.2+ 上运行的设备启用片段。从功能的角度来看，这一切都很好，但是通过设置的视图动画的性能

```
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.setCustomAnimations(inTransition, outTransition, popInTransition, popOutTransition); 
```

哪里`inTransition`有一个简单的翻译，比如

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromYDelta="100%p" android:toYDelta="0" android:duration="@integer/animation_duration" />
</set> 
```

并且`outTransition`是一个淡入淡出的动画

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="1.0" android:toAlpha="0.0" android:duration="@integer/animation_duration" />
</set> 
```

在我的 Galaxy S2 (4.0.3) 上简直太糟糕了，即对于持续约 350 毫秒的动画，我会说大约。一半的帧被丢弃。我注意到，如果我禁用淡出，性能会稍微好一些（但不是很多），但是当然动画的完整效果就消失了，因为原始片段立即变黑。我也尝试了代码的发布版本，但性能也没有提高。

我究竟做错了什么？如何使片段动画更流畅？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T14:07:49.390

我建议的第一件事是在清单中启用硬件加速。这只会在具有 API 3.0+ 的设备上启用，但会**显着**提高性能。使用 API 11 (3.0) 及更高版本，您还可以利用[View LayerTypes。](http://developer.android.com/reference/android/view/View.html#setLayerType%28int,%20android.graphics.Paint%29) 设置您正在制作动画的任何内容，`LAYER_TYPE_HARDWARE`然后将其设置回`LAYER_TYPE_SOFTARE`或`LAYER_TYPE_NONE`完成后。

预蜂窝变得更加困难。你根本没有硬件加速。你最好检查一下`if(api < 11) *use this animation* else *use this animation*`。滑动动画往往工作得相当流畅。Alpha 动画是 CPU 的负担，尤其是当视图有很多层时。在最顶层的父视图上应用任何动画，你可以逃脱（你正在为整个片段制作动画，所以它已经发生了）。

# perl - 在 WWW::Mechanize 实例中注入 HTTP::Response 对象

> ID：12583798
> 
> 赞同：0
> 
> 时间：2012-09-25T13:16:52.323
> 
> 标签：perl, www-mechanize

如果有的话，在 WWW::Mechanize 实例中注入 HTTP::Response（以及隐式或显式以及相应的 HTTP::Request）的正确方法是什么？

基本上我想分离下载过程，这样我就可以使用 PoCo::Client::HTTP，例如或 AnyEvent::HTTP 并使用 $mech 来查询响应并准备进一步的请求。当然，我需要一种方法来获取准备好的 HTTP::Request。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:11:53.260

我相当肯定[LWP::Protocol::AnyEvent::http](http://search.cpan.org/~ikegami/LWP-Protocol-AnyEvent-http-v1.0.5/lib/LWP/Protocol/AnyEvent/http.pm)会为你处理。

# vba - 使用 VBA 删除不属于命名集的 PowerPoint 幻灯片设计？

> ID：12583801
> 
> 赞同：0
> 
> 时间：2012-09-25T13:16:58.423
> 
> 标签：vba, ms-office, powerpoint, office-2010

我有一组自定义布局，它们是我认可的企业标准。有 1 个主布局和 11 个自定义布局。

因为用户可能会粘贴旧内容，所以我知道他们粘贴的任何幻灯片都会带来相应的布局。编写一个按钮以删除任何不属于已批准集的自定义布局的最佳方法是什么？

我拥有的代码如下，但它给了我一个错误，上面写着“幻灯片（未知成员）：无效请求。无法删除主人。”

任何帮助都感激不尽！

```
Dim oDesign As design

For Each oDesign In ActivePresentation.Designs

    'if design name is CC standard then
    If oDesign.Name = CCSMNAME$ Then

        Dim oLayout As CustomLayout

        'Check the name of each layout against the permitted set, delete any that are additional
        For Each oLayout In oDesign.SlideMaster.CustomLayouts

            If oLayout.Name <> "Title Slide (Basic)" Or oLayout.Name <> "Title Slide (Standard Stock Image)" Or oLayout.Name <> "Title Slide (Image - Right)" Or oLayout.Name <> "Agenda" Or oLayout.Name <> "Body/Content (Basic)" Or oLayout.Name <> "Report (Approval and Disclaimer)" Or oLayout.Name <> "Report Body/Content" Or oLayout.Name <> "Divider" Or oLayout.Name <> "Quals (Basic -Right)" Or oLayout.Name <> "Quals (Basic - Left)" Or oLayout.Name <> "Content and Closing" Then
                oLayout.Delete
            End If

        Next oLayout

    Else

        'Else, the Design found is not the CC Master so delete it
        '(This runs for all remaining masters)
         oDesign.Delete

    End If

Next oDesign 
```

**我现在正在使用以下代码 - 有谁知道为什么不是删除所有其他幻灯片母版，而是只删除序列中的下一个然后退出？**

子清理模板（）

```
 'Declare some variables
    Dim oDesign As design
    Dim oDesigns As Designs
    Dim oLayout As CustomLayout
    Dim masterCount As Long
    Dim layoutCount As Long
    Dim strInUse As String

    On Error Resume Next

   For Each oDesign In ActivePresentation.Designs

            If oDesign.Name = CCSMNAME$ Then

            MsgBox "The script has found " & oDesign.SlideMaster.CustomLayouts.Count & " layouts in the CC Master. There should be 11 in total. An integrity check will now run to remove any non-approved slide layouts."

                            'Loop through set backwards to keep integrity of data set when deleting
                            For layoutCount = oDesign.SlideMaster.CustomLayouts.Count To 1 Step -1

                                   Set oLayout = oDesign.SlideMaster.CustomLayouts(layoutCount)
                                   Err.Clear

                                   'Check the name of each layout against the permitted set, delete any that are additional
                                   If checkAllowed(oLayout) = False Then
                                    oLayout.Delete
                                   End If

                                   If Err <> 0 Then
                                    strInUse = strInUse & oLayout.Name & " , "
                                   End If

                            Next layoutCount
                            MsgBox ("Any additional layouts deleted, cleanup of CC Master completed.")

             Else

                'Else, a Slide Master has been found that is not the CC Master so delete it
                MsgBox ("An additional Slide Master named " & oDesign.Name & " that is not CC approved has been detected. It is not in use, so it will be removed.")
                oDesign.Delete

             End If

    Next oDesign

    'Alert the user to any foreign slide designs found that couldn't be deleted
    If Len(strInUse) > 0 Then
        MsgBox "The following slide designs seem to be either in use, or protected: " & Left(strInUse, Len(strInUse) - 1)
    End If 
```

结束子

函数 checkAllowed(olay As CustomLayout) As Boolean

```
 Select Case olay.Name

            Case Is = "Title Slide (Basic)", _
            "Title Slide (Image - Right)", _
            "Title Slide (Standard Stock Image)", _
            "Agenda", "Body/Content (Basic)", _
            "Report (Approval and Disclaimer)", _
            "Report Body/Content", _
            "Divider", _
            "Quals (Basic - Right)", _
            "Quals (Basic - Left)", _
            "Contact and Closing"

                'Return true if any of the above names are a match
                checkAllowed = True

            Case Else

                'Return false if no match found
                checkAllowed = False

    End Select 
```

结束功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:46:57.250

当您在 For/Next 循环中删除集合的成员时，您会遇到同样的问题。

考虑三个对象（幻灯片、母版、苹果等）的集合

```
For Each Object in Collection
  If Object.MeetsSomeCondition Then
    Object.Delete
  End If
Next 
```

所以第一次通过循环，你删除了一个对象。下一次循环时，内部计数器在集合中寻找第二个对象，但由于现在集合只包含两个对象，它实际上是在查看第三个对象是什么。
下一次循环时，内部计数器会寻找第三个对象，但由于集合中只有两个对象，因此会出现超出范围的错误。

相反，请执行以下操作：

```
For X = Collection.Count to 1 Step -1
  If condition then Collection(x).delete
Next 
```

# php - PhoneGap FileTransfer 和服务器端脚本

> ID：12583803
> 
> 赞同：0
> 
> 时间：2012-09-25T13:17:11.887
> 
> 标签：php, javascript, ios, cordova, file-transfer

我整天都被这个问题困扰着，JavaScipt 代码看起来还不错。但是在输出中我得到了这个：

```
2012-09-25 15:09:57.584 ViviJesolo[13863:c07] File Transfer Finished with response code 200
2012-09-25 15:09:57.586 ViviJesolo[13863:c07] [INFO] Code = 200
2012-09-25 15:09:57.586 ViviJesolo[13863:c07] [INFO] Response = Array%0A(%0A%20%20%20%20%5Bfile%5D%20=%3E%20Array%0A%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Bname%5D%20=%3E%20cdv_photo_027.jpg%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Btype%5D%20=%3E%20image/jpg%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Btmp_name%5D%20=%3E%20/tmp/php4i7HAa%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Berror%5D%20=%3E%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Bsize%5D%20=%3E%202340%0A%20%20%20%20%20%20%20%20)%0A%0A)%0A
2012-09-25 15:09:57.587 ViviJesolo[13863:c07] [INFO] Sent = 2548 
```

我的服务器端脚本是：

```
<?php
print_r($_FILES);
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "/httpdocs/upload/".$new_image_name);
?> 
```

我检查了权限，没问题，但是我看不到上传的文件。可能是什么问题呢？

编辑：我正在使用 FileTransfer 对象上传图像，如下所示：

```
function uploadPhoto(imageURI) 
{
 var options = new FileUploadOptions(); 
 options.fileKey="file"; 
 options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
 options.mimeType="image/jpg";
 var params = new Object();
 params.headers={'headerParam':'headerValue'};
 options.params = params;
 options.chunkedMode = false;
 var ft = new FileTransfer();
 ft.upload(imageURI, "site.com/upload.php";, win, fail, options); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:33:34.877

可能是您的目标文件路径错误，请尝试将您的路径附加到文档根目录，如下所示：

```
$new_image_name = "namethisimage.jpg";
$destination = $_SERVER['DOCUMENT_ROOT'] . "/httpdocs/upload/".$new_image_name;
move_uploaded_file($_FILES["file"]["tmp_name"], $destination); 
```

# zend-framework - 如何在zend中更改数据库字段顺序

> ID：12583805
> 
> 赞同：1
> 
> 时间：2012-09-25T13:17:14.227
> 
> 标签：zend-framework, zend-db, zend-db-table

在 zend 项目中，我从数据库中获取数据并显示在表格中。它以与存储在数据库中的顺序相同的顺序显示数据。但我想以与数据库顺序不同的顺序显示文件。但我不知道该怎么做。这里我的意思是字段顺序而不是行顺序。请在这方面帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:25:36.727

很难说你是如​​何显示的，但假设你已经为每个表创建了表类，我会做这样的事情：

```
<?php foreach $zendDbRowObject->getTable()->getDisplayOrder() as $fieldName): ?>
    <?php echo $zendDbRowObject->$fieldName; ?>
<?php endforeach; ?> 
```

因此，然后在特定表的 Table 类中，您可以创建一个属性/方法以按照您希望的顺序获取字段：

```
public function getDisplayOrder() {
   // fake column names obviously... use yours here.
   return array(
      'column5',
      'column1',
      'column4',
      'column2',
      'column3'
   );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:11:54.807

当你做 db select 时，你可以选择你想要的列，所以不要选择 *，

你确实从表名中选择 col5,col3,col2,col6,col1

这将改变列的顺序

$select = $db->select() ->from(array('t' => 'table'), array('t.col2', 'p.col1`'));

# asp.net - 将 www 添加到所有链接 .Net

> ID：12583816
> 
> 赞同：0
> 
> 时间：2012-09-25T13:17:55.787
> 
> 标签：asp.net, redirect, rewrite

我把这段代码写在`Application_BeginRequest`

```
if (!Request.IsLocal && Request.Url != null && !Request.Url.ToString().Contains("www."))
{
    string requestedUrl = Request.Url.ToString();

    Response.Redirect(requestedUrl.Replace("http://", "http://www.").Replace("https://", "https://www."));
} 
```

有没有更好的方法来做到这一点？

# java - 创建后按指定顺序设置JTable的列

> ID：12583817
> 
> 赞同：2
> 
> 时间：2012-09-25T13:17:56.037
> 
> 标签：java, swing, jtable

有一个 JTable，其中的列按预定义顺序排列。像

+------------------------+

|标识 | 姓名 |年龄 |

我想按顺序移动列（例如 name=0、age=1、id=2）。

+------------------------+

|名称 | 年龄 | 编号 |

我怎样才能做到这一点？JTable 有方法 moveColumns，但不幸的是这还不够。假设 order 存储在 map: 中。

```
Map<String, Integer> columnOrder = getOrder();
for(Map.Entry<String, Integer> e : columnOrder.entrySet()) {
    int columnIndex = jtable.convertColumnIndexToView(jtable.getColumn(e.getKey()).getModelIndex());
    jtable.getColumnModel().moveColumn(columnIndex, e.getValue());
} 
```

这不起作用，因为 moveColumn 也会移动其他列，所以从文档中：

```
void moveColumn(int columnIndex,
          int newIndex) 
```

> 将 columnIndex 处的列及其标题移动到 newIndex。columnIndex 处的旧列现在将在 newIndex 处找到。曾经位于 newIndex 的列**向左或向右移动以腾出空间。**

我可以（动态地）以某种方式将列的顺序与我的地图中的顺序完全相同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:36:44.013

潜在的问题当然是`Vector`，它用于`DefaultTableColumnModel`存储列并且它们的顺序没有像样的移动支持。移动是作为删除和添加实现的，这会触发“向左或向右移动”行为。

但是，您可以使用此知识以正确的顺序（从最低索引到最高索引）简单地移动列。

从...开始

```
|id | name |age | 
```

到

```
|name | age | id | 
```

可以通过首先移动`name`到索引 0 来实现。这将导致

```
|name|id|age 
```

向量。如果您随后将年龄移动到索引 1，它将首先执行删除

```
|name|id 
```

然后在索引 1 处插入

```
|name|age|id 
```

通过确保元素始终移动到其原始位置的左侧，您知道移动将如何进行。

当然这取决于实现细节，但是编写一个快速的单元测试来支持您的假设并使用这些实现细节（或编写您自己的`TableColumnModel`;-)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:22:56.080

*   [JTables RowSorter](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)已实现[公共抽象 List getSortKeys()](http://docs.oracle.com/javase/6/docs/api/javax/swing/RowSorter.html#getSortKeys%28%29)

*   但是[为什么要重新发明轮子 @Darryl Burke](http://tips4java.wordpress.com/2010/08/29/multisort-table-header-cell-renderer/)和[关于 SortKeys](http://tips4java.wordpress.com/?s=DefaultTableHeaderCellRenderer)

编辑

> 不，我不需要对行进行排序，我需要将列按顺序排列

*   看看[TableColumnModel#moveColumn(int columnIndex, int newIndex)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumnModel.html#moveColumn%28int,%20int%29)

*   [关于的例子`Stack<TableColumn>`可能在这里](https://stackoverflow.com/a/10089138/714968)

# cocoa - NSButtons 在用作自定义工具栏视图的子视图时会留下人工制品

> ID：12583818
> 
> 赞同：4
> 
> 时间：2012-09-25T13:17:56.847
> 
> 标签：cocoa, nsview, nsbutton

我在一个简单的矩形 NSview 中放置了几个按钮，它充当自定义工具栏。在第一次渲染时，按钮/视图按预期出现，但每次按下按钮时（有时根本没有鼠标交互）就会开始出现人工制品。

**前**

![在此处输入图像描述](../Images/29864085bc1a6b5c377ee1ba5b9a0d57.png)

**后**

![在此处输入图像描述](../Images/0056823da4d9b3a6c8d58e3ca8bae5f6.png)

我可以通过在所有动作和焦点方法中调用 [self.toolbarView setNeedsDisplay:YES] 来消除伪影，但这似乎是一个 hack，有没有什么干净的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:08:21.673

这是一个初学者的问题。在 drawRect 方法中

```
- (void)drawRect:(NSRect)dirtyRect 
```

我使用参数`dirtyRect`绘制视图的轮廓，假设它是视图的边界，实际上只有按钮周围的区域在按下时变脏。“人工制品”实际上是我的轮廓被画在了错误的地方。

通过正确使用视图的边界

```
NSRect drawingRect = [self bounds]; 
```

“文物”不再出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:52:38.830

您只需尝试在 IB 中将按钮的聚焦环设置为“无”。

# ruby-on-rails - 将局部变量传递给每个循环rails 3的部分内部

> ID：12583823
> 
> 赞同：5
> 
> 时间：2012-09-25T13:18:43.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, partials

这是我用于渲染部分的代码（@parties 集合正在正确生成，我已经测试过了）：

```
 <% @parties.each do |party| %>
            <div class="item">
              <%= render 'parties/party', :object => party  %>
            </div>
        <% end %> 
```

这是部分代码：

```
<%= party.name %> 
```

但是，我收到以下错误：

```
undefined method `name' for nil:NilClass 
```

我不知所措，请有人帮忙:-|

此外，这是控制器渲染包含部分视图的代码（控制器称为 default_controller）：

```
def index
    @parties = Party.all
end 
```

这不是party_controller 有什么后果吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T13:35:09.943

我已经尝试过类似下面的方法并且它有效

```
<%= render :partial => 'party', :object => party  %> 
```

我可以像访问一样访问`party.name`。局部变量以此处的部分名称命名`party`。

***注意：***我假设你的两个部分都是`parties_controller`. 所以这应该有效。

***更新：*** 这是我再次尝试过的

```
class PostsController < ApplicationController
    #... ...
    def index
        @posts = Post.all
        @comments = Comment.all #<---- Loading comments from PostsController
        #... ...
    end  
end 
```

* * *

```
#views/posts/index.html.erb

<% @comments.each do |comment| %>
    <%= render :partial=>"comments/comment", :object=>comment %>
<% end %> 
```

* * *

```
#views/comments/_comment.html.erb

<%= comment.body %> 
```

* * *

及其工作:)

# jquery - 单页导航只能在滚动后触摸

> ID：12583824
> 
> 赞同：0
> 
> 时间：2012-09-25T13:18:49.687
> 
> 标签：jquery, mobile, navigation

我为移动设备构建了一个具有响应能力的页面。我正在为菜单使用固定位置。有一个菜单按钮，在“触摸”它后会显示一个子按钮。这很完美。但是在使用菜单项后，我必须先滚动页面，然后才能再次单击菜单按钮。

任何想法为什么会这样？

这是为了切换子菜单div：

```
<script>
          $('#navmobile').click(function(){
             $('.submenu').toggle();
          });

</script> 
```

这个如果子菜单：

```
<ul id="navmobile">
                        <li><a href="">MENÜ</a></li>
                            <ul class="submenu">
                              <li class="current"><a href="#section-1">Einleitung</a></li>
                              <li><a href="#section-2">Menüpunkt1</a></li>
                              <li><a href="#section-3">Menüpunkt2</a></li>
                              <li><a href="#section-4">Menüpunkt3</a></li>
                              <li><a href="#section-5">Menüpunkt4</a></li>
                            </ul>
                    </ul> 
```

和CSS：

```
#navmobile {display: block !important; z-index: 100000}
    #navmobile li {float: left; list-style: none; margin: 0 18px 0 0; font-size: 26px; text-transform: uppercase; font-weight: bold; -moz-margin-end: 26px}
    #navmobile li a {text-decoration: none;padding: 2px 4px;}
    #navmobile li.current a, li:hover a{color: #fff; background: #2b9ad0}
    #navmobile .submenu {display: none}
    #navmobile .submenu {width: 300px; position: absolute; left:-130px; top: 35px; background: #efefef; padding: 5px; border: 2px solid #ddd;border-radius: 1px}
    #navmobile .submenu li a{font-size: 30px; text-align: right; line-height: 60px} 
```

以及导航周围容器的css：

```
 .navigation {width: 200px !important;height: 20px;position: fixed;top: 45px;left: 400px} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:01:20.867

我自己得到了。这是高度

*   菜单. 您确实定义了比正常更大的高度。

# web-services - Asp 1.1 中的 Web 服务不在 http://localhost/ 上工作，但在 Visual Studio http://localhost:14475/ 上工作

> ID：12583825
> 
> 赞同：1
> 
> 时间：2012-09-25T13:18:58.713
> 
> 标签：web-services, localhost

我需要使用第 3 方网络服务。我的环境：Asp 1.1、IIS 5.1、IE 7+ 和代理服务器后面。我面临身份验证问题。

第 1 步：我已成功添加 Web 服务 - 通过为我们的代理服务器提供我的身份验证详细信息。

第 2 步：用于使用服务的代码

```
WebProxy proxyObject = new WebProxy("PROXY SERVER URI:PORT/", true);
proxyObject.Credentials = CredentialCache.DefaultCredentials;
myObj.Credentials = System.Net.CredentialCache.DefaultCredentials;
myObj.Proxy = proxyObject; 
```

第 3 步：我得到的响应：“远程服务器返回错误：(407) 需要代理身份验证。” 第 4 步：我将凭据中的代码更改为：

```
proxyObject.Credentials = new NetworkCredential("UID", "PASSWORD"); 
```

第 5 步：结果：正确的结果。

我也发现了这一点：即使我需要在 1.1 中工作，但是当我尝试在 2.0 中使用时： 第 1 步：使用的代码：

```
myObj.Proxy = WebRequest.DefaultWebProxy;
myObj.Credentials = System.Net.CredentialCache.DefaultCredentials;
myObj.Proxy.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

第 2 步：`http://localhost:14475/TransUnion_VS2008/HostWS_FW.asmx?op=TURequest`当我从 VS2008 运行时，它与端口号一样工作正常

`http://localhost/TU_HostWS/Service.asmx`第 3 步：但是当我从 IIS 运行时，相同的代码不起作用。它抛出以下错误消息：

System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机在 System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) 在 System.Net.ServicePoint 的 System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) 未能响应 XXX.XXX.XXX.XXX:XXX .ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) --- 内部异常堆栈跟踪结束---在 System.Net.HttpWebRequest.GetRequestStream System.Net.HttpWebRequest 中的（TransportContext& 上下文）。GetRequestStream() at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at TU_Prod.CreditReport.ProcessRequestXMLV2(TUCANREL4 TUCANREL4, REL4Report& REL4Report) at Service.TURequest()

`http://localhost/TU_HostWS/Service.asmx`第 4 步。仅当我更改代码并提供我的身份验证详细信息时，它才从 IIS 工作：

```
proxyObject.Credentials = new NetworkCredential("UID", "PASSWORD"); 
```

你能帮我吗？我尝试使用 IIS “未设置为 Windows、BASIC 或 Digest，但仅作为匿名”但没有运气。请帮忙..

# android - 如何在 Android 的拨出呼叫屏幕上添加按钮

> ID：12583827
> 
> 赞同：2
> 
> 时间：2012-09-25T13:19:00.770
> 
> 标签：android, call, android-button

我正在尝试在拨出呼叫屏幕上添加按钮或选项菜单我已经尝试过此代码，但它显示致命错误请验证代码

```
public class CustomOutgoingCallActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    IntentFilter filter = new IntentFilter(Intent.ACTION_NEW_OUTGOING_CALL);
    filter.addAction(Intent.ACTION_NEW_OUTGOING_CALL);
    BroadcastReceiver mReceiver = new OutgoingReciver();
    registerReceiver(mReceiver, filter);

} 
```

公共类 OutgoingReciver 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) {
    Bundle bundle = intent.getExtras();
    if (bundle == null)
        return;
    String phoneNumber = null;

    // Incoming call
    String state = bundle.getString(TelephonyManager.EXTRA_STATE);
    if ((state != null)
            && (state
                    .equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))) {
        phoneNumber = bundle
                .getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
        System.out.println("in coming number :-" + phoneNumber);
        LinearLayout ll = new LinearLayout(context);

        Button btnTag = new Button(context);
        btnTag.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        btnTag.setText("phone No " + phoneNumber);
        btnTag.setId(1);
        ll.addView(btnTag);

    }
    // Outgoing call
    else if (state == null) {
        phoneNumber = bundle.getString(Intent.EXTRA_PHONE_NUMBER);
        System.out.println(" out going number :-" + phoneNumber);
          LinearLayout ll = new LinearLayout(context);

          Button btnTag = new Button(context); btnTag.setLayoutParams(new
          LayoutParams(LayoutParams.WRAP_CONTENT,
          LayoutParams.WRAP_CONTENT)); btnTag.setText("phone No " +
          phoneNumber); btnTag.setId(111111);
        ll.addView(btnTag);

    }
} 
```

堆栈跟踪

```
09-26 10:46:20.255: I/System.out(274):  out going number :-7875851207
09-26 10:46:57.076: E/ActivityThread(274): Activity com.cssl.core.CustomOutgoingCallActivity has leaked IntentReceiver com.cssl.core.OutgoingReciver@44ee7610 that was originally registered here. Are you missing a call to unregisterReceiver()?
09-26 10:46:57.076: E/ActivityThread(274): android.app.IntentReceiverLeaked: Activity com.cssl.core.CustomOutgoingCallActivity has leaked IntentReceiver com.cssl.core.OutgoingReciver@44ee7610 that was originally registered here. Are you missing a call to unregisterReceiver()?
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread$PackageInfo$ReceiverDispatcher.<init>(ActivityThread.java:939)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread$PackageInfo.getReceiverDispatcher(ActivityThread.java:734)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:791)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:778)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:772)
09-26 10:46:57.076: E/ActivityThread(274):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
09-26 10:46:57.076: E/ActivityThread(274):     at com.cssl.core.CustomOutgoingCallActivity.onCreate(CustomOutgoingCallActivity.java:18)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-26 10:46:57.076: E/ActivityThread(274):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 10:46:57.076: E/ActivityThread(274):     at android.os.Looper.loop(Looper.java:123)
09-26 10:46:57.076: E/ActivityThread(274):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-26 10:46:57.076: E/ActivityThread(274):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 10:46:57.076: E/ActivityThread(274):     at java.lang.reflect.Method.invoke(Method.java:521)
09-26 10:46:57.076: E/ActivityThread(274):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-26 10:46:57.076: E/ActivityThread(274):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-26 10:46:57.076: E/ActivityThread(274):     at dalvik.system.NativeStart.main(Native Method)
09-26 10:47:02.566: W/IInputConnectionWrapper(274): showStatusIcon on inactive InputConnection
09-26 10:47:08.676: I/System.out(274):  out going number :-0377778888
09-26 10:47:25.496: D/dalvikvm(274): GC_EXPLICIT freed 1681 objects / 127448 bytes in 210ms 
```

# android - 选项卡内的 Zxing 库集成

> ID：12583833
> 
> 赞同：2
> 
> 时间：2012-09-25T13:19:28.483
> 
> 标签：android, customization, qr-code, zxing

我正在将 Zxing 库集成到应用程序中。起初我使用一个按钮来实例化扫描，所以我使用了 Intent Integrator，然后我想在我的选项卡中包含扫描视图。（android.support.v4.app.Fragment）。现在我无法使用 intentIntegrator，因为我需要在用户单击 QR 选项卡时调用“CaptureActivity”。我知道如何设法将 QR 选项卡锁定为横向（制作了一个 OntabChange 侦听器，并始终将应用程序保持在横向以用于 QR 选项卡）。现在我在其中一个选项卡中有一个自定义视图，并且“有时”一个“添加按钮图像”（在我的自定义视图中使用）出现在扫描视图上，这使得无法扫描任何内容。你们有什么要评论的吗，我知道处理你的代码不是一个好主意，我很好奇以至于我无法阻止自己，对不起。我现在搞砸了，我已经在三星 Galaxy 选项卡和 Adam 平板电脑上尝试了我的应用程序（带有破解的 2.2）。两者都有上述场景在应用程序的首次启动时出现和消失，当我转到本机相机并拍照并返回时，它在三星银河选项卡中运行良好..但在亚当平板电脑中，本机相机只是不'根本打不开。

提前致谢 快乐编码

# hadoop - Cassandra 和 MapReduce - 最低设置要求

> ID：12583834
> 
> 赞同：5
> 
> 时间：2012-09-25T13:19:38.760
> 
> 标签：hadoop, mapreduce, cassandra

我需要在我的 Cassandra 集群上执行 MapReduce，包括数据局部性，即。每个作业仅查询属于作业运行的本地 Casandra 节点的行。

存在教程，介绍如何在旧 Cassandra 版本 (0.7) 上为 MR 设置 Hadoop。对于当前版本，我找不到这样的。

自 0.7 以来在这方面发生了什么变化？

最小设置（Hadoop+HDFS+...）需要哪些软件模块？

我需要 Cassandra Enterprise 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T06:59:17.140

Cassandra 包含一些足以与 Hadoop 集成的类：

*   `ColumnFamilyInputFormat`- 这是 Map 函数的输入，当使用 Cassandra 的随机分区器时，它可以从单个 CF 中读取所有行，或者在与 Cassandra 的有序分区器一起使用时可以读取行范围。Cassandra 集群具有环形式，其中每个环部分负责具体的键范围。Input Format 的主要任务是将 Map 输入划分为可以并行处理的数据部分——这些部分被称为`InputSplits`。在 Cassandra 的情况下，这很简单——每个环范围都有一个主节点，这意味着输入格式将为`InputSplit`每个环元素创建一个主节点，这将导致一个 Map 任务。现在我们想在存储数据的同一主机上执行我们的 Map 任务。每个都`InputSplit`记住其环部分的 IP 地址 - 这是负责此特定密钥范围的 Cassandra 节点的 IP 地址。`JobTracker`将创建地图任务表单`InputSplits`并将其分配给`TaskTracker`执行。`JobTracker`将尝试查找`TaskTracker`具有相同 IP 地址的地址`InputSplit`- 基本上我们必须`TaskTracker`在 Cassandra 主机上启动，这将保证数据的局部性。
*   `ColumnFamilyOutputFormat`- 这为 Reduce 函数配置上下文。以便将结果存储在 Cassandra 中
*   所有 Map 函数的结果必须组合在一起，然后才能传递给 reduce 函数 - 这称为 shuffle。它使用本地文件系统——从 Cassandra 的角度来看，这里不需要做任何事情，我们只需要配置本地临时目录的路径。也没有必要用其他东西替换这个解决方案（比如在 Cassandra 中持久化）——这些数据不需要复制，Map 任务是幂等的。

基本上使用提供的 Hadoop 集成可以在数据所在的主机上执行 Map 作业，而 Reduce 函数可以将结果存储回 Cassandra——这就是我所需要的。

执行 Map-Reduce 有两种可能性：

*   `org.apache.hadoop.mapreduce.Job`- 此类在一个进程中模拟 Hadoop。它执行 Map-Resuce 任务并且不需要任何额外的服务/依赖项，它只需要访问临时目录来存储映射作业的结果以进行 shuffle。基本上我们必须在 Job 类上调用一些设置器，其中包含诸如 Map 任务、Reduce 任务、输入格式、Cassandra 连接的类名，当设置完成`job.waitForCompletion(true)`时必须调用 - 它启动 Map-Reduce 任务并等待结果。该解决方案可用于快速进入 Hadoop 世界并进行测试。它不会扩展（单个进程），它会通过网络获取数据，但仍然 - 它可以开始。
*   真正的 Hadoop 集群 - 我还没有设置它，但据我了解，上一个示例中的 Map-Reduce 作业可以正常工作。我们还需要额外的 HDFS，它将用于在 Hadoop 集群中分发包含 Map-Reduce 类的 jar。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T14:11:13.367

是的，我一直在寻找同样的东西，似乎 DataStaxEnterprise 具有简化的 Hadoop 集成，请阅读此[http://wiki.apache.org/cassandra/HadoopSupport](http://wiki.apache.org/cassandra/HadoopSupport)

# c# - 无法使用 DbLinq 删除子实体

> ID：12583839
> 
> 赞同：0
> 
> 时间：2012-09-25T13:20:07.080
> 
> 标签：c#, sqlite, dblinq

这个问题与我[之前](https://stackoverflow.com/questions/12570634/equal-is-not-defined-between-type-nullableint32-and-int32)的问题有关。你可以在那里找到几乎所有的代码，除了这里报告的异常。我用 int 字段替换了可为空的字段，并且生成的代码将 null 我放在 -1 的位置。通过这种方式，我设法解决了 DbLinq 代码引发的恼人异常。但现在我不能删除子实体！特别是，我有一个与一些地址相关的患者。表 PatientAddresses 包含三元组中的所有地址（PatientID、Address、DomicileStatus），其中前两个成员构成表的主键。我写了一个测试来指出这个问题：

```
static void TestAddresses()
    {
        Patient p1 = CreateRandomPatient();
        PatientAddress a1 = CreateRandomAddress();

        p1.Addresses.Add(a1);
        Database.Source.Patients.InsertOnSubmit(p1);
        TestUtility.SaveCloseAndReopen();

        Patient p2 = Database.Source.Patients.Single(p => p.ID == p1.ID);

        Debug.Assert(p2.Addresses.Count == 1);
        Debug.Assert(p2.Addresses[0].PatientID == a1.PatientID && p2.Addresses[0].Address.Equals(a1.Address));
        Debug.Assert(Database.Source.PatientsAddresses.Where(a => a.PatientID == a1.PatientID && a.Address == a1.Address).Count() > 0);

        p2.Addresses.RemoveAt(0);
        TestUtility.SaveCloseAndReopen();

        p2 = Database.Source.Patients.Single(p => p.ID == p1.ID);

        Debug.Assert(p2.Addresses.Count == 0); // <-- HERE
        Debug.Assert(!Database.Source.PatientsAddresses.Contains(a1));
    } 
```

测试在指示的行失败。长话短说，即使我删除了一个地址，它也会保留在数据库中。我什至尝试删除相应的 PatientAddress 行，但无济于事。我尝试了三个或四个变体，但我无法删除患者的地址。用于生成这些表的代码如下：

```
create table Patients (
ID integer primary key,
FirstName text not null,
LastName  text not null,
Profession text,
IsMarried integer not null default 0,
HasChildren integer not null default 0,
Birthday integer not null    
);

create table PatientsAddresses (
PatientID integer,
Address text,
DomicileStatus text,
primary key (PatientID, Address),
foreign key (PatientID) references Patients(ID)
    on delete cascade 
    on update cascade
); 
```

我想不出避免这种行为的方法，谷歌也无济于事。

# sql - SQL Azure 超时；无法在本地 SQL Server 复制

> ID：12583850
> 
> 赞同：10
> 
> 时间：2012-09-25T13:20:40.587
> 
> 标签：sql, performance, rest, azure, latency

在我们的业务线中，我们托管了一个基于 REST 的 API，该 API 由 Windows Azure 托管，并使用 SQL Azure 作为数据库存储。

Web 角色（Windows 2008R2、IIS 7.5、WCF、大型实例）和 SQL Azure 都托管在北欧地区。

问题是，当我们执行密集的 SQL 工作时，我们经常会收到*“超时已过期。在操作完成之前超时时间已过或服务器没有响应”。*.

这里让我烦恼的是，无论我们做什么，我们都无法在我们的本地 SQL 服务器（SQL Server 2008R2）上引发这种情况。

感谢任何有助于澄清这个谜团的帮助，因为 Web 角色实例似乎没有直接与 SQL Azure 实例对话，尽管两者都位于北欧。

更详细的例外：

```
<SqlException>
    <Message>Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.</Message>
    <StackTrace>
        <Line>at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)</Line>
        <Line>at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()</Line>
        <Line>at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)</Line>
        <Line>at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()</Line>
        <Line>at System.Data.SqlClient.SqlDataReader.get_MetaData()</Line>
        <Line>at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)</Line>
        <Line>at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)</Line>
        <Line>at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)</Line>
        <Line>at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)</Line>
        <Line>at System.Data.SqlClient.SqlCommand.ExecuteScalar()</Line>
        <Line>at SyncInvokeAddCollaboratorFieldInstance(Object , Object[] , Object[] )</Line>
        <Line>at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)</Line>
        <Line>at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)</Line>
    </StackTrace>
    <UserDefinedInformation>
        <HelpLink.ProdName><![CDATA[Microsoft SQL Server]]></HelpLink.ProdName>
        <HelpLink.ProdVer><![CDATA[11.00.2065]]></HelpLink.ProdVer>
        <HelpLink.EvtSrc><![CDATA[MSSQLServer]]></HelpLink.EvtSrc>
        <HelpLink.EvtID><![CDATA[-2]]></HelpLink.EvtID>
        <HelpLink.BaseHelpUrl><![CDATA[http://go.microsoft.com/fwlink]]></HelpLink.BaseHelpUrl>
        <HelpLink.LinkId><![CDATA[20476]]></HelpLink.LinkId>
    </UserDefinedInformation>
</SqlException> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T17:44:44.017

如果您需要执行 SQL 密集型工作（例如，规范化 OLTP 数据库中的大量 INSERT 语句），您需要在代码中包含故障转移逻辑。

本地 SQL 服务器不会受此影响，因此在切换到 SQL Azure 之前要考虑到这一点。

这两篇文章启发了我（特别感谢**Joachim Isaksson**的指导）：

[http://blogs.msdn.com/b/sqlazure/archive/2010/05/11/10011247.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/11/10011247.aspx)

[http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/7a50985d-92c2-472f-9464-a6591efec4b3/](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/7a50985d-92c2-472f-9464-a6591efec4b3/)

总而言之，我提供了两个结果，现在结果相同（在某些未添加的记录之前，就原始问题而言，缺少故障转移逻辑：超时已过期）：

本地 SQL Server：427 秒内 179.285 条记录

SQL Azure w。故障转移逻辑：179.285 条记录在 2.247 秒内 - 慢了 5.2 倍！

我希望这可以帮助其他在 SQL Azure 中苦苦挣扎的人。积极的一面；您（艰难地）了解到您在本地内部应用程序中很幸运并享有特权:-)

注意：我仍然想解释这是如何发生的......似乎很容易归咎于延迟，不是吗？

# excel - 将特定单元格中具有相同值的所有工作表提取到新工作簿

> ID：12583852
> 
> 赞同：1
> 
> 时间：2012-09-25T13:20:44.337
> 
> 标签：excel, excel-2010, vba

对于每个员工的销售佣金，我有一个包含 300 多个标签的文件。一些员工在一个由 2-6 名员工组成的团队中。团队名称在每个选项卡上，即使是一个团队，也在单元格 AA3 中。我想让 VBA 代码提取所有 AA3（团队名称）与名为“团队”和 $AA$3 的新文件相同的工作表。

我有一个宏可以将每张工作表提取到一个新文件中，但我无法弄清楚如何正确编写循环来完成我所要求的操作。

我将每张工作表提取到新文件的代码如下：

```
 Sub Copy_Every_Sheet_To_New_Workbook_2()
    'Working in 97-2010
    Dim FileExtStr As String
    Dim FileFormatNum As Long
    Dim Sourcewb As Workbook
    Dim Destwb As Workbook
    Dim sh As Worksheet
    Dim DateString As String
    Dim FolderName As String
    Dim TEAM As String
    Dim Team2 As String

    With Application
        .ScreenUpdating = False
        .EnableEvents = False
        .Calculation = xlCalculationManual
    End With

    'Copy every sheet from the workbook with this macro
    Set Sourcewb = ThisWorkbook

    'Create new folder to save the new files in
    DateString = Format(Now, "yyyy-mm-dd hh-mm-ss")
    FolderName = Sourcewb.Path & "\" & Sourcewb.Name & " " & DateString
    MkDir FolderName

    'Copy every visible sheet to a new workbook
    For Each sh In Sourcewb.Worksheets

        'If the sheet is visible then copy it to a new workbook
        If sh.Visible = -1 Then
            sh.Copy

            'Set Destwb to the new workbook
            Set Destwb = ActiveWorkbook

            'Determine the Excel version and file extension/format
            With Destwb
                If Val(Application.Version) < 12 Then
                    'You use Excel 97-2003
                    FileExtStr = ".xls": FileFormatNum = -4143
                Else
                    'You use Excel 2007-2010
                    If Sourcewb.Name = .Name Then
                        MsgBox "Your answer is NO in the security dialog"
                        GoTo GoToNextSheet
                    Else
                        Select Case Sourcewb.FileFormat
                        Case 51: FileExtStr = ".xlsx": FileFormatNum = 51
                        Case 52:
                            If .HasVBProject Then
                                FileExtStr = ".xlsm": FileFormatNum = 52
                            Else
                                FileExtStr = ".xlsx": FileFormatNum = 51
                            End If
                        Case 56: FileExtStr = ".xls": FileFormatNum = 56
                        Case Else: FileExtStr = ".xlsb": FileFormatNum = 50
                        End Select
                    End If
                End If
            End With

            'Change all cells in the worksheet to values if you want
            If Destwb.Sheets(1).ProtectContents = False Then
                With Destwb.Sheets(1).UsedRange
                    .Cells.Copy
                    .Cells.PasteSpecial xlPasteValues
                    .Cells(1).Select
                End With
                Application.CutCopyMode = False
            End If

            'Save the new workbook and close it
            With Destwb
                .SaveAs FolderName & "\" & Destwb.Sheets(1).Range("AK2").Value & FileExtStr, _
                        FileFormat:=FileFormatNum
                .Close False
            End With

        End If
GoToNextSheet:
    Next sh

    MsgBox "You can find the files in " & FolderName

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
        .Calculation = xlCalculationAutomatic
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:04:02.747

按照 Scott 的建议，这里有一个函数，它将返回工作簿中给定单元格地址的所有唯一值。它利用了 Collection 对象以及您只能向其添加唯一值的事实。例如，您第二次尝试添加“团队 A”时，它将跳过它（在 On Error 语句中）：

```
Function GetUniqueCellValues(wb As Excel.Workbook, cellAddress As String) As Collection
Dim ws As Excel.Worksheet
Dim coll As Collection

Set coll = New Collection
For Each ws In wb.Worksheets
    On Error Resume Next
    coll.Add ws.Range(cellAddress).Value, ws.Range(cellAddress).Text
    On Error GoTo 0
Next ws
Set GetUniqueCellValues = coll
End Function 
```

我喜欢尝试对函数进行编码，以便它们依赖于当前工作簿中的内容或其他内容，而不是对列表进行硬编码。

如果您想要`AA3`包含代码的工作簿中所有工作表的单元格中的每个唯一值，您可以这样称呼它，即`ThisWorkbook`：

```
Sub test()

Dim collTeamNames As Collection
Dim i As Long

Set collTeamNames = GetUniqueCellValues(ThisWorkbook, "AA3")
For i = 1 To collTeamNames.Count
Debug.Print collTeamNames(i)
    'do your processing here
Next i
End Sub 
```

# c# - Datagridview celltype 到复选框

> ID：12583853
> 
> 赞同：0
> 
> 时间：2012-09-25T13:20:53.103
> 
> 标签：c#, mysql, datagridview, checkbox

在我的 datbase(mysql) ia 中有一个包含一个列的表，其中包含一个 / 零和一个的列，当我将它加载到我的表中并将这个表附加到我的 datagridview 时，我得到一个很好的列，其中包含一个和零。

那里没问题。但我想将列类型更改为复选框列，但我不知道该怎么做。

我试图改变我的数据表的列数据类型，我也试图改变我的datagriview mut的列类型似乎没有任何工作......

我正在使用 C#.net 和 Mysql

有人可以在这件事上给我建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:24:44.547

您可以添加`DataGridViewCheckBoxColumn`到您的`DataGridView`：属性列。然后在该列的属性中，您可以设置`FalseValue`为 0，例如设置`TrueValue`为 1。您可以在 VS 设计器中完成所有这些操作。

# javascript - 打开具有 Web 后备功能的本机应用程序

> ID：12583855
> 
> 赞同：1
> 
> 时间：2012-09-25T13:20:58.000
> 
> 标签：javascript, native

当用户访问某个 URL 时，我们正在尝试启动我们的本机应用程序。

我们的应用程序已经注册了一个自定义 URL 架构，因此这部分已经完成。
问题是实现回退。

我想要的是这样的：

```
try {
  # Redirect to the app
} catch(e) {
  # Redirect to the web version
} 
```

这显然不起作用，因为`window.location`不会引发异常。

我试过这样做：

```
window.location = 'some-schema://some/url';
setTimeout(function() { window.location = '/some/url'; }, 100); 
```

当用户访问 URL 时，它会打开应用程序。但是，当用户返回浏览器时，会执行回退代码并且用户会看到 Web 版本。

这只是一个缺点。下次用户访问该 URL 时，由于某种未知原因，应用程序无法打开（仅在 android 上测试）。由于我们不使用 301 重定向，我不明白为什么它会缓存重定向。

我几乎放弃了，并且很可能会实现一个视图，即“如果您有应用程序，请单击此处，否则请单击此处”。

在您询问之前，我无法从 Web 版本打开应用程序，因为它纯粹是用 JS 编写的，并且会`window.location`中断 ajax 请求和图像加载。

# winapi - win32 winsocket

> ID：12583857
> 
> 赞同：0
> 
> 时间：2012-09-25T13:21:09.290
> 
> 标签：winapi, windows-ce, winsock2

我有一个问题，我已经尝试解决一个星期了！但我没有在互联网上获得任何信息，这导致了解决方案。

问题如下：我尝试为 Windows Embedded 编写一个简单的 Win32-GUI-Application。我正在使用 Visual Studio 2008 Professional。在应用程序开始时，应建立与服务器的连接。到目前为止，这是我的代码：

```
// Test.cpp : Definiert den Einstiegspunkt für die Anwendung.
//

#include "stdafx.h"
#include "Test.h"
#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>

// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib
#pragma comment (lib, "Ws2_32.lib")
#pragma comment (lib, "Mswsock.lib")
#pragma comment (lib, "AdvApi32.lib")

#define DEFAULT_BUFLEN 512
#define DEFAULT_PORT "27015"
#define MAX_LOADSTRING 100

// Globale Variablen:
HINSTANCE           g_hInst;            // Aktuelle Instanz
HWND                g_hWndMenuBar;      // Menüleistenhandle

// Vorwärtsdeklarationen der in diesem Codemodul enthaltenen Funktionen:
ATOM            MyRegisterClass(HINSTANCE, LPTSTR);
BOOL            InitInstance(HINSTANCE, int);
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPTSTR    lpCmdLine,
                   int       nCmdShow)
{
    MSG msg;

    WSADATA wsaData;
    SOCKET ConnectSocket = INVALID_SOCKET;
    struct addrinfo *result = NULL,
                    *ptr = NULL,
                    hints;
    char *sendbuf = "this is a test";
    char recvbuf[DEFAULT_BUFLEN];
    int iResult;
    int recvbuflen = DEFAULT_BUFLEN;

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0) {
        ;
        return 1;
    }

    ZeroMemory( &hints, sizeof(hints) );
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;

    // Resolve the server address and port
    iResult = getaddrinfo("localhost", DEFAULT_PORT, &hints, &result);
    if ( iResult != 0 ) {
        ;
        WSACleanup();
        return 1;
    }

    // Attempt to connect to an address until one succeeds
    for(ptr=result; ptr != NULL ;ptr=ptr->ai_next) {

        // Create a SOCKET for connecting to server
        ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype, 
            ptr->ai_protocol);
        if (ConnectSocket == INVALID_SOCKET) {
            ;
            WSACleanup();
            return 1;
        }

        // Connect to server.
        iResult = connect( ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
        if (iResult == SOCKET_ERROR) {
            closesocket(ConnectSocket);
            ConnectSocket = INVALID_SOCKET;
            continue;
        }
        break;
    }

    freeaddrinfo(result);

    if (ConnectSocket == INVALID_SOCKET) {
        ;
        WSACleanup();
        return 1;
    }

    // Send an initial buffer
    iResult = send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );
    if (iResult == SOCKET_ERROR) {
        ;
        closesocket(ConnectSocket);
        WSACleanup();
        return 1;
    }

    // shutdown the connection since no more data will be sent
    iResult = shutdown(ConnectSocket, SD_SEND);
    if (iResult == SOCKET_ERROR) {
        ;
        closesocket(ConnectSocket);
        WSACleanup();
        return 1;
    }

    // Receive until the peer closes the connection
    do {

        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);
        if ( iResult > 0 )
            ;
        else if ( iResult == 0 )
            ;
        else
            ;

    } while( iResult > 0 );

    // cleanup
    closesocket(ConnectSocket);
    WSACleanup();

    // Anwendungsinitialisierung ausführen:
    if (!InitInstance(hInstance, nCmdShow)) 
    {
        return FALSE;
    }

    HACCEL hAccelTable;
    hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_TEST));

    // Hauptmeldungsschleife:
    while (GetMessage(&msg, NULL, 0, 0)) 
    {
        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg)) 
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    return (int) msg.wParam;
}

//
//  FUNKTION: MyRegisterClass()
//
//  ZWECK: Registriert die Fensterklasse.
//
//  KOMMENTARE:
//
ATOM MyRegisterClass(HINSTANCE hInstance, LPTSTR szWindowClass)
{
    WNDCLASS wc;

    wc.style         = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_TEST));
    wc.hCursor       = 0;
    wc.hbrBackground = (HBRUSH) GetStockObject(WHITE_BRUSH);
    wc.lpszMenuName  = 0;
    wc.lpszClassName = szWindowClass;

    return RegisterClass(&wc);
}

//
//   FUNKTION: InitInstance(HINSTANCE, int)
//
//   ZWECK: Speichert das Instanzenhandle und erstellt das Hauptfenster.
//
//   KOMMENTARE:
//
//        In dieser Funktion wird das Instanzenhandle in einer globalen Variablen gespeichert, und das
//        Hauptprogrammfenster wird erstellt und angezeigt.
//
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
    HWND hWnd;
    TCHAR szTitle[MAX_LOADSTRING];      // Titelleistentext
    TCHAR szWindowClass[MAX_LOADSTRING];    // Klassenname des Hauptfensters

    g_hInst = hInstance; // Instanzenhandle in der globalen Variablen speichern

    // SHInitExtraControls sollte einmal während der Initialisierung der Anwendung aufgerufen werden, um alle
    // gerätespezifischen Steuerelemente wie CAPEDIT und SIPPREF zu initialisieren.
    SHInitExtraControls();

    LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING); 
    LoadString(hInstance, IDC_TEST, szWindowClass, MAX_LOADSTRING);

    //Bei bereits gestarteter Ausführung Fokus auf das Fenster verschieben und beenden
    hWnd = FindWindow(szWindowClass, szTitle);  
    if (hWnd) 
    {
        // Fokus auf das erste untergeordnete Fenster festlegen
        // "| 0x00000001" wird verwendet, um alle eigenen Fenster in den Vordergrund zu stellen und
        // zu aktivieren.
        SetForegroundWindow((HWND)((ULONG) hWnd | 0x00000001));
        return 0;
    } 

    if (!MyRegisterClass(hInstance, szWindowClass))
    {
        return FALSE;
    }

    hWnd = CreateWindow(szWindowClass, szTitle, WS_VISIBLE,
        CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, NULL);

    if (!hWnd)
    {
        return FALSE;
    }

    // Wenn das Hauptfenster mithilfe von CW_USEDEFAULT erstellt wird, wird die Höhe der Menüleiste (falls
    // erstellt) nicht berücksichtigt. Daher wird die Größe des Fensters nach dem Erstellen angepasst,
    // sofern eine Menüleiste vorhanden ist.
    if (g_hWndMenuBar)
    {
        RECT rc;
        RECT rcMenuBar;

        GetWindowRect(hWnd, &rc);
        GetWindowRect(g_hWndMenuBar, &rcMenuBar);
        rc.bottom -= (rcMenuBar.bottom - rcMenuBar.top);

        MoveWindow(hWnd, rc.left, rc.top, rc.right-rc.left, rc.bottom-rc.top, FALSE);
    }

    ShowWindow(hWnd, nCmdShow);
    UpdateWindow(hWnd);

    return TRUE;
}

//
//  FUNKTION: WndProc(HWND, UINT, WPARAM, LPARAM)
//
//  ZWECK:  Verarbeitet Meldungen vom Hauptfenster.
//
//  WM_COMMAND  - Verarbeiten des Anwendungsmenüs
//  WM_PAINT    - Zeichnen des Hauptfensters
//  WM_DESTROY  - Beenden-Meldung anzeigen und zurückgeben
//
//
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    static SHACTIVATEINFO s_sai;

    switch (message) 
    {
        case WM_COMMAND:
            wmId    = LOWORD(wParam); 
            wmEvent = HIWORD(wParam); 
            // Menüauswahl bearbeiten:
            switch (wmId)
            {
                case IDM_HELP_ABOUT:
                    DialogBox(g_hInst, (LPCTSTR)IDD_ABOUTBOX, hWnd, About);
                    break;
                case IDM_OK:
                    SendMessage (hWnd, WM_CLOSE, 0, 0);             
                    break;
                default:
                    return DefWindowProc(hWnd, message, wParam, lParam);
            }
            break;
        case WM_CREATE:
            SHMENUBARINFO mbi;

            memset(&mbi, 0, sizeof(SHMENUBARINFO));
            mbi.cbSize     = sizeof(SHMENUBARINFO);
            mbi.hwndParent = hWnd;
            mbi.nToolBarId = IDR_MENU;
            mbi.hInstRes   = g_hInst;

            if (!SHCreateMenuBar(&mbi)) 
            {
                g_hWndMenuBar = NULL;
            }
            else
            {
                g_hWndMenuBar = mbi.hwndMB;
            }

            // Informationsstruktur für die Aktivierung der Shell initialisieren
            memset(&s_sai, 0, sizeof (s_sai));
            s_sai.cbSize = sizeof (s_sai);
            break;
        case WM_PAINT:
            hdc = BeginPaint(hWnd, &ps);

            // TODO: Hier den Zeichnungscode hinzufügen.

            EndPaint(hWnd, &ps);
            break;
        case WM_DESTROY:
            CommandBar_Destroy(g_hWndMenuBar);
            PostQuitMessage(0);
            break;

        case WM_ACTIVATE:
            // Shell über die Aktivierungsmeldung benachrichtigen
            SHHandleWMActivate(hWnd, wParam, lParam, &s_sai, FALSE);
            break;
        case WM_SETTINGCHANGE:
            SHHandleWMSettingChange(hWnd, wParam, lParam, &s_sai);
            break;

        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// Meldungshandler für Infofeld.
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
        case WM_INITDIALOG:
            {
                // Erstellen Sie eine Schaltfläche "Fertig", und passen Sie die Größe an.  
                SHINITDLGINFO shidi;
                shidi.dwMask = SHIDIM_FLAGS;
                shidi.dwFlags = SHIDIF_DONEBUTTON | SHIDIF_SIPDOWN | SHIDIF_SIZEDLGFULLSCREEN | SHIDIF_EMPTYMENU;
                shidi.hDlg = hDlg;
                SHInitDialog(&shidi);
            }
            return (INT_PTR)TRUE;

        case WM_COMMAND:
            if (LOWORD(wParam) == IDOK)
            {
                EndDialog(hDlg, LOWORD(wParam));
                return TRUE;
            }
            break;

        case WM_CLOSE:
            EndDialog(hDlg, message);
            return TRUE;

    }
    return (INT_PTR)FALSE;
} 
```

相关代码只是从msdn复制过来的。但是，我收到以下错误消息：

```
unresolved external symbol "recv" referenced in function WinMain 
```

还有更多的错误，但它们都是一样的。不同之处在于函数的名称（例如，shutdown、send、...）

我在 Win32-Console-Application 中尝试了代码，它运行良好！

有谁知道，为什么这个应用程序不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:12:01.700

如果您查看任何 Windows CE 套接字函数的文档（例如[`recv`](http://msdn.microsoft.com/en-us/library/ee494737.aspx)），您会看到它明确指出您需要的 LIB 文件是`ws2.lib`.

这意味着您需要替换这部分代码：

```
// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib 
#pragma comment (lib, "Ws2_32.lib") 
#pragma comment (lib, "Mswsock.lib") 
#pragma comment (lib, "AdvApi32.lib") 
```

有了这个

```
#pragma comment (lib, "ws2.lib") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:24:16.593

您需要链接正确的 winsock 库。

确保您有正确的库路径。

关注这篇文章：[创建一个基本的 Winsock 应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737629%28v=vs.85%29.aspx)

[接收函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121%28v=vs.85%29.aspx)

# c# - 随着上方网格视图的高度增加，将控件移到页面下方

> ID：12583864
> 
> 赞同：0
> 
> 时间：2012-09-25T13:21:33.117
> 
> 标签：c#, asp.net, gridview

我有`GridView`一个面板，然后我在这个面板下面有另一个面板，里面有一些控件。我们称这两个面板`pnlGrid`和`pnlLower`. html是这样的：

```
 <asp:Panel id = "pnlGrid">
    <!-- Grid View here -->
</asp:Panel>

<asp:Panel id = "pnlLower">
    <!-- Other controls here -->
</asp:Panel> 
```

随着行被添加到网格中，网格的高度不断增加。如果在网格的高度达到最初设置的高度后仍添加行，则网格会变得更高，并且其新行将显示在（或在 z 轴上）`pnlLower`及其控件的上方（或下方）。

我希望随着网格高度的增加，下面的面板，即`pnlLower`（以及它下面的所有其他面板）应该继续向下移动，以便无限期地为网格腾出空间。我不想为网格设置最大高度。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:29:24.533

您可以设置面板的高度并添加 CSS 属性以进行垂直滚动。为此，您可以使用该`overflow`属性。它的值如下：`visible`| `hidden`| `scroll`| `auto`, 并且有属性：`overflow-y`(vertical), `overflow-x`(horizo​​ntal) and just `overflow`(both)。

在您的 css 文件中，您可以添加如下样式：

```
 .scrollPanel {
       overflow-y: scroll;
       height: yourFixedHeightpx;
    } 
```

在您的网络表单上，类似：

```
<asp:Panel ID="pnlGrid" runat="server" CssClass="scrollPanel">
  <!-- Grid View here -->
</asp:Panel>

<asp:Panel ID="pnlLower" runat="server">
    <!-- Other controls here -->
</asp:Panel> 
```

# c# - 测试使用预处理器常量的代码

> ID：12583868
> 
> 赞同：2
> 
> 时间：2012-09-25T13:21:46.077
> 
> 标签：c#, unit-testing

目前我正在对某个项目进行单元测试，除了开发人员使用这样的地方之外，一切都很好：

```
#if USING_EMULATOR
{ do nothing }
#else
{ do a lot of things }
#endif 
```

或者

```
#if USING_EMULATOR
  return;
#endif
{ do a lot of things } 
```

我认为下面的代码`USING_EMULATOR`是出于调试目的而完成的。有时也会`#if DEBUG`出现。如果现在仅用于调试目的的代码正在尝试执行，我该如何检查实际的代码？ `#undef USING_EMULATOR`没有帮助。我不太清楚预处理器常量，在 C# 中它们甚至不能只设置定义/未定义，所以也许我只是做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:31:52.257

假设您有一定的重构空间，您可以将这些指令提取到私有或受保护的属性中，然后给自己一个挂钩来修改测试中的值。

您还可以提取对类似 的依赖`IRuntimeConfiguration`项，然后您可以用存根替换您的测试。

例如：

```
public class ClassIAmTesting
{
    private readonly IRuntimeConfiguration _runtimeConfig;
    public ClassIAmTesting(IRuntimeConfiguration runtimeConfig)
    {
        _runtimeConfig = runtimeConfig;
    }

    public void MethodIWantToTest()
    {
        if(_runtimeConfig.IsDebug)
            return;

        // …
    }
}

public interface IRuntimeConfiguration
{
    bool IsDebug { get; }
    bool IsUsingEmulator { get; }
}

public class RuntimeConfiguration : IRuntimeConfiguration
{
    public bool IsDebug
    {
        get
        {
            return
#if DEBUG
                true;
#else
                false;
#endif
        }
    }

    // repeat for IsUsingEmulator
} 
```

这样，运行哪个代码的“选择”不是基于预处理器指令，而是基于常规`bool`属性的值。如果你替换一个`IRuntimeConfiguration`总是返回的不同实现`false`，你可以执行代码，就好像没有，`DEBUG`即使`USING_EMULATOR`预处理器值确实设置了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:28:02.553

从`USING_EMULATOR`项目构建设置中的条件编译符号中删除。

您还可以使用不同的条件编译符号集创建不同的构建配置。例如，Debug config 定义了 DEBUG，而 Release 则没有。这也意味着如果你想执行实际的代码，你应该运行 Release 构建，而不是 Debug 构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:30:35.060

棘手的一个。如果您想对 . 的两侧进行单元测试，则`#if`必须进行两次构建 - 一个已`USING_EMULATOR`定义，一个未定义。

这是因为在 C# 中，当有条件地编译出代码时，就相当于它根本不存在。因此，当（在您的示例中）`USING_EMULATOR`定义时，它会编译为与未定义时*不同的非等效程序*`USING_EMULATOR`。

因此，如果您想对两个“程序”进行单元测试，则需要对被测软件的两个不同版本进行单元测试。

根据您的场景，重组软件的某些部分可能是合适的，以便可以根据需要覆盖不同的组件，从而根据需要在不同的环境中更改行为。这样，被覆盖部分的两个实现都存在于每个构建中，并且可以使用适当结构化的单元测试进行测试。

# javascript - Javascript：从右侧滑动面板

> ID：12583869
> 
> 赞同：0
> 
> 时间：2012-09-25T13:21:47.157
> 
> 标签：javascript, jquery, html, panel, slide

I 从右侧搜索滑动面板。

我正在寻找这个组件的替代品：

[http://pupunzi.com/mb.components/mb.extruder/demo/demo.html](http://pupunzi.com/mb.components/mb.extruder/demo/demo.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:26:19.663

试试这个，它将需要 JQuery UI。

```
$('#content').show("slide", { direction: "right" }, 1000, function () {
 //Do what you want when the animation is finished.
}); 
```

文档：[http ://docs.jquery.com/UI/Effects/Slide](http://docs.jquery.com/UI/Effects/Slide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T10:09:25.583

您可以尝试面板小部件：

[https://api.jquerymobile.com/panel/](https://api.jquerymobile.com/panel/)

它具有覆盖或推送选项。

# mysql - 将时间戳转换为正确的格式

> ID：12583870
> 
> 赞同：1
> 
> 时间：2012-09-25T13:21:47.687
> 
> 标签：mysql, sql, sql-server, timestamp

> **可能重复：**
> [如何从 TIMESTAMP 列中获取日期/时间信息？](https://stackoverflow.com/questions/7154742/how-do-i-get-date-time-information-from-a-timestamp-column)

我从 SQL Server 导出了一个数据库。它有一个时间戳字段，它给我的值类似于 00000000004285D1。如何在 MySQL 上将其转换为简单的日期格式。我正在尝试使用 PHP 在网站上显示它。以前的数据库通过 ASP.NET 和 SQL Server 链接到该站点。

我想将此时间戳从 00000000004285D1 转换为类似 2012-09-25 10:15:23

或其他一些可读格式。

提前谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:23:52.880

在 SQL Server 中，时间戳不是日期时间。它是[rowversion](http://msdn.microsoft.com/en-us/library/ms182776.aspx)的同义词，一个 8 字节的二进制数，通常用于版本标记表行，通常用于并发检查。因此，将其转换为目标系统中的日期时间是没有意义的。

Timestamp 可以说是这个数据类型的一个令人困惑的名称。[您可以在此处](http://www.sqlteam.com/article/timestamps-vs-datetime-data-types)找到有用的讨论。

# mysql - MySQL 复杂算术

> ID：12583873
> 
> 赞同：3
> 
> 时间：2012-09-25T13:22:06.857
> 
> 标签：mysql, math, logic

我有一个 MySQL 表设置如下：

```
debts

--------------------------
owed_by | owed_to | amount
--------|---------|-------
Alice   | Bob     | 5
Bob     | Jane    | 10
Alice   | Jane    | 10
Jane    | Bob     | 5 
```

是否可以在 MySQL 中编写一个查询来返回每个人所欠的总额？他们欠谁并不重要，我只想归还每个人和（欠的人总数 - 欠的人总数）

获得总欠款很容易

```
SELECT `owed_by`, SUM(`amount`) as 'Total Debt'
FROM `debts`
GROUP BY `owed_by`
ORDER BY SUM(`amount`) DESC 
```

但我不知道如何减去他们的欠款。

此外，作为一般规则，在 MySQL（如果可能）或 PHP 中执行这样的操作更好吗？

这是我的示例数据的 SQL Fiddle：[http ://sqlfiddle.com/#!2/dd7cf/1](http://sqlfiddle.com/#!2/dd7cf/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:43:40.133

您可以结合双方：

```
select Person, sum(debt) as 'Total Debt'
from (
    select owed_by as 'Person', amount as 'debt'
    from debts
    union all
    select owed_to, -1*amount
    from debts
) as q
group by Person; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:48:04.533

```
SELECT owed.owed_by, owed.amount - coalesce(owns.amount, 0) as `Total Debt`
FROM (
        select owed_by, sum(amount) as amount
        from debts
        group by owed_by
    ) owed
    left join (
        select owed_to, sum(amount) as amount
        from debts
        group by owed_to
    ) owns on owed.owed_by = owns.owed_to
ORDER BY `Total Debt` DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:58:37.840

```
SELECT od.person, od.amount - COALESCE(ow.amount, 0) AS balance  
FROM (SELECT owed_to AS person, SUM(amount) AS amount FROM debts GROUP BY owed_to) od  
LEFT OUTER JOIN (SELECT owed_by AS person, SUM(amount) AS amount FROM debts GROUP BY owed_by) ow  
ON od.person = ow.person
UNION  
SELECT owed_by, SUM(amount) * (-1) FROM debts   
WHERE owed_by NOT IN (SELECT DISTINCT owed_to FROM debts)   
GROUP BY owed_by; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:29:02.100

```
SELECT `owed_by`, SUM(`amount`) as 'Total Debt'.
(select sum(amount) from debts d2 where d1.owed_by = d2.owed_to) as `Total Plus`
FROM `debts` d1
GROUP BY `owed_by`
ORDER BY SUM(`amount`) DESC 
```

# apache-flex - 如何使用 flex 的 XIFF API 发送组合扩展通知？

> ID：12583876
> 
> 赞同：3
> 
> 时间：2012-09-25T13:22:13.960
> 
> 标签：apache-flex, openfire, flex-spark, xiff

我在 flex 中使用 Xiff API 连接到我的 XMPP 服务器。并且我会成功发送消息但不会收到打字通知。

现在我收到以下消息

```
<message type="normal" id="m_1" to="abc@localhost/localhost"
    from="xyz@lcoalhost/xyz">
    <composing xmlns="http://jabber.org/protocol/chatstates"/>
</message> 
```

但我想跟随。

```
<message type="normal" id="m_1" to="abc@localhost/localhost"
    from="xyz@lcoalhost/xyz">
    <x xmlns="jabber:x:event">
    <composing/>
</message> 
```

我怎么能得到请帮忙。

# javascript - 设置 AMCharts ScrollBar 的初始范围

> ID：12583877
> 
> 赞同：5
> 
> 时间：2012-09-25T13:22:26.190
> 
> 标签：javascript, amcharts

我已经使用[AMCharts](http://amcharts.com)实现了一个序列图，但列的数量比窗口中实际显示的要多。为了减少提取的数量，我添加了一个`ChartsScrollBar`可以解决问题的方法，但最初它会选择所有数据。有谁知道如何设置滚动条的初始缩放？

我写了一个 JSFiddle 来解释这个问题 - [http://jsfiddle.net/Wd3GM/](http://jsfiddle.net/Wd3GM/)

我试图让“缩放栏”在启动时显示少于四个项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:26:33.447

您应该监听 fot "init" 事件，然后使用其中一种可用的缩放方法。这是修改过的小提琴：http: [//jsfiddle.net/Wd3GM/1/](http://jsfiddle.net/Wd3GM/1/)

# ajax - p:ajax inside ui:include 不更新内容（Facelets + PrimeFaces）

> ID：12583878
> 
> 赞同：1
> 
> 时间：2012-09-25T13:22:26.590
> 
> 标签：ajax, jsf, include, primefaces

我在使用 PrimeFaces AJAX 和 UI:Include 时遇到问题。我正在尝试通过使用标签 ui:include: 来创建基于 AJAX 的 Web 表单：当我单击菜单按钮时，它会更改包含的 SRC 并加载下一页。一切正常，但是当我尝试在 ui:include 加载的页面上使用一些 AJAX 时，它不会更新。好吧，我认为代码将显示我在说什么：

主页：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui">
<f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            <title>PrimeFaces</title>
        </f:facet>
        <ui:include src="#{layout.head}"></ui:include>
    </h:head>
    <h:body>
        <h:form>
        <p:layout fullPage="true" >
            [...]
            <p:layoutUnit position="center">
                <p:panel styleClass="noBorder" id="#{pageFlow.panelId}">
                    <ui:insert name="mainContent">
                        <ui:include src="#{pageFlow.page}"/>
                    </ui:insert>
                </p:panel>
            </p:layoutUnit>
        </p:layout>
        <p:growl id="globalMessages" showDetail="true" severity="warn, error, fatal" autoUpdate="true"></p:growl>
        </h:form>
    </h:body>
</f:view>
</html> 
```

template.xhtml - 要加载的页面包括：

```
<ui:fragment
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets">
    <p:messages  id="resultMessage" showDetail="true" severity="info" autoUpdate="true" closable="true"/>
    <p:panel  styleClass="noBorder">
        <p:panel id="templateBody" header="Cadastro de Template" style="margin: 10px">
            <h:panelGrid cellpadding="3">
                <p:row>
                    <p:column><h:outputLabel value="Nome: "/></p:column>
                    <p:column><p:inputText value="#{template.name}"/></p:column>
                    <p:column><h:outputLabel value="Descrição: "/></p:column>
                    <p:column><p:inputText value="#{template.description}"/></p:column>
                </p:row>
                <p:row><p:column><p:separator/></p:column></p:row>
                <p:row>
                    <p:column><h:outputLabel style="vertical-align: middle" value="Provedor: "/></p:column>
                    <p:column>
                        <p:selectOneMenu style="vertical-align: middle" validator="selectOneMenuValidator" converter="selectOneMenuConverter" id="providers" value="#{template.providerName}">
                            <f:selectItems value="#{template.testItems}"/>
                            <f:attribute name="fieldName" value="template.providerName"/>
                            <p:ajax update="selectAvaliableItems"/>
                        </p:selectOneMenu>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column>
                        <p:panel id="selectItem" styleClass="noBorder" style="alignment-adjust: central; float: left; height: 200px; width: 100%">
                            <p:selectManyMenu converter="selectManyMenuConverter" validator="selectManyMenuValidator" value="#{template.selectedAvaliableItems}" style="float: left; height: 180px; width: 300px" id="selectAvaliableItems">
                                <f:selectItems value="#{template.avaliableItems}"/>
                                <f:attribute name="fieldName" value="template.selectedAvaliableItems"/>
                            </p:selectManyMenu>
                            <p:panel styleClass="noBorder" style="float: left; height: 180px; width: 75px">
                                <p:commandButton value="&gt;&gt;" update="selectItem" actionListener="#{template.setAction(8+0)}"/>
                                <p:commandButton value="&gt;" update="selectItem" actionListener="#{template.setAction(8+1)}"/>
                                <p:commandButton value="&lt;" update="selectItem" actionListener="#{template.setAction(16+1)}"/>
                                <p:commandButton value="&lt;&lt;" update="selectItem" actionListener="#{template.setAction(16+0)}"/>
                            </p:panel>
                            <p:selectManyMenu converter="selectManyMenuConverter" validator="selectManyMenuValidator" value="#{template.selectedChosenItems}" style="float: left;height: 180px; width: 300px" id="selectSelectedItems">
                                <f:selectItems value="#{template.chosenItems}"/>
                                <f:attribute name="fieldName" value="template.selectedChosenItems"/>
                            </p:selectManyMenu>
                        </p:panel>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column>
                        <p:commandButton id="saveBtn" value="Salvar" update="templateBody" action="#{template.sendData}"/>
                    </p:column>
                    <p:column>
                        <p:commandButton value="Cancelar" update="@all" action="home"/>
                    </p:column>
                </p:row>
            </h:panelGrid>
        </p:panel>
    </p:panel>
    <p:blockUI block="templateBody" trigger="saveBtn providers">
            <p:graphicImage value="./files/img/todo/loading.gif" />
    </p:blockUI>
</ui:fragment> 
```

flowPage bean 可以很好地完成它的工作，它返回一个字符串，其中包含要根据单击的 MenuButton 加载的文件名。问题是 template.xhtml 上的每个 AJAX 都不会更新其内容。调用了 blockUI，我收到了申请，但没有内容更新......

任何想法？

如果我删除 ui:include 并使用模板策略，它工作正常，但我想要一个 AJAX 导航页面。

谢谢你的关注。

# html - 链接到由 IMG 标签嵌入的 SVG 中的 CSS

> ID：12583879
> 
> 赞同：19
> 
> 时间：2012-09-25T13:22:31.883
> 
> 标签：html, css, svg

我有一个页面，其中包含几个 SVG 文件。为了同步这些 SVG 文件的样式，我想创建一个样式表来保存所有样式信息。

但是，当包含如下所示的 SVG 时，不会应用 CSS。任何人都对此有解决方案，或者只是无法链接到引用的 SVG 中的其他（CSS）文件`<img src="..." />`？

请参阅下面的示例代码。当`pic.svg`直接在浏览器中加载时，所有样式都会被应用，并且可以看到一个绿色矩形。但是当打开`page.htm`所有看到的是一个黑色的矩形。所以显然没有应用任何定义的样式。

**页面.htm**

```
<!DOCTYPE html>
<html>
<body>
    <img src="pic.svg" style="width: 100px; height: 100px;" />
</body>
</html> 
```

**图片.svg**

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<?xml-stylesheet type="text/css" href="styles.css" ?>
<svg version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    >
    <rect x="10" y="10" width="80" height="80" />
</svg> 
```

**样式.css**

```
rect { 
    stroke: black;
    fill: green;
} 
```

**编辑**

从一个答案中，这里出现了很短的时间，我得到了[这个规范](http://www.w3.org/TR/SVG/styling.html#Scope)的链接和下面的引用。在我看来，这表明上面的代码应该可以工作！

> **嵌入在带有“img”、“object”（HTML）或“image”（SVG）元素的 HTML 或 XML 文档中的独立 SVG 文档**
> 
> [...]
> 
> 从您的链接中引用“在引用的 SVG 文档中的任何位置定义的样式表（在样式元素或样式属性中，或**在与样式表处理指令链接的外部样式表中**）**适用于整个 SVG 文档**，但不影响引用文档（也许是 HTML 或 XHTML）。”

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-23T09:24:14.820

`<object>`另一种方法是在您的 html中使用标签：-

```
<object type="image/svg+xml" data="pic.svg" width="100" height="100"></object> 
```

很遗憾`<img>`标签不起作用。我不想在将 SVG 转换为数据 URI 时弄乱黑客行为。这与间接加载资源和使用“开放重定向器”的跨站点漏洞有关。

请注意，在我昨晚的测试中，`<img>`标记方法在 IE10 中有效，但在 Chrome 和 FireFox 中均无效。

我不知道为什么`<object>`允许和`<img>`不允许。疏忽？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T15:09:37.877

出于隐私原因，图像必须是独立文件。如果将样式表编码为数据 uri，则可以使用 CSS。例如

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<?xml-stylesheet type="text/css" href="data:text/css;charset=utf-8;base64,cmVjdCB7IA0KICAgIHN0cm9rZTogYmxhY2s7DQogICAgZmlsbDogZ3JlZW47DQp9" ?>
<svg version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    >
    <rect x="10" y="10" width="80" height="80" />
</svg> 
```

有各种用于数据 URI的[在线转换器。](http://dopiaza.org/tools/datauri/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-18T19:00:23.167

上面的答案很棒。不过，我发现将原始 SVG 标签本身嵌入到我的网页中是最简单的。这使得 SVG 可以毫无问题地继承在我的页面 CSS 中声明的字体系列样式......

# javascript - 如何做一个 GWT-Wrapper

> ID：12583882
> 
> 赞同：1
> 
> 时间：2012-09-25T13:22:33.393
> 
> 标签：javascript, html, gwt, jsni

嗨，我需要一些关于如何包装 javascript 库的指导或指针。

我用一个函数制作了一个简单的javascript“myTest.js”：

```
function myFunction(num)
{
    if(num==1){
        return "Hello World1!";
    }else{
        return "bye World2!";
    }
} 
```

我在我的简单 HTML 中调用：

```
<html>
  <head>
    <script type="text/javascript" SRC="myLib.js">  

</script>
    <title>Tutorial: HelloWorld</title>
  </head>
  <body>
    <h1>Example HTML</h1>
    <input type="button" value="button" onclick="alert(myFunction(1))">
  </body>
</html> 
```

显然这个例子在 GWT 中很容易实现。

这只是为了让我了解如何对 javascript 文件进行 gwt-wrapper 以便能够在 GWT 中调用该函数。

谢谢

* * *

好的，如果我有一个具有此功能的 js 文件，我需要一个更强大的示例：

```
 function MyObject() {
    // properties in config
    this.displayname = 'First Last';
    this.username = '1060';
    this.domain = '12.18.34.234';
    this.authname =  '1060';
    this.password = '1060';
    this.transport = 'w34s';
   } 
```

在 html 中是脚本部分，我打了这个电话

```
var myObj = new MyObject(); 
```

我如何在 GWT 中制作这个？

我必须创建类 MyObject 吗？使用 javascript 中显示的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:42:16.410

为了在 Java 和 JavaScript 类型之间架起桥梁，请使用 GWT 的[覆盖类型](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay?hl=iw)来创建 API 包装层。

您可以创建一个单独的[模块](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects?hl=iw#DevGuideModules)来包含包装的库并将其链接到主模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:35:08.090

如果你想在 GWT 中调用原生 javascript，你可以在你的 GWT 类中定义一个原生方法，如下所示：

```
private native void test(String argument)/*-{
    myFunction(argument);
}-*/ 
```

当您从 GWT 调用方法 test("foo") 时，它将调用本机 js 函数 myFunction("foo");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:44:11.707

你必须使用 JSNI。[请参阅此处](https://developers.google.com/web-toolkit/doc/2.4/DevGuideCodingBasicsJSNI)的 GWT 2.4 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T17:15:07.200

现在你应该使用 JSNI，但也有 js 互操作。js 互操作使事情变得更容易，在即将到来的 2.8 中，js 互操作将成为标准，它将直接内置到 GWT 编译器中。他们说 2.7 中的 js 互操作是实验性的。[这是](https://code.google.com/p/gwt-api-interop/w/list)关于它的文档。

# navigation - Sencha touch NavigationView

> ID：12583884
> 
> 赞同：0
> 
> 时间：2012-09-25T13:22:44.223
> 
> 标签：navigation, sencha-touch-2

我试图找出应该使用 NavigationView 的用例。
有人可以给我一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:04:26.813

导航视图是大多数人用于直接案例的。导航视图自动控制导航的历史记录和后退按钮，并在面板弹出视图时进行清理。

某些应用程序具有扭曲的导航，其中后退按钮可能并不总是将人带到直接的后面板。同样在某些情况下，我们可能希望根据条件显示集合中的单个面板。这可以使用布局为“卡片”的面板轻松完成。如果您在这些情况下使用导航视图，则每次重新创建相同的视图可能会有点过度工作。

# javascript - IE（所有版本）跟随 href 而不是执行 JS

> ID：12583885
> 
> 赞同：1
> 
> 时间：2012-09-25T13:22:49.747
> 
> 标签：javascript, internet-explorer, href

我在所有版本的浏览器中都遇到了 IE 问题（谁没有）。它在所有其他浏览器中都能正常工作。

```
<a href="<?php echo base_url() ?>pages/delete_page/<?php echo $row->id; ?>" class="delete" data-uid="<?php echo $row->id; ?>">
    <i class="icon-cancel"></i><span class="delete_tooltip">delete page</span>
</a> 
```

那是我的`<a>`标签，很简单。

基本上 IE 遵循 href 而根本不执行 JS。如果我从 href 中删除链接，它只会将其发送回主页。

我正在使用一个插件来加载一个模态框，就像我说的，在每个浏览器中一切正常。

```
$('.delete').click(function(e) {    
  console.log($('#modal-'+$(this).data('uid')));    // Button which will activate our modal
  $('#modal-'+$(this).data('uid')).reveal({                // The item which will be opened with reveal
      animation: 'fadeAndPop',              // fade, fadeAndPop, none
      animationspeed: 400,            // how fast animtions are
      closeonbackgroundclick: false,   // if you click background will modal close?
      dismissmodalclass: 'modal_cancel'      // the class of a button or element that will close an open modal
  });
  return false;
}); 
```

那就是将插件调用到该链接的JS。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:25:36.370

这可能是一个有趣的...

`console.log($('#modal-'+$(this).data('uid')));`将在 IE 中导致异常，因此永远不会返回 false，从而导致 href 执行其默认操作。

编辑：可能在这里造成了一些混乱。在 IE 中它会导致异常，因为`console`is `undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:23:51.243

```
$('.delete').click(function(e) {
  e.preventDefault();
  ... 
```

`preventDefault()`在处理程序内部使用

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)供参考

# c# - 使用 C# 从 FTP 服务器读取 CSV 文件

> ID：12583886
> 
> 赞同：-1
> 
> 时间：2012-09-25T13:22:54.083
> 
> 标签：c#, asp.net, ftpwebrequest

我正在尝试使用 c# 从 ftp 服务器读取 CSV 文件，但问题是它不允许我读取并抛出此错误

> 远程服务器返回错误：(530) 未登录。

我花了很多时间研究这个问题，不幸的是我还没有找到解决方案。任何帮助将不胜感激。

这是代码：

```
StringBuilder result = new StringBuilder();
FtpWebRequest reqFTP;
try
{
    String ftpserver = "ftp://domain.com/StatusChanges_20120922_043057.csv";

    reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(ftpserver));
    reqFTP.UsePassive = false;
    reqFTP.UseBinary = true;
    reqFTP.Credentials = new NetworkCredential("test@domain.com", "password");
    reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
    reqFTP.Proxy = GlobalProxySelection.GetEmptyWebProxy();
    FtpWebResponse response = (FtpWebResponse)reqFTP.GetResponse();

    StreamReader reader = new StreamReader(response.GetResponseStream(), System.Text.Encoding.UTF8);
    string line = "";

    while (reader.Peek() > -1)
    {
        line = reader.ReadLine();
        Console.WriteLine(line);//**********HTML was wrote out here*************
    }

    if (result.ToString().LastIndexOf('\n') >= 0)
        result.Remove(result.ToString().LastIndexOf('\n'), 1);
    reader.Close();
    response.Close();

    return result.ToString();
}
catch (Exception ex)
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:29:13.920

您需要做的是让它与外部 FTP 客户端正确连接，我假设您已经这样做了。一旦您有另一个 FTP 客户端正确连接，您可以仔细检查所有凭据和设置是否匹配。完成此操作后，它仍然无法正常工作，您应该分析外部 FTP 客户端和您的程序使用[Wireshark](http://www.wireshark.org/)之类的东西发送到服务器的内容，并查看请求标头的差异。可能是您缺少一个简单的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:30:32.037

不确定，但我不知道 Peek() 是检测是否有更多数据要读取的理想选择。如果您在此处尝试的流不支持搜索，则 Peek() 可以返回 -1。认为首选的方法是在循环中使用 ReadLine 直到它返回 null ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:31:41.487

1.  检查您的文件位置是否*完全*正确 - 您的文件名很长，因此请三重检查它是否正确。

2.  确保您的 FTP 用户名/密码正确。如果是，请确保他们在 FTP 服务器上具有正确的权限才能访问该文件。

3.  在连接到它之前，请确保您的 FTP 服务器没有达到最大连接数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T16:19:02.127

将 FTP 服务器 URL 中的单斜杠“/”改为双斜杠“//”。

不要使用 StreamReader。只需使用流编写器写入文件 byte[] 数组。

# backbone.js - Backbonejs 集合 URL this.isNew 不是函数

> ID：12583891
> 
> 赞同：0
> 
> 时间：2012-09-25T13:23:11.260
> 
> 标签：backbone.js

我在我的收藏中使用 this.isNew 时遇到问题，它看起来如下所示：

```
window.MyModel = Backbone.Model.extend({
    idAttribute: "_id",
});

window.MyModelList = Backbone.Collection.extend({
    alert('Collection');
    model: MyModel,
    url: function() {
        if (this.isNew()) {
           alert('show all');
           // will ask the server to show all items
           return 'api/site/showall'
    } else {
        alert('create new item');
        // will ask the server to create new item
        return 'api/site/new'
    }
}); 
```

它提醒“集合”而不是“显示全部”和“创建新项目”然后我收到错误“TypeError：this.isNew is not a function”

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:36:47.033

这是真的 - 集合没有 isNew() 函数，只有模型有 -

[http://backbonejs.org/#Model-isNew](http://backbonejs.org/#Model-isNew)

如果您的目标是确定模型是否已经在集合中，请考虑使用 Underscore 的 Find 功能

[http://documentcloud.github.com/underscore/#find](http://documentcloud.github.com/underscore/#find)

# javascript - 在单行中添加多个内联 javascript

> ID：12583892
> 
> 赞同：1
> 
> 时间：2012-09-25T13:23:14.950
> 
> 标签：javascript, jquery

我有 2 个不同的链接，添加了内联 js。

我想将两者都添加到单个内联 onclick 中。

这是两个单独的：

```
<a href="#" onclick=\'$("#id").toggle();\'>

<a href="#" onclick="myvar = '1';"> 
```

这就是我想做的：

```
<a href="#" onclick="$("#id").toggle();myvar = '1';"> 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:27:30.410

您可以使用

```
$("a").click(function(){
   $('#id').toggle(); myvar = '1';
 }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T13:25:39.113

在 javascript 中附加你的事件处理程序（[为什么？](http://en.wikipedia.org/wiki/Separation_of_concerns)），然后它就变得微不足道了：

HTML：

```
<a href="#" id="myAnchor" /> 
```

JS：

```
document.getElementById('myAnchor').onclick = function () {
    $("#id").toggle();
    myvar = '1';
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T13:25:30.460

完全像你一样，但语法错误已修复......

```
<a href="#" onclick="$('#id').toggle(); myvar = '1';"> 
```

顺便说一句，请准备好接受大量告诉您不要使用内联代码的人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T13:26:28.633

只需使用这个

```
$("a").click(function(){

$("#id").toggle(); myvar = '1';

 }) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T13:28:05.487

你不能只做你在javascript中做的事情吗？

```
$(document).ready(function(){
    $('#id').toggle(function(){
        myVar = 1;
    });
}); 
```

... 或者其他的东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T13:25:56.797

...你做到了，基本上。您只需要统一声明字符串的方式就可以了：

```
<a href="#" onclick="$('#id').toggle();myvar = '1';"> 
```

瞧。

# c# - MVC FindView 在应用程序启动时很慢

> ID：12583893
> 
> 赞同：1
> 
> 时间：2012-09-25T13:23:16.130
> 
> 标签：c#, .net, asp.net-mvc-3, performance, asp.net-mvc-views

是否有运行应用程序并预​​填充 MVC ViewCache 以消除在 Web 应用程序预热期间有时可能发生的 2 秒时间损失？

目前，当我们的应用程序启动时，我们有时会遇到 2 秒的性能延迟时间。一旦启动，只有几毫秒。

如果有帮助，我肯定会在发布模式下运行，并且只使用 Razor 引擎：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        Bootstrapper.Initialise(); //IOC Setup
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        //Only use the RazorEngine. - http://blogs.msdn.com/b/marcinon/archive/2011/08/16/optimizing-mvc-view-lookup-performance.aspx
        ViewEngines.Engines.Clear();

        IViewEngine razorEngine = new RazorViewEngine() { FileExtensions = new string[] { "cshtml" } };

        ViewEngines.Engines.Add(razorEngine);
    } 
```

欢迎任何建议。

塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:28:03.200

您可以使用 IIS 7.5 中新的 ASP.NET [AutoStart 功能](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)。还要确保在部署应用程序时它在发布模式下运行 ( `debug="false"`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:27:21.947

# azure - 在 Azure 表上查询时 Rowkey.ToLower() 抛出异常

> ID：12583894
> 
> 赞同：0
> 
> 时间：2012-09-25T13:23:16.437
> 
> 标签：azure, azure-table-storage

查询具有 e.RowKey.ToLower() 的特定实体会引发异常

```
CustomerEntity customerEntity = (from e in serviceContext.CreateQuery<CustomerEntity>("Customer")
                                     where e.RowKey.ToLower() == firstName.ToLower()                                         
                                     select e).FirstOrDefault(); 
```

基本上我想检查不区分大小写的用户名。Azure 表是由我们的合作伙伴管理的，所以我不能指示他们以小写形式将用户条目输入到表中。

我需要在代码中处理这个。

问候，维维克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:31:01.860

ToLower() 作为过滤器表达式的一部分无效，因为表存储不支持将其作为操作。

你有两个选择：

1.  确保您输入的所有数据都是小写的。如果您还需要大写/混合大小写版本，请将其放在另一列中。
2.  拉回所有数据并在内存中进行过滤。如果您只有少量记录，这是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:30:41.380

您收到异常，因为该`ToLower()`方法不是 Azure 中受支持的方法。

我想你可以用这种方式进行比较

```
where e.RowKey.Equals(username, StringComparison.InvariantCultureIgnoreCase); 
```

它应该完成您想要做的事情，但它使用受支持的`Equals()`方法。

# c - C中构造函数和析构函数的命名约定

> ID：12583908
> 
> 赞同：11
> 
> 时间：2012-09-25T13:24:00.767
> 
> 标签：c, constructor, naming-conventions, destructor

假设我有一个`struct list`, 并且我想提供一个“构造函数”和一个“析构函数”函数。我应该如何分别命名它们？

```
void list__init(struct list * self);
void list__construct(struct list * self);
void list__create(struct list * self);
...

void list__done(struct list * self);
void list__destruct(struct list * self);
void list__destroy(struct list * self);
... 
```

是否存在在现实世界中占主导地位的既定命名约定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T13:45:54.750

GLib/GTK 人已经创建了使用`_new`和`_free`用于内存分配构造函数和析构函数`_init`以及`_destroy`用于非内存分配构造函数和析构函数的约定。

pthread 库似乎主要遵循非内存分配和内存分配`_init`的约定。`_destroy``_create`

X11 使用`XOpenFoo`和`XCloseFoo`。

C 库本身使用的用于对结构（如和`free`）进行非内存分配清理。`glob_t``wordexp_t`

所以，我想答案是否定的，但肯定有很多人在某些项目中选择了特定的符号。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-25T13:27:48.717

没有普遍接受的约定。

当然，C++ 在这件事上影响了人们的看法。

就个人而言，我在函数执行内存分配时使用 new()，如果没有，则使用 init()，如果发生释放，则使用 delete()，否则使用 cleanup()。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T13:51:01.203

我正在使用以下约定：

*   内存分配通过`..._alloc()`
*   通过初始化`..._init()`
*   通过组合分配和初始化`..._create()`
*   通过释放相关资源`..._discard()`
*   `..._dealloc()`通过或释放内存`..._free()`
*   通过联合释放资源和内存`..._destroy()`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T13:49:08.620

我在一家使用`init`/`deinit`作为标准的公司工作，这似乎很好。我想我已经从多个来源看到`init`/ ，据我所知，这是一种使名称长度相同的自负。`fini`

`pthread_mutex_init`/ `pthread_mutex_destroy`（就地初始化）

`sem_create`/ `sem_destroy`（返回一个新句柄，但请注意 Posix 不需要区分释放句柄的“销毁”和就地销毁的“销毁”）

`mpz_init`/ `mpz_clear`（就地初始化）

因此，您可能可以做自己喜欢的事情，没有人可以合理地抱怨您忽略了“标准”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:34:16.010

根据它是在“对象”还是某个“活动模块”上，我通常会遵循

**对象**：

```
INIT <----> TERMINATE 
```

**活动模块**：

```
INIT ---------> START 
 ^                ^
 |                |    
 |                v 
TERMINATE <----- STOP 
```

# sql-server-2008 - SQL Server 约束检查不起作用

> ID：12583910
> 
> 赞同：0
> 
> 时间：2012-09-25T13:24:08.313
> 
> 标签：sql-server-2008, constraints

我正在使用`constraint`在 sql server 2008 数据库中强制执行业务规则，

```
alter table TableName with check  
Add check    
(
    (col1 = 1 and col2 > 0)  
    or   
    col1 = 0  
) 
```

当我尝试在 Management Studio 中执行插入查询时

```
update TableName set col1 = 1 where Id = 1; --the col2 =0 so it is not valid according to above constraint 
```

执行后，我收到`(1 row(s) affected)`没有任何错误消息的消息！！

但实际上当我检查表中的数据时，它并没有改变（这是正确的操作）。

`1 row(s) affected`编辑：所以虽然没有影响行，但执行异常行为......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:00:02.633

该问题指出约束是“使用检查”创建的，并且您进一步指出 UPDATE 语句中引用的“col2”值为 0 的记录已经存在。如果禁止 col2=0 的约束是“带检查”执行的，那么它应该在该记录的创建时出错，因此在执行更新时不会留下任何约束。这或许可以解释你所目睹的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:01:00.693

您可以添加`commit;`以提交您的交易

# python - Python：将列表写入文本文件和文本文件大小限制

> ID：12583914
> 
> 赞同：0
> 
> 时间：2012-09-25T13:24:22.260
> 
> 标签：python, list

对问题定义的冗长描述感到抱歉。

我是 python 新手。大约一个月前开始学习。今天我试图将列表写入文本文件。虽然我在这个网站上得到了答案并使用了相同的方法。而且效果很好。但是我在将列表写入文本文件时遇到了另一个问题。

我的列表的长度是“2372”。当我将列表写入文本文件时，以我需要的特定格式，我发现只有少数列表成员被写入。（格式是：第一行的前四个列表成员。同样，其余行中的 4 个列表成员组。）我发现只有 1938 个列表成员被写入文本文件。发现文件大小为25KB。

我还尝试将每个列表成员写入新行，然后发现文本文件的大小为 25KB，与上述情况相比，这次写入的列表成员更少。

写入列表的文本文件是否有文件大小限制？请帮我解决这个问题。

** Python代码片段**

```
Lenlist = 2372

filptr = open(tempfile, 'w+')
count=0
for x in range(0,Lenlist):
  filptr.write("%s\t" % line[x])
  count+=1
  if count>3:
   if (count%4==0):
     filptr.write("\n") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:27:32.903

使用迭代列表会更容易：

```
with open(tempfile, 'w+') as filptr:
    for count, l in enumerate(line):
        filptr.write("%s\t" % l)
        if count and count % 4 == 0:
             filptr.write("\n") 
```

该`with`语句的使用可确保在循环完成时正确关闭文件。使用`enumerate`让我们不必使用手动计数器。

请注意，现在您的行`\t`末尾总是有一个额外的选项卡。您可以使用一个[`itertools.izip_longest()`](http://docs.python.org/library/itertools.html#itertools.izip_longest)技巧从列表中一次抓取 4 个项目，然后将它们与 一起写`'\t'.join()`：

```
from itertools import izip_longest

per_four = izip_longest(*([iter(line)] * 4), fillvalue='')

with open(tempfile, 'w+') as filptr:
    for entries in per_four:
        filptr.write("\t".join(entries) + '\n') 
```

在这里`izip_longest`，每次迭代时，我都会从列表中取出一个项目 4 次，直到原始列表用完为止。为了确保无论列表的长度如何，最后都有 4 个项目，我们使用一个空字符串作为填充：

```
>>> line = [1, 2, 3, 4, 5]
>>> for four in izip_longest(*([iter(line)] * 4), fillvalue=''):
...     print four
... 
(1, 2, 3, 4)
(5, '', '', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:29:05.440

像这样，使用生成器：

```
lis=[1,2,3,,,,,]  #your list
with open(filename,'w') as f:
    for y in (lis[x:x+4] for x in range(0,len(lis),4):
       f.write("%s\n",y) 
```

作为：

```
In [34]: lis=range(20)

In [35]: [lis[x:x+4] for x in range(0,len(lis),4)]
Out[35]: 
[[0, 1, 2, 3],
 [4, 5, 6, 7],
 [8, 9, 10, 11],
 [12, 13, 14, 15],
 [16, 17, 18, 19]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:29:13.830

问题是文件写入被缓冲，因此它们不会立即写入磁盘。如果您在没有关闭文件的情况下退出，则它们可能根本不会被写入（尤其是在 Jython 和 Pypy 中由于缺乏确定性 GC 而存在问题）。

如果您有 Python 2.6 或更高版本，则可以使用`with`语句在完成后自动关闭文件。

# git - git filter 分支后重新同步

> ID：12583921
> 
> 赞同：1
> 
> 时间：2012-09-25T13:24:45.370
> 
> 标签：git, git-filter-branch

我将本地大型存储库（x）的一部分拆分为较小的存储库（y）。修剪是使用 git filter-branch 完成的，并将其形成一个较小的存储库。现在有一些其他人向大型存储库（x）提交了一些新的提交。我也想将新的提交同步到我较小的存储库中（通过使用过滤器分支进行修剪形成）。

我有一些疑问，

1.  在克隆上完成过滤器分支后，我们可以执行 git pull/fetch 来检索最新的提交，然后再次执行过滤器分支吗？在这种情况下，过滤器分支会只修剪最新的提交吗？

2.  知道我们如何通过设置执行以下操作的日常工作来同步新提交

    *   检索新的提交
    *   根据我们在过滤器分支中指定的忽略正则表达式修剪新提交
    *   将新更改推送到较小的存储库

谢谢

-夏尔

# linux - Linux 文件描述符的值是否总是小于打开文件的限制？

> ID：12583927
> 
> 赞同：1
> 
> 时间：2012-09-25T13:25:09.010
> 
> 标签：linux

Linux 文件描述符的“值”是否总是小于打开文件限制？

理论上，系统应重新使用已关闭文件描述符的标识值。在一个进程中打开 1021 个文件后，默认情况下，我应该得到范围从 0、1、2 到 1023 的文件描述符值。如果我想打开另一个文件，我必须释放一些文件描述符`close`，当我再次调用时系统会重新使用这些释放的身份`open`。所以在这种情况下，文件描述符的最大整数值应该是 1023。那是对的吗 ？

我知道我可以使用 、 和 更改打开文件`ulimit -n`的`setrlimit`限制`/proc/sys/fs/file-max`。我只想知道是否可以使用`char`变量存储打开的套接字文件描述符，如果我已将打开文件限制减少到 128个`setrlimit`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:01:56.653

是的，这些值限制在 0 到比 getrlimit() 返回的当前限制小一的范围内。

[从 getrlimit() 手册页：](https://www.kernel.org/doc/man-pages/online/pages/man2/getrlimit.2.html)

> ```
>  RLIMIT_NOFILE
>           Specifies a value one greater than the maximum file descriptor number
>           that can be opened by this process.  Attempts (open(2), pipe(2),
>           dup(2), etc.)  to exceed this limit yield the error EMFILE.
>           (Historically, this limit was named RLIMIT_OFILE on BSD.) 
> ```

[来自开放组基本规范：](http://pubs.opengroup.org/onlinepubs/009696799/functions/getrlimit.html)

> RLIMIT_NOFILE
> 这是一个大于系统可以分配给新创建的描述符的最大值的数字。如果超出此限制，分配文件描述符的函数将失败，并将 errno 设置为 [EMFILE]。此限制限制了进程可以分配的文件描述符的数量。

# curl - 使用管道获取 curl 数据

> ID：12583930
> 
> 赞同：85
> 
> 时间：2012-09-25T13:25:22.070
> 
> 标签：curl, pipe

我正在尝试将`cat`输出传递给 curl：

```
$ cat file | curl --data '{"title":"mytitle","input":"-"}' http://api 
```

但`input`实际上是一个`-`.

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2014-07-31T01:36:19.773

我花了一段时间试图弄清楚这一点，并让它与以下内容一起工作：

```
cat data.json | curl -H "Content-Type: application/json" -X POST --data-binary @- http://api 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-11-09T02:03:47.717

您可以使用神奇的标准输入文件`/dev/stdin`

```
cat data.json | curl -H "Content-Type: application/json" -X POST -d "$(</dev/stdin)" http://api 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-04-28T15:38:06.147

这也应该有效

```
curl -H "Content-Type: application/json" -d @data.json http://api 
```

使用 -d 强制 curl 隐式使用 POST 请求。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-07-31T07:51:40.553

如果您想在不转义或污染 bash 历史记录的情况下键入/粘贴数据，则可以使用它

```
cat | curl -H 'Content-Type: application/json' http://api -d @- 
```

这会将您带到`cat`可以直接输入数据的位置，例如终端中的 Shift + Insert。您以换行符和 Ctrl + D 结束，这`cat`表明您已完成。然后将该数据传递给 curl，您就有了一个可重用的历史记录条目。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-01-11T01:41:16.700

```
# Create the input file
echo -n 'Try  and " to verify proper JSON encoding.' > file.txt

# 1\. Use jq to read the file into variable named `input` 
# 2\. create the desired json
# 3\. pipe the result into curl
jq -n --rawfile input file.txt '{"title":"mytitle", $input}' \
| curl -v 'https://httpbin.org/post' -H 'Content-Type: application/json' -d@- 
```

输出：

```
 ...
  "json": {
    "input": "Try \ud83d\ude01 and \" to verify proper JSON encoding.", 
    "title": "mytitle"
  }, 
  ... 
```

请注意，输入文件的内容已正确转义以用作 JSON 值。

`jq`使用的选项：

*   `--null-input/-n:`
    不要读取任何输入
*   `--rawfile variable-name filename`：
    此选项读入命名文件并将其内容绑定到给定的全局变量。

有关完整详细信息，请参阅[jq 手册](https://stedolan.github.io/jq/manual/)。

该`-d@-`选项告诉 curl 从 STDIN 读取数据。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-10T13:59:21.887

尝试

```
curl --data '{"title":"mytitle","input":"'$(cat file)'-"}' http://api 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-02-15T13:31:57.253

[`-d`选项的卷曲文档](https://curl.haxx.se/docs/manpage.html#-d)

> 如果您以字母 @ 开始数据，则其余部分应该是从中读取数据的文件名，或者 - 如果您希望 curl 从标准输入中读取数据。也可以指定多个文件。因此，将使用 -d, --data @foobar 从名为“foobar”的文件发布数据。当 --data 被告知从这样的文件中读取时，将删除回车符和换行符。如果您不希望 @ 字符具有特殊解释，请改用 --data-raw。

根据您的 HTTP 端点、服务器配置，您应该可以使用以下格式：

`curl -d @data.json http://api`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-31T07:42:02.760

听起来您想将的内容*包装*`input`在 JSON 正文中，然后通过 POST 请求发送。我认为最简单的方法是先操作标准输入，然后使用`-d @-`. 一种方法可能如下所示：

```
cat <(echo '{"title":"mytitle","input":"') file <(echo '"}') \
| curl -d @- http://api 
```

我习惯用`<(echo)`它`cat`来合并字符串和文件，但几乎可以肯定有更好的方法。

请记住，这不会逃避内容，`file`因此您可能会遇到问题。

# android - 较新版本的应用无法安装

> ID：12583934
> 
> 赞同：0
> 
> 时间：2012-09-25T13:25:30.710
> 
> 标签：android

我从服务器下载了更高版本的应用程序。它可以正确下载，但是一旦我尝试用当前版本替换它。它说应用程序未安装。应用程序后面运行了一项服务，该服务会在启动时自动启动应用程序。我真的迷上了..请帮忙！！！

PS apk 没有问题。我已经单独尝试安装它并且它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:27:28.863

这可能是因为新应用程序的签名与旧应用程序的签名不匹配。尝试先卸载旧版本。那应该可以解决问题。

# excel - Excel 数据透视表小计

> ID：12583936
> 
> 赞同：7
> 
> 时间：2012-09-25T13:25:33.303
> 
> 标签：excel, pivot-table

我正在尝试在 Excel 中构建一个数据透视表来汇总一些数据，例如

![在此处输入图像描述](../Images/04f7ba654a8329b4fed9faf54ea1cc69.png)

我希望 A 列和 B 列采用紧凑的形式，C 列被概述；我还需要 B 列的小计。让小计出现在最后一行，一切正常

![在此处输入图像描述](../Images/a2cae89edfa678bf1354358a61503f10.png)

但是当我转到 B 字段上下文菜单时，选择“字段设置/布局和打印”并选择“在每个组的顶部显示小计”小计分解：有些不出现（对于“b/a”配置）还有一些给出了错误的结果（“a/a”组合为 60）。

![在此处输入图像描述](../Images/3f0537b6f09a78ee89a2db60f77dfff3.png)

有没有办法解决这个问题？我正在使用 Excel 2010，但在 Excel 2007 上测试了相同的文件，似乎出现了同样的问题。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T06:15:43.417

由于您对第一列 (A) 的小计不感兴趣，因此我建议创建一个单独的列，其中包含 A 和 B 的串联，然后产生所需的结果：

![在此处输入图像描述](../Images/97752a650d6c0d24043164eda2abd21c.png)

独特的组合被正确分组和总计。

# image - IE 使用 img src 作为 href

> ID：12583952
> 
> 赞同：0
> 
> 时间：2012-09-25T12:22:46.537
> 
> 标签：image, hyperlink

我在文本小部件中有以下代码

```
<div class="social">
    <a href="http://www.facebook.com/peakit.nl" target="_blank"><img src="http://www.peaktest.nl/wp-content/uploads/facebook-icon.png" border="0" alt="facebook"></a>
    <a href="http://www.linkedin.com/company/peak-it" target="_blank"><img src="http://www.peaktest.nl/wp-content/uploads/linkedin-icon.png" border="0" alt="linkedin"></a>
    <a href="https://twitter.com/PEAKIT" target="_blank"><img src="http://www.peaktest.nl/wp-content/uploads/twitter-icon.png" border="0" alt="twitter"></a>
    <a href="http://www.youtube.com/user/peakit" target="_blank"><img src="http://www.peak-it.nl/wp-content/uploads/youtube-icon.png" border="0" alt="youtube"></a>
</div> 
```

这适用于除 IE8 和 IE9 之外的所有浏览器。如果我单击图像，它将加载带有图像的页面（img src url）。当我右键单击图像并在另一个选项卡中打开时，它将显示正确的页面（href）。

我在这里想念什么？

这是 IE 输出：

```
<div class="social">

    <a href="http://www.facebook.com/peakit.nl" target="_blank">
        <img border="0" alt="facebook" src="http://www.peaktest.nl/wp-content/uploads/facebook-icon.png"></a>

    <a href="http://www.linkedin.com/company/peak-it" target="_blank">
        <img border="0" alt="linkedin" src="http://www.peaktest.nl/wp-content/uploads/linkedin-icon.png"></a>

    <a href="https://twitter.com/PEAKIT" target="_blank">
        <img border="0" alt="twitter" src="http://www.peaktest.nl/wp-content/uploads/twitter-icon.png"></a>

    <a href="http://www.youtube.com/user/peakit" target="_blank">
        <img border="0" alt="youtube" src="http://www.peak-it.nl/wp-content/uploads/youtube-icon.png"></a>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:39:11.063

谢谢你的提示！结果是客户安装的 Google Analytics Suite 插件使用了干扰的 jquery 脚本。我们停用了它，现在一切正常

# lotus-notes - 根据字段值查找 Lotus Notes 文档

> ID：12583953
> 
> 赞同：2
> 
> 时间：2012-09-25T13:26:26.017
> 
> 标签：lotus-notes, lotus-domino, lotusscript, lotus-formula

我有一个名为“JobID”的字段，它需要在笔记数据库中是唯一的。我的计划是在数据库中搜索文档的 JobID，如果它等于当前文档的 JobID，则提醒用户并取消保存。我似乎无法弄清楚我会如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:36:49.857

像这样自己管理唯一号码可能会给您带来麻烦。有一个公式`@Unique`，它将返回给您一个唯一的值，您可能应该使用它。

或者，您可以在数据库中维护一个文档，该文档包含一个您每次手动递增的数值。它的工作量更大，但会给你一些类似关系数据库所具有的自动递增 ID 的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:35:39.837

我是第一个承认这相当丑陋的人，但是如果您有一个视图，其中第一列是 JobID，它是有效且非常简单的。

```
Put this in the input validation of the JobID field.
outcome := @DbLookup("":"NoCache"; "":"" ; "<viewname>"; JobID; 2);
@If(@IsError(outcome); @Success; @Failure("A Job with this ID already exists"). 
```

或类似的东西。

您还可以通过许多其他方式做一些更好的事情：

```
e.g. LotusScript in the Exiting event of the JobID field using
....
set doc= NotesView.GetDocumentByKey(workspace.currentdocument.fieldgettext("JobID"))
If doc Is Nothing Then ....
etc. 
```

希望这有助于启发你:-)菲尔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:09:00.657

您可以稍微缩短代码，无需遍历所有文档...

db.Search 非常慢，我会改用视图查找。您可以使用 db.FTSearch，但如果全文索引不是最新的，您将无法获得正确的返回值。因此，只需创建一个隐藏的查找视图，将作业 ID 作为第一列也是唯一的列（已排序）。

您还应该在函数中声明 session/db/etc。确保您始终使用 Option Declare...

```
Function JobIdIsValid (jobId As String) As Boolean
'*** Check if a form with this project number is already created
Dim session As New NotesSession
Dim db As NotesDatabase
Dim view As NotesView
Dim col as NotesDocumentCollection
Dim searchformula As String

Set db = session.CurrentDatabase
Set view = db.GetView("(LookupJobID)")
Call view.Refresh()   'Optional, but useful if documents are created often
Set col = view.GetAllDocumentsByKey(JobID)
If col.Count > 0 Then
    JobIdIsValid = False
Else
    JobIdIsValid = True
End If
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:34:22.923

嗯，恐怕除了迭代数据库中的所有文档之外别无他法，这些文档使用包含您的字段的特定表单。更有效的方法不是每次都进行迭代，而是将使用的 JobID 保存在两个地方 - 与文档一起，以及在包含所有使用的 JobID 的某些存储中 - 然后您可以检查收集的集合，和/或可能在关闭时执行所有文档的扫描小时以确保数据完整性。您可以通过使用某些特定的自定义视图来缩小搜索范围，并在此视图中迭代文档而不是 DB 中的所有文档，但是这样的解决方案将存在风险，如果数据集成有些伪造，您会遇到麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-17T07:12:34.107

```
Dim ws As New NotesUIWorkspace
Dim session As New NotesSession

Set db = session.CurrentDatabase
Set view = db.GetView(("TMP_ID"))

Dim ckDoc As NotesDocument

Set ckDoc = view.GetDocumentByKey(ws.CurrentDocument.FieldGetText("ID"), True)

If Not ckDoc Is Nothing Then 
    Messagebox ("Запись с таким идентификатором уже существует")
    Call source.GotoField( "ID" )
    continue = False
End If 
```

# linux - 速率高时检测到 httperf 缓冲区溢出

> ID：12583955
> 
> 赞同：4
> 
> 时间：2012-09-25T13:26:44.670
> 
> 标签：linux, crash, buffer-overflow, httperf

我在具有 2CPU 和 4GB RAM 的 Ubuntu 12.04.1 LTS 64 位上运行 httperf 0.9.0（[从 Google Code 下载）。](http://code.google.com/p/httperf/downloads/list)我正在尝试对 Web 服务器进行基准测试，但遇到了以下缓冲区溢出问题。

终端命令：

```
httperf --timeout=5 --client=0/1 --server=localhost --port=9090 --uri=/?value=benchmarks --rate=1200 --send-buffer=4096 --recv-buffer=16384 --num-conns=5000 --num-calls=10 
```

运行几秒钟后，它崩溃了：

```
*** buffer overflow detected ***: httperf terminated
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x37)[0x7f1f5efa1007]
/lib/x86_64-linux-gnu/libc.so.6(+0x107f00)[0x7f1f5ef9ff00]
/lib/x86_64-linux-gnu/libc.so.6(+0x108fbe)[0x7f1f5efa0fbe]
httperf[0x404054]
httperf[0x404e9f]
httperf[0x406953]
httperf[0x406bd1]
httperf[0x40639f]
httperf[0x4054d5]
httperf[0x40285e]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f1f5eeb976d]
httperf[0x4038f1]
======= Memory map: ========
...
...
7f1f5fd74000-7f1f5fd79000 rw-p 00000000 00:00 0 
7f1f5fd91000-7f1f5fd95000 rw-p 00000000 00:00 0 
7f1f5fd95000-7f1f5fd96000 r--p 00022000 08:03 4849686                    /lib/x86_64-linux-gnu/ld-2.15.so
7f1f5fd96000-7f1f5fd98000 rw-p 00023000 08:03 4849686                    /lib/x86_64-linux-gnu/ld-2.15.so
7fff10452000-7fff10473000 rw-p 00000000 00:00 0                          [stack]
7fff1054f000-7fff10550000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

我用 gdb 检查[了核心转储文件](http://xiao-jia.com/downloads/core.httperf.6.2662.xjia-desktop.1348544875)，如下所示：

```
(gdb) list
198   event_signal (EV_PERF_SAMPLE, 0, callarg);
199 
200   /* prepare for next sample interval: */
201   perf_sample_start = timer_now ();
202   timer_schedule (perf_sample, regarg, RATE_INTERVAL);
203 }
204 
205 int
206 main (int argc, char **argv)
207 {
(gdb) bt
#0  0x00007f33d4643445 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007f33d4646bab in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007f33d4680e2e in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007f33d4716007 in __fortify_fail () from /lib/x86_64-linux-gnu/libc.so.6
#4  0x00007f33d4714f00 in __chk_fail () from /lib/x86_64-linux-gnu/libc.so.6
#5  0x00007f33d4715fbe in __fdelt_warn () from /lib/x86_64-linux-gnu/libc.so.6
#6  0x0000000000404054 in set_active (s=<optimized out>, fdset=0x612bc0) at core.c:367
#7  0x0000000000404e9f in core_connect (s=0x17e7100) at core.c:980
#8  0x0000000000406953 in make_conn (arg=...) at conn_rate.c:64
#9  0x0000000000406bd1 in tick (t=<optimized out>, arg=...) at rate.c:94
#10 0x000000000040639f in timer_tick () at timer.c:104
#11 0x00000000004054d5 in core_loop () at core.c:1255
#12 0x000000000040285e in main (argc=11, argv=<optimized out>) at httperf.c:971 
```

我稍微跟踪了源代码，发现这`FD_SET`似乎是原因。

最后，对于较低的速率（例如`--rate=100`或`--rate=500`），httperf 可以正常工作。我正在对不同的 Web 服务器进行基准测试，导致崩溃的速度不同。我的费率从 100 到 1200 不等。

有关更多详细信息，实际上我正在尝试重复[Roberto Ostinelli 所做的实验](http://www.ostinelli.net/a-comparison-between-misultin-mochiweb-cowboy-nodejs-and-tornadoweb/)，并且我已经调整了 TCP 设置并应用了他的博客文章中提到的补丁。

知道是什么导致了这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:26:53.803

您正在尝试使用大于 1024 的 fd。在低负载下，您不需要/使用那么多 fd。在高负载下，您需要更多 fd 并最终达到 1024，这会导致问题。

即使当我增加 __FD_SETSIZE 时，我也会遇到这个问题，所以我认为在执行绑定检查的任何代码中实际上都存在错误（gcc/llvm？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-15T23:11:07.150

较新版本的 glibc 在内部对 FD_SET（从 httperf 调用）进行自己的检查，这些检查失败，导致中止。尽管 httperf 是使用不同的 __FD_SET_SIZE 构建的，但 glibc 仍然使用它编译时使用的原始版本。

为了解决这个问题，我从 __FD_ELT 执行检查之前挖掘了旧版本的 sys/select.h 和 bits/select.h，并将它们放入 httperf 的 src/ 目录（在 sys/ 和 bits 中）。这样，httperf 使用不执行导致中止的检查的旧 FD_SET 宏。我使用了 glibc-2.14.1，但任何没有 bits/select2.h 的版本都可以解决问题。

我的一个朋友正在[https://github.com/klueska/httperf收集这个和其他对 httperf 的修复供我们自己使用（和你的！）](https://github.com/klueska/httperf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T16:10:41.167

我遇到了类似的崩溃，在我的情况下，用 epoll() 替换 select() 解决了它。

我只能在发布编译中重现该问题（我使用 eclipse 作为 devenv，我让 eclipse 为调试和发布设置编译器选项）。

这是崩溃：

```
1354813976/SBNotificationServer terminated
06/12 21:13:54 > ======= Backtrace: =========
06/12 21:13:54 > /lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x37)[0x7f4e10f90807]
06/12 21:13:54 > /lib/x86_64-linux-gnu/libc.so.6(+0x109700)[0x7f4e10f8f700]
06/12 21:13:54 > /lib/x86_64-linux-gnu/libc.so.6(+0x10a7be)[0x7f4e10f907be]
06/12 21:13:54 > 1354813976/SBNotificationServer[0x49db90]
06/12 21:13:54 > 1354813976/SBNotificationServer[0x49de05]
06/12 21:13:54 > 1354813976/SBNotificationServer[0x4a4b07]
06/12 21:13:54 > 1354813976/SBNotificationServer[0x4a5318]
06/12 21:13:54 > 1354813976/SBNotificationServer[0x4a2628]
06/12 21:13:54 > /lib/x86_64-linux-gnu/libpthread.so.0(+0x7e9a)[0x7f4e10c70e9a]
06/12 21:13:54 > /lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f4e10f79cbd]
06/12 21:13:54 > ======= Memory map: ========
06/12 21:13:54 > 00400000-00507000 r-xp 00000000 ca:01 141328         /usr/share/spotbros/SBNotServer/1354813976/SBNotificationServer
06/12 21:13:54 > 00706000-00707000 r--p 00106000 ca:01 141328 /usr/share/spotbros/SBNotServer/1354813976/SBNotificationServer
06/12 21:13:54 > 00707000-00708000 rw-p 00107000 ca:01 141328     /usr/share/spotbros/SBNotServer/1354813976/SBNotificationServer
06/12 21:13:54 > 00708000-0070d000 rw-p 00000000 00:00 0
06/12 21:13:54 > 0120d000-01314000 rw-p 00000000 00:00 0 [heap]
06/12 21:13:54 > 7f49f8000000-7f49f8021000 rw-p 00000000 00:00 0
.......
....... 
```

在此之后，我能够生成核心转储并得到：

```
warning: Can't read pathname for load map: Input/output error.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Core was generated by `./SBNotificationServer ../config.xml'.
Program terminated with signal 6, Aborted.
0 0x00007feb90d67425 in raise () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) 
(gdb) bt
0 0x00007feb90d67425 in raise () from /lib/x86_64-linux-gnu/libc.so.6
1 0x00007feb90d6ab10 in abort () from /lib/x86_64-linux-gnu/libc.so.6
2 0x00007feb90da539e in ?? () from /lib/x86_64-linux-gnu/libc.so.6
3 0x00007feb90e3b807 in __fortify_fail () from /lib/x86_64-linux-gnu/libc.so.6
4 0x00007feb90e3a700 in __chk_fail () from /lib/x86_64-linux-gnu/libc.so.6
5 0x00007feb90e3b7be in __fdelt_warn () from /lib/x86_64-linux-gnu/libc.so.6
6 0x000000000049e290 in CPhpResponseReader::WaitUntilReadable(int, int&, bool&) ()
7 0x000000000049e505 in CPhpResponseReader::Read(CReallocableBuffer&, int) ()
8 0x00000000004a5207 in CHttpPostBufferInterface::Flush() ()
9 0x00000000004a5a18 in CPhpRequestJob::Execute() ()
10 0x00000000004a2d28 in CThreadPool::Worker(void*) ()
11 0x00007feb90b1be9a in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0
12 0x00007feb90e24cbd in clone () from /lib/x86_64-linux-gnu/libc.so.6 
```

更多细节：

WaitUntilReadable（见回溯）是一个基本上使用 select() 来等待从网络服务器读取一些数据的函数。我改用 epoll() 再次重写了该函数。

我的程序是一个与数千个客户端保持连接的服务器。客户端向服务器发出请求，然后服务器将这些请求传递给网络服务器，并将响应发送回客户端。对于对网络服务器的请求，我的服务器有一个线程池。所以这里出现了另一个重要的细节：如果我将线程池的线程数设置为很高的数字，就会发生崩溃，这意味着同时进行了大量的 select() 调用（我复制了它，将其设置为 1024 个线程）。然后我启动了一个我为测试而制作的客户端模拟器，并启动了 1000 个客户端线程，尽可能快地发出请求。这使得它在使用 select() 并在 release 中编译时快速崩溃，但在引入 epoll() 后没有问题。

请注意，池中的每个线程都在使用 1 fd 进行 select() 调用。

这是我为解决此问题而更改的功能：

```
bool WaitUntilReadableDeprecated(int timeoutMSecs, int& elapsedMSecs, bool& closed)
{
    CTimeLapsus t;
    fd_set fileDescriptorSet;
    struct timeval timeStruct;
    closed = false;

    timeStruct.tv_sec = timeoutMSecs / 1000;
    timeStruct.tv_usec = 0;

    FD_ZERO(&fileDescriptorSet);
    FD_SET(m_socket, &fileDescriptorSet);

    int sel = select(m_socket + 1, &fileDescriptorSet, NULL, NULL, &timeStruct);

    if(sel == 0)
    {
        LogDebug("[CPhpResponseReader::WaitUntilReadable] select() returned 0, no data available");
        elapsedMSecs = t.GetElapsedMilis();
        return false;
    }
    else if(sel == -1)
    {
        if(errno ==  EBADF)
        {
            LogDebug("[CPhpResponseReader::WaitUntilReadable] select() returned -1, errno is EBADF, connection reset by host?");
            closed = true;
            elapsedMSecs = t.GetElapsedMilis();
            return true;
        }

        throw "CPhpResponseReader::WaitUntilReadable select error";
    }

    elapsedMSecs = t.GetElapsedMilis();
    return true;
}

bool WaitUntilReadableEpoll(int timeoutMSecs, int& elapsedMSecs, bool& closed)
{
    CIoPoller poller(8);
    CTimeLapsus t;
    closed = false;

    if(poller.Add(m_socket, EPOLLIN) == -1)
        LogError("[CPhpResponseReader::WaitUntilReadableEpoll] poller.Add(%d, EPOLLIN) failed", m_socket);

    int nfds = poller.Wait(timeoutMSecs);
    if (nfds > 0)
    {
        int theSocket = poller.GetEvents()[0].data.fd;
        uint32_t event = poller.GetEvents()[0].events;
        if(theSocket != m_socket)
        {
            LogError("[CPhpResponseReader::WaitUntilReadableEpoll] socket is different than expected", m_socket);
            elapsedMSecs = t.GetElapsedMilis();
            return false;
        }
        if((event & EPOLLERR) || (event & EPOLLHUP))
        {
            LogWarning("[CPhpResponseReader::WaitUntilReadableEpoll] Disconnected socket %d (event %d)", m_socket, event);
            elapsedMSecs = t.GetElapsedMilis();
            closed = true;
            return false;
        }
        if(event & EPOLLIN)
        {
            // ok
        }
    }
    else if (nfds == -1)
    {
        if(errno ==  EBADF)
        {
            LogWarning("[CPhpResponseReader::WaitUntilReadableEpoll] poller.Wait() returned -1, errno is EBADF, maybe connection reset by host");
            closed = true;
            elapsedMSecs = t.GetElapsedMilis();
            return true;
        }
        LogError("[CPhpResponseReader::WaitUntilReadableEpoll] poller.Wait() failed");
        elapsedMSecs = t.GetElapsedMilis();
        closed = true;
        return false;
    }
    else
    {
        LogDebug("[CPhpResponseReader::WaitUntilReadableEpoll] poller.Wait() returned 0, no data available");
        elapsedMSecs = t.GetElapsedMilis();
        return false;
    }

    elapsedMSecs = t.GetElapsedMilis();
    return true;
} 
```

CIoPoller 只是 epoll 的 c++ 包装器。

Ubuntu版本：

```
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.1 LTS
Release:    12.04 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-16T17:11:18.850

我遇到了同样的缓冲区溢出情况：

```
httperf --hog --wsess=1,3000,1 --rate 1 --burst-length=3000 --max-piped-calls 1 --max-connections=3000 --timeout 20 --server 127.0.0.1 --port 8888 --uri / 
```

看：[https ://gist.github.com/diyism/9586262](https://gist.github.com/diyism/9586262)

# asp.net-mvc-3 - 将 MvcContrib 的强类型 RedirectToAction 与锚标记 (hashtag) 一起使用？

> ID：12583956
> 
> 赞同：2
> 
> 时间：2012-09-25T13:26:45.950
> 
> 标签：asp.net-mvc-3, mvccontrib

我正在使用 MvcContrib 的强类型 RedirectToAction() 从一个控制器操作重定向到另一个，同时避免在我的应用程序流中使用魔术字符串，如下所示：

```
this.RedirectToAction<FooController>(c => c.Bar()); 
```

这反过来又重定向到

```
/foo/bar/ 
```

...但现在我希望能够重定向到最后带有锚点/井号标签的 URL，并将窗口滚动到`<a name="yarrr" />`标签，如下所示：

```
/foo/bar/#yarrr 
```

我可以将主题标签放在 TempData[] 中，将其写入 javascript 变量并通过 javascript 滚动窗口 - 但我宁愿遵循约定并将主题标签作为我的 URL 的结尾。

对此有何想法或自制解决方案？MvcContrib 似乎不支持它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:38:53.780

我不知道 MvcContrib 中存在这样的 ActionLink 重载，但编写一个将是微不足道的：

```
using System;
using System.Linq.Expressions;
using System.Web;
using System.Web.Mvc;
using System.Web.Mvc.Html;
using System.Web.Routing;

public static class HtmlExtensions
{
    public static IHtmlString ActionLink<TController>(
        this HtmlHelper html,
        Expression<Action<TController>> action,
        string linkText,
        object htmlAttributes,
        string fragment
    ) where TController : Controller
    {
        var routeValues = Microsoft.Web.Mvc.Internal.ExpressionHelper
            .GetRouteValuesFromExpression(action);
        return html.RouteLink(
            linkText: linkText,
            routeName: null,
            protocol: null,
            hostName: null,
            fragment: fragment,
            routeValues: routeValues,
            htmlAttributes: new RouteValueDictionary(htmlAttributes)
        );
    }
} 
```

然后在你看来：

```
@(Html.ActionLink<FooController>(c => c.Bar(), "click me", null, "yarrr")) 
```

* * *

更新：

`RedirectToAction`显然，当您在控制器中而不是在视图中寻找方法时，我误解了您的问题。我的回答和之前一样：`I am not aware of the existence of such an RedirectToAction overload in MvcContrib but writing one would be trivial:`

```
using System;
using System.Linq.Expressions;
using System.Web.Mvc;

public static class HtmlExtensions
{
    public static RedirectResult RedirectToAction<TController>(
        this Controller controller,
        Expression<Action<TController>> action,
        string fragment
    ) where TController : Controller
    {
        var routeValues = Microsoft.Web.Mvc.Internal.ExpressionHelper
            .GetRouteValuesFromExpression(action);
        var urlHelper = new UrlHelper(controller.ControllerContext.RequestContext);
        return new RedirectResult(
            UrlHelper.GenerateUrl(
                routeName: null,
                actionName: null,
                controllerName: null,
                protocol: null,
                hostName: null,
                fragment: fragment,
                routeValues: routeValues,
                routeCollection: urlHelper.RouteCollection,
                requestContext: controller.ControllerContext.RequestContext,
                includeImplicitMvcValues: true
            )
        );
    }
} 
```

然后在你的控制器里面：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return this.RedirectToAction<FooController>(c => c.Bar(), "yarrr");
    }
} 
```

# python - Matplotlib 等高线图作为后记

> ID：12583970
> 
> 赞同：3
> 
> 时间：2012-09-25T13:27:31.353
> 
> 标签：python, matplotlib, postscript

我有一个二维数组，我想使用 matplotlib 从中生成等高线图。保存为 PNG（或其他光栅格式）时一切正常，但是为了将图形包含在论文中，我需要保存为 postscript 格式。
问题是，当我保存到 postscript 时，我得到的文件非常大（一些 MB）。看起来 Matplotlib 以矢量格式保存所有内容。虽然这对轴和标签有意义，但如果光栅化会降低，我希望等高线图本身以光栅格式（我知道可以嵌入在后记中）。有人知道怎么做吗？我正在使用 Agg 后端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:13:51.033

您可以设置：

```
plt.gcf().set_rasterized(True) 
```

在 plt.savefig 之前

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T13:50:44.000

这是一个最小的工作示例。我使用[sega_sai](http://sourceforge.net/mailarchive/message.php?msg_id=27941302)的代码已经有一段时间了，没有任何问题。

```
from matplotlib.collections import Collection
from matplotlib.artist import allow_rasterization
import matplotlib.pyplot as plt

class ListCollection(Collection):
     def __init__(self, collections, **kwargs):
         Collection.__init__(self, **kwargs)
         self.set_collections(collections)
     def set_collections(self, collections):
         self._collections = collections
     def get_collections(self):
         return self._collections
     @allow_rasterization
     def draw(self, renderer):
         for _c in self._collections:
             _c.draw(renderer)

def insert_rasterized_contour_plot(c):
    collections = c.collections
    for _c in collections:
        _c.remove()
    cc = ListCollection(collections, rasterized=True)
    ax = plt.gca()
    ax.add_artist(cc)
    return cc

if __name__ == '__main__':
    import numpy as np
    x, y = np.meshgrid(*(np.linspace(-1,1,500),)*2)
    z = np.sin(20*x**2)*np.cos(30*y)
    c = plt.contourf(x,y,z,30)

    plt.savefig('fig_normal.pdf')

    insert_rasterized_contour_plot(c)
    plt.savefig('fig_rasterized.pdf') 
```

在我的电脑上，这会导致：

fig_normal.pdf：文件大小为 5810 KByte，需要约 5 秒才能在 Adob​​e Reader 中呈现

fig_rasterized.pdf：文件大小为 60 KB，直接在 Adob​​e Reader 中呈现

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-10T13:07:18.460

不幸的是，我没有设法从[这个](https://stackoverflow.com/a/14563507/7399449)或[这个](https://stackoverflow.com/a/12627640/7399449)答案运行解决方案。但是，我发现了一个简单的 1 行解决方法。

因此，可以为轴设置光栅化级别

```
ax.set_rasterization_zorder(Z) 
```

这样，所有 zorder 小于 Z 的对象都将被光栅化。

对我来说，它看起来像这样：

```
plt.contourf(<all plotting properties>, zorder=-2)
ax.set_rasterization_zorder(-1) 
```

以这种方式，轮廓是光栅格式，但所有其他对象（线条、文本）都是其顶部的矢量。对于我的图，大小从 ~4 Mb 到 ~400 kb。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T16:27:02.257

好的，最后我找到了自己问题的答案。它需要在 matplotlib 邮件列表中进行艰难的挖掘，所以我在[这里链接了相关线程](http://sourceforge.net/mailarchive/message.php?msg_id=27941302)，希望它对其他人也有帮助，并且可能更容易找到（顺便说一句，没有人回复那个可怜的人发送消息）。

我将在这里用文字总结这个想法。[正如sega_sai 建议](https://stackoverflow.com/a/12627640/359307)的那样，必须使用该`set_rasterized`方法。然而，正如我在评论中解释的那样，不是将该方法应用于整个图形，而是将该方法应用于构成等高线图的线条。诀窍是首先为它们创建一个“容器”并将其栅格化，而不是栅格化每一行（这是我已经尝试过的，但结果很糟糕）。这工作正常。在我链接的讨论中，您可以找到执行此操作的代码。

# jquery - 在列表中切换 div 并隐藏其他

> ID：12583974
> 
> 赞同：0
> 
> 时间：2012-09-25T13:27:35.507
> 
> 标签：jquery

我需要做的是在单击 .info 时切换 .information ，同时隐藏所有其他 .information div。我目前可以这样做我的问题是当我单击关闭打开的 .information div 时它不会关闭。如何修改以下代码来做到这一点？我有一个 toggle() 所以认为它会起作用？只是掌握jQuery！

```
<ol id="resonsToCome">
    <li>
        <p>A packed and extensive activites programe</p>
        <div class="info">
            <img src="images/icons/information.png" width="24" height="24" />
        </div>
        <div class="information">
            <p>The 40+ activities range from 1 to 2 hours. As everything is on site there is no time wasted travelling which ensures up to 5/6 activities per day.</p>
        </div>
    </li>
    <li>
        <p>Instructors stay with their group throughout your stay</p>
        <div class="info">
            <img src="images/icons/information.png" width="24" height="24" />
        </div>
        <div class="information">
            <p>Building a trust and friendship with our customers makes your stay memorable in so many ways.</p>
        </div>
    </li>
    <li>
        <p>Friendly and experienced instructors</p>
        <div class="info">
            <img src="images/icons/information.png" width="24" height="24" />
        </div>
        <div class="information">
            <p>Our instructors take part in a rigorous selection and continuous training programme.</p>
        </div>
    </li>
    <li>
        <p>A great environment and perfect location!</p>
        <div class="info">
            <img src="images/icons/information.png" width="24" height="24" />
        </div>
        <div class="information">
            <p>25 acres of beautiful Somerset fields, woodlands and river only 2 hours from London and 1 hour south of Bristol and Bath.</p>
        </div>
    </li>
</ol> 
```

和 jQuery

```
$('div.info').on('click', function() {
        $('.information').hide();
        $(this).closest('ol#resonsToCome li').find('.information').toggle();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:39:09.310

由于您正在隐藏所有内容，因此切换只会重新显示您想要隐藏的项目。试试这个

```
$(document).ready(function(){
    $('div.info').on('click', function() {
        var closestIsVisible = $(this).closest('ol#resonsToCome li').find('.information').is(":visible");
        $('.information').hide();
        if(!closestIsVisible)
        {
            $(this).closest('ol#resonsToCome li').find('.information').toggle();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:30:22.487

试试下面的代码：

```
$("div.info").on("click", function() {
    var el = $(this).siblings(".information");
    $("#resonsToCome .information").not(el.show()).hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:46:34.727

看到这个：

```
$('div.info').click(function(e) {
   $(this).parent().find('.information').toggle();
}); 
```

这将起作用。在这里工作小提琴 - [http://jsfiddle.net/RCefe/1/](http://jsfiddle.net/RCefe/1/)

单击 1,2,3,4，因为它们是 div 中具有“信息”类的文本，因为图像不可见。希望这可以帮助。

# ios - NSString 到字节数组，操作它，和字节数组到 NSString

> ID：12583976
> 
> 赞同：0
> 
> 时间：2012-09-25T13:27:42.607
> 
> 标签：ios, arrays, nsstring, byte, type-conversion

我正在 Windows 和 iOS 上制作一个项目。

在 Windows 中，我从用户那里获取输入，将其转换为字节数组，通过向每个字节添加大的随机值来操作数组（有点像对其进行编码），然后将转换为字符串的字节数组返回给用户。

我想在 iOS 应用程序中实现相同的功能。我从 UITextField 获取输入（出口说：myTextField）

现在的问题是，我如何将它转换为 Windows 中的字节数组并对其进行操作。我搜索了堆栈溢出并找到了这段代码

```
const char *bytearray = [self.myTextField.text UTF8String]; 
```

使用它，它给了我一个我想要的字节数组，但它是一个 const char *，我无法操作它。那么我如何将它存储在一个数组中来操作它。

此外，在 Windows 中向数组中的字节添加值时，如果该值超过 256，它会自动保持在 256 以内（例如，115 + 300，它存储为 159），这简化了我减去该值并获得原始值的过程值回来。这如何在 iOS 应用程序中完成。

```
 For a better clarity, I'll give an example of how it works in Windows
 byte array contains 'n' (Decimal value: 110) 
 adding 200 to it stores '6' (Decimal value: 54) 
 [310 % 256 = 54]

 When retrieving back original value I subtract 200 from '6' (54 - 200 = -146) 
 and get the original value (256 - 146 = 110) 
 All this is done automatically, by using a byte array (this 256 - 146 thing) 
```

如何在 iOS 中实现这种字节数组功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:38:06.837

> 如何将它转换为 Windows 中的字节数组并对其进行操作。我搜索了堆栈溢出并找到了这段代码

看看 NSString 的[`-getCString:maxLength:encoding:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/getCString%3amaxLength%3aencoding%3a)方法，它将使用您指定的编码解释字符串并将结果复制到您提供的缓冲区中。然后，您可以随心所欲地操纵它。类似的方法还有一两种其他方法，但是应该可以帮助您入门。

要转换回 NSString，您可以使用[`+stringWithCString:encoding`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithCString%3aencoding%3a)、[`+stringWithUTF8String:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithUTF8String%3a)、[`+stringWithCharacters:length:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithCharacters%3alength%3a)或其中`-init...`任何一个的版本。

> 此外，在 Windows 中向数组中的字节添加值时，如果该值超过 256，它会自动保持在 256 以内（例如，115 + 300，它存储为 159），这简化了我减去该值并获得原始值的过程值回来。这如何在 iOS 应用程序中完成。

决定这种行为的不是操作系统，而是语言。Objective-C 在这方面的行为就像 C、C++ 和可能的 C# 一样——如果你使用类似 的类型`unsigned char`，值将被限制为 0..255。毕竟，你只能在 8 位中容纳这么多的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:38:11.060

我会将 NSString 对象转换为 NSMutableData 对象。然后使用 [NSMutableData mutableBytes] 你得到你想要操作的数组。

# c# - 带有 OOXML Excel 密码的 NPOI 不起作用

> ID：12583977
> 
> 赞同：2
> 
> 时间：2012-09-25T13:27:47.443
> 
> 标签：c#, openxml, npoi

尝试读取加密的 2007 Excel 文档时，我在使用 OOXML 库时遇到问题。我发送给 DecryptToStream 方法的密码发送回“密码无效”消息，但如果我直接进入 excel，密码可以正常工作。下面是我正在使用的代码。

```
OleStorage ols = new OleStorage(d.fileLocation);
OfficeCrypto oc = new OfficeCrypto();
Stream test = oc.DecryptToStream(ols, "test123"); 
```

我也尝试使用 POI Decryptor 尝试读取加密的 2007 excel，但我也没有运气。下面是代码。

```
FileStream file = new FileStream(d.fileLocation, FileMode.Open, System.IO.FileAccess.Read);
NPOI.POIFS.FileSystem.POIFSFileSystem nfs;
nfs = new NPOI.POIFS.FileSystem.POIFSFileSystem(file);
Stream excelData;
try
{
    string password = "test123";
    EncryptionInfo info = new EncryptionInfo(nfs);
    Decryptor dc = Decryptor.GetInstance(info);

    if (!dc.VerifyPassword(password))
    {
        throw new NotImplementedException();
    }

    excelData = dc.GetDataStream(nfs);

}
catch (Exception ex)
{
    excelData = (Stream)file;
} 
```

无论我传递什么，VerifyPassword 方法总是返回 true，它仍然不会读取文档。[我使用http://poi.apache.org/encryption.html](http://poi.apache.org/encryption.html)作为参考创建了上述代码。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:25:36.463

据我所知，目前的*NPOI 1.2.5 版本*不支持 Excel2007 文件。幸运的是， [NPOI 2.0 alpha 版本](http://npoi.codeplex.com/releases/view/92382) 确实支持 Excel2007 文件，但不支持加密的 Excel 文件。

但是，有一个名为[OfficeOpenXmlCrypto](http://code.google.com/p/ooxmlcrypto/)的项目 支持读取加密的 Excel 文件。该项目基于 NPOI 1.2.1 版和[ExcelPackage](http://excelpackage.codeplex.com)项目来读取 Excel 2007 文件。

您可以下载*OfficeOpenXmlCrypto*项目的源代码，将旧的 NPOI 库替换为新的 NPOI 2.0 库并编译项目。

然后，您可以使用`XSSFWorkbook`和`OfficeCryptoStream`类的组合来读取加密的 Excel 文件的内容：

```
using (OfficeCryptoStream ocs = OfficeCryptoStream.Open("c:\\temp\\secured.xlsx", "PA$$W0rd"))
{
  NPOI.XSSF.UserModel.XSSFWorkbook w = new NPOI.XSSF.UserModel.XSSFWorkbook(ocs);

  NPOI.xssf.extractor.XSSFExcelExtractor ee = new NPOI.xssf.extractor.XSSFExcelExtractor(w);

  Console.Out.WriteLine(ee.Text);                    
} 
```

作为替代方案，[EPPlus 类库](http://epplus.codeplex.com/releases/view/42439) 提供了一个名为的类，该类`ExcelPackage`提供对加密 Excel 文档的支持。此类还有一些属性 ( `Workbook`) 用于访问 Excel 文档的内容。

这是一个读取加密 Excel 文件的第一个单元格的简单示例：

```
using (FileStream file = new FileStream("c:\\temp\\secure.xlsx", 
       FileMode.OpenOrCreate, System.IO.FileAccess.ReadWrite))
{
  using (ExcelPackage ep = new ExcelPackage(file, "P@$$W0rd"))
  {
    Console.Out.WriteLine(ep.Workbook.Worksheets[1].Cells["A1"].Value);     
  }
} 
```

您还可以将*OpenXml 2.0 SDK* `SpreadsheetDocument`类与`ExcelPackage`该类结合使用。

使用以下代码读取第一个单元格的内容（加密的 Excel 文档）：

```
using (FileStream file = new FileStream("c:\\temp\\secure.xlsx", 
       FileMode.OpenOrCreate, System.IO.FileAccess.ReadWrite))
{
  using (ExcelPackage ep = new ExcelPackage(file, "P@$$W0rd"))
  {     
    using (SpreadsheetDocument sd = SpreadsheetDocument.Open(ep.Package))
    {
      WorkbookPart workbookPart = sd.WorkbookPart;
      WorksheetPart worksheetPart = workbookPart.WorksheetParts.Last();
      SheetData sheetData = worksheetPart.Worksheet.Elements<SheetData>().First();

      var row = sheetData.Elements<Row>().FirstOrDefault();
      var cell = row.Elements<Cell>().FirstOrDefault();

      Console.Out.WriteLine(cell.CellValue.InnerText);
    }
  }
} 
```

如果密码无效，该类的构造函数`ExcelPackage`会抛出一个。`UnauthorizedAccessException`

# java - 模拟使用 Roo 生成的持久层

> ID：12583978
> 
> 赞同：2
> 
> 时间：2012-09-25T13:27:47.687
> 
> 标签：java, unit-testing, mocking, spring-roo

我有一些 Roo 生成的实体，带有动态查找器。

我正在尝试对一个类进行单元测试，该类基本上从数据库上的不同表中加载一些数据，运行一些计算，然后输出由这些计算结果组成的结构化对象，我想模拟持久层为了能够在没有数据库的情况下运行测试（例如在 Jenkins 上）。

但是，我找不到一个简单的解决方案来做到这一点：我尝试添加`@MockStaticEntityMethods`，但是由 Roo 创建的查找器的静态方法返回`TypedQuery`而不是实际实体，所以我无法将模拟对象传递给`AnnotationDrivenStaticEntityMockingControl.expectReturn`.

我也尝试过使用 Mockito 和 Powermock，但我似乎仍然无法克服静态查找器方法返回`TypedQuery`而不是真实实体的问题。

那么，嘲笑 Roo 生成的查找器的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:42:44.797

您是否尝试过创建 TypedQuery 的模拟并将其设置为返回模拟。

此外，这不是您问题的答案，但您是否考虑过使用 HSQL 之类的东西进行集成测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:46:52.443

最后，我通过创建一个 TypedQuery 的子类来解决这个问题，如下所示：

```
 public class DummyTypedQuery implements TypedQuery
    private T singleResult;
    private List resultList;

    public DummyTypedQuery(T singleResult) {
        this.singleResult = singleResult;
    }

    public DummyTypedQuery(List resultList) {
        this.resultList = resultList;
    }

    public DummyTypedQuery() {

    }

    @Override
    public List getResultList() {
        return resultList;
    }

    @Override
    public Object getSingleResult() {
        return singleResult;
    }
        ...the rest of implemented methods, left blank 
```

并将其设置为通过 AnnotationDrivenStaticEntityMockingControl 由 Roo 查找器返回；DummyTypedQuery 返回以编程方式创建的模拟对象，因此我不需要在数据库中有测试数据（也不需要实际连接到数据库）来运行测试。

我希望找到一些更优雅的方法来做到这一点，但这看起来是唯一的方法。

# javascript - 如何禁用 websocket 写入调试消息

> ID：12583980
> 
> 赞同：5
> 
> 时间：2012-09-25T13:27:47.453
> 
> 标签：javascript, node.js, websocket, socket.io

当websocket发送一些东西时，有没有办法禁用`debug - websocket writing 5:::`控制台中不断出现的消息，该消息正在聊天。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T13:32:13.753

您必须在 socket.io 实例上设置日志级别：

```
io.set('log level', 1); 
```

较低的数字会给你更少的信息（`0`我猜没有？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T11:51:36.357

将其包含在您拥有服务器代码的 app.js 中

```
io.set('log level', 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T12:19:19.137

这不再是最新的了。

根据[http://socket.io/docs/logging-and-debugging](http://socket.io/docs/logging-and-debugging)你必须使用调试范围

`DEBUG=* node yourfile.js`

为了输出调试消息。

但是，例如，当我有“chat_server.js”并申请时

`DEBUG=* node chat_server.js`

然后 Node.js 告诉我：

`DEBUG=* node chat_server.js ^ SyntaxError: Unexpected token *`

有人知道为什么不接受范围“*”吗？

# apache-flex - 如何测试 Flex 控件是否被另一个控件遮挡？

> ID：12583982
> 
> 赞同：2
> 
> 时间：2012-09-25T13:27:57.670
> 
> 标签：apache-flex, actionscript

我正在尝试编写一个函数

```
internal function isObscured(o: DisplayObject): Boolean; 
```

它告诉给定对象`o`是部分还是完全被另一个对象遮挡。我已经尝试过使用[`hitTestObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29)and [`hitTestPoint`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestPoint%28%29); 如果我测试手头对象的边界矩形中的*每个*点，后者实际上会做我想要的 - 不是很有效。我也尝试过使用[`setChildIndex`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#setChildIndex%28%29)，但它似乎也没有帮助，因为即使对象没有最大的子索引，它也可能不会被遮挡。

我目前的方法是测试具有比手头对象更大的子索引的对象的任何边界矩形是否与手头对象的边界矩形相交，但是我怀疑这仅适用于测试是否有任何*兄弟姐妹*与我的对象重叠。

有谁知道是否有更好的方法来检查 Flex 控件是否被另一个控件遮挡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:37:06.083

您必须检索代表每个组件的矩形并对其进行测试。

在这里很好地解释了：[使用 hitTestObject 进行 Flex 碰撞测试](https://stackoverflow.com/questions/1276108/flex-collision-testing-with-hittestobject)

HIH

# ruby-on-rails - 路由和复选框从 rails 1.xx 更新到 3.2.8

> ID：12583987
> 
> 赞同：0
> 
> 时间：2012-09-25T13:28:09.180
> 
> 标签：ruby-on-rails, routing, railscasts

刚刚检查了 Ryan Bates (http://railscasts.com/episodes/52-update-through-checkboxes) 的这一集，似乎 Rails 3.2.x 有不同的设置。

因此`map.resources :tasks, :collection => { :complete => :put }`不会产生预期的结果，因为它会丢弃一个`complete_tasks_path`不存在的问题。您能否让我知道如何在这种特殊情况下自定义路由？

似乎也`check_box_tag`需要除了 Ryan 之外的其他属性。因为它写回`unexpected kEND...`

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:30:04.347

听起来您想要以下内容，它在集合上定义了一个新的“已完成”操作，可在`/tasks/completed`.

以下是在集合上添加附加操作的三种方法

```
resources :tasks do 
  put :completed, :on => :collection

  # --- OR ---

  collection do
    put :completed
    # additional collection action here ...
  end

  # --- OR ---

  collection { put :completed }
end 
```

这将定义一个`completed_tasks_path`方法，并路由到`completed`您的`TasksController`.

# sql-server-2008 - SSRS 网络版错误使用本地，但我是

> ID：12583988
> 
> 赞同：0
> 
> 时间：2012-09-25T13:28:09.477
> 
> 标签：sql-server-2008, ssrs-2008

我已经搜索了高和低，不知道该怎么办。我在 Server 2008 上运行 SQL Server Web 版，它只支持本地数据库。我正在尝试连接到 localhost，但是当我测试我的连接时，我收到了这个错误。

> 功能：“您使用的 Reporting Services 版本要求您使用本地 SQL Server 关系数据库作为报表数据源和报表服务器数据库。” 此版本的 Reporting Services 不支持。

数据库是从 SQL Express 升级的，当我选择 @@version 时，它说它是 Web 版。我已经尝试重新启动，这似乎可以解决它，但只是一小会儿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T17:44:19.237

检查以确保每个报告还包含正确的连接字符串。（在报告服务中检查报告上的管理）如果这是从另一台服务器迁移的，那么它可能仍保留旧的连接字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:12:32.467

这是我见过的最愚蠢的事情。事实证明，它可能毕竟有效。我终于可以查看报告了。不幸的是，我把所有时间都花在了数据源上，并认为我看到的错误意味着它不起作用。

这是在数据源屏幕中让我失望的事情

1.  如果我对连接字符串进行了任何更改，我会收到我的密码无效的错误消息。无法重新测试连接，并且 Apply 不起作用。
2.  如果我进行测试连接，我会收到有关仅支持本地数据库的版本的错误，并且无法进行任何更改。
3.  我选择 Prompt for Password 并将我在数据源中的凭据放在“存储在报表服务器上的凭据”下。报告奏效了。然后我回到数据源并将这些凭据放在那里并选择“存储在服务器上”并能够“应用”。

哎呀。

# asp.net - 从我想要 ASP.NET ajax 的服务器端调用客户端函数

> ID：12583991
> 
> 赞同：1
> 
> 时间：2012-09-25T13:28:24.087
> 
> 标签：asp.net, ajax

我有客户端按钮事件。如果我可以签署 PDF，请单击呼叫 sgnPdf(ID)。

[MyForm.aspx]

```
 <script type="text/javascript">
    <% if (ViewData.CanSignPdf){ %>
    $(function() {
        $("#<%=btnSend.ClientID %>").click(function() {
            if ($('.IgnoreCheckBox').is(':checked')) {
                sgnPdf(<%=ViewData.NoticeID %>);
                return false;
            };
        });
    });
    <% } %>
</script> 
```

但是我需要在单击按钮后从服务器端调用此函数。

[MyForm.aspx.cs]

```
 protected void BtnSendClick(object sender, EventArgs e)
    {
        FormUnbindData();
        SaveMYData();
        //Here i want call client function sgnPdf(ID). How can I do this?
        ShowMyMessage();
    } 
```

好的，你只需要简单地做。例如在那里调用 alert("message") 。

* * *

好的，它的作品！但我需要从服务器端（C#）同步调用客户端方法（javascript），因为客户端方法直到服务器端方法结束（例如 button_click 事件）才开始。

* * *

我试试这个：

```
 ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), "anyId", "<script type='text/javascript'>alert('This is my alert message');</script>", true); 
```

没有行动，什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:38:02.667

单击按钮时使用它：

```
 ClientScript.RegisterClientScriptBlock(Page, typeof(Page),sgnPdf(ID), true); 

OR
    <asp:Button OnClientClick = "sgnPdf(ID)"/> 
```

在页面加载时使用它：

```
RegisterStartupScript("Unique key", "sgnPdf(ID);"); 
```

这是一个[参考](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerclientscriptblock.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:17:50.377

尝试关注....

```
protected void BtnSendClick(object sender, EventArgs e)
     {
         FormUnbindData();
         SaveMYData();
         **Edit**
         ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), "anyId", "<script language='javascript'>sgnPdf('"+ID+"');</script>", true);            

         ShowMyMessage();
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-05T06:46:59.617

如果您在页面上使用 UpdatePanel，则可以使用 ScriptManager.RegisterStartupScript 从服务器端调用客户端函数

在按钮单击事件中使用以下代码

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "script234", "sgnPdf('"+ID+"');", true);

```

如果您没有在页面上使用 UpdatePanel，那么您可以使用 ClientScript.RegisterStartupScript 从服务器端调用客户端函数

在按钮单击事件中使用以下代码

```
ClientScript.RegisterStartupScript(this.GetType(), "script234", "sgnPdf('"+ID+"');", true);

```

# javascript - 将外部链接添加到传单多边形

> ID：12583992
> 
> 赞同：1
> 
> 时间：2012-09-25T13:28:38.210
> 
> 标签：javascript, map, openstreetmap, leaflet

我使用传单在地图上显示具有多个多边形的地理区域，并且我想在单击每个图层时将其链接到网页。例如，链接 (http://wikipedia.com) 应替换“alert("You clicked the map at " + e.latlng);"

```
 var map = L.map('map').setView([45.7676067, 4.8351733], 6);

    var cloudmade = L.tileLayer('http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; 2011 OpenStreetMap, Imagery &copy; 2012 CloudMade',
        key: 'My Key',
        styleId: 22677
    }).addTo(map);

    // control that shows state info on hover
    var info = L.control();

    info.onAdd = function (map) {
        this._div = L.DomUtil.create('div', 'info');
        this.update();
        return this._div;
    };

    info.update = function (props) {
        this._div.innerHTML = '<h4>Région</h4>' +  (props ?
            '<b>' + props.Name + '</b><br />'
            : 'Survollez une région');
    };

    info.addTo(map);

    // get color depending on population density value
    function getColor(d) {
        return d > 1000 ? '#800026' :
               d > 500  ? '#BD0026' :
               d > 200  ? '#E31A1C' :
               d > 100  ? '#FC4E2A' :
               d > 50   ? '#FD8D3C' :
               d > 20   ? '#FEB24C' :
               d > 10   ? '#FED976' :
                          '#FFEDA0';
    }

    function style(feature) {
        return {
            weight: 2,
            opacity: 1,
            color: 'white',
            dashArray: '3',
            fillOpacity: 0.7,
            fillColor: getColor('10')
        };
    }

    function highlightFeature(e) {
        var layer = e.target;

        layer.setStyle({
            weight: 3,
            color: '#666',
            dashArray: '',
            fillOpacity: 0.7,
            fillColor: getColor('50')
        });

        if (!L.Browser.ie && !L.Browser.opera) {
            layer.bringToFront();
        }

        info.update(layer.feature.properties);
    }

    var geojson;

    function resetHighlight(e) {
        geojson.resetStyle(e.target);
        info.update();
    }

    function zoomToFeature(e) {
        map.fitBounds(e.target.getBounds());
    }

    function onMapClick(e) {
        alert("You clicked the map at " + e.latlng);
    }

    map.on('click', onMapClick);

    function onEachFeature(feature, layer) {
        layer.on({
            mouseover: highlightFeature,
            mouseout: resetHighlight,
            //click: zoomToFeature
            click: onMapClick
        });
    }

    geojson = L.geoJson(regions, {
        style: style,
        onEachFeature: onEachFeature
    }).addTo(map);

</script> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:37:56.383

您应该能够在 onMapClick 函数中使用简单的窗口重定向：

```
window.location = "http://www.google.com" 
```

或在新选项卡或窗口中打开使用 window.open

# cassandra - DataStax Cassandra 文件系统 - 固定宽度文本文件 - Hive 集成问题

> ID：12583996
> 
> 赞同：1
> 
> 时间：2012-09-25T13:28:53.767
> 
> 标签：cassandra, hive

我正在尝试使用 Hive 读取存储在 Cassandra 文件系统 (CFS) 中的固定宽度文本文件。当我从配置单元客户端运行时，我能够查询文件。但是，当我尝试从 Hadoop Hive JDBC 运行时，它说表不可用或连接错误。以下是我遵循的步骤。

**输入文件（employees.dat）：**

```
21736Ambalavanar              Thirugnanam              BOY-EAG       2005-05-091992-11-18
21737Anand                    Jeyamani                 BOY-AST       2005-05-091985-02-12
31123Muthukumar               Rajendran                BOY-EES       2009-08-121983-02-23 
```

**启动 Hive 客户端**

```
bash-3.2# dse hive;
Logging initialized using configuration in file:/etc/dse/hive/hive-log4j.properties
Hive history file=/tmp/root/hive_job_log_root_201209250900_157600446.txt
hive> use HiveDB;
OK
Time taken: 1.149 seconds 
```

**创建指向固定宽度格式文本文件的 Hive 外部表**

```
hive> CREATE EXTERNAL TABLE employees (empid STRING, firstname STRING, lastname STRING, dept STRING, dateofjoining STRING, dateofbirth STRING)
    > ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe'
    > WITH SERDEPROPERTIES ("input.regex" = "(.{5})(.{25})(.{25})(.{15})(.{10})(.{10}).*" )
    > LOCATION 'cfs://hostname:9160/folder/';
OK
Time taken: 0.524 seconds 
```

**从表中选择 *。**

```
hive> select * from employees;
OK
21736    Ambalavanar                     Thirugnanam                     BOY-EAG        2005-05-09      1992-11-18
21737    Anand                           Jeyamani                        BOY-AST        2005-05-09      1985-02-12
31123    Muthukumar                      Rajendran                       BOY-EES        2009-08-12      1983-02-23
Time taken: 0.698 seconds 
```

**使用配置单元表中的特定字段进行选择会引发权限错误（第一个问题）**

```
hive> select empid, firstname from employees;
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks is set to 0 since there's no reduce operator
java.io.IOException: The ownership/permissions on the staging directory cfs:/tmp/hadoop-root/mapred/staging/root/.staging is not as expected. It is owned by root and permissions are rwxrwxrwx. The directory must be owned by the submitter root or by root and permissions must be rwx------
        at org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:108)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:856)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:416)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
        at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:452)
        at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136)
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:133)
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1332)
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1123)
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:931)
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:255)
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212)
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Job Submission failed with exception 'java.io.IOException(The ownership/permissions on the staging directory cfs:/tmp/hadoop-root/mapred/staging/root/.staging is not as expected. It is owned by root and permissions are rwxrwxrwx. The directory must be owned by the submitter root or by root and permissions must be rwx------)'
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask 
```

第二个问题是，当我尝试从 JDBC Hive 驱动程序（在 dse/cassandra 节点之外）运行 select * 查询时，它说员工表不可用。创建的外部表就像一个临时表，它不会被持久化。当我使用 'hive> show tables;' 时，不会列出员工表。谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:30:56.317

对于第一个问题，我没有直接的答案，但第二个问题看起来像是由于一个已知问题。

DSE 2.1 中有一个错误，它会在运行 show tables 时从元存储中删除从 CFS 文件创建的外部表。仅删除表元数据，数据保留在 CFS 中，因此如果您重新创建表定义，则不必重新加载它。Cassandra ColumnFamilies 支持的表不受此错误的影响。这已在 DSE 的 2.2 版本中得到修复，该版本即将发布。

我不熟悉 Hive JDBC 驱动程序，但如果它在任何时候发出 Show Tables 命令，它可能会触发这个错误。