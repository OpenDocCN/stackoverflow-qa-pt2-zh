# StackOverflow 问答 12693000-12693999

# android - 使用 onstart 命令后如何停止服务？

> ID：12693001
> 
> 赞同：2
> 
> 时间：2012-10-02T15:06:30.800
> 
> 标签：android

使用该方法时如何让我的服务停止`onStartCommand`？

我知道我必须使用`stopService()`，但是 Eclipse 给了我一个错误。

到目前为止我有这个代码：

```
 package be.pegus.classapp;

    import android.app.Service;
    import android.content.Context;
    import android.content.Intent;
    import android.os.IBinder;
    import android.util.Log;

    public class ClassService extends Service {
    private static String tag = "something";
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return Log.d(tag, "k");
    }

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.d(tag, "destroy");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:17:02.133

您可以尝试`stopSelf();`在**onStartCommand**方法中调用来完成您的服务。这将不需要您提供`Intent`服务。

# ocean - 如何从 Petrel 中的其他曲面生成曲面

> ID：12693002
> 
> 赞同：1
> 
> 时间：2012-10-02T15:06:30.883
> 
> 标签：ocean, petrel

我的任务是在 Petrel 中创建一个新曲面。我应该使用 Ocean for Petrel 软件生成两个曲面的平均值并从中创建一个新曲面（如中间曲面）。

这可能吗？我从哪里开始？我还将感谢对我有帮助的资源链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:08:45.353

塞斯利，

您可以通过调用方法 CreateRegularHeightFieldSurface(string name, SpatialLatticeInfo lattice) 从 Collection 创建表面。

将属性创建为 RegularHeightFieldSurface.CreateProperty(Template template);

然后您可以通过 I 和 J 索引访问表面和属性的节点。表面的 X 和 Y 将从晶格自动生成。

```
Point2[]  world = …
var surf = c.CreateRegularHeightFieldSurface(name, oldSurf.SpatialLattice, PetrelProject.PrimaryProject.CoordinateReferenceSystem));
SurfaceProperty prop = surf.CreateProperty(PetrelProject.WellKnownTemplates.PetrophysicalGroup.Pressure);
prop.Name = " Pressure ";
var sizeIj = surf.SpatialLattice.OriginalLattice.Arrays.SizeIJ;
for (int i = 0; i < sizeIj.I; i++)
{
    for (int j = 0; j < sizeIj.J; j++)
    {
        surf[i, j] = …;
        prop[i, j] = …;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:53:46.943

安装 Ocean SDK，它带有示例和文档。您应该使用的类是RegularHeightFieldSurface - 检查Ocean.chm。有一个名为 PreStackSample 的示例，其中包含有关如何创建此类表面的示例。

# ruby - ruby 对两个数组进行排序

> ID：12693005
> 
> 赞同：2
> 
> 时间：2012-10-02T15:06:38.973
> 
> 标签：ruby, arrays, sorting

> **可能重复：**
> [Ruby：使用其中一个数组的值对 2 个数组进行排序](https://stackoverflow.com/questions/10002835/ruby-sorting-2-arrays-using-values-from-one-of-them)

我有一个看起来像这样的数组：

```
a = [[0,1], [1,2], [2,3]] 
```

和这样的数组`b`：

```
b = [5, 3, 4] 
```

中的元素`b`对应于`a`同一索引中的元素。我想对`b`元素进行排序`a`，同时以与`b`.

所以对于上面的例子，我会得到：

```
a = [[1, 2], [2, 3], [0, 1]] and b = [3, 4, 5] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:13:22.453

```
a = [[0,1], [1,2], [2,3]]
b = [5, 3, 4]
a, b = b.zip(a).sort.transpose
p b #=> [[1, 2], [2, 3], [0, 1]] 
```

要了解它是如何工作的，只需查看 ; 的结果即可`p b.zip(a)`。然后`p b.zip(a).transpose`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:52:13.360

这是显示输出和执行时间的快速基准：

```
require 'benchmark'
require 'pp'

a = [[0,1], [1,2], [2,3]]
b = [5, 3, 4]

pp a.sort_by.with_index{|_,i| b[i]}

a,b = b.zip(a).sort.transpose 
pp b

a = [[0,1], [1,2], [2,3]]
b = [5, 3, 4]
n = 1_000_000

puts "Using #{n} iterations:"
Benchmark.bm(7) do |bench|
  bench.report('sort_by') { n.times { a.sort_by.with_index{|_,i| b[i]} } }
  bench.report('zip')     { n.times { b.zip(a).sort.transpose } }
end 
```

这是输出：

```
[[1, 2], [2, 3], [0, 1]]
[[1, 2], [2, 3], [0, 1]]
Using 1000000 iterations:
              user     system      total        real
sort_by   2.370000   0.000000   2.370000 (  2.371345)
zip       2.730000   0.000000   2.730000 (  2.730663) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:48:30.567

即使@steenslag 提供了一个很好的解决方案，我仍然不建议使用`zip`它的低性能，特别是如果数组很大，因为它会生成一个中间数组。

以下代码更直接：

```
a = [[0,1], [1,2], [2,3]]
b = [5, 3, 4]
p a.sort_by.with_index{|_,i| b[i]} 
```

输出：

```
[[1, 2], [2, 3], [0, 1]] 
```

# objective-c - 协议中的方法定义

> ID：12693006
> 
> 赞同：0
> 
> 时间：2012-10-02T15:06:42.673
> 
> 标签：objective-c, ios

我在 @protocol 中使用 Object 方法，但协议只支持方法声明，有人可以帮助我如何将它与同一方法的方法定义连接起来。（在哪里编写方法定义）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:22:42.953

协议只是没有任何实现的方法声明列表。它们可用于将一组可能的（类）限制为实现特定协议的那些。

例如，如果您有一个`GasStation`类，您可能想要限制可以在车站加油的对象的类型（类）。当然，您可以简单地要求对象是 class 的后代`Vehicle`，如下所示：

```
@interface GasStation : NSObject
- (void)refuel:(Vehicle *)vehicle;
@end

@implementation GasStation 
- (void)refuel:(Vehicle *)vehicle {
    [vehicle addFuel:100];
}
@end 
```

但这不允许例如装满油桶。然而，允许传递任何类型的对象也是一个坏主意，因为如果你传递了一个实例，那么在尝试向它发送消息`Cat`时肯定会出错。`addFuel:`

因此，您可以定义一个可加油类必须实现的协议：

```
@protocol RefuelableThing
@required
- (void)addFuel:(float)fuel;
@end 
```

现在您可以使用该协议来限制可以加油的对象类型：

```
@interface GasStation : NSObject
- (void)refuel:(NSObject<RefuelableThing> *)thing;
@end 
```

A`Vehicle`当然会有一个方法`addFuel:`，因此可以`JerryCan`实现自己的单独版本，即使它不是`Vehicle`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:17:22.313

一旦你声明了协议，任何符合它的类都可以实现该协议中的方法。只需导入声明协议的标头，将协议添加到该类的接口并在 .m 中实现该方法，阅读该主题是一个很好的建议，顺便说一句

# css - 垂直和水平居中任何内容

> ID：12693011
> 
> 赞同：0
> 
> 时间：2012-10-02T15:06:55.137
> 
> 标签：css, dynamic, center

所以，假设我有一个容器，它可能包含也可能不包含任何其他元素，并且具有动态内容，即从数据库生成的文本，所以我们不确定它的宽度/高度。

一个人如何能够将这些动态元素水平和垂直居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:19:10.367

有一个黑客，是的。将您的容器设置为`display: table;`，然后在文本上（例如在 ap 中）将其设置为`display: table-cell; vertical-align: middle;`. 这将垂直对齐它。

您可以将其与`text-align`和`padding`水平居中。

[http://jsfiddle.net/E9QF3/](http://jsfiddle.net/E9QF3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:07:02.357

我能想到的最好方法是使用 JavaScript 动态计算加载、调整大小甚至 Ajax 事件时的高度。看看[这个 ALA 示例的来源。](http://www.alistapart.com/d/footers/footer_variation1.html "使用 CSS 和 JS 实现 List Apart 的垂直居中")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T13:44:04.097

```
#center_of_viewport {
    position: fixed; /* absolute also works */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    -o-transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    -moz-transform: translate(-50%, -50%);
    -webkit-transform: translate(-50%, -50%);
} 
```

# database - 使用 Doctrine 2 和 Zend Framework 2 使用一对多关系将实体保存在数据库中

> ID：12693023
> 
> 赞同：0
> 
> 时间：2012-10-02T15:07:34.390
> 
> 标签：database, doctrine-orm, zend-form, zend-framework2

我有一个直截了当的问题，但由于它与 Doctrine 2 和 Zend Forms 捆绑在一起，所以在这里尝试一下以获得专家的支持。

让我从我的实体 Team Entity 开始：

```
/**
 *
 * @ORM\Entity
 * @ORM\Table(name="team")
 * @property string $teamName
 * @property int $teamId
 */
class Team
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer", name="teamId", unique=true);
     */
    protected $teamId;

    /**
     * @ORM\Column(type="string")
     */
    protected $teamName;

    /**
     * @ORM\OneToMany(targetEntity="TeamPlayers", mappedBy="team", cascade={"persist"})
     */
    protected $player;

    /**
     * Magic getter to expose protected properties.
     *
     * @param string $property
     * @return mixed
     */
     public function __get($property)
    {
        return $this->$property;
    }

    /**
     * Magic setter to save protected properties.
     *
     * @param string $property
     * @param mixed $value
     */
    public function __set($property, $value)
    {
        $this->$property = $value;
    }
} 
```

玩家实体：

```
/**
 *
 * @ORM\Entity
 * @ORM\Table(name="player")
 * @property string $playerName
 * @property int $playerId
 */
class Player
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer", name="playerId", unique=true);
     */
    protected $playerId;

    /**
     * @ORM\Column(type="string")
     */
    protected $playerName;

    /**
     * @ORM\OneToMany(targetEntity="TeamPlayers", mappedBy="player", cascade={"persist"})
     */
    protected $team;

    /**
     * Magic getter to expose protected properties.
     *
     * @param string $property
     * @return mixed
     */
     public function __get($property)
    {
        return $this->$property;
    }

    /**
     * Magic setter to save protected properties.
     *
     * @param string $property
     * @param mixed $value
     */
    public function __set($property, $value)
    {
        $this->$property = $value;
    }
} 
```

TeamPlayer 实体：

```
/**
 *
 * @ORM\Entity
 * @ORM\Table(name="teamplayer")
 * @property int $teamId
 * @property int $playerId
 */
class TeamPlayer 
{
    /**
     * @ORM\Id
     * @Column(type="integer")
     */
    protected $playerId;

    /**
     * @ORM\Id
     * @Column(type="integer")
     */
    protected $teamId;

    /**
     * @ORM\ManyToOne(targetEntity="Team", inversedBy="player", cascade={"persist"})
     */
    protected $team;

    /**
     * @ORM\ManyToOne(targetEntity="Player", inversedBy="team", cascade={"persist"})
     */
    protected $player;

    /**
     * Set player
     *
     * @param \Entity\Player $player
     */
    public function setPlayer(\Entity\Player $player)
    {
        $this->player = $player;
    }

    /**
     * Get player
     *
     * @return  \Entity\Player
     */
    public function getPlayer()
    {
        return  $this->player;
    }

    /**
     * Set team
     *
     * @param \Entity\Team $team     
     */
    public function setTeam(\Entity\Team $team)
    {
        $this->team = $team;
    }

    /**
     * Get team
     *
     * @return \Entity\Team     
     */
    public function getTeam()
    {
        return $this->team;
    }
}

?> 
```

所以我现在有了 Zend Forms，最初一个用于添加球员，另一个用于添加团队，用户可以在其中添加具有团队名称和团队 ID 的团队，最后他可以为特定团队选择球员，即一个团队可以有很多玩家。因此，用户可以在添加到团队之前在表单中选择多个玩家。

我的问题是，在 addAction() 中的控制器中添加具有选定球员的球队时，我该如何处理这些关系映射，我是否需要添加更多方法来更新 teamplayer 表。如果有人解释如何在控制器中进行操作，对于像我这样越来越多地进入 Zend 和 Doctrine 的人来说会非常有帮助。

**编辑**

```
*Player Table:*

playerId    -- int      -- PK, AI -- Unique
playerName  -- varchar  -- Unique

*Team Table:*

teamId    -- int      -- PK -- Unique
teamName  -- varchar  -- Unique

*TeamPlayer Table:*

playerId  -- int  -- PK, FK -- references player.playerId
teamId    -- int  -- PK, FK -- references team.teamId 
```

PS 我知道如何为单个表保存对象或使用 Doctrine 中的连接获取数据，但我不知道如何使用表之间的这种关系保存实体。因此，请将此视为学习者的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:20:43.693

除了您的关联错误之外，在您的模型设计中，TeamPlayer 实体将是两个关联的拥有方。所以你必须做这样的事情：

```
$teamPlayer = new TeamPlayer;
$teamPlayer->setPlayer($player);
$teamPlayer->setTeam($team);

$entityManager->persist($teamPlayer);
$entityManager->flush(); 
```

**但**

看看 ManyToMany 关联，这将使您的关联和代码更具可读性和更少编写。

玩家方面的关联示例：

```
/**
 * @ManyToMany(targetEntity="Team")
 * @JoinTable(name="Team_Player",
 *      joinColumns={@JoinColumn(name="Player_id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="Team_id", referencedColumnName="id")}
 *      )
 */
protected $teams; 
```

还检查多对多的[原则文档](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)

# c# - 引用类型对象的实例字段的存储位置

> ID：12693028
> 
> 赞同：0
> 
> 时间：2012-10-02T15:07:44.500
> 
> 标签：c#, .net, class, heap-memory

我有一个疑问，假设在我的类（比如包含类）中，我有一个字段实例，它是引用类型的对象（比如另一个类，称为内部类），在运行时创建包含类的对象在堆上，是包含类将整个内部类对象存储在其中，还是包含类将内部类的引用存储在其中？

```
 internal class ContaingClass
    {
       private InnerClass objInner; 
    } 
```

ContainingClass 的对象会引用 objInner 还是应该将整个 objInner 及其所有数据存储在其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:19:24.657

在构造时，它将在该字段中包含一个空引用（假设您的构造函数没有将其设置为任何内容）。该字段稍后可以分配给对实例的引用，但该实例的“内容”不会存储在 ContainingClass 的“内容”中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:19:54.293

当`InnerClass`是引用类型时，它被存储为对实例的引用。

这是Eric Lippert[的回答](https://stackoverflow.com/a/2561622/66849)，解释了执行期间发生的情况的详细信息。

# php - 谷歌云打印 - 打印多份

> ID：12693030
> 
> 赞同：3
> 
> 时间：2012-10-02T15:07:46.263
> 
> 标签：php, printing, google-cloud-print

我对谷歌云打印 api 有疑问。我找不到为打印机添加功能的示例（特别是打印机 LaserJet Pro P1102w 的多个副本）。我使用[https://developers.google.com/cloud-print/docs/proxyinterfaces#register](https://developers.google.com/cloud-print/docs/proxyinterfaces#register)这个作为参考，但它对我没有多大帮助。它只描述了应该是什么样的响应，我无法得到类似的东西。如果我在我的谷歌帐户（打印机）上使用“列表”，我不会将任何功能列为我的打印机的一部分。如果有人知道该怎么做，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-19T16:55:40.497

如果您的软件是调用注册 API 的软件，那么您可以创建一个[CDD](https://developers.google.com/cloud-print/docs/cdd)来表示您的打印机的功能。在 CDD 中，您可以指定打印机支持“副本”功能。您在 /list API 调用中看不到功能的原因是因为它是一个大字段，并且在 /list 和 /search 调用中被省略（例外：使用 q=^recent 的 /search 调用将返回功能）。尝试使用[/printer](https://developers.google.com/cloud-print/docs/appInterfaces#printer) API 来检索打印机的功能。

为您的打印机注册副本功能后，请在 /submit API 的“票证”参数中指定要打印的副本数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T19:48:53.973

只是一个想法，多次调用API？我对 API 几乎一无所知，但尝试这样的事情：

```
$num = number of copies wanted;
while ($count < $num) {
call API;
count++;
} 
```

# facebook - 附加动作 video.watches 以发布动作

> ID：12693031
> 
> 赞同：0
> 
> 时间：2012-10-02T15:07:49.487
> 
> 标签：facebook, action, facebook-opengraph

我在 Open Graph App 面板中创建了创建操作。我也有查看操作并附加此操作工作正常，现在 Facebook 拒绝了查看操作并告诉我使用我现在正在使用的 Watch 但相同的代码，并且操作未附加到显式共享一切顺利，我得到返回的对象 FB . *回调。*_gcb31({"id":"10151457457579569"});

代码很简单，我是否使用了正确的操作...我也尝试过 video.watches 和 watch

```
FB.api(
    '/me/friso-journey-cam:create', 
    'post',
    { other: 'http://getcu3er.com/projects/friso/action.php?id='+slideshow_id+"&sec_key="+slideshow_seckey, "message":message_to_send, "fb:explicitly_shared":true,actions:'video.watches', access_token:access_token,  }, 

    function(response) {
       if (!response || response.error) {
          alert("There was an error in saving the slideshow! ");
          closePopup();
       } else {
          slideshow.object_id = response.id;
          ////console.log("object created :"+slideshow.object_id)
         // onSlideshowFinish();
       }
    } 
```

);

# php - 离开网站时如何取消设置会话但刷新时不设置？

> ID：12693039
> 
> 赞同：0
> 
> 时间：2012-10-02T15:08:01.300
> 
> 标签：php, zend-framework, zend-session, zend-session-namespace

当用户离开网站时，我需要让我的 Web 应用程序销毁/取消设置 Zend_Auth 会话：例如，当用户从 myapp.com 导航到 google.com 时，当他们回来时会话不再设置？

最好允许刷新而不取消设置（但不是必须的，因为必须应用第一部分）。

以前有人有过这样做的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:36:01.420

在卸载页面之前进行 ajax 调用，清除 Zend Auth 的身份

```
<script language="JavaScript">
        window.onbeforeunload = function(){
        $.get('http://example.com/auth/clear');
    }
</script> 
```

服务器端：

```
public function clearAction(){
    Zend_Auth::getInstance()->clearIdentity();
} 
```

# c# - Azure 上的 Microsoft.Glee.GraphViewerGdi.GViewer 引发的异常

> ID：12693041
> 
> 赞同：2
> 
> 时间：2012-10-02T15:08:05.400
> 
> 标签：c#, asp.net-mvc, azure, microsoft-glee

在问我想问的问题之前，让我先介绍一下我的问题。

我的公司在我们正在使用 ASP.NET MVC 开发的网站上工作。其中一个页面需要显示一个显示有向图的图像（该图是使用*Microsoft.Glee*图形库创建的）。创建图表的方法如下：

```
private bool CreateGraph(XDocument document, string graphPath)
{
        try
        {
            if (document.Descendants("Nodes").Count() == 0)
                return false;

            Microsoft.Glee.Drawing.Graph graph = new Microsoft.Glee.Drawing.Graph("graph");

            string id, parent;
            foreach (var node in document.Descendants("Nodes"))
            {
                id = node.Attribute("Id").Value;
                parent = node.Attribute("Parent").Value;

                Microsoft.Glee.Drawing.Edge edge = graph.AddEdge(parent, id);

                edge.TargetNode.Attr.Shape = Microsoft.Glee.Drawing.Shape.Circle;
                edge.SourceNode.Attr.Shape = Microsoft.Glee.Drawing.Shape.Circle;
            }

            Microsoft.Glee.GraphViewerGdi.GraphRenderer renderer = new Microsoft.Glee.GraphViewerGdi.GraphRenderer(graph);
            renderer.CalculateLayout();
            Bitmap bitmap = new Bitmap((int)graph.Width, (int)graph.Height, PixelFormat.Format32bppPArgb);
            renderer.Render(bitmap);
            bitmap.Save(graphPath);

            return true;
        }
        catch
        {
            throw;
        }
} 
```

我不是这段代码的原始作者，即它是由我公司的另一位程序员编写的，所以我不能真正证明代码中做出的决定是正确的。

无论如何，我遇到的问题如下：当我在本地测试页面时，图像创建成功并显示在页面上。但是，当我部署网站（我们使用 Windows Azure 进行托管）时，出现以下异常：

```
 The type initializer for 'Microsoft.Glee.GraphViewerGdi.GViewer' threw an exception.
    System.TypeInitializationException: The type initializer for 'Microsoft.Glee.GraphViewerGdi.GViewer' threw an exception. --->
    System.ComponentModel.Win32Exception: Error creating window handle.
      at System.Windows.Forms.NativeWindow.CreateHandle(CreateParams cp)
      at System.Windows.Forms.Control.CreateHandle()
      at System.Windows.Forms.Form.CreateHandle()
      at System.Windows.Forms.Control.get_Handle()
      at System.Windows.Forms.Control.CreateGraphicsInternal()
      at System.Windows.Forms.Control.CreateGraphics()
      at Microsoft.Glee.GraphViewerGdi.GViewer.GetDotsPerInch()
      at Microsoft.Glee.GraphViewerGdi.GViewer..cctor()
      --- End of inner exception stack trace ---
      at Microsoft.Glee.GraphViewerGdi.GViewer..ctor()
      at Microsoft.Glee.GraphViewerGdi.GraphRenderer.CalculateLayout() 
```

我想这是一些内存问题，但您能告诉我您对此有何看法以及问题的原因可能是什么？搜索网络并没有真正帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:46:43.490

不，这不是内存问题。问题是 Glee 库似乎需要一个窗口句柄来完成它的工作，这在本地调试时工作正常，因为您已登录到服务器并有一个打开的窗口终端来生成句柄。

但是，当在服务器上运行时，它很可能与网络服务等用户相关联，或者与未登录到窗口终端的特定用户相关联，因此没有可在其中创建窗口的关联桌面。

可能是运行您的代码的服务器具有中等信任度，并且不允许创建窗口句柄。我对 Azure 的了解还不够，不知道是不是这种情况。

编辑：

您似乎需要在 Azure 上启用完全信任

[http://blogs.msdn.com/b/windowsazure/archive/2009/03/18/hosting-roles-under-net-full-trust.aspx](http://blogs.msdn.com/b/windowsazure/archive/2009/03/18/hosting-roles-under-net-full-trust.aspx)

在您的服务定义文件中，您需要添加：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="MyService" 
   xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
   <WebRole name="WebRole" enableNativeCodeExecution="true">
    <InputEndpoints>
      <InputEndpoint name="HttpIn" protocol="http" port="80" />
    </InputEndpoints>
  </WebRole>
</ServiceDefinition> 
```

# php - 直接 MySQL 查询或缓存文件 - 哪个更快？

> ID：12693042
> 
> 赞同：0
> 
> 时间：2012-10-02T15:08:05.587
> 
> 标签：php, mysql, pdo

我正在尝试确定在重负载下直接从 mysql 数据库获取结果是否比从缓存文件中获取结果更快或更慢。在任何情况下，这将是最快的。

我有两组数据，我正在使用缓存文件。我正在使用 PDO。

1.  一个显示返回的类别列表 - 类别字母、类别名称和类别编号结果。我每页拉出 400 个类别。
2.  返回的视频缩略图 - 标题、网址、观看次数、来源和持续时间。我每页拉出大约 140 个拇指和数据。

我设置了缓存文件以序列化数组结果并保存到文件中。如果缓存文件时间仍然有效，它将显示缓存文件与数据库的结果。

我正在尝试确定查询数据库是否比访问缓存文件以显示结果更好。我所做的测试似乎表明从文件中获取结果比从数据库中获取结果要快。但是，无论如何我都不是大师......所以我想看看是否有人可以帮助我提供一些反馈。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:25:00.347

比基于文件的缓存更快的可能是例如 memcached 或 redis 服务器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:28:41.793

TIAS

缓存的全部意义在于加快网站速度，尤其是在数据库调用上，这通常是网站中最慢的部分。

但更重要的是，与输入这个问题并等待回复相比，您可以更快地运行基准测试。在你的开发机器上安装 xdebug 并下载一个解析器来告诉你在哪里节省时间以及你的瓶颈在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:21:58.173

当然是缓存文件。这就是缓存数据的意义所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:07:04.620

Caching to files is faster. You're on the right way!

If you are using just one unix server and have enough free memory, maybe the easiest and fastest method is to store the serialized data to files on in-memory /tmp -filesystem. So, forget memcached if possible. Also remember to give enough memory to mysql query cache if you don't have patience to implement caching everywhere. Home made caching is the lightest and thus the fastest way if made right.

Depending on your data, it might be better to just delete the cached file just before the data is changed instead of using expiration time. This way you know the data is good if the file exists.

And because you're interested of speed... I get much more power using basic mysql-functions instead of PDO or mysqli. And of course lighty instead of apache :)

# c# - 配置 TaskCompletionSource 的任务的延续行为

> ID：12693046
> 
> 赞同：5
> 
> 时间：2012-10-02T15:08:08.727
> 
> 标签：c#, .net, clr, task-parallel-library, async-await

考虑以下代码：

```
public Task SomeAsyncMethod()
{
    var tcs = new TaskCompletionSource();
    ... do something, NOT setting the TaskCompletionSource...

    return tcs.Task
}

public void Callsite1()
{
    await SomeAsyncMethod();
    Debug.WriteLine(Thread.CurrentThread.ManagedThreadId);
}

public void Callsite2()
{
    SomeAsyncMethod().ContinueWith((task) =>
    {
        Debug.WriteLine(Thread.CurrentThread.ManagedThreadId);
    });
} 
```

在某个时间点，在 SomeAsyncMethod 中创建的 TaskCompletionSource 设置在 ThreadPool 线程上：

```
Debug.WriteLine(Thread.CurrentThread.ManagedThreadId);
tcs.SetResult(); 
```

当等待来自 TaskCompletionSource 的任务时（如在 Callsite1 中），继续在调用 SetResult 的线程上同步执行。当调用 ContinueWith 时（如在 Callsite2 中），延续在不同的线程上异步执行。

调用配置等待无济于事，如

```
public void Callsite1()
{
    await SomeAsyncMethod().ConfigureAwait(true or false);
} 
```

这甚至不是这个问题的重点。作为 SomeAsyncMethod 的实现者，我不想通过调用 SetResult 来调用一些可能未知的代码。我想让延续总是异步安排。而且我不能依靠调用者来正确配置等待（如果这甚至可以工作的话）。

如何配置 TaskCompletionSource 以使其 Task 在等待时不同步执行其继续？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T17:00:45.600

没有办法阻止同步任务继续。通常，这不是问题。

但是，在某些情况下您确实需要这样做，例如，如果您在持有锁的同时完成任务。在这些情况下，您可以只`Task.Run`完成任务，如下所示：

```
// Set the result on a threadpool thread, so any synchronous continuations
//  will execute in the background.
Task.Run(() => tcs.TrySetResult(result));

// Wait for the TCS task to complete; note that the continuations
//  may not be complete.
tcs.Task.Wait(); 
```

这是一项先进的技术。[这是我的博客中阐述的“不要阻塞`async`代码（`async`一直向下）”](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)指南的一个例外。

它是我的[AsyncEx library](http://nitoasyncex.codeplex.com/)的一部分，作为扩展方法：

```
public static void TrySetResultWithBackgroundContinuations<TResult>(
    this TaskCompletionSource<TResult> @this, TResult result); 
```

这项技术[最早由 Stephen Toub 在他的博客上发表](http://blogs.msdn.com/b/pfxteam/archive/2012/02/11/10266920.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:39:05.827

> 如何配置 TaskCompletionSource 以使其 Task 在等待时不同步执行其继续？

不可能。您正在公开`Task`公开，一旦您这样做，任何人都可以自由附加同步延续（他们只需要使用另一个重载`ContinueWith`，他们*不需要*使用 async/await）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-27T20:52:48.690

从 .NET 4.6 开始，[`TaskCreationOption.RunContinuationsAsynchronously`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions(v=vs.110).aspx)仅针对这种情况添加：

> [它强制]添加到当前任务的延续被异步执行。

因此，您可以创建一个`TaskCompletionSource`with`TaskCreationOptions.RunContinuationsAsynchronously`并确保调用它`.SetResult()`不会同步执行随机代码。

```
var tcs = new TaskCompletionSource<bool>(
    TaskCreationOptions.RunContinuationsAsynchronously);

// some time later, somewhere else
tcs.SetResult(true);
DoMoreStuffWithoutWorryingThatSetResultJustRanRandomCode(); 
```

[Stephen Toub 的博文“.NET 4.6 中的新任务 API”](http://blogs.msdn.com/b/pfxteam/archive/2015/02/02/new-task-apis-in-net-4-6.aspx)中提供了更多详细信息。

> 当使用此选项创建的任务完成时，它甚至不会尝试同步调用延续......它只会异步调用所有延续，就好像没有人要求尽可能同步执行一样。

如果[`TaskContinuationOptions.RunContinuationsAsynchronously`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcontinuationoptions(v=vs.110).aspx)您需要类似的行为，例如`.ContinueWith()`.

> [`TaskContinuationOptions.RunContinuationsAsynchronously`指定]应异步运行延续任务。此选项优先于 TaskContinuationOptions.ExecuteSynchronously。

# ruby - 如何使用ncurses中的当前屏幕作为背景？

> ID：12693049
> 
> 赞同：0
> 
> 时间：2012-10-02T15:08:12.797
> 
> 标签：ruby, ncurses

我想使用 ncurses 在当前终端上创建覆盖。通过查看 C 示例，有一个`cur_scr`变量包含当前屏幕的数据，我假设我可以使用它来清除屏幕，以创建覆盖终端的 ncurses 外观。

我想用似乎有问题的 ruby​​ ncurses 来做到这一点，因为我不知道如何`cur_scr`从 ruby​​ 访问变量。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:04:51.633

恐怕这是不可能的。

当你启动 ncurses 时，它无法知道屏幕当前包含什么，所以它做的第一件事就是清除屏幕。一旦屏幕被清除，ncurses 确实知道屏幕的状态，因此它可以覆盖内容，但它通过始终在内存中保持屏幕的完整状态来做到这一点。（请参阅[ncurses 等人如何工作？](https://stackoverflow.com/questions/7558348/how-do-ncurses-et-al-work/7571408#7571408)）

一些终端能够保存屏幕内容，并在 ncurses 应用程序结束时重新显示，但这不是 ncurses 的功能，而是终端的功能。

# ios - 社交框架需要 Facebook 应用 ID？

> ID：12693052
> 
> 赞同：3
> 
> 时间：2012-10-02T15:08:22.750
> 
> 标签：ios, facebook, ios6, social-framework

在过去使用 Facebook-ios-sdk 时，我需要在 Facebook 网站上创建一个 App ID 以在 iOS 应用程序中发布。但是现在，有了社交框架，即使没有应用 ID，帖子也能正常工作......

这是正确的 ？或者即使在社交框架中也可以设置应用 ID？

问题是，现在您使用社交框架发送的所有帖子都报告标签“...来自 iOS”。但是，如果我想要以前的行为“来自我的应用程序名称”？

谢谢

# c++ - 解决这个网络爬虫任务的最简单方法是什么？

> ID：12693054
> 
> 赞同：3
> 
> 时间：2012-10-02T15:08:28.557
> 
> 标签：c++, python, ruby-on-rails, web-applications, web-crawler

我目前被分配创建一个网络爬虫来自动化我所做的一些报告任务。此网络爬虫必须使用我的凭据登录，在不同字段中搜索特定内容（一些与当前日期相关），如果有任何可用数据，则下载包含数据的 CSV，快速解析 CSV 以获得快速编号计数，创建附有 CSV 的电子邮件并发送。

我目前非常了解 C++ 和 Python，正在学习 C，但有人告诉我 Ruby 或 Ruby on Rails 是一个很好的方法。Ruby on Rails 是否仅用于创建 Web 应用程序，如果是，我的任务是否符合 Web 应用程序的描述，或者我可以只制作一个运行并完成所有工作的独立程序？

我想知道哪种语言最容易编码（具有易于使用的模块），具有与这些任务相关的良好库/模块。在执行此任务之前，我需要考虑什么？我要到 12 月底才能完成这个，而且我每周只在这里工作 12 个小时左右（我是学生，这是我的实习）。这可行吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:12:56.103

你已经知道 Python，那就去吧。CSV 解析和邮件发送是非常琐碎的任务，我假设您可以通过 Google 解决这些问题。

至于网络爬虫？使用[机械化](http://wwwsearch.sourceforge.net/mechanize/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:52:50.210

添加到机械化：

如果您的页面有一个无法处理的 javascript 组件，则 selenium 会驱动一个实际的 Web 浏览器。如果你一心想要使用 ruby​​，你也可以使用 WATIR，但是 selenium 同时具有 ruby​​ 和 python 绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:17:36.493

虽然这不是一个很好的*Stackoverflow*问题，但由于您是一名学生并且是为了实习，因此标记它或否决它似乎是一种糟糕的形式。:)

基本上，您几乎可以使用您列出的任何语言完成此任务。如果你想学习 Ruby 作为你实习经历的一部分，那么这可能是一个很棒的项目和学习它的一种方式。但是，python 也会很好用（你可能会使用 Mechanize）。我可能应该透露我是一名 Python 开发人员并且我喜欢它。我认为它是一种很棒的语言，有很好的支持和工具。我敢肯定 Ruby 的人对他们的语言也有同样的感受。同样，我认为这是你在实习期间想要完成的事情。你想带走什么经验，等等。祝你好运。

# windows - 用于私有存储库的 Windows Git 客户端？

> ID：12693055
> 
> 赞同：-1
> 
> 时间：2012-10-02T15:08:30.987
> 
> 标签：windows, git

我一直使用 TurtoiseSVN，但这次我想从公司的私有 Git 存储库中签出代码，所以它的地址是`http://github.Company.com/Project/AddAbc.java`.

我找到了 github for windows 程序，但我认为它仅适用于官方 GitHub 网站？

那么如何查看我的代码呢？是否有其他客户端可用？
不幸的是，我在 Windows 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:22:24.450

如果您习惯于 Tortoise，还有 TortoiseGit，它的工作方式类似，但适用于 Git 存储库：

[https://tortoisegit.org/](https://tortoisegit.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:13:27.977

你应该明确地查看[msysgit - Git for Windows](http://code.google.com/p/msysgit/)项目，它提供了一个合理的外壳，并且安装了 Git。如果你还没有，你真的很想习惯 Git CLI 工具——相信我。

对于结帐，请执行以下操作：

```
# cd projects/addabc
# git init
# git remote add origin http://github.Company.com/Project/AddAbc.git
# git remote -v
# git pull origin master 
```

**编辑**
忘了提及可在线获得的超棒[Git - Book](http://git-scm.com/book)。

# ms-access-2007 - 将颜色选择器添加到 MS Access 2007 表中的字段？

> ID：12693056
> 
> 赞同：0
> 
> 时间：2012-10-02T15:08:30.890
> 
> 标签：ms-access-2007

我希望将颜色选择器添加到 Access 数据库表中的字段中，而不必手动输入数字。

我在网上寻求帮助，但我不断回到网站，解释如何将事件添加到**表单**上的按钮而不是表格。

是否可以添加事件处理程序以在表字段上添加自定义代码？如果是这样..怎么办？

为任何帮助干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:26:22.027

为什么不使用数据表？它看起来像一个表格，但具有表格的许多功能。您可以使用表单向导轻松创建表单。拥有数据表表单后，您可以添加事件，例如打开显示各种颜色的弹出窗口。

# silverlight - 无法在我的 windows phone 7 应用程序中使用 WriteableBitmapEX

> ID：12693062
> 
> 赞同：0
> 
> 时间：2012-10-02T15:08:57.277
> 
> 标签：silverlight, windows-phone-7, writeablebitmapex

我正在使用 windows phone 7 应用程序，我需要使用 WriteableBitmapEX，我从[这个链接](http://writeablebitmapex.codeplex.com/releases/view/39577)下载了 dll 文件， 然后我解压缩了 zip 文件夹，然后我解压缩了该文件夹。但是当我尝试使用它时，我收到了这个错误

> 错误 1 ​​无法加载程序集文件：///C:\Users\User\Desktop\RenderV2\PhoneApp1\Bin\Debug\WriteableBitmapExWinPhone.dll。此程序集可能已从 Web 下载。如果程序集是从 Web 下载的，Windows 会将其标记为 Web 文件，即使它驻留在本地计算机上也是如此。这可能会阻止它在您的项目中使用。您可以通过更改文件属性来更改此名称。仅取消阻止您信任的程序集。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=179545](http://go.microsoft.com/fwlink/?LinkId=179545)

谁能帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:26:10.943

您需要解除对 DLL 的阻止，有几种方法可以做到这一点。

*   [方式一](https://stackoverflow.com/a/2439489/303696)
*   [方式二](http://www.jamescrowley.co.uk/2011/09/16/unblocking-downloaded-dlls/)

# java - Java 数组窄转换规则

> ID：12693072
> 
> 赞同：9
> 
> 时间：2012-10-02T15:09:28.820
> 
> 标签：java, reflection, casting

根据 JLS 7，5.1.6 缩小参考转换

> • 从任何数组类型 SC[] 到任何数组类型 TC[]，前提是 SC 和 TC 是引用类型，并且存在从 SC 到 TC 的缩小引用转换。

```
Object[] objArr = {"a","b","c"};
String[] strArr = (String[])objArr; // ClassCastException 
```

在上面的示例中，objArr 和 strArr 都是引用类型，并且存在从 Object 到 String 的窄引用转换。

```
Object obj = "a";
String str = (String)obj; 
```

但以下代码工作正常：

```
Object[] objArr = (Object[])java.lang.reflect.Array.newInstance(String.class, 3);
String[] strArr = (String[])objArr; 
```

我想问一下java用来进行强制转换的规则。据我所知，这两个示例之间的区别在于，在第一个示例中，objArr 是一个 Object 数组，其组件类型为 Object。第二个是一个对象数组，其组件类型为 String。

请注意，我不是在问如何进行转换，也不是向我展示如何使用 Arrays.copyOf 或其他库进行转换。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:20:48.103

```
Object[] objArr = {"a","b","c"};
String[] strArr = (String[])objArr; 
```

随之而来的问题是哪个是s 而不是s`{"a","b","c"}`的数组。`Object``String`

这就像做如下的事情 -

```
Object obj = new Object();
String str = (String) obj; //ClassCastException 
```

以下情况也不例外——

```
Object[] objArr = new String[] {"a","b","c"}; //Which is the case when you are using reflection
String[] strArr = (String[])objArr; //No exception 
```

这就像做如下的事情 -

```
Object obj = new String();
String str = (String) obj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:24:53.073

第一个示例中的“objArr”是 Object[] 类型。第二个示例中的“objArr”是 String[] 类型。

而 String 扩展 Object（String 是 Object 的一种类型） String[] 不扩展 Object[]（String-Array Object 不是 Object-Array 的类型）

在第一个示例中，您将 Strings 放入 Object[]（Object-Array）对象并不会使其成为 String[]（String-array）：

```
Object[] objArr = {"a","b","c"};
System.out.println(objArr instanceof Object[]);//true
System.out.println(objArr instanceof String[]);//false

String[] objArr2 = {"a", "b", "c"};
System.out.println(objArr2 instanceof Object[]);//false
System.out.println(objArr2 instanceof String[]);//true 
```

== 关于协方差

这不是我完全掌握的东西，但这是我从中得到的：

在 Java 中，数组是协变的，泛型不是。这意味着这有效：

```
Object[] o = new String[3]; 
```

这不会：

```
//ArrayList<Object> o = new ArrayList<String>(); //compile time error 
```

此外，这有效：

```
function1(new String[2]);
static void function1(Object[] o) {

    } 
```

这不会：

```
//function2(new ArrayList<String>()); //compile time error
 static void function2(ArrayList<Object> o) {

    } 
```

泛型受到这样的限制是有充分理由的，但这不是本次讨论的重点。

但是我相信这并不是真正关于协方差的讨论，而只是关于如何在 Java 中实现某些类。String[] 类型的对象也是 Object[] 类型的对象（带有所有不好的东西），因此能够这样写是正常的：

```
Object[] o = new String[3]; 
```

但是，由于数组的协方差，因为您可以将 String[] 视为 Object[] 并且在 Object[] 中您可以放置​​任何类型的类型，您可以专门将 Strings 放入对象数组中。IE你可以有这个：

```
Object[] o = //whatever kind of array;
o[0] = //whatever kind of instance; 
```

然而，这并没有改变最后一个示例中的 o 是 Object[] 类型的事实，因此您不能将其强制转换为 String[]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:26:08.160

```
Object[] objArr = {"a","b","c"};
String[] strArr = (String[])objArr; // ClassCastException 
```

> 在上面的示例中，objArr 和 strArr 都是引用类型，并且存在从 Object 到 String 的窄引用转换。

请注意，您正在从`Object` **数组**引用转换为`String` **数组**引用。因此缩小不适用，因为您没有将单个`Object`引用转换为`String`引用。

# php - PHP时间戳和mysql时间戳的区别

> ID：12693074
> 
> 赞同：1
> 
> 时间：2012-10-02T15:09:35.997
> 
> 标签：php, mysql, date

我对我制作的脚本感到非常沮丧，我在其中比较了时间戳。我可以看到时间戳完全不同。

1.  对于 2012-10-02 03:06:21，时间戳为：1349190381
2.  对于 2012-10-02 04:00:50，时间戳为：1349150450

我不明白为什么第二个时间戳低于第一个，即使时间更大。如何比较两个日期？

我通过 strtotime() 函数获取这些值。

**澄清**：我正在使用

```
$current_timestamp = strtotime(date('Y-m-d H:i:s'));

$till_date_timestamp = strtotime($database_object->till_date); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:12:35.930

你确定你做对了吗？

```
mysql> select from_unixtime(1349190381), from_unixtime(1349150450);
+---------------------------+---------------------------+
| from_unixtime(1349190381) | from_unixtime(1349150450) |
+---------------------------+---------------------------+
| 2012-10-02 09:06:21       | 2012-10-01 22:00:50       |
+---------------------------+---------------------------+
1 row in set (0.00 sec)

php > echo date('r', 1349190381), "\n", date('r', 1349150450);
Tue, 02 Oct 2012 10:06:21 -0500
Mon, 01 Oct 2012 23:00:50 -0500 
```

您在 strtotime 调用中使用了什么字符串？该函数可能**会**错误解释输入，除了格式正确且明确的日期字符串外，不应信任任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:22:30.507

不要依赖`strtotime`！很明显，PHP 的时区与数据库的时区不同。确保时区相同或像这样获取当前/直到时间戳（以便它们来自一个来源）：

```
SELECT UNIX_TIMESTAMP() AS 'Current' UNIX_TIMESTAMP(`datefield`) AS 'Till' FROM `table` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:14:03.280

这是我得到的[结果](http://codepad.org/7LLW9iie)。它们与您在问题中提到的不同。

代码：

```
 echo strtotime('2012-10-02 03:06:21'); //outputs: 1349147181
    echo "\n";
    echo strtotime('2012-10-02 04:00:50'); //outputs: 1349150450 
```

编辑：

`$till_date_timestamp = strtotime($database_object->till_date);`确保这`$database_object->till_date`是一个字符串。

# c# - 在线程中写入文本文件

> ID：12693077
> 
> 赞同：-5
> 
> 时间：2012-10-02T15:09:56.510
> 
> 标签：c#, file-io

```
if (f3.Length > 0)
{
    using (Stream stream = File.Open(path3, File.Exists(path3) ? FileMode.Truncate : FileMode.Create
        , FileAccess.Write, FileShare.Read))
    using (TextWriter writer = new StreamWriter(stream))
    {
        writer.Write(f3);
    }
} 
```

此代码在一个线程中，每 x 秒调用一次。我第一次写入文件，之后我可以写入它，尽管我没有遇到异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:15:32.437

> 问题是为什么我不能在第一次写入后写入新文件。

因为您的代码专门告诉它如何操作。 `File.Exists(path3) ? FileMode.Truncate : FileMode.Create` 这特别是创建一个流，如果不存在则创建一个新文件，如果存在则截断该文件*（*而不是仅仅出错）。

# ruby-on-rails - 如何在 Ruby on Rails 应用程序中为公司和人员建模？

> ID：12693078
> 
> 赞同：1
> 
> 时间：2012-10-02T15:09:56.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, database-design

我是 Rails 的新手，我正在尝试构建一个应用程序，其中一个**User**可以拥有许多**Organizations** ，这些组织可以拥有很多**Persons** ，而这些组织又可以拥有很多**Projects**。

这些是我的模型（这有意义吗？）：

用户 ---< 公司 ---< 人员 ---< 项目

现在我的关键问题是，如果一个人根本不属于任何公司会发生什么？我的应用程序是否仍然可以工作，我是否仍然可以访问项目，例如像这样......

```
current_user.persons.projects 
```

...尽管没有公司？

在 Rails 中建模这些表可能有一种相当简单的方法，但由于某种原因，我无法理解这一点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:06:15.177

个人和组织不是等级关系。它看起来像一个，但它不是。这是一个图表。

一个组织可以有 0+ 个子组织。随着时间的推移，它可以拥有 0+ 名员工，并且一个人可以同时为多个组织工作。

您还可以向个人或组织出售或购买，因此您必须将它们建模为相同的超类型。

这被称为派对模式，我建议在你开始之前在这里阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:12:41.407

您想研究使用

模型中的 belongs_to 和 has_many。

查看下面的本指南。

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:13:56.383

使用关联，您可以设置结构，如 ge0man 的答案中所述。

通过[验证](http://apidock.com/rails/ActiveResource/Validations)，您可以确保模型在保存/更新之前具有所需的正确属性。

如果你不调用像 User.projects 这样的函数，它只会返回一个空数组，因为没有找到列出给该用户的项目:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:17:42.890

> 现在我的关键问题是，如果一个人根本不属于任何公司会发生什么？我的应用程序是否仍然可以工作，我是否仍然可以访问项目，例如像这样......

对您的关键问题的回答是：是的，任何用户都可以访问属于没有公司的人的项目，因此：

```
Project.all 
```

# json - 如何使用 JSON 路径引用根键？

> ID：12693087
> 
> 赞同：7
> 
> 时间：2012-10-02T15:11:01.113
> 
> 标签：json, pentaho, jsonpath

我有这样的数据：

```
{"key": {"name":"hi", "size":10}} 
```

“key”是一个动态值。它不是固定的。我可以访问`name`和`size`使用这个 JSON 路径：

```
*.name
*.size 
```

如何使用 JSON 路径获取“键”本身的值？`*`给我整行数据，并`$`在`@`我的解析器中给我“找不到元素”。

我正在尝试使用 JSON 输入步骤在 Pentaho 中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:45:10.053

`$.*`将为您提供父对象的所有元素，在您的示例中，您将获得类似

```
[
   {
      "name":"hi",
      "size":10
   }
] 
```

根据：http: [//jsonpath.curiousconcept.com/](http://jsonpath.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T08:12:05.873

Pentaho JSON Input 步骤无法做到这一点，因为正如您所说，它使用 JSONPath。你需要用另一种方式来做。例如`Modified Java Script Value`：

```
var obj = JSON.parse(json);
var keys = Object.keys(obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T11:57:54.117

我遇到了与解释您的问题的一种方式相同的问题：如果您真的想`["key"]`从示例中获取输出而无需`"key"`在输入中指定。然后根本不要使用`jsonPath(data,`*...somequery*`)` ...。只需使用`Object.keys(data)`. 我正在使用 Javascript，并且不熟悉 Pentaho，所以我不知道我的回答是否适用于您的情况。

# ruby-on-rails - PG::Error: SELECT DISTINCT, ORDER BY 表达式必须出现在选择列表中

> ID：12693089
> 
> 赞同：70
> 
> 时间：2012-10-02T15:11:12.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql, distinct

> ActionView::Template::Error (PG::Error: ERROR: for SELECT DISTINCT, ORDER BY 表达式必须出现在选择列表中

我正在创建一个活动网站，并尝试按活动的开始时间对呈现的 rsvps 进行排序。有很多 RSVPS，所以我将它们与不同的分组，但在过去的几天里，我在对结果进行排序时遇到了很多困难，而没有在 PG 上弹出这个错误。我已经查看了有关该主题的一些先前问题，但仍然很迷茫。我怎样才能让它工作？非常感谢！

```
@rsvps = Rsvp.where(:voter_id => current_user.following.collect {|f| f["id"]}, :status => 'going').where("start_time > ? AND start_time < ?", Time.now, Time.now + 1.month).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }

<%= render :partial => 'rsvps/rsvp', :collection => Rsvp.where(:event_id => @rsvps).select("DISTINCT(event_id)").order('start_time asc') %> 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-08-21T20:40:23.567

我知道这是一个相当古老的问题，但我只是在脑海中经历了一个小例子，它帮助我理解了为什么 Postgres 对 SELECT DISTINCT / ORDER BY 列有这种看似奇怪的限制。

假设您的 Rsvp 表中有以下数据：

```
 event_id |        start_time
----------+------------------------
    0     | Mar 17, 2013  12:00:00
    1     |  Jan 1, 1970  00:00:00
    1     | Aug 21, 2013  16:30:00
    2     |  Jun 9, 2012  08:45:00 
```

现在你想获取一个不同的 event_id 列表，按它们各自的 start_time 排序。但是应该`1`去哪里？它应该先出现，因为一个元组从 1970 年 1 月 1 日开始，还是应该因为 2013 年 8 月 21 日而最后出现？

由于数据库系统无法为您做出该决定，并且查询的语法不能依赖于它可能正在操作的实际数据（假设`event_id`是唯一的），因此我们仅限于按`SELECT`子句中的列进行排序。

至于实际问题 - Matthew 的答案的替代方法是使用聚合函数，如`MIN`or`MAX`进行排序：

```
 SELECT event_id
    FROM Rsvp
GROUP BY event_id
ORDER BY MIN(start_time) 
```

显式分组和聚合`start_time`允许数据库提出结果元组的明确排序。但是请注意，在这种情况下，可读性绝对是一个问题；）

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-10-02T15:25:14.507

ORDER BY 子句只能在应用了 DISTINCT*之后应用。*由于 DISTINCT 操作仅考虑 SELECT 语句中的字段，因此这些字段是唯一可以在 ORDER BY 中使用的字段。

从逻辑上讲，如果您只想要一个不同的 event_id 值列表，那么它们出现的顺序应该是无关紧要的。如果顺序确实很重要，那么您应该将 start_time 添加到 SELECT 列表中，以便有顺序的上下文。

此外，这两个 SELECT 子句是不等价的，所以要小心：

```
SELECT DISTINCT(event_id, start_time) FROM ...

SELECT DISTINCT event_id, start_time FROM ... 
```

第二个是你想要的形式。第一个将返回一系列记录，其中数据表示为 ROW 构造（内部带有元组的单列）。第二个将返回正常的数据输出列。它仅在 ROW 构造被减少的单列情况下按预期工作，因为它只是单列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-24T09:46:57.117

因为，您使用的是 start_time 列，所以您可以使用[PostgreSQL 的窗口函数](https://www.postgresql.org/docs/8.4/functions-window.html)之一的 row_number() 并将其堆叠在

*   start_time 的顺序，如果您期望第一个 start_time 的行值

    从 (SELECT event_id ,ROW_NUMBER() OVER(PARTITION BY event_id ORDER BY start_time) AS first_row FROM Rsvp) 中选择 event_id，其中 first_row = 1

*   start_time 的相反顺序，如果您期望最后一个 start_time 的行值

    选择 event_id from (SELECT event_id ,ROW_NUMBER() OVER(PARTITION BY event_id ORDER BY start_time desc) AS last_row FROM Rsvp) where last_row = 1

您还可以根据需要使用不同的[窗口功能](https://stackoverflow.com/questions/7747327/sql-rank-versus-row-number)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-05T15:11:51.077

### 操作的句法与逻辑顺序

我认为只有理解[了 SQL 中操作的逻辑顺序](https://blog.jooq.org/a-beginners-guide-to-the-true-order-of-sql-operations/)，才能真正理解[和](https://blog.jooq.org/how-sql-distinct-and-order-by-are-related/)（或者，就此而言）[之间关系`DISTINCT``ORDER BY`](https://blog.jooq.org/how-sql-distinct-and-order-by-are-related/)的混淆。它不同于操作的句法顺序，后者是混淆的主要来源。`GROUP BY`

在这个例子中，考虑到它的句法接近性，它*看起来*好像`DISTINCT`与 相关，但它实际上是一个在（投影）*之后*`SELECT`应用的运算符。由于 what does（删除重复行）的性质，在操作（包括该子句）*之后*，行的所有未投影内容都不再可用。根据[操作的逻辑顺序（简化）](https://blog.jooq.org/a-beginners-guide-to-the-true-order-of-sql-operations/)： *`SELECT``DISTINCT`*`DISTINCT``ORDER BY`**

 ***   `FROM`（产生所有可能的列引用）
*   `WHERE`（可以使用所有列引用`FROM`）
*   `SELECT`（可以使用 中的所有列引用`FROM`，并创建新的表达式，并为它们取别名）
*   `DISTINCT`（对由 投影的元组进行操作`SELECT`）
*   `ORDER BY`（取决于 的存在`DISTINCT`，可以对由 投影的元组进行操作`SELECT`，如果`DISTINCT`不存在 *也许（取决于方言）也适用于其他表达式）

### 关于`DISTINCT`和`ORDER BY`

事实上，没有`DISTINCT`,`ORDER BY`可以访问（在某些方言中）还没有被投影的东西可能有点奇怪，当然有用。例如，这有效：

```
WITH emp (id, fname, name) AS (
  VALUES (1, 'A', 'A'),
         (2, 'C', 'A'),
         (3, 'B', 'B')
)
SELECT id
FROM emp
ORDER BY fname DESC 
```

[dbfiddle 在这里](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=ddd30b296f1822720b0cd26618c69911)。生产

```
id
--
2
3
1 
```

当您添加`DISTINCT`. 这不再有效：

```
WITH emp (id, fname, name) AS (
  VALUES (1, 'A', 'A'),
         (2, 'C', 'A'),
         (3, 'B', 'B')
)
SELECT DISTINCT name
FROM emp
ORDER BY fname DESC 
```

[dbfiddle 在这里](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=c86117c5098766af735ce4dc250ba628)。错误是：

> 错误：对于 SELECT DISTINCT，ORDER BY 表达式必须出现在选择列表第 8 行：ORDER BY fname DESC

因为你`fname`会赋予什么价值`name = A`？`A`还是`C`？答案将决定您是否会因此得到`A`,`B`或`B`, `A`。无法决定。

### PostgreSQL`DISTINCT ON`

现在，正如[上面链接的文章](https://blog.jooq.org/how-sql-distinct-and-order-by-are-related/)中提到的，PostgreSQL 支持一个例外，这偶尔会很有用：（`DISTINCT ON`另请参阅[这些问题](https://stackoverflow.com/q/9795660/521799)）：

```
WITH emp (id, fname, name) AS (
  VALUES (1, 'A', 'A'),
         (2, 'C', 'A'),
         (3, 'B', 'B')
)
SELECT DISTINCT ON (name) id, fname, name
FROM emp
ORDER BY name, fname, id 
```

[dbfiddle 这里](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=7ed40f60e79273dcfa13c110d1178c7f)，产生：

```
id |fname|name
---|-----|----
1  |A    |A   
3  |B    |B 
```

此查询只允许生成 的不同值`name`，然后对每个重复行取第一个给定`ORDER BY`子句的值，这使得每个不同组的选择是明确的。[这可以在其他 RDBMS 中使用窗口函数来模拟](https://blog.jooq.org/using-distinct-on-in-non-postgresql-databases/)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-06-25T16:12:35.310

我能够通过在我的选择中添加一列然后`ORDER BY`在该列上使用来解决此错误。我有`SELECT DISTINCT concat(dl.FirstName, concat(' ', dl.LastName)) as displayName, ...`并且我想`ORDER BY`姓氏（就像一个人一样）。我尝试了所有我能想到的`ORDER BY`在.`SELECT``, dl.LastName as lastName``ORDER BY lastName ASC`

我最终得到了一个额外的专栏，但在我的应用程序中很容易忽略它。**

# mysql - 如何在 Cloudbees Java EE6 应用程序中配置 Mysql 数据源？

> ID：12693090
> 
> 赞同：1
> 
> 时间：2012-10-02T15:11:11.783
> 
> 标签：mysql, java-ee-6, cloudbees

我正在尝试在 Cloudbees Paas 上部署现有的 Jboss 7 战争应用程序，但我遇到了数据源配置问题。在此专用[Cloudbees wiki 条目](http://wiki.cloudbees.com/bin/view/RUN/JavaEE)和[相关线程](https://cloudbees.zendesk.com/entries/21286801)之后，我在应用程序启动期间最终出现以下错误（线程中的其他人已经提到过）：

```
javax.resource.ResourceException: Wrong driver class [class com.mysql.jdbc.Driver] for this connection URL [jdbc:cloudbees://cbdebate--1] 
```

我的配置文件如下：

**cloudbees-web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<cloudbees-web-app xmlns="http://www.cloudbees.com/xml/webapp/1">
 <!-- Application ID (formatted CB_ACCOUNT/APPNAME) -->
 <appid>hck/debate</appid>

 <!-- DataSources (use names refererenced via <resource-ref> in WEB-INF/web.xml) -->
    <resource name="jdbc/debate" auth="Container" type="javax.sql.DataSource">
        <param name="username" value="myuser" />
        <param name="password" value="mypassword" />
        <param name="url" value="jdbc:cloudbees://cbdebate--1" />

        <!-- Connection Pool settings -->
        <param name="maxActive" value="20" />
        <param name="maxIdle" value="2" />
        <param name="maxWait" value="10000" />
        <param name="validationQuery" value="SELECT 1" />
    </resource>
</cloudbees-web-app> 
```

**web.xml**（相关部分）

```
(...)
<resource-ref>
    <res-ref-name>jdbc/debate</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>
(...) 
```

**persistence.xml**（相关部分）

```
 <persistence-unit name="debate" transaction-type="JTA">
            <provider>org.hibernate.ejb.HibernatePersistence</provider>
            <jta-data-source>java:/jdbc/debate</jta-data-source>

(... entity classes declaration ...)

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <property name="hibernate.max_fetch_depth" value="5"/>
            <property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform" />
            <property name="org.hibernate.worker.batch_size" value="1000" />
        </properties>
        </persistence-unit> 
```

预先感谢您的任何帮助

环境：Jboss 7，JPA 2.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T21:30:58.143

感谢 Nicolas 的回答和进一步的谷歌搜索，我设法让它工作。据我了解，您不能`com.cloudbees.jdbc.Driver`在 Jboss 应用程序中使用 cloudbees 驱动程序（特别是在我们的 Cloudbees Java EE 6 服务器上），而必须使用 mysql驱动程序`com.mysql.jdbc.Driver`。
正如 Nicolas 所说，`jdbc:cloudbees://[databaseName]`数据库 url 按照惯例使用 cloudbees 驱动程序。您需要使用引用实际数据库的 url（您可以在 cloudbees 数据库配置页面中找到它），格式为：

```
jdbc:mysql://ec2-AAA-BBB-CCC-DDD.compute-1.amazonaws.com:3306/[databaseName] 
```

这里的重点是 jdbc：**mysql** ://...

使用上面的表格更改 cloudbees-web.xml 中数据库的 url，它就可以工作了！

也许 cloudbees 的人可以使文档在这一点上更清晰一些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:18:05.267

要使用 jdbc:cloudbees:* JDBC URL，您需要使用 com.cloudbees.jdbc.Driver 作为驱动程序类名。

按照惯例，在 JVM 上注册的每个 jdbc 驱动程序在它自己的特定 url 信息之前使用一个前缀，因此 jdbc URL 是“jdbc::”

# opengl-es - 必须更改纹理的精度，为什么？

> ID：12693092
> 
> 赞同：0
> 
> 时间：2012-10-02T15:11:18.523
> 
> 标签：opengl-es, glsl, shader

我在片段着色器上做了一些工作，以允许纹理渲染和颜色渲染。进行更改后，我的所有纹理都非常像素化（就像一个旧的 8 位游戏），我不得不将纹理坐标的精度提高到中等。这也给了我性能上的打击。我只是不明白为什么我突然不得不改变精度。

这是“原始”着色器：

```
varying lowp vec2 TexCoordOut;
uniform sampler2D Texture;

uniform lowp float opacity;

void main(void) {
    gl_FragColor = opacity * texture2D(Texture, TexCoordOut);
} 
```

这是着色器在更改后的样子：

```
varying mediump vec2 TexCoordOut;
uniform sampler2D Texture;

uniform lowp vec4 color;
uniform lowp float opacity;
uniform int colorRender;

void main(void) {
    if (colorRender == 1)
    {
        gl_FragColor = color;
    } else {
        gl_FragColor = opacity * texture2D(Texture, TexCoordOut);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:17:23.983

`lowp`只有大约 8 位的最小精度，所以如果你的纹理是 128x128 或更大，你会开始看到伪影，如果你的纹理大于 256x256，一些纹素将完全丢失（你描述的严重像素化）。

`mediump`至少有 11 位精度，所以应该可以达到 1024x1024 纹素（虽然是浮点类型，但如果你的纹理坐标未标准化，你可以得到像素化）

`highp`具有至少 24 位精度（与 IEEE 单精度浮点数相同），因此更好。

请注意，根据规范，这些精度是最小值——如果硬件更快的话，硬件可能会使用更高的精度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:12:12.840

您将性能损失归咎于切换到 mediump，但您还向着色器添加了分支。鉴于单个绘图调用的每个片段将始终采用相同的路径，您应该只有两个不同的着色器，每个着色器都没有分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:29:52.367

分别为每个片段评估纹理坐标。然而，低精度的数字是在每个片段的基础上量化的，这意味着许多相邻片段实际上将评估为相同的量化纹理坐标。原则上，纹理坐标变量的精度必须允许更多的量化步骤，而不是纹理中在采样方向上的像素/纹素数。

# php - 不要转义存储为字符串的 html（执行或处理 html 字符串）

> ID：12693093
> 
> 赞同：8
> 
> 时间：2012-10-02T15:11:19.710
> 
> 标签：php, html, escaping, echo

在 PHP（Wordpress 主题功能，尝试将存储在主题选项中的 html 添加到博客标题）中，我试图获得以下行：

```
$x="<p>html</p>"; echo $x; 
```

像这样渲染 html：

```
echo "<p>html</p>"; 
```

结果不同，第一个将显示 html 标签，而第二个将处理 html。有人可以帮忙吗。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-02T15:15:47.710

A. 如果你想显示 HTML 标签，你可以使用`htmlentities`

例子

```
$x = "<p>html</p>";
echo htmlentities($x); 
```

输出

```
<p>html</p> 
```

B.如果您想反过来可能会存储您的字符串，因为 `&lt;p&gt;html&lt;/p&gt;`这就是您看到的原因，`<p>html</p>`那么您应该使用`html_entity_decode`

例子

```
$x = "&lt;p&gt;html&lt;/p&gt;";
echo html_entity_decode($x); 
```

输出

```
html 
```

C. 可能是您没有使用网络浏览器并且您想要`html`然后您应该使用`strip_tags`

例子

```
$x = "<p>html</p>";
echo strip_tags($x); 
```

输出

```
html 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T15:13:54.920

使用单引号

[PHP中的单引号与双引号](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

```
echo '<p>HTML</p>'; 
```

# java - 如何处理 Lucene.net 中的关系更新？

> ID：12693094
> 
> 赞同：0
> 
> 时间：2012-10-02T15:11:23.623
> 
> 标签：java, .net, lucene, full-text-search

我正在开发一个使用 Lucene.net 的应用程序，并且有一个我不知道如何处理的用例。假设我有“书籍”和“作者”，它们对应于 2 个不同的表格和对象。如果我创建一个作者“John Doe”，然后创建一本书，我也会为该书的作者编制索引；这允许我进行类似“标题作者：Doe”的搜索，它将返回所有书籍。

现在假设我将作者重命名为其他名称，由于存在 FK 关系，因此数据库中的所有书籍都可以。然而，在 Lucene 中，这些书籍将过时，因为它们包含作者的姓名作为文本。

我该如何处理这些情况？我猜Lucene没有FK约束或类似的东西。

（注意：标记为 Java，因为 Lucene 和 Lucene.net 非常相似）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:32:10.317

不幸的是，在 Lucene 中，如果您更改一个 Lucene 文档中索引的数据，则需要更改其他 Lucene 文档中相应的索引数据——而 2.9.x 中的 Lucene 不支持任何 UPDATE 功能（您必须添加和删除每个文档）。

# java - 两个版本的 apache commons - 使用特定的一个

> ID：12693102
> 
> 赞同：0
> 
> 时间：2012-10-02T15:11:55.590
> 
> 标签：java

我正在为开源 ETL 实用程序（Pentaho 数据集成）编写一个 FTP 客户端插件。PDI 默认使用旧版本的 Apache commons NET jar，我需要新版本提供的功能。

我不希望通过用新的 JAR 替换旧的 JAR 来影响 Pentaho 中的所有内容。我是否可以将它们放在一起，只告诉我的新代码从我添加的新 JAR 中专门导入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:24:33.840

你不能从插件代码本身做到这一点。如果插件加载到不同的类加载器中，您只能这样做，在进入父类加载器之前，需要将其配置为从您自己的 apache commons jar 加载类。

大多数应用程序服务器都这样做：您可以添加一个 lib 文件夹，您的代码将在应用程序服务器自己的库之前使用该文件夹。

其他应用程序服务器支持 OSGi，它允许您部署同一库的多个版本，前提是它们具有正确的 MANIFEST.MF 文件。在这种情况下，您可以在自己的 MANIFEST.MF 文件中指定您需要的版本。

Pentaho Kettle 显然支持 OSGi 插件。

# java - Java 子字符串增量

> ID：12693105
> 
> 赞同：0
> 
> 时间：2012-10-02T15:12:16.410
> 
> 标签：java, string

> **可能重复：**
> [Java 子字符串操作](https://stackoverflow.com/questions/12692662/java-substring-manipulation)

我是 java 新手，正在尝试打印增量子字符串。我的意思是用户输入一个字符串，并且该字符串以增量方式打印。例如，用户输入“我喜欢我”。并将其保存为字符串。然后该程序将打印：

```
I
I
I l
I li
I lik
I like
I like
I like m
I like me
I like me. 
```

我到目前为止的代码：

```
import java.util.Scanner;

public class Substring{
    public static void main(String[] args){

  String substring;
  do{
    Scanner in = new Scanner(System.in);
    System.out.println("Please enter a string consisting of at least one character: ");
    substring = in.nextLine();
  } while(substring.indexOf(" ") == -1);

  String letter = substring.indexOf(0);
  do{
    System.out.println(letter);
    letter = substring.indexOf();
  } while(!letter.equals(substring)); 
```

第一个 do-while 语句检查是否在字符串中输入了某些内容。第二个 do-while 语句应该每次都打印出新字符串，直到字母等于子字符串。我知道这是一个令人困惑的问题并且措辞不好，但是作为 Java 新手，我不确定如何专业地措辞。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:16:41.550

你需要类似的东西：

```
for (int i=1; i<substring.length(); i++)
    System.out.print(substring.substring(0,i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:22:53.047

> 第一个 do-while 语句检查是否在字符串中输入了某些内容。

不，第一个 do-while 检查字符串是否没有空格字符 (" ")。

如果您想确保字符串中有某些内容，您应该这样做：

```
while (substring.length() == 0); 
```

然后我会做一个类似于@Dan 张贴的for循环。

# java - 如何停止从 Eclipse 执行的 Java 应用程序

> ID：12693106
> 
> 赞同：1
> 
> 时间：2012-10-02T15:12:16.027
> 
> 标签：java, eclipse

假设我在主函数中有无限循环的 Java 控制台应用程序。当我从 DOS 窗口执行它时：

```
java MyBuggy程序

```

我可以按 Ctrl+C 来停止它。当我使用 Eclipse (Windows) 中的运行命令时，如何停止它？该程序未在任务管理器中列出。控制台窗口中的 Ctrl+C 不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T15:14:21.127

在 Eclipse 的右下方，您会看到一个红色图标。你可以点击它。它会弹出确认消息。就接受吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T15:14:33.437

单击控制台视图中的终止图标（红色方块）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T17:22:14.367

该进程**必须**在任务管理器的列表中。检查使用大量 CPU 的进程。最有可能的名称是![在此处输入图像描述](../Images/4b40ce50929ffa899f0bf138855bc823.png)javaw.exe

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-09T14:08:35.010

去：

> Windows -> 显示视图 -> 其他... -> Android -> 设备

并按下 STOP 红色按钮

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-27T09:11:44.207

[![**您可以分配任何快捷键来终止**](../Images/eaf752516fbeaafbf39edbf531064f45.png)](https://i.stack.imgur.com/693rZ.png)

您可以分配任何快捷键来终止

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-18T05:23:37.323

在控制台中，点击红色图标（注意：只有在启动程序后才会变为红色，否则保持灰色/半透明） [![Eclipse 控制台视图供参考](../Images/2130a5dceca4ba6450cd41914d1c4775.png)](https://i.stack.imgur.com/37l1C.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-05T20:07:53.027

在 CMD 中运行以下命令

```
netstat -ano |findstr <-port no-> 
```

您将获得正在运行的应用程序的 pid（进程 ID）

```
taskkill /f /pid <-your pid-> 
```

# php - 在 html 标记中的鼠标悬停中使用 setTimeOut 函数中的 php 变量

> ID：12693108
> 
> 赞同：0
> 
> 时间：2012-10-02T15:12:21.253
> 
> 标签：php, javascript, html, variables, settimeout

我有一个 php 变量：

```
<?php
$imagename = $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile());
?> 
```

这是在循环中创建的。这个循环显示一些图像。

当我将鼠标悬停在图像上时，onmouseover 会触发。这一切顺利。

问题是：

```
onmouseover="myTimer=setTimeout('imageswitcher(<?php echo $imagename;?>)', 2000);" 
```

php 不工作。现在我读了一些关于 ajax 请求的东西。但我不知道它是什么或如何使用它。所以我希望这里有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:29:23.850

首先，除了 PHP 变量之外，您还有一百万零一个问题。首先，您真的不应该再使用该`onmouseover`属性了。看看[JavaScript 和事件 - 最佳实践](https://stackoverflow.com/questions/6888651/javascript-events-best-practice)

**所以为了用更好**的代码复制你的问题，你会做这样的事情。

```
<!-- This should be in an external JS file -->
<script>
    // IE Event Listener "Polyfill"
    var addEvent = function(element, event, callback) {
        if (document.addEventListener) {
            element.addEventListener(event, callback);
        } else {
            element.attachEvent('on' + event, callback);
        }
    };

    addEvent(document, 'load', function() {
        var element = document.getElementById('element');

        attachEvent(element, 'onmouseover', function() {
            myTimer = setTimeout('imageswitcher(<?php echo $imagename; ?>)', 2000);
        });
    }

</script>

<!-- Not an actual element, used for example purposes only -->
<element id="element"></element> 
```

# 变量应该使用'var'分配

* * *

您的下一个问题是您的分配`myTimer`没有`var`. 现在，这里不太可能导致问题，最好记住这一点。

```
var myTimer = setTimeout('imageswitcher(<?php echo $imagename; ?>)', 2000); 
```

# 函数字符串

* * *

我不知道您要做什么，但是您将字符串而不是函数传递给`setTimeout`. 让我们解决这个问题。

```
var myTimer = setTimeout(function() {
    imageswitcher(<?php echo $imagename; ?>);
}, 2000); 
```

# 解决问题

* * *

现在，让我们在这里解决实际问题。

`$imagename`可能是一个字符串，您在 javascript 中没有考虑到该字符串。让我们解决这个问题。

```
imageswitcher('<?php echo $imagename; ?>'); 
```

# 把它们放在一起

* * *

```
<!-- This should be in an external JS file -->
<script>

    var addEvent = function(element, event, callback) {
        if (document.addEventListener) {
            element.addEventListener(event, callback);
        } else {
            element.attachEvent('on' + event, callback);
        }
    };

    addEvent(document, 'load', function() {
        var element = document.getElementById('element');

        attachEvent(element, 'onmouseover', function() {
            var myTimer = setTimeout(function() {
                imageswitcher('<?php echo $imagename; ?>');
            }, 2000);
        });
    };
</script>

<!-- Not an actual element, used for example purposes only -->
<element id="element"></element> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:16:14.247

在 Javascript 代码中嵌入 PHP 值是最安全的`json_encode()`，并且由于您在 HTML 属性中输出，因此最好也将其放入`htmlspecialchars()`; 此外，不鼓励将字符串传递给`setTimeout`，因此您应该在那里传递一个匿名函数：

```
onmouseover="myTimer=setTimeout(function() { imageswitcher(<?php echo htmlspecialchars(json_encode($imagename));?>) }, 2000);" 
```

# tags - TYPO3 parseFunc.short 在 html 标签中

> ID：12693110
> 
> 赞同：0
> 
> 时间：2012-10-02T15:12:30.037
> 
> 标签：tags, typo3, typoscript

大家

我正在使用 TYPO3 (4.5.17)。在我的内容中，我有一些我想替换的特定标签

例如：我想改变这个

```
....<intertitre>Mon titre de section</intertitre>... 
```

至

```
....<h2>Mon titre de section</h2>... 
```

我尝试过这样的事情，但它不起作用。

```
page.stdWrap.parseFunc.short {
  intertitre = h3
} 
```

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:11:27.093

将定义添加到 lib.parseFunc（非 RTE 字段）和 lib.parseFunc_RTE（RTE 字段）。因此，使用该定义的每个字段都将起作用。意思是：如果你可以使用 fe strong，你就可以使用自己的标签：

```
lib.parseFunc.short {
  intertitre = h3
}
lib.parseFunc_RTE.short < lib.parseFunc.short 
```

AFAIK 页面对象没有 stdWrap 功能。

# sql - 在一个查询中使用 group by 计算多列

> ID：12693111
> 
> 赞同：33
> 
> 时间：2012-10-02T15:12:33.547
> 
> 标签：sql, database, count, group-by

我计算来自多个列的值，如下所示：

```
SELECT COUNT(column1),column1 FROM table GROUP BY column1
SELECT COUNT(column2),column2 FROM table GROUP BY column2
SELECT COUNT(column3),column3 FROM table GROUP BY column3 
```

例如，这会返回 column1 array(attr1 => 2000, attr2 => 3000...) （每列都有特定的值和少数值）。问题是我的应用程序中的“表”可能是一个带有一些连接和 where 子句的查询，这可能需要 0.1 秒。通过做所有这些计算，“表”每次都会重新计算，这是不必要的。有什么方法可以通过一个查询获取我想要的结果，或者“缓存”生成表的查询？否则我相信非规范化将是这里唯一的解决方案。我想要与上述查询相同的结果。我正在使用 mysql-myisam。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-02T15:26:20.623

如果不了解数据的上下文/结构，很难知道如何为您提供帮助，但我相信这可能会对您有所帮助：

```
SELECT 
     SUM(CASE WHEN column1 IS NOT NULL THEN 1 ELSE 0 END) AS column1_count
    ,SUM(CASE WHEN column2 IS NOT NULL THEN 1 ELSE 0 END) AS column2_count
    ,SUM(CASE WHEN column3 IS NOT NULL THEN 1 ELSE 0 END) AS column3_count
FROM table 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T15:15:04.613

一种解决方案是将其包装在子查询中

```
SELECT *
FROM
(
    SELECT COUNT(column1),column1 FROM table GROUP BY column1
    UNION ALL
    SELECT COUNT(column2),column2 FROM table GROUP BY column2
    UNION ALL
    SELECT COUNT(column3),column3 FROM table GROUP BY column3
) s 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-03T06:38:03.237

```
select tab1.name,
count(distinct tab2.id) as tab2_record_count
count(distinct tab3.id) as tab3_record_count
count(distinct tab4.id) as tab4_record_count
from tab1
left join tab2 on tab2.tab1_id = tab1.id
left join tab3 on tab3.tab1_id = tab1.id
left join tab4 on tab4.tab1_id = tab1.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T15:18:16.607

您没有说您使用的是哪个数据库服务器，但如果临时表可用，它们可能是最好的方法。

```
// table is a temp table
select ... into #table ....
SELECT COUNT(column1),column1 FROM #table GROUP BY column1  
SELECT COUNT(column2),column2 FROM #table GROUP BY column2  
SELECT COUNT(column3),column3 FROM #table GROUP BY column3  
// drop may not be required
drop table #table 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T08:04:48.353

```
 SELECT SUM(Output.count),Output.attr 
FROM
(
    SELECT COUNT(column1  ) AS count,column1 AS attr FROM tab1 GROUP BY column1 
    UNION ALL
    SELECT COUNT(column2) AS count,column2 AS attr FROM tab1 GROUP BY column2
    UNION ALL
    SELECT COUNT(column3) AS count,column3 AS attr FROM tab1 GROUP BY column3) AS Output

    GROUP BY attr 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-09T03:44:46.880

SELECT COUNT(col1 OR col2) FROM [table_name] GROUP BY col1,col2;

# python - 正则表达式捕获组

> ID：12693117
> 
> 赞同：3
> 
> 时间：2012-10-02T15:12:48.040
> 
> 标签：python, regex

所以我有一个快速的问题，我无法弄清楚。

我有一些要解析的行，例如：

*   `a = a/2;`
*   `b*= a/4*2;`
*   `float c += 4*2*sin(2);`

而我想要的是获得分配的分配变量名称。所以，在这种情况下，我想检索`a`, `b`, `c`.

我有以下正则表达式：

```
match = re.search(r'\b(?:float)?(.*)(?:(\+|-|\*|\\)? =)',line) 
```

当我打印出来`m.group(1)`它会返回`a`, `b *`, `c +`.

我无法弄清楚为什么它之前也捕获了操作员`=`，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:17:18.327

您有一个前面的贪婪捕获，`(.*)`并且您允许您的 operator-capture 是可选的（带有结尾`?`）；有了这个，贪婪捕获就是引入操作员而不是让它通过匹配的组`=`。

尝试将贪婪捕获更改为那里可以接受的内容。从外观上看，它只能是字母数字值和空格（数字是猜测，因此如果不需要，可以将其删除）：

```
\b(?:float\s+)?([a-zA-Z0-9]+)\s*(?:(\+|-|\*|\\)? =) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:44:48.010

我认为它可以是一个更简单的正则表达式。

首先，您的变量只能是字母数字，我还没有看到任何其他类似的变量。

所以你的捕获组已经是这样的了：`(\w+)`

那么，如果在那之前唯一能做的就是一个浮点数，它确实应该是这样的`\b(?:float\s+)?`

但实际上，这就是我们所需要的。

唯一缺少的是在尝试一次读取所有内容的情况下读取到行尾，否则如果您读取每一行，则不需要：`.*\n`

所以你的整个事情可以是：`\b(?:float\s+)?(\w+).*\n` 一旦正则表达式到达非字母数字，如空格、“=”符号或其他任何符号，它将不再是捕获组的一部分。

:)

运行我在您的示例中提到的正则表达式：

```
>>> import re
>>> re.findall(r'\b(?:float\s+)?(\w+).*\n', "a = a/2;\nb*= a/4*2;\nfloat c += 4*2*sin(2);\n")
['a', 'b', 'c'] 
```

并一次运行每一行：（`^`告诉正则表达式从字符串的开头开始。）

```
>>> re.findall(r'^(?:float\s+)?(\w+)', "a = a/2")
['a']
>>> re.findall(r'^(?:float\s+)?(\w+)', "b*= a/4*2")
['b']
>>> re.findall(r'^(?:float\s+)?(\w+)', "float c += 4*2*sin(2)")
['c'] 
```

# jquery - 根据值同步复选框可见性

> ID：12693126
> 
> 赞同：0
> 
> 时间：2012-10-02T15:13:03.547
> 
> 标签：jquery, checkbox

我有两个复选框组，我最终需要让其中一个影响另一个的输出（可见性）。这是我的小提琴。

[http://jsfiddle.net/kEKYw/1/](http://jsfiddle.net/kEKYw/1/)

因此，第一个输入的值（int 值）应该与第二个复选框组（当前隐藏）的输入值匹配，然后根据该选择显示它们。我觉得我非常接近，但任何朝着正确方向的轻推都会有很大的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:22:49.237

稍微修改了您的代码。请参阅代码注释。

**演示：http:** [//jsfiddle.net/kEKYw/3/](http://jsfiddle.net/kEKYw/3/)

```
$("#wood_typeschecklist input").change(function() {
    var destEl = this.id.split("-");
    //a. Changed selector to look for starts with selector as the 
    //checkbox value returned is wood_type-<number> 
    //which doesn't match any existing id

    //b. `.split` splits the string when it matches its 
    //separator and so it was returning 3 tokens not 2 (in,wood_types,126)
    var $matchingElem = $("li[id^=" + destEl[1] + '-' + destEl[2] + "]", $("#acf-wood_species_availability"));
    ($(this).attr("checked") !== undefined) ? $matchingElem.show() : $matchingElem.hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:30:11.277

我相信[这个小提琴](http://jsfiddle.net/kEKYw/5/)就是你要找的

```
// start off by hiding the second options
$("#acf-wood_species_availability li").hide();

//add a click method to the inputs
$("#wood_typeschecklist input").click(function() {
   //verify that it's checked, if so, show the other input of the same value (and check it also) 
   if ($(this).is(':checked')) {
        $('#acf-wood_species_availability input[value="' + $(this).val() + '"]').attr('checked', true).parents('.popular-category').show();
    }
    //if it's unchecked, hide the other input and uncheck this one
    else {
        $('#acf-wood_species_availability input[value="' + $(this).val() + '"]').attr('checked', false).parents('.popular-category').hide();                            
    }   
});

//now let's add click methods to the other checkboxes in case user clicks on them, if so, we hie this checkbox and uncheck the other one.
$("#acf-wood_species_availability input").click(function() {
    $(this).attr('checked', '').parents('.popular-category').hide();
    $('#wood_typeschecklist input[value="' + $(this).val() + '"]').attr('checked', false);
}); 
```

# matlab - Matlab - 获取通过某个总和限制的向量元素的索引

> ID：12693127
> 
> 赞同：3
> 
> 时间：2012-10-02T15:13:05.917
> 
> 标签：matlab

我有一个标准化的向量（即它的元素之和是`1`），它们是按降序排列的（即`[0.5 0.4 0.09 0.01]`）。

有没有办法获得总和低于某个阈值的第一个元素的索引？

例如，在我的情况下，对于`0.6`我将获得的阈值`1`，的索引（以 Matlab 索引向量元素的方式）`0.5`。对于`0.91`I 的阈值，将获得`[1 2]`的索引`[0.5 0.4]`，依此类推。

我知道我可以通过向量循环来做到这一点，但鉴于我使用的是 Matlab，我想问我是否可以只用一个命令行或 max 2 来做到这一点，从而提高我的代码的计算速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:16:37.147

该`cumsum`函数计算向量元素的累积和。这样做，然后找到阈值小于累积总和的索引将为您提供答案：

```
V = [0.5 0.4 0.09 0.01]

t = 0.6;

index = find(t < cumsum(V), 1)-1 
```

请注意，如果`index = 0`，即使对于第一个元素，条件也不成立。

如果您坚持要获得符合条件的元素向量，您可以简单地定义一个范围：

```
indices = 1 : (find(t<cumsum(V),1)-1) 
```

在这种情况下，`indices`如果第一个元素不符合条件，则向量为空。

# python - 使用 with - 如何知道哪些变量在上下文中

> ID：12693136
> 
> 赞同：0
> 
> 时间：2012-10-02T15:13:27.603
> 
> 标签：python, kivy

在[这个 Kivy 代码](http://kivy.org/docs/guide/firstwidget.html)中：

```
class MyPaintWidget(Widget):
    def on_touch_down(self, touch):
        userdata = touch.ud
        with self.canvas:
            Color(1, 1, 0)
            d = 30.
            Ellipse(pos=(touch.x - d/2, touch.y - d/2), size=(d, d))
            userdata['line'] = Line(points=(touch.x, touch.y)) 
```

显然`Color`and`d`和`Ellipse`在 的命名空间内`self.canvas`，但是 Python 怎么知道它`userdata`不在同一个命名空间内呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:25:16.207

**编辑**：这个答案有点冗长，所以这里是总结：

1.  `with self.canvas`为以下代码块定义当前**活动的画布。**
2.  所有绘图指令都喜欢`Color`或`Ellipse`在活动画布上绘图。

命名空间实际上与它没有任何关系，重要的是上下文（见下文）。

该`with`语句允许您使用所谓的[上下文管理器](http://docs.python.org/library/contextlib.html)。

语法是这样的

```
with thing [as foo]: 
```

其中`thing`通常是用`contextlib.contextmanager`装饰器装饰的函数。上下文管理器的具体作用取决于`thing`实现方式。

但它没有做的是让变量神奇地出现在你的范围内。可以通过可选`as foo`子句获得对上下文的引用，但仅此而已。`Color`并且`Ellipse`在您的示例中来自其他地方（可能是进口？）。

为了找出该行中上下文管理器的确切[作用](https://github.com/kivy/kivy/blob/master/kivy/graphics/instructions.pyx#L470)，`with self.canvas`您应该查看[API 文档](http://kivy.org/docs/api-kivy.graphics.instructions.html#kivy.graphics.instructions.Canvas)或.`kivy.graphics.instructions.Canvas`

以下是本教程的相关摘录：

> 通过使用 with 语句，所有正确缩进的连续绘图命令都将修改此画布。with 语句还确保在我们绘制之后，可以正确清理内部状态。

所以**使用**`Color`and会`Ellipse`影响`self.canvas`，但它们并没有被 with 语句以任何方式定义。

查看源代码，这是它的工作原理：

```
def class CanvasBase(InstructionGroup):
    def __enter__(self):
        pushActiveCanvas(self)

    def __exit__(self, *largs):
        popActiveCanvas() 
```

`__enter__`并`__exit__`定义如果输入上下文管理器（在`with`语句之后的第一行缩进代码之前）并退出时会发生什么。

在这种情况下，画布只是被推入定义当前活动画布的**堆栈**（如果退出上下文管理器，则从其中弹出）。

在`kivy.graphics.instructions.Instruction`所有绘图指令的明显基类中，[父级设置为当前活动的画布](https://github.com/kivy/kivy/blob/master/kivy/graphics/instructions.pyx#L52)：

```
self.parent = getActiveCanvas() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:24:06.957

实际上，`Color`并且`Ellipse`是从`kivy.graphics`代码中更高的部分导入的：

```
from kivy.graphics import Color, Ellipse 
```

要回答您关于命名空间的问题，python 根本不需要“知道”它从哪个命名空间获取变量。与 Java 等语言相比，它具有非常简单的命名空间规则，后者依次搜索函数、对象、类、全局和包范围。Python 有一个全局命名空间（每个模块）和一堆局部命名空间（例如，嵌套函数可以从外部函数获取变量）。它只是沿着作用域列表向下移动，直到找到有问题的变量名。

上面的`with`语句有特殊含义，但我认为甚至`with`不能将新变量隐式引入本地范围（但它可以通过`as`子句显式引入一个变量）。

# java - Android：HttpURLConnection 无法正常工作

> ID：12693138
> 
> 赞同：2
> 
> 时间：2012-10-02T15:13:38.507
> 
> 标签：java, android, httpurlconnection

在通过 POST 请求发送用户凭据后，我试图从网站获取 cookie，但它似乎在 android 中无法以这种方式工作。¿ 我是在做坏事吗？请帮忙。我在不同的帖子中搜索过这里，但没有有用的答案。

奇怪的是，它在桌面 Java 实现中运行它完美无缺，但它在 Android 平台上崩溃。并且是完全相同的代码，特别是在调用 HttpURLConnection.getHeaderFields() 时，其他成员方法也会发生这种情况。这是一个简单的代码，我不知道为什么它不起作用。

**桌面代码：这只是在 main()**

```
HttpURLConnection connection = null;
        OutputStream out = null;
        try {                   
            URL url = new URL("http://www.XXXXXXXX.php");           
            String charset = "UTF-8";       

            String postback = "1";
            String user = "XXXXXXXXX";
            String password = "XXXXXXXX";
            String rememberme = "on";
            String query = String.format("postback=%s&user=%s&password=%s&rememberme=%s"
                    , URLEncoder.encode(postback, charset)
                    , URLEncoder.encode(user,charset)
                    , URLEncoder.encode(password, charset)
                    , URLEncoder.encode(rememberme, charset));

            connection = (HttpURLConnection)url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept-Charset", charset);
            connection.setDoOutput(true);           
            connection.setFixedLengthStreamingMode(query.length());

            out = connection.getOutputStream ();
            out.write(query.getBytes(charset));

            if (connection.getHeaderFields() == null){
                System.out.println("Header null");
            }else{
                for (String cookie: connection.getHeaderFields().get("Set-Cookie")){
                    System.out.println(cookie.split(";", 2)[0]);
                }
            }
        } catch (IOException e){
            e.printStackTrace();
        } finally {
            try { out.close();} catch (IOException e) { e.printStackTrace();}
            connection.disconnect();            
        } 
```

所以输出是：

```
 login_key=20ad8177db4eca3f057c14a64bafc2c9
    FASID=cabf20cc471fcacacdc7dc7e83768880
    track=30c8183e4ebbe8b3a57b583166326c77
    client-data=%7B%22ism%22%3Afalse%2C%22showm%22%3Afalse%2C%22ts%22%3A1349189669%7D 
```

**ANDROID 代码：这进入 doInBackground AsyncTask 主体**

```
HttpURLConnection connection = null;
            OutputStream out = null;
            try {                   
                URL url = new URL("http://www.XXXXXXXXXXXXXX.php");         
                String charset = "UTF-8";       

                String postback = "1";
                String user = "XXXXXXXXX";
                String password = "XXXXXXXX";
                String rememberme = "on";
                String query = String.format("postback=%s&user=%s&password=%s&rememberme=%s"
                        , URLEncoder.encode(postback, charset)
                        , URLEncoder.encode(user,charset)
                        , URLEncoder.encode(password, charset)
                        , URLEncoder.encode(rememberme, charset));

                connection = (HttpURLConnection)url.openConnection();
                connection.setRequestMethod("POST");
                connection.setRequestProperty("Accept-Charset", charset);
                connection.setDoOutput(true);           
                connection.setFixedLengthStreamingMode(query.length());

                out = connection.getOutputStream ();
                out.write(query.getBytes(charset));

                if (connection.getHeaderFields() == null){
                    Log.v(TAG, "Header null");
                }else{
                    for (String cookie: connection.getHeaderFields().get("Set-Cookie")){
                        Log.v(TAG, cookie.split(";", 2)[0]);
                    }
                }
            } catch (IOException e){
                e.printStackTrace();
            } finally {
                try { out.close();} catch (IOException e) { e.printStackTrace();}
                connection.disconnect();            
            } 
```

而且这里没有输出，似乎connection.getHeaderFields() 没有返回结果。显示日志至少需要 30 秒：

```
10-02 16:56:25.918: V/class com.giorgi.myproject.activities.HomeActivity(2596): Header null 
```

在 GALAXY NEXUS 上测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:46:06.687

我已经弄清楚是什么问题了。~~似乎使用 Java Desktop 时，FollowRedirects 标志默认为 false （我想），而在 Android 中则为 true~~。getInstanceFollowRedirects 在这两种情况下都是 TRUE，所以我真的不知道为什么它以不同的方式工作，但没关系，解决方案是完美的。

所以它没有捕获 POST 请求的响应，它遵循一些重定向并试图从另一个 GET 自动请求中获取响应。

解决方案是：**`connection.setInstanceFollowRedirects(false);`**

* * *

我知道这一点的方法是使用网络监视器查看网络流量：

从桌面应用程序监控此流量：

```
23  10:08:50 03/10/2012 1.3944670   javaw.exe   192.168.1.36    www.XXXXXXXXX.com   HTTP    HTTP:Request, POST /es/login.php    {HTTP:8, TCP:7, IPv4:6}
24  10:08:50 03/10/2012 1.3954741   javaw.exe   192.168.1.36    www.XXXXXXXXX.com   HTTP    HTTP:HTTP Payload, URL: /es/login.php   {HTTP:8, TCP:7, IPv4:6}
32  10:08:50 03/10/2012 1.9811257   javaw.exe   www.XXXXXXXXX.com   192.168.1.36    HTTP    HTTP:Response, HTTP/1.1, Status: Moved temporarily, URL: /es/login.php  {HTTP:8, TCP:7, IPv4:6} 
```

为了监控 Android 应用程序中的流量，我不得不在模拟器而不是手机中运行它。结果是：

```
60  9:59:34 03/10/2012  4.0285909   emulator-arm.exe    192.168.1.36    XX.XX.XXX.XXX   HTTP    HTTP:Request, POST /es/login.php    {HTTP:13, TCP:12, IPv4:11}
65  9:59:34 03/10/2012  4.1524735   emulator-arm.exe    192.168.1.36    XX.XX.XXX.XXX   HTTP    HTTP:HTTP Payload, URL: /es/login.php   {HTTP:13, TCP:12, IPv4:11}
75  9:59:35 03/10/2012  4.6276286   emulator-arm.exe    XX.XX.XXX.XXX   192.168.1.36    HTTP    HTTP:Response, HTTP/1.1, Status: Moved temporarily, URL: /es/login.php  {HTTP:13, TCP:12, IPv4:11}
77  9:59:35 03/10/2012  4.7095994   emulator-arm.exe    192.168.1.36    XX.XX.XXX.XXX   HTTP    HTTP:Request, GET /es/login.php, Query:FASID=a5e39f35325499e060f43d35bc956a45   {HTTP:13, TCP:12, IPv4:11}
311 9:59:55 03/10/2012  24.8355823  emulator-arm.exe    XX.XX.XXX.XXX   192.168.1.36    HTTP    HTTP:Response, HTTP/1.1, Status: Moved temporarily, URL: /es/login.php  {HTTP:13, TCP:12, IPv4:11}
313 9:59:55 03/10/2012  24.9384843  emulator-arm.exe    192.168.1.36    XX.XX.XXX.XXX   HTTP    HTTP:Request, GET /es/main.html, Query:FASID=a5e39f35325499e060f43d35bc956a45   {HTTP:13, TCP:12, IPv4:11}
317 9:59:55 03/10/2012  25.0535818  emulator-arm.exe    XX.XX.XXX.XXX   192.168.1.36    HTTP    HTTP:HTTP Payload, URL: /es/main.html   {HTTP:13, TCP:12, IPv4:11} 
```

因此，应用后`**connection.setInstanceFollowRedirects(false);**`的结果是预期的：

```
61  10:30:43 03/10/2012 4.9211205   emulator-arm.exe    192.168.1.36    XX.XX.XXX.XXX   HTTP    HTTP:Request, POST /es/login.php    {HTTP:14, TCP:13, IPv4:12}
64  10:30:43 03/10/2012 5.0362501   emulator-arm.exe    192.168.1.36    XX.XX.XXX.XXX   HTTP    HTTP:HTTP Payload, URL: /es/login.php   {HTTP:14, TCP:13, IPv4:12}
70  10:30:43 03/10/2012 5.5103384   emulator-arm.exe    XX.XX.XXX.XXX   192.168.1.36    HTTP    HTTP:Response, HTTP/1.1, Status: Moved temporarily, URL: /es/login.php  {HTTP:14, TCP:13, IPv4:12} 
```

* * *

感谢您的所有回答和兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:21:58.790

这可能与网络尝试在模拟器或手机的移动浏览器中打开您请求的地址有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:35:53.350

确保您已在 AndroidManifest.xml 文件中添加了所需的权限。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:20:35.830

我遇到了很多麻烦`HTTPURLConnection`尝试了几天后，我发现设置标题的顺序很重要。这对我有用。

```
 conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("GET");
            conn.setRequestProperty("Host", "yoursite.com");
            conn.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(toencode, Base64.DEFAULT));
            conn.setRequestProperty("Accept-Charset", "UTF-8");

            conn.setConnectTimeout (5000) ; 
            conn.setDoOutput(true); 
            conn.setDoInput(true); 
```

它应该适合你。

# python - 优化 numpy 数组操作以进行光线追踪

> ID：12693139
> 
> 赞同：1
> 
> 时间：2012-10-02T15:13:48.633
> 
> 标签：python, numpy

我有一些代码可以在地图中进行基本的光线追踪，以确定光线是否击中墙壁。

[编辑]：y_coords和x_coords的大小一般为18x1000（对应点）。self.map 是 800x800

```
def ray_trace(self, x, y, x_coords, y_coords):
    ray_distances = []
    resolution = self.parameters['resolution']
    for i in range(x_coords.shape[0]):
        distance = 0

        # filter x and y coords to stay within map regions
        ray_range = np.bitwise_and(x_coords[i]<799,y_coords[i]<799)

        # determine ending index where the ray stops
        len_ray = ray_range[ray_range==True].shape[0]

        # zip up the x and y coords
        ray_coords = np.c_[x_coords[i,0:len_ray], y_coords[i,0:len_ray]]

        # look up all the coordinates in the map and find where the map is
        # less than or equal to zero (this is a wall)
        ray_values, = np.where(self.map[tuple(ray_coords.T)] <= 0)

        # some special exceptions
        if not ray_values.shape[0]:
            if not len(ray_coords):
                end_of_ray = np.array([x/resolution, y/resolution])
            else:
                end_of_ray = ray_coords[len(ray_values)]
        else:
            # get the end of the ray
            end_of_ray = ray_coords[ray_values.item(0)]

        # find the distance from the originating point
        distance = math.sqrt((end_of_ray.item(0) - x/resolution)**2 + 
                             (end_of_ray.item(1) - y/resolution)**2)

        ray_distances.append(distance)
    return ray_distances 
```

我在 np.c_ 和 np.where 行中遇到问题 - 我用 kernprof.py 对它们和那些行进行了分析，它们需要很长时间（尤其是 np.c_，它占用了 50% 的时间） . 有人对如何优化这个有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:56:13.610

你真的不需要这么多地使用索引。高级索引意味着您可以使用两个大小相等的坐标数组进行索引，而无需先将它们组合成坐标。

```
coord_mask = (x_coords < 799) & (y_coords < 799)
for i in xrange(len(coord_mask)):
    distance = 0
    row_mask = coord_mask[i]
    row_x = x_coords[i, row_mask]
    row_y = y_coords[i, row_mask]
    mapvals = self.map[row_x, row_y] # advanced indexing
    ray_values, = (mapvals <= 0).nonzero()
    ... 
```

# iphone - 删除 UIWebView 中的页码框

> ID：12693146
> 
> 赞同：1
> 
> 时间：2012-10-02T15:14:02.493
> 
> 标签：iphone, pdf, uiwebview

我正在打开一个 PDF 文件，`UIWebView`一旦我开始向下滚动，它会在一个框中显示页码，我不想看到它。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:17:31.827

如果您不想要 UIWebView pdf 行为，请使用其他东西打开您的 pdf :)

Apple 提供了一个[演示项目](https://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281)，向您展示了如何做到这一点。

# c++ - C++ 编译器错误涉及一个据称未声明的函数

> ID：12693148
> 
> 赞同：0
> 
> 时间：2012-10-02T15:14:04.873
> 
> 标签：c++, compiler-errors, shunting-yard

我目前正在编写一个基本程序来评估数学表达式，然后我将在遗传编程中使用它来确定表达式系统的最佳解决方案。我的编译器一直在抱怨，但我几乎可以肯定我做的一切都是正确的。

错误：

```
C:\Users\Baelic Edeyn\Desktop\Project\Equation\Shunting yard\Better>make  
g++ -g -c Shunt.cpp  
g++ -g -c main.cpp  
main.cpp: In function 'int main()':  
main.cpp:18:19: error: 'shuntingYard' was not declared in this scope  
make: *** [main.o] Error 1 
```

我的制作文件：

```
main: Shunt.o main.o  
    g++ -g Shunt.o main.o -o main  
main.o:main.cpp  
    g++ -g -c main.cpp  
Shunt.o:Shunt.cpp  
    g++ -g -c Shunt.cpp 
```

我的主要：

```
#include "Shunt.h"
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string expr = "3+ 47 *2/(1-5)^2^3";
    string expr1 = "a+b";
    string expr2 = "(a+b)";
    string expr3 = "a+b*!3";
    string expr4 = "(a+b)*!3";

    cout << "expression" << "   " << "postfix" << endl;
    cout << expr << "   ";
    shuntingYard(expr);
    cout << expr << endl;
    cout << expr1 << "      ";
    ...
    return 0; 
```

}

我的头文件：

```
#ifndef SHUNT_H
#define SHUNT_H

#include <string>

using namespace std;

class Shunt
{
    public:
        int precedence(char);
        void shuntingYard(string &expr);
        bool isFunction(string);
        bool isOperator(char);
        bool isLeftAssociative(char);
        bool isNum(char);

    private:    

};

#endif 
```

我的实现文件：

```
#include "Shunt.h"

using namespace std;

void Shunt::shuntingYard(string &expr)
{
    ...
} 
```

请帮助我即将把我的笔记本电脑靠在墙上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:16:06.277

`shuntingYard()`是一个非`static`成员函数：您需要一个实例`Shunt`来调用它：

```
Shunt s;
s.shuntingYard(expr); 
```

`static`另一种方法是制作不需要实例`Shunt`并且可以调用的成员函数：

```
Shunt::shuntingYard(); 
```

鉴于您认为可以在`shuntingYard()`没有实例的情况下进行调用，这`static`似乎是更合适的操作。或者，如果`Shunt`用于保存松散相关的函数，这些函数不共享状态并且不表示特定抽象的特征，则使用命名空间而不是类可能更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:16:31.083

`shuntingYard`不是自由函数，而是成员函数。您需要从类的实例中调用它：

```
Shunt s;
s.shuntingYard(expr); 
```

您可以使其成为`static`该类的成员并将其称为：

```
Shunt::shuntingYard(expr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:16:19.553

这是因为当它实际上是成员函数时，您像常规函数一样调用它，因此您需要一个实例`Shunt`来调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:17:28.430

您已声明`shuntingYard`为对象的成员函数，但您试图将其作为自由函数来调用。

您需要创建一个新`Shunt`类：

```
Shunt my_shunt;
my_shunt.shuntingYard(expr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:20:27.897

主不知道是什么`shuntingYard(expr)`。`Shunt`在调用该对象之前，您必须创建一个类型`shuntingYard(expr);`的对象。

# concurrency - 发送到注册进程时出现 Erlang 错误

> ID：12693154
> 
> 赞同：1
> 
> 时间：2012-10-02T15:14:18.363
> 
> 标签：concurrency, process, erlang, message, primes

我正在尝试制作带有进程的素数的 Erlang 程序（无效，我知道，但是嘿，这只是为了好玩:)） - 类似于[numbersimulation.com](http://numbersimulation.com)的内容。

在每个“滴答”上，服务器都会产生新的进程（“数字”），它会增加其计数器。如果 counter == 该数字，这是一个因素，所以我们让服务器知道。如果服务器没有收到任何消息，则它是质数。

在小数字上（素数到 N，这`server(50,L)`条线）没关系，但在较大的数字上，它会崩溃：

`Error in process <0.46.0> with exit value: {badarg,[{primes,number,2,[{file,"primes.erl"},{line,31}]}]}`

第 31 行是其中`server ! hit`之一 - 但**我不明白为什么它会失败。**也许失败的那一行是之后的那一行，`number(N,1)`？**但是为什么会失败呢？**

编码：

```
-module(primes).
-compile(export_all).

main() ->
  pg:create(numbers),
  Server_PID = spawn(?MODULE,server,[]),
  register(server,Server_PID),
  ok.

server()     -> server(2,[]).
server(50,L) -> io:format("Primes: ~p~n",[L]);
server(N,L)  ->
  Num_PID = spawn(?MODULE,number,[N]),
  pg:join(numbers,Num_PID),
  pg:send(numbers,tick),
  receive
    hit ->
      flush(),
      server(N+1,L)
  after 100 ->
      server(N+1,[N|L])
  end.

number(N)   -> receive {pg_message,_,_,tick} -> number(N,1) end.
number(N,I) ->
  receive
    {pg_message,_,_,tick} ->
      if
        N =:= I ->
          server ! hit,
          number(N,1);
        true ->
          number(N,I+1)
      end
  end.

flush() ->
  receive _ -> flush()
  after   0 -> ok end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T21:29:16.043

当一个注册的进程死亡时，它注册的名称不再被注册。虽然向一个引用死进程的 pid 发送消息是完全合法的（消息只是消失了），但发送给一个未注册的名称是一个错误，即使该名称曾经被注册过。

在您的代码中，该`server`进程执行 50 次循环，生成一个新进程并等待`hit`消息或超时。之后`server/2`函数结束并且`server`进程终止。当它死亡时，该名称`server`不再注册，因此尝试向它发送消息会产生`badarg`错误。

# php - 如何从 sublime text 2 中运行 php 项目

> ID：12693160
> 
> 赞同：8
> 
> 时间：2012-10-02T15:14:32.330
> 
> 标签：php, sublimetext2

有没有办法设置 sublime text 2 来构建（或运行）我正在编辑的 php 脚本？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-16T16:31:56.523

如果你是 linux 或 mac 用户，你可以这样做。

工具 -> 构建系统 -> 新建构建系统

```
{
 "cmd": ["php" , "$file"] 
} 
```

它会在崇高的文本控制台上运行你的 php 代码

如果您想知道它的外观如何，这里是一个屏幕截图。

![在此处输入图像描述](../Images/9152f87ef46c6310374698192c366456.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:36:04.480

您可以这样做`Tools -> Build System -> New Build System...`，然后像这样编辑文件：

```
{
    "cmd": ["/path/to/some/script/that/runs/your/project"]
} 
```

然后保存它，并从您的项目中，选择`Tools -> Build System -> <your new name>`

现在您可以点击 control-shift-b 来运行脚本。

# python - 扭曲的协议分层

> ID：12693168
> 
> 赞同：2
> 
> 时间：2012-10-02T15:15:11.153
> 
> 标签：python, protocols, twisted

我几乎得到它 - 但我错过了关键点......

我试图弄清楚如何在 Twisted 中构建“分层”协议栈。我可以理解如何附加单个协议并使用 Defers 处理事件，但是如果我想要传统的 OSI 层模型？假设我在 TCP 连接器的底部有一个面向线路的协议，并且我希望将多个面向线路的协议堆叠在顶部，直到我到达应用程序空间。

（想想我想以扭曲的方式实现 TCP/IP 堆栈本身）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:50:03.270

OSI 分层模型与 Twisted*基本*无关（而且，我认为，通常与软件基本无关）。一次查看每一层：

1.  物理：显然，Twisted 不是以太网电缆或物理交换机，所以它不能这样做。
2.  数据链接：为了让 Twisted 在网络接口上运行，您的操作系统需要连接到物理网络。数据链路协议通常需要在硬实时设备中实现，通常是在硬件中，因此 Twisted 不适合这种情况。
3.  网络：这一层，如果它与“传输”层不同，那么它就是 BGP 和路由器之类的东西，它们与您的应用程序不同。
4.  传输：在这一层，我们有两个接口，[`IProtocol`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IProtocol.html)和[`ITransport`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html). 传输将字节*从*传输传递到`IProtocol`via `dataReceived`，应用程序将字节*传递到*传输 via `ITransport.write()`。（然后，这种关系在电线的另一端反转。）
5.  会话：（这隐含地是传输的一部分）
6.  演示文稿：这就像 CSS 样式表或其他东西
7.  应用程序：显然 Twisted 不做这部分，你自己做。

然而，协议内分层更具有临时性。现在通常的习惯用法是简单地将 Protocol 子类化，然后将 from 委托`dataReceived`给特定于您的分层习惯用法的新方法，例如`lineReceived`，然后将下一层子类化。

如果你真的想要一个使用 Twisted 的 TCP 实现，[请看这里](http://bazaar.launchpad.net/~divmod-dev/divmod.org/trunk/view/head:/Vertex/vertex/ptcp.py)。

如果你想看到一个改进 Twisted 内部分层的接口提案，[请参阅此处](http://tm.tl/1956)。

# xml - xquery：如何获取节点的不同值

> ID：12693171
> 
> 赞同：3
> 
> 时间：2012-10-02T15:15:22.237
> 
> 标签：xml, xquery, distinct-values

我想知道 Xquery 是否有任何类似于 distinct-values 但返回节点的函数。

让我更清楚一点：例如，我有一个参考书目，对于其中的每个作者，我想列出他写的所有书籍。在我的具体案例中，作者元素是这样的：

```
<author>
  <last> Shakespear </last>
  <first> William </first>
</author> 
```

在作者上使用 distinct-values 会返回 ShakespearWilliam，据我所知，它没有帮助。我想要一个保留元素作者结构而不考虑重复的函数。

如果您找到另一种查询方式，请告诉我。有谁有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:27:41.260

获得不同节点的一个问题是如何确定两个节点是不同的。这是 XML 中的一个复杂主题。如果重复节点将具有相同的节点标识（即：它们引用相同的节点），那么您可以使用类似[functx:distinct-nodes()](http://www.xqueryfunctions.com/xq/functx_distinct-nodes.html)的函数。否则，您需要某种类型的哈希来确定节点是否“足够”以被视为相等，或者使用 deep-equal() 进行比较，这对于大型数据集表现不佳。

如果姓氏和名字相同时两个`<author>`s 相等，那么您可以使用像`concat(last,first)`哈希这样简单的东西并使用 xpath 获得不同的值：

```
$xml/author[index-of($xml/author/concat(last,first), concat(last,first))[1]] 
```

这仍然不理想，因为您在每一步都在计算哈希，因此对于大型数据集它会变慢。为了提高性能，您可以做的一件事是预先计算数据的哈希值，即：

```
<author hash="ShakespearWilliam">
  <last>Shakespear</last>
  <first>William</first>
</author> 
```

和：

```
$xml/author[index-of($xml/author/@hash, @hash)[1]] 
```

如果您可以通过哈希有效地获取有序节点（理想情况下使用有序数据库索引），那么有一种更有效的删除重复项的方法：

```
declare function local:nodupes($first, $rest)
{
    if (empty($rest)) then $first
    else if ($first/@hash eq $rest[1]/@hash)
    then local:nodupes($rest[1], subsequence($rest,2))
    else ($first, local:nodupes($rest[1], subsequence($rest,2)))
}; 
```

然后用你的有序集合调用它：

```
let $ordered :=
  for $a in $xml/author
  order by $a/@hash
  return $a
return 
  local:nodupes((),$ordered) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:54:31.283

XQuery 3.0 有一个“分组依据”结构，例如，这允许您按 (first name, last name) 的值对作者进行分组。当您对节点进行分组时，您基本上就有了答案：当且仅当它们位于不同的组中时，节点才是不同的。

周围有很多产品实现了 XQuery 3.0 草案的这一部分。Saxon 9.4 就是其中之一。

# salesforce - 控制嵌入式 VisualForce 页面的显示

> ID：12693173
> 
> 赞同：1
> 
> 时间：2012-10-02T15:15:27.707
> 
> 标签：salesforce, visualforce

我有一个客户，他有一个通过页面布局嵌入标准潜在客户页面的自定义 visualforce 页面。他们想要做的是让这个嵌入页面根据潜在客户对象中的各种标准有条件地出现。我已经能够使用主页组件来实现这一点，该组件使用 javascript 根据它在屏幕上找到的某些标准来查找和隐藏嵌入的内容。关于这项技术，我有几个问题：

1.  有没有更好的方法来实现这一点？
2.  如果 Salesforce 决定以此创建 AppExchange 产品，他们将如何看待这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:06:26.620

我不认为这是可能的。您可以做的是用您的自定义 Visualforce 页面覆盖标准 salesforce 潜在客户页面。在您的自定义 visualforce 页面中，您必须定义一个标准控制器，例如。`standardController="Lead"`然后使用 apex 标签输出您的 Lead 对象的数据`apex:detail`因此您可以创建一个具有标准 salesforce 外观和感觉的自定义页面，您可以自己控制。

信息：[apex:detail](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_detail.htm)和[覆盖标准页面](http://www.salesforce.com/docs/developer/cookbook/Content/vf_override_default_pages.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:38:47.370

如果有人正在寻找这个问题的答案，我将发布我如何解决它 - 我使用了主页组件并将其添加到“要显示的窄组件”中。我还在用户界面中选择了“在所有页面上显示自定义侧边栏组件”。这使我可以在每个页面上嵌入一些 javascript。接下来，我将我的 vf 页面添加到 Leads 的页面布局中（例如）。然后我查找此部分标题，如果找到，请调用 twistSection()

这是一个片段：

```
Elements = document.getElementsByTagName('img');            
for (var i=Elements.length; i>0; i--) {                
if (Elements[i] != null) {
     if (Elements[i].attributes['alt'].value == 'Show Section - My Custom Panel') {
         twistSection(Elements[i]);
     }
} 
```

}

我从来没有发现 Salesforce 是否不赞成这种做法，或者它是否会影响 App Exchange 的加入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T05:11:10.977

另一种方法是简单地使用其他记录类型，每个记录类型都有自己的默认页面布局。在分配给新记录类型的新页面布局中包括 VF 元素。然后，根据线索上的条件/过滤器，WF 规则更新记录类型，从而更改包含 VF 元素的页面布局。在满足特定条件的线索/记录上有条件地显示 VF 的非常简单的方法。我们正在为客户执行此操作，本质上为每个现有记录类型和页面布局创建一个新记录类型，他们必须为标记为“有风险”的某些记录显示可视化流程

# c - 从 uint8 中提取数据到 double

> ID：12693176
> 
> 赞同：0
> 
> 时间：2012-10-02T15:15:49.043
> 
> 标签：c, casting, typeconverter, unsigned-integer

我有一个 C 函数接收`uint8`带有另一个参数的指针，该参数是它的大小（字节数）。

我想`double`从这个缓冲区中提取数据。这是我的代码：

```
Write(uint8* data, uint8 size) /* data and size are given by a callback to my function)*/
{
    double d;
    for (i = 0; i < size; i++)
    {
        d = ((double*)&data)[i];
        printf(" d = %d\n");
    }
} 
```

问题是我没有收到我在外部硬件中发送的内容。我想我的演员阵容是错误的。我尝试了其他方法，但没有任何好的结果。我仍然无法收到我发送的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:19:26.727

假设您的数据实际上是一个双精度数组，大小是字节数，您的代码应该如下所示：

```
Write(uint8* data, uint8 size) /* data and size are given by a callback to my function)*/
{
  double d;
  int i;
  for (i=0; i<size/sizeof(double); ++i) {
    d = ((double*)data)[i];
    printf(" d = %g\n",d);
  }
} 
```

最有可能的是，size 是字节数而不是双精度数，因此您必须将 size 除以双精度数才能得到实际双精度数：

如果你这样做：

```
 d = ((double*)&data)[i]; 
```

那么您是说指向数据指针的指针是双指针。

此外，您的 printf 语句是这样的：

```
printf(" d = %d\n"); 
```

您告诉它打印一个 int（%d 是一个 int），而不是给它一个实际的打印值。我将其更改为 %g，它以最适合的格式打印双精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:24:39.407

```
Write(uint8* data, uint8 size) /* data and size are given by a callback to my function)*/
 {

  double d;
  for (i=0; i<size; i++) {
  d = ((double*)data)[i];
  printf(" d = %d\n", d);
  }

 } 
```

是我猜你在找什么，指针实际上是一个指向双精度数组的指针，所以你只需将它转换为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:32:12.850

如果我理解您的问题（尚不清楚是否最多`double`可以提取一个或可以有很多），这就是我会尝试做的事情：

```
double Write(uint8* data, uint8 size)
{
    double d;

    if (size < sizeof(d))
        return 0; // failure; you may want something smarter than this

    memcpy(&d, data, sizeof(d));

    return d;
} 
```

这避免了像`d = *(double*)data`.

如果数据不代表有效的，这可能会以奇怪和丑陋的方式失败`double`，特别是如果它被反转（例如，您的硬件是小端并且运行此代码的 CPU 是大端或其他方式）。

我还不知道混叠问题是否适用。需要重新阅读标准。不过，在实践中从未见过它们。

# jquery-mobile - jqueryMobile错位图标图像

> ID：12693179
> 
> 赞同：2
> 
> 时间：2012-10-02T15:15:57.207
> 
> 标签：jquery-mobile

在 jquery mobile (v 1.1.1) 中，我一直在获取带有 data-iconpos="notext" 的按钮，如图所示（图标未居中）。![jquery mobile中的未对齐按钮](../Images/d76b6fb9638bf87b35b89bd55af76356.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T22:24:02.610

对于这么晚的时间，我遇到了这个问题，只要我有一个[ThemeRoller](http://jquerymobile.com/themeroller/index.php)生成的 .css 文件，其版本与我的项目的 jQuery Mobile 版本不同步。使用匹配的 jQuery Mobile 版本导入和更新 ThemeRoller 中的 CSS 始终可以解决问题。

# sql - SQL如何按数字顺序从文本列中提取带小数的数字结果？

> ID：12693184
> 
> 赞同：0
> 
> 时间：2012-10-02T15:16:08.287
> 
> 标签：sql

这是我的第一篇文章，如果我问的不正确，我深表歉意。

我的结果列看起来像这样

结果_

```
4.5
3.2
1.1
17.1
30.2
.{not done}
.Not competed
18.0 
```

我想做的是检索高于 3.6 的条目

这可能吗？

我已经尝试转换/转换为 float/int/nvarchar(50)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:23:09.197

在 sql server 你可以这样做

```
;with cte as (
Select * from table where isnumeric(result_col) = 1)

select * from cte where cast(result_col as decimal(18,1)) > 3.6 
order by result_col 
```

还要检查理查德的这篇文章，他在其中发布了一个自定义函数来检查一个值是否为数字，isnumeric 将因“。”而失败。和'-'，看起来你有'。'的行

[https://stackoverflow.com/a/12674851/125551](https://stackoverflow.com/a/12674851/125551)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:31:09.170

SQL Server 不保证结果的顺序，除非是没有聚合的 case 语句。要在 SQL Server 中执行此操作并保证不会出现错误：

```
select *
from t
where (case when isnumeric(col) = 1 then cast(col as float) end) > 3.6 
```

在其他数据库中，您将使用正则表达式或类似模式来匹配数字：

```
where (case when col like '[0-9]*' or col like '[0-9]*.[0-9]*' then cast(col as float) end) > 3.6 
```

我承认该`WHERE`条款中的案例陈述令人不快。但是，为了防止错误，几乎没有其他选择，因为操作的顺序很重要。

# vbscript - 无法使用参数的值来查询 WMI 实例

> ID：12693186
> 
> 赞同：0
> 
> 时间：2012-10-02T15:16:13.593
> 
> 标签：vbscript, wmi

这是一个非常基本的程序，我想编写一个 VB 脚本，我将从命令行调用它并传入一些参数，VB 脚本应该获取参数并从 WMI 查询一些信息，代码如下：

```
1.strProperty = colNamedArguments.Item("Property") //this is to store the parameter
2.str..... some other parameters
3.Set objSWbemServices = GetObject("winmgmts:\\" & strComputer & strNamespace)
4.Set colSWbemObjectSet = objSWbemServices.ExecQuery("SELECT * FROM " & strClass)
5.For Each objSWbemObject In colSWbemObjectSet
6\.  wscript.echo objSWbemObject.strProperty 
```

1和2.是存储参数 3.是连接到WMI 4.是查询需要的数据 5和6.是运行收集的数据并打印出来。我遇到的问题是，当我使用正确的参数运行脚本时，它什么也没有打印出来，但是如果我用我通过命令传递的实际参数替换第 5 行中的 strProperty，它可以工作，并测试参数是否正确传递我有添加代码行以在获得有效参数后立即将其打印出来。我认为第 5 行使用“strProperty”作为属性来匹配数据，而不是 strProperty 的字符串值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:21:48.073

如果您真的想要我从您的描述中收集的内容（访问在运行时指定的属性），这

```
 Dim sComputer : sComputer = "."
  Dim sWQL      : sWQL      = "Select * from Win32_LogicalDisk"
  Dim sProperty : sProperty = "Name" ' "DriveType"
  Dim oWMIS     : Set oWMIS = GetObject("winmgmts:" _
      & "{impersonationLevel=impersonate}!\\" & sComputer & "\root\cimv2")
  Dim oColl, oItem
  Set oColl = oWMIS.ExecQuery(sWQL)
  For Each oItem in oColl
      WScript.Echo sProperty & ":", oItem.Properties_(sProperty).Value
  Next 
```

输出：

```
Name: A:
Name: C:
Name: D:
Name: E:
Name: M: 
```

或者：

```
DriveType: 2
DriveType: 3
DriveType: 5
DriveType: 4
DriveType: 4 
```

应该让你开始：使用该项目的 Properties_“字典”。

# django - 浏览器会话外的 Django 翻译

> ID：12693193
> 
> 赞同：0
> 
> 时间：2012-10-02T15:16:28.367
> 
> 标签：django

浏览器会话中的 Django 根据用户的浏览器设置或他们在个人资料中选择的语言，将所有内容从一种语言翻译成另一种语言。现在，当向用户发送邮件时（假设另一个用户对某些内容发表评论并且 Django 自动向内容所有者发送电子邮件以提醒她）我不明白 Django 是如何知道使用什么语言的是没有会话看。处理它的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:36:25.467

Tom Evans 在 Django users Group 上给了我答案：该工具是

```
from django.utils import translation 
```

那么它可以在这种情况下使用：

```
cur_language = translation.get_language()
translation.activate(get_lang_for_user(user))
# send email, tweet, etc
translation.activate(cur_language) 
```

和文档在这里： [https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#using-translations-outside-views-and-templates](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#using-translations-outside-views-and-templates)

# php - Ajax 调用执行两次？

> ID：12693195
> 
> 赞同：0
> 
> 时间：2012-10-02T15:16:28.903
> 
> 标签：php, jquery

为什么这个 ajax 调用给了我两个答案？首先，以几乎不引人注意的方式正确答案，然后是另一个？

**表单页面**

```
 $(document).on('click','.save-action',function(){
                    //var text = tinyMCE.get('#action-desc').getContent(); 
                    if($("#form-save-action").validationEngine('validate'))
                    {

                        $.ajax({
                            type: "POST",
                            cache: false,
                            data: $("#form-save-action").serialize(),
                            url:"modules/actions/insertaction.php",      

                            success : function (data) {

                               $("#response-message").html(data);

                            }
                        })
                    }

                }); 
```

Adicionar Acção Nome da acção 描述

* * *

格拉瓦

**插入动作.php**

```
$exists = $action->actionExists($actionName);

if($exists == 0)
{
        $action->insertAction(array($actionName,$action->clearContent($actionDesc),1));
        echo 'Acção adicionada com sucesso!'; 
}
if($exists >= 1)
{
      echo 'Acção já existe!'; 
} 
```

因此，如果我单击 .save-action 按钮，它会首先给我正确答案，然后是另一个答案。

PS：ajax调用被包装在一个`$(document).ready`函数中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:32:59.603

只是给出一个正式的答案（在评论中发现）：

该脚本被调用两次。通过 HTML 属性，或者在加载时。您需要确保不运行脚本两次，否则事件处理程序将被添加两次（因此，该函数将运行两次）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T15:21:44.750

尝试直接将动作绑定到类

```
$('.save-action').click(function(e){
               e.preventDefault();
                //var text = tinyMCE.get('#action-desc').getContent(); 
                if($("#form-save-action").validationEngine('validate'))
                {

                    $.ajax({
                        type: "POST",
                        cache: false,
                        data: $("#form-save-action").serialize(),
                        url:"modules/actions/insertaction.php",      

                        success : function (data) {

                           $("#response-message").html(data);

                        }
                    })
                }

            }); 
```

# objective-c - dispatch_get_global_queue vs dispatch_get_main_queue

> ID：12693197
> 
> 赞同：46
> 
> 时间：2012-10-02T15:16:35.190
> 
> 标签：objective-c, ios, grand-central-dispatch

开始学习核心数据和 dispatch_async。有一段代码可以从一组数据中获取图像的 url，并将其设置为核心数据的模型，如下所示

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
                NSString *urlString = [[[photoDictionary valueForKey:@"images"] objectAtIndex:0] valueForKey:@"url"];
                NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];
                dispatch_async(dispatch_get_main_queue(), ^{
                    [photoModel setValue:imageData forKey:@"photoImageData"]; 
```

有人可以向我解释为什么我们使用`dispatch_get_global_queue`外部 dispatch_async 和`dispatch_get_main_queue`内部 dispatch_async。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-02T15:28:51.387

(在 Swift 中) 为您提供了一个后台队列，您可以在该队列上调度异步运行的后台任务`dispatch_get_global_queue`（`DispatchQueue.global()`即不会阻塞您的用户界面）。如果您最终将多个块提交到全局队列，这些作业可以同时运行。如果您有多个代码块要提交到必须在后台按顺序运行的后台队列（不经常需要），您可以创建自己的串行后台队列并分派到该队列，但如果并发后台操作是可以接受，然后利用自己`dispatch_get_global_queue`是方便/有效的。

但是请注意，您不允许在后台队列中执行用户界面更新，因此一旦主队列被取消`dispatch_async`，`dispatch_get_main_queue`（即`DispatchQueue.main.async { ... }`在 Swift 中）该后台队列可以将用户界面更新分派回主队列可用的。

这是一种非常常见的编程模式：提交一些东西在后台运行，当它需要执行用户更新时，将更新分派回主队列。

有关详细信息，请参阅[并发编程指南](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW1)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-02T15:25:59.360

`dispatch_get_main_queue`应该在您想要操作 UI 元素的任何时候使用。这与线程亲和性有关，这是 UI 框架的常见模型。线程关联意味着您只能在创建该对象的线程上操作该对象。对于 Cocoa Touch 中的 UI 类，这是主线程。**这是所有重要平台**上 UI 框架的典型习惯用法。

 **所以`dispatch_get_main_queue`获取与主线程关联的队列。当你的 UI 在不同的线程上更新时，不这样做会导致奇怪的事情发生。我通常会看到 UI 冻结的长时间停顿。

`dispatch_get_global_queue`获取与您的应用关联的给定优先级的任何旧队列。非常适合网络调用，或者在您的情况下，与 Core Data 一起使用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-02T15:19:10.533

全局队列为您提供主队列以外的队列，但省去了实际创建自己的队列的麻烦。当你需要你的代码在主队列上工作时使用 get_main_queue（你所有的 UI 工作都需要在这里进行）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-05T14:22:29.017

```
**dispatch_get_main_queue** :- Perform UI updates on this queue

 dispatch_async(dispatch_get_main_queue(), ^{

self.label.text=@"Hello";

    });

**dispatch_get_main_queue**:- Perform background tasks like downloading content

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    for (int i=0; i<100000;enter code here i++) {
        NSLog(@"HIGH 1 %d", i);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-27T08:52:43.657

简而言之，`dispatch_get_global_queue`是用来执行后台任务的。但是，当您在后台执行任何任务时，如果您需要执行任何与 相关的任务`user interface`，则需要在`dispatch_get_main_queue()`**

# ruby-on-rails-3 - Rails 3 - 是否有一个给定日期的助手会返回“今天”、“昨天”或“x 天前”？

> ID：12693199
> 
> 赞同：0
> 
> 时间：2012-10-02T15:16:37.227
> 
> 标签：ruby-on-rails-3, date, helper

基本上，我想要“time_ago_in_words”的等价物，但以天为单位，不超过这个。（对于“日期”，而不是“日期时间”）

这样的事情存在吗？

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:50:39.160

您可以非常直接地为自己制作这个助手。

使用 Dates 计算的天数很简单`delta = (to_date - from_date).to_i`。

```
today = Date.today
past_date = Date.new(2012, 9, 28)
puts (today - past_date).to_i 
```

所以这是一个完整的示例，包括实际的消息构造：

```
def days_ago_in_words(from_date, to_date, options={})
  delta = (to_date - from_date).to_i
  I18n.with_options :locale => options[:locale], :scope => :'datetime.distance_in_words' do |locale|
    locale.t :x_days, :count => delta
  end
end 
```

# java - Java认为我的主文件夹是C盘？

> ID：12693201
> 
> 赞同：2
> 
> 时间：2012-10-02T15:16:39.380
> 
> 标签：java, windows

出于某种原因，我一定更改了一些配置或其他东西，因为在一个全新的项目中，我输入了这个：

`System.out.println(System.getProperty("user.home"));`

并获得以下输出：

`C:\`

而以前，它曾经返回类似的东西`C:\Users\...`

是否有我需要清除的配置文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T16:57:02.217

当您调用“<code>System.getProperty("user.home");” 在您的代码中，JVM 不使用 Windows 环境变量来确定用户配置文件的位置，而是访问引用用户桌面目录的注册表项。然后它获取桌面的父目录并假定它是用户的配置文件目录。所以请检查你的桌面目录的注册表项`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\`并相应地更新它。如果您的桌面目录的注册键的值为“<code>C:\\”，则 JVM 在您调用“<code>System.getProperty("user.home”) 时返回值“<code>C:\” );” 在你的代码中。例如，如果您可以将注册表中的桌面键输入修改为“<code>C:\Users\YourName\Desktop”，则在调用“<code>System”时将得到“<code>C:\Users\YourName” .getProperty("user.home");” 在你的代码中。

谢谢！

# iphone - 在 iOS 6 中使用格式化输入 UITextView

> ID：12693205
> 
> 赞同：3
> 
> 时间：2012-10-02T15:16:54.377
> 
> 标签：iphone, objective-c, ios, ios6, nsattributedstring

好吧，这似乎很愚蠢，因为它无法完成 - 您可以设置一个预定义的属性字符串以显示在带有格式的文本视图上，但您不能设置通用格式以应用于在`UITextView`.

例如，如果我在文本视图中输入任何内容之前执行此操作：

```
NSString *string = @"Hello world";
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.minimumLineHeight = 50.f;
NSMutableAttributedString *aStr = [[NSMutableAttributedString alloc] initWithString:string];
[aStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0,[string length])];
mainTextView.attributedText = aStr; 
```

然后显示格式，当我用键盘编辑文本时，格式仍然存在。

但是，如果我想从空白开始`UITextView`并将格式应用于用户将在视图中键入的任何内容，该怎么办？

我尝试设置`string = @""`or `string = @" "`，但这些都没有保留格式。真的没有办法将格式应用于用户输入吗？那么具有属性字符串属性的 UITextView 有什么意义呢？

根据文档，设置的`text`属性`UITextView`完全消除了属性字符串所做的任何格式设置。所以无论解决方案是什么，它都不能直接设置`textView.text`属性，而只能调整`attributedText`属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T21:23:16.097

如果我正确理解了这个问题，这就是`typingAttributes`属性的`UITextView`用途。

也就是说，您想要执行以下操作：

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.minimumLineHeight = 50.f;
mainTextView.typingAttributes = [NSDictionary dictionaryWithObject:paragraphStyle forKey:NSParagraphStyleAttributeName]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:56:40.230

你的问题的关键是这个委托方法：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
```

你用它做的是保留一个私有字符串或属性字符串。调用此方法时，您将看到建议的新字符应该放在什么位置并可能替换一些其他字符。通过使用您的私有字符串或 textView.text 的副本并对其进行修改，您就知道拥有完整的字符串。

您可以创建一个新的属性字符串或修改您现有的，在 textView 上设置它：

```
textView.attributedString = myNewString; 
```

然后返回 NO。修改旧字符串很容易，因为 NSString 已经提供了一些方法，您可以让其他字符更改指定范围内的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:37:31.640

您应该尝试使用的委托方法`UITextView`在用户输入文本时收到通知，然后更改此方法中的文本属性。

# javascript - 如何知道 PDF.JS 是否已完成渲染？

> ID：12693207
> 
> 赞同：30
> 
> 时间：2012-10-02T15:17:06.103
> 
> 标签：javascript, html, canvas, pdf.js

我正在使用 PDF.JS 将 pdf 页面呈现到不同的画布元素中。我的要求是捕获画布的输出并将其显示为图像。是否有一些事件可以知道画布中 pdf 页面的渲染是否已经完成。因为当我尝试捕获画布的输出时，它是空白的。但pdf页面正确呈现。**看起来我的捕获事件在 pdf.js 完成渲染过程之前被调用。**

这是我的代码：

```
page.render(renderContext);
var myImage = new Image();
myImage.src = document.getElementById('my-canvas-id').toDataURL();
$('body').append(myImage); 
```

如果我在我的 FireFox 控制台中执行相同的代码，它就可以正常工作。所以这段代码没有任何问题。

只是为了让大家知道我已经尝试过 document.ready 和 window.load 事件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-03T05:03:24.163

我也在努力解决这个问题..我使用的解决方案是：

```
//Step 1: store a refer to the renderer
var pageRendering = page.render(renderContext);
//Step : hook into the pdf render complete event
var completeCallback = pageRendering.internalRenderTask.callback;
pageRendering.internalRenderTask.callback = function (error) {
  //Step 2: what you want to do before calling the complete method                  
  completeCallback.call(this, error);
  //Step 3: do some more stuff
}; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-31T22:37:44.493

```
<script type="text/javascript">
  document.addEventListener("pagesloaded", function(e) {
   //do sth..
  });
</script>
```

为我工作

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-07-13T13:52:24.537

> 在撰写本文时，这确实有效。我不确定它是否仍然存在。

PDFJS 使用`Promises`. 最简单的方法如下：

```
page.render(renderContext).promise.then(function(){
  document.body.appendChild(canvas);
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-15T17:21:18.850

使用该`textlayerrendered`事件对我有用：

```
document.addEventListener('textlayerrendered', function (event) {
  // was this the last page?
  if (event.detail.pageNumber === PDFViewerApplication.page) {
    console.log('Finished rendering!');
  }
}, true); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-10T17:52:01.667

里昂的解决方案更健壮。但这是我能找到的最简单的解决方案。

```
var renderTask = pdfPage.render(renderContext);
renderTask.promise.then(
  function pdfPageRenderCallback() {
    pageViewDrawCallback(null);
  },
  function pdfPageRenderError(error) {
    pageViewDrawCallback(error);
  }
); 
```

*   从以下位置的代码中删除和修改：http: [//mozilla.github.io/pdf.js/web/viewer.html](http://mozilla.github.io/pdf.js/web/viewer.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-16T17:27:17.230

在检查这些解决方案时，我遇到了问题`renderContext`，所以我最终使用这种方法来听`pagerendered`：

```
document.addEventListener("pagerendered", function(e){

}); 
```

在我的例子中，我只是想在页面渲染后调用一些外部函数，而且工作量很小。

希望这可以帮助。干杯!

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-10-21T14:04:02.210

```
window.addEventListener('load', function () {
    PDFViewerApplication.eventBus.on('textlayerrendered', function () {
      console.log('textlayerrendered', arguments, PDFViewerApplication)
    }) 
```

事件名称`textlayerrendered`包括`PDFViewerApplication.eventBus._listeners`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-13T21:21:17.107

事实证明，您的第一行`page.render(renderContext);`返回一个`RenderTask`具有 3 个属性的对象：

*   *internalRenderTask* - 一个`InternalRenderTask`，呃
*   *cancel* - 一个函数，可能允许您取消渲染工作
*   *promise* - 一个 jQuery[`Promise`](http://api.jquery.com/Types/#Promise)对象

承诺是你想要的。要使用它，它是这样的：

```
 page.render(renderContext).promise.then(function() {

     //do something after the page is rendered here
 }); 
```

希望有帮助。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-07-22T17:21:20.947

如果您将 pdf.js 与查看器应用程序一起使用，这是我发现等待其初始化的最佳方法：

```
// Wait for the PDFViewerApplication to initialize                                                                                                                         
PDFViewerApplication.initializedPromise.then(function() {
    // Do whatever startup code you need to here, now that the EventBus
    // is read. For example:
    PDFViewerApplication.eventBus.on('pagerendered', function (e) {
        annotationInterface.onPageRendered(e);
    });
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-01-07T18:18:55.357

根据[PDF.js](https://mozilla.github.io/pdf.js/examples/)的文档。

对于 2.2 之前的版本，请使用：
`page.render(renderContext).then(function(){`
`var myImage = new Image();`
`myImage.src = document.getElementById('my-canvas-id').toDataURL();`
`$('body').append(myImage);`
`});`

对于 2.2 之后的版本（包括 2.2），请使用： `page.render(renderContext).promise.then(function(){`
`var myImage = new Image();`
`myImage.src = document.getElementById('my-canvas-id').toDataURL();`
`$('body').append(myImage);`
`});`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-04T09:30:47.697

我以这种方式更改了我的代码，它帮助了我想要做的事情：

```
pageRendering = page.render(renderContext);
pageRendering.onData(function(){
    var myImage = new Image();
    myImage.src = document.getElementById('my-canvas-id').toDataURL();
    $('body').append(myImage);
}); 
```

这仅在特定页面已完成渲染时才有帮助。它不会告诉您所有页面的呈现。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-06T00:17:45.270

如果您想在不同的画布中渲染 pdf 文档的所有页面，所有这些页面都是同步的，这是一种解决方案：

索引.html

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Sample</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="pdf.js"></script>
    <script type="text/javascript" src="main.js">
    </script>
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body id="body">  
</body>
</html> 
```

main.css

```
canvas {
    display: block;
} 
```

main.js

```
$(function() {  
    var filePath = "document.pdf";

    function Num(num) {
        var num = num;

        return function () {
            return num;
        }
    };

    function renderPDF(url, canvasContainer, options) {
        var options = options || {
                scale: 1.5
            },          
            func,
            pdfDoc,
            def = $.Deferred(),
            promise = $.Deferred().resolve().promise(),         
            width, 
            height,
            makeRunner = function(func, args) {
                return function() {
                    return func.call(null, args);
                };
            };

        function renderPage(num) {          
            var def = $.Deferred(),
                currPageNum = new Num(num);
            pdfDoc.getPage(currPageNum()).then(function(page) {
                var viewport = page.getViewport(options.scale);
                var canvas = document.createElement('canvas');
                var ctx = canvas.getContext('2d');
                var renderContext = {
                    canvasContext: ctx,
                    viewport: viewport
                };

                if(currPageNum() === 1) {                   
                    height = viewport.height;
                    width = viewport.width;
                }

                canvas.height = height;
                canvas.width = width;

                canvasContainer.appendChild(canvas);

                page.render(renderContext).then(function() {                                        
                    def.resolve();
                });
            })

            return def.promise();
        }

        function renderPages(data) {
            pdfDoc = data;

            var pagesCount = pdfDoc.numPages;
            for (var i = 1; i <= pagesCount; i++) { 
                func = renderPage;
                promise = promise.then(makeRunner(func, i));
            }
        }

        PDFJS.disableWorker = true;
        PDFJS.getDocument(url).then(renderPages);       
    };

    var body = document.getElementById("body");
    renderPDF(filePath, body);
}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-07-02T16:39:32.787

根据您使用的 PDF.js 的组件（和版本），您还可以使用 EventBus。

如果您使用的是最简单的 PDF.js 实现，那么这可能不可用，但如果您使用的是他们的[SimpleViewer 或 PageViewer 示例](https://github.com/mozilla/pdf.js/tree/master/examples/components)，请尝试以下操作：

```
 eventBus.on("pagesloaded", function() {
            console.log('pagesloaded');
            // your code here
        }); 
```

eventBus 应该已经定义，如果没有，您可以使用以下方法进行设置：

```
var eventBus = new pdfjsViewer.EventBus(); 
```

同样，这取决于您的 PDF 查看器的复杂程度。事实证明 PDF.js 中有许多不同的层。

要监听每个页面加载，请使用 eventBus 事件“ `pagerendered`”

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-05T10:32:59.113

这是我发现使用 Viewer API 并无错误操作呈现页面的唯一方法。

```
onPagesLoaded = () => { 
    // do something, set zoom, current page, ...
};

window.PDFViewerApplication.eventBus.on('pagesloaded', onPagesLoaded); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-11-18T15:04:45.080

page.render 是一个承诺，所以你必须在你的成功中做你的事情，如下所示：

```
page.render({
  canvasContext: context,
  viewport: viewport
}).then(function() {
//do your stuff here }); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-07T20:12:30.180

如果您在后端创建/修改 PDF，您可以将 pdf javascript 添加到 PDF 文件以在加载时打印。

```
var pp = getPrintParams();  
pp.interactive=pp.constants.interactionLevel.full; 
print(pp); 
```

# c++ - 是否可以从 FSEvent id 获取文件名？

> ID：12693208
> 
> 赞同：3
> 
> 时间：2012-10-02T15:17:12.453
> 
> 标签：c++, macos, fsevents

我已经使用 mac 文件系统事件 API 在 C++ 中创建了一个简单的文件系统观察程序，如下所述：[apple developer doc](http://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/UsingtheFSEventsFramework/UsingtheFSEventsFramework.html#//apple_ref/doc/uid/TP40005289-CH4-DontLinkElementID_11)。我的问题在标题中。我如何获得被改变的东西的路径？eventPaths 数组只为我提供了我实际上正在观看的父目录（或其集合）的路径。但不是被修改的基础目录条目。

我可以使用回调获取有用的信息，即：

```
 static void mycallback(
            ConstFSEventStreamRef streamRef,
            void *clientCallBackInfo,
            size_t numEvents,
            void *eventPaths,
            const FSEventStreamEventFlags eventFlags[],
            const FSEventStreamEventId eventIds[]) 
```

我在想也许可以从这些项目之一中提取名称？

编辑：

例如，可能会发现创建了一个文件，在这种情况下

kFSEventStreamEventFlagItemCreated

被提出。但是我应该如何获取该项目的实际名称？（对于其他事件也是如此，例如删除项目时等）。

编辑2：

我开始认为不可能做我想做的事。来自[FS 技术概述](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/TechnologyOverview/TechnologyOverview.html#//apple_ref/doc/uid/TP40005289-CH3-SW1)：

“重要的一点是通知的粒度是目录级别的。它只告诉你目录中的某些内容发生了变化，但不会告诉你发生了什么变化。”

阿卡。臭虫。

干杯，

本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T06:31:02.803

实际上，这是可能的，但仅限于 10.7+。查看 FSEventStreamCreate 的 kFSEventStreamCreateFlagFileEvents 标志（[此处](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/FSEvents_Ref/Reference/reference.html)的文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:55:41.997

不幸的是，正如我发现的那样，这是不可能的。有关解释/动机，请参阅[FS 技术概述。](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/TechnologyOverview/TechnologyOverview.html#//apple_ref/doc/uid/TP40005289-CH3-SW1)一种解决方法是拍摄目录的快照，然后每当发现更改时，拍摄新快照并将其与原始快照进行比较，以查找更改的特定目录条目（及其名称）。

编辑：>=10.7 是可能的（见选择的答案）

# google-maps - 谷歌地图 v3 不返回某些查询的地方

> ID：12693211
> 
> 赞同：1
> 
> 时间：2012-10-02T15:17:21.960
> 
> 标签：google-maps, google-maps-api-3, maps, google-api, google-places

我正在使用 gmaps v3 javascript 库实现地点/本地搜索。这个想法是通过查询和位置文本获取列表/位置。我正在使用 PlacesService 对象和搜索功能来获取地点列表。

```
// code
 service = new google.maps.places.PlacesService(map);
//search
 var req = { keyword: qry, location: location, radius: 1000 };
 service.search(req, function (results, status) {
       // do something
 }); 
```

问题是这不会返回一些我猜是商业的“选择”关键字的任何结果，比如我在芝加哥附近搜索食物、披萨、汽车等时得到结果，但是当我搜索宝马、奥迪经销商、现代等时。芝加哥附近，没有结果。如果我在 maps.google.com 中输入相同的查询，我会得到一堆带有广告的列表。理想情况下，我希望从 api 获得完全相同的数据，但不知道为什么某些查询没有显示结果。

# ruby-on-rails - 使用 Simple_form 在 :collection 中显示来自 DB 中特定字段的信息

> ID：12693212
> 
> 赞同：0
> 
> 时间：2012-10-02T15:17:25.037
> 
> 标签：ruby-on-rails, ruby

在数据库中，客户表中有姓名、电话和其他数据。但是，如果我创建与 Simple_form 的关联，它会在选项中显示名称，有没有办法在表单的选项中显示名称，而不是显示电话？

这是我当前使用的显示名称的代码。

```
<%= f.association :client, :required => false, :prompt => "Eliga Cliente", 
  :label => "Clients", :collection => Client.where(:status => true).order("id ASC") %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:51:30.797

您可以传递 label_method 参数并将其设置为适当的属性。

```
<%= f.association :client, :required => false, :prompt => "Eliga Cliente", 
:label => "Clients", :collection => Client.where(:status => true).order("id ASC"),
:label_method => :phone %> 
```

# java - 如何启动 Jetty 并以独立于平台的方式打开浏览器

> ID：12693221
> 
> 赞同：1
> 
> 时间：2012-10-02T15:17:54.220
> 
> 标签：java, jsp, webserver, launcher, usb-flash-drive

我有一个简单的 JSP 网页/站点。我已经在闪存驱动器上安装了 Jetty，并将 Jsp/Site 放入根上下文中。我有一个批处理文件，当我单击它时，它会启动码头，然后启动 IE 并启动网页。我什至在闪存驱动器上安装了 JRE，以防它没有在本地安装。效果很好，填充少，最终将用户引导到真实的网站做一些实际的工作。

我想做的是使闪存驱动器应用程序更加独立/兼容。我想要一个或多个图标供 mac 或 unix 或 windows 用户单击以启动 Web 服务器，然后启动浏览器。最好安装不同版本的 JVM，这样程序就可以为他们所在的机器选择正确的版本。

我看了一点 Java Web Start，但它似乎不太合适。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:21:45.777

如果您使用`ant`构建系统，您可以使用[本文](https://stackoverflow.com/questions/4696176/using-ant-how-do-i-open-a-file-in-a-browser)提出的解决方案

# python - 如何将 commands.getoutput 调用移植到 Python 3？

> ID：12693222
> 
> 赞同：4
> 
> 时间：2012-10-02T15:17:54.387
> 
> 标签：python, python-3.x, standard-library

commands.getoutput() 在当前 Python 2.x 中被 AFAIR 弃用，并在 Py3k 中被删除。

如何在干净的 Python 3 中获得类似的信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:32:26.393

逐字对应的是[`subprocess.getoutput`](http://docs.python.org/dev/library/subprocess.html#subprocess.getoutput)。但是，如果命令失败，您几乎总是希望抛出异常，因此使用[**`subprocess.check_output`**](http://docs.python.org/library/subprocess.html#subprocess.check_output).

# android - 如何使用 json 在我的 twitter android 应用程序中添加 +7 小时

> ID：12693228
> 
> 赞同：0
> 
> 时间：2012-10-02T15:18:38.253
> 
> 标签：android, json, twitter

```
for(int i = 0; i < ja.length(); i++){
            JSONObject jo = ja.getJSONObject(i);

            if (jo.getString("from_user").equalsIgnoreCase(namajalur))
            {

                if (jo.getString("text").contains(object))
                {
                    listItems.add("@" + jo.getString("from_user")+ " : \n" +jo.getString("text") + "\r\n" +
                    jo.getString("created_at")); 
```

in **("created_at")**是美国的默认时区，与我的当地时间相差 7 小时。

如何添加 +7 小时所以如果默认时间 11:00:00 将是 18:00:00..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:04:12.950

逐步实现这一目标的方法是：

```
private SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

String createdAt =  jo.getString("created_at"));
Date date = new Date(Date.parse(createdAt));

String localeTime = dateFormat.format(date); 
```

localeTime 是您的当地时间，您可以随意更改格式。

更短的方法是简单地做

```
listItems.add("@" + jo.getString("from_user")+ " : \n" +jo.getString("text") + "\r\n" +
                new Date(Date.parse(jo.getString("created_at"))).toLocaleString(); 
```

但是这样你就使用了不推荐使用的方法，并不是最好的方法。

如果您使用 simpleDate 格式，它将正确解析和格式化它，但是如果您使用 Json 给您的日期，或者将其转换为 Locale，您仍然应该对其进行格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:27:54.260

尝试将 json (created_at) 中的字符串值转换为日期，使用下面的函数并转换回字符串

```
public static Date addSevenHours(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.add(Calendar.HOUR, 7);
    Date end = cal.getTime();
    return end;
} 
```

# ruby-on-rails - Ruby on Rails：表关系搜索

> ID：12693229
> 
> 赞同：0
> 
> 时间：2012-10-02T15:18:40.427
> 
> 标签：ruby-on-rails, ruby, database, search, relationship

我仍然无法搜索存储在单独表中的技术，其中技术表 (technol) 和项目表之间通过名为 projecttechnol 的表存在关系。

这是我尝试搜索具有技术（tech1）的项目时的日志。

```
Parameters: {"utf8"=>"✓", "client"=>"", "industry"=>"", "role"=>"", "technols"=>{"id"=>["", "1", ""]}, "business_div"=>"", "project_owner"=>"",  "start_date_dd"=>"", "start_date_A"=>"", "start_date_B"=>"", "status"=>"", "keywords"=>"", "per_page"=>"10"}
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Technol Load (0.3ms)  SELECT "technols".* FROM "technols" 
  Project Load (0.5ms)  SELECT "projects".* FROM "projects" ORDER BY client
  Project Load (0.6ms)  SELECT "projects".* FROM "projects" ORDER BY industry
  Project Load (0.4ms)  SELECT "projects".* FROM "projects" ORDER BY role
  Project Load (0.4ms)  SELECT "projects".* FROM "projects" ORDER BY tech
  CACHE (0.0ms)  SELECT "projects".* FROM "projects" ORDER BY tech
  CACHE (0.0ms)  SELECT "projects".* FROM "projects" ORDER BY tech
  CACHE (0.0ms)  SELECT "projects".* FROM "projects" ORDER BY tech
  CACHE (0.0ms)  SELECT "projects".* FROM "projects" ORDER BY tech
  CACHE (0.0ms)  SELECT "projects".* FROM "projects" ORDER BY tech
  Project Load (0.6ms)  SELECT "projects".* FROM "projects" ORDER BY business_div
  Project Load (0.5ms)  SELECT "projects".* FROM "projects" ORDER BY project_owner
  Project Load (0.7ms)  SELECT "projects".* FROM "projects" ORDER BY status
   (0.9ms)  SELECT COUNT(*) FROM "projects" INNER JOIN "projecttechnols" ON "projecttechnols"."project_id" = "projects"."id" INNER JOIN "technols" ON "technols"."id" = "projecttechnols"."technol_id" WHERE "technols"."id" IS NULL 
```

**这是我的project.rb：**

```
class Project < ActiveRecord::Base
      attr_accessible :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech_id

    validates_presence_of :business_div, :client, :customer_benifits, :end_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary#, :tech

    has_many :projecttechnols
    has_many :technols, :through => :projecttechnols

    def self.like(text); "%#{text}%"; end

      def self.search(search_client, search_industry, search_role, search_tech_id, search_business_div, search_project_owner, search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
        # start with a scoped query, to apply more scopes on it afterwards
        _projects = Project.scoped 
        # then, for each of the parameters, apply the scope only if present
        if search_client.present?
          _projects = _projects.where ['client LIKE ?', like(search_client)] 
        end
        if search_industry.present?
          _projects = _projects.where ['industry LIKE ?', like(search_industry)]
        end
        if search_role.present?
          _projects = _projects.where ['role LIKE ?', like(search_role)]
        end

       _projects = _projects.joins(:technols).
              where("technols.id" => search_techs_ids)

        if search_business_div.present?
          _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
        end
        if search_project_owner.present?
          _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
        end

         if search_status.present?
          _projects = _projects.where ['status LIKE ?', like(search_status)]
        end

    todays_date = DateTime.now.to_date

    if !search_start_date_A.blank? or !search_start_date_B.blank?
        search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
        search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
        todays_date = nil
        search_start_date_dd = nil

        end

    if search_start_date_dd.blank?
        todays_date = nil
    end

    if search_start_date_A.present? or search_start_date_B.present?

          _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
        end

                    if search_start_date_dd.present?
          _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
        end

        if search_keywords.present?
          _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
        end
        # now you have applied only the present scopes. return the result, and watch 
        # the query as it executes.
        _projects
      end

    def self.paginated_for_index(projects_per_page, current_page)
        paginate(:per_page => projects_per_page, :page => current_page)
      end

    end 
```

**技术.rb：**

```
class Technol < ActiveRecord::Base
  attr_accessible :tech

has_many :projecttechnols
has_many :projects, :through => :projecttechnols
end 
```

**工程技术.rb**

```
class Projecttechnol < ActiveRecord::Base
  attr_accessible :project_id, :technol_id

belongs_to :technol
belongs_to :project
end 
```

任何人都可以看到这个工作的解决方案。我是 Rails 新手，所以在尝试帮助我时请记住这一点。在技​​术领域搜索任何东西都不会返回任何结果。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:40:58.413

您的搜索参数中似乎有错字：

```
 def self.search(search_client, search_industry, search_role, search_tech_id... 
```

但是你在这里使用**search_techs_id**：

```
 _projects = _projects.joins(:technols).where("technols.id" => search_techs_ids) 
```

如果您检查您的查询，您会发现它试图用 NULL 连接两个表。

另一方面，您的搜索查询有点长且难以阅读，我建议您使用以下内容：

```
class Project < ActiveRecord::Base
  attr_accessible :edited_first_name, :edited_last_name, :first_name, :last_name, 
    :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  
    :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, 
    :role, :start_date, :status, :summary, :tech_id

  validates_presence_of :business_div, :client, :customer_benifits, :end_date,  
   :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, 
   :role, :start_date, :status, :summary#, :tech

  has_many :projecttechnols
  has_many :technols, :through => :projecttechnols

  scope :client, { |client| where ['client LIKE ?', like(client) ] }
  scope :industry, { |industry| where ['industry LIKE ?', like(industry)] }
  scope :role, { |role| where ['role LIKE ?', like(search_role)] }
  scope :technologies, { |technology_ids| joins(:technols).where("technols.id}" => technology_ids) }
  scope :division, { |division| where ['business_div LIKE ?', like(search_business_div)] }
  scope :owner, { |owner| where ['project_owner LIKE ?', like(search_project_owner)] }
  scope :status, { |status| where ['status LIKE ?', like(search_status)] }
  scope :keywords, { |keywords| where ['keywords LIKE ?', like(keywords)] }
  scope :started_before, { |date| where ['start_date <= ?',date] }
  scope :started_after, { |date| where ['start_date >= ?',date] }

  def self.search_fields    
    [:client,:industry,:role,:technologies,:division,:owner,:status,:started_before,:started_after,:keywords]
  end

  def self.search(params)
    search_fields.inject(scoped) do |scopes,key|
      params[key].present? ? scopes.send(key,params[key]) : scopes
    end
  end

  def self.like(text); "%#{text}%"; end

  def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

这样一来，您的搜索方法会更短一些，并且由于您已将所有这些参数分解到它们自己的范围内，如果您需要重用它们，方法已经存在。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:38:59.197

我想在控制器中，您可以从表单中获得正确的值。

这是你的`params`：

```
{"utf8"=>"✓", "client"=>"", "industry"=>"", "role"=>"", "technols"=>{"id"=>["", "1", ""]}, "business_div"=>"", "project_owner"=>"",  "start_date_dd"=>"", "start_date_A"=>"", "start_date_B"=>"", "status"=>"", "keywords"=>"", "per_page"=>"10"} 
```

所以所选技术 id 的列表`params["technols"]["id"]`就是`["", "1", ""]`. 如果这是有意的，那么您必须为其删除空白

```
tech_ids = params["technols"]["id"].reject(&:blank?)  # removes empty strings 
```

并将其传递给搜索功能。如果不是预期的，请检查您用于创建选择框的代码，因为它必须返回正确的 ID

# html - 为什么要使用 html 分隔符 变成了容器 ?

> ID：12693230
> 
> 赞同：-5
> 
> 时间：2012-10-02T15:18:41.803
> 
> 标签：html

在旧的 HTML `<p>`标记中是简单的分隔符，例如`<hr> or <br>`. 它已更改为 container `<p></p>`。这对我来说没有意义。他们可以`<div></div>`用作容器，然后保持`<p>`原样。W3C 为什么这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:20:33.177

`<p>`从来都不是“简单分隔符”，至少在任何标准版本的 HTML ^*中都不是。它是一个容器元素——一个“段落”，因此是“p”——而且一直都是。恰好结束标签是可选的，所以很多人（a*hem*）一直在错误地使用它。

^(* 看起来HTML 规范的*早期草案*说这`<p>`是一个分隔符。但是到第一个公共标准版本（2.0）时，它是一个容器，从那以后就一直是这样。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:23:33.560

HTML 中没有分隔符之类的东西。

`<hr>`并且`<br>`是空标签。~~它们更正确地写为`<hr/>`和`<br/>`~~。如果您使用的是 XHTML，您将使用`<hr/>`来指示一个空块。然而，由于这些元素总是空的，`<hr>`在非 X HTML 中就可以了。但这并不能使它们成为“分隔符”。

旧版本的 HTML 允许在执行 HTML 规则时极其松懈。浏览器旨在支持草率的 HTML 代码，其中经常包括用户忽略关闭他们打开的元素。

或“`<p>`段落”标签就是一个很好的例子。

这种方法的问题在于浏览器必须推断 HTML 作者的意思。随着页面变得更加高级，JavaScript 与页面的交互变得更加重要，浏览器有必要对 HTML 进行更严格的解释，以便 JS 作者可以确保他们与生成的文档模型正确交互。

所以，简而言之，所发生的一切就是浏览器不像以前那样支持编写得很糟糕的 HTML。总而言之，这是一件好事。

# ios - lldb Xcode：错误：'printf' 不是有效命令

> ID：12693237
> 
> 赞同：1
> 
> 时间：2012-10-02T15:18:54.503
> 
> 标签：ios, xcode, lldb

我正在使用 Xcode 4.3.3，我想设置符号端点。我为所有 objc_msgSend 符号创建了一个符号断点，我想将它与“调试器输出”结合起来。

[我在 SO 中](https://stackoverflow.com/questions/7270502/how-to-log-all-methods-used-in-ios-app)遵循了这篇文章的提示。但是在我的调试器中，消息

> 错误：'printf' 不是有效命令。

出现。有什么线索吗？我希望为每个函数调用一条消息 [Class method] 打印在调试器区域中。像这样

```
[UIApplication sharedApplication]
[UIApplication _isClassic]
[NSCFString getCString:maxLength:encoding:]
[UIApplication class]
[SLSMoleculeAppDelegate isSubclassOfClass:]
[SLSMoleculeAppDelegate initialize] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:11:22.733

如果您在断点设置中为调试器命令添加前缀“expr --”，它可以与 lldb 一起使用：

```
expr -- (void)printf("[%s, %s]\n",(char *) object_getClassName(*(long*)($esp+4)), (char *) *(long *)($esp+8) ) 
```

然而，该解决方案并不完美，因为调试器在每次输出后都会打印“no result”：

```
[OS_xpc_dictionary, _xref_dispose]
<no result>
[NSObject, initialize]
<no result>
[OS_object, initialize]
<no result> 
```

I have found nothing to suppress the "no result" output, it may be that it is not possible, see [this Open Radar](http://openradar.appspot.com/11225022).

# iphone - 在 viewDidDisappear 中 setNetworkActivityIndi catorVisible 为 NO

> ID：12693238
> 
> 赞同：0
> 
> 时间：2012-10-02T15:18:56.663
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

没有办法自动取消 url 连接，所以我是这样做的：

```
-(void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
} 
```

是的，我知道它实际上并没有取消请求，它只是在状态栏中隐藏了网络指示器，并且请求仍在后台某处进行。

现在它可以工作，但这对 Apple 安全吗？苹果会喜欢它，还是他们会拒绝我的应用程序这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:25:21.183

您的应用不会被拒绝。您可以取消请求，请参阅此答案[创建和取消 NSURLConnection](https://stackoverflow.com/questions/2126056/creating-and-canceling-an-nsurlconnection)。如果您正在使用，`ASIHTTPRequest`请保留并调用`[request cancel];``willDissapear:animated:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:54:22.733

您应该将您的 URLRequests 卸载到一个单独的类。这称为 MVC。您可以将 NetworkActivityIndi​​cator 设置为在该类中设置动画或停止，并且该类可以在幕后运行，您不必担心让 ViewController 负责指示器。

让用户了解正在发生的事情是一种很好的做法，并且很高兴看到网络活动反馈，尤其是当我在等待某些事情发生时。

# php - 为子数组分配索引

> ID：12693246
> 
> 赞同：0
> 
> 时间：2012-10-02T15:19:17.943
> 
> 标签：php, arrays, multidimensional-array, array-push

我需要帮助弄清楚如何为子数组分配索引。这是我到目前为止所拥有的：

我首先使用第一个子数组和一些数据设置数组。

`$start=array(array($rand, $_POST['day'], $_POST['time'], $delay));`

然后当我需要添加另一个子数组时，我使用 array_push 方法将子数组添加到现有数组中。

`$array = get_option('extend-array');
$push = array($rand, $_POST['day'], $_POST['time'], $delay);
array_push($array, $push);`

我不知道从这里去哪里。我想为子数组分配一个自定义索引，以便在需要时直接引用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:22:25.727

只需分配给数组元素：

```
$array = array(array($rand,$_POST['day'],$_POST['time'],$delay));
$array[1] = array("New data");
$array[2] = "Blah";
$array[9001] = "Doesn't have to be consecutive."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:22:44.217

在下一个最高可用索引处推送另一个元素中的内容。如果你想要一个自定义索引，你必须自己定义它，例如

```
$array = array('rand' => $rand, 'day' => $_POST['day'], etc...);
$array['extended-array'] = get_option('extend-array'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:23:47.980

这是相当微不足道的。在 PHP 中，您可以随时定义数组。只需从一个空变量开始，然后添加所需的子数组：

```
$array["start"] = array($rand, $_POST['day'], $_POST['time'], $delay); 
```

然后再添加一个：

```
$array["push"] = get_option('extend-array'); 
```

还要检查手册示例[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:24:22.920

简单的

```
$start = array(array($rand, $_POST['day'], $_POST['time'], $delay));
$start['extend-array']= array($rand, $_POST['day'], $_POST['time'], $delay); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:24:44.003

创建数组时分配键名的方法是：

$array = array('key_name' => 'value');

您可以在创建子数组时设置它的索引：

您的代码应更改为：

```
$start=array(array('rand' => $rand, 'post_day' => $_POST['day'], 'post_time' => $_POST['time'], 'delay' => $delay)); 
```

然后您可以像这样访问索引：

$start[0]['rand'] = '新的兰特值'; $start[0]['post_day'] = '新的 post_day 值';

等等

# ruby-on-rails - 设计：在测试中不使用 Devise#password 初始化用户密码

> ID：12693247
> 
> 赞同：1
> 
> 时间：2012-10-02T15:19:19.363
> 
> 标签：ruby-on-rails, devise, sinatra, factory-bot

我将 FactoryGirl 用于我的测试环境的装置，并使用 Devise 进行身份验证。到目前为止，我们一直依赖 Devise 提供的 password= 方法来初始化用户设备。这使我们可以轻松地为用户设置密码。

现在，我需要在不重复使用 password= 函数的情况下初始化密码。

我在两个应用程序上共享相同的模型，第二个是 Sinatra 应用程序，它将具有 0 身份验证（但授权）。用户将在那里，我想访问它并使用它进行测试，而不依赖于设计逻辑（这是第一个应用程序 Rails 应用程序的依赖项）。到目前为止，一切都很好。

问题是，模型规格也必须在第二个应用程序中运行。如果没有正确初始化密码，我可能会在不久的将来遇到一个绊脚石。没关系，我可能永远不需要第二个应用程序中的密码，但是需要用户的规范必须运行（并且用户必须有密码）。是否可以在不依赖设计逻辑（和密码=）的情况下为测试用户定义有效密码？

而且我不想用一些随机字符串填充 encrypted_pa​​ssword 字段，这就是我在第二个应用程序工厂中已经在做的事情，但我希望在两个应用程序中只有一个工厂定义，因此未加密的密码必须是' qwerty' 在 Rails 应用程序上下文中可读且有效。

# android - getActivity() with in FragmentActivity: android

> ID：12693251
> 
> 赞同：2
> 
> 时间：2012-10-02T15:19:40.833
> 
> 标签：android, android-activity, android-fragmentactivity

我正在使用这个类 A，它扩展了另一个抽象类（并且这个抽象类扩展了 FragmentActivity），并且在我的一个函数中，我想在 A 类中为我当前的活动 A 获取 getActivity()。但是每当我使用 getActivity 时，它都会给出我的错误是 getActivity() 方法不是我的班级定义的类型。请帮我 ！！我怎样才能做到这一点？

我的 A 类代码

```
 public class A extends B
 {
  protected void onCreate(Bundle savedInstanceState) 
   {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.voicing);

    //doing another initializations and stuff//

   }
  } 
```

B类代码

```
 public abstract class B extends FragmentActivity 
  {

   FragmentAdapter mAdapter;
   ViewPager mPager;
   PageIndicator mIndicator;

 } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T15:24:07.960

A`FragmentActivity`是`Activity`(Java 风格: `FragmentActivity extends Activity`) 的一个实例。

所以调用没有意义，`getActivity`因为 a`FragmentActivity`已经是a `Acivity`，所以只需调用/使用`this`就可以了。`getActivity`类中也没有调用方法`FragmentActivity`。换句话说，您的 B 类正在扩展一个`Activity`实例。

因此，在您的 A（或 B）类中，您可以使用此代码片段来获取活动实例：

```
Activity test = (Activity) this; 
```

但是，如果您的 B 类扩展`Fragment`，那么该`getActivity`调用将起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T15:25:12.750

`FragmentActivity``Activity`是**支持包**的替代品。由于您的`class B` *extends* `FragmentActivity`和后来的`class A`extends `class B`，因此您`class A`也指的是`Activity`（aka `FragmentActivity`）。

简而言之，您不需要调用任何方法。只需使用`this`关键字来引用您的活动实例。

# c - 计算机上字符表示的低级细节

> ID：12693252
> 
> 赞同：3
> 
> 时间：2012-10-02T15:19:44.283
> 
> 标签：c, ascii

我在 C 中读到，char 实际上是一个整数，因为字符表示为位模式。

所以我想知道当您运行程序时，操作系统如何知道何时将位模式打印为数字或字符。什么代码确定要打印哪个？

而且，ASCII 表在哪里，转换是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:21:19.837

> 操作系统如何知道何时将位模式打印为数字或字符。

它没有。***[您可以通过指定正确的格式描述符](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)***来明确告诉编译器是将其视为字符还是整数`printf`。这就是如果格式描述符和实际参数的类型不匹配的原因，那么它会导致未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:23:04.780

这取决于您如何告诉程序解释代码中的位。例如，

`printf("%d %c", 'a', 97);`

这将打印：`97 a`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T15:23:16.990

如果您正在运行 linux 机器，只需在终端中键入 man ascii，您就会看到所有 char 值（十进制、八进制和十六进制）。如果没有，只需 google ascii 表，您可能就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:44:02.663

> ...字符表示为位模式。

在计算机上，*一切*都表示为位模式：字符、整数、实数和可执行代码。八位`01000001`可以表示整数`65`（尽管整数通常占用至少 16 位）或`A`ASCII 系统中的字母。有很多复杂的方法可以跟踪什么是什么，这是操作系统和高级编程语言的主要职责之一。*这是程序员必须明确告诉*函数正在传递哪种数据`printf`的罕见情况之一。

 *> 我在 C 中读到，char 实际上是一个整数，因为字符表示为位模式。

这不太正确：在 C 语言中，chars 和 int 长期以来一直是不同的类型。通过语言设计者的选择， C 允许您根据需要使用 a ：位模式基本上用作对应`char`的. C 不会让你使用 a作为 a因为位模式不会给你任何有用的东西（位模式 for看起来一点也不像 integer 的位模式）。`int``int``float``int``1.0``1`

至于 ASCII 表，它体现在显示文本的硬件和软件的设计以及操作它的编程语言函数的设计中。计算机*字体*是从数字到形状的映射。或“字形”。在最简单的情况下，它将 ASCII 范围 (32-126) 中的数字映射到适当的字形。（实际上，它通常是获得相同结果的更间接途径）。旧的计算机终端具有硬连线字形，而 Windows 或 X11 应用程序使用软件字体。

至于编程语言，函数类似于`isdigit()`或`isalpha()`只是在其属性表上查找字符代码：`isdigit()`返回`true`数字 48-57（对 ASCII 数字进行编码）以及`false`所有其他数字。不涉及字形。*

# ruby-on-rails - Rails：ActiveRecord::RecordNotFound - 找不到没有 ID 的用户

> ID：12693253
> 
> 赞同：0
> 
> 时间：2012-10-02T15:19:45.367
> 
> 标签：ruby-on-rails

我目前正在做一个上传图片的项目。这些相册中有用户、相册和图片。我已经到了以用户身份创建相册的地步（尚未完成会话、身份验证或登录，但已完成注册）。我在提交 Rails 的表单后收到错误消息

`Couldn't find User without an ID`

我注意到我的 new.html.erb 的 URL 没问题：

`http://localhost:3000/users/13/albums/new`（没问题）

但是在我提交之后，它给了我一个错误，页面是：

`http://localhost:3000/albums/58`（问题。url中没有user_id）

有谁知道为什么我的路线突然像那样改变以及如何解决？错误出现在我的 app/controllers/albums_controller.rb:14:in `show' @user = User.find(params[:user_id]) 行。

新的.html.erb

```
<%= form_for (@album), url: user_albums_path, :html => { :id => "uploadform", :multipart => true } do |f| %>
<div>
    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <br>

    <%=f.submit %>
</div>
<% end %> 
```

专辑控制器

```
def show
  @user = User.find(params[:user_id])
  @album = @user.albums.find(params[:id])
  @photo = @album.photos.build(params[:photo])
  respond_to do |format|
    if @user.save
      format.html { redirect_to album_photo_path(@album), notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end
end

def update
end

def edit
end

def create
  @user = User.find(params[:user_id])
  @album = @user.albums.build(params[:album])
  respond_to do |format|
    if @user.save
      format.html { redirect_to @album, notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end 
end 
```

路线

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums 
end

resources :albums do
  resources :photos
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:40:22.430

这是因为您在创建方法中重定向的方式。当你这样做`redirect_to @album`时，它会使用对象、它的状态和方法来找到重定向到的正确路径。例如，如果`@album.persisted?`方法是 GET，那么路径就是`album_path`. 如果不坚持，那么它将是`new_album_path`.

如果您也添加 User 对象，那么它将`user_album_path`使用正确的 ID 评估路径。

```
format.html { redirect_to [@user, @album], 
              notice: 'Album was successfully created.' } 
```

您的路线也可以做得更好。通过指定

```
resources :albums do
  resources :photos
end 
```

当您已经通过嵌套的 user_album 路由指定了对相册资源的访问权限时，您实际上是在为专辑声明路由，例如“/albums”、“/albums/:id”等。要么做[他在回答中提到的 surase](https://stackoverflow.com/a/12702685/155586)，要么更好的是，[只是确定你的照片路线](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)：

```
scope "/album" do
  resources :photos
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:03:58.640

您可以指定已定义的嵌套路由（只有 2 层深），但这会增加混乱。最好指定为：

```
resources :users do
  resources :albums do
    resources :photos
  end
end 
```

结帐[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

# html - 无法让原始选择下拉箭头在 Mozilla 中消失

> ID：12693262
> 
> 赞同：2
> 
> 时间：2012-10-02T15:20:18.043
> 
> 标签：html, css, google-chrome, web, mozilla

我制作了一个自定义选择框，带有一个自定义下拉箭头，它在 Google Chrome 和 Safari 中看起来不错，但在 Mozilla（奇怪）和 Internet Explorer（不那么奇怪）中，原来的箭头和新的一样仍然存在.

**这是CSS样式：**

```
 .sb2_panes select {
        padding-top: 5px;
        padding-bottom: 5px;
        padding-right: 20px;
        margin: 0;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
        background: url(img/search_arrow.png) no-repeat right #f8f8f8;
        color: #888;
        border: none;
        outline: none;
        display: inline-block;
        -webkit-appearance: none;
        -moz-appearance: normal;
        appearance: normal;
        cursor: pointer;
    } 
```

**这是它在 Google Chrome 中的样子：**

![这是它在 Google Chrome 中的样子：](../Images/18b86899bd22c776bcb4fa2ae6a30424.png)

**这是它在 Mozilla 中的样子：**

![这是它在 Mozilla 中的样子：](../Images/e98f33ad974d10ba903b14d95d016b57.png)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:54:02.027

正如 Gunnar 所提到的，这仍然是 Firefox 中的一个错误（[https://bugzilla.mozilla.org/show_bug.cgi?id=649849](https://bugzilla.mozilla.org/show_bug.cgi?id=649849)）。

一种可能的解决方法是将`select`宽度设置为大于 100% 并应用`overflow: hidden`。

```
select {
    overflow: hidden;
    width: 125%;
} 
```

或者你可以使用 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T12:37:38.293

```
select {
    -moz-appearance: none;
    text-indent: 0.01px;
    text-overflow: '';
} 
```

此代码适用于 FF

# c++ - std deque 出奇的慢

> ID：12693263
> 
> 赞同：7
> 
> 时间：2012-10-02T15:20:21.047
> 
> 标签：c++, performance, stack, deque

我只是发现与使用预分配数组的“自制”堆栈版本相比，标准 std deque 真的很慢。
这是我的堆栈代码：

```
template <class T>
class FastStack
{    
public:
    T* st;
    int allocationSize;
    int lastIndex;

public:
    FastStack(int stackSize);
    FastStack();
    ~FastStack();

    inline void resize(int newSize);
    inline void push(T x);
    inline void pop();
    inline T getAndRemove();
    inline T getLast();
    inline void clear();
};

template <class T>
FastStack<T>::FastStack()
{
    lastIndex = -1;
    st = NULL;
}

template <class T>
FastStack<T>::FastStack(int stackSize)
{
    st = NULL;
    this->allocationSize = stackSize;
    st = new T[stackSize];
    lastIndex = -1;
}

template <class T>
FastStack<T>::~FastStack()
{
    delete [] st;
}

template <class T>
void FastStack<T>::clear()
{
    lastIndex = -1;
}

template <class T>
T FastStack<T>::getLast()
{
    return st[lastIndex];
}

template <class T>
T FastStack<T>::getAndRemove()
{
    return st[lastIndex--];
}

template <class T>
void FastStack<T>::pop()
{
    --lastIndex;
}

template <class T>
void FastStack<T>::push(T x)
{
    st[++lastIndex] = x;
}

template <class T>
void FastStack<T>::resize(int newSize)
{
    if (st != NULL)
        delete [] st;
    st = new T[newSize];
} 
```

.
**我为双端队列运行这个简单的基准测试：**

```
std::deque<int> aStack;
int x;

HRTimer timer;
timer.Start();

for (int i = 0; i < 2000000000; i++)
{
    aStack.push_back(i);
    x = aStack.back();
    if (i % 100 == 0 && i != 0)
        for (int j = 0; j < 100; j++)
            aStack.pop_back();
}

double totalTime = timer.Stop();
stringstream ss;
ss << "std::deque " << totalTime;
log(ss.str()); 
```

.
**使用带有向量的 std 堆栈作为容器（正如“Michael Kohne”所建议的那样）**

```
std::stack<int, std::vector<int>> bStack;
int x;

HRTimer timer;
timer.Start();

for (int i = 0; i < 2000000000; i++)
{
    bStack.push(i);
    x = bStack.top();
    if (i % 100 == 0 && i != 0)
        for (int j = 0; j < 100; j++)
            bStack.pop();
}

double totalTime = timer.Stop();
stringstream ss;
ss << "std::stack " << totalTime;
log(ss.str()); 
```

.
**我的 FastStack 也是一样的：**

```
FastStack<int> fstack(200);
int x;

HRTimer timer;
timer.Start();

for (int i = 0; i < 2000000000; i++)
{
    fstack.push(i);
    x = fstack.getLast();
    if (i % 100 == 0 && i != 0)
        for (int j = 0; j < 100; j++)
            fstack.pop();
}

double totalTime = timer.Stop();
stringstream ss;
ss << "FastStack " << totalTime;
log(ss.str()); 
```

.
**4次运行后的结果如下：**
deque 15.529
deque 15.3756
deque 15.429
deque 15.4778

堆栈 6.19099
堆栈 6.1834
堆栈 6.19315
堆栈 6.19841

快速堆栈
3.01085 快速堆栈 2.9934 快速堆栈
3.02536 快速
堆栈 3.00937

结果以秒为单位，我在 Intel i5 3570k（默认时钟）上运行代码。我使用了具有所有可用优化的 VS2010 编译器。我知道我的 FastStack 有很多限制，但是在很多情况下，可以使用它以及何时可以提供很好的提升！（我在一个项目中使用了它，与 std::queue 相比，我的速度提高了 2 倍）。
所以现在我的问题是：
~~C++ 中是否还有其他每个人都在使用但没人知道的“抑制剂”？~~
编辑：我不想冒犯，我只是好奇你是否知道一些像这样的未知“加速”。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T15:26:48.620

你在比较苹果和橘子。出队是双端的，这要求它在内部与您实现的简单堆栈有很大不同。尝试运行你的基准测试`std::stack<int, std::vector<int> >`，看看你是怎么做的。std::stack 是一个容器适配器，如果你使用向量作为底层容器，它应该几乎和你自己的实现一样快。

不利的一面是 std::stack 实现没有办法让您预先设置大小，因此在您知道最大大小需要的情况下，最初会慢一些它必须重新分配几次。在那之后，它几乎是一样的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-02T15:26:29.603

如果您知道在任何给定时间将在堆栈中的最大元素数量，您应该使用`std::vector`您预先保留容量的 a。即使您不知道容量，对于堆栈，您应该使用`std::vector`会增长几次（增长时比预分配向量成本更高）但永远不会缩小的堆栈，因此一段时间后它将停止分配内存。

性能问题在于，`std::deque`它将根据需要分配块，并在不再需要它们时释放它们（遵循一些策略），所以如果你`std::deque`经常填充和清除，就会不断地分配和释放。

# regex - RewriteRule，不能让它工作

> ID：12693264
> 
> 赞同：2
> 
> 时间：2012-10-02T15:20:26.303
> 
> 标签：regex, mod-rewrite, url-rewriting, rewrite, url-rewrite-module

网址： [http ://mysite.com/amember/login.php?amember_redirect_url=/ajax/?id=9999](http://mysite.com/amember/login.php?amember_redirect_url=/ajax/?id=9999)

我需要将其重写为： [http ://mysite.com/amember/login.php?amember_redirect_url=/?p=9999](http://mysite.com/amember/login.php?amember_redirect_url=/?p=9999)

我的意思是该类型的所有网址（最后带有 ID）我的重写：

```
RewriteRule http://mysite.com/amember/login.php\?amember_redirect_url=/ajax/\?id=(.*) http://mysite.com/amember/login.php\?amember_redirect_url=\/?p=$1 [R=301,L] 
```

到目前为止看起来合法，但它似乎没有工作......

在该行之前，我有以下 3 行：

```
RewriteEngine on
RewriteBase /
RewriteRule ^members/(.*) http://mysite.com/$1 [R=301,L] 
```

更新。试过这个：

```
RewriteRule /amember/login.php\?amember_redirect_url=/ajax/\?id=(\d+) /amember/login.php?amember_redirect_url=/?p=$1 [R=301,L] 
```

不工作

```
RewriteRule ^amember/login.php\?amember_redirect_url=/ajax/\?id=(\d+) /amember/login.php?amember_redirect_url=/?p=$1 [R=301,L] 
```

任何一个

```
RewriteRule ^amember/login.php\?amember_redirect_url=/ajax/\?id=(\d+) http://mysite.com/amember/login.php?amember_redirect_url=/?p=$1 [R=301,L] 
```

任何一个

更新：

```
RewriteCond %{QUERY_STRING} ^id=(.*)$ [NC]
RewriteRule /amember/login.php\?amember_redirect_url=/ajax/$ /amember/login.php\?amember_redirect_url=/?p=%1 [NC,R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:38:07.427

您无法匹配 a 中的查询字符串`RewriteRule`。如果您正在请求`http://localhost/amember/login.php?something&foo`，则传递给 a 的 URI`RewriteRule`是 only `/amember/logi.php`，因此任何带有 a 的东西`\?`都不会匹配，除非`?`URI 中有一个编码（通过 %3F）。

此外，您的查询字符串中有一个*参数：*

`amember_redirect_url`=`/ajax/?p=9999`

内部`?`查询字符串参数的值本身不是参数，因为它没有被 a 分隔`&`，所以你需要匹配它并重写它：

```
RewriteCond %{QUERY_STRING} (.*)amember_redirect_url=/ajax/(.*)
RewriteRule ^/?amember/login\.php$ /amember/login.php?%1amember_redirect_url=/%2 [L,R=301] 
```

# php - mysql全文搜索的困惑

> ID：12693268
> 
> 赞同：0
> 
> 时间：2012-10-02T15:20:45.150
> 
> 标签：php, mysql, full-text-search

我对使用 MySQL 全文没有什么困惑。我有数据库，其字符集设置为`utf-8`，排序规则设置为`utf8_unicode_ci`

我有以下搜索产品的流程。用户从以下流程中选择搜索任何产品

*   用户选择 product_type，枚举字段，其值为 consumable/unconsumable。
*   然后选择product_nature，enum 0=>finished 1- unfinished。
*   然后用户选择位置，varchar 用户可以选择多个位置。
*   然后用户指定价格范围等（大约还有 5 个选择） 在搜索页面中，用户唯一输入的是位置、价格范围。休息他们从组合中选择的所有内容。

我的困惑是。

1.  我的数据库是否支持全文搜索？
2.  为了启用全文搜索，我需要索引哪些字段。
3.  `varchar`因为仅在和`text`数据类型字段中支持全文。如果用户为过滤器选择的许多字段在其中，如何获得相关结果`enum`
4.  我想根据用户选择的过滤器在顶部显示完全匹配和几乎匹配的产品，就像我上面描述的那样。是否按全文相关性排序在这里工作，因为有许多类型的字段`enum`。

**编辑** 为了更好地理解例如

此搜索适用于那些知道要买什么但不知道其他任何东西的人。就像我需要一部手机一样，但我什么都不知道，我只是从组合中选择它的类型（Wifi/不带 wifi），然后选择相机（带/不带），然后选择其他几个类似的功能。然后我指定我能承受的价格范围，然后我希望在特定位置的商店中有电话。为此，我键入`location A, location B, location C`. 我想要基于这些位置中的任何一个的结果。我想根据指定的搜索参数的最接近的匹配对结果进行排序。精确匹配到最接近的匹配，然后是最接近的匹配。希望这可以帮助

有人可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:28:26.240

1.  页面上的文档[`Full-Text Search Functions`](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)指出`FULLTEXT`只能与 MyISAM 一起使用，*但是*，MySQL 5.6 添加了对`FULLTEXT`InnoDB 索引的支持（​​参见页面`Section 14.2.4.12.3`上[`InnoDB Table and Index`](http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html)）。如果您的表设置为 MyISAM，那么是的 - 您应该得到支持；使用 InnoDB，可能 - 等待您的 MySQL 版本。

2.  要启用全文搜索，您应该`FULLTEXT`仅在要使用搜索的字段上添加索引（没有必要将其添加到您不会使用的字段）。`FULLTEXT`索引只能应用于`CHAR`、`VARCHAR`和`TEXT`列类型，因此这可能是一个开始。您的产品名称可能太短而无需担心 `FULLTEXT`索引（可以考虑使用 HASH 索引），但您的产品描述（如果有的话）会非常适合它。

3.  `enum`数据最好用一个`BTREE`索引来索引，而不是`FULLTEXT` 一个。

4.  没有把握; 您能否发布一个示例，说明将查询和排序哪些字段及其数据类型，以便更好地了解您的需求？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:29:36.127

1.  MySQL 支持 MyISAM 表类型的全文，从 5.6.x 开始，某处支持 InnoDB 表的全文。
2.  在要进行全文搜索的任何字段上添加全文索引。int/binary/float 字段上的全文没有意义，所以基本上任何你需要做全文搜索的 varchar/text 字段
3.  枚举上的全文没有意义，因为枚举仅用于完全匹配
4.  您可以按其内部[相关性分数](https://stackoverflow.com/questions/6259647/mysql-match-against-order-by-relevance-and-column)对全文结果进行排序。

# java - Swing 应用程序的复杂日历

> ID：12693271
> 
> 赞同：2
> 
> 时间：2012-10-02T15:20:49.600
> 
> 标签：java, swing, datetime, jar, calendar

我正在开发一个摇摆应用程序，该应用程序需要具有精心设计的框架的日期时间选择器。我的应用程序中的时间非常脆弱，而且我使用的 jar 文件

```
JCalendar.jar 
```

用户在选择合适的时间时遇到了很多问题。

所以我想问是否有任何其他的日期时间选择器可以让用户清楚和容易地选择合适的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:26:49.160

[我对SwingX](http://swingx.java.net/)项目中的 JXDatePicker 有很好的体验。有了这个，你可以选择一个日期。如果您还需要时间，请参阅：[Java Swing 是否有任何好的免费日期和时间选择器可用？](https://stackoverflow.com/questions/654342/is-there-any-good-and-free-date-and-time-picker-available-for-java-swing)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T17:24:23.670

另请参阅此[方法](https://stackoverflow.com/a/665463/230513)，使用`JSpinner`和时间格式化`DateEditor`。它可以与[`JCalendar`](https://stackoverflow.com/tags/jcalendar/info).

# java - BigInteger 有上限吗？

> ID：12693273
> 
> 赞同：95
> 
> 时间：2012-10-02T15:21:09.970
> 
> 标签：java, biginteger

> **可能重复：**
> [BigInteger 没有限制是什么意思？](https://stackoverflow.com/questions/12088436/what-does-biginteger-having-no-limit-mean)

Javadoc`BigInteger`没有定义任何最大值或最小值。但是，它确实说：

（重点补充）

> 不可变**的任意精度**整数

即使在理论上也有这样的最大值吗？还是`BigInteger`操作方式根本不同，以至于实际上除了计算机上可用的内存量之外*没有最大值？*

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-02T15:24:20.977

该数字保存在`int[]`一个数组的最大大小为`Integer.MAX_VALUE`. 所以最大的 BigInteger 可能是`(2 ^ 32) ^ Integer.MAX_VALUE`.

诚然，这取决于实现，而不是规范的一部分。

* * *

在 Java 8 中，[BigInteger javadoc](https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html)添加了一些信息，给出了支持的最小范围和当前实现的实际限制：

> `BigInteger`必须支持`-2`^(`Integer.MAX_VALUE`)(exclusive) 到`+2`^(`Integer.MAX_VALUE`)(exclusive) 范围内的值，并且可能支持该范围之外的值。
> 
> 实现说明：`BigInteger`构造函数和操作在结果超出(exclusive) 到(exclusive)`ArithmeticException`的支持范围时抛出。`-2`^(`Integer.MAX_VALUE`)`+2`^(`Integer.MAX_VALUE`)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-02T15:28:50.430

> 只有当您知道它不是小数并且长数据类型可能不够大时，才会使用 BigInteger。BigInteger 的最大大小没有上限（与计算机上的 RAM 可以容纳的一样大）。

从[这里](http://en.wikibooks.org/wiki/Java_Programming/Math#BigInteger)。

它是使用一个实现的`int[]`：

```
 110       /**
  111        * The magnitude of this BigInteger, in <i>big-endian</i> order: the
  112        * zeroth element of this array is the most-significant int of the
  113        * magnitude.  The magnitude must be "minimal" in that the most-significant
  114        * int ({@code mag[0]}) must be non-zero.  This is necessary to
  115        * ensure that there is exactly one representation for each BigInteger
  116        * value.  Note that this implies that the BigInteger zero has a
  117        * zero-length mag array.
  118        */
  119       final int[] mag; 
```

从[源头](http://www.docjar.org/html/api/java/math/BigInteger.java.html)

来自维基百科文章[任意精度算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)：

> 几种现代编程语言内置了对 bignums 的支持，而其他语言则具有可用于任意精度整数和浮点数学的库。这些实现通常使用可变长度的数字数组，而不是将值存储为与处理器寄存器大小相关的固定数量的二进制位。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-02T15:25:08.313

您要达到的第一个最大值是字符串的长度，即 2 ^(31) -1 位。它比 BigInteger 的最大值小得多，但恕我直言，如果不能打印，它就会失去很多价值。

# c# - Windows 8 应用程序正在调试

> ID：12693274
> 
> 赞同：0
> 
> 时间：2012-10-02T15:21:09.970
> 
> 标签：c#, windows-8

有没有办法检查 app.cs 是应用程序调试或部署的当前状态？

或者问题是我只想在调试应用程序时执行一段代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:51:46.977

您可以像这样简单地使用`#if DEBUG`指令

```
#if DEBUG
    //code here only executes in debug
#endif 
```

因此，如果您想要一些在 DEBUG 中运行的代码和一些在 RELEASE 中运行的代码，您可以这样做：

```
#if DEBUG
    //code here only executes in debug
#else
    //code here only executes in release
#endif 
```

正如 DAKL[解释](https://stackoverflow.com/a/12693774/10779)的那样，您也可以使用 Conditional 属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:49:35.597

您可以为此使用 [ConditionalAttribute("DEBUG")]。

如果您希望仅在调试模式下执行方法，您可以执行以下操作：

```
[ConditionalAttribute("DEBUG")]
public void WriteOnlyInDebug(string message)
{
    Console.WriteLine(message);
} 
```

此方法仅在调试模式下调用。当您在发布模式下构建应用程序时，该方法及其所有调用都将从二进制文件中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:25:52.917

其他答案告诉您如何在运行时检查您的应用程序是否编译为调试版本。如果您想查看是否附加了 Visual Studio（或任何其他调试器）并调试您的应用程序，您可以使用**System.Diagnostics.Debugger.IsAttached**。

# c# - 如何调试误导性的 GDI OutOfMemory 异常？

> ID：12693276
> 
> 赞同：1
> 
> 时间：2012-10-02T15:21:18.897
> 
> 标签：c#, debugging, gdi, out-of-memory, invalidoperationexception

我有一个调整位图大小的函数。这是一个“面包和黄油”操作，我只是从另一个项目中复制了它：

```
private Bitmap ResizeBitmap(Bitmap orig)
{
    Bitmap resized = new Bitmap(this.Xsize, this.Ysize, PixelFormat.Format16bppGrayScale);
    resized.SetResolution(orig.HorizontalResolution, orig.VerticalResolution);
    using (Graphics g = Graphics.FromImage(resized))
    {
        g.DrawImage(orig, 0, 0, resized.Width, resized.Height);
    }
    return resized;
} 
```

但是，我不断收到 OutOfMemory 异常`Graphics g = Graphics.FromImage(resized)`。

我知道，[当涉及到 GDI 时，OutOfMemory 异常通常会掩盖其他问题](https://stackoverflow.com/a/4154958/50151)。我也很清楚，我要调整大小的图像并不大，而且（据我所知）GC 在收集实例时应该没有问题，因为它们离开了当前范围。

无论如何，我已经玩了一段时间了，它目前看起来像这样：

```
private Bitmap ResizeBitmap(Bitmap orig)
{
    lock(orig)
    {
        using (Bitmap resized = new Bitmap(this.Xsize, this.Ysize, PixelFormat.Format16bppGrayScale))
        {
            resized.SetResolution(orig.HorizontalResolution, orig.VerticalResolution);
            using (Graphics g = Graphics.FromImage(resized))
            {
                g.DrawImage(orig, 0, 0, resized.Width, resized.Height);
            }
            return resized;
        }
    }
} 
```

但现在我得到了一个 InvalidOperation 异常`resized.SetResolution(orig.HorizontalResolution, orig.VerticalResolution);`

我厌倦了在黑暗中闲逛。有没有更好的方法来解决这些讨厌的 GDI 操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:31:18.310

从`Graphics.FromImage`方法定义：

> 如果图像具有索引像素格式，则此方法会引发异常并显示消息“无法从具有索引像素格式的图像创建图形对象”。

尽管您得到的异常确实具有误导性，但您正在尝试执行不受支持的操作。看起来您需要将此位图的大小调整为原始内存块，而不是 GDI+ 位图。

# python - 避免 Python 的堆栈

> ID：12693278
> 
> 赞同：4
> 
> 时间：2012-10-02T15:21:39.847
> 
> 标签：python, recursion, artificial-intelligence, iteration, depth-first-search

我正在尝试多种搜索算法来解决广义 AI 问题，其中之一是深度优先搜索。我已经将广度优先搜索、贪心搜索和 A* 搜索从它们的自然递归形式转换为迭代形式，但是在使用深度优先搜索时遇到了更多麻烦`cleanly`（尽管这并不超出我的能力，我我不确定这样做的最pythonic方式，因此问题）。

即使是一些中型问题，我也遇到了 CPython 的 1000 次递归调用限制。后继状态是惰性生成的（`_generate_states`是生成器，不是列表），并且需要从初始状态开始的路径。

从使用调用堆栈到显式堆栈的最 Pythonic 方式是什么？堆栈中应该存储多少信息？回溯时（当没有状态返回非空列表时），从堆栈前面弹出死信息的最佳方法是什么？

```
def dfs(initial, closed_set, goal, capacity):
    if initial == goal:
        return [initial]

    for state in _generate_states(initial, capacity):
        if state not in closed_set:
            result = dfs(state, [initial] + closed_set, goal, capacity)
            if result:
                return [state] + result
    return [] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:20:43.497

这是一个让生成器保持在周围以保留所需惰性属性的解决方案：

```
def dfs(initial, goal, capacity):
    # These three variables form the "stack".
    closed_set = {initial}
    stack = [initial]
    gens = [_generate_states(initial, capacity)]

    while stack:
        cur = stack[-1]
        gen = gens[-1]
        try:
            state = next(gen)
        except StopIteration:
            # This node is done
            closed_set.discard(cur)
            gens.pop()
            stack.pop()
            continue

        if state == goal:
            return stack

        if state not in closed_set:
            closed_set.add(state)
            stack.append(state)
            gens.append(_generate_states(state, capacity))

    return None 
```

Note that the path *is* the stack when the target is located, because the stack is a record of the nodes visited to get to the current node.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:50:55.700

我假设您知道如何使用堆栈迭代地实现 DFS（它与 BFS 基本相同，只是 LIFO 而不是 FIFO），所以我将仅发布一些一般提示。

*   在迭代实现 DFS 时，您应该使用`collections.deque`堆栈，它针对快速追加和弹出元素进行了优化。
*   您绝对应该使用集合`closed_set`而不是列表。（如果您想找到最短路径，也可以使用地图 {state: depth}。）
*   为了跟踪路径，您可以创建一个包装类，封装您的当前状态和对前一个状态的引用（基本上是状态的链接列表），或者使用前驱状态的映射。

但是，不确定在这种情况下如何使用生成器，因此您的堆栈将容纳*深度 x 个分支因子*元素......或者您可以将生成器放在堆栈上，而不是实际的元素？只是一个想法...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:49:27.227

以下是我将如何创建迭代深度优先搜索。它`candidate_states`用作接下来应该探索的状态堆栈。`parents`您可以使用字典重建从任何访问节点到初始节点的路径。

```
def reconstruct_path(state, parents):
    path = []
    while state != None:
        path.append(state)
        state = parents[state]
    path.reverse()
    return path

def dfs(initial, goal):
    visited_states = set()
    candidate_states = [initial]
    parents = {initial: None}
    while len(candidate_states) > 0:
        cur_state = candidate_states.pop()
        if cur_state in visited_states: continue
        if cur_state == goal:
            return reconstruct_path(cur_state, parents)
        for state in _generate_states(cur_state):
            parents[state] = cur_state
            candidate_states.append(state)
    return None 
```

# mysql - 防止查询使用索引

> ID：12693284
> 
> 赞同：1
> 
> 时间：2012-10-02T15:22:05.197
> 
> 标签：mysql, performance, indexing

我有一个查询需要对表中的每条记录进行。我确实有一个条件`WHERE LENGTH(f1)>2` ，它应该进行全表扫描，但它似乎正在使用索引，这使得它实际上更慢。
如何查询不使用特定索引（即 on `f1`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:25:06.837

使用[索引提示](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)：

```
SELECT ...
FROM sometable
IGNORE INDEX (`name_of_index`)
WHERE ... 
```

# android - 页面加载时出现白屏 - 仅限 Android

> ID：12693286
> 
> 赞同：1
> 
> 时间：2012-10-02T15:22:10.687
> 
> 标签：android, html, css, twitter-bootstrap, galaxy

遇到一个开始让我紧张的有趣项目。

在 WelcometoKelowna.com 上工作。在各种设备上进行测试。桌面 + 各种浏览器按预期工作。iOS 设备似乎都在工作。然而，当我在 Galaxy SIII 上进行测试时，发生了一些奇怪的事情。

该页面似乎已加载，但仅显示白屏。然而，只要用户在页面上触摸或滚动 - 它就会立即出现。

还有其他人遇到这个吗？浏览器漏洞？我没有看到它发生在任何其他网站上。我对这个有点难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:54:20.947

有同样的问题并将其归结为使用位置：固定。切换到位置：绝对解决了这个白屏问题。

# sql - 分解 where 子句

> ID：12693288
> 
> 赞同：1
> 
> 时间：2012-10-02T15:22:21.440
> 
> 标签：sql, refactoring, db2, where

我在 DB2 存储过程中有一些 SQL 查询，其中包含非常复杂的 where 子句，这些子句难以阅读、维护，并且无法在不复制和粘贴的情况下跨 select 语句共享。我曾经编写动态 SQL 并将 where 子句的各个部分单独连接起来，这至少使逻辑更清晰。**有没有办法在没有动态 SQL 的情况下做到这一点？**我正在考虑用户定义的函数，但它们太重了，可能太慢了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:53:45.883

如果可以在查询之前确定任何子句（即：基于传递给存储过程的参数），则该子句的结果可以存储在变量中，然后在查询中使用该变量。为了与其他存储过程共享，您可以将其提取到单独的存储过程中。

任何不基于存储过程参数的子句都可以提取到视图中。然后，所有存储过程都可以使用实际参数查询视图。请注意，这可能比单个 SQL 语句慢，特别是如果您可以在连接之前显着缩小表中的行范围。

除此之外，我相信您会坚持使用动态 SQL 或复制/粘贴。

# sql - Liquibase：如何为实时和测试环境配置 failonerror 属性的值

> ID：12693296
> 
> 赞同：0
> 
> 时间：2012-10-02T15:22:41.880
> 
> 标签：sql, sql-server, liquibase

我有一堆变更集要在测试环境中执行。但是当我实时运行这些变更集时，我需要进行设置`failonerror = false`以避免破坏其余变更的部署。有没有办法可以配置这个属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:25:26.100

在 liquibase 中支持的方法是使用[contexts](http://www.liquibase.org/manual/contexts)。这使您能够控制在升级期间运行哪些变更集（及其相关属性，如“failonerror”）。

# java - 如何在用户上传之前比较数据库中的相似图像？（爪哇）

> ID：12693300
> 
> 赞同：1
> 
> 时间：2012-10-02T15:22:42.097
> 
> 标签：java, ajax, json, jsp, servlets

我有一些大问题，我希望有人能帮助我。

我想在用户上传图像之前比较图像。如果该图片在数据库中有相同的图片，用户不能上传。

我知道如何比较两张图片。我的问题是如果这张图片没有上传，我该如何编写代码进行比较。我想第一时间比较一下。如果它没有相同的图像，那么用户可以上传它。

我的英语不好。我希望你能明白我说的话。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:25:20.087

您应该为客户端的图像计算一个 hashCode，并仅将代码与存储在服务器端的图像的 hashCodes 进行比较。我会使用 SHA-1（参见[http://en.wikipedia.org/wiki/SHA-1](http://en.wikipedia.org/wiki/SHA-1)）作为哈希函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:11:36.767

for a first few checks I would try to compare:

*   file metadata stored in your database (if any) like: combination of fileName, filesize and fileFormat

This will help you eliminate some of the cases easily. If the comparison still returns equality then you could go ahead with @dan 's solution

# vb.net - 如何在 VB.net 中的 MouseHover 事件中突出显示 Listview 项？

> ID：12693305
> 
> 赞同：0
> 
> 时间：2012-10-02T15:22:51.997
> 
> 标签：vb.net, listview

如何在 VB.net 中突出显示事件中的`Listview`项目`MouseHover`，就像 Windows 资源管理器一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:24:49.037

将控件的`HoverSelection`属性设置为. 但是，如果您希望它立即被选中，您可以手动实现它。例如，您可以尝试这样的事情：`ListView``True`

```
Private Sub ListView1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles ListView1.MouseMove
    Dim currentItem As ListViewItem = ListView1.GetItemAt(e.X, e.Y)
    For Each item As ListViewItem In ListView1.Items
        item.Selected = False
    Next
    If currentItem IsNot Nothing Then
        currentItem.Selected = True
    End If
End Sub 
```

但是，请确保控件`HideSelection`上的属性`ListView`设置为`False`，否则除非列表具有焦点，否则不会显示选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-03T13:44:13.823

不闪烁：

```
Private Sub ListView1_MouseMove(sender As Object, e As MouseEventArgs) Handles ListView1.MouseMove
    Dim currentItem As ListViewItem = ListView1.GetItemAt(e.X, e.Y)
    For Each item As ListViewItem In ListView1.Items
        If currentItem IsNot Nothing Then
            currentItem.Selected = True
        Else
            item.Selected = False
        End If
    Next
End Sub 
```

# forms - 动态表单构建器还是中间解决方案？

> ID：12693306
> 
> 赞同：0
> 
> 时间：2012-10-02T15:22:53.280
> 
> 标签：forms, coldfusion, metadata, builder

我们有一个提交表单和一个提交管理，能够查看、编辑、删除和导出。

使用 Oracle，提交存储在一个表中，有一个用于存储更改的日志表和两个用于填充 id 的序列。

当请求新表格时，表格和序列的代码被复制重命名和修改以满足新的要求。

由于时间限制，我一直试图一次一点地改进这个过程，我想停止用这么多表填充数据库。

最强大的解决方案是拥有一个表单构建器，它允许您定义字段并使用此元数据构建表单。我在 Mura CMS 中看到过这样的示例，但我还没有找到可以集成的独立解决方案。如果可以的话，我不想花很多时间重新发明轮子。

作为一个中间解决方案，我正在考虑将每个提交存储为 XML 文件的想法，这不是一个非常可扩展的解决方案 - 但是每个表单大约 30 个提交，大约 1-2 个管理员我认为这不会太慢。

如果有人知道我可以使用的表单生成器，我可以与 ColdFusion 集成吗？或者我是否应该考虑 XML 中间解决方案？

我会很感激一些意见！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:37:29.560

如果您不需要连接这些表之间的数据，您可以轻松地抽象它。本质上是构建一个调查工具。根据您想要的抽象级别，您甚至可以允许用户选择预先存在或常见的表单字段（例如电子邮件地址、地址、城市等）

Form（FormID、Title、CreateDate、Active） FormField（FormFieldID、Name、DataType、必填） FormSubmission（FormSubmissionID、FormID、SubmissionDate、IPAddress） FormData（FormSubmissionID、FormFieldID、Data）

如果需要，您可以扩展它以包括验证选项、最大长度和支持数据类型。

可能有复制这个的项目：

[http://soundings.riaforge.org/](http://soundings.riaforge.org/)

[http://postit.riaforge.org/](http://postit.riaforge.org/)

（RIAForge 上有更多基于表单的实用程序）

但我没有用过任何一个来给你一个明智的意见。我不推荐 XML 路由，使用 db 表 + 抽象。

# objective-c - NSString stringWithFormat 和内存管理

> ID：12693313
> 
> 赞同：0
> 
> 时间：2012-10-02T15:23:19.443
> 
> 标签：objective-c, memory-management

有人可以告诉我需要内存管理或 stringWithFormat 是自动释放的。我查看了 Apple Developer 网站上的 NSString 类参考文档，但如果返回字符串副本或者“msg”只是指向自动释放字符串的指针，则看不到任何说明。

```
NSString *msg; //pointer declared in interface

- (id) init
{
  //some initialization code..
  //is 'msg' receiving a copy or just a pointer assign
  msg = [NSString stringWithFormat: @"%@ %@", FName, LName];
} 

- (void) dealloc
{
  //release some vars, properties here..

  [msg release]; //is this correct ????     
  //Or should I be only doing: msg = nil;

  [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:27:34.347

那么第一个问题是你声明的 ivar

```
NSString *msg; 
```

会失去它的价值，因为`[NSSTring stringWithFormat]`根据 Cocoa Memory 规则会返回一个`autoreleased`对象。该规则规定，任何包含 alloc、new 或 copy 的方法名称都将返回一个拥有的对象，即`retain`计数为 1 的对象，这意味着接收者将拥有该对象，任何其他方法都将返回一个自动释放的对象。在你的情况下，如果你这样做了：

```
msg = [[NSString stringWithFormat: @"%@ %@", FName, LName] retain]; 
```

现在您拥有该对象，您可以在 dealloc 中向其发送释放消息

您应该只向您拥有的对象发送释放，即向您发送保留或复制消息的对象，在这种情况下，因为您收到了一个自动释放对象，并且您没有发送保留或复制消息，因此您不能向它发送释放信息。发送释放消息将导致崩溃，因为此时 msg 将指向垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:27:45.040

如果您使用的是 ARC，那么在这种情况下您根本不需要做任何事情。ARC将为您处理。如果您不使用 ARC，那么您的代码可能会崩溃，因为 msg 变量将在运行循环结束时自动释放。

在非 ARC 情况下，您应该使用：

```
msg = [[NSString stringWithFormat: @"%@ %@", FName, LName] retain];

- (void) dealloc
{
   [msg release];
   msg = nil;
   ... 
```

或者更好的是，改用属性。

# php - 将用户标识符传递给 PayPal 的 notify_url

> ID：12693314
> 
> 赞同：2
> 
> 时间：2012-10-02T15:23:30.190
> 
> 标签：php, paypal

我的网站上有一个简单的 PayPal 购买按钮。用户转到贝宝，当他完成购买后，他会自动重定向到我的网站（目前在沙箱上，重定向之前有一个屏幕，上面写着“如果 10 秒后你没有被重定向......”）。另外，我已经在我的服务器上设置了带有 url 的 notify_url 来处理成功的付款。

我有两个问题：

1.  我的网站使用用户登录。所以点击购买按钮的人是已经登录的用户。我的问题是，当我在 notify_url 上处理 paypal IPN 时，确定哪个用户进行了购买的最佳方法是什么？我考虑过根据按钮表单上的用户 ID 设置一个唯一标识符，但我只是找不到文档如何做到这一点。

2.  当用户完成购买时，他应该能够访问某些内容。所以说用户在购买后登陆[http://www.example.com/account](http://www.example.com/account)，我想检查一下数据库，看看他是否真的成功完成了购买。所以我的问题是，我可以确定 notify_url 回调将在用户登陆 /account 之前执行吗？

我真的不希望有成功购买但仍然无法访问的愤怒客户。确保这种情况永远不会发生的最好方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:28:19.530

如果您查看 Paypal 的[IPN 和 PDT 变量页面](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)，您会看到可以使用名为“custom”的字段。其描述：

> **custom**：由您（商家）传递的自定义值。这些是永远不会呈现给客户的传递变量。长度：255 个字符

表格示例：

```
<input type="hidden" name="custom" value="<?php echo $user_id; ?>"/> 
```

在您的 IPN 响应脚本中：

```
$user_id = $_POST['custom']; 
```

# mysql - 在确定的时间安排查询执行

> ID：12693323
> 
> 赞同：0
> 
> 时间：2012-10-02T15:23:58.600
> 
> 标签：mysql, events, process, scheduled-tasks

有没有办法安排在预先定义的时间执行一些查询？...
这是需要做
的事情：假设我有一些查询，我需要在定义的时间执行，并且因此，结果将在缓存中。
比方说，我需要创建一个恶魔/事件/脚本：
如果天等于 2，时间等于凌晨 2:00，

则从书中选择 *；
从用户中选择 *；
...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:27:40.813

您可以使用 MySQL 的[事件调度程序](http://dev.mysql.com/doc/en/events.html)：

```
DELIMITER ;;

CREATE EVENT foo ON SCHEDULE EVERY MONTH STARTS '2012-10-02 02:00:00' DO
BEGIN
    SELECT * FROM books;
    SELECT * FROM users;
END;;

DELIMITER ; 
```

# powershell - 以管理员身份运行 PowerShell 脚本，无需输入密码

> ID：12693327
> 
> 赞同：4
> 
> 时间：2012-10-02T15:24:07.340
> 
> 标签：powershell, uac

我编写了一个脚本，只需运行批处理文件即可在通过 Wi-Fi 或有线 Internet 连接计算机之间进行切换。我写这个是因为我不喜欢每次都输入我的用户名和密码来在两者之间切换。

注意：我必须启用 UAC，所以不幸的是，仅将其关闭不是一种选择。

它查看无线适配器的状态。如果当前已启用，它将关闭无线适配器并启用有线适配器。如果未启用无线，它将启用和禁用有线。这是代码。

```
$adapter = Get-WmiObject -Class Win32_NetworkAdapterConfiguration -Filter IPEnabled=TRUE -ComputerName . | Where-Object {$_.ServiceName -ne "hamachi"}
function wirelessOn
{
    $wireless = Get-WmiObject -Class Win32_NetworkAdapter | Where-Object {$_.Name -like "*Wireless*"}
    $wireless.Disable()
    $wired = Get-WmiObject -Class Win32_NetworkAdapter | Where-Object {$_.Name -like "*gigabit*"}
    $wired.Enable()
}

function wirelessOff
{
    $wired = Get-WmiObject -Class Win32_NetworkAdapter | Where-Object {$_.Name -like "*gigabit*"}
    $wired.Disable()
    $wireless = Get-WmiObject -Class Win32_NetworkAdapter | Where-Object {$_.Name -like "*Wireless*"}
    $wireless.Enable()
}

switch -wildcard ($adapter.description){
    "*wireless*" {
        wirelessOn
    }
    "*gigabit*" {
        wirelessOff
    }
} 
```

不幸的是，这个脚本只有在以管理员身份运行时才能正常运行，因此我编写它的全部原因是没有实际意义的。有没有办法让我无需做任何事情就可以将其提升为管理员权限？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T16:34:01.853

您可以启动一个新的、提升的 PowerShell 进程来运行您的脚本，例如：

```
Start-Process PowerShell -verb runas -ArgumentList '-noexit','-File','path-to-script' 
```

如果您不希望 PowerShell 窗口一直存在，那么请摆脱它，`'-noexit'`但对于调试脚本的启动，它很有用。

如果您有权访问管理员帐户用户名/密码，则可以执行以下操作：

```
# Capture encrypted password once and store to file
$passwd = Read-Host "Enter password" -AsSecureString
$encpwd = ConvertFrom-SecureString $passwd
$encpwd > $path\password.bin

# Afterwards always use this to start the script
$encpwd = Get-Content $path\password.bin
$passwd = ConvertTo-SecureString $encpwd
$cred = new-object System.Management.Automation.PSCredential 'domain\username',$passwd
Start-Process PowerShell -Cred $cred -ArgumentList '-noexit','-File','path-to-script' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-26T07:06:05.103

您可以使用批处理 (.bat) 文件和任务计划程序来执行此操作。

首先，您必须在与 PowerShell .ps1 文件相同的文件夹中创建一个批处理文件（您可以使用记事本），其中包含以下内容：

```
@ECHO OFF
SET ThisScriptsDirectory=%~dp0
SET PowerShellScriptPath=%ThisScriptsDirectory%PutTheNameOfYourPowerShellScriptHere.ps1
PowerShell -NoProfile -ExecutionPolicy Bypass -Command "& {Start-Process PowerShell -ArgumentList '-NoProfile -ExecutionPolicy Bypass -File ""%PowerShellScriptPath%""' -Verb RunAs}"; 
```

打开任务计划程序并单击左侧窗格中的**任务计划程序库。**然后，右键单击**任务计划程序库**并选择**创建任务**（这应该会打开一个窗口）。为您的任务命名并检查是否选择**了以最高权限运行**。然后，单击“**操作**”选项卡并单击“**新建”**（这应该会打开一个窗口）。确认选定的操作是**启动程序**，然后单击**浏览**以选择批处理文件。在两个窗口上单击**确定**，您应该回到主任务计划程序窗口。您应该会在列表顶部看到新创建的任务，因此右键单击它并选择**运行**. 您应该看到您的 PowerShell 脚本以完全管理员权限运行，并且没有任何 UAC 提示。

现在，如果您想定期运行 PowerShell 脚本，您可以通过右键单击新创建的任务、选择**Properties**、单击**Triggers**选项卡并单击**New 来自**定义它。

但是，如果您希望通过双击快捷方式文件来运行 PowerShell 脚本，则必须执行一些额外的步骤。右键单击桌面并选择**新建 > 快捷方式**并输入以下位置：

```
C:\Windows\System32\schtasks.exe /run /tn "PutTheNameOfYourNewlyCreatedTaskHere" 
```

单击**下一步**，为您的快捷方式命名，然后单击**完成**。您应该尝试打开您的快捷方式，看看您的 PowerShell 脚本是否按您的意愿运行。

就这些。

> 奖励：如果您想通过按某个键或组合键来运行 PowerShell 脚本，您也可以右键单击您的快捷方式并在“**快捷键：** ”字段中输入您想要的内容。但是，如果它不允许您输入特定的键或组合键，您也可以安装Microsoft 的**PowerToys**并使用其键盘管理器实用程序重新映射键或组合键。例如。您可以在**快捷键：字段中输入****F8** ，然后将其重新映射到您很少使用的键，例如大多数键盘上的计算器键。
> 
>  **> 如果您在遵循本指南时遇到任何问题，请告诉我。**

# c# - Oracle 和 .NET 中不同的 DES 加密

> ID：12693331
> 
> 赞同：0
> 
> 时间：2012-10-02T15:24:12.687
> 
> 标签：c#, .net, oracle, encryption

出于某种原因，我从使用相同加密密钥的 Oracle`DMBS_CRYPTO`和 .NET 实现中得到了不同的编码结果。`DESCryptoServiceProvider`

对于我正在使用`DBMS_CRYPTO.ENCRYPT`具有以下加密类型的函数的数据库：

```
 encryption_type    PLS_INTEGER := DBMS_CRYPTO.ENCRYPT_DES
                                + DBMS_CRYPTO.CHAIN_CBC
                                +DBMS_CRYPTO.PAD_PKCS5; 
```

数据库功能

```
 FUNCTION encrypt (p_plainText VARCHAR2) RETURN RAW DETERMINISTIC
 IS
    encrypted_raw      RAW (2000);
 BEGIN
    encrypted_raw := DBMS_CRYPTO.ENCRYPT
    (
       src => UTL_RAW.CAST_TO_RAW (p_plainText),
       typ => encryption_type,
       key => encryption_key
    );
   RETURN encrypted_raw;
 END encrypt; 
```

这是 C# 部分：

```
 DESCryptoServiceProvider cryptoProvider = new DESCryptoServiceProvider();
        MemoryStream memoryStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(memoryStream,
            cryptoProvider.CreateEncryptor(bytes, bytes), CryptoStreamMode.Write);
        StreamWriter writer = new StreamWriter(cryptoStream);
        writer.Write(originalString);
        writer.Flush();
        cryptoStream.FlushFinalBlock();
        writer.Flush();
        return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length); 
```

产生不同加密结果的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:29:55.860

.NET 和 Oracle 加密之间存在基本区别。

例如，Oracle 的十六进制默认初始化值 (IV) 是“0123456789ABCDEF”。.NET 的十六进制默认初始化值 (IV) 是“C992C3154997E0FB”。此外，.NET 中有几个填充模式选项：ANSIX923、Zeros、ISO10126、PKCS7 和 None。

在下面的示例代码中，您应该可以不使用用于自定义填充的两行代码，并将填充模式指定为 ANSIX923。我们不得不接受 DBA 的失误，他们决定用波浪号“~”字符填充字符串，所以我包含了代码作为示例，它可以帮助处于类似情况的其他人。

下面是一组适用于我们解决方案的简单方法：

```
 private static string EncryptForOracle(string message, string key)
    {

        string iv = "0123456789ABCDEF";

        int lengthOfPaddedString;
        message = PadMessageWithCustomChar(message, out lengthOfPaddedString);

        byte[] textBytes = new byte[lengthOfPaddedString];
        textBytes = ASCIIEncoding.ASCII.GetBytes(message);

        byte[] keyBytes = new byte[key.Length];
        keyBytes = ASCIIEncoding.ASCII.GetBytes(key);

        byte[] ivBytes = new byte[iv.Length];
        ivBytes = StringUtilities.HexStringToByteArray(iv);
        byte[] encrptedBytes = Encrypt(textBytes, keyBytes, ivBytes);

        return StringUtilities.ByteArrayToHexString(encrptedBytes);
    }

    /// <summary>
    // On the Oracle side, our DBAs wrapped the call to the toolkit encrytion function to pad with a ~, I don't recommend
    // doing down this path, it is prone to error.
    // we are working with blocks of size 8 bytes, this method pads the last block with ~ characters.
    /// </summary>
    /// <param name="message"></param>
    /// <param name="lengthOfPaddedString"></param>
    /// <returns></returns>
    private static string PadMessageWithCustomChar(string message, out int lengthOfPaddedString)
    {
        int lengthOfData = message.Length;
        int units;
        if ((lengthOfData % 8) != 0)
        {
            units = (lengthOfData / 8) + 1;
        }
        else
        {
            units = lengthOfData / 8;
        }

        lengthOfPaddedString = units * 8;

        message = message.PadRight(lengthOfPaddedString, '~');
        return message;
    }

    public static byte[] Encrypt(byte[] clearData, byte[] Key, byte[] IV)
    {
        MemoryStream ms = new MemoryStream();
        // Create a symmetric algorithm.
        TripleDES alg = TripleDES.Create();
        alg.Padding = PaddingMode.None;
        // You should be able to specify ANSIX923 in a normal implementation 
        // We have to use none because of the DBA's wrapper
        //alg.Padding = PaddingMode.ANSIX923;

        alg.Key = Key;
        alg.IV = IV;

        CryptoStream cs = new CryptoStream(ms, alg.CreateEncryptor(), CryptoStreamMode.Write);
        cs.Write(clearData, 0, clearData.Length);
        cs.Close();

        byte[] encryptedData = ms.ToArray();
        return encryptedData;
    } 
```

将这些方法放在静态 StringUtilities 类中：

```
 /// <summary>
    /// Method to convert a string of hexadecimal character pairs
    /// to a byte array.
    /// </summary>
    /// <param name="hexValue">Hexadecimal character pair string.</param>
    /// <returns>A byte array </returns>
    /// <exception cref="System.ArgumentNullException">Thrown when argument is null.</exception>
    /// <exception cref="System.ArgumentException">Thrown when argument contains an odd number of characters.</exception>
    /// <exception cref="System.FormatException">Thrown when argument contains non-hexadecimal characters.</exception>
    public static byte[] HexStringToByteArray(string hexValue)
    {
        ArgumentValidation.CheckNullReference(hexValue, "hexValue");

        if (hexValue.Length % 2 == 1)
            throw new ArgumentException("ERROR: String must have an even number of characters.", "hexValue");

        byte[] values = new byte[hexValue.Length / 2];

        for (int i = 0; i < values.Length; i++)
            values[i] = byte.Parse(hexValue.Substring(i * 2, 2), System.Globalization.NumberStyles.HexNumber);

        return values;
    }   // HexStringToByteArray()

    /// <summary>
    /// Method to convert a byte array to a hexadecimal string.
    /// </summary>
    /// <param name="values">Byte array.</param>
    /// <returns>A hexadecimal string.</returns>
    /// <exception cref="System.ArgumentNullException">Thrown when argument is null.</exception>
    public static string ByteArrayToHexString(byte[] values)
    {
        ArgumentValidation.CheckNullReference(values, "values");

        StringBuilder hexValue = new StringBuilder();

        foreach (byte value in values)
        {
            hexValue.Append(value.ToString("X2"));
        }

        return hexValue.ToString();
    }   // ByteArrayToHexString()

    public static byte[] GetStringToBytes(string value)
    {
        SoapHexBinary shb = SoapHexBinary.Parse(value);
        return shb.Value;
    }

    public static string GetBytesToString(byte[] value)
    {
        SoapHexBinary shb = new SoapHexBinary(value);
        return shb.ToString();
    } 
```

如果您从 .NET 端使用 ANSIX923 填充模式，您的 PL/SQL 代码将如下所示，因为您必须读取最后两个字节以确定填充了多少字节并将它们从字符串中删除，因此您返回原始字符串。

```
create or replace FUNCTION DecryptPassword(EncryptedText IN VARCHAR2,EncKey IN VARCHAR2) RETURN VARCHAR2
IS
encdata RAW(2000);
numpad NUMBER;
result VARCHAR2(100);
BEGIN
  encdata:=dbms_obfuscation_toolkit.DES3Decrypt(input=&amp;gt;hextoraw(EncryptedText),key=&amp;gt;UTL_RAW.CAST_TO_RAW(EncKey));

  result :=rawtohex(encdata);
  numpad:=substr(result,length(result)-1);
  result:= substr(result,1,length(result)-(numpad*2));
  result := hextoraw(result);
  result := utl_raw.cast_to_varchar2(result);
  return result;

END DecryptPassword; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:01:41.293

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.padding%28v=vs.100%29.aspx)，您的 C# 代码使用 PKCS7 的默认填充，而您的 Oracle 代码使用 PKCS5。那可能是一个很好的起点。当您使用它时，您可能也应该明确设置您的块链接模式。

编辑：对不起，PKCS5 和 PKCS7 应该用相同的字节填充明文到相同的长度。可能不是这样。Vincent Malgrat 建议尝试使用纯文本的原始字节来消除编码问题，这听起来像是一个不错的起点。C# 代码会将您的字符串视为 unicode。我认为，在 Oracle 中，它将使用数据库设置的任何编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:53:59.407

问题可能与您使用的密钥的填充有关。检查不同的密钥/不同的填充

# c# - 错误：无法取消注册 ID 为“UpdatePanel1”的 UpdatePanel

> ID：12693337
> 
> 赞同：2
> 
> 时间：2012-10-02T15:24:27.867
> 
> 标签：c#, asp.net, updatepanel

已更新我收到错误消息：无法取消注册 ID 为“UpdatePanel1”的 UpdatePanel，因为它未在 ScriptManager 中注册。如果从控件树中删除 UpdatePanel 并稍后再次添加，则可能会发生这种情况，这是不受支持的。参数名称：更新面板

我在页面上拥有的唯一面板不是动态的，而是在 .aspx 页面上编码的。

问题是我的页面上没有 ID 为“UpdatePanel1”的 UpdatePanel。

此外，当我在 Chrome 中运行时，它工作正常，但是当我在 IE9 中运行时，我得到了这个错误。

我已经有一段时间没有编辑这个页面了，它以前可以工作。

任何帮助，将不胜感激。

更新：我发现在上一页我有UpdatePanel1 和UpdatePanel2。在上一页我正在做一个 server.transfer 到新页面。

调试时它转移到新页面，然后以某种方式返回到原始页面并触发卸载事件（如果我将它们放在更新面板的卸载事件页面中。

这使得无法取消注册面板的错误消失，但是下一页没有加载任何内容，它显示为空白。我逐步完成了这一切，看起来它应该加载所有内容，但我不确定为什么它没有在页面上显示任何内容，如果我查看源代码它没有太多。

注意：我也在使用母版页，脚本管理器在母版页中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:25:05.093

找到解决方案（找到问题的原因）

无论出于何种原因，我的 onsbumit 表单返回 javascript 验证都是问题所在。

我只需要更改 onclientclick 以返回 validate 与我所拥有的 if(validate = false) return false)。

不管是什么原因导致了我所有的问题。

# asp.net-mvc-3 - ASP.NET MVC 3 从谷歌地图保存经纬度

> ID：12693347
> 
> 赞同：0
> 
> 时间：2012-10-02T15:24:59.800
> 
> 标签：asp.net-mvc-3, google-maps

我的视图上有一个谷歌地图。

我希望保存最近添加到地图中的标记的经度和纬度。我的 ViewModel 有一个包含纬度和经度的 Location 对象。

有谁知道我怎么能做到这一点？

以下是代码：

```
function addMarker(location, isdragable) {
    marker = new google.maps.Marker({
    position: location,
    map: _gmMap,
    icon: '../../Content/images/pin-red_32.png',
    draggable: isdragable
    });
$('#mainPlaceHolder_hdnlatlong').val(location.lat() + ',' + location.lng());
markersArray.push(marker);
if (isdragable) {
    google.maps.event.addListener(marker, 'dragend', function () {
    showLocation(marker.getPosition().lat() + ',' + marker.getPosition().lng(), true);
    });
}
$('#spmsg').hide();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T03:55:23.530

假设“保存”应该发生在服务器上，您需要向服务器发出请求。一种方法是使用 jQuery 的 ajax 方法：

客户端 javascript（替换 <...> 以满足您的需要）：

```
function saveLocation()
{
    $.ajax({
        type: "post",
        url: "<Controller>/<Action>",
        data: <serializable form of your Location values>,
        dataType: "json",
        success: <callback>
    });
} 
```

# linux - Puppet 和 Facter 默认系统事实

> ID：12693359
> 
> 赞同：0
> 
> 时间：2012-10-02T15:25:30.957
> 
> 标签：linux, ubuntu, x86-64, ubuntu-12.04, puppet

我对 puppet 还是很陌生，但是我正在用它编写一些部署。

我遇到了一个问题，我无法正确获取符号链接，因为由于某种原因，我发现现有系统文件夹和 puppet ${architecture} 变量不匹配。

我需要以下代码才能按以下方式工作：

在 Ubuntu 12.04 x86_64 上，我应该得到一个来自`/usr/lib/libz.so`to的链接，`/usr/lib/x86_64-linux-gnu/libz.so`但是，我正在安装`/usr/lib/amd64-linux-gnu/libz.so`一个不存在的链接，而不是一个断开的链接。

```
file {"/usr/lib/libz.so":
    ensure => link,
    target => "/usr/lib/${architecture}-linux-gnu/libz.so",
} 
```

Puppet 使用 Facter 获取系统事实，并在我的命令行上运行 facter 我得到以下信息：

```
root@somehost:/root# facter
architecture => amd64
facterversion => 1.6.5
hardwareisa => x86_64
(....) 
```

运行`lscpu`我得到：

```
root@tsomehost:/root# lscpu 
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
(....) 
```

我的问题是，Facter 从哪里得到它的事实？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:18:48.010

Facter 文档现在包括有关[如何解决核心事实的](http://docs.puppetlabs.com/facter/1.6/core_facts.html)文档。

*   [架构](http://docs.puppetlabs.com/facter/1.6/core_facts.html#architecture)使用 hardwaremodel，它调用`uname -m`然后在 Debian 上转换`x86_64`为`amd64`
*   [硬件](http://docs.puppetlabs.com/facter/1.6/core_facts.html#hardwareisa)调用`uname -p`

`$hardwaremodel`可能是您想要的，但是我认为如果您使用具有 32 位用户空间的 64 位内核，它将返回 x86_64，这可能不适合您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:32:02.547

你的 Puppet 和 Facter 版本是什么？

也许你有一个 < 1.6.5 Facter 版本，因此有这个错误：[http ://projects.puppetlabs.com/issues/11511](http://projects.puppetlabs.com/issues/11511)

如果可以，请尝试升级。

# visual-studio-2010 - Can an MVC 4.5 template be installed into Visual Studio 2010?

> ID：12693362
> 
> 赞同：1
> 
> 时间：2012-10-02T15:25:36.240
> 
> 标签：visual-studio-2010, asp.net-mvc-4, visual-studio-2012, entity-framework-5

All the demos and documentation I've seen online about Entity Framework 5 have been using Visual Studio 2012\. Is there any way to use Entity Framework 5 from Visual Studio 2010? If so, do I need to use MVC4.5 or can I use an MVC4 project template still?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:42:37.087

From [the EF Blog](http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx)

> **Compatibility**
> 
> This version of the NuGet package is fully compatible with Visual Studio 2010 and Visual Studio 2012 and can be used for applications targeting .NET 4.0 and 4.5.
> 
> **Some features are only available when writing an application that targets .NET 4.5**. This includes enum support, spatial data types, table-valued functions and the performance improvements.

I was able to add EF5 to an MVC4 project through NuGet. You can certainly use [MVC 4](http://channel9.msdn.com/Shows/Web+Camps+TV/Rowan-Miller-Demonstrates-Entity-Framework-5-Using-ASPNET-MVC-4), you just won't get all the new features unless you're on VS2012.

# java - 向 MapViewController.zoomToSpan() 添加填充

> ID：12693370
> 
> 赞同：0
> 
> 时间：2012-10-02T15:26:05.743
> 
> 标签：java, android, google-maps

我有一个 MapView，我在上面调用 getController().zoomToSpan()。我对 zoomToSpan() 的问题是我希望在地图图钉之外有一个一致的（例如，15dp）填充，以便可以选择它们而无需用户捏合来缩小。目前我正在使用地图引脚的最小/最大长/纬度填充 zoomToSpan()，因此边缘上的那些不会立即可见或可选择。

我考虑过使用固定的长/纬度填充，但我不能保证地图图钉不会太近或太远。因此，虽然固定的长/纬度填充可能适用于大多数情况，但它不适用于所有情况。

这就是我当前设置 zoomToPan() 的方式：

```
mapView.getController().zoomToSpan(MapPoint.convertToGeoPoint(Math.abs(fMinLat - fMaxLat)), MapPoint.convertToGeoPoint(Math.abs(fMinLong - fMaxLong))); 
```

这是我对如何设置它的一个想法，但我不确定它是否真的解决了问题，或者是否有更好的方法来做到这一点：

```
mapView.getController().zoomToSpan(MapPoint.convertToGeoPoint((float) (Math.abs(fMinLat-fMaxLat) + (Math.abs(fMaxLat - fMaxLat)) * 0.5)), MapPoint.convertToGeoPoint((float) (Math.abs(fMinLong-fMaxLong) + (Math.abs(fMinLong - fMaxLong) * 0.5)))); 
```

我已经检查了这些问题，但我已经过了让它工作的点；我只是想让它变得优美： [zoomToSpan implementation problem](https://stackoverflow.com/questions/5852368/zoomtospan-implementation-problem)和[Calculating zoomToSpan() degree based on min/max lat/lng to be in the mapView](https://stackoverflow.com/questions/2839978/calculating-zoomtospan-degrees-based-on-min-max-lat-lng-to-be-in-the-mapview)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:22:55.847

您的解决方案应该可以正常工作。请注意，您在“(Math.abs(fMaxLat - fMaxLat)) * 0.5)”中有错字。您使用了两次“fMaxLat”。

你可以写成更简单的形式：

```
mapView.getController().zoomToSpan((int)(Math.abs(fMinLat-fMaxLat) * 1.5), (int)(Math.abs(fMinLong-fMaxLong) * 1.5)); 
```

然后，您可以尝试 1.0 和 1.99 之间的不同乘法值，看看哪个更能达到您的期望。

Also keep in mind that zoom always change in steps (is not progressive) of powers of 2, meaning it will double the zoom or it will reduce to half. The final result achieved will vary with different points in the map, which can fit closely to a zoom value and very distante from the edge on previous one.

# c# - 如何访问/创建 C# xsd 自动生成的字段

> ID：12693375
> 
> 赞同：0
> 
> 时间：2012-10-02T15:26:27.923
> 
> 标签：c#, xsd

我有一组由 XSD.exe 从 XSD 生成的类。我试图通过从 CSV 文件中读取数据来动态填充这些类上的一些字段。我遇到的问题是，任何代表其他生成的类的属性在创建根对象时都没有实例化，所以它们只是空的。

因此，例如，如果我创建一个具有 Sub_Message 类型的属性“field1”的根文档 Main_Message 的实例“doc”，则 doc.field1 为空，因此如果我尝试设置 doc.field1.name，我将得到一个异常.

我对如何解决这个问题的第一个想法是对这些对象属性进行读取时创建。由于生成的类是部分类，我可以为每个生成的类手动执行此操作，修改属性 getter。但是我真的很想避免这种方法。有很多生成的类，我不想在 XSD 更改时维护我的修改版本。

我的下一个想法是在读取 CSV 数据的代码中的类外部执行读取时创建。我将首先读取该属性，如果它为空，则创建该类的一个实例并将其分配给该属性，然后在该属性上设置该字段。但是我不知道该怎么做。我可以使用 Activator.CreateInstance(propertyType) 创建类的实例，但这会返回一个基本对象引用，如果没有强制转换，我无法将其分配给属性。但是我在编译时没有类型名称，所以我不能做那个演员。

所以我试图弄清楚如何处理这些生成的类以从 CSV 文件中读取字段值并填充文档对象上的字段，然后使用它们来创建 XML。我现在很困惑如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:28:33.140

好的，经过大量搜索，我找到了一个可行的解决方案。

```
public static T Cast<T>(object o)
{
  return (T)o;
}

obj = Activator.CreateInstance(prop.PropertyType);
MethodInfo castMethod = typeof(MainClass).GetMethod("Cast").MakeGenericMethod(prop.PropertyType);
prop.SetValue(parent, castMethod.Invoke(null, new object[] { obj }), null); 
```

所以我能够在运行时根据需要创建和分配属性。

# web-services - 从传递参数的控制台应用程序调用 Web 服务

> ID：12693382
> 
> 赞同：0
> 
> 时间：2012-10-02T15:26:57.150
> 
> 标签：web-services, windows-services, console-application

我正在尝试找出按计划调用 Web 服务的最佳方法。我做研究的时间比我想承认的要长，只是需要一些关于最好的方法以及如何开始的想法。

我有一个 asmx Web 服务，我需要每天早上在特定时间调用它，以在我的应用程序中运行一些导入过程。我不需要向它传递任何东西，也不需要（必然）从 Web 服务中获取任何结果。

我在 Internet 上找到的很多东西都是较旧的技术，我无法在我的 .NET 4.0/4.5 应用程序中实现这些技术。我完全迷失了，只需要一些方向来确保我不会完全错了。我一直在使用 Web 应用程序，从未对 Windows 服务或类似的东西做过任何事情。

我正在研究 Windows 服务，但没有任何运气。在我与他们战斗之前，我想确保我什至朝着正确的方向前进。我需要做的就是从 Windows 应用程序/服务/等按计划调用此 Web 服务。

想法？

编辑**

好的，暂时我决定使用控制台应用程序并让一个工作来调用 Web 服务。我知道我最初说过我不关心将参数传递给 Web 服务，但现在我决定这将是一个很好的补充。

这是我目前拥有的，但我无法弄清楚如何为我的生活传递参数。

```
 Dim sSource As String
    Dim sLog As String
    Dim sEvent As String

    sSource = "Import Project Information"
    sLog = "Application"
    sEvent = "Import Started"

    If Not EventLog.SourceExists(sSource) Then
        EventLog.CreateEventSource(sSource, sLog)
    End If

    EventLog.WriteEntry(sSource, sEvent, EventLogEntryType.Information, 0)

    Dim WebService As New Web_Service.ImportProjectInfo
    Dim results As Boolean = WebService.Import()
    Console.WriteLine(results)

    If results = True Then
        sEvent = "Import Successful"
        EventLog.WriteEntry(sSource, sEvent, EventLogEntryType.SuccessAudit, 1)
    Else
        sEvent = "Import Failed"
        EventLog.WriteEntry(sSource, sEvent, EventLogEntryType.FailureAudit, 999)
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:39:47.703

尝试使用 Windows 任务计划程序，它有许多用于计划的选项，例如系统启动、在计划的时间等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:37:33.943

让我们发疯的是简单的东西！！！！！！

在找到传递这些参数的方法之前，我不想更改我的 Web 服务来添加参数。我没有意识到我正在编写的代码知道我在 Web 服务中还没有这些参数。一旦我将它们添加到网络服务中，我就可以毫无问题地通过......

在我终于意识到这一点后不久，Ashish Gupta 最终在其中一条评论中提到了这一点。现在我很尴尬地承认这一点，因为这个问题给我带来了很多麻烦......和工作。

基本上通过在更新 Web 参考后执行此操作。

```
Dim results As Boolean = WebService.Import("something to pass", "something else") 
```

回到我最初的问题，我也最终切换到了 Windows 服务，一旦我解决了所有问题，我很高兴。在我看来，它是最强大的选项，具有最简单的设置/便携性。

# iis - 服务器端包括无法在 Windows 2008/IIS 7 上运行

> ID：12693383
> 
> 赞同：3
> 
> 时间：2012-10-02T15:27:07.940
> 
> 标签：iis, server-side-includes

我们有一个运行 IIS7 的 Windows 2008 Web 服务器，尽管遵循了我们能找到的所有说明，但似乎无法让 ServerSideIncludes 工作。以下是我们已完成的步骤：

1.  在 IIS 7 中启用的 SSI
2.  确认的 ServerSideIncludes 在应用程序开发下显示为“已安装”
3.  在“添加映射模块”中添加 *.html 作为映射
4.  在我们的网站中创建“inc”文件夹来保存所有包含的文件，并将该文件夹设置为对脚本具有“执行”权限。
5.  将此代码添加到 web.config 文件以确保启用 SSI：

    ```
    <location path="/webs/[ourwebname]">
       <system.webServer>
          <serverSideInclude ssiExecDisable="false" />
       </system.webServer>
    </location> 
    ```

6.  将这行代码添加到我的 default.html 文件以提供包含的内容：

    ```
    <!-- #include file = "/inc/myfile.html" --> 
    ```

当我将 default.html 上传到我们的服务器并在浏览器中查看它时，文件会显示，但包含的内容不会出现。当我查看该页面的源代码时，它会将上面的代码显示为 HTML 注释并且没有执行代码？

另外，如果我将扩展名更改为 .shtml 并将该文件上传到我们的服务器，然后在浏览器中查看它，我会收到“错误 404 - 找不到文件”错误？

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:55:13.187

如果你按照这封信，它会工作。

[IIS 7 服务器端包括](http://tech.mikeal.com/blog1.php/server-side-includes-for-html-in-iis7)

为我做了第一次尝试。

从你上面的步骤听起来你跳过了一步：

从模块下拉列表中选择“ServerSideIncludeModule”

请求路径：*.html

模块：ServerSideIncludeModule

可执行文件：空白

名称：SSI-html

# .htaccess - 使用 .htaccess 重定向移动设备 // 排除 IPAD

> ID：12693388
> 
> 赞同：0
> 
> 时间：2012-10-02T15:27:34.320
> 
> 标签：.htaccess, mobile

我在我的 .htaccess 中使用此代码来重定向移动设备。目前，iPad 也是一种移动设备。如何更改此设置，以便 ipad 不会重定向到移动版本？

谢谢！

```
RewriteEngine on
RewriteBase /
# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:www.website.com]

# Check if this looks like a mobile device
# (You could add another [OR] to the second one and add in what you
#  had to check, but I believe most mobile devices should send at
#  least one of these headers)
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]

# Check if we're not already on the mobile site
RewriteCond %{HTTP_HOST}          !^m\.
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE}        !^.*mredir=0.*$ [NC]

# Now redirect to the mobile site
RewriteRule ^ http://m.website.com [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:03:48.280

你能不能在检查移动设备之前运行这个

```
 RewriteCond %{HTTP_USER_AGENT} ^.*iPad.*$
 RewriteRule ^(.*)$ [domain-name] 
```

来源：[http ://www.xpertdeveloper.com/2012/02/detect-ipad-htaccess/](http://www.xpertdeveloper.com/2012/02/detect-ipad-htaccess/)

# android - 通过 UDP 数据包从 android 设备发送 mp4 文件

> ID：12693389
> 
> 赞同：1
> 
> 时间：2012-10-02T15:27:34.220
> 
> 标签：android, udp

我有 android 中 udp 套接字的基本知识，我已经将文本字符串从我的 android 手机发送到 pc（我有一个 java 程序来接收它），但我不知道如何通过 UDP 套接字发送 3gp 歌曲?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:32:06.440

打包数据以便您可以通过网络发送数据的一般方法称为[序列化](http://en.wikipedia.org/wiki/Serialization)。

最常见的库是[Boost.serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)和[Google Protobuf](https://developers.google.com/protocol-buffers)。

# python - 在没有 if 的情况下在循环中查找 Max Term

> ID：12693394
> 
> 赞同：1
> 
> 时间：2012-10-02T15:27:50.220
> 
> 标签：python, loops, if-statement, max

我看了看，找不到我的问题的答案，所以就在这里。我写了一个循环，输出不同频率的额定功率。最大额定功率位于环路输出的中间位置。我需要通过在它旁边打印 max 来指示哪个是最大的。但是，我受到限制，不允许使用 if 条件。我将如何让我的程序确定最大的输出并用文本标记它？我正在使用python。

```
while frQncy < 24.0:                                                             
    TERAHZ_TO_HZ = frQncy * 10.0**12                                              
    v_ = TERAHZ_TO_HZ                                                                 
    I_ = ((2.0 * h_ * v_**3) / (c_**2)) * (1.0/(math.exp((h_ * v_) / (k_ * Tk))-1.0))   
    print "Frequency: %.3g Spectral Radiance: %.4E" % (frQncy, I_)                       
    frQncy += 0.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:35:14.620

您可以将所有频率放入可迭代中并使用内置的[max() 函数](http://docs.python.org/library/functions.html#max)

# c# - 我将如何加载网络适配器来测试 PerformanceMonitor API？

> ID：12693395
> 
> 赞同：1
> 
> 时间：2012-10-02T15:28:01.823
> 
> 标签：c#, unit-testing, load-testing

`PerformanceMonitor`我有一个类，它包含有关网络接口统计信息的各种调用。我在手动将大文件复制到共享驱动器以测试计算视频点播带宽、利用率等的调用时运行了测试。显然不理想。

我怎样才能自动执行此操作，或者是否有某种工具/模拟器可以访问网卡，以便我可以在负载下运行测试，从而产生正确的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:46:27.700

对我来说，这听起来不像是单元测试。通常情况下，诸如数据库和硬件位之类的东西会在单元测试中被模拟/伪造/存根，并提供“假”结果。

恐怕很难用给定的信息更具体，但在你的情况下，我会寻找一种方法来提供一个假的 PerfMon API，它返回硬编码的值。测试 PerfMon API 本身没有任何价值，因此创建一个假实现并使用它来测试您的代码是否对这些值做出正确的响应。

# javascript - 如何使用 StatusBarNotification Phonegap 插件实现 callOnclickByTag？

> ID：12693397
> 
> 赞同：0
> 
> 时间：2012-10-02T15:28:02.043
> 
> 标签：javascript, android, cordova, android-intent, phonegap-plugins

有谁知道如何调用 StatusBar Notification Phonegap 插件的 onclick 处理程序？我创建的通知显示在我的状态栏中，但我想在状态栏中的项目上创建一个单击事件。我的代码目前如下所示：

```
window.statusBarNotification.notify('title', {
   body: 'body message',
   tag: 'download',
   onclick: function() {
     // handle click
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:00:31.270

我终于弄清楚了onclick。在插件 js 中，notify 方法如下所示：

```
NotificationMessenger.prototype.notify = function(title, body) {
    if (window.Notification) {
        this.activeNotification = new window.Notification(title, {
            body: body
        });
    }
} 
```

我修改它看起来像这样：

```
NotificationMessenger.prototype.notify = function(title, options) {
    if (window.Notification) {
        this.activeNotification = new window.Notification(title, options);
    }
} 
```

现在我在原始问题中的代码有效。

# gradle - 删除多项目 gradle build 中的中间目录

> ID：12693398
> 
> 赞同：3
> 
> 时间：2012-10-02T15:28:14.657
> 
> 标签：gradle

在多项目构建中，我有一个“模块”目录，其中包含多个子项目。

我不想`A`通过引用子项目，而是将其引用为.`project(':modules:A')``project(':A')`

是否可以告诉 gradle 消除项目结构中的“模块”目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:17:50.113

您可以通过操作 settings.gradle 文件来做到这一点。您必须手动配置“：A” settings.gradle 文件的位置：

```
project(":A").projectDir = new File(settingsDir, "modules/A") 
```

您还可以通过遍历所有子项目来更通用地做到这一点

```
rootProject.children.each {project ->
....
} 
```

# iphone - UITableView 点击取消选择单元格

> ID：12693402
> 
> 赞同：27
> 
> 时间：2012-10-02T15:28:28.220
> 
> 标签：iphone, ios, uitableview

我有一个`UITableViewCell`在点击时被选中的。在此选中状态期间，如果用户再次点击单元格，我希望取消选中该单元格。

我找不到任何被击中的代表呼叫。任何想法如何实现这一点？它真的会成为手势识别器吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-05-17T13:45:08.027

您实际上可以使用委托方法执行此操作`willSelectRowAtIndexPath:`

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if ([cell isSelected]) {
        // Deselect manually.
        [tableView.delegate tableView:tableView willDeselectRowAtIndexPath:indexPath];
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        [tableView.delegate tableView:tableView didDeselectRowAtIndexPath:indexPath];

        return nil;
    }

    return indexPath;
} 
```

请注意，它`deselectRowAtIndexPath:`不会自动调用委托方法，因此您需要手动进行这些调用。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-11-05T22:48:22.280

在斯威夫特 4 中：

```
func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath? {

    if let indexPathForSelectedRow = tableView.indexPathForSelectedRow,
        indexPathForSelectedRow == indexPath {
        tableView.deselectRow(at: indexPath, animated: false)
        return nil
    }
    return indexPath
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-11T22:04:49.170

使用“多选”模式时，单击已选中的行时不会调用“didSelectRowAtIndexPath”。在“单选”模式下，仍然可以以编程方式选择多行，并且这些行将在所有点击时触发 didSelectRowAtIndexPath。

只是提醒任何遇到同样问题的人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-19T12:09:49.423

这是一个更清洁的解决方案：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[tableView indexPathForSelectedRow] isEqual:indexPath]) {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        return nil;
    }
    return indexPath;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-08T07:39:21.610

保留单选模式，但覆盖以下函数，如下所示：

```
override func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath? {
    if tableView.indexPathsForSelectedRows?.contains(indexPath) ?? false {
       tableView.deselectRow(at: indexPath, animated: true)
       return nil
    }

    return indexPath
}

override func tableView(_ tableView: UITableView, willDeselectRowAt indexPath: IndexPath) -> IndexPath? {
    return nil
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-02T15:53:11.587

我认为使用蓝色选择颜色进行切换可能会给人一种奇怪的印象。为什么不使用复选标记之类的配件？这是一种更熟悉的选择切换技术（无论是多单元格还是单单元格）。

有关信息，请参阅此答案： [UITableView 多选](https://stackoverflow.com/questions/3040894/uitableview-multiple-selection)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-12T09:07:56.030

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if ([cell isSelected]) {
        // Deselect manually.
        if ([tableView.delegate respondsToSelector:@selector(tableView:willDeselectRowAtIndexPath:)]) {
            [tableView.delegate tableView:tableView willDeselectRowAtIndexPath:indexPath];
        }
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        if ([tableView.delegate respondsToSelector:@selector(tableView:didDeselectRowAtIndexPath:)]) {
            [tableView.delegate tableView:tableView didDeselectRowAtIndexPath:indexPath];
        }
        return nil;
    }

    return indexPath;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-02T15:49:44.883

当您选择一个单元格时，将触发此委托方法。

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        UITableViewCell *theUITableViewCell = [tableView cellForRowAtIndexPath:path];
        if (theUITableViewCell.selected == YES){
            self.tableView deselectRowAtIndexPath:<#(NSIndexPath *)#> animated:<#(BOOL)#>
            // Do more thing
        }else{
            // By default, it is highlighted for selected state
        }

 } 
```

是伪代码。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-19T05:30:48.213

你可以试试这个，它对我有用（单选或多选）：

A. 在 vi​​ewDidLoad 中分配一个私有 NSMutableArray，例如：

```
@interface XXXViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    NSMutableArray * selectedZoneCellIndexPaths;
}

- (void)viewDidLoad
{
    selectedZoneCellIndexPaths = [[NSMutableArray alloc] init];
} 
```

B. 在 UITableViewDelegate didSelectRow 添加以下行

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

     for (NSIndexPath * iter in selectedZoneCellIndexPaths)
     {
         if (indexPath.section == iter.section && indexPath.row == iter.row)
         {
             [tableView deselectRowAtIndexPath:indexPath animated:YES];
             [selectedZoneCellIndexPaths removeObject:iter];
             return;
         }
     }
     [selectedZoneCellIndexPaths addObject:indexPath];
     return;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-03T05:46:41.560

来自@prisonerjohn，如果有人想知道如何检查代表是否像@Patrick 所说的那样在**Swift 3**中响应选择器：

```
override func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath? {
    guard let cell = tableView.cellForRow(at: indexPath) else {
        // Handle invalid cell
        ...
    }

    if cell.isSelected {
        if let respond = tableView.delegate?.responds(
            to: #selector(tableView(_:willDeselectRowAt:))),
            respond == true {
            tableView.delegate?.tableView!(tableView, willDeselectRowAt: indexPath)
        }

        tableView.deselectRow(at: indexPath, animated: true)

        if let respond = tableView.delegate?.responds(
            to: #selector(tableView(_:didDeselectRowAt:))),
            respond == true {
            tableView.delegate?.tableView!(tableView, didDeselectRowAt: indexPath)
        }

        return nil
    }

    return indexPath
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-08T03:36:42.450

斯威夫特 5。

在 中`UITableViewDelegate`，很简单如下：

```
func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    tableView.deselectRow(at: indexPath, animated: true)
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-11-26T01:04:20.800

斯威夫特版的囚犯约翰的回答：

```
public func tableView(tableView: UITableView, willSelectRowAtIndexPath indexPath: NSIndexPath) -> NSIndexPath? {
  let cell = tableView.cellForRowAtIndexPath(indexPath)
  if (cell?.selected ?? false) {
    // Deselect manually.
    tableView.delegate!.tableView?(tableView, willDeselectRowAtIndexPath: indexPath)
    tableView.deselectRowAtIndexPath(indexPath, animated: true)
    tableView.delegate!.tableView?(tableView, didDeselectRowAtIndexPath: indexPath)
    return nil
  }
return indexPath;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-04-08T18:25:42.057

我也在追求同样的事情，但@oculus 的[回答](https://stackoverflow.com/questions/12693402/uitableview-tap-to-deselect-cell/12693827#12693827)为我提供了我所缺少的提示。

它使我意识到完成此操作的方法是允许在表格视图中进行多项选择，并在使用其中一种委托方法选择新行时手动取消选择先前选择的行。

在单选模式下，表格视图试图尽可能多地选择一行，因此在点击选定行时不会取消选择，这似乎很自然。

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2012-10-03T07:27:57.743

也许我的问题不够具体，但是这两个答案与我所追求的有点宽泛。

这似乎是不可能的，我使用单元格的手势识别器来手动设置选中/未选中状态。

# javascript - D3 交叉过滤器基本示例

> ID：12693403
> 
> 赞同：11
> 
> 时间：2012-10-02T15:28:30.513
> 
> 标签：javascript, csv, d3.js, svg, crossfilter

我刚刚被介绍到 D3 并且非常喜欢[crossfilter 库](http://square.github.com/crossfilter/)。我想生成类似的东西，但不是他们的航班数据，而是格式为：行、列、值的 CSV 数据。

我只想要一个显示值的直方图，以及一个按值字段排序的表。

很难理解他们的例子中发生了什么。

有人可以建议或展示一个非常基本的例子吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-10T16:27:52.320

我遇到了一个很棒的图书馆，可以为我做这件事。

[dc.js](http://nickqizhu.github.com/dc.js/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-24T12:33:28.033

到目前为止，我遇到的交叉过滤器的最佳“非常基本”示例来自财富前沿工程博客上的一篇文章。
[使用 Crossfilter 探索您的多元数据](https://eng.wealthfront.com/2012/09/05/explore-your-multivariate-data-with-crossfilter/)

*   [旧文章中的小提琴](http://jsfiddle.net/hitch17/vSUte/) `includes full code`

这里还有一个相对直接的例子：http:
[//bl.ocks.org/phoebebright/3822981](http://bl.ocks.org/phoebebright/3822981)
[http://bl.ocks.org/phoebebright/raw/3822981/](http://bl.ocks.org/phoebebright/raw/3822981/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T21:42:53.380

这个页面有一些很好的入门教程。[https://github.com/mbostock/d3/wiki/Tutorials](https://github.com/mbostock/d3/wiki/Tutorials)

D3 的学习曲线非常陡峭，在理解交叉过滤器示例之前，您需要了解以下示例：

*   d3.selectAll
*   d3.nest（如何将平面数据列表转换为结构）
*   select.transition
*   等等

前 7 个教程由 D3 作者编写，它将教您这些基本概念。（第二个是最直观的） Scott Murray 的例子很容易理解，相比原来的例子，似乎学起来更快。Christophe Viau 的教程简短易学，但不一定涵盖足够的细节。

我也是 D3 的新手，但发现这个库非常聪明和强大。祝你好运

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-23T20:58:24.923

希望这个提供了一个非常基本的示例的链接将帮助任何绊倒的人：[非常简单的 JS Fiddle 示例](http://jsfiddle.net/wc8ba/283/)

```
 var data = crossfilter([
        {date: "2011-11-14T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab"},
        {date: "2011-11-14T16:20:19Z", quantity: 2, total: NaN, tip: 100, type: "tab"},
        {date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa"},
        {date: "2011-11-14T16:30:43Z", quantity: 2, total: 90, tip: 0, type: "tab"},
        {date: "2011-11-14T16:48:46Z", quantity: 2, total: 90, tip: 0, type: "tab"},
        {date: "2011-11-14T16:53:41Z", quantity: 2, total: 90, tip: 0, type: "tab"},
        {date: "2011-11-14T16:54:06Z", quantity: 1, total: NaN, tip: null, type: "cash"},
        {date: "2011-11-14T17:02:03Z", quantity: 2, total: 90, tip: 0, type: "tab"},
        {date: "2011-11-14T17:07:21Z", quantity: 2, total: 90, tip: 0, type: "tab"},
        {date: "2011-11-14T17:22:59Z", quantity: 2, total: 90, tip: 0, type: "tab"},
        {date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: null, type: "cash"},
        {date: "2011-11-14T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa"}]);

    try {
        var total_dimension = data.dimension(function(d) { return d.total; });
    var na_records = total_dimension.filter(90).top(Infinity);
    var elRecords = $('ul#records'); 
    elRecords.empty();
    for (var i = 0; i < na_records.length; i++) {
        $('<li>', { text : na_records[i].total}).appendTo(elRecords);   
    }
} catch (e) {
    console.log(e);
} 
```

对于图表，我还推荐使用[dc.js](http://nickqizhu.github.io/dc.js/)库进行快速原型设计，因为它具有原生的 Crossfilter 支持。

看起来没有人**真正**解决了问题的“基本示例”部分。除了一些 RTFM 类型的链接之外。我同意这一点很重要，但如果人们像我一样，那么他们希望在投入大量时间在基础上之前，快速制作原型作为技术评估的一部分。

# iphone - main.m 中的 iOS 错误 — “程序收到“SIGABRT”

> ID：12693406
> 
> 赞同：1
> 
> 时间：2012-10-02T15:28:38.950
> 
> 标签：iphone, xcode, sigabrt

我是 xcode 4.5 的新手

我正在开发一个应用程序，它因*运行时错误* **SIGABRT**而停止。

这是 main.m 文件中发生错误的代码...

```
// ***********************************************************
//  main.m
//  ex21
//

#import <UIKit/UIKit.h>

#import "ex21AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([ex21AppDelegate class]));

        //Login *login1 = [[Login alloc]init];
        //[login1 setLoginid:@"Sam"];
        //[login1 setPassword:ca@"test1"];
        //NSLog(@"Login ID = %@, Password = %@",[login1 loginid], [login1 password]);

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([ex21AppDelegate class]));

    }
}

// ***********************************************************
//  ex21AppDelegate.h
//  ex21
//

#import <UIKit/UIKit.h>

@interface ex21AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end

// ***********************************************************
//  ex21AppDelegate.m
//  ex21
//

#import "ex21AppDelegate.h"

@implementation ex21AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end

// ***********************************************************
//  ex21MainMenu.h
//  ex21
//

#import <UIKit/UIKit.h>

@interface ex21MainMenu : UIView {

}

-(IBAction)hyperlink;

@end

// ***********************************************************
//
//  ex21MainMenu.m
//  ex21
//

#import "ex21MainMenu.h"

@implementation ex21MainMenu

- (IBAction)hyperlink {
    [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://www.google.com"]];

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end

// ***********************************************************
//  ex21ViewController.h
//  ex21
//

#import <UIKit/UIKit.h>

@interface ex21ViewController:  UITableViewController

@end

// ***********************************************************
//  ex21ViewController.m
//  ex21
//

#import "ex21ViewController.h"

@interface ex21ViewController ()

@end

@implementation ex21ViewController

- (IBAction)doneWithKeyboard:(id)sender {
    [sender resignFirstResponder];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

**我阻止上面的代码导入下面的代码，因为我决定不使用它。**

```
// ***********************************************************
//  Login.h
//  ex21
//

#import <Foundation/Foundation.h>

@interface Login : NSObject

@property (nonatomic, strong) NSString *loginid;
@property (nonatomic, strong) NSString *password;

- (id)initWithLoginID:(NSString *)loginid
             password:(NSString *)password;
@end

// ***********************************************************
//  Login.m
//  ex21
//

#import "Login.h"

@implementation Login

@synthesize loginid = _loginid;
@synthesize password = _password;

- (id)initWithLoginID:(NSString *)loginid
             password:(NSString *)password
{
    self = [super init];
    if (self != nil){
        _loginid = loginid;
        _password = password;
    }
    return self;
}
@end 
```

========================================

*异常状态寄存器*指出以下内容：

*   **rapno**（无符号整数）
*   **错误**（无符号整数）
*   **faultvaddr**（无符号整数）

有谁知道发生了什么？

# python - 在 QWidget 实际被销毁时 执行代码，而不仅仅是关闭

> ID：12693407
> 
> 赞同：1
> 
> 时间：2012-10-02T15:28:45.630
> 
> 标签：python, qt, pyqt, destroy

我创建了一个自定义`QDialog`类并覆盖了`closeEvent`只是隐藏对话框，因为它是另一个小部件的子级。我的对话框只能在其父级关闭时关闭，而不是在它被接受、拒绝或用户单击关闭按钮时关闭。

这一切都很好，但现在我需要打开一个到数据库的连接，并且只有在对话框被破坏时才关闭它，而不仅仅是在它关闭时。

我的代码：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys

def Log_Closed():
    print "Bye bye"

class My_dlg(QDialog):
    def __init__(self, parent=None):
        QDialog.__init__( self, parent )

        #self.conn = open_connection()
        print "Connection Opened"

        close_btn  = QPushButton("Actually Close")
        QVBoxLayout(self).addWidget(close_btn)

        close_btn.clicked.connect(self.Actually_Close)
        self.destroyed.connect(Log_Closed)

    def Actually_Close(self):
        print "Actually Close"
        self.parent().close()

    def closeEvent(self, event):
        if event.type() == QEvent.Close:
            event.ignore()
            self.hide()
            print "hidden"

    # And I guess I need something like
    def destroyEvent(self, event):
        #self.conn.close()
        print "Connection Closed"
        event.accept()

if __name__ == "__main__":
    app = QApplication(sys.argv)
    main= QMainWindow()
    tsd = My_dlg(main)
    tsd.show()
    sys.exit(app.exec_()) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T15:34:00.820

要在删除 a 时接收通知`QObject`，请连接到其[`destroyed(QObject*)`](http://qt-project.org/doc/qt-4.8/qobject.html#destroyed)信号。

但是，在 Python 中，对象删除的可预测性不如 C++，因为对象是垃圾回收的。例如，请参阅[Python 文档](http://docs.python.org/reference/datamodel.html#object.__del__)`__del__()`中与相关的所有警告。程序退出时它们可能不会被删除，这可能是您没有收到信号的原因。

您可以显式管理数据库连接，而不是依赖删除对话框。在这个简单的示例中，您甚至可以使用[上下文管理器](http://docs.python.org/library/contextlib.html)来编写更好的代码。

* * *

无论哪种方式，这是您的代码版本，其行为与您预期的一样：[https ://gist.github.com/3827718](https://gist.github.com/3827718)

我所做的更改是：

*   设置`app.setQuitOnLastWindowClosed`以确保在对话框关闭时应用程序不会退出。我认为这是您想要的行为，因为否则这个问题没有意义。

*   在对话框上设置`Qt.WA_DeleteOnClose`为`False`以防止它在关闭时自行删除。这比覆盖更可取`closeEvent`。

*   在`Actually_Close()`中，对话框会自行删除（这也会关闭它）。这会触发`destroyed`信号。

使用此代码，当您单击按钮时，输出与您预期的一样：

```
Connection Opened
Actually Close
Bye bye 
```

# java - 提取运行时 Maven 信息

> ID：12693411
> 
> 赞同：1
> 
> 时间：2012-10-02T15:28:54.247
> 
> 标签：java, maven, runtime, maven-plugin

我想写一个插件来提取maven的运行时信息，例如执行“总时间”，用户使用的maven命令行等...

任何人都知道如何做到这一点？

谢谢， 谢伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:33:26.563

首先看看如何编写自己的[Maven 插件](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)。

该指南没有使用 Java Annotations，但也是可能的：[Using Plugin Tools Java5 Annotations](http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html)。

您可以从 Mojo 内部访问项目定义（Mojo 是 Maven 普通的旧 Java 对象）。

# jquery - jQuery，单击时连续调用多个动画

> ID：12693418
> 
> 赞同：2
> 
> 时间：2012-10-02T15:29:27.007
> 
> 标签：jquery, animation

到目前为止，我有它，所以当页面打开一些动画以使一些图片和文本滑入视图时，我在页面顶部有没有目的地的链接，但我已经将它们全部链接用于样式目的，例如效果悬停，访问等链接有类，所有链接都有“导航”类，然后它们每个都有相关类“关于”，“联系”等。

我可以得到它，以便在打开页面时索引页面的内容向下滑动，并在单击“导航”类时向上滑动（不在视图中）。但是，我希望这样当单击“导航”类时，页面内容会滑出视图，并且取决于单击的链接（“关于”或“联系”链接），新内容会滑入视图中。

```
 $  (".about") .click(function() {
                $ (".aboutimage") .animate ( {
                marginTop : '-300px'
                }, 300) ;   
        }); 
```

当我将这个新的 jQuery 代码添加到“nav”（函数）的末尾时，我无法让新的页面内容（“about”或“contact”）向下滑动。我正在考虑某种 if 语句，但不确定我将如何去做，我已经尝试过并放弃了:-(。

我还在学校做一些课程的网站。我想要的效果是它只有一页。我对 jQuery 很陌生，所以我可能会走最长的路线，但是嘿。任何帮助将不胜感激。

```
$ (document).ready(function() { 
    $ (".imgtop") .ready(function() {
        $ (".imgtop") .animate ( {
        marginTop : '0px'
        }, 500) ;   
    });
    $ (".imgright") .ready(function() {
        $ (".imgright") .delay(200) .animate ( {
        marginLeft : '0px'
        }, 500) ;   
    });
    $ (".imgbot") .ready(function() {
        $ (".imgbot") .delay(400) .animate ( {
        marginTop : '0px'
        }, 500) ;   
    });
    $ (".texttop") .ready(function() {
        $ (".texttop") .animate ( {
        marginTop : '-20px'
        }, 500) ;   
    });
    $ (".texttop2") .ready(function() {
        $ (".texttop2") .delay(200) .animate ( {
        marginTop : '-20px'
        }, 500) ;   
    });
    $ (".texttop3") .ready(function() {
        $ (".texttop3") .delay(400) .animate ( {
        marginTop : '-20px'
        }, 500) ;   
    });

    $  (".nav") .click(function() {
        $ (".imgtop") .animate ( {
        marginTop : '-300px'
        }, 300) ;   

        $ (".imgright") .animate ( {
        marginLeft : '-550px'
        }, 300) ;   

        $ (".imgbot") .animate ( {
        marginTop : '-300px'
        }, 300) ;   

        $ (".texttop") .delay(200) .animate ( {
        marginTop : '-170px'
        }, 300) ;   

        $ (".texttop2") .delay(100) .animate ( {
        marginTop : '-170px'
        }, 300) ;   

        $ (".texttop3") .animate ( {
        marginTop : '-170px'
        }, 300) ;   

    });

    $  (".about") .click(function() {
        $ (".aboutimage") .animate ( {
        marginTop : '-300px'
        }, 300) ;   
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:40:10.410

去除`$(".imgtop") .ready(function() {`

`.ready()`处理程序仅在文档上调用时才有效..

.ready(function() 为每个对象，然后尝试..

您的代码应如下所示

```
$(document).ready(function() {
    $(".imgtop").animate({
        marginTop: '0px'
    }, 500);
    $(".imgright").delay(200).animate({
        marginLeft: '0px'
    }, 500);
    $(".imgbot").ready(function() {
        $(".imgbot").delay(400).animate({
            marginTop: '0px'
        }, 500);
    });
    $(".texttop").animate({
        marginTop: '-20px'
    }, 500);
    $(".texttop2").delay(200).animate({
        marginTop: '-20px'
    }, 500);
    $(".texttop3").delay(400).animate({
        marginTop: '-20px'
    }, 500);

    // Your Click events here
});​ 
```

# java - 如何在长时间运行时不阻塞 UI？

> ID：12693419
> 
> 赞同：1
> 
> 时间：2012-10-02T15:29:27.797
> 
> 标签：java, android, multithreading

我有一个按钮，当用户单击它时，它将更新整个 UI（文本视图、图形）。UI 的内容来自一个 SQLite 数据库，我将更新函数命名为 loading()。您可以想象，在 loading() 内部，有很多数据库操作和 UI 更新。当数据变大时，这个loading()完成的时间会变长，所以按钮会保持在按下状态的时间会更长。

我尝试使用**asynctask**来处理这种情况，以便出现progressdialog 而不是冻结按钮，但是我无法将loading() 方法放在asynctask 的doinbackground() 上，**因为**doinbackground() 无法触及声明的UI 组件来自其活动的 onCreate() 方法。

我不想重写 loading() 函数。

还有什么办法可以吗？？请帮忙，如果可以的话，请提供一些例子，我很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:33:28.997

如果您在主应用程序线程（也称为 UI 线程）上运行耗时任务，您将有无响应的 UI 并最终看到著名的[应用程序无响应 (ANR) 对话框](http://www.linuxtopia.org/online_books/android/devguide/images/anr.png)。

推荐的方法是在 AsyncTask 中执行这些操作并`publishProgress()`调用`doInBackground()`. 将您的 UI 更新逻辑放入`onProgressUpdate()`您的`AsyncTask`. `onProgressUpdate()`调用后将在主应用程序线程上自动调用`publishProgress()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:33:39.037

为了在此实例中使用 AsyncTask，您需要在 doInBackGround() 中加载数据并使用结果填充某种数据结构或模型对象。然后将其作为 doInBackground() 的结果返回。

[onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)确实在 UI 线程上运行，并且可以使用结果来填充和更新您的组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:35:10.723

我认为最好的选择是使用 AsyncTask 来完成这项工作。您可以在需要时从 loadInBackground 触发进度更新以获取一些 UI 更新（`publishProgress()`从任务后台线程调用，该方法`onProgressUpdate()`将在 UI 线程上调用）。

其他选项：在单独的线程或后台服务中完成工作。然后在您的 UI 中，您可以使用 Handler 每 X 毫秒触发一次刷新。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T15:31:05.753

您可以使用`runOnUiThread(Runnable)`. 您还可以使用`Thread`和的组合`Handler`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-02T15:35:16.557

我目前正在学习`Handler`s 并且根据文档，它们是当前推荐的访问数据的方式，因为一方面，它们为您执行异步加载。正如您所说，您无法从 UI 线程以外的其他线程访问 UI 组件。这意味着无论您是使用`Handler`代码还是滚动您自己的代码`AsyncTask`，都需要将更新 UI 的代码与加载数据的代码分开。

# html - 如何在 HTML 下拉列表中换行

> ID：12693420
> 
> 赞同：2
> 
> 时间：2012-10-02T15:29:31.387
> 
> 标签：html, jsp, drop-down-menu, option

> **可能重复：**
> [选择列表中的自动换行选项](https://stackoverflow.com/questions/3587942/word-wrap-options-in-a-select-list)

是否可以在 html`<option>`框中包装长文本？

在我的 JSP 中，我有一段代码在循环中从数据库中提取值并将它们附加到列表的`<option>`部分`<select>`。

以下是我引用的代码部分：

```
<select name='codes' onchange="showState(this.value)">  
                <option value="none">Select a code</option>  
                <%
                    //Pulls the ids and descriptions from the codes table and stores them in the first drop down
                    try
                    {
                        Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();  
                        Connection con = DriverManager.getConnection("url","username","password");  
                        Statement stmt = con.createStatement();  
                        ResultSet rs = stmt.executeQuery("select id, descr from ref_codes");

                        while(rs.next())
                        {
                            %>
                                <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=rs.getString(2)%></option>  
                            <%
                        }

                        //Closes the database connection
                        stmt.close();
                        con.close();
                    }
                    catch (ClassNotFoundException e)
                    {
                        System.err.println("ClassNotFoundException: " + e.getMessage());
                    } 
                    catch (SQLException e)
                    {
                        System.err.println("SQLException: " + e.getMessage());
                    }
                    catch (Exception e)
                    {
                        System.err.println("Generic Exception: " + e.getMessage());
                    }       
                %>
                </select> 
```

我的问题是某些拉取的值太长了，并且下拉框的长度超过了页面的长度，因为它们都保持在同一行。每当我遇到一个很长的字符串时，我都想让它换行到下一行，但仍然包含在同一`<option>`值中。

我在谷歌上环顾四周，得到了不同的答案。有人说可以，有人说不能。

但是，大多数答案似乎已经过时（大约从 2000 年代中期开始），而我尝试过的答案大多涉及`<div>`标签的使用，但我没有运气。这意味着选项仍然保留在一行上，无论它们有多长，并且不会换行到下一行，尽管我指定`width`了`<div>`标签。

那么之前有没有人在 html 中做过这个或者知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:46:38.623

你不能只为下拉菜单拉出你想要的最大字符数，然后重新选择相同的字段，但从下一个字符开始，抓取相同的字符数，等等。然后使用 HTML/CSS 格式来结合并使它们看起来像你想要的。

# php - 通过 jquery/ajax 和 json 抛出 php 异常的干净方法

> ID：12693423
> 
> 赞同：32
> 
> 时间：2012-10-02T15:29:45.340
> 
> 标签：php, jquery

是否有一种干净、简单的方法可以通过 json 响应 jquery/ajax 调用引发 php 异常。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-02T15:35:54.487

你可以在 PHP 中做这样的事情（假设这是通过 AJAX 调用的）：

```
<?php

try {
    if (some_bad_condition) {
        throw new Exception('Test error', 123);
    }
    echo json_encode(array(
        'result' => 'vanilla!',
    ));
} catch (Exception $e) {
    echo json_encode(array(
        'error' => array(
            'msg' => $e->getMessage(),
            'code' => $e->getCode(),
        ),
    ));
} 
```

在 JavaScript 中：

```
$.ajax({
    // ...
    success: function(data) {
        if (data.error) {
            // handle the error
            throw data.error.msg;
        }
        alert(data.result);
    }
}); 
```

您还可以`error:`通过返回 400（例如）标头来触发 $.ajax() 的处理程序：

```
header('HTTP/1.0 400 Bad error'); 
```

或者`Status:`如果你在 FastCGI 上使用。请注意，`error:`处理程序不会收到错误详细信息；要做到这一点，您必须重写`$.ajax()`工作方式:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T15:38:51.193

Facebook 在他们的 PHP SDK 中做了一些事情，如果 HTTP 请求由于某种原因失败，他们会抛出异常。您可以采用这种方法，如果抛出异常，只需返回错误和异常详细信息：

```
<?php

header('Content-Type: application/json');

try {
    // something; result successful
    echo json_encode(array(
        'results' => $results
    ));
}
catch (Exception $e) {
    echo json_encode(array(
        'error' => array(
            'code' => $e->getCode(),
            'message' => $e->getMessage()
        )
    ));
} 
```

`error`然后，您可以在 JavaScript 中的 AJAX 调用中侦听密钥：

```
<script>
    $.getJSON('http://example.com/some_endpoint.php', function(response) {
        if (response.error) {
            // an error occurred
        }
        else {
            $.each(response.results, function(i, result) {
                // do something with each result
            });
        }
    });
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T15:42:43.257

如果所有错误都应该以相同的方式处理（例如显示一个对话框）。你可以这样做：

PHP结束：

```
public function throwJsonException($msg) {
    echo json_encode(array('error'=> true, 'msg' => $msg));
}

throwJsonException('login invalid!'); 
```

jQuery结束：

```
$(document).ajaxSuccess(function(evt, request, settings){
    var data=request.responseText;
    if (data.length>0) {
        var resp=$.parseJSON(data);
        if (resp.error)
        {
            showDialog(resp.msg);
            return;
        }                   
    }    
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-19T12:21:53.640

作为对先前答案的补充，您可以将异常处理程序设置为仅在所需脚本中使用，而不是在所有异常中重复相同的 json 编码代码。例如：

```
function ajaxExceptionHandler($e) {
    echo json_encode(array(
        'error' => array(
        'code' => $e->getCode(),
        'msg' => $e->getMessage())
    ));
} 
```

然后，在您的 ajax 处理程序中，

```
set_exception_handler('ajaxExceptionHandler'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-05T10:17:01.507

我使用这种方法将异常转换为 JSON：

```
<?php

namespace MyApp\Utility;

use Throwable;

trait JsonExceptionTrait
{    
    public function jsonException(Throwable $exception)
    {
        return json_encode([
            'message' => $exception->getMessage(),
            'code' => $exception->getCode(),
            'file' => $exception->getFile(),
            'line' => $exception->getLine(),
            'trace' => $exception->getTrace()
        ]);
    }
} 
```

然后，只需在我的控制器中：

```
<?php

namespace MyApp\Controller;

use MyApp\Utility\JsonExceptionTrait;

class UserController extends AbstractController
{
    use JsonExceptionTrait;

     /**
     * @param int $userId
     * @return JsonResponse
     */
    public function getAction(int $userId): JsonResponse
    {
        try {
            $user = $this->userService->getUser($userId);
            return new Response($user);
        } catch (EntityNotFoundException $exception) {
            return new Response(
                $this->jsonException($exception),
                JsonResponse::HTTP_NOT_FOUND
            );
        }
    } 
```

# ruby-on-rails - 如何在整个连接/服务器上启用 MongoDB 的安全模式？

> ID：12693424
> 
> 赞同：1
> 
> 时间：2012-10-02T15:29:48.527
> 
> 标签：ruby-on-rails, mongodb

我有一个 Rails 应用程序，我需要始终为其中一台服务器启用 MongoDB 的安全模式。

**如何为所有请求启用安全模式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:43:49.633

[http://api.mongodb.org/ruby/current/file.WRITE_CONCERN.html](http://api.mongodb.org/ruby/current/file.WRITE_CONCERN.html)

```
@con = Mongo::Connection.new('localhost', 27017, :safe => {:w => 2})
@db  = @con['test']
@collection = @db['foo']
@collection.save({:name => 'foo'})

@collection.save({:name => 'bar'}, :safe => false) 
```

# sql-server-data-tools - 如何在 SSDT 解决方案中更改 SqlLocalDB (localdb) 实例的标准名称？

> ID：12693425
> 
> 赞同：4
> 
> 时间：2012-10-02T15:29:50.917
> 
> 标签：sql-server-data-tools

我经常需要用 SSDT 项目打开几个解决方案。这些解决方案名称相同，但有细微的差别，即它们只是来自源代码控制系统中的不同分支。但是这些解决方案总是试图使用相同的（localdb）实例来虚拟化他们项目的数据库。这会导致冲突、冻结和结束 Visual Studio 进程的必要性。

所以问题如下：有没有办法配置（localdb）实例的名称，以便在具有相同名称的解决方案中打开和虚拟化 SSDT 项目集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:39:52.167

我很确定，如果数据库至少命名不同，那么 Visual Studio 的多个实例在使用单个共享 (localdb)\ 实例时应该不会有问题。我试过了，除了数据库争用之外没有其他问题（即使解决方案和数据库的名称相同）。

当然，我可以看到能够使用托管同名数据库的多个不同实例是多么有用。例如，您同时在多个代码分支中工作：主干、一些修补程序分支和一个特性分支。

我想不出一种非常优雅的方式来做到这一点，但是您可以使用以下部分将其组合在一起：

1) 使用“sqllocaldb”实用程序创建您需要的每个 localdb 实例。您可以在预构建事件中执行此操作，也可以在开发人员系统上一次性执行此操作。前任。

```
sqllocaldb.exe create "myinstance1" 
```

2）问题在于配置它...如果您使用 VS 的“调试”部署（按 F5 时部署），则必须为您正在使用的每个不同解决方案手动更改它。如果您使用“发布配置文件” " 您可以为每个不同的数据库实例创建一个配置文件，但您必须在调试应用程序之前手动部署数据库。

您是否也依赖 localdb 进行 Team Build 和自动化集成测试？那可能会改变事情。

这是一些附加信息：http: [//msdn.microsoft.com/en-us/library/hh510202.aspx](http://msdn.microsoft.com/en-us/library/hh510202.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T08:56:39.527

调试和构建过程 (F5) 的目标数据库配置可以在以下位置完成：

**项目属性 - 调试 - 目标连接字符串。**

因此，您可以将具有相同名称的分支项目指向您选择的不同数据库实例。

# c# - C# 中 GUID 的 pInvoke 方法

> ID：12693429
> 
> 赞同：1
> 
> 时间：2012-10-02T15:29:56.920
> 
> 标签：c#, pinvoke, guid, unsafe

我是 C# 和 USB 编程的新手。我有几个问题。我无法与之通信。这是我声明 GUID 以获取 GUID 的方式。我正在创建一个新的 GUID 实例，然后调用 HidGuid 来获取 Guid。下面是它的 pInvoke 方法。但是如何验证我得到的 GUID 是否有效/正确。有没有办法将此结构转换为字符串。如果是这样，如何。让我知道。谢谢。

```
private GUID MYguid = new GUID();
HidGuid();

public unsafe void CT_HidGuid()
// 1.Data1 = 1293833650
//Data2 = 61807
//Data3 = 4559
//data4 = 136 203 0 17 17 0 0 48
// hex values  4d1e55b2 f16f 11cf 7be03c74ac80
{                              
    HidD_GetHidGuid(ref MYguid);  
}
[DllImport("hid.dll", SetLastError = true)]
static extern unsafe void HidD_GetHidGuid(ref GUID lpHidGuid);

public unsafe struct GUID
{
    public int Data1;
    public System.UInt16 Data2;.
    public System.UInt16 Data3;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
    public byte[] data4; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:34:59.560

P/Invoke 层将为您将 C Guids 转换为 C# guids。您可以像这样调用您的 pinvoke 函数

```
[DllImport("hid.dll", EntryPoint="HidD_GetHidGuid", SetLastError=true)]
static extern void HidD_GetHidGuid(out Guid hidGuid); 
```

然后，您将能够只使用托管[C# Guid 类](http://msdn.microsoft.com/en-us/library/system.guid.aspx)并与之进行比较。

查看网站[pinvoke.net](http://pinvoke.net/default.aspx/hid.HidD_GetHidGuid)，他们为许多 Windows API 调用提供了预制签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:34:51.220

设备 GUID 与设备类接口 GUID 不同。对于 HID 设备类 pInvoke 应返回以下内容：

```
GUID_DEVINTERFACE_HID {4D1E55B2-F16F-11CF-88CB-001111000030} 
```

msdn 上更有趣的 GUID 在[这里](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553426%28v=vs.85%29.aspx)。

本指南非常适合 HID 编程入门：[链接](http://channel9.msdn.com/coding4fun/articles/Is-that-you-Writing-Better-Software-for-Cool-USB-Hardware)。来源也可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:08:55.517

您好 Scott Chamberlain，“HidD_GetHidGuid”返回的 GUID 与系统类 GUID 不同。让我知道

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:33:11.993

你真的需要使用 PInvoke 来生成 GUID 吗？为什么不使用 System 命名空间中的 Guid.NewGuid() 方法？

[http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)

# django - Django admin inlines - 最少表单数

> ID：12693431
> 
> 赞同：8
> 
> 时间：2012-10-02T15:30:07.097
> 
> 标签：django, django-admin, formset, inline-formset

在 Django 中创建自定义模型管理内联时，您可以设置两个参数`extra`和`max_num`：要显示的附加表单的数量，以及允许用户附加到父对象的最大对象数。

我有一个 Question 模型，每个模型都可以有几个答案，这些答案在 Question admin 中是内联的。大多数问题都会有三个答案，所以我想默认显示三个内联；然而，当编辑一个已经有三个答案的问题时，在很可能根本没有更多答案的情况下，显示三个完整的额外字段看起来很拥挤和俗气。我想要的本质上是一个`min_num`参数：我想默认显示至少三个字段，如果已经少于三个答案，则为空，同时仍然允许用户添加比将显示的更多的字段。

我找到了将其添加到[formset](https://code.djangoproject.com/ticket/9532)和[inlines](https://code.djangoproject.com/ticket/17642)的票证，但看起来它们还没有解决。目前在 Django 1.4 中是否有任何方便的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-01-07T04:31:26.220

我必须设置 extra 和 min_num 才能正常工作

```
class MyInline(admin.TabularInline):
    extra = 0
    min_num = 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T22:23:26.977

有一个可用的补丁：

[https://code.djangoproject.com/ticket/17642](https://code.djangoproject.com/ticket/17642)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-27T04:49:50.457

我最终使用了一个动态`extra`值：

```
class AnswerInline(admin.TabularInline):
    model = Answer
    initial_num = 3

    def get_extra(self, request, obj=None, **kwargs):
        if obj is not None:
            return max(self.initial_num - obj.answers.count(), 1)
        return self.initial_num 
```

这样可以确保有 3 个表单，或者比填充表单的数量多一个，并且不会遇到验证问题`min_num`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T17:24:25.557

我不确定。但在我的项目中，我这样做了。填写表格的计数 = 计数（未删除现有）+ 计数（已更改且未删除新的）。在干净的方法中，我们确定所有表格都已经过验证（并且不包含空白表格）。

表格.py：

```
class AnswersFormsetBase(forms.models.BaseInlineFormSet):
    def clean(self):
        super(AnswersFormsetBase, self).clean()

        initial_num = len(filter(lambda f: not self._should_delete_form(f), self.initial_forms))
        extra_num = len(filter(lambda f: f.has_changed() and not self._should_delete_form(f), self.extra_forms))
        if initial_num + extra_num < 2:
            raise ValidationError("Polling should be at least two possible answers")

AnswerFormset = inlineformset_factory(Polling, Answer, formset=AnswersFormsetBase) 
```

管理员.py：

```
class AnswersInline(admin.TabularInline):
    model = Answer
    fk_name = "polling"
    formset = AnswerFormset # from forms.py

class PollingModelAdmin(admin.ModelAdmin):
    inlines = [AnswersInline]

admin.site.register(Polling, PollingModelAdmin) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-10T07:06:26.523

将 max_num 设置为 3 并额外添加注释，这样您将始终有 3 行添加和更改表单。

# crystal-reports - 使用存储过程时的参数顺序问题

> ID：12693437
> 
> 赞同：6
> 
> 时间：2012-10-02T15:30:25.503
> 
> 标签：crystal-reports

我正在使用 Crystal Reports 9 - 我构建了一个基本上使用存储过程并具有 3 个参数的报表：A、B、C，它们也是报表中的提示。我也有提示 D 和 E，它们*没有*传递给存储过程。当我正常运行此报告（通过 CR9）时，提示以正确的预期顺序显示：A、B、C、D、E。但是，我的客户在使用水晶报告查看器时遇到了奇怪的行为：提示的顺序显示的是：D、E、A、B、C。我不确定这是否是一个错误：我尝试重新添加提示，首先将它们全部删除，然后按照我想要的顺序重新添加提示出现，但他们*仍然*查看错误的顺序。我还试图让他们更新他们的查看器版本，他们也看到了同样的问题。

另请注意，它不是按字母顺序对提示（在查看器中）进行排序。我的例子只是为了论证。

为什么查看器会以不同的顺序显示提示？这个问题似乎只在我链接到存储过程时才存在。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:24:50.010

我不知道您的报告中是否有可能，但请尝试以下几个建议：

1.  使用组
2.  使用一系列子报表（“A”后的每个提示一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:43:59.120

我想您只是选择`Stored Procedure`并`Database Expert`单击它，设置报告源。

您可以改为：

*   打开`Database Expert`
*   点击`Add Command`
*   从右侧面板按正确顺序添加所需的参数（A、B、C 以及存储过程不需要的 D、E）
*   键入类似于此的查询`Exec MyStoredProcedure ('{?ParamA}','{?ParamB}', {?ParamC} );`
    [如果参数是字符串*(Parama, ParamB)* ，则需要用 封装`'`，如果是数字*(ParamC)*，则不必封装]

参数将是：

*   **以正确的顺序提示用户**
*   **如果需要，传递给存储过程**
*   **如果需要，可在报告逻辑中使用**

# bayesian - 朴素贝叶斯算法的替代方案

> ID：12693438
> 
> 赞同：4
> 
> 时间：2012-10-02T15:30:28.063
> 
> 标签：bayesian, naivebayes

我们正在尝试实现一种语义搜索算法，以根据用户的搜索词给出建议的类别。

目前我们已经实现了朴素贝叶斯概率算法来返回我们数据中每个类别的概率，然后返回最高的概率。

然而，由于它的幼稚，它有时会得到错误的结果。

如果不涉及神经网络和其他极其复杂的东西，我们可以研究另一种选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-12T13:34:02.340

朴素贝叶斯 (NB) 与逻辑回归没有太大区别。根据经验，逻辑回归在大多数情况下在预测性能方面都优于 NB。

此外，如果您有足够的数据并且没有任何缺失数据，那么您很可能会发现 NB 的预测性能与更复杂的方法几乎相同，例如贝叶斯网络 (BN)，后者没有协变量之间的“幼稚”独立假设。

如果您想放松独立性假设而不必完全深入 BN 领域，您可以先尝试[Tree Augmented Naive Bayes](http://ai.stanford.edu/~moises/tutorial/sld164.htm)算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T09:05:11.370

如果你不认为线性 SVM 是*非常复杂的东西*，你可以试试。众所周知，它可以很好地完成此类任务。

# php - mysql代码中的不同含义？

> ID：12693439
> 
> 赞同：-1
> 
> 时间：2012-10-02T15:30:28.267
> 
> 标签：php, mysql

```
$result=mysql_query("select * from dosyabegeni where veri_id='" . get_custom_field('dwcode') . "'"); 
```

## 不工作

*它说数字和屏幕，**但**应用程序不起作用*

```
 veri_id='" . get_custom_field('dwcode') . "'");

 veri_id='" . echo get_custom_field('dwcode') . "'"); 
```

## 在职的

```
 veri_id='HelloTest'");

 veri_id='1234567890'");

 veri_id='" . $_GET['test'] . "'"); 
```

### 主要代码

```
 <?php
 include('/home/emre2010/public_html/EntegreOz/DosyaBegeni/config.php');
 $result=mysql_query("select * from dosyabegeni where veri_id='" .get_custom_field('dwcode') . "'");

 while($row = mysql_fetch_array($result))
 {

 $sira_id=$row['sira_id'];
 $veri_id=$row['veri_id'];
 $begeni=$row['begeni'];

 ?>
        <div class="reviewbox"> 
        <div class="summarywrap">  
        <div class="summarywrapinner">                       
        <div class="summary">
            <div class="reviewsection"><div class="rating points">
            <a href="#" class="begeni" id="<?php echo $sira_id; ?>">
            <span style="color:#fff;" align="center"> <?php echo $begeni; ?> </span> 
            </a>
            <p class="ratingtext">completed!</p></div>
            </div><div class="clear"></div>                
            <div class="clear"></div>
        </div>
        <div class="ratingsummary"></div>
        <div class="clear"></div>
    </div>
  <div class="clear"></div>
</div> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:48:15.027

您是要从 while 循环中运行评论框吗？如果您的 SQL 只应该返回一行，那么您真的不应该在 while 循环中包含所有这些内容。我没有看到结束括号。如果你是，那么你做的很古老。您应该将 while 循环中的信息放入一个数组中，然后在您的内容中运行一个单独的循环，但这并不能真正解决问题。您可能遇到的唯一问题是不返回行，因为它们不存在，或者您的 SQL 中出现错误。

如果您的 SQL 查询没有返回任何行，那么您需要做两件事。一、回显出sql查询。第二，打印任何可能的错误。

```
echo $sql.'<br />';
print(mysql_error()); 
```

您永远不会知道，您可能拼错了数据库本身表上的一列。

如果这不起作用，则将 $row 打印出来。

在你的 while 循环之外做：

```
print_r($row); 
```

# c# - 嵌入式 WebBrowser Web 控制台访问

> ID：12693444
> 
> 赞同：8
> 
> 时间：2012-10-02T15:30:40.777
> 
> 标签：c#, .net, console, browser

我有一个运行嵌入式 Web 浏览器 (System.Windows.Forms.WebBrowser) 的 .NET 应用程序。我不知道如何访问通常可以通过按 f12 访问的 Web 控制台（相当于 firebug 的控制台）。有没有办法启用它？也可以将此输出重定向到文件吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T18:53:12.263

您是否尝试过使用 FirebugLite ？

[https://getfirebug.com/firebuglite](https://getfirebug.com/firebuglite)

将此脚本包含在您的页面中，您将拥有一个精简版的 firebug，您可以使用它来调试您的 JS。

```
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:43:45.967

嵌入式 Web 浏览器不支持 ActiveX 控制器，因此没有 Web 控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T07:23:51.270

你可以使用虚拟工作室来调试它

1.  启动应用
2.  通过 debug->attach to process 打开“attach to dialog”
3.  在附加到选择中，选择“脚本”
4.  然后选择要调试的进程

# objective-c - 如何禁用（或被通知）删除加载的插件（NSBundle）文件？

> ID：12693446
> 
> 赞同：0
> 
> 时间：2012-10-02T15:30:50.027
> 
> 标签：objective-c, macos, cocoa, plugins, nsbundle

我用插件系统（使用 NSBundle）编写了一个应用程序，一切正常，但我想处理在应用程序执行期间删除插件文件的情况。

我认为最好的方法是禁用删除已加载的插件文件（如 Windows 中的 dll，它们在应用程序加载时无法删除）

但在 OSX 中，即使应用程序使用了插件文件，也可以删除它。

应用程序使用插件文件时是否可以禁用删除插件文件？

或者至少可以在删除文件时收到通知，以便在删除插件文件时更新我的​​应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:02:47.970

我不认为您可以禁用删除加载的插件，但有可能监控文件系统的更改，这可能会有所帮助。

1.  “文件系统事件 API”

    使用文件系统事件 API，可以在指定目录的内容发生更改时通知您的应用程序。然后您必须自己扫描目录，例如检查哪些插件仍然存在或已被删除。

2.  内核队列

    这是一种更底层的方法，使用`kqueue()`,`kevent()`系统调用。例如，您可以注册一个文件描述符，如果`unlink()`在引用的文件上被调用，则会收到通知。

[文件系统事件编程指南](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html)中描述了这两种机制。还有一个示例项目[Monitoring File Changes with the File System Events API](http://developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html)。

# xcode - xcode 4.5、IOS 6.0、Jenkins 1.476、OSX 10.7.5、Cordova / Phone Gap，不会在 Jenkins 下构建

> ID：12693456
> 
> 赞同：2
> 
> 时间：2012-10-02T15:31:26.063
> 
> 标签：xcode, build, jenkins, ios6

在 Jenkins 下出现以下错误。使用 Xcode 和/或其他命令行构建在同一台机器上手动构建工作正常。我认为这与 IOS 6.0 / Xcode 升级有关，因为在此之前它运行良好。顶级项目未使用 armv7 和有效架构 armv7 的架构集进行编译。当使用 Xcode 在同一台机器上手动完成时，这对于 V6.0 模拟器和设备来说构建和运行良好。

```
 CompileC build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/Objects-  normal/armv7/MyAppAgent_vers.o build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/DerivedSources/MyAppAgent_vers.c normal armv7 c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c -arch armv7 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -DNDEBUG=1, -DCORDOVA_FRAMEWORK=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -Wdeprecated-declarations -g -fvisibility=hidden -Wno-sign-conversion -mios-simulator-version-min=5.0 -iquote /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/MyAppAgent-generated-files.hmap -I/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/MyAppAgent-own-target-headers.hmap -I/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/MyAppAgent-all-target-headers.hmap -iquote /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/MyAppAgent-project-headers.hmap -iquote../../../Include -iquote../../../Include/logging -iquote../../../Include/messaging -iquote../../../Include/networking -iquote../../../Include/platform -I/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Builds/MyAppAgent/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/DerivedSources/armv7 -I/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/DerivedSources -F/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Builds/MyAppAgent -F/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/../../../../SDK -F/Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/../../../../SDK -MMD -MT dependencies -MF /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/Objects-normal/armv7/MyAppAgent_vers.d --serialize-diagnostics /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/Objects-normal/armv7/MyAppAgent_vers.dia -c /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/DerivedSources/MyAppAgent_vers.c -o /Users/Shared/Jenkins/Home/jobs/MyAppAgent/workspace/Dev/Projects/MyApp/MyAppAgent/build/MyAppAgent.build/Release-iphonesimulator/MyAppAgent.build/Objects-normal/armv7/MyAppAgent_vers.o

clang: error: invalid architecture 'arm' for deployment target '-mios-simulator-version-min=5.0'

Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:59:00.570

如果您使用模拟器 SDK 构建，请确保 CPU 架构设置为 i386。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:12:48.700

使用新版本的 Xcode，i386 Architectures 的默认设置包括新的 iphone 5 armv7s。我们链接的一些项目不包括 armv7s，我们正在窃听。需要将工作区（在我们的例子中）更改为不是默认的拱门，而是仅指定 armv7。

# python - 向 kivy 按钮添加 on_release 操作

> ID：12693467
> 
> 赞同：3
> 
> 时间：2012-10-02T15:32:05.037
> 
> 标签：python, kivy

我正在尝试重构[最后一个代码示例](http://kivy.org/docs/guide/firstwidget.html)，以便它`Button`实际上是它自己的带有`on_release`动作的类。但是我的代码失败了。

我不仅想重构它（根据我下面的尝试），而且我还需要将文本设置`Button`为“清除”

```
从随机导入随机
从 kivy.app 导入应用程序
从 kivy.uix.widget 导入小部件
从 kivy.uix.button 导入按钮
从 kivy.graphics 导入颜色、椭圆、线

MyPaintWidget 类（小部件）：

    def on_touch_down（自我，触摸）：
        用户数据 = touch.ud
        用户数据['color'] = c = (random(), 1, 1)
        使用 self.canvas：
            颜色（*c，模式='hsv'）
            d = 30
            椭圆(pos=(touch.x - d/2, touch.y - d/2), size=(d, d))
            userdata['line'] = Line(points=(touch.x, touch.y))

    def on_touch_move(self, touch):
        touch.ud['line'].points += [touch.x, touch.y]

类清除按钮（按钮）：
    def __init__(self,paint_widget):
        self.paint_widget=paint_widget

    def on_release（自我，按钮）：
        self.paint_widget.canvas.clear()

MyPaintApp 类（应用程序）：

    定义构建（自我）：
        父 = 小部件（）
        画家 = MyPaintWidget()
        clearbtn = ClearButton(画家)
        parent.add_widget（画家）
        parent.add_widget(clearbtn)

        返回父母

如果 __name__ == '__main__'：
    MyPaintApp().run()

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T06:36:39.640

如果没有子类化，你可以这样做：

```
class MyPaintWidget(Widget):
    # ... put your previous methods here
    def clear_canvas(self, *largs):
        self.canvas.clear()

class MyPaintApp(App):
    def build(self):
        root = FloatLayout()
        painter = MyPaintWidget()
        cleanbtn.bind(on_release=self.painter.clear_canvas)
        root.add_widget(painter)
        root.add_widget(clearbtn)
        return root 
```

对于子类化，我更喜欢使用 Kv 语言：

```
from kivy.lang import Builder

Builder.load_string('''
<ClearButton>:
    text: "Clear"
    on_release: app.painter.canvas.clear()
''')

class ClearButton(Button):
    pass

class MyPaintApp(App):
    def build(self):
        parent = Widget()
        painter = MyPaintWidget()
        clearbtn = ClearButton()
        parent.add_widget(painter)
        parent.add_widget(clearbtn)
        return parent 
```

# scala - 将任何无参数函数匹配为scala Mockito中的参数

> ID：12693474
> 
> 赞同：5
> 
> 时间：2012-10-02T15:32:15.893
> 
> 标签：scala, mocking, mockito, specs

我正在尝试验证使用 Mockito 调用以下方法：

```
class Notifier {
  def forward(request: ServletRequest)(onFailure: => Unit) : Unit
} 
```

这是模拟的验证：

```
val notifier = mock[Notifier]
there was one(notifier).forward(any[ServletRequest])(any[() => Unit]) 
```

我得到了例外：

```
 The mock was not called as expected: 
    Invalid use of argument matchers!
    3 matchers expected, 2 recorded.
    This exception may occur if matchers are combined with raw values:
        //incorrect:
        someMethod(anyObject(), "raw String");
    When using matchers, all arguments have to be provided by matchers.
    For example:
        //correct:
        someMethod(anyObject(), eq("String by matcher")); 
```

我知道这是由最后一个无参数函数引起的。如何在此处正确执行验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-25T21:59:48.467

你能试试`Function0[Unit]`吗？

```
there was one(notifier).forward(any[ServletRequest])(any[Function0[Unit]]) 
```

# python - python子进程避免子进程的信号处理

> ID：12693476
> 
> 赞同：2
> 
> 时间：2012-10-02T15:32:23.363
> 
> 标签：python, signals, subprocess, signal-handling

好吧，我在脚本中有一个 usr1 信号处理程序。通过从外部向我的脚本发送一个 SIGUSR1，我的处理程序完成了它的工作，但信号也传播到了我通过 Popen 创建的孩子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T12:44:22.407

`rsync` [手册页](http://www.linuxmanpages.com/man1/rsync.1.php)说退出代码 20 意味着：

```
Received SIGUSR1 or SIGINT 
```

因此，如果您使用`kill`（不是`kill -15`您说有时使用的）杀死它，那么它也会因退出代码而死。

# ssh - SSH 在主机中的用途是什么？

> ID：12693479
> 
> 赞同：0
> 
> 时间：2012-10-02T15:32:36.360
> 
> 标签：ssh, hosting, shared-hosting

谁能用外行向我解释共享主机中的[SSH （安全外壳）是什么？](http://en.wikipedia.org/wiki/Secure_Shell)

[我知道您可以使用像Putty](http://www.putty.org/)这样的应用程序使用命令行界面远程访问 Web 托管服务器。但它是否让您拥有对服务器的*更多*访问权限，或者它是另一种创建目录或上传文件和类似内容的方式？或者您可以安装扩展程序或做更高级的事情？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:34:34.487

它只是一个安全层，对流入和流出服务器的所有数据进行加密，因此其他人无法读取其内容。如果您正在处理敏感信息，这将特别有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:36:56.873

取决于主机设置的限制，但它通常允许您运行命令行实用程序，通常用于批处理文件、更改文件权限等。

换句话说，如果您在本地登录到计算机（没有 root 访问权限），SSH 可以让您执行大多数您可以执行的操作。

# java - 为什么我不能在 Play 2 中将对象渲染到我的视图中？

> ID：12693481
> 
> 赞同：0
> 
> 时间：2012-10-02T15:32:38.693
> 
> 标签：java, templates, playframework-2.0

我想我对 Play 2 框架有些误解。

在我的应用程序控制器中，我从数据库中获取一个公司对象，我想在我的视图中对其进行一些操作。

**companyView.scala.html：**

```
@(company: Company)

@main("Welcome to Play 2.0") { 
 <h1>@{company.name}</h1>

} 
```

**应用控制器：**

```
package controllers;

import models.Company;
import play.*;
import play.mvc.*;

import views.html.*;

public class Application extends Controller {

    public static Result company(String rest) {             
        Company company = 
                Company.find.where().ilike("restfulIdentifier.identifier", rest).findUnique();
        return ok(companyView.render(company));
    }   
} 
```

但是由于想要一个字符串而`return ok(companyView.render(company));`导致编译错误。`companyView.render`

如果我查看表单示例应用程序：

```
/**
     * Handle the form submission.
     */
    public static Result submit() {
        Form<Contact> filledForm = contactForm.bindFromRequest();

        if(filledForm.hasErrors()) {
            return badRequest(form.render(filledForm));
        } else {
            Contact created = filledForm.get();
            return ok(summary.render(created));
        }
    } 
```

渲染对象没有问题。我想解决方案相当简单，而且我错过了文档的一些关键部分。请给我解释一下！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:39:59.177

在这种情况下，我的步骤如下：

1.  更改 scala 模板，我们必须告诉 scala 模板我们`Company`属于模型类：（但也`@company.name`按照 Jordan 的建议更改为。

    ```
     @(company: models.Company)

     @main("Welcome to Play 2.0") { 
       <h1>@company.name</h1>

     } 
    ```

2.  运行命令`play clean`

3.  然后运行`play debug ~run`

通过执行`play debug ~run`，您将触发在您的一个项目文件的每个 SAVE 上编译播放应用程序。

**注意：**播放模板基本上是函数。这些函数需要编译，并且这些函数中使用的所有内容都需要在使用前声明。就像在常规 Java 开发中一样。

您的对象想要一个字符串的事实`render`可能是以下结果：

*   @（公司：公司）无法解决给`model`公司。
*   最后一次编译有一个 @(company: String)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:39:11.587

我不知道这是否能解决您的问题，但值得一试。尝试删除更改：

# @{公司名}

到：

# @公司名

# checkbox - Extjs 菜单检查项 - 如何调用？

> ID：12693483
> 
> 赞同：0
> 
> 时间：2012-10-02T15:32:48.920
> 
> 标签：checkbox, extjs4.1

我在我的项目中使用 Extjs 4.1。所以 view.js 中的每个 Extjs 组件，我都可以使用 Ext.getCmp 调用它，并在我的代码中的任何地方使用它。

我的问题是菜单检查项目。我找不到调用每个项目的方法，并在 view.js 之外的任何地方检查选择！我需要在项目的另一部分检查这些项目，但我不知道该怎么做！

我的处理程序：

```
myHandler: function (menucheckitem, checked, opts) {
    switch (menucheckitem.getId ()) {
        // Here handles the first
        case 'first':
            if (checked) {
                console.log ('First checked!');
                goToFunction ();
            }
            break;
        // Here handles the second
        case 'second':
            if (checked) {
                console.log ('Second checked!');
                goToFunction ();
            }
            break;
        default:
            console.log ('Whatever!');
    }
} 
```

如您在上面看到的，如果我想将每个 menucheckitem 发送到另一个 js 文件并检查选择.. 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:02:36.863

使用 Ext.getCmp 不是最佳实践。您可以使用 ComponentQuery 类来定位您想要的组件。请参阅有关 getCmp 的其他 SO 问题。

[up() 和 down() 与 Ext.getCmp()](https://stackoverflow.com/questions/11872261/extjs4-1-up-down-versus-ext-getcmp/11874707#11874707)

# c++ - C++ 编译器或预处理器可以将符号转换为大写吗？

> ID：12693489
> 
> 赞同：3
> 
> 时间：2012-10-02T15:33:07.420
> 
> 标签：c++, gcc, c-preprocessor

我正在尝试对混合大小写单词的任意集合使用[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)**`MixedCase`**方法，以便文本可以同时生成：

*   编译时字符串**`"MixedCase"`**
*   编译时变量**`const int MIXEDCASE_ID`**

我正在使用 gcc，并且 gcc 扩展是可以接受的。

C++ 是否可以将代码中的测试转换为大写？例如，这样

  转换(abc)

会产生符号`ABC`？ **如果没有，除了在代码中输入每个样本两次之外，还有其他解决方案吗？**

***编辑：*** 考虑到输入格式没有限制。 `Mixed`or`"Mixed"`or or`'M', 'i', 'x', 'e', 'd'`or`0x4d 0x69 0x78 0x65 0x64`(yuck?)...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:49:30.813

为此，您需要编写一个构建工具来预处理（实际上是预处理）您的源文件以进行此转换。gcc 中没有内置功能可以在编译时执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:06:43.010

看一下`m4`预处理器。它可以做到这一点以及更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T01:31:28.660

使用[Chaos pp](https://github.com/rofl0r/chaos-pp)库（适用于 C89 和 C99 预处理器）你可以这样做：

```
CHAOS_PP_CONCAT
(
    (CHAOS_PP_STRING) CHAOS_PP_STRING_TO_UPPER(M i x e d C a s e)
) 
// Expands to MIXEDCASE 
```

字符的有效值是数字（0 到 9）、基本源字符集中的字母字符（a 到 z 和 A 到 Z）和下划线 (_)。下面是使用其他字符的示例：

```
CHAOS_PP_CONCAT
(
    (CHAOS_PP_STRING) CHAOS_PP_STRING_TO_UPPER(a b C _ 1 0)
)
// Expands to ABC_10 
```

它还具有用于对标记进行字符串化的宏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:50:44.200

您可以自己查看[手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/cpp/index.html)。如果你在那里找不到任何你想要的东西，你总是可以创建自己的预处理器（例如，这可能只是你的 Makefile 中的一个 Perl 单行器）。

# asp.net - Devexpress 报告标题带导致第一页中详细信息带中的表格在下一页上展开

> ID：12693496
> 
> 赞同：0
> 
> 时间：2012-10-02T15:33:24.250
> 
> 标签：asp.net, devexpress, xtrareport

在 Devexpress 报表中，报表标题带导致第一页中详细信息带中的 XRTable 在下一页上展开，然后在报表标题带的相同高度处分页，使页面几乎为空，除了某些行。

任何提示如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:23:31.183

整个报告正在动态初始化，并且通过在将其添加到波段之前将高度添加到报告标题波段中的 XRTable 来解决问题。

# junit - 如何根据多个条件过滤测试

> ID：12693501
> 
> 赞同：0
> 
> 时间：2012-10-02T15:33:34.863
> 
> 标签：junit, testng, jbehave

我有大量的测试，我希望能够过滤这些测试，以便我可以运行特定的测试。我目前正在将 JBehave 与 JUnit 一起使用

如果我有三组标准优先级，其值从 1 到 5 种颜色，可能值为红色、绿色、蓝色和黄色天，可能值为一周中的几天

如果我设置了优先级 == 1、颜色 == 蓝色、天 == 星期二的“过滤器”，那么我将获得所有条件具有优先级 == 1 或颜色 == 蓝色或天 == 的测试周二。这就是我是否使用 JUnit、TestNG 或 JBehave Meta 过滤器。

我真正想要的只是优先级== 1和颜色==蓝色和天==星期二的测试。

有没有我可以使用的框架来做到这一点？在应用程序中，我将有大约 8 组不同的标准，每个标准最多有大约 4 个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:37:24.433

您可以将 TestNG 与组和 BeanShell 一起使用来实现逻辑。[详情在这里](http://beust.com/weblog/2005/09/30/a-date-in-heaven-testng-and-beanshell/)。

# variables - 将 CMD 结果传递给批处理文件中的变量

> ID：12693503
> 
> 赞同：2
> 
> 时间：2012-10-02T15:33:38.153
> 
> 标签：variables, scripting, batch-file

我正在尝试使用 PSTools 安装应用程序和一组服务，但我想考虑到我尝试连接的计算机可能已关闭或位于其他网络上，而该网络无法从内部网络访问。

基本上，如果机器无法通过管理员共享访问，这是我收到的消息：

> 无法访问*MachineName*：
> 找不到网络路径。
> 确保在*MachineName*上启用了默认的 admin$ 共享。

这是我用来尝试捕获“错误消息”然后报告安装是否成功的语法（取决于它是否可以联系机器）

```
@echo off
set /p name=What is the machine name?: 
psexec.exe \\%name% -u *useraccount* -p *password* \\ServerName\installation.bat
FOR /F "tokens=*" %%A IN ('COMMAND ^| FIND "Couldn't access"') DO SET Error=%%A
If "%Error%"=="Couldn't access" 
ECHO Installation Failed.
Else
ECHO Installtion complete.  
Pause
exit 
```

目前它挂在它定义错误变量的地方。无法完全弄清楚我在这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:23:33.633

`'COMMAND ^| FIND "Couldn't access"'`打开一个命令外壳，这就是它挂起的原因。在退出该 shell 之前它不会继续。

您将需要查看将错误消息重定向到另一个文件。`2>Errors.txt`在 psexec 行上会给你一个文件在下一行搜索。

这将使批处理文件看起来像这样：

```
@echo off
set /p name=What is the machine name?: 
psexec.exe \\\%name% ... \\\ServerName\installation.bat 1>Error.txt 2>&1 
for /f "tokens=*" %%A in ('FIND /i error.txt "Couldn't Access"') do SET Error=%%A
If not x%ERROR:Couldn=%==x%ERROR% (
ECHO Installation Failed.
) Else (
ECHO Installtion complete.  
)
Pause
exit 
```

（另外，请注意使用括号来制作多行 IF）
检查 if 将查看是否`Couldn`是字符串的一部分，因为直接比较将不起作用，因为您必须检查包括机器名称在内的整个字符串

# ruby-on-rails - Rails - 如果项目不存在，则链接到新操作而不是显示？

> ID：12693511
> 
> 赞同：0
> 
> 时间：2012-10-02T15:34:11.820
> 
> 标签：ruby-on-rails, action, conditional

我正在尝试创建一个链接，以便如果当前用户已经创建了一个项目，那么他们只需单击“项目”链接，它就会将他们带到他们的项目。每个用户只能有一个项目。如果他们没有项目，那么它将把他们带到表单来创建一个（即新的视图/动作）。

我该怎么办？我道歉，我是新来的Rails。目前，我正在使用以下内容：

```
<%= link_to 'Project', project_path %> 
```

如果用户已经有一个项目，它工作正常，但如果一个不存在，则说“没有路线匹配 {:action=>"show", :controller=>"projects"}"。我不知道从哪里开始 - 我是在 link_to 中添加条件，还是我需要将它放入控制器中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:42:18.370

我想你应该在`new`动作中检查它。查找项目（如果存在）并重定向到`edit`操作。

如果您决定呈现用户的链接可以欺骗您并`/projects/new`在地址栏中输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:41:21.927

```
<%= link_to 'Project', 
      current_user.project.present? ? 
        project_path(current_user.project) : 
        new_project_path %> 
```

# php - PHP 和全局数组

> ID：12693514
> 
> 赞同：1
> 
> 时间：2012-10-02T15:34:28.060
> 
> 标签：php, arrays, global-variables

我需要一个 php 中的全局数组。

这是示例：

```
global $array;

$array[0] = test; 
```

if (something) function f1() else function f2();

```
function f1()
{
   $array[0] = $array[0]." and test1";
}

function f2()
{
   $array[0] = $array[0]." and test2";
} 
```

但问题是该数组不受全局影响，而是局部影响。

你知道为什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:35:40.930

您必须在每个函数中调用 global ，以便 PHP 知道要查看本地范围之外的内容。

```
function f1()
{
   global $array;
   $array[0] = $array[0]." and test1";
}

function f2()
{
   global $array;
   $array[0] = $array[0]." and test2";
} 
```

请注意，在“现实世界”中，您应该尽可能**避免使用全局变量**，因为全局变量通常可以通过重构或重新设计来解决。全局变量往往会导致一个大泥球。

您应该考虑通过引用传递

```
function f3(&$array)
{
    $array[0] = $array[0]." and test3";
}

$array = array();
$array[0] = "test";

f3($array);
var_dump($array); 
```

您可以在以下位置查看**示例**：[http ://codepad.org/27R5ZuKM](http://codepad.org/27R5ZuKM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:49:01.597

将参数传递给函数并返回结果如何？

*避免吃一大块全球意大利面*：

```
function f1( $array )
{
   $array[0] = $array[0]." and test1";
   return $array;
}

function f2( $array )
{
   $array[0] = $array[0]." and test2";
   return $array;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:35:33.693

您需要在本地范围内（即在函数中）将数组声明为全局。

```
$array[0] = test; 
```

if (something) function f1() else function f2();

```
function f1()
{
   global $array;
   $array[0] = $array[0]." and test1";
}

function f2()
{
   global $array;
   $array[0] = $array[0]." and test2";
} 
```

# java - 如何创建表示对象的 XML 属性

> ID：12693516
> 
> 赞同：0
> 
> 时间：2012-10-02T15:34:32.350
> 
> 标签：java, xml

我正在为我正在从事的项目编写集成测试，但我被困住了。我有一个对象（我们称之为 travelerDetail），它存储代表航班预订座位的对象列表，我想在 xml 中创建一个 travelDetail 元素，该元素具有反映这些座位的属性。现在它有点像：

```
<SEAT DDATE="2012-05-22" TCHG="07:30:10" ROW="11" LETTER="A" POSN="R" SIDE="L" EXIT="N"   ID="D164771" CKIN="" ONBORD="" CHGCDE="C" PAGE="1" DCHG="2012-05-22 12:20:44.396" TCHG="16:43:45"  PCHG="07272" />

<TRAVELERDETAIL ITN="3224"  PDDATE="07:30:10" DOW="4" ORIG="BLI" DEST="LAS" FINALDST="LAS" PTYPE="R" LNAME="SPADE" FNAME="ADULTONE"  SFEE1="0.00" SFEE2="0.00" SFEE3="0.00" NOREFUND="" FARE="127.44" COST="0.00" FTAX="9.56" PFC="4.50" FSC="0.00" FEDEX="3.80" SECCHG="2.50" DISCAMT="0.00" ALLOCFARE="127.44" MILES="954" FUELGAL="0.000" FUELRATE="0.000" FUELPRICE="0.00" CNTRY="USA" BOOKTIME="2012-05-22 12:20:44.396" BKCHG="0.00" WAITING="N" TFLT="" BAGS="0" PPBAGS="1" PPFEE="19.99" APBAGS="0" APFEE="0.00" TPFEE="0.00" FREEBAGS="0" DEPART="2012-05-22 12:20:44.396" ARRIVE="2012-05-22 12:20:44.396" GENDER="M" DOB="1970-01-01" DHSSEQ="0" CHGCDE="A" PAGE="0" DCHG="2012-05-22" TCHG="07:30:10" REC_ID="-10"/> 
```

TravelerDetail 类维护旅客可能已在航班上预订的座位列表。我可以像这样创建 xml 测试数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:45:58.947

恕我直言，XML 属性可以是任何对象的属性...而不是对象本身

这可能是您希望 xml 的样子。

```
<TRAVELERDETAIL ITN="3224"  PDDATE="07:30:10" DOW="4" ORIG="BLI" DEST="LAS" FINALDST="LAS" PTYPE="R" LNAME="SPADE" FNAME="ADULTONE"  SFEE1="0.00" SFEE2="0.00" SFEE3="0.00" NOREFUND="" FARE="127.44" COST="0.00" FTAX="9.56" PFC="4.50" FSC="0.00" FEDEX="3.80" SECCHG="2.50" DISCAMT="0.00" ALLOCFARE="127.44" MILES="954" FUELGAL="0.000" FUELRATE="0.000" FUELPRICE="0.00" CNTRY="USA" BOOKTIME="2012-05-22 12:20:44.396" BKCHG="0.00" WAITING="N" TFLT="" BAGS="0" PPBAGS="1" PPFEE="19.99" APBAGS="0" APFEE="0.00" TPFEE="0.00" FREEBAGS="0" DEPART="2012-05-22 12:20:44.396" ARRIVE="2012-05-22 12:20:44.396" GENDER="M" DOB="1970-01-01" DHSSEQ="0" CHGCDE="A" PAGE="0" DCHG="2012-05-22" TCHG="07:30:10" REC_ID="-10">
   <SEAT DDATE="2012-05-22" TCHG="07:30:10" ROW="11" LETTER="A" POSN="R" SIDE="L" EXIT="N"   ID="D164771" CKIN="" ONBORD="" CHGCDE="C" PAGE="1" DCHG="2012-05-22 12:20:44.396" TCHG="16:43:45"  PCHG="07272"/>
   <SEAT /> ...

</TRAVELERDETAIL> 
```

当然，您可以为您的 TRAVELERDETAIL 分配任意数量的座位，因为它由行程确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:44:54.233

您可以嵌套 XML 元素。

```
<TRAVELERDETAIL>
    <SEAT />
    <SEAT />
</TRAVELERDETAIL> 
```

# java - 使用对泛型对象的无类型引用时，迭代成员类型化集合失败

> ID：12693535
> 
> 赞同：11
> 
> 时间：2012-10-02T15:35:38.530
> 
> 标签：java, generics

> **可能重复：**
> [如果实例没有分配泛型类型，则每个循环问题的泛型](https://stackoverflow.com/questions/3316095/generics-in-for-each-loop-problem-if-instance-does-not-have-generic-type-assigne)

有人可以澄清为什么`iterate1()`编译器（Java 1.6）不接受吗？我不明白为什么`iterate2()`而且`iterate3()`好多了。

```
import java.util.Collection;
import java.util.HashSet;

public class Test<T> {

    public Collection<String> getCollection() {
        return new HashSet<String>();
    }

    public void iterate1(Test test) {
        for (String s : test.getCollection()) {
            // ...
        }
    }

    public void iterate2(Test test) {
        Collection<String> c = test.getCollection();
        for (String s : c) {
            // ...
        }
    }

    public void iterate3(Test<?> test) {
        for (String s : test.getCollection()) {
            // ...
        }
    }

} 
```

编译器输出：

```
$ javac Test.java
Test.java:11: incompatible types
found   : java.lang.Object
required: java.lang.String
  for (String s : test.getCollection()) {
                                              ^
Note: Test.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T15:47:36.747

当您使用原始类型（例如，`Test`而不是`Test<T>`，编译器将其（[JLS 4.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)）视为该类型的*擦除*（[JLS 4.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)） - 完全擦除泛型，无论它们是否使用类型参数：

> 如果构造函数或方法的签名被擦除，构造函数或方法的类型参数（第 8.4.4 节）和方法的返回类型（第 8.4.5 节）也会被擦除。

基本上，编译器将原始类型的使用视为您根本不希望该代码知道泛型的指示 - 因此方法签名被删除为：

```
public Collection getCollection() 
```

...因此编译时错误，因为推断的元素类型是`Object`，根据[JLS 14.14.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)。

# java - 如何在Android logcat中像调试一样获取apache日志

> ID：12693540
> 
> 赞同：0
> 
> 时间：2012-10-02T15:35:48.183
> 
> 标签：java, android

我目前正在使用 webview 加载包含大量 javascript 的网页，并且在调试究竟加载了什么以及何时在 webview 中时遇到了很多麻烦。

然后我看到了这篇文章，其中操作似乎正在使用 apache 日志来监视他的 webview 中的网页加载事件。 [提升 webView 性能（应该和原生 Web 浏览器的性能一样）](https://stackoverflow.com/questions/3652583/enhance-webview-performance-should-be-the-same-performance-as-native-web-browse/4799448#4799448)

我可以得到一个类似的实用程序插件或任何东西，以便我可以在 ddms 视图中将它与 logcat 一起使用。

如果可能，请提供一些关于如何为 android 配置它的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:34:34.913

我认为 OP 正在使用远程访问工具（ssh？）连接到他的服务器并从那里查看 Apache 日志。

您可以尝试子类`WebView`化并提供您自己的`onLoadResource`、`onPageFinished`等实现。这应该让您了解是否/何时在 WebView 中加载内容。

# intellij-idea - 如何将一个动作绑定到 Intellij 中的多个快捷键？

> ID：12693544
> 
> 赞同：4
> 
> 时间：2012-10-02T15:35:55.127
> 
> 标签：intellij-idea, keyboard-shortcuts, keymapping

我想绑定一些 IntelliJ IDEA 快捷键，但同时保留默认绑定以防有人想使用我的 IDE（例如结对编程）。

有没有办法为 IntelliJ IDEA 中的一个操作分配多个快捷方式？或者有没有一个插件可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:56:38.097

它开箱即用，只需向操作添加新的键盘快捷键，旧的快捷键将被保留。请注意，您不能添加与其他操作冲突的快捷方式。

![添加快捷方式](../Images/8bf0044a2a2d47d39afa3df6e2ec5aa9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:00:49.453

在 Settings -> Keymap 中，没有任何东西可以阻止将多个快捷键分配给同一个操作。选择“添加键盘快捷键”并分配您的快捷键。保存后，使用下一个快捷键再次选择“添加键盘快捷键”。两者现在都应该工作。

这是使用 Intellij IDEA 9.0 进行的测试。

# objective-c - TableView 和 heightForRowAtIndexPath

> ID：12693547
> 
> 赞同：0
> 
> 时间：2012-10-02T15:36:08.303
> 
> 标签：objective-c, ios, xcode, height, tableview

我希望每个帖子在多行中显示完整标题，并且每个单元格根据文本标题字符数具有自己的自定义高度。我这样做了，但它不起作用。我认为每个对象都应该被独立调用。我怎样才能使这项工作？这是我的代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    PFObject *object1 = [PFObject objectWithClassName:@"Posts"];
    NSString *string1 = [object1 objectForKey:@"text"];
    NSLog(@"%@",string1);

    CGSize theSize = [string1 sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, 9999.0f) lineBreakMode:UILineBreakModeWordWrap];
    // numberOfTextRows is an integer.

    numberOfTextRows = (round(theSize.height/14));

    if ((indexPath.row== 0) || (numberOfTextRows <2)) {
        return 44;
    }

    else {
        return theSize.height +18;
    }
} 
```

注意：显示的 NSLog 显示 (null) 提前谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:34:59.817

这是我的解决方案。随心所欲地定制。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellText;
    CGRect screenBound = [[UIScreen mainScreen] bounds];
    CGSize screenSize = screenBound.size;
    CGFloat screenWidth = screenSize.width;
    CGFloat screenHeight = screenSize.height;

    if (searchDisplayController.active && [searchResults count]) {
        cellText = [searchResults objectAtIndex:indexPath.row];
    } else {
        cellText = [detailPeriodsContent objectAtIndex:indexPath.row];
    }
    UIFont *cellFont = [UIFont systemFontOfSize:14];
    CGSize constraintSize = CGSizeMake(screenWidth-40, MAXFLOAT);
    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 35;
} 
```

# php - 在 Doctrine\ORM\PersistentCollection 中定义自定义方法

> ID：12693553
> 
> 赞同：5
> 
> 时间：2012-10-02T15:36:17.687
> 
> 标签：php, doctrine, doctrine-orm

我正在获取具有多对多关系的数据，并且我想定义一个自定义方法。是否有可能（以及如何）使用类似的东西：

```
$hotel = $entityManager->getRepository('Hotels')->findOneById(1);
$types = $hotel->getTypes(); //$types is instance of **Doctrine\ORM\PersistentCollection**
$types->myCustomFunction(); //do something 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:08:27.637

它似乎尚未实施。

请参阅此 Doctrine 的 JIRA 问题： http: [//www.doctrine-project.org/jira/browse/DDC-547](http://www.doctrine-project.org/jira/browse/DDC-547)

> # 考虑允许自定义 PersistentCollection 实现
> 
> 我们应该考虑允许在每个关联的基础上配置自定义 PersistentCollection 实现。这可以让用户在不更改域模型代码的情况下为其某些集合设计优化 (SQL) 行为以提高性能。
> 
> 为此，需要为继承设计 PersistentCollection。

# node.js - Mongodb：如何以与数组元素相同的顺序对“选择”进行排序

> ID：12693555
> 
> 赞同：6
> 
> 时间：2012-10-02T15:36:36.937
> 
> 标签：node.js, mongodb

我正在执行这个 mongo 查询：

```
db.mytable.find({id:{$in:["1","2", "3", "4" ]}}); 
```

它以奇怪的顺序返回所有结果，如下所示：

```
4,3,2,1 
```

我需要以与查询数组中定义的顺序相同的顺序检索所有结果。

```
1,2,3,4 
```

是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-02-12T23:37:16.963

确实不能保证查询返回的结果的顺序，但您可以在之后对结果进行排序。两个例子，第一个是你想要的顺序，第二个是相反的。

```
const arr = ["1", "2", "3", "4" ];

db.collection.find({ id: { $in: arr }})  
  .then(result => {

    let sorted = arr.map(i => result.find(j => j.id === i));
    console.log(sorted) // 1, 2, 3, 4

    let reversed = arr.reverse().map(i => result.find(j => j.id === i));
    console.log(reversed) // 4, 3, 2, 1

}); 
```

如果您想进行真正的 MongoDB ID 查找，请使用`db.collection.find({ _id: { $in: arr }})`and `.map(i => result.find(j => j._id == i))`（注意两个等号而不是三个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:47:47.320

你可以写一个这样的查询：

```
db.mytable.find({id:{$in:["1","2", "3", "4" ]}}).sort({id:1}) 
```

得到你的结果`ORDER BY id ASC`

来源：[MongoDB 高级查询](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D)

但是，如果您只想根据 $in 数组对结果进行排序，请尝试以相反的顺序对 $in 数组进行排序，关于 $in 数组的第一个元素的结果可能会显示为结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T00:35:00.073

有几点需要注意：

1.) MongoDB 与大多数数据库一样，不保证查询返回的结果的顺序，除非您使用对`sort()`. 如果您确实想保证查询结果以特定顺序返回，则需要指定该特定排序顺序。

2.) 通常，最近更新/移动的文档将显示在结果集的末尾，但仍然不能保证。MongoDB 使用“自然顺序”来对对象进行本机排序，尽管这非常接近插入顺序，但不能保证相同。

3.) 索引字段的行为会有所不同。值得指出的是，您的查询看起来像是 using`id`而不是`_id`. 前者，`_id`默认情况下`id`会被索引，除非您明确地向该字段添加索引，否则不会被索引。

您可以在此处阅读有关 MongoDB 排序和排序的更多信息： [http ://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)

# email - 发送带有背景图片的电子邮件

> ID：12693556
> 
> 赞同：2
> 
> 时间：2012-10-02T15:36:41.100
> 
> 标签：email, outlook, vml

我尝试使用表格中的图像作为背景图像创建电子邮件。我发现了一部分应该可以工作的代码。在大多数电子邮件客户端中，它确实有效，但在 Outlook 2010 中我看到的是图像，而不是文本。我能做些什么来让它发挥作用吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>HVAC Success Confirmation</title>
</head>
<body style="background-color: #999999; vertical-align: top;">
<table width="600" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
<tr>
    <td style="width: 600px; height: 350px; background-image: url('http://epicreviewsdotorg.files.wordpress.com/2011/05/unicorn1.jpg');">
        <!--[if gte mso 9]>
        <v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); display: inline-block; position: absolute; width: 600px; height: 350px; top: 0; left: 0; border: 0; z-index: 1;' src="http://epicreviewsdotorg.files.wordpress.com/2011/05/unicorn1.jpg" />
        <v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style='behavior: url(#default#VML); display: inline-block; position: absolute; width: 600px; height: 350px; top: -5; left: -10; border: 0; z-index: 2;'>
        <div>
        <![endif]-->
        <table width="600" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse;">
          <tr>
            <td height="350" align="center" valign="top" style="padding-top:80px">
                <p>This table in here has a bunch of stuff I want to lay over the background image...</p>         
            </td>
          </tr>
        </table>
        <!--[if gte mso 9]>
        </div>
        </v:shape>
        <![endif]-->
    </td>
</tr>
</table>
</body>
</html> 
```

我发现了多个页面，例如[http://iamskwerl.com/tech/2011/11/html-emails-outlook-and-background-images/](http://iamskwerl.com/tech/2011/11/html-emails-outlook-and-background-images/)和[http://www.campaignmonitor.com/blog/post/3363/updated- apply-a-background-image-to-html-email/](http://www.campaignmonitor.com/blog/post/3363/updated-applying-a-background-image-to-html-email/)但它并没有让我更进一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T16:19:25.753

我能够做到这一点的唯一方法是通过此代码（TD 表）。我在 Outlook 客户端 2010 中进行了测试。我还通过 webmail 客户端进行了测试，并且两者都适用。复制并粘贴此内容，您唯一需要做的就是更改 your_image.jpg（同一图像有两个实例，请确保您为代码更新）和#your_color。

```
<td bgcolor="#your_color" background="your_image.jpg">

<!--[if gte mso 9]>

<v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); display:inline-block; position:absolute; height:300px; width:600px; top:0; left:0; border:0; z-index:1;' src="your_image.jpg"/>

<v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style='behavior: url(#default#VML); display:inline-block; position:absolute; height:300px; width:600px; top:-5; left:-10; border:0; z-index:2;'>

<![endif]-->

<p>Text over background image.</p>

<!--[if gte mso 9]>

</v:shape>

<![endif]-->

</td> 
```

[资源](http://blog.mailermailer.com/email-design/background-images-in-html-email-the-naked-truth)

# html - 无法正确对齐此链接

> ID：12693564
> 
> 赞同：1
> 
> 时间：2012-10-02T15:37:06.343
> 
> 标签：html, css, cellpadding

编辑：我不是 Html 专业人士。

我想添加这个文本：

`AIM -> Historian`

`AIM -> AIM`

`AIM -> PI`

`Historian -> PI`

像上面图片中的那样完美对齐。它是所有这些文本的一个链接。 ![打印屏幕](../Images/a5b9516eaaa7067bce3ce486e8124243.png)

我已经尝试过`<p style ="text-indent:5em;`，我也尝试过制作，`<ul style ="text-indent:5em;`但间距仍然很奇怪，不是我想要的。正如您所看到的，上面有一个不需要的空白空间，并且文本对齐不正确。

**编码**

```
<div class="tabContentBorders">
<div id="tab1">
<p><strong>Data Acquisition and Reporting</strong></p>
<p>        <a href="IOM_AssetPerformanceManagement.html">High-Speed Data Acquisition</a></p>
<p>        <a href="IOM_RealTimeBusinessIntelligence.html">Custom Driver Development</a></p>
<p>        <a href="IOM_Real-TimeProfitOptimization.html">Custom Reporting Solutions</a></p>
<p><strong>15)  Historian Migration</strong></p>
<p style ="text-indent:5em;">        <a href="IOM_EnterpriseControl.html"></a><br>AIM -> Historian<br>AIM -> AIM<br>AIM -> PI<br>Historian -> PI</p>
<p><strong>Custom Windows Application</strong></p>
<p>        <a href="consultingandservices_solutionconsulting_regulatorycomplianceconsulting-2.html">SOE/TRA Suite</a></p>
<p>        <a href="ConsultingandServices_SolutionConsulting_SafetyLifecycleServices.html">TCP Time-Sync</a></p>
<p>        <a href="IOM_ProductionEnergyManagement.html">Power Calculations</a></p>

</div> 
```

**样式表**

```
body { background: #000 url("../images/background.jpg") no-repeat center top; }
body, h1, h2, h3, h4, h5, h6, ol, ul, li, p, td { font-family: Verdana, Geneva, Tahoma, sans-serif; color: #fff; font-weight: normal; }

.frame { z-index: 10; margin-left: auto; margin-right: auto; width: 970px; margin-bottom: 20px; position: relative;}

/*  CSS grid credit 960 Grid System http://960.gs  */
/*  Must declare this for all containers with widths in the layout grid so they properly align alongside of each other  */
.leftCol, .rightCol, .headerBox, .shadedBox ul, .rightSplitCol
    { display:inline; float:left; margin-left:0; margin-right:0; }

.topBox { display: block; height: 82px; background: url("../images/header.jpg") no-repeat left top; margin-bottom: 18px; }
.topNav { margin:0; padding:0; float: right; position: relative; top: 10px; right: 10px; text-align: right; font-size: 13px; }
.topNav a:link, .topNav a:visited { color: #fff; text-decoration: none; } .topNav a:hover { text-decoration: underline; }

.leftCol { width: 515px; } 
.leftCol .box { margin: 15px 20px !important; }
.rightCol { width: 435px; margin-left: 20px; } .rightSplitCol { width: 232px; margin: 5px 0 0 0; } .splitColspace { margin-left: 10px;}
.rightSplitCol p { font-size: 13px !important; padding: 0 0 5px 0; }

.mission { padding: 10px 0 0 10px;}
.headerBox { color: #000; margin-bottom: 5px; padding: 5px 20px 5px 10px; font-size: 18px; } .headerBoxPink { color: #000; margin-bottom: 10px; padding: 5px 20px 5px 10px; font-size: 15px; background-color: #d81c3f; }
.boxBlue { background-color: #00b9e4;} .boxOrange { background-color: #e87511;} .boxGreen { background-color: #c3cf21;}

.shadedBox { background: url("../images/bkgrdBox.png") repeat; }  .venue { margin-bottom: 9px; padding: 7px !important; } .boxMargin { padding: 7px;}
.shadedBox a:link, .shadedBox a:visited { color: #c3d603; } .shadedBox a:hover, .shadedBox a:visited:hover { text-decoration: none; }
.shadedBox ul { list-style: disc; padding: 7px 0 5px 10px; font-size: 13px;  } .shadedBox li { padding-bottom: 0.75em; line-height: 1.4em;}
ul.leftSide { width: 200px; margin-left: 15px; margin-right: 0;}  ul.rightSide { width: 210px; margin-left: 18px; margin-right: 0;}
.shadedBox p { font-size: 14px; line-height: 1.2em; }  .venue p { line-height: 1.3em !important; }

.small{ color: #ccc; font-size: 12px; }  .big { font-size: 26px; padding-top: 5px;}
.button { float: right; }
.iconSubscribe { float: right; padding: 25px 0 0 5px;}  .iconOpen { float:left; padding: 0 10px 0 0;}
a.whiteLink { color: #fff !important; } 

.footer { background: url("../images/footerDots.png") no-repeat left top; margin: 10px 0 10px 20px;}
.footer p { font-size: 11px; margin-top: 20px;}
.brands { background-color: #636466; display:inline; float:right; color: #000; padding: 5px 10px; font-size: 13px;}
.brands a:link, .brands a:visited { color: #000; text-decoration:none; }  .brands a:hover, .brands a:visited:hover { text-decoration:none; }

/*  960 Grid System: Clear style used with various floated containers  */
html body * span.clear, html body * div.clear, html body * li.clear, html body * dd.clear {background:none;border:0;clear:both;display:block;float:none;font-size:0;list-style:none;margin:0;padding:0;overflow:hidden;visibility:hidden;width:0;height:0}
.clearfix:after {clear:both;content:'.';display:block;visibility:hidden;height:0}
.clearfix {display:inline-block}
* html .clearfix{height:1%}
.clearfix {display:block} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:43:53.203

我建议对基本代码进行简单的重写。在这里，我使用一个`H3`作为标题，并以段落为目标。除非您使用`white-space:pre`空白，否则将始终折叠到一个空格的宽度。

代码可以清理更多，段落标签更少，但这里有一个快速的想法。

[http://jsfiddle.net/Ufx58/1/](http://jsfiddle.net/Ufx58/1/)

## HTML

```
<div class="tabContentBorders">
<div id="tab1">
<h3>Data Acquisition and Reporting</h3>
<p>        <a href="IOM_AssetPerformanceManagement.html">High-Speed Data Acquisition</a></p>
<p>        <a href="IOM_RealTimeBusinessIntelligence.html">Custom Driver Development</a></p>
<p>        <a href="IOM_Real-TimeProfitOptimization.html">Custom Reporting Solutions</a></p>
<h3>15)  Historian Migration</strong></h3>
<p style ="text-indent:5em;">        <a href="IOM_EnterpriseControl.html"></a><br>AIM -> Historian<br>AIM -> AIM<br>AIM -> PI<br>Historian -> PI</p>
<h3>Custom Windows Application</h3>
<p>        <a href="consultingandservices_solutionconsulting_regulatorycomplianceconsulting-2.html">SOE/TRA Suite</a></p>
<p>        <a href="ConsultingandServices_SolutionConsulting_SafetyLifecycleServices.html">TCP Time-Sync</a></p>
<p>        <a href="IOM_ProductionEnergyManagement.html">Power Calculations</a></p>

</div> 
```

## CSS

```
h3{
    font-weight:bold;
    font-size:1.2em;
}

#tab1 p{
    padding-left:2em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:56:07.477

这就是我的做法，并且有效

```
<p><strong>Data Acquisition and Reporting</strong></p>
<p style="padding-left : 2em;"><a href="IOM_AssetPerformanceManagement.html">High-Speed Data Acquisition</a></p>
<p style="padding-left : 2em;"><a href="IOM_RealTimeBusinessIntelligence.html">Custom Driver Development</a></p>
<p style="padding-left : 2em;"><a href="IOM_Real-TimeProfitOptimization.html">Custom Reporting Solutions</a></p>
<p><strong>Historian Migration</strong></p>
<p style="padding-left : 2em;"><a href="IOM_EnterpriseControl.html">
AIM -> HistorianAIM -> AIM<br>
AIM -> PI<br>
Historian -> PI<br>
</a>
</p>
<p><strong>Custom Windows Application</strong></p>
<p style="padding-left : 2em;"><a href="consultingandservices_solutionconsulting_regulatorycomplianceconsulting-2.html">SOE/TRA Suite</a></p>
<p style="padding-left : 2em;"><a href="ConsultingandServices_SolutionConsulting_SafetyLifecycleServices.html">TCP Time-Sync</a></p>
<p style="padding-left : 2em;"><a href="IOM_ProductionEnergyManagement.html">Power Calculations</a></p> 
```

# database-design - 数据是关系型还是数据库设计？

> ID：12693565
> 
> 赞同：1
> 
> 时间：2012-10-02T15:37:08.760
> 
> 标签：database-design, nosql, relational-database

我是数据库领域的新手，陷入了这种困惑。我正在将离线应用程序的数据库层从 sqlite 转换为 IndexedDB。目前 SQLite 中的数据库是高度相关的。此数据库上发生的太多查询是连接查询。当我开始将此数据库转换为适合 IndexedDB (NoSQL) 的数据库时，我想知道：

是否可以重新设计关系数据库布局并将其转换为属于 NoSQL 世界的设计（不需要任何连接）？换句话说，相同的数据是否可以同时建模到关系数据库和 NoSQL 数据库中。或者关系/非关系是数据的属性，数据应该决定是否需要非关系数据库或关系数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:05:18.643

导致您更改后端数据库的最初要求是什么？如果性能好，请尝试使用更“强大”的 SQL 数据库引擎（MySQL、PostgresQL），您可能会获得 x30 ！对于现有的复杂数据模型，NoSQL 不是一个简单的转换，如果隐含非精确匹配，甚至不是一个好的选择（除非使用评分机制，反向映射，所以“技巧”会使客户端代码有点复杂）

NoSQL 选择通常意味着您必须定义您的 noSQL 模型以适应您需要对其执行的操作。因此，您知道必须对数据执行哪些请求，并根据您希望对其完成的请求构建您的 NoSQL 模型。如果对所需请求的要求发生变化，您可能必须重新创建 NoSQL 模型以适应新请求。

SQL 选择更加灵活，允许您对现有数据进行任何操作，而对数据结构（如果有）的影响很小，因为关系足以获取请求的数据。但就原始性能而言，它不会与 NoSQL 竞争。

所以灵活性和性能之间的永恒选择！

使用 NoSQL => 性能优于灵活性 => 处理需求更改、复杂操作的复杂代码、专用客户端界面和编码的更多工作。

SQL => 性能上的灵活性 => 处理需求更改的工作更少，“规范化”（带引号）SQL 语言隐藏了大部分复杂性，“通用”客户端界面和编码。性能问题可以通过更改引擎来缓解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:47:10.753

我不知道您为什么要同时使用 SQL 和 NoSQL 建模数据库，但是是的，可以将 SQL 模式“转换”为 NoSQL。使用 NoSQL，您的应用程序通过它的模型类而不是 SQL 来定义您的架构，您在数据库中定义架构，然后围绕它构建模型。要考虑关系，您只需将其中一个字段设为多值，例如哈希图等……取决于您使用的 NoSQL 解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:05:48.867

关系是一种对数据建模的方法。在关系模型下，原始数据经过称为规范化的分析过程。在规范化期间，数据被分成实体、关系和属性。见[这里](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)。

标准化是一个可逆的过程。虽然总是可以做到这一点，但并不总是明智的。例如，由于冗余数据，完全非规范化可能导致数据库规模爆炸。对数据库进行查询的灵活性通常也会降低，处理时间也会增加。插入变得乏味，因为所有实体都在一张表中表示。因此，如果实体被放大，则所有实体都必须被放大。

# sql - SQL SELECT 范围内的数字

> ID：12693566
> 
> 赞同：1
> 
> 时间：2012-10-02T15:37:10.790
> 
> 标签：sql, oracle

我需要帮助来解决我的问题。

我有一张这样的桌子，

```
id | Desc | Min Range | Max Range
-----------------------------------
1  |  A   |     0     |    10
2  |  B   |     11    |    20
3  |  C   |     21    |    30 
```

当我输入参数 20 时如何获得第二条记录。

我现在的解决方案是这样的：

```
select * from table where maxRange <= 20 
```

在java中，我得到最后一个结果列表。

我的问题是我在使用时没有参数来比较。例如。

```
select * from table where maxRange between ? and ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:38:45.593

```
select * from table where ? between minrange and maxrange 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:39:31.910

您需要在查询时将参数添加到您的命令中。

创建一个名为 @Parameter 的参数，其值为 20 - 这取决于您使用的技术。然后：

> SELECT * FROM table WHERE @Parameter >= MinRange AND @Parmeter <= MaxRange

# objective-c - 检测editButtonItem点击

> ID：12693568
> 
> 赞同：0
> 
> 时间：2012-10-02T15:37:26.960
> 
> 标签：objective-c, ios, uitableview, uibarbuttonitem

我在导航栏中有一个带有 editButtonItem 的 UITableView。每当用户点击editButtonItem时，我都想播放点击声音。现在，我正在使用以下方法在点击编辑按钮时播放点击声音

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
//Code to play the tap sound file
[super setEditing:editing animated:animated];} 
```

但我遇到的问题是，当用户滑动 tableviewcell 并显示删除按钮时，点击声音也会播放，这不是我想要的。所以，我的问题是，有没有更好的方法来检测何时点击了 editButtonItem？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:30:50.090

以下代码**仅**在点击编辑按钮时才会播放声音。当您点击**完成**时，它不会播放声音。此外，当您滑动单元格时，不应播放声音。

```
- (void)willTransitionToState:(UITableViewCellStateMask)state
{
    if (state == UITableViewCellStateShowingDeleteConfirmationMask) {
        swipedToDelete = YES; // BOOL ivar
    }
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated 
{
    [super setEditing:editing animated:animated];

    if (editing && !swipedToDelete) 
    {
        // Play sound
    }

    if (swipedToDelete) {
        swipedToDelete = NO;
    }
} 
```

# asp.net - LocalHost 出错，IE 无法显示网页

> ID：12693575
> 
> 赞同：0
> 
> 时间：2012-10-02T15:37:55.517
> 
> 标签：asp.net, iis, windows-7

我有一个问题，当我转到我的 IE 并写 localhost 时，IE 显示此消息“Internet Explorer 无法显示网页”。一周前，我请求了 localhost，但没有出现此消息。仅显示 IIS 7 映像（工作良好）。

我重新安装了 IIS，什么也没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:31:33.247

打开 IIS 管理器并确保Sites 文件夹下的**Default Web Site**和Application Pools 下的**DefaultAppPool已启动。**

# c# - 通过 installutil 将参数传递给服务安装程序

> ID：12693578
> 
> 赞同：8
> 
> 时间：2012-10-02T15:38:05.220
> 
> 标签：c#, powershell

我正在尝试编写一个 power shell 脚本来安装服务，但该服务需要一个额外的命令行参数传递给它。我很难让这件事过去。

这是使用该参数的服务安装程序；

```
this.serviceInstaller.ServiceName = string.Format("My brill service {0}",this.Context.Parameters["environment"]) 
```

我尝试以两种方式传递参数；

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\InstallUtil.exe "C:\foo\bar.exe /environment:tomtest" 
```

（这会给出错误“url 上的目录无效”）

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\InstallUtil.exe /environment:tomtest "C:\foo\bar.exe" 
```

（这只是改变服务名称）

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T15:56:07.410

我非常接近。必须使用等号`=`来分配参数的值（不是冒号`:`）：

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\InstallUtil.exe /environment=tomtest "C:\foo\bar.exe" 
```

# c# - EF：一对一的关系

> ID：12693580
> 
> 赞同：1
> 
> 时间：2012-10-02T15:38:13.270
> 
> 标签：c#, asp.net-mvc-3, entity-framework, one-to-one

我正在尝试建立双向的一对一关系。但是，我无法获得两个实体的双向设置。

例如，假设一个人有一个电话号码，一个电话号码只能与一个人关联。我会：

```
 public class Person : Entity
  {
    public long PersonId { get; set; }
    public virtual PhoneNumber PhoneNumber {get; set; }
  }

  public class PhoneNumber : Entity
  {
    public long PhoneNumberId { get; set; }
  } 
```

但是，通过这种重新安排，我无法获得双向设置。即我不能拥有`phoneNumber.Person.`

* * *

*我试过的：*

```
 public class PhoneNumber : Entity
  {
    public long PhoneNumberId { get; set; }

    [InverseProperty("PersonId")]
    public virtual Person Person {get; set; }
  } 
```

当我执行以下代码时，这似乎不起作用：

```
 var realNumber = new PhoneNumber();
   var person = new Person() {PhoneNumber = realNumber};
   context.SaveChanges(); 
```

这里，PhoneNumber 实体有一列 Person（设置为 NULL），而 person 有一列 PhoneNumber（有值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:55:59.310

这对我有用

```
namespace Ef1to1
{
    public class TestContext : DbContext
    {

        public TestContext()
            : base("Data Source=127.0.0.1;database=Junk;Integrated Security=SSPI;")
        {

        }
        public DbSet<Person> Persons { get; set; }
        public DbSet<PhoneNumber> PhoneNumbers { get; set; }
    }
    [Table("Person")]
    public class Person 
    {
        [Key, Column("PersonId")]
        public long Id { get; set; }

        public virtual PhoneNumber phoneNumber { get; set; }
    }

    [Table("PhoneNumber")]
    public class PhoneNumber
    {

        [Key, Column("PhoneNumberId"), ForeignKey("person")]
        public long Id { get; set; }

        public virtual Person person { get; set; }
    } 

   public class Program
    {

        static void Main(string[] args)
        {
            var realNumber = new PhoneNumber();
            var person = new Person() { phoneNumber = realNumber }; 
            var context = new TestContext();

            context.Persons.Add(person) ;
            context.SaveChanges();
            ;

        }
    }
} 
```

# c# - WCF 请求中的编码字符串为空

> ID：12693581
> 
> 赞同：1
> 
> 时间：2012-10-02T15:38:16.373
> 
> 标签：c#, asp.net, wcf, rest

在获取从客户端发送到服务器上的 WCF 服务的 base64 编码字符串时，我遇到了一个奇怪的问题。在我的 WCF 服务方法中，此字符串始终为 null。我的商务舱是：

```
[DataContract(Namespace = "")]
public class Test
{
    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public int Name { get; set; }
    [DataMember]
    public int Age { get; set; }
    [DataMember]
    public string MyString { get; set; }
} 
```

我正在将 xml 中的帖子数据发送到我的 WCF 服务：

```
 string data = string.Format("<Test><Id>{0}</Id><Name>{1}</Name><Age>{2}</Age><MyString>{3}</MyString></Test>",
        1, "name", 20, Convert.ToBase64String(image));//image is in bytes 
```

上面的“图像”以字节为单位。

在 MyTestService.svc.cs 中的服务器上接收客户端数据时：

```
 public void CreateTest(Test test)
    { 
```

在“测试”对象中，我得到了从客户端发送的所有属性的值，除了“MyString”属性。它总是空的。我在 Fiddler 中仔细检查了 xml 中的“MyString”标签包含 base64 编码的字符串。你能帮我解决这个问题吗？

xml 标签中属性值的长度是否有限制。图像的编码字符串足够长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:03:49.573

（`DataContractSerializer`WCF 的默认序列化程序）强制数据协定中元素的顺序。如果您没有使用`Order`属性的`[DataMember]`属性显式指定顺序，则默认顺序是字母顺序。尝试按该顺序（Age、Id、MyString、Name）发送请求，您应该会看到 MyString 的值正确填充。

```
public class StackOverflow_12693581
{
    [DataContract(Namespace = "", Name = "Test")]
    public class TestData
    {
        [DataMember]
        public int Id { get; set; }
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }
        [DataMember]
        public string MyString { get; set; }
    }
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        void Process(TestData test);
    }
    public class Service : ITest
    {
        public void Process(TestData test)
        {
            Console.WriteLine("MyString: {0}", test.MyString ?? "<<NULL>>");
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        byte[] image = Enumerable.Range(1, 100).Select(i => (byte)i).ToArray();

        WebClient c = new WebClient();
        Console.WriteLine("Order as in the question");
        string data = string.Format("<Test><Id>{0}</Id><Name>{1}</Name><Age>{2}</Age><MyString>{3}</MyString></Test>",
            1, "name", 20, Convert.ToBase64String(image));//image is in bytes 
        c.Headers[HttpRequestHeader.ContentType] = "text/xml";
        c.UploadString(baseAddress + "/Process", data);
        Console.WriteLine();

        c = new WebClient();
        Console.WriteLine("Correct order");
        data = string.Format("<Test><Age>{2}</Age><Id>{0}</Id><MyString>{3}</MyString><Name>{1}</Name></Test>",
            1, "name", 20, Convert.ToBase64String(image));//image is in bytes 
        c.Headers[HttpRequestHeader.ContentType] = "text/xml";
        c.UploadString(baseAddress + "/Process", data);

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# java - 是否可以拉出单元测试运行器窗格？

> ID：12693584
> 
> 赞同：2
> 
> 时间：2012-10-02T15:38:30.127
> 
> 标签：java, intellij-idea

我有 2 台显示器，在我的左侧显示器中我有 intelliJ，在我的右侧显示器中，我想将单元测试运行器面板拖到另一台显示器或侧面。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:41:40.450

是的，只需使用浮动模式设置将面板转换为窗口。像这儿：![在此处输入图像描述](../Images/a8e8af8343acd0829f6d01eff0c4e1da.png)

# javascript - 异步函数返回

> ID：12693594
> 
> 赞同：0
> 
> 时间：2012-10-02T15:39:06.010
> 
> 标签：javascript, titanium

我正在 Titanium Studio 中的一个应用程序中工作。我实现了 MVC 基础架构，并且在控制器中我想从云中获取一些数据，然后才调用视图。代码与此类似。

```
 Default : function() {
    Cloud.Objects.query({
        classname : 'Customer',
    }, function(e) {
            if (e.success) {
                Ti.API.info('aci ' + e.Customer);
                favorites = e.Customer;
                return this.view("Default", favorites);
            } else {
                alert('Error:\\n' + ((e.error && e.message) || JSON.stringify(e)));
            }
        });
    },
} 
```

问题是，第一个函数必须返回“this.view("Default", favorites);"，而不是来自查询的回调。另外，查询功能是异步的，我必须等待数据，然后才能调用视图。

你有什么想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:47:14.133

为一些自定义事件创建一个偶数处理程序，例如`receiveCustomer`.

当客户检索到时，触发事件`receiveCustomer`并将客户设置为事件数据或使用检索到的数据在回调外部初始化一些变量（但在这种情况下是在事件触发之前）。在事件`onReceiveCustomer`处理程序中，从事件数据或该变量中获取客户并呈现视图。

# javascript - 在 Gridview 中打印所选行的详细信息以弹出

> ID：12693595
> 
> 赞同：0
> 
> 时间：2012-10-02T15:39:11.167
> 
> 标签：javascript, jquery, sql-server, vb.net, gridview

我需要帮助将变量从网格视图中的选定行传递到弹出窗口。我需要创建一个循环，该循环将通过 gridview 并为选定的每一行，并将行详细信息传递给弹出模板中的对应标签，并为选定的每个附加行设置一个分页符。谁能指出我正确的方向，或者有人可以帮助我编写代码吗？

这是我当前的html代码：

```
<title> </title>

<script>

    function SelectAllCheckboxes(spanChk) {

        // Added as ASPX uses SPAN for checkbox
        var oItem = spanChk.children;
        var theBox = (spanChk.type == "checkbox") ?
            spanChk : spanChk.children.item[0];
        xState = theBox.checked;
        elm = theBox.form.elements;

        for (i = 0; i < elm.length; i++)
            if (elm[i].type == "checkbox" &&
                     elm[i].id != theBox.id) {
                //elm[i].click();
                if (elm[i].checked != xState)
                    elm[i].click();
                //elm[i].checked=xState;
            }
    }
</script>

</head>
<body>
<form id="form1" runat="server">
<div>

    <asp:LoginStatus ID="LoginStatus1" runat="server" />
    <br />
    <br />

    <br />
    <asp:Button ID="print2" runat="server" Text="Print" />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />

    <br />
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="CertificateID" DataSourceID="SqlDataSource1" EmptyDataText="There are no data records to display.">
        <Columns>

            <asp:TemplateField ShowHeader="true">
                <HeaderTemplate>
                    <input id="chkAll" onclick="javascript: SelectAllCheckboxes(this);" runat="server" type="checkbox"/>                       
                </HeaderTemplate>
                <ItemTemplate>                      
                   <asp:CheckBox ID="chkSelect" runat="server" />
                </ItemTemplate>                    
            </asp:TemplateField>
            <asp:BoundField DataField="CertificateID" HeaderText="CertificateID" InsertVisible="False" ReadOnly="True" SortExpression="CertificateID" />
            <asp:BoundField DataField="Customs_Entry" HeaderText="Customs_Entry" SortExpression="Customs_Entry" />             
            <asp:BoundField DataField="Date_Certificate" HeaderText="Date_Certificate" SortExpression="Date_Certificate" />
            <asp:BoundField DataField="Invoice_Number" HeaderText="Invoice_Number" SortExpression="Invoice_Number" />
            <asp:BoundField DataField="Product_Number" HeaderText="Product_Number" SortExpression="Product_Number" />
            <asp:BoundField DataField="Product_Name" HeaderText="Product_Name" SortExpression="Product_Name" />
            <asp:BoundField DataField="Product_Category" HeaderText="Product_Category" SortExpression="Product_Category" />
            <asp:BoundField DataField="CPSC_Regulation" HeaderText="CPSC_Regulation" SortExpression="CPSC_Regulation" />
            <asp:BoundField DataField="Date_Manufactured" HeaderText="Date_Manufactured" SortExpression="Date_Manufactured" />
            <asp:BoundField DataField="Manufacturer" HeaderText="Manufacturer" SortExpression="Manufacturer" />
            <asp:BoundField DataField="Date_Tested" HeaderText="Date_Tested" SortExpression="Date_Tested" />
            <asp:BoundField DataField="Test_Lot_ID" HeaderText="Test_Lot_ID" SortExpression="Test_Lot_ID" />
            <asp:BoundField DataField="Name_Laboratory" HeaderText="Name_Laboratory" SortExpression="Name_Laboratory" />
        </Columns>

    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:LocalSqlServer %>" DeleteCommand="DELETE FROM [Certificate] WHERE [CertificateID] = @CertificateID" InsertCommand="INSERT INTO [Certificate] ([Customs_Entry], [Date_Certificate], [Invoice_Number], [Product_Number], [Product_Name], [Product_Category], [CPSC_Regulation], [Date_Manufactured], [Manufacturer], [Date_Tested], [Test_Lot_ID], [Name_Laboratory]) VALUES (@Customs_Entry, @Date_Certificate, @Invoice_Number, @Product_Number, @Product_Name, @Product_Category, @CPSC_Regulation, @Date_Manufactured, @Manufacturer, @Date_Tested, @Test_Lot_ID, @Name_Laboratory)" ProviderName="<%$ ConnectionStrings:LocalSqlServer.ProviderName %>" SelectCommand="SELECT [CertificateID], [Customs_Entry], [Date_Certificate], [Invoice_Number], [Product_Number], [Product_Name], [Product_Category], [CPSC_Regulation], [Date_Manufactured], [Manufacturer], [Date_Tested], [Test_Lot_ID], [Name_Laboratory] FROM [Certificate]" UpdateCommand="UPDATE [Certificate] SET [Customs_Entry] = @Customs_Entry, [Date_Certificate] = @Date_Certificate, [Invoice_Number] = @Invoice_Number, [Product_Number] = @Product_Number, [Product_Name] = @Product_Name, [Product_Category] = @Product_Category, [CPSC_Regulation] = @CPSC_Regulation, [Date_Manufactured] = @Date_Manufactured, [Manufacturer] = @Manufacturer, [Date_Tested] = @Date_Tested, [Test_Lot_ID] = @Test_Lot_ID, [Name_Laboratory] = @Name_Laboratory WHERE [CertificateID] = @CertificateID">
        <DeleteParameters>
            <asp:Parameter Name="CertificateID" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Customs_Entry" Type="String" />
            <asp:Parameter Name="Date_Certificate" Type="String" />
            <asp:Parameter Name="Invoice_Number" Type="String" />
            <asp:Parameter Name="Product_Number" Type="String" />
            <asp:Parameter Name="Product_Name" Type="String" />
            <asp:Parameter Name="Product_Category" Type="String" />
            <asp:Parameter Name="CPSC_Regulation" Type="String" />
            <asp:Parameter Name="Date_Manufactured" Type="String" />
            <asp:Parameter Name="Manufacturer" Type="String" />
            <asp:Parameter Name="Date_Tested" Type="String" />
            <asp:Parameter Name="Test_Lot_ID" Type="String" />
            <asp:Parameter Name="Name_Laboratory" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="Customs_Entry" Type="String" />
            <asp:Parameter Name="Date_Certificate" Type="String" />
            <asp:Parameter Name="Invoice_Number" Type="String" />
            <asp:Parameter Name="Product_Number" Type="String" />
            <asp:Parameter Name="Product_Name" Type="String" />
            <asp:Parameter Name="Product_Category" Type="String" />
            <asp:Parameter Name="CPSC_Regulation" Type="String" />
            <asp:Parameter Name="Date_Manufactured" Type="String" />
            <asp:Parameter Name="Manufacturer" Type="String" />
            <asp:Parameter Name="Date_Tested" Type="String" />
            <asp:Parameter Name="Test_Lot_ID" Type="String" />
            <asp:Parameter Name="Name_Laboratory" Type="String" />
            <asp:Parameter Name="CertificateID" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource>
    <br />
    <br />
    <br />
    <br />

</div>
</form> 
```

这是我的VB：

```
Imports System.Text

Public Class WebForm4
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Protected Sub GridView1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles GridView1.SelectedIndexChanged
    'Check All Checkboxes Code:
    ' StringBuilder object
    Dim str As New StringBuilder()

    ' Select the checkboxes from the GridView control
    For i As Integer = 0 To GridView1.Rows.Count - 1
        Dim row As GridViewRow = GridView1.Rows(i)
        Dim isChecked As Boolean = DirectCast(row.FindControl("chkSelect"), CheckBox).Checked

        If isChecked Then
            ' Column 2 is the name column
            str.Append(GridView1.Rows(i).Cells(2).Text)
        End If
    Next

    ' prints out the result
    Response.Write(str.ToString())

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:30:44.610

这些应该会引导您朝着正确的方向前进：

[使用 ASP.NET AJAX 弹出控件显示 GridView 行详细信息](http://www.ezzylearning.com/tutorial.aspx?tid=2861497)

[来自文件后面代码的 Html 弹出窗口](https://stackoverflow.com/questions/7942263/html-popup-window-from-code-behind-file)

基本上，您正在发送要在弹出窗口中即时显示的行数据。就个人而言，我认为 AJAX 方法（第一个链接）更干净，但我不知道您是否使用 Microsoft AJAX 库。

# c# - 无法从 jQuery 获取 POST 方法中的字符串参数

> ID：12693597
> 
> 赞同：0
> 
> 时间：2012-10-02T15:39:13.970
> 
> 标签：c#, jquery, asp.net-web-api

我有这样的 POST 方法

```
 public void PostMethod([FromBody]string param)
    {
        var test = param;
    } 
```

和简单的JS脚本

```
<script type="text/javascript">
$.ajax({
    url: 'http://localhost:8101/sd/Localization/PostMethod',
    type: 'POST',
    data: {
        param: 'test'
    }
});
</script> 
```

工作得很好。Ajax 调用正在调用方法，但参数为空：/ 始终。我不知道为什么。我无法让它运行。有人可以帮助我并告诉我正确的方向吗？

// 更新

还要检查我创建的新项目，以确保我没有破坏某些东西。即使在默认配置的新项目中，我总是得到 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:35:24.770

因为`param`是*简单类型*，所以要使其适用于简单类型，您只需：

```
<script type="text/javascript"> 
$.ajax({ 
    url: 'http://localhost:8101/sd/Localization/PostMethod', 
    type: 'POST', 
    data:  {"" : 'test' } 
    } 
}); 
</script> 
```

如果您仍想像您一样发出 POST 请求，请定义您自己的强类型模型：

```
class YourModel
{
    public string Param {get; set;}
} 
```

所以你的行动：

```
public void PostMethod(YourModel param)   
{   
    var test = param;   
} 
```

或使用`JObject`：

```
public void PostMethod(JObject param)   
{   
    var test = param;   
} 
```

更多信息：

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)

# php - 如何在警报框中显示 codeigniter 表单验证消息

> ID：12693599
> 
> 赞同：1
> 
> 时间：2012-10-02T15:39:21.273
> 
> 标签：php, javascript, codeigniter

我正在尝试使 Ion auth 与 ajax 一起使用，因为我的登录表单是固定大小的，我想在表单提交的数据不正确时提醒错误消息。

消息从控制器返回，如下所示：

```
$this->session->set_flashdata('message', $this->ion_auth->messages()); 
```

并在这样的视图中拾取：

```
<div id="infoMessage"><?php echo $message;?></div> 
```

我正在尝试按如下方式显示它们：

```
<?php   if((isset($message))&&($message!='')){
            echo '<script> alert("'.$message.'"); </script>';
        }
?> 
```

这不起作用，没有显示警报，我已经删除了消息分隔符，但这没有帮助。我唯一的想法是它一定与codeigniter在我的javascript中间创建一个新行的方式有关，因为它是这样出来的：

```
<script>
alert('The Identity field is required.
The Password field is required.');
</script> 
```

我怎样才能摆脱这个换行符并以不会破坏我的 js 的方式替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:03:52.460

尝试

```
<?php   
    if((isset($message))&&($message!='')){
        echo '<script> alert("'.str_replace(array("\r","\n"), '', $message).'"); </script>';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:34:51.837

在`config/routes.php`添加字符串：

```
$route["action"] = "mycontroller/validation"; 
```

where`mycontroller`是您的控制器的类名，您在其中处理 ajax 查询，并且`validation`是此控制器的方法的名称。

当您通过 jQuery 方法`.ajax()`或其别名传递数据时，您可以使用[文档](http://api.jquery.com/jQuery.ajax/)`.post()`中描述的服务器响应结果：

```
$.post( "validation",
{
    username: $( '#username' ).val(),
    password: $( '#password' ).val()
},
function( data )
{
    alert( 'message: ' + data );
}); 
```

或者

```
$.ajax({ 
    url: "validation",
    username: $( '#username' ).val(),
    password: $( '#password' ).val()
}).done( function( data )
{
    alert( 'message: ' + data );
}); 
```

或者

```
$.ajax({
    url: 'validation',
    data: { username: $( '#username' ).val(), password: $( '#password' ).val() }
    success: function( data ) 
    {
        alert( 'message: ' + data );
    }
}); 
```

# sql - 从单个表中选择和排序数据

> ID：12693601
> 
> 赞同：1
> 
> 时间：2012-10-02T15:39:23.267
> 
> 标签：sql, tsql

更正我的问题....

我正在尝试从单个表中选择和排序查询。表的主键是序列号和时间/日期戳的组合。

数据库中的表名为“A12”，列定义为：

```
Serial2D (PK, char(25), not null)
Completed (PK, datetime, not null)
Result (smallint, null)
MachineID (FK, smallint, null)
PT_1 (float, null)
PT_2 (float, null)
PT_3 (float, null)
PT_4 (float, null) 
```

由于表的主键是“Serial2D”和“Completed”的组合，因此“Completed”和“Result”列中可以有多个具有不同值的“Serial2D”条目。（我没有制作这个数据库......我必须使用我得到的东西）

我想编写一个查询，该查询将利用“结果”列的值（始终为“0”或“1”）并仅检索每个“Serial2D”值的唯一行。如果该行的“结果”列有一个“1”，我想在结果列中有一个“0”的序列的任何条目上选择它。对于任何 Serial2D 值，表中应该只有一个条目的 Result 列条目为“1”。

前任。桌子

```
 Serial2d  Completed  Result   PT_1   PT_2    PT_3   PT_4   
   -------   -------    ------   ----   ----   ----   ----
    A1       1:00AM      0       32.5    20     26     29
    A1       1:02AM      0       32.5    10     29     40
    A1       1:03AM      1       10      5       4      3
    B1       1:04AM      0       29      4       1      9
    B1       1:05AM      0       40      3       4      9
    C1       1:06AM      1       9       7       6      4 
```

我希望能够检索的是：

```
 Serial2d  Completed  Result   PT_1   PT_2    PT_3   PT_4   
   -------   -------    ------   ----   ----   ----   ----
    A1       1:03AM      1       10      5       4      3
    B1       1:05AM      0       40      3       4      9
    C1       1:06AM      1       9       7       6      4 
```

我是 SQL 新手，我仍在学习所有语法。我发现很难搜索到正确的运算符，因为我不确定我需要什么，所以请原谅我的无知。带有我的答案的帖子可能正盯着我看，我不知道，请指给我看。

我很欣赏我上一篇文章的答案，但由于我缺乏信息和对 SQL 的无能，这些答案对我来说还不够。我知道这对某些人来说可能非常容易，但是请记住您第一次开始 SQL 的时间……这就是我所处的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:54:22.107

由于您使用的是 SQL Server，因此您可以使用 Windowing Functions 来获取此数据。

使用子查询：

```
select *
from 
(
  select *,
    row_number() over(partition by serial2d 
                      order by result desc, completed desc) rn
  from a12
) x
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d058a/8)

或者您可以使用 CTE 进行此查询：

```
;with cte as
(
  select *,
    row_number() over(partition by serial2d 
                      order by result desc, completed desc) rn
  from a12
)
select *
from cte c
where rn = 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d058a/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:42:32.243

您可以分组`Serial`以获取`MAX`每个`Time`.

```
SELECT Serial, MAX([Time]) AS [Time]
FROM myTable
GROUP BY Serial
HAVING MAX(Result) => 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:51:29.420

```
SELECT 
  t.Serial,
  max_Result, 
  MAX([time]) AS max_time
FROM 
  myTable t inner join
  (SELECT 
    Serial, 
    MAX([Result]) AS max_Result
   FROM 
    myTable
   GROUP BY 
    Serial) m on
   t.serial = m.serial and
   t.result = m.max_result
group by
 t.serial,
 max_Result 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:50:39.907

这可以使用相关的子查询来解决：

```
SELECT 
    T.serial, 
    T.[time], 
    0 AS result
FROM tablename T
WHERE 
    T.result = 1
  OR 
    NOT EXISTS(
        SELECT 1
        FROM tablename
        WHERE 
            serial = T.serial
          AND (
               [time] > T.[time]
             OR 
               result = 1 
          )
    ) 
```

# python - Python 中 globals() 的原因？

> ID：12693606
> 
> 赞同：70
> 
> 时间：2012-10-02T15:39:46.117
> 
> 标签：python, global-variables, global

在 Python 中有 globals() 函数的原因是什么？它只返回全局变量的字典，这些变量已经是全局的，所以它们可以在任何地方使用......我只是出于好奇，试图学习 python。

```
def F():
    global x
    x = 1

def G():
    print(globals()["x"]) #will return value of global 'x', which is 1

def H():
    print(x) #will also return value of global 'x', which, also, is 1

F()
G()
H() 
```

我真的看不出这里的重点？只有我需要它的时候，如果我有本地和全局变量，它们都具有相同的名称

```
def F():
    global x
    x = 1

def G():
    x = 5
    print(x) #5
    print(globals()["x"]) #1

F()
G() 
```

但是您永远不应该遇到两个具有相同名称的变量，并且需要在同一范围内使用它们的问题。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-02T16:07:15.847

Python 为程序员提供了大量的工具来自省运行环境。`globals()`只是其中之一，在调试会话中查看全局范围实际包含哪些对象非常有用。

我敢肯定，它背后的基本原理与`locals()`用于查看函数中定义的变量，或`dir`用于查看模块的内容或对象的属性的原理相同。

来自 C++ 背景，我可以理解这些东西似乎没有必要。在静态链接、静态类型的环境中，它们绝对会。在这种情况下，在编译时就知道哪些变量是全局变量，对象将拥有哪些成员，甚至另一个编译单元导出了哪些名称。

然而，在动态语言中，这些东西不是固定的。它们可以根据代码的导入方式甚至在运行时进行更改。至少出于这个原因，在调试器中访问此类信息可能是无价的。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-09-23T17:46:34.623

当您需要使用函数的字符串名称调用函数时，它也很有用。例如：

```
def foo():
    pass

function_name_as_string = 'foo'

globals()[function_name_as_string]() # foo(). 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T16:11:58.063

您可以将 and 的结果传递`globals()`给`locals()`,`eval`和`execfile`命令`__import__`。这样做会为这些命令的工作创建一个受限环境。

因此，这些功能的存在是为了支持其他功能，这些功能受益于给定可能与当前上下文不同的环境。例如，您可以`globals()`在调用其中一个函数之前调用然后删除或添加一些变量。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-02T15:47:35.123

`globals()`对`eval()`——如果你想评估一些引用范围内变量的代码很有用，这些变量要么在全局变量中，要么在局部变量中。

* * *

稍微扩展一下，`eval()`内置函数将解释给它的一串 Python 代码。签名是: `eval(codeString, globals, locals)`，你可以像这样使用它：

```
def foo():
    x = 2
    y = eval("x + 1", globals(), locals())
    print("y=" + y) # should be 3 
```

这是有效的，因为解释器`x`从`locals()`变量的字典中获取值。您当然可以将自己的变量字典提供给 eval。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-20T23:34:42.360

它在“声明性 python”中很有用。例如，在下面`FooDef`和`BarDef`是用于定义一系列数据结构的类，然后某些包将这些数据结构用作其输入或配置。这使您在输入内容方面具有很大的灵活性，并且您无需编写解析器。

```
# FooDef, BarDef are classes

Foo_one = FooDef("This one", opt1 = False, valence = 3 )
Foo_two = FooDef("The other one", valence = 6, parent = Foo_one )

namelist = []
for i in range(6):
    namelist.append("nm%03d"%i)

Foo_other = FooDef("a third one", string_list = namelist )

Bar_thing = BarDef( (Foo_one, Foo_two), method = 'depth-first') 
```

请注意，此配置文件使用循环来构建名称列表，这些名称是`Foo_other`. 因此，这种配置语言带有一个非常强大的“预处理器”，带有一个可用的运行时库。如果您想查找复杂的日志，或者从 zip 文件中提取内容并进行 base64 解码，作为生成配置的一部分（当然，对于输入可能来自不受信任的来源...）

该包使用以下内容读取配置：

```
conf_globals = {}  # make a namespace
# Give the config file the classes it needs
conf_globals['FooDef']= mypkgconfig.FooDef  # both of these are based ...
conf_globals['BarDef']= mypkgconfig.BarDef  # ... on .DefBase

fname = "user.conf"
try:
    exec open(fname) in conf_globals
except Exception:
    ...as needed...
# now find all the definitions in there
# (I'm assuming the names they are defined with are
# significant to interpreting the data; so they
# are stored under those keys here).

defs = {}
for nm,val in conf_globals.items():
    if isinstance(val,mypkgconfig.DefBase):
        defs[nm] = val 
```

所以，最后切入`globals()`正题，在使用这样的包时，如果你想在程序上创建一系列定义，这很有用：

```
for idx in range(20):
    varname = "Foo_%02d" % i
    globals()[varname]= FooDef("one of several", id_code = i+1, scale_ratio = 2**i) 
```

这相当于写出

```
Foo_00 = FooDef("one of several", id_code = 1, scale_ratio=1)
Foo_01 = FooDef("one of several", id_code = 2, scale_ratio=2)
Foo_02 = FooDef("one of several", id_code = 3, scale_ratio=4)
... 17 more ... 
```

[PLY (Python-lex-yacc) http://www.dabeaz.com/ply/](http://www.dabeaz.com/ply/)是通过从 python 模块收集一堆定义来获取其输入的包的一个示例 ——在这种情况下，对象主要是函数对象，但来自函数对象的元数据（它们的名称、文档字符串和定义顺序）也构成输入的一部分。这不是使用`globals()`. 此外，它是由“配置”导入的——后者是一个普通的 python 脚本——而不是相反。

我在一些我从事过的项目中使用了“声明性 python”，并且在`globals()`为这些项目编写配置时有机会使用。您当然可以争辩说，这是由于配置“语言”的设计方式存在缺陷。以这种方式使用`globals()`不会产生非常清晰的结果；只是结果可能比写出十几个几乎相同的语句更容易维护。

您还可以使用它根据名称在配置文件中赋予变量重要性：

```
# All variables above here starting with Foo_k_ are collected
# in Bar_klist
#
foo_k = [ v for k,v in globals().items() if k.startswith('Foo_k_')]
Bar_klist  = BarDef( foo_k , method = "kset") 
```

此方法对于定义大量表和结构的*任何*python 模块都很有用，可以更轻松地将项目添加到数据中，而无需维护引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-30T13:34:43.640

它还可以用于从字符串中获取类 'classname' 的实例：

```
class C:
    def __init__(self, x):
        self.x = x
        print('Added new instance, x:', self.x)

def call(str):
    obj = globals()[str](4)
    return obj

c = call('C')
print(c.x) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-15T13:38:09.053

如果您想导入刚刚构建的模块，这可能会很有用：

一个.py

```
[...]

def buildModule():
    [...code to build module...]
    return __import__("somemodule")

[...] 
```

b.py

```
from a import buildModule

def setup():
   globals()["somemodule"] = buildModule() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-29T14:28:25.240

我在答案中没有注意到任何关于使用`globals()`来检查您是否设置了值的内容。也许您只在调试时设置值，或者忘记设置值并希望避免出现异常。尽管`locals()`在某些情况下可能是更好的解决方案，以避免访问全局范围并仅访问本地范围。

```
# DEBUG = True
if 'DEBUG' in globals():
    print(f'We found debug flag and it has value {DEBUG}.')
else: 
    print(f'Debug flag was not found.') 
```

您也可以结合使用它`get()`来设置默认值，以防找不到变量

```
# VARIABLE = "Value of var"
my_var = globals().get("VARIABLE", "Value was not found")
print(my_var)    # Prints: "Value was not found"
print(VARIABLE)  # Raises NameError

VARIABLE = "Value of var"
my_var = globals().get("VARIABLE", "Value was not found")
print(my_var)    # prints: "Value of var"
print(VARIABLE)  # prints: "Value of var" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-05T09:18:56.237

并不真地。Python 真正拥有的全局变量是模块范围的变量。

```
# a.py
print(globals())

import b
b.tt() 
```

```
# b.py
def tt():
    print(globals()) 
```

运行`python a.py`，至少有两个输出`globals()['__name__']`不同。

[Github 上的cpython](https://github.com/python/cpython/blob/85cf1d514b84dc9a4bcb40e20a12e1d82ff19f20/Objects/frameobject.c#L830)中的代码显示了它。

# python - 使用 xvfb-run 运行 py.test

> ID：12693609
> 
> 赞同：5
> 
> 时间：2012-10-02T15:39:50.903
> 
> 标签：python, testing, pyqt4, xvfb

我正在尝试在 Jenkins 中为使用 PyQt4 的 Python 包运行测试，并且测试会创建窗口。由于我在 Jenkins 中运行测试，我需要重定向图形输出，所以我使用 xvfb-run。在大多数情况下，这是可行的，但在少数情况下，测试会随机失败，原因如下：

```
/usr/bin/xvfb-run: line 171: kill: (27375) - No such process 
```

如果我重新运行测试，它大部分时间都可以正常工作（所以这只是一个一次性的问题）。

有没有人遇到过这个问题？您对提高测试稳定性的解决方法有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-26T05:42:20.137

它通过找到 Xvfb 进程并杀死它来工作。

```
ps auwx | grep "Xvfb" | grep -v grep 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:30:18.643

If your copy of xvfb-run is the [same as mine](https://github.com/revnode/xvfb-run/blob/master/xvfb-run), I can confirm I've seen this too.

In my case, the target process caused Xvfb to crash. This means that the wrapper script itself fails at line 171 when tearing down no longer running Xvfb. To work around it I wrapped `kill $XVFBPID` in a `set +e`/`set -e` block. It also helps if you specify `--error-file=` so that xvfb-run saves the asynchronous standard error output from Xvfb while your target process is running, so you can get the underlying cause fixed.

Work around:

```
# Kill Xvfb now that the command has exited.
# Ignore failure of kill since we want to be forgiving of Xvfb itself crashing
set +e
kill $XVFBPID
set -e 
```

# cuda - 如何消除 CUDA 中的顺序部分

> ID：12693613
> 
> 赞同：-1
> 
> 时间：2012-10-02T15:40:10.433
> 
> 标签：cuda, gpu, gpgpu, nvidia

我的内核中有一个连续的部分，它确实减慢了它的速度。但是，我不知道如何摆脱内部循环。这里有什么建议吗？

```
__global__ void myKernel( int keep, int inc, int width, int* d_Xnum,
 int* d_Xco, bool* d_Xvalid,int* d_A )
{
  int i = blockIdx.x * blockDim.x + threadIdx.x;
  int j = blockIdx.y * blockDim.y + threadIdx.y;

  int k1;

  if( i < keep && j <= i){
    int counter = 0;

    for(k1 = 0; k1 < inc; k1++){
      if(d_Xvalid[j*inc + k1] == 0)
         counter += (d_Xvalid[i*inc + d_Xco[j*width + k1]]);
    }

    d_A[i*keep+j] = inc - d_Xnum[i] - counter;
  }
} 
```

我相信消除`k1`会大大加快我的代码速度。但是，我不知道如何`counter`使用它。任何建议，想法，想法都将受到欢迎！这个内核被称为：

```
 ...
  int t = 32;
  int b = keep/(32)+1;
  int b2 = (inc/32)+1;
  dim3 thread (t, t);
  dim3 block (b, inc);

  // kernel call
  myKernel<<<block, thread>>>(k, inc, width, d_Xnum,
                  d_Xco, d_Xvalid, d_A);
  cudaThreadSynchronize();
            ... 
```

`keep`大约是 9000 和`inc`20000 左右

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:12:42.503

这不是您问题的确切答案，但它可能可以优化您的代码，并可能帮助您实现`k1`sum 的并行减少，因为您摆脱了`if( i < keep && j <= i)`. 您还可以根据您的 gpu 模型实施其他优化，例如使用纹理访问那些只读向量。

由于您生成索引的方式，许多线程停止等待其他线程完成。您正在启动`keep*inc`线程，但实际上只有最大数量的线程`keep*(keep+1)/2`在做某事（因为条件`j <= i`）。

我认为您可以通过以下更改使其变得更好：

1.  启动`keep*(keep+1)/2`线程

2.  对您的代码执行以下操作

    ```
    __global__ void myKernel( int keep, int inc, int width, int* d_Xnum,
    int* d_Xco, bool* d_Xvalid,int* d_A )
    {
      int k = blockIdx.x * blockDim.x + threadIdx.x;
      int i = (int)(sqrt(0.25+2.0*k)-0.5); 
      int j = k - i*(i+1)/2;

      int k1;
      if( i < keep && j < inc){
        int counter = 0;

        for(k1 = 0; k1 < inc; k1++){
          if(d_Xvalid[j*inc + k1] == 0)
             counter += (d_Xvalid[i*inc + d_Xco[j*width + k1]]);
        }

        d_A[i*keep+j] = inc - d_Xnum[i] - counter;
      }
    } 
    ```

你在做什么（对于`keep = 4`启动`4*4 = 16`线程，在最好的情况下。如果`inc > keep`看起来是这样，你正在启动更多线程）可以被视为（每个“盒子”都是一个线程）

```
_________________________________
| i = 0 | i = 0 | i = 0 | i = 0 |
| j = 0 |   -   |   -   |   -   |
_________________________________
| i = 1 | i = 1 | i = 1 | i = 1 |
| j = 0 | j = 1 |   -   |   -   |
_________________________________
| i = 2 | i = 2 | i = 2 | i = 2 |
| j = 0 | j = 1 | j = 2 |   -   |
_________________________________
| i = 3 | i = 3 | i = 3 | i = 3 |
| j = 0 | j = 1 | j = 2 | j = 3 |
_________________________________ 
```

我建议您添加一个索引并根据您的需要`k`生成`i`并从中生成（用于启动线程）`j``keep = 4``(4*(4+1)/2 = 10`

```
_________________________________________________________________________________
| k = 0 | k = 0 | k = 1 | k = 0 | k = 1 | k = 2 | k = 0 | k = 1 | k = 2 | k = 3 |
| i = 0 | i = 1 | i = 1 | i = 2 | i = 2 | i = 2 | i = 3 | i = 3 | i = 3 | i = 3 |
| j = 0 | j = 0 | j = 1 | j = 0 | j = 1 | j = 2 | j = 0 | j = 1 | j = 2 | j = 3 |
_________________________________________________________________________________ 
```

这可以用

*   `i = (int)(sqrt(0.25+2*k)-0.5)`

*   `j = k - i*(i+1)/2`

你可以把它当作一个食谱来接受，或者稍微了解一下它背后的数学原理。

到这里你知道`j = 0`你有`i*(i+1)/2 = k`（因为 k = [0+1+2+...+i = i*(i+1)/2](http://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%80%A6)）。现在，如果你求解这个方程，你就会得到方程`i`（int 的强制转换向下舍入并确保它也能得到正确的结果`j!=0`）。为了得到`j`你应该减去`k`它如果`j`是 0:的值`i*(i+1)/2`。

# ruby-on-rails - 无法在 ubuntu 12.04 上安装 rvm

> ID：12693615
> 
> 赞同：0
> 
> 时间：2012-10-02T15:40:19.900
> 
> 标签：ruby-on-rails, rvm, ubuntu-12.04

我正在尝试通过 rvm 在 ubuntu 12.04 上的 rails 上安装 ruby

我做了 apt-get update 并安装了 curl。然后我在终端输入以下命令

```
curl -L get.rvm.io | bash -s stable 
```

但几秒钟后，我收到一个错误“（7）无法连接到主机”。安装 rvm 有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:59:49.290

也许是一些 HTTPS 问题，试试吧： `curl -kL https://get.rvm.io | bash -s stable`

如果错误仍然存​​在：

1) 你在 NAT 下吗？

2）您的网络中是否有防火墙，或者这台机器中是否有防火墙？

3）您的浏览器中是否配置了一些代理？如果是这样，那么 curl 在不通过此代理的情况下将无法与 HTTP 或 HTTPS 连接。阅读本文：[带代理的 Linux curl 命令](https://stackoverflow.com/questions/9445489/linux-curl-command-with-proxy)

# jquery - 在同一函数的ajax中再次从ajax中调用函数？

> ID：12693617
> 
> 赞同：0
> 
> 时间：2012-10-02T15:40:24.367
> 
> 标签：jquery, ajax

抱歉标题令人困惑，但我找不到更好的方法来解释它..

情况如下：

在函数overview() 中，我使用AJAX 调用以及动态html 来获取数据。在那个 AJAX 成功回调中，我对新的 html 执行某些处理程序。在其中一个处理程序上，我发布了另一个 AJAX 调用。

现在，这是我的问题：我想在第二个 AJAX 成功回调中重新加载第一个 AJAX 调用，以获取我更新的数据。我该怎么做呢？

谢谢

编辑：根据要求，这是我的代码（简化）

```
function overview() {
    var dataString = '...';
    $.ajax({
        type: 'POST',
        url: 'get-data.php?',
        cache: false,
        data: dataString,
        success: function(data) {
            $('table.table-overview tr.table-heading').after(data);

            $('tr.new-tr span.status').click(function() {
                var dataString = '...';
                $.ajax({
                    type: 'GET',
                    url: 'change-status.php?',
                    cache: false,
                    data: dataString,
                    success: function(response) {
                        if(response == 'saved') {
                            overview();
                        }
                    }
                });
            });
        }
    });
} 
```

**已解决**：经过反复试验，将我的 .click() 处理程序替换为 .live('click') 使其工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:03:31.007

要回答添加的子问题，当您运行这行代码时

```
$('tr.new-tr span.status').click(function() {}) 
```

您是在告诉浏览器获取当时存在的 每个`<span class="status"/>`内部 a来附加单击事件侦听器。是不同的（），如果每次点击都在内部，那么您就是说，然后调用该函数（这适用于绑定实时事件时不存在的跨度）。这两种方法在 ajax 回调的成功事件中都不好。您可以先在 ajax 调用之外绑定 live even 监听器，然后相信它只会在 a 内部触发，即使它们是稍后创建的。`<tr class="new-tr"/>``.[live][1]('click')``<span class="status"/>``<tr class="new-tr"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:55:23.053

我相信这就是你所描述的。

```
function ajax1(callback){

    $.ajax({
        ...
    }).done(callback);

}

function ajax2(callback){

    $.ajax({
        ...
    }).done(callback);

}

function overview(){

    loadAjax1(); // start off the ajax loading

}

function loadAjax1(){

    // get first ajax data
    ajax1(function(resp){

        $('body').html(resp) // put the ajax data in your dom, attach your handlers and such

        // find certain element to bind second ajax call
        $('body.find-your-item').click(function(){

            // when clicked, perform second ajax call, and on callback, recall intial ajax load
            ajax2(loadAjax1);
        });

    })

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:49:53.253

不确定我是否理解问题。但是你可以链接ajax请求......所以你可以做类似的事情

```
function func1(){
   $.ajax(){
      url: "whatever.html",
      type: json
      success: func2(data)
   }
 }

 function func2(input){
 //do something with input here

  $.ajax(){
      url: "whatever2.html",
      type: json
      success: func3(data)
   }
  } 
```

我在 ajax 请求中缺少参数，而 func2 中的请求可以从输入参数“input”发布数据。在页面上有多个 ajax 请求应该不是问题，您只需要担心它们何时触发并确保您将正确的数据从一个传递到另一个......

# asp.net-mvc-3 - IIS 7.5 层次结构破坏了应用程序路径

> ID：12693620
> 
> 赞同：0
> 
> 时间：2012-10-02T15:40:31.140
> 
> 标签：asp.net-mvc-3, iis-7.5

[我已经使用来自IIS.Net](http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis)的信息在网站下设置了一个 Web 应用程序- 了解站点、应用程序和虚拟目录

以下是他们对申请的看法。

> 应用程序是一组通过协议（例如 HTTP）传递内容或提供服务的文件。在 IIS 中创建应用程序时，应用程序的路径将成为站点 URL 的一部分。

那太棒了; 正是我想要的；但是...对于脚本文件、css 和我在应用程序中的 Web 服务，应用程序路径无法正确解析。

为了`http://site_name/application_name`

```
<img src="/Content/images/smiley.png" alt="smiley face" /></a> 
```

解决为

`src="/site_name/Content/images/smiley.png"`

代替

`src="/application_name/Content/images/smiley.png"`

作为一种解决方法，我已经用`@Url.Content()`助手包裹了我正在使用的路径。不是最漂亮的解决方案，但它正在工作。

```
<img src="@Url.Content("~/Content/images/smiley.png")" alt="smiley face" /></a> 
```

有没有办法在 IIS 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:17:38.527

这不是 IIS 问题，这是您必须在模板方面做的事情。现在，我不确定，但在 asp.net mvc4/razor 2 中可能有一些额外的魔法可以让你代替

```
<img src="@Url.Content("~/Content/images/smiley.png")" alt="smiley face" /> 
```

做

```
<img src="~/Content/images/smiley.png" alt="smiley face" /> 
```

一切都会自动转换到正确的路径。实际上[，这篇博文](http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2)似乎记录了这种能力。

但除此之外，`<img src="/path/to/image.png" alt="smiley face" />`总是要引用`http(s)://(current server)/path/to/image.png`，除非在浏览器中看到之前以某种方式*重写了 html。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:44:03.453

在 IMO 中使用`@Url.Content`是正确的方法。然后，无论开发人员在他们的机器上如何设置（运行开发服务器或使用 IIS），它都会使链接正常工作。

我不确定是否有办法在 IIS 中处理它，也许是 URL 重写规则，但它无助于跨开发机器的一致性。

编辑：您可以将站点部署到 IIS 中站点的根目录，而不是虚拟目录，但这只是一个很好的解决方案，如果您只打算托管这个单个站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T17:00:20.453

在“head”部分添加这个“base”标签：`<base href="~/" target="_blank" />`. 我的锚元素也有同样的问题。

# java - Android AudioRecord 神器

> ID：12693621
> 
> 赞同：5
> 
> 时间：2012-10-02T15:40:35.997
> 
> 标签：java, android, audio, audio-recording, android-audiorecord

当我使用 Androids AudioRecord 从麦克风录制时，我得到了这个烦人的神器

![在此处输入图像描述](../Images/6701801fe77386b926a8f7d05daf9a73.png)

有没有办法避免或消除这种情况？它是什么？还是因为我在配置中做错了什么（但其他一切正常）。

这是我的 AudioRecord 配置：

```
 sampleRateInHz = 44100;
    channelConfigRec = AudioFormat.CHANNEL_IN_MONO;
    audioFormat = AudioFormat.ENCODING_PCM_16BIT;
    bufferSizeInBytesRec = AudioRecord.getMinBufferSize(sampleRateInHz, channelConfigRec, audioFormat);
    audioSource = AudioSource.MIC; 
```

我很确定我的代码是正确的，因为我可以很好地记录一切，但是开头有这个点击。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T03:13:54.903

尝试将您的音频源设置为 AudioSource.VOICE_RECOGNITION。在某些设备上，尤其是 HTC 设备上，我发现该来源的过滤较少。有了 ICS 之后，事情就应该是正式的方式了。在 Android 4.0 设备兼容性文档中，这是正式的：

当应用程序开始使用 android.media.MediaRecorder.AudioSource.VOICE_RECOGNITION 音频源录制音频流时：

*   如果存在降噪处理，则必须禁用。
*   如果存在自动增益控制，则必须禁用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:12:48.430

我认为显示的伪影是用于处理录制音频的数字滤波器的副作用。每个数字滤波器都有一定的延迟。例如，如果滤波器有 N 个系数，则它的延迟为 N/2。从本质上讲，这意味着滤波器将在前 N/2 个音频信号样本通过它后开始正常运行。这应该是您拥有工件的原因。希望这可以帮助。

# php - Cron Job - 从特定目录中删除 zip 文件

> ID：12693623
> 
> 赞同：-1
> 
> 时间：2012-10-02T15:40:38.187
> 
> 标签：php, joomla, cron, cron-task

我正在尝试从特定目录中删除所有文件`zip`。`rar`我已将 cron 设置为运行名为 的 PHP 文件`cron.php`，该文件位于 Joomla 模块目录中。出于测试目的，我将 cron 作业时间设置为 5 分钟。

我还在名为的目录中放了一个 zip 文件`test.zip`

**命令：**

```
php /home/MYUSER/public_html/MYSITE/modules/mod_module_gen/cron.php 
```

**PHP：**注意：“MYSITE”是站点所在的子域

```
<?php
$dir = "/home/MYUSER/public_html/MYSITE/modules/mod_module_gen/package";
$files = scandir($dir);

foreach ($files as $file) {                   
   if(preg_match("/\.(zip|rar)$/", $file)){
        unlink($file);
   }                    
} 
?> 
```

但是，每 5 分钟，错误日志就会不断抛出以下错误：

```
PHP Warning:  unlink(test.zip) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in /home/MYUSER/public_html/MYSITE/modules/mod_module_gen/cron.php on line 18 
```

**由于文件确实**存在，因此不确定为什么会发生此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:45:28.680

我认为问题在于当前目录被视为**运行**PHP 脚本的位置。

所以文件在：

`/home/MYUSER/public_html/MYSITE/modules/mod_module_gen/package`

但是要删除的命令（一旦`$file`解决）是：

`unlink('test.zip');`

由于文件是从其他地方运行的（比如`~`）：

PHP 正在尝试取消链接`~/test.zip`

考虑做

`unlink($dir.'/'.$file)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:46:27.317

你在这里只传递文件名 mate

```
unlink('/home/MYUSER/public_html/MYSITE/modules/mod_module_gen/package/'.$file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:46:49.317

scandir 在 $dir 中返回一个文件名数组，但不包括路径本身....您正在尝试取消设置文件名；但是除非 $dir 是您当前的工作目录，否则如果您的 cwd 中有一个同名文件，它可能会工作。

# g++ - 与 --as-needed 链接时未解决对 FFTW 的引用

> ID：12693624
> 
> 赞同：4
> 
> 时间：2012-10-02T15:41:02.363
> 
> 标签：g++, ld, fftw, binutils

我有一个无法解释的链接问题。该程序在名为 fft.cpp 的文件中包含对 FFTW 函数的引用。链接命令如下（我跳过了其余的目标文件）：

```
/usr/bin/g++ common/CleanerND.cpp.2.o ... common/fft.cpp.2.o
    -o cleaner3d -Wl,-Bstatic -Wl,-Bdynamic -lmkl_intel_lp64 -lmkl_sequential -lmkl_core
    -lfftw3f -lgsl -lgslcblas -lm -lglib-2.0 -lz -lm -lpthread -fopenmp 
```

多余的 -Wl,-Bstatic -Wl,-Bdynamic 选项由 Waf 生成，我将其用作构建系统。我使用 Ubuntu 12.04 附带的默认工具链：GCC 4.6.3、binutils 2.22。

问题是链接器没有检测和解析对 FFTW 函数的引用。运行时，程序中止并显示以下消息：

```
cleaner3d: symbol lookup error: cleaner3d: undefined symbol: fftwf_malloc 
```

的输出`ldd`显示 FFTW 根本没有被链接：

```
$ ldd cleaner3d
linux-vdso.so.1 =>  (0x00007fffa3193000)
libmkl_intel_lp64.so => /opt/intel/mkl/10.0.1.014/lib/em64t/libmkl_intel_lp64.so (0x00007f6f16683000)
libmkl_sequential.so => /opt/intel/mkl/10.0.1.014/lib/em64t/libmkl_sequential.so (0x00007f6f164d3000)
libmkl_core.so => /opt/intel/mkl/10.0.1.014/lib/em64t/libmkl_core.so (0x00007f6f16300000)
libgsl.so.0 => /usr/lib/libgsl.so.0 (0x00007f6f15ec4000)
libglib-2.0.so.0 => /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f6f15bcf000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f6f158d4000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f6f156b7000)
libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f6f153b7000)
libgomp.so.1 => /usr/lib/x86_64-linux-gnu/libgomp.so.1 (0x00007f6f151a8000)
libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f6f14f92000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f6f14bd5000)
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f6f149d0000)
libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f6f14793000)
librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f6f1458b000)
/lib64/ld-linux-x86-64.so.2 (0x00007f6f169b2000) 
```

这显然是链接器的错误，因为输出`nm`显示它包含对 FFTW 的引用：

```
$ nm build/common/fft.cpp.2.o | grep fftw
             U fftwf_destroy_plan
             U fftwf_execute_dft
             U fftwf_free
             U fftwf_malloc
             U fftwf_plan_dft_1d
             U fftwf_plan_many_dft 
```

我发现这可能与链接器选项有关，该选项`--as-needed`自 Ubuntu 12.04 以来默认传递 - 事实上，当我添加`-Wl,--no-as-needed`到命令行时，问题就消失了。但是，这种解决方法应该不是必需的。我不明白为什么链接器无法正确链接 FFTW 与`--as-needed`启用。任何人都可以对此有所了解吗？这是链接器错误吗？为什么只有 FFTW 库受到影响？

# android - 教程中的示例因 NullPointerException 而崩溃

> ID：12693625
> 
> 赞同：0
> 
> 时间：2012-10-02T15:41:06.940
> 
> 标签：android, nullpointerexception

我已经完成了新波士顿网站教授的电子邮件应用程序。据我审查，一切都很好。我的应用程序运行得很好，但是当我按下 时`"Send Email"` `Button`，应用程序崩溃了。我正在我的`HTC Desire S`. 请帮我解决一下这个。

我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.thenewboston.pok"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.SET_WALLPAPER"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_the_new_boston" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TheNewBostonActivity"
        android:label="Add and Sub 1" >
        <intent-filter>
            <action android:name="com.thenewboston.pok.THENEWBOSTONACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="Select An Application" >
        <intent-filter>
            <action android:name="com.thenewboston.pok.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TextPlay"
        android:label="Text Play!" >          
    </activity>
    <activity
        android:name=".Email"
        android:label="Email Application" >
        <intent-filter>
            <action android:name="com.thenewboston.pok.EMAIL" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>          
    </activity>
    <activity
        android:name=".Camera"
        android:label="Camera Application"
        android:screenOrientation="portrait" >          
    </activity>
    <activity
        android:name=".Data"
        android:label="Rate It!!"
        android:screenOrientation="portrait" >          
    </activity> 
    <activity
        android:name=".OpenedClass"
        android:label="Rate It!!"
        android:screenOrientation="portrait" >          
    </activity>            

</application> 
```

`Email`活动：

```
public class Email extends Activity implements View.OnClickListener{

EditText personsEmail, intro, personsName, stupidThings, hatefulAction, outro;
String emailAdd, beginning, name, stupidAction, hateAct, end;
Button sendEmail;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.email);
    initializeVars();
    sendEmail.setOnClickListener(this);

}

private void initializeVars() {
    // TODO Auto-generated method stub
    personsEmail = (EditText) findViewById(R.id.etEmails);
    stupidThings = (EditText) findViewById(R.id.etThings);
    intro = (EditText) findViewById(R.id.etIntro);
    personsName= (EditText) findViewById(R.id.etName);
    hatefulAction= (EditText) findViewById(R.id.etAction);
    sendEmail= (Button) findViewById(R.id.bSentEmail);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    convertEditToString();
    String emailAddress[] = {"emailAdd"};
    String message = "Well hello "
            + name
            + " I just wanted to say "
            + beginning
            + ".  Not only that but I hate when you "
            + stupidAction
            + ", that just really makes me crazy.  I just want to make you "
            + hateAct
            + ".  Welp, thats all I wanted to chit-chatter about, oh and "
            + end
            + ".  Oh also if you get bored you should check out www.mybringback.com"
            + '\n' + "PS. I think I love you...  :-(  ";

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailAddress);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Hello");
    emailIntent.setType("plain/text");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    startActivity (emailIntent);

    }

    private void convertEditToString() {
        // TODO Auto-generated method stub
        emailAdd = personsEmail.getText().toString();
        beginning = intro.getText().toString();
        name = personsName.getText().toString();
        hateAct = hatefulAction.getText().toString();
        stupidAction = stupidThings.getText().toString();
        end = outro.getText().toString();
    }
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }

} 
```

我的*email.xml*：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="match_parent"
android:weightSum="100" android:layout_height="match_parent">
<ScrollView android:layout_weight="30" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout android:orientation="vertical"
        android:layout_width="match_parent" android:layout_height="match_parent">
        <TextView android:text="Email address(es):"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etEmails">
        </EditText>
        <TextView android:text="Hateful Intro:"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etIntro"></EditText>
        <TextView android:text="Person's name" android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etName"></EditText>
        <TextView android:text="Stupid Things that this Person does"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etThings"></EditText>
        <TextView android:text="What you want to do to this person:"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etAction"></EditText>
        <TextView android:text="Hateful Outro" android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <EditText android:layout_height="wrap_content"
            android:layout_width="match_parent" android:id="@+id/etOutro"></EditText>
    </LinearLayout>
</ScrollView>
<LinearLayout android:orientation="vertical"
    android:layout_width="match_parent" android:layout_weight="40"
    android:layout_height="fill_parent">
    <Button android:text="Send Email" android:id="@+id/bSentEmail"
        android:layout_width="fill_parent" android:layout_height="fill_parent"></Button>
</LinearLayout>
<LinearLayout android:orientation="vertical"
    android:layout_width="match_parent" android:layout_weight="30"
    android:layout_height="fill_parent">
    <AnalogClock android:id="@+id/analogClock1"
        android:layout_width="fill_parent" android:layout_height="fill_parent"></AnalogClock>
</LinearLayout> 
```

`LogCat`与`NullPointerException`：_

```
10-02 22:15:40.603: E/AndroidRuntime(28009): FATAL EXCEPTION: main
10-02 22:15:40.603: E/AndroidRuntime(28009): java.lang.NullPointerException
10-02 22:15:40.603: E/AndroidRuntime(28009):    at com.thenewboston.pok.Email.convertEditToString(Email.java:69)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at com.thenewboston.pok.Email.onClick(Email.java:38)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at android.view.View.performClick(View.java:3549)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at android.view.View$PerformClick.run(View.java:14393)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at android.os.Handler.handleCallback(Handler.java:605)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at android.os.Looper.loop(Looper.java:154)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at android.app.ActivityThread.main(ActivityThread.java:4945)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at java.lang.reflect.Method.invokeNative(Native Method)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at java.lang.reflect.Method.invoke(Method.java:511)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-02 22:15:40.603: E/AndroidRuntime(28009):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:50:57.747

原因`NullPointerException`是您没有`EditText`使用 id 初始化最后一个`etOutro`。只需在方法中添加这一行`initializeVars`：

```
outro = (EditText) findViewById(R.id.etOutro); 
```

# html - Bad values in meta tags

> ID：12693630
> 
> 赞同：17
> 
> 时间：2012-10-02T15:41:26.393
> 
> 标签：html, meta-tags

I've got a problem when I pass the html5 validator to my site from w3c validator. The errors are next:

```
Bad value Content-Script-Type for attribute http-equiv on element meta
<meta http-equiv="Content-Script-Type" content="text/javascript" >

Bad value expires for attribute http-equiv on element meta
<meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT" >

Bad value pragma for attribute http-equiv on element meta
<meta http-equiv="pragma" content="no-cache" >

Bad value Cache-Control for attribute http-equiv on element meta.
<meta http-equiv="Cache-Control" content="no-cache" > 
```

What are the correct values to meta tags to pass html5 validator?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T15:49:57.350

For HTML5 you use a cache manifest file in the header. This is an example of how to use: [http://www.w3.org/TR/html5/browsers.html#manifests](http://www.w3.org/TR/html5/browsers.html#manifests)

Also, you force no cache with this:

```
<meta http-equiv="expires" content="0"> 
```

This is a good tutorial on how to use the cache manifest file: [https://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-manifest-file-creating](https://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-manifest-file-creating)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-14T10:45:13.670

The accepted answer is wrong! [This](https://stackoverflow.com/a/9657962/352260) is a good answer.

To quote Alohci:

> Putting caching instructions into meta tags is not a good idea, because although browsers may read them, proxies won't. For that reason, they are invalid and you should send caching instructions as real HTTP headers.

Addendum: For Apache and .htaccess you could use

```
<ifmodule mod_expires.c>
ExpiresActive On
ExpiresDefault value      or
ExpiresByType text/css  "access plus 1 month"
...
</IfModule> 
```

PHP have headers_sent() and header() function for that.

```
function header_no_cache () {
    \header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
    \header('Pragma: no-cache'); // HTTP 1.0.
    \header('Expires: 0'); // Proxies.
} 
```

Point is that caching instructions should be in header. Not in html file.

# ruby-on-rails - 过滤rails 3中的嵌套属性

> ID：12693631
> 
> 赞同：0
> 
> 时间：2012-10-02T15:41:31.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, nested-attributes

`Category`我的应用程序是由`has_many products`. 类别和产品都有发布日期。

类别的展示页面显示该类别的产品。

Category_controller 的 show 和 index 动作非常简单（发布的是一个作用域）：

```
def index
    @categories = Category.published
end

def show
    @categories = Category.find(params[:id])
    unless @categories.datepublication <= Time.now
        redirect_to categories_path
    end
end 
```

正如您所看到的，它会显示已发布的类别并将您重定向到类别索引，当您出于自己的兴趣而过于好奇时。

现在，在类别的显示视图中仅显示已发布的产品会很棒。除了视图中的 if 之外，我不知道该怎么做，但在我看来，过滤元素不是视图的工作。过滤嵌套元素的正确 MVC 方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:45:29.620

您可以链接范围，甚至通过关联。从您的示例中，我了解到您的类别有发布日期，但您的产品也有自己的发布日期，对吗？

在这种情况下，您可以在您的产品上设置与您在类别中的范围类似的范围，并以相同的方式使用它，即：

```
@products = @category.products.published 
```

然后，您是想在控制器中预加载 @products 实例变量还是只在视图中使用 @category.products.published 取决于您。如果应用程序足够简单，我通常只在自己的视图中使用范围查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:45:43.763

这是 ORM 的工作（也适用于类别）

```
 begin
   @category = Category.published.find(params[:id])
 rescue ActiveRecord::RecordNotFound
   redirect_to categories_path unless @category
 end

 @products = @category.products.published 
```

# sql - 触发器失败 -ORA-04098 无效并且重新验证 sql 失败

> ID：12693635
> 
> 赞同：0
> 
> 时间：2012-10-02T15:41:54.327
> 
> 标签：sql, oracle

```
create or replace trigger "STUDENT_PERSONAL_DETAIL_T1" 
AFTER insert or update or delete on "STUDENT_PERSONAL_DETAIL" 
for each row 
begin 
  insert into fa1 (s_id,name,class,sec) 
  select reg_no,name,class,sec 
  from inserted 
end; 
```

这是使用Oracle xe 触发器创建界面创建的触发器。

它创建时没有错误，但是当在表上调用插入时会显示错误 `trigger failed -ORA-04098 is invalid and failed re-validation`。

指导和建议会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:48:14.853

你应该使用：

```
REFERENCING new AS new
...
BEGIN
     INSERT INTO fa1(s_id, name, class, sec)
          VALUES (:new.reg_no, :new.name, :new.class, :new.sec);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:45:02.467

看，这个select语句是无效的，因为没有这样的表`inserted`

```
select reg_no,name,class,sec 
from inserted 
```

**编辑**如果您想将插入的值记录到表 fa1 中，您可以执行类似的操作，如果您在表中有以下列`STUDENT_PERSONAL_DETAIL`：`reg_no,name,class,sec`

```
create or replace trigger "STUDENT_PERSONAL_DETAIL_T1" 
AFTER insert on "STUDENT_PERSONAL_DETAIL" 
for each row 
begin 
  insert into fa1 (s_id,name,class,sec) 
  values (:new.reg_no, :new.name, :new.class, :new.sec)
end; 
```

注意子句`AFTER insert on "STUDENT_PERSONAL_DETAIL"`。我没有`or update or delete`确保这只会为新插入的记录触发。（因为您尝试从“插入”表中进行选择，所以我得出结论，这就是您想要做的）

# websphere-7 - Websphere 上的 YAWL 资源服务部署

> ID：12693642
> 
> 赞同：2
> 
> 时间：2012-10-02T15:42:26.030
> 
> 标签：websphere-7, websphere-8

有没有人在 Websphere 7 或 8 上部署了 YAWL resourceService。我们正在尝试做同样的事情，但是在输入凭据后它会给出 JSF 错误。似乎 JSF 的 IBM websphere 实现与 resourceService 使用的不兼容。有人可以阐明如何强制 WebSphere 使用捆绑在应用程序本身中的 JSF 实现，而不是使用它自己的。这是我得到的异常堆栈跟踪。

```
[9/24/12 15:56:05:138 IST] 00000015 lifecycle     E   JSF1054: (Phase ID: RESTORE_VIEW 1, View ID: "") Exception thrown during phase execution: javax.faces.event.PhaseEvent[source=com.sun.faces.lifecycle.LifecycleImpl@3b803b8]
[9/24/12 15:56:05:143 IST] 00000015 servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: Uncaught exception created in one of the service methods of the servlet Faces Servlet in application resourceService_war. Exception created : javax.servlet.ServletException: Array index out of range: 4
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:277)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1443)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1384)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.sun.rave.web.ui.util.UploadFilter.doFilter(UploadFilter.java:194)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at org.yawlfoundation.yawl.resourcing.jsf.SessionTimeoutFilter.doFilter(SessionTimeoutFilter.java:71)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at org.yawlfoundation.yawl.util.CharsetFilter.doFilter(CharsetFilter.java:52)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:852)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:785)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3610)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:274)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:926)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:766)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 4
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1167)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:205)
    at com.sun.faces.application.ViewHandlerImpl.restoreView(ViewHandlerImpl.java:334)
    at com.sun.rave.web.ui.appbase.faces.ViewHandlerImpl.restoreView(ViewHandlerImpl.java:337)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:176)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:104)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:59:20.463

websphere 默认提供 JSF1.2 实现。

在所描述的情况下，您可以将应用程序配置为使用应用程序内部提供的 JSF 版本。

我想[这](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tweb_jsf.html)就是你要找的。

请按照上述文档中的说明配置您的服务器以从应用程序获取 jsf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:17:42.813

好奇，请尝试通过更改 web.xml 中的属性（STATE_SAVING_METHOD）将状态保存模式更改为客户端。

# css - CSS：@import 与

> ID：12693643
> 
> 赞同：6
> 
> 时间：2012-10-02T15:42:27.890
> 
> 标签：css

好的，关于如何优化网站的加载速度，我已经听过一百万种方法：HTTP 请求越少越好（这就是图像精灵诞生的原因）；仅注入一页专门需要的 JavaScript 文件。尽可能使用 CSS 进行视觉增强，然后可能考虑使用 SVG 图形~~（尽管这仍然值得商榷）~~；压缩您的 CSS 和 JavaScript 文件以及 HTML 标记；将您的脚本合并到一个文件中（再次返回更少的 HTTP 请求）；gzip 你的资产；等等等等

但是今天我在一个网站上找到了这个评论：

*“由于我们关心 Web 开发的最佳实践，我们不再在我们的项目中使用 @import 规则。”*

为了澄清，我的问题不是关于以下之间的区别：

`<link rel="stylesheet" href="file.css">`对比`<style type="text/css">@import url("styles.css");</style>`

关于将其添加到您的 HTML 文档之间的区别：`<link rel="stylesheet" href="file.css">`与将其添加到`@import url("styles.css")`您的主 CSS 文件中。

那么，从 HTML 加载 CSS 文件与从另一个 CSS 文件加载文件有什么区别？

我的意思是，HTTP 请求仍然存在，它们只是来自不同的位置。

我阅读了 Steve Souders 的*[不使用 @import](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)*文章，以及 About.com 的文章*[What's the Difference Between @import and link for CSS?](http://webdesign.about.com/od/beginningcss/f/css_import_link.htm)* ，但他们比较了我上面提到的我没有提到的方法，所以我不清楚为什么不使用`@import`.

顺便说一句，我不关心 Netscape 4 或 IE6（感谢上帝，我现在可以这么说）或 IE7 和 FOUC。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:45:49.507

不同之处在于并行下载。 `@import`阻止并行下载。这意味着浏览器将在下载下一个文件之前等待导入导入的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:46:16.230

您引用的第一篇文章（Steve Souders 的“不要使用 @import”）专门解决了`@import`通过导入样式表内部的情况`<link>`——这与将`@import`内部`<style>`标记放在一起对性能不利。事实上，情况更糟：浏览器首先必须获取链接的样式表，然后解析该样式表，然后发现`@import`规则，然后获取导入的样式表。

# javascript - 在无效验证上展开 Accordion 窗格

> ID：12693647
> 
> 赞同：1
> 
> 时间：2012-10-02T15:42:36.987
> 
> 标签：javascript, asp.net, vb.net, microsoft-ajax

我有一个 AccordionPanes 集合，其中包含各种 TextBox 控件和 DropDownLists，每个控件都有自己的验证器。

如果在表单提交时发生了一些服务器端验证，是否有一些东西可以自动展开包含无效验证器消息的先前最小化的窗格？否则，在用户看来，表单不能无故提交。

另一种情况：假设我有多个窗格，其中*客户端*验证器与输入相关联。如果窗格被最小化（因此您看不到验证器的 ErrorMessage），是否有办法在提交时发生 AJAX 页面验证时展开相应的窗格？

我知道这种方法有一种蛮力的方式，我跟踪每个验证器及其相关的 AccordionPane，但我希望有一个更好的解决方案来处理我的大量输入/验证器和窗格的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:46:51.543

像这样的东西怎么样（使用JQuery，但我确信它可以转换成普通的javascript）......

```
$(document).ready(function(){
    if (isPostback()){
        $.each(Page_Validators, function(index, validator) {
            if (!validator.isvalid) {
            // do something here to locate the accordion based on the validator
            // $(this) is the currently invalid validator element as a jquery object/wrapped set
            // so for example...
                $(this).parent().slideDown();
            // This assumes that the immediate parent of of the validator is the accordion which is unlikely but if you post your emitted html I can write the appropriate selector for you.  
            }
        });
    }
}); 
```

因为您不希望它在初始加载时触发，您可以使用类似[How to detect/track postback in javascript?](https://stackoverflow.com/questions/1857606/how-to-detect-track-postback-in-javascript) 并检查您是否在 document.ready 之后进行回发 - 我假设您已使用链接中的建议，并且您的回发检测函数称为 isPostback()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:56:14.007

Rich 打败了我，但这是香草 js 版本（ie9+）：

```
Page_Validators
    .filter(function(v) { return !v.isvalid; })
    .forEach(function (v) { console.log(v.parentNode); }); 
```

请记住将代码放在 </form>-tag 下方。我在使用 jQuerys document.ready 和 window.onload 时遇到了问题，因为它可能会在加载来自 asp.net 的所有需要​​的 JavaScript 之前执行代码。

更新：更兼容浏览器的版本

```
for(var i = 0; i < Page_Validators.length; i++) {
    var validator = Page_Validators[i];
    if (!validator.isvalid) {
        console.log(validator.parentNode);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:42:17.080

有一个为此问题构建的项目尝试查看它....您也可以下载源代码以分析更多详细信息或使用相同的代码库如果您愿意.... [http://www.codeproject .com/Articles/43397/Validating-Accordion-and-RadPanelBar-using-Ajax-an](http://www.codeproject.com/Articles/43397/Validating-Accordion-and-RadPanelBar-using-Ajax-an)

# c++ - 提升编译错误 Mac OS X 10.7.4

> ID：12693650
> 
> 赞同：11
> 
> 时间：2012-10-02T15:43:00.613
> 
> 标签：c++, macos, boost

我想在我的 Mac 上使用 boost。

Mac OS X 10.7.4 Xcode 4.5

我通过自制软件安装了 boost。

```
brew install boost 
```

Boost 版本是 1.49.0。我建立了我的 Xcode 项目。

添加标题搜索路径。

```
/usr/local/Cellar/boost/1.49.0/include 
```

添加库

```
libboost * .dylib 
```

当我编译我的项目时，我有很多错误。Clang LLVM 1.0 错误。（我想上传一张图片，但我不能上传，因为我没有超过10个声望。）

```
use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?
use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?
too few template arguments for class template '__is_function'
use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?
field has incomplete type 'std::exception_ptr'
expected ';' at end of declaration list
no member named 'memcpy' in namespace 'std::__1'; did you mean 'memcpy'?
no member named 'memcpy' in namespace 'std::__1'; did you mean 'memcpy'?
expected ';' at end of declaration list
expected ';' at end of declaration list
C++ requires a type specifier for all declarations
'operator==' cannot be the name of a variable or data member
use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?
expected ';' at end of declaration
expected unqualified-id
expected ';' at end of declaration list
unknown type name 'nullptr_t'
unknown type name 'nullptr_t'
qualified reference to 'shared_ptr' is a constructor name rather than a type wherever a constructor can be declared
too many errors emitted, stopping now 
```

我检查了这个问题。

[带有提升“语义问题 - 未声明的标识符 va_start”的 XCode](https://stackoverflow.com/questions/12573271/xcode-with-boost-semantic-issue-undeclared-identifier-va-start)

但我找不到答案。请让我知道是否有解决方案。

使用boost的头文件是这样的。

**GLTexture.hpp**

```
#pragma once

#ifndef __GL_TEXTURE_HPP__
#define __GL_TEXTURE_HPP__

// Standard libraries.
#include <iostream>
#include <fstream>
#include <string>

#ifdef _WIN32
#pragma warning (push)
#pragma warning (disable:4819)
#endif

// Smart pointers.
#include <boost/shared_ptr.hpp>
#include <boost/scoped_ptr.hpp>
#include <boost/shared_array.hpp>

// Foreach macros.
#include <boost/foreach.hpp>

// Regular expression.
#include <boost/regex.hpp>

// Image I/O.
#define png_infopp_NULL (png_infopp)NULL
#define int_p_NULL (int*)NULL
#include <boost/gil/gil_all.hpp>
#include <boost/gil/extension/io/jpeg_io.hpp>
#include <boost/gil/extension/io/png_io.hpp>

// File operations,
#include <boost/filesystem.hpp>

// Linear algebra,
#include <boost/numeric/ublas/vector.hpp>
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>

// String functions.
#include <boost/algorithm/string.hpp>

// Serialization
#include <boost/serialization/serialization.hpp>
#include <boost/serialization/string.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/archive/xml_iarchive.hpp>
#include <boost/archive/xml_oarchive.hpp>
#include <boost/serialization/version.hpp>

#ifdef _WIN32
#pragma warning (pop)
#endif

// OpenGL and OpenGL Utility Toolkit
#ifdef _WIN32

#include <GL/glew.h>
#include <GL/GLUT.h>

#elif defined __APPLE__

#include <OpenGL/OpenGL.h>
#include <GLUT/GLUT.h>

#endif

#include "TextureManager.hpp"
#include <time.h>

class TextureManager;

using namespace std;

/// function to convert RGB image to RGBA image.
/// Filling its alpha channel with 255.
/// This function is called from boost::gil::copy_and_convert_pixels()
namespace boost { 
    namespace gil {
        template <> void color_convert<rgb8_pixel_t,rgba8_pixel_t>(const rgb8_pixel_t& src,rgba8_pixel_t& dst);
    }
}

class GLTexture
{
public:

    //Destructor
    ~GLTexture();

    //Return instance of GLTexture
    static boost::shared_ptr<GLTexture> getInstance(const std::string& filename, bool _isVolatile = true);

    //Load image file and generate texture
    bool LoadFromFile(boost::shared_ptr<GLTexture> texture);

    //Bind texture when the texture exists. If the texture doesn't exist, this method generates a texture.
    static void bindTexture(boost::shared_ptr<GLTexture> texture);

    //Setter of texFileName
    void setTextureFile(const std::string filename);
    //Setter of volatile Flag
    void setIsVolatile(bool _isVolatile);  

    //Getter of texture ID
    inline const GLuint& getTextureID(void)const{
        return this->texture;
    };

    //Overload of operator to sort list
    friend bool operator <(const boost::shared_ptr<GLTexture>& texture1, const boost::shared_ptr<GLTexture>& texture2);
    friend std::ostream& operator <<(ostream& os, const boost::shared_ptr<GLTexture>& texture);

public:
    GLuint texture;             //texture id
    std::string texFileName;    //image file path
    int width;                  //width of image
    int height;                 //height of image
    clock_t start, end;         //start is the timing of bindTexture, end is the timing of delete, these are used to sort list.
    bool isVolatile;            //the flag whether this texture is volatile or not. true is volatile, and false is not volatile. To keep texture, this is false.
    bool isRead;                //the flag whether this texture already exists in texturelist. true means "exists", false means "not exists".

    boost::shared_ptr<boost::gil::rgba8_image_t> pixelData_ptr;                     //smart pointer to contain pixelData
    boost::shared_ptr<boost::gil::rgba8_image_t::const_view_t> viewwithAlpha_ptr;   //smart pointer to contain viewData

private:
    //Forbid copy constructor
    GLTexture();
    GLTexture(const std::string& imageFilePath, bool _isVolatile = false);
    GLTexture(const GLTexture& glTexture);
    GLTexture& operator = (const GLTexture& glTexture);

    //load image from SSD
    bool LoadImage(const std::string& filename);

};

#endif 
```

**纹理管理器.hpp**

```
#pragma once

#ifndef __TEXTURE_MANAGER_HPP__
#define __TEXTURE_MANAGER_HPP__

// Standard libraries.
#include <iostream>
#include <fstream>
#include <string>

#ifdef _WIN32
#pragma warning (push)
#pragma warning (disable:4819)
#endif

// Smart pointers.
#include <boost/shared_ptr.hpp>

#include <boost/shared_array.hpp>

// Foreach macros.
#include <boost/foreach.hpp>

// Regular expression.
#include <boost/regex.hpp>

// Image I/O.
#define png_infopp_NULL (png_infopp)NULL
#define int_p_NULL (int*)NULL
#include <boost/gil/gil_all.hpp>
#include <boost/gil/extension/io/jpeg_io.hpp>
#include <boost/gil/extension/io/png_io.hpp>

// File operations,
#include <boost/filesystem.hpp>

// Linear algebra,
#include <boost/numeric/ublas/vector.hpp>
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>

// String functions.
#include <boost/algorithm/string.hpp>

// Serialization
#include <boost/serialization/serialization.hpp>
#include <boost/serialization/string.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/archive/xml_iarchive.hpp>
#include <boost/archive/xml_oarchive.hpp>
#include <boost/serialization/version.hpp>

#ifdef _WIN32
#pragma warning (pop)
#endif

// OpenGL and OpenGL Utility Toolkit
#ifdef _WIN32

#include <GL/glew.h>
#include <GL/GLUT.h>

#elif defined __APPLE__

#include <OpenGL/OpenGL.h>
#include <GLUT/GLUT.h>

#endif

#include "GLTexture.hpp"

class GLTexture;

class TextureManager
{
public:
    TextureManager(void);
    ~TextureManager(void);

    //Generate Texture
    static void genTexture(boost::shared_ptr<GLTexture> texture);

    static void setTexture(const boost::shared_ptr<GLTexture> texture);

    static void deleteTexture();
    static bool checkList(const std::string& filename);

private:

    //Forbid copy constructor
    TextureManager(const TextureManager& texManager);
    TextureManager& operator = (const TextureManager& texManager);  

};

#endif 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-14T10:16:26.140

您是否对标题使用了递归搜索路径？如果是这样，请将其更改为非递归。那可能会解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T14:52:01.450

我有类似的问题！我解决了这个问题：Xcode->Buid Setting->C++ language Dialect(GNU++11)->C++Standard Library(libc++(LLVM C++ with C++ 11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T17:04:28.683

我需要添加

```
#include <cstring> 
```

[http://en.cppreference.com/w/cpp/string/byte/memcpy](http://en.cppreference.com/w/cpp/string/byte/memcpy)

# jquery - jquery在单击和向后更改图像

> ID：12693652
> 
> 赞同：0
> 
> 时间：2012-10-02T15:43:10.443
> 
> 标签：jquery, image, attr

我为这个简单的事情感到抱歉，但图像更改不适用于此。我尝试了很多选择，但也许我看不到问题所在。

```
 $('#accordion li.first').click(function() {
                    if ($(this).children('img').attr('src','img/drop.png')) {
                        $(this).children('img').attr('src','img/drop90.png');
                    }
                    if ($(this).children('img').attr('src','img/drop90.png')) {
                        $(this).children('img').attr('src','img/drop.png');
                    }
                 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:43:53.657

你可能想要

```
if ($(this).children('img').attr('src')=='img/drop.png') { 
```

代替

```
if ($(this).children('img').attr('src','img/drop.png')) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:10:44.000

如果您想做不同的事情，请按照以下步骤操作：-

1.  为图像添加类`drop`&`drop90`
2.  在`drop`& `drop90`CSS 类上，应用 `background-image: url(img/drop.png);`和`background-image: url(img/drop90.png);`
3.  使用提到的 Jquery 和示例 CSS 使用函数切换两个类`toggleClass()`

## 查询：

```
$('#accordion li.first').click(function() {
    $(this).children('img').toggleClass("drop drop90");
});​ 
```

## CSS：

```
.​drop​ {
    background-image: url(img/drop.png); 
    height: 100px; 
    width: 200px;
}
.drop90 {
    background-image: url(img/drop90.png); 
    height: 100px; 
    width: 200px;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:45:14.853

if ($(this).find('img').attr('src') === 'img/drop.png') 将始终评估为**true ..** 因为您将值分配给它而不是比较

试试这个

```
 $('#accordion li.first').click(function() {
       if ($(this).children('img').attr('src') === 'img/drop.png') {
          $(this).children('img').attr('src','img/drop90.png');
        }
        if ($(this).children('img').attr('src') === 'img/drop90.png') {
               $(this).children('img').attr('src','img/drop.png');
        }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:48:13.000

```
$('#accordion li.first').click(function() {
    var $this = $(this), $img = $this.children('img'), src = $img.attr('src');

    switch (src) {
        case 'img/drop.png':
            $img.attr('src', 'img/drop90.png');
        break;

        case 'img/drop90.png':
            $img.attr('src', 'img/drop.png');
        break;
    }
}); 
```

# android - Android 图像的线性映射

> ID：12693656
> 
> 赞同：2
> 
> 时间：2012-10-02T15:43:29.120
> 
> 标签：android, 3d, linear-algebra

我正在寻找将`ImageView`绘图矩形映射到四边形。

我希望我可以通过覆盖`ViewGroup.getChildStaticTransformation (View child, Transformation t)`和弄乱[`Matrix`](http://developer.android.com/reference/android/graphics/Matrix.html)有和没有 a来做到这一点`Camera`，但它并不像我想要的那么简单。

我希望能够拍摄位图并将其投影到 3d 平面/表面上。

我以为我已经找到了一个简单易用的[Matrix.setRectToRect(...)](http://developer.android.com/reference/android/graphics/Matrix.html#setRectToRect%28android.graphics.RectF,%20android.graphics.RectF,%20android.graphics.Matrix.ScaleToFit%29)解决方案，但不完全在那里。因为`RectF`只允许指定边缘而不是我不能用来映射到梯形的角。我希望能够指定我的目标形状，而不是弄乱 3D 动画类或手动旋转`Camera`.

我知道我需要复习我的线性代数，但我希望有人能给我一些指点:)

谢谢！

编辑：环顾四周，我看到我想使用[投影变换](http://en.wikipedia.org/wiki/Projective_transformation)

编辑：我要测试[这个解决方案](https://stackoverflow.com/questions/2484071/how-do-i-compete-the-transformation-matrix-needed-to-transform-a-rectangle-into)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:30:02.133

Doh，我正在寻找它的[Matrix.setPolyToPoly() ！](http://developer.android.com/reference/android/graphics/Matrix.html#setPolyToPoly%28float%5B%5D,%20int,%20float%5B%5D,%20int,%20int%29)从 API 级别 1 开始，它一直都在那里（感谢上帝！）

# deployment - symfony2 语言环境和部署

> ID：12693657
> 
> 赞同：0
> 
> 时间：2012-10-02T15:43:30.463
> 
> 标签：deployment, symfony, localization

我正在 symfony2 中创建一个 Web 应用程序。我已经在本地完成了所有开发（OSX），但现在我想在演示文稿中展示我无法使用自己的笔记本电脑的第一个版本。

我正在部署到 ubuntu 10 服务器。我还在另一个小型 ubuntu 11 vps 上对其进行了测试，但遇到了同样的问题。

我仔细检查了本教程是否在我的 ubuntu 服务器上为 symfony 正确设置了 php：

[http://www.joelverhagen.com/blog/2011/05/how-to-configure-symfony-2-0-on-ubuntu-server-2011-4/](http://www.joelverhagen.com/blog/2011/05/how-to-configure-symfony-2-0-on-ubuntu-server-2011-4/)

对于部署，我遵循以下步骤：

[在 Symfony 2 中将应用程序移至生产模式](https://stackoverflow.com/questions/9258715/moving-app-to-production-mode-in-symfony-2)

但是第一步（ php app/console cache:clear --env=prod --no-debug ）给了我以下错误（在本地运行此命令时也会发生此错误）：

```
php app/console cache:clear --env=prod --no-debug

Clearing the cache for the prod environment with debug false

[ReflectionException]                                         
Class Packed\Bundle\UserBundle\Entity\Rapport does not exist  

cache:clear [--no-warmup] [--no-optional-warmers] 
```

这有点奇怪，因为 Packed\Bundle\UserBundle\Entity\Rapport 不存在，但是 Packed\Bundle\ScoreModelBundle\Entity\Rapport 存在。

由于应用程序不需要投入生产一段时间这不是很紧急，非常紧急的是让它在开发模式下运行，所以我尝试通过app_dev.php使用它。

如果我删除 app_dev.php 中的 localhost-check 一切都按预期工作，但 i8n 无法正常工作......我无法切换到本地可能的其他语言环境：xxx.com/app_dev.php/en 而且它不使用messages.nl.yml、messages.en.yml、...和其他文件。

知道可能是什么原因造成的吗？

我检查了 symfony 和 apache 日志，但没有什么奇怪的。我应该检查任何其他日志吗？

谢谢！

乔里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:26:08.317

尝试重建您的引导文件。如果您使用的是 APC-cache，请从 cli 重新启动它。如果没有帮助。

最简单的方法是运行作曲家并进行更新。

要检查翻译（模板应该缓存在服务器上），检查`config.yml`翻译服务必须在那里启用。您可能已启用它`config_dev.yml`但未在`config_prod.yml`

# iphone - 创建没有应用名称的本地通知

> ID：12693659
> 
> 赞同：2
> 
> 时间：2012-10-02T15:43:33.280
> 
> 标签：iphone, ios, notifications, uilocalnotification

本地通知的正常格式是两行。应用名称在第一行，通知`alertBody`在第二行。

![在此处输入图像描述](../Images/d9a180965a6bcbe797d1783b326e4b55.png)

提醒应用具有不同的样式，不显示应用名称。或者更确切地说，警报正文不是应用程序名称，而是唯一显示的内容，并且以粗体显示。

![在此处输入图像描述](../Images/8508877a48cf1762960c2bea9a9c1efc.png)

是否有可能获得这种风格，或者它是苹果独有的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:48:16.913

这无法完成（不访问私有 API）。这是为了防止应用程序伪装成其他应用程序。只有 Apple 应用程序能够隐藏标题。

# apache-flex - Adobe Air - 恢复在开始时最大化的窗口 - 恢复大小更大？

> ID：12693662
> 
> 赞同：0
> 
> 时间：2012-10-02T15:43:40.113
> 
> 标签：apache-flex, actionscript, air

基本上正在发生的事情是：

1.  最大化时关闭窗口（AIRWindow.as 类型，扩展 Window.as）
2.  重新打开时，此窗口处于最大化状态，此时 Air 没有恢复窗口大小的记录。
3.  单击恢复按钮 - AIRWindow.restore() 调用 Window.nativeWindow.restore()
4.  AIR 调整窗口大小，但使其与最大化状态基本相同或略大

我们无权访问 NativeWindow 文件或 restore() 函数，所以我不确定如何将最大化窗口的默认大小调整为恢复状态？

有任何想法吗？

注意：NativeWindow 是 airglobal.swc 包的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:05:34.023

您可以在创建时设置初始窗口大小吗？

当我创建从 NativeWindow 派生的类时，我在调用 activate() 之前设置了 x、y、width 和 height 属性。如果您随后最大化/最小化，此大小将用作还原操作的基础。

您可以创建特定大小的窗口，然后如果您最初希望它最大化，则在加载时立即将其最大化。

# c - 冒泡排序与 C

> ID：12693668
> 
> 赞同：0
> 
> 时间：2012-10-02T15:43:51.020
> 
> 标签：c, unix, bubble-sort

我有一个非常简单（或者至少应该是）的任务，我必须在大量随机数上运行冒泡排序并查看它的性能时间。然后我必须做同样的事情，除了将数组分成两半，一半在一个线程中排序，另一半在另一个线程中排序，看看它是否更快。

我以前从未使用过 C，所以我对指针一无所知，只使用过 Java。这是我的代码，因为我只是想让冒泡排序工作。

```
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdlib.h>
#include <libgen.h>

int main() {
  int *array[50000];
  for(int i = 0; i < 50000; i++) {
    array[i] = 1;
  }
  bubbleSort(array, 50000);
}

void bubbleSort(int *numbers[], int *array_size) {
  int i, j, temp;
  for(i = (array_size - 1); i > 0; i--) {
    for(j = 1; j <= i; j++) {
  if(numbers[j-1] > numbers[j]) {
    temp = numbers[j-1];
    numbers[j-1] = numbers[j];
    numbers[j] = temp;
      }
    }
  }
  for(int i = 0; i < 10; i++) {
    printf(numbers[i]);
  }
} 
```

我在这里要做的就是对数组进行排序，然后打印出前十个数字，这样我就知道它正在工作。我收到各种指针错误。

```
"bubbleSort.c", line 11: warning: improper pointer/integer combination: op "="
"bubbleSort.c", line 13: warning: implicit function declaration: bubbleSort
"bubbleSort.c", line 16: identifier redeclared: bubbleSort
        current : function(pointer to pointer to int, pointer to int) returning void
        previous: function() returning int : "bubbleSort.c", line 13
"bubbleSort.c", line 18: warning: improper pointer/integer combination: op "="
"bubbleSort.c", line 21: warning: improper pointer/integer combination: op "="
"bubbleSort.c", line 23: warning: improper pointer/integer combination: op "="
"bubbleSort.c", line 28: warning: argument #1 is incompatible with prototype:
        prototype: pointer to const char : "/usr/include/iso/stdio_iso.h", line 206
        argument : pointer to int
cc: acomp failed for bubbleSort.c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:45:19.360

这个：

```
int *array[50000]; 
```

声明一个包含 50,000 个元素的指针数组`int`，这可能不是您想要的。删除`*`.

在`bubbleSort()`原型中，您还具有应该删除的虚假星号。

请注意，星号在 C 中*表示*某些东西，你不应该只是随意地用它们来装饰你的代码，无论你喜欢什么。如果您不确定*它*的含义和*时间*，如果这是针对课程的，您应该可以访问一些教程信息。开始阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:49:18.257

**第 11 行：**您不应该声明，而是`int *array[]`第**13 行：**原型化您的函数或在主线上方声明它**第 16 行：**您声明但在主线中您给它一个**第 18、21 和 23 行：**与**11**相同。**第 28 行：切勿**将 printf 与可变格式字符串一起使用！就是这样。 `int array[]`
 ****`int *array_size``int`
 ******`printf("%i, ", numbers[i]);`**********

 ******你真的应该复习 C 编码基础******

# c# - 调用方法的空异常

> ID：12693671
> 
> 赞同：0
> 
> 时间：2012-10-02T15:44:00.910
> 
> 标签：c#, .net, exception, iis, soap

我有以下代码：

```
public class A: IContract, ...
{
    private B b = new B(); 
    // contract method
    public string MethodA(string p1, string p2)
    {
        Log("Start");
        SomeObject obj = CreateObj(p1, p2);
        Log("Before Send");
        string result = b.SendToExternalSth(obj);
        // do sth
        return result;
    }
}

public class B
{
    public string SendToExternalSth(SomeObject obj)
    {
        Log("BEGIN");
        string a, b;
        a = proxy.Send(obj);
        // do sth
        Log("End");
        return a;
    }
} 
```

执行line with 后，`Before Send`我得到`System.Exception`了空消息，并且异常的堆栈跟踪指向 line with close `}`for`SendToExternalSth`方法。

你有什么想法为什么会发生？我应该提到：

*   这只发生在生产环境（在本地和测试环境中工作），
*   代码在 c# - .net 4.0 中，
*   此代码是托管在 IIS 7.0 下的soap Web 服务代码（`MethodA`是一个soap 操作，`SendToExternalSth`方法是某个其他类的内部方法）的一部分，
*   我正在使用“任何 cpu”选项构建它，
*   我正在`Debug`生产环境中部署构建，
*   生产环境和测试环境都是 64 位 windows 2008 r2 sp1，
*   .net 4 框架都安装了相同的版本，
*   与测试环境相比，生产服务器上缺少 Microsoft .NET Framework 4 Multi-Targeting Pack 组件，但目前我无法在那里安装它。

请告诉我是否需要更多信息来解决此问题，我将很乐意为您提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:28:56.903

我已经编写了更多调试代码并多次更改了编译选项。下次部署到生产环境后，此错误未发生。我认为这是与`Any CPU`选项相关的一些编译问题，但这只是猜测。

# google-maps - Facebook Javascript SDK让用户签到放在谷歌地图/地球上

> ID：12693676
> 
> 赞同：1
> 
> 时间：2012-10-02T15:44:10.287
> 
> 标签：google-maps, permissions, facebook-javascript-sdk, google-earth, checkin

我正在尝试从 Facebook 获取用户签到并放在 Google 地球/地图上，我搜索了示例，但一无所获（这里和谷歌上）。

现在我的问题是获取用户的 chekins（首先我将分别制作所有 facebook 部分，然后将使用 google earth / maps 收集），即使我请求所有权限，似乎也没有授予我的应用程序权限（用于测试目的）但仍然无法正常工作。

以下是我正在使用的代码：

```
<!DOCTYPE html> 
<html xmlns:fb="https://www.facebook.com/2008/fbml">
    <head>
        <title>New JavaScript SDK</title>
        <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                window.fbAsyncInit = function() {
                    FB.init({
                        appId: 'appidhere', 
                        status: true, 
                        cookie: true,
                        xfbml: true,
                        oauth: true
                    });

                    function updateButton(response) {
                        var button = document.getElementById('fb-auth');

                        if (response.authResponse) {
                            //user is already logged in and connected
                            var userInfo = document.getElementById('user-info');
                            FB.api('/me', function(response) {
                                userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
                                button.innerHTML = 'Logout';

                                //checkin_id, author_uid, page_id, app_id, post_id, coords, timestamp, tagged_uids, message
                                var query =  FB.Data.query('SELECT page_id, coords, tagged_uids, message FROM checkin WHERE author_uid= me()', response.id);
                                query.wait(function(rows) {
                                    document.getElementById('user-checkins').innerHTML =  
                                    'Place: ' + rows[0].page_id + "<br />" + 
                                    'Latitude/Longetude: ' + rows[0].coords + "<br />" + 
                                    'Friends you been with: ' + rows[0].tagged_uids + "<br />" + 
                                    'Message: ' + rows[0].message + "<br />";
                                });
                            });
                            button.onclick = function() {
                                FB.logout(function(response) {
                                    var userInfo = document.getElementById('user-info');
                                    userInfo.innerHTML="";
                                });
                            };
                        } else {
                            //user is not connected to your app or logged out
                            button.innerHTML = 'Login';
                            button.onclick = function() {
                                FB.login(function(response) {
                                    if (response.authResponse) {
                                        FB.api('/me', function(response) {
                                            var userInfo = document.getElementById('user-info');
                                            userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture" style="margin-right:5px"/>' + response.name;
                                        });
                                    } else {
                                        //user cancelled login or did not grant authorization
                                    }
                                }, {
                                    scope:'user_about_me, user_activities, user_birthday, user_checkins, user_education_history, user_events, user_groups, user_hometown, user_interests, user_likes, user_location, user_notes, user_photos, user_questions, user_relationships, user_relationship_details, user_religion_politics, user_status, user_subscriptions, user_videos, user_website, user_work_history, email, friends_about_me, friends_activities, friends_birthday, friends_checkins, friends_education_history, friends_events, friends_groups, friends_hometown, friends_interests, friends_likes, friends_location, friends_notes, friends_photos, friends_questions, friends_relationships, friends_relationship_details, friends_religion_politics, friends_status, friends_subscriptions, friends_videos, friends_website, friends_work_history, read_friendlists, read_insights, read_insights, read_mailbox, read_requests, read_stream, xmpp_login, ads_management, create_event, manage_friendlists, manage_notifications, user_online_presence, friends_online_presence, publish_checkins, publish_stream, rsvp_event, publish_actions, user_actions.music, user_actions.news, user_actions.video, user_games_activity, friends_actions.music, friends_actions.news, friends_actions.video, friends_games_activity'
                                });
                            }
                        }
                    }

                    // run once with current status and whenever the status changes
                    FB.getLoginStatus(updateButton);
                    FB.Event.subscribe('auth.statusChange', updateButton);
                };

                (function() {
                    var e = document.createElement('script'); e.async = true;
                    e.src = document.location.protocol 
                        + '//connect.facebook.net/en_US/all.js';
                    document.getElementById('fb-root').appendChild(e);
                }());
            });
        </script>
    </head>
<body> 

<div id="fb-root"></div>
<h2>Updated JS SDK example</h2><br />
<div id="user-info"></div>
<div id="user-checkins"></div>
<p><button id="fb-auth">Login</button></p>
</body> 
</html> 
```

它显示图片和名称，但不显示签入信息。控制台显示：

```
Uncaught TypeError: Can not read property 'page_id' of undefined facebook2.html: 31
(anonymous function) facebook2.html: 31
t.__wrapper all.js: 49
(anonymous function) all.js: 127
d all.js: 83
(anonymous function) all.js: 83
w all.js: 18
FB.provide.fire all.js: 83
FB.Class.FB.copy.setProperty all.js: 105
FB.subclass.set all.js: 127
(anonymous function) all.js: 129
w all.js: 18
(anonymous function) all.js: 129
would all.js: 66
q all.js: 63
(anonymous function) all.js: 48
(anonymous function) 
```

其他事情，

由于有几个签到，我如何与他们做一个循环？

在每个签入中，坐标是一个数组，我如何将这个数组转换为纬度/经度？

page_id 给了我一个 id（当然）我喜欢得到这个地方的名字，怎么做？

如果有人可以帮助我，现在谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:35:29.737

好的！

我发现这个[http://www.facebookmobileweb.com/hackbook/](http://www.facebookmobileweb.com/hackbook/)对我有很大帮助。

我发现了错误，我必须在“Facebook上的应用程序”中设置画布网址，然后权限才起作用......

# dynamics-crm - 电子邮件正文中的额外字符

> ID：12693677
> 
> 赞同：0
> 
> 时间：2012-10-02T15:44:11.640
> 
> 标签：dynamics-crm, dynamics-crm-4

我们在从 CRM 发送的电子邮件末尾添加了额外字符时遇到问题，这是一个示例，这是从我们的系统发送到德国的收件人 - 服务器区域设置为 uk 。电子邮件的正文只是“这只是一封测试电子邮件”。

我们在汇总 21 上为服务器、客户端和电子邮件路由器使用动态 crm 4.0。这封特定的电子邮件是使用 Web 界面和电子邮件路由器发送的。

有谁知道额外的文字是从哪里来的？

**更新 - 我们已将此追溯到我们的 sonicwall 电子邮件设备添加的电子邮件页脚。如果我们找出它有时会损坏的原因，将再次更新。**

Von: 发件人
Gesendet: Dienstag, 2\. Oktober 2012 14:21
An: sender
Betreff: test 2 october CRM:0161013

这只是一封测试电子邮件。

Nwlicit )系yʥNrj|뢛抷Ringzح˭罚xƑ란h.)笺tYG)xzޗj渚iԭ熪xj`ؐ+tڍ馚{ۍמi˚)׭Ӯפ+zqVtګ}۟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:31:22.710

可能是邮件服务器的问题。我认为您可以在每封外发电子邮件上添加其他文本。你检查邮件服务器的配置了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:09:14.453

没能找到真正的解决方法来找出 Sonicwall 造成这种情况的原因，我们的交换人员只是将页脚从那里移动到 Excahnge 服务器，现在它可以正常工作了。

# wpf - 在 WPF 中创建可调整大小的网格

> ID：12693678
> 
> 赞同：1
> 
> 时间：2012-10-02T15:44:18.413
> 
> 标签：wpf, grid, resizable, gridsplitter

我需要编写一个 C# WPF 程序，以便让用户使用鼠标单独修改网格的宽度和高度。经过一番阅读，我发现 WPF 具有 GridSplitter 控件，这似乎是解决我的问题的可能方法。到目前为止，这是我的方法：

```
private const int NumCols = 5;
    private const int NumRows = 7;

    private void CreateDynamicWPFGrid()
    {
        // Create the Grid
        var dynamicGrid = new Grid();

        for (int i = 0; i < NumCols - 1; ++i )
        {
            // Define 2 * (NumCols - 1) columns. For every two columns, the first one will hold a label
            // whereas the second one will hold a vertical splitter.

            var gridColDefA = new ColumnDefinition();
            // The gridColDefB is for the splitter.
            var gridColDefB = new ColumnDefinition();
            gridColDefB.Width = new GridLength(1, GridUnitType.Auto);

            dynamicGrid.ColumnDefinitions.Add(gridColDefA);
            dynamicGrid.ColumnDefinitions.Add(gridColDefB);
        }
        {
            // The last column only needs a cell for holding a label. No splitter whatsoever.
            var gridColDef = new ColumnDefinition();
            dynamicGrid.ColumnDefinitions.Add(gridColDef);
        }

        for (int j = 0; j < NumRows - 1; ++j)
        {
            var gridRowDefA = new RowDefinition();
            var gridRowDefB = new RowDefinition();
            // The gridRowDefB is for the splitter.
            gridRowDefB.Height = new GridLength(1, GridUnitType.Auto);

            dynamicGrid.RowDefinitions.Add(gridRowDefA);
            dynamicGrid.RowDefinitions.Add(gridRowDefB);
        }
        {
            // The last row only needs a cell for holding a label. No splitter whatsoever.
            var gridRowDef = new RowDefinition();
            dynamicGrid.RowDefinitions.Add(gridRowDef);
        }

        for (int i = 0; i < NumCols - 1; ++i )
        {
            for(int j = 0; j < NumRows - 1; ++j )
            {
                // Insert the label.
                var label = new Label();
                label.Content = "C" + i + "-R" + j;
                label.Background = new SolidColorBrush(Colors.Azure);
                Grid.SetColumn(label, 2 * i);
                Grid.SetRow(label, 2 * j);
                dynamicGrid.Children.Add(label);

                // Insert the horizontal splitter.
                var horizontalGridSplitter = new GridSplitter();
                horizontalGridSplitter.Height = 1;
                horizontalGridSplitter.Background = new SolidColorBrush(Colors.DarkSlateBlue);
                horizontalGridSplitter.HorizontalAlignment = HorizontalAlignment.Stretch;
                horizontalGridSplitter.VerticalAlignment = VerticalAlignment.Center;
                Grid.SetColumn(horizontalGridSplitter, 2 * i );
                Grid.SetRow(horizontalGridSplitter, 2 * j + 1);
                Grid.SetRowSpan(horizontalGridSplitter, 1);
                Grid.SetColumnSpan(horizontalGridSplitter, 1);
                dynamicGrid.Children.Add(horizontalGridSplitter);

                // Insert the vertical splitter.
                var verticalGridSplitter = new GridSplitter();
                verticalGridSplitter.Width = 1;
                verticalGridSplitter.Background = new SolidColorBrush(Colors.DarkSlateBlue);
                verticalGridSplitter.HorizontalAlignment = HorizontalAlignment.Center;
                verticalGridSplitter.VerticalAlignment = VerticalAlignment.Stretch;
                Grid.SetColumn(verticalGridSplitter, 2 * i + 1);
                Grid.SetRow(verticalGridSplitter, 2 * j + 1);
                Grid.SetRowSpan(verticalGridSplitter, 1);
                Grid.SetColumnSpan(verticalGridSplitter, 1);
                dynamicGrid.Children.Add(verticalGridSplitter);
            }
        }

        // Display grid into a Window
        Content = dynamicGrid;
    } 
```

我得到的输出如下：

![默认输出](../Images/2bf0c77703ae0985aaa42a92c0456a42.png)

请注意，我只能调整行的大小（不知道为什么不显示垂直拆分器），并且由于某种原因，当我抓住水平拆分器时，它会调整整行的大小，而不仅仅是单个单元格。有任何想法吗？请参阅以下屏幕截图以查看正在调整大小：

![在此处输入图像描述](../Images/1c469dcd4ca885fc8e44c18f41338ceb.png)

如果我调整单元格 (0,0) 的大小（图像已由我手动编辑），这就是我所期望的：

![在此处输入图像描述](../Images/e8899859fd509974cd4c6835b5ab8523.png)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:01:51.577

如果您删除为您的 verticalGridSplitter 设置行的行并将它们设置为 span NumRows，您将看到您的垂直拆分器。但最终，我认为您正在尝试做一些带有分离器的网格无法做到的事情。您不能调整单个单元格的宽度和高度，只能调整整行和整列。

毕竟，如果你让 C0-R0 更高，你希望那排的其他人做什么？

# visual-studio-2010 - 在 Git Branch-A 中添加的文件在 Branch-B 中可见

> ID：12693680
> 
> 赞同：5
> 
> 时间：2012-10-02T15:44:30.140
> 
> 标签：visual-studio-2010, git

首先，我是 Git 新手。使用 Git Bash，我使用 123-Feature-A 创建了一个功能分支`git branch 123-Feature-A`，检查了它，然后通过 Visual Studio 2010 添加了一些文件。Git 状态显示了新文件，我使用添加它们`git add .`- 因为我有 VS2010 Git 源代码控制提供程序安装后，我可以看到图标发生了变化，表明文件已添加。

当我想切换分支时，我会`git commit -a -m "added files"`在功能分支中运行类似的东西，然后切换回主分支。当我在 master 分支中时，我看到 VS2010 中的文件，但图标有一个感叹号，当我尝试打开它时，VS 告诉我它不存在 - VS 中是否有隐藏我添加的文件的设置在 Brand-A 中，如果我切换到 Branch-B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T05:57:40.900

已经有一段时间了，但我想当我遇到同样的问题时，我为 VS 安装了一个 git 扩展。试试[http://www.codeproject.com/Articles/354101/Source-Code-Versioning-with-Git-in-Visual-Studio](http://www.codeproject.com/Articles/354101/Source-Code-Versioning-with-Git-in-Visual-Studio)或： http: [//gitscc.codeplex.com/](http://gitscc.codeplex.com/)

如果您安装其中之一，请确保始终使用它来管理 git。这将使 VS 保持最新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:50:51.810

从 Git 的角度来看，你的工作流程完全没问题，但可能会让 VS 感到困惑，假设你没有 Git 支持。带有 git 插件的 Eclipse 可以很好地检测到这种情况，如果需要，F5（项目刷新）可以解决大部分问题。

只需仔细检查您的 VS 中是否支持 git，例如，您可以进行 git 提交、切换分支等。否则，VS 在这种情况下总是会感到困惑，因为分支更改时 git 的操作方式。

# sql - 左外连接 3 个表

> ID：12693683
> 
> 赞同：3
> 
> 时间：2012-10-02T15:44:36.350
> 
> 标签：sql, sql-server, sql-server-2012, outer-join

我正在更新使用旧结构进行外部连接（=* 和 *=）的查询。我有 3 个表需要包含在外部联接中。

原始查询是：

```
SELECT  s.SkillID ,
        NULL AS Signature ,
        NULL AS DPL ,
        CASE WHEN ISNULL(ds.DPL, dg.DPL) IS NULL
             THEN p.ScaleTo - p.ScaleFrom + 1
             ELSE ISNULL(ds.DPL, dg.DPL)
        END AS DefaultDPL
FROM    tbJobs j ,
        tbSkills s 
        INNER JOIN tbSkillGroups sg ON s.SkillGroupID = sg.SkillGroupID ,
        tbPerfScales p ,
        tbDPLs ds ,
        tbDPLs dg
WHERE   j.JobID = 866
        AND ( ds.LevelID=*j.LevelID
              AND ds.IDType = 1
              AND ds.GroupOrSkillID=*s.SkillID
            )
        AND ( dg.LevelID=*j.LevelID
              AND dg.IDType = 0
              AND dg.GroupOrSkillID=*sg.SkillGroupID
            )
        AND ( ( s.PerfScaleID IS NOT NULL
                AND p.PerfScaleID = s.PerfScaleID
              )
              OR ( s.PerfScaleID IS NULL
                   AND p.PerfScaleID = sg.PerfScaleID
                 )
            ) 
```

我正在做：

```
SELECT  s.SkillID ,
        NULL AS Signature ,
        NULL AS DPL ,
        CASE WHEN ISNULL(ds.DPL, dg.DPL) IS NULL
             THEN p.ScaleTo - p.ScaleFrom + 1
             ELSE ISNULL(ds.DPL, dg.DPL)
        END AS DefaultDPL
FROM    tbPerfScales p ,
        tbSkills s
        INNER JOIN tbSkillGroups sg ON s.SkillGroupID = sg.SkillGroupID ,
        tbJobs j
        LEFT OUTER JOIN tbDPLs ds ON j.LevelID = ds.LevelID
                                     AND s.SkillID = ds.GroupOrSkillID
        LEFT OUTER JOIN tbDPLs dg ON j.LevelID = dg.LevelID
                                     AND sg.SkillGroupID = dg.GroupOrSkillID
WHERE   j.JobID = 866
        AND ds.IDType = 1
        AND dg.IDType = 0
        AND ( ( s.PerfScaleID IS NOT NULL
                AND p.PerfScaleID = s.PerfScaleID
              )
              OR ( s.PerfScaleID IS NULL
                   AND p.PerfScaleID = sg.PerfScaleID
                 )
            ) 
```

出于某种原因，我收到了错误：

> 无法绑定多部分标识符“s.SkillID”。

我知道在这部分：

```
 tbJobs j
    LEFT OUTER JOIN tbDPLs ds ON j.LevelID = ds.LevelID
                                 AND s.SkillID = ds.GroupOrSkillID 
```

我不确定我做错了什么。

感谢任何帮助。何塞

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:46:51.877

语句后有逗号

```
INNER JOIN tbSkillGroups sg ON s.SkillGroupID = sg.SkillGroupID , 
```

这是因为你有 tbJobs 在它之后，它应该在其他表中。我建议使用 CROSS JOIN 而不是只在 FROM 子句中包含多个表，因为这样会更清楚。

这是应该工作的查询的基本重写，尽管您应该能够轻松摆脱大多数交叉连接。

```
SELECT  s.SkillID ,
        NULL AS Signature ,
        NULL AS DPL ,
        CASE WHEN ISNULL(ds.DPL, dg.DPL) IS NULL
             THEN p.ScaleTo - p.ScaleFrom + 1
             ELSE ISNULL(ds.DPL, dg.DPL)
        END AS DefaultDPL
FROM    tbPerfScales p 
        CROSS JOIN tbSkills s
        CROSS JOIN tbJobs j
        INNER JOIN tbSkillGroups sg ON s.SkillGroupID = sg.SkillGroupID
        LEFT OUTER JOIN tbDPLs ds ON j.LevelID = ds.LevelID
                                     AND s.SkillID = ds.GroupOrSkillID
        LEFT OUTER JOIN tbDPLs dg ON j.LevelID = dg.LevelID
                                     AND sg.SkillGroupID = dg.GroupOrSkillID
WHERE   j.JobID = 866
        AND ds.IDType = 1
        AND dg.IDType = 0
        AND ( ( s.PerfScaleID IS NOT NULL
                AND p.PerfScaleID = s.PerfScaleID
              )
              OR ( s.PerfScaleID IS NULL
                   AND p.PerfScaleID = sg.PerfScaleID
                 )
            ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:52:09.537

您不能混合使用不同的 SQL 语法。如果您使用 ANSI-92，则需要更正所有连接，而不仅仅是外部连接。一致性是关键。

逗号现在是不正确的语法。您需要为每个表添加一个连接，或者根据 Darren 的回答将它们拉出到交叉应用中。这是问题：

```
FROM    tbPerfScales p ,
        tbSkills s
        INNER JOIN tbSkillGroups sg ON s.SkillGroupID = sg.SkillGroupID ,
        tbJobs j
        LEFT OUTER JOIN tbDPLs ds ON j.LevelID = ds.LevelID
                                     AND s.SkillID = ds.GroupOrSkillID
        LEFT OUTER JOIN tbDPLs dg ON j.LevelID = dg.LevelID
                                     AND sg.SkillGroupID = dg.GroupOrSkillID 
```

它需要遵循以下原则：

```
 FROM    tbPerfScales p 
     INNER JOIN tbSkills s ON  p.<field> = s.<field>
        INNER JOIN tbSkillGroups sg ON s.SkillGroupID = sg.SkillGroupID
        INNER JOIN tbJobs j on j.<field> = <table p? sg? not sure>.<field>
        LEFT OUTER JOIN tbDPLs ds ON j.LevelID = ds.LevelID
                                     AND s.SkillID = ds.GroupOrSkillID
        LEFT OUTER JOIN tbDPLs dg ON j.LevelID = dg.LevelID
                                     AND sg.SkillGroupID = dg.GroupOrSkillID 
```

# android - OSMDroid 从资产文件夹加载自定义离线图块

> ID：12693684
> 
> 赞同：9
> 
> 时间：2012-10-02T15:44:44.587
> 
> 标签：android, offline, osmdroid

我想知道是否有可能做这样的事情。我知道需要修改一些现有代码才能实现这一目标，但我想知道是否有人对在哪里查看以及如何执行此操作有任何指导。

我在地图上的特定区域放置了一些自定义图块，以替代 OSM 图块提供者，但需要将它们存储在 /assets/ 文件夹中。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T15:01:31.653

我使用 nexts 类来做到这一点。

```
import java.io.InputStream;

import org.osmdroid.ResourceProxy.string;
import org.osmdroid.tileprovider.util.StreamUtils;

import android.content.res.AssetManager;
import android.graphics.drawable.Drawable;

public class AssetsTileSource extends CustomBitmapTileSourceBase {
        private final AssetManager mAssetManager;

        public AssetsTileSource(final AssetManager assetManager, final String aName, final string aResourceId,
                        final int aZoomMinLevel, final int aZoomMaxLevel, final int aTileSizePixels,
                        final String aImageFilenameEnding) {
                super(aName, aResourceId, aZoomMinLevel, aZoomMaxLevel, aTileSizePixels, aImageFilenameEnding);
                mAssetManager = assetManager;
        }

        @Override
        public Drawable getDrawable(final String aFilePath) {
                InputStream inputStream = null;
                try {
                        inputStream = mAssetManager.open(aFilePath);
                        if (inputStream != null) {
                                final Drawable drawable = getDrawable(inputStream);
                                return drawable;
                        }
                } catch (final Throwable e) {
                        // Tile does not exist in assets folder.
                        // Ignore silently
                } finally {
                        if (inputStream != null) {
                                StreamUtils.closeStream(inputStream);
                        }
                }

                return null;
        }
} 
```

MapTileFileAssetsProvider.java

```
public class MapTileFileAssetsProvider extends MapTileModuleProviderBase {

            protected ITileSource mTileSource;

            public MapTileFileAssetsProvider(final ITileSource pTileSource) {
                    super(OpenStreetMapTileProviderConstants.NUMBER_OF_TILE_FILESYSTEM_THREADS, OpenStreetMapTileProviderConstants.TILE_FILESYSTEM_MAXIMUM_QUEUE_SIZE);

                    mTileSource = pTileSource;
            }

            @Override
            public boolean getUsesDataConnection() {
                    return false;
            }

            @Override
            protected String getName() {
                    return "Assets Folder Provider";
            }

            @Override
            protected String getThreadGroupName() {
                    return "assetsfolder";
            }

            @Override
            protected Runnable getTileLoader() {
                    return new TileLoader();
            }

            @Override
            public int getMinimumZoomLevel() {
                    return mTileSource != null ? mTileSource.getMinimumZoomLevel() : MAXIMUM_ZOOMLEVEL;
            }

            @Override
            public int getMaximumZoomLevel() {
                    return mTileSource != null ? mTileSource.getMaximumZoomLevel() : MINIMUM_ZOOMLEVEL;
            }

            @Override
            public void setTileSource(final ITileSource pTileSource) {
                    mTileSource = pTileSource;
            }

            private class TileLoader extends MapTileModuleProviderBase.TileLoader {

                    @Override
                    public Drawable loadTile(final MapTileRequestState pState) throws CantContinueException {

                            if (mTileSource == null) {
                                    return null;
                            }

                            final MapTile pTile = pState.getMapTile();
                            String path = mTileSource.getTileRelativeFilenameString(pTile);

                            Drawable drawable;
                            try {
                                    drawable = mTileSource.getDrawable(path);
                            } catch (final LowMemoryException e) {
                                    // low memory so empty the queue
                                    throw new CantContinueException(e);
                            }

                            return drawable;
                    }
            }
    } 
```

和

```
import java.io.File;
import java.io.InputStream;
import java.util.Random;

import org.osmdroid.ResourceProxy;
import org.osmdroid.ResourceProxy.string;
import org.osmdroid.tileprovider.ExpirableBitmapDrawable;
import org.osmdroid.tileprovider.MapTile;
import org.osmdroid.tileprovider.constants.OpenStreetMapTileProviderConstants;
import org.osmdroid.tileprovider.tilesource.ITileSource;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;

public abstract class CustomBitmapTileSourceBase implements ITileSource,
                OpenStreetMapTileProviderConstants {

        private static final Logger logger = LoggerFactory.getLogger(CustomBitmapTileSourceBase.class);

        private static int globalOrdinal = 0;

        private final int mMinimumZoomLevel;
        private final int mMaximumZoomLevel;

        private final int mOrdinal;
        protected final String mName;
        protected final String mImageFilenameEnding;
        protected final Random random = new Random();

        private final int mTileSizePixels;

        private final string mResourceId;

        public CustomBitmapTileSourceBase(final String aName, final string aResourceId,
                        final int aZoomMinLevel, final int aZoomMaxLevel, final int aTileSizePixels,
                        final String aImageFilenameEnding) {
                mResourceId = aResourceId;
                mOrdinal = globalOrdinal++;
                mName = aName;
                mMinimumZoomLevel = aZoomMinLevel;
                mMaximumZoomLevel = aZoomMaxLevel;
                mTileSizePixels = aTileSizePixels;
                mImageFilenameEnding = aImageFilenameEnding;
        }

        @Override
        public int ordinal() {
                return mOrdinal;
        }

        @Override
        public String name() {
                return mName;
        }

        public String pathBase() {
                return mName;
        }

        public String imageFilenameEnding() {
                return mImageFilenameEnding;
        }

        @Override
        public int getMinimumZoomLevel() {
                return mMinimumZoomLevel;
        }

        @Override
        public int getMaximumZoomLevel() {
                return mMaximumZoomLevel;
        }

        @Override
        public int getTileSizePixels() {
                return mTileSizePixels;
        }

        @Override
        public String localizedName(final ResourceProxy proxy) {
                return proxy.getString(mResourceId);
        }

        @Override
        public Drawable getDrawable(final String aFilePath) {
                try {
                        // default implementation will load the file as a bitmap and create
                        // a BitmapDrawable from it
                        final Bitmap bitmap = BitmapFactory.decodeFile(aFilePath);
                        if (bitmap != null) {
                                return new ExpirableBitmapDrawable(bitmap);
                        } else {
                                // if we couldn't load it then it's invalid - delete it
                                try {
                                        new File(aFilePath).delete();
                                } catch (final Throwable e) {
                                        logger.error("Error deleting invalid file: " + aFilePath, e);
                                }
                        }
                } catch (final OutOfMemoryError e) {
                        logger.error("OutOfMemoryError loading bitmap: " + aFilePath);
                        System.gc();
                }
                return null;
        }

        @Override
        public String getTileRelativeFilenameString(final MapTile tile) {
                final StringBuilder sb = new StringBuilder();
                sb.append(pathBase());
                sb.append('/');
                sb.append(tile.getX());
                sb.append('_');
                sb.append(tile.getY());
                sb.append('_');
                sb.append(tile.getZoomLevel());
                sb.append(imageFilenameEnding());
                return sb.toString();
        }

        @Override
        public Drawable getDrawable(final InputStream aFileInputStream) {
                try {
                        // default implementation will load the file as a bitmap and create
                        // a BitmapDrawable from it
                        final Bitmap bitmap = BitmapFactory.decodeStream(aFileInputStream);
                        if (bitmap != null) {
                                return new ExpirableBitmapDrawable(bitmap);
                        }
                        System.gc();
                } catch (final OutOfMemoryError e) {
                        logger.error("OutOfMemoryError loading bitmap");
                        System.gc();
                        //throw new LowMemoryException(e);
                }
                return null;
        }

        public final class LowMemoryException extends Exception {
                private static final long serialVersionUID = 146526524087765134L;

                public LowMemoryException(final String pDetailMessage) {
                        super(pDetailMessage);
                }

                public LowMemoryException(final Throwable pThrowable) {
                        super(pThrowable);
                }
        }
} 
```

修改方法 getTileRelativeFilenameString() 以获取您的瓷砖（我使用下一种格式：x_y_zoom.png）

例子：

```
mapView = new MapView(getApplicationContext(), 256);
mapView.setClickable(true);
mapView.setTag("Mapa");
mapView.setTileSource(TileSourceFactory.MAPNIK);
mapView.setMultiTouchControls(true);
mapView.setUseDataConnection(true);

MapTileModuleProviderBase moduleProvider = 
    new MapTileFileAssetsProvider(ASSETS_TILE_SOURCE);
SimpleRegisterReceiver simpleReceiver = 
    new SimpleRegisterReceiver(getApplicationContext());
MapTileProviderArray tileProviderArray = 
    new MapTileProviderArray(ASSETS_TILE_SOURCE, simpleReceiver, 
        new MapTileModuleProviderBase[] { moduleProvider });
TilesOverlay tilesOverlay = 
    new TilesOverlay(tileProviderArray, getApplicationContext());

mapView.getOverlays().add(tilesOverlay); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:38:46.320

Instead to read directly from assets I copy/deploy the maptiles zipped (following osmdroid map tiles directory structure format) into osmdroid maptiles directory and then declare 3 tile providers, archive, cache and online provider.

```
public class MapTileProviderAssets extends MapTileProviderArray 
        implements IMapTileProviderCallback {

    private static final String LOG_TAG = "MapTileProviderAssets";

    private static final String ASSETS_MAP_DIRECTORY = "map";
    private static final String SDCARD_PATH = Environment.getExternalStorageDirectory().getPath();
    private static final String OSMDROID_MAP_FILE_SOURCE_DIRECTORY = "osmdroid";
    private static final String OSMDROID_MAP_FILE_SOURCE_DIRECTORY_PATH = 
            SDCARD_PATH + "/" + OSMDROID_MAP_FILE_SOURCE_DIRECTORY;

    public MapTileProviderAssets(final Context pContext) {
        this(pContext, TileSourceFactory.DEFAULT_TILE_SOURCE);
    }

    public MapTileProviderAssets(final Context pContext, final ITileSource pTileSource) {
        this(pContext, new SimpleRegisterReceiver(pContext), 
                new NetworkAvailabliltyCheck(pContext), pTileSource);

    }

    public MapTileProviderAssets(final Context pContext, final IRegisterReceiver pRegisterReceiver,
                                 final INetworkAvailablityCheck aNetworkAvailablityCheck, 
                                 final ITileSource pTileSource) {
        super(pTileSource, pRegisterReceiver);

        final TileWriter tileWriter = new TileWriter();

        // copy assets delivered in apk into osmdroid map source dir
        // load zip archive first, then cache, then online
        final List<String> zipArchivesRelativePathInAssets = 
                listArchives(pContext.getAssets(), ASSETS_MAP_DIRECTORY);
        for (final String zipFileRelativePathInAssets : zipArchivesRelativePathInAssets) {
            final String copiedFilePath = copyAssetFile(
                    pContext.getAssets(), zipFileRelativePathInAssets, 
                    OSMDROID_MAP_FILE_SOURCE_DIRECTORY);
            Log.d(LOG_TAG, String.format(
                    "Archive zip file copied into map source directory %s", copiedFilePath));
        }
        // list zip files in map archive directory
        final Set<String> setZipFileArchivesPath = new HashSet<String>();
        FileTools.listFiles(setZipFileArchivesPath, new File(
                OSMDROID_MAP_FILE_SOURCE_DIRECTORY_PATH), ".zip", true);
        final Set<IArchiveFile> setZipFileArchives = new HashSet<IArchiveFile>();
        for (final String zipFileArchivesPath : setZipFileArchivesPath) {
            final File zipfile = new File(zipFileArchivesPath);
            final IArchiveFile archiveFile = ArchiveFileFactory.getArchiveFile(zipfile);
            if (archiveFile != null) {
                setZipFileArchives.add(archiveFile);
            }
            setZipFileArchives.add(archiveFile);
            Log.d(LOG_TAG, String.format(
                    "Archive zip file %s added to map source ", zipFileArchivesPath));
        }

        final MapTileFileArchiveProvider archiveProvider;
        Log.d(LOG_TAG, String.format(
                "%s archive zip files will be used as source", setZipFileArchives.size()));
        if (setZipFileArchives.size() > 0) {
            final IArchiveFile[] pArchives = 
                    setZipFileArchives.toArray(new IArchiveFile[setZipFileArchives.size()]);
            archiveProvider = new MapTileFileArchiveProvider(
                    pRegisterReceiver, pTileSource, pArchives);
        } else {
            archiveProvider = new MapTileFileArchiveProvider(
                    pRegisterReceiver, pTileSource);
        }
        mTileProviderList.add(archiveProvider);

        // cache
        final MapTileFilesystemProvider fileSystemProvider = 
                new MapTileFilesystemProvider(pRegisterReceiver, pTileSource);
        mTileProviderList.add(fileSystemProvider);

        // online tiles
        final MapTileDownloader downloaderProvider = 
                new MapTileDownloader(pTileSource, tileWriter, aNetworkAvailablityCheck);
        mTileProviderList.add(downloaderProvider);
    }

    public static List<String> listArchives(final AssetManager assetManager, 
                                            final String subDirectory) {
        final List<String> listArchives = new ArrayList<String>();
        try {
            final String[] lstFiles = assetManager.list(subDirectory);
            if (lstFiles != null && lstFiles.length > 0) {
                for (final String file : lstFiles) {
                    if (isZip(file)) {
                        listArchives.add(subDirectory + "/" + file);
                    }
                    // filter files (xxxxx.xxx format) and parse only directories, 
                    // with out this all files are parsed and
                    // the process is VERY slow
                    // WARNNING: we could have directories with dot for versioning
                    else if (isDirectory(file)) {// (file.lastIndexOf(".") != (file.length() - 4)) {
                        listArchives(assetManager, subDirectory + "/" + file);
                    }
                }
            }
        } catch (final IOException e) {
            Log.w(LOG_TAG, String.format("List error: can't list %s, exception %s", 
                    subDirectory, Log.getStackTraceString(e)));
        } catch (final Exception e) {
            Log.w(LOG_TAG, String.format("List error: can't list %s, exception %s", 
                    subDirectory, Log.getStackTraceString(e)));
        }
        return listArchives;
    }

    private static boolean isZip(final String file) {
        return file.endsWith(".zip");
    }

    private static boolean isDirectory(final String file) {
        return file.lastIndexOf(".") != (file.length() - 4);
    }

    private static String copyAssetFile(final AssetManager assetManager, 
                                        final String assetRelativePath,
                                        final String destinationDirectoryOnSdcard) {
        InputStream in = null;
        OutputStream out = null;
        final String newfilePath = SDCARD_PATH + "/" + 
                destinationDirectoryOnSdcard + "/" + assetRelativePath;
        final File newFile = new File(newfilePath);
        // copy file only if it doesn't exist yet
        if (!newFile.exists()) {
            Log.d(LOG_TAG, String.format(
                    "Copy %s map archive in assets into %s", assetRelativePath, newfilePath));
            try {
                final File directory = newFile.getParentFile();
                if (!directory.exists()) {
                    if (directory.mkdirs()) {
                        // Log.d(LOG_TAG, "Directory created: " + directory.getAbsolutePath());
                    }
                }
                in = assetManager.open(assetRelativePath);
                out = new FileOutputStream(newfilePath);
                copyFile(in, out);
                in.close();
                in = null;
                out.flush();
                out.close();
                out = null;
            } catch (final Exception e) {
                Log.e(LOG_TAG, "Exception during copyAssetFile: " + Log.getStackTraceString(e));
            }
        }
        return newfilePath;
    }

    private static void copyFile(final InputStream in, final OutputStream out) throws IOException {
        final byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
    }

} 
```

# latex - LaTeX 文件的 VIM 自动缩进错误

> ID：12693687
> 
> 赞同：17
> 
> 时间：2012-10-02T15:44:53.080
> 
> 标签：latex, indentation

我想缩进`gg=G`一些 LaTeX 文件。但我得到了一个糟糕的缩进。

```
\title{                                                                         
\rule{\textwidth}{1pt}\\[0.5em] \huge                                           
\textsc{My headline           
\rule{\textwidth}{1pt}}                                                         
} 
```

我得到什么：

```
\title{
    \rule{\textwidth}{1pt}\\[0.5em] \huge
        \textsc{My headline
            \rule{\textwidth}{1pt}}
} 
```

我想要的（或类似的）：

```
\title{
    \rule{\textwidth}{1pt}\\[0.5em] \huge
    \textsc{My headline
    \rule{\textwidth}{1pt}}
} 
```

这是正常的吗？错误的配置文件？旗帜？附加组件？有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:49:25.307

即使在尝试了很多东西之后，我对 VIM 的缩进总是很糟糕。如果有帮助，我只需将其关闭并缩进手册。有自动缩进，智能缩进，并且不确定是否有任何其他“极客”缩进类型设置，只是如果您想试验开/关组合

[http://vim.wikia.com/wiki/How_to_stop_auto_indenting](http://vim.wikia.com/wiki/How_to_stop_auto_indenting)

也可能尝试使用 :set 粘贴可能是您需要的。

[http://ayaz.wordpress.com/2008/06/21/paste-mode-pasting-text-and-indenting-it-in-vim/](http://ayaz.wordpress.com/2008/06/21/paste-mode-pasting-text-and-indenting-it-in-vim/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T21:52:40.290

.tex 文件的默认缩进是为纯 TeX 设置的，您可以将其设置为 LaTeX，在 .vimrc 中添加以下行：

```
 let g:tex_flavor='latex' 
```

# python - time.sleep 在 python 中挂起多线程函数

> ID：12693690
> 
> 赞同：5
> 
> 时间：2012-10-02T15:45:01.967
> 
> 标签：python, python-3.x, multiprocessing

我在挂起我的多线程函数的睡眠语句时遇到问题。我希望我的功能在程序的其余部分运行时继续它的业务。这是一个重现我的问题的玩具：

```
import multiprocessing, sys, time

def f(icount, _sleepTime = 1):
    for i in range(icount):
        time.sleep(_sleepTime)
        print(_sleepTime)

def main(args):
    m = multiprocessing.Process(target = f, args=(4, ))
    m.run()
    # f should be sleeping for 1 second so this print statement should come first
    print(m.is_alive())

if __name__ == "__main__":
    sys.exit(main(sys.argv[1:])) 
```

谁能解释为什么这段代码输出：

```
1
1
1
1
False 
```

代替：

```
True
1
1
1
1 
```

## #

编辑

## #

我最终想按计划运行此功能，并在执行该功能之前测试它是否正在运行。这是一个例子：

```
import multiprocessing, sys, time

def f(icount, _sleepTime = 1):
    for i in range(icount):
        time.sleep(_sleepTime)
        print(_sleepTime)

def main(args):
    m = multiprocessing.Process(target = f, args=(4, ))
    for i in range(15):
        time.sleep(.5)
        if not m.is_alive():
            # m.start throws an error after first run
            m.run()
        print("{}".format(m.is_alive()))

if __name__ == "__main__":
    sys.exit(main(sys.argv[1:])) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T15:49:34.427

使用`start`and`join`代替`run`：

```
import multiprocessing, sys, time

def f(icount, _sleepTime = 1):
    for i in range(icount):
        time.sleep(_sleepTime)
        print(_sleepTime)

def main(args):
    m = multiprocessing.Process(target = f, args=(4, ))
    m.start()
    # f should be sleeping for 1 second so this print statement should come first
    print(m.is_alive())
    m.join()

if __name__ == "__main__":
    sys.exit(main(sys.argv[1:])) 
```

#

编辑

#

同样，使用`start`and`join`代替`run`：

```
import multiprocessing, sys, time

def f(icount, _sleepTime = 1):
    for i in range(icount):
        time.sleep(_sleepTime)
        print(_sleepTime)

def create_process():
    return multiprocessing.Process(target = f, args=(4, ))

def main(args):
    m = create_process()
    m.start()
    for i in range(15):
        time.sleep(.5)
        if not m.is_alive():
            # m.start throws an error after first run
            print("restarting")
            m.join()
            m = create_process()
            m.start()
        print("{}".format(m.is_alive()))
    m.join()

if __name__ == "__main__":
    sys.exit(main(sys.argv[1:])) 
```

# applescript - AppleScript 在文件夹中创建文件的别名

> ID：12693691
> 
> 赞同：1
> 
> 时间：2012-10-02T15:45:05.820
> 
> 标签：applescript, finder, aliases

所以我有这个 AppleScript 用于将一个文件夹的所有内容别名到另一个文件夹。

除非源文件夹中只有一项，否则我工作得很好。

```
tell application "Finder"
    set SourceFolder to (choose folder with prompt "Please choose Source folder:") as string
    set DestinationFolder to (choose folder with prompt "Choose Destination folder for aliases:") as string
    set theFolders to every item of entire contents of folder SourceFolder
    repeat with thisFolder in theFolders 
        set thisName to name of thisFolder
        make new alias file at folder DestinationFolder to thisFolder without invisibles
    end repeat
end tell 
```

知道为什么只有一件物品时它什么也得不到吗？当源文件夹中至少有 2 个项目时，它会在目标文件夹中为这两个项目创建别名。

附带说明一下，有什么方法可以让它在您运行它的时间之间记住源文件夹和目标文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:56:25.043

尝试：

```
property SourceFolder : missing value
property DestinationFolder : missing value

if SourceFolder = missing value then
    set SourceFolder to (choose folder with prompt "Please choose Source folder:")
    set DestinationFolder to (choose folder with prompt "Choose Destination folder for aliases:")
else

    tell application "Finder"
        set theFolders to every item of entire contents of SourceFolder as list
        repeat with thisFolder in theFolders
            make new alias file at DestinationFolder to thisFolder
        end repeat
    end tell
end if 
```

# cognos-8 - COGNOS 给出错误“列定义不明确”

> ID：12693692
> 
> 赞同：0
> 
> 时间：2012-10-02T15:45:09.150
> 
> 标签：cognos-8

当我尝试在 COGNOS Report Studio 中运行报告时，出现错误：`ORA-00918: column ambiguously defined` 现在无法获取运行时 sql 并针对 oracle db 进行测试。所以我只能四处摸索。我的问题是......当我们在框架管理器中开发模型时，我们不会编写自己的 sql。只需指定表和列以及连接。所以这个错误永远不会出现，因为当您忘记在列名前加上表别名时，就会出现这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T17:19:28.420

我同意这很奇怪。开始从查询中删除数据项，直到它起作用。尝试将其缩小到表中的特定数据项。看看在没有违规字段的情况下生成了什么 SQL，这应该会给你一个关于正在发生的事情的提示。

# key - sql Anywhere和sql server中的重复键值

> ID：12693697
> 
> 赞同：0
> 
> 时间：2012-10-02T15:45:25.967
> 
> 标签：key, duplicates

我有一个 powerbuilder 数据窗口，它必须与我们的一个应用程序的 sqlanywhere 和 sql server 一起使用。两个 dbms 中附加的表数据窗口都有一个主键唯一列。当我插入新行时，sqlanywhere 中的驱动程序或数据库传递了一个不在表中的值，但是当对 sql server 进行相同的插入时，它传递了已经在表中的值 1，因此插入失败。我知道这可能是一个与 sql server 和 powerbuilder 相关的问题，但我在任何地方都找不到任何答案，所以我想我会在这里问它，可能有人以前经历过。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:16:49.643

这是我自己的问题的答案，花了一整天的时间。我们正在为我在通过插入前触发器在 sql server 中插入值时遇到问题的列生成唯一键（sql 任何地方都允许这样做）。此触发器实际上是在将插入发送到 dbms 之前计算唯一键，并且它正在正确计算键。但是，当通过“而不是插入”触发器（sql server 允许）在 sql server 中实现相同的触发器时，由于其中的错误而无法计算唯一键。一旦我修好了它就解决了这个问题。Powerbuilder datawindow 本身与它无关，并将为该列设置的初始值（如果有初始值）传递给 dbms。我希望这个能帮上忙

# asp.net - 使用 LINQ vb 搜索多个关键字

> ID：12693701
> 
> 赞同：0
> 
> 时间：2012-10-02T15:45:38.663
> 
> 标签：asp.net, database, vb.net, linq, dynamic-queries

我有一些现有代码需要修改以搜索多个关键字。（顺便说一句，我对这一切都很陌生）

```
Dim topics As IQueryable(Of Global.Platform.Core.Data.Topic) = _
               From t In _db.Topics
               Where t.IsActive = True And t.TopicTitle.Contains(criteria) And t.ForumID = 0 And Not t.TopicTitle.Contains("default") And t.Member.IsActive = True And t.IsActive = True
               Order By t.DateCreated Descending
               Select t
               Take (take_x)
Return topics 
```

我将如何改变这一点，所以如果我输入标准“猫毛”，它将进行 OR 搜索。所以`...t.TopicTitle.Contains("cat") OR t.TopicTitle.Contains("hair") ...`。当然，它需要是动态的。

我试过这个，但无法让它工作。

```
Dim criteriaArr As Array = criteria.Split(" ")
            Dim new_criteria As String = " t.TopicTitle.Contains(" + criteriaArr(0) + ")"
            If criteriaArr.Length > 1 Then
                For Each item As String In criteriaArr
                    new_criteria += " Or t.TopicTitle.Contains(" + item + ")"
                Next
            End If 
```

想法是拆分空格并继续附加到 where 子句。我知道在 SQL 中这可能有效，但在这种情况下我将如何进行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:50:30.220

您可以使用`.Any`和的组合`.Contains`：

```
var strings = new List<string> { "cat", "dog", "bill" };
using (var context = new MyEntities())
{
    var matches = context.MyObject.Where(x => strings.Any(s => x.TopicTitle.Contains(s)));
} 
```

VB：

```
Dim strings = {"cat", "dog", "bill"}

Using context = New MyEntities()
    Dim matches = context.MyObject.Where(Function(x) strings.Any(Function(s) x.TopicTitle.Contains(s)))
End Using 
```

这是获取`strings`查询词列表，并检查其中是否`TopicTitle`包含其中的任何一个。

抱歉，那是在 C# 中，但你可以在`.Where`. 只需向`List`执行查询的方法发送一个，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:19:06.517

假设 TopicTitle 和标准是空格分隔的字符串，我将交叉两个集合并检查是否有任何匹配项。

```
 Dim topics As IQueryable(Of Global.Platform.Core.Data.Topic) = _
           From t In _db.Topics
           Where t.IsActive = True And t.TopicTitle.Intersect(criteria).Any()
                And t.ForumID = 0 And Not t.TopicTitle.Contains("default") 
                And t.Member.IsActive = True And t.IsActive = True
           Order By t.DateCreated Descending
           Select t
           Take (take_x)
        Return topics 
```

# jquery - jQuery mobile 1.2.0 Alpha 1 autodividersSelector

> ID：12693706
> 
> 赞同：0
> 
> 时间：2012-10-02T15:46:01.840
> 
> 标签：jquery, mobile, jquery-mobile

我正在尝试根据每个 li 元素中的属性来划分 jQuery 移动列表。

```
$("#mylistview").listview({
    自动分频器：真，
    autodividersSelector: 函数 ( li ) {
        var out = $('li').attr('attr_name');
        退出；
    }
});

```

但它仅为第一个列表项属性创建列表分隔符。每次插入新的 l​​i 时，我都在使用 listview(refresh)。

我不明白的是，如果我需要在创建列表之前、之后或为每个元素调用我在这里粘贴的函数。我想我已经尝试了其中的每一个，但也许我做得不对。

那是因为 1.2.0 仍然是 alpha 版本吗？我认为这个功能现在可以工作 [http://jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)

感谢任何能够/愿意回答的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:34:16.743

我的错：正确的代码是

```
$("#mylistview").listview({
    自动分频器：真，
    autodividersSelector: 函数 ( li ) {
        var out = li.attr('attr_name'); //这里是变化
        退出；
    }
});
```

无论如何感谢您的回复。

# c# - C#读取xls后关闭excel句柄

> ID：12693707
> 
> 赞同：1
> 
> 时间：2012-10-02T15:46:04.130
> 
> 标签：c#, excel

我正在尝试打开一个 xls 文件，读取几行数据，从数据中形成一个自定义列表，然后关闭 Excel 工作表。这就是我所拥有的：

```
InitializeWorkbook(Path);
List<Custom> list = new List<Custom>();

Worksheet wkSht = (Worksheet)workBk.Worksheets[3];

if (wkSht.Name.Equals("Sht3", StringComparison.OrdinalIgnoreCase))
{
    Range PartNumRange = wkSht.get_Range("A:A", System.Reflection.Missing.Value);
    Range RevRange = wkSht.get_Range("C:C", System.Reflection.Missing.Value);
    Range SwRange = wkSht.get_Range("L:L", System.Reflection.Missing.Value);
    Range NomenRange = wkSht.get_Range("M:M", System.Reflection.Missing.Value);

    // Start at Row 6
    int i = 6;
    object Num = (PartNumRange[i, 1] as Range).Text;
    object Nomen = (NomenRange[i, 1] as Range).Text;
    object Sw = (SwRange[i, 1] as Range).Text;
    object SwRev = (RevRange[i, 1] as Range).Text;

    while (!string.IsNullOrEmpty(Num.ToString()) || !string.IsNullOrEmpty(Nomen.ToString()) || !string.IsNullOrEmpty(Sw.ToString()) || !string.IsNullOrEmpty(SwRev.ToString()))
    {
        if (!string.IsNullOrEmpty(Nomen.ToString()) && !string.IsNullOrEmpty(Sw.ToString()) && !string.IsNullOrEmpty(SwRev.ToString())
        {
            Custom item = new Custom();

            item.PartNumber = (PartNumRange[i, 1] as Range).Text.ToString();
            item.Nomenclature = (NomenRange[i, 1] as Range).Text.ToString();
            item.SwNumber = (SwRange[i, 1] as Range).Text.ToString();
            item.SwRevision = (RevRange[i, 1] as Range).Text.ToString();

            list.Add(item);
        }

        i++;
        Num = (PartNumRange[i, 1] as Range).Text;
        Nomen = (NomenRange[i, 1] as Range).Text;
        Sw = (SwRange[i, 1] as Range).Text;
        SwRev = (RevRange[i, 1] as Range).Text;
    }

    GC.Collect();
    GC.WaitForPendingFinalizers();

    Marshal.ReleaseComObject(PartNumRange);
    Marshal.ReleaseComObject(RevRange);
    Marshal.ReleaseComObject(SwRange);
    Marshal.ReleaseComObject(NomenRange);

    Marshal.ReleaseComObject(wkSht);
    workBk.Close(false, System.Reflection.Missing.Value, false);
    Marshal.ReleaseComObject(workBk);

    Marshal.ReleaseComObject(ExcelWorkSheets);

    ExcelApp.Quit();
    Marshal.ReleaseComObject(ExcelApp);

    GC.Collect();
    GC.WaitForPendingFinalizers();
} 
```

我不知道为什么，但是在我完成执行后 Excel 没有关闭。只有当程序退出时 Excel 才会退出。我尝试了各种组合并避免了两个点规则，但仍然不行。关于我所缺少的任何想法？

编辑：调用 ExcelApp.Quit 会关闭 ExcelApp 和 ExcelWorksheets。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:01:18.923

您可能想看看这篇文章：[如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects-in-c-sharp)

有很多关于在 C# 中处理 COM 对象的深入讨论，您可能会发现它们很有帮助。值得一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:49:20.170

您还需要调用 close on

*   Excel工作表
*   ExcelApp

调用 Marshal.ReleaseComObject 会释放运行时可调用包装器，但会使应用程序本身仍然处于活动状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:53:25.197

您可以尝试使用此代码 - 它工作正常

```
while (Marshal.ReleaseComObject(YourRange) > 0) 
{}

while (Marshal.ReleaseComObject(YourWorkSheet) > 0) 
{}

while (Marshal.ReleaseComObject(YourWorkBook) > 0) 
{}

YourApplication.quit()

while (Marshal.ReleaseComObject(YourApplication) > 0) 
{} 
```

# iphone - 如何以“测试用户”身份登录以进行应用内购买？

> ID：12693708
> 
> 赞同：1
> 
> 时间：2012-10-02T15:46:06.950
> 
> 标签：iphone, testing, in-app-purchase, sandbox

我已经实现了所有的购买并创建了测试用户帐户——但是当我开始测试时；显然，它说我需要以测试用户身份登录。问题是我不确定如何以我的“测试帐户”登录，因为它在技术上不是官方帐户。我不确定我需要去哪里访问测试用户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:02:53.793

正如@shabzco 所说，您应该使用设置注销-> iTunes 和应用商店-> 注销。

但是，您不应*使用*您的测试帐户再次使用此页面登录，否则 iTunes 会要求您“验证付款信息”，因为它是一个测试帐户，所以您不能这样做。

相反，运行您的应用程序，进行测试购买，并在 IAP 弹出窗口出现时输入您的测试用户详细信息。

请注意，弹出窗口会显示“环境：沙盒”，表示这是一次测试购买，不会向任何人收费。

# ssis - 如何将 SSIS 中的 ErrorCode 和 ErrorColumn 转换为错误消息和列名？

> ID：12693715
> 
> 赞同：34
> 
> 时间：2012-10-02T15:46:46.573
> 
> 标签：ssis

我正在将行从平面文件源重定向到平面文件目标。重定向行中的默认元数据是：

*   原始平面文件源行
*   错误代码
*   错误列

我在输出平面文件中得到的是源行（很好）和错误代码（不好，例如-1071628249）和错误列（不好，因为它是列的内部 ID）。

如何转换行以输出错误消息（例如“数据被截断。”）和平面文件源中定义的列名？

换句话说，`...,-1071607675,10`我不想看到：

`...,The data was truncated,Firstname`

或者（如果以前不可能）；

`...,DTS_E_FLATFILESOURCEADAPTERSTATIC_TRUNCATED,Firstname`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-13T03:14:59.573

**错误消息列表**位于以下位置：MSDN、Integration Services 错误和消息参考 [https://docs.microsoft.com/en-us/sql/integration-services/integration-services-error-and-message-reference?view =sql-server-ver15](https://docs.microsoft.com/en-us/sql/integration-services/integration-services-error-and-message-reference?view=sql-server-ver15)

并且**列Id Number**可以在SSIS的Data Flow Task中找到：选择产生错误的任务组件，Advanced Editor，'Input and Output Properties'选项卡，External Columns Properties。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-03T08:59:48.660

部分问题（添加错误描述）可以通过脚本组件来实现。这在[使用脚本组件增强错误输出中进行了](http://msdn.microsoft.com/en-us/library/ms345163%28SQL.100%29.aspx)描述。

看来[Dougbert](https://web.archive.org/web/20131013133917/http://dougbert.com/blog/post/Adding-the-error-column-name-to-an-error-output.aspx)博客有添加列名的解决方案，但远非简单。我很惊讶这在 SSIS 中很难做到。你会认为知道源和列的名称是基本需要。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-02T07:09:36.303

有一个更简单的答案。只需将错误输出重定向到新的目标文件（CSV 或其他文件），然后在错误输出上启用 DataViewer....

![SSIS 中的数据查看器](../Images/3ae768e29ea0b5ca4197e177cdd8ef57.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-25T23:56:18.483

它可以使用脚本组件作为转换来实现，将错误输出重定向到脚本组件并按照步骤来实现您要查找的内容。

(1) 打开脚本组件，

**输入列选择**

1.  错误列
2.  错误代码

**输入和输出添加输出列**

1.  错误描述 (DT_STRING 500)
2.  错误列描述 (DT_STRING 100)

(2) 编辑脚本

粘贴以下代码

```
 using System;
    using System.Data;
    using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
    using Microsoft.SqlServer.Dts.Runtime.Wrapper;
    #endregion

    /// <summary>
    /// This is the class to which to add your code.  Do not change the name, attributes, or parent
    /// of this class.
    /// </summary>
    [Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
    public class ScriptMain : UserComponent
    {

        public override void Input0_ProcessInputRow(Input0Buffer Row)
        {
            var component130 = this.ComponentMetaData as IDTSComponentMetaData130;
            if (component130 != null)
            {
                Row.ErrorDescription = component130.GetErrorDescription(Row.ErrorCode);
                Row.ErrorColumnDescription = component130.GetIdentificationStringByID(Row.ErrorColumn);
            }
        } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-03T19:37:15.973

Pragmatic Works 似乎有一个[错误输出描述转换](http://www.pragmaticworks.com/Products/Task-Factory.aspx)，它是他们称之为“任务工厂”的产品[社区版**（免费）的一部分。**](http://www.pragmaticworks.com/Products/Task-Factory/Compare-Editions.aspx)

错误输出描述转换为用户提供了一个用户界面，可以检索有价值的信息，例如 ErrorCode、ErrorColumn、ErrorDescription、ComponentName（产生错误）、ColumnName（如果知道）、ColumnType 和 ColumnLength。

它还允许您将任何输入列传递到错误输出。老实说，它非常方便，并为我节省了数小时的 SSIS 包故障排除时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-29T13:14:29.157

```
 //column error description 
    Row.ErrorDescription = this.ComponentMetaData.GetErrorDescription(Row.ErrorCode);

    //we are getting column name with some extra information
    String rawColumnName = this.ComponentMetaData.GetIdentificationStringByLineageID(Row.ErrorColumn);

    //extracting positions of brackets 
    int bracketPos = rawColumnName.LastIndexOf('[')+1;
    int lastBracketPos = rawColumnName.LastIndexOf(']');

    //extracting column name from the raw column name
    Row.ErrorColName = rawColumnName.Substring(bracketPos, (lastBracketPos - bracketPos)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-09T12:53:04.460

使用SS2016及以上，很简单： [https ://www.mssqltips.com/sqlservertip/4066/retrieve-the-column-causing-an-error-in-sql-server-integration-services/](https://www.mssqltips.com/sqlservertip/4066/retrieve-the-column-causing-an-error-in-sql-server-integration-services/)

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    Row.ErrorDescription = this.ComponentMetaData.GetErrorDescription(Row.ErrorCode);
    IDTSComponentMetaData130 componentMetaData = this.ComponentMetaData as IDTSComponentMetaData130;
    Row.ErrorColumnName = componentMetaData.GetIdentificationStringByID(Row.ErrorColumn);
} 
```

对于在 SS2016 之前使用 SQL Server 版本的任何人，这里有几个参考链接，用于获取列名称：

[http://www.andrewleesmith.co.uk/2017/02/24/finding-the-column-name-of-an-ssis-error-output-error-column-id/](http://www.andrewleesmith.co.uk/2017/02/24/finding-the-column-name-of-an-ssis-error-output-error-column-id/)

这是基于： [http ://toddmcdermid.blogspot.com/2016/04/finding-column-name-for-errorcolumn.html](http://toddmcdermid.blogspot.com/2016/04/finding-column-name-for-errorcolumn.html)

我很感激我们不应该只发布链接，但是这个解决方案非常复杂，我试图通过从 Todd 和 Andrew 的博客文章中提取信息并在此处重新创建它们来进行总结。（如果你读过这篇文章，谢谢你们！）

从托德的页面：

> 1.  转到“输入和输出”页面，然后选择“输出 0”节点。将“SynchronousInputID”属性更改为“无”。（这会将脚本从同步更改为异步。）
>     2.  在同一页面上，打开“Output 0”节点并选择“Output Columns”文件夹。按“添加列”按钮。将此新列的“名称”属性更改为“LineageID”。
>     3.  再次按下“添加列”按钮，将“DataType”属性更改为“Unicode string [DT_WSTR]”，将“Name”属性更改为“ColumnName”。
>     4.  转到“脚本”页面，然后按“编辑脚本”按钮。将此代码复制并粘贴到 ScriptMain 类中（您可以删除所有其他方法存根）：

```
public override void CreateNewOutputRows() {
    IDTSInput100 input = this.ComponentMetaData.InputCollection[0];
    if (input != null)
    {
        IDTSVirtualInput100 vInput = input.GetVirtualInput();
        if (vInput != null)
        {
            foreach (IDTSVirtualInputColumn100 vInputColumn in vInput.VirtualInputColumnCollection)
            {
                Output0Buffer.AddRow();
                Output0Buffer.LineageID = vInputColumn.LineageID;
                Output0Buffer.ColumnName = vInputColumn.Name;
            }
        }
    } } 
```

> 随意使用数据查看器将虚拟输出附加到该脚本，看看你得到了什么。从这里开始，它是您 ETL 专家的“标准工程”。只需将失败组件的错误输出与此元数据合并，您就可以将 ErrorColumn 编号转换为有意义的列名。
> 
> 但是对于那些确实想了解上述脚本在做什么的人：
> 
> 1.  它正在获取附加到脚本组件的“第一个”（也是唯一的）输入。
>     2.  它正在获取与输入相关的虚拟输入。“输入”是脚本实际上可以在输入上“看到”的内容 - 由于我们没有将任何列标记为“只读”或“读写”......这意味着输入没有列。但是，“虚拟输入”具有存在的每一列的完整列表，无论我们是否说过我们正在“使用”它。
>     3.  然后我们遍历这个虚拟输入上的所有“虚拟列”，并且对于每一个......
>     4.  获取 LineageID 和列名，并将它们作为我们异步脚本的新行推出。

Andrew 页面中的图像和文本有助于更详细地解释它：

[![在此处输入图像描述](../Images/2453c7ebfc539177e0504d2fb82d09fc.png)](https://i.stack.imgur.com/YrJzL.png)

> 然后将此映射与沿错误路径向下的 ErrorColumn 沿袭 ID 合并连接，以便错误信息可以附加到映射中的列名称。我包含了第二个脚本组件，它从错误代码中查找错误描述，因此我们在上面看到的错误表行包含列名和错误描述。
> 
> 需要解释的剩余组件是条件拆分——这只是为了向创建地图的脚本组件提供元数据。我创建了一个表达式 (1 == 0)，对于“No Rows – Metadata Only”路径，它的计算结果始终为 false，因此没有行会沿着它向下移动。
> 
> 虽然此解决方案确实需要在数据流中插入一些额外的管道，但当确实发生错误时，我们会记录非常有价值的信息。因此，特别是当数据流在生产环境中无人看管地运行时——当我们在设计时没有可用的工具和技术来找出问题所在时——结果日志记录为我们提供了关于问题所在和原因的更精确的信息，与简单地给我们失败的数据并让我们弄清楚它被拒绝的原因相比。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-31T02:30:03.090

这是一个解决方案

1.  在包运行时工作（不预填充）
2.  通过脚本任务和组件自动化
3.  不涉及安装新程序集或自定义组件
4.  很好地兼容 BIML

[在此处查看完整的解决方案。](http://sorrell.github.io/2015/09/14/Getting-SSIS-LineageIDs.html)

* * *

这是简短的版本。

1.  创建 2 个对象变量，`execsObj`以及`lineageIds`
2.  在控制流中创建脚本任务，为其提供对两个变量的读写访问权限
3.  将以下代码插入您的脚本任务

```
Dictionary<int, string> lineageIds = null;

public void Main()
{
    // Grab the executables so we have to something to iterate over, and initialize our lineageIDs list
    // Why the executables?  Well, SSIS won't let us store a reference to the Package itself...
    Dts.Variables["User::execsObj"].Value = ((Package)Dts.Variables["User::execsObj"].Parent).Executables;
    Dts.Variables["User::lineageIds"].Value = new Dictionary<int, string>();
    lineageIds = (Dictionary<int, string>)Dts.Variables["User::lineageIds"].Value;
    Executables execs = (Executables)Dts.Variables["User::execsObj"].Value;

    ReadExecutables(execs);

    Dts.TaskResult = (int)ScriptResults.Success;
}

private void ReadExecutables(Executables executables)
{
    foreach (Executable pkgExecutable in executables)
    {
        if (object.ReferenceEquals(pkgExecutable.GetType(), typeof(Microsoft.SqlServer.Dts.Runtime.TaskHost)))
        {
            TaskHost pkgExecTaskHost = (TaskHost)pkgExecutable;
            if (pkgExecTaskHost.CreationName.StartsWith("SSIS.Pipeline"))
            {
                ProcessDataFlowTask(pkgExecTaskHost);
            }
        }
        else if (object.ReferenceEquals(pkgExecutable.GetType(), typeof(Microsoft.SqlServer.Dts.Runtime.ForEachLoop)))
        {
            // Recurse into FELCs
            ReadExecutables(((ForEachLoop)pkgExecutable).Executables);
        }
    }
}

private void ProcessDataFlowTask(TaskHost currentDataFlowTask)
{
    MainPipe currentDataFlow = (MainPipe)currentDataFlowTask.InnerObject;
    foreach (IDTSComponentMetaData100 currentComponent in currentDataFlow.ComponentMetaDataCollection)
    {
        // Get the inputs in the component.
        foreach (IDTSInput100 currentInput in currentComponent.InputCollection)
            foreach (IDTSInputColumn100 currentInputColumn in currentInput.InputColumnCollection)
                lineageIds.Add(currentInputColumn.ID, currentInputColumn.Name);

        // Get the outputs in the component.
        foreach (IDTSOutput100 currentOutput in currentComponent.OutputCollection)
            foreach (IDTSOutputColumn100 currentoutputColumn in currentOutput.OutputColumnCollection)
                lineageIds.Add(currentoutputColumn.ID, currentoutputColumn.Name);
    }
} 
```

4\. 在 Dataflow 中创建具有只读访问权限`lineageIds`和以下代码的脚本组件。

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
  {
      Dictionary<int, string> lineageIds = (Dictionary<int, string>)Variables.lineageIds;

      int? colNum = Row.ErrorColumn;
      if (colNum.HasValue && (lineageIds != null))
      {
          if (lineageIds.ContainsKey(colNum.Value))
              Row.ErrorColumnName = lineageIds[colNum.Value];

          else
              Row.ErrorColumnName = "Row error";
      }
      Row.ErrorDescription = this.ComponentMetaData.GetErrorDescription(Row.ErrorCode);
  } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-06-25T21:38:58.080

我使用数据选项卡上的从网络获取数据，使用 Excel 连接到 SSIS 错误消息参考网页。将表格保存在 Excel 中的工作表中，然后将其导入 SQL Server。然后将它加入到十进制代码上的错误行表中以获取描述，然后从中创建一个视图。认为这对于那些不想弄乱脚本任务的人可能很有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-02T11:09:59.973

这两天一直在拉头发。我做了到处提到的所有事情，但是 package/c# 抛出了一个错误。最后，当我决定放弃时，我发现我的 ErrorColumn 出现为 0（零），因为由于违反 PK/FK 约束，错误出现在整行中。

所以我修改了脚本如下：

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        Row.ErrorDescription = this.ComponentMetaData.GetErrorDescription(Row.ErrorCode);

        var componentMetaData130 = this.ComponentMetaData as IDTSComponentMetaData130;
        if (componentMetaData130 != null)
        {
            if (Row.ErrorColumn == 0) //Checking if the Column is zero
            {
                Row.ColumnName = "Entire Row. Check PK FK constraints"; //Hardcoded error message
            }
            else
            {
                Row.ColumnName = componentMetaData130.GetIdentificationStringByID(Row.ErrorColumn);
            }
        }
    } 
```

对于通常的过程：[https ://docs.microsoft.com/en-us/sql/integration-services/extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with- the-script-component?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/integration-services/extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component?view=sql-server-2017)

为什么 ErrorColumn 值为零？：[SSIS 2016 - ErrorColumn 为 0（零）](https://stackoverflow.com/questions/41111264/ssis-2016-errorcolumn-is-0-zero)

希望有帮助！！！

# javascript - 对于“y”类的每个表，如果表不包含“x”类的后代，则选择 th 和 td 后代

> ID：12693718
> 
> 赞同：2
> 
> 时间：2012-10-02T15:46:54.200
> 
> 标签：javascript, jquery, jquery-selectors

对于“y”类的每个表，如果表不包含“x”类的后代，则选择降序的 th 和 td 元素，然后删除它们的宽度属性。

这是我到目前为止所拥有的：

```
$(document).ready(function(){ 
    $('table.y').has(':not(.x)').find('td').removeAttr('width')
    $('table.y').has(':not(.x)').find('th').removeAttr('width')
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:48:58.460

您可以使用`not`方法和`:has`选择器，对于排除元素，首先您应该使用`not`方法或`:not`选择器。

```
$(document).ready(function(){ 
    $('table.y').not(':has(.x)').find('td, th').removeAttr('width')
}); 
```

# c - 布尔报告为未定义。当 typedef 添加时；Bool 已定义的错误

> ID：12693720
> 
> 赞同：0
> 
> 时间：2012-10-02T15:47:04.413
> 
> 标签：c

我正在使用 CSL 库在 ccstudio 中为 ti C5515 编写嵌入式软件。我在类型定义方面遇到了麻烦。具体来说，我收到此错误：

```
#20 identifier "Bool" is undefined  in csl_intc.h 
```

看一下标题，我在 tistdtypes.h 中找到了 bool 定义；据我所知，在范围内。无奈之下，我在文件顶部添加了一个 typedef。但是，然后它抱怨 bool 已经定义。

我已经确定情况是一样的，并且没有另一个 tistdtypes.h 覆盖定义。它怎么可能抱怨没有typedef，但是当我添加一个时，它说已经有一个？

这是两个错误，一个接一个：

```
#20 identifier "Bool" is undefined  TMS320C5515     line 992, external location: ... csl_intc.h 
#102 "Bool" has already been declared in the current scope  TMS320C5515     line 914, external location: ... csl_intc.h 
```

文件路径完全相同。如有必要，我还可以粘贴 992 和 914 之间的行。没有多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:03:56.893

有一个`#ifndef STD_`围绕定义。你知道你的编译器/其他包含传递了什么定义吗？

找出它的一种方法是调高预处理器的详细程度以查看所有已解析的代码。也许这会让您了解为什么要跳过它。

使用 gcc 将`gcc -E`在预处理后停止并转储解析的内容。如果您使用不同的编译器，您可能希望找到适合您的编译器的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:07:20.903

当我使用有[问题的文件时](http://rejointech.googlecode.com/svn-history/r6/trunk/csl/tistdtypes.h)：

```
#include "tistdtypes.h"

int main(){
    Bool something = 0; 
```

并通过运行该程序`gcc -Werror -Wall`，我没有看到任何此类错误。因此，除非您的版本与我链接的版本不同，否则我会说它是如何编译到您的程序中的。

`tistdtypes.h`如果您的版本与我链接到的版本不同，以及目标的编译方式，您能否添加更多详细信息？

作为“最坏情况”的备份，至少您知道 a`Bool`确实是 a `unsigned short`，因此您始终可以修改代码以不使用 typedef。

**编辑：** 我只是看了一下[csl_intc.h](http://rejointech.googlecode.com/svn-history/r6/trunk/csl/csl_intc.h)。它`Bool`在该文件中使用，但不包括它的定义。如果你包含`tistdtypes.h`在这个文件中会发生什么？

# jquery - 我不想要底层 div 的 jQuery 点击事件

> ID：12693724
> 
> 赞同：0
> 
> 时间：2012-10-02T15:47:14.750
> 
> 标签：jquery, click, jquery-events

我有一些带有点击操作的 div 和里面的另一个 div - 右上角的“close-cross” 女巫关闭第一个或其他任何地方。

问题是，当单击关闭交叉 div 时，也会调用主 div 单击操作。理论上两者都被单击，因为按下了鼠标按钮，并且鼠标指针位于两个 div 上方，但我只希望直接单击的 div 调用其单击事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:49:43.750

您想使用该`event.stopPropagation()`方法。这可以防止事件在 DOM 树中冒泡。[请参阅此处的 jQuery 文档](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:49:44.667

在关闭函数中，您需要调用 event.stopPropagation()

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

这将防止事件冒泡到父 div。有关事件冒泡的更多信息：

[什么是事件冒泡和捕获？](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:51:54.527

事件冒泡，这就是所谓的，可以使用以下方法进行检查：

```
$(document).ready(function() {
$('#main').click(function(event) {
if (event.target == this) {
//Your code here
}
});
}); 
```

事件的`event.stopPropagation();`停止旅程

```
$(document).ready(function() {
    $('#close-cross').click(function(event) {

    //Your code here
   event.stopPropagation();
    });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:53:45.017

[检查这个小提琴](http://jsfiddle.net/sushanth009/LacBx/1/)

```
$(document).ready(function() {
     // Outer Div click Event
    $('div.a').on('click', function(e) {
        if (e.target.className === 'b') {
            e.preventDefault();
        }
        else {
            alert('Outer Div Clicked !!');

        }
    });

    // Inner Div Click event
    $('div.b').on('click', function(e) {
        alert('Inner Div Clicked !!');
    });
});​ 
```

# php - 如何仅向搜索引擎流量展示 Google AdSense 广告？

> ID：12693729
> 
> 赞同：2
> 
> 时间：2012-10-02T15:47:36.027
> 
> 标签：php, preg-match, adsense, http-referer

我只想向搜索引擎流量显示 Google AdSense 广告，而不向直接或来自 Facebook、Twitter、电子邮件链接等的常规访问者展示广告...

这是我目前使用的代码，它似乎可以正常工作，但我还想改进代码以包含除 Google 之外的许多其他搜索引擎，例如 Bing、Yahoo、Ask 等。有人介意看看下面的代码吗并对其进行改进？

```
<?php
$ref = $_SERVER['HTTP_REFERER'];
if (preg_match("(google|yahoo|bing)", $ref) != false) {
echo <<<END
<script type="text/javascript"><!--
google_ad_client = "xx-xx-xxxxxxxxxxxxxxxxxx";
/* xxxxxxxx xxxxxx xxx xxx xxx xx xxxxxx */
google_ad_slot = "xxxxxxxxxxxxxx";
google_ad_width = xxx;
google_ad_height = xxx;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
END;
}
else {
     echo ""
;
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:56:20.710

代码看起来相当不错。我的建议是使用`/`而不是`(`作为模式分隔符，因为括号也可以用于匹配组。您还可以添加`i`标志以使您的匹配不区分大小写。不需要你的 else 语句，因为它只是输出和空字符串。您的 HEREDOC中还有一个额外的`</div>`标签`END`- 您要确保打开和关闭都在您的`if`语句内部或外部。

```
<?php
$referrer = $_SERVER['HTTP_REFERER'];
$my_domain = "example.com";
$search_engines = "google|yahoo|bing|altavista|digg";
$pattern = "((http(s)?:\/\/)(\w+?\.)?(?!{$my_domain})({$search_engines}))";
if (preg_match("/{$pattern}/i", $referrer) != false) {
    echo <<<END
    <script type="text/javascript"><!--
    google_ad_client = "xx-xx-xxxxxxxxxxxxxxxxxx";
    /* xxxxxxxx xxxxxx xxx xxx xxx xx xxxxxx */
    google_ad_slot = "xxxxxxxxxxxxxx";
    google_ad_width = xxx;
    google_ad_height = xxx;
    //-->
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
END;
} else {
    // Show something to visitors not referred by a search engine
}
?> 
```

正则表达式模式会产生以下结果，匹配标记为`*`：

```
FALSE - http://example.com/google
FALSE - http://example.com/google.com
FALSE - http://www.example.com/google.com
TRUE  - *http://google*.com/example.com
TRUE  - *http://www1.google*.com/example.com
TRUE  - *http://www.google*.com/example.com
TRUE  - *http://images.google*.com/page
TRUE  - *https://google*.com/example.com
TRUE  - *https://www.google*.com/example.com 
```

# android - 设置edittext启用/禁用

> ID：12693733
> 
> 赞同：1
> 
> 时间：2012-10-02T15:47:47.960
> 
> 标签：android, spinner

我有一个界面。在这个界面中，我有一个带有 2 个值的微调器：浏览器和图表。当我选择浏览器时，我希望启用另一个名为 eTxtUrl 的 editText。当我选择图表时，我希望禁用此 EditText。

这是我的代码：

```
 spinnerTipoView =(Spinner) findViewById(R.id.spinnerTipoView);
    nomeTabellaGen=nomeTabella;

    spinnerTipoViewArray=new ArrayList<String>();

    if(addingRecord==true||tableDataChart==null)
        spinnerTipoViewArray=CpmAnalysisParams.tipoViewAdding();
    else    
        spinnerTipoViewArray=CpmAnalysisParams.tipoView();

    spinnerTipoViewArrayAdapter=new ArrayAdapter<String>(this, R.layout.spinner, spinnerTipoViewArray);
    spinnerTipoViewArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerTipoView.setAdapter(spinnerTipoViewArrayAdapter);
    if(addingRecord==true||tableDataChart==null)
        spinnerTipoView.setOnTouchListener(SpinnerTipoViewOnTouch);

    spinnerTipoView.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

            if(arg0.getItemAtPosition(arg2).toString().toUpperCase().equals("CHART")){

                try {
                    eTxtUrl=(EditText) findViewById(R.id.editTextUrl);
                    eTxtUrl.setEnabled(false);
                    eTxtUrl.setFocusable(false);
                    spinnerCategoria=(CustomSpinner)findViewById(R.id.spinnerCategoria);
                    spinnerCategoria.setEnabled(true);
                    spinnerTabella=(CustomSpinner)findViewById(R.id.spinnerTabella);
                    spinnerTabella.setEnabled(true);
                    spinnerAscissa=(CustomSpinner)findViewById(R.id.spinnerAscissa);
                    spinnerAscissa.setEnabled(true);
                    buildSpinnerAreaDisplay();
                    buildSpinnerCategoria();
                    if(nomeTabellaGen!=""){
                        buildSpinnerTabella(nomeTabellaGen);
                    }
                    else
                        buildSpinnerTabella("");
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
            else if(arg0.getItemAtPosition(arg2).toString().equals("Seleziona tipo view")){
                buildSpinnerAreaDisplay();
                buildGrafConfigSpinnerDisabled();

            }
            else{
                try {
                    eTxtUrl=(EditText) findViewById(R.id.editTextUrl);
                    eTxtUrl.setEnabled(true);
                    eTxtUrl.setFocusable(true);
                    spinnerCategoria=(CustomSpinner)findViewById(R.id.spinnerCategoria);
                    spinnerCategoria.setOnTouchListener(null);
                    spinnerCategoria.setEnabled(false);
                    spinnerTabella=(CustomSpinner)findViewById(R.id.spinnerTabella);
                    spinnerTabella.setEnabled(false);
                    spinnerTabella.setOnTouchListener(null);
                    spinnerAscissa=(CustomSpinner)findViewById(R.id.spinnerAscissa);
                    spinnerAscissa.setEnabled(false);
                    spinnerAscissa.setOnTouchListener(null);
                    buildSpinnerAreaDisplay();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            // TODO Auto-generated method stub

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    });

} 
```

我不知道出了什么问题，因为当我选择浏览器，然后选择图表，然后再次选择浏览器时，我的编辑文本仍然被禁用。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:36:21.473

要启用编辑 - 您是否尝试过使用：

```
eTxtUrl.setFocusableInTouchMode(true) 
```

而不是（或之后）该行：

```
eTxtUrl.setFocusable(true); 
```

# html - Jsoup 正文片段抛出 HTML 标签

> ID：12693739
> 
> 赞同：2
> 
> 时间：2012-10-02T15:48:12.933
> 
> 标签：html, parsing, jsoup

我有点进退两难。我需要通过 JSoup 解析一大块 HTML，然后将该块传递给另一个处理 jsoup 元素的类。不幸的是，当我将一个代表表格一部分的块传递给 Jsoup 时，出于某种奇怪的原因，jsoup 只是抛出了所有的 html，除了文本之外什么也没有提供给我。这是一个例子：

```
<tr>
   <td>Declared</td>
   <td>Other Supported Languages</td>
   <td>/ATP_ETK_89078_1006/atp_etk_89078_1006_p4/nonshared/E-trak_API_Build/obfuscated/vna.dll</td>
   <td align="right">1519616</td>
   <td align="right"></td>
   <td align="right"></td>
   <td>COM DEV</td>
   <td>Unspecified</td>
   <td>License for COM DEV</td>
   <td>Component (Dynamic Library)</td>
   <td>100%</td>
   <td style="text-align: center;"></td>
   <td></td>
   <td></td>
   <td valign="top"></td>
</tr>
<tr>
   <td>Declared</td>
   <td>Other Supported Languages</td>
   <td>/ATP_ETK_89078_1006/atp_etk_89078_1006_p4/nonshared/E-trak_API_Build/obfuscated/vna.dll</td>
   <td align="right">1519616</td>
   <td align="right"></td>
   <td align="right"></td>
   <td>COM DEV</td>
   <td>Unspecified</td>
   <td>License for COM DEV</td>
   <td>Component (Dynamic Library)</td>
   <td>100%</td>
   <td style="text-align: center;"></td>
   <td></td>
   <td></td>
   <td valign="top"></td>
</tr> 
```

这是片段，如您所见，它仅代表表中的两行。

但是 Jsoup Doc 产生以下内容：

```
<html>
   <head></head>
   <body> 
   Declared Other Supported Languages /ATP_ETK_89078_1006/atp_etk_89078_1006_p4/nonshared/E-trak_API_Build/obfuscated/vna.dll 1519616   COM DEV Unspecified License for COM DEV Component (Dynamic Library) 100%     
   Declared Other Supported Languages /ATP_ETK_89078_1006/atp_etk_89078_1006_p4/nonshared/E-trak_API_Build/obfuscated/vna.dll 1519616   COM DEV Unspecified License for COM DEV Component (Dynamic Library) 100%           
   </body>
</html> 
```

现在，如果表格的原始标题包括表格打开/关闭标题，它似乎可以工作，但这违背了这个片段解析的全部目的，因为 HTML 文档可能会变得非常庞大。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:21:20.660

用**JSoup 1.7.1**测试过——>同样的问题。

我想，唯一的方法是将你的片段包装成一个`table`-tag。

```
String html = ... // your html
Document doc = Jsoup.parse(html);
// doesn't work as you said

String html = ... // your html
Document doc = Jsoup.parse("<table>" + html + "</table>");
// works 
```

不知道您如何在您的情况下使用 Jsoup，但也许您可以这样做：

```
public String doSomethingWithFragment(String html)
{
    Document doc = Jsoup.parse("<table>" + html + "</table>");
    Elements fragment = doc.select("tbody > *");

    // Do something with 'fragment' here ...
} 
```

在此示例`fragment`中，包含您在上面发布的 HTML，您可以使用它做进一步的事情。

我知道这是一个非常奇怪的解决方法——在下一步中添加并删除它。但是......它有效*（我希望）* :-) ......

# asp.net-mvc-2 - ASP.NET MVC2 路由问题

> ID：12693740
> 
> 赞同：0
> 
> 时间：2012-10-02T15:48:13.357
> 
> 标签：asp.net-mvc-2, asp.net-mvc-routing

我在不同的子文件夹中有两个同名的控制器我的控制器看起来像

*   控制器
    *   api
        *   用户控制器
    *   帮助
        *   用户控制器

我想在用户请求时访问我的第一个控制器`http://mysite/api/User/Index`

并在用户请求时访问我的第二个控制器`http://mysite/help/User/Index`

如何在 Global.asax 中配置路由以及视图文件夹的外观？

它会是什么样子？

*   意见
    *   用户
        *   api
            *   指数
        *   帮助
            *   指数

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:07:43.173

您可以使用命名空间约束：

```
routes.MapRoute(
    "help",
    "help/{controller}/{action}",
    new { controller = "User", action = "Index" },
    new[] { "MvcApplication1.Controllers.help" }
);

routes.MapRoute(
    "api",
    "api/{controller}/{action}",
    new { controller = "User", action = "Index" },
    new[] { "MvcApplication1.Controllers.api" }
); 
```

就视图的子文件夹而言，不支持开箱即用。您必须编写一个[自定义视图引擎](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)才能使其工作。

顺便说一句，您是否考虑过使用[Areas](http://www.asp.net/mvc/videos/mvc-2/how-do-i/aspnet-mvc-2-areas)？它们似乎更适合您的场景。因此，您将定义 2 个区域：`help`并且`api`在两个区域中都定义了 UserController。

# android - 带有 Robotframework 的 MonkeyRunner

> ID：12693744
> 
> 赞同：3
> 
> 时间：2012-10-02T15:48:17.970
> 
> 标签：android, automation, monkeyrunner, sikuli, robotframework

我打算使用monkeyrunner脚本来做自动化测试用例，我想使用robotframework（我对robotium不感兴趣）。[我在http://blog.mykhailo.com/2011/02/how-to-sikuli-and-robot-framework.html](http://blog.mykhailo.com/2011/02/how-to-sikuli-and-robot-framework.html)看到了一个使用机器人框架自动化 sikuli 脚本的优秀教程

有没有办法用robotframework和monkeyrunner做类似的事情？

这是我的示例monkeyrunner 脚本，它在使用monkeyrunner 调用时正确执行。

```
from __future__ import with_statement
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

def testCase() :
    device = MonkeyRunner.waitForConnection()
    result2 = device.takeSnapshot()
    # Writes the screenshot to a file
    result2.writeToFile("scr.png","png")

def my_keyword():
    print 'Hello, world!'

if __name__ == '__main__':
    testCase() 
```

我想用 roboframework 调用同样的方法。我正在尝试以下。我不确定以下调用是否正确，我只是从 sikuli 自动化示例中复制并修改它。

```
monkey_jar=/home/user/android-sdks/tools/lib/monkeyrunner.jar
guava_jar=/home/user/android-sdks/tools/lib/guavalib.jar
java -cp "robotframework-2.7.4.jar:$monkey_jar:$guava_jar" -Dpython.path="/home/user/android-sdks/tools/lib/" \
org.robotframework.RobotFramework --pythonpath=./  --outputdir=results --loglevel=TRACE $1 
```

当我这样做时，我收到以下错误。

```
 Importing test library 'MyLibrary' failed: NoClassDefFoundError: Could not initialize class com.android.monkeyrunner.MonkeyDevice
java.lang.NoClassDefFoundError: 
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at MyLibrary$py.f$0(/home/user/automation/DemoScripts/MyLibrary.py:9)
    at MyLibrary$py.call_function(/home/user/automation/DemoScripts/MyLibrary.py)
    at robot.utils.importer$py._import$13(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py:154)
    at robot.utils.importer$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py)
    at robot.utils.importer$py.import_$28(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py:241)
    at robot.utils.importer$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py)
    at robot.utils.importer$py._import_class_or_module$4(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py:67)
    at robot.utils.importer$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py)
    at robot.utils.importer$py.import_class_or_module$3(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py:64)
    at robot.utils.importer$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/importer.py)
    at robot.run$py.main$3(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/run.py:367)
    at robot.run$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/run.py)
    at robot.utils.application$py._execute$10(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/application.py:87)
    at robot.utils.application$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/application.py)
    at robot.utils.application$py.execute_cli$5(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/application.py:45)
    at robot.utils.application$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/utils/application.py)
    at robot.run$py.run_cli$6(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/run.py:396)
    at robot.run$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/run.py)
    at robot.jarrunner$py._run$3(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/jarrunner.py:60)
    at robot.jarrunner$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/jarrunner.py)
    at robot.jarrunner$py.run$2(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/jarrunner.py:53)
    at robot.jarrunner$py.call_function(/Users/jmalinen/Documents/workspace/robot/tmp-jar-dir/Lib/robot/jarrunner.py)
    at org.robotframework.RobotFramework.run(RobotFramework.java:62)
    at org.robotframework.RobotFramework.main(RobotFramework.java:37)
PYTHONPATH:
  /home/user/automation/DemoScripts
  /home/user/automation/DemoScripts/robotframework-2.7.4.jar/Lib/robot/libraries
  /home/user/automation/DemoScripts/robotframework-2.7.4.jar/Lib
  /home/user/android-sdks/tools/lib/
  /home/user/automation/DemoScripts/Lib
  __classpath__
  __pyclasspath__/
  .
  /home/user/automation/DemoScripts
CLASSPATH:
  robotframework-2.7.4.jar
  /home/user/android-sdks/tools/lib/monkeyrunner.jar
  /home/user/android-sdks/tools/lib/guavalib.jar
============================================================================== 
```

我相信与 roboframework 一起执行 monkeyrunner 测试用例是很有可能的。

有什么输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:51:09.590

@jollychang 这样做

将此添加到文件 MonkeyRunner.java

```
 if(chimpchat == null) {
        Map<String, String> chimp_options = new TreeMap<String, String>();
        chimp_options.put("backend", "adb");
        chimpchat = ChimpChat.getInstance(chimp_options);
        MonkeyRunner.setChimpChat(chimpchat);
    } 
```

前：

```
 JythonUtils.convertDocAnnotationsForClass(MonkeyRunner.class, dict); 
```

然后制作一个新的monkeyrunner.jar；

需要一些像这样的其他罐子： ![图书馆](../Images/5597fd921b5a81cbb44319b7fa6f8c46.png)

使用新的 monkeyrunner.jar 代替旧的。

最后：使用以下命令运行机器人：

在我的电脑上使用这个：

java -cp /Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools/lib/chimpchat.jar:/Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools/lib/ddmlib .jar:/Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools/lib/guavalib.jar:/Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools/lib/monkeyrunner .jar:/Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools/lib/sdklib.jar:/Users/komejun/Downloads/robotframework-2.7.5.jar -Dcom.android.monkeyrunner.bindir ="/Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools" -Djava.library.path="/Users/komejun/Documents/devtool/android/android-sdk-mac_x86/tools/lib" org.robotframework.RobotFramework a.txt

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:13:50.723

好吧，经过几天的尝试，我发现可以将MonkeyRunner脚本与Robotframework一起使用。

简而言之，您可以使用以下内容与monkeyrunner一起启动robotframework。

```
export cpath=$(echo libs/*.jar | tr ' ' ':')
java   -Dpython.path=$cpath -jar robotframework-2.7.4.jar robo-tests.txt 
```

但唯一的问题是，monkeyrunner 的 main 没有被调用，因此没有初始化 ChimpChat 对象，这导致了一个空指针异常。我在 MonkeyRunner.java 中修复了这个问题，并创建了一个新的 monkeyrunner.jar。有了这个，我可以从 roboframework 运行 monkeyrunner 脚本。我将尝试创建一个分步教程并将其发布。

# asp.net-mvc - 从另一个控制器调用操作

> ID：12693749
> 
> 赞同：1
> 
> 时间：2012-10-02T15:48:32.127
> 
> 标签：asp.net-mvc

我有一个控制器动作。如何从 asp.net mvc 中的另一个控制器调用动作方法？

这是一个有效的事情。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:50:43.963

如果您的第一个动作已完成，那么您可能会重定向到另一个动作。

如果这两个控制器之间有一些您不想复制的通用代码，那么您可能会考虑创建一个服务，该服务将具有此功能并由两个操作调用

# placeholder - 如何更改输入占位符颜色javascript onmouseover，更改占位符值onmouseover？

> ID：12693750
> 
> 赞同：0
> 
> 时间：2012-10-02T15:48:33.200
> 
> 标签：placeholder

1）我会在某些条件下使用javascript更改输入占位符颜色（如果它会永远更改占位符颜色，则不是CSS）2）我希望占位符在输入框上更改为另一个占位符。我得到了这个功能：

```
if(email.value==''){
email.style.borderColor = "#FF0000";
email.setAttribute('placeholder',"Plea… fill this required field");
//code for changing the placeholder color
//code for changing the placeholder onmouseover
} 
```

1）占位符颜色对我来说通常是“#C9C9C9”我想通过这个代码把它改成另一种颜色。2）我希望占位符文本在鼠标悬停时更改为任何其他文本。我会感谢给我代码的人。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:51:18.150

Look with this post's answer to do it in CSS : [Change an HTML5 input's placeholder color with CSS](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)

Then, you can include the **CSS** rule with **javascript**.

And you just have to use pseudo-class `:hover` for the *mouseover*.

Just like that :

**CSS**

```
input.formInvalid::-webkit-input-placeholder {
   color: red;
} 
```

**Javascript**

```
document.getElementById("yourElementId").className += " formInvalid"; //add the class .formInvalid to your element 
```

# objective-c - 块内的模态 NSAlert 未显示

> ID：12693752
> 
> 赞同：3
> 
> 时间：2012-10-02T15:48:39.197
> 
> 标签：objective-c, cocoa, block, nsalert

在我的基于文档的应用程序中，我在我的 NSDocumentcontroller 子类中重写了方法 openDocument:，以便我可以显示我自己的 openPanel。我将选择的 URL 传递给方法 openDocumentWithContentsOfURL:display:completionHandler:。我使用此代码进行通话：

```
[self openDocumentWithContentsOfURL:[chosenFiles objectAtIndex:i] display:YES completionHandler:^(NSDocument *document, BOOL documentWasAlreadyOpen, NSError *error) {

    if (document == nil)
    {
        NSAlert* alert = [NSAlert alertWithError:error];
        [alert runModal];
    }

}]; 
```

因此，如果 nil 作为对文档的引用返回，我想显示传递的错误。问题是，在我按下打开面板中的“打开”按钮后，程序只是“冻结”了。然后我需要使用 Xcode 中的“停止”按钮手动停止程序。但是，没有出现旋转的沙滩球。如果我注释“[alert runModal]”行，程序不会再冻结，但当然不会显示警报。

现在奇怪的是：代码*有时*有效。如果我从 Xcode 切换到我的浏览器并返回并再次运行该程序，它有时会完美运行并显示错误。一段时间后，它再次停止工作。这是不可预测的，但大多数时候它不起作用。

这一切对我来说听起来像是一种竞争条件。肯定跟区块有关系吧？但是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:38:29.640

将我的评论转换为答案：

在主线程上运行模型。

```
[alert performSelectorOnMainThread:@selector(runModal) withObject:nil waitUntilDone:NO]; 
```

我认为 runModel 需要在主线程上调用，因为它是 AppKit 框架的一部分，它本质上是触发 UI 图形。我相信对 AppKit 框架或任何操作图形的方法的所有调用都需要在主线程上。

# java - 动态添加 gui 组件？

> ID：12693754
> 
> 赞同：2
> 
> 时间：2012-10-02T15:48:51.387
> 
> 标签：java, swing, user-interface, layout, jpanel

我正在开发一个程序，我想创建一个应用程序，我可以在其中使用 for 循环重复 gui 组件。我已经使用卡片布局完成了这项工作，它工作正常，但是当我使用没有卡片布局的容器和 JPanel 时，gui 组件与以前的组件重叠。请给我一个提示或建议我的代码哪里错了。感谢您提前提供建议和时间。

这是我的应用程序的代码：

```
class form extends JFrame implements ActionListener {

    JTextArea text;
     static int openFrameCount = 0;
    public form(){
           super("Insert Form");
        Container panel=getContentPane();
        JPanel  cc    = new JPanel();
        cc.setLayout(null);
        for(int i=1;i<=2;i++){
        JLabel label1=new JLabel(" Question"+(++openFrameCount));

         label1.setBounds(15, 40, 185, 50);
        cc.add(label1);
        text=new JTextArea();
                text.setLineWrap(true);
        text.setWrapStyleWord(true);
        text.setPreferredSize(new Dimension(750,50));
        text.setBounds(80, 60,750,50);
        cc.add(text);
         JLabel symbol=new JLabel("Selection for Option?");
         symbol.setBounds(100, 120,850,60);
 cc.add(symbol);
   ButtonGroup group = new ButtonGroup();
  JRadioButton rbut=new JRadioButton("Radio Button for option");

        rbut.setBounds(300, 120,300,60);
         JCheckBox cbox=new JCheckBox("Check Box for option");
         cc.add(rbut);
         cbox.setBounds(650, 120,350,60);
         cc.add(cbox);
        group.add(rbut);
         group.add(cbox);

          cc.revalidate();
 validate();

         panel.add(cc);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:53:34.213

`cc`您已将面板的布局设置为`null`，这不是一个好主意。然后，使用`setBounds(x, y, width, height)`设置添加的组件的位置和大小，它们当然会重叠。

尝试使用任何适合您需要的布局管理器，但不要将其设置为 null，除非您确实有充分的理由这样做。

# delphi - 基于泛型参数类型的类型推断 (Delphi)

> ID：12693755
> 
> 赞同：7
> 
> 时间：2012-10-02T15:48:57.820
> 
> 标签：delphi, generics, delphi-xe, type-inference

我正在尝试编写一个接受匹配参数类型的通用函数。
Delphi 确实在普通参数的简单情况下正确推断类型参数。

例如：

```
type
  TFoo = class
    function Pair<T>(e1, e2: T): TList<T>;
  end; 
```

调用它`aFoo.Pair(1, 2);`非常好，但是当我将参数签名更改为泛型类型时

```
type
  TFoo = class
    function InsertInto<T>(aList: TList<T>; aVal: T): TList<T>;
  end; 
```

并尝试调用它
`aFoo.InsertInto(TList<String>.Create, 'bar');`

然后编译器抱怨它：
`E2010 Incompatible types: 'Generics.Collections.TList<uTest.TFoo.InsertInto.T>' and 'Generics.Collections.TList<System.String>'`

有什么办法可以编写这个（或类似的）方法，以便客户端不必指定类型参数？
`aFoo.InsertInto<String>(TList<String>.Create, 'bar');`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T17:27:08.910

我的猜测是来自 Delphi 的强类型特性。
`uTest.TFoo.InsertInto.T`相当于`System.String`但它**实际上是不同的类型**。

就像在这个例子中一样，其中`Int1`和`Int2`不属于同一类型：

```
var
  Int1: array[1..10] of Integer;
  Int2: array[1..10] of Integer;
      ...
  Int1 := Int2; // <== BOOM! E2008 Incompatible types (in XE2) 
```

实际问题不在于类型推断，而是根据 Pascal/Delphi 的严格规则，类型不兼容。

# php - 在 PHPStorm 中，如何在 PHPUnit 类的方法中设置断点？

> ID：12693756
> 
> 赞同：6
> 
> 时间：2012-10-02T15:48:56.773
> 
> 标签：php, debugging, phpunit, phpstorm

在 PHPStorm 中，我想调试一个 PHPUnit 类。如果我在单元测试类（继承自 的类`PHPUnit_Framework_TestCase`）的方法中设置断点，则每当我运行测试时，PHPStorm 都会执行测试，但不会在断点处停止，即使在它的其他地方有断点也是如此用来停止。

这是 PHPStorm 中的错误吗？如何停止在一个`PHPUnit_Framework_TestCase`'s 方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T09:47:45.327

为了使 PHPStorm 在测试中的断点处停止，您必须“调试”（Shift + F9）而不是“运行”（Shift + F10）您的配置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-14T11:45:16.957

如果您的测试用例有@runInSeparateProcess 注释或在phpuint.xml 配置文件中`<phpunit processIsolation="true">`标记具有processIsolation 属性并且它的值为true，那么调试器将不会在断点处停止，因为它在单独的线程中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:13:31.900

仔细检查您放置断点的文件是否实际上是正在执行的文件。您可能安装了多个版本的 PHPUnit。

或者覆盖您自己的测试文件夹中的测试用例并从中扩展。创建一个具有相同名称和参数的函数，您希望在其中放置断点。然后只需将呼叫连接到父级：

```
class My_TestCase extends PHPUnit_Framework_TestCase
{
    public function funcToTest($param) {
        return parent::funcToTest($param);
    }
} 
```

然后让您的测试从该测试用例类扩展，并将断点放在那里。当您点击它时，您可以更深入地了解实际使用了 phpunit 中的哪个具体文件以及它在磁盘上的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-28T16:14:16.360

尝试查找您是否拥有安装了 Xdebug 的正确 PHP 解释器。我有类似的问题，没有断点的原因是在 PHPStorm 中配置了几个解释器，并且没有选择具有 Xdebug 的正确解释器。您可以通过编辑`PHPStorm Settings > Languages and Frameworks > PHP`

# c# - 将自定义控件绑定到 DataGrid.SelectedItem

> ID：12693761
> 
> 赞同：0
> 
> 时间：2012-10-02T15:49:07.087
> 
> 标签：c#, wpf, forms, binding

我在 WPF 中有一个包含文本框的用户控件。我的用户控件放置在 WPF 窗口上。我在那个窗口上也有一个 DataGrid。我需要将文本框绑定到 dataGrid 中所选项目的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:59:25.537

您可以尝试使用此代码

```
 <Binding ElementName="GridId" Path="SelectedItem.Content"/> 
```

样本

```
<TextBox>
    <TextBlock.Text>
            <Binding ElementName="GridId" Path="SelectedItem.Content"/>
    </TextBox.Text>
</TextBox> 
```

# php - 在 ZF2 模块中定义自定义 ExceptionStrategy

> ID：12693762
> 
> 赞同：9
> 
> 时间：2012-10-02T15:49:08.397
> 
> 标签：php, exception-handling, module, zend-framework2

大家好，

我已经在这个问题上苦苦挣扎了一个多星期，最后决定寻求帮助，希望有人知道答案。

我正在开发一个应用程序，它使用[Google 的协议缓冲区](https://developers.google.com/protocol-buffers/)作为数据交换格式。我正在使用 DrSlump 的 PHP[实现](https://github.com/drslump/Protobuf-PHP)，它让您使用数据填充类实例，然后将它们序列化为二进制字符串（或将二进制字符串解码为 PHP 对象）。

我已经设法实现了我的自定义`ProtobufStrategy`，如果`selectRenderer(ViewEvent $e)`事件`ProtobufRenderer`包含`ProtobufModel`. 渲染器然后通过调用从模型中提取我的自定义参数`$model->getOptions()`以确定需要将哪些消息发送回客户端，序列化数据并将二进制字符串输出到*php://output*。

为了使其更有意义，让我们看一下以下示例消息：

```
message SearchRequest {
    required string query = 1;
    optional int32 page_number = 2;
    optional int32 result_per_page = 3;
} 
```

如果我想用这条消息回复客户，我会从我的操作中返回如下内容：

```
public function getSearchRequestAction()
{
    [..]
    $data = array(
        'query'           => 'my query',
        'page_number'     => 3,
        'result_per_page' => 20,
    );
    return new ProtobufModel($data, array(
        'message' => 'MyNamespace\Protobuf\SearchRequest',
    ));
} 
```

如您所见，我正在利用`ViewModel`的第二个参数*$options*来判断需要序列化的消息。然后，如前所述，可以通过调用在渲染器中提取`$model->getOptions()`.

到现在为止还挺好。我的控制器操作按预期输出二进制数据。

但是，我在处理异常时遇到了问题。*我的计划是捕获所有异常并使用我的异常*消息实例响应客户端，如下所示：

```
message Exception {
    optional string message = 1;
    optional int32 code = 2;
    optional string file = 3;
    optional uint32 line = 4;
    optional string trace = 5;
    optional Exception previous = 6;
} 
```

从理论上讲，它应该开箱即用，但事实并非如此。问题是`Zend\Mvc\View\Http\ExceptionStrategy::prepareExceptionViewModel(MvcEvent $e)`返回一个实例`ViewModel`，它显然不包含我需要的额外*$options信息。*

它还返回`ViewModel`and not `ProtobufModel`，这意味着 Zend 调用默认值`ViewPhpRenderer`并将异常输出为 HTML 页面。

**我想要做的是**用我自己的类替换默认值`ExceptionStrategy`（最终也是`RouteNotFoundStrategy`），这将返回如下内容：

```
$data = array(
    'message'  => $e->getMessage(),
    'code'     => $e->getCode(),
    'file'     => $e->getFile(),
    'line'     => $e->getLine(),
    'trace'    => $e->getTraceAsString(),
    'previous' => $e->getPrevious(),
);
return new ProtobufModel($data, array(
    'message' => 'MyNamespace\Protobuf\Exception',
)); 
```

……我找不到办法……

我尝试创建自己的`ExceptionStrategy`类并将其别名为现有的*ExceptionStrategy*服务，但 Zend 抱怨已经存在具有此类名称的服务。

我怀疑我在自定义策略扩展的正确路径上找不到覆盖默认策略的方法。

我注意到默认`ExceptionStrategy`和控制台一个在`Zend/Mvc/View/Http/ViewManager`. 我希望我不必添加自定义视图管理器来实现这么简单的事情，但是如果我错了，请纠正我。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T16:16:38.427

最简单的方法是做一个小小的捏造。

首先，注册你的监听器以比 ExceptionStrategy 更高的优先级运行；因为它以默认优先级注册，这意味着任何高于 1 的优先级。

然后，在您的侦听器中，在您返回之前，确保将 MvcEvent 中的“错误”设置为虚假值：

```
$e->setError(false); 
```

一旦你这样做了，默认的 ExceptionStrategy 会说，“这里没什么可做的，继续前进”并提前返回，然后再对 ViewModel 做任何事情。

当您使用它时，您还应该确保更改事件中的结果实例：

```
$e->setResult($yourProtobufModel) 
```

因为这将确保这是其他听众检查的内容。

# forms - 设置 Alfresco 表单运行时生成的表单标题

> ID：12693766
> 
> 赞同：0
> 
> 时间：2012-10-02T15:49:18.287
> 
> 标签：forms, alfresco

我有一个名为 Payment 的对象，并且在 share-config-custom.xml 中定义了表单，一切都设置得很好，但我不知道如何将通用标题“Payment”更改为“Payment Details”。有谁知道如何改变它？

最好的，D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:42:36.510

您可以在 Alfresco 中定义[资源包](http://docs.alfresco.com/4.0/topic/com.alfresco.enterprise.doc/concepts/content-model-localization.html)，如果您可以填写类型属性，或者您可以更改您定义的自定义模型并在那里进行更改。

# c++ - 使用混合 C/C++ 标头在 C 中使用 C++ 对象

> ID：12693768
> 
> 赞同：0
> 
> 时间：2012-10-02T15:49:19.830
> 
> 标签：c++, c, visual-c++

我一直在关注如何从 C 调用 C++ 对象的成员函数的[指南](http://www.parashift.com/c++-faq/cpp-objs-passed-to-c.html "本指南")。据我了解，C 代码应该将类解释为同名的结构，并且每当它想调用函数时通过此类的对象，它应该使用中间回调函数。标题如下所示：

```
// CInterface.h
#ifdef __cplusplus
...

class CInterface 
{
public:
    ...

    void OnMessage(U8* bytes); // I want to call this function from C.

private:
    ...
};
#else
typedef
    struct CInterface
      CInterface;
#endif

#ifdef __cplusplus
extern "C" {
#endif

#if defined(__STDC__) || defined(__cplusplus)
  //extern void c_function(CInterface*);   /* ANSI C prototypes (shouldn't be needed) */
  extern CInterface* cpp_callback_function(CInterface* self, unsigned char * bytes);
#else
  //extern void c_function();        /* K&R style (shouldn't be needed) */
  extern CInterface* cpp_callback_function(unsigned char * bytes);
#endif

#ifdef __cplusplus
}
#endif 
```

现在失败的 C 代码如下所示： // main.c #include "CInterface.h"

```
int main(int argc, char* argv[])
{
    void* ptr;
    int *i = ptr; // Code that only compiles with a C compiler
    CInterface cinterface; // This should declare a struct
} 
```

错误是：错误 C2079：'cinterface' 使用未定义的结构 'CInterface'。

听起来头文件被读取为 c++ 代码，因为结构没有定义，但是 main.c 是由 C 根据 Visual Studio 编译的（我还通过添加一些特定于 C 的代码仔细检查了这一点）。但是，如果我添加这样的括号：

```
CInterface cinterface(); 
```

代码编译对我来说毫无意义，因为它现在是一个不应该在 C 中工作的对象。

回调函数在第三个文件 CInterface.cpp 中实现，它充当“中间体”。

所以问题是我如何解决这个错误消息，或者我是否把整个方法弄错了。这是我第一次混合 C/C++ 代码，而且我对这两种语言都比较陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:04:36.813

在您的示例`CInterface`中，仅为 C++ 定义。如果您仔细查看链接的示例，您会注意到`Fred`该类也是如此。

在 C 中，您只能传递指向的指针，`CInterface`并且您必须依靠使用 C 链接定义的 C++ 函数来实际操作`CInterface`实例。

否则，您可以将 a 定义`struct`为在 C 和 C++ 之间传递数据的一种方式。只要确保它的定义被声明为`extern "C"`从 C++ 使用时：

```
#ifdef __cplusplus
extern "C" {
#endif

struct CandCPlusPlus {
// ...
};

#ifdef __cplusplus
}
#endif 
```

# php - 上传和 CakePHP 2.1

> ID：12693772
> 
> 赞同：1
> 
> 时间：2012-10-02T15:49:32.027
> 
> 标签：php, cakephp, upload, uploadify, cakephp-2.1

我现在正在尝试将 Uploadify 实施到我的应用程序中大约 3 天。我想我看到了互联网上的每个教程......

我为 CakePHP 2.1 找到的唯一一个是这个：[http](http://crazylearner.com/using-uploadify-with-cakephp/) ://crazylearner.com/using-uploadify-with-cakephp/ 但这对我不起作用:(

我在一些论坛上读到我应该很容易实现 Uploadify。为什么对我来说这么复杂？

我找不到任何绝对清楚的教程。

有人可以发布有关如何在 CakePHP 2.1 中实现 Uploadify 的有效且清晰的描述吗？

谢谢，卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:09:11.540

试试这个，效果很好，适用于 2.1 版： [https ://github.com/josgonzalez/upload](https://github.com/josegonzalez/upload)

# java - eclipse需要异常处理，即使它没有工作？

> ID：12693775
> 
> 赞同：0
> 
> 时间：2012-10-02T15:49:38.410
> 
> 标签：java, eclipse, exception, user-interface

我正在编写一个带有一些按钮的基本 gui，我的 guimain 类的实例称为 guimain。

我已将此项目导入另一台计算机，在此更改后，eclispe 哭泣：未处理的异常围绕：

```
try {
maingui.showStart();
} catch (Exception e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

我试图清理项目，但我什至在我的旧笔记本电脑上遇到了这个错误。因此，我正在寻找一种解决方案来证明 maingui 是否存在异常，这样我每次使用时都不必担心。

![这就是它现在的样子](../Images/ac093594428fed6f8083fbf27c95e466.png)

我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:56:55.620

Java 要求，如果可能，您的方法会引发检查异常

1.  要么声明抛出异常的方法，要么
2.  处理方法中的异常。

这听起来不像是一个 Eclipse 问题，而是一个 java 编译器告诉你必须使用 try catch（上面的 2）或更新你的方法声明以抛出异常（上面的 1）

# javascript - 将脚本文件附加到网站

> ID：12693783
> 
> 赞同：1
> 
> 时间：2012-10-02T15:49:47.910
> 
> 标签：javascript, jquery, javascript-events

我有下一个问题：我可以以任何方式将我的脚本文件附加到在我的网络浏览器中打开的网站吗？这个脚本应该只在我的机器上执行，并且应该模拟像`onclick`,`onmouseover`等事件。我发现我可以用这种方式模拟这些事件：

```
var element = document.getElementById('element_id');
var o = document.createEvent('MouseEvents');
o.initMouseEvent( 'click', true, true, window, 1, 12, 345, 7, 220, false, false, true, false, 0, null );
element.dispatchEvent(o); 
```

但是我不明白如何在具体情况下实现此代码？我应该在哪里找到此代码？我如何将它附加到网站？如何为该站点生成浏览器事件？我能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:55:23.213

您可以在浏览器中为脚本添加书签，然后单击书签以在您当前所在的页面上运行它。

[从书签加载外部 JS？](https://stackoverflow.com/questions/106425/load-external-js-from-bookmarklet)

# vbscript - 使用 VBScript 打开托盘应用程序

> ID：12693784
> 
> 赞同：1
> 
> 时间：2012-10-02T15:49:50.393
> 
> 标签：vbscript

使用 VBScript，当它的默认行为是最小化到托盘时，有没有办法打开一个应用程序并让它最大化它的窗口？

我有一个应用程序打开到托盘并且不显示其登录屏幕。我正在尝试使用 VBScript 和`SendKeys`. 我知道这不安全，因为任何人都可以查看脚本，但这不是问题。

有没有办法打开一个应用程序，然后让它显示它的 GUI？我还需要确保应用程序获得焦点，这样才能`SendKeys`正常工作。

我知道如何打开应用程序。问题是让应用程序显示其登录屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:02:33.987

```
Dim oWsh : Set oWsh = CreateObject("WScript.Shell")
oWsh.Run("prog.exe", 1, False)
WScript.Sleep 500
oWsh.AppActivate "Prog Title"  ' text in window title of 'prog.exe'
oWsh.SendKeys "first Command"
' ...additional SendKeys commands 
```

参考：[Run 方法](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=VS.84%29.aspx)和[SendKeys 方法](http://msdn.microsoft.com/en-us/library/8c6yea83%28v=VS.84%29.aspx)

# types - 为什么 && 运算符会产生第二个操作数的类型

> ID：12693787
> 
> 赞同：39
> 
> 时间：2012-10-02T15:50:07.117
> 
> 标签：types, typescript

TypeScript 规范在第 4.15.6 节中对`&&`运算符进行了说明：

> && 运算符允许操作数为任何类型，并产生**与第二个操作数相同类型的结果**。

在 Javascript 中，如果`&&`运算符为假，则返回第一个操作数，否则返回第二个操作数（[参见 ECMA-262 §11.11](http://es5.github.com/#x11.11)）。

这意味着如果左操作数是假的，`&&`将返回一个与左操作数类型匹配的值。例如，

```
typeof ( false && {}      ) === "boolean" // true
typeof ( ''    && 1       ) === "string"  // true
typeof ( null  && "hello" ) === "object"  // true
typeof ( NaN   && true    ) === "number"  // true 
```

根据上面引用的规则，Typescript 会错误*地*将上述表达式的类型分别预测为`Object`、`Number`和。`String``Boolean`

我错过了什么吗？是否有充分的理由使`&&`表达式的类型与第二个操作数的类型匹配？结果类型不应该表现得像`||`运算符一样，返回两个操作数中最好的公共类型，`Any`如果没有最好的公共类型？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-02T16:55:39.363

长话短说，这里没有让每个人都满意的解决方案。

考虑这个常见的成语：

```
var customer = GetCustomer(...); // of type 'Customer'
var address = customer && customer.address;
if(address) {
    printAddressLabel(address); // Signature: (Address) => void
} else {
    // Couldn't find the customer or the customer has no address on file
} 
```

放弃并决定“地址”是“任何”是很蹩脚的，因为客户和地址之间没有最好的通用类型。

在使用 && 运算符的大多数情况下，类型*已经*匹配，或者 && 正在以类似于上面的值合并方式使用。在任何一种情况下，返回正确操作数的类型都会为用户提供预期的类型。

虽然此时类型安全在技术上已经崩溃，但它并没有以可能导致错误的方式这样做。要么您要测试结果值的真实性（在这种情况下，类型或多或少无关紧要），要么您将使用推定的右操作数进行某些操作（上面的示例同时执行这两种操作）。

如果我们查看您列出的示例并假装左操作数不确定是真还是假，然后尝试编写可以对返回值进行操作的理智代码，它会变得更加清晰-您*无能为力*'false && {}' 尚未进入“任何”参数位置或真实性测试。

* * *

**附录**

由于有些人不相信上述内容，这里有一个不同的解释。

让我们暂时假设 TypeScript 类型系统添加了三种新类型：`Truthy<T>`、`Falsy<T>`和`Maybe<T>`， 表示 type 可能的真值/假值`T`。这些类型的规则如下：

1.  `Truthy<T>`行为完全一样`T`
2.  您无法访问任何属性`Falsy<T>`
3.  类型的表达式`Maybe<T>`，当用作块中的条件时，在同一块的主体中​​变为 a ，在块中`if`变为 a`Truthy<T>``if``Falsy<T>``else`

这会让你做这样的事情：

```
function fn(x: Maybe<Customer>) {
   if(x) {
      console.log(x.address); // OK
   } else {
      console.log(x.phone); // Error: x is definitely falsy
   }
   console.log(x.name); // Warning: x might be falsy!
} 
```

到目前为止还不错。现在我们可以弄清楚 && 运算符的类型规则是什么。

*   `Truthy<T> && x`应该是一个错误 - 如果知道左边是真实的，你应该刚刚写`x`
*   `Falsy<T> && x`应该是一个错误 - 如果已知左侧是虚假的，`x`则为无法访问的代码
*   `Maybe<T> && x`应该产生...什么？

我们知道 的结果`Maybe<T> && x`要么是类型的假值，要么`T`是`x`。它不能产生`Truthy<T>`（除非`T`==`x`在这种情况下整个讨论没有实际意义的类型）。我们称之为新类型`Falsy<T> XOR Maybe<U>`。

规则应该`Falsy<T> XOR Maybe<U>`是什么？

*   显然，你不能使用`T`它的属性。如果该值为 type `T`，则它是虚假的，并且使用起来不安全。
*   您应该能够将其用作`Maybe<U>`, since`Falsy<T>`并且`Falsy<U>`具有相同的行为
*   您不应该使用 的属性`U`，因为该值仍然可能是虚假的。
*   如果您在`if`测试中使用它，那么它应该成为该语句`Truthy<U>`块中的a`if`

换句话说，`Falsy<T> XOR Maybe<U>` **是** `Maybe<U>`。它遵循所有相同的规则。您根本不需要通过添加这种奇怪的`XOR`类型来使类型系统复杂化，因为已经存在适合您需要的所有规范的类型。

这有点像给某人一个盒子并说“这是一个空的垃圾箱，或者是一整箱可回收物”。您可以安全地将盒子中的物品清空到回收箱中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-08T13:51:25.580

语言规范没有维护，在这种情况下是错误的。运算符的结果类型`&&`是右侧的类型和左侧的假值的并集。

来自[TypeScript 2.0 发行说明](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#non-null-and-non-undefined-type-guards)：

```
// Compiled with --strictNullChecks
declare function f(x: number): string;
let x: number | null | undefined;
// ..
let b = x && f(x); // Type of b is string | 0 | null | undefined 
```

# c# - 带有 Yield 语句的 IEnumerable

> ID：12693789
> 
> 赞同：2
> 
> 时间：2012-10-02T15:50:20.207
> 
> 标签：c#, .net, syntax

考虑以下代码：

```
public static IEnumerable<float> Power(string ticker, float equity, float amount)
{
    for (int k = 0; MajicNumber(ref k, amount); )
    {
        yield return CalculateStats(ticker, equity, k);
        // Can we get the value of current resultset here?
    }
} 
```

由于该函数正在维护结果集，我们可以访问它吗？

传统的对应物是：

```
public static IEnumerable<float> Power(string ticker, float equity, float amount)
{
    List<float> resultSet = new List<float>();
    for (int k = 0; MajicNumber(ref k, amount); )
    {
        resultSet.Add(CalculateStats(ticker, equity, k));
        // resultSet is accessible here
    }
    return resultSet;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:53:56.843

当然，你可以这样做。与第二个代码片段相比，逻辑没有太大变化，只是您`yield return`在找到答案时给出了答案：

```
public static IEnumerable<float> Power(string ticker, float equity, float amount)
{
    IList<float> resultSet = new List<float>();
    for (int k = 0; MajicNumber(ref k, amount); )
    {
        float r = CalculateStats(ticker, equity, k);
        resultSet.Add(r);
        yield return r;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:54:01.873

> 由于该函数正在维护结果集，我们可以访问它吗？

不，迭代器块*不*维护任何结果集。

# ruby - Amazon S3 查询字符串身份验证无效日期

> ID：12693794
> 
> 赞同：1
> 
> 时间：2012-10-02T15:50:40.533
> 
> 标签：ruby, amazon-s3

我找到了使用查询字符串身份验证创建指向 Amazon S3 资源的链接的脚本：[https ://gist.github.com/1032395](https://gist.github.com/1032395)

由于我没有使用rails，因此我手动包含了这些库。

每次我尝试使用此脚本生成的 URL 打开资源时，我都会收到“拒绝访问”错误，因为“日期无效（应该是纪元以来的秒数）：1349364847”

这可能来自哪里的任何想法？

```
require 'cgi'
require 'base64'
require 'openssl'

def generate_secure_s3_url(s3_key)
    #
    # s3_key would be a path (including filename) to the file like:  "folder/subfolder/filename.jpg"
    # but it should NOT contain the bucket name or a leading forward-slash
    #
    # this was built using these instructions:
    # http://docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?S3_QSAuth.html
    # http://aws.amazon.com/code/199?_encoding=UTF8&jiveRedirect=1

    s3_base_url       = '' # i.e. https://mybucket.s3.amazonaws.com
    bucket            = '' # i.e. mybucket
    access_key_id     = '' # your Amazon S3 access key ID
    secret_access_key = '' # your Amazon S3 secret access key
    expiration_date   = Time.now.utc.to_i + (2*24*60*60) # 2 days from now in UTC epoch time (i.e. 1308172844)

    # this needs to be formatted exactly as shown below and UTF-8 encoded
    string_to_sign = "GET\n\n\n#{expiration_date}\n/#{bucket}/#{s3_key}".encode("UTF-8")

    # we have to CGI/URL escape the signature since it would fail if it included / or + characters
    signature = CGI.escape(Base64.encode64(OpenSSL::HMAC.digest(OpenSSL::Digest::Digest.new('sha1'), secret_access_key, string_to_sign)).gsub("\n",""))

    return "#{s3_base_url}/#{s3_key}?AWSAccessKeyId=#{access_key_id}
                                    &Expires=#{expiration_date}
                                    &Signature=#{signature}"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:47:00.690

我想如果你`require 'active_support/core_ext'`可以使用`2.days.from_now.utc.to_i`

我为此挣扎了一会儿，最终选择了 aws-sdk： [http ://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method)

```
require 'aws-sdk'

bucket = "bucketname"
resource = "myfile.jpg"
access_key_id = "12345"
secret_access_key = "abcdef"

s3 = AWS::S3.new(:access_key_id => access_key_id, :secret_access_key = secret_access_key)
signed_url = s3.buckets[bucket].objects[resource].url_for(:read).to_s 
```

注意：`url_for`也有一个`:expires`选项，默认为一小时。

# facebook-graph-api - 使用 Graph API，为什么更改限制会更改总结果集？

> ID：12693797
> 
> 赞同：1
> 
> 时间：2012-10-02T15:50:50.237
> 
> 标签：facebook-graph-api

我尝试使用 Graph API 为 Facebook 上的帖子获得所有喜欢。我使用了以下两个 URL（隐藏访问令牌）：

```
https://graph.facebook.com/29576928167_10151158219658168/likes?since=1&limit=25&access_token=AAA...

https://graph.facebook.com/29576928167_10151158219658168/likes?since=1&limit=750&access_token=AAA... 
```

请注意，唯一的变化是`limit`参数。当我使用 25 的限制时，我收到 42 页，每页有 25 个赞，最后一页有 7 个赞，总共有 1057 个赞。使用 750 的限制，我得到一个有 99 个赞的页面，然后是一个有 307 个结果的页面，然后是一个有 0 个赞的页面。我的系统在遇到 0 个结果的页面时停止。总结果，406。在这两种情况下，我都遵循 Facebook 返回的 URL，即`paging.next`.

有谁知道为什么改变限制会改变结果的**总数**？

# android - ColorDrawable 的替代品

> ID：12693799
> 
> 赞同：1
> 
> 时间：2012-10-02T15:51:09.940
> 
> 标签：android

我有一段代码扩展了 ColorDrawable 并用 Color.Black 调用了 super。有没有替代方法可以使用我的drawables目录中的drawable？

```
//Want to Have a drawable/res instead of just a plain Color type ? 
static class DownloadedDrawable extends ColorDrawable {

    public DownloadedDrawable(Color color) {
        super(color);

    }

    // Other code,
} 
```

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:04:39.173

那不是真正的图书馆。这只是一个示例项目，但如果您想要一个图像而不是黑色，请尝试派生 from[`BitmapDrawable`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)而不是 from `ColorDrawable`。您可以传入所需的`Bitmap`.

# django - Django：没有名为博客的模块

> ID：12693800
> 
> 赞同：0
> 
> 时间：2012-10-02T15:51:10.073
> 
> 标签：django

好吧，原谅你问这样的问题。但是搜索对我没有帮助。

我做了：

```
django-admin.py startproject mysite
./manage.py startapp blog 
```

好吧，现在我可以看到：

```
michael@ubuntu:~/PycharmProjects/mysite$ ls -l
total 12
drwxrwxr-x 2 michael michael 4096 Oct  2 08:22 blog
-rwxr-xr-x 1 michael michael  249 Oct  2 08:14 manage.py
drwxrwxr-x 2 michael michael 4096 Oct  2 08:26 mysite 
```

在 settings.py 我添加了我的博客：

```
INSTALLED_APPS = (

    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'mysite.blog', 
```

然后提到了SQlite：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': '/var/db/django.db',
        'USER': '',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '',
    }
} 
```

然后我编辑了models.py

从 django.db 导入模型：

```
class BlogPost(models.Model):
    title = models.CharField(max_length = 150)
    body = models.TextField()
    timestamp = models.DateTimeField() 
```

好吧，当我这样做时：

```
./manage.py syncdb 
```

我得到：

```
Error: No module named blog 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:57:21.700

在`INSTALLED_APPS`添加`blog`而不是`'mysite.blog'`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:57:08.487

在 INSTALLED_APPS 中，您只需要有 'blog' 而不是 'mysite.blog'。那应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:11:56.677

> sqlite3.OperationalError：无法打开数据库文件

表示权限问题。确保您拥有必要的权限`/var/db/`

# php - 使用 CRON 运行 PHP 脚本时遇到问题

> ID：12693805
> 
> 赞同：0
> 
> 时间：2012-10-02T15:51:33.480
> 
> 标签：php, cron

我创建了一个我想一直运行的 php 文件。然后我创建了一个我希望 CRON 运行的基本包装器，以确保脚本仍在运行 - 并在需要时重新启动它。

我的`crontab -e`条目是这样的：

```
20 * * * * /var/www/bot/cron.php 
```

cron.php 的内容如下所示。

```
#!/usr/bin/php
<?php
@exec ('ps aux | grep loop', $output, $ret_var);

$running = false;
foreach ($output as $line)
{
    if (strpos($line, 'bot.php') !== false)
    {
        $running = true;
        break;
    }
}

if (! $running)
{
    @exec('/usr/bin/nohup php ' . __DIR__ . '/bot.php >/var/log/bot_out 2>&1 &');
}

die(); 
```

但是，我无法正常工作。有什么我想念的吗？

我在任何错误日志上都没有得到任何信息，并且`/var/log/bot_out`确实显示了一些运行时错误，所以我知道必须调用 PHP。

```
PHP Warning:  Module 'apc' already loaded in Unknown on line 0
PHP Warning:  Module 'suhosin' already loaded in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:19:51.280

```
20 * * * * /var/www/bot/cron.sh 
```

然后是 cron.sh 的内容

```
#!/bin/bash
KP=$(pgrep -P 1 -f bot.php)
if [ "X$KP" = "X" ]
  then
    /usr/bin/nohup php PATH_TO_YOUR_SCRIPT/bot.php 
fi 
```

# android - 从应用程序到服务器的视频流录制

> ID：12693810
> 
> 赞同：0
> 
> 时间：2012-10-02T15:51:54.200
> 
> 标签：android, ios, html, cordova

我需要想出一个可以在 HTML5 移动应用程序（IOS 和 Android）中使用的解决方案，以便将工作申请的视频消息录制到服务器上。

我想最好的方法是在手机上存储和记录，然后将 ID 发送到服务器进行存储 - 但想知道是否有人做过类似的事情并有任何建议？

我们正在考虑使用 Phonegap，我与一个 .net 开发人员合作，这样他就可以设置一个 Web 服务来存储视频服务器端。

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:36:59.010

是的，您可以使用 PhoneGap 做到这一点。使用[Media Capture API 的 captureVideo()](http://docs.phonegap.com/en/2.1.0/cordova_media_capture_capture.md.html#capture.captureVideo)方法，您可以录制视频。然后在此方法的成功回调中，您可以调用[FileTransfer.upload()](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#FileTransfer_upload)将结果发送到您的服务器。

# php - 枚举替代品

> ID：12693813
> 
> 赞同：0
> 
> 时间：2012-10-02T15:52:12.280
> 
> 标签：php, mysql, enums

有没有更有效的方法来防止用户通过 firebug 编辑表单文本然后发布自定义值？我听说过很多关于不将 ENUM 用于大型数据集的事情。我还能如何限制我的用户并阻止他们编辑我的表单以发布更改的数据？一个例子是国家列表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:55:06.380

你永远无法确定客户端发生了什么，firebug、greasemonkey 它们都赋予用户做任何他们想做的事情的权力。确保也在服务器端验证表单。

# android - 显示对话框时出现 BadTokenException

> ID：12693815
> 
> 赞同：1
> 
> 时间：2012-10-02T15:52:18.247
> 
> 标签：android, android-activity, dialog, android-alertdialog

我在一个 Android 应用程序上有一个活动，它与我的服务器启动一个同步过程。此过程消耗大量内存和处理，并且需要一些时间才能完成。

该过程完成后，会向用户显示一个 AlertDialog，显示该过程是否成功完成。

如果我离开活动前台，一切都会按预期进行。但是，有时，当我离开应用程序时，后台进程会继续其工作，但是，当我返回应用程序时，它会崩溃并出现以下错误：

**android.view.WindowManager$BadTokenException: 无法添加窗口——令牌android.os.BinderProxy@4086ea48 无效；您的活动正在运行吗？**

是否会因为活动被操作系统破坏而导致此错误？如果是，该进程（在另一个线程上运行）如何继续运行？而且，即使我们确认问题是由活动的破坏引起的，我该如何处理这种情况，避免崩溃并向用户显示对话框？

这是一些代码...

```
public class ActSincronizacao extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.sincronizacao);

        //Prepare so starts the process
        [...]

        // Defines a Handler that will be called when the process gets finished
        oSocketEngine.addProgressUpdateFinishListener(new ProgressUpdateFinishListener() {

            @Override
            public void ProgressUpdateFinishOccurred(final ProgressUpdateFinish evt) {

                //Do some processing that doesn´t envolve UI
                [...]

                // Process that envolves UI
                runOnUiThread(new Runnable() {

                    public void run() {

                        if ((boolean)evt.getArgs().getResult()) {

                            //If the process gets Success
                            AlertDialog.Builder builder = new AlertDialog.Builder(ActSincronizacao.this);
                            builder.setIcon(android.R.drawable.ic_dialog_info);
                            builder.setTitle("Informação");
                            builder.setMessage("Sincronização concluida com sucesso.");

                            // Defines a button handler
                            builder.setNeutralButton("OK", new OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog, int which) {

                                    //Go to another Activity
                                    [...]

                                }
                            });

                            //Call the Dialog
                            builder.create().show();

                        } else {

                            //If something wrong hapenned

                            StringBuilder stb = new StringBuilder();
                            stb.append("Some error ocurrend while running the sync process.");

                            if (evt.getArgs().getMessage() != null) {
                                stb.append("\n\n");
                                stb.append(evt.getArgs().getMessage());
                            } else {
                                stb.append("\n\n");
                                stb.append("Try again...");
                            }

                            AlertDialog.Builder builder = new AlertDialog.Builder(ActSincronizacao.this);
                            builder.setIcon(android.R.drawable.ic_dialog_alert);
                            builder.setTitle("Error");
                            builder.setMessage(stb.toString());
                            builder.setNeutralButton("OK", null);
                            builder.create().show();            //<<<<<<<<<<<<<<<<< Crash is reported here

                        }
                    }
                });
            }
        });

        //Starts the process in backgroud (Thread)
        oSocketEngine.StartCommunication(oDeviceConfig);

    }

} 
```

这是记录的完整堆栈跟踪：

```
android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@4086ea48 is not valid; is your activity running?
at android.view.ViewRoot.setView(ViewRoot.java:532)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:200)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:114)
at android.view.Window$LocalWindowManager.addView(Window.java:424)
at android.app.Dialog.show(Dialog.java:241)
at PortalExecutivoSales.Android.ActSincronizacao$3$1.run(ActSincronizacao.java:138)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T17:38:55.107

对于那些仍在寻找解决此问题的方法的人：

以下链接解释了发生此问题的原因和原因。 [http://vinnysoft.blogspot.com.br/2010/11/androidviewwindowmanagerbadtokenexcepti.html](http://vinnysoft.blogspot.com.br/2010/11/androidviewwindowmanagerbadtokenexcepti.html)

我为解决这个问题所做的工作：

1）。在类上创建了`ActSincronizacao`一个名为 的布尔变量，`isActivityRunning`用于通知 Activity 是否正在运行。此变量在 onPause 和 onResume 事件中设置，如下所示：

```
@Override
protected void onPause() {
    isActivityActive = false;
    super.onPause();
}

@Override
protected void onResume() {
    isActivityActive = true;
    super.onResume();
} 
```

2）。当进程结束时，在调用对话框之前，我检查`isActivityActive`变量的状态。如果`true`，我照常调用对话。如果没有，我创建一个通知，如下所示：

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse)

3）。当用户单击通知时，我仍然希望向用户显示带有错误消息的警报（如果有）。因此，通知应该将**ErrorMessage**传递给正在调用的活动。这可以通过`extra`在`Notification Intent`. 查看下面的示例，了解*如何传递（@Vidar Vestnes 的问题）和如何使用（@pinaise 的答案）由 Notification 创建的 Extra*。

[如何将参数从通知点击发送到活动？](https://stackoverflow.com/questions/1198558/how-to-send-parameters-from-a-notification-click-to-an-activity)

4）。最后，当用户点击通知时，如果应用程序没有运行，我想启动它。如果它正在运行，我想把它带回前台。*默认*行为是，当我们单击 Notification 时，会创建传递给*Notification Intent*的新活动实例。为避免创建新活动并将应用程序置于前台，请参阅下面的@santhosh 回复：

[通过通知项重新打开后台应用程序](https://stackoverflow.com/questions/2960459/re-open-background-application-via-notification-item)

希望这对将来的其他人有所帮助。

问候。

# unix - 无法粘贴到 vim SunOS（没有注册）

> ID：12693817
> 
> 赞同：3
> 
> 时间：2012-10-02T15:52:35.773
> 
> 标签：unix, vim

我不确定我做错了什么。似乎 yanking 工作正常，但是当点击 p 粘贴时，我得到： E353: nothing in register"

我愿意：

```
vim myFile
V
y
:q!
vim temp
p 
```

我错过了什么？

SunOS myServer 5.10 Generic_142900-04 sun4u sparc SUNW,SPARC-Enterprise

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:01:13.643

我想我想通了。感谢您的指示...我查了这个帖子：Copy and paste in vim via keyboard between different mac terminal?

事实证明，我的主目录中没有 .vimrc。所以我创建并添加了这一行：

设置剪贴板+=未命名

在获取该文件后，我可以在不同的 vim 会话之间粘贴（至少在一个终端中）。

# asp.net-mvc - 删除具有引用的实体的方法

> ID：12693819
> 
> 赞同：0
> 
> 时间：2012-10-02T15:52:38.440
> 
> 标签：asp.net-mvc

客户可以有一个位置，并且一个位置可以与多个客户相关联。当用户尝试删除与某些客户关联的位置时，会引发引用异常。那么，任何人都可以建议哪种方法是处理这种情况的最佳方法，例如通知用户等。它是 ASP.NET MVC Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:01:06.627

一种方法可能是检查用户是否可以有效地删除客户的位置......如果它不能不显示删除图标/链接。当然，您应该在控制器中进行检查以确定。

如果客户与与其他几个客户共享的位置相关，则执行此操作的正确方法不是删除该位置本身，而是将具有该位置 ID 的客户属性设置为 NULL。

# javascript - Javascript替换多个撇号

> ID：12693821
> 
> 赞同：0
> 
> 时间：2012-10-02T15:52:40.857
> 
> 标签：javascript, replace

有人可以告诉我我做错了什么.....我正在尝试替换字符串中的所有撇号但无论我是否放置转义斜杠等，它都不会这样做

```
str = str.replace(/'/g,"something else"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T21:59:51.570

您现在可能已经想通了，或者找到了替代方案。我正在寻找一个答案，促使我在这里创建我的个人资料以“投票”，并给那些回答对我有帮助的人。

我正在使用 IE7 并且“g”全局表示不起作用......它需要将其归结为基础才能让我的全部替换工作。它只是在我需要转义的字符串中有“n”个 ' 时替换第一个 ' 撇号。

```
var str = str.split(stringToBeReplaced).join(stringReplaceWith); 
```

这就是最终为我工作的原因。

# java - 如何通过 servlet 生成实时视频流和流？

> ID：12693822
> 
> 赞同：4
> 
> 时间：2012-10-02T15:52:50.883
> 
> 标签：java, servlets, video-streaming, xuggle

我正在寻找一个如何从一系列图像生成实时视频流并通过 java servlet 流式传输的示例。

[我可以使用xuggle](http://www.xuggle.com/)从图像生成视频。我尝试使用 Red5，但我不相信这是我需要的。我宁愿从我的网络应用程序中直接通过 servlet 流式传输。我也在[这里](https://stackoverflow.com/questions/3214422/how-to-transmit-live-video-from-within-a-java-application)查看了这个示例，但似乎 xuggle 已弃用/删除了代码示例正在使用的一些功能。

# spring - ArtifactTransferException：无法将工件...传输到/从中央

> ID：12693828
> 
> 赞同：1
> 
> 时间：2012-10-02T15:53:13.993
> 
> 标签：spring, maven

我正在学习本教程：[Spring - DAO and Service layer](http://www.javacodegeeks.com/2012/09/spring-dao-and-service-layer.html)

我在 pom.xml 上的 Eclipse 中收到此错误：

```
ArtifactTransferException: Could not transfer artifact org.antlr:antlr:jar:3.2 
from/to central (http://repo.maven.apache.org/maven2): No response received 
after 60000 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:15:28.897

这听起来像是一个简单的网络问题。我建议您尝试在 Web 浏览器中访问该 URL 以确认您已连接：[http](http://repo.maven.apache.org/maven2) ://repo.maven.apache.org/maven2 。你应该看到：

> 此目录的浏览已被禁用。
> 
> 请改为在[http://search.maven.org上](http://search.maven.org)[查看](http://search.maven.org/#browse)此目录的内容。

您可能还希望检查您的本地系统是否不需要代理来访问 Internet。如果是这样，您需要按照[这些说明](http://www.mkyong.com/web-development/how-to-configure-proxy-settings-in-eclipse/)配置 Eclipse 以使用您的代理。

# objective-c - Wikiitude SDK - 首次运行时忽略许可证密钥

> ID：12693837
> 
> 赞同：3
> 
> 时间：2012-10-02T15:53:35.133
> 
> 标签：objective-c, ios, wikitude

我正在使用 wikiitude SDK 提供的教程示例代码并根据我的需要进行调整。但是，当我将有效的许可证密钥传递给 ARchitect 浏览器（这发生在视图控制器的 viewDidAppear 方法中）时

```
NSString * wkKey = @"50m3r4nd0m51gn5";
[self.architectView initializeWithKey:<myKey> motionManager:nil]; 
```

并从 XCode 在我的开发设备（iPhone 4）上构建和运行该应用程序我仍然在增强现实视图后面获得测试版水印，就好像我没有提供任何许可证密钥一样。然而，当我在调试器中检查对象时，许可证密钥可用，它似乎被 ARchitect View 初始化程序忽略了。

当我使用主页按钮关闭设备上的应用程序，然后在设备上再次打开它时，这一次显然可以识别许可证密钥，并且测试版水印消失了。

我尝试了什么：

*   将初始化程序放在 vieWillAppear 方法中 - 没有变化
*   直接提供密钥，没有变量 - 没有变化

有没有人知道这是 SDK 的问题，还是我在代码中调用它的时间问题？由于我找不到太多关于 wikiitude 的信息，尤其是关于我的问题的任何信息，非常感谢任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:17:13.513

请确保您使用的许可证密钥由 Wikiitude 提供并且不包含任何空格。显示“50m3r4nd0m51gn5”的键似乎不正确。请查看 SimpleARBrowser/WTSecondViewController.m/viewWillAppear。在以下网址注册您的应用程序时，您将获得一个有效的许可证密钥：http: [//www.wikitude.com/store](http://www.wikitude.com/store)

要验证现有密钥，请联系 sales[at]wikitude.com

免责声明：我为公司工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:37:20.100

问题已解决：我仍然使用 1.0.3 版本的 wikiitude sdk，同时发布了 v1.1.1 - 升级后，“beta”水印和/或 wikiitude 徽标不再显示..

# c# - SQL 日期格式 BETWEEN 查询

> ID：12693838
> 
> 赞同：-6
> 
> 时间：2012-10-02T15:53:42.200
> 
> 标签：c#, sql, datepicker, reportviewer

我有一个表客户有一些字段，包括日期，现在我想打印两个日期之间的报告，但日期的格式就像

```
Tuesday, October 02, 2012 
```

我正在使用 C# 生成查询并将其发送到报告查看器，建议对此输出的查询。

C# 日期格式是

```
string date = datetime.now.tostring("D"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:25:15.813

我意识到你说的只是 SQL，但你似乎没有得到太多帮助，所以我将向你展示我将如何使用 MySQL 来解决这个问题，希望它会有所帮助：

在 C# 中，像这样创建查询字符串：

```
string date1 = dt1.ToString("D");
string date2 = dt2.ToString("D");
string query = "SELECT * FROM customer WHERE cast(entered_date_time as date) > STR_TO_DATE('" + date1 + "', '%W, %M %d, %Y') AND cast(entered_date_time as date) < STR_TO_DATE('" + date2 + "', '%W, %M %d, %Y');"; 
```

为了让您更好地查看查询，这是我正在做的一个示例：

```
SELECT * FROM customer WHERE
cast(entered_date_time as date) > STR_TO_DATE('Monday, October 01, 2012', '%W, %M %d, %Y')
AND
cast(entered_date_time as date) < STR_TO_DATE('Tuesday, October 02, 2012', '%W, %M %d, %Y') 
```

另请注意，我使用了该字段`entered_date_time`，因为 date 是 MySQL 中的保留关键字。

# jquery - Razor中非常基本的jquery datepicker

> ID：12693855
> 
> 赞同：1
> 
> 时间：2012-10-02T15:54:17.463
> 
> 标签：jquery, razor, datepicker

我在 Visual Studio 2010 MVC4 razor microsoft 模板中。我从 jquery 站点下载了 jquery“工具包”，当我打开 index.html 时它可以工作。但是，当我将我的 razor 项目更改为看起来像 jquery 下载时（将所有 JS 文件、图像和 css 文件移动到正确的位置）并添加以下代码（适用于 html 案例）

```
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>jQuery UI Example Page</title>
    <link type="text/css" href="~/Content/ui-lightness/jquery-ui-1.8.24.custom.css" rel="stylesheet" />
    <script type="text/javascript" src="~/Scripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery-ui-1.8.24.custom.min.js"></script>
    <script type="text/javascript">
        $(function () {

            // Datepicker
            $('#datepicker').datepicker({
                inline: true
            });

        });
    </script>

</head>
<body>

    <!-- Datepicker -->
    <h2 class="demoHeaders">Datepicker</h2>
    <div id="datepicker"></div>

</body> 
```

对于文本 Datepicker，页面上没有显示任何内容。我已经查看了其他所有内容，但似乎没有任何效果。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:00:47.750

检查浏览器中的网络控制台，我敢打赌它在`404`尝试加载 css 和 js 文件时会出错。正因为如此，它不应用日历的样式，甚至不应用 js 来将它最初隐藏等等。尝试以这种方式引用它们：

```
<link type="text/css" href='@Url.Content("~/Content/ui-lightness/jquery-ui-1.8.24.custom.css")' rel="stylesheet" />
<script type="text/javascript" src='@Url.Content("~/Scripts/jquery-1.8.2.min.js")'></script>
<script type="text/javascript" src='@Url.Content("~/Scripts/jquery-ui-1.8.24.custom.min.js")'></script> 
```

使用`Url.Content`将正确解析您的 URL。

# javascript - jQuery选择第一个孩子三层深

> ID：12693857
> 
> 赞同：0
> 
> 时间：2012-10-02T15:54:21.880
> 
> 标签：javascript, jquery

我有以下 HTML 结构：

```
<div class="s1>
 <div class="s2">
  <span class="span1">
    <span>text</span>
  </span>
 </div>
</div> 
```

目前我正在使用以下选择器选择嵌套最多的跨度：

```
$(".s1").find(">:first-child").find(">first:child").find(">:first-child") 
```

有没有更有效的方法来选择内部跨度？

编辑： s1 类的 div 已经被缓存，所以我不能使用 $("selector").

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:55:56.957

您可以通过 span1 类访问它，

```
$('.span1 span') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:56:23.053

有几个选项，这样的东西应该可以工作：

```
.s1 .s2 .span1 span:first-child 
```

我不确定您需要选择器的具体程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:56:25.623

给它一个类或 ID，然后尝试访问它

```
 <span id="sp1" class="sp1">text</span>

$('#sp1')  or $('.sp1') 
```

// 或者

```
$('.span1 > span') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:00:56.137

如果您在谈论效率，最快的方法是为 span 定义一个 id：

```
<span id="spanX">text</span>
$('#spanX') 
```

因为这个选择器直接映射到跨浏览器的getElementById

如果由于某种原因您无法触摸 html，最快的方法是：

```
$('.span1 span:first') 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T15:56:37.877

```
$('div.s1 > div:first-child > span:first-child > span:first-child') 
```

你还需要比这更具体的吗？

# android - aspx web服务中无cookie会话的解决方案

> ID：12693861
> 
> 赞同：1
> 
> 时间：2012-10-02T15:54:34.083
> 
> 标签：android, asp.net, asmx, ksoap2, android-ksoap2

我有一个我不知道如何解决的问题，几天前我发布了一个关于将会话 Web 服务与 ksoap 一起使用的问题。[ksoap session web service](https://stackoverflow.com/questions/12664849/ksoap-session-web-service) 问题是 ksoap 没有 cookie 选项，因此 sessionID 可以被存储。但我想到了一个可能的解决方案，它可以与无 cookie 会话一起使用（在 url 中发送 sessionID）。问题是 Web 服务中的会话不能在“无 cookie 模式”下工作，只能使用我无法使用的 cookie。

另一个想法是在 aspx 页面中实现相同的 web 服务方法，以便无 cookie 会话将在那里工作，但我不知道如何调用页面方法。

而且由于我不知道如何调用页面方法，我认为我应该从我的 Web 服务中调用它，然后重新发送返回的数据。

所以我需要一种方法来实现我的解决方案：

1) 一种在 asmx Web 服务中使无 cookie 会话工作的方法

2) 一种使用 ksoap 调用页面 web 方法的方法，以便无烹饪会话将在那里工作

3）也许是一种从 Web 服务方法调用 aspx 页面方法的方法，以便我使用 Web 服务方法，如“桥”，它将重新发送页面方法返回的数据。

```
 String NAMESPACE = "http://tempuri.org/";
    String METHOD_NAME = "Test";
    String SOAP_ACTION = "http://tempuri.org/Test";   
    String URL = "http://mysite.com/WebService.asmx";

    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo pi = new PropertyInfo();
    pi.setName("s");
    pi.setValue("dddddddd");
    pi.setType(String.class);
    Request.addProperty(pi);

     SoapSerializationEnvelope envelope = new       SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(Request);
    envelope.addMapping(NAMESPACE, "Category",new Category().getClass());
    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);

    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapObject response = (SoapObject)envelope.getResponse(); 
```

………………………………………………………………………………

我的 Web 服务方法返回一个 Category 对象列表（经过测试并且可以正常工作，但如果我使用会话则不会）。

有人有提议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:00:21.020

我能够这样[做](https://stackoverflow.com/a/13907027/442580)

基本上我会调用登录 Web 服务并保存`Set-Cookie`响应中的标头值。然后在对其他 Web 方法的后续调用中返回这些值。

将有两个“Set-Cookie”标头键，如下所示：

> 设置 Cookie：ASP.NET_SessionId=zpe44yb05a105zuz2f24aqi5；路径=/; HttpOnly
> 
> Set-Cookie: .ASPXAUTH=4BEC23D4FA4B34C7145550F2FE279E047ED2E16F1503896C949AC3A08DAAC932F6869D9B667A6735D6EA6419074F0F1C34BC3F08210904B2BB9E543CF4CCE6C2E70975F804E2447F60966406ADC1F015D267B0413FF4C79A252C55E904AD86BB315ED161300DF200163CFA77492D680ACCF9C763F3F61F70DA4E8261C9DB6466; 路径=/; HttpOnly

保存它们并调用后续的“安全”网络方法，两个值之间用 a`;`连接。

您在后续调用中包含的标头应如下所示：

> Cookie：ASP.NET_SessionId=zpe44yb05a105zuz2f24aqi5；路径=/; 仅http；.ASPXAUTH=4BEC23D4FA4B34C7145550F2FE279E047ED2E16F1503896C949AC3A08DAAC932F6869D9B667A6735D6EA6419074F0F1C34BC3F08210904B2BB9E543CF4CCE6C2E70975F804E2447F60966406ADC1F015D267B0413FF4C79A252C55E904AD86BB315ED161300DF200163CFA77492D680ACCF9C763F3F61F70DA4E8261C9DB6466; 路径=/; HttpOnly

# php - 验证表格错误

> ID：12693864
> 
> 赞同：-16
> 
> 时间：2012-10-02T15:54:37.527
> 
> 标签：php, forms, email-verification

我已经在这个问题上待了几个小时，一直在摸索问题出在哪里。

表单工作并发送电子邮件，但是当单击验证链接时，它不显示回显的“成功”消息，而是显示 die(“error message”); 信息。与 $salt 有什么关系？

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">

<input type="text" size="35" name="email" title="Email"> 
<input id="button" type="submit" name="submit" value="Submit your Email" />

</form>

<?php

$salt = "mysecret";

if(isset($_POST["confirm"]) && isset($_POST["email"])){
    $confirm = $_POST["confirm"];
    $to_email = $_POST["email"];

    if(sha1($salt.$to_email) == $confirm){
        echo "Success";
    } else{
        die("error: mail not confirmed");
    }

} elseif(isset($_POST["email"])){
    $to_email = $_POST["email"];

    $confirm_link = "http://www.mysite.com/form.php?confirm=".urlencode(sha1($salt.$to_email))."&mail=".urlencode($to_email);
    $msg = "to confirm ... click the link: \n ".$confirm_link;
    mail($to_email, "pls confirm your mail", $msg);
} else{
    die("error message");
}

?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:01:07.220

当您从电子邮件中单击该验证链接时，这些值将通过 GET 而不是通过 POST 传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:00:45.757

当您单击链接时在 $_GET 中传递数据时，您检查 $_POST 中的数据，并且您的链接指定一个邮件参数（不带“e”）并检查“电子邮件”参数。

# jquery - 我的动画效果有什么问题，调用了两次

> ID：12693866
> 
> 赞同：0
> 
> 时间：2012-10-02T15:55:14.243
> 
> 标签：jquery

我正在做一个基于流体的幻灯片放映，为此，我编写了这段代码，问题是这个动画也能正确开始而没有结束，它再次向前发展。

我相信我正在使用 window.resize 函数，这就是原因。如果是这样，我该如何解决？

我的代码：

```
var slideShow = function () {
    var x = 0;
    var imgHeight = $('img').height();
    $('#slideContainer').height(imgHeight);
    var imgSetWidth = $('#slideContainer').width();
    $('img').width(imgSetWidth);
    var imgLength = $('.slide').size();
    $('.inner').css({width:imgLength * imgSetWidth,left:imgSetWidth*x});

    $('a#next').click(function () {
        x++;
        $('.inner').animate({left:-imgSetWidth},1000);    
    } )
}
window.onload = function () {
    slideShow();
};

$(window).resize(function () {
    slideShow();    
} ) 
```

另外，如果有人知道如何编写带有标题的基于流体的幻灯片放映（前进/上一个），请告诉我。尽量避免插件。

# firefox - 背景剪辑：奇怪的行为

> ID：12693874
> 
> 赞同：1
> 
> 时间：2012-10-02T15:55:36.537
> 
> 标签：firefox, google-chrome, css

我最近一直在尝试一些 css3 功能，我发现了一些奇怪的行为。（我使用 firefox-nightly 18.0a1 (2012-09-24) 和 chrome Version 22.0.1229.91 beta）

我想制作一个黑色背景的圆形框，渐变边框从蓝色到透明。所以我想我可以在内容框上使用 2 个不同的背景并剪辑一个（黑色的），以使蓝色/透明的一个出现在内容框之外的填充框上。

```
background: -webkit-linear-gradient(0deg, black, black), -webkit-linear-gradient(-90deg, rgb(0, 102, 204), rgba(0, 102, 204, 0);
background: -moz-linear-gradient(0deg, black, black), -moz-linear-gradient(-90deg, rgb(0, 102, 204), rgba(0, 102, 204, 0);
background-clip: content-box, border-box; 
```

它在 Chrome 中工作得非常好，但在 Firefox 中，似乎没有应用不同的背景剪辑，而是只应用了后一个，所以两个背景的剪辑方式相同，所以看不到蓝色/透明背景。

然后，我开始想在它周围加上一个外部边框，比如说一个细的蓝色边框。所以我补充说：

```
border: 3px solid blue; 
```

Chrome 以一种非常奇怪的方式显示我的圆圈：由于边框半径，所有内容都被裁剪为圆形，但内容变成了正方形。

我做了一个 jsfiddle 来说明问题：http: [//jsfiddle.net/wUtPX/](http://jsfiddle.net/wUtPX/)

这是一些已知的错误吗？我应该将它们报告给一些错误跟踪器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:13:48.927

我正在阅读[background-size 的 MDN 规范](https://developer.mozilla.org/en-US/docs/CSS/background-size)。他们在这里明确地说：

> 由 background-image 定义的多个背景的值可以用逗号分隔列出

虽然在[背景剪辑](https://developer.mozilla.org/en-US/docs/CSS/background-clip)规范中尚不清楚。所以也许它不支持多个值。

此外，[W3C 规范](http://dev.w3.org/csswg/css3-background/#layering)不包括在“分层多个背景图像”操作方法中的背景剪辑。所以我想它*不应该*支持多个属性，而 Chrome 所做的实际上是“错误的”。

您可能可以找到使用 background-origin （支持多个值）和 background-size 的解决方法，例如：

```
background-origin: border-box, content-box;
background-size: 100% 100%, 99% 99%; 
```

# floating-point - 为什么使用==时tcl中的1.0不等于1.0

> ID：12693890
> 
> 赞同：4
> 
> 时间：2012-10-02T15:56:38.770
> 
> 标签：floating-point, tcl

在下面的代码中，我遇到了一个奇怪的现象。在线上运行时，`if {$ma == $mb}`两者`mb`都`ma`相等`1.0`，但未采用 if。当我将 to 更改`==`为`eq`or`[cequal $ma $mb]`时， if 被采用。

此外，当我尝试使用`1.0`(`if {$ma == 1.0}`和`if {$1.0 == $mb}`) 更改其中一个变量时，if 也没有被采用，但是带有表达式的 if`if {1.0 ==1.0}`被采用。

`==`换成之后发生在我身上的另一件事`eq`是`0.0`and`-0.0`使用时不相等`eq`，但使用时相等`==`。

这些差异的根源是什么？

我知道在浮点数比较中，最好使用一个小的 epsilon 来检查两个数字是否真的彼此接近，但在这种情况下，比较是为了避免被零除。

代码：

```
proc geometry_intersect_two_sections {xa1 ya1 xa2 ya2 xb1 yb1 xb2 yb2} {
    if {($xa1 == $xa2) && ($xb1 == $xb2)} {
        return {}
    }

    if {!($xa1 == $xa2)} {
        set ma [expr (($ya1-$ya2)*1.0)/($xa1-$xa2)]
        set na [expr $ya1 - ($ma * 1.0 * $xa1)]
    }

    if {!($xb1 == $xb2)} {
        set mb [expr (($yb1-$yb2)*1.0)/($xb1-$xb2)]
        set nb [expr $yb1 - ($mb * 1.0 * $xb1)]
    }

    if {$xa1 == $xa2} {
        set retx [expr $xa1 * 1.0]
        set rety [expr $retx * 1.0 * $mb + $nb]
        if {($rety <= [max $yb1 $yb2]) && ($rety >= [min $yb1 $yb2]) && ($rety <= [max $ya1 $ya2]) && ($rety >= [min $ya1 $ya2]) && \
            ($retx <= [max $xb1 $xb2]) && ($retx >= [min $xb1 $xb2]) && ($retx <= [max $xa1 $xa2]) && ($retx >= [min $xa1 $xa2])} {ety]
        } else {
            return {}
        }
    }

    if {$xb1 == $xb2} {
        set retx [expr $xb1 * 1.0]
        set rety [expr $retx * 1.0 * $ma + $na]
        if {($rety <= [max $yb1 $yb2]) && ($rety >= [min $yb1 $yb2]) && ($rety <= [max $ya1 $ya2]) && ($rety >= [min $ya1 $ya2]) && \
            ($retx <= [max $xb1 $xb2]) && ($retx >= [min $xb1 $xb2]) && ($retx <= [max $xa1 $xa2]) && ($retx >= [min $xa1 $xa2])} {
            return [list $retx $rety]
        } else {
            return {}
        }
    }

    if {$mb == $ma} {
        return {}
    }

    set retx [expr 1.0 * ($na - $nb)/($mb - $ma)]
    set rety [expr 1.0 * ($ma * $retx) + $na]
    if {($rety <= [max $yb1 $yb2]) && ($rety >= [min $yb1 $yb2]) && ($rety <= [max $ya1 $ya2]) && ($rety >= [min $ya1 $ya2]) && \
        ($retx <= [max $xb1 $xb2]) && ($retx >= [min $xb1 $xb2]) && ($retx <= [max $xa1 $xa2]) && ($retx >= [min $xa1 $xa2])} {
        return [list $retx $rety]
    } else {
        return {}
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:10:46.750

众所周知，IEEE 浮点值（Tcl 在内部使用，因为它们受 CPU 硬件支持）具有它们不能准确表示值的特性。无论如何都是第一个近似值；它们确实代表了值，因为它们具有固定数量的位（64 位`double`，这是 Tcl 使用的），但它们代表的值可能与您认为的略有不同（因为许多值不能在固定数量的二进制数字，就像¹ / [3]几乎但不完全是十进制的 0.333333333；这是*完全相同*的问题，但在另一个数字基数中）。

为了显示目的， Tcl 采取了一些*有限*的步骤来解决这个问题；从 8.5 开始，它使用最少的位数呈现浮点数，以便再次获得准确的值，而在 8.4 及之前，它在打印数字时仅使用较少的位数（最多 15 个十进制数字而不是 17这将是进行精确表示所必需的），这可以通过魔法`tcl_precision`变量进行控制。但是不要设置该变量；它不能满足您的需要，因为它只是将值呈现为字符串，而不是值本身。相反，您需要使用不同的（并且众所周知的）平等策略：equal-within-epsilon。

```
# Magic value! This one is OK for values in the range of small integers
proc equal_float {a b {epsilon 1e-15}} {
    return [expr {abs($a - $b) < $epsilon}]
} 
```

然后你会像这样使用它：

```
# Instead of: if {$x == 42.3} { ... }
if {[equal_float $x 42.3]} { ... } 
```

请注意，这样做的另一个结果是您永远不应该将浮点数用于迭代目的，因为这会导致错误累积并超过 epsilon。不是以 0.1 的步长从 0 到 25，而是以整数步长从 0 到 250，然后通过乘以 0.1 得出浮点值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:42:40.997

要直接解决您的问题，`==`只要两个数字不相等，就会失败。

在您的问题中，您提到`eq`的结果与`==`. 这是因为`eq`在比较完成之前将值转换为字符串。当浮点值转换为字符串时，它们必须四舍五入到某个值。如果两个浮点数落在某个范围内，它们将四舍五入到相同的值，产生完全相同的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T16:45:29.683

`==`强制进行数字比较，同时`eq`强制进行字符串比较（`cequal`如果记忆对我有用，并且您来自 Tclx，并且本质上与 具有相同的语义`eq`）。

为严格相等而比较浮点值的问题在设计上存在缺陷，因为这些类型不包含精确值（与整数相反）。比较两个浮点数的一种明智方法是定义某个（非常小的）常数“epsilon”，并查看它们差异的绝对值是否小于该“epsilon”。如果小于，则声明两个浮点数相同，否则不一样。一个快速的谷歌搜索出现了[这篇文章](http://www.infogoaround.org/JBook/FloatingComparison.pdf)，[这个页面](http://www.cprogramming.com/tutorial/floating_point/understanding_floating_point_representation.html)，以及其他有用的链接。

另一种方法是尝试使用整数（通过在适当的情况下使用适当的放大和缩小以防止不足/溢出）。

# deployment - ADO.net SQL Server 命令在 x86 Windows Server 2008 上失败

> ID：12693891
> 
> 赞同：1
> 
> 时间：2012-10-02T15:56:42.123
> 
> 标签：deployment, oledb, inno-setup, adodb

我正在使用 Inno Setup 部署具有面向开发人员的设置的项目。我编写了一些代码来进行一些对于原始 Inno Setup 来说有点过于自定义的操作。
其中一项操作是连接并运行 SQL 文件，感谢 StackOverflow 用户 [，我找到了一些这样做的代码](https://stackoverflow.com/questions/12260493/connect-to-sql-2008-using-inno-setup/12296113#12296113)。问题是，每当我尝试在新的 Windows Server 2008 机器 (x86) 上部署项目时，除了第一个 sql 命令之外，我在每个 sql 命令上都会遇到这种神秘的错误：

> “没有足够的存储空间来完成此操作 ProgID: ADODB.Connection”

所以。第一个命令触发并工作，下一个停止错误。如果我再次运行代码，一些命令可能会起作用，但在某些时候，安装程序会挂起。**这个问题在我正在写的 Windows XP 上不存在**。

我对我运行的每个 SQL 命令使用上面链接的代码（新的 ole 对象 ADODB.Connection、新命令、执行...结束） - 我不会对插入结果进行第二次查询（因为它只是为了显示目的）。

有什么想法可以在这里发生，或者我该如何解决？

# jquery - 如何从控制器操作中捕获返回值

> ID：12693896
> 
> 赞同：1
> 
> 时间：2012-10-02T15:56:59.330
> 
> 标签：jquery, asp.net-mvc, uploadify

我正在使用 uploadify 在我的 ASP.NET MVC 应用程序上上传 .csv 文件。从控制器操作中，我返回一个带有几个值的 JSON，如下所示：

```
return Json(new { success = false, message = result.Message }); 
```

以下是上传代码：

```
$("#email").uploadify(
                    {
                    'uploader': '/js/component/uploadify/uploadify.swf',
                    'script': '/email/UploadEmail',
                    'cancelImg': '/js/component/uploadify/cancel.png',
                    'fileExt': '*.csv',
                    'fileDesc': '*.csv',
                    'auto': true,
                    'multi': false,
                    'buttonText': 'Upload...',

                        'onComplete': function (event, queueID, fileObj, response, data)
                            {

                                alert(jQuery.parseJSON(response));
                                alert(jQuery.parseJSON(response.message));
                                var filename = fileObj.name;
                                $('#emailSuppressionFile').append('<input id="' + queueID + '" type="hidden" name="files[' + queueID + ']" value="' + filename + '" />');                                   
}                                
                    }); 
```

我正在尝试阅读从控制器操作返回的“消息”，但不知道如何。请参阅上面的警报。第一个警报返回：[object Object]，第二个返回 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:58:53.317

试试这样：

```
onComplete: function(event, queueID, fileObj, response, data) {
    var json = jQuery.parseJSON(response);
    alert(json.message);
}, 
```

也不要在事件名称周围加上引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T07:50:46.963

在旧版本的 Uploadify onComplete 事件中，用于从 Controller 提供响应。但是，在最新版本中，您需要使用 onUploadSuccess 事件，如下所示，

```
 'onUploadSuccess' : function(file, data, response) {
         alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
    } 
```

# css - 为什么没有应用我的 320px 媒体查询？

> ID：12693901
> 
> 赞同：0
> 
> 时间：2012-10-02T15:57:15.553
> 
> 标签：css, media-queries, viewport

我有以下两个媒体查询：

```
@media  (min-width: 320px) and (max-width: 359px){
    .hero-unit h1 {
        margin-bottom: 0;
        font-size: 0.2em;
        line-height: 0.5em;
        letter-spacing: -5px;
        color: inherit;
    }
    .hero-unit p {
        font-size: 0.2em;
        font-weight: 10;
        line-height: 0.5em;
        color: inherit;
    }   
    .hero-unit {
        background: url("../img/now320.jpg");
        height: 5em;
        width: 15em;      
        padding: 0.5em;
        margin-bottom: 2em;
        background-color: #eeeeee;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
    }   
    h2 {
        font-size: 2em;
        font-weight: 20;
        line-height: 0.5em;
        color: inherit;
    }   
}

@media (min-width: 360px) and (max-width: 479px) {
    .hero-unit h1 {
        margin-bottom: 0;
        font-size: 0.2em;
        line-height: 1em;
        letter-spacing: -5px;
        color: inherit;
    }
    .hero-unit p {
        font-size: 0.2em;
        font-weight: 50;
        line-height: 1em;
        color: inherit;
    }   
    .hero-unit {
        background: url("../img/now360b.jpg");
        padding: 1em;
        margin-bottom: 2em;
        height: 10em;
        width: 18em;
        background-color: #eeeeee;
        -webkit-border-radius: 6px;
        -moz-border-radius: 6px;
        border-radius: 6px;
    }   
    h2 {
        font-size: 2em;
        font-weight: 20;
        line-height: 1em;
        color: inherit;
    }   
} 
```

我试图弄清楚为什么 320 宽度规则根本没有应用于我的 HTML 页面，即使我已经使用 Firefox 中的响应式设计工具调整了它的大小，使其宽度为 320 像素。

我使用 Firebug 检查了 CSS 样式，看看发生了什么。我只看到`@media (min-width: 360px) and (max-width: 479px)`正在应用的部分。也就是说，我认为应该应用的 CSS 规则不会被覆盖。正在发生的事情是该规则根本没有被应用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:08:40.040

如果您希望将 320px 规则应用于您需要这样编写的所有页面

```
@media  (min-width: 320px) 
```

后面没有任何 and (min-width....)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:46:16.607

有时浏览器只是简单地不允许视口小于某个大小，我认为这条线在 360 度左右下降，所以它可能根本没有注册，即使使用你提到的工具。我不能说，因为我需要看到活生生的例子。

您是否在实际的移动设备或至少是模拟器上检查过该网站？[Opera Mobile Emulator](http://www.opera.com/developer/tools/mobile/)非常易于使用。

顺便说一句，如果您想首先在**移动设备**上工作- 可以先为 320 设备编写 CSS，**而不使用媒体查询**，作为“基线”体验。您可以在此处指定字体系列、颜色、通常应用的样式。*然后*您添加媒体查询以处理越来越大的尺寸，这就是您指定布局和文本大小更改的地方。关键是 - 不要将您的 320-359 样式包装在媒体查询中，因为这将是每个人的基本体验。

# r - 获取所有变量的类型

> ID：12693908
> 
> 赞同：130
> 
> 时间：2012-10-02T15:57:53.760
> 
> 标签：r, typeof

在 R 中，我想在脚本末尾检索全局变量列表并迭代它们。这是我的代码

```
#declare a few sample variables
a<-10
b<-"Hello world"
c<-data.frame()

#get all global variables in script and iterate over them
myGlobals<-objects()
for(i in myGlobals){
  print(typeof(i))     #prints 'character'
} 
```

我的问题是，即使变量并且不是字符变量，它也`typeof(i)`总是返回。如何在 for 循环中获取原始类型的变量？`character``a``c`

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-02T16:06:21.073

您需要用于`get`获取值而不是返回的对象的字符名称`ls`：

```
x <- 1L
typeof(ls())
[1] "character"
typeof(get(ls()))
[1] "integer" 
```

或者，对于呈现的问题，您可能想要使用`eapply`：

```
eapply(.GlobalEnv,typeof)
$x
[1] "integer"

$a
[1] "double"

$b
[1] "character"

$c
[1] "list" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-03-18T22:54:37.257

## R/Rscript 没有具体的数据类型。

R 解释器有一个鸭式内存分配系统。没有内置方法可以告诉您指向内存的指针的数据类型。鸭子打字是为了速度，但结果证明是个坏主意，因为 now 语句如：`print(is.integer(5))`返回 FALSE 并`is.integer(as.integer(5))`返回 TRUE。去搞清楚。

基本类型的 R 手册：[https ://cran.r-project.org/doc/manuals/R-lang.html#Basic-types](https://cran.r-project.org/doc/manuals/R-lang.html#Basic-types)

您可以期望的最好的方法是编写自己的函数来探测指向内存的指针，然后使用消除过程来确定它是否适合您的需要。

## 如果您的变量是全局变量或对象：

在你看到里面之前，你`object()`需要被穿透。`get(...)`例子：

```
a <- 10
myGlobals <- objects()
for(i in myGlobals){
  typeof(i)         #prints character
  typeof(get(i))    #prints integer
} 
```

## typeof(...) 探测指向内存的变量指针：

例如，R[函数`typeof`](https://cran.r-project.org/doc/manuals/R-lang.html#index-typeof)倾向于为您提供最大深度的类型。

```
library(tibble)

#expression              notes                                  type
#----------------------- -------------------------------------- ----------
typeof(TRUE)             #a single boolean:                     logical
typeof(1L)               #a single numeric with L postfixed:    integer
typeof("foobar")         #A single string in double quotes:     character
typeof(1)                #a single numeric:                     double
typeof(list(5,6,7))      #a list of numeric:                    list
typeof(2i)               #an imaginary number                   complex

typeof(5 + 5L)           #double + integer is coerced:          double
typeof(c())              #an empty vector has no type:          NULL
typeof(!5)               #a bang before a double:               logical
typeof(Inf)              #infinity has a type:                  double
typeof(c(5,6,7))         #a vector containing only doubles:     double
typeof(c(c(TRUE)))       #a vector of vector of logicals:       logical
typeof(matrix(1:10))     #a matrix of doubles has a type:       list

typeof(substr("abc",2,2))#a string at index 2 which is 'b' is:  character
typeof(c(5L,6L,7L))      #a vector containing only integers:    integer
typeof(c(NA,NA,NA))      #a vector containing only NA:          logical
typeof(data.frame())     #a data.frame with nothing in it:      list
typeof(data.frame(c(3))) #a data.frame with a double in it:     list
typeof(c("foobar"))      #a vector containing only strings:     character
typeof(pi)               #builtin expression for pi:            double

typeof(1.66)             #a single numeric with mantissa:       double
typeof(1.66L)            #a double with L postfixed             double
typeof(c("foobar"))      #a vector containing only strings:     character
typeof(c(5L, 6L))        #a vector containing only integers:    integer
typeof(c(1.5, 2.5))      #a vector containing only doubles:     double
typeof(c(1.5, 2.5))      #a vector containing only doubles:     double
typeof(c(TRUE, FALSE))   #a vector containing only logicals:    logical

typeof(factor())         #an empty factor has default type:     integer
typeof(factor(3.14))     #a factor containing doubles:          integer
typeof(factor(T, F))     #a factor containing logicals:         integer
typeof(Sys.Date())       #builtin R dates:                      double
typeof(hms::hms(3600))   #hour minute second timestamp          double
typeof(c(T, F))          #T and F are builtins:                 logical
typeof(1:10)             #a builtin sequence of numerics:       integer
typeof(NA)               #The builtin value not available:      logical

typeof(c(list(T)))       #a vector of lists of logical:         list
typeof(list(c(T)))       #a list of vectors of logical:         list
typeof(c(T, 3.14))       #a vector of logicals and doubles:     double
typeof(c(3.14, "foo"))   #a vector of doubles and characters:   character
typeof(c("foo",list(T))) #a vector of strings and lists:        list
typeof(list("foo",c(T))) #a list of strings and vectors:        list
typeof(TRUE + 5L)        #a logical plus an integer:            integer
typeof(c(TRUE, 5L)[1])   #The true is coerced to 1              integer
typeof(c(c(2i), TRUE)[1])#logical coerced to complex:           complex
typeof(c(NaN, 'batman')) #NaN's in a vector don't dominate:     character
typeof(5 && 4)           #doubles are coerced by order of &&    logical
typeof(8 < 'foobar')     #string and double is coerced          logical
typeof(list(4, T)[[1]])  #a list retains type at every index:   double
typeof(list(4, T)[[2]])  #a list retains type at every index:   logical
typeof(2 ** 5)           #result of exponentiation              double
typeof(0E0)              #exponential lol notation              double
typeof(0x3fade)          #hexidecimal                           double
typeof(paste(3, '3'))    #paste promotes types to string        character
typeof(3 + 四)           #R pukes on unicode                    error
typeof(iconv("a", "latin1", "UTF-8")) #UTF-8 characters         character
typeof(5 == 5)           #result of a comparison:               logical 
```

## class(...) 探测指向内存的变量指针：

例如，R[函数`class`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/class.html)倾向于为您提供封装类型的容器或结构的类型。

```
library(tibble)

#expression            notes                                    class
#--------------------- ---------------------------------------- ---------
class(matrix(1:10))     #a matrix of doubles has a class:       matrix
class(factor("hi"))     #factor of items is:                    factor
class(TRUE)             #a single boolean:                      logical
class(1L)               #a single numeric with L postfixed:     integer
class("foobar")         #A single string in double quotes:      character
class(1)                #a single numeric:                      numeric
class(list(5,6,7))      #a list of numeric:                     list
class(2i)               #an imaginary                           complex
class(data.frame())     #a data.frame with nothing in it:       data.frame
class(Sys.Date())       #builtin R dates:                       Date
class(sapply)           #a function is                          function
class(charToRaw("hi"))  #convert string to raw:                 raw
class(array("hi"))      #array of items is:                     array

class(5 + 5L)           #double + integer is coerced:          numeric
class(c())              #an empty vector has no class:         NULL
class(!5)               #a bang before a double:               logical
class(Inf)              #infinity has a class:                 numeric
class(c(5,6,7))         #a vector containing only doubles:     numeric
class(c(c(TRUE)))       #a vector of vector of logicals:       logical

class(substr("abc",2,2))#a string at index 2 which is 'b' is:  character
class(c(5L,6L,7L))      #a vector containing only integers:    integer
class(c(NA,NA,NA))      #a vector containing only NA:          logical
class(data.frame(c(3))) #a data.frame with a double in it:     data.frame
class(c("foobar"))      #a vector containing only strings:     character
class(pi)               #builtin expression for pi:            numeric

class(1.66)             #a single numeric with mantissa:       numeric
class(1.66L)            #a double with L postfixed             numeric
class(c("foobar"))      #a vector containing only strings:     character
class(c(5L, 6L))        #a vector containing only integers:    integer
class(c(1.5, 2.5))      #a vector containing only doubles:     numeric
class(c(TRUE, FALSE))   #a vector containing only logicals:    logical

class(factor())       #an empty factor has default class:      factor
class(factor(3.14))   #a factor containing doubles:            factor
class(factor(T, F))   #a factor containing logicals:           factor
class(hms::hms(3600)) #hour minute second timestamp            hms difftime
class(c(T, F))        #T and F are builtins:                   logical
class(1:10)           #a builtin sequence of numerics:         integer
class(NA)             #The builtin value not available:        logical

class(c(list(T)))       #a vector of lists of logical:         list
class(list(c(T)))       #a list of vectors of logical:         list
class(c(T, 3.14))       #a vector of logicals and doubles:     numeric
class(c(3.14, "foo"))   #a vector of doubles and characters:   character
class(c("foo",list(T))) #a vector of strings and lists:        list
class(list("foo",c(T))) #a list of strings and vectors:        list
class(TRUE + 5L)        #a logical plus an integer:            integer
class(c(TRUE, 5L)[1])   #The true is coerced to 1              integer
class(c(c(2i), TRUE)[1])#logical coerced to complex:           complex
class(c(NaN, 'batman')) #NaN's in a vector don't dominate:     character
class(5 && 4)           #doubles are coerced by order of &&    logical
class(8 < 'foobar')     #string and double is coerced          logical
class(list(4, T)[[1]])  #a list retains class at every index:  numeric
class(list(4, T)[[2]])  #a list retains class at every index:  logical
class(2 ** 5)           #result of exponentiation              numeric
class(0E0)              #exponential lol notation              numeric
class(0x3fade)          #hexidecimal                           numeric
class(paste(3, '3'))     #paste promotes class to string       character
class(3 + 四)           #R pukes on unicode                   error
class(iconv("a", "latin1", "UTF-8")) #UTF-8 characters         character
class(5 == 5)           #result of a comparison:               logical 
```

## 获取`storage.mode`变量的数据：

当 R 变量写入磁盘时，数据布局再次发生变化，称为[数据的`storage.mode`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/mode.html). 该函数`storage.mode(...)`揭示了这些低级信息：请参阅[R 对象的模式、类和类型](https://stats.stackexchange.com/questions/3212/mode-class-and-type-of-r-objects)。您不必担心 R 的 storage.mode ，除非您试图了解在向磁盘分配数据和从磁盘读取数据时发生的往返强制转换/强制导致的延迟。

## 演示：R/Rscript `gettype(your_variable)`：

运行此 R 代码，然后根据您的目的对其进行调整，它会很好地猜测它是什么类型。

```
get_type <- function(variable){ 
  sz <- as.integer(length(variable)) #length of your variable 
  tof <- typeof(variable)            #typeof your variable 
  cls <- class(variable)             #class of your variable 
  isc <- is.character(variable)      #what is.character() has to say about it.  
  d <- dim(variable)                 #dimensions of your variable 
  isv <- is.vector(variable) 
  if (is.matrix(variable)){  
    d <- dim(t(variable))             #dimensions of your matrix
  }    
  #observations ----> datatype 
  if (sz>=1 && tof == "logical" && cls == "logical" && isv == TRUE){ return("vector of logical") } 
  if (sz>=1 && tof == "integer" && cls == "integer" ){ return("vector of integer") } 
  if (sz==1 && tof == "double"  && cls == "Date" ){ return("Date") } 
  if (sz>=1 && tof == "raw"     && cls == "raw" ){ return("vector of raw") } 
  if (sz>=1 && tof == "double"  && cls == "numeric" ){ return("vector of double") } 
  if (sz>=1 && tof == "double"  && cls == "array" ){ return("vector of array of double") } 
  if (sz>=1 && tof == "character"  && cls == "array" ){ return("vector of array of character") } 
  if (sz>=0 && tof == "list"       && cls == "data.frame" ){ return("data.frame") } 
  if (sz>=1 && isc == TRUE         && isv == TRUE){ return("vector of character") } 
  if (sz>=1 && tof == "complex"    && cls == "complex" ){ return("vector of complex") } 
  if (sz==0 && tof == "NULL"       && cls == "NULL" ){ return("NULL") } 
  if (sz>=0 && tof == "integer"    && cls == "factor" ){ return("factor") } 
  if (sz>=1 && tof == "double"     && cls == "numeric" && isv == TRUE){ return("vector of double") } 
  if (sz>=1 && tof == "double"     && cls == "matrix"){ return("matrix of double") } 
  if (sz>=1 && tof == "character"  && cls == "matrix"){ return("matrix of character") } 
  if (sz>=1 && tof == "list"       && cls == "list" && isv == TRUE){ return("vector of list") } 
  if (sz>=1 && tof == "closure"    && cls == "function" && isv == FALSE){ return("closure/function") } 
  return("it's pointer to memory, bruh") 
} 
assert <- function(a, b){ 
  if (a == b){ 
    cat("P") 
  } 
  else{ 
    cat("\nFAIL!!!  Sniff test:\n") 
    sz <- as.integer(length(variable))   #length of your variable 
    tof <- typeof(variable)              #typeof your variable 
    cls <- class(variable)               #class of your variable 
    isc <- is.character(variable)        #what is.character() has to say about it. 
    d <- dim(variable)                   #dimensions of your variable 
    isv <- is.vector(variable) 
    if (is.matrix(variable)){  
      d <- dim(t(variable))                   #dimensions of your variable 
    } 
    if (!is.function(variable)){ 
      print(paste("value: '", variable, "'")) 
    } 
    print(paste("get_type said: '", a, "'")) 
    print(paste("supposed to be: '", b, "'")) 

    cat("\nYour pointer to memory has properties:\n")  
    print(paste("sz: '", sz, "'")) 
    print(paste("tof: '", tof, "'")) 
    print(paste("cls: '", cls, "'")) 
    print(paste("d: '", d, "'")) 
    print(paste("isc: '", isc, "'")) 
    print(paste("isv: '", isv, "'")) 
    quit() 
  } 
}
#these asserts give a sample for exercising the code. 
assert(get_type(TRUE),      "vector of logical")  #everything is a vector in R by default. 
assert(get_type(c(TRUE)),   "vector of logical")  #c() just casts to vector 
assert(get_type(c(c(TRUE))),"vector of logical")  #casting vector multiple times does nothing 
assert(get_type(!5),        "vector of logical")  #bang inflicts 'not truth-like' 
assert(get_type(1L),              "vector of integer")   #naked integers are still vectors of 1 
assert(get_type(c(1L, 2L)),       "vector of integer")   #Longs are not doubles 
assert(get_type(c(1L, c(2L, 3L))),"vector of integer")   #nested vectors of integers 
assert(get_type(c(1L, c(TRUE))),  "vector of integer")   #logicals coerced to integer 
assert(get_type(c(FALSE, c(1L))), "vector of integer")   #logicals coerced to integer 
assert(get_type("foobar"),        "vector of character")    #character here means 'string' 
assert(get_type(c(1L, "foobar")), "vector of character")    #integers are coerced to string 
assert(get_type(5),           "vector of double") 
assert(get_type(5 + 5L),      "vector of double") 
assert(get_type(Inf),         "vector of double") 
assert(get_type(c(5,6,7)),    "vector of double") 
assert(get_type(NaN),           "vector of double") 
assert(get_type(list(5)),       "vector of list")    #your list is in a vector. 
assert(get_type(list(5,6,7)),   "vector of list") 
assert(get_type(c(list(5,6,7))),"vector of list") 
assert(get_type(list(c(5,6),T)),"vector of list")    #vector of list of vector and logical 
assert(get_type(list(5,6,7)),   "vector of list") 
assert(get_type(2i),            "vector of complex") 
assert(get_type(c(2i, 3i, 4i)), "vector of complex") 
assert(get_type(c()),            "NULL") 
assert(get_type(data.frame()),   "data.frame") 
assert(get_type(data.frame(4,5)),"data.frame") 
assert(get_type(Sys.Date()),     "Date") 
assert(get_type(sapply),         "closure/function") 
assert(get_type(charToRaw("hi")),"vector of raw") 
assert(get_type(c(charToRaw("a"), charToRaw("b"))), "vector of raw") 
assert(get_type(array(4)),       "vector of array of double") 
assert(get_type(array(4,5)),     "vector of array of double") 
assert(get_type(array("hi")),    "vector of array of character") 
assert(get_type(factor()),       "factor") 
assert(get_type(factor(3.14)),   "factor") 
assert(get_type(factor(TRUE)),   "factor") 
assert(get_type(matrix(3,4,5)),  "matrix of double") 
assert(get_type(as.matrix(5)),   "matrix of double") 
assert(get_type(matrix("yatta")),"matrix of character") 
```

我在这里加入了一个 C++/Java/Python 意识形态，它让我了解了内存的外观。R triad 打字系统就像试图将意大利面条钉在墙上，`<-`并`<<-`在您最不怀疑时将您的矩阵打包到一个列表中。正如打鸭子的老话所说：如果它像鸭子一样蹒跚而行，如果它像鸭子一样嘎嘎叫，如果它有羽毛，那么它就是一只鸭子。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-14T06:01:43.470

您可以使用 class(x) 来检查变量类型。如果需要检查数据框的所有变量类型，则可以使用 sapply(x, class)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-28T06:26:38.613

```
> mtcars %>% 
+     summarise_all(typeof) %>% 
+     gather
    key  value
1   mpg double
2   cyl double
3  disp double
4    hp double
5  drat double
6    wt double
7  qsec double
8    vs double
9    am double
10 gear double
11 carb double 
```

我尝试`class`和`typeof`功能，但都失败了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T17:01:19.883

设计基本上与您想要的相反，这是我的工具包玩具之一：

```
 lstype<-function(type='closure'){
inlist<-ls(.GlobalEnv)
if (type=='function') type <-'closure'
typelist<-sapply(sapply(inlist,get),typeof)
return(names(typelist[typelist==type]))
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-10T01:28:32.570

lapply(your_dataframe, class) 给你类似的东西：

$tikr [1] “因素”

$Date [1] "日期"

$Open [1] “数字”

$High [1] "数字"

... ETC。

# jquery - jQuery on() 事件可以在 chrome 中找到，但在 IE 中找不到

> ID：12693909
> 
> 赞同：0
> 
> 时间：2012-10-02T15:57:54.010
> 
> 标签：jquery, html

首先，我讨厌 IE，但我们都必须支持它！

我有一张地图，在这张地图上，我有“热点”，用户将鼠标悬停在上面并显示图像并写入一些文本。

```
<script src="jquery.js"></script>

<div style="width: 673px; position: relative" id="map">
    <div style="width: 45px; height: 45px; position: absolute; top: 550px; left: 295px;" id="meeting1"></div>
    <div style="width: 45px; height: 45px; position: absolute; top: 470px; left: 605px;" id="meeting2"></div>
    <div style="width: 45px; height: 45px; position: absolute; top: 155px; left: 438px;" id="meeting3"></div>
    <div style="width: 45px; height: 45px; position: absolute; top: 195px; left: 275px;" id="meeting4"></div>
    <div style="width: 45px; height: 45px; position: absolute; top: 217px; left: 230px;" id="meeting5"></div>
    <div style="width: 45px; height: 45px; position: absolute; top: 505px; left: 235px;" id="meeting6"></div>
    <img src="map-tour.png" width="673px" />

    <div style="width: 270px; height: 45px; border-style: solid; border-color: black; position: absolute; top: 600px; left: 370px;" id="display"></div>
</div>

<script>
$('#display').html('<p>--</p>');

$(document).ready(function () {
    $("#meeting1").on({
        mouseenter: function() {
            $(this).html("<img src='map-tour-hover-icon.png' width='75' style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test1</p>");
        },
        mouseleave: function() {
            $(this).html("");
            $("#display").html("<p>--</p>");
        }
    });

    $("#meeting2").on({
        mouseenter: function() {
            $(this).html("<img src='map-tour-hover-icon.png' width='75' style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test2</p>");
        },
        mouseleave: function() {
            $(this).html("");
            $("#display").html("<p>--</p>");
        }
    });

    $("#meeting3").on({
        mouseenter: function() {
            $(this).html("<img src='map-tour-hover-icon.png' width='75' style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test3</p>");
        },
        mouseleave: function() {
            $(this).html("");
            $("#display").html("<p>--</p>");
        }
    });

    $("#meeting4").on({
        mouseenter: function() {
            $(this).html("<img src='map-tour-hover-icon.png' width='75' style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test4</p>");
        },
        mouseleave: function() {
            $(this).html("");
            $("#display").html("<p>--</p>");
        }
    });

    $("#meeting5").on({
        mouseenter: function() {
            $(this).html("<img src='map-tour-hover-icon.png' width='75' style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test5</p>");
        },
        mouseleave: function() {
            $(this).html("");
            $("#display").html("<p>--</p>");
        }
    });

    $("#meeting6").on({
        mouseenter: function() {
            $(this).html("<img src='map-tour-hover-icon.png' width='75' style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test6</p>");
        },
        mouseleave: function() {
            $(this).html("");
            $("#display").html("<p>--</p>");
        }
    });
});
</script> 
```

这在 Chrome 中按预期工作（实际上 jQuery.hover 工作得很好），但在 IE 中没有。但是，如果我添加边框样式：solid; 边框颜色：#0000；在#meeting1 div 的样式中，它工作正常！

谁能帮忙！？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:00:58.360

如果您使用鼠标进入和鼠标离开，使用jQuery悬停，它更好，更具体。并且也兼容所有。

```
$("#meeting5").hover(
     function() {
     $(this).html("<img src='map-tour-hover-icon.png' width='75'
       style='position:absolute; top: -15px; left: -15px;' />");
            $("#display").html("<p>Test5</p>");
        },
        function() {
            $(this).html("");
            $("#display").html("<p>--</p>");

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:31:39.733

弄清楚了。

首先，我创建了一个 45px x 45px 的透明图像，然后更改了 HTML 以包含此图像

```
<div style="width: 45px; height: 45px; position: absolute; top: 550px; left: 295px;" id="meeting1"><img src="t.png" /></div> 
```

然后我改变了javascript来阅读

```
$("#meeting1 img").on({
    mouseenter: function() {
        $(this).attr("src", "map-tour-hover-icon.png");
        $(this).attr("width", "75");
        $(this).attr("style", "position:absolute; top: -15px; left: -15px;");
        $("#display").html("<p>Text in there</p>");
    },
    mouseleave: function() {
        $(this).attr("src", "t.png");
        $('#display').html('<p>Replacement Text here</p>');
    }
}); 
```

因此，我没有更新 div 中的 HTML，而是更新图像及其属性。

# php - 上传文件的 Unicode 名称将被删除

> ID：12693912
> 
> 赞同：0
> 
> 时间：2012-10-02T15:58:02.090
> 
> 标签：php, unicode, upload, filenames

我正在上传带有 unicode 名称的文件。上传后我看到一个没有名称的文件，实际上上传文件的 unicode 名称将被删除。为什么？以及如何解决？

我正在使用 ftp (php) 上传，拉丁字母文件名没有问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:13:51.037

我想你的文件系统不支持 unicode 名称

您应该考虑剥离 unicode 字母或以另一种方式对其进行编码

一个便宜的黑客可能是`urlencode()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:14:28.370

这取决于确切的客户端和服务器实现、它们运行的​​操作系统以及操作系统的配置方式等...

例如，客户端可能是使用 UTF-8 的 linux，而服务器在 Windows 上运行并且不太可能处理 UTF-8 文件名，或者客户端可能是 Windows，试图将 Unicode 文件名转换为无法处理的旧编码而服务器在 Linux 上需要 UTF-8。

您只需要了解相关因素或找到可以亲自与之交谈的人，因为在查看案件的所有细节时，故障排除可能会涉及很多来回。

# spring - 如何使用控制器中的选项卡“返回”到特定页面？

> ID：12693915
> 
> 赞同：1
> 
> 时间：2012-10-02T15:58:36.643
> 
> 标签：spring, jsp, controller

```
@RequestMapping(value = "/update/updateTask", method = RequestMethod.POST){
    ...
    return "updateContract";
} 
```

我将如何指定带有选项卡的页面？例如，我需要的是“updatecontract#tab1”。如果我指定，它不起作用。

帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:39:43.933

您需要在您的退货声明中使用“重定向”

例子

```
@RequestMapping(value = "/update/updateTask", method = RequestMethod.POST){
    ...
    return "redirect:updateContract#tab1";
} 
```

# c# - 即使存在验证错误，WPF 中是否有办法强制刷新绑定？

> ID：12693916
> 
> 赞同：1
> 
> 时间：2012-10-02T15:58:39.117
> 
> 标签：c#, wpf, validation, binding

我有一个 DataGrid，可以在其中选择项目。在它旁边，有 TextBoxes 和其他编辑器控件，用于编辑所选项目。

我希望 DataGrid 中的项目使用正在编辑的属性进行更新，即使当前插入的数据无效。（用户无法保存无效数据，编辑期间无法更改所选项目，取消也可以。）

这可以在 WPF 中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:16:20.913

`ValidationRule.ValidationStep`在验证规则运行时获取或设置。

由于您希望验证规则**在源更新后**运行，因此您需要使用`ValidationStep.CommittedValue`.

有关详细信息，请参阅[msdn 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationrule.validationstep.aspx)

# ruby-on-rails - |f| 是什么意思？用红宝石做什么？

> ID：12693918
> 
> 赞同：3
> 
> 时间：2012-10-02T15:58:45.417
> 
> 标签：ruby-on-rails, ruby, model

> **可能重复：**
> [在 Ruby 中，垂直线是什么？](https://stackoverflow.com/questions/3545870/in-ruby-what-are-the-vertical-lines)

这个问题似乎是谷歌证明的，我不知道 Ruby。

比较模型描述中行尾的不同存在`|f|`会导致内容不显示。我只是想修复一个页面中的一个错误，该错误不提供对表格中某些信息的访问。

“ [||= 在 Ruby 中做了什么](https://stackoverflow.com/q/2025191/513006)”`||`似乎没有帮助。

这是损坏的 .rb 文件中的可疑代码：

```
comma :show_mytable do |f|
    table2 :field2
    table3 :field3
end 
```

但这似乎有效，激活时显示所需的字段：

```
comma :show_mytable do
    table2 :field2
    table3 :field3
end 
```

可以`|f|`阻止输出显示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:30:17.970

在您的代码中，您将两个变量传递给该`comma`方法。第一个是被调用的符号`:show_mytable`，第二个是块。它与条件赋值的 ||= 语法无关。

以下是如何在 ruby​​ 中使用块的示例：

```
array = [1, 2, 3, 4]
array.each do |element|
  element + 1
end 
  #=> 2 3 4 5 
```

当你使用循环时（`each`在这种情况下），你可以传递一个变量（`element`）给你一种方法来引用循环中的当前元素。

你也可以使用花括号代替`do`and`end`像这样：

```
array = [1, 2, 3, 4]
array.each { |e| e + 1 } 
  #=> 2 3 4 5 
```

由于您在这里没有遍历任何内容，因此我看不出您`|f|`在示例中可能需要的任何理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:28:38.490

这`|f|`是您的块的参数。使用这几行代码，您可以调用`comma`使用两个参数调用的方法。第一个是符号`:show_mytable`，第二个是你在 the`do`和 the之间的块`end`。

使用包含在管道之间的变量名称列表，您可以指定块的参数列表。块就像一个匿名函数，可以使用任意数量的参数调用它，ruby 会尝试最好地匹配它们。

# java - 如何在 NetBeans 平台应用程序中更快地显示 Java3D 图像？

> ID：12693924
> 
> 赞同：1
> 
> 时间：2012-10-02T15:59:08.177
> 
> 标签：java, performance, java-3d, netbeans-platform

我使用 Java Swing 技术在 NetBeans 平台上制作了一个桌面应用程序。在那个应用程序中，我使用 PointArray[] 对象对 3D 图像进行图像处理。

当我的应用程序在具有 Windows 7、显卡和良好 RAM 容量（4GB RAM）的 PC 上运行时，我的 3D 图像会在单击 3DImage 按钮后的 5 到 6 秒内创建并显示。但是，当我的应用程序在 Windows XP、低图形配置 PC 上运行时，我的 3D 图像最多需要三分钟才能渲染，或者有时它不显示图像。那么我该如何解决这个问题呢？

我的代码如下。

```
import com.sun.j3d.utils.behaviors.mouse.MouseRotate;
import com.sun.j3d.utils.behaviors.mouse.MouseWheelZoom;
import com.sun.j3d.utils.universe.SimpleUniverse;
import java.awt.BorderLayout;
import java.awt.GraphicsConfiguration;
import java.awt.image.BufferedImage;
import javax.media.j3d.Appearance;
import javax.media.j3d.BoundingSphere;
import javax.media.j3d.BranchGroup;
import javax.media.j3d.Canvas3D;
import javax.media.j3d.ColoringAttributes;
import javax.media.j3d.GeometryArray;
import javax.media.j3d.PointArray;
import javax.media.j3d.PointAttributes;
import javax.media.j3d.Shape3D;
import javax.media.j3d.TransformGroup;
import javax.media.jai.JAI;
import javax.media.jai.PlanarImage;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.vecmath.Color3f;
import javax.vecmath.Point3d;
import javax.vecmath.Point3f;

public final class FinalDImage extends JPanel {

    private static int s = 0, count = 0, r = 0, g = 0, b = 0, medHeight = 0, medWidth = 0;
    private static float divisior1 = 300000.0f;
    private static Shape3D plShape;
    private static TransformGroup objRotate;
    private static BranchGroup scene;
    private static JButton btn;
    private static Canvas3D canvas3D;
    private static SimpleUniverse simpleU;
    private static GraphicsConfiguration gc;
    private static BufferedImage histImage;
    private static JPanel jPanel1 = new JPanel();

    public FinalDImage(BufferedImage histImage) {
        FinalDImage.histImage = histImage;
        medWidth = (int) (histImage.getWidth() / 2.0f);
        medHeight = (int) (histImage.getHeight() / 2.0f);
        this.add(jPanel1);
        initComponents();
    }

    public void initComponents() {
        setLayout(new BorderLayout());
        btn = new JButton("Intensity");
        gc = SimpleUniverse.getPreferredConfiguration();
        canvas3D = new Canvas3D(gc);//See the added gc? this is a preferred config
        add("Center", canvas3D);
        add(btn, BorderLayout.SOUTH);
        scene = createSceneGraph(FinalDImage.histImage);
        scene.setCapability(BranchGroup.ALLOW_DETACH);
        scene.compile();
        simpleU = new SimpleUniverse(canvas3D);
        simpleU.getViewingPlatform().setNominalViewingTransform();
        simpleU.addBranchGraph(scene);
    }

    public BranchGroup createSceneGraph(BufferedImage histImage) {
        count = 0;
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        ColoringAttributes ca = new ColoringAttributes(new Color3f(204.0f, 204.0f, 204.0f), ColoringAttributes.SHADE_FLAT);
        app.setColoringAttributes(ca);

        Point3f plaPts;
        Color3f color;
        PointArray pla = new PointArray(histImage.getWidth() * histImage.getHeight(), GeometryArray.COLOR_3 | GeometryArray.COORDINATES);

        if (histImage.getType() == 11) {
            for (int i = histImage.getWidth() - 3; i >= 3; i--) {
                for (int j = histImage.getHeight() - 3; j >= 3; j--) {
                    s = histImage.getRaster().getSample(i, j, 0);
                    plaPts = new Point3f((medWidth - i) / 1500.0f,
                                         (medHeight - j) / 1500.0f,
                                         s / divisior1);
                    color = new Color3f(s / 60000.0f, s / 60000.0f, s / 60000.0f);
                    pla.setCoordinate(count, plaPts);
                    pla.setColor(count, color);
                    count++;
                }
            }
        } else {
            for (int i = 2; i < histImage.getWidth() - 2; i++) {
                for (int j = 2; j < histImage.getHeight() - 2; j++) {
                    r = histImage.getRaster().getSample(i, j, 0);
                    g = histImage.getRaster().getSample(i, j, 1);
                    b = histImage.getRaster().getSample(i, j, 2);
                    s = (r + g + b) / 3;
                    plaPts = new Point3f((medWidth - i) / 1200.0f,
                                         (medHeight - j) / 1200.0f,
                                         s / (divisior1/600.0f));
                    color = new Color3f(r / 300.0f, g / 300.0f, b / 300.0f);
                    pla.setCoordinate(count, plaPts);
                    pla.setColor(count, color);
                    count++;
                }
            }
        }

        PointAttributes a_point_just_bigger = new PointAttributes();
        a_point_just_bigger.setPointSize(4.0f);//10 pixel-wide point
        a_point_just_bigger.setPointAntialiasingEnable(true); //now points are sphere-like (not a cube)
        app.setPointAttributes(a_point_just_bigger);
        plShape = new Shape3D(pla,app);
        objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(plShape);
        lineGroup.addChild(objRotate);
        MouseRotate myMouseRotate = new MouseRotate();
        myMouseRotate.setFactor(0.015, 0.015);
        myMouseRotate.setTransformGroup(objRotate);
        myMouseRotate.setSchedulingBounds(new BoundingSphere());
        myMouseRotate.setSchedulingBounds(new BoundingSphere(
                new Point3d(0.0, 0.0, 0.0), 100));

        lineGroup.addChild(myMouseRotate);
        MouseWheelZoom mz = new MouseWheelZoom();
        mz.setFactor(0.01);
        mz.setTransformGroup(objRotate);
        mz.setSchedulingBounds(new BoundingSphere());
        lineGroup.addChild(mz);
        return lineGroup;
    }

    public static void main(String[] args) {
        PlanarImage plImg3 = JAI.create("fileload", "E:\\Data\\office\\teeth3.tiff");
        BufferedImage histImage = plImg3.getAsBufferedImage();
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new FinalDImage(histImage)));
        frame.setSize(800, 700);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:19:21.970

这是java3D版本问题。我的代码没问题。但我安装的 java3d 不适用于该操作系统的图形配置。现在我用 Diretecx 安装其​​他 java3d，它的运行良好且速度更快。

# button - 贝宝退货网址不起作用

> ID：12693926
> 
> 赞同：6
> 
> 时间：2012-10-02T15:59:20.740
> 
> 标签：button, paypal, return

我有这样的表格：

```
<input type='hidden' name='cmd' value='_xclick'>
<input type='hidden' name='business' value='co_1331738237_per@gmail.com'>
<input type='hidden' name='item_name' value='Nueva compra en mi web'>
<input type='hidden' name='amount' value='10.15'>
<input type='hidden' name='page_style' value='primary'>
<input type='hidden' name='no_shipping' value='1'>
<input type='hidden' name='return' value='http://someurl.com/reserva-realizada/'>
<input type='hidden' name='rm' value='2'>
<input type='hidden' name='cancel_return' value='http://someurl.com/reserva-cancelada/'>
<input type='hidden' name='no_note' value='0'>
<input type='hidden' name='first_name' value='NOMBRE'>
<input type='hidden' name='last_name' value='APELLIDOS'>
<input type='hidden' name='night_phone_b' value='TELÉFONO'>
<input type='hidden' name='custom' value='Nota'>
<input type='hidden' name='lc' value='es'>
<input type="hidden" name="currency_code" value="EUR"> 
<input type='hidden' name='country' value='ES'> 
```

问题是，付款后我需要在我的网站上给用户唱歌，但退货却无法正常工作。当我尝试在贝宝的沙盒中支付某些东西时，它不会返回......</p>

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T06:15:10.610

转到您的 PayPal 商家帐户--> 个人资料--> 销售首选项--> 网站支付首选项--> 网站支付的自动退货将单选按钮打开，默认应该关闭。我希望这对您有所帮助。

# javascript - 在 Ruby on Rails 3 中实现“条款和条件”弹出窗口

> ID：12693930
> 
> 赞同：0
> 
> 时间：2012-10-02T15:59:46.597
> 
> 标签：javascript, ruby-on-rails, popup, hyperlink

我的 RoR 应用程序要求用户在上传内容之前勾选“条款和条件”复选框。

我想做的是在一个非常简单的弹出选项卡中显示“条款和条件”内容，[如此处所实现的](http://www.sitepoint.com/perfect-pop-up/)（并且不需要 jQuery 或任何其他库，因为我不会让你感到厌烦与，我想避免）但是，作为一个 Rails 菜鸟，我很难确定一个合适的，以及“干净”的解决方案。

非 Rails HTML 如下（我已经处理了 JavaScript）：

```
<a href="popup_content.htm" onclick="popUp(this.href,'console',400,200); 
return false;" target="_blank">Link which opens popup</a> 
```

我的问题如下：

1.  我在哪里存储包含条款和条件文本的 HTML 文件？
2.  如何使用 link_to 在相关表单中提供指向弹出窗口的链接？

从我的第一个查询开始，我需要创建一个纯 HTML 页面 (popup_content)，它只包含标题（条款和条件）和段落内容

元素。我有一个静态页面控制器，但我认为在这里创建条款和条件视图不合适，因为这意味着该页面将呈现为带有菜单等的标准页面，就像我的其他静态页面一样。我尝试在文件夹中放置一个简单的`_terms.html.erb`页面`Layouts`，但是当在弹出窗口中打开该页面时，这会返回一条错误消息。

那么我应该把这个 HTML 文件放到哪个文件夹中呢？

我想我已经解决了我的第二个查询，但我不确定我`link_to`是否正确使用了 Helper：

`link_to "Click me to display terms and conditions", "[wherever the resultant file should` `be]/terms.html", :onclick => "javascript function to display the popup", :target => "_blank"`

任何建议都会很有用 - 干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:13:52.330

您可以使用 link_to_function 显示弹出窗口：（[请参阅此处的文档](http://apidock.com/rails/ActionView/Helpers/JavaScriptHelper/link_to_function)）

> “返回一个链接，其 onclick 处理程序触发传递的 JavaScript。”

在你的情况下：

```
link_to_function 'Term&Conditions', "popUp('/popups/_terms_conditions.html', 'console', 400, 200);" 
```

有了这个，你必须创建一个像这样的目录“弹出窗口”：`app/views/popups`和一个部分视图“_terms_conditions.html”

希望这对你有用！

# entity-framework - 实体框架中的行版本比较

> ID：12693934
> 
> 赞同：12
> 
> 时间：2012-10-02T15:59:57.140
> 
> 标签：entity-framework, c#-4.0, rowversion

`rowversion`我应该如何使用实体框架比较字段？我有一个包含一`rowversion`列的表，我想从行版本高于指定值的表中获取数据。

```
byte[] rowversion = ... some value;
 _context.Set<T>().Where(item => item.RowVersion > rowVersion); 
```

此行不起作用，它会引发错误：

> *运算符 '>' 不能应用于 'byte[]' 和 'byte[]' 类型的操作数*

知道如何比较`rowversion`C#/Entity Framework 中的字段吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-03-13T14:01:58.113

这是我们为解决这个问题所做的。使用这样的比较扩展：

```
public static class EntityFrameworkHelper
{
    public static int Compare(this byte[] b1, byte[] b2)
    {
        throw new Exception("This method can only be used in EF LINQ Context");
    }
} 
```

然后你可以这样做：

```
byte[] rowversion = .....somevalue;
_context.Set<T>().Where(item => item.RowVersion.Compare(rowversion) > 0); 
```

这在没有 C# 实现的情况下工作的原因是因为`Compare`从未实际调用扩展方法，并且 EF LINQ 简化`x.Compare(y) > 0`为`x > y`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:21:24.373

你确定这是对 RowVersion 的犹太洁食吗？翻车时会发生什么？

我认为您需要先将其转换为字符串或整数。例如

```
Encoding.Unicode.GetString(ba) 
```

您也可以从 EF 调用 SP。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T15:29:17.947

使用 EntitySQL。

```
// Drop down to ObjectContext and query against ObjectSet:
var objectContext = (dbContext as IObjectContextAdapter).ObjectContext;
// Create param for EntitySQL
var param = new ObjectParameter("rowVersion", rowVersion);
// Create IQueryable<T>
var query = objectContext.CreateObjectSet<T>.Where("it.RowVersion > @rowVersion",param); 
```

# titanium - 如何清除 Titanium for iOS 中的通知中心？

> ID：12693935
> 
> 赞同：1
> 
> 时间：2012-10-02T16:00:00.670
> 
> 标签：titanium, titanium-mobile

我有基本的推送通知发送到我的应用程序。我想知道是否有办法在打开应用程序时清除通知中心的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:56:10.663

在那里您可以使用`Ti.UI.iPhone.appBadge = 0;`重置设备中的 appBagde。从 3.x 开始，Appcelerator 添加了一个新功能来重置 Appcelerator 服务器上的徽章。

[Cloud.PushNotifications.setBadge()](http://docs.appcelerator.com/cloud/latest/#!/api/PushNotifications-method-set_badge)方法允许用户设置徽章，[Cloud.PushNotifications.resetBadge()](http://docs.appcelerator.com/cloud/latest/#!/api/PushNotifications-method-reset_badge_put)将在通知中心重置徽章。

# iphone - 同步Iphone中两个或多个AVAudioPlayer的播放

> ID：12693937
> 
> 赞同：0
> 
> 时间：2012-10-02T16:00:12.813
> 
> 标签：iphone, objective-c, synchronization, avaudioplayer

我需要在同一时间用 2 个 AVAudioPlayer 对象播放 2 个声音......所以我在 Apple AVAudioPlayer 类参考（https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/ AVAudioPlayerClassReference/Reference/Reference.html）：

```
- (void) startSynchronizedPlayback {

NSTimeInterval shortStartDelay = 0.01;            // seconds

NSTimeInterval now = player.deviceCurrentTime;

[player       playAtTime: now + shortStartDelay];

[secondPlayer playAtTime: now + shortStartDelay];

// Here, update state and user interface for each player, as appropriate

} 
```

我不明白的是：为什么 secondPlayer 也有 shorStartDelay？不应该没有吗？我认为第一个玩家需要 0.1 秒的延迟，因为它在第二个玩家之前被调用......但是在这段代码中，2 个玩家有延迟......如果这是正确的，任何人都可以解释我，为什么？非常感谢马西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:19:48.313

如果只使用播放方法（[firstPlayer play];），firstPlayer 将在第二个之前启动，因为它会在之前收到调用。

如果您没有设置延迟（[firstPlayer playAtTime:now];），那么 firstPlayer 也会在第二个之前开始，因为 firstPlayer 会检查它应该开始的时间，并且会看到它已经过去了。因此，它将具有与仅使用 play 方法时相同的行为。

延迟在这里是为了确保两个玩家同时开始。它应该足够长以确保两个玩家在“现在+延迟”时间过去之前收到呼叫。

我不知道我是否清楚（英语不是我的母语）。如果您有问题，我可以尝试更清楚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-10T21:31:22.717

是的，他说的 ^ 当时的比赛将安排两名球员在那个时候开始（将来的某个时间）。

为了清楚起见，您可以将“shortStartDelay”设置为 2 秒，您会看到在两个项目开始播放之前会有两秒的暂停。

这里要记住的另一个提示是，当您播放/暂停 AVAudioPlayer 时，它们实际上并没有在完​​全相同的时间停止。因此，当您想恢复时，您还应该同步音轨。

快速示例：

```
 let currentDeviceTime = firstPlayer.deviceCurrentTime
                        let trackTime = firstPlayer.currentTime
                        players.forEach {
                            $0.currentTime = trackTime
                            $0.play(atTime: currentDeviceTime + 0.1)
                        } 
```

其中 player 是 AVAudioPlayers 列表， firstPlayer 是数组中的第一项。

请注意，我还如何重置“currentTime”，即您想要继续播放音轨的秒数。否则，每次用户播放/暂停曲目时，他们都会失去同步！

# jboss7.x - JBoss 7.1.1 重新启动时取消部署

> ID：12693940
> 
> 赞同：1
> 
> 时间：2012-10-02T16:00:23.897
> 
> 标签：jboss7.x

出于某种原因，我们的独立 JBoss 7.1.1 在关机/重启时取消部署我的 war 文件。

使用远程机器上的 maven 进行部署（jboss-as-maven-plugin）。

使用本地 cli 9999 关闭命令进行停止。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:52:49.613

我终于明白为什么会这样了。我不仅重新启动，还替换/更新了我的配置文件。但是在更新的文件中缺少部署部分。然后它接缝jboss没有重新部署war文件。

配置和部署信息在同一个文件中的问题，这里没有关注点分离。

# android - 启动器应用程序和主页键不一致

> ID：12693941
> 
> 赞同：4
> 
> 时间：2012-10-02T16:00:28.157
> 
> 标签：android, android-manifest, android-launcher

我一直在构建一个包含许多活动的启动器应用程序。我希望主页按钮始终将用户带回 mainActivity，当按下主页键并且他们将我的应用程序设置为默认启动器时。这在 90% 的情况下都有效，但一段时间后 home 键最终停止工作。它会记录用户的按下，但不再将它们返回到 mainactivity。这是什么原因让我回避了……我们已经尝试了几个月以某种一致性重新创建错误，但无济于事。我们无法弄清楚是什么原因导致它停止工作.. 下面是我的清单。我想知道我是否缺少某种标志或其他东西。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sapientnitro.lcinstore2"
    android:configChanges="keyboard|uiMode"
    android:versionCode="4"
    android:versionName="4.0" >

<uses-sdk android:minSdkVersion="15" />

<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
<uses-permission android:name="android.permission.VIBRATE" />

<uses-feature android:name="android.hardware.camera" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity
        android:name=".activities.LCInStore2Activity"
        android:alwaysRetainTaskState="true"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.MainActivity"
        android:configChanges="keyboard|uiMode"
        android:label="Main"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.Authenticate"
        android:label="Authenticate"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.AUTHENTICATE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.Settings"
        android:label="Settings"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.SETTINGS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.CustomerHome"
        android:label="CustomerHome"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.CUSTOMERHOME" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.CustomWebView"
        android:label="CustomWebView"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.CUSTOMWEBVIEW" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.CustomCamera"
        android:label="CustomCamera"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.CUSTOMCAMERA" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.FavoritesCustomer"
        android:label="FavoritesCustomer"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.FAVORITESCUSTOMER" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.FavoritesAssociate"
        android:label="FavoritesAssociate"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.FAVORITESASSOCIATE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.Browser"
        android:hardwareAccelerated="true"
        android:label="Browser"
        android:screenOrientation="landscape" >

        <!-- android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> -->
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.BROWSER" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.VideoViewer"
        android:label="Video Viewer"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.VIDEOVIEWER" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.GalleryOneUp"
        android:label="GalleryOneUp"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.GALLERYONEUP" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.GalleryFourUp"
        android:label="GalleryFourUp"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.GALLERYFOURUP" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.GeneralRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="GeneralRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.GeneralRX" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.SunglassRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="SunglassRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.SunglassRX" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.ComputerRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="ComputerRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.ComputerRX" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.NightGlassesRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="NightGlassesRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.NightGlassesRX" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.ActiveRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="ActiveRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.ActiveRX" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.SafetyRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="SafetyRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.SafetyRx" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.ContactRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="ContactRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.ContactRx" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.SettingsRx"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:label="SettingsRx"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.SettingsRX" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <receiver android:name=".SettingsReceiver" >
    </receiver>

    <activity
        android:name=".activities.CEETraining"
        android:label="@string/title_activity_ceetraining"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.CeeTraining" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.BrandTraining"
        android:label="@string/title_activity_brand_training"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.BrandTraining" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.LensTraining"
        android:label="@string/title_activity_lens_training"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.LensTraining" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.MakeAbility"
        android:label="@string/title_activity_makeability"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.Makeability" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activities.MakeabilityResults"
        android:label="@string/title_activity_makeability_results"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="com.sapientnitro.lcinstore2.activities.Makeabilityresults" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:34:02.993

我相信您遇到的问题可以通过将您的家庭更换的主要活动作为一项任务来解决。

为此，您可以在清单中添加以下行作为主要活动的一部分：`launchMode="singleTask"` 可以在[此处](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)找到有关此功能的说明。

现在，每当您的应用收到主页按键事件并且应用未运行时，它都会使用`onCreate`. 如果应用程序已经在前台运行或处于挂起状态，`onNewIntent`将在您的主活动中调用并将其带到最前面。

# php - Ant Build File Migrate Doctrine（要求是/否）

> ID：12693942
> 
> 赞同：0
> 
> 时间：2012-10-02T16:00:31.330
> 
> 标签：php, ant, doctrine-orm, jenkins, zend-framework2

所以我在我的 ant 构建文件中有这个目标：

```
<target name="migrate" description="Migrate the database">
    <exec executable="${basedir}/vendor/bin/doctrine-module" failonerror="true">
        <arg line="migrations:migrate"/>
    </exec>
</target> 
```

教义迁移命令在运行之前提出一个问题并期待是或否的答案。所以我的构建失败了：

```
richard@richard-desktop:~/projects/myproject$ ant migrate
Buildfile: /home/richard/projects/myproject/build.xml

migrate:
     [exec]                                                            
     [exec]                     Doctrine Migrations                    
     [exec]                                                            
     [exec] 
     [exec] 
     [exec] 
     [exec]                       
     [exec]   [RuntimeException]  
     [exec]   Aborted             
     [exec]                       
     [exec] 
     [exec] 
     [exec] migrations:migrate [--write-sql] [--dry-run] [--configuration[="..."]] [--db-configuration[="..."]] [version]
     [exec] 
     [exec] 
     [exec] WARNING! You are about to execute a database migration that could result in schema changes and data lost. Are you sure you wish to continue? (y/n)

BUILD FAILED
/home/richard/projects/myproject/build.xml:42: exec returned: 1

Total time: 0 seconds
richard@richard-desktop:~/projects/myproject$ 
```

我怎样才能让 ant 自动回答这个问题，以便它运行迁移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:54:32.660

其实很简单：

```
<target name="migrate" description="Migrate the database">
    <exec executable="${basedir}/vendor/bin/doctrine-module" failonerror="true">
        <arg line="migrations:migrate --no-interaction"/>
    </exec>
</target> 
```

# java - java中的空指针异常字符串二维数组

> ID：12693943
> 
> 赞同：5
> 
> 时间：2012-10-02T16:00:35.447
> 
> 标签：java, arrays, string, 2d

```
public String[][] fetchData()
{
    String[][] data = null;
    int counter = 0;
    while (counter < 10){
        data[counter] = new String[] {"abc"};
        counter++;
    }
    return data;
} 
```

在这个循环中得到错误。请让我知道我错在哪里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:01:57.977

您需要为数据分配内存。

```
String[][] data = new String[ROW][COLUMN]. 
```

读[这个](http://www.leepoint.net/notes-java/data/arrays/arrays-2D-2.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:02:25.833

```
String[][] data = null; 
```

==> 尝试写入数据时出现空指针异常

你可能会做

```
String[][] data = new String[10][]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:03:24.153

您获得了 NPE，因为您明确设置`data`为`null`：

```
String[][] data = null; 
```

您需要先分配行数：

```
String[][] data = new String[][NUMBER_OF_ROWS]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T19:06:20.090

```
data[counter] = new String[] {"abc"}; 
```

在这里，您将“abc”放入数组，但是如果它只有一个单元格，为什么要使用数组呢？

```
data[counter] = new String("sample string"); 
```

就足够了。而且你还需要将“数据”声明为一维数组。

# c# - 停止从 AutoCompleteExtender 对 DB 的多次调用

> ID：12693945
> 
> 赞同：0
> 
> 时间：2012-10-02T16:00:40.763
> 
> 标签：c#, asp.net, ajax, caching, autocompleteextender

我似乎在这方面找不到太多帮助。当用户将击键添加到搜索文本框时，我正在使用 .net 中的自动完成扩展器来建议搜索框的选项。这很好用，尽管每次按下一个键都会发送一个对 DB 的新调用。

这很好，直到网站用户数量开始变高！因此，我将缓存与 datatable.select 一起使用，而不是每次都往返于数据库。

如果缓存不存在，则创建它，然后每次使用缓存。

但是，现在的问题是，在第一个访问者创建缓存时到达的所有用户都假设没有缓存并开始尝试创建自己的同名缓存，从而再次使数据库超载！

是否有关于解决此问题的最佳方法的任何指示？

谢谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:23:53.760

将您的数据库连接字符串设置为池。像这样：

```
<add name="YourConnectionString" connectionString="data source=ServerAddress;UID=UserID;PWD=Password;DATABASE=YourDataBase;Min pool size=5;Max pool size=20;connection timeout=15;pooling=yes" /> 
```

看看这是否有助于性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:37:32.467

根据您的数据的静态程度，您可以在 application_start 或类似的地方启动缓存。（就像@pinoy_ISF 建议的那样）。

您还可以设置应用程序级别的标志，指示您当前是否正在构建缓存，如果是，则直接转到数据库而不更新缓存。完成缓存构建后，恢复标志，后续请求应该正常命中缓存。

# javascript - 如何使用 $.ajax 发送 JSON 而不是查询字符串？

> ID：12693947
> 
> 赞同：183
> 
> 时间：2012-10-02T16:00:46.053
> 
> 标签：javascript, jquery, json, query-string

有人可以简单地解释一下如何让 jQuery 发送实际的 JSON 而不是查询字符串吗？

```
$.ajax({
    url      : url,
    dataType : 'json', // I was pretty sure this would do the trick
    data     : data,
    type     : 'POST',
    complete : callback // etc
}); 
```

这实际上会将您精心准备的 JSON 转换为查询字符串。令人讨厌的事情之一是`array: []`对象中的任何内容都将转换为`array[]: []`，这可能是由于查询字符串的限制。

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-10-02T16:02:46.813

您需要[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)先将您的对象序列化为 JSON，然后指定`contentType`以便您的服务器理解它是 JSON。这应该可以解决问题：

```
$.ajax({
    url: url,
    type: "POST",
    data: JSON.stringify(data),
    contentType: "application/json",
    complete: callback
}); 
```

请注意，该`JSON`对象在支持 JavaScript 1.7 / ECMAScript 5 或更高版本的浏览器中本机可用。如果您需要旧版支持，您可以使用[json2](https://github.com/douglascrockford/JSON-js)。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-02T16:05:30.043

不，该[`dataType`选项](http://api.jquery.com/jQuery.ajax/)用于解析接收到的数据。

要发布 JSON，您需要自己对其进行字符串化，[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)并将`processData`选项设置为`false`.

```
$.ajax({
    url: url,
    type: "POST",
    data: JSON.stringify(data),
    processData: false,
    contentType: "application/json; charset=UTF-8",
    complete: callback
}); 
```

请注意，并非所有浏览器都支持该`JSON`对象，虽然 jQuery 有`.parseJSON`，但它没有包含字符串化；你需要另一个 polyfill 库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-03T19:40:11.843

虽然我知道像 ASP.NET MVC 这样的许多架构都有内置的功能来处理 JSON.stringify 作为 contentType 我的情况有点不同所以也许这可能对将来的某人有所帮助。我知道这会节省我几个小时！

由于我的 http 请求是由来自 IBM（AS400 环境）的 CGI API 在不同子域上处理的，因此这些请求是跨源的，因此是 jsonp. 我实际上是通过 javascript 对象发送我的 ajax。这是我的 ajax POST 示例：

```
 var data = {USER : localProfile,  
        INSTANCE : "HTHACKNEY",  
        PAGE : $('select[name="PAGE"]').val(), 
        TITLE : $("input[name='TITLE']").val(), 
        HTML : html,
        STARTDATE : $("input[name='STARTDATE']").val(), 
        ENDDATE : $("input[name='ENDDATE']").val(),
        ARCHIVE : $("input[name='ARCHIVE']").val(), 
        ACTIVE : $("input[name='ACTIVE']").val(), 
        URGENT : $("input[name='URGENT']").val(), 
        AUTHLST :  authStr};
        //console.log(data);
       $.ajax({
            type: "POST",
           url:   "http://www.domian.com/webservicepgm?callback=?",
           data:  data,
           dataType:'jsonp'
       }).
       done(function(data){
         //handle data.WHATEVER
       }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T13:53:15.907

如果您将其发送回 asp.net 并需要 request.form[] 中的数据，那么您需要将内容类型设置为“application/x-www-form-urlencoded; charset=utf-8”

原帖[在这里](https://stackoverflow.com/questions/14095041/jquery-ajax-call-for-posting-data-to-asp-net-page-not-get-but-post)

其次摆脱数据类型，如果您不期望返回，则 POST 将在失败前等待大约 4 分钟。看[这里](https://stackoverflow.com/questions/1969476/ajax-success-event-not-working)

# javascript - Javascript：对 setInterval 和 onComplete 重要的函数声明类型？

> ID：12693954
> 
> 赞同：0
> 
> 时间：2012-10-02T16:01:06.413
> 
> 标签：javascript, jquery, function, events

我的问题基本上是对这个问题的扩展： [var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/q/336859/1714755)。我已经阅读了所有答案，但我认为我仍然错过了这个问题的答案：

为什么函数声明的类型对于 jQuery 的 onComplete 事件和原生 setInterval 方法很重要？此外，为什么对这些很重要，而对普通的 addEventListener 却没有？

带有 onComplete 事件的示例（假设`blinkOn()`被调用）：

```
//like this the onComplete event works normally and the functions call eachother
function blinkOn() { $blink.fadeIn( 500, blinkOff ); }
function blinkOff() { $blink.fadeOut( 500, blinkOn ); }

//like this blinkOff won't be called after the fadeIn
function blinkOn() { $blink.fadeIn( 500, blinkOff ); }
var blinkOff = function() { $blink.fadeOut( 500, blinkOn ); }; 
```

使用 setInterval 的示例：

```
//works fine
var timer = setInterval( onTimer, 700);
function onTimer() { ... }

//won't work
var timer = setInterval( onTimer, 700);
var onTimer = function() { ... } 
```

我想知道的原因是因为我希望我的代码保持一致。如果获得它的唯一方法就是使用`function a() { ... }`，那没关系。但我认为`var a = function() { ... }`在定义范围时更清楚。我真的很好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:41:37.217

如果您要在调用函数的位置上方定义函数，则不会有任何问题。

var toggleLight = function () { light = !light; };

setInterval(toggleLight, 500);

您的问题是您正在尝试访问尚不存在的东西。

这与尝试执行此操作完全相同：

```
var c = a + b,

    a = 12,
    b = 3; 
```

当程序命中`c`时，`a`不`b`存在。

对于每个单独的功能，可以将其想象为分三个步骤进行：

```
var a = 12,
    b = 3,
    c = add(a, b);

function add (a, b) { return a + b; } 
```

**步骤 1.**
引擎获取命名函数`add`并计算出它的作用（首先定义所有命名函数）。

**步骤 2.**
引擎定位函数中的所有变量并将它们设置为`undefined`：

```
var a = undefined,
    b = undefined,
    c = undefined;

function add(a, b) { return a + b; } 
```

**STEP 3.**
引擎按顺序初始化所有变量。

```
// 3.1
var a = 12,
    b = undefined,
    c = undefined;

// 3.2
var a = 12,
    b = 3,
    c = undefined;

// 3.3
var a = 12,
    b = 3,
    c = add(a, b); // = return a + b = 15 
```

所以做这样的事情：

```
callFunction(myFunc);
var myFunc = function () {}; 
```

等于：

```
var myFunc = undefined;
callFunction(myFunc);
myFunc = function () {}; 
```

**解决方案：**

将您的实施与您的行动分开。在调用任何内容之前，请确保所有内容都已定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:16:31.987

命名函数是在任何地方创建的，因此它们在定义它们的范围内变得全局可用，因为分配给标识符的匿名函数只有在定义了它们绑定到的标识符后才可用。

所以你遇到的是一个简单的竞争条件问题。如果在变量定义`blinkOn()`之后调用，您的第一个非工作示例应该可以工作。`blikOff`

您的第二个非工作示例不起作用，因为在调用时尚`onTimer`未定义。`setInterval`在调用之前移动变量定义`setInterval`，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:28:24.900

```
//like this blinkOff won't be called after the fadeIn
function blinkOn() { $blink.fadeIn( 500, blinkOff ); }
var blinkOff = function() { $blink.fadeOut( 500, blinkOn ); }; 
```

它会被调用。你只需要确保在分配之前（上面）`blinkOn`没有*调用*（引用是好的）。

# xcode - 类之间的 NSString

> ID：12693956
> 
> 赞同：1
> 
> 时间：2012-10-02T16:01:11.500
> 
> 标签：xcode, class, nsstring

我需要在我的应用程序的两个类（从 ViewController Class_A 到 ViewController Class_B）之间传递一个 NSString，我在 StackOverflow 上进行了搜索，但这是我的情况的简化代码：

Class_A.h

```
#import "Class_B.h"

@interface ViewController : UIViewController {
    NSString *stringToPass;
}

@property (retain, nonatomic) NSString *stringToPass;
-(NSString *)stringPassage:(id)sender;

@end 
```

Class_A.m

```
- (NSString *)stringPassage:(id)sender{
    NSString *string = @"A FANTASTIC STRING!"; //here I define string INTO the - (NSString *) method
    NSLog(@"String to pass: %@",string);
    return string;
} 
```

Class_B.h

```
#import "Class_A.h" 
```

Class_B.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    Class_A *Class_A_Instance = [[Class_A alloc] init];
    NSString *importedString = [Class_A_Instance stringPassage:self];
    [Class_A_Instance release];

    NSLog(@"Received String: %@",importedString);

    // Do any additional setup after loading the view from its nib.
} 
```

好吧，它就像一个魅力！加载 Class_B 时，我可以在日志输出中读取“要传递的字符串：一个 FANTASTIC STRING！” 和“收到的字符串：一个神奇的字符串！”；但是如果我只更改这部分代码（我需要它！）：

Class_A.m

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    stringToPass = @"ANOTHER FANTASTIC STRING!";

        // Do any additional setup after loading the view, typically from a nib.
   }

- (NSString *)stringPassage:(id)sender{
    NSString *string = stringToPass; // here I must call the string FROM another method of Class_A (in this example from - (void)viewDidLoad
    NSLog(@"String to pass: %@",string);
    return string;
} 
```

我可以在日志输出中读取“要传递的字符串：（null）”和 obv“接收的字符串：（null）”；难以置信，因为我可以完美地将全局变量 *stringToPass 传递给 Class_A 的每个方法，除了这个 -(NSString *) 方法。那么问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:06:28.507

`- (void)viewDidLoad`直到你调用之后才会被调用`-(NSString *)stringPassage`。尝试`stringToPass = @"ANOTHER FANTASTIC STRING!";`进入`-(id)init`方法`Class_A`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:27:46.487

您正在调用`init`方法，而不是`viewDidLoad`方法。

如果将其添加到 Class_A，您将更接近：

```
-(id) init {
    self = [super init];
    if(self) {
        stringToPass = @"ANOTHER FANTASTIC STRING!";   
    }

    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:23:59.333

让我们有两个viewController，即FirstVC 和SecondVC。在 SecondVC 中创建一个字符串，

```
@interface SecondVC : UIViewController { NSString *string2pass; }

@property (retain, nonatomic) NSString *string2pass; 
```

在 FirstVC 中，当您要呈现 SecondVC 时，将字符串传递为，

```
- (void)presentSecondView 
  { 
    SecondVC *secondVC = [[SecondVC alloc]initWithNibName:@"SecondVC" bundle:nil]; 

    secondVC.string2pass = @"this is a passing string";

   [self presentModalViewController:resView animated:YES];

  }    
- (void)viewDidLoad 
  { 
      NSString *string4mFirstVC = string2Pass 
  } 
```

# javascript - 强制渲染/给浏览器一个短暂的休息？

> ID：12693960
> 
> 赞同：2
> 
> 时间：2012-10-02T16:01:27.160
> 
> 标签：javascript, jquery, jquery-ui, browser

假设您正在处理一堆数据，现在这将需要一些时间（在我的情况下，我通过 AJAX 访问多个资源，并在收到它们后用 RegExp 解析它们[解析是需要关键时间的]） .

您还想保证两件事：

*   浏览器不会感到冻结
*   用户有某种指标

我用 jQuery(UI) 做了下面的例子：

JS：

```
 $(function() {
     $("#progressbar").progressbar({
        value: 0
     });
     $("#blub").click(function() {
        i = 0;
        while(i < 5000) {
           $("#progressbar").progressbar({
              value: (i / 5000 * 100)
           });
           i++;
        }  
     });
  }); 
```

HTML：

```
<div id="progressbar"></div>
<div id="blub">KLICK</div> 
```

似乎浏览器只是在完全完成时才重新绘制其画布。CPU-Usage 也尽可能高。

有什么方法可以强制中断或减少 CPU 负载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:08:23.433

每次通过后，您应该使用`requestAnimationFrame`而不是`while`循环来呈现结果。

这是回退到[https://gist.github.com/1579671](https://gist.github.com/1579671)`requestAnimatonFrame`的polyfill`setTimeout`

这里是你如何替换你的`while`循环，它不允许屏幕刷新或渲染，直到它完成计算。

```
var i = 0;
animate();
function animate() {
    requestAnimationFrame(animate);
    $("#progressbar").progressbar({
         value: (i / 5000 * 100)
    });
    i++;
} 
```

# c# - 使用关联覆盖实体删除

> ID：12693961
> 
> 赞同：8
> 
> 时间：2012-10-02T16:01:31.627
> 
> 标签：c#, entity-framework, entity-framework-4

我正在尝试通过覆盖该`DbContext.SaveChanges()`方法并撤消删除实现我的`ISoftDelete`接口的任何实体来在我的项目中实现软删除功能。

```
interface ISoftDelete
{
  bool IsDeleted { get; set; }
} 
```

在该`SaveChanges()`方法中，我为处于“已删除”状态并实现的每个条目调用我的 SoftDelete() 方法`ISoftDelete`：

```
var entries = this.ChangeTracker.Entries().Where(x => (x.State == EntityState.Deleted) && x.Entity is ISoftDelete)
                    .ToList();
                entries.ForEach(SoftDelete); 
```

我的`SoftDelete()`方法如下：

```
private void SoftDelete(DbEntityEntry entry)
{
    if (entry.State == EntityState.Deleted && entry.Entity is ISoftDelete)
    {
        entry.Reload();
        var entity = (ISoftDelete)entry.Entity;
        entity.IsDeleted = true;
        entry.State = EntityState.Modified;
    }
} 
```

这将完美地工作，直到我遇到一个与其他事物具有一对一关联的实体。此时，将引发异常并出现此错误：

> {“来自 'ChildParent' AssociationSet 的关系处于 'Deleted' 状态。给定多重约束，相应的 'Parent' 也必须处于 'Deleted' 状态。”}

有没有办法获取该实体的所有关联并更改它们的已删除状态？

我已经尝试获取对实际关联实体的引用，但实体的`EntityState`设置为`Unchanged`而不是`Deleted`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:16:23.973

一般来说，您需要先软删除父子关系中的子项。从最顶层的父级开始，然后递归遍历子级。标记访问的每个项目，以便您可以跟踪它是否已被软删除（以防反向引用）。

如果您有“业务对象”概念，您可以添加`Childs`和`Parent`属性以便于导航。否则，您将不得不在每个具有非平凡子关系的父级上“手动编码”。

另请注意，使用一个 LINQ 语句，您无法控制实际的遍历。

我知道上面的工作似乎很多，但考虑一下如何在 EF 中设计一种机制来自动推断所需的关系信息？！你最终会正确地做这样的事情。

# sql - 来自 SQL Server 存储过程的 Excel 中的表，工作簿中带有参数字段

> ID：12693967
> 
> 赞同：14
> 
> 时间：2012-10-02T16:01:54.287
> 
> 标签：sql, sql-server-2008, excel, stored-procedures, excel-2010

我需要使用 Excel 2010 和 SQL Server 创建动态报告。摆脱其他人创建的以前的内容，我想出了如何创建数据连接并在连接属性定义选项卡中使用带有特定参数的存储过程。其他报表`?`在命令定义中使用 a 并使用工作簿中的单元格来定义参数。

我该怎么做呢？

创建连接/报告/参数选择的具体步骤或非常感谢的任何帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T14:23:07.330

我使用以下链接博客文章中提供的步骤使其工作。

[http://codebyjoshua.blogspot.com/2012/01/get-data-from-sql-server-stored.html](http://codebyjoshua.blogspot.com/2012/01/get-data-from-sql-server-stored.html)

此处复制的步骤以防将来链接中断。

Excel 2007 说明：

1.  选择 Excel 功能区上的“数据”选项卡，然后在“获取外部数据”组中选择“来自其他来源”下拉菜单。然后选择“来自 Microsoft Query”

2.  在“选择数据源”弹出框中，选择您的 SQL Server，然后单击“确定”。

3.  如有必要，关闭“添加表”弹出窗口。

4.  单击“SQL”按钮，或选择“查看”>“SQL”以打开 SQL 弹出编辑器。

5.  输入以下语法：{CALL myDatabaseName.dbo.myStoredProc (?, ?, ?)}

    例如：{CALL northwind.dbo.spGetMaxCost (?, ?, ?)}

    确保在调用语句周围包含波浪形的大括号。每个问号 (?) 表示一个参数。如果您的存储过程需要更多或更少的参数，请根据需要添加或减去问号。

6.  点击确定按钮。应该会弹出一个问题框，上面写着“SQL 查询无法以图形方式表示，仍然继续吗？”，只需点击 OK 按钮。

7.  现在将要求您为上面包含的每个问号提供示例参数。为您正在查询的数据输入有效的参数值。

8.  输入最后一个参数后，您应该会在 Microsoft Query 中返回一些结果。如果它们看起来不错，请关闭 Microsoft Query。

9.  您现在应该正在查看“导入数据”弹出窗口。单击“属性”按钮，将弹出“连接属性”弹出窗口。

10.  选择定义选项卡，然后选择参数按钮。您现在应该会看到一个“参数”弹出窗口，您可以在其中将参数连接到特定单元格。

11.  选择从以下单元格获取值，然后通过单击带有箭头的小框连接到 Excel 中将保存您的参数的适当单元格。

12.  如果您希望每次更改包含参数的单元格时都刷新数据，请选中“当单元格值更改时自动刷新”框

13.  对其他参数继续如上。完成后，单击确定，返回连接属性弹出窗口。单击“确定”返回“导入数据”弹出窗口，然后再次单击“确定”。

14.  您现在应该直接从存储过程中获得一些数据。

# tomcat - JSTL 错误 javax/servlet/jsp/jstl/core/LoopTag 使用 c:forEach tomcat ver7.0 时出错

> ID：12693969
> 
> 赞同：7
> 
> 时间：2012-10-02T16:02:00.063
> 
> 标签：tomcat, foreach, jstl, runtime-error

嗨，使用
eclipse juno，动态 Web 项目
apache Tomcat v7.0（它有自己的 jstl-1.2.1.jar）我收到此错误

```
javax.servlet.ServletException: java.lang.NoClassDefFoundError:  javax/servlet/jsp/jstl/core/LoopTag
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:343)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

当我尝试运行这个jsp代码时

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<c:forEach var="test" items="a,b,c">
${test}
</c:forEach>

</body>
</html> 
```

似乎看不到 jar 中的 javax.servlet.jsp.jstl.core.LoopTag 类
我已经阅读了一些关于过滤器阻止 javax.servlet 文件的内容，

任何帮助将不胜感激

* * *

好的，我想我已经找到解决方案 javax.servlet.jsp.jstl-1.2.1.jar
不包含 javax.servlet.jsp.jstl.core 类

jstl-1.2.jar 也需要添加

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-01T16:33:42.037

`javax.servlet.jsp.jstl-1.2.1.jar`不包含`javax.servlet.jsp.jstl.core`类。一定要添加[`jstl-1.2.jar`](http://grepcode.com/snapshot/repo1.maven.org/maven2/javax.servlet/jstl/1.2)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-16T21:53:35.027

如果您使用的是 Maven，请添加

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.1.2</version>
</dependency> 
```

到你的 pom.xml

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-25T10:00:49.977

如果你想使用 forEach，你应该在项目的 WEB-INF/lib 中添加两个库： Impl: taglibs-standard-impl-1.2.5.jar Spec: taglibs-standard-spec-1.2.5.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-11T11:20:21.010

我有一个类似的问题，使用条件标签 <c:if>。我只使用 taglibs-standard-impl-1.2.5.jar。

从[jstl.jar 下载页面](http://www.java2s.com/Code/Jar/j/Downloadjstljar.htm)下载 jstl.jar并将其添加到 Tomcat 的安装 lib 目录后，它就可以工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-29T08:39:55.733

我导入了从[http://tomcat.apache.org/download-taglibs.cgi](http://tomcat.apache.org/download-taglibs.cgi)下载的“taglibs-standard-impl-1.2.5.jar” ，我遇到了同样的错误。我尝试按照有限赎罪之前的建议导入“jstl-1.2.jar”，它起作用了。所以我比较了这两个罐子：

*   “jstl-1.2.jar”包含 3 个文件夹：“javax”、“META-INF”和“org”。
*   “taglibs-standard-impl-1.2.5.jar”仅包含 2 个文件夹：“META-INF”和“org”。

所以我尝试了swch的建议。我删除了 jstl-1.2.jar 并导入了“taglibs-standard-spec-1.2.5.jar”和“taglibs-standard-impl-1.2.5.jar”。

这解决了这个问题，因为“spec”库包含“javax”文件夹，其中包含所需的类。

# bash - 将作为基本拉丁语一部分的 unicode 十六进制代码打印为 Bash 中的符号

> ID：12693970
> 
> 赞同：4
> 
> 时间：2012-10-02T16:02:02.727
> 
> 标签：bash

我有一个列表，其中包含符号和 unicode 数字的混合（长度均为 4），其中一些是基本拉丁语的一部分。我想将它们全部打印为符号。

我尝试使用 Bash（在 Cygwin 下）失败的示例：

```
list="0 3 4 5 005e 0060 00ff"
$ for c in $list; do [[ ${#c} = 4 ]] && env printf "\\u$c\n" || echo $c; done
0
3
4
5
printf: invalid universal character name \u005e
005e
`
ÿ 
```

无论终端中的语言环境和编码如何，我都会遇到同样的问题。

我无法从 askununtu 得到这个问题的答案：[https ://askubuntu.com/questions/20806/why-does-printf-report-an-error-on-all-but-three-ascii-range- unicode 码点](https://askubuntu.com/questions/20806/why-does-printf-report-an-error-on-all-but-three-ascii-range-unicode-codepoint)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:31:45.520

此修复将允许您使用任何编码中的任何字符：

```
list="0 3 4 5 005e 0060 00ff"
for c in $list; do
    if [ ${#c} = 4 ]; then
        echo 0 "$c" | xxd -r | iconv -f UNICODEBIG -t UTF-8
        echo
    else
        echo "$c"
    fi
done 
```

带有 -r 选项的 xxd 将十六进制文本转换为字节。它需要行号，这就是回显中的前导 0。在这种情况下，xxd 输出 c 指示的两个字节。

xxd 的结果通过管道传送到 iconv。iconv 将一种编码转换为另一种编码。UNICODEBIG 是第一个字节最高有效的两字节 unicode 字符。UTF-8 是要转换为的编码。（如果您不使用 UTF-8，请替换终端的编码）。这会将字符转换为指定的编码。

这个技巧使您可以完全自由地以任何支持它的编码对从 0000 到 ffff 的任何 unicode 字符进行编码。

编辑：使用 xxd 找到了一种更简单的方法。新方式如上图，旧方式在这里：

```
echo -ne \\x"${c:0:2}"\\x"${c:2:2}" | iconv -f UNICODEBIG -t UTF-8 
```

# google-chrome-extension - 为什么这个匹配不适用于 css 文件

> ID：12693972
> 
> 赞同：0
> 
> 时间：2012-10-02T16:02:10.300
> 
> 标签：google-chrome-extension

> **可能重复：**
> [我的 CSS 没有通过我的内容脚本注入](https://stackoverflow.com/questions/9721344/my-css-is-not-getting-injected-through-my-content-script)

**清单.json**

```
{
    "name": "TESTE",
    "version": "0.0.0.1",
    "manifest_version": 2,
    "description": "Description",
    "content_scripts": [
        {       
            "matches": ["http://*/*wss"],// <<---------
            "css": ["style.css"],
            "js":["alert.js"]
        }       
    ],
    "permissions": ["tabs", "<all_urls>","http://*/*"]
} 
```

js文件运行良好，但如果我把通用匹配放在css就像

```
"matches":["http://*/*"] 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:22:48.220

这是一个存在一年多的[已知错误。](http://code.google.com/p/chromium/issues/detail?id=68561)

对此的临时解决方案是从内容脚本 javascript 中注入 CSS：

```
var link=document.createElement("link");
link.setAttribute("rel", "stylesheet");
link.setAttribute("type", "text/css");
link.setAttribute("href", chrome.extension.getURL("main.css"));

document.getElementsByTagName("head")[0].appendChild(link); 
```

# activiti - Activiti 5.9 BPM Production 准备好了吗？

> ID：12693973
> 
> 赞同：1
> 
> 时间：2012-10-02T16:02:11.213
> 
> 标签：activiti

我们正在为我们的生产系统评估 BPM 2 产品。我们正在寻找 Activiti 5.9 作为 jBPM 5.x 的替代品。不确定 Activiti 5.9 是否已准备好生产。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:21:00.233

我们将 Siganvio 开源用于建模器，将 Activiti 用于我们的引擎。我们没有使用 Activiti 网络应用程序，因为我们发现它有问题，但它很适合测试。Activiti 有一些限制，但总体而言，API 简单易懂，易于掌握，社区提供了很多帮助，并且有不错的文档。我建议将“Activiti in action”作为一个很好的起点。有关更多信息，请参阅我的[博客](http://developer4life.blogspot.co.il/2012/02/activiti-authentication-and-identity.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:18:35.600

你是什​​么意思

> 生产就绪

如果您寻找专业的解决方案，我可能会建议[在这里使用 camunda fox](http://www.camunda.com/fox/product/overview/)

Activiti 提供了很多东西——但有了支持就不是那么容易了。

# asp.net - 如何使外部 div 具有与其内容 asp.net 按钮相同的提交行为

> ID：12693974
> 
> 赞同：0
> 
> 时间：2012-10-02T16:02:10.593
> 
> 标签：asp.net, html, input, submit

我有一个带有 asp.net 形式的圆角的 div，它包含一个用 asp.net 按钮编写的“提交”。

四个角不可点击，并且与“提交”按钮的行为不同。

我怎样才能使整个 div 可单击并具有与单击按钮相同的行为？

欢迎任何想法。

```
<div>
<a>
<span>
<input type="submit" onclick="javascript:WebForm_DoPostBackWithOptions....etc" value="Valider" name="">
</span>
</a>
</div> 
```

谢谢。

**编辑**：

因为我无法从 asp.net 按钮中获得相同的行为，所以我删除了包装器“a ,span”并使用了 asp:ImageButton。现在可以了。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:04:59.467

您可以尝试使用此功能 - 基于`click JQuery method`（在您的 div 上定义）

```
<script type="text/javascript">
$(document).ready(function(){
  $(".summary").click(function(){
    window.location = $(this).find("input").eq(0).attr('href');
  });
}); 
</script> 
```

注意：在您的输入中定义 href

添加到您的代码摘要类

```
<div class="summary">
<a>
<span>
<input type="submit" value="Valider" name="">
</span>
</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:16:33.230

您不能简单地查看提交按钮的 onclick 事件中的内容，然后使用 jquery 或在 html 中将其分配给 div click 事件吗？

就像是：

`$("#myDiv").click(WebForm_DoPostBackWithOptions....etc);`

或者

`<div id="myDiv" onclick='javascript:WebForm_DoPostBackWithOptions....etc' />`

您还必须添加`cursor:pointer`到 div 的样式以表明它是可点击的

# java - java.lang.IllegalStateException：提交响应后无法调用 sendRedirect()

> ID：12693975
> 
> 赞同：3
> 
> 时间：2012-10-02T16:02:11.790
> 
> 标签：java, jsp

这两天我试图找出问题所在。我在这里读到我应该在代码中添加一个返回，我做到了，我仍然得到

```
java.lang.IllegalStateException: Cannot call sendRedirect() 
     after the response has been committed, Error. 
```

我怎么解决这个问题？

每次我连接到数据库时都会发生这种情况。这是连接方法：

```
<%!

public  void connect()
{
        try {
            Class.forName("com.mysql.jdbc.Driver");
            String dbURL = "jdbc:mysql://localhost:3306/moti";
            String user = "root";
            String password = "j3o4h5n6y7";
            con =  DriverManager.getConnection(dbURL, user, password);  
            statement = con.createStatement();
        }
        catch(Exception ex) {
            throw new Error(ex);
        }  
}
%> 
```

就像在这个代码块中：

```
 String post = request.getParameter("send");
            if(post != null )
            {
                    connect();
                    statement.execute(add);
                    con.close();
                    response.sendRedirect("fourm.jsp");
                    return;

            } 
```

但在这段代码中完美地阻止了它的工作：

```
 String back = request.getParameter("retrun");

    if(back != null)
    {

        response.sendRedirect("fourm.jsp");
        return;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T16:48:33.350

从高层次上看，您的具体问题是由于您错误地使用 JSP 文件而不是[Servlet](https://stackoverflow.com/tags/servlets/info)类作为前端控制器而引起的。

从低层次看，您的具体问题是因为 JSP 在生成 HTML 代码并将其发送到 HTTP 响应期间作为视图技术发挥作用而引起的。响应缓冲区大小默认为 2KB。一旦代码到达该行，JSP 中的每个 HTML 和其他模板文本都会**立即**写入响应。因此，当第一次达到响应缓冲区大小限制时，所有 HTTP 响应标头和到目前为止编写的 HTML 代码将被发送到客户端（网络浏览器）。换句话说，响应已提交。这是一个不归路。根本不可能从客户端取回已经发送的字节。

重定向基本上是`Location`在 HTTP 响应上设置一个标头。为了能够正确设置它，响应显然必须尚未提交。如果它们都已被客户端发送和检索，则根本不可能设置新的响应标头。

从底层看，您可以通过将所有前端控制器和业务逻辑移动到 JSP 文件的最顶部来解决您的具体问题，以便在发送第一个 HTML 代码之前很久就执行它。这样，您就消除了在前端控制器和业务逻辑完成之前提交响应的风险。

```
<%@page pageEncoding="UTF-8" %>
<%
    // Write business code here.
%>
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Some</title>
    </head>
    <body>
        ... (no controller/business logic here! just pure presentation)
    </body>
</html> 
```

**但是**，这是一种[不好的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。而是将所有前端控制器和业务逻辑移动到[Servlet](https://stackoverflow.com/tags/servlets/info)中。那么你的方法从高层次上看是正确的。Java 代码不属于 JSP 文件，而是属于 Java 类。

# python - 二进制图像python中多个斑点的区域

> ID：12693982
> 
> 赞同：1
> 
> 时间：2012-10-02T16:02:32.577
> 
> 标签：python, opencv, blob, area

菜鸟在这里。

我有一个（某种）二进制图像，其中包含已知数量的形状和大小不同的斑点。每个 blob 中的像素值相当于 blob 索引。我想只处理（使用时刻）最大的 5 个 blob。

目前，我正在遍历每个连接的像素，并增加一个变量以获取每个 blob 的区域（请参见下面的代码）。然后，我只根据需要处理最大的 blob，但是这种像素迭代方法在 python 中非常慢。

```
 for i in range(1, objectCount):
            zm=0.0
            for h in range(im.height):
                for w in range(im.width):
                    pixVal = cv.Get2D(im, h, w)
                    if (pixVal[0] == i):
                        zm=zm+1
            objectArea.append([int(zm)]) 
```

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:32:56.687

这是替换上面的代码：

```
hist = cv.CreateHist([255], cv.CV_HIST_ARRAY, [[0,255]], 1)
cv.CalcHist([im] , hist)          
for h in range(255):
    zm = cv.QueryHistValue_1D(hist, h)
    objectArea.append([int(zm)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:31:51.107

由于您的像素值对应于 blob id，因此您可以计算图像的直方图并仅选择 5 个最高列以避免所有这些像素迭代。

要计算直方图，您可以使用 OpenCV 的[calcHist](http://docs.opencv.org/modules/imgproc/doc/histograms.html#calchist)方法。

[这](http://opencvpython.blogspot.it/2012/04/drawing-histogram-in-opencv-python.html)是一个使用示例。

# wpf - 隐藏在情节提要中后，WPF MediaElement 视频将无法播放

> ID：12693983
> 
> 赞同：0
> 
> 时间：2012-10-02T16:02:33.013
> 
> 标签：wpf, expression-blend

我将从描述问题开始，然后继续详细介绍我正在进行的过程。

**问题：**

我遇到了一个问题，我在一个情节提要上播放 MediaElement，然后将相同的 MediaElement 设置为隐藏在另一个情节提要中。将 MediaElement 设置为隐藏后，我无法再次重播该故事板的视频部分（非 MediaElement 动画仍然发生。）视频是在 VC-1 中以 10,000 Kbps 的分辨率以 1560x1004 的分辨率编码的 WMV，并与项目作为相对资产。

**细节：**

我正在开发一个 Kiosk 应用程序，该应用程序利用大量视频以及一些图形效果来实现实时动画。目前我正在使用 Blend 创建故事板，将视频分层以按所需顺序播放。下面详细介绍了页面中的两个示例故事板：

![打开故事板](../Images/e5ccb9c4b7e0eb08cb39e659bf6d1e6e.png) 打开执行以下操作：

1.  Set's meOpen 的可见性为 100%，可见
2.  将 meIn 的可见性设置为 1 秒时隐藏（屏蔽 meOpen 的开始）
3.  开始玩我在 0:00.900 打开。

![在此处输入图像描述](../Images/1bf0e598c6168b544bd3eff9094fc716.png)

在播放关闭故事板之前，播放打开故事板，系统等待用户输入继续。触发关闭后，将发生以下情况：

1.  meOpen - 在 1 秒时将其可见性设置为“隐藏”的 MediaElement
2.  meClose - 一个 MediaElement，它是要播放的所需视频。我让它在 meOpen 被隐藏之前稍微开始，以在元素加载视频时掩盖第一帧“黑框”
3.  其余的项目只是逐渐淡化覆盖元素的可见性。

故事板用于播放视频；但是，如果我再次尝试播放 Open 故事板，则 meOpen 不会播放。

谢谢

# jquery - Tinymce html5 占位符，通过从 textarea 读取属性

> ID：12693989
> 
> 赞同：7
> 
> 时间：2012-10-02T16:03:01.167
> 
> 标签：jquery, tinymce

对于标准文本区域，我使用这个[插件](https://github.com/danielstocks/jQuery-Placeholder)来创建一个占位符。我怎样才能扩展tinymce，以便它也能以这种方式工作。

例如，从 textarea 属性中读取默认值，然后在用户关注 iframe 时将其清除。

与 CKEditor 类似：[http://alfonsoml.blogspot.com.es/2012/04/placeholder-text-in-ckeditor.html](http://alfonsoml.blogspot.com.es/2012/04/placeholder-text-in-ckeditor.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-27T10:04:09.227

我使用它的 jquery 插件重构了 Tom Duke 的代码以在**TinyMCE4上工作**

```
$('textarea.tinymce').tinymce({
  script_url: _base + '/assets/js/tinymce/tinymce.min.js',
  theme: "modern",
  setup: function(editor) {
    // Set placeholder
    var placeholder = $('#' + editor.id).attr('placeholder');
    if (typeof placeholder !== 'undefined' && placeholder !== false) {
      var is_default = false;
      editor.on('init', function() {
        // get the current content
        var cont = editor.getContent();

        // If its empty and we have a placeholder set the value
        if (cont.length === 0) {
          editor.setContent(placeholder);
          // Get updated content
          cont = placeholder;
        }
        // convert to plain text and compare strings
        is_default = (cont == placeholder);

        // nothing to do
        if (!is_default) {
          return;
        }
      })
      .on('focus', function() {
        // replace the default content on focus if the same as original placeholder
        if (is_default) {
          editor.setContent('');
        }
      })
      .on('blur', function() {
        if (editor.getContent().length === 0) {
          editor.setContent(placeholder);
        }
      });
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T17:14:18.980

如果没有占位符属性，我会收到错误消息。

我结合了这个答案的代码： [jQuery hasAttr 检查元素上是否有一个属性](https://stackoverflow.com/questions/1318076/jquery-hasattr-checking-to-see-if-there-is-an-attribute-on-an-element)来获取下面处理该场景的修改后的代码：

```
setup: function(ed) {

// Set placeholder
var tinymce_placeholder = $('#'+ed.id);
var attr = tinymce_placeholder.attr('placeholder');

// For some browsers, `attr` is undefined; for others,
// `attr` is false.  Check for both.
    if (typeof attr !== 'undefined' && attr !== false) {
        var is_default = false;

        ed.onInit.add(function(ed) {
            // get the current content
            var cont = ed.getContent();

            // If its empty and we have a placeholder set the value
            if(cont.length == 0){
                ed.setContent(tinymce_placeholder.attr("placeholder"));

                // Get updated content
                cont = tinymce_placeholder.attr("placeholder");
            }

            // convert to plain text and compare strings
            is_default = (cont == tinymce_placeholder.attr("placeholder"));

            // nothing to do
            if (!is_default){
                return;
            }
        });

        ed.onMouseDown.add(function(ed,e) {
            // replace the default content on focus if the same as original placeholder
            if (is_default){
                ed.setContent('');
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T15:40:07.090

上面的答案对我不起作用，但这是我（对我来说）基于上面答案并使用 onchange_callback 的工作代码。希望它可以帮助某人！

```
onchange_callback : function(ed){
            var tinymce_placeholder = $('#' + ed.id).attr("placeholder");     
            setTimeout(function () {
                var content = ed.getContent().replace(/<p>|<\/p>/g, '');
                if (content == '') {
                    ed.setContent(tinymce_placeholder);
                }
            }, 200);
        },
        setup: function (ed) {
            // Set placeholder
            var tinymce_placeholder = $('#' + ed.id);
            if (tinymce_placeholder.length) {
                ed.onInit.add(function (ed) {
                    var cont = ed.getContent();
                    if (cont.length == 0) {
                        ed.setContent(tinymce_placeholder.attr("placeholder"));
                    }
                });
                ed.onMouseDown.add(function (ed, e) {
                    var content = ed.getContent().replace(/<p>|<\/p>/g, '');
                    if (content == tinymce_placeholder.attr("placeholder")) {
                        ed.setContent('');
                    }
                });
            }
        } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-24T06:07:28.027

试试这个代码：

为 tinyMCE 内联编辑器添加占位符文本：

```
 $scope.ContentOptions = {
    setup: function(editor) {

        editor.on('init', function () {
            // Default classes of tinyMCE are a bit weird
            // I add my own class on init
            // this also sets the empty class on the editor on init
            tinymce.DOM.addClass( editor.bodyElement, 'content-editor' );
        });

        // You CAN do it on 'change' event, but tinyMCE sets debouncing on that event
        // so for a tiny moment you would see the placeholder text and the text you you typed in the editor
        // the selectionchange event happens a lot more and with no debouncing, so in some situations
        // you might have to go back to the change event instead.
         editor.on('selectionchange', function () {
             if ( editor.getContent() === "" ) {
                 tinymce.DOM.addClass( editor.bodyElement, 'empty' );
             } else {
                 tinymce.DOM.removeClass( editor.bodyElement, 'empty' );
             }
         });
   }} 
```

视图中的 HTML 部分

```
<div data-placeholder="Content..." id="post-content-editor" ui-tinymce="ContentOptions" ng-model="newPostContentModel"></div> 
```

最后是创建占位符文本的 CSS（它从 data-placeholder="Content..." 获取，但您可以直接在 css 中完成

```
 .content-editorr:before {
        display: none;
}
.content-editor.empty:before {
        display: block;
        position: absolute;
        content: attr(data-placeholder);
} 
```

我在github上找到的：

[https://github.com/angular-ui/ui-tinymce/issues/197](https://github.com/angular-ui/ui-tinymce/issues/197)

我为 tinymce 尝试了许多占位符解决方案，发现这个解决方案非常有用，因为它满足了占位符的所有要求。我认为这是最好的解决方案，

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-30T17:07:28.607

对于 tinymce 4，我遇到了未定义 ed.onInit 事件的问题。tinymce 4 使用 ed.on('event' , callback) 代替。这是我的实现。我还使用 focus 而不是 mousedown 作为清除编辑器时要监听的事件，因为 mousdown 由于某种原因无法正常工作。

```
setup :  function(ed) {

        // Set placeholder
        var tinymce_placeholder = $('#'+ed.id);
        var attr = tinymce_placeholder.attr('placeholder');

        // For some browsers, `attr` is undefined; for others,
        // `attr` is false.  Check for both.
        if (typeof attr !== 'undefined' && attr !== false) {
            var is_default = false;

            ed.on('init' , function(ed) {
                // get the current content
                var cont = ed.target.getContent();

                // If its empty and we have a placeholder set the value
                if(cont.length == 0){
                    ed.target.setContent(tinymce_placeholder.attr("placeholder"));

                    // Get updated content
                    cont = tinymce_placeholder.attr("placeholder");
                }

                // convert to plain text and compare strings
                is_default = (cont == tinymce_placeholder.attr("placeholder"));

                // nothing to do
                if (!is_default){
                    return;
                }
            });

            ed.on('focus', function(ed,e) {
                // replace the default content on focus if the same as original placeholder
                if (is_default){
                    ed.target.setContent('');
                }
            });
        }
    } 
```

希望这对其他答案有问题的人有所帮助

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-01T23:10:02.377

我发现了另一种不会弄乱文本区域内容的方法。我喜欢这样，这样我就不必有特殊条件来阻止用户提交只是占位符的内容。文章可以在[此处](http://www.sorinhaidau.net/placeholder-for-tinymce-editor/)找到，但我添加了 onclick 方法，以便标签可点击——如果没有这个，用户必须点击标签下方`<label>`或侧面。这适用于 TinyMCE 4。

## 风格

```
.tinyMCEPlaceholder {
    top: 45px;
    left: 9px;
    z-index: 1;
    color: #bbbbbb;
    position: absolute;
    cursor:text;
} 
```

## html

```
<div id="holder">
    <label for="tinymce" onclick="tinymce.execCommand('mceFocus',false,'area_id');">Type your article</label>
    <textarea id="comments" id="area_id" class="tinymce" name="comments" cols="40" rows="10"></textarea>
</div>

<!-- or -->

<div id="holder">
    <label for="tinymce" onclick="tinymce.get('area_id').fire('focus',{},false);">Type your article</label>
    <textarea id="comments" id="area_id" class="tinymce" name="comments" cols="40" rows="10"></textarea>
</div> 
```

## TinyMCE 设置

```
 // setup
    setup : function(ed) {
        /* toggle all labels that have the attr 'tinymce' */
        ed.on('init', function() {
            if(ed.getContent() != '') {
                $('label[for="tinymce"]').hide();
            }

            $(ed.getDoc()).contents().find('body').focus(function(){
                $('label[for="tinymce"]').hide();
            });

            $(ed.getDoc()).contents().find('body').blur(function(){
                if(ed.getContent() == '') {
                    $('label[for="tinymce"]').show();
                }
            });
        });
    }, 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-04T12:45:29.737

TinyMCE 的这个插件似乎是一个解决方案：

> [https://github.com/mohan/tinymce-placeholder](https://github.com/mohan/tinymce-placeholder)

希望能帮助到你！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-24T01:59:23.633

Gaurav 的解决方案工作正常，但需要进行一些更改。我使用此修改使其几乎完美：

```
editor.on("init", function(){
    tinymce.DOM.addClass( editor.bodyElement, 'content-editor' );
    if ( editor.getContent() === "" ) {
        tinymce.DOM.addClass( editor.bodyElement, 'empty' );
        var pseudoBeforeHeight = window.getComputedStyle(editor.bodyElement, ':before').height;
        tinymce.DOM.setStyles( editor.bodyElement, { 'height': pseudoBeforeHeight } );
    }
}); 
```

# android - Libgdx 中的 Android Intent 和 startActivity（非 Activity 或 AndroidApplication 类）

> ID：12693992
> 
> 赞同：3
> 
> 时间：2012-10-02T16:03:13.497
> 
> 标签：android, android-intent, libgdx

请帮助我如何在 Libgdx 线程中运行以下代码 - 在 render()、create() 等...

```
public class MyGame implements ApplicationListener, InputProcessor {
...
Intent discoverableIntent = new
Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
startActivity(discoverableIntent);
.....
Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
"http://market.android.com/details?id=" + getPackageName()));
startActivity(marketIntent); 
```

代码有编译错误。我搜索了一些类似的线程，但没有“startActivity”的确切代码示例。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T23:08:10.233

LibGDX is a platform independent library, so all the code that uses the LibGDX platform netural APIs must itself be platform independent (so no Android, or Windows calls, etc). To access platform-specific features, the standard way is to define an interface, and use the interface from your platform-neutral code. Then create an implementation of the interface in the Android (or Desktop) specific projects for your application, and pass that implementation when you initialize your libGDX component.

This tutorial has more details: [http://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup](http://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup)

Here's another description of the same approach (its better written, but the example isn't as clearly relevant to you): [https://github.com/libgdx/libgdx/wiki/Interfacing-with-platform-specific-code](https://github.com/libgdx/libgdx/wiki/Interfacing-with-platform-specific-code)

The tutorial is interested in accessing Android native UI elements, but the basic idea is the same as what you want.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T16:13:32.520

您收到错误是因为[startActivity()](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29)是[Activity](http://developer.android.com/reference/android/app/Activity.html)类中的一个方法。

为了能够使用它，您的班级*必须*：

1.  扩展Activity或扩展Activity的类
2.  在某处有一个 Activity 实例，可能通过构造函数传入

在第二种情况下，你会得到类似的东西：

```
public class MyNonActivity {
    Context mContext;
    public MyNonActivity(Context context) {
        mContext = context;
    }

    public void myMethod() {
        Intent intent = new Intent(mContext, Next.class);
        mContext.startActivity(intent);
    }
} 
```

并从[Activity](http://developer.android.com/reference/android/app/Activity.html)或[Service](http://developer.android.com/reference/android/app/Service.html)或其他子类[Context](http://developer.android.com/reference/android/content/Context.html)或其子类之一调用您的类：

```
MyNonActivity foo = new MyNonActivity(getBaseContext()); 
```

`onCreate()`确保在被调用时或之后执行上述操作。

# php - Mozilla Firefox 不理解带空格的文件

> ID：12693993
> 
> 赞同：4
> 
> 时间：2012-10-02T16:03:14.270
> 
> 标签：php, file, firefox, file-upload, download

我有上传到网站的文件，其中可能包含空格，例如：

```
 file name 1.wav 
```

它在上传时正常显示，但是当尝试从 Chrome 和 Firefox 下载文件时，我得到以下结果：

```
 Chrome downloaded: file name 1.wav (perfect)
  firefox downloaded: file (bad) 
```

名称 1.wav 已从名称中删除。PHP中是否有任何特定功能可以解决Firefox中的这个问题？

代码：

```
 <?= str_replace(array("'",'"'), array("&#39;","&quot;"), stripslashes($sFileTitle)) ?>', '<?=$f['fileExtension']?>' 
```

当我检查应该下载文件的锚标记上的元素时，会出现以下内容：

```
 <a title="file name 1.wav" fileid="254" class="docLink">file name 1.wav</a> 
```

我使用 JQuery 重定向到正确的路径。

使固定：

添加 urlencode($file) 修复了它，但出现了一个新问题。现在文件名

```
 file name 1.wav 
```

下载时变成：

```
 file+name+1.wav 
```

下载后是否可以用空格替换+？urldecode 没用

解决方案：

如果其他人在这里遇到同样的问题，我是如何解决的：

而不是 urlencode/decode 我只是这样做：

```
 '"' . stripslashes($file) . '"' 
```

它修复了它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:13:11.957

```
<?php
      header("Content-Disposition: attachment; filename=\"$filename\"");
?> 
```

# windows - 如何测量树视图项中文本的可用宽度？

> ID：12693995
> 
> 赞同：1
> 
> 时间：2012-10-02T16:03:25.163
> 
> 标签：windows, winapi

我有一个标准的 Win32 树视图控件。我将文件名放入根节点。为了避免要求用户使用水平滚动条，我想缩短文本`PathCompactPath`以适应控件上的可用空间。

![在此处输入图像描述](../Images/f3608af8c3149188a43a9ee1b5ad5f26.png)

所以，为了做到这一点，我需要测量上面截图中标记的距离。我知道，[`TVM_GETITEMRECT`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773610.aspx)但它返回一个包含图标占用空间的矩形。

那么，我怎样才能获得我需要的指标呢？甚至有可能这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:45:11.127

您是指定`TRUE`还是`FALSE`的`wParam`参数`TVM_GETITEMRECT`？应该是`TRUE`获取节点的文本矩形。一旦你有了它，你可以从 TreeView 的客户端宽度中减去矩形的左像素值，以获得你正在寻找的宽度。

# python - 在 Spyder 错误中导入模块

> ID：12693997
> 
> 赞同：3
> 
> 时间：2012-10-02T16:03:31.260
> 
> 标签：python, import, spyder

我正在尝试在 Spyder 中使用 sklearn。一开始我尝试导入它时遇到ImportError: No module named sklearn

然后我绑定到使用 PYTHONPATH 管理器设置 PATH，然后使用工具菜单中的“更新模块名称列表”。然后重新启动 spydet 但没有成功。

最后我将 sklearn 文件夹复制到`/Applications/Spyder.app/Contents/Resources/lib/python2.7`

这就是我找到 sklearn 的 PATH 并将其复制到此文件夹中的方式：

```
>>> import sklearn
>>> sklearn
<module 'sklearn' from '/Library/Python/2.7/site-packages/scikit_learn-0.12_git-py2.7-macosx-10.7-intel.egg/sklearn/__init__.pyc'>
>>> 
```

然后我 cd 到父文件夹：

```
cp -r sklearn /Applications/Spyder.app/Contents/Resources/lib/python2.7 
```

但是当我尝试将 sklearn 导入到 spyder 时，例如`sklearn import dataset`：

```
Traceback (most recent call last):
  File "/Users/mohsenjadidi/Documents/workspace/dsv/test.py", line 10, in <module>
    from sklearn import dataset
  File "/Applications/Spyder.app/Contents/Resources/lib/python2.7/sklearn/__init__.py", line 17, in <module>
    from .base import clone
  File "/Applications/Spyder.app/Contents/Resources/lib/python2.7/sklearn/base.py", line 11, in <module>
    from .metrics import r2_score
  File "/Applications/Spyder.app/Contents/Resources/lib/python2.7/sklearn/metrics/__init__.py", line 6, in <module>
    from .metrics import confusion_matrix, roc_curve, auc, precision_score, \
  File "/Applications/Spyder.app/Contents/Resources/lib/python2.7/sklearn/metrics/metrics.py", line 17, in <module>
    from ..utils import check_arrays
  File "/Applications/Spyder.app/Contents/Resources/lib/python2.7/sklearn/utils/__init__.py", line 9, in <module>
    from .murmurhash import murmurhash3_32
  File "numpy.pxd", line 151, in init sklearn.utils.murmurhash (sklearn/utils/murmurhash.c:4773)
ValueError: numpy.dtype has the wrong size, try recompiling 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:34:27.537

[Moj](https://stackoverflow.com/users/1420757/moj) , Spyder MacOS X App 使用自己的（内部）Python 解释器，而不是系统解释器。这是我们（开发人员）发现提供一个包含 numpy、scipy、matplotlib 和 IPython 的自包含应用程序而不会弄乱系统 Python 的唯一方法。

目前我认为没有办法向应用程序添加更多包，但我们将在接下来的几个月内尝试改善这种情况。

另一种选择（我们设想的那个）适用于希望更多软件包下载和安装最新 EPD 并更改其 Python 解释器的用户

`Tools > Preferences > Console > Advanced Settings > Python Executable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T21:08:21.807

我在导入networkx时遇到了同样的问题。将其文件夹拖放到 spyder 的文件夹中对我来说就足够了。

# javascript - Backbone.js 仍然在验证失败时设置模型属性

> ID：12693998
> 
> 赞同：0
> 
> 时间：2012-10-02T16:03:31.747
> 
> 标签：javascript, backbone.js

出于某种奇怪的原因，当我在模型验证中返回一个字符串时，我的模型仍在设置属性。这是我的代码验证代码：

```
Model = Backbone.Model.extend({
    validate: function( attributes ){
        var tax = attributes.tax;

        if(tax.amount < 0.0 || typeof tax.amount !== "number"){
            return "The tax amount cannot be negative and must be a number.";
        }
    },
   defaults: {
       "tax": {
            "amount": 100
       }
   },
   setTax: function(amount){
      var tax = this.get("tax");
      tax.amount = amount;
      this.set("tax", tax);
   }
}) 
```

然后我让模型监听错误事件并通过控制台记录它：

```
 model = new Model();

    View = Backbone.View.extend({
        initialize: function(){
            this.model.on('error', function(model, error){
                console.log("ERROR: " + error);
            })
        }
    });
    view = new View({model: model});
    view.model.setTax(-100); 
```

正在打印控制台日志，但由于某种原因模型仍在设置属性。有什么我需要返回以不让模型设置属性吗？根据 Backbone.js 停靠点，如果您从验证中返回任何内容，则假定不设置该属性。我正在使用 Backbone.js 版本 0.9.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:07:03.533

你的问题就在这里：

```
var tax = this.get("tax"); 
```

该`get`方法基本上是`return this.attributes[attr]`，`tax`属性是一个对象，结果是你`var tax`和模型`this.attributes.tax`是一回事。因此，当您说 时`tax.amount = amount`，您实际上是在直接编辑`tax`模型内部的`attributes`.

使用可变属性（即除数字、字符串和布尔值之外的任何属性）时，您需要在更改它们之前进行复制：

```
setTax: function(amount) {
    var tax = _(this.get("tax")).clone();
    tax.amount = amount;
    this.set("tax", tax);
} 
```

制作副本还可以防止 Backbone 认为您的`set`呼叫实际上没有做任何事情。如果您不克隆`tax`上述内容，您将不会触发模型上的更改事件，这可能不是您想要的。

几个例子（请打开你的控制台）：

*   [`_.clone`带有in 的税额无效`setTax`。](http://jsfiddle.net/ambiguous/nQAcC/)
*   [`_.clone`具有和更改处理程序的有效税额。](http://jsfiddle.net/ambiguous/kMuj8/)
*   [`_.clone`没有和有变更处理程序的有效税额。](http://jsfiddle.net/ambiguous/Xcbqe/)