# StackOverflow 问答 14842000-14842999

# ruby - 为什么“Hello #{#'world'}”不返回任何内容？

> ID：14842012
> 
> 赞同：0
> 
> 时间：2013-02-12T21:17:52.603
> 
> 标签：ruby, irb

我的 IRB 控制台输出。

```
1.9.3p385 :005 > "Hello #{#'world'}"
1.9.3p385 :006 > 
```

这不应该返回`Hello`吗？这是怎么回事？这是一个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T21:22:06.087

您需要删除第二个`"#"`字符。这使该行的其余部分成为评论。因此，它不是一条完整的线路。

```
"Hello #{'world'}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T21:27:49.687

正如 rjenkins 所说，“因此它不是一条完整的线路。”

为了证明这一点，并在 ERB 中完成该行，请执行以下操作：

> 键入`"Hello #{#'world'}"`，然后按 Enter。然后键入`}"`并按 Enter。一旦你“完成了这条线”，你就会看到会发生什么。

# events - PhoneGap 上的 OpenStreetMap

> ID：14842014
> 
> 赞同：2
> 
> 时间：2013-02-12T21:17:54.110
> 
> 标签：events, cordova, click, openstreetmap

我想在 PhoneGap 应用程序上使用 OpenStreetMap。

我的问题是PhoneGap 上没有触发点击事件。

下面的代码在普通浏览器中工作：

```
<!DOCTYPE HTML>
<html>
  <head>
   <title>OpenLayers Demo</title>
    <style type="text/css">
      html, body, #basicMap {
          width: 100%;
          height: 100%;
          margin: 0;
      }
    </style>
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
   <script>
  function init() {
    map = new OpenLayers.Map("basicMap");
    var mapnik         = new OpenLayers.Layer.OSM();
    var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
    var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
    var position       = new OpenLayers.LonLat(7.55785346031189,50.3625329673905).transform( fromProjection, toProjection);
    var zoom           = 18; 

    map.addLayer(mapnik);
    map.setCenter(position, zoom );

    var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);

    var marker = new OpenLayers.Marker(position);

    marker.events.register("click", map , function(e){ alert("click");
    });

    markers.addMarker(marker);
  }
 </script>
</head>
<body onload="init();">
  <div id="basicMap"></div>
</body>
</html> 
```

当此代码在PhoneGap 中显示地图时，显示地图并显示标记。但是，当我单击标记时，什么也没有发生。

有谁知道为什么这不起作用。我正在使用 Android Emulator 并正在使用 Eclipse 创建 PhoneGapApplication。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T20:25:11.223

@Alexander，这不是一个明确的答案，只是一个提示，但是您是否尝试过 Leaflet.js 来查看它是否有效？从未为 PhoneGap 开发过，但我有几个在 Android/iOS 设备上使用 Leaflet 的移动网站，没有任何问题。

# java - java变量的大规模重命名

> ID：14842018
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:18:04.290
> 
> 标签：java, refactoring

我有一堂课，大约有 50 个字段。它们的名称大致如下：

```
config__write_better_code 
```

我希望它们看起来像这样，而不必手动重命名它们：

```
Config$WriteBetterCode 
```

我正在使用 eclipse，但是任何可以重命名代码的东西都是受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:24:12.463

单击变量名称。

1：按 [alt] + [shift] + [R]

2：输入新名称。

3：按【回车】确认。

--> 这个变量的所有实例都将被重命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:44:38.267

AnyEdit Eclipse 插件可能会对您有所帮助（结合 Eclipse 的重命名功能）：

[http://andrei.gmxhome.de/anyedit/](http://andrei.gmxhome.de/anyedit/)

> 转换骆驼 <-> 下划线
> 
> 自动将变量名称从/转换为“camel”表示法，例如 thisIsMyFieldName <-> this_is_my_field_name

# php - 如何使用 .htaccess 权限在子域中部署 PHP Web 应用程序

> ID：14842019
> 
> 赞同：0
> 
> 时间：2013-02-12T21:18:08.547
> 
> 标签：php, apache, .htaccess, permissions, subdomain

我已经在我的主机（我的主机的根目录）上部署了一个 PHP Web 应用程序现在我想在一个名为“stat”的文件夹中安装一个 Web 分析 php Web 应用程序（在我的主机的根目录中作为一个子域）但是“.htaccess “第一个 PHP 应用程序根目录中的文件不允许访问“stat”文件夹我如何配置“.htaccess”文件以允许将 stat.mydomain.com 映射到“stat”文件夹。

这是位于我的主机根目录中的“.htaccess”文件：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
RewriteEngine On
#RewriteBase /
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php?qa-rewrite=$0&%{QUERY_STRING} [L]
</IfModule> 
```

我希望我能清楚地描述我的问题。请尽快帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:10:37.563

首先，我希望您的for 子域中有一个`VirtualHost`条目，正如.`httpd.conf``stat.mydomain.com``faa`

一旦你有了这个工作改变你`$DOCUMENT_ROOT/.htaccess`的：

```
DirectoryIndex index.php
Options +FollowSymLinks -MultiViews
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php?qa-rewrite=$0 [L,QSA]
</IfModule> 
```

# php - 当 webapp 中的查询失败时如何适当地响应？

> ID：14842027
> 
> 赞同：0
> 
> 时间：2013-02-12T21:18:21.520
> 
> 标签：php, sql, web-applications, error-handling, user-experience

一半的[mysqli](http://www.php.net/manual/en/mysqli.quickstart.php)函数在失败时返回 false。对于开发时的故障排除来说这很好，但是当发布时如何以及应该如何使用它？例如，如果用户遇到错误，技术信息可能不相关，那么是否应该从最终产品中删除所有类似的信息？我的一部分担心如果发生问题的脚本包含在另一个脚本中，那会混淆人们并且会破坏可伸缩性。

```
if(!$link)
    die('Can\'t connect to MySQL: '.mysql_error());
$db_selected = mysqli_select_db($link, 'Storage1');
if(!$db_selected)
    die('Can\'t use Storage1: '.mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:19:54.807

您永远不应该向访问者/用户显示这些消息。

相反，您应该在服务器上记录错误并向用户显示友好消息以重试/稍后再试/道歉/等。

# c - C: MAC OS X 中的信号量意外 sem_close 错误

> ID：14842031
> 
> 赞同：0
> 
> 时间：2013-02-12T21:18:59.270
> 
> 标签：c, ipc, semaphore

我正在尝试在我的 Mac 上使用信号量，当我尝试关闭打开的信号量时它会引发错误。所有初始化都成功，但是当它试图关闭第二个信号量时，它返回了错误的文件描述符错误。

下面的代码是打开和关闭的包装器：

```
void init_sem(sem_t * s, char * sema_name, int value)
{
    if((s = sem_open(sema_name, O_CREAT, 0644, value)) == SEM_FAILED)
    {
        perror("sem_open");
        exit(1);
    }
    printf("init semaphore %s\n", sema_name);
}
void destroy_sem(sem_t * s, char * sema_name)
{
    printf("destroying, %s\n", sema_name);
    if (sem_close(s) == -1) {
        perror("sem_close");
        exit(EXIT_FAILURE);
    }

    if (sem_unlink(sema_name) == -1) {
        perror("sem_unlink");
        exit(EXIT_FAILURE);
    }
} 
```

在 main.c 中

```
sem_t * s, *a, *b;
init_sem(s, "/cs", 0);
init_sem(a, "/ps", 0);
init_sem(b, "/bs", 0);
destroy_sem(s, "/cs");
destroy_sem(a, "/ps"); //got error here
destroy_sem(b, "/bs"); 
```

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:43:19.503

您正在传入`*s`它成为局部变量的位置。`init_sem`当您为其赋值时，该值在返回时消失。然后，当您调用时`destroy_sim`，您会将未初始化的值传递给`sem_close`.

您需要返回从以下位置返回的值`sem_open`：

```
sem_t * init_sem(char * sema_name, int value)
{
    sem_t * s;
    if((s = sem_open(sema_name, O_CREAT, 0644, value)) == SEM_FAILED)
    {
        perror("sem_open");
        exit(1);
    }
    printf("init semaphore %s\n", sema_name);
    return s;
} 
```

然后像这样调用它：

```
s = init_sem("/cs", 0);
a = init_sem("/ps", 0);
b = init_sem("/bs", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:13:17.943

Gabe 的回答是正确的。

作为替代方案，您可以这样做：

```
void init_sem(sem_t ** s, char * sema_name, int value)
{
    if((*s = sem_open(sema_name, O_CREAT, 0644, value)) == SEM_FAILED)
    {
        perror("sem_open");
        exit(1);
    }
    printf("init semaphore %s\n", sema_name);
}
void destroy_sem(sem_t * s, char * sema_name)
{
    printf("destroying, %s\n", sema_name);
    if (sem_close(s) == -1) {
        perror("sem_close");
        exit(EXIT_FAILURE);
    }

    if (sem_unlink(sema_name) == -1) {
        perror("sem_unlink");
        exit(EXIT_FAILURE);
    }
}
int main (int argc, const char * argv[])
{
    sem_t * s, *a, *b;
    init_sem(&s, "/cs", 0);
    init_sem(&a, "/ps", 0);
    init_sem(&b, "/bs", 0);
    destroy_sem(s, "/cs");
    destroy_sem(a, "/ps");
    destroy_sem(b, "/bs");
} 
```

# nhibernate - nHibernate 映射问题——空，不删除子孙

> ID：14842034
> 
> 赞同：0
> 
> 时间：2013-02-12T21:19:23.063
> 
> 标签：nhibernate, nhibernate-mapping, mapping-by-code

> 块引用

我们正在使用 ByCode 方法映射我们的数据..

我有一个 Process （Process 表）对象，它有一个 ProcessStep （ProcessStep 表）对象列表，而该对象又具有一个 Bag of ProcessStepUser （ProcessStepUser 表）对象分配给每个步骤。

对象加载得很好，但是在网页中，如果我从集合中删除一个 Step，将其作为 Process 重新水化为 MVC 操作，然后保存该过程，则数据库中的 Step 只是将 ProcessId 设置为 null ，这会破坏链接，但将步骤留在数据库及其所有分配的用户中。

我想要做的是删除一个 Step 并删除它的 ProcessStep 和它的所有 ProcessStepUsers 。

同样，当我编辑 ProcessStep（比如我更改了步骤的名称）并保存时，它会保存它，但是 ProcessStep 用户被清空（从他们的 ProcessStepId 中）并重新创建，留下孤立的记录。

我在 ProcessStepUser 上也有一列用于整体 ProcessId，这样我就可以防止将用户多次分配给流程的任何步骤。

我的相关映射如下：

过程：

```
 List(x => x.ProcessSteps, m =>
                           {
                               m.Key(k => k.Column("ProcessId"));
                               m.Index(i => i.Column("StepOrder"));
                               m.Lazy(CollectionLazy.NoLazy);
                               m.Cascade(Cascade.All);
                       m.Inverse(false);
                           },
             r => r.OneToMany(o => o.Class(typeof (ProcessStep)))); 
```

工艺步骤：

```
 Bag(x => x.ProcessStepUsers, m =>
        {
            m.Key(k => k.Column("ProcessStepId"));
            m.Lazy(CollectionLazy.NoLazy);
            m.Cascade(Cascade.All);
            m.Inverse(false);
        },
        r => r.OneToMany(o => o.Class(typeof (ProcessStepUser))));
        ManyToOne(x => x.Process, m =>
        {
            m.Column("ProcessId");
            m.Class(typeof (Process));
                     }); 
```

流程步骤用户

```
 ManyToOne(p => p.Step, m =>
                               {
                                   m.Column("ProcessStepId");
                                   m.Class(typeof (ProcessStep));
                               });
        ManyToOne(p => p.Process, m =>
        {
            m.Column("ProcessId");
            m.Class(typeof (Process));
        }); 
```

正如我所说，它在创建时保存得很好，并且在显示时加载得很好。但是删除一个步骤或编辑一个步骤会在数据库中造成严重破坏。

我通过标记它们并在保存 Process master 对象之前手动删除它们来破解步骤删除过程，但如果可能的话，我希望 nhibernate 完成这一切。

谢谢！

> 块引用

首先感谢 Martin，他发现了 Cascade.All.Include(Cascade.DeleteOrphans)... 的一个问题...这是我拥有的原始代码，我忘记在尝试解决问题时更改了它。

我重写了一些测试，映射实际上工作得很好，所以在这里道歉。我会删除这个问题，但该网站不让我做任何事情（在 Firefox 中），而是编辑......

问题最终是因为我从数据库中获取 Process 对象，然后将其作为 JSON 对象序列化到 View 中。然后我将绑定回 Process 对象的 JSON 对象传回。

总而言之，我们的存储库正在对象上调用 SaveOrUpdate(obj)，但由于它已断开连接，我们需要调用 Merge(obj)，我们做了并且工作得很好。

我把它留给权力来决定这个问题是否还有任何价值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:08:32.917

在您希望删除它们的关联上尝试 Cascade(Cascade.AllDeleteOrphan)，而不是让另一边为空...

# html - Bootstrap 响应式轮播无法正确调整大小

> ID：14842044
> 
> 赞同：1
> 
> 时间：2013-02-12T21:19:59.617
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap，我的导航栏下有一个轮播。

它在普通计算机上工作正常，请查看[此链接](http://bit.ly/WZCQHR)。

但是，我在较小的屏幕上遇到了问题，例如 iPhone。只需调整浏览器屏幕的大小即可了解我的意思。

我想也许响应式 CSS 不是必需的，但我做错了其他事情。也许他们是在每个屏幕上调整大小的轮播图像的更好方法。

另外，我希望轮播具有 100% 的屏幕高度，因此轮播横跨整个屏幕，其余内容仅在您滚动时显示。

我正在使用的 CSS：

```
 /* CUSTOMIZE THE CAROUSEL
-------------------------------------------------- */

/* Carousel base class */
.carousel {
  margin-top: -80px;
  position: fixed;
  width: 100%;
}

.carousel .container {
  position:relative;
  z-index: 9;
}    

.carousel-control {
  height: 80px;
  margin-top: 0;
  font-size: 120px;
  text-shadow: 0 1px 1px rgba(0,0,0,.4);
  background-color: transparent;
  border: 0;
  z-index: 10;
}

.carousel .item {
  min-height: 800px;
}

.carousel img {
  position: absolute;
  top: 0;
  left: 0;
  min-width: 100%;
  height: auto;
  margin-top: -200px;
}

.carousel-caption {
  background-color: transparent;
  position: static;
  max-width: 550px;
  padding: 0 20px;
  margin-top: 200px;
}

.carousel-caption2 {
  background-color: transparent;
  position: static;
  max-width: 380px;
  padding: 200px 20px;
}

.carousel-caption h1,
.carousel-caption .lead,
.carousel-caption2 h1,
.carousel-caption2 .lead {
  margin: 0;
  line-height: 1.25;
  color: #fff;
  text-shadow: 0 1px 1px rgba(0,0,0,.4);
}
.carousel-caption .btn,
.carousel-caption2 .btn {
  margin-top: 10px;
}

#wrapper-container {
margin-bottom: -80px;
padding-bottom: 80px;
position: relative;
background: inherit;
top: 60%;
}

/* Featurettes
------------------------- */

.featurette-divider {
  margin: 80px 0; /* Space out the Bootstrap <hr> more */
}
.featurette {
  padding-top: 120px; /* Vertically center images part 1: add padding above and below text. */
  overflow: hidden; /* Vertically center images part 2: clear their floats. */
}
.featurette-image {
  margin-top: -120px; /* Vertically center images part 3: negative margin up the image the same amount of the padding to center it. */
}

/* Give some space on the sides of the floated elements so text doesn't run right into it. */
.featurette-image.pull-left {
  margin-right: 40px;
}
.featurette-image.pull-right {
  margin-left: 40px;
}

/* Thin out the marketing headings */
.featurette-heading {
  font-size: 50px;
  font-weight: 300;
  line-height: 1;
  letter-spacing: -1px;
}

/* RESPONSIVE CSS
-------------------------------------------------- */

@media (max-width: 979px) {

  .container.navbar-wrapper {
    margin-bottom: 0;
    width: auto;
  }
  .navbar-inner {
    border-radius: 0;
  }

  .carousel .item {
    min-height: 500px;
  }

  .carousel img {
    min-width: 100%;
    height: auto;
  }

  .featurette {
    height: auto;
    padding: 0;
  }
  .featurette-image.pull-left,
  .featurette-image.pull-right {
    display: block;
    float: none;
    max-width: 40%;
    margin: 0 auto 20px;
  }
}

 @media (max-width: 767px) {

  .navbar-inner {
    margin: -20px;
  }

  .carousel {
    margin-left: -20px;
    margin-right: -20px;
  }
  .carousel .container {

  }
  .carousel .item {
    height: 300px;
  }
  .carousel img {
    height: 300px;
  }
  .carousel-caption {
    width: 65%;
    padding: 0 70px;
    margin-top: 100px;
  }
  .carousel-caption h1 {
    font-size: 30px;
  }
  .carousel-caption .lead,
  .carousel-caption .btn {
    font-size: 18px;
  }

  .marketing .span4 + .span4 {
    margin-top: 40px;
  }

  .featurette-heading {
    font-size: 30px;
  }
  .featurette .lead {
    font-size: 18px;
    line-height: 1.5;
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:10:12.867

你需要做很多事情来清理它......以下将帮助你开始，但肯定会有更多的调整要做。

根据您的最后一个请求，我没有查看 CSS 来用图像填充屏幕。我认为如果你愿意的话，你将不得不考虑添加一个不同的轮播和其他具有纵向纵横比的裁剪图像，这样你就可以显示你想要的图像的特定部分。

首先在 下`@media (max-width: 767px)`，删除：

```
 .navbar-inner {
    margin: -20px;
  } 
```

它会导致您顶部的菜单栏向上移到看不见的地方。

从`@media... .carousel`，删除：

```
 margin-left: -20px;
 margin-right: -20px; 
```

这很混乱，并且是因为向主体添加了填充（见下文）。

将以下内容添加到`@media (max-width... .carousel`：

```
 position: relative;
 margin-top: 0px; 
```

因为您希望轮播整齐地位于导航栏下方。

删除以下内容`@media... body`

```
 padding-right: 20px;
 padding-left: 20px; 
```

这会导致轮播出现问题，您可以根据`wrapper-container`需要为特定的 div 添加此填充。

从`.carousel img`，删除：

```
 margin-top: -200px; 
```

接下来，您必须修复旋转木马下的文本向下移动的事实：

将以下内容添加到`@media... #wrapper-container`

```
 top: 0; 
```

删除以下内容`@media (max-width: 979px)`

```
.carousel .item {
    min-height: 500px;
} 
```

以及以下来自`@media (max-width: 767px)`

```
.carousel img {
    height: 300px;
} 
```

因为在智能手机尺寸下，旋转木马的高度远不及这个高度。

您还必须在 @media CSS 中调整标题文本的位置。当轮播缩小时，您可能想决定丢失一些标题文本。

这会让你开始，你可以从那里开始......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:27:41.570

首先，去掉 margin-top: -200px; 在您的 .corousel img 样式上。对于小屏幕，您的图像高度小于 200 像素，这会导致它离开屏幕。

# git - 如何让 Maven 发布插件通过 SSH 与 Git 一起使用？

> ID：14842046
> 
> 赞同：4
> 
> 时间：2013-02-12T21:20:12.090
> 
> 标签：git, maven, ssh, cygwin

我正在尝试通过 ssh 将 Maven Release 插件与 git 一起使用。
我运行命令**mvn release:prepare**并得到以下错误：

```
[INFO] Working directory: C:\projects\sample
[INFO] Executing: cmd.exe /X /C "git push ssh://bill@hbox/sample master:master"
[INFO] Working directory: C:\projects\sample
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.4:prepare (default-cli) on project sample: Unable to commit files
[ERROR] Provider message:
[ERROR] The git-push command failed.
[ERROR] Command output:
[ERROR] Permission denied, please try again.
[ERROR] Permission denied, please try again.
[ERROR] Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).
[ERROR] fatal: The remote end hung up unexpectedly 
```

我的 pom.xml 中有以下内容：

```
<scm>
    <developerConnection>scm:git:ssh://hbox/sample</developerConnection>
    <tag>sample-1.1</tag>
</scm> 
```

我正在使用公钥身份验证来访问 ssh 服务器，并且命令**ssh bill@hbox**可以在不提示输入密码的情况下工作。显然，maven 发布插件没有获取我的私钥，我可以知道，因为它正在执行一系列“cmd.exe”来运行 git。**那么我应该把我的私钥放在哪里，我如何让 Maven 知道呢？** 我查看了 Maven Release 插件的文档，但在配置中我没有看到任何关于 ssh 密钥的内容。我在我的 settings.xml 文件中添加了一个新的服务器元素，但这也不起作用。您可以在此问题上指出我的任何文档将不胜感激。其他说明：私钥不受密码保护。另外，我在 Windows 7 和 cygwin 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:24:09.157

我在这里找到了答案。我无法让 maven 发布插件在 cygwin 下工作，但如果你使用 msysgit（打开 git-cmd.bat）然后输入命令“echo %HOME%”，然后将 id_rsa 放在 %HOME/ 中，它将工作.ssh。

[MSysGit 和 ssh 配置。失踪](https://stackoverflow.com/questions/10122439/msysgit-and-ssh-config-missing)

# java - 将单选按钮选择转换为数据

> ID：14842052
> 
> 赞同：0
> 
> 时间：2013-02-12T21:20:33.663
> 
> 标签：java, data-binding

在我班级的 Java“餐厅菜单”GUI 应用程序中，我们必须允许用户从菜单中选择他们的食物然后点餐。现在，您可以从单选按钮上的几种不同食物中进行选择。我想知道是否有一种标准方法可以将单选按钮（即“牛奶”）上的内容转换为某种数据（在这种情况下为价格，例如 2.5）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:31:21.690

对我来说，将产品 ID 分配给单选按钮似乎更好，然后在您的控制器中调用您的后端来获取产品（价格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:28:41.993

你可以使用 if 语句.. 比如 if(selected item==milk) int cost= 2.;

然后您可以将这些成本变量用作 rqrd..

# c# - ormlite - 生成 poco 文件

> ID：14842058
> 
> 赞同：4
> 
> 时间：2013-02-12T21:21:13.327
> 
> 标签：c#, ormlite-servicestack

我是 ORMLite 的新手。在实体框架中，我可以从现有数据库创建我的 POCO 文件（通过使用 CodeFirst）——我在某处读到这在 Ormlite 中是可能的——但我没有在文档中找到它。

请推荐一个框架来创建我的 poco 类，以防 ORMLite 不支持此功能（我不想用 EF 生成我的 pocos！）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-14T11:41:37.397

`OrmLite.Poco.tt`要使 OrmLite.Poco.tt 正常工作，请删除and末尾的空行`OrmLite.Core.ttinclude`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T01:17:54.300

您可以使用 T4 模板来生成 POCO。看一下

[https://github.com/ServiceStack/ServiceStack.OrmLite/tree/master/src/T4](https://github.com/ServiceStack/ServiceStack.OrmLite/tree/master/src/T4)

# r - R中随机森林的分层抽样

> ID：14842059
> 
> 赞同：8
> 
> 时间：2013-02-12T21:21:15.353
> 
> 标签：r

我在以下文档中阅读了以下内容`randomForest`：

> strata：用于分层抽样的（因子）变量。
> 
> sampsize：要绘制的样本大小。对于分类，如果sampsize是一个长度为层数的向量，那么抽样是按层分层的，sampsize的元素表示要从层中抽取的个数。

作为参考，该函数的接口由下式给出：

```
 randomForest(x, y=NULL,  xtest=NULL, ytest=NULL, ntree=500,
              mtry=if (!is.null(y) && !is.factor(y))
              max(floor(ncol(x)/3), 1) else floor(sqrt(ncol(x))),
              replace=TRUE, classwt=NULL, cutoff, strata,
              sampsize = if (replace) nrow(x) else ceiling(.632*nrow(x)),
              nodesize = if (!is.null(y) && !is.factor(y)) 5 else 1,
              maxnodes = NULL,
              importance=FALSE, localImp=FALSE, nPerm=1,
              proximity, oob.prox=proximity,
              norm.votes=TRUE, do.trace=FALSE,
              keep.forest=!is.null(y) && is.null(xtest), corr.bias=FALSE,
              keep.inbag=FALSE, ...) 
```

我的问题是：究竟如何使用`strata` and `sampsize`？这是一个最小的工作示例，我想在其中测试这些参数：

```
library(randomForest)
iris = read.table("http://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data", sep = ",", header = FALSE)
names(iris) = c("sepal.length", "sepal.width", "petal.length", "petal.width", "iris.type")

model = randomForest(iris.type ~ sepal.length + sepal.width, data = iris)

> model
500 samples
  6 predictors
  2 classes: 'Y0', 'Y1' 

No pre-processing
Resampling: Bootstrap (7 reps) 

Summary of sample sizes: 477, 477, 477, 477, 477, 477, ... 

Resampling results across tuning parameters:

  mtry  ROC    Sens  Spec  ROC SD  Sens SD  Spec SD
  2     0.763  1     0     0.156   0        0      
  4     0.782  1     0     0.231   0        0      
  6     0.847  1     0     0.173   0        0      

ROC was used to select the optimal model using  the largest value.
The final value used for the model was mtry = 6. 
```

我之所以选择这些参数，是因为我希望 RF 使用尊重数据中正负比例的引导样本。

[This other thread](https://stackoverflow.com/questions/8704681/random-forest-with-classes-that-are-very-unbalanced)开始了关于该主题的讨论，但没有说明如何使用这些参数就解决了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T21:43:06.373

这不就是这样的吗：

```
model = randomForest(iris.type ~ sepal.length + sepal.width, 
                     data = iris, 
                     sampsize=c(10,10,10), strata=iris$iris.type) 
```

我确实尝试 过`..., strata=iristype`，`..., strata='iristype'`但显然代码不是为了在“数据”参数的环境中解释该值而编写的。我使用了结果变量，因为它是该数据集中唯一的因素变量，但我认为它不必是结果变量。事实上，我认为它绝对不应该是结果变量。该特定模型预计会产生无用的输出，并且仅用于测试语法。

# java - 获取静态文件数组的长度？总是返回 null

> ID：14842060
> 
> 赞同：1
> 
> 时间：2013-02-12T21:21:16.273
> 
> 标签：java, arrays, static, processing

```
public PImage[] images;
public static File[] wallTiles = loadFolder("data/tiles/walls");
public static File[] floorTiles = loadFolder("data/tiles/floors");
public static int totalFiles = wallTiles.length+floorTiles.length;

private static File[] loadFolder(String string)
{
    File files = new File(string);

    File[] pngFiles = files.listFiles(new FilenameFilter()
    {
        public boolean accept(File directory, String fileName)
        {
            return fileName.endsWith(".png");
        };
    });
    return pngFiles;
} 
```

分配了 totalFiles 的第 4 行总是失败，因为 wallTiles 为空。我想返回这个类（称为 Art）中的 totalFiles，这样我就可以为我正在开发的游戏随机选择墙壁或地板纹理。感谢收听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:24:52.427

来自 API [http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles())

... 如果此抽象路径名不表示目录，则返回 null ...

所以检查目录是否存在以及是否有文件。

```
private static File[] loadFolder(String string)
{
    File files = new File(string);
    if(!files.exists() || !files.isDirectory()){
        System.out.println("Directory: "+string+" does not exists");       
        return new File[0];
    }

    File[] pngFiles = files.listFiles(new FilenameFilter()
    {
        public boolean accept(File directory, String fileName)
        {
            return fileName.endsWith(".png");
        };
    });
    return pngFiles;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:32:40.030

尝试使用目录的绝对路径，而不是相对路径

public static File[] wallTiles = loadFolder("data/tiles/walls");

->

公共静态文件[] wallTiles = loadFolder("/whatever_path/data/tiles/walls");

# asp.net-web-api - 如何为 MVC4/VS2012/Web API 注入控制器

> ID：14842061
> 
> 赞同：3
> 
> 时间：2013-02-12T21:21:16.433
> 
> 标签：asp.net-web-api, dependencies, code-injection

我已经阅读或尝试阅读太多关于此的“如何做”，但完全无处可去。统一？System.Web.Http.Dependencies？忍者？结构图？啊。我只想要一些简单有效的东西！我只是无法弄清楚目前的状态是什么。有非常不同的方法，示例似乎不完整。哎呀，最好的领导有一个示例项目......我无法在 VS2010 或 2012 中加载。ARG！我把一天中的 3/4 浪费在了我认为最多半小时的事情上，然后继续前进！简直是水管！

我有一个基于泛型的存储库来处理所有支持相同操作的许多数据集。

存储库

我想控制每个数据集绑定到哪个存储库。这将允许我将所有内容绑定到测试 XML 存储库，随着项目的推进将它们转换到 SQL 存储库。

我当然会很感激一些帮助，让这一切顺利进行！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:30:59.117

听起来你正处于我几年前的状态。

请注意，如果您需要任何进一步的帮助，我会向您发送一些代码。很难把所有的代码都放在这里。

我将尝试解释我正在从事的项目中的当前架构。这篇文章有点啰嗦，但我试图让您大致了解使用 IOC 如何在许多方面为您提供帮助。

所以我使用Ninject。在尝试使用 Castle Windsor 一段时间后，我发现 Ninject 很容易启动和运行。Ninject 有一个很酷的网站，可以帮助您入门。

**首先我的项目结构如下：（自上而下，它是MVC）**

**视图**- 剃刀 **ViewModel** - 每个视图我使用 1 个视图模型

**ViewModelBuilder** - 为我的视图构建我的视图模型（用于从我的控制器中抽象代码，使我的控制器保持整洁）

**AutoMapper** - 将域实体映射到我的视图模型

**控制器**- 调用我的服务层来获取域实体

**域实体**- 我的域的表示

**ServiceLayer（业务层）** - 调用我的存储库层以获取域实体或这些实体的集合

**再次使用 AutoMapper** - 将我的第 3 方供应商的自定义类型映射到我的域实体中

**RepositoryLayer** - 对我的数据存储进行 CRUD 操作

这是一个层次结构，但域实体有点坐在一起，并在几个不同的层中使用。

注意：本文中提到的一些额外工具是：

**AutoMapper** - 将实体映射到其他实体 - 无需编写大量映射代码

**Moq** - 允许你模拟单元测试的东西。这在后面会提到。

现在，关于 Ninject。

每层都标有一个接口。必须这样做，这样 Ninject 才能对自己说。

> 当我发现 IVehicleRepository 将其注入真实的 VehicleRepository 时，或者如果我需要假货，甚至将其注入 FakeVehicleRepository。

*（这与您的评论有关 - “这将允许我将所有内容绑定到测试 XML 存储库”）*

现在每一层都有一个构造函数，以便 Ninject（或任何其他 IOC 容器）可以注入它需要的内容：

```
public VehicleManager(IVehicleRepository vehicleRepository)
{
    this._vehicleRepository = vehicleRepository;
} 
```

VehicleManager 在我的 serviceLayer 中（不要与与 Web 服务有关的任何事情混淆）。服务层实际上就是我们所说的业务层。似乎很多人都在使用服务这个词。（尽管我认为这很烦人，因为它让我想到 Web 服务或 WCF 而不仅仅是业务层......无论如何......）

现在无需深入了解 Ninject 设置的细节，我的 NinjectWebCommon.cs 中的以下代码行告诉 ninject 要做什么：

```
kernel.Bind<IVehicleRepository>().To<VehicleRepository>().InRequestScope(); 
```

**这说：**

> 嘿 Ninject，当我要求 IVehicleRepository 时，请给我一个 VehicleRepository 的具体实现。

如前所述，我可以用 FakeVehicleRepository 替换 VehicleRepository，这样我就不必从真实数据库中读取数据。

因此，正如您现在可以想象的那样，每一层都只依赖于接口。

我不知道你做了多少单元测试，但你也可以想象，如果你想对你的服务层进行单元测试并且它对你的存储库层有具体的引用，那么你将无法进行单元测试，因为你实际上会击中你的存储库，因此从真实数据库中读取。

请记住，单元测试之所以称为单元测试，是因为它只测试一件事。因此，单位一词。所以因为一切都只知道接口，这意味着你可以在你的服务层测试一个方法并模拟存储库。

因此，如果您的服务层有这样的方法：

```
public bool ThisIsACar(int id)
{
   bool isCar = false;
   var vehicle = vehicleRepository.GetVehicleById(id);

   if(vehicle.Type == VehicleType.Car)
   {
       isCar = true;
   }
   else
   {
       isCar = false;
   }
} 
```

您不希望调用 vehicleRepository，这样您就可以 Moq VehicleRepository 给您返回的内容。如果它实现了一个接口，你通常只能模拟东西。

```
So your unit test would look like this (some pseudo code here):
        [TestMethod]
        public void ServiceMethodThisIsACar_Returns_True_When_VehicleIsACar()
        {
            // Arrange
            _mockRepository.Setup(x => x.ThisIsACar(It.IsAny<int>)).returns(new Car with a type of VehicleType.Car)

            // Act
            var vehicleManager = new VehicleManager(_mockVehicleRepository.Object);
            var vehicle = vehicleManager.ThisIsACar(3);

            // Assert
            Assert.IsTrue(vehicle.VehicleType == VehicleType.Car)
        } 
```

如您所见，此时非常简化，您只需在服务层中测试 IF 语句以确保结果正确。

您将在自己的单元测试中测试您的存储库，如果您正在使用它，可能会模拟实体框架工作。

所以，总的来说，我会说，使用任何 IOC 容器让你以最少的痛苦最快地启动和运行。

我还要说，尽你所能尝试和单元测试。这很好，有几个不同的原因。显然它会测试你编写的代码，但它也会立即显示你是否做了一些愚蠢的事情，比如新建一个具体的存储库。你会很快发现在你的单元测试中你不会有一个接口来模拟，这将导致你回去重构你的代码。

我发现使用 IOC 需要一段时间才能获得它。直到有一天它发出咔嗒声，它才会让你感到困惑。在那之后，它很容易让你想知道没有它你是如何生活的。

这是一个没有 Automapper Moq Fluent Validation Resharper 我无法忍受的列表 - 有些人讨厌它，我喜欢它，主要是因为它的单元测试 UI。

无论如何，这太长了。让我知道你的想法。

谢谢RuSs

# sql-server - 如何使用 Entity Framework 减少连接超时？

> ID：14842064
> 
> 赞同：5
> 
> 时间：2013-02-12T21:21:17.927
> 
> 标签：sql-server, entity-framework

我想与我的 SQL Server 建立数据库连接快速失败。如何减少超时？我试过添加`Connection Timeout=1`我的连接字符串，但这似乎没有什么区别。

使用`Connection Timeout=500`时，超时大约需要 8 分 30 秒。这是意料之中的。使用`Connection Timeout=1`，超时大约需要 40 秒，这比预期的要长得多。

我找到了该`EntityConnection.ConnectionTimeout`属性，但它是只读的。我还能做些什么来减少这个超时吗？这是实体的问题吗？

**更新：**这是我的连接字符串。超时仍需要约 40 秒。

```
<add name="KofaxAdminToolsEntities" connectionString="metadata=res://*/DB.Model.KofaxAdminTools.csdl|res://*/DB.Model.KofaxAdminTools.ssdl|res://*/DB.Model.KofaxAdminTools.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=MY_DATASOURCE;initial catalog=MY_CATALOG;persist security info=True;user id=MY_USER;password=MY_PASSWORD;MultipleActiveResultSets=True;App=EntityFramework;Connection Timeout=1&quot;" providerName="System.Data.EntityClient" /> 
```

**更新2：**所以我发现超时是**tcp timeout**，而不是**sql connect timeout**。如果我的机器能够访问主机，@marc_s 解决方案会起作用，但是，由于我无法访问该主机，tcp 超时就会起作用。有谁知道如何减少 a 的 tcp 超时`SqlConnection`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:39:00.737

您在哪里以及如何指定连接超时？

我刚刚尝试将其添加到我的 EF 连接字符串中（首先使用 EF 数据库） - 它按预期工作：SQL Server 服务停止后，连接尝试几乎立即超时......

```
<add name="myEntities" 
     connectionString="metadata=res://*/People.csdl|res://*/People.ssdl|res://*/People.msl;provider=System.Data.SqlClient;
             provider connection string=&quot;data source=.;initial catalog=mydb;
             integrated security=True;connect timeout=1;multipleactiveresultsets=True;
                                      ***************** 
             App=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> 
```

（*为了清楚起见，EF 连接字符串被分解和包裹——这只是你的一根长线`web.config`*）

您需要在EF 连接字符串的值**中**`connect timeout=x`添加（`x`以秒为单位，任何大于 0 的值都可以） 。**`provider connection string=`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:25:54.733

将以下代码放入 DbContext 类的构造函数中：

```
((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 1; 
```**

# jsf - 在 JSF 表中显示值

> ID：14842066
> 
> 赞同：0
> 
> 时间：2013-02-12T21:21:20.690
> 
> 标签：jsf, jsf-2

我有一个具有 30 个属性的 Java 对象。我从数据库中填充对象。我只想显示不为空的值。

```
<table>
    <col width="280"/><col width="130"/>

    <ui:repeat var="ud" value="#{TreeViewController.componentData}">

        <tr>
            <td>
                <h:outputText value="componentStatsId" rendered="#{ud.componentStatsId != 0}"/>
            </td>
            <td>
                <h:outputText value="#{ud.componentStatsId}" rendered="#{ud.componentStatsId != 0}"/>
            </td>
        </tr>

        .......... and 40 more table rows

    </ui:repeat>
</table> 
```

我测试了创建简单的 JSF 表，其中如果值为空，则不会呈现这些行。但我注意到，如果值为空，我会得到很小的空格：

![在此处输入图像描述](../Images/b6ab8a96ded0bc25bc0fe23b2b154260.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:38:22.360

是的，这将是您的代码的预期行为，因为它只是阻止渲染`<<h:outputText>`但不是`<tr>`nor`<td>`组件。

为了解决这个问题，你应该使用属性来`<ui:fragment>`控制`<tr>`和`<td>`渲染`rendered`：

```
<ui:repeat var="ud" value="#{TreeViewController.componentData}">
    <ui:fragment rendered="#{ud.componentStatsId != 0}">
        <tr>
            <td>
                componentStatsId
            </td>
            <td>
                #{ud.componentStatsId}
            </td>
        </tr>
    </ui:fragment>
    <!-- .......... and 40 more table rows -->
    <ui:fragment rendered="#{ud.componentTypeId != 0}">
        <tr>
            <td>
                ...
            </td>
            <td>
                ...
            </td>
        </tr>
    </ui:fragment>
</ui:repeat> 
```

# c - 结构变量的值是否只是一个地址（就像数组一样）？

> ID：14842068
> 
> 赞同：0
> 
> 时间：2013-02-12T21:21:27.597
> 
> 标签：c, pointers

在 C 中，以下是合法的：

```
int a[] = {27,2};
int *b;
int c;

b = a;
c = *b; /* c == 27 */ 
```

关键是 a 只是数组的地址，所以我可以将它分配给一个指针。为什么结构不一样，我会假设结构变量的值只是地址，因此我应该能够将它分配给指针，如下所示：

```
struct foo bar;
struct foo *doo;
bar.x = 0;
doo = bar; //is this legal?
doo.x = 0; //why can't I use the dot? 
```

换句话说，如果结构变量的值只是第一个组件的地址（我想这是像数组一样的情况），上面的代码应该是合法的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:24:39.160

> 关键是这`a`只是数组的地址，所以我可以将它分配给一个指针。

这不太对：编译器*将*数组的名称转换为指向数组初始元素的指针。这会自动发生，而不需要强制转换或操作员的“地址” `&`。但是，`a`不仅仅是**地址**，这可以通过将其大小与`sizeof(a)`.

这应该可以解释为什么`struct`对于数组而言并非如此（即，数组并非如此）。对于`struct`s，“地址”运算符`&`是强制性的：

```
doo = &bar; 
```

> doo.x = 0; //为什么我不能使用点？

C 通过指针访问`struct`s 元素的语法不同：您需要使用`->`运算符而不是点`.`运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:22:50.250

正如其他人指出的那样，数组的语义与结构的语义不同。至于*为什么*会这样，您必须记住 C 源自早期语言（[BCPL](http://en.wikipedia.org/wiki/BCPL)和[B](http://en.wikipedia.org/wiki/B_%28programming_language%29)），这两种语言都是“无类型”语言，将内存视为固定长度“单词”或“单元格”的线性数组. 在那些较旧的语言中，当您声明一个数组时

```
auto V[10]; 
```

留出11个记忆单元；一个用于名为 的对象`V`，然后再有 10 个用于数组元素；数组的第一个元素的地址存储在`V`.

来自 Dennis Ritchie 的论文[The Development of the C Language](http://cm.bell-labs.com/who/dmr/chist.html)：

> 当我尝试扩展类型表示法，尤其是添加结构化（记录）类型时，问题变得很明显。结构似乎应该以直观的方式映射到机器的内存中，但是在包含数组的结构中，没有好地方来存储包含数组基数的指针，也没有任何方便的方法来安排它初始化。例如，早期 Unix 系统的目录条目可能在 C 中描述为
> 
> ```
> 结构{
>     整数；
>     字符名称[14]；
> };
> 
> ```
> 
> **我希望该结构不仅可以表征抽象对象，还可以描述可能从目录中读取的位集合。**编译器可以在哪里隐藏语义要求的名称指针？即使结构被认为更抽象，并且指针的空间可以以某种方式隐藏，我如何处理在分配复杂对象时正确初始化这些指针的技术问题，也许是一个指定结构包含包含任意深度结构的数组的结构？
> 
> 该解决方案构成了无类型 BCPL 和类型 C 之间进化链中的关键跳跃。**它消除了存储中指针的具体化，而是在表达式中提到数组名称时导致创建指针。**在今天的 C 语言中仍然存在的规则是，当数组类型的值出现在表达式中时，它们会被转换为指向组成数组的第一个对象的指针。

强调我的。这就是为什么 C 中的数组表达式与所有其他表达式类型（包括结构类型）的处理方式不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:23:58.973

> 斗=酒吧；//这合法吗？

不，试试：

```
doo = & bar;
     ^^ 
```

> doo.x = 0; //为什么我不能使用点？

因为`doo`是指针。尝试：

```
doo->x = 0;
   ^^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T21:24:13.560

不，这不对。你想做的是：

```
doo = &bar; 
doo->x = 0; 
```

在数组的情况下它可以工作，因为数组`T`可以隐式转换为`T*`，但对于结构则不是这样。一个指针可以存储你的 struct objext ( `&bar`) 的地址。为了使用指针间接访问结构元素，应该使用 -> 运算符。`a->b`相当于`(*a).b`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T21:24:15.907

```
 doo = bar; //is this legal? 
```

不，它无效。左操作数是结构类型，右操作数是指针类型。

这是合法的：

```
 doo = &bar; 
```

`&bar`是指向的类型指针`struct foo`。

现在：

```
 doo.x = 0; //why can't I use the dot? 
```

因为操作数必须是结构类型，但它是指针类型。用于`->`从指向结构类型的指针的对象中访问元素。

```
 doo->x = 0;  // this is valid 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T21:26:27.200

不，结构的值是结构本身，而不是它的地址。这使您可以执行以下操作：

```
struct foo a;
struct foo b;
b = a;  /* this does a memberwise copy of all fields from a to b */ 
```

如果您想要结构的地址，请使用`&`运算符：

```
struct foo a;
struct foo* b = &a
struct foo c;
c = *b;  /* this does a memberwise copy of all fields from a to c */ 
```

# java - Java中的伪一流函数？

> ID：14842076
> 
> 赞同：1
> 
> 时间：2013-02-12T21:21:47.907
> 
> 标签：java, closures, implementation, lambda

下面我有一个粗略的实现，在 Python 中测试一个整数上的列表 lambda 函数。我知道 Java 目前不支持闭包或 lambdas（还），但我很好奇，这在 Java 中是否可行？

```
pos = [lambda x : x > 0, "pos"]
even = [lambda x : x % 2 == 0, "even"]
small = [lambda x : x < 100, "small"]

def pass_test(x, tests):
    if (len(tests) == 0): return []
    else:
        if (tests[0][0](x)): return [tests[0][1]] + pass_test(x, tests[1:])
        else: return pass_test(x, tests[1:]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:30:13.260

是的，这是可能的，大致如下：

```
interface Predicate<A> {
    boolean eval(A argument);
}

Predicate<Integer> gt0 = new Predicate<Integer>() {
    boolean eval(Integer arg) {
        return arg > 0;
    }
}; 
```

你看，这有点冗长，但它确实完成了工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:31:08.023

在您的情况下，python 函数可以像这样映射到 Java：

```
public interface Function { 
    String do(int x); 
}

// ...
Function pos = new Function(){
    public String do(int x) {
        return (x > 0) ? "pos" : "";
    }
}
Function even = new Function(){
    public String do(int x) {
        return (x % 2 == 0) ? "even" : "";
    }
}
Function small = new Function(){
    public String do(int x) {
        return (x < 100) ? "small" : "";
    }
}

// ... 
```

如您所见，您需要更多代码才能在 Java 中执行相同的简单操作。

# c# - CLI 语言检测

> ID：14842077
> 
> 赞同：2
> 
> 时间：2013-02-12T21:21:54.633
> 
> 标签：c#, .net

我正在使用 CodeDom 编译器来动态编译用户定义的脚本。我们将 C# 脚本作为标准使用，但我想知道是否有办法支持所有 CLI 语言。为此，我必须检测在此特定源代码中使用的 CLI 语言。

是否有一些优雅的方法可以从源代码中仅检测 CLI 语言？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:56:59.107

框架提供 CodeDomProvider 的语言只有 3 种：C#、JScript 和 VB。因此，如果框架提供任何直接的方法来解析“任何语言”，它就只能支持这3种语言。我认为不会。

您可能想尝试使用 CodeDomProvider 的所有三个实现来解析您的代码，并保留第一个成功的实现。这将需要十几行代码。

我想这可能是你最好的尝试。

CodeDomProvider 的文档：http: [//msdn.microsoft.com/en-us/library/ds075xdx.aspx](http://msdn.microsoft.com/en-us/library/ds075xdx.aspx) CodeDomProvider.Parse 的文档：http: [//msdn.microsoft.com/en-us/library/system.codedom.compiler .codedomprovider.parse%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.parse%28v=vs.110%29.aspx)

# twitter-bootstrap - 向 Bootstrap 正文添加填充以防止内容和标题重叠的正确方法

> ID：14842079
> 
> 赞同：34
> 
> 时间：2013-02-12T21:21:56.550
> 
> 标签：twitter-bootstrap, responsive-design, navbar

我知道要阻止 Bootstrap 中的主容器位于主体顶部和导航栏后面，您必须像这样添加填充：

```
<link href="css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

必须在 bootstrap.css 和 bootstrap-responsive.css 之间声明填充，以便填充不会在较小的设备上引起问题，从而破坏站点的响应能力。

* * *

## 我的问题：

[我正在使用从Bootstrap customize](http://twitter.github.com/bootstrap/customize.html)下载的 combinde bootstrap.css 文件，该文件将响应式 css 和普通 css 合并到一个文件中。

因为它们被合并到一个文件中，这意味着我不能使用我在这个问题开头描述的解决方案，而无需将修复程序实际添加到 bootstrap.css 文件中（我不想在其中添加它，长篇大论） .

所以我在考虑而不是放置这段代码（针对较小的设备使用@media 修复）：

```
body {  padding-top: 60px; } 
@media (max-width: 979px) { body { padding-top: 0;  } } 
```

到我自己的 css 文件（main.css）中，并将其包含在 bootstrap.css 之后，在 html 中，如下所示：

```
<link href="css/bootstrap.css" rel="stylesheet" media="screen">
<link href="css/main.css" rel="stylesheet" media="screen"> 
```

**你认为这个解决方案可以接受吗？**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-14T13:09:14.197

是的，您的解决方案是可以接受的。

因此，如果您在开始时有一个或两个 Bootstrap 文件的组合，并且您希望拥有导航栏，那么这是在较小的屏幕上避免大填充的方法：

```
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<style>
  body {
    padding-top: 60px;
  }
  @media (max-width: 980px) {
    body {
      padding-top: 0;
    }
  }
</style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T13:37:04.817

在 Bootstrap 2.3.x 中，我们可以使用 CSS 修复这个填充：

```
body > .container {
  padding-top: 40px;
  background-color: white;
}

/*
 * Responsive stypes
 */
@media (max-width: 980px) {

  body > .container {
    padding-top: 0;
  }
  .navbar-fixed-top {
    margin-bottom: 0;
  }

} /* END: @media (max-width: 980px) */ 
```

与 HTML 文件看起来像这样

```
<html>
<body>

  <div class="navbar navbar-fixed-top">
   ...
  </div>

  <div class="container">
   ...
  </div>

</body>
</html> 
```

在 Twitter 响应 CSS 文件中，顶部菜单行具有`class="navbar-fixed-top"`当`margin-bottom: 20px;`屏幕宽度小于`980px`.

希望这可以帮助某人。

# c# - ThenBy() 在特定条件下不起作用

> ID：14842083
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:22:11.297
> 
> 标签：c#, linq, sorting

假设我有一个这样的类列表（已编辑，更等同于原始代码）：

```
public class Foo
{
    public FooEnum enum;
    public DateTime dt;
    enum FooEnum
    {
        prop1 = 0,
        prop2 = 1
    }
} 
```

现在，如果我们有一个此类的列表，我们称之为`_fooList`，它包含两个`Foo`对象，其中一个包含`01/01/01`for`dt`和`prop2`for `enum`，另一个包含`01/01/01`for`dt`和`prop1`for ，按此`enum`顺序。现在，如果我`OrderBy`是`DateTime`第一个，它会保持不变，但是当我按 排序时`FooEnum`，它仍然保持不变，即使`Foo`包含`prop1`应该是第一个。对此有什么解释吗？

（注意：这是我的问题的一个真正总结的版本）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:24:07.413

试试这个并告诉我它是否有效：

```
_fooList = _fooList.OrderBy(f => f.someString).ThenBy(f => f.someInt).ToList(); 
```

# c++ - 二加二扑克手评估器：卡片如何映射到整数？

> ID：14842084
> 
> 赞同：3
> 
> 时间：2013-02-12T21:22:31.250
> 
> 标签：c++, poker

为了用 C++ 创建最快的蒙特卡洛德州扑克手牌分析器，我目前正在研究手牌评估的主题。

你们中的许多人可能都知道，那里有很多开源的手动评估器。经过一番思考，我选择了“二加二手评估器”（之所以这样命名，是因为它是在二加二论坛上首次介绍的）。

这是目前已知最快的评估器之一，它使用数组查找来快速找到一手牌的价值。

现在，对于该函数，您需要传入一个包含您感兴趣的卡片的数组。示例：

```
int Cards[] = { 3, 5, 10, 17, 23, 24, 32 };
int hv = HandValue(Cards); 
```

值在 1 到 52 之间。现在，我的问题是：这些整数对应什么卡片？3是黑桃A吗？三颗心？我搜索了 google、2+2 论坛、提供手评估器的各种页面、用于构建数组的源文件。一切都是徒劳。所以我希望这里有人可以指出我可以在哪里找到这些信息的正确方向，或者直接给我。

评估者的来源是这篇优秀的文章： http: [//www.codingthewheel.com/archives/poker-hand-evaluator-roundup#cactus_kev](http://www.codingthewheel.com/archives/poker-hand-evaluator-roundup#cactus_kev) 其中单独解释了所有评估者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:07:29.853

我没有验证这一点，但它*似乎*是：

```
"2c": 1,
"2d": 2,
"2h": 3,
"2s": 4,
"3c": 5,
"3d": 6,
...
"kh": 47,
"ks": 48,
"ac": 49,
"ad": 50,
"ah": 51,
"as": 52 
```

参考：[https ://github.com/chenosaurus/poker-evaluator/blob/master/lib/PokerEvaluator.js](https://github.com/chenosaurus/poker-evaluator/blob/master/lib/PokerEvaluator.js)

# jquery - 如何限制“点击”区域？

> ID：14842085
> 
> 赞同：0
> 
> 时间：2013-02-12T21:22:30.963
> 
> 标签：jquery, html, css, interaction

我有一个像手风琴一样的结构。我有“工作” div，我确实在里面隐藏了一些图片，我希望它们作为画廊工作。

因此，当我单击“工作”div 时，该 div 动画并且它的高度扩展并且画廊出现。

但是无论我在哪里点击它都会再次关闭“工作”div。所以我想要做的是，我限制这个点击区域并阻止关闭“工作”，以便用户可以浏览图像。

我希望我说清楚了。

这是图片网址，如您所见，下面带有图片的作品是开放式作品，但是当我单击图像时，它会自行关闭。我将 'gallery' div 的 z-index 设置为 9999，但点击仍然被 'work' 调用

[http://cl.ly/image/2y3V052T0U43](http://cl.ly/image/2y3V052T0U43)

在此先感谢，干杯，遇见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:09:14.713

`div.title`在您的工作 div 中创建一个并将点击事件绑定到`.title`. 默认情况下将画廊封闭`div.gallery`并隐藏。

[工作小提琴](http://jsfiddle.net/4ewG9/)

# php - PHP：使用 array_push 为 JSON 生成对象标题

> ID：14842087
> 
> 赞同：0
> 
> 时间：2013-02-12T21:22:41.233
> 
> 标签：php, arrays, json, multidimensional-array

我正在尝试使用 php 的数组函数（用于 3 个单独的数组）生成一个多层 JSON 文件。我本质上是在 php 中使用 3 个不同的数组来生成一个这是我在 php 中使用的基本代码：

```
$full_array = array();
...
$results_array('step1');
foreach($ga->getResults() as $result):
     $add_array = array();
     $add_array['total'] = $ga->getResults();
     array_push($results_array, $add_array);
endforeach;
array_push($full_array, $results_array);
echo json_encode($full_array) 
```

这导致以下结果：

```
[
   [
      "step1",
         {
            "total": "...."
         }
   ]
] 
```

但是，我试图在大括号之前获得那个“step1”，所以它应该如下所示：

```
[
   "step1",
      [
           {
             "total": "...."
           }
      ]
] 
```

有人知道如何使用 PHP 获得后一种格式吗？我到处都在寻找这个答案，但无论如何都找不到 - 如果有重复的答案，我们深表歉意。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:36:02.960

只需摆脱`$full_array`并执行以下操作：

```
echo json_encode($results_array); 
```

# python - 给定两个顶点围绕中心点旋转线

> ID：14842090
> 
> 赞同：11
> 
> 时间：2013-02-12T21:22:55.210
> 
> 标签：python, rotation, trigonometry

我一直在尝试将一堆线旋转 90 度（它们一起形成一条折线）。每行包含两个顶点，例如 (x1, y1) 和 (x2, y2)。我目前正在尝试做的是围绕线的中心点旋转，给定中心点 |x1 - x2| 和 |y1 - y2|。出于某种原因（我不是很精通数学）我无法让线条正确旋转。

有人可以验证这里的数学是正确的吗？我认为这可能是正确的，但是，当我将线的顶点设置为新的旋转顶点时，下一行可能不会从上一行抓取新的 (x2, y2) 顶点，从而导致线旋转不正确.

这是我写的：

```
def rotate_lines(self, deg=-90):
    # Convert from degrees to radians
    theta = math.radians(deg)

    for pl in self.polylines:
        self.curr_pl = pl
        for line in pl.lines:
            # Get the vertices of the line
            # (px, py) = first vertex
            # (ox, oy) = second vertex
            px, ox = line.get_xdata()
            py, oy = line.get_ydata()

            # Get the center of the line
            cx = math.fabs(px-ox)
            cy = math.fabs(py-oy)

            # Rotate line around center point
            p1x = cx - ((px-cx) * math.cos(theta)) - ((py-cy) * math.sin(theta))
            p1y = cy - ((px-cx) * math.sin(theta)) + ((py-cy) * math.cos(theta))

            p2x = cx - ((ox-cx) * math.cos(theta)) - ((oy-cy) * math.sin(theta))
            p2y = cy - ((ox-cx) * math.sin(theta)) + ((oy-cy) * math.cos(theta))

            self.curr_pl.set_line(line, [p1x, p2x], [p1y, p2y]) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T21:40:24.347

The coordinates of the center point (cx,cy) of a line segment between points (x1,y1) and (x2,y2) are:

```
 cx = (x1 + x2) / 2
    cy = (y1 + y2) / 2 
```

In other words it's just the average, or arithmetic mean, of the two pairs of x and y coordinate values.

For a multi-segmented line, or polyline, its logical center point's x and y coordinates are just the corresponding average of x and y values of all the points. An average is just the sum of the values divided by the number of them.

The general formulas to [rotate a 2D point](https://en.wikipedia.org/wiki/Rotation_matrix#In_two_dimensions) (x,y) θ radians *around the origin* (0,0) are:

```
 x′ = x * cos(θ) - y * sin(θ)
    y′ = x * sin(θ) + y * cos(θ) 
```

To perform a rotation about a different center (cx, cy), the x and y values of the point need to be adjusted by first subtracting the coordinate of the desired center of rotation from the point's coordinate, which has the effect of moving (known in geometry as [translating](https://en.wikipedia.org/wiki/Translation_(geometry))) it is expressed mathematically like this:

```
 tx = x - cx
    ty = y - cy 
```

then rotating this intermediate point by the angle desired, and finally adding the x and y values of the point of rotation *back* to the x and y of each coordinate. In geometric terms, it's the following sequence of operations:  Tʀᴀɴsʟᴀᴛᴇ ─► Rᴏᴛᴀᴛᴇ ─► Uɴᴛʀᴀɴsʟᴀᴛᴇ.

This concept can be extended to allow rotating a whole polyline about any arbitrary point—such as its own logical center—by just applying the math described to each point of each line segment within it.

To simplify implementation of this computation, the numerical result of all three sets of calculations can be combined and expressed with a pair of mathematical formulas which perform them all simultaneously. So a new point (x′,y′) can be obtained by rotating an existing point (x,y), θ radians around the point (cx, cy) by using:

```
 x′ = (  (x - cx) * cos(θ) + (y - cy) * sin(θ) ) + cx
    y′ = ( -(x - cx) * sin(θ) + (y - cy) * cos(θ) ) + cy 
```

Incorporating this mathematical/geometrical concept into your function produces the following:

```
from math import sin, cos, radians

def rotate_lines(self, deg=-90):
    """ Rotate self.polylines the given angle about their centers. """
    theta = radians(deg)  # Convert angle from degrees to radians
    cosang, sinang = cos(theta), sin(theta)

    for pl in self.polylines:
        # Find logical center (avg x and avg y) of entire polyline
        n = len(pl.lines)*2  # Total number of points in polyline
        cx = sum(sum(line.get_xdata()) for line in pl.lines) / n
        cy = sum(sum(line.get_ydata()) for line in pl.lines) / n

        for line in pl.lines:
            # Retrieve vertices of the line
            x1, x2 = line.get_xdata()
            y1, y2 = line.get_ydata()

            # Rotate each around whole polyline's center point
            tx1, ty1 = x1-cx, y1-cy
            p1x = ( tx1*cosang + ty1*sinang) + cx
            p1y = (-tx1*sinang + ty1*cosang) + cy
            tx2, ty2 = x2-cx, y2-cy
            p2x = ( tx2*cosang + ty2*sinang) + cx
            p2y = (-tx2*sinang + ty2*cosang) + cy

            # Replace vertices with updated values
            pl.set_line(line, [p1x, p2x], [p1y, p2y]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:27:17.113

您的中心点将是：

```
centerX = (x2 - x1) / 2 + x1
centerY = (y2 - y1) / 2 + y1 
```

because you take half the length `(x2 - x1) / 2` and add it to where your line starts to get to the middle.

As an exercise, take two lines:

```
line1 = (0, 0) -> (5, 5)
then: |x1 - x2| = 5, when the center x value is at 2.5.

line2 = (2, 2) -> (7, 7)
then: |x1 - x2| = 5, which can't be right because that's the center for
the line that's parallel to it but shifted downwards and to the left 
```

# .net - 安装了 .NET 4.5 的构建服务器能否成功地将针对 4.0 的项目部署到仅安装了 .NET 4.0 的服务器？

> ID：14842092
> 
> 赞同：9
> 
> 时间：2013-02-12T21:22:59.553
> 
> 标签：.net, .net-4.0, .net-4.5, .net-framework-version

我们最近在我们的持续集成构建服务器上安装了 .NET 4.5，以便它可以支持利用 .NET 4.5 功能的新项目。此构建服务器还用于构建和部署较旧的项目，其中一些项目面向 .NET 4.0。

在此服务器上构建以 .NET 4.0 为目标的项目，然后部署到仅安装了 .NET 4.0 的目标服务器，现在失败并出现以下错误：

```
Method not found: 'Int32 System.Environment.get_CurrentManagedThreadId()'. 
```

Environment.CurrentManagedThreadId 是 .NET Framework 4.5 的新属性，因此运行 4.0 的服务器找不到它是有道理的。但是，我们在构建*时*以 .NET 4.0 为目标，因此理论上我们*不需要*在生产服务器上安装 4.5。

总结一下：

*   项目目标 4.0
*   构建服务器已安装 4.5
*   然后部署项目的服务器只有 .NET 4.0
*   项目在运行时失败并出现错误`Method not found: 'Int32 System.Environment.get_CurrentManagedThreadId()'.`

是什么赋予了？当 dll 由具有 .NET 4.5 的服务器构建时，是否可以在仅安装 .NET 4.0 的服务器上成功运行 .NET 4.0 dll？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T21:25:44.567

这是因为 4.5 是对 4.0 的就地升级。当构建服务器编译时，默认情况下，即使您的目标是 .NET 4，它也会找到 4.5 程序集。

您可以更正此问题，但您需要将 4.0 引用程序集添加到您的构建服务器（以便编译器找到它们），而不仅仅是依赖 .NET 4.5 版本。

有关详细信息，请参阅[Marc Gravell 关于该主题的博客文章](http://marcgravell.blogspot.com/2012/09/iterator-blocks-missing-methods-and-net.html)。

# ios - UITableView 标题视图宽度

> ID：14842094
> 
> 赞同：0
> 
> 时间：2013-02-12T21:23:11.497
> 
> 标签：ios, objective-c, uitableview, uiview, uistoryboard

我正在尝试在 UITableVIew 上自定义 headerview 的宽度。不幸的是，无论我在 setframe 方法中给它什么参数，它似乎总是具有与 tableview 相同的宽度。我找不到谈论这个的答案，大多数答案似乎都在谈论节标题而不是 talbeviewheaders。谁能告诉我自定义表格视图标题宽度的方法？

编辑：

```
(void)viewDidLoad {
   UIImageView *myImage =[[UIImageView alloc]initWithImage:[UIImage     imageNamed:@"takephoto.png"]];
  [myImage setFrame:CGRectMake(0, 0, 50, 100)];
 [[self myTable]setTableHeaderView:myImage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:45:09.930

添加`myImage`为另一个视图的子视图。包含视图将自动调整大小，但您可以配置`myImage`为您需要的大小。

# java - 如何在内存数据库中使用高效的java来模拟Oracle数据库

> ID：14842095
> 
> 赞同：5
> 
> 时间：2013-02-12T21:23:12.107
> 
> 标签：java, oracle11g, h2

我有很多访问数据库的 DAO 测试。我试图在 H2 等内存数据库中使用 Java 来模拟它们。但问题是 ddl 脚本包含 H2 似乎不支持的分区语句。我基本上想使用与生产中相同的 ddl 脚本，并且不想以任何方式为我的“单元”测试修改它们。我也尝试过 HSQL，但发现 H2 更接近于 oracle，但即便如此它也不支持分区。有解决方法吗？

我确实看过以下 [从 Oracle 实例创建内存数据库结构](https://stackoverflow.com/questions/3784843/create-an-in-memory-database-structure-from-an-oracle-instance) 它谈到了使用 H2，但我已经提到了它的缺点。寻找一些替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:54:59.430

如果您想要有意义的测试，您将需要针对与您将在生产中运行的数据库版本相同的实例运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:47:22.067

您可以使用 Oracle 的数据字典生成包含表、它们的关系、索引、约束等的 H2 模式。我正在使用这种生成的模式来测试内存中的 H2 数据库。

例如，要获取所有表及其列，您可以使用以下查询：

```
SELECT 
  ut.table_name,
  utc.column_name,
  utc.data_type,
  utc.data_length,
  utc.data_precision
  FROM user_tables ut JOIN user_tab_columns utc
    ON ut.table_name = utc.table_name; 
```

可以对外键、其他约束、索引、序列以及测试所需的所有其他内容进行类似的查询。您还需要一个模板引擎来将查询结果转换为 H2 DDL 脚本。

# sql - 计算唯一名称的数量

> ID：14842098
> 
> 赞同：1
> 
> 时间：2013-02-12T21:23:22.277
> 
> 标签：sql, count

我正在尝试返回给定数量的服务器名称，然后计算返回的数量。例如：

```
select servername, count(distinct servername) number
from TABLE
where [target] = 'blah'
group by servername 
```

这将返回以下内容：

```
servername      number
server1         1
server2         1 
```

我试图让“数字”列读取“2”，因为有 2 个不同的服务器名称。这应该非常简单，但我完全不知所措。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:29:28.460

您可以使用相关子查询：

```
select distinct servername, 
  (select count(distinct servername) 
   from yourtable
   where target = 'blah') number
from yourtable
where target = 'blah' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f65f3/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:32:28.907

```
select servername, 
       count(*) over (partition by servername) as number
from the_table
where [target] = 'blah' 
```

所有现代 DBMS 都支持窗口函数（`over()`部分），包括 SQL Server（您似乎正在使用）

# playframework - 自定义play 2.1中的json验证错误

> ID：14842103
> 
> 赞同：2
> 
> 时间：2013-02-12T21:23:59.093
> 
> 标签：playframework, playframework-2.1

我想直接在`Read`定义中提供自定义错误消息：

```
implicit val ar = (
 (__ \ "firstName").read[String].customError(ValidationError("bad format", "firstName")) and
 (__ \ "lastName").read[String] and
 (__ \ "address").read[Address]
)(Employee) 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:54:12.890

我们在or中还没有`mapError`设施。最好的方法就是重新定义你自己的 Reads[String]`Reads[T]``JsResult`

```
implicit val StringReads = Reads{ json => json match {
  case JsString(s) => JsSuccess(s)
  case _ => JsError(Seq(JsPath() -> Seq(ValidationError("custom.error"))))
} } 
```

# php - 如何在 php str_replace 函数中加粗文本？

> ID：14842107
> 
> 赞同：0
> 
> 时间：2013-02-12T21:24:11.890
> 
> 标签：php, xml, foreach, str-replace

```
<?php
$xml = simplexml_load_file("xmldocumentation.xml") 
   or die("Error: Cannot create object");

 foreach($xml->children() as $pages){
   foreach($pages->children() as $page => $data){
   echo $data->id;
   echo '<br>';
   echo $data->timestamp;
   //echo $data->revision;
   echo "<br />";
   echo str_replace("/===[^=]+===/","bold heading here", $data->text);
   echo '<p class="text">'.$data->text.'</p>';

  }
}

?> 
```

使用 php 我如何将由 php 的 str_replace 函数替换的文本加粗，并用粗体标题显示修改后的内容，即。' **=== 标题 ===** '?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:30:50.627

改变

```
 echo str_replace("/===[^=]+===/","bold heading here", $data->text); 
```

至

```
 $data->text = preg_replace("/===([^=])+===/","<strong>$1</strong>", $data->text); 
```

您需要`preg_replace`正则表达式，并且需要捕获要加粗的文本（通过`()`），然后将该文本包含在 HTML 元素中，该元素将为您提供所需的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:33:17.100

一个`<b> </b>`可以做的伎俩！

```
$strlst = 'lorem ipsum';

$strlst = explode( ' ' , $strlst );
function wrapTag($inVal){
   return '<b>'.$inVal.'</b>';
}
$replace = array_map( 'wrapTag' , $strlst );

$Content = str_replace( $strlst , $replace , $Content );

echo $Content; 
```

# jquery - 带有淡入/淡出和加载问题的 Jquery 对话框

> ID：14842115
> 
> 赞同：3
> 
> 时间：2013-02-12T21:24:33.833
> 
> 标签：jquery, jquery-ui, dialog, modal-dialog

我的客户在加载内部页面时想要一个淡入/淡出图像。这是有问题的页面：http: [//angelynngrant.com/mei3/ouragency.html](http://angelynngrant.com/mei3/ouragency.html)

问题：（1）fadeIn不起作用；(2) fadeOut 有效，但在 'destroy' 之前留下一个幻影矩形；(3) 经常加载（和刷新），模式出现在窗口的左上角，然后“跳跃”到位以淡出。

我已经调整了我的 CSS 以使对话框的大多数元素消失和/或透明（例如 .ui-dialog .ui-dialog-titlebar {visibility:hidden; background:transparent;}）。

我在标题中有负载：

```
<script type="text/javascript">                                         
    $(window).load(function() {                         
        $("#ModalSlide7").dialog({
            width: 564,
            height: 808,
            modal: true
        }); 
        $(".ui-dialog-titlebar").hide(); 
    });
</script> 
```

我在正文中有其余的模态：

```
<div id="ModalSlide7">
    <img id="slide7" src="images/7.jpg" alt="Game of Authors vintage game">

    <script type="text/javascript">
        $('#slide7').fadeIn(3000, function() {
            $('#slide7').fadeOut(3000).queue(function (next) {
                $('#ModalSlide7').dialog('destroy').remove();
            });
        });
    </script>
</div> 
```

任何帮助将不胜感激。

（注：网站设计/造型尚未完成。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T23:09:08.333

这是一个我认为你所追求[的演示。](http://jsfiddle.net/FQ6Q2/20/)希望这可以帮助！

```
$(function () {

    // On document ready setup your dialog to define what happens
    // when it gets shown and hidden and some basic settings
    $("#dialog").dialog({
        autoOpen: false,
        draggable: false,
        resizable: false,
        show: {
            effect: 'fade',
            duration: 2000
        },
        hide: {
            effect: 'fade',
            duration: 2000
        },
        open: function(){
            $(this).dialog('close');
        },
        close: function(){
            $(this).dialog('destroy');
        }
    });

    $(".ui-dialog-titlebar").remove();

    // Finally open the dialog! The open function above will run once
    // the dialog has opened. It runs the close function! After it has
    // faded out the dialog is destroyed
    $("#dialog").dialog("open");
}); 
```

我认为您的困惑来自 jquery ui 对话框和一般 jQuery 函数提供的混合功能（例如，您正在使用`fadeIn`而不是在调用函数时将对话框配置为淡入`show`）。这是所有功能和大量示例[的大列表！](http://api.jqueryui.com/dialog/)

# jquery - 在 MVC4 控制器中获取表单值

> ID：14842118
> 
> 赞同：1
> 
> 时间：2013-02-12T21:24:43.027
> 
> 标签：jquery, asp.net-mvc-4

我有以下由 jQuery ajax 提交的 html 表单。我似乎无法理解如何从我的控制器内部从输入文本框的 ' 中获取值。我本来希望 Request.Form["waitMinutes"] 可以工作，但它在我的控制器中出现为空。

从我的控制器中获取表单值的秘诀是什么？

```
<form method="post" action=@Url.Action("UpdateWaitTime", "Facilities")' data-ucw-updateWaitTimeForm="@facility.Id" style="display:none" >
    <input type="hidden" id='faciility' value="@facility.Id" />
    <input type="text" id="waitMinutes" value="0" style="width:15px" />
    <input type="submit" value="Update Wait Time" />
    <span class="UpdateMessage"></span>
</form> 
```

**我的 Jquery ajax 提交代码是：**

```
var ajaxUpdateWaitTime = function () {
        var $form = $(this);

        var options = {
            url: $form.attr('action'),
            type: $form.attr('method'),
            data: $form.serialize()
        };

        $.ajax(options).done(function (data) {
        ...
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:51:35.913

如果您想将输入的值发送回服务器，您需要给他们一个`name`（给他们一个 id 是不够的）。

来自[jQuery.serializable 文档](http://api.jquery.com/serialize/)（重点由我添加）

> 对于要包含在序列化字符串中的表单元素的值，**该元素必须具有 name 属性**

因此，只需提供您的输入`name`，它应该可以正常工作：

```
<form method="post" action=@Url.Action("UpdateWaitTime", "Facilities")' 
      data-ucw-updateWaitTimeForm="@facility.Id" style="display:none" >
    <input type="hidden" name='faciility' id='faciility' value="@facility.Id" />
    <input type="text" name="waitMinutes" id="waitMinutes" value="0" 
           style="width:15px" />
    <input type="submit" value="Update Wait Time" />
    <span class="UpdateMessage"></span>
</form> 
```

# templates - Joomla 模板未正确安装

> ID：14842120
> 
> 赞同：0
> 
> 时间：2013-02-12T21:24:56.293
> 
> 标签：templates, joomla, joomla2.5

我正在制作一个自定义的 joomla 模板。每次我尝试从后端安装它时，它都会上传但不安装。我检查了所有目录列表和东西，但似乎找不到问题所在。这是我的 templatedetails.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE install PUBLIC "-//Joomla! 2.5//DTD template 1.0//EN"              "http://www.joomla.org/xml/dtd/1.6/template-install.dtd">
<extension version="2.5" type="template" client="site">
<name></name>
<creationDate></creationDate>
<author></author>
<authorEmail></authorEmail>
<authorUrl></authorUrl>
<copyright>Copyright (C)</copyright>
<version>2.0</version>
<description></description>

<files>
    <folder>css</folder>
    <folder>images</folder>
    <folder>js</folder>
    <filename>index.php</filename>
    <filename>templateDetails.xml</filename>
</files>

<positions>
    <position>message</position>
    <position>search</position>
    <position>logo</position>
    <position>menu</position>
    <position>image slider</position>
    <position>left menu</position>
    <position>right menu</position>
    <position>twitter</position>
    <position>aboutA</position>
    <position>aboutB</position>
    <position>aboutC</position>
    <position>info</position>
    <position>footer</position>
    <position>banner</position>
    <position>Small-banner</position>
    <position>facebook</position>
    <position>contact-form</position>
    <position>banner-third</position>
</positions>

</extension> 
```

名称和详细信息都在 zip 文件中。

这是我的 index.php

```
<?php defined( '_JEXEC' ) or die( 'Restricted access' );?> 
```

```
 <body>
  <div class="container">
 <div class="row">
 <h1><a href="index.html"><img src="images/logo1.png" alt="South Georgian Bay Community Health Center. Every One Matters"/></a></h1>
 </div>
<div class="row">
<section class="sixteen columns">
    <jdoc:include type="modules" name="mainmenu" style="xhtml"/>
</section>
</div> 
```

```
<section class="sixteen columns">
    <div id="sliderFrame">
    <div id="slider"> 
        <img src="images/image-slider-1.jpg" alt=" " />
        <img src="images/image-slider-2.jpg" alt=" " />
        <img src="images/image-slider-3.jpg" alt=" " />
        <img src="images/image-slider-4.jpg" alt=" " />
        <img src="images/image-slider-5.jpg" alt=" "/>
 <jdoc:include type="modules" name="slideshow" style="xhtml"/>
    </div>
    </div>
    </section>

</div>
<div class="row">
<section="sixteen columns"><p></p></section>
<section="seven columns"><p></p></section>
</div>
<div class="row">
<section class="twelve columns">
        <jdoc:include type="message" /> 

        <jdoc:include type="component" style="xhtml"/>
    </section>
    <section class="four columns ">
         <jdoc:include type="modules" name="twitter" style="xhtml"/>
    </section>
</div>

<div class="row">
<section class="five columns">
<jdoc:include type="modules" name="aboutA" style="xhtml"/>
</section>

<section class="five columns">
<jdoc:include type="modules" name="aboutB" style="xhtml"/>
</section>

<section class="five columns">
<jdoc:include type="modules" name="aboutC" style="xhtml"/>
</section>

</div>
<div class="row">
<section class="sixteen columns">
<jdoc:include type="modules" name="footer" style="xhtml"/>
</section>
</div>
</div> 
```

由于某种原因，它没有正确显示我的头部。我正在使用网格进行布局。任何人都可以帮助我，因为我已经尝试了一段时间并且找不到解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-06T10:23:29.010

请验证您的 xml。

改变：

```
section="sixteen columns" 
```

至

```
section class="sixteen columns"... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:16:39.563

无论您是否使用网格框架，它总是归结为 URL 或 href= 直接在 index.php 文件中链接到您的样式表和图像。这只是在 5 分钟前发生在我身上，并且一直发生在我身上，我从不回头看大局。

首先，我不知道为什么，但我认为出于某种奇怪的原因，您应该或必须包含一个`<filename>index.html</filename>`空白文件。

下一个

你还需要一个`favicon.ico`在你的模板细节和一个实际`favicon.ico`的模板根目录。我确实相信这是强制性的，或者破坏了模板，或者导致直接从 joomla 下的安装上传失败！

我遇到的问题是，即使我的样式表似乎被调用了，但它们实际上并没有被调用，所以我所做的以及将来在构​​建 joomla 模板时将始终做的事情是在我对文件的所有引用中替换它头部或其他地方。

可以说你有 `href="css/bootstrap.min.css"` 什么的。添加这个

```
<?php echo $this->baseurl ?>
/templates/
<?php echo $this->template ?>/ 
```

让它

```
href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/bootstrap.min.css" 
```

如果没有其他工作，这将是一个很好的做法。

你也不能！不能在标签的开头忘记这一点`<jdoc:include type="head" />`

你没有显示你所有的 index.php 所以我不知道..

# java - 为什么我的 IDE 能找到 JAR 而我的命令行却没有？

> ID：14842124
> 
> 赞同：0
> 
> 时间：2013-02-12T21:25:30.033
> 
> 标签：java, command-line, jar, classpath

我试过四处寻找，但找不到任何适合我的情况的答案。

当我使用 IDE 时，我可以很好地运行文件 CB.java。该文件依赖于 cs2.jar 中指定的类。这是其目录的内容。

```
02/12/2013  03:43 PM    <DIR>          .
02/12/2013  03:43 PM    <DIR>          ..
02/12/2013  03:45 PM             2,226 CB.class
02/12/2013  01:21 PM             2,164 CB.java
02/12/2013  03:43 PM            71,128 cs2.jar
               3 File(s)         75,518 bytes
               2 Dir(s)  408,977,362,944 bytes free 
```

当我从 IDE 运行它时，CB.java 工作得很好。`java CB`但是，当我在命令行中尝试时，我得到：

```
Exception in thread "main" java.lang.NoClassDefFoundError: sn/visual/JRect
angle
Caused by: java.lang.ClassNotFoundException: sn.visual.JRectangle
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: CB.  Program will exit. 
```

此外，我尝试使用以下建议向类路径添加一些内容：

```
>java -cp C:\Users\...blah blah blah...\Software_Engineering cs2
Exception in thread "main" java.lang.NoClassDefFoundError: cs2
Caused by: java.lang.ClassNotFoundException: cs2
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: cs2\.  Program will exit. 
```

为什么我的 IDE 很聪明，但我的命令行却不聪明？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:27:49.327

类路径设置为仅考虑`.class`给定目录中的文件。您需要将 jar 文件添加到类路径中：`java -cp C:\somewhere\cs2.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:28:06.970

> 为什么我的 IDE 很聪明，但我的命令行却不聪明？

我怀疑在您的 IDE 中，您已将 jar 文件包含在构建路径中，因此它会在构建和运行时包含它。（你还没有告诉我们它是哪个 IDE，所以很难使用它会使用的确切术语）

在命令行上，您还需要在构建和运行时指定 jar 文件，因此您可以使用：

构建：

```
javac -cp cs2.jar CB 
```

跑步：

```
java -cp .;cs2.jar CB 
```

# git - 如何使用 git repack -a -d --depth=250 --window=250

> ID：14842127
> 
> 赞同：19
> 
> 时间：2013-02-12T21:25:39.343
> 
> 标签：git

我已经看到`git gc --aggressive --prune`并`git repack -a -d --depth=250 --window=250`建议减少不需要长本地历史记录的本地 .git 文件夹的大小。从我的阅读来看，它似乎`git-repack`是首选，有人可以对此发表评论吗？

我真正想知道的是如何决定 和 的`depth`值`window`。我使用 git 提交、推送、拉取和合并，我不知道增量链或对象窗口是什么。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-07T18:27:57.380

我用不同的值进行了一些测试。这太大了，无法评论 twalbergs 的答案。

我的公司有一个代码库，它一直在 svn、mercurial 和现在的 git 中。它已有 10 年历史，有 21,000 次提交。

在打包之前它是 3.1 GB。重新打包后，它缩小到以下值：（
每次在 3.1GB 文件夹的新克隆上运行重新打包）。

```
git repack -a -d --depth=50 --window=10 -f
141.584 MB

git repack -a -d --depth=250 --window=1000 -f
110.484 MB

git repack -a -d --depth=500 --window=1000 -f
110.204 MB 
```

他们在我的四核 Mac 上分别花费了大约 5、15 和 30 分钟。

* * *

**更新：**

我拿了第二个重新包装（250,1000）并用 500 和 1000 重新包装，看看新的 3.1gb 存储库和已经重新包装的 110mb 存储库之间是否有任何区别。

```
git repack -a -d --depth=250 --window=1000 -f
110.484 MB
git repack -a -d --depth=500 --window=1000 -f
110.212 MB 
```

结论：重新打包 500、1000 生成一个 110.2 MB 的文件，无论它是否已经打包。

**更新2：**

我进一步好奇，如果在已经重新打包的 repo 上运行具有较低值的重新打包会导致大小增加。

```
git repack -a -d --depth=500 --window=1000 -f
110.204 MB
git repack -a -d --depth=50 --window=10 -f  
142.056 MB 
```

结论：重新打包导致 repo 大小从 110 MB 膨胀到 ~140 MB

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-12T21:46:38.727

“对象窗口” - 在重新打包时，`git`将每个对象（每个文件的每个版本、每个目录树对象、每个提交消息、每个标签……）与一定数量的其他类似对象进行比较，以找到一个创建最小增量的对象- 粗略地说，可以从该基础对象创建该对象的最小补丁。

“增量链” - 为了重新创建对象 A，您首先必须检查对象 B 并对其应用增量，但要创建 B，您需要对象 C，这需要 D ....

在某种程度上，增加两者`depth`，`window`可以给你更小的包。但是，也有取舍。对于`window`，较高的设置意味着`git repack`将在运行时将每个对象与更多对象进行比较，从而（可能显着地）延长 的运行时间`git repack`。但是，一旦生成了包，`window`就不会影响进一步的操作（`repack`无论如何，在其他 s 之外）。`depth`另一方面，它对`git repack`自身运行时间的影响较小（尽管它仍然会有所影响），但是增量树越深，从所需的基础对象序列重新构建旧对象所需的时间就越长创建文件。这意味着诸如此类的事情需要更长的时间`checkout`当您引用较旧的提交时，`git`如果您对历史进行大量挖掘，它可能会对感知效率产生重大影响。而且，由于`git`不会仅针对较旧的对象创建增量，因此您有时会发现一个提取速度较慢的最近对象，因为它位于树下的多个级别 - 它不像较旧的对象那样常见，但确实会发生。

除了几个非常大的项目（例如Linux内核）的克隆之外，我个人在我的所有存储库中都使用`window=1024`and 。`depth=256`

# perl - 在 Activestate Perl 中重定向 stdin/stderr/stdout 时写入控制台

> ID：14842131
> 
> 赞同：2
> 
> 时间：2013-02-12T21:26:10.590
> 
> 标签：perl, winapi, console, windows-console, activestate

我有以下代码要写入 Windows 命令控制台：

```
use Win32::Console;
my $console = new Win32::Console(Win32::Console::STD_ERROR_HANDLE());
my $defaultAttribute = $console->Attr();
my $defaultFG = ($defaultAttribute & 0x0F);
my $defaultBG = ($defaultAttribute & 0xF0);
$console->Attr($defaultBG | $Win32::Console::FG_LIGHTGREEN);
$console->Write("blah blah");
$console->Attr($defaultAttribute); 
```

如果用户在调用我的脚本时重定向 STDERR，此代码将失败：

```
perl myscript.pl 2> foo 
```

如何在不参考标准句柄之一的情况下获得该进程所附加到的 Win32 控制台的句柄，以便用户进行何种重定向无关紧要？

我想要的效果是能够在正常程序输出之后立即在控制台上写一条消息，而不管以与 bash 内置`time`命令类似的方式进行的任何重定向。本质上，类似于`/dev/tty`在 Unix 中打开和写入。

我试图`my $console = new Win32::Console()`分配一个新的控制台，`$console->Display()`但这完全是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:16:07.023

在问了这个问题之后，我进行了更深入的研究，并且能够通过使用一个讨厌的 hack 来解决它：

```
use Win32API::File qw(createFile);
use Win32::Console;

my $handle = createFile('CONOUT$', 'rwke') or die "conout\$: $^E\n";
# my $console = new Win32::Console($handle) or die "new console: $^E\n";
my $console = bless {handle => $handle}, 'Win32::Console'; 
```

我查看了`new()`内部函数的代码`Win32::Console`，发现它只是创建了一个包含控制台句柄的哈希。如果参数指定stdin/stdout/stderr，它只检索关联的句柄，否则它会创建一个新的控制台屏幕缓冲区并为此使用句柄。

所以我只是手动创建了`Win32::Console`包含 CreateFile 返回的控制台句柄的对象。

所以现在`perl myscript.pl > nul 2> nul < nul`将`blah blah`在命令行下方的屏幕上直接写入。

如果有人想出一个更好的答案，我会接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:55:30.063

根据[AllocConsole()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)文档（C++ 文档，但概念相同）：

“一个进程只能与一个控制台关联，因此如果调用进程已经有一个控制台，则 AllocConsole 函数会失败。进程可以使用 FreeConsole 函数将自己与当前控制台分离，然后它可以调用 AllocConsole 创建一个新控制台或 AttachConsole 以附加到另一个控制台。”

由于您的控制台已被重定向，因此您似乎无能为力。即使您分离控制台并分配一个新控制台，新控制台也会继承重定向。在 C++ 中，您将使用[SetStdHandle()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686244%28v=vs.85%29.aspx) API 来强制标准句柄指向不同的文件或设备，但我找不到任何与之等效的 Perl。

# azure - Azure/Wasabi：证书永远不会进入 CurrentUser/My 商店

> ID：14842132
> 
> 赞同：0
> 
> 时间：2013-02-12T21:26:13.243
> 
> 标签：azure, certificate, autoscaling, wasabi

我正在尝试让 Wasabi（企业库自动缩放块）在 Azure 辅助角色中工作。Wasabi worker 角色（Extra Small，完全信任）在同一个服务中扩展不同的 worker 角色。它可以在具有相同配置的本地控制台应用程序中完美运行 - 鉴于错误，证书无法进入 VM。我正在使用最新版本的 Azure SDK、企业库自动缩放块和 Azure 门户。

以下是我根据这些文档采取的步骤：http: [//msdn.microsoft.com/en-us/library/hh680937 (v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/hh680937(v=pandp.50).aspx)

1.  我按照此处的说明创建了一个管理证书：http: [//msdn.microsoft.com/en-us/library/gg432987.aspx](http://msdn.microsoft.com/en-us/library/gg432987.aspx)。
2.  我用私钥导出了 .pfx 并给了它一个密码。
3.  我将 .cer 上传到门户上的设置->管理证书部分。
4.  我将带有正确密码的 .pfx 上传到 Cloud Services->(My Service)->Certificates，注意到列出的指纹。
5.  我创建了一些简单的规则来扩展我的应用程序几个实例，并正确配置服务信息以使用我的新证书。XML 文件位于 blob 存储中。这个确切的配置在我的本地机器上的控制台应用程序中运行良好。
6.  我使用正确的证书名称和指纹在 Wasabi 角色的配置中添加了一个条目。我将其设置为使用 CurrentUser\My 商店。我确认 .csdef 和 .cscfg 文件已正确更新。
7.  我使用发布工具将该服务部署到 Azure 上的暂存区。证书配置设置正确显示在角色的配置设置中。
8.  它不会扩展应用程序。我检查了跟踪条目，在尝试拉取访问管理 API 时出现异常。它正在尝试访问正确的订阅，并且正在尝试在正确的存储中找到正确的证书指纹，因此我的配置正在正确加载。它声称在该商店中找不到具有该指纹的证书。

我尝试了 LocalMachine\My 存储（在角色证书设置和服务信息存储 XML 中配置），我得到了一个不同的异常，[即 Azure WASABi SecurityNegotiationException](https://stackoverflow.com/questions/12177333/azure-wasabi-securitynegotiationexception)中列出的错误。该修复最终要交给 CurrentUser，所以这对我没有帮助。

我尝试了 CurrentUser\LocalMachine 和不同商店的许多其他组合，所有 CurrentUser 位置都会导致证书未找到，所有 LocalMachine 商店都会导致其他异常。

我三重检查了角色设置、门户（证书页面）和服务信息文件中的指纹，它们都匹配。

然后我启用了远程桌面并登录到 Wasabi 角色实例，并使用 MMC 查看本地计算机和当前用户的证书配置。当我在角色证书设置中选择 LocalMachine 存储时，证书确实显示在 LocalMachine 存储中，这告诉我证书已正确安装在服务中并且指纹匹配。选择 CurrentUser 存储时，证书在任何地方都不可见。这可能是因为 RDP 使用的用户与服务不是同一用户，但它确实与错误匹配。

所以，总结一下：

1.  证书已正确配置并安装在门户中（订阅的管理证书和服务证书）。
2.  显然，您必须为 Wasabi 角色使用 CurrentUser 位置，而不是 LocalMachine 位置（根据链接的 SO 问题）。
3.  当我尝试安装到 CurrentUser 时，证书没有被放置在 VM 中，至少不是角色可以找到它的任何地方。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:54:22.967

请参阅我对此[SO POST](https://stackoverflow.com/questions/14448689/azure-autoscaling-works-locally-but-not-when-deployed/14468164#14468164)的回答。证书必须在 LocalMachine 中，并且由于 SDK 1.8 和 Server2012 角色初始化中的配置更改，您必须以提升的权限运行辅助角色，以授予 NETWORK SERVICE 对证书私钥的访问权限。编辑 ServiceDefinition.csdef

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="blah" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <WorkerRole name="blah" vmsize="Small">
    <Runtime executionContext="elevated" />
    ...      
   </WorkerRole>
</ServiceDefinition> 
```

# video - 如何优化 FFMPEG/编辑视频？

> ID：14842136
> 
> 赞同：0
> 
> 时间：2013-02-12T21:26:23.040
> 
> 标签：video, ffmpeg

我有下一个用于编辑视频的命令，但所有过程都需要很长时间。但具有与原始视频相同的质量。

```
//First cut original video
exec("ffmpeg -i $video_path_main -ss $first_time1 -t $first_time2 -s 476x268 -r 10 -b 2000k -r 30 -g 100 -ar 22050 -ab 48000 -ac 1 -strict -2 $name_first");
exec("ffmpeg -i $video_path_main -ss $second_time1 -t $second_time2 -s 476x268 -r 10 -b 2000k -r 30 -g 100 -ar 22050 -ab 48000 -ac 1 -strict -2 $name_second");

$name_edit_second = uniqid() . '.mp4'; //Then editing the second video
exec("ffmpeg -i $name_second -s 476x268 -r 10 -b 2000k -r 30 -g 100 -ar 22050 -ab 48000 -ac 1 -strict -2 -vf movie='" . $image_name . " [watermark]; [in] [watermark] overlay=308:43"."' $name_edit_second");

//Then merge video file mp4 with Mencoder
$name_total_1 = uniqid() . '.mp4';
exec("mencoder -oac pcm -ovc xvid -vf scale -xvidencopts bitrate=460 -o $name_total_1 ".$name_first.' '.$name_edit_second);

//Then convert the video to 3 formats that is necessary in my Player.
$name_total = uniqid();

//Of MP4 a FLV
exec("ffmpeg -i $name_partial -f flv -s 476x268 -r 10 -b 2000k -r 30 -g 100 -ar 22050 -ab 48000 -ac 1 $name_total.flv");

//Of MP4-Mencoder a MP4-FFMPEG
exec("ffmpeg -i $name_partial -s 476x268 -r 10 -b 2000k -r 30 -g 100 -ar 22050 -ab 48000 -ac 1 -strict -2 $name_total.mp4"));

//Of MP4 a WEBM
exec("ffmpeg -i $name_partial -acodec libvorbis -s 476x268 -r 10 -b 2000k -r 30 -g 100 -ar 22050 -ab 48000 -ac 2 -f webm $name_total.webm"); 
```

我不知道某些参数是否需要很长时间才能完成所有过程。或者，如果此命令之一需要很长时间。

注意：有些视频有超过 2 个部分的原始视频。

* * *

## 更新

也许该参数`-theards 1`可以帮助我不占用大量 CPU 资源。另外，我需要优化重新编码，因为只有 8 个用户占用了 100% 的资源。

我在另一台服务器上运行 FFMPEG，将编辑的视频返回到我的应用程序所在的其他服务器。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:37:17.660

### 制作分段和叠加图像

```
ffmpeg -i input.flv -i image.jpg -ss 30 -t 5 -c:v libx264 -preset medium \
-crf 23 -filter_complex overlay=308:43 -c:a libfaac -q:a 100 output1.mp4

ffmpeg -i input.flv -i image.jpg -ss 60 -t 5 -c:v libx264 -preset medium \
-crf 23 -filter_complex overlay=308:43 -c:a libfaac -q:a 100 output2.mp4 
```

### 连接段并编码

首先制作解复用器将从中读取的文件列表。`list.txt`在本例中命名为：

```
echo "file 'output1.mp4'" >> list.txt
echo "file 'output2.mp4'" >> list.txt 
```

内容`list.txt`很简单：

```
file 'output1.mp4'
file 'output2.mp4' 
```

现在连接视频`output1.mp4`并`output2.mp4`使用[concat demuxer](http://ffmpeg.org/ffmpeg-formats.html#concat)。解复用器将使用列出的文件`list.txt`作为输入：

```
ffmpeg -f concat -i list.txt -c copy -movflags faststart final.mp4
ffmpeg -f concat -i list.txt -c:v libvpx -c:a libtheora -q:a 3 final.webm 
```

这`-movflags faststart`将允许 mp4 文件在完全下载之前在 JW Player 中开始播放。您将希望在 webm 示例中添加某种速率控制方法（例如`-b:v`）。我不熟悉这个编码器，默认值不是很好。

现在，您在 MP4 容器中有一个包含 H.264 视频和 AAC 音频的文件，在 webm 容器中有一个包含 VP8 视频和 Vorbis 音频的文件，它应该为各种浏览器提供良好的覆盖。

### 也可以看看

*   [FFmpeg 和 x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)
*   [FFmpeg 和 AAC 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/AACEncodingGuide)
*   [如何连接（加入、合并）媒体文件](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files#demuxer)

# sql-server - get descendants in hierarchyid sql server

> ID：14842141
> 
> 赞同：0
> 
> 时间：2013-02-12T21:26:39.150
> 
> 标签：sql-server, hierarchy

I am attaching image of my problem below:-

![enter image description here](../Images/874e8a348a18e43c3ff770fd49489681.png)

If you can see I am running the query correctly to get the child of the specific node.

But i am getting the node itself together with it which i don't want.

Can you please suggest something?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:33:20.487

and cms.ManagementHierarchy.ToString() <> @CurrentNode ?

# jquery - 子选择（检查）在 Jquery 中具有指定标签的复选框

> ID：14842143
> 
> 赞同：0
> 
> 时间：2013-02-12T21:26:43.427
> 
> 标签：jquery, checkbox

我有一个棘手的 jquery 问题；我希望能够选择特定复选框的所有子项，当它具有跨度类标识符和内容时'-'

在下面的例子中；我希望在检查“Alarme”时同时检查“Alarmes domestiques”和“Contrôle d'accès”；当我取消选择它时也是相反的动作。

一定很简单，但我不是 Jquery 专家。

谢谢 ！

![布局](../Images/06fa51ab803f0161a0b0b39186bee8b2.png)

我有以下代码：

```
<tbody>
 <tr class="odd">
     <td>
     <div class="form-item-2-0-checkboxes-1--1">
         <input type="checkbox" name="2[0][checkboxes][1][-1]" value="1">
     </div>
     </td>
     <td>
          <span class="indenter"></span>
          <a href="/taxonomy/term/1" class="depth-0">Alarmes</a>
     </td>
 </tr>
 <tr class="even">
     <td>
         <div class="form-item-2-0-checkboxes-4--1">
              <input type="checkbox" name="2[0][checkboxes][4][-1]" value="1">
         </div>
     </td>
     <td>
          <span class="indenter">--&nbsp;</span>
          <a href="/taxonomy/term/4" class="depth-1">Alarmes domestiques</a>
     </td> 
 </tr>
 <tr class="odd">
     <td>
          <div class="form-item-2-0-checkboxes-5--1">
              <input type="checkbox" name="2[0][checkboxes][5][-1]" value="1">
          </div>
     </td>
     <td>
          <span class="indenter"></span>
          <a href="/taxonomy/term/2" class="depth-0">Aménagement</a>
     </td> 
 </tr>
 <tr class="even">
      <td>
          <div class="form-item-2-0-checkboxes-3--1">
              <input type="checkbox" name="2[0][checkboxes][3][-1]" value="1">
          </div>
      </td>
      <td>
          <span class="indenter"></span>
          <a href="/taxonomy/term/3" class="depth-0">Sanitaires</a>
      </td> 
 </tr>
 </tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:26:46.937

好的，试试看，还不是很好的代码。

```
$checkboxes = $("span.indenter:empty").parent().prev().children().children();
$checkboxes.click(function(){
    var $t = $(this);
    var checked = $t.is(':checked');
    var $tr = $t.parent().parent().parent();
    var child;

    do {    $tr = $tr.next();
            if(!$tr.length) return;
            child = ! $tr.children(":nth-child(2)").children("span").is(":empty");
            if( child )
                $tr.children(":nth-child(1)").children().children().prop('checked',checked);
    } while(child);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:45:03.713

选中“警报”框以选中其他两个框后，您可以使用 jQuery 触发事件。将两个子项放在同一个类中（对于这个例子，我们会说“subChk”是类）

```
 $("#Alarmes").click(function() {
        $(".subChk").prop('checked', $("#Alarmes").is(':checked')); 
    }); 
```

谢谢指正。

# google-maps - 使用谷歌地图将端口添加到 url 现有 i

> ID：14842145
> 
> 赞同：1
> 
> 时间：2013-02-12T21:26:50.343
> 
> 标签：google-maps, google-maps-api-3

我正在尝试将端口添加到现有的 url/ip`http//181.48.32.122.` 这是端口 3001，我希望它添加到 ip`http//181.48.32.122` 我正在使用这种方式`http//181.48.32.122:3001`，但我收到一个错误，它说“`http://181.48.32.122:3001`您输入的 URL 是多余的。请检查”注册授权URLs”链接并删除多余的 URL。” 我阅读了注册授权 URL 的文档，并且有一个示例说必须将端口添加到 de url 现有示例`http://example.com:8080`

我应该纠正什么？

我等你的答案谢谢

# javascript - 类或 id 的 jQuery 异常

> ID：14842146
> 
> 赞同：1
> 
> 时间：2013-02-12T21:27:06.283
> 
> 标签：javascript, jquery, html, class, checkbox

我有一张带复选框的桌子。标题复选框可以全选/取消全选。我还有一个图像（#delAllPort），它从表中删除了选中的行。我需要对检查所有内容的复选框（及其对应的行）做出预期，以使标题永远不会被删除。我在课堂上使用了 .not() ，但它似乎不起作用。提前致谢。这是我的 jQuery：

```
$('#delAllPort').click(function(){
  $('tr:has(input:checkbox:checked)').not('.selAllChksInGroup').each(function(){
    $(this).remove();
  });
}); 
```

...这是jsfiddle：

[http://jsfiddle.net/anschwem/8kDRe/](http://jsfiddle.net/anschwem/8kDRe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:40:33.187

```
$('tr:has(input:checkbox:checked:not(.selAllChksInGroup))').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:40:57.187

改变

```
$('tr:has(input:checkbox:checked)').not('.selAllChksInGroup') 
```

至

```
$('tr:has(input:checkbox:checked)').not('tr:has(input.selAllChksInGroup)') 
```

因为您的选择器是选择 TR 而不是 INPUT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:40:12.707

将类添加`selAllChksInGroup`到 tr 而不是 td：http: [//jsfiddle.net/8kDRe/3/](http://jsfiddle.net/8kDRe/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T21:41:24.130

用 包围“标题”，用 包围`<thead>`其余行`<tbody>`。然后，只需选择`<tbody>`要删除的行：

```
$('tbody tr:has(input:checkbox:checked)').remove(); 
```

[http://jsfiddle.net/8kDRe/4/](http://jsfiddle.net/8kDRe/4/)

# c# - 如果没有值传递给水晶报表中的参数，如何显示所有值？

> ID：14842147
> 
> 赞同：0
> 
> 时间：2013-02-12T21:27:07.800
> 
> 标签：c#, crystal-reports, crystal-reports-2008

我有一个包含参数字段的水晶报表。只要我将值传递给参数字段，它就可以完美地工作。但我想要做的是我想在没有传递参数时显示所有值。当我不传递参数时，会出现一个对话框，告诉我选择要传递给参数的值。为了解决这个问题，我尝试将我使用的所有值传递给参数并将它们存储在一个数组中。我试图传递这个数组但失败了。谁能帮我解决这个问题。

PS：数组的事情只是因为我想不到别的。

```
rpt_Uni uniRpt = new rpt_Uni();  
uniRpt.SetDataSource(UniDS.Tables["Uni"]);

if (cmb_Report.SelectedIndex == 0)
{ uniRpt.SetParameterValue("UniParam", txt_UniName.Text); }
else
{ 
    uniRpt.SetParameterValue("UniParameter", ""); 
}

crystalReportViewer1.ReportSource = uniRpt;
crystalReportViewer1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:07:19.070

如果您可以访问整个参数值列表（或者它是静态的并且不会更改），您可以执行以下操作：

```
StringVar ParameterList;
If IsNull({?InputParameter}) then
  // to-do assemble your entire list into one string: ThatString
  ParameterList := ThatString;
else
  ParameterList := ToText({?InputParameter}); 
```

# html - 用户生成 50% 宽度的图像并排填充

> ID：14842148
> 
> 赞同：1
> 
> 时间：2013-02-12T21:27:16.273
> 
> 标签：html, css

我正在使用 Kirby CMS 构建网站，我需要能够让用户将图像放在占容器 50% 的页面上并向左浮动（因此旁边会出现第二个 50% 的图像） .

我几乎让它工作了——图像是并排的，但如果我添加任何边距，第二张图像当然会换行。因为我使用过`box-sizing: border-box`，我可以使用填充在它们之间创建一些空间，同时将它们保持在一条线上，但是图像的边框和阴影会随着填充而扩展。

由于此内容是用户通过管理面板生成的，因此我无法将每个图像显式包装在其自己的 div 中（我通常可以在其中应用填充）。我还有其他路线可以走吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:48:24.423

正如**Flauwekeul 所**提到的，负利润起到了作用。

```
img.half {
    float: left;
    max-width: 50%;
    margin-right: 20px;
}
img.half:nth-child(even) {
    margin-right: -20px;
} 
```

# c# - 从 WPF 中的数据绑定数据网格中排除列

> ID：14842151
> 
> 赞同：3
> 
> 时间：2013-02-12T21:27:23.713
> 
> 标签：c#, wpf, data-binding, datagrid, blend

我有一个`ObservableCollection<SolarSystemViewModel>`where`SolarSystemViewModel`来自`ViewModelBase`. 当我`ViewModelBase`绑定`IsInDesignMode`到`IsInDesignModeStatic`我的`ObservableCollection`. 如何在默认情况下从数据网格中隐藏这些列，而不必使用 Blend 生成 XAML，然后手动禁用这些列？

谢谢。

例子： ![在此处输入图像描述](../Images/a5c38feb67e2d67835693b3195df8d29.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-03T10:13:10.763

我也一直在寻找这个问题的答案。这是一个非常好的解决方案：

像这样绑定 DataGrid 的属性“OnAutoGeneratingColumn”（注意 XAML 不是 100% 完成）：

```
<DataGrid AutoGeneratingColumn="OnAutoGeneratingColumn" /> 
```

在您的 CodeBehind 中：

```
private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    PropertyDescriptor propertyDescriptor = (PropertyDescriptor)e.PropertyDescriptor;
    e.Column.Header = propertyDescriptor.DisplayName;
    if (propertyDescriptor.DisplayName == "IsInDesignMode")
    {
        e.Cancel = true;
    }
} 
```

**“e.取消=真；”** 将阻止生成当前列。这就是您可以轻松地从 DataGrid 中排除列的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-05T17:31:42.937

一旦我想到它，这很简单。MS 让我们保持良好状态，因为我们可以使用 Path 访问 ObservableCollection 的 T 值的属性。这将使用来自数据网格的结果更新可观察的集合。我使用绑定到保存按钮的 ICommand 将 prism 用于更新/插入端。我使用 SQLite 的查询支持以相同的方法插入和更新，这让生活变得轻松。为了澄清起见，我正在使用 Unity 和 Prism 关注 MVVM。

```
<DataGrid Name="_dgProtocolSource" HorizontalAlignment="Left" Margin="-161,-61,-162,-163" AutoGenerateColumns="False" VerticalAlignment="Top" Width="365" Height="224" SelectionMode="Single" ItemsSource="{Binding OCSource, Mode=TwoWay}" CanUserAddRows="True" CanUserDeleteRows="True" >
        <DataGrid.Columns>
            <DataGridTextColumn Header="ColumnName1" Binding="{Binding Path=Property1}" />
            <DataGridTextColumn Header="ColumnName2" Binding="{Binding Path=Property2}"/>
            <DataGridTextColumn Header="ColumnName3" Binding="{Binding Path=Property3}"/>
        </DataGrid.Columns> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:17:48.050

请尝试手动定义列..类似的东西。

```
<dg:DataGrid x:Name="myDataGrid" ItemsSource="{Binding Path = SolarSystemViewModels}" AutoGenerateColumns="False">
  <dg:DataGrid.Columns>
    <dg:DataGridTextColumn Binding="{Binding FactionKills}" Header="Faction Kills" />
    <dg:DataGridTextColumn Binding="{Binding Jumps}" Header="Jumps" />
    <dg:DataGridTextColumn Binding="{Binding PodKills}" Header="Pod Kills" />
    <dg:DataGridTextColumn Binding="{Binding ShipKills}" Header="Ship Kills" />
  </dg:DataGrid.Columns>
</dg:DataGrid> 
```

您不必为此使用混合，只需使用 VS XAML 编辑器

# php - 如何在 MySQL 中构建用户活动表？

> ID：14842162
> 
> 赞同：1
> 
> 时间：2013-02-12T21:28:06.820
> 
> 标签：php, mysql, sql

我目前有一个活动表，它根据活动类型引用其他表。

```
id | type | user_id | source_id | misc_id | date 
```

类型列告诉我用户执行了什么样的活动（关注、喜欢、成为朋友、状态等），源 id 包含与操作类型相关的表 id。

这对于用户活动流来说效果很好，但唯一的问题是，我不知道如何处理相关表中不再存在的行？

例如，用户创建状态然后将其删除，或者用户与后来从数据库中删除的某人成为朋友。

如果活动是相对于单一类型的，那么我将能够添加一个外键约束，这将删除该行；但由于它是相对于不同的表，我还能怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:51:25.523

您将不得不采取这些方法中的任何一种。

1.  当用户删除时，只需在后端进行软删除，将它们标记为已删除，而不是从表中硬删除。您将不得不在此方法中引入一个新列“delete_flag”。

2.  存档表并在删除时将记录移动到不同的表中。但这将是复杂的编码方式，并且性能可能不如预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:43:17.373

这是我的想法。

如果用户可以删除某些内容，您也可以将其记录在您的活动表中。

如果您想隐藏该活动，您可以添加`ReversedOn`字段并使用相关日期对其进行更新。然后你只需要过滤掉不存在的活动。

如果这不会导致任何用户体验问题，那么您可以顺其自然。

# java - 如何使用 RESTEasy 在 Google App Engine 中实施 oAuth 2.0？

> ID：14842167
> 
> 赞同：5
> 
> 时间：2013-02-12T21:28:22.357
> 
> 标签：java, python, google-app-engine, oauth, oauth-2.0

我正在开发 Google App Engine REST 服务，我想使用 oAuth 2.0 进行身份验证。我将以下代码添加到我的服务方法中以检查有效用户，它的工作原理是在我未通过身份验证时引发异常。

```
try 
{
    final OAuthService oauth = OAuthServiceFactory.getOAuthService();
    final User user = oauth.getCurrentUser();
}
catch (final OAuthRequestException e)
{
    throw new RuntimeException(e);
} 
```

现在我想使用用 Java 和 Python 编写的命令行程序对此进行身份验证。

我花了几个小时搜索 Google 和 StackOverflow，但我找不到一个清晰的示例来说明如何使用有意义的非浏览器应用程序对我的 GAE 应用程序进行身份验证。我发现了很多关于如何针对 Google 自己的 API 进行身份验证的示例，但没有关于针对我自己的 Google App Engine 应用程序进行身份验证的示例。

有人可以提供有关如何使用 Java 或 Python 对 Google App Engine 应用程序进行身份验证的说明吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:39:24.400

### 解决方案

我终于在我的 Google App Engine 应用程序上使用了 OAuth 2.0。我已将一些示例命令行工具客户端代码上传到我的 GitHub 帐户。在代码框中发布的代码太多了。当我写一篇关于我如何让它工作以及代码如何工作的完整博客文章时，我会更新这个答案。

### 高枕无忧

使用我的问题中发布的代码来访问`User`每个服务方法中首先经过身份验证的代码，如果用户未经过身份验证，它将抛出异常。

### 学分

感谢[Fábio Uechi](http://fabiouechi.blogspot.com/)发布了一些大部分工作但只需要更新的代码。我做了不止一点点更新，并从[他所做](http://fabiouechi.blogspot.com/2011/11/using-google-oauth-java-client-to.html)的事情中重构了它。

# javascript - NOT_FOUND_ERR：DOM 异常 8 - javascript

> ID：14842168
> 
> 赞同：1
> 
> 时间：2013-02-12T21:28:23.120
> 
> 标签：javascript, exception, dom, insertion

我的代码：

```
function SubmitCommentAJAX(i)
{
    var thecomment = i.parentNode.getElementsByClassName("styled")[0].innerHTML; 
    var commentBox = document.body.getElementsByClassName("commentsScroll")[0];
    var request = "http://localhost:8080/ituned.com/index?Event=Comment&PostTitle=<%=p.getTitle()%>&PostOwner=<%=p.getUsername_of_Owner()%>&comment="+thecomment;

    xmlhttp.open("POST",request,true);
    xmlhttp.send();
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {            
            var response=xmlhttp.responseXML.getElementsByTagName("theComment")[0].text;
            **commentBox.insertBefore(response, commentBox.firstChild);**
        }
    };
} 
```

HTML：

```
<div class="commentsScroll" align="left"> 
    <div></div>             
    </div> 
</div> 
```

我收到错误：NOT_FOUND_ERR: DOM Exception 8 for the line **`commentBox.insertBefore(response, commentBox.firstChild);`**

但是commentBox 定义明确，因为当我检查alert(commentBox) 时，它会向我显示对象。

错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:41:05.853

[`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)需要一个 dom 节点，因此您必须将文本转换为文本节点

```
var response=xmlhttp.responseXML.getElementsByTagName("theComment")[0].textContent;
commentBox.insertBefore(document.createTextNode(response), commentBox.firstChild); 
```

# jquery - 异步 IE8/jquery 表格行高计算

> ID：14842170
> 
> 赞同：0
> 
> 时间：2013-02-12T21:28:22.550
> 
> 标签：jquery, html-table, internet-explorer-8

```
<!DOCTYPE html>
<html>
<head>
  <title>Test IE8 pre calc</title>
</head>
<body>

<div id='inserthere'></div>
<p id="dump"></p>
<p id="dump2"></p>
</body>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
  $(function () {
    var t = "<table style='white-space: pre;'><tr><td>abc def\nghi</td></tr></table>";

    $("#inserthere").append($(t));
    $("#dump").text($("tr").height());

    window.setTimeout(function () {
      $("#dump2").text($("tr").height());
    }, 0);
  });
</script>
</html> 
```

在上面的代码中，我在运行时向 DOM 插入了一个表。该表使用“pre”空白规则进行格式化。

如果`height()`在与插入相同的调用中计算包含多行 td 的行，则 IE8 错误地报告单行（21 像素）。如果异步进行相同的调用，IE8 会正确报告两行（40 像素）。

IE9/10/Safari/Chrome/Firefox 都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:16:19.077

我还没有找到解决方法 - 所以答案是不要这样做。一旦将回车符替换为`<br>`.

# php - 没有在PHP中将结果提取到数组中

> ID：14842171
> 
> 赞同：0
> 
> 时间：2013-02-12T21:28:25.593
> 
> 标签：php, mysql

我在 MySQL 数据库中的数据是

“1”、“演示”、“演示 1”、“测试”

在 'echo $row[2]' 线上，它给出错误“注意：未定义的偏移量：2”

任何解决方案..?? PHP代码如下...

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>
    <?php

    $uname=$_POST['txtUserName'];
    $passwd=$_POST['txtPassword']; 

    $query="SELECT usernm,passwd FROM tbuserdemo WHERE usernm='$uname'";
    $result=  mysql_query($query);
    $rows=  mysql_num_rows($result); 

    if($rows==0)
    {
        echo "User Name is Wrong";
    }
    else
    {
        $row=mysql_fetch_row($result);
        $encpasswd=  encrypt(1, $passwd);        

        if ($row[1]==$encpasswd)
        {            
            echo "Welcome $uname";
            echo $row[2];
        }
        else
        {
            echo "Password is Wrong";
        }
    }

    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:31:04.147

您只从数据库中获取 2 个字段，`SELECT usernm,passwd`因此您应该只拥有`$row[0]`和`$row[1]`使用值。数组索引是从零开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:31:44.100

更改为：

```
 if ($row[0]==$encpasswd)
    {            
        echo "Welcome $uname";
        echo $row[1];
    }
    else
    {
        echo "Password is Wrong";
    }
}

?> 
```

数组中的第一个索引位于位置 0（不是 1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:32:06.013

数组以 0 开头。

尝试这个：

```
 if ($row[0]==$encpasswd)
    {            
        echo "Welcome $uname";
        echo $row[1];
    }
    else
    {
        echo "Password is Wrong";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T21:31:05.947

欢迎编程。许多语言都这样做，数组索引从`0`NOT开始`1`。所以你需要做

```
if ($row[0]==$encpasswd)
        {            
            echo "Welcome $uname";
            echo $row[1];
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T21:31:19.303

应该是`$row[0]`和`$row[1]`。请记住，PHP 的数组是从零开始的。要获得 $row[2] 您必须在查询中选择**三个**字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T21:37:38.790

您可能想了解一下[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php "SQL 注入")攻击。至少如果您打算在开发/测试环境之外发布该代码。

# c# - 将 IQueryable linq 查询转换为 IEnumerable 取消 linq 优化的工作方式？

> ID：14842176
> 
> 赞同：23
> 
> 时间：2013-02-12T21:29:04.223
> 
> 标签：c#, performance, linq

我是 .NET 上的新手，我想知道 linq 是如何工作的，因为您可以一个接一个地应用许多 linq 查询，但在它们用于传输信息或转换为列表之前，它们都不会真正执行，等等。
有 2 种重要的方法来获取 linq 查询，通过 using `IQueryable<T>`，它直接在 Sql 上应用 where 过滤器，以及 IEnumerable ，它获取所有记录，然后在内存上使用它们。但是，让我们看一下这段代码：

```
 //Linq dynamic library
            IQueryable<Table> myResult = db.Categories
                .Where(a => a.Name.Contains(StringName))
                .OrderBy("Name")
                .Skip(0)
                .Take(10);

            if (myResult != null)
            {
                return myResult.AsEnumerable();
            } 
            else
            { return null; } 
```

Depsite我正在使用Linq动态库，该查询的直接结果正在运行`IQueryable<T>`，如果查询最终返回为`IEnumerable`，查询是否真的在sql上过滤？还是在内存中？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-12T21:32:10.727

它仍然会在数据库中执行，不用担心。`Where`基本上，这完全取决于使用了 etc 的哪个实现。当您`IQueryable<T>`通过`Queryable`扩展方法调用方法时，它将使用表达式树。当您开始从该查询中*获取*数据时，它将转换为 SQL 并发送到数据库。

另一方面，如果你在获得它*之后*`IEnumerable<T>`使用这些方法中的任何一个（就编译时类型而言），它将使用 中的扩展方法`Enumerable`，并且所有其余的处理*都*将完成进行中。

例如，考虑一下：

```
var query = db.People
              .Where(x => x.Name.StartsWith("J"))
              .AsEnumerable()
              .Where(x => x.Age > 20); 
```

这里`AsEnumerable()` *只*返回它的输入序列，但输入为`IEnumerable<T>`. 在这种情况下，数据库查询将只返回名字以`J`- 开头的人，然后将在客户端完成年龄过滤。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T21:31:15.323

如果您返回一个`IEnumerable<T>`然后进一步细化查询，则进一步细化发生在内存中。在 an 上表达的部分`IQueryable<T>`将被翻译成适当的 SQL 语句（显然，对于 LINQ-to-SQL 的情况）。

有关更长更详细的答案，请参阅[Returning IEnumerable<T> vs. IQueryable<T> 。](https://stackoverflow.com/questions/2876616/returning-ienumerablet-vs-iqueryablet/2876655#2876655)

# python - Python 正则表达式拆分函数多个分隔符

> ID：14842177
> 
> 赞同：0
> 
> 时间：2013-02-12T21:29:05.707
> 
> 标签：python, regex, linux

在这里，我正在使用 python 正则表达式，这是我的`uname`命令输出

```
$ uname -n
usa-ca-app01.example.com 
```

这是我的python脚本

```
#!/usr/bin/python

import os
from time import strftime
import commands

status, output = commands.getstatusoutput("uname -n")
backupfile = output.split('.')[0] + "-backup-" + strftime("%m-%d-%y")

print backupfile 
```

脚本输出为：

```
$ ./backup.py
usa-ca-app01-backup-02-12-13 
```

我的问题：我想要这样的输出，`app01-backup-02-12-13`所以我想知道我们可以在正则表达式函数中使用多个分隔符`split`来获得所需的输出，还是有什么好方法可以将优雅的正则表达式与 python 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:58:58.560

如果它不必是正则表达式，您可以再次使用 split ：

```
backupfile = output.split('.')[0].split('-')[2] + "-backup-" + strftime("%m-%d-%y") 
```

或者你可能有多个“-”分隔符，并且总是想要最后一个，以防万一你可以使用：

```
subdomain = output.split('.')[0]
delimiter = "-"
subdomain_split = subdomain.split(delimiter)
split_length = len(subdomain_split)

backupfile = subdomain_split[split_length-1] + "-backup-" + strftime("%m-%d-%y") 
```

或使用正则表达式：

```
regex = re.compile(".*-([a-zA-Z0-9]*).*",re.IGNORECASE)
r = regex.search(output)
backupfile = r.groups(0)[0] + "-backup-" + strftime("%m-%d-%y") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:44:53.343

假设您有*非常*一致的主机名，并且您只想要最后一部分...

首先，不要执行 uname 命令，而是使用[os.uname](http://docs.python.org/2/library/os.html)（您已经导入），然后像这样进行两个拆分：

```
hostname = os.uname()[1]
backupfile = hostname.split('.')[0].split('-')[2] + '-backup-' + strftime('%m-%d-%y') 
```

这是一个输出示例：

```
>>> hostname.split('.')[0].split('-')[2] + '-backup-' + strftime('%m-%d-%y')
'app01-backup-02-12-13' 
```

我建议使用`%Y-%m-%d`它，它使按文件名排序更有意义。

```
>>> hostname.split('.')[0].split('-')[2] + '-backup-' + strftime('%Y-%m-%d')
'app01-backup-2013-02-12' 
```

〜汤米

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:35:34.330

我认为您不需要正则表达式，只需使用 split 两次：

```
output.split('.')[0].split('-')[-1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T21:36:48.867

`split`with no`maxsplit`和`rsplit`with之间的差异可以忽略不计`maxsplit`

```
> python -m timeit "'usa-ca-app01.example.com'.split('.')[0].split('-',)[-1]"
1000000 loops, best of 3: 0.868 usec per loop
> python -m timeit "'usa-ca-app01.example.com'.split('.', 1)[0].rsplit('-', 1)[-1]"
1000000 loops, best of 3: 0.891 usec per loop 
```

# css - LESS：如何用嵌套指定当前标签？

> ID：14842180
> 
> 赞同：4
> 
> 时间：2013-02-12T21:29:22.620
> 
> 标签：css, less

我有下一个 CSS：

```
.button {
    background-color: black;
    border-radius: 4px;
    color: white;
}

a.button {
    text-decoration: none;
    color: white;
} 
```

我想用 LESS 重新制作它，例如：

```
.button {
    background-color: black;
    border-radius: 4px;
    color: white;

    a& {
        text-decoration: none;
        color: white;
    }
} 
```

但它会生成下一个（错误的）CSS：

```
.button {
    background-color: black;
    border-radius: 4px;
    color: white;
}

/* unexpected space */
a .button {
    text-decoration: none;
    color: white;
} 
```

我怎样才能做到正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:33:46.407

这些元素不一定是嵌套的，因此 LESS 嵌套不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:17:17.703

这完全是版本问题。正如@freejosh 评论的那样，它已在 LESS 的最新版本中得到解决。如果您将上面的代码带到[http://less2css.org/](http://less2css.org/)那么它工作正常（运行 LESS 1.3.3，尽管您可以将版本更改为 1.3.0 并看到它不再像您期望的那样运行并放置中的空间）。

由于您声明您正在运行 lessc 1.3.0，因此您需要升级您的 LESS 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:47:53.297

它不漂亮，但它有效！:)

```
.button {
    background-color: black;
    border-radius: 4px;
    color: white;
}

a,b,other{
    &.button{
        .button;
        text-decoration: none;
        color: white;
    }
} 
```

# box2dweb - Box2DWeb 销毁车身和夹具

> ID：14842183
> 
> 赞同：0
> 
> 时间：2013-02-12T21:29:51.527
> 
> 标签：box2dweb

我已经创建了主体和固定装置的列表，一切正常，但由于某种原因无法删除对象，这是我的代码（“id”是链接到主体和固定装置的 div 的 id，该信息正在保持身体和夹具数据）：HEEEELLPPPPP！

```
 var bodyItem;
    for(var j=0; j < bodieList.length; j++){
      if (bodieList[j].userData.id == id) bodyItem = bodieList[j];
    };
    //world.DestroyBody (bodyItem);

    var fixItem;
    for(var i=0; i < fixtureList.length; i++){
      //console.log (fixtureList[i].userData.id);
      if (fixtureList[i].userData.id == id) fixItem = fixtureList[i];
    };

    bodyItem.DestroyFixture(fixItem);
    world.DestroyBody(bodyItem); 
```

# php - 当它在 php 中回显时，无法获得 selected=selected 以按预期运行

> ID：14842186
> 
> 赞同：0
> 
> 时间：2013-02-12T21:29:58.147
> 
> 标签：php, select, selected

此代码应将 selected=selected 回显到相关选项，但它没有将所选值显示为突出显示，或在源代码中显示 selected=selected。

```
<?php   
try {  
$stmt = $conn->prepare("SELECT * FROM customer_info WHERE user_id = :user_id");  
$stmt->bindValue(':user_id', $user_id); 
$stmt->execute();
}catch(PDOException $e) {echo $e->getMessage();}
$row = $stmt->fetch();
?>
<select name="gift_privacy">
<option value="Standard" <?php if($row['gift_privacy']=='Standard') echo "selected='selected'"; ?>>Standard</option>
<option value="Gift ID Req" <?php if($row['gift_privacy']=='Gift_ID_Req') echo "selected='selected'"; ?>>Require program ID</option>
<option value="Not Enrolled" <?php if($row['gift_privacy']=='Not_Enrolled') echo     </select> 
```

*结果`var_dump($row);`：*

```
["gift_privacy"]=> string(12) "Not Enrolled" 
```

*源代码*

```
<select name="gift_privacy" style="width:12em;">
<option value="Standard" >Standard</option>
<option value="Gift ID Req" >Require program ID</option>
<option value="Not Enrolled" >Do not enroll</option>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:32:16.990

你的条件是：

```
if($row['gift_privacy']=='Not_Enrolled') 
```

但是您的字符串是“未注册”（没有下划线）。要么更改条件并删除下划线，要么将返回的值更改为具有下划线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T21:32:23.293

你的 if 语句说`$row['gift_privacy']=='Not_Enrolled'`，而你的 var_dump 输出说`["gift_privacy"]=> string(12) "Not Enrolled"`。请注意 Not 和 Enrolled 之间的下划线 (_)。

# json - 如何获取用户的所有推文？

> ID：14842188
> 
> 赞同：1
> 
> 时间：2013-02-12T21:30:04.473
> 
> 标签：json, twitter

我正在尝试获取特定用户的所有推文。

我知道检索 3600 条推文是有限制的，所以我想知道为什么我不能从这一行获得更多推文：

[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=mybringback&count=3600](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=mybringback&count=3600)

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:29:39.157

API 文档指定此调用将返回的最大状态数为 200。

[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

> 指定要尝试和检索的推文数，最多 200 条。最好将 count 的值视为对要返回的推文数的限制，因为在应用计数后会删除暂停或删除的内容。即使未提供 include_rts，我们也会在计数中包含转推。建议您在使用此 API 方法时始终发送 include_rts=1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:10:58.057

这是我在一个必须这样做的项目中使用的东西：

```
import json
import commands

import time

def get_followers(screen_name):

    followers_list = []

    # start cursor at -1
    next_cursor = -1

    print("Getting list of followers for user '%s' from Twitter API..." % screen_name)

    while next_cursor:

        cmd = 'twurl "/1.1/followers/ids.json?cursor=' + str(next_cursor) + \
                '&screen_name=' + screen_name + '"'

        (status, output) = commands.getstatusoutput(cmd)

        # convert json object to dictionary and ensure there are no errors
        try:
            data = json.loads(output)

            if data.get("errors"):

                # if we get an inactive account, write error message
                if data.get('errors')[0]['message'] in ("Sorry, that page does not exist",
                                                        "User has been suspended"):

                    print("Skipping account %s. It doesn't seem to exist" % screen_name)
                    break

                elif data.get('errors')[0]['message'] == "Rate limit exceeded":
                    print("\t*** Rate limit exceeded ... waiting 2 minutes ***")
                    time.sleep(120)
                    continue

                # otherwise, raise an exception with the error
                else:

                    raise Exception("The Twitter call returned errors: %s"
                                    % data.get('errors')[0]['message'])

            if data.get('ids'):
                print("\t\tFound %s followers for user '%s'" % (len(data['ids']), screen_name))
                followers_list += data['ids']

            if data.get('next_cursor'):
                next_cursor = data['next_cursor']
            else:
                break

        except ValueError:
            print("\t****No output - Retrying \t\t%s ****" % output)

    return followers_list

screen_name = 'AshwinBalamohan' 
followers = get_followers(screen_name)
print("\n\nThe followers for user '%s' are:\n%s" % followers) 
```

为了让它工作，你需要安装 Ruby gem 'Twurl'，它可以在这里找到：[https ://github.com/marcel/twurl](https://github.com/marcel/twurl)

我发现 Twurl 比其他 Python Twitter 包装器更易于使用，因此选择从 Python 调用它。如果您希望我指导您完成如何安装 Twurl 和 Twitter API 密钥，请告诉我。

# javascript - RequireJS 文本插件 - 加载 HTML 模板时出错

> ID：14842191
> 
> 赞同：2
> 
> 时间：2013-02-12T21:30:16.337
> 
> 标签：javascript, node.js, requirejs, jasmine-node, requirejs-text

我将 RequireJS 与我的 HTML 模板的[文本插件一起使用。](https://github.com/requirejs/text)

```
define(
  [
    'text!./../../templates/twitterTemplate.html',
    'jquery',
    'underscore',
    'backbone'
  ],

  function(twitterTemplate, $, _, Backbone) {

    var compiled = _.template(twitterTemplate);

    return Backbone.View.extend({
      el: '#tweets',

      render: function() {
        this.$el.append(compiled(this.model));

        return this;
      }
    });
  }
); 
```

在浏览器中运行时一切正常。但是当我从 Node.js 运行我的 jasmine-tests 时，当 Node.js`require`尝试加载`twitterTemplate.html`文件时出现以下错误：

```
(function (exports, require, module, __filename, __dirname) { <h4><%= title %>
                                                              ^
   Message:
     SyntaxError: Unexpected token <
   Stacktrace:
     SyntaxError: Unexpected token <
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17) 
```

我可能误解了什么。感谢帮助我解决这个问题的答案。

谢谢！

# linux - 如何在 Bash/Debian 中获取文件创建日期/时间？

> ID：14842195
> 
> 赞同：86
> 
> 时间：2013-02-12T21:30:26.657
> 
> 标签：linux, bash, shell, debian, ls

我在 Debian GNU/Linux 6.0 上使用 Bash。是否可以获得文件创建日期/时间？不是修改日期/时间。 `ls -lh a.txt`并且`stat -c %y a.txt`两者都只给出修改时间。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-12T21:41:51.750

不幸的是，您的任务通常是不可能的，因为 POSIX 标准定义的每个文件只存储了 3 个不同的时间值（请参阅[基本定义部分 4.8 文件时间更新](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_08)）

> 每个文件都有三个不同的关联时间戳：最后一次数据访问时间、最后一次数据修改时间和最后一次更改文件状态的时间。这些值在文件特征结构**struct stat**中返回，如[<sys/stat.h>](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_stat.h.html)中所述。

编辑：正如下面评论中提到的，根据使用的文件系统，元数据可能包含文件创建日期。但是请注意，此类信息的存储是非标准的。取决于它可能会导致迁移到另一个文件系统的可移植性问题，以防实际使用的文件系统以某种方式存储它。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-10-24T14:42:52.700

```
ls -i file #output is for me 68551981
debugfs -R 'stat <68551981>' /dev/sda3 # /dev/sda3 is the disk on which the file exists

#results - crtime value
[root@loft9156 ~]# debugfs -R 'stat <68551981>' /dev/sda3
debugfs 1.41.12 (17-May-2010)
Inode: 68551981   Type: regular    Mode:  0644   Flags: 0x80000
Generation: 769802755    Version: 0x00000000:00000001
User:     0   Group:     0   Size: 38973440
File ACL: 0    Directory ACL: 0
Links: 1   Blockcount: 76128
Fragment:  Address: 0    Number: 0    Size: 0
 ctime: 0x526931d7:1697cce0 -- Thu Oct 24 16:42:31 2013
 atime: 0x52691f4d:7694eda4 -- Thu Oct 24 15:23:25 2013
 mtime: 0x526931d7:1697cce0 -- Thu Oct 24 16:42:31 2013
**crtime: 0x52691f4d:7694eda4 -- Thu Oct 24 15:23:25 2013**
Size of extra inode fields: 28
EXTENTS:
(0-511): 352633728-352634239, (512-1023): 352634368-352634879, (1024-2047): 288392192-288393215, (2048-4095): 355803136-355805183, (4096-6143): 357941248-357943295, (6144
-9514): 357961728-357965098 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-14T09:10:08.103

mikyra 的回答很好。事实就像他说的那样。

```
[jason@rh5 test]$ stat test.txt
  File: `test.txt'
  Size: 0               Blocks: 8          IO Block: 4096   regular empty file
Device: 802h/2050d      Inode: 588720      Links: 1
Access: (0664/-rw-rw-r--)  Uid: (  500/   jason)   Gid: (  500/   jason)
Access: 2013-03-14 01:58:12.000000000 -0700
Modify: 2013-03-14 01:58:12.000000000 -0700
Change: 2013-03-14 01:58:12.000000000 -0700 
```

如果您想验证首先创建的文件，您可以在创建一系列文件时通过附加系统日期来构建文件名。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-14T04:36:27.780

请注意，如果您出于性能原因使用 noatime 挂载文件系统，则 atime 可能会显示创建时间。鉴于 noatime 会带来巨大的性能提升（通过在每次读取文件时删除磁盘写入），它可能是一个明智的配置选项，它也可以为您提供所需的结果。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-12T21:34:57.160

通常**不**存储创建日期/时间。所以不，你不能。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-10-22T22:30:27.390

# ls -i menus.xml

94490 menus.xml 这里的数字94490代表inode

然后做一个：

# df -h

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg-root   4.0G  3.4G  408M  90% /
tmpfs                 1.9G     0  1.9G   0% /dev/shm
/dev/sda1             124M   27M   92M  23% /boot
/dev/mapper/vg-var    7.9G  1.1G  6.5G  15% /var 
```

找到根“/”文件系统的挂载点，因为文件 menus.xml 在 '/' 上，即 '/dev/mapper/vg-root'

# debugfs -R 'stat <94490>' /dev/mapper/vg-root

输出可能如下所示：

# debugfs -R 'stat <94490>' /dev/mapper/vg-root

```
debugfs 1.41.12 (17-May-2010)
Inode: 94490   Type: regular    Mode:  0644   Flags: 0x0
Generation: 2826123170    Version: 0x00000000
User:     0   Group:     0   Size: 4441
File ACL: 0    Directory ACL: 0
Links: 1   Blockcount: 16
Fragment:  Address: 0    Number: 0    Size: 0
ctime: 0x5266e438 -- Wed Oct 23 09:46:48 2013
atime: 0x5266e47b -- Wed Oct 23 09:47:55 2013
mtime: 0x5266e438 -- Wed Oct 23 09:46:48 2013
Size of extra inode fields: 4
Extended attributes stored in inode body: 
  selinux = "unconfined_u:object_r:usr_t:s0\000" (31)
BLOCKS:
(0-1):375818-375819
TOTAL: 2 
```

在哪里可以看到创建时间：

```
ctime: 0x5266e438 -- Wed Oct 23 09:46:48 2013 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-05-07T18:31:23.563

*您可以使用stat*查找创建时间（也称为出生时间） ，也可以使用*find*进行匹配。
我们有这些文件显示上次修改时间：

```
$ ls -l --time-style=long-iso | sort -k6
total 692
-rwxrwx---+ 1 XXXX XXXX 249159 2013-05-31 14:47 Getting Started.pdf
-rwxrwx---+ 1 XXXX XXXX 275799 2013-12-30 21:12 TheScienceofGettingRich.pdf
-rwxrwx---+ 1 XXXX XXXX  25600 2015-05-07 18:52 Thumbs.db
-rwxrwx---+ 1 XXXX XXXX 148051 2015-05-07 18:55 AsAManThinketh.pdf 
```

*使用find 查找*在特定时间范围内创建的文件，如下所示。
显然，文件系统知道文件的诞生时间：

```
$ find -newerBt '2014-06-13' ! -newerBt '2014-06-13 12:16:10' -ls 
20547673299906851  148 -rwxrwx---   1 XXXX XXXX   148051 May  7 18:55 ./AsAManThinketh.pdf
1407374883582246  244 -rwxrwx---   1 XXXX XXXX   249159 May 31  2013 ./Getting\ Started.pdf 
```

我们可以使用 stat 来确认这一点：

```
$ stat -c "%w %n" * | sort
2014-06-13 12:16:03.873778400 +0100 AsAManThinketh.pdf
2014-06-13 12:16:04.006872500 +0100 Getting Started.pdf
2014-06-13 12:16:29.607075500 +0100 TheScienceofGettingRich.pdf
2015-05-07 18:32:26.938446200 +0100 Thumbs.db 
```

*stat*手册页解释 %w:

```
%w     time of file birth, human-readable; - if unknown 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-21T15:41:59.303

正如@mikyra 解释的那样，创建日期时间不会存储在任何地方。

上面所有的方法都很好，但是如果你想快速得到最后修改日期，你可以输入：

```
ls -lit /path 
```

使用**-t**选项，您可以列出 /path 中按最后修改日期排序的所有文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-26T16:56:21.233

如果你真的想实现这一点，你可以使用像[inotifywait](https://github.com/rvoicilas/inotify-tools/wiki)这样的文件观察器。

您观察一个目录并将有关文件创建的信息保存在该目录之外的单独文件中。

```
while true; do
  change=$(inotifywait -e close_write,moved_to,create .)
  change=${change#./ * }
  if [ "$change" = ".*" ]; then ./scriptToStoreInfoAboutFile; fi
done 
```

由于不存储创建时间，您可以基于 inotify 构建自己的系统。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-23T19:48:53.590

引用自[https://unix.stackexchange.com/questions/50177/birth-is-empty-on-ext4/131347#131347](https://unix.stackexchange.com/questions/50177/birth-is-empty-on-ext4/131347#131347)，以下 shellscript 可用于获取创建时间：

```
get_crtime() {
   for target in "${@}"; do
       inode=$(stat -c %i "${target}")
       fs=$(df "${target}"  | tail -1 | awk '{print $1}')
       crtime=$(sudo debugfs -R 'stat <'"${inode}"'>' "${fs}" 2>/dev/null | grep -oP 'crtime.*--\s*\K.*')
       printf "%s\t%s\n" "${target}" "${crtime}"
   done
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-08-12T23:50:22.440

```
stat -c %w a.txt 
```

`%w`如果可用，则返回文件创建（出生）日期，这种情况很少见。

这是[链接](https://www.howtogeek.com/451022/how-to-use-the-stat-command-on-linux/#:%7E:text=%25w%3A%20The%20time%20of%20file%20birth%2C%20human-readable%2C%20or%20a%20hyphen%20%E2%80%9C-%E2%80%9D%20if%20unknown.)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-23T11:16:17.307

更好：

```
lsct () 
{ 
    debugfs -R 'stat <'`ls -i "$1" | (read a b;echo -n $a)`'>' `df "$1" | (read a; read a b; echo "$a")` 2> /dev/null | grep --color=auto crtime | ( read a b c d;
    echo $d )
} 
```

# lsct /等

2016 年 7 月 20 日星期三 19:25:48

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-08T20:17:56.747

添加到您的武器库中的另一个技巧如下：

```
$ grep -r "Copyright" /<path-to-source-files>/src 
```

一般来说，如果一个人更改了一个文件，他们应该在“版权”中声明信用。检查日期、文件名、贡献者和联系电子邮件的结果。

示例 grep 结果：

```
/<path>/src/someobject.h: * Copyright 2007-2012 <creator's name> <creator's email>(at)<some URL>> 
```

# macos - ~/.npm 目录是干什么用的？

> ID：14842201
> 
> 赞同：41
> 
> 时间：2013-02-12T21:30:52.880
> 
> 标签：macos, node.js, npm, zsh

我已经安装了全局 npm 包`jslint`，它就在这里

```
$ ls -la /usr/local/bin/jslint
lrwxr-xr-x  1 lust  admin  40 Feb 12 15:31 /usr/local/bin/jslint -> ../lib/node_modules/jslint/bin/jslint.js

$ ls -la /usr/local/lib/node_modules/jslint/bin 
total 8
drwxr-xr-x   3 lust  staff   102 Apr 16  2012 .
drwxr-xr-x  10 lust  staff   340 Feb 12 15:31 ..
-rwxr-xr-x   1 lust  staff  2330 Apr 16  2012 jslint.js

$ which jslint
/usr/local/bin/jslint

$ head -3 /usr/local/bin/jslint 
#!/usr/bin/env node

var linter = require("../lib/linter"); 
```

因此，毫无疑问，此时`jslint`实际上是从这个目录而不是在这里运行的：

```
$ ls -la .npm/jslint/0.1.9/package/bin/         
total 8
drwxr-xr-x  3 lust  staff   102 Apr 16  2012 .
drwxr-xr-x  9 lust  staff   306 Feb 12 15:31 ..
-rwxr-xr-x  1 lust  staff  2330 Apr 16  2012 jslint.js 
```

包裹似乎有两份副本，一份在`/usr/local/`，一份在`~/.npm`. 为什么里面有一个，`.npm`我可以安全地删除它吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-12T21:51:17.850

`~/.npm`是 npm 用来避免多次重新下载同一个包的缓存。删除它没有坏处。您可以使用以下命令清空它：

```
npm cache clean 
```

# asp.net-mvc - ASP .NET MVC - 我应该运行后台计时器吗

> ID：14842208
> 
> 赞同：2
> 
> 时间：2013-02-12T21:31:11.833
> 
> 标签：asp.net-mvc, timer

当网站运行时，我需要在后台进行一些处理。每 30 分钟我需要运行一段与数据库交互的代码。

是否可以使用每 30 分钟执行一次代码的计时器，或者有更好的方法吗？如果计时器可以实现，我正在考虑在 Global.asax 文件夹的 Application_Start() 函数中实现它。

根据我的阅读，计时器不会导致性能问题，因为在大多数情况下，它实际上并没有运行任何代码。

我一直在搜索，但找不到任何与 MVC 相关的内容。不确定这是否重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T22:33:08.117

如果您真的打算将其构建到 asp.net 中，请查看 Haacked 的文章 [The Dangers of Implementing Recurring Background Tasks In ASP.NET](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)。

他概述了危险以及一些可以对抗它们的方法，否则正如其他人所建议的那样，服务/计划任务是更好的解决方案。

或者，如果您走 Windows 服务路线，请查看[TopShelf](http://topshelf-project.com/)，它是一个框架，可让您轻松地将服务作为控制台应用程序运行在开发中，同时仍允许它们轻松安装在服务器上

# .net - 比较两个文件的内容，显示差异

> ID：14842210
> 
> 赞同：0
> 
> 时间：2013-02-12T21:31:15.190
> 
> 标签：.net, vb.net

我希望比较两个文件，类似于将源代码版本与更新版本进行比较的方式。我仍然是一个缓慢的编码器：-S。我的问题实际上是设计正确，所以请介入并告诉我它如何工作得最好，希望不会太复杂。

因此，为此，我目前的计划基本上是将两个文件加载到单独的文本框（？）中。将它们分别流式读取到两个数组列表中，并将数组列表相互比较。并对文件大小等进行一些额外的检查。

我如何循环浏览我正在比较的文本框并以红色突出显示存在差异的地方？我不知道我会怎么做？

高级猜测，我会读取两个数组（比如元素 11）中的差异并突出显示文本框的数据位置/元素吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:34:10.120

除非您将此作为学习经验，否则我建议您利用现有的实现......避免重新发明轮子。有效地区分文件并非易事。

Google 的 Diff Match Patch 有一个 C# 端口

[http://code.google.com/p/google-diff-match-patch/](http://code.google.com/p/google-diff-match-patch/)

您可以将其作为 C# 编译为 DLL，然后使用 VB.Net 项目中的 DLL。

即使您的目标是学习，对于如此复杂的主题，我也建议您研究现有的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:37:55.903

您无需显示文件的内容即可进行比较。您可以使用类`System.IO.File`中的方法来读取内容并使用 Linq 查询来比较它们：

这是一个简单而简短的方法：

```
Dim f1Lines = System.IO.File.ReadLines(file1Path)
Dim f2Lines = System.IO.File.ReadLines(file1Path)
Dim inFile1Only = f1Lines.Except(f2Lines)
Dim inFile2Only = f2Lines.Except(f1Lines)
Dim sameInBoth = f1Lines.Intersect(f2Lines) 
```

您可以在不同的文本框中显示结果。您可以使用

```
TxtSame.Lines = sameInBoth.ToArray() 
```

将行分配给`TextBox`.

# javascript - html5 fileReader -- 如何只读取文件的前 N 个字符？

> ID：14842214
> 
> 赞同：20
> 
> 时间：2013-02-12T21:31:25.193
> 
> 标签：javascript, html, filereader

目前我使用如下模式来读取一系列文件的前 3 个字符：

```
var files = e.dataTransfer.files;
for (var i = 0, f; f = files[i]; i++) {
  var fr = new FileReader();
  fr.onload = function(e) { 
    var first_three_chars = e.target.result.substr(0,3);
  }
  fr.readAsText(f);
} 
```

问题是我只对文件的前 3 个字符感兴趣，而这种方法会读取整个文件，浪费大量内存和时间。如何快速遍历文件，只需快速查看第一个字符？

编辑： slice() 是答案，谢谢 sshen。我是这样做的：

```
var files = e.dataTransfer.files;
for (var i = 0, f; f = files[i]; i++) {
  var fr = new FileReader();
   fr.onloadend = function(e) {
    if (e.target.readyState == FileReader.DONE) {
      var first_three_chars = e.target.result;
    }
  };
  var blob = f.slice(0, 3);
  fr.readAsText(blob);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T22:08:01.897

您可以使用该`.slice`方法。[你可以在这里](http://www.html5rocks.com/en/tutorials/file/dndfiles/)阅读更多

```
var reader = new FileReader();

reader.onloadend = function(evt) 
{
    if (evt.target.readyState == FileReader.DONE)  // DONE == 2
    {
        alert(evt.target.result);
    }
};

var blob = file.slice(start, stop + 1);
reader.readAsBinaryString(blob); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-18T10:04:22.737

没有足够的代表发表评论，因此在此处对@Stu Blair 解决方案提出一些警告：使用该`Blob.slice`方法，您从 Blob中获取**字节，而不是****字符**。

例如，这不起作用：

```
const blob = new Blob([''], {type: 'text/plain'});
const fr = new FileReader();
fr.readAsText(blob); // Fine, fr.result will be ''
fr.readAsText(blob.slice(0, 2)); // Not good, fr.result will be '��' 
```

您将不得不使用`FileReader.readAsArrayBuffer`来获取字节。如果您的编码类似于 utf-8，则必须从头开始阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T21:45:50.310

无论哪种方式，您仍然必须通过文件列表，FileList 接口的内容。您读取整个文件的原因是当您将 onload 附加到每个文件并调用 readAsText() 如果您不想读取整个文件，只需注册一个事件处理程序，该处理程序在文件被加载并通过它。像[这样](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-selecting-files-input)的东西，您附加到表单提交或期望将文件列表作为其事件对象的一部分的东西，而无需先阅读每个文件。

```
<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      var fileName = f.name.substr(0,3);
      output.push('<strong>', fileName, '</strong>');
    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

# text - TXT 到 CSV 文件，IP 范围到 CIDR 转换

> ID：14842216
> 
> 赞同：0
> 
> 时间：2013-02-12T21:31:30.230
> 
> 标签：text, csv, ip, cidr

大家好，首先感谢您访问我的问题

我正在使用新的 IDS、OSSIM，它的数据库需要主机的：名称、CIDR 和 .csv 格式的描述，以便通过 Web UI 上传。

> 版本 4.xx：“网络名称” *；“CIDRs(CIDR1,CIDR2,...)”*；“描述”；“资产价值”*；“网络 ID”

目前我在 .txt 文件中有完整的主机列表，如下所示，

```
Department1    129.252.136.128 129.252.136.255 contact1@email.com,contact2@email.com,contact3@email.com
Department2    129.252.154.64  129.252.154.127 contact1@email.com 
```

如果有人知道如何将 IP 范围转换为 CIDR 表示法，然后将文件转换为 .csv 格式，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:40:48.497

对于二进制表示的 CIDR1 和 CIDR2，逐位比较 CIDR1 和 CIDR2 并在目标网络掩码中设置一个位，直到位停止匹配。

例子：

```
CIDR1   = 192.168.127.0   = 11000000101010000111111100000000
CIDR2   = 192.168.127.32  = 11000000101010000111111100100000
Netmask = 255.255.255.192 = 11111111111111111111111111000000 
```

**编辑**

为了自动执行此操作，根据您的评论，您应该使用一种易于访问 IP 功能的语言，例如 php 具有`ip2long` [function.ip2long](http://www.php.net/manual/en/function.ip2long.php)以及 CSV 处理函数`fgetcsv` [function.fgetcsv](http://php.net/manual/en/function.fgetcsv.php)

# visual-studio-2012 - 安装 Visual Studio 2012 Update 2 (CTP) 后无法在 Blend 中打开 xaml 页面

> ID：14842219
> 
> 赞同：2
> 
> 时间：2013-02-12T21:31:55.507
> 
> 标签：visual-studio-2012, expression-blend, projects-and-solutions, expression-blend-5

我现在正在经历一些奇怪的事情。安装 Visual Studio 2012 Update 2 (CTP) 后，我无法再在 Blend 设计器视图中正确打开 xaml 页面。

似乎无法找到来自其他命名空间的所有内容（请参见下面的屏幕截图）...

![在此处输入图像描述](../Images/ecb93eefd2da2eda3fb4d8078e115ee7.png)

另请注意，如果我关闭所有 xaml 页面，整个解决方案编译正常，并且运行良好。但是，一旦我打开任何 xaml 页面，它就会向我抛出这些错误......

**更新 2013 年 5 月 13 日** 只是一个更新，几天前（在我安装了 VS Update 2 之后）同样的错误再次出现。为了解决这个问题，我必须将构建名称从其他名称更改为“发布”（或“调试”）并执行“清理”和“构建”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:48:30.560

**编辑答案：**

更新到 Visual Studio 2012 Update 2 应该可以解决这个问题： http://microsoft.com/en-au/download/details.aspx?id= [38188](http://microsoft.com/en-au/download/details.aspx?id=38188)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:51:26.930

检查解决方案中链接在一起的所有项目的平台配置是否匹配（“任何 CPU”或“x86”）。有关详细信息，请参阅：

[http://blogs.interknowlogy.com/2013/04/05/blend-for-visual-studio-2012-platform-errors/](http://blogs.interknowlogy.com/2013/04/05/blend-for-visual-studio-2012-platform-errors/)

这似乎也是 VS2012 Update 2 的 RTW 版本的问题。我在包含 WP8 和 Win8 Metro 项目的解决方案中遇到了这个问题。

# java - 用“xyz”替换所有“abc”的正则表达式

> ID：14842229
> 
> 赞同：-4
> 
> 时间：2013-02-12T21:32:40.877
> 
> 标签：java, regex

我正在寻找一个用“xyz”替换字符串中所有“abc”的正则表达式。有什么提示吗？或者如何用模式和匹配器在java中解决它？（也需要一个正则表达式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:33:47.140

你有没有尝试过？

```
str = str.replaceAll("abc", "xyz"); 
```

它会起作用的。`"abc"`被视为正则表达式。

也将起作用的是

```
str = str.replace("abc", "xyz"); 
```

它还将替换**所有**出现的`abc`with `xyz`，但`"abc"`在这里被视为文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:34:08.123

方法`replaceAll`类`String`
[Oracle 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:34:12.183

您在这里不需要正则表达式。您可以像这样使用简单的[String#replace](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)：

```
String replaced = str.replace("abc", "xyz"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T21:34:32.197

使用[**String.replaceAll(regex, str)**](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

```
 String s="abcfvabcb";
    System.out.println(s.replaceAll("abc", "xyz")); 
```

输出：

```
 xyzfvxyzb 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T21:36:49.123

只需使用方法`replaceAll()`或`replace()`.

```
String s2 = s1.replaceAll("abc", "xyz"); 
```

方法上的[Javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)`replaceAll`。

* * *

**`replaceAll()`和之间的区别`replace()`**

在`java.lang.String`中，该`replace`方法要么采用一对 char ，要么采用一对`CharSequence`'（其中 String 是一个子类，因此它很乐意采用一对 String）。该`replace`方法将替换所有出现的 char 或`CharSequence`.

另一方面，和的两个`String`参数都是正则表达式（regex）。使用错误的函数可能会导致细微的错误。`replaceFirst``replaceAll`

# windows - 检测到 Windows 正在“完全运行”

> ID：14842232
> 
> 赞同：4
> 
> 时间：2013-02-12T10:08:19.880
> 
> 标签：windows, startup

对于编程问题，我需要检测 Windows 何时“完全运行”，即所有启动程序都在运行并且 Windows 处于“等待指令模式”。有什么方法可以检测到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:10:53.020

安装延迟启动的服务，这通常是足够的等待时间：

[如何使 Windows 服务启动为“自动（延迟启动）”](https://stackoverflow.com/questions/2153490/how-to-make-windows-service-start-as-automatic-delayed-start)

或者如果您想确保计算机实际上处于空闲状态，GSerg 在评论中发布的答案是正确的：

[http://www.codeproject.com/Articles/13756/Detecting-Application-Idleness](http://www.codeproject.com/Articles/13756/Detecting-Application-Idleness)

# ember.js - 多个 ember js 应用程序？

> ID：14842239
> 
> 赞同：4
> 
> 时间：2013-02-12T21:33:25.937
> 
> 标签：ember.js

我目前正在将 ember.js 添加到现有的 rails 应用程序中。如果功能大不相同，是否会根据路由为不同的 ember 应用程序提供服务？还是将其保留为一个 ember 应用程序更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:23:49.530

Ember 打算让您使用它的方式是您拥有一个 Ember 应用程序，并且所有后端的东西（例如数据库交互）都由 Ruby 处理。Ember 只是与后端通信以获取所需的内容。

但是，如果您对在不同页面上拥有单独的 Ember 应用程序感到满意，那绝对没问题，但这并不是 Ember 希望**您**使用它的方式，因为它是一个*雄心勃勃*的框架。

# macos - SDL OpenGL SDL_image Mac：显示输出（颜色偏移）

> ID：14842241
> 
> 赞同：1
> 
> 时间：2013-02-12T21:33:33.747
> 
> 标签：macos, opengl, sdl, textures

我们通过 SDL_image 加载纹理，然后我们通过 textimage2d 将它们加载到 OpenGL 中：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texture->w, texture->h,
0, GL_BGRA_EXT, GL_UNSIGNED_BYTE, (GLuint**)texture->pixels ); 
```

在我的 Windows 机器上，运行良好，但在我朋友的 Mac 机器上，颜色似乎发生了变化。他的显示器上有强烈的蓝色纹理。当然，这必须处理 internalFormat（此处为 GL_BGRA_EXT）。我们尝试了所有找到并运行（正确编译）的方法，但没有一个为 mac 提供正确的输出。任何想法如何了解mac如何计算SDL_image提供的像素数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:54:40.593

我还没有开始使用 SDL openGL，但这里有一些可能相关的潜在关键字。

[RGBA/BGRA？](http://forums.libsdl.org/viewtopic.php?t=6555&sid=5afdd33e2c032c7025c9ed1f34e18824)

[SDL 程序中的颜色关闭](https://stackoverflow.com/questions/6288267/colors-are-off-in-sdl-program)

[http://www.opengl.org/wiki/Common_Mistakes](http://www.opengl.org/wiki/Common_Mistakes)

[#if 用于 TARGET_CPU_PPC 并为所有内容使用一致的值，如 GL_RGBA。](http://lists.apple.com/archives/mac-opengl/2010/Jun/msg00043.html)

希望这可以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T15:53:30.793

好的，感谢您的链接，一些调查和丢失的脑细胞，我们得出的结果是，我们可以通过 sdl 表面（表面->格式->Rmask）中定义的掩码检测像素数据的顺序，以决定我们是否使用 GL_UNSIGNED_INT_8_8_8_8或 GL_UNSIGNED_INT_8_8_8_8_REV。

# azure - 是否应该为生产部署启用 Azure 诊断？

> ID：14842244
> 
> 赞同：1
> 
> 时间：2013-02-12T21:33:40.837
> 
> 标签：azure

我正在研究 Azure Web 角色的性能改进，并想知道在发布/部署到生产站点时是否应该保留诊断。[这篇文章](http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/11/with-azure-sdk-1-6-azure-diagnostics-is-enabled-by-default-can-cause-thousands-of-daily-transections-to-azure-storage.aspx)说禁用它，但其中一条评论说你丢失了关键数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:50:54.970

您绝对应该启用它。一旦应用程序在生产环境中运行，您将如何监控或自动扩展应用程序？

[无论您使用像RedGate/Cerebrata 的诊断管理器](http://www.cerebrata.com/Products/AzureDiagnosticsManager/)这样的按需监控软件，还是像[AzureWatch](http://www.paraleap.com)这样的主动监控/自动扩展服务，您都需要启用诊断，以便您的实例为外部软件提供监控和可视化性能数据的方法.

只是不要发疯，并尽可能以最频繁的速率捕获所有可能的诊断数据，但要根据需要这样做。

考虑一下这样一个现实，即这些“每天数千笔交易”花费大约 1 美分来处理 10 万笔交易。因此，如果您每分钟将数据传输一次到表存储，这就是每台服务器每天 1440 个事务，或每台服务器每月 43,200 个事务。每台服务器每月高达 0.43 美分。如果快速调试或收到生产问题通知的能力不值得每台服务器每月 0.43 美分，那么您应该重新考虑您的成本模型 :)

高温高压

# string - 加密函数未按应有的方式输出字符串

> ID：14842245
> 
> 赞同：0
> 
> 时间：2013-02-12T21:33:42.240
> 
> 标签：string, inputstream, outputstream

此函数将字符串作为参数，然后对数字进行加密，并将加密的字符串写入文件。主要的 eText 似乎没有从函数中得到任何东西，我不知道为什么。

功能定义：

```
string Encipherer::encipherer(string plainMessage){

    int i = plainMessage.length();
    string eMessage;

    cout << i << endl;

    for(i = 0; i >= plainMessage.length(); i++){
            if(plainMessage[i] >= 65 && plainMessage[i] <= 90){
                    if(plainMessage[i] + shift > 90){
                            eMessage[i] += plainMessage[i] - 26 + shift;
                    }

                    else{
                            eMessage += plainMessage[i] + shift;
                    }
            }

            else if(plainMessage[i] >= 97 && plainMessage[i] <= 122){
                    if(plainMessage[i] + shift > 122){
                            eMessage[i] += plainMessage[i] - 26 + shift;
                    }
                    else{
                            eMessage += plainMessage[i] + shift;
                    }
            }
}

            else{
                    eMessage += plainMessage[i];
            }

}
return eMessage;
} 
```

主功能：

```
int main(){

string plainMessage, eText;
string fileName = "inputText.txt";
ofstream outputText;
        outputText.open ("outputText.txt");

Encipherer E(5);

plainMessage = E.encipherFromFile(fileName);

eText = E.encipherer(plainMessage);

outputText << eText;

outputText.close();

return 0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:09:49.703

在`Encipherer::encipherer`

```
for(i = 0; i >= plainMessage.length(); i++){ 
```

应该

```
for(i = 0; i < plainMessage.length(); i++){ 
```

此外，在两个 if 块中：

```
 eMessage[i] += plainMessage[i] - 26 + shift; 
```

应该成为

```
 eMessage += plainMessage[i] - 26 + shift; 
```

是`shift`在其他地方定义的吗？如果代码被正确复制，你似乎有一个不应该存在`}`的最后一个。`else`

# jquery - MediaWiki Javascript 轮播

> ID：14842256
> 
> 赞同：1
> 
> 时间：2013-02-12T21:34:13.717
> 
> 标签：jquery, css, loops, carousel, mediawiki

我想知道是否有可能使用 jqueries 在 MediaWiki 中创建轮播。我目前正在研究[这个](http://en.wikivoyage.org/wiki/Main_Page_New "这个")Wikivoyage 的新主页，我非常希望底部的 3 个横幅（不是世界图像）在指定时间（比如说 5 秒）跨越到下一张幻灯片的轮播上旋转，但也有按钮。如果可能的话，我希望它们上的图像和文本一起旋转，并且幻灯片之间的某种淡入淡出效果也会很好！为了使图像缩放，我已经做了很多 CSS 干预，但这意味着 html（见下文）不像我想的那样灵活。我已经尝试过使用 CSS 动画，但没有取得太大的成功，而且它们的兼容性不如我想的那样。老实说，我对 CSS 知之甚少，对 JavaScript 几乎一无所知；如果有人准备好尝试一下，我将非常感激，但建议也将非常受欢迎。谢谢！

相关横幅的 Wiki 标记/HTML：

```
<div id="DOTMtext"><div style="position: absolute; z-index: 2; left: 7em; margin-top: -9em; text-align:left;"><span style="color: white;"><span style="font-size: 200%;">'''[[Bali|<span style="color:white;">Bali</span>]]'''</div>
<div id="DOTMtext"><div style="position: absolute; z-index: 2; left: 7em; margin-top: -6em; text-align:left;"><span style="color: white;"><span style="font-size: 150%;">'''[[Previous Destinations of the month|<span style="color:white;">Destination of the month</span>]]'''</div>
<div id="DOTMtext"><div style="position: absolute; z-index: 2; left: 7em; margin-top: -3em; text-align:left;"><span style="color: white;"><span style="font-size: 130%;">'''[[Bali|<span style="color:white;">"Stakes a serious claim to be paradise on earth"</span>]]'''</div>
| width="60em" |
<div id="DOTM">[[File:BaliBanner5.0.jpg|frameless|1700px|link=Bali|Bali]]</div>
|-
|<hr style="height:1pt; visibility:hidden;" />
|-
| style="text-align:right;" |
<div id="OTBPtext"><div style="position: absolute; z-index: 2; right: 7em; margin-top: -9em; text-align:right;"><span style="color: white;"><span style="font-size: 200%;">'''[[Niamey|<span style="color:white;">Niamey</span>]]'''</div>
<div id="OTBPtext"><div style="position: absolute; z-index: 2; right: 7em; margin-top: -6em; text-align:right;"><span style="color: white;"><span style="font-size: 150%;">'''[[Previously Off the beaten path|<span style="color:white;">Off the beaten path</span>]]'''</div>
<div id="OTBPtext"><div style="position: absolute; z-index: 2; right: 7em; margin-top: -3em; text-align:right;"><span style="color: white;"><span style="font-size: 130%;">'''[[Niamey|<span style="color:white;">A lively Sahelian city on <br> the banks of the Niger River</span>]]'''</div>
| width="60em" |
<div id="OTBP">[[File:Niameybanner1.jpg|frameless|max-width: 100%|1700px|link=Niamey|Niamey]]</div>
|-
|<hr style="height:1pt; visibility:hidden;" />
|-
| style="text-align:left;" |
<div id="FTTtext"><div style="position: absolute; z-index: 2; left: 7em; margin-top: -9em; text-align:left;"><span style="color: white;"><span style="font-size: 200%;">'''[[Diving the Cape Peninsula and False Bay|<span style="color:white;">Diving the Cape Peninsula and False Bay</span>]]'''</div>
<div id="FTTtext"><div style="position: absolute; z-index: 2; left: 7em; margin-top: -6em; text-align:left;"><span style="color: white;"><span style="font-size: 150%;">'''[[Previous Featured travel topics|<span style="color:white;">Featured travel topic</span>]]'''</div>
<div id="FTTtext"><div style="position: absolute; z-index: 2; left: 7em; margin-top: -3em; text-align:left;"><span style="color: white;"><span style="font-size: 130%;">'''[[Diving the Cape Peninsula and False Bay|<span style="color:white;">"The waters support a thriving ecology of cool temperate <br /> marine organisms and they include some of the most awesome <br /> and spectacular encounters possible for a diver"</span>]]'''</div>
| width="60em" |
<div id="FTT">[[File:Reef scene at Rocky Bank with fish P9205353.jpg|frameless|1700px|link=Diving the Cape Peninsula and False Bay|Diving the Cape Peninsula and False Bay]]</div>
|} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:05:21.073

你应该试试这个：

[http://www.mediawiki.org/wiki/Extension:SmoothGallery](http://www.mediawiki.org/wiki/Extension:SmoothGallery)

我还没有尝试过，但在我看来，您的 wiki 标记最终应该比您现在拥有的要简单得多 :)

干杯，本杰明-

# ios - 定义没有基类的 Objective-C 类 - 编译器警告

> ID：14842259
> 
> 赞同：13
> 
> 时间：2013-02-12T21:34:23.553
> 
> 标签：ios, objective-c, nsinvocation

我正在使用[Matt Gallagher](http://www.cocoawithlove.com/2008/03/construct-nsinvocation-for-any-message.html)`NSInvocation`的以下代码作为我的撤消/重做代码。虽然使用最新版本的 xCode 我没有收到警告说：NSInvocation(ForwardedConstruction).m:28:12: Class 'InvocationProxy' defined without specified a base class

代码运行良好，但我团队中的其他人（我也是）不喜欢看到警告。我希望类尽可能精简，所以我不希望 NSObject 中的所有方法。

欢迎任何建议！

谢谢！

NSInvocation(ForwardedConstruction).h

```
 //
    //  NSInvocation(ForwardedConstruction).h
    //
    //  Created by Matt Gallagher on 19/03/07.
    //  Copyright 2007 Matt Gallagher. All rights reserved.
    //
    //  Permission is given to use this source code file without charge in any
    //  project, commercial or otherwise, entirely at your risk, with the condition
    //  that any redistribution (in part or whole) of source code must retain
    //  this copyright and permission notice. Attribution in compiled projects is
    //  appreciated but not required.
    //

    @interface NSInvocation (ForwardedConstruction)

    + (id)invocationWithTarget:(id)target
        invocationOut:(NSInvocation **)invocationOut;
    + (id)retainedInvocationWithTarget:(id)target
        invocationOut:(NSInvocation **)invocationOut;

    @end 
```

NSInvocation(ForwardedConstruction).m

```
 //
    //  NSInvocation(ForwardedConstuction).m
    //
    //  Created by Matt Gallagher on 19/03/07.
    //  Copyright 2007 Matt Gallagher. All rights reserved.
    //
    //  Permission is given to use this source code file without charge in any
    //  project, commercial or otherwise, entirely at your risk, with the condition
    //  that any redistribution (in part or whole) of source code must retain
    //  this copyright and permission notice. Attribution in compiled projects is
    //  appreciated but not required.
    //

#import "NSInvocation(ForwardedConstruction).h"
#import <objc/runtime.h>
#import <objc/message.h>

    //
    // InvocationProxy is a private class for receiving invocations via the
    // forwarding mechanism and saving the received invocation to an external
    // invocation pointer.
    //
    // To avoid as many instance methods as possible, InvocationProxy is a base
    // class (not a subclass of NSObject) and does not implement the NSObject
    // protocol (and so is *not* a first-class object).
    //
@interface InvocationProxy
{
    Class isa;
    NSInvocation **invocation;
    id target;
    BOOL retainArguments;
    NSUInteger forwardingAddress;
}

/*+ (id)alloc;*/
+ (void)setValuesForInstance:(InvocationProxy *)instance
                      target:(id)target
       destinationInvocation:(NSInvocation **)destinationInvocation
             retainArguments:(BOOL)retain;
- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector;
- (void)forwardInvocation:(NSInvocation *)forwardedInvocation;

@end

#ifndef __OBJC_GC__

    //
    // DeallocatorHelper is a basic object which takes an id
    // and deallocates it when the DeallocatorHelper is deallocated.
    //
    // Not used in a garbage collected environment (which should deallocate the
    // id automatically).
    //
@interface DeallocatorHelper : NSObject
{
    id object;
}

- (id)initWithObject:(id)newObject;
- (void)dealloc;

@end

@implementation DeallocatorHelper

    //
    // initWithObject
    //
    // Init method for objects which sets the id to be autoreleased.
    //
- (id)initWithObject:(id)newObject
{
    self = [super init];
    if (self != nil)
    {
        object = newObject;
    }
    return self;
}

    //
    // dealloc
    //
    // Deallocates the id.
    //
- (void)dealloc
{
    NSDeallocateObject(object); 
    [super dealloc];
}

@end

#endif

@implementation InvocationProxy

    //
    // initialize
    //
    // This empty method is required because the runtime tries to invoke it when
    // the first message is sent to the Class. If it doesn't exist, the runtime
    // gets mad.
    //
+ (void)initialize
{
}

    //
    // alloc
    //
    // Allocator for the class. Also sets the 
    //
+ (id)alloc
{
        //
        // Allocate the object using the default allocator.
        //
    InvocationProxy *newObject =
#ifdef __OBJC_GC__
    objc_allocate_object(self, 0);
#else
    NSAllocateObject(self, 0, nil);
#endif
    return newObject;
}

- (id)init {  
    return self;  
}

    //
    // setValuesForInstance:target:destinationInvocation:retainArguments:
    //
    // Method to set the attributes on the instance passed in. We use a class
    // method instead of an instance method to avoid extra instance methods on
    // the class.
    //
+ (void)setValuesForInstance:(InvocationProxy *)instance
                      target:(id)destinationTarget
       destinationInvocation:(NSInvocation **)destinationInvocation
             retainArguments:(BOOL)retain;
{
    instance->target = destinationTarget;
    instance->invocation = destinationInvocation;
    instance->retainArguments = retain;
}

    //
    // methodSignatureForSelector:
    //
    // Invoked by the runtime whenever a message is sent for a method that doesn't
    // exist.
    //
- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector
{
        //
        // This method should be invoked once before attributes are set (as an
        // "init" invocation).
        //
    if (target == nil)
    {
            //
            // If the invocation is something other than "init", complain using
            // NSObject's standard doesNotRecognizeSelector:
            //
        if (aSelector != @selector(init))
        {
            SEL failSEL = @selector(doesNotRecognizeSelector:);
            Method failMethod =
            class_getInstanceMethod([NSObject class], failSEL);
            IMP failImp = method_getImplementation(failMethod);
            failImp(self, failSEL, aSelector);
        }

            //
            // Otherwise, we use the forwarded "init" to preserve the return
            // address of the forwarding code (which we can use later to determine
            // if this is a forwarded or direct invocation).
            //
        forwardingAddress = (NSUInteger)__builtin_return_address(0);

            //
            // Return the NSMethodSignature from NSObject's init method (just
            // so we have something to return).
            //
        return [NSObject instanceMethodSignatureForSelector:aSelector];
    }

        //
        // On subsequent invocations, check if we are a forwarded invocation or
        // a direct invocation.
        //
    NSUInteger returnAddress = (NSUInteger)__builtin_return_address(0);
    if (returnAddress != forwardingAddress)
    {
            //
            // Handle the case where methodSignatureForSelector: is the message sent
            // directly to the proxy.
            //
            // There is a chance that we have guessed wrong (i.e. if this is sent
            // from __forward__ but from a different code branch) but that won't
            // cause a fatal problem, just a redundant autoreleased NSInvocation
            // that will get safely autoreleased and ignored.
            //
            // Create an NSInvocation for methodSignatureForSelector: 
            //
        NSMethodSignature *signature =
        [target methodSignatureForSelector:_cmd];
        *invocation =
        [NSInvocation invocationWithMethodSignature:signature];
        [*invocation setTarget:target];
        [*invocation setSelector:_cmd];
        [*invocation setArgument:&aSelector atIndex:2];
        if (retainArguments)
        {
            [*invocation retainArguments];
        }

            //
            // Deliberately fall through and still return the target's
            // methodSignatureForSelector: result (in case we guessed wrong).
            //
    }

        //
        // This is the "normal" case: after initialization, we have been correctly
        // invoked from the forwarding code. Return the target's
        // methodSignatureForSelector: for the given selector.
        //
    NSMethodSignature *signature =
    [target methodSignatureForSelector:aSelector];

    NSAssert3(signature != nil,
              @"NSInvocation(ForwardedConstruction) error: object 0x%@ of class '%@' does not implement %s",
              target, [target className], sel_getName(aSelector));

    return signature;
}

    //
    // forwardInvocation:
    //
    // This method is invoked by message forwarding.
    //
- (void)forwardInvocation:(NSInvocation *)forwardedInvocation
{
        //
        // This method will be invoked once on initialization (before target is set).
        // Do nothing.
        //
    if (target == nil)
    {
            //
            // This branch will be followed when "init" is invoked on the newly
            // allocated object. Since "init" returns "self" we need to set that
            // on the forwardedInvocation.
            //
        [forwardedInvocation setReturnValue:&self];
        return;
    }

        //
        // Check if the target of the forwardedInvocation is equal to self. If
        // it is, then this is a genuine forwardedInvocation. If it isn't, then
        // forwardInvocation: was directly the message sent to this proxy.
        //
    if ([forwardedInvocation target] == self)
    {
        [forwardedInvocation setTarget:target];
        *invocation = forwardedInvocation;
        if (retainArguments)
        {
            [*invocation retainArguments];
        }
        return;
    }

        //
        // Handle the case where forwardedInvocation is the message sent directly
        // to the proxy. We create an NSInvocation representing a forwardInvocation:
        // sent to the target instead.
        //
    NSMethodSignature *signature =
    [target methodSignatureForSelector:_cmd];
    *invocation =
    [NSInvocation invocationWithMethodSignature:signature];
    [*invocation setTarget:target];
    [*invocation setSelector:_cmd];
    [*invocation setArgument:&forwardedInvocation atIndex:2];
    if (retainArguments)
    {
        [*invocation retainArguments];
    }
}

@end

@implementation NSInvocation (ForwardedConstruction)

    //
    // invocationWithTarget:invocationOut:
    //
    // Basic constructor for NSIncoation using forwarded construction.
    //
+ (id)invocationWithTarget:(id)target
             invocationOut:(NSInvocation **)invocationOut
{
        //
        // Check that invocationOut isn't nil.
        //
    NSAssert2(target != nil && invocationOut != nil,
              @"%@ method %s requires target that isn't nil and a valid NSInvocation** for the second parameter",
              [self className], sel_getName(_cmd));

        //
        // Alloc and init the proxy
        //
    InvocationProxy *invocationProxy = [[InvocationProxy alloc] init];

        //
        // Set the instance attributes on the proxy
        //
    [InvocationProxy
     setValuesForInstance:invocationProxy
     target:target
     destinationInvocation:invocationOut
     retainArguments:NO];

        //
        // Create the DeallocatorHelper if needed
        //
#ifndef __OBJC_GC__
        [[[DeallocatorHelper alloc]
                initWithObject:invocationProxy]
            autorelease];
#endif

    return invocationProxy;
}

    //
    // retainedInvocationWithTarget:invocationOut:
    //
    // Same as above but sends retainArguments to the NSInvocation created.
    //
+ (id)retainedInvocationWithTarget:(id)target
                     invocationOut:(NSInvocation **)invocationOut
{
        //
        // Check that invocationOut isn't nil.
        //
    NSAssert2(target != nil && invocationOut != nil,
              @"%@ method %s requires target that isn't nil and a valid NSInvocation** for the second parameter",
              [self className], sel_getName(_cmd));

        //
        // Alloc and init the proxy
        //
    InvocationProxy *invocationProxy = [[InvocationProxy alloc] init];

        //
        // Set the instance attributes on the proxy
        //
    [InvocationProxy
     setValuesForInstance:invocationProxy
     target:target
     destinationInvocation:invocationOut
     retainArguments:YES];

        //
        // Create the DeallocatorHelper if needed
        //
#ifndef __OBJC_GC__
    [[[DeallocatorHelper alloc]
      initWithObject:invocationProxy]
     autorelease];
#endif

    return invocationProxy;
}

@end 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-12T21:50:13.427

使用`NS_ROOT_CLASS`or pragma`-Wobjc-root-class`禁用根类警告。例子：

```
NS_ROOT_CLASS
@interface InvocationProxy
@end

@implementation InvocationProxy
@end 
```

使用 pragma 将是：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wobjc-root-class"
@interface InvocationProxy
#pragma clang diagnostic pop
@end

@implementation InvocationProxy
@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T21:36:39.393

似乎从 NSObject 省略继承是库的设计（根据评论），所以我建议你[使用 pragma 删除警告](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)。

```
#pragma GCC diagnostic ignored "-W<warningcode>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T00:20:32.417

上面的解决方案是对的。我个人使用这个简单的宏：

```
#import <Foundation/Foundation.h>

OBJC_ROOT_CLASS

@interface RootClassName

@end 
```

# jquery - 将 var 添加到选择器的 jQuery 语法

> ID：14842266
> 
> 赞同：1
> 
> 时间：2013-02-12T21:34:35.307
> 
> 标签：jquery, syntax, selector, var

我有2个问题。

1) 我是 jQuery 新手，所以我无法弄清楚将 vars 添加到多个选择器中的正确语法 - 不确定这是否有意义。

所以这里我们有一个简单的、两列的、连接的、可排序的列表。无需尝试将 var roomID 添加到其中即可正常工作。什么是正确的语法？

```
$( ("#sortable1-"+roomID), ("#sortable2-"+roomID) ).sortable({
    connectWith: ".connectedSortable",
    dropOnEmpty: true,
}).disableSelection(); 
```

**HTML**

```
 <table width="100%" height="100%" border="0">
      <tr>
        <td width="40%">
          <p>
          <ul id="sortable1-1" class="connectedSortable">
            <li class="ui-state-default"><?php echo $item; ?></li>
          </ul>
          </p>
        </td>
        <td>
          <center>
          <br />
          <p>
            <a href="#" class="add-all">&lt; Add All</a>
          </p>
          <br />
          <p>
            <a href="#" class="remove-all">Remove All &gt;</a>
          </p>
          <p>
            <br />
            <a href="#" class="reset">Reset</a>
          </p>
        </center>
      </td>
      <td width="40%">
        <p>
        <ul id="sortable2-1" class="connectedSortable">
          <li class="ui-state-default">Item 1</li>
          <li class="ui-state-default">Item 2</li>
          <li class="ui-state-default">Item 3</li>
          <li class="ui-state-default">Item 4</li>
          <li class="ui-state-default">Item 5</li>
        </ul>
        </p>
      </td>
     </tr>
   </table> 
```

2) 考虑到上述可排序列表，是否有一种简单的方法可以将一个列表中的所有项目添加到另一个列表中？类似于“全部添加”或“全部删除”按钮？

谢谢！

# linux - 如何创建在每个发行版上运行的静态二进制文件？

> ID：14842268
> 
> 赞同：23
> 
> 时间：2013-02-12T21:34:44.433
> 
> 标签：linux, gcc, g++, packaging

一些 linux 应用程序，如 supertuxkart 或 regnum online 具有静态二进制文件，下载后无需安装任何共享库即可工作。在每个发行版上。我怎样才能制作这样的应用程序？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T21:38:13.203

确保所有资源都包含在可执行文件中并静态链接可执行文件：

```
gcc -o foo main.o -static -lbaz -lbar 
```

然而，这也有缺点。查找动态链接。

# java - 间接绘制 AWT/Swing 组件？

> ID：14842269
> 
> 赞同：0
> 
> 时间：2013-02-12T21:34:49.963
> 
> 标签：java, swing, user-interface, awt, lwjgl

[我想知道...有没有办法在Frame](https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html&ei=77QaUZqkB4ba9ATOjICoDA&usg=AFQjCNFgjMK1YXjYV6Jorq2K7_Qh-R4U5A&sig2=3QdTuwNqpD3VPe0TBpHAAw&bvm=bv.42261806,d.eWU) / [Applet](https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JApplet.html&ei=ArUaUaynHYO69gTQiIGwCQ&usg=AFQjCNEWTVYfoAsPN4EZQ11f-WY0TuSvpg&sig2=m4IWAjVF6JgIZlgBjHeNzw&bvm=bv.42261806,d.eWU)之外绘制组件样式？我正在制作一个使用[OpenGL](https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://www.lwjgl.org/&ei=EbUaUcbeM4aS9QS1r4CYCA&usg=AFQjCNE8oAPs9T1BnFKkSYtgX-4tQw2lKw&sig2=5WqeBVYCknIW9W1qCazqXg&bvm=bv.42261806,d.eWU)的应用程序，我需要一个外观漂亮的[GUI](https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEQQFjAC&url=http://en.wikipedia.org/wiki/Graphical_user_interface&ei=HbUaUfv0CJOY9QSp44CQBA&usg=AFQjCNF23sgnTImh2Exsyl44XrmkXlwmmA&sig2=So02Gh5NenzqL6bCxS_Onw&bvm=bv.42261806,d.eWU)，比如 AWT 或 Swing。是的，我知道有很多库，比如[Nifty](https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://nifty-gui.lessvoid.com/&ei=0LQaUa6lPIXe8AT1-YHwBg&usg=AFQjCNG60pRpdHY9hAgpbVA2qx3f_n2EdA&sig2=Qc5EWo1Bm0YAd1-cRrj3Dw&bvm=bv.42261806,d.eWU)和[TWL](https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CD8QFjAB&url=http://twl.l33tlabs.org/&ei=37QaUcnMKoa08ASwjIGYBA&usg=AFQjCNHYjlvXN_K5izOIO7rjyf1__AwTbQ&sig2=_uLFcKy-RB6kQFe22mhCcQ&bvm=bv.42261806,d.eWU)，但我真的很想使用 AWT/Swing 外观。

谢谢。（对不起我的英语不好，我是巴西人。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:10:00.007

您可以将组件渲染为图像，即使它不可显示（尽管您必须手动将大小设置为首选大小）：

```
c.setSize(c.getPreferredSize());
BufferedImage img = new BufferedImage(c.getWidth(), c.getHeight(), 
      BufferedImage.TYPE_INT_ARGB);
Graphics2D g = image.createGraphics();
g.setComposite(AlphaComposite.Clear);
g.fillRect(0, 0, c.getWidth(), c.getHeight());
g.setComposite(AlphaComposite.SrcOver);
c.paintComponent(g);
g.dispose(); 
```

然后，您可以将该图像用作 OpenGL 中的纹理。

当然，这只会为您提供组件的图片；您将无法像使用“真实”挥杆组件那样与之交互。

# php - PHP Array 在同一个键上合并两个数组

> ID：14842272
> 
> 赞同：8
> 
> 时间：2013-02-12T21:34:53.403
> 
> 标签：php, arrays

我正在尝试将以下两个数组合并为一个数组，共享相同的密钥：

**第一个数组：**

```
array(3) {
  [0]=>
   array(1) {
   ["Camera1"]=>
   string(14) "192.168.101.71"
}
[1]=>
array(1) {
  ["Camera2"]=>
  string(14) "192.168.101.72"
}
[2]=>
array(1) {
  ["Camera3"]=>
  string(14) "192.168.101.74"
}
} 
```

**第二个数组：**

```
array(3) {
 [0]=>
  array(1) {
  ["Camera1"]=>
  string(2) "VT"
 }
 [1]=>
 array(1) {
   ["Camera2"]=>
   string(2) "UB"
 }
 [2]=>
 array(1) {
  ["Camera3"]=>
  string(2) "FX"
 }
} 
```

如您所见，它们共享相同的密钥（Camera1、Camera2、Camera3 等）

这是我尝试过的：

```
 $Testvar = array_merge($NewArrayCam,$IpAddressArray);
 foreach ($Testvar AS $Newvals){
 $cam = array();
 foreach($Newvals AS $K => $V){
 $cam[] = array($K => $V);
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T23:30:27.000

理想情况下，我希望以一种`array_merge_recursive`可以简单地合并数组而不会大惊小怪的方式来格式化两个数组。

但是我确实想出了一个使用`array_map`.

```
$array1 = array(
    array("Camera1" => "192.168.101.71"),
    array("Camera2" => "192.168.101.72"),
    array("Camera3" => "192.168.101.74"),
);

$array2 = array(
    array("Camera1" => "VT"),
    array("Camera2" => "UB"),
    array("Camera3" => "FX")
);

$results = array();

array_map(function($a, $b) use (&$results) {

    $key = current(array_keys($a));
    $a[$key] = array('ip' => $a[$key]);

    // Obtain the key again as the second array may have a different key.
    $key = current(array_keys($b));
    $b[$key] = array('name' => $b[$key]);

    $results += array_merge_recursive($a, $b);

}, $array1, $array2);

var_dump($results); 
```

输出是：

```
array (size=3)
  'Camera1' => 
    array (size=2)
      'ip' => string '192.168.101.71' (length=14)
      'name' => string 'VT' (length=2)
  'Camera2' => 
    array (size=2)
      'ip' => string '192.168.101.72' (length=14)
      'name' => string 'UB' (length=2)
  'Camera3' => 
    array (size=2)
      'ip' => string '192.168.101.74' (length=14)
      'name' => string 'FX' (length=2) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T05:42:00.143

使用 array_merge_recursive ：

将所有数字键转换为字符串，（make是关联数组）

```
$result = array_merge_recursive($ar1, $ar2);
print_r($result); 
```

参考： http: [//php.net/array_merge_recursive](http://php.net/array_merge_recursive)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-12T21:43:07.087

尝试使用[array_merge_recursive](http://php.net/array_merge_recursive)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-05T17:10:06.990

对于您的嵌套级别就足够了：

`$sumArray = array_map(function ($a1, $b1) { return $a1 + $b1; }, $array1, $array2);`

对于更深的嵌套，它不起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-17T06:04:36.083

```
this would be one of the soluion:

function array_merge_custom($array1,$array2) {
    $mergeArray = [];
    $array1Keys = array_keys($array1);
    $array2Keys = array_keys($array2);
    $keys = array_merge($array1Keys,$array2Keys);

    foreach($keys as $key) {
        $mergeArray[$key] = array_merge_recursive(isset($array1[$key])?$array1[$key]:[],isset($array2[$key])?$array2[$key]:[]);
    }

    return $mergeArray;

}

$array1 = array(
    array("Camera1" => "192.168.101.71"),
    array("Camera2" => "192.168.101.72"),
    array("Camera3" => "192.168.101.74"),
);

$array2 = array(
    array("Camera1" => "VT"),
    array("Camera2" => "UB"),
    array("Camera3" => "FX")
);
echo '<pre>';
print_r(array_merge_custom($array1 , $array2)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-12T21:48:15.603

如果两个数组具有相同数量的级别和键，则应该可以：

```
$array3 = array();

foreach ($array1 as $key1 => $value1) {
  // store IP
  $array3['Camera'.$key1]['IP'] = $value['Camera'.$key1]; 
  // store type of cam
  $array3['Camera'.$key1]['Type'] = $array2[$key]['Camera'.$key1]; 

} 
```

最后 $array3 应该是这样的：

```
$array3 = array {

["Camera1"] => {['IP'] => "192.168.101.71", ['Type'] => "VT" }
["Camera2"] => {['IP'] => "192.168.101.72", ['Type'] => "UB" }
["Camera3"] => {['IP'] => "192.168.101.74", ['Type'] => "FX" }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T22:03:19.317

像这样的东西应该工作：

```
$array1 = array(array("Camera1" => "192.168.101.71"), array("Camera2" => "192.168.101.72"), array("Camera3" => "192.168.101.74"));
$array2 = array(array("Camera1" => "VT"), array("Camera2" => "UB"), array("Camera3" => "FX"));
$results = array();

foreach($array1 as $key => $array){
  foreach($array as $camera => $value){
    $results[$camera]['ip'] = $value;
  }
}

foreach($array2 as $key => $array){
  foreach($array as $camera => $value){
    $results[$camera]['name'] = $value;
  }
}
print_r($results); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-12T22:32:11.030

主要问题是数组。由于它们的结构方式，合并它们变得不必要地复杂。它们只是普通的关联数组（即`array('Camera1' => 'VT')`，合并它们将毫不费力。

我建议您弄清楚如何以一种更易于使用的方式格式化数据。

这是合并两个数组的一种快速而肮脏的方式。它从一个数组中取出一个“相机”，然后尝试在另一个数组中找到相应的“相机”。该函数仅使用`$ips`数组中的“相机”，并且仅使用匹配`CameraN`键。

```
$ips = array(
    array('Camera1' => '192.168.101.71'),
    array('Camera2' => '192.168.101.72'),
    array('Camera3' => '192.168.101.74'),
);
$names = array(
    array('Camera1' => 'VT'),
    array('Camera2' => 'UB'),
    array('Camera3' => 'FX'),
);
function combineCameras($ips, $names) {
    $output = array();
    while ($ip = array_shift($ips)) {
        $ident = key($ip);
        foreach ($names as $key => $name) {
            if (key($name) === $ident) {
                $output[$ident] = array(
                    'name' => array_shift($name),
                    'ip' => array_shift($ip),
                );
                unset($names[$key]);
            }
        }
    }
    return $output;
}
var_dump(combineCameras($ips, $names)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-13T21:54:01.573

您可以将所有数字键转换为字符串并使用[array_replace_recursive](https://www.php.net/manual/en/function.array-replace-recursive.php)：

> 将一个或多个数组的元素合并在一起，以便将一个数组的值附加到前一个数组的末尾。它返回结果数组。

**例子**

```
$arr1 = [
    'rate' => 100   
];

$arr2 = [
    'rate' => 100,
    'name' => 'Best Name In Town',
];

print_r(array_replace_recursive($arr1, $arr2)); 
```

**输出**

```
Array
(
    [rate] => 100
    [name] => Best Name In Town
) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-01T13:00:55.210

这对我有用。我用相同的键加入了两个数组

```
$array1 = ArrayUtils::merge($array1, $array2); 
```

如果您需要保留 NumericKey，请使用

```
$array1 = ArrayUtils::merge($array1, $array2, true); 
```

# django - Django-allauth：无法反转匹配网址

> ID：14842275
> 
> 赞同：3
> 
> 时间：2013-02-12T21:35:08.550
> 
> 标签：django, django-allauth

我已经安装了 Django-allauth 并仔细执行了每一步：

**设置.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    'django.core.context_processors.request',
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",    
    "allauth.account.context_processors.account",
    "allauth.socialaccount.context_processors.socialaccount",
)

AUTHENTICATION_BACKENDS =  (
    'django.contrib.auth.backends.ModelBackend',    
    "allauth.account.auth_backends.AuthenticationBackend",
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',    
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.google',
    ...
)

ACCOUNT_AUTHENTICATION_METHOD="username_email" 
```

**网址.py**

```
(r'^accounts/', include('allauth.urls')), 
```

但是，当运行它时，我得到一个 404`http://localhost:8000/accounts/`

我试图手动反向匹配它：

```
./manage.py shell
from allauth.socialaccount.providers.google.urls import * 
```

工作正常。

```
./manage.py shell
from django.core.urlresolvers import reverse
reverse('/accounts/google/login/') 
```

然而这个失败了：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/kave/vc/cb-env/local/lib/python2.7/site-packages/django/core/urlresolvers.py", line 476, in reverse
    return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  File "/home/kave/vc/cb-env/local/lib/python2.7/site-packages/django/core/urlresolvers.py", line 396, in _reverse_with_prefix
    "arguments '%s' not found." % (lookup_view_s, args, kwargs))
NoReverseMatch: Reverse for '/accounts/google/login/' with arguments '()' and keyword arguments '{}' not found. 
```

我已经在虚拟环境中正确安装了它。可能出了什么问题？或者这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:43:04.607

当您使用 reverse 时，您应该传递视图名称，而不是视图 url。在谷歌的情况下，这将是反向（“google_login”）。这就解释了你的 NoReverseMatch

> [但是我仍然在http://localhost:8000/accounts/](http://localhost:8000/accounts/)得到 404知道什么是错的吗？

`/accounts/`根本不是有效的 URL，因此 404 是正确的。采用`/accounts/login/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-06T15:34:41.233

Allauth url 名称如下：account_login、account_logout、account_change_password、..

# mysql - MySQL 选择/加入用户元表中的多行

> ID：14842277
> 
> 赞同：0
> 
> 时间：2013-02-12T21:35:15.160
> 
> 标签：mysql, join, meta

我有一个名为的表`user_meta`，它包含如下数据：

```
---------------------------
| user_id | field | value |
---------------------------
|    1    |   1   | Green  |
|    1    |   2   | Square |
|    1    |   3   | Big    |
|    2    |   1   | Red    |
|    2    |   2   | Square |
|    2    |   3   | Small  |
---------------------------- 
```

该`field`列是用户配置文件中表单域的编号。该`value`列是用户通过表单提交的值。

如何编写返回所有具有“绿色大方块”的用户的 MySQL 查询？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:00:58.297

这将返回您想要的结果。这使用一个`WHERE`子句返回具有所需值的所有记录，然后计算不同的值以确保只有 3 个：

```
select user_id
from user_meta
where value in ('Green', 'Square', 'Big')
group by user_id
having count(distinct value) = 3 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f1ddf/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:44:46.943

如果您坚持使用该架构，则使用子查询会起作用。不过，它不会很快。

```
select userid 
from user_meta
where user_id in (
    select user_id from user_meta 
    where (field = 1 and value = 'Green')
)
and user_id in (
    select user_id from user_meta 
    where (field = 2 and value = 'Square')
)
and user_id in (
    select user_id from user_meta 
    where (field = 3 and value = 'Big')
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:57:59.700

`SELECT user_id FROM user_meta user_meta1 JOIN user_meta user_meta2 ON user_meta1.UserID = user_meta2.UserID JOIN user_meta user_meta3 ON user_meta2.UserID = user_meta3.UserID WHERE user_meta1.value = 'Green' AND user_meta2.value='Square' AND user_meta3.value='big'`

# android - 为什么 sleep() 方法在工作时不是绝对值？

> ID：14842280
> 
> 赞同：0
> 
> 时间：2013-02-12T21:35:21.727
> 
> 标签：android

```
public static void sleep (long time) 
```

这是来自 Eclipse 中的 android[文档](http://developer.android.com/reference/java/lang/Thread.html#sleep%28long%29)；

“导致发送此消息的线程在给定的时间间隔内休眠（以毫秒为单位）。不能保证精度 - 线程可能比请求的睡眠时间更多或更少。”

**这是什么意思线程可能比请求的睡眠更多或更少。为什么在使用这种方法时它不是绝对的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:38:09.820

这不是绝对的，原因有几个，主要原因是我们不能那么准确地测量时间。此外，它可能必须等待更多的高优先级线程放松，然后才能再次被允许插入。

这个问题不是安卓特有的，而是一般的任何线程，即使是在台式电脑上，原因在[这里](http://www.javamex.com/tutorials/threads/sleep.shtml)解释得很好。

# javascript - 从Javascript中的对象列表中提取对象属性

> ID：14842282
> 
> 赞同：3
> 
> 时间：2013-02-12T21:35:30.273
> 
> 标签：javascript, functional-programming, underscore.js

我有以下从 API 接收的对象：

```
{
   '2012-12-12': [
       { 'id': 1234,
         'type': 'A' },
       { 'id': 1235,
         'type': 'A' },
       { 'id': 1236,
         'type': 'B' },
    ],
   '2012-12-13': [
       { 'id': 1237,
         'type': 'A' },
       { 'id': 1238,
         'type': 'C' },
       { 'id': 1239,
         'type': 'B' },
    ]
} 
```

然后我想要另一个名为`types`type的变量`Array`，它将保存每个`type`对象的属性的每个可能值。在这种情况下，它将是：

```
types = ['A', 'B', 'C'] 
```

我试图以一种功能性的方式完成它（我正在使用 underscore.js），但我无法找到一种方法。现在我正在使用

```
types = [];
_.each(response, function(arr1, key1) {
    _.each(arr1, function(arr2, key2) {
        types.push(arr2.type);
    });
});
types = _.uniq(types); 
```

但这非常难看。你能帮我找出更好的方法来编写这段代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T21:45:30.100

这应该有效：

```
types = _.chain(input) // enable chaining
  .values()            // object to array
  .flatten()           // 2D array to 1D array
  .pluck("type")       // pick one property from each element
  .uniq()              // only the unique values
  .value()             // get an unwrapped array 
```

小提琴：http: [//jsfiddle.net/NFSfs/](http://jsfiddle.net/NFSfs/)

当然，如果您愿意，可以删除所有空格：

```
types = _.chain(input).values().flatten().pluck("type").uniq().value() 
```

或没有链接：

```
types = _.uniq(_.pluck(_.flatten(_.values(input)),"type")); 
```

* * *

[flatten 似乎适用于对象](http://jsbin.com/ewopeh/1)，即使[文档明确指出它不应该](http://underscorejs.org/#flatten)。如果您希望针对实现进行编码，可以省略对 的调用`values`，但我不建议这样做。实现可能有一天会改变，让你的代码神秘地坏掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:51:38.317

如果您只想要更短的代码，您可以将对象扁平化为单个数组，然后映射该数组。

```
var types = _.unique(_.map(_.flatten(_.toArray(response)), function(arr) {
    return arr.type;
})); 
```

* * *

这是另一个版本。主要是为了好奇。

```
var types = _.unique(_.pluck(_.reduce(response, _.bind(Function.apply, [].concat), []), "type")); 
```

* * *

这是另一个。

```
var types = _.unique(_.reduce(response, function(acc, arr) {
    return acc.concat(_.pluck(arr,"type"));
}, [])); 
```

* * *

还有一个。

```
var types = _.unique(_.pluck([].concat.apply([], _.toArray(response)), "type")) 
```

# c++ - C++ 对复制构造对象的引用

> ID：14842283
> 
> 赞同：2
> 
> 时间：2013-02-12T21:35:31.567
> 
> 标签：c++, reference, constructor

嘿，这是一个非常基本的问题，但我对此感到困惑。假设我创建了一个对象

`MyObject a`.

它带有一个复制构造函数，所以我知道我可以这样做：

`MyObject b(a);` 但我可以这样做吗？

`MyObject& b(a);`

如果我这样做：

`MyObject b = a;`里面有什么`b`？如果这个问题太基本而无法发布，请道歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T21:37:24.453

做`MyObject& b(a)`与复制构造函数无关。它只是创建`b`了对 object 的引用`a`。没有任何东西被复制。将`b`其视为对象的别名`a`。从那时起，您可以等效地使用`b`and来引用同一个对象。`a`

`MyObject b = a;`将使用复制构造函数，就像`MyObject b(a);`会一样。

* * *

初始化有两种形式：`T x = a;`称为*复制初始化*；`T x(a)`并且`T x{a}`被称为*直接初始化*。

何时`T`是引用类型，使用哪种类型的初始化并不重要。两者具有相同的效果。

当`T`是类类型时，我们有两种可能：

1.  如果*初始化*是*直接*初始化（`MyClass b(a);`_ _ _ _*`a``T``MyClass b = a;``T`*

     *如您所见，您的两个示例都属于此类类型的初始化程序。* 
**   如果初始化是任何其他形式的*复制初始化*，则将考虑任何用户定义的转换序列，然后是直接初始化。用户定义的转换序列基本上是任何标准转换序列，其中包含一个转换构造函数。

    如果`c`是`Foo`类类型并且有一个从`Foo`to的转换构造函数`MyClass`，那么`MyClass b = c;`将等价于`MyClass b(MyClass(c));`.* 

 *所以基本上，如果源类型和目标类型相同，那么两种初始化形式都是等价的。如果需要转换，则不需要。一个简单的例子来说明这一点：

```
#include <iostream>

struct Bar { };

struct Foo
{
  Foo(const Foo& f) { std::cout << "Copy" << std::endl; }
  Foo(const Bar& b) { std::cout << "Convert" << std::endl; }
};

int main(int argc, const char* argv[])
{
  Bar b;
  Foo f1(b);
  std::cout << "----" << std::endl;
  Foo f2 = b;
  return 0;
} 
```

该程序的输出（禁用复制省略）是：

```
Convert
----
Convert
Copy 
```

当然，还有很多其他类型的初始化（列表初始化、字符数组、聚合等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:02:30.557

这是我的看法：

引用与其他人的存储相关联，每当您访问引用时，您都在访问该存储。引用不能分配给 null 因为它们只是一个别名。引用必须在创建时进行初始化。（指针可以随时初始化。）

所以当你说

```
 MyObject& b(a); 
```

编译器分配一块存储 b，并将引用绑定到 a。

当你说

```
 MyObject b = a; 
```

您将 a 的引用传递给复制构造函数并从中创建新的 b 。请注意，仅当您为其编写了复制构造函数时，它才是深层副本。否则它会调用默认的复制构造函数，这会导致浅拷贝。

当你说

```
 a = b; // after creating these objects 
```

它翻译为 Object::operator=(const Object&)，因此 A.operator=(B) 被调用（调用简单复制，而不是复制构造函数！）*

# php - 如何使用 PDO 获取 BLOB 的完整字符串？

> ID：14842288
> 
> 赞同：0
> 
> 时间：2013-02-12T21:35:44.490
> 
> 标签：php, sql, pdo

我正在创建一个 C# 到 PHP 数据连接器，以允许标准化连接到 Web 服务器以将数据从数据库托管到 C# WinForm 应用程序。一切都在处理这个小例外。

使用的基本是这个。

C# 向服务器发送 AES 加密命令。服务器解析命令并执行 SQL 查询并返回 AES 加密字符串。然后在 C# 中将此字符串转换为 DataTable。

当 SQL 包含一个 BLOB 列时，我只能取回完整数据的一小部分。该字段似乎仅限于前 2792 个字节。

是否存在阻止返回 BLOB 的全部内容的设置？

我不确定它是否会有所帮助，但这是完成工作的代码。

```
$DataConnection = new PDO('mysql:host=10.10.100.102;dbname=jmadata', "root", "nbtis01");
$DataConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

if (isset($Parameters['SQLQuery'])) { // Default List
    $SQLQuery = $Parameters['SQLQuery'];
    unset($Parameters['SQLQuery']);
}

if (isset($Parameters['LimitOverride'])) {
    if (!strpos(strtoupper($SQLQuery), "LIMIT"))
        $SQLQuery = rtrim($SQLQuery, ';') . " LIMIT " . $Parameters['LimitOverride'];
    unset($Parameters['LimitOverride']);
}

$QueryParams = array();
foreach ($Parameters as $key => $value)
    if ($key !== '')
        $QueryParams[$key] = $value;

$Query = $DataConnection->prepare($SQLQuery);

$Query->execute($QueryParams);
$ReturnArray = $Query->fetchAll(PDO::FETCH_ASSOC);

if (!$ReturnArray)
    $ReturnArray[0] = array("NoResults" => ""); 
```

***编辑***——回答

我发现了我的问题。该问题与 PDO、PHP 或 MySQL 无关。我在将 BLOB 数据放入数组之前对其进行 Base64 处理，因为我用来构建结果字符串的拆分字符将在 c# 中转换为数据表使用不可打印字符和二进制数据作为字符串可能包含这些字符。问题是当我在 c# 中进行转换以获取原始字符串以便可以将其转换为字节数组时。我正在使用 System.Text.Encoding.ASCII.GetString 将 Base64 字节数组转换为原始字符串。除了来自 BLOB 字段的二进制数据之外，这一切都在工作。

它可能是一个终止字符的建议是让我找到它的原因。一旦使用 ASCII 将 Base64 转换为字符串，就会有一些东西变成了终止符，并且在那个时候停止了转换。一旦我发现这一点，我就更改为 System.Text.Encoding.Default.GetString，现在它可以完美运行了。

发布答案，以防其他人可能正在尝试这样做并遇到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:14:29.023

问题编辑中的更多详细信息。

从 System.Text.Encoding.ASCII.GetString 更改为 System.Text.Encoding.Default.GetString，问题已解决。

感谢您为我指出正确的方向以找到解决方案。

# c# - FluentNhibernate TypeLoadException

> ID：14842290
> 
> 赞同：0
> 
> 时间：2013-02-12T21:35:51.693
> 
> 标签：c#, asp.net-mvc-3, fluent-nhibernate, monodevelop

我正在尝试使用 FluentNhibernate 构建示例 MVC3 项目，并且在尝试创建 sessionFactory 时遇到 typeloadexception。

**会话工厂**

```
//using System;
//using NHibernate;
//using NHibernate.Cfg;
//using FluentNHibernate.Cfg;
//using FluentNHibernate.Cfg.Db;
//using System.Collections.Generic;
//using System.Linq;
//using System.Web;
//using System.Web.Mvc;    

public class SessionProvider
{
    public SessionProvider ()
    {
    }
    public static ISessionFactory BuildFactory()
{
    return Fluently.Configure()//Explosion here
          .Database(MySQLConfiguration.Standard.ConnectionString(
          c => c.FromConnectionStringWithKey("DashboardModels")
      ))
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Accounts>())
    .BuildSessionFactory();

}

} 
```

**全球阿萨克斯**

```
public class MvcApplication : System.Web.HttpApplication
{

    public static ISessionFactory SessionFactory =
             SessionProvider.BuildFactory();

    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

**例外**

```
System.TypeInitializationException: An exception was thrown by the type initializer for 
System.Web.Configuration.WebConfigurationManager ---> System.Exception: Method not found: 'System.Configuration.ConfigurationManager.get_ConfigurationFactory'.
  --- End of inner exception stack trace ---
  at (wrapper xdomain-invoke) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate)
  at (wrapper remoting-invoke-with-check) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate)
  at System.Web.Hosting.ApplicationHost.CreateApplicationHost (System.Type hostType, System.String virtualDir, System.String physicalDir) [0x00000] in <filename unknown>:0
  at Mono.WebServer.VPathToHost.CreateHost (Mono.WebServer.ApplicationServer server, Mono.WebServer.WebSource webSource) [0x00000] in <filename unknown>:0
 at Mono.WebServer.XSP.Server.RealMain (System.String[] args, Boolean root, IApplicationHost ext_apphost, Boolean quiet) [0x00000] in <filename unknown>:0
 at Mono.WebServer.XSP.Server.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我过去在其他地方使用过这个确切的代码没有问题，我不知道可能是什么问题。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:33:22.130

我了解到，如果您在 Monodevelop 中出现任何错误，只需删除您的项目，将您的笔记本电脑扔到窗外，然后您就有一个清晰的开口可以从它后面跳出来。:P

老实说，我不得不删除该项目，使用备份并执行我最初采取的确切步骤并且它有效。所以很抱歉，我唯一的建议是在此过程中保存许多备份。基本上，如果您的输出中有任何错误，但在构建时没有。只需将其删除并重试。一旦编译器感到困惑，就需要上帝的作为来修复它。

# javascript - 列出数据和点击数据时移动的地图

> ID：14842292
> 
> 赞同：1
> 
> 时间：2013-02-12T21:35:59.187
> 
> 标签：javascript, jquery, google-maps

我的头衔可能让我听起来像个白痴。我只是不知道如何命名我想在这里做的事情。我从我的数据库中以 Json 格式获取个人数据的位置。与使用标记聚类器 jQuery 插件相比，这些人在地图上被精确定位。但我真的很喜欢他们在这个网站上所做的。 [http://www.fetalhope.org/patients-families/treatment?cid=168&x=35&y=14](http://www.fetalhope.org/patients-families/treatment?cid=168&x=35&y=14)

如果您能帮助我建立相同的设置，我将不胜感激。我也愿意付钱，但失业者不要期望太多。我只是想学习。

```
{
  "users": [
    {
      "name": "John Doe",
      "latitude": "22.3430194444444",
      "longitude": "114.110386111111"
    },
    {
      "name": "John Doe",
      "latitude": "48.4048403957642",
      "longitude": "2.68452644348145"
    }
  ]
}

        $(function CheckinMap() {
            $.when($.ajax({
                type: "GET",
                dataType: "json",
                url: "content/sewerage/index.cs.asp?Process=ViewMap"
            })).done(      function initialize(data) {
                var MapData = data;
                var center = new google.maps.LatLng(41.00527, 28.97696);
                var map = new google.maps.Map(document.getElementById('checkinmap'), {
                  zoom: 6,
                  center: center,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  maxZoom: 14
                });
                var markers = [];
                for (var i = 0; i < MapData.users.length; i++) {
                  var location = MapData.users[i];
                  var latLng = new google.maps.LatLng(location.NIDLatitude,
                      location.NIDLongitude);
                  var marker = new google.maps.Marker({
                    position: latLng
                  });
                  markers.push(marker);
                }
                var markerCluster = new MarkerClusterer(map, markers);
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:13:29.387

根据您使用的 api 版本（示例为 V3）的谷歌地图，您可以做的是使用标记上的侦听器，当单击它时，您可以获得一个值，比如说一个 id，它标识元素你想专注于列表。所以，假设你有一个标记，你可以扩展它并添加你的`id`.

```
var markerItem = new google.maps.Marker();
markerItem.metadata = {id: 1}; 
```

然后添加事件监听器：

```
 google.maps.event.addListener(markerItem, 'click', function () {
            var targetId = markerItem.get("id");
            //do something with the target id like scrolling the desired point of the list  

  }); 
```

在事件中，您可以将地图居中到单击标记的纬度/经度，创建一个新的`infoWindow`并显示它等等，，：

```
var infoWindowItem = new google.maps.InfoWindow({content: 'Some content here!'});
infoWindowItem.open(map, markerItem); 
```

# google-maps-api-3 - Google Maps API v3 - 如何指定“VehicleType”

> ID：14842296
> 
> 赞同：0
> 
> 时间：2013-02-12T21:36:21.820
> 
> 标签：google-maps-api-3

我在请求中指定车辆类型时遇到了一些困难。根据[文档](https://developers.google.com/maps/documentation/javascript/directions#VehicleType)，它应该看起来像这样：

```
var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
    TransitDetails: google.maps.TransitLine.TransitVehicle.VehicleType.BUS
}; 
```

但是每次都会出现以下错误：

```
TypeError: google.maps.TransitLine is undefined 
```

我认为我的 TransitDetails 路径有问题..但我无法弄清楚到底是什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:15:42.757

没有`TransitDetails`- 选项`directionsRequest`。

只有一个`TransitOptions`-option 可以定义`departureTime`和`arrivalTime`。The`vehicleType`是 the 的一部分`directionsResponse`并且是一个简单的字符串（例如`BUS`）

# reporting-services - 折线图中的条件背景颜色

> ID：14842297
> 
> 赞同：5
> 
> 时间：2013-02-12T21:36:25.077
> 
> 标签：reporting-services, background, charts, line, zone

我目前正在尝试将我们的图表从 PQ Systems Chartrunner 转换为 SSRS 2008 图表。我目前正在使用 SSRS 2008 中的折线图，并试图让背景颜色针对不同的 sigma 进行更改。我能够计算和绘制标准偏差 sigma 线，但我无法更改线之间的背景颜色。

到目前为止我在 SSRS 中所拥有的：

![SSRS 图表](../Images/24703bffd3e5396d7bb6bbadc8f881bf.png)

在 Chartrunner 图表中，红色/黄色/绿色区域：

![Chartrunner 图表](../Images/7def4c9bba6923a2fe55947f3a88fd96.png)

有没有办法在 SSRS 2008 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:16:10.967

是的，您需要查看在报告中使用**带状线**：

[通过添加带状线突出显示数据](http://msdn.microsoft.com/en-us/library/cc281363%28v=sql.100%29.aspx)。

这也是一个不错的链接：

[SSRS 中的轴带线](http://blog.jontav.com/post/7067899413/axis-striplines-in-ssrs-charts)。

因为您可以基于这些表达式，所以可以在运行时确定波段。它应该适用于您的情况，因为您总是有一定数量的波段，运行报告时只是不同的值。

这是一个基于以下数据集的简单示例：

![在此处输入图像描述](../Images/472c90229d1269d87fd468dcf6a1396f.png)

需要注意的最重要的事情是，我在数据集中包含了限制行*max*、*mid*和*min*；这些使**带状线**更容易创建。

创建一个简单的图表：

![在此处输入图像描述](../Images/76409410e1f2e376e337fa58a0bef241.png)

选择 Y**图表轴**并展开**StripLines**集合：

![在此处输入图像描述](../Images/848bcc7a908b0795471f5ba274c7ffce.png)

您可以看到我已根据数据集中的字段设置了**IntervalOffset**和**StripWidth 。**最终结果：

![在此处输入图像描述](../Images/d4d3a6f3890b901d6edf004529a761df.png)

因此，您可以看到可以根据需要动态执行此操作。这是一个简化的例子，但概念很容易转移；您应该能够使其适应您的要求。

# android - 应用程序导航适用于 iPhone 但不适用于 Android（本机浏览器）

> ID：14842298
> 
> 赞同：0
> 
> 时间：2013-02-12T21:36:29.323
> 
> 标签：android, jquery, iphone, mobile

演示：[http ://bbb.theinternetnoob.com](http://bbb.theinternetnoob.com)

尝试加载导航菜单时似乎发生错误，崩溃或未正确应用定位或滚动

# php - 如何将 € ' “ ” 转换为简单的 utf8 字符

> ID：14842299
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:36:28.603
> 
> 标签：php

我已经从网站上删除了帖子，有时它的帖子标题一些奇怪的字符是这样的

```
 € ’ “ ” 
```

当我将它们存储到数据库中时，它会将它们存储为

```
â€™, â€œ, etc 
```

我如何将这些字符转换为简单的 utf8 字符 ..

我搜索了很多帮助，但没有人帮助我如此跳跃，所以我会从他们那里得到答案。

还有一件事，如果你不能回答，那么请不要对这篇文章投反对票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:37:57.370

确保将表格设置为`UTF-8`正确存储它们。如果您无法控制数据库，也可以查看[utf8_encode()](http://php.net/manual/en/function.utf8-encode.php)和[utf8_decode() 。](http://php.net/manual/en/function.utf8-decode.php)

# ruby-on-rails-3.2 - 哈特尔章。8.2.1 未通过测试

> ID：14842304
> 
> 赞同：0
> 
> 时间：2013-02-12T21:36:51.013
> 
> 标签：ruby-on-rails-3.2, railstutorial.org

这世界到底是怎么回事？？我的测试没有通过，我在整个教程中都非常小心（这次）。请告诉我为什么会弹出 remember_token 错误。

这是我的错误：失败：

```
 1) User 
     Failure/Error: it { should respond_to(:remember_token) }
       expected #<User id: nil, name: "Example User", email: "user@example.com",   created_at: nil, updated_at: nil, password_digest:     "$2a$04$HUTzfhPB9eOgNaBIwQZn/.BpGt4h/v9wgLlo.UoMoh8Q..."> to respond to :remember_token
     # ./spec/models/user_spec.rb:28:in `block (2 levels) in <top (required)>'

Finished in 0.19682 seconds
22 examples, 1 failure

Failed examples:

rspec ./spec/models/user_spec.rb:28 # User 
```

这是我的代码：

db/migrate/[时间戳]_add_remember_token_to_users.rb

```
class AddRememberTokenToUsers < ActiveRecord::Migration
  def change
    add_column :users, :remember_token, :string
    add_index  :users, :remember_token
  end
end 
```

规格/模型/user_spec.rb 需要'spec_helper'

```
describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com", 
                     password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:remember_token) }
  it { should respond_to(:authenticate) }

  it { should be_valid }
  it { should respond_to(:authenticate) }
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T00:46:17.103

I had this problem today also. I had to remove the [timestamp]_add_remember_token_to_users.rb file manually. and then run bundle exec rake db:migrate bundle exec rake db:test:prepare

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:18:31.497

我的猜测是你需要运行 `rake db:test:prepare`. 祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:26:36.277

我遇到了一个非常相似的问题，我们在[这里](http://stackoverflow.com/questions/15699070/hartl-ch-8-rails-tutorial-remember-token-test-failure)介绍了它。

总而言之，数据库出了点问题，所以我所做的就是删除表，然后重新运行`rake db:migrate`and `rake db:test:prepare`。

要删除表：

*   打开 SQLite 数据库浏览器（Hartl 在本书前面推荐的数据库浏览器）。
*   在 SQLite 数据库浏览器中，打开 sample_app/db/development.sqlite。
*   删除（从 SQLite 数据库浏览器），删除 schema_migrations 表。
*   我还必须从终端删除 schema.rb。

我确实尝试了这些步骤然后运行`rake db:migrate`，但遇到了另一个错误。然后我删除了整个`users`表（在 SQLite DB 浏览器中），然后重新运行`rake db:migrate`并让一切都通过。

在执行此操作之前备份。

# gmail - 大量电子邮件被 Google 拒绝

> ID：14842306
> 
> 赞同：2
> 
> 时间：2013-02-12T21:36:56.373
> 
> 标签：gmail, html-email, google-apps, email-spam, mass-emails

我需要帮助自动化我每天发送的大量电子邮件。

我正在尝试通过 Gmail 帐户发送自动群发电子邮件（我的商家使用 Google Apps）。我构建了一个 Java 程序，允许我输入我的凭据（gmail 用户名和密码）、主题行、电子邮件列表，并且输入是一个正文模板。然后，该程序一次向逗号分隔列表中的每个联系人发送一封电子邮件。这不是垃圾邮件，因为我让用户提交他们的电子邮件地址。

我今天收到了这条邮件传递消息：“永久失败的技术细节：邮件被拒绝。” 我读到谷歌最多只允许 100 个收件人通过其 smtp 网关接收任何消息 - 在任何 24 小时内最多有 500 个消息。

我需要一个新的策略。如何构建一个程序来自动每天发送约 100-200 封电子邮件？我是否需要购买 IP、SMTP 服务器、编写新的 PHP 应用程序？我需要一个开始的地方，因为这超出了我的范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:47:41.480

正如您所见，Gmail 并非专为电子邮件营销而设计。过去，我使用 Google App Engine 帐户发送数万到数十万封电子邮件（因为这是管理域的地方），但这可能会让人难以管理。

您可以考虑使用专门从事电子邮件营销的服务。我听说过有关[Campaign Monitor](http://www.campaignmonitor.com/ "活动监视器")和[MailChimp](http://mailchimp.com/)的好消息。Plus MailChimp 可以集成到 Google Apps 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:40:27.973

我们使用 www.authsmtp.com，但当我们在不久的将来切换到 Google Apps 时，我正在考虑切换到 Google。我得再钻一点。同时，试试 authsmtp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:43:15.623

谷歌明确拒绝这种类型的行为/使用他们的系统。[https://support.google.com/mail/bin/answer.py?hl=en&answer=69585](https://support.google.com/mail/bin/answer.py?hl=en&answer=69585)

我建议尝试为此类活动构建的系统，例如[MailChimp](http://mailchimp.com)或[Aweber](http://www.aweber.com/)。

# wicket - LoadRunner 和检票口应用程序

> ID：14842312
> 
> 赞同：0
> 
> 时间：2013-02-12T21:37:25.503
> 
> 标签：wicket, loadrunner

对 SUT 上使用的应用程序框架进行一些研究，我将使用 Loadrunner 进行 LoadTest，我喜欢使用 wickets 开发应用程序。

我已经使用 web http/html 协议针​​对 wicket 应用程序生成了脚本，并且以以下格式记录了一些调用，当我在 VUGen 中运行脚本时，脚本在此 URL 处失败。

`http://somem/nnnweb/main/ ? wicket:interface= :1:someSearchForm :someSearchForm :searchInfo: :IActi vePageBehaviorListener :0:&wicket: ignoreIfNotActiv e=true&random= 0.038901654740178815",`

我发现当我生成只有视图（查看标签）的脚本时工作正常，但是当我编辑一些文件并提交脚本时生成上述调用（`http://xxx...`）并失败

这个人在这里解释了同样的问题：

`http://tech.groups.yahoo.com/group/LoadRunner/message/27295`

我希望可以在 Stackoverflow 中引用其他站点吗？

一般问题。loadrunner 是否支持 wicket 应用程序的测试，TruClient 是这里的最佳选择吗？我实际上让它与 TruClient 一起工作，但据我所知，使用 TruClient 的内存占用存在缺点，但鉴于我的项目已决定使用 wicket 框架，也许是时候转向下一代协议了？

# wpf - 在属性表达式中检测到循环

> ID：14842317
> 
> 赞同：5
> 
> 时间：2013-02-12T21:37:43.250
> 
> 标签：wpf, xaml, visual-studio-2012

我正在开发一个 VS 2012 Express WPF 项目（C# 代码隐藏），我收到错误“在属性表达式中检测到循环”。现在在我继续之前，我知道我为什么会得到它 - 我只是不确定该怎么做，或者是否需要处理它，因为即使它出现在错误列表中并带有蓝色下划线，程序编译并运行得很好。当然，我已经用 Google 搜索过，结果各不相同。我的问题是两部分的，但首先，这是纲要：

违规代码：

```
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}">
<!-- setter properties -->
</Style> 
```

如您所见，它是 Button 的一种样式，指的是导致问题的 Button。我读到的第一个解决方法涉及像这样分离代码：

```
<Style x:Key="ButtonStyleToApply" TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}">
    <!-- setter properties -->
</Style>
<!-- and in another style dictionary, -->
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonStyleToApply}"/> 
```

...然后这两个样式集进入不同的字典。显然，这也没有任何好处 - VS 仍然嗅出我在做什么，但它仍然可以编译并运行良好。现在这是另一种解决方法：

“Visual Studio 中的 XAML 设计器中存在一些架构更改，这已使这种情况倒退。我们将在未来努力改善这种体验，但现在您可以通过不在应用程序对象（App. xaml) 而是在本地文档 (MainPage.xaml) 中定义它们”

这是在技术支持查询中发布[的](http://connect.microsoft.com/VisualStudio/feedback/details/773795/vs2012-implicit-style-based-on-implicit-style-error-a-loop-was-detected-in-the-property-expressions)。(Connect.Microsoft.Com)

但我相信每个人的亲身体验。我的程序员同事能告诉我什么？我的问题是两部分的。1.如果程序正在编译，我什至需要解决这个问题吗？2.如果我很高兴，有没有办法告诉VS忽略它？我知道我或 VS 忽略它可能被认为是“不好的做法”，但除此之外......？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T21:54:25.283

您使用的语法没有任何问题；定义基于现有隐式样式的隐式样式是合法的。您提供的代码示例在 VS 2010 中为我工作，没有任何投诉，但在 VS2012 中产生了有问题的错误。

由于它在两个版本中也都能正常编译和运行，我怀疑问题出在 VS 2012 XAML 设计器支持上。这对您来说有多大意义取决于您对 WPF 视图的设计器渲染的依赖程度。（例如，我通常隐藏呈现的视图并专门在 XAML 视图中工作。）如果您确实使用该功能，您可能会注意到并非所有属性都在设计时正确设置。当然，由于 setter 通常在运行时才产生太大影响，因此您可能永远不会注意到其中的区别。

而且，正如您的问题正确指出的那样，即使微软也已将其确定为 VS2012 中的回归，这强烈表明他们不希望错误发生，并且可能会在将来的某个时候修复设计器错误。

# python - python中的有界队列

> ID：14842318
> 
> 赞同：0
> 
> 时间：2013-02-12T21:37:43.457
> 
> 标签：python, python-3.x, stack, queue

如果我想创建一个有边界的队列，但我想在函数内部为队列创建边界，而不是使用 Class BoundedQueue.Queue(maxsize = 4)，该怎么办？（有关最大绑定队列的信息：http: [//docs.python.org/2/library/queue.html](http://docs.python.org/2/library/queue.html)）

有什么建议么？

这是我的代码；`capacity`是最大界限。

```
class BoundedQueue: 
    # Constructor, which creates a new empty queue, with user-specified capacity:
    def __init__(self, capacity):
        self.items = []
        assert(capacity >= 0), "not positive"

        try:
            capacity = int(capacity)
        except TypeError as inst:
            print("Error", inst.args)
        except:
            print("error")
        else:
            itemmax = capacity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:30:19.277

无论您是创建自己的`BoundedQueue`类还是子类化现有的类，您似乎缺少的是您需要将最大大小存储在类的`__init__()`（即`self._maxsize = capacity`）中，然后在队列的任何其他方法中使用它来添加元素以防止他们的数量不会被超过。

为此，您还需要跟踪其中有多少东西被添加和删除，这意味着您可能还需要`self._cursize`该值的属性，该属性也应该在构造函数中初始化。如果您将基类子类化，它可能已经为您跟踪了它，因此您可以改用它。

“问：Python 还缺少哪些其他主要类型？”中有一些（无界）队列实现的示例。Peter Norvig 的[The Python IAQ: Infrequently Answered Questions](http://norvig.com/python-iaq.html)网站的部分，如果您决定创建自己的类，您可能会发现它很有用。

# ios - 滚动时触发嵌入在 UIScrollView 中的 UIButton 中的触摸事件

> ID：14842322
> 
> 赞同：0
> 
> 时间：2013-02-12T21:37:58.807
> 
> 标签：ios, uiscrollview, uibutton, touch-event

我有一个 UIScrollView，其中嵌入了一组 UIButton。当 UIButtons 接收到任何类型的触摸事件（而 UIScrollView 没有滚动）时，我让它们执行一个看起来像是被按下的动画。但是，当 UIScrollView 滚动时，不会触发 UIButtons 的触摸事件动作。我试图在 UIScrollView 上方的 UIButtons 上设置 zPosition，并且我还尝试将触摸事件从 UIScrollView 传递到同一 CGRect 中的 UIButton，但这些方法都不起作用。让我知道你得到了什么...

# ios - 为什么我的界面被压扁了？

> ID：14842323
> 
> 赞同：1
> 
> 时间：2013-02-12T21:38:02.697
> 
> 标签：ios, objective-c, xcode, ios6, storyboard

我最近使用故事板将我的项目从使用 xib 文件的 ios4 转换为 ios6。转换我界面中的中央按钮后，它们被压在一起了。我在故事板中使用自动布局。

*故事板视图：* ![在此处输入图像描述](../Images/7841bd99d3bf8743ec0087b60bc8786f.png)

iPhone 6.0 模拟器视图 ![在此处输入图像描述](../Images/678afe6022dd5ce8c0244c0e1992c803.png)

*用于交换 xib 和 StoryBoard 的 AppDelegate 代码*

```
 UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                              bundle:nil];
self.viewController = [sb instantiateInitialViewController];
//self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];//Change this back if all doesnt not go well 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:43:45.540

这是由于自动布局而发生的。您有正在调整对象的约束。如果您想使用 autoLayout，我建议您观看 WWDC 视频“Session 202 - Introduction to Auto Layout for iOS and OS X”和/或阅读[了解 AutoLayout](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/UnderstandingAutolayout.html)

# java - Eclipse MyFirstApp Android (build.version.sdk.int)

> ID：14842331
> 
> 赞同：1
> 
> 时间：2013-02-12T21:38:27.553
> 
> 标签：java, android, eclipse, build

我已逐行遵循[MyFirstApp 教程，但我一定跳过了一些内容，因为在 DisplayMessageActivity 文件中的 onCreate 方法中，我收到了一个我无法弄清楚的错误。](http://developer.android.com/training/basics/firstapp/starting-activity.html)这是有问题的代码（我尝试将它从 android 网站复制到 Eclipse 中，但这并没有改变任何东西）：

```
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message);
    // Show the Up button in the action bar.
    // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
    getActionBar().setDisplayHomeAsUpEnabled(true);
}
} 
```

该行`if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){`收到 Eclipse 说“无法将构建解析为变量”的错误。谷歌搜索后我无法弄清楚这意味着什么。感谢您对 MyFirstApp 的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:47:55.033

尝试导入 android.os.Build。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:50:13.430

android 教程假设您使用的是 sdk 3.0 或更高版本。如果您使用的是早期版本的 sdk，则变量 HONEYCOMB 将不存在。

如果您需要在 Honeycomb 或更高版本中使用较新的功能，请进入 Eclipse 中的 android sdk manager 并下载较新版本。

# java - 我如何将动态字符串声明为公开的？

> ID：14842333
> 
> 赞同：1
> 
> 时间：2013-02-12T21:38:29.460
> 
> 标签：java, android, tostring

我已经创建了 a `setOnFocusChangeListener`on an`EditText`所以它会抓取字符串并将其添加到`TextView`via `setText()`。但是，我需要一种公开和动态（以防他们`EditText`再次更改）使用该`toString()`方法的方法，以便我可以在另一个`setOnFocusListener`.

这是我的代码，也许它会以一种不那么令人困惑的方式解释事情：

```
final TextView team1NameScore = (TextView) findViewById(R.id.team1NameScore);
final EditText team1Name = (EditText) findViewById(R.id.team1Name);

team1Name.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            String team1NameString = team1Name.getText().toString();
            // Right here I need to make the above line public so I can use it later!
            if (!hasFocus) {
                team1NameScore.setText(team1NameString + "'s Score:");
            }
        }
    }); 
```

**（阅读第 5 行的评论）**

我有很多焦点听众...我想将它们组合成一个预览，最后为用户生成（使用`setText（textview1 + textview2 + team1Name）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:41:47.630

在类的顶部将字符串声明为实例变量。

它不能是匿名内部类的父方法的本地变量，因为它必须是 final 才能被侦听器访问，这意味着您不能更改它的值。但是，如果您将其声明为全局实例变量，您的侦听器可以访问它，您的类中的任何其他方法和侦听器也可以访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T21:42:37.520

只需创建一个字段变量：

```
public class Example extends Activity {
    public String team1NameString = ""; 
```

然后像任何其他变量一样使用它：

```
public void onFocusChange(View v, boolean hasFocus) {
    team1NameString = team1Name.getText().toString(); 
```

# xml - XSL：文档为空

> ID：14842334
> 
> 赞同：0
> 
> 时间：2013-02-12T21:38:29.163
> 
> 标签：xml, xslt, document

当我尝试查看我的 xml 树时，出现此错误

“此页面包含以下错误：

第 5 行第 1 列的错误：文档为空”

这是我第 5 行的 xsl：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="books.xsl"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="books">
    <html>
      <head> 
```

链接：http: [//infd.birdnest.org/~grangere2/CSCI441/books.xsl](http://infd.birdnest.org/~grangere2/CSCI441/books.xsl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:55:13.673

您是否正确地将您的 xsl 应用到您的 xml 中？例如，使用我发现可以与您的 xsl 一起使用的随机 XML 文档：

撒克逊[http://tinyurl.com/a5bcf42](http://tinyurl.com/a5bcf42) [http://infd.birdnest.org/~grangere2/CSCI441/books.xsl](http://infd.birdnest.org/~grangere2/CSCI441/books.xsl)

或者

xsltproc [http://infd.birdnest.org/~grangere2/CSCI441/books.xsl](http://infd.birdnest.org/~grangere2/CSCI441/books.xsl) [http://tinyurl.com/a5bcf42](http://tinyurl.com/a5bcf42)

# html - 居中网页并溢出

> ID：14842336
> 
> 赞同：0
> 
> 时间：2013-02-12T21:38:30.287
> 
> 标签：html, css

我知道如何使用 CSS 使网页居中，但我不知道如何使用左右两侧溢出的超大图像/滑块将其居中。Square.com 就是一个完美的例子。图像为 1455px，但窗口容器设置为 1020px。但是当你把窗口加宽时，更多的图像出现在左右两边，同样地。我尝试了我能想到的每个版本的 CSS 代码，但没有运气。1020px 的容器通常会切断图像的两侧。所以我希望你们能帮助我编写能够达到这个结果的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:41:58.063

你可以设置`background-position : center center;`它，它会从末端流血。

# ajax - CI 和 GroceryCRUD DB 更新行

> ID：14842337
> 
> 赞同：1
> 
> 时间：2013-02-12T21:38:30.867
> 
> 标签：ajax, controller, updates, grocery-crud

我使用 CI 2.1 和 GroceryCRUD 1.3.3，我在我的控制器管理员中使用这 2 个函数，但是当我有 2 个值 0/1 时，我无法更新行的值：通过单击链接或使用 AJAX 从我的视图侧获取布尔值（首选)

```
function programs_management()
{
        if($this->input->get("enable_recomandation"))
        {
        //  $this->programs_management->recomandation((int)$this->input->get("programs"), ($this->input->get("recomandation")=="1")?"1":"0");
            $data_for_update = array(
                    'recomandation' => ($this->input->get("recomandation")=="1")?"1":"0",             
                    );
                    $this->db->update('programs',$data_for_update,array('program_id' => $this->input->get("programs")));

        }
}

 function enable_recomandation($value, $row = NULL)
    {
// or For AJAX some solution need
//     return "<form action='' method='post'>
//                <input onClick='document.getElementById('row').value=this.value' type='radio' name='recom' value='activ'>Activ<br>
//                <input onClick='document.getElementById('row').value=this.value' type='radio' name='recom' value='inactiv'>Inactiv
//            </form>";

      if($value=="1")
            return '<a href="'.base_url().'/admin/programs_management/?recomandation=0&program_id='.$row->program_id.'" >Active</a>';
        else
            return '<a href="'.base_url().'/admin/programs_management/?recomandation=1&program_id='.$row->program_id.'" >Inactive</a>';
    } 
```

或者有人可以提供替代方案，如何使用 AJAX 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:51:54.670

```
function programs_management()
{
        if ($this->input->get("recomandation"))
        {
            //  $this->programs_management->recomandation((int)$this->input->get("programs"), ($this->input->get("recomandation")=="1")?"1":"0");
            $data_for_update = array(
            'recomandation' => ($this->input->get("recomandation") == "y") ? "1" : "0",
            );
            $this->db->update('programs', $data_for_update, array('program_id' => $this->input->get("program_id")));

        }
}

function enable_recomandation($value, $row = NULL)
{

if ($value == "1")
    return '<a href="' . base_url() . 'admin/programs_management/?recomandation=n&program_id=' . $row->program_id . '" >Active</a>';
else
    return '<a href="' . base_url() . 'admin/programs_management/?recomandation=y&program_id=' . $row->program_id . '" >Inactive</a>';
} 
```

# jquery - 使用 Jquery 启用和禁用图像的单击事件？

> ID：14842338
> 
> 赞同：2
> 
> 时间：2013-02-12T21:38:30.960
> 
> 标签：jquery

我有图像。当单击图像时，我会用一些动画显示数据。所以我想要做的是禁用图像到浏览器中显示的数据。然后一旦加载数据，我需要启用图像。

例如

```
$("#imageid").click(function(e){
//disable the click
$("idforanim").animate({left : "-=50 "px"},500,function(){callfunction1();})
 })

callfunction1(){
//show the data
//enable the click
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T21:55:50.607

另一种方法是设置一个标志以指示数据仍在处理中，并在完成时取消设置该标志：

```
var processing = false;

$("#imageid").click(function(e){
    if ( !processing )
    {
        //disable the click
        processing = true;
        $("idforanim").animate({left : "-=50px"},500,function(){callfunction1();})
    }
})

callfunction1(){
   //show the data
   //enable the click
   processing = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:59:37.803

您可以利用`animate`在动画完成时调用函数的事实来做到这一点。例如：

[http://jsbin.com/adokiz/2](http://jsbin.com/adokiz/2)

我们要做的是：

```
$(document).ready(function() {
    var running = false;
    $('img').on('click', function(event) {
      if (running) return;

      running = true;
      console.log(this);
      $(this).animate({top: '400px'}, function() {
        $(this).css({top: 0});
        running = false;
      });
    });
}); 
```

使用命名的全局变量`running`，您可以防止同时识别多个点击。这与您的代码不完全相同，但您可以轻松地对其进行调整。

另一种更能抵抗被执行两次的方法是使用 jQuery`one`来绑定它，如下所示：

```
$(document).ready(function() {  
  var animation;

  var binding = function() {
    $('img').one('click', animation);
  };

  animation = function(event) {
    $(event.target).animate({top: '400px'}, function() {
      $(event.target).css({top: 0});
      binding();
    });
  };

  binding();
}); 
```

演示：http: [//jsbin.com/adokiz/3](http://jsbin.com/adokiz/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:08:08.697

使用`unbind`方法：

```
var clickHandle = function(){
    $(this).unbind('click', clickHandle);
    callfunc();
};
var callfunc = function(){
    // do your stuff
    $('#imageid').click(clickHandle);// reinstall click handle
};
$('#imageid').click(clickHandle); 
```

# http - 我可以强制网站返回 Content-Disposition 标头吗？

> ID：14842345
> 
> 赞同：0
> 
> 时间：2013-02-12T21:38:57.220
> 
> 标签：http, web-applications, http-headers, urllib2, urllib

我看到有些网站返回 Content-Disposition 标头，有些则没有。

有没有办法让我明确请求服务器发回内容处置？

问题很笼统，但我使用的是 Python/urllib/urllib2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:21:33.080

不，没有办法做到这一点。

# java - JAX-RS REST 服务将布尔值作为字符串返回

> ID：14842349
> 
> 赞同：3
> 
> 时间：2013-02-12T21:39:05.777
> 
> 标签：java, json, jax-rs

我正在使用 JAX-RS 来生成 RESTful 服务。但是，在请求 JSON 时，布尔值作为带引号的字符串`{"boolValue":"true"}`而不是布尔值返回`{"boolValue":true}`。

一个简单的对象

```
@XmlRootElement
    public class JaxBoolTest {
    private boolean working;

    public boolean isWorking() {
        return working;
    }

    public void setWorking(boolean working) {
        this.working = working;
    }

} 
```

一个简单的 JAX-RS REST 服务

```
@Path("/jaxBoolTest")
public class JaxBoolTestResouce {
    @GET
    @Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    public JaxBoolTest getJaxBoolTest() {
        JaxBoolTest jbt = new JaxBoolTest();
        jbt.setWorking(false);
        return jbt;
    }
} 
```

结果：

```
{"working":"false"} 
```

如何将布尔值作为布尔值而不是字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:20:37.043

使用 jaxson ( [http://jackson.codehaus.org/](http://jackson.codehaus.org/) ) 来序列化这个开箱即用的工作：

```
public class BooleanTest {
    @Test
    public void test() throws Exception{
        System.out.println(new ObjectMapper().writeValueAsString(new JaxBoolTest()));
    }
} 
```

产生了这个输出：

```
{"working":false} 
```

我强烈推荐使用 Jackson 来序列化 JSON。它工作得很好。我过去使用过 Jettison，但遇到了很多问题。您可能必须配置您的 jax-rs 提供程序以使用 jackson，因为它看起来不像已经在使用它。

另一个提示：使用jackson 时不需要@XmlRootElement，除非您还想使用相同的bean 提供jax-b xml。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T16:57:28.927

在我的例子中，JSON 输出将所有属性显示为字符串（包括原始数据类型）。将此添加到我的 web.xml 解决了问题。

```
<init-param>
  <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
  <param-value>true</param-value>
</init-param> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T07:32:35.993

```
@POST @Path("/users")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Object controlUserExisting(Object requestEntity) {
    boolean result=RootBsn.controlUserExisting(requestEntity);

    JSONObject json=new JSONObject();
    json.put("result",result);

    return json.toString();
} 
```

检索用户现有已发送并返回{“result”：true}（如果存在）

# asp.net - 在 ASP.NET MVC 中验证时拒绝下拉占位符

> ID：14842351
> 
> 赞同：2
> 
> 时间：2013-02-12T21:39:26.433
> 
> 标签：asp.net, asp.net-mvc, validation, asp.net-mvc-4, html.dropdownlistfor

在我的 ASP.NET MVC4 模型中，我有一个必需的属性：

```
[Required(ErrorMessage = "Select a class")]
public string ClassName { get; set; } 
```

这绑定到 Razor 视图中的下拉列表：

```
@Html.DropDownListFor(o => o.ClassName, new SelectList(Model.ClassList))
@Html.ValidationMessageFor(model => model.ClassName) 
```

但是，我已将 的第一个元素设置`Model.ClassList`为占位符 string `"Select one"`。如果用户在没有选择类的情况下提交表单，它会注册为有效，因为`ClassName`它的值为`"Select one"`.

如何使此占位符选择无效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:10:26.800

您可以从 Model 属性中删除占位符并将其放入帮助程序中：

```
@Html.DropDownListFor(o => o.ClassName, new SelectList(Model.ClassList), "Select one") 
```

# c++ - 如何在 Windows 内核中使用 std::map？STL端口？

> ID：14842356
> 
> 赞同：8
> 
> 时间：2013-02-12T21:39:48.213
> 
> 标签：c++, windows, stl, cross-platform, kernel

`std::map`在我最近的项目中，强烈需要像这样的数据结构。但是，默认实现`std::map`使用 C++ 异常，这在 Windows 内核中是不允许的。

我认为很难`std::map`在短时间内重新发明而没有任何错误或性能损失。所以，我想知道 Windows 内核中是否存在替换`std::map`。

STLPort 可能是候选者。但我不知道如何提取其`std::map`唯一并禁用 C++ 异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T01:32:04.700

内核模式下的 C++ 代码有几个（严重）限制，这些限制先于没有（完整）标准库的问题。

请参阅[http://msdn.microsoft.com/en-us/library/windows/hardware/gg487420.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487420.aspx)

> 尽管目前无法为用于内核模式代码的“完全安全”的 C++ 子集提供严格且可测试的定义，但对于通常安全和通常不安全的构造，可以使用一些有用的指南。

和

> ## 内核模式驱动程序的 C++ 问题
> 
> Microsoft 开发人员发现了 C++ 对内核模式驱动程序提出特殊问题的许多领域。
> 
> ### 内存中的代码
> 
> 使用 C++ 编写内核模式驱动程序最严重的问题是内存页面的管理，尤其是内存中的代码，而不是数据。重要的是大型驱动程序是可分页的，并且分页代码并不总是在内存中。在系统进入不能发生分页的状态之前，所有需要的代码都必须驻留。
> 
> C++ 编译器为非 POD 类和模板生成代码的方式使得知道执行函数所需的所有代码可能去哪里变得特别困难，因此难以使代码安全地可分页。编译器会自动为至少以下对象生成代码。这些对象是“不合规矩的”，开发人员无法直接控制它们插入的部分，这意味着它们可能会在需要时被分页。
> 
> *   编译器生成的代码，例如构造函数、析构函数、强制转换和赋值运算符。（这些通常可以明确提供，但需要注意认识到它们需要提供。）
> *   调整器 thunk，用于在层次结构中的各个类之间进行转换。
> *   虚函数thunk，用于实现对虚函数的调用。
> *   虚函数表 thunk，用于管理基类和多态性。
> *   模板代码体，除非显式实例化，否则在首次使用时发出。
> *   虚函数表本身。
> 
> C++ 编译器不提供直接控制这些实体在内存中放置位置的机制。控制内存放置所需的 pragma 在设计时并未考虑到 C++。
> 
> ### 图书馆
> 
> 创建和使用库有许多不同的问题：
> 
> *   导出的 C++ 函数的名称可能因版本而异。
> *   并非所有在用户模式下可用的函数都在内核模式库中可用。
> *   标准模板库旨在处理来自单个 DLL 的数据对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:43:36.503

如果您环顾四周，您可能应该找到 std::map 的替代品。为什么需要 std::map，它是你需要的哈希表吗？然后你可能会使用[uthash](http://troydhanson.github.com/uthash/)，它是一个 ac imlemented hashtable。

# c# - Java 或 C# 到基于 linux 的 mysql 数据库

> ID：14842363
> 
> 赞同：0
> 
> 时间：2013-02-12T21:40:26.483
> 
> 标签：c#, java, mysql, webserver

我正在为我的一个大学项目创建一个系统。

基本上，我要做的是查询存储在 linux web 服务器上的 MySQL 数据库。我正在创建两个界面，一个用于使用 php 网页进行注册。php 很简单，我知道我在做什么。

我遇到的问题是我的机器上运行的 c# 或 java（取决于哪个最容易做到这一点）应用程序，我希望这些应用程序中的任何一个都可以查询 mySQL 服务器以检索数据。我知道 java 或 .connectors 不是一个可行的选择，所以这是可能的。

也许正在使用我的应用程序运行一个 php 脚本，然后解析结果。这是否可能，如果是这样，任何信息都将被欣然接受。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:46:00.243

考虑到在独立应用程序中直接查询 MySQL 的安全隐患，这样做是非常不切实际的。任何可以下载的东西理论上都可以反编译。我强烈建议您使用您的 C# 应用程序来 WebRequest 一个 PHP 脚本，该脚本可以完成您的查询并回显结果。然后，您可以使用您的 C# 应用程序来解释此数据。拥有执行特定操作的特定脚本也更加安全，而不是允许您直接输入查询，而是通过 Web 请求与此类查询关联的脚本。

希望这可以帮助。

# excel - 从 excel 2007 函数中搜索多个工作表

> ID：14842365
> 
> 赞同：0
> 
> 时间：2013-02-12T21:40:28.567
> 
> 标签：excel, vba

我有工作表 A、B 和 C。工作表 A 包含一个带有日期的列。B 和 C 各包含两列：一列包含日期，一列包含值。例如

工作表A：

```
 A           B
1    2001-01-01  ---
2    2001-01-02  --- 
```

工作表 B：

```
 A           B
1    2001-01-01  1 
```

工作表 C：

```
 A           B
1    2001-01-02  2 
```

我想要一个函数`=Search(W, date)`，当从工作表运行时`A`返回分配给工作表的`date`值`W`。例如`Search(C, "2001-01-02")=2`.

这是在给定日期搜索货币汇率的抽象版本：多个工作表包含货币汇率，因此当我们搜索时，我们知道要选择哪个工作表（货币）。

如何定义这样的函数？我尝试将参数传递给自定义宏，但 excel 不断给我一些神秘的错误。使用将所选单元格用作源的宏似乎很容易，但函数会更好。

编辑：我的尝试，不起作用

```
Function FindRate()
    Dim FindString As String
    Dim Rate As String
    Dim Src As Range
    Dim Found As Boolean

    MsgBox sheet_name
    Rate = "Not found "
    Set Src = Application.ActiveCell
    FindString = "2006-12-19"
    Sheets("cur CHF").Activate
    Found = False
    For Each c In [A1:C2000]
        If c.Value = FindString Then
            Rate = c.Offset(0, 1).Value
            Found = True
            Exit For
        End If
        Next

    MsgBox Rate
    'FindRate = Rate
End Function

Function Rate(cname As String)
    Dim sheet_name As String
    Dim c2s As New Collection

    c2s.Add "cur worksheet name", "cur"

    sheet_name = c2s.Item(cname)
    Call FindRate(sheet_name)

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:09:34.107

这是我经常使用的一个简单的 FindCell 函数，它只是扩展了 Excel 的搜索功能，但你所拥有的应该很适合。它返回一个范围，但是从返回范围中获取值很简单。我按如下方式使用它（为您添加评论）：

```
Function FindCell(SearchRange As Range, SearchText As Variant, OffsetDown As Integer, OffsetRight As Integer) As Range

    'Do a normal search range call using the passed in range and text.
    'First try looking formula
    Set FindCell = SearchRange.Find(What:=SearchText, LookAt:=xlWhole, LookIn:=xlFormulas, _
        MatchCase:=True, SearchOrder:=xlByRows).Offset(OffsetDown, OffsetRight)

    'If nothing is found then look in values
    If FindCell Is Nothing Then
            Set FindCell = SearchRange.Find(What:=SearchText, LookAt:=xlWhole, LookIn:=xlValue, _
            MatchCase:=True, SearchOrder:=xlByRows).Offset(OffsetDown, OffsetRight)
    End If
End Function 
```

这可以用作速率函数（您当然可以将这两个函数结合起来，但我将 FindCell 用于许多应用程序，因此将其分开）：

```
Function GetRate(sWorksheetName As String, theDate As Date) As Double
    Dim returnRange As Range

    'Call the FindCell function specifying the range to search (column A), and the date and then offset one cell to the right for the value
    Set returnRange = FindCell(ThisWorkbook.Worksheets(sWorksheetName).Columns("A:A"), sDate, 0, 1)

    'Check if we've found something. If its Nothing then we haven't
    If Not returnRange Is Nothing Then GetRate = returnRange.Value
End Function 
```

您可以像这样在 Sub 中测试它：

```
Sub Test()
    MsgBox "Value is " & GetRate("Sheet2", "2001-01-01")
End Sub 
```

通过接受 GetRate 作为日期类型，日期在工作表中的格式无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:39:51.353

你真正在做的是查找。Excel 中内置了一个`VLOOKUP`功能，可以完全满足您的需求。语法是

```
VLOOKUP(lookup_value, table_array, col_index_num, [range_lookup]) 
```

这将查找`lookup_value`表中的值`table_array`。如果`range_lookup`为 false，它将在第一列中找到精确匹配，否则它将找到最接近的值（更快，但必须对数据进行排序）。

它将返回`col_index_num`列中的值。

在您的情况下，如果您希望工作表 B 中的值对应于“2012-01-01”，您可以这样做

```
=VLOOKUP("2012-01-01", Sheet2!A2:B1000, 2, false) 
```

您可能不得不将日期字符串转换为日期值等等。如果您已将这些值添加`Sheet2`为日期，您将希望使用

```
=VLOOKUP(DATEVALUE("2012-01-01"), Sheet2!A2:B1000, 2, false) 
```

因为该函数正确地将*字符串* `"2012-01-01"`转换为 Excel 识别为`DATE`.

*现在，如果您事先*不知道需要访问哪个工作表（因为这是一个变量），您可能必须自己编写一个 VBA 函数：

```
Function myLookup(value, curr)
Dim dval As Long, luTable As Range, s As Worksheet, c As Range

' if user types date as string, convert it to date first...
If VarType(value) = vbString Then
  dval = DateValue(value)  ' this doesn't work if dval hasn't been declared as `long`!
Else
  dval = value
End If

' see if `curr` is the name of a defined range; if so, use it
On Error GoTo notArange
' if the next line doesn't generate an error, then the named range exists:
Set luTable = Range(curr)
' so let's use it...
GoTo evaluateFunction

notArange:
' If we got here, "curr" wasn't the name of a range... it must be the name of a sheet
' first, tell VBA that we're done handling the last error:
Resume here
here:
On Error GoTo noSheet
Set s = ActiveWorkbook.Sheets(curr)

Dim firstCell As Range, lastCell As Range
Set firstCell = s.Range("a1")
Set lastCell = s.Range("b1").End(xlDown) ' assuming data in columns A and B, and contiguous
Set luTable = Range(firstCell, lastCell)

evaluateFunction:
myLookup = Application.WorksheetFunction.VLookup(dval, luTable, 2, False)
Exit Function

noSheet:
' get here if currency not found as either sheet or range --> return an error message
myLookup = curr & " not found!"

End Function 
```

这已经在一个小样本上进行了测试，并且有效。需要注意的几点：

您可以命名保留转换的范围（“欧元”、“第纳尔”、“日元”...），而不是将每个范围保存在单独的工作表上。然后，您可以将范围名称（为方便起见，使其与货币名称相同）作为参数传递给您的函数，并使用`Range(currency)`. 这也解决了“硬连线”范围大小的问题

该函数将检查命名范围是否存在，如果存在则使用它。如果没有，它将查找具有正确名称的工作表

如果您使用“无效的货币名称”，这将反映在返回值中（因此`myLookup("01-01-2012", "Florins")`将返回`"Florins not found!"`

我没有假设某个长度的查找表，而是使用`End(xlDown)`构造动态确定表的大小

我允许以.`String`或. 的形式传入日期`DATEVALUE`。该函数注意到字符串并将其转换

Right now I am setting the `range_lookup` parameter to `False`. This means that there must be an exact match, and values that are not present will generate errors. If you prefer to return "the best match", then you set the parameter to `True`. Now the risk is that you will return garbage when the date requested is outside of your limits. You could solve this by setting the first and last value of the exchange rate column to "no valid data". When the lookup function returns, it will show this value.

# python - Python 上的 GAE 入门教程未运行

> ID：14842367
> 
> 赞同：0
> 
> 时间：2013-02-12T21:40:35.390
> 
> 标签：python, google-app-engine

尝试从 GAE 入门中运行 helloworld 应用程序，它给了我一个空白页。

我有文件`hell2/hell2.py`：

```
import webapp2

class MainPage(webapp2.RequestHandler):
def get(self):
  self.response.headers['Content-Type'] = 'text/plain'
  self.response.write('Hello, webapp2 World!')

app = webapp2.WSGIApplication([('/', MainPage)],
                          debug=True) 
```

和`app.yaml`同一目录中的文件：

```
application: hell2
version: 1
runtime: python
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: hell2.py 
```

谷歌页面上的教程说脚本应该具有 .app 扩展名，但这会立即引发错误。同样使用python27作为运行时找不到python，这是python 2.7.3 btw。照原样运行，但浏览器不显示文本。基于 webapp 的旧示例运行良好。我检查并发现 webapp2.py 在 SDK 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:22:20.737

在运行时标签中使用 python27 而不是 python

你需要改变

```
handlers:
- url: /.*
  script: hell2.app 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:10:55.337

`.app`不是扩展 - 相反，它是 Python 模块中的一个变量`hell2`。因此，将 app.yaml 中的行更改为：

```
script: hell2.app 
```

# java - 打印有序二维数组 - 单行

> ID：14842379
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:41:34.513
> 
> 标签：java, arrays, 2d

我正在尝试编写一个嵌套的 for 循环，它将按特定顺序打印出以下代码的值：

```
public static void main(String[] args) {

    int[][] array2d = new int[3][5];
    for (int i = 0; i < array2d.length; i++) {
        for (int j = 0; j < array2d[0].length; j++) {
            array2d[i][j] = (i * array2d[0].length) + j + 1;
        }
    }

    for (int x = 0; x <= 4; x++) {
        for (int y = 0; y <= 2; y++) {
            System.out.println(array2d[y][x]);
        }
    }
} 
```

}

当前数组以我想要的方式打印，但每个打印输出在单独的行上。

我希望输出（在一行上）是这样的：

```
1 6 11 2 7 12 3 8 13 4 9 14 5 10 15 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:45:56.337

替换`println`为`print`它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:46:13.597

您可以`System.out.print`改用：

```
System.out.print(array2d[y][x] + " "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:46:17.460

```
String s = "";
for (int i = 0; i < array2d.length; i++) {
    for (int j = 0; j < array2d[i].length; j++) {
        s += array2d[i][j] + " ";
    }
}
System.out.println(s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T21:59:58.597

```
public static void main(String[] args) {
    int[][] array2d = new int[3][5];
    for (int i = 0; i < array2d.length; i++) {
        for (int j = 0; j < array2d[0].length; j++) {
           array2d[i][j] = (i * array2d[0].length) + j + 1;
        }
    }
    StringBuilder builder = new StringBuilder();
    for (int x = 0; x <= 4; x++) {
        for (int y = 0; y <= 2; y++) {
            builder.append(array2d[y][x]);
            if(!(x == 4 && y == 2)){
                builder.append(" ");
            }
        }
    }
    System.out.println(builder.toString());
} 
```

你基本上是对的，除了改变你想要的字符串和格式化字符串`println`。`print`我对其进行了一些更改以显示其`StringBuilder`工作原理。我尽可能使用 a `StringBuilder`，因为它更方便。

# php - mod_rewrite：如何重定向 HTTP DELETE 和 PUT

> ID：14842381
> 
> 赞同：6
> 
> 时间：2013-02-12T21:41:42.393
> 
> 标签：php, http, mod-rewrite, http-delete

我试图通过使用 mod_rewrite 在 php 中编写一点休息 api。

我的问题是：如何处理 HTTP DELETE 和 PUT？例如，网址为：/book/1234

其中 1234 是一本书的唯一 ID。我想将此id（1234）“重定向”到book.php，并将id作为参数。我已经知道如何在 php 脚本中读取 PUT 和 DELETE 变量，但是如何在 mod_rewrite 中设置这个重写规则呢？

有任何想法吗？

编辑： GET 的重写规则如下所示：

```
RewriteRule book/([0-9]+) book.php?id=$1 [QSA] 
```

如何为 PUT 和 DELETE 执行此“参数转发”？据我所知，HTTP POST、PUT 和 DELETE 使用 HTTP 请求正文来传输参数值。所以我想我需要在 HTTP 请求正文中附加参数。但我不知道如何用 mod_rewrite 做到这一点。

我可以混合使用 DELETE 和 GET 吗？

```
RewriteCond %{REQUEST_METHOD} =DELETE
RewriteRule book/([0-9]+) book.php?id=$1 [QSA] 
```

然后在 book.php 中，我将使用 $_GET['id'] 来检索图书 ID，即使 HTTP HEADER 说 HTTP METHOD 是 DELETE。它似乎不起作用......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:40:38.283

有一个`RewriteCond`指令可用。您可以使用它来指定以下规则仅在特定条件下有效。如果您想通过 HTTP 请求方法重写，请像这样使用它：

```
RewriteCond %{REQUEST_METHOD} =PUT
RewriteRule ^something\/([0-9]+)$ put.php?id=$1

RewriteCond %{REQUEST_METHOD} =DELETE
RewriteRule ^something\/([0-9]+)$ delete.php?id=$1

# ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:15:36.977

> 我可以混合使用 DELETE 和 GET 吗？

是的。在重写规则中，您根本不需要担心请求方法或 PUT 正文。

对于您的示例，这意味着：

**mod_rewrite**

```
RewriteRule book/([0-9]+) book.php?id=$1 [QSA] 
```

**HTTP 请求**

```
PUT /book/1234
=> PUT /book.php?id=1234 
```

**PHP 脚本**

```
$id = intval($_GET['id']);
if ($_SERVER['REQUEST_METHOD'] === 'PUT') {
    // yes, it is. go on as usual
} 
```

进一步说明： GET 参数和 PUT/POST/DELETE 参数的区别在于前者是 URL 的一部分，后者是请求正文的一部分。`mod_rewrite` *只*更改 URL，不触及正文。

# c# - IsInRole as Administrator 未验证为 true

> ID：14842389
> 
> 赞同：1
> 
> 时间：2013-02-12T21:42:28.073
> 
> 标签：c#, asp.net, asp.net-mvc

如果他们是管理员，我想将登录用户重定向到管理页面，如下所示，

```
 if (User.IsInRole("Administrator"))
            {
                return RedirectToAction("AdminLayout", "Home");
            }
            else
            {
                return RedirectToAction("Index", "Home");
            } 
```

但是`else`' 的返回总是被执行。

在数据库中，我插入了一个用户“admin”，`UserId=1`密码为“admin”

在角色表中我`RoleId=1`有`RoleName=Administrator`

在 UsersInRoles 表中我`RoleId=1`有`UserId=1`

**更新**

在 web.config 中，

```
 <roleManager enabled="true" defaultProvider="SimpleRoleProvider">
        <providers>
        <clear/>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
      </providers>
    </roleManager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:19:49.847

您何时尝试重定向？如果在下一页加载之前，该`User`对象将不会被解析。在你的代码中设置一个断点，我想你会发现它`User`是`null`. 当然，`null`永远不会处于管理员角色。

要解决此问题，您可以

1.  在下一页进行重定向

    或者

2.  从登录过程中获取用户名，然后找到登录的用户并检查角色。

# python - 模型上的自定义保存方法 - 组合字段

> ID：14842393
> 
> 赞同：0
> 
> 时间：2013-02-12T21:42:54.703
> 
> 标签：python, django, django-models

我想在模型上创建一个自定义保存方法，该方法结合了来自其他两个字段的值，其中一个是存储在外键关系中的值。

例如，给定这个模型：

```
class Post(models.Model):
    text = charfield()
    date = datefield()
    user = ForeignKey(other model)
    key = integerfield()
    unique = charfield() 
```

我希望能够将标题为唯一的字段保存为外键中的用户用户名和键字段的组合，键字段是一个自动递增的整数字段。这样的事情可能吗？我搜索了类似的问题，但找不到任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:50:21.453

当然，在您至少保存一次模型之前，您将没有密钥。所以你的保存方法需要调用超类保存，获取密钥，设置唯一字段，然后再次保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:50:57.007

您可以使用 django post_save 信号来修改第一次保存后的数据

应该是这样的：

```
from django.db.models.signals import post_save
@receiver(post_save, sender=Post)
def my_handler(sender, **kwargs):
   obj = kwargs['instance']
   obj.unique = obj.user + str(obj.key)
   obj.save() 
```

关于信号的文档：[https ://docs.djangoproject.com/en/dev/topics/signals/](https://docs.djangoproject.com/en/dev/topics/signals/)

# sql - 透视动态列

> ID：14842394
> 
> 赞同：0
> 
> 时间：2013-02-12T21:43:03.260
> 
> 标签：sql, pivot

我有一个包含以下值的表。

```
Date                     TCOUNT      COUNT
02/06/2013 00:00        3500        35
02/12/2013 00:00        4000        23
02/21/2013 00:00        1000        54
02/27/2013 00:00        5000        12 
```

`Date`动态 col 需要在哪里旋转。

我需要旋转上表以获得以下结果

```
02/06/2013 00:00    02/12/2013 00:00    02/21/2013 00:00    02/27/2013 00:00
35                  23                  54                  12
3500                4000                1000                5000 
```

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:52:17.687

基于您[之前的问题被标记为 sql server](https://stackoverflow.com/questions/13807541/how-to-retrieve-same-column-twice-from-one-table-with-where-condition)的事实，我猜您需要 sql server 语法。

为了获得结果，您需要同时使用 the`UNPIVOT`和`PIVOT`函数。unpivot 将采用`TCount`and`Count`列并将它们转换为行，然后`PIVOT`将采用 the`dates`并将它们转换为列。

如果您提前知道这些值，则可以对查询进行硬编码：

```
select *
from
(
  select date, value, col
  from yourtable
  unpivot
  (
    value
    for col in (tcount, count)
  ) unpiv
) src
pivot
(
  max(value)
  for date in ([2013-02-06], [2013-02-12], 
               [2013-02-21], [2013-02-27])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2c047/7)

但是，如果您有未知数量的日期，那么您将需要动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(varchar(10), Date, 120)) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT col, ' + @cols + ' from 
             (
                select convert(varchar(10), Date, 120) date, 
                  value, col
                from yourtable
                unpivot
                (
                  value
                  for col in (tcount, count)
                ) unpiv
            ) src
            pivot 
            (
                max(value)
                for date in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2c047/6)

两者的结果是：

```
|    COL | 2013-02-06 | 2013-02-12 | 2013-02-21 | 2013-02-27 |
--------------------------------------------------------------
|  COUNT |         35 |         23 |         54 |         12 |
| TCOUNT |       3500 |       4000 |       1000 |       5000 | 
```

# java - 如何使用 java 日志将消息记录在单独的日志文件中？

> ID：14842395
> 
> 赞同：0
> 
> 时间：2013-02-12T21:43:05.700
> 
> 标签：java, logging

我有一个简单的问题，我仍然找不到任何答案。我想将消息记录到单独的日志文件中。我正在使用 Java 日志记录而不是 log4j。

我有以下课程：

```
package org.imixs.workflow;
public class MailPlugin  {
 ....
      private static Logger logger = Logger.getLogger(MailPlugin.class.getName());
 ...
 logger.info("some info...");
} 
```

我正在使用 GlassFish 服务器。所以我需要从 GlassFish 自定义 logger.properties 文件中的设置。

需要将哪些条目添加到 GlassFish logger.properties 文件以将我的类“MailPlugin”中的所有消息记录到单独的日志文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:51:05.180

您可以创建一个文件附加程序并对其应用[过滤器](http://docs.oracle.com/javase/6/docs/api/java/util/logging/Filter.html)，该过滤器仅在日志记录来自`MailPlugin`

# objective-c - StoreKit 中枚举声明中包含的类型名导致编译器错误

> ID：14842399
> 
> 赞同：1
> 
> 时间：2013-02-12T21:43:13.453
> 
> 标签：objective-c, enums, compiler-errors

我正在尝试编译一段代码（使用一些 C++ 和 Objective-C）并获得与`typedef`可在 SKDownload.h 中的 Apple StoreKit 框架中找到的相关的编译错误：

```
typedef enum : NSInteger       
{
    SKDownloadStateWaiting,
    SKDownloadStateActive,
    SKDownloadStatePaused,
    SKDownloadStateFinished,
    SKDownloadStateFailed,
    SKDownloadStateCancelled
}
SKDownloadState; 
```

位的含义是什么`: NSInteger`？

如果我摆脱`: NSInteger`代码编译并运行良好，但我怀疑我是否应该进行这种破解。

# .net-micro-framework - Gadgeteer.StorageDevice 的源代码在哪里？

> ID：14842402
> 
> 赞同：1
> 
> 时间：2013-02-12T21:43:18.900
> 
> 标签：.net-micro-framework, .net-gadgeteer

我正在尝试使用[GHI Gadgeteer SDCard 模块](http://www.ghielectronics.com/catalog/product/271)调试一些意外行为，从而以静默方式将文件保存到 SDCard 导致没有文件出现。

SDCard 模块的源代码可用（从[根目录](http://gadgeteer.codeplex.com/SourceControl/changeset/view/24955)导航到[Main/Modules/GHIElectronics/SDCard/Software/SDCard/SDCard_42/SDCard_42.cs](http://gadgeteer.codeplex.com/SourceControl/changeset/view/24955#256638)）。我的代码中没有做我期望的那一行是

```
sdCard.GetStorageDevice().WriteFile("picture.bmp", picture.PictureData); 
```

查看 GHI 源代码`GetStorageDevice()`很简单：

```
public StorageDevice GetStorageDevice()
{
    return _device;
} 
```

并被`_device`声明为

```
private StorageDevice _device; 
```

下载我看到的代码`_device`类型为`Gadgeteer.StorageDevice`. 我在哪里可以找到该类的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:51:23.817

## SD卡模块

您必须先挂载它，`sdCard`然后才能使用它：

```
sdCard.MountSDCard(); 
```

为了确保您看到这一点，您应该事先“连接”Mounted 和 Unmounted 事件处理程序，不过：

```
void ProgramStarted() {
  sdCard.SDCardMounted += new SDCard.SDCardMountedEventHandler(sdCard_SDCardMounted);
  sdCard.SDCardUnmounted += new SDCard.SDCardUnmountedEventHandler(sdCard_SDCardUnmounted);
}

void sdCard_SDCardUnmounted(SDCard sender) {
  Debug.Print("The SD card has been unmounted");
  Debug.Print("DO NOT try to access it without mounting it again first");
}

void sdCard_SDCardMounted(SDCard sender, GT.StorageDevice SDCard) {
  Debug.Print("SD card has been successfully mounted. You can now read/write/create/delete files");
  Debug.Print("Unmount before removing");
} 
```

`GetStorageDevice()`如果这些都不是您的问题，我建议您按如下方式分解您的电话：

```
string rootDirectory = sdCard.GetStorageDevice().RootDirectory;
// What format is `picture`?
// I am going to assume System.Drawing.Bitmap for this example.
picture.Save(rootDirectory + "\\picture.bmp", ImageFormat.Bmp; 
```

如果您不能使用[Bitmap.Save 方法](http://msdn.microsoft.com/en-us/library/ms142147%28v=vs.100%29.aspx)，您将使用其他传统的 StreamWriter 技术。

但是，我实际上无法测试它是否有效，因为我没有这些 SD 卡模块之一。我刚刚查看了[SD 卡模块教程](http://wiki.tinyclr.com/index.php?title=SD_Card_Module)中的示例代码。

如果有帮助，请投票。如果它解决了您的问题，请将其标记为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:50:12.543

我[在 TINYCLR 论坛上得到了答案](http://www.tinyclr.com/forum/topic?id=10838)。它在`Main/GadgeteerCore/Gadgeteer42/Utilities.cs`当前版本中（在撰写本文时）是： http: [//gadgeteer.codeplex.com/SourceControl/changeset/view/24955#200043](http://gadgeteer.codeplex.com/SourceControl/changeset/view/24955#200043)

# .net - 更改为发布构建配置时，NuGet 引用无效

> ID：14842406
> 
> 赞同：7
> 
> 时间：2013-02-12T21:43:49.097
> 
> 标签：.net, visual-studio, nuget

我在使用 NuGet（最新）和 VS2012 时遇到了一个相当奇怪的问题。我有一个启用了 NuGet 包管理的多项目解决方案，只要我使用 Debug|AnyCPU 配置，它就会全部编译并且应用程序运行正确。一旦我切换到 Release|AnyCPU，似乎所有的 NuGet 程序集引用都消失了，应用程序显然无法编译。奇怪的是，我可以在 NuGet Manager UI 中看到所有正确项目的所有引用。

你有没有遇到过类似的问题，你知道如何解决吗？

重建没有帮助。在设置调试配置时设置了 NuGet 引用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T22:45:16.313

再次，我正在回答我自己的问题......

关键是，我正在改变解决方案的结构并移动了一些项目。这意味着，您会在每个项目的 .csproj 文件中获得无效的*相对*路径。没关系，只要你不改变结构的深度，我就是这么做的。

由于**未知原因**，调试构建在无效路径的情况下运行良好（可能以其他方式收集程序集，因为我手动删除了 bin 和 obj 文件夹并清除了解决方案等）。但是对于发布版本，它尝试从（错误引用的）packages/ 目录中获取程序集。

NuGet 进程的任何部分都没有发现/报告此问题，并且在所有 UI 控制台中，甚至在 NuGet PowerShell 控制台本身中，一切似乎都还不错。

解决方案很明显。编辑受影响项目的 .csproj 文件（我实际上是通过过滤警告和发现，只有一些程序集受到影响并且那些来自主解决方案目录之外的程序集）并更改程序集引用的路径以正确的 NuGet 包文件夹。

*旁注：*这是 NuGet（可能还有 VS）引用处理的问题。它试图使用一些相对路径，而不是添加一些变量，如 ${SOLUTION_ROOT} 或 ${NUGET_ROOT} 或 ${PACKAGES_FOLDER}。如果它是通过变量替换完成的，则可以在多个解决方案中使用相同的项目，而不会破坏 NuGet 包配置。至少我还没有找到跨多个解决方案共享同一个项目文件夹的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-18T16:40:57.283

我能够通过卸载然后安装我的项目正在使用的 Nuget 包来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T17:26:36.127

聚会迟到了，但它可能对某人有所帮助。如果您将 nuget `repositoryPath`（可能通过 nuget.config）更改为不同的路径，中间项目，则可能会出现此问题。

例如

*   Nuget 最初会将您的包拉入默认路径
*   Nuget 存储库路径已更改。
*   新包将被拉入此路径，但不会清除现有路径（msbuild clean 也无济于事）。
*   当您构建时，您的提示路径将指向初始 repo 路径，并将构建，因为包仍然存在于该位置。
*   （更糟）现在添加的任何 nuget 包都将指向新的 repo 路径。

As mentioned by @Baron, reinstalling will resolve all this mess. I'd also recommend deleting all bin/obj/packages from your working tree, to ensure you don't have any crud.

# html - 为什么它不呈现为表格 html

> ID：14842409
> 
> 赞同：-3
> 
> 时间：2013-02-12T21:44:05.940
> 
> 标签：html

我正在尝试编写一个包含一些表格的简单页面..

我想知道为什么它不将元素视为表格行和列......并且就像普通文本一样？

[http://jsfiddle.net/zU2uD/](http://jsfiddle.net/zU2uD/)

```
<table>
<!--{% for data in tabledata %}-->

<tr>
<td>{{ data[0]}}</td>
<td>{{ data[1]}}</td>
</tr>

<!--{% endfor %}-->
</table> 
```

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:47:05.390

如果您添加一些 CSS 来[设置单元格](http://jsfiddle.net/zU2uD/)[*样式*](http://jsfiddle.net/zU2uD/)，您将看到表格结构：

```
td {
    border: 1px solid black;
} 
```

我为单元格添加了可见边框，因此您可以看到表格结构。

# android - ExpandableListView 中的隐藏按钮

> ID：14842411
> 
> 赞同：3
> 
> 时间：2013-02-12T21:44:09.547
> 
> 标签：android, button, hide, expandablelistview

我刚刚获得了 ExpandableListView 设置，到目前为止一切正常。在组/父级上，我有一个 TextView 和 Button。该列表的目的是让人们对应用程序中包含的不同声音进行采样，然后他们单击按钮，然后声音将保存到 SD 卡中。这是我到目前为止所拥有的链接：http: [//imgur.com/djSCIrG](http://imgur.com/djSCIrG)

我的问题是，是否有可能在有人单击按钮并选择购买包后，是否可以仅隐藏一个按钮而不是每个组中的所有按钮。

这是我的主要布局（expandablelistview_main.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/soundpacktitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/expandablelistview_main_soundpacktitle_topmargin"
            android:layout_centerHorizontal="true"
            android:text="@string/soundpacktitle"
            android:textSize="@dimen/expandablelistview_main_soundpacktitle_textsize" />

        <ExpandableListView 
            android:id="@+id/soundpacklist" 
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_below="@+id/soundpacktitle"
            android:layout_above="@+id/soundpackbottombar"
            android:layout_marginTop="@dimen/expandablelistview_main_soundpacklist_topmargin"
            android:transcriptMode="disabled"
            android:cacheColorHint="#00000000"
            android:listSelector="@android:color/transparent" />   
    </RelativeLayout> 
```

这是我的组/父布局（expandablelistview_group.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/grouptextview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:gravity="center_vertical"
        android:layout_marginLeft="@dimen/expandablelistview_group_grouptextview_leftmargin"        
        android:textSize="@dimen/expandablelistview_group_grouptextview_textsize" />

    <Button
        android:id="@+id/buypackbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:layout_alignParentRight="true" 
        android:focusable="false" 
        android:focusableInTouchMode="false"
        android:text="@string/buypack"
        android:padding="@dimen/expandablelistview_group_buypackbutton_padding"
        android:textSize="@dimen/expandablelistview_group_buypackbutton_textsize"
        android:textStyle="bold" />

</RelativeLayout> 
```

这是我的java类：

```
public class InAppSounds extends Activity {
    private ExpandableListView soundpacklist;

    private ArrayList<String> groups;
    private ArrayList<ArrayList<ArrayList<String>>> childs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.expandablelistview_main);

        TextView soundpacktitle = (TextView) findViewById(R.id.soundpacktitle);
        soundpacktitle.setTypeface(printbold);

        // Declare the ExpandableListView and set's the indicator to the list arrows
        soundpacklist = (ExpandableListView) findViewById(R.id.soundpacklist);
        soundpacklist.setGroupIndicator(getResources().getDrawable(R.drawable.list_groupselector));

        LoadData();

        myExpandableAdapter adapter = new myExpandableAdapter(this, groups, childs);
        soundpacklist.setAdapter(adapter);
    }

    // Loads the ExpandableListView with parent and children groups
    private void LoadData() {
        groups = new ArrayList<String>();
        childs = new ArrayList<ArrayList<ArrayList<String>>>();

        // String array that stores the parent and child names
        String[] soundpackgroups = getResources().getStringArray(R.array.soundpackgroups);
        String[] soundpack1 = getResources().getStringArray(R.array.soundpack1);
        String[] soundpack2 = getResources().getStringArray(R.array.soundpack2);
        String[] soundpack3 = getResources().getStringArray(R.array.soundpack3);

        // First Sound Pack and their songs
        groups.add(soundpackgroups[0]);
        childs.add(new ArrayList<ArrayList<String>>());
        for (int a = 0; a < soundpack1.length; a++) {
            childs.get(0).add(new ArrayList<String>());
            childs.get(0).get(a).add(soundpack1[a]);
        }

        // Second Sound Pack and their songs
        groups.add(soundpackgroups[1]);
        childs.add(new ArrayList<ArrayList<String>>());
        for (int a = 0; a < soundpack2.length; a++) {
            childs.get(1).add(new ArrayList<String>());
            childs.get(1).get(a).add(soundpack2[a]);
        }

        // Third Sound Pack and their songs
        groups.add(soundpackgroups[2]);
        childs.add(new ArrayList<ArrayList<String>>());
        for (int a = 0; a < soundpack3.length; a++) {
            childs.get(2).add(new ArrayList<String>());
            childs.get(2).get(a).add(soundpack3[a]);
        }
    }

    public class myExpandableAdapter extends BaseExpandableListAdapter {

        private final ArrayList<String> groups;

        private final ArrayList<ArrayList<ArrayList<String>>> children;

        private final Context context;

        public myExpandableAdapter(Context context, ArrayList<String> groups,
                ArrayList<ArrayList<ArrayList<String>>> children) {
            this.context = context;
            this.groups = groups;
            this.children = childs;
        }

        @Override
        public boolean areAllItemsEnabled() {
            return true;
        }

        @Override
        public ArrayList<String> getChild(int groupPosition, int childPosition) {
            return children.get(groupPosition).get(childPosition);
        }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        @Override
        public View getChildView(int groupPosition, final int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {

            String child = getChild(groupPosition, childPosition).get(0);

            if (convertView == null) {
                LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = infalInflater.inflate(R.layout.expandablelistview_child, null);
            }

            // TypeFace variable for the PrintBold
            printbold = Typeface.createFromAsset(getAssets(), "fonts/PrintBold.otf");

            TextView childtxt = (TextView) convertView.findViewById(R.id.childtextview);
            childtxt.setTypeface(printbold);
            childtxt.setText(child);

            return convertView;
        }

        @Override
        public int getChildrenCount(int groupPosition) {
            return children.get(groupPosition).size();
        }

        @Override
        public String getGroup(int groupPosition) {
            return groups.get(groupPosition);
        }

        @Override
        public int getGroupCount() {
            return groups.size();
        }

        @Override
        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        @Override
        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

            final String group = getGroup(groupPosition);

            if (convertView == null) {
                LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = infalInflater.inflate(R.layout.expandablelistview_group, null);
            }

            // TypeFace variable for the PrintBold
            printbold = Typeface.createFromAsset(getAssets(), "fonts/PrintBold.otf");

            TextView grouptxt = (TextView) convertView.findViewById(R.id.grouptextview);
            grouptxt.setTypeface(printbold);
            grouptxt.setText(group);

            final Button buypackbutton = (Button) convertView.findViewById(R.id.buypackbutton);
            buypackbutton.setClickable(true);

            buypackbutton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View view) {
                    AlertDialog.Builder alert = new AlertDialog.Builder(InAppSounds.this);
                    if (group.equals("Pack #1")) {
                        alert.setCancelable(false);
                        alert.setTitle(getString(R.string.buypacktitle));
                        alert.setIcon(getResources().getDrawable(R.drawable.ic_audioicon));
                        alert.setMessage(getString(R.string.buypackmsg));
                        alert.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                // check to make sure the SD card is mounted
                                // if not display an AlertDialog
                                if (!isSDPresent()) {
                                    sdcardalert();
                                }
                                else {
                                    // this will erase the button in all the groups, not just this group
                                    buypackbutton.setVisibility(View.INVISIBLE);
                                }
                            }
                        });
                        alert.setNegativeButton("No", new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                dialog.cancel();
                            }
                        });
                        alert.show();
                    }
                }
            });

            return convertView;
        }

        @Override
        public boolean hasStableIds() {
            return true;
        }

        @Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }
    }
} 
```

我将不胜感激在这件事上的任何指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:46:17.637

是的。这很简单。您所要做的就是获取对您的按钮的引用并将可见性设置为消失。像这样：

```
Button sampleButton = (Button) findViewById(R.id.sample_button);
sampleButton.setVisiblity(View.GONE); 
```

注意：当您将其设置为 View.GONE 时，最初分配给它的布局空间也会被删除。如果您只想删除按钮并保留布局空间，请改用 View.INVISIBLE。

**编辑：**这是我如何防止按钮重新出现：首先，我将使用布尔值在活动处于活动状态时跟踪按钮的状态。然后在您的覆盖中，`getChildView`我会检查这个布尔值并相应地设置可见性。也许在回调中插入类似这样的东西，`getChildView`以防止在单击列表项时按钮重新出现：

```
if (!showButton) {
Button button = (Button) findViewById(R.id.sample_button);
button.setVisibility(View.GONE);
} 
```

至于重回荧幕。为了跟踪是否不显示按钮，我将使用布尔值并将其存储在 SharedPreferences 中。然后，同样在`getChildView`回调中，检查布尔值的状态并进行相应的设置。像这样的东西：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
boolean showButtonStatusPref = settings.getBoolean("showButton", true);

if(!showButtonStatusPref) {
Button button = (Button) findViewById(R.id.sample_button);
button.setVisibility(View.GONE);
} 
```

您唯一需要做的另一件事是管理每个按钮的状态。

**编辑2：**我完全忽略了子视图使用相同布局的事实（duh！脑抽筋:)）。

您仍然可以使用共享首选项来跟踪已下载的样本（您可以为此使用 Set）。您还需要创建一种方法来为每个样本分配“标识符”。从那里您所要做的就是在每次`getChildView()`调用时执行检查，如果 Set 包含选定的样本标识符，则将按钮可见性设置为消失。这应该注意在未下载示例时显示按钮，并且在下载示例时不显示按钮。也许是这样的`getChildView()`：

```
Set<String> defaultSet = new SortedSet<String>();
defaultSet.add("Nothing downloaded");
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SortedSet<String> listOfDowloaded = settings.getStringSet("isDownloadedList", );

if (listOfDownLoaded.contains(sampleDownloadIdentifier)) {
Button button = (Button) findViewById(R.id.some_id);
button.setVisiblity(View.GONE);
} 
```

# asp.net - 当多个用户从asp会员登录时如何将用户名输入sql触发器

> ID：14842412
> 
> 赞同：2
> 
> 时间：2013-02-12T21:44:17.263
> 
> 标签：asp.net, sql-server, asp.net-mvc, sql-server-2008, tsql

我正在尝试记录对数据库的所有更改，但无法找到将当前用户名获取到触发器的方法。我有`triggerData`一个存储用户信息的表格， `(guid (userid), data (username), logintime)`这些信息是在用户登录时插入的。

这是触发器

```
declare @UserIsOnlineTimeWindow DateTime
    declare @currenttime DateTime
    set @currenttime = GETDATE()
    set @UserIsOnlineTimeWindow = 10

    DECLARE @uname nvarchar(max)
    **set @uname = (SELECT T.UserName from (SELECT distinct u.UserName FROM aspnet_Users u
    WHERE IsAnonymous = 'FALSE' AND ((@currenttime - @UserIsOnlineTimeWindow) < u.LastActivityDate)) as t,
    TriggerData td, aspnet_Users au 
    WHERE t.UserName = td.Data and td.guid = au.UserId and td.logintime = (select MAX(td.logintime) from TriggerData td))**

    DECLARE @ComputerName nvarchar(50)
    DECLARE @IPAddr nvarchar(50)
    DECLARE @BroadcastIP nvarchar(50)
    DECLARE @auditInsert nvarchar(255)
    SET @ComputerName = (SELECT ComputerName FROM inserted)
    SET @IPAddr = (SELECT ISNULL(IPAddr,0) FROM inserted)
    SET @BroadcastIP = (SELECT ISNULL(BroadcastIP,0) FROM inserted)
    SET @auditInsert =  @ComputerName+' '+@IPAddr+' '+@BroadcastIP
    Begin

    INSERT INTO Audit(OldInfo ,NewInfo,[User],Date1,Type,TableName) VALUES('New Record',@auditInsert, @uname ,GETDATE(),'Added','LabIP')

    End 
```

对用户名的查询不会给出当前正在修改的用户，而是给出最近登录的用户。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:13:53.410

就像 marc_s 所说的触发器可以并且将每批应用一次。但是，在您的情况下，听起来您当前的应用程序每批仅插入一次，因此可以正常工作。但是，如果有人尝试插入多行，您将遇到问题。从应用程序的另一部分或从查询窗口说。如果您想现在修复它或等待它损坏（如果有的话），这完全取决于您。

我重新格式化了给你带来问题的查询。

```
set @uname = (SELECT T.UserName FROM
        (SELECT DISTINCT u.UserName 
        FROM aspnet_Users u
        WHERE IsAnonymous = 'FALSE' 
          AND ((@currenttime - @UserIsOnlineTimeWindow) < u.LastActivityDate)) AS t
        JOIN TriggerData td
          ON t.UserName = td.Data 
        JOIN aspnet_Users au 
          ON td.guid = au.UserId 
        WHERE td.logintime = (select MAX(td.logintime) from TriggerData td)) 
```

你可以从这里看出你的问题所在。如果您查看 WHERE 子句，您会发现您正在专门拉取上次登录的行。如果您没有使用应用程序 ID（尽管听起来像），您可以使用 USER_NAME() 或 SUSER_SNAME() 拉取当前用户。不幸的是，根据您提供的信息，我认为您无法拉出实际进行更改的用户，再次假设您使用的是应用程序 ID。

您可以尝试将 SPID（当前连接的 ID）放入您的用户表中。您可以将其检索为@@SPID。这样，当您处于当前连接中时，您将始终能够分辨出当前用户是谁。当然，这仅在您在用户登录的整个过程中都保持连接时才有效（可能不在基于 Web 的应用程序中）。

最后（不幸的是）不是使用触发器创建存储过程来进行插入。将当前用户作为参数列表的一部分传入 SP 并在那里进行日志记录。

抱歉，我帮不上什么忙。

# sql - 多列索引效率

> ID：14842415
> 
> 赞同：2
> 
> 时间：2013-02-12T21:44:26.543
> 
> 标签：sql, performance, oracle, indexing

```
select a
from t
where b = 1 and c = 2 
```

1.  为了提高此查询的性能，我应该创建第一个索引`index (b, c)`还是`index(c, b)`足够？
2.  据我了解，`index (b, c, a)`可能会进一步提高性能，但前提`(b, c, a)`是 MORE 比`(b, c)`. 那是对的吗？
3.  SQL 问题是否属于 dba.stackexchange 站点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:15:29.180

> 1.为了提高这个查询的性能，我应该创建索引（b，c）和索引（c，b）还是第一个索引就足够了？

您不需要创建两个索引。两者中的任何一个，如果用于执行查询，则可以同样提高此类查询（具有`where b = 1 and c = 2`条件）的效率。是否使用，是否提高性能，取决于索引的选择性。

> 2.据我了解，索引（b，c，a）可能会进一步提高性能，但前提是（b，c，a）比（b，c）更独特。那是对的吗？

是的。一个索引`(b , c, a)`（或一个`(c, b, a)`同样好）将提高性能。与选择性无关。读取索引（以及所有从索引中的同一位置）不会比从（`(b, c)`索引，然后`a`从此处的一行和从（可能更宽的）表中的另一行获取列数据）更糟糕。

的选择性`(b, c)`，例如查询返回多少行，将影响效率的提高多少，`(b, c, a)`索引会给你。如果查询返回几十行，则差异会很小。如果查询返回数百万表中的数千行，则改进将很高，因为将从（覆盖）索引中读取所有数据。

> 3\. SQL 问题是否属于 dba.stackexchange 站点？

这是元站点的问题，无论是主要站点还是 DBA.SE 元站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:50:41.277

1.  您只需要在两列上都有一个索引。两者哪个更好取决于表的结构和将使用它的查询，但通常与复合索引的顺序没有显着差异。

2.  覆盖查询中使用的所有列的索引称为`covering index`. 它可以提高性能，但除非表有很多列或非常大，否则通常不会产生显着差异。它可以更快的原因是它不必在找到索引中的条目后访问数据，它可以只使用索引而不需要查看数据，因为它需要的一切都在索引中。

3.  有些问题更适合 dba，但这个问题在这里很好。这甚至可能已经迁移到这里，因为它不是非常技术性的。

对于前两部分，总体思路是“视情况而定”。在您的情况下，由于您可能没有处理大量数据，因此走哪条路可能不会产生重大影响；您可能需要在表中至少有 10 MB 的数据才能有明显的差异。

# javascript - 将 HTML 下载到 iOS 持久存储并加载/导航到它

> ID：14842416
> 
> 赞同：0
> 
> 时间：2013-02-12T21:44:27.707
> 
> 标签：javascript, jquery, cordova

我刚刚开始在 iOS 上使用 Phonegap，我想知道是否有办法远程更新应用程序的外观（在这种情况下忘记 App Store 更新）。

我知道我可以将数据存储在设备上的本地数据库和文件中，但我想导航到下载的文件。我的应用程序将启动并检查服务器上更新的 HTML 和 JS 文件。如果没有，它将继续使用已保存在设备上的 HTML。我不想直接导航到我服务器上的页面，因为 Apple 原生 API 不起作用，我希望应用程序也可以离线工作。我发现评论者提到了[这个](https://stackoverflow.com/questions/14399918/phonegap-download-html-file-and-replace-it-source)现有的 Stackoverflow 问题，要求提供类似的持久存储。我想知道是否可以导航到持久存储中的某些内容。

是否可以使用 Phonegap/Apache Cordova 下载 HTML 然后导航到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:55:38.430

答案是肯定的。

*   你需要一个文件传输，
*   然后将文件存储到文件系统
*   您必须将绝对路径存储在本地存储中并导航到它

我很确定，这个应用程序将从苹果应用程序商店中删除，因为禁止从服务器加载代码。

Apple 将从商店中删除此应用程序。

# php - 需要抓取需要设置“我同意”cookie 的网站内容

> ID：14842419
> 
> 赞同：1
> 
> 时间：2013-02-12T21:44:46.527
> 
> 标签：php, javascript, jquery, cross-domain, scrape

从我读过的所有内容来看，这似乎是不可能的。但这是我的场景：

我需要抓取包含待售房屋信息的表格内容。该页面没有密码保护或任何东西，但您首先必须单击前一页上的“我同意”链接，以便设置一个 cookie，表示您同意内容可能不是 100% 准确。然后才向您显示数据。有没有办法使用 php/jquery/javascript 来完成这个？我知道您无法创建 iframe，因为它是跨域的。我也无法访问这个其他网站。

感谢您的任何回答，因为我并不期待任何积极的事情。:) 如果你能告诉我如何做到这一点，非常感谢。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:50:11.290

使用服务器端脚本（使用[cURL](http://www.php.net/manual/en/book.curl.php)的 PHP）来抓取网站并返回您需要的信息。确保使用代表“我同意”cookie 的请求设置适当的 HTTP 标头。

样本：

```
<?php

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/');
curl_setopt($ch, CURLOPT_COOKIE, 'I_Agree=1');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$responseBody = curl_exec($ch);

curl_close($ch);

// Read the information you need from $responseBody and return it as response body

?> 
```

现在，您可以通过调用上面的服务器端脚本从您的网站访问信息。有关如何使用 cURL 的详细信息，请查看[文档](http://www.php.net/manual/en/book.curl.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:48:59.910

CURL 可以根据您设置的选项存储或调用文件中的 cookie。这是“cookiejar”示例：

[http://curl.haxx.se/libcurl/php/examples/cookiejar.html](http://curl.haxx.se/libcurl/php/examples/cookiejar.html)

查看 CURLOPT_COOKIEJAR 和 CURLOPT_COOKIEFILE 选项

# ruby-on-rails - 部署到 Heroku 后，无法通过 Devise 登录

> ID：14842421
> 
> 赞同：2
> 
> 时间：2013-02-12T21:45:04.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

在我的开发环境中，一切运行完美。但是，在部署到 Heroku 后，我无法登录。在填写了登录和注册表格后，我被重定向到了根 URL，但显示了未经身份验证的页面，我无法访问任何已验证的路由。

**几点注意事项：**

*   注册后，在数据库中创建用户记录
*   登录后，在数据库中添加登录计数
*   我 100% 确信数据库已正确设置和迁移（已经做过很多次了）
*   他们在heroku日志中没有错误。尝试访问经过身份验证的路由时，我似乎只是被重定向了。

有没有人有什么建议？对此感到绝望：\

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:10:23.897

我的问题出在 session_store.rb 文件中。我已将其更改为适应子域，但 :domain => 设置为我的本地开发环境 url (lvh.me)。我将其更改为 :all，该应用程序现在可以正常运行。

祝你好运！

# php - 如何从 php 中的 URL 获取重复参数的值？

> ID：14842429
> 
> 赞同：0
> 
> 时间：2013-02-12T21:45:41.080
> 
> 标签：php, url, get

如何使用 $_GET 从 URL 栏中返回值？

复选框在表格中打勾，这是与 $_GET 变量有关的部分（我已经删掉了一些）：

```
<form action= "<?php echo $_SERVER['PHP_SELF'];?>" method="get">
echo "<table border='1'>";
// Start of the table

while($row = mysql_fetch_array($result))
// The while loop enables each of the stock codes to have
// a separate page within the table, based on the stock code.
{
echo "<tr>";
// Starts the table row.

echo "<td>Stock Code: " . $row['stock_code'] . "
</br> Stock Name: " . $row['stock_name'] . "</td>";
$num = 0;
echo "<td><input type='checkbox' id='select" . $num . "' name='select" . $num . "' value=".$row['stock_code']."></input></td>";
$num = $num+1; } 
```

当我点击提交时，股票代码进入 URL 栏，如下所示：

```
submitcheckbox.php?select72=DFC107&select74=DFC120&select79=DFC123 
```

我需要它遍历 $_GET 值，检查设置了哪些框，然后如果它们已用标记检查过，则更新数据库。

我正在考虑使用 while 循环，使用 isset 检查复选框是否已被选中：

```
$numrows = count($row);
$i=0;
while ($i<=$numrows){
if (isset ($_GET['select.i']));
echo $_GET['select.i'];
$i++;

$save = $_GET['select.i'];
echo $save; 
```

到目前为止还不是很成功......想知道是否有更好的方法来做到这一点，比如使用数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:51:57.077

我不确定`count($row)`您认为它是什么，您可以按照编写顺序发布包含该部分的整个页面代码吗？

它`$_GET['select'.$i]`也不是`$_GET['select.i']`：

```
$numrows = count($row); //make sure where this comes from and that it actually contains the number of rows
for($i=0;$i<$numrows;$i++){
    if(isset($_GET['select'.$i])){
        echo $i.' isset : '.$_GET['select'.$i].'<br/>';
        //do whatever is required to save
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:52:49.247

起初 -`while`甚至不是，`for`而是[`foreach`](http://cz.php.net/manual/en/control-structures.foreach.php)。然后你就这样做：

```
foreach($_GET as $key=>$value) {
   if(substr($key, 0, 6)=="select") {//Just check the begining of the name - fur sure, can be ommited
     echo "Checkbox #".substr($key, 6)." selected!<br>";
   }

} 
```

如果您使用`while`得当（而您没有正确使用），您将遍历许多未定义的值——您似乎有超过 70 个复选框！你想让程序检查它们吗？您可以只检查发送的值。
Foreach 为您提供每次迭代的关联数组键和值。它只为您提供`foreach($array as $value)`语法值。

### 修复问题代码中的语法错误：

在第二个代码中，您有非常明显的初学者语法错误。我将指出一些，以便您将来避免它们：

```
$numrows = count($row);
$i=0;
while ($i<=$numrows){
  if (isset ($_GET['select'.$i]));  { //This must have brackets too, if it involves multiple commands!
    echo $_GET["select$i"];     //This is how we concat strings in php
    $save = $_GET['select'.$i]; //Or this
    echo $save;    
  }
  $i++;          //Iterate at the end
} //Mising ending bracket!! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:02:07.687

如果我了解您正在尝试做什么，那么当您遍历潜在“选择”（即，`$_GET['select'.$i]`）的数量时，您可以将 $i's 添加到具有以下内容的数组中：

```
if (isset($_GET['select'.$i])) {  
  $my_array[] = $i;  
} 
```

然后，您可以循环`$my_array`并勾选与以下内容相关联的复选框`$i`：

```
foreach($my_array as $checked) {
  // do your checkbox stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T22:03:08.167

这是有关如何使其工作的想法

```
foreach($_GET as $key=>$value) {
 // check if the key is something like select74
 // by finding first occurance of the string on 
 // the key
 $pos = strpos($key, 'select');

 // If string exist
 if ($pos !== false) {
   // Get the save and save it
   echo $value;
   $save = $value;
   echo $save;
 }

} 
```

**注意：**如果您可以使用 $_POST 而不是使用 $_GET 您的表单，您只需将字段名称从 select74 更改为 select[74] 这样 $_POST 将有一个数组调用 select 其中键是 74 和值 DFC120

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T22:00:19.647

您可以使用 array_values($_GET) 在新数组中仅获取从 $_GET 中选择的值。然后，您可以使用 foreach 循环来迭代这些值。

```
foreach(array_values($_GET) as $selected) {
  // Do things with $selected
} 
```

# perl - sed - 如何仅在 csv 文件中行的匹配部分替换字符串？

> ID：14842431
> 
> 赞同：2
> 
> 时间：2013-02-12T21:45:46.457
> 
> 标签：perl, unix, sed

我有一个包含以下行的 csv 文件：

```
23000747,,2015582,-375080.2254,-375080,-375080
23000749,,SA1555,"-30,448,276","-30,448,456","-30,448,239" 
```

我想从所有引用的列中删除双引号和逗号，以便结果如下所示：

```
23000747,,2015582,-375080.2254,-375080,-375080
23000749,,SA1555,-30448276,-30448456,-30448239 
```

我已经设法使用以下命令找到要删除逗号的部分，但我不知道如何在 \1 上执行 s/,//g 和 s/"//g。

```
sed 's/\("[-,0-9]*"\)/#\1#/g' 1.txt

23000747,,2015582,-375080.2254,-375080,-375080
23000749,,SA1555,#"-30,448,276"#,#"-30,448,456"#,#"-30,448,239"# 
```

如果有人可以在这里提供帮助，我真的很感激。

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:51:54.987

`sed`不适合你的工作。您可以使用 Perl 和`Text::CSV module`，但如果有，`GNU awk`您可以使用[`FPAT`](http://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html)变量：

```
awk 'BEGIN { FPAT = "([^,]*)|(\"[^\"]+\")"; OFS="," } { for (i=1; i<=NF; i++) gsub(/[\",]/,"", $i) }1' 
```

结果：

```
23000747,,2015582,-375080.2254,-375080,-375080
23000749,,SA1555,-30448276,-30448456,-30448239 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:49:20.027

对于这个特定的任务，shell 是有限的。像 Perl 这样的高级文本操作语言更适合 CSV 解析器，请参阅：

```
my $file = "/path/to/file.csv";

use strict; use warnings;

use feature qw/say/;
use Text::CSV;

my $csv = Text::CSV->new()
    or die "Cannot use CSV: ".Text::CSV->error_diag();

open my $fh, "<:encoding(utf8)", $file
    or die "$file: $!";

while (my $row = $csv->getline($fh)) {
    map { tr/,// } @$row;
    say join ",", @$row;
}

$csv->eof or $csv->error_diag();
close $fh; 
```

如果您需要删除特定列上的逗号，请替换

```
map { tr/,// } @$row; 
```

经过

```
map { tr/,// } @$row[3..5]; # array slice (columns N-1) 
```

# jsf - 表达式语言：Concat String 与方法调用中的变量

> ID：14842439
> 
> 赞同：2
> 
> 时间：2013-02-12T21:46:29.720
> 
> 标签：jsf

我有一个带有以下方法（签名）的 backingBean：

```
public class SessionBean {
    ...
    public boolean subjectIsPermitted(final String permission);
    ...
} 
```

在我的 jsf 模板中，我想动态调用此方法，如下所示：

```
 ${sessionBean.subjectIsPermitted('company:manage:'company.id)} 
```

好吧，方法调用中的这种连接确实会引发 com.sun.el.parser.ParseException。使用“+”或“.” 连接字符串也无济于事。

如何在 EL 方法调用中将字符串与变量连接起来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T09:02:11.127

检查另一个问题：

[将字符串与变量的值组合为EL中另一个变量的名称](https://stackoverflow.com/questions/3129769/combining-a-string-with-the-value-of-a-variable-to-be-the-name-of-another-variab)

根据它，您可以使用：

```
<c:set var="variable" value="company:manage:${company.id}" /> 
```

前：

```
${sessionBean.subjectIsPermitted(variable)} 
```

这应该有效。

问候，

# ember.js - 如何在 ember-data rev 11 中注册转换？

> ID：14842441
> 
> 赞同：2
> 
> 时间：2013-02-12T21:46:31.563
> 
> 标签：ember.js, ember-data

例如，要`raw`在旧版本中注册一个类型，我会这样做：

```
DS.attr.transform.raw = {
    from: function(serialized) {
        return serialized;
    },
    to: function(deserialized) {
        return deserialized;
    }
} 
```

我将如何在最新版本的 ember-data 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:46:31.563

这是它在 Rev 11 中的样子：

```
DS.RESTAdapter.registerTransform('raw', {
    deserialize: function(serialized) {
        return serialized;
    },  
    serialize: function(deserialized) {
        return deserialized;
    }   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T15:13:25.313

这是第 13 版对我有用的内容：

```
DS.JSONTransforms.array = {
  serialize: function(value) {
    return Em.isNone(value) ? [] : value ;
  },
  deserialize: function(value) {
    return Em.isNone(value) ? [] : value ;
  }
} ; 
```

# php - 尝试从多维数组中获取给定值的键

> ID：14842442
> 
> 赞同：0
> 
> 时间：2013-02-12T21:46:33.967
> 
> 标签：php, arrays, key

因此，我有一个数组（使用 得到这个`var_dump`）：

```
array
  0 => 
    array
      'post_id' => string '6' (length=1)
  1 => 
    array
      'post_id' => string '9' (length=1) 
```

当我只有`post_id`. 例如，如果我有'6'，我想返回'0'，如果我有'9'，我想返回'1'。我努力了：

```
$key = array_keys($subs, array_keys($subs[??], 6)); 
```

鉴于`$subs`是数组。问题是，我不知道如何遍历“父”数组中的数组，因此，“??”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:29:55.140

我会使用`array_filter()`并`use`做到这一点。像这样：

```
$array; // your array
$needle; // the value you are looking for
$filtered_array = array_filter($array, function ($element) use ($needle) {
    return ($element['post_id'] === $needle);
});

$matching_keys = array_keys($filtered_array); 
```

将过滤输入数组以仅具有与 的值匹配的值的`array_filter()`那些数组元素数组。在应用过滤器后，您可以使用它来获取剩余元素的键值。`post_id``$needle``array_keys`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:03:17.557

```
$post_id_to_find = '6';
$key = '';
foreach ($subs as $k1 => $v1)
{
    foreach ($v1 as $k2 => $v2)
    {
        if ($post_id_to_find == $v2)
        {
            $key = $k1;
            break;
        }
    }
} 
```

本质上，这段代码的作用是遍历外部数组，并为每个元素循环遍历内部数组，如果它找到您想要的帖子 ID，它将设置一个在循环之外初始化的变量，因此在您跳出循环后您将拥有相应的密钥。

* * *

**编辑**

这实际上是一个非常糟糕的答案，我意识到您并不需​​要内部循环，因为您知道要在内部数组中检查什么键...无论如何，您似乎使用了另一个答案，所以这几乎没有实际意义.

# facebook-graph-api - OAuthException：活动访问令牌

> ID：14842445
> 
> 赞同：0
> 
> 时间：2013-02-12T21:46:39.477
> 
> 标签：facebook-graph-api, stack-trace, access-token

我们的应用程序对 facebook api 进行了如此多的调用，我如何输出错误堆栈跟踪以便我们可以看到对 API 的哪个调用导致了访问令牌错误？

OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。

我需要能够查明引发上述错误的行号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:37:47.797

该错误由 facebook graph api 返回，因此您可以在发送请求之前尝试输出您的请求，然后以您知道的方式输出您的响应。这个错误意味着你没有提供访问令牌，如果你使用 facebook graph api，每个请求都必须出现在对 facebook 的每个请求中。

# codeigniter - 控制器方法 VS api 方法

> ID：14842447
> 
> 赞同：1
> 
> 时间：2013-02-12T21:47:00.907
> 
> 标签：codeigniter

我有一个控制器可以从我的站点发送消息：

```
example.com/contact/send-message 
```

好的，但是在我的 API 中，我创建了相同的方法：

```
api.example.com/contact/send-message 
```

在 API 中，我应该保持相同的方法并只调用控制器内部的方法吗？什么时候应该使用控制器方法或 api 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:04:41.103

无论如何，将您的 API 逻辑与您的 Web 应用程序逻辑分开。一种将通过网络浏览器使用，另一种将仅与其他软件交互。他们每个人解决不同的问题。

使用胖模型、瘦控制器方法。这意味着所有的数据处理方法都应该放在你的模型中，而不是控制器中。从那里，您可以从 API 控制器或 Web 控制器调用这些方法。

[Phil Sturgeon 的 REST Server](https://github.com/philsturgeon/codeigniter-restserver)是一个构建 RESTful API 的优秀插件

# perl - 对 Perl 中的字符串终止符感到困惑

> ID：14842448
> 
> 赞同：0
> 
> 时间：2013-02-12T21:47:04.390
> 
> 标签：perl, terminator

我在这里阅读了几篇关于获取错误消息的帖子 -

> 在 EOF 之前的任何地方都找不到字符串终止符 "" ...
> 
> 在 EOF 之前的任何地方都找不到字符串终止符 "'" ...

我不认为我真的理解它，尽管带回家的信息不是使用单引号。好吧，我会尽量不使用单引号。但是，如果可能的话，有人可以帮助我理解这两个脚本之间的区别，就 Perl 对它们的不同看法而言

```
#!/usr/bin/perl -w
#backwhacking
print "c:\\WINNT\\Profiles\\\n";
print 'c:\WINNT\Profiles\ ', "\n";

#!/usr/bin/perl -w
#backwhacking
print "c:\\WINNT\\Profiles\\\n";
print 'c:\WINNT\Profiles\', "\n"; 
```

第一个脚本在输出中运行良好

```
c:\WINNT\Profiles
c:\WINNT\Profiles 
```

而第二个脚本给了我关于找不到脚本终止符“'”的相同错误代码

Perl 编程需要区分带或不带单引号的空格是否有任何“原因”？抱歉，但对于非计算机科学的人来说，这似乎有些微不足道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:51:52.823

' 样式引号使用反斜杠转义 ' 字符。

所以：`print '\''`; 将打印 ' 字符，而不是 \' 字符串。

当您打印 'whatever\ ' - 它将打印 >whatever < - 最后带有空格。但如果你这样做：

```
print 'whatever \' 
```

这不是终止的字符串，因为反斜杠转义了 '. 因此，以下内容`, "\n";`被视为 '' 字符串的一部分。

# java - 为同一个应用程序中的多个项目配置 log4j。服务器

> ID：14842450
> 
> 赞同：1
> 
> 时间：2013-02-12T21:47:07.173
> 
> 标签：java, jakarta-ee, logging, jboss, log4j

我们有一堆项目部署在同一个 Jboss 应用程序中。服务器。每个项目在其 WEB-INF 目录中都有自己的 log4j.properties。

这个想法是让每个项目都有自己的日志文件，将其日志写入其中。

关于如何实现这一点的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:30:08.460

首先，您没有提及您正在使用的 JBoss 版本。您必须记住，AS7 之前的 JBoss 版本包含其自己的 log4j 版本（库和配置文件：conf/jboss-log4j.xml），因此默认情况下 JBoss 将忽略您在每个版本中的 log4j.properties 文件你的项目。

也就是说，您有两种方法可以为每个应用程序配置日志文件：

1.  集中方式：在 Jboss 中配置，通过 conf/jboss-log4j.xml。这样您就不需要修改您的应用程序，或者
2.  修改您的应用程序，以便它们采用自己的 log4j 库（您必须将它们包含在 ear/war 中），而不是 Jboss 库。

对于第一种方法，您必须在 conf/jboss-log4j.xml 文件中为每个应用程序定义一个附加程序，然后为应用程序包定义类别。例如，要为名为 app1.war 的应用程序配置日志文件，其中类位于名为 com.foo.app1 的包中，您必须添加：

```
 <appender name="APP1_APPENDER" class="org.jboss.logging.appender.DailyRollingFileAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="File" value="${jboss.server.log.dir}/app1.log"/>
      <param name="Append" value="true"/>
      <!-- Rollover at midnight each day -->
      <param name="DatePattern" value="'.'yyyy-MM-dd"/>    
      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] (Thread) Message\n -->
         <param name="ConversionPattern" value="%d %-5p [%c] (%t) %m%n"/>
      </layout>
   </appender>
   ...
   ...
   <category name="com.foo.app1" additivity="true">
      <priority value="INFO"/>
      <appender-ref ref="APP1_APPENDER"/>
   </category> 
```

您必须分别为要为其定义日志文件的每个项目添加一组自定义的块，例如这个块。

如果您更喜欢第二种方法，如前所述，您必须在每个项目中包含 log4j 库并隔离每个应用程序，以便它获取应用程序中包含的库而不是 JBoss 中的库。[查看 Jboss 日志文件的第 10.3.7 节](http://docs.jboss.org/process-guide/en/html/logging.html)以获取有关此方法的更多信息。

# dns - 使用 cloudflare 保护专用服务器

> ID：14842451
> 
> 赞同：0
> 
> 时间：2013-02-12T21:47:09.757
> 
> 标签：dns, installation, cloudflare, dedicated

所以我有一个安装了 LAMP 的基于 Ubuntu 10.04 的专用服务器。我托管了几个网站，但目前所有网站都在同一个 IP 上，使用 Apache 虚拟主机配置。

所以每个人都可以通过获取IP来攻击我的服务器等。我想用 cloudflare 保护它，但是我需要设置不同的服务器。我想使用 DNS。

怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:47:49.330

您需要分别设置每个域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T02:45:26.317

解决。将名称服务器设置为 cloudflare，然后将 cloudflare 上的子域配置为我的服务器 IP ...

# c# - 将 HTML 组件更改为标准组件

> ID：14842455
> 
> 赞同：0
> 
> 时间：2013-02-12T21:47:31.893
> 
> 标签：c#, asp.net, asp.net-mvc-3

我创建了一个 MVC-3 应用程序（一旦我们创建它，我们就会得到一个已经开发好的登录屏幕）。它使用工具箱中的 HTML 组件来创建文本框、标签等。但我想使用工具箱中的标准组件。如何用标准组件替换这些 HTML 组件。

当用户单击登录按钮时，用户名和密码在为我们提供的默认示例应用程序中得到验证。我不想更改它的功能，但我只想将表单组件更改为工具箱中的标准组件。

我怎样才能做到这一点 ？

```
<% using (Html.BeginForm()) { %>
    <%: Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.") %>
    <div>
        <fieldset>
            <legend>Account Information</legend>

            <div class="editor-label">
                <%: Html.LabelFor(m => m.UserName) %>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(m => m.UserName) %>
                <%: Html.ValidationMessageFor(m => m.UserName) %>
            </div>

            <div class="editor-label">
                <%: Html.LabelFor(m => m.Password) %>
            </div>
            <div class="editor-field">
                <%: Html.PasswordFor(m => m.Password) %>
                <%: Html.ValidationMessageFor(m => m.Password) %>
            </div>

            <div class="editor-label">
                <%: Html.CheckBoxFor(m => m.RememberMe) %>
                <%: Html.LabelFor(m => m.RememberMe) %>
            </div>

            <p>
                <input type="submit" value="Log On" />
            </p>
        </fieldset>
    </div>
<% } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:03:57.513

你在说这些吗：

```
<%: Html.TextBoxFor(m => m.UserName) %>
<%: Html.ValidationMessageFor(m => m.UserName) %> 
```

这些被称为 Html 助手。它们在 asp.net mvc 中用于生成与 mvc 模型绑定器配合使用的 html。如果你想用纯 html 替换它们，你总是可以查看源代码，查看渲染的 html 是什么并将其粘贴到它的位置，尽管我个人不明白这一点。这不会有什么好处。

但这就是上面两行呈现的内容：

```
<input data-val="true" data-val-required="The User name field is required." id="UserName" name="UserName" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="UserName" data-valmsg-replace="true"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:58:46.763

看看我是否理解，如果当你说标准控件时，你的意思是 ASP.NET 服务器端控件，我的意思是至少不使用 MVC，原因是因为就像混合苹果和香蕉一样，你必须使用 WebForms 或MVC，如果您选择 MVC，则必须将逻辑放在控制器中的特定操作上页面添加服务器端控件并将逻辑放在按钮的单击事件上，但是您不能混合 MVC 和 WebForms，这是没有意义的（我说这很好:)）它们是不同的范例。

# java - 如何缓存文件句柄？

> ID：14842457
> 
> 赞同：13
> 
> 时间：2013-02-12T21:47:34.330
> 
> 标签：java, caching, clojure

我有一个想要保持打开许多文件的应用程序：它定期收到一个客户端请求，说“向文件 X 添加一些数据”，并且该文件已经打开并且文件的标题部分已经解析是理想的，这样这篇写得很快。但是，保持打开这么多文件对操作系统来说并不是很好，如果我们的数据存储需求增长，这可能变得不可能。

所以我想要一个“给我这个文件句柄，如果它没有缓存就打开”功能，以及一些自动关闭没有被写入的文件的过程，比如五分钟。对于在短时间内写入的缓存文件句柄的特定情况，这可能就足够了，但这似乎是一个足够普遍的问题，应该有诸如“如果可能的话，从缓存中给我名为 X 的对象”和“我现在已经完成了对象 X，所以从现在起五分钟后让它有资格被驱逐”。

[core.cache](https://github.com/clojure/core.cache)看起来可能适合此目的，但是[文档](http://clojure.github.com/core.cache/)非常缺乏，并且 [源代码](https://github.com/clojure/core.cache/blob/master/src/main/clojure/clojure/core/cache.clj) 没有提供有关如何使用它的特别线索。它的 TTLCache 看起来很有前途，但不清楚如何使用它依赖于垃圾收集来驱逐项目，所以当我准备让资源过期时，我无法干净地关闭它。

当然，我可以自己动手，但是有很多棘手的地方，我确信我会得到一些微妙的错误，所以我希望有人能指出我的这个功能的实现。我的代码在 clojure 中，但是如果可以找到最好的实现，当然使用 java 库会非常好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T22:30:24.600

查看[Guava 的缓存实现](http://code.google.com/p/guava-libraries/wiki/CachesExplained)。

*   您可以为*“如果句柄被缓存，则返回它，否则打​​开，缓存并返回它”*语义的方法提供一个`Callable`（或一个`CacheLoader`）`get`
**   您可以配置定时驱逐，例如[expireAfterAccess](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html#expireAfterAccess%28long,%20java.util.concurrent.TimeUnit%29)*   您可以注册一个[RemovalListener](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/RemovalListener.html)以在删除时关闭句柄*

 *稍微修改链接的 Guava 页面中的代码示例，使用`CacheLoader`：

```
LoadingCache<Key, Handle> graphs = CacheBuilder.newBuilder()
   .maximumSize(100) // sensible value for open handles?
   .expireAfterAccess(5, TimeUnit.MINUTES)
   .removalListener(removalListener)
   .build(
       new CacheLoader<Key, Handle>() {
         public Handle load(Key key) throws AnyException {
           return openHandle(key);
         }
       });

RemovalListener<Key, Handle> removalListener = 
  new RemovalListener<Key, Handle>() {
    public void onRemoval(RemovalNotification<Key, Handle> removal) {
      Handle h = removal.getValue();
      h.close(); // tear down properly
    }
  }; 
```

*** 免责声明 ***我自己没有以这种方式使用过缓存，请确保您对此进行了明智的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:31:38.307

如果您不介意一些 java，请参阅[http://ehcache.org/](http://ehcache.org/)和[http://ehcache.org/apidocs/net/sf/ehcache/event/CacheEventListener.html](http://ehcache.org/apidocs/net/sf/ehcache/event/CacheEventListener.html)。*

# java - instanceof 是一个好习惯吗？

> ID：14842458
> 
> 赞同：6
> 
> 时间：2013-02-12T21:47:37.870
> 
> 标签：java, oop, enums

我有一个从基类扩展的对象列表。现在我只想对列表中的一个类实例应用特定操作。

那里有`instanceof`一个好的做法吗？还是我应该通过例如自定义来区分对象`enum`？

```
abstract class Base;
class Foo extends Base;
class Bar extends Base;

List<Base> bases;

for (Base base : bases) {
  if (base instanceof Bar.class) {
     //execute my custom operation on the base object
     doSomething((Bar) base);
  }
} 
```

如果这种方法一般来说不是那么好，我怎么能做得更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:06:30.613

似乎没有任何理由使用这里的实例。让基类默认行为不做任何事情并在需要时在扩展类中覆盖它可能是有意义的。这样，您仅在需要时才覆盖它（我 on.y 将其保留为抽象类，以跟进此示例不需要的问题）。例如：

```
abstract class Base{
    public void doSomething(){}
}

public class B0 extends Base{
    @Override
    public void doSomething(){//actually do something}
} 

public class B1 extends Base{} 
```

使用它的一个例子可能是这样的：

```
public class SomeOtherClass{
    public void something(List<Base> bases){
         for(Base base:bases)
             base.doSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:50:00.987

```
abstract class Base;//abstract function doSomething()
class Foo extends Base;//implements doSomething()
class Bar extends Base;//dito

List<Base> bases;

for (Base base : bases) {
     base.doSomething();
} 
```

回答您的问题：使用 instanceof 不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:10:21.320

实例在这里不是一个好习惯。

正确的解决方案将取决于该`doSomething`方法内部到底发生了什么。如果你按照自己的方式去做，那么除了其他事情之外，你还违反了里[氏替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。我假设您首先因为某些原因决定需要这些层次结构，并且我还假设子类型具有比仅 doSomething 方法更多的行为。在这种情况下，您可以执行的操作如下所示。基本上只有`doSomething`真正应该做的类型和其他类型做类似`no operation`. 这样您就可以使用这些对象，而无需知道它们到底是什么类型。

您还应该问自己是否真的需要基类作为抽象类。也许您只需要一个界面。可能有更好的方法，但根据我所拥有的信息和我所假设的，这似乎没问题。

```
public abstract class Base
{
    public abstract void doSomething();

    public void someOtherMethod()
    {
        // which does stuff
    }
}

public class SubTypeWhichCanDoSomething extends Base
{
    @Override
    public void doSomething()
    {
        // actually implement method and DO something
    }
}

public class DoesNothing extends Base
{
    @Override
    public void doSomething()
    {
        // does nothing
        return;
    }
}

// then your code looks like these
for(Base base : bases)
{
    base.doSomething();
} 
```

# visual-studio-2010 - MSBUILD 在什么环境下运行？

> ID：14842462
> 
> 赞同：1
> 
> 时间：2013-02-12T21:47:50.773
> 
> 标签：visual-studio-2010, msbuild, cruisecontrol.net, pre-build-event

当我们通过 MSBuild 运行构建时，MSBuild 在什么上下文中运行？

我问的原因是因为我有调用命令行程序（ajax 缩小）的预构建事件，如果项目是通过 VS2010（在同一台机器上）构建的，它可以完美运行，但是当我们的构建系统（CCNet ) 正在构建它。我得到的错误是 9009，这意味着它找不到文件。命令行程序为其位置设置了一个环境路径（环境路径是通过 setx 设置的，也许它只是为当前用户设置的？），所以除了 CCNet 调用 MSBuild 之外，只调用它的名称在所有情况下都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:06:32.090

`MSBuild`就像任何其他开发工具一样，它在启动它的任何用户上下文下运行。

当您`msbuild`通过 Visual Studio 运行时，它会像您一样运行，因为您的登录上下文运行 Visual Studio，而 Visual Studio 又运行构建。

如果您通过某个构建服务运行它，答案将取决于该构建服务的运行方式。例如，TFS Build 以您为 TFS Build 服务的登录凭据配置的任何用户身份启动 MSBuild。如果您已将 CC.NET 配置为作为服务运行，那么您还必须指定它作为哪个用户运行。这也是 MSBuild 的运行方式。

如果您需要为构建设置特定的环境，您有几个选择。最简单的方法，虽然是一种“巨锤”方法，但在构建机器上为所有用户全局配置环境。其他选项包括在构建中运行某种预配置步骤，或编写启动批处理文件以在设置环境后手动启动服务。

# c++ - 提升条件不适用于具有两个生产者和一个消费者的线程安全队列

> ID：14842467
> 
> 赞同：4
> 
> 时间：2013-02-12T21:48:07.860
> 
> 标签：c++, boost, concurrency, queue

我有两个线程添加到“线程安全”队列中。但是，当第二个线程尝试“推送”内容时。不通知消费者内容可用。队列继续增长，但 notify_one() 从不通知消费方法中的条件。为什么是这样？

```
#ifndef CONCURRENT_QUEUE_H
#define CONCURRENT_QUEUE_H

#include <queue>
#include <boost/thread.hpp>

template<typename Data>
class concurrent_queue {
private:
    std::queue<Data> the_queue;
    mutable boost::mutex the_mutex;
    boost::condition_variable the_condition_variable;
public:
    void push(Data const& data) {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.push(data);
        lock.unlock();
        the_condition_variable.notify_one();
    }

    void wait_and_pop(Data& popped_value) {
        boost::mutex::scoped_lock lock(the_mutex);
        while(the_queue.empty()) {
            the_condition_variable.wait(lock);
        }

        popped_value=the_queue.front();
        the_queue.pop();
    }
};
#endif 
```

* * *

这段代码在 Fedora 14 中使用 boost 1.51.0 有效，但在 windows 7 中的 boost 1.50.0 中无效。

```
INCLUDEPATH += \
    . \
    /home/mehoggan/Devel/x86-fps/boost_1_50_0/include

LDFLAGS += -Wl,-rpath=/home/mehoggan/Devel/x86-fps/boost_1_50_0/lib

LIBS += \
    -L/home/mehoggan/Devel/x86-fps/boost_1_50_0/lib \
    -lboost_system \
    -lboost_thread \
    -lz

#ifndef CONCURRENT_QUEUE_H
#define CONCURRENT_QUEUE_H

#include <queue>
#include <boost/thread.hpp> // Using boost 1.50.0

template<typename Data>
class concurrent_queue {
private:
    std::queue<Data> the_queue;
    mutable boost::mutex the_mutex;
    boost::condition_variable the_condition_variable;
public:
    void push(Data const& data) {
        boost::mutex::scoped_lock lock(the_mutex);
        the_queue.push(data);
        lock.unlock();
        the_condition_variable.notify_all();
    }

    void wait_and_pop(Data& popped_value) {
        boost::mutex::scoped_lock lock(the_mutex);
        while(the_queue.empty()) {
            the_condition_variable.wait(lock);
        }

        popped_value=the_queue.front();
        the_queue.pop();
    }
};
#endif

concurrent_queue<int> the_queue;

void thread1func() {
    do {
        the_queue.push(1);
    } while (true);
}

void thread2func() {
    do {
        the_queue.push(2);
    } while (true);
}

void thread3func() {
    do {
        int read;
        the_queue.wait_and_pop(read);

        std::cout << "I read from thread " << read << std::endl;
    } while (true);
}

int main(int argc, char *argv[]) {
    boost::thread thread1 = boost::thread(thread1func);
    boost::thread thread2 = boost::thread(thread2func);
    boost::thread thread3 = boost::thread(thread3func);

    thread1.join();
    thread2.join();
    thread3.join();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:34:56.477

您的 Makefile 似乎没有使用 -pthread/-mthreads。通常，如果您不要求编译器生成多线程代码，则根本不要期望您的代码可以工作。

# cleartool - ClearTool windows 与 unix 的行为不同

> ID：14842469
> 
> 赞同：1
> 
> 时间：2013-02-12T21:48:13.303
> 
> 标签：cleartool

几年前，我在 unix 环境中使用了 ClearCase/ClearTool。
现在我在 Windows 环境中。

以下 unix`cleartool`命令将同时显示 my_branch 上每个单元的版本树。
例如，如果我在 my_branch 上有 5 个单元，则会同时显示 5 个版本树：

```
find . -version 'version (.../my_branch/LATEST)' -exec 'cleartool lsvtree -g $CLEARCASE_PN' 
```

我正在尝试在 Windows 中执行相同的操作，但是以下命令显示单个版本树。关闭版本树后，将显示下一个版本树：

```
find . -version 'version (.../my_branch/LATEST)' -exec 'cleartool lsvtree -g %CLEARCASE_PN%' 
```

如何在 Windows 中一次显示所有版本树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:01:24.150

[IBM添加示例页面](http://www-01.ibm.com/support/docview.wss?uid=swg21124425)建议（例如用于查找带有标签的版本）：

```
cleartool find . -type f -exec "cleartool lsvtree -a %CLEARCASE_PN%" | findstr "(" 
```

唯一的区别似乎是双引号，但它确实过滤了找到的每个版本。

保护元件销售：

```
cleartool find . -all -name *.bat -print -exec "cleartool protect -chmod u+x -file ""%CLEARCASE_PN%""" 
```

但是，这会触发每个结果的命令，这可能不是您想要的。

* * *

如果这仍然不起作用，另一种方法是使用 DOS`for`命令：

```
for /f %a in ('cleartool find . -version 'version (.../my_branch/LATEST)'') do cleartool lsvtree -g %a 
```

同样，我怀疑这些命令会按顺序重复。

* * *

在 Windows 上实现这一目标的唯一方法是：

*   将查找结果放在文本中，确保这些版本显示在一行中，
*   然后使用该文件的内容作为 Windows 的参数`cleartool lsvtree -g`
    （因为一个`lsvtree`命令可以接受*多个* `pname`），然后查看是否一次显示多个图形版本树。

# javascript - 不同长度的多个数组上的Javascript“JOIN”

> ID：14842470
> 
> 赞同：2
> 
> 时间：2013-02-12T21:48:13.983
> 
> 标签：javascript, join

我想要做的是获取一组不同的日期：值对，根据日期将它们连接在一起，如果日期不匹配，则用 null 填充缺失值。

像这样作为输入：

```
{"series1":[{'date1':4},{'date2':2},{'date3':6}]}
{"series2":[{'date1':5},{'date2':3},{'date3':4},{'date4':6}]}
{"series3":[{'date2':1},{'date4':9}]} 
```

要得到：

```
{"output":[{'date1':[4,5,]},{'date2':[2,3,1]},{'date3':[6,4,]},{'date4':[,6,9]}]} 
```

或者换个角度看，我希望能够像这样组织数据：

![数据的表格格式](../Images/977c42cf00c6641c6d366b42597736d2.png)

不管我会有多少系列，也不管差距在哪里。

我发现了这个问题：[SQL style JOIN on JSON data](https://stackoverflow.com/questions/7251163/)，但我不确定如何将该解决方案扩展到我需要的解决方案。如果必须这样做，我可以添加一些额外的逻辑，然后运行它 n-1 次，但确实感觉为此目的会存在更简单和优雅的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:25:32.293

如果你有这样的日期：

```
var t = {
    "series1":[{'date1':4},{'date2':2},{'date3':6}],
    "series2":[{'date1':5},{'date2':3}, {'date3':4},{'date4':6}],
    "series3":[{'date2':1},{'date4':9}]
} 
```

那么这应该工作：

```
var output = {};

function getKeys (obj) {
    var keys = [];
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            keys.push(key);
        }
    }
    return keys;
}

getKeys(t).forEach(function (val) {
    t[val].forEach(function (ser) {
        var date = getKeys(ser)[0];
        if (!output.hasOwnProperty(date)) {
            output[date] = [];
        }
        output[date].push(ser[date]);
    });
});

console.log(output); 
```

你会以这种格式得到它

```
Object {date1: Array[2], date2: Array[3], date3: Array[2], date4: Array[2]}
    date1: Array[2]
    date2: Array[3]
    date3: Array[2]
    date4: Array[2] 
```

如果您想要这种格式的原始日期

```
var original = [
    {"series1":[{'date1':4},{'date2':2},{'date3':6}]},
    {"series2":[{'date1':5},{'date2':3},{'date3':4},{'date4':6}]},
    {"series3":[{'date2':1},{'date4':9}]}
]; 
```

然后在`getKeys`函数后面加上这个

```
var t = {},
    output = {};

original.forEach(function (obj) {
    var prop = getKeys(obj)[0];
    if (! t.hasOwnProperty(prop) ) {
        t[prop] = {}
    }
    t[prop] = obj[prop];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:31:13.567

这是解决此问题的一种方法。遍历您的系列，并为每个唯一日期在对象中进行引用。然后在遇到它时附加到该引用。

js：

```
var obj = {'series1':[{'date1':4},{'date2':2},{'date3':6}],
'series2':[{'date1':5},{'date2':3},{'date3':4},{'date4':6}],
'series3':[{'date2':1},{'date4':9}]};
console.log(obj);
var output = {};
for(var series in obj ){
    var dateObjects = obj[series];
    for( var dateObj in dateObjects ){
        var dates = dateObjects[dateObj];
        for( var date in dates ){
         if( typeof output[date] == "undefined" ){
          output[date] = [];
         }
         output[date].push(dates[date]);
        }
    }
}
console.log(output); 
```

演示：http: [//jsfiddle.net/Z4ejj/](http://jsfiddle.net/Z4ejj/)

# batch-file - 在嵌套 if 块中具有包含括号的变量的批处理文件

> ID：14842477
> 
> 赞同：0
> 
> 时间：2013-02-12T21:48:29.260
> 
> 标签：batch-file, cmd

我有一个使用多行 IF 块的 .cmd 文件（Windows XP），如下所示：

```
IF DEFINED SUMM (
    echo  %SUMM% >> %OutFile%
    echo  ---- >> %OutFile%
) ELSE (
    echo  No summary >> %OutFile%
) 
```

如果环境变量 %SUMM% 包含右括号，然后是文本，则会出现问题。例如：

```
SET SUMM=(Hello world) Here's some more text. 
```

然后我假设 SUMM 中的 ')' 被视为 IF 命令块中的右括号并生成错误：

**这是在这个时候出乎意料的。**

有没有办法解决？如何确保 ) 被视为字符串的一部分，而不是命令块的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:22:39.313

除非您可以延迟 SUMN 的扩展，否则它将评估 SUMN 的内容。所以我不认为 if defined 的语法会允许你想要什么。你最好的选择可能是

```
if not "%SUMN%"=="" 
```

...如果您知道 %SUMN% 不会包含引号。如果可以，则将百分比更改为感叹号并设置local enabledelayedexpansion。

# python - 无法让 OpenCV 在 Mac 上使用 Python

> ID：14842480
> 
> 赞同：2
> 
> 时间：2013-02-12T21:48:43.210
> 
> 标签：python, opencv, cmake, osx-snow-leopard, macports

我无法让 OpenCV 在我的 Mac 上使用 Python。

我尝试使用此处找到的方法使用 MacPorts 和 Cmake（我从 MacPorts 安装）安装它：http: [//opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)。我还必须下载 Xcode 才能使 MacPorts 工作。

我跑了`sudo port -v install opencv +python27`，它似乎工作正常。但是，当我尝试使用 Python 在 Python 中导入 OpenCV 时`import cv`，找不到该模块。

如果这些信息有帮助，我有 OSX 10.6.8 Snow Leopard、python 2.7.3，并且正在尝试安装 OpenCV 2.4.3。我不是一个很有经验的程序员，所以我的故障排除尝试没有找到解决方案。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:47:48.867

我还没有尝试过 MacPorts 安装，但你可能想试试这个：

```
import cv2
from cv2.cv import * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T17:24:16.400

我遇到了同样的问题，似乎没有`numpy`预先安装 OpenCV Python 绑定就无法安装；您可以使用以下命令：

```
sudo port uninstall opencv
sudo port install py27-numpy
sudo port install opencv +python27 
```

正如这个问题：[How to install Python 2.7 bindings for OpenCV using MacPorts](https://stackoverflow.com/questions/8410443/how-to-install-python-2-7-bindings-for-opencv-using-macports)

# ruby-on-rails - 获得属于用户拥有的“项目”的“门票”

> ID：14842482
> 
> 赞同：0
> 
> 时间：2013-02-12T21:48:55.257
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

在我正在开发的项目管理应用程序中，我目前正在开发用于管理工单的页面，我希望该页面应包含以下内容：

```
- The tickets that the user has created
- The tickets that belongs to projects that the user has created 
```

棘手的部分是在控制器中使用正确的代码，这是我需要帮助的地方。'@users_tickets' 工作正常，'@owned_projects' 也一样。但是，创建一个包含属于用户拥有的项目的票的数组的最后一件事是我需要帮助我的东西（是的，我知道我对每个循环的糟糕尝试是完全错误的方式去这里）。

我怎样才能达到我想要的？

**门票控制器：**

```
1\.    def manage
2\.      @users_tickets = Ticket.where(:user_id => current_user.id)
3\.      @owned_projects = Project.where(:user_id => current_user)
4.
5\.      @owned_projects.each do |project|
6\.          @tickets_for_owned_projects = Ticket.where(:project_id => project.id)
7\.      end
8\.    end 
```

### 表：

**门票表：**

```
project_id
ticket_status_id
user_id
title
description
start_date
end_date 
```

**项目表：**

```
user_id
title
description
start_date
end_date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:56:02.463

如果您使用的是`has_many`关联，那么它应该很简单

```
class User < ActiveRecord::Base
  has_many :projects
  has_many :tickets
  has_many :project_tickets, through: :projects, class_name: 'Ticket', source: :tickets
  #...
end

class Project < ActiveRecord::Base
  has_many :tickets
  #...
end

# in tickets controller
def manage
  @tickets = current_user.tickets
  @tickets_for_owned_projects = current_user.project_tickets
end 
```

**UPD**：上面的方法应该有效。我现在真的睡着了，无法定义这里出了什么问题。如果有人调查它，我将不胜感激。

不过，这是另一种方式。

```
class User < ActiveRecord::Base
  has_many :projects
  has_many :tickets  

  def project_tickets
    result = []  
    self.projects.each do |project|
      result << project.tickets
    end
    result.flatten
  end
  #...
end 
```

# php - PHP文件名编码转换问题

> ID：14842484
> 
> 赞同：3
> 
> 时间：2013-02-12T21:49:11.923
> 
> 标签：php, bash

我正在尝试使用 PHP 批量重命名文件夹中的文件。尽管我在重音字符方面遇到问题，但它大部分都在工作。

带有重音字符的文件名示例是`ÅRE_GRÖN.JPG`.

我想将该文件重命名为`ARE_GRON.JPG`.

如果我这样读取文件：

```
<?php
$path = __DIR__;
$dir_handle = opendir($path);

while ($file = readdir($dir_handle)) {
    echo $file . "\n";
}

closedir($dir_handle); 
```

...页面显示`AÌŠRE_GROÌˆN.JPG`。

如果我添加`header('Content-Type: text/html; charset=UTF-8');`到脚本的开头，它会显示正确的文件名，但该`rename()`函数似乎没有任何效果。

这是我尝试过的：

```
while ($file = readdir($dir_handle)) {
    rename($file, str_replace('OÌˆ', 'O', $file)); # No effect
    rename($file, str_replace('Ö', 'O', $file)); # No effect
} 
```

我哪里错了？

* * *

如果您认为我在工作中使用了错误的工具，请务必说出来。如果有人知道如何使用 Bash 脚本实现这一点，请告诉我。我没有 Bash 排骨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:36:18.533

我想出了怎么做。

我首先`urlencode()`在文件名上运行。这将转换字符串：

```
MÖRKGRÅ.JPG 
```

对 URL 友好：

```
MO%CC%88RKGRA%CC%8A.JPG 
```

然后我`str_replace()`在 URL 编码的字符串上运行，在数组中提供针头和干草堆。我只需要几个瑞典语字符，所以我的解决方案如下所示：

```
<?php

header('Content-Type: text/html; charset=UTF-8');

$path = __DIR__;

$dir_handle = opendir($path);

while ($file = readdir($dir_handle)) {
    $search = array('A%CC%8A', 'A%CC%88', 'O%CC%88');
    $replace = array('A', 'A', 'O');
    rename($file, str_replace($search, $replace, urlencode($file)));
}

closedir($dir_handle); 
```

任务完成 ：）

* * *

我开始意识到这比我预期的要多才多艺。运行另一个脚本，`url_encode()`给了我一些稍微不同的输出，但很容易进行相应的更改。

```
$search = array('%26Aring%3B', '%26Auml%3B', '%26Ouml%3B', '+');
$replace = array('A', 'A', 'O', '_'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:18:15.930

如果要替换的字符数量有限，可以使用

```
for f in *; do mv "$f" "${f//Ö/O/}" 2> /dev/null; done 
```

在 GNU 上，您可以更普遍地使用

```
expr=""
for char in {A..Z}
do 
    expr+="s/[[=$char=]]/$char/g; "; 
done; 

for f in *; do 
    mv "$f" "$(sed -e "$expr" <<< "$f")" 2> /dev/null; 
done 
```

用 ascii A 替换所有类似 A 的重音字符，用于字母表中的每个字符，但不保证 OS X sed。请注意，这具有将所有文件名大写的副作用。

# sql-server - 如果值几乎相同，如何按 DateTime 对行进行分组？

> ID：14842488
> 
> 赞同：6
> 
> 时间：2013-02-12T21:49:27.060
> 
> 标签：sql-server, sql-server-express

如果字段和其他行中的其他字段之间的不同时间几乎相同，我如何对行进行分组？

例如：

```
GUID - No    - sDateTime            - eDateTime           - Name  
------------------------------------------------------------------    
0000 - 01    - 2013-02-02 08:00:00  - 2013-02-02 08:40:00 - A 
0000 - 02    - 2013-02-02 08:45:00  - 2013-02-02 09:45:00 - A 
0000 - 03    - 2013-02-02 11:30:00  - 2013-02-02 12:00:00 - A 
0000 - 04    - 2013-02-02 09:55:00  - 2013-02-02 11:00:00 - A   
0000 - 05    - 2013-02-02 11:05:00  - 2013-02-02 12:30:00 - B 
```

如果不同的时间不超过 10 分钟，我怎么`sDateTime`能从另一行获得？`eDateTime`

```
GUID - No      - SDateTime            - EDateTime (From other row) - Name  
----------------------------------------------------------------------------  
0000 -01,02,04 - 2013-02-02 08:00:00  - **2013-02-02 11:00:00**    - A 
0000 - 03      - 2013-02-02 11:30:00  - 2013-02-02 12:00:00        - A
0000 - 05      - 2013-02-02 11:05:00  - 2013-02-02 12:30:00        - B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:18:24.547

这里没有游标，但这仍然是使用递归 CTE 对行进行循环以确定哪些行应该组合在一起。临时表`#T`用于保存`ID`将行相互连接的表。它可以在没有临时表的情况下完成，但出于性能原因，最好使用临时表而不是使用另一个 CTE 作为递归 CTE 的源。

在最后的查询中，我使用`for xml path`技巧来连接来自`No`. 这意味着`C`第二次使用 CTE，因此将执行两次。您可能还想将该 CTE 转换为临时表以避免这种情况。

[SQL小提琴](http://sqlfiddle.com/#!3/60c03/3)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  GUID varchar(4),
  No varchar(2),
  sDateTime datetime,
  eDateTime datetime,
  Name varchar(1)
);

insert into YourTable values
('0000', '01', '2013-02-02 08:00:00', '2013-02-02 08:40:00', 'A'),
('0000', '02', '2013-02-02 08:45:00', '2013-02-02 09:45:00', 'A'),
('0000', '03', '2013-02-02 11:30:00', '2013-02-02 12:00:00', 'A'),
('0000', '04', '2013-02-02 09:55:00', '2013-02-02 11:00:00', 'A'),
('0000', '05', '2013-02-02 11:05:00', '2013-02-02 12:30:00', 'B'); 
```

**查询 1**：

```
create table #T
(
  ID int,
  GUID varchar(4),
  No varchar(2),
  sDateTime datetime,
  eDateTime datetime,
  Name varchar(1),
  primary key(ID, GUID, Name)
);

insert into #T(ID, GUID, No, sDateTime, eDateTime, Name)
select row_number() over(partition by GUID, Name order by sDateTime),
       GUID, No, sDateTime, eDateTime, Name
from YourTable;

with C as
(
  select T.ID, T.GUID, T.No, T.sDateTime, T.eDateTime, T.Name, 1 as Grp
  from #T as T
  where T.ID = 1
  union all
  select T.ID, T.GUID, T.No, T.sDateTime, T.eDateTime, T.Name, 
         C.Grp + case when datediff(minute, C.eDateTime, T.sDateTime) > 10 
                   then 1 
                   else 0 
                 end
  from #T as T
    inner join C 
      on T.ID = C.ID + 1 and
         T.Name = C.Name and
         T.GUID = C.GUID
)
select C.GUID,
       (
       select ','+C2.No
       from C as C2
       where C.GUID = C2.GUID and
             C.Name = C2.Name and
             C.Grp = C2.Grp
       order by C2.No
       for xml path(''), type
       ).value('substring(text()[1], 2)', 'varchar(max)') as No,
       min(C.sDateTime) as sDateTime,
       max(C.eDateTime) as eDateTime,
       C.Name
from C
group by C.GUID, C.Name, C.Grp

drop table #T; 
```

**[结果](http://sqlfiddle.com/#!3/60c03/3/0)**：

```
| GUID |       NO |                       SDATETIME |                       EDATETIME | NAME |
----------------------------------------------------------------------------------------------
| 0000 | 01,02,04 | February, 02 2013 08:00:00+0000 | February, 02 2013 11:00:00+0000 |    A |
| 0000 |       03 | February, 02 2013 11:30:00+0000 | February, 02 2013 12:00:00+0000 |    A |
| 0000 |       05 | February, 02 2013 11:05:00+0000 | February, 02 2013 12:30:00+0000 |    B | 
```

只是为了好玩，一个 SQL Server 2012 版本。

```
with CMinDiff as
(
  select GUID, No, sDateTime, eDateTime, Name, 
         case when datediff(minute, 
                            coalesce(lag(eDateTime) over(partition by GUID, Name 
                                                         order by eDateTime), 
                                     sDateTime), 
                            sDateTime) <= 10 
           then 0 
           else 1 
         end as MinDiff
  from YourTable
), CSumMinDiff as
(
  select GUID, No, sDateTime, eDateTime, Name, 
         sum(MinDiff) over(partition by GUID, Name 
                           order by sDateTime 
                           rows between unbounded preceding and current row) as Grp
  from CMinDiff
)
select C.GUID,
       (
       select ','+C2.No
       from CSumMinDiff as C2
       where C.GUID = C2.GUID and
             C.Name = C2.Name and
             C.Grp = C2.Grp
       order by C2.No
       for xml path(''), type
       ).value('substring(text()[1], 2)', 'varchar(max)') as No,
       min(C.sDateTime) as sDateTime,
       max(C.eDateTime) as eDateTime,
       C.Name
from CSumMinDiff as C
group by C.GUID, C.Name, C.Grp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:43:12.410

没有光标我无法执行此操作，也许更聪明的人可以提出不包括光标的解决方案，但这就是我所拥有的：

```
CREATE TABLE MyTable
(
    [GUID] VARCHAR(4),
    [No] VARCHAR(2),
    [sDateTime] DATETIME,
    [eDateTime] DATETIME,
    [Name] VARCHAR(1)
)

INSERT INTO [MyTable]
([GUID], [No], [sDateTime], [eDateTime], [Name])
VALUES
('0000', '01', '2013-02-02 08:00:00', '2013-02-02 08:40:00', 'A'),
('0000', '02', '2013-02-02 08:45:00', '2013-02-02 09:45:00', 'A'),
('0000', '03', '2013-02-02 11:30:00', '2013-02-02 12:00:00', 'A'),
('0000', '04', '2013-02-02 09:55:00', '2013-02-02 11:00:00', 'A'),
('0000', '05', '2013-02-02 11:05:00', '2013-02-02 12:30:00', 'B')

DECLARE @MyTable TABLE 
(
    [GUID] VARCHAR(4),
    [No] VARCHAR(100),
    [sDateTime] DATETIME,
    [eDateTime] VARCHAR(100),
    [Name] VARCHAR(1)
)

DECLARE [MyCursor] CURSOR FOR 
SELECT [GUID], [No], [sDateTime], [eDateTime], [Name]
FROM [MyTable]
ORDER BY [Name], [sDateTime];

DECLARE @GUID AS VARCHAR(4)
DECLARE @No AS VARCHAR(2)
DECLARE @sDateTime AS DATETIME
DECLARE @eDateTime AS DATETIME
DECLARE @Name AS VARCHAR(1)
DECLARE @OldName AS VARCHAR(1)
SET @OldName = ''
DECLARE @MergedNo AS VARCHAR(100)
SET @MergedNo = NULL
DECLARE @sOldDateTime AS DATETIME
DECLARE @eOldDateTime AS DATETIME

OPEN [MyCursor]
FETCH NEXT FROM [MyCursor] 
INTO @GUID, @No, @sDateTime, @eDateTime, @Name

WHILE @@FETCH_STATUS = 0
BEGIN
    IF (@OldName = '')
    BEGIN
        SET @sOldDateTime = @sDateTime
        SET @OldName = @Name
    END
    ELSE IF (@OldName <> @Name OR DATEDIFF(MINUTE, @eOldDateTime, @sDateTime) > 10)
    BEGIN
        INSERT INTO @MyTable
        ([GUID], [No], [sDateTime], [eDateTime], [Name])
        VALUES
        (@GUID, @MergedNo, @sOldDateTime, CASE WHEN @MergedNo LIKE '%,%' THEN '**' + CONVERT(VARCHAR(100), @eOldDateTime, 20) + '**' ELSE CONVERT(VARCHAR(100), @eOldDateTime, 20) END, @Name)

        SET @sOldDateTime = @sDateTime 
        SET @OldName = @Name
        SET @MergedNo = NULL
    END

    SET @MergedNo = COALESCE(@MergedNo + ', ', '') + @No
    SET @eOldDateTime = @eDateTime

    FETCH NEXT FROM [MyCursor] 
    INTO @GUID, @No, @sDateTime, @eDateTime, @Name
END 
CLOSE [MyCursor];
DEALLOCATE [MyCursor];

IF (@OldName <> '')
BEGIN
    INSERT INTO @MyTable
    ([GUID], [No], [sDateTime], [eDateTime], [Name])
    VALUES
    (@GUID, @MergedNo, @sOldDateTime, CASE WHEN @MergedNo LIKE '%,%' THEN '**' + CONVERT(VARCHAR(100), @eOldDateTime, 20) + '**' ELSE CONVERT(VARCHAR(100), @eOldDateTime, 20) END, @Name)
END

SELECT *
FROM @MyTable

DROP TABLE [MyTable] 
```

# c++ - C++ 中的新运算符

> ID：14842492
> 
> 赞同：3
> 
> 时间：2013-02-12T21:49:46.147
> 
> 标签：c++, new-operator

我正在阅读“Thinking in c++”的第 13 章。以下内容来自书中。

> 我的类型 *fp = new MyType(1, 2);
> 
> 在运行时，调用 malloc(sizeof(MyType)) 的等价物，**并使用结果地址作为 this 指针调用 MyType 的构造函数**，使用 (1, 2) 作为参数列表。到指针分配给 fp 的时候。

我被粗体字弄糊涂了。这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T21:51:53.950

这是一个非常松散的解释，但基本上是说结果是一个内存位置，就像`malloc`会返回一样，并且在该内存位置`this`使用带有该参数列表的构造函数构造一个对象（是指向当前对象的指针）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T21:53:38.927

当`new`运算符动态分配内存时，它会返回一个指向该内存的指针（类似于`malloc()`C 中的工作方式）。

在 C++ 中，每个非静态方法都可以访问它所调用的当前对象（否则世界各地的 C++ 程序员会遇到严重的麻烦）。这是方法的“隐式参数”，在构造函数中也是如此，可以通过关键字访问它`this`。

这句话的意思是，在创建对象之后，操作符会**在它刚刚分配的内存上调用构造函数。**因为这是唯一有意义的事情。:)

# mysql - 卸载 XAMPP 及其服务

> ID：14842494
> 
> 赞同：4
> 
> 时间：2013-02-12T21:49:53.100
> 
> 标签：mysql, service, xampp, uninstallation

我已经安装了 xampp，而端口 80 不是免费的。结果，其中一项服务无法运行。然后我尝试重新安装该程序，因为我认为它会替换我已经安装的任何服务。最后，当我第一次安装 XAMPP 时，我从以前下载的 MySQL 服务中使用了另一个端口。

我决定完全卸载 xampp 并从头开始重新安装。我已经成功卸载了 XAMPP，但是当我检查我的程序文件时，MySQL 服务仍然存在。我试图将它与其他文件一起删除，但它说我无法完成该操作，因为 MySQL 正在使用中。

如何删除 MySQL，以便我可以从头开始再次下载 XAMPP 而不会出现任何问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-10T18:15:40.093

要停止 Windows 服务，请转至开始、运行，然后键入 services.msc。然后，找到 Apache 和 MySQL 服务并停止它们。如果 XAMPP 控制面板正在运行，请关闭它。

要卸载 Apache 服务，请使用管理权限打开命令提示符窗口并执行以下命令：

> C:\xampp\apache\bin\httpd -k 卸载

要卸载 MySQL 服务，请执行以下命令：

> sc 删除 mysql

如果您使用 ZIP 存档来获取 XAMPP，您应该可以简单地删除 XAMPP 目录。如果您使用了安装程序，请从“控制面板”中的“程序”中卸载 XAMPP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T07:11:27.233

为了摆脱`xampp`(c:) 驱动器中的文件夹，请转到“开始”，`msconfig`在搜索栏中键入并输入。在启动程序中，禁用`mysql`服务和`Apache`程序。重新启动您的计算机。您现在可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:55:38.953

如果 MySQL 正在运行，您可以通过命令行界面访问它：

`Start -> Type "Cmd" in the Search box -> click on program`（Windows 7的）

然后在命令窗口中您可以使用 MySQL 命令。如果你想通过*图形 UI*管理 MySQL 数据库，你必须使用 XAMPP 附带的 phpMyAdmin。

要删除 MySQL，首先停止 windows 服务（如果它实际上作为服务运行）。您可以通过打开管理控制台查看正在运行的服务：

```
Start -> Type "View Local Services" in the search box -> Click on the program 
```

您还可以通过控制面板查看服务。在列表中找到 MySQL 服务并将其禁用，然后您应该可以删除该程序

如果 MySQL 没有作为服务运行但您仍然无法删除它，您可以通过命令行将其关闭：`mysql> quit`或通过在 Windows 任务管理器中终止任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T03:28:22.060

要删除计算机上的整个 Xammpp，您可能会收到一个错误，即并非所有文件都无法删除。要删除没有任何问题的文件，请转到任务管理器 -> 服务 -> 服务（具有管理员权限）。一旦你是他们去寻找 mysql 服务和 Apache 服务。停止这两个服务器，您可以删除 xampp 中的其他文件以删除 xampp。

# mysql - MySQL：将整行从一个复制到另一个并删除原始

> ID：14842496
> 
> 赞同：4
> 
> 时间：2013-02-12T21:50:10.027
> 
> 标签：mysql

有人可以解释（或指出正确的方向）我如何将多行从一个表移动到另一个表并根据设定的标准从原始表中删除该行吗？

我明白

```
INSERT INTO table2 SELECT * FROM table1 
```

将数据从一个表复制到另一个表，但我需要删除原始数据。原因是有人建议加快表的查询，我应该将所有冗余数据（已结束、过期、超过 3 个月的产品）从主表移动到另一个表。

一点背景知识，我有一个包含产品的表，有些产品已经过期，但这些产品仍然需要可访问。大约有 50,000 种产品已过期，2,000 种处于活动状态。有一个状态列（int 1 = active，2 = expired 等）来确定在前端显示什么。

我猜这篇文章是2个问题：

1.  有没有更好的方法可以在不删除过期商品的情况下加快商品表的查询速度？
2.  如果没有，如何将行从一个表移动到另一个表

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T21:52:26.423

> INSERT INTO table2 (column_name1, column_name2) SELECT column_name1, column_name2 FROM table 1 WHERE (where 子句)
> 
> DELETE FROM table1 WHERE（此处为 where 子句）

以上来源：[mysql在表之间移动行](https://stackoverflow.com/questions/5420156/mysql-move-row-between-tables)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T21:55:03.177

表中的 50,000 条记录确实不算多。如果您遇到性能问题，我会查看您的查询和索引以帮助提高性能。而且由于仍然需要访问那些过期的记录，因此维护多个表可能会更加困难。

但是，要按照您的要求将数据从一个表移动到另一个表，您只需要运行 2 个不同的语句。假设您要移动非活动产品：

```
INSERT INTO ProductsBackup SELECT * FROM Products WHERE Status <> 1
DELETE FROM Products WHERE WHERE Status <> 1 
```

如果您的列上有标识，则最好指定列名。但是假设 ProductId 是标识，那么请小心将它们移动到不同的表，因为您可能不想丢失原始 id，因为它可能指向其他表。

祝你好运。

# sql - Oracle SQL 查询 -> 在 2 个不同条件下计算 2 列

> ID：14842502
> 
> 赞同：3
> 
> 时间：2013-02-12T21:50:27.700
> 
> 标签：sql, oracle, count

我有一个看起来像这样的表：

> ```
> YEAR        RESOLUTION_DATE      CREATION_DATE  
> 
> 2013                             2013/02/18
> 2012                             2012/05/26
> 2009                             2009/11/11
> 2013          2013/12/08         2013/12/01
> 2000                             2000/17/31
> 2007                             2007/12/08
> 2012                             2012/12/08
> 2012          2012/03/23         2012/03/10 
> 2012                             2012/12/08
> 2007                             2007/01/17
> 2012          2012/01/17         2012/01/10
> 2009                             2009/02/14 
> ```

我正在尝试进行查询，该查询将输出以下内容：

> ```
> YEAR      COUNT_RESOLUTION_DATE      COUNT_CREATION_DATE  
> 2000               0                          1
> 2007               0                          2
> 2009               0                          2
> 2011               0                          0
> 2012               2                          5
> 2013               1                          2 
> ```

需要注意的是，我希望查询按 YEAR 计算 RESOLUTION_DATE 的数量，其中 RESOLUTION_DATE 不是 NULL，我想计算所有 CREATION_DATE 的数量。Oracle 数据库需要 SQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:53:32.783

试试这个：

```
SELECT 
COUNT(RESOLUTION_DATE) AS COUNT_RESOLUTION_DATE, 
COUNT(CREATION_DATE) AS COUNT_CREATION_DATE
FROM MyTable
GROUP BY YEAR
ORDER BY YEAR 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:03:04.027

如果您只想计算非 NULL 解决日期，这应该有效：

```
SELECT 
SUM(CASE WHEN RESOLUTION_DATE IS NULL THEN 0 ELSE 1 END) AS COUNT_RESOLUTION_DATE, 
COUNT(CREATION_DATE) AS COUNT_CREATION_DATE
FROM MyTable
GROUP BY YEAR
ORDER BY YEAR; 
```

# php - 使用 php 进行高效的 JSON 解析

> ID：14842503
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:50:28.833
> 
> 标签：php, json

我有一个使用 php 扫描大量 last.fm JSON 数据的网络应用程序。这是我目前用来解析它的 php。

```
<?php
$lfm = file_get_contents('http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=apikey&format=json');
$json = json_decode($lfm, true);
foreach ($json['artists']['artist'] as $track) {
    $artist = $track['name'];
    $image = $track['image'][2]['#text'];
    if ($artist&&$image){
        echo 'data';
    }
}
?> 
```

我目前使用的 php 可以完成这项工作，但有时似乎很慢。我想知道是否有更有效的方法来编写此代码以使其性能更好，或者它是否只是因为我正在通过如此大量的数据运行它而变得缓慢。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:52:18.050

这很可能**不是**由于您的代码，而是下载外部 JSON 需要一段时间。

你应该考虑缓存它。

## 找出问题所在

您可以使用以下命令检查问题所在`microtime()`：

```
<?php
    $timeStart = microtime(true);
    $lfm = file_get_contents('http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=apikey&format=json');
    $timeAfterGet = microtime(true);
    $json = json_decode($lfm, true);
    foreach ($json['artists']['artist'] as $track) {
        $artist = $track['name'];
        $image = $track['image'][2]['#text'];
        if ($artist&&$image){
            echo 'data';
        }
    }
    $timeEnd = microtime(true);
    echo "Time taken to get JSON: " . number_format($timeAfterGet - $timeStart, 4) . " seconds<br />";
    echo "Time taken to go through JSON: " . number_format($timeEnd - $timeAfterGet, 4) . " seconds<br />";
?> 
```

## 缓存

保留本地文件 - 检查文件上次修改的时间以及是否小于`MAX_CACHE_LIFETIME`（以秒为单位），然后使用缓存文件。

```
<?php
    define("MAX_CACHE_LIFETIME", 60 * 60); //1 hour

    $localJSONCache = "audioscrobbler.json.cache";

    $lfm = null;
    if (file_exists($localJSONCache)) {
        if (time() - filemtime($localJSONCache) < MAX_CACHE_LIFETIME) {
            $lfm = file_get_contents($localJSONCache);
        }
    }
    if (empty($lfm)) {
        $lfm = file_get_contents('http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=apikey&format=json');
        file_put_contents($localJSONCache, $lfm);
    }
    $json = json_decode($lfm, true);
    foreach ($json['artists']['artist'] as $track) {
        $artist = $track['name'];
        $image = $track['image'][2]['#text'];
        if ($artist&&$image){
            echo 'data';
        }
    }
?> 
```

# r - ggplot2 窗口中未显示某些数据

> ID：14842504
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:50:30.433
> 
> 标签：r, ggplot2

```
head(x)
    Region  Type       Date count
1 Americas Point 2011-10-26     1
2 Americas Point 2011-10-27     2
3 Americas Point 2011-10-31     1
4 Americas Point 2011-11-01     1
5 Americas Point 2011-12-05     1
6 Americas Point 2011-12-07     1

dput(x)
structure(list(Region = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = "Americas", class = "factor"), Type = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "Point", class = "factor"), 
    Date = structure(c(15273, 15274, 15278, 15279, 15313, 15315, 
    15316, 15320, 15341, 15342, 15351, 15358, 15370, 15390, 15392, 
    15405, 15407, 15411, 15418, 15421, 15433, 15467, 15470, 15482, 
    15495, 15497, 15503, 15517, 15530, 15551, 15554, 15582, 15586, 
    15589, 15593, 15601, 15602, 15610, 15615, 15616, 15624, 15643, 
    15645, 15656, 15663, 15664, 15665, 15672, 15673, 15677, 15678, 
    15679, 15680, 15684, 15686, 15693, 15694, 15698, 15699, 15705, 
    15706, 15707, 15712, 15713, 15714, 15719, 15720, 15721, 15727, 
    15736, 15740, 15741, 15742, 15743), class = "Date"), count = c(1L, 
    2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L)), .Names = c("Region", 
"Type", "Date", "count"), row.names = c(NA, -74L), class = "data.frame") 
```

我正在尝试构建一个堆栈条形图，如下所示：

```
ggplot(x, aes(Date, count, group=Region)) + 
   geom_bar(aes(fill=Type, width=0.3),stat="identity", position="stack") + 
   scale_x_date(breaks = "1 month", 
                minor_breaks = "2 weeks", 
                labels=date_format("%b-%y")) +
   geom_smooth(method="lm", se=T, size=0.5, colour="yellow") +
   facet_wrap(~Region) 
```

默认情况下，我会看到一些缺失的点，但是当我拉伸绘图窗口时，会出现点。我真的需要图表中的所有点，否则看起来我错过了报告数据。任何建议我该如何解决这个问题，以便我看到图表上的所有数据点。我的窗口大小是 500 x 500。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:57:07.640

事实上，通过增加屏幕尺寸会出现更多的条形图。您无法在 R 控制台的小窗口中看到它们，因为条形的宽度太小。但是当你保存它时，可以在输出中看到这些条：

```
plot <- ggplot(x, aes(Date, count, group=Region)) + 
geom_bar(aes(fill=Type, width=0.3),stat="identity", position="stack") + 
scale_x_date(breaks = "1 month", 
            minor_breaks = "2 weeks") +
geom_smooth(method="lm", se=T, size=0.5, colour="yellow") +
facet_wrap(~Region)

ggsave("test.pdf",plot ) 
```

要查看 R 控制台中的所有点，请增加宽度，例如：

```
(plot <- ggplot(x, aes(Date, count, group=Region)) + 
geom_bar(aes(fill=Type, width=1),stat="identity", position="stack") + 
scale_x_date(breaks = "1 month", 
            minor_breaks = "2 weeks") +
geom_smooth(method="lm", se=T, size=0.5, colour="yellow") +
facet_wrap(~Region)) 
```

# r - stat_smooth 和 scale 变换的操作顺序

> ID：14842505
> 
> 赞同：4
> 
> 时间：2013-02-12T21:50:35.570
> 
> 标签：r, ggplot2

我正在绘制一些带有重叠线性拟合线的对数缩放数据，如下所示：

```
d <- data.frame(x=1:10, y=10^(1:10 + rnorm(10)))
ggplot(d, aes(x=x, y=y)) + geom_point() + 
  geom_smooth(method="lm", se=FALSE) +
  scale_y_log10() 
```

![在此处输入图像描述](../Images/d5cd9448692d824bd007dfd614bcd050.png)

*看起来*线性回归线是在转换后的数据上计算的，否则它将直接通过最后一点。真的吗？

我似乎记得这在`ggplot2`文本中已解决，但我现在找不到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T01:49:11.283

渲染绘图时`ggplot`，它按以下顺序进行：

1.  将变量映射到美学（即，对于每一层，找出哪个变量与哪个美学相关联等）
2.  刻面数据集（制作面板）
3.  变换尺度（`scale_`通常通过任何函数）
4.  计算美学（即计算`lm`拟合，在这种情况下——这是`stat_`函数的用武之地，通常通过`geom_`函数调用）
5.  火车规模（弄清楚整体地块尺寸应该是多少）
6.  地图比例（找出每一层应该适合整体情节的位置）
7.  渲染几何。

因此，缩放发生在模型拟合之前，因此是的，拟合是在转换后的数据上计算的。

# php - RewriteRule 到新 URL 并在内部重写到旧 URL

> ID：14842509
> 
> 赞同：1
> 
> 时间：2013-02-12T21:50:46.177
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我的目标是从这些路径重定向用户：

```
/foo/index.php
/foo/ 
```

至

```
/index 
```

并`/index`已从`/foo/index.php`.

这可能`.htaccess`吗？

到目前为止，我已经尝试过：

```
RewriteRule ^foo/(index\.php)?$ /index [R=301,QSA,L]
RewriteRule ^index$ /foo/index.php [QSA,L] 
```

但这会进入无限重定向循环。我认为`RewriteCond`为 URI 添加一个会有所帮助，但来自[文档](http://wiki.apache.org/httpd/RewriteCond)：

> **注意：**`RewriteRule`在模式匹配后正在处理条件。

所以在我的用例中显然`RewriteCond`不会有太大用处。

浏览[Rewrite Flags 文档](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriteflags)，该`S`标志似乎是我正在寻找的：

> 如果当前规则匹配，此标志强制重写引擎按顺序跳过下一个 num 规则。使用它来构建伪 if-then-else 结构：then-clause 的最后一条规则变为 skip=N，其中 N 是 else-clause 中的规则数。

所以我试过：

```
RewriteRule ^index$ /foo/index.php [QSA,L,S=1]
RewriteRule ^foo/(index\.php)?$ /index [R=301,QSA,L] 
```

虽然，因为我有`L`旗帜，`S`旗帜似乎有点多余。尽管如此，在我看来，逻辑似乎是正确的，尽管这仍然处于无限重定向循环中。

现在我正在使用 PHP 的解决方法。首先，Apache 在内部将新 URL 重写为旧 URL，然后在 PHP 中检查是否`$_SERVER['REQUEST_URI']`与脚本开头的新格式匹配，否则会导致 301 重定向到新 URL。

不过，我想知道这是否可以`.htaccess`单独使用？或者，如果有人可以解释我如何/为什么使用上面的重写规则获得无限循环，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:57:46.440

问题是规则在一个`.htaccess`文件中，正如[文档](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_l)所说，这个文件在每次重写循环后都会重新解析，让它可能适用`.htaccess`于不同目录中的 a 。因此，您的`L`旗帜都是徒劳的。

我环顾四周，如果你真的不能将重写规则放在主 apache 配置中，我可以提供以下内容：因为服务器变量`THE_REQUEST`在重写运行之间没有更新，所以可以得出“浏览器可见 URL”来自在那里并防止在这种情况下重写：

```
# external redirect to /index (unless browser already shows /index plus query params)
RewriteCond %{THE_REQUEST} !^\w+\ /index(\?.*)?\ HTTP/1..$
RewriteRule ^foo/(index\.php)?$ /index [R=301,QSA,L]

# internal redirect for /index
RewriteRule ^index$ /foo/index.php [QSA,L] 
```

我认为还有另一个变量保持不变，但现在我找不到它。也许是其他人？

# opencv - HOGDescriptor::computeGradient 使用 OpenCV

> ID：14842510
> 
> 赞同：-1
> 
> 时间：2013-02-12T21:50:48.220
> 
> 标签：opencv

我尝试使用 HOGDescriptor 计算梯度图。我的代码：

```
HOGDescriptor hog;
hog.compute(faceROI,ders,Size(32,32),Size(0,0),locs);
Mat grad;
Mat sec;
hog.computeGradient(frame_gray, grad, angleofs);

imshow("1", frame_gray);
imshow("2", grad); //here program fails: Unhandled exception at memory location
imshow("3", angleofs); //grad.data = "". Why?? 
```

我找不到使用 HOGDescriptor::computeGradient 的好例子。

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T09:20:49.957

要可视化 OpenCv 的 HOGDescriptor::Calculate(..)，使用[这个](http://www.juergenwiki.de/work/wiki/doku.php?id=public:hog_descriptor_computation_and_visualization)，太棒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T08:21:53.747

imshow（“2”，毕业）；失败，因为 imshow 期望 grad 图像是 1、3 或 4 通道图像，而它是 2 通道图像。

第一个通道包含 x 方向的梯度，而第二个通道包含 y 方向的梯度。您应该将通道拆分为两个图像以可视化它们：

```
Mat grad_channel[2];
split(grad, grad_channel);
imshow("grad_x", grad_channel[0]);
imshow("grad_y", grad_channel[1]); 
```

最好的

# c# - 使用单个值/变量构建字节数组 [4]

> ID：14842516
> 
> 赞同：2
> 
> 时间：2013-02-12T21:51:06.240
> 
> 标签：c#, .net

首先介绍一下我的目标的背景知识，然后我将向您展示我的代码以及我目前认为哪种方法是目前最好的方法。

我的目标：我有一个 XML 文件，其中存储了 5 个值，我想用这些值创建一个字节数组

我使用 Microsoft.PointOfService 在我的应用程序中硬编码了以下命令：

```
m_Printer.PrintNormal(PrinterStation.Receipt, System.Text.ASCIIEncoding.ASCII.GetString(new byte[] { 27, 112, 48, 55, 121 })) 
```

如您所见，字节数组是硬编码的。

此代码工作正常，但我所做的是创建一个 XML 文件，该文件将被读取以读取值（这些值用于触发通过 RJ11 电缆连接到 EPSON 打印机的现金抽屉），以便用户可以更改xml 而不必重新编译代码。

XML 如下：

```
<OpenCashDrawerCommand> 
    <Byte1 value="27"/> 
    <Byte2 value="112"/> 
    <Byte3 value="48"/> 
    <Byte4 value="55"/> 
    <Byte5 value="121"/> 
</OpenCashDrawerCommand> 
```

因此，您可以看到我从 C# 代码中获取硬编码值并将其读入代码中某处的 5 个变量。

然后我想使用这 5 个值创建一个字节数组并像这样传递新的字节数组：

```
m_Printer.PrintNormal(PrinterStation.Receipt, System.Text.ASCIIEncoding.ASCII.GetString(MYNEWBYTEARRAY); 
```

此链接包含我考虑使用的一种方法：[Converting a list of ints to a byte array](https://stackoverflow.com/questions/3097812/converting-a-list-of-ints-to-a-byte-array)

```
var bytes = integers.Select(i => BitConverter.GetBytes(i)).ToArray(); 
```

因此，如果我可以获取我的 xml 中的值（我目前已经在读入一个类）并构建一个字节数组，那么我就可以抓住那个字节数组（它可以是静态的，而且很可能是我的单身人士类）那么这将完成:)

有什么想法伙计和伙计？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:59:52.480

那么您需要从 XML 中提取值。我假设您可以使用 XLINQ：

```
XDocument doc = XDocument.Parse(xmlString);
XElement root = from e in doc.DocumentElement/*don't remember the exact name*/;
var byteElements = new [] { root.Element("Byte1"), root.Element("Byte2"), ... };
var bytes =
 byteElements
 .Select(elem => (byte)elem); //this "cast" is an implicit conversion operator
 .ToArray(); 
```

你去吧。如果我有一些小错误，你将能够修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:11:50.943

我会说废弃“ByteN”命名约定，只使用 XML 序列化来转换成/来自 xml：

```
[Serializable]
public class SomeClass
{
    // Serialize the list as an array with the form:
    //  <OpenDrawerCommand>
    //      <byte>...</byte>
    //      <byte>...</byte>
    //      <byte>...</byte>
    //  </OpenDrawerCommand>
    [System.Xml.Serialization.XmlArray("OpenDrawerCommand")]
    [System.Xml.Serialization.XmlArrayItemAttribute("byte")]
    public List<byte> CommandBytes {get; set;}
}

void Main()
{
    var cmd = new SomeClass() 
    { 
        CommandBytes = new List<byte> { 27, 112, 48, 55, 121 }
    };
    var originalBytes = cmd.CommandBytes;

    var sb = new StringBuilder();
    var ser = new System.Xml.Serialization.XmlSerializer(typeof(SomeClass));
    using(var sw = new StringWriter(sb))
    using(var xw = XmlWriter.Create(sw))
        ser.Serialize(xw, cmd);
    Console.WriteLine(sb.ToString());

    cmd = new SomeClass();
    Debug.Assert(cmd.CommandBytes == null);

    using(var sr = new StringReader(sb.ToString()))
    using(var xr = XmlReader.Create(sr))
        cmd = (SomeClass)ser.Deserialize(xr);
    Debug.Assert(cmd.CommandBytes.SequenceEqual(originalBytes));

    Console.WriteLine(string.Join(", ", cmd.CommandBytes));
} 
```

上面的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-16"?>
<SomeClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <OpenDrawerCommand>
        <byte>27</byte>
        <byte>112</byte>
        <byte>48</byte>
        <byte>55</byte>
        <byte>121</byte>
    </OpenDrawerCommand>
</SomeClass> 
```

# ruby-on-rails - Unicorn.rb、Heroku、Delayed_Job 配置

> ID：14842519
> 
> 赞同：3
> 
> 时间：2013-02-12T21:51:21.577
> 
> 标签：ruby-on-rails, heroku, delayed-job, unicorn

我在 Heroku 上为我的网站成功使用了 Unicorn 服务器和 Delayed_Job。但是我不确定它是否是最好的设置方式，我想了解更多关于如何查看工作进程等的信息。我的 config/unicorn.rb 文件粘贴在下面：

```
worker_processes 3
preload_app true
timeout 30

# setting the below code because of the preload_app true setting above:
# http://unicorn.bogomips.org/Unicorn/Configurator.html#preload_app-method

@delayed_job_pid = nil

before_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
    # start the delayed_job worker queue in Unicorn, use " -n 2 " to start 2 workers
    if Rails.env == "production"
      # @delayed_job_pid ||= spawn("RAILS_ENV=production ../script/delayed_job start")
      # @delayed_job_pid ||= spawn("RAILS_ENV=production #{Rails.root.join('script/delayed_job')} start")
      @delayed_job_pid ||= spawn("bundle exec rake jobs:work")
    elsif Rails.env == "development"
      @delayed_job_pid ||= spawn("script/delayed_job start")
      # @delayed_job_pid ||= spawn("rake jobs:work")      
    end

  end
end

after_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end
end 
```

*   delay_job 表示用于`RAILS_ENV=production script/delayed_job start`在生产模式下启动工作进程，但如果我使用此命令，我会在 Heroku 中收到“找不到文件”错误。所以，现在我正在`bundle exec rake jobs:work`生产中使用，这似乎有效，但这是正确的吗？
*   在此设置中实际运行了多少进程，是否可以更好地优化？我的猜测是有 1 个独角兽主进程、3 个 Web 工作者和 1 个延迟作业工作者，总共 5 个？当我在本地以开发模式运行时，我看到生成了 5 个 ruby​​ pid。也许最好只使用 2 个 Web 工作者，然后将 2 个工作者分配给 Delayed_job（我的流量很低）
*   所有这一切都在一个 Heroku dyno 中运行，所以我不知道如何检查 Unicorn 工人的状态，知道怎么做吗？

**注意，我已经注释掉了在生产中破坏站点的行，因为 Heroku 说它“找不到文件”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:36:44.310

你`config/unicorn.rb`不应该产生这样的 DJ 工作者。您应该`Procfile`像这样指定一个单独的工作进程：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
worker:  bundle exec rake jobs:work 
```

您可以使用`foreman`本地开发来启动 Unicorn 和 DJ。您的生成`config/unicorn.rb`文件会更简单：

```
worker_processes 3
preload_app true
timeout 30

# setting the below code because of the preload_app true setting above:
# http://unicorn.bogomips.org/Unicorn/Configurator.html#preload_app-method

before_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
  end
end

after_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end
end 
```

正如我在评论中提到的，你正在产生你永远不会收获的子进程，并且很可能会变成僵尸。即使您添加了代码来尝试解决这个问题，您仍然试图让单个 dynos 执行多个角色（Web 和后台工作人员），并且可能会在未来给您带来问题（内存错误等。 ）。

*   工头：[https ://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)
*   Heroku 上的 DJ：[https ://devcenter.heroku.com/articles/delayed-job](https://devcenter.heroku.com/articles/delayed-job)
*   产卵：[http ://www.ruby-doc.org/core-1.9.3/Process.html#method-c-spawn](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-spawn)

# objective-c - NSComboBox 文本不显示，除非编辑

> ID：14842521
> 
> 赞同：2
> 
> 时间：2013-02-12T21:51:26.177
> 
> 标签：objective-c, cocoa

我有一个类似于[这个问题的问题](https://stackoverflow.com/questions/5519512/nstextfield-placeholder-text-doesnt-show-unless-editing)。（实际上，我遇到了同样的问题，现在我试图通过不使用占位符字符串来解决它）

我有 3 个 NSComboBoxes。有时我在一个 ComboBox 中键入一些内容，当我将焦点切换到下一个 ComboBox 时，它会停止显示字符串值。字符串仍然存在，但没有显示：

![重点 NSComboBox](../Images/1f68be403b9b98d8f5d08aba29995e6d.png)

![不专心的 NSComboBox](../Images/27a0f24b78aceec4e94a9f3157d7096f.png)

NSComboBox 内容值绑定到 NSArrayController：

```
Controller Key: arrangedObjects
Model Key Path: @distinctUnionOfObjects.project.name 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:57:28.520

尝试实现主窗口的委托方法并从组合框中退出第一响应者

```
- (void)windowWillMiniaturize:(NSNotification *)notification
{
    NSWindow *window = [notification object];
    [window makeFirstResponder:window];
} 
```

出于某种原因，第一响应者的辞职帮助了我

# ruby - Google API for Blogger 3.0 错误

> ID：14842525
> 
> 赞同：2
> 
> 时间：2013-02-12T21:51:44.553
> 
> 标签：ruby, oauth, sinatra, blogger, google-api-client

我正在尝试在 Ruby 中运行示例代码，以使用 Google 的 Blogger 3.0 API 获取博客文章列表。这是代码：

```
require 'rubygems'
require 'google/api_client'
require 'sinatra'
require 'google/api_client'
require 'logger'

enable :sessions

def logger; settings.logger end

def api_client; settings.api_client; end

def blogger_api; settings.blogger; end

def user_credentials
  # Build a per-request oauth credential based on token stored in session
  # which allows us to use a shared API client.
  @authorization ||= (
    auth = api_client.authorization.dup
    auth.redirect_uri = to('/oauth2callback')
    auth.update_token!(session)
    auth
  )
end

configure do
  log_file = File.open('blogger.log', 'a+')
  log_file.sync = true
  logger = Logger.new(log_file)
  logger.level = Logger::DEBUG

  client = Google::APIClient.new
  client.authorization.client_id = 'XXXXXXXXXXXXX'
  client.authorization.client_secret = 'XXXXXXXXXXXXX'
  client.authorization.scope = 'https://www.googleapis.com/auth/blogger'

  blogger = client.discovered_api('blogger', 'v3')

  set :logger, logger
  set :api_client, client
  set :blogger, blogger
end

before do
  # Ensure user has authorized the app
  unless user_credentials.access_token || request.path_info =~ /^\/oauth2/
    redirect to('/oauth2authorize')
  end
end

after do
  # Serialize the access/refresh token to the session
  session[:access_token] = user_credentials.access_token
  session[:refresh_token] = user_credentials.refresh_token
  session[:expires_in] = user_credentials.expires_in
  session[:issued_at] = user_credentials.issued_at
end

get '/oauth2authorize' do
  # Request authorization
  redirect user_credentials.authorization_uri.to_s, 303
end

get '/oauth2callback' do
  # Exchange token
  user_credentials.code = params[:code] if params[:code]
  user_credentials.fetch_access_token!
  redirect to('/')
end

get '/' do
  # Fetch list of posts
  result = api_client.execute(:api_method => settings.blogger.posts.list, :parameters => {'blogId' => 'XXXXXXXXXXXXX'})
  [result.status, {'Content-Type' => 'application/json'}, result.data.to_json]
end 
```

当我连接到正在运行的本地应用程序（授权后）我可以看到这个“sinatra”错误：

```
#<NameError: undefined local variable or method `blogger' for #<Sinatra::Application:0x92ac2dc>> 
```

这对我来说有点模糊。任何想法？

# javascript - 添加日期到日期格式 yyyy-mm-dd

> ID：14842526
> 
> 赞同：6
> 
> 时间：2013-02-12T21:51:48.067
> 
> 标签：javascript, jquery, date

问题很简单，如何在 YYYY-MM-DD 格式的日期中添加天数？

例如，将以这种格式给出的日期递增：“2013-02-11”到“2013-02-12”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:41:36.290

```
date      = new Date('2013-02-11');
next_date = new Date(date.setDate(date.getDate() + 1)); 
```

这是一个演示[http://jsfiddle.net/MEptb/](http://jsfiddle.net/MEptb/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T07:56:19.147

希望下面的代码对你有帮助

```
function addDays(myDate,days) {
return new Date(myDate.getTime() + days*24*60*60*1000);
}

var myDate = new Date('2013-02-11');

var newDate = addDays(myDate,5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T22:22:59.223

像这样的东西：

```
 var date = new Date('2013-02-11');        
    /* Add nr of days*/
    date.setDate(date.getDate() + 1);

    alert(date.toString()); 
```

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-27T12:52:16.870

下面的函数是将天数添加到今天的日期它以 YYYY-MM-DD 格式返回递增的日期 @param noofDays - 指定要递增的天数。365，1年。

```
function addDaysToCurrentDate(noofDays){
date      = new Date();
next_date = new Date(date.setDate(date.getDate() + noofDays));
var IncrementedDate = next_date.toISOString().slice(0, 10);
console.log("Incremented Date " +IncrementedDate );
return IncrementedDate;
} 
```

# apache - 一个 Magento 安装，两个网站，在不同的虚拟主机上

> ID：14842527
> 
> 赞同：3
> 
> 时间：2013-02-12T21:51:49.427
> 
> 标签：apache, magento, vhosts

我有一个维护两个不同网站的客户端，每个网站都在 Apache 中设置为单独的虚拟主机。我在 domain1.com/store 的一个主机中安装并配置了一个 Magento 商店。他们的客户现在希望在 domain2.com/store 建立一个与 domain1 上的商店共享产品的商店。

我见过的在 Magento 中设置多个网站的所有说明都要求不同的网站位于同一主机上。不幸的是，这不是我们当前设置的选项。实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:11:42.747

所以我认为你应该首先考虑你的结构和你正在尝试什么。

**1.)** Magento 支持多商店解决方案。为此，您可以在一个实例中创建许多商店。**然后，您可以使用SET ENV**在您的 vhost 文件中设置 Magento 存储，或者直接在您的`index.php`文件中，如下所示：

```
switch($_SERVER['HTTP_HOST']) {
    case 'domain1.com':
        $_SERVER["MAGE_RUN_CODE"] = "domain2";
        $_SERVER["MAGE_RUN_TYPE"] = "store";
    break;
    default:
        $_SERVER["MAGE_RUN_CODE"] = "domain1";
        $_SERVER["MAGE_RUN_TYPE"] = "store";
    break;
} 
```

您必须更改Magento 知道系统应该调用哪个商店的**index.php文件（在您的 Magento 配置中创建商店）。**

**2.)**当您需要更多主机时然后制作一个数据库。安装包含所有站点的商店，然后将它们复制到新位置。在新位置中，您可以使用步骤 1 中的代码段设置商店。

然后，您可以使用一个数据库构建多个主机，但如果您想要一个管理和一个数据库。

当你构建第二个解决方案时，你应该考虑数据库服务器应该在同一个网络中。否则你会得到一个非常糟糕的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:42:17.300

您应该将**两个**Vhost都指向**相同**的magento 安装？

然后在该`backend/admin`部分添加一个单独的“商店”？Magento 完全是为了做到这一点而设计的：

[看这里](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)

您可以共享商店库存，或将其分开。您还可以共享主要`Template`文件——或将它们分开... 共享`Skin`文件——或将它们分开。将两个虚拟主机指向同一个安装目录，让 Magento 完成它设计的工作，而不必执行`Server Administration`按域分离两个安装的繁重任务，但具有相同的`Install`.

# ios - TableView 数据未使用 NSOperation 更新

> ID：14842535
> 
> 赞同：0
> 
> 时间：2013-02-12T21:52:18.580
> 
> 标签：ios, uitableview, uiviewcontroller, nsoperation

所以我不确定我是否正确设置了它。我有一个`SearchDisplayController`搜索栏。

```
UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 150, 44)];
    self.SearchEntry = searchBar;
    self.SearchEntry.tintColor = DARKGRAY_COLOR;
    self.SearchEntry.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
    self.SearchEntry.delegate = self;
    UISearchDisplayController *searchDisplayCtlr = [[UISearchDisplayController alloc] initWithSearchBar:_searchEntry contentsController:self];
    self.SearchController = searchDisplayCtlr; 
```

这些进入一个`UIToolbar`. 因为在数据库中查询某些值可能需要一段时间，所以我将代码取出并放在一个`NSOperation`子类中。最后，它通过委托回调 ViewController 以更新实际数据：

```
[self.searchOperationDelegate searchDidFinishWithResults:self.searchResults]; 
```

因此，当在我的搜索栏中进行实际输入时，我会这样做：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    if (_queue.operationCount > 0) {
        [_queue cancelAllOperations];
    }

    SearchOperation *search = [[SearchOperation alloc] initWithSearchText:searchText];
    search.searchOperationDelegate = self;
    [self.queue addOperation:search];
} 
```

我基本上取消了任何以前的搜索，只搜索`searchText`字符串中的当前内容。

然后在我的 ViewController 中的委托回调方法中

```
- (void)searchDidFinishWithResults:(NSArray *)results {
        NSLog(@"resultsList: %i", [results count]);
    [self performSelectorOnMainThread:@selector(setResultsList:) withObject:results waitUntilDone:YES];
//    [self.searchDisplayController.searchResultsTableView reloadData];
} 
```

我还有一个登录`cellForRowAtIndexPath`方法来检查我的 [结果计数] 中有多少项目。当我查看时，我基本上被`cellForRowAtIndexPath`调用了很多次（根据我们正在搜索的内容说 1000-3000），但是在我的`searchDidFinishWithResults:`方法中，我得到了 1 个项目。它总是`cellForRowAtIndexPath`被调用，然后是这个`searchDidFinishWithResults:`方法。所以在我更新模型后，表格不再更新，我不知道为什么。我以为我可以手动调用`reloadData`，但这给了我相同的结果。

所以 get 记录的一个更具体的例子是：

```
resultsList: 2909 (I type in one key, and only this gets logged)
tableView:cellForRowAtIndexPath:] 2909 (my second key in the search bar, this gets logged)
tableView:cellForRowAtIndexPath:] 2909
tableView:cellForRowAtIndexPath:] 2909
tableView:cellForRowAtIndexPath:] 2909
tableView:cellForRowAtIndexPath:] 2909
tableView:cellForRowAtIndexPath:] 2909
tableView:cellForRowAtIndexPath:] 2909
resultsList: 1370 (this is the last thing that gets logged when my 2nd key is pressed)
tableView:cellForRowAtIndexPath:] 1370 (this is the first thing that gets logged when my 3rd key is pressed)
tableView:cellForRowAtIndexPath:] 1370
tableView:cellForRowAtIndexPath:] 1370
tableView:cellForRowAtIndexPath:] 1370
tableView:cellForRowAtIndexPath:] 1370
tableView:cellForRowAtIndexPath:] 1370
tableView:cellForRowAtIndexPath:] 1370
resultsList: 1 (last thing that gets logged when my 3rd key is pressed) 
```

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:25:38.163

好的，我想通了。reloadData 确实有效。问题是我试图打电话

```
[self.searchDisplayController.searchResultsTableView reloadData]; 
```

代替

```
[self.SearchController.searchResultsTableView reloadData]; 
```

# sql - 通过 case join 执行 select over order

> ID：14842536
> 
> 赞同：0
> 
> 时间：2013-02-12T21:52:20.950
> 
> 标签：sql, sql-server

我已经为此苦苦挣扎了一段时间，在某些情况下，下面的 sql 需要超过 30 分钟才能在包含 100k 行`current`且大约 10行的表上执行`pending`。这是我已确定为罪魁祸首的更大连接语句的一部分。基本上，sql 的目的是对行的连接和`current`行的副本进行排序，`pending`以便所有待处理的行都位于顶部或底部。它是变革管理框架的一部分。有什么想法可以以始终如一的良好表现的方式完成吗？作为记录，在某些情况下，相同的 sql 在具有 10M 行和 100 条待处理更改的表上运行时间不到 10 秒。排序是在计算字段上完成的这一事实使问题更加复杂。数据库是 ms sql server 2008 R2。

更新：我正在添加其余的连接以表明这种疯狂是有原因的。

同样，这样做的唯一目的是获取当前记录和待处理记录的组合，以显示更改被批准后未来表的外观，排序以便更改显示在顶部或底部（hasPending 上的 ASC 或 DSC )，额外的 Current2 连接是添加一些额外的识别数据。

通常它会做它应该做的事情，相当不错的几秒钟的响应时间，当达到大约 1000 万条记录时为 10 秒，但是在少数情况下，一切都一直缓慢到爬行，响应时间高达 12-30 分钟。

```
WITH [ResultPage] AS 
SELECT 
    ROW_NUMBER() OVER 
    (ORDER BY 
        CASE WHEN [Current].[ID] IN 
            (SELECT [CID] 
             FROM [Pending] AS p
             INNER JOIN [Current] ON [Current].[ID] like p.[CID] 
             WHERE (p.[User] = 'admin'))
          THEN 1 
          ELSE 0 
       END ASC, 
       [Current].[ID] ASC) AS [RowID], 
    [Current].[ID], 
    CASE WHEN [Current].[ID] IN 
        (SELECT [CID] 
         FROM [Pending] AS p 
     INNER JOIN [Current]  ON [Current].[ID] like p.[CID] 
         WHERE (p.[User] = 'admin'))
       THEN 1 
       ELSE 0 
    END AS [HasPending] 
FROM [Current] 
INNER JOIN [Current2] AS [Table2] ON ([Current].[T2ID] = [Table2].[ID])
SELECT [ResultPage].[RowID], [ResultPage].[HasPending], [Current2].[ID] As [Current2^ID], [Tag].Name], 
etc... etc...
FROM [ResultPage] 
INNER JOIN [Current]  ON ([Current].[ID] = [ResultPage].[ID]) 
 INNER JOIN [Current2] ON ([Current].[T2ID] = [Current2].[ID]) 
 WHERE (([ResultPage].[RowID] BETWEEN -1 AND 50)) ORDER BY [ResultPage].[RowID] ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:17:46.233

我想有一个双子查询是相当昂贵的。如果您`[hasPending]`在单个子查询中确定 并保存在某些`JOIN`'s 上，它可能会执行得更好。

```
SELECT
    [sub].[ID],
    ROW_NUMBER() OVER (ORDER BY [sub].[hasPending] DESC, [sub].[ID] ASC) AS [RowID],
    [sub].[hasPending]
FROM
(
    SELECT
        [Current].[ID],
        (CASE WHEN COUNT([pending].[ID]) > 0 THEN 1 ELSE 0 END) AS [hasPending]
    FROM [Current]
    INNER JOIN [Current2] 
        ON [Current].[T2ID] = [Current2].[ID]
    LEFT JOIN [Pending] 
        ON [Current].[ID] = [Pending].[ID] AND [Pending].[User] = 'Admin'
    GROUP BY [Current].[ID]
) AS [sub] 
```

*编辑：*更改`COUNT(*)`为`COUNT([pending].[ID])`以便`[hasPending]`正确确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:26:09.533

试一试，这应该会加快速度，因为 id 将被转储到表变量中，而不必在每个循环中都进行查询。这很可能不是最好的解决方案，但如果没有关于您正在尝试做什么的更多信息，这至少应该有所帮助。

```
declare @ids table
(
    id int
)

insert into @ids(id)
SELECT [ID] From [Pending]
Inner Join [Current] On [Current].[ID] = [Pending].[ID] 
WHERE ([Pending].[User] = 'admin')

SELECT ROW_NUMBER() OVER 
    (ORDER BY Case When [Current].[ID] In (select id from @ids) 
    THEN 1 ELSE 0 END ASC, [Current].[ID] ASC) As [RowID], 
    [Current].[ID], 
    Case When [Current].[ID] In (select id from @ids)
    THEN 1 ELSE 0 END AS [HasPending] 
FROM [Current] 
INNER JOIN [Current2] AS [Table2] ON ([Current].[T2ID] = [Table2].[ID]) 
```

如果您的 id 是唯一的，您也可以使用它，我认为它们是：

```
SELECT ROW_NUMBER() OVER 
    (ORDER BY a.haspending, a.[ID] ASC) As [RowID],
    a.id, a.haspending,
from (select [Current].[ID], 
      Case when a.id is not null THEN 1 ELSE 0 END [HasPending] 
        FROM [Current] 
        INNER JOIN [Current2] AS [Table2] ON ([Current].[T2ID] = [Table2].[ID])
        left join  (SELECT distinct [ID] From [Pending]
                    Inner Join [Current] On [Current].[ID] = [Pending].[ID] 
                    WHERE ([Pending].[User] = 'admin')) a on a.id = [Current].[ID]) a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:32:40.040

好吧，在 Jacco 的建议的帮助下并对其进行修改以给出我所追求的正确结果，我能够让它运行，将查询缩短到惊人的 1 秒......

```
WITH [ResultPage] AS 
(SELECT
    sub.id as id,
    ROW_NUMBER() OVER (ORDER BY [sub].[hasPending] DESC, [sub].[ID] ASC) AS [RowID],
    [sub].[hasPending]
 FROM
(
SELECT
    a.[ID],
    (CASE WHEN p.[CID] is not null THEN 1 ELSE 0 END) AS [hasPending]
FROM [Alarm] a

full outer JOIN [Pending] as p
    ON a.[ID] like p.[CID] 
GROUP BY a.[ID],p.[CID]
) AS [sub]
INNER JOIN [Current2] ON (sub.[T2ID] = [Current2].[ID]))
SELECT [ResultPage].[RowID], [ResultPage].[HasPending], [Current2].[ID] As [Current2^ID],
etc...etc...
 FROM [ResultPage] 
INNER JOIN [Current] ON ([Current].[ID] = [ResultPage].[ID]) 
INNER JOIN [Current2] ON ([Current].[T2ID] = [Current2].[ID]) 
WHERE (([ResultPage].[RowID] BETWEEN -1 AND 50)) ORDER BY [ResultPage].[RowID] ASC 
```

# android - Android SensorEvent 时间戳常量

> ID：14842537
> 
> 赞同：4
> 
> 时间：2013-02-12T21:52:21.823
> 
> 标签：android, timestamp, unix-timestamp, android-sensors, nexus-4

我目前正在编写一个简单的 android 应用程序来计算设备 imu 的偏差。在执行此操作时，我遇到了 event.timestamp 值的问题

使用代码：

```
float dT = (event.timestamp-accel_timestamp)*NS2S; 
```

从[Android 参考指南](http://developer.android.com/reference/android/hardware/SensorEvent.html)中的示例计算四元数的旋转矩阵。

当我使用 Galaxy Nexus-S 运行代码时，测量之间的 dT 为 0.06~0.07 秒，但是当我在 LG Nexus 4 或 Nexus 7 上运行相同的代码时，dT 始终为 0。我知道这个问题, [Android SensorEvent 时间戳问题](https://stackoverflow.com/questions/14126068/android-sensorevent-timestamp-issue)，Nexus 7 时间戳是一个 unix 时间戳，但连续测量之间的差异不应始终为零。Nexus 4 和 Nexus 7 都具有相同的 IMU 这可能是如何从 IMU 创建时间戳的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:29:11.050

哇，好的，这肯定是一个错误！

每个 SensorEvent 的时间戳都被覆盖，就好像它是一个静态变量一样...

当我记录事件发生时的时间戳字符串时，所有值都不同。

事件未更改地存储在数组中。

数组中的每个 SensorEvent 现在都具有相同的时间戳，但值数组仍然不同（即，它们不是同一个对象并且包含不同的信息……时间戳除外）。

谷歌/HTC，请归还我生命中的三个小时！

除非有人能解释这种行为，否则我会提交错误报告。它当然没有记录在[API](http://developer.android.com/reference/android/hardware/SensorEvent.html)中。

同时，**试试这个解决方案**：

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;

public class UnbrokenSensorEvent {
    public long timestamp;
    public float[] values;
    public Sensor sensor;

    public UnbrokenSensorEvent(SensorEvent event){
        this.timestamp = event.timestamp;
        this.values = event.values;
        this.sensor = event.sensor;
    }
} 
```

然后在你的听众中做这样的事情：

```
ArrayList<UnbrokenSensorEvent> results = new ArrayList<UnbrokenSensorEvent>();

public void onSensorChanged(SensorEvent event) {
    results.add(new UnbrokenSensorEvent(event));
} 
```

重构应该很容易，因为 SensorEvent 和 UnbrokenSensorEvent 具有相同的公共字段。如果您需要使用其他 SensorEvent 功能，只需将其放入 Unbroken 版本即可。

这很 hacky，但恕我直言，快速 hack 总是比等待 API 更新更好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:19:42.527

还要注意 SensorEventListener 的 onSensorChanged 方法的文档：

> 注意：应用程序不拥有作为参数传递的事件对象，因此无法保留它。该对象可以是内部池的一部分，并且可以被框架重用。

在这里找到：http: [//developer.android.com/reference/android/hardware/SensorEventListener.html#onSensorChanged%28android.hardware.SensorEvent%29](http://developer.android.com/reference/android/hardware/SensorEventListener.html#onSensorChanged%28android.hardware.SensorEvent%29)

...这表明不应持有对 SensorEvent 对象的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T08:55:39.640

如果您从[此处](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_GYROSCOPE)复制代码段， 请注意它有一个错误。需要更换

```
private float timestamp; 
```

至

```
private long timestamp; 
```

在其他情况下，您的增量时间将始终包含奇怪的值

# c# - 在c#中添加progressBar以查看进程的进度百分比

> ID：14842540
> 
> 赞同：1
> 
> 时间：2013-02-12T21:52:36.597
> 
> 标签：c#, process, progress-bar

这是关于我的过程的代码：

```
StreamReader outputReader = null;
StreamReader errorReader = null;

       ProcessStartInfo processStartInfo = new ProcessStartInfo(......);
       processStartInfo.ErrorDialog = false;

       //Execute the process
        Process process = new Process();
        process.StartInfo = processStartInfo;
        bool processStarted = process.Start();

                     if (processStarted)
                        {
                        //Get the output stream
                        outputReader = process.StandardOutput;
                        errorReader = process.StandardError;

                        //Display the result
                        string displayText = "Output" + Environment.NewLine + "==============" + Environment.NewLine;
                        displayText += outputReader.ReadToEnd();
                        displayText += Environment.NewLine + Environment.NewLine + "==============" +
                                       Environment.NewLine;
                        displayText += errorReader.ReadToEnd();
                        // txtResult.Text = displayText;
                    } 
```

我需要将 progressBar 添加到我的表单中以计算此过程的进度百分比，但我不知道该怎么做。

我使用 Visual Studio 2012，windows 窗体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:37:16.510

使用流程`OutputDataReceived`事件来捕获进度。（假设该过程正在提供任何类型的更新）。您可以格式化初始输出以返回增量总数，然后为每个输出事件增加进度或实际解析输出数据以确定当前进度。

在此示例中，该过程的输出将设置最大值，随后的每个步骤都会将其提高。

例如

```
progressBar1.Style = ProgressBarStyle.Continuous;
// for every line written to stdOut, raise a progress event
int result = SpawnProcessSynchronous(fileName, args, out placeholder, false,
    (sender, eventArgs) =>
    {
        if (eventArgs.Data.StartsWith("TotalSteps=")
        {
          progressBar1.Minimum = 0;
          progressBar1.Maximum = Convert.ToInt32(eventArgs.Data.Replace("TotalSteps=",""));
          progressBar1.Value = 0;
        }
        else
        {
          progressBar1.Increment(1);
        }
    });

public static int SpawnProcessSynchronous(string fileName, string args, out string stdOut, bool isVisible, DataReceivedEventHandler OutputDataReceivedDelegate)
{
    int returnValue = 0;
    var processInfo = new ProcessStartInfo();
    stdOut = "";
    processInfo.FileName = fileName;
    processInfo.WorkingDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) ?? "";
    log.Debug("Set working directory to: {0}", processInfo.WorkingDirectory);

    processInfo.WindowStyle = isVisible ? ProcessWindowStyle.Normal : ProcessWindowStyle.Hidden;
    processInfo.UseShellExecute = false;
    processInfo.RedirectStandardOutput = true;
    processInfo.CreateNoWindow = true;

    processInfo.Arguments = args;
    using (Process process = Process.Start(processInfo))
    {
        if (OutputDataReceivedDelegate != null)
        {
            process.OutputDataReceived += OutputDataReceivedDelegate;
            process.BeginOutputReadLine();
        }
        else
        {
            stdOut = process.StandardOutput.ReadToEnd();
        }
        // do not reverse order of synchronous read to end and WaitForExit or deadlock
        // Wait for the process to end.  
        process.WaitForExit();
        returnValue = process.ExitCode;
    }
    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:57:43.863

通用流程没有提供进度通知的内置机制。您需要为您开始通知其进度的过程找出一些方法。

如果您控制该过程，您可以让它写入标准输出或标准错误，并使用

```
outputReader = process.StandardOutput;
errorReader = process.StandardError; 
```

您已定义将该进度读回您的程序中。例如，该进程可以写入标准错误

```
10
31
50
99 
```

并且您的父进程 reading`errorReader`可以将这些单独的行解释为 % complete。

一旦您有办法获得子进程的完成百分比，您就可以使用[ProgressBar](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx)来显示该进度。

# jquery - $.post - 未定义不是对象错误

> ID：14842545
> 
> 赞同：0
> 
> 时间：2013-02-12T21:53:11.763
> 
> 标签：jquery, wordpress

我编写了一个 WordPress 插件并将其所有内容上传到通常的 wp-content/plugins/pluginname 文件夹。其中有一个js文件和一个PHP文件，我尝试运行js代码，如下所示：

```
var tvs = {
    landingpage : {
        recommend : { 
            add : function(page_id) {
                $.post('wp-content/plugins/tvs_landingpages/tvs_recommend_add.php', {page_id:page_id}, function(data) {                                             ...do stuff here...(placeholder)
                });
            },//add
        },//recommend
    },//landingpage
}//var tvs 
```

执行此代码后，我收到以下错误：

```
TypeError: 'undefined' is not an object (evaluating '$.post') 
```

这是什么意思？php文件的路径错了吗？当一切都位于 wp-content/plugins/tvs_landingspages/...

# c# - C#重复按钮动作

> ID：14842546
> 
> 赞同：1
> 
> 时间：2013-02-12T21:53:15.600
> 
> 标签：c#, .net, rfid

我正在为 RFID 阅读器开发一个应用程序。我有一个具有以下操作的按钮：

```
private void btnWrite_Click(object sender, EventArgs e)
        {
            this.CheckPort = true;
            this.DetectCOMPort();
            bool readerOK = this.IsReaderConnected(this.lblCom.Text);
            bool flag = !readerOK;
            if (flag)
            {
                this.CheckPort = true;
                this.DetectCOMPort();
            }
            else
            {
                byte[] raspunsCitire = this.CitesteTag(this.lblCom.Text);
                flag = raspunsCitire == null;
                if (flag)
                {
                    MessageBox.Show("The label couldn't be read!");
                }
                else
                {
                    string scrisInTag = this.FormateazaCitire(raspunsCitire);
                    string[] campuriScrise = this.DecompileazaMesaj(scrisInTag, '|');
                    this.btnValid.Enabled = true;
                    this.txtEvenim.Enabled = true;
                    this.txtEvenim.Text = campuriScrise[0];
                    this.txtNume.Enabled = true;
                    this.txtNume.Text = campuriScrise[1];
                    this.txtPrenume.Enabled = true;
                    this.txtPrenume.Text = campuriScrise[2];
                    this.txtComp.Enabled = true;
                    this.txtComp.Text = campuriScrise[3];
                    this.txtFunc.Enabled = true;
                    this.txtFunc.Text = campuriScrise[4];
                    this.txtTit.Enabled = true;
                    this.txtTit.Text = campuriScrise[5];
                    this.Refresh();
                }
            }
        } 
```

我想要的是每 2 秒重复读取一次标签，而不是显示`MessageBox.Show("The label couldn't be read!");`. 对于另一种情况，当读取标签时，我希望此过程停止 20 秒，然后在 20 秒后每隔 2 秒重新开始读取。有可能以某种方式做到这一点吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:56:42.737

你有没有研究过定时器控制？

```
Timer timer = new Timer();

timer.Tick += new EventHandler(timer_Tick); // Everytime timer ticks, timer_Tick will be called
timer.Interval = (1000) * (10);             // Timer will tick evert 10 seconds
timer.Enabled = true;                       // Enable the timer
timer.Start(); 
```

# json - clojure 从 json 响应中获取数据

> ID：14842551
> 
> 赞同：5
> 
> 时间：2013-02-12T21:53:46.563
> 
> 标签：json, clojure

我有一个 json 响应，并希望得到这些值：

```
(cheshire.core/parse-string (:body picList))

{"photoset" {"primary" "8455893107", "total" "1", "pages" 1, "perpage" 500, "page" 1,
"per_page" 500, "photo" [{"id" "8455893107", "secret" "1a3236df06", "server" "8087", 
"farm" 9, "title" "IMG_0137", "isprimary" "1"}], "owner" "93029076@N07", "id" 
"72157632724688181", "ownername" "clojureB5"}, "stat" "ok"} 
```

如何获得不同的值，例如 photoset->primary 或 photoset->photo->id ？我尝试了一些东西，`(map #(get % "photoset")...`但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T21:57:44.140

我认为您正在寻找[clojure.core/get-in](http://clojuredocs.org/clojure_core/clojure.core/get-in)

```
(get-in your-parsed-json ["photoset" "primary"]) ;; "8455893107"

(-> (get-in your-parsed-json ["photoset" "photo"])
  first
  (get "id")) ;; "8455893107"

(get-in your-parsed-json ["photoset" "photo" 0 "id"]) ;; "8455893107" 
```

# sql - SQL 显示并发案例

> ID：14842552
> 
> 赞同：1
> 
> 时间：2013-02-12T21:53:51.987
> 
> 标签：sql

需要有关 SQL 的帮助，以按人显示一天中每一分钟的并发。对于以下数据集：

```
drop table test

create table test (person varchar(2), caseid varchar(3), starttime datetime, endtime datetime)
insert into test values ('aa', '1', '01/01/2013 06:42', '01/01/2013 07:06')
insert into test values ('aa', '1', '01/01/2013 07:31', '01/01/2013 09:38')
insert into test values ('aa', '2', '01/01/2013 08:37', '01/01/2013 11:44')
insert into test values ('aa', '3','01/01/2013 09:39', '01/01/2013 11:31')
insert into test values ('aa', '4','01/01/2013 11:09', '01/01/2013 13:30')
insert into test values ('aa', '5','01/01/2013 12:05', '01/01/2013 15:38')
insert into test values ('aa', '6', '01/01/2013 13:58', '01/01/2013 14:13')
insert into test values ('aa', '7', '01/01/2013 15:53', '01/01/2013 16:14')
insert into test values ('bb', '8', '01/01/2013 08:42', '01/01/2013 09:06')
insert into test values ('bb', '8', '01/01/2013 10:31', '01/01/2013 19:38')
insert into test values ('bb', '8','01/01/2013  20:37', '01/01/2013 21:44')
insert into test values ('bb', '9', '01/01/2013 09:39', '01/01/2013 11:31')
insert into test values ('bb', '9', '01/01/2013 11:45', '01/01/2013 13:30')
insert into test values ('bb', '9', '01/01/2013 12:05', '01/01/2013 15:38')
insert into test values ('bb', '10', '01/01/2013 13:58', '01/01/2013 14:13')
insert into test values ('bb', '10', '01/01/2013 15:53', '01/01/2013 16:14') 
```

结果需要类似于以下内容：

```
aa  01/01/2013 6:42     1
aa  01/01/2013 6:43     1
aa  01/01/2013 6:44     1
....
....
aa  01/01/2013 8:37     2
aa  01/01/2013 8:38     2
....
....
bb  01/01/2013 8:42     1
bb  01/01/2013 8:43     1
bb  01/01/2013 10:31    2
....
.... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:44:41.800

```
This seems to work, but there may be a more elegant solution:

-- get range of days involved
declare @minDate date = (select MIN(starttime) from test)
declare @maxDate date = (select MAX(endtime) from test)

-- create table containing all days
if OBJECT_ID('tempdb..#days') is not null
    drop table #days

create table #days (d date)
declare @day date = @minDate
while @day <= @maxDate
begin
    insert #days (d) values (@day)
    set @day = DATEADD(day, 1, @day)
end

-- create table containing all minutes in the day
if OBJECT_ID('tempdb..#minutes') is not null
    drop table #minutes

create table #minutes (m int)

declare @minute int = 0
while @minute < 24*60
begin
    insert #minutes (m) values (@minute)
    set @minute = @minute + 1
end

select person, dateadd(minute, m, convert(datetime, startdate)), c from
(
    select person, m, startdate, count(m) c from 
    (
        -- cross join to select all days and minutes
        select d.d, m.m from #days d cross join #minutes m
    )
    t0
    inner join
    (
        select 
            person, 
            convert(date, starttime) startdate,
            datediff(minute, convert(date, starttime), starttime) startmin,
            datediff(minute, convert(date, endtime), endtime) endmin
        from test
    )
    t1
    on t0.m between t1.startmin and t1.endmin
    and t0.d = t1.startdate
    group by person, m, startdate
)
t2
order by person, startdate, m, c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:24:55.497

如果使用支持 CTE 和内联视图的数据库，我会采用以下方法：

1.  首先是一个 CTE，用于生成指定日期当天 (24*60) 分钟的两列列表：

    时间1 时间2

    2013 年 2 月 12 日 00:00，2013 年 2 月 12 日 00:01。. . 2013-02-12 23:59, 2013-02-13 00:00

2.  将该 CTE 左连接到您的案例表，其中 case.starttime 在 time1 和 time2 之间或 case.endtime 在 time1 和 time2 之间。这会带回在那一分钟内案件没有任何部分正在进行的空值，或者在那一分钟内案件正在进行时的 caseid 和*personid*。

3.  使上面的内联视图。您最终会得到一组一天中的所有分钟以及左连接的 caseid 和 personid，或 null：

    time1, time2, caseid, personid

4.  如果您从该内联视图中选择，`where caseid is not null`您最终会得到一个或多个案例正在进行的分钟数；如果你然后`group by personid, time1`count(caseid) 你会在那个特定的一分钟时间段内得到每个人的病例总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:32:59.797

您可以使用相关子查询执行此操作：

```
Select t.*,
           (Select count(*) 
            From t t2
            Where t2\. Start <= t.start and
                        T2.end >= t.end
           )  numoverlaps
From t 
```

（为语法错误道歉；我在移动设备上）

这在输入数据中每次都发现了并发性。它不会每分钟都这样做。

# ruby-on-rails - rails 无缘无故更改 schema.rb

> ID：14842557
> 
> 赞同：8
> 
> 时间：2013-02-12T21:54:46.250
> 
> 标签：ruby-on-rails, rails-migrations

每次我运行`rake db:migrate`rails 都会决定更改我的 schema.rb 文件。在某些情况下，这是完全合理的，但在其他一些情况下，它似乎无缘无故地这样做。我感到困惑的情况是，当我从 git 中提取新的迁移和 schema.rb 的新版本，然后运行`rake db:migrate`​​. 由于此迁移附带了新版本的 schema.rb 文件，因此我不应该更新 schema.rb。然而，rails 每次都会改变它。当发生这种情况时，我发现非常愚蠢的变化，例如：

```
add_index "my_table", ["column1", "column2"], :name => "index_on_some_columns" 
```

至

```
add_index "my_table", ["column2", "column1"], :name => "index_on_some_columns" 
```

当这种情况发生时，我只是奔跑`git checkout db/schema.rb`并继续我的生活，但这让我感到无休止。它这样做有什么原因，我怎样才能阻止它这样做？

编辑：这是一个差异的摘录

```
@@ -165,12 +165,11 @@ ActiveRecord::Schema.define(:version => 20130206001907) do
     t.column "updated_at", :datetime
-    t.column "coordinates", :point, :srid => 4326
@@ -200,15 +199,16 @@ ActiveRecord::Schema.define(:version => 20130206001907) do
     t.column "something", :boolean
+    t.column "coordinates", :point, :srid => 4326
+    t.column "random_string", :string
     t.column "remote", :string
-    t.column "random_string", :string
   end

-  add_index "my_table", ["id", "foreign_id"], :name => "index_active_my_table_on_foreign_and_id"
-  add_index "my_table", ["id", "active"], :name => "index_my_table_on_active_and_id"
-  add_index "my_table", ["id", "content_modified_at"], :name => "index_my_table_on_content_modified_at_and_id"
+  add_index "my_table", ["foreign_id", "id"], :name => "index_active_my_table_on_foreign_and_id"
+  add_index "my_table", ["active", "id"], :name => "index_my_table_on_active_and_id"
+  add_index "my_table", ["content_modified_at", "id"], :name => "index_my_table_on_content_modified_at_and_id" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T22:36:27.183

> 由于此迁移附带了新版本的 schema.rb 文件，因此我不应该更新 schema.rb。

这是不准确的。

每次 Rails 运行迁移时，它都会`schema.rb`使用数据库作为源来更新文件。它不查看现有`schema.rb`文件，它只是使用数据库中的信息并覆盖它。

看来真正的问题是在两个不同的环境（Ruby、Rails、MySQL、操作系统的不同组合）中运行相同的迁移可能会在生成`schema.rb`文件时产生不同的结果。

解决方案是确保每个签入代码的人都尽可能使用相同的软件版本。如果不可能（因为这是 Windows 与 Linux 与 Mac 的区别，而且您不想更改操作系统），您只需要处理不便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-01T00:19:15.337

对我来说，解决方案是`rake db:schema:load`第一次。而不是无缘无故地`rake db:migrate`停止改变我的。`schema.rb`

**注意：** `rake db:schema:load`将删除**所有**现有数据并根据现有 schema.rb 重新创建数据库。

# r - 两个结构的猫：不同的字段

> ID：14842561
> 
> 赞同：2
> 
> 时间：2013-02-12T21:55:07.237
> 
> 标签：r, matlab, octave

我有多个 csv 文件

一个.csv

```
field_a, field_b
111,     121
112,     122 
```

b.csv

```
field_a, field_c
211,     231
212,     232 
```

c.csv

```
field_a, field_b, field_c
311,     321,     331
312,     322,     332 
```

我想连接它们

输出.csv

```
field_a,field_b,field_c
111,    121,    NA
112,    122,    NA
211,    NA,     231
212,    NA,     232
311,    321,    331
312,    322,    332 
```

我想用八度音阶来做这个。

到目前为止我做了什么：

```
a=csv2cell(a.csv)
A=cell2struct(a(2:end,:),a(1,:),1) 
```

现在我正在寻找类似的东西

合并(A,B,C) 或 vertcat(A,B,C)

但我不明白，所有字段都在输出中。

我这样做了：

```
 filelist<-list.files() 
 for (i in 1:length(filelist)) {
  datas[[i]]<-list(as.data.frame(read.csv(filelist[i])))
  merged <- merge(merged,datas[[i]], all=TRUE)} 
```

但是for循环非常慢。所以我正在寻找一种将它们一次合并的可能性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:56:55.567

`rbind.fill`from `plyr`package 应该可以完美地处理这个问题：

```
require(plyr)
rbind.fill(a,b,c)

#   field_a field_b field_c
# 1     111     121      NA
# 2     112     122      NA
# 3     211      NA     231
# 4     212      NA     232
# 5     311     321     331
# 6     312     322     332 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:58:08.223

我不确定 octave - 但在 Matlab 中我会使用`fieldnames`and set 函数。

在伪代码中是这样的：

```
all_fields = union of fieldnames(a), fieldnames(b) and fieldnames(c)
for each variable:
   missing_fields = setdiff(all_fields,fieldnames)
   add the missing fields
then join 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:23:48.210

我最后是怎么做的：

使用八度 (MATLAB)

```
% FileNames=readdir(pwd);
d=dir(pwd);

isDirIdx = [d.isdir];
names = {d.name};
FileNames = names(~isDirIdx);

for ii = 1:numel(FileNames)
  % Load csv to cell
  datas{ii}=csv2cell(FileNames{ii});
  %   Then I convert them to a struct
  Datas{ii}=cell2struct((datas{ii}(2:end,:)),[datas{ii}(1,:)],2);
  try fields=[fields, fieldnames(Datas{ii})'];% fails for the first loop, becauce 'fields' doesn't exist yet
  catch
   fields=[fieldnames(Datas{ii})'];  % create 'fields' in the first loop
  end
  Datalenght(ii)=numel(Datas{ii}(1));
end

cd(startdir)

for jj=1:numel(Datas)
  missing_fields{jj} = setdiff(fields,fieldnames(Datas{jj}));
  for kk=1:numel(missing_fields{jj})
    [Datas{jj}.(missing_fields{jj}{kk})]=deal(NaN);%*zeros(numel(datas{jj}(2:end,1)),1);)
  end
end 
```

问题是，我没有看到将结构导出到 csv 的简单方法。所以我切换回 R。因为我没有足够的内存，我无法加载 r 中的所有文件并将它们导出为一个 csv。所以首先我将每个 netcdf 文件导出到具有完全相同值的 csv 中。然后我用 unix/gnu cat 命令将它们全部连接起来。

回复：

```
# Converts all NetCDF (*.nc) in a folder to ASCII (csv)
# when there are more then one, all csv will have the same fields
# when there is a field missing in one NetCDF file, this scripts adds 'NA' Values

# it saves memory, because there is always only one NetCDF-File in the memory.

# Needs package RNetCDF:
# http://cran.r-project.org/web/packages/RNetCDF/index.html
# load package
library('RNetCDF')

# get list of all files to merge
filelist<-list.files() 

# initialise variable names
varnames_all<-{}
varnames_file<-list(filelist)

n_files<-length(filelist)
n_vars<-rep(NA,n_files) # initialise

# get variables-names of each NetCDF file
for (i in 1:n_files) {
  ncfile<-open.nc(filelist[i]) # open nc file
  print(paste(filelist[i],"opend!"))

  # get number of variable in the NetCDF
  n_vars[i]<-file.inq.nc(ncfile)$nvars 
  varnames="" # initialise and clear

  # read every variable name
  for (j in 0:(n_vars[i]-1)) {
    varnames[j]<-var.inq.nc(ncfile,j)$name
  }
  close.nc(ncfile)
  varnames_file[[i]]<-varnames # add to the list of all files
  varnames_all<-(c(varnames_all,varnames)) # concat to one array
}

varnames_all<-unique(varnames_all)  # take every varname only once
print("Existing variable names:")
print(varnames_all)

#initialise a data.frame for load the NetCDF
datas<-data.frame() 

for (i in 1:length(filelist)) {
  print(filelist[i])
  ncfile<-open.nc(filelist[i]) # open nc file
  print(paste("reading ", filelist[i], "...")) 
  datas<-as.data.frame(read.nc(ncfile))  #import data from ncfile as data frame
  close.nc(ncfile)

  #check witch variables are missing
  missing_vars<-setdiff(varnames_all,colnames(datas))

  # Add missing variables a colums with NA
  datas[missing_vars]<-NA
  print(paste("writing ", filelist[i], " to ", filelist[i],".csv ...", sep=""))

  #reorder colum in the same way as in the array varname_all
  datas<-datas[varnames_all] 

  # Write File
  write.csv(datas,file=paste(filelist[i],".csv", sep=""))

  # clear Memory
  rm(datas)
} 
```

然后猫直接向前

```
#!/bin/bash
# Concatenate csv files, whitch have exactly the same fields  

## Change to the directory, from where the files is executed
path=$PWD
cd $path

if [ $# -gt 0 ]; then
  cd $1
fi

# get a list of all data files
datafile_list=$( ls )
read -a datafile_array <<< $datafile_list
echo "copying files ..."
echo "copying file:" ${datafile_array[0]}

cat < ./${datafile_array[0]} > ../outputCat.csv
for  (( i=1; i<${#datafile_array[@]}; i++))
  do
  echo "copying file" ${datafile_array[$i]}
  cat < ./${datafile_array[$i]} | tail -n+2 >> ../outputCat.csv
done 
```

# javascript - Google 已禁用此应用程序的地图 API

> ID：14842565
> 
> 赞同：1
> 
> 时间：2013-02-12T21:55:23.807
> 
> 标签：javascript, google-maps-api-3

今天我试图将 JQuery Mobile 元素添加到一个使用谷歌地图的网站，突然我开始收到这条消息：

> Google 已禁用此应用程序的 Maps API。有关详细信息，请参阅服务条款：[http](http://www.google.com/intl/en-US_US/help/terms_maps.html) ://www.google.com/intl/en-US_US/help/terms_maps.html 。

我恢复了我所做的所有更改，以为它们可能以某种方式导致了这种情况，但这并没有解决问题。更糟糕的是，我还在我的网站的实时版本上收到了消息，该版本已经运行了数周，并且在几天内没有任何变化。

我知道我的 google 地图脚本已正确完成，因为它已经运行了很长时间，而且我收到的错误消息与人们错误地处理脚本时收到的错误消息不同。我的错误消息似乎是完全通用的，并且没有提供它停止工作的原因。

```
<script src="https://maps.googleapis.com/maps/api/js?key=apikeygoeshere&sensor=false" type="text/javascript"></script> 
```

（显然我没有用它作为键）

如果我检查我的 API 控制台，它会显示 API V3 没有已知问题。

我已经完成了所有常见的检查，例如清除浏览器缓存、使用不同的浏览器、获取新的 API 密钥等。

这对我来说真的很烦人，因为我的整个网站都是围绕地图构建的，这意味着我根本无法解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T22:47:24.643

如果您不指定 API 密钥，它似乎可以正常工作：

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key=AIzaSyBhSg6I2JvHNU_jLqIpvc5MEwc_xi3Ttvg&sensor=true"></script> 
```

对比

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=true"></script> 
```

（取自[http://www.google.com.au/about/jobs/locations/sydney/](http://www.google.com.au/about/jobs/locations/sydney/)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T22:41:58.543

这里同样的问题。看起来是谷歌错误，因为我怀疑谷歌会违反他们自己的使用条款。

[http://www.google.com.au/about/jobs/locations/sydney/](http://www.google.com.au/about/jobs/locations/sydney/)

# web-applications - Fel:invalid_client 使用带有 OAuth 2.0 的 Google Web 应用程序时

> ID：14842566
> 
> 赞同：1
> 
> 时间：2013-02-12T21:55:26.780
> 
> 标签：web-applications, google-api, oauth-2.0, google-drive-api, google-api-java-client

我在使用来自 Google API 控制台和 Web 应用程序的客户端 ID 时遇到问题。

我首先制作了一个用于本地应用程序的应用程序，该应用程序将重定向 url 获取到本地主机。并在这个意义上执行对 API 的请求。这工作得很好。

但是，当我尝试从使用 Glassfish 和 servlet 的 Web 应用程序中执行相同的操作时，请使用下面链接中的示例代码。当触发谷歌页面上的授权时，我总是得到一个 invalid_client 。我看到重定向并三重检查了 CLientID 和 Client Secret，这与 Google API Console 的状态相同。即便如此，我总是从 Google 获得 invalid_client。（是的，为 web 应用程序创建了一个新的客户端 ID，我使用的与在 localhost 执行的应用程序不同）

[http://code.google.com/r/ilyssus-test0/source/browse/?r=40cfcf05804cc7756287605a0cd6a5750a1cdb86#hg%2Fweb-app%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgoogle](http://code.google.com/r/ilyssus-test0/source/browse/?r=40cfcf05804cc7756287605a0cd6a5750a1cdb86#hg%2Fweb-app%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgoogle)

是否有任何强制更改，未包含在链接中的此示例代码中。或者我能做些什么来找出丢失的东西？

我什至尝试为 Web 应用程序创建不同的新客户端 ID，以查看我使用的客户端 ID 是否存在问题。但这也没有成功。

我还在 Google 开发页面上实现了来自“DrEdit for Java”的示例，但仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:24:28.567

我们遇到了一小组客户端 ID 的临时问题。这个问题应该得到解决。如果您仍然遇到问题，请跟进。

# macos - 启动服务器后无法打开 ActiveMQ 管理页面？

> ID：14842570
> 
> 赞同：0
> 
> 时间：2013-02-12T21:55:37.677
> 
> 标签：macos, jms, activemq

我不确定我是否启动了服务器。但是，我无法在浏览器上打开管理页面。

![在此处输入图像描述](../Images/7b4f1dc01cbf68c3456890e4a09efce7.png)

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:25:59.487

您通常应该做的一件事是检查代理日志，看看是否有错误。在您更改配置后在前台运行代理也会向您显示任何可能存在的错误，您可以运行：

```
 ./bin/activemq console 
```

在前台模式下运行。

除此之外，它很难提供帮助，因为您没有提供配置信息或执行 'ps -ef | grep activemq' 等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:12:15.200

检查您的`/conf/activemq.xml`文件并确保`<import resource="jetty.xml"/>`包含在内

# c# - 相互更新的属性

> ID：14842572
> 
> 赞同：2
> 
> 时间：2013-02-12T21:55:39.727
> 
> 标签：c#, properties, circular-reference

所以，在一些 C# 代码中，我有类似于这两个属性的东西：

```
private string _foo;
private string _bar;

public Foo
{
   get;
   set {
      _foo = value;
      Bar = _foo.Substring(3, 5);
   }
}

public Bar
{
   get;
   set {
      _bar = value;
      Foo = "XXX" + _bar;
   }
} 
```

问题：C# 属性是否受到循环引用/更新的影响，就像这个例子似乎会导致？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:04:00.620

您可以通过直接更新隐藏字段来避免无限循环，如下所示：

```
private string _foo;
private string _bar;

public string Foo
{
   get { return _foo; }
   set {
      _foo = value;
      _bar = _foo.Substring(3, 5);
   }
}

public string Bar
{
   get { return _bar; }
   set {
      _bar = value;
      _foo = "XXX" + _bar;
   }
} 
```

这将绕过另一个属性的设置器，从而消除循环。

**但是**……这通常会导致以后的维护问题。就个人而言，我会尝试寻找替代设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:57:25.923

> C# 属性是否受到循环引用/更新的影响，就像这个例子似乎会导致？

是的。你在这里有一个很好的无限循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:01:42.770

C# 中的属性是简单的方法（getter 和 setter）。您从另一种方法调用一种方法，反之亦然。结果完全符合预期。

这会让你感到惊讶吗？

```
public void set_Foo(string value)
{
   set_Bar(value.Substring(3, 5));
}

public void set_Bar(string value)
{
   set_Foo("XXX" + value);
} 
```

打电话`set_Foo("XXX12345")`和..你会看到这个网站的名字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-05T06:32:17.367

为了避免无限循环，这里有一个替代 Philip Hanson 的答案：仅在值实际发生变化时才运行 setter 行。对人好点; 这是我的第一篇文章/答案

```
private string _foo;
private string _bar;

public Foo
{
   get;
   set {
      if (_foo != value)
      {
         _foo = value;
         Bar = _foo.Substring(3, 5);
      }
   }
}

public Bar
{
   get;
   set {
      if (_bar != value)
      {
         _bar = value;
         Foo = "XXX" + _bar;
      }
   }
} 
```

# xml - Flash - 如何将 XML 节点名称动态传递给外部函数？

> ID：14842573
> 
> 赞同：0
> 
> 时间：2013-02-12T21:55:45.810
> 
> 标签：xml, actionscript-3, flash, nodes

我想知道如何将 XML 节点名称传递给不同文件上的 AS3 函数。例如，我有一个包含按钮的 Flash 影片，单击该按钮后，将所需的 XML 节点名称传递给外部 AS3 文件，然后使用它访问 XML 节点名称元素中的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:56:18.117

*“...将所需的 XML 节点名称传递给外部 AS3 文件”*可能意味着很多事情，您必须澄清这些事情才能得到正确的答案。

是AS3文件...

*   您在文档代码中实例化的另一个类？
*   在您当前运行的 SWF 中加载的另一个 swf？
*   在另一个 Flash Player 实例中运行另一个外部 swf？
*   包含的 .as 文件？

我会尽力回答这个问题。

假设您在位置 A 运行的函数可以访问 XML 文件 Z。函数 B（其位置将保持无名）也可以访问 XML 文件 Z。您的查询是如何从 A 传递对 Z 中 X 位置的引用给 B。

我还将假设您选择将信息从 A 传递到 B 的方式是不相关的（因为这完全取决于上面列出的可能影响这一点的场景）。

请参阅[如何遍历 XML 结构](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e6b.html)。

此时，您可以将路径的字符串表示形式（例如）传递给 B。从 B 中，您可以使用带有[XPath](http://en.wikipedia.org/wiki/XPath)`"order.book[0].title[0]"`的字符串拉取节点。作为 ECMAScript 的 AS3 本身没有此功能，但您可以通过[xpath-as3](http://code.google.com/p/xpath-as3/)轻松导入它。

抱歉这么含糊，但没有更多信息，这是我能提供的最好的。

* * *

**Dd Daym：**您在我正要回答的时候删除了您的问题（[AS3 Reset Position of Droptarget](https://stackoverflow.com/questions/14901788/as3-reset-position-of-droptarget)）。遗憾的是，StackOverlow 没有提供任何 PM，所以与其放弃我 30 分钟的努力，[这就是你的解决方案](http://www.atriace.com/media/DropCD.as)。

# cakephp - CakePHP 控制器中的 Pear::Image_Barcode 输出

> ID：14842575
> 
> 赞同：1
> 
> 时间：2013-02-12T21:55:55.240
> 
> 标签：cakephp, pear

我想在 CakePHP 控制器中输出使用 PEAR::Image_Barcode 生成的条形码：

```
public function gen_bc($bc_text = null)
{
    $this->autoRender = false;
    require_once("Image/Barcode.php");
    $bc = new Image_Barcode;
    $bc->draw($bc_text, "Code39", "jpg");
    exit();
} 
```

但是我没有得到任何输出@ all。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T01:16:47.280

你需要捕获你的输出。使用 ob_start()。否则，您的屏幕中将只有条形码图像。

```
require_once('Image/Barcode.php');

public function gen_bc($bc_text){
    ob_start();
    $img = Image_Barcode::draw( $bc_text ,'code128', 'png', false);
    $cif_data = ob_get_contents ();
    ob_end_clean();
} 
```

如果遇到错误，请尝试省略错误：

```
require_once('Image/Barcode.php');

error_reporting(0);

public function gen_bc($bc_text){
    ob_start();
    $img = Image_Barcode::draw( $bc_text ,'code128', 'png', false);
    $cif_data = ob_get_contents ();
    ob_end_clean();
} 
```

# c++ - 如何从不同的模板实例化调用模板的私有构造函数

> ID：14842578
> 
> 赞同：4
> 
> 时间：2013-02-12T21:56:06.070
> 
> 标签：c++, templates, c++11

例如：

```
template<class T>
class MyClass
{
public:
    template<class U>
    MyClass<U> doSomething() { return MyClass<U>(); } //can't access private constructor
private:
    MyClass() {}
} 
```

模板伏都教答案等是可以接受的。对我来说最重要的是这个类可以使用不同的模板参数创建和返回自身的实例，但是外部代码不能调用它正在使用的特定构造函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:02:29.283

将以下内容添加到`MyClass`

```
template<typename Q> friend class MyClass; 
```

`MyClass<int>`并`MyClass<float>`解决完全不同的课程。他们对彼此一无所知，并且他们无法访问彼此的私人信息，超过 2 个完全独立的班级。因此，解决方案是让`MyClass`朋友的每个实例化每隔一个实例化，这样他们就可以看到彼此的私人信息，就好像他们是同一个类一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:02:20.337

`friend`在这种情况下是您的朋友，因为每次您需要限制隐私例外时：

```
class MyClass {
     template <class U> friend class MyClass;
     .... 
```

# wpf - 在 TextBox (MVVM) 中连接键

> ID：14842580
> 
> 赞同：0
> 
> 时间：2013-02-12T21:56:07.797
> 
> 标签：wpf, mvvm, binding, triggers, command

在没有代码隐藏的情况下连接 keydown 事件有一点问题！所以，我们有组合框

```
<ComboBox Height="20" Width="auto"
                  ItemsSource="{Binding AlignComboItems}"
                  SelectedValue="{Binding SelectedComboItem, Mode=TwoWay}"
                  SelectedValuePath="Key" DisplayMemberPath="Value"

                  SelectedItem="{Binding SelectedItem}"
                  x:Name="cmbBoxAlign">
</ComboBox> 
```

和一些文本框。

```
<TextBox Text={Binding SomeSource}></TextBox> 
```

如何捕获 TextBox 上的 keydown 事件以选择（例如）ComboBox 中的最后一个元素？我不能使用 TextBox DataSource 属性更改，因为需要挂钩用户输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:47:39.440

如果您不介意安装 Expression Blend SDK，您应该可以在您的文本框中执行此操作

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="KeyUp">
        <i:InvokeCommandAction Command="{Binding Path=TheCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

`System.Windows.Interactivity`在您的 xaml 中添加对以下命名空间的引用后

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
```

链接到 Expression SDK for 4.0

[http://www.microsoft.com/en-us/download/details.aspx?id=10801](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:30:24.373

如果您希望每次在文本框中按下键时在视图模型中触发代码，您需要稍微更改绑定：

```
<TextBox Text="{Binding SomeSource, UpdateSourceTrigger=PropertyChanged}" 
```

然后在视图模型中将调用 setter：

```
private string _someSource;
public string SomeSource{
  get { return _someSource; }
  set { 
    //this will fire on key down
    _someSource= value;
    //based off the value you can set SelectedComboItem accordingly
    OnPropertyChanged( "SomeSource" );
  }
} 
```

此外，请确保您在视图模型上设置了 INotifyPropertyChanged。

# iphone - 在 iOS 上设计 3 行对话框的方法 - 多语言可用

> ID：14842585
> 
> 赞同：2
> 
> 时间：2013-02-12T21:56:24.770
> 
> 标签：iphone, ios, cocoa-touch, interface-builder, autolayout

我正在尝试在 iOS 中创建一个包含 3 个标签和 3 个文本字段的视图（普通单视图）。

该应用程序应该能够用于多语言使用。

我想必须遵循以下布局：

```
Label | TextField
Label | TextField
Label | TextField 
```

TextFields 应该从相同的位置开始。（见图）

但是文本字段的长度应该取决于标签中文本的长度。（我想最小化空间，你可以在英语图像上看到。

简而言之，英文版式的标签和文本字段之间的间距应与德文版相同。

使用自动布局的最佳方法是什么？

![图片（英文），到很多空间](../Images/1252d43d3a9fdec113149cdbe446318e.png) ![图片（德语）](../Images/030c496387d012a1d95c0005b71292fb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:33:58.910

每行的第一个：调整标签大小以适合文本。然后在标签和文本字段之间放置一个水平间距。

然后在所有左边缘应排列的文本字段上添加更高优先级的约束。

这是一些针对两行执行的代码：

```
- (void)viewDidLoad{
      [super viewDidLoad];

      //create labels and text fields for row 1
      UILabel *label0,*label1;
      UITextField *textField0,*textField1;

      label0 = [[UILabel alloc] init];
      label0.backgroundColor=[UIColor redColor];
      [self.view addSubview:label0];

      textField0 = [[UITextField alloc] init];
      textField0.backgroundColor=[UIColor greenColor];
      [self.view addSubview:textField0];

      [self.view setTranslatesAutoresizingMaskIntoConstraints:NO];
      [label0 setTranslatesAutoresizingMaskIntoConstraints:NO];
      [textField0 setTranslatesAutoresizingMaskIntoConstraints:NO];

      //*************************************************************
      //layout row 1
      NSArray *arr;
      NSDictionary *dict = NSDictionaryOfVariableBindings(label0,textField0);
      NSLayoutConstraint *constraint;

      //label sized to fit text (default) and standard spacing between label and textField
      arr = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[label0]-[textField0(100)]"
                                                    options:0
                                                    metrics:nil
                                                      views:dict];
      [self.view addConstraints:arr];

      //vertical constraints
      arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[label0]"
                                                    options:0
                                                    metrics:nil
                                                      views:dict];
      [self.view addConstraints:arr];

      arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[textField0]"
                                                    options:0
                                                    metrics:nil
                                                      views:dict];
      [self.view addConstraints:arr];

      //*************************************************************
      //create label and textfield for row2
      label1 = [[UILabel alloc] init];
      label1.backgroundColor=[UIColor redColor];
      [self.view addSubview:label1];

      textField1 = [[UITextField alloc] init];
      textField1.backgroundColor=[UIColor greenColor];
      [self.view addSubview:textField1];

      [self.view setTranslatesAutoresizingMaskIntoConstraints:NO];
      [label1 setTranslatesAutoresizingMaskIntoConstraints:NO];
      [textField1 setTranslatesAutoresizingMaskIntoConstraints:NO];

      //*************************************************************
      //layout row 2
      dict = NSDictionaryOfVariableBindings(label0,textField0,label1,textField1);

      //label sized to fit text (default) and standard spacing between label and textField
      arr = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[label1]-[textField1(100)]"
                                                    options:0
                                                    metrics:nil
                                                      views:dict];
      [self.view addConstraints:arr];

      //vertical constraints
      arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[label0]-[label1]"
                                                    options:0
                                                    metrics:nil
                                                      views:dict];
      [self.view addConstraints:arr];

      arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[textField0]-[textField1]"
                                                    options:0
                                                    metrics:nil
                                                      views:dict];
      [self.view addConstraints:arr];

      //*************************************************************
      //line up the left edges of the text fields and make it a higher priority to override spacing
      constraint = [NSLayoutConstraint constraintWithItem:textField0 attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual toItem:textField1 attribute:NSLayoutAttributeLeft multiplier:1 constant:0];
      constraint.priority=UILayoutPriorityDefaultHigh;
      [self.view addConstraint:constraint];

      //*************************************************************
      //Setup some text  
      //label0.text=@"Label0";
      label0.text=@"Some long textasdfasdfadsfasfdasf";
      textField0.text = @"textField0";

      //label1.text=@"Some long text";
      label1.text=@"Label1";
      textField1.text = @"textField1";

      [self.view setNeedsLayout];
} 
```

# redactor - 使用 redactor.js 动态添加下拉元素

> ID：14842589
> 
> 赞同：0
> 
> 时间：2013-02-12T21:56:51.537
> 
> 标签：redactor

我正在使用 Redactor，需要将元素动态添加到自定义下拉菜单中。我在文档中找不到任何这样做的方法 - 有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T09:24:37.573

是的，如果你使用它是可能的：

```
$('#redactor').redactor({
   focus: true,
   buttonsAdd: ['|', 'button1'],
   buttonsCustom: {
      button1: {
         title: 'Button',
         callback: function(buttonName, buttonDOM, buttonObject) { /* … */ },
         dropdown: {
             alignleft: {
                title: lang.align_left,
                func: 'alignmentLeft'
             },
             aligncenter: {
                title: lang.align_center,
                func: 'alignmentCenter'
             }
         }
      }
   }
}); 
```

# python - 这是什么 // 在 Python 中意味着什么

> ID：14842592
> 
> 赞同：0
> 
> 时间：2013-02-12T21:57:00.963
> 
> 标签：python

这是什么//在PYTHON中意味着什么
我知道这是python中的某种划分，例如
6.0//5 is 1.0
6.0//4 is 1.0
6.0//2 is 3.0
6.8//5.3 is 1
from this 我认为它只是返回非整数除法的整数解决方案，而不是四舍五入它只是切断的结束是真的吗？如果不是，那么它会做什么？四舍五入

我找到了答案对不起我会删除这篇文章:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:59:23.333

楼层划分。即向下舍入到最接近的整数。

# clojure - Clojure atom 的竞争条件

> ID：14842593
> 
> 赞同：0
> 
> 时间：2013-02-12T21:57:09.967
> 
> 标签：clojure, parallel-processing, race-condition

我显然不正确理解clojure的原子。我认为它的原子性保证可以证明如下：

```
(def users (atom #{}))

(defn add-user! [name]
  (swap! users
    (fn [users]
      (conj users name))))

(do
  (map deref
    [(future (add-user! "bob"))
     (future (add-user! "clair"))
     (future (add-user! "ralph"))
     (future (add-user! "mark"))
     (future (add-user! "bill"))
     (future (add-user! "george"))]))

(println @users)
(println
  (if (= 5 (count @users))
    "SUCCESS!"
    "FAIL")) 
```

不幸的是，这种情况并非如此。该代码似乎在用户原子中包含的集合上表现出竞争条件。

我需要使用哪种数据结构来确保所有用户都成功添加到用户集中？

## 解决方案

正如评论中指出的那样，代码中有几个错误。主要错误是没有使用 dorun 来强制评估所有期货。进行此更改后，代码按预期运行：

```
(def users (atom #{}))

(defn add-user! [name]
  (swap! users
    (fn [users]
      (conj users name))))

(dorun
  (map deref
    [(future (add-user! "bob"))
     (future (add-user! "clair"))
     (future (add-user! "ralph"))
     (future (add-user! "mark"))
     (future (add-user! "bill"))
     (future (add-user! "george"))]))

(println @users)
(println
  (if (= 6 (count @users))
    "SUCCESS!"
    "FAIL")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:54:51.657

请参阅[Clojure Atom 文档](http://clojure.org/atoms)。

同样来自 Clojure 的喜悦：

> Atom 与 Ref 相似，因为它们是同步的，但与 Agent 相似，它们是独立的（不协调的）。

# c# - 如何使用与 sql 中的“%%”相同的条件搜索列表框

> ID：14842594
> 
> 赞同：0
> 
> 时间：2013-02-12T21:57:11.750
> 
> 标签：c#, sql-server

如何使用与 sql 中的“%%”相同的条件搜索 ListBox，例如，如果列表包含以下项目 {cat , dog , cat with ring,dog with bone} 并在文本框中输入“with”。我需要过滤此列表框以仅包含包含单词“with”的记录（即 {cat with ring,dog with bone}）。

到目前为止，我可以使用此代码搜索并选择以输入字符串开头的项目..

```
 private void txtSearch_TextChanged(object sender, EventArgs e)
    {
        int index = lst.FindString(this.txtSearch.Text);
        if (0 <= index)
        {
            lst.SelectedIndex = index;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:59:52.253

这样的事情应该这样做：

```
string searchTerm = this.txtSearch.Text;
var items = lst.Items.Cast<ListItem>().Where(t=>t.Value.Contains(searchTerm)); 
```

`items`然后将包含所有具有`Value`包含您的搜索词的 ListItems。

# ios - 验证 APN 推送令牌

> ID：14842597
> 
> 赞同：0
> 
> 时间：2013-02-12T21:57:28.413
> 
> 标签：ios, push-notification, apple-push-notifications

我有一个服务器端 java 应用程序，它将批量推送消息发送到苹果服务器。最近我收到多个**SSLSocketException: Connection closed by remote host** OR **SSLSocketException: Broken pipe expcetions。**

我知道如果我发送无效令牌，苹果会强制关闭连接。我也有一个反馈循环，但失败的令牌永远不会出现在反馈循环中，因为它们甚至不被苹果接受。

有什么算法或方法可以知道，为什么设备令牌是“无效的”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:05:01.527

**为什么设备令牌无效？**

假设您从 Apple 获得了所有设备令牌并且没有创建虚拟令牌，那么无效令牌的最可能原因是同时具有生产令牌和沙盒令牌的数据库。

**如何查找哪些令牌无效：**

您应该使用增强的 APN 格式，在其中指定消息 ID。在您向 Apple 发送每条消息后，您应该在将超时设置为足够大的值后尝试从套接字读取。Apple 将针对指定消息 ID 的无效令牌向您发送错误响应。这将让您找到无效的令牌并将它们从您的数据库中删除。请注意，您应该只使用此方法（在每条消息后长时间读取响应）来清理您的数据库。在您的数据库从无效令牌中清除后，您不想使用它，因为它会使通知传递非常缓慢。

# php - 无法使用 json_decode 读取 json 提要

> ID：14842603
> 
> 赞同：0
> 
> 时间：2013-02-12T21:57:57.770
> 
> 标签：php, json

在 URL 中提供访问令牌后，我使用 Facebook 开放图作为 json 提要格式来获取页面名称。

这是我的代码：

```
$get_pages = file_get_contents("https://graph.facebook.com/me/accounts?access_token=".$_POST['access_token']);
$get_pages = json_decode($get_pages);

foreach($get_pages->data as $page){
    echo $page[name];
    } 
```

我试图呼应页面的名称。Facebook 提供的 Json 代码如下所示：

```
 {
       "data": [
          {
             "category": "website",
             "name": "jjj",
             "access_token": "jjj",
             "id": "jjj",
             "perms": [
                "jjj",
                "jjj",
                "jjj",
                "jjj",
                "jjj",
                "jjj"
             ]
          },
          {
             "category": "Community",
             "name": "ggg",
             "access_token": "ggg",
             "id": "ggg",
             "perms": [
                "ggg",
                "ggg",
                "ggg",
                "ggg",
                "ggg",
                "ggg"
             ]
          }
],
   "paging": {
      "next": "hhh"
   }
} 
```

我收到此错误：

```
 catchable fatal error: object of class stdclass could not be converted to string in
with this line of code :$get_pages = json_decode($get_pages); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:22:51.593

我解决了:) 我将代码更改为：

```
$get_pages = file_get_contents("https://graph.facebook.com/me/accounts?access_token=".$_POST['access_token']);
$get_pages = json_decode($get_pages, TRUE);
echo '<select id="select_page">';
foreach($get_pages[data] as $page_name){
echo '<option>'.$page_name[name].'</option>';
}
echo '</select>'; 
```

# android - 在android中打开选项菜单

> ID：14842607
> 
> 赞同：0
> 
> 时间：2013-02-12T21:58:16.690
> 
> 标签：android, checked, optionmenu

我检查有问题`onOptionItemSelected()`。我建立了一个菜单，`onOptionItemSelected()`有 2 个菜单组，第一组只有 1 个子菜单，第二组有 3 个子菜单。当我单击它时，我想更改子菜单上的检查。但是我试了很多次，还是不行。

如果我点击了一个子菜单，它的检查会改变，但其他检查不会改变。谁能帮我 ？

我将所有检查内容保存到共享首选项。

任何人都知道有关访问其他项目检查对象的任何信息`onOptionItemSelected()`吗？

谢谢你，对不起我的英语。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    String ringerString = mSharedPrefs.getString("ringer", SOR_STRING);
    boolean ringer = false;
    if (ringerString == SOR_STRING) {
        ringer = true;
    }
    String ayarString = mSharedPrefs.getString("ayar", "ikisi");
    boolean ayarIkisi = false, ayarMesaj = false, ayarArama = false;
    if (ayarString == "ikisi") {
        ayarIkisi = true;
    } else if (ayarString == "mesaj") {
        ayarMesaj = true;
    } else if (ayarString == "arama") {
        ayarArama = true;
    }
    SubMenu mMenu = menu.addSubMenu("Settings").setIcon(
            android.R.drawable.ic_secure);
    mMenu.add(1, 11, 0, SOR_STRING).setCheckable(true).setChecked(ringer);
    menu2 = menu.addSubMenu("Mesaj ve Arama Seçenekleri").setIcon(
            android.R.drawable.sym_action_chat);
    menu2.add(2, 12, 0, "Mesajlarda cevapla").setCheckable(true)
            .setChecked(ayarMesaj);
    menu2.add(2, 13, 0, "Aramalarda cevapla").setCheckable(true)
            .setChecked(ayarArama);
    menu2.add(2, 14, 0, "Her ikisinde de cevapla").setCheckable(true)
            .setChecked(ayarIkisi);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    RunningServices runningServices = new RunningServices();
    ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    String ringerString = mSharedPrefs.getString("ringer", SOR_STRING);
    boolean ringer = false;
    if (ringerString == SOR_STRING) {
        ringer = true;
    }

    switch (item.getItemId()) {
    case 11:
        if (ringer) {
            Log.v("menu sor", "giriş");
            if (!runningServices.isRingerRunnig(manager)) {
                try {
                    startService(new Intent(MainActivity.this,
                            RingerService.class));
                } catch (Exception e) {
                    // TODO: handle exception
                    Log.v("start service", "ringer service start hatası");
                }
                doShared("ringer", SORMA_STRING);
                item.setChecked(true);
                // setMenuTitle(mSharedPrefs.getString("ringer",
                // SOR_STRING),
                // item);
                Log.v("menu", item.getTitle().toString());
                progresislemi();
                return true;
            }
        } else {
            Log.v("menu sorma", "giriş");
            // if (runningServices.isRingerRunnig(manager)) {
            try {
                stopService(new Intent(MainActivity.this,
                        RingerService.class));
            } catch (Exception e) {
                // TODO: handle exception
                Log.v("stop service", "ringer service stop hatası");
            }
            doShared("ringer", SOR_STRING);
            item.setChecked(false);
            // setMenuTitle(mSharedPrefs.getString("ringer", SOR_STRING),
            // item);
            Log.v("menu", item.getTitle().toString());
            progresislemi();
            return true;
            // }
        }
        return true;
    case 12:
        doShared("ayar", "mesaj");
        Toast.makeText(getApplicationContext(),
                mSharedPrefs.getString("ayar", "mesaj"), Toast.LENGTH_LONG)
                .show();
        menuIslemi();
        item.setChecked(true);
        return true;
    case 13:
        doShared("ayar", "arama");
        Toast.makeText(getApplicationContext(),
                mSharedPrefs.getString("ayar", "mesaj"), Toast.LENGTH_LONG)
                .show();
        menuIslemi();
        item.setChecked(true);
        return true;
    case 14:
        doShared("ayar", "ikisi");
        Toast.makeText(getApplicationContext(),
                mSharedPrefs.getString("ayar", "mesaj"), Toast.LENGTH_LONG)
                .show();
        menuIslemi();
        item.setChecked(true);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:33:34.230

我建议将您的菜单项设置为`onPrepareOptionsMenu()`而不是`onCreateOptionsMenu()`. 这将在每次访问时动态重建您的菜单，以便正确显示修改后的检查值。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {...} 
```

# python - 二次方程程序的输出不正确

> ID：14842610
> 
> 赞同：2
> 
> 时间：2013-02-12T21:58:27.990
> 
> 标签：python, python-2.7

用户应该输入 A、B 和 C 的值并得到二次方程的根。从数学上讲，我的代码给出了错误的答案：

```
print "Quadratic Formula Calculator!!!"

a = input("Please, enter value for A: ")
b = input("Please, enter value for B: ")
c = input("Please, enter value for C: ")

quad =(b**2 - 4 * a * c)

if quad >= 0:
    quad ** 0.5
    print "quad"

else:
    print "can not compute"

solution1 = (-b + quad) / (2 * a)
solution2 = (b + quad) / (2 * a)

print " Solution 1!!!:", solution1
print " Soultion 2!!!:", solution2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T21:59:54.720

你需要这个：

```
quad = quad ** 0.5 
```

而不仅仅是`quad ** 0.5`.

解决方案是：

```
(-b + quad) / (2 * a)
(-b - quad) / (2 * a) 
```

如果您无法计算判别式的负值（可以，答案将是复共轭值），只需将解决方案的计算和打印移到`quad >= 0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:39:21.537

基于 m0nhawk 的回答，Hooked 的评论（和[Wikipedia](http://en.wikipedia.org/wiki/Quadratic_equation)）在这里是一种使用为复数设计的[cmath 库的方法。](http://docs.python.org/2/library/cmath.html)

```
from math import pow
from cmath import sqrt

print "Quadradtic Formula Calculator!!!"
print "Ax²+Bx+C=0"
print "This will attempt to solve for x"

a = input("Please, enter value for A: ")
b = input("Please, enter value for B: ")
c = input("Please, enter value for C: ")

discriminant = sqrt(pow(b,2) - (4 * a * c))

if discriminant.imag != 0:
    print "discriminant is imaginary"
else:
    print " Solution 1!!!:", (-b + discriminant.real) / (2 * a)
    print " Solution 2!!!:", (-b - discriminant.real) / (2 * a) 
```

`cmath.sqrt``.imag`将返回一个带有和`.real`字段的复数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:05:06.057

```
solution1 = (-b + quad) / (2 * a)
solution2 = (b + quad) / (2 * a) 
```

这应该是

```
solution1 = (-b + quad) / (2 * a)
solution2 = (-b - quad) / (2 * a) 
```

公式是 -b 加或减根，而不是加或减 b 加根。

# php - 同步代码更新

> ID：14842612
> 
> 赞同：0
> 
> 时间：2013-02-12T21:58:38.010
> 
> 标签：php, version-control, collaboration, liveedit

我在一个从事 PHP 项目的小团队中工作，其中一个问题是我们都在同时从事同一个项目。有时我们会最终编辑同一个文件，并且该文件的一个版本会覆盖另一个版本。就像 Google Docs 一样，我只注意到前几天另一个用户在屏幕上打字时，其他查看该文件的人也可以实时看到他们在做什么。我想知道有没有办法通过编码来做到这一点？看看我的团队在做什么，直播。

有什么建议么？您知道一些可以提高团队生产力的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:08:00.773

我工作的团队使用 SVN。开发人员每人从主干上切下一个分支，在分支上工作，然后合并回主干。

我们每晚检查我们的分支，所以我们不会丢失工作，并且当我们的代码“稳定”时我们合并到主干。

这样做，我们不会踩到对方的脚趾，而且我们知道，在大多数情况下，树干是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:04:02.710

我见过的最接近的解决方案是 linux screen + vim|emacs|nano|your 最喜爱的编辑器。这是一篇古老但很好的文章，解释了如何使用它：[http ://www.linux.com/learn/tutorials/442418-using-screen-for-remote-interaction](http://www.linux.com/learn/tutorials/442418-using-screen-for-remote-interaction)

否则，您可以查看[http://collabedit.com/](http://collabedit.com/)

我喜欢这个想法，我不知道是否有人已经将它开发到足以用于生产用途。

# java - 使用递归列表的最长公共子序列

> ID：14842623
> 
> 赞同：0
> 
> 时间：2013-02-12T21:59:20.053
> 
> 标签：java, algorithm, dynamic-programming, longest-substring

我试图找到两个可比较类型的事物之间的最长公共子序列。我有算法，但我想通过递归方法调用将这些项目添加到列表中，但我不知道如何以这种方式将最后一个项目添加到列表中。

这是我的代码：

```
public static <E extends Comparable<E>>List<E> getLongestCommonSubSeq(
   List<E> x,
   List<E> y )
{
   int m = x.size() +1;
   int n = y.size() +1;
   String[][] b =new String [m][n]; 
   int[][] c = new int[m][n];
   for(int i=1;i<m;i++) {
      c[i][0] = 0;
   }
   for(int j = 0;j<n;j++) {
      c[0][j]= 0;
   }
   for(int i=1; i<m;i++) {
      for(int j=1;j<n;j++) {
         if(x.get(i).equals(y.get(j))) {
            c[i][j] = c[i-1][j-1]+1;
            b[i][j]="NW";
         }
         else if(c[i-1][j] >= c[i][j-1]) {
            c[i][j]=c[i-1][j];
            b[i][j]="N";
         }
         else {
            c[i][j] = c[i][j-1];
            b[i][j]= "W";
         }
      }
   }
   return getLCS( m,n, b, x );
}

public static <E extends Comparable<E>> List<E> getLCS(
   int        i,
   int        j,
   String[][] b,
   List<E>    x )
{
   if(i==0 || j ==0)
      return null;
   if(b[i][j].equals("NW")) {
      // This can't be done because add returns a boolean type
      return getLCS(i-1,j-1, b, x) .add(x.get(i));
   }
   if(b[i][j].equals("N")) {
      return getLCS(i-1,j, b, x);
   }
   if(b[i][j].equals("W")) {
      return getLCS(i, j-1, b, x);
   }
   return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:26:45.973

```
public static <E extends Comparable<E>>List<E> getLCS(int i, int j, String[][] b, List<E> x){
        List<E> ret = new ArrayList<E>();

        if(i==0 || j ==0)
            return ret;

        if(b[i][j].equals("NW")) {
            // This can't be done because add returns a boolean type

            ret=getLCS(i-1,j-1, b, x);
            ret.add(x.get(i));
        }else if(b[i][j].equals("N")) {
            ret = getLCS(i-1,j, b, x);
        }else if(b[i][j].equals("W")) {
            ret= getLCS(i, j-1, b, x);
        }

        return ret;
    } 
```

我实施它有点错误

# c++ - 如何使 QLabel 填充子 QWidget？

> ID：14842624
> 
> 赞同：0
> 
> 时间：2013-02-12T21:59:23.263
> 
> 标签：c++, qt

我有 QWidget，在网格中使用 Lay Out，然后是 QLabel，但 QWidget 和 QLabel 之间有一些空格。如何使它们具有相同的大小而不破坏布局？

我在 UI 编辑器中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:47:11.790

当您选择小部件时，在 UI 编辑器的属性窗格中，您应该会看到属于它的布局选项（这些选项具有红色背景，它们通常位于列表的底部）。其中的选项是设置布局中小部件之间的边距（以像素为单位），如果将其设置为 0，它应该可以解决您的问题。

# mysql - 在 MySQL 中更改一周的开始日期

> ID：14842627
> 
> 赞同：4
> 
> 时间：2013-02-12T21:59:33.677
> 
> 标签：mysql, week-number

我发现以下代码有助于根据星期五的开始日期创建每周报告。说明说要替换“.$startWeekDay”。带有 4。当我将 '".$startDay."' 设置为 '2013-01-30' 时，出现错误。

此外，我还可以按照我的意愿按天而不是按周收到报告。

```
SELECT  SUM(cost) AS total, 
    CONCAT(IF(date - INTERVAL 6 day < '".$startDay."', 
            '".$startDay."', 
            IF(WEEKDAY(date - INTERVAL 6 DAY) = ".$startWeekDay.", 
                date - INTERVAL 6 DAY, 
                date - INTERVAL ((WEEKDAY(date) - ".$startWeekDay.")) DAY)),
        ' - ', date) AS week, 
        IF((WEEKDAY(date) - ".$startWeekDay.") >= 0, 
            TO_DAYS(date) - (WEEKDAY(date) - ".$startWeekDay."), 
            TO_DAYS(date) - (7 - (".$startWeekDay." - WEEKDAY(date))))     AS sortDay 
FROM    daily_expense
WHERE   date BETWEEN '".$startDay."' AND '".$endDay."' 
GROUP BY sortDay; 
```

以下代码是我正在使用的

```
SELECT count(DISTINCT (
UserID)
) AS total, CONCAT(IF(date(LastModified) - INTERVAL 6 day < date(LastModified), 
            date(LastModified), 
            IF(WEEKDAY(date(LastModified) - INTERVAL 6 DAY) = 4, 
                 date(LastModified) - INTERVAL 6 DAY, 
                date(LastModified) - INTERVAL             ((WEEKDAY(date(LastModified)) - 4)) DAY)),
        ' - ',  date(LastModified)) AS week 

FROM  `Purchase` 
WHERE  `OfferingID` =87
AND  `Status` 
IN ( 1, 4 ) 
```

按周分组

我得到的输出是

```
total   week
3   2013-01-30 - 2013-01-30
1   2013-01-31 - 2013-01-31 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:35:40.813

我不确定你想如何显示你的星期，上面的 sql 正在尝试显示日期范围。如果这不是必需的，您的查询可能非常简单，您只需将您的时间偏移两天（因为星期五距离一周的自然明星还有两天）并使用 week 函数获取周数。

查询将如下所示：

```
select count(distinct (UserID)) as total
, year( LastModified + interval 2 day ) as year
, week( LastModified + interval 2 day ) as week_number
FROM  `Purchase` 
WHERE  `OfferingID` =87
AND  `Status` 
IN ( 1, 4 )
group by year, week_number; 
```

# javascript - 使用 removeEvents 方法删除特定事件

> ID：14842629
> 
> 赞同：7
> 
> 时间：2013-02-12T21:59:38.290
> 
> 标签：javascript, jquery, fullcalendar

我刚开始使用这个插件，我在删除我刚刚创建的事件时遇到了一些问题。使用 eventClick 时我可以删除所有事件，但不能删除 eventClick 上的特定事件。

任何帮助，将不胜感激。这是我的代码。

```
<script type='text/javascript'>

$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        selectable: true,
        selectHelper: true,
        select: function(start, end, allDay) {
            var title = prompt('Trade Show Name:');
            if (title) {
                calendar.fullCalendar('renderEvent',
                    {
                        title: title,
                        start: start,
                        end: end,
                        allDay: allDay,
                        id: 12
                    },
                    true // make the event "stick"
                );
            $('input[name="startDate"]').val(start);
            }
            calendar.fullCalendar('unselect');
        },
        eventClick: function(calEvent, jsEvent, view) {
            $('#calendar').fullCalendar('removeEvents', function (calEvent) {
                return true;
            });,
        editable: true
    });

}); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-13T04:57:09.710

您可以通过 2 种方式执行此操作：

1) 为每个事件设置一个唯一 ID，并将这些 ID 传递给`removeEvents`调用。

```
eventClick: function (calEvent, jsEvent, view) {           
    $('#calendar').fullCalendar('removeEvents', calEvent._id);
} 
```

这`_id`是 fullCalendar 生成的唯一 ID。

2）通过一个过滤函数来删除你想要的事件。

考虑到您正在尝试在 中执行此操作`eventClick`，我建议您使用第二个。您的案例示例如下：

```
eventClick: function (calEvent, jsEvent, view) {
    $('#calendar').fullCalendar('removeEvents', function (calEvent) {
        return true;
    });
} 
```

此处传递给的过滤器函数`removeEvents`接受您要删除的事件并*返回 true*。既然你这样做了`eventClick`，你所要做的就是通过`calEvent`。

希望这可以帮助！

# java - 为什么我会收到此 NullPointerException？

> ID：14842631
> 
> 赞同：1
> 
> 时间：2013-02-12T21:59:49.613
> 
> 标签：java, nullpointerexception

我经常遇到 NullPointerException`clickCell[r][c] = false;`并且`new LifeGUI(new LifeModel(x, y, s);`无法修复它。请解释为什么会出现这个问题以及我如何解决它。

代码：

```
public  LifeModel(int rows, int cols, int cellSize) {
    row = rows;
    col = cols;
    cSize = cellSize;
    for (int r = 0; r < row; r++) {
        for ( int c = 0; c < col; c++) {
            clickCell[r][c] = false;
        }
    }
}

public static void main(int x, int y, int s) {
    new LifeGUI(new LifeModel(x, y, s));        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:01:02.700

您必须创建数组对象

```
boolean [][] clickCell = new boolean[rows][cols]; 
```

在 for 循环之前添加此命令。

更多信息[在这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

如果 clickCell 在其他地方声明，命令应该是：

```
clickCell = new boolean[rows][cols]; 
```

或者正如 GriffeyDog 建议的那样`new boolean[rows][cols]`，根据程序的逻辑，在声明数组的地方添加 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:04:49.393

您尚未显示`clickcell`声明数组的位置，但可能您已声明它但未初始化它。你可能有

```
boolean[][] clickcell; 
```

但需要：

```
boolean[][] clickcell = new boolean[rows][cols]; 
```

where`rows`和`cols`表示您需要的数组的大小。

# algorithm - 找到“覆盖所有”路径的开始和结束位置，然后将它们连接起来

> ID：14842636
> 
> 赞同：3
> 
> 时间：2013-02-12T21:59:58.780
> 
> 标签：algorithm, path-finding

我的 2dArray 中有这样的形状（例如）：

![在此处输入图像描述](../Images/11dead3c608a54d0b784046d866f3267.png)

已知点 A 和 B（我不知道在哪里）和一条覆盖整个形状的路径（必须穿过每个单元格）必须存在。你能给我一些关于如何确定点 A 和 B 以及“覆盖所有”路径的帮助吗？对于这种情况，也许有一些已知的算法。或者一些关于伪代码算法的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T12:38:56.557

检查`nhahdth`的链接以查看您的问题通常是 np-hard。[这篇 mathoverflow 文章](https://mathoverflow.net/questions/36368/efficient-way-to-count-hamiltonian-paths-in-a-grid-graph-for-a-given-pair-of-ver)引用了[一篇论文](http://www.cs.technion.ac.il/~itai/publications/Algorithms/Hamilton-paths.pdf)，为带有孔的网格上的图形建立了结果——除非你能提出更多的约束，否则你不会比使用蛮力好得多。

您可能很幸运，通过在底层网格单元图中搜索度数为 1 的顶点来识别至少一个开始和结束节点。

# mongodb - 为什么通过 MVC4 从 GridFS 发送文件需要这么多时间？

> ID：14842639
> 
> 赞同：2
> 
> 时间：2013-02-12T22:00:04.553
> 
> 标签：mongodb, asp.net-mvc-4, mongodb-.net-driver, iis-8, gridfs

我想通过 MVC4 Web 应用程序使用 GridFS 将存储在 MongoDB 中的图像通过我的 LAN 环境发送到浏览器，但是将图像发送到浏览器需要大约 500 毫秒。

谷歌浏览器网络检查员说大部分时间都花在“等待”期间，而实际的“接收”大约需要 1 毫秒。

MongoDB 服务器在本地网络中，那么发送一个 10kb 的图像需要这么长时间呢？我使用带有 Visual Studio 2012 的 Windows 8 和通过 NuGet 的官方 mongo-csharp-driver。

这是我的“文件”控制器的代码，它采用对象 ID 并发送此 ID 的数据：

```
public FileContentResult Files(string id)
{
    var database = new MongoClient(MyConnection).GetServer().GetDatabase("MyDB");
    var gridFs = new MongoGridFS(database);
    var bsonId = new BsonObjectId(id);
    var gridInfo = gridFs.FindOneById(bsonId);
    var bytes = GridInfoToArray(gridInfo);
    return new FileContentResult(bytes, "image/jpeg") { FileDownloadName = gridInfo.Name };
}

private byte[] GridInfoToArray(MongoGridFSFileInfo file)
{
    using (var stream = file.OpenRead())
    {
        var bytes = new byte[stream.Length];
        stream.Read(bytes, 0, (int)stream.Length);
        return bytes;
    }
} 
```

在视图中显示图像的代码：

```
<img src="@Url.Action("Files", new { id = objectIdOfMyImage) })"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T15:51:31.037

如果缓存数据库和 MongoGridFS 实例，结果有何不同？

```
// create static fields for _database & _gridFs
var database = _database ?? 
    (_database = new MongoClient(MyConnection).GetServer().GetDatabase("MyDB"));
var gridFs = _gridFs ?? 
    (_gridFs = new MongoGridFS(database)); 
```

我不确定当您实例化这些时会产生多少开销，但将其移到您尝试优化的方法之外并没有什么坏处。

# imagemagick-convert - 奇怪的 imagemagick 转换行为

> ID：14842641
> 
> 赞同：1
> 
> 时间：2013-02-12T22:00:17.267
> 
> 标签：imagemagick-convert

我使用 imagemagick convert 命令看到了一些非常奇怪的行为。我有一个图像 raw.gif。然后我运行：

```
convert raw.gif convert.png 
```

convert.png 中的输出似乎被缩小和移动了。但是，如果我运行：

```
convert raw.gif convert.jpg
convert convert.jpg convert_jpg.png 
```

所有图片都在下面。

convert_jpg.png 看起来与我期望的 raw.gif 完全一样。我确信我错过了一些明显的东西，但我一生都无法弄清楚。

原始.gif ![原始.gif](../Images/84a91263cfd54ea4ede970f9362108b3.png)

转换.png ![转换.png](../Images/7e874c13d9aa835d5adef7750cb01fa3.png)

转换.jpg ![转换.jpg](../Images/3fbb977ff150b8f21fe0803a146df106.png)

转换_jpg.png ![转换_jpg.png](../Images/ffaaa149f4efd05089343e4f5abb42bf.png)

# qt - 在构建期间制作 moc 跳过文件/文件夹

> ID：14842647
> 
> 赞同：5
> 
> 时间：2013-02-12T22:00:58.877
> 
> 标签：qt, libstdc++, moc

这是一个已知的错误，即 moc 跳过 libstdc++ 中使用的宏，如下所述：http://lists.kde.org/?l=necessitas-devel&m=132317657926916&q= [raw](http://lists.kde.org/?l=necessitas-devel&m=132317657926916&q=raw)

我正在尝试编译一个使用 gcc 4.6.3 的项目并且因为 moc 跳过宏而被卡住。

解决该问题的一种方法是包含此链接中提到的指令：

[http://doc.qt.io/qt-4.8/moc.html](http://doc.qt.io/qt-4.8/moc.html)

但这很耗时，而且不是很干净的方法，因为每个文件都必须有这些指令。

我想知道的是，可以配置 qmake 以使 moc 跳过某些目录/文件吗？

编辑：错别字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T05:43:34.747

根据[Qt qmake docs](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#headers) moc 将为添加到`HEADERS`变量的文件运行（强调我的）：

> qmake 将为指定的头文件生成依赖信息（除非在命令行中指定了 -nodepend）。**qmake 还会自动检测这些头文件中的类是否需要 moc**，并将适当的依赖项和文件添加到项目中以生成和链接 moc 文件。

因此，如果您不想为某些文件运行 moc，请不要将它们添加到`HEADERS`.pro 文件中。但是，对于某些平台，可能会导致在编译相应的 .cpp 文件时找不到标头。要解决此问题，`INCLUDEPATH`请为包含此类标头的文件夹添加一个 - moc 不会为`INCLUDEPATH`.

# ios6 - llvm gcc 编译器上的链接器错误仅适用于模拟器

> ID：14842648
> 
> 赞同：1
> 
> 时间：2013-02-12T22:01:01.197
> 
> 标签：ios6, ios-simulator, llvm, llvm-gcc

我们正在将我们的项目从 LLVM GCC 转移到 Apple LLVM。我们拥有的库之一是仅为 arm 而不是 i386 构建的。这导致我们在模拟器构建上收到警告，之后我们不再链接。这在 GCC 中运行良好，因为我能够很好地编译应用程序。这个警告对我们在模拟器上是无害的。有什么方法可以忽略 LLVM GCC 上的警告。

我还查看了项目构建设置，以确定是否有可以用来关闭此警告的标志。

我已经看过足够多的类似于这个的堆栈溢出问题。他们中的大多数人建议获取二进制文件的两种口味（arm 和 i386）并将它们组合起来。我仍然想知道这在 LLVM GCC 中是如何工作的，以及为什么没有编译错误。

有任何想法吗 ？

我得到的警告，ld：警告：忽略文件 library.a，文件是为存档而构建的，它不是被链接的架构（i386）

谢谢

# php - 使用 PHP 和 Google Docs API 将表单数据保存到 Google 电子表格时出错

> ID：14842651
> 
> 赞同：1
> 
> 时间：2013-02-12T22:01:14.723
> 
> 标签：php, zend-framework, google-docs-api, google-spreadsheet-api

我需要将 html 表单/调查的结果发布到 google docs 电子表格。现在我正在尝试使用 api 的最简单方案，它只是在我的电子表格中写入一个简单的行，尽管我不断收到错误消息。（我对php不太擅长，所以请多多包涵！）

代码：

```
<?php
set_include_path(get_include_path() . PATH_SEPARATOR . "$_SERVER[DOCUMENT_ROOT]/ZendGdata-1.12.1/library"); 
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_loader::loadClass('Zend_Gdata_Query');
Zend_Loader::loadClass('Zend_Gdata_Spreadsheets');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<?php
error_reporting(E_ALL);
ini_set("display_errors", 1);

$user = "######";
$pass = "######";
$service = "xapi"; 

$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null, Zend_Gdata_ClientLogin::DEFAULT_SOURCE, null, null, Zend_Gdata_ClientLogin::CLIENTLOGIN_URI, 'GOOGLE');

$spreadsheetService = new Zend_Gdata_Spreadsheets($client);

$feed = $spreadsheetService->getSpreadsheetFeed();

foreach ($feed as $entry) {
echo 'Title: ' . $entry->title . ' - ';
echo 'Id: ' . $entry->id . '<br />';
}
$rowData = array('wood' => 'oak');

$spreadsheetKey = '######';
$worksheetId = 'od6';

try{
$insertedListEntry = $spreadsheetService->insertRow($rowData,
                                                    $spreadsheetKey,
                                                    $worksheetId);
}
catch(Zend_Gdata_App_HttpException $exception) {  
    echo "Error: " . $exception->getResponse()->getRawBody();  
} 
?>
</body>
</html> 
```

错误：

```
> Fatal error: Uncaught exception 'Zend_Gdata_App_HttpException' with
> message 'Expected response code 200, got 401 <HTML> <HEAD>
> <TITLE>Token invalid</TITLE> </HEAD> <BODY BGCOLOR="#FFFFFF"
> TEXT="#000000"> <H1>Token invalid</H1> <H2>Error 401</H2> </BODY>
> </HTML> ' in
> C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata\App.php:714 Stack
> trace: #0
> C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata.php(219):
> Zend_Gdata_App->performHttpRequest('GET', 'https://spreads...', Array,
> NULL, NULL, NULL) #1
> C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata\App.php(880):
> Zend_Gdata->performHttpRequest('GET', 'https://spreads...', Array) #2
> C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata\App.php(768):
> Zend_Gdata_App->get('https://spreads...', NULL) #3
> C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata\App.php(210):
> Zend_Gdata_App->importUrl('https://spreads...', 'Zend_Gdata_Spre...',
> NULL) #4 C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata.php(162):
> Zend_Gdata_App->getFeed('https://spreads...', 'Zend_Gdata_Spre...') #5
> C:\xa in C:\xampp\htdocs\ZendGdata-1.12.1\library\Zend\Gdata\App.php
> on line 714 
```

任何帮助表示赞赏！:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:36:21.303

自从我处理这个问题以来已经有一段时间了，但我相信您看到的特定错误消息与您正在使用的服务名称有关。`'xapi'`是 Google 服务的通用服务名称，但您正在尝试专门访问 Google 电子表格。

尝试改变：

```
$service = 'xapi'; 
```

到：

```
$service = 'wise'; 
```

因为`'wise'`是 Google 电子表格的正确[ClientLogin 服务名称](https://developers.google.com/gdata/faq#clientlogin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:32:33.143

您的错误消息是指无效的令牌，这意味着 Google 不接受您的登录。我认为错误就在这`$service`条线上。试试这个：

```
$user = //user name @ gmail here
$pass = //password here
$sheet = //spreadsheet id/key here
$worksheet = "od6";

require_once('Zend/Loader.php');
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Spreadsheets');
Zend_Loader::loadClass('Zend_Http_Client');

$service = Zend_Gdata_Spreadsheets::AUTH_SERVICE_NAME;
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service);
$spreadsheetService = new Zend_Gdata_Spreadsheets($client); 
```

那么你所要做的就是：

```
$rowData = array("column1"=>"blah", "column2"=>"blah"); //replace column1 and column2 with your actual column names and replace blah with the information you want to add
$insertedListEntry = $spreadsheetService->insertRow($rowData,
                                                    $spreadsheetKey,
                                                    $worksheetId); 
```

# xml - XSLT 代码 - 从 xml（子字符串）中检索数据

> ID：14842660
> 
> 赞同：-2
> 
> 时间：2013-02-12T22:01:55.973
> 
> 标签：xml, xml-parsing, xslt-1.0, xslt-2.0

我将以下字符串作为 XML 文档中的文本节点：

```
OK - load average: 0.34,0.02,0.34
USERS OK - 0 users currently logged in,100,200
HTTP WARNING: HTTP/1.1 403 Forbidden
PING OK - Packet loss = 0%
DISK OK - free space: / 34285 MB (82% inode=94%): 
```

从上面的字符串中，我希望使用 xslt 代码仅获取第一个数字数据，例如预期输出如下：

```
0.34
100
null or blank
null or blank
null or blank 
```

由于上述验证是在 : 或 之后检索完成的，

我是 XSLT 的新手，获取这些数据似乎有点复杂，因为每种情况的验证似乎都不同。

我感谢任何人的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:36:50.240

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="text()">
  <xsl:variable name="vLines" select="tokenize(., '\n\r?')"/>

  <xsl:for-each select="$vLines">
   <xsl:value-of select=
   "if(matches(.,':\s*(\d+(\.\d+)?)'))
      then
        (replace(., '^.*?:\s*(\d+(\.\d+)?).*$','$1'),'&#xA;')
      else
       if(matches(.,',\s*\d+(\.\d+)?'))
         then
          (replace(., '^.*?,\s*(\d+(\.\d+)?).*$','$1'),'&#xA;')
       else
         'null&#xA;'

       "/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<t>OK - load average: 0.34,0.02,0.34
USERS OK - 0 users currently logged in,100,200
HTTP WARNING: HTTP/1.1 403 Forbidden
PING OK - Packet loss = 0%
DISK OK - free space: / 34285 MB (82% inode=94%):</t> 
```

**产生想要的正确结果**：

```
0.34 
100 
null
null
null 
```

* * *

**单个 XPath 2.0 表达式解决方案：**

```
for $vLine in
 ('OK - load average: 0.34,0.02,0.34'
 , 'USERS OK - 0 users currently logged in,100,200'
 ,'HTTP WARNING: HTTP/1.1 403 Forbidden'
 , 'PING OK - Packet loss = 0%'
 , 'DISK OK - free space: / 34285 MB (82% inode=94%):'
 )

return
  if(matches($vLine,':\s*(\d+(\.\d+)?)'))
   then
    (replace($vLine, '^.*?:\s*(\d+(\.\d+)?).*$','$1'),'&#xA;')
  else
   if(matches($vLine,',\s*\d+(\.\d+)?'))
     then
      (replace($vLine, '^.*?,\s*(\d+(\.\d+)?).*$','$1'),'&#xA;')
   else
     'null&#xA;' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:12:19.273

如果您确定每次可以执行此类操作时，您的字符串都会像您的示例一样。

```
<xsl:value-of select="substring-before(substring-after(mystringvalue,': '),',')"/> 
```

有关 XSLT 函数的良好来源，请查看[w3schools](http://www.w3schools.com/xpath/xpath_functions.asp)

# variables - 谷歌分析自定义标识符

> ID：14842671
> 
> 赞同：0
> 
> 时间：2013-02-12T22:02:36.643
> 
> 标签：variables, google-analytics

嗨，我正在调查谷歌分析。我想做的是添加一个自定义跟踪变量，即与我们的电子商务系统相关的 GUID。理想情况下，我想使用数据导出 API 将数据拉回我们的系统并进行一些报告。谷歌明确禁止使用电子邮件地址等个人身份数据，但只有我们的电子商务系统才能使用的 GUID 又如何呢？我想做的事是否可行，是否符合 Google 的条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:19:10.363

Google 不仅禁止直接的个人身份识别数据，而且还禁止可用于间接识别您自己系统中的个人身份的数据。因此，换句话说，如果该 GUID 附加到您自己系统中的个人身份信息，您无法将该数据发送到 GA，因为您可以轻松导出 GA 数据，将其绑定回您的系统，并将 GA 数据归因于个人可识别的数据。

当然，必须有人将其引起谷歌的注意，并且必须有人证明存在指向所述数据的链接......

# android - 位置管理器的位置更新请求是否仅在满足最小距离条件后才发生？

> ID：14842674
> 
> 赞同：0
> 
> 时间：2013-02-12T22:02:49.030
> 
> 标签：android

我正在尝试使用位置管理器来请求以最少的电池消耗进行位置更新。现在，我使用以下代码在我的活动类中请求位置更新。

**LocationManager locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE); locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, polltimeInterval, minDistValue, locListener);**

现在我设置了 5 米的最小距离值和 1000 毫秒的轮询间隔。现在我的问题是只有在满足最小距离条件时才会请求位置更新？或者它是否每 1 秒以任何方式轮询一次，但不会更新 lat long ，直到满足最小距离条件。

基本上，我试图了解这种特定方法如何与这两个可配置参数（轮询时间和最小妈妈距离）一起使用......是两者之一还是两者之一？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:07:07.513

“minDistance 参数也可以用来控制位置更新的频率。如果它大于 0，那么位置提供者只会在位置改变至少 minDistance 米，并且至少 minTime 毫秒时向您的应用程序发送更新通过了。但是对于位置提供者来说，使用 minDistance 参数来节省电量比较困难，因此 minTime 应该是节省电池寿命的主要工具。”

就在文档中。所以两者都必须实现。

# c# - C#获取字符串直到某个元素

> ID：14842681
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:03:26.067
> 
> 标签：c#, string

我需要有关 C# 中字符串操作的帮助。我有一个格式为 [text1|text2|text3|...] 的字符串。我想要的是提取分隔符之间的每个字符串，并可能将它们保存到列表或类似的东西中。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:05:42.097

你需要的是[`String.Split`](http://msdn.microsoft.com/en-gb/library/b873y76a.aspx)：

```
string[] result = inputString.Split(new Char[] {'|'}); 
```

尽管

```
string[] result = inputString.Split('|'); 
```

将与 MSDN 中未显示的单个字符重载一样工作。

这将为您提供一个字符串数组“text1”、“text2”、“text3”等。

如果您的字符串确实以“[”和“]”为结尾，那么您也需要删除它们。如果这些字符没有出现在您的字符串中的其他任何地方，您可以在一次调用中执行此操作：

```
string[] result = inputString.Split(new Char[] {'|', '[', ']'},
                                    StringSplitOptions.RemoveEmptyEntries); 
```

[来源](http://msdn.microsoft.com/en-us/library/ms131448.aspx)

否则你将不得不修剪文本：

```
string[] result = inputString.Trim('[',']').Split('|'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T22:09:28.033

您可以使用[`String.Trim`](http://msdn.microsoft.com/en-us/library/d4tt83f9.aspx)（删除`[`and `]`）并`string.Split`创建数组：

```
string[] result = text.Trim('[',']').Split('|'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T22:05:41.943

[http://www.dotnetperls.com/split](http://www.dotnetperls.com/split)

```
string[] array = "[text1|text2|text3|...]".Split('|'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T22:06:27.883

你应该调查`string.Split()`

```
string[] result = "[text1|text2|text3]".Replace("[", "").Replace("]", "").Split('|'); 
```

结果是包含 3 个字符串的数组：

> [0] = “文本 1”，[1] = “文本 1”，[2] = “文本 1”

# biztalk - Biztalk 发送端口调用 .asmx 服务

> ID：14842682
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:03:29.140
> 
> 标签：biztalk

> 错误详细信息：System.ServiceModel.ProtocolException：远程服务器返回了意外响应：（400）错误请求。---> System.Net.WebException：远程服务器返回错误：（400）错误请求。在 System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
> 在 System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult 结果) --- 内部异常堆栈跟踪结束 ---
> 
> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult 结果) 的 System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult 结果)
> 在 System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object [] 出局，IAsyncResult 结果）在 System.ServiceModel.Channels.ServiceChannel.EndRequest（IAsyncResult 结果）
> 
> 在 [0] 处重新引发异常：在 System.ServiceModel 的 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Microsoft.BizTalk.Adapter.Wcf.Runtime.WcfClient`2.RequestCallback(IAsyncResult 结果) 处的 Channels.IRequestChannel.EndRequest(IAsyncResult 结果) MessageId: {656781BB-FFA0-466B-A001-83ADCD4EEB78}

使用 BasicHTTPbindings...没有登录凭据。在使用其他 WCF 测试工具进行测试时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:14:39.587

您应该设置此 Web 服务器以将错误文本返回给调用者。默认情况下（出于安全原因）它不会返回它。您也可以将调试器附加到 Web 服务并使用请求本地化问题。

# ruby-on-rails-3 - 如何解决无休止的附件迁移？

> ID：14842684
> 
> 赞同：2
> 
> 时间：2013-02-12T22:03:36.550
> 
> 标签：ruby-on-rails-3, heroku, amazon-web-services, paperclip

我正在尝试使用 Paperclip + Rails 3 + Heroku + AWS，所以我尝试在我的用户模型中添加一些列来存储用户头像。

我的迁移如下所示：

```
class AddAvatarColumnsToUsers < ActiveRecord::Migration
 def self.up
     add_attachment :users, :avatar
   end

   def self.down
     remove_attachment :users, :avatar
   end
 end 
```

当我运行 rake db:migrate --trace 时，它​​会显示：

```
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:migrate
==  AddAttachmentAvatarToUsers: migrating =====================================
-- change_table(:users) 
```

但它永远不会结束！这是我的数据库的问题吗？架构定义？任何想法？

谢谢！

# django - 如何在 Django Admin 中默认将 user.is_staff 设置为 True？

> ID：14842689
> 
> 赞同：10
> 
> 时间：2013-02-12T22:04:01.340
> 
> 标签：django, django-admin, django-users

在管理界面中创建用户时，我需要将 is_staff 值设置为 True。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T22:45:15.690

您可以定义自定义 ModelAdmin 并在其中添加自定义逻辑：

```
class UserAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        if request.user.is_superuser:
            obj.is_staff = True
            obj.save()

admin.site.register(User, UserAdmin) 
```

[你可以在这里](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)阅读更多关于它的信息。

# c# - 如何将 TableAdapter 链接到我的项目？

> ID：14842693
> 
> 赞同：0
> 
> 时间：2013-02-12T22:04:20.717
> 
> 标签：c#, .net, sql-server

我有一个使用 MSSQL 数据库的 Windows 窗体应用程序。

当我尝试访问其中一个 tableAdapters 时，我无法访问`GetBy`and`FillBy`方法，如下所示：http: [//i.stack.imgur.com/QOcmf.jpg](http://i.stack.imgur.com/QOcmf.jpg)

虽然`GetBy`和`FillBy`方法已经创建：http: [//i.stack.imgur.com/P8kDu.png](http://i.stack.imgur.com/P8kDu.png)

问题是什么？为什么我无法访问`GetBy`and`FillBy`方法？

Btn_click：

```
 private void button_login_Click(object sender, EventArgs e)
        {
            pictureBox_login_loading.Visible = true;
            moveControlX(button_login, 50, Direction.Left); // move left for progress bar
            moveControlX(button_login, 50, Direction.Right); // return button to place.
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:14:33.813

你需要“更新”它。

```
public void button_login_Click(object sender, EventArgs e)
{
     ReadersTableAdapter rdrsTblAdapter = new ReadersTableAdapter();
     rdrsTblAdapter.GetBy();
     rdrsTblAdapter.FilBy();
} 
```

# java - 为什么命令行不能识别这个 java 命令？

> ID：14842698
> 
> 赞同：-6
> 
> 时间：2013-02-12T22:04:47.100
> 
> 标签：java, command-line, jar, classpath

我`java -classpath C:\blahblahblah\software_engineering\cs2.jar`在这里作为建议的一部分输入：[为什么我的 IDE 找到 JAR 但我的命令行没有？](https://stackoverflow.com/questions/14842124/why-does-my-ide-find-the-jar-but-my-command-line-doesnt/14842158#comment20799927_14842158).

我很确定这是一个有效的命令，但我收到了这个累了的列表：

```
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file)

where options include:
    -server       to select the "server" VM
    -hotspot      is a synonym for the "server" VM  [deprecated]
                  The default VM is server.

    -cp <class search path of directories and zip/jar files>
    -classpath <class search path of directories and zip/jar files>
                  A ; separated list of directories, JAR archives,
                  and ZIP archives to search for class files.
    -D<name>=<value>
                  set a system property
    -verbose[:class|gc|jni]
                  enable verbose output
    -version      print product version and exit
    -version:<value>
                  require the specified version to run
    -showversion  print product version and continue
    -jre-restrict-search | -jre-no-restrict-search
                  include/exclude user private JREs in the version search
    -? -help      print this help message
    -X            print help on non-standard options
    -ea[:<packagename>...|:<classname>]
    -enableassertions[:<packagename>...|:<classname>]
                  enable assertions
    -da[:<packagename>...|:<classname>]
    -disableassertions[:<packagename>...|:<classname>]
                  disable assertions
    -esa | -enablesystemassertions
                  enable system assertions
    -dsa | -disablesystemassertions
                  disable system assertions
    -agentlib:<libname>[=<options>]
                  load native agent library <libname>, e.g. -agentlib:hprof
                    see also, -agentlib:jdwp=help and -agentlib:hprof=help
    -agentpath:<pathname>[=<options>]
                  load native agent library by full pathname
    -javaagent:<jarpath>[=<options>]
                  load Java programming language agent, see java.lang.instrument

    -splash:<imagepath>
                  show splash screen with specified image 
```

怎么会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:05:42.867

你给它一个类路径，而不是要执行的类的名称。您也*只*在类路径中包含 jar 文件 - 而不是包含类文件的目录。

所以重复我对另一个问题的回答：

```
java -cp .;cs2.jar CB 
```

（从包含`CB.class`和的目录运行`cs2.jar`。）

# ruby-on-rails - Rails 3.2.11 资产管道：javascript 中的重音字符在生产中转换为问号

> ID：14842700
> 
> 赞同：4
> 
> 时间：2013-02-12T22:04:48.827
> 
> 标签：ruby-on-rails, encoding, asset-pipeline, pipeline, assets

我正在用西班牙语编写一个 Rails 应用程序，但在显示 JavaScript 中的重音字符时遇到了问题。

在开发中一切正常，但在生产中，在统一`/public/assets/application[*fingerprint*].js`文件中，我所有的特殊西班牙语字符都被转换为问号。我已经三次检查了我的 .js 文件确实是 UTF-8 格式，并且还尝试将扩展名更改为 .js.erb 并放在`<%# encoding: utf-8 %>`文件的顶部，但仍然没有乐趣。

我从头开始创建了一个新的简单应用程序，只是为了对此进行测试，但问题仍然存在。我什至尝试禁用 uglifier gem，以防万一，但这也不起作用。我现在的主要嫌疑人是 Sprockets，但找不到任何关于这件事发生在其他人身上的信息。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:38:20.603

好的，所以我终于通过用 Node.js 替换 Rhino 来实现它（我需要使用 jRuby，所以 therubyracer 显然也不是一个好的选择）。

===============================================

更新：已经有一段时间了，我几乎忘记了这篇文章，但现在我再次遇到它，我觉得我应该提到一些事情：虽然我使用 Node.js 的原始解决方案有效，但结果却更多一个无意的解决方法比其他任何东西。

一段时间后我发现，问题的根源在于，由于我缺乏使用 Linux 的经验，我很确定本地环境设置正确，而实际上它根本不正确。一旦我正确配置了我的语言环境，它就解决了这个问题以及我遇到的许多其他与语言环境相关的问题。

# batch-file - 在命令提示符中显示 ASCII 艺术时的错误

> ID：14842707
> 
> 赞同：1
> 
> 时间：2013-02-12T22:05:09.460
> 
> 标签：batch-file, ascii, console-application

所以，我制作了一个巨大的 ASCII 艺术作品，当你在命令提示符下打开一个 .bat 文件时，我想显示它。唯一的事情是当我将它保存为批处理文件并在命令提示符下打开它时，它会显示符号，但它有严重的错误。它通常是一堆难以理解的字符。它似乎也可笑地拉伸它并在左侧显示右侧，反之亦然，以及重叠它们。

有谁知道如何解决这个问题？

我一直在使用的字符是： # 。@ + ( ) { } + ' \ / ? Xgz

我也一直在这样做：

```
@echo off
color 40
echo "#########"
echo "#.......#"
echo "#../@\..#"
echo "#.......#"
echo "#########"
set /p enter=
if %enter% = C exit 
```

这不是真正的艺术品，只是为了让您了解它的样子。我不打算粘贴整个东西，因为它宽 187 个字符，高 74 行。（也许绝对大小与它有关......？但我不明白为什么会这样！）

另外，我已经尝试了在 ASCII 周围和没有的情况下都使用了“”的 echo 命令。（所以回显#####和回显“#####”）

反正。我希望我已经给了你足够的信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:19:14.183

187 个字符超过了大多数正常的命令窗口宽度，因此您的行可能会换行（右边太长，所以它们会换行到下一行）。

检查您的命令窗口属性以查看窗口的宽度和高度（在“布局”选项卡上）；这些是您在换行或滚动之前拥有的字符数和行数。

![在此处输入图像描述](../Images/53cb8da8102cec3b057872a8df33d639.png)

# regex - Perl 或 Sed 命令在匹配表达式之前删除内容

> ID：14842708
> 
> 赞同：1
> 
> 时间：2013-02-12T22:05:09.630
> 
> 标签：regex, perl, sed, expression

我有一个 html 文件目录，我想在其中删除所有内容（包括）匹配的表达式。我已经尝试过了（其中 XXXXXX 是我要查找的字符串：

```
perl -pi -e "$a++if s/.*XXXXXX.*//si;$a||s/.*//s" *.html 
```

我收到此错误（当我按 Enter 时，它正在更改我的命令，请参见第一行）：

```
perl -pi -e "$a=1 if *.htmla && s/.*XXXXXX.*//is; s/.*//s if *.htmla" *.html
Bareword found where operator expected at -e line 1, near "*.htmla"
    (Missing operator before htmla?)
Bareword found where operator expected at -e line 1, near "*.htmla"
    (Missing operator before htmla?)
syntax error at -e line 1, near "="
syntax error at -e line 1, near "*.htmla
"
Execution of -e aborted due to compilation errors. 
```

使用 Perl 命令有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:08:47.497

尝试使用

```
' 
```

代替

```
" 
```

否则你的 shell 会扩展 $a。

```
perl -pi -e "$a++if s/.*XXXXXX.*//si;$a||s/.*//s" *.html 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:09:03.977

如果要删除与某个正则表达式匹配的行之前的所有行。

您可以为 sed 提供一个范围，并从第一行删除直到并包括匹配项

```
sed -i -e '1,/match/d' file.html 
```

如果要从每行中删除与正则表达式匹配的内容

```
sed -i -e 's/.*match//' file.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:12:50.233

相当用 `'`而不是`"`.

变量被插入到 `"`引用的材料中；shell 这样做，Perl 也这样做。

在这种情况下，您的 shell`$a`在将结果提供给 Perl 之前将替换为它的值。结果是非法的 Perl 语法。

# vim - 无法粘贴到 VIM

> ID：14842712
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:05:23.490
> 
> 标签：vim, pasting

重现步骤：

1）打开任何文件（example.txt）。

2) 按 v 并选择一些行。

3）按 y 拉动它们（也尝试过 yy）。

4) :q 退出。

5) 打开任何其他文件。

6) p 粘贴。

7) E353: 没有注册"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:11:18.830

在单独的 vim 实例之间粘贴时，您需要使用系统的剪贴板。尝试`"+y`复制到`+`寄存器并`"+p`从中粘贴。根据您的操作系统，如果似乎不起作用，您也可以尝试`*`注册。`+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:09:50.017

至少在默认情况下，在 vim 运行之间不会保存 Yank/paste 缓冲区。而是执行：y，然后 :split other-file，然后将其粘贴到那里。

# crystal-reports - 水晶报表年份选择

> ID：14842713
> 
> 赞同：1
> 
> 时间：2013-02-12T22:05:32.987
> 
> 标签：crystal-reports, date-range

我正在使用 Crystal Reports 2011 并有一个按 YEAR（行）和 MONTH（列）显示数据的交叉表。我需要在任何给定时间报告 3 年的数据，但在 4 月份是我需要放弃较旧的一​​年以获取新的一年的时候。

例如，目前由于我们在 2 月，我正在报告 2010、2011 和 2012 年。一旦 4 月 1 日命中，我将报告 2011、2012 和 2013 年。所以我将在报告中删除 2010 年并选择 2013 年。我希望将其自动化，以便报告将自动更改其报告的年份。

我尝试了各种记录选择公式，但无法确定一个返回所需年份的公式。年份目前是手动调整的。每年 4 月 1 日，我手动调整报告以删除 3 年前的数据并开始包含当年数据。

我正在寻找有关如何解决此问题的建议。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:42:53.243

我想我在评论中错误地陈述了适当的日期范围，但如果我理解正确，我们需要公式来执行以下操作：

*   如果今天运行，报告将显示 2010 年 1 月 1 日至 2012 年 12 月 31 日的数据。
*   如果在 4 月 1 日运行，它将显示从 2011 年 1 月 1 日到 2013 年 4 月 1 日的数据。

为此，我想出了以下公式字段：

*   创建一个名为 的公式字段`DateRangeFrom`。它应该包含：

    ```
    IF datepart("m", CurrentDate) < 4 THEN

        // 如果我们在 1 月 - 3 月，则显示三年前
        DateSerial (Year(DateAdd("yyyy", -3, CurrentDate)), 1, 1)
    别的
        // 如果我们在 4 月 - 12 月，则显示两年前
        DateSerial (Year(DateAdd("yyyy", -2, CurrentDate)), 1, 1)

    ```

*   创建另一个名为`DateRangeTo`. 它应该包含：

    ```
    IF datepart("m", CurrentDate) < 4 THEN

        // 如果我们在 1 月 - 3 月，则显示一年前
        DateSerial (Year(DateAdd("yyyy", -1, CurrentDate)), 12, 31)
    别的
        // 如果我们在 4 月 - 12 月，则显示到当前日期
        当前日期

    ```

*   然后，您可以在记录选择公式中使用这些字段，如下所示：

    ```
    {YourTable.YourDateColumn} > {@DateRangeFrom}
        和 {YourTable.YourDateColumn} <= {@DateRangeTo}

    ```

**编辑：**

如果您只想按年份搜索，请删除这些`DateSerial`功能，并将您的记录选择公式更改为使用`>=`而不是`>`，您应该留下：

*   创建一个名为 的公式字段`DateRangeFrom`。它应该包含：

    ```
    IF datepart("m", CurrentDate) < 4 THEN

        // 如果我们在 1 月 - 3 月，则显示三年前
        年(DateAdd("yyyy", -3, CurrentDate))
    别的
        // 如果我们在 4 月 - 12 月，则显示两年前
        年(DateAdd("yyyy", -2, CurrentDate))

    ```

*   创建另一个名为`DateRangeTo`. 它应该包含：

    ```
    IF datepart("m", CurrentDate) < 4 THEN

        // 如果我们在 1 月 - 3 月，则显示一年前
        年(DateAdd("yyyy", -1, CurrentDate))
    别的
        // 如果我们在 4 月 - 12 月，则显示到当前日期
        年份（当前日期）

    ```

*   然后，您可以在记录选择公式中使用这些字段，如下所示：

    ```
    {YourTable.YourDateColumn} >= {@DateRangeFrom}
        和 {YourTable.YourDateColumn} <= {@DateRangeTo}

    ```

# sql-server - 创建视图时如何包含命名空间和模式绑定？

> ID：14842719
> 
> 赞同：0
> 
> 时间：2013-02-12T22:06:17.323
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2012

您如何将 SCHEMABINDING 与 XMLNAMESPACES 一起包含在内

```
CREATE View [dbo].[GetSomething] As

WITH XMLNAMESPACES ( 'http://www.something.com/some.xsd' AS gev)

-- How to include SCHEMABINDING--

SELECT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:37:48.763

```
CREATE View [dbo].[GetSomething] 
WITH SCHEMABINDING
AS

WITH XMLNAMESPACES ( 'http://www.something.com/some.xsd' AS gev)

SELECT -- Make sure your select follows the rules for schemabinding of course 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:22:58.270

```
CREATE VIEW dbo.Something WITH SCHEMABINDING AS 

WITH XMLNAMESPACES 
```

# c - 如何让这个 C 程序接受新输入而不将其添加到旧输入中？

> ID：14842720
> 
> 赞同：0
> 
> 时间：2013-02-12T22:06:21.353
> 
> 标签：c

我被困在我必须为家庭作业做的编程练习上。我已经非常接近完成它，但我只是不知道如何让程序在最后要求用户“输入下一组限制”，而无需程序将新输入添加到旧输入中。

这是我书中出现的问题：

> 编写一个请求整数下限和上限的程序，计算从下限平方到上限平方的所有整数平方和，并显示答案。然后程序应继续提示限制并显示答案，直到用户输入等于或小于下限的上限。示例运行应如下所示：
> 
> ```
> Enter lower and upper integer limits: 5 9
> The sums of the squares from 25 to 81 is 255
> Enter next set of limits: 3 25
> The sums of the squares from 9 to 625 is 5520
> Enter next set of limits: 5 5
> Done 
> ```

这是我写的代码：

```
#include <stdio.h>

int main(void)
{
    int index, lower, upper, square, total, input;

    printf("Enter lower and upper integer limits: ");

    for (input = scanf("%d %d", &lower, &upper); input == 2; printf("Enter the next set of limits: \n"), scanf("%d %d", &lower, &upper))
    {
        for (index = lower; index <= upper; index++)
        {
            square = index * index;
            total += square;
        }
        printf("The sums of the squares from %d to %d is %d\n", lower * lower, upper * upper, total);
    }

    return 0;
} 
```

任何帮助将非常感激！我已经为此工作了一个多小时。

更新，这就是我现在所拥有的，但它仍然不正确，因为当上限和下限相同时它不会打印出“完成”：

# 包括

int main(void) { int index, lower, upper, square, total;

```
printf("Enter lower and upper integer limits: ");

while (scanf("%d %d", &lower, &upper) == 2)
{
    total = 0;
    for (index = lower; upper > index; index++)
    {
        square = index * index;
        total += square;
    }
    printf("The sums of the squares from %d to %d is %d\n", lower * lower, upper * upper, total);
    printf("Enter the next set of limits: \n");
}

return 0; 
```

}

*更新****** ******

感谢大家的帮助，我想我终于明白了：

# 包括

int main(void) { int index, lower, upper, square, total;

```
printf("Enter lower and upper integer limits: ");

while (scanf("%d %d", &lower, &upper) == 2)
{
    while (lower < upper)
    {
    total = 0;
    for (index = lower; index <= upper; index++)
    {
        square = index * index;
        total += square;
    }
        printf("The sums of the squares from %d to %d is %d\n", lower * lower, upper * upper, total);
        printf("Enter the next set of limits: \n");
        scanf("%d %d", &lower, &upper);

}
    printf("Done");
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:11:10.297

我真的很讨厌你的`for`循环。但这是一个问题。

只需`total`在循环内设置为零......无论如何你都应该这样做。目前它是未初始化的。

`lower == upper`不进行计算时应退出循环。有关我对您的`for`循环的想法，请参阅之前的注释。

也许是这样的：

```
printf("Enter lower and upper integer limits: ");
fflush(stdout);

while ( 2 == scanf("%d %d", &lower, &upper) && lower < upper )
{
    total = 0;

    // Do calculation and output result...

    printf("Enter the next set of limits: ");
    fflush(stdout);
}

printf("Done\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:26:24.990

```
int index, lower, upper, square, total, input;
while(1)
{
    total = 0;
    printf("Enter lower and upper integer limits: ");
    fflush(stdout);
    input = scanf("%d %d", &lower, &upper); 
    if(input != 2) continue;
    if(upper <= lower) break;
    for (index = lower; index <= upper; index++)
    {
        square = index * index;
        total += square;
    }
    printf("The sums of the squares from %d to %d is %d\n", lower , upper, total );
}
printf("Done\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:09:21.450

只需将代码包装在：

```
while( upper > lower ) { 
...
} 
```

（并进行适当的初始化`upper`，`lower`以便进入循环。）

# mysql - 具有多个连接的 JDBC 检索

> ID：14842726
> 
> 赞同：0
> 
> 时间：2013-02-12T22:06:44.167
> 
> 标签：mysql, sql

我有三个具有一对多映射的表，即名称与运输和付款具有一对多关系（****忽略大小写敏感****）

```
 Table parent has 3 columns    id, name, name_id
    Table shipping has 3 columns  id, shippingName,name_id
    Table payment has 3 columns   id, paymentName, name_id 
```

当我执行以下查询时

```
 SELECT shipping.shippingName,payment.paymentName,parent.name,Parent.name_id
    FROM parent 
    JOIN shipping
    ON  parent.name_id = shipping.name_id
    JOIN payment
    ON  parent.name_id = payment.name_id
    WHERE parent.name_id= '3' 
```

以上返回

```
 shipping Name             paymentName          name          name_id
   Fedex                      Credit              AA              3
   Fedex                      Debit               AA              3
   USPS                       Credit              AA              3
   USPS                       Debit               AA              3 
```

但我想要的是

```
 shipping Name             paymentName          name          name_id
   Fedex                      Credit              AA              3
   USPS                       Debit               AA              3 
```

有办法吗？还是我需要在运输和付款表之间设置任何映射

```
 Shipping Table

   ID        ShippingName    name_id
   1             FEDEX         3
   2             USPS          3

   Payment Table

   ID        PaymentName    name_id
   1         Credit           3
   2         Debit            3

   Parent Table

   ID        name        name_id
   1001        A           1
   1002        B           2
   1003       AA            3 
```

Fedex 没有付款选项.. Parent 与 Shipping 有一对多 && Parent 与 Payment 有一对多.. Payment 和 Shipping 之间没有关系 我的问题是是否有可能在一个数据库调用中获得我想要的结果集或应该使用 2 个不同的查询（父+运费）（父+付款）调用两次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:38:42.527

```
Shipping Table

ID        ShippingName    name_id  Payment_ID
1             FEDEX         3         1
2             USPS          3         2

Payment Table

ID        PaymentName   
1         Credit        
2         Debit        

Parent Table

ID        name        name_id
1001        A           1
1002        B           2
1003       AA           3 
```

询问：

```
SELECT shipping.shippingName,payment.paymentName,parent.name,Parent.name_id
FROM parent 
JOIN shipping
ON  parent.name_id = shipping.name_id
JOIN payment
ON  shipping.Payment_ID = payment.ID
WHERE parent.name_id= '3'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:08:54.543

只需添加这个

```
GROUP BY shipping.shippingName ,payment.paymentName 
```

在您的查询结束时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:26:13.687

其中 PaymentName IN ('Credit',Debit') AND Name_ID =3

# python - 如何在 Python 中将一个列表中的项目与另一个列表中的项目进行匹配

> ID：14842729
> 
> 赞同：2
> 
> 时间：2013-02-12T22:07:09.710
> 
> 标签：python

在没有一大堆“for”和“if”循环的情况下，无法找到一个 python 解决方案来匹配一个列表中的元素与另一个列表中的元素。我希望找到更好的方法来做到这一点。我有一些大的迭代循环，它们通过多个列表来执行匹配。在比赛中，我希望删除列表中的元素。这里有两个例子：

```
def score_and_retweet(auth):
    api = tweepy.API(auth)
    for tweet in api.home_timeline(count=100, include_rts=0):
        for goodword in tweet_whitelist:
            if goodword in tweet.text and tweet.retweet_count >= 2:
                try:
                    api.retweet(tweet.id_str)
                except tweepy.error.TweepError:
                    error_id = tweet.id_str 
```

和

```
t = time.localtime()
    if t.tm_hour is 14 and (t.tm_wday is 1 or t.tm_wday is 4):
        htmlfiles = glob.glob(html_file_dir+'/*.html')
        for file in htmlfiles:
            for badword in filename_badwords:
                if badword in file:
                    try:
                        htmlfiles.remove(file)
                    except ValueError:
                        error = "already removed" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T22:34:09.180

尝试回答这部分问题`matching elements of one list against elements in another list`可以使用`set()`，例如：

```
a = ['a','b','c','d','g']
b = ['a','c','g','f','z']

list(set(a).intersection(b)) # returns common elements in the two lists 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:23:09.340

不确定它会在性能方面发生多大变化，但您可以编写一个过滤器函数

例如在第二种情况下（如果您正在寻找完全匹配）

```
def fileFilter(f):
    if f in filename_badwords:
        return False
    else:
        return True 
```

然后使用：

```
goodFiles = filter(fileFilter, htmlfiles) 
```

与集合交集相比，它的优点是您可以根据需要使过滤器函数变得复杂（在第一个示例中您有多个条件）

# android - 如何仅过滤 IntelliJ IDE/IDEA 中的特定应用程序 android Logcat 日志？

> ID：14842732
> 
> 赞同：1
> 
> 时间：2013-02-12T22:07:20.497
> 
> 标签：android, filter, intellij-idea, logcat

我最近根据很多关于 IntelliJ 的良好反馈，将我的 ide 从 Eclipse 更改为用于 Android 开发的 IntelliJ ide/idea。

总的来说，一切似乎都很好，但有一件事我无法处理。我可以按应用程序过滤日志。Eclipse 用户知道，当您运行程序时，ide 会为正在运行的应用程序添加一个过滤器。因此，您可以轻松阅读日志，而不会从系统/其他应用程序的日志中发送垃圾邮件。

所以问题是；
有没有按应用程序过滤的选项/方法？

ps：*stackoverflow上有一个与此标题相关的已*[回答](https://stackoverflow.com/questions/12436400/how-to-filter-only-my-application-log-in-intellijs-logcat)问题，但由于效率非常低，因此接受的答案对我或任何其他开发人员来说都不够好。每次重新启动应用程序时都更改 pid 不会浪费时间。

 *也许现在这个问题无法回答，但可以保持开放讨论。

***编辑：*** ***在 IntelliJ ice 的最新版本中，将被称为 Cardea，他们解决了这个问题。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:18:26.403

请[投票支持此功能请求](http://youtrack.jetbrains.com/issue/IDEA-95780)，很可能正是您正在寻找的。

您的问题可能与此问题重复：

*   [IDEA的logcat过滤器可以自动识别正在运行的app吗？](https://stackoverflow.com/q/13539677/104891)*

# java - MidiSystem.getSequencer() 非常慢

> ID：14842735
> 
> 赞同：7
> 
> 时间：2013-02-12T22:07:40.070
> 
> 标签：java, midi

据我所知，我正在创建一个 MIDI 音序器并初始化音序器，我需要使用：

```
Sequencer sequencer = MidiSystem.getSequencer(); 
```

但这会导致我的程序在这个方法调用中启动非常非常慢，最多 2 分钟！

任何想法如何解决这一问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:12:36.037

查看 MidiSystem.getSequencer() 的代码，如果前一个失败，它看起来会尝试连接各种尝试连接下一个的东西。这意味着，如果所有连接尝试都失败到最后一次，则可能需要很长时间。

要测试这个理论，请尝试使用

定序器定序器 = MidiSystem.getSequencer(false);

并查看该行是否执行得更快，如果是，则问题是连接到默认合成器所花费的时间。

当调用 getSequencer() 时，一系列事件是

1.  获取连接到默认设备的默认 Sequencer
2.  返回的 Sequencer 连接到默认的 Synthesizer...
3.  如果没有可用的合成器或无法打开默认值，则连接到默认接收器。通过从 Sequencer 获取 Transmitter 实例并将其设置为 Receiver 来建立连接。

该文本几乎是 javadoc 中的逐字记录，但正如您所见，尝试创建连接的次数足以使调用速度有点慢。

# node.js - Yeoman.js 是否为客户端和服务器配置了东西？

> ID：14842736
> 
> 赞同：1
> 
> 时间：2013-02-12T22:07:55.960
> 
> 标签：node.js, requirejs, yeoman, bower

只想 100% 确定这一点：Yeoman.js 是否配置/帮助为客户端和服务器（node.js）构建东西？

例如：我看到它引用了 Require.JS。我认为这意味着它可以使用 Bower 处理在服务器上获取依赖项（用于客户端），创建一个 Json 文件，用作客户端上 Require.js 的输入，以便客户端知道要哪些文件下载？

作为一个附加步骤，它可能会通过 Grunt（一些 sprockets 扩展）来根据一些配置来缩小和连接 javascript。正确的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:59:11.710

好的，重点是客户端。

Paul Irish 的精彩演讲介绍了 Yeoman： [http ://www.youtube.com/watch?v=Mk-tFn2Ix6g](http://www.youtube.com/watch?v=Mk-tFn2Ix6g)

# ruby-on-rails-3 - rake db:migrate 显示我的表没有变化

> ID：14842741
> 
> 赞同：0
> 
> 时间：2013-02-12T22:08:02.857
> 
> 标签：ruby-on-rails-3, rails-migrations

我是 RoR 的初学者，只关注 Lynda 上的“Ruby on Rails 3 Essential Training with Kevin Skoglund”。

由于一些错字，所以我被卡住了，我把桌子放到了原来的状态。但是在我这样做之后，我不能再改变我的桌子了。无论尝试 rake db:migrate version=0 还是 rake db:migrate ，终端都不会显示任何错误信号。

以下是我的迁移代码

```
 class CreateSections < ActiveRecord::Migration
  def self.up
   create_table :sections do |t|
    t.integer "pages_id"    
    t.string "name" 
    t.integer "position"
    t.boolean "visible" , :default => false
    t.string "content_type"
    t.string "content"
    t.timestamps
  end
 add_index("sections", "pages_id")

 end

def self.down
drop_table :sections

 end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:11:12.027

您可以使用以下方法删除并重新创建数据库：

```
rake db:reset
rake db:migrate 
```

或者

```
rake db:drop
rake db:create
rake db:migrate 
```

# php - 对一组表名运行 SQL 查询

> ID：14842748
> 
> 赞同：1
> 
> 时间：2013-02-12T22:08:28.287
> 
> 标签：php, sql

我是 SQL 新手，我目前有一个字符串数组，它们代表数据库中表的名称。我想在遍历表名时运行这样的查询：

```
$sql = "UPDATE $tablename SET name = '$name', id ='$id' WHERE rank = '$rank'"; 
```

但是，这不起作用，我读到使用上面的这种方法可能会出现 SQL 注入。

任何人都可以推荐一种解决此问题的方法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:12:18.780

这应该给你一个大致的想法。为了解决 SQL 注入问题，我建议您使用 PDO 或其他库调查准备好的查询。[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

```
foreach($tables as $tablename){
    $sql = "UPDATE $tablename SET name = '$name', id ='$id' WHERE rank = '$rank'";
    // execute query
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:12:54.633

对所有变量使用`mysqli_real_escape_string`函数（最好是`$name`and `$rank`），它将转义任何可能导致 sql 注入的引号。

[功能参考](http://www.php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-12T22:13:51.093

你是对的，你的方法很不安全。

浏览此列表并选择更适合您的：[好的 PHP ORM 库？](https://stackoverflow.com/questions/108699/good-php-orm-library)

# unix - su oracle 和 su - oracle 的区别？

> ID：14842749
> 
> 赞同：3
> 
> 时间：2013-02-12T22:08:30.110
> 
> 标签：unix

简单的问题，有什么区别

`su oracle`和`su - oracle`

我不确定这`-`两个命令的意义是什么。

**更新：**

做了su oracle之后，尝试了which sqlplus，但没有识别出来，但是通过doing `su - oracle`，设置了sqlplus环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:19:32.810

根据手册页

```
 -l      Simulate a full login.  The environment is discarded except for HOME, SHELL, PATH, TERM, and USER.  HOME and SHELL are modified as above.
         USER is set to the target login.  PATH is set to ``/bin:/usr/bin''.  TERM is imported from your current environment.  The invoked shell is
         the target login's, and su will change directory to the target login's home directory.

 -       (no letter) The same as -l. 
```

简而言之，如果您使用，则`su - oracle`切换到用户`oracle`并重置环境。没有`-`，环境不会重置。

例如，没有`-`：

```
#(root) export HELLO=world
#(root) su postgres
$(postgres) echo $HELLO
world
$(postgres) 
```

并与`-`：

```
#(root) export HELLO=world
#(root) su - postgres
$(postgres) echo $HELLO

$(postgres) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:14:14.070

`su - oracle`它启动一个登录 shell，因此使用 oracle 用户环境。W/O 连字符只是更改为用户 oracle 用户；这授予与 oracle 用户相同的权限，因此您可以访问 oracle 拥有的文件/目录。

# pdf - 为什么从扫描的文档中可以提取文本，但不能提取图像

> ID：14842750
> 
> 赞同：1
> 
> 时间：2013-02-12T22:08:39.767
> 
> 标签：pdf, pdfbox, xpdf

我之前在[stackoverflow](https://stackoverflow.com/questions/14617728/using-pdfbox-why-text-can-be-extracted-but-not-image)中问过类似的问题。我想问另一个相关的问题，所以我再次改写原来的问题。

我`PDFBox`用来从 pdf 中提取图像和文本，可在[skydrive](http://www.scribd.com/doc/125197567/Test-pdf)和[scribd](http://sdrv.ms/1193OSR)中找到。我有以下用于提取文本的代码：

```
 PDFTextStripper p = new PDFTextStripper();
 String thistext=p.getText(document); 
```

哪个正确提取了文本。但是，当我尝试使用`ExtractImages`类从同一个 pdf 中提取图像时，生成的图像都是 pdf 的所有页面，而不是实际的图像（应该是 1）。

在我看来，pdf 可能是扫描文档。答案说`the fact that it is scanned is your issue`。我再次尝试使用`pdftotext`and `pdfimages`。文本被提取，但`pdfimages`输出5个图像文件，都是pdf的页面（同`PDFBox`）。

据我所知，光栅图像在 pdf 中存储为 Xobjects。当我用文本编辑器打开 pdf 文件时，我看到了以下 5 行：

```
<< /Type /XObject /Subtype /Image /Name /X /Width 2600 /Height 3799 
```

这可能就是为什么将 pdf`PDFBox`的`XPDF`5 页作为图像文件输出的原因。那么如何从pdf中提取文本？是否有技术文档提到为什么（或如何）可以从这样的文档中提取文本，其中页面“据说”嵌入为 XObjects。我可以在我的报告中引用文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:49:20.397

在检查了您的 PDF 文件后，您的问题评论中的第一个猜测已得到确认...

您的示例文档经过扫描，基本上每页包含一个位图图像。当您放大文档时，您可以快速看到所有内容看起来都相当像素化。

所有图像的分辨率均为 2600x3799，并且是黑白的。

这些图像还经过 OCR 处理，生成的文本已被无形地添加到允许选择、复制和粘贴的页面中。

例如，看一下第 885 页的顶部：

![页面顶部 885](../Images/40ab7e60c763bbeb73eed9a1da216236.png)

它的内容流是这样开始的：

```
1 0 0 1 -0.5998 -0.4801 cm
1 1 1 rg
1 i 
/RelativeColorimetric ri
/GS0 gs
0 0 469.2 684.7 re
f
q
467.9972 0 0 683.8015 0.6014 0.4492 cm
/Im0 Do
Q 
```

此处插入页面图像 /Im0

```
1 0 0 1 0.5998 0.4801 cm
0 0 0 rg
BT
/TT0 1 Tf
3 Tr 9.8 0 0 10.4 35.8002 640.4199 Tm 
```

这里准备添加文本；特别看一下`3 Tr`：此操作将文本呈现模式设置`3`为*既不填充也不描边文本（不可见）。*[（ ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)中的第 9.3.6 节*文本渲染模式*）

```
(A )Tj
/TT1 1 Tf
-0.01 Tc 8.8 0 0 9.5 43.4002 640.4199 Tm
(%gust )Tj 
```

在这里您会看到添加的文本，以“A”和“%gust”开头。这实际上表明 OCR 的结果似乎没有得到适当的检查，因为那应该是“八月”。低质量的文字信息还在继续：

```
A %gust , 1978 SHORT PAPERS 885
where
and also
Similarly for B. Also,
T, = AY-l T
as a result of the adiabatic cooling of the vapour.
Stage 2:
Here a volume of vapour and a volume of liquid I are removed and replaced with an
equal volume of air containing concentrations Y and s of A and B, respectively. Of course,
r or s may either or both be negligibly small, with subsequent simplification. 
```

如您所见，许多特殊字符和公式尚未或未正确识别。

# java - 如何向该数组添加元素？

> ID：14842752
> 
> 赞同：-2
> 
> 时间：2013-02-12T22:08:44.633
> 
> 标签：java, android

有没有办法将新项目添加到这个数组中？

```
 RowMsg RowMsg_data[] = new RowMsg[] {

                    new RowMsg(R.drawable.ic_launcher, "Message 1"),
                    new RowMsg(R.drawable.ic_launcher, "Message 2"),
                    new RowMsg(R.drawable.ic_launcher, "Message 3"),
                    new RowMsg(R.drawable.ic_launcher, "Message 4")

            };

            // here i want add next one element, for example: RowMsg(R.drawable.ic_launcher, "Message 5") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:10:23.800

不可以。您不能将元素添加到数组 - 一旦您创建了数组，它的大小就不能改变。

你最好有一个清单：

```
List<RowMsg> messages = new ArrayList<RowMsg>();
messages.add(new RowMsg(R.drawable.ic_launcher, "Message 1"));
// etc 
```

顺便说一句，将类型信息保存在一个地方更为传统，并且 Java 变量通常采用驼峰式大小写 - 所以即使您*确实*坚持使用数组，最好将其声明为：

```
RowMsg[] rowMsgData = new RowMsg[] {
    ...
}; 
```

（我还建议避免使用缩写，但我们开始了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:13:28.353

如果你***真的***需要`RowMsg_data`成为一个*数组*做

```
RowMsg_data = new ArrayList<RowMsg>(Arrays.asList(RowMsg_data))
               .add(new RowMsg(R.drawable.ic_launcher, "Message 5"))
               .toArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:56:35.497

尝试

```
 RowMsg_data = Arrays.copyOf(RowMsg_data, RowMsg_data.length);
    RowMsg_data[RowMsg_data - 1] = new RowMsg(R.drawable.ic_launcher, "Message 5"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T22:10:10.113

如果您使用`ArrayList`，那么您不必重新分配另一个更大的数组并从第一个数组复制，这一切都由`ArrayList`.

这是. [_](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)`ArrayList`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T22:10:24.103

初始化后不能更改数组的大小。请改用`List`例如`ArrayList<RowMsg>`。

# android - 生成的音频正弦波的持续时间

> ID：14842754
> 
> 赞同：2
> 
> 时间：2013-02-12T22:08:49.540
> 
> 标签：android, audio

我正在尝试生成频率为 1000 的 5 秒正弦波声音。我编写了以下代码

```
int sampleRate = 44100;
int freqOfTone = 1000;
AudioTrack track;
// 5 seconds
short samples = new short[sampleRate*5];
track = new AudioTrack(AudioManager.STREAM_MUSIC,
         sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO,
                                      AudioFormat.ENCODING_PCM_16BIT, samples.length,
                                      AudioTrack.MODE_STATIC);

double angle = 0;
double increment = (2 * Math.PI * freqOfTone / sampleRate); // angular increment 

for (int i = 0; i < samples.length-1; i++) {
          samples[i] =   (short) (Math.sin(angle) * Short.MAX_VALUE);
          angle += increment;
    }
track.write(samples, 0, samples.length); // write data to audio hardware 
track.play(); 
```

声波长度只有2.5秒，我觉得应该是5秒。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:24:14.973

请参阅参考资料。

AudioTrack 构造函数的第 5 个参数是“bufferSizeInBytes”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:23:36.200

是`track.play();`同步的还是异步的？如果是后者，您可能正在结束程序并在它有机会完成之前将其关闭。您可以在末尾尝试“按任意键”或其他暂停来确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:42:58.087

这似乎是正确的行为，因为您指定了 a `ENCODING_PCM_16BIT`，如果您将其更改为，`ENCODING_PCM_8BIT`您将获得 5 秒的播放时间。

# javascript - 信息窗口不打开（GoogleMaps API v3）

> ID：14842755
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:08:54.177
> 
> 标签：javascript, google-maps-api-3

我非常感谢这个论坛的帮助。所以我要在地图上带上不同的标记组，并使用切换功能，效果很好。

不再起作用的是我的事件监听器用于打开标记信息窗口。

当我运行以下代码并单击其中一个标记时，它总是会弹出数组最后一个标记的信息窗口。所以该机制有效，但似乎不再有迭代。

我想了很多关于这个问题，但我没有得出结论。感谢您的帮助。

这是代码

```
 var deutschland = new google.maps.LatLng(51,9);

 function initialize(){

  var mapOptions = { zoom: 6,
                     center: deutschland,
                     streetViewControl: true,
                     scaleControl: true,
                     mapTypeControl: true,
                     mapTypeId: google.maps.MapTypeId.ROADMAP }

 var map = new google.maps.Map(document.getElementById("map-container"),mapOptions);

 lat_data = [

 ['mid',50.0010400,9.0730700,'company1','marker.png','infowindow text 1'],
 ['mid',50.2010057,8.2592738,'company2','marker.png','infowindow text 2'],
 ['West',50.7430120,7.1264100,'company3','marker_green.png','infowindow text 3'], 
  ....

 ];

   markers = [];
   var i, newMarker;

   for (i = 0; i < lat_data.length; i++) {

    var infowindow = new google.maps.InfoWindow({
       content: lat_data[i][5]
   });

var shadow = new google.maps.MarkerImage('http://maps.google.com/mapfiles/shadow.png,
   new google.maps.Size(37,32),
   new google.maps.Point(0,0),
   new google.maps.Point(0,32));

var image = 
new google.maps.MarkerImage('http://maps.google.com/mapfiles/'+lat_data[i][4],
   new google.maps.Size(20,32),
   new google.maps.Point(0,0),
   new google.maps.Point(0,32));

 newMarker = new google.maps.Marker({
   position: new google.maps.LatLng(lat_data[i][1], lat_data[i][2]),
   map: map,
   title: lat_data[i][3],
   icon: image,
   shadow: shadow
 });

 newMarker.category = lat_data[i][0];
 newMarker.setVisible(true);

   google.maps.event.addListener(newMarker,'click',function(){
     infowindow.open(map,newMarker);

  });
  google.maps.event.addListener(map,'click',function(){
      infowindow.close(map,newMarker);
  });

 markers.push(newMarker);
 }

 }

function displayMarkers(category) {
  var i;

 for (i = 0; i < markers.length; i++) {
   if (markers[i].category == category) {
     if (markers[i].getVisible()) {
          markers[i].setVisible(false); }

    else { markers[i].setVisible(true); } } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:28:24.337

现在我回答我自己的问题（非常酷，我以前从未这样做过！！！）

根据 mozilla.org 关于闭包的教程，我编写了以下代码：

```
 .......
 iw = new google.maps.InfoWindow({
       content: lat_data[i][5]
   });

   function make_open_event_callback(iw){
       return function(){
          iw.open(map,this);
       };
   }
    function make_close_event_callback(iw){
       return function(){
          iw.close(map,this);
       };
   }

   google.maps.event.addListener(newMarker,'click',make_open_event_callback(iw));
  google.maps.event.addListener(map,'click',make_close_event_callback(iw));

 markers.push(newMarker); 
```

# android - Android - 无法使用 v4 片段更改布局

> ID：14842758
> 
> 赞同：0
> 
> 时间：2013-02-12T22:09:02.403
> 
> 标签：android, layout, android-fragments, visibility, oncreate

我的用户应该能够在我的应用程序中更改（使用首选项）界面的外观（在视觉上动态启用和禁用某些布局）。

我正在使用 v4 ViewPager（确切地说是 PagerTabStrip）并试图在 onResume() 方法中更改它，就在用户关闭“设置菜单”以返回应用程序之后。

我可以通过这种方式更改变量，但似乎无法更改任何布局（我曾经使用 TabHosts，这非常有效）。如果我在 onCreateView() 方法中调用此方法，一切正常，但我不希望我的用户在任何更改可见之前强制关闭应用程序。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = null;
    vContainer = container; // global variable
    switch (mCurrentPage) {
    case 1:
        v = inflater.inflate(R.layout.lifepoints_layout,
                container, false);
        // irrelevant code
        InputStyleType = (LinearLayout) v
                .findViewById(R.id.llInputEditText);
        InputStyleButtons = (TableLayout) v
                .findViewById(R.id.tlInputButtons);

        InitializePreferences(); // <- this method
        break;
    case 2:
        // irrelevant code
        break;
    default:
        break;
    }
    return v;
} 
```

这完美地工作，因为它应该。但是，当通过 onResume() 调用代码时，程序崩溃了！

```
@Override
public void onResume() {
    super.onResume();
    if (isPaused)
        InitializePreferences();
    isPaused = false;
} 
```

这是方法本身：

```
public void InitializePreferences() {
    SharedPreferences getPreferences = PreferenceManager
            .getDefaultSharedPreferences(getActivity().getBaseContext());
    prefInput = getPreferences.getBoolean("pref_input", true);
    prefFb = getPreferences.getBoolean("pref_fb", false);

    if (prefInput) {
        InputStyleType.setVisibility(View.GONE);
        InputStyleButtons.setVisibility(View.VISIBLE);
    } else {
        InputStyleButtons.setVisibility(View.GONE);
        InputStyleType.setVisibility(View.VISIBLE);
    }
} 
```

我已经尝试了很多，但似乎没有任何效果。除非从 onCreateView 直接调用它，否则我似乎无法更改任何布局，这似乎不正确。

**编辑 1**

我已经完全分析了我的方法，它被正确调用并且我已经用一些变量进行了测试。一切正常，直到我尝试更改用户可见的内容（祝酒词工作得很好）。

**编辑 3**

删除了 Edit 2，这就是我的代码目前所在的位置。它仍然无法正常工作，实际上有点混乱。我认为答案并不遥远。

```
public void InitializePreferences() {
    SharedPreferences getPreferences = PreferenceManager
            .getDefaultSharedPreferences(getActivity().getBaseContext());
    prefInput = getPreferences.getBoolean("pref_input", true);
    prefFb = getPreferences.getBoolean("pref_fb", false);

    if (isPaused) {
        getActivity().getWindow().getDecorView().invalidate();

        LayoutInflater inflater = (LayoutInflater) getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflater.inflate(R.layout.lifepoints_layout, vContainer,
                false);

        InputStyleType = (LinearLayout) v.findViewById(R.id.llInputEditText);
        InputStyleButtons = (TableLayout) v
                .findViewById(R.id.tlInputButtons);

        InputStyleType.invalidate();
        InputStyleButtons.invalidate();
    }

    if (prefInput) {
        InputStyleType.setVisibility(View.GONE);
        InputStyleButtons.setVisibility(View.VISIBLE);
    } else {
        InputStyleButtons.setVisibility(View.GONE);
        InputStyleType.setVisibility(View.VISIBLE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:21:29.940

我认为您需要使您的观点无效。尝试将`InputStyleType.invalidate()`和添加`InputStyleButtons.invalidate()`到 InitializePreferences 方法。您可能还需要使包含 InputStyleType 和 InputStyleButtons 的视图父级无效。

**编辑：**在 onResume() 回调中试试这个：

```
LayoutInflater inflater = getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
inflater.inflate(R.layout.lifepoints_layout,
            container_2, false); 
```

为了完成这项工作，请创建一个全局 ViewGroup 变量并将其值设置为`container`onCreateView 回调中的值。

```
container_2 = container; 
```

# jquery - 有没有办法在每个元素实例上取消绑定委托事件？

> ID：14842762
> 
> 赞同：2
> 
> 时间：2013-02-12T22:09:14.323
> 
> 标签：jquery, jquery-on, jquery-delegate

我需要做的是`jQuery.one`使用委托获得每个匹配元素的功能。

如您所见，单击“Baz”或“Bat”的链接会多次附加“（已删除）”。另一方面，单击“Foo”的链接只会执行一次代码，但也会为“Bar”禁用它（反之亦然）。

小提琴：http: [//jsfiddle.net/JcmpN/](http://jsfiddle.net/JcmpN/)

我想要发生的是，单击其中任何一个都会执行该元素的处理程序，但会使其他元素保持原样，直到它们也被单击一次。

HTML：

```
<ul id="product-list">
  <li>
    <span class="product-name">Foo</span>
    <a href="#remove-foo" class="removeWithOne">Remove Product</a>
  </li>
  <li>
    <span class="product-name">Bar</span>
    <a href="#remove-bar" class="removeWithOne">Remove Product</a>
  </li>
  <li>
    <span class="product-name">Baz</span>
    <a href="#remove-baz" class="removeWithOn">Remove Product</a>
  </li>
  <li>
    <span class="product-name">Bat</span>
    <a href="#remove-bat" class="removeWithOn">Remove Product</a>
  </li>
</ul> 
```

jQuery：

```
// this version removes the handler as soon as any instance is clicked!
$('#product-list').one('click.productRemoveOne', 'a.removeWithOne', function (e) {
  var $this = $(this),
      $name = $this.siblings('span.product-name');

  e.preventDefault();

  $name.text($name.text() + ' (removed)');
});

// this one executes the handler multiple times!
$('#product-list').on('click.productRemoveOn', 'a.removeWithOn', function (e) {
  var $this = $(this),
      $name = $this.siblings('span.product-name');

  e.preventDefault();

  $name.text($name.text() + ' (removed)');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:17:47.377

只需使元素不再匹配选择器：http: [//jsfiddle.net/JcmpN/3/](http://jsfiddle.net/JcmpN/3/)

```
$('#product-list').on('click.productRemoveOn', 'a.removeWithOn:not(.ignore)', function (e) {
  var $this = $(this).addClass("ignore"),
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T10:29:13.943

将 ID 放在各个跨度上，然后在您的处理程序中添加：

```
rowref=$(this).attr("id");
$('#'+rowref).click(function(){event.stopImmediatePropagation()} 
```

保持委托处理程序完好无损，但在事件到达之前拦截事件。

# makefile - 我可以以某种方式将 $(RM) $(PREFIX)/bin/$(PROGS) 作为 make 卸载目标吗？

> ID：14842763
> 
> 赞同：2
> 
> 时间：2013-02-12T22:09:16.247
> 
> 标签：makefile, uninstallation

我意识到为什么我没有工作，因为从本地目录中删除了`PROGS = ltest makefiletest`。`$(PREFIX)/ltest``makefiletest`

有没有办法在单行中做到这一点，还是我必须一个一个地指定所有目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:11:30.110

addprefix 函数是为这个确切的用例设计的：

```
$(RM) $(addprefix $(PREFIX)/bin/,$(PROGS)) 
```

# hadoop - DistributedCache 无法访问档案

> ID：14842768
> 
> 赞同：1
> 
> 时间：2013-02-12T22:09:34.680
> 
> 标签：hadoop

我可以使用 DistributedCache 访问单个文件，但无法访问档案。在主要方法中，我将存档添加为

```
DistributedCache.addCacheArchive(new Path("/stocks.gz").toUri(), job.getConfiguration()); 
```

/stocks.gz 在 hdfs 中。在我使用的映射器中，

```
Path[] paths = DistributedCache.getLocalCacheArchives(context.getConfiguration());
File localFile = new File(paths[0].toString()); 
```

抛出异常，

```
java.io.FileNotFoundException: /tmp/hadoop-user/mapred/local/taskTracker/distcache/-8696401910194823450_622739733_1347031628/localhost/stocks.gz (No such file or directory) 
```

我期待 DistributedCache 解压缩 /stocks.gz 并且映射器使用底层文件，但它会引发 FileNotFound 异常。

DistributedCache.addCacheFile 和 DistributedCache.getLocalCacheFiles 在传递单个文件时可以正常工作，但是传递存档不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:36:52.270

你能尝试用绝对路径给stocks.gz。

```
DistributedCache.addCacheArchive(new Path("<Absolute Path To>/stocks.gz").toUri(), job.getConfiguration()); 
```

# javascript - 如何编写一个 javascript 正则表达式来检查单个字符，该字符后面可以跟 3 个特定字符以外的任何字符

> ID：14842769
> 
> 赞同：0
> 
> 时间：2013-02-12T22:09:48.713
> 
> 标签：javascript, jquery, client-side

我正在尝试解析这样的长字符串：

```
asfdasdlfkjdk&dasfdas&amp;asdfkjsdakldfjk& 
```

产生以下输出：

```
asfdasdlfkjdk&amp;dasfdas&amp;asdfkjsdakldfjk&amp; 
```

基本上我只需要替换任何未编码为已编码字符串值的＆符号：

```
& => &amp; 
```

我可以用字符串替换来做到这一点，但我会冒着这样的风险：

```
&amp;amp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:12:38.883

你可以写：

```
var result = orig.replace(/&(?!amp;)/g, '&amp;'); 
```

其中`(?!...)`符号表示[零宽度负前瞻断言](http://www.regular-expressions.info/lookaround.html)，意思是“这个位置后面没有`...`.

或者，在您的情况下，您可以编写：

```
var result = orig.replace(/&(?:amp;)?/g, '&amp;'); 
```

这将替换`&amp;`或`&`。`&amp;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:18:18.177

简单的方法（全局更改然后修复异常）：

```
string.replace(/&/g,"&amp;").replace(/&amp;amp;/g,"&amp;"); 
```

或者：

```
string.replace(/&amp;/g,"&").replace(/&/g,"&amp;"); 
```

# sql - 从 HP Fortify 安全中心检索扫描结果

> ID：14842772
> 
> 赞同：1
> 
> 时间：2013-02-12T22:09:54.100
> 
> 标签：sql, security, fortify

我正在尝试提供一种综合方法来检索 HP Fortify 安全中心中每个项目的上次扫描结果。

我已经走了查询 fortifySSC 数据库的路线，但有点不足。有没有人尝试过通过 SQL 查询来做到这一点？

如果需要，我很乐意提供迄今为止的查询。

或者，如果有人对如何通过命令行完成此操作有想法，我也会对此感兴趣。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:45:45.457

我从来没有在 CLI 中通过 SQL 命令执行此操作。但是有一个名为 fortifyclient 的实用程序能够从项目中下载最新的 FPR。如果您想使事情自动化，fortifyclient 可以处理基于令牌的身份验证。在我们的 CI 环境中完美地为我们工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T17:40:59.677

我确实通过 SQL Profiler 得到了我需要的查询，所以我就是这样解决这个问题的。

# excel - 时间值（“23:50”）

> ID：14842776
> 
> 赞同：1
> 
> 时间：2013-02-12T22:10:04.533
> 
> 标签：excel, vba

这简直是​​疯了。

我有一个单元格（在 excel 中），我在其中输入“23:50”（不带引号）。接下来，选择此单元格后，我转到即时窗口并键入

msgbox activecell = timevalue("23:50")

..它给了我“错误”！

对于其他所有内容，我得到 TRUE，例如单元格中的 23:49 或 23:51（或任何其他时间）以及相应的代码中，但 23:50 无缘无故地崩溃了。

此行是更大代码的一部分，其中该条件需要为 TRUE 才能执行其余部分。在 Win 7 上使用 Excel 2007。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:37:47.313

用这个代替测试：

```
timevalue(activecell.text) = timevalue("23:50") 
```

您的不匹配可能是由于数字等价物不完全匹配：

```
 activecell.value = 0.99305555555555_5_ 
```

但

```
cdbl(timevalue("23:50"))=0.99305555555555_6_ 
```

# css - CSS：在背景图像上更改光标

> ID：14842778
> 
> 赞同：8
> 
> 时间：2013-02-12T22:10:12.410
> 
> 标签：css, background-image, mouse-cursor

我有一个背景图像作为 CSS 中 body 类的一部分：

```
body.soon1 {
    background-color: white;
    background-image: url(soon1a.png);
    background-position: center;
    background-repeat: no-repeat;
} 
```

然后稍后我有一个 javascript 函数将更改 body 类。

我在背景中有图像的原因是当脚本激活时，背景颜色和背景图像将同时发生变化，您无法选择图像。

是否可以仅在将鼠标悬停在背景图像上时更改光标类型？我明白我可以把

```
cursor: pointer; 
```

在正文样式中，但这会使光标出现在整个页面上。

当前，您可以查看[实时页面，](http://www.paramesis.com)当您单击页面上的任意位置时，背景会发生变化。

编辑：我现在有一些适合我的东西。我添加了一个居中的 div，其中没有任何内容：

```
div.clickme {
    width:300px;
    height:400px;
    position:absolute;
    left:50%;
    top:50%;
    margin:-150px 0 0 -200px;
    cursor: pointer;
} 
```

这对我有用，因为我可以设置自己的任意区域，但如果有人有更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T04:07:31.327

将图像设置为背景图像确实没有令人信服的理由。将图像放在两个包装器中会更好地为您服务（无论视口如何，都需要保证垂直和水平绝对居中）。

您可以通过使用对象填充数组来扩展数组，以便它可以保存图像和主体样式的可能值。这样，即使您想稍后添加其他更改，您也可以使用相同的方法（循环遍历数组）来挑选出您想要的所有更改。

此外，虽然 Web 浏览器的标准相当宽松，但符合简单的 HTML 5 要求并仍然保留功能确实是微不足道的。

最后，我强烈建议您避免使用我所说的“时髦编码”。虽然用晦涩的名称命名函数、变量*等很有趣，以使少数检查源代码的人感到高兴，但这会导致不必要的钝化语言和较低的可维护性。*简而言之，即使您是唯一的维护者，这也是一种不好的做法。

根据下面的这些评论（带有缩进清理）观察您的源代码的新版本。

```
<html>
<head>
    <title>Something Amazing Will Happen</title>
    <style type="text/css">
        body.light {
            background-color: white;
        }
        body.dark {
            background-color: black;
        }
        div.outside-wrapper {
            position: absolute;
            top: 50%;
            width: 100%;
            height: 1px;
            overflow: visible;
        }
        div.inside-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 381px;
            height: 393px;
            margin: -197px 0 0 -191px;
            cursor: pointer;
        }
     </style>
     <script type="text/javascript">
         styleIndex = 0;
         var states = [{style: "light", image: "soon1a.png"}, {style: "dark", image: "soon2a.png"}];
         function nextStyle() {
             if (++styleIndex >= states.length)
                 styleIndex = 0;
             var state = states[styleIndex]; 
             document.body.className = state.style;
             document.getElementById("clickme").src = state.image;
         }
         var tap = true;
         document.addEventListener('touchstart',function(e) {
             tap = true;
         });
         document.addEventListener('click',function(e) {
             nextStyle()
             tap = false;
         });
         document.addEventListener('touchmove',function(e) {
             tap = false;
         });
         document.addEventListener('touchend',function(e) {
             if(tap)
                 nextStyle();
         });
    </script>
</head>
<body class="light">
    <div class="outside-wrapper">
        <div class="inside-wrapper">
        <img src="soon1a.png" id="clickme">
        </div>
    </div>
</body>
</html>
<!-- Don't ask me what it is. --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:12:27.813

试试这个

```
body.soon1 {
    background-color: white;
    background-image: url(soon1a.png);
    background-position: center;
    background-repeat: no-repeat;
}
body.soon1:active{
    cursor: pointer;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:44:51.393

你可以做的是，把`cursor: pointer`身体放在孩子身上并改变光标。做这样的事情：http: [//jsfiddle.net/HSdH3/](http://jsfiddle.net/HSdH3/)

html:

```
<body>
    <div></div>
</body> 
```

CSS：

```
body {
    background: red;
    width:100%;
    height: 100%;
}
body:hover {
    cursor: pointer;
}
div {
    width: 300px;
    height: 300px;
    margin: 0 auto;
    background: white;
}
div:hover {
    cursor: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T23:59:07.507

像这样的东西应该工作：

`<div id="myDiv" style="cursor: pointer">`

另一种选择是使用 jQuery，尽管这样做可能有点矫枉过正。无论如何，这就是它的样子：

```
$(document).ready(function(){
    $("#myDiv").hover(function() {
        $(this).css('cursor', 'pointer');
    });
}); 
```

在这里查看：http: [//jsfiddle.net/K5fex/](http://jsfiddle.net/K5fex/)

# ios - iOS：如何在上面有 CALayer 的地图上的标记上捕捉点击事件？

> ID：14842789
> 
> 赞同：0
> 
> 时间：2013-02-12T22:10:37.230
> 
> 标签：ios, objective-c, cocoa-touch

我有一个`mapView`（RouteMe mapView），上面有注释（标记）。
在 mapView 上有一个`touchesEnded`函数，我通常在该函数上捕获所有事件。一些标记在它们上面有一个附加层。该层有一些动画图像，据我所知，这是我可以在标记顶部显示这些动画图像的唯一方法。

问题是我不知道如何拦截在其上具有该层的标记上的触摸。当我测试命中时，`touchesEnded`我识别出一个`CALayer`类而不是一个`RMMArker`类（显然，因为该层位于标记的顶部，因此首先拦截事件）。轻按顶部 CALayer 后如何到达标记？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:09:38.957

Hackish 解决方法：创建 RMMapLayer 而不是 CALayer。请记住在子图层上设置注释以使标注之类的东西起作用，例如在您的 RMMapLayer 子类中：

```
RMMapLayer *sublayer = [[RMMapLayer alloc] init];
sublayer.annotation = ann;
sublayer.contents = (id)img2.CGImage;
sublayer.contentsScale = img2.scale;
sublayer.position = CGPointMake(CGRectGetWidth(self.bounds)/2, CGRectGetHeight(self.bounds)/2);
sublayer.bounds = CGRectMake(0, 0, img2.size.width, img2.size.height);
[self addSublayer:sublayer]; 
```

我不知道这有多少其他东西有可能破坏，所以你可以关注这个问题的任何更新： [https ://github.com/mapbox/mapbox-ios-sdk/issues/190](https://github.com/mapbox/mapbox-ios-sdk/issues/190)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:40:42.110

您可以指示触摸通过。看看这个问题：[如何单击透明 UIView 后面的按钮？](https://stackoverflow.com/questions/3046813/how-can-i-click-a-button-behind-a-transparent-uiview/4010809#4010809)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:41:34.687

由于 CALayer 位于 CALAyer 之上，因此只需访问它的祖先`blockingLayer.superlayer`。
通过检查祖先，我可以拥有我需要的一切。
这解决了问题。

# ios - 来自 Splitview 控制器加载的图像的 iOS 元数据

> ID：14842790
> 
> 赞同：0
> 
> 时间：2013-02-12T22:10:39.027
> 
> 标签：ios, image, metadata

我有一个显示图像列表的 SplitviewController。单击一个时，它将显示在主屏幕上，我想在其下方显示此图像的元数据。我的图像由一个自写的类管理，该类将它们存储为 UIImages。我有 4 张示例图片，它们只是作为 Ressource 文件嵌入并通过

```
NSString* pathToImageFile = [[NSBundle mainBundle] pathForResource:imageName
                                                                ofType:@"jpg"];
UIImage* img = [UIImage imageWithContentsOfFile:pathToImageFile]; 
```

用户可以选择通过 imagePicker 从库或相机中将图片添加到此列表中。

现在，当用户在表中选择一行时，我需要一种访问图像元数据的方法。我知道 UIImages 不携带任何元数据，但是有没有办法访问底层 jpg 并从那里检索元数据？主要问题是我有三个不同的图像来源（应用程序目录、相册、相机）。或者我是否需要重写我的图像存储类，它必须跟踪我的元数据或我的 URL 以及图像？以下是我的 didSelectRow 方法，我想在其中添加一个方法来检索所选图像的元数据。

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     UIImage *img = [[[ImageStore sharedStore] getAllImages] objectAtIndex:[indexPath row]];
     self.detailViewController.detailItem = img;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:35:07.663

如果它在 app 目录中，您可以直接读取该文件。这里有代码可以使用`CGImageSource`.

[http://blog.depicus.com/index.php/2011/05/07/getting-exif-data-from-images-on-ios/](http://blog.depicus.com/index.php/2011/05/07/getting-exif-data-from-images-on-ios/)

您使用的照片库`ALAssetLibrary`。最终，您将深入到`ALAssetRepresentation`具有元数据属性的 。

对于相机图片，老实说，如果不先将其写入磁盘（照片库或应用程序目录），我并不完全确定如何做到这一点。

# objective-c - uinvigation栏上的自定义图像无边框

> ID：14842794
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:11:05.070
> 
> 标签：objective-c, xcode

[barbutton 在第一个视图中的外观](https://www.dropbox.com/s/mx7m5j7f6c4x70i/Screen%20Shot%202013-02-12%20at%204.53.32%20PM.png)

我正在尝试创建自定义 barbutton 项目，如无边框所示。我做到了，但在下一个视图中，它有一个不同的 rightbarbutton 项目，并且前一个 rightbarbutton 项目重叠。谁能帮帮我吗。

[第一个视图的 barbutton 与下一个视图的 barbutton 项目重叠的方式](https://www.dropbox.com/s/09d56vxqfpdyqwy/Screen%20Shot%202013-02-12%20at%205.00.19%20PM.png)

代码如下：

` UIButton *refreshButton = [[UIButton alloc] initWithFrame:CGRectMake(285, 9, 27, 27)];

```
[refreshButton setImage:[UIImage imageNamed:@"Refresh_Icon.png"]   forState:UIControlStateNormal];

[refreshButton addTarget:self action:@selector(refresh:) forControlEvents:UIControlEventTouchUpInside];

[self.navigationController.navigationBar addSubview:refreshButton];` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:27:13.653

尝试设置 self.navigationItem.rightBarButtonItem = NO; 在 VC 的 viewDidLoad 方法中。

# android - Android 上的低延迟音频播放

> ID：14842803
> 
> 赞同：41
> 
> 时间：2013-02-12T22:11:33.187
> 
> 标签：android, audio, opensl

我目前正在尝试最小化一个简单应用程序的音频延迟：

我在 PC 上有一个视频，我正在通过 RTP 将视频的音频传输到移动客户端。使用非常相似的缓冲算法，我可以在 iOS 上实现 90ms 的延迟，但在 Android 上却是可怕的 ±180ms。

我猜这种差异源于Android 上[众所周知的](http://code.google.com/p/android/issues/detail?id=3434)延迟[问题](http://audioprograming.wordpress.com/2012/12/02/an-update-on-the-latency-issue/)。

然而，在阅读了一会之后，[我发现了这篇文章](http://createdigitalmusic.com/2012/07/android-high-performance-audio-in-4-1-and-what-it-means-plus-libpd-goodness-today/)，其中指出：

1.  自 Android 4.1/4.2 起，某些设备可以使用低延迟音频。

2.  使用 libpd 可以实现低延迟音频[，它是 Android 的纯数据库](http://libpd.cc/)。

我有 2 个问题，与这 2 个陈述直接相关：

1.  在哪里可以找到有关 Jellybean 中新的低延迟音频的更多信息？[这就是我能找到的全部，但它非常缺乏具体的信息](http://developer.android.com/about/versions/jelly-bean.html)。这些更改对我来说应该是透明的，还是我应该实施一些新的类/API 调用以让我注意到我的应用程序中的任何更改？我正在使用 AudioTrack API，我什至不确定它是否应该从这种改进中受益，或者我是否应该研究一些其他的音频播放机制。

2.  我应该考虑使用 libpd 吗？在我看来，这是实现更低延迟的唯一机会，但由于我一直认为 PD 是一种音频合成实用程序，它真的适合从网络流中抓取帧并播放它们的项目吗？ ? 我并没有真正进行任何合成。我走错路了吗？

作为附加说明，在有人提到 OpenSL ES 之前，[这篇文章非常清楚地表明，使用它应该不会改善延迟](http://mobilepearls.com/labs/native-android-api/ndk/docs/opensles/)：

> *“由于 OpenSL ES 是本机 C API，调用 OpenSL ES 的非 Dalvik 应用程序线程没有与 Dalvik 相关的开销，例如垃圾收集暂停。但是，除此之外，使用 OpenSL ES 没有额外的性能优势。在特别是，使用 OpenSL ES 不会导致比平台通常提供的更低的音频延迟、更高的调度优先级等。”*

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-25T02:21:57.337

为了在 Android 4.2.2 版本上实现最低延迟，您应该执行以下操作，从最不明显到最明显排序：

1.  如果可能，请选择支持 FEATURE_AUDIO_PRO 的设备，否则选择支持 FEATURE_AUDIO_LOW_LATENCY 的设备。（“低延迟”是 50ms 一种方式；pro 是 <20ms 往返。）

2.  使用 OpenSL。Dalvik GC 的摊销成本很低，但是当它运行时，它需要的时间比低延迟音频线程所允许的要多。

3.  在缓冲区队列回调中处理音频。系统在比普通用户模式线程具有更有利调度的线程中运行缓冲区队列回调。

4.  将缓冲区大小设为 AudioManager.getProperty(PROPERTY_OUTPUT_FRAMES_PER_BUFFER) 的倍数。否则，您的回调偶尔会在每个时间片中收到两次调用，而不是一次。除非您的 CPU 使用率真的很低，否则这可能最终会出现故障。（在 Android M 上，完全使用系统缓冲区大小非常重要，因为缓冲区处理代码中存在错误。）

5.  使用 AudioManager.getProperty(PROPERTY_OUTPUT_SAMPLE_RATE) 提供的采样率。否则，您的缓冲区会绕过系统重采样器。

6.  永远不要在缓冲区回调中进行系统调用或锁定同步对象。如果必须同步，请使用无锁结构。为获得最佳结果，请使用完全无等待的结构，例如单读单写环形缓冲区。许多开发人员都犯了这个错误，最终会出现不可预测且难以调试的故障。

7.  使用向量指令，例如 NEON、SSE 或目标处理器上的任何等效指令集。

8.  测试和测量您的代码。跟踪运行所需的时间——并记住，您需要知道最坏情况下的性能，而不是平均值，因为最坏情况是导致故障的原因。并且要保守。您已经知道，如果处理音频比播放音频花费更多时间，您将永远无法获得低延迟。但在 Android 上，这一点更为重要，因为 CPU 频率波动很大。您可以将 60-70% 的 CPU 用于音频，但请记住，这会随着设备变热或变冷，或者随着 wifi 或 LTE 无线电的启动和停止等等而改变。

低延迟音频不再是 Android 的新功能，但它仍然需要对硬件、驱动程序、内核和框架进行特定于设备的更改才能实现。这意味着您可以从不同的设备中获得很多不同的延迟，并且考虑到 Android 手机的销售价格有多少不同，可能总会存在差异。查找 FEATURE_AUDIO_PRO 或 FEATURE_AUDIO_LOW_LATENCY 以识别满足您的应用所需延迟标准的设备。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T15:43:20.087

使用 OpenSL ES 时，您应该满足以下要求才能在 Jellybean 和更高版本的 Android 上获得低延迟输出：

*   音频应该是单声道或立体声、线性 PCM。

*   音频采样率应该与输出的本机采样率相同（这在某些设备上实际上可能不需要，因为如果供应商配置`FastMixer` *它*可以重新采样。但在我的测试中我得到了非常明显的）中从 44.1 到 48 kHz 上采样时的伪影`FastMixer`。

*   您`BufferQueue`应该至少有 2 个缓冲区。（此后此要求已放宽。请参阅Glenn Kasten 的[此提交](https://android.googlesource.com/platform/frameworks/wilhelm/+/92e53bc98cd938e9917fb02d3e5a9be88423791d%5E!/)。我不确定它首次出现在哪个 Android 版本中，但猜测是 4.4）。

*   您不能使用某些效果（例如混响、低音增强、均衡、虚拟化……）。

如果可能，`SoundPool`该类还将尝试在`AudioTrack`内部使用 fast （与上述相同的标准适用，但`BufferQueue`部分除外）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T15:21:14.213

从您第 1 点的链接：

> “低延迟音频
> 
> Android 4.2 改进了对低延迟音频播放的支持，从 Android 4.1 版本中使用 OpenSL ES、Soundpool 和音调生成器 API 对音频输出延迟所做的改进开始。这些改进取决于硬件支持——提供这些低延迟音频功能的设备可以通过硬件功能常量来宣传它们对应用程序的支持。”

您的完整引文：

> “表现
> 
> 由于 OpenSL ES 是原生 C API，调用 OpenSL ES 的非 Dalvik 应用程序线程没有与 Dalvik 相关的开销，例如垃圾收集暂停。但是，除此之外，使用 OpenSL ES 并没有额外的性能优势。特别是，使用 OpenSL ES 不会导致比平台通常提供的更低的音频延迟、更高的调度优先级等。另一方面，随着 Android 平台和特定设备实现的不断发展，OpenSL ES 应用程序有望从未来的任何系统性能改进中受益。”

因此，与驱动程序和硬件通信的 api 是 OpenSl（与 Opengl 处理图形的方式相同）。不过，早期版本的 Android 在驱动程序和/或硬件方面的设计很糟糕。这些问题已在 4.1 和 4.2 版本中得到解决和纠正，因此如果 hd 有能力，您可以使用 OpenSL 获得低延迟。

同样，从 puredata library 网站的这篇注释可以明显看出，该库使用 OpenSL 本身来实现低延迟：

> 兼容设备的低延迟支持 适用于 Android 的最新版本 Pd（截至 2012 年 12 月 28 日）支持兼容 Android 设备的低延迟音频。更新副本时，请确保从 GitHub 拉取 pd-for-android 和 libpd 子模块的最新版本。
> 
> 在撰写本文时，Galaxy Nexus、Nexus 4 和 Nexus 10 为音频输出提供了低延迟轨道。为了达到低延迟轨道，应用程序必须使用 OpenSL，并且必须以正确的采样率和缓冲区大小运行。这些参数取决于设备（Galaxy Nexus 和 Nexus 10 以 44100Hz 运行，而 Nexus 4 以 48000Hz 运行；每个设备的缓冲区大小不同）。
> 
> 按照惯例，Pd for Android 尽可能多地涵盖所有这些复杂性，提供对新低延迟功能的访问，同时保持与早期版本的 Android 向后兼容。在底层，Pd for Android 的音频组件将在 Android 2.3 及更高版本上使用 OpenSL，而在 Android 2.2 及更早版本上使用 Java 中的旧 AudioTrack/AudioRecord API。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-07T16:10:48.573

那些对 Android 的 10 毫秒问题（即 Android 上的低延迟音频）更感兴趣的人。我们 Superpowered 创建了 Android 音频路径延迟解释器。请看这里：

[http://superpowered.com/androidaudiopathlatency/#axzz3fDHsEe56](http://superpowered.com/androidaudiopathlatency/#axzz3fDHsEe56)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-10T08:24:09.640

另一个使用的音频延迟和缓冲区大小数据库：

[http://superpowered.com/latency/#table](http://superpowered.com/latency/#table)

源代码：

[https://github.com/superpoweredSDK/SuperpoweredLatency](https://github.com/superpoweredSDK/SuperpoweredLatency)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-09T14:08:34.887

有一个新的 C++ 库[双簧管](https://github.com/google/oboe)有助于减少音频延迟。我在我的项目中使用过它并且效果很好。它具有以下功能，有助于减少音频延迟：

> *   自动延迟调整
> *   选择音频 API（API 16+ 上的 OpenSL ES 或 API 27+ 上的 AAudio）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-19T14:19:20.520

测量 sampleRate 和 bufferSize 的应用程序：[https](https://code.google.com/p/high-performance-audio/source/checkout) ://code.google.com/p/high-performance-audio/source/checkout和[http://audiobuffersize.appspot.com/](http://audiobuffersize.appspot.com/)结果数据库

# php - 根据日期从 mySQL 数据库中递归检索结果

> ID：14842806
> 
> 赞同：0
> 
> 时间：2013-02-12T22:11:45.710
> 
> 标签：php, mysql

我有一个像这样的简单数据库：

```
id int
name varchar(20)
date date // stored as "YYYY-MM-DD HH:MM:SS" 
```

我有一个前端，每当我输入数据时，它总是会插入数据的插入日期。

我想使用 PHP 和 mySQL 像这样返回数据：

```
DATE

id - name // however many of these fall under the same day in the database, are printed
id - name
id - name

DATE

id - name // however many of these fall under the same day in the database, are printed
id - name
etc 
```

我不太确定如何制作一个循环来做到这一点。我能够像这样提取以下数据：

```
 <table class="table">
        <?php
        $sql = mysql_query("SELECT id, name, date FROM database");
        while($result = mysql_fetch_assoc($sql))
        { ?>
            <tr>
                <td colspan="6"><?php echo $result['date']; ?></td>
            </tr>
            <tr>
                <td><?php echo $result['id']; echo $result['name']; ?></td>
            </tr>  
        <?php 
        } ?>
    </table> 
```

这打印（例如）：

```
2008-11-23 08:32:32
id - name
2008-11-23 11:12:06
id - name
2008-11-23 05:42:12
id - name
2008-11-23 07:45:23
id - name 
```

当我想要

```
November 23rd, 2008
id - name
id - name 
```

我知道我需要两个循环，一个循环打印日期，然后另一个循环打印该日期下的所有数据，然后更改一个值以便打印前一天，依此类推，但我不知道如何逐渐减少日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:19:36.697

您必须使用**GROUP BY**子句

```
GROUP BY DATE_FORMAT(date_col, '%Y-%m-%d') 
```

如果当前日期不等于已打印的日期，则在 for 循环中添加日期作为标题。（您必须有一个变量来存储打印的日期）

```
<table class="table">
        <?php
        $sql = mysql_query("SELECT id, name, date FROM database GROUP BY DATE_FORMAT(date, '%Y-%m-%d') order by date ASC");
        $PrevDate = false;
        while($result = mysql_fetch_assoc($sql))
        {
           if($PrevDate!=$result['date']){
 ?>
            <tr>
                <td colspan="6"><?php echo $result['date']; ?></td>
            </tr>
       <? } ?>
            <tr>
                <td><?php echo $result['id']; echo $result['name']; ?></td>
            </tr>  
        <?php 
         $PrevDate = $result['date'];
        } ?>
    </table> 
```

这应该这样做。

# opengl - 防止共面多边形上的 Z 冲突？

> ID：14842808
> 
> 赞同：1
> 
> 时间：2013-02-12T22:11:54.467
> 
> 标签：opengl, rendering, render, polygon

我正在尝试在基于 OpenGL 的渲染器中处理共面多边形上的 Z 冲突。由于遗留问题，我在很多方面都束手无策。主要是由于数据流在旧系统中的工作方式，渲染器必须是短视的。

用户可以在任意位置绘制几何图形，我没有真正的方法来检测他们何时决定重叠两个多边形。使用 glPolygonOffset，我需要具备这些知识来抵消或其他多边形。我也相当确定使用投影矩阵不会有帮助，因为由于数据的共面性质，Z-fighting 来自舍入误差。打开和关闭深度写入也不是一个真正的选择，因为我不知道这个问题何时会在渲染循环中发生。

所以建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:33:46.713

红皮书有一些。例如，您可以首先将所有共面多边形渲染到模板缓冲区中，而无需接触颜色缓冲区（即`glColorMask(0,0,0,0)`），而是进行 Z 测试并更新深度缓冲区。然后轮到深度测试和深度写入，启用颜色写入和模板测试，并按分层顺序渲染多边形；模板缓冲区将应用早期深度测试准备的结果。

# javascript - 单击所有图像时调用函数

> ID：14842809
> 
> 赞同：0
> 
> 时间：2013-02-12T22:12:00.210
> 
> 标签：javascript, html, window, image

我想调用一个打开新链接的函数。我想在点击所有图片后执行此操作。我怎样才能做到这一点？

HTML

```
<!DOCTYPE HTML> 
<html>
<head>
    <meta charset="windows-1252"> 
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">   </script>
        <![endif]--> 
    <title>Date med mig - version b
    </title>
    <script type="text/javascript">
    function newWindow()
    {
        window.location = window.location = "http://www.tv3.se/datemedmig"
    }
    </script>
</head>
    <body>
    <h1>Del 2: Date med mig</h1>    

    <img src="1_c.jpg" id="image1" onclick="this.src='1_o.jpg';" alt="image" />
    <img src="2_c.jpg" id="image1" onclick="this.src='2_o.jpg';" alt="image" />
    <img src="3_c.jpg" id="image1" onclick="this.src='3_o.jpg';" alt="image" />
    <img src="4_c.jpg" id="image1" onclick="this.src='4_o.jpg';" alt="image" />

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:24:40.023

如果您试图在单击任何图像后立即加载一个新窗口，我认为@runfaj 所说的方式可能是最好的，我的理解是您只想在所有图像都完成后才这样做点击？

如果是这种情况，这里有一个选项（这可能不是最有效的）

```
//Assuming there are 4 images
var hasBeenClicked = [false,false,false,false]

//To be called when each image is clicked
function imageClicked(whichImage){ 

    this.src = "'"+whichImage+"_o.jpg'"

    //set this position in the array equal to true
    hasBeenClicked[whichImage] = true

    // if the array is completely true (every image has been clicked)
    // call the newWindow function
    if(hasBeenClicked == [true,true,true,true]){
          newWindow();
    }

} 
```

然后当您创建图像时：

```
<img src="1_c.jpg" id="image1" onclick="imageClicked(1);" alt="image" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:19:40.867

你可以通过三种方式做到这一点：

jQuery：

```
$('img').click(newWindow); 
```

排队：

```
<img src=..... onclick="newWindow()" /> 
```

常规的 JavaScript：

获取所有标签：

```
var imgs = document.getElementByTagName('img'); 
```

然后为每个事件添加一个事件监听器（谷歌​​它有很多不同的例子）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:47:59.057

有一个 onclick 功能，触发每个图像，在图像标签上设置一个新属性。然后对所有图像运行循环以检查它们是否都有标签。如果是这样，请打开新窗口。例如：

```
$('img').click(function() {
    $(this).data('was-clicked', true);

     var all_clicked = true;
     $('img').each(function() {
         if($(this).data('was-clicked') != true) {
             all_clicked = false;
             break;
         }
     });

     if(all_clicked == true) newWindow();
 }); 
```

请注意，此代码未经测试，可能存在语法/语义错误。此外，您可能并不真的希望用户单击所有图像标签（例如横幅、背景等），因此您应该修改 jquery 选择器以仅过滤您感兴趣的“img”标签，例如 $('#my -画廊img'）...

# javascript - 在 Meteor 生产数据库中找不到用户和其他集合

> ID：14842810
> 
> 赞同：0
> 
> 时间：2013-02-12T22:12:06.777
> 
> 标签：javascript, mongodb, meteor

我正在尝试查看哪些用户注册了我的应用程序。我在终端执行以下操作

```
meteor mongo http://www.myapp.com

use myapp_com

show collections 
```

我得到的只是`system.indexes, system.users, and users`

事实上，我的收藏品比这些还多。

当我这样做的时候`db.users.find({})`

我没有得到任何数据，shell 只是前进到下一个提示符。

这是怎么回事？这是权限问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-20T14:18:09.943

@TimDog 的评论已复制到答案中，因此可以接受：

> 我认为你做的一切都是正确的。几个小时前，流星遇到了一些麻烦，Meteor.com 已经关闭。如果现在这行得通，我不会感到惊讶...

# php - php：将海量数组存储到 mysql 数据库中的建议

> ID：14842813
> 
> 赞同：0
> 
> 时间：2013-02-12T22:12:17.210
> 
> 标签：php, mysql, serialization, multidimensional-array

将大量多维数组存储到 mysql 数据库中的最佳实践是什么？我正在寻找以下方面的答案：

1.  **效率**- 将经常从数据库中请求结果。目前我正在序列化和反序列化。我意识到我可能需要使用`json_encode`/`json_decode`取决于应用程序。
2.  **安全性**——我需要确保任何被传递的数据都能够`json_decode`或`unserialize`正确地传递。我目前在反序列化一个巨大的数组时遇到问题。它返回一个偏移错误。我知道在将其存储到数据库的过程中，某些数据要么损坏，要么有字符在某处引发错误。如何防止这种情况和/或确保数据库的**每个**存储都是正确的？

# xcode - 为什么我的整数范围不起作用？

> ID：14842817
> 
> 赞同：0
> 
> 时间：2013-02-12T22:12:26.473
> 
> 标签：xcode, int

我正在使用体重指数，我想知道为什么我的“范围”系统只将标签设置为一个值。有没有更好的方法来设置它会更好地工作？

```
 int bmiInt = currentBMI;
if ( 0<=bmiInt <= 18.5) {
    weightStatus.text = @"Status: Underweight";
}
if (18.6 <= bmiInt <= 24.9) {
    weightStatus.text = @"Status: Normal weight";
}
if (25 <= bmiInt <= 29.9) {
    weightStatus.text = @"Status: Overweight";
}
if (bmiInt >= 30) {
    weightStatus.text = @"Status: Obese";
} 
```

出于某种原因，即使 bmiInt 不在该范围内，weightStatus.text 也始终等于 @"Status Overweight"。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:21:06.837

`0 <= bmiInt <= 18.5`不做你认为它做的事。比较运算符的返回值是`0`or `1`，表示真假。这个表达式可以重写为`(0 <= bmiInt) <= 18.5`，这意味着在计算第一个比较之后`0 <= bmiInt`，你将得到`0 <= 18.5`or `1 <= 18.5`，它们都计算为`1`，它通过了条件。

对于您的前 3 个条件，这将是正确的，这意味着除非`bmiInt >= 30`评估为真，否则您的标签将始终显示`@"Status: Overweight"`。

你想像这样重写这个

```
if (0 <= bmiInt && bmiInt <= 18.5) {
    ...
} 
```

# ios - iOS - 如何对控件进行分组？

> ID：14842820
> 
> 赞同：3
> 
> 时间：2013-02-12T22:12:34.343
> 
> 标签：ios, xcode

我是 iOS 开发的新手，找不到任何关于如何构建不仅仅是视图控件的 GUI 的好的指南。我需要在与下面链接中的图片类似的彩色区域中对文本、图像和控件进行分组。特别是带有圆角的白色区域的棕色背景正是我所需要的（棕色框架）。

谁能指出我正确的方向？

我的目标是 iOS 5 及更高版本....

[http://www.filemaker.co.uk/products/filemaker-pro/images/whats_new/graphic_ios_ipad_iphone.png](http://www.filemaker.co.uk/products/filemaker-pro/images/whats_new/graphic_ios_ipad_iphone.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:18:17.127

您需要将所有内容都作为 superview 的一部分。请看图片。![在此处输入图像描述](../Images/993d87205c6b884400f73298ed4b4ffb.png)

# svg - 显示图表时不显示节点 ID

> ID：14842822
> 
> 赞同：0
> 
> 时间：2013-02-12T22:12:50.080
> 
> 标签：svg, graphviz, pygraph

我正在显示一个`graph`. 我发现了[属性](http://www.graphviz.org/doc/info/attrs.html)。我使用成功`URL`，`shape`并且`color`。但我也想输出没有 ID 的节点（我的 ID 太长，无法显示）。所以我试图设置`label`为`""`，但仍然`node id`显示在`svg`输出中。我怎样才能防止这种情况？这些是我设置的属性（在`python`）：

```
[ 
  ('label', ''),
  ('URL', 'http://my.url.com'), 
  ('shape', 'octagon'),
  ('color', 'purple'),
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:09:58.813

设置 URL 与空标签冲突。如果给出 URL，则必须配置短标签。

# django - 在 Django 中创建动态表单

> ID：14842825
> 
> 赞同：1
> 
> 时间：2013-02-12T22:12:57.260
> 
> 标签：django, django-forms

我正在处理一个项目，该项目涉及一个带有一些标准字段的表单和一些用户稍后定义的自定义字段。标准形式在 models.py 中的模型上定义。例如：

```
class Order(models.model):
    number = models.TextField()
    date = models.DateField() 
```

然后我使用这个模型创建一个简单的模型表单来填写信息。这是非常标准的 Django。

棘手的是我的用户希望能够向表单添加任意字段。他们希望能够使用管理界面在运行时基本上修改表单并为其添加值。

因此，他们可能需要一个名为“Tracking Number”或类似名称的新文本字段。诀窍是他们有时只需要它，并且他们希望能够动态添加它而不重建整个数据库。

我可以创建一个相当简单的模型来表示自定义字段，如下所示：

```
class CustomField(models.Model):
    type = models.CharField(choices=FIELD_TYPES)
    required = models.BooleanField() 
```

我想我可以将 ModelForm 用于 Order 类并扩展它以添加这些自定义字段。我不确定如何将自定义字段值链接回订单。

我知道这一切听起来可能很奇怪，但实际上它是有道理的。每个用户对表单的需求略有不同，并希望对其进行调整。如果我必须对模型进行硬编码以拥有它们的特定字段，那么我将不得不为每个用户创建一个 fork。那根本无法扩展。相反，如果他们可以通过管理界面简单地添加字段，那么事情就会简单得多。

我觉得这可能已经被外面的人解决了。我根本找不到解决方案。我不可能是唯一一个收到这种要求的人吧？

# matlab - 加速代码 - 矢量化

> ID：14842829
> 
> 赞同：0
> 
> 时间：2013-02-12T22:13:11.257
> 
> 标签：matlab, vectorization, nested-loops

我不太熟悉`vectorization`，但我知道，在`MATLAB`的优势中，代码矢量化可能是最有价值的。

我有这个代码：

```
ikx= (-Nx/2:Nx/2-1)*dk1;
iky= (-Ny/2:Ny/2-1)*dk2;
ikz= (-Nz/2:Nz/2-1)*dk3;

[k1,k2,k3] = ndgrid(ikx,iky,ikz);
k = sqrt(k1.^2 + k2.^2 + k3.^2);
Cij = zeros(3,3,Nx,Ny,Nz);
count = 0;
for ii = 1:Nx
    for jj = 1:Ny
        for kk = 1:Nz
            if ~isequal(k1(ii,jj,kk),0)
                count = count +1;
                fprintf('iteration step %i\r\n',count)
                E_int = interp1(k_vec,E_vec,k(ii,jj,kk),'spline','extrap');
                beta = c*gamma./(k(ii,jj,kk).*sqrt(E_int));
                k30 = k3(ii,jj,kk) + beta*k1(ii,jj,kk);
                k0 = sqrt(k1(ii,jj,kk)^2 + k2(ii,jj,kk)^2 + k30^2);
                Ek0 = 1.453*(k0^4/((1 + k0^2)^(17/6)));
                B = sigmaiso*sqrt((Ek0./(k0.^2))*((dk1*dk2*dk3)/(4*pi)));
                C1 = ((beta.*k1(ii,jj,kk).^2).*(k0.^2 - 2*k30.^2 + k30.*beta.*k1(ii,jj,kk)))./(k(ii,jj,kk).^2.*(k1(ii,jj,kk).^2 + k2(ii,jj,kk).^2));
                C2 = ((k2(ii,jj,kk).*(k0.^2))./((k1(ii,jj,kk).^2 + k2(ii,jj,kk).^2).^(3/2))).*atan2((beta.*k1(ii,jj,kk).*sqrt(k1(ii,jj,kk).^2 + k2(ii,jj,kk).^2)),(k0.^2 - k30.*beta.*k1(ii,jj,kk)));
                xhsi1 = C1 - C2.*(k2(ii,jj,kk)./k1(ii,jj,kk));
                xhsi2 = C1.*(k2(ii,jj,kk)./k1(ii,jj,kk)) + C2;
                Cij(1,1,ii,jj,kk) = B.*((k2(ii,jj,kk).*xhsi1)./(k0));
                Cij(1,2,ii,jj,kk) = B.*((k3(ii,jj,kk)-k1(ii,jj,kk).*xhsi1+beta.*k1(ii,jj,kk))./(k0));
                Cij(1,3,ii,jj,kk) = B.*(-k2(ii,jj,kk)./(k0));
                Cij(2,1,ii,jj,kk) = B.*((k2(ii,jj,kk).*xhsi2-k3(ii,jj,kk)-beta.*k1(ii,jj,kk))./(k0));
                Cij(2,2,ii,jj,kk) = B.*((-k1(ii,jj,kk).*xhsi2)./(k0));
                Cij(2,3,ii,jj,kk) = B.*(k1(ii,jj,kk)./(k0));
                Cij(3,1,ii,jj,kk) = B.*(k2(ii,jj,kk).*k0./(k(ii,jj,kk).^2));
                Cij(3,2,ii,jj,kk) = B.*(-k1(ii,jj,kk).*k0./(k(ii,jj,kk).^2));               
            end
        end
    end
end 
```

一般来说，我可能会避免嵌套`for`循环；尽管如此，`if`关于`k1`价值观的陈述目前正在将我引向经典和老式的代码结构。

我公然想绕过`for`循环的存在，转而采用矢量化和更优雅的解决方案。

任何支持都非常受欢迎。

**编辑**

为了更好地理解代码的预期执行情况，我特此为您提供一些基础知识：

![在此处输入图像描述](../Images/a27c9150ce940075932a823eb29af56d.png)

![在此处输入图像描述](../Images/2804c524f2995429bd74e20f3ff280c4.png)

![在此处输入图像描述](../Images/2e892af07dfb6db291af0da33e5ffa6f.png)

![在此处输入图像描述](../Images/f174617cb9692b9db02c11e0dec9112d.png)

**编辑2**

正如@Floris 建议的那样，我想出了这个替代解决方案：

```
ikx= (-Nx/2:Nx/2-1)*dk1;
iky= (-Ny/2:Ny/2-1)*dk2;
ikz= (-Nz/2:Nz/2-1)*dk3;

[k1,k2,k3] = ndgrid(ikx,iky,ikz);
k = sqrt(k1.^2 + k2.^2 + k3.^2);

ii = (ikx ~= 0);
k1w = k1(ii,:,:);
k2w = k2(ii,:,:);
k3w = k3(ii,:,:);
kw = k(ii,:,:);

E_int = interp1(k_vec,E_vec,kw,'spline','extrap');
beta = c*gamma./(kw.*sqrt(E_int));

k30 = k3w + beta.*k1w;
k0 = sqrt(k1w.^2 + k2w.^2 + k30.^2);
Ek0 = (1.453*k0.^4)./((1 + k0.^2).^(17/6));
B = sqrt((2*(pi^2)*(l^3))*(Ek0./(V*k0.^4)));

k1w_2 = k1w.^2;
k2w_2 = k2w.^2;
k30_2 = k30.^2;
k0_2 = k0.^2;
kw_2 = kw.^2;

C1 = ((beta.*k1w_2).*(k0_2 - 2.*k30_2 + beta.*k1w.*k30))./(kw_2.*(k1w_2 + k2w_2));
C2 = ((k2w.*k0_2)./((k1w_2 + k2w_2).^(3/2))).*atan2((beta.*k1w).*sqrt(k1w_2 + k2w_2),(k0_2 - k30.*k1w.*beta));

xhsi1 = C1 - (k2w./k1w).*C2;
xhsi2 = (k2w./k1w).*C1 + C2;

Cij = zeros(3,3,Nx,Ny,Nz);

Cij(1,1,ii,:,:) = B.*(k2w.*xhsi1);
Cij(1,2,ii,:,:) = B.*(k3w - k1w.*xhsi1 + beta.*k1w);
Cij(1,3,ii,:,:) = B.*(-k2w);
Cij(2,1,ii,:,:) = B.*(k2w.*xhsi2 - k3w - beta.*k1w);
Cij(2,2,ii,:,:) = B.*(-k1w.*xhsi2);
Cij(2,3,ii,:,:) = B.*(k1w);
Cij(3,1,ii,:,:) = B.*((k0_2./kw_2).*k2w);
Cij(3,2,ii,:,:) = B.*(-(k0_2./kw_2).*k1w); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:54:09.100

您可以只进行一次测试，然后创建“只是您需要的元素”的数组。例子：

```
% create an index of all the elements that are worth computing:
worthComputing = find(k1(:)~=0);
% now create sub-arrays of all the other arrays... a little bit expensive on memory,
% but much faster for computation:
kw =  k(worthComputing);
k1w = k1(worthComputing);
k2w = k2(worthComputing);
k3w = k3(worthComputing);

% now we'll compute all the results of the innermost for loop in single statements:
E_int = interp1(k_vec,E_vec,kw,'spline','extrap');
beta = c*gamma./kw.*sqrt(E_int));
k30 = k3w + beta*k1w;
k0 = sqrt(k1w.^2 + k2w.^2 + k30.^2);
Ek0 = 1.453*(k0.^4/((1 + k0.^2).^(17/6))); 
```

% 下一行有`dk1`, `dk2`, `dk3`... 不确定它们是什么？未显示为已初始化。假设标量没有索引。

```
B = sigmaiso*sqrt((Ek0./(k0.^2))*((dk1*dk2*dk3)/(4*pi)));
C1 = ((beta.*k1w.^2).*(k0.^2 - 2*k30.^2 + k30.*beta.*k1w))./(kw.^2.*(k1w.^2 + k2w.^2));
C2 = ((k2w.*(k0.^2))./((k1w.^2 + k2w.^2).^(3/2))).*atan2((beta.*k1w.*sqrt(k1w.^2 + ...
    k2w.^2)),(k0.^2 - k30.*beta.*k1w));
xhsi1 = C1 - C2.*(k2w./k1w);
xhsi2 = C1.*(k2w./k1w) + C2; 
```

% 在接下来的几行中，我正在使用“折叠”剩余索引 % 的技巧，换句话说，Matlab 发现我想访问 C % 中与`ii, jj, kk`之前选择的元素相对应的元素......

```
Cij(1,1,worthComputing) = B.*((k2w.*xhsi1)./(k0));
Cij(1,2,worthComputing) = B.*((k3w-k1w.*xhsi1+beta.*k1w)./(k0));
Cij(1,3,worthComputing) = B.*(-k2w./(k0));
Cij(2,1,worthComputing) = B.*((k2w.*xhsi2-k3w-beta.*k1w)./(k0));
Cij(2,2,worthComputing) = B.*((-k1w.*xhsi2)./(k0));
Cij(2,3,worthComputing) = B.*(k1w./(k0));
Cij(3,1,worthComputing) = B.*(k2w.*k0./(kw.^2));
Cij(3,2,worthComputing) = B.*(-k1w.*k0./(kw.^2)); 
```

上面完全有可能有一两个错字——但这是矢量化的基本方法。

# ios - 从 Yandex API 更改标注的大小

> ID：14842834
> 
> 赞同：1
> 
> 时间：2013-02-12T22:13:27.513
> 
> 标签：ios, objective-c, xcode, mapkit, yandex-api

我需要更改标注的框架，即在 Yandex API 中。也许还有其他方法可以在没有此 API 的方法的情况下减少标注的大小？

![在此处输入图像描述](../Images/4e71fa1f0ff39b5b156a67f70ccf9eff.png)

标注的宽度必须是窗口宽度的 2/3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:39:17.057

GitHub 上有很多自定义标注库。我认为这可能会满足您的需求：

[https://github.com/grgcombs/MultiRowCalloutAnnotationView](https://github.com/grgcombs/MultiRowCalloutAnnotationView)

谷歌一下，你可以找到更多

# html - Bootstrap input-append 在流体网格上不起作用

> ID：14842839
> 
> 赞同：2
> 
> 时间：2013-02-12T22:13:41.970
> 
> 标签：html, css, twitter-bootstrap, input

我正在尝试`input-append`用于流体行内的搜索输入，但不幸的是它似乎无法正常工作，因为它没有缩放到容器的全宽。

这是我的示例代码：

```
<div class="container">
<div class="row-fluid">
<div class="span12">

    <div class="input-append">
    <input class="span12" id="appendedInputButton" type="text">
    <button class="btn" type="button">Go!</button>
    </div>

</div>
</div>
</div> 
```

但是输入不能缩放`span12`. 有谁知道为什么会这样或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:20:51.110

这是一个 jsFiddle：http: [//jsfiddle.net/persianturtle/SXcV3/](http://jsfiddle.net/persianturtle/SXcV3/)

```
#appendedInputButton {
    width:100%;
} 
```

我还建议您将 span12 类用于保存输入的 div，而不是输入本身。

更新：由于 bootstrap 出于美学原因为其按钮添加了一些填充，我将输入按钮宽度设置为 95%，这样在没有水平滚动条的情况下看起来更好。

更新了 jsFiddle：http: [//jsfiddle.net/persianturtle/SXcV3/1/](http://jsfiddle.net/persianturtle/SXcV3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T16:58:56.993

对于按钮上的固定宽度，您可以使用不同的技术

```
.controls { 
    position: relative; 
}

.input-append{
    width: 100%;
}

.input-append input[type="text"]{
    position: absolute;
    width: auto !important;
    margin-right: 42px;
    left: 0px;
    right: 0px;
}

.input-append button{
    width: 42px;
    float: right;
    margin: 0px !important;
    padding: 0px !important;
}

.input-append input[type="text"],
.input-append button{
    height: 42px;
    -webkit-box-sizing: padding-box;
    -moz-box-sizing: padding-box;
    -ms-box-sizing: padding-box;
    box-sizing: padding-box;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:21:43.540

有不必要的`.row-fluid`和`.span12`div。正确的标记是

```
<div class="container">

    <div class="input-append">
    <input class="span12" id="appendedInputButton" type="text">
    <button class="btn" type="button">Go!</button>
    </div>

</div> 
```

[工作小提琴](http://jsfiddle.net/xwScz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T17:19:20.063

我通常尝试通过使用边界框框大小模型来解决 Bootstrap 中的流动性问题。像这样的东西最近对我有用：

```
.input-append{
    width: 100%;
}

.input-append input[type="text"]{
    width: 90% !important;
}

.input-append button{
    width: 10%;
}

.input-append input[type="text"],
.input-append button{
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
} 
```

显然，您希望将所有这些都放在表单的范围内，但是您明白了。

# ajax - 使用 jquery 表单插件上传 ASP.NET MVC Ajax 文件？

> ID：14842842
> 
> 赞同：4
> 
> 时间：2013-02-12T22:13:52.460
> 
> 标签：ajax, asp.net-mvc, file-upload, asp.net-mvc-4

我使用 Jquery Ajax Form Plugin 上传文件。代码：

作者视图模型

```
public class AuthorViewModel
{
    public int Id { get; set; }

    [Required(ErrorMessage = "{0} alanı boş bırakılmamalıdır!")]
    [Display(Name = "Yazar Adı")]
    public string Name { get; set; }

    [Display(Name = "Kısa Özgeçmiş")]
    public string Description { get; set; }

    [Display(Name = "E-Posta")]
    public string Email { get; set; }

    public string OrginalImageUrl { get; set; }

    public string SmallImageUrl { get; set; }
} 
```

形式

```
@using (Html.BeginForm("_AddAuthor", "Authors", FormMethod.Post, new { id = "form_author", enctype = "multipart/form-data" }))
{
    <div class="editor-label">
        <input type="file" name="file" id="file" />
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    ...

    <div class="submit-field">
        <input type="submit" value="Ekle" class="button_gray" />
    </div>
} 
```

脚本

```
<script>
$(function () {
    $('#form_author').ajaxForm({
        beforeSubmit: ShowRequest,
        success: SubmitSuccesful,
        error: AjaxError
    });
});

function ShowRequest(formData, jqForm, options) {
    $(".loading_container img").show();
}

function AjaxError() {
    alert("An AJAX error occured.");
}

function SubmitSuccesful(result, statusText) {
    // Veritabanı işlemleri başarılı ise Index sayfasına
    // geri dön, değilse partial-view sayfasını yenile
    if (result.url) {
        window.location.href = result.url;
    } else {
        $(".authors_content_container").html(result);
    }
}
</script> 
```

控制器

```
[HttpPost]
public ActionResult _AddAuthor(AuthorViewModel viewModel, HttpPostedFileBase file)
{
    ...
    viewModel.OrginalImageUrl = file.FileName;
    ...
} 
```

上面的代码工作正常

问题

如您所见，我将文件与 ViewModel 分开发布。有没有办法将`HttpPostedFileBase file`属性添加到 ViewModel 并将其绑定到视图中的 viewModel，并将其发布到 ViewModel 中的控制器？

我希望，我可以解释。

编辑：

此代码工作正常。我不想分别发布、viewModel 和 HttpPostedFile。我想要这样的东西：（如果可能的话。）

模型

```
public class AuthorViewModel
{
    public int Id { get; set; }

    [Required(ErrorMessage = "{0} alanı boş bırakılmamalıdır!")]
    [Display(Name = "Yazar Adı")]

    HttpPostedFileBase file{ get; set; }
    ...
} 
```

控制器

```
[HttpPost]
public ActionResult _AddAuthor(AuthorViewModel viewModel)
{
    var file = viewModel.file;
    ...
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:30:27.357

Yes you can add AliRıza Adıyahşi.

Here is the property to do it:

```
public HttpPostedFileBase File { get; set; } 
```

Now in you form you should add `enctype` as Xiaochuan Ma said:

```
@using (Html.BeginForm("_AddAuthor", "Authors", FormMethod.Post, new { id = "form_author", enctype="multipart/form-data" }))
{
    <div class="editor-label">
        <input type="file" name="file" id="file" />
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    ...

    <div class="submit-field">
        <input type="submit" value="Ekle" class="button_gray" />
    </div>
} 
```

On you Controller action:

```
[HttpPost]
public ActionResult _AddAuthor(AuthorViewModel viewModel, HttpPostedFileBase file)
{
    if(file!=null)
    {
        viewModel.File=file; //Binding your file to viewModel property
    }
    //Now you can check for model state is valid or not.
    if(ModelState.IsValid)
    {
        //do something
    }
    else
    {
        return View(viewModel);
    }
} 
```

Hope it helps. Is this what you need ?

* * *

**EDIT**

There is nothing additional to do. Its automatically binding to viewModel.

```
[HttpPost]
public ActionResult _AddAuthor(AuthorViewModel viewModel)
{
      var uploadedfile = viewModel.File;// Here you can get the uploaded file.
      //Now you can check for model state is valid or not.
    if(ModelState.IsValid)
    {
        //do something
    }
    else
    {
        return View(viewModel);
    }
} 
```

This worked for me !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:29:18.410

是的，您可以添加`HttpPostedFileBase`到您的 ViewModel，并添加`enctype = "multipart/form-data"`到 HTML 中的 From。

检查此链接： [MVC。HttpPostedFileBase 始终为空](https://stackoverflow.com/questions/8159725/mvc-httppostedfilebase-is-always-null)

# java - 我如何跟踪分数并检查答案？

> ID：14842845
> 
> 赞同：0
> 
> 时间：2013-02-12T22:13:58.757
> 
> 标签：java

```
I trying to make a math quiz game that generates random question and keep track of of what question are wrong and write.

I trying to figure out how to make my program respond if the answer written in the text field is correct or incorrect when I click the JButton `answerbutton`. I'm very new to using `ActionListener`. 
```

好的，所以我让动作监听器开始工作，但是当我输入答案时，它说我的答案是错误的，即使它是正确的。出现的第一个问题很好，但在那之后，它说我所有的答案都是错误的，它仍然不会跟踪我的分数。

```
 import java.util.Scanner;
        import javax.swing.*;
        import javax.swing.border.TitledBorder;

        import java.util.Random;
        import java.util.Scanner;
        import java.awt.*;
        import java.awt.event.ActionEvent;
        import java.awt.event.ActionListener;

        public class PracticeMath extends JFrame {
            Scanner k = new Scanner(System.in);
            Random generator = new Random();
            protected JButton excerciseButton = new JButton( "New Excerices" ); // start new quiz session
            protected JButton answerButton = new JButton( "Answer" ); // set new question, check if the answer correct or wrong
            protected JLabel titlelabel = new JLabel( "How much is: " ); 
            protected int correctcounter = 0; // keep track of correct answer
            protected int wrongcounter = 0; // keep track of wrong answer
            protected int one = generator.nextInt(10);//generate ranodm first number of question
            protected int two = generator.nextInt(10); // generate random second number of question
            protected int i = generator.nextInt(4); // generate random operator
            protected char[] ops = { '+', '-', '/', '*' }; // the math operator
            protected JLabel correctlabel = new JLabel(" Number of Correct Answer: ");
            protected JLabel wronglabel = new JLabel( " Number of  Wrong answers:  " );
            protected JLabel firstnum = new JLabel("" + one); // display first number
            protected JLabel secondnum = new JLabel("" + two); //  display second number
            protected JLabel randomOP = new JLabel("" + ops[i]); display operator
            protected JLabel equalOP = new JLabel("=");
            protected JTextField answerText = new JTextField(); //text area for writing you answer
            protected JLabel questionmark = new JLabel("?");
            protected JLabel correct = new JLabel(""+ correctcounter); // display correct answer
            protected JLabel wrong = new JLabel(""+ wrongcounter); // display wrong answer
            protected JLabel commentlabel = new JLabel(""); // set a comment for how good you doing. optionial

            public PracticeMath(){

                answerText.setColumns(5);

                JPanel Panel1 = new JPanel();// add a panel
                FlowLayout flowLayout = (FlowLayout) Panel1.getLayout();// layout for panel
                getContentPane().setLayout( new FlowLayout( FlowLayout.LEFT, 5, 5)); // set layout
                getContentPane().add(Panel1); // set panel
                titlelabel.setForeground(Color.ORANGE); 
                titlelabel.setFont(new Font("Tahoma", Font.PLAIN, 25));

                Panel1.add(titlelabel);
                firstnum.setFont(new Font("Tahoma", Font.PLAIN, 20));
                Panel1.add(firstnum);

                randomOP.setFont(new Font("Tahoma", Font.PLAIN, 25));
                Panel1.add(randomOP);

                secondnum.setFont(new Font("Tahoma", Font.PLAIN, 20));

                Panel1.add(secondnum);

                equalOP.setFont(new Font("Tahoma", Font.PLAIN, 20));
                Panel1.add(equalOP);

                Panel1.add(answerText);

                questionmark.setFont(new Font("Tahoma", Font.PLAIN, 20));
                Panel1.add(questionmark);

                Panel1.add(commentlabel);

                JPanel Panel3 = new JPanel();
                FlowLayout flowLayout3 = (FlowLayout) Panel3.getLayout();
                flowLayout3.setHgap(15);
                getContentPane().setLayout( new FlowLayout( FlowLayout.LEFT, 5, 5));
                getContentPane().add(Panel3);
                Panel3.add(excerciseButton);
                Panel3.add(answerButton);

                    JPanel panel2 = new JPanel();
                panel2.setBorder(new TitledBorder("Statistic"));
                getContentPane().add(panel2);
                panel2.setLayout(new GridLayout(0, 2, 0, 0));
                panel2.add(correctlabel);
                panel2.add(wronglabel);
                correct.setForeground(Color.GREEN);
                correct.setFont(new Font("Tahoma", Font.PLAIN, 25));
                panel2.add(correct);

                wrong.setForeground(Color.RED);
                wrong.setFont(new Font("Tahoma", Font.PLAIN, 25));
                panel2.add(wrong);

            answerButton.addActionListener( this );

            }

           public static void main(String[] args) {

                PracticeMath frame = new PracticeMath();
                frame.pack();
                frame.setLocationRelativeTo(null);  
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400,400);
                frame.setTitle( "Math Practice");
                frame.setVisible(true);

            }

         public void actionPerformed( ActionEvent ae )
   {
       String answer = answerText.getText();
       int answerint = Integer.parseInt(answer);
       if(one + two == answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));

        }
       else if(one-two == answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }
        else if(one * two ==answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }else if(one/two == answerint){
            correctcounter++;
            System.out.println("correct");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }
        else{
            wrongcounter++;
            System.out.println("wrong");
            firstnum.setText("" + generator.nextInt(11));
               randomOP.setText("" + ops[generator.nextInt(4)]);
               secondnum.setText("" + generator.nextInt(11));
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:29:22.487

为了使您的按钮执行某些所需的操作，就像您说的那样，您需要使用 ActionListener。为此，您需要定义一些实现 ActionListener 接口的类。如果您愿意，该课程可以是您的 PracticeMath 课程。所以这样做：

```
public class PracticeMath extends JFrame implements ActionListener
{...} 
```

当您这样做时，您的 PracticeMath 类将负责为属于 ActionListener 接口的任何方法指定定义；在这种情况下

```
public void actionPerformed( ActionEvent ae )
{
    // put something intelligent here
} 
```

然后，您需要将此 ActionListener 添加到您希望它收听的任何按钮。即

```
answerButton.addActionListener( this ); 
```

使用“this”作为参数，因为您的 ActionListener 是您的 PracticeMath 类。现在，当您按下应答按钮时，将调用您放入 actionPerformed(...) 方法的任何代码。所以你可以在里面评估你的答案。

更新以反映以下评论：

对于 actionPerformed 方法，您的代码应如下所示。

```
public void actionPerformed( ActionEvent ae )
{
    String answer = answerText.getText();
   int answerint = Integer.parseInt(answer);
   if(one + two == answerint){
        correctcounter++;
        System.out.println("correct");
        one = generator.nextInt(11);
        two = generator.nextInt(11);
        // I don't know if you actually store the operator anywhere
        operator = ops[generator.nextInt(4)];
        firstnum.setText("" + one);
           randomOP.setText("" + operator);
           secondnum.setText("" + two);
    }
   else if(one-two == answerint){
       // ... and do the same for the other cases too 
```

当然，这并不能解决您没有检查是否实际使用了正确的运算符这一事实，但这应该可以解决问题，因为第一个答案之后的每个答案都被标记为不正确。

# android - Android：从纵向变为横向时定位按钮

> ID：14842847
> 
> 赞同：2
> 
> 时间：2013-02-12T22:14:22.207
> 
> 标签：android, layout, button, position

我有一个菜单活动，其中有几个定位按钮。在纵向模式下它非常适合我的手机屏幕，但在横向模式下它被破坏了。我知道当我有固定的定位时，这将是结果。谁能告诉我如何定位我的按钮，以便我的活动在横向模式下也保持其形式？谢谢你。

这是我的xml文件：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

<Button
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:background="@drawable/bezpecnost_over"
     android:layout_marginLeft="30dp"
     android:layout_marginTop="50dp"

      />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/kurenie_over"
    android:layout_marginLeft="200dp"
    android:layout_marginTop="50dp"

     />

  <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/osvetlenie_over"
    android:layout_marginLeft="200dp"
    android:layout_marginTop="200dp" 
    android:onClick="obrOsv"    />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:background="@drawable/pohodlie_over"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="200dp"
    />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:18:34.370

> 在纵向模式下它非常适合我的手机屏幕，但在横向模式下它被破坏了。

对于基于相对的布局，这是预期的。开发人员在这种情况下通常会做什么：

*   在 res 下创建一个文件夹，称为`layout-land`
*   在纵向模式下制作一个与布局*同名*的xml （包含在`res/layout`）
*   横向模式的位置。

由于xml文件名相同，所以该activity设置内容视图的时候

```
setContentView (R.layout.my_layout); 
```

将使用`my_layout.xml`文件`layout-land`夹中的文件。

另请阅读Android 文档中的[*Layouts*](http://developer.android.com/guide/topics/ui/declaring-layout.html) & [*Supporting Multiple Screens*](http://developer.android.com/guide/practices/screens_support.html)，它们都有有用的信息，后者讨论了不同的限定符（例如`layout-land`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:18:48.530

因此，您正在使用相对布局通过增加边距来水平间隔按钮？这完全不了解布局是如何工作的。首先将 RelativeLayout 替换为具有方向设置为水平的 LinearLayout，然后去掉所有的边距——边距应该只是元素之间的几个像素。我建议您阅读有关布局如何工作的 Android 教程。

# wpf - 从添加到 InkCanvas 的 Ink Strokes 中删除高光

> ID：14842848
> 
> 赞同：0
> 
> 时间：2013-02-12T22:14:30.737
> 
> 标签：wpf, stroke, inkcanvas

在我的 InkCanvas 的笔画中添加笔画后，它会显示为“突出显示”。虽然它没有被选中，所以当我试图清除选择时它并没有删除突出显示。

这就是我将笔画添加到 InkCanvas 的方式：

```
myInkCanvas.Strokes.Add(newStroke) 
```

如何从新添加的笔划中删除高光？

谢谢，

-弗林尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:06:24.220

我不确定，因为您在这里没有提供太多代码。你可以试试这个：

myInkCanvas.DefaultDrawingAttributes.IsHighlighter = false;

# php - 从首选文本键的 PHP 数组中删除重复值

> ID：14842853
> 
> 赞同：3
> 
> 时间：2013-02-12T22:14:49.350
> 
> 标签：php

当我从 PHP 中的数据库查询中检索结果时，我收到了重复的值，其中一个是整数，一个是列名。array_unique() 在对数组进行排序时，在大多数情况下会在字符串之前以数字键结束，这意味着这将是保留的键。现在，我使用一个函数从数组中删除任何带有数字键的东西，但我并不真正关心这种方法。有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:17:35.137

更改用于从数据库中检索值的命令（例如 mysql_fetch_assoc 而不是 mysql_fetch_array）。无论您现在使用哪种 api，都有一个替代方案可以完全满足您的需求。

**更新：**

在 PDO 中，你会写：

```
$nonumindexes = $res->fetch(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:19:39.063

我怀疑您正在使用 mysqli_fetch_array() 来检索结果？

如果是这样，第二个参数允许您以关联数组、数值数组或两者的形式检索结果。或者您可以简单地使用 mysqli_fetch_row 或 mysqli_fetch_assoc 来获得所需格式的结果。

[http://www.php.net/manual/en/mysqli-result.fetch-array.php](http://www.php.net/manual/en/mysqli-result.fetch-array.php)

# asp.net-mvc-3 - 无法打开或创建 MVC3 项目或解决方案

> ID：14842855
> 
> 赞同：1
> 
> 时间：2013-02-12T22:15:02.397
> 
> 标签：asp.net-mvc-3, visual-studio-2010

这让我发疯，我一直无法在 SO 或其他任何地方找到解决方案。

```
VS2010 Professional SP1
MVC3 installed
NUGET updated
Windows 7 Professional 
```

任何 MVC3 项目都无法加载

> 此安装不支持项目类型。

信息。

疯狂的是，即使模板可用，我什至无法创建新的 MVC3 项目！VS 通过新项目向导项目，然后我得到相同的失败消息：

> 不支持项目类型

我已经重新安装了 VS 和 MVC3。

# three.js - webGL 中的规范化功能不起作用（THREE.js）

> ID：14842857
> 
> 赞同：0
> 
> 时间：2013-02-12T22:15:14.237
> 
> 标签：three.js, webgl, fragment-shader, normalize

我目前正在努力在 THREE.JS 中创建一个着色器，它的作用类似于普通着色器，但使用颜色作为输入来定义它的着色方式。

以下是导致问题的代码，之后是对我这样做的原因以及我认为导致问题的原因的更长解释：

```
fragmentShader: [

        "uniform float opacity;",
        "varying vec3 vNormal;",
        "uniform vec3 color;",
        "void main() {",
            //THIS IS WHAT I THINK IS SCREWING UP EVERYTHING

            //Can I not call normalize with that complex
            //of equations within a normalize function?

            "gl_FragColor = vec4( normalize(color.r + (vNormal.x*color.r)*.5, color.g + (vNormal.y*color.g)*.5, color.b + (vNormal.z*color.b)*.5), opacity );",

        "}"

    ].join("\n") 
```

更长的描述：

我在THREE.shaderLib中基本上使用了和普通shader一样的代码，如下：

```
'normal': {

    uniforms: {

        "opacity" : { type: "f", value: 1.0 }

    },

    vertexShader: [

        "varying vec3 vNormal;",

        "void main() {",

            "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",
            "vNormal = normalize( normalMatrix * normal );",

            "gl_Position = projectionMatrix * mvPosition;",

        "}"

    ].join("\n"),

    fragmentShader: [

        "uniform float opacity;",
        "varying vec3 vNormal;",

        "void main() {",

            "gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",

        "}"

    ].join("\n")

}, 
```

我正在使用的基本上是这个，但是添加了颜色方面，并且在定义新着色器的函数中调用它，如下所示：

```
function assignNewShader(color){
var colorAssign = new THREE.Color(color)

THREE.ShaderLib[color] = {

    uniforms: {

        "opacity" : { type: "f", value: 1.0 },
        "color" : { type: "c", value: colorAssign },

    },

    vertexShader: [

        "varying vec3 vNormal;",

        "void main() {",

            "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",
            "vNormal = normalMatrix * normal;",

            "gl_Position = projectionMatrix * mvPosition;",

        "}"

    ].join("\n"),

    fragmentShader: [

        "uniform float opacity;",
        "varying vec3 vNormal;",
        "uniform vec3 color;",
        "void main() {",

            "gl_FragColor = vec4(color.r + (vNormal.x*color.r)*.5, color.g + (vNormal.y*color.g)*.5, color.b + (vNormal.z*color.b)*.5, opacity );",

        "}"

    ].join("\n")

}

} 
```

您可以看到最大的区别在于“fragmentShader”部分，其中 vNormal 用于使 gl_FragColor 与函数中给出的颜色相似（但不完全相同）。

我的问题是：当一个对象被“缩放”时，这种颜色差异变得越来越大，以至于所有颜色都尽可能亮。因此，我尝试对代码的“fragmentShader”部分执行以下操作：

```
fragmentShader: [

        "uniform float opacity;",
        "varying vec3 vNormal;",
        "uniform vec3 color;",
        "void main() {",

            "gl_FragColor = vec4( normalize(color.r + (vNormal.x*color.r)*.5, color.g + (vNormal.y*color.g)*.5, color.b + (vNormal.z*color.b)*.5), opacity );",

        "}"

    ].join("\n") 
```

当我这样做时，我会遇到大量错误，包括：

错误：0:37：“规范化”：找不到匹配的重载函数错误：0:37：“构造函数”：没有为构造提供足够的数据

WebGL：INVALID_VALUE：attachShader：没有对象或对象被删除

无法初始化着色器 VALIDATE_STATUS：false，gl 错误 [1281]

WebGL：INVALID_OPERATION：getUniformLocation：程序未链接

进入三的 webGL 部分，我绝对是头疼的，但在我看来，这种改变片段着色器的模式应该可以工作。有没有人知道为什么它可能没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:21:50.623

Normalize 采用 vec3 而不是 vec4。

# javascript - 按下提交时将选择的索引移动到文本字段中

> ID：14842861
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:15:40.367
> 
> 标签：javascript, forms, input

我想在按下提交按钮时将选择的索引复制到文本字段中。例如，我想在选择选项时将选择列表中选项的名称“会计”复制到文本框中。这是 HTML：

```
<form action = "">
    <select name = "job_term_cat">
      <option value="----">--Select--</option>
      <option value="roma">Accountant</option>
      <option value="torino">Cashier</option>
      <option value="milan">Lawyer</option>
    </select>
    <br/>
    <br/>

    <input type="text" name="job_title" value="" />
    <input type="submit" value="Test">
</form> 
```

这是我认为适用于提交按钮的 JavaScript，它不返回所单击选项的索引。

```
<p><input type="submit" 
onclick="var s= this.form.element[job_term_cat]; 
    this form.elements[job_title].value= s.options[s.selectedIndex].textContent"
class="submit" name="job_submit" 
value="<?php _e('Next &rarr;', 'myapp'); ?>"  /></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:19:24.347

好吧，你的语法有一些错误，例如 not `var s= this.form.element[job_term_cat];`but`var s= this.form.elements[job_term_cat];`

这是工作代码：

**编辑：我放错了一些名字，检查一下：**

```
<p><input type="submit" onclick="this.form.elements['job_title'].value = this.form.elements['job_term_cat'].selectedIndex" class="submit" name="job_submit" value="<?php _e('Next &rarr;', 'myapp'); ?>"  /></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:21:01.683

```
var s= this.form.elements['job_term_cat']; 
```

（注意元素中的 s 和引号）

```
this form.elements['job_title'].value= s.options[s.selectedIndex].textContent; 
```

（注意引号）

# jenkins-plugins - jenkins 中的并行构建

> ID：14842867
> 
> 赞同：0
> 
> 时间：2013-02-12T22:16:23.097
> 
> 标签：jenkins-plugins

我刚刚安装了 0.7 版的“Build Flow”插件，我似乎在让它工作时遇到了问题。我配置了 2 个简单的作业（JOB1 和 JOB2）。然后是我命名为“parallel_build}”的另一个詹金斯工作，它基本上调用这个工作来并行构建它们。

在“使用流程 DS 定义构建流程”部分中，我有以下内容

并行（{buildIJOB1)}，{build(JOB2)}）

当我执行“parallel_build”作业时，控制台输出打印以下消息并返回构建失败

平行 {

}

通知上游项目工作完成 Finished: FAILURE

它似乎没有执行我打算并行运行的作业。这两个作业（JOB1 和 JOB2 非常简单。它们所做的只是打印 hello msg。

我提前感谢任何帮助。

珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:42:17.013

别管人家。从 1.447 升级到最新的 jenkins 版本 (1.501) 解决了这个问题。现在一切都好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T09:55:11.177

试试这个语法

```
parallel(
{build("JOB1")},
{build("JOB2")}
) 
```

# javascript - 如何强制滚动条出现在 ipad 中？（移动Safari）

> ID：14842876
> 
> 赞同：6
> 
> 时间：2013-02-12T22:17:05.683
> 
> 标签：javascript, css, ipad, mobile-safari

我无法让滚动条出现在移动 Safari 中，因为 overflow: auto 在有可滚动内容时不起作用。我找到了这个 CSS 属性：

-webkit-溢出滚动：触摸

正如一些人所建议的那样，这是对隐藏滚动条的移动 Safari 的修复，但它对我不起作用。有人对我如何强制在移动 safari 中有一个滚动条以向用户提供他们应该滚动的视觉效果有任何建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-08T08:19:36.327

在您的 CSS 中包括：

```
::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 7px;
    height: 7px;
    -webkit-overflow-scrolling: auto;
}
::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: rgba(0,0,0,.5);
    -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
} 
```

根据需要自定义外观。

[堆栈溢出源](https://stackoverflow.com/a/10100209/1136132)

[原始来源](http://simurai.com/blog/2011/07/26/webkit-scrollbar)

# javascript - 使 Fabric.js 对象可拖动但不可“选择”

> ID：14842877
> 
> 赞同：10
> 
> 时间：2013-02-12T22:17:12.523
> 
> 标签：javascript, fabricjs

[Fabric.js](http://fabricjs.com/)有一个非常酷的方面，默认情况下，它允许所有对象都是“可选择的”，这意味着它们可以被拖动、调整大小和旋转。但是，我希望它们只能拖动，不能调整大小或旋转。这可能吗？如果需要，我不介意与源代码混在一起，这比自己重新实现要好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T22:25:31.157

没关系，我在这里找到了答案：http: [//fabricjs.com/customization/](http://fabricjs.com/customization/)

这是做到这一点的线

```
canvas.item(0).hasControls = false; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-15T11:43:21.950

在创建时将以下选项传递给对象：

```
hasBorders: false
hasControls: false
hasRotatingPoint: false 
```

# php - 使用 PHP:date() 或 MySQL:FROM_UNIXTIME() 存储时间戳？

> ID：14842881
> 
> 赞同：1
> 
> 时间：2013-02-12T22:17:38.870
> 
> 标签：php, mysql, unix-timestamp

这可能是微不足道的，但是当我想将时间戳值（例如，返回`time()`）存储到`TIMESTAMP`我的 MySQL 表的列中时，这两个中的哪一个更可取：

```
function storeTime($timestamp) {
   // Option one:
   $query = "INSERT INTO faketable (datecol) VALUES (FROM_UNIXTIME(".$timestamp."))";
   // Option two:
   $query = "INSERT INTO faketable (datecol) VALUES (".date("YY-MM-DD HH:MM:II", $timestamp).")";
} 
```

甚至有区别吗？

**编辑：**对不起，意思是`date()`，不是`strtotime()`......

**编辑2：** `NOW()`不切芥末，实际时间戳是发送给我的方法的参数。我不知道它是什么提前。

**编辑3：**我真的不应该在这个晚上问问题。有问题的列实际上是一`TIMESTAMP`列，而不是一`DATETIME`列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:44:49.400

回答你的问题；不，没有逻辑上的区别。它们都返回日期的字符串表示形式[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)，MySQL 很乐意将其转换为 DATETIME，或 TIMESTAMP 类型。至于哪个更快的证据会建议 MySQL；[http://www.onextrapixel.com/2010/06/23/mysql-has-functions-part-5-php-vs-mysql-performance/](http://www.onextrapixel.com/2010/06/23/mysql-has-functions-part-5-php-vs-mysql-performance/)，[使用MySQL的CURDATE()还是PHP的date()更快？](https://stackoverflow.com/questions/6113920/faster-to-use-mysqls-curdate-or-phps-date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:26:59.303

怎么样

```
INSERT INTO faketable (datecol) VALUES (UNIX_TIMESTAMP()) 
```

我想这就是你要找的 OP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:20:06.090

最简单的是`FROM_UNIXTIME()`mysql中的一个。这将是一个整数->日期转换。在 PHP 中这样做意味着 integerr->string->datetime，效率要低得多。

同样，您的 strtotime() 完全无效。那不是现在该功能有效。你最终会在数据库中找到's'。

至于存储“现在”时间戳，为什么不直接使用时间戳字段类型呢？当您插入/更新记录时，它会自动将自己设置为当前时间。

# asp.net-web-api - 在 MVC4 中使用 WebAPI 找不到路由

> ID：14842885
> 
> 赞同：0
> 
> 时间：2013-02-12T22:17:57.163
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

在我的 WebApiConfig.cs 文件中，我定义了以下路由：（这是此处定义的唯一路由）

```
config.Routes.MapHttpRoute(
            name: "DefaultApi2",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new {id = RouteParameter.Optional}
            ); 
```

我正在做的帖子是：

```
http://localhost:17138/api/Account/Login 
```

我的控制器是这样的：

```
namespace WebAPI.Api
{
  public class AccountController : ApiController
  {
    [HttpPost]
    public HttpResponseMessage Login(string username,string password)
    {... 
```

我得到的错误是：

```
{"Message":"NoHTTPresourcewasfoundthatmatchestherequestURI'http://localhost:17138/api/Account/Login'.","MessageDetail":"Noactionwasfoundonthecontroller'Account'thatmatchestherequest."} 
```

从菲尔的程序来看，这条路线应该可行。有什么想法吗？

![在此处输入图像描述](../Images/79fe1fc1b45d68676b318af2b79f0d14.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:35:21.947

我将登录方法的参数更改为

```
public HttpResponseMessage Login(FormDataCollection formDataCollection) 
```

它奏效了。似乎我缺少有关如何处理 POST 参数的一些信息，因为在 formDataCollection 中，用户名和密码都在那里。我不知道那不一样

```
public HttpResponseMessage Login(string username,string password) 
```

# c# - 当列中的内容发生变化时展开数据网格的容器

> ID：14842887
> 
> 赞同：0
> 
> 时间：2013-02-12T22:18:04.760
> 
> 标签：c#, wpf, xaml

我有一个带 3 列的 DataGrid。第一列单元格是一个组合，用户可以从中选择不同长度的值。我希望第一列显示所选项目的整个值（即它的大小应该适合其内容）。这在我设置列的宽度 =“自动”时有效。问题出在某个时刻，当网格的整个宽度被占用时，滚动条就会出现。相反，我宁愿数据网格本身总是扩展，因此它的容器。我该怎么做..我的xaml的结构如下

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <local:MyUserControl... Grid.Col="1">
    <Expander Grid.Column="2">
        <GroupBox  Template="{Binding OptionsSelectorTemplate}" Grid.Row="1" />
    </Expander
</Grid>

<ControlTemplate x:Key="OptionsSelectorTemplate">
    <StackPanel Orientation="Vertical">
        <dxl:NavBarControl...>
            <dxn:NavBarControl.Groups>
                <dxn:NavBarGroup Header="Options Set 1">
                    <DataGrid Style="{StaticResource DataGridTemplateStyle}" ItemSource="{Binding ViewModel.Options}" DataContext="{Binding .}"/>
                </dxn:NavBarGroup>
                <dxn:NavBarGroup Header="Options Set 2">
                    <DataGrid Style="{StaticResource DataGridTemplateStyle}" ItemSource="{Binding ViewModel.Options}" DataContext="{Binding .}"/>
                </dxn:NavBarGroup>
        </dxl:NavBarControl...>
        <Button ... />
    </StackPanel>
</ControlTemplate>

<Style x:Key="DataGridTemplateStyle" TargetType="DataGrid">
    <Setter Property="Template" Value="{StaticResource DataGridTemplate}" />
</Style>     

<ControlTemplate x:Key="DataGridTemplate">
    <DockPanel HorizontalAlignment="Stretch">
        <DataGrid Name="_dataGrid" 
              AutoGenerateColumns="False" RowHeaderWidth="0" HeadersVisibility="Column" CanUserAddRows="False" GridLinesVisibility="None" HorizontalAlignment="Stretch" KeyboardNavigation.TabNavigation="Cycle">

            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Col1" MinWidth="75" Width="Auto" KeyboardNavigation.IsTabStop="False">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox.../>  <---Want this guy to size to always fit the selected list item and to expand the entire datagrid if need be w/o displaying horizontal scroll bar.
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Weight" MinWidth="40"  >
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border >
                                <TextBox T../>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="NN" Width="30">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox .../>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

    </DockPanel>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:42:21.590

看起来根据文档，DataGrid 列仅在一个方向上调整大小..即它们只会变宽，而不是变窄。

# reporting-services - 最后一个字段的总和

> ID：14842888
> 
> 赞同：-1
> 
> 时间：2013-02-12T22:18:05.923
> 
> 标签：reporting-services, sql-server-2008-r2, sum

我很难对字段求和。这就是我所拥有的：我有员工列表和两行值，我还在 SQL 中计算了每个员工使用窗口函数对两行中的每一行的 8 周和 16 周的运行总计。我必须按他们工作的分支机构对员工进行分组，并计算每行过去 8 周和 16 周的运行总计总和，然后按第 2 行设备第 1 行。我需要使用 Last 函数，因为我只需要运行总计最后 8 周和 16 周。挑战是四处走走，有类似的东西： Sum(Last(Fields!Last116WeekSilk.Value) 。这显然给了我一个错误。我试图用 Sum 和 Last 函数将计算字段添加到数据集中，但没有工作，尝试了 RunningValue，不起作用。我还能做些什么来获得上次运行总数的总和？提前非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:47:50.540

我会将 SQL ROW_NUMBER 函数添加到查询中并派生每个组中的行号（例如 1 或 2）。如果您按降序执行此操作，则行号 1 将始终是组中的最后一行。

然后在 SSRS 中，您可以使用 Iif 仅显示/计算第 1 行。

# objective-c - 如何在 Cocoa 中捕获 shift-command-3/4

> ID：14842889
> 
> 赞同：0
> 
> 时间：2013-02-12T22:18:07.810
> 
> 标签：objective-c, macos, cocoa

我似乎能够捕捉到 shift-command 键盘事件和按下“4”。但是我不能让他们都阻止用户进行丝网印刷。欢迎任何指点。

# asp.net - .NET 编译错误，显示用户友好的屏幕

> ID：14842890
> 
> 赞同：1
> 
> 时间：2013-02-12T22:18:08.083
> 
> 标签：asp.net, compiler-errors, web-config

我已使用以下声明将 web.config 配置为显示用户友好的 404 和 500 错误：

```
<customErrors mode="Off" redirectMode="ResponseRewrite">
  <error statusCode="500" redirect="error.aspx"/>
  <error statusCode="404" redirect="404.aspx"/>
</customErrors> 
```

然而，有时当我们将类通过 FTP 传输到服务器（在 App_Code 文件夹中）时，我们可能会导致无法正常处理的编译错误，并且用户会看到黄屏死机。有没有办法隐藏这个并显示一个标准的保留页面？也许对上面的 web.config 声明进行了一些改编？

我知道理想情况下我们应该先编译并发布，但目前我们正在进行很多动态更改，这使得这变得困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:22:11.193

您可以通过以下方式修改 web.config 以在任何错误上显示用户友好的消息：

```
<customErrors mode="on" defaultRedirect="otherError.aspx" redirectMode="ResponseRewrite">
  <error statusCode="500" redirect="error.aspx"/>
  <error statusCode="404" redirect="404.aspx"/>
</customErrors> 
```

编辑：

如果您不想在更新网站时看到编译错误，您可以在更新期间将其离线。为此，请将名为 app_offline.htm 的文件放在您网站的根目录中。该文件的内容应说明该网站正在维护/更新中。您可以调整与您的网站风格相同的内容。完成更新后，只需重命名该文件，网站就会按预期工作。

# javascript - DataJS 库未在 RequireJS 中加载

> ID：14842892
> 
> 赞同：3
> 
> 时间：2013-02-12T22:18:16.343
> 
> 标签：javascript, jquery, requirejs, amd, datajs

我是 RequireJS 的新手，所以这可能是一个愚蠢的问题！

我正在使用require-jquery。

我想将[DataJS](http://datajs.codeplex.com/)库作为模块加载。它是一个独立的库，不依赖于 jQuery。

这是我的 HTML 文件 start.htm 的样子：

```
<html>
<head>

</head>
<body>
    <script type="text/javascript" src="Scripts/Loader.js"></script>
</body>
</html> 
```

这就是 Loader.js 文件的样子：

```
(function (window, undefined) {

    var script = document.createElement('script');
    script.async = true;
    script.src = "scripts/require-jquery.js";

    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
    script.onload = script.onreadystatechange = function () {
        var rdyState = script.readyState;
        if (!rdyState || /complete|loaded/.test(script.readyState)) {

            require([
                        "jquery",
                        "scripts/datajs-1.1.0"
                    ],
                        function (jQueryHandle, odata) {
                            alert(odata);
                        });

            script.onload = null;
            script.onreadystatechange = null;
        }
    };

})(window); 
```

这是我的文件结构：

```
Project
|
|----- start.htm
|
|----- Scripts  
       |
       |----- datajs-1.1.0.js   
       |
       |----- require-jquery.js
       |
       |----- loader.js 
```

我认为 datajs 库支持 AMD，因为这是库的样子：

```
(function (window, undefined) {

    var datajs = window.datajs || {};
    var odata = window.OData || {};

    // AMD support
    if (typeof define === 'function' && define.amd) {
        define('datajs', datajs);
        define('OData', odata);
    } else {
        window.datajs = datajs;
        window.OData = odata;
    }

    /* -------------------- */

})(this); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T14:09:18.920

使用 requirejs 我有这个代码：

```
<script type="text/javascript" src="0.1/Clientscripts/requirejs/2.1.11/require.js"></script>
<script type="text/javascript">
    requirejs.config({
        'baseUrl': '0.1/Clientscripts/',
        'paths': {
            'datajs':'datajs/1.1.2/datajs.min',
            'OData':'datajs/1.1.2/datajs.min'
        },
        'shim': {
            'OData':['datajs']
        }
    });
</script> 
```

在我自己的模块中，我这样做了：

```
define(['datajs','OData'], function (datajs,OData) {
    console.log(datajs);
    console.log(OData);
    console.log(OData.read);
} 
```

在这里可以访问 datajs 和 OData 对象。

就我个人而言，我认为对同一个文件有多个“路径”条目有点尴尬。

如果您可以说：

```
'paths': { 'datajs':'path/to/datajs',...
 //and then
require(['datajs/core','datajs/OData'],... 
```

但话又说回来..没有什么是完美的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:24:47.220

我认为那是 define([... 而不是 require([..

# java - 在 JAR 文件中使用图像

> ID：14842896
> 
> 赞同：1
> 
> 时间：2013-02-12T22:18:25.560
> 
> 标签：java, jar, embedded-resource

我似乎无法做到这一点...

我在 Eclipse 中有一个名为 MyProject 的 Java 项目。在其根目录中是文件夹 bin、src 和资源。在资源内部，我有一个名为`myImage.gif`.

在我的代码中，我想使用这个图像，并且无论它是否从 Jar 文件运行，我都希望它能够工作。我目前正在这样做

```
ImageIcon j = new ImageIcon(getClass().getResource("/resources/myImage.gif")); 
```

但是当我通过 Eclipse（而不是作为 Jar）运行它时，它会吐出一个空值。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:37:13.527

如果您要告诉 Eclipse 将`resources`其视为源文件夹，那么您应该可以说

```
ImageIcon j = new ImageIcon(getClass().getResource("/myImage.gif")); 
```

当您开始构建 JAR 时，您必须确保`resources`目录的内容进入 JAR 文件的顶层，以便在 JAR 案例中使用相同的路径，即

```
META-INF
  MANIFEST.MF
com
  example
    MyClass.class
myImage.gif 
```

或者，可能是更常见的 Java 习惯用法，将图像文件放在与文件相同的目录中`.java`（`src/com/example`在这种情况下），然后在`getResource`没有前导斜杠的情况下使用

```
new ImageIcon(getClass().getResource("myImage.gif")); 
```

`Class.getResource`针对相关类的包解析类似的相对路径。同样，当您开始构建它时，您需要在 JAR 中具有相同的结构，这次使用`myImage.gif`under `com/example`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:31:49.240

**将资源放入 src**中，Eclipse 会将其复制到 bin 中。

```
ImageIcon ii =
   new ImageIcon(
      ImageIO.read(
         getClass().getClassLoader().getResourceAsStream(
            "resources/myImage.gif" ))); 
```

没有 / 在路径之前。

# java - 如何将 JAXB 对象编组到不同的模式？

> ID：14842898
> 
> 赞同：3
> 
> 时间：2013-02-12T22:18:31.187
> 
> 标签：java, xml, jaxb

我解组以特定格式出现的 XML，例如

```
<root>
   <a/>
   <b/>
   <c>
     <x/>
   </c>
   <d/>
</root> 
```

在玩弄了 Java 对象之后，我想将它发送到另一个使用不同模式的服务，例如

```
<anotherRoot>
   <a/>
   <x/>
   <something>
      <d/>
   </something>
</anotherRoot> 
```

这可以通过 JAXB “轻松”完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:26:38.870

使用任何[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)`JAXBSource`实现，您可以在 a和API上使用 XSLT`javax.xml.transform`来生成二级 XML 结构：

```
 JAXBContext jc = JAXBContext.newInstance(Foo.class);

    // Output XML conforming to first XML Schema
    Marshaller marshaller = jc.createMarshaller();
    marshaller.marshal(foo, System.out);

    // Create Transformer on Style Sheet that converts XML to 
    // conform the second XML Schema
    TransformerFactory tf = TransformerFactory.newInstance();
    StreamSource xslt = new StreamSource(
            "src/example/stylesheet.xsl");
    Transformer transformer = tf.newTransformer(xslt);

    // Source
    JAXBSource source = new JAXBSource(jc, foo);

    // Result
    StreamResult result = new StreamResult(System.out);

    // Transform
    transformer.transform(source, result); 
```

**完整示例**

*   [http://blog.bdoughan.com/2012/11/using-jaxb-with-xslt-to-produce-html.html](http://blog.bdoughan.com/2012/11/using-jaxb-with-xslt-to-produce-html.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:33:09.637

您可以为其他服务创建代理，并将其 bean 视为简单的数据传输对象。

因此，当您希望调用服务时，您可以根据适当模型对象（您使用的模型对象，包含业务逻辑的对象）的值手动填充 bean 并使用 bean 调用服务。

如果服务接口发生变化，您可以重新创建代理，编译器将帮助您修复转换。

# linux - 如何根据另一个文件进行过滤

> ID：14842900
> 
> 赞同：2
> 
> 时间：2013-02-12T22:18:43.317
> 
> 标签：linux, text, file-io

假设我有一个这种格式的文件文件 1：

```
kk a 1
rf c 3
df g 7
er e 4
es b 3 
```

和另一个文件2：

```
c
g
e 
```

我想根据文件 2 过滤第二列并输出如下文件：

```
rf c 3
df g 7
er e 4 
```

linux命令如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T11:39:05.523

```
awk 'NR==FNR{A[$1];next}($2 in A)' file2 file1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:52:41.710

不一定快速或漂亮，但可以做到：

```
cut -f 2 -d ' ' file1 | while read letter; do grep -n "$letter" file2 | cut -d ':' -f 1 | while read lineNo; do sed $((lineNo+1))'!d' file1; done; done; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:28:09.897

[`join`](http://linux.die.net/man/1/join)如果两个文件都已排序或按正确的顺序，您可以使用它。虽然这给出了不同的输出

```
join --nocheck-order -1 2 -2 1 file1.txt file2.txt 
```

给

```
c rf 3
g df 7
e er 4 
```

使用 perl，您可以读取密钥文件，然后检查每一行是否匹配

```
use strict;
use warnings;

my %keys;
open(my $f1, '<', 'file2.txt') or die("Cannot open file2.txt: $!");
while (<$f1>) {
    chomp;
    $keys{$_} = 1;
}

close($f1);

open(my $f2, '<', 'file1.txt') or die("Cannot open file1.txt: $!");
while (<$f2>) {
    my(undef, $col2, undef) = split(' ', $_);
    print if ($keys{$col2});
}

close($f2); 
```

这将给出所需的

```
rf c 3
df g 7
er e 4 
```

# javascript - 如果 custom_field 为空，如何隐藏父 div

> ID：14842902
> 
> 赞同：0
> 
> 时间：2013-02-12T22:18:47.980
> 
> 标签：javascript, jquery, html, hide

我不熟悉 js 或 jquery，但我需要它来完成我的“工作”。如果 custom_field (CC_STAUS) 的值为空，我想隐藏父 div**气泡。**

下面的代码只是其余部分的一部分：

```
<div class="bubble">
   <div class="arrow"></div>
     <div class="speach" style="width: 100%;">  CC_STATUS
  </div>
</div> 
```

和CSS

```
.bubble { 
  overflow:hidden; 
  margin:5px 0 0 0;
}
.bubble .speach { 
  background-color:#333333; 
    color:#FFFFFF;
    padding:5px;
    margin:0; 
    font-size: 12px;
    font-family: Segoe UI;
  text-transform: lowercase; 
}
.bubble .arrow {
  margin:0 0 0 15px;
    width:0;
    height:0; 
  border-left: 0px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid #333333;
    border-top: 0;
} 
```

为了检查**CC_STATUS**的长度，我尝试了这段代码（我只是对其进行了改编），但显然它不起作用。无论内容如何，​​气泡总是显示出来。

```
$('.bubble').each(function() {
    if($(this).attr('CC_STATUS') === '' || $(this).text() === '') {
        $(this).parents('.bubble').hide();
    }
}); 
```

见[jsfiddle](http://jsfiddle.net/9QayV/1/)

提前感谢任何（工作）解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:29:12.400

首先，您忘记加载 jquery。

其次，您没有完全正确地进行 jquery 遍历 - 您正在查看气泡的内容，而不是语音的内容。您那里还有一个不需要的 .parent。

这是解决方案：

```
$('.bubble').each(function() {
    if($(this).attr('CC_STATUS') === '' || $(this).find('.speach').text() === '') {
        $(this).hide();
    }
}); 
```

[http://jsfiddle.net/v2Les/](http://jsfiddle.net/v2Les/)

编辑：除了 $(this).attr 位是完全没有必要的，现在我仔细看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:28:13.500

CC_STATUS 不是气泡类元素的属性，因此不能使用`attr()`. 作为 .bubble 的孩子，“演讲”类是否可靠？

如果是这样，请尝试以下操作：

```
$('.bubble').each(function() {
    if('.speach', $(this)).text() === '') {
        $(this).hide();
    }
} 
```

换句话说，foreach 气泡，找到它的子类“speach”，如果为空，则隐藏气泡。

希望这能让你上路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:37:02.037

到目前为止，我看到的唯一问题是空格不是空字符串。

```
var re = /\w/;
var s = $(".speach").text();
var result = re.test(s);
console.log(result) // false if non-whitespace characters exist 
```

# c# - 我应该捕获多少个异常，正确的方法是什么？

> ID：14842908
> 
> 赞同：1
> 
> 时间：2013-02-12T22:19:11.707
> 
> 标签：c#, exception-handling

我想获取我计算机的所有 IP 地址。如果出现问题（异常），我只想返回空字符串。这是我使用的功能。`GetHostEntry`会抛出几个异常，`GetHostName`也会抛出异常。我应该如何处理所有这些异常？我应该一个一个地抓住它们吗？这会使代码混乱。还是我应该`catch (Exception e)`在块内简单地使用并且什么都不做`catch`？处理它的最佳方法是什么？

```
 private string GetIpAddress()
    {
        var temp = new StringBuilder();
        try {
                var hostEntry = Dns.GetHostEntry(Dns.GetHostName());
                var ips = from address in hostEntry.AddressList
                      where (address.AddressFamily == AddressFamily.InterNetwork)
                      select address;

                foreach (IPAddress ip in ips) {
                     temp.Append(ip).Append(" ");
                }
        } catch (exception1) {

        } catch (exception2) {

        } .....

        return temp.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:22:42.703

当且仅当您可以对它做一些有用的事情时，您才应该捕获一个特定的异常。否则，让异常传播到可以用它做一些有用的事情的级别。

您应该有一个全局异常处理程序，可以优雅地管理其他未捕获的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:26:33.560

处理那些你可以做的事情，或者你想以特定方式处理的（认为连接失败会驱动一个消息框来提示你是否连接到网络）

对于其他“出错”的异常，让它们传播到我们有意义的地方来处理它，或者重新抛出一个有意义的上下文异常并在适当的地方处理。

如果您要做的只是通过某个进程的网络向日志文件发送报告，那么让该异常终止您的进程是否有意义？不是真的，所以只需将顶层调用封装到 SendNetworkReport。

如果它是您整个流程的核心，那么让它传播到您的主控制代码，并以某种上下文显着的方式中止流程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:22:58.770

如果您真的想丢弃异常，请使用空的`catch`.

```
try
{
   // Code
}
catch {} 
```

（注意那是一对花括号，不是`()`'s）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T22:24:27.693

根据经验，如果您无法处理异常，正如您有一个空的 catch 块所证明的那样，那么您应该让它们冒泡到下一个级别。

您应该查看每个可以抛出的异常，并准确确定它为什么会被抛出以及您应该如何处理它。例如，如果 DnsGetHostEntry() 可以抛出异常，为什么会这样呢？您是否应该返回未找到主机的错误？您是否应该返回一个合理的默认值，这在您的应用程序中是否有意义？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T22:30:39.793

*   不要忽略异常，至少写一个日志行。即使您认为由于已知原因这将是一种已知类型的异常。

*   不要无缘无故地捕捉异常——让它冒泡

*   *务必在每个外部*入口点（事件处理程序、线程等）上放置 try/catch。从按钮单击处理程序中冒出的异常将导致您的应用程序崩溃，如果强制运行，另一个线程甚至同一线程上的代码也是如此就可以了（如 Windows.Forms.Control.Invoke(delegate)）

*   拥有最少数量的不同处理程序，并且*仅*当您实际上以不同方式处理异常时

*   向 AppDomain.UnhandledException 添加一个侦听器并记录这些

# excel - 在 VBA 中使用 Excel 函数

> ID：14842912
> 
> 赞同：1
> 
> 时间：2013-02-12T22:19:18.727
> 
> 标签：excel, vba

我正在尝试在单元格中编写此函数：

```
=CONCATENATE("Blah",ROUND(COUNTA(I26:I34)/COUNTA(I4:I24,I26:I34)*100,0),"%") 
```

这就是我现在所拥有的（我把它们放在不同的行中，这样更容易阅读）：

```
DestBook.Worksheets("Sheet1").Range("I2").Value = 
DestBook.Application.WorksheetFunction.Concatenate("Blah ", 
WorksheetFunction.Round(WorksheetFunction.CountA("I4:I24") / 
WorksheetFunction.CountA("I4:I24", "I26:I24") * 100, 0), "%") 
```

它似乎不喜欢它，因为它给出了这个错误：对象不支持这个属性或方法

我不确定是我设置的值不正确还是我的公式被错误地翻译了。任何人都可以看看它，看看它有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:32:02.430

试试这个：

```
Dim r1 As Range, r2 as Range, r3 as Range
Set r1 = DestBook.Worksheets("Sheet1").Range("I4:I24")
Set r2 = DestBook.Worksheets("Sheet1").Range("I26:I34")
Set r3 = DestBook.Worksheets("Sheet1").Range("I2")

Dim S1 as Double, S2 as Double
S1 = WorksheetFunction.CountA(r1)
S2 = WorksheetFunction.CountA(r1, r2)

r3.Value = "Blah " & Format(S1 / S2 * 100, "0") & "%" 
```

我测试了它并且它有效。

# powershell - 如何使用 WebDeploy 3 cmdlet 从 Powershell 部署 Web 包？

> ID：14842923
> 
> 赞同：1
> 
> 时间：2013-02-12T22:20:02.147
> 
> 标签：powershell, web-deployment, msdeploy, webdeploy

我想使用新的 WebDeploy 3 cmdlet，例如 Sync-WD*。

如何使用 SetParameters.xml 和凭据从“包”同步到“自动”？

ps 还有一些真正的文档在哪里，MS？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T19:17:53.827

回答我自己的问题。不幸的是，我没有找到答案。我改用了这种方法： [https ://github.com/SathishN/PSBuildModules/blob/master/Src/MSDeploy.psm1](https://github.com/SathishN/PSBuildModules/blob/master/Src/MSDeploy.psm1)

# jquery - 是否可以使用 Require.js 进行配置继承？

> ID：14842926
> 
> 赞同：2
> 
> 时间：2013-02-12T22:20:18.613
> 
> 标签：jquery, requirejs, extend

我试图找出在 Require.js 中进行配置准继承的最佳方法。

我有一个根 webapp，然后是它们自己的上下文中的子 webapp，如下所示：

```
/
/configuration
/reporting 
```

根 (/) webapp 将有一个基本的 Require.js 配置对象，然后配置和报告 webapps 将有自己的覆盖。我已经通过使用 jQuery 扩展方法让它工作了，例如：

```
var rootConfig = {
    // lots of stuff here: paths, shim, and baseUrl
}
var localConfig = {
    paths: {
        // this app wants to have a different version, so override
        jqueryui: '/js/lib/ui/jquery-ui-1.8.22.custom.min'
    }
}

var mergedConfig = {};
$.extend(true, mergedConfig, rootConfig, localConfig);

require.config(mergedConfig); 
```

这很好用，但它有点打破了 Require.js 范式，因为我必须在 Require.js 之外静态加载 jQuery 库。 **任何想法如何更优雅地做到这一点？**

我查看了 James Burke 的多页示例，这些示例有点类似于这些思路，但我认为这并不是要准确地继承配置。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:17:45.307

我最终只是从其他几个可以解决问题的来源中剔除一个非 jquery 扩展函数，所以我可以在 require.js 执行之前避免加载 jquery ......

```
var com = com || {};
com.my = com.my || {};
com.my.extend = function (obj1, obj2) {
for (var p in obj2) {
    try {
        if ( obj2[p].constructor == Object ) {
            obj1[p] = com.my.extend(obj1[p], obj2[p]);
        } else {
            obj1[p] = obj2[p];
        }
    } catch(e) {
        obj1[p] = obj2[p];
    }
}

return obj1;
} 
```

...然后在调用 require.config 之前使用它来扩展/合并配置对象，例如：

```
// merge localConfig with the root config
var com.my.mergedConfig = 
com.my.extend(com.my.rootConfig, com.my.childConfig);

// apply the configuration to require.js
require.config(com.my.mergedConfig); 
```

希望对其他人有所帮助。

# powershell - Powershell：当文件名具有字符[]时移动项目不起作用

> ID：14842927
> 
> 赞同：5
> 
> 时间：2013-02-12T22:20:18.283
> 
> 标签：powershell, filenames

关于使用 PowerShell 移动项目的快速问题：有谁知道为什么当文件名上有 [ 或 ] 字符时以下脚本不起作用？（例如：**file1[VT].txt**）

```
ls j:\ | foreach { 
  $itemName = $_.Name.Replace('.', ' ') 
  $destination = ls | where { $itemName -match $_.Name } | select -First 1 
  if ($destination -ne $null) {       
    mi $_.PSPath $destination.PSPath -Verbose -WhatIf  
  } 
} 
```

例如，如果文件名为**file1.txt** ，它将移动文件，但它会简单地忽略名为**file1[VT].txt**的文件。我假设当文件名上有字符 [ 或 ] 时，它没有找到文件的路径。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T06:39:23.920

只需使用`-literalpath`参数`move-item`

```
ls j:\ | foreach { 
  $itemName = $_.Name.Replace('.', ' ') 
  $destination = ls | where { $itemName -match $_.Name } | select -First 1 
  if( $destination -ne $null){       
   mi -literalpath $_.PSPath $destination.PSPath -Verbose -WhatIf  
  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:36:17.627

如果你改变这一行怎么办：

```
mi $_.PSPath $destination.PSPath -Verbose -WhatIf 
```

变成这样：

```
mi "$($_.PSPath)" "$($destination.PSPath)" -Verbose -WhatIf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:40:31.960

当您使用 -match 运算符时，它将您正在寻找的模式（在您的示例中为 $_.Name）视为正则表达式。在 .NET 正则表达式中，[ 和 ] 字符用于将一个字符与一组标记进行匹配。例如，正则表达式

```
{"file1[vt]"} 
```

将匹配字符串“file1v”和“file1t”。为了使用

# java - 扫描 txt 文件时在每行之前获取 null

> ID：14842929
> 
> 赞同：3
> 
> 时间：2013-02-12T22:20:26.307
> 
> 标签：java

我在读取 txt 文件并使用 java 的scanner.util 查找单词/模式时遇到问题。目前正在测试读数，我在每一行前面都得到了空值。在那个问题之后，我仍然不确定如何在 txt 文件中搜索模式/单词。我还必须显示包含模式/单词的行。

```
public class SearchPattern {
   public static void main(String[] args) throws IOException{
      Scanner s = new Scanner(System.in);
      String pattern;
      String filename;
      String[] text = new String[10];
      System.out.println("Enter the filename");
      filename = s.nextLine();
      System.out.println("Enter the pattern you'd like to search");
      pattern = s.nextLine();
      // Print out each line that contains pattern
      // may need an array to store StringS of lines with word
      try{
         s = new Scanner(new BufferedReader(new FileReader(filename)));
         int x = 0;
         while (s.hasNext()) {
            text[x] += s.next();
            x++;
         }
      }
      finally {
         if (s != null) {
            s.close();
         }
      }
      text[0] = "test";
      System.out.println(text[0]);
      for(String txt : text){
         System.out.println(txt);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:23:15.700

你做：

```
text[x] += s.next(); 
```

这意味着：`text[x]`比`null`你追加`s.next()`

将其替换为：

```
text[x] = s.next(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:32:57.640

```
s = new Scanner(new BufferedReader(new FileReader(filename)));
        int x = 0;
        while (s.hasNext()) {
            text[x] += s.next();
            x++;
        } 
```

您在这里所做的是以一种我猜您不想做的方式迭代您的数组。

现在，对于数组中的每个 x 位置，您正在编写

```
text[x] = text[x] + s.next(); 
```

但是您可能想要做的是为数组中的每个位置提供扫描仪下一个值的值。在代码中

```
text[x] = s.next(); 
```

这也可以写成

```
 for((int x = 0; s.hasNext(); x++)
            text[x] = s.next(); 
```

希望这可以帮助。祝你好运！

# regex - 排除特定字符串的正则表达式

> ID：14842936
> 
> 赞同：3
> 
> 时间：2013-02-12T22:21:03.820
> 
> 标签：regex, regex-negation, regex-lookarounds

我目前正在实施一个身份管理解决方案，该解决方案将为用户提供管理其所有端点帐户的能力。

目前，我们公司的密码策略符合默认的 Windows 要求：必须包含数字或特殊字符等。

不幸的是，在新系统的密码策略中，我们可以要求一个数字、一个特殊的或两者兼有，但不能“两者之一”。但是，新系统允许通过正则表达式进行验证。

目前，我们将此设置为 DISALLOW 以下正则表达式：

```
.*[pP][aA4][sS$]{2}[wW][oO0][rR][dD].* 
```

这工作得很好。但是，我们想将其更改为 ALLOW 一个数字或一个特殊的，同时也禁止前一个。这是我尝试过的：

```
((?=.*\d.*)|(?=.*[-'"!#$%&()*+,./:;<=>?@[\]\^_`{|}~\\].*))(?!.*[pP][aA4][sS$]{2}[wW][oO0][rR][dD].*) 
```

但是，我无法让它工作。数字/特殊组可以正常工作，但是单词组不能。它确实会查看是否在字符串的末尾使用了“密码”或某些变体，但不是在开头...

有什么建议么？系统使用标准（Perl 风格）正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:37:29.183

通过一些技巧，可以组合您的正则表达式。

```
^([^pP\d!\-'"#$%&()*+,./:;<=>?@[\]\^_`{|}~\\]|[pP](?![aA4][sS$]{2}[wW][oO0][rR][dD]))*(\d|[-'"!#$%&()*+,./:;<=>?@[\]\^_`{|}~\\])([^pP\d!\-'"#$%&()*+,./:;<=>?@[\]\^_`{|}~\\]|[pP](?![aA4][sS$]{2}[wW][oO0][rR][dD]))*$ 
```

我已经在 Sublime 文本编辑器中成功测试了这一点。

# ios - 在为 testfligh 创建 Enterprise .ipa 时使用什么 url？

> ID：14842941
> 
> 赞同：1
> 
> 时间：2013-02-12T22:21:28.920
> 
> 标签：ios, xcode, testflight

我想尝试使用 Enterprise 构建进行 testflight，但是当在 XCode 中创建企业构建时，必须提供构建和清单文件所在的 url。但是我在 testflight 网站上找不到任何说明这个 url 应该是什么的东西。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:32:27.913

Xcode 将生成一个样板 plist 文件，其中包含 IPA 的 URL。该 URL 将是您的应用程序的托管位置。

由于您使用的是 TestFlight，因此不需要它。TestFlight 将为您处理此问题。

# java - 在动态加载的图像上捕获点击事件的最佳方法

> ID：14842945
> 
> 赞同：0
> 
> 时间：2013-02-12T22:21:42.413
> 
> 标签：java, eclipse, gwt

我正在使用 Eclipse Juno（带有最新补丁）、最新的 GWT 和 java。

我正在将图像加载到一个 flextable 中，关联的姓氏和名字连接起来，并显示在 7 xn 网格中的每个图像下方。我现在要做的是给每个图像一个唯一的名称并为其分配一个点击处理程序。然后，我将在图像上选择一个单击事件，并显示下一个填充了该人详细信息的视图。

flextable 是用于此的正确小部件，还是我应该使用不同的小部件来包含图像和名称？

如何给每张图片一个唯一的名称，以便我知道选择了哪张图片？

如何将唯一的图像名称传递给 onClick 侦听器？

这是我正在使用的代码：

```
public void renderYouthMemberTable(List<YouthMember> youthMemberList) {
    if (youthMemberList != null) {
        int row = 0;
        int col = 0;
        flexTable.clear();
        for (YouthMember youthMember : youthMemberList) {
            String imageDataString = youthMember.getPhotograph();

            //Display each image with the name under it.
            Image image = new Image(imageDataString);
            flexTable.setWidget(row, col, image);
            flexTable.setWidget(row + 1, col, new Label(youthMember.getSurname() + ", " + youthMember.getFirstname()));

            //Add click handler
            image.addClickHandler((ClickHandler) this);

            //Go to next column and if the end of the columns
            //drop two rows and go to the first column
            col = col + 1;
            if (col > 7) {
                row = row + 2;
                col = 0;
            }
        }
    }

}   

public void onClick(ClickEvent event) {
    // note that in general, events can have sources that are not Widgets.
    Widget sender = (Widget) event.getSource();

    if (sender == image) {
        // handle image1 being clicked
        }
    else if (sender == image2) {
        // handle image2 being clicked
    }
} 
```

onClick 还没有工作。这只是为了展示我想要实现的目标。

谢谢你的帮助，

格林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:11:31.377

我认为弹性表适合您的用例。

对于点击事件，你为什么不内联呢？

```
image.addClickHandler(new ClickHandler(){

    @Override
    public void onClick(ClickEvent event){
        // Do something
    }

}); 
```

这样您就不需要处理触发事件或使用`EventBus`.

如果您需要使用图像存储任何其他信息，只需扩展`Image`并添加您需要的任何内容。尽管如果您像上面那样实现点击处理程序，您可能不需要此信息。

例如：

```
public class MyImage extends Image{

    private String id;

    public MyImage(String url){
        super(url);
    }

    public MyImage(String url, String id){
        super(url);
        this.id = id;
    }

    public void setId(String id){
        this.id = id;
    }

    public String getId(){
        return id;
    }

} 
```

然后只需使用`MyImage`而不是`Image`.

**更新：** 添加了构造函数

# javascript - Javascript按名称获取子元素

> ID：14842951
> 
> 赞同：3
> 
> 时间：2013-02-12T22:22:11.643
> 
> 标签：javascript, dom, children

我将 var 传递给`el`函数。`el`包含以前抓取的元素（使用 getElementById），当我`el`在函数中 console.log 时，我得到以下信息：

![在此处输入图像描述](../Images/cf32db09ea3cea8a042e318735d6c555.png)

当我尝试在`el`using 中抓取一个元素时，问题就出现了：

```
el.getElementsByName('fname'); 
```

我得到错误：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'getElementsByName' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T22:24:08.230

`getElementsByName()`API 处于`document`对象级别。它不是 HTMLElement 方法。

您可以`querySelectorAll()`改用：

```
var fnames = el.querySelectorAll('[name=fname]'); 
```

但是，旧浏览器不支持它。

# html - 列中的内容未正确对齐

> ID：14842955
> 
> 赞同：0
> 
> 时间：2013-02-12T22:22:33.460
> 
> 标签：html, css, twitter-bootstrap

我有以下设置：http: [//jsfiddle.net/eGjPa/5/](http://jsfiddle.net/eGjPa/5/)

为什么每次我在左栏中添加新行时，右栏中的文本会自行降低？我需要该行从列的顶部开始。

```
<div class="container">  
  <form class="form-large">
      <div class="left-col">line1<br />line2<br />line3</div>   
      <div class="right-col">this line should be at the top of this column</div>
  </form>
</div> 
```

```
.form-large {
    max-width: 1000px;
    padding: 14px 14px 14px;
    margin: 0 auto 20px;
    background-color: #fff;
    border: 1px solid #d6d6d6;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
    box-shadow: 0 1px 2px rgba(0,0,0,.05);
}
.left-col {
    display: inline-block;
    width: 640px;
    padding-left: 11px;    
}
.right-col {
    display: inline-block;
    width: 300px;
    width: 300px;
    padding-left: 14px;
    /*border-left: 1px solid #d6d6d6;*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:28:00.570

添加`vertical-align: top;`到右侧列的 css 中。

OT：您设置了 2 次宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:28:58.977

添加`float: right`到您的右列，您可能需要增加 jsfiddle 窗口的宽度。

# mysql - MySQL如何根据日期一起添加/减去两列？

> ID：14842958
> 
> 赞同：0
> 
> 时间：2013-02-12T22:22:48.860
> 
> 标签：mysql

我有两个 select 语句，它们从两个不同的表中获取值。选择语句看起来像这样

```
SELECT year(timestamp) y, month(timestamp) m, count(id) c
FROM table
WHERE clause="foo"
GROUP BY year(timestamp), month(timestamp) 
```

它返回类似的东西

```
|-y--|-m|c|
|2013|01|9|
|2013|02|9|
|2013|03|9|
|2013|04|9| 
```

.

```
SELECT year(timestamp) y, month(timestamp) m, count(id) c
FROM table2
WHERE clause="foo"
GROUP BY year(timestamp), month(timestamp) 
```

它返回类似的东西

```
|-y--|-m|c|
|2013|01|1|
|2013|03|1|
|2013|04|1| 
```

我正在寻找的是根据时间戳加入两个表，并从第一个表中减去第二个表。所以它应该看起来像：

```
|-y--|-m|c|
|2013|01|8|
|2013|02|9|
|2013|03|8|
|2013|04|8| 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:31:50.793

假设 TableA 有您的主记录，那么这样的事情应该可以工作：

```
SELECT t.y, t.m, t.c - IFNULL(t2.c,0) c
FROM
(
    SELECT year(timestamp) y, month(timestamp) m, count(id) c
    FROM table
    WHERE clause="foo"
    GROUP BY year(timestamp), month(timestamp)
) t
LEFT JOIN (
    SELECT year(timestamp) y, month(timestamp) m, count(id) c
    FROM table2
    WHERE clause="foo"
    GROUP BY year(timestamp), month(timestamp)
) t2 ON t.y = t2.y AND t.m = t2.m
UNION 
SELECT t.y, t.m, (t.c * -1) c
FROM
(
    SELECT year(timestamp) y, month(timestamp) m, count(id) c
    FROM table2
    WHERE clause="foo"
    GROUP BY year(timestamp), month(timestamp)
) t
LEFT JOIN (
    SELECT year(timestamp) y, month(timestamp) m, count(id) c
    FROM table
    WHERE clause="foo"
    GROUP BY year(timestamp), month(timestamp)
) t2 ON t.y = t2.y AND t.m = t2.m
WHERE t2.y IS NULL
ORDER BY y, m 
```

我已经更新了答案。union 的第一部分返回 table 中的所有记录，无论是否匹配 table2 中的记录，在可用时减去 table2 计数。联合的第二部分返回 table2 中不存在于 table 中的所有记录，将 count 列乘以 -1。

可能有一种更简单的方法，但在没有真正理解表格的情况下，这是我能提供的最好的方法。不幸的是，MySQL 不支持 FULL OUTER JOIN，这将减轻对 UNION 的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:31:43.967

您可以使用*派生表*：

```
SELECT t1.y, t2.m, t1.c - t2.c AS c
FROM 
  (SELECT year(timestamp) y, month(timestamp) m, count(id) c
   FROM table
   WHERE clause='foo'
   GROUP BY year(timestamp), month(timestamp)) AS t1
LEFT OUTER JOIN
  (SELECT year(timestamp) y, month(timestamp) m, count(id) c
   FROM table2
   WHERE clause='foo'
   GROUP BY year(timestamp), month(timestamp)) AS t2
ON (t1.y, t1.m) = (t2.y, t2.m) 
```

另一种解决方案是连接表并计算每个表的不同行。假设`id`是每个表中的主键列，这可以工作：

```
SELECT YEAR(table.timestamp) AS y, MONTH(table.timestamp) AS m,
 COUNT(DISTINCT table.id) - COUNT(DISTINCT table2.id) AS c
FROM table
LEFT OUTER JOIN table2 ON table2.clause = 'foo' AND
  EXTRACT(YEAR_MONTH FROM table.timestamp) =
  EXTRACT(YEAR_MONTH FROM table2.timestamp)
WHERE table.clause='foo'
GROUP BY EXTRACT(YEAR_MONTH FROM table.timestamp) 
```

# java - 在 Eclipse 中转换的 maven 项目中的错误

> ID：14842974
> 
> 赞同：5
> 
> 时间：2013-02-12T22:23:45.600
> 
> 标签：java, gwt, maven, selenium

我正在使用带有 m2e 插件的 Eclipse Juno。我通过 Eclipse 将我的 java 项目转换为 maven 项目

> 右键单击项目>转到菜单配置>转换为maven项目。

![那是我的 pom.xml 文件](../Images/2d7dc7b176d9f6f3fdb7a104d78f33ce.png)

这些是错误：

```
Multiple annotations found at this line:
- Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-
 plugin:2.3.2:compile (execution: default-compile, phase: compile)
- Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-
 plugin:2.3.2:testCompile (execution: default-testCompile, phase: test-compile)
- CoreException: Could not get the value for parameter compilerId for plugin execution default-
 compile: PluginResolutionException: Plugin org.apache.maven.plugins:maven-compiler-plugin:2.3.2 or one of 
 its dependencies could not be resolved: The following artifacts could not be resolved: 
 org.codehaus.plexus:plexus-compiler-manager:jar:1.8.1, org.codehaus.plexus:plexus-compiler-javac:jar:1.8.1: 
 Failure to transfer org.codehaus.plexus:plexus-compiler-manager:jar:1.8.1 from http://repo.maven.apache.org/
 maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central 
 has elapsed or updates are forced. Original error: Could not transfer artifact org.codehaus.plexus:plexus-compiler-
 manager:jar:1.8.1 from/to central (http://repo.maven.apache.org/maven2): connection timed out to http://
 repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-compiler-manager/1.8.1/plexus-compiler-
 manager-1.8.1.jar
- CoreException: Could not get the value for parameter compilerId for plugin execution default-
 testCompile: PluginResolutionException: Plugin org.apache.maven.plugins:maven-compiler-plugin:2.3.2 or one 
 of its dependencies could not be resolved: The following artifacts could not be resolved: 
 org.codehaus.plexus:plexus-compiler-manager:jar:1.8.1, org.codehaus.plexus:plexus-compiler-javac:jar:1.8.1: 
 Failure to transfer org.codehaus.plexus:plexus-compiler-manager:jar:1.8.1 from http://repo.maven.apache.org/
 maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central 
 has elapsed or updates are forced. Original error: Could not transfer artifact org.codehaus.plexus:plexus-compiler-
 manager:jar:1.8.1 from/to central (http://repo.maven.apache.org/maven2): connection timed out to http://
 repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-compiler-manager/1.8.1/plexus-compiler-
 manager-1.8.1.jar 
```

如何解决这个问题呢？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T10:55:05.987

Eclipse Juno 在创建 Maven 项目时遇到一些问题，最好的方法是创建 Maven 项目，创建 Java 并转换它。

Juno 在构建、编译、安装方面也存在 Maven 生命周期配置的问题。所以请也自动关闭您的构建。

请按照以下说明解决此问题。

检查您在 Eclipse 上的代理设置是否在您的公司企业网络后面。

要更改此转到-> 窗口-> 首选项-> 常规-> 网络连接并更改活动提供程序。

如果您有一些代理详细信息，请选择 Manaul 作为活动提供者并对其进行编辑。添加代理详细信息，即主机名和端口，然后单击保存。

否则，请尝试从您的公司网络团队获取。

在 Goto->window->prefernces->Maven-> 用户设置的 goto maven 设置之后

如果没有将下面的代码添加到文件中并保存在路径中，请检查是否存在名为 settings.xml 的 xml 文件。

作为参考，它将位于：users\your name.m2

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository/>
  <interactiveMode/>
  <usePluginRegistry/>
  <offline/>
  <pluginGroups/>
  <servers/>
  <mirrors/>
  <proxies>
    <proxy>
      <id>myproxy</id>
      <active>true</active>
      <protocol>http</protocol>
      <host>proxy name</host>
      <port>number</port>
      <username></username>
      <password></password>
      <nonProxyHosts>localhost,127.0.0.1</nonProxyHosts>
    </proxy>
  </proxies>
  <profiles/>
  <activeProfiles/>
</settings> 
```

即使在此之后，如果它不起作用，请转到命令提示符。导航到项目位置。一个接一个地输入命令。- mvn clean - mvn 编译 - mvn install

希望它对你和其他人有用。

# c - 无法解释的 pthread 互斥锁死锁

> ID：14842976
> 
> 赞同：2
> 
> 时间：2013-02-12T22:23:47.930
> 
> 标签：c, multithreading, thread-safety, pthreads, mutex

我的应用程序中似乎存在由特定互斥锁引起的死锁。但是，代码清楚地在锁定后几乎立即将互斥锁解锁，并且锁定和解锁之间没有其他互斥锁依赖关系。互斥锁绝对不会被同一个线程锁定两次。

只有我的应用程序的一个（许多）用户会出现此问题。我正在处理死锁期间生成的核心转储。等待线程没有出现在核心转储中，但代码告诉我它们都没有锁定有问题的互斥锁。这是持有锁的线程的回溯：

```
(gdb) bt
#0  0x0000003aa4e0e054 in __lll_lock_wait () from /lib64/libpthread.so.0
#1  0x0000003aa4e09388 in _L_lock_854 () from /lib64/libpthread.so.0
#2  0x0000003aa4e09257 in pthread_mutex_lock () from /lib64/libpthread.so.0
#3  0x000000000043cf59 in my_processor (myvar=0x7fff36ba7430, mystring=0x7fff36ba76c0 
"This is a string") 
```

我还打印了有问题的互斥锁的数据：

```
(gdb) print my_mutex
$4 = {__data = {__lock = 2, __count = 0, __owner = 0, __nusers = 0, __kind = 2, __spins = 0, __list = {__prev = 0x0, __next = 0x0}},
  __size = "\002", '\000' <repeats 15 times>, "\002", '\000' <repeats 22 times>, __align = 2} 
```

这似乎不一致：所有者为 0，表明没有线程拥有锁，但线程正在阻塞等待互斥锁。

以下片段显示了互斥锁的声明和初始化：

```
pthread_mutex_t my_mutex;
pthread_mutexattr_t mutex_attr;

/* set up mutex attributes */
pthread_mutexattr_init(&mutex_attr);
pthread_mutexattr_settype(&mutex_attr, PTHREAD_MUTEX_ERRORCHECK);

/* create mutex */
pthread_mutex_init(&my_mutex, &mutex_attr);

/* destroy mutex attributes */
pthread_mutexattr_destroy(&mutex_attr); 
```

这个问题的原因可能是什么？

# linker - go + cgo 和链接

> ID：14842980
> 
> 赞同：6
> 
> 时间：2013-02-12T22:24:06.010
> 
> 标签：linker, go, cgo

我想使用以下 c 作为 Go 的 cgo：

```
#include <X11/extensions/scrnsaver.h>

main() {
  XScreenSaverInfo *info = XScreenSaverAllocInfo();
  Display *display = XOpenDisplay(0);

  XScreenSaverQueryInfo(display, DefaultRootWindow(display), info);
  printf("%u ms\n", info->idle);
} 
```

构建：

```
gcc -o idle printXIdleTime.c -lX11 -lXss 
```

我为 Go 的 cgo 重写了该代码：

```
package tools

// #cgo pkg-config: x11
// #include <X11/extensions/scrnsaver.h>
import "C"

func GetIdleTime() (idleTime uint32) {
    var info *C.XScreenSaverInfo
    var display *C.Display 

    info = C.XScreenSaverAllocInfo()
    display = C.XOpenDisplay(0)

    defaultRootWindow := C.XDefaultRootWindow(display)

    C.XScreenSaverQueryInfo(display, defaultRootWindow, info)
    idleTime = info.idle

    return
} 
```

尝试编译：

```
go build -gccgoflags="-lXss -lX11" 
```

但是我收到链接器错误：

> /tmp/go-build076004816/opensource.stdk/lib/tools/_obj/x11.cgo2.o：在函数`_cgo_c0e279f6f16e_Cfunc_XScreenSaverAllocInfo': ./x11.go:52: undefined reference to`XScreenSaverAllocInfo' /tmp/go-build076004816/opensource.stdk/lib/tools/_obj/x11.cgo2.o 中：在函数`_cgo_c0e279f6f16e_Cfunc_XScreenSaverQueryInfo': ./x11.go:65: undefined reference to`XScreenSaverQueryInfo' collect2: error: ld returned 1 exit status

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T23:06:45.393

这就是我构建它的方式。请注意`#cgo LDFLAGS`可能是您缺少的行。我必须进行一些其他更改才能构建它。它似乎在我的 Linux 机器上返回了正确的答案！

```
package tools

// #cgo LDFLAGS: -lXss -lX11
// #include <X11/extensions/scrnsaver.h>
import "C"

func GetIdleTime() (idleTime uint32) {
    var info *C.XScreenSaverInfo
    var display *C.Display

    info = C.XScreenSaverAllocInfo()
    display = C.XOpenDisplay(nil)

    defaultRootWindow := C.XDefaultRootWindow(display)

    C.XScreenSaverQueryInfo(display, C.Drawable(defaultRootWindow), info)
    idleTime = uint32(info.idle)

    return
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:44:40.467

请注意，这可以通过本机[X Go Binding](https://github.com/BurntSushi/xgb)和 ScreenSaver 扩展来完成：

```
package main

import (
    "fmt"
    "log"

    "github.com/BurntSushi/xgb"
    "github.com/BurntSushi/xgb/xproto"
    "github.com/BurntSushi/xgb/screensaver"
)

func main() {
    X, err := xgb.NewConn()
    if err != nil {
        log.Fatal(err)
    }

    if err = screensaver.Init(X); err != nil {
        log.Fatal(err)
    }

    root := xproto.Setup(X).DefaultScreen(X).Root
    info, err := screensaver.QueryInfo(X, xproto.Drawable(root)).Reply()
    if err != nil {
        log.Fatal(err)
    }

    fmt.Printf("Idle: %d\n", info.MsSinceUserInput)
} 
```

输出：

```
[andrew@Liger go] go run xscreensaver_idle.go 
Idle: 1040 
```

# ruby-on-rails - 带有 jquery 掩码的 Rails 茧宝石问题：每次都创建新条目

> ID：14842984
> 
> 赞同：0
> 
> 时间：2013-02-12T22:24:21.267
> 
> 标签：ruby-on-rails, maskedinput, cocoon-gem

我正在使用 Cocoon 1.1.1 为`Person`模型嵌套电话字段。我想有一个电话号码的输入掩码，所以我包含`jquery.maskedinput-1.3.min.js`在 javascript 文件夹下。

似乎当我应用掩码时，提交给 Rails 的参数缺少`id`手机属性：

```
 "phones_attributes"=>{"0"=>{"number"=>"214-648-4417", "label"=>"Work", "_destroy"=>"", "id"=>''}}} 
```

这每次都会创建新条目。在这一点上，我没有添加新的电话号码，只是点击更新。

这是我的咖啡脚本：

```
jQuery.fn.addPhoneMasks = ->
  $('input[id*="phone"]').each ->
    $(this).mask("999-999-9999?")

jQuery ->
  $('div#phones').addPhoneMasks() 
```

（注意：我需要使用插入回调将掩码应用于新插入的电话字段，但我还没有:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:44:01.283

我发现了我的错误：不应该使用掩码，`id*="phone"`因为 jquery 插件向 cocoon 的隐藏字段添加了一个值。

我的解决方案是为手机创建一个类，然后使用它来进行选择。

# vim - vim wildmenu：使用不同的键移入子目录

> ID：14842987
> 
> 赞同：4
> 
> 时间：2013-02-12T22:24:26.827
> 
> 标签：vim

这一直困扰着我很长时间。我喜欢使用 wildmenu 在命令模式下浏览目录。问题是要进入子目录，我需要使用`<down>`总是遥不可及的密钥。我试图做一些映射来克服这个问题，但没有成功。例如：

```
cnoremap <C-j> <DOWN> 
```

但是如果我`<C-j>`想在wildmenu中输入子目录时按下，菜单就会消失并`^I`出现在命令行的末尾。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T08:51:00.993

Christian Brabandt 在 vi​​m_dev 上提出了一个[不同的解决方案](http://groups.google.com/group/vim_dev/browse_thread/thread/c5fe5345be2e4786)：为了使您的原始映射正常工作，您需要设置`'wildcharm'`为与以下相同的值`'wildchar'`：

```
:let &wildcharm = &wildchar
:cnoremap <C-j> <DOWN> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T08:22:17.730

我可以重现这个。看起来命令行映射（与 相同`<Tab>`，而不仅仅是`<Down>`）不是在 wildmenu 模式下解释的，而是退出它并插入`'wildchar'`字面意思。您可以将此报告给[vim_dev 邮件列表](http://www.vim.org/community.php)。我认为还需要一个`wildmenuvisible()`类似的功能`pumvisible()`，以便映射可以根据野菜单当前是否处于活动状态而表现不同。

不过，您可以使用 解决此问题`feedkeys()`：

```
function! EnterSubdir()
    call feedkeys("\<Down>", 't')
    return ''
endfunction
cnoremap <expr> <C-j> EnterSubdir() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-26T14:41:08.433

这可能是 Vim 补丁[8.2.2221](https://github.com/vim/vim/commit/b0ac4ea5e1c5f0ff4e951978c32ccfffe46916f8)修复的错误。

# json - 为 MongoDB 导入准备 JSON

> ID：14842990
> 
> 赞同：1
> 
> 时间：2013-02-12T22:24:37.370
> 
> 标签：json, mongodb, express, mongoimport

据我了解，为了将 JSON 导入 MongoDB *mongoimport*，每行需要一个 JSON 字符串。是否有任何工具可以将普通的 JSON 文档转换为这种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:18:48.303

最简单的方法是使用正则表达式，很多txt编辑器都支持RE，要查找换行符可以使用“\r\n”或“\n”表达式，windows env上的NotePad++支持，我刚刚测试成功。

您可以使用正则表达式创建一个简单的实用程序来删除它，或者在以下链接中您可以看到有关一些基于查找/替换正则表达式的工具的讨论，包括 linux 命令行：[寻找轻量级正则表达式查找和替换工具](https://stackoverflow.com/questions/6713053/looking-for-a-lightweight-regex-find-and-replace-tool)

问候， 莫西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T03:07:26.960

*   您可以在命令提示符下使用此命令导入 JSON 文件

```
mongoimport -d tymongo -c test --type csv --file database2.csv --headerline 
```

*   其中 d- 数据库（tymongo 数据库名称），c-collection（测试集合名称）

# android - 从 Widget 以编程方式设置 TextView 高度

> ID：14842993
> 
> 赞同：0
> 
> 时间：2013-02-12T22:24:52.260
> 
> 标签：android, widget, textview, height

我正在为 Android 编写一个小部件。为此，我试图以编程方式设置几个 TextViews 的高度。现在，我知道如何在 Activity 中以编程方式设置 TextView 的高度。我读过你可以这样做：

```
LayoutParams layoutParams = textView.getLayoutParams();
layoutParams.height = 70;
textView.setLayoutParams(layoutParams); 
```

但是，如何从**Widget**以编程方式设置 TextView 的高度？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T22:34:02.883

在小部件中，您的意思是 TextView 本身，然后使用以下方法：

textView.setHeight(70)

# c++ - OpenCV 中的 cvMat 图像显示

> ID：14842994
> 
> 赞同：0
> 
> 时间：2013-02-12T22:24:57.840
> 
> 标签：c++, opencv, image-processing, computer-vision

谁能帮我编写代码以`cvMat`在 OpenCV 的窗口中显示数据结构类型的图像。该函数`cvShowImage()`适用于类型`IplImage`，也不适用于`cvMat`类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:30:36.950

这很简单：

```
// Open the window
cv::namedWindow("foo");

// Display the image m in this window
cv::imshow("foo", m); 
```

# python - 无法让我的 GUI 按钮在我的星星上运行

> ID：14842995
> 
> 赞同：-2
> 
> 时间：2013-02-12T22:25:01.353
> 
> 标签：python, user-interface, pygame

我无法让我的 pygame GUI 按钮在我创建的星表上工作，谁能帮我解决这个问题。

**我的代码**

```
import os,sys,random
import pygame
from pygame.locals import *
pygame.init()

def start_menu(screen):

    font = pygame.font.Font('freesansbold.ttf', 40)
    image = pygame.Surface((50,50))
    image.fill((0,0,0))
    pygame.draw.polygon(image,(255,255,255),[(200,200),(0,50),(25,25)],5)
    pos = 1
    option1 = font.render("BEGIN",True,(255,255,255))
    option2 = font.render("MY PROFILE",True,(255,255,255))
    option3 = font.render("INSTRUCTIONS",True,(255,255,255))
    option4 = font.render("QUIT",True,(255,255,255))

    N = 200
    SCREEN_W, SCREEN_H = (900, 600)
    pygame.init()

    pygame.display.set_caption('Starts Ja')

    background = pygame.Surface(screen.get_size())
    background = background.convert()

    stars = [
        [random.randint(0, SCREEN_W),random.randint(0, SCREEN_H)]
        for x in range(N)
    ]
    clock = pygame.time.Clock()
    while 1:
        for e in pygame.event.get():
            if e.type == QUIT:
                exit()
            elif e.type == KEYDOWN:
                if e.key == K_DOWN:
                    pos += 1
                    if pos > 4: pos = 1
                elif e.key == K_UP:
                    pos -= 1
                    if pos < 1: pos = 4
                elif e.key == K_RETURN:
                    if pos == 1:
                        import MathsvadersReal
                    elif pos == 4:
                        exit()
            clock.tick(22)
            screen.blit(option1,(100,100))
            screen.blit(option2,(200,200))
            screen.blit(option3,(200,300))
            screen.blit(option3,(200,400))
            screen.blit(image,(20,pos*100))
            background.fill((0,0,0))
            for star in stars:
                    pygame.draw.line(background,
                        (255, 255, 255), (star[0], star[1]), (star[0], star[1]))
                    star[0] = star[0] - 1
                    if star[0] < 0:
                        star[0] = SCREEN_W
                        star[1] = random.randint(0, SCREEN_H)
            screen.blit(background, (0,0))
            pygame.display.flip()

if __name__ == '__start_menu__': start_menu() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:58:24.077

您的问题相当模糊，您发布的代码非常混乱。

我认为您的问题很可能是您将选项文本绘制到屏幕上，然后用您的星空完全覆盖它。
您应该将选项和光标向下移动到`screen.blit(background, (0,0))`.
但是，发布的代码还有很多其他问题：

1.  压痕无处不在。我怀疑这是一个复制和粘贴问题，而不是您代码中的实际错误，但这意味着没有人可以在不首先尝试弄清楚您的意思并自己修复它的情况下运行它。
2.  `__name__`永远不等于`'__start_menu__'`。这段代码通常是从其他地方调用的吗？很难知道如何正确运行它。
3.  `start_menu`接受一个参数，但没有调用。
4.  您调用了`pygame.init()`，但没有调用 ，`pygame.display.set_mode()`因此在此示例中未创建任何窗口。如果你假设显示已经被初始化并传入，你不应该再次初始化 pygame。
5.  你画了两次option3，不画option4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:30:38.797

好的，正如[@Weeble](https://stackoverflow.com/a/14843443/1931274)所述，您的代码非常错误。
我对您的代码进行了很多更改，包括：

1.  制作了显示文本和绘制星星的功能，以提高可读性。
2.  不需要背景屏幕（已删除）；屏幕就够了。
3.  通过按类别划分块使代码更具可读性。
4.  为提高可读性而进行了许多更改。

我不得不花很多时间在这上面。

但是，（仍然）
我没有将代码作为函数或`if __name__ == ...`检查。
你需要做点什么！对？（如果没有，请退出编程！）

这是您的代码的重新组装版本，结果证明它更具可读性。

```
import os,sys,random
import pygame
# NEVER use from ... import *, even if pygame docs tell you to do so.

def disp(phrase, loc, screen, color): # func to display text
    s = font.render(phrase, True, color)
    screen.blit(s, loc)

def draw_star(star): # drawing a star
    # you only need to change a pixel, so use set_at, not draw.line
    screen.set_at((star[0], star[1]), (255, 255, 255)) 
    star[0] -= 1
    if star[0] < 0:
        star[0] = screen.get_width()
        star[1] = random.randint(0, screen.get_height())

# Divide your code into parts on the basis of what it does like
# initialising pygame
pygame.init()
screen = pygame.display.set_mode((640,480))
pygame.display.set_caption('Menu')
font = pygame.font.Font('freesansbold.ttf', 40)
clock = pygame.time.Clock()

# defining the image/marker
image = pygame.Surface((30,50))
image.fill((0,0,0))
pygame.draw.polygon(image,(255,255,255),[(0,0),(0,50),(25,25)],5)

# creating list of stars, used multi-line for loop for readability
stars = []
for i in range(200):
    x = random.randint(0, screen.get_width())
    y = random.randint(0, screen.get_height())
    stars.append([x,y])

pos = 1
while True:
    # events
    for e in pygame.event.get():
        if e.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        elif e.type == pygame.KEYDOWN:
            if e.key == pygame.K_DOWN:
                pos += 1
                if pos > 4:
                    pos = 1
            elif e.key == pygame.K_UP:
                pos -= 1
                if pos < 1:
                    pos = 4
            elif e.key == pygame.K_RETURN:
                if pos == 1:
                    import MathsvadersReal
                elif pos == 4:
                    pygame.quit()
                    sys.exit()

    screen.fill((0,0,0))

    # displaying text,image
    disp("Begin"       , (100,100), screen, (255, 255, 255))
    disp("My Profile"  , (100,200), screen, (255, 255, 255))
    disp("Instructions", (100,300), screen, (255, 255, 255))
    disp("Quit"        , (100,400), screen, (255, 255, 255))
    screen.blit(image,(50, (pos * 100)-10 ))

    # drawing stars
    for star in stars:
        draw_star(star)

    pygame.display.flip()
    clock.tick(22) 
```

# jquery - 顶部窗口的绝对div位置

> ID：14842997
> 
> 赞同：0
> 
> 时间：2013-02-12T22:25:09.443
> 
> 标签：jquery, window, absolute, css-position

jquery中有什么方法可以将具有位置的div定位：在css中绝对，并且他的父级具有位置：相对，到窗口的顶部？div 我指的是轮播的一部分，所以他的位置总是会改变，但无论他的父位置如何，我都希望这个 div 始终保持在浏览器窗口的顶部。如果有一种方法可以计算这个 div 离窗口顶部位置有多远，而不是 jquery 根据它来改变顶部位置，谢谢。div 绝对它的向右滑动，而 div 相对它的滑动滑动，但它们都改变了这个轮播中的位置，并且向右滑动它的隐藏，直到它显示时被点击，我需要它总是从窗口顶部显示。

```
 <div class="swiper-slide">
  <div class="slide-left">
  <div class="slider_arrow"></div> 
  <img src="images/iDangerous/img_thumb1_hover.png"   
  class=""  alt=".">
  </div><!-- end slide-left-->
   <div class="slide-right"> 
   <h1>Foundation Stone Laying Ceremony</h1>
  <p>Lorem Ipsum in Hong Kong celebrates the construction of a new primary and     secondary campus in Kowloon Bay with a Foundation Stone Laying Ceremony</p>
   </div><!-- end slide-right-->
  </div><!-- end swiper-slide--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:40:52.620

使用`offset()`方法来确定父元素相对于文档的位置。然后从零中减去顶部和左侧的值以应用于子项：

```
var parentOffset=$('#parent').offset();
$('#child').css({top: 0- parentOffset.top, left:0- parentOffset.left}); 
```

演示：http: [//jsfiddle.net/mTqcP/](http://jsfiddle.net/mTqcP/)

API参考：[http ://api.jquery.com/offset](http://api.jquery.com/offset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:43:26.320

以下是如何在 dom ready 和每个 window 上移动 relative>parent div [`resize`](http://api.jquery.com/resize/)。还使用 jquery`offset()`函数的宽度和高度对象参数

[http://jsbin.com/uziyes/1/edit](http://jsbin.com/uziyes/1/edit)