# StackOverflow 问答 12989000-12989999

# javascript - Three.js 使用 Ray 检测 2 个移动对象之间的碰撞

> ID：12989000
> 
> 赞同：3
> 
> 时间：2012-10-20T13:41:08.230
> 
> 标签：javascript, collision-detection, three.js

我正在使用 THREE.js 和 WebGL 渲染制作一个 3D 突破游戏。我想用 THREE.Ray 来检测弹跳球和底部平台之间的碰撞，这可以由你控制，但是我遇到了麻烦。

我已经设法将光线从平台投射到球（或其他方式），但一旦我这样做，球就会卡在屏幕中间并且无法动画。

```
var ray = new THREE.Ray( platform.position, ball.position.subSelf( platform.position ).normalize() );
var intersects = ray.intersectObject( ball );

if ( intersects.length > 0 ) console.log(intersects[0].distance); 
```

我试过删除`subSelf`and`normalize()`但这会破坏检测。

这是游戏，代码可以在 script.js 中找到：

[http://dl.dropbox.com/u/4531743/WebGL/Breakout-3D/index.html](http://dl.dropbox.com/u/4531743/WebGL/Breakout-3D/index.html)

如果您打开控制台，您可以看到移动面板时距离值会发生变化，这很好。但是球不能被动画化，因为在每一帧它都被设置到那个位置。

[http://dl.dropbox.com/u/4531743/WebGL/Breakout-3D/index.html#disableRay](http://dl.dropbox.com/u/4531743/WebGL/Breakout-3D/index.html#disableRay)

以上是我最初的做法，只是通过计算球和面板的 Z 位置并查看它是否更大并且在面板的宽度 (x) 坐标内，如果是，则将其反弹。

球的弹跳只是每帧将 X 和 Z 坐标改变一个固定的量，如果它在任一方向上走得太远，则反转该量使其返回。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T21:51:10.163

在玩了一些之后，我解决了。

```
var ray = new THREE.Ray( ball.position, new THREE.Vector3(ball.position.x, ball.position.y, platform.position.z).subSelf( ball.position ).normalize() );

var intersects = ray.intersectObject( platform );

if ( intersects.length > 0 ) {

    var face = intersects[0].face.d,
    dist = intersects[0].distance;

    if(face == 4 && dist <= 7) sizes.ball.velocityZ = -sizes.ball.velocityZ;

}; 
```

基本上，这样我总是从球直接向下投射光线，如果平台在它的正下方并且到平台的距离足够近，我会反转球的方向。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T14:13:05.503

有一个碰撞检测的例子： [http ://stemkoski.github.com/Three.js/Collision-Detection.html](http://stemkoski.github.com/Three.js/Collision-Detection.html)

有关如何移动立方体的说明，请参阅： [http ://stemkoski.github.com/Three.js/#collision-detection](http://stemkoski.github.com/Three.js/#collision-detection)

# java - 使用构造函数扩展类

> ID：12989002
> 
> 赞同：1
> 
> 时间：2012-10-20T13:41:21.523
> 
> 标签：java, class, constructor

嘿伙计们，我有一个叫做客户端的类。我想将它的功能分成两个子类：ClientListner 和 ClientSender。它自己的客户端有一个如下所示的构造函数：

**客户端构造函数**

```
public Client(Socket socket, PrintWriter pw, Scanner input, MainGui mg){
    this.mg = mg;
    this.socket = socket;
    this.input = input;
    this.pw = pw;
} 
```

当我的其他两个类扩展这个客户端时，Eclipse 要求我实现构造函数并自动生成以下内容：

**ClientSender 自动生成的构造函数**

```
public ClientSender(Socket socket, PrintWriter pw, Scanner input, MainGui mg) {
    super(socket, pw, input, mg);
    // TODO Auto-generated constructor stub
} 
```

因此，当我在我的 Gui 中并想创建一个新的 Clientlistner 时，我必须传递所有这些信息，难道没有办法避免这种情况吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:44:47.527

如果你不想在构造函数中传递任何东西，你可以`no-arg`在你的父类中有一个构造函数。

编辑：在你的`Client`类中只写这段代码它是一个`no-arg`构造函数：

```
public Client(){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:47:53.910

假设您要用于`ClientSender`处理所有传出内容并`ClientReceiver`处理 a 的所有传入内容`Client`，它们应该是不同的类，它们采用套接字`OutputStream`并且`InputStream`一旦创建了客户端。因此，它们应该是 Client 类中的成员，而不是 Client 的子类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:49:26.820

我将删除 Client 构造函数中的变量，因此它只包含 ClientListner 和 ClientSender 都使用的变量。

# jquery - 使用基本 json 获取 twitter api

> ID：12989005
> 
> 赞同：2
> 
> 时间：2012-10-20T13:41:30.757
> 
> 标签：jquery, json, api, twitter

我对 jQuery 相当陌生，我试图使用 JSON 来获取 twitter api，但我设法用 php 做到了我写了这段简单的代码，但它似乎不起作用

```
(function() 
{
    $(document).ready(function()
    {
        $.getJSON("https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true",function(data)
        {
            var ragzor = data.name;
            $(".ragzor").text(ragzor);
            console.log(ragzor);
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:55:34.620

```
jQuery(function($) { // Shorter for $(document).ready(function() {, and you make sure that $ refers to jQuery.
    $.ajax({ // All jQuery ajax calls go throw here. $.getJSON is just a rewrite function for $.ajax
        url: "https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true",
        dataType: "jsonp", // dataType set to jsonp (important)
        success: function( resp ) {
            console.log( resp ); // Here resp represents the data reseved from the ajax call.
        }
    });
}); 
```

* * *

jQuery 源代码：

```
$.getJSON = function( url, data, callback ) {
    return jQuery.get( url, data, callback, "json" );
} 
```

将您重定向到`$.get`

```
jQuery.each( [ "get", "post" ], function( i, method ) {
    jQuery[ method ] = function( url, data, callback, type ) {
        // shift arguments if data argument was omitted
        if ( jQuery.isFunction( data ) ) {
            type = type || callback;
            callback = data;
            data = undefined;
        }

        return jQuery.ajax({
            type: method,
            url: url,
            data: data,
            success: callback,
            dataType: type
        });
    };
}); 
```

屁股你可以看到这返回一个初始化版本`$.ajax`

* * *

所以你的电话重写为：

```
$.ajax({
    url: "...",
    dataType: "json" // <- Note json not jsonp,
    success: function() {
        // ...
    }
}); 
```

# xml - 平均，从高到低格式数排序

> ID：12989009
> 
> 赞同：1
> 
> 时间：2012-10-20T13:42:32.453
> 
> 标签：xml, xslt, xslt-1.0

发现以下 xsl/xml 问题在回答时需要帮助。将其视为挑战。问题：1-获取每个大陆的平均值（格式-编号“###，###.00”），
2-每批次的总数，应该从高到低排序，
3-最昂贵的批次刚刚
列出试图获得一些模板（如下）请帮助提出一个模板，该模板将运行以产生所需的结果总批次（最高到最低）=
每个大陆的平均值=###.00 = 昂贵批次的前三名=

```
<?xml version="1.0" encoding="UTF-8"?>
    <?xml-stylesheet type="text/xsl" href="factory.xslt"?>

 <factory>
    <branch>
        <continent>North America</continent>
        <location>usa</location>
        <address>671 fourth avenue</address>
        <batch>
            <car_make>
                <name>toyota</name>
                <number_of_makes>20</number_of_makes>
                <price_per_make>12000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>opel</name>
                <number_of_makes>5</number_of_makes>
                <price_per_make>10000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>Europe</continent>
        <location>france</location>
        <address>671 paris</address>
        <batch>
            <car_make>
                <name>nissan</name>
                <number_of_makes>10</number_of_makes>
                <price_per_make>20000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>North America</continent>
        <location>detroit</location>
        <address>45 parklane</address>
        <batch>
            <car_make>
                <name>doge</name>
                <number_of_makes>40</number_of_makes>
                <price_per_make>35000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>cadillac</name>
                <number_of_makes>20</number_of_makes>
                <price_per_make>14000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>Europe</continent>
        <location>germany</location>
        <address>675 berlin avenue</address>
        <batch>
            <car_make>
                <name>opel</name>
                <number_of_makes>42</number_of_makes>
                <price_per_make>19000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>mercedes</name>
                <number_of_makes>20</number_of_makes>
                <price_per_make>24000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>North America</continent>
        <location>texas</location>
        <address>46 parkland way</address>
        <batch>
            <car_make>
                <name>hummer</name>
                <number_of_makes>30</number_of_makes>
                <price_per_make>45000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>cadillac</name>
                <number_of_makes>20</number_of_makes>
                <price_per_make>14000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>Asia</continent>
        <location>india</location>
        <address>67 new delhi way</address>
        <batch>
            <car_make>
                <name>tata</name>
                <number_of_makes>12</number_of_makes>
                <price_per_make>25000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>ford</name>
                <number_of_makes>20</number_of_makes>
                <price_per_make>20000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>Asia</continent>
        <location>japan</location>
        <address>56 yorki avenue</address>
        <batch>
            <car_make>
                <name>mazda</name>
                <number_of_makes>40</number_of_makes>
                <price_per_make>23000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>hyundai</name>
                <number_of_makes>20</number_of_makes>
                <price_per_make>10000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>Asia</continent>
        <location>korea</location>
        <address>12 yung </address>
        <batch>
            <car_make>
                <name>skyline</name>
                <number_of_makes>14</number_of_makes>
                <price_per_make>18000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>toyota</name>
                <number_of_makes>40</number_of_makes>
                <price_per_make>12000</price_per_make>
            </car_make>
        </batch>
    </branch>
    <branch>
        <continent>Europe</continent>
        <location>england</location>
        <address>56 parklane</address>
        <batch>
            <car_make>
                <name>bentely</name>
                <number_of_makes>24</number_of_makes>
                <price_per_make>50000</price_per_make>
            </car_make>
        </batch>
        <batch>
            <car_make>
                <name>ferrari</name>
                <number_of_makes>10</number_of_makes>
                <price_per_make>120000</price_per_make>
            </car_make>
        </batch>
    </branch>
</factory> 
```

以下是xslt 1.0版

```
<xsl:template match="/*">
  TOTAL BATCH:-<a>
    $<xsl:call-template name="sumProducts">
      <xsl:with-param name="pNodes" select="/*/*/*/batch"/>
      <xsl:with-param name="pName1" select="'number_of_make'"/>
      <xsl:with-param name="pName2" select="'price_per_make'"/>
    </xsl:call-template>
  </a><br/>
</xsl:template>

<xsl:template name="sumProducts">

  <xsl:param name="pNodes"/>
  <xsl:param name="pName1"/>
  <xsl:param name="pName2"/>
  <xsl:param name="pAccum" select="0"/>

  <xsl:choose>
    <xsl:when test="not($pNodes)">
      <xsl:value-of select="$pAccum"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="sumProducts">
        <xsl:with-param name="pNodes" select="$pNodes[position() >1]"/>
        <xsl:with-param name="pName1" select="$pName1"/>
        <xsl:with-param name="pName2" select="$pName2"/>
        <xsl:with-param name="pAccum" select="$pAccum + $pNodes[1]/*[name()=$pName1] * $pNodes[1]/*[name()=$pName2]"/>
      </xsl:call-template>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template name="TotalPrice">

  <xsl:param name="pList"/>
  <xsl:param name="pRunningTotal" select="0"/>

  <xsl:choose>
    <xsl:when test="$pList">
      <xsl:variable name="varMapPath" select="$pList[1]"/>
      <xsl:call-template name="TotalPrice">
        <xsl:with-param name="pList" select="$pList[position() > 1]"/>
        <xsl:with-param name="pRunningTotal"
         select="$pRunningTotal + $varMapPath/productpriceperunit * $varMapPath/productsordered"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$pRunningTotal"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:19:24.460

这是我的解决方案尝试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" version="4.0" />

<xsl:variable name="title">Troy's Stack Overflow XSLT Challenge</xsl:variable>

<xsl:template match="/*">
  <xsl:element name="html">
    <xsl:element name="head">
      <xsl:element name="title">
        <xsl:value-of select="$title"/>
      </xsl:element>
    </xsl:element>
    <xsl:element name="body">
      <xsl:element name="h1">
        <xsl:value-of select="$title"/>
      </xsl:element>

      <xsl:call-template name="AverageCarPricePerContinent" />
      <xsl:call-template name="TotalPerBatch" />
      <xsl:call-template name="TopNMostExpensiveBatches"><xsl:with-param name="n" select="3" /></xsl:call-template>

    </xsl:element>
  </xsl:element>
</xsl:template>

<xsl:template match="/factory/branch">
  <xsl:call-template name="ContinentAverage">
    <xsl:with-param name="continentName" select="./continent/text()" />
  </xsl:call-template>
</xsl:template>

<xsl:template name="AverageCarPricePerContinent">
  <xsl:element name="h2">
    <xsl:text>1\. Average Car Price Per Continent</xsl:text>
  </xsl:element>
  <xsl:element name="ol">
    <xsl:apply-templates select="/factory/branch[not(./continent=preceding-sibling::branch/continent)]" />
  </xsl:element>
</xsl:template>

<xsl:template name="TotalPerBatch">
  <xsl:element name="h2">
    <xsl:text>2\. Total Per Batch (&#x25bc;)</xsl:text>
  </xsl:element>
  <xsl:call-template name="OutputBatchesDesc">
    <xsl:with-param name="batches" select="/factory/branch/batch" />
  </xsl:call-template>
</xsl:template>

<xsl:template name="TopNMostExpensiveBatches">
  <xsl:param name="n" />
  <xsl:element name="h2">
    <xsl:value-of select="concat('3\. Top ',$n,' Most Expensive Batch(es)')"/>
  </xsl:element>
  <xsl:call-template name="OutputBatchesDesc">
    <xsl:with-param name="batches" select="/factory/branch/batch" />
    <xsl:with-param name="n" select="$n" />
  </xsl:call-template>
</xsl:template>

<xsl:template name="OutputBatchesDesc">
  <xsl:param name="batches" />
  <xsl:param name="n" select="count($batches)" />
  <xsl:element name="ol">
    <xsl:for-each select="$batches">

      <xsl:sort data-type="number" order="descending" select="(./car_make/price_per_make)[1] * (./car_make[1]/number_of_makes)[1]" />

      <xsl:if test="position() &lt;= $n">
        <xsl:element name="li">
          <xsl:value-of select="format-number(./car_make/price_per_make * ./car_make/number_of_makes, '0,000,000.00')"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="../continent/text()"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="../location/text()"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="../address/text()"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="./car_make/name/text()"/>
        </xsl:element>
      </xsl:if>

    </xsl:for-each>
  </xsl:element>
</xsl:template>

<xsl:template name="ContinentAverage">
  <xsl:param name="continentName" />
  <xsl:element name="li">
    <xsl:value-of select="$continentName"/>
    <xsl:text> - </xsl:text>
    <xsl:value-of select="format-number(sum(/factory/branch[./continent[text()=$continentName]]//batch/car_make/price_per_make/text()) div count(/factory/branch[./continent[text()=$continentName]]//batch/car_make/price_per_make), '###,###.00')"/>        
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

输出（HTML 源代码）

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Troy's Stack Overflow XSLT Challenge</title>
  </head>
  <body>
    <h1>Troy's Stack Overflow XSLT Challenge</h1>
    <h2>1\. Average Car Price Per Continent</h2>
    <ol>
      <li>North America - 21,666.67</li>
      <li>Europe - 46,600.00</li>
      <li>Asia - 18,000.00</li>
    </ol>
    <h2>2\. Total Per Batch (?)</h2>
    <ol>
      <li>1,400,000.00 - North America - detroit - 45 parklane - doge</li>
      <li>1,350,000.00 - North America - texas - 46 parkland way - hummer</li>
      <li>1,200,000.00 - Europe - england - 56 parklane - bentely</li>
      <li>1,200,000.00 - Europe - england - 56 parklane - ferrari</li>
      <li>0,920,000.00 - Asia - japan - 56 yorki avenue - mazda</li>
      <li>0,798,000.00 - Europe - germany - 675 berlin avenue - opel</li>
      <li>0,480,000.00 - Europe - germany - 675 berlin avenue - mercedes</li>
      <li>0,480,000.00 - Asia - korea - 12 yung  - toyota</li>
      <li>0,400,000.00 - Asia - india - 67 new delhi way - ford</li>
      <li>0,300,000.00 - Asia - india - 67 new delhi way - tata</li>
      <li>0,280,000.00 - North America - detroit - 45 parklane - cadillac</li>
      <li>0,252,000.00 - Asia - korea - 12 yung  - skyline</li>
      <li>0,240,000.00 - North America - usa - 671 fourth avenue - toyota</li>
      <li>0,200,000.00 - Europe - france - 671 paris - nissan</li>
      <li>0,200,000.00 - Asia - japan - 56 yorki avenue - hyundai</li>
      <li>0,050,000.00 - North America - usa - 671 fourth avenue - opel</li>
    </ol>
    <h2>3\. Top 3 Most Expensive Batch(es)</h2>
    <ol>
      <li>1,400,000.00 - North America - detroit - 45 parklane - doge</li>
      <li>1,350,000.00 - North America - texas - 46 parkland way - hummer</li>
      <li>1,200,000.00 - Europe - england - 56 parklane - bentely</li>
    </ol>
  </body>
</html> 
```

**编辑** 根据评论，现在更新为每个分支而不是每个批次计算第 2 部分和第 3 部分。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" version="4.0" />

  <xsl:variable name="title">Troy's Stack Overflow XSLT Challenge</xsl:variable>

  <xsl:template match="/*">
    <xsl:element name="html">
      <xsl:element name="head">
        <xsl:element name="title">
          <xsl:value-of select="$title"/>
        </xsl:element>
      </xsl:element>
      <xsl:element name="body">
        <xsl:element name="h1">
          <xsl:value-of select="$title"/>
        </xsl:element>

        <xsl:call-template name="AverageCarPricePerContinent" />
        <xsl:call-template name="TotalPerBranch" />
        <xsl:call-template name="TopNMostExpensiveBranches">
          <xsl:with-param name="n" select="3" />
        </xsl:call-template>

      </xsl:element>
    </xsl:element>
  </xsl:template>

  <xsl:template match="/factory/branch">
    <xsl:call-template name="ContinentAverage">
      <xsl:with-param name="continentName" select="./continent/text()" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="AverageCarPricePerContinent">
    <xsl:element name="h2">
      <xsl:text>1\. Average Car Price Per Continent</xsl:text>
    </xsl:element>
    <xsl:element name="ol">
      <xsl:apply-templates select="/factory/branch[not(./continent=preceding-sibling::branch/continent)]" />
    </xsl:element>
  </xsl:template>

  <xsl:template name="TotalPerBranch">
    <xsl:element name="h2">
      <xsl:text>2\. Total Per Branch (&#x25bc;)</xsl:text>
    </xsl:element>
    <xsl:element name="ol">
      <xsl:call-template name="OutputBranchesDesc">
        <xsl:with-param name="branches" select="/factory/branch" />
      </xsl:call-template>
    </xsl:element>
  </xsl:template>

  <xsl:template name="TopNMostExpensiveBranches">
    <xsl:param name="n" />
    <xsl:element name="h2">
      <xsl:value-of select="concat('3\. Top ',$n,' Most Expensive Branch(es)')"/>
    </xsl:element>
    <xsl:call-template name="OutputBranchesDesc">
      <xsl:with-param name="branches" select="/factory/branch" />
      <xsl:with-param name="n" select="$n" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="ContinentAverage">
    <xsl:param name="continentName" />
    <xsl:element name="li">
      <xsl:value-of select="$continentName"/>
      <xsl:text> - </xsl:text>
      <xsl:value-of select="format-number(sum(/factory/branch[./continent[text()=$continentName]]//batch/car_make/price_per_make/text()) div count(/factory/branch[./continent[text()=$continentName]]//batch/car_make/price_per_make), '###,###.00')"/>
    </xsl:element>
  </xsl:template>

  <xsl:template name="OutputBranchesDesc">
    <xsl:param name="branches" />
    <xsl:param name="n" select="count($branches)" />
    <xsl:choose>
      <xsl:when test="$branches and $n &gt; 0">
        <xsl:variable name="i">
          <xsl:call-template name="getHighest">
            <xsl:with-param name="branches" select="$branches" />
          </xsl:call-template>
        </xsl:variable>
        <xsl:variable name="branchValue">
          <xsl:call-template name="GetBranchValue">
            <xsl:with-param name="branch" select="$branches[position() = $i]" />
          </xsl:call-template>
        </xsl:variable>
        <xsl:element name="li">
          <xsl:value-of select="format-number($branchValue, '0,000,000.00')"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="$branches[position() = $i]/continent/text()"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="$branches[position() = $i]/location/text()"/>
          <xsl:text> - </xsl:text>
          <xsl:value-of select="$branches[position() = $i]/address/text()"/>
        </xsl:element>
        <xsl:call-template name="OutputBranchesDesc">
          <xsl:with-param name="branches" select="($branches)[position() != $i]" />
          <xsl:with-param name="n" select="$n - 1" />
        </xsl:call-template>
      </xsl:when>
    </xsl:choose>
  </xsl:template>

  <xsl:template name ="getHighest">
    <xsl:param name="branches" />
    <xsl:param name="highestValue" select="0" />
    <xsl:param name="highestIndex" select="0" />
    <xsl:param name="currentIndex" select="1" />
    <xsl:choose>
      <xsl:when test="$branches">

        <xsl:variable name="currentBranchValue">
          <xsl:call-template name="GetBranchValue">
            <xsl:with-param name="branch" select="$branches[position() = 1]" />
          </xsl:call-template>
        </xsl:variable>

        <xsl:variable name="highest">
          <xsl:choose>
            <xsl:when test="$highestValue &gt; $currentBranchValue">
              <xsl:value-of select="$highestValue"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="$currentBranchValue"/>
            </xsl:otherwise>
          </xsl:choose>
        </xsl:variable>

        <xsl:variable name="newHighestIndex">
          <xsl:choose>
            <xsl:when test="$highestValue &gt; $currentBranchValue">
              <xsl:value-of select="$highestIndex"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="$currentIndex"/>
            </xsl:otherwise>
          </xsl:choose>
        </xsl:variable>

        <xsl:call-template name="getHighest">
          <xsl:with-param name="branches" select="($branches)[position() &gt; 1]" />
          <xsl:with-param name="highestValue" select="$highest" />
          <xsl:with-param name="highestIndex" select="$newHighestIndex" />
          <xsl:with-param name="currentIndex" select="$currentIndex + 1" />
        </xsl:call-template>

      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$highestIndex"/>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template>

  <xsl:template name="GetBranchValue">
    <xsl:param name="branch" />
    <xsl:param name="value" select="0" />
    <xsl:param name="i" select="count($branch//batch)" />
    <xsl:choose>
      <xsl:when test="$i &gt; 0">
        <xsl:call-template name="GetBranchValue">
          <xsl:with-param name="branch" select="$branch" />
          <xsl:with-param name="i" select="$i - 1" />
          <xsl:with-param name="value" select="$value + (($branch//batch)[position() = $i]/car_make[1]/number_of_makes[1])[1] * (($branch//batch)[position() = $i]/car_make[1]/price_per_make[1])[1]" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$value"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

**更新的输出**

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Troy's Stack Overflow XSLT Challenge</title>
  </head>
  <body>
    <h1>Troy's Stack Overflow XSLT Challenge</h1>
    <h2>1\. Average Car Price Per Continent</h2>
    <ol>
      <li>North America - 21,666.67</li>
      <li>Europe - 46,600.00</li>
      <li>Asia - 18,000.00</li>
    </ol>
    <h2>2\. Total Per Branch (▼)</h2>
    <ol>
      <li>2,400,000.00 - Europe - england - 56 parklane</li>
      <li>1,680,000.00 - North America - detroit - 45 parklane</li>
      <li>1,630,000.00 - North America - texas - 46 parkland way</li>
      <li>1,278,000.00 - Europe - germany - 675 berlin avenue</li>
      <li>1,120,000.00 - Asia - japan - 56 yorki avenue</li>
      <li>0,732,000.00 - Asia - korea - 12 yung </li>
      <li>0,700,000.00 - Asia - india - 67 new delhi way</li>
      <li>0,290,000.00 - North America - usa - 671 fourth avenue</li>
      <li>0,200,000.00 - Europe - france - 671 paris</li>
    </ol>
    <h2>3\. Top 3 Most Expensive Branch(es)</h2>
    <li>2,400,000.00 - Europe - england - 56 parklane</li>
    <li>1,680,000.00 - North America - detroit - 45 parklane</li>
    <li>1,630,000.00 - North America - texas - 46 parkland way</li>
  </body>
</html> 
```

# vb.net - VB.NET 数据表。选择表达式

> ID：12989010
> 
> 赞同：0
> 
> 时间：2012-10-20T13:42:49.073
> 
> 标签：vb.net, linq, select, datatable

是否可以使用过滤器表达式来选择某些列？类似于`select a,b,c from table`sql 的东西

这就是我想要做的

```
 Dim rows() As DataRow = bookedorders.Select("a,b,c")   'select columns a b c only, i know its wrong
        Dim zzz As DataTable = rows.CopyToDataTable 
```

那么是否可以使用 Datatable.Select 来选择列并使用像 sql 这样的条件`WHERE a=1`

我的 linq 尝试是

```
Dim q = From r In bookedorders.AsEnumerable Select r.Field(Of Integer)("a") And r.Field(Of String)("b") And r.Field(Of String)("c") And r.Field(Of Integer)("d")
        For Each m In q
            zzz.Rows.Add(m)
        Next 
```

这似乎不起作用，它说数组中的项目数比数据表长！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:55:42.090

[DataTable.Select](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)允许您将过滤器指定为`String`：

```
bookedorders.Select("a = 1") 
```

您不能指定要提取的列，因为这会破坏类型结构，因为它预计返回与`DataRow`您最初的相同。如果您只返回特定的列，则需要另一个`DataTable`来包含它们。

假设此功能存在，限制返回列的数量是不切实际的，因为您的`DataRow`s 中已经填充了数据，不像`select a,b,c from table`，您可以通过仅指定要从数据库中提取的某些列来减少网络带宽并提高查询性能。

如果你想使用 LINQ，你可以这样做：

```
From r In bookedorders Select a=r.Field(Of Integer)("a"), b=r.Field(Of String)("b"), c=r.Field(Of String)("c"), d=r.Field(Of Integer)("d") 
```

请注意，您不能使用此查询的结果直接`.Add`对 a 进行行`DataTable`，因为返回的枚举不是 type `DataRow`。如果您非常需要它，这里是[MSDN 上的一个实现](http://msdn.microsoft.com/en-us/library/bb669096.aspx)。

# ruby - 如何在子类化 Ruby 哈希时覆盖 []= 方法？

> ID：12989011
> 
> 赞同：3
> 
> 时间：2012-10-20T13:42:48.490
> 
> 标签：ruby, hash

我有一个扩展哈希的类，我想跟踪哈希键何时被修改。

覆盖`[key]=`语法方法以完成此操作的正确语法是什么？我想插入我的代码，然后调用父方法。

这可以用C方法吗？我从文档中看到底层方法是

```
rb_hash_aset(VALUE hash, VALUE key, VALUE val) 
```

它是如何分配给括号语法的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T13:52:34.870

方法签名是`def []=(key, val)`, 并`super`调用父方法。这是一个完整的例子：

```
class MyHash < Hash
  def []=(key,val)
    printf("key: %s, val: %s\n", key, val)
    super(key,val)
  end
end

x = MyHash.new

x['a'] = 'hello'
x['b'] = 'world'

p x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T14:11:16.827

我认为 using`set_trace_func`是更通用的解决方案

```
class MyHash < Hash
  def initialize
    super
  end

  def []=(key,val)
    super
  end
end

set_trace_func proc { |event, file, line, id, binding, classname|
  printf "%10s %8s\n", id, classname if classname == MyHash
}

h = MyHash.new
h[:t] = 't'

#=>
initialize   MyHash
initialize   MyHash
initialize   MyHash
       []=   MyHash
       []=   MyHash
       []=   MyHash 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T13:49:37.810

```
class MyHash < Hash
  def []=(key,value)
    super
  end
end 
```

# php - YouTube iframe API 触发所有事件两次

> ID：12989015
> 
> 赞同：3
> 
> 时间：2012-10-20T13:43:40.867
> 
> 标签：php, javascript, iframe, youtube, youtube-api

虽然 YouTube API 使用[embedswf可以正常工作，但在使用](https://developers.google.com/youtube/js_api_reference#Examples)[iframe](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)嵌入播放器时，我的脚本无法正常工作。更具体地说，API 的 iframe 版本似乎会触发所有事件两次，从而导致各种问题，例如本示例中的问题（[托管](http://ytapi.host22.com/)）：

```
<html>

<head>
    <script type="text/javascript" src="http://www.youtube.com/iframe_api"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
</head>

<body>

This script initializes a YouTube API player in an iframe which cycles through the array an video IDs. Every time a video ends, the next video ID in the array is retrieved and its video is played. <b>Unfortunately, the player reports the ending of a video twice, which results in every other video being skipped</b>.

<pre>

<?php
$videos = array("TLU2DZqhsSs","8CJn4T5ulL8","gdzf5oQJWxo","VTxKMiPXOGU","BeuwxSHHFh8");
print_r($videos);
?>

</pre>

<div id="ytapiplayer">This text will be replaced by a player.</div>

<script type="text/javascript">
playlistids = <?php echo json_encode($videos); ?>;

var playing = playlistids[0];

var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var ytplayer;

function onYouTubeIframeAPIReady() {
    ytplayer = new YT.Player('ytapiplayer', {
        width: '922',
        height: '522',
        videoId: playing,
        events: {
            'onStateChange': onytplayerStateChange,
            'onReady': onPlayerReady
        }
    });
}

function onPlayerReady(event) {
    event.target.setPlaybackQuality('hd720')
    event.target.setVolume(100)
    alert('Start playing entry #0 (preloaded).')
    event.target.playVideo()
}

function play(ytid) {
    if (ytplayer) {
        playing = ytid
        alert('On to entry #'+ nextentrykey +', playing set to: ' + playing)
        ytplayer.loadVideoById(ytid, 0, "hd720");
    }
}

function onytplayerStateChange(event) {
    //alert('NEW STATE: ' + event.data)
    if ( event.data == 0 ) {
        alert('Since the new player state is '+ event.data +', the video has ended. Getting next key after playing ' + playing + '.');
        nextentrykey = parseInt(playlistids.getKey(playing))+1
        if (nextentrykey >= playlistids.length) {
                nextentrykey = 0
        }
        play(playlistids[nextentrykey]);
    }
}

Object.prototype.getKey = function(value){
  for(var key in this){
    if(this[key] == value){
      return key;
    }
  }
  return -1;
};
</script>

</body>

</html> 
```

我是否应该忽略从 API 获得的所有其他调用并实施解决方法？还是可以以更明智的方式解决这个问题？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:08:53.927

我认为问题在于您两次加载 iframe_api 库

并在 YouTubeIframeAPIReady 上运行两次

尝试删除这些行：

```
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

# overflow - 屏幕变小时溢出问题

> ID：12989019
> 
> 赞同：0
> 
> 时间：2012-10-20T13:43:48.813
> 
> 标签：overflow, center

我正在使用以下 CSS 代码来制作屏幕的 div 中心。

```
center {
top:50%;
top: 50%;
left: 50%;
width:30em;
height:18em;
margin-top: -9em; /*set to a negative number 1/2 of your height*/
margin-left: -15em; /*set to a negative number 1/2 of your width*/
border: 1px solid #ccc;
background-color: #f3f3f3;
position:absolute;
overflow: auto;
display: block; 
```

}

但问题是，当我调整屏幕大小并且屏幕变得小于上述 div 时，div 的某些部分正在消失。我已将溢出选项设置为自动，但我仍然面临问题。当屏幕小于 div 时，我需要滚动条。

请帮助解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:46:45.310

将此 CSS 添加到中心：

```
center{
....
    min-width: 700px;
} 
```

# c# - 如何让 Visual C# studio 识别按键输入

> ID：12989029
> 
> 赞同：3
> 
> 时间：2012-10-20T13:45:08.523
> 
> 标签：c#, text, input

我对 C# 和编程很陌生。基本上我的问题是我正在尝试制作一个使用键输入的简单代码，但是当我运行（调试）程序时，它根本无法识别任何键输入。KeyPreview 设置为 true，但它似乎仍然没有做任何事情。你能告诉我我做错了什么吗？谢谢你。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public List<string> list = new List<string>();
        public Form1()
        {
            InitializeComponent();
            KeyPreview = true;
        }
        private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.F3)
        {
            list.Add("OMG!");
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(list[0]);
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:57:19.720

在表单描述中编写方法不会将其链接到有人按下某个键时触发的事件。在设计器（提供表单预览并允许您对其进行控制的视图）内部，在属性面板中，顶部有一个闪电图标。如果您按下它，它会列出该表单中公开的所有事件。您可以双击 KeyDown 事件，它会自动创建正确的方法并添加：

```
this.KeyDown += new System.Windows.Forms.KeyEventHandler(this.Form1_KeyDown); 
```

在设计器自动生成的 .Designer.cs 文件中。仅当表单内的控件具有焦点时，您才需要 KeyPreview ......这可能是这种情况。

# javascript - 具有相同按钮的Jquery单击功能显示不同的文本

> ID：12989036
> 
> 赞同：2
> 
> 时间：2012-10-20T13:46:17.427
> 
> 标签：javascript, jquery

大家好，我正在尝试使用单击功能。当用户单击按钮时，将出现第二个文本，第一个文本将不显示，然后用户再次单击相同的按钮，这次将出现第三个文本并显示第二个文本最后再次单击相同的按钮第四个文本将出现第三个显示无。这是我的功能：

```
$("#slider1next").click(function () {
    $(".text").css('display', '');
    $("#first_one").css('display','none');                   
}); 
```

这是HTML

```
 <button id="slider1next" >Clickme</button>
  <p class="text" id="first_one">This is the first text</p>
  <p class="text" id="second_one" style="display:none">This is the second text</p>
  <p class="text" id="third_one" style="display:none">This is the third text</p>
  <p class="text" id="fourth_one" style="display:none">This is the four text</p>​ 
```

你也可以在那里看到[http://jsfiddle.net/ganymedes/7kxAE/](http://jsfiddle.net/ganymedes/7kxAE/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:49:20.087

```
$("#slider1next").click(function () {
    $(".text:visible").hide().next().show();
}); 
```

换句话说，每一次点击，你都会[`hide`](http://api.jquery.com/hide/)得到[`:visible`](http://api.jquery.com/visible-selector/)文本和[`show`](http://api.jquery.com/show/)文本[`next`](http://api.jquery.com/next/)。

**[演示](http://jsfiddle.net/joaopsilva/gjGvn/)**。

如果您想在到达最后一个时循环回到第一个`p`，请改用以下内容：

```
$("#slider1next").click(function () {
    var $next = $(".text:visible").hide().next();
    $next.length ? $next.show() : $(".text:first").show();
}); 
```

**[演示](http://jsfiddle.net/joaopsilva/gjGvn/3/)**。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:57:44.987

为了恢复到开始，您需要检查是否有`next`其他使用第一个。`toggle()`方法将反转元素的显示

```
$("#slider1next").click(function() {
    var $curr= $('.text:visible');
    var $next= $curr.next().length ? $curr.next() : $('.text').first()
    $curr.add( $next).toggle();  
}); 
```

演示 [http://jsfiddle.net/XQJFQ/](http://jsfiddle.net/XQJFQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:57:35.897

你必须以某种方式选择哪一个。现在您只显示所有文本。然后只隐藏第一个。

首先更改html的第一个元素。您不需要定义 id。文本类就足够了。

```
<p class="text active">This is the first text</p> 
```

然后改变你的点击功能

```
$("#slider1next").click(function () {

    // get current
    var cur = $('.text.active').index('.text');

    // calculate next
    var next = cur+1 % $('.text').length();

    // hide all
    $(".text").hide();

    // show next
    $($('.text')[next]).show();

    // update active
    $('.text.active').removeClass('active');
    $($('.text')[next]).addClass('active');
}); 
```

# jquery - 从已使用 AJAX 插入到 DOM 的元素中获取数据属性

> ID：12989037
> 
> 赞同：0
> 
> 时间：2012-10-20T13:46:23.547
> 
> 标签：jquery

我需要从使用 ajax 请求添加到 DOM 的元素中获取数据属性。我所拥有的内容与在页面加载时加载的元素完美配合，但在使用 ajax 添加时却不行。我假设`.data()`它不能作为实时函数持续工作，因为在萤火虫中，从 DOM 获得的另一个变量被发送，但数据属性不是。

这是我所拥有的：

```
window.setInterval(function(){
  $(".ago-time").each(function(idx) {
    var $self = $(this);
    $.get("phpscripts/get_new_time.php", {
      old_ts: $self.data("ts2"),
      index: idx
    }, function(result) {
      $self.html(result);
    });
  });
}, 1000); 
```

我尝试过使用 on 和 live 属性，但这只是破坏了整个事情。可能有一些非常简单的事情需要做。

# jquery - 使图像映射翻转以正确运行

> ID：12989042
> 
> 赞同：1
> 
> 时间：2012-10-20T13:47:02.563
> 
> 标签：jquery, html, imagemap

我正在使用几个图像映射来创建一些三角形按钮，但是在使悬停效果（内联 jquery，不理想但找不到替代方法）正常运行时遇到了一些困难。

```
<div id="triangle">
    <img src="triangle.png" alt="..." usemap="#imgmap"/>
    <map name="imgmap" id="imgmap">
        <area shape="poly" coords="0,100,50,0,100,100" href="#" target="_self" onmouseover="$('#prevslide').css('opacity','1');" onmouseout="$('#prevslide').fadeTo(600,0);" />
    </map>
</div>​ 
```

有关示例，请参[见此 jsfiddle](http://jsfiddle.net/PvNCJ/)。小心使用状态触发正常，但是当您快速连续几次悬停时它开始失败。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:51:36.440

`.stop()`在您的动画中应用 a - [**DEMO**](http://jsfiddle.net/PvNCJ/1/)

```
<map name="imgmap" id="imgmap">
    <area shape="poly" coords="0,100,50,0,100,100" href="#" target="_self" 
          onmouseover="$('#prevslide').stop().css('opacity','1');"    
          onmouseout="$('#prevslide').stop().fadeTo(600,0);" />
</map> 
```

# c# - 以编程方式获取编码 UI 项目的测试用例列表

> ID：12989046
> 
> 赞同：-1
> 
> 时间：2012-10-20T13:47:44.273
> 
> 标签：c#, coded-ui-tests

我有一个编码的[UI](http://en.wikipedia.org/wiki/User_interface)项目，其中记录了一组测试用例（方法）。有没有办法以编程方式（在 C# 中）获取测试用例列表，并获得我在记录阶段给出的描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:58:00.163

如果您的程序是[.NET](http://en.wikipedia.org/wiki/.NET_Framework)，则可以使用反射来搜索具有 TestMethod/TestClass 属性的任何方法或类。

*[C# 教程 - 方法属性和反射](http://www.switchonthecode.com/tutorials/csharp-tutorial-method-attributes-and-reflection)*中使用了相同的概念，有关反射的更多详细信息*[在 .NET 中的反射中](http://www.codeproject.com/Articles/55710/Reflection-in-NET)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:59:59.130

如果您愿意，您可以使用[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)创建一个日志文件，并且同样您可以知道每次以及它所做的一切。对于写作，您可以使用`Sustem.IO;`writer 并创建一个文本文件。

# python - 列出理解平方赔率

> ID：12989050
> 
> 赞同：0
> 
> 时间：2012-10-20T13:48:20.557
> 
> 标签：python

这是我应该做的：

> 给定变量`nums`，其值为整数列表，编写一个赋值语句，将`square_odds`列表中奇数平方的列表分配给变量`nums`。
> 
> 您必须使用列表理解。

这是我到目前为止所拥有的，我知道范围部分是错误的，但它应该是什么样子？

```
nums = [2 ** square_odds for square_odds in range(nums) if square_odds != x%2] 
```

我认为还有其他地方是错误的，但我不确定。

我把它改成

```
nums = [square_odds**2 for square_odds in range(100) if square_odds%2 != 0] 
```

我收到了消息

错误：你没有分配到 square_odds。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:00:00.527

此外，由于 nums 已经是一个列表，因此不要使用 range(nums)。Range 返回给定开始和停止值的列表。以这种方式遍历您的列表编号（您的列表理解的一部分）：

```
[SQUARING OPERATION HERE  for num in nums MODULO TEST HERE] 
```

因为这是家庭作业，所以我不会全部写出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:53:11.763

*   要测试一个数字是否为奇数，您需要取其模数`2`并测试它是否为 0。所以，如果`num % 2 != 0`，那么你`num`是`odd`

*   要对给定数字求平方，您可以： -`number ** 2`而**不是** `2 ** number`

*   您在函数中还有一个`3rd`参数`range`，表示`step-value`. 您可以使用它`(range(1, last_num, 2))`来获取`odd`数字。这样你就不需要`modulus`操作员了。

您可以进行上述更改以进行列表理解工作。

鉴于您的问题，`nums`数字列表在哪里，您需要使用`nums`而不是`range(nums)`这样：-

```
nums = [square_odds**2 for square_odds in nums if square_odds%2 != 0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:55:32.747

```
nums = [square_odds**2 for square_odds in range(nums) if square_odds%2 != 0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:18:26.330

这个解决方案怎么样？

```
square_odds=[i*i for i in filter(lambda x:x&1,nums)] 
```

# javascript - 始终为 textareaexpader 调用 pluginjquery 的函数

> ID：12989051
> 
> 赞同：1
> 
> 时间：2012-10-20T13:48:31.497
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

这是这个问题的延续：[我从脚本创建了 textarea 扩展器，但之后，它没有扩展](https://stackoverflow.com/questions/12966162/i-created-textarea-expander-from-script-but-after-it-doesnt-expands)

我有自动扩展后如何在文本区域中写入的插件。这是一个插件：

```
/**
* TextAreaExpander plugin for jQuery
* v1.0
* Expands or contracts a textarea height depending on the
* quatity of content entered by the user in the box.
*
* By Craig Buckler, Optimalworks.net
*
* As featured on SitePoint.com:
* http://www.sitepoint.com/blogs/2009/07/29/build-auto-expanding-textarea-1/
*
* Please use as you wish at your own risk.
*/
/**
* Usage:
*
* From JavaScript, use:
* $(<node>).TextAreaExpander(<minHeight>, <maxHeight>);
* where:
* <node> is the DOM node selector, e.g. "textarea"
* <minHeight> is the minimum textarea height in pixels (optional)
* <maxHeight> is the maximum textarea height in pixels (optional)
*
* Alternatively, in you HTML:
* Assign a class of "expand" to any <textarea> tag.
* e.g. <textarea name="textarea1" rows="3" cols="40" class="expand"></textarea>
*
* Or assign a class of "expandMIN-MAX" to set the <textarea> minimum and maximum height.
* e.g. <textarea name="textarea1" rows="3" cols="40" class="expand50-200"></textarea>
* The textarea will use an appropriate height between 50 and 200 pixels.
*/
(function($) {
// jQuery plugin definition
$.fn.TextAreaExpander = function(minHeight=21, maxHeight) {
var hCheck = !($.browser.msie || $.browser.opera);
// resize a textarea
function ResizeTextarea(e) {
// event or initialize element?
e = e.target || e;
// find content length and box width
var vlen = e.value.length, ewidth = e.offsetWidth;
if (vlen != e.valLength || ewidth != e.boxWidth) {
if (hCheck && (vlen < e.valLength || ewidth != e.boxWidth)) e.style.height = "0px";
var h = Math.max(e.expandMin, Math.min(e.scrollHeight, e.expandMax))+2;
e.style.overflow = (e.scrollHeight > h ? "auto" : "hidden");
e.style.height = h + "px";
e.valLength = vlen;
e.boxWidth = ewidth;
}
return true;
};
// initialize
this.each(function() {
// is a textarea?
if (this.nodeName.toLowerCase() != "textarea") return;
// set height restrictions
var p = this.className.match(/expand(\d+)\-*(\d+)*/i);
this.expandMin = minHeight || (p ? parseInt('0'+p[1], 10) : 0);
this.expandMax = maxHeight || (p ? parseInt('0'+p[2], 10) : 99999);
// initial resize
ResizeTextarea(this);
// zero vertical padding and add events
if (!this.Initialized) {
this.Initialized = true;
$(this).css("padding-top", 0).css("padding-bottom", 0);
$(this).bind("keyup", ResizeTextarea).bind("focus", ResizeTextarea);
}
});
return this;
};
})(jQuery);
// initialize all expanding textareas
jQuery(document).ready(function() {
jQuery("textarea[class*=expand]").TextAreaExpander();
}); 
```

当我打开我的网站和打开这个插件时。我调用该函数`TextAreaExpander()`获取所有文本区域`class="expand"`并更改参数。直到在这里发挥作用。

在我用这个类创建新的文本区域之后（使用`Jquery and Javascript`）但我不知道如何调用该函数`TextAreaExpander()`

有一种方法是`jQuery(".expand").TextAreaExpander();`在最后三个句子上写下更改所有文本区域。这不起作用。

如何更改插件以更改新旧textarea？

我做了另一项手术。创建新的文本区域后，我可以使用`jQuery(".expand").TextAreaExpander();`和函数调用该函数。但是我在三个不同的函数中调用了这个函数三次，现在不起作用，我有新的错误。

```
TypeError: 'undefined' is not a function (evaluating 'jQuery(".expand").TextAreaExpander()') 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:15:55.750

这种情况并不少见，您在页面加载时调用插件，然后添加需要相同插件的新元素。如果您在整个班级上调用插件，您可能会遇到问题，因为它已经在现有元素上初始化

你可以做的几件事

1.  修改插件以添加类似“textAreaExpander”的类，然后在插件运行时检查该类是否已存在。如果存在，什么也不做。-或者-
2.  仅在新 html 上调用插件，如下例所示

.

```
var $newElement= $('<textarea>').appendTo( selector);
$newElement.TextAreaExpander() 
```

# mobile - 移动网页的单独项目/网站？

> ID：12989054
> 
> 赞同：3
> 
> 时间：2012-10-20T13:48:39.270
> 
> 标签：mobile, web

我们公司网站的移动网页应该与我们的“正常”页面在同一个项目/网站中，还是应该在他们自己的项目中？

我看到一些移动网站[http://www.company.com/mobile/default.aspx](http://www.company.com/mobile/default.aspx)告诉我它们是合并的。但后来我看到一些像[http://mobile.company.com/default.aspx](http://mobile.company.com/default.aspx)告诉我他们在他们自己的项目/网站中。

我们被告知组件的分离赋予了更大的灵活性，但这通常伴随着代价——更复杂。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:16:05.170

将它们包含在***同一个***项目中但在***不同***的文件夹中。这样，您就可以*灵活*地将所有组件松散耦合，同时*降低复杂性*，因为所有组件基本上都在一起。

# android - 将图像加载到 imageview 时图像模糊

> ID：12989057
> 
> 赞同：0
> 
> 时间：2012-10-20T13:48:52.327
> 
> 标签：android

当我将图像从 SD 加载到 imageview 时，图像是模糊的。

为了提高图像质量......任何解决方案......？

这是代码...

```
Bitmap image = null;
                try {
                    Uri selectedImage = data.getData();
                    String[] filePathColumn = { MediaStore.Images.Media.DATA };
                    Cursor cursor = getContentResolver()
                            .query(selectedImage, filePathColumn, null,
                                    null, null);
                    cursor.moveToFirst();
                    int columnIndex = cursor
                            .getColumnIndex(filePathColumn[0]);
                    String filePath = cursor.getString(columnIndex);
                    cursor.close();
                    File file = new File(filePath);
                    image = decodeFile(file);

                } catch (java.lang.OutOfMemoryError e) {
                    e.printStackTrace();
                    Toast.makeText(getApplicationContext(),
                            "Image size is too large !", Toast.LENGTH_SHORT)
                            .show();
                } catch (Exception e) {
                    e.printStackTrace();
                    Toast.makeText(getApplicationContext(),
                            "Try with different image !",
                            Toast.LENGTH_SHORT).show();
                }
                mainImage = (ImageView) findViewById(R.id.img_mainImg);
                mainImage.setImageBitmap(image); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:56:38.127

来自数据的图像返回低质量图像。尝试使用文件路径并从文件路径获取图像。

在这里我展示了获取最后一个图像路径

```
private String getLastImagePath() {
        final String[] imageColumns = { MediaStore.Images.Media._ID,
                MediaStore.Images.Media.DATA };
        final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
        Cursor imageCursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns,
                null, null, imageOrderBy);
        if (imageCursor.moveToFirst()) {
            int id = imageCursor.getInt(imageCursor
                    .getColumnIndex(MediaStore.Images.Media._ID));
            String fullPath = imageCursor.getString(imageCursor
                    .getColumnIndex(MediaStore.Images.Media.DATA));
            return fullPath;
        } else {
            return "";
        }
    } 
```

所以，同样的方式获取完整的图像路径来转换位图并显示它的 imageview。

# c++ - 具有模板成员函数的模板类遇到问题

> ID：12989062
> 
> 赞同：4
> 
> 时间：2012-10-20T13:49:23.450
> 
> 标签：c++

在我对模板的实验中，我遇到了一个令人困惑的困境。我正在定义一个模板结构`F`，其默认参数是`int`. 它有一个模板化的成员函数`g`。我在结构定义下面定义它。我认为这是正确的方法，但是，我收到一个错误。只有一个错误：

> prog.cpp:9:62：错误：包含“void F< >::g()”的类的模板参数的默认参数

```
template <typename = int> struct F {

    template <typename> void g();

};

template <typename T = int> template <typename> void F<T>::g() {}

int main() {

    F<>f;

} 
```

这是相当模糊的。我无法完全理解它的意思。所以我试着改变一些东西。我认为这是定义的默认模板参数`F`。所以我改变了：

```
template <typename = int> struct F { 
```

至

```
template <typename T = int> struct F { 
```

我还尝试提供`g`模板参数：

```
template <typename T = int> template <typename U> void F<T>::g<U>() {} 
```

但后来我收到了错误：

> prog.cpp:9:67：错误：不允许函数模板部分特化“g”
> prog.cpp:9:67：错误：包含“void F::g()”的类的模板参数的默认参数

我什至尝试指定这`g`是一个模板函数：

```
template <typename T = int> template <typename U> void F<T>::template g<U>() {} 
```

但这没有帮助。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T13:55:40.870

默认模板参数只能用于函数声明，不能用于定义：

```
template <typename T/* = int*/> template <typename> void F<T>::g() {} 
```

# mysql - 我们如何在 MYSQL 中的两列之间选择时间？

> ID：12989066
> 
> 赞同：0
> 
> 时间：2012-10-20T13:49:49.530
> 
> 标签：mysql, sql, database

谁能告诉我如何在 mysql 中使用 php 执行此查询？我想放

```
SELECT * FROM `takeaway_czip` WHERE '10:00PM' BETWEEN '12:00AM' AND '12:00PM;'
SELECT * FROM `takeaway_czip` WHERE '$abc' BETWEEN 'column1' AND 'column2'; 
```

请让我知道我该怎么做？我的客户说他从管理员 PHP 插入打开和关闭时间，当用户选择产品时，它必须匹配当前时间到打开和关闭或之间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:05:10.277

`SELECT * FROM takeaway_czip WHERE opening_time<=NOW() and NOW()<=closing_time`where`opening_time`和`closing_time`是数据库中的列。

# asp.net-mvc-4 - Web Api Auth 控制器 - 绑定密码和数据以创建

> ID：12989067
> 
> 赞同：0
> 
> 时间：2012-10-20T13:50:20.510
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在为我的 web api 创建一个身份验证控制器。本质上，当我的应用程序的用户创建一个帐户时，我的控制器需要接收用户的数据和密码（它不是包含用户其余数据的类型的一部分）。

只有这一次是未散列发送到 web api 的密码。该控制器将哈希盐返回给用户，他将其用于身份验证请求。但我的问题是我无法将密码与正在创建的用户对象一起绑定到正文，因为 web api 只接受一个正文参数，并且用户信息正在那里。所以......这给我留下了密码的URI。这比在体内传递它更安全吗？有没有更好的方法来制作这个请求？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:27:43.610

我不确定我是否正确理解了您的机制。首先，如果您曾经发送未加密的密码（例如，当用户注册时），请确保您使用 SSL。同样适用于发送盐（以防止对用户密码的字典攻击）。

如果您不想将密码作为操作参数的一部分发送，您始终可以使用 http 标头并使用 HttpRequestMessage.Headers 属性检索密码字符串。

不知道您所说的 web api 只接受一个 body 参数是什么意思，但请记住，您发送到 Web API 操作的对象可能很复杂，即。可以由用户对象和密码字符串组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:29:01.417

> 所以......这给我留下了密码的URI。

哦没必要。您可以使用自定义 HTTP 标头。Cookie 是此类请求标头的一个示例，可用于发送身份验证令牌。或授权标头。甚至是自定义标题。

例如[`this post`](https://stackoverflow.com/a/11536349/29407)，我展示了如何通过 Web API 使用基本身份验证并查询成员资格和角色提供程序。

# emacs - 在文本终端中显示 Emacs 中的续行

> ID：12989072
> 
> 赞同：0
> 
> 时间：2012-10-20T13:50:51.067
> 
> 标签：emacs

我正在使用安装了 X 的 Debian sid。作为 GUI 启动的 Emacs 会在右边距显示小弯曲箭头，指示[连续](http://www.gnu.org/software/emacs/manual/html_node/emacs/Continuation-Lines.html)线。当我`-nw`在文本终端模式下启动 Emacs 时，该`\`字符不会出现在右边距以指示续行。我已经搜索了我的`~/.emacs`文件以查看设置是否指定了此设置，但没有找到任何相关内容。

如何指定文本终端模式下的 Emacs 应`\`在右边距中显示字符以指示续行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:40:15.580

当在**文本终端**( ) Emacs`word-wrap`中设置为时，反斜杠字符出现在右边距。`nil`**`-nw`**

 **在**文本终端**Emacs中`word-wrap`设置为时，**不**显示反斜杠字符。设置也设置为 true。`t`****`visual-line-mode``word-wrap`****

 ****这在 Emacs 作为 GUI 窗口运行时**不**`word-wrap`适用：无论.

在 Debian sid 下使用 Emacs 23.4.1 进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:03:12.443

看起来`toggle-truncate-lines`是 Emacs 的一项功能导致了您所描述的行为：[Stupid Shell Tricks](http://tomayko.com/writings/StupidShellTricks)

您可以交互地测试它`M-x toggle-truncate-lines`以查看是否可以为您解决问题吗？******

# ios - 在 Xcode 4.5 中开发的 iOS 应用程序在 iOS 6 上运行良好，但在 iOS 5 上崩溃

> ID：12989076
> 
> 赞同：2
> 
> 时间：2012-10-20T13:51:06.123
> 
> 标签：ios, xcode, ios5, ios6, xcode4.5

我有一个使用 Xcode 版本 4.5.1 开发的 iOS 应用程序。我的 iOS 部署目标设置为 5.0，因为我希望应用程序在 iOS 5.0、5.1 和 6.0 上运行。

当我在 iOS 6 设备（或模拟器）上运行应用程序时，一切正常。当我在 iOS 5 设备（或模拟器）上运行应用程序时，应用程序在 UIApplicationMain 中崩溃。我可以一步一步通过 application:didFinishLaunchingWithOptions: 并且它似乎正在成功执行。这是堆栈跟踪：

![堆栈跟踪图像](../Images/895a23bee10496972f76871fda07928c.png)

如果有帮助，这里是寄存器：

```
(lldb) register read
General Purpose Registers:
       eax = 0x06e5f590
       ebx = 0x01226f9c  "class"
       ecx = 0x0733fb8c
       edx = 0x0733fb90
       edi = 0x0011d814  (void *)0x0011d800: TRAppDelegate
       esi = 0xbffff310
       ebp = 0xbffff2e8
       esp = 0xbffff2a0
    eflags = 0x00000286
       eip = 0x00002b3d  Messenger`main + 141 at main.m:16
6 registers were unavailable.

(lldb) 
```

回溯：

```
 (lldb) bt
* thread #1: tid = 0x1c03, 0x01211caa libobjc.A.dylib`objc_exception_throw, stop reason = breakpoint 1.3 2.3
    frame #0: 0x01211caa libobjc.A.dylib`objc_exception_throw
    frame #1: 0x015cda48 CoreFoundation`+[NSException raise:format:arguments:] + 136
    frame #2: 0x015cd9b9 CoreFoundation`+[NSException raise:format:] + 57
    frame #3: 0x006954a3 UIKit`UINibDecoderDecodeObjectForValue + 281
    frame #4: 0x0069567b UIKit`UINibDecoderDecodeObjectForValue + 753
    frame #5: 0x00695383 UIKit`-[UINibDecoder decodeObjectForKey:] + 117
    frame #6: 0x0059516d UIKit`-[UINib instantiateWithOwner:options:] + 921
    frame #7: 0x0043b1fc UIKit`-[UIViewController _loadViewFromNibNamed:bundle:] + 286
    frame #8: 0x0043b779 UIKit`-[UIViewController loadView] + 302
    frame #9: 0x0043b99b UIKit`-[UIViewController view] + 53
    frame #10: 0x0039a401 UIKit`-[UIWindow addRootViewControllerViewIfPossible] + 45
    frame #11: 0x0039a670 UIKit`-[UIWindow _setHidden:forced:] + 280
    frame #12: 0x0039a836 UIKit`-[UIWindow _orderFrontWithoutMakingKey] + 49
    frame #13: 0x003a172a UIKit`-[UIWindow makeKeyAndVisible] + 35
    frame #14: 0x00372596 UIKit`-[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1820
    frame #15: 0x00373274 UIKit`-[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 524
    frame #16: 0x00382183 UIKit`-[UIApplication handleEvent:withNewEvent:] + 1027
    frame #17: 0x00382c38 UIKit`-[UIApplication sendEvent:] + 68
    frame #18: 0x00376634 UIKit`_UIApplicationHandleEvent + 8196
    frame #19: 0x02314ef5 GraphicsServices`PurpleEventCallback + 1274
    frame #20: 0x015f9195 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    frame #21: 0x0155dff2 CoreFoundation`__CFRunLoopDoSource1 + 146
    frame #22: 0x0155c8da CoreFoundation`__CFRunLoopRun + 2218
    frame #23: 0x0155bd84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #24: 0x0155bc9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #25: 0x00372c65 UIKit`-[UIApplication _run] + 576
    frame #26: 0x00374626 UIKit`UIApplicationMain + 1163
    frame #27: 0x00002b3d Messenger`main + 141 at main.m:16
(lldb) 
```

**问题**

1.  知道这里可能会发生什么吗？
2.  是否可以使用 Xcode 4.5 开发 iOS 5 应用程序？我认为答案是肯定的。
3.  如何查看寄存器的内容？我试过从[这里](http://lldb.llvm.org/lldb-gdb.html)看一些东西，但没有看到任何有用的东西。
4.  我应该关注哪些寄存器？
5.  我应该问我没有问的问题是什么？

### 解决方案：

禁用自动布局

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T14:07:56.770

1.  您可能正在使用仅在 iOS 6 中可用的功能，例如 AutoLayout。打开您的界面文件并确保未选中 AutoLayout：
    ![在此处输入图像描述](../Images/da798c7b6f1ed1ece173c23084ae3fa9.png)
    此 AutoLayout 切换可以在实用程序检查器（Xcode 右侧的窗格）中找到，然后在 Utilities Inspector（文件检查器）的第一个选项卡下。您还可以将 Document Versioning Deployment 设置更改为您的应用支持的最低 iOS 版本。执行此操作后，Xcode 将在您的界面中显示已弃用或某些 iOS 版本可能不支持的功能的警告。

2.  是的，当然您可以使用 Xcode 4.5 为早期版本的 iOS 开发应用程序。只需确保在项目设置中正确设置了部署目标。

3.  DrummerB 对 3 和 4 的建议应该很有效：

    > 我认为这不会有帮助。当您的应用程序崩溃以获取跟踪时，也许您可​​以尝试在调试控制台中运行**bt 。**

此外，为了改进 DrummerB 的回答，可以使用 iOS 6 类/API，但您必须在使用它们之前检查它们的可用性：

```
if ([UIClassName class] != nil) {
    //UIClassName is available, you can now set it up
} else {
    //UIClassName is not available, use a different class or prompt the user
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T13:56:54.500

1.  您可能正在使用 iOS 6 API。也许您正在使用自动布局。签入您禁用自动布局的所有 xib 文件。看到[这个答案](https://stackoverflow.com/questions/12571965/revert-xcode-4-5-new-xib-files-to-ios6/12572002#12572002)。
2.  使用 Xcode 4.5 开发 iOS 5 应用程序当然是可能的。您必须相应地设置部署目标（您已经这样做了），并且不使用任何 iOS 6 功能或 API。
3.  & 4：我认为这不会有帮助。`bt`当您的应用程序崩溃以获取跟踪时，也许您可​​以尝试在调试控制台中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:18:33.343

我在使用 Xcode 4.5 构建时遇到了类似的问题 - 它使用 xCode 4.5.1 解决了

希望这可以帮助。

# java - Netty 4 多客户端

> ID：12989078
> 
> 赞同：13
> 
> 时间：2012-10-20T13:51:20.390
> 
> 标签：java, client, netty, connection

我需要让客户端能够建立许多连接。我使用 Netty 4.0。不幸的是，所有现有示例都没有显示如何创建大量连接。

```
public class TelnetClient {
    private Bootstrap b;
    public TelnetClient() {
        b = new Bootstrap();
    }
    public void connect(String host, int port) throws Exception {
        try {
            b.group(new NioEventLoopGroup()).channel(NioSocketChannel.class).remoteAddress(host, port).handler(new TelnetClientInitializer());
            Channel ch = b.connect().sync().channel();
            ChannelFuture lastWriteFuture = null;
            BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
            for (;;) {
                String line = in.readLine();
                if (line == null) break;
                lastWriteFuture = ch.write(line + "\r\n");
                if (line.toLowerCase().equals("bye")) {
                    ch.closeFuture().sync();
                    break;
                }
            }
            if (lastWriteFuture != null) lastWriteFuture.sync();
        } finally {
            b.shutdown();
        }
    }
    public static void main(String[] args) throws Exception {
        TelnetClient tc = new TelnetClient();
        tc.connect("127.0.0.1", 1048);
        tc.connect("192.168.1.123", 1050);
    //...
    }
} 
```

这是正确的决定吗？还是会更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T18:39:28.507

是的，它几乎是正确的.. 您唯一必须更改的是在每次连接时创建 NioEventLoopGroup。

NioEventLoopGroup 实例很昂贵，因此应该共享它们。创建一个实例并共享它，每次都将相同的实例传递给 Bootstrap.group(...)..

# php - 在表单中将 hasOne() 下拉字段设置为只读

> ID：12989081
> 
> 赞同：1
> 
> 时间：2012-10-20T13:52:00.887
> 
> 标签：php, frameworks, atk4

有许多关于将表单中的字段设置为只读的帖子，但似乎都没有涵盖 hasOne() 字段。我希望编辑属于给定班级的学生（注册）列表。该课程针对特定科目，例如数学，并存储时间段和最大学生人数。在编辑注册时，我希望班级详细信息为只读，而属于班级的学生可通过 CRUD 进行编辑。我可以通过为每个字段调用 display() 来设置模型的本机字段（例如[https://groups.google.com/forum/?fromgroups=#!topic/agile-toolkit-devel/v2xVYsRqFpY](https://groups.google.com/forum/?fromgroups=#!topic/agile-toolkit-devel/v2xVYsRqFpY)），但我不能找到一种设置 hasOne 的方法。

以下是我到目前为止的代码。

学科模型

```
class Model_Subject extends Model_Table {
public $table='subject';

function init(){
        parent::init();

        $this->addField('name');
        $this->addField('subject_code');
        $this->addField('semester');
        $this->addField('description');

}
} 
```

类模型

```
class Model_Class extends Model_Table {
    public $table='class';

    function init(){
        parent::init();
        $this->hasOne('Subject');
        $this->addField('date_start')->type('date')->caption('Start');
        $this->addField('date_end')->type('date')->caption('End');
        $this->addField('max_students')->type('int');

        $this->hasMany('ClassHasStudent','class_idclass', 'idclass');
    }
} 
```

学生模型

```
class Model_Student extends Model_Table {
    public $table='student';

    function init(){
        parent::init();

        $this->hasMany('ClassJoinClassHasStudent');
        $this->addField('student_ID')->caption('Student ID');
        $this->addField('name')->caption('Name');

        $this->addExpression('number_classes')->set(
                $this->add('Model_ClassHasStudent')->addCondition('student_id',$this->_dsql()->getField('id'))->count()
        )->caption('Number of classes');
    }

} 
```

链接表。

```
class Model_ClassHasStudent extends Model_Table {
public $table='class_has_student';

function init(){
    parent::init();

    $this->hasOne('Class', 'class_id', 'id');
    $this->hasOne('Student');

    $this->addField('date_enrolled')->type('date');
    $this->addField('grade');

}
} 
```

形式是：

```
$form=$this->add('MVCForm');
$classes=$this->add('Model_Class');

// $classes-> set hasOne Subject name field to read only.

$classes->getField('date_start')->display(array('form'=>'readonly'));
$classes->getField('date_end')->display(array('form'=>'readonly'));
$classes->getField('max_students')->display(array('form'=>'readonly'));

// Method from Romans.
$form->model->load($id);
$this->add('CRUD')->setModel($form->model->ref('ClassHasStudent'));

$form->addSubmit('Save');

$form->onSubmit( function($form){

    $form->update();
    return $form->js()->univ()->location($form->api->getDestinationURL(
            'managestudents',
            array('id'=>false)));

}); 
```

另外，如果我设置 $this->hasOne('Subject')->readonly(true); 在 Model_Class 中，表单将主题 ID 显示为文本而不是主题的“名称”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:11:00.097

在模型内部试试这个：

```
$this->hasOne('Subject'); // will create 'subject' and 'subject_id' fields
$this->getElement('subject')
    ->editable(true)
    ->display(array('form'=>'readonly')); 
```

hasOne 创建两个字段。取消引用的字段（不带 _id）是默认从表单中排除的计算字段。通过设置“可编辑”，您可以将其返回到表单中（通过它计算的事件）并设置显示属性。或者，您可以这样做：

```
$forms->getElement('subject_id')->setAttr('disabled',true); 
```

这仍将使用下拉菜单，但将被禁用。我不是 100% 肯定的，但任何 jQueriUI 增强功能（例如自动完成）都必须尊重 disabled 属性。

# ruby-on-rails - 验证散列元素的存在和未设置散列的时间？

> ID：12989082
> 
> 赞同：0
> 
> 时间：2012-10-20T13:52:04.060
> 
> 标签：ruby-on-rails, ruby

我在一个阶段进行验证

```
params[:user][:address] 
```

但也有没有设定好的时候`params[:user]`。我应该用什么来检查这个？`blank?`, `nil?`, 或`present?`? 目标是在尽可能少的行上进行此检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:05:46.680

```
unless params[:user] && params[:user][:address].present?
  # do something
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:10:05.073

带数组

```
unless @banners.try(:[], 2) 
```

与对象应该尝试）

# android - 单击视图时，动画会返回

> ID：12989087
> 
> 赞同：2
> 
> 时间：2012-10-20T13:52:40.983
> 
> 标签：android, animation

**（本主题与 .setfillafter(true) 无关）。**

我在android的动画上遇到了一点麻烦，我希望有人能帮我解决这个问题。

我创建了一个线性布局和一个列表视图。

*listView 放置在相对布局中，因为我必须在相同的相对布局中设置其他线性布局的 translateY，但我将其他线性布局排除在问题之外。*

当`clicks or taps`线性布局上的某个人（这将像一个按钮一样）时，列表视图将使用以下几行向下动画一点：

```
animation_Fold = new TranslateAnimation(0, 0, 0, 150);
createNewAnimationListener(); //to monitor when the animation ends and starts.

animation_Fold.setDuration(300);
animation_Fold.setFillAfter(true);
listview_Contacts.startAnimation(animation_Fold); 
```

如您所见，我创建了动画，它将向下移动 150（像素？）。

现在有更多代码可以将列表视图动画化回其原始位置，但我认为这与这个问题无关。（实际上是相同的，但是 fromYDelta 和 toYDelta 将被反转。）

当我在动画后点击列表视图（无论我点击哪里），它会回到原来的位置。但是我用过`.setFillAfter(true)`，那为什么会发生在我身上呢？因为我只想让列表视图保持其新的给定位置。（动画的位置）

我希望有人可以帮助我完成我的动画，因为我被困在这个动画上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:38:58.973

好吧，我觉得有点奇怪，因为你们都认为我在自言自语，我想回答我自己的问题。但不，幸运的是事实并非如此。

**所以说重点。**

我解决了自己的问题，但我认为这不是它要解决的方式。正如我在评论中提到的，`Amokrane Chentir`我发现当您禁用列表视图时，您不必设置物理位置。这意味着当我在动画完成并且列表视图被禁用时单击列表视图时，列表视图不会响应并且会忽略每个用户输入（和侦听器）。但是我可以用禁用的列表视图做什么，根本没有.

但是当动画执行一次时，列表视图不需要与用户交互，所以禁用是一件好事，离我的解决方案更近了一步。我唯一需要解决的是在动画再次反转的正确时刻启用列表视图。我通过禁用 listview 并使用 onClickListener 使 ListView 下方的 RelativeLayout 可单击来做到这一点。onClickListener 会在用户单击 listView 时进行侦听，将动画设置为反向并再次启用 listview。**问题解决了。**

这使得列表视图对用户交互不可见。

```
if(isUnfolded)
{
  listview_Contacts.setClickable(false);
  listview_Contacts.setEnabled(false);
}
else
{
  listview_Contacts.setClickable(true);
  listview_Contacts.setEnabled(true);
} 
```

当点击 relativeLayout 时监控的 onClickListener。

```
rlvLayout.setOnClickListener(new OnClickListener() 
{           
public void onClick(View v) 
    {
      if(isUnfolded)
         toggleFoldAnimation();
}
}); 
```

随意回答或添加评论以获得更好的解决方案，否则我希望这个解决方案可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:04:44.317

所以基本上我认为发生的事情是你的 View 是从 UI 角度动画的（它只是渲染），但它的物理位置没有改变。当动画结束时，您需要使用[layout](http://developer.android.com/reference/android/view/View.html#layout%28int,%20int,%20int,%20int%29)方法显式移动该视图。

```
animation_Fold.setAnimationListener(new AnimationListener() {
           @Override
            public void onAnimationEnd(Animation animation) {
                // Move your view here using view.layout(r, t, l, b)
            }
}); 
```

这样，它会将您的视图移动到所需的位置。

# joomla - 在 Joomla 中选择多个选项的多选列表！插入

> ID：12989090
> 
> 赞同：1
> 
> 时间：2012-10-20T13:53:19.083
> 
> 标签：joomla, simplexml, joomla2.5

我正在 Joomla 中创建我自己的插件，我想在文章中添加一个**多选列表**。我还希望默认选择其中的一些选项。以下是我的代码。

```
public function onContentPrepareForm($form, $data)
    {
        if (!($form instanceof JForm))
        {
            $this->_subject->setError('JERROR_NOT_A_FORM');
            return false;
        }
        $id = $data->id;
        $catid = $data->catid;
        $db = JFactory::getDBO();
        $query = "SELECT ID, title FROM #__content WHERE catid = '" . SUBTOPIC_CATEGORY_ID . "'";
        $db->setQuery($query);
        $resultArray = $db->loadAssocList();
        $optionsString = '';
        foreach($resultArray as $result)
        {
            $optionsString .= '<option value="' . $result['ID'] . '"> ' . $result['title'] . '</option>';
        }
        if(isset($id) && isset($catid) && $catid == TOPIC_CATEGORY_ID)
        {
            $query = "SELECT subtopic FROM #__empd_topic WHERE ID = '$id'";
            $db->setQuery($query);
            $subtopicArray = $db->loadRow();
        }
        $xmlText = '<?xml version="1.0" encoding="utf-8"?>
<form>
    <fields name="subtopic" label="subtopic">
        <fieldset name="subtopic" label="subtopic">
            <field
                name="subtopic"
                type="list"
                id="subtopic"
                multiple ="true"
                label = "subtopic"
                message = "Message"
            >' . $optionsString . '</field>
        </fieldset>
    </fields>
</form>';
        $xmlObj = new SimpleXMLElement($xmlText);
        $form->setField($xmlObj);
        return true;
    } 
```

现在 xml 中的`<field>`节点有一个默认属性，但它只能有一个值，我也在xml 中的节点`selected="selected"`内尝试过`<option>`，但它不起作用。您可以在[此处](http://docs.joomla.org/List_form_field_type)获取有关 xml 列表的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:31:23.420

尝试在这样的字符串中添加默认值：

```
default="[\"3\",\"5\",\"7\"]" 
```

我认为这是答案的原因是因为那是 JSON，我知道数据保存在 JSON 中。你必须逃避 " 字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:15:29.870

```
$selected = array("2","3","4");  //selected by default

foreach($resultArray as $result)
        {
            if(in_array($result['ID'],$selected)) {
               $select = "selected=\"selected\"";
            } else {
               $select = "";
             }

            $optionsString .= '<option value="' . $result['ID'] . '" '.$select.' > ' . $result['title'] . '</option>';
        } 
```

xml

```
<field
 name="subtopic"
 type="list"
 id="subtopic"
 multiple ="true"
 label = "subtopic"
 message = "Message"
 size="5" //add this 
 > 
```

# mobiscroll - 使用 Mobiscroll onSelect 函数填充另一个 Mobiscroll

> ID：12989094
> 
> 赞同：1
> 
> 时间：2012-10-20T13:53:49.740
> 
> 标签：mobiscroll

我有两个 Mobiscroll 实例，一个用于开始时间，一个用于结束时间。

当有人选择开始时间时，我想根据该开始时间更新可能的结束时间。

我有一个 ajax 调用，它将为我提供正确的轮子值，但无法将其放入结束时间 mobiscroll。

你是怎样做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:53:31.457

如果您已经有了这些值（来自 ajax 调用），那么您可以将其放入 select 并使用 mobiscroll 的 select 预设。

你可以在这里看到一个[演示！](http://demo.mobiscroll.com/#demo=dropdown)

**编辑**

我误解了这个问题，或者以不同的方式解释了这个问题。因此，如果第二个滚动条也必须是日期时间选择器，那么您应该在第一个滚动条的 OnSelect 事件中对其进行初始化！

```
$('#startDate').scroller({
     preset: 'date',
     onSelect: function(valueText,inst){
         //get the ajax call done here
         $('#endDate').scroller('destroy').scroller({
            preset: 'date',
            // set other settings like minDate or maxDate for the second scroller
         });
     }
}); 
```

# algorithm - 较小图上的图同构但大量测试

> ID：12989096
> 
> 赞同：2
> 
> 时间：2012-10-20T13:54:04.700
> 
> 标签：algorithm, graph, graph-theory, graph-algorithm

图同构是计算机科学中一个经过充分研究的问题，但没有已知的多项式时间算法（有一些说法，但还没有一个被证明）。

我必须测试两个图的同构，但就我而言，问题略有不同。图的大小小于 10 或 11，即更少的顶点数。图可以是密集的或稀疏的，边的数量没有限制。这种成对测试（同构检查）的数量将在 10^8 左右。

如果有人可以建议一些最适合这种情况的算法。如果算法可以并行化，那就太好了。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:29:34.240

这个答案依赖于这样一个事实，即两个图之一对于您的所有同构检查都是相同的。对于重新标记下不变的每个节点，您可以计算出各种各样的数字：

*   节点度
*   其邻居的度数之和
*   其邻居的邻居度的总和
*   对于那些度数为*k*的邻居，他们邻居度数的总和
*   包含该节点的长度为*k的循环数*
*   从这个节点到任何其他节点的最大距离
*   与该节点距离为*k的节点数*
*   …</li>

您可以获取参考图并为每个节点计算其中的几个数字。运气好的话，您会发现一组函数的计算成本不会太高，并且生成的数字将唯一地标识每个节点。您甚至可以将这些数字散列为一个数字。在这种情况下，您可以按如下方式处理每个输入图：通过计算每个节点的这些数字及其哈希值，您可以快速确定参考图中的哪个节点对应于输入图的每个节点（如果有）。一旦您在节点之间建立了一对一的对应关系，检查是否所有边都适合是微不足道的。

如果你没有找到一组足够便宜的函数来唯一地描述*每个*节点，我希望在大多数现实世界的图中（即不是专门为高对称性构建的），你仍然会获得相当小的等价类，所以检查所有每个类中可能的排列对于您的应用程序来说可能仍然足够便宜。

就像一个想法：如果性能在这里是一个真正的问题，您甚至可以尝试将分析结果转换为定制的程序代码。因此，对于每个参考图，您都需要让您的应用程序编译一小段代码，然后它可以动态加载这些代码，以使用编译器优化的机器代码可以为您提供的所有功能来执行这些检查。不确定这是否值得努力，但我认为这可能是一种有趣的方法。

高度对称的图可能需要更多的工作。您可以尝试预先识别图形的同构。例如，如果您可以在不影响图结构的情况下互换 v1 和 v2 的标签，那么对于您处理的每个输入图，如果您不确定是将给定顶点映射到 v1 还是 v2，那么您知道它不会很重要，因此您不必同时尝试两种选择，而可以随意选择 v1。这大大减少了您必须检查的排列数量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T00:27:33.030

如果您有办法快速判断从 v1 到 v2 有多少条边，那么您可以快速生成两个图的小表示并进行强力检查。但是如果你不能快速通过所有的边缘，这意味着你甚至不能有效地阅读你的输入而不是谈论检查同构

# c# - WinRT 中 TextBlock 的外发光效果

> ID：12989104
> 
> 赞同：5
> 
> 时间：2012-10-20T13:54:49.067
> 
> 标签：c#, .net, vb.net, xaml, windows-runtime

WinRT 没有`OuterGlowBitmapEffect`. 那么，有什么方法可以`TextBlock`在 WinRT 中显示 a 的外发光效果吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T18:20:34.510

没有一种将效果应用于 XAML 内容的好方法，WinRT 目前还缺乏将 XAML 元素呈现为位图的方法，因此您主要使用不使用 XAML 的方法。

确保发光是必要的，并且您已查看 Windows 8 应用程序的[指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh779072.aspx)。如果你确定你需要它，这里有一些建议：

*   对于简单的情况，您可以使用渐变或复制的几何体来获得发光效果。

*   将图形与已应用于您的应用程序的发光捆绑在一起，这显然不适用于完全动态的形状，但您可以对类似于我的答案的文本执行[此](https://stackoverflow.com/questions/3719750/best-way-to-get-a-glow-effect-windows-phone-7/5438724#5438724)操作。

*   使用 Direct2D 而不是 XAML 并使用[Direct2D 效果](http://msdn.microsoft.com/en-US/library/windows/apps/hh706316)（[SharpDX](http://sharpdx.org/)为 Direct2D 提供绑定）

*   如果您需要对位图应用发光，您可以使用 WriteableBitmap 并自己应用发光。（[WriteableBitmapEX](http://writeablebitmapex.codeplex.com/releases/view/39577)可能有用）

*   使用 HTML 和 CSS 而不是 XAML，可能托管在 WebView 或整个应用程序中。

# google-analytics - 使用 google 分析处理带有哈希 # 的 url

> ID：12989106
> 
> 赞同：3
> 
> 时间：2012-10-20T13:55:01.070
> 
> 标签：google-analytics, angularjs, singlepage

我正在使用 javascript 客户端 mvc（在本例中为 angular.js）开发 js 单页 Web 应用程序

我在网站上添加了谷歌分析，但从我目前所看到的（至少是实时的）谷歌没有考虑到哈希后的 uri 部分

那就是我有一个类似的网址，`mydomain.com.ar/#/ideas/1`但对于谷歌分析来说，它看起来就像`mydomain.com.ar/`

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:01:00.023

您需要解析 # 之后的参数并使用 _trackPageview 发送数据，以便在您的页面报告中看到它们。

这是怎么做的，

```
 var params = {},
     queryString = location.hash.substring(1), 
     regex = /([^&=]+)=([^&]*)/g, 
     m; 
 while (m = regex.exec(queryString)) { 
     params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
 }
 _gaq.push(['_trackPageview', queryString]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T15:01:57.930

使用 $window 依赖并调用路由更改。

还使用 GA 'set' 确保为 Google 实时分析选择路线。

```
$scope.$on('$routeChangeSuccess', function() {
    $window.ga('set', 'page', $location.url());
    $window.ga('send', 'pageview');
}); 
```

# java - 通过自我实现的密码器类加密和解密对象

> ID：12989107
> 
> 赞同：1
> 
> 时间：2012-10-20T13:55:10.050
> 
> 标签：java, encryption

我在作业中感到困惑：D 给定一个 UML 图，我必须实现一个课程管理应用程序，其中一部分是 Student 类，如下所示

```
 public class Student extends Person implements Encryptable {
    private String program;
    private Vector<Course> courses;

//constructor. 
    public Student(String Name, String pnr, String tel, String prog) {
            super(Name, pnr, tel);
            program = prog;
            courses = new Vector<Course>();
        }
/* implementation of related methods 
  ......  */

        @Override
    public void encrypt(String password) {
    }

    @Override
    public void decrypt(String password) {  
    } 
```

所有其他类以及该类的所有相关setter和getter也实现了Encryptable接口如下

```
public interface Encryptable {

    public void encrypt(String password);
    public void decrypt(String password);
} 
```

在较早的任务中，我实现了一个类“PassworCrypter”，我应该使用该类

```
public class PasswordCrypter {
    Cipher ecipher;
    Cipher dcipher;
    SecretKey key;
    DESKeySpec dks;
    SecretKeyFactory skf;
    byte[] psword;

    public PasswordCrypter(String password) {

        try {
            psword = password.getBytes("UTF-16");
            dks = new DESKeySpec(psword);
            skf = SecretKeyFactory.getInstance("DES");
            key = skf.generateSecret(dks);
            ecipher = Cipher.getInstance("DES");
            ecipher.init(Cipher.ENCRYPT_MODE, key);
            dcipher = Cipher.getInstance("DES");
            dcipher.init(Cipher.DECRYPT_MODE, key);
        } catch (NoSuchAlgorithmException e) {
            throw new CrypterException(e);
        } catch (NoSuchPaddingException e) {
            throw new CrypterException(e);
        } catch (InvalidKeyException e) {
            throw new CrypterException(e);
        } catch (InvalidKeySpecException e) {
            throw new CrypterException(e);
        } catch (UnsupportedEncodingException e) {
            throw new CrypterException(e);
        }

    }

    public byte[] encrypt(byte[] array) {

        try {
            return ecipher.doFinal(array);
        } catch (IllegalBlockSizeException e) {
            throw new CrypterException(e);
        } catch (BadPaddingException e) {
            throw new CrypterException(e);
        }
    }

    public byte[] decrypt(byte[] array) {

        try {
            return dcipher.doFinal(array);
        } catch (IllegalBlockSizeException e) {
            throw new CrypterException(e);
        } catch (BadPaddingException e) {
            throw new CrypterException(e);
        }
    }
} 
```

我应该在 Student 类的本地和继承字段上使用 PasswordCrypter 类。当学生对象被加密时，如果不先调用解密，就不可能获得学生姓名等数据。除非您需要访问其任何数据，否则应始终对 Student 对象进行加密。谁能给我想法或告诉我应该如何加密这个该死的学生:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:08:15.253

我认为你有问题`Encryptable`。方法的签名应该是

```
public void encrypt(Encrypter enc);
public void decrypt(Decrypter dec); 
```

您可以在其中定义两个单独的接口`Encrypter`和`Decrypter`. 所以最后你可以`PasswordCrypter`用作实现这两种方法的中心类。

```
 public class PasswordCrypter implements Encrypter,Decrypter  { 
```

所以现在在你的学生班里你可以做

```
public void encrypt(Encrypter enc) {
   byte[] programbytes = enc.encrypt(program);
}

public void encrypt(Decrypter dec) {
   program = dec.decrypt(programbytes);
} 
```

# scala - 使用 Scala SNA

> ID：12989109
> 
> 赞同：3
> 
> 时间：2012-10-20T13:55:39.827
> 
> 标签：scala, maven, sbt, sna

我想在 scala 中使用 SNA。我正在使用 sbt 来管理我的依赖项。

在[SNA](http://code.google.com/p/scala-native-access/)你可以看到但我在[Maven](http://search.maven.org/#search%7Cga%7C1%7Csna)`import net.java.dev.sna.SNA` 中找不到

如果在 Maven 中找不到 SNA，我将如何在我的 Scala 项目中使用它？还有一个[Svn 主干](http://code.google.com/p/scala-native-access/source/browse/#svn/trunk/src/net/java/dev)，但我不知道我应该用它做什么。

更新1：

[我只需复制并粘贴SNA.scala](http://code.google.com/p/scala-native-access/source/browse/trunk/src/net/java/dev/sna/SNA.scala)就可以让它“工作” 我不得不添加`class SNAException(msg:String) extends Exception(msg)`，因为它丢失了。

# iphone - NSData+Base64.m 中的 XCode 标记类型错误

> ID：12989112
> 
> 赞同：1
> 
> 时间：2012-10-20T13:55:46.727
> 
> 标签：iphone, objective-c, ios

错误如下图所示 ![在此处输入图像描述](../Images/e24b12ce921a0d9f3be64b52593035ad.png)

```
- (id) initWithBase64EncodedString:(NSString *) string {
    NSMutableData *mutableData = nil;

    if( string ) {
        unsigned long ixtext = 0;
        unsigned long lentext = 0;
        unsigned char ch = 0;
        unsigned char inbuf[4], outbuf[4];
        short i = 0, ixinbuf = 0;
        BOOL flignore = NO;
        BOOL flendtext = NO;
        NSData *base64Data = nil;
        const unsigned char *base64Bytes = nil;

        // Convert the string to ASCII data.
        base64Data = [string dataUsingEncoding:NSASCIIStringEncoding];
        base64Bytes = [base64Data bytes];
        mutableData = [NSMutableData dataWithCapacity:[base64Data length]];
        lentext = [base64Data length];

    } 
```

而且我正在使用另一种名为的方法

```
- (NSString *) base64EncodingWithLineLength:(unsigned int) lineLength {
    **const unsigned char   *bytes = [self bytes];**
    NSMutableString *result = [NSMutableString stringWithCapacity:[self length]]; 
```

} ![在此处输入图像描述](../Images/be516885e5ebe8732e0df53186a3fec4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:09:20.727

您可以通过类型转换来解决该错误......但不确定数据是否具有相同的格式......

```
 base64Bytes = (const unsigned char*)[base64Data bytes]; 
```

# jquery - 正则表达式 - 字母、数字和符号

> ID：12989114
> 
> 赞同：4
> 
> 时间：2012-10-20T13:56:04.273
> 
> 标签：jquery, regex

我是正则表达式的新手，并尝试为仅包含以下内容的字符串创建表达式：

*   字母
*   数字
*   下划线符号
*   句号（句号）

到目前为止，我有这个：

```
/[a-zA-Z0-9,\.\_]/; 
```

正如我所说，我还很新，所以希望这是完全错误的！

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T14:01:35.853

```
/^[a-z0-9._]+$/i 
```

编辑：大卫托马斯提出了一个不错的选择：`/^[\w.]+$/i`- 可能的语言环境问题。

你有一个逗号，我不认为你打算有，但如果你这样做，就把它放回去。修饰符使`i`表达式不区分大小写。

在字符类内部，不需要转义句点（如果您这样做则不相关：http: [//jsfiddle.net/pvgTT/1/](http://jsfiddle.net/pvgTT/1/)）

您需要`^`and `$`（字符串的开头和结尾）来匹配整个字符串。否则，它可以匹配至少有一个这样的字符但也可以有其他字符的字符串。

`+`（1个或更多）被使用。也可以是`*`（0个或更多）。要么是必需的，因为字符串的长度是未知的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:02:13.833

您还需要什么：

*   A`^`在开头匹配字符串的开头
*   A`$`在末尾匹配字符串的末尾
*   集合上的乘数，以便它可以匹配多个字符

乘数使`+`集合匹配一个或多个字符。逗号不应在集合中，因为您不想匹配逗号。并且不需要在集合中转义`.`：`_`

```
^[a-zA-Z0-9._]+$ 
```

该`\w`代码匹配字母、数字和下划线，因此您可以使用：

```
^[\w.]+$ 
```

# python - QGraphicsSvgItem的宽高

> ID：12989122
> 
> 赞同：0
> 
> 时间：2012-10-20T13:57:15.367
> 
> 标签：python, svg, height, pyqt4, qgraphicsitem

我相信这是一个简单的问题，但不适合像我这样的初学者。我的代码是：

```
...
svg_file = QtCore.QFile('C:\svgTest.svg')
self.svgItem = QtSvg.QGraphicsSvgItem(svg_file.fileName())
... 
```

如何获取 self.svgItem 的宽度和高度？我试过这个：

```
print self.svgItem.boundingRect() 
```

并得到：

```
PyQt4.QtCore.QRectF(0.0, 0.0, 300.0, 383.0) 
```

其中“300”和“383”是我需要的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:27:48.890

`QRectF`对象有`height()`和`width()`方法。

所以你可以这样做：

```
br = self.svgItem.boundingRect()
w = br.width()
h = br.height() 
```

有关详细信息，请参阅[QRectF 上的 Qt 文档](http://qt-project.org/doc/qt-4.8/qrectf.html)。

# python - 赋值给从列表返回的值

> ID：12989132
> 
> 赞同：0
> 
> 时间：2012-10-20T13:59:10.420
> 
> 标签：python

我有一个包含来自测量的多个向量的类。我需要遍历这些向量，但只想使用选定的测量值。到目前为止，我构建的简化版本如下：

```
import pylab as pl
class IterationReturn(object):
    def __init__(self):
        self.a = (1,2,3,4,5,6,7,8,9)
        self.b = (10,20,30,40,50,60,70,80,90)
        self.c = (-1,-2,-3,-4,-5,-6,-7,-8,-9)
        self.i = 0

    def returnNextSet(self):
        self.aIter = self.a[self.i]
        self.bIter = self.b[self.i]
        self.cIter = self.c[self.i]
        self.i +=1
        return (self.aIter, self.bIter, self.cIter)               

if __name__ == '__main__':
    iteration = IterationReturn()
    for i in range(len(iteration.a)): 
        # x takes aIter value from iteration.returnNextSet()
        # y takes bIter value from iteration.returnNextSet()        
        x,y = iteration.returnNextSet()    
        pl.scatter(x, y)
    pl.show() 
```

我不想`x,y,z = iteration.returnNextSet()`在这个例子中使用 which 会起作用，但实际上我有更多的值并且不想全部分配它们。我找不到只分配给`aIter`and的方法`bIter`。

我有一个错误：

```
 x,y = iteration.returnNextSet()      
ValueError: too many values to unpack 
```

在我的问题中，我有很多测量值（a，b，...，z），例如我想分配 x=d 和 y=k 我也认为它应该从一开始就以不同的方式完成，比如设计新类继承，但不知道如何做到这一点。感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:03:52.923

最好的方法是返回一个字典：

```
return {'a': self.aIter, 'b':self.bIter, 'c': self.cIter, ...} 
```

然后你可以分配：

```
NS = iteration.returnNextSet()
x, y = NS['x'], NS['y'] 
```

.

保留当前功能，您可以分配前两个值：

```
x, y = iteration.returnNextSet()[:2] 
```

在 Python 3 中，您将能够将其余的值分配给另一个元组：

```
x, y, *args = iteration.returnNextSet() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:07:53.643

不太清楚为什么要这样做，但这是一种方法：

```
class Test(object):
    def __init__(self):
        self.a = (1,2,3,4,5,6,7,8,9)
        self.b = (10,20,30,40,50,60,70,80,90)
        self.c = (-1,-2,-3,-4,-5,-6,-7,-8,-9)

    def iter_over(self, *args):
        items = [getattr(self, arg) for arg in args]
        return zip(*items)

t = Test()
for a, c in t.iter_over('a', 'c'):
    print a, c

1 -1
2 -2
3 -3
4 -4
5 -5
6 -6
7 -7
8 -8
9 -9 
```

或者：

```
for items in t.iter_over('c', 'b', 'a'):
    print items[1] # will be b (or 2nd passed above) etc... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:08:25.353

做就是了：

```
results = iteration.returnNextSet() 
```

然后将值称为`results[0]`、`results[1]`等。你可以`len(results)`看看你有多少。

# ruby-on-rails - 在 FactoryGirl 中创建一个值数组，每个值都是唯一的

> ID：12989134
> 
> 赞同：4
> 
> 时间：2012-10-20T13:59:26.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, factory-bot

我定义了这个工厂：

```
factory :post, :parent => :post_without_countries, class: Post do |p|
       p.country_ids {|country_ids| [country_ids.association(:country), country_ids.association(:country)]} 
end 
```

我希望它输出两个独特的国家。相反，它只是两次插入与关联相同的国家/地区：

```
#<Post id: nil, title: "Atque id dolorum consequatur.", body: "Praesentium saepe ullam magnam. Voluptatum tempora ...", created_at: nil, updated_at: nil, user_id: 1>
[#<Country id: 1, name: "Dominican Republic", isocode: "lyb", created_at: "2012-10-20 13:52:18", updated_at: "2012-10-20 13:52:18">, #<Country id: 1, name: "Dominican Republic", isocode: "lyb", created_at: "2012-10-20 13:52:18", updated_at: "2012-10-20 13:52:18">] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-27T09:25:09.647

更好地使用`build_list`or`create_list`方法：

```
post.countries = create_list(:country, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:37:18.913

而不是这样做：

```
2.times { post.countries << FactoryGirl.create(:country) } 
```

在 RSpec 中，您可以`after_create`像这样制作一个钩子：

```
after_create do |post|
  2.times { post.countries << FactoryGirl.create(:country) }
end 
```

如果需要自定义创建国家的次数，可以做一个transient属性：

```
#in the post factory definition
ignore do
  num_countries 0 #default to zero
end

#different after_create
after_create do |post, proxy|
  proxy.num_countries.times { post.countries << FactoryGirl.create(:country) }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:11:31.687

看起来工厂女孩可能没有正确迭代。我脑海中浮现的两个问题是。

你是`FactoryGirl.build`在你打算使用的时候使用`FactoryGirl.create`吗？

您是否尝试过替换`p.country_ids`为`p.sequence(:country_ids)`

我希望这些能给你指明正确的方向。如果没有，也许更多信息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T13:17:29.390

好的，我通过将我创建的许多国家关系从工厂中取出并在 RSpec 中创建它来解决这个问题：

```
 post = FactoryGirl.build(:post)
  2.times { post.countries << FactoryGirl.create(:country) } 
```

# iphone - iPhone iOS 6 - 关闭子视图崩溃

> ID：12989136
> 
> 赞同：0
> 
> 时间：2012-10-20T13:59:31.243
> 
> 标签：iphone, uiview, ios6, subview

我不太清楚发生了什么，但是当用户选择一个按钮时，我有一个显示子视图的视图。这个子视图还有一个按钮，用户可以选择取消和删除这个子视图。当所有这些发生时，当您尝试关闭子视图时，我的应用程序会崩溃。

这是我的代码：

从选择按钮时显示子视图的主视图 -

```
-(IBAction)sendMessage:(id)sender{
    NSLog(@"Going to send a message....");

    CGRect frameBounds = [self.view bounds];

    float frameWidth = frameBounds.size.width;
    float frameHeight = frameBounds.size.height;
    float frameX = frameBounds.origin.x;
    //float frameY = frameBounds.size.height / 2;
    float frameY = frameBounds.size.height;

    float finalY = frameBounds.size.height / 1.75;

    MessageChooserController *chooser = [[MessageChooserController alloc] initWithNibName:@"MessageChooser" bundle:nil];

    //Set the frame off the screen at the bottom
    chooser.view.frame = CGRectMake(frameX, frameY, frameWidth, frameHeight);

    [self.view addSubview:chooser.view];

    [UIView animateWithDuration:0.5 animations:^{chooser.view.frame = CGRectMake(frameX, finalY, frameWidth, frameHeight);}];
} 
```

如您所见，这只是显示了一个新的子视图 - MessageChooserController。现在这个子视图 MessageChooserController 有一个按钮来取消这个“动作”。

MessageChooserController 的头文件：

```
#import <UIKit/UIKit.h>

@interface MessageChooserController : UIViewController

@property (weak, nonatomic) IBOutlet UIButton *btn_sendEmail;

@property (weak, nonatomic) IBOutlet UIButton *btn_sendText;

@property (weak, nonatomic) IBOutlet UIButton *btn_cancel;

-(IBAction)closeChooser:(id)sender;

@end 
```

及其实现：

```
#import "MessageChooserController.h"

@interface MessageChooserController ()

@end

@implementation MessageChooserController
@synthesize btn_cancel, btn_sendEmail, btn_sendText;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    /*
    [btn_cancel setBackgroundImage:[[UIImage imageNamed:@"iphone_delete_button.png"] stretchableImageWithLeftCapWidth:8.0f topCapHeight:0.0f] forState:UIControlStateNormal];
    */
    /*
    UIImage *cancelButtonImage = [[UIImage imageNamed:@"iphone_delete_button"] resizableImageWithCapInsets:UIEdgeInsetsMake(30,0,30,0)resizingMode:UIImageResizingModeStretch];

    [btn_cancel setBackgroundImage:cancelButtonImage forState:UIControlStateNormal];
    */

}

-(IBAction)closeChooser:(id)sender{
    [self.view removeFromSuperview];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

正如你所看到的，我有一个简单的方法来关闭这个子视图，closeChooser。所有这些都可以编译，但是当我选择子视图上的取消按钮时，我的应用程序崩溃了。我在任何地方都找不到关于此的任何信息。

本质上，我希望像从联系人中选择“发送消息”时那样显示视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:16:49.383

这样做的正确方法是调用`[self presentModalViewController:viewController]`父视图控制器，然后`[self dismissModalViewController]`在您想要隐藏它时调用。

# actionscript-3 - 使用用户选择的颜色突出显示 TextField 中用户选择的文本

> ID：12989137
> 
> 赞同：0
> 
> 时间：2012-10-20T13:59:50.373
> 
> 标签：actionscript-3

我希望提供简单的突出显示功能，其中用户在 TextField 中选择一定范围的文本并选择一种颜色，并且该文本的背景像标记一样用该颜色突出显示，这是大多数文本编辑器和文字处理器的标准功能。如何在 AS3（不是 flex）esp 中实现这一点，而不在 TextField 中使用 html/css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:42:31.807

这是您想要做的一个很好的例子：http: [//blog.formatlos.de/2009/06/22/as3-texthighlighter/](http://blog.formatlos.de/2009/06/22/as3-texthighlighter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:43:03.777

此处的解决方案：http: [//tom-lee.blogspot.in/2007/01/textfield-highlighter-class-for-flex.html](http://tom-lee.blogspot.in/2007/01/textfield-highlighter-class-for-flex.html)

此外，在寻找解决方案的过程中，我遇到了 Greensock 提供的一个普遍有用的类，称为 TextMetrics。

# mamp - 配置 php.ini 文件以安装 Composer

> ID：12989138
> 
> 赞同：4
> 
> 时间：2012-10-20T13:59:50.110
> 
> 标签：mamp, php

我正在尝试从 github 安装 gitlist。我在安装它时遇到了一些麻烦，所以文档说我应该以这种方式配置 php.ini

detect_unicode = Off phar.readonly = Off phar.require_hash = Off

我做到了，但是在安装 Composer 时，我仍然被告知将 detect_unicode 设置为 Off。我重新启动了 MAMP，phpinfo() 告诉我 phar.readonly 和 phar.require_hash 确实设置为 Off，但我没有信息告诉我 detect_unicode 设置为 Off。我只将 zend.detect_unicode 设置为 On。

如何将我的配置设置为确实将 detect_unicode 设置为 Off ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:05:29.023

我和你有同样的问题。我找到了这篇文章：[http](http://simon-davies.name/mamp/using-composer-with-mamps-version-of-php) ://simon-davies.name/mamp/using-composer-with-mamps-version-of-php并解决了它。

希望它会有所帮助。

# r - 地图颜色错误但在图例上分配正确？

> ID：12989147
> 
> 赞同：0
> 
> 时间：2012-10-20T14:00:38.783
> 
> 标签：r, map, colors, legend

我一直在绘制等值线图，当我将绘制的颜色与它们分配给它的数字进行比较时，它不合适。

所以这是我的数据

```
 zip latitude    longitude   count2.x  count2.freq   reg   colorBuckets  colma
99501   61.21680    -149.87828    AK          67      Alaska     1         #EDF8FB
35010  32.90343      -85.92669    AL        1582      Alabama    3         #99D8C9
90001   33.97291    -118.24878    CA       20970    California   6         #006D2C
20001   38.90771    -77.01732     DC         952         NA      2         #CCECE6 
```

所以我从一开始就使用的代码如下

```
 library("zipcode")
library("maps")
library("plyr")
library("RColorBrewer")
colors=brewer.pal(6, "BuGn")
data(zipcode)
merge1<-merge(zipcode, tel2, by.x='zip', by.y='zip_code', all.y=TRUE)
result<- ddply(merge1, .(state), transform, count2 = count(state))
#remove NA's#
final<- result[complete.cases(result),]
#remove duplicates#
nodupl <- final[!duplicated(final$state),]
#add state to abbreviations#
nodupl$reg<-state.name[match(nodupl$count2.x, state.abb)]
#intervalle bestimmen#
nodupl$colorBuckets<- as.numeric(cut(nodupl$count2.freq, c(0,500,1000,5000,10000,15000,22000)))
#intervall legend#
text<- c("< 500", "500 - 999", "1000 - 4999","5000 - 9999", "10000 - 14999", "15000 - 22000")
#see what color is assign to where#
nodupl$colma<- colors[nodupl$colorBuckets]
map("state",regions=nodupl$reg, exact=FALSE, col = colors[nodupl$colorBuckets],  fill = TRUE,resolution = 0,lty = 0)
map("state",col = "black",fill=FALSE,add=TRUE,lty=1,lwd=1)
#legend plotten#
par(xpd=TRUE)
legend("bottomleft", text, horiz=FALSE, fill=colors) 
```

因此，如果我看到图例，问题又是正确分配的颜色，但是如果我仔细检查列（行 count2.freq）中的数字与地图上不适合的颜色。例如，加利福尼亚的颜色很浅，但应该是深色的。有没有人看到做错了什么。另外，我在地图上定位图例时遇到了一些麻烦，所以我再也看不到地图了。我能做些什么呢？感谢您的帮助，即使是星期六

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:41:09.530

阿拉斯加地区在该`map`功能中不可用。`nodupl$reg`因此，您的地图显示了（即阿拉巴马州和加利福尼亚州）的第二个和第三个条目。但是使用了您的第一种和第二种颜色。

要以所需颜色打印这些状态，请使用命令

```
map("state", regions=nodupl$reg[2:3], exact=FALSE,
    col = colors[nodupl$colorBuckets][2:3],  fill = TRUE,resolution = 0,lty = 0) 
```

但我也建议搜索阿拉斯加地图。

# parsing - 关于如何实现 BASIC 语言解析器/解释器的任何建议？

> ID：12989149
> 
> 赞同：2
> 
> 时间：2012-10-20T14:00:57.487
> 
> 标签：parsing, interpreter, basic

我一直在尝试实现一个 BASIC 语言解释器（在 C/C++ 中），但我还没有找到任何解释语言结构解析过程的书或（彻底的）文章。有些命令相当复杂且难以解析，尤其是条件和循环，例如 IF-THEN-ELSE 和 FOR-STEP-NEXT，因为它们可以将变量与常量、整个表达式和代码以及其他所有内容混合在一起，例如：

```
10 IF X = Y + Z THEN GOTO 20 ELSE GOSUB P
20 FOR A = 10 TO B STEP -C : PRINT C$ : PRINT WHATEVER
30 NEXT A 
```

能够解析类似的东西并使其工作似乎是一场噩梦。更糟糕的是，用 BASIC 编写的程序很容易变得一团糟。这就是为什么我需要一些建议，阅读一些书或其他任何东西来让我对这个主题保持清醒。你有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-29T14:33:27.103

你选择了一个很棒的项目——编写解释器会很有趣！

但首先，我们所说的口译员是什么意思？有不同类型的口译员。

有一个纯解释器，您只需在找到每个语言元素时对其进行解释。这些是最容易编写的，也是最慢的。

更进一步，将每个语言元素转换为某种内部形式，然后对其进行解释。还是很容易写的。

下一步是实际解析语言，生成语法树，然后解释它。这有点难写，但是一旦你做了几次，它就变得很容易了。

一旦有了语法树，就可以相当轻松地为自定义堆栈虚拟机生成代码。一个更难的项目是为现有的虚拟机生成代码，例如 JVM 或 CLR。

在编程中，就像大多数工程工作一样，仔细的计划非常有帮助，尤其是对于复杂的项目。

所以第一步是决定你想写哪种类型的解释器。如果您还没有阅读任何编译器书籍（例如，我总是推荐 Niklaus Wirth 的“编译器构造”作为对该主题的最佳介绍之一，并且现在可以在网络上以 PDF 形式免费获得），我会推荐你和纯粹的翻译一起去。

但是你仍然需要做一些额外的计划。您需要严格定义要解释的内容。EBNF 非常适合这一点。[有关 EBNF 的异教徒介绍，请阅读http://www.semware.com/html/compiler.html](http://www.semware.com/html/compiler.html)上的 Simple Compiler 的前三部分。它是在高中级别编写的，应该很容易消化。是的，我先在我的孩子身上试过:-)

一旦你定义了你想要解释的内容，你就可以编写你的解释器了。

抽象地说，你的简单解释器将分为扫描器（技术上，词法分析器）、解析器和评估器。在简单的纯插值器情况下，解析器和求值器将结合在一起。

扫描仪很容易编写，也很容易测试，所以我们不会花时间在他们身上。有关制作简单扫描仪的信息，请参阅上述链接。

让（例如）定义您的 goto 语句：

```
gotostmt -> 'goto' integer

integer -> [0-9]+ 
```

这告诉我们，当我们看到令牌“goto”（由扫描仪提供）时，唯一可以跟随的就是一个整数。整数只是一个数字字符串。

在伪代码中，我们可以这样处理：

（token - 是当前的token，也就是刚刚通过扫描仪返回的当前元素）

```
loop
    if token == "goto"
        goto_stmt()
    elseif token == "gosub"
        gosub_stmt()
    elseif token == .....
endloop

proc goto_stmt()
    expect("goto")          -- redundant, but used to skip over goto
    if is_numeric(token)
--now, somehow set the instruction pointer at the requested line
    else
        error("expecting a line number, found '%s'\n", token)
    end
end

proc expect(s)
    if s == token
        getsym()
        return true
    end

    error("Expecting '%s', found: '%s'\n", curr_token, s)
end 
```

看看它有多简单？真的，在一个简单的解释器中唯一难以弄清楚的是表达式的处理。处理这些问题的一个好方法是：[http](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm) ://www.engr.mun.ca/~theo/Misc/exp_parsing.htm结合上述参考资料，您应该有足够的能力来处理您在 BASIC 中遇到的那种表达式.

好的，是时候举一个具体的例子了。这是来自一个更大的“纯解释器”，它处理 Tiny BASIC 的增强版本（但大到足以运行 Tiny Star Trek :-)）

```
/*------------------------------------------------------------------------
  Simple example, pure interpreter, only supports 'goto'
 ------------------------------------------------------------------------*/
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <setjmp.h>
#include <ctype.h>

enum {False=0, True=1, Max_Lines=300, Max_Len=130};

char *text[Max_Lines+1];    /* array of program lines */
int textp;                  /* used by scanner - ptr in current line */
char tok[Max_Len+1];        /* the current token */
int cur_line;               /* the current line number */
int ch;                     /* current character */
int num;                    /* populated if token is an integer */
jmp_buf restart;

int error(const char *fmt, ...) {
    va_list ap;
    char buf[200];

    va_start(ap, fmt);
    vsprintf(buf, fmt, ap);
    va_end(ap);
    printf("%s\n", buf);
    longjmp(restart, 1);
    return 0;
}

int is_eol(void) {
    return ch == '\0' || ch == '\n';
}

void get_ch(void) {
    ch = text[cur_line][textp];
    if (!is_eol())
        textp++;
}

void getsym(void) {
    char *cp = tok;

    while (ch <= ' ') {
        if (is_eol()) {
            *cp = '\0';
            return;
        }
        get_ch();
    }
    if (isalpha(ch)) {
        for (; !is_eol() && isalpha(ch); get_ch()) {
            *cp++ = (char)ch;
        }
        *cp = '\0';
    } else if (isdigit(ch)) {
        for (; !is_eol() && isdigit(ch); get_ch()) {
            *cp++ = (char)ch;
        }
        *cp = '\0';
        num = atoi(tok);
    } else
          error("What? '%c'", ch);
}

void init_getsym(const int n) {
    cur_line = n;
    textp = 0;
    ch = ' ';
    getsym();
}

void skip_to_eol(void) {
    tok[0] = '\0';
    while (!is_eol())
        get_ch();
}

int accept(const char s[]) {
    if (strcmp(tok, s) == 0) {
        getsym();
        return True;
    }
    return False;
}

int expect(const char s[]) {
    return accept(s) ? True : error("Expecting '%s', found: %s", s, tok);
}

int valid_line_num(void) {
    if (num > 0 && num <= Max_Lines)
        return True;
    return error("Line number must be between 1 and %d", Max_Lines);
}

void goto_line(void) {
    if (valid_line_num())
        init_getsym(num);
}

void goto_stmt(void) {
    if (isdigit(tok[0]))
        goto_line();
    else
        error("Expecting line number, found: '%s'", tok);
}

void do_cmd(void) {
    for (;;) {
        while (tok[0] == '\0') {
            if (cur_line == 0 || cur_line >= Max_Lines)
                return;
            init_getsym(cur_line + 1);
        }
        if (accept("bye")) {
            printf("That's all folks!\n");
            exit(0);
        } else if (accept("run")) {
            init_getsym(1);
        } else if (accept("goto")) {
            goto_stmt();
        } else {
            error("Unknown token '%s' at line %d", tok, cur_line); return;
        }
    }
}

int main() {
    int i;

    for (i = 0; i <= Max_Lines; i++) {
        text[i] = calloc(sizeof(char), (Max_Len + 1));
    }

    setjmp(restart);
    for (;;) {
        printf("> ");
        while (fgets(text[0], Max_Len, stdin) == NULL)
            ;

        if (text[0][0] != '\0') {
            init_getsym(0);
            if (isdigit(tok[0])) {
                if (valid_line_num())
                    strcpy(text[num], &text[0][textp]);
            } else
                do_cmd();
        }
    }
} 
```

希望这足以让您入门。玩得开心！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-11T14:55:26.540

说这话我肯定会被打败……但是……：

首先，我实际上正在开发一个独立的库（作为一种爱好），它由以下组成：

*   一个标记器，从源文本构建标记的线性（平面列表）并遵循与文本相同的序列（从文本流创建的词法）。
*   手动解析器（语法分析；伪编译器）
*   没有“伪代码”或“虚拟 CPU/机器”。
*   指令（例如“return”、“if”、“for”、“while”……然后是算术表达式）由基本的 c++-struct/class 表示，并且是对象本身。基础对象，我将其命名为`atom`，有一个名为“eval”的虚拟方法，以及其他常见成员，即“执行/分支”本身。所以无论我有一个'if'语句及其可能的分支（单个语句或语句/指令块）作为真或假条件，它都会从基本虚拟原子：：eval（）......等等对于一切都是`atom`.
*   甚至诸如变量之类的“对象”也是“原子”。'eval()' 将简单地从`variant`原子本身持有的容器返回其值（指针，指的是持有'atom'的'本地'变体实例（实例变体本身）或由原子持有的另一个变体在给定的“块/堆栈”中创建。所以“原子”是“就地”指令/对象。

到目前为止，作为一个例子，下面的一些没有真正意义的“代码”可以正常工作：

```
r = 5!; // 5! : (factorial of 5 )
Response = 1 + 4 - 6 * --r * ((3+5)*(3-4) * 78);
if (Response != 1){ /* '<>' also is not equal op. */
 return r^3;
} 
else{
 return 0;
} 
```

表达式（算术）内置于`binary tree expression`：

```
A = b+c; =>
    =
   / \
  A   +
     / \
    b   c 
```

因此，上述表达式的“指令”/语句是树条目原子，在上述情况下，它是“=”（二进制）运算符。

树是用 atom::r0,r1,r2 构建的： atom 'A' ：

```
 r0
     |
     A
    / \
   r1  r2 
```

关于 c++ 运行时和“脚本”库之间的“全双工”机制，我做了`class_adaptor`和`adaptor<>`：

前任。：

```
template<typename R, typename ...Args> adaptor_t<T,R, Args...>& import_method(const lstring& mname, R (T::*prop)(Args...)) { ... }

template<typename R, typename ...Args> adaptor_t<T,R, Args...>& import_property(const lstring& mname, R (T::*prop)(Args...)) { ... } 
```

第二：我知道那里有很多工具和库，例如 lua、boost::bind<*>、QML、JSON 等……但在我的情况下，我需要创建自己的 [edit] 'independant ' [/edit] 用于“实时脚本”的库。我害怕我的“解释器”会占用大量内存，但令我惊讶的是它没有使用 QML、jscript 甚至 lua 大:-)

谢谢 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:04:15.390

不要费心手动破解解析器。使用解析器生成器。`lex`+`yacc`是经典的词法分析器/解析器生成器组合，但谷歌搜索会发现很多其他的。

# android - Android 自定义视图和画布大小

> ID：12989150
> 
> 赞同：1
> 
> 时间：2012-10-20T14:01:12.060
> 
> 标签：android, canvas, view

我创建了一个自定义视图，它创建了一个位图，然后在该`onDraw()`方法中我显示了一个对象数据。

同样在 XML 文件中，我使视图可以水平滚动。

我的问题是在我从`onDraw()`方法中绘制了画布上的所有数据之后，如何增加视图的大小以显示所有数据。

即我希望视图滚动到足够多，直到数据完成而不是更多。

我确实有显示的最后一个项目的 y 坐标。

目前我在 XML 文件中将视图的宽度设置为 800dp，但是对于某些对象，它会切断一些数据。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:47:20.600

您可以覆盖该`onMeasure()`方法来调整您的大小`View`：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int parentViewWidth = MeasureSpec.getSize(widthMeasureSpec);
    int parentViewHeight = MeasureSpec.getSize(heightMeasureSpec);
    // ... take into account the parent's size as needed ...
    super.onMeasure(
        MeasureSpec.makeMeasureSpec(newWidth, MeasureSpec.EXACTLY), 
        MeasureSpec.makeMeasureSpec(newHeight, MeasureSpec.EXACTLY));
} 
```

# git - 如何处理不同类型的 VCS 存储库

> ID：12989151
> 
> 赞同：0
> 
> 时间：2012-10-20T14:01:11.500
> 
> 标签：git, svn, version-control, mercurial

我有一个小库，我想让用户可以使用配置文件向库中添加一些额外的组件。

用户可以创建文件`config`并在那里添加一些描述 url 到他们的 VCS 和提交（或标签，或只是分支）的字符串。

现在我正在考虑这种语法，但也许有一些固定类型的寻址？

我想创建这样的语法，但我希望找到通用的解决方案。

```
[library "jquery"]
vcs = git 
url = git://github.com/jquery/jquery.git
revision = 1.8.2

[library "cleonello"]
vcs = hg
url = https://bitbucket.org/cleonello/jqplot
revision = 81ec4eb933068c5009958b504feef3f27e1b1129

[library "webgeom"]
vcs = svn 
url = svn://svn.gna.org/svn/webgeom/trunk
revision = 52

[library "asdf"]
vcs = dir
url = file:///usr/share/asdf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:22:06.937

1.  VCS 是所有单片机的强制密钥（相同的协议可以在不同的单片机中使用，不能用于区分单片机）
2.  对于 Git（案例 3）变更集的 id 也必须是 SHA1，而不是本地编号

**注意**：Git 不能使用 svn:// 协议，是`vcs = svn`吗？

# php - PHP关键字搜索

> ID：12989153
> 
> 赞同：1
> 
> 时间：2012-10-20T14:01:30.060
> 
> 标签：php, cassandra

我正在构建搜索系统，带有`nosql`数据库`cassandra`，它不支持任何类型的关键字搜索，所以有几个选项，经过一番搜索，这就是想出来的。

我可以存储可以搜索的关键字列表，例如假设它是音乐流派。所以我会存储所有这些类型，然后一次检索所有这些类型并用 php 过滤它们，如果说`2k`关键字或更多，它会很慢吗？

我想在某个地方获得过滤结果，`~100ms`这可能吗？如果是这样，什么样的`php`功能可以帮助我进行单词过滤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:15:21.297

如果您希望按音乐流派过滤歌曲或专辑，那么使用 Cassandra 真的很容易。我将使用术语“标签”而不是流派，因为您真的可以使用任何类型的标签来做到这一点，而不仅仅是流派。

布置一个列族，其中键是标签，行中每个具有该标签的项目都有一个单元格。您可以使用项目名称或 ID 作为单元格名称，单元格值可以为空或包含您想要的任何其他元数据。

使用 phpcassa（它基于 Cassandra 的原始 Thrift RPC API），如果你想在标签下存储一个项目，它就像这样简单：

```
 $cf->insert($tag, array($item->name, $item->metadata)); 
```

要获取具有特定标签的所有项目，请执行以下操作：

```
$cf->get($tag); 
```

虽然一个好的 PHP CQL 3 驱动程序还没有完成，但是使用 CQL 3 你可以做这样的事情：

```
CREATE TABLE TAGS (
    tag utf8,
    itemid uuid,
    PRIMARY KEY (tag, itemid)
); 
```

你会像这样添加一个标记的项目：

```
INSERT INTO TAGS (tag, itemid) values ("rock", "Led Zeppelin"); 
```

您可以通过以下方式获取所有带有标签的项目：

```
SELECT * FROM TAGS WHERE tag="rock"; 
```

你可以很容易地在一个标签下存储一百万个项目，并且获取第一个，比如 2000，会非常快，只有几毫秒。

# c - 为什么这个自定义网络服务会崩溃（用 C 语言编写）？

> ID：12989156
> 
> 赞同：0
> 
> 时间：2012-10-20T14:01:41.980
> 
> 标签：c, debugging, network-programming

我编写了这个程序，它在给定端口上侦听，然后，一旦收到连接，就会输出一行文本并断开连接。它运行了好几天，处理了数千个查询，但随后（不可避免地）崩溃了，我不得不重新启动它。想知道是否有人认为它有任何问题，或者（或者）是否有人可以提出一种使其更健壮的方法。

```
int main(int argc, char *argv[])
{
     srand(time(0));

     int sockfd, newsockfd, portno;
     socklen_t clilen;
     struct sockaddr_in serv_addr, cli_addr;
     int n;
     if (argc < 2) {
         fprintf(stderr,"ERROR, no port provided\n");
         exit(1);
     }
     sockfd = socket(AF_INET, SOCK_STREAM, 0);
     if (sockfd < 0)
        error("ERROR opening socket");
     bzero((char *) &serv_addr, sizeof(serv_addr));
     portno = atoi(argv[1]);
     serv_addr.sin_family = AF_INET;
     serv_addr.sin_addr.s_addr = INADDR_ANY;
     serv_addr.sin_port = htons(portno);
     if (bind(sockfd, (struct sockaddr *) &serv_addr,
              sizeof(serv_addr)) < 0)
              error("ERROR on binding");
     listen(sockfd,5);
     clilen = sizeof(cli_addr);

   while (1)
   {
     unsigned char write_val;
     unsigned char y[BYTES];
     int i, j;

     newsockfd = accept(sockfd,
                 (struct sockaddr *) &cli_addr,
                 &clilen);
     if (newsockfd < 0)
          error("ERROR on accept");

     fill_buffer(y);  // fills buffer y with a 128-bit string; not included here
     for (i=BYTES-1; i >= 0; i--)
     {
       const void* ZERO = (void *)"0";
       const void* ONE  = (void *)"1";

       for (j=7; j >= 0; j--)
         write(newsockfd, (y[i] >> j) & 1 ? ONE : ZERO, 1);
     }

     write(newsockfd, "\n", 1);
     close(newsockfd);
   }

   close(sockfd);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:41:42.957

> 任何人都认为它有任何问题

虽然这段代码可以变得更高效（例如通过一次写入所有字节），但那里没有明显的缺陷。

这使得您的代码中未发布的部分成为该问题的合适候选者：

```
fill_buffer(y);  // fills buffer y with a 128-bit string; not included here 
```

如果您读取的字节数超过`y[]`'s 的大小，那么您将崩溃。

> 或者（或者）如果有人可以提出一种让它更健壮的方法

尝试扩大这个`y[]`缓冲区的大小（加倍不会有坏处）。

并确保`fill_buffer()`不能读取超过`BYTES`字符。

如有疑问，请发布此缺失的代码。

您还可以使用调试符号编译代码并将回溯（带有符号）从信号处理程序转储到文件中。这样，如果你的程序崩溃了，你就会知道`where`和`why`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T15:12:23.367

带有一些注释的代码看起来不错。一个有点重要的评论：portno 应该被声明为 unsigned short。这适用于类似 Intel（小端）的处理器，但它不能移植到具有不同端序的处理器。

无论如何，这不是您的进程崩溃的原因。

显然崩溃是在“while”内执行时发生的，通过查看代码，如果它因缓冲区溢出而崩溃，唯一的可能性是在 fill_buffer 内。

如果您显示 BYTES 和 fill_buffer 的定义，它将更容易帮助您。

现在，如果它不是缓冲区溢出，那么如果客户端在服务器写入套接字之前关闭连接，它就有可能在写入中中止。在这种情况下，进程将收到信号 SIGPIPE，如果代码不处理该信号，它将中止。

您还可以使用以下命令忽略 SIGPIPE：

```
signal(SIGPIPE, SIG_IGN); 
```

另一种可能性是，如果您使用 write_val 做了一些奇怪的事情并且您没有显示该代码。

我希望这有帮助。

# facebook - 将 facebook 粉丝页面与我的网站联系起来

> ID：12989157
> 
> 赞同：0
> 
> 时间：2012-10-20T14:02:08.827
> 
> 标签：facebook, facebook-page

我有自己的网站和 facebook 粉丝页面。我想将 facebook 粉丝页面与我的网站连接起来。
每当我在我的网站上发布任何内容时，它都会自动发布在我的 Facebook 粉丝页面上。请告诉我该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:51:28.753

每当您发布数据时，请使用此

```
try {
          $post_id = $facebook->api("/".userid."/feed", "post",
          array(

          'message' => 'contents',
                              '
          )
          );
     } 
catch (FacebookApiException $e) 
     {
          error_log($e);
     } 
```

# amazon-web-services - 如何在aws elb上安装godaddy ssl证书？

> ID：12989162
> 
> 赞同：29
> 
> 时间：2012-10-20T14:02:38.703
> 
> 标签：amazon-web-services, ssl, https

我从 godaddy 购买了 SSL 证书。我创建了一个密钥库文件，从中生成了一个 csr 文件，将其发送给 godaddy，并收到了这些文件：

*   我的域名.crt
*   gd_intermediate.crt
*   gd_bundle.crt

现在我正在尝试在 AWS 控制台中创建一个弹性负载均衡器。当被要求提供证书详细信息时，他们要求：

*   私钥（pem 编码）
*   公钥证书（pem 编码）
*   证书链（pem 编码，可选）

如何将我拥有的文件转换为这些参数？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-25T10:34:23.137

对于 AWS ELB，您需要三件事

**私钥**

您在 linux 上生成的 rsa 密钥

`#openssl genrsa -des3 -out host.key 2048`

它会要求输入密码，现在给它，我们稍后会删除它。

**公钥**

首先从您的私钥生成 csr 文件，该文件是证书签名请求（在您的情况下，您提交给权威机构 Godaddy 以获取公钥的文件）。您可以使用生成 csr 文件

`#openssl req -new -key host.key -out host.csr`

现在您将您的 csr 文件提交给 godaddy，作为回报，他们会为您提供两个文件（mydomain.crt、gd_bundle.crt）。mydomain.crt 是您的公钥。

**证书链**

gd_bundle.crt 是 Godaddy 为您提供公钥的认证链文件。您的公钥和认证链文件不需要任何转换，但对于私钥文件，您需要删除其密码并将其转换为 pem

```
#openssl rsa -in host.key -out private.pem 
```

并且将 AWS.put private key.pem 文件内容放在 aws 私钥部分并将 mydomain.crt 文件内容放在公钥中并将 gd_bundle.crt 内容放在证书链部分中，这一切都很好。转换完全取决于您从哪里获得证书。如果从其他公司获得证书，我会建议您遵循 AWS Docs。

```
http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/ssl-server-cert.html 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-26T23:45:51.857

我最近不得不经历这个过程，但没有一个答案对我有用。以下是允许我将新 SSL 证书上传到 AWS 的步骤（以供后续在 ElasticBeanstalk 中使用）。

**获取私钥**

我必须为此过程使用两个命令：

```
openssl genrsa -des3 -out server.pass.key 2048
openssl rsa -in server.pass.key -out server.key 
```

该`server.key`文件是您的私钥。

此外，您可以通过执行以下操作生成 CSR（证书签名请求）：

```
openssl req -nodes -new -key server.key -out server.csr 
```

这是我们将用于请求 GoDaddy 颁发我们的新证书的文件。

**获取公钥**

在 GoDaddy 中颁发证书后，下载它。这将为您提供两个必须通过以下方式捆绑为一个的文件：

```
cat yourdomain.crt gd_bundle-g2-g1.crt > combined.crt 
```

这`combined.crt`将是您的公钥。

**将服务器证书上传到 AWS**

通过`server.key`and`combined.crt`文件，您现在可以使用[AWS CLI](https://aws.amazon.com/cli/ "AWS 命令​​行")将证书上传到 AWS 。您只需要使用以下命令：

```
aws iam upload-server-certificate --server-certificate-name your_certificate_name --certificate-body file://combined.crt --private-key file://server.key 
```

如果一切顺利，您将收到来自服务器的响应：

```
{
    "ServerCertificateMetadata": {
        "ServerCertificateId": "ABCDEFG12345678", 
        "ServerCertificateName": "certificate-name", 
        "Expiration": "2018-08-26T11:59:38Z", 
        "Path": "/", 
        "Arn": "arn:aws:iam::1234123412:server-certificate/certificate-name", 
        "UploadDate": "2017-08-26T19:53:46.989Z"
    }
} 
```

就是这样，您应该在 AWS 中有一个可用的新 SSL 证书。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-17T01:31:31.710

差不多两年前，但我偶然发现了这一点，它让我难过一秒钟。

**Certificate body***是 zip 文件中的主键，我的看起来像这样，`f7dsdfsdf2f4e942d.crt`只有一个条目。

中间字段**Certificate private key***是签署您的 csr 的 ssh 私钥。它存在于您用来创建 csr 请求的服务器上。我通过查看 nginx 配置文件并复制到我的本地驱动器找到了我的位置。

最后一个字段**证书链**是具有 3 个条目的文件，我的看起来像`gd_bundle-g2-g1.crt`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T21:10:24.113

这是有关如何在 Amazon Elastic Load Balancer (ELB) 上获得 Godaddy ssl 证书的指南[http://cloudarch.co.uk/2011/10/elastic-load-balancer-ssl-setup-guide-pem-encoded -csr/#.UKFla2nGU_8](http://cloudarch.co.uk/2011/10/elastic-load-balancer-ssl-setup-guide-pem-encoded-csr/#.UKFla2nGU_8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T14:13:42.880

您想将 mydomain.crt 转换为 mydomain.pem（另外两个文件是信任链文件）。您可以在任何 unix 或 linux 系统上使用 openssl 从 crt 生成 pem 文件。

由于证书颁发者拥有私钥，它应该要求您提供私钥的唯一原因是它是否正在尝试生成证书。如果您已经拥有证书，则应该使用它。检查[文档](http://docs.amazonwebservices.com/AmazonDevPay/latest/DevPayDeveloperGuide/X509Certificates.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-23T13:20:37.520

如果您使用的是 Windows IIS 服务器：

**私钥**

*   按照 [此处](http://www.entrust.net/knowledge-base/technote.cfm?tn=7905)的说明获取您的私钥。本质上（没有屏幕截图）：
    *   运行*mmc.exe*
    *   从“*文件*”菜单中，选择“*添加/删除管理单元”*。
    *   在出现的新窗口中，单击*添加*。
    *   选择*证书*，然后单击*添加*。
    *   选择计算机帐户选项，然后单击*下一步*。
    *   选择*本地计算机*，然后单击*完成*。
    *   单击*关闭*，然后单击*确定*。证书（本地计算机）的管理单元出现在控制台中。
    *   展开左侧预览面板中的*证书（本地计算机）*树。
    *   右键单击*个人*并选择*所有任务 > 导入*。出现证书导入向导。单击*下一步*。
    *   浏览到您的服务器证书文件的位置，然后单击*下一步*。
    *   选择*将所有证书放在以下存储中*，然后单击*下一步*。
    *   单击*完成*以完成证书导入向导。
    *   将出现一个对话框，指示导入成功。单击确定。
*   在树上，展开*Personal* 并单击*Certificates*。双击您的证书。
*   从证书弹出窗口的*详细信息*选项卡中单击*复制到文件并创建一个 .pfx 文件。*
**   转到[此处](https://www.sslshopper.com/ssl-converter.html)将其转换为 PEM 格式。*   仅粘贴从`-----BEGIN PRIVATE KEY-----`到的部分`-----END PRIVATE KEY-----`。
    *   不是上面的行`-----BEGIN PRIVATE KEY-----`，也不是下面的行`-----END PRIVATE KEY-----`*

 ***公钥**

*   在下载的 zip 文件中使用 GoDaddy 提供的 .crt 文件。

**证书链**

*   在下载的 zip 文件中使用 GoDaddy 提供的 gd_bundle-g2-g1.crt。*

# wpf - wpf 文本框：默认大小和 UI 自动化行为的问题

> ID：12989166
> 
> 赞同：1
> 
> 时间：2012-10-20T14:03:27.190
> 
> 标签：wpf, textbox, treeview, ui-automation

我有一个`TreeView`带有自定义项目的 wpf。每个节点都是一个 wpf 边框，里面有一个 wpf 扩展器。扩展器包含节点的子项，依此类推。所以每个`TreeViewNode`里面都有它的物品。

`TreeViewItem`：用户界面表示：

```
the outer element: a wpf Border (the node): 

/-----------------\
|                 |
| title(textbox)  |
|                 |
|  \/Expander     |
|  |        |     |
|  | child  |     |
|  | items  |     |
|  ----------     |
|                 |
\-----------------/ 
```

的`Viewmodel`for`TreeViewItem`有一个`ObservableCollection`进一步`TreeviewItem`的 s。

如果我使用 添加项目`ObservableCollection<Item>.Add(..)`，`TreeviewItem`视图会显示带有新项目的节点：它会放大 wpf`Border`并在 wpf 中显示新项目`Expander`。

如果我删除`Items`using `ObservableCollectionyItem>.Remove(..)`，`Border`则再次缩小并显示一个空扩展器。

这是我要保持的行为！

问题：我用于`TextBox`：

```
DockPanel.Dock = "Top" 
```

以适应`Border`宽度。这会拉伸`TextBox`以适应新的边框宽度。当我删除一个子项时，边框的宽度不会减小，因为`TextBox` 现在更大了。但我希望`TextBox`独立于外部边界。

应该在`TextBox`添加子项时调整到可用空间，但在删除子项时不应影响边框恢复到较小的大小。`TextBox`宽度不应依赖于任何布局元素。如何做到这一点？

示例：如果我`DockPanel.Dock="Left"`用于文本框，它不会增长（*不好*），但在删除元素时边框会恢复到原来的大小（*好）。*

如何使文本框的宽度与 wpf 自动 UI 大小无关*？*顺便说一句，我不想​​从代码中调整 treeviewitems 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:48:59.230

我在这里找到了一个非常有用的提示：

stackoverflow.com/questions/6338315/allow-wpf-grid-cell-content-to-expand-outside-of-the-grid-cell

如果将文本框放在画布内，它不会影响外边框宽度！

# php - url 重写 - dipslys 一个额外的参数

> ID：12989168
> 
> 赞同：0
> 
> 时间：2012-10-20T14:03:51.667
> 
> 标签：php, .htaccess

我正在用干净的 URL（使用`.htaccess`）重写我的网站 URL。我已经在我的`.htaccess`.

```
RewriteRule ^details/([^/]+)/([^/]+) front/detailsnew.php?catid=$1&title=$2 [NC] 
```

但 URL 显示如下：

```
My domain /details/Apartments/409-Palm-Beach-Condos#ad-image-0 
```

我不希望`#ad-image-0`显示。我的href链接是

```
My domain/details/European/Test-Bisuwer 
```

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T11:39:44.077

在您的`jquery.ad-gallery.js`文件中，您需要删除以下行

500 以上的行号

评论 2 行：`window.location.hash = "#ad-image-"+ thumb_link.attr("id");`

```
 if(this.settings.update_window_hash) {
            var thumb_link = this.images[this.current_index].thumb_link;
            if (thumb_link.attr("id")) {
              //window.location.hash = "#ad-image-"+ thumb_link.attr("id");
            } else {
              //window.location.hash = "#ad-image-"+ this.current_index;
            };
          }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:16:00.977

URL的`#`一部分是一个*片段*。它永远不会发送到服务器，并且仅由客户端（浏览器）用于处理内容，或者在某些情况下，是 AJAX 或其他 javascript 相互通信的一种方式。您无法在 htaccess 文件中删除它。浏览器自己生成它。但是查看片段，并在谷歌上搜索它，它可能与[AD Gallery](http://adgallery.codeplex.com/)有关，有人提到`ad-image-`在使用 AD Gallery 时会获取片段。

# python - 缩进中制表符和空格的使用不一致

> ID：12989171
> 
> 赞同：14
> 
> 时间：2012-10-20T14:04:02.787
> 
> 标签：python, indentation

```
def contains_sequence(dna1, dna2):
    ''' (str, str) -> bool

    Return True if and only if DNA sequence dna2 occurs in the DNA sequence
    dna1.

    >>> contains_sequence('ATCGGC', 'GG')
    True
    >>> contains_sequence('ATCGGC', 'GT')
    False

    '''
    b=False
    len2=len(dna2)
    i=0
    for j in dna1:
        temp=dna1[i:i+len2]
        if temp == dna2:
            b=True
        i=i+1
    return b 
```

我是 Python 新手。上面粘贴的程序在“if temp == dna2:”行给我一个错误“缩进中制表符和空格的使用不一致”。有人可以帮我找出缩进是不正确的吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-20T14:11:14.957

这意味着您在缩进中混淆了空格和制表符。您必须修复它以与制表符或空格保持一致。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T15:17:31.520

如果你仔细看线条

```
 temp=dna1[i:i+len2]
    if temp == dna2: 
```

在您的代码中，您将看到每行开头的“空格”是不同的“构造”。在一种情况下，它使用制表符，而在其他空格中，或者，如果两者都有制表符和空格，则它们以不同的组合使用。

您可以通过将光标放在每行的开头并使用右箭头键“遍历”字符来检查这一点。您会看到光标在每一行上的移动方式不同。

要解决此问题，请删除每行开头的制表符和空格，然后在每行中使用相同的字符重新插入它们。

为避免将来发生，请训练自己仅使用制表键或空格键进行缩进，并考虑将编辑器设置为自动将制表符转换为空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T15:06:07.003

假设您有一个“好”的 IDE，最好将制表键设置为 4 个空格而不是“制表符”，这样您的问题就会减少，而且这是一个很好的做法，因为您将与其他人一起工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-27T22:29:41.700

一段时间以来，我几乎对这个问题感到厌烦。我正在使用 CentOS Ec2 并发现您可以：

```
vim <文件名>
如果您处于写入/插入模式，请按 Escape 键
：设置列表

```

空格将显示为*行尾，*例如`$`符号。这很有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-28T12:17:29.150

就我而言，Visual Studio 代码..

Ctrl+Shift+P 或查看-> 命令面板。

类型

> 将缩进转换为空格

按 Enter。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T15:27:05.637

根据您的文档字符串

你的代码：

```
b=False
len2=len(dna2)
i=0
for j in dna1:
    temp=dna1[i:i+len2]
    if temp == dna2:
        b=True
    i=i+1
return b 
```

这么大的代码可以简化为一行

```
return dna1.find(dna2)>=0 
```

此外，如果你不擅长“vim”编辑器中的缩进，那么最好在[IDLE3中练习](https://en.wikipedia.org/wiki/IDLE_%28Python%29)

# objective-c - 是什么导致 nan 错误结果？

> ID：12989172
> 
> 赞同：1
> 
> 时间：2012-10-20T14:04:04.973
> 
> 标签：objective-c, c

我有这段代码通过循环运行。小写的`x`var 总是能正确打印。大写的`X`var 有时会**正确打印**，有时会打印`nan`或`junk`. 为什么？

**注意 数据始终相同。**

[链接到 FFT](http://pastebin.com/DwmZEPBt)

[链接到 FFT 示例用法](http://pastebin.com/XGGPkPGM)

[链接到我的另一个 SO question，它显示了它是如何被使用的。](https://stackoverflow.com/questions/11922289/problems-allocating-memory-in-c) **赏金 200 分！**

```
double (*x)[2];
double (*X)[2];

x =  malloc(2 * 512 * sizeof(double));
X =  malloc(2 * 512 * sizeof(double)); 

for (j = 0; j < 10; j++){
    (*x)[j] = // values inserted from method argument.; 
}

fft(512, x, X);

for (j = 0; j < 512; j++){
    if (i==512*20) {
        NSLog(@"PRE POST %f - %f",(*x)[j], (*X)[j]);
    }
}
    free(x);
    free(X); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:12:45.610

在浮点运算中，有几种运算会导致 NaN 错误。[维基百科](http://en.wikipedia.org/wiki/NaN#Creation)指出这些操作会导致 NaN：

> *   分割 0/0 和 ±∞/±∞</p>
>     
>     
> *   乘法 0×±∞ 和 ±∞×0
>     
>     
> *   加法 ∞ + (−∞)、(−∞) + ∞ 和等效减法

（这些被称为[不确定形式](http://en.wikipedia.org/wiki/Indeterminate_forms)。）

检查您的代码以查看您是否正在执行任何无法获得数字答案的操作。

至于“垃圾”结果，它们可能是内存分配混乱的结果，但你没有提供太多细节，所以我不能确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:29:47.803

I tried running this - initialised the data using `(*x)[j] = j` and removed the `i==512*20` printing condition. All values came back fine. I also tried with random input data - still good. What is the nature of your input data?

(I'll look at your other question as well)

edit: I should point out I filled 512 values of the x array - your loop above only fills 10, so much of the input array is uninitialised.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:07:39.223

在我使用过的其他语言中，“NaN”（不是数字）是您将 a 除以 时得到`0.0`的`0.0`。我不知道Objective-C，但很可能是一样的。

至于是什么导致`nan`存储在`X`......你必须`fft`在任何人回答之前向我们展示身体。您说您认为这可能是内存/指针错误，因为它不一致。我刚刚查看了 NaN 在 IEE 7754 浮点格式（您的平台可能正在使用的格式）中的表示方式——基本上，几个高位（通常保存浮点数的指数）都必须用 1s 填充。

如果您确实有内存损坏错误，导致垃圾被存储到`X`中，那么如果这些特定位恰好都是 1，那将导致数字打印为“nan”。

再次，请展示 的正文`fft`，以便有人可以进一步帮助您。

# c# - C# datagridview 中的存储过程而不是列表框

> ID：12989175
> 
> 赞同：3
> 
> 时间：2012-10-20T14:04:32.277
> 
> 标签：c#, .net, stored-procedures

我对存储过程有疑问。

此代码有效（带有`ListBox`）

```
private void button4_Click(object sender, EventArgs e)
{
   string connectionString = ConfigurationManager.ConnectionStrings["connString"].ConnectionString;
   SqlConnection connection = new SqlConnection(connectionString);

   string sqlCmd = "Drie duurste producten";

   SqlCommand cmd = new SqlCommand(sqlCmd, connection);

   cmd.CommandType = CommandType.StoredProcedure;
   cmd.CommandText = sqlCmd;

   connection.Open();

   using (SqlDataReader reader = cmd.ExecuteReader())
   {
      while (reader.Read())
      {
          listBox1.Items.Add(reader.GetValue(0).ToString()); 
      }
   }   

   connection.Close();
} 
```

但是如何将此数据添加到 a`DataGridView`而不是 a `ListBox`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:09:11.383

改成

```
 ......
   using (SqlDataAdapter adapter = new SqlDataAdapter()) 
   { 
        DataTable dt = new DataTable();
        adapter.SelectCommand = cmd;            { 
        adapter.Fill(dt);
        dataGridView1.DataSource = dt;
   }    
   ...... 
```

通常一个 DataGridView 被填充绑定一个完整的数据源到它的 DataSource 属性并让控件弄清楚如何配置它的列和显示的值的格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:30:31.067

SqlDataAdapter 是最简单的方法。

但也可以创建 DataTable 并手动填充它并将 DataGridView 的 DataSource 值分配给 DataTable 实例：

```
 ...

        DataTable dt = new DataTable("test");
        dt.Columns.Add("test");

        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                DataRow dr = dt.NewRow();
                dr[0] = reader.GetValue(0).ToString();
                dt.Rows.Add(dr);
            }
        }  

        dataGridView1.DataSource = dt;

        .... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:27:24.420

```
 static public long Insert(BillAO ao)
    {
        try
        {
            SqlParameter[] Params =
            {
                new SqlParameter("@Status",ao.Status)
                , new SqlParameter("@BAID",ao.BAID)
                , new SqlParameter("@PhieuKhamID",ao.PhieuKhamID)
                , new SqlParameter("@ThuNganID",ao.ThuNganID)
                , new SqlParameter("@Ngay",ao.Ngay)
                , new SqlParameter("@SoTien",ao.SoTien)
                , new SqlParameter("@LyDo",ao.LyDo)
                , new SqlParameter("@GhiChu",ao.GhiChu)
                , new SqlParameter("@CreatedBy",ao.CreatedBy)
                , new SqlParameter("@CreatedTime",ao.CreatedTime)
                , new SqlParameter("@LastModifiedBy",ao.LastModifiedBy)
                , new SqlParameter("@LastModifiedTime",ao.LastModifiedTime)
            };
            int result = int.Parse(SqlHelper.ExecuteScalar(HYPO.Utils.Config.ConnString, CommandType.StoredProcedure, "SP_Bill_Insert", Params).ToString());
            return result;
        }
        catch (Exception ex)
        {
            if (ex.Message.Contains("duplicate"))
            {
                return -2;
            }
            return -1;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T14:07:56.560

您需要使用 SqlDataAdapter 来获取数据表中存储过程的结果。

```
SqlDataAdapter da = new SqlDataAdapter();
da.SelectCommand = cmd;      
da.Fill(dt);
dataGridView1.DataSource = dt; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T14:09:58.327

你不需要 a `CommandReader`，你所要做的就是使用`DataAdapter`and `DataSet`。并将数据集绑定到您的`DataGridView`

```
DataSet ds = new DataSet();

using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
{
    adapter.Fill(ds);
    dataGridView1.DataSource = ds.Tables[0];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T07:10:18.740

您可以使用 DataTable 或 DataSet 来填充数据...。这里我使用 DataTable ....

```
Datatable data = new Datatable();
using (SqlDataAdapter adp = new SqlDataAdapter())
{
    adp.SelectCommand = cmd;
    adp.Fill(data);
    GridView1.DataSorce = data;
    GridView1.DataBind();        <--- Needed to bind GridView at a time While Filling DataTable data
} 
```

在将DataTable分配给Gridview1之前，您也可以通过这种方式检查DataTable是否包含数据......

```
if(data.Rows.Counnt > 0)
{
        GridView1.DataSorce = data;
        GridView1.DataBind();     
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T07:38:05.033

```
public void whateverToolStripMenuItem_Click(object sender, EventArgs e) {
// A previously declared and instantiated OpenFileDialog, i put it from Design Mode, but you can just
// declare it as 
OpenFileDialog dlgImport = new OpenFileDialog();
//We show the dialog:
dlgImport.ShowDialog();
// We declare a variable to store the file path and name:
string fileName = dlgImport.FileName;
try {
    // We invoke our method, wich is created in the following section, and pass it two parameters
    // The file name and .... a DataGridView name that we put is the Form, so we can also see what
    // We imported. Cool, isn't it?
    importExcel(fileName, gridMain);
}
// It is best to always try to handle errors, you will se later why it is OleDbException and not
catch (OleDbException ex) {
    MessageBox.Show("Error ocurred: " + ex.Message);
} 
```

}

# php - 致命错误：在 xampp 中使用 pear 找不到类

> ID：12989183
> 
> 赞同：0
> 
> 时间：2012-10-20T14:04:54.163
> 
> 标签：php, xampp, pear

我正在尝试使用表单数据发送电子邮件。我正在调整使用 PEAR 库的[http://www.html-form-guide.com/email-form/php-email-form-attachment.html中描述的方法。](http://www.html-form-guide.com/email-form/php-email-form-attachment.html)我正在通过 XAMPP 在本地测试我的网站。

这是我页面顶部的代码：

```
<?php 
// Pear library includes
include_once('Mail/mail.php');
include_once('Mail/mime.php'); 
```

测试页面会产生以下结果：

致命错误：第 51 行的 C:\xampp\php\PEAR\Mail\mail.php 中找不到类“邮件”

这是 mail.php 的第 51 行（我没有更改默认 XAMPP 安装中的文件）：

```
class Mail_mail extends Mail { 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:37:41.760

尝试改变

```
include_once('Mail/mail.php'); 
```

到

```
include_once('Mail.php'); 
```

# android - 从 Receiver 调用时服务未处理 Intent

> ID：12989188
> 
> 赞同：1
> 
> 时间：2012-10-20T14:05:13.570
> 
> 标签：android, service, broadcastreceiver, intentservice

很少有手机会进入我的 Intent 服务无法从广播接收器获得 startService 命令的状态（称为“有趣状态”）的问题。（是的，清单定义了接收器和服务）。

在此示例中，我正在侦听推送通知，然后调用 CheckinService。接收者：

```
public class PushReceiver extends BroadcastReceiver {

private static final String LOG_TAG = "push_receiver";

@Override
public void onReceive(Context context, Intent intent) {
    logger.putExtra("debug", "Received Push");

    Intent serviceIntent = new Intent(context, CheckinService.class);
    context.startService(serviceIntent);

    logger.putExtra("debug", "Sent to Service");
} 
```

服务：

```
public class CheckinService extends IntentService {
    private static final String LOG_TAG = "checkin_service";
    public static final int SERVICE_ID = 3;

    public CheckinService() {
        super(LOG_TAG);
        Log.i(LOG_TAG, "Service says: Checkin service started no constructor");
    }

    public CheckinService(String name) {
            super(LOG_TAG);
        Log.i(LOG_TAG, "Service says: Checkin service started with constructor");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
         Log.i(LOG_TAG, "Auto Checkin started");
         .....tons of genius logic.....
        }
} 
```

因此，当手机进入有趣状态时，“收到推送”会被记录，“发送到服务”会被记录，但服务的构造函数和 onHandleIntent 方法永远不会被调用。
我不仅在推送上发生这种情况，而且在 inexactRepeatingAlarm 和其他可能的接收器上也发生了这种情况，但这两个已经得到确认。

同样，这种情况非常非常罕见，并且似乎在手机闲置一段时间后发生；并且可能进入省电模式。

此外，终止应用程序的进程可以清除这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:34:50.783

我意识到这里发生了什么。

IntentService 是单线程的。因此，如果我的“......大量天才逻辑......”中的某些内容被阻塞（如没有超时的 http 请求），则不会处理进入服务的下一个意图。

美好而谦卑。

# osgi - 如何在 Geronimo3 中跟踪 osgi 包失败信息

> ID：12989189
> 
> 赞同：2
> 
> 时间：2012-10-20T14:05:14.440
> 
> 标签：osgi, geronimo

我的团队正在使用 Geronimo 3 和 osgi 来开发应用程序。当我们自己的 osgi bundle 或 eba 在 Geronimo 中失败时，我需要跟踪详细的失败信息。我可以使用任何 API 来执行此操作吗？目前我只能通过检查 geronimo 日志中的错误堆栈跟踪来做到这一点，这非常不精确。

谢谢，钱德勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:58:11.687

我在 Karaf 3 中添加了这样一个命令。它称为 bundle:diag 并显示所有捆绑包的故障信息，包括蓝图和 spring dm 故障。一旦 Karaf 3 发布并且 geronimo 切换到它，您就可以使用它。您已经可以尝试 karaf 3 snapshhot 来查看它是如何工作的。

# c# - C# 模型的自定义设置器

> ID：12989192
> 
> 赞同：22
> 
> 时间：2012-10-20T14:05:36.490
> 
> 标签：c#, .net, entity-framework, poco

我不知道如何为 C# 数据模型制作自定义设置器。场景很简单，我希望我的密码使用 SHA256 函数自动加密。SHA256 功能非常好用（我以前在无数项目中使用过）。

我已经尝试了几件事，但是当我运行`update-database`它时，它似乎在递归地做某事并且我的 Visual Studio 挂起（不要发送错误）。请帮助我了解如何在模型中默认加密密码。

## 用我已经尝试过的代码

```
public class Administrator
{
    public int ID { get; set; }
    [Required]
    public string Username { get; set; }
    [Required]
    public string Password
    {
        get
        {
            return this.Password;
        }

        set
        {
            // All this code is crashing Visual Studio

            // value = Infrastructure.Encryption.SHA256(value);
            // Password = Infrastructure.Encryption.SHA256(value);
            // this.Password = Infrastructure.Encryption.SHA256(value);
        }
    }
} 
```

种子

```
context.Administrators.AddOrUpdate(x => x.Username, new Administrator { Username = "admin", Password = "123" }); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-20T14:10:04.723

您需要使用私有成员变量作为支持字段。这允许您单独存储值并在设置器中对其进行操作。

好资料[在这里](http://msdn.microsoft.com/en-us/library/ms173118.aspx)

```
public class Administrator
{
    public int ID { get; set; }

    [Required]
    public string Username { get; set; }

    private string _password;

    [Required]
    public string Password
    {
        get
        {
            return this._password;
        }

        set
        {  
             _password = Infrastructure.Encryption.SHA256(value);                
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:10:36.160

您使用的 get 和 set 实际上创建了名为`get_Password()`and的方法`set_Password(password)`。

您希望将实际密码存储在私有变量中。因此，只需拥有一个由这些“方法”返回和更新的私有变量就是要走的路。

```
public class Administrator
{
public int ID { get; set; }
[Required]
public string Username { get; set; }
[Required]
private string password;
public string Password
{
    get
    {
        return this.password;
    }

    set
    {
        this.password = Infrastructure.Encryption.SHA256(value);
    }
}
} 
```

# gps - GPS坐标转换

> ID：12989197
> 
> 赞同：2
> 
> 时间：2012-10-20T14:06:14.867
> 
> 标签：gps

我正在尝试找出将以下 GPS 位置格式转换为谷歌地图使用的十进制度格式的公式。我已经四处寻找，但我无法弄清楚。

我当前的格式是 ddmm.mmmm，我的值是 2603.3299 S, 02758.0530 E。

1.) 我当前的 GPS 位置是十进制度数？2.) 将其转换为十进制度的公式是什么？

万分感谢！我在网上看到的公式让我在埃及的某个地方，但我实际上在南非。显然出了点问题:(

另外，请不要在这个地址暗杀我。我的生活还有很多事情要做:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T14:18:58.207

您可以将小数点移动两位并将分钟转换为十进制度：

```
2603.3299 -> 26 + (3.3299 / 60) = 26.0554983 
```

和

```
2758.0530 -> 27 + (58.0530 / 60) = 27.96755 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:24:05.080

问题在于您的数据。

```
2603.3299 S, 02758.0530 E 
```

缺少分隔符，实际上意味着

```
26 degrees 03.3299 minutes S, 027 degrees 58.0530 minutes E 
```

假设你住在城市的砖房里，而不是在田野中间。在这种情况下，这意味着

```
26.033299 S, 027.580530 E 
```

请注意，这`2603.3299 S, 02758.0530 E`似乎不是标准符号。

将小数点前的最后两位数字拆分为分钟数并除以 60。在 javascript 中：

```
var split/(^\d+)(\d\d\.\d+$)/.match(x);
return split[1]+split[2]/60; 
```

# javascript - 通过 ID 数组从 mongodb 中检索记录

> ID：12989199
> 
> 赞同：1
> 
> 时间：2012-10-20T14:06:15.580
> 
> 标签：javascript, node.js, mongodb, mongoose

使用 node/mongodb/mongoose，我如何通过其 ID 的数组列表检索一组记录。

没有运气：

```
var ids = ['50829a8f558866ad21000921',
    '50829a8f558866ad21000920',
    '50829a8f558866ad2100091d',
    '50829a8f558866ad21000915',
    '50829a8f558866ad2100090b',
    '50829a8f558866ad21000906'];

Schema
    .find()
    .in("_id", ids)
    .run(callback); 
```

猜测 Query.in() 不是要走的路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:13:44.340

知道了...

```
Schema
    .find({"_id": {$in: ids}})
    .run(callback); 
```

# windows-8 - Windows 应用商店应用中的 MediaElement

> ID：12989201
> 
> 赞同：1
> 
> 时间：2012-10-20T14:06:46.710
> 
> 标签：windows-8, winrt-xaml

我正在为广播电台创建应用程序，并且正在使用 MediaElement 和 MediaControls。但是当我尝试停止或暂停播放时它不起作用。在 MSDN 中搜索后，我发现 Start、Stop 和 Pause 在这种情况下不起作用“在计时引擎驱动媒体播放时无法调用停止”。

我设法通过将 null 分配给 mediaelement.Source 来停止播放，但同样的问题出现在 Start() 中。谁能解释这里发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:14:07.377

最后我让它在没有暂停停止和启动的情况下工作。我刚刚将 mediaelement.PlaybackRate 从 0 更改为 1，这似乎工作得很好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T20:46:09.130

您使用的是 Windows 应用商店 JavaScript 还是 C# 语言？

如果您制作一个 Javascript Windows Store 应用程序，您可以只使用 html 播放器。这得到了播放、静音和播放状态。

```
<audio controls="controls">
  <source src="horse.ogg" type="audio/ogg">
  <source src="horse.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
```

# jquery - jquery推文未加载

> ID：12989209
> 
> 赞同：0
> 
> 时间：2012-10-20T14:08:02.587
> 
> 标签：jquery, twitter

我以前遇到过这个[jsfiddle](http://jsfiddle.net/mdtareque/YJfGp/)，它用于使用 jquery 将推文加载到 html 页面中。我正在使用完全相同的代码。

参考代码：

```
 $('#tweets').tweets({
           tweets:4,
           username: "twitter-username-here"
  });​ 
```

小提琴工作得很好。但是当我试图将它集成到我的网站时，我看不到任何推文正在加载，也看不到任何 js 错误。

Jquery 文件加载正常，其他功能正常，只是推文没有加载。

### 编辑

我使用文本编辑器将上述代码复制粘贴到文件中，当我在 vim 中打开文件时，其中有一个垃圾字符“<200b>”。我猜，它来自从 jsFiddle 复制粘贴代码。所以，现在我收到以下错误，在浏览器控制台中可见

```
Uncaught TypeError: Object #<Object> has no method 'tweets' 
```

告诉我，如何解决这个问题？

对此有任何想法吗？这里有什么问题？有没有人遇到过类似的情况？

# html - 表单元素以未设置的宽度中断

> ID：12989213
> 
> 赞同：1
> 
> 时间：2012-10-20T14:08:26.843
> 
> 标签：html, forms, button

我在为表单设置样式时遇到了麻烦。我创建了一个站点标题，该标题有 3 个“按钮”，它们都使用一个通用类，以及它们自己的一个，以便指定每个按钮下拉容器的宽度。

在第三个中，有一个没有设置宽度值的下拉列表（也尝试使用宽度自动），我正在放置一个表单，现在它有两个问题：

1.  如果父元素没有设置宽度，则提交按钮将换行，据我所知（和目标），那么文本输入和提交按钮应保持在同一行。

2.  提交按钮在 Firefox 和 Safari （都在 MAC）中添加了不同的边距，为什么会这样，有没有办法统一所有浏览器的外观？

图片：[http ://test-ground.tk/ex/snap.png](http://test-ground.tk/ex/snap.png)

现场示例：[http ://test-ground.tk/ex/example.html](http://test-ground.tk/ex/example.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:57:40.293

在包含您的搜索文本和按钮的表单上添加这些样式（最好在一个类中）：

```
white-space:nowrap;
font-size:0px; 
```

将`white-space:nowrap`INPUT 保持在一行并`font-size:0px`去掉空格字符（通过将它们的大小设置为 0）。

您在 FF 和 Safari 中看到的“边距”实际上是一个空格字符……浏览器往往对如何以及何时呈现空白有不同的想法。

# javascript - 生成删除确认框

> ID：12989214
> 
> 赞同：0
> 
> 时间：2012-10-20T14:08:31.633
> 
> 标签：javascript, jquery, html, django

在我的应用程序中，结果显示为表格格式。

我的部分代码是，

```
{% for device in devices %}
  <tr>
    <td>{{ device.operator}}</td>
    <td>{{ device.state }}</td>
    <td>{{ device.tstampgps }}</td>
    <td><button id='rec_delete'>Delete</button></td>

  </tr>
{% endfor %} 
```

即使我们按下删除按钮，我也需要从数据库中删除特定记录。在此之前，我想为此提示一个确认框。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:36:00.013

由于我不了解 Django，因此这不包括删除部分，我假设您将对其进行 AJAXify（执行异步请求以删除）。我还在此处将`$devices`and`$deletes`变量分别显示为局部变量，或多或少，这样您就可以看到如何存储引用然后从这些引用中工作（我认为这比一遍又一遍地重新选择更好）。

还要注意使用：

```
jQuery(document).ready(function r($){ 
```

我`jQuery()`在全局范围内使用，在更大的应用程序中，您应该始终这样做，以免与可能使用的其他库/框架发生冲突`$()`。这也是一种最佳实践，您可以`$()`在该匿名函数（闭包）中使用。最好习惯这种方式，IMO。

```
<table>
    <thead>
        <tr>
            <th>Operator</th>
            <th>State</th>
            <th>T-Stamp GPS</th>
            <th>&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        <tr class="device">
            <td>Verizon</td>
            <td>OK</td>
            <td>033830928</td>
            <td>
                <button type="button" id="d001" class="delete">Delete</button>
            </td>
        </tr>
        ...
    </tbody>
</table> 
```

**笔记**

我做了一个微小但重要的更改，参考`$self`，因为 AJAX 将在超出范围`success`后运行处理程序：`this`

```
jQuery(document).ready(function r($){
    var $devices = $('tr.device'),
        $deletes = $devices.find('button.delete');

    $deletes.click(function d(){
        var $self = $(this).parents('tr.device'),
            del = confirm('Delete device?');

        if (del) {
            // Do $.ajax() request, maybe using the 
            // clicked button's ID. Or you could put
            // the row to delete ID on the TR element.
            // And then on success of the AJAX, run:
            $self.fadeOut(500, function f(){
                $self.remove();
            });
        }
    });
});​ 
```

[http://jsfiddle.net/wMqr8/2](http://jsfiddle.net/wMqr8/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:47:27.947

将可以与 DB 关联到按钮的唯一记录标识符添加。确认后，您使用 AJAX 将此标识符发送到服务器，并且服务器代码会删除数据库。还要在重复元素上将 ID 更改为类，因为 ID 必须是唯一的

HTML

```
<tr>
    <td>{{ device.operator}}</td>
    <td>{{ device.state }}</td>
    <td>{{ device.tstampgps }}</td>
    <td><button class='rec_delete'  data-record_id="{{ device.DB_ID }}">Delete</button></td>

  </tr> 
```

JS

```
$('button.rec_delete').click(function(){
     /* data() method reads the html5 data attribute from html */
     var record_id=$(this).data('record_id');

     if( confirm( 'Are you sure') ){
        $.post( 'serverPage.php', { id: record_id}, function(){
            /* code to run on ajax success*/
          $(this).closest('tr').remove();
        })
    }
}) 
```

`id`服务器将像使用任何其他表单元素名称一样接收 post 键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:11:33.140

您可以在 JavaScript 中添加点击事件，如果用户选择“确定”按钮，您可以向视图发送请求以删除记录或其他任何内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T14:22:47.140

试试这个：

```
<button id='rec_delete' onclick="return confirm('Are you sure?')">Delete</button> 
```

# javascript - javascript删除克隆节点父表

> ID：12989215
> 
> 赞同：0
> 
> 时间：2012-10-20T14:08:43.163
> 
> 标签：javascript, clonenode

我试图在 JavaScript 中删除克隆节点的父节点，因为当我恢复保存的表时，它会在原始表下方创建同一个表的副本。所以我需要删除原始表并只显示子表。

```
function Save(){
var table = document.getElementById("sudoku");
clone = table.cloneNode(true);  
}
//Create Restore Function
function Restore(){
document.getElementById("sudoku").parentNode.appendChild(clone);
table.parentNode.removeChild("table");
} 
```

我也尝试过我在另一个线程上找到的这种方法，但是当我尝试使用它时，它会停止我的其余 javascript 工作

```
document.getElementById("sudoku").parentNode.removeChild(document.getElementById‌​("sudoku")); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:12:47.593

```
function Restore(){
    var table = document.getElementById("sudoku"),
        parent = table.parentNode;
    parent.removeChild(table);
    parent.appendChild(clone);
} 
```

请注意，侦听器可能位于已删除的表上，因此您可能必须重新附加它们。

# c# - 无法将模型类型......转换为 ServiceStack.Text.JsonObject

> ID：12989216
> 
> 赞同：0
> 
> 时间：2012-10-20T14:08:50.463
> 
> 标签：c#, .net, json, xamarin.ios, servicestack

我正在使用 ServiceStack.Text 在 Monotouch 上解析[WorldWeatherOnline 的 Marine Api](http://www.worldweatheronline.com/premium-weather.aspx?menu=marine) 。

这是错误“无法隐式转换类型`DiveConditions.Model.Weather' to`ServiceStack.Text.JsonObject'”

这是违规的方法

```
JsonObject result = JsonObject.Parse(content).ConvertTo(x=> new Weather{

                        WeatherData = x.Object("weather").ConvertTo(w=> new WeatherData{

                            RequestDate = DateTime.Parse(x.Get("date")),
                            MinTempCentigrade = Convert.ToInt32(x.Get("mintempC")),
                            MaxTempCentigrade = Convert.ToInt32(x.Get("maxtempC")),
                            HourlyWeather = x.ArrayObjects("hourly").ConvertAll(h => new HourlyWeather{

                                CloudCover = Convert.ToInt32(h.Get("cloudcover")),
                                Humidity = Convert.ToInt32(h.Get ("humidity")),
                                Precipitation = Convert.ToDouble(h.Get ("precipitation")),
                                Pressure = Convert.ToInt32(h.Get ("pressure")),
                                SigWaveHeight = Convert.ToDouble(h.Get("sigHeight_m")),
                                SwellHeight = Convert.ToDouble(h.Get ("swellHeight_m")),
                                SwellDirection = Convert.ToInt32(h.Get("swellDir")),
                                SwellPeriod = Convert.ToDouble(h.Get ("swellPeriod_secs")),
                                TempCentigrade = Convert.ToInt32(h.Get("tempC")),
                                TempFahrenheit = Convert.ToInt32(h.Get("tempF")),
                                Time = Convert.ToInt32(h.Get("time")),
                                Visibility = Convert.ToInt32(h.Get("visibility")),
                                WaterTempCentigrade = Convert.ToInt32(h.Get("waterTemp_C")),
                                WaterTempFahrenheit = Convert.ToInt32(h.Get("waterTemp_F")),
                                WeatherCode = Convert.ToInt32(h.Get("weatherCode")),
                                WeatherIconUrl = h.Get("weatherIconUrl"),
                                WindDirection = h.Get("winddir16Point"),
                                WindDirectionDegrees = Convert.ToInt32(h.Get("winddirDegree")),
                                WindSpeedKmph = Convert.ToInt32(h.Get("windspeedKmph")),
                                WindSpeedMph = Convert.ToInt32(h.Get("windspeedMiles"))
                            })
                        }),

                        NearestArea = x.Object("nearest_area").ConvertTo(n => new NearestArea{

                            MilesFromReq = Convert.ToDouble(n.Get("distance_miles")),
                            RetLatitude = Convert.ToDouble(n.Get ("latitude")),
                            RetLongitude = Convert.ToDouble(n.Get ("longitude"))

                        }),
                        WeatherRequest = x.Object("request").ConvertTo(r=> new WeatherRequest{

                            Query = r.Get("query"),
                            RequestType = r.Get("type")
                        })
                    }); 
```

这是模型

```
public class Weather{

    public WeatherData WeatherData { get; set; }
    public NearestArea NearestArea { get; set; }        
    public WeatherRequest WeatherRequest {get; set;}
}

public class WeatherData
{
    public DateTime RequestDate     { get; set; }       
    public int MinTempCentigrade    { get; set; }
    public int MaxTempCentigrade    { get; set; }       
    public List<HourlyWeather> HourlyWeather { get; set; }      
}

public class NearestArea
{
    public double RetLatitude       { get; set; }
    public double RetLongitude      { get; set; }
    public double MilesFromReq      { get; set; }
}

public class WeatherRequest
{
    public string Query     { get; set; }
    public string RequestType       { get; set; }
}

public class HourlyWeather
{
    public int CloudCover           { get; set; }
    public int Humidity             { get; set; }
    public double Precipitation     { get; set; }
    public int Pressure             { get; set; }
    public int SwellDirection       { get; set; }
    public double SigWaveHeight { get; set; }
    public double SwellHeight       { get; set; }
    public double SwellPeriod       { get; set; }
    public int TempCentigrade       { get; set; }
    public int TempFahrenheit       { get; set; }
    public int Time             { get; set; }
    public int Visibility           { get; set; }
    public int WaterTempCentigrade  { get; set; }
    public int WaterTempFahrenheit  { get; set; }
    public int WeatherCode          { get; set; }
    public string WeatherIconUrl    { get; set; }
    public string WindDirection { get; set; }
    public int WindDirectionDegrees{ get; set; }
    public int WindSpeedKmph        { get; set; }
    public int WindSpeedMph     { get; set; }
} 
```

谁能发现可能导致这种情况的原因？

提前致谢

# scala - Play/Scala 模板中的参数和视图命名冲突

> ID：12989217
> 
> 赞同：2
> 
> 时间：2012-10-20T14:08:54.287
> 
> 标签：scala, playframework, playframework-2.0

我是 Play Framework 的新手，并且仍在尝试使用新的 Scala 模板引擎来解决一些问题。

假设我有以下包结构：

```
app/
app/controllers/Items.scala
app/models/Item.scala
app/views/layouts/page.scala.html
app/views/item/show.scala.html
app/views/item/details.scala.html  //partial 
```

这是我的项目/展示模板：

```
 @(item: Item, form: Form[Item])(implicit flash: Flash)
    @layout.page() {
        @*want to include details partial, wont work due to item param*@
        @item.details(item)
    } 
```

由于包含另一个模板（例如，包括上面的项目/详细信息）与访问模板参数（例如上面的项目）的语法完全相同，显然这种现有的命名约定在不进行更改的情况下将无法正常工作。

我知道我可以将我的“app.views.item”包重命名为“app.views.items”，并依靠单数/复数形式来区分视图和参数名称，但这似乎不是一个非常简单的解决方案。另外，如果我真的希望参数名称与视图包相同怎么办？

我的一个想法是在我所有的观点之前加上一个额外的顶级包：

```
 app/views/views/item/details.scala.html 
```

所以包含语法是@views.item.details()，但这显然是一个hack。

避免这个问题的好方法是什么？如何更好地组织代码以避免此类命名冲突？

大多数其他模板引擎使用诸如“包含”或“渲染”之类的操作来指定部分包含。我不想在这里冒犯任何人，但 Play Scala 模板引擎语法是否如此简洁以至于它实际上决定了代码的组织？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:18:37.463

3个解决方案：

### 第一的

通常，您应该按照文档中的说明使用部分模板`tags`，[其中](http://www.playframework.org/documentation/2.0.4/JavaTemplateUseCases)文件`app/views/tags`夹是基础：

文件：`app/views/tags/product.scala.html`

在模板中（父视图完整语法中不需要初始导入将允许您避免名称冲突：）`@tags.packageName.tagName()`：

```
<div id="container">
    @tags.product(item)
</div> 
```

当然，在您的情况下，您也可以使用基本文件夹中的包

文件：`app/views/tags/item/product.scala.html`

```
<div id="container">
    @tags.item.product(item)
</div> 
```

我很确定这会解决你的问题。

### 第二

为了避免在不更改包名称的情况下发生冲突，您可以`item`在视图中重命名，另外我建议不要`form`为 Form[T] 使用名称，因为它可能与助手冲突：

```
@(existingItem: Item, existingItemForm: Form[Item])(implicit flash: Flash)
@layout.page() {
    @item.details(existingItem)
} 
```

### 第三

如果您`Form[Item]`在传递给给定`Item`对象的视图之前填充您的内容，则不需要同时传递两者，因为您很可能可以从表单中获取数据：

```
@(itemForm: Form[Item])(implicit flash: Flash)
@layout.page() {
    <div>Name of item is: @itemForm("name").value (this is a replacemnet for @@existingItem.name </div>
    @item.details(itemForm)
} 
```

当然，在您的 product.scala.html 中，您需要将`@(item: Item)`参数更改为`@(itemForm: Form[Item])`

# android - Android - 一侧边框 ImageButton

> ID：12989220
> 
> 赞同：2
> 
> 时间：2012-10-20T14:09:08.050
> 
> 标签：android, border, imagebutton

我试图在一侧绘制边框仅作为`ImageButton`对象，
例如在 CSS:`border-left: 2px solid black;`中。

有没有办法只用样式来做到这一点？（没有在它们之间插入空白视图）

谢谢！

**编辑：**
我将`<selector>`标签与`ImageButton`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:22:42.600

经过大量搜索，我找到了这样做的方法。

创建包含边框样式的 xml 文件 (border_style.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android"android:shape="rectangle">
            <!-- The border color -->
            <solid android:color="#000" />
        </shape>
    </item>

    <item android:left="1dp">
        <shape xmlns:android="http://schemas.android.com/apk/res/android"android:shape="rectangle">
            <!-- The fill color-->
        </shape>
    </item>
</layer-list> 
```

然后在选择器中，你这样写：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:state_pressed="true"> 
         <!-- Press Event -->
    </item> 

    <item android:state_focused="true"> 
              <!-- Focuse Event -->
    </item> 

    <item android:drawable="@drawable/border_style.xml" />         
</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:18:00.050

你不能像css那样做。您需要创建一个 xml 并将 xml 放在 android drable 文件夹中并发送图像按钮背景

```
And rectangle drawable back.xml (put into res/drawable folder):

<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#ffffff" />
   <stroke android:width="1dip" android:color="#4fa5d5"/>
</shape> 
```

# python - 如何从python中的命令行接收正则表达式

> ID：12989224
> 
> 赞同：5
> 
> 时间：2012-10-20T14:09:51.697
> 
> 标签：python, regex, command-line-arguments

我想从命令行接收像 '\t' (tab) 这样的分隔符，并用它来解析文本文件。

如果我把

```
delimiter = sys.argv[1] 
```

在代码中，然后从命令行键入

```
$ python mycode.py "\t" 
```

delimiter 是`'\\t'`ie，python 会按原样保留输入字符串。

我想将其转换为 '\t' 以便我可以使用，例如，

```
'a\tb\tc'.split(delimiter) 
```

得到`['a','b','c']`.

我尝试将 '\' 转换为 '\'，但失败了。

是否有内置的 python 函数可以从命令行处理正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:18:19.497

在 Python 2 中，您可以使用`str.decode('string_escape')`：

```
>>> '\\t'.decode('string_escape')
'\t' 
```

在 Python 3 中，您必须先将字符串编码为字节，然后使用`unicode_escape`：

```
>>> '\\t'.encode().decode('unicode_escape')
'\t' 
```

两种解决方案都接受任何转义序列并正确解码它们，因此您甚至可以使用一些花哨的 unicode 东西：

```
>>> '\\t\\n\\u2665'.encode().decode('unicode_escape')
'\t\n♥' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:13:33.863

您正在寻找的不是真正的正则表达式，而是转义序列。

只要您完全意识到可怕的安全后果，您*就可以*使用，或者滚动您自己的基于字符串替换/正则表达式的转义序列 unescaper。`eval`

（谁知道，也许`arg = arg.replace("\\t", "\t")`对你来说已经足够了？）

作为一种解决方法，你可以做

```
$ python mycode.py `echo -ne '\t'` 
```

(ab) 使用 Unix echo 命令为您执行转义。

# wordpress - mysql 1046 错误

> ID：12989225
> 
> 赞同：2
> 
> 时间：2012-10-20T14:09:53.553
> 
> 标签：wordpress, import, phpmyadmin, mysql-error-1046

我已经开始了一个新的 Wordpress 站点，并尝试从大约 3 年前的站点导入数据库。每当我单击导入，选择文件并将其设置好时，我都会收到此错误：

错误

```
SQL query: 

--
-- Table structure for table `wp_commentmeta`
--
DROP TABLE IF EXISTS `wp_commentmeta` ;

MySQL said:  
 #1046 - No database selected 
```

我尝试了一些修复，例如将不使用自动中断设置为关闭、取消勾选允许中断、设置兼容模式和更改字符集，但似乎没有任何效果。大约一年前，我确实将此文件导入了另一个 Wordpress 博客，所以我知道它当时有效，但现在拒绝了。

这是 phpmyadmin 版本：

```
Server: 109.68.38.30 via TCP/IP
Server version: 5.1.52
Protocol version: 10
User: DM_7850_dbadmin@webserver1.wwwconfig.net
 MySQL charset:  UTF-8 Unicode (utf8) 
```

我希望有人能在这里提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:14:19.730

尝试以下查询以选择数据库，然后检查

```
USE database_name; 
```

# c - 在 Ubuntu 目录中列出文件

> ID：12989228
> 
> 赞同：0
> 
> 时间：2012-10-20T14:10:18.307
> 
> 标签：c, linux, ubuntu, dir, readdir

我正在尝试列出当前目录的父目录中的文件，但是当我尝试从终端执行该程序时，出现分段错误。我做错了什么？这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>

int main(int argc, char *argv[])
{
   struct dirent *dirpent;
   DIR *dirp;

   if(argc!=2)
   {
       printf("Cant continue with the program\n");
       return 0;
   }

   dirp= opendir(argv[1]);

   if(dirp)
   {
       while(dirpent=readdir(dirp) !=NULL)
           printf("%s\n",dirpent->d_name);

       closedir(dirp);
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:15:31.047

```
dirpent=readdir(dirp) !=NULL 
```

应该

```
(dirpent = readdir(dirp)) != NULL 
```

您当前的表达式被解析为`dirpent = (readdir(dirp) != NULL)`，它将设置`dirpent`为 0 或 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:16:44.003

如果你缩进你的程序，`indent rd.c`然后编译你的程序，`gcc -Wall -g rd.c -o rd`你会得到

```
 rd.c: In function 'main':
 rd.c:21:22: warning: assignment makes pointer from integer without a cast [enabled by default]
 rd.c:21:7: warning: suggest parentheses around assignment used as truth value [-Wparentheses] 
```

所以你忘记了括号，你`while`应该是

```
 while((dirpent=readdir(dirp)) !=NULL) 
```

请在提问之前编译带有所有警告的程序（并改进它直到它们都消失）。使用`gdb`调试器（及其`bt`命令）找出程序崩溃的原因`SIGSEGV`。

不要忘记仔细阅读[readdir(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/readdir.3.html)手册页和[Advanced Linux Programming](http://advancedlinuxprogramming.com/) book 等文档。

# java - 如何使用 Sikuli(Java) 从屏幕上的特定位置获取值？

> ID：12989234
> 
> 赞同：3
> 
> 时间：2012-10-20T14:10:43.343
> 
> 标签：java, testing, automation, automated-tests, sikuli

我的场景：

尝试使用 Sikuli(Java) 自动化计算器。每次操作完成时，我都需要获取结果（以文本形式）。示例：1 * 2 = 2。需要从结果区域/区域中捕获“2”。有人可以帮我吗？

结果可能是动态的，因此在运行时读取它然后将其与输入值进行比较对我来说很重要。

谢谢你，迈克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T15:12:03.667

如果结果区域是文本字段，您可以单击它，将文本复制到剪贴板并从 Env.getClipboard() 中读取：

```
click("text_field.png")
type("a", KEY_CTRL)
type("c", KEY_CTRL)
print Env.getClipboard().strip() 
```

另一种方法是找到结果字段的左右边界，将鼠标光标从左边界拖动到右侧，通过 ctrl+c 复制文本并使用 Env.getClipboard() 获取。

希望有帮助。

# mysql - Mysql值低于设置

> ID：12989242
> 
> 赞同：0
> 
> 时间：2012-10-20T14:11:58.590
> 
> 标签：mysql

我正在尝试为列设置一个新值，但每次尝试时该值都较低。为什么？

```
UPDATE table SET active = 0 
```

该字段为空

```
UPDATE table SET active = 1 
```

将值设置为 0

```
UPDATE table SET active = 2 
```

值为 1

结构：`active enum('0', '1', '2') utf8_unicode_ci No 0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:13:33.227

尝试用单引号括起来，

```
UPDATE table SET active = '2' 
```

查询

```
UPDATE table SET active = 2 
```

结果`1`，因为`index value of 2`是**1**。

```
VALUE   INDEX
0        1
1        2
2        3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:16:03.510

我建议使用 smallint 而不是枚举数据类型。目前您的枚举是字符串而不是 int，因此您必须添加 ''

# php - PHP：在 preg_replace 中调用函数

> ID：12989243
> 
> 赞同：0
> 
> 时间：2012-10-20T14:12:01.673
> 
> 标签：php, function, preg-replace

以下代码负责 dle 脚本中的 bbcode 标签。“\1”是我想用函数调用的链接，但我得到的是纯文本

```
 $txt = preg_replace( "#<!--dle_video_begin:(.+?)-->(.+?)<!--dle_video_end-->#is", '[video=\\1]', $txt ); 
```

我的功能

```
function videoD ($str) {
        if (strpos($str,'http://') !== false) {
                $vid = uppod_encode($str);
                echo (uppod_encode($str));

        } else {
                $vid = uppod_decode($str);
                echo (uppod_encode($vid));
        }
} 
```

我试过的：

```
$txt = preg_replace( "#<!--dle_video_begin:(.+?)-->(.+?)<!--dle_video_end-->#is", '[video=videoD(\\1)]', $txt );

$txt = preg_replace( "#<!--dle_video_begin:(.+?)-->(.+?)<!--dle_video_end-->#is", '[video=videoD(1)]', $txt );

$txt = preg_replace( "#<!--dle_video_begin:(.+?)-->(.+?)<!--dle_video_end-->#is", '[video=\\videoD(1)]', $txt ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:18:23.937

```
$txt = preg_replace_callback('#<!--dle_video_begin:(.+?)-->(.+?)<!--dle_video_end-->#is', function($matches){
    return "[video=videoD({$matches[1]})]";
}, $txt); 
```

# android - Android Gridview 动画在最终项目中不起作用

> ID：12989245
> 
> 赞同：0
> 
> 时间：2012-10-20T14:12:22.167
> 
> 标签：android, animation, gridview

我有一个 GridView，其中 12 个元素排列在 3x4 网格中。每个元素都是一个名为 grid_item.xml 的布局，在其下方包含一个 ImageView 和一个 TextView。最初，ImageView 是图块的图像。当您单击/触摸任何 GridView 元素时，动画将应用于 ImageView 以将其缩小并显示下方的 TextView。

除了 GridView 中的最后一个（右下）元素之外，这一切都很好。当我单击它（在 Android 模拟器中，尚未在设备上测试）时，会调用单击事件（称为 grid_click），但不会调用“onAnimationStart”侦听器（当我单击任何其他 GridView 元素时*会调用它）。*

换句话说，当我单击右下角的 GridView 元素时，没有动画，我在 Logcat 中看到了这一点：

TEST 开始动画

但是，如果我单击任何其他元素，动画效果很好，并且在 Logcat 中我看到：

TEST 开始动画

测试动画开始

Logcat 不输出任何其他内容来指示问题。如果有人可以提供帮助，我将不胜感激，因为我花了几天时间试图解决这个问题。我的代码如下：

```
private void init_gridview()
{
        setContentView(R.layout.game);
        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setNumColumns(3);
        gridview.setColumnWidth(32);
        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
            {
                grid_click(position,v);
            }
        });
}

public class ImageAdapter extends BaseAdapter 
{
        private Context mContext;

        public ImageAdapter(Context c) 
        {
            mContext = c;
        }

        public int getCount() 
        {
            return(3*4);
        }

        public Object getItem(int position) 
        {
            return null;
        }

        public long getItemId(int position) 
        {
            return 0;
        }

        // inflate grid_item.xml and return a View combining textview and imageview
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            View MyView = convertView;

            if (convertView == null) 
            {  
                LayoutInflater li = getLayoutInflater();
                MyView = li.inflate(R.layout.grid_item, null);
            }
            else
            {
                MyView=convertView;
            }

            TextView tv = (TextView)MyView.findViewById(R.id.grid_item_text);
            tv.setText("something");

            ImageView iv = (ImageView)MyView.findViewById(R.id.grid_item_image);
            iv.setScaleType(ImageView.ScaleType.CENTER_CROP);
            iv.setPadding(0,0,0,0);
            iv.setImageResource(R.drawable.tile);

            MyView.setLayoutParams(new GridView.LayoutParams(32,32));
            return(MyView); 
    }
}

private void grid_click(int position, View v)
{
    View clicked_view=v;

    Animation scale_down = AnimationUtils.loadAnimation(this, R.anim.scale_down);

    scale_down.setAnimationListener(new AnimationListener() 
    {
        public void onAnimationStart(Animation animation) 
        {
            Log.i("TEST","onAnimationStart");
        }

        public void onAnimationEnd(Animation animation)
        {
        }

        public void onAnimationRepeat(Animation animation) {}
    });

    Log.i("TEST","start animation");
    ImageView iv2 = (ImageView)clicked_view.findViewById(R.id.grid_item_image);
    iv2.startAnimation(scale_down);
} 
```

这是 scale_down.xml 动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<scale android:pivotX="50%" android:pivotY="50%" android:fromXScale="1" android:fromYScale="1" android:toXScale="0" android:toYScale="0" android:duration="250" />
<rotate android:fromDegrees="0" android:toDegrees="180" android:pivotX="50%" android:pivotY="50%" android:duration="250" />
</set> 
```

这是 GridView 中每个项目的布局，称为 grid_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/grid_item_image"
        android:src="@drawable/tile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />

   <TextView
    android:id="@+id/grid_item_text"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:textStyle="bold"  
    android:textSize="17sp"  
    android:shadowColor="#555555"
    android:shadowDx="1.0"
    android:shadowDy="1.0"
    android:shadowRadius="1.5"
    />   
</FrameLayout> 
```

最后是包含 GridView 的主布局，称为 game.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Layout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical"
    android:gravity="center"
    android:background="@android:color/white">

    <GridView 
            android:id="@+id/gridview"
            android:background="@android:color/white"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:columnWidth="106dp"
            android:numColumns="auto_fit"
            android:verticalSpacing="0dp"
            android:horizontalSpacing="0dp"
            android:stretchMode="none"
            android:gravity="center"
            android:listSelector="@android:color/transparent"
        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:10:50.470

在gridview中改变

```
 android:layout_height="wrap_content" 
```

至

```
 android:layout_height="fill_parent" 
```

切勿使用 wrap_content 作为 gridview 的布局高度。

# vb.net - VB2010：将数据网格导出到 Excel 仅检索一行

> ID：12989251
> 
> 赞同：2
> 
> 时间：2012-10-20T14:12:57.720
> 
> 标签：vb.net

我只想先提一下，我非常感谢所有提供知识帮助他人学习的人......

我已经能够拼凑将我的 Datgrid 导出到 Excel 文件的代码并且工作正常，除了我只得到数据网格的第一行。由于数据网格可能包含一条或数百条记录，因此我需要将所有行导出到 Excel。

这是我能够放在一起的内容（再次，它工作正常，文件与列标题一起保存，但只从我的数据网格写入第一行数据）：

```
'Export to Excel
    Dim ExApp1 As Excel.Application
    Dim ExWkbk1 As Excel.Workbook
    Dim ExWksht1 As Excel.Worksheet
    Dim MisValue As Object = System.Reflection.Missing.Value
    Dim i As Integer
    Dim j As Integer

    ExApp1 = New Excel.Application
    ExWkbk1 = ExApp1.Workbooks.Add(MisValue)
    ExWksht1 = ExWkbk1.Sheets("sheet1")

    For i = 0 To dg7.RowCount - 2
        For j = 0 To dg7.ColumnCount - 1
            ExWksht1.Cells(i + 2, j + 1) = dg7(j, i).Value.ToString()
            For k As Integer = 1 To dg7.Columns.Count
                ExWksht1.Cells(1, k) = dg7.Columns(k - 1).HeaderText
                ExWksht1.Cells(i + 2, j + 1) = dg7(j, i).Value.ToString()
            Next
        Next
    Next

    ExWksht1.SaveAs("C:\MyExcel.xlsx")
    ExWkbk1.Close()
    ExApp1.Quit()

    releaseObject(ExApp1)
    releaseObject(ExWkbk1)
    releaseObject(ExWksht1) 
```

再次感谢您帮助我学习

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:27:25.940

首先，在我看来，这是一个 DataGridView，而不是 DataGrid，因为据我所知，DataGrid 在 WinForms 或 Web.UI 中都没有“RowCount”或“ColumnCount”属性（我可能是错的）。
如果是这样，是否有特定的原因

> dg7.RowCount - 2

如果您尝试从中获取数据的对象确实是 DataGridView，那么我想这个任务是省略新的（空）行。如果您尝试以这种方式从 DataGridView 导出数据是正确的，则 DataGridViewRow 有一个属性可以用于此目的：

> 是新行

所以（虽然我最近没有在 VB.NET 中使用 Excel）你的周期可能是：

```
For i = 0 To dg7.ColumnCount - 1
    ExWksht1Cells(1 , i + 1) = dg7.Columns[i].HeaderText
Next

For i = 0 To dg7.RowCount - 1
    If Not dg7.Rows(i).IsNewRow Then
        For j = 0 To dg7.ColumnCount - 1
            ExWksht1.Cells(i+ 2, j + 1) = dg7(i, j).Value.ToString()
        Next
    End If
Next 
```

至于 excel 对象调用，我无法给出合理的评论，因为我没有过多地使用该对象。
让我知道这是否有用和/或正确。

# syntax-highlighting - 如何扩展 pygments.lexers.shell 的关键字列表

> ID：12989257
> 
> 赞同：3
> 
> 时间：2012-10-20T14:13:44.487
> 
> 标签：syntax-highlighting, markdown, jekyll, pygments, github-pages

我正在使用[Jekyll](https://github.com/mojombo/jekyll)和[Pygments](http://pygments.org)将[Markdown](http://daringfireball.net/projects/markdown/)转换为静态 html 页面。内容是为[GitHub 页面](http://pages.github.com/)准备的。为了显示代码示例（本示例中的 shell 命令），我将以下部分添加到文件中：

```
{% highlight sh %}
$ ls -1a
.
..
README
{% endhighlight %} 
```

该参数`sh`是指配置词法分析器的shell。您还可以选择其他词法分析器，例如`console`突出显示文本。

我注意到一些基本命令，例如`ls`shell 词法分析器没有突出显示。这也可以在[lexer 的源代码中](https://bitbucket.org/birkenfeld/pygments-main/src/f8f6f70f3ded/pygments/lexers/shell.py)看到。以下摘录显示了 shell 词法分析器的关键字定义（在 BashLexer 类中找到）。

```
...
'basic': [
    (r'\b(if|fi|else|while|do|done|for|then|return|function|case|'
     r'select|continue|until|esac|elif)\s*\b',
     Keyword),
    (r'\b(alias|bg|bind|break|builtin|caller|cd|command|compgen|'
     r'complete|declare|dirs|disown|echo|enable|eval|exec|exit|'
     r'export|false|fc|fg|getopts|hash|help|history|jobs|kill|let|'
     r'local|logout|popd|printf|pushd|pwd|read|readonly|set|shift|'
     r'shopt|source|suspend|test|time|times|trap|true|type|typeset|'
     r'ulimit|umask|unalias|unset|wait)\s*\b(?!\.)',
     Name.Builtin),
    (r'#.*\n', Comment),
    (r'\\[\w\W]', String.Escape),
    (r'(\b\w+)(\s*)(=)', bygroups(Name.Variable, Text, Operator)),
    (r'[\[\]{}()=]', Operator),
    (r'<<-?\s*(\'?)\\?(\w+)[\w\W]+?\2', String),
    (r'&&|\|\|', Operator),
],
... 
```

有没有办法扩展关键字列表，或者你能推荐另一个词法分析器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-05T10:23:16.540

您可以通过编写自己的词法分析器来添加新的关键字，通过子类化另一个词法分析器，将关键字添加到 Pygments 词法分析器。有关更多信息，请参阅[pygments 文档](http://pygments.org/docs/lexerdevelopment/)。我制作了一个子类化词法分析器，它向 C++ 词法分析器添加了几个关键字，可以在[这个 Github repo](https://github.com/FSund/pygments-custom-cpplexer)中看到。

我不确定如何添加除`EXTRA_KEYWORDS`.

# android - 查看在 Eclipse 中从何处调用活动

> ID：12989258
> 
> 赞同：0
> 
> 时间：2012-10-20T14:13:52.990
> 
> 标签：android

我有大量的活动，每个活动都调用其他一些活动，我对哪个活动正在调用另一个活动感到非常困惑。在 Eclipse 中显示调用层次结构并没有显示这个。有什么方法可以从调用当前活动的位置查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:18:18.547

您可以使用 ADB 检查当前 Activity Stack 的样子。

在 Linux 中，您可以使用：

`adb shell dumpsys activity | grep -i run`

这将为您提供当前正在运行的活动的格式良好的层次结构。

编辑：我保证你的路径中有亚行。如果没有，那么您必须指定 adb 的完整路径（位于 android sdk 文件夹中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:19:36.470

我不确定一种完全无需工作的方法，但你可以在你做`intent.putExtra("source", TAG)`的所有地方做`createActivity()`，然后`Log.d(TAG, "Intent started from: " + getIntent().getStringExtra("source", "unknown"))`在你所有的地方做`onCreate()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:56:35.730

或者，在 Windows 机器上：

```
C:\Program Files (x86)\Android\android-sdk\platform-tools\adb shell dumpsys activity | find /i "run" 
```

`adb.exe`如果需要，修改路径

# html - 防止在标题下浮动 UL 和 LI 元素

> ID：12989259
> 
> 赞同：5
> 
> 时间：2012-10-20T14:14:01.133
> 
> 标签：html, css, css-float

下面是标题内的菜单。ul 和 li 元素是浮动的，现在浮动在标题下方，我试图通过 clear:both 来防止这种情况。但是，这似乎不起作用，所以我想知道......有什么问题？

**html:**

```
<header>
    <ul>
        <li><a href='#'>Item 1</a></li>
        <li><a href='#'>Item 2</a></li>
        <li><a href='#'>Item 3</a></li>
        <li><a href='#'>Item 4</a></li>
    </ul>
    <div class='clear'/>
</header> 
```

**CSS：**

```
header {
    background: #888;
    height: 20px;
    padding: 10px;
}

ul{
  margin: 18px 0;
  padding: 0;
  list-style: none;
}

ul li{
  margin: 0 10px 0 0;
  padding: 0;
  display: block;
  float: left;
  width: 80px;
  height: 20px;
  border: 1px solid #000;
  background: red;
}

ul li a{
  display:block;
  width: 100%;
  height: 100%;
  text-decoration: none;
  float: left;
  text-align: center;
  padding-top: 2px;
}

ul li a:hover{
  color: #fff;
  background-color: #000;
}​

.clear {
    clear:both;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T14:30:54.963

您可以使用clearfix：

```
.clearfix:after {
  clear:both;
  content:".";
  display:block;
  height:0;
  line-height:0;
  visibility:hidden;
} 
```

并将其应用于 ul 和标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:36:45.693

更适合您情况的 CSS 将是（在 FF、Chrome、IE6+ 中测试）

```
header {
    display: block; /* Necessary for older browsers to render this html5 element properly */
    background: #888;  
    height: 20px;  
    padding: 10px;  
}

ul {  
    margin: 18px 0;  
    padding: 0;  
    list-style: none;  
}

ul li {
    margin: 0 10px 0 0; /* at least some margin-right is necessary to make inline-block work in IE */
    padding: 0 5px; /* you don't have to set a width any longer, so let padding define spacing */
    display: inline-block;
    zoom: 1; /* part 1 of the IE hack to make inline-block work */
    *display: inline; /* part 2 of the IE hack to make inline-block work */
   /* height and line-height not necessary - driven by a element below */
    border: 1px solid #000;
    background: red;
}

ul li a {
    display:block;
    height: 20px;
    line-height: 20px; /* this will vertically center the text in the li */
    text-decoration: none;
    text-align: center;
}

ul li a:hover{
    color: #fff;
    background-color: #000;
}​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T14:38:39.887

而不是使用 cleardiv，也许您可​​以尝试来自 html5boilerplate 的标准 clearfix？

这是修改后的标记：

```
 <header class="clearfix">
      <ul>
          <li><a href='#'>Item 1</a></li>
          <li><a href='#'>Item 2</a></li>
          <li><a href='#'>Item 3</a></li>
          <li><a href='#'>Item 4</a></li>
      </ul>
  </header> 
```

这是要添加的CSS：

```
.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
} 
```

从文档：

> .clearfix
> 
> 将 .clearfix 添加到元素将确保它始终完全包含其浮动子元素。多年来，clearfix hack 出现了许多变体，还有其他 hack 也可以帮助您包含浮动子项，但 HTML5 Boilerplate 目前使用的是 micro clearfix。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T14:16:50.760

您不能`/>`用于 div。将其更改`<div class='clear'/>`为`<div class="clear"></div>`

或者尝试在当前的下面添加另一个 li 并给出明确的类。

```
<header>
    <ul>
        <li><a href='#'>Item 1</a></li>
        <li><a href='#'>Item 2</a></li>
        <li><a href='#'>Item 3</a></li>
        <li><a href='#'>Item 4</a></li>
        <li class='clear'></li>
    </ul>
</header> 
```

# c# - 如何获取短数据类型值作为输入

> ID：12989260
> 
> 赞同：0
> 
> 时间：2012-10-20T14:14:00.450
> 
> 标签：c#, input, short

我需要在 C# 控制台应用程序中获取一个简短的数据类型值作为输入。我听说，很容易在 C# 中输入 int、string 等。但我必须得到一个简短的数据类型值作为输入。请帮我。谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:16:24.847

```
string input = Console.ReadLine();
short s;
if(short.TryParse(input, out s))
{
    //use s
}
else
{
    //invalid input
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:15:01.827

您可以使用[**Console.ReadLine()**](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)并对其应用检查，如果给定的值不短，那么您再次要求输入。

```
string inputForShort = Console.ReadLine();
short result=0;
bool shortGiven = false;
do { 
       Console.WriteLine("Please enter short value");
       inputForShort = Console.ReadLine();
       shortGiven = short.TryParse(inputForShort , out result);           

} while (!shortGiven);   

Console.WriteLine("You entered short value" + result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:17:32.713

```
Var Input = Console.ReadLine();
Short ShortInput;
Int16.TryParse(Input,out ShortInput); 
```

# android - 从子类 SimpleCursorAdapter 启动 AlertDialog

> ID：12989264
> 
> 赞同：2
> 
> 时间：2012-10-20T14:14:29.543
> 
> 标签：android, android-fragments, simplecursoradapter, onclicklistener

为了创建包含按钮的自定义列表条目布局，我将 SimpleCursorAdapter 子类化。我可以让按钮写入日志。我的意图是启动一个 AlertDialog，但我还没有找到一种方法来让 FragmentManager 启动 DialogFragment。我正在使用片段兼容性组件。

对于这种情况，我意识到可能有更简单的解决方案可以避免使用 SimpleCursorAdapter，但我正在尝试在处理更复杂的组件之前了解这种情况。

这是适配器：

```
public class ActiveProfileAdapter extends SimpleCursorAdapter {
    private static final String DEBUG_TAG = "ActiveProfileAdapter";
    private final Cursor dataCursor;
    private final LayoutInflater mInflater;

    public ActiveProfileAdapter(final Context context, final int layout, final Cursor dataCursor, final String[] from,
            final int[] to, final int flags) {
        super(context, layout, dataCursor, from, to, flags);
        this.dataCursor = dataCursor;
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.profilebar_list_item, null);

            holder = new ViewHolder();
            holder.button1 = (Button) convertView.findViewById(R.id.currentprofile);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        dataCursor.moveToPosition(position);
        final int label_index = dataCursor.getColumnIndex(ProfilesColumns.USERNAME);
        if (label_index == -1) {
            Log.d(DEBUG_TAG, "Bad column name");
        }

        final String label = dataCursor.getString(label_index);
        holder.button1.setText(label);
        holder.button1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
                Log.d(DEBUG_TAG, "Launch AlertDialog Fragment when this button is pressed");
            }
        });

        return convertView;
    }

    static class ViewHolder {
        Button button1;
    }
} 
```

这是调用适配器的片段：

```
public class ActiveProfileFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
    private static final int LIST_LOADER = R.loader.browsefragloader;
    protected int layout = R.layout.profilebar_fragment;
    protected SimpleCursorAdapter listAdapter;

    protected final Uri table = ProfileProvider.URI_ACTIVEPROFILEVIEW;
    protected String[] uiBindFrom = { ProfilesColumns.USERNAME };
    protected String[] createProjection = { CommonDatabaseHelper._ID, ProfilesColumns.USERNAME };
    protected int[] uiBindTo = { R.id.currentprofile };

    // layout for list item
    protected int entryLayout = R.layout.profilebar_list_item;

    Button openProfile;

    public ActiveProfileFragment() {
        super();
    }

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Cursor c = getActivity().getContentResolver().query(table, createProjection, null, null, null);
        listAdapter = new ActiveProfileAdapter(getActivity().getApplicationContext(), entryLayout, c, uiBindFrom,
                uiBindTo, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        getLoaderManager().initLoader(LIST_LOADER, null, this);
        setListAdapter(listAdapter);
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
        final View view = inflater.inflate(layout, container, false);
        return view;
    }

    @Override
    public Loader<Cursor> onCreateLoader(final int id, final Bundle args) {
        final String[] projection = createProjection;
        final CursorLoader cursorLoader = new CursorLoader(getActivity(), table, projection, null, null, null);
        return cursorLoader;
    }

    @Override
    public void onLoadFinished(final Loader<Cursor> loader, final Cursor cursor) {
        listAdapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(final Loader<Cursor> loader) {
        listAdapter.swapCursor(null);
    }
} 
```

这是包含片段的活动：

```
public class BrowseActivity extends FragmentActivity {
    protected int layout = R.layout.browse_viewer;

    final Fragment profileBarFragment = new ActiveProfileFragment();
    final Fragment fragment0 = new BrowseFragment();

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(layout);
        final android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
        final android.support.v4.app.FragmentTransaction transaction = fm.beginTransaction();
        transaction.replace(R.id.profilebarfragment, profileBarFragment);
        transaction.replace(R.id.fragment, fragment0);
        transaction.commit();
    }
} 
```

谢谢你。

**解决** 了我遇到了一个非常简单的解决方案。我将适配器移动到片段活动中，以便我可以在本地引用片段的组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:18:22.363

在片段内定义适配器，以便它可以访问活动的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:24:57.623

它实际上很简单，只需创建对话框片段类，在按钮`onClick`方法中调用它，然后使用`show`带有`getFragmentManager()`“对话框”关键字的方法......

```
YourDialogFragment dialogFragment = new YourDialogFragment();
dialogFragment.show(getFragmentManager(), "dialog"); 
```

# android - 将库项目引用到另一个项目后，未创建图像视图

> ID：12989273
> 
> 赞同：0
> 
> 时间：2012-10-20T14:15:22.240
> 
> 标签：android, eclipse, jar, imageview

我创建了一个 Android 库应用程序，其中包含一些包含图像视图的活动。它工作正常，但是当我将它标记为库并在另一个应用程序中引用时，当我尝试使用 findViewById(R.id.imgdisplay) 获取图像视图时，它会给出错误空指针异常。

当我将库项目引用到 my-project`(Project_Name --> properties --> Java built path )`添加 jar 文件时。我当时编译了项目库项目并`R.java`包含在 gen 文件夹中，但`R.java`在我的项目中获取 ID 资源是相同的。这里它没有生成 R.java 的实际库项目。为什么？

有任何想法吗？

# jquery - 如何将 jquery 功能限制到某些页面？

> ID：12989277
> 
> 赞同：1
> 
> 时间：2012-10-20T14:15:46.140
> 
> 标签：jquery

这是我的 javascript 文件的摘录：

```
$(function() {
    if ($('form#search').length > 0) {
        setSearchForm();
    }
});

function setSearchForm() {
    var text=$('form#search input[type=text]');
    if (text.val().length != 0) {
        text.next('input[type=submit]').removeProp('disabled');
    } else {
        text.next('input[type=submit]').prop('disabled', true);
    }
} 
```

我的问题是：我的所有子页面`.js`都使用此文件，但并非所有子页面都有`search`表单。

因此，在准备好文档时，我会检查是否存在搜索表单，然后`setSearchForm()`仅在存在搜索表单时才调用。

我发现这是防止`setSearchForm()`在每个页面上运行的唯一方法。因为如果没有搜索表单并且无论如何都会触发该功能，那么我`js`文件中的其他功能将不再起作用。

有没有更优雅的解决方案，例如以某种方式重写函数？

我对 jQuery 相当陌生，所以解决方案可能很简单！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:18:47.577

将这两个函数放在一个单独的 .js 文件中，并仅在具有搜索表单的页面上导入它。

# sql - Ruby Rails 在单击时从数据库中增加值

> ID：12989279
> 
> 赞同：-3
> 
> 时间：2012-10-20T14:15:54.830
> 
> 标签：sql, ruby-on-rails, database, increment, vote

这是我第一次在 Rails 上使用 ruby​​，所以不要对我太苛刻。:) 我目前正在开展一个网站项目，该项目将有多个条目，人们必须为条目投票。我在 SQL 数据库中输入条目（使用 phpMyAdmin）。我设置了以下行：id、title、author、date、voteplus 和 voteminus（最后两个是 smallint 类型）。我希望用户通过单击我网站上的链接来增加 voteplus 或 voteminus。我以这种方式显示它们：`<span class="vote">( #{row[5]} / #{row[6]} )</span>`

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:58:02.670

`make_votable`如果您刚刚开始该项目，那么为此目的使用类似的 gem 可能是有意义的。[您可以在ruby​​ toolbox](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=voting)找到其他宝石。如果您不想使用 gem，您很可能希望对所有 sql 查询使用 Activerecord。如果您从 php 迁移（我对此一无所知），您需要确保所有表都为 Activerecord 正确命名。因此，我的建议是按照[Hartl 教程](http://ruby.railstutorial.org/)了解 Rails 的处理方式。如果您有旧数据库，我会将其迁移到 Rails 所需的数据库（并且显然会进行备份）

# java - 集合中的订单如何运作？

> ID：12989290
> 
> 赞同：1
> 
> 时间：2012-10-20T14:17:03.580
> 
> 标签：java, collections

此类按名称排序，但是当各种对象具有相同名称时会发生什么？

```
public class MyStuff implements Comparable<MyStuff> {
    MyStuff(String n, int v){ name = n; value=v;}
    String name; int value;
    public int compareTo(MyStuff m){
        return name.compareTo(m.name);
    }
    public String toString() { return name + " " + value + " ";}
    public static void main(String[] args){
        List<MyStuff> l = new ArrayList<MyStuff>();
        MyStuff m0 = new MyStuff("hola",1);
        MyStuff m1 = new MyStuff("hola",1);
        MyStuff m2 = new MyStuff("hola",2);
        MyStuff m3 = new MyStuff("hola",2);
        l.add(m0);
        l.add(m1);
        l.add(m2);
        l.add(m3);
        Collections.sort(l);
        System.out.println(l);
        for(Object o: l) System.out.println(o.hashCode());
    }
} 
```

结果：

```
[hola 1 , hola 1 , hola 2 , hola 2 ]
21722195
12719253
30758157
12773951 
```

哪个对象是第一个？取决于值，哈希码..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:02:49.590

正如[java doc: Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)中所指定的，`public static <T extends Comparable<? super T>> void sort(List<T> list)`保证是稳定的。

稳定的意思是：对于相等的对象，即比较返回0，相对顺序不变，即排序前在左边的，排序后仍然在左边。

顺便说一句，正如[java doc: Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28byte%5b%5d%29)中所指定的那样，`public static void sort(Object[] a)`它也保证是稳定的。似乎在`java.util`库中，当元素不是原始元素时，排序总是保证稳定性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:20:37.183

不**，哈希码与它无关**。这是您添加到列表中的元素的顺序。

`Collections.sort()`方法`Arrays.sort()`用于`ArrayList`which is a`mergesort`仅在以下情况下交换元素`compareTo returns >0`

# css - 如何旋转和平移 css 3d 立方体？

> ID：12989291
> 
> 赞同：0
> 
> 时间：2012-10-20T14:17:04.267
> 
> 标签：css, transformation

我正在尝试旋转一个立方体，更具体地说是来自这个 tut 的那个：http: [//desandro.github.com/3dtransforms/examples/cube-02-show-sides.html](http://desandro.github.com/3dtransforms/examples/cube-02-show-sides.html) 假设我想从第 1 面转到第 3 面. 现在，我想要实现的是不仅要旋转立方体，还要在 x 轴上平移（移动它）。例如，当旋转结束时，立方体将向右移动 20px（直到旋转的一半），然后向左移动 20px（回到原来的位置）。我尝试了以下方法，但我想它有问题（我在这里省略了 css 前缀）：

```
#cube.show-right {
    transform: translateX(20px) translateZ( -100px ) rotateY(  -90deg ) translateX(-20px)
} 
```

知道如何执行此操作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:02:02.660

我相信在您的示例中，x 平移正在相互抵消（您告诉立方体向右移动 20 像素，向左移动 20 像素）。

为了完成你想要的（在旋转的前半部分向右滑动，在后半部分向左滑动），我会将立方体放在一个带有两个平移动画的包装 div 中，第二个延迟（参见[这里](http://www.the-art-of-web.com/css/css-animation/#section_4)关于如何延迟转换的解释）。这两个动画都应该是立方体旋转持续时间的一半。

希望这可以帮助！

# c - 是否可以在#define 中使用 if 语句？

> ID：12989298
> 
> 赞同：24
> 
> 时间：2012-10-20T14:17:39.827
> 
> 标签：c, if-statement, macros, c-preprocessor

我正在尝试使用以下公式制作宏：`(a^2/(a+b))*b`，并且我想确保不会被零除。

```
#define SUM_A( x, y ) if( x == 0 || y == 0) { 0 } else { ( ( ( x * x ) / ( ( x ) + ( y ) ) ) * ( y ) )} 
```

然后我在main里面调用宏：

```
float a = 40, b = 10, result; 
result = SUM_A(a, b); 
printf("%f", result); 
```

我尝试在 if 函数周围使用方括号，但在 if 语句之前我不断收到语法错误。我也尝试过使用 return，但我在某处读到你不应该在定义中使用它。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-20T14:19:37.960

您不能使用 if 语句，因为`#define`它是由预处理器解释的，并且输出将是

```
 result=if( x == 0 || y == 0) { 0 } else { ( ( ( x * x ) / ( ( x ) + ( y ) ) ) * ( y ) )} 
```

这是错误的语法。

但另一种方法是使用三元运算符。将您的定义更改为

```
#define SUM_A( x, y )  ((x) == 0 || (y) == 0 ? 0 : ( ( ( (x) * (x) ) / ( ( x ) + ( y ) ) ) * ( y ) )) 
```

请记住始终将您的定义放在括号之间，以避免替换时出现语法错误。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-11-19T08:33:12.887

据我所知，您尝试做的事情（使用`if`语句，然后从宏中返回一个值）在 ISO C 中是不可能的......但是使用[语句表达式](https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)（GNU 扩展）在某种程度上是可能的。

由于`#define`s 本质上只是花哨的文本查找和替换，因此您必须非常小心它们的扩展方式。我发现这在默认情况下`gcc`有效：`clang`

```
#define SUM_A(x, y)                                     \
({                                                      \
    float answer;                                       \
    if ((x) == 0 || (y) == 0) {                         \
        answer = 0;                                     \
    } else {                                            \
        answer = ((float)((x)*(x)) / ((x)+(y))) * (y);  \
    }                                                   \
    answer;                                             \
})
// Typecasting to float necessary, since int/int == int in C 
```

这个宏里面的东西的简单解释：

*   每行的`\`末尾是信号行继续（即告诉编译器“这个宏在下一行继续”）
*   这`({`是一个语句表达式（GNU 扩展；不是标准 C 的一部分）。
*   虽然不是绝对必要的，但将参数的每次使用都放在括号中会更安全，以避免运算符优先级陷阱。例如，如果`x`是`2+1`，那么`(x)*(x)`将扩展为`(2+1)*(2+1)`，即 9（我们想要的），但`x*x`会扩展为`2+1*2+1`，即 5（不是我们想要的）
*   在语句表达式中，最后一行的功能类似于`return`值（因此`answer;`在末尾）

这应该会给你你正在寻找的结果，并且没有理由不能将它扩展到包含多个`else if`s （尽管正如其他答案所指出的那样，如果可以的话，最好使用三元运算符）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-20T14:19:35.907

`if`引入语句，而不是表达式。使用“三元”（条件）运算符：

```
#define SUM_A(x, y) (((x) == 0 || (y) == 0)? 0: ((((x) * (x)) / ((x) + (y))) * (y))) 
```

或者，将其设为`inline`函数：

```
inline float sum_a(float x, float y)
{
    if (x == 0 || y == 0)
        return 0;
    else
        return ((x * x) / (x + y)) * y;
} 
```

`x`这避免了和/或的多重评估问题，并且`y`更具可读性，但它确实修复了`x`and的类型`y`。您也可以删除`inline`并让编译器决定是否内联此函数（`inline`不能保证它会执行内联）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-25T10:20:44.157

您的宏存在多个问题：

*   它扩展为语句，因此您不能将其用作表达式

*   扩展中的参数没有正确括起来：使用除变量名或常量之外的任何内容调用此宏都会产生问题。

*   参数被多次评估：如果您使用具有副作用的参数调用宏，例如`SUM_A(a(), b())`or `SUM_A(*p++, 2)`，则副作用将多次发生。

为了避免所有这些问题，请使用一个函数，可能定义为`static inline`帮助编译器进行更多优化（这是可选的，现代编译器会自动执行此操作）：

```
static inline int SUM_A(float x, float y) {
    if (x == 0 || y == 0)
        return 0; 
    else
        return x * x / (x + y) * y;
} 
```

笔记：

*   此函数使用浮点运算，宏不一定会使用，具体取决于其参数的实际类型。
*   该测试不会阻止除以零：SUM_A(-1, 1) 仍然执行一。
*   除以零不一定是问题：使用浮点参数，它会产生 Infinity 或 NaN，而不是运行时错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T14:20:29.643

问题是`if`语句不是表达式，也不返回值。此外，在这种情况下没有充分的理由使用宏。事实上，它可能会导致非常严重的性能问题（取决于您作为宏参数传递的内容）。您应该改用函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-08T19:05:43.950

是的，您可以在宏中使用 if 语句。您需要正确格式化它。这是一个例子：

```
#define MY_FUNCTION( x )  if( x ) { PRINT("TRUE"); } else { PRINT("FALSE"); } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-24T16:11:07.143

我经常使用带有条件的宏，它们确实有合法用途。

我有一些本质上是 blob 的结构，一切都只是一个 uint8_t 流。

为了使内部结构更具可读性，我有条件宏。

例子...

```
#define MAX_NODES 10
#define _CVAL16(x)(((x) <= 127) ? (x) : ((((x) & 127) | 0x80) ), ((x) >> 7))  // 1 or 2 bytes emitted <= 127 = 1 otherwise 2 
```

现在要在数组中使用宏...

```
uint8_t arr_cvals[] = { _CVAL16(MAX_NODES), _CVAL16(345) }; 
```

数组中发出三个字节，第一个宏发出 1，第二个宏发出 2 个字节。这是在编译时评估的，只是使代码更具可读性。

我也有……例如……

```
#define _VAL16(x) ((x) & 255), (((x) >> 8) & 255) 
```

对于最初的问题......也许这个人想要使用带有常量的结果，但再次真正归结为在哪里以及如何使用它。

```
#define SUM_A(x, y) (!(x) || !(y)) ? 0 : ((x) * (x) / ((x) + (y)) * (y))
float arr_f[] = { SUM_A(0.5f, 0.55f), SUM_A(0.0f, -1.0f), SUM_A(1.0f, 0.0f) }; 
```

在运行时可以有...

```
float x;
float y;

float res = SUM_A(x,y); // note ; on the end 
```

我有一个程序可以创建作为代码包含在 C 程序中的字体，并且大多数值都包含在将 32 位值拆分为 4 个字节、浮动为 4 个字节等的宏周围。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-23T09:55:58.053

您可以将条件语句转换为简单的表达式。条件评估为`0`或`1`

```
// pseudo-code
// if (<something>) { 0; } else { 42; }
// if (!<something>) { 42; } else { 0; }
// !<something> * 42; 
```

在您的具体情况下

```
// if ((x == 0) || (y == 0)) { 0; } else { (x)(y)expression; }
// if ((x != 0) && (y != 0)) { (x)(y)expression; }
// ((x != 0) && (y != 0)) * ( (x)(y)expression ); 
```

# jquery - jQuery BBQ 出错

> ID：12989301
> 
> 赞同：0
> 
> 时间：2012-10-20T14:17:48.733
> 
> 标签：jquery, jquery-bbq

使用 jQuery BBQ 抛出奇怪的错误：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="jquery.ba-bbq.min.js"></script>
        <script type="text/javascript" src="jQuery.js"></script>

</head>
</html> 
```

未捕获的引用错误：未定义 jQuery。

javascript 文件与 HTML 文件位于同一目录中。

有人知道发生了什么吗？关于导入 javascript 库有什么我不知道的，或者这只是 jquery BBQ 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:24:27.610

显然，jQuery 中的导入是有序的！非常感谢，未定义。

您只需切换两个 javascript 引用的顺序，以便导入 jQuery 供 jQuery BBQ 使用。

# java - java没有捕获ms sql存储过程引发错误

> ID：12989302
> 
> 赞同：4
> 
> 时间：2012-10-20T14:17:50.937
> 
> 标签：java, sql-server, stored-procedures, try-catch, raiserror

我的 SQL Server 2008 数据库中有一个存储过程，我正在开发一个使用 sqljdbc4 连接的 java 应用程序。一切正常，即使是过程调用，但有一件事 - 在某些情况下，java 不会捕获由过程引发的引发异常，并在调用时指定，如选择或更新（删除插入）

这是一个例子

```
AS
BEGIN
    DECLARE @c INT
    SELECT @c= COUNT(nomUtilisateur) 
        FROM Utilisateur2
    PRINT @c
    RAISERROR(N'error message personalise',18,1)
END 
```

在这种情况下，java 捕获异常

```
try{
    CallableStatement cll=con.prepareCall("EXEC f3 ");
    cll.execute();

    System.out.println("fin EXEC f3 ? ");}
catch (SQLException e) {
    System.out.println("sqlerror state: "+e.getSQLState() +" |error code: "
        + e.getErrorCode()+" |message: "+e.getMessage());
    e.printStackTrace();
} 
```

但是当我使用这样的选择时

```
 ALTER PROCEDURE [dbo].[f3]
AS
BEGIN
    declare @c INT
    SELECT @c= COUNT(nomUtilisateur) 
        FROM Utilisateur2
    **select * from Utilisateur2**
    PRINT @c
    RAISERROR(N'error message personalise',18,1)
END 
```

或更新，java 继续执行而不捕获异常。就像它不等待程序结束一样。

所以我的问题是，我是否错误地使用了存储过程，或者它是 jdbc 驱动程序中的一个错误，还是它更喜欢使用 out 参数并离开这个策略；我用谷歌搜索了这个问题，没有找到任何东西。

就个人而言，我想使用引发的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:18:40.767

尝试删除 PRINT 语句并将“SET NOCOUNT ON”放在 proc 的代码中，这可能是驱动程序混淆了。

# nfs - Vagrant 共享文件夹适用于工作目录，但仅此而已

> ID：12989303
> 
> 赞同：0
> 
> 时间：2012-10-20T14:17:52.567
> 
> 标签：nfs, vagrant, shared-directory

通常我对 Vagrant 的“默认”文件夹共享行很满意，其中来宾框中的 /vagrant 映射到您的工作目录。

```
config.vm.share_folder("v-root", "/vagrant", ".", :nfs => true) 
```

但是，在这种特殊情况下，我正在尝试为多个存储库创建一个 VM，因此我正在尝试将来宾的文件夹映射到另一个不是工作目录的文件夹 (.)

```
config.vm.share_folder("v-repos", "/projects", "~/Projects/", :nfs => true) 
```

我试图映射到“../”和品种，以及绝对路径“/Users/dietervds/”等，但我总是收到错误：

> [默认] 挂载 NFS 共享文件夹... 挂载 NFS 共享文件夹失败。这通常是由来宾计算机上未安装 NFS 客户端软件引起的。请验证 NFS 客户端软件是否已正确安装，并查阅特定于您正在使用的 linux 发行版的任何资源，以获取有关如何执行此操作的更多信息。

但是，由于 NFS 对默认行工作得很好，它必须是别的东西。

有人有什么主意吗？

提前致谢，

迪特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:21:18.863

我很确定 ":nfs" 默认为 false。

您是否确认而不是假设下面的行有效？

```
config.vm.share_folder("v-root", "/vagrant", ".", :nfs => true) 
```

如果那一行没有错误，而另一行有……那真的很奇怪。

# sql-server - SQL Server 行值作为列名数据透视表？

> ID：12989306
> 
> 赞同：1
> 
> 时间：2012-10-20T14:18:05.403
> 
> 标签：sql-server, sql-server-2008, pivot

我在 SQL Server 2008 中有以下视图。

```
DEPT | EMP_ID | EMP_NAME | P_DATE  | HOURS_WORKED 
```

我希望视图是这样的：

```
DEPT | EMP_ID | EMP_NAME | 2012-09-28 | 2012-09-29 | 2012-09-30 | 2012-10-01 ... 
```

其中，上述日期列标题为 P_DATE，其下方是该员工在该特定日期的“Hours_Worked”值。

像

```
2012-09-28

09:00:00

10:00:00 
```

我不确定是否可以使用 Pivot 实现它。

请转到此链接以获得清晰的理解：[SQL Server View Snapshots](http://imgur.com/a/82eSo "SQL Server 查看图像")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T15:22:16.913

您可以使用该`PIVOT`功能执行此操作。如果您知道要转换为列的值而不是硬编码，则可以使用静态数据透视：

```
select *
from 
(
  select dept, emp_id, emp_name, p_date, hours_worked
  from table1
) x
pivot
(
  max(hours_worked)
  for p_date in ([2012-10-19], [2012-10-20], [2012-10-21])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b0dda/1)

如果您有未知数量的值，则可以`PIVOT`对数据使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' 
                        + QUOTENAME(convert(char(10), p_date, 120)) 
                    from table1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT dept, emp_id, emp_name,' + @cols + ' from 
             (
                select dept, emp_id, emp_name, p_date, hours_worked
                from table1
            ) x
            pivot 
            (
                max(hours_worked)
                for p_date in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b0dda/4)

# google-analytics - Google Analytics 中自定义变量的索引角色

> ID：12989309
> 
> 赞同：0
> 
> 时间：2012-10-20T14:18:23.443
> 
> 标签：google-analytics, analytics

有人可以澄清一下是否有可能在单个网页浏览/事件中有 5 个具有键名的自定义变量：A1、B1、C1、D1 和 E1，并在另一个中有另外 5 个名称为 A2、B2、C2、D2 和 E2 的自定义变量页面预览？假设您使用索引 1 到 5。

顺便说一句 - 我在 Android 上使用移动 SDK。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:19:56.890

是的; 只要您只使用页面级自定义变量。如果您尝试在页面和会话之间进行更改，请阅读有关[混合自定义变量类型](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#mixedTypes)的 Google 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:06:48.340

是的。它不是关于限制，而是关于你想用这些自定义变量做什么。自定义变量可以通过 3 种方式设置 > 页面 - 会话和访问。

那个A1、B1、C1等叫什么名字？

```
<code>_setCustomVar(1, "Give a name", "A", 3)</code> 
```

3 - 最后 - 表示它是一个页面级变量。

# asp.net - 滴答事件结束后按钮未禁用

> ID：12989311
> 
> 赞同：0
> 
> 时间：2012-10-20T14:18:28.047
> 
> 标签：asp.net, timer

```
<div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:Timer ID="Timer1" Interval="1000" OnTick="ontick" runat="server">
                </asp:Timer>
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
            </Triggers>
        </asp:UpdatePanel>
        <asp:Button runat="server" EnableViewState="true" Text="button" ID="btnText" />
    </div>

protected void ontick(object sender, EventArgs e)
    {
        Thread.Sleep(2000);
        TextBox1.Text = "1";        
        Timer1.Enabled = false;
        btnText.Enabled = false;
    } 
```

**滴答事件结束后按钮未禁用**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:03:43.337

这是完全正确的行为，因为按钮位于更新面板**之外**。请将其包含在 ContentTemplate 中，或创建新的更新面板，您将在其中包装此按钮并将更新类型设置为始终（我认为这是默认行为）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:06:07.717

我认为您应该将按钮放在内容模板中，以便在更新面板更新时将其禁用。

# javascript - AngularJS javascript 和 css 打包器

> ID：12989313
> 
> 赞同：1
> 
> 时间：2012-10-20T14:18:36.953
> 
> 标签：javascript, angularjs

我知道这是一个常见问题，但我发现的每个 javascript 和 css 打包器/压缩器都是针对节点的，并且包含许多必要的文件/模块。目前我们正在开发 AngularJs 应用程序，我们将所有模块分成不同的文件，每个控制器也有自己的文件（遵循这种方法[https://github.com/scotch/sapling](https://github.com/scotch/sapling)）。此外，我们的服务器部分是 .NET MVC，因此我们不熟悉 node 或 java 工具。

这就是我需要的

1.  打包文件夹中的所有 .js 文件，包括所有子文件夹（无限深度）
2.  决定我是要运行缩小还是只运行文件连接
3.  仅运行简单命令以再次打包所有内容的选项

所以基本上我只需要简单的**打包器和压缩命令行工具**。[我用早午餐](http://brunch.io/)做了一些打包，但我不喜欢它如何用一些代码包装我的模块。

作为示例，这里是 Sapling 的代码

[https://github.com/scotch/sapling](https://github.com/scotch/sapling)

这是它的包装方式（包装为模块）

[http://sapling.scotchmedia.com/js/app.js](http://sapling.scotchmedia.com/js/app.js)

有什么简单的东西可以满足这些需求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:30:25.947

好的，经过一些研究，我发现 .NET MVC 包可以用于此目的。

我发现了如何使用非缩小版本（用于调试），即使 debug=false。[归功于](https://stackoverflow.com/a/9670333/155639)chrisortman ：

这是我的代码

```
public static void RegisterBundles(BundleCollection bundles)
    {
        BundleTable.EnableOptimizations = true;

        bundles.Add(new Bundle("~/bundles/vendor", new NonMinifyingJavascript())
            .IncludeDirectory("~/Areas/Qusion/App/libs/", "*.js", true));

        bundles.Add(new Bundle("~/bundles/app/finance", new NonMinifyingJavascript())
            .IncludeDirectory("~/Areas/Qusion/App/finance/", "*.js", true));
    } 
```

**NonMinifyingJavascript**来自上面的 chrisortman 链接。

# php - 如何将数组拆分为两个数组

> ID：12989319
> 
> 赞同：1
> 
> 时间：2012-10-20T14:18:59.707
> 
> 标签：php, arrays

我正在使用 PHP lang 处理数组。我通过旋转 for 循环得到了以下输出。现在想把它分成两个不同的数组。任何人请指导我分成两个不同的数组......就像 a[0] = 810 和 b[0] = 44

以及，我试图在不改变值的情况下对其进行排序，例如排序最大值 a[0] = 840 & b[0] = 87

```
大批
(
    [0] => 810/44
    [1] => 0/280
    [2] => 73/279
    [3] => 0/278
    [4] => 0/277
    [5] => 0/276
    [6] => 840/87
    [7] => 0/275
    [8] => 0/274
    [9] => 0/273
    [10] => 6/271
    [11] => 0/272
    [12] => 0/269
    [13] => 3/267
    [14] => 0/268
    [15] => 3/259
    [16] => 124/108
    [17] => 82/239
    [18] => 221/238
    [19] => 30/160
    [20] => 3/161
    [21] => 65/168
    [22] => 73/169
    [23] => 0/170
    [24] => 0/248
    [25] => 192/226
    [26] => 209/222
    [27] => 80/223
    [28] => 273/182
    [29] => 79/183
    [30] => 73/184
    [31] => 73/185
    [32] => 6/186
    [33] => 73/187
    [34] => 0/188
    [35] => 48/270
    [36] => 138/190
    [37] => 370/191
    [38] => 152/192
    [39] => 12/200
    [40] => 200/210
    [41] => 0/213
    [42] => 21/212
    [43] => 124/214
    [44] => 0/215
    [45] => 0/216
    [46] => 133/217
    [47] => 6/260
    [48] => 73/285
    [49] => 73/284
    [50] => 0/283
    [51] => 73/286
    [52] => 73/287
    [53] => 0/288
    [54] => 73/289
    [55] => 0/290
    [56] => 76/291
    [57] => 76/292
    [58] => 0/293
    [59] => 0/294
    [60] => 0/295
    [61] => 0/296
    [62] => 0/297
    [63] => 3/298
    [64] => 0/299
    [65] => 0/300
    [66] => 3/301
)

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T14:22:04.483

怎么样：

```
$a = $b = array();

foreach ($array as $key => $value) {
    list($a[$key], $b[$key]) = explode('/', $value, 2);
} 
```

**编辑**：要处理之后的排序，你可以使用这个：

```
array_multisort($a, SORT_DESC, SORT_NUMERIC, $b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:26:28.780

```
 foreach($array1 as $a){

 $a = (string)$a

 $pos = strpos($a, '/')

  $first[] = substr($a, 0, $pos);
 $second[] = substr($a, $pos);

 } 
```

未测试。. .但是你可以在这些线上尝试一些东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:27:11.477

你可以这样做：

```
<?php 
$a = array();
$b = array();

$orig_array = array('810/44','0/280');

foreach($orig_array as $orig){
   $values = explode('/',$orig,2);
   $a[]=$values[0];
   $b[]=$values[1];
}
print_r($a);
print_r($b);
/*
Array
(
    [0] => 810
    [1] => 0
)
Array
(
    [0] => 44
    [1] => 280
)    
*/
?> 
```

# asp.net-mvc - 在 asp.net-mvc 站点上，为什么 html DropdownlistFor() 不能正常工作？

> ID：12989322
> 
> 赞同：2
> 
> 时间：2012-10-20T14:19:16.960
> 
> 标签：asp.net-mvc, selected, html.dropdownlistfor, selectlistitem

我有一个问题，下拉列表中的项目没有被选中。我正在构建一个 SelectListItems 数组并将正确的设置为 selected = true 但它没有被选中。

我的控制器中有以下代码：

```
 public ActionResult Edit(int id)
    {
        var p = _myRepository.FindBy(id);
        var vm = new MyViewModel(p) { CategoryTypes = ControllerUtils.GetList(_myTypeRepository, r => r.Name, p.CategoryType.Id) };

        return View(vm);
    } 
```

这是 ControllerUtils 类中的 GetList 函数：

```
public static class ControllerUtils
{
    public static IEnumerable<SelectListItem> GetList<T>(IIntKeyedRepository<T> list, Func<T, string> getName, int id) where T : BaseModel
    {
        var items = list.All().ToList();
        var itemsList = items.Select(r => new SelectListItem() { Selected = r.Id == id, Text = getName(r), Value = r.Id.ToString() });
        return itemsList;
    }
} 
```

这是我的视图代码：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.MyObject.CategoryType)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.MyObject.CategoryType, Model.CategoryTypes)
        @Html.ValidationMessageFor(model => model.MyObject.CategoryType)
    </div> 
```

当我在控制器代码中调试并列出 SelectListItem 对象数组时，我确实看到第二项已选中 = true。但是当我检查视图 HTML 时，我没有看到任何一个项目被选中：

```
<select id="CategoryType" name="CategoryType">
  <option value="1">Choice 1</option>
  <option value="2">Choice 2</option>
</select> 
```

如您所见，这两个项目都没有“selected="selected"。关于这里可能发生的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:55:47.873

DropDownListFor helper 的第一个参数必须是一个 lambda 表达式，指向视图模型上包含所选值的**原始类型属性：**

```
@Html.DropDownListFor(
    model => model.MyObject.CategoryType.Id, 
    Model.CategoryTypes
) 
```

现在摆脱`Selected = r.Id == id`你的`SelectListItem`. 你不需要它。现在假设在助手`Model.MyObject.CategoryType.Id`内部有一个具有匹配值的对应项目`Model.CategoryTypes`将自动预选这个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:36:23.060

不要使用该`SelectListItem.Selected`属性来判断选择了哪个项目。我注意到`DropDownListFor`忽略了这一点。

相反，您应该`model.MyObject.CategoryType`设置为该值`2`（或`"2"`），以便下拉菜单选择第二个项目。

# scala - Scala 在案例类中使用弱引用

> ID：12989325
> 
> 赞同：2
> 
> 时间：2012-10-20T14:19:33.767
> 
> 标签：scala, weak-references, case-class

我想在 scala 中编写一个案例类，其中包含对其他对象的 scala.ref.WeakReference。我想知道在 scala 中完成的最佳实践是什么。

我对此有一些想法，第一个是这样的：

```
case class CC1(ref: Any) {
    private val weakRef: WeakReference[Any] = WeakReference(ref)

    def get: Any = weakRef()
} 
```

但这根本行不通，因为 scala 会在 CC1 中自动为 ref 生成一个具有强引用的 val。

我的第二个想法是：

```
case class CC2(private val weakRef: WeakReference[Any]) {
    def get: Any = weakRef() 
} 
```

那工作得很好。但是，它在代码重用方面不是很友好——如果*weakRef*和*get*来自这样的基类/特征怎么办：

```
trait T3 {
    protected var weakRef: WeakReference[Any] = null

    def get: Any = if(weakRef != null) weakRef() else null
}

case class CC3(/* how should I initialize weakRef in T3 */) extends T3 {
} 
```

你会怎么写代码？请问你有什么建议？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:44:58.027

这有什么问题？

```
case class CC3(private val wr:WeakReference[AnyRef]) extends T3 {
  weakRef = wr  
} 
```

如果您想避免引入另一个字段，您可以更改 trait 使其不包含字段，而仅包含 getter 和 setter 方法。

```
trait T3 {
  protected def weakRef: WeakReference[AnyRef]
  protected def weakRef_=(wr:WeakReference[AnyRef])

  def get: Any = if(weakRef != null) weakRef() else null
} 
```

然后你在你的案例类中实现这些方法。

```
case class CC3(private var wr:WeakReference[AnyRef]) extends T3 {
  override protected def weakRef = wr
  override protected def weakRef_=(w:WeakReference[AnyRef]) { wr = w }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:36:02.637

我不确定您为什么要在案例类中使用弱引用，但大概您希望能够掌握该值，否则希望它是透明的，它实际上是弱的 - 否则您可以放一个`WeakReference`在案例类中。首先让我们构建一个方便的包装器：

```
class Weakly[A](wr: java.lang.ref.WeakReference[A]) {
  def apply() = wr.get
  def get = Option(wr.get)
  def weak = wr
  override def hashCode = { val a = wr.get; if (a==null) wr.hashCode else a.hashCode }
  override def equals(a: Any) = a==wr.get
  override def toString = "~"+wr.get
}
object Weakly {
  def apply[A](a: A) = new Weakly(new java.lang.ref.WeakReference(a))
  def unapply[A](wa: Weakly[A]) = Option(wa())
}
implicit def strengthen_on_demand[A](w: Weakly[A]) = w()
implicit def weaken_on_demand[A](a: A) = Weakly(a) 
```

现在我们包装的弱引用被包装了两次，其优点是它显示了它的原始`hashCode`和`equals`，它显示了`~`前面的原始字符串（你当然可以改变它），最重要的是你可以对引用进行模式匹配（只有当引用存在时才会匹配）。有了这个，我们现在可以在案例类中进行弱引用，而无需额外的麻烦：

```
scala> case class CC1(s: Weakly[String]) {}
defined class CC1

scala> val cc = CC1("fish")
cc: CC1 = CC1(~fish)

scala> cc match { case CC1( Weakly(s) ) => s; case _ => "(nope)" }
res0: String = fish

scala> val s: String = cc.s
s: String = fish

scala> cc.s.weak.clear

scala> cc match { case CC1( Weakly(s) ) => s; case _ => "(nope)" }
res2: String = (nope) 
```

# symfony - Symfony2.1 跨环境保持身份验证

> ID：12989330
> 
> 赞同：1
> 
> 时间：2012-10-20T14:19:56.923
> 
> 标签：symfony, symfony-2.1

试图为我的 symfony2 应用程序创建一个单独的环境，我希望它能够跨环境维护经过身份验证的用户。

目前我有

```
web/app.php (app)
web/cms.php (cms) 
```

对于 cms，如果用户有权限，我会加载一堆额外的模块来编辑页面。当我从应用程序切换到 cms 环境时，它会丢弃从应用程序完成的任何身份验证，反之亦然。

有没有办法在 symfony2 环境中共享身份验证令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:45:22.630

一种方法是使用“[记住我”](http://symfony.com/doc/current/cookbook/security/remember_me.html)功能。

另一种方法（我没有尝试过）是将会话路径设置为所有环境的一个值。如果你所有的配置文件都 import `config.yml`，你可以在那里做：

```
framework:    
    session:
        save_path: /some/path/here 
```

# social-networking - 等效组

> ID：12989332
> 
> 赞同：0
> 
> 时间：2012-10-20T14:20:09.167
> 
> 标签：social-networking, stata

在 Stata 中，我有在一个项目中一起工作的人的这些数据。每一行都是一个项目，有 person_1 到 person_20 列，如果名称在该列中，则表示该人在该行中从事该项目。一个组可以是 1 人、2 人、...、20 人。对于每种可能性，我都有一个二进制变量（是 = 1）：1 组（G1），G2，...，G11。然后我使用此代码进行分组（以 4 人组为例）：

```
project_group = person_1 + "/" + person_2 + "/" + person_3 + "/" + person_4 if G4 == 1
This yields: Tom/Joe/Mike/Sally 
```

我有三个问题：1）有没有更有效的方法来进行分组。例如，代码只查看一个项目（一行），计算那里有多少人（有多少字段不为空），然后创建一个唯一的组名，每个人的名字用“/”分隔。我对我创建的代码很好，但我的数据集的大小会改变，更高效的代码可能是最好的

2）从我的示例中，我如何将 Joe/Tom/Mike/Sa​​lly 或 Sally/Joe/Mike/Time 视为同一组。我希望所有组，无论大小，按字母顺序列出每个人。在我的示例中，无论实际排列如何，列表都是 Joe/Mike/Sa​​lly/Tom。

3）我如何根据第一人称使一个组独一无二（如果他们是项目负责人，他们就是列出的名字）。所以 Joe/Tom/Mike 和 Joe/Mike/Tom 是同一个组，但 Tom/Joe/Mike 和 Mike/Tom/Joe 不是。

感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:23:58.410

> 1）有没有更有效的方法来进行分组。

我不确定我是否理解您当前的安排有什么问题，这看起来很干净且易于阅读。

> 2）从我的示例中，我如何将 Joe/Tom/Mike/Sa​​lly 或 Sally/Joe/Mike/Time 视为同一组。

我假设您在最后一个字符串中指的是汤姆而不是时间。

```
egen team_size = anycount(person_1-person_20), v(1)
gen team_leader = .
if team_size > 0 replace team_leader = person_1
gen team_structure = 0
replace team_structure = team_structure + regexm(project_group,"Joe")
replace team_structure = team_structure + regexm(project_group,"Tom")*10
replace team_structure = team_structure + regexm(project_group,"Mike")*100
replace team_structure = team_structure + regexm(project_group,"Sally")*1000 
```

这`team_structure`是一个 $k$ 长度的二进制文件，用于对 $k$ 成员的团队成员身份进行编码，无论他们在`project_group`字符串中显示的顺序如何。如果您有很多成员，这将是代码昂贵，但很容易创建。

> 3）我如何根据第一人称使一个组独一无二（如果他们是项目负责人，他们就是列出的名字）。所以 Joe/Tom/Mike 和 Joe/Mike/Tom 是同一个组，但 Tom/Joe/Mike 和 Mike/Tom/Joe 不是。

小建议：为每个可能的成员 ( ) 添加一个因子，并将其分配给上面创建的变量`encode`的小数。`team_structure`示例：1011.1 是由 Joe 领导的组 Joe/Mike/Sa​​lly，1011.4 是由 Sally 领导的同一组，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:49:01.263

我重新安排了我的方法，使其更加清晰。你提到你不能重新编码你的变量，但我不确定是否有办法解决这个问题（我认为这里的任何解决方案都可以显式或隐式地重新编码）。当然，您需要始终将“4”替换为“20”。

```
* generate some projects and members
clear
set obs 5
generate int project = _n
generate person_1 = "Tom"
generate person_2 = "Dick" if (_n >= 3)
generate person_3 = "Harry" if (_n >=5)
replace person_1 = "Jane" if inlist(_n, 2, 4)
tempfile orig
save `orig'

* reshape to long
reshape long person_, i(project) string
drop _j
drop if missing(person)
sort project person
egen id = group(person)
drop if missing(id)
reshape wide person, i(project) j(id)

* recode to allow easier group identification
forvalues i = 1/4 {
    levelsof person_`i', local(name) clean
    generate byte d_person_`i' = cond(missing(person_`i'), 0, 1)
    label define d_person_`i'_lbl 1 "`name'" 0 ""
    label values d_person_`i' d_person_`i'_lbl
}

* determine number of workers on project
egen gp_size = rowtotal(d_person_*)

* unique id for each group composition
generate int id = 0
forvalues i = 1/4 {
    local two_i = 2^(`i' - 1)
    replace id = id + d_person_`i' * `two_i'
}

* group members
generate str mbrs = ""
forvalues i = 1/4 {
    local name: label d_person_`i'_lbl 1
    replace mbrs = mbrs + "/" + "`name'" if (d_person_`i' == 1)
}   

* there's always a leading "/" to remove with this approach
replace m = substr(m, 2, .)

* merge back your orig data
merge 1:1 project using `orig', nogenerate replace update 
```

这产生：

```
. list

     +---------------------------------------------------------------------------------------------------------------------------------+
     | project   person_1   person_2   person_3   person_4   d_pers~1   d_pers~2   d_pers~3   d_pers~4   gp_size   id             mbrs |
     |---------------------------------------------------------------------------------------------------------------------------------|
  1\. |       1        Tom                              Tom                                         Tom         1    8              Tom |
  2\. |       2       Jane                  Jane                                        Jane                    1    4             Jane |
  3\. |       3        Tom       Dick                   Tom       Dick                              Tom         2    9         Dick/Tom |
  4\. |       4       Jane       Dick       Jane                  Dick                  Jane                    2    5        Dick/Jane |
  5\. |       5        Tom       Dick      Harry        Tom       Dick      Harry                   Tom         3   11   Dick/Harry/Tom |
     +---------------------------------------------------------------------------------------------------------------------------------+ 
```

# static - 与静态库链接的共享库：重定位错误

> ID：12989334
> 
> 赞同：3
> 
> 时间：2012-10-20T14:20:26.397
> 
> 标签：static, linker, shared-libraries, gfortran, fpic

出于可移植性原因，我想用 gfortran 创建一个共享库，将它与 libgfortran 的静态版本链接。不幸的是，我没有设法适当地链接不同的对象。我已经找到了一些解决类似问题的帖子，但我不知道如何解决这个问题。

我的源文件都是用`-fPIC`标志编译的。当我尝试将对象与标志`-shared`和链接时`-static-libgfortran`，我收到以下错误消息：

```
gfortran -shared -static-libgfortran file1.o file2.o file3.o -o "mynewlib.so"
/usr/bin/ld: ../lib64/libgfortran.a(error.o): relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC
../lib64/libgfortran.a: could not read symbols: Bad value
collect2: ld returned 1 exit status 
```

我正在使用 gfortran 4.6.3，它是在我的服务器上从头开始编译的。安装运行顺利，我没有更改标准配置。我在旧帖子上发现编译器应该配置，但是[GCC 手册](http://gcc.gnu.org/install/configure.html)`--with-pic`中没有提到这个标志。

问题是来自编译器还是来自我试图链接不同对象的方式？知道如何解决这个问题吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:23:10.960

，`libgfortran`当您使用静态版本时，不使用`-fPIC`标志编译（因此它不包含位置独立代码）。

因此，您不能`libfgortran`（静态）链接到您的共享对象。

我建议您正确打包您的库（例如作为`.deb`Debian 或 Ubuntu 的文件）并添加`gfortran`到您的包的依赖项中。

# c - C中结构的大小

> ID：12989342
> 
> 赞同：-2
> 
> 时间：2012-10-20T14:21:29.157
> 
> 标签：c, memory, struct

> **可能重复：**
> [C 中结构的实际大小是多少](https://stackoverflow.com/questions/8983158/what-is-the-actual-size-of-a-struct-in-c)

我用 C 编写了以下程序，我对可执行文件打印的结构的大小有点困惑。这是代码：

```
#include <stdio.h>
#include <stdlib.h>

struct domi1{
   char x;
   int c;
   char y;
};

struct domi2{
   char x;
   char y;
   int c;
};

main(){

 printf("The size of domi1 is: %d\n", sizeof(struct domi1));
 printf("The size of domi2 is: %d\n\n", sizeof(struct domi2));

 system("pause");
} 
```

程序打印 12 作为 domi1 的大小和 8 作为 domi2 的大小。这是为什么？我感谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T14:24:03.597

因为`Packing and byte alignment`
一般的答案是编译器可以自由地在成员之间添加填充以用于对齐目的。或者我们可以这样说，您可能有一个编译器将所有内容对齐到 8 个字节。第一个结构分配的内存为- 4 4 4
第二个结构- 单个 4`char`和 4`int`

# javascript - Javascript HTML值到数组

> ID：12989343
> 
> 赞同：3
> 
> 时间：2012-10-20T14:21:28.957
> 
> 标签：javascript, jquery

`$("#keyword-content").html()`

生产

```
 <p>
    javascript
  </p>
  <p>
    ruby
  </p>
  <p>
    python
  </p> 
```

我怎样才能将其转换为`["javascript", "ruby", python"]`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T14:23:28.757

您可以使用以下`map`方法：

```
var arr = $('#keyword-content p').map(function(){
      return $(this).text()
}).get() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:25:48.670

像这样的东西：

```
var myArray = [];

$("#keyword-content p").each(function(index,item) {
    myArray.push($(item).text());
}); 
```

# ruby-on-rails - 如何设置 rails gem 'rich' 上传文件大小？

> ID：12989344
> 
> 赞同：2
> 
> 时间：2012-10-20T14:21:36.310
> 
> 标签：ruby-on-rails

这颗宝石来自[https://github.com/bastiaanterhorst/rich](https://github.com/bastiaanterhorst/rich)

我使用 rails_admin 设置，但上传文件大小为 15mb（默认）。我在哪里可以将它调整到 100mb？

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T16:05:32.083

这并不容易。Rich 硬编码rich_file.rb 中的 validates_attachment_size 15Mb 值。如果你想让限制更小，你可以添加一个更严格的验证，如下所示：

**应用程序.rb**

```
config.after_initialize do
  Rich::RichFile.validates_attachment_size(:rich_file, :less_than=>3.megabyte, :message => "must be smaller than 3MB")
end 
```

但是，由于您希望减少对上传大小的限制，一个非理想但可行的解决方案是将rich_file.rb 模型复制到您的rails 目录中的apps/models/rich/rich_file.rb 目录中并直接更改代码：

**丰富的文件.rb**

```
validates_attachment_size :rich_file, :less_than=>100.megabyte, :message => "must be smaller than 100MB" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:20:41.133

将其设置为 100MB 可能不是一个好主意，因为服务器很可能会在 1 分钟左右后超时，除非您将其推送到后台作业，或者有某种方法可以保持当前连接处于活动状态。

# java - 日历构造函数 Java toString

> ID：12989346
> 
> 赞同：3
> 
> 时间：2012-10-20T14:21:39.730
> 
> 标签：java, constructor, calendar

我要做的是将日期传递到日历中，以便它将格式化日期以供另一个构造函数使用。这样我以后就可以使用日历提供的功能来使用它。

```
public class Top {
public static void main(String[] args) {
    Something st = new Something(getCalendar(20,10,2012));       
    System.out.println(st.toString());       
    }

public static Calendar getCalendar(int day, int month, int year){
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.YEAR, year);
    cal.set(Calendar.MONTH, month);
    cal.set(Calendar.DAY_OF_MONTH, day);
    return cal;
    }
} 
```

tostring 方法。

```
public String toString(){
    String s = "nDate: " + DateD;
    return s;
} 
```

日期：java.util.GregorianCalendar[time=?,areFieldsSet=false,areAllFieldsSet=true,lenient=true

而不是日期：20/10/2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:23:58.537

假设`DateD`是`Calendar`，它是默认`toString()`实现。你需要打电话`getTime()`才能`date`摆脱它。

来自[Calendar#toString()的 java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#toString%28%29)

> 返回此日历的字符串表示形式。此方法仅用于调试目的，返回字符串的格式可能因实现而异。返回的字符串可能为空但不能为空。

您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)将其转换为`String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:24:56.193

首先，您不需要`toString()`在打印实例时显式使用方法。它将被自动调用。

此外，您应该使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)格式化您`Date`所需的字符串格式： -

```
Calendar cal = Calendar.getInstance();
SimpleDateFormat format = new SimpleDateFormat("yyyy/MM/dd");
String date = format.format(cal.getTime());

System.out.println(date); 
```

**输出**： -

```
2012/10/20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:24:59.917

如果要将日历实例表示的日期打印为字符串，则应使用[`SimpleDateFormatter`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将日期格式化为所需格式，如下所示：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyy");
System.out.println(sdf.format(DateD.getTime()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T14:26:45.050

对我来说似乎工作太多了。

作为用户，我宁愿传递一个日期并明确合同。提供将 String 转换为 Date 的便捷方法：

```
public class Top {

    public static final DateFormat DEFAULT_FORMAT;

    static {
        DEFAULT_FORMAT = new SimpleDateFormat("yyyy-MMM-dd");
        DEFAULT_FORMAT.setLenient(false);
    }

    public static void main(String [] args) {
    }

    public static Date convert(String dateStr) throws ParseException {
        return DEFAULT_FORMAT.parse(dateStr);
    }     

    public static String convert(Date d) {
        return DEFAULT_FORMAT.format(d);
    }   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-04T23:38:10.950

# `LocalDate`

显然，您想要一个没有日期的仅日期值。为此，请使用`LocalDate`类而不是`Calendar`. `Calendar`课程是针对日期加上一天中的时间。此外，`Calendar`它现在是遗留的，在被证明是麻烦、混乱和有缺陷之后被 java.time 类所取代。

只需将所需的年、月和日传递给工厂方法。与`Calendar`.

```
LocalDate ld = LocalDate.of( 2012 , 10 , 20 ); 
```

或者，传递一个月的常数。

```
LocalDate ld = LocalDate.of( 2012 , Month.OCTOBER , 20 ); 
```

java.time 类倾向于使用静态工厂方法而不是带有`new`.

# 字符串

要生成标准 ISO 8601 格式的字符串，请调用`toString`

```
String output = ld.toString() ; 
```

> 2012-10-20

对于其他格式，请在 Stack Overflow 中搜索`DateTimeFormatter`. 例如：

```
DateTimeFormatter f = DateTimeFormatter.ofPattern( "dd/MM/uuuu" );
String output = ld.format( f ); 
```

> 20/10/2012

# php - 为什么 MongoID 会生成不同的值？

> ID：12989349
> 
> 赞同：1
> 
> 时间：2012-10-20T14:21:50.930
> 
> 标签：php, mongodb, doctrine, doctrine-odm

我有一个带有用户表的关系数据库，并且有用户 ID 等。但是评论系统存储在 Mongo 和

```
$author = new Author();
$userID = 1;
$author->setId( new \MongoId( $userID ) ); <--- different ID generated everytime

$discussion = new Discussion();
             $discussion->setCreatedAt(new \DateTime());
             $discussion->setAuthor($author); 
```

生成的 ID 每次都不同，所以我有 5082a694253b4a1201000000、5082a55e253b4a1f05000000 之类的值。

如何关联回用户 ID，例如用户 ID 1？还是应该忘记整个新的 MongoID 业务，只将用户 ID 存储在文档中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:28:15.020

从[文档](http://www.php.net/manual/en/mongoid.construct.php)中：

> 公共 MongoId::__construct ([ string $id = NULL ] )
> 
> $id：用作 id 的字符串。必须是 24 个十六进制字符。如果将无效字符串传递给此构造函数，构造函数将忽略它并创建一个新的 id 值。

所以这就是为什么，即使你给 MongoId 一个 id，它也不适合**24 个十六进制字符**。所以 MongoId 忽略它并生成一个新的。

我认为您只需要按原样定义 UserId ：

```
$author = new Author();
$author->setUserId($userID); 
```

# android - 安卓导航

> ID：12989350
> 
> 赞同：3
> 
> 时间：2012-10-20T14:21:54.843
> 
> 标签：android, android-intent

学习Android开发，有两个关于导航的问题。我的应用程序仅在平板电脑上针对最近的 android 平台（API 级别 Honey Comb）。

1.  何时在 ActionBar 中使用选项卡式导航

    选项卡式导航在片段之间切换并限制在当前活动中。我看到 Honeycomb Gallery 示例，它用于在 Ballons 等之间切换。不过，不确定何时最好使用选项卡式导航或使用单独的活动。

2.  在活动之间导航的最常见方式是什么。到目前为止，我看到的示例中，我还没有看到带有允许在活动之间导航的菜单的示例。这样做的常见方法是什么。尤其是后 HoneyComb，最简单（如果可能通过 xml 标记）实现活动之间导航的方式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:37:30.150

我是根据我的 Web 应用程序开发经验来解决这个问题的。

Android doc 非常详细地解释了用于导航的模式。尤其，

[http://developer.android.com/training/design-navigation/index.html](http://developer.android.com/training/design-navigation/index.html) http://developer.android.com/training/design-navigation/descendant-lateral.html

# php - Hotmail 忽略返回路径标头

> ID：12989355
> 
> 赞同：0
> 
> 时间：2012-10-20T14:22:45.247
> 
> 标签：php, email, smtp, hotmail, rfc822

我在一个小型电子邮件列表管理器上使用[这个 php 类](http://www.phpclasses.org/package/14-PHP-Sends-e-mail-messages-via-SMTP-protocol.html)，我正在使用 hotmail 电子邮件和 smtp.live.com 来发送电子邮件。它工作正常，但我收到了一些退回的电子邮件，所以我想在不同的地址接收它们，这样我更容易管理它们。我曾尝试使用 Return-Path 标头，但 hotmail 似乎忽略了它，仍然将退回邮件发送到“发件人”地址。我还注意到该类将“NOTIFY=NEVER ORCPT=rfc822”发送到“禁用”dsn，但 hotmail 似乎也忽略了它。

php 类打印的 SMTP 事务如下所示：

```
Resolving SMTP server domain "smtp.live.com"...
Connecting to host address "65.55.96.11" port 587...
Connected to SMTP server "smtp.live.com".
S 220 BLU0-SMTP333.blu0.hotmail.com Microsoft ESMTP MAIL Service, Version: 6.0.3790.4675 ready at Sat, 20 Oct 2012 06:51:46 -0700
C EHLO 192.168.1.1
S 250-BLU0-SMTP333.blu0.hotmail.com Hello [1.2.3.4]
S 250-TURN
S 250-SIZE 44242340
S 250-ETRN
S 250-PIPELINING
S 250-DSN
S 250-ENHANCEDSTATUSCODES
S 250-8bitmime
S 250-BINARYMIME
S 250-CHUNKING
S 250-VRFY
S 250-TLS
S 250-STARTTLS
S 250 OK
C STARTTLS
S 220 2.0.0 SMTP server ready
Starting TLS cryptograpic protocol
TLS started
C EHLO 192.168.1.1
S 250-BLU0-SMTP366.blu0.hotmail.com Hello [1.2.3.4]
S 250-TURN
S 250-SIZE 44242340
S 250-ETRN
S 250-PIPELINING
S 250-DSN
S 250-ENHANCEDSTATUSCODES
S 250-8bitmime
S 250-BINARYMIME
S 250-CHUNKING
S 250-VRFY
S 250-AUTH LOGIN PLAIN
S 250 OK
C AUTH LOGIN
S 334 DXdlcm3hfW36
C ZW1haWwxQGhvdG1haWwuY29t
S 334 UDCzd5dvdmQe
C MTIzNDU2
S 235 2.7.0 Authentication succeeded
C MAIL FROM:<email19@hotmail.com>
C RCPT TO:<email-that-bounces@hotmail.com> NOTIFY=NEVER ORCPT=rfc822;email-that-bounces
C DATA
S 250 2.1.0 email1@hotmail.com....Sender OK
S 250 2.1.5 email-that-bounces@hotmail.com
S 354 Start mail input; end with <CRLF>.<CRLF>
C From: email1@hotmail.com
To: email-that-bounces@hotmail.com
Return-Path: <otheremail@myserver.com>
Content-Type: multipart/alternative; boundary="fd9c131c7e7f727fd34567b8a131218a52114gha"
Subject: subject
Date: Sat, 20 Oct 2012 15:51:45 CEST
MIME-Version: 1.0

C --fd9c131c7e7f727fd34567b8a131218a52114gha
Content-Type: text/plain; charset="ISO-8859-1
Content-Transfer-Encoding: 7bit

email message

--fd9c131c7e7f727fd34567b8a131218a52114gha
Content-Type: text/html; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

email message

--aa9c111c7e7f727bf74367b8a131918a36314dba--
C
.
S 250 2.6.0 <BLU0-SMTP43555fdccc0ecf4@BLU0-SMTP333.blu0.hotmail.com> Queued mail for delivery
C QUIT
S 221 2.0.0 BLU0-SMTP333.blu0.hotmail.com Service closing transmission channel
Disconnected. 
```

这是我发送电子邮件的方式：

```
$smtp->SendMessage(
    $from, array( $to ),

    array(
        "From: $from",
        "To: $to",
        "Return-Path: <otheremail@myserver.com>",
        'Content-Type: multipart/alternative;   boundary="'.$boundary.'"',
        "Subject: $subject",
        "Date: ".strftime("%a, %d %b %Y %H:%M:%S %Z"),
        "MIME-Version: 1.0"
), "$body"); 
```

如果我登录 hotmail 并检查“已发送”文件夹，则发送的电子邮件不包含返回路径标题。

**我发送的标题是否有问题或 hotmail 只是不支持返回路径**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:28:41.180

Return-Path 实际上不是电子邮件的一部分，它是 SMTP 信封的一部分。这意味着您不能将其添加为任何其他邮件标题。

Return-Path 是从 SMTP 事务派生的。更具体地说，这是设置 Return-Path 的位置：

```
MAIL FROM:<email19@hotmail.com> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:42:27.560

我看到您没有`\r\n`在代码中用作行尾。您应该尝试添加它并重新检查。由于缺少这些字符，因此报告了很多报告和奇怪的行为

Hotmail确实支持return-path，有几次我忘记了那个标题和测试邮件最终在垃圾文件夹中，我一添加它，邮件就直接进入收件箱

# c++ - c2512 错误：没有合适的默认构造函数可用

> ID：12989357
> 
> 赞同：3
> 
> 时间：2012-10-20T14:22:46.760
> 
> 标签：c++, error-handling, constructor, compiler-errors

即使我声明了构造函数，我也遇到了“c2512”错误。我的代码是这样的：在我的“first.h”文件中，我将其声明为：

```
class myClass
{
public:
    tmpM ( cv::Mat& _model );
} 
```

然后在我的“first.cpp”中我做了：

```
#include "first.h"
myClass::tmpM ( cv::Mat& _model )
{
    ...
} 
```

然后我将这个“first.h”包含在我的“second.h”中，然后将这个“second.h”包含在我的“third.h”中，并在我的“third.cpp”中调用这个类，如下所示：

```
cv::Mat myMat ( height, width, CV_8UC3 );
tmpM aM ( myMat ); 
```

但这给出了一个 c2512 错误，说

> > 没有合适的默认构造函数可用

我确实对此进行了搜索，发现我应该自己构建一个默认构造函数，并且我尝试在我的“first.h”中这样做：

```
class myClass
{
public:
    tmpM ( cv::Mat& _model) {};
} 
```

然后得到一个错误说：

> > 函数“myClass::tmpM”已经有一个主体

我尝试了其他几种方法来做到这一点，但仍然无法解决。我认为我不需要在这里构建默认构造函数，但仍然对此感到困扰。有人可以帮助我吗？

**编辑**

好的，根据您的建议，我将其更改为以下形式：

```
class myClass
{
public:
myClass(cv::Mat& _model ) : tmpM (_model)
{
}
private:
cv::Mat& tmpM;
}; 
```

然后在我的“first.cpp”中，我收到一条错误消息

> > 声明不兼容

这怎么可能解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:25:05.473

这里的问题似乎是您将类命名为不同于您命名构造函数的名称。它们必须具有相同的名称。另外，我假设您希望对您传入的模型的引用由对象持有。如果要将其保留为引用，则必须在构造函数初始化程序列表中对其进行初始化。

你要：

```
class myClass
{
public:
    myClass(cv::Mat& _model ) : tmpM (_model)
    {
    }
private:
    cv::Mat& tmpM;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T14:24:51.750

它应该是：

```
class myClass
{
public:
    myClass(cv::Mat& _model ) : tmpM (_model)
    {
    }
}; 
```

您的版本声明了一个名为 的函数（好吧，尝试这样做，因为它是无效的语法 - 缺少返回类型）`tmpM`，它不会初始化成员。

你必须按上面那样做，因为该类型的成员没有默认构造函数，所以你必须在构造函数的初始化列表中对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:25:52.897

默认构造函数是

```
class myClass {
public:
  myClass();
} 
```

# html - css 中的格式化框在 jsfiddle 中有效，但在 Chrome 中不独立

> ID：12989359
> 
> 赞同：0
> 
> 时间：2012-10-20T14:22:59.047
> 
> 标签：html, css

我做了一个需要以各种不同方式格式化的弹出窗口： [点击这里查看](http://jsfiddle.net/HhZX8/)

它在 jsfiddle.net 中显示正常，但是当您将代码放在文件中并通过 chrome 查看它时，它不起作用，因为它`popup_item`的大小与`popup_heading`.

我的问题是我这样做是对的还是应该以不同的方式解决这个问题？

为什么它在 jsfiddle.net 中显示正常但在 chrome 中显示不正常，我正在使用 chrome 查看 jsfiddle.net，它不应该显示相同吗？

```
.popup_box table
{width:100%;} 
```

这是 jsfiddle 中发布的代码：

CSS：

```
.popup_box table
{
    width:100%;
}

.popup_overlay
{
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    position: absolute;
    background-image: url(http://localhost/justin/CenterNavigator/images/overlay.png);
}

.popup_frame
{
    width: 100%;
    position: fixed;
    top: 30%;
}

.popup_box
{
    width:50%;
    margin: auto;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    border:2px solid #000000;
    background-color:#999;
}

.popup_title
{
    border-radius: 20px 20px 0px 0px;
    background-color:#E3A20B;
    width: 98%;
    font-size: 270%;
    font-weight: bold;
    text-align: center;
    text-transform: uppercase;
    padding: 1%;
}

.popup_heading
{
    width: 28%;
    float: left;
    font-weight: bold;
    font-size: 170%;
    text-align: right;
    padding: 1%;
}

.popup_item
{
    width: 68%;
    float: left;
    text-align: left;
    font-size: 170%;
    padding: 1%;
}

.popup_mesage
{
    width: 98%;
    float: left;
    text-align: left;
    font-size: 170%;
    padding: 1%;
}

.popup_1button
{
    width: 98%;
    float: left;
    text-align: center;
    padding: 1%;
}

.popup_2button
{
    width: 48%;
    float: left;
    text-align: center;
    padding: 1%;
}

.popup_3button
{
    width: 31.33333%;
    float: left;
    text-align: center;
    padding: 1%;
}

.popup_4button
{
    width: 23%;
    float: left;
    text-align: center;
    padding: 1%;
} 
```

标记：​</p>

```
<html>
<head>
<meta content="text/html; charset=ISO-8859-1"
http-equiv="content-type">
<title>layout</title>
</head>
    <body>
        <div class="popup_overlay">
            <div class="popup_frame">
                <div class="popup_box">
                    <table><tbody><tr><td>
                        <div class="popup_title">title</div>
                        <div class="popup_heading">heading:</div>
                        <div class="popup_item">data</div>
                        <div class="popup_heading">heading:</div>
                        <div class="popup_item">data</div>
                        <div class="popup_4button">button1</div>
                        <div class="popup_4button">button2</div>
                        <div class="popup_4button">button3</div>
                        <div class="popup_4button">button4</div>
                    </td></tr></tbody></table>
                </div>
            </div>
        </div>
    </body>
</html>
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:36:19.607

干得好

```
<div class="popup_overlay">
        <div class="popup_frame">
            <div class="popup_box">
                <div class="popup_title">title</div>
                <div class="popup_heading">heading:</div>
                <div class="popup_data">data</div>
                <div style="clear:both"></div>
                <div class="popup_heading">heading:</div>
                <div class="popup_data">data</div>
                <div style="clear:both"></div>
                <div class="popup_button">button1</div>
                <div class="popup_button">button2</div>
                <div class="popup_button">button3</div>
                <div style="clear:both"></div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:33:59.017

你的代码写得很没有语义。我把它作为一个整体[重写了。](http://jsfiddle.net/BramVanroy/HhZX8/1/)

```
<div class="popup_box">
    <div class="popup_title">title</div>
    <div class="popup_content">
        <div class="popup_header">
            <span class="popup_heading">heading:</span>
            <span class="popup_item">data</span>
        </div>
        <div class="popup_header">
            <span class="popup_heading">heading:</span>
            <span class="popup_item">data</span>
        </div>
        <div class="popup_buttons">
            <div class="popup_4button">button1</div>
            <div class="popup_4button">button2</div>
            <div class="popup_4button">button3</div>
            <div class="popup_4button">button4</div>
        </div>
    </div>
</div>
​ 
```

很多 div，我知道，但它仍然比你写的 imo 更好。不需要表格，你需要更少的 CSS：

```
.popup_overlay {
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    position: fixed;
    background: rgba(0,0,0,0.12);
}

.popup_box {
    width:50%;
    margin: 50px auto;
    border-radius: 20px;
    border: 5px solid #333;
    background-color: #3D668F;
    box-shadow: 0 5px 20px rgba(0,0,0,0.32);
    overflow: hidden;
}

.popup_title {
    width: 98%;
    font-size: 270%;
    font-weight: bold;
    text-align: center;
    text-transform: uppercase;
    color: white;
    padding: 1%;
}

.popup_heading, .popup_item  {
    font-weight: bold;
    font-size: 170%;
    padding: 1%;
}

.popup_item {font-weight: normal;}

.popup_4button {
    width: 23%;
    float: left;
    text-align: center;
    padding: 1%;
}
​ 
```

# android - 从子活动中查找调用者活动

> ID：12989360
> 
> 赞同：0
> 
> 时间：2012-10-20T14:23:09.637
> 
> 标签：android, android-activity

我有两个活动，一个父活动和一个子活动，但子活动也由另一个活动触发。现在，我只想在从该父活动触发子活动时将此子活动的结果返回给父活动。

有什么方法可以让孩子找到调用者活动（以便它只为该调用者活动进行一些计算）。有什么办法可以避免这种情况：

```
intent.putExtra("caller", "MainActivity");
startActivity(intent); 
```

我要这个：

```
if (ParentActivity)
{  //do something and finish() }
if (AnotherActivity)
{  //do something more and finish() } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:28:49.540

是的，您可以通过使用您选择作为处理结果的父活动的[startActivityForResult()来做到这一点。](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

> 启动一项您希望在完成后获得结果的活动。当此活动退出时，您的 onActivityResult() 方法将使用给定的 requestCode 调用。使用否定的 requestCode 与调用 startActivity(Intent) 相同（该活动不作为子活动启动）。

基本上在 Parent 活动中，您可以执行以下操作：

```
Intent intent = ...
startActivityForResult(intent, SOME_UNIQUE_INT_CODE); 
```

然后你必须定义一个方法来处理结果，即[onActivityResult()](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)

```
protected void onActivityResult(int requestCode, int resultCode,
             Intent data) {
         if (requestCode == SOME_UNIQUE_INT_CODE) {
              // do something
         }
     } 
```

在子活动中，您可以使用[setResult()](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)设置结果。此方法有两种变体，其中一种使您可以传入一些数据。

请阅读文档以了解有关如何使用它的更多信息。

编辑：

您可以使用：来自被调用活动的[getCallingActivity()](http://developer.android.com/reference/android/app/Activity.html#getCallingActivity%28%29)来查找哪个是父活动，但只有在您使用 startActivityForResult 时才有效。

> 返回调用此活动的活动的名称。这就是将 setResult() 中的数据发送给谁。您可以使用此信息来验证是否允许接收者接收数据。
> 
> 注意：如果调用活动不期望结果（即它没有使用包含请求代码的 startActivityForResult(Intent, int) 形式），那么调用包将为空。

# wpf - 我可以阻止 WPF 工具提示从 ToolTipOpening 事件处理程序内部显示吗？

> ID：12989362
> 
> 赞同：0
> 
> 时间：2012-10-20T14:23:16.137
> 
> 标签：wpf, tooltip, visibility

我有一个包含许多形状的画布，我希望它们中的每一个都显示一个字符串工具提示。为了节省一些内存，我想在工具提示打开时设置 ToolTip 值，所以我最初将 ToolTip 设置为每个形状上的空字符串，然后在它变得可见之前设置它的实际值（在 ToolTipOpening事件处理程序）。但是，有时我在 ToolTipOpening 事件处理程序中设置的 ToolTip 是一个空字符串，我不希望 ToolTip 在这些情况下出现。

我可以在 ToolTipOpening 事件处理程序中做些什么来隐藏它吗？或者也许是一种简单的方法来了解鼠标指针何时停留在形状上一段时间（以便以编程方式显示工具提示）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:35:56.347

好的。我想我明白了。我使用 ToolTip 对象来设置每个形状的 ToolTip 属性（而不是使用字符串），然后我可以编写：

```
(shape.ToolTip as ToolTip).Visibility = Visibility.Hidden; 
```

到目前为止它似乎工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T12:49:21.103

我正在处理同样的问题。最佳解决方案是将 ToolTipEventArgs 事件数据标记为已处理。这将阻止工具提示出现。

来源：[https ://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tooltipopening(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tooltipopening(v=vs.110).aspx)

```
public void CellToolTipOpening(object sender, ToolTipEventArgs args)
{
    var cell = args.Source as CellValuePresenter;
    if (cell == null)
        return;

    ...

    if (!string.IsNullOrWhiteSpace(ViewModel.Tooltip))
    {
        ToolTipService.SetToolTip(cell, ViewModel.Tooltip);
    }
    else
    {
        args.Handled = true;
    }
} 
```

# http - Netty 4.x 客户端文件上传

> ID：12989366
> 
> 赞同：1
> 
> 时间：2012-10-20T14:23:33.880
> 
> 标签：http, netty

我围绕新的 netty 4.0 库编写了一个 Http 客户端。我似乎无法找到发布请求应在何处/如何包含文件。我现在发现的一个用例是将照片上传到第三方 API。

DefaultHttpRequest 类为要传入的缓冲区设置了内容，但是是否有任何实用程序可以对 post 参数（inc 文件字段）进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:48:21.593

HTTP Post 支持还没有移植到 netty 4。它在 to-do-list atm..

# javascript - 用于 JS 表单的 imacros javascript 编码

> ID：12989368
> 
> 赞同：1
> 
> 时间：2012-10-20T14:23:43.253
> 
> 标签：javascript, imacros

此致 ，

我已经使用 imacros 两个星期了，我喜欢它，我的问题是，我有这个网站来自[阿里巴巴](http://message.alibaba.com/msgsend/contact.htm?action=contact_action&domain=2&id=213586652)

我可以自动化除“消息”之外的所有表单和复选框，

写了很多JS代码，尝试用id，class写

但没有任何效果

我已经测试了所有的演示，他们工作

我使用 windows xp sp2，我的浏览器 firefox 13.0.1，我的 imacro 插件 7.5.0.4

你能帮帮我吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:04:14.390

该消息`input`框实际上是隐藏的（我不认为 Imacros 可以更改 DOM 元素的属性；尝试在内部使用 javascript`EVAL`或更好地制作 Greasemonkey 脚本）。正如我在那个消息框中看到的那样，你实际上是在一个重叠的 Iframe 中写的`textarea`。您可以在 Imacros 中访问它，但对：`FRAME F=3`.

# c# - 列出我电脑上的所有文件并按大小排序

> ID：12989373
> 
> 赞同：5
> 
> 时间：2012-10-20T14:23:58.927
> 
> 标签：c#, .net, sorting, directory, filesize

最近我遇到了一个问题，我的硬盘驱动器变得令人讨厌地满了，但是在检查了我的个人文件并删除/移动了所有超大的视频文件之后，我仍然有相当少量的可用 ROM。所以我让我的程序员大脑开始工作，并决定不要自己仔细检查每个文件夹和子文件夹，而是使用 Windows 的右键单击 + 属性功能来查看文件有多大以及是否值得保留，我可以编写一个简单的代码来搜索我计算机上的每个文件，将其按完整路径名放入列表中，然后将其文件大小放在它旁边，然后按文件大小从大到小排序。所以我跳到网上，开始做研究，就在那时，一切都为我着迷。一世' 我发现了大量适用于他们指定任务的代码片段，但每当我尝试自己使用它们时，我都会遇到大量的构建错误。也就是说，到目前为止，我发现的最有希望的是：

```
const string dir = "C:\\";
string[] fns = Directory.GetFiles(dir);
var Sort = from fn in fns
           orderby new FileInfo(fn).Length descending
           select fn;
foreach (string n in Sort)
    Console.WriteLine(n); 
```

不幸的是，这不会触及任何子目录。我已经查看了如何从子目录中获取文件，但是尝试将这些代码片段与这个集成在一起证明比我想象的要麻烦得多。在隧道尽头看到光的罕见情况下，我的程序会触及一个明显受到管理员特权保护的目录（我是唯一的用户，因此是我的计算机的管理员）并像黑猩猩一样抛出错误动物园扔掉粪便。

所以总的来说，我正在寻求帮助的是： - 搜索我计算机上每个文件的程序（我假设从“C：/”驱动器开始是我可以访问所有内容的地方） - 获取每个文件，它的大小, 以及该文件的路径并将其扔到列表/数组/任何内容上 - 按文件大小从大到小对其进行排序 - 将此列表放入 .txt 文件中

最后一部分我实际上不需要帮助，因为我对 Streamwriter 类相当熟悉。如果我的文件/路径/大小的列表/数组/等都符合相同的模式并且可以转换为字符串，我什至可以使用准简单的解析算法按文件大小排序。因此，大约 90.23% 的问题只是获取所有文件，进入或忽略并继续受管理员保护的文件夹（我认为忽略它们是最好的，因为我非常怀疑受保护文件夹中的任何内容都应该被删除。永远。）获取所有这些文件的路径和大小，并组织它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T14:27:51.357

尝试另一个 GetFiles 重载：

```
string[] fns = Directory.GetFiles(dir, "*", SearchOption.AllDirectories); 
```

如果您使用 EnumerateFiles，它也会更有效：

```
const string dir = "C:\\";
var Sort = Directory.EnumerateFiles(dir, "*", SearchOption.AllDirectories)
                    .OrderByDescending(f => new FileInfo(f).Length);
foreach (string n in Sort)
{
        Console.WriteLine(n);
} 
```

为避免异常：

```
const string dir = "C:\\";
var fileInfos = new List<FileInfo>();
GetFiles(new DirectoryInfo(dir), fileInfos);
fileInfos.Sort((x, y) => y.Length.CompareTo(x.Length));
foreach (var f in fileInfos)
{
    Console.WriteLine(f.FullName);
}

private static void GetFiles(DirectoryInfo dirInfo, List<FileInfo> files)
{
    // get all not-system subdirectories
    var subDirectories = dirInfo.EnumerateDirectories()
        .Where(d => (d.Attributes & FileAttributes.System) == 0);
    foreach (DirectoryInfo subdirInfo in subDirectories)
    {
        GetFiles(subdirInfo, files);
    }
    // ok, now we added files from all subdirectories
    // so add non-system files from this directory
    var filesInCurrentDirectory = dirInfo.EnumerateFiles()
        .Where(f => (f.Attributes & FileAttributes.System) == 0);
    files.AddRange(filesInCurrentDirectory);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T14:31:23.520

它必须在c#中吗？从命令提示符试试这个： `dir c: /B /O-S /S /4 /a-d > fileList.txt`

该`dir`命令列出文件，/B 删除一堆信息，/OS 按顺序显示文件（按 (S)Size (-) 降序并通过 /S 导致的所有子目录。/4 位仅设置年份如果您有一些上世纪的文件，则将文件保存到四位数，并且 /ad 会清除目录列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T19:39:25.050

> 所以我让我的程序员大脑开始工作，并决定不是自己仔细检查每个文件夹和 > 子文件夹，而是使用 Windows 的右键单击 + 属性功能来查看文件有多大以及是否值得保留，我可以编写一个简单的代码来搜索我 > 计算机上的每个文件，将其按完整路径名放入列表中，然后将其文件大小放在它旁边，然后按文件大小从大到小排序。

While this is a fun programming exercise, if your goal is to solve the problem at hand, there is a nice utility that will do this for you: [WinDirStat](http://windirstat.info/)

# javascript - 将鼠标悬停在页脚中的图像上，文本出现在主页面中

> ID：12989387
> 
> 赞同：1
> 
> 时间：2012-10-20T14:25:06.500
> 
> 标签：javascript, jquery, html, hover

我的页脚 div 中有 4 个按钮，当用户将鼠标悬停在按钮上时，需要在页脚上方的 mainsection div 中显示一些文本。文本需要对每个按钮的功能进行简要说明。

我该如何实现这一目标？

谢谢！

这是我的代码的一些示例

```
<div id='header'></div>
<div id='mainsection'>

<!----WHERE TEXT NEEDS TO APPEAR---->

</div>
<div id='footer'>
    <ul id='buttonHolder'>

       <li class="buttons"><img src="Images/Buttons/Dj-button.png" alt="DJ button" width="135" height="88"></li>
            <li class="buttons"><img src="Images/Buttons/VHS-tape---button.png" alt="VHS tape" width="128" height="88"></li>
            <li class="buttons"><img src="Images/Buttons/Camera---button.png" alt="Camera" width="130" height="88"></li>
            <li class="buttons"><img src="Images/Buttons/Film-strip---button.png" alt="Film strip" width="104" height="88"></li>

    </ul>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:28:16.413

您可以为`mouseenter`and`mouseleave`事件绑定一些处理程序。输入区域时，将主要区域的文本设置为按钮上的 alt 值。当您离开该区域时，请擦除主要区域的文本：

```
var main = $("#mainsection");
$(".buttons img").on({
    mouseenter: function(){ main.text( this.alt ) },
    mouseleave: function(){ main.text( '' ) }
}); 
```

小提琴：http: [//jsfiddle.net/ueanr/1/](http://jsfiddle.net/ueanr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:51:08.117

我使用此代码使事情正常进行。

```
 $(".button").hover(function(){
    $('.buttonContent').show();
},function(){
    $('.buttonContent').hide();
}); 
```

# java - 使用 MenuBar 切换面板

> ID：12989388
> 
> 赞同：1
> 
> 时间：2012-10-20T14:25:14.100
> 
> 标签：java, swing, awt, jpanel, mixing

我编写了一些代码，旨在创建一个表并在该表中显示剪贴板数据（将从 excel 复制）。

所以我在菜单栏中有一个菜单项“从 Excel 导入”，单击该菜单项将获取剪贴板中的任何 excel 数据并在下面的面板中显示一个表格。

另外，我已经编写了它，以便能够根据任何未来的菜单按钮切换面板（显示表格的面板），这可能导致下面显示完全不同的面板。

所以我有这个`DisplayExcelData`类实现了一个`MainPage`接口（它包含一个 init 方法）。单击菜单项时，它会在扩展菜单栏类中触发一个动作事件，该事件向内容窗格`MainPage`提供与该菜单项关联的界面（在这种情况下`DisplayExcelData`，当单击“从 Excel 导入”时将其提供给内容窗格），然后init 被调用并将其添加到内容窗格中。

当程序启动并且没有选择任何内容时，它默认为一个`InitialScreen`类。

DisplayExcelData 类如下所示：

```
public class DisplayExcelData implements MainPageIF
{
    private ExcelTableModel tm = null;
    private Table table = new Table();
    private JPanel thisPanel = new Panel();

    public DisplayExcelData () 
    {
        super();
        thisPanel.setLayout(new BorderLayout());
    }

    @Override
    public void init()
    {
                //the test data I have been using is only 2 columns, so I'm just using
                //these as test columns at the moment
        tm = new ExcelTableModel("First, Second");
        table.setModel(tm);

        thisPanel.add(table, BorderLayout.CENTER);
    }

    @Override
    public JPanel getPanel()
    {
        return thisPanel;
    }
} 
```

ExcelTableModel 获取剪贴板中的数据并将其转换为 TableModel

然后，在 contentPane 中，我有

```
public MainFrame()
{
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(50, 50, 800, 500);
    compInit();
}

private void compInit() 
{
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    contentPane.setBackground(new Color(0,0,0));
    setContentPane(contentPane);

            //mf is the menu bar which is a class variable
    MenuBar menuBar = mf.getMenuBar();

    setPanelFromMenuBar();

    setMenuBar(menuBar);
}

private void setPanelFromMenuBar()
{
    MainPageIF page = mf.getPage();
    if (page == null)
    {
        page = new InitialScreen();
    }
    page.init();
            //mainPanel is a class variable
    mainPanel = page.getPanel();

    mainPanel.setVisible(true);
    contentPane.add(mainPanel, BorderLayout.CENTER);
}

@Override
public void actionPerformed(ActionEvent evt)
{
    Object source = evt.getSource();
    if (source instanceof MenuItem)
    {
        contentPane.removeAll();
        setPanelFromMenuBar();
        getContentPane().doLayout();
            update(getGraphics());
    }
} 
```

如果我更改代码，所以我以`DisplayExcelData`类作为初始屏幕启动程序，它可以工作......它会在剪贴板中获取 excel 数据并将其显示在屏幕上的表格中......但是，我坚持认为当我单击时显示此表`MenuItem`，它只显示一个空白屏幕。当我调试并检查其中的内容`mainPanel`时...它包含正确`TableModel`的Excel数据，包含在...中`JTable`...但它不会显示...我正在扯掉我的头发为什么...

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:08:41.813

*   我不建议扩展`JFrame`课程
*   使用[匿名内部类监听器](http://www.leepoint.net/notes-java/GUI/events/anonymous_listener.html)而不是实现`ActionListener`（除非`ActionListener`其他类必须可以访问）

至于你的实际问题：

删除组件并添加新组件后，尝试在您的实例上调用`revalidate()`和：`repaint()``JFrame`

```
 contentPane.removeAll();//remove
 setPanelFromMenuBar();//add

 revalidate();//refresh ui and layout
 repaint(); 
```

或者看看[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，它允许在`JComponent`s 之间翻转，比如`JPanel`s via[`CardLayout#show(...)`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:18:24.560

我遇到的问题是我已经实现了 TableModel，但没有触发任何表更改方法。我编写了这些方法并在最后重新验证了表格并让它再次工作。感谢你的帮助。

# haskell - 依赖类型的 ghc-7.6 类实例

> ID：12989389
> 
> 赞同：7
> 
> 时间：2012-10-20T14:25:13.943
> 
> 标签：haskell, ghc, dependent-type

异构列表是 ghc 7.6 的新依赖类型工具的示例之一：

```
data HList :: [*] -> * where
  HNil :: HList '[]
  HCons:: a -> HList t -> HList (a ': t) 
```

示例列表“li”编译良好：

```
li  = HCons "Int: " (HCons 234 (HCons "Integer: " (HCons 129877645 HNil))) 
```

显然我们希望 HList 在 Show 类中，但我只能提出以下使用相互递归约束（超类）的工作类实例：

```
instance Show (HList '[]) where 
  show HNil = "[]"

instance (Show a, Show' (HList t)) => Show (HList (a ': t)) where
  show l  = "[" ++ show' l ++ "]"

class Show' a where
  show' :: a -> String

instance Show' (HList '[]) where
  show' HNil = ""

instance (Show a, Show' (HList t)) => Show' (HList (a ': t)) where
  show' (HCons h l) = case l of
    HNil      -> show h
    HCons _ _ -> show h ++ ", " ++ (show' l) 
```

代码编译良好，li 显示正确。需要的编译标志是：

```
{-# LANGUAGE DataKinds, TypeOperators, KindSignatures, 
FlexibleContexts, GADTs, FlexibleInstances #-} 
```

我尝试了以下更直接定义的许多变体，但如果我无法理解 ghc 错误消息，它就无法编译：

```
instance Show (HList '[]) where 
  show HNil = "[]"

instance (Show a, Show (HList t)) => Show (HList (a ': t)) where
  show l  = "[" ++ (show' l) ++ "]" where  
    show' (HCons h s) = case s of
      HNil      -> show h
      HCons _ _ -> show h ++ ", " ++ (show' s) 
```

一些 Haskell / ghc 专家可能会理解为什么这不起作用，我很乐意听到原因。

谢谢

汉斯·彼得

* * *

谢谢你，hammar，你的两个很好的工作示例，改进了我的第一个示例。

但我仍然不明白为什么我的第二个例子不起作用。您说“... show' 只知道如何显示当前元素类型，而不知道如何显示其余元素类型。” 但是该评论是否也不适用于以下（工作）代码：

```
instance Show (HList '[]) where show HNil = "" 

instance (Show a, Show (HList t)) => Show (HList (a ': t)) where 
   show (HCons h t) = case t of
      HNil      -> show h 
      HCons _ _ -> show h ++ ", " ++ (show t) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T18:05:28.243

正如 Nathan 在评论中所说，`show'`只知道如何显示当前元素类型而不知道剩余的元素类型。

与您的第一个示例一样，我们可以通过为 制作一个新的类型类来解决此问题`show'`，尽管您只能使用一个`Show`实例：

```
-- Specializing show' to HLists avoids needing a Show' (HList ts) constraint
-- here, which would require UndecidableInstances.
instance (Show' ts) => Show (HList ts) where
  show xs = "[" ++ show' xs ++ "]"

class Show' ts where
  show' :: HList ts -> String

instance Show' '[] where
  show' HNil = ""

instance (Show a, Show' ts) => Show' (a ': ts) where
  show' (HCons a s) = case s of
    HNil     -> show a
    HCons {} -> show a ++ ", " ++ show' s 
```

`Show`获取所有必要约束的另一种更骇人听闻的方法`show'`是使用`ConstraintKinds`直接构建所有必要约束的列表。

```
-- In addition to the extensions in the original code:
{-# LANGUAGE TypeFamilies, ConstraintKinds, UndecidableInstances #-}
import GHC.Exts

-- ShowTypes [a, b, c, ...] = (Show a, Show b, Show c, ...)
type family ShowTypes (a :: [*]) :: Constraint
type instance ShowTypes '[] = ()
type instance ShowTypes (a ': t) = (Show a, ShowTypes t) 

instance ShowTypes ts => Show (HList ts) where
  show xs = "[" ++ show' xs ++ "]"
    where
      show' :: ShowTypes ts => HList ts -> String
      show' HNil = ""
      show' (HCons h s) = case s of
        HNil     -> show h
        HCons {} -> show h ++ ", " ++ show' s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T05:51:33.633

感谢 hammar 的第二个解决方案，我现在可以提供一种更通用的方法，它适用于一般类（但我想他无论如何都考虑到了这一点）：

```
type family ConstrainedTypes (a :: [*]) (f :: * -> Constraint) :: Constraint
type instance ConstrainedTypes '[] b = ()
type instance ConstrainedTypes (a ': t) b = (b a, ConstrainedTypes t b) 

instance ConstrainedTypes ts Show => Show (HList ts) where
  show xs = "[" ++ show' xs ++ "]"
    where
      show' :: ConstrainedTypes ts Show => HList ts -> String
      show' HNil = ""
      show' (HCons h s) = case s of
        HNil     -> show h
        HCons {} -> show h ++ ", " ++ show' s 
```

再次感谢您的大力帮助。

# c - 声明结构类型，将值插入到该类型的数组中，并打印出数组

> ID：12989391
> 
> 赞同：2
> 
> 时间：2012-10-20T14:25:30.603
> 
> 标签：c

在这个程序中，我想定义一个名为 person 的结构，以及一个插入函数，用于将元素插入到声明为 person 类型的数组中未使用的空间中。最后，我想将结果打印为标准输出。任何人都可以给我一个提示以纠正任何错误的事情吗？干杯

错误：

```
arrays.c:16:22: error: expected ')' before '[' token
arrays.c: In function 'main':
arrays.c:34:5: warning: implicit declaration of function 'insert'
arrays.c:41:5: warning: format '%s' expects type 'char *', but argument 2 has type 'char **' 
```

代码

```
#include <stdio.h>

/* these arrays are just used to give the parameters to 'insert',
   to create the 'people' array */
char *names[7]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
          "Harriet"};
int ages[7]= {22, 24, 106, 6, 18, 32, 24};

/* declare your struct for a person here */
typedef struct{
  char name;
  int ages; 
}  person;

static void insert (p[], char *name, int ages) {

  static int nextfreeplace = 0;
  /* put name and age into the next free place in the array parameter here */
  person p[0] = {&name, age};

  /* modify nextfreeplace here */
  nextfreeplace++;

}

int main(int argc, char **argv) {

  /* declare the people array here */
   person p[7];

   //insert the members and age into the unusage array. 
  for (int i=0; i < 7; i++) {
    insert (p[i], &names[i], ages[i]);
    p[i]= p[i+1];

  }

  /* print the people array here*/
  for (int i=0; i < 7; i++) {
    printf("%s is %d years old\n", &names[i], ages[i]);
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:44:26.123

第一个问题是你的结构人。您将 name 声明为*char*而它应该是**char* (pointer)**或**char[] (array)**。

```
typedef struct 
{
    char *name; //or char name[100];
    int age;
}
person; 
```

接下来，您的**插入** **函数**的参数不正确。您不想要一个人员数组（您可以这样做，但这更简单），您需要一个**指向 person 结构**的指针，以便您可以编辑它。

```
static void insert(person *p, char *name, int age)
{
    p->name = name;
    p->age = age;
} 
```

最后，这是填充数组并打印出来的方式：

```
int main()
{
    //names and ages...

    person people[7];

    for (int i = 0; i < 7; i++)
    {
        insert(&people[i], names[i], ages[i]);
    }

    for (int i = 0; i < 7; i++)
    {
        printf("name: %s, age: %i\n", people[i].name, people[i].age);
    }
} 
```

示例：http: [//ideone.com/dzGWId](http://ideone.com/dzGWId)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:50:32.553

你的参数有问题`p`。

```
static void insert (p[], char *name, int ages) 
```

您忘记了它的类型 ( `person`)。然后你重新声明它；以下指令无效：

```
person p[0] = {&name, age}; 
```

在函数调用中，你不使用数组，而是使用数组的case。所以你的功能应该是：

```
typedef struct
{
  char *name;
  int ages;
} person;

static void
insert (person *p, char *s, int n)
{
  p->name = s;
  p->ages = n;
} 
```

和电话：

```
insert (&p[i], names[i], ages[i]); 
```

# jquery - jQuery：$（模板）与 .clone（）

> ID：12989392
> 
> 赞同：8
> 
> 时间：2012-10-20T14:25:36.347
> 
> 标签：jquery, templates

假设我们有一个复杂的字符串`template`（可能是一个包含许多其他标签的 div ......），我们需要多次将此 HTML 节点添加到我们现有的文档中。

每次从模板创建 HTML 节点会更快吗

```
var $html = $(template); // 1st run
var $html = $(template); // 2st run
... 
```

或者只创建一次然后克隆它们：

```
var $template = $(template); // init
var $html = $template.clone() // 1st run
var $html = $template.clone() // 2st run
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T14:40:53.410

在迄今为止测试的所有浏览器上，使用模板似乎总是比克隆更快，除了 Opera（一个测试用例，相同的性能）。谢谢大家的测试用例。

[http://jsperf.com/clone-versus-template](http://jsperf.com/clone-versus-template)

***更新：***

这是使用 jQuery 构建的长模板和模板的测试：

[http://jsperf.com/clone-versus-template/4](http://jsperf.com/clone-versus-template/4)

**最后这个测试表明，克隆方法**在 Chrome、Firefox 和 Opera 上的性能远远优于模板方法，但在 IE9 中它们是相同的

# android - 语音转文本应用程序需要哪个最低安卓版本

> ID：12989395
> 
> 赞同：5
> 
> 时间：2012-10-20T14:25:52.287
> 
> 标签：android, speech-to-text

我已经完成了将语音转换为文本的编码。我只想知道这需要哪个最低版本的 android。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:31:24.987

[文本转语音](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)是在**Android 1.6 中引入的：Donut**，如[文档](http://developer.android.com/about/versions/android-1.6-highlights.html)中所述。

另请查看[此处](http://android-developers.blogspot.in/2009/09/introduction-to-text-to-speech-in.html)的博文。

**编辑：**如果您指的是**SpeechToText API 的**[RecognizerIntent](http://developer.android.com/reference/android/speech/RecognizerIntent.html)，它需要**Android 1.5 的 API 级别：Cupcake**。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:45:11.510

[android.speech](http://developer.android.com/reference/android/speech/package-summary.html)包从 API 级别 3（即 Android v1.5）开始就存在。这个包中的许多类、接口、常量出现的时间要晚得多。-class（许多键盘应用程序使用）出现在 API 级别 8 中。`RecognitionService`此后并没有发生太多事情，但每个 API 级别仍然添加了一些东西。

因此，这实际上取决于您的应用程序想要使用哪个接口（普通的-intent`RecognizerIntent`或`RecognizerService`****

# c# - 来自 TextBox.Text 的 C# 正则表达式匹配？

> ID：12989396
> 
> 赞同：1
> 
> 时间：2012-10-20T14:26:18.300
> 
> 标签：c#, .net, regex

所以我在 textbox2.text 中查找正则表达式匹配时遇到问题（文本看起来像一个 javascript 文件）这是我的代码：

```
string file = Regex.Match(textBox2.Text, @"rl='(.*)'", RegexOptions.IgnoreCase).Groups[0].Value; 
```

我试图找到`rl='`&之间的内容，`'`但我得到了 + rl=' 和 ' 之间的内容，“（）”似乎不起作用？>.<

知道是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:27:52.350

试试这个正则表达式模式，

```
(?<=rl=').*(?=') 
```

请参阅**[Lookahead 和 Lookbehind 零宽度断言。](http://www.regular-expressions.info/lookaround.html)**

示例演示

![在此处输入图像描述](../Images/f025725a0c5b33ca8a18d77748ef4ab3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:30:19.227

> 我试图找到 rl=' & ' 之间的内容

那么你应该使用这个正则表达式

```
@"(?<=rl\=').*?(?=')" 
```

`(.*?)`这个正则`rl='`表达式告诉引擎匹配 0-n 个`(?<=rl\=')`字符`'` `i.e(?=')`

# java - 依次运行3个线程java

> ID：12989397
> 
> 赞同：15
> 
> 时间：2012-10-20T14:26:22.163
> 
> 标签：java, multithreading, notify

我有 3 个线程 第 1 次打印 A 第 2 次打印 B 第 3 次打印 C

我想按顺序打印 ABCABCABC 等等.....

所以我写了下面的程序，但我无法实现。我知道当状态 = 1 时，例如 B1 和 C1 线程正在等待，当我执行 notifyAll() 时，两个等待线程都会唤醒，并且根据 CPU 分配，它可能会打印 B 或 C。

在这种情况下，我只想在 A 之后打印 B。

我需要做什么修改。

```
public class NotifyAllExample {

    int status=1;
    public static void main(String[] args) {

        NotifyAllExample notifyAllExample = new NotifyAllExample();

        A1 a=new A1(notifyAllExample);
        B1 b=new B1(notifyAllExample);
        C1 c=new C1(notifyAllExample);

        a.start();
        b.start();
        c.start();
    }
}

class A1 extends Thread{
    NotifyAllExample notifyAllExample;

    A1(NotifyAllExample notifyAllExample){
        this.notifyAllExample = notifyAllExample;
    }

    @Override
    public void run() {

        try{
            synchronized (notifyAllExample) {

                for (int i = 0; i < 100; i++) {

                    if(notifyAllExample.status!=1){
                        notifyAllExample.wait();
                    }

                    System.out.print("A ");
                    notifyAllExample.status = 2;
                    notifyAllExample.notifyAll();
                }

            }
        }catch (Exception e) {
            System.out.println("Exception 1 :"+e.getMessage());
        }

    }

}

class B1 extends Thread{

    NotifyAllExample notifyAllExample;

    B1(NotifyAllExample notifyAllExample){
        this.notifyAllExample = notifyAllExample;
    }

    @Override
    public void run() {

        try{
            synchronized (notifyAllExample) {

                for (int i = 0; i < 100; i++) {

                    if(notifyAllExample.status!=2){
                        notifyAllExample.wait();
                    }

                    System.out.print("B ");
                    notifyAllExample.status = 3;
                    notifyAllExample.notifyAll();
                }

            }
        }catch (Exception e) {
            System.out.println("Exception 2 :"+e.getMessage());
        }

    }
}

class C1 extends Thread{

    NotifyAllExample notifyAllExample;

    C1(NotifyAllExample notifyAllExample){
        this.notifyAllExample = notifyAllExample;
    }

    @Override
    public void run() {

        try{
            synchronized (notifyAllExample) {

                for (int i = 0; i < 100; i++) {

                    if(notifyAllExample.status!=3){
                        notifyAllExample.wait();
                    }

                    System.out.print("C ");
                    notifyAllExample.status = 1;
                    notifyAllExample.notifyAll();
                }

            }
        }catch (Exception e) {
            System.out.println("Exception 3 :"+e.getMessage());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T14:34:07.987

将这些 IF 语句转换为 WHILE 语句以获得所需的行为：

```
if (notifyAllExample.status != 2){
    notifyAllExample.wait();
} 
```

到

```
while (notifyAllExample.status != 2){
    notifyAllExample.wait();
} 
```

这将确保如果一个线程被通知，它不会退出 while 循环，直到状态值是它所期望的值。

此外，标记`status`为 volatile 以便线程不会有本地副本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-16T02:19:50.830

```
 public class RunThreadsInOrder implements Runnable {

    static int numThread = 1;
    static int threadAllowedToRun = 1;
    int myThreadID;
    private static Object myLock = new Object();

    public RunThreadsInOrder() {
        this.myThreadID = numThread++;
        System.out.println("Thread ID:" + myThreadID);
    }

    @Override
    public void run() {
        synchronized (myLock) {
            while (myThreadID != threadAllowedToRun) {
                try {
                    myLock.wait();
                } catch (InterruptedException e) {

                } catch (Exception e) {}
            }
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
            }

            System.out.println("myThreadID is running: " + myThreadID);
            myLock.notifyAll();
            threadAllowedToRun++;
        }
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Thread t1 = new Thread(new RunThreadsInOrder());
        Thread t2 = new Thread(new RunThreadsInOrder());
        Thread t3 = new Thread(new RunThreadsInOrder());
        Thread t4 = new Thread(new RunThreadsInOrder());
        Thread t5 = new Thread(new RunThreadsInOrder());
        Thread t6 = new Thread(new RunThreadsInOrder());
        Thread t7 = new Thread(new RunThreadsInOrder());

        t7.start();
        t6.start();
        t5.start();
        t4.start();
        t3.start();
        t2.start();
        t1.start();

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-05T08:15:43.693

```
 public class Main {
        public static void main(String[] args) throws IOException{
        Thread t1 = new Thread(new A(), "1");
        Thread t2 = new Thread(new A(), "2");
        Thread t3 = new Thread(new A(), "3");

        t1.start();
        try{
            t1.join();
        }catch (Exception e){

        }
        t2.start();
        try{
            t2.join();
        }catch (Exception e){

        }
        t3.start();
        try{
            t3.join();
        }catch (Exception e){

        }

    }
}

    class A implements Runnable{
    public void run(){
        System.out.println(Thread.currentThread().getName());
    }
} 
```

或者你可以使用 Executor Framework

```
public class Sequence {
    int valve = 1;
    public static void main(String[] args){
        Sequence s = new Sequence();
        ExecutorService es = Executors.newFixedThreadPool(3);

        List<Runnable> rList = new ArrayList<>();
        rList.add(new A(s));
        rList.add(new B(s));
        rList.add(new C(s));

        for(int i = 0; i < rList.size(); i++){
            es.submit(rList.get(i));
        }
        es.shutdown();

    }
}

class A implements Runnable{
    Sequence s;

    A(Sequence s){
        this.s = s;
    }

    public void run(){
        synchronized (s) {
            for (int i = 0; i < 10; i++) {
                while (s.valve != 1) {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                System.out.println("A");
                s.valve = 2;
                s.notifyAll();
            }
        }
    }
}

class B implements Runnable{
    Sequence s;

    B(Sequence s){
        this.s = s;
    }

    public void run() {
        synchronized (s) {
            for (int i = 0; i < 10; i++) {
                while (s.valve != 2) {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                System.out.println("B");
                s.valve = 3;
                s.notifyAll();
            }
        }
    }
}

class C implements Runnable{
    Sequence s;

    C(Sequence s){
        this.s = s;
    }

    public void run() {
        synchronized (s) {
            for(int i = 0; i < 10; i++) {
                while (s.valve != 3) {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                System.out.println("C");
                s.valve = 1;
                s.notifyAll();
            }
        }
    }
} 
```

在第一种情况下，每个线程的连接导致线程相互等待。在第二种情况下，一个列表存储线程，执行器一个接一个地执行它们，创建 3 个线程

另一种方法是只存在一个可运行类，线程之间的通信通过主类中的静态变量和可运行类中的变量完成

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.Executor;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Seq {
    int i = 1;
    public static void main(String[] args){
        Seq s = new Seq();
        Common c1 = new Common(s, 1);
        Common c2 = new Common(s, 2);
        Common c3 = new Common(s, 3);

        List<Runnable> l = new ArrayList<>();
        l.add(c1);
        l.add(c2);
        l.add(c3);

        ExecutorService es = Executors.newFixedThreadPool(3);
        for(int i = 0; i < 3; i++){
            es.submit(l.get(i));
        }
        es.shutdown();
    }
}

class Common implements Runnable{
    Seq s;
    int o;

    Common(Seq s, int o){
        this.s = s;
        this.o = o;
    }

    public void run(){
        synchronized (s) {
            for (int z = 0; z < 100; z++) {
                if(s.i > 3)
                    s.i = 1;
                while (s.i != o) {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                System.out.println(o);
                s.i++;
                s.notifyAll();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T18:28:23.073

在一次采访中，我被要求编写一个类似的程序，附加条件是它应该是可扩展的，我们可以提供我们自己的线程数，并且它们应该打印字符，第一个线程打印“A”，然后是后续线程印刷B、C、D等。这就是我的做法。

```
public class AlternateCharPrinter {

    public static char ch = 65;

    private static void createAndStartThreads(int count) {
        Object lock = new Object();
        for (int i = 0; i < count; i++) {
            new Thread(new AlternateCharRunner((char) (65 + i), lock)).start();
        }

    }

    public static void main(String[] args) {
        createAndStartThreads(4);
    }

}

class AlternateCharRunner implements Runnable {

    private char ch;
    private Object lock;
    private static int runnerCount;

    public AlternateCharRunner(char ch, Object lock) {
        this.ch = ch;
        this.lock = lock;
        runnerCount++;
    }

    @Override
    public void run() {
        while (true) {
            synchronized (lock) {
                while (ch != AlternateCharPrinter.ch) {
                    try {
                        lock.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                System.out.println(AlternateCharPrinter.ch++);
                if (AlternateCharPrinter.ch == (65 + runnerCount)) {
                    AlternateCharPrinter.ch = 65;
                }
                lock.notifyAll();
            }
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T14:32:43.697

你需要更换

```
if (notifyAllExample.status!=1) 
```

和

```
while (notifyAllExample.status!=1) 
```

在其他 2 个班级中也是如此。如果不是，那么一旦等待退出，线程就会继续，而不知道是否轮到它了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T14:33:34.147

代替：

```
if(notifyAllExample.status!=1){
   notifyAllExample.wait();
} 
```

和：

```
while(notifyAllExample.status!=1){
   notifyAllExample.wait();
} 
```

相应地在所有课程中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-17T19:39:41.997

解决此问题的最简单解决方案可以是以下方式：

```
public class PrintInOrder implements Runnable {

private int valueToPrint;
private int id;
private static int turn = 1;
private static int RESET_TURN_THRESHOLD = 3;

public PrintInOrder() {
    this.valueToPrint = -1;
}

public PrintInOrder(int id, int val) {
    this.id = id;
    this.valueToPrint = val;
}

@Override
public void run() {
        while(true) {
            if (turn == this.id) {
                System.out.println(Thread.currentThread().getName() + "::::" + valueToPrint);
                turn++;
            }
            if (turn > RESET_TURN_THRESHOLD) {
                turn = 1;
            }
        }

}

public static void main(String []args) {
    Thread t1 = new Thread(new PrintInOrder(1, 1));
    t1.setName("THREAD-1");
    t1.start();
    Thread t2 = new Thread(new PrintInOrder(2, 2));
    t2.setName("THREAD-2");
    t2.start();
    Thread t3 = new Thread(new PrintInOrder(3, 3));
    t3.setName("THREAD-3");
    t3.start();
} 
```

}

```
/*
OUTPUT::::
THREAD-1::::1
THREAD-2::::2
THREAD-3::::3
THREAD-1::::1
THREAD-2::::2
THREAD-3::::3
THREAD-1::::1
THREAD-2::::2
THREAD-3::::3
THREAD-1::::1
THREAD-2::::2
THREAD-3::::3
THREAD-1::::1
THREAD-2::::2
THREAD-3::::3
THREAD-1::::1
THREAD-2::::2
THREAD-3::::3
...
*/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-28T00:19:13.683

这是我的解决方案 -

我创建了三个线程，每个线程都知道它需要打印什么以及之后会发生什么。

我还创建了一个 NLock 类，它保存下一个需要打印的单词。

每当一个线程能够获取 NLock 锁时，它会检查是否轮到他，如果是，则打印该单词并设置要在 NLock 中打印的下一个值，否则它会等到轮到他

```
public class SynchronizeThreeThreads {

    public static void main(String args[]) throws InterruptedException {
        NLock lock=new NLock("A");
        Thread a =new Thread(new PrintInOrder("A","B",lock));
        Thread b =new Thread(new PrintInOrder("B","C",lock));
        Thread c =new Thread(new PrintInOrder("C","A",lock));

        a.start();
        b.start();
        c.start();
        c.join(); // Once all is done main thread will exit
        System.out.println("Done");
    }
}

class NLock{
     private String value;

     public NLock(String value) {
         this.value=value;
     }

     public String getValue() {
         return value;
     }

     public void setValue(String next) {
         this.value=next;
     }

}

class PrintInOrder implements Runnable{

    private String word;

    private String next;

    private NLock lock;

    public PrintInOrder(String word, String next,NLock lock){
        this.word=word;
        this.next=next;
        this.lock=lock;
    }

    @Override
    public void run() {
        int i=0;
        while(i<3) {
            synchronized (lock) {
                try {
                    //Check if it's my turn
                    if(lock.getValue().equals(word)) {
                        System.out.println(this.word);
                        //Set what next needs to be printed
                        //So that when that thread wakes up it knows that it's his turn
                        lock.setValue(next);
                        i++;
                        lock.notifyAll();
                        Thread.sleep(100);
                    }
                    else //Nope not my turn wait
                        lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

        }
    }
} 
```

下面是输出

A B C A B C A B C 完成

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-05-03T23:58:58.577

我认为使用连接来实现这一点更简单。例子：

```
 public static void main(String[] args) {    
    final Thread t1 = new Thread("t1") {
        @Override
        public void run() {
            System.out.println("i am thread: " + Thread.currentThread().getName());
        }
    };

    final Thread t2 = new Thread(t1, "t2") {
        @Override
        public void run() {
            t1.start();
            try {
                t1.join();
            } catch ( InterruptedException e ) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("i am thread: " + Thread.currentThread().getName());
        }
    };

    Thread t3 = new Thread(t2, "t3") {
        @Override
        public void run() {
            t2.start();
            try {
                t2.join();
            } catch ( InterruptedException e ) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("i am thread: " + Thread.currentThread().getName());
        }
    };

    t3.start(); 
```

}

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-04-28T09:20:52.577

这是我的解决方案，请尝试让我知道

```
package thread;

class SyncPrinter {
    public static void main(String[] args) {
        SyncPrinterAction printAction1 = new SyncPrinterAction(new int[]{1,5,9,13}, true);
        SyncPrinterAction printAction2 = new SyncPrinterAction(new int[]{2,6,10,14}, true);
        SyncPrinterAction printAction3 = new SyncPrinterAction(new int[]{3,7,11,15}, true);
        SyncPrinterAction printAction4 = new SyncPrinterAction(new int[]{4,8,12,16}, false);

        printAction1.setDependentAction(printAction4);
        printAction2.setDependentAction(printAction1);
        printAction3.setDependentAction(printAction2);
        printAction4.setDependentAction(printAction3);

        new Thread(printAction1, "T1").start();;        
        new Thread(printAction2, "T2").start();
        new Thread(printAction3, "T3").start();     
        new Thread(printAction4, "T4").start();

    }
}

class SyncPrinterAction implements Runnable {

    private volatile boolean dependent;
    private SyncPrinterAction dependentAction;
    int[] data;

    public void setDependentAction(SyncPrinterAction dependentAction){
        this.dependentAction = dependentAction;

    }

    public SyncPrinterAction( int[] data, boolean dependent) {
        this.data = data;
        this.dependent = dependent;
    }

    public SyncPrinterAction( int[] data, SyncPrinterAction dependentAction, boolean dependent) {
        this.dependentAction = dependentAction;
        this.data = data;
        this.dependent = dependent;
    }

    @Override
    public void run() {
        synchronized (this) {

            for (int value : data) {

                try {
                    while(dependentAction.isDependent())
                        //System.out.println("\t\t"+Thread.currentThread().getName() + " :: Waithing for dependent action to complete");
                    wait(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                dependentAction.setDependent(true);

                System.out.println(Thread.currentThread().getName() + " :: " +value);
                dependent = false;
            }

        }

    }

    private void setDependent(boolean dependent) {
        this.dependent = dependent;

    }

    private boolean isDependent() {
        return dependent;
    }

} 
```

# javascript - 如何在 Node.js 中的两个文件之间共享一个变量

> ID：12989398
> 
> 赞同：0
> 
> 时间：2012-10-20T14:26:22.093
> 
> 标签：javascript, node.js, share

使用 Node.js，如果我写成`app.js`：

```
 var commons = {
    title: 'myTitle',
    description: 'MyDesc',
    menu: {
      home: {
        label: 'Home',
        url: '/',
      },
      contacts: {
        label: 'Contacts',
        url: '/contacts'
      }
    }
  }

  console.log(commons); 
```

我有这个输出...

```
 {
    title: 'myTitle',
    description: 'MyDesc',
    menu: {
      home: {
        label : 'Home',
        url: '/'
      },
      contacts: {
        label: 'Contacts',
        url: '/contacts'
      }
    }
  } 
```

......它工作正常。但是，如果我`app.js`要从另一个文件（在同一路径中）加载一个变量......

`commons.js`：

```
exports.commons = {
    title: 'myTitle',
    description: 'MyDesc',
    menu: {
      home: {
        label: 'Home',
        url: '/',
      },
      contacts: {
        label: 'Contacts',
        url: '/contacts'
      }
    }
  } 
```

`app.js`：

```
var commons = require('./commons');      
console.log(commons); 
```

我作为输出：

```
commons: {
        {
        title: 'myTitle',
        description: 'MyDesc',
        menu: {
            home: [Object],
            contacts: [Object]
        }
    }
 } 
```

为什么会这样？如何正确地跨两个文件传递变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:35:43.363

在模块中，`exports`是一个对象，其中包含在其他地方需要模块时导出的所有内容。所以通过设置`exports.commons = { ...`你基本上是在设置对象的`commons`属性`exports`。这意味着您将实际对象嵌套在另一个对象中以进行导出。

在您的另一个模块中，您使用 .然后导入整个`exports`对象`commons = require('./commons')`。因此，您设置的实际`commons`对象位于`commons.commons`.

如果您不想将数据嵌套在另一个对象中，您可以直接设置`exports`对象，使用`module.exports`：

```
module.exports = {
    title: 'myTitle',
    description: 'MyDesc',
    ....
} 
```

然后导入按您的预期工作。

`[Object]`正如 pimvdb 所说，输出中的 只是为了`console.log`避免在层次结构中走得太深。数据仍然存在，当您按照上面的说明删除第一级时，您可能会看到内容很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:33:50.587

这是`console.log`去的深度。向`commons`对象再添加一个级别会给出相同的响应。

```
var commons = {
title: 'myTitle',
description: 'MyDesc',
menu: {
  home: {
    mine: {
      label: 'Home',
      url: '/',
    }
  },
  contacts: {
    label: 'Contacts',
    url: '/contacts'
  }
}
}
console.log(commons); 
```

给出这个回应：

```
{ title: 'myTitle',
  description: 'MyDesc',
  menu:
   { home: { mine: [Object] },
     contacts: { label: 'Contacts', url: '/contacts' } } } 
```

看到这个：[https ://groups.google.com/forum/#!topic/nodejs-dev/NmQVT3R_4cI](https://groups.google.com/forum/#!topic/nodejs-dev/NmQVT3R_4cI)

# html - 两个外部 div 相对于内部 div 的高度

> ID：12989404
> 
> 赞同：0
> 
> 时间：2012-10-20T14:27:05.843
> 
> 标签：html, height

我有 3 个 div：

```
<div style="float:left; background-color:#000; width:300px;" ></div>
<div style="float:left; color:#000; width:600px;" >Text</div>
<div style="float:left; background-color:#000; width:300px;" ></div> 
```

内部的文本是动态加载的，div 的高度应该包含文本。这工作正常，但我也希望作为某种占位符的两个外部 div 具有与中间一个相同的高度。我怎样才能做到这一点？

我的第一个想法是，我将所有 3 个 div 包装在另一个 div 中并继承 3 个 div 的高度，因为包装 div 应该与带有文本的高度相同。但我失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:37:36.817

如果您不需要支持旧版浏览器，请使用[Flexbox](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)。您可能根本不想将浮动用于基本布局。

# java - JNetPcap 发送 UDP 数据包

> ID：12989413
> 
> 赞同：3
> 
> 时间：2012-10-20T14:28:15.560
> 
> 标签：java, networking, udp, packages, jnetpcap

A 有一个问题，因为我已经工作了将近 3 天来让库和代码毫无例外地工作，我现在真的很失望。

我只想创建一个带有欺骗性 IPv4 地址的 Udp 包并发送它。听起来很容易，不是吗？但事实并非如此！这是我创建包的代码：

```
import org.jnetpcap.nio.JBuffer;
import org.jnetpcap.packet.JMemoryPacket;
import org.jnetpcap.packet.JPacket;
import org.jnetpcap.protocol.lan.Ethernet;
import org.jnetpcap.protocol.network.Ip4;
import org.jnetpcap.protocol.tcpip.Udp;

public class UdpPacket {
private JPacket packet = null;
private Ethernet eth = new Ethernet();
private Ip4 ip = new Ip4();
private Udp udp = new Udp();
private byte[] payload = null;

private UdpPacket() {
  packet = new JMemoryPacket(Ethernet.ID,
               "30469a975316485d6083d14908004500021c2257000080112610c0a802844a7de2c0f251029a02081688");

eth = packet.getHeader(new Ethernet()); // eth = new Ethernet();
ip = packet.getHeader(new Ip4()); // ip = new Ip4();
udp = packet.getHeader(new Udp()); // udp = new Udp();

packet.check();

/*
 * These aren't really needed now since I can't figure out how to create
 * empty headers .. sort of better this way tho
 */

// eth.type(0x0800); // Set the type to IP
// ip.version(4); // Set to version 4
// ip.length(20); // Set the IP header length to 20 bytes
// ?? Set Differentiated Service Field ??
// ip.id(0x2257); // Identification
// ip.flags(0); // Flags
// ip.offset(0); // Fragment offset
// ip.ttl(128); // Time-to-live
// ip.type(Ip4.Ip4Type.UDP); // Type: UDP

}

public UdpPacket(byte[] sourceMac, String sourceIp, int sourcePort, byte[] destMac,   String destIp, int destPort, byte[] p) {
this();

setSourceMac(sourceMac);
setDestMac(destMac);
setSourceIp(sourceIp);
setDestIp(destIp);
setPayload(p);
setSourcePort(sourcePort);
setDestPort(destPort);

}

public void setSourcePort(int sourcePort) {
  udp.source(sourcePort);
}

public void setDestPort(int destPort) {
  udp.destination(destPort);
}

public void setSourceMac(byte[] source) {
  eth.source(source);
}

public void setDestMac(byte[] dest) {
  eth.destination(dest);
}

public void setSourceIp(String source) {
String[] subs = source.split("\\.");

byte[] buff =     {Integer.valueOf(subs[0]).byteValue(),Integer.valueOf(subs[1]).byteValue(),
            Integer.valueOf(subs[2]).byteValue(),Integer.valueOf(subs[3]).byteValue()};

ip.source(buff);
}

public void setDestIp(String dest) {
String[] subs = dest.split("\\.");

byte[]buff=    {Integer.valueOf(subs[0]).byteValue(),Integer.valueOf(subs[1]).byteValue(),
            Integer.valueOf(subs[2]).byteValue(),Integer.valueOf(subs[3]).byteValue()};

ip.destination(buff);
}

public void setPayload(byte[] p) {
  payload = p.clone();
}

public JPacket getJPacket() {
  JBuffer buff = null;

  // Update checksums and lengths
  ip.length(ip.size() + udp.size() + payload.length);
  ip.checksum(ip.calculateChecksum());
  udp.length(udp.size() + payload.length);

  buff = new JBuffer(eth.size() + ip.size() + udp.size() + payload.length);

  eth.transferTo(buff);
  ip.transferTo(buff, 0, ip.size(), eth.size());
  udp.transferTo(buff, 0, udp.size(), eth.size() + ip.size());
  buff.setByteArray(eth.size() + ip.size() + udp.size(), payload);

  return new JMemoryPacket(buff);
}

} 
```

现在我用这段代码创建包，并尝试发送它：

```
public void fire(Reflector ammu, int device) throws Exception
{
    UdpPacket packet = new UdpPacket(getMac(InetAddress.getByName(targetIP)), targetIP, 29860,
            getMac(InetAddress.getByName(ammu.getAdress())), ammu.getAdress(), Integer.valueOf(ammu.getPort()),
            "getstatus".getBytes());

    byte[] buff = null;

    buff = packet.getJPacket().getByteArray(0, packet.getJPacket().size());

    send(buff);
}

private byte[] getMac(InetAddress address) throws Exception
{
    //NetworkInterface nwi = NetworkInterface.getByInetAddress(address);
    NetworkInterface nwi = NetworkInterface.getByInetAddress(InetAddress.getByName("localhost"));
    byte mac[] = nwi.getHardwareAddress();

    return mac;
}

@SuppressWarnings("deprecation")
private void send(byte[] packet)
{
    List<PcapIf> alldevs = new ArrayList<PcapIf>(); // Will be filled with NICs  
    StringBuilder errbuf = new StringBuilder(); // For any error msgs  

    /*************************************************************************** 
     * First get a list of devices on this system 
     **************************************************************************/  
    int r = Pcap.findAllDevs(alldevs, errbuf);  
    if (r == Pcap.NOT_OK || alldevs.isEmpty()) {  
      System.err.printf("Can't read list of devices, error is %s", errbuf.toString());  
      return;  
    }  
    PcapIf device = alldevs.get(0); // We know we have atleast 1 device  

    /***************************************** 
     * Second we open a network interface 
     *****************************************/  
    int snaplen = 64 * 1024; // Capture all packets, no trucation  
    int flags = Pcap.MODE_PROMISCUOUS; // capture all packets  
    int timeout = 10 * 1000; // 10 seconds in millis  
    Pcap pcap = Pcap.openLive(device.getName(), snaplen, flags, timeout, errbuf);  

    /******************************************************* 
     * Fourth We send our packet off using open device 
     *******************************************************/  
    if (pcap.sendPacket(packet) != Pcap.OK) {  
      System.err.println(pcap.getErr());  
    }  

    /******************************************************** 
     * Lastly we close 
     ********************************************************/  
    pcap.close();  
} 
```

但它似乎没有被发送。因为我对网络、协议和其他东西不太了解，所以我想我去问问别人。有没有人可以告诉我错误是什么？

# android - 检测移动应用程序的首次使用

> ID：12989417
> 
> 赞同：3
> 
> 时间：2012-10-20T14:28:53.657
> 
> 标签：android, cordova, mobile-application

我想使用 Phonegap 编写一个移动应用程序（android），并且我想检测我的应用程序的首次使用以执行一些激活过程。我如何检测这是否是我的应用程序的第一次使用？我应该使用任何数据库吗？或者像 cookie 之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:48:19.663

好吧，我从未尝试过 PhoneGap，但通常的方法（我在 Android 和 iPhone 上所做的一种方法，都是原生的）是将一些字节写入文件。然后，每次打开它时，都尝试读取文件。万一打不开，那是第一次。

如果这不是第一次并且仍然失败，您将通过重新开始一切来“优雅地失败”并恢复，就好像失败从未发生过一样。

我还建议您将这些字节作为“首次运行”的 UNIX 时间。这样，如果您永远不需要知道时间，您可以忽略它。但如果你需要它，它已经在那里了。我什至会在前面加上一个小标题，然后是一个字节数，这样你以后就可以轻松地扩展这种格式。

那是我的 2 美分 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:12:55.233

你把这个函数写到任何地方：

```
public static String LoadPreferencesString(Context con, String key) {
    // ContextWrapper wrapper=new ContextWrapper(con);
    SharedPreferences sharedPreferences = con.getSharedPreferences(
            "yourxmlfilename", Context.MODE_PRIVATE);
    String strSavedMem1 = sharedPreferences.getString(key, "");
    return strSavedMem1;
}

public static void SavePreferencesString(Context con, String key, String value) {
    SharedPreferences sharedPreferences = con.getSharedPreferences(
            "yourxmlfilename", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
} 
```

您可以将带有键的值写入您在第一次运行时识别名称的 xml 文件。您检查的另一个值为空。如果 value 为 null（或 space( )），则应用程序第一次运行。

# javascript - Javascript函数后没有回发

> ID：12989419
> 
> 赞同：1
> 
> 时间：2012-10-20T14:29:06.580
> 
> 标签：javascript, asp.net, postback

这个元素

```
<asp:DropDownList ID="ItemDropDownList" runat="server" AutoPostBack="true" OnChange="setHidden()" .... > 
```

当我使用 OnChange 属性时不做回发。即使我手动进行：

```
function setHidden() {
  ...
  ...
  _doPostBack("","");
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:32:00.823

使用 return 语句而不是回发。

```
<asp:DropDownList ID="ItemDropDownList"  runat="server"  AutoPostBack="true" 
     OnChange="return setHidden()" .... >

function setHidden() {
     ...
     ....
    return true; // you can return false to stop postback
} 
```

# jquery - 花式盒子上的花式盒子

> ID：12989421
> 
> 赞同：1
> 
> 时间：2012-10-20T14:29:13.073
> 
> 标签：jquery, fancybox

我试图找出一种方法，我单击图像并出现一个带有 3 个按钮的精美框，当我单击任何按钮时，我会使用精美的框获得一个画廊。那可能吗？我想要一个 Fancy box 1:iFrame-->Fancybox 2: One Image gallery

我在某处读到它，其他人说不是，每个人都给予不同的人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:07:03.837

如果您使用的是fancybox v2.x，它就像将fancybox 绑定到带有按钮和图像库的盒子一样简单，因此，要使用按钮启动fancybox，请创建一个类似的html

```
<a class="fancybox" href="#buttonsContainer"><img src="images/01t.jpg" alt="" /></a> 
```

.....**请注意**，我们的目标`inline`内容是`id="buttonsContainer"`. 然后*隐藏*的html内容可以像

```
<div style="display: none;">
 <div id="buttonsContainer">
  <a class="fancybox myButton" href="images/01.jpg" data-fancybox-group="gallery01" title="gallery 01">open gallery 01</a>
  <a class="fancybox myButton" href="images/02.jpg" data-fancybox-group="gallery02" title="gallery 02">open gallery 02</a>
  <a class="fancybox myButton" href="images/03.jpg" data-fancybox-group="gallery03" title="gallery 03">open gallery 03</a>
 </div>
 <div>
  <a class="fancybox" href="images/04.jpg" data-fancybox-group="gallery01" title="gallery 01"></a>
  <a class="fancybox" href="images/05.jpg" data-fancybox-group="gallery02" title="gallery 02"></a>
  <a class="fancybox" href="images/06.jpg" data-fancybox-group="gallery03" title="gallery 03"></a>
  <a class="fancybox" href="images/07.jpg" data-fancybox-group="gallery01" title="gallery 01"></a>
  <a class="fancybox" href="images/08.jpg" data-fancybox-group="gallery03" title="gallery 03"></a>
 </div>
</div> 
```

**请注意**，我们设置了部分，一个用于按钮 ( `buttonsContainer`)，一个用于画廊。

自定义的 fancybox 脚本可以很简单

```
$(document).ready(function(){
 $(".fancybox").fancybox();
}); // ready 
```

...这对带有按钮的框和图像库都适用。

见[工作演示](http://www.picssel.com/playground/jquery/openGalleriesFromfancybox_21oct12.html)

# cuda - 对应该执行超过 1 次的 CUDA 内核进行计时

> ID：12989422
> 
> 赞同：0
> 
> 时间：2012-10-20T14:29:25.203
> 
> 标签：cuda

我想计算应该运行1次以上的内核时间，每个正在执行的内核要处理的数据是不同的。我的代码在下面，不应该计算cudaMemcpy的时间。

```
1 cudaEvent_t start;
2 error = cudaEventCreate(&start);
3 cudaEvent_t stop;
4 error = cudaEventCreate(&stop);
6 float msecTotal = 0.0f;
7 int nIter = 300;
8 for (int j = 0; j < nIter; j++)
9 {            
10      cudaMemcpy(...);
        // Record the start event
11      error = cudaEventRecord(start, NULL);
12      matrixMulCUDA1<<< grid, threads >>>(...);
       // Record the stop event
13      error = cudaEventRecord(stop, NULL);
14      error = cudaEventSynchronize(stop);
15      float msec = 0.0f;
16      error = cudaEventElapsedTime(&msec, start, stop);
17      msecTotal+=msec;
18 }
19 cout<<"Total time = "<<msecTotal<<endl; 
```

公平地说，对比算法应该如下：

```
1 cudaEvent_t start;
2 error = cudaEventCreate(&start);
3 cudaEvent_t stop;
4 error = cudaEventCreate(&stop);
6 float msecTotal = 0.0f;
7 int nIter = 300;
8 for (int j = 0; j < nIter; j++)
9 {
        // Record the start event    
11      error = cudaEventRecord(start, NULL);
12      matrixMulCUDA2<<< grid, threads >>>(...);
       // Record the stop event
13      error = cudaEventRecord(stop, NULL);
14      error = cudaEventSynchronize(stop);
15      float msec = 0.0f;
16      error = cudaEventElapsedTime(&msec, start, stop);
17      msecTotal+=msec;
18 }
19 cout<<"Total time = "<<msecTotal<<endl; 
```

我的问题是方法对吗？因为我不确定。显然，时间应该比正常时间更长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:49:33.003

无论哪种方式，您都应该得到类似的结果。通过记录内核启动周围的事件，您肯定只测量了在内核中花费的时间，而不是在 memcpy 上花费的任何时间。

我唯一的缺点是，通过在循环的每次迭代中调用 cudaEventSynchronize()，您正在破坏 CPU/GPU 并发，这实际上对于获得良好性能非常重要。如果您必须单独为每个内核调用计时（而不是将 nIter 迭代的 for 循环放在内核调用周围而不是整个操作），您可能需要分配更多的 CUDA 事件。如果您走那条路，则每次循环迭代不需要 2 个事件 - 您需要用两个括号括起操作，并且每次循环迭代只需要记录一个 CUDA 事件。然后可以通过对相邻记录的事件调用 cudaEventElapsedTime() 来计算任何给定内核调用的时间。

记录 N 个事件之间的 GPU 时间：

`cudaEvent_t events[N+2];`

```
cudaEventRecord( events[0], NULL ); // record first event
for (j = 0; j < nIter; j++ ) {
    // invoke kernel, or do something else you want to time
    // cudaEventRecord( events[j+1], NULL );
}
cudaEventRecord( events[j], NULL );
// to compute the time taken for operation i, call:
float ms;
cudaEventElapsedTime( &ms, events[i+1], events[i] ); 
```

# php - PHP APC 不缓存混合的 php/html 文件

> ID：12989424
> 
> 赞同：1
> 
> 时间：2012-10-20T14:29:36.620
> 
> 标签：php, performance, apc

我通过 APC 管理器看到，APC 只缓存“纯”php 文件，而混合了 php 和原始 html 的文件不会被缓存。这个问题是否存在解决方案？

这是一个混合代码的例子：

```
<html>
<p>fgsfsdfs <?php echo "test" ?></p>
</html> 
```

我可以解决，包括 php“回声函数”中的所有原始 html 吗？在这种情况下性能如何？

# python - 带有python正则表达式的可变长度流记录？

> ID：12989425
> 
> 赞同：2
> 
> 时间：2012-10-20T14:29:47.400
> 
> 标签：python, regex, telnetlib

我正在使用[telnetlib](http://docs.python.org/library/telnetlib.html)远程登录我的设备。设备返回可变长度记录，不带分隔符。

每条记录的开头都有一个日期和时间，我可以将其用作分隔符。

如何使用[Telnet.expect(list[, timeout])](http://docs.python.org/library/telnetlib.html#telnetlib.Telnet.expect)来分隔记录。

示例流：

```
10/20/12_17:58:24 TEXT TEXT TEXT TEXT ..........
                  TEXT TEXT TEXT TEXT ..........
                  TEXT TEXT TEXTTEXT ..........
                  TEXT TEXT TEXTTEXT ..........

10/20/12_17:58:28  TEXT TEXT TEXTTEXT ..........
     TEXT TEXT TEXTTEXT .......... TEXT TEXT TEXTTEXT .......... TEXT TEXT TEXTTEXT ..

10/20/12_17:58:34  TEXT TEXT TEXTTEXT ..........
                 TEXT TEXT TEXTTEXT ..........
                 TEXT TEXT TEXTTEXT ..........

10/20/12_17:59:25  TEXT TEXT TEXTTEXT ..........
      TEXT TEXT TEXTTEXT .......... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:36:13.030

似乎每行都以空格开头，如果它不是记录的第一行。

如果这是正确的，则使用正则表达式模式`^(?!\s)`或`[\n\r](?!\s)`作为分隔符。

如果这不正确，则作为分隔符使用正则表达式模式`^(?=\d+\/\d+\/\d+_\d+:\d+:\d+\s)`或`[\n\r](?=\d+\/\d+\/\d+_\d+:\d+:\d+\s)`

# android - 如何在我的 Android 应用程序中使用 OAuth？

> ID：12989426
> 
> 赞同：0
> 
> 时间：2012-10-20T14:29:56.380
> 
> 标签：android, login, oauth, jersey

当客户端登录到服务器时，我只会得到一个令牌。然后我将它存储在客户端的 SQLite 数据库中，也存储在服务器的数据库中。当应用程序再次运行时，只需将用户名+令牌（来自 SQLite 数据库）与来自服务器（MySQL）数据库的用户名+令牌进行比较，当它们通过时，用户正在登录（用户保持登录状态）。我在 Eclipse Tomcat Servlet (Jersey) 中使用。抱歉拼写错误，我不会说英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:19:23.080

我只是将令牌作为 HTTP 标头包含在每个请求中。您可以添加一个名为“令牌”（或任何您想要的）的标头，您的服务器将获得该标头。您可以将其与服务器数据库中的进行比较，如果数据库中没有该令牌，则返回 HTTP Unauthorized 错误。

# c# - 鼠标在屏幕上的位置

> ID：12989427
> 
> 赞同：1
> 
> 时间：2012-10-20T14:30:14.473
> 
> 标签：c#, mouse, mouseevent, mousemove

我有一个表格，里面有一个文本框。当我启动我的应用程序时，我希望该文本框包含屏幕上的光标位置，即使光标不在我的表单中。我怎样才能做到这一点？

我的代码如下，但仅当光标位于表单上时才有效：

```
protected override void OnMouseMove( MouseEventArgs e )
{
    mousePos.Text = Cursor.Position.ToString();

    base.OnMouseMove( e );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:33:22.947

以 100 毫秒的间隔创建一个`System.Windows.Forms.Timer`，并将您的函数放入`Timer.Tick`事件处理程序中。

# objective-c - 播放流后音频队列无法录制音频

> ID：12989432
> 
> 赞同：0
> 
> 时间：2012-10-20T14:30:48.247
> 
> 标签：objective-c, ios, audio, audioqueue

我正在使用 Mat Gallager 的音频流媒体播放音频流。在程序的另一点（不同的控制器），我试图从设备的麦克风录制一些东西。

这是我的设置：

```
void SFIdentificator::startRecord() 
```

{ int i, bufferByteSize; UInt32 大小；

```
try {
    numberOfPackets = 0;

    // specify the recording format
    SetupAudioFormat(kAudioFormatLinearPCM);

    AudioQueueNewInput(  &mRecordFormat,
                       MyInputBufferHandler,
                       this /* userData */,
                       CFRunLoopGetMain() /* run loop */, kCFRunLoopCommonModes /* run loop mode */,
                       0 /* flags */, &mQueue);
    mRecordPacket = 0;

    size = sizeof(mRecordFormat);
    AudioQueueGetProperty(mQueue, kAudioQueueProperty_StreamDescription, &mRecordFormat, &size);

    bufferByteSize = ComputeRecordBufferSize(&mRecordFormat, kBufferDurationSeconds);   // enough bytes for half a second

    size = sizeof(mRecordFormat);
    XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_StreamDescription,
                                        &mRecordFormat, &size), "couldn't get queue's format");

    for (i = 0; i < kNumberRecordBuffers; ++i) {
        XThrowIfError(AudioQueueAllocateBuffer(mQueue, bufferByteSize, &mBuffers[i]), "AudioQueueAllocateBuffer failed");
        XThrowIfError(AudioQueueEnqueueBuffer(mQueue, mBuffers[i], 0, NULL), "AudioQueueEnqueueBuffer failed");
    }
    mIsRunning = true;

    XThrowIfError(AudioQueueStart(mQueue, NULL), "AudioQueueStart failed");

} catch (CAXException e) {
    char buf[256];
    fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
}catch (...) {
    fprintf(stderr, "An unknown error occurred\n");;
} 
```

}

```
void SFIdentificator::SetupAudioFormat(UInt32 inFormatID) 
```

{ memset(&mRecordFormat, 0, sizeof(mRecordFormat));

```
UInt32 size = sizeof(mRecordFormat.mSampleRate);
XThrowIfError(AudioSessionGetProperty(  kAudioSessionProperty_CurrentHardwareSampleRate, &size, &mRecordFormat.mSampleRate), "couldn't get hardware sample rate");

size = sizeof(mRecordFormat.mChannelsPerFrame);
XThrowIfError(AudioSessionGetProperty(  kAudioSessionProperty_CurrentHardwareInputNumberChannels, &size, &mRecordFormat.mChannelsPerFrame), "couldn't get input channel count");

mRecordFormat.mFormatID = inFormatID;
if (inFormatID == kAudioFormatLinearPCM){
    // if we want pcm, default to signed 16-bit little-endian

    mRecordFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;
    //      mRecordFormat.mBitsPerChannel = 16;

    mRecordFormat.mBytesPerPacket = mRecordFormat.mBytesPerFrame = (mRecordFormat.mBitsPerChannel / 8) * mRecordFormat.mChannelsPerFrame;
    mRecordFormat.mFramesPerPacket = 1;

    mRecordFormat.mFormatID         = kAudioFormatLinearPCM;
    mRecordFormat.mSampleRate       = 32000.0;
    mRecordFormat.mChannelsPerFrame = 1;
    mRecordFormat.mBitsPerChannel   = 16;
    mRecordFormat.mBytesPerPacket   =  mRecordFormat.mBytesPerFrame = mRecordFormat.mChannelsPerFrame * sizeof (SInt16);
    mRecordFormat.mFramesPerPacket  = 1;
} 
```

}

```
UInt32 SFIdentificator::ComputeRecordBufferSize(const AudioStreamBasicDescription *format, float seconds){
static const int maxBufferSize = 0x50000;

int maxPacketSize = format->mBytesPerPacket;
if (maxPacketSize == 0) {
    UInt32 maxVBRPacketSize = sizeof(maxPacketSize);
    AudioQueueGetProperty (mQueue, kAudioQueueProperty_MaximumOutputPacketSize, &maxPacketSize, &maxVBRPacketSize);
}

Float64 numBytesForTime = DataFormat().mSampleRate * maxPacketSize * seconds;
//    *outBufferSize = (UInt32)(numBytesForTime < maxBufferSize ? numBytesForTime : maxBufferSize);
return (UInt32)(numBytesForTime < maxBufferSize ? numBytesForTime : maxBufferSize); 
```

}

看来，如果我先使用 AudioStreamer 类并稍后尝试录制某些内容，则甚至不会调用 Callback。但如果我不先使用 AudioStreamer，一切都很好。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:14:51.390

回答我自己的问题，正确设置 AudioSession 对象的 init() 是一个问题。每个会话只应执行一次，再执行一次将导致错误，我已确定无法记录流。但是，即使第二次初始化失败（当然第一次成功），我也可以记录流。

# zend-framework - Zend 表单中组合字段的重复验证

> ID：12989438
> 
> 赞同：1
> 
> 时间：2012-10-20T14:31:28.580
> 
> 标签：zend-framework, zend-form, zend-validate

您好，我有一个表格，其中三个字段的组合是`unique`. 我想对这个组合进行重复检查。表看起来像

![在此处输入图像描述](../Images/bc097cedfccacf5f3d47332d947ec6fe.png)

我知道如何验证单个字段，但不知道如何验证组合。为了验证一个字段，我使用以下函数

```
public function isValid($data) {

    // Options for name field validation
    $options = array(
        'adapter' => Zend_Db_Table::getDefaultAdapter(),
        'table' => 'currencies',
        'field' => 'name',
         'message'=> ('this currency name already exists in our DB'),
    );

    // Exclude if a id is given (edit action)
    if (isset($data['id'])) {
        $options['exclude'] = array('field' => 'id', 'value' => $data['id']);
    }

    // Validate that name  is not already in use
    $this->getElement('name')
            ->addValidator('Db_NoRecordExists', false, $options

    );

    return parent::isValid($data);
} 
```

有人会指导我如何验证组合字段上的重复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:06:13.147

据我所知，没有现成可用的验证器。您必须自己编写，或者使用三个条件（每个字段一个）使用 SQL 查询进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:38:13.243

您必须对 zend 表单的名称元素应用验证。这是在名称字段上添加验证的代码。

```
$name->addValidator(
    'Db_NoRecordExists', 
    true, 
    array(
        'table' => 'currencies',
        'field' => 'name',
        'messages' => array( "recordFound" => "This Currency Name already exists in our DB") ,

    )
); 
```

并且您必须将 required 设置为 true。

# javascript - 使用 formData() 上传多个文件

> ID：12989442
> 
> 赞同：109
> 
> 时间：2012-10-20T14:32:16.460
> 
> 标签：javascript, arrays, upload, xmlhttprequest

```
var fd = new FormData();
fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
var xhr = new XMLHttpRequest();
xhr.open("POST", "uph.php");
xhr.send(fd); 
```

uph.php：

```
var_dump($_FILES['fileToUpload']); 
```

这有效，但显然是`files[0]`唯一的。如何使它适用于所选文件？

我尝试删除`[0]`，但它没有工作。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-16T07:58:24.540

您必须获取要附加到 JS 中的文件长度，然后通过 AJAX 请求发送，如下所示

```
//JavaScript 
var ins = document.getElementById('fileToUpload').files.length;
for (var x = 0; x < ins; x++) {
    fd.append("fileToUpload[]", document.getElementById('fileToUpload').files[x]);
}

//PHP
$count = count($_FILES['fileToUpload']['name']);
for ($i = 0; $i < $count; $i++) {
    echo 'Name: '.$_FILES['fileToUpload']['name'][$i].'<br/>';
} 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2016-03-28T06:44:55.000

使用javascript的方法：

```
var data = new FormData();

$.each($("input[type='file']")[0].files, function(i, file) {
    data.append('file', file);
});

$.ajax({
    type: 'POST',
    url: '/your/url',
    cache: false,
    contentType: false,
    processData: false,
    data : data,
    success: function(result){
        console.log(result);
    },
    error: function(err){
        console.log(err);
    }
}) 
```

如果您多次调用 data.append('file', file) 您的请求将包含您的文件数组。

[来自 MDN 网络文档](https://developer.mozilla.org/en-US/docs/Web/API/FormData/append)：

> “接口的`append()`方法`FormData`将新值附加到对象内部的现有键上`FormData`，或者如果它不存在则添加该键`FormData.se`。t 和之间的区别在于`append()`，如果指定的键已经存在，`FormData.set`将**覆盖**所有现有值新的，而`append()`将新值附加到现有值集的末尾。”

我自己使用 node.js 和 multipart handler 中间件 multer 获取数据如下：

```
router.post('/trip/save', upload.array('file', 10), function(req, res){
    // Your array of files is in req.files
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-09T12:09:32.463

你只需要使用`fileToUpload[]`而不是`fileToUpload`：

```
fd.append("fileToUpload[]", document.getElementById('fileToUpload').files[0]); 
```

它将返回一个具有多个名称、大小等的数组......

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-04-21T10:07:04.740

这对我有用：

```
let formData = new FormData()
formData.append('files', file1)
formData.append('files', file2) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-06-27T15:42:18.257

这个对我有用

```
//Javascript part
//file_input is a file input id
var formData = new FormData();
var filesLength=document.getElementById('file_input').files.length;
for(var i=0;i<filesLength;i++){
	formData.append("file[]", document.getElementById('file_input').files[i]);
}
$.ajax({
   url: 'upload.php',
   type: 'POST',
   data: formData,
   contentType: false,
   cache: false,
   processData: false,
   success: function (html) {

  }
});
```

```
<?php
//PHP part
$file_names = $_FILES["file"]["name"];
for ($i = 0; $i < count($file_names); $i++) {
   $file_name=$file_names[$i];
   $extension = end(explode(".", $file_name));
   $original_file_name = pathinfo($file_name, PATHINFO_FILENAME);
   $file_url = $original_file_name . "-" . date("YmdHis") . "." . $extension;
 move_uploaded_file($_FILES["file"]["tmp_name"][$i], $absolute_destination . $file_url);
}
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-10-01T12:35:04.853

在附加到 fd 时添加`[]`有效，但是如果您希望按文件对数据进行分组，那么我建议您这样做：

```
var files= document.getElementById('inpFile').files
var fd = new FormData()

for (let i = 0; i < files.length; i++) {
  fd.append(i, files[i])
} 
```

现在您的数据将按文件分组发送，而不是按属性分组。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-09-07T20:40:19.470

这很好用！

```
var fd = new FormData();

$('input[type="file"]').on('change', function (e) {
    [].forEach.call(this.files, function (file) {
        fd.append('filename[]', file);
    });
});

$.ajax({
    url: '/url/to/post/on',
    method: 'post',
    data: fd,
    contentType: false,
    processData: false,
    success: function (response) {
        console.log(response)
    },
    error: function (err) {
        console.log(err);
    }
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-04-20T12:18:42.683

这对我有用

```
var ins = $('.file').map(function () {
    return this.files;
}).get();

for (var x = 0; x < ins; x++) {
    formData.append("file", ins[x][0]);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-08-04T13:06:14.487

如果我们在 html 中有输入：

```
<input id="my-input" type="file" mutliple /> // multiple attribute to select and upload multiple files 
```

我们可以从该输入中获取文件并使用纯 js 脚本将其发送到服务器：

```
const myInput = document.getElementById('my-input') // getting our input

myInput.addEventListener('change', (event) => { // listening for file uploads
    const files = event.target.files // getting our files after upload
    const formData = new FormData() // create formData

    for (const file of files) {
        formData.append('files', file) // appending every file to formdata
    }

    const URL = 'http://server.com:3000'
    const response = fetch(URL, {
       method: 'POST',
       data: formData // sending our formdata in body of post request
    })

    return response.json() 
} 
```

它对我来说很完美

PS：我`multer`在后端使用（node.js + express），添加到文件上传路由

```
upload.array("files", 10) 
```

*   第一个参数是我们文件的属性名称（在 formdata 中）
*   第二个参数是最大文件大小

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-03-27T14:46:05.833

我的工作是这样的：

```
var images = document.getElementById('fileupload').files;
var formData = new FormData();
for(i=0; i<images.length; i++) {
     formData.append('files', images[i]);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-02T12:34:34.147

要上传带有角度表单数据的多个文件，请确保您的 component.html 中有此文件

**上传文件**

```
 <div class="row">

                  <div class="col-md-4">
                     &nbsp; <small class="text-center">  Driver  Photo</small>
                    <div class="form-group">
                      <input  (change)="onFileSelected($event, 'profilepic')"  type="file" class="form-control" >
                    </div>
                  </div>

                  <div class="col-md-4">
                     &nbsp; <small> Driver ID</small>
                    <div class="form-group">
                      <input  (change)="onFileSelected($event, 'id')"  type="file" class="form-control" >
                    </div>
                  </div>

                  <div class="col-md-4">
                    &nbsp; <small>Driving Permit</small>
                    <div class="form-group">
                      <input type="file"  (change)="onFileSelected($event, 'drivingpermit')" class="form-control"  />
                    </div>
                  </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                       &nbsp; <small>Car Registration</small>
                      <div class="form-group">
                        <div class="input-group mb-4">
                            <input class="form-control" 
                (change)="onFileSelected($event, 'carregistration')" type="file"> <br>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-6">
                        <small id="li"> Car Insurance</small>
                      <div class="form-group">
                        <div class="input-group mb-4">
                          <input class="form-control" (change)="onFileSelected($event, 

                         'insurancedocs')"   type="file">
                        </div>
                      </div>
                    </div>

                  </div>

                <div style="align-items:c" class="modal-footer">
                    <button type="button" class="btn btn-secondary" data- 
                  dismiss="modal">Close</button>
                    <button class="btn btn-primary"  (click)="uploadFiles()">Upload 
                  Files</button>
                  </div>
              </form> 
```

在您的 componenet.ts 文件中声明数组选择的文件，如下所示

```
selectedFiles = []; 
```

// 选定文件的数组

```
onFileSelected(event, type) {
    this.selectedFiles.push({ type, file: event.target.files[0] });
  } 
```

//在上传文件方法中，像这样附加您的表单数据

```
uploadFiles() {
    const formData = new FormData(); 

    this.selectedFiles.forEach(file => {
      formData.append(file.type, file.file, file.file.name); 
    });
    formData.append("driverid", this.driverid);

    this.driverService.uploadDriverDetails(formData).subscribe(
      res => {
        console.log(res); 

      },
      error => console.log(error.message)
    );
  } 
```

注意：我希望这个解决方案对你的朋友有用

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-25T14:53:24.983

如果您正在实例化已经将表单作为构造函数参数传递的 FormData 对象，则输入文件的名称属性必须包含方括号。

HTML：

```
<form id="myForm" method="POST" action="url" enctype="multipart/form-data">
<input class="form-control form-control-lg" type="file" name="photos[]" multiple /> 
```

JS：

```
var formData = new FormData(document.getElementById('myForm'));
console.log(formData.getAll('photos[]')); 
```

这对我有用！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-01-17T08:48:40.173

我为我找到了这份工作！

```
var fd = new FormData();
$.each($('.modal-banner [type=file]'), function(index, file) {
  fd.append('item[]', $('input[type=file]')[index].files[0]);
});

$.ajax({
  type: 'POST',
  url: 'your/path/', 
  data: fd,
  dataType: 'json',
  contentType: false,
  processData: false,
  cache: false,
  success: function (response) {
    console.log(response);
  },
  error: function(err){
    console.log(err);
  }
}).done(function() {
  // do something....
});
return false; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-21T05:15:40.470

这是针对此问题的**Vanilla JavaScript解决方案 -**

首先，我们将使用`Array.prototype.forEach()`方法，如

`document.querySelectorAll('input[type=file]')`返回一个**类似 object 的数组**。

然后我们将使用该方法将**类数组对象**`Function.prototype.call()`中的每个元素分配给该方法中的值。**`this``.forEach`**

 ****HTML**

```
<form id="myForm">

    <input type="file" name="myFile" id="myFile_1">
    <input type="file" name="myFile" id="myFile_2">
    <input type="file" name="myFile" id="myFile_3">

    <button type="button" onclick="saveData()">Save</button>

</form> 
```

**JavaScript**

```
 function saveData(){
     var data = new FormData(document.getElementById("myForm"));
     var inputs = document.querySelectorAll('input[type=file]');

     Array.prototype.forEach.call(inputs[0].files, function(index){
        data.append('files', index);
     });
     console.log(data.getAll("myFile"));
} 
```

**[您可以在此处](https://codepen.io/bappidas/pen/BaabxrX)查看相同的工作示例**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-01T12:57:54.170

创建一个`FormData`对象

```
const formData: any = new FormData(); 
```

并附加到相同的 keyName

```
photos.forEach((_photoInfo: { localUri: string, file: File }) => {
    formData.append("file", _photoInfo.file);
}); 
```

并将其发送到服务器

```
// angular code
this.http.post(url, formData) 
```

这将自动在下创建一个对象数组`file`

如果您使用的是 nodejs

```
const files :File[] = req.files ? req.files.file : null; 
```**

# android - 以编程方式在android中将下划线文本设置为TextView

> ID：12989445
> 
> 赞同：48
> 
> 时间：2012-10-20T14:33:15.333
> 
> 标签：android, android-widget

我想知道如何在android中为TextView设置下划线文本？请注意，我无法使用预填充的字符串设置 strings.xml 是否有任何方法可以在 Android 中使用纯 Java 代码添加它。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-20T14:48:00.100

试试这个代码：

```
 textview.setPaintFlags(textview.getPaintFlags()| Paint.UNDERLINE_TEXT_FLAG); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-20T14:56:35.530

这是最简单的方法

```
TextView theTextView = new TextView(this);

theTextView.setText(Html.fromHtml("<u>Text to underline</u>")); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-20T14:53:48.123

试试这个：

```
TextView myTextView = new TextView(this);
SpannableString mySpannableString = new SpannableString("My String");
mySpannableString.setSpan(new UnderlineSpan(), 0, mySpannableString.length(), 0);
myTextView.setText(mySpannableString); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-07-10T06:00:27.030

**科特林方式**

```
textview.paintFlags = Paint.UNDERLINE_TEXT_FLAG 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-02-24T11:01:58.820

我不知道是否有人仍然对这个话题感兴趣，但我发现了

`textview.setTypeface(Typeface.NORMAL);`对我不起作用。

我的解决方案是这个片段`textView.setPaintFlags(0);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-05T21:11:16.267

这是下划线文本的**Kotlin 扩展**

```
fun String.underLine(): SpannableString {
    val spanStr = SpannableString(this)
    spanStr.setSpan(UnderlineSpan(), 0, spanStr.length, 0)
    return spanStr
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-16T01:17:37.857

对于 kotlin .. 使用 HtmlCompat.fromHtml() 方法为 textview 或字符串添加下划线

```
val html = "<u> The text you want to underline </u>"
textview11.text = HtmlCompat.fromHtml(html, HtmlCompat.FROM_HTML_MODE_LEGACY) 
```

用于布局 xml

```
<string name="text_underline"><u> The text you want to underline </u></string> 
```

# java - java 不解析 'M dd, yyyy' 日期格式

> ID：12989446
> 
> 赞同：0
> 
> 时间：2012-10-20T14:33:19.277
> 
> 标签：java, date-format

我想解析日期字符串，例如`"February 7, 2011"`使用`"M dd, yyyy"`格式。但我有一个例外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:36:51.777

试试这个代码。我用两个日期“2012 年 11 月 20 日”和“1957 年 1 月 4 日”运行它并得到以下输出：

```
arg: November 20, 2012 date: Tue Nov 20 00:00:00 EST 2012
arg: January 4, 1957 date: Fri Jan 04 00:00:00 EST 1957 
```

它工作正常。你的正则表达式是错误的。

```
package cruft;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * DateValidator
 * @author Michael
 * @since 12/24/10
 */
public class DateValidator {
    private static final DateFormat DEFAULT_FORMATTER;

    static {
        DEFAULT_FORMATTER = new SimpleDateFormat("MMM dd, yyyy");
        DEFAULT_FORMATTER.setLenient(false);
    }

    public static void main(String[] args) {
        for (String dateString : args) {
            try {
                System.out.println("arg: " + dateString + " date: " + convertDateString(dateString));
            } catch (ParseException e) {
                System.out.println("could not parse " + dateString);
            }
        }
    }

    public static Date convertDateString(String dateString) throws ParseException {
        return DEFAULT_FORMATTER.parse(dateString);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:42:58.907

*   如其他人所述，您的解析字符串不正确
*   要正确解析`February`，您需要使用英语语言环境，否则如果您的默认语言环境不是英语，它可能会失败

```
DateFormat df = new SimpleDateFormat("MMM dd, yyyy", Locale.ENGLISH);
Date dt = df.parse("February 7, 2011"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:37:54.007

您将要使用“MMM dd, yyyy”

```
SimpleDateFormat("MMM dd, yyyy").parse("February 7, 2011") 
```

请参见[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T14:38:15.417

假设您使用`SimpleDateFormat`的是 ，月份格式不正确，应该是`MMM dd, yyyy`

`MMM`将匹配月份的长文本格式：

```
String str = "February 7, 2011";
SimpleDateFormat format = new SimpleDateFormat("MMM dd, yyyy");
Date date = format.parse(str); 
```

# javascript - 如何在 javascript 事件中获取验证组？

> ID：12989452
> 
> 赞同：0
> 
> 时间：2012-10-20T14:33:50.953
> 
> 标签：javascript, jquery, .net, validation

我有一个带有验证组的按钮。

按钮单击事件调用 jquery 函数，因此我可以使用该事件。（不使用 onclientclick）

如何使用事件获取与按钮关联的验证组？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T09:47:07.860

如果您想在 java 脚本执行之前验证表单，您可以使用以下内容。

```
function myFunction()
{
  if (Page_ClientValidation(validationgroupname))
    {
   /*do my work here*/
    }
 } 
```

# c++ - 是否可以从 C/C++ 代码中丢弃基于 Linux 上（一组动态变化的）IP 地址的传入数据包？

> ID：12989458
> 
> 赞同：5
> 
> 时间：2012-10-20T14:34:46.887
> 
> 标签：c++, linux, networking

我正在研究基于 Linux 机器上的 IP 地址过滤传入 UDP 流量的可能性，完全丢弃与任何过滤器地址匹配的数据包。我感兴趣的 IP 地址集是动态（并且经常）变化的，并且是先验未知的。被认为被丢弃的数据包应该跳过所有进一步的处理。我可以向进程授予 CAP_NET_RAW 功能，但不想编写自己的驱动程序或修改内核。

## 背景资料

我用来紧凑地表示大量 IP 地址的实用方法是布隆过滤器。这种方法已经被作为设备驱动程序实现的动态数据包过滤方法使用：

[http://luca.ntop.org/Blooms.pdf](http://luca.ntop.org/Blooms.pdf)

但是，我有用户级代码，无法调整内核或编写自己的设备驱动程序。

同样，我已经有了一个解决方案，它可以基于 PF_PACKET 套接字和 RX_RING 以有效的方式基于 IP 地址嗅探数据包，就像在 netsniff-ng 中所做的那样：

[http://netsniff-ng.org/](http://netsniff-ng.org/)

我的方法是扩展 netsniff（或 tcpdump 或 Wireshark）中的捕获机制，使用 Bloom 过滤器原理进行扩展，以获得更紧凑的 Berkeley Packet Filter (BPF) 程序。这非常有效，但副作用是即使过滤器丢弃了数据包（因此它不会出现在 RX_RING 中），它仍然会在内核中继续它的旅程。最终，如果接收到的大部分过滤流量（大部分是合成的，就像 netsniff 的 trafgen 一样）没有打开的套接字，就会`destination-unreachable`生成 ICMP 消息。

以不同方式提出的问题是，在网络堆栈处理的早期阶段，是否存在基于自定义代码（例如，使用 Bloom 过滤器）有选择地丢弃流量的 C/C++ 方法？

我已经查看了基于 iptables 的方法，但是通过 iptables-restore 管理防火墙规则对于该场景来说似乎太麻烦了。此外，这些地址不是连续的 IP 地址集，因此会导致一长串要测试的单独地址。

由于涉及的流量很大，效率是一个关键方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:38:29.133

您可能想尝试`iptables`使用`libipq`和`libiptc`库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:35:58.757

这个答案不会为有选择地丢弃流量提供太多帮助，但是您可以考虑使用[Patricia trie](http://en.wikipedia.org/wiki/Patricia_trie)（基数树）来表示和查找 IP 地址，而不是 Bloom 过滤器？在工作中，我们必须存储和查找大量动态 IP 地址和范围，并且发现 Patricia trie 是最有效的。

顺便说一句，我尝试加载 Bloom 链接，但它不会为我加载。

# c# - 无法从我的 class.cs 调用方法

> ID：12989462
> 
> 赞同：0
> 
> 时间：2012-10-20T14:35:54.827
> 
> 标签：c#, visual-studio-2010, button, methods

我需要在我的学生班中编写 2 个方法来执行以下操作

hasPassed() 如果学生的年分 >= 40 则返回 True，如果分数 <40 则返回 false

toString() 应该返回一个字符串，其中包含班级内保存的学生详细信息的摘要，例如“12345 Basil Fawlty, 23/08/1946”</p>

这是我对上述方法的代码，我对上面的要求是否正确？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CourseWork
{
    public class Student
    {
        private static string firstname;
        private string secondname;
        private string dateofbirth;
        private string course;
        private int matricnumber;
        private double yearmark;

      public bool hasPassed()
        {
            if (yearmark >= 40)
                return true;
            else
                return false;
        }

      public void toString()
      {
          firstname = "Basil";
          secondname = "Fawlty";
          dateofbirth = "23/08/1946";
          course = "MA Hotel Management";
          matricnumber = 12345;
          yearmark = 55;
      }

        public Student()
        {
        }

        public string FirstName
        {
            get { return firstname; }
            set { firstname = value; }
        }

        public string SecondName
        {
            get { return secondname; }
            set { secondname = value; }
        }
        public string DateOfBirth
        {
            get { return dateofbirth; }
            set { dateofbirth = value; }
        }

        public string Course
        {
            get { return course; }
            set { course = value; }
        }
        public int MatricNumber
        {
            get { return matricnumber; }
            set
            {
                if (value <= 99999 && value >= 10000)
                {
                    matricnumber = value;
                }
                else
                {
                    Console.WriteLine("Invalid Matric Number: {0}", value);
                }

              matricnumber = value;
            }
        }
        public double YearMark
        {
            set
            {
                if (value <= 100 && value >= 0)
                {
                    yearmark = value;
                }
                else
                {
                    Console.WriteLine("Invalid Year Mark: {0}", value);
                }
              yearmark = value;
            }

        }
    } 
```

然后我需要在执行以下操作的获取按钮中使用上述方法

Get：使用 Student 类方法的值来更新文本框。Student.hasPassed() 方法应该用于更新通过/失败标签。应使用 Student.toString () 更新学生详细信息摘要。

但我在编码时遇到了问题，我无法从我的学生班调用 hasPassed() 方法或 toString() 方法

所以我做错了什么，但看不出有什么想法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:39:33.927

为了使这些方法可见，您需要创建一个类的实例`Student`。前任，

```
Student _student = new Student();
bool _x = _student.hasPassed(); 
```

如果您希望成员无需实例化即可访问，请将成员设为静态，

```
 public static bool hasPassed()
  {
        if (yearmark >= 40)
            return true;
        else
            return false;
  } 
```

但请记住，静态成员看不到非静态成员。在这种情况下，它不会编译，因为`yearmark`找不到。

# php - PHP 文件大小错误统计失败

> ID：12989463
> 
> 赞同：0
> 
> 时间：2012-10-20T14:35:55.467
> 
> 标签：php, filesize, getfiles

我正在使用这个简单的代码来捕获文件大小：

```
$photoSIZE = filesize($_FILES['photo']['name']);
$attachSIZE = filesize($_FILES['attach']['name']); 
```

我收到错误：

```
filesize() [function.filesize]: stat failed 
```

我上传了一个 21mb 的文件

应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:45:10.560

无需调用filesize()，即可获取上传文件的大小，如下：

```
$photoSIZE = $_FILES['photo']['size'];
$attachSIZE = $_FILES['attach']['size']; 
```

或者，您可以像以前一样使用 filesize() ，但您必须在保存上传文件路径的 tmp_name var 上执行此操作，如下所示：

```
$photoSIZE = filesize( $_FILES['photo']['tmp_name'] );
$attachSIZE = filesize( $_FILES['attach']['tmp_name'] ); 
```

查看[PHP 文件上传文档](http://www.php.net/manual/en/features.file-upload.post-method.php)以获取有关这些变量的更多信息。

# javascript - 开始骨干 - 下划线不能调用 null 的替换

> ID：12989469
> 
> 赞同：0
> 
> 时间：2012-10-20T14:36:19.547
> 
> 标签：javascript, backbone.js, underscore.js

我刚刚开始使用 Backbone 并完成了一个教程。我跟着并输入了代码，当我到最后（整个测试我得到`underscore cannot call 'replace' of null`

就像我说的 - 刚刚开始，所以任何关于如何修复以及为什么它坏了的信息都会很棒！

**HTML**

```
<!-- ## CART CONTAINER ## -->
<div id="yourcart"></div>

<!-- ## SCRIPTS ## -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/underscore.js"></script>
<script src="js/backbone.js"></script>
<script src="js/cart.js"></script>

<!-- ## TEMPLATE ## -->
<script id="itemTemplate" type="text/template">
    <img src="<%= photo %>" alt="<%= title %>">
    <div>
        <h2><%= title %></h2>
        <h4>&pound;<%= price %></h4>
    </div>
</script> 
```

**JAVASCRIPT**

```
//  MODEL

var Item = Backbone.Model.extend({

  defaults: {

    price: 35,
    photo: "http://www.placedog.com/100/100"

  }

});

//  COLLECTION

var Cart = Backbone.Collection.extend({

  model: Item

});

var items = [

  { title: "Macbook Air", price: 799 },
  { title: "Macbook Pro", price: 999 },
  { title: "The New iPad", price: 399 },
  { title: "Magic Mouse", price: 50 },
  { title: "Cinema Display", price: 799 }

];

var cartCollection = new Cart(items);

// ITEM VIEW

var ItemView = Backbone.View.extend({

  tagName: "div",
  className: "item-wrap",
  template: $('#itemTemplate').html(),

  render: function() {
    var templ = _.template(this.template);
    this.$el.html(templ(this.model.toJSON()));
    return this;
  }

});

// COLLECTION VIEW

var CartCollectionView = Backbone.View.extend({

  el: $('#yourcart'),
  initialize: function() {
    this.collection = cartCollection;
    this.render();
  },
  render: function() {
    this.collection.each(function(item) {
        this.renderItem(item);
    }, this);
  },
  renderItem: function(item) {
    var itemView = new ItemView({ model: item });
    this.$el.append(itemView.render().el);
  }

});

$(function() {  
  var cart = new CartCollectionView();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:49:21.257

没有看到有关`HTML`/位置的任何信息`Scripts`，但是一旦我将`template`代码移到其余脚本之上，它就可以完美运行。

# java - GitHub为maven项目添加外部库

> ID：12989472
> 
> 赞同：2
> 
> 时间：2012-10-20T14:36:46.597
> 
> 标签：java, maven, github

我想构建我的项目以使用 maven，但我在依赖项中有一个外部库。我找到了有关如何执行此操作的信息。 [http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/#fn2](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/#fn2) 它非常适合在 maven 中构建的库。我检查了它。:) 但是当我开始这样做时，我遇到了问题。所有的库都应该有严格的结构，比如 meta-info.pom 等等。我不知道如何为外部库生成这些文件。你能帮我吗？您忠诚的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:15:15.627

这实际上是非常普遍的做法。许多不在“Maven Central”中的 OSS 库可作为托管在 Google Code 上的 Maven 存储库使用。

执行此操作的方法是为您的`<distributionManagement>`配置配置“SCM Wagon”。如果你手动构建目录结构是不够的。您应该使用链接的博客文章和此处列出的方法：[Maevn Wagon SCM](http://maven.apache.org/wagon/wagon-providers/wagon-scm/usage.html)

其中一节题为“将您的 Maven 站点部署到 GitHub 的 gh-pages”。我怀疑这正是你要找的。

# perl - 如何很好地关闭 Perl dancer 应用程序

> ID：12989475
> 
> 赞同：0
> 
> 时间：2012-10-20T14:36:53.210
> 
> 标签：perl, apache, signals, fastcgi, dancer

我在 FCGI 模式 (Apache) 下与同一个用户同时运行多个 Perl dancer 应用程序。正如我正确理解的那样，如果当前的应用程序很忙，Apache（或任何其他网络服务器）将派生一个新的舞者应用程序。

为了确保没有访客被舞者关闭中断，我喜欢让舞者处理当前连接，直到它完成然后`exit`/`last`过程。

如何使用 kill 信号关闭 Perl dancer 应用程序`HUP`以执行如此好的关闭？

为了推出新版本的舞者应用程序，我使用`pkill -HUP perl`舞者用户“关闭”进程。但是目前（由于缺少信号处理程序）更像是在*关闭应用程序时将它们**击落*。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:25:10.800

[mugen kenichi](https://stackoverflow.com/questions/12989475/how-to-shutdown-perl-dancer-applications-nicely/13011436#comment17620439_12989475)的解决方案（`starman`）：

> 如果您能够更改您的基础设施，您可以尝试支持您需要的 plack 网络服务器之一。starman 和 hyponotoad 都在 SIGHUP 上优雅地重启

有一些缺点，`<% request.uri_base %>`所以我们必须使用硬编码的 URI 路径进行开发。不是很帅但是很有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:53:19.137

如果我正确阅读了您的问题，您担心 Apache/FCGI 可能会在处理请求的过程中杀死 Dancer 应用程序。那是对的吗？

如果是这样，请不要担心。Apache/FCGI 不这样做。当它因为现有实例很忙而派生处理程序的新实例时，这是现有实例*之外*的新实例。现有的将独自完成他们正在做的事情。*

# android - 画布布局无法正常工作

> ID：12989478
> 
> 赞同：0
> 
> 时间：2012-10-20T14:37:05.257
> 
> 标签：android, canvas, surfaceview, ondraw

我通过使用 OnDraw 方法在画布上绘制矩形创建了一个地图。这在三星 s2 上运行良好，但是当我将它安装在 s3 中时，画布似乎太小了。我该怎么办？

我使用 Surface 视图来绘制矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:32:33.073

Galaxy S2 是 hdpi 而 S3 是 xhdpi，所以这可能就是矩形看起来更小的原因。我建议覆盖 onMeasure 然后根据画布的当前高度和宽度设置矩形的高度和宽度。

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
int parentViewWidth = MeasureSpec.getSize(widthMeasureSpec);
int parentViewHeight = MeasureSpec.getSize(heightMeasureSpec);
// ... take into account the parent's size as needed ...
super.onMeasure(
    MeasureSpec.makeMeasureSpec(newWidth, MeasureSpec.EXACTLY), 
    MeasureSpec.makeMeasureSpec(newHeight, MeasureSpec.EXACTLY)); 
```

}

编辑：刚刚意识到您说您使用 SurfaceView 来绘制矩形而不是 View。在您的 onDraw 中，只需获取画布的当前高度和宽度，然后根据这些尺寸绘制矩形，而不是硬编码矩形的固定尺寸。希望这可以帮助

# php - 在 Shopify 中更新 1000 件商品的最佳方式是什么？

> ID：12989480
> 
> 赞同：2
> 
> 时间：2012-10-20T14:37:24.257
> 
> 标签：php, shopify

我正在使用 Shopify API，需要更新 1000 件商品的数量。当然，我可以调用 API 1000 次进行更新，但必须有更好的方法，因为 Shopify API 很慢，每次更新调用一次 API 都会达到 API 限制，更不用说只是被效率低下。Shopify API 不支持单个 API 调用的批量更新（在单个 PUT 请求中传递多个 id/JSON），那么有没有更好/最好的方法来做到这一点？

作为后续，我知道我可以每次更新只调用一个 API 并使用延迟处理错开它们以避免达到 API 限制，但这并不能真正解决主要问题，即需要制作一个每次更新的 API 调用。我希望某处有一些批量更新工具或其他方式来优化它，超越每个 API 一次更新，延迟，所以你不要超过 PI 限制，大量更新采取-a -长期当前的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:31:58.513

如果要更新 1000 个项目，则必须进行 1000 次调用。有几个例外：

1.  产品变体
2.  产品图片

这两个都可以通过将它们嵌套在对其父产品的调用下来批量更新。

# r - R quantmod 数据合并回归错误

> ID：12989483
> 
> 赞同：1
> 
> 时间：2012-10-20T14:37:42.103
> 
> 标签：r, regression, quantmod

此 R 代码会引发错误，即

> .xts(e, .index(e1), .indexCLASS = indexClass(e1), .indexFORMAT = indexFormat(e1), 中的错误：索引长度必须与观察数匹配

代码：

```
library('quantmod')
library('foreach')

JNK <- getSymbols('JNK', from='2010-01-01',auto.assign=FALSE)[,6]
GSPC <- getSymbols('^GSPC', from='2010-01-01',auto.assign=FALSE)[,6]

JNK <- diff(log(JNK))
GSPC <- diff(log(GSPC))

Data <- na.omit(merge(JNK,GSPC, all=FALSE))
m <- lm(JNK ~ GSPC, data=Data)
plot(m) 
```

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:46:29.827

的实际列名`Data`是`JNK.Adjusted`和`GSPC.Adjusted`。因此，您应该在`lm`调用中指定完整的名称：

```
m <- lm(JNK.Adjusted ~ GSPC.Adjusted, data=Data)
plot(m) 
```

否则，该`plot`函数将查找列`JNK`，`GSPC`但不会在`Data`.

# ios - Cocos2dX CCSpriteBatchNode - 无法加载 PVR 图像 Sprites.pvr.ccz

> ID：12989493
> 
> 赞同：1
> 
> 时间：2012-10-20T14:38:29.123
> 
> 标签：ios, cocos2d-x

我对 Cococs2dX CCBatchNode 有疑问。下面你可以看到我的部分源代码：

```
_batchNode = CCSpriteBatchNode::batchNodeWithFile("Sprites.pvr.ccz");
this->addChild(_batchNode);
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("Sprites.plist"); 
```

完整的错误日志是这样的：

```
Cocos2d: cocos2d: Error loading CCZ compressed file
Cocos2d: cocos2d: Couldn't load PVR image Sprites.pvr.ccz
Cocos2d: cocos2d: Couldn't add PVRImage:Sprites.pvr.ccz in CCTextureCache 
```

我很确定“Sprites.pvr.ccz”在这个项目的文件夹中，在 Resources 文件夹下。这可能是什么原因造成的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:58:36.933

如果文件名实际上是 sprites.pvr.ccz，则不会在设备上找到它。iOS 设备文件系统区分大小写。不确定Android是否也是如此。

另一个原因可能是文件未分配给当前目标。在 Xcode 中选择文件，打开 Utilities 视图并确保为正确的目标设置了复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:45:49.380

当精灵表尺寸太大时，也会发生这种情况。在我的例子中，当精灵表尺寸大于 2048x2048 时，我得到了错误（在 iPod Touch 第 4 代中运行时）。一个简单的解决方案是将一些精灵移动到不同的精灵表。

# html - twitter bootstrap 上的水平固定导航栏

> ID：12989495
> 
> 赞同：1
> 
> 时间：2012-10-20T14:38:48.517
> 
> 标签：html, css, twitter-bootstrap

在新版本的 twitter bootstrap 上，所有示例在滚动时都在页面的左上角显示了一个侧边栏，但我记得旧版本曾经在主导航栏固定在页面顶部之后显示这个侧边栏。

在新版本上，有没有办法固定这个“侧边栏”导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:02:00.453

您需要使用该`affix`属性。

请参阅文档中的完整详细信息：[http ://rc.getbootstrap.com/javascript.html#affix](http://rc.getbootstrap.com/javascript.html#affix)

# c# - 如何更改列表视图标题的对齐方式

> ID：12989497
> 
> 赞同：0
> 
> 时间：2012-10-20T14:38:51.100
> 
> 标签：c#, xaml, listview, windows-8, microsoft-metro

我正在开发一个现代的 C#/XAML Win8 应用程序。我有一个本质上是一个大列表视图的页面，其标题是图像。这非常有效，并提供了我正在寻找的所需用户体验。

一个问题，我想将图像和列表视图的其余部分居中到页面的中心。

我设法以这种方式将列表视图项居中：

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Center" />
    </Style>
</ListView.ItemContainerStyle> 
```

我一直无法弄清楚如何设置标题的样式。这是显示标题的代码：

```
<!-- The header of the listview is the image -->
<ListView.HeaderTemplate>
    <DataTemplate>
        <Viewbox MaxHeight="480" Width="660">
            <Image 
                x:Name="image"
                Source="{Binding ImageBig}"/>
        </Viewbox>
    </DataTemplate>
</ListView.HeaderTemplate> 
```

有谁知道我怎么能做到这一点？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:46:58.513

如果我没记错，您可以将 listview Horizo​​ntalAlignment 和 VerticalAlignment 设置为 Center，对于您的图像，您可以尝试将 Viewbox 的 Horizo​​ntalContentAlignment 和 VerticalContentAlignment 设置为 Center，因此如果它不起作用，请尝试使用网格。您应该能够在属性选项卡中找到它，否则您也可以在代码后面或 xaml 本身上对其进行编码。

# c++ - 将编译标志添加到 Qt 以使用 mysql

> ID：12989499
> 
> 赞同：1
> 
> 时间：2012-10-20T14:39:23.990
> 
> 标签：c++, mysql, qt

我正在使用 ubuntu 构建一个使用 mysql 的项目。要从命令行编译项目，我使用以下标志：

```
$(mysql_config --cflags)$(mysql_config --libs) 
```

但是，当我尝试从 Qt 构建时，我得到了对 mysql_close 和其余 mysql 连接函数的未定义引用。

我尝试将先前命令行标志的表示添加到 Qt 中的 QMAKE 中，但仍然出现相同的错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:36:18.017

将“mysql_config --cflags”的输出添加到编译器标志中：

```
QMAKE_CFLAGS += $$system(mysql_config --cflags)
QMAKE_CXXFLAGS += $$system(mysql_config --cflags) 
```

同样对于 LIBS：

```
LIBS += $$system(mysql_config --libs) 
```

当然，以上所有内容都会进入您的项目文件（*.pro）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:06:53.830

要包含 Qt 的 SQL 模块，您需要这个

`QT += sql`

在你的`.pro`文件中。您还需要确保驱动程序已编译，并放入插件文件夹，`libqsqlmysql.so`在

> ~/QtSDK/Desktop/Qt/4.8.0/gcc/plugins/sqldrivers

就我而言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:17:09.990

默认情况下，Mysql 不包含在 SQL 模块中，因此 Matt Philip 的解决方案将不起作用。

你需要做的是安装mysql dev包

> sudo apt-get install libmysqlclient-dev

然后像这样将其添加到专业文件中

> LIB += -L/usr/lib/mysql -lmysqlclient

这在 ubuntu 上对我有用

# flash - Flash 和多个域/子域 => crossdomain.xml？

> ID：12989502
> 
> 赞同：0
> 
> 时间：2012-10-20T14:39:46.030
> 
> 标签：flash, apache-flex, cross-domain, crossdomain.xml

我正在尝试在我的所有域和在我的静态子域上托管它的子域上使用 Flash 脚本（plupload）。

swf 文件放在我的 static.mydomain.com/path/to/file.swf

我想在我的其他域和子域上使用这个文件，比如：www.mydomain.com 或 asubdomain.mydomain.com 我也想在另一个域扩展名上使用它，比如：mydomain.net

但我无法使用它。如果我将 swf 文件放在我想使用它的子域上，它就可以正常工作。

所以我想我需要在某个地方放置一个crossdomain.xml，但我不知道在哪里？仅在我的静态子域上？在我的每个子域上？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-17T21:35:25.460

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <site-control permitted-cross-domain-policies="all"/>
  <allow-access-from domain="*" secure="false"/>
  <allow-http-request-headers-from domain="*" headers="*" secure="false"/>
</cross-domain-policy> 
```

如果您想要一个“不那么松散”的 XML，请复制其中`*`一行，将您的子域一一放置，或使用简写，例如`*.mydomain.com`.

摘自：

*   [Adobe 跨域 XML 策略说明[^( (www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html))]](http://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html)
*   [以上示例取自此处[^( (icompile.eladkarako.com/loose-cross-domain-xml-policy))]](http://icompile.eladkarako.com/loose-cross-domain-xml-policy/)

.

# c# - HashTable 编译错误（缺少演员表？）

> ID：12989503
> 
> 赞同：1
> 
> 时间：2012-10-20T14:39:54.740
> 
> 标签：c#, casting, hashtable

我在我的应用程序中创建了一个将重新创建 CTRL+Z 的功能。我有几个文本框，我做了一个这样的表格：

`hashtable textChanges[obj.Name, obj.Text] = new HashTable(50);`

我在从选择的键中提取值时遇到问题。我在 keyDown 被触发后得到了钥匙。

如果我正在寻找具有焦点的控件，并使用他的名字来提取他进入表格的最后一个值。

这是事件代码：

```
 private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Control && e.KeyData == Keys.Z)
        {
            for (int i = 0; i < this.Controls.Count; i++)
            {
                if (this.Controls[i].Focused)
                {
                    if (this.Controls[i].GetType() == typeof(TextBox))
                    {
                        TextBox obj = (TextBox)this.Controls[i];
                        obj.Text = textChanges[obj.Name]; // <--- compile error
                       //Cannot implicitly convert type 'object' to 'string'. An explicit conversion exists (are you missing a cast?)   

                    }
                }
            }
        }
    } 
```

这就是我向 HashTable 添加键和值的方式

```
private void textBox_OnTextChange(object sender, EventArgs e)
    {
        if (sender.GetType() == typeof(TextBox))
        {
            TextBox workingTextBox = (TextBox)sender;
            textChanges.Add(workingTextBox.Name, workingTextBox.Text);
        }

        if (sender.GetType() == typeof(RichTextBox))
        {
            RichTextBox workingRichTextBox = (RichTextBox)sender;
            textChanges.Add(workingRichTextBox.Name, workingRichTextBox.Text);
        }
    } 
```

为什么我会错过演员表错误？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:41:09.687

您需要将其转换为字符串。如果你使用字典会更好。字典是一种通用类型，您不需要哈希表所需的类型转换。`Hashtable stores the object type and you are required to type cast the object back to your desired type`.

```
obj.Text = textChanges[obj.Name].ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:02:31.867

是的，您需要类型转换。

但是考虑重构你的代码。用户[通用字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)而不是哈希表：

```
Dictionary<string, string> textChanges = new Dictionary<string, string>(50); 
```

并使用 Linq 检索重点文本框：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Control && e.KeyData == Keys.Z)
    {
        foreach (var textBox in Controls.OfType<TextBox>().Where(x => x.Focused))
            textBox.Text = textChanges[textBox.Name];
    }
} 
```

# sqlite - 想要筛选两个表以查找常用名称和相关数据。Sqlite3

> ID：12989505
> 
> 赞同：0
> 
> 时间：2012-10-20T14:40:37.220
> 
> 标签：sqlite

美好的一天。过去几周潜伏在这里，从别人的问题中学习。感谢所有的答案。现在我需要问一个。使用 sqlite3 和其他工具，我已经能够将两个非常大的 .txt 文件转换为 .csv，然后转换为数据库。每行 7000+/- 行。我已经成功地编写了这个过程的脚本。我能够搜索和比较我所知道的“商品”，但我需要能够搜索我不知道的符合条件的商品。在下面的简化示例中，我需要比较美国和欧盟市场。有一堆我还不关心的列（示例中为 2、4）。列的垂直顺序不像我的示例那样按字母顺序排列，大麦可能像在欧盟那样排在玉米之后。我可以问玉米，发现美国的价格低于欧盟的价格。但我今天可能不知道 Hemp。我想要的是一个搜索，它将显示 table1,col3 和 table2,col3 中的所有相似名称，并向我显示以下输出，忽略非常用名称。

```
US  Barley  3.50
EU  Barley  3.51
US  Corn    6.51
EU  Corn    8.52
US  Hemp    8.23
EU  Hemp    4.15 
```

美国/欧盟的订单远没有商品及其价格重要。提前感谢您的时间和想法。铝

数据库：商品

```
Table1
US  Foo Barley  3.50    abc
US  Bar Corn    6.51    def
US  Rev Flax    2.75    ghi
US  Des Hemp    8.23    jkl
US  Pon L_Rice  11.14   mno

Table2
EU  Pon Acai    4.25    pqr
EU  Rev Corn    8.52    stu
EU  Foo Barley  3.51    vwx
EU  Des Hemp    4.15    zab
EU  Bar S_Rice  11.13   cde 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:49:26.187

你可能应该只有一张桌子。您可以使用视图来模拟它

```
create view commodities as 
   select market, foo, commodity, price, bar from Table1
   union all
   select market, foo, commodity, price, bar from Table2 
```

要获得您的具体结果，请尝试：

```
select market, commodity, price from commodities
where commodity in ('Barley', 'Corn', 'Hemp')
order by market, commodity 
```

获得您评论中要求的结果。

```
select c1.market, c1.commodity, c1.price from commodities c1, commodities c2
where c1.commodity = c2.commodity and abs(c1.price - c2.price) > 0.5  
order by c1.market, c1.commodity 
```

更改`0.5`您有兴趣查看的任何价格增量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:38:23.920

重大成功！谢谢你。正如您在下面看到的，我的脚本几乎可以完美地与小型数据库一起使用。我还没有尝试过大的。关于输出格式的另一个问题。我可以在最终输出中抑制重复的商品名称吗？再次感谢您的帮助 - 我希望有人阅读并获得价值。艾尔（是的，为了便于阅读，我对其进行了一些清理）

```
$ sqlite3 test.db
SQLite version 3.6.21
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .databases
seq  name             file                                                      
---  ---------------  ----------------------------------------------------------
0    main             /test.db                    
sqlite> .tables
EUGoods  USGoods
sqlite> .headers on

sqlite> select * from USGoods;
Market|RegNo|Commodity|Price|Junk
"US"|234|"Barley"|3.5|"abc"
"US"|126|"Corn"|6.51|"def"
"US"|89|"Flax"|2.75|"ghi"
"US"|432|"Hemp"|8.23|"jkl"
"US"|813|"L_Rice"|11.14|"mno"

sqlite> select * from EUGoods;
Market|RegNo|Commodity|Price|Junk
"EU"|945|"Acai"|4.25|"pqr"
"EU"|111|"Corn"|8.52|"stu"
"EU"|44|"Barley"|3.51|"vwx"
"EU"|99|"Hemp"|4.15|"zab"
"EU"|339|"S_Rice"|11.13|"cde"

sqlite> SELECT USGoods.Commodity, 
EUGoods.Commodity, 
USGoods.Market, 
USGoods.Price, 
EUGoods.Market,
EUGoods.Price 
FROM USGoods , EUGoods 
WHERE USGoods.Commodity = EUGoods.Commodity;

Commodity|Commodity|Market|Price|Market|Price
"Barley"|"Barley"|"US"|3.5|"EU"|3.51
"Corn"|"Corn"|"US"|6.51|"EU"|8.52
"Hemp"|"Hemp"|"US"|8.23|"EU"|4.15

sqlite> SELECT USGoods.Commodity, 
EUGoods.Commodity, 
USGoods.Market, 
USGoods.Price, 
EUGoods.Market,
EUGoods.Price 
FROM USGoods , EUGoods 
WHERE USGoods.Commodity = EUGoods.Commodity 
AND abs(USGoods.Price - EUGoods.Price) > 0.5 
ORDER BY USGoods.market, USGoods.commodity;

Commodity|Commodity|Market|Price|Market|Price
"Corn"|"Corn"|"US"|6.51|"EU"|8.52
"Hemp"|"Hemp"|"US"|8.23|"EU"|4.15

sqlite> 
```

# c++ - 我在 VS12 中编写代码，它不会在 Linux 上编译

> ID：12989506
> 
> 赞同：2
> 
> 时间：2012-10-20T14:40:40.460
> 
> 标签：c++, windows, linux, visual-studio-2012

所以我有 3 个文件：main.cpp、sort.h 和 sort.cpp。他们来了：

排序.h：

```
#include <iostream>
class sorter
{
    public:
        void bubble(int*, int);
        void selection(int*, int);
        void insertion(int*, int);
        void bubble(int*, int, bool);
        void selection(int*, int, bool);
        void insertion(int*, int, bool);
        void print_arr(int*, int);
}; 
```

排序.cpp：

```
#include "sort.h"
void sorter::bubble(int* arr, int size)
{
    this->bubble(arr, size, false);
}
void sorter::bubble(int* arr, int size, bool verbose)
{
    ...
}

void sorter::selection(int* arr, int size)
{
    this->selection(arr, size, false);
}
void sorter::selection(int* arr, int size, bool verbose)
{
    ...
}

void sorter::insertion(int* arr, int size)
{
    this->insertion(arr, size, false);
}
void sorter::insertion(int* arr, int size, bool verbose)
{

}

void sorter::print_arr(int* arr, int size)
{
    ...
} 
```

主文件

```
// Standard C++ lib
#include <iostream>
#include <string>
#include <sstream>
#include <stdio.h>

// Mina classes etc.
#include "sort.h"

int main()
{
    system("title Uppgift 4, sorteringsalgoritmer. © Axel Latvala 2012");
    bool machineinput = false;
    int size = 0;
    int* pArr;
    std::string input = "";
    bool verbose = false;
    std::stringstream inputStream("");

    while(true)
    {
        int choice = -1;
        std::cout << "Vill du köra i verbose mode? (1 = ja, 0 = nej): ";
        getline(std::cin, input);

        inputStream.str(input);
        if(inputStream >> choice)
        {
            if(choice == 1)
            {
                verbose = true;
                    break;
                }
            else if(choice == 0)
        {
            verbose = false;
            break;
        }
        std::cout << "Välj antingen 1 eller 0: ";
    }
    else
    {
        std::cout << "Välj antingen 1 eller 0: ";
    }
}
system("cls");
std::cout << "Hur många element vill du mata in?\n";
while(true)
{
    std::cout << "Antal element(eller 0 för talföljd): ";
    getline(std::cin, input);
    inputStream.str("");
    inputStream.clear();
    inputStream.str(input);
    // String -> Int
    if(inputStream >> size)
    {
        if(size == 0)
        {
            machineinput = true;
            std::cout << "Du valde 0, vi genererar en talföljd. Hur många element?\n";
            std::cout << "Antal element:";
            int n = 0;
            while(true)
            {
                getline(std::cin, input);
                inputStream.str("");
                inputStream.clear();
                inputStream.str(input);
                if(inputStream >> n)
                {
                    if(n > 0)
                    {
                        break;
                    }
                    else
                    {
                        std::cout << "Antal element måste vara > 0.\n:";
                    }
                    std::cout << "Antal element måste vara integer.\n:";
                }
            }
            size = n;
            pArr = new int[size];
            std::cout << "1) Slumpmässig\n";
            std::cout << "2) n, n-1, n-2 ... n-(n-1)\n";
            std::cout << "3) n+1, n+2 ... n+(n-1)\n";
            std::cout << "Val: ";
            bool ready = false;
            while(!ready)
            {
                ready = true;
                getline(std::cin, input);
                inputStream.str("");
                inputStream.clear();
                inputStream.str(input);
                int x = -1;
                if(inputStream >> x)
                {
                    switch(x)
                    {
                    case 1:
                        for(int x = 0;x<=n-1;x++)
                        {
                            pArr[x] = rand()+1;
                        }
                        break;
                    case 2:
                        for(int x = 0;x<=n-1;x++)
                        {
                            pArr[x] = n-x;
                        }
                        break;
                    case 3:
                        for(int x = 0;x<=n-1;x++)
                        {
                            pArr[x] = x+1;
                        }
                        break;
                    default:
                        std::cout << "Välj ett alternativ bland alternativen 1-3.\n:";
                        ready = false;
                        break;
                    }
                }
                else
                {
                    ready = false;
                    std::cout << "Välj ett alternativ bland alternativen 1-3.\n:";
                }
            }
        }
        else
        {
            pArr = new int[size];
            input = "";
            system("cls");
            std::cout << "Antal element: " << size << ", godkännt.\n";
        }
        break;
    }
    else
    {
        std::cout << "\"" << input << "\" duger inte som antal element. Försök igen.\n";
    }
}
if(!machineinput)
{
    std::cout << "Var god och mata in elementen när de frågas efter.\n";
    for(int i=0;i<=size-1;i++)
    {
        while(true)
        {
            std::cout << "Mata in element nummer " << i+1 << ": ";
            getline(std::cin, input);

            std::stringstream inputStream(input);
            if(inputStream >> pArr[i])
            {
                std::cout << "Element " << i+1 << " = " << pArr[i] << "\n";
                break;
            }
            else
            {
                std::cout << "Elementet måste vara av typ integer.\n";
            }
        }
    }
}
system("cls");
sorter Sort;
std::cout << "Start: ";
Sort.print_arr(pArr, size);
std::cout << "\n";
int* origArr;
origArr = new int[size];
for(int x = 0;x<=size-1;x++)
{
    origArr[x] = pArr[x];
}
std::cout << "Du har att välja mellan 3st sortetingsalgoritmer, vilka som är följande:\n";
std::cout << "1) Bubble\n";
std::cout << "2) Selection\n";
std::cout << "3) Insertion\n";

while(true)
{
    int ready = 0;
    int choice = -1;
    std::cout << "Välj sorteringsalgoritm: ";
    getline(std::cin, input);
    std::stringstream inputStream(input);

    if(inputStream >> choice)
    {
        sorter* sortmachine = new sorter;
        ready = 1;
        std::cout << "Valde alternativ " << choice;
        std::stringstream tmptitle;
        char buffer[70];
        switch (choice)
        {
        case 1:
            // Bubble
            std::cout << ", bubble.\n\n";
            sprintf_s(buffer, "title Bubble sortering, %d element. © Axel Latvala\n", size);
            system(buffer);
            sortmachine->bubble(pArr, size, verbose);
            break;
        case 2:
            // Selection
            sprintf_s(buffer, "title Selection sortering, %d element. © Axel Latvala\n", size);
            system(buffer);
            std::cout << ", selection.\n\n";
            sortmachine->selection(pArr, size, verbose);
            break;
        case 3:
            // Insertion
            sprintf_s(buffer, "title Insertion sortering, %d element. © Axel Latvala\n", size);
            system(buffer);
            std::cout << ", insertion.\n\n";
            sortmachine->insertion(pArr, size, verbose);
            break;
        default:
            ready = 0;
            std::cout << ", okännt alternativ. Använd alternativen 1-3.\n\n";
            break;
        }
        if(ready == 1)
        {
            break;
        }
        delete sortmachine;
        sortmachine = 0;
    }
    else
    {
        std::cout << "\"" << input << "\" är ett okännt alternativ. Använd alternativen 1-3.\n";
    }
}
std::cout << "Resultat: ";
Sort.print_arr(pArr, size);
std::cout << "\n";
std::cout << "Tryck enter för att sluta programmet.\n© Axel Latvala 2012\n";
getline(std::cin, input);
return 0;
} 
```

在 Windows 上编译并运行良好，但在 linux 上出现以下错误：

```
[akke@eresk: ~/cpp]$ c++ -I /home/akke/cpp main.cpp
/tmp/ccJsJR5a.o: In function `main':
main.cpp:(.text+0x9bc): undefined reference to `sorter::print_arr(int*, int)'
main.cpp:(.text+0xbcc): undefined reference to `sorter::bubble(int*, int, bool)'
main.cpp:(.text+0xc2b): undefined reference to `sorter::selection(int*, int, bool)'
main.cpp:(.text+0xc87): undefined reference to `sorter::insertion(int*, int, bool)'
main.cpp:(.text+0xd93): undefined reference to `sorter::print_arr(int*, int)'
collect2: ld returned 1 exit status 
```

这是我第一次在linux上编译，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T14:43:36.470

您的编译命令不正确，您没有包含`sort.cpp`. 尝试：

```
c++ -I /home/akke/cpp main.cpp sort.cpp 
```

展望未来，您可能想要创建一个简单的 make 文件，这应该适用`gmake`于大多数 Linux/UNIX 机器上常见的（未经测试！）

```
INCLUDES=
CC=/usr/bin/c++
CPPFLAGS=
LIBS=
DBG=-g

.PHONY: all

all:  sorter

sorter: main.o sort.o
    $(CC) $+ -o sorter

main.o: main.cpp main.h sort.h
    $(CC) -c $(DBG) $(INCLUDES) $(CPPFLAGS) $+

sort.o: sort.cpp sort.h
    $(CC) -c $(DBG) $(INCLUDES) $(CPPFLAGS) $+ 
```

然后，您可以在`make`每次更改 cpp 文件时键入，而不必像使用上面的一体化命令那样重新编译每个文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T14:48:21.817

或者，编译为目标文件并在之后链接它们：

```
c++ -c -I /home/akke/cpp main.cpp -o main.o
c++ -c -I /home/akke/cpp sort.cpp -o sort.o
c++ main.o sort.o -o programm 
```

# ios - NSString 到 NSDate 的转换失败

> ID：12989509
> 
> 赞同：0
> 
> 时间：2012-10-20T14:40:45.483
> 
> 标签：ios, nsdate, nsdateformatter

我有以下一段代码..

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/YYYY HH:mm"];
NSString *dateString = @"10/27/2012 18:00";
NSDate *parsedDate = [dateFormatter dateFromString:dateString] ;
NSLog(@"Parsed Date.. %@",[parsedDate description]); 
```

我将 NSLog 语句作为`Parsed Date.. 2011-12-25 00:00:00 +0000`. 我将不胜感激任何帮助解决这个问题。我只想将该 NSString 转换为其 NSDate 等效项。也尝试使用 NSTimeZone，但没有效果。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:45:48.760

您需要使用*小写年份*指示，`yyyy`而不是`YYYY`：

```
[dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm"]; 
```

如果你想获得正确的时区，你需要设置`NSDateFormatter`. 默认情况下，它使用您设备的时区。对于格林威治标准时间，请使用以下内容。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];
[dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm"];
NSString *dateString = @"10/27/2012 18:00";
NSDate *parsedDate = [dateFormatter dateFromString:dateString] ;
NSLog(@"Parsed Date.. %@",[parsedDate description]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:52:45.023

您使用的格式字符串不正确。请参阅[文档](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)。基本上，资本`YYYY`是“一年中的一周”。尝试使用小写字母`yyyy`，即

```
[dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm"]; 
```

# facebook-javascript-sdk - Facebook API 未在人员查询中返回工作和职位字段

> ID：12989511
> 
> 赞同：1
> 
> 时间：2012-10-20T14:40:51.420
> 
> 标签：facebook-javascript-sdk

通过 Javascript API 在 Facebook Graph 上查询用户数据不会返回所有字段。

例如，以下查询：

```
/search?q=David Blades&type=user&fields=location,work,id,name,picture,link 
```

返回除工作和位置之外的所有内容。

有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:53:18.517

由于这些字段不公开，请参考[`User`](https://developers.facebook.com/docs/reference/api/user/)对象：

```
Name       Permission  
id         No access_token required  
name       No access_token required  
...  
location   user_location or friends_location 
```

# php - PHP $_GET 不工作

> ID：12989517
> 
> 赞同：1
> 
> 时间：2012-10-20T14:41:11.413
> 
> 标签：php, forms, joomla, get

这是我的网址

localhost/sistema/altera-valores.php?tarefa=2&id_registro=1464&id_edicao=6

这是我获取变量的代码

```
<?php $tarefa = $_GET[tarefa]; $Id = $_GET[id_registro]; $id_produto = $_GET[id_produto];  ?> 
```

现在我真的不知道如果我输入会发生什么：

```
<?php echo $tarefa; ?> 
```

什么都没有发生任何想法？

我将此站点从在线迁移到本地主机，是 joomla 1.5 系统并且 mod rewrite 开启

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:51:42.470

如果您使用的是 Joomla，则不应`$_GET`直接访问超全局。请[`JRequest`](http://docs.joomla.org/JRequest/1.5)改用，因为它还会使用多种`get`方法为您清理变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:43:03.380

您的密钥应该用引号引起来，例如：`$tarefa = $_GET['tarefa'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:16:20.317

使用 $_GET 确实不是这样做的方法。您可以将您的数据库暴露给一个非常简单的 SQL 注入。

由于您在那里获得了一些整数，因此请使用[JRequest::getInt](http://docs.joomla.org/JRequest%3a%3agetInt/1.5)。这将是这样的：

```
$tarefa = JRequest::getInt('tarefa'); 
```

此外，我**强烈建议您**查看[安全编码指南](http://docs.joomla.org/Secure_coding_guidelines)。

# python - （多少）在检查 2 个列表时首先排序有关系吗？

> ID：12989519
> 
> 赞同：1
> 
> 时间：2012-10-20T14:41:26.060
> 
> 标签：python, list, search

我有一个包含 800 个元素的列表，我在大约 50k 个文件中查找，每个文件大约 50 行。（这些是带有非通用名称的 xml 标签 - 搜索很简单，所以我没有使用 Beautiful soup。）

每次找到一个时，都会缩短 800 个元素的列表。

遍历文件，

我首先检查每一行是否有关系（检查“spot”、“rover”、“fido”等的行）还是一次检查一个元素的所有行（例如，检查文件中的所有行是否有“spot”，然后检查所有行是否有“rover”等...）？

或者这一切都是低效的？（这是使用python。）我在想：

```
for line in somefile:
        for element in somelist:
              if re.search(element, line):
                  .... 
```

或者：

```
for element in somelist:
        for line in somefile:
              if re.search(element, line):
                  .... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:43:39.357

您通常将较大的数据集保留为按顺序访问的数据集，并将您感兴趣的值保留在内存中或作为较大数据集的索引。所以是的，这确实很重要，在您的示例中，您希望多次扫描文件，这要**慢**得多。

让我们举个例子，这些文件中的每一个都是 50 行，并且您要查找 800 个“单词”。

```
for filename in filenames:
    for line in open(filename):
        if any(word in line for word in words):
            pass # do something 
```

由于`words`它在内存中且易于扫描，因此比打开每个文件 800 次要好得多——这是一项昂贵的操作。

所以，我想我应该说你应该尝试顺序扫描“最昂贵”的数据集（可能不是最长的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T14:58:11.547

描述算法复杂性的 big-O 表示法在任何一种方式中都是相同的，但是如果您的一个可迭代对象（例如文件）的访问速度要慢很多并且可能比另一个更大，您应该采取尽可能少地迭代它，即一次。

除此之外，该算法可能更容易以一种或另一种方式编写或理解。例如，如果您想要一个列表中与任何正则表达式匹配的所有字符串的列表，则首先迭代字符串列表并针对每一行检查每个正则表达式会更容易，当一个匹配时打破内部循环。

实际上，当您以这种方式迭代时，整个任务可以是单行的：

```
foundlines = [line for line in inputlines if any(r.search(line) for r in regexes)] 
```

作为奖励，您将获得 Python 能够通过使用列表理解/生成器表达式实现的最快迭代，并且`any()`.

首先迭代正则表达式，最自然的做法是创建一个与每个正则表达式匹配的行列表列表，或者一个与任何正则表达式匹配的行的大列表（带有重复项），包括多个。如果您想得到最多匹配一个正则表达式的行列表，那么您将需要以某种方式消除重复项（在迭代期间或之后），这将影响算法的复杂性。结果也可能以不同的顺序出现，这可能是一个问题。

简而言之，当迭代的性能相同时，选择最适合您尝试解决的问题的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:45:23.637

复杂性的顺序是`O(n*m)`，其中 n 和 m 可以表示您的列表和文件中的条目数，因此您先执行哪种方式并不重要。

# mysql - 更新列的文本

> ID：12989520
> 
> 赞同：2
> 
> 时间：2012-10-20T14:41:40.133
> 
> 标签：mysql, sql, sql-update, edit

我已经创建了表

```
create table tab (id int, mytext varchar(200)); 
```

现在我将值插入为

```
insert into tab values
(1, 'text 11,text 12,'),
(2, 'text 21,text 22,'),
(3, 'text 31,text 32,'),
(4, 'text 41,text 42,'); 
```

现在我想做的是在文本`text none,`的开头添加文本。为此，我必须执行查询

```
update tab set mytext = concat('text none,', mytext) 
```

但是，我错误地将查询执行为：

```
update tab set mytext = concat('text none', mytext) 
```

我错过了“无”之后的逗号 (,)。

现在我有数据

```
1   textnonetext 11,text 12,
2   textnonetext 21,text 22,
3   textnonetext 31,text 32,
4   textnonetext 41,text 42, 
```

我想要的是将输出更改为：

```
1   textnone,text 11,text 12,
2   textnone,text 21,text 22,
3   textnone,text 31,text 32,
4   textnone,text 41,text 42, 
```

即在无后添加逗号（，）。

知道如何完成这项工作吗？

## [用于测试的 SQL Fiddle](http://sqlfiddle.com/#!2/b8b28/1)

**注意：**字段中原始数据的长度`mytext`不固定；对于某些 id，它是 6，对于某些 id，它是 50。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:44:42.850

试试这个，

```
update tab 
set mytext = concat('text none, ', Replace(mytext, 'text none','')); 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/0b7e9/2)

或者如果您没有任何特殊原因使用 concat，则只需替换

```
update tab 
set mytext = Replace(mytext, 'text none','text none, '); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:45:44.377

或者简单地使用[替换](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)而不使用 concat ：

```
UPDATE tab
SET mytext = REPLACE(mytext, 'text none', 'text none,') 
```

# wordpress - 基本的WordPress | 如何在页面和帖子中创建标准化但可编辑的字段

> ID：12989523
> 
> 赞同：3
> 
> 时间：2012-10-20T14:41:49.873
> 
> 标签：wordpress

这可能是一个简单的问题，但我一直在努力寻找答案。我想为房地产列表创建一个标准格式的 Wordpress 页面。我遇到问题的地方是创建可以在页面内轻松编辑的字段，以获取每个属性列表的某些关键功能。例如，一个典型的页面会有一个标题、照片幻灯片、一段描述属性的文本，**然后**是一个带有标准项目的项目符号列表，例如：MLS#、Sq。英尺，床，浴室，车库，邻居，面积，类型，价格等。如果这些项目总是显示出来，你可以将相关信息输入到字段框中，这将是理想的。

有没有人对这样的插件有建议或推荐？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:10:04.573

我认为您需要的是高级自定义字段编辑器。粉碎杂志上有一篇文章教你如何创建布局。你可以在[Smashing Magazine找到它，在](http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-content-editor/)[Advanced Custom Fields](http://www.advancedcustomfields.com)也有一个插件可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:08:29.477

我个人最喜欢的自定义字段插件是[Types](http://wordpress.org/extend/plugins/types/)。

# html - 固定页脚与 100 高度绝对位置正文和 jquery 滚动菜单

> ID：12989524
> 
> 赞同：0
> 
> 时间：2012-10-20T14:41:53.533
> 
> 标签：html, css

我正在创建一个具有 1024 宽度框架的新网站。我需要 100% 宽度的顶部页眉、页眉、菜单和 100% 宽度的页脚。但我需要 1024 像素宽度的内容占位符。我正在尝试设置 100% 的高度内容。比如说，如果内容占位符的内容较少，页脚需要粘在页面底部，如果内容占位符的内容较多，则需要滚动整个页面。这是代码示例：

```
<div style="width: 100%; height: 30px; background: #dddedf url('Images/top-header-bg.png') repeat-x top left;position: relative;">
<div style="width: 1024px; margin: 0 auto;">
        <div style="padding: 0 10px;">
                <!--Top Header Section-->
        </div>
    </div>
</div>

<div style="width: 100%; height: 100px; background: #fff url('Images/header-bg.png') no-repeat center center;
    position: relative;">
    <div style="width: 1024px; margin: 0 auto;">
        <div style="padding: 0 10px;">
                <!--Header Section-->
        </div>
    </div>
</div>

<div style="width: 100%; height: 30px; background: #0D9B8C url('Images/menu-bg.png') repeat-x top left;
    position: fixed;">
    <div style="width: 1024px; margin: 0 auto;">
        <div style="padding: 0 10px;">
            <div style="width: 100%; height: 30px;">
                    <!--Menu Section-->
            </div>
        </div>
    </div>
</div>

<div style="width: 100%; position: fixed; top: 160px; height: 100%; margin-bottom: -40px;">
    <div style="width: 1024px; margin: 0 auto; background: #fff url('Images/body-bg.png') repeat-x fixed top left;
        height: 100%;">
        <div style="padding: 0 10px;">
<!--Main Content Section-->
        </div>
    </div>
</div>

<div style="width: 100%; height: 40px; background: #dddedf url('Images/footer-bg.png') repeat-x bottom left;
    position: fixed; bottom: 0;">
    <div style="width: 1024px; margin: 0 auto;">
        <div style="padding: 0 10px;">
               <!--Footer Section-->
        </div>
    </div>
</div> 
```

由于 jquery 滚动菜单，我需要设置主要内容占位符的绝对位置。如果我设置相对位置，则主要内容占位符内的文本在访问菜单时会被换行。有关此问题的更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/12933070/jquery-drop-down-menu-position-while-scrolling)。

这是一个[演示](http://fiddle.jshell.net/g2FXn/show/)，这是相同的[jsfiddle](http://jsfiddle.net/g2FXn/)。我做错什么了吗？非常欢迎解决方案和建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:05:03.417

也许考虑使用 Twitter 的引导程序？它非常适合响应式设计，以及将元素固定到页面的顶部和底部。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# android - 如何将新片段添加到操作栏夏洛克标签式片段布局？

> ID：12989526
> 
> 赞同：0
> 
> 时间：2012-10-20T14:42:04.300
> 
> 标签：android, android-fragments, actionbarsherlock

![布局](../Images/12b1792cbc5b860c6723959316bc8920.png)

如上所示，如何在 actionbarsherlock 选项卡式片段布局中添加新片段？我想在“**新**”按钮单击时添加并显示新片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:45:34.530

这解决了这个问题。

```
 fragmentTransaction.add(android.R.id.content,myFragment,"MyId"); 
```

# windows-8 - 如何删除 StandardStyles.xaml 中未使用的样式？

> ID：12989528
> 
> 赞同：0
> 
> 时间：2012-10-20T14:42:12.773
> 
> 标签：windows-8, microsoft-metro, windows-runtime

每个新的 Windows 8 C# Metro 项目都包含 StandardStyles.xaml 文件，其中包含用于各种控件的大量样式和模板。大多数情况下，我只使用其中的 10%，并且我定义了很多自己的风格。

想要轻松安全地查找和/或删除所有未使用的样式？据我所知，解析长 XAML 文件会增加我的 Windows 8 应用程序的启动时间，这是我想避免的。还是你认为我不应该关心那 1800 行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:07:17.123

标题中的注释为您提供了一个很好的主意：

> ```
> This file contains XAML styles that simplify application development.
> 
> These are not merely convenient, but are required by most Visual Studio project and item templates.
> Removing, renaming, or otherwise modifying the content of these files may result in a project that
> does not build, or that will not build once additional pages are added.  If variations on these
> styles are desired it is recommended that you copy the content under a new name and modify your
> private copy. 
> ```

如果您修改文件然后稍后添加另一个视图，您可能会遇到无法正常工作的视图，然后您必须确定需要重新添加哪些样式。

这个文件的开销很小，我不会担心它会如何影响您的启动时间，因为几乎所有其他 XAML 应用程序都会有相同的开销。

# javascript - 在链接悬停时显示图像

> ID：12989529
> 
> 赞同：0
> 
> 时间：2012-10-20T14:42:13.750
> 
> 标签：javascript, jquery, image, hover

我在列表中有很多名字，如下所示：

```
<div class="names">
  <ul>
    <li><a href=#name1">name1</a></li>
    <li><a href=#name2">name2</a></li>
    <li><a href=#name3">name3</a></li>
    <li><a href=#name4">name4</a></li>
    <li><a href=#name5">name5</a></li>
  </ul>
</div> 
```

我想在光标旁边显示与鼠标悬停时的每个名称相关的图像缩略图。这可以用jquery吗？

多谢了。皮亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T13:14:12.637

这是悬停弹出窗口的基本实现：

```
$('.names a').on('mouseenter', function(evt){
    $('.popup').css({left: evt.pageX+30, top: evt.pageY-15}).show();
    $(this).on('mouseleave', function(){
        $('.popup').hide();
    });
}); 
```

[http://jsfiddle.net/CaQUY/](http://jsfiddle.net/CaQUY/)

您可以根据悬停的元素更改弹出窗口的内容（例如，通过使用[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)）

使用数据属性示例：http: [//jsfiddle.net/CaQUY/1/](http://jsfiddle.net/CaQUY/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-29T08:23:19.520

这是一个在悬停时显示图像缩略图的 javascript 解决方案。

```
<p id="p1"><a href="https://cnet.com">Cnet</a></p>
<p id="p2"><a href="https://codegena.com">Codegena</a></p>
<p id="p3"><a href="https://apple.com">Apple</a></p>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <link href="https://codegena.com/assets/css/image-preview-for-link.css" rel="stylesheet">     
  <script type="text/javascript">
    $(function() {
                $('#p1 a').miniPreview({ prefetch: 'pageload' });
                $('#p2 a').miniPreview({ prefetch: 'parenthover' });
                $('#p3 a').miniPreview({ prefetch: 'none' });
            });
  </script> <script src="https://codegena.com/assets/js/image-preview-for-link.js"></script>
```

如果您想了解有关如何使用它的更多信息，请访问“[在悬停时显示图像缩略图](http://codegena.com/image-link-preview-on-hover/)”

# php - 如何让应用程序使用私有 .php 网页？

> ID：12989532
> 
> 赞同：0
> 
> 时间：2012-10-20T14:42:45.907
> 
> 标签：php, security, http, httpwebrequest, bots

我希望我的桌面应用程序能够`.php`访问我网站上的页面。该`.php`页面将执行服务器端任务，并将返回指示成功/失败等的 HTTP 响应。

如何确保只有我的桌面应用程序才能访问该`.php`页面？如何防止机器人、爬虫和黑客访问该页面？

我应该在 URL 中有一个随机短语吗？例如：

```
http://www.website.com/s3g8k0d1q6/myphpfile.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:50:05.123

一种简单的方法是进行基本的密码检查。假设您的意思是“命中” `POST`，请将其放在 PHP 的顶部：

```
if($_POST["password"] !== 12345) { header("HTTP/1.0 404 Not Found");die(); } 
```

这将返回您的通用 404，除非它是您的桌面应用程序发送正确的密码。

（[*请*不要使用](http://www.youtube.com/watch?v=a6iW-8xPw3k) `12345`，这只是一个例子）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:29:34.173

大多数访问 Web 服务的桌面应用程序都需要应用程序密钥。然后使用该应用程序密钥向 Web 服务发出请求。每个应用程序在用户注册时都会获得它自己的随机生成的密钥，或者桌面应用程序可以在后台静默执行此过程。

如何验证用户/桌面应用程序以便提供应用程序密钥取决于您。它可以是电子邮件/密码对，或者只有桌面应用程序知道的密钥，或者通过电子邮件发送给每个用户以允许他们激活桌面应用程序的密钥。

密钥存储在数据库中，您可以在表中添加一个额外的列以指示密钥是否已被撤销。

您可以使用 SSL 帮助将应用程序密钥保密。

密钥如何传递给服务并不重要。它可以是 $_GET、$_POST 或 Http 标头的一部分。PHP 支持从所有这些方法中提取细节的功能。

一旦您收到 $_POST['key'] 中的请求，您将检查数据库以查看该密钥是否存在，并且未被撤销。如果找到，那么您将执行请求或提供一些其他响应。

请注意，PHP 用户一定要防范 SQL 注入攻击。这是一个快速示例代码，但未经测试。

```
<?php
if(!empty($_POST['key']))
{
   $con = mysql_connect('localhost','mathew','1234') or die("can't open db");
   mysql_select_db('my_db',$con);
   $key = mysql_real_escape_string($_POST['key']);
   $result = mysql_query("SELECT * FROM Keys WHERE Revoked = 0 AND Key = '$key'");
   if(!empty(mysql_fetch_array($result)))
   {
       // perform web service here
   }
} 
```

这将是最简单的方法，如果使用 SSL 执行，则可以提供基本的安全性。如果您没有 SSL，那么有人可能会嗅到密钥，但这取决于您的应用程序是否*值得*花时间破解。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T14:58:45.670

您可以使用 robots.txt 文件：

```
User-agent: *
Disallow: myfile.php 
```

当然，它不会阻止恶意机器人或忽略 robots.txt 文件的机器人，但可能会阻止搜索引擎爬虫等合法机器人。

# objective-c - UITableViewCell 自动创建的代码？

> ID：12989542
> 
> 赞同：-1
> 
> 时间：2012-10-20T14:43:22.900
> 
> 标签：objective-c, uitableview

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    static NSString *CellIdentifier = @"Cell";    
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {   
        CGRect contentFrame = CGRectMake(42, 7, 245, 30);
        UILabel *contentLabel = [[UILabel alloc] initWithFrame:contentFrame]; 
```

我在很多地方都看到了上面的代码，我想知道，那段代码的来源是什么？当我使用 GUI 做某事时，xcode 可以自动创建它吗？

如果没有，我`CGRectMake(42, 7, 245, 30)`如何在不计算像素的情况下设置这些数字呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:15:41.410

让我解释一下，

A`UITableViewCell`只是一个视图/对象，表示 tableView 中的每一行/单元格。Apple 有一些预定义的`UITableViewCell`带有标签、imageView 和其他对象的样式。

您可以像其他视图一样在此单元格上添加任何对象，在框架中创建对象并添加单元格的内容视图。

您可能会在任何地方看到相同的代码，这只是创建您自己的自定义单元格的最简单方法`UITableViewCell`。当使用 tableView 模板创建新项目时，任何一个苹果都可能将其用作默认值。或者可以从相同的参考资料中复制下来，以在他们自己的教程中以自己的风格进行解释。

这可能只是一个巧合。

# linux - 嵌入式 Linux。符号查找错误

> ID：12989548
> 
> 赞同：2
> 
> 时间：2012-10-20T14:43:54.800
> 
> 标签：linux, embedded

我制作了 userdef.c 来添加一些函数 otsu_Threshold 和 onBinarOtzu。函数库头文件是**pxa_lib.h**，我输入了这样的函数

> void otzu_Threshold(unsigned char* orgImg, unsigned char* outImg, int height, int width);
> 
> 无效 onBinarOtzu(unsigned char* m_InImg);

在文件夹“演示”中的 camera.c 中，我输入了

> '#include <pxa_lib.h>
> 
> ……
> 
> ……
> 
> onBinarOtzu(vidbuf->ycbcr.y);

生成文件

> CC=/usr/local/arm-linux-4.1.1/bin/arm-linux-gcc
> 
> CFLAGS+= -mcpu=iwmmxt -mtune=iwmmxt -mabi=aapcs-linux \
> 
> ```
>  -Iinclude/ -DDEBUG_BUILD 
> ```
> 
> LFLAGS+=-Llib/ -lpxadev
> 
> .PHONY：全部编译 install-host install-target clean clean-local \
> 
> 卸载主机卸载目标
> 
> 全部：编译安装主机安装目标
> 
> 编译：lib/libpxadev.so bin/camera
> 
> lib/libpxadev.so：驱动程序/camera.o驱动程序/overlay2.o驱动程序/userdef.o
> 
> $(CC) $(CFLAGS) -shared -W1,-soname,libpxadev.so -o lib/libpxadev.so $^
> 
> bin/相机：demo/camera.c
> 
> $(CC) $(CFLAGS) $(LFLAGS) -o $@ $^
> 
> 安装主机：
> 
> 安装目标：
> 
> 清洁：清洁本地卸载主机卸载目标
> 
> 清洁本地：
> 
> -rm -f lib/* 驱动程序/*.o
> 
> -rm -f bin/*
> 
> 卸载主机：
> 
> -rm -f $(PXA_HOST_LIB_DIR)/libpxadev.so
> 
> 卸载目标：
> 
> $(SUDO) rm -f $(PXA_TARGET_BIN_DIR)/相机
> 
> $(SUDO) rm -f $(PXA_TARGET_LIB_DIR)/libpxadev.so

我制作了二进制文件并通过minicom，zmodem在机器人中传输。

但是，发生了错误。

> [root@WENDERS root]# [root@WENDERS root]# ./camera
> PXA_CAMERA:choose MT.... sensor
> PXA_CAMERA:choose MT.. sensor
> camera_config : streamparm.type = 1
> count = 3
> width=320, height =240
> ./camera：符号查找错误：./camera：未定义符号：onBinarOtzu

我该怎么办...

附言。对不起。我英语不好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:27:03.410

看起来您在编译时链接到共享库，但它们没有加载到目标上。

您必须将库添加到 Linux 可以找到它们的地方，可能在`/usr/lib`or中，或者在变量`/lib`指定的地方。`$LD_LIBRARY_PATH`具体如何执行此操作取决于您设置的环境。

# javascript - 如何使多个 jQuery LightBox 画廊在一个页面上工作

> ID：12989549
> 
> 赞同：2
> 
> 时间：2012-10-20T14:43:58.977
> 
> 标签：javascript, jquery, lightbox

我似乎无法让多个 JQuery LightBox 画廊在 HTML 页面上工作。我已经尝试过不久前有人在[类似帖子](https://stackoverflow.com/questions/2051294/making-jquery-lightbox-plugin-work-with-multiple-galleries)中提出的所有建议，但我仍然无法让它发挥作用！

这里有一些背景信息......

我开发了一个静态 HTML 页面，其中包含三个独立的灯箱画廊。第一个画廊加载并完美运行，但第二个和第三个画廊无法加载；既不显示超链接图像（触发灯箱画廊）也不显示该画廊中的图像，我只是得到“加载”动画。

我在 HTML 中调用 Lightbox javascript，并为第二个和第三个画廊复制了 Javascript 调用函数，称它们为“#gallery1 a”、“#gallery2 a”、“#gallery3 a”等，但它仍然没有不行。

我知道这三个画廊一起工作，因为如果我复制第一个画廊（包括画廊 1 的所有图像）并将其再次粘贴到下面，所有三个画廊都可以工作。当我在第二个和第三个画廊中更改我想要的照片的文件名时，问题就来了。

我在下面附上了来自静态页面的摘录`<head>`以及来自静态页面的 html，这样你就可以看到我到目前为止所做的一切。

如果有人能指出让这三个画廊都能正常工作的地方，我将不胜感激。

提前谢谢了...

这是 HTML 的 HEAD：

```
<head>
$(function() {
    $('#gallery a').lightBox();
});

$(function() {
    $('#gallery1 a').lightBox();
});

$(function() {
    $('#gallery2 a').lightBox();
});

$(function() {
    $('#gallery3 a').lightBox();
});
</head> 
```

现在对于 HTML：

```
<div id="gallery">
<ul>
<li>
<a href="portfolio/Bathroom install 2 watermarked/ian work photos 089.jpg">
<img src="portfolio/Bathroom install 2 watermarked/ian work photos 112.jpg"/>
</a>
<li><a href="portfolio/Bathroom install 2 watermarked/ian work photos 090.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 2 watermarked/ian work photos 111.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 2 watermarked/ian work photos 112.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 2 watermarked/ian work photos 113.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 2 watermarked/ian work photos 114.jpg"></a>
</li>
</ul>
</div>

<div id="gallery1">
<ul>
<li>
<a href="portfolio/Bathroom install 3 watermarked/ian work photos 089.jpg">
<img src="portfolio/Bathroom install 3 watermarked/ian work photos 182.jpg"/>
</a>
<li><a href="portfolio/Bathroom install 3 watermarked/ian work photos 183.jpeg"></a>
</li>
<li><a href="portfolio/Bathroom install 3 watermarked/ian work photos 184.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 3 watermarked/ian work photos 185.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 3 watermarked/ian work photos 186.jpg"></a>
</li>
<li><a href="portfolio/Bathroom install 3 watermarked/ian work photos 187.jpg"></a>
</li>
</ul>
</div> 
```

# python - 如何将字典转换为csv文件

> ID：12989551
> 
> 赞同：1
> 
> 时间：2012-10-20T14:44:26.347
> 
> 标签：python, list, dictionary, tuples

我得到了一些数据，我需要将其转换为 csv 文件。我不是编码员，但我认为 python 可以帮助我处理这些字典/元组。

```
a = {
 'page': '1',
 'records': 984,
 'rows': [{'cell': ['2012000000885',
                    'A. B. OLIVEIRA - ME',
                    '10\\/08\\/2012',
                    '2.200,00',
                    '0,00',
                    '0,00'],
           'id': '2012000000885;02070712000102;2012;4'},
          {'cell': ['2012000000440',
                    'A. C SILVA E CIA LTDA',
                    '26\\/04\\/2012',
                    '600,00',
                    '600,00',
                    '600,00'],
           'id': '2012000000440;02070712000102;2012;4'},
          {'cell': ['2012000000104',
                    'ADAILTON PEREIRA DE OLIVEIRA',
                    '27\\/01\\/2012',
                    '100,00',
                    '100,00',
                    '100,00'],
           'id': '2012000000104;02070712000102;2012;4'},
          {'cell': ['2012000000261',
                    'ADAILTON PEREIRA DE OLIVEIRA',
                    '01\\/03\\/2012',
                    '200,00',
                    '200,00',
                    '200,00'],
           'id': '2012000000261;02070712000102;2012;4'},
          {'cell': ['2012000000360',
                    'ADAILTON PEREIRA DE OLIVEIRA',
                    '28\\/03\\/2012',
                    '200,00',
                    '200,00',
                    '200,00'],
           'id': '2012000000360;02070712000102;2012;4'}],
 'total': 1} 
```

我只对“行”感兴趣，我需要单独的“Id”和“单元格”将它们导入 csv 文件。预先感谢您的任何帮助。

罗杰里奥·马里尼奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:51:37.443

```
import csv
with open('output.csv', 'wb') as fout:
    csvout = csv.writer(fout)
    for row in a['rows']:
        csvout.writerow( [row['id']] + row['cell'] ) 
```

创建一个 CSV 文件，其中第一列作为 ID，后续列作为任何单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T22:56:04.317

这更清洁：

```
import csv
with open('names.csv', 'w') as csvfile:
    fieldnames = ['first_name', 'last_name']
    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
    writer.writeheader()
    writer.writerow({'first_name': 'Baked', 'last_name': 'Beans'}) 
```

# assembly - 将两个 32 位寄存器相乘并将结果用于另一个乘法运算

> ID：12989552
> 
> 赞同：0
> 
> 时间：2012-10-20T14:44:35.593
> 
> 标签：assembly, nasm

我正在尝试使用快速取幂来编写取幂子例程。我将一次又一次地使用乘法结果。当我将它相乘时，结果变为 edx:eax。

当我尝试将结果与另一个值相乘时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:09:56.340

如果您只需要 32 位被乘数乘法的 32 位产品，您只需丢弃/忽略 中的产品部分`edx`，假设没有溢出或者您正在做您的算术模 2 ^(32)。如果您需要乘积以某个其他值为模，例如 10 ⁹，那么您将乘积除以它并取余数。

鉴于一般问题，很难更具体。

# javascript - Javascript 中的协议输出

> ID：12989555
> 
> 赞同：1
> 
> 时间：2012-10-20T14:44:50.570
> 
> 标签：javascript

我正在学习 Javascript，我还有一个问题。作为`document.write(location.protocol);`输出用于发送和接收数据的协议，例如 http、https 或类似的东西，但我将文件放在桌面上并使用浏览器打开它。所以在地址栏中，它向我展示了这样的内容：

> file:///C:/Users/malik/Desktop/display.html

```
//when i use 
document.write(location.protocol);
//it outputs 
//file: 
```

我想问的是 ('file:') 任何协议，如果是那么是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:46:51.367

该`file:`协议是指本地计算机上的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:50:31.037

该`file:`协议不是真正的 TCP/IP 协议，它是浏览器用来指定从本地磁盘而不是通过 TCP/IP 连接读取的资源的虚拟协议。

参考：[TCP/IP 协议列表](http://www.protocols.com/pbook/tcpip1.htmI)

不同的浏览器可能`file:`以不同的方式使用前缀。

[Internet Explorer 实施](http://msdn.microsoft.com/en-us/library/aa767731%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:53:24.290

这部分 url 正式称为[scheme](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)。有时方案反映协议（http），有时不反映（mailto、文件等）。

# django - 在 Django 模板中显示复杂的字典

> ID：12989560
> 
> 赞同：2
> 
> 时间：2012-10-20T14:45:04.937
> 
> 标签：django, django-templates

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

我有一个模板，我想在其中填写有关从事项目的开发人员的信息。

每个开发人员都将显示以下信息：

```
type
title
first_name
last_name
skills 
```

我遇到的麻烦是每个开发人员都有许多与之相关的技能。

我创建了这样的模型：

```
class DevSkills(models.Model):
    dev = models.ForeignKey(User)

    skill = models.CharField(max_length = 200) 
```

我正在尝试创建一个将填充字典的视图，以便我可以遍历每个开发人员，显示他们的信息，然后遍历每个技能（一次显示一个）。

这是视图：

```
def developers(request):
    """
    ..  function:: developers()

        Provide the page that shows the developer credentials

        :param request: Django Request object
    """
    devs = User.objects.filter(is_staff = True)
    dev_info = {}
    for dev in devs:
        dev_info.update(createDevDisplayDict(dev))
    data = { 'user' : request.user }
    data.update({ 'devs' : dev_info })

    return render_to_response("developers.html", data) 
```

我已指定`is_staff`字段 from`User`以指示用户是开发人员。

我创建了一个简单的实用程序，可以帮助我填充嵌入式字典，以便我可以遍历它们：

```
def createDevDisplayDict(user):
    """
    ..  function:: createDevDisplayDict()

        Create a dictionary for showcasing the developer

        :param user: developer who we are working with
    """

    userProfile = UserProfile.objects.get(user = user)
    devSkills = DevSkills.objects.filter(dev = user) 
    dev_dict = {}
    user_dict = { 'dev_type'        : userProfile.dev_type,
                  'title'           : userProfile.title,
                  'first_name'      : user.first_name,
                  'last_name'       : user.last_name,
                }
    dev_dict.update(user_dict)

    skill_dict = {}
    for skill in devSkills:
        skill_dict.upate({ 'skill' : skill.skill })

    dev_dict.update(skill_dict)
    return dev_dict 
```

我的意图是遍历每个开发人员，创建一个“超级”字典来包含他们的每个`user_dict`字典（基于他们的`User`信息），并为他们的每个技能添加一个字典。然后，回到模板中，我想以这样的方式循环遍历“超级”字典，使其呈现如下内容：

```
James Taylor
Project Lead
Software Developer
    • Django
    • Python
    • JavaScript
    • JQuery

Elizabeth Norton
Design Lead
Graphic Designer
    • Edge
    • Adobe Photoshop
    • Adobe Illustrator
    • CSS 
```

这是我正在尝试使用的模板：

```
{% extends "base.html" %}

{% block content %}
<div>
    <p>Our Developers</p>
</div>
    {% for dev in devs %}
        {{ dev.user_dict.first_name }} {{ dev.user_dict.last_name }}
        {{ dev.user_dict.title }}
        {{ dev.user_dict.dev_type }}

        <ul> 
        {% for skill in dev.skill_dict %}
            <li>skill.skill</li>
        {% endfor %}
        </ul>
    {% endfor %}
{% endblock %} 
```

当我现在看到页面时，它看起来像这样：

```
Our Developers 
```

是的……什么都没有。有什么建议么？

更新 1：我根据 iMom0 的建议修改了我的实用程序。我现在使用一个列表来包含每个技能。像这样：

```
def createDevDisplayDict(user):
    """
    ..  function:: createDevDisplayDict()

        Create a dictionary for showcasing the developer

        :param user: developer who we are working with
    """

    userProfile = UserProfile.objects.get(user = user)
    devSkills = DevSkills.objects.filter(dev = user) 
    dev_dict = {}
    user_dict = { 'dev_type'        : userProfile.dev_type,
                  'title'           : userProfile.title,
                  'first_name'      : user.first_name,
                  'last_name'       : user.last_name,
                }
    dev_dict.update(user_dict)

    skills = []
    for skill in devSkills:
        skills.append(skill.skill)

    skill_dict = {'skill' : skills}

    dev_dict.update(skill_dict)
    return dev_dict 
```

我可以看到这样做的价值——事实上，它更直观，而且我认为我用另一种方式让它变得太难了。但我的模板仍然裸露。:(

更新 2：

我知道我现在在写路径上。我在视图中添加了一些日志记录：

```
devs = User.objects.filter(is_staff = True, is_superuser = False)
dev_info = {}
for dev in devs:
    dev_info.update(createDevDisplayDict(dev))

for key in dev_info:
    for sub_key in dev_info[key]:
        logfile.write('{0} = {1}\n'.format(sub_key, dev_info[key][sub_key])) 
```

日志文件显示：

```
skills = [u'Java', u'Perl', u'C++', u'Python', u'Django']
dev_type = Software Developer
first_name = Rico
last_name = Cordova
title = Owner 
```

所以，它必须是我在模板中调用它的一种方式，对吧？

更新 3：

我意识到我正在断开`user_dict`和他们的`skills`. 所以我稍微修改了实用程序，将它们放入一个字典中。

```
## Create a logging object
userProfile = UserProfile.objects.get(user = user)
devSkills = DevSkills.objects.filter(dev = user) 
dev_dict = {}
user_dict = { 'dev_type'        : userProfile.dev_type,
              'title'           : userProfile.title,
              'first_name'      : user.first_name,
              'last_name'       : user.last_name,
            }

skills = []
for skill in devSkills:
    skills.append(skill.skill)

user_dict.update({ 'skills' : skills })

dev_dict['user_dict'] = user_dict
return dev_dict 
```

在我看来，这是一个更好的解决方案。不过，我仍然无法访问`user_dict`模板中的信息。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:58:46.120

您可以使用 Django 的 ORM 功能来简化此操作（并且，我们将看到，获得更好的性能），这是一个很棒的功能！

## 型号代码

```
class DevSkill(models.Model):
    dev     = models.ForeignKey(UserProfile, related_name = 'skill_set')
    skill   = models.CharField(max_length = 200) 
```

我们改变了两件事：

*   使用 a`UserProfile` `ForeignKey`而不是 user 将简化其余代码。由于无论如何您都有`UserProfile`<->`User`映射，因此这不会成为问题。
*   我们添加了一个`related_name`属性，以便任何`UserProfile`对象现在都有一个`skill_set`属性来存储它的`DevSkills`.

（请注意，这`related_name`不是必需的，`modelname_set`如果您不设置它，Django 将创建一个通用属性）。还有，`DevSkill`应该是单数，对象是单技能！

我还希望您拥有以下 for `UserProfile`，并假设您已经创建了代码。如果你不这样做，你将需要适应。

```
class UserProfile(models.Model):
    user     = models.OneToOneField(User)
    title    = models.CharField(max_length = 40)
    dev_type = # W/E you want 
```

## 在视图中：

```
devs = UserProfile.objects.all() # Or W/E queryset would fit.
# Pass context & all. 
```

## 在模板中：

```
{% extends "base.html" %}

{% block content %}
<div>
    <p>Our Developers</p>
</div>
    {% for dev in devs %}
        {{ dev.user.first_name }} {{ dev.user.last_name }}
        {{ dev.title }}
        {{ dev.dev_type }}

        <ul> 
        {% for skill in dev.skill_set.all %}
            <li>skill.skill</li>
        {% endfor %}
        </ul>
    {% endfor %}
{% endblock %} 
```

## 表现

请注意，此代码（您现在也在使用的代码）绝对会影响性能。实际上，我们正在为每个用户进行多次查询（为他们的用户和他们的 DevSkills 访问数据库）。

不过这不是问题，我们可以使用 ORM[`select_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)和[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)特性来解决这个问题：

`devs = UserProfile.objects.select_related('user').prefetch_related('skill_set').all()`
这样，我们只做两个查询，一个用于`UserProfile`->`User`和一个用于`DevSkill`'s，连接是在 Python 中完成的，但你不应该关心这个，Django 会为你做。

请注意，这`prefetch_related`是 Django 1.4 的功能。

* * *

脚注：这些`UserProfile`东西在 Django 1.5 中消失了，看看吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:50:52.583

`dict.update`总是覆盖 dict 的值

```
In [2]: d = {'key': 'value'}

In [3]: d.update({'key': 'value1'})

In [4]: d
Out[4]: {'key': 'value1'} 
```

相反，您应该使用`list`and `list.append`。

而且你的模板不知道是什么`user_dict`，纠正一下，

```
dev_dict['user_dict'] = user_dict 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:45:20.890

这对我来说是一个新概念——`dict.items`在模板中。以下正是我能够显示我想要的内容的方式。

```
{% extends "base.html" %}

{% block content %}
<div>
    <p>Our Developers</p>
</div>
    {% for key, value in devs.items %}
        {{ value.first_name }} {{ value.last_name }} <br>
        {{ value.title }} <br>
        {{ value.dev_type }} <br>
        <ul> 
        {% for skill in value.skills %}
            <li>{{ skill }}</li>
        {% endfor %}
        </ul>
    {% endfor %}
{% endblock %} 
```

# c# - Code First - 自引用一对多关系

> ID：12989566
> 
> 赞同：8
> 
> 时间：2012-10-20T14:45:42.380
> 
> 标签：c#, entity-framework, code-first

我在这里发现了很多类似的问题，但似乎没有一个可以帮助我解决我的问题。流利的 api 和属性没有帮助。数据库已创建，但在向其中添加对象时，它崩溃了。我想要一个有自己集合的类。这是我的代码：

```
[Table("UObjects")]
public class UObject
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [Browsable(false)]
    public long ID { get; set; }
    public string Name { get; set; }
    [Browsable(false)]
    public long? ParentID { get; set; }

    public virtual UObject UParent { get; set; }
    [Browsable(false)]
    public virtual ICollection<UObject> UObjects { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<UObject> UObjects { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // This fluent API didn't help
        //modelBuilder.Entity<UObject>()
        //        .HasOptional(u => u.UParent)
        //        .WithMany(u => u.UObjects)
        //        .HasForeignKey(u => u.ParentID);

        //modelBuilder.Entity<UObject>()
        //        .HasOptional(u => u.UParent)
        //        .WithMany(u => u.UObjects)
        //        .Map(c =>
        //        {
        //            c.MapKey("ParentID");
        //            c.ToTable("UObjects");
        //        });
    }
} 
```

数据库中的记录是这样的：

```
ID | Name       | ParentID
------------------------------------
1  | First      | 0
2  | SubFirst   | 1
3  | SubSecond  | 1
4  | SubThird   | 2
5  | SubFourth  | 2 
```

那么我的对象在加载实体后应该如何看待接下来是：

```
 - First
      - SubFirst
         - SubThird
         - SubFourth
      - SubSecond 
```

但是每个对象都有一个空集合。我应该怎么做才能使其正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-10T10:36:49.617

您只需要通过更正字段而不是像这样的导航属性来提及自我引用：

```
 [ForeignKey("UParent")]    // EF need for self reference
 public long? ParentID { get; set; } 
```

在构造函数中，像这样初始化导航属性：

```
 public UObject()       
    {
        // this is necessary otherwise EF will throw null object reference error. You could also put ?? operator check for a more interactive solution.  
        UObjects = new List<UObject>(); 
    } 
```

并且还需要像您所做的那样覆盖，但像这样：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)     
    {   
        // folowwing is also necessary in case you're using identity model     
        base.OnModelCreating(modelBuilder);               
        modelBuilder.Entity<UObjects>()       
            .HasOptional<UObjects>(u => u.UParent) // EF'll load Parent if any     
            .WithMany(u => u.UObjects);        // load all childs if any 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-12T00:31:13.107

与您的几乎相同的实体类在 EF Core 中工作。我将您的属性重命名`ParentID`为`UParentID`并添加了构造函数。

```
[Table("UObjects")]
public class UObject
{
  protected UObject()
  {
    UObjects = new List<UObject>();
  }

  public UObject(UObject parent, string name)
    : this()
  {
    Name = name;
    UParent = parent;
    UParent?.UObjects.Add(this);
  }

  [Key]
  [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public long ID { get; set; }
  public string Name { get; set; }
  public long? UParentID { get; set; }

  public virtual UObject UParent { get; set; }
  public virtual ICollection<UObject> UObjects { get; set; }
} 
```

在`ApplicationDBContext`我只有这个：

```
protected override void OnModelCreating(ModelBuilder builder)
{
    base.OnModelCreating(builder);
    builder.Entity<UObject>();
} 
```

用法（查看`root`对象的属性如何填充正确的值）： [![渴望加载](../Images/b77f2d6d67134a7fe48f87755b5ea1a7.png)](https://i.stack.imgur.com/dFze0.png)

注意：我没有为删除此代码而烦恼。如果你需要它，事情可能会变得更复杂。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-01-09T13:48:22.720

1.  用 ForeignKey 属性和 ? 装饰您的 UParent 属性 因为它可以为空

`[ForeignKey("ParentID")] public virtual UObject? UParent { get; set; }`

2.  在数据库中：如果没有父级，则将 ParentId 值设置为“NULL”。

# php - 始终在 PHP 中显示指定的小数位数（向上舍入）

> ID：12989570
> 
> 赞同：5
> 
> 时间：2012-10-20T14:45:50.837
> 
> 标签：php, rounding

我需要显示一个具有指定小数位数（向上舍入）的浮点数，特别是最多两位小数，即使该数字没有小数部分。我知道的一种方法是使用`sprintf()`PHP 函数，如下所示。

```
echo sprintf("%0.2f", 123); 
```

它返回`123.00`。

```
echo sprintf("%0.2f", 123.4555); 
```

返回`123.46`，但以下内容不返回我需要的内容。

```
echo sprintf("%0.2f", 123.455);  // 5 is removed - the right-most digit. 
```

我希望它会回来`123.46`，但事实并非如此。它返回`123.45`。虽然这不是一个巨大的差异，但我在这两种情况下都需要返回`123.46`。

* * *

该`round()`功能可以做到。`echo round(123.455, 2);`并在这两种情况下都`echo round(123.4555, 2);`返回`123.46`，但我想不出使用这个函数，因为如果小数部分不存在，它根本不显示小数位。喜欢`echo round(123, 2);`给`123`，我需要`123.00`。

PHP中是否有实现此功能的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T14:51:50.660

```
number_format(123.455, 2, '.', '') 
```

# django - 如何更改默认用户模型？

> ID：12989573
> 
> 赞同：3
> 
> 时间：2012-10-20T14:46:32.960
> 
> 标签：django

如何更改用户的默认模型？

```
from django.contrib.auth.models import User 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:47:42.803

默认设置路径**django.conf.global_settings**

**global_settings.py** 文件：

[https://github.com/django/django/blob/master/django/conf/global_settings.py#L508](https://github.com/django/django/blob/master/django/conf/global_settings.py#L508)

所以**settings.py**添加代码行

```
AUTH_USER_MODEL = 'myuserapp.MyUser' 
```

创建 MyUser 模型。

# sql - 如何将 oracle 服务器与 emacs 连接？

> ID：12989575
> 
> 赞同：4
> 
> 时间：2012-10-20T14:46:57.847
> 
> 标签：sql, oracle, emacs

我想用 Emacs 连接到服务器。我找到了这个链接： [EmacsWiki:sqlPlus](http://www.emacswiki.org/cgi-bin/wiki/SqlPlus)

我做了那里描述的事情，并将以下几行添加到我的 .emacs 文件中：

> (需要'tabbar)
> (需要'ide-skel)
> (需要'sqlplus)

当我尝试时，`M-x - "sql-oracle"`它要求我输入`"User: "`、`"Password: "`和`"Database: "`，但我不知道`"database"`，我所拥有的只是这些数据：

> IP（主机名）：#######
> 端口：####
> SID：orcl
> 用户名：####
> 密码：####

我怎样才能让 emacs 要求我只填写（和所有）这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:42:53.350

您可以使用`M-x sqlplus`. 然后你给一个连接字符串，比如`user/password@SID`

如果它不起作用，请尝试从命令提示符使用 sqlplus 连接到 Oracle。

并检查文件[Tnsnames.ora](http://www.orafaq.com/wiki/Tnsnames.ora)。

# python - 自定义 django 后端登录有时会失败

> ID：12989576
> 
> 赞同：0
> 
> 时间：2012-10-20T14:47:04.100
> 
> 标签：python, django, django-authentication

我创建了一个 cookie 中间件，用于检查名为 AUTHENTICATION 的 cookie，该 cookie 设置在子域的外部系统上。该代码似乎可以正常工作，但有时我会收到来自该站点的错误电子邮件：

```
File "/home/users/webuser/virtualenvs/production/lib/python2.7/site-packages/django-trunk/django/core/handlers/base.py", line 93, in get_response
response = middleware_method(request)

File "/home/users/webuser/virtualenvs/production/projectname/projectname/CookieMiddleware.py", line 21, in process_request
login(request, user)

File "/home/users/webuser/virtualenvs/production/lib/python2.7/site-packages/django-trunk/django/contrib/auth/__init__.py", line 70, in login
request.session[SESSION_KEY] = user.id

AttributeError: 'NoneType' object has no attribute 'id' 
```

这是我的 CookieMiddleware.py

```
from django.conf import settings
from django.contrib.auth import authenticate, login
from django.contrib.auth.models import User

#Authentication Middleware using a external cookie named AUTHENTICATION
class CookieMiddleware(object):

    def process_request(self, request):
        if "AUTHENTICATION" not in request.COOKIES:
            #Cookie not found - do nothing
            return
        #Token found - first check if the user is allready is logged in
        if request.user.is_authenticated():
            return

        #Not logged in, then send to RemoteUserBackend.py    
        token = request.COOKIES["AUTHENTICATION"]

        user = authenticate(token=token)
        request.user = user
        login(request, user) 
```

这是我的 RemoteUserBackend.py

```
from django.conf import settings
from django.contrib.auth import authenticate, login
from django.contrib.auth.models import User, Group
from base64 import b64decode
from hashlib import sha1
from urllib import unquote
from suds.client import Client
from bs4 import BeautifulSoup

class Backend( object ):
        def authenticate(self, username=None, password=None, token=None):

            #Unescape token
            unescaped_token = unquote(token)

            #Decode token
            decoded_token = unescaped_token.decode('base64')

            #Split the token into tree variable
            secret, hashstring, userID = decoded_token.split('-', 2)

            #Secret needs to bee in lower to match shared secret
            secret_lower = secret.lower()

            #Make string of SHARED_SECRET, hashstring, userID
            check_string = "%s%s%s" % (settings.SHARED_SECRET, hashstring, userID)

            #sha1 the string
            sha1_check_string = sha1(check_string)

            #Check if the SHARED_SECRET is matching cookie secret
            cookie_valid = sha1_check_string.hexdigest() == secret_lower

            #Url to WSDL file
            url = 'http://f.domain.com/webservice/Person.cfc?wsdl'

            #Make SUDS.Client from WSDL url
            client = Client(url)

            #Make dict with parameters for WSDL query
            d = dict(CustomerId='xxx', Password='xxx', PersonId=userID)

            #Get result from WSDL query
            result = client.service.GetPerson(**d).encode("UTF-8")

            #Soup the result
            soup = BeautifulSoup(result)

            #Make groupname variable
            self.groupname = soup.personrecord.membersubcatshortname.string

            #Check if the groupname is empty
            if len(self.groupname) == 0:
                self.groupname = "allaccess"

            #Firstname
            self.first_name = soup.personrecord.firstname.string.encode("UTF-8")

            #Lastname
            self.last_name = soup.personrecord.lastname.string.encode("UTF-8")

            #Email
            self.email = soup.personrecord.email.string

            if len(self.email) == 0:
                self.email = "none@email.com"

            #Find what group the user has
            if 'low' in self.groupname:
                g = Group.objects.get(name='lowaccess') 
            elif 'all' in self.groupname:
                g = Group.objects.get(name='allaccess') 

            if cookie_valid:
                try:
                    user = User.objects.get(username=userID)

                    #The user exist, then update the user

                    #Clear all old groups, they could have changed since last login
                    user.groups.clear()
                    #Add the group
                    g.user_set.add(user) 

                except User.DoesNotExist:
                    # Create a new user

                    user = User(username=userID, first_name=self.first_name, last_name=self.last_name, email=self.email)
                    user.is_staff = False
                    user.is_superuser = False

                    user.save() #Save the user
                    g.user_set.add(user) #Add the group
                return user
            return None

        def get_user(self, user_id):
            try:
                return User.objects.get(pk=user_id)
            except User.DoesNotExist:
                return None 
```

我该怎么做才能防止错误发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:09:37.187

在你的`CookieMiddleware.py`：

```
user = authenticate(token=token)
request.user = user
login(request, user) 
```

`user`也许`None`并且没有属性，你应该先检查它

```
if request.user:
    login(request, request.user) 
```

# algorithm - 证明遍历 k-ary 树两次产生直径

> ID：12989578
> 
> 赞同：4
> 
> 时间：2012-10-20T14:47:16.067
> 
> 标签：algorithm, data-structures, tree

[我已经知道找到这里](https://stackoverflow.com/questions/9698344/diameter-of-a-rooted-k-ary-tree)提到的树的直径的算法很长一段时间了：

1.  选择一个随机节点 A
2.  在此节点上运行 BFS 以查找距 A 最远的节点。将此节点命名为 S。
3.  现在从 S 开始运行 BFS，从 S 中找到最远的节点，将其命名为 D。
4.  S和D之间的路径是树的直径。

但为什么它会起作用？

* * *

如果可以的话，我会接受**Ivan**和**coproc**的回答。这是两种非常不同的方法，它们都回答了我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:54:26.590

说`S = [A - B - C - D - ... X - Y - Z]`是树的直径。

考虑 中的每个节点`S`，比如说`@`，从它开始并“远离”直径，不会有比 更长的链`min(length(@, A), length(@, Z))`。

所以来自树上任何节点的dfs，它将在`A`或'Z'处结束，即直径的一端，再次来自它的dfs当然会引导你到树的另一边。

参考这个

![在此处输入图像描述](../Images/ae153d5fd85f3fdeffcbb033ea4045d8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T15:42:32.287

假设您已经完成了步骤 1 和 2 并找到了 S，并且树中没有包含 S 的直径。选择树的直径 PQ。您基本上必须检查可能的情况，并且在所有情况下，发现 PS 或 SQ 至少与 PQ 一样长——这将是矛盾的。

为了系统地检查所有情况，可以假设树的根在 A。那么任意两个顶点 U 和 V 之间的最短路径按以下方式计算——设 W 为 U 和 V 的最低共同祖先。然后UV 的长度等于 U 和 W 之间以及 V 和 W 之间的距离之和 - 并且，在有根树中，这些距离只是节点级别的差异（并且 S 在这棵树中具有最大级别）。

然后分析 S 关于以 W 为根的子树（P 和 Q 的最低共同祖先）和顶点 P 和 Q 的所有可能位置。例如，第一种情况很简单 - S 不在以 W 为根的子树中. 然后，我们可以通过选择 P 和 Q 中离根更远的一个，并将其连接到 S 来简单地改进路径。其余情况类似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T15:59:46.040

该算法适用于任何无环图（树是一种特殊的无环图，因为它有一个根）。

可以通过选择任意两个附加点 S2 和 D2 并证明它们的距离 d(S2,D2) ≤ d(S,D) 来构建证明。从我们知道的算法

*   通过步骤 2：d(A,S)≥d(A,D), d(A,S)≥d(A,S2), d(A,S)≥d(A,D2) 和
*   通过步骤 3：d(S,D)≥d(S,A), d(S,D)≥d(S,S2), d(S,D)≥d(S,D2)。

通过区分最多 5 种情况（例如路径 SD 和 S2D2 没有公共边，路径 SD 和 S2D2 有公共边，A 连接到运行到 S 的边等。见下图）可以分解上述情况距离到子路径中，并根据子路径重写不等式。结论来自简单代数。细节留给读者作为练习。:-)

![在此处输入图像描述](../Images/44a7af31a0d50c90377f494065d2e0a4.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-08T13:45:06.487

在我们开始证明之前有一些引理/事实。

1.  T 是一棵树，因此任何 2 对顶点之间恰好有 1 条路径。
2.  如果 S--D 是直径，则源为 S（或 D）的 BFS 最终将给 D（或 S）最大距离。（*根据直径的定义*）

也让我们定义|XY| 为路径 X--Y 的长度。

定义 |XX| = 0。

令 A 为算法选择的随机节点。在步骤 2 之后，让最远的节点是 P。如果 P 是 S 或 D，那么使用*引理 2*我们就完成了。所以我们必须证明 P 必须是 S 或 D。

声明：如果 S--D 是直径，则 P 是 S 或 D。

证明：我将通过证明对立面来证明上述内容。证明适用于具有唯一直径的树，但对于非唯一直径，它也应该适用于微小的变化（主要是等式）。

**如果 P 既不是 S 也不是 D，则 S--D 不是直径。**

假设 P 既不是 S 也不是 D。

**案例 1：路径 A--P 与 S--D 相交**

![在此处输入图像描述](../Images/49aa89a4c67026fec84b75474a279f3b.png)

让交点为 K。我们知道 BFS 将 P 标记为距 A 和*引理 1*最远的节点。

```
|美联社| > |AS|
 |AK| + |KP| > |AK| + |KS|

```

因此我们得到 |KP| > |KS|。

同样|KP| > |KD|。

现在我们考虑路径 SP

```
|SP| = |SK| + |KP|
 |SP| > |SK| + |KD|
 |SP| > |标清|

```

所以 SP 比直径长，这意味着 SD 不是直径。

**案例 2：路径 A--P 不与 S--D 相交**

![在此处输入图像描述](../Images/c452ecc8619cf5f9e1f8dd6085eccd01.png)

现在我们知道 BFS 将 P 标记为最远节点。所以我们有

```
|美联社| > |广告|
 |美联社| > |AS|

```

我们可以写成 |AD| = |AK| + |KD| 其中K是直径中的一个顶点（包括S和D）。同样|AS| = |AK| + |KS|。

不失一般性假设 |AD|>=|AS|

```
|AK| + |KD| >= |AK| + |KS|
 |KD| >= |KS|

```

现在考虑路径 PD

```
|PD| = |AP| + |广告|
 |PD| = |AP| + |AK| + |KD|
 |PD| > |美联社| + |KD| （|AK| > 0 因为 A 不能在直径上）
 |PD| > |KD| + |KD| (|AP| > |KD|)
 |PD| > |SK| + |KD| (|KD| >= |KS|)
 |PD| > |标清|

```

所以 SD 不是直径，因此不是索赔。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-26T21:27:14.513

令 Set s 表示树的直径上的节点，A 和 Z 为末端节点，A 到 Z 的距离为直径。对于任何节点 n，它是 s 的成员，从 n 开始的最长可能路径将以 A 或 Z 结束。现在，如果您在树中选择一个 rand 节点 v，它要么是集合的成员，要么是在这个集合中有一个到节点 n 的路径。由于从 n 到的最长路径是 A 或 Z，并且从 v 到 n 的路径不能长于从 n 到 A 或 n 到 Z 的路径（如果是，则 v 必须是集合的成员）然后在任意节点 V 上运行 BFS 将首先找到 A 或 Z，随后的调用将找到互补的端点。不是数学女孩，只是抛出想法。

# ruby-on-rails - 角色表不见了，Rails Devise on Heroku

> ID：12989579
> 
> 赞同：1
> 
> 时间：2012-10-20T14:47:18.947
> 
> 标签：ruby-on-rails, heroku, devise

我是 Rails 新手，这是我的第一个应用程序 .. 我使用 devise 和 CanCan 进行身份验证和授权，并且我可以为每个用户分配一组预定义的角色...在我的本地机器上完美运行 .. 一次部署到 Heroku 并迁移数据库，一切似乎都已到位，但是当我尝试为用户分配角色时，却没有 .

知道有什么问题吗？

我还想禁用注册并只允许管理员创建用户

提前致谢

编辑：

经过太多搜索，我发现缺少的部分是 rolify gem 中的 Role 表，由于某种原因它拒绝在 PostgreSQL/Heroku 上迁移。

＆此链接中提出了问题，仍然没有找到适合我的解决方案 [https://github.com/EppO/rolify/issues/76](https://github.com/EppO/rolify/issues/76)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:12:29.370

您可能需要在 Heroku 上运行所有迁移。这样做：`heroku run rake db:migrate`然后再试一次。

# javascript - 在 Backbone 中，一旦模型被破坏，如何替换视图的模型？

> ID：12989584
> 
> 赞同：0
> 
> 时间：2012-10-20T14:47:41.117
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events

我有一个呈现日历的 Backbone 视图，该视图又为每一天呈现一个子视图。每天都有一个模型和一个单击事件，可以选择或取消选择这一天。如果选择了一天，则保存模型，如果取消选择，则销毁模型。

一旦视图的模型被销毁（因为取消选择了日期），如果重新选择日期，我不确定如何在日历日期集合中保存新模型。视图只知道模型——不知道集合。当模型被销毁时，日历视图是否应该处理创建新模型并将其附加到日期视图？还是应该将日期视图传递给集合并自行执行？还是有更好的解决方案？

为了清楚起见，以下是我的一些代码片段：

```
 var CalendarView = Backbone.View.extend({
  initialize: function () {
    this.model.dates.on('reset', this.renderDates, this);
  },

  renderDates: function () {
    // Loop through the number of days to display and create a view for each.

      // Find a model for the date. If one doesn't exist, this returns a new model.
      model = this.model.dates.completedOn(date.format('YYYY-MM-DD'));

      view = new DateView({
        model: model
      });

      $dates.append(view.render().el);

    // End loop.
  }
}); 
```

```
 var DateView = Backbone.View.extend({
  events: {
    'click .date': 'toggleDate'
  },

  toggleDate: function () {
    if (this.model.selected()) {
      this.model.destroy();
    }
    else {
      this.model.save();
    }
  }
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:11:19.343

听起来你应该有这样的设置：

1.  A`Backbone.Model`为选定的日期。我们称之为`M`.
2.  A`Backbone.Collection`容纳所有`M`模型。我们称之为`C`.
3.  A `Backbone.View`, `VM`, 表示单个选定日期，`model`属性将为`M`.
4.  A `Backbone.View`, `VC`, 代表一整月（或一年或任何您显示的内容），该`collection`属性将是 a `C`。

然后可以在其集合上`VC`侦听事件，并在将新的选定日期添加到.`'add'``VM``C`

`M`从 a中删除a`C`也相当简单。[模型上的任何事件也将在其集合上触发](http://backbonejs.org/#Collection)（如果有的话）。因此，要取消选择日期，只需销毁模型即可。`VC`可以收听其集合上的`'destroy'`事件，并根据需要清理`VM`其整体显示。

通过这种方式，您可以将大部分时间花在与集合交谈以管理您选择的日期，并通过响应适当的事件来自行解决所有其他问题。

这是一个快速的'n'dirty演示，应该向您展示这些部分是如何组合在一起的：http: [//jsfiddle.net/ambiguous/TYMTM/](http://jsfiddle.net/ambiguous/TYMTM/)

# c - 程序中的 C /sys/class/pwm init

> ID：12989587
> 
> 赞同：0
> 
> 时间：2012-10-20T14:47:50.983
> 
> 标签：c, cat, sysfs, pwm

所以你可以在这个[链接](https://sites.google.com/site/bifferboard/Home/pwm-gpio)中看到你有一个 pwm /sys/class/pwm/。

因此，我目前正在将正确的数据放入适当的文件中，并且一切正常。

这不是问题。问题是您需要在 /sys/class/pwm/{port}/request 文件激活之前对其执行“cat”。因此，如果您重新启动它将无法正常工作，您必须重新启动它。

我试图只是 fopen("~request","r") 希望它会工作，但它没有。为“w”打开它。我也尝试过执行 exec() 但这没有用，而且很笨重。我不想做出必要的假设。

无论如何，这是我的 execv() 代码。

```
char *request[1];
request[0] = pwmbus;
execv("/bin/cat",request); 
```

对文件进行分类的最优雅方法是什么？我不需要它输出的信息。它只是初始化 sysfs。否则我将不得不手动执行此操作或一直编写脚本。

```
cat /sys/class/pwm/gpio_pwm.0:0/request
sysfs 719 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:23:52.213

您可以从文件中读取一个字节：

```
int fd = open("/sys/class/pwm", O_RDONLY);
char buf[1];
read(fd, buf, 1);
close(fd); 
```

# php - 无法修改标头信息 - 标头已在 WordPress 中发送

> ID：12989589
> 
> 赞同：-3
> 
> 时间：2012-10-20T14:47:56.950
> 
> 标签：php, wordpress, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

当我进入 www.newswars.org 上的 wp-admin 时，我看到以下错误：

> 警告：无法修改标头信息 - 标头已由 /home/newswars/public_html/wp-includes/option 中的（输出开始于 /home/newswars/public_html/wp-content/themes/videoplus/functions.php:38）发送。第563行的php
> 
> 警告：无法修改标头信息 - 标头已由 /home/newswars/public_html/wp-includes/option 中的（输出开始于 /home/newswars/public_html/wp-content/themes/videoplus/functions.php:38）发送。第 564 行的 php

你能帮忙吗？

编辑：好的，这导致了我的问题。

```
$user_ej = wp_get_current_user();
if ($user_ej->roles[0] == 'contributor')
{ ?> 
```

这是 36-38 行。由于某种原因，它变得一团糟。我仍然不太确定问题是什么。我尝试删除 ?> 但这给了我一个语法错误。我不知所措。这绝对是问题区域，因为它仅在有人登录“贡献者”时出现。

```
 <?php
// Translations can be filed in the /lang/ directory
load_theme_textdomain( 'themejunkie', TEMPLATEPATH . '/lang' );

require_once(TEMPLATEPATH . '/includes/sidebar-init.php');
require_once(TEMPLATEPATH . '/includes/custom-functions.php');
require_once(TEMPLATEPATH . '/includes/post-thumbnails.php');

require_once(TEMPLATEPATH . '/includes/theme-postmeta.php');

require_once(TEMPLATEPATH . '/includes/theme-options.php');
require_once(TEMPLATEPATH . '/includes/theme-widgets.php');

require_once(TEMPLATEPATH . '/functions/theme_functions.php'); 
require_once(TEMPLATEPATH . '/functions/admin_functions.php');
function wpr_snap($atts, $content = null) {
        extract(shortcode_atts(array(
            "snap" => 'http://s.wordpress.com/mshots/v1/',
            "url" => 'http://www.catswhocode.com',
            "alt" => 'My image',
            "w" => '400', // width
            "h" => '300' // height
        ), $atts));

    $img = '<img src="' . $snap . '' . urlencode($url) . '?w=' . $w . '&h=' . $h . '" alt="' . $alt . '"/>';
        return $img;
}

add_shortcode("snap", "wpr_snap");

$user_ej = wp_get_current_user();
if ($user_ej->roles[0] == 'contributor')
{ ?>
    <style type="text/css">
        #menu-dashboard, #toplevel_page_wpcf7, #menu-tools 
        {
            display:none;
        }
  </style>

<?php }

add_filter(  'gettext',  'change_post_to_portfolio'  );
add_filter(  'ngettext',  'change_post_to_portfolio'  );

function change_post_to_portfolio( $translated ) {
  $translated = str_ireplace(  'Posts',  'VIDEOS',  $translated );  // ireplace is PHP5 only
  return $translated;
}

// Uncomment this to test your localization, make sure to enter the right language code.
// function test_localization( $locale ) {
//  return "nl_NL";
// }
// add_filter('locale','test_localization');

// Adds categories to pages
add_action('admin_init', 'reg_tax');
function reg_tax() {
register_taxonomy_for_object_type('category', 'page');
add_post_type_support('page', 'category');
}

add_action('admin_footer', 'my_admin_footer');
function my_admin_footer()
{
    $uri = isset($_SERVER['REQUEST_URI']) ? $_SERVER['REQUEST_URI'] : NULL ;

    $message = NULL;

    if ($uri AND strpos($uri,'edit.php'))
    {
        if (strpos($uri,'post_type=page'))
        {
            $message = '1.In the ‘Video Embed Code section,’ enter the video embed code. 2.Enter the title and text in the main panel below. 3.Choose which continent and category is most fitting for your video. 4.Press ‘Publish’';
        }
        else
        {
            $message = 'ALL VIDEOS';
        }
    }

    elseif ($uri AND strpos($uri,'post-new.php'))
    {
        if (strpos($uri,'post_type=page'))
        {
            $message = 'Add pages here';
        }
        else
        {
            $message = '1.In the ‘Video Embed Code section,’ enter the video embed code. 2.Enter the title and text in the main panel below. 3.Choose which continent and category is most fitting for your video. 4.Press ‘Publish’';
        }
    }

    elseif ($uri AND strpos($uri,'post.php'))
    {
        $message = 'THREE';
    }

    if ($message)
    {
        ?><script>
            jQuery(function($)
            {
                $('<div style="margin-bottom:15px; color:#FF0000;"></div>').text('<?php echo $message; ?>').insertAfter('#wpbody-content .wrap h2:eq(0)');
            });
        </script><?php
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:34:31.063

```
add_shortcode("snap", "wpr_snap");
$user_ej = wp_get_current_user();
if ($user_ej->roles[0] == 'contributor')
{ ?>
  <style type="text/css">
    #menu-dashboard, #toplevel_page_wpcf7, #menu-tools 
    {
        display:none;
    }
</style>
<?php }
add_filter(  'gettext',  'change_post_to_portfolio'  );
add_filter(  'ngettext',  'change_post_to_portfolio'  ); 
```

不在函数内部。因此，一旦文件加载，它就会被调用。这意味着所有输出都会立即发送到屏幕。这些东西应该在一个函数中，然后在正确的时间调用（就像其他位一样）。

# email - 如何从 RETR - POP3 更改消息的编码

> ID：12989596
> 
> 赞同：0
> 
> 时间：2012-10-20T14:48:25.997
> 
> 标签：email, utf-8, header, encode, pop3

我想更改 POP3 中 RETR 命令返回的消息的编码。

我在回复中得到了这个标题：

> 内容类型：text/html；字符集=WINDOWS-1255

我想将其更改为：

> 内容类型：text/html；字符集=UTF-*

非常感谢。对不起我的英语...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:52:58.213

你不能。POP3 服务器对消息的编码一无所知 - 它只是存储消息（确切地说它是如何获取的），然后将其交给客户端。事实上——理论上你可以通过 POP3 检索一些东西，那根本不是电子邮件。

消息的编码是在发送端生成的，而不是在接收端生成的。

# ruby-on-rails - 嵌套 group_by 和在 rails 上排序 ruby

> ID：12989599
> 
> 赞同：2
> 
> 时间：2012-10-20T14:48:43.180
> 
> 标签：ruby-on-rails, nested-loops

模型

1 个带有 sales_invoice_date、you_ref 等字段的平面发票表

控制器

```
def raw
  @invoices = Invoice.find(:all, :order => 'sales_invoice_date, id')
  @invoice_days =  @invoices.group_by { |day| day.sales_invoice_date }
end 
```

看法

```
<% @invoice_days.sort.each do |day, invoices| %>
  <h2><%= day.to_date.to_s(:long) %></h2>
  <% for invoice in invoices %>
  <div class="invoice_line">
    <strong><%= invoice.your_ref %></strong>
    Sales invoice date: <%= invoice.sales_invoice_date.to_date.to_s(:long) %>
  </div>
  <% end %>
<% end %> 
```

这让我的目标实现了一半。它打印以下内容：

```
September 9, 2012
    2222 Sales invoice date: September 9, 2012
    5555 Sales invoice date: September 9, 2012
    2222 Sales invoice date: September 9, 2012
October 1, 2012
    1111 Sales invoice date: October 1, 2012
    1111 Sales invoice date: October 1, 2012
    1111 Sales invoice date: October 1, 2012
November 11, 2012
    3333 Sales invoice date: November 11, 2012
December 12, 2012
    0000 Sales invoice date: December 12, 2012 
```

我需要的是一种 gr​​oup_by 并在日期循环中根据唯一的“your_ref”值再次排序的方法，它看起来像这样：

```
September 9, 2012
    2222
        2222 Sales invoice date: September 9, 2012
        2222 Sales invoice date: September 9, 2012
    5555
        5555 Sales invoice date: September 9, 2012

October 1, 2012
    1111
        1111 Sales invoice date: October 1, 2012
        1111 Sales invoice date: October 1, 2012
        1111 Sales invoice date: October 1, 2012
November 11, 2012
    3333
        3333 Sales invoice date: November 11, 2012
December 12, 2012
    0000
        0000 Sales invoice date: December 12, 2012 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:09:03.947

代替

```
 <% for invoice in invoices %>
    <div class="invoice_line">
      <strong><%= invoice.your_ref %></strong>
      Sales invoice date: <%= invoice.sales_invoice_date.to_date.to_s(:long) %>
    </div>
  <% end %> 
```

尝试：

```
 <% invoices.group_by(&:your_ref).sort.each do |ref, ref_invoices| %>
    <div class="invoice_line">
      <strong><%= ref %></strong>
    </div>
    <% for invoice in ref_invoices %>
      <strong><%= invoice.your_ref %></strong>
      Sales invoice date: <%= invoice.sales_invoice_date.to_date.to_s(:long) %>
    <% end %>
  <% end %> 
```

这也将按 ref 对发票进行分组。

# iphone - #import 和 @class 的问题导致 _OBJC_CLASS_ 从错误中引用

> ID：12989600
> 
> 赞同：0
> 
> 时间：2012-10-20T14:48:59.320
> 
> 标签：iphone, objective-c, ios, class, interface

我有两节课。

## APPagine.h

```
#import <Foundation/Foundation.h>
@interface APPagineMedia : NSObject
@property (nonatomic, retain) NSString *Immagine;
@property (nonatomic, retain) NSString *Video;
@end

@interface APPagineDescription : NSObject
@property (nonatomic, retain) NSString *Descrizione;
@end

@interface APPagineSommarioLinee : NSObject
@property (nonatomic, retain) NSString *Description;
@property (nonatomic, assign) int IdLinea;
@end

@interface APPagineSommarioCategorie : NSObject
@property (nonatomic, retain) NSString *Nome;
@property (nonatomic, assign) int DestId;
@property (nonatomic, retain) APPagineSommarioLinee *Linee;
@end

@interface APPagineSommario : NSObject
@property (nonatomic, retain) APPagineSommarioCategorie *Categorie;
@end

@interface APPagine : NSObject
@property (nonatomic, assign) NSString *Layout;
@property (nonatomic, assign) int Indice;
@property (nonatomic, retain) NSString *Titolo;
@property (nonatomic, retain) APPagineMedia *Media;
@property (nonatomic, retain) APPagineDescription *Descrizione;
@property (nonatomic, retain) APPagineSommario *Sommario;
@end 
```

## APXmlData.h

```
@interface APXmlData : NSObject

@property (nonatomic, retain) NSString *Lingua;
@property (nonatomic, assign) float Versione;
@property (nonatomic, assign) long long Timestamp;
@property (nonatomic, retain) APPagine    *Pagine;
@property (nonatomic, retain) APCategorie *Categorie;
@property (nonatomic, retain) APCarousel  *Carousel;

@end 
```

* * *

最后在我的控制器界面中：

```
#import "APXmlData.h"
@interface APViewController : UIViewController
{
  APXmlData *_XmlData;
}
@end 
```

并在实施中：

```
_XmlData.Timestamp = 123;
_XmlData.Version = 1.0;
_XmlData.Pagine = [[APPagine alloc] init];
_XmlData.Pagine.Layout = @"a";
_XmlData.Pagine.Indice = 1;
_XmlData.Pagine.Titolo = @"titolo";
//[...] 
```

* * *

但是，
当我去设置数据时

```
_XmlData.Pagine = [[APPagine alloc] init]; 
```

他给我一个链接器错误，经典

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_APPagineDescription”，引用自：
> APPagine.o 中的 objc-class-ref
> 
> “_OBJC_CLASS_$_APPagineMedia”，引用自：
> objc-class-ref in APViewController.o
> objc-class-ref in APPagine.o
> 
> “_OBJC_CLASS_$_APPagineSommario”，引用自：
> APPagine.o 中的 objc-class-ref
> 
> ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我的问题是：控制器**中的类的正确方法是什么`import`？**
应该使用`#import`or `@class`？以该顺序？
什么是需要`@class`或的课程`#import`？

## 笔记

在**Build -> Compile Sources**中，两个文件都已正确配置。
如果我删除`_XmlData.Pagine = [[APPagine alloc] init];`应用程序运行良好

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:02:50.783

您收到的错误是链接器错误，而不是编译器错误，因此看起来您`#import`已正确完成。当程序链接器找不到实现时，会发生链接器错误。我建议您检查：

*   `@implementation`您在例如 APPagine.m 中有相应的
*   该 APPagine.m 包含在项目中并在 XCode 中为您的目标激活

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:59:54.360

问题是你的 viewController 刚刚

```
#import "APXmlData.h" 
```

正如您`_XmlData.Pagine = [[APPagine alloc] init];`在 viewController中使用的那样

您还应该在 viewController 中导入`APPagine`类，使用

```
#import "APPagine.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:23:14.923

您有链接器错误的事实意味着问题不在于您的`#import`or`@class`声明。问题是您的项目缺少此类的 .m 文件（如果库包含您应该自己编译的源）或库（.a 或 .dylib 或 .framework，如果库已经为你编译）。检查目标设置中的“构建阶段”以确保项目中包含必要的文件。

# android - android - 将数据从类传递到主要活动

> ID：12989603
> 
> 赞同：1
> 
> 时间：2012-10-20T14:49:24.643
> 
> 标签：android, facebook, listview, android-activity, handler

我正在尝试根据[facebook-android-sdk](https://github.com/facebook/facebook-android-sdk/)中的示例实现一个 facebook 应用程序。我正在对其进行一些更改，但我对某些非常基本的东西感到困难。

我的主要活动显示了我附近的 facebook 位置。这就是 mainActivity.java 中的代码

```
private void getFBPlaces()
{
   fbObject.fetchPlaces();

   // NOW I want to fill my listview with the results.....
   // someting like
   placesList = (ListView) findViewById(R.id.places_list);
   placesList.setOnItemClickListener(Places.this);
   placesList.setAdapter(new PlacesListAdapter(Places.this));

} 
```

这是来自 FBObject.java 的相关代码，请参阅 TODO

```
private void fetchPlaces() {
    /*
     * Source tag: fetch_places_tag
     */
    Bundle params = new Bundle();
    params.putString("type", "place");
    try {
        params.putString("center",
                location.getString("latitude") + "," + location.getString("longitude"));
    } catch (JSONException e) {
        showToast("No places fetched.");
        return;
    }
    params.putString("distance", "1000");
    Utility.mAsyncRunner.request("search", params, new placesRequestListener());
}

/*
 * Callback after places are fetched.
 */
public class placesRequestListener extends BaseRequestListener {

    @Override
    public void onComplete(final String response, final Object state) {
        Log.d("Facebook-FbAPIs", "Got response: " + response);
        dialog.dismiss();

        try {
            jsonArray = new JSONObject(response).getJSONArray("data");
            if (jsonArray == null) {
                showToast("Error: nearby places could not be fetched");
                return;
            }
        } catch (JSONException e) {
            showToast("Error: " + e.getMessage());
            return;
        }
        mHandler.post(new Runnable() {
            @Override
            public void run() {

                // TODO: I want to return the result to main activity
                .....
            }
        });

    } 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:11:33.853

我这样做的方法是将活动实例传递给 PlacesRequestListener，并在完整的回调中执行类似“activity.findViewById(R.id.places_list)”的操作来获取列表。从这里您可以设置适配器。当然，该方法需要在主线程上运行才能操作 UI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:21:27.043

您应该考虑使用 Android SDK 的新 v3.0b。特别是，它有一个内置的地点选择器，可以帮助加速你在这里尝试做的事情。

您可以在[http://developers.facebook.com/android找到它](http://developers.facebook.com/android)

# objective-c - 如何在整个屏幕上更改光标？（不仅是当前视图/窗口）

> ID：12989605
> 
> 赞同：1
> 
> 时间：2012-10-20T14:49:32.617
> 
> 标签：objective-c, macos, cocoa, cursor

我目前正在学习目标 c，并且正在尝试编写一些简单的应用程序来帮助我学习。现在，我正在尝试制作一个应用程序，让我可以测量屏幕上任何位置的某个区域。（类似于此：[https](https://addons.mozilla.org/de/firefox/addon/measureit/) ://addons.mozilla.org/de/firefox/addon/measureit/ ）

为此，我需要知道如何在屏幕上的任何位置更改光标，而不仅仅是在某个窗口内（我已经让它工作了）。

目前我有一个名为“MyCustomView”的类，它分配给我的主窗口视图。我实现了这样的resetCursorRects方法：

```
- (void) resetCursorRects {
    [super resetCursorRects];

    NSCursor *myCursor = [NSCursor crosshairCursor];
    CGRect screenRect = [[NSScreen mainScreen] frame];
    [self addCursorRect:screenRect cursor:myCursor];
} 
```

它成功地将我的光标更改为十字准线，但仅在当前窗口内。我希望我的光标在整个屏幕上都发生变化。我怎样才能做到这一点？

谢谢你们的帮助，伙计们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:34:12.100

您可以创建 NSCursor 实例，然后调用`set`方法

```
[[[NSCursor alloc] initWithImage:[NSImage imageNamed:@"myCursor.png"] hotSpot:NSZeroPoint] set] 
```

但是其他窗口会改变它，所以我认为你需要一个覆盖所有屏幕的 0.0 不透明度的窗口。

您可以通过设置窗口级别来做到这一点。`[window setLevel:NSScreenSaverWindowLevel]`

# mysql - 如何执行以下查询？

> ID：12989608
> 
> 赞同：-2
> 
> 时间：2012-10-20T14:49:51.680
> 
> 标签：mysql

我正在使用mysql。我有一个名为 orders 的表，其中包含`orderid`、`orderdate`、和。`customerid``shippedcity``amount`

我想显示 2011 年 6 月和 2011 年的订单。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:52:17.870

您可以使用`BETWEEN`如下：

```
 SELECT * 
   FROM ORDER 
   WHERE ODERDATE BETWEEN DATE ('01-06-2011') AND DATE ('30-06-2011'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:54:04.127

这个相当容易:-)

```
SELECT *
  FROM orders
 WHERE MONTH(orderdate) = 6
   AND YEAR(orderdate) = 2011 
```

为了更好的查询性能，您可以使用这个

```
SELECT *
  FROM orders
 WHERE orderdate BETWEEN '2011-06-01 00:00:00' AND '2011-06-30 23:59:59' 
```

干杯-斯文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:52:23.253

试试这个，

```
SELECT *
FROM tableName
WHERE MONTH(orderdate) = 6 AND
       YEAR(orderDate) = 2011 
```

以供参考，

**[月（）年](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)**
**[（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T14:56:14.747

好吧，首先我要问，orderdate 字段是否包含完整日期（dd/mm/yyyy）？或者日期是如何存储的？你可以试试`SELECT orderid FROM orders WHETE orderdate = 'your date in the correct format it is stored'`

# javascript - 我想用 jquery 替换一个 url 查询参数

> ID：12989611
> 
> 赞同：0
> 
> 时间：2012-10-20T14:50:29.497
> 
> 标签：javascript, jquery, html

我想用另一个参数替换一个动态 url 查询参数。

例如。就像我的网址是：

[http://www.mysite.com/209-0539.prd?pageLevel=&skuId=111-4567&sc_cmp=pcp_GSF_Batteries+%26+Ele​​ctrical+Accessories_209-0539](http://www.mysite.com/209-0539.prd?pageLevel=&skuId=111-4567&sc_cmp=pcp_GSF_Batteries+%26+Electrical+Accessories_209-0539)

我想从之后开始更换所有东西

```
&sc_cmp=pcp_GSF_Batteries+%26+Electrical+Accessories_209-0539 
```

并添加类似*& new Static string*

我的最终网址应如下所示：

[http://www.mysite.com/209-0539.prd?pageLevel=&skuId=111-4567&](http://www.mysite.com/209-0539.prd?pageLevel=&skuId=111-4567&)新的静态字符串。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:08:58.373

我推荐你使用很酷的[URI.js](http://medialize.github.com/URI.js/)库，那么它就这么简单：

```
var url = "http://www.mysite.com/209-0539.prd?pageLevel=&skuId=111-4567&sc_cmp=pcp_GSF_Batteries+%26+Electrical+Accessories_209-0539";

url = URI(url).removeSearch("sc_cmp").addSearch("newvar","newval");

// http://www.mysite.com/209-0539.prd?pageLevel=&skuId=111-4567&newvar=newval
alert(url); 
```

请参阅工作[**演示**](http://jsfiddle.net/8LE6a/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:40:11.930

如果您不想包含另一个库，以下可让您添加想要删除的搜索项，并添加任意数量的搜索项，而无需大量代码

```
/* array of search keys to remove*/
var removeSearch = ['sc_cmp']; 

/* array of new search items*/
var newSearchitem = ['image=cool']; 
var url = location.href; 

var pageUrl = url.split('?')[0];

var urlSearch = url.split('?')[1].split('&');
/* store search items in array */
var newSearchArr = [];
/* loop over exisiting search items and store keepers*/
for (i = 0; i < urlSearch.length; i++) {
    var key = urlSearch[i].split('=')[0];
    if ($.inArray(key, removeSearch) == -1) {
        newSearchArr.push(urlSearch[i])
    }
}

$.merge(newSearchArr, newSearchitem);

var newUrl = pageUrl + '?' + newSearchArr.join('&') 
```

**演示：http:** [//jsfiddle.net/9VPUX/](http://jsfiddle.net/9VPUX/)

# bash - 检查文件是否在bash中的给定目录（或子目录）中

> ID：12989615
> 
> 赞同：7
> 
> 时间：2012-10-20T14:50:42.487
> 
> 标签：bash

如何检查给定文件是否在目录中，包括具有该目录的任何目录，等等？我想在 bash 脚本中做一个小的完整性检查，以检查用户是否没有尝试更改项目目录之外的文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T14:54:09.553

使用 find （它从 cwd 或提供的目录路径中递归搜索）：

```
find $directory_path -name $file_name | wc -l 
```

将其用作 bash 脚本的一部分的示例：

```
#!/bin/bash
...

directory_path=~/src/reviewboard/reviewboard
file_name=views.py

file_count=$(find $directory_path -name $file_name | wc -l)

if [[ $file_count -gt 0 ]]; then
    echo "Warning: $file_name found $file_count times in $directory_path!"
fi
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T16:50:14.380

如果找不到文件，find 不返回任何内容（即空字符串）。`if [ '' ]`将评估为 FALSE。

```
if [ $(find "$search_dir" -name "$filename") ]; then 
  echo "$filename is found in $search_dir"
else
  echo "$filename not found"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:54:35.857

`find /path/to/dir -name "filename" | wc -l`会给你文件存在的次数`/path/to/dir`及其子目录。任何大于 0 的结果都表示文件位于正确的路径中。任何等于 0 的结果都意味着文件不在路径中或不存在。

# erlang - Erlang Cowboy 连接状态

> ID：12989616
> 
> 赞同：1
> 
> 时间：2012-10-20T14:50:51.790
> 
> 标签：erlang, cowboy

我有一个用 Cowboy 开发的 Erlang websocket 服务器。

我想为每个连接保留一个状态变量，这取决于客户端发送的命令。

为每个 websocket 连接保留状态变量的最佳方法是什么？

编辑：使用“持久”我的意思是它应该只在连接的生命周期内保存在内存中，不需要数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:46:46.743

所有 websocket 函数都采用用户定义的`State`参数，用于在函数调用之间保持您自己的状态。当 websocket 关闭时，状态被丢弃。

您在 的返回值中对其进行初始化`websocket_init/3`，`websocket_handle/3`并将`websocket_info/3`状态作为参数，您可以在其中查找所需的数据。在 and 的返回值中`websocket_init/3`，`websocket_handle/3`您传递新状态（如果不需要状态更新，则相同）。草图：

```
websocket_init(_TransportName, Req, _Opts) ->
     MyInitialState=just_started, % The state can be any erlang term,e.g. a record
     {ok, Req, MyInitialState}.

websocket_handle({text, _Msg}, Req, State) ->
     NewState = case State of
            just_started -> up_and_running;
            _ -> still_running
          end,
     {ok, Req, NewState}. 
```

# r - Round(x,2) 根本没有效果？

> ID：12989620
> 
> 赞同：-4
> 
> 时间：2012-10-20T14:51:19.940
> 
> 标签：r

请在
[https://www.box.com/s/z3tldpdykhppmivfexjl中下载文件](https://www.box.com/s/z3tldpdykhppmivfexjl)

，将其另存为'/tmp/mydata'
并运行以下代码

```
datafile="/tmp/mydata"
totalsize=file.info(datafile)$size
lines=totalsize/32
con=file(datafile,"rb")
date<-c()
data<-c()
for (i in 1:lines){
    result1<-readBin(con,integer(),n=1,size=4,endian="little")
    date<-c(date,result1)
    result2<-round(readBin(con,double(),n=7,size=4,endian="little"),2)
    data<-c(data,result2)
}
date=data.frame(matrix(date,nrow=lines,ncol=1,byrow=TRUE))
data=data.frame(matrix(round(data,2),nrow=lines,ncol=7,byrow=TRUE))
data=cbind(date,data)
names(data)<-c("date","open","high","low","close","volume","amount","reserved")
data<-data[-c(1:2),] 
```

完成后，请`data`在 R 控制台中输入，
可以看到长数字， [https://www.box.com/s/lxkbs96vk02p6ekdflbe](https://www.box.com/s/lxkbs96vk02p6ekdflbe)
![在此处输入图像描述](../Images/30b67abf5ffd4c63aedad3b1286f01e0.png) 为什么`round(data,2)`不能四舍五入？
太奇怪了，当我将数据写入 csv 文件时，打开 csv 文件，我发现它只有 2 位数字！

```
write.csv(file="/tmp/test",data) 
```

Joris Meys 说在 for 循环中增长向量是不好的方法，但我发现在我的情况下这可能是一个好方法，如果不是，如何修改它？让我看看更好的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:32:14.243

关于增加循环的问题，如果您不知道读取的每个二进制向量的长度，一种选择是将所有内容放入列表中（因为我不知道，因为我没有下载您的数据也没有运行您的代码！） . 进入列表后，如果读入的每个元素的长度相同，或者在这种情况下，如果您想要的只是一个向量，则只需`unlist()`每个列表即可。

```
datafile <- "/tmp/mydata"
totalsize <- file.info(datafile)$size
lines <- totalsize / 32
con <- file(datafile, "rb")
## allocate storage
date <- data <- vector(mode = "list", length = lines)
## although actually growing lists is not inefficient
for (i in 1:lines){
    ## directly fill in the lists we created using index i to point
    ## to the ith component of each list
    date[[i]] <- readBin(con, integer(), n=1, size=4, endian="little")
    data[[i]] <- round(readBin(con,double(), n=7, size=4, endian="little"), 2)
} 
```

此时您有两个列表，如果您希望将它们压缩成一个向量，请执行

```
date <- unlist(date)
data <- unlist(date) 
```

# wordpress - 仅为 the_title 函数添加过滤器到 the_title

> ID：12989623
> 
> 赞同：0
> 
> 时间：2012-10-20T14:51:32.783
> 
> 标签：wordpress

由于`the_title()`和`the_title_attribute()`函数使用相同的函数`get_the_title()`来检索标题，有没有办法`the_title`只为函数添加过滤器`the_title()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:38:55.797

不，没有办法做到这一点，因为既不`the_title`也不`the_title_attribute`提供任何过滤器。就像你说的，他们打电话给过滤器`get_the_title`在哪里。`the_title`但是你可以很容易地复制它的代码`the_title`并制作你自己的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T13:51:16.540

为我工作。

```
add_filter('the_title', 'somefilter');
function somefilter($title)
{
     $tr=debug_backtrace();
     $out='';
     foreach ($tr as $v){
         if (strpos($v['function'], 'title')) {
             $out.=$v['function'];
         }
    }
    if ($out!='get_the_titlethe_title') {
         return $title;
    }
    /** some filtering of the_title()
    but not get_the_title() can be placed below **/
} 
```

# wordpress - Facebook 喜欢在 wordpress 中出现问题

> ID：12989626
> 
> 赞同：2
> 
> 时间：2012-10-20T14:51:42.050
> 
> 标签：wordpress, facebook, facebook-like

使用我的主题共享此插件或任何类似 Facebook 的脚本时，我的 Facebook 喜欢出现错误

![图片](../Images/d89be5da43611a6e5f96e36beb02ef4c.png)

[这](http://pastebin.com/8nhU4tDg)是我的`style.css`。

你能告诉我要编辑或删除什么吗？也许`overflow:hidden`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:52:38.600

我也发生了同样的情况，但在 2 周内自动修复。或尝试删除缓存和 cookie 这也是由于不完整加载缓存和 cookie 而发生的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:46:45.060

这显然是 CSS 问题。我敢打赌，您已经`<li>`将 FB 之类的元素设置为`overflow:hidden`. 正如你所建议的。请删除该网站的网址，以便我查看。

# php - php从类函数传回对象

> ID：12989629
> 
> 赞同：1
> 
> 时间：2012-10-20T14:52:13.380
> 
> 标签：php, class

我有一组 PHP 函数，我想将它们移到一个新类中。其中一个功能是在参数中使用 &$obj 来修改原始对象：

```
function process_new_place_names(&$obj) 
```

在此函数中对 $obj 所做的任何更改都将传递回脚本。

问题是，我也可以在 PHP 类中执行此操作吗？另外，这种方法的术语是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:57:33.813

你绝对可以在课堂上做到这一点。它被称为[通过引用传递。](http://php.net/manual/en/language.references.pass.php)

进一步阅读：

[http://php.net/manual/en/language.references.php](http://php.net/manual/en/language.references.php) [http://php.net/manual/en/language.oop5.references.php](http://php.net/manual/en/language.oop5.references.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:05:17.763

正如 SomeKittens 所说，这在一个类中是完全可能的。但是，如果`$obj`它本身是一个类的实例，而您需要做的就是修改其成员变量（称为*变异*对象），则无需通过引用传递它。

例如，以下代码将输出`baz`;

```
class Foo
{
    public $bar;
}

function process_new_place_names($obj)
{
    $obj->bar = 'baz';
}

$obj = new Foo();
$obj->bar = 'bar';
process_new_place_names($obj);
echo $obj->bar; 
```

仅当您想更改变量本身的值时，才需要传递引用；例如，重新分配对象引用：

```
function process_new_place_names(&$obj)
{
    $obj = new Foo();
    $obj->bar = 'baz';
} 
```

# c - 为什么我只能在具有 16 GB RAM 的计算机上分配 2 GB？

> ID：12989630
> 
> 赞同：4
> 
> 时间：2012-10-20T14:52:17.060
> 
> 标签：c, linux, malloc

> **可能重复：**
> [您可以在 c 或 c++ 中分配一个非常大的单个内存块（> 4GB）吗？](https://stackoverflow.com/questions/181050/can-you-allocate-a-very-large-single-chunk-of-memory-4gb-in-c-or-c)

我在我的电脑上运行以下程序：

```
#include <stdio.h>
#include <stdlib.h>

#define ONE_GIGABYTE 1024*1024*1024

int main(void) {
    int ctr=0;

    for (;;) {
        char *ptr = (char*)malloc(ONE_GIGABYTE*sizeof(char));
        if (ptr == 0)
            return -1;

        ctr++;
        printf("%d\n", ctr);
    }
}

flyrev@stargazer:~/weirdstuff$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 128957
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 128957
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
flyrev@stargazer:~/weirdstuff$ free -g
             total       used       free     shared    buffers     cached
Mem:            15          6          8          0          0          4
-/+ buffers/cache:          2         13
Swap:            9          0          9
flyrev@stargazer:~/weirdstuff$ clang malloc-program.c 
flyrev@stargazer:~/weirdstuff$ ./a.out 
1
2
flyrev@stargazer:~/weirdstuff$ 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:00:44.690

您没有用完内存，而是在 32 位系统上运行，因此地址空间不足，您可能有理由期望能够在 32 位系统上分配 4Gb，因为：

`2^32 = 4Gb`

但是，在大多数操作系统上，至少 50% 的可用地址空间实际上是为内核保留的，因此您只能拥有其中的一半。

[在 Linux 上，通过切换到使用PAE 内核](http://en.wikipedia.org/wiki/Physical_Address_Extension)，可以在 32 位模式下使用显着超过 4Gb 的数据。如果您需要，许多 Linux 发行版都将 PAE 内核作为一个包提供。

**编辑**：正如 Dietrich 所指出的：PAE 允许使用更多内存，但仍然只为您提供 4 GiB 的地址空间。因此，使用 16 GiB，您可以拥有 8 个程序，每个程序 2 GiB，但您仍然不能拥有超过 2-ish GiB 的程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:29:37.357

@Benj 为这个问题提供了一个很好的答案。但是，我想补充一点，即使一个人使用的是 64 位系统，如果使用针对 32 位系统的编译器编译程序，他可能仍然只能使用 2GB 内存。

64 位系统通常支持 32 位程序。但是 32 位系统无法运行 64 位系统。因此，如果作者选择了不期望占用 2GB 内存的程序，可能会编译为针对 32 位系统。此外，32 位目标通常是默认值，即使在 64 位系统上也是如此。

# webgl - 如何展现不受灯光影响的素色质感？

> ID：12989633
> 
> 赞同：2
> 
> 时间：2012-10-20T14:52:25.457
> 
> 标签：webgl

我的 WebGL 场景中有一些类似 GUI 的元素，它们必须以纯白色显示，并且不受场景中照明的影响。

纹理是一个 HTML5 画布元素，具有纯白色背景。

但是当我在场景中渲染画布时，作为纹理，它会受到光照的影响，变成浅灰色。

如何以与画布相同的颜色（纯白色）完全显示此纹理？

我怀疑答案在片段着色器中并且已经玩了一段时间......是的，我得到了一次纯色但没有别的，我想在背景颜色上显示一些文本。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:20:14.747

我知道了！:D

在片段着色器中，我添加了一个布尔变量：

```
uniform bool uNoLights; 
```

并且在设置时仅使用纹理像素信息来确定最终颜色：

```
if (uNoLights) {
    gl_FragColor =  texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
}  else {
    gl_FragColor =  lights * texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:35:53.880

Another option is to use a separate program for your GUI and your scene.

> What do you mean with program, different fragment shader / shaders?

A program is the combination of a vertex shader and a fragment shader. You must have a `gl.useProgram` somewhere in your code; I'm talking about setting up two different programs and doing `gl.useProgram` inside your rendering loop, before the scene and before the GUI.

The advantage of this is that you can completely separate the programs, and avoid having any logic that is only needed for the scene wasting time in the GUI, and vice versa.

(The disadvantage is that switching programs itself has a cost, which might be more than the cost of the conditional in this case, but it is quite normal to switch programs within a single frame.)

In the end you have to measure to see which gives better performance for your use case.

# c# - 无需输入类名即可获取枚举？

> ID：12989636
> 
> 赞同：4
> 
> 时间：2012-10-20T14:52:40.770
> 
> 标签：c#, enums

我注意到在 C# 中，当我有一个枚举时，说：

```
class ClassObject {
   public static Enum EventType = {Click, Jump, Etc};
} 
```

当我必须访问它时，我必须通过它的主类，它非常冗长。例如：

```
ClassObject.EventType.Click 
```

我希望我能以更短的方式访问它，比如： `EventType.Click`，会让我得到它。

所以我认为我可以尝试创建一个单独的类并从 Enum 扩展它：

```
class EventType : Enum {
   Click, Jump, Etc;
} 
```

但是，我收到了一个语法错误。

实际上，为此目的创建另一个单独的类有点麻烦，我什至不知道这是否是一个好习惯。但理想情况下，我只想缩短名称，并且可能避免在访问枚举之前必须键入类名。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T14:54:39.030

您可以将枚举放在类的相同深度，它不必是类成员

```
namespace Test
{
    public enum EventType
    {
        Click,
        Jump,
        Etc
    };

    class ClassObject { }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T14:56:51.820

您正在类范围内定义枚举。这就是为什么你必须通过类来访问它。在课堂之外定义它并从您喜欢的任何地方访问。`Nested Enum and classes are not directly accessible.`

```
public static Enum EventType = {Click, Jump, Etc};

class ClassObject {

} 
```

# objective-c - 实施 3D 运动力

> ID：12989638
> 
> 赞同：2
> 
> 时间：2012-10-20T14:52:56.203
> 
> 标签：objective-c, math, 3d

我有一个移动的 3D 对象，我需要能够对其施加力，例如重力。在 2D 中，我只需将其运动存储在 dx 和 dy 中，但由于这是 3D 中的，所以我使用 a`Vector3D direction`和 a `float speed`。当使用类似的东西时，如何确定旋转方向和改变速度的程度`applyForce(Vector3D force)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:08:51.197

牛顿第二定律给出了加速度与施加的力成正比。因此，一个非常简单的方法是前向集成，例如（用于紧凑性的伪代码）

```
class Object {
   Vector3D position;
   Vector3D velocity;
   float mass;

   updatePhysics(Vector3D force, float dt) {
      velocity += (1.0/mass) * force * dt;
      position += velocity * dt;
   }
} 
```

当然，在现实生活中存在诸如数值不稳定性和时间增量的选择等问题。如果您尝试执行一些一次性计算或者这是针对 3D 游戏，我无法从您的问题中理解。如果是后者，我建议您查看诸如 Bullet Physics 之类的物理库，您将免费获得很多。

# java - 如何从 Sqlite 获取记录

> ID：12989643
> 
> 赞同：1
> 
> 时间：2012-10-20T14:53:20.570
> 
> 标签：java, android, database, sqlite, search

这是我在 DBMethods 类中的方法：

```
public void getResult(EditText keyWord2){

    EditText keyWord = null;

    String SQL ="localSearch.php?query="+keyWord.getText();
    mDb.rawQuery(SQL, null);
} 
```

这是我在 webServices 类中打开数据库和所有内容的方法。

```
public void startSearch(View v){

    keyWord = (EditText)findViewById(R.id.searchField);
        String data = null;
        DBMethods mDbHelper = new DBMethods(this);         
        mDbHelper.createDatabase();       
        mDbHelper.open(); 

        mDbHelper.getResult(keyWord);
        mDbHelper.close();

} 
```

当我尝试通过在搜索栏中输入一些关键字从数据库中获取数据时，会发生强制关闭错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:17:55.127

*EditText keyWord = null;*

```
String SQL ="localSearch.php?query="+keyWord.getText(); 
```

关键字为空，这将给出空指针异常。

我认为您的 SQL 变量必须是

```
localSearch.php?query="+**keyWord2**.getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:40:38.560

确保在模拟器中卸载已安装的相同应用程序。因为一旦我们运行我们的应用程序，Sqlite DB 安装在我们的模拟器中并且无法编辑。所以卸载您的应用程序，然后在更改后再次运行您的应用程序。

# ruby-on-rails - rails 3中的投票上/下按钮

> ID：12989645
> 
> 赞同：1
> 
> 时间：2012-10-20T14:53:30.133
> 
> 标签：ruby-on-rails, ruby

我正在学习 Rails，并且正在编写一个简单的应用程序来处理笔记。注释有一个整数值“分数”。我希望用户按下一个名为“投票赞成”和一个“投票反对”的按钮，投票赞成将使 score=score+1。

notes_controller.rb 有一个方法“upvote”，看起来像

```
def upvote
  @note = Note.find params[:id]

  @note.score = @note.score +1
end 
```

但我不知道如何路由，以便将 POST（或 UPDATE？）发送到 /notes/:id/upvote 使注释`score`发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:46:44.277

在您的路线文件中：

```
resources :notes do
  member do
    put :upvote
  end
end 
```

`upvote_note_path`这将创建将指向的命名路由`/notes/:id/upvote`，并将运行您的 NotesController upvote 操作。

# mysql - 在 MySql 5.5.2.24 上安装员工示例数据库？

> ID：12989647
> 
> 赞同：5
> 
> 时间：2012-10-20T14:53:48.327
> 
> 标签：mysql

我正在尝试从[http://dev.mysql.com/doc/employee/en/index.html](http://dev.mysql.com/doc/employee/en/index.html)安装示例数据库。我在我的 Windows 7 机器上安装了全新的 WAMP。MySql 目前没有密码设置。

当我尝试使用下面的命令运行 employees.sql 时，它会读取文件创建数据库和表，但它无法加载转储文件。给出的错误是：未能打开文件 load_titles.dump 错误 2

```
source C:\temp\employees_db\employees.sql 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-12T01:25:47.963

您需要将转储文件的完整路径放在Employees.sql 文件中。导入前在文本编辑器中编辑此文件。

示例：

'c:/user/download/load_departments.dump' 而不是 'load_departments.dump'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-04T22:42:40.853

下面通过将 (\) 更改为 (/) 为我工作

```
source C:/Users/pankaj/Downloads/test_db-master/show_elapsed.sql ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-27T13:10:02.843

您可以使用 MySQL 工作台进行安装。单击文件>运行 SQL 脚本，然后选择employees.sql

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-26T23:19:46.310

首先，编辑employees.sql 并为每个.dump 文件插入完整路径名。

所以（就我而言），文本变为：

```
:
SELECT 'LOADING departments' as 'INFO';
source C:/temp/test_db-master/load_departments.dump ;
SELECT 'LOADING employees' as 'INFO';
source C:/temp/test_db-master/load_employees.dump ;
SELECT 'LOADING dept_emp' as 'INFO';
source C:/temp/test_db-master/load_dept_emp.dump ;
SELECT 'LOADING dept_manager' as 'INFO';
source C:/temp/test_db-master/load_dept_manager.dump ;
SELECT 'LOADING titles' as 'INFO';
source C:/temp/test_db-master/load_titles.dump ;
SELECT 'LOADING salaries' as 'INFO';
source C:/temp/test_db-master/load_salaries1.dump ;
source C:/temp/test_db-master/load_salaries2.dump ;
source C:/temp/test_db-master/load_salaries3.dump ;
: 
```

其次，将反斜杠改为正斜杠。

然后我的命令行变为：

```
source C:/temp/test_db-master/employees.sql` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-03T18:36:10.530

您需要在 employees.sql 文件中引用缺少的 *.dump 文件（请记住，您可能需要在成功创建“员工”数据库后自己导入它们）：

这是丢失的 .dump 文件的链接： [链接到丢失的 .dump 文件](https://launchpad.net/test-db/employees-db-1/1.0.6/+download/employees_db-dump-files-1.0.5.tar.bz2)

```
SELECT 'LOADING departments' as 'INFO';
source load_departments.dump ;
SELECT 'LOADING employees' as 'INFO';
source load_employees.dump ;
SELECT 'LOADING dept_emp' as 'INFO';
source load_dept_emp.dump ;
SELECT 'LOADING dept_manager' as 'INFO';
source load_dept_manager.dump ;
SELECT 'LOADING titles' as 'INFO';
source load_titles.dump ;
SELECT 'LOADING salaries' as 'INFO';
source load_salaries.dump ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-27T16:06:16.373

编辑employees.sql 文件并插入“*.dump”文件的完整路径以及最后一个“show_elapsed.sql”文件，使用“/”作为符号路径。替换默认的“\”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-16T09:47:21.330

我已经有这个问题2周了。已经尝试过上述解决方案，但没有任何帮助。我将我的工作台版本从 8.0.27 版本降级到 8.0.22 的较低版本，之后我可以通过运行脚本命令运行导入员工数据。我希望你觉得这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-06T16:47:02.647

首先，我们需要了解`.sql`文件包含的内容。它包含 SQL 命令，因此`.sql`文件更像是包含 SQL 命令（DDL、DML 等）的脚本。

我从[这里](https://github.com/datacharmer/test_db)下载了一个示例数据集。解压 zip 后，下面是文件的树状图：

```
C:\Users\chankruze\Downloads\test_db-1.0.7.tar\test_db-1.0.7\test_db>tree /f /a
Folder PATH listing
Volume serial number is EA88-380A
C:.
|   Changelog
|   employees.sql
|   employees_partitioned.sql
|   employees_partitioned_5.1.sql
|   load_departments.dump
|   load_dept_emp.dump
|   load_dept_manager.dump
|   load_employees.dump
|   load_salaries1.dump
|   load_salaries2.dump
|   load_salaries3.dump
|   load_titles.dump
|   objects.sql
|   README.md
|   show_elapsed.sql
|   sql_test.sh
|   test_employees_md5.sql
|   test_employees_sha.sql
|   test_versions.sh
|
+---images
|       ._employees.jpg
|       employees.gif
|       employees.jpg
|       employees.png
|
\---sakila
        README.md
        sakila-mv-data.sql
        sakila-mv-schema.sql 
```

现在谈到你的问题。

假设我正在导入如下：

```
D:\>mysql -u root -p < C:\Users\chankruze\Downloads\test_db-1.0.7.tar\test_db-1.0.7\test_db\employees.sql
Enter password: ******
INFO
CREATING DATABASE STRUCTURE
INFO
storage engine: InnoDB
INFO
LOADING departments
ERROR at line 113: Failed to open file 'load_departments.dump', error: 2 
```

从上面的日志中可以清楚地看出正在创建数据库结构，但它给出了错误，用于从转储文件加载数据，对你来说也是如此？

好吧，是时候调查了……

如果您仔细查看上面的日志，您会注意到我正在从`D:`驱动器执行 mysql 以更通用，比如说从不存在提取文件的任何其他**位置**。看..有道理吗？好的。

现在，如果我为我打开`employees.sql`位于的位置`C:\Users\chankruze\Downloads\test_db-1.0.7.tar\test_db-1.0.7\test_db`，从第 112 行到第 127 行，我可以看到有命令`source <xyz>.dump;`（如下所示）。

```
SELECT 'LOADING departments' as 'INFO';
source load_departments.dump ;
SELECT 'LOADING employees' as 'INFO';
source load_employees.dump ;
SELECT 'LOADING dept_emp' as 'INFO';
source load_dept_emp.dump ;
SELECT 'LOADING dept_manager' as 'INFO';
source load_dept_manager.dump ;
SELECT 'LOADING titles' as 'INFO';
source load_titles.dump ;
SELECT 'LOADING salaries' as 'INFO';
source load_salaries1.dump ;
source load_salaries2.dump ;
source load_salaries3.dump ;

source show_elapsed.sql ; 
```

这些行负责将样本数据集（从另一台服务器转储）加载到该服务器。

如果这些行导致问题，很明显 mysql 无法找到这些文件。

您可以从上面目录的树视图中注意到，这些转储文件位于相同的位置`employees.sql`（`employees.sql`并且所有`*.dump`文件都是同级文件）。因此在 sql 文件中，这些转储文件是相对引用的。

**解决方案**

我们可以通过两种方式解决这个问题：

**1.推荐方法**

从 cli 导航到同一文件夹后执行安装。（如下所示）：

```
C:\Users\chankruze\Downloads\test_db-1.0.7.tar\test_db-1.0.7\test_db>mysql -u root -p < employees.sql
Enter password: ******
INFO
CREATING DATABASE STRUCTURE
INFO
storage engine: InnoDB
INFO
LOADING departments
INFO
LOADING employees
INFO
LOADING dept_emp
INFO
LOADING dept_manager
INFO
LOADING titles
INFO
LOADING salaries
data_load_time_diff
00:01:09 
```

为什么我推荐这个？因为您只需要更改工作目录而不需要修改`.sql`文件。

**2.替代方法**

好吧，您可以在文件中使用绝对路径，`.sql`如下所示：

```
...
SELECT 'LOADING departments' as 'INFO';
source C:/Users/chankruze/Downloads/test_db-1.0.7.tar/test_db-1.0.7/test_db/load_departments.dump ;
... 
```

注意：您需要在完整路径中替换`\`为。`/`

不鼓励使用这种替代方法，因为将`.sql`在其设备中使用该替代方法的其他用户需要对其进行编辑。

希望你有两个理由和它的解决方案;）

# timer - Erlang 计时器可以扩展吗？

> ID：12989658
> 
> 赞同：8
> 
> 时间：2012-10-20T14:55:39.403
> 
> 标签：timer, erlang

在我用 Erlang 开发的 websocket 服务器中，我想`start_timer/3`为每个连接使用一个计时器（

假设我将有大量客户端连接，Erlang 计时器是否可以很好地扩展？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T15:38:43.157

什么是大量连接？Erlangs VM 在内部使用计时器轮来处理计时器，因此它可以很好地扩展到数千个连接。那么你可能会遇到麻烦。

通常，诀窍是在计时器上将 pid 组合在一起。这也是内核倾向于做的事情。例如，如果您有一个必须在 200 毫秒内唤醒的计时器，您可以提前安排自己，而不是在下一个计时器上，而是再次安排下一个 200 毫秒计时器。这意味着您将等待至少 200 毫秒，也许 400 毫秒，300 毫秒是典型的。通过近似这样的计时器，您可以运行更多，因为您可以让单个计时器一次性唤醒大量进程。但是根据定时器的频率和定时器的数量，一个标准`send_after/3`可能就足够了。

在任何情况下，我都会首先假设它可以扩展，然后如果它不能通过像上面设想的近似时间来处理问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:50:28.980

这种服务器的一个常见模式是利用轻量级 Erlang 进程，并为每个连接创建一个服务器。

例如，您可以使用为您提供两者的 gen_server 行为来构建您的服务器

*   使用 State 变量管理连接的不同状态（等待连接、登录等），
*   每个连接和每个状态的单独超时，由 VM 和 OTP 行为管理。

好消息是每个服务器都必须处理一个客户端，因此编写起来非常容易。

初始化阶段应该启动一个等待连接的服务器，

然后在连接时，服务器应该启动一个新的客户端，为下一个客户端做好准备（最好是通过主管启动 simple_one_for_one 孩子）并进入登录步骤或任何你想做的事情。

您会在网站 LearnYouSomeErlang 上找到非常有趣的信息，特别是在[http://learnyousomeerlang.com/supervisors](http://learnyousomeerlang.com/supervisors)章节和以下章节中。

# c# - 在两个 IP 地址之间做出决定

> ID：12989659
> 
> 赞同：1
> 
> 时间：2012-10-20T14:56:14.160
> 
> 标签：c#, mysql, ip

我有一个 Windows 应用程序表单，可以在其中输入 IP 以连接到 MySQL 数据库。我需要的帮助是如何编程，这样如果输入 IP 不存在或没有响应，我的表单应该返回一条消息并连接到默认 IP，即 localhost。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:32:55.543

你可以尝试这样的事情：

```
MySqlConnection connection;

if (this.TryConnect("xxx.xxx.xxx.xxx", out connection))
{
    // display error message here   
}
else if (this.TryConnect("localhost", out connection))
{
    // code here
} 
```

TryConnect 函数如下所示：

```
public bool TryConnect(string ServerIP, out MySqlConnection connection)
{
    try
    {
        const string connectionString = "Server={0};Database=<database>;Uid=<username>;Pwd=<password>;";
        var conn = new MySqlConnection(string.Format(connectionString, ServerIP));

        conn.Open();
        conn.Close();
        connection = conn;
        return true;
    }
    catch (Exception)
    {
        connection = null;
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:58:15.497

您可以先尝试连接到远程数据库，如果由于某种原因失败（当 IP 有效但没有`mysqld`服务器正在运行且无法访问时，它也可能失败），连接到本地数据库（但通知用户） .

# php - 为非 JSON ajax 指定内容类型

> ID：12989667
> 
> 赞同：1
> 
> 时间：2012-10-20T14:57:58.997
> 
> 标签：php, javascript, content-type

我最近向所有返回 JSON 的服务器代码添加了 JSON 内容类型。即 header('Content-Type: application/json'); 我也有很多脚本只期望真/假或 1/0。我知道我不需要指定内容类型，但是，我很好奇这是否是最佳实践，我应该这样做。请指教。谢谢

我的非 JSON ajax Javascript

```
$.post('file.php',obj,
function (status) {
  if(status==1) {alert('do this');}
  else{alert('do that');return false;}
}); 
```

文件.php

```
<?php
header('Content-Type: ???/???');
echo(1);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:59:25.913

```
header('Content-Type: text/plain'); 
```

# php - Codeigniter Zip Library如何压缩现有文件

> ID：12989669
> 
> 赞同：0
> 
> 时间：2012-10-20T14:58:11.087
> 
> 标签：php, file, codeigniter, zip

我将解压缩的文件移动到服务器目录 /zip/file.unzipped.png

现在我需要拿那个文件并压缩它。

是否有可能这样做或需要 zip 存档作为 codeigniter 指南所说的？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:29:44.333

您正在寻找的只是直接下载，而不是在下载之前将存档保存在磁盘上吗？

如果是这种情况，您可以执行@zer02 建议的操作，但删除存档步骤。

> $name = 'mydata1.txt';
> 
> $data = '一个数据字符串！';
> 
> $this->zip->add_data($name, $data);
> 
> ~~// 将 zip 文件写入服务器上的文件夹。将其命名为“my_backup.zip”~~
> 
> ~~$this->zip->archive('/path/to/directory/my_backup.zip');~~
> 
> // 将文件下载到您的桌面。将其命名为“my_backup.zip”
> 
> $this->zip->download('my_backup.zip');

zip 库应该收集您添加到内存中 zip 缓存的所有数据，并创建一个文件以动态下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:46:22.913

请阅读用户手册：[http ://codeigniter.com/user_guide/libraries/zip.html](http://codeigniter.com/user_guide/libraries/zip.html)

对于您的用例，有两个功能可以让我跳出来：

`$this->zip->read_file()`

> 允许您压缩服务器某处已存在的文件。提供一个文件路径，zip 类将读取它并将其添加到存档中：

`$this->zip->read_dir()`

> 允许您压缩已存在于服务器某处的文件夹（及其内容）。提供目录的文件路径，zip 类将递归读取它并将其重新创建为 Zip 存档。提供的路径中包含的所有文件都将被编码，其中包含的任何子文件夹也将被编码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T16:01:53.907

```
$name = 'mydata1.txt';

$data = 'A Data String!';

$this->zip->add_data($name, $data); 
```

// 将 zip 文件写入服务器上的文件夹。将其命名为“my_backup.zip”

```
$this->zip->archive('/path/to/directory/my_backup.zip'); 
```

// 将文件下载到您的桌面。将其命名为“my_backup.zip”

```
$this->zip->download('my_backup.zip'); 
```

[Zip Lib CI](http://codeigniter.com/user_guide/libraries/zip.html)

# android - 如何解决元音重音问题

> ID：12989671
> 
> 赞同：0
> 
> 时间：2012-10-20T14:58:17.543
> 
> 标签：android, textview, android-edittext

我必须在 Android 的 EditText 区域中显示文本。

一切正常，但如果文本使用有重音的元音字符，

例如 ：

`"è", "ì", "à", "ò" "ù"`,

显示的是代码，而不是正确的字符。

我只是使用

```
 String   text= myEditText.getText().toString(); 
```

要获取字符串，我将字符串存储在文件中并使用

```
myEditText.setText(text); 
```

当我第二次检索数据时，在 EditText 区域中设置字符串文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:51:53.487

我认为问题出在将数据保存到文件期间。如果您的文件在保存数据时没有采用 utf8 字符集，那么您在没有这些字符的情况下读回它。因此，请确保正确保存它：

```
String filePath = "/sdcard/utf8_file.txt";
String UTF8 = "utf8";
int BUFFER_SIZE = 8192;

BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(filePath), UTF8),BUFFER_SIZE);
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(filePath), UTF8),BUFFER_SIZE); 
```

当你读回来时，你应该可以像现在一样在你的 myEditText 上使用 setText() 。

# java - 在查询错误中将不同的数据类型插入到 postgreSQL

> ID：12989674
> 
> 赞同：0
> 
> 时间：2012-10-20T14:58:43.237
> 
> 标签：java, sql, postgresql

我想在 PostgreSQL 数据库中插入一条记录。它的大部分字段是字符串，但也有 java.sql.date 和 BIGINT。我怎样才能做到这一点？我的代码似乎不起作用。

```
 public Record(RecordFields data)
    {
        CreateNewRecord(data);
    }

        private void CreateNewRecord(RecordFields recordFields)
        {
            try
            {    

                    String addRecord = "INSERT INTO " + GlobalFields.TABLE + " VALUES (? , ? , ? , ? , ? , ? , ? , ? , ?);";

                    Connection conn = DataBase.Connect();

                    PreparedStatement query = conn.prepareStatement(addRecord);
                    query.setLong(1, recordFieldsID);
                    query.setString(2, recordFields.surname);
                    query.setString(3, recordFields.name);
                    query.setString(4, recordFields.sex);

                    DateTime date = recordFields.bornDate.toDateTime();
                    query.setTimestamp(5, new Timestamp(date.getMillis()));

                    query.setString(6, recordFields.adress);
                    query.setString(7, recordFields.contact);
                    query.setString(8, recordFields.insurance);
                    query.setString(9, recordFields.commentary);

                    query.executeUpdate(addRecord);
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }

    } 
```

表生成器：

```
public static void CreateTable()
    {
        try
        {
            Connection conn = DataBase.Connect();

            try
            {
                Statement stat = conn.createStatement();

                String createTable = "CREATE TABLE " + GlobalFields.TABLE 
                    + "(id BIGINT PRIMARY KEY,"
                    + "surname TEXT,"
                    + "name TEXT,"
                    + "sex CHAR(1),"                 
                    + "bornDate DATE,"
                    + "adress TEXT,"
                    + "contact TEXT,"
                    + "insurance TEXT,"
                    + "commentary TEXT);";

                stat.executeUpdate(createTable);
            }
            finally
            {
                conn.close();
            }
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        } 
    } 
```

公共类 RecordFields { 公共 RecordFields() { }

```
public long id;
public String surname;
public String name;
public String sex;
public MutableDateTime bornDate;
public String adress;
public String contact;
public String insurance;
public String commentary; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:14:09.853

```
stat.executeUpdate(createTable); 
```

是罪魁祸首。在 PreparedStatements 上[，executeUpdate 不带任何参数](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)。

因此，将该行修改为 - 正如[汤姆安德森所解释的那样](https://stackoverflow.com/a/12182875/112079)

```
stat.executeUpdate(); 
```

你完成了

还，

```
INSERT table VALUES (values) 
```

使您的代码变得不必要地脆弱。利用

```
INSERT INTO table (fieldlist) VALUES (valuelist) 
```

反而。

还有2：

```
DateTime date = recordFields.bornDate.toDateTime();
query.setTimestamp(5, new Timestamp(data.getMillis())); 
```

是一个相当复杂的说法

```
query.setTimestamp(5,new Timestamp(recordFields.bornDate.getMillis())); 
```

编辑：关于[postgressql 中的日期](https://stackoverflow.com/questions/12182751/date-in-postgressql)

Tom 说的是，要填充 PostgreSQL`DATE`类型列，您可以使用`java.sql.date`类型变量（与 "common" 相对`java.util.Date`），或者使用`javax.sql.TimeStamp`. 但这与当前的问题（这是由调用 executeUpdate 中的参数引起的）完全无关，您在这里所做的（使用 Timestamp 类型变量设置它）是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:06:13.003

看看[这个](https://stackoverflow.com/questions/7776779/java-crosstab-preparedstatement-query)问题。

本质上，您的代码应具有以下形式：

```
String query = "..."; 
PreparedStatement stat = conn.prepareStatement(query); 
ResultSet rs = stat.executeQuery(); 
while (rs.next()) { 
  // TODO 
} 
```

因为您没有包含问题方法的所有源代码，所以很难完全诊断。

# sql - SQL表辅助，数据库中每张表都包含辅助？

> ID：12989676
> 
> 赞同：-2
> 
> 时间：2012-10-20T14:58:50.500
> 
> 标签：sql, database, oracle-xe

我从来没有听说过这个辅助：

```
SQL> select * from customer;

CUSTID CUSTNAME       VDUMMY

   504 customer4         101
   505 customer5         101
   506 customer6         101

SQL> select * from customer auxillary;

CUSTID CUSTNAME       VDUMMY

   504 customer4         101
   505 customer5         101
   506 customer6         101 
```

*   每个表都包含数据库中的辅助表？
*   什么是辅助？
*   如果我们删除原始表，辅助表会被删除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:43:18.403

“客户”后面的词不是表格。它只是您可以为查询中的任何表提供的别名。它用于在使用（即连接）多个表时识别具有相同名称的列，如下所示：

```
select * from table1 t1 
   inner join table2 t2 on t1.id = t2.id 
```

在 SQL Server 中，您也可以将第二个查询编写为

```
select * from customer as auxiliary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:45:33.073

它是客户表的别名。它可以是“customeralias”之类的任何东西。它的辅助是表的简短而甜美的名称。

# vba - 仅从网站获取特定表格到 Excel

> ID：12989687
> 
> 赞同：3
> 
> 时间：2012-10-20T15:00:49.733
> 
> 标签：vba, excel

我需要使用 VBA 从[http://www.zillow.com/homes/comps/67083361_zpid/](http://www.zillow.com/homes/comps/67083361_zpid/)获取表格到 Excel 中。我只想要那张桌子，别无其他。但是当我使用时：

```
Set objIE = CreateObject("InternetExplorer.Application")

With objIE
    .Visible = True
    .Navigate "http://www.zillow.com/homes/comps/67083361_zpid/"
    Do While .ReadyState <> 4: DoEvents: Loop
    Debug.Print .document.Body.outerText
End With 
```

它给了我这样的文字：

> 4723 N 63rd Dr$63,50008/17/201241.752,0747,6751972$360.11

对于我无法分析并存储到 Excel 不同单元格中的每种产品。

那么有没有一种方法可以以一种可管理的方式获取页面数据。如果我需要为此遍历一个循环，我可以。我还可以进行额外的处理以正确地将行数据填充到 Excel 中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T08:36:39.393

我会使用下面的，因为我发现查询表很慢而且 IE 非常慢；）

```
Sub GetData()
    Dim x As Long, y As Long
    Dim htm As Object

    Set htm = CreateObject("htmlFile")

    With CreateObject("msxml2.xmlhttp")
        .Open "GET", "http://www.zillow.com/homes/comps/67083361_zpid/", False
        .send
        htm.body.innerhtml = .responsetext
    End With

    With htm.getelementbyid("comps-results")
        For x = 0 To .Rows.Length - 1
            For y = 0 To .Rows(x).Cells.Length - 1
                Sheets(1).Cells(x + 1, y + 1).Value = .Rows(x).Cells(y).innertext
            Next y
        Next x
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T15:45:39.497

我已经使用以下代码完成了它：

```
Sub FetchData()
    With ActiveSheet.QueryTables.Add(Connection:= _
        "URL;http://www.zillow.com/homes/comps/67083361_zpid", Destination:=Range( _
        "$A$1"))
        .Name = "67083361_zpid"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .WebSelectionType = xlEntirePage
        .WebFormatting = xlWebFormattingNone
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

# mysql - 表中单行的SELECT索引

> ID：12989688
> 
> 赞同：1
> 
> 时间：2012-10-20T15:00:51.830
> 
> 标签：mysql, select, indexing

我有一个存储团队的 MYSQL 表。

**表结构：**
`CREATE TABLE teams ( id int(11) NOT NULL AUTO_INCREMENT, name varchar(28) COLLATE utf8_unicode_ci NOT NULL, UNIQUE KEY id (id) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1;`

**样本数据：**
`INSERT INTO`团队`VALUES (1, 'one'), (2, 'two'), (3, 'three'), (4, 'four'), (5, 'five');`

**使用：**
`SELECT id, name, id as rowNumber FROM teams WHERE id = 4`
返回正确的 rowNumber，因为在表中它前面确实有三行。但这只有在我不删除一行的情况下才有效。

**示例：**
假设`DELETE FROM teams WHERE id = 3;`
我现在使用`SELECT id, name, id as rowNumber FROM teams WHERE id = 4`结果是错误的，因为表中现在只有两行（id 的 1 和 2）在它前面。

如何从一个特定行获取按 id 排序的“真实”行号/索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:03:29.590

您正在转为 rturning `ID`，`rowNumber`因此它只是返回`ID`列值。为什么你期望它会有所不同？

我认为您可能想要定义和`@curRow`变量以获取行号并使用子查询，如下所示：

```
 SELECT * from 
    (SELECT  ID, 
         NAME, 
         @curRow := @curRow + 1 AS rowNumber
      FROM    Teams t
      JOIN    (SELECT @curRow := 0) curr
      ORDER by t.ID asc) as ordered_team
 WHERE ordered_team.id = 4; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:17:48.397

这不是一个好方法，但是使用普通的 sql：

```
SELECT
    t.id,
    t.name,
    (SELECT COUNT(*)+1 FROM teams WHERE id < t.id) as row_number
FROM teams t
WHERE t.id = 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:05:56.073

为什么要打扰持久层内的行索引？

如果您真的需要依赖存储的元组的“索引”，您可以引入一个变量并在每行的查询/程序代码中递增它。

编辑：刚刚发现一个::[使用 MySQL，如何在表中生成包含记录索引的列？](https://stackoverflow.com/questions/3126972/mysql-row-number)

# android - AlertDialog 正面按钮变为空

> ID：12989691
> 
> 赞同：0
> 
> 时间：2012-10-20T15:01:04.403
> 
> 标签：android, android-alertdialog

我想禁用 AlertDialog 中的确定按钮。我尝试使用下面的代码。但得到 NPE

```
alertDialogBuilder = new AlertDialog.Builder(getActivity());
alertDialogBuilder.setView(view);
alertDialogBuilder.setPositiveButton(android.R.string.ok, this);
alertDialogBuilder.setNegativeButton(android.R.string.cancel, this);
alertDialog = alertDialogBuilder.create();

Button positive = alertDialog.getButton(AlertDialog.BUTTON_POSITIVE);
positive.setEnabled(false); 
```

按钮正面即将为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:10:27.663

通过这种方式设置按钮，它只显示一个按钮。

```
alertDialogBuilder = new AlertDialog.Builder(getActivity());
alertDialogBuilder.setView(view);
alertDialog = alertDialogBuilder.create();

    alertDialog.setButton(android.R.string.cancel,
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int arg1) {
                            dialog.dismiss();

                        }
                    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T15:31:32.557

只需使用神经按钮

```
 final AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(super.mContext);
    dialogBuilder.setTitle(
            super.mContext.getResources().getString(R.string.FAVORITE_RENAME_DIALOG_TITLE));
    dialogBuilder.setMessage(
            super.mContext.getResources().getString(R.string.FAVORITE_RENAME_DIALOG_MESSAGE));

    final EditText input = new EditText(super.mContext);

    input.setInputType(
            InputType.TYPE_TEXT_FLAG_CAP_WORDS | InputType.TYPE_TEXT_VARIATION_LONG_MESSAGE);
    input.setText(name);
    input.setSelectAllOnFocus(true);
    input.setHint(super.mContext.getResources().getString(R.string.FAVORITE_DIALOG_HINT));
    input.setFilters(
            new InputFilter[]{new DialogInputFilter(), new InputFilter.LengthFilter(20)});

    dialogBuilder.setView(input);

    dialogBuilder.setNeutralButton(
            super.mContext.getResources().getString(R.string.FAVORITE_RENAME_DIALOG_POSITIVE),
            new UpdateFavoriteListNameOnClickListener(name, favListId, input,
                    (Activity) super.mContext, this)
    );

    dialogBuilder.setNegativeButton(
            super.mContext.getResources().getString(R.string.FAVORITE_DIALOG_NEGATIVE),
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,
                        int whichButton) {

                }
            }
    ); 
```

首先在这里 Create() 然后获取 alertDialog 并获取 Button 并使用它做你想要的......我将它用于 MinLength 验证

```
 dialogBuilder.create();
    final AlertDialog alertDialog =  dialogBuilder.show();
    Button button = ((AlertDialog)alertDialog).getButton(AlertDialog.BUTTON_NEUTRAL);

    input.addTextChangedListener(new TextMinLengthValidator(input, button) {
        @Override
        public void validate(EditText input, Button button) {
            if (input.getText().length() < ConfigurationProvider.getConfig().getMinFavoriteNameLength() && button != null) {
                button.setEnabled(false);
                input.setError(mContext.getResources().getString(R.string.FAVORITE_DIALOG_LENGTH_NEGATIVE));
            } else if(button != null) {
                button.setEnabled(true);
                input.setError(null);
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:16:53.760

我找到了方法。重要的一点是在显示警报对话框之后，只有我们应该进行启用/禁用操作。所以为了禁用对话框，我使用了下面的代码。

```
alertDialog.setOnShowListener(new OnShowListener() {

            @Override
            public void onShow(DialogInterface dialog) {

                Button positive = alertDialog.getButton(AlertDialog.BUTTON_POSITIVE);
                positive.setEnabled(false);

            }
        }); 
```

# python - 我在使用“python”而不是“python3”编译时得到正确的输出

> ID：12989695
> 
> 赞同：0
> 
> 时间：2012-10-20T15:01:36.933
> 
> 标签：python, python-3.x, python-2.7

在下面的python代码中

```
 var=input("Enter a number between 1 to 10:")
    if (var==1 or var==2 or var==3 or var==4 or var==5):
          print ('the entered number is between 1 to 5')
    elif (var==6 or var==7 or var==8 or var==9 or var==10):
          print ('The entered number is between 5 to 10')
    else:
          print ('Wrong value exiting!!') 
```

当我在终端中运行它时~$ python name.py

输入 1 到 10:3 之间的数字

输入的数字在 1 到 5 之间

当我在终端中运行它时~$ python3 name.py

输入 1 到 10:3 之间的数字

错误的值退出！！

有什么区别？& 当我用 python3` 编译时，为了得到正确的输出，我必须改变什么？

* * *

***有没有更简单的比较方法而不是*** ***对每个数字****使用“或” ？*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:06:21.277

在 Python 2 中：

```
var=input("Enter a number between 1 to 10:") 
```

上面对表达式求值，所以它最终`var`可能等于一个数字。（并且确实应该避免注意）

在 Python 3 中，`input`是等价的。of`raw_input`在 Python 2 中，因此它返回一个字符串 - 如果您希望它是一个数字，您需要执行`var = int( input("...") )`并注意可能发生的任何转换错误：

有`in`运营商：

```
if var in (1, 2, 3, 4, 5):
    pass
elif var in (6, 7, 8):
    pass
else:
    pass 
```

或者，如果你想要一个 between 操作，你可以使用 Python 逻辑系统：

```
if 1 <= var <= 5:
    pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:05:15.673

我相信这是由于您`input`在 Python 3.x 中使用了 - ，它与 Python 2.x 中的相同`raw_input`，这意味着它将其转换为字符串而不是整数。至于您的比较，您可以尝试使用`range`：

```
var=int(input("Enter a number between 1 to 10:"))

if var in range(1, 6):
      print ('the entered number is between 1 to 5')
elif var in range(6,11):
      print ('The entered number is between 5 to 10')
else:
      print ('Wrong value exiting!!') 
```*

# php - 使用 PHP 查找字符的 unicode

> ID：12989697
> 
> 赞同：12
> 
> 时间：2012-10-20T15:01:48.913
> 
> 标签：php

> **可能重复：**
> [如何获取 utf-8 字符串中给定字符的代码点编号？](https://stackoverflow.com/questions/395832/how-to-get-code-point-number-for-a-given-character-in-a-utf-8-string)

我在 javascript 中有一个示例代码：

```
var str = "HELLO WORLD";
var n = str.charCodeAt(0); 
```

这返回 72

如何在 PHP 中完成这项工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T15:07:20.107

**ASCII**

这将有助于：

```
//Code to Character
echo chr(65);

//Character to Code
echo ord('A'); 
```

**统一码**

但由于这些函数适用于 ASCII，因此适用于 Unicode：

```
function uniord($u) {
    $k = mb_convert_encoding($u, 'UCS-2LE', 'UTF-8');
    $k1 = ord(substr($k, 0, 1));
    $k2 = ord(substr($k, 1, 1));
    return $k2 * 256 + $k1;
}

echo uniord('ب'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T15:04:20.617

相当于上面的将是

```
$str = "HELLO WORLD";
$n = ord($str[0]); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-20T15:11:31.597

在此处的文档中查看[此贡献的注释：](http://www.php.net/manual/en/function.ord.php#109812)

[http://www.php.net/manual/en/function.ord.php](http://www.php.net/manual/en/function.ord.php)

有一个函数返回 UTF-8 值，这是我假设你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T15:10:11.283

要了解 unicode，您应该尝试这个（http://us.php.net/manual/en/function.ord.php）

```
function uniord($u) {
    $k = mb_convert_encoding($u, 'UCS-2LE', 'UTF-8');
    $k1 = ord(substr($k, 0, 1));
    $k2 = ord(substr($k, 1, 1));
    return $k2 * 256 + $k1;
} 
```

# c# - 在 BackgroundWorker.RunCompleted 处理程序中引发事件

> ID：12989698
> 
> 赞同：1
> 
> 时间：2012-10-20T15:02:12.320
> 
> 标签：c#, multithreading

`Foobar`我有一个在线程 X 上构造的类的实例。我有一个`StartWork()`只能从线程 X 调用的函数。为了避免创建错误，我通过检查来强制执行此约束`Debug.Assert(CreatorID == Environment.CurrentManagedThreadId)`。该函数启动 a 的异步操作`BackgroundWorker`。我已经确保`WorkCompleted()`当工作人员通过挂钩完成其操作时调用它`RunWorkerCompleted`。

出于线程安全的原因`WorkCompleted()`，应该在线程 X 上执行，因为它会发出事件通知。如果这些通知是从错误的线程广播的，我想程序可能会遇到无法预料的线程安全问题。

但是，在我的测试中，我注意到它`WorkCompleted()`并没有像我预期的那样从线程 X 调用。如何修复我的程序以防止引发这些事件可能引起的任何线程安全问题？我是否错误地解决了这个问题？我已经意识到我仍然需要使我的`BackgroundWorker.DoWork`处理程序线程安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:20:35.897

通过在 UI 线程上创建实例，我能够让`RunWorkerCompleted`处理程序在同一线程上运行。[此答案](https://stackoverflow.com/a/2806824/217649)`Foobar`的相关片段：

> 如果`BackgroundWorker`是从 UI 线程创建的，则该`RunWorkerCompleted`事件也将在 UI 线程上引发。

# asp.net-mvc-3 - 实体框架多对多

> ID：12989699
> 
> 赞同：3
> 
> 时间：2012-10-20T15:02:14.097
> 
> 标签：asp.net-mvc-3, entity-framework, entity-relationship

```
public class Project
{

    public virtual int ID { get; set; }

    [Required]
    public virtual String Title { get; set; }

    public String Definition { get; set; }
    public DateTime StartDate { get; set; }

    [Required]
    public int CreaterID { get; set; }

    public virtual ICollection<Status> Status { get; set; }
    public virtual ICollection<Task> Tasks { get; set; }
    public virtual ICollection<User> Users { get; set; }

    public Project()
    {
        Users = new HashSet<User>();
    }

}

public class User
{
    public int ID { get; set; }

    [DisplayName("Kullanıcı Adı")]
    [Required]
    [MinLength(5, ErrorMessage = "Kullanıcı Adı En Az 5 Karakter Olmalıdır")]
    public string username { get; set; }

    [DataType(DataType.Password)]
    [DisplayName("Şifre")]        
    [Required]
    [MinLength(3,ErrorMessage="Şifre En Az  3 Karakter Olmalıdır")]
    public string password { get; set; }

    [Required]
    public String Name { get; set; }

    [Required]
    public String Surname { get; set; }

    public int? CreaterID { get; set; }
    public int level { get; set; }

    public ICollection<Task> Tasks { get; set; }
    public ICollection<Project> Projects { get; set; }

    public User()
    {
        Projects = new HashSet<Project>();
    }
}

public class TaskDB : DbContext
{
    public DbSet<Comment> Comments { get; set; }
    public DbSet<Project> Projects { get; set; }
    public DbSet<Situation> Situaitons { get; set; }
    public DbSet<Task> Tasks { get; set; }
    public DbSet<User> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Project>().
          HasMany(c => c.Users).
          WithMany(p => p.Projects).
          Map(
           m =>
           {
               m.MapLeftKey("ProjectId");
               m.MapRightKey("UserId");
               m.ToTable("ProjectUser");
           });
    }

} 
```

如果我添加项目，当前用户添加到项目用户列表但项目未添加当前用户的项目列表这是我的项目添加代码

```
[HttpPost]
    public ActionResult Create(Project proje,Status status)
    {

        proje.StartDate = DateTime.Now;
        proje.Status = new HashSet<Status>();
        var user = _db.Users.Single(r=> r.ID == UserRole.ID);
        proje.Users.Add(user);
        proje.Status.Add(status);
        user.Projects.Add(proje);

        if (ModelState.IsValid)
        {
            var projeler = _db.Projects;
            projeler.Add(proje);
            _db.SaveChanges();

            return RedirectToAction("Index");

        }

            return View(proje);

    } 
```

我搜索这个问题的原因我没有找到，我想了解为什么实体框架将用户添加到项目列表但不将项目添加到用户列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:48:41.740

您将新项目添加到数据库的代码看起来是正确的，并且很可能已存储了关系。

但可能你没有`Projects`用`User`. 如果你打电话...

```
var project = _db.Projects.Single(p => p.ID == 1);
var users = project.Users; // lazy loading because Users is virtual 
```

...您将看到项目的用户，因为他们被*延迟加载*，因为该`Project.Users`属性被标记为`virtual`. 如果你对`User`...

```
var user = _db.Users.Single(u => u.ID == 1);
var projects = user.Projects; // no lazy loading because Projects is not virtual 
```

...项目未加载，因为该`User.Projects`属性未标记为`virtual`.

也可以标记该属性`virtual`以启用`User.Projects`集合的延迟加载：

```
public virtual ICollection<Project> Projects { get; set; } 
```

或者使用急切加载：

```
var user = _db.Users.Include(u => u.Projects).Single(u => u.ID == 1); 
```

# objective-c - 选择时自定义 NSTableCellView 标签不会改变文本颜色

> ID：12989700
> 
> 赞同：17
> 
> 时间：2012-10-20T15:02:24.703
> 
> 标签：objective-c, macos, cocoa, nstableview, nstableviewcell

我有一个`NSTableCellView`带有 3 个文本字段的自定义，其中 1 个是我自己创建的，另外 2 个是我自己创建的。这是问题所在：
![在此处输入图像描述](../Images/c42371e602f5129ffa5f3ce24984a2a7.png)

即使我单击该行，文本字段的文本颜色也保持不变。我试图实现通过谷歌搜索找到的代码，但它不起作用。我的自定义 NSTableCellView 代码是：

```
- (void)drawRect:(NSRect)dirtyRect{
    NSColor *color = [NSColor colorWithCalibratedRed:(26/255.0) green:(26/255.0) blue:(26/255.0) alpha:1.0];
    [self.textField setTextColor:color];

    color = [NSColor colorWithCalibratedRed:(102/255.0) green:(102/255.0) blue:(102/255.0) alpha:1.0];
    [_lbl1 setTextColor:color];
    [_lbl2 setTextColor:color];
}

- (void)setBackgroundStyle:(NSBackgroundStyle)backgroundStyle {
    NSColor *color = (backgroundStyle == NSBackgroundStyleDark) ? [NSColor windowBackgroundColor] : [NSColor controlShadowColor];
    self.textField.textColor = color;
    self.lbl1.textColor = color;
    self.lbl2.textColor = color;
    [super setBackgroundStyle:backgroundStyle];
} 
```

当用户单击标签时，我该怎么做才能使标签的文本颜色变白？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-20T05:52:46.027

实际上，在 NSTableViewCell 上覆盖 setBackgroundStyle 对我来说非常有效，至少在 OS X 10.8 上是这样。它在选择事件和窗口激活/停用时更新。

这是我的自定义单元 impl - 尽可能简单：

```
@implementation RuntimeInstanceCellView

- (void)setBackgroundStyle:(NSBackgroundStyle)backgroundStyle {
    [super setBackgroundStyle:backgroundStyle];
    self.detailTextField.textColor = (backgroundStyle == NSBackgroundStyleLight ? [NSColor darkGrayColor] : [NSColor colorWithCalibratedWhite:0.85 alpha:1.0]);
//    self.detailTextField.textColor = (backgroundStyle == NSBackgroundStyleLight ? [NSColor blackColor] : [NSColor whiteColor]);
}

@end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-08T09:04:34.430

扩展已接受的答案，在**Swift 2.0**中，过程略有不同。覆盖子类的`backgroundStyle`属性`NSTableCellView`以添加 didSet[属性观察者](https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Properties.html#//apple_ref/doc/uid/TP40014097-CH14-ID262)：

```
class CustomTableCellView: NSTableCellView {

    @IBOutlet weak var detailTextField: NSTextField!

    override var backgroundStyle: NSBackgroundStyle {
        didSet {
            if self.backgroundStyle == .Light {
                self.detailTextField.textColor = NSColor.controlTextColor()
            } else if self.backgroundStyle == .Dark {
                self.detailTextField.textColor = NSColor.alternateSelectedControlTextColor()
            }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-08T17:05:50.807

对于 Swift 3 和 4（这不是很有趣吗？）：

```
override var backgroundStyle: NSView.BackgroundStyle {
    didSet {
        if self.backgroundStyle == .light {
            self.detailTextField.textColor = NSColor.controlTextColor
        } else if self.backgroundStyle == .dark {
            self.detailTextField.textColor = NSColor.alternateSelectedControlTextColor
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-10-20T15:37:05.183

在您`tableViewSelectionDidChange`使用的单元格中

```
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath]; //replace UITableViewCell with your customCell class name if it other
//now as u got the instance of your cell u can modify the labels in it, like
cell.lable1.textColor = [UIColor whiteColor]; 
```

这对你有用。

在此之后再次选择其他单元格时可能会出现问题，那时之前的单元格可能仍然具有白色标签。如果这会给您带来问题，`NSIndexPath`您的标题类中只有一个代表先前选择的 indexPath 的实例，使用它您可以在选择新单元格后设置回默认颜色。

# algorithm - 在网格上插值的最佳算法

> ID：12989706
> 
> 赞同：3
> 
> 时间：2012-10-20T15:03:07.170
> 
> 标签：algorithm, interpolation

我有一个设置点，其坐标由数组给出`x`，`y`并且`z`每个点的密度字段的值存储在数组中`d`。我想在均匀的网格上重建密度场。最好的算法是什么？我知道在 python 中，scipy 模块在`griddata`函数中派上用场，但我想编写自己的代码，我只需要提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:42:59.117

如果你想自己实现一种数学方法，当然需要学习理论。在这种情况下，它是**3D 分散数据插值**。

[Wikipedia](http://en.wikipedia.org/wiki/Multivariate_interpolation#Irregular_grid_.28scattered_data.29)、[MATLAB help](http://www.mathworks.com/help/matlab/ref/griddata.html)和[scipy help](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html)说至少有六种不同的方法。WP 对它们有相当好的描述，并且有一篇[比较文章](http://www.unizar.es/acz/05Publicaciones/Monografias/MonografiasPublicadas/Monografia20/Monogr20-8Bozzini.pdf)，但我强烈建议你在这样一个术语密集的主题上用你的母语找到一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:48:01.070

一种方法是形成散点的 Delaunay 三角剖分`[x,y,z]`，（实际上是 3d 情况下的四面体化！）并使用在四面体顶点处定义的密度场的线性表示在每个元素内执行插值。

要评估每个结构化网格点的密度，您将 (i) 确定该点位于哪个四面体内并 (ii) 评估线性插值。

形成 Delaunay 三角剖分并非易事，根据您选择的语言，有一些很好的库可以用于此。一个不错的选择是[CGAL](http://www.cgal.org/)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T16:09:54.453

如果您有某种标量场并且这些点是场的起源，您可以通过遍历所有格点并计算给定源的场强来实施蛮力方法。有两种递归方法允许在字段或多或少恒定的情况下“消隐”大体积，以及通过计算从一个点到下一个点的变化来节省一些 CPU 时间的技术。

如果您拥有的点是一个值的样本，那么您将不得不按体积分解您的空间并插入这些值。您可以使用简单的 Voronoi 分解 - 这通常在 2D 中进行降水测量 - 或*Delaunay 四面体*化（您可以查看[TetGen](http://wias-berlin.de/software/tetgen/)的文档）。第一种方法假设函数在每个 Voronoi 体积中是恒定的；最后一个允许渲染[三线性插值](http://en.wikipedia.org/wiki/Trilinear_interpolation)。

如果您需要平滑 3D 网格，三线性插值看起来是最好的方法。

还有其他用于快速可视化的方法，包括按照与常规网格中任何给定点的距离顺序维护一个 3D 点列表。在网格中移动时，您使用二次增量重新计算距离。然后，您根据所选基数的点子集执行简单的插值（即，如果您考虑距离 d1..d4 处最近的四个点，您将通过按比例加权值 v1..v4 来计算 P 中的值） . 这种方法快速且易于自己实施，但请注意，只要点之间的最小距离小于晶格步长，它就会表现不佳（您可以通过考虑更多发生这种情况的点来进行补偿；如果采样函数在相同尺度下是平滑的）。

# wpf - UseSynchronizationContext=false 是否意味着我必须是线程安全的？

> ID：12989708
> 
> 赞同：1
> 
> 时间：2012-10-20T15:03:22.910
> 
> 标签：wpf, wcf, duplex-channel

这是关于带有 NetTcpBinding 的 WCF 双工服务。

我刚刚将 UseSynchronizationContext=false 参数添加到我的 ServiceBehavior 属性中，这可以在服务端的回调通道上调用 Close() 时停止冻结。

然而，这是否意味着我现在必须在我的 WPF 窗口中保持线程安全？因为我可能会在两个不同线程上同时单击一个按钮时获得回调操作，对吗？

# jquery - 一起使用 bxslider 和 nivoslider - bxslider 不工作而 nivoslider 工作完美

> ID：12989713
> 
> 赞同：1
> 
> 时间：2012-10-20T15:04:08.823
> 
> 标签：jquery, nivo-slider, bxslider

我正在尝试在一页中同时使用 bxslider 和 nivoSlider 。

**但是 bxslider 在我的 wordpress 中根本不工作 :(** Nivo Slider 工作完美，没有问题。

这是我在“header_ins.php”中使用的 nivoslider，它被包含在“header.php”文件中：-

```
<link rel="stylesheet" href="<?php bloginfo('template_directory'); ?>/slider.css" type="text/css" media="screen" /> 
```

```
<div class="slider-wrapper theme-bar">
                    <div id="slider" class="nivoSlider">
                        <img src="<?php bloginfo('template_directory'); ?>/slider/images/header1.jpg" data-thumb="<?php bloginfo('template_directory'); ?>/slider/images/header1.jpg" alt="" />
                        <img src="<?php bloginfo('template_directory'); ?>/slider/images/header2.jpg" data-thumb="<?php bloginfo('template_directory'); ?>/slider/images/header2.jpg" alt="" />
                        <img src="<?php bloginfo('template_directory'); ?>/slider/images/header3.jpg" data-thumb="<?php bloginfo('template_directory'); ?>/slider/images/header3.jpg" alt="" />
                        <img src="<?php bloginfo('template_directory'); ?>/slider/images/header4.jpg" data-thumb="<?php bloginfo('template_directory'); ?>/slider/images/header4.jpg" alt="" />
                    </div>
                </div>
        <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/slider/scripts/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/slider/jquery.nivo.slider.js"></script>
        <script type="text/javascript">
        $(window).load(function() {
            $('#slider').nivoSlider();
        });
        </script> 
```

这是我在“header.php”文件中使用的 bxslider 源代码：-

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script><script src="js/jquery.Slider.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
$('#scroll1').bxSlider({
    mode: 'fade',
    displaySlideQty: 3,
    moveSlideQty: 3,
    pager: true
});
});</script>

<div id="slider1">
        <div >
            <a href="#"><img src="2.jpg" />
                <p>test1</p></a>
        </div>         
        <div >
            <a href="#"><img src="2.jpg" />
                <p>test2</p></a>
        </div>         
        <div >
            <a href="#"><img src="2.jpg" />
                <p>test3</p></a>
        </div>         
        <div>
            <a href="#"><img src="2.jpg" />
                <p>test4</p></a>
        </div></div> 
```

**但是 bxslider 在我的 wordpress 中根本不工作** Nivo Slider 工作完美，没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T16:39:26.203

该代码有很多问题：

你调用 jquery 两次，因为 jquery 已经是 wordpress 的一部分，你不需要在 header.php 中添加它

在您的functions.php 文件中连接btx 脚本，然后您可以根据需要调用它。

# windows - 确定焦点控件是否为可编辑控件？

> ID：12989715
> 
> 赞同：0
> 
> 时间：2012-10-20T15:04:20.870
> 
> 标签：windows, winapi, textbox, controls

使用**纯 Win32 API**，如何获取当前具有焦点的控件的句柄？然后我如何确定它是否是文本框/富文本框？

我正在尝试编写一个小宏键程序，它允许用户使用 RegisterHotKey() 函数注册新的热键。除了我不想在不知道控件是否是文本框的情况下猛烈调用 SetWindowText() 或 SendMessage(hWnd, WM_SETTEXT, 0, TEXT("Something")) 之外，一切都工作正常。

请注意，我想要当前具有焦点的**控件**的句柄，而不是用户正在处理**的整个窗口。**

# debugging - 在 monodevelop 中调试 2 个项目

> ID：12989716
> 
> 赞同：0
> 
> 时间：2012-10-20T15:04:44.760
> 
> 标签：debugging, mono, project, monodevelop

我有一个简单的问题，也许解决方案就在我眼前，但我看不到：如何在 monodevelop 中调试多个项目（例如：服务器和客户端项目）？它现在只调试一个项目（断点，..）。在我关闭第一个项目后，monodevelop 说：“不执行“.exe 路径”。调试器会话已经启动。”

那么是否可以有多个调试器会话？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:09:29.393

您一次只能运行或调试一个应用程序（这在 Visual Studio 中没有什么不同，顺便说一句。），但您可以运行多个 MonoDevelop 实例。

如果您只想运行第二个应用程序而不对其进行调试，那么您不需要启动另一个 MonoDevelop 实例。您可以在命令行上运行其他项目，也可以简单地为其定义自定义命令。

要添加自定义命令，请在 MonoDevelop 中右键单击要调试的项目，选择“选项”，然后转到“运行”/“自定义命令”，在此处添加“执行前”命令。点击右边的下拉框，可以看到一些可以用于命令的变量，比如`${SolutionDir}`.

# iphone - UIAlertViewDelegate 未按预期运行

> ID：12989719
> 
> 赞同：0
> 
> 时间：2012-10-20T15:05:36.887
> 
> 标签：iphone, objective-c, ios

我有一个非常简单的过程，在每轮简单游戏之后计算分数，更新标签和所有正常的，非常简单的东西。我有一个 UIAlertView 通知玩家他/她的表现。我使用 UIAlertViewDelegate 来推迟所有更新、重置控件等，直到 UIAlertView 被解除。方法是 [startNewRound]、[startOver] 和 [updateLabels]。他们都在做什么是相当明显的。无论如何，当用户打到第 10 轮时，我制作了另一个 UIAlertView，通知玩家游戏已经结束并显示总分。同样，我希望使用委托将重置推迟到 AlertView 被解除之后。唯一的问题是，对于 endGame AlertView，它似乎使用的是第一个 AlertView' s 委托方法导致游戏继续新一轮而不是从头开始。我希望这是有道理的。无论如何，这是我的代码片段。

```
if (round == 10){
    UIAlertView *endGame = [[UIAlertView alloc]
                            initWithTitle: @"End of Game"
                            message: endMessage
                            delegate:self
                            cancelButtonTitle:@"New Game"
                            otherButtonTitles:nil];
    [endGame show];
}
else {
    UIAlertView *alertView = [[UIAlertView alloc]
                          initWithTitle: title
                          message: message
                          delegate:self
                          cancelButtonTitle:@"Next"
                          otherButtonTitles:nil];

    [alertView show];
} 
```

然后是委托方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    [self startNewRound];
    [self updateLabels];
}

- (void)endGame:(UIAlertView *)endGame didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    [self startOver];
} 
```

就这样。正如我所提到的，endGame AlertView 似乎正在使用 alertView 的委托，因此没有激活该`[self startOver]`方法。所有方法都有效，只是 AlertView 使用了不正确的委托方法。

问候，
迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:39:19.953

像这样更改您的代码，

```
 if (round == 10){
        UIAlertView *endGame = [[UIAlertView alloc]
                                initWithTitle: @"End of Game"
                                message: endMessage
                                delegate:self
                                cancelButtonTitle:@"New Game"
                                otherButtonTitles:nil];
        endGame.tag = 111;
        [endGame show];
    }
    else {
        UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle: title
                              message: message
                              delegate:self
                              cancelButtonTitle:@"Next"
                              otherButtonTitles:nil];
        alertView.tag = 222;
        [alertView show];
    } 
```

并将方法委托为，

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
    {
        if(alertView.tag == 111)
        {
            [self startNewRound];
            [self updateLabels];
        }
        else if(alertView.tag == 222)
        {
            [self startOver];

        }
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:17:48.900

你不能有两个dismisswithbuttonindex的委托方法，你需要用标签来处理这种情况。

给两个警报视图一个不同的标签并在委托对象上检查它。因此，您可以区分两种警报视图。

# iphone - 在 4 英寸 iPhone 屏幕上淡出启动图像

> ID：12989727
> 
> 赞同：4
> 
> 时间：2012-10-20T15:06:46.980
> 
> 标签：iphone, ios, cocoa-touch, uiimageview, ios6

启动时，我从启动图像淡入到应用程序的界面。为了实现这一点，我添加了一个`UIImageView`带有“Default.png”的内容，并在`makeKeyAndVisible`.

Default.png 是否应该始终返回特定于设备（或特定于分辨率）的启动图像版本？或者我应该检查屏幕的边界和比例以选择适合视网膜与非视网膜和 3.5 与 4 英寸屏幕的屏幕？

我希望 Default.png 的行为与其他图像资源非常相似——在支持时使用 @2x 版本（以及 iPhone 5 上的 -568h 版本）。但是我在模拟器中的实验让我不相信。运行 4 英寸模拟器，使用 3.5 英寸图像。这会导致启动图像不会延伸到屏幕底部。下面的屏幕截图显示了过渡动画中间。

![在此处输入图像描述](../Images/590b409982d087c32e158510adb72250.png)

不幸的是，我没有每个设备，因此无法确认这是否只是模拟器的一个怪癖。

简而言之，我想确定retina图像用在retina设备上，4英寸的图像用在4英寸的设备上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T16:00:41.937

这是我的代码

```
- (BOOL)            application:(UIApplication *)application
  didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...

    [self.window makeKeyAndVisible];

    [self _startLaunchAnimation];

    return YES;
}

- (void)_launchAnimation {
    CGFloat screenHeight = [[UIScreen mainScreen] bounds].size.height;
    UIImageView *launchImageView = (UIImageView*)[self.window viewWithTag:1000];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone
                           forView:self.window
                             cache:YES];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(startupAnimationDone:finished:context:)];
    [launchImageView setAlpha:0.0];
    [launchImageView setFrame:CGRectMake(-60.0f, 0.0f, 320.0f, screenHeight)];
    [UIView commitAnimations];
}

- (void)_startLaunchAnimation {
    CGFloat screenHeight = [[UIScreen mainScreen] bounds].size.height;
    NSString *imageName = nil;
    if (screenHeight == 568.0f) {
        imageName = @"Default-568h.png";
    } else {
        imageName = @"Default.png";
    }

    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *launchImageView = [[UIImageView alloc] initWithImage:image];
    [launchImageView setTag:1000];
    [self.window addSubview:launchImageView];

    [NSTimer scheduledTimerWithTimeInterval:2.0
                                     target:self
                                   selector:@selector(_launchAnimation)
                                   userInfo:nil
                                    repeats:NO];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T16:10:59.503

作为记录，这是我的@agassi_yzh 解决方案版本：

```
//fade from the launch image to the interface
CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;    
NSString *imageFile = (screenHeight == 568.0f) ? @"Default-568h.png" : @"Default.png";
UIImageView *splash = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imageFile]];

[self.window.rootViewController.view addSubview:splash];

[UIView animateWithDuration:0.5
                 animations:^{
                     splash.alpha = 0;
                 }
                 completion:^(BOOL finished) {
                     [splash removeFromSuperview];
                 }
];

//display the main window
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T16:12:05.950

答案是您必须显式加载设备特定版本的图像。这是自定义动画，您不能依赖 Apple 的默认加载行为来实现您想要的。

首先确保您的配置正确，并且设备上显示了正确的默认加载图像（不要太相信模拟器（也就是我什至从未使用过模拟器，它太有问题了））

然后就像之前的评论者建议的那样，用你的图像加载一个视图。

请记住，默认图像将由可可框架加载和显示。你所能做的就是在之后展示一个视图，如果你尝试对网络上的负载进行一些公认的聪明的黑客攻击，你会发现它们总是会以某种方式破坏。

如果您需要在 iPhone 5 上设置全屏图像动画与否，您需要为设备明确加载该图像，这就是它的全部功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:19:23.827

是的，您提供 Default.png 和 Default@2x.png，您甚至必须为 iPhone 5 4" 屏幕提供 Default-568h@2x.png。

您的应用将根据设备使用标准、视网膜或大视网膜，但请注意 Apple 不鼓励将默认启动图像用作任何介绍动画序列。

您可以使用的技巧是在应用程序启动时添加一个图像视图作为应用程序的第一个屏幕并立即将其淡出，这会给用户一种启动图像正在淡出的印象，即使启动图像消失了，并且这是您的图像视图接管。

查看[Apple 自定义图标和图像创建指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)的启动图像部分：

> 提供启动图像以改善用户体验。
> 
> 避免使用您的启动图像作为提供以下内容的机会：
> 
> • “应用程序入口体验”，例如闪屏
> 
> • 关于窗口
> 
> • 品牌元素，除非它们是应用程序首屏的静态部分 因为用户可能会频繁地在应用程序之间切换，所以您应该尽一切努力将启动时间缩短到最短，并且您应该设计一个淡化体验的启动图像，而不是而不是引起人们的注意。

# objective-c - iOS：禁用 UINavigationController

> ID：12989729
> 
> 赞同：0
> 
> 时间：2012-10-20T15:06:48.717
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationitem

有没有办法禁用 UINavigationController 中 UINavigationItems 的所有触摸？

我正在寻找一种方法，例如：

```
[self.navigationcontroller setDisabled:YES / NO]; 
```

有简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T15:16:51.753

就在这里。

```
[self.navigationController.navigationBar setUserInteractionEnabled:NO]; 
```

# c# - 如何将图像分成 9 块并随机放置在画布中？

> ID：12989730
> 
> 赞同：2
> 
> 时间：2012-10-20T15:06:49.070
> 
> 标签：c#, wpf, image, canvas, bitmap

我正在尝试选择一个图像并将其分成 9 块并随机放置在画布中。我现在已经选择了一个图像，但我不确定如何分割图像。我看过类似的问题，但没有运气。我不是在寻找其他人来完成这项工作，而是关于如何最好地完成这项工作的建议。

```
private void uploadImage_Click(object sender, RoutedEventArgs e)
{
    //creates (but not yet displays) a OpenFile dialog box
    Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

    //specifies the look of the open file dialog box
    dlg.DefaultExt = ".jpg";
    dlg.Filter = "Image Files|*.jpg;";
    dlg.InitialDirectory = Environment.CurrentDirectory;

    //shows the open file dialog box to user and awaits OK or Cancel
    bool? result = dlg.ShowDialog();

    //result is true if user selects an image file
    if (result == true)
    { 
        filename = dlg.FileName;
        var uri = new Uri(filename);
        var bitmap = new BitmapImage(uri);
        Image bg = new Image();

        bg.Source = new BitmapImage(uri);
    }
    else
        return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:58:17.490

我已经回答了类似的问题。要么使用我的解决方案，要么使用 CroppedBitmap。 [如何在 WPF 中裁剪图像并保存到 ImageSource 中？](https://stackoverflow.com/questions/12257908/how-to-crop-image-and-save-into-imagesource-in-wpf/12258144#12258144)

# python - Python：限制代码运行一小时

> ID：12989733
> 
> 赞同：0
> 
> 时间：2012-10-20T15:07:14.723
> 
> 标签：python, timer, schedule

我已经编写了一个抓取器，它执行 html 抓取，然后使用 API 来获取一些数据，因为它的代码非常冗长，我没有把它放在这里。我已经实现了随机睡眠方法并在我的代码中使用它来监控油门。但我想确保我不会过度运行这段代码，所以我的想法是运行 3-4 小时，然后休息一下，然后再次运行。我没有在 python 中做过这样的事情，我试图搜索，但不确定从哪里开始，如果我能得到一些指导，那就太好了。如果 python 有一个特定的模块链接，那将是一个很大的帮助。

这也相关吗？我不需要这种复杂程度？

[对 Python 中类似 Cron 的调度程序的建议？](https://stackoverflow.com/questions/373335/suggestions-for-a-cron-like-scheduler-in-python)

我有每个抓取任务的函数，并且我有调用所有这些函数的 main 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:17:49.947

你可以只记下你开始的时间，每次你想运行一些东西时，确保你没有超过给定的最大值。这样的事情应该让你开始：

```
from datetime import datetime
MAX_SECONDS = 3600

# note the time you have started
start = datetime.now()

while True:
    current = datetime.now()
    diff = current-start
    if diff.seconds >= MAX_SECONDS:
        # break the loop after MAX_SECONDS
        break

    # MAX_SECONDS not exceeded, run more tasks
    scrape_some_more() 
```

这是[datetime 模块文档的链接](http://docs.python.org/library/datetime.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:03:26.840

您可以使用[threading.Timer](http://docs.python.org/library/threading.html#timer-objects)对象在超过时间后向主线程调度中断信号：

```
import thread, threading

def longjob():
    try:
        # do your job
        while True:
            print '*', 
    except KeyboardInterrupt:
        # do your cleanup
        print 'ok, giving up'

def terminate():
    print 'sorry, pal'
    thread.interrupt_main()

time_limit = 5  # terminate in 5 seconds
threading.Timer(time_limit, terminate).start()
longjob() 
```

把它放在你的 crontab 中，每`time_limit`+ 2 分钟运行一次。

# asp.net - 向下拉列表添加值

> ID：12989736
> 
> 赞同：1
> 
> 时间：2012-10-20T15:07:34.550
> 
> 标签：asp.net

我有返回表格一列的值的 web 服务方法。我想将该值添加到我的下拉列表中。有什么简单的方法可以做到。

这是我的 web 方法，它返回会议表中的所有会议名称。

```
[WebMethod(Description = "Retrieves all Conference")]
        public DataSet GetAllConference()
        {
            DataSet dataSet = new DataSet();
            // Create connection object
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "SELECT conference_name FROM Conference";
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Conference");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables.Count <= 0)
                return null;
            else
                return dataSet;
        } 
```

在用户端会有一个下拉列表。如何将 web 方法返回的值添加到下拉列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:10:28.137

您需要添加Web服务的Web引用才能调用该方法，您可以 **[阅读这篇文章](https://stackoverflow.com/questions/1496253/adding-web-reference-in-c-sharp)**以了解如何添加引用，添加引用后您可以调用该方法并通过下面给出的代码填写下拉列表，

```
DataSet ds = wsObject.GetAllConference();
if(ds.Tables.Count > 0)
{
   ddlist.DataTextField = "conference_name";
   ddlist.DataValueField = "conference_name"; //Change field to one you want.
   //ddlist.DataValueField = "IDColumnInTheDataTable"; //un comment after give right column name
   ddlist.DataSource = ds.Tables[0];
   ddlist.DataBind();
} 
```

# android - 在android中滚动时标签图标恶化

> ID：12989739
> 
> 赞同：2
> 
> 时间：2012-10-20T15:07:38.157
> 
> 标签：android, html, css, cordova

我正在使用 phonegap 构建 android 应用程序。我现在面临的问题是，当我在列表视图中向下滚动时，底部的标签图标边框变得粗糙和恶化。有人可以帮我弄清楚为什么会发生这种情况以及如何解决它吗？我正在使用 css 添加所有图像。

**更新**

这是我的代码

css

```
footer {
position:fixed;
width: 100%;
height: 60px;
bottom:0; 
left:0;
padding: 0;
line-height: 100px;
z-index:2;
background: url(../../assets/img/tabbg.png) repeat-x;
}
footer ul {
list-style-type: none;
margin: 0; padding: 0;
text-align: center;
}
footer ul li {
display: block;
float: left;
width: 33%; line-height: 50px;
margin-right: 0.5%;
height: 58px;
text-align: center;
overflow: hidden;
}
footer ul li.one { 
margin-left: 0.5%; 
}
footer ul li a {
display: block;
text-decoration: none;
margin: 1px;
height: 100%; width: 100%;
}
footer ul li a.home { 
background: url(../../assets/img/home3.png) center no-repeat; 
}
footer ul li a.profile { 
background: url(../../assets/img/camera2.png) center no-repeat; 
}
footer ul li a.cam { 
background: url(../../assets/img/profile2.png) center no-repeat; 
} 
```

这是我的标签页

```
<footer>
    <ul>
        <li class="one"><a href="#" rel="home" class="home tabs"></a></li>
        <li><a href="#" rel="camera" class="profile tabs"></a></li>
        <li><a href="#" rel="profile" class="cam tabs"></a></li>
    </ul>
</footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:00:57.923

如果没有确切地看到您遇到的问题，很难知道是否是这样，但是我在将我在 PhoneGap 中为 iPhone 构建的应用程序移植到 Android 时遇到问题（仍在使用 PhoneGap）。

我发现使用 position Fixed 会导致问题，并且我在使用 width:100% （试图满足任何宽度的手机）而不是特定的像素值时也遇到了问题。在整页 div 上使用 overflow:hidden 似乎也很不稳定。

我遇到了元素会消失并重新出现的显示问题。我在使用 css 旋转时仍然遇到问题。

使用 position:absolute 并使用 window.innerWidth 和 innerHeight 设置页面大小的 div 尺寸似乎可以解决问题。

恐怕有点不具体，但它可能会有所帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:26:36.307

我错过了视口元标记中的 target-densityDpi 字段，这似乎很重要。

将其排除在外意味着手机将所有内容缩小 1.5 倍我很困惑为什么除非背景图形尺寸导致这种行为。我注意到 window.innerWidth 和 window.innerHeight 报告的是 320*533 而不是实际的 480x800 屏幕尺寸。

虽然看起来不错，但我怀疑扩展所有内容的努力占用了太多资源——我在 LogCat 中遇到了绘制超时——我猜这会导致丢失和闪烁。

缩放也导致粗糙的边缘。静态时，手机反过道边缘，但当您拖动元素时，其边缘变得像素化。

# java - 从当前 URL 获取 HTTP 或 HTTPS

> ID：12989740
> 
> 赞同：3
> 
> 时间：2012-10-20T15:07:39.740
> 
> 标签：java, jsp

我只是想知道当前 URL 是在 HTTP 还是 HTTPS 下。问题是我们的测试环境中有许多自签名证书，因此验证证书概率不是一种选择。我尝试了以下方法，但似乎并非在所有情况下都有效。

```
String protocol = request.getProtocol();
out.println(protocol); // prints out HTTP/1.1 on self signed servers

Boolean secure = ((HttpServletRequest)pageContext.getRequest()).isSecure();
if (secure) {
  out.println("secure")
} else {
  out.println("not secure")  // always fails
} 
```

我想我可以使用 getRequest 并在字符串中搜索“https”——但我假设有一种真正受支持的方式来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:04:32.180

使用自签名证书或官方证书都没有关系。如果 SSL/TLS 未在部署容器中终止，“isSecure()”将默认返回“false”。但是，即使 SSL/TLS 未在部署容器处终止，某些部署容器（如 Tomcat）也可以配置为为“isSecure()”调用返回“true”。例如，如果 SSL 在（硬件）负载平衡器处终止并且“sendRedirect()”与相对 URL 一起使用，这将很有帮助。

# typescript - “HTMLElement”类型的值上不存在属性“值”

> ID：12989741
> 
> 赞同：349
> 
> 时间：2012-10-20T15:07:45.780
> 
> 标签：typescript

我正在玩打字稿，并试图创建一个脚本，该脚本将在输入框中输入文本时更新 p 元素。

html 如下所示：

```
<html>
    <head>
    </head>
    <body>
        <p id="greet"></p>
        <form>
            <input id="name" type="text" name="name" value="" onkeyup="greet('name')" />
        </form>
    </body>
    <script src="greeter.js"></script>
</html> 
```

和`greeter.ts`文件：

```
function greeter(person)
{
    return "Hello, " + person;
}

function greet(elementId)
{
    var inputValue = document.getElementById(elementId).value;

    if (inputValue.trim() == "")
        inputValue = "World";

    document.getElementById("greet").innerText = greeter(inputValue);
} 
```

当我编译时，`tsc`我得到以下“错误”：

`/home/bjarkef/sandbox/greeter.ts(8,53): The property 'value' does not exist on value of type 'HTMLElement'`

但是编译器确实输出了一个 javascript 文件，该文件在 chrome 中运行良好。

**我怎么会收到这个错误？我该如何解决？**

`'HTMLElement'`另外，我在哪里可以根据打字稿查找哪些属性在 a 上有效？

请注意，我对 javascript 和 typescript 非常陌生，所以我可能会遗漏一些明显的东西。:)

* * *

## 回答 #1

> 赞同：588
> 
> 时间：2012-10-20T15:58:38.753

根据 Tomasz Nurkiewiczs 的回答，“问题”是打字稿是类型安全的。:) 所以`document.getElementById()`返回`HTMLElement`不包含`value`属性的类型。但是，子类型`HTMLInputElement`确实包含该`value`属性。

所以一个解决方案是将结果`getElementById()`转换为`HTMLInputElement`这样的：

```
var inputValue = (<HTMLInputElement>document.getElementById(elementId)).value; 
```

`<>`是打字稿中的铸造运算符。请参阅问题[TypeScript：casting HTMLElement](https://stackoverflow.com/questions/12686927/typescript-casting-htmlelement)。

如果你在一个`.tsx`文件中，上面的转换语法会抛出一个错误。您将希望改用此语法：

```
(document.getElementById(elementId) as HTMLInputElement).value 
```

上面一行生成的 javascript 如下所示：

```
inputValue = (document.getElementById(elementId)).value; 
```

即不包含类型信息。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2017-05-06T18:06:20.427

如果您正在使用反应，您可以使用`as`运算符。

```
let inputValue = (document.getElementById(elementId) as HTMLInputElement).value; 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2018-09-25T09:50:04.923

我们可以 [断言](https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions)

```
const inputElement: HTMLInputElement = document.getElementById('greet') 
```

或使用`as`-syntax

```
const inputElement = document.getElementById('greet') as HTMLInputElement 
```

给予

```
const inputValue = inputElement.value // now inferred to be string 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2012-10-20T15:54:38.723

尝试将要更新的元素转换为 HTMLInputElement。如其他答案所述，您需要向编译器提示这是一种特定类型的 HTMLElement：

```
var inputElement = <HTMLInputElement>document.getElementById('greet');
inputElement.value = greeter(inputValue); 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2012-10-20T15:46:38.337

对此的快速解决方法是使用 [ ] 选择属性。

```
function greet(elementId) {
    var inputValue = document.getElementById(elementId)["value"];
    if(inputValue.trim() == "") {
        inputValue = "World";
    }
    document.getElementById("greet").innerText = greeter(inputValue);
} 
```

我只是尝试了几种方法并找出了这个解决方案，
我不知道您原始脚本背后的问题是什么。

作为参考，您可以参考 Tomasz Nurkiewicz 的帖子。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-10-20T15:17:41.290

问题在这里：

```
document.getElementById(elementId).value 
```

您知道`HTMLElement`返回`getElementById()`的实际上是`HTMLInputElement`从它继承的一个实例，因为您正在传递输入元素的 ID。同样，在静态类型的 Java 中，这不会编译：

```
public Object foo() {
  return 42;
}

foo().signum(); 
```

`signum()`是 的方法`Integer`，但编译器只知道 的静态类型`foo()`，即`Object`. 而且`Object`没有`signum()`方法。

但是编译器不知道，它只能基于静态类型，而不是代码的动态行为。据编译器所知，`document.getElementById(elementId)`表达式的类型没有`value`属性。只有输入元素才有价值。

对于参考检查[`HTMLElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLElement)和[`HTMLInputElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)MDN。我猜 Typescript 或多或少与这些一致。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-01-09T09:26:12.553

同样对于使用 Props 或 Refs 等属性但没有您的“DocgetId”的任何人，您可以：

```
("" as HTMLInputElement).value; 
```

倒引号是您的道具值，因此示例如下：

```
var val = (this.refs.newText as HTMLInputElement).value;
alert("Saving this:" + val); 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2021-05-03T16:08:36.663

对于那些可能仍在为此苦苦挣扎的人，另一种选择是使用`(document.getElementById(elementId) as HTMLInputElement).value = ''`. [来源](https://github.com/vuejs/eslint-plugin-vue/issues/1343#issuecomment-736954240)。

如果您仍然遇到问题，请尝试将其提取到如下函数：

```
function myInput() {
   (document.getElementById(elementId) as HTMLInputElement).value = ''
} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-09-17T09:02:56.793

如果您使用的是角度，您可以使用 -

```
const element = document.getElementById('elemId') as HTMLInputElement; 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2021-01-09T19:03:33.937

有一种方法可以在*不*使用类型断言的情况下实现这一点，而是使用[泛型](https://www.typescriptlang.org/docs/handbook/generics.html)，这通常使用起来更好更安全。

不幸的是，`getElementById`不是通用的，而是`querySelector`：

```
const inputValue = document.querySelector<HTMLInputElement>('#greet')!.value; 
```

类似地，您可以使用`querySelectorAll`来选择多个元素并使用泛型，以便 TS 可以理解所有选择的元素都属于特定类型：

```
const inputs = document.querySelectorAll<HTMLInputElement>('.my-input'); 
```

这将产生一个`NodeListOf<HTMLInputElement>`.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-04T18:40:18.367

这对我有用：

```
let inputValue = (swal.getPopup().querySelector('#inputValue ')as HTMLInputElement).value 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-10-12T10:03:39.680

我一直有一个类似的问题（[JS文件中的TS警告：“类型X上不存在属性X”：是否可以编写更干净的JavaScript？](https://stackoverflow.com/questions/69470746/ts-warning-in-js-file-property-x-does-not-exist-on-type-x-is-it-possible-to)）

虽然该标记有助于删除 typescript 文件中的警告，但编译后我的 JavaScript 文件中仍然会收到警告。

那么如何编写干净且允许我操作 .value 的代码呢？

我花了很长时间，但我通过使用另一种方法找到了解决方案：

HTML 代码：

```
<form id="my-form" 
   action="index.html"
   method="get"
   onsubmit="return showValue();">
    <input type="text" name="username">
    <input type="text" name="full-name">
    <input type="password" name="password">
    <button type="button" onclick="showValue();">Show value</button>
</form> 
```

Javascript代码：

```
function showValue() {
    const myForm = document.forms.my-form;
    console.log(myForm?.username.value);
    return 1;
} 
```

有`document.forms.x`一个属性`"value"`，可以删除打字稿文件和生成的 JavaScript 中的警告。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-24T21:10:29.967

这可能看起来很陈词滥调，但这对我有用：

`yarn add -D @types/web`

我想我一定有一个过时的类型定义。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-02T15:11:06.513

如果您有需要分配动态值的动态元素 ID，则可以使用：

```
//element_id = you dynamic id.
//dynamic_val = you dynamic value.
let _el = document.getElementById(element_id);
_el.value = dynamic_val.toString(); 
```

这对我有用。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2015-08-18T06:25:56.420

问题：

> 错误“HTMLElement”类型上不存在属性“文本”

解决方案：在 typeScript中我们需要强制转换`document.getElementById()`返回类型`HTMLElement``< HTMLScriptElement >`

所以我们可以通过以下方式来解决**typescript.js预期的错误**

```
Code: var content: string = ( < HTMLScriptElement > document.getElementById(contentId)).text; 
```

它对我有用..希望它也对你有用。

# c++ - 检查两个 std::function 是否相等

> ID：12989743
> 
> 赞同：9
> 
> 时间：2012-10-20T15:08:12.063
> 
> 标签：c++, function, operators, equals, std

如果我有两个`std::function`s，如何检查两者是否具有相同的功能？

附加信息：我有一个函数向量，`std::vector<std::function<void()>>`在向向量添加另一个函数之前，我想检查它是否已经包含。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:12:58.937

我不认为他们两个可以相提并论。这是一个[示例](http://www.boost.org/doc/libs/1_51_0/doc/html/function/faq.html)来解释 std::function 比较的一些要点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:50:52.693

通常`std::function`并且`boost::function`不具有可比性，因为它们需要存储的对象具有可比性，但并非所有函数对象和 lambda 都具有可比性`operator==`，`std`或者`boost`函数无法比较它们

# c# - 自定义文件名编辑器

> ID：12989745
> 
> 赞同：0
> 
> 时间：2012-10-20T15:08:22.477
> 
> 标签：c#, uitypeeditor

我想实现一个自定义 FileNameEditor；我想设置自己的过滤器，并且希望能够选择多个文件。

```
public class Settings
{
    [EditorAttribute(typeof(FileNamesEditor), typeof(System.Drawing.Design.UITypeEditor))]
    public string FileNames { get; set; }
}

public class FileNamesEditor : FileNameEditor
{
    protected override void InitializeDialog(OpenFileDialog openFileDialog)
    {
        openFileDialog.Multiselect = true;
        openFileDialog.Filter = "Word|*.docx|All|*.*";
        base.InitializeDialog(openFileDialog);

    }
} 
```

这忽略了过滤器属性，虽然我可以选择多个文件，但我无法将它们分配给我的 Settings.FileNames 属性，因为 Settings.FileNames 的类型是字符串 []，而派生类的结果是字符串。如何告诉我的派生类返回 openFileDialog 的 FileNames 以及如何使过滤器工作？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T08:24:08.433

原始代码对我有用，除了需要重新排序。您需要在更改之前调用 base.Initialize，否则它们会被覆盖（调试会很好地显示它）

```
public class FileNamesEditor : FileNameEditor
{
    protected override void InitializeDialog(OpenFileDialog openFileDialog)
    {
        base.InitializeDialog(openFileDialog);
        openFileDialog.Multiselect = true;
        openFileDialog.Filter = "Word|*.docx|All|*.*";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:16:40.300

好吧，这就是它的工作原理......

```
public class FileNamesEditor : UITypeEditor
{
    private OpenFileDialog ofd;
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    }
    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        if ((context != null) && (provider != null))
        {
            IWindowsFormsEditorService editorService =
            (IWindowsFormsEditorService)
            provider.GetService(typeof(IWindowsFormsEditorService));
            if (editorService != null)
            {
                ofd = new OpenFileDialog();
                ofd.Multiselect = true;
                ofd.Filter = "Word|*.docx|All|*.*";
                ofd.FileName = "";
                if (ofd.ShowDialog() == DialogResult.OK)
                {
                    return ofd.FileNames;
                }
            }
        }
        return base.EditValue(context, provider, value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:59:15.023

也许对字符串 [] 使用 ArrayEditor

```
public class Settings
{
  [EditorAttribute(typeof(System.ComponentModel.Design.ArrayEditor),  typeof(System.Drawing.Design.UITypeEditor))]
  public string[] FileNames { get ; set; }
} 
```

# php - SQL查询，通过比较值

> ID：12989747
> 
> 赞同：0
> 
> 时间：2012-10-20T15:08:36.853
> 
> 标签：php, mysql, sql

我有一个表格，您必须在其中输入要存款的金额（数字），以及一个 mysql 表，其中包含存款最少的银行列表（如第一行 = `name`，第二行 = `minimal amount`）。

问题是：**我如何查询数据库以便根据最低存款价值向我显示适合我的银行？**例如，您想存入 50 美元，但并非所有银行都允许您这样做，因为其中一些银行的最低存款额为 100 美元，所以我只想显示那些 min.deposit 低于我的金额的银行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:10:49.523

在您的查询中添加一个`WHERE`子句，因为它将根据您的需要过滤记录，

```
SELECT *
FROM tableName
WHERE minimalAmount <= 50 
```

# junit - 我给出了绝对路径但java不能类

> ID：12989751
> 
> 赞同：0
> 
> 时间：2012-10-20T15:08:52.113
> 
> 标签：junit, classpath

我不明白为什么会这样

`ioannis@ioannis-GA-MA74GM-S2H:~$ java -cp /opt/junit4.6/junit-4.6.jar org.junit.runner.JUnitCore /opt/CalculatorTest`

给出错误：

```
Could not find class: /opt/CalculatorTest 
```

这工作正常：

```
ioannis@ioannis-GA-MA74GM-S2H:~$ java -cp /opt/junit4.6/junit-4.6.jar:/opt org.junit.runner.JUnitCore CalculatorTest
JUnit version 4.6
.
Time: 0.005

OK (1 test) 
```

首先，我给出类 /opt/CalculatorTest 的完整路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:57:37.677

类名只是类名，而不是路径。如果它在一个包中，你可以有 foo.Bar。如果它在默认包中，则只能有 Bar。

正如您所注意到的，类路径是标识 Java 应该在其中查找类的物理目录的位置。

# php - Phalcon 的翻译设施

> ID：12989752
> 
> 赞同：5
> 
> 时间：2012-10-20T15:08:55.517
> 
> 标签：php, internationalization, multilingual, phalcon

Phalcon 是否为多语言网站提供任何设施？

开发基于 MVC phalcon 的站点的最佳实践是什么？我应该如何实现视图层？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:24:08.293

此示例应用程序 ( [https://github.com/phalcon/php-site](https://github.com/phalcon/php-site) ) 使用 Phalcon 实现翻译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:44:32.000

Phalcon 不提供 I18n 功能。有一个提供这种功能的 PECL 扩展，称为[intl](http://pecl.php.net/package/intl)（参见[手册](http://docs.phalconphp.com/en/latest/reference/intl.html)）。

但是，如果您最感兴趣的是用不同的语言展示网站，您可以使用

```
\Phalcon\Translate\Adapter\NativeArray 
```

零件。该组件使用包含语言感知字符串的键/值数组。例如，您可以在配置中使用它：

```
$trans_config = array(
                    'en' => array(
                        'bye'       => 'Good Bye',
                        'song-key'  => 'This song is %song% (%artist%)',
                    ),
                    'es' => array(
                        'bye'       => 'Adiós',
                        'song-key'  => 'La canción es %song% (%artist%)',
                    ),
                ); 
```

演示上述用法的测试是：

```
public function testVariableSubstitutionTwoEnglish()
{
    $language   = $trans_config['en'];
    $params     = array('content' => $language);
    $translator = new \Phalcon\Translate\Adapter\NativeArray($params);

    $vars     = array(
        'song'   => 'Dust in the wind',
        'artist' => 'Kansas',
    );
    $expected = 'This song is Dust in the wind (Kansas)';
    $actual   = $translator->_('song-key', $vars);

    $this->assertEquals(
        $expected,
        $actual,
        'Translator does not translate English correctly - many parameters'
    );
} 
```

以上只是展示了如何使用占位符变量获取翻译的消息。要简单地获取不同语言的字符串，您只需`_()`使用相关键调用翻译器上的 ，并且不传递任何变量。

*编辑*在视图中，您可以随心所欲地工作。您可以设置在视图层中显示的变量或传递翻译对象并在那里执行翻译。由你决定。

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-07T17:48:07.110

我认为最好的解决方案是使用[Phalcon Gettext Adapter](https://github.com/phalcon/incubator/tree/master/Library/Phalcon/Translate/Adapter)。Gettext 最重要的优点是处理复数。

# data-structures - 二叉树到普通树

> ID：12989758
> 
> 赞同：2
> 
> 时间：2012-10-20T15:10:04.867
> 
> 标签：data-structures

我知道从一棵通用树中你可以构造一棵**唯一的**二叉树，但反过来是真的吗？即你能从二叉树中得到一个**唯一的**通用树吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:29:25.103

是的。以下变换是可逆的：

给定一棵具有**有序但没有索引**的子节点的通用树，将第一个子节点编码为其父节点的左子节点，并将每个其他节点编码为其（前）兄弟节点的右子节点。

反过来是：给定一棵具有**区分左右**子节点的二叉树，将节点的左子节点读取为其第一个子节点，将右子节点读取为其下一个兄弟节点。

所以，下面的树

```
 a
 /|\
b c d 
```

被编码为

```
 a
 /
b
 \
  c
   \
    d 
```

而下面的树

```
 a
  / \
 b   c
 |
 d 
```

被编码为

```
 a
    /
   b
  / \
 d   c 
```

（阅读：`d`是 的第一个孩子`b`，`c`是 的兄弟姐妹`a`）。

请注意，您可以通过将同级分配给根来对任何有根森林（具有有序组件，否则表示不唯一）进行编码，因此

```
 a
 / \
b   c
 \   \
  d   e 
```

将被读作

```
 a   c e
 / \
b   d 
```

* * *

这是从二叉树中获取唯一*通用（无向）树的**另一种方法：*

 **   一个顶点二叉树可能有 0...3 个图邻居。
*   将 12 个节点附加到根
*   将 8 个节点附加到每个左孩子
*   将 4 个节点附加到每个右孩子

此操作是可逆的：

*   用至少 12 个邻居“根”标记节点。如果不是唯一的，则失败。
*   用 8..11 个“左”邻居标记每个节点。
*   用 4..7 个邻居“正确”标记每个节点。
*   去除所有叶子
*   使所有边远离根
*   如果任何节点有多个左孩子或多个右孩子，则失败。

所以，

*   有序有根树和二叉树（第一种和第二种算法）之间存在双射。
*   由于任何通用树都可以任意植根，因此存在从通用（有向或无向）树到二叉树的注入。
*   存在从二叉树到一般无向树的注入（第三种算法）
*   由于存在从二叉树到一般树并返回的注入，因此在一般（有向或无向）树和二叉树之间必须存在双射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:19:05.033

我觉得不太可能。通常，二叉树区分左孩子和右孩子。但是，一般的树不会。

我们应该如何从这两个二叉树中得到一个唯一的通用树。

```
 X      X
 / \    / \
 Y Z    Z Y 
```

而这两个呢？

```
 X      X
 /        \
 Y        Y 
```

另一方面，

如果您选择不区分二叉树的左右子树，或者选择尊重子树出现在一般树中的序列，只需将每个二叉树映射到自身即可。这将是每个二叉树的唯一通用树。*

# php - 用 PHP 测试字符串

> ID：12989761
> 
> 赞同：0
> 
> 时间：2012-10-20T15:10:26.403
> 
> 标签：php

我正在寻找对字符串进行测试以确定它是否满足某些条件。我想提取任何给定字符串的最后 4 个字符并针对常量变量对其进行测试。关于如何做到这一点的任何想法？

前任：

morris@uakron.edu

我想知道字符串中的最后四个字符是否为“.edu”

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T15:11:48.283

您可以[`substr`](http://php.net/substr)用于单字节和[`mb_substr`](http://php.net/mb_substr)多字节字符串：

```
$suffix = substr($str, -4); 
```

负*开始*参数值指定从字符串的末尾开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:14:14.950

根据您的需要，以下任何一项都可能适合您：

*   [`strrpos()`](http://php.net/manual/en/function.strrpos.php)- 查找字符串中的最后一次出现
*   [`substr()`](http://php.net/manual/en/function.substr.php)- 检查字符串特定部分的内容
*   [`preg_match()`](http://uk3.php.net/manual/en/function.preg-match.php)- 复杂的模式匹配

# android - 搜索最近的精灵 - Andengine - Android

> ID：12989765
> 
> 赞同：3
> 
> 时间：2012-10-20T15:10:32.627
> 
> 标签：android, search, andengine, point

当我尝试将精灵定位在离我的播放器更近的地方时，我遇到了麻烦。我有一个小地图和侧卷轴。中间只有一个成长和一个球员。他可以向左或向右看和走，如果你的玩家向左看并且你按“射击”，我会在我的小怪链接列表中搜索我的玩家最接近的小怪，然后我让这个小怪接受伤害。

我有这个代码： - mobs 是我的小怪链表。（AnimatedSprite 的扩展）

这是我的第一个游戏，我不知道是否有更好的方法来做到这一点，这个不要搜索越近，只有我列表的第一个元素，有什么想法吗？:)

```
public void shot(){
    float playerx = player.getX();
    Mob target = mobs.element();
    if(player.getDireccion()==Entidad.DIR_IZQUIERDA){//If direction if left
        for(Mob z:mobs){
            if(z.getX()<playerx &&
               z.getX()>target.getX())
                target= z;
        }
    }else if(player.getDireccion()==Entidad.DIR_DERECHA){//If direction is right
        for(Mob z:mobs){
            if(z.getX()>playerx && z.getX()<target.getX())
                target= z;
        }
    }

    target.recibeDaño();//receibe damaget (loss life basically)

    if(objetivo.getVida()<=0){ //These delete body and sprite of the game
        final Mob eliminar = target;
        eliminarZombie(eliminar,this);
        mobs.remove(target);
        System.gc();
    }
} 
```

对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:28:32.987

遍历所有敌人并计算距离

距离 = x2 - x1

其中x2是敌人的x属性，x1是玩家的x属性

如果你面向右边，只考虑正距离，如果你面向左边，只考虑负距离

然后选择距离的最小绝对值

所以它是这样的

```
float shortest = 1000; //just put a large number here

for(Mob z:mobs){
    distance = z.x - player.x;
    if((player.getDirection == Direction.RIGHT) && distance > 0 && distance < shortest){
        //set the target to the current mob and change the value of the shortest
    }
    if((player.getDirection == Direction.LEFT) && distance < 0 && Math.abs(distance) < shortest){
        //same as above
    }
}
//damage the target here and remove it 
```

请注意，我没有处理目标正好在敌人上方并且距离 == 0 的情况

您的代码也应该可以工作，但与其循环列表两次，不如循环一次

您的代码的其他注释是：

*   不要调用 System.gc()，不是一个好主意
*   如果你想从链表中删除一个项目，使用 this.runOnUpdateThread() 在 updateThread 上删除它并给它一个可运行的[如果你不这样做，你的游戏会随机崩溃]
*   您也可以使用迭代器检查项目，然后使用 .remove() 删除您到达的最新项目，它是线程安全的

# asp.net-mvc - 具有多层的 MVC4 TDD

> ID：12989766
> 
> 赞同：2
> 
> 时间：2012-10-20T15:10:33.793
> 
> 标签：asp.net-mvc, asp.net-mvc-4, tdd, unity-container, moq

我正在学习 DI、IoC 和 MOQ，所以我可以 TDD 我的新 MVC4 应用程序。

我在网上关注了很多示例，但有一件事我无法掌握。

我的应用程序由 3 层（物理项目）组成：

1.  应用层（控制器/模型/标准 MVC4 东西）。
2.  业务层（做所有的计算和处理数据）。
3.  DAL (EF5)。

现在我有一个非常简单的`UserController`

```
public class UserController : Controller
{
    readonly IUserRepository _repository;

    public UserController(IUserRepository rep)
    {
        _repository = rep;
    }

    public ActionResult Index()
    {
        IList<User> users = _repository.Get(10);
        return View(users);
    } 
```

依赖是用 Unity 注入的，这很好用。

在业务层我有存储库：

```
public interface IUserRepository
{
    IList<User> Get(Int32 count);
}

public class UserRepository : IUserRepository
{
    public IList<User> Get(Int32 count)
    {
        // Here I fetch the data from the Database
        // and do some stuff with it, this can be
        // quite a big method.
    }
} 
```

现在我需要访问我可以在我`UserRepository`的 Get 方法中执行的 DAL。

只有我如何对此进行单元测试？由于可测试性，我认为类中不应该存在依赖关系。

如果我在单元测试中使用实际`UserRepository`类进行测试，它将转到 DAL 并使用那里的数据，但我需要模拟数据。

我是否需要创建另一个`IUserDataRepository`从数据库中获取实际数据并将其传递给`UserRepository`构造函数的位置，还是应该使用 Unity 为我处理这个？

**可能的答案？**

我创建了一个名为`Users`：

```
public class Users: IUsers
{
    private readonly IUserRepository _userRepository;
    public Users(IUserRepository userRepository)
    {
        _userRepository = userRepository;
    }

    public User Get(String id)
    {
       // Do all the magic here here
    }
} 
```

从这个界面`IUsers`：

```
public interface IUsers
{
    User Get(String id);
} 
```

但我将面向数据库的存储库移至 DAL：

```
public class UserRepository : IUserRepository
{ 
    public User Get(String id)
    {
        // Retrieve the user from the database with EF5
    }
}

public interface IUserRepository
{
    User Get(String id);
} 
```

控制器保持不变，但现在依赖于 IUser 接口：

```
public class UserController : Controller
{
    readonly IUsers _users;

    public UserController(IUsers users)
    {
        _users = users;
    }

    public ActionResult Index()
    {
        User user = _users.Get(10);
        return View(users);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:22:54.543

存储库是通往数据库的网关。它们包含尽可能少的代码（没有业务内容），并且只做将数据从数据库中取出（或将其保存到数据库中）所需的操作。

由于它直接耦合到您的数据库，因此您无法对其进行单元测试。当您抽象出该逻辑时，您只能对其进行单元测试，但这正是存储库的用途，因此这是一个无用的抽象。

相反，为他们编写集成测试以设置数据库事务并调用真实存储库并在完成后回滚该事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:14:34.687

编写一个返回适当数据的模拟 IUserRepository，但老实说，您可以轻松地模拟 EF4 及以后的基础数据，因此您可以根据需要直接在控制器中测试您的 EF 查询。在 EF4 中，您将 ObjectSet 替换为实现了 IObjectSet 的假 ObjectSet - 我相当确定使用 EF5 您可以使用 DbSet 执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T13:54:09.040

如果我们使用 Unity。我们可以在中间层实现一个 Unity 容器的扩展，并像下面这样在 Presentation 层注册。

```
 //Data Layer dependency mapping as extension eg : IUnitOfWork
            container.AddNewExtension<DependencyInjectionExtension>(); 
```

更多详情请关注文章。

[N 层与 DI (Unity)](https://www.codeproject.com/Tips/1157736/Unity-Dependency-Injection-with-N-Layer-Project)

谢谢

# mysql - 基于外键关系的Django查询

> ID：12989767
> 
> 赞同：0
> 
> 时间：2012-10-20T15:10:44.767
> 
> 标签：mysql, django, django-queryset

我有两个模型，一个项目和一个动作：

```
class Project(models.Model):
    name = models.CharField("Project Name", max_length=200, unique = True)

class Action(models.Model):
    name = models.CharField("Action Name", max_length=200)
    project = models.ForeignKey(Project, blank=True, null=True, verbose_name="Project")
    notes = models.TextField("Notes", blank=True)
    complete = models.BooleanField(default=False, verbose_name="Complete?")
    status = models.IntegerField("Action Status", choices = STATUS, default=0) 
```

我需要一个查询来返回所有没有状态 < 2 的操作的项目。

我试过：

```
Project.objects.filter(action__status__gt = 1) 
```

但这会返回所有项目，因为在每个项目中，都有一些状态为 2 的操作和一些状态小于 2 的操作。此外，它在结果查询中重复了项目。我目前的解决方案如下：

```
Project.objects.filter(action__status__gt =1).exclude(action__status__lt =2).annotate() 
```

这会折叠重复的结果并仅显示动作状态大于 1 的动作。但这是构造此类查询的正确方法吗？如果我想返回操作状态大于 1 的项目或没有操作的项目怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:13:24.313

Django 的 ORM 无法表达这一点。您将需要使用原始查询来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:05:43.147

我可能误解了您的要求，但我认为您可以使用注释来做到这一点。

`Project.objects.annotate(m = Min('action__status')).filter(Q(m = None) | Q(m__gt = 1))`

生成的 SQL 是：

```
SELECT
    "testapp_project"."id", "testapp_project"."name", 
    MIN("testapp_action"."status") AS "m" 
FROM "testapp_project" 
LEFT OUTER JOIN "testapp_action" ON ("testapp_project"."id" = "testapp_action"."project_id") 
GROUP BY "testapp_project"."id", "testapp_project"."name" 
HAVING(
       MIN("testapp_action"."status") IS NULL 
    OR MIN("testapp_action"."status") > 1 
) 
```

这是不言自明的。

# linux - MonoGame 在创建纹理时抛出 MonoGameGLException (InvalidEnum) 错误

> ID：12989769
> 
> 赞同：-1
> 
> 时间：2012-10-20T15:11:00.083
> 
> 标签：linux, opengl, monogame, mesa

运行 MonoGame 附带的任何“示例”项目将导致“MonoGameGLException”。这发生在以下代码的 Texture2D 构造函数中。

```
GL.CompressedTexImage2D(TextureTarget.Texture2D, 0, glInternalFormat,
    this.width, this.height, 0,
    imageSize, IntPtr.Zero);
GraphicsExtensions.CheckGLError(); <-- Error here 
```

“glInternalFormat”的值为：

```
OpenTK.Graphics.OpenGL.PixelInternalFormat.CompressedRgbaS3tcDxt3Ext 
```

这发生在英特尔集成显卡上运行的 Ubuntu Linux 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:12:08.197

# TL;博士

这是由于 OpenGL 实现 (Mesa)[不包含](http://dri.freedesktop.org/wiki/S3TC)对内部纹理格式 ( [S3TC](https://en.wikipedia.org/wiki/S3_Texture_Compression) ) 的支持而导致的错误。安装 libtxc_dxtn 库以将此功能添加到 Mesa。

# 问题

OpenGL 是 MonoGame 用来渲染图形的图形 API。由于 OpenGL 只是一个 API，因此您需要对该 API 进行一些实现才能使其在您的系统上运行。如果您有 NVIDIA 或 ATI 卡，您可以下载它们的专有驱动程序（包括 OpenGL API 的闭源实现）。如果您不使用他们的专有驱动程序（或使用具有开源驱动程序的英特尔显卡之类的卡），那么您可能正在运行[Mesa](http://mesa3d.org/)，它是 OpenGL API 标准的开源实现。

OpenGL 有一个基本标准，但它也有许多扩展。这些扩展之一是[EXT_texture_compression_s3tc](http://www.opengl.org/registry/specs/EXT/texture_compression_s3tc.txt)。这是一个扩展，允许用户指定我们加载到显卡中的纹理应该使用[S3TC](https://en.wikipedia.org/wiki/S3_Texture_Compression)系列算法的特定算法进行压缩。这就是“GL.CompressedTexImage2D”行的实际作用：它要求我们为将使用 DXT3 算法压缩的纹理腾出空间。

Mesa 没有实现所有的 OpenGL API 和扩展列表。具体来说，他们没有实现[S3TC](http://www.opengl.org/registry/specs/EXT/texture_compression_s3tc.txt)扩展（由于[法律原因](http://dri.freedesktop.org/wiki/S3TC)）。

“无效枚举”是 Mesa 抛出的错误，因为您试图告诉 Mesa 使用`PixelInternalFormat.CompressedRgbaS3tcDxt3Ext`Mesa 不支持的扩展名（由枚举值指定）。这是 OpenGL 实现告诉您您指的是不受支持的值的标准方式。

# 解决方案

因此，有两种方法可以解决此问题：

首先，解决 MonoGame 以便它停止使用 S3TC。这可能需要更改 MonoGame 代码，或者可能有更好的方法使用 ContentPipeline 来指定要使用的纹理压缩算法。

二、安装S3TC算法。虽然 Mesa 默认不包含 S3TC，但您可以包含 Mesa 的外部库。有关[Mesa Wiki S3TC 页面](http://dri.freedesktop.org/wiki/S3TC)的更多详细信息。Mesa 需要使用特定的编译器标志构建，然后需要安装库。在我的 Ubuntu 安装（12.04）中，我假设 Mesa 包在编译时确实启用了这个标志，因为安装库运行良好。在 Ubuntu 中，我安装了该`libtxc-dxtn-s2tc0`软件包。

```
sudo apt-get install libtxc-dxtn-s2tc0 
```

之后，所有 MonoGame 示例都可以正常工作。

# postgresql - PostgreSQL 索引优化

> ID：12989773
> 
> 赞同：2
> 
> 时间：2012-10-20T15:11:57.217
> 
> 标签：postgresql, postgresql-performance

目前我有以下 SQL Select 语句的以下指标。尽管如此，查询对我来说似乎仍然很慢（10.000 条记录）。你有什么建议？

1.  索引 category_id
2.  索引交付日期
3.  product_id、product_name 上的索引

这是我的 DDL：

```
Create table product (    
  product_id serial,
  category_id int2,
  product_name varchar(50),
  delivery_date timestamp,
  subtitle varchar(20),
  price numeric(10,2),
  retail_price numeric(10,2),
  language_id int2,
  store_id int2,
  reseller_id int2    
); 
```

和 SQL：

```
Select * 
from product 
WHERE delivery_date > '2012-10-20 06:00:00' AND category_id = 1 
ORDER BY product_id, product_name; 
```

任何帮助，将不胜感激。

在 EXPLAIN ANALYZE 的输出下方：

```
Sort  (cost=18.11..18.12 rows=1 width=119) (actual time=0.064..0.064 rows=0 loops=1)
Sort Key: product_id, product_name
Sort Method: quicksort  Memory: 25kB
  ->  Seq Scan on product  (cost=0.00..18.10 rows=1 width=119) (actual time=0.019..0.019 rows=0 loops=1)
Filter: ((delivery_date > '2012-10-20 06:00:00'::timestamp without time zone) AND (category_id = 1))
Total runtime: 0.098 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:16:29.510

查询的绝对理想配置是为`(delivery_date, category_id, product_id)`or设置复合索引`(category_id, delivery_date, product_id)`。

在实践中，只有索引`(category_id, product_id)`可能足以获得可接受的性能。

无论如何，`EXPLAIN ANALYZE <original_query>`是你最好的朋友。

还有一点需要注意：在您的查询中，`ORDER BY product_id, product_name`总是会得到与 simple 相同的结果`ORDER BY product_id`。

# c++ - 关于 C++ lambda 表达式中默认捕获模式和“this”的限制

> ID：12989774
> 
> 赞同：13
> 
> 时间：2012-10-20T15:12:04.393
> 
> 标签：c++, lambda, c++11

我想知道为什么在C++ *lambda 表达式*的*捕获列表*中禁止`=` *捕获默认*模式。`this`

 **那是，

```
[=, this]{ };  // error
[&, this]{ };  // OK 
```

这是由 C++11 5.1.2/8 指定的。

> *   如果 lambda-capture 包含一个捕获默认值 &，则 lambda-capture 中的标识符不应以 & 开头。
> *   如果 lambda-capture 包含一个捕获默认值 =，则 lambda-capture 不应包含它，并且它包含的每个标识符都应以 & 开头。

问：这条规则有什么原因或背景故事吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T21:35:04.040

`this`只能通过副本捕获，而不能通过*引用*捕获。即使您仅指定, 如果使用了 odr `[&]`，`this`也可以通过复制隐式捕获。因此，`[=, this]`是一个错误，因为它`=`已经`this`通过复制隐式捕获，而`&`in`[&, this]`表示通过引用捕获并且不隐式捕获`this`（除非它是 odr 使用的）**

# ajax - 在ajax加载表中加载斑马条

> ID：12989777
> 
> 赞同：0
> 
> 时间：2012-10-20T15:12:10.853
> 
> 标签：ajax, load, strip

我试图应用带有 ajax 加载表的斑马条，但它不起作用。我尝试在网上搜索一些建议，但没有运气。这是我的代码：

CSS：

```
<style>
.odd{background:#eeeeee}
</style> 
```

Javascript：

```
<script src="../jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("tr:even").addClass("even");
    $("tr:odd").addClass("odd");
});

//supplier ajax viewer
 $(document).ready(function(stripTable) {
     $("#supplier_viewer").load("inc/stock_view.php");
$('tr:odd',this).addClass("odd");
     var refreshId = setInterval(function() {
      $("#supplier_viewer").load('inc/stock_view.php?randval='+ Math.random());
   }, 10000);
$('tr:odd',this).addClass("odd");
   $.ajaxSetup({ cache: false });
});
</script> 
```

这就是加载表格的地方。

HTML：

```
<div id="supplier_view"></div> 
```

我试图添加

```
$('tr:even',this).addClass("even"); 
```

到负载阶段但不起作用。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:34:15.487

您在实际加载之前将类应用于元素。

尝试在加载的事件被触发时应用这些类。

我还建议使用 FireBug 查看生成的 html 并查看这些类是否真的应用于动态加载的数据。（我高度怀疑不是）

加载数据后，需要执行这两行

```
$("tr:even").addClass("even");
$("tr:odd").addClass("odd"); 
```

但只有在数据加载到 div 之后

# security - 关于这种持久登录方法（“记住我”），我应该注意什么问题？

> ID：12989778
> 
> 赞同：2
> 
> 时间：2012-10-20T15:12:23.287
> 
> 标签：security, cookies, login

此 Web 应用程序将有一个数据库表，其中包含 uniqueid 列（64 位 int 自动增量字段；键）、令牌（64 字节二进制字段）和一个 accountid。

选中“记住我”登录后，将生成一个随机令牌。然后这个令牌的 SHA-512 哈希将被插入到数据库中，并检索生成的 uniqueid。包含唯一标识和未散列令牌的 cookie 被发送到客户端。

每次用户访问带有 cookie 的页面时，都会根据数据库检查 cookie 的 uniqueid 及其令牌的 SHA-512 哈希值。如果有一行与 uniqueid 匹配，并且该行的令牌哈希与令牌哈希匹配，则使用该行的 accountid 登录用户。在 cookie 进行每次身份验证尝试后，删除使用旧唯一标识的行，如果身份验证成功，则生成新的随机令牌。然后这个令牌的 SHA-512 哈希将被插入到数据库中，并检索生成的 uniqueid。包含唯一标识和未散列令牌的 cookie 被发送到成功通过身份验证的客户端。

我也将使用[这里](http://blog.teamtreehouse.com/how-to-create-totally-secure-cookies)描述的技术。所有失败的 cookie 身份验证都将 cookie 设置为空白值，并将过期日期设置为过去的某个时间。

我相信这种方法可以解决一些关于 cookie 的问题。即：

1.  数据库中的令牌经过哈希处理，因此只要攻击者没有对数据库的写入权限，他/她就无法伪造所有用户的 cookie。

2.  使用唯一 ID 而不是用户的帐户名，因为登录凭据不应该存储在 cookie 中。

3.  每次对 cookie 进行身份验证时都会生成一个随机令牌，因此如果攻击者窃取了 cookie，它只会在用户下次登录之前有效，而不是在用户被记住的整个时间内有效。

4.  因为我的整个应用程序都使用 HTTPS，所以 Cookie 将很难被嗅探。

我可以通过允许用户指定他/她希望被记住多长时间来进一步增强安全性。到期日期将存储在存储 uniqueid 和令牌的同一个数据库表中。每次创建新的 cookie 时，此过期时间将与 cookie 一起发送。如果用户尝试使用服务器认为已过期但客户端仍然持有的 cookie 登录，则登录将被拒绝。

我相信这个解决方案是相当安全的，但是当我设计这个方法时，有没有我忽略的陷阱或事情？

资料来源：

[数据库中的哈希令牌](https://stackoverflow.com/a/8508213/444402)

[不要将帐户名称存储在 cookie 中，并在每次身份验证后使用新的唯一 ID](https://stackoverflow.com/a/7591897/444402)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:36:04.247

谈到安全性，合理总是相对的。:) 如果您认为与您面临的威胁相比，它是适当的，那是合理的。也就是说，如果它是我的应用程序，我会做一些事情，并且我相信我实际上需要保护它免受攻击......

*   在令牌/b/e 中添加一些内容，使您可以关联回原始身份验证事件，然后将其记录到所有 cookie 操作中。这样，如果（何时:)）人们被黑客入侵并且您想弄清楚何时发生了什么，您就可以进行关联。
*   在 b/e 上，确保您实施“使我所有未完成的令牌无效”作为系统的一项功能。然后将其自动连接到所有“可疑”事件。
*   将地理信息存储在 cookie / b/e 中与 cookie 对应的行中。从记录它开始。最终你会想做更多。当您研究被黑客入侵的人时，您会发现可以使用这些数据做的事情越来越多。如果你没有数据，你就无法学习。
*   很多仪器。很多很多的仪器。保留多年。一切都有一个事件，当它发生时，记录你在那个事件中知道的一切。良好的可视化/查找工具，您可以使用它们来找出发生了什么时间。

当然，您还可以做更多的事情，这只是一个入门列表......

# c# - Lambda 和内存泄漏：寻找替代方法

> ID：12989781
> 
> 赞同：4
> 
> 时间：2012-10-20T15:12:36.277
> 
> 标签：c#, events, lambda

**编辑：**

如果一位有能力验证此类事情的有经验的程序员向我展示了这种方法可以避免内存泄漏的证据，我将非常感激。我一直在将它引入我的许多编码工作，但我仍然有一个小小的疑问。不幸的是，我不够好/不知道调查它的工具。

**原来的：**

我最近了解到 lambda 表达式的某些用途会造成内存泄漏：

```
 ProjectData Project;

    void OnLaunchNewProject()
    {
        NewProjectUI newProjectUI = new NewProjectUI();
        newProjectUI.OnCompleted += (o, e) =>
            {
                Project = newProjectUI.NewProject;
                view.Content = string.Format("Project {0} was created and saved successfully.", Project.Name);
            };
        newProjectUI.OnCancelled += (o, e) => { view.Content = "Operation was cancelled.";};
        view.Content = newProjectUI;
    } 
```

[我在这个博客](http://alookonthecode.blogspot.ca/2011/05/lambda-expressions-anonymous-classes.html)中了解到这种方法的不良影响。

我不完全理解在 lambda 表达式中引用局部变量的影响，这限制了我规避问题的能力。

在[典型方法](http://www.switchonthecode.com/tutorials/csharp-snippet-tutorial-custom-event-handlers)和使用 lambda 之间，理想的折衷方案是什么？我喜欢 lambda 的一点是当我不需要 EventHandler 的参数时在我的类的主体（发送者/路由参数）中跳过它们的定义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T15:29:09.307

不幸的是，您提到的博客文章是错误的。lambda 表达式中的内存泄漏不存在一般问题。在博客示例中，从不调用终结器，因为作者从不从事件中删除匿名方法。因此 .NET 运行时认为该方法仍可能稍后被调用，并且无法从内存中删除该类。

在您的代码中，您将在某处释放 NewProjectUI 实例，这就是所有事件都被取消以及分配的 lambda 方法也变得未使用的点。然后 GC 可以删除匿名 lambda-helper-class 并释放使用的内存。

所以，再说一遍：在 .NET 中在 lambda 表达式中使用局部变量时没有问题。

但是为了使您的代码更好，请将代码从 lambda 表达式移动到命名方法，并将这些方法添加到事件中。这也使得在不再需要时从事件中删除方法成为可能。

# facebook - 如何判断 Facebook 社交小部件何时完成加载？

> ID：12989782
> 
> 赞同：0
> 
> 时间：2012-10-20T15:12:52.837
> 
> 标签：facebook, widget, social

> **可能重复：**
> [在初始化 Facebook 评论后加载 jScrollPane - 如何？](https://stackoverflow.com/questions/7628819/loading-jscrollpane-after-initializing-facebook-comments-how)

我一直在尝试找到一种在 Facebook 评论小部件完全加载后运行 JavaScript 函数的方法。我试过运行这样的功能：

```
$(window).load(function () {
    mystuff();
}); 
```

但这有时会在小部件加载之前运行。我查看了 Facebook 文档，虽然我看到我可以订阅事件，例如正在创建的评论，但我看不到有一个事件会在加载小部件后通知我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:19:58.103

社交小部件在 IFRAME 中加载。我自己没有这样做，但你应该能够通过

```
$('.fb_iframe_widget iframe').load(function() {
    // facebook comments ready
}); 
```

# android - 外部链接上的 JqueryMobile + Phonegap Android 设备后退按钮

> ID：12989786
> 
> 赞同：0
> 
> 时间：2012-10-20T15:13:25.613
> 
> 标签：android, cordova, jquery-mobile, back-button, external-links

我正在打开一个不属于我的域的链接，比如说使用这段代码 `<a href="http://www.google.com" id="google"> <img src="images/google.png" ></a>'`

现在，当用户单击此按钮时，我的应用程序将重定向到 google。我正在尝试使用 android 上的硬件后退按钮返回我的应用程序。

当我按下后退按钮时，我在 logcat 上收到此消息：`10-20 19:54:21.375: E/Web Console(29676): Uncaught ReferenceError: cordova is not defined at :1`

我从中能够理解的是，当链接重定向到谷歌时，我们的应用程序失去了对 phonegap 的控制。是这样吗？我试过使用`data-rel="external"`这个链接。但这并没有什么区别...

在此之后，我有两个问题需要帮助

*   当用户按下硬件返回按钮时，返回我的应用程序。
*   加载 google.com 页面时，用户会看到页面加载小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:20:10.587

查看[Phonegap ChildBrowser 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)，它可以帮助您解决问题，这里摘录：

> 子浏览器允许您在 PhoneGap 应用程序中显示外部网页。
> 
> 一个简单的用例是：
> 
> *   用户可以发布链接，并且您不希望您的用户退出您的应用程序以查看链接。
> 
> 此命令创建一个弹出式浏览器，显示在您的应用程序前面，当用户按下后退按钮时，他们只是返回到您的应用程序。

# android - 列表视图上的 Android 异步任务

> ID：12989791
> 
> 赞同：0
> 
> 时间：2012-10-20T15:15:43.217
> 
> 标签：android, android-asynctask, listadapter

所以我在 onPostExecute 方法期间填充 listActivity 时遇到问题。SingleData的结果列表是正确的...然后我使用自定义适配器绑定到android.R.id.list...

但它给了我错误......我真的不明白为什么......所以这是适配器的代码......：

```
private class RequestAdapter extends ArrayAdapter<SingleData> {

    private int _resource;
    private LayoutInflater _inflater;
    private Context _context;

    public RequestAdapter(Context context, int textViewResourceId,
            List<SingleData> objects) {
        super(context, textViewResourceId, objects);
        _resource = textViewResourceId;
        _context = context;
        _inflater = LayoutInflater.from(_context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        convertView = (ListView)_inflater.inflate(_resource,null);
        SingleData sdd = getItem(position);

        ImageView iv = (ImageView)convertView.findViewById(R.id.imagePlaceHolder_IV);
        iv.setImageBitmap(sdd.thumbIMG);

        TextView tv = (TextView)convertView.findViewById(R.id.createdAt_TV);
        tv.setText(sdd.timeStamp);

        // TODO Auto-generated method stub
        return convertView;         
    }

} 
```

这是 onPostExecute：

```
private class DownloadTheImages extends AsyncTask<Void, Void, List<SingleData>> {

    private Context _ctx;

    public DownloadTheImages(Context ctx) {
        _ctx = ctx;
    }

     protected void onPostExecute(List<SingleData> result) {             

         ListView mainLV = (ListView)findViewById(android.R.id.list);
         mainLV.setAdapter(new RequestAdapter(_ctx, R.layout.single_row, result));

     }

    protected List<SingleData> doInBackground(Void... params) {
              ..... 
             ....
              }
       } 
```

和 LOGCAT：

```
10-20 15:02:55.166: E/AndroidRuntime(761): FATAL EXCEPTION: main
10-20 15:02:55.166: E/AndroidRuntime(761): java.lang.NullPointerException
10-20 15:02:55.166: E/AndroidRuntime(761):  at com.mimiedesign.dingle.PictureStreamViewer$DownloadTheImages.onPostExecute(PictureStreamViewer.java:103)
10-20 15:02:55.166: E/AndroidRuntime(761):  at com.mimiedesign.dingle.PictureStreamViewer$DownloadTheImages.onPostExecute(PictureStreamViewer.java:1)
10-20 15:02:55.166: E/AndroidRuntime(761):  at android.os.AsyncTask.finish(AsyncTask.java:417)
10-20 15:02:55.166: E/AndroidRuntime(761):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
10-20 15:02:55.166: E/AndroidRuntime(761):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429) 
```

任何线索？...谢谢..

这些是较新的错误：

```
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.AbsListView.obtainView(AbsListView.java:1430)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.ListView.makeAndAddView(ListView.java:1745)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.ListView.fillDown(ListView.java:670)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.ListView.fillFromTop(ListView.java:727)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.ListView.layoutChildren(ListView.java:1598)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.AbsListView.onLayout(AbsListView.java:1260)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.view.View.layout(View.java:7175)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.view.View.layout(View.java:7175)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.view.View.layout(View.java:7175)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.view.View.layout(View.java:7175)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
10-20 16:32:56.615: E/AndroidRuntime(1487):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:24:10.727

这些行导致了这个问题。

```
 RequestAdapter adapter; // This will be member variable
     ListView mainLV = (ListView)findViewById(android.R.id.list);
     mainLV.setAdapter(new RequestAdapter(_ctx, R.layout.single_row, result)); 
```

在 onCreate() 中移动这些行并在实例化 Adapter 之前初始化结果，然后在 onPostExecute 中简单地将值添加到“result”ArrayList 并调用 adapter.notifyDatasetChanged()。避免在 onPostExecute() 或 onProgressUpdate() 中查找视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:24:16.683

我理解 onPostExecute 的工作方式是它接受从 doInBackground() 传入的结果对象。因此，除非您在 doinbackground 中返回该结果，然后以这种方式将其传递给您的 RequestAdapter，否则您将获得 NullPointer。你在哪里初始化你的结果成员？在 OnCreate?

```
 protected List<SingleData> doInBackground(Void... reuslt) {
          ..... 
         ....
       ///Do some stuff

            return result;
          }
   }

private class DownloadTheImages extends AsyncTask<Void, Void, List<SingleData>> {

private Context _ctx;

public DownloadTheImages(Context ctx) {
    _ctx = ctx;
} 
```

# dns - 域名正在使用赞助商链接重定向到某个站点

> ID：12989792
> 
> 赞同：0
> 
> 时间：2012-10-20T15:15:47.450
> 
> 标签：dns, domain-name

当我在地址栏中输入域名并尝试访问我的网站时 - 我被重定向到一些列出了一些赞助链接的网页。我在 domainsite.com 注册了我的域名。此外，更奇怪的是，一段时间后，当我刷新页面几次时，我被重定向到我的网页。这可能是什么原因？谁能帮我解决这个问题？（有时当我只是在地址之前放 www. 时 - 到达页面。但每次我这样做时都不会发生这种情况）

我的网站：providenca.net

我被重定向到的“页面”如下所示：http: [//i48.tinypic.com/2unyby8.png](http://i48.tinypic.com/2unyby8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:26:15.247

我不知道出了什么问题。如果他们知道原因，请询问 domainsite.com。确保在另一台计算机上尝试以查看问题是否仍然存在。如果它仅位于您的计算机上，我不得不怀疑是 IP 转换器病毒。

# visual-c++ - Windows 的 libavcodec 中的内存泄漏？

> ID：12989793
> 
> 赞同：1
> 
> 时间：2012-10-20T15:15:47.483
> 
> 标签：visual-c++, memory-leaks, visual-studio-2012, libavcodec, libavformat

我正在为[Windows](http://ffmpeg.zeranoe.com/builds/)使用 libavcodec，并且`avformat_open_input()`似乎有严重的内存泄漏。如果我打开 5,000 个视频，操作系统会报告应用程序退出时未释放的 2 GB RAM 消耗。这是代码：

```
AVFormatContext *pFormatCtx = NULL;
AVDictionary *dict = NULL;
int result = 0;

av_register_all();

// open the input video file
IntPtr ip = Marshal::StringToHGlobalAnsi(videoFilename);
const char* filename = static_cast<const char*>(ip.ToPointer());
result = avformat_open_input(&pFormatCtx, filename, NULL, &dict);
if (result < 0) {
    Marshal::FreeHGlobal(ip);
    return result;
}

Marshal::FreeHGlobal(ip);
avformat_close_input(&pFormatCtx);
return result; 
```

上面的代码位于从 C# 调用的类库中。我正在使用托管 C++ 来调用 libavcodec 库。流程是 C# -> 托管 C++ -> libavcodec。我正在使用 DLL 和动态链接。这是一个单线程应用程序。正如预期的那样，当我使用线程时，泄漏会增加。

我尝试了以下方法：

*   我已经尝试了几个 32 位版本并且内存泄漏是一致的。
*   使用`NULL`而不是`&dict`.
*   `avformat_open_input()`使用*相同*的文件名调用5,000 多次，*不会*泄漏内存。
*   使用组合`avformat_alloc_context()`和`avformat_free_context()`. 我找不到释放内存的组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:54:47.327

回到这一点，以防有人发现这很有用。

事实证明，如果我只是打开和关闭一个文件，就会出现内存泄漏。但是，如果我执行（读取、查找等）之类的功能，则不会出现内存泄漏。

# java - Android中的运动检测器

> ID：12989802
> 
> 赞同：2
> 
> 时间：2012-10-20T15:16:58.727
> 
> 标签：java, android

我想创建一个应用程序来检测设备何时移动并对移动进行分类（上、下、左、右）。我可以使用什么框架来实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:29:46.710

希望这些链接可以帮助你：

[运动传感器](http://developer.android.com/guide/topics/sensors/sensors_motion.html)

[安卓手势识别工具](http://www.dfki.de/~rnessel/tools/gesture_recognition/gesture_recognition.htm)

[如何在 Android 手机上检测抖动运动](http://www.clingmarks.com/how-to-detect-shake-motion-on-android-phone/25)

[Android - 基本手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

# c - 在 C 中使用 malloc 分配内存

> ID：12989806
> 
> 赞同：5
> 
> 时间：2012-10-20T15:17:31.427
> 
> 标签：c, memory, pointers, malloc

这是我的程序：

```
#include <stdio.h>
#include <stdlib.h>

main(){
   char *p1, *p2, *p3, *p4;

   p1 = (char*)malloc(10);
   p2 = (char*)malloc(10);
   p3 = (char*)malloc(16);
   p4 = (char*)malloc(32);

   printf("p1 points at: %d\n", p1);
   printf("p2 points at: %d\n", p2);
   printf("p3 points at: %d\n", p3);
   printf("p4 points at: %d\n\n", p4);

   system("PAUSE");
} 
```

这会在我的 PC 上产生以下输出：

**p1 指向：6492080**

**p2 点在：6492104**

**p3 点在：6492128**

**p4 指向：6492152**

因此，无论分配多少字节，malloc 分配的每个内存空间都从 24 个字节开始。这是为什么？我感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T15:20:12.033

的确切行为`malloc`取决于您的特定实现（编译器/libc/OS）。通过打印出地址，您的程序将从事未定义的行为。

如果您通过告诉我们您正在使用什么编译器、您在什么操作系统、什么架构以及您正在使用什么版本的 libc 来缩小您的问题的范围，那么我们可能能够就该实现给出更具体的答案，并且为什么数字是24。

我的**猜测**是，在您的实现中，每个`malloc`ed 内存区域都需要从一个 8 的倍数的地址开始，并且还有 8 个字节的开销。

**编辑：**如果您`malloc`在 p4 之后再次调用以创建 p5，则该模式肯定无法继续，因此您的声明“malloc 分配的每个内存空间进一步开始 24 个字节，无论分配了多少字节。” 是假的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T15:22:38.897

不能保证 an`int`和 some `void*`or`char*`指针具有相同的大小（在我的 Debian/Linux/AMD64 系统上，`int`-s 是 32 位，但指针是 64 位）。您可能想要包含`<stdint.h>`并使用`intptr_t`.

的实现`malloc`有时可能会在分配的区域之前保留几个字节用于管理目的。并且`malloc`应该始终返回一个足够对齐的指针（[对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)约束是编译器、运行时和处理器特定的）。绝对不能保证及时`malloc`返回越来越多的结果序列（尤其是在实际程序中，数百万次调用`malloc`与数百万次调用混合在一起`free`；您甚至可能在如此长时间运行的进程中出现一些[内存碎片）。](http://en.wikipedia.org/wiki/Memory_fragmentation)

而且我很确定，如果您在`p5 = malloc(10120);`之后添加 a ，您将看不到and`p4`之间的 24 字节距离，因为当它成功时保证其结果不是任何先前结果的[别名](http://en.wikipedia.org/wiki/Pointer_alias)，因此应该至少有一个距离32 字节（其中包含 32 字节块）。`p5``p4``malloc``p5``p4`

几乎总是，标准 C 库实现`malloc`了一些较低级别的原语，通常是一些[系统调用](http://en.wikipedia.org/wiki/System_call)来获取连续的[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)页面。在Linux上，这些系统 [调用](http://www.fsf.org/)通常是mmap [(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html) [（](http://git.musl-libc.org/cgit/musl/tree/src/malloc)可能与理解）。因此，您可以通过切换到 Linux 来了解更多信息。`sbrk(2)``malloc``malloc`

`malloc`理论上可能的实现[总是失败](https://stackoverflow.com/a/8460584/841108)。在实践中，`malloc`可能会成功，但您应该始终测试失败的情况。

当然，如果可能的话，大多数实现都会在其实现中关心并重`free`用最近的`free`-d 内存区域（没有任何系统调用）`malloc`。如何组织堆以使其能够高效`malloc`和`free`高效是困难的（如果您希望它非常好，可能仍然是一个研究课题）。

您可能想阅读[malloc](http://en.wikipedia.org/wiki/Malloc)上的维基百科页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T15:25:13.923

`malloc`应为`size`大小对象分配空间。例如，没有什么可以阻止您的实现为对齐目的添加填充字节。另一个例子：一些内存管理实现在分配空间之前保持块的大小。

如果您想要更多细节，您应该精确您的实施。

# python - Python 使用 Facebook 的 Graph API 将照片上传到相册

> ID：12989812
> 
> 赞同：0
> 
> 时间：2012-10-20T15:17:49.757
> 
> 标签：python, facebook

我已经看过这篇 [使用 Facebook 的 Graph API 将照片上传到相册的](http://facebook.stackoverflow.com/questions/2718610/upload-photo-to-album-with-facebooks-graph-api)帖子 我想知道这是否可以使用 python？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:10:53.217

只要您可以`HTTP POST`将数据传输到端点，就可以使用任何语言。API 本身独立于您用来访问它的语言。

示例：[面子](https://github.com/jgorset/facepy)

```
graph = GraphAPI(oauth_access_token)
graph.post(
    path = 'ALBUM_ID/photos',
    source = open('parrot.jpg')
) 
```

查看更多信息：http: [//developers.facebook.com/docs/reference/api/album/#photos](http://developers.facebook.com/docs/reference/api/album/#photos)

# vb.net - 空异常错误'在被赋值之前使用'

> ID：12989817
> 
> 赞同：0
> 
> 时间：2012-10-20T15:18:53.177
> 
> 标签：vb.net

我的代码中有一个空异常错误，我不明白为什么。

我在“资源”中的项目中添加了一个名为“FilterXpath”的 excel 文件。我有以下代码：

```
Dim FilterXpath As Microsoft.Office.Interop.Excel.Application
Dim w As Microsoft.Office.Interop.Excel.worksheet
Dim sheet As Worksheet

w = FilterXpath.Workbooks.Open("C:\Users\sridevi\Documents\Visual Studio 2008\Projects\WindowsApplication2\WindowsApplication2\Resources\FilterXpath.xlsx")
''I got null exception here stating that FilterXpath is used before it has been assigned a value. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:20:40.460

将它们声明为`New`实例

```
Dim FilterXpath As New Microsoft.Office.Interop.Excel.Application 
Dim w As New Microsoft.Office.Interop.Excel.worksheet Dim sheet As Worksheet 
```

# c# - 从我的 class.cs 调用方法

> ID：12989836
> 
> 赞同：-5
> 
> 时间：2012-10-20T15:20:56.470
> 
> 标签：c#, visual-studio-2010, class, button, methods

我需要在我的学生班中编写 2 个方法来执行以下操作

hasPassed() 如果学生的年分 >= 40 则返回 True，如果分数 <40 则返回 false

toString() 应该返回一个字符串，其中包含班级内保存的学生详细信息的摘要，例如“12345 Basil Fawlty, 23/08/1946”</p>

这是我对上述方法的代码，我对上面的要求是否正确？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CourseWork
{
    public class Student
    {
        private static string firstname;
        private string secondname;
        private string dateofbirth;
        private string course;
        private int matricnumber;
        private double yearmark;

      public bool hasPassed()
        {
            if (yearmark >= 40)
                return true;
            else
                return false;
        }

      public void toString()
      {
          firstname = "Basil";
          secondname = "Fawlty";
          dateofbirth = "23/08/1946";
          course = "MA Hotel Management";
          matricnumber = 12345;
          yearmark = 55;
      }

        public Student()
        {
        }

        public string FirstName
        {
            get { return firstname; }
            set { firstname = value; }
        }

        public string SecondName
        {
            get { return secondname; }
            set { secondname = value; }
        }
        public string DateOfBirth
        {
            get { return dateofbirth; }
            set { dateofbirth = value; }
        }

        public string Course
        {
            get { return course; }
            set { course = value; }
        }
        public int MatricNumber
        {
            get { return matricnumber; }
            set
            {
                if (value <= 99999 && value >= 10000)
                {
                    matricnumber = value;
                }
                else
                {
                    Console.WriteLine("Invalid Matric Number: {0}", value);
                }

              matricnumber = value;
            }
        }
        public double YearMark
        {
            set
            {
                if (value <= 100 && value >= 0)
                {
                    yearmark = value;
                }
                else
                {
                    Console.WriteLine("Invalid Year Mark: {0}", value);
                }
              yearmark = value;
            }

        }
    } 
```

然后我需要在执行以下操作的获取按钮中使用上述方法

Get：使用 Student 类方法的值来更新文本框。Student.hasPassed() 方法应该用于更新通过/失败标签。应使用 Student.toString () 更新学生详细信息摘要。

但我在编码时遇到了问题，我无法从我的学生班调用 hasPassed() 方法或 toString() 方法

所以我做错了什么，但看不出有什么想法可以解决这个问题？

我有一个设置按钮，基本上可以让我在学生班级中保存更新值，虽然我不认为那是正确保存它们，但直到我让获取按钮工作我才知道我在设置按钮中使用了 Student student = new student()在获取按钮中，我需要使用 toString 方法在 txt 框和标签中显示例如 12345 Basil Fawlty, 23/08/194，然后我需要在 Get 按钮中使用 hasPassed() 方法，以便当yearmark is >= 40 另一个标签说 Pass or fail if < 40

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:45:46.553

1.  firstName 变量是静态的。这将使 Student 的所有实例共享相同的名字，这是不正确的。每个学生对象都应该有自己的名字。

2.  类的实例变量是私有的，无法设置。您可能想要创建一个将这些变量作为参数的构造函数。

    ```
    public Student(string firstName, string secondName, ...) 
    {
        this.firstName = firstName;
        this.secondName = secondName;
        ...
    } 
    ```

3.  hasPassed() 方法是正确的。您可以通过实例化 Student 类的实例并在实例化对象上调用 hasPassed() 来验证行为是否有效。

    ```
    double goodYearMark = 85;
    Student goodStudent = new Student("Basil", "Fawlty", ..., goodYearMark);
    Console.WriteLine("Good Student Passed? " + goodStudent.hasPassed());

    double badYearMark = 35;
    Student badStudent = new Student("Bad", "Student", ..., badYearMark);
    Console.WriteLine("Bad Student Passed? " + badStudent.hasPassed()); 
    ```

4.  ToString() 方法应该返回一个字符串值。.NET 中的每个对象都有一个 ToString() 方法，您可以使用 override 关键字覆盖默认行为。[有关Object.ToString 方法，](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)请参阅MSDN 文档。

    ```
    public override string ToString() 
    {
        return string.format("{0} {1}, {2}", firstName, secondName, dateOfBirth);
    } 
    ```

上面的代码示例可能无法编译，因为我将它们直接输入到响应窗口中，但希望它们可以作为指导。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:25:36.903

我没有完全阅读您的问题，因为有很多错误。

例如

```
public void toString()
      {
          firstname = "Basil";
          secondname = "Fawlty";
          dateofbirth = "23/08/1946";
          course = "MA Hotel Management";
          matricnumber = 12345;
          yearmark = 55;
      } 
```

你的对象在哪里？

你应该像这样创建一个对象： Student stu = new Student();

小心，问你的问题更容易理解！

看看： [https ://stackoverflow.com/questions/902994/how-to-ask-programming-questions-correctly](https://stackoverflow.com/questions/902994/how-to-ask-programming-questions-correctly)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:35:48.843

再读一次 toString 要求，你做错了。当您现在在代码中调用 toString 时，现有值会发生什么变化？

另外，检查最后两个属性设置器。目前，您没有阻止用户设置无效值。

您还需要创建类的实例，并在其上设置可以从 toString 返回的初始值。

祝你好运，你快到了:-)

# linux - 使用 Navicat 通过 SSH 登录 Postgresql - 正确的设置是什么？

> ID：12989838
> 
> 赞同：3
> 
> 时间：2012-10-20T15:21:37.697
> 
> 标签：linux, postgresql, ssh, amazon-ec2, navicat

我正在尝试使用 Navicat 通过 SSH 在我的 EC2 服务器上登录 PostgreSQL。

我收到以下错误消息：

“80070007：SSH 隧道：连接时出现套接字错误。WSAGetLastError 返回 10061($274D)”

在服务器上，“角色”postgres 已经存在，并且已经有一个名为 postgres 的数据库。我已经为 postgres 分配了一个密码（通过 Putty 使用 ALTER NAME 命令）。

我在 Navicat 中使用的 SSH 设置是：端口：5432 用户名：[管理员用户名] 身份验证方法：公钥

连接设置为： 主机名：localhost 端口：3306 初始数据库：postgres 用户名：postgres 密码：[密码]

当我连接到同一台机器上的 MySQL 服务器时，设置完全相同，除了：

SSH 到端口 22 用户名（用于连接）：root（带有相应密码）

我已经尝试 SSH 到端口 22，在这种情况下，错误消息是：

“无法连接到服务器：连接被拒绝（0x0000274D/10061）服务器是否在主机“localhost”上运行并接受端口 60122 上的 TCP/IP 连接？收到对 SSL 协商的无效响应：4”

关于我需要更改哪些设置才能使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:06:50.390

您的配置似乎非常错误。

ssh 端口不应该是 5432，而是 22（ssh 默认）。

postgresql 端口应该不是 3306（这实际上是 MySQL），而是 5432（postgres 默认）

要验证您的设置，请尝试手动 ssh-ing 到您的 EC2 实例。ssh 进入后，检查是否可以执行“telnet localhost 5432”。如果您立即看到错误，则意味着 postgres 服务器没有运行。如果你什么也没看到 - 这是一个好兆头，意味着 Postgres 正在运行。您可以通过 Ctrl-]、q、Enter 退出。

请注意，EC2 实例可能要求您使用 ssh 公钥身份验证（不是密码）。在这种情况下，你必须在 Navicat 中找到选项来提供这样的密钥。

# iis-7 - IIS7 中忽略了自定义 404 页面？

> ID：12989839
> 
> 赞同：2
> 
> 时间：2012-10-20T15:22:11.687
> 
> 标签：iis-7, error-handling

我只是无法让自定义错误页面正常工作。

我已经尝试了很多来自网络的片段..但无济于事。

我已经看到了一些关于禁用覆盖的 net 3.5 错误，但不确定它是否适用于我。

在我的 web.config 我有这个

```
<customErrors mode="On" defaultRedirect="custom404.html">
      <error statusCode="404" redirect="custom404.html" />
   </customErrors> 
```

我在根目录中有一个 .html 文件，其中包含代码。

我只是得到一般错误 404 页面.. 找不到内容错误。我怎样才能超越它？希望有人能指出我正确的方向。

我需要创建一个 .aspx 文件而不是 .html 吗？

你可以看到这个@http [://www.global-perspectives.eu/thisisnotarealurl](http://www.global-perspectives.eu/thisisnotarealurl)

# java - 序列化字段类

> ID：12989843
> 
> 赞同：0
> 
> 时间：2012-10-20T15:22:19.227
> 
> 标签：java, serialization, rmi

我需要`java.lang.reflect.Field`使用 RMI 从一个进程传递到另一个进程，但`Field`没有实现`Serializable`接口。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:39:58.643

通过 RMI 传递字段是没有意义的。Field 实例实际上是实例的依赖对象`java.lang.Class`，`Class`对象也是不可传递的。（并且 a`Class`不可传输的原因是它会出现各种讨厌的类型检查问题......考虑到一个`Class`实例实际上表示一个引用类型。）

您需要将相关`Field`字段声明为`transient`. 如果要传输`Field`信息，您可能需要以字段名/类名的形式传递它，然后`Field`在另一端以自定义`readObject`方法重构。

# javascript - Mootools 在 jQuery 中的 .periodical 等价物

> ID：12989844
> 
> 赞同：0
> 
> 时间：2012-10-20T15:22:27.257
> 
> 标签：javascript, jquery, mootools

我将一些 Mootools 脚本翻译成 jQuery，我有功能：

```
play:function( delay, direction, wait )
{       
    this.isRun = this[direction].periodical(delay,this,true);
} 
```

由 this[direction] 替换的一个 from 函数的标题是：

```
next:function(manual , item) 
```

只有我发现是：使用setInterval，但我怎么能将参数传递给调用呢？
诸如：

```
setInterval(direction + '(' + delay + ', this)') 
```

很难调试而且不美观......
这里有更漂亮的方式，也许使用其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:39:01.947

看起来你需要一个匿名函数。尝试这样的事情：

```
play:function( delay, direction, wait )
{       
    this.isRun = setInterval(function(){
            this[direction].call(this, true)
        },
        delay
    );
} 
```

# java - 具有内部创建自身的私有构造函数的类上的静态方法

> ID：12989848
> 
> 赞同：1
> 
> 时间：2012-10-20T15:22:51.490
> 
> 标签：java, design-patterns, concurrency

这更像是一个“这是安全、愚蠢还是完全没有必要”的问题。我试图弄清楚这个代码模式是否合理：

```
public class SomeClass {

    private String someField;
    // Other fields here omitted for clarity

    private SomeClass() {
        someField = "some initialization goes here";
        // More initialization of omitted fields
    }

    public static void doSomething(MyObject myObject) {

        SomeClass someClass = new SomeClass();

        // Do things with myObject and someClass instance

    }
} 
```

这段代码是否存在明显（或不明显）的问题？我认为总体目标是将`doSomething`方法中活动的复杂性与代码中的其他地方区分开来，但仍然让`SomeClass`类保持开放的灵活性。也许？

这样的事情会有并发/同步问题吗？

对于非常模棱两可的示例代码，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:35:07.933

这个概念不会有任何并发​​或同步问题，因为对于静态方法的每次调用，都有一个单独的实例`SomeClass`，这意味着多个线程不会同时访问任何值。

至于这种设计模式的可行性，我认为这是一个合理的模式。我想不出任何实现这种模式的 Java API 类，但如果我找到一些，我会在这个答案中添加任何内容。通常，您会看到带有私有构造函数的类不使用该对象，而是提供一组静态方法，但实际上没有任何理由不做您正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:32:31.070

您使用它的方式是`mix-up`of`static factories`和 normal `object creation`。所以在你的情况下，你不会有任何`concurrency issue`.

但是，假设您想了解`static factory`，最好使用静态工厂，以防您只希望类的单个实例漫游，或者您也可以使用它们返回任何子类型的实例。

这是书中的第一个条目： -`Effective Java`说，`Consider static factory methods instead of constructors`。

以下是该项目中列出的优势的引述：-

> 静态工厂方法的一个优点是，它们有名称，不像构造函数。如果构造函数的参数本身并不能描述返回的对象，那么具有良好名称的静态工厂更易于使用。

因此，您可以使用不同类型`static methods`的名称来显示他们将做什么。对于 EG：-

*   `getInstance()`一般应该用来返回现有的实例
*   `newInstance()`应该用于在每次调用时创建新实例

所以，你的`singleton`实现应该是这样的： -

```
public class Demo {
    private static Demo demo = new Demo();

    private Demo() {
    }

    public static Demo getInstance() {
        return demo != null? demo: new Demo();
    }
} 
```

# database - Rails 3：更新数据库数据

> ID：12989851
> 
> 赞同：1
> 
> 时间：2012-10-20T15:23:06.387
> 
> 标签：database, ruby-on-rails-3

我正在尝试按照[此处](https://github.com/twitter/activerecord-reputation-system/wiki/Migrate-to-Version-2.0)的说明进行操作。最后一步是使用这行代码更新我的数据库数据：

```
UPDATE rs_reputation_messages SET sender_type = 'ReputationSystem::Evaluation' WHERE sender_type = 'RSEvaluation' 
```

我不知道把这段代码放在哪里。通常，我会通过迁移来更新数据库，但这看起来像一个 MySQL 命令。我敢肯定这个问题有一个非常非常简单的答案，但是尽管搜索了谷歌，我什至不知道如何正确地表达这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:42:55.570

在这种情况下，最好创建一个迁移文件。你可以使用[`update_all`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001798)方法

```
RsReputationMessages.update_all("sender_type = 'ReputationSystem::Evaluation'", 
                                "sender_type = 'RSEvaluation'") 
```

或者

```
ActiveRecord::Base.connection.execute("UPDATE rs_reputation_messages 
                                       SET sender_type = 'ReputationSystem::Evaluation' 
                                       WHERE sender_type = 'RSEvaluation'") 
```

# python - 如何检查我的列表是否有另一个列表（字典）中的项目？

> ID：12989860
> 
> 赞同：0
> 
> 时间：2012-10-20T15:23:57.550
> 
> 标签：python

我是使用 python 编程的初学者，我有一个问题可能很容易回答。

所以我有一个从 .txt 文件导入的单词词典，接下来我的程序要求你输入一个句子，然后它将你输入的每个单词保存到另一个列表中。

我必须编写一个程序来检查名为的列表中的每个单词是否都在名为`sentence_list`的列表中`words`。如果字典中不存在该单词，我必须将其放入另一个列表中，该列表由所有输入错误或不在字典中的单词填充。

为了更容易理解，我的程序应该像这样工作：

```
Type your sentence:
My naeme is John, I lieve in Italy, which is beatiful country. 
```

```
['naeme', 'lieve', 'beatiful'] 
```

这是我到目前为止可以做的：

```
words = open("dictionary.txt", encoding="latin2").read().lower().split()

sentence=input("Type your sentence: ")

import re

sentence_list = re.findall("\w+", sentence.lower()) 
```

我知道我必须对 for 做一些事情，但是对于我熟悉的 Javascript，python 中的 for 是不同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:30:06.733

**使用集合**

您可以使用集合来查找不在字典列表中的所有单词。

```
>>> set([1,2,3]).difference([2,3])
set([1]) 
```

请注意，这将不包括重复项。

所以对你来说，它会是这样的（如果你需要结果是一个列表）：

```
misspelled_word_list = list( set(sentence_list).difference(words) ) 
```

**用于**

由于您需要使用`for`，因此这是另一种（效率较低）的方法：

```
misspelled_word_list = []
for word in sentence_list:
    if (not word in misspelled_word_list) and (not word in words):
        misspelled_word_list.append(word) 
```

您只需遍历单词`sentence_list`并检查它们是否在您的`words`列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:59:26.350

这是一个使用的单行代码`for`，它会生成一个`set`拼写错误的单词：

```
mispelled = { word for word in sentence if word not in dictionary } 
```

为清楚起见，我已重命名您的变量

# google-maps - 谷歌地图有美国州大纲模板吗？

> ID：12989861
> 
> 赞同：0
> 
> 时间：2012-10-20T15:24:04.907
> 
> 标签：google-maps

我正在计划一个网站，让用户突出一个单独的状态。是否有可以运行的模板或脚本来自动概述状态？

有点像这样[http://www.motherjones.com/politics/2011/11/states-federal-taxes-spending-charts-maps](http://www.motherjones.com/politics/2011/11/states-federal-taxes-spending-charts-maps)

我觉得必须有一个模板或其他东西，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:41:37.177

[这些地图](http://www.motherjones.com/politics/2011/11/states-federal-taxes-spending-charts-maps)正在使用融合表。美国各州的多边形在[Natural Earth 数据集中](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=United%20States%20of%20America)公开可用。另一个选项（对于[常规 Google Maps](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2Fus_states.xml&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=m&z=3)）是[KML](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_us_states_kml_test.html)。

# java - 在java中获取字符串输入时Java数组索引超出范围异常

> ID：12989865
> 
> 赞同：1
> 
> 时间：2012-10-20T15:24:29.413
> 
> 标签：java, string, exception

`ArrayIndexOutOfBoundsException`在 Java中获取字符串输入时，我得到了一个Java。请帮我。这是我的代码：我编辑了我的代码以使用拆分：它说

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 at solution2.Solution.main(Solution.java:27)

```
public class Solution {

 static String search;

 public static void main(String[] args){

   String[] fn,ln,tp;
  boolean[] isSet;
 Scanner sc=new Scanner(System.in);      
 int no=sc.nextInt();

 String[][] temp=new String[no][3];
 fn=new String[no];
  ln=new String[no];
   tp=new String[no];
   isSet=new boolean[no];
   boolean flag=false;

     for(int i=0;i<no;i++){
   temp[i]=sc.nextLine().split(":");
   fn[i]=temp[i][0];
   ln[i]=temp[i][1];
   tp[i]=temp[i][2];
   isSet[i]=true;

     }

       System.out.println(temp.length);

      search=sc.nextLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:31:29.047

此行发生异常：

```
ln[i] = temp[i][1]; 
```

所以看起来

```
temp[i] = sc.nextLine().split(":"); 
```

在 -delimited 字符串中没有收到足够的标记`:`来创建`String`大小为 3 的数组。

您需要确保`temp[i].length == 3`您可以分配这些令牌。

有效输入的示例（注意：没有换行符）是：

```
1 test:foo:bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:47:51.940

我插入 sc.nextLine()。低于 int no = sc.nextInt(); 线。

导入 java.util.Scanner；

公共类解决方案{

```
static String search;

public static void main(String[] args) {

    String[] fn, ln, tp;
    boolean[] isSet;
    Scanner sc = new Scanner(System.in);
    int no = sc.nextInt();
    sc.nextLine(); // **********

    String[][] temp = new String[no][3];
    fn = new String[no];
    ln = new String[no];
    tp = new String[no];
    isSet = new boolean[no];
    boolean flag = false;

    for (int i = 0; i < no; i++) {
        temp[i] = sc.nextLine().split(":");
        fn[i] = temp[i][0];
        ln[i] = temp[i][1];
        tp[i] = temp[i][2];
        isSet[i] = true;

    }

    System.out.println(temp.length);

    search = sc.nextLine();
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:31:53.330

当您访问从创建的数组上不存在的索引时，会发生 ArrayIndexOutOfBoundsException `split(":")`。

在这段代码中，`temp[i]`不能确保在索引 0、1*或*2 处具有值，因为如果`nextLine()`是诸如“狗”之类的东西，则没有冒号字符可以拆分。

```
temp[i]=sc.nextLine().split(":");
fn[i]=temp[i][0];
ln[i]=temp[i][1];
tp[i]=temp[i][2]; 
```

要解决此问题，您应该在尝试访问它之前验证该数组确实具有索引。

```
temp[i]=sc.nextLine().split(":");
if (temp[i].length >= 3) {
    fn[i]=temp[i][0];
    ln[i]=temp[i][1];
    tp[i]=temp[i][2];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:34:52.810

你的问题是，sc.nextLine() 在你按下 [Enter] 后返回新行字符串（例如“\n”）。第二次是等你输入。请参阅[Java String Scanner 输入不等待信息，直接移至下一条语句。如何等待信息？](https://stackoverflow.com/questions/7877529/java-string-scanner-input-does-not-wait-for-info-moves-directly-to-next-stateme)

在您的情况下，尝试在处理之前调用 sc.nextLine() ：

```
sc.nextLine()
temp[i]=sc.nextLine().split(":"); 
```

**编辑：**你是对的，你必须在 nextInt() 之后插入它，因为 nextLine() 会消耗完整的行。

# mysql-python - Python - SSH 隧道设置和 MySQL 数据库访问

> ID：12989866
> 
> 赞同：3
> 
> 时间：2012-10-20T15:24:34.047
> 
> 标签：mysql-python, paramiko

我正在尝试从本地（Windows）连接到我的服务器并访问 MySQL DB

使用下面的代码通过 putty 设置 SSH 隧道，我无法访问 MySQL 数据库。

```
con = None
con = mdb.connect(user='user',passwd='password',db='database',host='127.0.0.1',port=3308)
cur = con.cursor() 
```

使用下面的代码，我正在使用 paramiko 设置成功的 SSH 隧道，但我无法连接到 MySQL DB

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('host', username='username', password='password')

con = None
con = mdb.connect(user='user',passwd='password',db='database',host='127.0.0.1',port=3308)
cur = con.cursor()

Error:
Error 2003: Can't connect to MySQL server on '127.0.0.1' (10061) 
```

我是否已经更改了 MySQL 连接字符串设置以使用 paramiko 访问 MySQL DB 如果没有，我需要为 paramiko 添加更多参数来模拟 SSH 隧道设置，如 putty。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-26T16:13:53.953

您可以为 paramiko 使用 sshtunnel 包装器并省去您的麻烦；）

```
from sshtunnel import SSHTunnelForwarder
import MySQLdb

with SSHTunnelForwarder(
         ('host', 22),
         ssh_password="password",
         ssh_username="username",
         remote_bind_address=('127.0.0.1', 3308)) as server:

    con = None
    con = mdb.connect(user='user',passwd='password',db='database',host='127.0.0.1',port=server.local_bind_port)
    cur = con.cursor() 
```

# shell - 从 GNU Makefile 调用`command -v find`

> ID：12989869
> 
> 赞同：3
> 
> 时间：2012-10-20T15:25:13.620
> 
> 标签：shell, makefile, gnu-make

我使用 shell（bash，但我需要可移植性）和 GNU Makefile。我有这个代码：

```
check_commands:
        command -v find >/dev/null
        command -v asdf >/dev/null 
```

正如假设的那样，第一个命令被传递，第二个命令中止 Makefile 并出现错误。现在，我删除`>/dev/null`. 那为什么

```
check_commands:
        command -v find 
```

产生以下错误？

```
make: command: Command not found. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T19:12:00.020

从`job.c`GNU make 源代码的快速浏览来看，它会尽量避免启动 shell，即当命令行足够简单（形式为`cmd args`，没有重定向、复合命令等）并且 shell 是默认值时一。那么问题是这`command`是一个内置的并且没有关联的可执行文件，因此来自 m​​ake 的错误消息。`> /dev/null`当你有as make 认为命令太复杂并让它`sh`启动它时，它不会发生。

# ios - 在 Core Data 中获取数据时如何避免未保存的实体？

> ID：12989872
> 
> 赞同：0
> 
> 时间：2012-10-20T15:26:01.333
> 
> 标签：ios, core-data

这是我的第一个项目，我使用 Core Data 和 sqlite 作为后备存储。以下是该场景的快速详细信息：

*   有一个反馈表可以在一个屏幕上填写。
*   有一个屏幕，我可以在其中查看已保存的表格。
*   表单数据可以与后端服务器同步。
*   我正在使用 MKNetworkingKit 与 REST API 进行交互。（看起来我应该看看 RestKit，但我没有时间回去）
*   当我保存表单时，我将应用程序的主 managedObjectContext 中的数据保存到persistentStore。
*   在表单屏幕中，我有一个同步按钮，用于将应用程序数据与后端同步。
*   此外，在本地保存数据的同时，我检查连接并将其余未同步的数据推送到服务器。
*   在我保存表单的屏幕上，还有一个同步按钮来同步数据。

我的问题是，在我填写表格时屏幕上的实体中的表格信息不完整，并且处于不一致的状态。

我使用与我的 dataManager 单例相同的方法进行同步。在我同步数据的其他屏幕中，我的托管对象上下文处于一致状态并且我可以同步数据，但是在填写表单时我想避免我正在处理的实体并且没有保存它。

我现在应该怎么做才能快速完成任务？

另外，使用核心数据设计此类应用程序的理想方式应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:52:37.410

在表单数据完成并经过验证之前，不要创建实际实体。如果您在编辑时需要一个中间位置来存储它，请发明一个具有相同数据字段但不是托管对象的对象。（Java 人过去经常使用数据传输对象模式来执行此操作。）

# android - UnsatisfiedLinkError 实现简单的 NDK 设置

> ID：12989873
> 
> 赞同：2
> 
> 时间：2012-10-20T15:26:11.907
> 
> 标签：android, android-ndk, native

我发现了一些类似的问题，但他们的回答对我没有帮助。我浏览了本教程`http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/`并遇到了一些问题。

我的 Android.mk 文件：

```
 LOCAL_PATH := $(call my-dir)
 MY_PATH := $(LOCAL_PATH)
 include $(call all-subdir-makefiles)

 include $(CLEAR_VARS)

 LOCAL_PATH := $(MY_PATH)

 LOCAL_LDLIBS := -llog -ldl
 LOCAL_MODULE    := ndkfoo
 LOCAL_SRC_FILES := ndkfoo.c

 include $(BUILD_SHARED_LIBRARY) 
```

还有我的 c 级 ndkfoo.c ：

```
 #include <jni.h>  
#include <string.h>  
#include <android/log.h>  
#include <string.h>
#include <jni.h>
jstring Java_com_example_ocrrecognise_ndkfoo_MainActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis) {
  return (*env)->NewStringUTF(env, "Hello from native code!");
} 
```

和主要活动：

```
public class MainActivity extends Activity {
static {  
    System.loadLibrary("ndkfoo");  
} 
private native String invokeNativeFunction();  
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final Button button = (Button) findViewById(R.id.button_id);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) 
        {
              try{
                  String hello = invokeNativeFunction();
                  Log.i("string func", hello);
              }catch (UnsatisfiedLinkError e)
              {
                  e.printStackTrace();
              }

              //new AlertDialog.Builder(MainActivity.this).setMessage(hello).show();
        }
    });

} 
```

但我有

```
 No implementation found for native Lcom/example/ocrrecognise/MainActivity;.invokeNativeFunction ()Ljava/lang/String;
 java.lang.UnsatisfiedLinkError: invokeNativeFunction
    at com.example.ocrrecognise.MainActivity.invokeNativeFunction(Native Method)
    at com.example.ocrrecognise.MainActivity.access$0(MainActivity.java:14)
    at com.example.ocrrecognise.MainActivity$1.onClick(MainActivity.java:24)
    at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9080)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 
```

我在`ndkfoo.c`我输入了正确的包名。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:45:26.100

你在什么包里`Activity`？请注意，这应该是在你是`com.example.ocrrecognise.ndkfoo.` 如何编译你的 c 代码的？

你把编译`.so`文件`/libs/armeabi`放在你的项目下了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:52:52.623

从错误

```
 No implementation found for native Lcom/example/ocrrecognise/MainActivity;.invokeNativeFunction 
```

您的主要活动似乎在 com.example.ocrrecognise 包中。如果将它放在包 com_example_ocrrecognise_ndkfoo 中，它应该可以工作，因为这是您在本机代码中声明函数时使用的前缀。

# iphone - 如果用自定义子类替换默认视图，cornerRadius 不起作用

> ID：12989876
> 
> 赞同：4
> 
> 时间：2012-10-20T15:26:37.783
> 
> 标签：iphone, objective-c, ios, uiview, cornerradius

以下设置：

我有一个 popupViewController，它有一个自定义 UIView 子类作为它的视图，在`loadView`

```
- (void)loadView
{
    CGRect startingPopupSize = CGRectMake(0.0f, 0.0f, 300.0f, 160.0f);
    _popupView = [[MoviePopupView alloc] initWithFrame:startingPopupSize];
    self.view = _popupView;
} 
```

在这个 UIView 子类中，我在它的 init 方法中有以下代码

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        // Initialization code
        self.layer.masksToBounds = YES;
        self.layer.opaque = NO;
        self.clipsToBounds = YES;
        self.backgroundColor = [UIColor whiteColor];
        self.layer.borderWidth = 1.0f;
        self.layer.cornerRadius = 10.0f;
    }
    return self;
} 
```

问题是，这`cornerRadius`不适用于此视图，但会绘制边框，请参见此处：

![无角半径](../Images/86f9cd0d5a4459e1b4e030714b1b1460.png)

如果我不使用 uiviewcontroller 的默认 uiview 替换此视图，而是将其添加为子视图，cornerRadius 工作得很好（我想替换它有几个原因）。

任何想法为什么这不起作用？

* * *

## **编辑：**

如果我只是将图层`masksToBounds = YES`属性从`initWithFrame`方法移动到`drawRect`它工作的方法。将其移至其视图控制器`viewDidLoad`不会。

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    self.layer.masksToBounds = YES;

} 
```

任何想法为什么这有效？我认为这里不是设置此属性的正确位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:54:18.957

你应该提出两个观点：

*   背景视图
*   文本视图

对于您想要的文本背景的背景视图设置颜色。对于文本视图，将背景颜色设置为清晰颜色。

# javascript - 三.js 自定义属性

> ID：12989879
> 
> 赞同：2
> 
> 时间：2012-10-20T15:26:56.363
> 
> 标签：javascript, shader, webgl, three.js

我正在尝试制作一个实时的浏览器内着色器编写工具，但自定义属性有问题。你可以看到我们在这里得到了什么：78.46.211.78/index.html

顶点着色器和片段着色器窗口是不言自明的，最终渲染也是如此。界面通道是一段代码，在渲染之前每帧都会执行，以便我们可以在其中进行更改。现在，在界面通道中，我们可以通过右键单击并选择适当的选项来定义属性、制服和变量（Javascript 全局变量）。制作新属性或制服时，以[type][name]的形式输入，其中type为“f”、“v3”等。

这会将属性和制服添加到附加到材质的属性和制服的哈希中（每次更改着色器都会创建一个新材质）。

关于front on，我要警告的另一件事是我实现的快捷方式：A 是属性的散列，U 是制服，J 是变量，O 是场景中的对象。

下面是如何重现我的问题：右键单击界面通道窗口，选择添加新属性，在提示符处键入“f 位移”。这会在顶点着色器中创建一个新的属性浮点值，并在接口通道中创建一段辅助代码，如下所示：

```
for(var i = 0; i < O.sphere.geometry.vertices.length; i++) {
  A.displacement.value[i] = 1.0;
}
A.displacement.needsUpdate = true; 
```

现在，转到顶点着色器并更改它：

```
attribute float displacement;
void main() {
  gl_Position = projectionMatrix *
  modelViewMatrix * vec4(position,1.0);
} 
```

进入

```
attribute float displacement;
void main() {
  gl_Position = projectionMatrix *
  modelViewMatrix * vec4(position,displacement);
} 
```

......它不会工作。检查时可以看到所有需要的源代码。我检查了参考资料——材料确实参考了所需的数组。不过，我从未见过 needsUpdate = true 生效。控制台中会出现错误，因为在您键入时会发生代码编译，但是一旦您完成句子，这些就会停止，所以不要害怕。

# facebook - Facebook 第三方网站令人困惑的登录问题

> ID：12989885
> 
> 赞同：0
> 
> 时间：2012-10-20T15:27:35.837
> 
> 标签：facebook

我正在使用 Javascript SDK 让用户在我的网站上登录我的 Facebook 应用程序。我已经根据文档在 App Dashboard 中编码和配置了所有内容，包括 Javascript 中的 appId 和 channelUrl（现在是 //localhost/WebPage），以及应用程序域 (localhost)、站点 URL (http:/ /localhost/WebPage)、用户和朋友权限，以及应用程序仪表板中的扩展权限。

当我使用拥有该应用程序的开发人员帐户（使用我网站上的登录按钮）登录时，但在从 Facebook 的“我的应用程序”部分（在同一个 Facebook 帐户中）删除应用程序本身后，一切正常（登录按钮将我定向到新页面，要求登录，然后要求我允许我的应用程序所需的权限），这确认我的所有设置（和代码）似乎都已正确配置。

同时，当我使用另一个帐户（显然不拥有该应用程序）时，我收到以下错误消息：“发生错误。请稍后再试。” 尽管如此，在浏览器窗口中单击“确定”后，用户仍会登录到 Facebook 的主页（在同一窗口中）。同时，用户不会登录到初始浏览器页面（我的网站）。更让我困惑的是，当我刷新初始浏览器窗口（显然在同一个浏览器应用程序中）时，用户仍然没有在该页面（我的网站）上登录 Facebook。有人会认为应该正确设置 cookie（对于该浏览器）并且浏览器应该访问它们，并将用户显示为登录到我的网站。

有人会知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:19:13.410

我敢打赌@ifaour 的*沙盒模式*评论是正确的答案。

虽然“发生错误。请稍后再试。” 是一个非常普遍的 Facebook 错误，最近 Facebook 政策发生了变化，导致许多应用程序默默地切换到*沙盒模式*。

[从这里](https://developers.facebook.com/blog/post/2012/10/03/platform-updates--operation-developer-love/)摘录：

> 隐私政策提醒
> 
> 在 App Dashboard 的专用字段中未包含有效隐私政策 URL（请参阅平台政策 II.3）的应用程序将在 App Dashboard 和应用程序详细信息页面中看到警报。为了让您更轻松地进行验证，我们将包含一个“隐私政策 URL 测试”链接，用于检查您的应用是否符合隐私政策 URL 要求。如果您不遵守，您的应用程序可能会被置于沙盒模式。满足隐私政策 URL 要求后，您可以禁用沙盒模式。

更难检测到您的应用程序处于沙盒模式这一事实加剧了这种情况，因为您必须点击“编辑”按钮才能显示切换其状态的选项。

# c# - 我应该在任务内部还是外部创建对象？

> ID：12989886
> 
> 赞同：1
> 
> 时间：2012-10-20T15:27:36.560
> 
> 标签：c#, asp.net, task-parallel-library

假设我有一个对象，我想在两个单独的任务中使用它的成员。最好的方法是什么？由于结构按值传递，我是否应该将对象更改为结构，然后创建对象的两个单独副本，并将其传递给两个任务？此外，由于对象的属性来自数据库，我想我可以在每个任务中创建实例。

哪种方法最有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:37:14.120

正如 Henk 在对 OP 的评论中所暗示的那样……

如果对象的属性仅用于参考，则实例化一次对象并将其传递给多个任务是没有问题的，但是，如果任务要更改对象的属性，则需要处理所有常见的多线程问题。

此外，由于您提到这些对象代表 Db 记录，我猜您是从 ORM 中获取它们的。如果您使用实体框架，它创建的代理类在更改属性时绝对*不是*线程安全的。

所以真的，这取决于你的使用情况比赛条件。（假设您没有处理大量实体并且内存使用不是问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:43:54.277

如果对象在任务之间是独立的，它应该是按值的。如果一个对象被两个任务使用，则应该有一个对象。如果对象是独立的（换句话说，2 个对象），则克隆对象，然后传递给任务。我不会使用结构。

# c - 在 gl3w 中定义近和远？

> ID：12989889
> 
> 赞同：2
> 
> 时间：2012-10-20T15:28:16.540
> 
> 标签：c, parameters

我收到`parameter name omitted`此代码错误

```
#include <GL3/gl3w.h>

void f(int near, int far) {

}

int main() {
    return 0;
} 
```

从[这个](https://stackoverflow.com/questions/118774/is-there-a-clean-way-to-prevent-windows-h-from-creating-a-near-far-macro)问题我怀疑 gl3w 包含 WinDef.h 但我无法在源代码中找到它。这个问题的根源是什么，如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:30:59.380

为确保问题不是来自`WinDef.h`，您可以尝试取消定义`near`and `far`，看看它是否有效。

```
#undef far
#undef near 
```

该错误似乎与此定义的行为相匹配。是`near`并且`far`被定义为空宏，您的参数将没有标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:30:42.233

near 和 far 用于指示指针的类型，很可能被定义为

```
#define near
#define far 
```

这让你

```
void f(int , int )
{

} 
```

这是 C 中的无效函数定义。（参数必须有名称）。要么取消定义它们 ( `#undef`) 要么更改参数名称。请注意，仅在函数定义中，这不是函数声明（即`void foo(int, int);`- 如在头文件中）中的问题。

具体来说，**gl3w.h**包含[**gl3.h**](http://www.opengl.org/registry/api/gl3.h)包含**windows.h**

# c# - 如何判断 Pcap.Net TCP 数据包中的数据剩余多少空间

> ID：12989891
> 
> 赞同：2
> 
> 时间：2012-10-20T15:28:22.570
> 
> 标签：c#, tcp, ethernet, pcap, pcap.net

我正在使用 Pcap 构建网络 tcp 包：

```
 private static Packet BuildTcpPacket()
    {
        EthernetLayer ethernetLayer =
            new EthernetLayer
            {
                Source = new MacAddress("01:01:01:01:01:01"),
                Destination = new MacAddress("02:02:02:02:02:02"),
                EtherType = EthernetType.None, // Will be filled automatically.
            };

        IpV4Layer ipV4Layer =
            new IpV4Layer
            {
                Source = new IpV4Address("1.2.3.4"),
                CurrentDestination = new IpV4Address("11.22.33.44"),
                Fragmentation = IpV4Fragmentation.None,
                HeaderChecksum = null, // Will be filled automatically.
                Identification = 123,
                Options = IpV4Options.None,
                Protocol = null, // Will be filled automatically.
                Ttl = 100,
                TypeOfService = 0,
            };

        TcpLayer tcpLayer =
            new TcpLayer
            {
                SourcePort = 4050,
                DestinationPort = 25,
                Checksum = null, // Will be filled automatically.
                SequenceNumber = 100,
                AcknowledgmentNumber = 50,
                ControlBits = TcpControlBits.Acknowledgment,
                Window = 100,
                UrgentPointer = 0,
                Options = TcpOptions.None,
            };

        PayloadLayer payloadLayer =
            new PayloadLayer
            {
                Data = new Datagram(Encoding.ASCII.GetBytes("hello world")),
            };

        PacketBuilder builder = new PacketBuilder(ethernetLayer, ipV4Layer, tcpLayer, payloadLayer);

        return builder.Build(DateTime.Now);
    } 
```

因为包是通过以太网发送的，所以最大的包总大小限制为 1500 字节。有什么方法可以用来检查包头的大小，这样我就知道为实际数据留下了多少空间？

另外，如果我需要发送超过 1500 字节的数据，我是否只需将其拆分，还是需要遵守任何其他规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:38:44.990

是的。

您可以使用 ILayer.Length 属性来获取每个图层的长度。

您可以使用 IP 分段或仅使用常规 TCP（这是大多数应用程序所做的）来拆分数据包。

# asp.net - MVC3 (Razor) 传递模型数据

> ID：12989892
> 
> 赞同：0
> 
> 时间：2012-10-20T15:28:25.590
> 
> 标签：asp.net, asp.net-mvc-3

我正在制作备忘录网络应用程序。

主页包含“创建和列出和修改”功能。

但我不知道如何将模型（用于创建）和列表（用于列表）从控制器传递给视图（剃刀）。

这是我的笔记模型，

```
[Table("note")]
public class Note
{
        [Key]
        public int id { get; set; }

        [Required(ErrorMessage="Content is required")]
        [DisplayName("Note")]
        public string content { get; set; }
        public DateTime date { get; set; }

        [Required(ErrorMessage = "User ID is required")]
        [DisplayName("User ID")]
        public string userId {get; set;}
        public Boolean isPrivate { get; set; }
        public virtual ICollection<AttachedFile> AttachedFiles { get; set; }

} 
```

我试过了，

# 1)

```
public ActionResult Index()
{
     var notes = unitOfWork.NoteRepository.GetNotes();
     return View(notes); 
} 
```

那么，鉴于，

```
@model Enumerable<MemoBoard.Models.Note>
//I can not use this, because the model is Enumerable type
@Html.LabelFor(model => model.userId) 
```

所以，我做了viewModel

# 2)

```
public class NoteViewModel
{
    public IEnumerable<Note> noteList { get; set; }
    public Note note { get; set; }
} 
```

在控制器中，

```
public ActionResult Index()
{
    var notes = unitOfWork.NoteRepository.GetNotes();
    return View(new NoteViewModel(){noteList=notes.ToList(), note = new Note()});
} 
```

在视图中，

```
@model MemoBoard.Models.NoteViewModel
@Html.LabelFor(model => model.note.userId) 
```

它看起来不错，但在源视图中，它正在显示

```
<input data-val="true" data-val-required="User ID is required" id="note_userId" name="note.userId" type="text" value="" /> 
```

名称是**note.userId**而不是**userId**。

列出这种情况，我该怎么做才能工作？

请给我建议。

谢谢

**[编辑]（首先，感谢所有建议）**

那么，我怎样才能改变这个控制器

```
[HttpPost]
public ActionResult Index(Note note) 
{
    try
    {
    if (ModelState.IsValid)
    {
        unitOfWork.NoteRepository.InsertNote(note);
        unitOfWork.Save();
        return RedirectToAction("Index");
    }
    }catch(DataException){
    ModelState.AddModelError("", "Unable to save changes. Try again please");
    }

    return RedirectToAction("Index");
} 
```

如果我将参数类型更改为 NoteViewModel，那么我应该如何进行有效检查？

```
[HttpPost]
public ActionResult Index(NoteViewModel data) 
{
    try
    {
    if (ModelState.IsValid) <=== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:37:19.010

```
@model Enumerable<MemoBoard.Models.Note> 
//I can not use this, because the model is Enumerable type 
@Html.LabelFor(model => model.userId) 
```

您可以在`foreach`循环或返回列表中使用它并在`for`循环中使用它

```
the name is note.userId not userId. 
```

很正常，这是为模型绑定做的

尝试这个：

```
Html.TextBox("userId", Model.note.userId, att) 
```

# xml - 使用 XSLT 将分隔符转换为包装器

> ID：12989894
> 
> 赞同：6
> 
> 时间：2012-10-20T15:28:50.023
> 
> 标签：xml, xslt

我有一段想要用 XSLT 转换的 XML（使用 xsltproc——所以只有 XSLT 1.0）。原始 XML 使用一些标签作为分隔符，如下所示：

```
<container>
  <element />
  <element />
  <separator />
  <element />
  <element />
  <element />
  <separator />
  <element />
</container> 
```

我需要将其转换为包装这些元素的格式。所以我需要它看起来像这样：

```
<container>
  <wrapper>
    <element />
    <element />
  </wrapper>
  <wrapper>
    <element />
    <element />
    <element />
  </wrapper>
  <wrapper>
    <element />
  </wrapper>
</container> 
```

我似乎无法设计一个实现这一目标的模板。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T16:06:48.703

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kFollowing" match="element"
          use="generate-id(preceding-sibling::separator[1])"/>

 <xsl:template match="/*">
     <container>
       <xsl:apply-templates select=
       "element
            [generate-id()
            =
             generate-id(key('kFollowing',
                             generate-id(preceding-sibling::separator[1])
                             )[1]
                        )
             ]"/>
     </container>
 </xsl:template>

 <xsl:template match="element">
  <wrapper>
    <xsl:copy-of select=
    "key('kFollowing',
         generate-id(preceding-sibling::separator[1])
         )"/>
  </wrapper>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<container>
    <element />
    <element />
    <separator />
    <element />
    <element />
    <element />
    <separator />
    <element />
</container> 
```

**产生想要的正确结果**：

```
<container>
   <wrapper>
      <element/>
      <element/>
   </wrapper>
   <wrapper>
      <element/>
      <element/>
      <element/>
   </wrapper>
   <wrapper>
      <element/>
   </wrapper>
</container> 
```

# c# - XNA 4.0 碰撞检测不工作

> ID：12989898
> 
> 赞同：2
> 
> 时间：2012-10-20T15:29:34.400
> 
> 标签：c#, collision-detection, xna-4.0

我已经设法获得了我认为他们需要获得的值，以便 snape 和平台边界框之间的碰撞检测发生在平台类中。但是它不起作用。没有错误，我看不出哪里出错了。您的帮助将不胜感激。我的3节课如下。

游戏1类

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Texture2D background;
    Movement character;
    Platform[] platforms;
    //private Vector2 SnapePosition = Vector2.Zero;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        graphics.PreferredBackBufferHeight = 440;
        graphics.PreferredBackBufferWidth = 782;

    }

    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        platforms = new Platform[15];

        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        character = new Movement(Content.Load<Texture2D>("snape"), new Rectangle(0, 350, 50, 50));
        for (int i = 0; i < platforms.Length; i++)
        {
            platforms[i] = new Platform(
                Content.Load<Texture2D>("Platforms/lvl2_platform"), new Rectangle(i*100, 410, 100, 30), character.Snape, character.SnapePosition);
        }

        // TODO: use this.Content to load your game content here
        background = Content.Load<Texture2D>("Backgrounds/lvl2_background");
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        //Allows the player to move
        character.Update();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here

        spriteBatch.Begin();
        spriteBatch.Draw(background, Vector2.Zero, Color.White);
        character.Draw(spriteBatch);

        foreach (Platform platform in platforms)
        {
            platform.Draw(spriteBatch);
        }
        spriteBatch.End();

        base.Draw(gameTime);
    }
}
} 
```

玩家等级

```
class Player
{
    public Texture2D Snape;
    public Rectangle SnapePosition;

    public virtual void Update()
    {

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(Snape,SnapePosition,Color.White);
    }
}

class Movement : Player
{
        public Movement(Texture2D newSnape, Rectangle newSnapePosition)
    {
        Snape = newSnape;
        SnapePosition = newSnapePosition;
    }

        public override void Update()
        {
            KeyboardState keyBoard = Keyboard.GetState();

            if (keyBoard.IsKeyDown(Keys.A))
            {
                SnapePosition.X -= 5;
            }
            if (keyBoard.IsKeyDown(Keys.D))
            {
                SnapePosition.X += 5;
            }
            if (keyBoard.IsKeyDown(Keys.W))
            {
                SnapePosition.Y -= 5;
            }
            if (keyBoard.IsKeyDown(Keys.S))
            {
                SnapePosition.Y += 5;
            }

        }
}
} 
```

平台类

```
class Platform
{
    Texture2D texture;
    Rectangle rectangle;
    Texture2D snape;
    Rectangle snapePosition;
    public Rectangle test;

    public enum CollisionPosition { None, Top, Bottom, Left, Right };
    public CollisionPosition collisionType;
    public bool inCollision;
    public int collisionDepth;

    public Platform(Texture2D newTexture, Rectangle newRectangle, Texture2D newSnape, Rectangle newSnapePos)
    { 
        texture = newTexture;
        rectangle = newRectangle;
        snapePosition = newSnapePos;
        snape = newSnape;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, rectangle, Color.White);
    }

    public void Collisions()
    {
        if (rectangle.Intersects(snapePosition))
        inCollision = true;
    }

    public void DetermineCollisionType()
    {
        if (inCollision == false)
        {
            collisionType = CollisionPosition.None;
            collisionDepth = 0;
        }
        else
        {
            // Determine the side of *least intersection* for snape
            int minOverlap = int.MaxValue;

            // Check the top side
            int tOverlap =
                (rectangle.Y + texture.Height / 2)
                - (snapePosition.Y - snape.Height / 2);
            if (tOverlap > 0 && tOverlap < minOverlap)
            {
                collisionType = CollisionPosition.Top;
                minOverlap = tOverlap;
            }

            // Check the bottom side
            int bOverlap =
                (snapePosition.Y + snape.Height / 2)
                - (rectangle.Y - texture.Height / 2);
            if (bOverlap > 0 && bOverlap < minOverlap)
            {
                collisionType = CollisionPosition.Bottom;
                minOverlap = bOverlap;
            }

            // Check the right overlap
            int rOverlap =
                (snapePosition.X + snape.Width / 2)
                - (rectangle.X - texture.Width / 2);
            if (rOverlap > 0 && rOverlap < minOverlap)
            {
                collisionType = CollisionPosition.Right;
                minOverlap = rOverlap;
            }

            // Check the left overlap
            int lOverlap =
                (rectangle.X + texture.Width / 2)
                - (snapePosition.X - snape.Width / 2);
            if (lOverlap > 0 && lOverlap < minOverlap)
            {
                collisionType = CollisionPosition.Left;
                minOverlap = lOverlap;
            }

            // Update the collision depth
            collisionDepth = minOverlap;
        }
    }

    public void SeparateSnape()
    {
        switch (collisionType)
        {
            case CollisionPosition.None:
                break;
            case CollisionPosition.Top:
                snapePosition.Y += collisionDepth;
                break;
            case CollisionPosition.Bottom:
                snapePosition.Y -= collisionDepth;
                break;
            case CollisionPosition.Right:
                snapePosition.X -= collisionDepth;
                break;
            case CollisionPosition.Left:
                snapePosition.X += collisionDepth;
                break;
        }
    }

    public void Update()
    {
        // Check for collision
        Collisions();

        // Determine collision type
        DetermineCollisionType();

        // Separate snape
        SeparateSnape();
    }

    public Rectangle getSnapePos
    {
        get { return snapePosition; }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T05:31:17.600

您的部分问题似乎是您不知道类和结构之间的区别是什么。矩形是一个结构，这意味着当您将它作为参数传递给任何方法时，它会“按值”传递，这意味着该值的副本已生成，并且只要方法正在运行，它就会一直存在，之后它不再存在。另一方面，类是引用类型，因此如果您将类作为参数传递，您将“通过引用”传递它，这意味着该方法将获得一个值，告诉它在哪里访问该类。这里的区别在于，虽然引用在方法结束时被销毁，但它只是一个引用，而不是值本身，这与结构不同。

最重要的是，即使你给平台一个对 snape 位置的引用而不是一个值，当你移动 snape 时，你会更改他位置的整个值，而不仅仅是它的一部分，所以它会覆盖 snape 的引用，无论如何都会使平台的参考资料过时。

老实说，我认为您最好重新考虑一下您的设计。首先，尝试将键盘管理移到角色之外，因此游戏本质上会挂接到一个角色并控制该角色的移动。这很重要，因为这意味着游戏本身知道主角是谁，角色可以与哪些平台发生碰撞，从而可以对平台和角色进行碰撞检查。如果平台不能改变角色的位置并且玩家不知道地图上的所有平台是什么，那么让游戏本身监控似乎更明智。

这是一个例子：

```
protected override void Update()
        {
            KeyboardState keyboardState = Keyboard.GetState();
            Rectangle oldBounds = player.Bounds;
            if (keyboardState.IsKeyDown(Keys.W)) { player.Y--; }
            if (keyboardState.IsKeyDown(Keys.A)) { player.X--; }
            if (keyboardState.IsKeyDown(Keys.X)) { player.Y++; }
            if (keyboardState.IsKeyDown(Keys.D)) { player.X++; }
            foreach (Platform platform in platforms)
            {
                if (player.Bounds.Intersects(platform.Bounds))
                {
                    player.Bounds = oldBounds;
                    break;
                }
            }
        } 
```

你会想让它更复杂一点，但这可能是最基本的碰撞系统。显然，如果你在做一个平台游戏，你可能会想要更聪明一点。我建议您尽可能多地进行研究和实验，还请务必查看如何在代码中添加断点并逐行运行代码，以及使用本地和监视框来弄清楚到底发生了什么当您的代码运行时。如果您可以确定正在发生的事情和应该发生的事情，它将使事情更容易解决和理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:36:16.447

```
protected override void Update(GameTime gameTime)
{
    // Allows the game to exit
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit();

    //Allows the player to move
    character.Update();

    // TODO: Add your update logic here

    base.Update(gameTime);
} 
```

我没有看到有关您的平台的任何更新。

尝试添加

```
 foreach (Platform platform in platforms)
    {
        platform.Update();
    } 
```

# python - Python - 变量是导入模块的局部变量错误

> ID：12989899
> 
> 赞同：1
> 
> 时间：2012-10-20T15:29:35.577
> 
> 标签：python

所以，我最近一直在研究 IRC 机器人。作为反垃圾邮件功能的一部分，它存储了某人最后一次做某事的时间。它用于初始化 WHO 回复中的用户列表，我一直在使用 RPL_NAMREPLY。

它几乎可以工作。但是，我有一个看起来很奇怪的问题..

```
import time

# ...

    def irc_unknown(self, prefix, command, params):
        """Handle packets that aren't handled by the library."""

        # Prefix: asimov.freenode.net
        # Command: RPL_BANLIST
        # Params: ['MCBans_Testing', '#mcbans-test', 'a!*@*', 'gdude2002!g@unaffiliated/gdude2002', '1330592882']

        self.runHook("unknownMessage", {"prefix": prefix, "command": command, "params": params})

        if command == "RPL_BANLIST":
            channel = params[1]
            mask = params[2]
            owner = params[3]
            time = params[4]

            if channel not in self.banlist.keys():
                done = {"done": False, "total": 1}
                banmask = {"owner": owner.split("!")[0], "ownerhost": owner, "time": time, "mask": mask,
                           "channel": channel}
                done[mask] = banmask
                self.banlist[channel] = done

            else:
                if not self.banlist[channel]["done"]:
                    banmask = {"owner": owner.split("!")[0], "ownerhost": owner, "time": time, "mask": mask,
                               "channel": channel}
                    self.banlist[channel][mask] = banmask
                    self.banlist[channel]["total"] += 1

                else:
                    done = {"done": False, "total": 1}
                    banmask = {"owner": owner.split("!")[0], "ownerhost": owner, "time": time, "mask": mask,
                               "channel": channel}
                    done[mask] = banmask
                    self.banlist[channel] = done

        elif command == "RPL_ENDOFBANLIST":
            channel = params[1]

            if channel in self.banlist.keys():
                self.banlist[channel]["done"] = True
            else:
                self.banlist[channel] = {"done": True, "total": 0}

            self.prnt("|= Got %s bans for %s." % (self.banlist[channel]["total"], channel))

            if self.is_op(channel, self.nickname):
                stuff = self.banlist[channel].keys()
                stuff.remove("done")
                stuff.remove("total")

                for element in stuff:
                    if stuff == "*!*@*":
                        self.send_raw("KICK %s %s :Do not set such ambiguous bans!" % (
                        channel, self.banlist[channel][element]["owner"]))
                        self.send_raw("MODE %s -b *!*@*" % channel)
                        self.send_raw(
                            "MODE %s +b *!*@%s" % (channel, self.banlist[channel][element]["ownerhost"].split("@")[1]))
                    else:
                        self.checkban(channel, element, self.banlist[channel][element]["owner"])

        elif command == "RPL_NAMREPLY":
            me, status, channel, names = params
            users = names.split()
            ranks = "+%@&~"

            if not channel in self.chanlist.keys():
                self.chanlist[channel] = {}

            for element in users:
                rank = ""

                for part in ranks:
                    if part in element:
                        rank = rank + part
                    element = element.strip(part)

                done = { 'server': prefix,
                         'status': rank,
                         'last_time': float( time.time() - 0.25 ) }
                self.chanlist[channel][element] = done

            print "Names for %s%s: %s" % (status, channel, names)

        elif command == "RPL_ENDOFNAMES":
            me, channel, message = params
            ops = 0
            voices = 0
            opers = 0
            aways = 0

            for element in self.chanlist[channel].values():
                status = element["status"]
                if "+" in status:
                    voices += 1
                if "@" in status:
                    ops += 1
                if "*" in status:
                    opers += 1
                if "G" in status:
                    aways += 1
            print("|= %s users on %s (%s voices, %s ops, %s opers, %s away)" % (
            len(self.chanlist[channel]), channel, voices, ops, opers, aways))
            print "[%s] (%s) %s" % (prefix, command, params)

        else:
            print "[%s] (%s) %s" % (prefix, command, params) 
```

有了它，我收到以下错误..

```
 File "C:\Users\Gareth\Documents\GitHub\McBlockit---Helpbot\system\irc.py", line 1422, in irc_unknown
    done = {"server": prefix, "status": rank, "last_time": float(time.time() - 0.25)}
exceptions.UnboundLocalError: local variable 'time' referenced before assignment 
```

如您所见，我在文件顶部导入时间。该代码在另一个函数中运行良好。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T15:31:56.040

您在函数的语句中`time`定义了一个局部变量：`if`

```
 time = params[4] 
```

因为它在`if`语句中，所以没有为其分配任何内容，但是由于该变量，导入的`time`模块在您的函数中不可用。

重命名该变量以解决冲突。

# datetime - 果园 cms 内置日期时间字段

> ID：12989905
> 
> 赞同：0
> 
> 时间：2012-10-20T15:30:08.350
> 
> 标签：datetime, content-management-system, field, orchardcms

我怎样才能插入我的日期时间字段来代替内置的？我想将日期时间字段存储库类型从日期时间更改为字符串，不仅适用于我的模块，还适用于所有现有字段，如页面创建日期时间。

# android - 将按钮 android:background 更改为不同的可绘制对象

> ID：12989906
> 
> 赞同：14
> 
> 时间：2012-10-20T15:30:14.153
> 
> 标签：android, button, background, drawable

我是 Android 和 Java 的新手，但已经成功地自学并在不需要提问的情况下找到了有关 stackoverflow 问题的大多数答案。到现在....

在这里，我有许多彩色按钮，单击它们时，会将颜色更改为一系列不同的颜色。

有许多按钮定义为例如：

```
<Button
   android:id="@+id/button17"
   android:layout_width="0dp"
   android:layout_height="fill_parent"
   android:layout_weight="1"
   android:background="@drawable/orange_button"
   android:gravity="center"
   android:onClick="onClick" /> 
```

有人可以告诉我如何使用代码更改 android:background 以将上面的示例更改为黄色，例如，当单击按钮时。

在下面的代码中，clickedButton 是我需要更改背景的按钮的 ID。

```
public void onClick(View v) {
    int id=v.getId();
    String clickedButton = getResources().getResourceEntryName(id);

    Change button to Yellow here??

    // Temporary code below to check which button was pressed
    // and convert its number to an integer to eventually access an array

    final TextView tvGameTimer = (TextView) findViewById(R.id.tvGameTimer);
    int buttonNumber = Integer.parseInt(clickedButton.substring(6,8));
    tvGameTimer.setText("" + buttonNumber);

    } 
```

我正在使用自定义按钮样式来定义按钮颜色：

```
res/drawable/yellow_button.xml
res/drawable/blue_button.xml
res/drawable/red_button.xml
res/drawable/orange_button.xml
res/drawable/green_button.xml 
```

现在我只需要弄清楚如何将按钮从橙色更改为黄色。然后，我可以添加逻辑以在应用程序需要时更改颜色。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-20T15:38:52.877

我假设您发布的 onClick 方法与您尝试更改其背景的 Button 相同。使用此代码。

```
 v.setBackgroundResource(R.drawable.yellow_button); 
```

如果 onClick 不是同一个按钮的方法，那么使用

```
 findViewById(R.id.button17).setBackgroundResource(R.drawable.yellow_button); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:38:35.553

```
Button btn = (Button) findViewById(R.id.button17);
btn.setBackground(this.getResources().getDrawable(R.drawable.yellow_button)); 
```

尝试这个。

# c++ - Windows 8 桌面应用程序，如何使用 ID2D1DeviceContext 渲染到 HWND？

> ID：12989907
> 
> 赞同：3
> 
> 时间：2012-10-20T15:30:17.633
> 
> 标签：c++, windows-8, directx-11, direct2d

使用示例：

[http://msdn.microsoft.com/en-us/library/windows/desktop/hh780339(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh780339(v=vs.85).aspx)

这表示 ID2D1DeviceContext 可用于 Windows 应用商店应用程序（Metro）以及桌面应用程序，并且它可用于呈现到 HWND（c++ 桌面应用程序）。

但是，该示例特定于 Windows::UI:Core::CoreWindow。（Windows 商店/地铁）

这也一样。 [http://msdn.microsoft.com/en-us/library/windows/desktop/hh780340(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh780340(v=vs.85).aspx)

任何建议赞赏如何实现这一点，谢谢！

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:01:05.147

我能够将 Metro 代码移植到桌面兼容代码。

使用 CComPtr 代替 ComPtr。删除了 DX::ThrowIfFailed，您可以使用自己的方法来测试 HRESULTS Replaced 。与 QueryInterface 调用一样。

一项功能更改是： CreateSwapChainForHwnd 代替 CreateSwapChainForCoreWindow

# django - 为什么在包含的模板中调用时 url() 没有给我任何值？

> ID：12989908
> 
> 赞同：1
> 
> 时间：2012-10-20T15:30:27.973
> 
> 标签：django, django-templates, django-urls

这是代码：

```
#list.html
{% if intentions %}
    <table class="table">
        {% for i in intentions %}
            {% url 'intentions.views.show' i.id as iUrl %}
            <tr>
                <td width="20%">
                    <span class="label label-success">x prayers</span>
                </td>
                <td><h3><a href="{{ iUrl }}">{{ i }}</a></h3></td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    <p>
        No intentions are available.
    </p>
{% endif %} 
```

如果这段代码在里面，`index.html`一切都很好。如果我尝试将此代码移动到单独的文件`list.html`并包含在`index.html`如下文件中：

```
 {% include "list.html" with intentions=entries %} 
```

`<a>`我在标签的 url 属性中没有值。有人可以回答我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:37:43.657

您的 list.html 模板可能丢失

```
{% load url from future %} 
```

因为您使用的是 'as' 语法，所以 url 标记会静默失败。

# php - 数组键值

> ID：12989909
> 
> 赞同：-3
> 
> 时间：2012-10-20T15:30:31.520
> 
> 标签：php, arrays

可以转换此数组：

```
array(
  A => B,
  C => D,
) 
```

到这个数组：

```
array(
  array(
    'A',
    'B',
  ),
  array(
    'C',
    'D',
  ),
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T15:50:25.077

您可能正在寻找[`array_map`](http://php.net/array_map)（基于现有数组构建配对，请参阅手册页上的[*示例 #4 创建数组数组*](http://php.net/array_map#example-4633)[`array_keys`](http://php.net/array_keys)）和（数组的所有键）函数：

```
array_map(null, array_keys($array), $array)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:34:10.717

```
$source = array(
  'A' => 'B',
  'C' => 'D',
)

foreach ($source as $key => $value){
  $result[] = array($key, $value);
}

var_dump($result); 
```

# actionscript-3 - ActionScript3：如何用一系列图像制作动画？

> ID：12989912
> 
> 赞同：0
> 
> 时间：2012-10-20T15:30:41.970
> 
> 标签：actionscript-3, flash, animation, image-processing

我是 AS3 的新手，我正在尝试用它创建一个简单的游戏。
到目前为止，我已经能够绘制这样的图像：

```
[Embed(source = 'C:/mypath/myimage.png')]
public static var myImageClass:Class;
private var myImage:Bitmap = new myImageClass(); 
```

然后渲染 myImage。
但这仅绘制没有动画的图片。
我想要的是导入这张图片：

![在此处输入图像描述](../Images/cfa9e24777c590e05d697f3f27cc1dcc.png)

然后将图像切割成一系列子图像并从中绘制动画，而不是单个图像。我该怎么做？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:34:50.857

This is called "*Blitting*". You could accomplish it with fairly decent results, depending on your deployment target and how many animations you require, using [BitmapData.copyPixels()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29), but it's more ideal to use the [Starling Framework](http://gamua.com/starling/), which employs [Stage3D](http://www.adobe.com/devnet/flashplayer/stage3d.html) hardware acceleration.

More here:

*   [Introducing the Starling Framework](http://www.gotoandlearn.com/play.php?id=147) (Video tutorial)
*   [Starling documentation](http://doc.starling-framework.org/core/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:36:01.453

您正在寻找的是`SpriteSheet`支持。您可以轻松地自己编写或使用现有的库（例如[Starling](http://gamua.com/starling/)）。

这个想法是在每一帧绘制图像的一个区域来实际创建动画。根据精灵表的格式，您可能需要添加另一个文件来描述要绘制的每个矩形的位置。

[这个页面](http://blog.flexwiz.net/spritesheet-animation-in-as3/)解释了如何实现它。

# ios - 尽可能多地从应用程序包 (.app) 中获取

> ID：12989913
> 
> 赞同：0
> 
> 时间：2012-10-20T15:30:42.700
> 
> 标签：ios, macos, reverse-engineering, disassembly, .app

我想尽可能多地了解有关给定应用程序包 .app 的技术信息，例如：

*   使用的编译器
*   使用的框架
*   实施细节

显示有关 .app 的大量信息的 QuickLook 插件是理想的，但我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:14:32.617

# 图形用户界面

*   [MacDependency](https://code.google.com/p/macdependency/)显示 Mac OS X 上给定可执行文件、动态库或框架的所有依赖库和框架。它是[otool命令的 GUI 替代品，并提供与 Windows 上的](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)[Dependency Walker](http://www.dependencywalker.com)几乎相同的功能。

# 命令行

*   [nm](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/nm.1.html)显示参数列表中每个目标文件的名称列表（符号表）。
*   [otool](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)显示目标文件或库的指定部分。
*   [类转储](http://www.codethecode.com/projects/class-dump/)检查存储在 Mach-O 文件中的 Objective-C 运行时信息。它为类、类别和协议生成声明。
*   [class_dump_z](http://code.google.com/p/networkpx/wiki/class_dump_z)

## 列出所有链接的符号

```
nm -u /Applications/.app/Contents/MacOS/executable | sort | less 
```

## 显示全局（外部）符号名称（无值或类型）。

```
nm -g -j executable | sort | uniq | less 
```

## 列出应用程序链接到的所有库。

```
otool -L executable 
```

## 显示 Objective-C 运行时系统使用的 __OBJC 段的内容。

```
otool -ov executable | less 
```

## 拆卸

```
otool -tvV executable | less 
```

## 显示实施地址

```
class-dump -A executable | less 
```

# c# - 如何将列表数组与 GridView 或 DataList 绑定？

> ID：12989915
> 
> 赞同：2
> 
> 时间：2012-10-20T15:31:03.900
> 
> 标签：c#, asp.net, gridview, datasource, nested-lists

我创建了一个列表数组。该数组有七行代表星期几，列表包含医生预约的可用时段。我试图将它与 a`GridView`或 a `DataList`（更合适的）绑定但没有成功。

我已经宣布了名单：

```
List<string>[] list=new List<string>[7]; //An array of 7 lists
                    for (int i = 0; i < 7; i++)
                    {
                        list[i]=new List<string>();
                    } 
```

我已经用字符串填写了列表，这些字符串代表了与医生约会的可用空档。

我想要实现的结果是该站点上描述的一位医生的可用性：[链接](http://www.zocdoc.com/search.aspx?dr_specialty=98&address=&insurance_carrier=-1&refine_search=&searchFrom=homepage&showAll=false&hospitalid=-1&match_insurance=&forceReskin=false#dr_specialty=105&address=&insurance_carrier=-1&reason_visit=193&name=&language=1&gender=-1&showAll=false&hospitalid=-1&match_insurance=&forceReskin=false)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:43:35.180

您可以将数组更改为`List<List<string>>`这样的：

```
List<List<string>> list = new List<List<string>>(); 
```

然后您可以通过以下方式将其绑定到 a `GridView`（只需适应您的情况）：

```
protected void Page_Load(object sender, EventArgs e)
{
    List<string> cols = GetColDefsFromBackend();
    List<List<string>> rows = GetDataFromBackend();

    GridView1.DataSource = CreateDataTable(cols, rows);
    GridView1.DataBind();
}

private System.Data.DataTable CreateDataTable(List<string> columnDefinitions, List<List<string>> rows)
{
    DataTable table = new DataTable();
    foreach (string colDef in columnDefinitions)
    {
        DataColumn column;
        column = new DataColumn();
        column.DataType = typeof(string);
        column.ColumnName = colDef;
        table.Columns.Add(column);
    }

    // Create DataRow and Add it to table
    foreach (List<string> rowData in rows)
    {
        DataRow row = table.NewRow();
        // rowData is in same order as columnDefinitions
        for (int i = 0; i < rowData.Count; i++)
        {
            row[i] = rowData[i];
        }
        table.Rows.Add(row);
    }

    return table;
}

/// <summary>
/// Simulates a StoredProcedureCall which returns
/// the data in a List with Lists of strings
/// </summary>
private List<List<string>> GetDataFromBackend()
{
    List<List<string>> myData = new List<List<string>>();
    myData.Add(Row(1));
    myData.Add(Row(2));
    myData.Add(Row(3));
    return myData;
}

private List<string> Row(int p)
{
    List<string> row = new List<string>();
    for (int i = 0; i < 4; i++)
    {
        row.Add(string.Format("Column {0}/{1}", p, i));
    }
    return row;
}     

private List<string> GetColDefsFromBackend()
{
    List<string> cols = new List<string>();
    cols.Add("Col1");
    cols.Add("Col2");
    cols.Add("Col3");
    cols.Add("Col4");
    return cols;
} 
```

来源：[用作 GridView - 数据](http://forums.asp.net/t/1470261.aspx/2/10)[源`List<List<string>>`](http://forums.asp.net/t/1470261.aspx/2/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T23:18:45.513

非常感谢。这真的很有帮助，我花了一些时间试图理解这种转换背后的逻辑，作为一个新手，我最终得到了一些垂钓者的代码：

```
 private System.Data.DataTable CreateDataTable(List<string> columnDefinitions, List<List<string>> rows)
    {
        DataTable table = new DataTable();

        foreach (string colDef in columnDefinitions)
        {
            DataColumn column;
            column = new DataColumn();
            column.DataType = typeof(string);
            column.ColumnName = colDef;
            table.Columns.Add(column);
        }

        for (int i = 0; i < rows[0].Count; i++)
        {
            table.Rows.Add(rows[0][i], rows[1][i], rows[2][i], rows[3][i], rows[4][i], rows[5][i], rows[6][i]);
        }
        return table;
    }

    private List<string> GetColDefsFromBackend()
    {
        List<string> cols = new List<string>();
        cols.Add("Monday");
        cols.Add("Tuesday");
        cols.Add("Wednesday");
        cols.Add("Thursday");
        cols.Add("Friday");
        cols.Add("Saturday");
        cols.Add("Sunday");
        return cols;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:39:58.447

将 List 转换为数据表，然后绑定。数组的数组对于清楚地绑定来说并不复杂。

# python - 将 SCSS 与 Flask 一起使用

> ID：12989916
> 
> 赞同：4
> 
> 时间：2012-10-20T15:31:10.047
> 
> 标签：python, flask, sass

我正在尝试将 scss 与 Flask 一起使用并让它自动编译。

我尝试过使用[Flask-Scss](http://packages.python.org/Flask-Scss/) — 不幸的是，当我设置它时，我得到了`Scanning acceleration disabled (_speedups not found)!`错误，并且没有 CSS 文件。任何人都知道如何解决这个问题，或者让它生成 CSS 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T18:23:09.977

该错误是由安装过程中的错误引起的。如果您`pip`在 Ubuntu 系统上安装并收到此警告：

```
==========================================================================
WARNING: The C extension could not be compiled, speedups are not enabled.
Plain-Python installation succeeded.
========================================================================== 
```

然后你应该确保你已经`libpcre3-dev`预先安装了库（这是包含`pcre.h`的模块，C 安装失败的模块）：

```
 apt-get install libpcre3-dev 
```

完成此操作后，重新安装 Flask-Scss：

```
pip install Flask-scss --force-reinstall -I 
```

重新启动 Flask 服务器后，错误现在应该已成为过去。

## 但是，请注意

尽管上述方法可以解决出现`_speedups not found`错误的问题，但您的文件未编译还有另一个可能的原因。如果你有这样的代码：

```
app = Flask(__name__)

from flask.ext.scss import Scss
Scss(app, static_dir='static', asset_dir='assets')

...

if __name__ == "__main__":
    app.run(debug=True) 
```

，并且您没有`debug`在其他任何地方设置，那么您应该确保将

```
app.debug = True 
```

**在**调用 Scss 对象之前：

```
app.debug = True
Scss(app, static_dir='static', asset_dir='assets') 
```

幸福！每次在调试模式下加载页面时，这应该可以让您的 .scss 文件进行编译。

# java - 正则表达式无法捕获所有组

> ID：12989917
> 
> 赞同：0
> 
> 时间：2012-10-20T15:31:26.920
> 
> 标签：java, javascript, regex, capturing-group

使用（jdk 1.6），应用于主题字符串`java.util.regex`的正则表达式仅捕获而不捕获（模式），因为它应该，给定以下代码：`201210(\d{5,5})Test``20121000002Test``group(0)``group(1)``00002`

```
Pattern p1 = Pattern.compile("201210(\\d{5,5})Test");
Matcher m1 = p1.matcher("20121000002Test");

if(m1.find()){

    for(int i = 1; i<m1.groupCount(); i++){         
    System.out.println("number = "+m1.group(i));            
    }
} 
```

奇怪的是，另一个类似的正则表达式（例如`201210(\d{5,5})Test(\d{1,10})`应用于主题字符串）`20121000002Test0000000099`捕获了组 0 和 1，但没有捕获组 2。

相反，通过使用 JavaScript 的 RegExp 对象，应用于完全相同的主题字符串的完全相同的正则表达式可以捕获所有组，正如人们所期望的那样。我使用这些在线测试仪自己检查并重新检查了这个事实：

*   [http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)
*   [http://www.regextester.com/](http://www.regextester.com/)

我在这里做错了吗？还是 Java 的正则表达式库真的很烂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:45:06.760

`m1.groupCount()`返回**捕获**组的数量，即。1 在您的第一种情况下，因此您不会进入此循环`for(int i = 1; i<m1.groupCount(); i++)`

它应该是`for(int i = 1; i<=m1.groupCount(); i++)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:43:42.160

换行

```
for(int i = 1; i<m1.groupCount(); i++){ 
```

至

```
for(int i = 1; i<=m1.groupCount(); i++){      //NOTE THE = ADDED HERE 
```

它现在可以作为一种魅力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:45:23.437

从[java.util.regex.MatchResult.groupCount](http://docs.oracle.com/javase/6/docs/api/java/util/regex/MatchResult.html#groupCount%28%29)：

> 按照惯例，零组表示整个模式。它不包括在此计数中。

所以遍历`groupCount() + 1`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:37:01.287

> 应用于主题字符串“20121000002Test”的正则表达式“201210(\d{5,5})Test”仅捕获 group(0)，不捕获 group(1)

好吧，我可以说我也没有阅读手册，但是如果您这样做，则说明[Matcher.groupCount()](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#groupCount%28%29)

> 返回此匹配器模式中的捕获组数。按照惯例，零组表示整个模式。它不包括在此计数中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T15:39:21.957

```
for (int i = 1; i <= m1.groupCount(); i++) { 
                   ↑
              your problem 
```

# r - R中的豪斯曼类型测试

> ID：12989925
> 
> 赞同：4
> 
> 时间：2012-10-20T15:32:21.343
> 
> 标签：r, stata, plm, panel-data

我一直在使用**R的“** **plm** ”包来分析面板数据。该软件包中用于在“固定效应”或“随机效应”模型之间进行选择的一项重要测试称为**Hausman 类型**。Stata 也可以进行类似的测试。这里的重点是**Stata**需要先估计固定效应，然后再估计随机效应。但是，我在“plm”包中没有看到任何这样的限制。所以，我想知道“ **plm** ”包是否首先具有默认的“固定效果”，然后是“随机效果”。供您参考，我在下面提到了我在分析时遵循的 Stata 和 R 中的步骤。

 ******```
*

Stata Steps: (data=mydata, y=dependent variable,X1:X4: explanatory variables)
    *step 1 : Estimate the FE model
    xtreg y X1 X2 X3 X4 ,fe
    *step 2: store the estimator 
    est store fixed
    *step 3 : Estimate the RE model
    xtreg y X1 X2 X3 X4,re
   * step 4: store the estimator 
    est store random
    *step 5: run Hausman test
    hausman fixed random

#R steps (data=mydata, y=dependent variable,X1:X4: explanatory variables)
#step 1 : Estimate the FE model
 fe <- plm(y~X1+X2+X3+X4,data=mydata,model="within")
summary(model.fe)
#step 2 : Estimate the RE model
 re <- pggls(y~X1+X2+X3+X4,data=mydata,model="random")
summary(model.re)
#step 3 : Run Hausman test
phtest(fe, re) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T15:51:42.703

**更新：**请务必阅读评论。下面的原始答案。

找出这一点的试错方法：

```
> library(plm)
> data("Gasoline", package = "plm")
> form <- lgaspcar ~ lincomep + lrpmg + lcarpcap
> wi <- plm(form, data = Gasoline, model = "within")
> re <- plm(form, data = Gasoline, model = "random")
> phtest(wi, re)

    Hausman Test

data:  form 
chisq = 302.8037, df = 3, p-value < 2.2e-16
alternative hypothesis: one model is inconsistent 

> phtest(re, wi)

    Hausman Test

data:  form 
chisq = 302.8037, df = 3, p-value < 2.2e-16
alternative hypothesis: one model is inconsistent 
```

如您所见，无论您将哪个模型作为第一个参数和哪个作为第二个参数，测试都会产生相同的结果。******

# php - 值小于数字的 SQL 查询

> ID：12989927
> 
> 赞同：0
> 
> 时间：2012-10-20T15:32:25.717
> 
> 标签：php, sql

我需要从最低 <= 50 的数据库银行中进行选择，然后显示银行名称及其关税。我这样做了，但它不起作用。

```
$result = mysql_query("SELECT * FROM list1 WHERE minimum <= 50]");

while($row = mysql_fetch_array($result))
  {
  echo $row['bank_name'] . " - " . $row['Tarif'];
  echo "<br />";
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:46:21.960

```
$result = mysql_query("SELECT * FROM list1 WHERE minimum <= 50]");
                                                              ^---typo 
```

如果您有以下构造，您会收到错误消息：

```
$result = mysql_query(yada yada) or die(mysql_error());
                                ^^^^^^^^^^^^^^^^^^^^^^ 
```

# html - 正文高度 100% 显示垂直滚动条

> ID：12989931
> 
> 赞同：104
> 
> 时间：2012-10-20T15:32:44.933
> 
> 标签：html, css

出于好奇，考虑下面的示例，为什么 #container div 上的边距会导致垂直滚动条出现在浏览器中？容器的高度远小于设置为 100% 的主体高度。

我已将除#container 之外的所有元素的填充和边距设置为 0。请注意，我故意省略了#container div 上的绝对定位。在这种情况下，浏览器如何计算 body 的高度以及 margin 是如何影响它的？

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
* { padding:0; margin:0;}
html, body { height:100%; }
#container
{
  padding:10px;
  margin:50px;
  border:1px solid black;
  width: 200px;
  height: 100px;
}
</style>
</head>
<body>
  <div id='container'>
  </div>
</body>
</html> 
```

[JSFiddle](http://jsfiddle.net/Neodymium/kqem5/)上的示例

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-20T15:36:06.287

[如果你绘制`html`and的背景`body`（给每个它自己的颜色）](http://jsfiddle.net/BoltClock/kqem5/3)，你会很快注意到它`body`随着 向下移动`#container`，并且`#container`它本身根本没有从顶部偏移`body`。[这是margin collapse](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)的副作用，我在[这里](https://stackoverflow.com/questions/9519841/why-does-this-css-margin-top-style-not-work/9519933#9519933)详细介绍（尽管该答案描述了稍微不同的设置）。

正是这种行为导致滚动条出现，因为您已声明`body`100% 的高度为`html`. 请注意，实际高度`body`不受影响，因为边距从不包含在高度计算中。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-01-04T11:05:30.303

根据@BoltClock♦的回答，我通过将边距归零来修复它......
所以

```
html,body, #st-full-pg {
   height: 100%;
   margin: 0;
} 
```

在将 id "st-full-pg" 分配给面板 div 的情况下工作（进一步包含面板标题和面板主体）

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-03-04T08:37:00.033

有点晚了，但也许它可以帮助某人。

正如 W3C 所说，添加`float: left;`到删除滚动条：`#container`

*•浮动框和任何其他框之间的边距不会折叠（甚至在浮动和它的流入子代之间）。*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-10-13T20:06:49.583

```
html,body {
   height: 100%;
   margin: 0;
   overflow: hidden;
} 
```

这对我有用

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-20T11:03:39.097

添加`float:left;`很好，但会干扰使用中心水平定位`margin:auto;`

如果你知道你的边距有多大，你可以使用 calc 计算你的高度百分比：

```
height: calc(100% - 50px); 
```

浏览器支持不错，但只有IE11+ [https://caniuse.com/#feat=calc](https://caniuse.com/#feat=calc)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-07T03:56:37.507

我找到了解决方案：添加填充：1px 0；to body 防止出现垂直滚动条

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-06T09:14:47.853

```
/*removes default margin & padding*/
html, body{
    padding: 0px !important;
    margin: 0px !important;
}

/*sets body height to max; and allows scrollbar as page content grows*/
body{
    min-height: 100vh;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-27T04:59:15.513

受@BoltClock 的启发，我尝试了这个并且它有效，即使在放大和缩小时也是如此。

`Browser: Chrome 51`

```
html{
  height: 100%;
}
body{
  height: 100%;
  margin: 0px;
  position: relative;
  top: -20px;
} 
```

我猜`body`是向下移动了 20px。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-16T09:42:06.110

您可以在 body 标记中添加不间断空格。

```
<body> &nbsp; <othertags>...</body> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-20T07:41:03.337

**对于那些来这里寻求更容易理解的答案（甚至包括代码示例）的人，这个答案（从[这里](https://stackoverflow.com/a/57122696/3881189)复制）适合您。**

***不需要*JavaScript 或明确的像素值（例如`100px`），只需纯 CSS 和百分比即可。**

如果您的 div 只是自己坐在那里，`height: 50%`则意味着身体高度的 50%。通常，body 的高度是零，没有任何可见的内容，所以其中 50% 只是，嗯，零。

这是解决方案（基于[this](https://stackoverflow.com/a/26609730/3881189)）（取消注释`background`以获得填充的可视化）：

```
/* Makes <html> take up the full page without requiring content to stretch it to that height. */

html
{
  height: 100%;

  /* background: green; */
}

body
{
  /*
    100% the height of <html> minus 1 multiple of the total extra height from the padding of <html>.
    This prevents an unnecessary vertical scrollbar from appearing.
  */
  height: calc(100% - 1em);

  /* background: blue; */
}

/* In most cases it's better to use stylesheets instead of inline-CSS. */
div
{
  width: 50%;
  height: 50%;

  background: red;
}
```

```
<div></div>
```

上面写的是仍然会有通常的填充。您可以将红色的尺寸设置`div`为`100%`并且仍然可以看到每一侧/末端的填充。如果您不想要此填充，请使用此填充（虽然看起来不太好，但我建议您坚持第一个示例）：

```
/* Makes <html> take up the full page without requiring content to stretch it to that height. */

html, body
{
  height: 100%;
}

/* You can uncomment it but you wouldn't be able to see it anyway. */

/*
html
{
  background: green;
}
*/

body
{
  margin: 0;

 /* background: blue; */
}

/* In most cases it's better to use stylesheets instead of inline-CSS */
div
{
  width: 50%;
  height: 50%;

  background: red;
}
```

```
<div></div>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-28T05:08:05.027

`body`在将所有内容放入名为 wrap 的 div之前，我看到此问题已解决。Wrap 的样式应设置为`position: relative; min-height: 100%;`. 要将`#container`div 从顶部和左侧放置 50px 放置一个 div 内包裹，并将填充设置为 50px。边距不适用于 wrap 和我们刚刚创建的 div，但它们可以在`#container`其中以及其中的所有内容中使用。

[这是我对 jsfiddle 的修复](https://jsfiddle.net/kqycuozq/)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-23T08:37:47.747

```
html, body {
    height: 100%;
    overflow: hidden;
} 
```

如果要删除正文滚动，请添加以下样式：

```
body {
    height: 100%;
    overflow: hidden;
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-01-07T23:18:00.430

这个对我有用：

```
html,
body {
    height: 100%;
    height: -webkit-fill-available; // Chrome
}

// Firefox
@-moz-document url-prefix() {
    body {
        box-sizing: border-box; 
        margin: 0;
        padding: 1px;
    }
} 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2015-07-25T15:23:18.010

添加`overflow: hidden;`到 html 和正文。

```
html, body {
  height: 100%;
  overflow: hidden;
} 
```

* * *

## 回答 #15

> 赞同：-10
> 
> 时间：2013-12-08T11:57:12.367

我找到了一个快速的解决方案：尝试将高度设置为 99.99% 而不是 100%

# ruby - 如何使 Ruby gem 可执行

> ID：12989932
> 
> 赞同：12
> 
> 时间：2012-10-20T15:32:46.073
> 
> 标签：ruby, rubygems, bundler

我可以使用 RSpec 或 Rails 或 Pry 之类的 gem，方法是在命令行上调用它们各自的 gem 名称，例如`rspec`, 。如何使用我创建的宝石实现这一目标？我正在使用 bundler 进行基本的 gem 创建。`rails``pry`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T07:03:56.877

我实际上在文件夹中有我的可执行`/bin`文件。

原来我的问题是 bundler 的 gem 模板太聪明了，它只包含已提交给 git 的文件。我实际上还没有提交可执行文件，所以它没有把它捡起来：

```
# gemname.gemspec
gem.files         = `git ls-files`.split($\) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T15:47:06.897

[根据](https://guides.rubygems.org/specification-reference/)Gemspec 文件的文档，您必须将可执行文件放在`bin/`文件夹中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-13T18:07:45.993

要使您的 gem 在 CLI 中可执行，您应该设置以下内容。

1.  将您的可执行文件放在`bin`文件夹中，例如`bin/hello`
2.  `chmod u+x bin/hello`通过设置权限 ( )使该可执行文件
3.  相应地设置 gemspec 配置 ( `hello.gemspec`)

```
spec.files  = `git ls-files -Z`.split("\x0")
spec.bindir = 'bin'
spec.executables << 'hello' 
```

`spec.executables`视为`bin`二进制文件和可执行文件的默认文件夹，但您可以更改它。

您可以在此处找到相关文档：[Gemspec#executables](https://guides.rubygems.org/specification-reference/#executables)。

# ip - 了解访问网站的系统的 IP - Xampp

> ID：12989933
> 
> 赞同：0
> 
> 时间：2012-10-20T15:32:48.820
> 
> 标签：ip, xampp

Xampp 中有什么方法可以告诉我正在访问我的网站的 IP 吗？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:46:15.870

是的，您可以在 apache *access.log中找到它们*

# sql - sql server到ms access的查询转换

> ID：12989935
> 
> 赞同：0
> 
> 时间：2012-10-20T15:32:53.163
> 
> 标签：sql, sql-server, ms-access

在我的项目中，我必须将我的数据库从 SQL Server 2005 更改为 MS Access。但是某些查询无法与 MS Access 一起正常工作。任何人都可以将以下查询从 sql 转换为 MS Access

```
SELECT l.id,
        REPLACE(SUBSTRING(CONVERT(VARCHAR(20), l.app_date, 13), 1, 11), ' ', '/') AS app_date,
        l.reason,
        REPLACE(SUBSTRING(CONVERT(VARCHAR(20), l.fromdate, 13), 1, 11), ' ', '/') AS fromdate,
        REPLACE(SUBSTRING(CONVERT(VARCHAR(20), l.todate, 13), 1, 11), ' ', '/') AS todate,
        lt.LeaveDesc,
        l.noofdays,
        e.Abbv_name,
        e1.Abbv_name AS Expr1,
        l.Typeofleave AS Leave_ID
FROM leave AS l
INNER JOIN LeaveTypes AS lt
        ON l.Typeofleave = lt.TypeofLeave
LEFT JOIN Employee AS e1
        ON l.HRby = e1.Emp_id
LEFT JOIN Employee AS e
        ON l.approveby = e.Emp_id
WHERE l.submitby = 2
        AND submit = 'Y'
        AND approved IS NULL 
```

在上面的查询中，离开是我的数据库表。在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:57:30.343

`FROM`当您连接超过 2 个数据源时，Access 数据库引擎需要在子句中使用括号。在查询设计器的设计视图中构建您的联接。它将添加引擎要求的括号。在我的脑海中，我认为这个修改后的`FROM`条款可能会奏效：

```
FROM ((leave AS l
INNER JOIN LeaveTypes AS lt
        ON l.Typeofleave = lt.TypeofLeave)
LEFT JOIN Employee AS e1
        ON l.HRby = e1.Emp_id)
LEFT JOIN Employee AS e
        ON l.approveby = e.Emp_id 
```

如果`app_date`、`fromdate`和`todate`是日期/时间数据类型，则可以使用[Format()](http://office.microsoft.com/en-us/access-help/format-function-HA001228839.aspx)表达式将日期值作为格式化字符串返回。

```
SELECT Format(app_date, 'dd/mon/yyyy hh:nn:ss') 
```

# python - 如何让两个函数在 python 中并排工作？

> ID：12989937
> 
> 赞同：0
> 
> 时间：2012-10-20T15:33:09.850
> 
> 标签：python, python-3.x

我对 python 很陌生，正在我的学校上一门课程，我的作业是制作一个从 1 或 2 小时倒计时的时钟，并且始终显示分秒和小时。我开始编写代码并定义了 2 个函数，秒和分钟。秒从 60 秒开始倒计时，而分钟除了从 1 分钟开始倒计时，我分别尝试它们并且它们起作用，然后我将它们一起尝试并且我无法让它们并排工作。我怎样才能让他们这样做，我是否应该只使用一个倒计时的变量？任何帮助表示赞赏。

```
from time import *
def seconds():
    while 1==1:
        time_s = 60
        while time_s != 0:
            print (time_s)
            sleep(1)
            time_s=time_s-1

            os.system( [ 'clear', 'cls' ][ os.name == 'nt' ] )

def minutes():
    while 1==1:
        time_m = 60
        while time_m!= 0:
            print (time_m)
            sleep(60)
            time_m = time_m-1` 
```

此外，缩进可能会被弄乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:06:29.797

因为一分钟有六十秒。您不需要单独计算它们。只需计算总秒数并除以 60 以显示分钟，然后模 60 以显示秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:35:59.860

您想要的完整计划

```
 import threading
    import logging
    import time

    time_m=60
    time_s=60
    time_h=24

    print ('Karthick\'s death Clock Begins')

    def seconds():
       while 1==1:
          global time_s,time_m,time_h
          time_s = 60
          while time_s != 0:
              print (time_h,':',time_m,':',time_s)
              time.sleep(1)
              time_s=time_s-1

              os.system( [ 'clear', 'cls' ][ os.name == 'nt' ] )

    def minutes():
        while 1==1:
            global time_m
            time_m = 60
            while time_m!= 0:
                time.sleep(60)
                time_m = time_m-1

    def hours():
        while 1==1:
            global time_h
            time_h = 24
            while time_h!= 0:
                time.sleep(360)
                time_h = time_h-1

m=threading.Thread(name='minutes',target=minutes)
s=threading.Thread(name='seconds',target=seconds)
h=threading.Thread(name='hours',target=hours)

m.start()
s.start()
h.start() 
```

享受编程:-)！

# php - 日期时间格式插入数据库

> ID：12989938
> 
> 赞同：-1
> 
> 时间：2012-10-20T15:33:15.797
> 
> 标签：php, mysql

好的，这是我遇到的问题。

我将日期时间作为数据库中的一行，如何配置 php，以便它从 php 脚本将正确的日期时间插入数据库中，我目前似乎只能使用 vanchar(255)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:50:40.850

MySQL 的日期/时间格式是`yyyy-mm-dd mm:hh:ss`. 如果您以任何其他格式插入时间和/或日期值，它们很可能会被丢弃并设置为默认值。如果需要，您可以使用[str_to_date()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)等函数将不符合要求的字符串转换为原生 MySQL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:09:08.440

尝试这个...

```
<?php
function format_mysql_datetime($raw) {
        $format = '%Y-%m-%d %H:%M:%S';
        $stringtime =  strtotime($raw);
        return strftime($format, $stringtime);  
}

$raw = date('c');

$sql='insert into myTable (theDateTimeField)
values ('.format_mysql_datetime($raw).')';
mysql_query($sql);

?> 
```

如果您使用 date('c') 而不是 time()，则此方法有效。确保您设置了默认时区，否则它可能会显示错误的时间。请参阅[date_default_timezone_set。](http://php.net/manual/en/function.date-default-timezone-set.php)

请注意，您不应该使用 mysql_*。相反，请使用 PDO。您的代码容易受到 sql 注入的影响，您必须在任何时候在查询中使用外部输入时加以防范。我没有使用 PDO 写我的答案，因为我想强调如何处理日期，而不是让您与引入另一个新概念混淆。

另请查看这些文档：

*   [时间](http://us1.php.net/manual/en/function.strftime.php)
*   [日期时间格式](http://php.net/manual/en/datetime.format.php)

# c# - MVC WebAPI 参数加密

> ID：12989939
> 
> 赞同：0
> 
> 时间：2012-10-20T15:33:29.160
> 
> 标签：c#, asp.net-mvc-3, encryption, access-token

我试图弄清楚如何加密和解密 MVC3 WebAPI 的数据。情况是：我正在制作一个有用户注册的反馈应用程序，用户可以注册项目。必须将项目用作反馈外键（我的意思是必须将反馈分配给特定项目）。问题是：我应该如何加密项目 ID（它将是 GUID）并在服务器端解密它。我应该使用 MD5 + 盐吗？我应该用什么做盐？也许是时间戳，但我应该如何传递这个时间戳？嗯，不知道从哪里开始，该做什么。任何帮助，将不胜感激。注意：我不需要授权访问 API 方法，我需要传递秘密参数（作为密钥）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:11:28.393

可能你只需要一个 HTTPS 吗？正文和 HTTPS 中的参数。为什么要重新发明轮子？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T02:48:47.260

我编写了一个开源项目并在此处记录：[**构建一个 RESTful API**](http://blog.iteedee.com/2013/10/build-a-restful-api-share-it-with-the-world-part-2/)。也许这会让你朝着正确的方向前进。

此解决方案使用您的**API ID**、**API 机密**和 UNIX 时间戳的**MD5**哈希，并在 HTTP 标头中传递。正如**@Darin Dimitrov**所说，MD5 是一种单向哈希，但可以通过一些关于哈希和蛮力技术的知识来反转。那里有更好的选择，例如**AES**，但这很简单，也是入门的好方法。实际上，这种身份验证方法与[Mashery's Authentication](http://support.mashery.com/docs/read/mashery_api/20/Authentication)使用的身份验证方法相同。

 ******* * *

[**构建 RESTful API**](http://blog.iteedee.com/2013/10/build-a-restful-api-share-it-with-the-world-part-2/)参考并包含完整的入门工具包，用于创建具有**Auth**、 **Membership**和**API Usage Metering**以及支持 .NET EF 数据库的 API。

至于**测试**服务，您可以使用[RESTClient](https://addons.mozilla.org/En-us/firefox/addon/restclient/)来执行带有自定义标头的 HTTP 调用，而不是使用 Curl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:45:24.210

如果您不使用身份验证来调用 Web API 方法，则可以使用共享密钥密码来加密数据。[`AES`](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)是常用的对称密钥算法来加密/解密您可以使用的数据。这假设客户端和服务器必须共享一个公共秘密。

MD5 是一种散列（单向）算法。它不是加密算法。MD5 哈希的整个想法是它不能被反转。******

# objective-c - 向 MoviePlayer 添加自定义控件

> ID：12989940
> 
> 赞同：0
> 
> 时间：2012-10-20T15:33:34.860
> 
> 标签：objective-c, ios

我需要向 MoviePlayer 添加一个共享按钮，当触摸屏幕时，它会同时出现和消失，就像使用原生控件一样。

我找到了这个解决方案：

[在 iPhone 3.0 SDK 中为 MoviePlayer 添加自定义控件](https://stackoverflow.com/questions/1240524/add-custom-controls-to-movieplayer-in-iphone-3-0-sdk?lq=1)

但是 _overlayView 属性无法被 IOS5 识别。是否可以使用当前的 SDK 来实现？

谢谢。

# programming-languages - Inno Setup - 更改 MessageBox 语言

> ID：12989941
> 
> 赞同：4
> 
> 时间：2012-10-20T15:33:41.060
> 
> 标签：programming-languages, message, inno-setup

我有这个问题...我做了一个个人消息框...我以一种非常有趣的方式输入了英语和西班牙语...但我希望我的安装程序只显示一种语言...就像...当我在菜单选择器西班牙语...在该消息框中显示西班牙语...如果在菜单选择器中选择意大利语...让该消息框显示意大利语。

```
[code]
function NextButtonClick1(PageId: Integer): Boolean;
begin
    Result := True;
    if (PageId = wpSelectDir) and not FileExists(ExpandConstant('{app}\xxx.exe')) then begin
        MsgBox('"Thi App" does not seem to be installed in that folder.  Please select the correct folder. [Selecciona la Carpeta de Instalación de la Aplicación]', mbError, MB_OK);
        Result := False;
        exit;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T15:49:41.503

使用该[`[CustomMessages]`](http://jrsoftware.org/ishelp/topic_custommessagessection.htm)部分并在其中的*消息*名称前加上语言的内部名称，如以下脚本所示：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Languages]
Name: en; MessagesFile: "compiler:Default.isl"
Name: es; MessagesFile: "compiler:Languages\Spanish.isl"

[CustomMessages]
en.AppCheckError=Select the application folder!
es.AppCheckError=Selecciona la Carpeta de Instalación de la Aplicación!

[Code]
procedure InitializeWizard;
begin
  MsgBox(ExpandConstant('{cm:AppCheckError}'), mbInformation, MB_OK);
end; 
```

# css - Div 不会随内容扩展

> ID：12989942
> 
> 赞同：1
> 
> 时间：2012-10-20T15:33:41.903
> 
> 标签：css, html, overflow

我已经搜索了这个网站，找不到解决我问题的方法。首先，这是我的问题的图像。（带有“sssss”的 div 应该垂直扩展）。所以 div 的内容在碰到边界时应该转到下一行。非常感谢任何建议。

[图片](http://i.imgur.com/aDH9U.png)

这是我的代码。

HTML

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"           "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Title</title>
    <LINK rel=StyleSheet href="styles/StyleSheet.css" type="text/css" media=screen>
</head>
<body>
    <form id="Form1">
    <div id="header">
        <div id="header-center">
            <div id="logo">Logo</div>

            <div id="search-user">
                <form action="" id="SearchUser">
                    Search User: <asp:TextBox ID="TextBox1" runat="server">           </asp:TextBox>
                </form>
            </div>
        </div>

        <div id="nav-menu">
            <ul>
                <li><a href="#">Account</a></li>
                <li><a href="#">Burndown Chart</a></li>
                <li><a href="#">Projects</a></li>
                <li><a href="#">Reports</a></li>
                <li><a href="#">Extra</a></li>
                <li><a href="#">Extra</a></li>
            </ul>
        </div>
    </div>

    <div id="wrapper">sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss</div>

   </form>
</body>
</html> 
```

CSS

```
html, body
{
padding: 0px;
margin: 0px;
text-align: center;
background-color: #f3f4f9; 
font-family: Verdana;
border: 0px;
}

#header 
{
width: 100%;
background-color: #0066CC;
}

#header-center 
{
margin: 0 auto;  
width: 800px;
height: 80px;
}

#logo 
{
float: left;
margin-top: 13px;
height: 50px;
font-size: 40px;
color: White;
font-weight: bold;
}

#search-user 
{
float: right;
color: White;
font-size: 11px;
font-weight: bold;
margin-top: 25px;
}

#nav-menu 
{
width: 100%;
margin: 0 auto;
border-top: 1px solid #003366;
clear: both;
}

#nav-menu ul
{
list-style-type:none;
margin:0;
padding:0;
height: 48px;
background-image: url(../images/menu-ul-bg.png);
}

#nav-menu ul li
{
display:inline;
line-height: 50px;
}

#nav-menu ul li a
{
padding: 0px 40px 0px 40px;
text-decoration: none;
color: Black;
font-size: 14px;
}

#nav-menu ul li a:hover
{
color: White;
}

#wrapper 
{
margin: 0 auto;
width: 200px;
border: 1px solid black;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:51:31.627

这是因为您有一个长字符串，浏览器不会自行中断。如果您使用 CSS3 **[word-break](http://jsfiddle.net/j08691/RWTZ9/)**或**word-wrap**属性将其分解为[**更小的单词**](http://jsfiddle.net/j08691/RWTZ9/1/)，高度将自动调整。

 **前任：`word-break:break-all;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:50:19.673

您需要添加到您的#wrapper 样式：

```
word-wrap: break-word; 
```

这将阻止像'ssssssssssssssssssssss'这样的长词，并使其沿着divs宽度。**

# sql - SQL：加入“接近”匹配

> ID：12989945
> 
> 赞同：3
> 
> 时间：2012-10-20T15:33:49.347
> 
> 标签：sql, join

我需要使用“近匹配”进行 JOIN。解释这一点的最好方法是举个例子：

```
CREATE TABLE Car
 (
 Vin int,
 Make nvarchar(50),
 ColorID int,
 )

CREATE TABLE Color
 (
 ColorID int,
 ColorCode nvarchar(10)
 )

CREATE TABLE ColorName
 (
 ColorID int,
 Languagecode varchar(12),
 ColorName nvarchar(50)
 )

INSERT INTO Color Values (1, 'RED CODE')
INSERT INTO Color Values (2, 'GREEN CODE')
INSERT INTO Color Values (3, 'BLUE CODE')

INSERT INTO ColorName Values (1, 'en', 'Red')
INSERT INTO ColorName Values (1, 'en-US', 'Red, my friend')
INSERT INTO ColorName Values (1, 'en-GB', 'Red, my dear')
INSERT INTO ColorName Values (1, 'en-AU', 'Red, mate')
INSERT INTO ColorName Values (1, 'fr', 'Rouge')
INSERT INTO ColorName Values (1, 'fr-BE', 'Rouge, mon ami')
INSERT INTO ColorName Values (1, 'fr-CA', 'Rouge, mon chum')

INSERT INTO Car Values (123, 'Honda', 1) 
```

SPROC 看起来像这样：

```
DECLARE @LanguageCode varchar(12) = 'en-US'

SELECT * FROM Car A
JOIN Color B ON (A.ColorID = B.ColorID)
LEFT JOIN ColorName C ON (B.ColorID = C.ColorID AND C.LanguageCode = @LanguageCode) 
```

请参阅[http://sqlfiddle.com/#!6/ac24d/24](http://sqlfiddle.com/#!6/ac24d/24)（感谢杰克！）

这是挑战：当 SPROC 参数 @LanguageCode 完全匹配时，一切都很好。

我希望它也适用于部分匹配；更具体地说：例如说@LanguageCode 将是“en-NZ”，那么我希望 SPROC 返回语言代码“en”的值（因为“en-NZ”没有值）。

作为一个额外的挑战：如果根本没有匹配，我想返回“en”值；例如，如果@LanguageCode 为“es”，则 SPROC 将返回“en”值（因为“es”没有值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:41:23.503

尝试`left(@LanguageCode, 2) + '%'`

[http://sqlfiddle.com/#!6/ac24d/26](http://sqlfiddle.com/#!6/ac24d/26)

关于第二部分-无论如何您都必须查询表两次（您可以在一个语句中执行此操作，但如果将像两个语句合二为一）。您还可以将数据插入临时（或变量）表中，检查是否没有行，然后进行另一个查询

我用表函数进行了查询

[http://sqlfiddle.com/#!6/b7be3/5](http://sqlfiddle.com/#!6/b7be3/5)

所以你可以写

```
DECLARE @LanguageCode varchar(12) = 'es'

if not exists (select * from sf_test(@LanguageCode))
    select * from sf_test('en')
else 
    select * from sf_test(@LanguageCode) 
```

你也可以写

```
declare @temp table
(
    Vin int,
    Make nvarchar(50),
    ColorCode nvarchar(10)
)

insert into @temp
select * from sf_test(@LanguageCode)

if not exists (select * from @temp)
    select * from sf_test('en')
else 
    select * from @temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:30:25.423

正如@Roman Pekar 在[他的评论](https://stackoverflow.com/questions/12989945/sql-join-with-near-match#comment17624761_12990016)中所说，这确实可以`en`在排名功能的帮助下在一个声明中完成，包括您关于回退到的附加请求。您可以这样做：

```
WITH FilteredAndRanked AS (
  SELECT
    *,
    rnk = ROW_NUMBER() OVER (
      PARTITION BY ColorID
      ORDER BY CASE LanguageCode
        WHEN @LanguageCode          THEN 1
        WHEN LEFT(@LanguageCode, 2) THEN 2
        WHEN 'en'                   THEN 3
      END
    )
  FROM ColorName
  WHERE LanguageCode IN (
    @LanguageCode,
    LEFT(@LanguageCode, 2),
    'en'
  )
)
SELECT
  ...
FROM       Car               A
INNER JOIN Color             B ON (A.ColorID = B.ColorID)
LEFT  JOIN FilteredAndRanked C ON (B.ColorID = C.ColorID AND C.rnk = 1) 
```

;

也就是`ColorName`在查询中使用表之前先对表进行过滤和排序，然后只`1`加入排序为 的行：

1.  的过滤器`ColorName`仅包括`LanguageCode`值为`@LanguageCode`、`LEFT(@LanguageCode, 2)`和的行`'en'`。

2.  排名值是根据每行包含的语言代码分配的：具有的行在具有的行之后但在具有的行之前`LEFT(@LanguageCode, 2)`排名。`@LanguageCode``'en'`

# java - 从其他类的哈希集中填充哈希映射

> ID：12989950
> 
> 赞同：-2
> 
> 时间：2012-10-20T15:34:16.063
> 
> 标签：java, hashmap, hashset

我在一个名为 myClass 的类中有一个哈希集，其中包含 6 个字符串。

我希望能够创建一个 hashmap 并将这 6 个字符串用作另一个名为 Maps 的类中的键，并且它们旁边的值。

我如何从地图类中调用哈希图并使用 myClass 中哈希集中的 6 个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:17:09.520

```
public class MyFavouriteClasses { 
    Set<String> classes; 
    public MyFavouriteClasses() { } 
    public Set populate() { 
        Set<String> classes = new HashSet<String>(); 
        classes = new HashSet<String>(); 
        classes.add("ArrayList"); 
        classes.add("Hashset"); 
        classes.add("Random"); 
        classes.add("AbstractList"); 
        return classes;
    }
}

public class MyFavoriteMapClass {
    Map<String, String> map; 
    public MyFavoriteMapClass() { } 
    public void populate() { 
        MyFavouriteClasses class = new MyFavouriteClasses();
        map = new HashMap<String, String>();
        Set<String> classes = class.populate(); 
        for(String str:classes) {
          map.put(String, (Class)str.getPackage());
        }
    } 
} 
```

# c# - 从文本框尝试解析十进制转换时出错

> ID：12989953
> 
> 赞同：0
> 
> 时间：2012-10-20T15:34:52.610
> 
> 标签：c#, textbox, decimal, tryparse

当我从 XML 文件中读取时，我像这样读取它并且它可以工作，

```
decimal checkkkk = Config.Location.test.Longitude;
textBox3.Text = checkkkk.ToString(CultureInfo.InvariantCulture); 
```

我想将它写回同一个 XML 文件，此时我遇到了错误..！

```
decimal value;
Configs.Location.test.Longitude = 
decimal.TryParse(textBox3.Text, NumberStyles.Any, CultureInfo.InvariantCulture.NumberFormat, out value); 
```

错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:40:27.813

方法*Decimal.TryParse*返回布尔数据类型而不是十进制。

> ***[Decimal.TryParse](http://msdn.microsoft.com/en-us/library/ew0seb73.aspx)***，使用指定的样式和特定于文化的格式将数字的字符串表示形式转换为其 Decimal 等效项。返回值指示转换是成功还是失败。

尝试这样做：

```
decimal value;
if (decimal.TryParse(textBox3.Text, NumberStyles.Any, CultureInfo.InvariantCulture.NumberFormat, out value)) 
{
     rseConfigs.RseLocation.GpsCoordinates.Longitude = value;
} 
```

# python - 如何在 gae 的子文件夹中使用脚本？

> ID：12989956
> 
> 赞同：2
> 
> 时间：2012-10-20T15:35:12.770
> 
> 标签：python, google-app-engine

当我要为我的应用程序编写一个子模块时，我想把所有的东西放在一个子文件夹中，比如`/foo`，我给脚本命名`foo.py`，里面有一个

`app = webapp2.WSGIApplication([('/foo/', Index)])`

然后到了

```
Fatal error when loading application configuration:
threadsafe cannot be enabled with CGI handler: foo/foo.app
  in "/home/***/workspace/***/app.yaml", line 23, column 20 
```

然后我将它设置为false，它变成错误500

```
ImportError: Could not find module foo.foo.app 
```

我`app.yaml`的就像

```
application: ***
version: alpha
runtime: python27
api_version: 1
threadsafe: false

handlers:
- url: /static
  static_dir: static

- url: /admin.*
  script: admin.app
  login: admin

- url: /foo
  script: foo/foo.app

- url: /.*
  script: index.app 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T06:59:34.057

最后我像这样解决了：

1.  加入`__init__.py`文件夹`foo/`，留空。
2.  更改`foo/foo.app`为`foo.foo.app`

它似乎与它无关`threadsafe`，我将其更改为`true`并且它仍在工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T17:07:50.713

foo 文件夹必须是 python 包才能工作。因此，只需在其中添加一个`__init__.py`就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:31:54.143

为了在 python 中将您的文件夹标记为一个包，您唯一需要做的就是`__init__.py`在该文件夹中创建一个空文件（注意 init 两侧的两个下划线）。

然后为了使用另一个文件中的代码，您必须导入相关文件。

`import foo`其中 foo 代表文件夹中的文件名 (foo.py)

# mysql - 使用主键创建表，然后将数据插入其中

> ID：12989958
> 
> 赞同：0
> 
> 时间：2012-10-20T15:35:31.610
> 
> 标签：mysql

我执行这个语句：

```
CREATE TABLE test_mod SELECT * FROM `test` 
```

这将一个表复制到新创建的表中。然后我执行了这个：

```
INSERT INTO test_mod(`test_name`) SELECT `test_name` FROM test 
```

该语句应该已将更多数据插入到新创建的表中。它这样做了，但是主键都是0？！？！

我执行了这个语句：

```
ALTER TABLE test_mod MODIFY test_id INT UNSIGNED NOT NULL AUTO_INCREMENT 
```

phpmyadmin 告诉我 test_id 列已经有一个 auto_increment 属性.. 那么如何在具有自动增量功能的同时填充更多数据呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:39:12.263

尝试

```
CREATE TABLE test_mod LIKE test;
INSERT INTO test_mod SELECT * FROM test; 
```

这将从“test”复制表定义并将其中的所有数据插入“test_mod”。

# css - 将图像缩放到屏幕尺寸 sencha touch2

> ID：12989959
> 
> 赞同：0
> 
> 时间：2012-10-20T15:35:35.903
> 
> 标签：css, sencha-touch-2, image-scaling

这是我的代码： 代码：

```
 {                xtype: 'tabpanel',
                docked: 'top',
                height: 752,
                width: '100%',
                activeItem: 1,
                items: [
                    {
                        xtype: 'container',
                        title: 'MyCar',
                        items: [
                            {
                                xtype: 'container',
                                maxWidth: '100%',
                                width: '100%',
                                items: [
                                    {
                                        xtype: 'image',
                                        docked: 'top',
                                        height: 407,
                                        html: '',
                                        id: 'imgCar',
                                        padding: '0 0 0 510',
                                        style: 'margin: 0px auto; width: 50%;background-size: auto;',
                                        src: 'http://localhost/car.jpg'
                                    }
                                ]
                            },
                            {
                                xtype: 'dataview',
                                height: 297,
                                html: '  <table id="tableConsumptions">     <tr>        <td id="consumptionsCol">val</td></tr> </table>',
                                width: '100%',
                                itemTpl: [
                                    ''
                                ]
                            }
                        ]
                    },
                    { 
```

我有一个图像容器，我想将图像尺寸调整为屏幕尺寸，并对其进行缩放。这怎么可能？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:17:54.780

您可以尝试使用此函数来获取视口的高度和宽度。

```
Ext.viewport.getWindowHeight( );
Ext.viewport.getWindowWidth( ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T07:34:35.503

对于那些可能偶然发现的人......最重要的是图像组件的父容器需要“适合”（卡片也可能这样做），我们将图像组件的背景大小样式设置为 100%（对于宽度和高度）

```
{               
    xtype: 'tabpanel',
    docked: 'top',
    height: 752,
    width: '100%',
    activeItem: 1,
    items: [
        {
            xtype: 'container',
            title: 'MyCar',
            items: [
                {
                    xtype: 'container',
                    layout: 'fit', //supposedly when we want our image to be the same size as its container without specifying width and height, we use this and set the background-size style of the image to 100% (for both width and height)
                    maxWidth: '100%',
                    width: '100%',
                    items: [
                        {
                            xtype: 'image',
                            docked: 'top',
                            height: 407,
                            html: '',
                            id: 'imgCar',
                            style: 'background-size: 100% 100% !important;', //the most important key is backgeound-size styling for the image as it will be set as background of a div (unless we use mode: 'img' config)
                            src: 'http://localhost/car.jpg'
                        }
                    ]
                },
                {
                    xtype: 'dataview',
                    height: 297,
                    html: '  <table id="tableConsumptions">     <tr>        <td id="consumptionsCol">val</td></tr> </table>',
                    width: '100%',
                    itemTpl: [
                        ''
                    ]
                }
            ]
        }
    ]
} 
```

# cross-browser - CSS中的渐变

> ID：12989961
> 
> 赞同：3
> 
> 时间：2012-10-20T15:35:46.290
> 
> 标签：cross-browser, standards-compliance, css

我为我的 .html 页面添加了渐变背景。似乎可以在大多数浏览器中使用，但我想知道它是否是标准的并符合所有规则。

.css

```
html {
  /* fallback  */
  background-color: #65a5d1;

  /* Safari 4-5, Chrome 1-9 */
  background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#fff), to(#65a5d1));

  /* Safari 5.1, Chrome 10+ */
  background: -webkit-linear-gradient(top, #fff, #65a5d1);

  /* Firefox 3.6+ */
  background: -moz-linear-gradient(top, #fff, #65a5d1);

  /* IE 10 */
  background: -ms-linear-gradient(top, #fff, #65a5d1);

  /* Opera 11.10+ */
  background: -o-linear-gradient(top, #fff, #65a5d1);

  height: 900px;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:54:45.273

如果你想生成完全兼容的渐变，你可以查看[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)：

这是它生成的输出：

```
/* Old browsers */
background: #1e5799;

/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMWU1Nzk5IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjMjk4OWQ4IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iNTElIiBzdG9wLWNvbG9yPSIjMjA3Y2NhIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzdkYjllOCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);

/* FF3.6+ */
background: -moz-linear-gradient(45deg,  #1e5799 0%, #2989d8 50%, #207cca 51%, #7db9e8 100%);

/* Chrome, Safari4+ */
background: -webkit-gradient(linear, left bottom, right top, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8));

/* Chrome10+,Safari5.1+ */
background: -webkit-linear-gradient(45deg,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%);

/* Opera 11.10+ */
background: -o-linear-gradient(45deg,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%);

/* IE10+ */
background: -ms-linear-gradient(45deg,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%);

/* W3C */
background: linear-gradient(45deg,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%);

/* IE6-8 fallback on horizontal gradient */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=1 ); 
```

如您所见，它会生成更多属性以涵盖更多情况。

* * *

如果你想支持 IE 9，你必须遵循这个......是的，我知道这很糟糕，但是......

使用 IE9 支持完整的多级渐变（使用 SVG）：

为所有具有渐变的元素添加一个“渐变”类，并将以下覆盖添加到您的 HTML 以完成对 IE9 的支持：

```
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]--> 
```

# javascript - 0x0F 是什么意思？这段代码是什么意思？

> ID：12989969
> 
> 赞同：8
> 
> 时间：2012-10-20T15:36:22.567
> 
> 标签：javascript

我有这个代码。请让我明白这段代码的实际含义

```
 for(var i = 0; i < input.length; i++)
  {
    x = input.charCodeAt(i);
    output += hex_tab.charAt((x >>> 4) & 0x0F)
           +  hex_tab.charAt( x        & 0x0F);
  } 
```

什么是 0x0F？而且，>>> 是什么意思？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-20T15:40:23.033

`>>>`是无符号按位右移运算符。`0x0F`是一个十六进制数，等于十进制的 15。它代表低四位并转换位模式`0000 1111`。`&`是按位`AND`运算。

`(x >>> 4) & 0x0F`给你一个字节的高半字节。所以如果你有`6A`，你基本上会得到`06`：

```
6A = ((0110 1010 >>> 4) & 0x0F) = (0000 0110 & 0x0F) = (0000 0110 & 0000 1111) = 0000 0110 = 06 
```

`x & 0x0F`给你字节的低半字节。所以如果你有`6A`，你最终会得到`0A`.

```
6A = (0110 1010 & 0x0F) = (0110 1010 & 0000 1111) = 0000 1010 = 0A 
```

据我所知，它看起来像是在总结字符串中所有字符的各个半字节的值，也许是为了创建某种校验和。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T15:42:32.390

`0x0f`是字节的十六进制表示。具体来说，位模式`00001111`

它获取字符的值，将其向右移动 4 位（`>>> 4`，这是一个[无符号移位](http://www.java-samples.com/showtutorial.php?tutorialid=60)），然后`AND`使用上面的模式按位执行 - 例如，忽略最左边的 4 位导致数字 0-15。

然后它将该数字添加到原始字符最右边的 4 位（第二位`& 0x0F`没有移位），另一个 0-15 数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T15:39:41.460

`0x0F`是一个十六进制数。And`>>>`是按位右移运算符。

# java - 如何将 JFrame 添加到我的程序中

> ID：12989977
> 
> 赞同：0
> 
> 时间：2012-10-20T15:37:45.713
> 
> 标签：java, swing, textarea, awt, mixing

我已经创建了一个 GUIPanel，但是我需要将它添加到我拥有的程序中；当我尝试从主类中运行其他程序时，GUIPanel 不会运行，但是当我不执行它时它会运行（如果这有任何意义的话）。

![这就是我运行程序时发生的事情](../Images/34e1d3c7b651036aca4de57ba17235b0.png) 这就是我运行程序时发生的事情

![这是我希望输出打印到的 GUIPanel](../Images/c5da680ad4b6df7b5676551eff340119.png)

我希望输出打印到这个 GUIPanel（我必须删除对 TourServer 的调用才能让它运行），如果你在想“为什么不把它留在命令提示符下，你的 GUIPanel 中没有任何东西除了文本区域之外？”，那是因为我打算稍后添加更多内容：D

总之：我需要从 GUIPanel 类运行 TourServer 程序，当我尝试它时，它不会打开 GUI 面板本身

这是主要课程：

```
import java.net.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.awt.*;
import javax.swing.*;
import java.io.*;

/**
 *
 * @author Dan
 */
public class GUIPanel extends JFrame {
    private PrintStream outStream;
    /**
     * Creates new form GUIPanel
     */
    public GUIPanel() {
        initComponents();
    }
    private void init() throws IOException {
        jTabbedPane1.add("Main", jPanel);
        jPanel.add(textArea1);
        setOutputStream();
        TourServer.init(cmd);//Calling the program, I'm assuming I might be doing this wrong.
    }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {

        textArea1 = new java.awt.TextArea();
        jPanel = new javax.swing.JPanel();
        jTabbedPane1 = new javax.swing.JTabbedPane();

        textArea1.setPreferredSize(new java.awt.Dimension(432, 300));

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Game Manager");
        setBounds(new java.awt.Rectangle(0, 0, 400, 450));
        setPreferredSize(new java.awt.Dimension(450, 420));
        getContentPane().setLayout(new java.awt.FlowLayout());

        try {
            init();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        jTabbedPane1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jTabbedPane1.setFocusable(false);
        jTabbedPane1.setOpaque(true);
        getContentPane().add(jTabbedPane1);
        jTabbedPane1.getAccessibleContext().setAccessibleName("");

        pack();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
    cmd = args;
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {  java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GUIPanel().setVisible(true);
            }
        });
    }

    private static String[] cmd;
    private javax.swing.JPanel jPanel;
    private javax.swing.JTabbedPane jTabbedPane1;
    private java.awt.TextArea textArea1;

      //Written by MadProgrammer
        public class CapturePane extends JPanel implements Consumer {

        private TextArea output;

        public CapturePane() {
            jPanel.setLayout(new BorderLayout());
            jPanel.add(new JScrollPane(output));
        }

        @Override
        public void appendText(final String text) {
            if (EventQueue.isDispatchThread()) {
                output.append(text);
                output.setCaretPosition(output.getText().length());
            } else {

                EventQueue.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        appendText(text);
                    }
                });

            }        
    }
 }

    public interface Consumer {        
        public void appendText(String text);        
    }

    public class StreamCapturer extends OutputStream {

        private StringBuilder buffer;

        public StreamCapturer() {
            buffer = new StringBuilder(128);
            buffer.append("");
        }

        @Override
        public void write(int b) throws IOException {
            char c = (char) b;
            String value = Character.toString(c);
            buffer.append(value);
            if (value.equals("\n")) {
                textArea1.appendText(buffer.toString());
                buffer.delete(0, buffer.length());
            }
        }        
    }  

} 
```

这是 TourServer 类

```
 // TourServer.java
 /*
   The top-level Tour server, which waits for client connections
   and creates TourServerHandler threads to handle them.

   Details about each client are maintained in a TourGroup object
   which is referenced by each thread.

   Very similar to the multithreaded Chat server.
*/

import java.net.*;
import java.io.*;

public class TourServer
{
  static int PORT = 0;

  private TourGroup tg;
  static GameSession gameSession=new GameSession();
  public TourServer()
  // wait for a client connection, spawn a thread, repeat
  {
    tg = new TourGroup();
    try {
      ServerSocket serverSock = new ServerSocket(PORT);
      Socket clientSock;

      while (true) {
        new GUIPanel("Waiting for a client...");
        clientSock = serverSock.accept();
        new TourServerHandler(clientSock, tg).start();
      }
    }
    catch(Exception e)
    {  e.printStackTrace(); }
  }  // end of TourServer()

  // -----------------------------------

  public static void init(String args[]) {
      if (Integer.parseInt(args[0]) > 0) {
        PORT = Integer.parseInt(args[0]);
      } else {
          PORT = 5550;
      }
        new GUIPanel("Port set to: "+PORT);
        new TourServer();
    }
} // end of TourServer class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:22:31.873

你的 GUI 类中有这个构造函数：

```
public GUIPanel() {
        initComponents();
    } 
```

在您的 init 函数之后添加这 3 个函数：

```
public GUIPanel() {
        initComponents();
        validate();
        pack();
        show();
    } 
```

我确定窗口会在之后出现。不要停在这一点上，而是尝试改进这个解决方案，因为如果我没记错的话，这些功能中至少有一个已被弃用。对此很抱歉，但自 Java 1.4 以来我还没有真正使用过 Swing。

# vb.net - 在文本文件的 ReadLine 之间等待 X 秒

> ID：12989979
> 
> 赞同：2
> 
> 时间：2012-10-20T15:38:14.053
> 
> 标签：vb.net, sleep, wait

我想要的是应用程序从文本文件中读取第一行并将其输出到 textReply 文本框，然后在读取和输出下一行之前等待 X 时间。

```
Dim fileIn As New System.IO.StreamReader("C:\test.txt")
Dim strData As String = ""
While (Not (fileIn.EndOfStream))
    strData = fileIn.ReadLine()
    textReply.Text = textReply.Text & strData & vbCr
    System.Threading.Thread.Sleep(1000)
End While 
```

正如你所看到的，我尝试过休眠线程（不理想，因为我希望应用程序保持响应，但那是另一回事！）但每次它读取整个文件并将大量转储到文本框中。

原因是最终它将用于与设备的串行连接，这需要时间将数据传输到设备并让设备响应发送的每条线路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:12:53.243

您可以创建一个字符串[队列](http://msdn.microsoft.com/en-us/library/055sfc3z.aspx)，在读取文件时将每一行添加到列表中，然后您可以使用计时器对其进行轮询并将它们一次添加到您的文本框中。

```
Public Class Form1
    Dim myQueue As Queue(Of String) = New Queue(Of String)

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim fileIn As New System.IO.StreamReader("C:\test.txt")
        Timer1.Start()
        Dim strData As String = ""
        While (Not (fileIn.EndOfStream))
            strData = fileIn.ReadLine()
            myQueue.Enqueue(strData)
        End While
    End Sub

    Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
        If myQueue.Count > 0 Then
            textReply.Text += myQueue.Dequeue & vbCrLf
        End If
    End Sub
End Class 
```

# php - 将 phpcassa 用于 cassandra 和 yiiframework

> ID：12989980
> 
> 赞同：1
> 
> 时间：2012-10-20T15:38:19.750
> 
> 标签：php, pdo, yii, cassandra, phpcassa

有谁知道如何使用`phpcassa`for `cassandra`with `Yiiframework`？

我试过了`Cassandra PDO`。它工作得很好，但我碰巧喜欢这种`phpcassa`工作方式。特别是对大多数`cassandra`功能的支持。

我不知道，但我发现`phpcassa`使用起来更容易。

有什么建议么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T20:06:33.703

我今天为 cassandra-cql3 编写了一个 Yii 扩展，希望这可以帮助其他人搜索 cassandra CQL3 的 yii 包装器

[https://github.com/masumsoft/yii-cassandra-cql3](https://github.com/masumsoft/yii-cassandra-cql3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:00:06.540

我对 Yii 不是特别熟悉，但是看了一眼之后，我怀疑你将无法直接使用大部分 Yii 的 ORM 类功能，无论是通过 phpcassa 还是 PDO 驱动程序。当然它可以在某些情况下工作，但一般来说，Cassandra 中的数据不是围绕对象建模的，而是围绕查询建模的。您的目标是以这样一种方式布置您的数据，以便您可以非常有效地回答您计划的查询。因为 Yii 是面向对象的，所以它期望您与数据库交互的方式存在根本的不匹配。

# c++ - 如何在 Visual Studio C++ 2012 中创建文件夹

> ID：12989981
> 
> 赞同：18
> 
> 时间：2012-10-20T15:38:20.153
> 
> 标签：c++, visual-studio-2012, project, directory

我已经使用 C++ 中的 Visual Studio 2012 开始了我的第一个更大的项目。我将在文件夹中构建我的源文件，但我找不到可以在哪里创建真正的文件夹，就像在 Windows 资源管理器中一样。所以这是我的问题。

如何在我的项目中创建真正的文件夹？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-20T16:25:04.250

IDE 有一个命令，“新建文件夹”。它甚至出现在 Project + Add 上下文菜单中，当您使用 Tools + Customize 查看上下文菜单时可以看到。然而，它隐藏在 C++ IDE 中。故意地。

了解它为什么被隐藏很重要。它让您远离麻烦，当您使用资源管理器创建文件夹时会遇到这种麻烦。

问题在于 C++ 文件的构建方式。当编译器完成它们时，它们会生成一个 .obj 文件。该 obj 文件存储在名称为项目设置的目录中。您可以通过 Project + Properties、General、Intermediate Directory 设置看到它。对于单个 .cpp 文件，它是 C/C++、输出文件、目标文件名。该默认设置是`$(IntDir)`一个宏，它告诉编译器使用中间目录设置。使用默认设置，Debug 构建的所有 .obj 文件最终都位于 Debug 子目录中。发布版本的发布子目录。无论 .cpp 存储在何处。

也许你现在看到了熊陷阱。如果您使用 .cpp 文件创建子目录，那么当该子目录中的 .cpp 文件与另一个子目录中的另一个 .cpp 文件名称相同时，您将遇到麻烦。他们生成一个同名的 .obj 文件。一个覆盖另一个，后者是最后编译的。这会产生**非常**神秘的链接器错误。您将收到重复的符号错误，因为最后构建的 .obj 文件链接了两次，并且覆盖的 .obj 文件缺少符号错误。

所以继续创建一个子目录，但要注意这个问题。如果发生这种冲突，您必须更改 .cpp 文件的对象文件名设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:55:36.397

这有点烦人，但是，这是可以做的：

在 Visual Studio 中创建新文件夹。这不会在文件系统中创建新文件夹。将新项目添加到文件夹。为项目选择正确的目录。

例如，如果您的项目位于 %Documents%\Project，并且您的新文件夹名称为 Folder，那么您将在 %Documents%\Project\Folder 的文件夹中添加一个新项目。

Visual Studio 2012 会将项目放在您想要的文件夹中。如果您添加一个新项目，它将默认为同一个文件夹。这就是烦人的部分。如果您为所有项目项目创建 3 个文件夹并尝试向每个文件夹添加一个新项目，Visual Studio 将尝试将所有 3 个项目放在文件系统中的同一位置（最后一个文件夹中添加了新项目），同时将项目放入正确的 Visual Studio 文件夹中。

Visual Studio 中可能有此设置。我还没有找到它。我也没有那么认真。

# node.js - Node.js - 简单的 Restify POST Mocha 测试失败

> ID：12989982
> 
> 赞同：1
> 
> 时间：2012-10-20T15:38:25.957
> 
> 标签：node.js, http-post, mocha.js, restify

我有一个简单的 Node.js Rest 服务器和一个使用 Restify 的 POST 服务。我正在尝试编写一个简单的 Mocha 测试，但是它因超时而失败，尽管通过 REST 控制台测试（浏览器插件）成功。

我的服务器代码：

```
/**
 * Module dependencies
 */

var restify = require('restify');
var events = require('events');
var util = require('util');

/**
 * Create App
 */

var server = restify.createServer({
  name: 'test',
    version: '0.0.1'
    });

var eventsEmitter = new events.EventEmitter();

/**
 * Configuraion
 */

server.use(restify.acceptParser(server.acceptable));
server.use(restify.queryParser());
server.use(restify.bodyParser());

/**
 * Routes
 */

server.post('/post', function (req, res, next) {
  var text = "";
  req.setEncoding("utf8");

  req.on("data", function (chunk) {
    text += chunk;
  });
  req.on("end", function () {
    res.send(200, {ok: 'ok'});   
  });

  return next();
});

/**
 * Listen
 */ 

server.listen(8080, function () {
  console.log('%s listening at %s', server.name, server.url);
}); 
```

摩卡测试如下：

```
var restify = require('restify');
var assert = require('assert');

// init the test client
var client = restify.createJsonClient({
  url: 'http://127.0.0.1:8080',
  version: '*'
});

describe('service: post endpoint', function() {

// Test #1
describe('200 response check', function() {
    it('should get a 200 response', function(done) {
        client.post('/post', { hello: 'world' }, function(err, req, res, data) {                
            if (err) {
                throw new Error(err);
            }
            else {

                if (data.code != 200) {
                    throw new Error('invalid response from /post');
                }
                done();
            }
        });
    });
});

}); 
```

谁能告诉我为什么测试会超时（我已经在摩卡中测试过增加超时），但是通过浏览器成功了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:51:22.427

问题是当请求完成时 Restify 会调用你的`server.post('/post', handler)`函数。您不必等待`data`and`end`事件。这是 Restify（以及其他类似的库，例如 Express）为您做的事情。所以你需要做的就是写

```
server.post('/post', function (req, res, next) {
    res.send(200, {ok: 'ok'});
}); 
```

然后你不应该有超时。您正在超时，因为您的处理程序正在等待*已经*发生的事件。

# c++ - 带有布尔参数和 SWIG python 的 C++ 函数

> ID：12989983
> 
> 赞同：1
> 
> 时间：2012-10-20T15:38:26.817
> 
> 标签：c++, python, types, swig

假设我有以下 SWIG 接口文件

```
%include "std_string.i"

%module Test %{
    std::string AmIABoolean(bool b)
    {
        return b ? "Sure" : "Yes I am";
    }
%}

std::string AmIABoolean(bool b); 
```

当从 Python 与此模块交互时，这在实际传递布尔值时效果很好。

```
>>> Test.AmIABoolean(False)
"Yes I am"
>>> Test.AmIABoolean(True)
'Sure' 
```

但令我惊讶（和沮丧）SWIG 接受此特定测试函数的任何参数

```
>>> Test.AmIABoolean([])
"Yes I am"
>>> Test.AmIABoolean("Free beer")
'Sure' 
```

有没有办法以 SWIG 将 C++ 匹配到 python 方法的方式强制执行更严格的类型检查？显然，这个示例不是很有意义，但是如果我有一个具有多个重载的方法并且一个接受布尔参数，这意味着 SWIG 总是适用于接受布尔值的特定重载，这是非常不可取的。

看看 SWIG 在接口文件中检查布尔类型的方式，这种行为并不奇怪

```
SWIGINTERN int
SWIG_AsVal_bool (PyObject *obj, bool *val)
{
  int r = PyObject_IsTrue(obj);
  if (r == -1)
    return SWIG_ERROR;
  if (val) *val = r ? true : false;
  return SWIG_OK;
} 
```

正如 Python 文档所说的 PyObject_IsTrue

> 如果对象 o 被认为为真，则返回 1，否则返回 0。这相当于 Python 表达式 not not o。失败时，返回-1。

在动态打字的美妙世界中，“免费啤酒”总是评估为真

```
>>> not not "Free beer"
True 
```

但可以肯定的是，SWIG 必须能够区分一个***为***真的值和一个恰好评估为真的值。任何帮助深表感谢。

# php - 多个 cURL 连接

> ID：12989984
> 
> 赞同：1
> 
> 时间：2012-10-20T15:38:28.337
> 
> 标签：php, curl

我需要建立大约 20 个连接作为 fasas posable，但 curl 只是减慢它的速度。似乎我需要线程化每个连接（我认为你不能在 PHP 中做到这一点）。每个页面大约有 10 秒的加载时间，而且它们似乎都加起来了，即使我使用 curl_multi_exec。谁能帮我？

# heroku - Heroku 会比我目前的 VPS + Reseller 设置便宜吗？

> ID：12989989
> 
> 赞同：1
> 
> 时间：2012-10-20T15:38:52.567
> 
> 标签：heroku

感谢 Michael Hartl 关于 rails 的教程、这个令人惊叹的社区和 twilio，我能够在本月学习 rails 并构建我的第一个应用程序。

我喜欢 git/heroku 工作流程，并开始思考——

目前我有，

在 VPS 上约 20 个轻量级 PHP 站点 我为约 10 个轻量级 PHP 站点每月支付 40 美元 + 在共享经销商帐户上安装 2 个 Wordpress 我每月支付 20 美元

+1 我刚刚制作的应用

PHP 站点基本上是静态站点，其中包含 php_includes，以减少代码重复性。

不过，我对 Heroku 的定价有点困惑，因为我不确定有多少请求构成一个测功机，等等。

对于轻量级 PHP 网站，使用 Heroku 有意义吗？

假设所有 PHP 站点每月总共获得大约 5000 次浏览，其中 2000 次来自 wordpress。

你认为我要花多少钱才能让它们启动并运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:45:49.533

Heroku 会回答 - 这是云，你不应该考虑服务器或 VPS，而是更多 Dynos 等。但是旧习惯很难改掉 :-)

对于您的问题，非常简单的 Dyno 具有 512 MB 内存 (RAM)，而 Dyno 的成本包括您正在使用的带宽和磁盘空间。还有许多其他问题，例如 Dynos 是只读和瞬态的，没有 IP 分配等。

在您的特定情况下，绝对使用 Heroku 进行 Rails 测试和托管。Heroku 为一台 Dyno 提供免费托管服务。（每个额外的 Dyno - 约 34 美元/月）

对于您的静态站点和 PHP，您为什么不使用 AWS 免费套餐，您可以免费获得自己的服务器/vps 以及许多其他服务 - [http://aws.amazon.com/free/](http://aws.amazon.com/free/)

# backbone.js - 在过滤的主干集合上调用 shuffle

> ID：12989994
> 
> 赞同：0
> 
> 时间：2012-10-20T15:39:11.347
> 
> 标签：backbone.js, underscore.js

我正在尝试过滤一个集合，然后对过滤后的值进行洗牌。

我正在考虑使用`where`Backbone 提供的方法。就像是：

```
myRandomModel = @.where({ someAttribute: true }).shuffle()[0] 
```

但是，`where`返回与属性匹配的所有模型的**数组**；并且显然`shuffle`需要一个**列表**来处理：

> **shuffle_** .shuffle(list)
> 返回列表的随机副本

[http://documentcloud.github.com/underscore/#shuffle](http://documentcloud.github.com/underscore/#shuffle)

有没有办法将我的模型数组变成“列表”？还是我应该自己写一些逻辑来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:37:21.760

当下划线文档说*list*时，它们的意思是*array*。所以你可以`_.shuffle`这样使用：

```
shuffled = _([1, 2, 3, 4]).shuffle() 
```

或者在你的情况下：

```
_(@where(someAttribute: true)).shuffle() 
```

但是，由于您只是抓取一个模型，您可以简单地生成一个随机索引而不是改组：

```
matches = @where(someAttribute: true)
a_model = matches[Math.floor(Math.random() * matches.length)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:14:34.317

`shuffle()`and`where()`方法只是 Backbone 集合中下划线方法的代理。下划线方法仍然可以独立工作，以数组作为参数。这是我要做的：

```
myRandomModel = _.shuffle(@.where({ someAttribute: true }))[0] 
```

参考：[http ://documentcloud.github.com/underscore/#shuffle](http://documentcloud.github.com/underscore/#shuffle)

PS：@“mu is too short”是对的，但是要获得一个模型，我会`Math.random()`自己走。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T14:45:43.163

首先在您的收藏中，您应该有一个过滤功能 Like

```
var MyCollection = Backbone.Collection.extend ({
  filtered : function ( ) { 
```

通常你会使用 _.filter 来只获取你想要的模型，但你也可以使用 suffle 作为替代使用 this.models 来获取集合模型这里 shuffle 将混合模型

```
 var results = _ .shuffle( this.models ) ; 
```

然后使用下划线映射您的结果并将其转换为 JSON 像这样

```
 results = _.map( results, function( model ) { return model.toJSON()  } ); 
```

最后返回一个只有结果的新主干集合，如果那是你正在寻找的，你可能只返回 json

```
 return new Backbone.Collection( results ) ; 
```

请注意，如果您不想收集所有数据以供以后使用，您可以使用以下内容并忽略下面的视图；

```
 this.reset( results ) ;        
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:59:10.300

我将以下内容放在我的 application.js 文件中（使用 Rails 3）：

```
Array.prototype.shuffleArray = function() {
  var i = this.length, j, tempi, tempj;
  if ( i === 0 ) return false;
  while ( --i ) {
     j       = Math.floor( Math.random() * ( i + 1 ) );
     tempi   = this[i];
     tempj   = this[j];
     this[i] = tempj;
     this[j] = tempi;
  }
  return this;
}; 
```

现在我可以在数组数组上调用 shuffleArray() 了。不过暂时不要回答这个问题，因为我想知道是否有更好的方法来使用 Underscore/Backbone。

# arrays - 如何为结构中的整数数组赋值？

> ID：12989996
> 
> 赞同：2
> 
> 时间：2012-10-20T15:39:11.480
> 
> 标签：arrays, debugging, pointers, integer, structure

我正在尝试将值分配给结构内的整数数组。我写了一个小测试程序来展示我想要实现的目标。

```
typedef struct{
    int *alpha;
    int *beta;
} data_t;

int main(int argc, char **argv){
    int i=0;
    data_t data;
    for (i=0; i<100; i++){
        data.alpha[i] = i;
        data.beta[i] = i*i;
    }
    for (i=0; data.alpha[i]; i++){
        printf("Alpha = %d.\nBeta = %d.\n", data.alpha[i], data.beta[i]);
    }
    return 0;
} 
```

gdb 告诉我问题出在“data.alpha[i]=i”中，但我不确定如何正确分配该值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:59:18.513

您没有任何整数数组，只有两个未初始化的指针。

尝试

```
typedef struct{
    int alpha[100];
    int beta[100];
} data_t; 
```